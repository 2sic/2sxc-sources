"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"],{320:(T,_,t)=>{t.d(_,{t:()=>s});var i=t(1772),h=t(6474),n=t(1659);let s=(()=>{class l extends h.D{getAppInfo(p){return this.getSignal("admin/app/Statistics",{params:{appid:this.appId,zoneId:this.zoneId}},p)}exportAppUrl(){return`${this.apiUrl(`${i.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl({includeContentGroups:p,resetAppGuid:r,withFiles:E}){return this.getHttpApiUrl("admin/app/SaveData",{params:{appid:this.appId,zoneId:this.zoneId,includeContentGroups:p.toString(),resetAppGuid:r.toString(),withPortalFiles:E.toString()}})}static{this.\u0275fac=(()=>{let p;return function(E){return(p||(p=n.xGo(l)))(E||l)}})()}static{this.\u0275prov=n.jDH({token:l,factory:l.\u0275fac})}}return l})()},693:(T,_,t)=>{function i(n){return new Promise((o,u)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>{o(s.result.split(",")[1])},s.onerror=l=>{u(l)}})}function h(n){return new Promise((o,u)=>{const s=new FileReader;s.readAsText(n),s.onload=()=>{o(s.result)},s.onerror=l=>{u(l)}})}t.d(_,{d:()=>h,n:()=>i})},1475:(T,_,t)=>{t.d(_,{j:()=>u});var i=t(6474),h=t(8624),n=t(1659);let u=(()=>{class s extends i.D{getContentInfo(c,p){return this.getSignal("admin/appParts/get",{params:{appid:this.appId,zoneId:this.zoneId,scope:c}},p)}exportParts(c,p,r){const E=this.apiUrl(h.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+c.join(";")+"&entityIdsString="+p.join(";")+"&templateIdsString="+r.join(";");window.open(E,"_blank","")}static{this.\u0275fac=(()=>{let c;return function(r){return(c||(c=n.xGo(s)))(r||s)}})()}static{this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac})}}return s})()},1726:(T,_,t)=>{t.d(_,{O:()=>i});const i={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},1772:(T,_,t)=>{t.d(_,{I:()=>l,u:()=>s});var i=t(6647),h=t(9452),n=t(3550),o=t(6474),u=t(1659);const s="admin/app/";let l=(()=>{class c extends o.D{importApp(r,E,m=!1){const g=new FormData;return g.append("File",r),g.append("Name",E??""),this.http.post(this.apiUrl(s+"Import"),g,{params:{zoneId:this.zoneId}}).pipe((0,i.n)(y=>{if(m&&y.Messages[0]?.MessageType===n.G1.Warning){const d=prompt(y.Messages[0].Text+" Would you like to install it using another folder name?");if(d)return this.importApp(r,d,!0)}return(0,h.of)(y)}))}static{this.\u0275fac=(()=>{let r;return function(m){return(r||(r=u.xGo(c)))(m||c)}})()}static{this.\u0275prov=u.jDH({token:c,factory:c.\u0275fac})}}return c})()},2570:(T,_,t)=>{t.d(_,{y:()=>p});var i=t(6474),h=t(1659);let p=(()=>{class r extends i.D{getAll(){return this.getSignal("admin/view/all",{params:{appId:this.appId}})}delete(m){return this.getHttpApiUrl("admin/view/delete",{params:{appId:this.appId,Id:m.toString()}})}import(m){const g=new FormData;return g.append("File",m),this.http.post(this.apiUrl("admin/view/import"),g,{params:{appId:this.appId,zoneId:this.zoneId}})}export(m){const g=this.apiUrl("admin/view/json")+"?appId="+this.appId+"&viewId="+m;window.open(g,"_blank","")}getPolymorphism(){return this.getSignal("admin/view/polymorphism",{params:{appId:this.appId}})}getUsage(m){return this.getSignal("admin/view/usage",{params:{appId:this.appId,guid:m}})}static{this.\u0275fac=(()=>{let m;return function(y){return(m||(m=h.xGo(r)))(y||r)}})()}static{this.\u0275prov=h.jDH({token:r,factory:r.\u0275fac})}}return r})()},4007:(T,_,t)=>{t.d(_,{D:()=>n,y:()=>h});var i=t(1726);function h(o){return{[i.O.Boolean]:"toggle_on",[i.O.Custom]:"extension",[i.O.DateTime]:"today",[i.O.Empty]:"crop_free",[i.O.Entity]:"share",[i.O.Hyperlink]:"link",[i.O.Number]:"dialpad",[i.O.String]:"text_fields"}[o]??"device_unknown"}function n(o){return{[i.O.Boolean]:"Boolean (yes/no)",[i.O.Custom]:"Custom - ui-tools or custom types",[i.O.DateTime]:"Date and/or time",[i.O.Empty]:"Empty - for form-titles etc.",[i.O.Entity]:"Entity (other content-items)",[i.O.Hyperlink]:"Link / file reference",[i.O.Number]:"Number",[i.O.String]:"Text / string"}[o]??"device_unknown"}},4839:(T,_,t)=>{t.d(_,{c:()=>s});var i=t(4435),h=t(8873),n=t(1659),o=t(6443);const u={all:!1,getAvailableEntities:!1,getEntities:!1};let s=(()=>{class l{constructor(p,r){this.http=p,this.context=r,this.log=(0,i.Tq)({QueryService:l},u)}getFromQuery(p,r,E,m){this.log.fnIf("getAvailableEntities",{queryUrl:p,params:r,fields:E,entitiesFilter:m});const g=!!r,D=(((r?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(g?`&${r}`:"")+"&$select="+(E??"")).substring(1);return this.http.post(`app/auto/query/${p}?${D}`,{Guids:m})}getEntities({contentTypes:p,itemIds:r,fields:E,log:m}){this.log.fnIf("getEntities",{log:m,contentTypes:p,itemIds:r,fields:E});const y=("&typeNames="+(p?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(r?.join(",")??"")+"&$select="+(E??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${y}`,{})}static{this.\u0275fac=function(r){return new(r||l)(n.KVO(o.Qq),n.KVO(h.o))}}static{this.\u0275prov=n.jDH({token:l,factory:l.\u0275fac})}}return l})()},5445:(T,_,t)=>{t.d(_,{Cu:()=>s.Cu,JL:()=>s.JL,Mk:()=>s.Mk,X6:()=>h.X,ei:()=>s.ei,gs:()=>h.g,tr:()=>i.t,vN:()=>s.vN,xR:()=>s.xR,y0:()=>l.y});var i=t(1479),h=t(7693),s=(t(1475),t(320),t(8624),t(6460)),l=t(2570)},6460:(T,_,t)=>{t.d(_,{Cu:()=>I,JL:()=>D,Mk:()=>y,ei:()=>d,vN:()=>v,xR:()=>S});var i=t(6443),h=t(4600),n=t(6647),o=t(271),u=t(693),s=t(4435),l=t(9234),c=t(6474),p=t(1659);const r={all:!0,getAll:!1,getAllSig:!0,getAllRes:!0,importQuery:!1,clonePipeline:!1,delete:!1,update:!1},y="admin/query/Run",d="admin/query/DebugStream",I="admin/query/Save",D="admin/query/Get",v="admin/query/DataSources";let S=(()=>{class f extends c.D{constructor(){super(...arguments),this.log=(0,s.Tq)({PipelinesService:f},r)}getAll(O){return this.log.fnIf("getAll").r(this.getHttpApiUrl(l.Gg,{params:{appId:this.appId,contentType:O}}))}getAllSig(O,M){const P=this.log.fnIf("getAllSig"),b=this.getSignal(l.Gg,{params:{appId:this.appId,contentType:O}},M);return P.r(b)}getAllRes(O,M){const P=this.log.fnIf("getAllRes"),b=(0,i.fx)(()=>({url:l.Gg,params:{appId:this.appId,contentType:O}}),{defaultValue:M});return P.r(b)}importQuery(O){const M=this.log.fnIf("importQuery"),P=(0,h.H)((0,u.n)(O)).pipe((0,n.n)(b=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:b})),(0,o.T)(b=>({Success:b,Messages:[]})));return M.r(P)}clonePipeline(O){const M=this.log.fnIf("clonePipeline"),P=this.getHttpApiUrl("admin/query/Clone",{params:{Id:O.toString(),appId:this.appId}});return M.r(P)}delete(O){const M=this.log.fnIf("delete"),P=this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:O.toString()}});return M.r(P)}static{this.\u0275fac=(()=>{let O;return function(P){return(O||(O=p.xGo(f)))(P||f)}})()}static{this.\u0275prov=p.jDH({token:f,factory:f.\u0275fac})}}return f})()},7693:(T,_,t)=>{t.d(_,{X:()=>o,g:()=>m});var i=t(1659),h=t(271),n=t(6474);const o="admin/type/",u="admin/type/get",s="admin/type/list",l="admin/type/scopes";let m=(()=>{class g extends n.D{retrieveContentType(d){return this.getHttpApiUrl(u,{params:{appId:this.appId,contentTypeId:d}})}getTypeSig(d,I){return this.getSignal(u,{params:{appId:this.appId,contentTypeId:d}},I)}retrieveContentTypes(d){return this.getHttpApiUrl(s,{params:{appId:this.appId,scope:d}})}getTypesSig(d,I){return this.getSignal(s,{params:{appId:this.appId,scope:d}},I)}getScopes(){return this.getHttpApiUrl(l,{params:{appId:this.appId}}).pipe((0,h.T)(d=>{const I=d.old;return Object.keys(I).map(v=>({name:I[v],value:v}))}))}getScopesSig(d){const I=this.getSignal(l,{params:{appId:this.appId}},d);return(0,i.EWP)(()=>{const v=I();if(!v||!v.old)return[];const S=v.old;return Object.keys(S).map(f=>({name:S[f],value:f}))})}getScopesV2(){return this.getHttpApiUrl(l,{params:{appId:this.appId}}).pipe((0,h.T)(d=>d.scopes))}save(d){return this.http.post(this.apiUrl("admin/type/save"),d,{params:{appid:this.appId}})}delete(d){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:d.NameId}})}import(d){const I=new FormData;for(const D of d)I.append("File",D);return this.http.post(this.apiUrl("admin/type/import"),I,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(d){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceNameId:d}})}static{this.\u0275fac=(()=>{let d;return function(D){return(d||(d=i.xGo(g)))(D||g)}})()}static{this.\u0275prov=i.jDH({token:g,factory:g.\u0275fac})}}return g})()},8624:(T,_,t)=>{t.d(_,{Q:()=>o,S:()=>u});var i=t(1772),h=t(6474),n=t(1659);const o="admin/appParts/";let u=(()=>{class s extends h.D{importAppParts(c){const p=new FormData;return p.append("File",c),this.http.post(this.apiUrl(o+"Import"),p,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(c){return this.http.post(this.apiUrl(i.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:c.toString()}})}static{this.\u0275fac=(()=>{let c;return function(r){return(c||(c=n.xGo(s)))(r||s)}})()}static{this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac})}}return s})()},8742:(T,_,t)=>{t.d(_,{h:()=>b,z:()=>p});var i=t(271),h=t(5445),n=t(1726),o=t(4007);const u={Boolean:{label:(0,o.D)(n.O.Boolean),description:"Yes/no or true/false values"},Custom:{label:(0,o.D)(n.O.Custom),description:"Use for things like gps-pickers (which writes into multiple fields) or for custom-data which serializes something exotic into the db like an array, a custom json or anything"},DateTime:{label:(0,o.D)(n.O.DateTime),description:"For date, time or combined values"},Empty:{label:(0,o.D)(n.O.Empty),description:"Use to structure your form"},Entity:{label:(0,o.D)(n.O.Entity),description:"One or more other content-items"},Hyperlink:{label:(0,o.D)(n.O.Hyperlink),description:"Hyperlink or reference to a picture / file"},Number:{label:(0,o.D)(n.O.Number),description:"Any kind of number"},String:{label:(0,o.D)(n.O.String),description:"Any kind of text"}};var l=t(6474),c=t(1659);const p="admin/field/all",E="admin/field/ReservedNames",v=h.X6+"SetTitle",O="admin/field/GetSharedFields";let b=(()=>{class R extends l.D{paramsAppId(e={}){return{params:{appid:this.appId,...e}}}dataTypes(){return this.getSignal("admin/field/DataTypes",this.paramsAppId(),[],e=>function s(R){const W=[];for(const e of R)W.push({name:e,label:u[e].label,icon:(0,o.y)(e),description:u[e].description});return W}(e))}getInputTypes(){return this.getSignal("admin/field/InputTypes",this.paramsAppId(),[],e=>e.map(a=>({dataType:a.Type.substring(0,a.Type.indexOf("-")),inputType:a.Type,label:a.Label,description:a.Description,isDefault:a.IsDefault,isObsolete:a.IsObsolete,isRecommended:a.IsRecommended,obsoleteMessage:a.ObsoleteMessage,icon:a.IsDefault?"stars":a.IsRecommended?"star":null,sort:(a.IsObsolete?"z":a.IsDefault?"a":a.IsRecommended?"b":"c")+a.Label})).sort((a,A)=>a.sort.localeCompare(A.sort)))}getReservedNames(){return this.getHttpApiUrl(E)}reservedNames(){return this.getSignal(E,null,{})}getFields(e){return this.getHttpApiUrl(p,this.paramsAppId({staticName:e})).pipe((0,i.T)(a=>{if(a)for(const A of a){if(!A.Metadata)continue;const U=A.Metadata;U.merged={...U.All,...U[A.Type],...U[A.InputType]}}return a}))}getFieldsSig(e){return this.getSignal(p,this.paramsAppId({staticName:e}),[],a=>{if(a)for(const A of a){if(!A.Metadata)continue;const U=A.Metadata;U.merged={...U.All,...U[A.Type],...U[A.InputType]}}return a})}getShareableFields(){return this.getHttpApiUrl(O,this.paramsAppId())}getShareableFieldsFor(e){return this.#t(O,e)}getAncestors(e){return this.#t("admin/field/GetAncestors",e)}getDescendants(e){return this.#t("admin/field/GetDescendants",e)}#t(e,a){return this.getHttpApiUrl(e,this.paramsAppId({attributeId:a}))}addInheritedField(e,a,A,U){return this.http.post(this.apiUrl("admin/field/AddInheritedField"),null,this.paramsAppId({contentTypeId:e.toString(),sourceType:a,sourceField:A,name:U}))}share(e,a=!0){return this.http.post(this.apiUrl("admin/field/Share"),null,{params:{appid:this.appId,attributeId:e.toString(),share:a}})}inherit(e,a){return this.http.post(this.apiUrl("admin/field/Inherit"),null,{params:{appid:this.appId,attributeId:e.toString(),inheritMetadataOf:a}})}reOrder(e,a){return this.http.post(this.apiUrl("admin/field/Sort"),null,{params:{appid:this.appId,contentTypeId:a.Id.toString(),order:JSON.stringify(e)}})}setTitle(e,a){return this.http.post(this.apiUrl(v),null,{params:{appid:this.appId,contentTypeId:a.Id.toString(),attributeId:e.Id.toString()}})}rename(e,a,A){return this.http.post(this.apiUrl("admin/field/Rename"),null,{params:{appid:this.appId,contentTypeId:a.toString(),attributeId:e.toString(),newName:A}})}delete(e,a){if(e.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl("admin/field/Delete"),{params:{appid:this.appId,contentTypeId:a.Id.toString(),attributeId:e.Id.toString()}})}add(e,a){return this.http.post(this.apiUrl("admin/field/Add"),null,{params:{AppId:this.appId,ContentTypeId:a.toString(),Id:e.Id.toString(),Type:e.Type,InputType:e.InputType,StaticName:e.StaticName,IsTitle:e.IsTitle.toString(),Index:e.SortOrder.toString()}})}updateInputType(e,a,A){return this.http.post(this.apiUrl("admin/field/InputType"),null,{params:{appId:this.appId,attributeId:e,field:a,inputType:A}})}static{this.\u0275fac=(()=>{let e;return function(A){return(e||(e=c.xGo(R)))(A||R)}})()}static{this.\u0275prov=c.jDH({token:R,factory:R.\u0275fac})}}return R})()},9234:(T,_,t)=>{t.d(_,{Gg:()=>m,Tr:()=>g,gb:()=>E});var i=t(1567),h=t(6647),n=t(6301),o=t(271),u=t(2938),s=t(4435),l=t(6474),c=t(4839),p=t(1659);const r={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},E="admin/entity/",m="admin/entity/list";let g=(()=>{class y extends l.D{constructor(){super(...arguments),this.log=(0,s.Tq)({EntityService:y},r),this.queryService=(0,u.d)(c.c)}getEntities$(I){return this.log.fnIf("getEntities"),I.pipe((0,i.p)(D=>null!=D),(0,h.n)(D=>this.getAvailableEntities(D.contentTypeName).pipe((0,n.t)(1))))}getAvailableEntities(I,D){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[I],itemIds:D,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,o.T)(S=>S.Default))}delete(I,D,v,S,f,C){return this.log.fnIf("delete",{appId:I,contentType:D,entityId:v,force:S,parentId:f,parent}),this.http.delete(this.apiUrl(E+"delete"),{params:{contentType:D,id:v.toString(),appId:I,force:S.toString(),...f&&{parentId:f.toString()},...f&&C&&{parentField:C}}})}static{this.\u0275fac=(()=>{let I;return function(v){return(I||(I=p.xGo(y)))(v||y)}})()}static{this.\u0275prov=p.jDH({token:y,factory:y.\u0275fac})}}return y})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.05/dist/ng-edit/default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts.a105977ce7310288.js.map