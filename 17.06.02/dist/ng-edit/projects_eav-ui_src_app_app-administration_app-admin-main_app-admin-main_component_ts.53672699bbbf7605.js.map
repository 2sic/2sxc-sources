{"version":3,"file":"projects_eav-ui_src_app_app-administration_app-admin-main_app-admin-main_component_ts.53672699bbbf7605.js","mappings":"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","names":["AppAdminMenu","name","path","icon","svgIcon","tippy","eavConstants","scopes","default","value","child","GoToCopilot","routeDefinition","GoToDevRest","routeDataDefinition","routeQueryDefinition","i0","_r12","_r9","opened","vm_r1","dialogSettings","Context","App","Icon","_r15","Name","breadcrumb_r17","AppAdminMainComponent_Conditional_0_ng_container_13_Conditional_1_Template","last_r19","AppAdminMainComponent_Conditional_0_Conditional_2_Template","AppAdminMainComponent_Conditional_0_Conditional_3_Template","AppAdminMainComponent_Conditional_0_Conditional_5_Template","AppAdminMainComponent_Conditional_0_Conditional_6_Template","AppAdminMainComponent_Conditional_0_ng_container_13_Template","AppAdminMainComponent_Conditional_0_ng_template_14_Template","_r28","ctx_r27","closeDialog","AppAdminMainComponent_Conditional_0_For_24_Template","_forTrack1","ctx","SettingsScope","ctx_r0","AppScopes","Global","_r8","smallScreen","matches","sideNavOpened","navItems","AppAdminMainComponent","BaseComponent","constructor","router","route","dialogRef","appDialogConfigService","media","super","EavLogger","this","dialogSettings$","BehaviorSubject","undefined","pathsArray$","currentPath$","combineLatest","events","pipe","filter","event","NavigationEnd","map","snapshot","firstChild","url","startWith","paths","currentPath","viewModel$","matchMedia","log","add","ngOnInit","fetchDialogSettings","subscription","refreshOnChildClosedShallow","subscribe","addEventListener","c","sidenav","mode","ngOnDestroy","complete","close","getCurrent$","UpdateEnvVarsFromDialogSettings","next","Enable","Query","item","static","t","i1","i2","i3","i4","core","In1","selectors","viewQuery","rf","AppDialogConfigService","decls","vars","consts","template","AppAdminMainComponent_Conditional_0_Template","AppAdminMainComponent_contFlowTmp"],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-menu.ts","./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-main.component.html","./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-main.component.ts"],"sourcesContent":["import { NavItem } from \"../../shared/models/nav-item.model\";\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { GoToCopilot } from '../copilot/go-to-copilot';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\n\r\nexport const AppAdminMenu: NavItem[] = [\r\n\r\n  { name: 'Info', path: 'home', icon: 'info', svgIcon: false, tippy: 'App Info' },\r\n  {\r\n    name: 'Data', path: `data/${eavConstants.scopes.default.value}`, icon: 'menu', svgIcon: false, tippy: 'Data / Content',\r\n    child: [\r\n      { ...GoToCopilot.routeDefinition('data'), tippy: 'Autogenerate content types ' },\r\n      { ...GoToDevRest.routeDataDefinition, tippy: 'Rest-Api Data ' },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Queries',\r\n    path: 'queries',\r\n    icon: 'filter_list',\r\n    svgIcon: false,\r\n    tippy: 'Queries / Visual Query Designer',\r\n    child: [\r\n      { ...GoToDevRest.routeQueryDefinition, tippy: 'Rest-Api Queries' },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Views',\r\n    path: 'views',\r\n    icon: 'layers',\r\n    svgIcon: false,\r\n    tippy: 'Views / Templates',\r\n    child: [\r\n      {\r\n        ...GoToCopilot.routeDefinition('views'),\r\n        tippy: 'Autogenerate Razor Views'\r\n      },\r\n    ]\r\n  },\r\n  { name: 'Web API', path: 'web-api', icon: 'offline_bolt', svgIcon: false, tippy: 'WebApi' },\r\n  {\r\n    name: 'App',\r\n    path: 'app',\r\n    icon: 'settings_applications',\r\n    svgIcon: false,\r\n    tippy: 'App Settings',\r\n  },\r\n  { name: 'Sync', path: 'sync', icon: 'sync', svgIcon: false, tippy: 'App Export / Import' },\r\n];\r\n","@if (viewModel$ | async; as vm) {\r\n<mat-toolbar>\r\n  <div class=\"toolbar-container\">\r\n    <!-- App Logo -->\r\n    @if (vm.dialogSettings?.Context.App.Icon) {\r\n    <img (click)=\"sidenav.opened = !sidenav.opened\"\r\n      [src]=\"vm.dialogSettings?.Context.App.Icon + '?w=40&h=40&mode=crop'\" />\r\n    } @else {\r\n    <mat-icon class=\"menu-container\" (click)=\"sidenav.opened = !sidenav.opened\">menu</mat-icon>\r\n    }\r\n    <!-- App Name -->\r\n    <div class=\"d-flex\">\r\n      @if (vm.dialogSettings?.Context.App.SettingsScope === AppScopes.Global) {\r\n      Global\r\n      }\r\n      @if (vm.dialogSettings?.Context.App.SettingsScope !== AppScopes.Global) {\r\n      {{ vm.dialogSettings?.Context.App.Name }}\r\n      }\r\n      <span>\r\n        <span class=\"mat-icon-admin\">\r\n          <mat-icon>settings</mat-icon>\r\n        </span>\r\n        Admin\r\n      </span>\r\n    </div>\r\n    <!-- Breadcrumb in the Toolbar after show Img and Aoo Name -->\r\n    <xng-breadcrumb [separator]=\"emptyTemplate\">\r\n      <ng-container *xngBreadcrumbItem=\"let breadcrumb; let info = info; let last = last\">\r\n        @if (last) {\r\n        <mat-icon class=\"breadcrumb-icon\">chevron_right</mat-icon>\r\n        {{ breadcrumb }}\r\n        }\r\n      </ng-container>\r\n    </xng-breadcrumb>\r\n    <ng-template #emptyTemplate></ng-template>\r\n  </div>\r\n  <span class=\"toolbar-spacer\"></span>\r\n  <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n    <mat-icon>close</mat-icon>\r\n  </button>\r\n</mat-toolbar>\r\n<mat-sidenav-container>\r\n\r\n  <mat-sidenav #sidenav [mode]=\"smallScreen.matches ? 'over' : 'side'\" [opened]=\"sideNavOpened\">\r\n    @for (navItem of navItems; track navItem.path) {\r\n    <app-nav-item-list [navItem]=\"navItem\"></app-nav-item-list>\r\n    }\r\n    <div class=\"sideNav-bottom-info\">\r\n      <p>use App logo to show/hide menu</p>\r\n    </div>\r\n  </mat-sidenav>\r\n\r\n  <mat-sidenav-content>\r\n    <router-outlet></router-outlet>\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n}\r\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, filter, map, startWith, tap } from 'rxjs';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { UpdateEnvVarsFromDialogSettings } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { AppScopes } from '../../shared/models/dialog-context.models';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { AppDialogConfigService } from '../services/app-dialog-config.service';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { MediaMatcher } from '@angular/cdk/layout';\r\nimport { AppAdminMenu } from './app-admin-menu';\r\nimport { EavLogger } from '../../shared/logging/eav-logger';\r\n\r\nconst logThis = false;\r\n\r\n@Component({\r\n  selector: 'app-app-admin-main',\r\n  templateUrl: './app-admin-main.component.html',\r\n  styleUrls: ['./app-admin-main.component.scss'],\r\n  providers: [\r\n    // Must have a new config service here, to restart with new settings\r\n    // which are injected into it from the context\r\n    // Because of standalone-components, it's not enough to have it in the module-definition\r\n    AppDialogConfigService,\r\n  ],\r\n})\r\nexport class AppAdminMainComponent extends BaseComponent implements OnInit, OnDestroy {\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private dialogRef: MatDialogRef<AppAdminMainComponent>,\r\n    private appDialogConfigService: AppDialogConfigService,\r\n    private media: MediaMatcher\r\n  ) {\r\n    super(router, route, new EavLogger('AppAdminMainComponent', logThis));\r\n    this.log.add('constructor', 'appDialogConfigService', appDialogConfigService);\r\n  }\r\n\r\n  AppScopes = AppScopes;\r\n\r\n  private dialogSettings$ = new BehaviorSubject<DialogSettings>(undefined);\r\n  private pathsArray$ = new BehaviorSubject<string[]>(undefined);\r\n  private currentPath$ = combineLatest([\r\n    this.pathsArray$,\r\n    this.router.events.pipe(\r\n      filter((event) => event instanceof NavigationEnd),\r\n      map(() => this.route.snapshot.firstChild.url[0].path),\r\n      startWith(this.route.snapshot.firstChild.url[0].path)\r\n    ),\r\n  ]).pipe(\r\n    map(([paths, currentPath]) => {\r\n      if (paths == null) return;\r\n      return currentPath;\r\n    })\r\n  );\r\n\r\n  // Generate View Model\r\n  viewModel$ = combineLatest([this.dialogSettings$, this.currentPath$]).pipe(\r\n    map(([dialogSettings, currentPath]) => {\r\n      return {\r\n        dialogSettings,\r\n        currentPath,\r\n      };\r\n    })\r\n  );\r\n\r\n  smallScreen: MediaQueryList = this.media.matchMedia('(max-width: 1000px)');\r\n  @ViewChild('sidenav') sidenav!: MatSidenav;\r\n  sideNavOpened = !this.smallScreen.matches;\r\n\r\n  /** Navigation menu buttons - prefilled; may be modified after settings are loaded */\r\n  navItems = AppAdminMenu;\r\n\r\n  matcher!: MediaQueryList;\r\n\r\n\r\n  ngOnInit() {\r\n    this.fetchDialogSettings();\r\n    this.subscription.add(\r\n      this.refreshOnChildClosedShallow().subscribe(() => {\r\n        this.fetchDialogSettings();\r\n      })\r\n    );\r\n\r\n    this.smallScreen.addEventListener(\r\n      'change',\r\n      (c) => (\r\n        this.sidenav.opened = !c.matches,\r\n        this.sidenav.mode = c.matches ? 'over' : 'side'\r\n      )\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dialogSettings$.complete();\r\n    this.pathsArray$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  // @2dg not longer in use with new routing SideNav\r\n  // changeUrl(path: string) {\r\n  //   // if (path === 'data') path = `data/${eavConstants.scopes.default.value}`;\r\n  //   // this.router.navigate([path], { relativeTo: this.route });\r\n  // }\r\n\r\n  private fetchDialogSettings() {\r\n    this.appDialogConfigService.getCurrent$().subscribe((dialogSettings) => {\r\n      UpdateEnvVarsFromDialogSettings(dialogSettings.Context.App);\r\n      this.dialogSettings$.next(dialogSettings);\r\n\r\n      if (!dialogSettings.Context.Enable.Query)\r\n        this.navItems = this.navItems.filter(\r\n          (item) => item.name !== 'Queries' && item.name !== 'Web API'\r\n        );\r\n\r\n      this.pathsArray$.next(this.navItems.map((item) => item.path));\r\n    });\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}