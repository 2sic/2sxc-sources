"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts"],{5248:(y,d,n)=>{n.r(d),n.d(d,{CreateInheritedAppComponent:()=>R});var r=n(1904),_=n(600),h=n(4844),E=n(5876),f=n(604),c=n(924),I=n(5056),m=n(4672),v=n(988),u=n(6176),C=n(7872),p=n(244),A=n(5204),e=n(4896),O=n(4648),g=n(9084);function D(i,s){if(1&i&&(e.I0R(0,"mat-option",12),e.OEk(1),e.C$Y()),2&i){const t=s.$implicit;e.E7m("value",t.Id),e.yG2(1),e.oRS(" ",t.Name," ")}}function M(i,s){1&i&&(e.I0R(0,"app-field-hint",8),e.OEk(1," Required "),e.C$Y()),2&i&&e.E7m("isError",!0)}function P(i,s){if(1&i){const t=e.KQA();e.I0R(0,"div",1)(1,"div",2)(2,"div",3),e.OEk(3,"Create inherited App"),e.C$Y()(),e.I0R(4,"div",4),e.wR5(5,"router-outlet"),e.I0R(6,"p"),e.OEk(7," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),e.C$Y(),e.I0R(8,"form",5)(9,"mat-form-field",6)(10,"mat-label"),e.OEk(11,"Inherit App"),e.C$Y(),e.I0R(12,"mat-select",7),e.c53(13,D,2,2,"mat-option",12,e.oxv),e.C$Y()(),e.yuY(15,M,2,1,"app-field-hint",8),e.C$Y()(),e.I0R(16,"mat-dialog-actions",9)(17,"button",10),e.qCj("click",function(){e.usT(t);const o=e.GaO();return e.CGJ(o.closeDialog())}),e.OEk(18," Cancel "),e.C$Y(),e.I0R(19,"button",11),e.qCj("click",function(){e.usT(t);const o=e.GaO();return e.CGJ(o.create())}),e.OEk(20," Create "),e.C$Y()()()}if(2&i){const t=e.GaO();e.yG2(8),e.E7m("formGroup",t.form),e.yG2(4),e.E7m("placeholder",void 0===s.inheritableApps?"Loading...":null===s.inheritableApps||0===s.inheritableApps.length?"No inheritable apps found":""),e.yG2(1),e.oho(s.inheritableApps),e.yG2(2),e.C0Y(15,t.form.controls.inheritId.touched&&null!=t.form.controls.inheritId.errors&&t.form.controls.inheritId.errors.required?15:-1),e.yG2(2),e.E7m("disabled",s.loading),e.yG2(2),e.E7m("disabled",s.loading||!t.form.valid)}}let R=(()=>{class i{constructor(t,a,o){this.dialogRef=t,this.appsListService=a,this.snackBar=o,this.hostClass="dialog-component",this.form=this.buildForm(),this.loading$=new h.g(!1),this.inheritableApps$=new h.g(void 0),this.viewModel$=(0,E.E)([this.loading$,this.inheritableApps$]).pipe((0,f.k)(([l,b])=>({loading:l,inheritableApps:b})))}ngOnInit(){this.fetchInheritedApps()}ngOnDestroy(){this.loading$.complete(),this.inheritableApps$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const t=this.form.controls.inheritId.value,a=this.inheritableApps$.value.find(o=>o.Id===t).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(a,t).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}fetchInheritedApps(){this.appsListService.getInheritable().subscribe({error:()=>{this.inheritableApps$.next(null)},next:t=>{this.inheritableApps$.next(t)}})}buildForm(){return new r.k1({inheritId:new r.yM(null,[r.AQ.required])})}static#e=this.\u0275fac=function(a){return new(a||i)(e.GI1(_.yI),e.GI1(c.m),e.GI1(O.yS))};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(a,o){2&a&&e.SoX("className",o.hostClass)},standalone:!0,features:[e.M5G([c.m]),e.UHJ],decls:2,vars:3,consts:[["class","eav-dialog"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-form-field"],["formControlName","inheritId",3,"placeholder"],[3,"isError"],["align","end"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"]],template:function(a,o){if(1&a&&(e.yuY(0,P,21,5,"div",0),e.wVc(1,"async")),2&a){let l;e.C0Y(0,(l=e.kDX(1,1,o.viewModel$))?0:-1,l)}},dependencies:[A.cP,r.y,r.sz,r.ue,r.u,r.sl,r.uW,r.Wo,p.wb,p.Up,p.w5,C.d5,C.kX,u.I5,u.Ax,v.q,g.o,_.Yp,m.oJ,m.Gw,I.a]})}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.06.02/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts.3cf9cbe5fa8c90c5.js.map