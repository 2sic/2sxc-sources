(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_content-items_content-item-import_content-item-import_component_ts"],{4595:function(t,e,i){"use strict";i.r(e),i.d(e,{ContentItemImportComponent:function(){return k}});var n=i(4762),o=i(2935),s=i(8512),r=i(1305),c=i(9996),l=i(1785),p=i(1282),a=i(2832),m=i(5223),u=i(3589),g=i(1116),f=i(5921),d=i(4369),h=i(7512),x=i(7672);function I(t,e){1&t&&l._UZ(0,"mat-spinner",12)}function v(t,e){1&t&&(l.TgZ(0,"div",17),l._uU(1," The import has been done. See the messages below for more information. "),l.qZA())}function Z(t,e){1&t&&(l.TgZ(0,"div",18),l._uU(1," The import failed. See the messages below for more information. "),l.qZA())}var T=function(t,e,i){return{"sxc-message-warning":t,"sxc-message-success":e,"sxc-message-error":i}};function y(t,e){if(1&t&&(l.TgZ(0,"div",19),l._uU(1),l.qZA()),2&t){var i=e.$implicit;l.Q6J("ngClass",l.kEZ(2,T,0===i.MessageType,1===i.MessageType,2===i.MessageType)),l.xp6(1),l.hij(" ",i.Text," ")}}function $(t,e){if(1&t&&(l.TgZ(0,"div",13),l.YNc(1,v,2,0,"div",14),l.YNc(2,Z,2,0,"div",15),l.YNc(3,y,2,6,"div",16),l.qZA()),2&t){var i=l.oxw().ngIf;l.xp6(1),l.Q6J("ngIf",i.importResult.Success),l.xp6(1),l.Q6J("ngIf",!i.importResult.Success),l.xp6(1),l.Q6J("ngForOf",i.importResult.Messages)}}function b(t,e){if(1&t){var i=l.EpF();l.ynx(0),l.TgZ(1,"button",20),l.NdJ("click",function(){return l.CHM(i),l.oxw(2).closeDialog()}),l._uU(2,"Cancel"),l.qZA(),l.TgZ(3,"button",21),l.NdJ("click",function(){return l.CHM(i),l.oxw(2).importContentItem()}),l._uU(4," Import "),l.qZA(),l.BQk()}if(2&t){var n=l.oxw().ngIf;l.xp6(3),l.Q6J("disabled",!n.importFile||n.isImporting||!!n.importResult)}}function C(t,e){if(1&t){var i=l.EpF();l.ynx(0),l.TgZ(1,"button",22),l.NdJ("click",function(){return l.CHM(i),l.oxw(2).closeDialog()}),l._uU(2,"Close"),l.qZA(),l.BQk()}}function w(t,e){if(1&t){var i=l.EpF();l.TgZ(0,"div",1),l.NdJ("filesDropped",function(t){return l.CHM(i),l.oxw().filesDropped(t)}),l.TgZ(1,"div",2),l.TgZ(2,"div",3),l._uU(3),l.ALo(4,"async"),l.qZA(),l.qZA(),l.YNc(5,I,1,0,"mat-spinner",4),l.TgZ(6,"p",5),l._uU(7,"Select an item file (json) from your computer to import."),l.qZA(),l.TgZ(8,"div"),l.TgZ(9,"button",6),l.NdJ("click",function(){return l.CHM(i),l.MAs(13).click()}),l.TgZ(10,"span"),l._uU(11),l.qZA(),l.qZA(),l.TgZ(12,"input",7,8),l.NdJ("change",function(t){return l.CHM(i),l.oxw().fileChange(t)}),l.qZA(),l.qZA(),l.YNc(14,$,4,3,"div",9),l.TgZ(15,"div",10),l.YNc(16,b,5,1,"ng-container",11),l.YNc(17,C,3,0,"ng-container",11),l.qZA(),l.qZA()}if(2&t){var n,o=e.ngIf,s=l.oxw();l.Q6J("allowedFileTypes","json"),l.xp6(3),l.hij("",null==(n=l.lcZ(4,8,s.contentType$))?null:n.Name," Import Single Item"),l.xp6(2),l.Q6J("ngIf",o.isImporting),l.xp6(4),l.Q6J("disabled",o.isImporting),l.xp6(2),l.Oqu(o.importFile?o.importFile.name:"Select or drop file"),l.xp6(3),l.Q6J("ngIf",o.importResult),l.xp6(2),l.Q6J("ngIf",!(null!=o.importResult&&o.importResult.Success)),l.xp6(1),l.Q6J("ngIf",null==o.importResult?null:o.importResult.Success)}}var k=function(){function t(t,e,i,o,l,p){this.dialogData=t,this.dialogRef=e,this.route=i,this.contentTypesService=o,this.contentItemsService=l,this.snackBar=p,this.hostClass="dialog-component",this.contentType$=new s.X(null),this.isImporting$=new s.X(!1),this.importFile$=new s.X(null),this.importResult$=new s.X(null),this.templateVars$=(0,r.aj)([this.isImporting$,this.importFile$,this.importResult$]).pipe((0,c.U)(function(t){var e=(0,n.CR)(t,3);return{isImporting:e[0],importFile:e[1],importResult:e[2]}})),this.contentTypeStaticName=this.route.snapshot.parent.paramMap.get("contentTypeStaticName")}return t.prototype.ngOnInit=function(){var t=this;this.contentTypesService.retrieveContentType(this.contentTypeStaticName).subscribe(function(e){t.contentType$.next(e)}),null!=this.dialogData.files&&(this.importFile$.next(this.dialogData.files[0]),this.importContentItem())},t.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.filesDropped=function(t){this.importFile$.next(t[0]),this.importResult$.next(null),this.importContentItem()},t.prototype.fileChange=function(t){this.importFile$.next(t.target.files[0]),this.importResult$.next(null)},t.prototype.importContentItem=function(){var t=this;this.isImporting$.next(!0),this.contentItemsService.importItem(this.importFile$.value).subscribe({next:function(e){t.isImporting$.next(!1),t.importResult$.next({Success:!0,Messages:[]})},error:function(e){t.isImporting$.next(!1),t.importResult$.next(null),t.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})},t.\u0275fac=function(e){return new(e||t)(l.Y36(o.WI),l.Y36(o.so),l.Y36(p.gz),l.Y36(a.s),l.Y36(m.l),l.Y36(u.ux))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-content-item-import"]],hostVars:1,hostBindings:function(t,e){2&t&&l.Ikx("className",e.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["mat-raised-button","","tippy","Open file browser",3,"disabled","click"],["type","file",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(l.YNc(0,w,18,10,"div",0),l.ALo(1,"async")),2&t&&l.Q6J("ngIf",l.lcZ(1,1,e.templateVars$))},directives:[g.O5,f.z,o.uh,d.lW,h.$,x.$g,g.sg,g.mk],pipes:[g.Ov],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"]}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.04.00/ng-edit/projects_ng-dialogs_src_app_content-items_content-item-import_content-item-import_component_ts.6427b8ecd1c00b0ebc14.js.map