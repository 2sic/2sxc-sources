{"version":3,"sources":["./projects/ng-dialogs/src/app/shared/helpers/load-scripts.helper.ts"],"names":["loadScripts","scriptObjects","callback","iteration","newCallback","length","bind","this","scrObj","global","test","window","scriptInDom","document","querySelector","src","addEventListener","once","scriptEl","createElement","head","appendChild"],"mappings":"qKAIO,SAASA,EAAYC,EAA+BC,EAAsBC,QAAA,IAAAA,MAAY,GAC3F,IACMC,EADSH,EAAcI,SAAWF,EAAY,EACvBD,EAAWF,EAAYM,KAAKC,KAAMN,EAAeC,EAAUC,EAAY,GAC9FK,EAASP,EAAcE,GAEvBM,EAAgC,iBAAhBD,EAAOE,KAAoBF,EAAOE,KAAO,KACzDA,EAA8B,mBAAhBF,EAAOE,KAAsBF,EAAOE,KAAO,KAE/D,GAAc,MAAVD,GAAoBE,OAAOF,GAC7BP,SAIF,GAAY,MAARQ,GAAgBA,IAClBR,QADF,CAKA,IAAMU,EAAcC,SAASC,cAAiC,eAAeN,EAAOO,IAAG,MACvF,GAAIH,EACFA,EAAYI,iBAAiB,OAAQZ,EAAa,CAAEa,MAAM,QAD5D,CAKA,IAAMC,EAAWL,SAASM,cAAc,UACxCD,EAASH,IAAMP,EAAOO,IACtBG,EAASF,iBAAiB,OAAQZ,EAAa,CAAEa,MAAM,IACvDJ,SAASO,KAAKC,YAAYH,K","file":"projects_ng-dialogs_src_app_shared_helpers_load-scripts_helper_ts.b027c62749437b9f105f.js","sourcesContent":["import { WindowObject } from '../models/eav-window.model';\r\n\r\ndeclare const window: WindowObject;\r\n\r\nexport function loadScripts(scriptObjects: ScriptObject[], callback: () => void, iteration = 0) {\r\n  const isLast = scriptObjects.length === iteration + 1;\r\n  const newCallback = isLast ? callback : loadScripts.bind(this, scriptObjects, callback, iteration + 1);\r\n  const scrObj = scriptObjects[iteration];\r\n\r\n  const global = typeof scrObj.test === 'string' ? scrObj.test : null;\r\n  const test = typeof scrObj.test === 'function' ? scrObj.test : null;\r\n\r\n  if (global != null && !!window[global]) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  if (test != null && test()) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  const scriptInDom = document.querySelector<HTMLScriptElement>(`script[src=\"${scrObj.src}\"]`);\r\n  if (scriptInDom) {\r\n    scriptInDom.addEventListener('load', newCallback, { once: true });\r\n    return;\r\n  }\r\n\r\n  const scriptEl = document.createElement('script');\r\n  scriptEl.src = scrObj.src;\r\n  scriptEl.addEventListener('load', newCallback, { once: true });\r\n  document.head.appendChild(scriptEl);\r\n}\r\n\r\nexport interface ScriptObject {\r\n  /** window.xxx or a function that returns a boolean */\r\n  test: string | (() => boolean);\r\n  src: string;\r\n}\r\n"],"sourceRoot":"webpack:///"}