{"version":3,"sources":["./src/app/app-administration/getting-started/getting-started.component.ts","./src/app/app-administration/getting-started/getting-started.component.html","./src/app/app-administration/ag-grid-components/data-items/data-items.component.ts","./src/app/app-administration/ag-grid-components/data-items/data-items.component.html","./src/app/app-administration/ag-grid-components/data-fields/data-fields.component.html","./src/app/app-administration/ag-grid-components/data-fields/data-fields.component.ts","./src/app/app-administration/ag-grid-components/data-actions/data-actions.component.html","./src/app/app-administration/ag-grid-components/data-actions/data-actions.component.ts","./src/app/app-administration/data/data.component.html","./src/app/app-administration/data/data.component.ts","./src/app/app-administration/ag-grid-components/queries-actions/queries-actions.component.ts","./src/app/app-administration/ag-grid-components/queries-actions/queries-actions.component.html","./src/app/app-administration/queries/queries.component.ts","./src/app/app-administration/queries/queries.component.html","./src/app/app-administration/views/views.helpers.ts","./src/app/app-administration/ag-grid-components/views-type/views-type.component.ts","./src/app/app-administration/ag-grid-components/views-type/views-type.component.html","./src/app/app-administration/ag-grid-components/views-show/views-show.component.html","./src/app/app-administration/ag-grid-components/views-show/views-show.component.ts","./src/app/app-administration/ag-grid-components/views-actions/views-actions.component.ts","./src/app/app-administration/ag-grid-components/views-actions/views-actions.component.html","./src/app/app-administration/views/views.component.ts","./src/app/app-administration/views/polymorph-logo.png","./src/app/app-administration/views/views.component.html","./src/app/app-administration/ag-grid-components/web-api-actions/web-api-actions.component.ts","./src/app/app-administration/ag-grid-components/web-api-actions/web-api-actions.component.html","./src/app/app-administration/web-api/web-api.component.ts","./src/app/app-administration/web-api/web-api.component.html","./src/app/app-administration/app-configuration/app-configuration.component.html","./src/app/app-administration/app-configuration/app-configuration.component.ts","./src/app/app-administration/app-administration-nav/app-administration-nav.component.html","./src/app/app-administration/app-administration-nav/app-administration-nav.component.ts","./src/app/shared/constants/eav.constants.ts"],"names":["sanitizer","ngOnInit","this","gettingStartedSafe","bypassSecurityTrustResourceUrl","gettingStartedUrl","GettingStartedComponent","agInit","params","value","refresh","DataItemsComponent","contentType","data","DataFieldsComponent","enableAppFeatures","enableAppFeaturesGetter","showPermissions","isGuid","StaticName","createOrEditMetadata","onCreateOrEditMetadata","openExport","onOpenExport","openImport","onOpenImport","openPermissions","onOpenPermissions","deleteContentType","onDelete","txtToTest","RegExp","test","DataActionsComponent","router","route","contentTypesService","globalConfigurationService","appDialogConfigService","snackBar","debugEnabled","modules","gridOptions","frameworkComponents","idFieldComponent","dataItemsComponent","dataFieldsComponent","dataActionsComponent","columnDefs","headerName","field","width","headerClass","cellClass","cellRenderer","sortable","filter","valueGetter","idValueGetter","flex","minWidth","sort","onCellClicked","showContentItems","bind","nameValueGetter","addItem","editFields","cellRendererParams","e","editContentType","subscription","Subscription","hasChild","snapshot","firstChild","scope","scopes","default","defaultScope","getDialogSettings","toPromise","dialogSettings","IsContent","fetchScopes","fetchContentTypes","refreshOnChildClosed","add","getDebugEnabled","subscribe","ngOnDestroy","unsubscribe","navigate","relativeTo","UsesSharedDef","alert","Id","retrieveContentTypes","contentTypes","getScopes","scopeOptions","createGhost","sourceName","window","prompt","open","res","duration","changeScope","event","newScope","find","option","push","name","Name","Label","JSON","stringify","items","ContentTypeName","form","Metadata","EntityId","toString","For","Target","metadata","target","String","Prefill","Description","entity","type","keyTypes","guid","confirm","delete","result","events","pipe","hadChild","DataComponent","editQuery","onEditQuery","cloneQuery","onCloneQuery","exportQuery","onExportQuery","deleteQuery","QueriesActionsComponent","pipelinesService","contentExportService","dialogService","queriesActionsComponent","openVisualQueryDesigner","fetchQueries","getAll","query","queries","importQuery","TestParameters","pipelineDesigner","testParameters","Guid","openQueryDesigner","clonePipeline","exportEntity","QueriesComponent","calculateViewType","view","icon","HasQuery","List","ContentType","ViewsTypeComponent","ViewsShowComponent","openCode","onOpenCode","deleteView","ViewsActionsComponent","templatesService","polymorphLogo","booleanFilterComponent","viewsTypeComponent","viewsShowComponent","viewsActionsComponent","showValueGetter","editView","typeValueGetter","contentDemoValueGetter","presentationDemoValueGetter","headerDemoValueGetter","headerPresDemoValueGetter","fetchTemplates","fetchPolymorphism","views","getPolymorphism","polymorphism","polymorphStatus","Resolver","template","editPolymorphisms","TypeName","IsHidden","DemoId","DemoTitle","PresentationType","ListContentType","ListPresentationType","openCodeFile","TemplatePath","ViewsComponent","deleteApi","WebApiActionsComponent","webApisService","sanitizeService","webApiActions","fetchWebApis","addController","length","nameLower","sanitizeName","replace","toLocaleLowerCase","extIndex","lastIndexOf","substring","typeIndex","charAt","toLocaleUpperCase","create","paths","webApis","map","path","splitIndex","fileExtIndex","folder","api","WebApiComponent","contentItemsService","context","eavConstants","edit","staticName","contentItems","Error","config","app","number","appId","exportApp","exportParts","importParts","AppConfigurationComponent","dialogRef","tabs","tab","tabIndex","indexOf","url","closeDialog","close","changeTab","index","toggleDebugEnabled","navigator","platform","match","metaKey","ctrlKey","shiftKey","altKey","AppAdministrationNavComponent","attribute","zone","cmsObject","string","permissions","settings","resources","outDataSource","className","in","description","visualDesignerData","Top","Left","Width","defaultPipeline","dataSources","entityGuid","partAssemblyAndType","streamWiring","From","Out","To","In"],"mappings":"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","file":"app-administration-nav-component.418af7cfdef5472e7a87.js","sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\r\nimport { SafeUrl, DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Component({\r\n  selector: 'app-getting-started',\r\n  templateUrl: './getting-started.component.html',\r\n  styleUrls: ['./getting-started.component.scss']\r\n})\r\nexport class GettingStartedComponent implements OnInit {\r\n  @Input() gettingStartedUrl: string;\r\n  gettingStartedSafe: SafeUrl;\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  ngOnInit() {\r\n    this.gettingStartedSafe = this.sanitizer.bypassSecurityTrustResourceUrl(this.gettingStartedUrl);\r\n  }\r\n\r\n}\r\n","<iframe class=\"iframe\" [src]=\"gettingStartedSafe\"></iframe>\r\n","import { Component } from '@angular/core';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/all-modules';\r\n\r\n@Component({\r\n  selector: 'app-data-items',\r\n  templateUrl: './data-items.component.html',\r\n  styleUrls: ['./data-items.component.scss']\r\n})\r\nexport class DataItemsComponent implements ICellRendererAngularComp {\r\n  value: number;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div matRipple class=\"chip-component highlight\" matTooltip=\"Add item\">\r\n  <div class=\"chip-box\">\r\n    <span class=\"chip\">{{ value }}</span>\r\n  </div>\r\n  <div class=\"like-button\">\r\n    <mat-icon>add</mat-icon>\r\n  </div>\r\n</div>\r\n","<div matRipple class=\"chip-component highlight\" matTooltip=\"Edit fields\" *ngIf=\"!contentType.UsesSharedDef\">\r\n  <div class=\"chip-box\">\r\n    <span class=\"chip\">{{ value }}</span>\r\n  </div>\r\n  <div class=\"like-button\">\r\n    <mat-icon>dns</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"chip-component disabled\" *ngIf=\"contentType.UsesSharedDef\"\r\n  matTooltip=\"This content-type shares the definition of #{{contentType.SharedDefId}} so you can't edit it here. Read 2sxc.org/help?tag=shared-types\">\r\n  <div class=\"chip-box\">\r\n    <span class=\"chip\">{{ value }}</span>\r\n  </div>\r\n  <div class=\"like-button disabled\">\r\n    <mat-icon>share</mat-icon>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/all-modules';\r\n\r\nimport { ContentType } from '../../models/content-type.model';\r\n\r\n@Component({\r\n  selector: 'app-data-fields',\r\n  templateUrl: './data-fields.component.html',\r\n  styleUrls: ['./data-fields.component.scss']\r\n})\r\nexport class DataFieldsComponent implements ICellRendererAngularComp {\r\n  contentType: ContentType;\r\n  value: number;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.contentType = params.data;\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"!contentType.UsesSharedDef\" matTooltip=\"Metadata\"\r\n    (click)=\"createOrEditMetadata()\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"contentType.UsesSharedDef\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Export\" (click)=\"openExport()\">\r\n    <mat-icon>cloud_download</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Import\" (click)=\"openImport()\">\r\n    <mat-icon>cloud_upload</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"showPermissions\" matTooltip=\"Permissions\"\r\n    (click)=\"openPermissions()\">\r\n    <mat-icon>person</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"!showPermissions\">\r\n    <mat-icon>person</mat-icon>\r\n  </div>\r\n\r\n  <!-- <div class=\"like-button highlight\" matRipple *ngIf=\"!contentType.UsesSharedDef\" (click)=\"editContentType()\"\r\n    matTooltip=\"Settings\">\r\n    <mat-icon>settings</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"contentType.UsesSharedDef\">\r\n    <mat-icon>settings</mat-icon>\r\n  </div> -->\r\n\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"!contentType.UsesSharedDef\" matTooltip=\"Delete\"\r\n    (click)=\"deleteContentType()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"contentType.UsesSharedDef\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\n\r\nimport { ContentType } from '../../models/content-type.model';\r\nimport { DataActionsParams } from './data-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-data-actions',\r\n  templateUrl: './data-actions.component.html',\r\n  styleUrls: ['./data-actions.component.scss']\r\n})\r\nexport class DataActionsComponent implements ICellRendererAngularComp {\r\n  private params: DataActionsParams;\r\n  contentType: ContentType;\r\n  showPermissions: boolean;\r\n\r\n  agInit(params: DataActionsParams) {\r\n    this.params = params;\r\n    this.contentType = this.params.data;\r\n    const enableAppFeatures = this.params.enableAppFeaturesGetter();\r\n    this.showPermissions = enableAppFeatures && this.isGuid(this.contentType.StaticName);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  // editContentType() {\r\n  //   this.params.onEdit(this.contentType);\r\n  // }\r\n\r\n  createOrEditMetadata() {\r\n    this.params.onCreateOrEditMetadata(this.contentType);\r\n  }\r\n\r\n  openExport() {\r\n    this.params.onOpenExport(this.contentType);\r\n  }\r\n\r\n  openImport() {\r\n    this.params.onOpenImport(this.contentType);\r\n  }\r\n\r\n  openPermissions() {\r\n    this.params.onOpenPermissions(this.contentType);\r\n  }\r\n\r\n  deleteContentType() {\r\n    this.params.onDelete(this.contentType);\r\n  }\r\n\r\n  private isGuid(txtToTest: string) {\r\n    const patt = new RegExp(/[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}/i);\r\n    return patt.test(txtToTest); // note: can't use the txtToTest.match because it causes infinite digest cycles\r\n  }\r\n}\r\n","<div class=\"grid-wrapper-nav\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"contentTypes\" [modules]=\"modules\" [gridOptions]=\"gridOptions\">\r\n  </ag-grid-angular>\r\n\r\n  <div class=\"scope-box\">\r\n    <button mat-icon-button color=\"accent\" matTooltip=\"Create a ghost content type\" *ngIf=\"debugEnabled\"\r\n      (click)=\"createGhost()\">\r\n      <mat-icon>share</mat-icon>\r\n    </button>\r\n    <mat-form-field appearance=\"standard\" color=\"accent\" class=\"scope-box__dropdown\">\r\n      <mat-select [ngModel]=\"scope\" name=\"Scope\" (selectionChange)=\"changeScope($event)\">\r\n        <mat-option *ngFor=\"let scopeOption of scopeOptions\" [value]=\"scopeOption.value\">\r\n          {{ 'Scope: ' + scopeOption.name }}\r\n        </mat-option>\r\n        <mat-option value=\"Other\">Scope: Other...</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n\r\n  <button mat-fab mat-elevation-z24 class=\"grid-fab\" matTooltip=\"Create a new content type\"\r\n    (click)=\"editContentType(null)\">\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</div>\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\r\nimport { MatSelectChange } from '@angular/material/select';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { AllCommunityModules, GridOptions, CellClickedEvent, ValueGetterParams } from '@ag-grid-community/all-modules';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n\r\nimport { ContentType } from '../models/content-type.model';\r\nimport { ContentTypesService } from '../services/content-types.service';\r\nimport { DataItemsComponent } from '../ag-grid-components/data-items/data-items.component';\r\nimport { DataFieldsComponent } from '../ag-grid-components/data-fields/data-fields.component';\r\nimport { DataActionsComponent } from '../ag-grid-components/data-actions/data-actions.component';\r\nimport { eavConstants, EavScopeOption } from '../../shared/constants/eav.constants';\r\nimport { DataActionsParams } from '../ag-grid-components/data-actions/data-actions.models';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { GlobalConfigurationService } from '../../../../../edit/shared/services/global-configuration.service';\r\nimport { AppDialogConfigService } from '../services/app-dialog-config.service';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\n\r\n@Component({\r\n  selector: 'app-data',\r\n  templateUrl: './data.component.html',\r\n  styleUrls: ['./data.component.scss']\r\n})\r\nexport class DataComponent implements OnInit, OnDestroy {\r\n  contentTypes: ContentType[];\r\n  scope: string;\r\n  defaultScope: string;\r\n  scopeOptions: EavScopeOption[];\r\n  debugEnabled = false;\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      idFieldComponent: IdFieldComponent,\r\n      dataItemsComponent: DataItemsComponent,\r\n      dataFieldsComponent: DataFieldsComponent,\r\n      dataActionsComponent: DataActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'ID', field: 'Id', width: 70, headerClass: 'dense', cellClass: 'id-action no-padding no-outline',\r\n        cellRenderer: 'idFieldComponent', sortable: true, filter: 'agTextColumnFilter', valueGetter: this.idValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Content Type', field: 'Name', flex: 2, minWidth: 250, cellClass: 'primary-action highlight', sort: 'asc',\r\n        sortable: true, filter: 'agTextColumnFilter', onCellClicked: this.showContentItems.bind(this), valueGetter: this.nameValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Items', field: 'Items', width: 102, headerClass: 'dense', cellClass: 'secondary-action no-padding',\r\n        sortable: true, filter: 'agNumberColumnFilter', cellRenderer: 'dataItemsComponent', onCellClicked: this.addItem.bind(this),\r\n      },\r\n      {\r\n        headerName: 'Fields', field: 'Fields', width: 94, headerClass: 'dense', cellClass: 'secondary-action no-padding',\r\n        sortable: true, filter: 'agNumberColumnFilter', cellRenderer: 'dataFieldsComponent', onCellClicked: this.editFields.bind(this),\r\n      },\r\n      {\r\n        width: 200, cellClass: 'secondary-action no-padding', cellRenderer: 'dataActionsComponent',\r\n        cellRendererParams: {\r\n          enableAppFeaturesGetter: this.enableAppFeaturesGetter.bind(this),\r\n          // onEdit: this.editContentType.bind(this),\r\n          onCreateOrEditMetadata: this.createOrEditMetadata.bind(this),\r\n          onOpenExport: this.openExport.bind(this),\r\n          onOpenImport: this.openImport.bind(this),\r\n          onOpenPermissions: this.openPermissions.bind(this),\r\n          onDelete: this.deleteContentType.bind(this),\r\n        } as DataActionsParams,\r\n      },\r\n      {\r\n        // TODO: 2dm -> SPM - con can this be made disabled if UseShared? not important, but would be nice\r\n        headerName: 'Name', field: 'Name', minWidth: 100, cellClass: 'primary-action highlight',\r\n        sortable: true, filter: 'agTextColumnFilter', onCellClicked: (e) => this.editContentType(e.data)\r\n      },\r\n      {\r\n        headerName: 'Description', field: 'Description', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n    ],\r\n  };\r\n\r\n  private enableAppFeatures = false;\r\n  private subscription = new Subscription();\r\n  private hasChild: boolean;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private contentTypesService: ContentTypesService,\r\n    private globalConfigurationService: GlobalConfigurationService,\r\n    private appDialogConfigService: AppDialogConfigService,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.hasChild = !!this.route.snapshot.firstChild.firstChild;\r\n    this.scope = eavConstants.scopes.default.value;\r\n    this.defaultScope = eavConstants.scopes.default.value;\r\n  }\r\n\r\n  async ngOnInit() {\r\n    const dialogSettings = await this.appDialogConfigService.getDialogSettings().toPromise();\r\n    this.enableAppFeatures = !dialogSettings.IsContent;\r\n    this.fetchScopes();\r\n    this.fetchContentTypes();\r\n    this.refreshOnChildClosed();\r\n    this.subscription.add(\r\n      this.globalConfigurationService.getDebugEnabled().subscribe(debugEnabled => {\r\n        this.debugEnabled = debugEnabled;\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n    this.subscription = null;\r\n  }\r\n\r\n  private showContentItems(params: CellClickedEvent) {\r\n    const contentType = params.data as ContentType;\r\n    this.router.navigate([`items/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editContentType(contentType: ContentType) {\r\n    if (!contentType) {\r\n      this.router.navigate([`${this.scope}/add`], { relativeTo: this.route.firstChild });\r\n    } else {\r\n      if (contentType.UsesSharedDef) {\r\n        alert(`This is a shared Content-Type, it can't be edited`);\r\n        return;\r\n      }\r\n      this.router.navigate([`${this.scope}/${contentType.Id}/edit`], { relativeTo: this.route.firstChild });\r\n    }\r\n  }\r\n\r\n  private fetchContentTypes() {\r\n    this.contentTypesService.retrieveContentTypes(this.scope).subscribe(contentTypes => {\r\n      this.contentTypes = contentTypes;\r\n    });\r\n  }\r\n\r\n  private fetchScopes() {\r\n    this.contentTypesService.getScopes().subscribe(scopes => {\r\n      this.scopeOptions = scopes;\r\n    });\r\n  }\r\n\r\n  createGhost() {\r\n    // tslint:disable-next-line:max-line-length\r\n    const sourceName = window.prompt('To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost');\r\n    if (!sourceName) { return; }\r\n    this.snackBar.open('Saving...');\r\n    this.contentTypesService.createGhost(sourceName).subscribe(res => {\r\n      this.snackBar.open('Saved', null, { duration: 2000 });\r\n      this.fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  changeScope(event: MatSelectChange) {\r\n    let newScope: string = event.value;\r\n    if (newScope === 'Other') {\r\n      // tslint:disable-next-line:max-line-length\r\n      newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.');\r\n      if (!newScope) {\r\n        newScope = eavConstants.scopes.default.value;\r\n      } else if (!this.scopeOptions.find(option => option.value === newScope)) {\r\n        const newScopeOption: EavScopeOption = {\r\n          name: newScope,\r\n          value: newScope,\r\n        };\r\n        this.scopeOptions.push(newScopeOption);\r\n      }\r\n    }\r\n    this.scope = newScope;\r\n    this.fetchContentTypes();\r\n    if (this.scope !== this.defaultScope) {\r\n      this.snackBar.open(\r\n        'Warning! You are in a special scope. Changing things here could easily break functionality',\r\n        null,\r\n        { duration: 2000 }\r\n      );\r\n    }\r\n  }\r\n\r\n  private idValueGetter(params: ValueGetterParams) {\r\n    const contentType: ContentType = params.data;\r\n    return `ID: ${contentType.Id}\\nGUID: ${contentType.StaticName}`;\r\n  }\r\n\r\n  private nameValueGetter(params: ValueGetterParams) {\r\n    const contentType: ContentType = params.data;\r\n    if (contentType.Name !== contentType.Label) {\r\n      return contentType.Label; // `${contentType.Label} (${contentType.Name})`;\r\n    } else {\r\n      return contentType.Name;\r\n    }\r\n  }\r\n\r\n  private enableAppFeaturesGetter() {\r\n    return this.enableAppFeatures;\r\n  }\r\n\r\n  private addItem(params: CellClickedEvent) {\r\n    const contentType = params.data as ContentType;\r\n    const form: EditForm = {\r\n      items: [{ ContentTypeName: contentType.StaticName }],\r\n    };\r\n    this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private editFields(params: CellClickedEvent) {\r\n    const contentType = params.data as ContentType;\r\n    if (contentType.UsesSharedDef) { return; }\r\n    this.router.navigate([`fields/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private createOrEditMetadata(contentType: ContentType) {\r\n    const form: EditForm = {\r\n      items: !contentType.Metadata\r\n        ? [{\r\n          ContentTypeName: eavConstants.contentTypes.contentType,\r\n          For: {\r\n            Target: eavConstants.metadata.contentType.target,\r\n            String: contentType.StaticName,\r\n          },\r\n          Prefill: { Label: contentType.Name, Description: contentType.Description },\r\n        }]\r\n        : [{ EntityId: contentType.Metadata.Id.toString() }],\r\n    };\r\n    this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openExport(contentType: ContentType) {\r\n    this.router.navigate([`export/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openImport(contentType: ContentType) {\r\n    this.router.navigate([`${contentType.StaticName}/import`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openPermissions(contentType: ContentType) {\r\n    this.router.navigate(\r\n      [`permissions/${eavConstants.metadata.entity.type}/${eavConstants.keyTypes.guid}/${contentType.StaticName}`],\r\n      { relativeTo: this.route.firstChild }\r\n    );\r\n  }\r\n\r\n  private deleteContentType(contentType: ContentType) {\r\n    if (!confirm(`Are you sure you want to delete '${contentType.Name}' (${contentType.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.contentTypesService.delete(contentType).subscribe(result => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe((event: NavigationEnd) => {\r\n        const hadChild = this.hasChild;\r\n        this.hasChild = !!this.route.snapshot.firstChild.firstChild;\r\n        if (!this.hasChild && hadChild) {\r\n          this.fetchContentTypes();\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\n\r\nimport { Query } from '../../models/query.model';\r\nimport { QueriesActionsParams } from './queries-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-queries-actions',\r\n  templateUrl: './queries-actions.component.html',\r\n  styleUrls: ['./queries-actions.component.scss']\r\n})\r\nexport class QueriesActionsComponent implements ICellRendererAngularComp {\r\n  private params: QueriesActionsParams;\r\n\r\n  agInit(params: QueriesActionsParams) {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  editQuery() {\r\n    const query: Query = this.params.data;\r\n    this.params.onEditQuery(query);\r\n  }\r\n\r\n  cloneQuery() {\r\n    const query: Query = this.params.data;\r\n    this.params.onCloneQuery(query);\r\n  }\r\n\r\n  exportQuery() {\r\n    const query: Query = this.params.data;\r\n    this.params.onExportQuery(query);\r\n  }\r\n\r\n  openPermissions() {\r\n    const query: Query = this.params.data;\r\n    this.params.onOpenPermissions(query);\r\n  }\r\n\r\n  deleteQuery() {\r\n    const query: Query = this.params.data;\r\n    this.params.onDelete(query);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Edit\" (click)=\"editQuery()\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Copy\" (click)=\"cloneQuery()\">\r\n    <mat-icon>file_copy</mat-icon>\r\n  </div>\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Export\" (click)=\"exportQuery()\">\r\n    <mat-icon>cloud_download</mat-icon>\r\n  </div>\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon>person</mat-icon>\r\n  </div>\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Delete\" (click)=\"deleteQuery()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { AllCommunityModules, GridOptions, ValueGetterParams } from '@ag-grid-community/all-modules';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n\r\nimport { Query } from '../models/query.model';\r\nimport { QueriesActionsComponent } from '../ag-grid-components/queries-actions/queries-actions.component';\r\nimport { PipelinesService } from '../services/pipelines.service';\r\nimport { ContentExportService } from '../services/content-export.service';\r\nimport { QueriesActionsParams } from '../ag-grid-components/queries-actions/queries-actions.models';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\n\r\n@Component({\r\n  selector: 'app-queries',\r\n  templateUrl: './queries.component.html',\r\n  styleUrls: ['./queries.component.scss']\r\n})\r\nexport class QueriesComponent implements OnInit, OnDestroy {\r\n  queries: Query[];\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      idFieldComponent: IdFieldComponent,\r\n      queriesActionsComponent: QueriesActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'ID', field: 'Id', width: 70, headerClass: 'dense', cellClass: 'id-action no-padding no-outline',\r\n        cellRenderer: 'idFieldComponent', sortable: true, filter: 'agTextColumnFilter', valueGetter: this.idValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'Name', flex: 2, minWidth: 250, cellClass: 'primary-action highlight', sortable: true,\r\n        filter: 'agTextColumnFilter', onCellClicked: this.openVisualQueryDesigner.bind(this),\r\n      },\r\n      {\r\n        width: 200, cellClass: 'secondary-action no-padding',\r\n        cellRenderer: 'queriesActionsComponent', cellRendererParams: {\r\n          onEditQuery: this.editQuery.bind(this),\r\n          onCloneQuery: this.cloneQuery.bind(this),\r\n          onOpenPermissions: this.openPermissions.bind(this),\r\n          onExportQuery: this.exportQuery.bind(this),\r\n          onDelete: this.deleteQuery.bind(this),\r\n        } as QueriesActionsParams,\r\n      },\r\n      {\r\n        headerName: 'Description', field: 'Description', flex: 2, minWidth: 250, cellClass: 'no-outline', sortable: true,\r\n        filter: 'agTextColumnFilter',\r\n      },\r\n    ],\r\n  };\r\n\r\n  private subscription = new Subscription();\r\n  private hasChild: boolean;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private pipelinesService: PipelinesService,\r\n    private contentExportService: ContentExportService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) {\r\n    this.hasChild = !!this.route.snapshot.firstChild.firstChild;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchQueries();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n    this.subscription = null;\r\n  }\r\n\r\n  private fetchQueries() {\r\n    this.pipelinesService.getAll(eavConstants.contentTypes.query).subscribe((queries: Query[]) => {\r\n      this.queries = queries;\r\n    });\r\n  }\r\n\r\n  importQuery() {\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editQuery(query: Query) {\r\n    const form: EditForm = {\r\n      items: (query === null)\r\n        ? [{ ContentTypeName: eavConstants.contentTypes.query, Prefill: { TestParameters: eavConstants.pipelineDesigner.testParameters } }]\r\n        : [{ EntityId: query.Id.toString() }],\r\n    };\r\n    this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private idValueGetter(params: ValueGetterParams) {\r\n    const query: Query = params.data;\r\n    return `ID: ${query.Id}\\nGUID: ${query.Guid}`;\r\n  }\r\n\r\n  private openVisualQueryDesigner(params: ValueGetterParams) {\r\n    const query: Query = params.data;\r\n    const form: EditForm = {\r\n      items: [{ EntityId: query.Id.toString() }],\r\n    };\r\n    this.dialogService.openQueryDesigner(form, query.Id);\r\n  }\r\n\r\n  private cloneQuery(query: Query) {\r\n    this.snackBar.open('Copying...');\r\n    this.pipelinesService.clonePipeline(query.Id).subscribe(() => {\r\n      this.snackBar.open('Copied', null, { duration: 2000 });\r\n      this.fetchQueries();\r\n    });\r\n  }\r\n\r\n  private openPermissions(query: Query) {\r\n    this.router.navigate(\r\n      [`permissions/${eavConstants.metadata.entity.type}/${eavConstants.keyTypes.guid}/${query.Guid}`],\r\n      { relativeTo: this.route.firstChild }\r\n    );\r\n  }\r\n\r\n  private exportQuery(query: Query) {\r\n    this.contentExportService.exportEntity(query.Id, 'Query', true);\r\n  }\r\n\r\n  private deleteQuery(query: Query) {\r\n    if (!confirm(`Delete Pipeline '${query.Name}' (${query.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.pipelinesService.delete(query.Id).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchQueries();\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe((event: NavigationEnd) => {\r\n        const hadChild = this.hasChild;\r\n        this.hasChild = !!this.route.snapshot.firstChild.firstChild;\r\n        if (!this.hasChild && hadChild) {\r\n          this.fetchQueries();\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","<div class=\"grid-wrapper-nav\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"queries\" [modules]=\"modules\" [gridOptions]=\"gridOptions\">\r\n  </ag-grid-angular>\r\n\r\n  <eco-fab-speed-dial class=\"grid-fab\">\r\n    <eco-fab-speed-dial-trigger spin=\"true\">\r\n      <button mat-fab>\r\n        <mat-icon class=\"spin180\">add</mat-icon>\r\n      </button>\r\n    </eco-fab-speed-dial-trigger>\r\n\r\n    <eco-fab-speed-dial-actions>\r\n      <button mat-mini-fab matTooltip=\"Import query\" (click)=\"importQuery()\">\r\n        <mat-icon>cloud_upload</mat-icon>\r\n      </button>\r\n      <button mat-mini-fab matTooltip=\"Create a new query\" (click)=\"editQuery(null)\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    </eco-fab-speed-dial-actions>\r\n  </eco-fab-speed-dial>\r\n</div>\r\n","import { View } from '../models/view.model';\r\n\r\nexport function calculateViewType(view: View) {\r\n  let value = '';\r\n  let icon = '';\r\n  if (view.HasQuery) {\r\n    value = 'Data (from query)';\r\n    icon = 'filter';\r\n  } else if (view.List) {\r\n    value = 'Items (list)';\r\n    icon = 'menu';\r\n  } else if (!view.ContentType && !view.HasQuery) {\r\n    value = 'Code';\r\n    icon = 'check_box_outline_blank';\r\n  } else if (!view.List) {\r\n    value = 'Item (one)';\r\n    icon = 'looks_one';\r\n  }\r\n  return { value, icon };\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { calculateViewType } from '../../views/views.helpers';\r\n\r\n@Component({\r\n  selector: 'app-views-type',\r\n  templateUrl: './views-type.component.html',\r\n  styleUrls: ['./views-type.component.scss']\r\n})\r\nexport class ViewsTypeComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n  icon: string;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    const view = params.data;\r\n    const type = calculateViewType(view);\r\n    this.icon = type.icon;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\" matTooltip=\"{{ value }}\">\r\n  <mat-icon>{{ icon }}</mat-icon>\r\n</div>\r\n","<div class=\"icon-container\">\r\n  <mat-icon *ngIf=\"value\">visibility</mat-icon>\r\n  <mat-icon *ngIf=\"!value\">visibility_off</mat-icon>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/all-modules';\r\n\r\n@Component({\r\n  selector: 'app-views-show',\r\n  templateUrl: './views-show.component.html',\r\n  styleUrls: ['./views-show.component.scss']\r\n})\r\nexport class ViewsShowComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\n\r\nimport { View } from '../../models/view.model';\r\nimport { ViewActionsParams } from './views-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-views-actions',\r\n  templateUrl: './views-actions.component.html',\r\n  styleUrls: ['./views-actions.component.scss']\r\n})\r\nexport class ViewsActionsComponent implements ICellRendererAngularComp {\r\n  private params: ViewActionsParams;\r\n\r\n  agInit(params: ViewActionsParams) {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode() {\r\n    const view: View = this.params.data;\r\n    this.params.onOpenCode(view);\r\n  }\r\n\r\n  openPermissions() {\r\n    const view: View = this.params.data;\r\n    this.params.onOpenPermissions(view);\r\n  }\r\n\r\n  deleteView() {\r\n    const view: View = this.params.data;\r\n    this.params.onDelete(view);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Code\" (click)=\"openCode()\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon>person</mat-icon>\r\n  </div>\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Delete\" (click)=\"deleteView()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { AllCommunityModules, GridOptions, CellClickedEvent, ValueGetterParams } from '@ag-grid-community/all-modules';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n\r\nimport polymorphLogo from '!url-loader!./polymorph-logo.png';\r\nimport { View } from '../models/view.model';\r\nimport { calculateViewType } from './views.helpers';\r\nimport { ViewsTypeComponent } from '../ag-grid-components/views-type/views-type.component';\r\nimport { ViewsShowComponent } from '../ag-grid-components/views-show/views-show.component';\r\nimport { ViewsActionsComponent } from '../ag-grid-components/views-actions/views-actions.component';\r\nimport { TemplatesService } from '../services/templates.service';\r\nimport { ViewActionsParams } from '../ag-grid-components/views-actions/views-actions.models';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\n\r\n@Component({\r\n  selector: 'app-views',\r\n  templateUrl: './views.component.html',\r\n  styleUrls: ['./views.component.scss']\r\n})\r\nexport class ViewsComponent implements OnInit, OnDestroy {\r\n  views: View[];\r\n  polymorphStatus: string;\r\n  polymorphLogo = polymorphLogo;\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      idFieldComponent: IdFieldComponent,\r\n      booleanFilterComponent: BooleanFilterComponent,\r\n      viewsTypeComponent: ViewsTypeComponent,\r\n      viewsShowComponent: ViewsShowComponent,\r\n      viewsActionsComponent: ViewsActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'ID', field: 'Id', width: 70, headerClass: 'dense', cellClass: 'id-action no-padding no-outline',\r\n        cellRenderer: 'idFieldComponent', sortable: true, filter: 'agTextColumnFilter', valueGetter: this.idValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Show', field: 'IsHidden', width: 70, headerClass: 'dense', cellClass: 'no-outline', cellRenderer: 'viewsShowComponent',\r\n        sortable: true, filter: 'booleanFilterComponent', valueGetter: this.showValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'Name', flex: 2, minWidth: 250, cellClass: 'primary-action highlight',\r\n        sortable: true, filter: 'agTextColumnFilter', onCellClicked: this.editView.bind(this),\r\n      },\r\n      {\r\n        headerName: 'Type', field: 'Type', width: 70, headerClass: 'dense', cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', cellRenderer: 'viewsTypeComponent', valueGetter: this.typeValueGetter,\r\n      },\r\n      {\r\n        width: 120, cellClass: 'secondary-action no-padding', cellRenderer: 'viewsActionsComponent',\r\n        cellRendererParams: {\r\n          onOpenCode: this.openCode.bind(this),\r\n          onOpenPermissions: this.openPermissions.bind(this),\r\n          onDelete: this.deleteView.bind(this),\r\n        } as ViewActionsParams,\r\n      },\r\n      {\r\n        headerName: 'Url Key', field: 'ViewNameInUrl', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Path', field: 'TemplatePath', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Content', field: 'ContentType.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Default', field: 'ContentType.DemoId', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: this.contentDemoValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Presentation', field: 'PresentationType.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Default', field: 'PresentationType.DemoId', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: this.presentationDemoValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Header', field: 'ListContentType.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Default', field: 'ListContentType.DemoId', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: this.headerDemoValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Header Presentation', field: 'ListPresentationType.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Default', field: 'ListPresentationType.DemoId', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: this.headerPresDemoValueGetter,\r\n      },\r\n    ],\r\n  };\r\n\r\n  private subscription = new Subscription();\r\n  private hasChild: boolean;\r\n  private polymorphism: Polymorphism;\r\n\r\n  constructor(\r\n    private templatesService: TemplatesService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) {\r\n    this.hasChild = !!this.route.snapshot.firstChild.firstChild;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchTemplates();\r\n    this.fetchPolymorphism();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n    this.subscription = null;\r\n  }\r\n\r\n  private fetchTemplates() {\r\n    this.templatesService.getAll().subscribe(views => {\r\n      this.views = views;\r\n    });\r\n  }\r\n\r\n  private fetchPolymorphism() {\r\n    this.templatesService.getPolymorphism().subscribe(polymorphism => {\r\n      this.polymorphism = polymorphism;\r\n      this.polymorphStatus = (polymorphism.Id === null)\r\n        ? 'not configured'\r\n        : (polymorphism.Resolver === null ? 'disabled' : 'using ' + polymorphism.Resolver);\r\n    });\r\n  }\r\n\r\n  editView(params: CellClickedEvent) {\r\n    let form: EditForm;\r\n    if (params === null) {\r\n      form = {\r\n        items: [{ ContentTypeName: eavConstants.contentTypes.template }],\r\n      };\r\n    } else {\r\n      const view: View = params.data;\r\n      form = {\r\n        items: [{ EntityId: view.Id.toString() }],\r\n      };\r\n    }\r\n    this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editPolymorphisms() {\r\n    if (!this.polymorphism) { return; }\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        this.polymorphism.Id\r\n          ? { EntityId: this.polymorphism.Id.toString() }\r\n          : { ContentTypeName: this.polymorphism.TypeName }\r\n      ]\r\n    };\r\n    this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private idValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `ID: ${view.Id}\\nGUID: ${view.Guid}`;\r\n  }\r\n\r\n  private showValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return !view.IsHidden;\r\n  }\r\n\r\n  private typeValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    const type = calculateViewType(view);\r\n    return type.value;\r\n  }\r\n\r\n  private contentDemoValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `${view.ContentType.DemoId} ${view.ContentType.DemoTitle}`;\r\n  }\r\n\r\n  private presentationDemoValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `${view.PresentationType.DemoId} ${view.PresentationType.DemoTitle}`;\r\n  }\r\n\r\n  private headerDemoValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `${view.ListContentType.DemoId} ${view.ListContentType.DemoTitle}`;\r\n  }\r\n\r\n  private headerPresDemoValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `${view.ListPresentationType.DemoId} ${view.ListPresentationType.DemoTitle}`;\r\n  }\r\n\r\n  private openCode(view: View) {\r\n    this.dialogService.openCodeFile(view.TemplatePath);\r\n  }\r\n\r\n  private openPermissions(view: View) {\r\n    this.router.navigate(\r\n      [`permissions/${eavConstants.metadata.entity.type}/${eavConstants.keyTypes.guid}/${view.Guid}`],\r\n      { relativeTo: this.route.firstChild }\r\n    );\r\n  }\r\n\r\n  private deleteView(view: View) {\r\n    if (!confirm(`Delete '${view.Name}' (${view.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.templatesService.delete(view.Id).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchTemplates();\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe((event: NavigationEnd) => {\r\n        const hadChild = this.hasChild;\r\n        this.hasChild = !!this.route.snapshot.firstChild.firstChild;\r\n        if (!this.hasChild && hadChild) {\r\n          this.fetchTemplates();\r\n          this.fetchPolymorphism();\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","export default \"data:image/png;base64,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\"","<div class=\"grid-wrapper-nav\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"views\" [modules]=\"modules\" [gridOptions]=\"gridOptions\">\r\n  </ag-grid-angular>\r\n\r\n  <div class=\"more-actions-box\">\r\n    <button mat-raised-button matTooltip=\"Configure Polymorphism\" (click)=\"editPolymorphisms()\">\r\n      <img class=\"polymorph-logo\" [src]=\"polymorphLogo\">\r\n      <span>Polymorphism {{ polymorphStatus }}</span>\r\n    </button>\r\n  </div>\r\n\r\n  <button mat-fab mat-elevation-z24 class=\"grid-fab\" matTooltip=\"Create a new view\" (click)=\"editView(null)\">\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\n\r\nimport { WebApiActionsParams } from './web-api-actions.models';\r\nimport { WebApi } from '../../models/web-api.model';\r\n\r\n@Component({\r\n  selector: 'app-web-api-actions',\r\n  templateUrl: './web-api-actions.component.html',\r\n  styleUrls: ['./web-api-actions.component.scss']\r\n})\r\nexport class WebApiActionsComponent implements ICellRendererAngularComp {\r\n  private params: WebApiActionsParams;\r\n\r\n  agInit(params: WebApiActionsParams) {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode() {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenCode(api);\r\n  }\r\n\r\n  deleteApi() {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onDelete(api);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Code\" (click)=\"openCode()\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n  <div class=\"like-button highlight not-implemented\" style=\"display: none;\" matRipple matTooltip=\"Delete\"\r\n    (click)=\"deleteApi()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { AllCommunityModules, GridOptions } from '@ag-grid-community/all-modules';\r\n\r\nimport { WebApisService } from '../services/web-apis.service';\r\nimport { WebApi } from '../models/web-api.model';\r\nimport { WebApiActionsComponent } from '../ag-grid-components/web-api-actions/web-api-actions.component';\r\nimport { WebApiActionsParams } from '../ag-grid-components/web-api-actions/web-api-actions.models';\r\nimport { SanitizeService } from '../../../../../edit/eav-material-controls/adam/sanitize.service';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\n\r\n@Component({\r\n  selector: 'app-web-api',\r\n  templateUrl: './web-api.component.html',\r\n  styleUrls: ['./web-api.component.scss']\r\n})\r\nexport class WebApiComponent implements OnInit {\r\n  webApis: WebApi[];\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      webApiActions: WebApiActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'Folder', field: 'folder', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        width: 80, cellClass: 'secondary-action no-padding', cellRenderer: 'webApiActions', cellRendererParams: {\r\n          onOpenCode: this.openCode.bind(this),\r\n          onDelete: this.deleteApi.bind(this),\r\n        } as WebApiActionsParams,\r\n      },\r\n    ],\r\n  };\r\n\r\n  constructor(\r\n    private webApisService: WebApisService,\r\n    private sanitizeService: SanitizeService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchWebApis();\r\n  }\r\n\r\n  addController() {\r\n    let name = prompt('Controller name:', 'TestController.cs');\r\n    if (name === null || name.length === 0) { return; }\r\n\r\n    name = this.sanitizeService.sanitizeName(name);\r\n    name = name.replace(/\\s/g, ''); // remove all whitespaces\r\n    // find name without extension\r\n    let nameLower = name.toLocaleLowerCase();\r\n    const extIndex = nameLower.lastIndexOf('.cs');\r\n    if (extIndex > 0) {\r\n      nameLower = nameLower.substring(0, extIndex);\r\n    }\r\n    const typeIndex = nameLower.lastIndexOf('controller');\r\n    if (typeIndex > 0) {\r\n      nameLower = nameLower.substring(0, typeIndex);\r\n    }\r\n    // uppercase first letter, take other letters as is and append extension\r\n    name = name.charAt(0).toLocaleUpperCase() + name.substring(1, nameLower.length) + 'Controller.cs';\r\n\r\n    this.snackBar.open('Saving...');\r\n    this.webApisService.create(name).subscribe(res => {\r\n      this.snackBar.open('Saved', null, { duration: 2000 });\r\n      this.fetchWebApis();\r\n    });\r\n  }\r\n\r\n  private fetchWebApis() {\r\n    this.webApisService.getAll().subscribe(paths => {\r\n      this.webApis = paths.map(path => {\r\n        const splitIndex = path.lastIndexOf('/');\r\n        const fileExtIndex = path.lastIndexOf('.');\r\n        const folder = path.substring(0, splitIndex);\r\n        const name = path.substring(splitIndex + 1, fileExtIndex);\r\n        return {\r\n          folder,\r\n          name,\r\n        };\r\n      });\r\n    });\r\n  }\r\n\r\n  private openCode(api: WebApi) {\r\n    this.dialogService.openCodeFile(`${api.folder}/${api.name}.cs`);\r\n  }\r\n\r\n  private deleteApi(api: WebApi) {\r\n    alert('Delete api');\r\n  }\r\n\r\n}\r\n","<div class=\"grid-wrapper-nav\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"webApis\" [modules]=\"modules\" [gridOptions]=\"gridOptions\">\r\n  </ag-grid-angular>\r\n\r\n  <button mat-fab mat-elevation-z24 class=\"grid-fab\" matTooltip=\"Create a new controller\" (click)=\"addController()\">\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</div>\r\n","<div class=\"cards-box\">\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>App Settings</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Edit app settings\" (click)=\"edit(eavConstants.contentTypes.settings)\">\r\n          <mat-icon>edit</mat-icon>\r\n        </button>\r\n        <button mat-icon-button matTooltip=\"Configure app settings\"\r\n          (click)=\"config(eavConstants.contentTypes.settings)\">\r\n          <mat-icon>dns</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Settings are configurations used by the app - like SQL-connection strings, default \"items-to-show\" numbers and\r\n      things like that. They can also be multi-language, so that a setting (like default RSS-Feed) could be different in\r\n      each language.\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>App Resources</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Edit app resources\" (click)=\"edit(eavConstants.contentTypes.resources)\">\r\n          <mat-icon>edit</mat-icon>\r\n        </button>\r\n        <button mat-icon-button matTooltip=\"Configure app resources\"\r\n          (click)=\"config(eavConstants.contentTypes.resources)\">\r\n          <mat-icon>dns</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual\r\n      views and such, and should not be used for App-Settings.\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n\r\n\r\n<div class=\"cards-box\">\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>App Package Definition</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Edit app definition\" (click)=\"edit(eavConstants.scopes.app.value)\">\r\n          <mat-icon>edit</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      The app-package definition is important when exporting/importing this app.\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card *ngIf=\"showPermissions\" class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>App Permissions</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Edit permissions\" (click)=\"openPermissions()\">\r\n          <mat-icon>person</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Permissions give access to people to the entire app (all content-types / data), so use with care.\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n\r\n\r\n<div class=\"cards-box\">\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>Export this entire App</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Export\" (click)=\"exportApp()\">\r\n          <mat-icon>cloud_download</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Create an app-package (zip) which can be installed in another portal.\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>Export or Import parts of this App</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Export\" (click)=\"exportParts()\">\r\n          <mat-icon>cloud_download</mat-icon>\r\n        </button>\r\n        <button mat-icon-button matTooltip=\"Import\" (click)=\"importParts()\">\r\n          <mat-icon>cloud_upload</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Create an xml containing parts of the app, e.g. content and templates.\r\n      Import parts from such an xml into this app.\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { ContentItemsService } from '../../content-items/services/content-items.service';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { Context } from '../../shared/services/context';\r\nimport { AppDialogConfigService } from '../services/app-dialog-config.service';\r\n\r\n@Component({\r\n  selector: 'app-app-configuration',\r\n  templateUrl: './app-configuration.component.html',\r\n  styleUrls: ['./app-configuration.component.scss']\r\n})\r\nexport class AppConfigurationComponent implements OnInit {\r\n  eavConstants = eavConstants;\r\n  showPermissions = false;\r\n\r\n  constructor(\r\n    private contentItemsService: ContentItemsService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private context: Context,\r\n    private appDialogConfigService: AppDialogConfigService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.appDialogConfigService.getDialogSettings().subscribe(dialogSettings => {\r\n      this.showPermissions = !dialogSettings.IsContent;\r\n    });\r\n  }\r\n\r\n  edit(staticName: string) {\r\n    this.contentItemsService.getAll(staticName).subscribe(contentItems => {\r\n      if (contentItems.length !== 1) { throw new Error(`Found too many settings for the type ${staticName}`); }\r\n      const item = contentItems[0];\r\n      const form: EditForm = {\r\n        items: [{ EntityId: item.Id.toString() }],\r\n      };\r\n      this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route.firstChild });\r\n    });\r\n  }\r\n\r\n  config(staticName: string) {\r\n    this.router.navigate([`fields/${staticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  openPermissions() {\r\n    this.router.navigate(\r\n      [`permissions/${eavConstants.metadata.app.type}/${eavConstants.keyTypes.number}/${this.context.appId}`],\r\n      { relativeTo: this.route.firstChild }\r\n    );\r\n  }\r\n\r\n  exportApp() {\r\n    this.router.navigate([`export`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  exportParts() {\r\n    this.router.navigate([`export/parts`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  importParts() {\r\n    this.router.navigate([`import/parts`], { relativeTo: this.route.firstChild });\r\n  }\r\n}\r\n","<div (click)=\"toggleDebugEnabled($event)\">\r\n  <div mat-dialog-title>\r\n    <div class=\"dialog-title-box\">\r\n      <div>Administration</div>\r\n      <button mat-icon-button matTooltip=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <!-- spm NOTE: we use mat-tab-group because mat-tab-nav-bar doesn't have animations and doesn't look pretty -->\r\n  <mat-tab-group dynamicHeight color=\"accent\" *ngIf=\"dialogSettings\" (selectedTabChange)=\"changeTab($event)\"\r\n    [selectedIndex]=\"tabIndex\">\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"Getting Started\">\r\n        <mat-icon>info</mat-icon>\r\n        <span>Info</span>\r\n      </div>\r\n      <app-getting-started [gettingStartedUrl]=\"dialogSettings.GettingStartedUrl\">\r\n      </app-getting-started>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"Content\">\r\n        <mat-icon>menu</mat-icon>\r\n        <span>Data</span>\r\n      </div>\r\n      <app-data *matTabContent></app-data>\r\n    </mat-tab>\r\n\r\n    <mat-tab *ngIf=\"!dialogSettings.IsContent\">\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"Query Designer\">\r\n        <mat-icon>filter_list</mat-icon>\r\n        <span>Queries</span>\r\n      </div>\r\n      <app-queries *matTabContent></app-queries>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"Views / Templates\">\r\n        <mat-icon>layers</mat-icon>\r\n        <span>Views</span>\r\n      </div>\r\n      <app-views *matTabContent></app-views>\r\n    </mat-tab>\r\n\r\n    <mat-tab *ngIf=\"!dialogSettings.IsContent\">\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"WebApi / Data\">\r\n        <mat-icon>offline_bolt</mat-icon>\r\n        <span>WebApi</span>\r\n      </div>\r\n      <app-web-api *matTabContent></app-web-api>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"App Settings\">\r\n        <mat-icon>settings_applications</mat-icon>\r\n        <span>App</span>\r\n      </div>\r\n      <app-app-configuration *matTabContent></app-app-configuration>\r\n    </mat-tab>\r\n  </mat-tab-group>\r\n</div>\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatTabChangeEvent } from '@angular/material/tabs';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport { DialogSettings } from '../models/dialog-settings.model';\r\nimport { AppDialogConfigService } from '../services/app-dialog-config.service';\r\nimport { GlobalConfigurationService } from '../../../../../edit/shared/services/global-configuration.service';\r\n\r\n@Component({\r\n  selector: 'app-app-administration-nav',\r\n  templateUrl: './app-administration-nav.component.html',\r\n  styleUrls: ['./app-administration-nav.component.scss']\r\n})\r\nexport class AppAdministrationNavComponent implements OnInit, OnDestroy {\r\n  tabs = ['home', 'data', 'queries', 'views', 'web-api', 'app']; // tabs have to match template and filter below\r\n  tabIndex: number;\r\n  dialogSettings: DialogSettings;\r\n\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AppAdministrationNavComponent>,\r\n    private appDialogConfigService: AppDialogConfigService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private globalConfigurationService: GlobalConfigurationService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.subscription.add(\r\n      this.appDialogConfigService.getDialogSettings().subscribe(dialogSettings => {\r\n        if (dialogSettings.IsContent) {\r\n          this.tabs = this.tabs.filter(tab => !(tab === 'queries' || tab === 'web-api'));\r\n        }\r\n        this.tabIndex = this.tabs.indexOf(this.route.snapshot.firstChild.url[0].path); // set tab initially\r\n        this.dialogSettings = dialogSettings; // needed to filter tabs\r\n      })\r\n    );\r\n    this.subscription.add(\r\n      // change tab when route changed\r\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(event => {\r\n        this.tabIndex = this.tabs.indexOf(this.route.snapshot.firstChild.url[0].path);\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n    this.subscription = null;\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  changeTab(event: MatTabChangeEvent) {\r\n    const path = this.tabs[event.index];\r\n    this.router.navigate([path], { relativeTo: this.route });\r\n  }\r\n\r\n  toggleDebugEnabled(event: MouseEvent) {\r\n    const enableDebugEvent = (navigator.platform.match('Mac') ? event.metaKey : event.ctrlKey) && event.shiftKey && event.altKey;\r\n    if (enableDebugEvent) { this.globalConfigurationService.toggleDebugEnabled(); }\r\n  }\r\n}\r\n","export type EavMetadataKey = 'attribute' | 'app' | 'entity' | 'contentType' | 'zone' | 'cmsObject';\r\nexport type EavKeyTypeKey = 'guid' | 'string' | 'number';\r\nexport interface EavScopeOption { name: string; value: string; }\r\n\r\nexport const eavConstants = {\r\n  metadata: {\r\n    /** metadataOfAttribute */\r\n    attribute: { type: 2, target: 'EAV Field Properties' },\r\n    /** metadataOfApp */\r\n    app: { type: 3, target: 'App' },\r\n    /** metadataOfEntity */\r\n    entity: { type: 4, target: 'Entity' },\r\n    /** metadataOfContentType */\r\n    contentType: { type: 5, target: 'ContentType' },\r\n    /** metadataOfZone */\r\n    zone: { type: 6, target: 'Zone' },\r\n    /** metadataOfCmsObject */\r\n    cmsObject: { type: 10, target: 'CmsObject' },\r\n  },\r\n\r\n  /** Loopup type for the metadata, e.g. key=80adb152-efad-4aa4-855e-74c5ef230e1f is keyType=guid */\r\n  keyTypes: {\r\n    guid: 'guid',\r\n    string: 'string',\r\n    number: 'number',\r\n  },\r\n\r\n  /** Scopes */\r\n  scopes: {\r\n    /** This is the main schema and the data you usually see is from here */\r\n    default: { name: 'Default', value: '2SexyContent' },\r\n    /** This contains content-types for configuration, settings and resources of the app */\r\n    app: { name: 'System: App', value: '2SexyContent-App' },\r\n  },\r\n\r\n  /** Content types where templates, permissions, etc. are stored */\r\n  contentTypes: {\r\n    /** Content type containing app templates (views) */\r\n    template: '2SexyContent-Template',\r\n    /** Content type containing permissions */\r\n    permissions: 'PermissionConfiguration',\r\n    /** Content type containing queries */\r\n    query: 'DataPipeline',\r\n    /** Content type containing content type metadata (app administration > data > metadata) */\r\n    contentType: 'ContentType',\r\n    /** Content type containing app settings */\r\n    settings: 'App-Settings',\r\n    /** Content type containing app resources */\r\n    resources: 'App-Resources',\r\n  },\r\n\r\n  pipelineDesigner: {\r\n    outDataSource: {\r\n      className: 'SexyContentTemplate',\r\n      in: ['ListContent', 'Default'],\r\n      name: '2sxc Target (View or API)',\r\n      description: 'The template/script which will show this data',\r\n      visualDesignerData: { Top: 20, Left: 200, Width: 700 }\r\n    },\r\n    defaultPipeline: {\r\n      dataSources: [\r\n        {\r\n          entityGuid: 'unsaved1',\r\n          partAssemblyAndType: 'ToSic.Eav.DataSources.Caches.ICache, ToSic.Eav.DataSources',\r\n          visualDesignerData: { Top: 440, Left: 440 }\r\n        }, {\r\n          entityGuid: 'unsaved2',\r\n          partAssemblyAndType: 'ToSic.Eav.DataSources.PublishingFilter, ToSic.Eav.DataSources',\r\n          visualDesignerData: { Top: 300, Left: 440 }\r\n        }, {\r\n          entityGuid: 'unsaved3',\r\n          partAssemblyAndType: 'ToSic.SexyContent.DataSources.ModuleDataSource, ToSic.SexyContent',\r\n          visualDesignerData: { Top: 170, Left: 440 }\r\n        }\r\n      ],\r\n      streamWiring: [\r\n        { From: 'unsaved1', Out: 'Default', To: 'unsaved2', In: 'Default' },\r\n        { From: 'unsaved1', Out: 'Drafts', To: 'unsaved2', In: 'Drafts' },\r\n        { From: 'unsaved1', Out: 'Published', To: 'unsaved2', In: 'Published' },\r\n        { From: 'unsaved2', Out: 'Default', To: 'unsaved3', In: 'Default' },\r\n        { From: 'unsaved3', Out: 'ListContent', To: 'Out', In: 'ListContent' },\r\n        { From: 'unsaved3', Out: 'Default', To: 'Out', In: 'Default' }\r\n      ]\r\n    },\r\n    testParameters: '[Demo:Demo]=true',\r\n  },\r\n};\r\n"],"sourceRoot":"webpack:///"}