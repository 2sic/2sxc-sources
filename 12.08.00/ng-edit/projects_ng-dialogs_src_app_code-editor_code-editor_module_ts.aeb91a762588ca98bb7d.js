(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_code-editor_code-editor_module_ts"],{2832:function(t,e,n){"use strict";n.d(e,{_:function(){return l},s:function(){return c}});var i=n(4762),o=n(9996),r=n(1785),a=n(2693),s=n(3582),p=n(2837),l="admin/type/",c=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.apiUrl=function(t){return this.dnnContext.$2sxc.http.apiUrl(t)},t.prototype.retrieveContentType=function(t){return this.http.get(this.apiUrl(l+"get"),{params:{appId:this.context.appId.toString(),contentTypeId:t}})},t.prototype.retrieveContentTypes=function(t){return this.http.get(this.apiUrl(l+"list"),{params:{appId:this.context.appId.toString(),scope:t}})},t.prototype.getScopes=function(){return this.http.get(this.apiUrl(l+"scopes"),{params:{appId:this.context.appId.toString()}}).pipe((0,o.U)(function(t){return Object.keys(t).map(function(e){return{name:t[e],value:e}})}))},t.prototype.save=function(t){return this.http.post(this.apiUrl(l+"save"),t,{params:{appid:this.context.appId.toString()}})},t.prototype.delete=function(t){return this.http.delete(this.apiUrl(l+"delete"),{params:{appid:this.context.appId.toString(),staticName:t.StaticName}})},t.prototype.import=function(t){var e,n,o=new FormData;try{for(var r=(0,i.XA)(t),a=r.next();!a.done;a=r.next())o.append("File",a.value)}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this.http.post(this.apiUrl(l+"import"),o,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})},t.prototype.createGhost=function(t){return this.http.post(this.apiUrl(l+"addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:t}})},t.\u0275fac=function(e){return new(e||t)(r.LFG(a.eN),r.LFG(s._),r.LFG(p._y))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t}()},9540:function(t,e,n){"use strict";n.r(e),n.d(e,{CodeEditorModule:function(){return Et},translateLoaderFactoryCode:function(){return Nt}});var i=n(1116),o=n(1041),r=n(4369),a=n(7064),s=n(2935),p=n(7307),l=n(3841),c=n(3589),u=n(649),d=n(8526),h=n(3582),f=n(4903),g=n(2677),m=n(8842),v=n(2461),y=n(1282),x=n(4762),w=n(7570),b=n(8512),S=n(3148),C=n(1305),T=n(7254),I=n(1055),k=n(3982),A=n(9996),M=n(447),O=n(5733),Z=n(4020),F=n(5549),_=n(1785),P={mode:"ace/mode/razor",wrap:!0,useSoftTabs:!0,theme:"ace/theme/sqlserver",fontSize:14,fontFamily:"Consolas, Courier New, monospace",showGutter:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},N=["editor"],E=function(){function t(t){this.zone=t,this.value="",this.propagateChange=function(){},this.propagateTouched=function(){}}return t.prototype.ngAfterViewInit=function(){var t=this;window.require.config({paths:{ace:["https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11"]}}),window.require(["ace/ace"],function(e){t.ace=e,window.require(["ace/ext-modelist"],function(){window.require(["ace/ext-language_tools"],function(){window.require(["ace/snippets"],function(){t.aceLoaded()})})})})},t.prototype.ngOnChanges=function(t){var e,n,i=null!=(null===(e=t.filename)||void 0===e?void 0:e.currentValue)?this.filename:void 0,o=null!=(null===(n=t.snippets)||void 0===n?void 0:n.currentValue)?this.snippets:void 0;this.updateValues(i,o)},t.prototype.insertSnippet=function(t){var e=this;this.zone.runOutsideAngular(function(){e.ace.require("ace/snippets").snippetManager.insertSnippet(e.editor,t),e.editor.focus()})},t.prototype.writeValue=function(t){var e=this;this.value=t||"",this.editor&&this.zone.runOutsideAngular(function(){var t=e.editor.getCursorPosition();e.editor.setValue(e.value,-1),e.editor.moveCursorToPosition(t)})},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){this.propagateTouched=t},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular(function(){t.editor.destroy(),t.editor.container.remove(),t.editor=null})},t.prototype.aceLoaded=function(){var t=this;this.zone.runOutsideAngular(function(){t.editor=t.ace.edit(t.editorRef.nativeElement,P),t.editor.$blockScrolling=1/0,t.editor.session.setValue(t.value),t.updateValues(t.filename,t.snippets),t.editor.on("change",t.onEditorValueChange.bind(t)),t.editor.on("blur",t.onEditorBlurred.bind(t)),t.editor.focus(),setTimeout(function(){t.editor.resize()},50)})},t.prototype.onEditorValueChange=function(){var t=this;this.zone.run(function(){t.propagateChange(t.editor.getValue())})},t.prototype.onEditorBlurred=function(){var t=this;this.zone.run(function(){t.propagateTouched(t.editor.getValue())})},t.prototype.updateValues=function(t,e){var n=this;this.editor&&this.zone.runOutsideAngular(function(){if(t){var i=n.ace.require("ace/ext/modelist").getModeForPath(t).mode;n.editor.session.setMode(i)}e&&n.ace.require("ace/snippets").snippetManager.register(n.snippets)})},t.\u0275fac=function(e){return new(e||t)(_.Y36(_.R0b))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-ace-editor"]],viewQuery:function(t,e){var n;1&t&&_.Gf(N,5),2&t&&_.iGM(n=_.CRH())&&(e.editorRef=n.first)},inputs:{filename:"filename",snippets:"snippets"},features:[_._Bn([{provide:o.JU,useExisting:(0,_.Gpc)(function(){return t}),multi:!0}]),_.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%"],["editor",""]],template:function(t,e){1&t&&_._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]}),t}(),J={Templates:"Templates",Snippets:"Snippets"},H={Ace:"Ace",Monaco:"Monaco"},q=n(5959),U=function(){function t(t){this.snackBar=t,this.defaultDuration=3e3,this.processingMessage=!1,this.messageQueue=[]}return t.prototype.add=function(t,e,n){void 0===n&&(n={duration:this.defaultDuration});var i=new q.xQ;return this.messageQueue.push({message:t,action:e,config:n,triggered$:i}),this.processingMessage||this.showSnackBar(),i.asObservable()},t.prototype.showSnackBar=function(){var t=this,e=this.messageQueue.shift();if(null!=e){this.processingMessage=!0;var n=this.snackBar.open(e.message,e.action,e.config);n.afterDismissed().subscribe(function(){e.triggered$.complete(),t.showSnackBar()}),n.onAction().subscribe(function(){e.triggered$.next()})}else this.processingMessage=!1},t.prototype.ngOnDestroy=function(){var t,e;try{for(var n=(0,x.XA)(this.messageQueue),i=n.next();!i.done;i=n.next())i.value.triggered$.complete()}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.messageQueue=null},t.\u0275fac=function(e){return new(e||t)(_.LFG(c.ux))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),L=n(1407),$=n(2693),Q=n(2837),R=function(){function t(t,e,n){var i;this.http=t,this.context=e,this.dnnContext=n,this.isShared=null!==(i=sessionStorage.getItem(F.PH))&&void 0!==i?i:(!1).toString()}return t.prototype.get=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(L.pJ),{params:(0,x.pi)({appId:this.context.appId.toString(),global:this.isShared},this.templateIdOrPath(t))}).pipe((0,A.U)(function(t){if("auto"===t.Type.toLocaleLowerCase())switch(t.Extension.toLocaleLowerCase()){case".cs":case".cshtml":t.Type="Razor";break;case".html":case".css":case".js":t.Type="Token"}return t}))},t.prototype.save=function(t,e){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(L.pJ),e,{params:(0,x.pi)({appId:this.context.appId.toString(),global:this.isShared},this.templateIdOrPath(t))})},t.prototype.getTemplates=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(L.nu),{params:{appId:this.context.appId.toString(),global:this.isShared,withSubfolders:"true"}})},t.prototype.createTemplate=function(t){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(L.yE),{},{params:{appId:this.context.appId.toString(),global:this.isShared,purpose:"auto",path:t}})},t.prototype.templateIdOrPath=function(t){return"number"==typeof t?{templateId:t.toString()}:{path:t}},t.\u0275fac=function(e){return new(e||t)(_.LFG($.eN),_.LFG(h._),_.LFG(Q._y))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac}),t}(),z=n(2417),D=n(3667),j=n(7093),Y=function(){function t(t,e,n){this.http=t,this.dnnContext=e,this.translate=n}return t.prototype.getSnippets=function(t){var e=this;return this.http.get("../ng-assets/snippets.json.js").pipe((0,A.U)(function(n){var i=e.filterAwayNotNeededSnippetsList(n.snippets,t),o=e.extractInputTypeSnippets(i),r=e.initSnippetsWithConfig(o.standardArray,t,o.inputTypeSnippets);return{list:o.standardArray,sets:r}}))},t.prototype.filterAwayNotNeededSnippetsList=function(t,e){var n,i,o=["@","["],r=function(t){return t.Type.indexOf("Razor")>-1?0:1},a=[];try{for(var s=(0,x.XA)(t),p=s.next();!p.done;p=s.next()){var l=p.value,c=o.indexOf(l.set[0]);-1!==c&&c!==r(e)||(c===r(e)&&(l.set=l.set.substr(1)),a.push(l))}}catch(u){n={error:u}}finally{try{p&&!p.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},t.prototype.extractInputTypeSnippets=function(t){var e,n,i=[],o=[];try{for(var r=(0,x.XA)(t),a=r.next();!a.done;a=r.next()){var s=a.value;"\\"===s.set[0]?(s.set=s.set.substr(1),o.push(s)):i.push(s)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{standardArray:i,inputTypeSnippets:this.catalogInputTypeSnippets(o)}},t.prototype.catalogInputTypeSnippets=function(t){var e,n,i={};try{for(var o=(0,x.XA)(t),r=o.next();!r.done;r=o.next()){var a=r.value;void 0===i[a.subset]&&(i[a.subset]=[]),i[a.subset].push(a)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.initSnippetsWithConfig=function(t,e,n){var i=this.makeTree(t);return i.Content=Object.assign({},i.Content,{Fields:{},PresentationFields:{}}),e.TypeContent&&this.loadContentType(i.Content.Fields,e.TypeContent,"Content",e,n),e.TypeContentPresentation&&this.loadContentType(i.Content.PresentationFields,e.TypeContentPresentation,"Content.Presentation",e,n),e.HasList?(i.List=Object.assign({},i.List,{Fields:{},PresentationFields:{}}),e.TypeList&&this.loadContentType(i.List.Fields,e.TypeList,"Header",e,n),e.TypeListPresentation&&this.loadContentType(i.List.PresentationFields,e.TypeListPresentation,"Header.Presentation",e,n)):delete i.List,e.HasApp&&(i.App.Resources={},i.App.Settings={},this.loadContentType(i.App.Resources,"App-Resources","App.Resources",e,n),this.loadContentType(i.App.Settings,"App-Settings","App.Settings",e,n)),i},t.prototype.makeTree=function(t){var e,n,i={};try{for(var o=(0,x.XA)(t),r=o.next();!r.done;r=o.next()){var a=r.value;void 0===i[a.set]&&(i[a.set]={}),void 0===i[a.set][a.subset]&&(i[a.set][a.subset]=[]);var s={key:a.name,label:this.label(a.set,a.subset,a.name),snip:a.content,help:a.help||this.help(a.set,a.subset,a.name),links:this.linksList(a.links)};i[a.set][a.subset].push(s)}}catch(p){e={error:p}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.label=function(t,e,n){var i=this.getHelpKey(t,e,n,".Key"),o=this.translate.instant(i);return o===i&&(o=n),o},t.prototype.getHelpKey=function(t,e,n,i){return"SourceEditorSnippets."+t+"."+e+"."+n+i},t.prototype.help=function(t,e,n){var i=this.getHelpKey(t,e,n,".Help"),o=this.translate.instant(i);return o===i&&(o=""),o},t.prototype.linksList=function(t){var e,n;if(!t)return null;var i=[],o=t.split("\n");try{for(var r=(0,x.XA)(o),a=r.next();!a.done;a=r.next()){var s=a.value.split(":");if(3===s.length){var p={name:s[0].trim(),url:s[1].trim()+":"+s[2].trim()};i.push(p)}}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return 0===i.length?null:i},t.prototype.loadContentType=function(t,e,n,i,o){var r=this;this.getFields(i.AppId,e).subscribe(function(e){var a,s;try{for(var p=(0,x.XA)(e),l=p.next();!l.done;l=p.next()){var c=l.value,u=c.StaticName;t[u]={key:u,label:u,snip:r.valuePlaceholder(n,u,i),help:c.Metadata.merged.Notes||" ("+c.Type.toLowerCase()+") "};var d=(0,z.Z)(t[u]);r.attachSnippets(t,n,u,c.InputType,d,o)}}catch(g){a={error:g}}finally{try{l&&!l.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}if(e.length)for(var h=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"],f=0;f<h.length;f++)t[h[f]]={key:h[f],label:h[f],snip:r.valuePlaceholder(n,h[f],i),help:r.translate.instant("SourceEditorSnippets.StandardFields."+h[f]+".Help")}})},t.prototype.valuePlaceholder=function(t,e,n){return n.Type.indexOf("Razor")>-1?"@"+t+"."+e:"["+t.replace(".",":")+":"+e+"]"},t.prototype.getFields=function(t,e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(j.jt),{params:{appid:t.toString(),staticName:e}}).pipe((0,A.U)(function(t){var e,n;t=t.filter(function(t){return t.Type!==D.Q.Empty});try{for(var i=(0,x.XA)(t),o=i.next();!o.done;o=i.next()){var r=o.value;if(r.Metadata){var a=r.Metadata,s=a[r.Type],p=a[r.InputType];a.merged=(0,x.pi)((0,x.pi)((0,x.pi)({},a.All),s),p)}}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return t}))},t.prototype.attachSnippets=function(t,e,n,i,o,r){var a=r[i];if(i.indexOf("-")){var s=i.substr(0,i.indexOf("-"));if(s){var p=r[s];p&&(a=a?a.concat(p):p)}}if(a){void 0===t[n].more&&(t[n].more={});for(var l=t[n].more,c=0;c<a.length;c++)try{l[n+"-"+a[c].name]=Object.assign({},o,{key:n+" - "+a[c].name,label:a[c].name,snip:this.localizeGenericSnippet(a[c].content,e,n),collapse:!0})}finally{}}},t.prototype.localizeGenericSnippet=function(t,e,n){return t.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+e+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+n+"$2")},t.\u0275fac=function(e){return new(e||t)(_.LFG($.eN),_.LFG(Q._y),_.LFG(u.sK))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac}),t}(),B=n(9624),G=n(9886),V=n(6146),K=n(7512),X=n(1271),W=function(){function t(){}return t.prototype.transform=function(t){return null==t||t.sort(function(t,e){return t.isFolder<e.isFolder?1:t.isFolder>e.isFolder?-1:0}),t},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=_.Yjl({name:"sortItems",type:t,pure:!0}),t}(),tt=function(){function t(t){this.sanitizer=t}return t.prototype.transform=function(t,e){return this.sanitizer.bypassSecurityTrustStyle("padding-left: "+(e?8*t:0===t?8:8*t+16)+"px;")},t.\u0275fac=function(e){return new(e||t)(_.Y36(B.H7,16))},t.\u0275pipe=_.Yjl({name:"depthPadding",type:t,pure:!0}),t}();function et(t,e){1&t&&_.GkF(0)}var nt=function(t){return{item:t}};function it(t,e){if(1&t&&(_.ynx(0),_.YNc(1,et,1,0,"ng-container",5),_.BQk()),2&t){var n=e.$implicit;_.oxw();var i=_.MAs(5);_.xp6(1),_.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",_.VKq(2,nt,n))}}var ot=function(t){return{active:t}};function rt(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",8),_.NdJ("click",function(){_.CHM(n);var t=_.oxw().item;return _.oxw().openTemplate(t.pathFromRoot)}),_.ALo(1,"depthPadding"),_._uU(2),_.qZA()}if(2&t){var i=_.oxw().item,o=_.oxw();_.Akn(_.xi3(1,5,i.depth,i.isFolder)),_.Q6J("ngClass",_.VKq(8,ot,o.toggledItems.includes(i.pathFromRoot)))("tippy",i.name),_.xp6(2),_.hij(" ",i.name," ")}}function at(t,e){1&t&&_.GkF(0)}function st(t,e){if(1&t&&(_.ynx(0),_.YNc(1,at,1,0,"ng-container",5),_.BQk()),2&t){var n=e.$implicit;_.oxw(4);var i=_.MAs(5);_.xp6(1),_.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",_.VKq(2,nt,n))}}function pt(t,e){if(1&t&&(_.ynx(0),_.YNc(1,st,2,4,"ng-container",1),_.ALo(2,"sortItems"),_.BQk()),2&t){var n=_.oxw(2).item;_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,1,n.children))}}function lt(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"div",9),_.NdJ("click",function(){_.CHM(n);var t=_.oxw().item;return _.oxw().toggleItem(t.pathFromRoot)}),_.ALo(2,"depthPadding"),_.TgZ(3,"div",10),_.TgZ(4,"mat-icon"),_._uU(5),_.qZA(),_.TgZ(6,"span"),_._uU(7),_.qZA(),_.qZA(),_.TgZ(8,"div",11),_.NdJ("click",function(){_.CHM(n);var t=_.oxw().item;return _.oxw().addFile(t.pathFromRoot)}),_.TgZ(9,"mat-icon"),_._uU(10,"add"),_.qZA(),_.qZA(),_.qZA(),_.YNc(11,pt,3,3,"ng-container",7),_.qZA()}if(2&t){var i=_.oxw().item,o=_.oxw();_.xp6(1),_.Akn(_.xi3(2,6,i.depth,i.isFolder)),_.xp6(2),_.Q6J("tippy",i.name),_.xp6(2),_.hij(" ",o.toggledItems.includes(i.pathFromRoot)?"keyboard_arrow_down":"keyboard_arrow_right"," "),_.xp6(2),_.Oqu(i.name),_.xp6(4),_.Q6J("ngIf",o.toggledItems.includes(i.pathFromRoot))}}function ct(t,e){if(1&t&&(_.YNc(0,rt,3,10,"div",6),_.YNc(1,lt,12,9,"div",7)),2&t){var n=e.item;_.Q6J("ngIf",!n.isFolder),_.xp6(1),_.Q6J("ngIf",n.isFolder)}}var ut=function(){function t(t){this.dialogService=t,this.createTemplate=new _.vpe,this.toggledItems=[]}return t.prototype.ngOnChanges=function(t){var e,n;(null===(e=t.templates)||void 0===e?void 0:e.currentValue)&&(this.tree=function(t){var e,n;if(!t)return[];var i=[];try{for(var o=(0,x.XA)(t),r=o.next();!r.done;r=o.next())for(var a=i,s=r.value.split("/"),p=s[s.length-1],l="",c=function(t){var e=s[t];l+=t?"/"+e:e;var n=a.find(function(t){return t.name===e});if(n)a=n.children;else{var i=(0,x.pi)({depth:t,name:e,pathFromRoot:l,isFolder:e!==p},e!==p&&{children:[]});a.push(i),a=i.children}},u=0;u<s.length;u++)c(u)}catch(d){e={error:d}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}(this.templates)),(null===(n=t.view)||void 0===n?void 0:n.currentValue)&&this.showFileInTree(this.view.FileName)},t.prototype.openTemplate=function(t){this.dialogService.openCodeFile(t)},t.prototype.toggleItem=function(t){M.iX.toggleInArray(t,this.toggledItems)},t.prototype.addFile=function(t){this.createTemplate.emit(t)},t.prototype.showFileInTree=function(t){var e,n;if(null!=t&&!this.toggledItems.includes(t)){var i=t.split("/"),o="";try{for(var r=(0,x.XA)(i),a=r.next();!a.done;a=r.next()){var s=a.value;this.toggledItems.includes(o=o?o+"/"+s:s)||this.toggleItem(o)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.\u0275fac=function(e){return new(e||t)(_.Y36(f.x))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{createTemplate:"createTemplate"},features:[_.TTD],decls:10,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[4,"ngFor","ngForOf"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy","click",4,"ngIf"],[4,"ngIf"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(t,e){1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"div"),_.YNc(2,it,2,4,"ng-container",1),_.ALo(3,"sortItems"),_.YNc(4,ct,2,2,"ng-template",null,2,_.W1O),_.qZA(),_.TgZ(6,"div",3),_.TgZ(7,"button",4),_.NdJ("click",function(){return e.addFile()}),_.TgZ(8,"mat-icon"),_._uU(9,"add"),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t&&(_.xp6(2),_.Q6J("ngForOf",_.lcZ(3,1,e.tree)))},directives:[i.sg,r.lW,K.$,p.Hw,i.tP,i.O5,i.mk,X.E],pipes:[W,tt],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]}),t}(),dt=function(){function t(){}return t.prototype.transform=function(t){if(null!=t)return Array.isArray(t)?t:Object.values(t)},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=_.Yjl({name:"objectToArray",type:t,pure:!0}),t}(),ht=n(6207);function ft(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"mat-icon",12),_.NdJ("click",function(){_.CHM(n);var t=_.oxw().$implicit;return _.oxw(5).toggleMore(t)}),_._uU(1),_.qZA()}if(2&t){var i=_.oxw().$implicit,o=_.oxw(5);_.xp6(1),_.hij(" ",o.toggledMores.includes(i)?"more_vert":"more_horiz"," ")}}function gt(t,e){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"a",15),_._uU(2),_.qZA(),_.qZA()),2&t){var n=e.$implicit;_.xp6(1),_.Q6J("href",n.url,_.LSH),_.xp6(1),_.Oqu(n.name)}}function mt(t,e){if(1&t&&(_.TgZ(0,"div",13),_._UZ(1,"div",14),_.ALo(2,"safeHtml"),_.YNc(3,gt,3,2,"div",1),_.qZA()),2&t){var n=_.oxw().$implicit;_.xp6(1),_.Q6J("innerHTML",_.lcZ(2,2,n.help),_.oJD),_.xp6(2),_.Q6J("ngForOf",n.links)}}function vt(t,e){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"a",15),_._uU(2),_.qZA(),_.qZA()),2&t){var n=e.$implicit;_.xp6(1),_.Q6J("href",n.url,_.LSH),_.xp6(1),_.Oqu(n.name)}}function yt(t,e){if(1&t&&(_.TgZ(0,"div",18),_._UZ(1,"div",14),_.ALo(2,"safeHtml"),_.YNc(3,vt,3,2,"div",1),_.qZA()),2&t){var n=_.oxw().$implicit;_.xp6(1),_.Q6J("innerHTML",_.lcZ(2,2,n.help),_.oJD),_.xp6(2),_.Q6J("ngForOf",n.links)}}function xt(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"div",7),_.TgZ(2,"div",16),_.NdJ("click",function(){var t=_.CHM(n).$implicit;return _.oxw(7).addSnippet(t.snip)}),_._uU(3),_.qZA(),_.TgZ(4,"mat-icon",10),_.NdJ("click",function(){var t=_.CHM(n).$implicit;return _.oxw(7).toggleInfo(t)}),_._uU(5," info "),_.qZA(),_.qZA(),_.YNc(6,yt,4,4,"div",17),_.qZA()}if(2&t){var i=e.$implicit,o=_.oxw(7);_.xp6(2),_.Q6J("tippy",i.snip),_.xp6(1),_.hij(" ",i.label," "),_.xp6(3),_.Q6J("ngIf",o.toggledInfos.includes(i))}}function wt(t,e){if(1&t&&(_.ynx(0),_.YNc(1,xt,7,3,"div",1),_.ALo(2,"objectToArray"),_.BQk()),2&t){var n=_.oxw().$implicit;_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,1,n.more))}}function bt(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",6),_.TgZ(1,"div",7),_.TgZ(2,"div",8),_.NdJ("click",function(){var t=_.CHM(n).$implicit;return _.oxw(5).addSnippet(t.snip)}),_._uU(3),_.qZA(),_.YNc(4,ft,2,1,"mat-icon",9),_.TgZ(5,"mat-icon",10),_.NdJ("click",function(){var t=_.CHM(n).$implicit;return _.oxw(5).toggleInfo(t)}),_._uU(6," info "),_.qZA(),_.qZA(),_.YNc(7,mt,4,4,"div",11),_.YNc(8,wt,3,3,"ng-container",3),_.qZA()}if(2&t){var i=e.$implicit,o=_.oxw(5);_.xp6(2),_.Q6J("tippy",i.snip),_.xp6(1),_.hij(" ",i.label," "),_.xp6(1),_.Q6J("ngIf",i.more),_.xp6(3),_.Q6J("ngIf",o.toggledInfos.includes(i)),_.xp6(1),_.Q6J("ngIf",o.toggledMores.includes(i))}}function St(t,e){if(1&t&&(_.ynx(0),_.YNc(1,bt,9,5,"div",5),_.ALo(2,"objectToArray"),_.BQk()),2&t){var n=_.oxw().$implicit;_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,1,n.value))}}function Ct(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"div",4),_.NdJ("click",function(){var t=_.CHM(n).$implicit;return _.oxw(3).toggleFolder(t)}),_.ALo(2,"translate"),_.TgZ(3,"mat-icon"),_._uU(4),_.qZA(),_.TgZ(5,"span"),_._uU(6),_.ALo(7,"translate"),_.qZA(),_.qZA(),_.YNc(8,St,3,3,"ng-container",3),_.qZA()}if(2&t){var i=e.$implicit,o=_.oxw(2).$implicit,r=_.oxw();_.xp6(1),_.Q6J("tippy",_.lcZ(2,4,"SourceEditorSnippets."+o.key+"."+i.key+".Help")),_.xp6(3),_.Oqu(r.toggledFolders.includes(i)?"keyboard_arrow_down":"keyboard_arrow_right"),_.xp6(2),_.Oqu(_.lcZ(7,6,"SourceEditorSnippets."+o.key+"."+i.key+".Title")),_.xp6(2),_.Q6J("ngIf",r.toggledFolders.includes(i))}}function Tt(t,e){if(1&t&&(_.ynx(0),_.YNc(1,Ct,9,8,"div",1),_.ALo(2,"keyvalue"),_.BQk()),2&t){var n=_.oxw().$implicit;_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,1,n.value))}}function It(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"div",2),_.NdJ("click",function(){var t=_.CHM(n).$implicit;return _.oxw().toggleSection(t)}),_.ALo(2,"translate"),_.TgZ(3,"mat-icon"),_._uU(4),_.qZA(),_.TgZ(5,"span"),_._uU(6),_.ALo(7,"translate"),_.qZA(),_.qZA(),_.YNc(8,Tt,3,3,"ng-container",3),_.qZA()}if(2&t){var i=e.$implicit,o=_.oxw();_.xp6(1),_.Q6J("tippy",_.lcZ(2,4,"SourceEditorSnippets."+i.key+".Help")),_.xp6(3),_.Oqu(o.toggledSections.includes(i)?"keyboard_arrow_down":"keyboard_arrow_right"),_.xp6(2),_.Oqu(_.lcZ(7,6,"SourceEditorSnippets."+i.key+".Title")),_.xp6(2),_.Q6J("ngIf",o.toggledSections.includes(i))}}var kt=function(){function t(){this.insertSnippet=new _.vpe,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}return t.prototype.addSnippet=function(t){this.insertSnippet.emit(t)},t.prototype.toggleSection=function(t){M.iX.toggleInArray(t,this.toggledSections)},t.prototype.toggleFolder=function(t){M.iX.toggleInArray(t,this.toggledFolders)},t.prototype.toggleInfo=function(t){M.iX.toggleInArray(t,this.toggledInfos)},t.prototype.toggleMore=function(t){M.iX.toggleInArray(t,this.toggledMores)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:3,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],[4,"ngFor","ngForOf"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],[4,"ngIf"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],["class","snippet",4,"ngFor","ngForOf"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750",3,"click",4,"ngIf"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help",4,"ngIf"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more",4,"ngIf"],[1,"snippet-help","snippet-help-more"]],template:function(t,e){1&t&&(_.TgZ(0,"div",0),_.YNc(1,It,9,8,"div",1),_.ALo(2,"keyvalue"),_.qZA()),2&t&&(_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,1,e.snippets)))},directives:[i.sg,K.$,p.Hw,i.O5,a.wG,X.E],pipes:[i.Nd,u.X$,dt,ht.z],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]}),t}(),At=function(t){return{active:t}};function Mt(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",11),_.NdJ("click",function(){return _.CHM(n),_.oxw(2).toggleEditor()}),_.TgZ(1,"mat-icon"),_._uU(2,"highlight"),_.qZA(),_.qZA()}if(2&t){var i=_.oxw(2);_.Q6J("ngClass",_.VKq(1,At,i.activeEditor===i.Editors.Monaco))}}function Ot(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"app-ace-editor",12),_.NdJ("ngModelChange",function(t){return _.CHM(n),_.oxw(2).codeChanged(t)}),_.qZA()}if(2&t){var i=_.oxw().ngIf;_.Q6J("filename",i.view.FileName)("ngModel",i.view.Code)("snippets",i.editorSnipps)}}function Zt(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"app-monaco-editor",13),_.NdJ("ngModelChange",function(t){return _.CHM(n),_.oxw(2).codeChanged(t)}),_.qZA()}if(2&t){var i=_.oxw().ngIf,o=_.oxw();_.Q6J("filename",i.view.FileName)("ngModel",i.view.Code)("options",o.monacoOptions)("snippets",i.editorSnipps)("autoFocus",!0)}}function Ft(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",1),_.TgZ(1,"div",2),_.TgZ(2,"div",3),_.NdJ("click",function(){_.CHM(n);var t=_.oxw();return t.toggleExplorer(t.Explorers.Templates)}),_.TgZ(3,"mat-icon"),_._uU(4,"file_copy"),_.qZA(),_.qZA(),_.TgZ(5,"div",4),_.NdJ("click",function(){_.CHM(n);var t=_.oxw();return t.toggleExplorer(t.Explorers.Snippets)}),_.TgZ(6,"mat-icon"),_._uU(7,"code"),_.qZA(),_.qZA(),_.YNc(8,Mt,3,3,"div",5),_.qZA(),_.TgZ(9,"app-code-templates",6),_.NdJ("createTemplate",function(t){return _.CHM(n),_.oxw().createTemplate(t)}),_.qZA(),_.TgZ(10,"app-code-snippets",7),_.NdJ("insertSnippet",function(t){return _.CHM(n),_.oxw().insertSnippet(t)}),_.qZA(),_.YNc(11,Ot,1,3,"app-ace-editor",8),_.YNc(12,Zt,1,5,"app-monaco-editor",9),_.TgZ(13,"button",10),_.NdJ("click",function(){return _.CHM(n),_.oxw().save()}),_.TgZ(14,"mat-icon"),_._uU(15,"done"),_.qZA(),_.qZA(),_.qZA()}if(2&t){var i=e.ngIf,o=_.oxw();_.xp6(2),_.Q6J("ngClass",_.VKq(10,At,o.activeExplorer===o.Explorers.Templates)),_.xp6(3),_.Q6J("ngClass",_.VKq(12,At,o.activeExplorer===o.Explorers.Snippets)),_.xp6(3),_.Q6J("ngIf",i.debugEnabled),_.xp6(1),_.Q6J("hidden",o.activeExplorer!==o.Explorers.Templates)("view",i.view)("templates",i.templates),_.xp6(1),_.Q6J("hidden",o.activeExplorer!==o.Explorers.Snippets)("snippets",i.explorerSnipps),_.xp6(1),_.Q6J("ngIf",i.view&&o.activeEditor===o.Editors.Ace),_.xp6(1),_.Q6J("ngIf",i.view&&o.activeEditor===o.Editors.Monaco)}}var _t=[{path:"",component:function(){function t(t,e,n,i,o,r,a,s,p,l){this.context=t,this.route=e,this.snackBar=n,this.snackBarStack=i,this.sourceService=o,this.snippetsService=r,this.zone=a,this.titleService=s,this.dialogService=p,this.globalConfigService=l,this.Explorers=J,this.activeExplorer=J.Templates,this.Editors=H,this.activeEditor=H.Ace,this.monacoOptions={theme:"2sxc-dark",tabSize:2},this.context.init(this.route)}return t.prototype.ngOnInit=function(){var t=this;this.subscription=new w.w,this.view$=new b.X(null),this.templates$=new b.X(null),this.explorerSnipps$=new b.X(null),this.editorSnipps$=new b.X(null),this.calculateViewKey(),this.attachListeners();var e=this.sourceService.get(this.viewKey).pipe((0,I.B)()),n=this.sourceService.getTemplates(),i=e.pipe((0,k.zg)(function(e){return t.snippetsService.getSnippets(e)}));(0,S.D)([e,n,i]).subscribe(function(e){var n=(0,x.CR)(e,3),i=n[0],o=n[1],r=n[2];t.view$.next(i),t.templates$.next(o),t.explorerSnipps$.next(r.sets),t.editorSnipps$.next(r.list),t.savedCode=t.view$.value.Code,t.titleService.setTitle(t.view$.value.FileName+" - Code Editor"),t.showCodeAndEditionWarnings(i,o)});var o=this.globalConfigService.getDebugEnabled$();this.templateVars$=(0,C.aj)([this.view$,this.templates$,this.explorerSnipps$,this.editorSnipps$,o]).pipe((0,A.U)(function(t){var e=(0,x.CR)(t,5);return{debugEnabled:e[4],view:e[0],templates:e[1],explorerSnipps:e[2],editorSnipps:e[3]}}))},t.prototype.ngOnDestroy=function(){this.view$.complete(),this.templates$.complete(),this.explorerSnipps$.complete(),this.editorSnipps$.complete(),this.subscription.unsubscribe()},t.prototype.toggleExplorer=function(t){this.activeExplorer=this.activeExplorer!==t?t:null},t.prototype.toggleEditor=function(){switch(this.activeEditor){case H.Ace:this.activeEditor=H.Monaco;break;case H.Monaco:this.activeEditor=H.Ace;break;default:this.activeEditor=H.Ace}},t.prototype.createTemplate=function(t){var e=this,n="File name:",i=Z.KA;("api"===t||(null==t?void 0:t.startsWith("api/")))&&(n="Controller name:",i=Z.ib);var o=prompt(n,i);null!==o&&0!==o.length&&(o=M.vl.sanitizePath(o),null!=t&&(o=t+"/"+o),this.sourceService.createTemplate(o).subscribe(function(t){e.sourceService.getTemplates().subscribe(function(t){e.templates$.next(t)})}))},t.prototype.insertSnippet=function(t){null!=this.aceEditorRef?this.aceEditorRef.insertSnippet(t):null!=this.monacoEditorRef&&this.monacoEditorRef.insertSnippet(t)},t.prototype.codeChanged=function(t){this.view$.next((0,x.pi)((0,x.pi)({},this.view$.value),{Code:t}))},t.prototype.save=function(){var t=this;this.snackBar.open("Saving...");var e=this.view$.value.Code;this.sourceService.save(this.viewKey,this.view$.value).subscribe({next:function(n){n?(t.savedCode=e,e=null,t.snackBar.open("Saved",null,{duration:2e3})):t.snackBar.open("Failed",null,{duration:2e3})},error:function(){t.snackBar.open("Failed",null,{duration:2e3})}})},t.prototype.calculateViewKey=function(){var t=sessionStorage.getItem(F.kF),e=JSON.parse(t)[0];this.viewKey=e.EntityId||e.Path},t.prototype.showCodeAndEditionWarnings=function(t,e){var n=this,i=t.FileName,o=i.indexOf("/")>-1?i.lastIndexOf("/")+1:0,r=0===o?"":i.substring(0,o),a=i.substring(o),s=a.substring(0,a.length-t.Extension.length)+".code"+t.Extension,p=e.find(function(t){return t===r+s}),l=e.filter(function(t){return t.endsWith(a)}).length-1;p&&this.snackBarStack.add("This template also has a code-behind file '"+p+"'.","Open").subscribe(function(){n.dialogService.openCodeFile(p)}),l&&this.snackBarStack.add("There are "+l+" other editions of this. You may be editing an edition which is not the one you see.","Help").subscribe(function(){window.open("https://r.2sxc.org/polymorphism","_blank")})},t.prototype.attachListeners=function(){var t=this;this.zone.runOutsideAngular(function(){t.subscription.add((0,T.R)(window,"beforeunload").subscribe(function(e){t.savedCode!==t.view$.value.Code&&(e.preventDefault(),e.returnValue="")})),t.subscription.add((0,T.R)(window,"keydown").subscribe(function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),t.zone.run(function(){t.save()}))}))})},t.\u0275fac=function(e){return new(e||t)(_.Y36(h._),_.Y36(y.gz),_.Y36(c.ux),_.Y36(U),_.Y36(R),_.Y36(Y),_.Y36(_.R0b),_.Y36(B.Dx),_.Y36(f.x),_.Y36(G.bE))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-code-editor"]],viewQuery:function(t,e){if(1&t&&(_.Gf(E,5),_.Gf(O.T,5)),2&t){var n=void 0;_.iGM(n=_.CRH())&&(e.aceEditorRef=n.first),_.iGM(n=_.CRH())&&(e.monacoEditorRef=n.first)}},decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",4,"ngIf"],["appToggleDebug","",1,"editor-root"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],["class","button","tippy","Toggle Monaco",3,"ngClass","click",4,"ngIf"],[3,"hidden","view","templates","createTemplate"],[3,"hidden","snippets","insertSnippet"],[3,"filename","ngModel","snippets","ngModelChange",4,"ngIf"],[3,"filename","ngModel","options","snippets","autoFocus","ngModelChange",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"],["tippy","Toggle Monaco",1,"button",3,"ngClass","click"],[3,"filename","ngModel","snippets","ngModelChange"],[3,"filename","ngModel","options","snippets","autoFocus","ngModelChange"]],template:function(t,e){1&t&&(_.YNc(0,Ft,16,14,"div",0),_.ALo(1,"async")),2&t&&_.Q6J("ngIf",_.lcZ(1,1,e.templateVars$))},directives:[i.O5,V.D,K.$,i.mk,p.Hw,ut,kt,r.lW,E,o.JJ,o.On,O.T],pipes:[i.Ov],styles:[".mat-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),t}()}],Pt=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[y.Bz.forChild(_t)],y.Bz]}),t}();function Nt(t){return new m.M(t,"./i18n/code-editor.",".js?"+window.sxcVersion)}var Et=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({providers:[h._,R,f.x,Y,u.sK],imports:[[Pt,g.q,i.ez,s.Is,r.ot,p.Ps,c.ZX,o.u5,l.LD,a.si,u.aw.forChild((0,v.f)(Nt)),d.n]]}),t}()},7093:function(t,e,n){"use strict";n.d(e,{jt:function(){return c},Mr:function(){return u}});var i=n(4762),o=n(9996),r=n(2832),a=n(1785),s=n(2693),p=n(3582),l=n(2837),c="admin/field/all",u=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.apiUrl=function(t){return this.dnnContext.$2sxc.http.apiUrl(t)},t.prototype.typeListRetrieve=function(){return this.http.get(this.apiUrl("admin/field/DataTypes"),{params:{appid:this.context.appId.toString()}})},t.prototype.getInputTypesList=function(){return this.http.get(this.apiUrl("admin/field/InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,o.U)(function(t){return t.map(function(t){return{dataType:t.Type.substring(0,t.Type.indexOf("-")),inputType:t.Type,label:t.Label,description:t.Description}})}))},t.prototype.getReservedNames=function(){return this.http.get(this.apiUrl("admin/field/ReservedNames"))},t.prototype.getFields=function(t){return this.http.get(this.apiUrl(c),{params:{appid:this.context.appId.toString(),staticName:t.StaticName}}).pipe((0,o.U)(function(t){var e,n;if(t)try{for(var o=(0,i.XA)(t),r=o.next();!r.done;r=o.next()){var a=r.value;if(a.Metadata){var s=a.Metadata,p=s[a.Type],l=s[a.InputType];s.merged=(0,i.pi)((0,i.pi)((0,i.pi)({},s.All),p),l)}}}catch(c){e={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return t}))},t.prototype.reOrder=function(t,e){return this.http.post(this.apiUrl("admin/field/Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:e.Id.toString(),order:JSON.stringify(t)}})},t.prototype.setTitle=function(t,e){return this.http.post(this.apiUrl(r._+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:e.Id.toString(),attributeId:t.Id.toString()}})},t.prototype.rename=function(t,e,n){return this.http.post(this.apiUrl("admin/field/Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:e.toString(),attributeId:t.toString(),newName:n}})},t.prototype.delete=function(t,e){if(t.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl("admin/field/Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:e.Id.toString(),attributeId:t.Id.toString()}})},t.prototype.add=function(t,e){return this.http.post(this.apiUrl("admin/field/Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:e.toString(),Id:t.Id.toString(),Type:t.Type,InputType:t.InputType,StaticName:t.StaticName,IsTitle:t.IsTitle.toString(),Index:t.SortOrder.toString()}})},t.prototype.updateInputType=function(t,e,n){return this.http.post(this.apiUrl("admin/field/InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:t.toString(),field:e,inputType:n}})},t.\u0275fac=function(e){return new(e||t)(a.LFG(s.eN),a.LFG(p._),a.LFG(l._y))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t}()},5733:function(t,e,n){"use strict";n.d(e,{T:function(){return s}});var i=n(4762),o=n(1785),r=n(1041),a=["editor"],s=function(){function t(){this.autoFocus=!1,this.focused=new o.vpe,this.blured=new o.vpe,this.value="",this.completionItemProviders=[],this.propagateChange=function(){},this.propagateTouched=function(){}}return t.prototype.ngAfterViewInit=function(){var t=this;this.observer=new ResizeObserver(function(e){var n;null===(n=t.editorInstance)||void 0===n||n.layout()}),this.observer.observe(this.editorRef.nativeElement),window.require.config({paths:{vs:["https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.25.2/min/vs"]}}),window.require(["vs/editor/editor.main"],function(e){t.monaco=e,t.addThemes(),t.monacoLoaded()})},t.prototype.ngOnChanges=function(t){null!=t.jsonSchema&&this.setJsonSchema()},t.prototype.insertSnippet=function(t){var e,n,i=null===(e=this.editorInstance)||void 0===e?void 0:e.getContribution("snippetController2");null==i||i.insert(t),null===(n=this.editorInstance)||void 0===n||n.focus()},t.prototype.ngOnDestroy=function(){var t,e,n;null===(t=this.observer)||void 0===t||t.disconnect(),this.completionItemProviders.forEach(function(t){t.dispose()}),null===(e=this.editorModel)||void 0===e||e.dispose(),null===(n=this.editorInstance)||void 0===n||n.dispose()},t.prototype.writeValue=function(t){var e;this.value=t||"",null===(e=this.editorInstance)||void 0===e||e.getModel().setValue(this.value)},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){this.propagateTouched=t},t.prototype.monacoLoaded=function(){var t=this;this.editorInstance=this.monaco.editor.create(this.editorRef.nativeElement,this.options),this.editorModelUri=this.monaco.Uri.file(this.filename),this.editorModel=this.monaco.editor.createModel(this.value,void 0,this.editorModelUri),this.editorInstance.setModel(this.editorModel),this.setJsonSchema(),this.addSnippets(),this.editorInstance.getModel().onDidChangeContent(function(){t.propagateChange(t.editorInstance.getModel().getValue())}),this.editorInstance.onDidFocusEditorWidget(function(){t.focused.emit()}),this.editorInstance.onDidBlurEditorWidget(function(){t.blured.emit()}),this.autoFocus&&this.editorInstance.focus()},t.prototype.setJsonSchema=function(){var t=this;if(null!=this.monaco&&null!=this.editorModelUri&&null!=this.jsonSchema){var e=(0,i.pi)((0,i.pi)({},this.monaco.languages.json.jsonDefaults.diagnosticsOptions),{enableSchemaRequest:!0,schemaRequest:"warning",schemaValidation:"warning",validate:!0}),n=e.schemas.some(function(e){return e.fileMatch[0]===t.editorModelUri.toString()});e.schemas=n?e.schemas.map(function(e){return e.fileMatch[0]!==t.editorModelUri.toString()?e:t.buildCurrentSchema()}):(0,i.ev)((0,i.ev)([],(0,i.CR)(e.schemas)),[this.buildCurrentSchema()]),this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(e)}},t.prototype.buildCurrentSchema=function(){return"link"===this.jsonSchema.type?{uri:this.jsonSchema.value,fileMatch:[this.editorModelUri.toString()]}:{uri:this.editorModelUri.toString(),fileMatch:[this.editorModelUri.toString()],schema:JSON.parse(this.jsonSchema.value)}},t.prototype.addThemes=function(){this.monaco.themesWereAdded||(this.monaco.themesWereAdded=!0,this.monaco.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}]}))},t.prototype.addSnippets=function(){var t=this;this.monaco.snippetsWereAdded||(this.monaco.snippetsWereAdded=!0,this.completionItemProviders.push(this.monaco.languages.registerCompletionItemProvider(this.editorInstance.getModel().getModeId(),{triggerCharacters:[">"],provideCompletionItems:function(e,n){var i=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column});if(">"!==i[i.length-1])return{suggestions:[]};var o=i.lastIndexOf("<");if(-1===o)return{suggestions:[]};var r=i.substring(o),a=0;if(Array.from(r).forEach(function(t){'"'===t&&a++}),a%2!=0)return{suggestions:[]};if(r.startsWith("</"))return{suggestions:[]};if(r.indexOf(">")!==r.length-1)return{suggestions:[]};var s=r.indexOf(" ");if(-1===s&&(s=r.indexOf(">")),-1===s)return{suggestions:[]};var p=r.substring(1,s);return p&&/[a-zA-Z0-9_-]/.test(p)?{suggestions:[{label:"</"+p+">",kind:t.monaco.languages.CompletionItemKind.Snippet,insertText:"$0</"+p+">",insertTextRules:t.monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:n.column,endColumn:n.column}}]}:{suggestions:[]}}})),this.snippets&&this.completionItemProviders.push(this.monaco.languages.registerCompletionItemProvider(this.editorInstance.getModel().getModeId(),{provideCompletionItems:function(e,n){var i=e.getWordUntilPosition(n),o={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:i.startColumn,endColumn:i.endColumn};return{suggestions:t.snippets.map(function(e){var n,i,r;if(e.content)return{label:e.name,kind:t.monaco.languages.CompletionItemKind.Snippet,documentation:(null!==(n=e.title)&&void 0!==n?n:"")+"\n"+(null!==(i=e.help)&&void 0!==i?i:"")+"\n"+(null!==(r=e.links)&&void 0!==r?r:""),insertText:e.content,insertTextRules:t.monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o}}).filter(function(t){return!!t})}}})))},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-monaco-editor"]],viewQuery:function(t,e){var n;1&t&&o.Gf(a,5),2&t&&o.iGM(n=o.CRH())&&(e.editorRef=n.first)},inputs:{filename:"filename",snippets:"snippets",options:"options",jsonSchema:"jsonSchema",autoFocus:"autoFocus"},outputs:{focused:"focused",blured:"blured"},features:[o._Bn([{provide:r.JU,useExisting:(0,o.Gpc)(function(){return t}),multi:!0}]),o.TTD],decls:2,vars:0,consts:[[2,"width","100%","height","100%","overflow","hidden"],["editor",""]],template:function(t,e){1&t&&o._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}"]}),t}()},8526:function(t,e,n){"use strict";n.d(e,{n:function(){return o}});var i=n(1785),o=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({}),t}()},4020:function(t,e,n){"use strict";n.d(e,{ib:function(){return i},KA:function(){return o},P:function(){return r}});var i="MyController.cs",o="_MyFile.cshtml",r="MyFile.html"},1271:function(t,e,n){"use strict";n.d(e,{E:function(){return o}});var i=n(1785),o=function(){function t(){}return t.prototype.onClick=function(t){t.stopPropagation()},t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.lG2({type:t,selectors:[["","appClickStopPropagation",""]],hostBindings:function(t,e){1&t&&i.NdJ("click",function(t){return e.onClick(t)})}}),t}()},6146:function(t,e,n){"use strict";n.d(e,{D:function(){return r}});var i=n(1785),o=n(9886),r=function(){function t(t){this.globalConfigService=t}return t.prototype.onClick=function(t){(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&t.shiftKey&&t.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())},t.\u0275fac=function(e){return new(e||t)(i.Y36(o.bE))},t.\u0275dir=i.lG2({type:t,selectors:[["","appToggleDebug",""]],hostBindings:function(t,e){1&t&&i.NdJ("click",function(t){return e.onClick(t)})}}),t}()},6207:function(t,e,n){"use strict";n.d(e,{z:function(){return r}});var i=n(1785),o=n(9624),r=function(){function t(t){this.sanitizer=t}return t.prototype.transform=function(t){return this.sanitizer.bypassSecurityTrustHtml(t)},t.\u0275fac=function(e){return new(e||t)(i.Y36(o.H7,16))},t.\u0275pipe=i.Yjl({name:"safeHtml",type:t,pure:!0}),t}()},4903:function(t,e,n){"use strict";n.d(e,{x:function(){return p}});var i=n(4762),o=n(7683),r=n(5549),a=n(1785),s=n(3582),p=function(){function t(t){this.context=t}return t.prototype.openCodeFile=function(t,e){void 0===e&&(e=!1);var n={items:[{Path:t}]},a=(0,i.pi)((0,i.pi)((0,i.pi)({},this.buildHashParam(r.Hp,o.f.Develop)),this.buildHashParam(r.PH,e.toString())),this.buildHashParam(r.kF,JSON.stringify(n.items))),s=this.buildFullUrl(a);window.open(s,"_blank")},t.prototype.openQueryDesigner=function(t){var e={items:[{EntityId:t}]},n=(0,i.pi)((0,i.pi)((0,i.pi)({},this.buildHashParam(r.Hp,o.f.PipelineDesigner)),this.buildHashParam(r._8,t.toString())),this.buildHashParam(r.kF,JSON.stringify(e.items))),a=this.buildFullUrl(n);window.open(a,"_blank")},t.prototype.openAppsManagement=function(t,e){var n=(0,i.pi)({},e&&{tab:e}),a=(0,i.pi)((0,i.pi)((0,i.pi)({},this.buildHashParam(r.fy,t.toString())),this.buildHashParam(r.Hp,o.f.Zone)),Object.keys(n).length?this.buildHashParam(r.n1,JSON.stringify(n)):""),s=this.buildFullUrl(a);window.open(s,"_blank")},t.prototype.openAppAdministration=function(t,e,n,a){var s=(0,i.pi)((0,i.pi)({},n&&{tab:n}),a&&{scope:a}),p=(0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)({},this.buildHashParam(r.fy,t.toString())),this.buildHashParam(r.cF,e.toString())),this.buildHashParam(r.Hp,o.f.App)),Object.keys(s).length?this.buildHashParam(r.n1,JSON.stringify(s)):""),l=this.buildFullUrl(p);window.open(l,"_blank")},t.prototype.buildSharedHashParams=function(){return(0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)({},this.buildHashParam(r.fy,this.context.zoneId.toString())),this.buildHashParam(r.cF,this.context.appId.toString())),this.buildHashParam(r.np,this.context.tabId.toString())),this.buildHashParam(r.B1,this.context.moduleId.toString())),this.buildHashParam(r.mf,this.context.contentBlockId.toString())),this.buildHashParam(r.by)),this.buildHashParam(r.q$)),this.buildHashParam(r.sG)),this.buildHashParam(r.Dz)),sessionStorage.getItem(r.PD)?this.buildHashParam(r.PD):{})},t.prototype.buildHashParam=function(t,e){var n,i=t.replace(r.O4,""),o=null!=e?e:sessionStorage.getItem(t),a=encodeURIComponent(o);return(n={})[i]=a,n},t.prototype.buildFullUrl=function(t){var e=sessionStorage.getItem(r.a3),n=new URL(e),o=n.origin+n.pathname+n.search,a=(0,i.pi)((0,i.pi)({},this.buildSharedHashParams()),t);return o+Object.entries(a).reduce(function(t,e){var n=(0,i.CR)(e,2);return t+"&"+n[0]+"="+n[1]},"").replace("&","#")},t.\u0275fac=function(e){return new(e||t)(a.LFG(s._))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t}()},2461:function(t,e,n){"use strict";n.d(e,{f:function(){return r}});var i=n(2693),o=n(649);function r(t){return{loader:{provide:o.Zw,useFactory:t,deps:[i.eN]},defaultLanguage:"en",isolate:!0}}},8842:function(t,e,n){"use strict";n.d(e,{M:function(){return r}});var i=n(878),o=n(7727),r=function(){function t(t,e,n){this.http=t,this.prefix=e,this.suffix=n}return t.prototype.getTranslation=function(t){var e=this;return this.http.get(""+this.prefix+t+this.suffix).pipe((0,o.K)(function(n){return console.warn("Translation: Failed to get language '"+t+"' from "+e.prefix,n),(0,i.of)({})}))},t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.08.00/ng-edit/projects_ng-dialogs_src_app_code-editor_code-editor_module_ts.aeb91a762588ca98bb7d.js.map