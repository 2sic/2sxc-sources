var $2sxcJsApi=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n,o=function(){function t(){this.frame=void 0,this.callback=void 0}return t.prototype.open=function(t,e){for(var r=10000010,n=window;n!==window.top&&r<10000100;)r++,n=n.parent;var o=document.createElement("div");o.setAttribute("style"," top: 0;left: 0;width: 100%;height: 100%; position:fixed; z-index:"+r),document.body.appendChild(o);var i=document.createElement("iframe");i.setAttribute("allowtransparency","true"),i.setAttribute("style","top: 0;left: 0;width: 100%;height: 100%;"),i.setAttribute("src",t),o.appendChild(i),document.body.className+=" sxc-popup-open",this.frame=i,this.callback=e},t.prototype.close=function(){if(this.frame){document.body.className=document.body.className.replace("sxc-popup-open","");var t=this.frame;t.parentNode.parentNode.removeChild(t.parentNode),this.callback()}},t.prototype.closeThis=function(){window.parent.$2sxc.totalPopup.close()},t}(),i=function(){function t(){}return t.prototype.get=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e,r=new RegExp("[\\?&]"+t+"=([^&#]*)","i").exec(location.search);null===r&&(r=new RegExp("[#&]"+t+"=([^&#]*)","i").exec(location.hash));if(null===r){var n=window.location.pathname.match(new RegExp("/"+t+"/([^/]+)","i"));n&&n.length>1&&(e=n.reverse()[0])}else e=r[1];return null==e?"":decodeURIComponent(e.replace(/\+/g," "))},t.prototype.require=function(t){var e=this.get(t);if(""===e){var r="Required parameter ("+t+") missing from url - cannot continue";throw alert(r),r}return e},t.prototype.debug=function(){return"true"===this.get("debug")},t}(),a=function(){this.watchDomChanges=0},s="ContentBlockId",u="ModuleId",c="TabId",p="PageId",l=["app","app-sys","app-api","app-query","app-content","eav","view","dnn"];!function(t){t.log="log",t.warn="warn",t.error="error",t.throw="throw"}(n||(n={}));var d=function(){function t(t,e,r){var n=this;this.parentLog=e,this.initLog=function(t,e,r){return n.initLogInternal(t,e,r)},this.initLogInternal(t,e,r)}return t.prototype.initLogInternal=function(t,e,r){null==this.log?this.log=new f(t,e,r):(this.log.rename(t),this.log.linkLog(e),null!=r&&this.log.add(r))},t}(),h=-1!==location.search.indexOf("debug=true"),f=function(){function t(t,e,r){var n=this;this.entries=new Array,this.depth=0,this.callDepths=[],this.maxEntries=1e3,this.liveDump=!1,this._parentHasLiveDump=!1,this.keepData=h,this._parentHasKeepData=!1,this.fullIdentifier=function(){return""+(n.parent?n.parent.fullIdentifier():"")+n.identifier()},this.linkLog=function(t){n.parent=t||n.parent,n.parent&&(n._parentHasLiveDump=n.parent.liveDump||n.parent._parentHasLiveDump,n._parentHasKeepData=n.parent.keepData||n.parent._parentHasKeepData)},this.scope="tdo",this.name="unknwn",this.id=function(){return n.idCache||(n.idCache=n.randomString(2))},this.identifier=function(){return""+n.scope+n.name+"("+n.id()+")"},this.rename(t),this.linkLog(e),this.startTime=(new Date).getTime(),null!=r&&this.add(r)}return t.prototype.rename=function(t){try{var e=t.indexOf(".");this.scope=e>0?t.substr(0,Math.min(e,3))+".":"";var r=e>0?t.substr(e+1):t;this.name=r.substr(0,Math.min(r.length,6)),this.name=this.name.substr(0,Math.min(this.name.length,6))}catch(t){}},t.prototype.add=function(t,e){if(this.entries.length>this.maxEntries)return this._prepareMessage(t);this.entries.length===this.maxEntries&&this._addEntry(this._prepareEntry("Maximum amount of entries added to log, will stop adding more"));var r=this._prepareEntry(t,e);return this._addEntry(r),r.message},t.prototype.addData=function(t,e){this.logData()&&this.add(t,e)},t.prototype.logData=function(){return this.keepData||this._parentHasKeepData},t.prototype._prepareEntry=function(t,e){var r=this._prepareMessage(t),n=(new Date).getTime()-this.startTime;return new _(this,r,this.depth,n,e)},t.prototype._prepareMessage=function(t){if(t instanceof Function)try{return t()}catch(t){return"err: message undefined"}return t.toString()},t.prototype.call=function(t,e,r,n){return new g(this,t,e,r,n)},t.prototype._callDepthAdd=function(t){this.depth++,this.callDepths.push(t)},t.prototype._callDepthRemove=function(t){this.depth--;var e=this.callDepths.pop();e!==t&&console.warn("log: call depth reduced by '"+t+"' but last was '"+e+"'")},t.prototype.dump=function(t,e){void 0===t&&(t=null),void 0===e&&(e=" - "),t?this.dumpOne(0,t,e):this.dumpList()},t.prototype.dumpList=function(t,e){var r=this;void 0===t&&(t=0);var n=t;this.entries.slice(t,e?t+e:void 0).forEach((function(t){return r.dumpOne(n++,t)}))},t.prototype.dumpOne=function(t,e,r){void 0===r&&(r=" - ");var n=e.result?" ="+e.result:"",o=("0000"+t).slice(-4)+" "+e.source()+r+"..".repeat(e.depth)+e.message+n;e.data?console.log(o,e.data):console.log(o)},t.prototype._addEntry=function(t){this.liveDump&&this.dump(t),this.entries.push(t),this.parent&&this.parent._addEntry(t)},t.prototype.randomString=function(t){for(var e="0123456789abcdefghiklmnopqrstuvwxyz",r="",n=0;n<t;n++){var o=Math.floor(Math.random()*e.length);r+=e.substring(o,o+1)}return r},t}(),g=function(){function t(t,e,r,n,o){if(this.log=t,this.name=e,this.initialEntry=this.log._prepareEntry(e+"("+(r||"")+")"),this.log._callDepthAdd(e),this.log._addEntry(this.initialEntry),"string"==typeof n&&this.add(n),o)for(var i in o)this.data("initial:"+i,o[i])}return t.prototype.add=function(t,e,r){this.lastMessage=t,this.log.add(t,e),r&&this.processExtraBehavior(r,t,e)},t.prototype.onlyAddIfNew=function(t,e){this.lastMessage!==t&&this.add(t),e&&this.processExtraBehavior(e,t,void 0)},t.prototype.data=function(t,e){this.log.addData(t,e)},t.prototype.done=function(t,e){this.return(null,t||"👍",e)},t.prototype.return=function(t,e,r){return e=e||"👍",this.initialEntry.result=e,this.log._callDepthRemove(this.name),this.initialEntry.data=t,(this.log.liveDump||this.log._parentHasLiveDump)&&this.add(this.name+" = "+e,t),r&&this.processExtraBehavior(r,e,t),t},t.prototype.processExtraBehavior=function(t,e,r){if(t===n.log&&console.log(e,r),t===n.warn&&console.warn(e,r),t!==n.error&&t!==n.throw||console.error(e,r),t===n.throw)throw e},t}(),y=function(){function t(){}return t.TypeSafeAssign=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.reduce((function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)}),t[0])},t.DeepClone=function(t,e){if(void 0===e&&(e=!1),null==t)return t;var r=e?JSON.stringify(t,v):JSON.stringify(t);return null==r?t:JSON.parse(r)},t}(),v=function(){var t=new WeakSet;return function(e,r){if("object"==typeof r&&null!==r){if(t.has(r))return;t.add(r)}return r}};var m,w=function(){function t(){}return t.ready=function(t){"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",(function(){return t()}),{once:!0})},t.param=function(t){return Object.entries(t).map((function(t){var e=t[0],r=t[1];return encodeURIComponent(e)+"="+(null==r?"":"string"==typeof r?encodeURIComponent(r):encodeURIComponent(JSON.stringify(r)))})).join("&")},t.domFromString=function(e){var r=document.createElement("div");r.insertAdjacentHTML("afterbegin",e),Array.from(r.querySelectorAll("script")).forEach((function(e){var r=document.createElement("script");Array.from(e.attributes).forEach((function(t){r.setAttribute(t.nodeName,t.nodeValue)})),r.textContent=e.textContent,t.replaceWith(e,r,!1)}));var n=Array.from(r.children);return n.forEach((function(t){r.removeChild(t)})),n},t.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}},t.width=function(t){var e=getComputedStyle(t);return 0===t.offsetWidth?0:t.offsetWidth-(parseInt(e.getPropertyValue("border-left-width"),10)+parseInt(e.getPropertyValue("border-right-width"),10))-(parseInt(e.getPropertyValue("padding-left"),10)+parseInt(e.getPropertyValue("padding-right"),10))},t.height=function(t){var e=getComputedStyle(t);return 0===t.offsetHeight?0:t.offsetHeight-(parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("border-bottom-width"),10))-(parseInt(e.getPropertyValue("padding-top"),10)+parseInt(e.getPropertyValue("padding-bottom"),10))},t.outerWidth=function(t){return t.offsetWidth},t.empty=function(t){Array.from(t.childNodes).forEach((function(e){t.removeChild(e)}))},t.replaceWith=function(t,e,r){var n=t.parentElement,o=Array.from(e.querySelectorAll("script")),i=[];o.forEach((function(t){i.push({script:t,type:t.type}),t.type=null})),n.replaceChild(e,t),i.forEach((function(t){t.script.type=t.type})),r&&b.runScripts(o,void 0)},t.append=function(t,e,r){var n=[];e.forEach((function(e){if("script"===e.tagName.toLocaleLowerCase()){var r=e,o=r.type;r.type=null,t.appendChild(r),r.type=o,n.push(r)}else t.appendChild(e)})),r&&n.length>0&&b.runScripts(n,void 0)},t}(),b=function(){function t(){}return t.runScripts=function(t,e){var r=this,n=t[0],o=t.slice(1);if(null!=n){var i=document.createElement("script");if(Array.from(n.attributes).forEach((function(t){i.setAttribute(t.nodeName,t.nodeValue)})),i.textContent=n.textContent,i.type&&i.src){var a=function(){i.onload=null,i.onerror=null,document.head.removeChild(i),r.runScripts(o,e)};return i.onload=a,i.onerror=a,void document.head.appendChild(i)}setTimeout((function(){document.head.appendChild(i),document.head.removeChild(i),r.runScripts(o,e)}))}else null==e||e()},t}(),_=function(){function t(t,e,r,n,o){var i=this;this.log=t,this.message=e,this.depth=r,this.time=n,this.source=function(){return i.log.fullIdentifier()},o&&(this.data=o)}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){void 0!==t&&this.log.logData()&&(this._data=y.DeepClone(t,!0))},enumerable:!0,configurable:!0}),t}(),x=(m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),O=function(t){function e(){var e=t.call(this,"Sys.Insght")||this;return e.history={},e.add("system","insights",e.log),e.log.add("this log is usually empty, as it's just a helper tool"),e}return x(e,t),e.prototype.add=function(t,e,r){t in this.history||(this.history[t]=new S(t)),this.history[t].logs.push({key:e,log:r})},e.prototype.show=function(t,e,r,n){if(t){var o=this.history[t];if(o)if(void 0!==e){var i=o.logs.length>=e&&o.logs[e];if(i)if(i.log){console.log("Will dump the log for "+t+"["+e+"] '"+i.key+"'");var a=!1;void 0===r&&(a=!0,r=0,n=25),i.log.dumpList(r||0,n),a&&i.log.entries.length>n&&console.warn("Only showing "+n+" of "+i.log.entries.length+" logs. To show all, add start param '..., 0)' or start/length '..., 0, 100)'")}else console.error("found index "+e+" on part '"+t+"' but it has no logs");else console.error("index "+e+" not found in part '"+t+"'")}else{var s=0,u=o.logs.map((function(e){return"$2sxc.insights('"+t+"', "+s+++"); - will show for '"+e.key+"'"})).join("\n");console.log("'"+t+"' contains "+o.logs.length+" entries. Copy/paste the code to to see the logs: \n"+u)}else console.error("part '"+t+"' not found")}else{var c=Object.keys(this.history);console.log("This is the $2sxc JS Insights - see https://r.2sxc.org/insights \nAdd ?debug=true to the url to log more data. \nCopy/paste code lines below to see details. \n----------------------------------------------------------------------\n"+c.length+" insights-sections found: \n"+c.map((function(t){return"$2sxc.insights('"+t+"');"})).join("\n"))}},e}(d),S=function(t){this.name=t,this.logs=[]},A=window.$2sxc&&window.$2sxc._insights||new O,E="/desktopmodules/tosic_sexycontent/",R=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j="You must either include jQuery on the page or inject the jsApi parameters to prevent auto-detection.",L=function(t){function e(e){var r=t.call(this,"Env.DnnLdr",e.log)||this;return r.env=e,r}return R(e,t),e.prototype.dnnSfFallback=function(){var t=this,e=this.log.call("dnnSfFallback");w.ready((function(){return t.dnnSfLoadWhenDocumentReady()})),e.done("started dom-ready watcher")},e.prototype.dnnSfLoadWhenDocumentReady=function(){var t=this.log.call("dnnSfLoadWhenDocumentReady");if(void 0===window.$)throw t.done("error"),"Can't load pageid, moduleid, etc. and $ is not available. \n "+j;var e=window.$.ServicesFramework;if(void 0===e)throw t.done("error"),"Can't load pageid, moduleid etc. and DNN SF is not available. \n "+j;var r=e(0),n=r.getServiceRoot("2sxc"),o={page:r.getTabId(),root:"unknown",api:n,appApi:n,rvtHeader:"RequestVerificationToken",rvt:r.getAntiForgeryValue(),uiRoot:E,platform:"dnn"};this.env.load(o,"dnn SF"),t.done()},e}(d),T=function(){function t(t){this.mainLoader=t,this.log=new f("ldr.dynmic",t.log)}return t.prototype.startMetaTagObserver=function(t){var e=this;this.observer||(this.observer=new MutationObserver((function(r){for(var n=0,o=r;n<o.length;n++){var i=o[n];"attributes"===i.type&&i.attributeName===t&&e.mainLoader.updateEnv(JSON.parse(e.mainLoader.getMetaContent()))}})),this.log.add("start observing meta tag"),this.observer.observe(this.mainLoader.getJsApiMetaTag(),{attributes:!0,childList:!1,subtree:!1}))},t.prototype.startInputRvtObserver=function(){var t=this;if(!this.inputRvtObserver){this.inputRvtObserver=new MutationObserver((function(e){for(var r=0,n=e;r<n.length;r++){var o=n[r];"attributes"===o.type&&"value"===o.attributeName&&t.loadRvtFromHiddenInput(o.target)}})),this.log.add("start observing Rvt Input");var e=document.querySelector("input[name=__RequestVerificationToken]");this.loadRvtFromHiddenInput(e),this.inputRvtObserver.observe(e,{attributes:!0,childList:!1,subtree:!1})}},t.prototype.loadRvtFromHiddenInput=function(t){this.log.add("Input Rvt updated"),t&&t.value&&this.mainLoader.env.updateRvt(t.value)},t}(),I=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var D=function(t){function e(e){var r=t.call(this,"Env.MetaLd",e.log)||this;return r.env=e,r.retries=0,r.dynamicPageHelper=new T(r),r}return I(e,t),e.prototype.loadMetaFromHeader=function(t){var e=this;void 0===t&&(t=!1);var r=this.log.call("loadMetaFromHeader",""+t);if(this.env.ready)return r.done("loadMeta - ready");this.log.add("loadMetaFromHeader: start, retry:"+this.retries+", force fallback: "+t);var n=this.getMetaContent();if(!n)return this.retries++,t||this.retries>=100?(new L(this.env).dnnSfFallback(),r.done()):(setTimeout((function(){e.loadMetaFromHeader()}),10),r.done("will retry"));this.updateEnv(JSON.parse(n)),this.dynamicPageHelper.startMetaTagObserver("content"),r.done()},e.prototype.updateEnv=function(t){this.log.add("meta env info updated"),this.env.load(t,"meta header"),"oqtane"===t.platform&&this.dynamicPageHelper.startInputRvtObserver()},e.prototype.getMetaContent=function(){var t=this.getJsApiMetaTag();return t?t.getAttribute("content"):null},e.prototype.getJsApiMetaTag=function(){return document.querySelector("meta[name=_jsApi]")},e.prototype.startMetaTagObserver=function(){var t=this;this.observer||(this.observer=new MutationObserver((function(e){for(var r=0,n=e;r<n.length;r++){var o=n[r];"attributes"===o.type&&"content"===o.attributeName&&t.updateEnv(JSON.parse(t.getMetaContent()))}})),this.log.add("start observing meta tag"),this.observer.observe(this.getJsApiMetaTag(),{attributes:!0,childList:!1,subtree:!1}))},e}(d),C=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),M=function(t){function e(){var e=t.call(this,"Environment",null,"starting")||this;return e.ready=!1,e.source="",e.log.keepData=!0,A.add("system","environment",e.log),e.metaLoader=new D(e),"undefined"!=typeof _jsApi?(e.log.add("found _jsApi, will use"),e.load(_jsApi,"global variable _jsApi")):(e.log.add("will start initializing"),e.metaLoader.loadMetaFromHeader()),e}return C(e,t),e.prototype.load=function(t,e){var r=this.log.call("load");if(t.root&&!t.api){r.add("root provided, api missing, will auto-complete");var n=t.root.endsWith("/")?"":"/";t.api=""+t.root+n+"desktopmodules/2sxc/api/"}this.header=t,this.replacedRvt&&(this.header.rvt=this.replacedRvt),this.ready=!0,this.source=e||"external/unknown"+(this.replacedRvt?"+rvt":""),r.return(t,"loaded from "+this.source)},e.prototype.updateRvt=function(t){t&&(this.replacedRvt=t,this.header.rvt=t)},e.prototype.api=function(){return this.ensureReadyOrThrow("api"),this.header.api},e.prototype.appApi=function(){return this.ensureReadyOrThrow("appApi"),this.header.appApi},e.prototype.page=function(){return this.ensureReadyOrThrow("page"),this.header.page},e.prototype.rvtHeader=function(){return this.ensureReadyOrThrow("rvtHeader"),this.header.rvtHeader||"RequestVerificationToken"},e.prototype.rvt=function(){return this.ensureReadyOrThrow("rvt"),this.header.rvt},e.prototype.uiRoot=function(){return this.ensureReadyOrThrow("uiRoot"),this.header.uiRoot||E},e.prototype.platform=function(){return this.ensureReadyOrThrow("platform"),this.header.platform||"dnn"},e.prototype.ensureReadyOrThrow=function(t){if(!this.ready&&(this.log.add("ensureReady - force last attempt to load MetaHeader for "+t),this.metaLoader.loadMetaFromHeader(!0),!this.ready))throw"Can't find "+t+" - something went wrong, pls contact 2sxc.org"},e}(d),P=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(t){function e(e){var r=t.call(this,"Sxc.Http")||this;return r.env=e,r}return P(e,t),e.prototype.headers=function(t,e){var r=this.log.call("headers",t+", "+e),n={},o=this.env.page().toString();return t&&(n[u]=t.toString()),e&&(n[s]=e.toString()),n[c]=o,n[p]=o,n[this.env.rvtHeader()]=this.env.rvt(),r.return(n,"headers(id:"+t+", cbid:"+e+")")},e.prototype.apiRoot=function(t){var e=this.log.call("apiRoot"),r=this.env.api().replace("e.x.t",t);return e.return(r,"apiRoot('"+t+"')")},e.prototype.appApiRoot=function(){var t,e=this.log.call("appApiRoot"),r=null!==(t=this.env.appApi())&&void 0!==t?t:this.apiRoot("2sxc");return e.return(r,"appApiRoot()")},e.prototype.apiUrl=function(t,e){var r=this.log.call("apiUrl");if(this.log.add("apiUrl(url:'"+t+"', endpointName:'"+e+"')"),null==t)return t;if(!t||0==t.indexOf("http:")||0==t.indexOf("https:")||0==t.indexOf("//"))return r.return(t);if(!e&&(0==t.indexOf("/")||0==t.indexOf(".")))return r.return(t);var n=t.toLocaleLowerCase().startsWith("app")?this.appApiRoot():this.apiRoot(e||"2sxc");return"/"!=n[n.length-1]&&(n+="/"),"/"==t[0]&&(t=t.slice(1)),r.return(n+t)},e}(d),H=new i,N="true"===H.get("debug"),$=function(){function t(){this.load=N,this.uncache=H.get("sxcver")}return t.urlState=N,t}();var F,J,q,U,V,W,z,B,K=function(){function t(t,e){this.api=t,this.sxc=e}return t.prototype.makePromise=function(t){var e=this.api.headers();if(null==window.$)throw new Error("JQuery is now removed from 2sxc installation. Please use newer api like fetch or include JQuery in your project");var r=window.$.ajax({async:!0,dataType:t.dataType||"json",data:JSON.stringify(t.data),contentType:"application/json",type:t.method,url:this.getActionUrl(t),beforeSend:function(t){for(var r in e)e.hasOwnProperty(r)&&t.setRequestHeader(r,e[r])}});return t.preventAutoFail||r.fail(this.sxc.showDetailedHttpError),r},t.prototype.getActionUrl=function(t){var e=t.url||"app/auto/api/"+t.controller+"/"+t.action;return this.sxc.root.http.apiUrl(e,t.endpoint)+(t.params?"?"+w.param(t.params):"")},t}(),G=function(){return(G=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Q=function(){function t(t){this.sxc=t,this.env=t.root.env}return t.prototype.get=function(t,e,r,n){return this.request(t,e,r,n,"GET")},t.prototype.post=function(t,e,r,n){return this.request(t,e,r,n,"POST")},t.prototype.delete=function(t,e,r,n){return this.request(t,e,r,n,"DELETE")},t.prototype.put=function(t,e,r,n){return this.request(t,e,r,n,"PUT")},t.prototype.request=function(t,e,r,n,o){if("object"!=typeof e&&void 0!==e&&(e={id:e}),"string"==typeof t){var i=t.split("/"),a=i[0],s=i[1];""!==a&&""!==s||console.warn("Error: controller or action not defined. Will continue with likely errors."),t={controller:a,action:s,params:e,data:r,url:i.length>2?t:null,preventAutoFail:n}}var u={method:null===o?"POST":o,params:null,preventAutoFail:!1},c=new K(this,this.sxc);return t=Object.assign({},u,t),c.makePromise(t)},t.prototype.fetch=function(t,e,r){t=this.url(t),r=r||(e?"POST":"GET");var n=this.headers(r);if(e)try{JSON.parse(e)}catch(t){e=JSON.stringify(e)}return fetch(t,G({headers:n,method:r},e&&{body:e}))},t.prototype.fetchJson=function(t,e,r){return this.fetch(t,e,r).then((function(t){return t.json()}))},t.prototype.headers=function(t){var e=this.sxc.root.http.headers(this.sxc.id,this.sxc.cbid);if(!t)return e;switch(t.toLocaleUpperCase()){case"GET":e.Accept="application/json";break;default:e.Accept="application/json",e["Content-Type"]="application/json"}return e},t.prototype.url=function(t,e){if(null==t)return t;var r=t.split("#")[0].split("?"),n=(t=r[0]).split("/");2===n.length&&n[0]&&n[1]&&(t="app/auto/api/"+n[0]+"/"+n[1]);return t=[t=this.sxc.root.http.apiUrl(t),e=((r[1]||"")+"&"+(e?"string"==typeof e?e:w.param(e):"")).split("&").filter((function(t){return!!t})).join("&")].filter((function(t){return!!t})).join("?")},t}(),Y=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X=function(t){function e(e,r,n,o){var i=t.call(this,"SxcInstance",null,"Generating for "+e+":"+r)||this;i.id=e,i.cbid=r,i.root=n,i.ctx=o,i.manage=null,i.webApi=new Q(i);try{n._manage&&n._manage.initInstance(i)}catch(t){console.error("error in 2sxc - will only log but not throw",t)}return n._translateInit&&i.manage&&i.manage.context&&i.manage.context.app&&i.manage.context.app.currentLanguage&&n._translateInit(i.manage),i}return Y(e,t),e.prototype.resolveServiceUrl=function(t){var e=t.split("/")[0].toLowerCase();return-1===l.indexOf(e)?t:this.root.http.apiRoot("2sxc")+e+"/"+t.substring(t.indexOf("/")+1)},e.prototype.showDetailedHttpError=function(t){if(window.console&&console.log(t),404===t.status&&t.config&&t.config.url&&t.config.url.indexOf("/dist/i18n/")>-1)return window.console&&console.log("just fyi: failed to load language resource; will have to use default"),t;if(0===t.status||-1===t.status)return t;var e="Had an error talking to the server (status "+t.status+").",r=t.responseText?JSON.parse(t.responseText):t.data;if(r){var n=r.Message;n&&(e+="\nMessage: "+n);var o=r.MessageDetail||r.ExceptionMessage;o&&(e+="\nDetail: "+o),o&&0===o.indexOf("No action was found")&&(o.indexOf("that matches the name")>0?e+="\n\nTip from 2sxc: you probably got the action-name wrong in your JS.":o.indexOf("that matches the request.")>0&&(e+="\n\nTip from 2sxc: Seems like the parameters are the wrong amount or type.")),n&&0===n.indexOf("Controller")&&n.indexOf("not found")>0&&(e+="\n\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.")}return e+="\n\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug",alert(e),t},e.prototype.isEditMode=function(){return!0===(this.manage&&this.manage._isEditMode())},e}(d),Z=function(){function t(t){this.controller=t,this.source=void 0,this.in={},this.List=[]}return t.prototype.sourceUrl=function(t){var e=this.controller.root.http.apiUrl("app/auto/InstanceData");return"string"==typeof t&&(e+="&"+t),e},t.prototype.load=function(t){var e=this;return t&&t.List?this.controller.data:(t||(t={}),t.url||(t.url=this.controller.data.sourceUrl()),t.origSuccess=t.success,t.success=function(r){for(var n in r)r.hasOwnProperty(n)&&null!==r[n].List&&(e.controller.data.in[n]=r[n],e.controller.data.in[n].name=n);e.controller.data.in.Default&&(e.List=e.in.Default.List),t.origSuccess&&t.origSuccess(e),e.controller.isLoaded=!0,e.controller.lastRefresh=new Date,e._triggerLoaded()},t.error=function(t){alert(t.statusText)},t.preventAutoFail=!0,this.source=t,this.reload())},t.prototype.reload=function(){return this.controller.webApi.get(this.source).then(this.source.success,this.source.error),this},t.prototype.on=function(t,e){return window.$(this).on("2scLoad",e)[0]._triggerLoaded()},t.prototype._triggerLoaded=function(){return this.controller.isLoaded?window.$(this).trigger("2scLoad",[this])[0]:this},t.prototype.one=function(t,e){return this.controller.isLoaded?(e({},this),this):window.$(this).one("2scLoad",e)[0]},t}(),tt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),et=function(t){function e(e,r,n,o,i){var a=t.call(this,e,r,o,i)||this;return a.id=e,a.cbid=r,a.cacheKey=n,a.$2sxc=o,a.source=null,a.isLoaded=!1,a.lastRefresh=null,a.data=new Z(a),a}return tt(e,t),e.prototype.recreate=function(t){return t&&delete this.$2sxc._controllers[this.cacheKey],this.$2sxc(this.id,this.cbid)},e}(X);function rt(t,e){var r=window.$2sxc;if(r.log.add("FindSxcInstance("+t+","+e),!r._controllers)throw new Error("$2sxc not initialized yet");var n,o=null;if(void 0!==(n=t).zoneId&&void 0!==n.appId)!function(t){if(!t.zoneId||!t.appId){var e="It looks like the id given is a ContextIdentifier, but it's missing either zoneId or appId.";throw console.error(e,t),e}}(t),o=t,t=1e5*t.zoneId+t.appId;else if("object"==typeof t){var i=function(t){var e=t.closest(".sc-content-block");if(!e)return null;var r=e.getAttribute("data-cb-instance"),n=e.getAttribute("data-cb-id");return r&&n?[parseInt(r,10),parseInt(n,10)]:null}(t);t=i[0],e=i[1]}e||(e=t);var a=t+":"+e;return r._controllers[a]?(r.log.add("Cache found for: "+a),r._controllers[a]):(r._data[a]||(r._data[a]={}),r._controllers[a]=new et(t,e,a,r,o))}window.$2sxc||(window.$2sxc=(F=new f("$2sxc",null,"building"),q={sysinfo:{version:"12.11.00",description:"The 2sxc Controller - read more about it on docs.2sxc.org"},env:J=new M,http:new k(J),log:F},U=new i,V=new $,W=new a,z={_controllers:{},beta:{},_data:{},totalPopup:new o,urlParams:U,debug:V,stats:W,insights:function(t,e,r,n){return A.show(t,e,r,n)},_insights:A,parts:{getUrl:function(t,e){return V.uncache&&-1===t.indexOf("sxcver")?t+(-1===t.indexOf("?")?"?":"&")+"sxcver="+V.uncache:t}},jq:function(){return window.$}},(B=Object.assign(rt,z,q)).log.add("sxc controller built"),console.log("$2sxc 12.11.00 with insights-logging - see https://r.2sxc.org/insights"),B))}]);
//# sourceMappingURL=https://sources.2sxc.org/12.11.00/js/2sxc.api.min.js.map