{"version":3,"sources":["./src/app/import-app/import-app.component.html","./src/app/import-app/import-app.component.ts"],"names":["dialogRef","importAppService","isImporting","ngOnInit","importApp","changedName","this","importFile","subscribe","next","result","importResult","Messages","MessageType","folderName","prompt","Text","error","fileChange","event","target","files","closeDialog","close","ImportAppComponent"],"mappings":"mQAIA,wB,sBAWM,eAA0B,sBAAW,Q,yBACrC,eAAyB,QAAqB,Q,mBAArB,iC,qCAV/B,cACE,cACE,2GACA,cAA+B,+BAAoB,OAAI,oCAChC,cAAiE,oBAAS,OAAI,aACvG,OAEA,cACE,oBAAyD,iDAAS,WAChE,wBACA,wBACF,OACA,sBAA8B,kEAA9B,OACF,OAEA,kBACE,qBAA0B,gEAAwB,kBAAM,OACxD,qBACE,8DAAsB,kBAAM,OAChC,OACF,O,qBAXY,oCACA,kCAOiC,uD,sBAM3C,iBACE,mFACF,Q,sBACA,iBACE,4EACF,Q,8HACA,iBAKE,QACF,Q,uBANuE,6EAKrE,8B,qCAZJ,cACE,uBAGA,uBAGA,uBAOA,iBACE,oBAAyC,gEAAwB,gBAAK,OACxE,OACF,O,qBAhBO,8CAGA,+CAGA,iDC5BP,iBAUE,WAAoBA,EAAqDC,GAArD,KAAAD,YAAqD,KAAAC,mBAJzE,KAAAC,aAAc,E,OAMd,YAAAC,SAAA,aAGA,YAAAC,UAAA,SAAUC,GAAV,WACEC,KAAKJ,aAAc,EAEnBI,KAAKL,iBAAiBG,UAAUE,KAAKC,WAAYF,GAAaG,UAAU,CACtEC,KAAM,SAAAC,GAKJ,GAJA,EAAKR,aAAc,EAEnB,EAAKS,aAAeD,EAEhB,EAAKC,cAAgB,EAAKA,aAAaC,UAAY,EAAKD,aAAaC,SAAS,IAC/B,IAA9C,EAAKD,aAAaC,SAAS,GAAGC,YAAmB,CACpD,IAAMC,EAAaC,OAAO,EAAKJ,aAAaC,SAAS,GAAGI,KAAO,4DAC3DF,GACF,EAAKV,UAAUU,KAIrBG,MAAO,SAACA,GACN,EAAKf,aAAc,MAKzB,YAAAgB,WAAA,SAAWC,GACTb,KAAKC,WAAcY,EAAMC,OAA4BC,MAAM,IAG7D,YAAAC,YAAA,WACEhB,KAAKN,UAAUuB,S,sCAtCNC,GAAkB,sB,uBAAlBA,EAAkB,s7BDZ/B,gBACE,gBAA8B,qBAAU,OAC1C,OAEA,8BAEA,uBAsBA,uB,MAxBa,mCAER,+EAsBA,+E,yDCrBL","file":"import-app-component.c2b2ddb03b94acdf7b7f.js","sourcesContent":["<div mat-dialog-title>\r\n  <div class=\"dialog-title-box\">Import App</div>\r\n</div>\r\n\r\n<mat-spinner *ngIf=\"isImporting\" mode=\"indeterminate\" diameter=\"20\" color=\"accent\"></mat-spinner>\r\n\r\n<div *ngIf=\"!importResult || (importResult && !importResult.Messages)\">\r\n  <p class=\"dialog-description\">\r\n    Select an app package (zip) from your computer to import an app. New apps can be downloaded on\r\n    <a href=\"http://2sxc.org/apps\">http://2sxc.org/apps</a>.\r\n    For further help visit <a href=\"http://2sxc.org/en/help?tag=import-app\" target=\"_blank\">2sxc Help</a>.\r\n  </p>\r\n\r\n  <div>\r\n    <button mat-raised-button matTooltip=\"Open file browser\" (click)=\"fileInput.click()\">\r\n      <span *ngIf=\"!importFile\">Select file</span>\r\n      <span *ngIf=\"importFile\">{{ importFile.name }}</span>\r\n    </button>\r\n    <input #fileInput type=\"file\" (change)=\"fileChange($event)\" class=\"hide\" />\r\n  </div>\r\n\r\n  <div class=\"dialog-actions-box\">\r\n    <button mat-raised-button (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button color=\"accent\" [disabled]=\"!importFile || isImporting\"\r\n      (click)=\"importApp()\">Import</button>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"importResult && importResult.Messages && !isImporting\">\r\n  <div *ngIf=\"importResult.Succeeded\" class=\"sxc-message sxc-message-info\">\r\n    The import has been done. See the messages below for more information.\r\n  </div>\r\n  <div *ngIf=\"!importResult.Succeeded\" class=\"sxc-message sxc-message-error\">\r\n    The import failed. See the messages below for more information.\r\n  </div>\r\n  <div *ngFor=\"let message of importResult.Messages\" class=\"sxc-message\" [ngClass]=\"{\r\n    'sxc-message-warning': message.MessageType == 0,\r\n    'sxc-message-success': message.MessageType == 1,\r\n    'sxc-message-error': message.MessageType == 2\r\n  }\">\r\n    {{ message.Text }}\r\n  </div>\r\n  <div class=\"dialog-actions-box\">\r\n    <button mat-raised-button color=\"accent\" (click)=\"closeDialog()\">Close</button>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\n\r\nimport { ImportAppService } from './services/import-app.service';\r\nimport { ImportAppResult } from './models/import-app-result.model';\r\n\r\n@Component({\r\n  selector: 'app-import-app',\r\n  templateUrl: './import-app.component.html',\r\n  styleUrls: ['./import-app.component.scss']\r\n})\r\nexport class ImportAppComponent implements OnInit {\r\n  isImporting = false;\r\n  importFile: File;\r\n  importResult: ImportAppResult;\r\n\r\n  constructor(private dialogRef: MatDialogRef<ImportAppComponent>, private importAppService: ImportAppService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  importApp(changedName?: string) {\r\n    this.isImporting = true;\r\n\r\n    this.importAppService.importApp(this.importFile, changedName).subscribe({\r\n      next: result => {\r\n        this.isImporting = false;\r\n\r\n        this.importResult = result;\r\n        // The app could not be installed because the app-folder already exists. Install app in a different folder?\r\n        if (this.importResult && this.importResult.Messages && this.importResult.Messages[0]\r\n          && this.importResult.Messages[0].MessageType === 0) {\r\n          const folderName = prompt(this.importResult.Messages[0].Text + ' Would you like to install it using another folder name?');\r\n          if (folderName) {\r\n            this.importApp(folderName);\r\n          }\r\n        }\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.isImporting = false;\r\n      },\r\n    });\r\n  }\r\n\r\n  fileChange(event: Event) {\r\n    this.importFile = (event.target as HTMLInputElement).files[0];\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}