(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_edit-content-type_edit-content-typ-5bccd7"],{2198:function(t,e,n){"use strict";n.r(e),n.d(e,{EditContentTypeComponent:function(){return O}});var o=n(4762),i=n(8512),a=n(1305),c=n(878),p=n(9996),s=n(5803),r=/(^[A-Za-z][A-Za-z0-9]+$)|(^@[A-Za-z][A-Za-z0-9-]*$)/,l=n(1785),u=n(2935),d=n(1282),g=n(2832),h=n(3589),f=n(1116),m=n(1041),y=n(3070),T=n(9550),Z=n(6489),v=n(3841),S=n(7064),x=n(4369),A=n(7512),b=n(7307),N=n(1271),k=n(7110);function q(t,e){1&t&&(l.TgZ(0,"app-field-hint",23),l._uU(1,"This field is required"),l.qZA()),2&t&&l.Q6J("isError",!0)}function $(t,e){if(1&t&&(l.TgZ(0,"app-field-hint",23),l._uU(1),l.qZA()),2&t){var n=l.oxw(4);l.Q6J("isError",!0),l.xp6(1),l.Oqu(n.contentTypeNameError)}}function C(t,e){if(1&t&&(l.ynx(0),l.YNc(1,q,2,1,"app-field-hint",22),l.YNc(2,$,2,2,"app-field-hint",22),l.BQk()),2&t){l.oxw();var n=l.MAs(8);l.xp6(1),l.Q6J("ngIf",n.errors.required),l.xp6(1),l.Q6J("ngIf",n.errors.pattern)}}function _(t,e){if(1&t&&(l.TgZ(0,"mat-option",24),l._uU(1),l.qZA()),2&t){var n=e.$implicit;l.Q6J("value",n.value),l.xp6(1),l.hij(" ",n.name," ")}}function w(t,e){if(1&t&&(l.TgZ(0,"div",7),l.TgZ(1,"h3"),l._uU(2,"Shared Content Type (Ghost)"),l.qZA(),l.TgZ(3,"p"),l._uU(4,"Note: this can't be edited in the UI, for now if you really know what you're doing, do it in the DB"),l.qZA(),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.qZA()),2&t){var n=l.oxw(2).ngIf;l.xp6(6),l.hij("Uses Type Definition of: ",n.contentType.SharedDefId,"")}}function M(t,e){if(1&t){var n=l.EpF();l.TgZ(0,"form",4,5),l.NdJ("ngSubmit",function(){return l.CHM(n),l.oxw(2).save()}),l.TgZ(2,"div",6),l.TgZ(3,"div",7),l.TgZ(4,"mat-form-field",8),l.TgZ(5,"mat-label"),l._uU(6,"Name"),l.qZA(),l.TgZ(7,"input",9,10),l.NdJ("ngModelChange",function(t){return l.CHM(n),l.oxw(2).changeContentTypeName(t)}),l.qZA(),l.qZA(),l.YNc(9,C,3,2,"ng-container",2),l.qZA(),l.TgZ(10,"mat-accordion"),l.TgZ(11,"mat-expansion-panel"),l.TgZ(12,"mat-expansion-panel-header"),l.TgZ(13,"mat-panel-title"),l._uU(14,"Advanced"),l.qZA(),l._UZ(15,"mat-panel-description"),l.qZA(),l.TgZ(16,"div",7),l.TgZ(17,"mat-form-field",8),l.TgZ(18,"mat-label"),l._uU(19,"Scope"),l.qZA(),l.TgZ(20,"mat-select",11),l.NdJ("ngModelChange",function(t){return l.CHM(n),l.oxw(2).changeScope(t)}),l.YNc(21,_,2,2,"mat-option",12),l.TgZ(22,"mat-option",13),l._uU(23,"Other..."),l.qZA(),l.qZA(),l.TgZ(24,"button",14),l.TgZ(25,"mat-icon",15),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).unlockScope()}),l._uU(26),l.qZA(),l.qZA(),l.qZA(),l.TgZ(27,"app-field-hint"),l._uU(28," The scope should almost never be changed - "),l.TgZ(29,"a",16),l._uU(30,"see help"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(31,"div",7),l.TgZ(32,"mat-form-field",8),l.TgZ(33,"mat-label"),l._uU(34,"Static Name"),l.qZA(),l._UZ(35,"input",17),l.qZA(),l.qZA(),l.YNc(36,w,7,1,"div",18),l.qZA(),l.qZA(),l.qZA(),l.TgZ(37,"div",19),l.TgZ(38,"button",20),l.NdJ("click",function(){return l.CHM(n),l.oxw(2).closeDialog()}),l._uU(39,"Cancel"),l.qZA(),l.TgZ(40,"button",21),l._uU(41," Save "),l.qZA(),l.qZA(),l.qZA()}if(2&t){var o=l.MAs(1),i=l.MAs(8),a=l.oxw().ngIf,c=l.oxw();l.xp6(7),l.Q6J("pattern",c.contentTypeNamePattern)("ngModel",a.contentType.Name),l.xp6(2),l.Q6J("ngIf",i.touched&&i.errors),l.xp6(11),l.Q6J("ngModel",a.contentType.Scope)("disabled",a.lockScope),l.xp6(1),l.Q6J("ngForOf",a.scopeOptions),l.xp6(3),l.Q6J("tippy",a.lockScope?"Unlock":"Lock"),l.xp6(2),l.hij(" ",a.lockScope?"lock":"lock_open"," "),l.xp6(9),l.Q6J("ngModel",a.contentType.StaticName),l.xp6(1),l.Q6J("ngIf",a.contentType.SharedDefId),l.xp6(4),l.Q6J("disabled",!o.form.valid||a.loading)}}function J(t,e){if(1&t&&(l.ynx(0),l.YNc(1,M,42,11,"form",3),l.BQk()),2&t){var n=e.ngIf;l.xp6(1),l.Q6J("ngIf",n.contentType)}}var O=function(){function t(t,e,n,c){this.dialogRef=t,this.route=e,this.contentTypesService=n,this.snackBar=c,this.hostClass="dialog-component",this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName"),this.contentTypeNamePattern=r,this.contentTypeNameError="Standard letters and numbers are allowed. Must start with a letter.",this.contentType$=new i.X(null),this.lockScope$=new i.X(!0),this.scopeOptions$=new i.X(null),this.disableAnimation$=new i.X(!0),this.loading$=new i.X(!1),this.templateVars$=(0,a.aj)([this.contentType$,this.lockScope$,this.scopeOptions$,this.disableAnimation$,this.loading$]).pipe((0,p.U)(function(t){var e=(0,o.CR)(t,5);return{contentType:e[0],lockScope:e[1],scopeOptions:e[2],disableAnimation:e[3],loading:e[4]}})),this.scope=this.route.snapshot.parent.paramMap.get("scope")}return t.prototype.ngOnInit=function(){var t=this,e=this.contentTypeStaticName?this.contentTypesService.retrieveContentType(this.contentTypeStaticName).pipe((0,p.U)(function(t){return(0,o.pi)((0,o.pi)({},t),{ChangeStaticName:!1,NewStaticName:t.StaticName})})):(0,c.of)({StaticName:"",Name:"",Description:"",Scope:this.scope,ChangeStaticName:!1,NewStaticName:""}),n=this.contentTypesService.getScopes();(0,a.aj)([e,n]).subscribe(function(e){var n=(0,o.CR)(e,2),i=n[1];t.contentType$.next(n[0]),i.map(function(t){return t.value}).includes(t.scope)||i.push({name:t.scope,value:t.scope}),t.scopeOptions$.next(i)})},t.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.lockScope$.complete(),this.scopeOptions$.complete(),this.disableAnimation$.complete(),this.loading$.complete()},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout(function(){return t.disableAnimation$.next(!1)})},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.changeContentTypeName=function(t){this.contentType$.next((0,o.pi)((0,o.pi)({},this.contentType$.value),{Name:t}))},t.prototype.changeScope=function(t){if("Other"===t)if(t=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")){if(!this.scopeOptions$.value.find(function(e){return e.value===t})){var e={name:t,value:t};this.scopeOptions$.next((0,o.ev)((0,o.ev)([],(0,o.CR)(this.scopeOptions$.value)),[e]))}}else t=s.Z.scopes.default.value;this.contentType$.next((0,o.pi)((0,o.pi)({},this.contentType$.value),{Scope:t}))},t.prototype.unlockScope=function(){this.lockScope$.next(!this.lockScope$.value),this.lockScope$.value&&this.contentType$.next((0,o.pi)((0,o.pi)({},this.contentType$.value),{Scope:this.scope}))},t.prototype.save=function(){var t=this;this.loading$.next(!0),this.snackBar.open("Saving..."),this.contentTypesService.save(this.contentType$.value).subscribe(function(e){t.loading$.next(!1),t.snackBar.open("Saved",null,{duration:2e3}),t.closeDialog()}),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},t.\u0275fac=function(e){return new(e||t)(l.Y36(u.so),l.Y36(d.gz),l.Y36(g.s),l.Y36(h.ux))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-edit-content-type"]],hostVars:1,hostBindings:function(t,e){2&t&&l.Ikx("className",e.hostClass)},decls:5,vars:4,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[4,"ngIf"],["class","dialog-form",3,"ngSubmit",4,"ngIf"],[1,"dialog-form",3,"ngSubmit"],["ngForm","ngForm"],[1,"dialog-form-content","fancy-scrollbar-light"],[1,"edit-input"],["appearance","standard","color","accent"],["matInput","","type","text","required","","name","Name",3,"pattern","ngModel","ngModelChange"],["name","ngModel"],["name","Scope",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","Other"],["mat-icon-button","","type","button","matSuffix","",3,"tippy"],["appClickStopPropagation","",3,"click"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matInput","","type","text","name","StaticName","disabled","",3,"ngModel"],["class","edit-input",4,"ngIf"],[1,"dialog-form-actions"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","submit","color","accent",3,"disabled"],[3,"isError",4,"ngIf"],[3,"isError"],[3,"value"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._uU(2),l.qZA(),l.qZA(),l.YNc(3,J,2,1,"ng-container",2),l.ALo(4,"async")),2&t&&(l.xp6(2),l.Oqu(e.contentTypeStaticName?"Edit Content Type":"New Content Type"),l.xp6(1),l.Q6J("ngIf",l.lcZ(4,2,e.templateVars$)))},directives:[u.uh,f.O5,m._Y,m.JL,m.F,y.KE,y.hX,T.Nt,m.Fj,m.Q7,m.c5,m.JJ,m.On,Z.pp,Z.ib,Z.yz,Z.yK,Z.u4,v.gD,f.sg,S.ey,x.lW,y.R9,A.$,b.Hw,N.E,k.Y],pipes:[f.Ov],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}.mat-accordion[_ngcontent-%COMP%]{padding-bottom:8px;display:block}"]}),t}()},1271:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});var o=n(1785),i=function(){function t(){}return t.prototype.onClick=function(t){t.stopPropagation()},t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.lG2({type:t,selectors:[["","appClickStopPropagation",""]],hostBindings:function(t,e){1&t&&o.NdJ("click",function(t){return e.onClick(t)})}}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.05.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_edit-content-type_edit-content-typ-5bccd7.60181eae01c59f7f317c.js.map