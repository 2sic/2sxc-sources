"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-app_create-app_ts"],{4979(O,_,e){e.d(_,{V:()=>a});var r=e(27092),p=e(56884);let a=(()=>{class i{constructor(){this.subscriptions=new r.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(h){return new(h||i)}}static{this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac})}}return i})()},11855(O,_,e){e.d(_,{F:()=>c});var r=e(79748),p=e(37580),a=e(24950),i=e(56884),o=e(36124),u=e(80423);const h=["*"],l=t=>({"hint-box__short":t});function E(t,d){1&t&&o.eu8(0)}function C(t,d){if(1&t&&(o.j41(0,"mat-hint"),o.DNE(1,E,1,0,"ng-container",2),o.k0s()),2&t){o.XpG();const s=o.sdS(4);o.R7$(),o.Y8G("ngTemplateOutlet",s)}}function x(t,d){1&t&&o.eu8(0)}function D(t,d){if(1&t&&(o.j41(0,"mat-error"),o.DNE(1,x,1,0,"ng-container",2),o.k0s()),2&t){o.XpG();const s=o.sdS(4);o.R7$(),o.Y8G("ngTemplateOutlet",s)}}function M(t,d){1&t&&o.SdG(0)}let c=(()=>{class t{constructor(){this.isError=(0,p.hFB)(!1),this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static{this.\u0275fac=function(f){return new(f||t)}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-field-hint"]],inputs:{isError:[1,"isError"]},ngContentSelectors:h,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(f,g){if(1&f){const T=o.RV6();o.NAR(),o.j41(0,"div",1),o.bIt("click",function(){return i.eBV(T),i.Njj(g.toggleIsShort())}),o.nVh(1,C,2,1,"mat-hint")(2,D,2,1,"mat-error"),o.k0s(),o.DNE(3,M,1,0,"ng-template",null,0,o.C5r)}if(2&f){let T;o.Y8G("ngClass",o.eq3(2,l,g.isShort)),o.R7$(),o.vxM(!1===(T=g.isError())?1:!0===T?2:-1)}},dependencies:[a.RG,u.MV,u.TL,r.YU,r.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return t})()},12987(O,_,e){e.d(_,{n:()=>u});var r=e(70271),p=e(63037),a=e(84205),i=e(56884),o=e(50698);let u=(()=>{class h{constructor(E){this.http=E,this.installSettingsSubject=new a.B,this.settings$=this.installSettingsSubject.asObservable(),this.settings$.pipe((0,r.T)(()=>!0),(0,p.Z)(!1)).subscribe()}loadGettingStarted(E){this.http.get(`sys/install/InstallSettings?isContentApp=${E}`).subscribe(C=>this.installSettingsSubject.next(C))}static{this.\u0275fac=function(C){return new(C||h)(i.KVO(o.Qq))}}static{this.\u0275prov=i.jDH({token:h,factory:h.\u0275fac})}}return h})()},18537(O,_,e){e.d(_,{R:()=>C});var r=e(82645),p=e(43942),a=e(1365),i=e(88830),o=e(81530),u=e(38067);const h=["addListener","removeListener"],l=["addEventListener","removeEventListener"],E=["on","off"];function C(t,d,s,f){if((0,o.T)(s)&&(f=s,s=void 0),f)return C(t,d,s).pipe((0,u.I)(f));const[g,T]=function c(t){return(0,o.T)(t.addEventListener)&&(0,o.T)(t.removeEventListener)}(t)?l.map(A=>R=>t[A](d,R,s)):function D(t){return(0,o.T)(t.addListener)&&(0,o.T)(t.removeListener)}(t)?h.map(x(t,d)):function M(t){return(0,o.T)(t.on)&&(0,o.T)(t.off)}(t)?E.map(x(t,d)):[];if(!g&&(0,i.X)(t))return(0,a.Z)(A=>C(A,d,s))((0,r.Tg)(t));if(!g)throw new TypeError("Invalid event target");return new p.c(A=>{const R=(...y)=>A.next(1<y.length?y:y[0]);return g(R),()=>T(R)})}function x(t,d){return s=>f=>t[s](d,f)}},18708(O,_,e){e.d(_,{R:()=>a});var r=e(37580),p=e(36124);let a=(()=>{class i{constructor(u){this.elementRef=u,this._disabled=(0,r.hFB)(!1)}ngOnChanges(u){null!=u.disabled&&this.elementRef.nativeElement.toggleAttribute("disabled",this._disabled())}static{this.\u0275fac=function(h){return new(h||i)(p.rXU(p.aKT))}}static{this.\u0275dir=p.FsC({type:i,selectors:[["","extended-fab-speed-dial-action",""]],inputs:{_disabled:[1,"_disabled"]},features:[p.OA$]})}}return i})()},18759(O,_,e){e.d(_,{d:()=>a});var r=e(37580),p=e(36124);let a=(()=>{class i{constructor(){this.label=(0,r.hFB)("Form.Buttons.SaveAndClose"),this.triggerOnFormSubmit=(0,r.hFB)(!1),this.icon=(0,r.hFB)("done"),this.ngClass=(0,r.hFB)(""),this.disabled=(0,r.hFB)(!1),this.action=(0,r.CGW)()}get isDisabled(){return"function"==typeof this.disabled?!!this.disabled():!!this.disabled}onClick(u){this.isDisabled||this.action.emit(u)}static{this.\u0275fac=function(h){return new(h||i)}}static{this.\u0275dir=p.FsC({type:i,inputs:{label:[1,"label"],triggerOnFormSubmit:[1,"triggerOnFormSubmit"],icon:[1,"icon"],ngClass:[1,"ngClass"],disabled:[1,"disabled"]},outputs:{action:"action"}})}}return i})()},18934(O,_,e){e.d(_,{Q:()=>p});var r=e(36124);let p=(()=>{class a{constructor(o){this.templateRef=o}static{this.\u0275fac=function(u){return new(u||a)(r.rXU(r.C4Q))}}static{this.\u0275dir=r.FsC({type:a,selectors:[["","extendedFabSpeedDialTriggerContent",""]]})}}return a})()},20545(O,_,e){e.d(_,{d:()=>p});var r=e(36124);let p=(()=>{class a{constructor(o){this.templateRef=o}static{this.\u0275fac=function(u){return new(u||a)(r.rXU(r.C4Q))}}static{this.\u0275dir=r.FsC({type:a,selectors:[["","extendedFabSpeedDialActionsContent",""]]})}}return a})()},30281(O,_,e){e.d(_,{$:()=>a});var r=e(27092),p=e(36124);let a=(()=>{class i{constructor(){this.subscriptions=new r.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(h){return new(h||i)}}static{this.\u0275cmp=p.VBU({type:i,selectors:[["app-base"]],decls:0,vars:0,template:function(h,l){},encapsulation:2})}}return i})()},32760(O,_,e){function r(i){return"Escape"===i.key}function p(i){return("s"===i.key||"S"===i.key)&&(i.ctrlKey||i.metaKey)}function a(i){return"Enter"===i.key&&(i.ctrlKey||i.metaKey)}e.d(_,{JY:()=>p,KL:()=>r,YU:()=>a})},43544(O,_,e){e.r(_),e.d(_,{CreateAppComponent:()=>k});var r=e(56884),p=e(36664),a=e(34456),i=e(84175),o=e(20762),u=e(87941),h=e(24950),l=e(93840),E=e(59791),C=e(53804),x=e(25175),D=e(69393),M=e(18537),c=e(51567),t=e(70271),d=e(64334),s=e(12938),f=e(32760),g=e(11855),T=e(63628),A=e(60852),R=e(12987);const y=/^[A-Za-z](?:[A-Za-z0-9\s\(\)-]+)*$/;var K=e(83583),n=e(36124),S=e(3347),W=e(80436),F=e(80423),j=e(55326);function N(b,B){1&b&&(n.j41(0,"app-field-hint",12),n.EFF(1," Required "),n.k0s()),2&b&&n.Y8G("isError",!0)}function $(b,B){if(1&b&&(n.j41(0,"app-field-hint",12),n.EFF(1),n.k0s()),2&b){const m=n.XpG(2);n.Y8G("isError",!0),n.R7$(),n.SpI(" ",m.appNameError," ")}}function G(b,B){if(1&b&&(n.nVh(0,N,2,1,"app-field-hint",12),n.nVh(1,$,2,2,"app-field-hint",12)),2&b){const m=n.XpG();n.vxM(null!=m.form.controls.name.errors&&m.form.controls.name.errors.required?0:-1),n.R7$(),n.vxM(null!=m.form.controls.name.errors&&m.form.controls.name.errors.pattern?1:-1)}}function V(b,B){if(1&b){const m=n.RV6();n.nrm(0,"br"),n.j41(1,"span"),n.EFF(2," To use an existing App as a template, please switch to the "),n.j41(3,"strong"),n.EFF(4," Import App Dialog "),n.k0s()(),n.nrm(5,"br")(6,"br"),n.j41(7,"button",13),n.bIt("click",function(){r.eBV(m);const v=n.XpG();return r.Njj(v.switchToImportApp())}),n.EFF(8,"Switch to Import App"),n.k0s()}}function z(b,B){if(1&b&&n.nrm(0,"iframe",14),2&b){const m=n.XpG(2);n.Y8G("src",m.remoteInstallerUrl,n.f$h)}}function Y(b,B){if(1&b&&n.nVh(0,z,1,1,"iframe",14),2&b){const m=n.XpG();n.vxM(m.ready()?0:-1)}}let k=(()=>{class b{#e;#t;#n;constructor(m,P,v){this.dialog=m,this.snackBar=P,this.sanitizer=v,this.hostClass="dialog-component",this.loading=(0,r.vPA)(!1),this.appNameError="Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.",this.remoteInstallerUrl="",this.ready=(0,r.vPA)(!1),this.showAppCatalog=(0,r.vPA)(!0),this.alreadyProcessing=!1,this.canSave=(0,p.EW)(()=>this.canCreate()&&!this.loading()),this.#e=(0,s.d)(K.U),this.#t=(0,s.d)(R.n),this.#n=(0,s.d)(A.c),this.router=(0,r.WQX)(D.Ix),this.packageUrl=(0,r.vPA)(null),this.canCreate=(0,r.vPA)(!1),this.messages$=(0,M.R)(window,"message").pipe((0,c.p)(()=>!this.alreadyProcessing),(0,c.p)(I=>"https://2sxc.org"===I.origin),(0,t.T)(I=>{const U=JSON.parse(I.data);this.packageUrl.set(U.packages?.[0]?.url||null)})),this.form=this.buildForm(),this.updateCanCreate(),this.form.valueChanges.subscribe(()=>this.updateCanCreate()),this.#t.loadGettingStarted(!1),this.#t.settings$.pipe((0,d.s)(1)).subscribe(I=>{let U=I.remoteUrl;U+=(U.includes("?")?"&":"?")+"isTemplate=true",this.remoteInstallerUrl=this.sanitizer.bypassSecurityTrustResourceUrl(U),this.ready.set(!0)}),(0,r.QZP)(()=>{this.packageUrl(),this.updateCanCreate()})}ngOnInit(){this.#a(),this.#t.loadGettingStarted(!1),this.messages$.subscribe()}createAndClose(){if(!this.canCreate())return;let m;this.form.disable(),this.loading.set(!0),this.snackBar.open("Creating app...",void 0,{duration:2e3});const P=Number(this.form.controls.appTemplateId.value),v=this.form.controls.name.value?.trim().replace(/\s\s+/g," ");1===P&&this.packageUrl()&&this.packageUrl().length>0?m=this.#e.createTemplate(this.packageUrl(),v):0===P&&(m=this.#e.create(v,null,0)),m.subscribe({error:()=>this.handleCreateError(),next:()=>this.handleCreateSuccess()})}handleCreateError(){this.form.enable(),this.loading.set(!1),this.snackBar.open("Failed to create app. Please check console for more information",void 0,{duration:3e3})}handleCreateSuccess(){this.form.enable(),this.loading.set(!1),this.snackBar.open("Created app",void 0,{duration:2e3}),this.closeDialog()}closeDialog(){this.dialog.close()}buildForm(){return new a.J3({name:new a.hs(null,[a.k0.required,a.k0.pattern(y)]),appTemplateId:new a.hs(1,a.k0.required)})}updateCanCreate(){const m=this.form.controls.name.value?.trim(),P=Number(this.form.controls.appTemplateId.value),v=this.packageUrl();this.canCreate.set(!!m&&(0===P||1===P&&!!v))}onTemplateChange(m){this.showAppCatalog.set(1===m),this.updateCanCreate()}switchToImportApp(){const m=this.router.url.split("/").filter(Boolean);m.splice(-1,1,"import"),this.dialog.close(),setTimeout(()=>this.#n.navPath("/"+m.join("/")),100)}get appTemplateIdValue(){return this.form.controls.appTemplateId.value}#a(){this.dialog.keydownEvents().subscribe(m=>{(0,f.YU)(m)&&this.canSave()&&(m.preventDefault(),this.createAndClose())})}static{this.\u0275fac=function(P){return new(P||b)(n.rXU(u.CP),n.rXU(S.UG),n.rXU(W.up))}}static{this.\u0275cmp=n.VBU({type:b,selectors:[["app-create-app"]],hostVars:1,hostBindings:function(P,v){2&P&&n.Avn("className",v.hostClass)},decls:29,vars:11,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click","disabled"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["matInput","","type","text","formControlName","name"],["formControlName","appTemplateId","required","",3,"change"],[3,"value"],["align","end"],[3,"action","ngClass","disabled","label"],[3,"isError"],["mat-raised-button","",1,"eav-action-button",3,"click"],[1,"eav-app-catalog-iframe",3,"src"]],template:function(P,v){1&P&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2),n.EFF(3,"Create App"),n.k0s(),n.j41(4,"button",3),n.bIt("click",function(){return v.closeDialog()}),n.j41(5,"mat-icon"),n.EFF(6,"close"),n.k0s()()(),n.j41(7,"div",4),n.nrm(8,"router-outlet"),n.j41(9,"form",5)(10,"mat-form-field",6)(11,"mat-label"),n.EFF(12,"Name"),n.k0s(),n.nrm(13,"input",7),n.k0s(),n.j41(14,"app-field-hint"),n.EFF(15," App name will also be used for the folder "),n.k0s(),n.nVh(16,G,2,2),n.nrm(17,"br"),n.j41(18,"mat-radio-group",8),n.bIt("change",function(U){return v.onTemplateChange(U.value)}),n.j41(19,"mat-radio-button",9),n.EFF(20,"Use Template"),n.k0s(),n.j41(21,"mat-radio-button",9),n.EFF(22,"Completely new / empty App"),n.k0s(),n.j41(23,"mat-radio-button",9),n.EFF(24,"Use existing App as Template"),n.k0s()()(),n.nVh(25,V,9,0),n.nVh(26,Y,1,1),n.k0s(),n.j41(27,"mat-dialog-actions",10)(28,"app-save-close-button-fab",11),n.bIt("action",function(){return v.createAndClose()}),n.k0s()()()),2&P&&(n.R7$(4),n.Y8G("disabled",v.loading()),n.R7$(5),n.Y8G("formGroup",v.form),n.R7$(7),n.vxM(v.form.controls.name.touched?16:-1),n.R7$(3),n.Y8G("value",1),n.R7$(2),n.Y8G("value",0),n.R7$(2),n.Y8G("value",2),n.R7$(2),n.vxM(2==v.appTemplateIdValue?25:-1),n.R7$(),n.vxM(v.showAppCatalog()?26:-1),n.R7$(2),n.Y8G("ngClass",v.canSave()?"":"disabled")("disabled",!v.canSave())("label","Form.Buttons.CreateAndClose"))},dependencies:[D.n3,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.X1,a.j4,a.JD,h.RG,F.rl,F.nJ,E.fS,E.fg,x.Ve,o.S,u.E7,i.Hl,i.$z,j.iY,g.F,C.Wk,C.VT,C._g,l.m_,l.An,T.i],styles:[".eav-result-container[_ngcontent-%COMP%]{margin-top:16px}.eav-app-catalog-button[_ngcontent-%COMP%]{margin-left:12px}.eav-app-catalog-iframe[_ngcontent-%COMP%]{margin-top:16px;width:100%;height:500px;border:none}.eav-progress[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;background:#fffc;display:flex;justify-content:center;flex-direction:column;text-align:center}.eav-progress[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:0 auto}.eav-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:48px}"]})}}return b})()},60852(O,_,e){e.d(_,{c:()=>x});var r=e(69393),p=e(51567),a=e(70271),i=e(5057),o=e(63037),u=e(98764),h=e(34435),l=e(4979),E=e(56884);const C={doOnDialogClosed:!0};let x=(()=>{class D extends l.V{constructor(c,t){super(),this.router=c,this.route=t,this.log=(0,h.Tq)({DialogRoutingService:D},C)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}get urlSegments(){return this.router.url.split("/")}getParam(c){return this.route.snapshot.paramMap.get(c)}getParams(c){const t=this.route.snapshot.paramMap;return c.reduce((d,s)=>(d[s]=t.get(s),d),{})}getQueryParam(c){return this.route.snapshot.queryParamMap.get(c)}getQueryParams(c){const t=this.route.snapshot.queryParamMap;return c.reduce((d,s)=>(d[s]=t.get(s),d),{})}state(){return this.router.currentNavigation().extras?.state}doOnDialogClosed(c){const t=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(d=>(t.a("Dialog closed",{data:d}),c()))),t.end()}doOnDialogClosedWithData(c){const t=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.#e().subscribe(({state:d})=>{t.a("Dialog closed",{state:d}),c(d)})),t.end()}urlSubRoute(c){const t=this.router.createUrlTree([c],{relativeTo:this.route});return this.router.serializeUrl(t)}navPath(c,t){return this.router.navigate([c],t)}navRelative(c,t){return this.router.navigate(c,{...t,relativeTo:this.route})}childDialogClosed$(){return this.router.events.pipe((0,p.p)(c=>c instanceof r.wF),(0,o.Z)(!!this.route.snapshot.firstChild),(0,a.T)(()=>!!this.route.snapshot.firstChild),(0,i.J)(),(0,p.p)(([c,t])=>c&&!t))}#e(){return this.router.events.pipe((0,p.p)(c=>c instanceof r.wF),(0,u.M)(c=>{const t=this.log.fn("childDialogClosed$",{event:c,firstChild:this.route.snapshot.firstChild,snapShot:this.route.snapshot,state:this.router.currentNavigation()?.extras.state});t.a("NavigationEnd",{event:c}),t.end()}),(0,o.Z)(!!this.route.snapshot.firstChild),(0,a.T)(()=>({hasChildNow:!!this.route.snapshot.firstChild,state:this.router.currentNavigation()?.extras.state})),(0,i.J)(),(0,p.p)(([c,t])=>c.hasChildNow&&!t.hasChildNow),(0,a.T)(([c,t])=>({hadChildBefore:c.hasChildNow,hasChildNow:t.hasChildNow,state:t.state})))}static{this.\u0275fac=function(t){return new(t||D)(E.KVO(r.Ix),E.KVO(r.nX))}}static{this.\u0275prov=E.jDH({token:D,factory:D.\u0275fac})}}return D})()},63628(O,_,e){e.d(_,{i:()=>c});var r=e(79748),p=e(85309),a=e(93840),i=e(90852),o=e(34601),u=e(18759),h=e(56884),l=e(36124),E=e(82272),C=e(74390),x=e(18934),D=e(17828);function M(t,d){if(1&t){const s=l.RV6();l.j41(0,"button",1),l.nI1(1,"translate"),l.nI1(2,"translate"),l.bIt("click",function(g){h.eBV(s);const T=l.XpG();return h.Njj(T.onClick(g))}),l.j41(3,"span"),l.EFF(4),l.nI1(5,"translate"),l.k0s(),l.j41(6,"span",2)(7,"kbd"),l.EFF(8,"\u2303"),l.k0s(),l.j41(9,"kbd"),l.EFF(10,"\u23ce"),l.k0s()(),l.j41(11,"mat-icon"),l.EFF(12),l.k0s()()}if(2&t){const s=l.XpG();l.Y8G("type",s.triggerOnFormSubmit()?"submit":"button")("tippy",l.bMT(1,6,s.label())+" ("+l.bMT(2,8,"Form.Buttons.ActionAndCloseShortcut")+")")("ngClass",s.ngClass())("disabled",s.isDisabled),l.R7$(4),l.JRh(l.bMT(5,10,s.label())),l.R7$(8),l.JRh(s.icon())}}let c=(()=>{class t extends u.d{static{this.\u0275fac=(()=>{let s;return function(g){return(s||(s=l.xGo(t)))(g||t)}})()}static{this.\u0275cmp=l.VBU({type:t,selectors:[["app-save-close-button-fab"]],features:[l.Vt3],decls:2,vars:0,consts:[["extendedFabSpeedDialTriggerContent",""],["tippyShowDelay","500","extended-fab-speed-dial-trigger","","matRipple","",3,"click","type","tippy","ngClass","disabled"],[1,"keybinding-hint"]],template:function(f,g){1&f&&(l.j41(0,"extended-fab-speed-dial"),l.DNE(1,M,13,12,"ng-template",0),l.k0s())},dependencies:[r.YU,a.m_,a.An,E.d,C.t,x.Q,p.p,D.r6,i.h,o.e,i.D9],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.keybinding-hint[_ngcontent-%COMP%]{display:inline-flex;align-items:center;font-size:.75rem;line-height:1.5}.keybinding-hint[_ngcontent-%COMP%]   kbd[_ngcontent-%COMP%] + kbd[_ngcontent-%COMP%]{margin-left:3px}"]})}}return t})()},74390(O,_,e){e.d(_,{t:()=>a});var r=e(37580),p=e(36124);let a=(()=>{class i{constructor(u){this.elementRef=u,this.disabled=(0,r.hFB)(!1)}ngOnChanges(u){null!=u.disabled&&this.elementRef.nativeElement.toggleAttribute("disabled",this.disabled())}static{this.\u0275fac=function(h){return new(h||i)(p.rXU(p.aKT))}}static{this.\u0275dir=p.FsC({type:i,selectors:[["","extended-fab-speed-dial-trigger",""]],inputs:{disabled:[1,"disabled"]},features:[p.OA$]})}}return i})()},82272(O,_,e){e.d(_,{d:()=>D});var r=e(79748),p=e(37580),a=e(36124),i=e(75797),o=e(19999),u=e(91817),h=e(63037),l=e(30281),E=e(18708),C=e(20545),x=e(18934);let D=(()=>{class M extends l.${constructor(){super(),this.disabled=(0,p.hFB)(!1),this.open$=new i.t(!1)}ngAfterContentInit(){this.subscriptions.add((0,o.z)([this.open$.pipe((0,u.F)()),this.actionButtons.changes.pipe((0,h.Z)(void 0))]).subscribe(([t])=>{this.actionButtons.forEach((d,s,f)=>{const T=Math.min(.3+.05*(f.length-1),.6),A=(T-.3)/(f.length-1),R=(t?.3+A*s:T-A*s)+"s";d.nativeElement.style.transitionDuration!==R&&(d.nativeElement.style.transitionDuration=R)})}))}ngOnDestroy(){this.open$.complete(),super.ngOnDestroy()}setOpen(t,d){"touch"!==t.pointerType&&this.open$.next(d)}static{this.\u0275fac=function(d){return new(d||M)}}static{this.\u0275cmp=a.VBU({type:M,selectors:[["extended-fab-speed-dial"]],contentQueries:function(d,s,f){if(1&d&&a.wni(f,x.Q,5)(f,C.d,5)(f,E.R,4,a.aKT),2&d){let g;a.mGM(g=a.lsd())&&(s.trigger=g.first),a.mGM(g=a.lsd())&&(s.actions=g.first),a.mGM(g=a.lsd())&&(s.actionButtons=g)}},inputs:{disabled:[1,"disabled"]},features:[a.Vt3],decls:5,vars:3,consts:[[1,"extended-fab-speed-dial",3,"pointerenter","pointerleave"],[1,"extended-fab-speed-dial-trigger"],[3,"ngTemplateOutlet"],[1,"extended-fab-speed-dial-actions"]],template:function(d,s){1&d&&(a.j41(0,"div",0),a.bIt("pointerenter",function(g){return s.setOpen(g,!0)})("pointerleave",function(g){return s.setOpen(g,!1)}),a.j41(1,"div",1),a.eu8(2,2),a.k0s(),a.j41(3,"div",3),a.eu8(4,2),a.k0s()()),2&d&&(a.BMQ("disabled",s.disabled()||null),a.R7$(2),a.Y8G("ngTemplateOutlet",null==s.trigger?null:s.trigger.templateRef),a.R7$(2),a.Y8G("ngTemplateOutlet",null==s.actions?null:s.actions.templateRef))},dependencies:[r.T3],styles:['extended-fab-speed-dial{display:block}.extended-fab-speed-dial .extended-fab-speed-dial-actions{display:flex;flex-direction:column-reverse;align-items:flex-end;position:absolute;bottom:44px;right:0;pointer-events:none}.extended-fab-speed-dial .extended-fab-speed-dial-actions button[extended-fab-speed-dial-action]{opacity:0;transition:opacity .3s ease-in-out;margin-bottom:8px}.extended-fab-speed-dial:hover:not([disabled]) .extended-fab-speed-dial-actions{pointer-events:all}.extended-fab-speed-dial:hover:not([disabled]) .extended-fab-speed-dial-actions button[extended-fab-speed-dial-action]{opacity:1}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger],.extended-fab-speed-dial button[extended-fab-speed-dial-action]{display:flex;align-items:center;justify-content:center;min-width:48px;height:44px;border:none;border-radius:16px 0;padding-left:14px;padding-right:14px;color:#fff;font-size:12px;white-space:nowrap;background:linear-gradient(125deg,#240e12 10%,#952c42 90%);cursor:pointer;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;box-sizing:border-box}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>mat-icon,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>mat-icon{color:#fff;font-size:20px;width:20px;height:20px;line-height:20px}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span{color:#fff;display:inline-block;white-space:nowrap;overflow:hidden;max-width:0;transition:all .3s ease-in-out}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span:before,.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span:after,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span:before,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span:after{content:"";width:8px;display:inline-block}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>.keybinding-hint,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>.keybinding-hint{padding:2px 0 0;margin:0}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger][disabled],.extended-fab-speed-dial button[extended-fab-speed-dial-trigger].appear-disabled,.extended-fab-speed-dial button[extended-fab-speed-dial-action][disabled],.extended-fab-speed-dial button[extended-fab-speed-dial-action].appear-disabled{cursor:default;color:#00000042;background-color:#1d273d1f}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]:hover>span,.extended-fab-speed-dial button[extended-fab-speed-dial-action]:hover>span{max-width:256px}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]:hover>.keybinding-hint,.extended-fab-speed-dial button[extended-fab-speed-dial-action]:hover>.keybinding-hint{margin:0 8px 0 4px;padding-top:2px;border-radius:6px;background:#ffffff1a;transition:all .3s ease-in-out}\n'],encapsulation:2})}}return M})()},83583(O,_,e){e.d(_,{U:()=>D});var r=e(89204),p=e(46443),a=e(24467),i=e(56884),o=e(36124);const E="admin/app/app";let D=(()=>{class M extends a.B{getAllLive(t){return(0,p.fx)(()=>(t(),{url:this.apiUrl("admin/app/list"),params:{zoneId:this.zoneId}}))}getInheritable(){return(0,p.fx)(()=>({url:this.apiUrl("admin/app/InheritableApps"),params:{zoneId:this.zoneId}}))}getPendingApps(){return(0,p.fx)(()=>({url:this.apiUrl("admin/app/GetPendingApps"),params:{zoneId:this.zoneId}}))}create(t,d,s){return this.http.post(this.apiUrl(E),{},{params:{zoneId:this.zoneId,name:t,...null!=d&&{inheritAppId:d},...null!=s&&{templateId:s}}})}createTemplate(t,d){const s=encodeURIComponent(d);return this.http.post(`sys/install/RemotePackage?packageUrl=${t}&newName=${s}`,{})}installPendingApps(t){return this.http.post(this.apiUrl("admin/app/InstallPendingApps"),t,{params:{zoneId:this.zoneId}})}delete(t){return this.http.delete(this.apiUrl(E),{params:{zoneId:this.zoneId,appId:t.toString()}})}flushCache(t){var d=this;return(0,r.A)(function*(){return d.getStatusPromise("admin/app/flushcache",{params:{zoneId:d.zoneId,appId:t.toString()}})})()}static{this.\u0275fac=(()=>{let t;return function(s){return(t||(t=o.xGo(M)))(s||M)}})()}static{this.\u0275prov=i.jDH({token:M,factory:M.\u0275fac})}}return M})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/21.00.01/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-app_create-app_ts.20773323582a8183.js.map