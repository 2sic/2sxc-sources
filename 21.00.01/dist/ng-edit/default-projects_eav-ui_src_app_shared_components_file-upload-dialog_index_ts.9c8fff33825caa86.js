"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"],{3140(A,y,o){o.d(y,{J:()=>l});var T=o(27092),g=o(36124);let l=(()=>{class p{constructor(){this.subscriptions=new T.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(f){return new(f||p)}}static{this.\u0275dir=g.FsC({type:p})}}return p})()},12306(A,y,o){o.d(y,{v:()=>c});var T=o(18537),g=o(51567),l=o(70271),p=o(98764);class c{constructor(f){this.moduleId=f,this.alreadyProcessing=!1,this.messages$=(0,T.R)(window,"message").pipe((0,p.M)(m=>console.log("debug: received window message",m,this.moduleId)),(0,g.p)(()=>!this.alreadyProcessing),(0,g.p)(m=>"https://2sxc.org"===m.origin),(0,l.T)(m=>{try{return JSON.parse(m.data)}catch(M){return void console.error("error procesing message. Message was "+m.data,M)}}),(0,g.p)(m=>m&&Number(m.moduleId)===this.moduleId),(0,p.M)(m=>console.log("debug: processed 2sxc.org message",m)))}}},12987(A,y,o){o.d(y,{n:()=>E});var T=o(70271),g=o(63037),l=o(84205),p=o(56884),c=o(50698);let E=(()=>{class f{constructor(M){this.http=M,this.installSettingsSubject=new l.B,this.settings$=this.installSettingsSubject.asObservable(),this.settings$.pipe((0,T.T)(()=>!0),(0,g.Z)(!1)).subscribe()}loadGettingStarted(M){this.http.get(`sys/install/InstallSettings?isContentApp=${M}`).subscribe(r=>this.installSettingsSubject.next(r))}static{this.\u0275fac=function(r){return new(r||f)(p.KVO(c.Qq))}}static{this.\u0275prov=p.jDH({token:f,factory:f.\u0275fac})}}return f})()},18537(A,y,o){o.d(y,{R:()=>r});var T=o(82645),g=o(43942),l=o(1365),p=o(88830),c=o(81530),E=o(38067);const f=["addListener","removeListener"],m=["addEventListener","removeEventListener"],M=["on","off"];function r(a,u,_,U){if((0,c.T)(_)&&(U=_,_=void 0),U)return r(a,u,_).pipe((0,E.I)(U));const[R,j]=function F(a){return(0,c.T)(a.addEventListener)&&(0,c.T)(a.removeEventListener)}(a)?m.map(I=>O=>a[I](u,O,_)):function v(a){return(0,c.T)(a.addListener)&&(0,c.T)(a.removeListener)}(a)?f.map(h(a,u)):function C(a){return(0,c.T)(a.on)&&(0,c.T)(a.off)}(a)?M.map(h(a,u)):[];if(!R&&(0,p.X)(a))return(0,l.Z)(I=>r(I,u,_))((0,T.Tg)(a));if(!R)throw new TypeError("Invalid event target");return new g.c(I=>{const O=(...x)=>I.next(1<x.length?x:x[0]);return R(O),()=>j(O)})}function h(a,u){return _=>U=>a[_](u,U)}},34575(A,y,o){o.d(y,{S:()=>f});var T=o(37580),g=o(56884),l=o(18537),p=o(3140),c=o(36124),E=o(3347);let f=(()=>{class m extends p.J{constructor(r,h,v){super(),this.zone=h,this.snackBar=v,this.markStyle=(0,T.hFB)("outline"),this.allowedFileTypes=(0,T.hFB)(""),this.filesDropped=(0,T.CGW)(),this.dropAreaClass="eav-droparea",this.markStyleClass=(0,g.vPA)(""),this.dragClass="eav-dragover",this.timeouts=[],this.element=r.nativeElement}ngOnInit(){this.markStyleClass.set(`eav-droparea-${this.markStyle()}`),this.element.classList.add(this.dropAreaClass,this.markStyleClass()),this.zone.runOutsideAngular(()=>{this.subscriptions.add((0,l.R)(this.element,"dragover").subscribe(r=>{r.preventDefault(),r.stopPropagation(),this.clearTimeouts(),this.element.classList.add(this.dragClass)})),this.subscriptions.add((0,l.R)(this.element,"dragleave").subscribe(r=>{r.preventDefault(),r.stopPropagation(),this.timeouts.push(window.setTimeout(()=>{this.element.classList.remove(this.dragClass)},50))}))})}ngOnDestroy(){this.clearTimeouts(),this.element.classList.remove(this.dropAreaClass,this.markStyleClass(),this.dragClass),super.ngOnDestroy()}onDrop(r){r.preventDefault(),r.stopPropagation(),this.clearTimeouts(),this.element.classList.remove(this.dragClass);let v=Array.from(r.dataTransfer.files);v=this.filterTypes(v,this.allowedFileTypes()),v.length>0&&this.filesDropped.emit(v)}clearTimeouts(){for(const r of this.timeouts)clearTimeout(r);this.timeouts=[]}filterTypes(r,h){if(""===h)return r;const v=h.split(",").map(F=>F.toLocaleLowerCase()),C=r.filter(F=>{const a=F.name.lastIndexOf(".");if(a<=0)return!1;const u=F.name.substring(a+1).toLocaleLowerCase();return v.includes(u)});if(r.length!==C.length){const F=this.allowedFileTypes().replace(/\,/g,", ");this.snackBar.open(C.length?"Some files were filtered out. This drop location only accepts file types: "+F:"This drop location only accepts file types: "+F,null,{duration:5e3})}return C}static{this.\u0275fac=function(h){return new(h||m)(c.rXU(c.aKT),c.rXU(g.SKi),c.rXU(E.UG))}}static{this.\u0275dir=c.FsC({type:m,selectors:[["","appDragAndDrop",""]],hostBindings:function(h,v){1&h&&c.bIt("drop",function(F){return v.onDrop(F)})},inputs:{markStyle:[1,"markStyle"],allowedFileTypes:[1,"allowedFileTypes"]},outputs:{filesDropped:"filesDropped"},features:[c.Vt3]})}}return m})()},62876(A,y,o){o.d(y,{jj:()=>ft,G1:()=>V,Nq:()=>B,HL:()=>$});var T=o(79748),g=o(37580),l=o(56884),p=o(34456),c=o(84175),E=o(87941),f=o(93840),m=o(59791),M=o(41134),r=o(53804),h=o(51567),v=o(70271),C=o(36647),F=o(98764),a=o(61318),u=o(59452),_=o(64334),U=o(12938),R=o(83583),j=o(34575),I=o(69914),O=o(68873),x=o(12987),k=o(50698);let G=(()=>{class s{constructor(e){this.http=e}installPackages(e,i){return e.reduce((n,D)=>n.pipe((0,C.n)(()=>D.url?(i(D),this.http.post(`sys/install/RemotePackage?packageUrl=${D.url}`,{})):(0,u.of)(!0))),(0,u.of)(!0))}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(k.Qq))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac})}}return s})();var S=o(30281),B=function(s){return s.importOriginal="importOriginal",s.importAsTemplate="importAsTemplate",s}(B||{});const V={Warning:0,Success:1,Error:2},$={App:0,AppPart:1,ContentType:2,ContentItem:3,Query:4,View:5,ImportParts:6,Extension:7};var W=o(12306),t=o(36124),X=o(3347),K=o(80436),w=o(55326),L=o(80423);const N=["installerWindow"],z=(s,d)=>({"outer-container-app":s,"eav-dialog-content":d}),H=(s,d,e)=>({"sxc-message-warning":s,"sxc-message-success":d,"sxc-message-error":e});function Y(s,d){if(1&s){const e=t.RV6();t.j41(0,"div",3),t.nrm(1,"div",12),t.nI1(2,"safeHtml"),t.j41(3,"button",13),t.bIt("click",function(){l.eBV(e);const n=t.XpG();return l.Njj(n.closeDialog())}),t.j41(4,"mat-icon"),t.EFF(5,"close"),t.k0s()()()}if(2&s){const e=t.XpG();t.R7$(),t.Y8G("innerHtml",t.bMT(2,1,e.dialogData.title),t.npT)}}function J(s,d){if(1&s&&(t.nrm(0,"h3",5),t.nI1(1,"safeHtml")),2&s){const e=t.XpG();t.Y8G("innerHtml",t.bMT(1,1,e.dialogData.title),t.npT)}}function Q(s,d){1&s&&t.nrm(0,"mat-spinner",6)}function Z(s,d){1&s&&(t.j41(0,"span"),t.EFF(1," The app will be imported as is, using the original name and folder. "),t.k0s(),t.j41(2,"span"),t.EFF(3," If you already have the same app installed, it will prevent you from overwriting it. "),t.k0s())}function q(s,d){1&s&&(t.j41(0,"span"),t.EFF(1," The app will be imported using a new name / folder. "),t.k0s(),t.j41(2,"span"),t.EFF(3," This allows you to create multiple isolated copies of the same app or to create something very different using this app as a template. "),t.k0s(),t.nrm(4,"br"),t.j41(5,"mat-form-field",17)(6,"mat-label"),t.EFF(7,"Name"),t.k0s(),t.nrm(8,"input",18),t.k0s())}function tt(s,d){if(1&s&&(t.j41(0,"form",14)(1,"mat-radio-group",15)(2,"mat-radio-button",16),t.EFF(3," Import App(s) "),t.k0s(),t.j41(4,"mat-radio-button",16),t.EFF(5," Import and Rename / Reset "),t.k0s()(),t.nrm(6,"br"),t.nVh(7,Z,4,0)(8,q,9,0),t.k0s(),t.nrm(9,"br")),2&s){let e;const i=t.XpG();t.Y8G("formGroup",i.importForm),t.R7$(2),t.Y8G("value",i.importModeValues.importOriginal),t.R7$(2),t.Y8G("value",i.importModeValues.importAsTemplate),t.R7$(3),t.vxM((null==(e=i.importForm.get("importMode"))?null:e.value)===i.importModeValues.importOriginal?7:(null==(e=i.importForm.get("importMode"))?null:e.value)===i.importModeValues.importAsTemplate?8:-1)}}function et(s,d){1&s&&(t.j41(0,"div"),t.EFF(1,"Select or drop file"),t.k0s())}function st(s,d){if(1&s&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&s){const e=d.$implicit;t.R7$(),t.JRh(e.name)}}function ot(s,d){if(1&s){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){l.eBV(e);const n=t.XpG();return l.Njj(n.toggleShowAppCatalog())}),t.EFF(1," Get recommended Apps from Catalog "),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("disabled",e.uploading()||e.importForm.invalid)}}function nt(s,d){if(1&s){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){l.eBV(e);const n=t.XpG();return l.Njj(n.upload())}),t.EFF(1," Upload "),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("disabled",!e.files().length||e.uploading()||!!e.result()||e.importForm.invalid)}}function it(s,d){if(1&s){const e=t.RV6();t.j41(0,"a",25),t.bIt("click",function(){l.eBV(e);const n=t.XpG(3);return l.Njj(n.closeDialog(!0))}),t.EFF(1,"Close"),t.k0s()}}function at(s,d){if(1&s){const e=t.RV6();t.j41(0,"a",25),t.bIt("click",function(){l.eBV(e);const n=t.XpG(3);return l.Njj(n.cleanUpload())}),t.EFF(1,"Clean"),t.k0s()}}function lt(s,d){if(1&s&&(t.j41(0,"div",21),t.EFF(1," Upload succeeded. See the messages below for more information. "),t.nVh(2,it,2,0,"a",24)(3,at,2,0,"a",24),t.k0s()),2&s){const e=t.XpG(2);t.R7$(2),t.vxM(e.uploadType()!=e.UploadTypes.ImportParts?2:3)}}function rt(s,d){if(1&s){const e=t.RV6();t.j41(0,"a",25),t.bIt("click",function(){l.eBV(e);const n=t.XpG(3);return l.Njj(n.closeDialog(!0))}),t.EFF(1,"Close"),t.k0s()}}function pt(s,d){if(1&s){const e=t.RV6();t.j41(0,"a",25),t.bIt("click",function(){l.eBV(e);const n=t.XpG(3);return l.Njj(n.cleanUpload())}),t.EFF(1,"Clean"),t.k0s()}}function dt(s,d){if(1&s&&(t.j41(0,"div",22),t.EFF(1," Upload failed. See the messages below for more information. "),t.nVh(2,rt,2,0,"a",24)(3,pt,2,0,"a",24),t.k0s()),2&s){const e=t.XpG(2);t.R7$(2),t.vxM(e.uploadType()!=e.UploadTypes.ImportParts?2:3)}}function ct(s,d){if(1&s&&(t.j41(0,"div",23),t.EFF(1),t.k0s()),2&s){const e=d.$implicit,i=t.XpG(2);t.Y8G("ngClass",t.sMw(2,H,e.MessageType===i.FileUploadMessageTypes.Warning,e.MessageType===i.FileUploadMessageTypes.Success,e.MessageType===i.FileUploadMessageTypes.Error)),t.R7$(),t.SpI(" ",e.Text," ")}}function mt(s,d){if(1&s&&(t.j41(0,"div",11),t.nVh(1,lt,4,1,"div",21),t.nVh(2,dt,4,1,"div",22),t.Z7z(3,ct,2,6,"div",23,t.fX1),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.vxM(e.result().Success?1:-1),t.R7$(),t.vxM(e.result().Success?-1:2),t.R7$(),t.Dyx(e.result().Messages)}}function ut(s,d){if(1&s&&t.nrm(0,"iframe",26,1),2&s){const e=t.XpG(2);t.Y8G("src",e.remoteInstallerUrl,t.f$h)}}function gt(s,d){if(1&s&&(t.j41(0,"div",27),t.nrm(1,"mat-progress-spinner",28),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&s){const e=t.XpG(2);t.R7$(),t.Y8G("mode","indeterminate"),t.R7$(2),t.SpI(" Installing ",null==e.currentPackage?null:e.currentPackage.displayName,".. ")}}function ht(s,d){if(1&s&&(t.nVh(0,ut,2,1,"iframe",26),t.nVh(1,gt,4,2,"div",27)),2&s){const e=t.XpG();t.vxM(e.ready?0:-1),t.R7$(),t.vxM(e.showProgress?1:-1)}}let ft=(()=>{class s extends S.${#e;#t;#s;#o;constructor(e,i,n,D,b){super(),this.dialogData=e,this.dialog=i,this.snackBar=n,this.sanitizer=D,this.changeDetectorRef=b,this.hostClass="dialog-component",this.uploadType=(0,g.hFB)(),this.uploading=(0,l.vPA)(!1),this.showAppCatalog=(0,l.vPA)(!1),this.result=(0,l.vPA)(void 0),this.files=(0,l.vPA)([]),this.FileUploadMessageTypes=V,this.UploadTypes=$,this.importModeValues=B,this.showProgress=!1,this.remoteInstallerUrl="",this.urlChangeImportMode="",this.ready=!1,this.#e=(0,U.d)(G),this.#t=(0,U.d)(x.n),this.#s=(0,U.d)(R.U),this.#o=(0,l.WQX)(p.ok),this.importForm=this.#o.group({importMode:[this.importModeValues.importOriginal,p.k0.required],name:[""]}),this.context=(0,l.WQX)(O.o),this.messages=new W.v(this.context.moduleId),this.subscriptions.add(this.#t.settings$.subscribe(P=>{this.settings=P,this.urlChangeImportMode=P.remoteUrl,this.remoteInstallerUrl=this.sanitizer.bypassSecurityTrustResourceUrl(P.remoteUrl),this.ready=!0})),this.#i()}ngOnInit(){this.importForm.get("importMode")?.valueChanges.subscribe(e=>{const i=e===this.importModeValues.importAsTemplate,n=this.urlChangeImportMode+(this.urlChangeImportMode.includes("?")?"&":"?")+`selectOnlyMode=${i}`;this.remoteInstallerUrl=this.sanitizer.bypassSecurityTrustResourceUrl(n)}),null!=this.dialogData.files&&this.filesDropped(this.dialogData.files),this.#t.loadGettingStarted(!1),this.subscriptions.add(this.messages.messages$.pipe((0,h.p)(e=>"specs"===e.action)).subscribe(()=>{const e=this.installerWindow.nativeElement,i={action:"specs",data:{installedApps:this.settings.installedApps,rules:this.settings.installedApps.map(D=>({target:"guid",appGuid:D.guid,mode:"f",url:""}))}},n=JSON.stringify(i);e.contentWindow.postMessage(n,"*"),console.log("debug: just sent specs message #2:"+n,i,e)})),this.subscriptions.add(this.messages.messages$.pipe((0,h.p)(e=>"install"===e.action),(0,v.T)(e=>Object.values(e.packages)),(0,h.p)(e=>{const n=`Do you want to install these packages?\n\n${e.reduce((D,b)=>`${D} - ${b.displayName}\n`,"")}\nThis takes about 10 seconds per package. Don't reload the page while it's installing.`;return confirm(n)}),(0,C.n)(e=>(this.messages.alreadyProcessing=!0,this.showProgress=!0,this.changeDetectorRef.detectChanges(),this.importForm.get("importMode")?.value===this.importModeValues.importAsTemplate?this.#s.createTemplate(e[0].url,this.importForm.get("name")?.value):this.#e.installPackages(e,i=>this.currentPackage=i))),(0,F.M)(()=>{this.showProgress=!1,this.changeDetectorRef.detectChanges(),alert("Installation complete \u{1f44d}"),window.top.location.reload(),this.closeDialog(!0)}),(0,a.W)(e=>(console.error("Error: ",e),this.showProgress=!1,this.messages.alreadyProcessing=!1,this.changeDetectorRef.detectChanges(),alert(`An error occurred: Package ${this.currentPackage.displayName}\n\n${e.error?.Message??e.error?.message??""}\n\n${e.message}\n\nPlease try again later or check how to manually install content-templates: https://azing.org/2sxc/r/0O4OymoA`),(0,u.of)(e)))).subscribe())}ngOnDestroy(){super.ngOnDestroy()}closeDialog(e){this.dialog.close(e)}cleanUpload(){this.result.set(void 0),this.files.set([]),this.uploading.set(!1)}#i(){const e=this.importForm.get("name");this.importForm.get("importMode")?.valueChanges.subscribe(i=>{const n=i===this.importModeValues.importAsTemplate;e?.setValidators(n?[p.k0.required]:null),e?.updateValueAndValidity()})}filesDropped(e){this.#n(e)}filesChanged(e){const n=Array.from(e.target.files);this.#n(n)}upload(){this.uploading.set(!0);const e=this.importForm.get("name")?.value;this.subscriptions.add(this.dialogData.upload$(this.files(),e).pipe((0,_.s)(1)).subscribe({next:i=>{this.uploading.set(!1),this.result.set(i)},error:()=>{this.uploading.set(!1),this.result.set(void 0),this.snackBar.open("Upload failed. Please check console for more information",void 0,{duration:3e3})}}))}toggleShowAppCatalog(){this.showAppCatalog.set(!this.showAppCatalog())}#n(e){this.dialogData.multiple||(e=e.slice(0,1)),this.files.set(e)}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(E.Vh),t.rXU(E.CP),t.rXU(X.UG),t.rXU(K.up),t.rXU(g.gRc))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-file-upload-dialog"]],viewQuery:function(i,n){if(1&i&&t.GBs(N,5),2&i){let D;t.mGM(D=t.lsd())&&(n.installerWindow=D.first)}},hostVars:1,hostBindings:function(i,n){2&i&&t.Avn("className",n.hostClass)},inputs:{uploadType:[1,"uploadType"]},features:[t.Vt3],decls:19,vars:18,consts:[["fileInput",""],["installerWindow",""],["appDragAndDrop","",1,"eav-dialog",2,"margin-bottom","12px",3,"filesDropped","allowedFileTypes"],[1,"eav-dialog-header"],[3,"ngClass"],[3,"innerHtml"],["mode","indeterminate","diameter","20"],["mat-raised-button","","tippy","Open file browser",3,"click","disabled"],["type","file","multiple","",1,"hide",3,"change"],["mat-raised-button","","tippy","Open app catalog",1,"eav-app-catalog-button","eav-action-button",3,"disabled"],["mat-raised-button","",1,"eav-action-button",2,"margin-left","12px",3,"disabled"],[1,"eav-result-container"],[1,"eav-dialog-header__title",3,"innerHtml"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"formGroup"],["formControlName","importMode","aria-label","Select import mode"],[3,"value"],["color","accent",1,"eav-mat-form-field",2,"max-width","300px"],["matInput","","type","text","formControlName","name"],["mat-raised-button","","tippy","Open app catalog",1,"eav-app-catalog-button","eav-action-button",3,"click","disabled"],["mat-raised-button","",1,"eav-action-button",2,"margin-left","12px",3,"click","disabled"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["href","javascript:void(0)"],["href","javascript:void(0)",3,"click"],[1,"eav-app-catalog-iframe",3,"src"],[1,"eav-progress"],[3,"mode"]],template:function(i,n){if(1&i){const D=t.RV6();t.j41(0,"div",2),t.bIt("filesDropped",function(P){return l.eBV(D),l.Njj(n.filesDropped(P))}),t.nVh(1,Y,6,3,"div",3),t.j41(2,"div",4),t.nVh(3,J,2,3,"h3",5),t.nVh(4,Q,1,0,"mat-spinner",6),t.nrm(5,"p",5),t.nI1(6,"safeHtml"),t.nVh(7,tt,10,4),t.j41(8,"div")(9,"button",7),t.bIt("click",function(){l.eBV(D);const P=t.sdS(14);return l.Njj(P.click())}),t.nVh(10,et,2,0,"div"),t.Z7z(11,st,2,1,"div",null,t.fX1),t.k0s(),t.j41(13,"input",8,0),t.bIt("change",function(P){return l.eBV(D),l.Njj(n.filesChanged(P))}),t.k0s(),t.nVh(15,ot,2,1,"button",9),t.nVh(16,nt,2,1,"button",10),t.k0s(),t.nVh(17,mt,5,2,"div",11),t.nVh(18,ht,2,2),t.k0s()()}2&i&&(t.Y8G("allowedFileTypes",n.dialogData.allowedFileTypes),t.R7$(),t.vxM(n.uploadType()!=n.UploadTypes.ImportParts?1:-1),t.R7$(),t.Y8G("ngClass",t.l_i(15,z,n.uploadType()===n.UploadTypes.ImportParts,n.uploadType()!==n.UploadTypes.ImportParts)),t.R7$(),t.vxM(n.uploadType()==n.UploadTypes.ImportParts?3:-1),t.R7$(),t.vxM(n.uploading()?4:-1),t.R7$(),t.Y8G("innerHtml",t.bMT(6,13,n.dialogData.description),t.npT),t.R7$(2),t.vxM(n.uploadType()==n.UploadTypes.App?7:-1),t.R7$(2),t.Y8G("disabled",n.uploading()||n.importForm.invalid),t.R7$(),t.vxM(n.files().length?-1:10),t.R7$(),t.Dyx(n.files()),t.R7$(4),t.vxM(n.uploadType()!=n.UploadTypes.App||n.files().length?-1:15),t.R7$(),t.vxM(n.files().length?16:-1),t.R7$(),t.vxM(n.result()?17:-1),t.R7$(),t.vxM(n.uploadType()==n.UploadTypes.App&&n.showAppCatalog()&&!n.files().length&&n.importForm.valid?18:-1))},dependencies:[T.YU,E.hM,M.D6,M.LG,j.S,c.Hl,c.$z,w.iY,f.m_,f.An,r.Wk,r.VT,r._g,m.fS,m.fg,L.rl,L.nJ,p.X1,p.qT,p.me,p.BC,p.cb,p.j4,p.JD,I.$],styles:["[_nghost-%COMP%]     .eav-dialog a{color:#465da3!important}.eav-result-container[_ngcontent-%COMP%]{margin-top:16px}.eav-app-catalog-button[_ngcontent-%COMP%]{margin-left:12px}.eav-app-catalog-iframe[_ngcontent-%COMP%]{margin-top:16px;width:100%;height:500px;border:none}.eav-progress[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;background:#fffc;display:flex;justify-content:center;flex-direction:column;text-align:center}.eav-progress[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:0 auto}.eav-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:48px}.outer-container-app[_ngcontent-%COMP%]{padding:0 24px}"]})}}return s})()},83583(A,y,o){o.d(y,{U:()=>v});var T=o(89204),g=o(46443),l=o(24467),p=o(56884),c=o(36124);const M="admin/app/app";let v=(()=>{class C extends l.B{getAllLive(a){return(0,g.fx)(()=>(a(),{url:this.apiUrl("admin/app/list"),params:{zoneId:this.zoneId}}))}getInheritable(){return(0,g.fx)(()=>({url:this.apiUrl("admin/app/InheritableApps"),params:{zoneId:this.zoneId}}))}getPendingApps(){return(0,g.fx)(()=>({url:this.apiUrl("admin/app/GetPendingApps"),params:{zoneId:this.zoneId}}))}create(a,u,_){return this.http.post(this.apiUrl(M),{},{params:{zoneId:this.zoneId,name:a,...null!=u&&{inheritAppId:u},...null!=_&&{templateId:_}}})}createTemplate(a,u){const _=encodeURIComponent(u);return this.http.post(`sys/install/RemotePackage?packageUrl=${a}&newName=${_}`,{})}installPendingApps(a){return this.http.post(this.apiUrl("admin/app/InstallPendingApps"),a,{params:{zoneId:this.zoneId}})}delete(a){return this.http.delete(this.apiUrl(M),{params:{zoneId:this.zoneId,appId:a.toString()}})}flushCache(a){var u=this;return(0,T.A)(function*(){return u.getStatusPromise("admin/app/flushcache",{params:{zoneId:u.zoneId,appId:a.toString()}})})()}static{this.\u0275fac=(()=>{let a;return function(_){return(a||(a=c.xGo(C)))(_||C)}})()}static{this.\u0275prov=p.jDH({token:C,factory:C.\u0275fac})}}return C})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/21.00.01/dist/ng-edit/default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts.9c8fff33825caa86.js.map