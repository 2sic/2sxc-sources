(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"2yOh":function(t,e,i){"use strict";i.r(e),i.d(e,"AppAdministrationNavComponent",function(){return le});var n=i("mrSG"),o=i("tyNb"),a=i("2Vo4"),r=i("itXk"),s=i("quSY"),c=i("pLZG"),l=i("lJxs"),p=i("JX91"),b=i("Zy1z"),d=i("qb9A"),u=i("JToI"),m=i("fXoL"),h=i("0IaG"),f=i("r3uf"),g=i("ofXK"),v=i("XCsS"),y=i("bTqV"),C=i("Qu3c"),V=i("NFeN"),U=i("wZkO"),T=i("ALMk"),S=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Jb({type:t,selectors:[["app-getting-started"]],inputs:{gettingStartedUrl:"gettingStartedUrl"},decls:2,vars:3,consts:[[1,"iframe",3,"src"]],template:function(t,e){1&t&&(m.Qb(0,"iframe",0),m.ic(1,"safeResourceUrl")),2&t&&m.nc("src",m.jc(1,1,e.gettingStartedUrl),m.Cc)},pipes:[T.a],styles:[".iframe[_ngcontent-%COMP%]{border:none;width:100%;height:calc(100vh - 209px)}@media (max-width:600px){.iframe[_ngcontent-%COMP%]{height:calc(100vh - 161px)}}"]}),t}(),k=i("DR3G"),x=i("Cfvw"),I=i("IzEk"),D=i("/uUt"),w=i("NbiY"),M=i("Tgur"),A=i("gyhz"),P=i("1HxE"),O=i("LNjK"),E=i("X9FW"),F=i("jSe7"),W=i("FKr1"),R=i("STbY"),B=i("TU8p");function N(t,e){if(1&t){var i=m.Wb();m.Vb(0,"div",10),m.dc("click",function(){return m.Ac(i),m.hc().createOrEditMetadata()}),m.Vb(1,"mat-icon"),m.Mc(2,"edit"),m.Ub(),m.Ub()}}function K(t,e){1&t&&(m.Vb(0,"div",11),m.Vb(1,"mat-icon"),m.Mc(2,"edit"),m.Ub(),m.Ub())}function j(t,e){if(1&t&&(m.Vb(0,"mat-icon",15),m.Mc(1," person "),m.Ub()),2&t){var i=m.hc(2);m.nc("matBadge",i.contentType.Permissions.Count)}}function G(t,e){1&t&&(m.Vb(0,"mat-icon"),m.Mc(1,"person"),m.Ub())}function Q(t,e){if(1&t){var i=m.Wb();m.Vb(0,"div",12),m.dc("click",function(){return m.Ac(i),m.hc().openPermissions()}),m.Kc(1,j,2,1,"mat-icon",13),m.Kc(2,G,2,0,"mat-icon",14),m.Ub()}if(2&t){var n=m.hc();m.Db(1),m.nc("ngIf",n.contentType.Permissions.Count),m.Db(1),m.nc("ngIf",!n.contentType.Permissions.Count)}}function J(t,e){1&t&&(m.Vb(0,"div",11),m.Vb(1,"mat-icon"),m.Mc(2,"person"),m.Ub(),m.Ub())}var q=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.contentType=this.params.data;var e=this.params.enablePermissionsGetter();this.enablePermissions=e&&Object(F.a)().test(this.contentType.StaticName)},t.prototype.refresh=function(t){return!0},t.prototype.createOrEditMetadata=function(){this.params.onCreateOrEditMetadata(this.contentType)},t.prototype.openPermissions=function(){this.params.onOpenPermissions(this.contentType)},t.prototype.editContentType=function(){this.params.onEdit(this.contentType)},t.prototype.openRestApi=function(){this.params.onOpenRestApi(this.contentType)},t.prototype.exportType=function(){this.params.onTypeExport(this.contentType)},t.prototype.openDataExport=function(){this.params.onOpenDataExport(this.contentType)},t.prototype.openDataImport=function(){this.params.onOpenDataImport(this.contentType)},t.prototype.deleteContentType=function(){this.params.onDelete(this.contentType)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Jb({type:t,selectors:[["app-data-actions"]],decls:39,vars:6,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","matTooltip","Metadata",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","matTooltip","Permissions",3,"click",4,"ngIf"],["matRipple","","matTooltip","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["mat-menu-item","",3,"disabled","click"],["matRipple","","matTooltip","Metadata",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["matRipple","","matTooltip","Permissions",1,"like-button","highlight",3,"click"],["matBadgePosition","after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge",4,"ngIf"],[4,"ngIf"],["matBadgePosition","after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge"]],template:function(t,e){if(1&t&&(m.Vb(0,"div",0),m.Kc(1,N,3,0,"div",1),m.Kc(2,K,3,0,"div",2),m.Kc(3,Q,3,2,"div",3),m.Kc(4,J,3,0,"div",2),m.Vb(5,"div",4),m.Vb(6,"mat-icon"),m.Mc(7,"more_horiz"),m.Ub(),m.Ub(),m.Ub(),m.Vb(8,"mat-menu",5,6),m.Vb(10,"button",7),m.dc("click",function(){return e.editContentType()}),m.Vb(11,"mat-icon"),m.Mc(12,"settings"),m.Ub(),m.Vb(13,"span"),m.Mc(14,"Rename"),m.Ub(),m.Ub(),m.Vb(15,"button",7),m.dc("click",function(){return e.openRestApi()}),m.Qb(16,"mat-icon",8),m.Vb(17,"span"),m.Mc(18,"REST API"),m.Ub(),m.Ub(),m.Vb(19,"button",7),m.dc("click",function(){return e.exportType()}),m.Vb(20,"mat-icon"),m.Mc(21,"cloud_download"),m.Ub(),m.Vb(22,"span"),m.Mc(23,"Export content type"),m.Ub(),m.Ub(),m.Vb(24,"button",7),m.dc("click",function(){return e.openDataExport()}),m.Vb(25,"mat-icon"),m.Mc(26,"cloud_download"),m.Ub(),m.Vb(27,"span"),m.Mc(28,"Export data"),m.Ub(),m.Ub(),m.Vb(29,"button",7),m.dc("click",function(){return e.openDataImport()}),m.Vb(30,"mat-icon"),m.Mc(31,"cloud_upload"),m.Ub(),m.Vb(32,"span"),m.Mc(33,"Import data"),m.Ub(),m.Ub(),m.Vb(34,"button",9),m.dc("click",function(){return e.deleteContentType()}),m.Vb(35,"mat-icon"),m.Mc(36,"delete"),m.Ub(),m.Vb(37,"span"),m.Mc(38,"Delete"),m.Ub(),m.Ub(),m.Ub()),2&t){var i=m.yc(9);m.Db(1),m.nc("ngIf",!e.contentType.UsesSharedDef),m.Db(1),m.nc("ngIf",e.contentType.UsesSharedDef),m.Db(1),m.nc("ngIf",e.enablePermissions),m.Db(1),m.nc("ngIf",!e.enablePermissions),m.Db(1),m.nc("matMenuTriggerFor",i),m.Db(29),m.nc("disabled",e.contentType.UsesSharedDef)}},directives:[g.n,W.p,C.a,R.d,V.a,R.a,R.b,B.a],styles:[""]}),t}();function L(t,e){if(1&t&&(m.Vb(0,"div",2),m.Vb(1,"div",3),m.Vb(2,"span",4),m.Mc(3),m.Ub(),m.Ub(),m.Vb(4,"div",5),m.Vb(5,"mat-icon"),m.Mc(6,"dns"),m.Ub(),m.Ub(),m.Ub()),2&t){var i=m.hc();m.Db(3),m.Nc(i.value)}}function z(t,e){if(1&t&&(m.Vb(0,"div",6),m.Vb(1,"div",3),m.Vb(2,"span",4),m.Mc(3),m.Ub(),m.Ub(),m.Vb(4,"div",7),m.Vb(5,"mat-icon"),m.Mc(6,"share"),m.Ub(),m.Ub(),m.Ub()),2&t){var i=m.hc();m.oc("matTooltip","This content-type shares the definition of #",i.contentType.SharedDefId," so you can't edit it here. Read 2sxc.org/help?tag=shared-types"),m.Db(3),m.Nc(i.value)}}var X=function(){function t(){}return t.prototype.agInit=function(t){this.contentType=t.data,this.value=t.value},t.prototype.refresh=function(t){return!0},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Jb({type:t,selectors:[["app-data-fields"]],decls:2,vars:2,consts:[["matRipple","","class","chip-component highlight","matTooltip","Edit fields",4,"ngIf"],["class","chip-component disabled",3,"matTooltip",4,"ngIf"],["matRipple","","matTooltip","Edit fields",1,"chip-component","highlight"],[1,"chip-box"],[1,"chip"],[1,"like-button"],[1,"chip-component","disabled",3,"matTooltip"],[1,"like-button","disabled"]],template:function(t,e){1&t&&(m.Kc(0,L,7,1,"div",0),m.Kc(1,z,7,2,"div",1)),2&t&&(m.nc("ngIf",!e.contentType.UsesSharedDef),m.Db(1),m.nc("ngIf",e.contentType.UsesSharedDef))},directives:[g.n,W.p,C.a,V.a],styles:[".chip-box[_ngcontent-%COMP%]{width:32px}"]}),t}(),Z=function(){function t(){}return t.prototype.agInit=function(t){this.value=t.value},t.prototype.refresh=function(t){return!0},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Jb({type:t,selectors:[["app-data-items"]],decls:7,vars:1,consts:[["matRipple","","matTooltip","Add item",1,"chip-component","highlight"],[1,"chip-box"],[1,"chip"],[1,"like-button"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"span",2),m.Mc(3),m.Ub(),m.Ub(),m.Vb(4,"div",3),m.Vb(5,"mat-icon"),m.Mc(6,"add"),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Db(3),m.Nc(e.value))},directives:[W.p,C.a,V.a],styles:[".chip-box[_ngcontent-%COMP%]{width:40px}"]}),t}(),H=i("uwFg"),Y=i("XWDa"),$=i("dNgK"),_=i("VNq2"),tt=i("gwh1"),et=i("pXf0"),it=i("kmnG"),nt=i("d3UM"),ot=i("3Pt+");function at(t,e){if(1&t&&(m.Vb(0,"mat-option",10),m.Mc(1),m.Ub()),2&t){var i=e.$implicit;m.nc("value",i.value),m.Db(1),m.Oc(" ","Scope: "+i.name," ")}}function rt(t,e){if(1&t){var i=m.Wb();m.Vb(0,"button",11),m.dc("click",function(){return m.Ac(i),m.hc().createGhost()}),m.Vb(1,"mat-icon"),m.Mc(2,"share"),m.Ub(),m.Vb(3,"span"),m.Mc(4,"Ghost"),m.Ub(),m.Ub()}}var st=function(){function t(t,e,i,o,r,c){var l=this;this.router=t,this.route=e,this.contentTypesService=i,this.globalConfigService=o,this.snackBar=r,this.contentExportService=c,this.contentTypes$=new a.a(null),this.scope$=new a.a(null),this.scopeOptions$=new a.a([]),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.modules=k.a,this.gridOptions=Object(n.a)(Object(n.a)({},P.a),{frameworkComponents:{idFieldComponent:A.a,dataItemsComponent:Z,dataFieldsComponent:X,dataActionsComponent:q},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(t){return"ID: "+t.Id+"\nGUID: "+t.StaticName}}},{headerName:"Content Type",field:"Label",flex:3,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.showContentItems.bind(this),comparator:function(t,e,i,n,o){return i.data._compareLabel.localeCompare(n.data._compareLabel)}},{headerName:"Items",field:"Items",width:102,headerClass:"dense",cellClass:"secondary-action no-padding",sortable:!0,filter:"agNumberColumnFilter",cellRenderer:"dataItemsComponent",onCellClicked:this.addItem.bind(this)},{headerName:"Fields",field:"Fields",width:94,headerClass:"dense",cellClass:"secondary-action no-padding",sortable:!0,filter:"agNumberColumnFilter",cellRenderer:"dataFieldsComponent",onCellClicked:this.editFields.bind(this)},{headerName:"Name",field:"Name",flex:1,minWidth:100,cellClass:this.nameCellClassGetter.bind(this),sortable:!0,filter:"agTextColumnFilter",onCellClicked:function(t){l.editContentType(t.data)}},{headerName:"Description",field:"Metadata.Description",flex:3,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:120,cellClass:"secondary-action no-padding",cellRenderer:"dataActionsComponent",pinned:"right",cellRendererParams:{enablePermissionsGetter:this.enablePermissionsGetter.bind(this),onCreateOrEditMetadata:this.createOrEditMetadata.bind(this),onOpenPermissions:this.openPermissions.bind(this),onEdit:this.editContentType.bind(this),onOpenRestApi:this.openRestApi.bind(this),onTypeExport:this.exportType.bind(this),onOpenDataExport:this.openDataExport.bind(this),onOpenDataImport:this.openDataImport.bind(this),onDelete:this.deleteContentType.bind(this)}}]}),this.defaultScope=d.a.scopes.default.value,this.subscription=new s.a}return t.prototype.ngOnInit=function(){this.fetchScopes(),this.refreshScopeOnRouteChange(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.contentTypes$.complete(),this.scope$.complete(),this.scopeOptions$.complete(),this.subscription.unsubscribe()},t.prototype.filesDropped=function(t){var e=this,i=t[0];switch(i.name.substring(i.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":Object(x.a)(Object(O.b)(t[0])).pipe(Object(I.a)(1)).subscribe(function(i){var n,o=null===(n=i.split('<Entity Type="')[1])||void 0===n?void 0:n.split('"')[0],a=e.contentTypes$.value.find(function(t){return t.Name===o});null!=a?e.openDataImport(a,t):e.snackBar.open("Cannot find Content Type named '"+o+"'. Please open Content Type Import dialog manually.",null,{duration:5e3})});break;case"json":this.importType(t)}},t.prototype.importType=function(t){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:t}})},t.prototype.showContentItems=function(t){this.router.navigate(["items/"+t.data.StaticName],{relativeTo:this.route.firstChild})},t.prototype.editContentType=function(t){if(t){if(t.UsesSharedDef)return;this.router.navigate([t.StaticName+"/edit"],{relativeTo:this.route.firstChild})}else this.router.navigate(["add"],{relativeTo:this.route.firstChild})},t.prototype.fetchContentTypes=function(){var t=this;this.contentTypesService.retrieveContentTypes(this.scope$.value).subscribe(function(e){var i,o;try{for(var a=Object(n.i)(e),r=a.next();!r.done;r=a.next()){var s=r.value;s._compareLabel=s.Label.replace(/\p{Emoji}/gu,"\u017e")}}catch(c){i={error:c}}finally{try{r&&!r.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}t.contentTypes$.next(e),t.scope$.value!==t.defaultScope&&t.snackBar.open("Warning! You are in a special scope. Changing things here could easily break functionality",null,{duration:2e3})})},t.prototype.fetchScopes=function(){var t=this;this.contentTypesService.getScopes().subscribe(function(e){var i=Object(n.h)(t.scopeOptions$.value);e.forEach(function(t){var e=i.find(function(e){return e.value===t.value});e?e.name=t.name:i.push(t)}),t.scopeOptions$.next(i)})},t.prototype.createGhost=function(){var t=this,e=window.prompt("To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost");e&&(this.snackBar.open("Saving..."),this.contentTypesService.createGhost(e).subscribe(function(e){t.snackBar.open("Saved",null,{duration:2e3}),t.fetchContentTypes()}))},t.prototype.changeScope=function(t){"Other"===t&&(t=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||this.defaultScope),this.router.navigate(["data/"+t],{relativeTo:this.route})},t.prototype.enablePermissionsGetter=function(){return this.enablePermissions},t.prototype.nameCellClassGetter=function(t){return t.data.UsesSharedDef?"disabled":"primary-action highlight"},t.prototype.addItem=function(t){var e={items:[{ContentTypeName:t.data.StaticName}]},i=Object(E.a)(e);this.router.navigate(["edit/"+i],{relativeTo:this.route.firstChild})},t.prototype.editFields=function(t){var e=t.data;e.UsesSharedDef||this.router.navigate(["fields/"+e.StaticName],{relativeTo:this.route.firstChild})},t.prototype.createOrEditMetadata=function(t){var e={items:[t.Metadata?{EntityId:t.Metadata.Id}:{ContentTypeName:d.a.contentTypes.contentType,For:{Target:d.a.metadata.contentType.target,String:t.StaticName},Prefill:{Label:t.Name,Description:t.Description}}]},i=Object(E.a)(e);this.router.navigate(["edit/"+i],{relativeTo:this.route.firstChild})},t.prototype.openRestApi=function(t){this.router.navigate([w.a.goToData(t)],{relativeTo:this.route.firstChild})},t.prototype.exportType=function(t){this.contentExportService.exportJson(t.StaticName)},t.prototype.openDataExport=function(t){this.router.navigate(["export/"+t.StaticName],{relativeTo:this.route.firstChild})},t.prototype.openDataImport=function(t,e){this.router.navigate([t.StaticName+"/import"],{relativeTo:this.route.firstChild,state:{files:e}})},t.prototype.openPermissions=function(t){this.router.navigate([M.a.goEntity(t.StaticName)],{relativeTo:this.route.firstChild})},t.prototype.deleteContentType=function(t){var e=this;confirm("Are you sure you want to delete '"+t.Name+"' ("+t.Id+")?")&&(this.snackBar.open("Deleting..."),this.contentTypesService.delete(t).subscribe(function(t){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchContentTypes()}))},t.prototype.refreshScopeOnRouteChange=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(c.a)(function(t){return t instanceof o.b}),Object(l.a)(function(){return t.route.snapshot.firstChild.paramMap.get("scope")}),Object(p.a)(this.route.snapshot.firstChild.paramMap.get("scope")),Object(c.a)(function(t){return!!t}),Object(D.a)()).subscribe(function(e){if(t.scope$.next(e),!t.scopeOptions$.value.map(function(t){return t.value}).includes(e)){var i={name:e,value:e};t.scopeOptions$.next(Object(n.h)(t.scopeOptions$.value,[i]))}t.fetchContentTypes()}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(c.a)(function(t){return t instanceof o.b}),Object(p.a)(!!this.route.snapshot.firstChild.firstChild),Object(l.a)(function(){return!!t.route.snapshot.firstChild.firstChild}),Object(b.a)(),Object(c.a)(function(t){var e=Object(n.g)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchContentTypes()}))},t.\u0275fac=function(e){return new(e||t)(m.Pb(o.c),m.Pb(o.a),m.Pb(H.a),m.Pb(Y.g),m.Pb($.b),m.Pb(_.a))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-data"]],inputs:{enablePermissions:"enablePermissions"},decls:21,vars:15,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["appearance","standard","color","accent",1,"scope-dropdown"],["name","Scope",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","Other"],["mat-button","","matTooltip","Import content type",3,"click"],["mat-button","","color","accent","matTooltip","Create a ghost content type",3,"click",4,"ngIf"],["mat-fab","","mat-elevation-z24","","matTooltip","Create a new content type",1,"grid-fab",3,"click"],[3,"value"],["mat-button","","color","accent","matTooltip","Create a ghost content type",3,"click"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"ag-grid-angular",1),m.dc("filesDropped",function(t){return e.filesDropped(t)}),m.ic(2,"async"),m.Ub(),m.Vb(3,"div",2),m.Vb(4,"mat-form-field",3),m.Vb(5,"mat-select",4),m.dc("ngModelChange",function(t){return e.changeScope(t)}),m.ic(6,"async"),m.Kc(7,at,2,2,"mat-option",5),m.ic(8,"async"),m.Vb(9,"mat-option",6),m.Mc(10,"Scope: Other..."),m.Ub(),m.Ub(),m.Ub(),m.Vb(11,"button",7),m.dc("click",function(){return e.importType()}),m.Vb(12,"mat-icon"),m.Mc(13,"cloud_upload"),m.Ub(),m.Vb(14,"span"),m.Mc(15,"Content Type"),m.Ub(),m.Ub(),m.Kc(16,rt,5,0,"button",8),m.ic(17,"async"),m.Ub(),m.Vb(18,"button",9),m.dc("click",function(){return e.editContentType(null)}),m.Vb(19,"mat-icon"),m.Mc(20,"add"),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Db(1),m.nc("rowData",m.jc(2,7,e.contentTypes$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","xml,json"),m.Db(4),m.nc("ngModel",m.jc(6,9,e.scope$)),m.Db(2),m.nc("ngForOf",m.jc(8,11,e.scopeOptions$)),m.Db(9),m.nc("ngIf",m.jc(17,13,e.debugEnabled$)))},directives:[tt.a,et.a,it.c,nt.a,ot.m,ot.p,g.m,W.k,y.a,C.a,V.a,g.n],pipes:[g.b],styles:[".scope-dropdown[_ngcontent-%COMP%]{width:200px;margin-top:-14px;font-size:14px;height:auto}"]}),t}(),ct=function(t){return t[t.Edit=0]="Edit",t[t.Rest=1]="Rest",t[t.Clone=2]="Clone",t[t.Permissions=3]="Permissions",t[t.Export=4]="Export",t[t.Delete=5]="Delete",t}({});function lt(t,e){if(1&t&&(m.Vb(0,"mat-icon",12),m.Mc(1," person "),m.Ub()),2&t){var i=m.hc(2);m.nc("matBadge",i.item._Permissions.Count)}}function pt(t,e){1&t&&(m.Vb(0,"mat-icon"),m.Mc(1,"person"),m.Ub())}function bt(t,e){if(1&t){var i=m.Wb();m.Vb(0,"div",9),m.dc("click",function(){m.Ac(i);var t=m.hc();return t.params.do(t.actions.Permissions,t.item)}),m.Kc(1,lt,2,1,"mat-icon",10),m.Kc(2,pt,2,0,"mat-icon",11),m.Ub()}if(2&t){var n=m.hc();m.Db(1),m.nc("ngIf",n.item._Permissions.Count),m.Db(1),m.nc("ngIf",!n.item._Permissions.Count)}}function dt(t,e){1&t&&(m.Vb(0,"div",13),m.Vb(1,"mat-icon"),m.Mc(2,"person"),m.Ub(),m.Ub())}var ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actions=ct,e}return Object(n.d)(e,t),e.prototype.agInit=function(e){t.prototype.agInit.call(this,e),this.enablePermissions=this.params.getEnablePermissions()},e.\u0275fac=function(t){return mt(t||e)},e.\u0275cmp=m.Jb({type:e,selectors:[["app-queries-actions"]],features:[m.Ab],decls:30,vars:3,consts:[[1,"actions-component"],["matRipple","","matTooltip","Edit",1,"like-button","highlight",3,"click"],["class","like-button highlight","matRipple","","matTooltip","Permissions",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["matRipple","","matTooltip","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["matRipple","","matTooltip","Permissions",1,"like-button","highlight",3,"click"],["matBadgePosition","after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge",4,"ngIf"],[4,"ngIf"],["matBadgePosition","after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge"],[1,"like-button","disabled"]],template:function(t,e){if(1&t&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.dc("click",function(){return e.params.do(e.actions.Edit,e.item)}),m.Vb(2,"mat-icon"),m.Mc(3,"edit"),m.Ub(),m.Ub(),m.Kc(4,bt,3,2,"div",2),m.Kc(5,dt,3,0,"div",3),m.Vb(6,"div",4),m.Vb(7,"mat-icon"),m.Mc(8,"more_horiz"),m.Ub(),m.Ub(),m.Ub(),m.Vb(9,"mat-menu",5,6),m.Vb(11,"button",7),m.dc("click",function(){return e.params.do(e.actions.Rest,e.item)}),m.Qb(12,"mat-icon",8),m.Vb(13,"span"),m.Mc(14,"REST API"),m.Ub(),m.Ub(),m.Vb(15,"button",7),m.dc("click",function(){return e.params.do(e.actions.Clone,e.item)}),m.Vb(16,"mat-icon"),m.Mc(17,"file_copy"),m.Ub(),m.Vb(18,"span"),m.Mc(19,"Copy"),m.Ub(),m.Ub(),m.Vb(20,"button",7),m.dc("click",function(){return e.params.do(e.actions.Export,e.item)}),m.Vb(21,"mat-icon"),m.Mc(22,"cloud_download"),m.Ub(),m.Vb(23,"span"),m.Mc(24,"Export"),m.Ub(),m.Ub(),m.Vb(25,"button",7),m.dc("click",function(){return e.params.do(e.actions.Delete,e.item)}),m.Vb(26,"mat-icon"),m.Mc(27,"delete"),m.Ub(),m.Vb(28,"span"),m.Mc(29,"Delete"),m.Ub(),m.Ub(),m.Ub()),2&t){var i=m.yc(10);m.Db(4),m.nc("ngIf",e.enablePermissions),m.Db(1),m.nc("ngIf",!e.enablePermissions),m.Db(1),m.nc("matMenuTriggerFor",i)}},directives:[W.p,C.a,V.a,g.n,R.d,R.a,R.b,B.a],encapsulation:2}),e}(function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.item=this.params.data},t.prototype.refresh=function(t){return!0},t}()),mt=m.Xb(ut),ht=i("eues"),ft=i("Sbq5"),gt=i("JbvS"),vt=function(){function t(t,e,i,o,r,c){this.router=t,this.route=e,this.pipelinesService=i,this.contentExportService=o,this.snackBar=r,this.dialogService=c,this.queries$=new a.a(null),this.modules=k.a,this.gridOptions=Object(n.a)(Object(n.a)({},P.a),{frameworkComponents:{idFieldComponent:A.a,queriesActionsComponent:ut},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(t){return"ID: "+t.Id+"\nGUID: "+t.Guid}}},{headerName:"Name",field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.openVisualQueryDesigner.bind(this)},{headerName:"Description",field:"Description",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:120,cellClass:"secondary-action no-padding",pinned:"right",cellRenderer:"queriesActionsComponent",cellRendererParams:{getEnablePermissions:this.enablePermissionsGetter.bind(this),do:this.doMenuAction.bind(this)}}]}),this.subscription=new s.a}return t.prototype.ngOnInit=function(){this.fetchQueries(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.queries$.complete(),this.subscription.unsubscribe()},t.prototype.fetchQueries=function(){var t=this;this.pipelinesService.getAll(d.a.contentTypes.query).subscribe(function(e){t.queries$.next(e)})},t.prototype.importQuery=function(t){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:t}})},t.prototype.doMenuAction=function(t,e){switch(t){case ct.Edit:return this.editQuery(e);case ct.Rest:return this.router.navigate([w.a.goToQuery(e.Guid)],{relativeTo:this.route.firstChild});case ct.Clone:return this.cloneQuery(e);case ct.Permissions:return this.openPermissions(e);case ct.Export:return this.exportQuery(e);case ct.Delete:return this.deleteQuery(e)}},t.prototype.editQuery=function(t){var e={items:[null==t?{ContentTypeName:d.a.contentTypes.query,Prefill:{TestParameters:d.a.pipelineDesigner.testParameters}}:{EntityId:t.Id}]},i=Object(E.a)(e);this.router.navigate(["edit/"+i],{relativeTo:this.route.firstChild})},t.prototype.enablePermissionsGetter=function(){return this.enablePermissions},t.prototype.openVisualQueryDesigner=function(t){this.dialogService.openQueryDesigner(t.data.Id)},t.prototype.cloneQuery=function(t){var e=this;this.snackBar.open("Copying..."),this.pipelinesService.clonePipeline(t.Id).subscribe(function(){e.snackBar.open("Copied",null,{duration:2e3}),e.fetchQueries()})},t.prototype.openPermissions=function(t){this.router.navigate([M.a.goEntity(t.Guid)],{relativeTo:this.route.firstChild})},t.prototype.exportQuery=function(t){this.contentExportService.exportEntity(t.Id,"Query",!0)},t.prototype.deleteQuery=function(t){var e=this;confirm("Delete Pipeline '"+t.Name+"' ("+t.Id+")?")&&(this.snackBar.open("Deleting..."),this.pipelinesService.delete(t.Id).subscribe(function(t){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchQueries()}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(c.a)(function(t){return t instanceof o.b}),Object(p.a)(!!this.route.snapshot.firstChild.firstChild),Object(l.a)(function(){return!!t.route.snapshot.firstChild.firstChild}),Object(b.a)(),Object(c.a)(function(t){var e=Object(n.g)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchQueries()}))},t.\u0275fac=function(e){return new(e||t)(m.Pb(o.c),m.Pb(o.a),m.Pb(ht.a),m.Pb(_.a),m.Pb($.b),m.Pb(ft.a))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-queries"]],inputs:{enablePermissions:"enablePermissions"},decls:16,vars:7,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],[1,"grid-fab"],[3,"spin"],["mat-fab",""],[1,"spin180"],["mat-mini-fab","","matTooltip","Import query",3,"click"],["mat-mini-fab","","matTooltip","Create a new query",3,"click"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"ag-grid-angular",1),m.dc("filesDropped",function(t){return e.importQuery(t)}),m.ic(2,"async"),m.Ub(),m.Qb(3,"div",2),m.Vb(4,"eco-fab-speed-dial",3),m.Vb(5,"eco-fab-speed-dial-trigger",4),m.Vb(6,"button",5),m.Vb(7,"mat-icon",6),m.Mc(8,"add"),m.Ub(),m.Ub(),m.Ub(),m.Vb(9,"eco-fab-speed-dial-actions"),m.Vb(10,"button",7),m.dc("click",function(){return e.importQuery()}),m.Vb(11,"mat-icon"),m.Mc(12,"cloud_upload"),m.Ub(),m.Ub(),m.Vb(13,"button",8),m.dc("click",function(){return e.editQuery(null)}),m.Vb(14,"mat-icon"),m.Mc(15,"add"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Db(1),m.nc("rowData",m.jc(2,5,e.queries$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","json"),m.Db(4),m.nc("spin",!0))},directives:[tt.a,et.a,gt.b,gt.d,y.a,V.a,gt.a,C.a],pipes:[g.b],styles:[""]}),t}(),yt=i("0p6s");function Ct(t,e){if(1&t){var i=m.Wb();m.Vb(0,"div",8),m.dc("click",function(){return m.Ac(i),m.hc().openCode()}),m.Vb(1,"mat-icon"),m.Mc(2,"code"),m.Ub(),m.Ub()}}function Vt(t,e){1&t&&(m.Vb(0,"div",9),m.Vb(1,"mat-icon"),m.Mc(2,"code"),m.Ub(),m.Ub())}function Ut(t,e){if(1&t&&(m.Vb(0,"mat-icon",13),m.Mc(1," person "),m.Ub()),2&t){var i=m.hc(2);m.nc("matBadge",i.view.Permissions.Count)}}function Tt(t,e){1&t&&(m.Vb(0,"mat-icon"),m.Mc(1,"person"),m.Ub())}function St(t,e){if(1&t){var i=m.Wb();m.Vb(0,"div",10),m.dc("click",function(){return m.Ac(i),m.hc().openPermissions()}),m.Kc(1,Ut,2,1,"mat-icon",11),m.Kc(2,Tt,2,0,"mat-icon",12),m.Ub()}if(2&t){var n=m.hc();m.Db(1),m.nc("ngIf",n.view.Permissions.Count),m.Db(1),m.nc("ngIf",!n.view.Permissions.Count)}}function kt(t,e){1&t&&(m.Vb(0,"div",9),m.Vb(1,"mat-icon"),m.Mc(2,"person"),m.Ub(),m.Ub())}var xt=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.view=this.params.data,this.enableCode=this.params.enableCodeGetter(),this.enablePermissions=this.params.enablePermissionsGetter()},t.prototype.refresh=function(t){return!0},t.prototype.openCode=function(){this.params.onOpenCode(this.view)},t.prototype.openPermissions=function(){this.params.onOpenPermissions(this.view)},t.prototype.cloneView=function(){this.params.onClone(this.view)},t.prototype.exportView=function(){this.params.onExport(this.view)},t.prototype.deleteView=function(){this.params.onDelete(this.view)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Jb({type:t,selectors:[["app-views-actions"]],decls:25,vars:5,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","matTooltip","Code",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","matTooltip","Permissions",3,"click",4,"ngIf"],["matRipple","","matTooltip","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["matRipple","","matTooltip","Code",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["matRipple","","matTooltip","Permissions",1,"like-button","highlight",3,"click"],["matBadgePosition","after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge",4,"ngIf"],[4,"ngIf"],["matBadgePosition","after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge"]],template:function(t,e){if(1&t&&(m.Vb(0,"div",0),m.Kc(1,Ct,3,0,"div",1),m.Kc(2,Vt,3,0,"div",2),m.Kc(3,St,3,2,"div",3),m.Kc(4,kt,3,0,"div",2),m.Vb(5,"div",4),m.Vb(6,"mat-icon"),m.Mc(7,"more_horiz"),m.Ub(),m.Ub(),m.Ub(),m.Vb(8,"mat-menu",5,6),m.Vb(10,"button",7),m.dc("click",function(){return e.cloneView()}),m.Vb(11,"mat-icon"),m.Mc(12,"file_copy"),m.Ub(),m.Vb(13,"span"),m.Mc(14,"Copy"),m.Ub(),m.Ub(),m.Vb(15,"button",7),m.dc("click",function(){return e.exportView()}),m.Vb(16,"mat-icon"),m.Mc(17,"cloud_download"),m.Ub(),m.Vb(18,"span"),m.Mc(19,"Export"),m.Ub(),m.Ub(),m.Vb(20,"button",7),m.dc("click",function(){return e.deleteView()}),m.Vb(21,"mat-icon"),m.Mc(22,"delete"),m.Ub(),m.Vb(23,"span"),m.Mc(24,"Delete"),m.Ub(),m.Ub(),m.Ub()),2&t){var i=m.yc(9);m.Db(1),m.nc("ngIf",e.enableCode),m.Db(1),m.nc("ngIf",!e.enableCode),m.Db(1),m.nc("ngIf",e.enablePermissions),m.Db(1),m.nc("ngIf",!e.enablePermissions),m.Db(1),m.nc("matMenuTriggerFor",i)}},directives:[g.n,W.p,C.a,R.d,V.a,R.a,R.b,B.a],styles:[""]}),t}();function It(t,e){1&t&&(m.Vb(0,"mat-icon"),m.Mc(1,"visibility"),m.Ub())}function Dt(t,e){1&t&&(m.Vb(0,"mat-icon"),m.Mc(1,"visibility_off"),m.Ub())}var wt=function(){function t(){}return t.prototype.agInit=function(t){this.value=t.value},t.prototype.refresh=function(t){return!0},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Jb({type:t,selectors:[["app-views-show"]],decls:3,vars:2,consts:[[1,"icon-container"],[4,"ngIf"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Kc(1,It,2,0,"mat-icon",1),m.Kc(2,Dt,2,0,"mat-icon",1),m.Ub()),2&t&&(m.Db(1),m.nc("ngIf",e.value),m.Db(1),m.nc("ngIf",!e.value))},directives:[g.n,V.a],styles:[""]}),t}();function Mt(t){var e="",i="";return t.HasQuery?(e="Data (from query)",i="filter_list"):t.List?(e="Items (list)",i="format_list_numbered"):t.ContentType||t.HasQuery?t.List||(e="Item (one)",i="looks_one"):(e="Code",i="check_box_outline_blank"),{value:e,icon:i}}var At=function(){function t(){}return t.prototype.agInit=function(t){this.value=t.value;var e=Mt(t.data);this.icon=e.icon},t.prototype.refresh=function(t){return!0},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Jb({type:t,selectors:[["app-views-type"]],decls:3,vars:2,consts:[[1,"icon-container",3,"matTooltip"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"mat-icon"),m.Mc(2),m.Ub(),m.Ub()),2&t&&(m.nc("matTooltip",e.value),m.Db(2),m.Nc(e.icon))},directives:[C.a,V.a],styles:[""]}),t}(),Pt=i("6HSB"),Ot=function(){function t(t,e,i,o,r){var c=this;this.viewsService=t,this.router=e,this.route=i,this.snackBar=o,this.dialogService=r,this.views$=new a.a(null),this.polymorphStatus$=new a.a(""),this.polymorphLogo="data:image/png;base64,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",this.modules=k.a,this.gridOptions=Object(n.a)(Object(n.a)({},P.a),{frameworkComponents:{idFieldComponent:A.a,booleanFilterComponent:yt.a,viewsTypeComponent:At,viewsShowComponent:wt,viewsActionsComponent:xt},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(t){return"ID: "+t.Id+"\nGUID: "+t.Guid}}},{headerName:"Show",field:"IsHidden",width:70,headerClass:"dense",cellClass:"no-outline",cellRenderer:"viewsShowComponent",sortable:!0,filter:"booleanFilterComponent",valueGetter:this.showValueGetter},{headerName:"Name",field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editView.bind(this)},{headerName:"Type",field:"Type",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",cellRenderer:"viewsTypeComponent",valueGetter:this.typeValueGetter},{headerName:"Used",field:"Used",width:70,headerClass:"dense",cellClass:"primary-action highlight",sortable:!0,filter:"agNumberColumnFilter",onCellClicked:function(t){c.openUsage(t)}},{headerName:"Url Key",field:"ViewNameInUrl",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Path",field:"TemplatePath",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Content",field:"ContentType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ContentType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.contentDemoValueGetter},{headerName:"Presentation",field:"PresentationType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"PresentationType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.presentationDemoValueGetter},{headerName:"Header",field:"ListContentType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ListContentType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.headerDemoValueGetter},{headerName:"Header Presentation",field:"ListPresentationType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ListPresentationType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.headerPresDemoValueGetter},{width:120,cellClass:"secondary-action no-padding",cellRenderer:"viewsActionsComponent",pinned:"right",cellRendererParams:{enableCodeGetter:this.enableCodeGetter.bind(this),enablePermissionsGetter:this.enablePermissionsGetter.bind(this),onOpenCode:this.openCode.bind(this),onOpenPermissions:this.openPermissions.bind(this),onClone:this.cloneView.bind(this),onExport:this.exportView.bind(this),onDelete:this.deleteView.bind(this)}}]}),this.subscription=new s.a}return t.prototype.ngOnInit=function(){this.fetchTemplates(),this.fetchPolymorphism(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.views$.complete(),this.polymorphStatus$.complete(),this.subscription.unsubscribe()},t.prototype.importView=function(t){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:t}})},t.prototype.fetchTemplates=function(){var t=this;this.viewsService.getAll().subscribe(function(e){t.views$.next(e)})},t.prototype.fetchPolymorphism=function(){var t=this;this.viewsService.getPolymorphism().subscribe(function(e){t.polymorphism=e,t.polymorphStatus$.next(null===e.Id?"not configured":null===e.Resolver?"disabled":"using "+e.Resolver)})},t.prototype.editView=function(t){var e=null==t?void 0:t.data,i={items:[null==e?{ContentTypeName:d.a.contentTypes.template}:{EntityId:e.Id}]},n=Object(E.a)(i);this.router.navigate(["edit/"+n],{relativeTo:this.route.firstChild})},t.prototype.editPolymorphisms=function(){if(this.polymorphism){var t={items:[this.polymorphism.Id?{EntityId:this.polymorphism.Id}:{ContentTypeName:this.polymorphism.TypeName}]},e=Object(E.a)(t);this.router.navigate(["edit/"+e],{relativeTo:this.route.firstChild})}},t.prototype.showValueGetter=function(t){return!t.data.IsHidden},t.prototype.typeValueGetter=function(t){return Mt(t.data).value},t.prototype.enableCodeGetter=function(){return this.enableCode},t.prototype.enablePermissionsGetter=function(){return this.enablePermissions},t.prototype.contentDemoValueGetter=function(t){var e=t.data;return e.ContentType.DemoId+" "+e.ContentType.DemoTitle},t.prototype.presentationDemoValueGetter=function(t){var e=t.data;return e.PresentationType.DemoId+" "+e.PresentationType.DemoTitle},t.prototype.headerDemoValueGetter=function(t){var e=t.data;return e.ListContentType.DemoId+" "+e.ListContentType.DemoTitle},t.prototype.headerPresDemoValueGetter=function(t){var e=t.data;return e.ListPresentationType.DemoId+" "+e.ListPresentationType.DemoTitle},t.prototype.openUsage=function(t){this.router.navigate(["usage/"+t.data.Guid],{relativeTo:this.route.firstChild})},t.prototype.openCode=function(t){this.dialogService.openCodeFile(t.TemplatePath,t.IsShared)},t.prototype.openPermissions=function(t){this.router.navigate([M.a.goEntity(t.Guid)],{relativeTo:this.route.firstChild})},t.prototype.cloneView=function(t){var e={items:[{ContentTypeName:d.a.contentTypes.template,DuplicateEntity:t.Id}]},i=Object(E.a)(e);this.router.navigate(["edit/"+i],{relativeTo:this.route.firstChild})},t.prototype.exportView=function(t){this.viewsService.export(t.Id)},t.prototype.deleteView=function(t){var e=this;confirm("Delete '"+t.Name+"' ("+t.Id+")?")&&(this.snackBar.open("Deleting..."),this.viewsService.delete(t.Id).subscribe(function(t){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchTemplates()}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(c.a)(function(t){return t instanceof o.b}),Object(p.a)(!!this.route.snapshot.firstChild.firstChild),Object(l.a)(function(){return!!t.route.snapshot.firstChild.firstChild}),Object(b.a)(),Object(c.a)(function(t){var e=Object(n.g)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchTemplates(),t.fetchPolymorphism()}))},t.\u0275fac=function(e){return new(e||t)(m.Pb(Pt.a),m.Pb(o.c),m.Pb(o.a),m.Pb($.b),m.Pb(ft.a))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-views"]],inputs:{enableCode:"enableCode",enablePermissions:"enablePermissions"},decls:17,vars:10,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","matTooltip","Configure polymorphism",3,"click"],[1,"polymorph-logo",3,"src"],["mat-button","","matTooltip","Import view",3,"click"],["mat-fab","","mat-elevation-z24","","matTooltip","Create a new view",1,"grid-fab",3,"click"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"ag-grid-angular",1),m.dc("filesDropped",function(t){return e.importView(t)}),m.ic(2,"async"),m.Ub(),m.Vb(3,"div",2),m.Vb(4,"button",3),m.dc("click",function(){return e.editPolymorphisms()}),m.Qb(5,"img",4),m.Vb(6,"span"),m.Mc(7),m.ic(8,"async"),m.Ub(),m.Ub(),m.Vb(9,"button",5),m.dc("click",function(){return e.importView()}),m.Vb(10,"mat-icon"),m.Mc(11,"cloud_upload"),m.Ub(),m.Vb(12,"span"),m.Mc(13,"View"),m.Ub(),m.Ub(),m.Ub(),m.Vb(14,"button",6),m.dc("click",function(){return e.editView(null)}),m.Vb(15,"mat-icon"),m.Mc(16,"add"),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Db(1),m.nc("rowData",m.jc(2,6,e.views$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","json"),m.Db(4),m.nc("src",e.polymorphLogo,m.Dc),m.Db(2),m.Oc("Polymorphism ",m.jc(8,8,e.polymorphStatus$),""))},directives:[tt.a,et.a,y.a,C.a,V.a],pipes:[g.b],styles:[".polymorph-logo[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:4px}"]}),t}(),Et=i("AmCw"),Ft=i("HQci");function Wt(t,e){if(1&t){var i=m.Wb();m.Vb(0,"div",8),m.dc("click",function(){return m.Ac(i),m.hc().openCode()}),m.Vb(1,"mat-icon"),m.Mc(2,"code"),m.Ub(),m.Ub()}}function Rt(t,e){1&t&&(m.Vb(0,"div",9),m.Vb(1,"mat-icon"),m.Mc(2,"code"),m.Ub(),m.Ub())}var Bt=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.enableCode=this.params.enableCodeGetter()},t.prototype.refresh=function(t){return!0},t.prototype.openCode=function(){this.params.onOpenCode(this.params.data)},t.prototype.openRestApi=function(){this.params.onOpenRestApi(this.params.data)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Jb({type:t,selectors:[["app-web-api-actions"]],decls:12,vars:3,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","matTooltip","Code",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["matRipple","","matTooltip","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["matRipple","","matTooltip","Code",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"]],template:function(t,e){if(1&t&&(m.Vb(0,"div",0),m.Kc(1,Wt,3,0,"div",1),m.Kc(2,Rt,3,0,"div",2),m.Vb(3,"div",3),m.Vb(4,"mat-icon"),m.Mc(5,"more_horiz"),m.Ub(),m.Ub(),m.Ub(),m.Vb(6,"mat-menu",4,5),m.Vb(8,"button",6),m.dc("click",function(){return e.openRestApi()}),m.Qb(9,"mat-icon",7),m.Vb(10,"span"),m.Mc(11,"REST API"),m.Ub(),m.Ub(),m.Ub()),2&t){var i=m.yc(7);m.Db(1),m.nc("ngIf",e.enableCode),m.Db(1),m.nc("ngIf",!e.enableCode),m.Db(1),m.nc("matMenuTriggerFor",i)}},directives:[g.n,W.p,C.a,R.d,V.a,R.a,R.b],styles:[""]}),t}(),Nt=i("NG6K"),Kt=function(){function t(t,e,i,o,r){this.webApisService=t,this.snackBar=e,this.dialogService=i,this.router=o,this.route=r,this.webApis$=new a.a(null),this.modules=k.a,this.gridOptions=Object(n.a)(Object(n.a)({},P.a),{frameworkComponents:{webApiActions:Bt},columnDefs:[{headerName:"Folder",field:"folder",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter"},{headerName:"Name",field:"name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:80,cellClass:"secondary-action no-padding",cellRenderer:"webApiActions",pinned:"right",cellRendererParams:{enableCodeGetter:this.enableCodeGetter.bind(this),onOpenCode:this.openCode.bind(this),onOpenRestApi:this.openRestApi.bind(this)}}]})}return t.prototype.ngOnInit=function(){this.fetchWebApis()},t.prototype.ngOnDestroy=function(){this.webApis$.complete()},t.prototype.addController=function(){var t=this,e=prompt("Controller name:",Ft.a);if(null!==e&&0!==e.length){var i=(e=(e=Et.j.sanitizePath(e)).replace(/\s/g,"")).toLocaleLowerCase(),n=i.lastIndexOf(".cs");n>0&&(i=i.substring(0,n));var o=i.lastIndexOf("controller");o>0&&(i=i.substring(0,o)),e=e.charAt(0).toLocaleUpperCase()+e.substring(1,i.length)+"Controller.cs",this.snackBar.open("Saving..."),this.webApisService.create(e).subscribe(function(e){t.snackBar.open("Saved",null,{duration:2e3}),t.fetchWebApis()})}},t.prototype.fetchWebApis=function(){var t=this;this.webApisService.getAll().subscribe(function(e){t.webApis$.next(e)})},t.prototype.enableCodeGetter=function(){return this.enableCode},t.prototype.openCode=function(t){this.dialogService.openCodeFile(t.path)},t.prototype.openRestApi=function(t){this.router.navigate([w.a.goToWebApi(t)],{relativeTo:this.route.firstChild})},t.\u0275fac=function(e){return new(e||t)(m.Pb(Nt.a),m.Pb($.b),m.Pb(ft.a),m.Pb(o.c),m.Pb(o.a))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-web-api"]],inputs:{enableCode:"enableCode"},decls:7,vars:5,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","matTooltip","Create a new controller",1,"grid-fab",3,"click"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Qb(1,"ag-grid-angular",1),m.ic(2,"async"),m.Qb(3,"div",2),m.Vb(4,"button",3),m.dc("click",function(){return e.addController()}),m.Vb(5,"mat-icon"),m.Mc(6,"add"),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Db(1),m.nc("rowData",m.jc(2,3,e.webApis$))("modules",e.modules)("gridOptions",e.gridOptions))},directives:[tt.a,y.a,C.a,V.a],pipes:[g.b],styles:[""]}),t}(),jt=i("WRrS"),Gt=i("1O52"),Qt=i("m/g8"),Jt=i("OGde"),qt=i("Wp6s"),Lt=function(){function t(t,e,i,n,o,a,r){this.contentItemsService=t,this.router=e,this.route=i,this.context=n,this.exportAppService=o,this.importAppPartsService=a,this.snackBar=r,this.eavConstants=d.a}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.snackBar.dismiss()},t.prototype.edit=function(t){var e=this;this.contentItemsService.getAll(t).subscribe(function(i){if(1!==i.length)throw new Error("Found too many settings for the type "+t);var n={items:[{EntityId:i[0].Id}]},o=Object(E.a)(n);e.router.navigate(["edit/"+o],{relativeTo:e.route.firstChild})})},t.prototype.config=function(t){this.router.navigate(["fields/"+t],{relativeTo:this.route.firstChild})},t.prototype.openPermissions=function(){this.router.navigate([M.a.goApp(this.context.appId)],{relativeTo:this.route.firstChild})},t.prototype.exportApp=function(){this.router.navigate(["export"],{relativeTo:this.route.firstChild})},t.prototype.exportParts=function(){this.router.navigate(["export/parts"],{relativeTo:this.route.firstChild})},t.prototype.importParts=function(){this.router.navigate(["import/parts"],{relativeTo:this.route.firstChild})},t.prototype.exportAppXml=function(){var t=this;this.snackBar.open("Exporting..."),this.exportAppService.exportForVersionControl(!0,!1).subscribe({next:function(e){t.snackBar.open("Export done. Please check your '.data' folder",null,{duration:3e3})},error:function(e){t.snackBar.open("Export failed. Please check console for more information",null,{duration:3e3})}})},t.prototype.resetApp=function(){var t=this;confirm("Are you sure? All changes since last xml export will be lost")&&(this.snackBar.open("Resetting..."),this.importAppPartsService.resetApp().subscribe({next:function(e){t.snackBar.open("Reset worked! Since this is a complex operation, please restart the Website to ensure all caches are correct",null,{duration:3e4})},error:function(e){t.snackBar.open("Reset failed. Please check console for more information",null,{duration:3e3})}}))},t.prototype.openSystemSettings=function(){var t=this;this.router.navigate([this.context.zoneId+"/apps"]),setTimeout(function(){t.router.navigate([t.context.zoneId+"/apps/settings"])},750)},t.\u0275fac=function(e){return new(e||t)(m.Pb(jt.a),m.Pb(o.c),m.Pb(o.a),m.Pb(Gt.a),m.Pb(Qt.a),m.Pb(Jt.a),m.Pb($.b))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-app-configuration"]],inputs:{dialogSettings:"dialogSettings"},decls:146,vars:2,consts:[[1,"cards-box"],[1,"mat-elevation-z2"],[1,"mat-card-header-icon"],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],["matBadgePosition","after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge"],[2,"margin-top","48px"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"mat-card",1),m.Vb(2,"mat-card-header"),m.Vb(3,"mat-card-title"),m.Mc(4,"App Settings"),m.Ub(),m.Vb(5,"div",2),m.Vb(6,"mat-icon"),m.Mc(7,"settings"),m.Ub(),m.Ub(),m.Ub(),m.Vb(8,"mat-card-content"),m.Mc(9,' Settings are configurations used by the app - like SQL-connection strings, default "items-to-show" numbers and things like that. They can also be multi-language, so that a setting (like default RSS-Feed) could be different in each language. '),m.Ub(),m.Vb(10,"mat-card-actions"),m.Vb(11,"button",3),m.dc("click",function(){return e.edit(e.eavConstants.contentTypes.settings)}),m.Vb(12,"mat-icon"),m.Mc(13,"edit"),m.Ub(),m.Vb(14,"span"),m.Mc(15,"Edit Settings"),m.Ub(),m.Ub(),m.Vb(16,"button",3),m.dc("click",function(){return e.config(e.eavConstants.contentTypes.settings)}),m.Vb(17,"mat-icon"),m.Mc(18,"dns"),m.Ub(),m.Vb(19,"span"),m.Mc(20,"Configure Fields"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(21,"mat-card",1),m.Vb(22,"mat-card-header"),m.Vb(23,"mat-card-title"),m.Mc(24,"App Resources"),m.Ub(),m.Vb(25,"div",2),m.Vb(26,"mat-icon"),m.Mc(27,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Vb(28,"mat-card-content"),m.Mc(29," Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual views and such, and should not be used for App-Settings. "),m.Ub(),m.Vb(30,"mat-card-actions"),m.Vb(31,"button",3),m.dc("click",function(){return e.edit(e.eavConstants.contentTypes.resources)}),m.Vb(32,"mat-icon"),m.Mc(33,"edit"),m.Ub(),m.Vb(34,"span"),m.Mc(35,"Edit Resources"),m.Ub(),m.Ub(),m.Vb(36,"button",3),m.dc("click",function(){return e.config(e.eavConstants.contentTypes.resources)}),m.Vb(37,"mat-icon"),m.Mc(38,"dns"),m.Ub(),m.Vb(39,"span"),m.Mc(40,"Configure Fields"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(41,"div",0),m.Vb(42,"mat-card",1),m.Vb(43,"mat-card-header"),m.Vb(44,"mat-card-title"),m.Mc(45,"App Package Definition"),m.Ub(),m.Vb(46,"div",2),m.Vb(47,"mat-icon"),m.Mc(48,"redeem"),m.Ub(),m.Ub(),m.Ub(),m.Vb(49,"mat-card-content"),m.Mc(50," The app-package definition is important when exporting/importing this app. "),m.Ub(),m.Vb(51,"mat-card-actions"),m.Vb(52,"button",3),m.dc("click",function(){return e.edit(e.eavConstants.scopes.app.value)}),m.Vb(53,"mat-icon"),m.Mc(54,"edit"),m.Ub(),m.Vb(55,"span"),m.Mc(56,"Edit App Package Definition"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(57,"mat-card",1),m.Vb(58,"mat-card-header"),m.Vb(59,"mat-card-title"),m.Mc(60,"App Permissions"),m.Ub(),m.Vb(61,"div",2),m.Vb(62,"mat-icon"),m.Mc(63,"person"),m.Ub(),m.Ub(),m.Ub(),m.Vb(64,"mat-card-content"),m.Mc(65," Permissions give access to people to the entire app (all content-types / data), so use with care. "),m.Ub(),m.Vb(66,"mat-card-actions"),m.Vb(67,"button",4),m.dc("click",function(){return e.openPermissions()}),m.Vb(68,"mat-icon",5),m.Mc(69," person "),m.Ub(),m.Vb(70,"span"),m.Mc(71,"Edit Permissions"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(72,"div",0),m.Vb(73,"mat-card",1),m.Vb(74,"mat-card-header"),m.Vb(75,"mat-card-title"),m.Mc(76,"Export this entire App"),m.Ub(),m.Vb(77,"div",2),m.Vb(78,"mat-icon"),m.Mc(79,"cloud_download"),m.Ub(),m.Ub(),m.Ub(),m.Vb(80,"mat-card-content"),m.Mc(81," Create an app-package (zip) which can be installed in another portal. "),m.Ub(),m.Vb(82,"mat-card-actions"),m.Vb(83,"button",3),m.dc("click",function(){return e.exportApp()}),m.Vb(84,"mat-icon"),m.Mc(85,"cloud_download"),m.Ub(),m.Vb(86,"span"),m.Mc(87,"Export App"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(88,"mat-card",1),m.Vb(89,"mat-card-header"),m.Vb(90,"mat-card-title"),m.Mc(91,"Export or Import parts of this App"),m.Ub(),m.Vb(92,"div",2),m.Vb(93,"mat-icon"),m.Mc(94,"import_export"),m.Ub(),m.Ub(),m.Ub(),m.Vb(95,"mat-card-content"),m.Mc(96," Create an xml containing parts of the app, e.g. content and templates. Import parts from such an xml into this app. "),m.Ub(),m.Vb(97,"mat-card-actions"),m.Vb(98,"button",3),m.dc("click",function(){return e.exportParts()}),m.Vb(99,"mat-icon"),m.Mc(100,"cloud_download"),m.Ub(),m.Vb(101,"span"),m.Mc(102,"Export Parts"),m.Ub(),m.Ub(),m.Vb(103,"button",3),m.dc("click",function(){return e.importParts()}),m.Vb(104,"mat-icon"),m.Mc(105,"cloud_upload"),m.Ub(),m.Vb(106,"span"),m.Mc(107,"Import Parts"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(108,"div",0),m.Vb(109,"mat-card",1),m.Vb(110,"mat-card-header"),m.Vb(111,"mat-card-title"),m.Mc(112,"Experimental: App State Versioning"),m.Ub(),m.Vb(113,"div",2),m.Vb(114,"mat-icon"),m.Mc(115,"history_toggle_off"),m.Ub(),m.Ub(),m.Ub(),m.Vb(116,"mat-card-content"),m.Mc(117," Reset all app data to the state stored in the .data/app.xml. "),m.Ub(),m.Vb(118,"mat-card-actions"),m.Vb(119,"button",3),m.dc("click",function(){return e.exportAppXml()}),m.Vb(120,"mat-icon"),m.Mc(121,"save_alt"),m.Ub(),m.Vb(122,"span"),m.Mc(123,"Save state"),m.Ub(),m.Ub(),m.Vb(124,"button",3),m.dc("click",function(){return e.resetApp()}),m.Vb(125,"mat-icon"),m.Mc(126,"restore"),m.Ub(),m.Vb(127,"span"),m.Mc(128,"Restore state"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Qb(129,"hr",6),m.Vb(130,"div",0),m.Vb(131,"mat-card",1),m.Vb(132,"mat-card-header"),m.Vb(133,"mat-card-title"),m.Mc(134,"Site and Global Settings"),m.Ub(),m.Vb(135,"div",2),m.Vb(136,"mat-icon"),m.Mc(137,"settings"),m.Ub(),m.Ub(),m.Ub(),m.Vb(138,"mat-card-content"),m.Mc(139," Configure Site-wide and Global Settings. "),m.Ub(),m.Vb(140,"mat-card-actions"),m.Vb(141,"button",3),m.dc("click",function(){return e.openSystemSettings()}),m.Vb(142,"mat-icon"),m.Mc(143,"settings"),m.Ub(),m.Vb(144,"span"),m.Mc(145,"Go to System Settings"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Db(67),m.nc("disabled",!e.dialogSettings.Context.Enable.AppPermissions),m.Db(1),m.nc("matBadge",e.dialogSettings.Context.App.Permissions.Count?e.dialogSettings.Context.App.Permissions.Count:null))},directives:[qt.a,qt.d,qt.f,V.a,qt.c,qt.b,y.a,B.a],styles:[""]}),t}();function zt(t,e){1&t&&(m.Vb(0,"div",16),m.Vb(1,"mat-icon"),m.Mc(2,"info"),m.Ub(),m.Vb(3,"span"),m.Mc(4,"Info"),m.Ub(),m.Ub())}function Xt(t,e){if(1&t&&m.Qb(0,"app-getting-started",17),2&t){var i=m.hc(2).ngIf;m.nc("gettingStartedUrl",i.dialogSettings.Context.App.GettingStartedUrl)}}function Zt(t,e){1&t&&(m.Vb(0,"div",18),m.Vb(1,"mat-icon"),m.Mc(2,"menu"),m.Ub(),m.Vb(3,"span"),m.Mc(4,"Data"),m.Ub(),m.Ub())}function Ht(t,e){if(1&t&&m.Qb(0,"app-data",19),2&t){var i=m.hc(2).ngIf;m.nc("enablePermissions",i.dialogSettings.Context.Enable.AppPermissions)}}function Yt(t,e){1&t&&(m.Vb(0,"div",21),m.Vb(1,"mat-icon"),m.Mc(2,"filter_list"),m.Ub(),m.Vb(3,"span"),m.Mc(4,"Queries"),m.Ub(),m.Ub())}function $t(t,e){if(1&t&&m.Qb(0,"app-queries",19),2&t){var i=m.hc(3).ngIf;m.nc("enablePermissions",i.dialogSettings.Context.Enable.AppPermissions)}}function _t(t,e){1&t&&(m.Vb(0,"mat-tab"),m.Kc(1,Yt,5,0,"div",20),m.Kc(2,$t,1,1,"app-queries",10),m.Ub())}function te(t,e){1&t&&(m.Vb(0,"div",22),m.Vb(1,"mat-icon"),m.Mc(2,"layers"),m.Ub(),m.Vb(3,"span"),m.Mc(4,"Views"),m.Ub(),m.Ub())}function ee(t,e){if(1&t&&m.Qb(0,"app-views",23),2&t){var i=m.hc(2).ngIf;m.nc("enableCode",i.dialogSettings.Context.Enable.CodeEditor)("enablePermissions",i.dialogSettings.Context.Enable.AppPermissions)}}function ie(t,e){1&t&&(m.Vb(0,"div",26),m.Vb(1,"mat-icon"),m.Mc(2,"offline_bolt"),m.Ub(),m.Vb(3,"span"),m.Mc(4,"WebApi"),m.Ub(),m.Ub())}function ne(t,e){if(1&t&&m.Qb(0,"app-web-api",27),2&t){var i=m.hc(3).ngIf;m.nc("enableCode",i.dialogSettings.Context.Enable.CodeEditor)}}function oe(t,e){1&t&&(m.Vb(0,"mat-tab"),m.Kc(1,ie,5,0,"div",24),m.Kc(2,ne,1,1,"app-web-api",25),m.Ub())}function ae(t,e){1&t&&(m.Vb(0,"div",28),m.Vb(1,"mat-icon"),m.Mc(2,"settings_applications"),m.Ub(),m.Vb(3,"span"),m.Mc(4,"App"),m.Ub(),m.Ub())}function re(t,e){if(1&t&&m.Qb(0,"app-app-configuration",29),2&t){var i=m.hc(2).ngIf;m.nc("dialogSettings",i.dialogSettings)}}function se(t,e){if(1&t){var i=m.Wb();m.Vb(0,"mat-tab-group",6),m.dc("selectedTabChange",function(t){return m.Ac(i),m.hc(2).changeTab(t)}),m.Vb(1,"mat-tab"),m.Kc(2,zt,5,0,"div",7),m.Kc(3,Xt,1,1,"app-getting-started",8),m.Ub(),m.Vb(4,"mat-tab"),m.Kc(5,Zt,5,0,"div",9),m.Kc(6,Ht,1,1,"app-data",10),m.Ub(),m.Kc(7,_t,3,0,"mat-tab",11),m.Vb(8,"mat-tab"),m.Kc(9,te,5,0,"div",12),m.Kc(10,ee,1,2,"app-views",13),m.Ub(),m.Kc(11,oe,3,0,"mat-tab",11),m.Vb(12,"mat-tab"),m.Kc(13,ae,5,0,"div",14),m.Kc(14,re,1,1,"app-app-configuration",15),m.Ub(),m.Ub()}if(2&t){var n=m.hc().ngIf;m.nc("selectedIndex",n.tabIndex),m.Db(7),m.nc("ngIf",n.dialogSettings.Context.Enable.Query),m.Db(4),m.nc("ngIf",n.dialogSettings.Context.Enable.Query)}}function ce(t,e){if(1&t){var i=m.Wb();m.Vb(0,"div",1),m.Vb(1,"div",2),m.Vb(2,"div",3),m.Vb(3,"div"),m.Mc(4),m.Ub(),m.Vb(5,"button",4),m.dc("click",function(){return m.Ac(i),m.hc().closeDialog()}),m.Vb(6,"mat-icon"),m.Mc(7,"close"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Qb(8,"router-outlet"),m.Kc(9,se,15,3,"mat-tab-group",5),m.Ub()}if(2&t){var n=e.ngIf;m.Db(4),m.Oc("",null==n.dialogSettings?null:n.dialogSettings.Context.App.Name," Admin"),m.Db(5),m.nc("ngIf",n.dialogSettings&&null!=n.tabIndex)}}var le=function(){function t(t,e,i,b){var u=this;this.dialogRef=t,this.appDialogConfigService=e,this.router=i,this.route=b,this.defaultScope=d.a.scopes.default.value,this.dialogSettings$=new a.a(null),this.tabs$=new a.a(null),this.tabIndex$=Object(r.a)([this.tabs$,this.router.events.pipe(Object(c.a)(function(t){return t instanceof o.b}),Object(l.a)(function(){return u.route.snapshot.firstChild.url[0].path}),Object(p.a)(this.route.snapshot.firstChild.url[0].path))]).pipe(Object(l.a)(function(t){var e=Object(n.g)(t,2),i=e[0];if(null!=i)return i.indexOf(e[1])})),this.templateVars$=Object(r.a)([this.dialogSettings$,this.tabIndex$]).pipe(Object(l.a)(function(t){var e=Object(n.g)(t,2);return{dialogSettings:e[0],tabIndex:e[1]}})),this.subscription=new s.a}return t.prototype.ngOnInit=function(){this.fetchDialogSettings(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.dialogSettings$.complete(),this.tabs$.complete(),this.subscription.unsubscribe()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.changeTab=function(t){var e=this.tabs$.value[t.index];"data"===e&&(e="data/"+this.defaultScope),this.router.navigate([e],{relativeTo:this.route})},t.prototype.fetchDialogSettings=function(){var t=this;this.appDialogConfigService.getDialogSettings().subscribe(function(e){Object(u.a)(e.Context.App),t.dialogSettings$.next(e);var i=["home","data","queries","views","web-api","app"];e.Context.Enable.Query||(i=i.filter(function(t){return"queries"!==t&&"web-api"!==t})),t.tabs$.next(i)})},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(c.a)(function(t){return t instanceof o.b}),Object(p.a)(!!this.route.snapshot.firstChild.firstChild),Object(l.a)(function(){return!!t.route.snapshot.firstChild.firstChild}),Object(b.a)(),Object(c.a)(function(t){var e=Object(n.g)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchDialogSettings()}))},t.\u0275fac=function(e){return new(e||t)(m.Pb(h.f),m.Pb(f.a),m.Pb(o.c),m.Pb(o.a))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-app-administration-nav"]],decls:2,vars:3,consts:[["class","nav-component-wrapper","appToggleDebug","",4,"ngIf"],["appToggleDebug","",1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","matTooltip","Close dialog",3,"click"],["class","mat-tab-group-max-height","dynamicHeight","","color","accent",3,"selectedIndex","selectedTabChange",4,"ngIf"],["dynamicHeight","","color","accent",1,"mat-tab-group-max-height",3,"selectedIndex","selectedTabChange"],["class","mat-tab-label-box","matTooltip","App Info",4,"matTabLabel"],[3,"gettingStartedUrl",4,"matTabContent"],["class","mat-tab-label-box","matTooltip","Data / Content",4,"matTabLabel"],[3,"enablePermissions",4,"matTabContent"],[4,"ngIf"],["class","mat-tab-label-box","matTooltip","Views / Templates",4,"matTabLabel"],[3,"enableCode","enablePermissions",4,"matTabContent"],["class","mat-tab-label-box","matTooltip","App Settings",4,"matTabLabel"],[3,"dialogSettings",4,"matTabContent"],["matTooltip","App Info",1,"mat-tab-label-box"],[3,"gettingStartedUrl"],["matTooltip","Data / Content",1,"mat-tab-label-box"],[3,"enablePermissions"],["class","mat-tab-label-box","matTooltip","Queries / Visual Query Designer",4,"matTabLabel"],["matTooltip","Queries / Visual Query Designer",1,"mat-tab-label-box"],["matTooltip","Views / Templates",1,"mat-tab-label-box"],[3,"enableCode","enablePermissions"],["class","mat-tab-label-box","matTooltip","WebApi",4,"matTabLabel"],[3,"enableCode",4,"matTabContent"],["matTooltip","WebApi",1,"mat-tab-label-box"],[3,"enableCode"],["matTooltip","App Settings",1,"mat-tab-label-box"],[3,"dialogSettings"]],template:function(t,e){1&t&&(m.Kc(0,ce,10,2,"div",0),m.ic(1,"async")),2&t&&m.nc("ngIf",m.jc(1,1,e.templateVars$))},directives:[g.n,v.a,h.g,y.a,C.a,V.a,o.e,U.c,U.a,U.d,U.b,S,st,vt,Ot,Kt,Lt],pipes:[g.b],styles:[""]}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.03.00/ng-edit/app-administration-nav-component.68fc8c774593ce7fc43b.js.map