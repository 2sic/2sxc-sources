"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_code-editor_code-editor_module_ts-projects_eav-ui_src_app_shared_comp-2b2737"],{5530:(D,E,r)=>{r.d(E,{_:()=>y,s:()=>x});var p=r(9736),I=r(2611),O=r(9039),w=r(4860),M=r(6232);const y="admin/type/";let x=(()=>{class a{constructor(u,C,h){this.http=u,this.context=C,this.dnnContext=h}apiUrl(u){return this.dnnContext.$2sxc.http.apiUrl(u)}retrieveContentType(u){return this.http.get(this.apiUrl(y+"get"),{params:{appId:this.context.appId.toString(),contentTypeId:u}})}retrieveContentTypes(u){return this.http.get(this.apiUrl(y+"list"),{params:{appId:this.context.appId.toString(),scope:u}})}getScopes(){return this.http.get(this.apiUrl(y+"scopes"),{params:{appId:this.context.appId.toString()}}).pipe((0,p.U)(u=>Object.keys(u).map(h=>({name:u[h],value:h}))))}save(u){return this.http.post(this.apiUrl(y+"save"),u,{params:{appid:this.context.appId.toString()}})}delete(u){return this.http.delete(this.apiUrl(y+"delete"),{params:{appid:this.context.appId.toString(),staticName:u.StaticName}})}import(u){const C=new FormData;for(const h of u)C.append("File",h);return this.http.post(this.apiUrl(y+"import"),C,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(u){return this.http.post(this.apiUrl(y+"addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:u}})}static#t=this.\u0275fac=function(C){return new(C||a)(O.LFG(w.eN),O.LFG(I._),O.LFG(M._y))};static#e=this.\u0275prov=O.Yz7({token:a,factory:a.\u0275fac})}return a})()},9681:(D,E,r)=>{r.r(E),r.d(E,{CodeEditorModule:()=>se,translateLoaderFactoryCode:()=>nt});var p=r(6575),I=r(895),O=r(257),w=r(6861),M=r(6515),y=r(3910),x=r(9409),a=r(1916),l=r(7220),u=r(2380),C=r(2611),h=r(7138),g=r(8206),f=r(3739),m=r(91),b=r(8071),Z=r(3839),L=r(4300),N=r(5584),j=r(1891),R=r(4980),V=r(9736),K=r(9016),A=r(926),it=r(9097),Y=r(6115),t=r(9039);function ot(o,v){if(1&o&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.AsE('"',e.snackBarData.fileName,'" also has a code-behind file "',e.snackBarData.codeFile,'".')}}function st(o,v){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(' You are editing "',e.snackBarData.edition,'" edition. ')}}function rt(o,v){1&o&&(t.ynx(0),t._uU(1," You may be editing an edition which is not the one you see. "),t.BQk())}function at(o,v){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,st,2,1,"ng-container",1),t._uU(2),t.YNc(3,rt,2,0,"ng-container",1),t._uU(4," See "),t.TgZ(5,"a",4),t._uU(6,"docs"),t.qZA(),t._uU(7,". "),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.snackBarData.edition),t.xp6(1),t.AsE(" There are ",e.snackBarData.otherEditions,' other editions of "',e.snackBarData.fileName,'". '),t.xp6(1),t.Q6J("ngIf",!e.snackBarData.edition)}}function ct(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openCodeBehind())}),t._uU(1," Open code-behind file "),t.qZA()}}let pt=(()=>{class o{constructor(e,n){this.snackRef=e,this.snackBarData=n}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(x.OX),t.Y36(x.qD))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[4,"ngIf"],[1,"actions"],["mat-button","","color","primary",3,"click",4,"ngIf"],["href","https://go.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,ot,4,2,"ng-container",1)(2,at,8,4,"div",1),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,ct,2,0,"button",3),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",i.snackBarData.codeFile),t.xp6(1),t.Q6J("ngIf",i.snackBarData.otherEditions),t.xp6(2),t.Q6J("ngIf",i.snackBarData.codeFile))},dependencies:[p.O5,I.lW],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]})}return o})();const W={Templates:"Templates",Snippets:"Snippets"};var lt=r(3704),dt=r(6191),gt=r(5807),_t=r(4860),ut=r(6232);let G=(()=>{class o{constructor(e,n,i){this.http=e,this.dnnContext=n,this.translate=i}getTooltips(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/Code/InlineHelp"),{params:{language:e}})}getSnippets(e){return this.http.get("../ng-assets/snippets.json.js").pipe((0,V.U)(n=>{const i=this.filterAwayNotNeededSnippetsList(n.snippets,e),s=this.extractInputTypeSnippets(i),c=this.initSnippetsWithConfig(s.standardArray,e,s.inputTypeSnippets);return{list:s.standardArray,sets:c}}))}filterAwayNotNeededSnippetsList(e,n){const i=["@","["],s=_=>_.Type.indexOf("Razor")>-1?0:1,c=[];for(const _ of e){const d=i.indexOf(_.set[0]);(-1===d||d===s(n))&&(d===s(n)&&(_.set=_.set.substring(1)),c.push(_))}return c}extractInputTypeSnippets(e){const n=[],i=[];for(const _ of e)"\\"===_.set[0]?(_.set=_.set.substring(1),i.push(_)):n.push(_);return{standardArray:n,inputTypeSnippets:this.catalogInputTypeSnippets(i)}}catalogInputTypeSnippets(e){const n={};for(const i of e)void 0===n[i.subset]&&(n[i.subset]=[]),n[i.subset].push(i);return n}initSnippetsWithConfig(e,n,i){const s=this.makeTree(e);return s.Content=Object.assign({},s.Content,{Fields:{},PresentationFields:{}}),n.TypeContent&&this.loadContentType(s.Content.Fields,n.TypeContent,"Content",n,i),n.TypeContentPresentation&&this.loadContentType(s.Content.PresentationFields,n.TypeContentPresentation,"Content.Presentation",n,i),n.HasList?(s.List=Object.assign({},s.List,{Fields:{},PresentationFields:{}}),n.TypeList&&this.loadContentType(s.List.Fields,n.TypeList,"Header",n,i),n.TypeListPresentation&&this.loadContentType(s.List.PresentationFields,n.TypeListPresentation,"Header.Presentation",n,i)):delete s.List,n.HasApp&&(s.App.Resources={},s.App.Settings={},this.loadContentType(s.App.Resources,"App-Resources","App.Resources",n,i),this.loadContentType(s.App.Settings,"App-Settings","App.Settings",n,i)),s}makeTree(e){const n={};for(const i of e){void 0===n[i.set]&&(n[i.set]={}),void 0===n[i.set][i.subset]&&(n[i.set][i.subset]=[]);const s={key:i.name,label:this.label(i.set,i.subset,i.name),snip:i.content,help:i.help||this.help(i.set,i.subset,i.name),links:this.linksList(i.links)};n[i.set][i.subset].push(s)}return n}label(e,n,i){const s=this.getHelpKey(e,n,i,".Key");let c=this.translate.instant(s);return c===s&&(c=i),c}getHelpKey(e,n,i,s){return"SourceEditorSnippets."+e+"."+n+"."+i+s}help(e,n,i){const s=this.getHelpKey(e,n,i,".Help");let c=this.translate.instant(s);return c===s&&(c=""),c}linksList(e){if(!e)return null;const n=[],i=e.split("\n");for(const s of i){const c=s.split(":");if(3===c.length){const _={name:c[0].trim(),url:c[1].trim()+":"+c[2].trim()};n.push(_)}}return 0===n.length?null:n}loadContentType(e,n,i,s,c){this.getFields(s.AppId,n).subscribe(_=>{for(const d of _){const T=d.StaticName;e[T]={key:T,label:T,snip:this.valuePlaceholder(i,T,s),help:d.Metadata.merged.Notes||" ("+d.Type.toLowerCase()+") "};const S=(0,lt.Z)(e[T]);this.attachSnippets(e,i,T,d.InputType,S,c)}if(_.length){const d=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let T=0;T<d.length;T++)e[d[T]]={key:d[T],label:d[T],snip:this.valuePlaceholder(i,d[T],s),help:this.translate.instant("SourceEditorSnippets.StandardFields."+d[T]+".Help")}}})}valuePlaceholder(e,n,i){return i.Type.indexOf("Razor")>-1?"@"+e+"."+n:"["+e.replace(".",":")+":"+n+"]"}getFields(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(gt.jt),{params:{appid:e.toString(),staticName:n}}).pipe((0,V.U)(i=>{i=i.filter(s=>s.Type!==dt.Q.Empty);for(const s of i){if(!s.Metadata)continue;const c=s.Metadata;c.merged={...c.All,...c[s.Type],...c[s.InputType]}}return i}))}attachSnippets(e,n,i,s,c,_){let d=_[s];if(s.indexOf("-")){const S=s.substring(0,s.indexOf("-"));if(S){const P=_[S];P&&(d=d?d.concat(P):P)}}if(!d)return;void 0===e[i].more&&(e[i].more={});const T=e[i].more;for(let S=0;S<d.length;S++)try{T[i+"-"+d[S].name]=Object.assign({},c,{key:i+" - "+d[S].name,label:d[S].name,snip:this.localizeGenericSnippet(d[S].content,n,i),collapse:!0})}finally{}}localizeGenericSnippet(e,n,i){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+n+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+i+"$2")}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(_t.eN),t.LFG(ut._y),t.LFG(a.sK))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})();var z=r(1485),X=r(6480),H=r(131),mt=r(40),Q=r(9498),ft=r(9424),vt=r(6537);let Ct=(()=>{class o{transform(e){if(null!=e)return Array.isArray(e)?e:Object.values(e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275pipe=t.Yjl({name:"objectToArray",type:o,pure:!0})}return o})();function xt(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(5);return t.KtG(s.toggleMore(i.key))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(1),t.hij(" ",n.toggledMores.includes(e.key)?"more_vert":"more_horiz"," ")}}function Tt(o,v){if(1&o&&(t.TgZ(0,"div")(1,"a",15),t._uU(2),t.qZA()()),2&o){const e=v.$implicit;t.xp6(1),t.Q6J("href",e.url,t.LSH),t.xp6(1),t.Oqu(e.name)}}function yt(o,v){if(1&o&&(t.TgZ(0,"div",13),t._UZ(1,"div",14),t.ALo(2,"safeHtml"),t.YNc(3,Tt,3,2,"div",1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,2,e.help),t.oJD),t.xp6(2),t.Q6J("ngForOf",e.links)}}function St(o,v){if(1&o&&(t.TgZ(0,"div")(1,"a",15),t._uU(2),t.qZA()()),2&o){const e=v.$implicit;t.xp6(1),t.Q6J("href",e.url,t.LSH),t.xp6(1),t.Oqu(e.name)}}function It(o,v){if(1&o&&(t.TgZ(0,"div",18),t._UZ(1,"div",14),t.ALo(2,"safeHtml"),t.YNc(3,St,3,2,"div",1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,2,e.help),t.oJD),t.xp6(2),t.Q6J("ngForOf",e.links)}}function wt(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",7)(2,"div",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(7);return t.KtG(c.addSnippet(s.snip))}),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(7);return t.KtG(c.toggleInfo(s.key))}),t._uU(5,"info"),t.qZA()(),t.YNc(6,It,4,4,"div",17),t.qZA()}if(2&o){const e=v.$implicit,n=t.oxw(7);t.xp6(2),t.Q6J("tippy",e.snip),t.xp6(1),t.hij(" ",e.label," "),t.xp6(3),t.Q6J("ngIf",n.toggledInfos.includes(e.key))}}function bt(o,v){if(1&o&&(t.ynx(0),t.YNc(1,wt,7,3,"div",1),t.ALo(2,"objectToArray"),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.more))}}function Ot(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(5);return t.KtG(c.addSnippet(s.snip))}),t._uU(3),t.qZA(),t.YNc(4,xt,2,1,"mat-icon",9),t.TgZ(5,"mat-icon",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(5);return t.KtG(c.toggleInfo(s.key))}),t._uU(6,"info"),t.qZA()(),t.YNc(7,yt,4,4,"div",11)(8,bt,3,3,"ng-container",3),t.qZA()}if(2&o){const e=v.$implicit,n=t.oxw(5);t.xp6(2),t.Q6J("tippy",e.snip),t.xp6(1),t.hij(" ",e.label," "),t.xp6(1),t.Q6J("ngIf",e.more),t.xp6(3),t.Q6J("ngIf",n.toggledInfos.includes(e.key)),t.xp6(1),t.Q6J("ngIf",n.toggledMores.includes(e.key))}}function Mt(o,v){if(1&o&&(t.ynx(0),t.YNc(1,Ot,9,5,"div",5),t.ALo(2,"objectToArray"),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function Pt(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",4),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.toggleFolder(s.key))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,Mt,3,3,"ng-container",3),t.qZA()}if(2&o){const e=v.$implicit,n=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("tippy",t.lcZ(2,4,"SourceEditorSnippets."+n.key+"."+e.key+".Help")),t.xp6(3),t.hij(" ",i.toggledFolders.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(t.lcZ(7,6,"SourceEditorSnippets."+n.key+"."+e.key+".Title")),t.xp6(2),t.Q6J("ngIf",i.toggledFolders.includes(e.key))}}function Et(o,v){if(1&o&&(t.ynx(0),t.YNc(1,Pt,9,8,"div",1),t.ALo(2,"keyvalue"),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function At(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",2),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleSection(s.key))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,Et,3,3,"ng-container",3),t.qZA()}if(2&o){const e=v.$implicit,n=t.oxw();t.xp6(1),t.Q6J("tippy",t.lcZ(2,4,"SourceEditorSnippets."+e.key+".Help")),t.xp6(3),t.hij(" ",n.toggledSections.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(t.lcZ(7,6,"SourceEditorSnippets."+e.key+".Title")),t.xp6(2),t.Q6J("ngIf",n.toggledSections.includes(e.key))}}let kt=(()=>{class o{constructor(){this.insertSnippet=new t.vpe,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){A.iX.toggleInArray(e,this.toggledSections)}toggleFolder(e){A.iX.toggleInArray(e,this.toggledFolders)}toggleInfo(e){A.iX.toggleInArray(e,this.toggledInfos)}toggleMore(e){A.iX.toggleInArray(e,this.toggledMores)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:3,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],[4,"ngFor","ngForOf"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],[4,"ngIf"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],["class","snippet",4,"ngFor","ngForOf"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750",3,"click",4,"ngIf"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help",4,"ngIf"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more",4,"ngIf"],[1,"snippet-help","snippet-help-more"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,At,9,8,"div",1),t.ALo(2,"keyvalue"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,i.snippets)))},dependencies:[H.E,Q.$,p.sg,p.O5,M.Hw,O.wG,vt.z,p.Nd,a.X$,Ct],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]})}return o})();function q(o){if(!o)return[];const v=[];for(const e of o){let n=v;const i=e.Path.split("/"),s=i[i.length-1];let c="";for(let _=0;_<i.length;_++){const d=i[_];c+=_?`/${d}`:d;const T=n.find(S=>S.name===d);if(T)n=T.children;else{const S={depth:_,name:d,pathFromRoot:c,isShared:e.Shared,isFolder:d!==s,...d!==s&&{children:[]}};n.push(S),n=S.children}}}return v}var $=r(8128);let Dt=(()=>{class o{constructor(e){this.sanitizer=e}transform(e,n){let i;return i=n?8*e:0===e?8:8*e+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${i}px;`)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(X.H7,16))};static#e=this.\u0275pipe=t.Yjl({name:"depthPadding",type:o,pure:!0})}return o})(),Zt=(()=>{class o{transform(e){return null==e||e.sort((n,i)=>n.isFolder<i.isFolder?1:n.isFolder>i.isFolder?-1:0),e}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275pipe=t.Yjl({name:"sortItems",type:o,pure:!0})}return o})();function Lt(o,v){1&o&&t.GkF(0)}const tt=o=>({item:o});function Nt(o,v){if(1&o&&(t.ynx(0),t.YNc(1,Lt,1,0,"ng-container",7),t.BQk()),2&o){const e=v.$implicit;t.oxw();const n=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,tt,e))}}const Jt=o=>({active:o});function $t(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().item,s=t.oxw();return t.KtG(s.openTemplate(i.pathFromRoot,i.isShared))}),t.ALo(1,"depthPadding"),t._uU(2),t.qZA()}if(2&o){const e=t.oxw().item,n=t.oxw();t.Akn(t.xi3(1,5,e.depth,e.isFolder)),t.Q6J("ngClass",t.VKq(8,Jt,n.isToggled(e.pathFromRoot,e.isShared)))("tippy",e.name),t.xp6(2),t.hij(" ",e.name," ")}}function Ut(o,v){1&o&&t.GkF(0)}function jt(o,v){if(1&o&&(t.ynx(0),t.YNc(1,Ut,1,0,"ng-container",7),t.BQk()),2&o){const e=v.$implicit;t.oxw(4);const n=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,tt,e))}}function Rt(o,v){if(1&o&&(t.ynx(0),t.YNc(1,jt,2,4,"ng-container",1),t.ALo(2,"sortItems"),t.BQk()),2&o){const e=t.oxw(2).item;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.children))}}const Vt=o=>({"app-shared-root":o});function Ht(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().item,s=t.oxw();return t.KtG(s.toggleItem(i.pathFromRoot,i.isShared))}),t.ALo(2,"depthPadding"),t.TgZ(3,"div",12)(4,"mat-icon"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"div",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().item,s=t.oxw();return t.KtG(s.addFile(i.pathFromRoot,i.isShared))}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()()(),t.YNc(11,Rt,3,3,"ng-container",9),t.qZA()}if(2&o){const e=t.oxw().item,n=t.oxw();t.xp6(1),t.Akn(t.xi3(2,7,e.depth+1,e.isFolder)),t.Q6J("ngClass",t.VKq(10,Vt,e.depth<0)),t.xp6(2),t.Q6J("tippy",e.name),t.xp6(2),t.hij(" ",n.isToggled(e.pathFromRoot,e.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(e.name),t.xp6(4),t.Q6J("ngIf",n.isToggled(e.pathFromRoot,e.isShared))}}function Qt(o,v){if(1&o&&t.YNc(0,$t,3,10,"div",8)(1,Ht,12,12,"div",9),2&o){const e=v.item;t.Q6J("ngIf",!e.isFolder),t.xp6(1),t.Q6J("ngIf",e.isFolder)}}let Bt=(()=>{class o{constructor(){this.openView=new t.vpe,this.createTemplate=new t.vpe,this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){if(null!=e.templates&&(this.tree=function Ft(o){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:q(o.filter(e=>!e.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:q(o.filter(e=>e.Shared))}]}(this.templates)),null!=e.view){const n=e.view?.previousValue;n&&this.toggleItem(n.FileName,n.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}isToggled(e,n){return(n?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,n){this.openView.emit({key:e,shared:n})}toggleItem(e,n){A.iX.toggleInArray(e,n?this.toggledItemsShared:this.toggledItemsApp)}addFile(e,n){this.createTemplate.emit({folder:e,isShared:n})}showFileInTree(e,n){if(null==e)return;const i=n?this.toggledItemsShared:this.toggledItemsApp;if(i.includes(e))return;const s=["",...e.split("/")];let c="";for(const _ of s)c=c?`${c}/${_}`:_,!i.includes(c)&&this.toggleItem(c,n)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[t.TTD],decls:18,vars:4,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[4,"ngFor","ngForOf"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file","tippyPlacement","left",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy","click",4,"ngIf"],[4,"ngIf"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"ngClass","click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div"),t.YNc(2,Nt,2,4,"ng-container",1),t.ALo(3,"sortItems"),t.YNc(4,Qt,2,2,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(6,"div",3)(7,"button",4)(8,"mat-icon"),t._uU(9,"add"),t.qZA()(),t.TgZ(10,"mat-menu",null,5)(12,"button",6),t.NdJ("click",function(){return i.addFile("",!1)}),t.TgZ(13,"span"),t._uU(14,"App"),t.qZA()(),t.TgZ(15,"button",6),t.NdJ("click",function(){return i.addFile("",!0)}),t.TgZ(16,"span"),t._uU(17,"Shared (global)"),t.qZA()()()()()),2&n){const s=t.MAs(11);t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,2,i.tree)),t.xp6(5),t.Q6J("matMenuTriggerFor",s)}},dependencies:[H.E,Q.$,p.mk,p.sg,p.O5,p.tP,I.RK,M.Hw,$.VK,$.OP,$.p6,Dt,Zt],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]})}return o})();function Kt(o,v){1&o&&(t.TgZ(0,"mat-icon",21),t._uU(1,"share"),t.qZA())}function Yt(o,v){1&o&&(t.TgZ(0,"mat-icon",22),t._uU(1,"circle"),t.qZA())}function Wt(o,v){1&o&&t._UZ(0,"mat-spinner",23)}const Gt=(o,v,e)=>({active:o,modified:v,loading:e});function zt(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.openView(s.viewKey))}),t.TgZ(1,"div",14),t.YNc(2,Kt,2,0,"mat-icon",15),t.TgZ(3,"span",16),t._uU(4),t.qZA()(),t.TgZ(5,"div",17),t.YNc(6,Yt,2,0,"mat-icon",18)(7,Wt,1,0,"mat-spinner",19),t.TgZ(8,"mat-icon",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.closeEditor(s.viewKey))}),t._uU(9,"close"),t.qZA()()()}if(2&o){const e=v.$implicit;t.Q6J("ngClass",t.kEZ(6,Gt,e.isActive,e.isModified,e.isLoading)),t.xp6(1),t.Q6J("tippy",e.label),t.xp6(1),t.Q6J("ngIf",e.viewKey.shared),t.xp6(2),t.Oqu(e.label),t.xp6(2),t.Q6J("ngIf",e.isModified),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function Xt(o,v){if(1&o&&(t.TgZ(0,"div",11),t.YNc(1,zt,10,10,"div",12),t.qZA()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e.tabs)}}function qt(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"app-monaco-editor",24),t.NdJ("valueChanged",function(i){t.CHM(e);const s=t.oxw().ngIf,c=t.oxw();return t.KtG(c.codeChanged(i,s.viewKey))}),t.qZA()}if(2&o){const e=t.oxw().ngIf,n=t.oxw();t.Q6J("filename",e.view.FileName)("value",e.view.Code)("options",n.monacoOptions)("snippets",e.editorSnipps)("tooltips",e.tooltips)("autoFocus",!0)}}function te(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.save())}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA()()}}const ee=o=>({"sxc-dark":o}),et=o=>({active:o});function ne(o,v){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleExplorer(i.Explorers.Templates))}),t.TgZ(3,"mat-icon"),t._uU(4,"file_copy"),t.qZA()(),t.TgZ(5,"div",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleExplorer(i.Explorers.Snippets))}),t.TgZ(6,"mat-icon"),t._uU(7,"code"),t.qZA()()(),t.TgZ(8,"app-code-templates",5),t.NdJ("openView",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.openView(i))})("createTemplate",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.createTemplate(i))}),t.qZA(),t.TgZ(9,"app-code-snippets",6),t.NdJ("insertSnippet",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.insertSnippet(i))}),t.qZA(),t.TgZ(10,"div",7),t.YNc(11,Xt,2,1,"div",8)(12,qt,1,6,"app-monaco-editor",9),t.qZA(),t.YNc(13,te,3,0,"button",10),t.qZA()}if(2&o){const e=v.ngIf,n=t.oxw();t.Q6J("ngClass",t.VKq(11,ee,"2sxc-dark"===n.monacoOptions.theme)),t.xp6(2),t.Q6J("ngClass",t.VKq(13,et,n.activeExplorer===n.Explorers.Templates)),t.xp6(3),t.Q6J("ngClass",t.VKq(15,et,n.activeExplorer===n.Explorers.Snippets)),t.xp6(3),t.Q6J("hidden",n.activeExplorer!==n.Explorers.Templates)("view",e.view)("templates",e.templates),t.xp6(1),t.Q6J("hidden",n.activeExplorer!==n.Explorers.Snippets)("snippets",e.explorerSnipps),t.xp6(2),t.Q6J("ngIf",e.tabs.length>0),t.xp6(1),t.Q6J("ngIf",e.view),t.xp6(1),t.Q6J("ngIf",e.activeView)}}const ie=[{path:"",component:(()=>{class o extends it.f{constructor(e,n,i,s,c,_,d,T,S){super(),this.context=e,this.route=n,this.snackBar=i,this.sourceService=s,this.snippetsService=c,this.zone=_,this.titleService=d,this.dialog=T,this.viewContainerRef=S,this.Explorers=W,this.activeExplorer=W.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2,fixedOverflowWidgets:!0},this.context.init(this.route);const P=JSON.parse(sessionStorage.getItem(Y.kF)),F="true"===sessionStorage.getItem(Y.PH);P.forEach(k=>{k.Path.startsWith("/")&&(k.Path=k.Path.substring(1)),k.IsShared??=F}),this.urlItems=P}ngOnInit(){this.templates$=new b.X([]);const e=this.urlItems.map(n=>({key:n.EntityId?.toString()??n.Path,shared:n.IsShared}));this.activeView$=new b.X(e[0]),this.openViews$=new b.X(e),this.viewInfos$=new b.X([]),this.attachListeners(),this.sourceService.getAll().subscribe(n=>{this.templates$.next(n)}),this.subscription.add((0,Z.a)([this.templates$,this.openViews$]).subscribe(([n,i])=>{if(0===n.length)return;let s=this.viewInfos$.value;const c=i.filter(_=>!s.some(d=>A.iX.objectsEqual(d.viewKey,_)));0!==c.length&&((0,L.D)(c.map(_=>{const d={viewKey:_};s=[...s,d];const T=this.sourceService.get(_.key,_.shared,this.urlItems).pipe((0,N.B)()),S=T.pipe((0,j.w)(F=>this.snippetsService.getSnippets(F))),P=T.pipe((0,j.w)(F=>this.snippetsService.getTooltips(F.Extension.substring(1))));return(0,L.D)([(0,R.of)(_),T,S,P])})).subscribe(_=>{let d=this.viewInfos$.value;_.forEach(([T,S,P,F])=>{const k=d.findIndex(J=>A.iX.objectsEqual(J.viewKey,T));if(k<0)return;const U={viewKey:T,view:S,explorerSnipps:P.sets,editorSnipps:P.list,tooltips:F,savedCode:S.Code};d=[...d.slice(0,k),U,...d.slice(k+1)],this.showCodeAndEditionWarnings(T,S,n)}),this.viewInfos$.next(d)}),this.viewInfos$.next(s))})),this.subscription.add((0,Z.a)([this.activeView$,this.viewInfos$]).subscribe(([n,i])=>{const s=i.find(T=>A.iX.objectsEqual(T.viewKey,n)),c="Code Editor",_=null==s?c:`${s.view?.FileName} - ${c}`;_!==this.titleService.getTitle()&&this.titleService.setTitle(_)})),this.viewModel$=(0,Z.a)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,V.U)(([n,i,s,c])=>{const _=s.map(S=>{const P=c.find(k=>A.iX.objectsEqual(k.viewKey,S));return{viewKey:S,label:P?.view?.FileName??S.key,isActive:A.iX.objectsEqual(S,i),isModified:P?.view?.Code!==P?.savedCode,isLoading:null==P?.view}}),d=c.find(S=>A.iX.objectsEqual(S.viewKey,i));return{activeView:i,tabs:_,viewKey:d?.viewKey,view:d?.view,templates:n,explorerSnipps:d?.explorerSnipps,editorSnipps:d?.editorSnipps,tooltips:d?.tooltips}}))}ngOnDestroy(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),super.ngOnDestroy()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){const n={folder:e.folder,global:e.isShared,purpose:"api"===e.folder||e.folder?.startsWith("api/")?"Api":void 0};this.dialog.open(l.UH,{autoFocus:!1,data:n,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{s&&this.sourceService.create(s.name,e.isShared,s.templateKey).subscribe(()=>{this.sourceService.getAll().subscribe(c=>{this.templates$.next(c)})})})}insertSnippet(e){this.monacoEditorRef?.insertSnippet(e)}codeChanged(e,n){let i=this.viewInfos$.value;const s=i.findIndex(d=>A.iX.objectsEqual(d.viewKey,n)),c=i[s],_={...c,view:{...c.view,Code:e}};i=[...i.slice(0,s),_,...i.slice(s+1)],this.viewInfos$.next(i)}openView(e){e=this.viewInfos$.value.find(s=>!A.iX.objectsEqual(s.viewKey,e)&&s.view?.FileName===e.key&&s.view?.IsShared===e.shared)?.viewKey??e,A.iX.objectsEqual(this.activeView$.value,e)||this.activeView$.next(e);const i=this.openViews$.value;if(!i.some(s=>A.iX.objectsEqual(s,e))){const s=[...i,e];this.openViews$.next(s)}}closeEditor(e){const n=this.openViews$.value,i=n.filter(c=>!A.iX.objectsEqual(c,e)),s=this.activeView$.value;if(A.iX.objectsEqual(s,e)){const c=n[n.findIndex(_=>A.iX.objectsEqual(_,s))-1]??i[0];this.activeView$.next(c)}this.openViews$.next(i)}save(e){e??=this.activeView$.value;const n=this.viewInfos$.value.find(s=>A.iX.objectsEqual(s.viewKey,e));if(null==n?.view)return;this.snackBar.open("Saving...");const i=n.view.Code;this.sourceService.save(e.key,e.shared,n.view,this.urlItems).subscribe({next:s=>{if(!s)return void this.snackBar.open("Failed",null,{duration:2e3});let c=[...this.viewInfos$.value];const _=c.findIndex(S=>A.iX.objectsEqual(S.viewKey,e));if(_<0)return;const T={...c[_],savedCode:i};c=[...c.slice(0,_),T,...c.slice(_+1)],this.viewInfos$.next(c),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>{this.snackBar.open("Failed",null,{duration:2e3})}})}showCodeAndEditionWarnings(e,n,i){const s=n.FileName,c=s.indexOf("/")>-1?s.lastIndexOf("/")+1:0,_=0===c?"":s.substring(0,c),d=s.substring(c),S=d.substring(0,d.length-n.Extension.length)+".code"+n.Extension,P=i.find(k=>k.Path===_+S&&k.Shared===n.IsShared),F=i.filter(k=>k.Path.endsWith(d)&&k.Shared===n.IsShared).length-1;if(P||F){const k={fileName:d,codeFile:P?.Path,edition:this.urlItems.find(J=>J.EntityId?.toString()===e.key&&J.IsShared===n.IsShared&&J.Path===n.FileName)?.Edition,otherEditions:F,openCodeBehind:!1},U=this.snackBar.openFromComponent(pt,{data:k,duration:1e4});U.onAction().subscribe(()=>{U.containerInstance.snackBarConfig.data.openCodeBehind&&this.openView({key:P?.Path,shared:P?.Shared})})}}attachListeners(){this.zone.runOutsideAngular(()=>{this.subscription.add((0,K.R)(window,"beforeunload").subscribe(e=>{this.viewInfos$.value.some(i=>null!=i.view&&i.view.Code!==i.savedCode)&&(e.preventDefault(),e.returnValue="")})),this.subscription.add((0,K.R)(window,"keydown").subscribe(e=>{83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.zone.run(()=>{this.save()}))}))})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(C._),t.Y36(m.gz),t.Y36(x.ux),t.Y36(z.t),t.Y36(G),t.Y36(t.R0b),t.Y36(X.Dx),t.Y36(w.uw),t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-code-editor"]],viewQuery:function(n,i){if(1&n&&t.Gf(u.T,5),2&n){let s;t.iGM(s=t.CRH())&&(i.monacoEditorRef=s.first)}},features:[t.qOj],decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",3,"ngClass",4,"ngIf"],["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates","openView","createTemplate"],[3,"hidden","snippets","insertSnippet"],[1,"editor-group"],["class","tabs-container fancy-scrollbar-dark",4,"ngIf"],[3,"filename","value","options","snippets","tooltips","autoFocus","valueChanged",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click",4,"ngIf"],[1,"tabs-container","fancy-scrollbar-dark"],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tab",3,"ngClass","click"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],["class","icon-shared",4,"ngIf"],[1,"tab-label"],[1,"tab-actions-container"],["class","tab-action icon-modified","fontSet","material-icons",4,"ngIf"],["class","spinner","mode","indeterminate","diameter","14","color","white",4,"ngIf"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[1,"icon-shared"],["fontSet","material-icons",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],[3,"filename","value","options","snippets","tooltips","autoFocus","valueChanged"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(n,i){1&n&&(t.YNc(0,ne,14,17,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.viewModel$))},dependencies:[H.E,mt.D,Q.$,p.mk,p.sg,p.O5,I.cs,M.Hw,ft.T,y.Ou,kt,Bt,p.Ov],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid rgb(37,37,38);background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-mdc-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]})}return o})()}];let oe=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(ie),m.Bz]})}return o})();function nt(o){return new g.M(o,"./i18n/code-editor.",`.js?${window.sxcVersion}`)}let se=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({providers:[C._,z.t,G,a.sK],imports:[oe,h.q,p.ez,w.Is,I.ot,M.Ps,x.ZX,O.si,$.Tx,a.aw.forChild((0,f.f)(nt)),u.n,y.Cq,l.qH]})}return o})()},5807:(D,E,r)=>{r.d(E,{Mr:()=>u,jt:()=>a});var p=r(9736),I=r(5530),O=r(2611),w=r(9039),M=r(4860),y=r(6232);const x="admin/field/",a="admin/field/all",l="admin/field/GetSharedFields";let u=(()=>{class C{constructor(g,f,m){this.http=g,this.context=f,this.dnnContext=m}apiUrl(g){return this.dnnContext.$2sxc.http.apiUrl(g)}typeListRetrieve(){return this.http.get(this.apiUrl(x+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(x+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,p.U)(g=>g.map(m=>({dataType:m.Type.substring(0,m.Type.indexOf("-")),inputType:m.Type,label:m.Label,description:m.Description,isDefault:m.IsDefault,isObsolete:m.IsObsolete,isRecommended:m.IsRecommended,obsoleteMessage:m.ObsoleteMessage,icon:m.IsDefault?"star":m.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(x+"ReservedNames"))}getFields(g){return this.http.get(this.apiUrl(a),{params:{appid:this.context.appId.toString(),staticName:g}}).pipe((0,p.U)(f=>{if(f)for(const m of f){if(!m.Metadata)continue;const b=m.Metadata;b.merged={...b.All,...b[m.Type],...b[m.InputType]}}return f}))}getShareableFields(){return this.http.get(this.apiUrl(l),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(g){return this.http.get(this.apiUrl(l),{params:{appid:this.context.appId.toString(),attributeId:g.toString()}})}addInheritedField(g,f,m,b){return this.http.post(this.apiUrl(x+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:g.toString(),SourceType:f,SourceField:m,name:b}})}share(g,f=!0){return this.http.post(this.apiUrl(x+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:g.toString(),share:f}})}inherit(g,f){return this.http.post(this.apiUrl(x+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:g.toString(),inheritMetadataOf:f}})}reOrder(g,f){return this.http.post(this.apiUrl(x+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:f.Id.toString(),order:JSON.stringify(g)}})}setTitle(g,f){return this.http.post(this.apiUrl(I._+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:f.Id.toString(),attributeId:g.Id.toString()}})}rename(g,f,m){return this.http.post(this.apiUrl(x+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:f.toString(),attributeId:g.toString(),newName:m}})}delete(g,f){if(g.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(x+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:f.Id.toString(),attributeId:g.Id.toString()}})}add(g,f){return this.http.post(this.apiUrl(x+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:f.toString(),Id:g.Id.toString(),Type:g.Type,InputType:g.InputType,StaticName:g.StaticName,IsTitle:g.IsTitle.toString(),Index:g.SortOrder.toString()}})}updateInputType(g,f,m){return this.http.post(this.apiUrl(x+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:g.toString(),field:f,inputType:m}})}static#t=this.\u0275fac=function(f){return new(f||C)(w.LFG(M.eN),w.LFG(O._),w.LFG(y._y))};static#e=this.\u0275prov=w.Yz7({token:C,factory:C.\u0275fac})}return C})()},2380:(D,E,r)=>{r.d(E,{T:()=>p.T,n:()=>w});var p=r(9424),I=r(6575),O=r(9039);let w=(()=>{class M{static#t=this.\u0275fac=function(a){return new(a||M)};static#e=this.\u0275mod=O.oAB({type:M});static#n=this.\u0275inj=O.cJS({imports:[I.ez]})}return M})()},9424:(D,E,r)=>{r.d(E,{T:()=>y});var p=r(9039);const O="area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr".split(",").map(x=>x.trim().toLocaleLowerCase());class w{constructor(a,l,u,C,h,g,f){this.monaco=a,this.filename=l,this.snippets=g,this.tooltips=f,this.globalCache=this.createGlobalCache(a),this.defineThemes(this.globalCache,this.monaco),this.cachedValue=u,this.editorInstance=this.createInstance(this.monaco,l,u,C,h),this.completionItemProviders=this.addSnippets(this.monaco,this.editorInstance),this.resizeObserver=this.createResizeObserver(C,this.editorInstance),this.restoreState(this.globalCache,this.editorInstance),this.addEvents(this.editorInstance)}destroy(){this.saveState(this.globalCache,this.editorInstance),this.resizeObserver.disconnect(),this.completionItemProviders.forEach(a=>a.dispose()),this.jsTypingsLib?.dispose(),this.editorInstance.getModel().dispose(),this.editorInstance.dispose()}updateValue(a){this.cachedValue!==a&&(this.cachedValue=a,this.editorInstance.getModel().setValue(a))}focus(){this.editorInstance.focus()}onValueChange(a){this.valueChangedCallback=a}onFocus(a){this.focusedCallback=a}onBlur(a){this.blurredCallback=a}insertSnippet(a){this.editorInstance.getContribution("snippetController2").insert(a)}setSnippets(a){this.snippets=a}setTooltips(a){this.tooltips=a}setJsonSchema(a){const l=this.editorInstance.getModel().uri.toString(),u=this.monaco.languages.json.jsonDefaults.diagnosticsOptions,C=u.schemas?.some(f=>f.fileMatch[0]===l)??!1,h="link"===a?.type?{uri:a.value,fileMatch:[l]}:"raw"===a?.type?{uri:l,fileMatch:[l],schema:JSON.parse(a.value)}:void 0;if(!C&&!h)return;const g={...u,enableSchemaRequest:!0,schemas:C&&!h?u.schemas.filter(f=>f.fileMatch[0]!==l):C?u.schemas.map(f=>f.fileMatch[0]===l?h:f):[...u.schemas??[],h]};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(g)}setJsonComments(a){if(!a)return;const l={...this.monaco.languages.json.jsonDefaults.diagnosticsOptions,comments:a};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(l)}setJsDiagnostics(a){if(!a)return;const l={...this.monaco.languages.typescript.javascriptDefaults.getDiagnosticsOptions(),...a};this.monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions(l)}setJsTypings(a){a?this.jsTypingsLib=this.monaco.languages.typescript.javascriptDefaults.addExtraLib(a,`js-typings-${this.filename}`):this.jsTypingsLib?.dispose()}createGlobalCache(a){return null==a._2sxc&&(a._2sxc={themesAreDefined:!1,savedStates:{}}),a._2sxc}defineThemes(a,l){a.themesAreDefined||(a.themesAreDefined=!0,l.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}],colors:{}}))}createInstance(a,l,u,C,h){const g=a.editor.create(C,h),f=a.Uri.file(l),m=a.editor.createModel(u,void 0,f);return g.setModel(m),g}saveState(a,l){const u=l.getModel().uri.toString(),C=JSON.stringify(l.saveViewState());null==a.savedStates[u]?a.savedStates[u]={viewState:C}:a.savedStates[u].viewState=C}restoreState(a,l){const u=l.getModel().uri.toString(),C=a.savedStates[u];if(null==C)return;const h=JSON.parse(C.viewState);l.restoreViewState(h)}addSnippets(a,l){return[a.languages.registerCompletionItemProvider(l.getModel().getLanguageId(),{triggerCharacters:[">"],provideCompletionItems:(C,h)=>{if(l.getModel()!==C)return{suggestions:[]};const g=C.getValueInRange({startLineNumber:h.lineNumber,startColumn:1,endLineNumber:h.lineNumber,endColumn:h.column});if(">"!==g[g.length-1])return{suggestions:[]};const m=g.lastIndexOf("<");if(-1===m)return{suggestions:[]};const b=g.substring(m);let Z=0;if(Array.from(b).forEach(R=>{'"'===R&&Z++}),Z%2!=0)return{suggestions:[]};if(b.startsWith("</"))return{suggestions:[]};if(b.indexOf(">")!==b.length-1)return{suggestions:[]};let L=b.indexOf(" ");if(-1===L&&(L=b.indexOf(">")),-1===L)return{suggestions:[]};const N=b.substring(1,L);return N?O.includes(N.toLocaleLowerCase())?{suggestions:[]}:/[a-zA-Z0-9_-]/.test(N)?{suggestions:[{label:`</${N}>`,kind:a.languages.CompletionItemKind.Snippet,insertText:`$0</${N}>`,insertTextRules:a.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:h.lineNumber,endLineNumber:h.lineNumber,startColumn:h.column,endColumn:h.column}}]}:{suggestions:[]}:{suggestions:[]}}}),a.languages.registerCompletionItemProvider(l.getModel().getLanguageId(),{provideCompletionItems:(C,h)=>{if(null==this.snippets||l.getModel()!==C)return{suggestions:[]};const g=C.getWordUntilPosition(h);return{suggestions:this.snippets.map(m=>m.content?{label:m.name,kind:a.languages.CompletionItemKind.Snippet,documentation:`${m.title??""}\n${m.help??""}\n${m.links??""}`,insertText:m.content,insertTextRules:a.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:h.lineNumber,endLineNumber:h.lineNumber,startColumn:g.startColumn,endColumn:g.endColumn}}:void 0).filter(m=>!!m)}}}),a.languages.registerHoverProvider(l.getModel().getLanguageId(),{provideHover:(C,h)=>{if(null==this.tooltips||l.getModel()!==C)return;const g=C.getWordAtPosition(h);if(!g)return;const f=this.tooltips.find(m=>m.Term===g.word);return f?{contents:f.Help.map(m=>({value:m})),range:{startLineNumber:h.lineNumber,endLineNumber:h.lineNumber,startColumn:g.startColumn,endColumn:g.endColumn}}:void 0}})]}createResizeObserver(a,l){const u=new ResizeObserver(()=>{l.layout()});return u.observe(a),u}addEvents(a){a.getModel().onDidChangeContent(()=>{const l=a.getModel().getValue();l!==this.cachedValue&&(this.cachedValue=l,this.valueChangedCallback?.(l))}),a.onDidFocusEditorWidget(()=>{this.focusedCallback?.()}),a.onDidBlurEditorWidget(()=>{this.blurredCallback?.()})}}const M=["editor"];let y=(()=>{class x{constructor(){this.autoFocus=!1,this.valueChanged=new p.vpe,this.focused=new p.vpe,this.blurred=new p.vpe}ngAfterViewInit(){window.require.config({paths:{vs:["https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs"]}}),window.require(["vs/editor/editor.main"],l=>{this.monaco=l,this.createEditor(this.autoFocus)})}ngOnChanges(l){null!=l.filename&&null!=this.monacoInstance&&(this.monacoInstance.destroy(),this.createEditor(!0)),null!=l.value&&this.monacoInstance?.updateValue(this.value),null!=l.jsonSchema&&this.monacoInstance?.setJsonSchema(this.jsonSchema),null!=l.jsonComments&&this.monacoInstance?.setJsonComments(this.jsonComments),null!=l.snippets&&this.monacoInstance?.setSnippets(this.snippets),null!=l.tooltips&&this.monacoInstance?.setTooltips(this.tooltips),null!=l.jsTypings&&this.monacoInstance?.setJsTypings(this.jsTypings),null!=l.jsDiagnostics&&this.monacoInstance?.setJsDiagnostics(this.jsDiagnostics)}insertSnippet(l){this.monacoInstance?.insertSnippet(l),this.monacoInstance?.focus()}ngOnDestroy(){this.monacoInstance?.destroy()}createEditor(l){this.monacoInstance=new w(this.monaco,this.filename,this.value,this.editorRef.nativeElement,this.options,this.snippets,this.tooltips),this.monacoInstance.setJsonSchema(this.jsonSchema),this.monacoInstance.setJsonComments(this.jsonComments),this.monacoInstance.setJsTypings(this.jsTypings),this.monacoInstance.setJsDiagnostics(this.jsDiagnostics),this.monacoInstance.onValueChange(u=>{this.valueChanged.emit(u)}),this.monacoInstance.onFocus(()=>{this.focused.emit()}),this.monacoInstance.onBlur(()=>{this.blurred.emit()}),l&&this.monacoInstance.focus()}static#t=this.\u0275fac=function(u){return new(u||x)};static#e=this.\u0275cmp=p.Xpm({type:x,selectors:[["app-monaco-editor"]],viewQuery:function(u,C){if(1&u&&p.Gf(M,5),2&u){let h;p.iGM(h=p.CRH())&&(C.editorRef=h.first)}},inputs:{filename:"filename",value:"value",snippets:"snippets",tooltips:"tooltips",options:"options",jsonSchema:"jsonSchema",jsonComments:"jsonComments",jsTypings:"jsTypings",jsDiagnostics:"jsDiagnostics",autoFocus:"autoFocus"},outputs:{valueChanged:"valueChanged",focused:"focused",blurred:"blurred"},features:[p.TTD],decls:2,vars:0,consts:[[1,"editor"],["editor",""]],template:function(u,C){1&u&&p._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}.editor[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]})}return x})()},9851:(D,E,r)=>{r.d(E,{Y:()=>C});var p=r(9039),I=r(6575),O=r(1268);function w(h,g){1&h&&p.GkF(0)}function M(h,g){if(1&h&&(p.TgZ(0,"mat-hint"),p.YNc(1,w,1,0,"ng-container",3),p.qZA()),2&h){p.oxw();const f=p.MAs(4);p.xp6(1),p.Q6J("ngTemplateOutlet",f)}}function y(h,g){1&h&&p.GkF(0)}function x(h,g){if(1&h&&(p.TgZ(0,"mat-error"),p.YNc(1,y,1,0,"ng-container",3),p.qZA()),2&h){p.oxw();const f=p.MAs(4);p.xp6(1),p.Q6J("ngTemplateOutlet",f)}}function a(h,g){1&h&&p.Hsn(0)}const l=h=>({"hint-box__short":h}),u=["*"];let C=(()=>{class h{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(m){return new(m||h)};static#e=this.\u0275cmp=p.Xpm({type:h,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:u,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(m,b){1&m&&(p.F$t(),p.TgZ(0,"div",0),p.NdJ("click",function(){return b.toggleIsShort()}),p.YNc(1,M,2,1,"mat-hint",1)(2,x,2,1,"mat-error",1),p.qZA(),p.YNc(3,a,1,0,"ng-template",null,2,p.W1O)),2&m&&(p.Q6J("ngClass",p.VKq(4,l,b.isShort))("ngSwitch",b.isError),p.xp6(1),p.Q6J("ngSwitchCase",!1),p.xp6(1),p.Q6J("ngSwitchCase",!0))},dependencies:[I.mk,I.tP,I.RF,I.n9,O.bx,O.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return h})()},40:(D,E,r)=>{r.d(E,{D:()=>O});var p=r(3488),I=r(9039);let O=(()=>{class w{constructor(y){this.globalConfigService=y}onClick(y){(navigator.platform.match("Mac")?y.metaKey:y.ctrlKey)&&y.shiftKey&&y.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static#t=this.\u0275fac=function(x){return new(x||w)(I.Y36(p.bE))};static#e=this.\u0275dir=I.lG2({type:w,selectors:[["","appToggleDebug",""]],hostBindings:function(x,a){1&x&&I.NdJ("click",function(u){return a.onClick(u)})}})}return w})()},6537:(D,E,r)=>{r.d(E,{z:()=>O});var p=r(9039),I=r(6480);let O=(()=>{class w{constructor(y){this.sanitizer=y}transform(y){return this.sanitizer.bypassSecurityTrustHtml(y)}static#t=this.\u0275fac=function(x){return new(x||w)(p.Y36(I.H7,16))};static#e=this.\u0275pipe=p.Yjl({name:"safeHtml",type:w,pure:!0})}return w})()},3739:(D,E,r)=>{r.d(E,{f:()=>O});var p=r(4860),I=r(1916);function O(w){return{loader:{provide:I.Zw,useFactory:w,deps:[p.eN]},defaultLanguage:"en",isolate:!0}}},8206:(D,E,r)=>{r.d(E,{M:()=>O});var p=r(2389),I=r(4980);class O{constructor(M,y,x){this.http=M,this.prefix=y,this.suffix=x}getTranslation(M){return this.http.get(`${this.prefix}${M}${this.suffix}`).pipe((0,p.K)(y=>(console.warn(`Translation: Failed to get language '${M}' from ${this.prefix}`,y),(0,I.of)({}))))}}}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.00.00/dist/ng-edit/projects_eav-ui_src_app_code-editor_code-editor_module_ts-projects_eav-ui_src_app_shared_comp-2b2737.18b214e4307ca552.js.map