{"version":3,"file":"projects_eav-ui_src_app_app-administration_app-administration-nav_app-administration-nav_comp-1b3e30.86aa96b8b213c8db.js","mappings":"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","names":["AppScopes","App","Site","Global","SafeResourceUrlPipe","constructor","sanitizer","this","transform","resourceUrl","bypassSecurityTrustResourceUrl","static","t","i0","i1","core","Yjl","pure","GettingStartedComponent","ngOnInit","Xpm","selectors","inputs","gettingStartedUrl","decls","vars","consts","template","rf","ctx","_r9","ctx_r8","createOrEditMetadata","_r11","ctx_r10","openMetadata","ctx_r2","contentType","Metadata","length","ctx_r3","_r13","ctx_r12","openPermissions","ctx_r4","Permissions","Count","ctx_r5","_r15","ctx_r14","editContentType","ctx_r16","openRestApi","ctx_r17","exportType","ctx_r18","openDataExport","ctx_r19","openDataImport","ctx_r20","deleteContentType","ctx_r7","EditInfo","DisableRename","DisableDelete","DataActionsComponent","agInit","params","data","enablePermissions","enablePermissionsGetter","guidRegex","test","StaticName","refresh","onCreateOrEditMetadata","onOpenPermissions","onEdit","onOpenMetadata","onOpenRestApi","onTypeExport","onOpenDataExport","onOpenDataImport","onDelete","DataActionsComponent_div_1_Template","DataActionsComponent_div_2_Template","DataActionsComponent_div_3_Template","DataActionsComponent_div_4_Template","DataActionsComponent_div_5_Template","DataActionsComponent_div_6_Template","DataActionsComponent_ng_template_12_Template","DisableEdit","Properties","DisableMetadata","_r6","DataFieldsComponent","value","tooltip","ReadOnly","ReadOnlyMessage","SharedDefId","icon","editFields","onEditFields","DataItemsComponent","showItems","onShowItems","addItem","onAddItem","scopeOption_r4","name","createGhost","$event","_r8","filesDropped","ctx_r9","changeScope","DataComponent_div_0_mat_option_6_Template","importType","DataComponent_div_0_button_14_Template","ctx_r11","vm_r1","contentTypes","ctx_r0","gridOptions","scope","scopeOptions","dropdownInsertValue","debugEnabled","DataComponent","BaseComponent","router","route","contentTypesService","globalConfigService","snackBar","contentExportService","super","contentTypes$","BehaviorSubject","undefined","scope$","scopeOptions$","buildGridOptions","viewModel$","combineLatest","getDebugEnabled$","pipe","map","fetchScopes","refreshScopeOnRouteChange","subscription","add","refreshOnChildClosedDeep","subscribe","fetchContentTypes","ngOnDestroy","complete","files","importFile","substring","lastIndexOf","toLocaleLowerCase","from","toString","take","fileString","contentTypeName","split","find","ct","Name","open","duration","navigate","relativeTo","firstChild","state","showContentItems","retrieveContentTypes","_compareLabel","Label","replace","RegExp","next","eavConstants","scopes","default","getScopes","newScopes","forEach","scopeOption","existing","push","sourceName","window","prompt","res","newScope","formUrl","convertFormToUrl","items","ContentTypeName","EntityId","Id","For","Target","metadata","target","TargetType","targetType","String","Prefill","Description","url","GoToMetadata","getUrlContentType","GoToDevRest","getUrlData","exportJson","GoToPermissions","confirm","delete","result","events","filter","event","NavigationEnd","snapshot","paramMap","get","startWith","distinctUntilChanged","option","includes","defaultGridOptions","columnDefs","headerName","field","width","headerClass","sortable","cellClass","valueGetter","cellRenderer","IdFieldComponent","cellRendererParams","tooltipGetter","flex","minWidth","sort","onCellClicked","comparator","valueA","valueB","nodeA","nodeB","isInverted","localeCompare","Items","Fields","pinned","i2","i3","i4","i5","features","DataComponent_div_0_Template","QueryActions","Edit","Rest","Clone","Export","Delete","AgActionsComponent","item","_r7","ctx_r6","do","actions","ctx_r1","_Permissions","ctx_r13","_EditInfo","QueriesActionsComponent","getEnablePermissions","QueriesActionsComponent_div_4_Template","QueriesActionsComponent_div_5_Template","QueriesActionsComponent_div_6_Template","QueriesActionsComponent_div_7_Template","QueriesActionsComponent_ng_template_13_Template","_r4","_r3","importQuery","editQuery","queries","QueriesComponent","pipelinesService","dialogService","queries$","fetchQueries","getAll","query","doMenuAction","action","getUrlQuery","Guid","cloneQuery","exportQuery","deleteQuery","TestParameters","pipelineDesigner","testParameters","openVisualQueryDesigner","openQueryDesigner","getUrlEntity","clonePipeline","exportEntity","QueriesComponent_div_0_Template","openCode","view","cloneView","exportView","deleteView","ViewsActionsComponent","enableCode","enableCodeGetter","onOpenCode","onClone","onExport","ViewsActionsComponent_div_1_Template","ViewsActionsComponent_div_2_Template","ViewsActionsComponent_div_3_Template","ViewsActionsComponent_div_4_Template","ViewsActionsComponent_div_5_Template","ViewsActionsComponent_div_6_Template","ViewsActionsComponent_ng_template_12_Template","ViewsShowComponent","calculateViewType","HasQuery","List","ContentType","ViewsTypeComponent","type","isShared","IsShared","ViewsTypeComponent_div_4_Template","importView","editPolymorphisms","editView","views","appIsInherited","polymorphLogo","polymorphStatus","ViewsComponent","viewsService","views$","polymorphStatus$","fetchTemplates","fetchPolymorphism","getPolymorphism","polymorphism","Resolver","form","appIsGlobal","Location","TypeName","openUsage","openCodeFile","TemplatePath","DuplicateEntity","export","BooleanFilterComponent","IsHidden","Used","ViewNameInUrl","DemoId","DemoTitle","PresentationType","ListContentType","ListPresentationType","ViewsComponent_div_0_Template","_r5","WebApiActionsComponent","WebApiActionsComponent_div_1_Template","WebApiActionsComponent_div_2_Template","WebApiActionsComponent_ng_template_8_Template","_r2","WebApiTypeComponent","WebApiTypeComponent_div_1_Template","createController","webApis","WebApiComponent","sourceService","dialog","viewContainerRef","webApis$","fetchWebApis","global","CreateFileDialogComponent","autoFocus","folder","purpose","afterClosed","endsWith","fileName","create","templateKey","getWebApis","api","path","getUrlWebApi","WebApiComponent_div_0_Template","AnalyzeParts","Settings","Resources","vm_r3","ngIf","copyToClipboard","displayName","version","toSxc","dnn","oqt","AppConfigurationCardComponent_mat_card_0_ng_container_44_Template","edit","_c1","appConfigurationsCount","appMetadataCount","tmp_2_0","icon_r14","label_r15","AppConfigurationCardComponent","contentItemsService","context","appInternalsService","appSettingsInternal$","Subject","appConfiguration","settings","contentItems","contentItem","EntityLists","ToSxcContentApp","MetadataList","DisplayName","Folder","Version","RequiredVersion","RequiredDnnVersion","RequiredOqtaneVersion","fetchSettings","dismiss","text","staticName","Error","getUrlApp","appId","dialogSettings","Context","getAppInternals","app","keyType","x","AppConfigurationCardComponent_mat_card_0_Template","AppConfigurationCardComponent_ng_template_2_Template","AppConfigurationComponent_ng_container_0_div_1_ng_container_1_Template","AppConfigurationComponent_ng_container_0_div_1_ng_container_2_Template","isGlobal","isPrimary","_r25","ctx_r24","systemSettings","SystemSettingsScopes","ctx_r26","fixContentType","customSettings","ctx_r27","systemSettingsCount","customSettingsCount","customSettingsFieldsCount","_r31","ctx_r30","ctx_r32","ctx_r33","AppConfigurationComponent_ng_container_0_ng_container_24_ng_container_15_Template","_r14","_r38","ctx_r37","ctx_r39","ctx_r40","config","AppConfigurationComponent_ng_container_0_ng_container_25_ng_container_15_Template","AppConfigurationComponent_ng_container_0_ng_container_25_ng_container_16_Template","_r16","_r43","ctx_r42","systemResources","ctx_r44","customResources","ctx_r45","systemResourcesCount","customResourcesCount","customResourcesFieldsCount","_r49","ctx_r48","ctx_r50","ctx_r51","AppConfigurationComponent_ng_container_0_ng_container_55_ng_container_15_Template","_r56","ctx_r55","ctx_r57","resources","ctx_r58","AppConfigurationComponent_ng_container_0_ng_container_56_ng_container_15_Template","AppConfigurationComponent_ng_container_0_ng_container_56_ng_container_16_Template","_r61","ctx_r60","openGlobalSettings","_r63","ctx_r62","openSiteSettings","AppConfigurationComponent_ng_container_0_ng_container_119_ng_container_1_Template","AppConfigurationComponent_ng_container_0_ng_container_119_ng_container_2_Template","isApp","AppConfigurationComponent_ng_container_0_div_1_Template","AppConfigurationComponent_ng_container_0_ng_container_23_Template","AppConfigurationComponent_ng_container_0_ng_container_24_Template","AppConfigurationComponent_ng_container_0_ng_container_25_Template","AppConfigurationComponent_ng_container_0_ng_container_28_Template","_r67","ctx_r66","analyze","AppConfigurationComponent_ng_container_0_ng_container_54_Template","AppConfigurationComponent_ng_container_0_ng_container_55_Template","AppConfigurationComponent_ng_container_0_ng_container_56_Template","AppConfigurationComponent_ng_container_0_ng_container_59_Template","ctx_r68","AppConfigurationComponent_ng_container_0_ng_template_65_Template","AppConfigurationComponent_ng_container_0_ng_template_67_Template","AppConfigurationComponent_ng_container_0_ng_container_83_Template","ctx_r69","openLightSpeed","AppConfigurationComponent_ng_container_0_ng_container_101_Template","AppConfigurationComponent_ng_container_0_ng_container_113_Template","ctx_r70","AppConfigurationComponent_ng_container_0_ng_container_119_Template","AppConfigurationComponent_ng_container_0_ng_container_120_Template","ctx_r71","openLanguagePermissions","langPermsEnabled","_c0","lightSpeedEnabled","appLightSpeedCount","_c2","_c3","Enable","AppPermissions","_c5","icon_r72","label_r73","AppConfigurationComponent","importAppPartsService","appDialogConfigService","changeDetectorRef","debugEnabled$","appStateAdvanced","FeaturesService","loadFromService","isEnabled$","FeatureNames","LightSpeed","ContentSecurityPolicy","PermissionsByLanguage","cspEnabled","i","_Type","appMetadata","SettingsSystem","SettingsEntityScope","AppSettings","FieldAll","ResourcesSystem","AppResources","ngOnChanges","changes","appScope","SettingsScope","systemSettingsScope","systemSettingsEntities","systemSettingsEntity","customSettingsEntity","AppAdminHelpers","getLightSpeedEditParams","sitePrimaryApp","PrimaryApp","openAppAdministration","ZoneId","AppId","globalPrimaryApp","System","enabled","FeatureComponentBase","openDialog","part","configuration","some","save","Scope","ChangeStaticName","NewStaticName","success","i6","i7","i8","i9","i10","AppConfigurationComponent_ng_container_0_Template","AppConfigurationComponent_ng_template_2_Template","exportAppXml","resetApp","SyncConfigurationComponent","exportAppService","exportApp","exportParts","importParts","withFiles","exportForVersionControl","includeContentGroups","resetAppGuid","error","SyncConfigurationComponent_p_67_Template","SyncConfigurationComponent_app_feature_text_info_68_Template","SyncConfigurationComponent_ng_container_71_Template","SyncConfigurationComponent_ng_container_72_Template","Icon","GettingStartedUrl","AppAdministrationNavComponent_div_0_mat_tab_group_12_mat_tab_7_div_1_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_mat_tab_7_app_queries_2_Template","CodeEditor","IsInherited","AppAdministrationNavComponent_div_0_mat_tab_group_12_mat_tab_11_div_1_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_mat_tab_11_app_web_api_2_Template","_r32","ctx_r31","changeTab","AppAdministrationNavComponent_div_0_mat_tab_group_12_div_2_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_app_getting_started_3_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_div_5_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_app_data_6_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_mat_tab_7_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_div_9_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_app_views_10_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_mat_tab_11_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_div_13_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_app_app_configuration_14_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_div_16_Template","AppAdministrationNavComponent_div_0_mat_tab_group_12_app_sync_configuration_17_Template","tabIndex","Query","AppAdministrationNavComponent_div_0_img_3_Template","AppAdministrationNavComponent_div_0_ng_container_4_Template","AppAdministrationNavComponent_div_0_ng_container_5_Template","_r35","ctx_r34","closeDialog","AppAdministrationNavComponent_div_0_mat_tab_group_12_Template","AppAdministrationNavComponent","dialogRef","dialogSettings$","tabs$","tabIndex$","tabs","indexOf","fetchDialogSettings","close","index","getShared$","UpdateEnvVarsFromDialogSettings","tab","AppAdministrationNavComponent_div_0_Template"],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/models/dialog-context.models.ts","./projects/eav-ui/src/app/shared/pipes/safe-resource-url.ts","./projects/eav-ui/src/app/app-administration/getting-started/getting-started.component.ts","./projects/eav-ui/src/app/app-administration/getting-started/getting-started.component.html","./projects/eav-ui/src/app/app-administration/data/data-actions/data-actions.component.html","./projects/eav-ui/src/app/app-administration/data/data-actions/data-actions.component.ts","./projects/eav-ui/src/app/app-administration/data/data-fields/data-fields.component.ts","./projects/eav-ui/src/app/app-administration/data/data-fields/data-fields.component.html","./projects/eav-ui/src/app/app-administration/data/data-items/data-items.component.ts","./projects/eav-ui/src/app/app-administration/data/data-items/data-items.component.html","./projects/eav-ui/src/app/app-administration/data/data.component.html","./projects/eav-ui/src/app/app-administration/data/data.component.ts","./projects/eav-ui/src/app/app-administration/queries/queries-actions/queries-actions.ts","./projects/eav-ui/src/app/app-administration/queries/ag-actions/ag-actions-component.ts","./projects/eav-ui/src/app/app-administration/queries/queries-actions/queries-actions.component.html","./projects/eav-ui/src/app/app-administration/queries/queries-actions/queries-actions.component.ts","./projects/eav-ui/src/app/app-administration/queries/queries.component.html","./projects/eav-ui/src/app/app-administration/queries/queries.component.ts","./projects/eav-ui/src/app/app-administration/views/views-actions/views-actions.component.html","./projects/eav-ui/src/app/app-administration/views/views-actions/views-actions.component.ts","./projects/eav-ui/src/app/app-administration/views/views-show/views-show.component.ts","./projects/eav-ui/src/app/app-administration/views/views-show/views-show.component.html","./projects/eav-ui/src/app/app-administration/views/views.helpers.ts","./projects/eav-ui/src/app/app-administration/views/views-type/views-type.component.html","./projects/eav-ui/src/app/app-administration/views/views-type/views-type.component.ts","./projects/eav-ui/src/app/app-administration/views/views.component.html","./projects/eav-ui/src/app/app-administration/views/views.component.ts","./projects/eav-ui/src/app/app-administration/views/polymorph-logo.png","./projects/eav-ui/src/app/app-administration/web-api/web-api-actions/web-api-actions.component.html","./projects/eav-ui/src/app/app-administration/web-api/web-api-actions/web-api-actions.component.ts","./projects/eav-ui/src/app/app-administration/web-api/web-api-type/web-api-type.component.html","./projects/eav-ui/src/app/app-administration/web-api/web-api-type/web-api-type.component.ts","./projects/eav-ui/src/app/app-administration/web-api/web-api.component.html","./projects/eav-ui/src/app/app-administration/web-api/web-api.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/analyze-settings/analyze-settings.models.ts","./projects/eav-ui/src/app/app-administration/app-configuration/app-configuration-card/app-configuration-card.component.html","./projects/eav-ui/src/app/app-administration/app-configuration/app-configuration-card/app-configuration-card.component.ts","./projects/eav-ui/src/app/app-administration/app-configuration/app-configuration.component.html","./projects/eav-ui/src/app/app-administration/app-configuration/app-configuration.component.ts","./projects/eav-ui/src/app/app-administration/sync-configuration/sync-configuration.component.html","./projects/eav-ui/src/app/app-administration/sync-configuration/sync-configuration.component.ts","./projects/eav-ui/src/app/app-administration/app-administration-nav/app-administration-nav.component.html","./projects/eav-ui/src/app/app-administration/app-administration-nav/app-administration-nav.component.ts"],"sourcesContent":["import { PermissionsCount } from '../../app-administration/models/permissions-count.model';\r\nimport { Language } from '../../edit/shared/models';\r\n\r\nexport interface DialogContextApp {\r\n  /** Root for app APIs and content/query */\r\n  Api: string;\r\n  Folder: string;\r\n  GettingStartedUrl: string;\r\n  Id: number;\r\n  Identifier: string;\r\n  IsContentApp: boolean;\r\n  IsGlobalApp: boolean;\r\n  IsInherited: boolean;\r\n  IsShared: boolean;\r\n  IsSiteApp: boolean;\r\n  Name: string;\r\n  Permissions: PermissionsCount;\r\n  SettingsScope: AppScope;\r\n  Url: string;\r\n  SharedUrl: string;\r\n\r\n  /** New app icon */\r\n  Icon: string;\r\n}\r\n\r\nexport interface ApiKeySpecs {\r\n  NameId: string;\r\n  ApiKey: string;\r\n  IsDemo: boolean;\r\n}\r\n\r\nexport const AppScopes = {\r\n  App: 'App',\r\n  Site: 'Site',\r\n  Global: 'Global',\r\n} as const;\r\nexport type AppScope = typeof AppScopes[keyof typeof AppScopes];\r\n\r\nexport interface DialogContextEnable {\r\n  /** Determines if app admin should show app-permissions (true for Apps, false for Content and Global) */\r\n  AppPermissions?: boolean;\r\n  /** Determines if Code editing should be enabled (true for super-users) */\r\n  CodeEditor?: boolean;\r\n  DebugMode: boolean;\r\n  /** True if saving of formulas should be enabled (for edit-ui) */\r\n  FormulaSave?: boolean;\r\n  /** While debug is enabled, this allows some Edit Ui actions even when they are disabled in fields settings */\r\n  OverrideEditRestrictions?: boolean;\r\n  /** Determines if Queries should be enabled (true for Apps) */\r\n  Query?: boolean;\r\n}\r\n\r\nexport interface DialogContextLanguage {\r\n  Current: string;\r\n  List: Language[];\r\n  Primary: string;\r\n}\r\n\r\nexport interface DialogContextPage {\r\n  Id: number;\r\n}\r\n\r\nexport interface DialogContextSite {\r\n  DefaultApp: DialogContextSiteApp;\r\n  Id: number;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSystem {\r\n  DefaultApp: DialogContextSiteApp;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSiteApp {\r\n  ZoneId: number;\r\n  AppId: number;\r\n}\r\n\r\nexport interface DialogContextUser {\r\n  Email: string;\r\n  Id: number;\r\n  Guid: string;\r\n  IsAnonymous: boolean;\r\n  IsSiteAdmin: boolean;\r\n  IsContentAdmin: boolean;\r\n  IsSystemAdmin: boolean;\r\n  Name: string;\r\n  Username: string;\r\n}\r\n\r\n// export interface DialogContextFeature {\r\n//   NameId: string;\r\n//   Enabled: boolean;\r\n// }\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({ name: 'safeResourceUrl' })\r\nexport class SafeResourceUrlPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(resourceUrl: string) {\r\n    return this.sanitizer.bypassSecurityTrustResourceUrl(resourceUrl);\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-getting-started',\r\n  templateUrl: './getting-started.component.html',\r\n  styleUrls: ['./getting-started.component.scss'],\r\n})\r\nexport class GettingStartedComponent implements OnInit {\r\n  @Input() gettingStartedUrl: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<iframe class=\"iframe\" [src]=\"gettingStartedUrl | safeResourceUrl\"></iframe>\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple\r\n    *ngIf=\"!contentType.EditInfo.DisableEdit || contentType.Properties\" tippy=\"Description and more\"\r\n    (click)=\"createOrEditMetadata()\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"contentType.EditInfo.DisableEdit && !contentType.Properties\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple *ngIf=\"!contentType.EditInfo.DisableMetadata\" tippy=\"Metadata\"\r\n    (click)=\"openMetadata()\">\r\n    <mat-icon [matBadge]=\"contentType.Metadata.length\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n      matBadgeSize=\"small\" [matBadgeHidden]=\"!contentType.Metadata.length\" aria-hidden=\"false\">\r\n      local_offer\r\n    </mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"contentType.EditInfo.DisableMetadata\">\r\n    <mat-icon [matBadge]=\"contentType.Metadata.length\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n      matBadgeSize=\"small\" matBadgeDisabled=\"true\" [matBadgeHidden]=\"!contentType.Metadata.length\" aria-hidden=\"false\">\r\n      local_offer\r\n    </mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple *ngIf=\"!contentType.EditInfo.DisableEdit && enablePermissions\"\r\n    tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"contentType.Permissions.Count\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n      matBadgeSize=\"small\" [matBadgeHidden]=\"!contentType.Permissions.Count\" aria-hidden=\"false\">\r\n      person</mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"contentType.EditInfo.DisableEdit || !enablePermissions\">\r\n    <mat-icon [matBadge]=\"contentType.Permissions.Count\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n      matBadgeSize=\"small\" matBadgeDisabled=\"true\" [matBadgeHidden]=\"!contentType.Permissions.Count\"\r\n      aria-hidden=\"false\">\r\n      person</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item [disabled]=\"contentType.EditInfo.DisableRename\" (click)=\"editContentType()\">\r\n      <mat-icon>settings</mat-icon>\r\n      <span>Rename</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"openRestApi()\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"exportType()\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export content type</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"openDataExport()\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export data</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"openDataImport()\">\r\n      <mat-icon>cloud_upload</mat-icon>\r\n      <span>Import data</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"contentType.EditInfo.DisableDelete\" (click)=\"deleteContentType()\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { guidRegex } from '../../../shared/constants/guid.constants';\r\nimport { ContentType } from '../../models/content-type.model';\r\nimport { DataActionsParams } from './data-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-data-actions',\r\n  templateUrl: './data-actions.component.html',\r\n  styleUrls: ['./data-actions.component.scss'],\r\n})\r\nexport class DataActionsComponent implements ICellRendererAngularComp {\r\n  contentType: ContentType;\r\n  enablePermissions: boolean;\r\n  private params: ICellRendererParams & DataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & DataActionsParams): void {\r\n    this.params = params;\r\n    this.contentType = this.params.data;\r\n    const enablePermissions = this.params.enablePermissionsGetter();\r\n    this.enablePermissions = enablePermissions && guidRegex().test(this.contentType.StaticName);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  createOrEditMetadata(): void {\r\n    this.params.onCreateOrEditMetadata(this.contentType);\r\n  }\r\n\r\n  openPermissions(): void {\r\n    this.params.onOpenPermissions(this.contentType);\r\n  }\r\n\r\n  editContentType(): void {\r\n    this.params.onEdit(this.contentType);\r\n  }\r\n\r\n  openMetadata(): void {\r\n    this.params.onOpenMetadata(this.contentType);\r\n  }\r\n\r\n  openRestApi(): void {\r\n    this.params.onOpenRestApi(this.contentType);\r\n  }\r\n\r\n  exportType(): void {\r\n    this.params.onTypeExport(this.contentType);\r\n  }\r\n\r\n  openDataExport(): void {\r\n    this.params.onOpenDataExport(this.contentType);\r\n  }\r\n\r\n  openDataImport(): void {\r\n    this.params.onOpenDataImport(this.contentType);\r\n  }\r\n\r\n  deleteContentType(): void {\r\n    this.params.onDelete(this.contentType);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { ContentType } from '../../models/content-type.model';\r\nimport { DataFieldsParams } from './data-fields.models';\r\n\r\n@Component({\r\n  selector: 'app-data-fields',\r\n  templateUrl: './data-fields.component.html',\r\n  styleUrls: ['./data-fields.component.scss'],\r\n})\r\nexport class DataFieldsComponent implements ICellRendererAngularComp {\r\n  value: number;\r\n  tooltip: string;\r\n  icon: string;\r\n\r\n  private params: ICellRendererParams & DataFieldsParams;\r\n  private contentType: ContentType;\r\n\r\n  agInit(params: ICellRendererParams & DataFieldsParams): void {\r\n    this.params = params;\r\n    this.contentType = params.data;\r\n    this.value = params.value;\r\n    this.tooltip = !this.contentType.EditInfo.ReadOnly\r\n      ? 'Edit fields'\r\n      : `${this.contentType.EditInfo.ReadOnlyMessage ? `${this.contentType.EditInfo.ReadOnlyMessage}\\n\\n` : ''}This ContentType shares the definition of #${this.contentType.SharedDefId} so you can't edit it here. Read 2sxc.org/help?tag=shared-types`;\r\n    this.icon = !this.contentType.EditInfo.ReadOnly ? 'dns' : 'share';\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  editFields(): void {\r\n    this.params.onEditFields(this.contentType);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple [tippy]=\"tooltip\" (click)=\"editFields()\">\r\n    <mat-icon [matBadge]=\"value\" matBadgePosition=\"below after\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!value\" aria-hidden=\"false\">\r\n      {{icon}}\r\n    </mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { ContentType } from '../../models';\r\nimport { DataItemsParams } from './data-items.models';\r\n\r\n@Component({\r\n  selector: 'app-data-items',\r\n  templateUrl: './data-items.component.html',\r\n  styleUrls: ['./data-items.component.scss'],\r\n})\r\nexport class DataItemsComponent implements ICellRendererAngularComp {\r\n  value: number;\r\n  private params: DataItemsParams;\r\n  private contentType: ContentType;\r\n\r\n  agInit(params: ICellRendererParams & DataItemsParams): void {\r\n    this.params = params;\r\n    this.contentType = params.data;\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  showItems(): void {\r\n    this.params.onShowItems(this.contentType);\r\n  }\r\n\r\n  addItem(): void {\r\n    this.params.onAddItem(this.contentType);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"{{ value }} items\" (click)=\"showItems()\">\r\n    <div class=\"text-icon\">{{ value }}</div>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Add item\" (click)=\"addItem()\">\r\n    <mat-icon>add</mat-icon>\r\n  </div>\r\n</div>","<div class=\"grid-wrapper mat-tab-grid-wrapper\" *ngIf=\"viewModel$ | async as vm\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.contentTypes\" [gridOptions]=\"gridOptions\"\r\n    appDragAndDrop [allowedFileTypes]=\"'xml,json'\" (filesDropped)=\"filesDropped($event)\">\r\n  </ag-grid-angular>\r\n\r\n  <mat-dialog-actions class=\"eav-dialog-actions\">\r\n    <div class=\"eav-dialog-actions-div\">\r\n      <mat-form-field color=\"accent\" class=\"eav-form-field eav-scope-dropdown\">\r\n        <mat-select [ngModel]=\"vm.scope\" name=\"Scope\" (ngModelChange)=\"changeScope($event)\">\r\n          <mat-option *ngFor=\"let scopeOption of (vm.scopeOptions)\" [value]=\"scopeOption.value\">\r\n            {{ 'Scope: ' + scopeOption.name }}\r\n          </mat-option>\r\n          <mat-option [value]=\"dropdownInsertValue\">Scope: Other...</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      \r\n      <button mat-button class=\"eav-button__with-icon\" tippy=\"Import content type\" (click)=\"importType()\">\r\n        <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n        <span>Content Type</span>\r\n      </button>\r\n      \r\n      <button mat-button class=\"eav-button__with-icon\" color=\"accent\" tippy=\"Create a ghost content type\" *ngIf=\"vm.debugEnabled\" (click)=\"createGhost()\">\r\n        <mat-icon class=\"eav-icon\">share</mat-icon>\r\n        <span>Ghost</span>\r\n      </button>\r\n    </div>\r\n    \r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new content type\" (click)=\"editContentType(null)\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, distinctUntilChanged, filter, from, map, startWith, take } from 'rxjs';\r\nimport { ContentExportService } from '../../content-export/services/content-export.service';\r\nimport { ContentImportDialogData } from '../../content-import/content-import-dialog.config';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { GlobalConfigService } from '../../edit/shared/store/ngrx-data';\r\nimport { GoToMetadata } from '../../metadata';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { toString } from '../../shared/helpers/file-to-base64.helper';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { ContentType } from '../models/content-type.model';\r\nimport { ContentTypesService } from '../services/content-types.service';\r\nimport { DataActionsComponent } from './data-actions/data-actions.component';\r\nimport { DataActionsParams } from './data-actions/data-actions.models';\r\nimport { DataFieldsComponent } from './data-fields/data-fields.component';\r\nimport { DataFieldsParams } from './data-fields/data-fields.models';\r\nimport { DataItemsComponent } from './data-items/data-items.component';\r\nimport { DataItemsParams } from './data-items/data-items.models';\r\n\r\n@Component({\r\n  selector: 'app-data',\r\n  templateUrl: './data.component.html',\r\n  styleUrls: ['./data.component.scss'],\r\n})\r\nexport class DataComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() enablePermissions: boolean;\r\n\r\n  contentTypes$ = new BehaviorSubject<ContentType[]>(undefined);\r\n  scope$ = new BehaviorSubject<string>(undefined);\r\n  scopeOptions$ = new BehaviorSubject<ScopeOption[]>([]);\r\n  gridOptions = this.buildGridOptions();\r\n  dropdownInsertValue = dropdownInsertValue;\r\n\r\n  viewModel$ = combineLatest([this.contentTypes$, this.scope$, this.scopeOptions$, this.globalConfigService.getDebugEnabled$()]).pipe(\r\n    map(([contentTypes, scope, scopeOptions, debugEnabled]) =>\r\n      ({ contentTypes, scope, scopeOptions, debugEnabled })),\r\n  );\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private contentTypesService: ContentTypesService,\r\n    private globalConfigService: GlobalConfigService,\r\n    private snackBar: MatSnackBar,\r\n    private contentExportService: ContentExportService,\r\n  ) { \r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchScopes();\r\n    this.refreshScopeOnRouteChange();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchContentTypes(); }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.contentTypes$.complete();\r\n    this.scope$.complete();\r\n    this.scopeOptions$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  filesDropped(files: File[]) {\r\n    const importFile = files[0];\r\n    const ext = importFile.name.substring(importFile.name.lastIndexOf('.') + 1).toLocaleLowerCase();\r\n    switch (ext) {\r\n      case 'xml':\r\n        from(toString(files[0])).pipe(take(1)).subscribe(fileString => {\r\n          const contentTypeName = fileString.split('<Entity Type=\"')[1]?.split('\"')[0];\r\n          const contentType = this.contentTypes$.value.find(ct => ct.Name === contentTypeName);\r\n          if (contentType == null) {\r\n            const message = `Cannot find Content Type named '${contentTypeName}'. Please open Content Type Import dialog manually.`;\r\n            this.snackBar.open(message, null, { duration: 5000 });\r\n            return;\r\n          }\r\n          this.openDataImport(contentType, files);\r\n        });\r\n        break;\r\n      case 'json':\r\n        this.importType(files);\r\n        break;\r\n    }\r\n  }\r\n\r\n  importType(files?: File[]) {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: dialogData });\r\n  }\r\n\r\n  private showContentItems(contentType: ContentType) {\r\n    this.router.navigate([`items/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editContentType(contentType: ContentType) {\r\n    if (!contentType) {\r\n      this.router.navigate(['add'], { relativeTo: this.route.firstChild });\r\n    } else {\r\n      if (contentType.EditInfo.ReadOnly) { return; }\r\n      this.router.navigate([`${contentType.StaticName}/edit`], { relativeTo: this.route.firstChild });\r\n    }\r\n  }\r\n\r\n  private fetchContentTypes() {\r\n    this.contentTypesService.retrieveContentTypes(this.scope$.value).subscribe(contentTypes => {\r\n      for (const contentType of contentTypes) {\r\n        contentType._compareLabel = contentType.Label.replace(/\\p{Emoji}/gu, '');\r\n      }\r\n      this.contentTypes$.next(contentTypes);\r\n      if (this.scope$.value !== eavConstants.scopes.default.value) {\r\n        const message = 'Warning! You are in a special scope. Changing things here could easily break functionality';\r\n        this.snackBar.open(message, null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  private fetchScopes() {\r\n    this.contentTypesService.getScopes().subscribe(scopeOptions => {\r\n      const newScopes = [...this.scopeOptions$.value];\r\n      scopeOptions.forEach(scopeOption => {\r\n        const existing = newScopes.find(scope => scope.value === scopeOption.value);\r\n        if (existing) {\r\n          existing.name = scopeOption.name;\r\n        } else {\r\n          newScopes.push(scopeOption);\r\n        }\r\n      });\r\n      this.scopeOptions$.next(newScopes);\r\n    });\r\n  }\r\n\r\n  createGhost() {\r\n    const sourceName = window.prompt('To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost');\r\n    if (!sourceName) { return; }\r\n    this.snackBar.open('Saving...');\r\n    this.contentTypesService.createGhost(sourceName).subscribe(res => {\r\n      this.snackBar.open('Saved', null, { duration: 2000 });\r\n      this.fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  changeScope(newScope: string) {\r\n    if (newScope === dropdownInsertValue) {\r\n      newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n    }\r\n    this.router.navigate([`data/${newScope}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private addItem(contentType: ContentType) {\r\n    const form: EditForm = {\r\n      items: [{ ContentTypeName: contentType.StaticName }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private editFields(contentType: ContentType) {\r\n    this.router.navigate([`fields/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private createOrEditMetadata(contentType: ContentType) {\r\n    const form: EditForm = {\r\n      items: [\r\n        !contentType.Properties\r\n          ? {\r\n            ContentTypeName: eavConstants.contentTypes.contentType,\r\n            For: {\r\n              Target: eavConstants.metadata.contentType.target,\r\n              TargetType: eavConstants.metadata.contentType.targetType,\r\n              String: contentType.StaticName,\r\n            },\r\n            Prefill: { Label: contentType.Name, Description: contentType.Description },\r\n          }\r\n          : { EntityId: contentType.Properties.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openMetadata(contentType: ContentType) {\r\n    const url = GoToMetadata.getUrlContentType(\r\n      contentType.StaticName,\r\n      `Metadata for Content Type: ${contentType.Name} (${contentType.Id})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openRestApi(contentType: ContentType) {\r\n    this.router.navigate([GoToDevRest.getUrlData(contentType)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportType(contentType: ContentType) {\r\n    this.contentExportService.exportJson(contentType.StaticName);\r\n  }\r\n\r\n  private openDataExport(contentType: ContentType) {\r\n    this.router.navigate([`export/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openDataImport(contentType: ContentType, files?: File[]) {\r\n    const contentImportData: ContentImportDialogData = { files };\r\n    this.router.navigate([`${contentType.StaticName}/import`], { relativeTo: this.route.firstChild, state: contentImportData });\r\n  }\r\n\r\n  private openPermissions(contentType: ContentType) {\r\n    this.router.navigate([GoToPermissions.getUrlContentType(contentType.StaticName)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private deleteContentType(contentType: ContentType) {\r\n    if (!confirm(`Are you sure you want to delete '${contentType.Name}' (${contentType.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.contentTypesService.delete(contentType).subscribe(result => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  private refreshScopeOnRouteChange() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        map(() => this.route.snapshot.firstChild.paramMap.get('scope')),\r\n        startWith(this.route.snapshot.firstChild.paramMap.get('scope')),\r\n        filter(scope => !!scope),\r\n        distinctUntilChanged(),\r\n      ).subscribe(scope => {\r\n        this.scope$.next(scope);\r\n        if (!this.scopeOptions$.value.map(option => option.value).includes(scope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: scope,\r\n            value: scope,\r\n          };\r\n          this.scopeOptions$.next([...this.scopeOptions$.value, newScopeOption]);\r\n        }\r\n        this.fetchContentTypes();\r\n      })\r\n    );\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          cellClass: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return `id-action no-padding no-outline ${contentType.EditInfo.ReadOnly ? 'disabled' : ''}`.split(' ');\r\n          },\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<ContentType> = {\r\n              tooltipGetter: (contentType) => `ID: ${contentType.Id}\\nGUID: ${contentType.StaticName}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          flex: 3,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          onCellClicked: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            this.showContentItems(contentType);\r\n          },\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Label;\r\n          },\r\n          comparator: (valueA, valueB, nodeA, nodeB, isInverted) => {\r\n            const contentTypeA: ContentType = nodeA.data;\r\n            const contentTypeB: ContentType = nodeB.data;\r\n            return contentTypeA._compareLabel.localeCompare(contentTypeB._compareLabel);\r\n          },\r\n        },\r\n        {\r\n          field: 'Items',\r\n          width: 102,\r\n          headerClass: 'dense',\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Items;\r\n          },\r\n          cellRenderer: DataItemsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: DataItemsParams = {\r\n              onShowItems: (contentType) => this.showContentItems(contentType),\r\n              onAddItem: (contentType) => this.addItem(contentType),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Fields',\r\n          width: 94,\r\n          headerClass: 'dense',\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Fields;\r\n          },\r\n          cellRenderer: DataFieldsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: DataFieldsParams = {\r\n              onEditFields: (contentType) => this.editFields(contentType),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 1,\r\n          minWidth: 100,\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          cellClass: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return `${contentType.EditInfo.DisableEdit ? 'no-outline' : 'primary-action highlight'}`.split(' ');\r\n          },\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Name;\r\n          },\r\n          onCellClicked: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            this.editContentType(contentType);\r\n          },\r\n        },\r\n        {\r\n          field: 'Description',\r\n          flex: 3,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Properties?.Description;\r\n          },\r\n        },\r\n        {\r\n          width: 162,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: DataActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: DataActionsParams = {\r\n              enablePermissionsGetter: () => this.enablePermissionsGetter(),\r\n              onCreateOrEditMetadata: (contentType) => this.createOrEditMetadata(contentType),\r\n              onOpenPermissions: (contentType) => this.openPermissions(contentType),\r\n              onEdit: (contentType) => this.editContentType(contentType),\r\n              onOpenRestApi: (contentType) => this.openRestApi(contentType),\r\n              onOpenMetadata: (contentType) => this.openMetadata(contentType),\r\n              onTypeExport: (contentType) => this.exportType(contentType),\r\n              onOpenDataExport: (contentType) => this.openDataExport(contentType),\r\n              onOpenDataImport: (contentType) => this.openDataImport(contentType),\r\n              onDelete: (contentType) => this.deleteContentType(contentType),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","import { Query } from '../../models/query.model';\r\nimport { IAgActions } from '../ag-actions';\r\n\r\n// Test 2dm 2020-11-20 - I believe the current model has way too much ceremony\r\n// I need to change ca. 10 places just to get one more action to work\r\n// that's not great\r\nexport enum QueryActions {\r\n  Edit,\r\n  Metadata,\r\n  Rest,\r\n  Clone,\r\n  Permissions,\r\n  Export,\r\n  Delete,\r\n}\r\n\r\nexport interface QueriesActionsParams extends IAgActions<QueryActions, Query> {\r\n  getEnablePermissions(): boolean;\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\n\r\nexport class AgActionsComponent<TParams extends ICellRendererParams, TData> implements ICellRendererAngularComp {\r\n  item: TData;\r\n  params: TParams;\r\n\r\n  agInit(params: TParams): void {\r\n    this.params = params;\r\n    this.item = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Edit\" (click)=\"params.do(actions.Edit, item)\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple *ngIf=\"!item._EditInfo.DisableMetadata\" tippy=\"Metadata\"\r\n    (click)=\"params.do(actions.Metadata, item)\">\r\n    <mat-icon [matBadge]=\"item.Metadata?.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!item.Metadata?.length\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      local_offer\r\n    </mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"item._EditInfo.DisableMetadata\">\r\n    <mat-icon [matBadge]=\"item.Metadata?.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n      [matBadgeHidden]=\"!item.Metadata?.length\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      local_offer\r\n    </mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple *ngIf=\"!item._EditInfo.DisableEdit && enablePermissions\"\r\n    tippy=\"Permissions\" (click)=\"params.do(actions.Permissions, item)\">\r\n    <mat-icon [matBadge]=\"item._Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!item._Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"item._EditInfo.DisableEdit || !enablePermissions\">\r\n    <mat-icon [matBadge]=\"item._Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n      [matBadgeHidden]=\"!item._Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"params.do(actions.Rest, item)\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"params.do(actions.Clone, item)\">\r\n      <mat-icon>file_copy</mat-icon>\r\n      <span>Copy</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\" params.do(actions.Export, item)\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"item._EditInfo.DisableDelete\" (click)=\"params.do(actions.Delete, item)\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { Query } from '../../models/query.model';\r\nimport { AgActionsComponent } from '../ag-actions';\r\nimport { QueriesActionsParams, QueryActions } from './queries-actions';\r\n\r\n@Component({\r\n  selector: 'app-queries-actions',\r\n  templateUrl: './queries-actions.component.html',\r\n})\r\nexport class QueriesActionsComponent extends AgActionsComponent<ICellRendererParams & QueriesActionsParams, Query> {\r\n  enablePermissions: boolean;\r\n  actions = QueryActions;\r\n\r\n  agInit(params: ICellRendererParams & QueriesActionsParams): void {\r\n    super.agInit(params);\r\n    this.enablePermissions = this.params.getEnablePermissions();\r\n  }\r\n}\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\" *ngIf=\"viewModel$ | async as vm\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.queries\" [gridOptions]=\"gridOptions\" appDragAndDrop\r\n    [allowedFileTypes]=\"'json'\" (filesDropped)=\"importQuery($event)\">\r\n  </ag-grid-angular>\r\n\r\n  <mat-dialog-actions class=\"eav-dialog-actions\">\r\n    <button mat-button class=\"eav-button__with-icon\" tippy=\"Import query\" (click)=\"importQuery()\">\r\n      <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n      <span>Query</span>\r\n    </button>\r\n  \r\n\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new query\" (click)=\"editQuery(null)\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, map } from 'rxjs';\r\nimport { ContentExportService } from '../../content-export/services/content-export.service';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { GoToMetadata } from '../../metadata';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { Query } from '../models/query.model';\r\nimport { PipelinesService } from '../services/pipelines.service';\r\nimport { QueriesActionsParams, QueryActions } from './queries-actions/queries-actions';\r\nimport { QueriesActionsComponent } from './queries-actions/queries-actions.component';\r\n\r\n@Component({\r\n  selector: 'app-queries',\r\n  templateUrl: './queries.component.html',\r\n  styleUrls: ['./queries.component.scss'],\r\n})\r\nexport class QueriesComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() enablePermissions: boolean;\r\n\r\n  queries$ = new BehaviorSubject<Query[]>(undefined);\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  viewModel$ = combineLatest([this.queries$]).pipe(\r\n    map(([queries]) => ({ queries }))\r\n  );\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private pipelinesService: PipelinesService,\r\n    private contentExportService: ContentExportService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) {\r\n    super(router, route);\r\n   }\r\n\r\n  ngOnInit() {\r\n    this.fetchQueries();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchQueries(); }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.queries$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  private fetchQueries() {\r\n    this.pipelinesService.getAll(eavConstants.contentTypes.query).subscribe((queries: Query[]) => {\r\n      this.queries$.next(queries);\r\n    });\r\n  }\r\n\r\n  importQuery(files?: File[]) {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: dialogData });\r\n  }\r\n\r\n  /**\r\n   * Experiment by 2dm 2020-11-20 - trying to reduce the ceremony around menus\r\n   * Once this works, we would then remove all the 3-line functions below, as they\r\n   * would just be added here (if that's the only place they are used)\r\n   */\r\n  private doMenuAction(action: QueryActions, query: Query) {\r\n    switch (action) {\r\n      case QueryActions.Edit:\r\n        return this.editQuery(query);\r\n      case QueryActions.Metadata:\r\n        return this.openMetadata(query);\r\n      case QueryActions.Rest:\r\n        return this.router.navigate([GoToDevRest.getUrlQuery(query.Guid)], { relativeTo: this.route.firstChild });\r\n      case QueryActions.Clone:\r\n        return this.cloneQuery(query);\r\n      case QueryActions.Permissions:\r\n        return this.openPermissions(query);\r\n      case QueryActions.Export:\r\n        return this.exportQuery(query);\r\n      case QueryActions.Delete:\r\n        return this.deleteQuery(query);\r\n    }\r\n  }\r\n\r\n  editQuery(query: Query) {\r\n    const form: EditForm = {\r\n      items: [\r\n        query == null\r\n          ? {\r\n            ContentTypeName: eavConstants.contentTypes.query,\r\n            Prefill: { TestParameters: eavConstants.pipelineDesigner.testParameters }\r\n          }\r\n          : { EntityId: query.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private openVisualQueryDesigner(query: Query) {\r\n    if (query._EditInfo.ReadOnly) { return; }\r\n    this.dialogService.openQueryDesigner(query.Id);\r\n  }\r\n\r\n  private openMetadata(query: Query) {\r\n    const url = GoToMetadata.getUrlEntity(\r\n      query.Guid,\r\n      `Metadata for Query: ${query.Name} (${query.Id})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private cloneQuery(query: Query) {\r\n    this.snackBar.open('Copying...');\r\n    this.pipelinesService.clonePipeline(query.Id).subscribe(() => {\r\n      this.snackBar.open('Copied', null, { duration: 2000 });\r\n      this.fetchQueries();\r\n    });\r\n  }\r\n\r\n  private openPermissions(query: Query) {\r\n    this.router.navigate([GoToPermissions.getUrlEntity(query.Guid)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportQuery(query: Query) {\r\n    this.contentExportService.exportEntity(query.Id, 'Query', true);\r\n  }\r\n\r\n  private deleteQuery(query: Query) {\r\n    if (!confirm(`Delete Pipeline '${query.Name}' (${query.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.pipelinesService.delete(query.Id).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchQueries();\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          cellClass: (params) => {\r\n            const query: Query = params.data;\r\n            return `id-action no-padding no-outline ${query._EditInfo.ReadOnly ? 'disabled' : ''}`.split(' ');\r\n          },\r\n          valueGetter: (params) => {\r\n            const query: Query = params.data;\r\n            return query.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<Query> = {\r\n              tooltipGetter: (query) => `ID: ${query.Id}\\nGUID: ${query.Guid}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          cellClass: (params) => {\r\n            const query: Query = params.data;\r\n            return `${query._EditInfo.DisableEdit ? 'no-outline' : 'primary-action highlight'}`.split(' ');\r\n          },\r\n          onCellClicked: (params) => {\r\n            const query: Query = params.data;\r\n            this.openVisualQueryDesigner(query);\r\n          },\r\n          valueGetter: (params) => {\r\n            const query: Query = params.data;\r\n            return query.Name;\r\n          },\r\n        },\r\n        {\r\n          field: 'Description',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const query: Query = params.data;\r\n            return query.Description;\r\n          },\r\n        },\r\n        {\r\n          width: 162,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: QueriesActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: QueriesActionsParams = {\r\n              getEnablePermissions: () => this.enablePermissionsGetter(),\r\n              do: (action, query) => this.doMenuAction(action, query),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple *ngIf=\"!view.EditInfo.DisableEdit && enableCode\" tippy=\"Code\"\r\n    (click)=\"openCode()\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"view.EditInfo.DisableEdit || !enableCode\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple *ngIf=\"!view.EditInfo.DisableMetadata\" tippy=\"Metadata\"\r\n    (click)=\"openMetadata()\">\r\n    <mat-icon [matBadge]=\"view.Metadata.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!view.Metadata.length\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      local_offer\r\n    </mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"view.EditInfo.DisableMetadata\">\r\n    <mat-icon [matBadge]=\"view.Metadata.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n      [matBadgeHidden]=\"!view.Metadata.length\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      local_offer\r\n    </mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple *ngIf=\"!view.EditInfo.DisableEdit && enablePermissions\"\r\n    tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"view.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!view.Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"view.EditInfo.DisableEdit || !enablePermissions\">\r\n    <mat-icon [matBadge]=\"view.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n      [matBadgeHidden]=\"!view.Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"cloneView()\">\r\n      <mat-icon>file_copy</mat-icon>\r\n      <span>Copy</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\" exportView()\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"view.EditInfo.DisableDelete\" (click)=\"deleteView()\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { View } from '../../models/view.model';\r\nimport { ViewActionsParams } from './views-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-views-actions',\r\n  templateUrl: './views-actions.component.html',\r\n  styleUrls: ['./views-actions.component.scss'],\r\n})\r\nexport class ViewsActionsComponent implements ICellRendererAngularComp {\r\n  view: View;\r\n  enableCode: boolean;\r\n  enablePermissions: boolean;\r\n  private params: ICellRendererParams & ViewActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & ViewActionsParams): void {\r\n    this.params = params;\r\n    this.view = this.params.data;\r\n    this.enableCode = this.params.enableCodeGetter();\r\n    this.enablePermissions = this.params.enablePermissionsGetter();\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode(): void {\r\n    this.params.onOpenCode(this.view);\r\n  }\r\n\r\n  openPermissions(): void {\r\n    this.params.onOpenPermissions(this.view);\r\n  }\r\n\r\n  openMetadata(): void {\r\n    this.params.onOpenMetadata(this.view);\r\n  }\r\n\r\n  cloneView(): void {\r\n    this.params.onClone(this.view);\r\n  }\r\n\r\n  exportView(): void {\r\n    this.params.onExport(this.view);\r\n  }\r\n\r\n  deleteView(): void {\r\n    this.params.onDelete(this.view);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-views-show',\r\n  templateUrl: './views-show.component.html',\r\n  styleUrls: ['./views-show.component.scss'],\r\n})\r\nexport class ViewsShowComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <mat-icon>{{ value ? 'visibility' : 'visibility_off' }}</mat-icon>\r\n</div>\r\n","import { View } from '../models/view.model';\r\n\r\nexport function calculateViewType(view: View) {\r\n  let value = '';\r\n  let icon = '';\r\n  if (view.HasQuery) {\r\n    value = 'Data (from query)';\r\n    icon = 'filter_list';\r\n  } else if (view.List) {\r\n    value = 'Items (list)';\r\n    icon = 'format_list_numbered';\r\n  } else if (!view.ContentType && !view.HasQuery) {\r\n    value = 'Code';\r\n    icon = 'check_box_outline_blank';\r\n  } else if (!view.List) {\r\n    value = 'Item (one)';\r\n    icon = 'looks_one';\r\n  }\r\n  return { value, icon };\r\n}\r\n","<div class=\"icon-container\">\r\n  <div class=\"eav-grid-action-button icon\" [tippy]=\"value\">\r\n    <mat-icon>{{ icon }}</mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button icon\" tippy=\"View is shared\" *ngIf=\"isShared\">\r\n    <mat-icon>share</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { View } from '../../models';\r\nimport { calculateViewType } from '../views.helpers';\r\n\r\n@Component({\r\n  selector: 'app-views-type',\r\n  templateUrl: './views-type.component.html',\r\n  styleUrls: ['./views-type.component.scss'],\r\n})\r\nexport class ViewsTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  icon: string;\r\n  isShared: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    const view: View = params.data;\r\n    const type = calculateViewType(view);\r\n    this.icon = type.icon;\r\n    this.isShared = view.IsShared;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\" *ngIf=\"viewModel$ | async as vm\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.views\" [gridOptions]=\"gridOptions\" appDragAndDrop\r\n    [allowedFileTypes]=\"'json'\" (filesDropped)=\"importView($event)\">\r\n  </ag-grid-angular>\r\n\r\n  <mat-dialog-actions class=\"eav-dialog-actions\">\r\n    <div class=\"eav-dialog-actions-div\">\r\n      <button mat-button class=\"eav-polymorph-button\" tippy=\"Configure polymorphism\" [disabled]=\"appIsInherited\"\r\n        (click)=\"editPolymorphisms()\">\r\n        <span class=\"eav-polymorph-button-span\">\r\n          <img class=\"eav-polymorph-logo\" [src]=\"polymorphLogo\">\r\n          <span>Polymorphism {{ vm.polymorphStatus }}</span>\r\n        </span>\r\n      </button>\r\n      \r\n      <button mat-button class=\"eav-button__with-icon\" tippy=\"Import view\" (click)=\"importView()\">\r\n        <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n        <span>View</span>\r\n      </button>\r\n    </div>\r\n\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new view\" (click)=\"editView(null)\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>","import polymorphLogo from '!url-loader!./polymorph-logo.png';\r\nimport { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Observable, combineLatest, map } from 'rxjs';\r\nimport { GoToMetadata } from '../../metadata';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { View } from '../models/view.model';\r\nimport { ViewsService } from '../services/views.service';\r\nimport { ViewsActionsComponent } from './views-actions/views-actions.component';\r\nimport { ViewActionsParams } from './views-actions/views-actions.models';\r\nimport { ViewsShowComponent } from './views-show/views-show.component';\r\nimport { ViewsTypeComponent } from './views-type/views-type.component';\r\nimport { calculateViewType } from './views.helpers';\r\n\r\n@Component({\r\n  selector: 'app-views',\r\n  templateUrl: './views.component.html',\r\n  styleUrls: ['./views.component.scss'],\r\n})\r\nexport class ViewsComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() enableCode: boolean;\r\n  @Input() enablePermissions: boolean;\r\n  @Input() appIsGlobal: boolean;\r\n  @Input() appIsInherited: boolean;\r\n\r\n  views$ = new BehaviorSubject<View[]>(undefined);\r\n  polymorphStatus$ = new BehaviorSubject(undefined);\r\n  polymorphLogo = polymorphLogo;\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private polymorphism: Polymorphism;\r\n  \r\n  viewModel$: Observable<ViewsViewModel>;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private viewsService: ViewsService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) {\r\n    super(router, route);\r\n   }\r\n\r\n  ngOnInit() {\r\n    this.fetchTemplates();\r\n    this.fetchPolymorphism();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { \r\n      this.fetchTemplates();\r\n      this.fetchPolymorphism();\r\n    }));\r\n    this.viewModel$ = combineLatest([this.views$, this.polymorphStatus$]).pipe(\r\n      map(([views, polymorphStatus]) => ({ views, polymorphStatus }))\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.views$.complete();\r\n    this.polymorphStatus$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  importView(files?: File[]) {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: dialogData });\r\n  }\r\n\r\n  private fetchTemplates() {\r\n    this.viewsService.getAll().subscribe(views => {\r\n      this.views$.next(views);\r\n    });\r\n  }\r\n\r\n  private fetchPolymorphism() {\r\n    this.viewsService.getPolymorphism().subscribe(polymorphism => {\r\n      this.polymorphism = polymorphism;\r\n      const polymorphStatus = (polymorphism.Id === null)\r\n        ? 'not configured'\r\n        : (polymorphism.Resolver === null ? 'disabled' : 'using ' + polymorphism.Resolver);\r\n      this.polymorphStatus$.next(polymorphStatus);\r\n    });\r\n  }\r\n\r\n  editView(view?: View) {\r\n    const form: EditForm = {\r\n      items: [\r\n        view == null\r\n          ? {\r\n            ContentTypeName: eavConstants.contentTypes.template,\r\n            Prefill: {\r\n              ...(this.appIsGlobal && { Location: 'Global' }),\r\n            },\r\n          }\r\n          : { EntityId: view.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editPolymorphisms() {\r\n    if (!this.polymorphism) { return; }\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        !this.polymorphism.Id\r\n          ? { ContentTypeName: this.polymorphism.TypeName }\r\n          : { EntityId: this.polymorphism.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private enableCodeGetter() {\r\n    return this.enableCode;\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private openUsage(view: View) {\r\n    this.router.navigate([`usage/${view.Guid}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openCode(view: View) {\r\n    this.dialogService.openCodeFile(view.TemplatePath, view.IsShared, view.Id);\r\n  }\r\n\r\n  private openPermissions(view: View) {\r\n    this.router.navigate([GoToPermissions.getUrlEntity(view.Guid)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openMetadata(view: View) {\r\n    const url = GoToMetadata.getUrlEntity(\r\n      view.Guid,\r\n      `Metadata for View: ${view.Name} (${view.Id})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private cloneView(view: View) {\r\n    const form: EditForm = {\r\n      items: [{ ContentTypeName: eavConstants.contentTypes.template, DuplicateEntity: view.Id }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportView(view: View) {\r\n    this.viewsService.export(view.Id);\r\n  }\r\n\r\n  private deleteView(view: View) {\r\n    if (!confirm(`Delete '${view.Name}' (${view.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.viewsService.delete(view.Id).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchTemplates();\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          cellClass: (params) => {\r\n            const view: View = params.data;\r\n            return `id-action no-padding no-outline ${view.EditInfo.ReadOnly ? 'disabled' : ''}`.split(' ');\r\n          },\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<View> = {\r\n              tooltipGetter: (view) => `ID: ${view.Id}\\nGUID: ${view.Guid}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Show',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return !view.IsHidden;\r\n          },\r\n          cellRenderer: ViewsShowComponent,\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          onCellClicked: (params) => {\r\n            const view: View = params.data;\r\n            this.editView(view);\r\n          },\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.Name;\r\n          },\r\n        },\r\n        {\r\n          field: 'Type',\r\n          width: 82,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            const type = calculateViewType(view);\r\n            return type.value;\r\n          },\r\n          cellRenderer: ViewsTypeComponent,\r\n        },\r\n        {\r\n          field: 'Used',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          onCellClicked: (params) => {\r\n            const view: View = params.data;\r\n            this.openUsage(view);\r\n          },\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.Used;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Url Key',\r\n          field: 'UrlKey',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.ViewNameInUrl;\r\n          },\r\n        },\r\n        {\r\n          field: 'Path',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.TemplatePath;\r\n          },\r\n        },\r\n        {\r\n          field: 'Content',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.ContentType.Name;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Default',\r\n          field: 'ContentDemo',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return `${view.ContentType.DemoId} ${view.ContentType.DemoTitle}`;\r\n          },\r\n        },\r\n        {\r\n          field: 'Presentation',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.PresentationType.Name;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Default',\r\n          field: 'PresentationDemo',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return `${view.PresentationType.DemoId} ${view.PresentationType.DemoTitle}`;\r\n          },\r\n        },\r\n        {\r\n          field: 'Header',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.ListContentType.Name;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Default',\r\n          field: 'HeaderDemo',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return `${view.ListContentType.DemoId} ${view.ListContentType.DemoTitle}`;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Header Presentation',\r\n          field: 'HeaderPresentation',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.ListPresentationType.Name;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Default',\r\n          field: 'HeaderPresentationDemo',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return `${view.ListPresentationType.DemoId} ${view.ListPresentationType.DemoTitle}`;\r\n          },\r\n        },\r\n        {\r\n          width: 162,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: ViewsActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: ViewActionsParams = {\r\n              enableCodeGetter: () => this.enableCodeGetter(),\r\n              enablePermissionsGetter: () => this.enablePermissionsGetter(),\r\n              onOpenCode: (view) => this.openCode(view),\r\n              onOpenPermissions: (view) => this.openPermissions(view),\r\n              onOpenMetadata: (view) => this.openMetadata(view),\r\n              onClone: (view) => this.cloneView(view),\r\n              onExport: (view) => this.exportView(view),\r\n              onDelete: (view) => this.deleteView(view),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\ninterface ViewsViewModel {\r\n  views: View[];\r\n  polymorphStatus: any;\r\n}\r\n","export default \"data:image/png;base64,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\"","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple *ngIf=\"enableCode\" tippy=\"Code\" (click)=\"openCode()\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n  <div class=\"eav-grid-action-button disabled\" *ngIf=\"!enableCode\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"openRestApi()\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { WebApi } from '../../models/web-api.model';\r\nimport { WebApiActionsParams } from './web-api-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-web-api-actions',\r\n  templateUrl: './web-api-actions.component.html',\r\n  styleUrls: ['./web-api-actions.component.scss'],\r\n})\r\nexport class WebApiActionsComponent implements ICellRendererAngularComp {\r\n  enableCode: boolean;\r\n  private params: ICellRendererParams & WebApiActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & WebApiActionsParams): void {\r\n    this.params = params;\r\n    this.enableCode = this.params.enableCodeGetter();\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode(): void {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenCode(api);\r\n  }\r\n\r\n  openRestApi(): void {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenRestApi(api);\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <div class=\"eav-grid-action-button icon\" tippy=\"WebApi is shared\" *ngIf=\"value\">\r\n    <mat-icon>share</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-web-api-type',\r\n  templateUrl: './web-api-type.component.html',\r\n  styleUrls: ['./web-api-type.component.scss'],\r\n})\r\nexport class WebApiTypeComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\"  *ngIf=\"viewModel$ | async as vm\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.webApis\" [gridOptions]=\"gridOptions\">\r\n  </ag-grid-angular>\r\n\r\n  <mat-dialog-actions align=\"end\">\r\n    <button mat-fab mat-elevation-z24 [matMenuTriggerFor]=\"menu\" class=\"grid-fab\" tippy=\"Create a new controller\" tippyPlacement=\"left\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <button mat-menu-item (click)=\"createController(false)\">\r\n        <span>App</span>\r\n      </button>\r\n      <button mat-menu-item (click)=\"createController(true)\">\r\n        <span>Shared (global)</span>\r\n      </button>\r\n    </mat-menu>\r\n  </mat-dialog-actions>\r\n</div>","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, Input, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Observable, combineLatest, map } from 'rxjs';\r\nimport { SourceService } from '../../code-editor/services/source.service';\r\nimport { CreateFileDialogComponent, CreateFileDialogData, CreateFileDialogResult, FileLocationDialogComponent } from '../../create-file-dialog';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { WebApi } from '../models/web-api.model';\r\nimport { WebApiActionsComponent } from './web-api-actions/web-api-actions.component';\r\nimport { WebApiActionsParams } from './web-api-actions/web-api-actions.models';\r\nimport { WebApiTypeComponent } from './web-api-type/web-api-type.component';\r\n\r\n@Component({\r\n  selector: 'app-web-api',\r\n  templateUrl: './web-api.component.html',\r\n  styleUrls: ['./web-api.component.scss'],\r\n})\r\nexport class WebApiComponent implements OnInit, OnDestroy {\r\n  @Input() enableCode: boolean;\r\n\r\n  webApis$ = new BehaviorSubject<WebApi[]>(undefined);\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  viewModel$: Observable<WebApiViewModel>;\r\n\r\n  constructor(\r\n    private sourceService: SourceService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchWebApis();\r\n    this.viewModel$ = combineLatest([this.webApis$]).pipe(\r\n      map(([webApis]) => ({ webApis }))\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.webApis$.complete();\r\n  }\r\n\r\n  createController(global?: boolean): void {\r\n    // This FileLocationDialogComponent dialog is currently never going to be opened because it has been replaced by mat-menu\r\n    // in the web-api.component.html template. If you want to use the dialog instead of the menu, you need to remove the\r\n    // mat-menu and replace it with a button that opens the dialog with empty parameters.\r\n    // Dialog has been replaced by menu because from update to Angular 16 CreateFileDialogComponent wasn't opening anymore if \r\n    // FileLocationDialogComponent dialog was used.\r\n    // if (global == null) {\r\n    //   const fileLocationDialogRef = this.dialog.open(FileLocationDialogComponent, {\r\n    //     autoFocus: false,\r\n    //     viewContainerRef: this.viewContainerRef,\r\n    //     width: '650px',\r\n    //   });\r\n    //   fileLocationDialogRef.afterClosed().subscribe((isShared?: boolean) => {\r\n    //     if (isShared == null) { return; }\r\n    //     this.createController(isShared);\r\n    //   });\r\n    //   return;\r\n    // }\r\n\r\n    const createFileDialogData: CreateFileDialogData = {\r\n      folder: 'api',\r\n      global,\r\n      purpose: 'Api',\r\n    };\r\n    const createFileDialogRef = this.dialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data: createFileDialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    createFileDialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) { return; }\r\n\r\n      if (result.name.endsWith('Controller.cs')) {\r\n        const fileName = result.name.substring(result.name.lastIndexOf('/') + 1);\r\n        if (!/^[A-Z][a-zA-Z0-9]*Controller\\.cs$/g.test(fileName)) {\r\n          const message = `\"${fileName}\" is invalid controller name. Should be something like \"MyController.cs\"`;\r\n          this.snackBar.open(message, null, { duration: 5000 });\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.snackBar.open('Saving...');\r\n      this.sourceService.create(result.name, global, result.templateKey).subscribe(() => {\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n        this.fetchWebApis();\r\n      });\r\n    });\r\n  }\r\n\r\n  private fetchWebApis() {\r\n    this.sourceService.getWebApis().subscribe(webApis => {\r\n      this.webApis$.next(webApis);\r\n    });\r\n  }\r\n\r\n  private enableCodeGetter() {\r\n    return this.enableCode;\r\n  }\r\n\r\n  private openCode(api: WebApi) {\r\n    this.dialogService.openCodeFile(api.path, api.isShared);\r\n  }\r\n\r\n  private openRestApi(api: WebApi) {\r\n    this.router.navigate([GoToDevRest.getUrlWebApi(api)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          field: 'Folder',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const api: WebApi = params.data;\r\n            return api.folder;\r\n          },\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const api: WebApi = params.data;\r\n            return api.name;\r\n          },\r\n        },\r\n        {\r\n          field: 'Type',\r\n          flex: 1,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (params) => {\r\n            const api: WebApi = params.data;\r\n            return api.isShared;\r\n          },\r\n          cellRenderer: WebApiTypeComponent,\r\n        },\r\n        {\r\n          width: 82,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: WebApiActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: WebApiActionsParams = {\r\n              enableCodeGetter: () => this.enableCodeGetter(),\r\n              onOpenCode: (api) => this.openCode(api),\r\n              onOpenRestApi: (api) => this.openRestApi(api),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\ninterface WebApiViewModel { \r\n  webApis: WebApi[];\r\n}\r\n","import { View } from '../../models';\r\n\r\nexport const AnalyzeParts = {\r\n  Settings: 'Settings',\r\n  Resources: 'Resources',\r\n} as const;\r\nexport type AnalyzePart = typeof AnalyzeParts[keyof typeof AnalyzeParts];\r\n\r\nexport interface AnalyzeSettingsViewModel {\r\n  views: View[];\r\n  selectedView: string;\r\n  stack: SettingsStackItem[];\r\n}\r\n\r\nexport interface SettingsStackItem {\r\n  Path: string;\r\n  Priority: number;\r\n  Source: string;\r\n  TotalResults: number;\r\n  Type: string;\r\n  Value: string;\r\n  _value: string;\r\n}\r\n","<!-- App Config -->\r\n<mat-card *ngIf=\"viewModel$ | async as vm\" class=\"eav-card\">\r\n  <mat-card-header class=\"eav-card-header\">\r\n    <mat-card-title>Configuration</mat-card-title>\r\n    <mat-icon>redeem</mat-icon>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <p>\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">Name:</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.displayName)\">{{vm.displayName}}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">Folder:</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.folder)\">{{vm.folder}}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">Version:</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.version)\">{{vm.version}}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">For</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <b>2sxc: </b><span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.toSxc)\"> {{vm.toSxc}} </span>\r\n          <b> DNN: </b><span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.dnn)\"> {{vm.dnn}} </span>\r\n          <b> Oqt: </b><span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.oqt)\"> {{vm.oqt}} </span>\r\n        </div>\r\n      </div>\r\n    <!-- </p> -->\r\n  </mat-card-content>\r\n  <div class=\"eav-card-space-div\"></div>\r\n  <mat-card-actions align=\"start\">\r\n    <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://docs.2sxc.org/basics/app/configuration.html' }\"></ng-container>\r\n    <button mat-button class=\"eav-button__with-icon\" (click)=\"edit()\">\r\n      <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.appConfigurationsCount || null\"\r\n        matBadgePosition=\"below after\" aria-hidden=\"false\" class=\"eav-icon\">edit</mat-icon>\r\n      <span>Edit</span>\r\n    </button>\r\n    <button mat-button class=\"eav-button__with-icon\" (click)=\"openMetadata()\">\r\n      <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.appMetadataCount || null\"\r\n        matBadgePosition=\"below after\" aria-hidden=\"false\" class=\"eav-icon\">local_offer</mat-icon>\r\n      <span>Metadata</span>\r\n    </button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n\r\n<ng-template #docsLink let-icon let-label let-link=\"link\">\r\n  <a mat-button class=\"eav-button__with-icon\" href=\"{{link}}\" target=\"_blank\" [tippy]=\"'online documentation'\">\r\n    <mat-icon class=\"eav-icon\">{{ icon ?? \"menu_book\" }}</mat-icon>\r\n    <span>{{ label }}</span>\r\n  </a>\r\n</ng-template>","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ContentItemsService } from '../../../content-items/services/content-items.service';\r\nimport { GoToMetadata } from '../../../metadata';\r\nimport { BaseComponent } from '../../../shared/components/base-component/base.component';\r\nimport { eavConstants } from '../../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../../shared/helpers/url-prep.helper';\r\nimport { DialogSettings } from '../../../shared/models/dialog-settings.model';\r\nimport { EditForm } from '../../../shared/models/edit-form.model';\r\nimport { Context } from '../../../shared/services/context';\r\nimport { AppInternalsService } from '../../services/app-internals.service';\r\nimport { Subject, Observable, combineLatest, map } from 'rxjs';\r\nimport { AppInternals } from '../../models/app-internals.model';\r\nimport { copyToClipboard } from '../../../shared/helpers/copy-to-clipboard.helper';\r\n\r\n@Component({\r\n  selector: 'app-app-configuration-card',\r\n  templateUrl: './app-configuration-card.component.html',\r\n  styleUrls: ['./app-configuration-card.component.scss'],\r\n})\r\nexport class AppConfigurationCardComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() dialogSettings: DialogSettings;\r\n\r\n  // More proper ViewModel\r\n  appSettingsInternal$ = new Subject<AppInternals>();\r\n  viewModel$: Observable<ViewModel>;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private contentItemsService: ContentItemsService,\r\n    private context: Context,\r\n    private snackBar: MatSnackBar,\r\n    private appInternalsService: AppInternalsService) {\r\n    super(router, route);\r\n\r\n    // New with proper ViewModel\r\n    this.viewModel$ = combineLatest([\r\n      this.appSettingsInternal$,\r\n      this.contentItemsService.getAll(eavConstants.contentTypes.appConfiguration),\r\n    ]).pipe(map(([settings, contentItems]) => {\r\n      const contentItem = contentItems[0];\r\n      const result: ViewModel = {\r\n        appConfigurationsCount: settings.EntityLists.ToSxcContentApp.length,\r\n        appMetadataCount: settings.MetadataList.Items.length,\r\n        displayName: contentItem?.DisplayName ?? '-',\r\n        folder: contentItem?.Folder ?? '-',\r\n        version: contentItem?.Version ?? '-',\r\n        toSxc: contentItem?.RequiredVersion ?? '-',\r\n        dnn: contentItem?.RequiredDnnVersion ?? '-',\r\n        oqt: contentItem?.RequiredOqtaneVersion ?? '-',\r\n      }\r\n      return result;\r\n    }));\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchSettings();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchSettings(); }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.snackBar.dismiss();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n\r\n  edit() {\r\n    const staticName = eavConstants.contentTypes.appConfiguration;\r\n    this.contentItemsService.getAll(staticName).subscribe(contentItems => {\r\n      let form: EditForm;\r\n      \r\n      if (contentItems.length < 1) throw new Error(`Found no settings for type ${staticName}`);\r\n      if (contentItems.length > 1) throw new Error(`Found too many settings for type ${staticName}`);\r\n      form = {\r\n        items: [{ EntityId: contentItems[0].Id }],\r\n      };\r\n\r\n      const formUrl = convertFormToUrl(form);\r\n      this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n    });\r\n  }\r\n\r\n  openMetadata() {\r\n    const url = GoToMetadata.getUrlApp(\r\n      this.context.appId,\r\n      `Metadata for App: ${this.dialogSettings.Context.App.Name} (${this.context.appId})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private fetchSettings() {\r\n    const getObservable = this.appInternalsService.getAppInternals(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, this.context.appId);\r\n    getObservable.subscribe(x => {\r\n      // 2dm - New mode for Reactive UI\r\n      this.appSettingsInternal$.next(x);\r\n      });\r\n  }\r\n}\r\n\r\nclass ViewModel {\r\n  appConfigurationsCount: number;\r\n  appMetadataCount: number;\r\n  displayName: string;\r\n  folder: string;\r\n  version: string;\r\n  toSxc: string;\r\n  dnn: string;\r\n  oqt: string;\r\n}","<ng-container *ngIf=\"viewModel$ | async as vm\">\r\n\r\n  <div class=\"alert alert-info scope-info\" *ngIf=\"isGlobal || isPrimary\">\r\n    <ng-container *ngIf=\"isGlobal\">\r\n      This is the Global App. Anything configured here will affect all Sites and Apps in this installation.\r\n    </ng-container>\r\n    <ng-container *ngIf=\"isPrimary\">\r\n      This is the Primary App of this Site. You can also configure sitewide settings and resources here.\r\n    </ng-container>\r\n    See <a href=\"https://go.2sxc.org/settings\" target=\"_blank\">docs</a>.\r\n  </div>\r\n\r\n  <div class=\"eav-cards-box\">\r\n    <!-- Settings -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Settings</mat-card-title>\r\n        <mat-icon>settings</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Settings are things like SQL-connection strings, default \"items-to-show\" numbers and similar.\r\n          If necessary, settings like a link to an RSS-Feed could be different in each language.\r\n          <a href=\"https://go.2sxc.org/settings\" target=\"_blank\">docs</a>\r\n        </p>\r\n\r\n        <table class=\"eav-settings-and-resources-table\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>System Settings</th>\r\n              <th>Custom Settings</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- Settings for Global App -->\r\n            <ng-container *ngIf=\"isGlobal\">\r\n              <tr>\r\n                <th>Global</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemSettings, SystemSettingsScopes.App)\"\r\n                    tippy=\"Edit global system settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemSettingsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customSettings, 'edit')\"\r\n                    tippy=\"Edit custom global settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customSettings, 'config')\"\r\n                    tippy=\"Configure fields of the custom global settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsFieldsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </ng-container>\r\n            <!-- Settings for Primary App -->\r\n            <ng-container *ngIf=\"isPrimary\">\r\n              <tr>\r\n                <th>Site</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemSettings, SystemSettingsScopes.Site)\"\r\n                    tippy=\"Edit site system settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemSettingsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customSettings, 'edit')\"\r\n                    tippy=\"Edit custom site settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customSettings, 'config')\"\r\n                    tippy=\"Configure fields of the custom site settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsFieldsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            <ng-container *ngTemplateOutlet=\"goToGlobal\"></ng-container>\r\n            </ng-container>\r\n            <!-- Settings for App and Content -->\r\n            <ng-container *ngIf=\"isApp\">\r\n              <tr>\r\n                <th>{{ dialogSettings.Context.App.Name }}</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemSettings, SystemSettingsScopes.App)\"\r\n                    tippy=\"Edit app system settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemSettingsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.settings)\" tippy=\"Edit custom app settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"config(eavConstants.contentTypes.settings)\"\r\n                    tippy=\"Configure fields of the custom app settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsFieldsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngTemplateOutlet=\"goToSite\"></ng-container>\r\n              <ng-container *ngTemplateOutlet=\"goToGlobal\"></ng-container>\r\n            </ng-container>\r\n          </tbody>\r\n        </table>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/settings' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"analyze(AnalyzeParts.Settings)\" tippy=\"See the result of combining all settings\">\r\n          <mat-icon class=\"eav-icon\">manage_search</mat-icon>\r\n          <span>Analyze Combined Settings</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n\r\n    <!-- Resources -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Language Resources (i18n)</mat-card-title>\r\n        <mat-icon>translate</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Resources are used for labels and things like that in the App.\r\n          They are usually needed to create multi-lingual views and such, and should not be used for App-Settings.\r\n          <a href=\"https://go.2sxc.org/settings\" target=\"_blank\">docs</a>\r\n        </p>\r\n\r\n        <table class=\"eav-settings-and-resources-table\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>System Resources</th>\r\n              <th>Custom Resources</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- Resources for Global App -->\r\n            <ng-container *ngIf=\"isGlobal\">\r\n              <tr>\r\n                <th>Global</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemResources, SystemSettingsScopes.App)\"\r\n                    tippy=\"Edit global system resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemResourcesCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customResources, 'edit')\"\r\n                    tippy=\"Edit custom global resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customResources, 'config')\"\r\n                    tippy=\"Configure fields of the custom global resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesFieldsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </ng-container>\r\n            <!-- Resources for Primary App -->\r\n            <ng-container *ngIf=\"isPrimary\">\r\n              <tr>\r\n                <th>Site</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemResources, SystemSettingsScopes.Site)\"\r\n                    tippy=\"Edit site system resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemResourcesCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customResources, 'edit')\"\r\n                    tippy=\"Edit custom site resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customResources, 'config')\"\r\n                    tippy=\"Configure fields of the custom site resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesFieldsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            <ng-container *ngTemplateOutlet=\"goToGlobal\"></ng-container>\r\n            </ng-container>\r\n            <!-- Resources for App and Content -->\r\n            <ng-container *ngIf=\"isApp\">\r\n              <tr>\r\n                <th>{{ dialogSettings.Context.App.Name }}</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemResources, SystemSettingsScopes.App)\"\r\n                    tippy=\"Edit app system resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemResourcesCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.resources)\"\r\n                    tippy=\"Edit custom app resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"config(eavConstants.contentTypes.resources)\"\r\n                    tippy=\"Configure fields of the custom app resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesFieldsCount || null\"\r\n                      matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngTemplateOutlet=\"goToSite\"></ng-container>\r\n              <ng-container *ngTemplateOutlet=\"goToGlobal\"></ng-container>\r\n            </ng-container>\r\n          </tbody>\r\n        </table>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/settings' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"analyze(AnalyzeParts.Resources)\" tippy=\"See the result of combining all resources\">\r\n          <mat-icon class=\"eav-icon\">manage_search</mat-icon>\r\n          <span>Analyze Combined Resources</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n\r\n    <!-- Templates which are re-used in the table above -->\r\n    <ng-template #goToGlobal>\r\n      <tr>\r\n        <th>Global</th>\r\n        <td>\r\n          <button mat-icon-button (click)=\"openGlobalSettings()\" tippy=\"Go to global\">\r\n            <mat-icon>open_in_new</mat-icon>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n\r\n    <ng-template #goToSite>\r\n      <tr>\r\n        <th>Site</th>\r\n        <td>\r\n          <button mat-icon-button (click)=\"openSiteSettings()\" tippy=\"Go to site\">\r\n            <mat-icon>open_in_new</mat-icon>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n\r\n  </div>\r\n\r\n  <div class=\"eav-cards-box\">\r\n    \r\n    <app-app-configuration-card [dialogSettings]=\"dialogSettings\">\r\n    </app-app-configuration-card>\r\n\r\n    <!-- LightSpeed -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Performance</mat-card-title>\r\n        <mat-icon>bolt</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          LightSpeed Output Cache to speed up page by 50-90%\r\n        </p>\r\n        <app-feature-text-info [featureNameId]=\"'LightSpeedOutputCache'\" [asInfo]=\"true\"></app-feature-text-info>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/lightspeed' }\"></ng-container>\r\n        <button mat-button  class=\"eav-button__with-icon\" (click)=\"openLightSpeed()\" disabled=\"{{!vm.lightSpeedEnabled}}\">\r\n          <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.appLightSpeedCount || null\"\r\n            matBadgePosition=\"below after\" aria-hidden=\"false\" class=\"eav-icon\">bolt</mat-icon>\r\n          <span>Edit LightSpeed</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n\r\n    <!-- Security / CSP -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Security</mat-card-title>\r\n        <mat-icon>local_police</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          ContentSecurityPolicy (CSP) features in this App - for maximum control.\r\n        </p>\r\n        <app-feature-text-info [featureNameId]=\"'ContentSecurityPolicy'\" [asInfo]=\"true\"></app-feature-text-info>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/csp' }\"></ng-container>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    \r\n    <!-- Permissions -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Permissions</mat-card-title>\r\n        <mat-icon>person</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Give access to the entire app (all data). Use with care.\r\n        </p>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://docs.2sxc.org/basics/app/permissions.html' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" [disabled]=\"!dialogSettings.Context.Enable.AppPermissions\" (click)=\"openPermissions()\">\r\n          <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgePosition=\"below after\"\r\n            [matBadge]=\"dialogSettings.Context.App.Permissions.Count || null\" aria-hidden=\"false\" class=\"eav-icon\">person</mat-icon>\r\n          <span>\r\n            Edit Permissions\r\n            <ng-container *ngIf=\"!dialogSettings.Context.Enable.AppPermissions\">\r\n              <ng-container *ngIf=\"isGlobal\">\r\n                (not on Global App)\r\n              </ng-container>\r\n              <ng-container *ngIf=\"isApp\">\r\n                (not on Content)\r\n              </ng-container>\r\n            </ng-container>\r\n          </span>\r\n        </button>\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://patrons.2sxc.org/features/feat/PermissionsByLanguage' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"openLanguagePermissions(vm.langPermsEnabled)\">\r\n          <mat-icon [matBadgeHidden]=\"vm.langPermsEnabled\" matBadgeSize=\"small\" matBadge=\"\" \r\n          matBadgePosition=\"below after\" aria-hidden=\"false\" class=\"eav-icon\">\r\n            person\r\n          </mat-icon>\r\n          <span>Language Permissions</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </div>\r\n\r\n</ng-container>\r\n\r\n<ng-template #docsLink let-icon let-label let-link=\"link\">\r\n  <a mat-button class=\"eav-button__with-icon\" href=\"{{link}}\" target=\"_blank\" [tippy]=\"'online documentation'\">\r\n    <mat-icon class=\"eav-icon\">{{ icon ?? \"menu_book\" }}</mat-icon>\r\n    <span>{{ label }}</span>\r\n  </a>\r\n</ng-template>","import { ChangeDetectorRef, Component, Input, OnChanges, OnDestroy, OnInit, SimpleChanges, ViewContainerRef } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ContentItemsService } from '../../content-items/services/content-items.service';\r\nimport { GlobalConfigService } from '../../edit/shared/store/ngrx-data';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { eavConstants, SystemSettingsScope, SystemSettingsScopes } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { AppScopes } from '../../shared/models/dialog-context.models';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { Context } from '../../shared/services/context';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { FeaturesService } from '../../shared/services/features.service';\r\nimport { AppAdminHelpers } from '../app-admin-helpers';\r\nimport { ContentTypeEdit } from '../models';\r\nimport { AppDialogConfigService, ContentTypesService } from '../services';\r\nimport { AppInternalsService } from '../services/app-internals.service';\r\nimport { ImportAppPartsService } from '../services/import-app-parts.service';\r\nimport { AnalyzePart, AnalyzeParts } from '../sub-dialogs/analyze-settings/analyze-settings.models';\r\nimport { Subject, Observable, combineLatest, map } from 'rxjs';\r\nimport { AppInternals } from '../models/app-internals.model';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { FeatureComponentBase } from '../../features/shared/base-feature.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-app-configuration',\r\n  templateUrl: './app-configuration.component.html',\r\n  styleUrls: ['./app-configuration.component.scss'],\r\n})\r\nexport class AppConfigurationComponent extends BaseComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() dialogSettings: DialogSettings;\r\n\r\n  eavConstants = eavConstants;\r\n  AnalyzeParts = AnalyzeParts;\r\n  SystemSettingsScopes = SystemSettingsScopes;\r\n  AppScopes = AppScopes;\r\n  isGlobal: boolean;\r\n  isPrimary: boolean;\r\n  isApp: boolean;\r\n  debugEnabled$ = this.globalConfigService.getDebugEnabled$();\r\n\r\n  // More proper ViewModel\r\n  appSettingsInternal$ = new Subject<AppInternals>();\r\n  viewModel$: Observable<AppConfigurationViewModel>;\r\n\r\n  public appStateAdvanced = false;\r\n\r\n  public features: FeaturesService = new FeaturesService();\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private contentItemsService: ContentItemsService,\r\n    private context: Context,\r\n    private importAppPartsService: ImportAppPartsService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n    private appInternalsService: AppInternalsService,\r\n    private contentTypesService: ContentTypesService,\r\n    private globalConfigService: GlobalConfigService,\r\n    appDialogConfigService: AppDialogConfigService,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef\r\n  ) {\r\n    super(router, route);\r\n    this.features.loadFromService(appDialogConfigService);\r\n\r\n    // New with proper ViewModel\r\n    this.viewModel$ = combineLatest([\r\n      this.appSettingsInternal$,\r\n      this.features.isEnabled$(FeatureNames.LightSpeed),\r\n      this.features.isEnabled$(FeatureNames.ContentSecurityPolicy),\r\n      this.features.isEnabled$(FeatureNames.PermissionsByLanguage),\r\n    ]).pipe(map(([settings, lightSpeedEnabled, cspEnabled, langPermsEnabled]) => {\r\n      const result: AppConfigurationViewModel = {\r\n        lightSpeedEnabled,\r\n        cspEnabled,\r\n        langPermsEnabled,\r\n        appLightSpeedCount: settings.MetadataList.Items.filter(i => i._Type.Name == eavConstants.appMetadata.LightSpeed.ContentTypeName).length,\r\n        systemSettingsCount: this.isPrimary\r\n          ? settings.EntityLists.SettingsSystem.filter(i => i.SettingsEntityScope === SystemSettingsScopes.Site).length\r\n          : settings.EntityLists.SettingsSystem.filter(i => !i.SettingsEntityScope).length,\r\n        customSettingsCount: settings.EntityLists.AppSettings?.length,\r\n        customSettingsFieldsCount: settings.FieldAll.AppSettings?.length,\r\n        systemResourcesCount: this.isPrimary\r\n          ? settings.EntityLists.ResourcesSystem.filter(i => i.SettingsEntityScope === SystemSettingsScopes.Site).length\r\n          : settings.EntityLists.ResourcesSystem.filter(i => !i.SettingsEntityScope).length,\r\n        customResourcesCount: settings.EntityLists.AppResources?.length,\r\n        customResourcesFieldsCount: settings.FieldAll.AppResources?.length,\r\n      }\r\n      return result;\r\n    }));\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    this.fetchSettings();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchSettings(); }));\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.dialogSettings != null) {\r\n      const appScope = this.dialogSettings.Context.App.SettingsScope;\r\n      this.isGlobal = appScope === AppScopes.Global;\r\n      this.isPrimary = appScope === AppScopes.Site;\r\n      this.isApp = appScope === AppScopes.App;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.snackBar.dismiss();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  edit(staticName: string, systemSettingsScope?: SystemSettingsScope) {\r\n    this.contentItemsService.getAll(staticName).subscribe(contentItems => {\r\n      let form: EditForm;\r\n\r\n      switch (staticName) {\r\n        case eavConstants.contentTypes.systemSettings:\r\n        case eavConstants.contentTypes.systemResources:\r\n          const systemSettingsEntities = contentItems.filter(i => systemSettingsScope === SystemSettingsScopes.App\r\n            ? !i.SettingsEntityScope\r\n            : i.SettingsEntityScope === SystemSettingsScopes.Site);\r\n          if (systemSettingsEntities.length > 1) {\r\n            throw new Error(`Found too many settings for type ${staticName}`);\r\n          }\r\n          const systemSettingsEntity = systemSettingsEntities[0];\r\n          form = {\r\n            items: [\r\n              systemSettingsEntity == null\r\n                ? {\r\n                  ContentTypeName: staticName,\r\n                  Prefill: {\r\n                    ...(systemSettingsScope === SystemSettingsScopes.Site && { SettingsEntityScope: SystemSettingsScopes.Site }),\r\n                  }\r\n                }\r\n                : { EntityId: systemSettingsEntity.Id }\r\n            ],\r\n          };\r\n          break;\r\n        case eavConstants.contentTypes.customSettings:\r\n        case eavConstants.contentTypes.customResources:\r\n          if (contentItems.length > 1) {\r\n            throw new Error(`Found too many settings for type ${staticName}`);\r\n          }\r\n          const customSettingsEntity = contentItems[0];\r\n          form = {\r\n            items: [\r\n              customSettingsEntity == null\r\n                ? { ContentTypeName: staticName }\r\n                : { EntityId: customSettingsEntity.Id }\r\n            ],\r\n          };\r\n          break;\r\n        default:\r\n          if (contentItems.length < 1) throw new Error(`Found no settings for type ${staticName}`);\r\n          if (contentItems.length > 1) throw new Error(`Found too many settings for type ${staticName}`);\r\n          form = {\r\n            items: [{ EntityId: contentItems[0].Id }],\r\n          };\r\n      }\r\n\r\n      const formUrl = convertFormToUrl(form);\r\n      this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n    });\r\n  }\r\n\r\n  openLightSpeed() {\r\n    const form = AppAdminHelpers.getLightSpeedEditParams(this.context.appId);\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  openSiteSettings() {\r\n    const sitePrimaryApp = this.dialogSettings.Context.Site.PrimaryApp;\r\n    this.dialogService.openAppAdministration(sitePrimaryApp.ZoneId, sitePrimaryApp.AppId, 'app');\r\n  }\r\n\r\n  openGlobalSettings() {\r\n    const globalPrimaryApp = this.dialogSettings.Context.System.PrimaryApp;\r\n    this.dialogService.openAppAdministration(globalPrimaryApp.ZoneId, globalPrimaryApp.AppId, 'app');\r\n  }\r\n\r\n  config(staticName: string) {\r\n    this.router.navigate([`fields/${staticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  openPermissions() {\r\n    this.router.navigate([GoToPermissions.getUrlApp(this.context.appId)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  openLanguagePermissions(enabled: boolean) {\r\n    if (enabled)\r\n      this.router.navigate(['language-permissions'], { relativeTo: this.route.firstChild });\r\n    else\r\n      FeatureComponentBase.openDialog(this.dialog, FeatureNames.PermissionsByLanguage, this.viewContainerRef, this.changeDetectorRef);\r\n  }\r\n\r\n  analyze(part: AnalyzePart) {\r\n    this.router.navigate([`analyze/${part}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private fetchSettings() {\r\n    const getObservable = this.appInternalsService.getAppInternals(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, this.context.appId);\r\n    getObservable.subscribe(x => {\r\n      // 2dm - New mode for Reactive UI\r\n      this.appSettingsInternal$.next(x);\r\n      });\r\n  }\r\n\r\n  fixContentType(staticName: string, action: 'edit' | 'config') {\r\n    this.contentTypesService.retrieveContentTypes(eavConstants.scopes.configuration.value).subscribe(contentTypes => {\r\n      const contentTypeExists = contentTypes.some(ct => ct.Name === staticName);\r\n      if (contentTypeExists) {\r\n        if (action === 'edit') {\r\n          this.edit(staticName);\r\n        } else if (action === 'config') {\r\n          this.config(staticName);\r\n        }\r\n      } else {\r\n        const newContentType = {\r\n          StaticName: '',\r\n          Name: staticName,\r\n          Description: '',\r\n          Scope: eavConstants.scopes.configuration.value,\r\n          ChangeStaticName: false,\r\n          NewStaticName: '',\r\n        } as ContentTypeEdit;\r\n        this.contentTypesService.save(newContentType).subscribe(success => {\r\n          if (!success) { return; }\r\n\r\n          if (action === 'edit') {\r\n            this.edit(staticName);\r\n          } else if (action === 'config') {\r\n            this.config(staticName);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nclass AppConfigurationViewModel {\r\n  // Lightspeed\r\n  lightSpeedEnabled: boolean;\r\n  appLightSpeedCount: number;\r\n\r\n  // CSP\r\n  cspEnabled: boolean;\r\n\r\n  // Language Permissions\r\n  langPermsEnabled: boolean;\r\n\r\n  systemSettingsCount: number;\r\n  customSettingsCount: number;\r\n  customSettingsFieldsCount: number;\r\n  systemResourcesCount: number;\r\n  customResourcesCount: number;\r\n  customResourcesFieldsCount: number;\r\n}","<ng-container>\r\n  <div class=\"eav-cards-box\">\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Instructions for Sync or Export/Import</mat-card-title>\r\n        <mat-icon>info</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          This section is for export/import of the entire App,\r\n          for synchronizing with the file storage (eg. for Git)\r\n          or to export parts of the App for re-import in another App.\r\n        </p>\r\n        <p>\r\n          To export/import Content-Types, Queries, Views or Data, use the respective tabs.\r\n        </p>\r\n      </mat-card-content>\r\n    </mat-card>\r\n  </div>\r\n\r\n  <div class=\"eav-cards-box\">\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Export this entire App</mat-card-title>\r\n        <mat-icon>cloud_download</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Create an package (zip) which can be installed in another site.\r\n        </p>    \r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"exportApp()\">\r\n          <mat-icon class=\"eav-icon\">cloud_download</mat-icon>\r\n          <span>Export App</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Export or Import parts of this App</mat-card-title>\r\n        <mat-icon>import_export</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Create an xml containing parts of the app, e.g. content and templates.\r\n          Import parts from such an xml into this app.\r\n        </p>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"exportParts()\">\r\n          <mat-icon class=\"eav-icon\">cloud_download</mat-icon>\r\n          <span>Export Parts</span>\r\n        </button>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"importParts()\">\r\n          <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n          <span>Import Parts</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </div>\r\n\r\n  <div class=\"eav-cards-box\">\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <div class=\"eav-card-header-title-toggle\">\r\n          <mat-card-title>App-State Versioning</mat-card-title>\r\n          <mat-slide-toggle class=\"eav-card-header-toggle\" [(ngModel)]=\"appStateAdvanced\">{{ appStateAdvanced ? \"advanced\" : \"basic\" }}</mat-slide-toggle>\r\n        </div>\r\n        <mat-icon>history_toggle_off</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          You can save / restore the app with data and configuration in <code>.data/app.xml</code>.\r\n          This file can then also be versioned using git.\r\n        </p>\r\n        <p *ngIf=\"appStateAdvanced\">\r\n          <br>\r\n          In Advanced mode you can also sync all the site files used by this app.\r\n          They will be placed in a folder inside <code>App_Data</code> and allow sync/restore with git or another server.\r\n        </p>\r\n      </mat-card-content>\r\n      <app-feature-text-info *ngIf=\"appStateAdvanced\" [featureNameId]=\"'AppSyncWithSiteFiles'\"></app-feature-text-info>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngIf=\"!appStateAdvanced\">\r\n          <button mat-button class=\"eav-button__with-icon\" (click)=\"exportAppXml(false)\">\r\n            <mat-icon class=\"eav-icon\">more_time</mat-icon>\r\n            <span>Save state</span>\r\n          </button>\r\n          <button mat-button class=\"eav-button__with-icon\" (click)=\"resetApp(false)\">\r\n            <mat-icon class=\"eav-icon\">restore</mat-icon>\r\n            <span>Restore state</span>\r\n          </button>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"appStateAdvanced\">\r\n          <button mat-button class=\"eav-button__with-icon\" (click)=\"exportAppXml(true)\">\r\n            <mat-icon class=\"eav-icon\">more_time</mat-icon>\r\n            <span>Save with Assets</span>\r\n          </button>\r\n          <button mat-button class=\"eav-button__with-icon\" (click)=\"resetApp(true)\">\r\n            <mat-icon class=\"eav-icon\">restore</mat-icon>\r\n            <span>Restore with Assets</span>\r\n          </button>\r\n        </ng-container>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </div>\r\n</ng-container>\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { ExportAppService } from '../services/export-app.service';\r\nimport { ImportAppPartsService } from '../services/import-app-parts.service';\r\n\r\n@Component({\r\n  selector: 'app-sync-configuration',\r\n  templateUrl: './sync-configuration.component.html',\r\n  styleUrls: ['./sync-configuration.component.scss'],\r\n})\r\nexport class SyncConfigurationComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() dialogSettings: DialogSettings;\r\n\r\n  public appStateAdvanced = false;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private exportAppService: ExportAppService,\r\n    private importAppPartsService: ImportAppPartsService,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ngOnDestroy() {\r\n    this.snackBar.dismiss();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  exportApp() {\r\n    this.router.navigate([`export`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  exportParts() {\r\n    this.router.navigate([`export/parts`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  importParts() {\r\n    this.router.navigate([`import/parts`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  exportAppXml(withFiles: boolean) {\r\n    this.snackBar.open('Exporting...');\r\n    this.exportAppService.exportForVersionControl({ includeContentGroups: true, resetAppGuid: false, withFiles }).subscribe({\r\n      next: result => {\r\n        this.snackBar.open('Export completed into the \\'App_Data\\' folder.', null, { duration: 3000 });\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Export failed. Please check console for more information', null, { duration: 3000 });\r\n      },\r\n    });\r\n  }\r\n\r\n  resetApp(withFiles: boolean) {\r\n    if (!confirm('Are you sure? All changes since last xml export will be lost')) { return; }\r\n    this.snackBar.open('Resetting...');\r\n    this.importAppPartsService.resetApp(withFiles).subscribe({\r\n      next: result => {\r\n        this.snackBar.open(\r\n          'Reset worked! Since this is a complex operation, please restart the Website to ensure all caches are correct',\r\n          null,\r\n          { duration: 30000 },\r\n        );\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Reset failed. Please check console for more information', null, { duration: 3000 });\r\n      },\r\n    });\r\n  }\r\n}","<div class=\"eav-dialog nav-component-wrapper eav-no-scrollbar\" appToggleDebug *ngIf=\"viewModel$ | async as vm\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      <img class=\"eav-dialog-header__title__image\" *ngIf=\"vm.dialogSettings?.Context.App.Icon\" \r\n        [src]=\"vm.dialogSettings?.Context.App.Icon + '?w=40&h=40&mode=crop'\"/>\r\n      <ng-container *ngIf=\"vm.dialogSettings?.Context.App.SettingsScope === AppScopes.Global\">\r\n        Global\r\n      </ng-container>\r\n      <ng-container *ngIf=\"vm.dialogSettings?.Context.App.SettingsScope !== AppScopes.Global\">\r\n        {{ vm.dialogSettings?.Context.App.Name }}\r\n      </ng-container>\r\n      Admin\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-tab-content nav-component-wrapper\">\r\n    <router-outlet></router-outlet>\r\n    \r\n    <!-- spm NOTE: we use mat-tab-group because mat-tab-nav-bar doesn't have animations and doesn't look pretty -->\r\n    <mat-tab-group class=\"mat-mdc-tab-group-max-height\" dynamicHeight color=\"accent\"\r\n      *ngIf=\"vm.dialogSettings && vm.tabIndex != null\" (selectedTabChange)=\"changeTab($event)\"\r\n      [selectedIndex]=\"vm.tabIndex\">\r\n      <mat-tab>\r\n        <div *matTabLabel class=\"mat-mdc-tab-label-box\" tippy=\"App Info\">\r\n          <mat-icon>info</mat-icon>\r\n          <span>Info</span>\r\n        </div>\r\n        <app-getting-started *matTabContent [gettingStartedUrl]=\"vm.dialogSettings.Context.App.GettingStartedUrl\">\r\n        </app-getting-started>\r\n      </mat-tab>\r\n    \r\n      <mat-tab>\r\n        <div *matTabLabel class=\"mat-mdc-tab-label-box\" tippy=\"Data / Content\">\r\n          <mat-icon>menu</mat-icon>\r\n          <span>Data</span>\r\n        </div>\r\n        <app-data *matTabContent [enablePermissions]=\"vm.dialogSettings.Context.Enable.AppPermissions\"></app-data>\r\n      </mat-tab>\r\n    \r\n      <mat-tab *ngIf=\"vm.dialogSettings.Context.Enable.Query\">\r\n        <div *matTabLabel class=\"mat-mdc-tab-label-box\" tippy=\"Queries / Visual Query Designer\">\r\n          <mat-icon>filter_list</mat-icon>\r\n          <span>Queries</span>\r\n        </div>\r\n        <app-queries *matTabContent [enablePermissions]=\"vm.dialogSettings.Context.Enable.AppPermissions\">\r\n        </app-queries>\r\n      </mat-tab>\r\n    \r\n      <mat-tab>\r\n        <div *matTabLabel class=\"mat-mdc-tab-label-box\" tippy=\"Views / Templates\">\r\n          <mat-icon>layers</mat-icon>\r\n          <span>Views</span>\r\n        </div>\r\n        <app-views *matTabContent [enableCode]=\"vm.dialogSettings.Context.Enable.CodeEditor\"\r\n          [enablePermissions]=\"vm.dialogSettings.Context.Enable.AppPermissions\"\r\n          [appIsGlobal]=\"vm.dialogSettings.Context.App.IsShared\"\r\n          [appIsInherited]=\"vm.dialogSettings.Context.App.IsInherited\">\r\n        </app-views>\r\n      </mat-tab>\r\n    \r\n      <mat-tab *ngIf=\"vm.dialogSettings.Context.Enable.Query\">\r\n        <div *matTabLabel class=\"mat-mdc-tab-label-box\" tippy=\"WebApi\">\r\n          <mat-icon>offline_bolt</mat-icon>\r\n          <span>WebApi</span>\r\n        </div>\r\n        <app-web-api *matTabContent [enableCode]=\"vm.dialogSettings.Context.Enable.CodeEditor\">\r\n        </app-web-api>\r\n      </mat-tab>\r\n    \r\n      <mat-tab>\r\n        <div *matTabLabel class=\"mat-mdc-tab-label-box\" tippy=\"App Settings\">\r\n          <mat-icon>settings_applications</mat-icon>\r\n          <span>App</span>\r\n        </div>\r\n        <app-app-configuration *matTabContent [dialogSettings]=\"vm.dialogSettings\">\r\n        </app-app-configuration>\r\n      </mat-tab>\r\n    \r\n      <mat-tab>\r\n        <div *matTabLabel class=\"mat-mdc-tab-label-box\" tippy=\"App Export / Import\">\r\n          <mat-icon>sync</mat-icon>\r\n          <span>Sync</span>\r\n        </div>\r\n        <app-sync-configuration *matTabContent [dialogSettings]=\"vm.dialogSettings\">\r\n        </app-sync-configuration>\r\n      </mat-tab>\r\n    </mat-tab-group>\r\n  </div>\r\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatTabChangeEvent } from '@angular/material/tabs';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, filter, map, startWith } from 'rxjs';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { UpdateEnvVarsFromDialogSettings } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { AppScopes } from '../../shared/models/dialog-context.models';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { AppDialogConfigService } from '../services/app-dialog-config.service';\r\n\r\n@Component({\r\n  selector: 'app-app-administration-nav',\r\n  templateUrl: './app-administration-nav.component.html',\r\n  styleUrls: ['./app-administration-nav.component.scss'],\r\n})\r\nexport class AppAdministrationNavComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  AppScopes = AppScopes;\r\n\r\n  private dialogSettings$ = new BehaviorSubject<DialogSettings>(undefined);\r\n  private tabs$ = new BehaviorSubject<string[]>(undefined);\r\n  private tabIndex$ = combineLatest([\r\n    this.tabs$,\r\n    this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      map(() => this.route.snapshot.firstChild.url[0].path),\r\n      startWith(this.route.snapshot.firstChild.url[0].path),\r\n    )\r\n  ]).pipe(\r\n    map(([tabs, path]) => {\r\n      if (tabs == null) { return; }\r\n      const tabIndex = tabs.indexOf(path);\r\n      return tabIndex;\r\n    }),\r\n    filter(tabIndex => tabIndex >= 0),\r\n  );\r\n  viewModel$ = combineLatest([this.dialogSettings$, this.tabIndex$]).pipe(\r\n    map(([dialogSettings, tabIndex]) => {\r\n      return { dialogSettings, tabIndex };\r\n    }),\r\n  );\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private dialogRef: MatDialogRef<AppAdministrationNavComponent>,\r\n    private appDialogConfigService: AppDialogConfigService,\r\n  ) { \r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchDialogSettings();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchDialogSettings(); }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dialogSettings$.complete();\r\n    this.tabs$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  changeTab(event: MatTabChangeEvent) {\r\n    let path = this.tabs$.value[event.index];\r\n    if (path === 'data') {\r\n      path = `data/${eavConstants.scopes.default.value}`;\r\n    }\r\n    this.router.navigate([path], { relativeTo: this.route });\r\n  }\r\n\r\n  private fetchDialogSettings() {\r\n    this.appDialogConfigService.getShared$()/*.getDialogSettings()*/.subscribe(dialogSettings => {\r\n      UpdateEnvVarsFromDialogSettings(dialogSettings.Context.App);\r\n      this.dialogSettings$.next(dialogSettings);\r\n\r\n      let tabs = ['home', 'data', 'queries', 'views', 'web-api', 'app', 'sync']; // tabs order has to match template\r\n      if (!dialogSettings.Context.Enable.Query) {\r\n        tabs = tabs.filter(tab => tab !== 'queries' && tab !== 'web-api');\r\n      }\r\n      this.tabs$.next(tabs);\r\n    });\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}