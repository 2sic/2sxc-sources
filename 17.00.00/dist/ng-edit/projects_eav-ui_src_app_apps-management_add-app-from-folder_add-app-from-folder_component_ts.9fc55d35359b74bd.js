"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts"],{4533:(D,g,n)=>{n.r(g),n.d(g,{AddAppFromFolderComponent:()=>$});var f=n(9877),I=n(8071),u=n(3317),F=n(3839),t=n(5043),Z=n(1891),M=n(2389),T=n(4980),E=n(5584),S=n(9736),C=n(5331),P=n(9097),b=n(6433),U=n(6680),e=n(9039),p=n(9498),y=n(6515);let c=(()=>{class l{agInit(a){this.name=a.value,this.tooltip=a.tooltipGetter(a.data)}refresh(a){return!0}static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-app-name-show"]],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",1),e._uU(4,"info"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(r.name),e.xp6(1),e.Q6J("tippy",r.tooltip))},dependencies:[p.$,y.Hw],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}return l})(),h=(()=>{class l{agInit(a){this.params=a}refresh(a){return!0}onChange(a){this.params.onChange(this.params.data,a.currentTarget.checked)}static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-checkbox-cell"]],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"disabled","checked","change"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(L){return r.onChange(L)}),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("disabled",r.params.isDisabled)("checked",r.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}return l})();var x=n(6861),O=n(9409),N=n(7648),s=n(6575),_=n(8621),o=n(895),d=n(9818);function m(l,B){1&l&&(e.TgZ(0,"p"),e._uU(1," Nothing to show. All apps in the 2sxc folder are already installed. "),e.qZA())}function v(l,B){if(1&l&&(e.TgZ(0,"div"),e._UZ(1,"ag-grid-angular",9),e.qZA()),2&l){const a=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Q6J("rowData",a.pendingApps)("gridOptions",i.gridOptions)}}function A(l,B){if(1&l){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Add App from Folder"),e.qZA()(),e.TgZ(5,"div",4),e._UZ(6,"app-feature-text-info",5),e.TgZ(7,"p"),e._uU(8," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),e.qZA(),e.YNc(9,m,2,0,"p",0)(10,v,2,2,"div",0),e.qZA(),e.TgZ(11,"mat-dialog-actions",6)(12,"button",7),e.NdJ("click",function(){e.CHM(a);const r=e.oxw();return e.KtG(r.closeDialog())}),e._uU(13," Cancel "),e.qZA(),e.TgZ(14,"button",8),e.NdJ("click",function(){e.CHM(a);const r=e.oxw();return e.KtG(r.install())}),e._uU(15," Install "),e.qZA()()(),e.BQk()}if(2&l){const a=B.ngIf,i=e.oxw();e.xp6(6),e.Q6J("featureNameId","AppSyncWithSiteFiles"),e.xp6(3),e.Q6J("ngIf",0==(null==a.pendingApps?null:a.pendingApps.length)),e.xp6(1),e.Q6J("ngIf",(null==a.pendingApps?null:a.pendingApps.length)>0),e.xp6(4),e.Q6J("disabled",0===i.pendingApps.length||i.installing)}}let $=(()=>{class l extends P.f{constructor(a,i,r,w){super(),this.dialogRef=a,this.appsListService=i,this.snackBar=r,this.featuresService=w,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.pendingApps=[],this.installing=!1,this.refreshApps$=new f.x,this.isAddFromFolderEnabled$=new I.X(!1)}ngOnInit(){this.subscription.add(this.featuresService.isEnabled$(C.C.AppSyncWithSiteFiles).pipe((0,u.x)()).subscribe(this.isAddFromFolderEnabled$)),this.viewModel$=(0,F.a)([this.refreshApps$.pipe((0,t.O)(void 0),(0,Z.w)(()=>this.appsListService.getPendingApps().pipe((0,M.K)(()=>(0,T.of)(void 0)))),(0,E.B)())]).pipe((0,S.U)(([a])=>({pendingApps:a})))}ngOnDestroy(){this.refreshApps$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onChange(a,i){i?this.pendingApps.push(a):this.pendingApps.splice(this.pendingApps.indexOf(a),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...b.f,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:h,cellRendererParams:()=>({isDisabled:!this.isAddFromFolderEnabled$.value,onChange:(r,w)=>this.onChange(r,w)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:c,cellRendererParams:{tooltipGetter:r=>`Server folder: ${r.ServerFolder}\nFolder: ${r.Folder}\nVersion: ${r.Version}\nDescription: ${r.Description}`}}]}}static#t=this.\u0275fac=function(i){return new(i||l)(e.Y36(x.so),e.Y36(U.A),e.Y36(O.ux),e.Y36(N.k))};static#e=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(i,r){2&i&&e.Ikx("className",r.hostClass)},features:[e.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(i,r){1&i&&(e.YNc(0,A,16,4,"ng-container",0),e.ALo(1,"async")),2&i&&e.Q6J("ngIf",e.lcZ(1,1,r.viewModel$))},dependencies:[x.H8,s.O5,_.N8,o.lW,d.B,s.Ov],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}return l})()},5331:(D,g,n)=>{n.d(g,{C:()=>f});const f={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement"}},9818:(D,g,n)=>{n.d(g,{B:()=>e});var f=n(8968),I=n(8071),u=n(3839),F=n(9736),t=n(9039),Z=n(6861),M=n(7648),T=n(6575),E=n(6515),S=n(9498),C=n(1916);function P(p,y){if(1&p){const c=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){t.CHM(c);const x=t.oxw(2);return t.KtG(x.openDialog())}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",6),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&p){const c=t.oxw().ngIf;t.Q6J("tippy",t.xi3(1,7,"Features.Tooltip",c.feature)),t.xp6(2),t.Gre("icon icon-",c.icon,""),t.xp6(1),t.Oqu(c.icon),t.xp6(3),t.Oqu(t.lcZ(7,10,"Features.FeatureNotActivated")),t.xp6(3),t.Oqu(t.lcZ(10,12,"Features.ClickToFindOutMore"))}}function b(p,y){if(1&p&&(t.ynx(0),t.YNc(1,P,11,14,"div",2),t.BQk()),2&p){const c=y.ngIf;t.xp6(1),t.Q6J("ngIf",c.show)}}function U(p,y){1&p&&(t.TgZ(0,"div"),t._uU(1,"loading..."),t.qZA())}let e=(()=>{class p extends f.B{set asInfo(c){this.asInfo$.next(c)}constructor(c,h,x,O){super(c,h,O,x),this.asInfo$=new I.X(!1),this.viewModel$=(0,u.a)([this.feature$,this.asInfo$,this.show$]).pipe((0,F.U)(([N,s,_])=>({feature:N,icon:s?"info":"warning",show:_})))}static#t=this.\u0275fac=function(h){return new(h||p)(t.Y36(Z.uw),t.Y36(t.s_b),t.Y36(M.k),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:p,selectors:[["app-feature-text-info"]],inputs:{asInfo:"asInfo"},features:[t.qOj],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["class","feature-text-info",3,"tippy","click",4,"ngIf"],[1,"feature-text-info",3,"tippy","click"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(h,x){if(1&h&&(t.YNc(0,b,2,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,U,2,0,"ng-template",null,1,t.W1O)),2&h){const O=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,x.viewModel$))("ngIfElse",O)}},dependencies:[T.O5,E.Hw,S.$,T.Ov,C.X$],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]})}return p})()},8968:(D,g,n)=>{n.d(g,{B:()=>N});var f=n(6861),I=n(3839),u=n(9736),F=n(4472),t=n(9039),Z=n(9409),M=n(8737),T=n(6575),E=n(895),S=n(6515),C=n(8497),P=n(9498),b=n(6537),U=n(1916);function e(s,_){if(1&s){const o=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t._uU(2,"ID:"),t.qZA(),t.TgZ(3,"div",9)(4,"span",10),t.NdJ("click",function(){const v=t.CHM(o).ngIf,A=t.oxw(2);return t.KtG(A.copyToClipboard(v))}),t._uU(5),t.qZA()()()}if(2&s){const o=_.ngIf;t.xp6(4),t.Q6J("tippy",o),t.xp6(1),t.Oqu(o)}}function p(s,_){if(1&s){const o=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){const v=t.CHM(o).ngIf,A=t.oxw(2);return t.KtG(A.findOutMore(v))}),t.TgZ(1,"mat-icon"),t._uU(2,"open_in_new"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&s&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"Features.FindOutMore")," "))}function y(s,_){if(1&s){const o=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content"),t._UZ(5,"p",1),t.ALo(6,"safeHtml"),t.TgZ(7,"div",2)(8,"div",3),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",4)(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.YNc(15,e,6,2,"div",5),t.qZA(),t.TgZ(16,"mat-card-actions",6),t.YNc(17,p,5,3,"button",7),t.TgZ(18,"button",8),t.NdJ("click",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.closeDialog())}),t._uU(19),t.ALo(20,"translate"),t.qZA()()()}if(2&s){const o=_.ngIf;t.xp6(3),t.Oqu(o.feature.Name),t.xp6(2),t.Q6J("innerHtml",t.lcZ(6,7,o.feature.Description),t.oJD),t.xp6(4),t.hij("",t.lcZ(10,9,"Features.Status"),":"),t.xp6(4),t.Oqu(t.lcZ(14,11,o.feature.IsEnabled?"Features.Active":"Features.NotActive")),t.xp6(2),t.Q6J("ngIf",o.feature.NameId),t.xp6(2),t.Q6J("ngIf",o.feature.Link),t.xp6(2),t.hij(" ",t.lcZ(20,13,"Features.Close")," ")}}let c=(()=>{class s{constructor(o,d,m,v){this.dialogData=o,this.dialogRef=d,this.snackBar=m,this.featureDetailService=v}ngOnInit(){this.viewModel$=(0,I.a)([this.featureDetailService.getFeatureDetails(this.dialogData)]).pipe((0,u.U)(([o])=>({feature:o})))}copyToClipboard(o){(0,F.v)(o),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(o){window.open(o,"_blank")}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(d){return new(d||s)(t.Y36(f.WI),t.Y36(f.so),t.Y36(Z.ux),t.Y36(M.f))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-feature-info-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["class","eav-info-row",4,"ngIf"],["align","end"],["mat-raised-button","","color","accent","class","eav-card-action-button",3,"click",4,"ngIf"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"tippy","click"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click"]],template:function(d,m){1&d&&(t.YNc(0,y,21,15,"mat-card",0),t.ALo(1,"async")),2&d&&t.Q6J("ngIf",t.lcZ(1,1,m.viewModel$))},dependencies:[T.O5,E.lW,S.Hw,C.a8,C.hq,C.dn,C.dk,C.n5,P.$,T.Ov,b.z,U.X$]})}return s})();var h=n(8071),x=n(1891),O=n(7648);let N=(()=>{class s{set featureNameId(o){this.featureNameId$.next(o)}set showIf(o){this.showIf$.next(1==o)}constructor(o,d,m,v){this.dialog=o,this.viewContainerRef=d,this.changeDetectorRef=m,this.featuresService=v,this.featureNameId$=new h.X(null),this.showIf$=new h.X(!1),this.feature$=this.featureNameId$.pipe((0,x.w)(A=>this.featuresService.get$(A))),this.show$=(0,I.a)([this.feature$,this.showIf$]).pipe((0,u.U)(([A,$])=>$==(A?.IsEnabled??!1)))}openDialog(){s.openDialog(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static openDialog(o,d,m,v){o.open(c,{autoFocus:!1,data:d,viewContainerRef:m,width:"400px"}),v.markForCheck()}static#t=this.\u0275fac=function(d){return new(d||s)(t.Y36(f.uw),t.Y36(t.s_b),t.Y36(t.sBO),t.Y36(O.k))};static#e=this.\u0275dir=t.lG2({type:s,inputs:{featureNameId:"featureNameId",showIf:"showIf"}})}return s})()},6433:(D,g,n)=>{n.d(g,{f:()=>f});const f={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},4472:(D,g,n)=>{function f(I){const u=document.createElement("textarea");u.value=I,u.setAttribute("readonly",""),u.style.position="absolute",u.style.left="-9999px",document.body.appendChild(u);const F=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);u.select(),document.execCommand("copy"),document.body.removeChild(u),F&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(F))}n.d(g,{v:()=>f})}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.00.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts.9fc55d35359b74bd.js.map