"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-export_content-export_component_ts"],{2497:(P,c,a)=>{a.r(c),a.d(c,{ContentExportComponent:()=>D});var g=a(8071),f=a(4300),h=a(9731),x=a(5530),E=a(4323),t=a(9039),p=a(6861),C=a(91),l=a(6575),v=a(895),i=a(8849),u=a(1268),M=a(6355),T=a(257),d=a(2106);function Z(s,_){if(1&s&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&s){const o=_.$implicit;t.Q6J("value",o.NameId),t.xp6(1),t.Oqu(o.NameId)}}function A(s,_){if(1&s&&(t.TgZ(0,"mat-radio-button",25),t._uU(1),t.qZA()),2&s){const o=t.oxw(2);t.xp6(1),t.hij(" Export selected ",o.itemIds.length," items ")}}function O(s,_){if(1&s){const o=t.EpF();t.TgZ(0,"form",null,4)(2,"div",5)(3,"p"),t._uU(4," This will generate an XML file which you can edit in Excel. If you just want to import new data, use this to export the schema that you can then fill in using Excel. Please visit "),t.TgZ(5,"a",6),t._uU(6,"https://2sxc.org/help"),t.qZA(),t._uU(7," for more instructions. "),t.qZA(),t.TgZ(8,"div",7)(9,"div")(10,"mat-form-field",8)(11,"mat-label"),t._uU(12,"Languages"),t.qZA(),t.TgZ(13,"mat-select",9),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.formValues.language=n)}),t.TgZ(14,"mat-option",10),t._uU(15,"All"),t.qZA(),t.YNc(16,Z,2,2,"mat-option",11),t.qZA()()(),t.TgZ(17,"div")(18,"p",12),t._uU(19,"Export data"),t.qZA(),t.TgZ(20,"mat-radio-group",13),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.formValues.recordExport=n)}),t.TgZ(21,"mat-radio-button",14),t._uU(22,"No, just export blank data schema (for new data import) "),t.qZA(),t.TgZ(23,"mat-radio-button",15),t._uU(24,"Yes, export all content-items"),t.qZA(),t.YNc(25,A,2,1,"mat-radio-button",16),t.qZA()(),t.TgZ(26,"div")(27,"p",12),t._uU(28,"Value references to other languages"),t.qZA(),t.TgZ(29,"mat-radio-group",17),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.formValues.languageReferences=n)}),t.TgZ(30,"mat-radio-button",18),t._uU(31,"Keep references to other languages (for re-import) "),t.qZA(),t.TgZ(32,"mat-radio-button",19),t._uU(33,"Replace references with values"),t.qZA()()(),t.TgZ(34,"div")(35,"p",12),t._uU(36,"File / page references"),t.qZA(),t.TgZ(37,"mat-radio-group",20),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.formValues.resourcesReferences=n)}),t.TgZ(38,"mat-radio-button",18),t._uU(39,"Keep references (for re-import, for example Page:4711) "),t.qZA(),t.TgZ(40,"mat-radio-button",19),t._uU(41,"Replace references with real URLs (for example /Portals/0...) "),t.qZA()()()()(),t.TgZ(42,"mat-dialog-actions",21)(43,"button",22),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.closeDialog())}),t._uU(44,"Cancel"),t.qZA(),t.TgZ(45,"button",23),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.exportContent())}),t._uU(46," Export Data "),t.qZA()()()}if(2&s){const o=t.MAs(1),e=t.oxw();t.xp6(13),t.Q6J("ngModel",e.formValues.language),t.xp6(3),t.Q6J("ngForOf",e.languages),t.xp6(4),t.Q6J("ngModel",e.formValues.recordExport),t.xp6(5),t.Q6J("ngIf",e.hasIdList),t.xp6(4),t.Q6J("ngModel",e.formValues.languageReferences)("disabled","Blank"===e.formValues.recordExport),t.xp6(8),t.Q6J("ngModel",e.formValues.resourcesReferences)("disabled","Blank"===e.formValues.recordExport),t.xp6(8),t.Q6J("disabled",!o.form.valid)}}let D=(()=>{class s{constructor(o,e,n,r,I){this.dialogRef=o,this.route=e,this.contentExportService=n,this.appDialogConfigService=r,this.contentTypesService=I,this.hostClass="dialog-component",this.hasIdList=!1,this.loading$=new g.X(!1),this.contentType$=new g.X(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName");const m=this.route.snapshot.paramMap.get("selectedIds");this.hasIdList=!!m,this.hasIdList&&(this.itemIds=m.split(",").map(L=>parseInt(L,10)))}ngOnInit(){this.loading$.next(!0);const o=this.contentTypesService.retrieveContentType(this.contentTypeStaticName),e=this.appDialogConfigService.getShared$();(0,f.D)([o,e]).subscribe(([n,r])=>{this.contentType$.next(n),this.languages=r.Context.Language.List,this.formValues={defaultLanguage:r.Context.Language.Primary,contentTypeStaticName:this.contentTypeStaticName,language:"",recordExport:this.hasIdList?"Selection":"All",languageReferences:"Link",resourcesReferences:"Link"},this.loading$.next(!1)})}ngOnDestroy(){this.contentType$.complete(),this.loading$.complete()}closeDialog(){this.dialogRef.close()}exportContent(){this.contentExportService.exportContent(this.formValues,this.hasIdList&&"Selection"===this.formValues.recordExport?this.itemIds:null)}static#t=this.\u0275fac=function(e){return new(e||s)(t.Y36(p.so),t.Y36(C.gz),t.Y36(E.i),t.Y36(h.K),t.Y36(x.s))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-content-export"]],hostVars:1,hostBindings:function(e,n){2&e&&t.Ikx("className",n.hostClass)},decls:7,vars:6,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[4,"ngIf"],["ngForm","ngForm"],[1,"eav-dialog-content"],["href","https://2sxc.org/help","target","_blank"],[1,"dialog-form-content","fancy-scrollbar-light"],["color","accent",1,"eav-form-field"],["name","Language",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"eav-radio-group-label"],["name","RecordExport",1,"eav-radio-group",3,"ngModel","ngModelChange"],["value","Blank"],["value","All"],["value","Selection",4,"ngIf"],["name","LanguageReferences",1,"eav-radio-group",3,"ngModel","disabled","ngModelChange"],["value","Link"],["value","Resolve"],["name","ResourcesReferences",1,"eav-radio-group",3,"ngModel","disabled","ngModelChange"],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["value","Selection"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.ALo(4,"async"),t.qZA()(),t.YNc(5,O,47,9,"form",3),t.ALo(6,"async"),t.qZA()),2&e){let r;t.xp6(3),t.hij("Export ",null==(r=t.lcZ(4,2,n.contentType$))?null:r.Name,""),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(6,4,n.loading$))}},dependencies:[l.sg,l.O5,p.H8,v.lW,i._Y,i.JJ,i.JL,i.On,i.F,u.KE,u.hX,M.gD,T.ey,d.VQ,d.U0,l.Ov],styles:[".eav-radio-group-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.eav-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}"]})}return s})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.00.00/dist/ng-edit/projects_eav-ui_src_app_content-export_content-export_component_ts.99c72622a00a2827.js.map