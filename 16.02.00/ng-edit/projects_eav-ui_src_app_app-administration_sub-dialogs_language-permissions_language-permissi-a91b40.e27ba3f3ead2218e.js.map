{"version":3,"mappings":"4WAWO,IAAMA,EAAb,MAAM,QAKJC,OAAOC,GACLC,KAAKD,OAASA,EACdC,KAAKC,SAAWD,KAAKD,OAAOG,KAG9BC,QAAQJ,GACN,OAAO,EAGTK,kBACEJ,KAAKD,OAAOM,kBAAkBL,KAAKC,wDAf1BJ,8BAAoCS,6TCXjDC,iBAA+B,WACoCA,gCAASC,sBACxED,sBACgFA,kBAAMA,mBAD5EA,wDAAuC,+FDSxCV,GAAb,yDESO,IAAMY,EAAb,MAAM,gBAA4CC,IAIhDC,YACYC,EACAC,EACFC,EACAC,GAERC,MAAMJ,EAAQC,GALJb,cACAA,aACFA,iBACAA,mBAGRA,KAAKiB,aAAe,IAAIC,KACxBlB,KAAKmB,WAAa,IAAIC,SAAuDC,GAC7ErB,KAAKsB,YAActB,KAAKuB,mBAG1BC,WACExB,KAAKyB,eACLzB,KAAKiB,aAAaS,IAAI1B,KAAK2B,8BAA8BC,UAAU,KAAQ5B,KAAKyB,kBAGlFI,cACE7B,KAAKmB,WAAWW,WAChBd,MAAMa,cAGRE,cACE/B,KAAKc,UAAUkB,QAGjB5B,gBAAgBH,GACdD,KAAKY,OAAOqB,SAAS,CAACC,oBAA+BjC,EAASkC,SAAU,CAAEC,WAAYpC,KAAKa,QAGrFY,eACNzB,KAAKe,YAAYsB,0BAA0BT,UAAU,CACnDU,MAAO,KACLtC,KAAKmB,WAAWoB,UAAKlB,IAEvBkB,KAAOC,IACLxC,KAAKmB,WAAWoB,KAAKC,MAKnBjB,mBAmDN,OAlDiBkB,+BACZC,KAAkB,CACrBC,WAAY,CACV,CACEC,WAAY,KACZC,MAAO,KACPC,MAAO,GACPC,YAAa,QACbC,UAAW,kCAAkCC,MAAM,KACnDC,UAAU,EACVC,OAAQ,qBACRC,YAAcrD,GAC8BA,EAAOG,KACjCmD,KAElBC,aAAcC,IACdC,mBACyD,CACrDC,cAAgBxD,GAAa,OAAOA,EAASoD,SAKnD,CACER,MAAO,OACPa,KAAM,EACNC,SAAU,IACVX,UAAW,aACXE,UAAU,EACVU,KAAM,MACNT,OAAQ,qBACRC,YAAcrD,GAC8BA,EAAOG,KACjC2D,SAGpB,CACEf,MAAO,GACPE,UAAW,8BAA8BC,MAAM,KAC/Ca,OAAQ,QACRR,aAAczD,EACd2D,mBAAqB,MAC+B,CAChDnD,kBAAoBJ,GAAaD,KAAKI,gBAAgBH,KAFrC,qDAvFlBQ,GAA4BF,yEAA5BE,EAA4BH,6WCpBzCC,iBAAmC,UAAnCA,CAAmC,UAAnCA,CAAmC,SAGxBA,gCAAoBA,QACzBA,oBAA6CA,gCAASC,kBACpDD,oBAAUA,iBAAKA,cAKrBA,eACEA,6NAGFA,QAEAA,0BAEAA,kBACEA,gDAGAA,kBACFA,iBAJ6CA,oDAA8B,oGDChEE,GAAb","names":["LanguagesPermissionsActionsComponent","agInit","params","this","language","data","refresh","openPermissions","onOpenPermissions","selectors","i0","ctx","LanguagePermissionsComponent","BaseComponent","constructor","router","route","dialogRef","zoneService","super","subscription","Subscription","languages$","BehaviorSubject","undefined","gridOptions","buildGridOptions","ngOnInit","getLanguages","add","refreshOnChildClosedShallow","subscribe","ngOnDestroy","complete","closeDialog","close","navigate","GoToPermissions","NameId","relativeTo","getLanguagesPermissions","error","next","languages","Object","defaultGridOptions","columnDefs","headerName","field","width","headerClass","cellClass","split","sortable","filter","valueGetter","Code","cellRenderer","IdFieldComponent","cellRendererParams","tooltipGetter","flex","minWidth","sort","Culture","pinned"],"sources":["./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/languages-permissions-actions/languages-permissions-actions.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/languages-permissions-actions/languages-permissions-actions.component.html","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.html"],"sourcesContent":["import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { SiteLanguagePermissions } from '../../../../apps-management/models/site-language.model';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-languages-permissions-actions',\r\n  templateUrl: './languages-permissions-actions.component.html',\r\n  styleUrls: ['./languages-permissions-actions.component.scss'],\r\n})\r\nexport class LanguagesPermissionsActionsComponent implements ICellRendererAngularComp {\r\n  language: SiteLanguagePermissions;\r\n\r\n  private params: ICellRendererParams & LanguagesPermissionsActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & LanguagesPermissionsActionsParams): void {\r\n    this.params = params;\r\n    this.language = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openPermissions(): void {\r\n    this.params.onOpenPermissions(this.language);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"language.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!language.Permissions.Count\" matBadgePosition=\"below after\">person</mat-icon>\r\n  </div>\r\n</div>","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, filter, map, pairwise, startWith, Subscription } from 'rxjs';\r\nimport { SiteLanguagePermissions } from '../../../apps-management/models/site-language.model';\r\nimport { ZoneService } from '../../../apps-management/services/zone.service';\r\nimport { GoToPermissions } from '../../../permissions';\r\nimport { BaseComponent } from '../../../shared/components/base-component/base.component';\r\nimport { IdFieldComponent } from '../../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../../shared/constants/default-grid-options.constants';\r\nimport { LanguagesPermissionsActionsComponent } from './languages-permissions-actions/languages-permissions-actions.component';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions/languages-permissions-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-language-permissions',\r\n  templateUrl: './language-permissions.component.html',\r\n  styleUrls: ['./language-permissions.component.scss'],\r\n})\r\nexport class LanguagePermissionsComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  languages$: BehaviorSubject<SiteLanguagePermissions[] | undefined>;\r\n  gridOptions: GridOptions;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private dialogRef: MatDialogRef<LanguagePermissionsComponent>,\r\n    private zoneService: ZoneService,\r\n  ) {\r\n    super(router, route);\r\n    this.subscription = new Subscription();\r\n    this.languages$ = new BehaviorSubject<SiteLanguagePermissions[] | undefined>(undefined);\r\n    this.gridOptions = this.buildGridOptions();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getLanguages();\r\n    this.subscription.add(this.refreshOnChildClosedShallow().subscribe(() => { this.getLanguages(); }));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.languages$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  openPermissions(language: SiteLanguagePermissions): void {\r\n    this.router.navigate([GoToPermissions.getUrlLanguage(language.NameId)], { relativeTo: this.route });\r\n  }\r\n\r\n  private getLanguages(): void {\r\n    this.zoneService.getLanguagesPermissions().subscribe({\r\n      error: () => {\r\n        this.languages$.next(undefined);\r\n      },\r\n      next: (languages) => {\r\n        this.languages$.next(languages);\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'id-action no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguagePermissions = params.data;\r\n            return language.Code;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<SiteLanguagePermissions> = {\r\n              tooltipGetter: (language) => `ID: ${language.Code}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguagePermissions = params.data;\r\n            return language.Culture;\r\n          },\r\n        },\r\n        {\r\n          width: 42,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: LanguagesPermissionsActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: LanguagesPermissionsActionsParams = {\r\n              onOpenPermissions: (language) => this.openPermissions(language),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"nav-component-wrapper\">\r\n  <div mat-dialog-title>\r\n    <div class=\"dialog-title-box\">\r\n      <div>Language permissions</div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <p class=\"dialog-description\">\r\n    If no language permissions are defined, all editors can edit all languages.\r\n    As soon as you set any language permission, only the specified users\r\n    (or users in the specified groups) can edit these permissions.\r\n  </p>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <div class=\"grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"languages$ | async\" [gridOptions]=\"gridOptions\">\r\n    </ag-grid-angular>\r\n\r\n    <div class=\"grid-more-actions-box\"></div>\r\n  </div>\r\n</div>"],"sourceRoot":"webpack:///","file":"projects_eav-ui_src_app_app-administration_sub-dialogs_language-permissions_language-permissi-a91b40.e27ba3f3ead2218e.js"}