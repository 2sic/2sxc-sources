"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_replace-content_replace-content_ts-projects_eav-ui_src_app_shared_com-8a2740"],{30281(L,g,e){e.d(g,{$:()=>p});var m=e(27092),h=e(36124);let p=(()=>{class l{constructor(){this.subscriptions=new m.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(E){return new(E||l)}}static{this.\u0275cmp=h.VBU({type:l,selectors:[["app-base"]],decls:0,vars:0,template:function(E,n){},encapsulation:2})}}return l})()},50464(L,g,e){e.r(g),e.d(g,{ReplaceContentComponent:()=>x});var m=e(84344),h=e(37580),p=e(34456),l=e(79771),T=e(84175),M=e(20762),E=e(87941),n=e(24950),D=e(93840),P=e(59791),B=e(69393),f=e(12938),I=e(13620),A=e(32760),r=e(59669),y=e(34601),_=e(92324),O=e(30056),C=e(63628),b=e(60852),R=e(67993),d=e(56884),t=e(36124),W=e(3347),K=e(80423),j=e(96462),F=e(55326);function S(u,G){if(1&u&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&u){const o=G.$implicit;t.Y8G("value",o.label),t.R7$(),t.JRh(o.label)}}let x=(()=>{class u{#n;#t;constructor(o,s){this.dialog=o,this.snackBar=s,this.hostClass="dialog-component",this.#n=(0,f.d)(r.y),this.#t=(0,f.d)(b.c),this.#o=(0,I.C)(this.#t.getParams(["guid","part","index"]),a=>({guid:a.guid,part:a.part,index:parseInt(a.index,10)})),this.isAddMode=(0,R.KX)("isAddMode",!!this.#t.getQueryParam("add")),this.filterText=(0,h.geq)(""),this.#e=(0,R.KX)("options",[]),this.options=(0,R.bo)("filteredOptions",()=>{const a=this.filterText().toLocaleLowerCase();return this.#e().filter(i=>i.label.toLocaleLowerCase().includes(a))}),this.canSave=(0,R.bo)("isMatch",()=>this.options().map(a=>a.label).includes(this.filterText()))}#o;#s;#e;ngOnInit(){this.#_(),this.#i(!1,null),this.#t.doOnDialogClosed(()=>{const s=this.#t.router.getCurrentNavigation().extras?.state,a=s?.[Object.keys(s)[0]];this.#i(!0,a)})}closeDialog(){this.dialog.close()}select(o){this.filterText.set(o.option.value)}copySelected(){const o=this.#a(),s={items:[O.H.copy(this.#s,o.id)]},a=(0,_.s)(s);this.#t.navRelative([`edit/${a}`])}#i(o,s){const a=this.#a();this.#n.getItemsPromise(a).then(i=>{const v=Object.entries(i.Items).map(([c,U])=>({id:parseInt(c,10),label:`${U} (${c})`}));if(this.#e.set(v),!a.add&&!o||null!=s){const c=o?s:i.SelectedId,U=this.#e().find(V=>V.id===c)?.label||"";this.filterText.set(U)}this.#s=i.ContentTypeName})}#a(){const o=this.filterText();return{id:this.#e().find(i=>i.label===o)?.id??null,...this.#o,add:this.isAddMode()}}saveAndClose(){this.snackBar.open("Saving...");const o=this.#a();this.#n.saveItem(o).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}#_(){this.dialog.keydownEvents().subscribe(o=>{(0,A.YU)(o)&&this.canSave()&&(o.preventDefault(),this.saveAndClose())})}static{this.\u0275fac=function(s){return new(s||u)(t.rXU(E.CP),t.rXU(W.UG))}}static{this.\u0275cmp=t.VBU({type:u,selectors:[["app-replace-content"]],hostVars:1,hostBindings:function(s,a){2&s&&t.Avn("className",a.hostClass)},inputs:{filterText:[1,"filterText"]},outputs:{filterText:"filterTextChange"},decls:25,vars:11,consts:[["auto","matAutocomplete"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],[1,"eav-options-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","matAutocomplete","ngModel"],[3,"optionSelected","hideSingleSelectionIndicator"],["itemSize","48","minBufferPx","500","maxBufferPx","1000"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","","tippy","Create a Copy","tippyPlacement","top",3,"click","disabled"],["align","end"],[3,"action","ngClass","disabled"],[3,"value"]],template:function(s,a){if(1&s){const i=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){return d.eBV(i),d.Njj(a.closeDialog())}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",5),t.nrm(8,"router-outlet"),t.j41(9,"p"),t.EFF(10),t.k0s(),t.j41(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t.EFF(14,"Choose item"),t.k0s(),t.j41(15,"input",8),t.mxI("ngModelChange",function(c){return d.eBV(i),t.DH7(a.filterText,c)||(a.filterText=c),d.Njj(c)}),t.k0s(),t.j41(16,"mat-autocomplete",9,0),t.bIt("optionSelected",function(c){return d.eBV(i),d.Njj(a.select(c))}),t.j41(18,"cdk-virtual-scroll-viewport",10),t.DNE(19,S,2,2,"mat-option",11),t.k0s()()(),t.j41(20,"button",12),t.bIt("click",function(){return d.eBV(i),d.Njj(a.copySelected())}),t.j41(21,"mat-icon"),t.EFF(22,"file_copy"),t.k0s()()()(),t.j41(23,"mat-dialog-actions",13)(24,"app-save-close-button-fab",14),t.bIt("action",function(){return d.eBV(i),d.Njj(a.saveAndClose())}),t.k0s()()()}if(2&s){const i=t.sdS(17);t.R7$(3),t.SpI(" ",a.isAddMode()?"Add Existing Item":"Replace Content Item"," "),t.R7$(7),t.SpI("",a.isAddMode()?"Select a content-item to add to this list.":"By replacing a content-item you can make other content appear in the slot of the original content."," "),t.R7$(5),t.Y8G("matAutocomplete",i),t.R50("ngModel",a.filterText),t.R7$(),t.Y8G("hideSingleSelectionIndicator",!0),t.R7$(2),t.xc7("height",a.options().length<6?48*a.options().length:240,"px"),t.R7$(),t.Y8G("cdkVirtualForOf",a.options()),t.R7$(),t.Y8G("disabled",!a.canSave()),t.R7$(4),t.Y8G("ngClass",a.canSave()?"":"disabled")("disabled",!a.canSave())}},dependencies:[B.n3,n.RG,K.rl,K.nJ,P.fS,P.fg,l.jL,l.$3,j.wT,l.pN,p.YN,p.me,p.BC,p.vS,m.d6,m.yg,m.E$,M.S,T.Hl,F.iY,D.m_,D.An,E.E7,y.e,C.i],styles:[".eav-options-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]})}}return u})()},63628(L,g,e){e.d(g,{i:()=>A});var m=e(79748),h=e(85309),p=e(93840),l=e(90852),T=e(34601),M=e(18759),E=e(56884),n=e(36124),D=e(82272),P=e(74390),B=e(18934),f=e(17828);function I(r,y){if(1&r){const _=n.RV6();n.j41(0,"button",1),n.nI1(1,"translate"),n.nI1(2,"translate"),n.bIt("click",function(C){E.eBV(_);const b=n.XpG();return E.Njj(b.onClick(C))}),n.j41(3,"span"),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"span",2)(7,"kbd"),n.EFF(8,"\u2303"),n.k0s(),n.j41(9,"kbd"),n.EFF(10,"\u23ce"),n.k0s()(),n.j41(11,"mat-icon"),n.EFF(12),n.k0s()()}if(2&r){const _=n.XpG();n.Y8G("type",_.triggerOnFormSubmit()?"submit":"button")("tippy",n.bMT(1,6,_.label())+" ("+n.bMT(2,8,"Form.Buttons.ActionAndCloseShortcut")+")")("ngClass",_.ngClass())("disabled",_.isDisabled),n.R7$(4),n.JRh(n.bMT(5,10,_.label())),n.R7$(8),n.JRh(_.icon())}}let A=(()=>{class r extends M.d{static{this.\u0275fac=(()=>{let _;return function(C){return(_||(_=n.xGo(r)))(C||r)}})()}static{this.\u0275cmp=n.VBU({type:r,selectors:[["app-save-close-button-fab"]],features:[n.Vt3],decls:2,vars:0,consts:[["extendedFabSpeedDialTriggerContent",""],["tippyShowDelay","500","extended-fab-speed-dial-trigger","","matRipple","",3,"click","type","tippy","ngClass","disabled"],[1,"keybinding-hint"]],template:function(O,C){1&O&&(n.j41(0,"extended-fab-speed-dial"),n.DNE(1,I,13,12,"ng-template",0),n.k0s())},dependencies:[m.YU,p.m_,p.An,D.d,P.t,B.Q,h.p,f.r6,l.h,T.e,l.D9],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.keybinding-hint[_ngcontent-%COMP%]{display:inline-flex;align-items:center;font-size:.75rem;line-height:1.5}.keybinding-hint[_ngcontent-%COMP%]   kbd[_ngcontent-%COMP%] + kbd[_ngcontent-%COMP%]{margin-left:3px}"]})}}return r})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/21.01.00/dist/ng-edit/projects_eav-ui_src_app_replace-content_replace-content_ts-projects_eav-ui_src_app_shared_com-8a2740.b6cf364513ac9283.js.map