"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_code-editor_code-editor_module_ts-projects_eav-ui_src_app_shared_comp-2b2737"],{5530:(N,A,c)=>{c.d(A,{_:()=>O,s:()=>C});var l=c(9736),I=c(2611),P=c(1699),w=c(4860),b=c(6232);const O="admin/type/";let C=(()=>{var a;class f{constructor(g,_,S){this.http=g,this.context=_,this.dnnContext=S}apiUrl(g){return this.dnnContext.$2sxc.http.apiUrl(g)}retrieveContentType(g){return this.http.get(this.apiUrl(O+"get"),{params:{appId:this.context.appId.toString(),contentTypeId:g}})}retrieveContentTypes(g){return this.http.get(this.apiUrl(O+"list"),{params:{appId:this.context.appId.toString(),scope:g}})}getScopes(){return this.http.get(this.apiUrl(O+"scopes"),{params:{appId:this.context.appId.toString()}}).pipe((0,l.U)(g=>Object.keys(g).map(S=>({name:g[S],value:S}))))}save(g){return this.http.post(this.apiUrl(O+"save"),g,{params:{appid:this.context.appId.toString()}})}delete(g){return this.http.delete(this.apiUrl(O+"delete"),{params:{appid:this.context.appId.toString(),staticName:g.StaticName}})}import(g){const _=new FormData;for(const S of g)_.append("File",S);return this.http.post(this.apiUrl(O+"import"),_,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(g){return this.http.post(this.apiUrl(O+"addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:g}})}}return(a=f).\u0275fac=function(g){return new(g||a)(P.LFG(w.eN),P.LFG(I._),P.LFG(b._y))},a.\u0275prov=P.Yz7({token:a,factory:a.\u0275fac}),f})()},9681:(N,A,c)=>{c.r(A),c.d(A,{CodeEditorModule:()=>re,translateLoaderFactoryCode:()=>it});var l=c(6575),I=c(895),P=c(257),w=c(6861),b=c(6515),O=c(3910),C=c(9409),a=c(1916),f=c(7220),v=c(2380),g=c(2611),_=c(7138),S=c(8206),u=c(3739),x=c(91),T=c(8071),D=c(3839),L=c(4300),J=c(5584),U=c(1891),H=c(4980),V=c(9736),Y=c(9016),F=c(926),ot=c(9097),W=c(6115),t=c(1699);function st(i,p){if(1&i&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.BQk()),2&i){const o=t.oxw();t.xp6(2),t.AsE('"',o.snackBarData.fileName,'" also has a code-behind file "',o.snackBarData.codeFile,'".')}}function rt(i,p){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const o=t.oxw(2);t.xp6(1),t.hij(' You are editing "',o.snackBarData.edition,'" edition. ')}}function at(i,p){1&i&&(t.ynx(0),t._uU(1," You may be editing an edition which is not the one you see. "),t.BQk())}function ct(i,p){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,rt,2,1,"ng-container",1),t._uU(2),t.YNc(3,at,2,0,"ng-container",1),t._uU(4," See "),t.TgZ(5,"a",4),t._uU(6,"docs"),t.qZA(),t._uU(7,". "),t.qZA()),2&i){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.snackBarData.edition),t.xp6(1),t.AsE(" There are ",o.snackBarData.otherEditions,' other editions of "',o.snackBarData.fileName,'". '),t.xp6(1),t.Q6J("ngIf",!o.snackBarData.edition)}}function pt(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.openCodeBehind())}),t._uU(1," Open code-behind file "),t.qZA()}}let lt=(()=>{var i;class p{constructor(e,n){this.snackRef=e,this.snackBarData=n}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}}return(i=p).\u0275fac=function(e){return new(e||i)(t.Y36(C.OX),t.Y36(C.qD))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[4,"ngIf"],[1,"actions"],["mat-button","","color","primary",3,"click",4,"ngIf"],["href","https://go.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,st,4,2,"ng-container",1),t.YNc(2,ct,8,4,"div",1),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,pt,2,0,"button",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.snackBarData.codeFile),t.xp6(1),t.Q6J("ngIf",n.snackBarData.otherEditions),t.xp6(2),t.Q6J("ngIf",n.snackBarData.codeFile))},dependencies:[l.O5,I.lW],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]}),p})();const G={Templates:"Templates",Snippets:"Snippets"};var dt=c(3704),gt=c(6191),_t=c(5807),ut=c(4860),ht=c(6232);let z=(()=>{var i;class p{constructor(e,n,s){this.http=e,this.dnnContext=n,this.translate=s}getTooltips(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/Code/InlineHelp"),{params:{language:e}})}getSnippets(e){return this.http.get("../ng-assets/snippets.json.js").pipe((0,V.U)(n=>{const s=this.filterAwayNotNeededSnippetsList(n.snippets,e),r=this.extractInputTypeSnippets(s),d=this.initSnippetsWithConfig(r.standardArray,e,r.inputTypeSnippets);return{list:r.standardArray,sets:d}}))}filterAwayNotNeededSnippetsList(e,n){const s=["@","["],r=h=>h.Type.indexOf("Razor")>-1?0:1,d=[];for(const h of e){const m=s.indexOf(h.set[0]);(-1===m||m===r(n))&&(m===r(n)&&(h.set=h.set.substring(1)),d.push(h))}return d}extractInputTypeSnippets(e){const n=[],s=[];for(const h of e)"\\"===h.set[0]?(h.set=h.set.substring(1),s.push(h)):n.push(h);return{standardArray:n,inputTypeSnippets:this.catalogInputTypeSnippets(s)}}catalogInputTypeSnippets(e){const n={};for(const s of e)void 0===n[s.subset]&&(n[s.subset]=[]),n[s.subset].push(s);return n}initSnippetsWithConfig(e,n,s){const r=this.makeTree(e);return r.Content=Object.assign({},r.Content,{Fields:{},PresentationFields:{}}),n.TypeContent&&this.loadContentType(r.Content.Fields,n.TypeContent,"Content",n,s),n.TypeContentPresentation&&this.loadContentType(r.Content.PresentationFields,n.TypeContentPresentation,"Content.Presentation",n,s),n.HasList?(r.List=Object.assign({},r.List,{Fields:{},PresentationFields:{}}),n.TypeList&&this.loadContentType(r.List.Fields,n.TypeList,"Header",n,s),n.TypeListPresentation&&this.loadContentType(r.List.PresentationFields,n.TypeListPresentation,"Header.Presentation",n,s)):delete r.List,n.HasApp&&(r.App.Resources={},r.App.Settings={},this.loadContentType(r.App.Resources,"App-Resources","App.Resources",n,s),this.loadContentType(r.App.Settings,"App-Settings","App.Settings",n,s)),r}makeTree(e){const n={};for(const s of e){void 0===n[s.set]&&(n[s.set]={}),void 0===n[s.set][s.subset]&&(n[s.set][s.subset]=[]);const r={key:s.name,label:this.label(s.set,s.subset,s.name),snip:s.content,help:s.help||this.help(s.set,s.subset,s.name),links:this.linksList(s.links)};n[s.set][s.subset].push(r)}return n}label(e,n,s){const r=this.getHelpKey(e,n,s,".Key");let d=this.translate.instant(r);return d===r&&(d=s),d}getHelpKey(e,n,s,r){return"SourceEditorSnippets."+e+"."+n+"."+s+r}help(e,n,s){const r=this.getHelpKey(e,n,s,".Help");let d=this.translate.instant(r);return d===r&&(d=""),d}linksList(e){if(!e)return null;const n=[],s=e.split("\n");for(const r of s){const d=r.split(":");if(3===d.length){const h={name:d[0].trim(),url:d[1].trim()+":"+d[2].trim()};n.push(h)}}return 0===n.length?null:n}loadContentType(e,n,s,r,d){this.getFields(r.AppId,n).subscribe(h=>{for(const m of h){const y=m.StaticName;e[y]={key:y,label:y,snip:this.valuePlaceholder(s,y,r),help:m.Metadata.merged.Notes||" ("+m.Type.toLowerCase()+") "};const M=(0,dt.Z)(e[y]);this.attachSnippets(e,s,y,m.InputType,M,d)}if(h.length){const m=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let y=0;y<m.length;y++)e[m[y]]={key:m[y],label:m[y],snip:this.valuePlaceholder(s,m[y],r),help:this.translate.instant("SourceEditorSnippets.StandardFields."+m[y]+".Help")}}})}valuePlaceholder(e,n,s){return s.Type.indexOf("Razor")>-1?"@"+e+"."+n:"["+e.replace(".",":")+":"+n+"]"}getFields(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(_t.jt),{params:{appid:e.toString(),staticName:n}}).pipe((0,V.U)(s=>{s=s.filter(r=>r.Type!==gt.Q.Empty);for(const r of s){if(!r.Metadata)continue;const d=r.Metadata;d.merged={...d.All,...d[r.Type],...d[r.InputType]}}return s}))}attachSnippets(e,n,s,r,d,h){let m=h[r];if(r.indexOf("-")){const M=r.substring(0,r.indexOf("-"));if(M){const E=h[M];E&&(m=m?m.concat(E):E)}}if(!m)return;void 0===e[s].more&&(e[s].more={});const y=e[s].more;for(let M=0;M<m.length;M++)try{y[s+"-"+m[M].name]=Object.assign({},d,{key:s+" - "+m[M].name,label:m[M].name,snip:this.localizeGenericSnippet(m[M].content,n,s),collapse:!0})}finally{}}localizeGenericSnippet(e,n,s){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+n+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+s+"$2")}}return(i=p).\u0275fac=function(e){return new(e||i)(t.LFG(ut.eN),t.LFG(ht._y),t.LFG(a.sK))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),p})();var X=c(1485),q=c(6480),Q=c(131),ft=c(40),B=c(9498),vt=c(9424),Ct=c(6537);let xt=(()=>{var i;class p{transform(e){if(null!=e)return Array.isArray(e)?e:Object.values(e)}}return(i=p).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"objectToArray",type:i,pure:!0}),p})();function Tt(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"mat-icon",12),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,s=t.oxw(5);return t.KtG(s.toggleMore(n.key))}),t._uU(1),t.qZA()}if(2&i){const o=t.oxw().$implicit,e=t.oxw(5);t.xp6(1),t.hij(" ",e.toggledMores.includes(o.key)?"more_vert":"more_horiz"," ")}}function yt(i,p){if(1&i&&(t.TgZ(0,"div")(1,"a",15),t._uU(2),t.qZA()()),2&i){const o=p.$implicit;t.xp6(1),t.Q6J("href",o.url,t.LSH),t.xp6(1),t.Oqu(o.name)}}function St(i,p){if(1&i&&(t.TgZ(0,"div",13),t._UZ(1,"div",14),t.ALo(2,"safeHtml"),t.YNc(3,yt,3,2,"div",1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,2,o.help),t.oJD),t.xp6(2),t.Q6J("ngForOf",o.links)}}function It(i,p){if(1&i&&(t.TgZ(0,"div")(1,"a",15),t._uU(2),t.qZA()()),2&i){const o=p.$implicit;t.xp6(1),t.Q6J("href",o.url,t.LSH),t.xp6(1),t.Oqu(o.name)}}function bt(i,p){if(1&i&&(t.TgZ(0,"div",18),t._UZ(1,"div",14),t.ALo(2,"safeHtml"),t.YNc(3,It,3,2,"div",1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,2,o.help),t.oJD),t.xp6(2),t.Q6J("ngForOf",o.links)}}function wt(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"div",7)(2,"div",16),t.NdJ("click",function(){const s=t.CHM(o).$implicit,r=t.oxw(7);return t.KtG(r.addSnippet(s.snip))}),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",10),t.NdJ("click",function(){const s=t.CHM(o).$implicit,r=t.oxw(7);return t.KtG(r.toggleInfo(s.key))}),t._uU(5,"info"),t.qZA()(),t.YNc(6,bt,4,4,"div",17),t.qZA()}if(2&i){const o=p.$implicit,e=t.oxw(7);t.xp6(2),t.Q6J("tippy",o.snip),t.xp6(1),t.hij(" ",o.label," "),t.xp6(3),t.Q6J("ngIf",e.toggledInfos.includes(o.key))}}function Mt(i,p){if(1&i&&(t.ynx(0),t.YNc(1,wt,7,3,"div",1),t.ALo(2,"objectToArray"),t.BQk()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.more))}}function Ot(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8),t.NdJ("click",function(){const s=t.CHM(o).$implicit,r=t.oxw(5);return t.KtG(r.addSnippet(s.snip))}),t._uU(3),t.qZA(),t.YNc(4,Tt,2,1,"mat-icon",9),t.TgZ(5,"mat-icon",10),t.NdJ("click",function(){const s=t.CHM(o).$implicit,r=t.oxw(5);return t.KtG(r.toggleInfo(s.key))}),t._uU(6,"info"),t.qZA()(),t.YNc(7,St,4,4,"div",11),t.YNc(8,Mt,3,3,"ng-container",3),t.qZA()}if(2&i){const o=p.$implicit,e=t.oxw(5);t.xp6(2),t.Q6J("tippy",o.snip),t.xp6(1),t.hij(" ",o.label," "),t.xp6(1),t.Q6J("ngIf",o.more),t.xp6(3),t.Q6J("ngIf",e.toggledInfos.includes(o.key)),t.xp6(1),t.Q6J("ngIf",e.toggledMores.includes(o.key))}}function Pt(i,p){if(1&i&&(t.ynx(0),t.YNc(1,Ot,9,5,"div",5),t.ALo(2,"objectToArray"),t.BQk()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function Et(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"div",4),t.NdJ("click",function(){const s=t.CHM(o).$implicit,r=t.oxw(3);return t.KtG(r.toggleFolder(s.key))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,Pt,3,3,"ng-container",3),t.qZA()}if(2&i){const o=p.$implicit,e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("tippy",t.lcZ(2,4,"SourceEditorSnippets."+e.key+"."+o.key+".Help")),t.xp6(3),t.hij(" ",n.toggledFolders.includes(o.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(t.lcZ(7,6,"SourceEditorSnippets."+e.key+"."+o.key+".Title")),t.xp6(2),t.Q6J("ngIf",n.toggledFolders.includes(o.key))}}function At(i,p){if(1&i&&(t.ynx(0),t.YNc(1,Et,9,8,"div",1),t.ALo(2,"keyvalue"),t.BQk()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function Ft(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"div",2),t.NdJ("click",function(){const s=t.CHM(o).$implicit,r=t.oxw();return t.KtG(r.toggleSection(s.key))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,At,3,3,"ng-container",3),t.qZA()}if(2&i){const o=p.$implicit,e=t.oxw();t.xp6(1),t.Q6J("tippy",t.lcZ(2,4,"SourceEditorSnippets."+o.key+".Help")),t.xp6(3),t.hij(" ",e.toggledSections.includes(o.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(t.lcZ(7,6,"SourceEditorSnippets."+o.key+".Title")),t.xp6(2),t.Q6J("ngIf",e.toggledSections.includes(o.key))}}let kt=(()=>{var i;class p{constructor(){this.insertSnippet=new t.vpe,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){F.iX.toggleInArray(e,this.toggledSections)}toggleFolder(e){F.iX.toggleInArray(e,this.toggledFolders)}toggleInfo(e){F.iX.toggleInArray(e,this.toggledInfos)}toggleMore(e){F.iX.toggleInArray(e,this.toggledMores)}}return(i=p).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:3,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],[4,"ngFor","ngForOf"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],[4,"ngIf"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],["class","snippet",4,"ngFor","ngForOf"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750",3,"click",4,"ngIf"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help",4,"ngIf"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more",4,"ngIf"],[1,"snippet-help","snippet-help-more"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ft,9,8,"div",1),t.ALo(2,"keyvalue"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.snippets)))},dependencies:[Q.E,B.$,l.sg,l.O5,b.Hw,P.wG,Ct.z,l.Nd,a.X$,xt],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]}),p})();function tt(i){if(!i)return[];const p=[];for(const o of i){let e=p;const n=o.Path.split("/"),s=n[n.length-1];let r="";for(let d=0;d<n.length;d++){const h=n[d];r+=d?`/${h}`:h;const m=e.find(y=>y.name===h);if(m)e=m.children;else{const y={depth:d,name:h,pathFromRoot:r,isShared:o.Shared,isFolder:h!==s,...h!==s&&{children:[]}};e.push(y),e=y.children}}}return p}var j=c(8128);let Zt=(()=>{var i;class p{constructor(e){this.sanitizer=e}transform(e,n){let s;return s=n?8*e:0===e?8:8*e+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${s}px;`)}}return(i=p).\u0275fac=function(e){return new(e||i)(t.Y36(q.H7,16))},i.\u0275pipe=t.Yjl({name:"depthPadding",type:i,pure:!0}),p})(),Nt=(()=>{var i;class p{transform(e){return null==e||e.sort((n,s)=>n.isFolder<s.isFolder?1:n.isFolder>s.isFolder?-1:0),e}}return(i=p).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"sortItems",type:i,pure:!0}),p})();function Lt(i,p){1&i&&t.GkF(0)}const et=function(i){return{item:i}};function Jt(i,p){if(1&i&&(t.ynx(0),t.YNc(1,Lt,1,0,"ng-container",7),t.BQk()),2&i){const o=p.$implicit;t.oxw();const e=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.VKq(2,et,o))}}const $t=function(i){return{active:i}};function Ut(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().item,s=t.oxw();return t.KtG(s.openTemplate(n.pathFromRoot,n.isShared))}),t.ALo(1,"depthPadding"),t._uU(2),t.qZA()}if(2&i){const o=t.oxw().item,e=t.oxw();t.Akn(t.xi3(1,5,o.depth,o.isFolder)),t.Q6J("ngClass",t.VKq(8,$t,e.isToggled(o.pathFromRoot,o.isShared)))("tippy",o.name),t.xp6(2),t.hij(" ",o.name," ")}}function jt(i,p){1&i&&t.GkF(0)}function Rt(i,p){if(1&i&&(t.ynx(0),t.YNc(1,jt,1,0,"ng-container",7),t.BQk()),2&i){const o=p.$implicit;t.oxw(4);const e=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.VKq(2,et,o))}}function Ht(i,p){if(1&i&&(t.ynx(0),t.YNc(1,Rt,2,4,"ng-container",1),t.ALo(2,"sortItems"),t.BQk()),2&i){const o=t.oxw(2).item;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.children))}}const Vt=function(i){return{"app-shared-root":i}};function Qt(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"div",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().item,s=t.oxw();return t.KtG(s.toggleItem(n.pathFromRoot,n.isShared))}),t.ALo(2,"depthPadding"),t.TgZ(3,"div",12)(4,"mat-icon"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"div",13),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().item,s=t.oxw();return t.KtG(s.addFile(n.pathFromRoot,n.isShared))}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()()(),t.YNc(11,Ht,3,3,"ng-container",9),t.qZA()}if(2&i){const o=t.oxw().item,e=t.oxw();t.xp6(1),t.Akn(t.xi3(2,7,o.depth+1,o.isFolder)),t.Q6J("ngClass",t.VKq(10,Vt,o.depth<0)),t.xp6(2),t.Q6J("tippy",o.name),t.xp6(2),t.hij(" ",e.isToggled(o.pathFromRoot,o.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(o.name),t.xp6(4),t.Q6J("ngIf",e.isToggled(o.pathFromRoot,o.isShared))}}function Bt(i,p){if(1&i&&(t.YNc(0,Ut,3,10,"div",8),t.YNc(1,Qt,12,12,"div",9)),2&i){const o=p.item;t.Q6J("ngIf",!o.isFolder),t.xp6(1),t.Q6J("ngIf",o.isFolder)}}let Kt=(()=>{var i;class p{constructor(){this.openView=new t.vpe,this.createTemplate=new t.vpe,this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){if(null!=e.templates&&(this.tree=function Dt(i){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:tt(i.filter(o=>!o.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:tt(i.filter(o=>o.Shared))}]}(this.templates)),null!=e.view){const n=e.view?.previousValue;n&&this.toggleItem(n.FileName,n.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}isToggled(e,n){return(n?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,n){this.openView.emit({key:e,shared:n})}toggleItem(e,n){F.iX.toggleInArray(e,n?this.toggledItemsShared:this.toggledItemsApp)}addFile(e,n){this.createTemplate.emit({folder:e,isShared:n})}showFileInTree(e,n){if(null==e)return;const s=n?this.toggledItemsShared:this.toggledItemsApp;if(s.includes(e))return;const r=["",...e.split("/")];let d="";for(const h of r)d=d?`${d}/${h}`:h,!s.includes(d)&&this.toggleItem(d,n)}}return(i=p).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[t.TTD],decls:18,vars:4,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[4,"ngFor","ngForOf"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file","tippyPlacement","left",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy","click",4,"ngIf"],[4,"ngIf"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"ngClass","click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div"),t.YNc(2,Jt,2,4,"ng-container",1),t.ALo(3,"sortItems"),t.YNc(4,Bt,2,2,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(6,"div",3)(7,"button",4)(8,"mat-icon"),t._uU(9,"add"),t.qZA()(),t.TgZ(10,"mat-menu",null,5)(12,"button",6),t.NdJ("click",function(){return n.addFile("",!1)}),t.TgZ(13,"span"),t._uU(14,"App"),t.qZA()(),t.TgZ(15,"button",6),t.NdJ("click",function(){return n.addFile("",!0)}),t.TgZ(16,"span"),t._uU(17,"Shared (global)"),t.qZA()()()()()),2&e){const s=t.MAs(11);t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,2,n.tree)),t.xp6(5),t.Q6J("matMenuTriggerFor",s)}},dependencies:[Q.E,B.$,l.mk,l.sg,l.O5,l.tP,I.RK,b.Hw,j.VK,j.OP,j.p6,Zt,Nt],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]}),p})();function Yt(i,p){1&i&&(t.TgZ(0,"mat-icon",21),t._uU(1,"share"),t.qZA())}function Wt(i,p){1&i&&(t.TgZ(0,"mat-icon",22),t._uU(1,"circle"),t.qZA())}function Gt(i,p){1&i&&t._UZ(0,"mat-spinner",23)}const zt=function(i,p,o){return{active:i,modified:p,loading:o}};function Xt(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const s=t.CHM(o).$implicit,r=t.oxw(3);return t.KtG(r.openView(s.viewKey))}),t.TgZ(1,"div",14),t.YNc(2,Yt,2,0,"mat-icon",15),t.TgZ(3,"span",16),t._uU(4),t.qZA()(),t.TgZ(5,"div",17),t.YNc(6,Wt,2,0,"mat-icon",18),t.YNc(7,Gt,1,0,"mat-spinner",19),t.TgZ(8,"mat-icon",20),t.NdJ("click",function(){const s=t.CHM(o).$implicit,r=t.oxw(3);return t.KtG(r.closeEditor(s.viewKey))}),t._uU(9,"close"),t.qZA()()()}if(2&i){const o=p.$implicit;t.Q6J("ngClass",t.kEZ(6,zt,o.isActive,o.isModified,o.isLoading)),t.xp6(1),t.Q6J("tippy",o.label),t.xp6(1),t.Q6J("ngIf",o.viewKey.shared),t.xp6(2),t.Oqu(o.label),t.xp6(2),t.Q6J("ngIf",o.isModified),t.xp6(1),t.Q6J("ngIf",o.isLoading)}}function qt(i,p){if(1&i&&(t.TgZ(0,"div",11),t.YNc(1,Xt,10,10,"div",12),t.qZA()),2&i){const o=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",o.tabs)}}function te(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"app-monaco-editor",24),t.NdJ("valueChanged",function(n){t.CHM(o);const s=t.oxw().ngIf,r=t.oxw();return t.KtG(r.codeChanged(n,s.viewKey))}),t.qZA()}if(2&i){const o=t.oxw().ngIf,e=t.oxw();t.Q6J("filename",o.view.FileName)("value",o.view.Code)("options",e.monacoOptions)("snippets",o.editorSnipps)("tooltips",o.tooltips)("autoFocus",!0)}}function ee(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(2);return t.KtG(n.save())}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA()()}}const ne=function(i){return{"sxc-dark":i}},nt=function(i){return{active:i}};function ie(i,p){if(1&i){const o=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.toggleExplorer(n.Explorers.Templates))}),t.TgZ(3,"mat-icon"),t._uU(4,"file_copy"),t.qZA()(),t.TgZ(5,"div",4),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.toggleExplorer(n.Explorers.Snippets))}),t.TgZ(6,"mat-icon"),t._uU(7,"code"),t.qZA()()(),t.TgZ(8,"app-code-templates",5),t.NdJ("openView",function(n){t.CHM(o);const s=t.oxw();return t.KtG(s.openView(n))})("createTemplate",function(n){t.CHM(o);const s=t.oxw();return t.KtG(s.createTemplate(n))}),t.qZA(),t.TgZ(9,"app-code-snippets",6),t.NdJ("insertSnippet",function(n){t.CHM(o);const s=t.oxw();return t.KtG(s.insertSnippet(n))}),t.qZA(),t.TgZ(10,"div",7),t.YNc(11,qt,2,1,"div",8),t.YNc(12,te,1,6,"app-monaco-editor",9),t.qZA(),t.YNc(13,ee,3,0,"button",10),t.qZA()}if(2&i){const o=p.ngIf,e=t.oxw();t.Q6J("ngClass",t.VKq(11,ne,"2sxc-dark"===e.monacoOptions.theme)),t.xp6(2),t.Q6J("ngClass",t.VKq(13,nt,e.activeExplorer===e.Explorers.Templates)),t.xp6(3),t.Q6J("ngClass",t.VKq(15,nt,e.activeExplorer===e.Explorers.Snippets)),t.xp6(3),t.Q6J("hidden",e.activeExplorer!==e.Explorers.Templates)("view",o.view)("templates",o.templates),t.xp6(1),t.Q6J("hidden",e.activeExplorer!==e.Explorers.Snippets)("snippets",o.explorerSnipps),t.xp6(2),t.Q6J("ngIf",o.tabs.length>0),t.xp6(1),t.Q6J("ngIf",o.view),t.xp6(1),t.Q6J("ngIf",o.activeView)}}const oe=[{path:"",component:(()=>{var i;class p extends ot.f{constructor(e,n,s,r,d,h,m,y,M){super(),this.context=e,this.route=n,this.snackBar=s,this.sourceService=r,this.snippetsService=d,this.zone=h,this.titleService=m,this.dialog=y,this.viewContainerRef=M,this.Explorers=G,this.activeExplorer=G.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2,fixedOverflowWidgets:!0},this.context.init(this.route);const E=JSON.parse(sessionStorage.getItem(W.kF)),Z="true"===sessionStorage.getItem(W.PH);E.forEach(k=>{k.Path.startsWith("/")&&(k.Path=k.Path.substring(1)),k.IsShared??=Z}),this.urlItems=E}ngOnInit(){this.templates$=new T.X([]);const e=this.urlItems.map(n=>({key:n.EntityId?.toString()??n.Path,shared:n.IsShared}));this.activeView$=new T.X(e[0]),this.openViews$=new T.X(e),this.viewInfos$=new T.X([]),this.attachListeners(),this.sourceService.getAll().subscribe(n=>{this.templates$.next(n)}),this.subscription.add((0,D.a)([this.templates$,this.openViews$]).subscribe(([n,s])=>{if(0===n.length)return;let r=this.viewInfos$.value;const d=s.filter(h=>!r.some(m=>F.iX.objectsEqual(m.viewKey,h)));0!==d.length&&((0,L.D)(d.map(h=>{const m={viewKey:h};r=[...r,m];const y=this.sourceService.get(h.key,h.shared,this.urlItems).pipe((0,J.B)()),M=y.pipe((0,U.w)(Z=>this.snippetsService.getSnippets(Z))),E=y.pipe((0,U.w)(Z=>this.snippetsService.getTooltips(Z.Extension.substring(1))));return(0,L.D)([(0,H.of)(h),y,M,E])})).subscribe(h=>{let m=this.viewInfos$.value;h.forEach(([y,M,E,Z])=>{const k=m.findIndex($=>F.iX.objectsEqual($.viewKey,y));if(k<0)return;const R={viewKey:y,view:M,explorerSnipps:E.sets,editorSnipps:E.list,tooltips:Z,savedCode:M.Code};m=[...m.slice(0,k),R,...m.slice(k+1)],this.showCodeAndEditionWarnings(y,M,n)}),this.viewInfos$.next(m)}),this.viewInfos$.next(r))})),this.subscription.add((0,D.a)([this.activeView$,this.viewInfos$]).subscribe(([n,s])=>{const r=s.find(y=>F.iX.objectsEqual(y.viewKey,n)),d="Code Editor",h=null==r?d:`${r.view?.FileName} - ${d}`;h!==this.titleService.getTitle()&&this.titleService.setTitle(h)})),this.viewModel$=(0,D.a)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,V.U)(([n,s,r,d])=>{const h=r.map(M=>{const E=d.find(k=>F.iX.objectsEqual(k.viewKey,M));return{viewKey:M,label:E?.view?.FileName??M.key,isActive:F.iX.objectsEqual(M,s),isModified:E?.view?.Code!==E?.savedCode,isLoading:null==E?.view}}),m=d.find(M=>F.iX.objectsEqual(M.viewKey,s));return{activeView:s,tabs:h,viewKey:m?.viewKey,view:m?.view,templates:n,explorerSnipps:m?.explorerSnipps,editorSnipps:m?.editorSnipps,tooltips:m?.tooltips}}))}ngOnDestroy(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),super.ngOnDestroy()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){const n={folder:e.folder,global:e.isShared,purpose:"api"===e.folder||e.folder?.startsWith("api/")?"Api":void 0};this.dialog.open(f.UH,{autoFocus:!1,data:n,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(r=>{r&&this.sourceService.create(r.name,e.isShared,r.templateKey).subscribe(()=>{this.sourceService.getAll().subscribe(d=>{this.templates$.next(d)})})})}insertSnippet(e){this.monacoEditorRef?.insertSnippet(e)}codeChanged(e,n){let s=this.viewInfos$.value;const r=s.findIndex(m=>F.iX.objectsEqual(m.viewKey,n)),d=s[r],h={...d,view:{...d.view,Code:e}};s=[...s.slice(0,r),h,...s.slice(r+1)],this.viewInfos$.next(s)}openView(e){e=this.viewInfos$.value.find(r=>!F.iX.objectsEqual(r.viewKey,e)&&r.view?.FileName===e.key&&r.view?.IsShared===e.shared)?.viewKey??e,F.iX.objectsEqual(this.activeView$.value,e)||this.activeView$.next(e);const s=this.openViews$.value;if(!s.some(r=>F.iX.objectsEqual(r,e))){const r=[...s,e];this.openViews$.next(r)}}closeEditor(e){const n=this.openViews$.value,s=n.filter(d=>!F.iX.objectsEqual(d,e)),r=this.activeView$.value;if(F.iX.objectsEqual(r,e)){const d=n[n.findIndex(h=>F.iX.objectsEqual(h,r))-1]??s[0];this.activeView$.next(d)}this.openViews$.next(s)}save(e){e??=this.activeView$.value;const n=this.viewInfos$.value.find(r=>F.iX.objectsEqual(r.viewKey,e));if(null==n?.view)return;this.snackBar.open("Saving...");const s=n.view.Code;this.sourceService.save(e.key,e.shared,n.view,this.urlItems).subscribe({next:r=>{if(!r)return void this.snackBar.open("Failed",null,{duration:2e3});let d=[...this.viewInfos$.value];const h=d.findIndex(M=>F.iX.objectsEqual(M.viewKey,e));if(h<0)return;const y={...d[h],savedCode:s};d=[...d.slice(0,h),y,...d.slice(h+1)],this.viewInfos$.next(d),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>{this.snackBar.open("Failed",null,{duration:2e3})}})}showCodeAndEditionWarnings(e,n,s){const r=n.FileName,d=r.indexOf("/")>-1?r.lastIndexOf("/")+1:0,h=0===d?"":r.substring(0,d),m=r.substring(d),M=m.substring(0,m.length-n.Extension.length)+".code"+n.Extension,E=s.find(k=>k.Path===h+M&&k.Shared===n.IsShared),Z=s.filter(k=>k.Path.endsWith(m)&&k.Shared===n.IsShared).length-1;if(E||Z){const k={fileName:m,codeFile:E?.Path,edition:this.urlItems.find($=>$.EntityId?.toString()===e.key&&$.IsShared===n.IsShared&&$.Path===n.FileName)?.Edition,otherEditions:Z,openCodeBehind:!1},R=this.snackBar.openFromComponent(lt,{data:k,duration:1e4});R.onAction().subscribe(()=>{R.containerInstance.snackBarConfig.data.openCodeBehind&&this.openView({key:E?.Path,shared:E?.Shared})})}}attachListeners(){this.zone.runOutsideAngular(()=>{this.subscription.add((0,Y.R)(window,"beforeunload").subscribe(e=>{this.viewInfos$.value.some(s=>null!=s.view&&s.view.Code!==s.savedCode)&&(e.preventDefault(),e.returnValue="")})),this.subscription.add((0,Y.R)(window,"keydown").subscribe(e=>{83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.zone.run(()=>{this.save()}))}))})}}return(i=p).\u0275fac=function(e){return new(e||i)(t.Y36(g._),t.Y36(x.gz),t.Y36(C.ux),t.Y36(X.t),t.Y36(z),t.Y36(t.R0b),t.Y36(q.Dx),t.Y36(w.uw),t.Y36(t.s_b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-code-editor"]],viewQuery:function(e,n){if(1&e&&t.Gf(v.T,5),2&e){let s;t.iGM(s=t.CRH())&&(n.monacoEditorRef=s.first)}},features:[t.qOj],decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",3,"ngClass",4,"ngIf"],["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates","openView","createTemplate"],[3,"hidden","snippets","insertSnippet"],[1,"editor-group"],["class","tabs-container fancy-scrollbar-dark",4,"ngIf"],[3,"filename","value","options","snippets","tooltips","autoFocus","valueChanged",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click",4,"ngIf"],[1,"tabs-container","fancy-scrollbar-dark"],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tab",3,"ngClass","click"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],["class","icon-shared",4,"ngIf"],[1,"tab-label"],[1,"tab-actions-container"],["class","tab-action icon-modified","fontSet","material-icons",4,"ngIf"],["class","spinner","mode","indeterminate","diameter","14","color","white",4,"ngIf"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[1,"icon-shared"],["fontSet","material-icons",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],[3,"filename","value","options","snippets","tooltips","autoFocus","valueChanged"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,ie,14,17,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.viewModel$))},dependencies:[Q.E,ft.D,B.$,l.mk,l.sg,l.O5,I.cs,b.Hw,vt.T,O.Ou,kt,Kt,l.Ov],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid rgb(37,37,38);background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-mdc-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),p})()}];let se=(()=>{var i;class p{}return(i=p).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.Bz.forChild(oe),x.Bz]}),p})();function it(i){return new S.M(i,"./i18n/code-editor.",`.js?${window.sxcVersion}`)}let re=(()=>{var i;class p{}return(i=p).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[g._,X.t,z,a.sK],imports:[se,_.q,l.ez,w.Is,I.ot,b.Ps,C.ZX,P.si,j.Tx,a.aw.forChild((0,u.f)(it)),v.n,O.Cq,f.qH]}),p})()},5807:(N,A,c)=>{c.d(A,{Mr:()=>v,jt:()=>a});var l=c(9736),I=c(5530),P=c(2611),w=c(1699),b=c(4860),O=c(6232);const C="admin/field/",a="admin/field/all",f="admin/field/GetSharedFields";let v=(()=>{var g;class _{constructor(u,x,T){this.http=u,this.context=x,this.dnnContext=T}apiUrl(u){return this.dnnContext.$2sxc.http.apiUrl(u)}typeListRetrieve(){return this.http.get(this.apiUrl(C+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(C+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,l.U)(u=>u.map(T=>({dataType:T.Type.substring(0,T.Type.indexOf("-")),inputType:T.Type,label:T.Label,description:T.Description,isDefault:T.IsDefault,isObsolete:T.IsObsolete,isRecommended:T.IsRecommended,obsoleteMessage:T.ObsoleteMessage,icon:T.IsDefault?"star":T.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(C+"ReservedNames"))}getFields(u){return this.http.get(this.apiUrl(a),{params:{appid:this.context.appId.toString(),staticName:u}}).pipe((0,l.U)(x=>{if(x)for(const T of x){if(!T.Metadata)continue;const D=T.Metadata;D.merged={...D.All,...D[T.Type],...D[T.InputType]}}return x}))}getShareableFields(){return this.http.get(this.apiUrl(f),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(u){return this.http.get(this.apiUrl(f),{params:{appid:this.context.appId.toString(),attributeId:u.toString()}})}addInheritedField(u,x,T,D){return this.http.post(this.apiUrl(C+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:u.toString(),SourceType:x,SourceField:T,name:D}})}share(u,x=!0){return this.http.post(this.apiUrl(C+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:u.toString(),share:x}})}inherit(u,x){return this.http.post(this.apiUrl(C+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:u.toString(),inheritMetadataOf:x}})}reOrder(u,x){return this.http.post(this.apiUrl(C+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:x.Id.toString(),order:JSON.stringify(u)}})}setTitle(u,x){return this.http.post(this.apiUrl(I._+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:x.Id.toString(),attributeId:u.Id.toString()}})}rename(u,x,T){return this.http.post(this.apiUrl(C+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:x.toString(),attributeId:u.toString(),newName:T}})}delete(u,x){if(u.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(C+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:x.Id.toString(),attributeId:u.Id.toString()}})}add(u,x){return this.http.post(this.apiUrl(C+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:x.toString(),Id:u.Id.toString(),Type:u.Type,InputType:u.InputType,StaticName:u.StaticName,IsTitle:u.IsTitle.toString(),Index:u.SortOrder.toString()}})}updateInputType(u,x,T){return this.http.post(this.apiUrl(C+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:u.toString(),field:x,inputType:T}})}}return(g=_).\u0275fac=function(u){return new(u||g)(w.LFG(b.eN),w.LFG(P._),w.LFG(O._y))},g.\u0275prov=w.Yz7({token:g,factory:g.\u0275fac}),_})()},2380:(N,A,c)=>{c.d(A,{T:()=>l.T,n:()=>w});var l=c(9424),I=c(6575),P=c(1699);let w=(()=>{var b;class O{}return(b=O).\u0275fac=function(a){return new(a||b)},b.\u0275mod=P.oAB({type:b}),b.\u0275inj=P.cJS({imports:[I.ez]}),O})()},9424:(N,A,c)=>{c.d(A,{T:()=>O});var l=c(1699);const P="area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr".split(",").map(C=>C.trim().toLocaleLowerCase());class w{constructor(a,f,v,g,_,S,u){this.monaco=a,this.filename=f,this.snippets=S,this.tooltips=u,this.globalCache=this.createGlobalCache(a),this.defineThemes(this.globalCache,this.monaco),this.cachedValue=v,this.editorInstance=this.createInstance(this.monaco,f,v,g,_),this.completionItemProviders=this.addSnippets(this.monaco,this.editorInstance),this.resizeObserver=this.createResizeObserver(g,this.editorInstance),this.restoreState(this.globalCache,this.editorInstance),this.addEvents(this.editorInstance)}destroy(){this.saveState(this.globalCache,this.editorInstance),this.resizeObserver.disconnect(),this.completionItemProviders.forEach(a=>a.dispose()),this.jsTypingsLib?.dispose(),this.editorInstance.getModel().dispose(),this.editorInstance.dispose()}updateValue(a){this.cachedValue!==a&&(this.cachedValue=a,this.editorInstance.getModel().setValue(a))}focus(){this.editorInstance.focus()}onValueChange(a){this.valueChangedCallback=a}onFocus(a){this.focusedCallback=a}onBlur(a){this.blurredCallback=a}insertSnippet(a){this.editorInstance.getContribution("snippetController2").insert(a)}setSnippets(a){this.snippets=a}setTooltips(a){this.tooltips=a}setJsonSchema(a){const f=this.editorInstance.getModel().uri.toString(),v=this.monaco.languages.json.jsonDefaults.diagnosticsOptions,g=v.schemas?.some(u=>u.fileMatch[0]===f)??!1,_="link"===a?.type?{uri:a.value,fileMatch:[f]}:"raw"===a?.type?{uri:f,fileMatch:[f],schema:JSON.parse(a.value)}:void 0;if(!g&&!_)return;const S={...v,enableSchemaRequest:!0,schemas:g&&!_?v.schemas.filter(u=>u.fileMatch[0]!==f):g?v.schemas.map(u=>u.fileMatch[0]===f?_:u):[...v.schemas??[],_]};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(S)}setJsonComments(a){if(!a)return;const f={...this.monaco.languages.json.jsonDefaults.diagnosticsOptions,comments:a};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(f)}setJsDiagnostics(a){if(!a)return;const f={...this.monaco.languages.typescript.javascriptDefaults.getDiagnosticsOptions(),...a};this.monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions(f)}setJsTypings(a){a?this.jsTypingsLib=this.monaco.languages.typescript.javascriptDefaults.addExtraLib(a,`js-typings-${this.filename}`):this.jsTypingsLib?.dispose()}createGlobalCache(a){return null==a._2sxc&&(a._2sxc={themesAreDefined:!1,savedStates:{}}),a._2sxc}defineThemes(a,f){a.themesAreDefined||(a.themesAreDefined=!0,f.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}],colors:{}}))}createInstance(a,f,v,g,_){const S=a.editor.create(g,_),u=a.Uri.file(f),x=a.editor.createModel(v,void 0,u);return S.setModel(x),S}saveState(a,f){const v=f.getModel().uri.toString(),g=JSON.stringify(f.saveViewState());null==a.savedStates[v]?a.savedStates[v]={viewState:g}:a.savedStates[v].viewState=g}restoreState(a,f){const v=f.getModel().uri.toString(),g=a.savedStates[v];if(null==g)return;const _=JSON.parse(g.viewState);f.restoreViewState(_)}addSnippets(a,f){return[a.languages.registerCompletionItemProvider(f.getModel().getLanguageId(),{triggerCharacters:[">"],provideCompletionItems:(g,_)=>{if(f.getModel()!==g)return{suggestions:[]};const S=g.getValueInRange({startLineNumber:_.lineNumber,startColumn:1,endLineNumber:_.lineNumber,endColumn:_.column});if(">"!==S[S.length-1])return{suggestions:[]};const x=S.lastIndexOf("<");if(-1===x)return{suggestions:[]};const T=S.substring(x);let D=0;if(Array.from(T).forEach(H=>{'"'===H&&D++}),D%2!=0)return{suggestions:[]};if(T.startsWith("</"))return{suggestions:[]};if(T.indexOf(">")!==T.length-1)return{suggestions:[]};let L=T.indexOf(" ");if(-1===L&&(L=T.indexOf(">")),-1===L)return{suggestions:[]};const J=T.substring(1,L);return J?P.includes(J.toLocaleLowerCase())?{suggestions:[]}:/[a-zA-Z0-9_-]/.test(J)?{suggestions:[{label:`</${J}>`,kind:a.languages.CompletionItemKind.Snippet,insertText:`$0</${J}>`,insertTextRules:a.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:_.lineNumber,endLineNumber:_.lineNumber,startColumn:_.column,endColumn:_.column}}]}:{suggestions:[]}:{suggestions:[]}}}),a.languages.registerCompletionItemProvider(f.getModel().getLanguageId(),{provideCompletionItems:(g,_)=>{if(null==this.snippets||f.getModel()!==g)return{suggestions:[]};const S=g.getWordUntilPosition(_);return{suggestions:this.snippets.map(x=>x.content?{label:x.name,kind:a.languages.CompletionItemKind.Snippet,documentation:`${x.title??""}\n${x.help??""}\n${x.links??""}`,insertText:x.content,insertTextRules:a.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:_.lineNumber,endLineNumber:_.lineNumber,startColumn:S.startColumn,endColumn:S.endColumn}}:void 0).filter(x=>!!x)}}}),a.languages.registerHoverProvider(f.getModel().getLanguageId(),{provideHover:(g,_)=>{if(null==this.tooltips||f.getModel()!==g)return;const S=g.getWordAtPosition(_);if(!S)return;const u=this.tooltips.find(x=>x.Term===S.word);return u?{contents:u.Help.map(x=>({value:x})),range:{startLineNumber:_.lineNumber,endLineNumber:_.lineNumber,startColumn:S.startColumn,endColumn:S.endColumn}}:void 0}})]}createResizeObserver(a,f){const v=new ResizeObserver(()=>{f.layout()});return v.observe(a),v}addEvents(a){a.getModel().onDidChangeContent(()=>{const f=a.getModel().getValue();f!==this.cachedValue&&(this.cachedValue=f,this.valueChangedCallback?.(f))}),a.onDidFocusEditorWidget(()=>{this.focusedCallback?.()}),a.onDidBlurEditorWidget(()=>{this.blurredCallback?.()})}}const b=["editor"];let O=(()=>{var C;class a{constructor(){this.autoFocus=!1,this.valueChanged=new l.vpe,this.focused=new l.vpe,this.blurred=new l.vpe}ngAfterViewInit(){window.require.config({paths:{vs:["https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs"]}}),window.require(["vs/editor/editor.main"],v=>{this.monaco=v,this.createEditor(this.autoFocus)})}ngOnChanges(v){null!=v.filename&&null!=this.monacoInstance&&(this.monacoInstance.destroy(),this.createEditor(!0)),null!=v.value&&this.monacoInstance?.updateValue(this.value),null!=v.jsonSchema&&this.monacoInstance?.setJsonSchema(this.jsonSchema),null!=v.jsonComments&&this.monacoInstance?.setJsonComments(this.jsonComments),null!=v.snippets&&this.monacoInstance?.setSnippets(this.snippets),null!=v.tooltips&&this.monacoInstance?.setTooltips(this.tooltips),null!=v.jsTypings&&this.monacoInstance?.setJsTypings(this.jsTypings),null!=v.jsDiagnostics&&this.monacoInstance?.setJsDiagnostics(this.jsDiagnostics)}insertSnippet(v){this.monacoInstance?.insertSnippet(v),this.monacoInstance?.focus()}ngOnDestroy(){this.monacoInstance?.destroy()}createEditor(v){this.monacoInstance=new w(this.monaco,this.filename,this.value,this.editorRef.nativeElement,this.options,this.snippets,this.tooltips),this.monacoInstance.setJsonSchema(this.jsonSchema),this.monacoInstance.setJsonComments(this.jsonComments),this.monacoInstance.setJsTypings(this.jsTypings),this.monacoInstance.setJsDiagnostics(this.jsDiagnostics),this.monacoInstance.onValueChange(g=>{this.valueChanged.emit(g)}),this.monacoInstance.onFocus(()=>{this.focused.emit()}),this.monacoInstance.onBlur(()=>{this.blurred.emit()}),v&&this.monacoInstance.focus()}}return(C=a).\u0275fac=function(v){return new(v||C)},C.\u0275cmp=l.Xpm({type:C,selectors:[["app-monaco-editor"]],viewQuery:function(v,g){if(1&v&&l.Gf(b,5),2&v){let _;l.iGM(_=l.CRH())&&(g.editorRef=_.first)}},inputs:{filename:"filename",value:"value",snippets:"snippets",tooltips:"tooltips",options:"options",jsonSchema:"jsonSchema",jsonComments:"jsonComments",jsTypings:"jsTypings",jsDiagnostics:"jsDiagnostics",autoFocus:"autoFocus"},outputs:{valueChanged:"valueChanged",focused:"focused",blurred:"blurred"},features:[l.TTD],decls:2,vars:0,consts:[[1,"editor"],["editor",""]],template:function(v,g){1&v&&l._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}.editor[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]}),a})()},9851:(N,A,c)=>{c.d(A,{Y:()=>g});var l=c(1699),I=c(6575),P=c(1268);function w(_,S){1&_&&l.GkF(0)}function b(_,S){if(1&_&&(l.TgZ(0,"mat-hint"),l.YNc(1,w,1,0,"ng-container",3),l.qZA()),2&_){l.oxw();const u=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",u)}}function O(_,S){1&_&&l.GkF(0)}function C(_,S){if(1&_&&(l.TgZ(0,"mat-error"),l.YNc(1,O,1,0,"ng-container",3),l.qZA()),2&_){l.oxw();const u=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",u)}}function a(_,S){1&_&&l.Hsn(0)}const f=function(_){return{"hint-box__short":_}},v=["*"];let g=(()=>{var _;class S{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return(_=S).\u0275fac=function(x){return new(x||_)},_.\u0275cmp=l.Xpm({type:_,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:v,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(x,T){1&x&&(l.F$t(),l.TgZ(0,"div",0),l.NdJ("click",function(){return T.toggleIsShort()}),l.YNc(1,b,2,1,"mat-hint",1),l.YNc(2,C,2,1,"mat-error",1),l.qZA(),l.YNc(3,a,1,0,"ng-template",null,2,l.W1O)),2&x&&(l.Q6J("ngClass",l.VKq(4,f,T.isShort))("ngSwitch",T.isError),l.xp6(1),l.Q6J("ngSwitchCase",!1),l.xp6(1),l.Q6J("ngSwitchCase",!0))},dependencies:[I.mk,I.tP,I.RF,I.n9,P.bx,P.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),S})()},40:(N,A,c)=>{c.d(A,{D:()=>P});var l=c(3488),I=c(1699);let P=(()=>{var w;class b{constructor(C){this.globalConfigService=C}onClick(C){(navigator.platform.match("Mac")?C.metaKey:C.ctrlKey)&&C.shiftKey&&C.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}}return(w=b).\u0275fac=function(C){return new(C||w)(I.Y36(l.bE))},w.\u0275dir=I.lG2({type:w,selectors:[["","appToggleDebug",""]],hostBindings:function(C,a){1&C&&I.NdJ("click",function(v){return a.onClick(v)})}}),b})()},6537:(N,A,c)=>{c.d(A,{z:()=>P});var l=c(1699),I=c(6480);let P=(()=>{var w;class b{constructor(C){this.sanitizer=C}transform(C){return this.sanitizer.bypassSecurityTrustHtml(C)}}return(w=b).\u0275fac=function(C){return new(C||w)(l.Y36(I.H7,16))},w.\u0275pipe=l.Yjl({name:"safeHtml",type:w,pure:!0}),b})()},3739:(N,A,c)=>{c.d(A,{f:()=>P});var l=c(4860),I=c(1916);function P(w){return{loader:{provide:I.Zw,useFactory:w,deps:[l.eN]},defaultLanguage:"en",isolate:!0}}},8206:(N,A,c)=>{c.d(A,{M:()=>P});var l=c(2389),I=c(4980);class P{constructor(b,O,C){this.http=b,this.prefix=O,this.suffix=C}getTranslation(b){return this.http.get(`${this.prefix}${b}${this.suffix}`).pipe((0,l.K)(O=>(console.warn(`Translation: Failed to get language '${b}' from ${this.prefix}`,O),(0,I.of)({}))))}}}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.17.00/dist/ng-edit/projects_eav-ui_src_app_code-editor_code-editor_module_ts-projects_eav-ui_src_app_shared_comp-2b2737.a8cf0f4396740fca.js.map