{"version":3,"file":"projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts.37f1a46759088937.js","mappings":"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","names":["appNamePattern","i0","ctx_r4","appNameError","CreateAppComponent_ng_container_0_ng_container_14_app_field_hint_1_Template","CreateAppComponent_ng_container_0_ng_container_14_app_field_hint_2_Template","ctx_r2","form","controls","name","errors","required","pattern","CreateAppComponent_ng_container_0_ng_container_14_Template","_r6","ctx_r5","closeDialog","ctx_r7","create","ctx_r0","touched","vm_r1","loading","valid","CreateAppComponent","_class","constructor","dialogRef","appsListService","snackBar","this","hostClass","buildForm","loading$","BehaviorSubject","ngOnInit","viewModel$","combineLatest","pipe","map","ngOnDestroy","complete","close","disable","next","value","trim","replace","open","subscribe","error","enable","undefined","duration","UntypedFormGroup","UntypedFormControl","Validators","i1","i2","i3","selectors","hostVars","hostBindings","rf","ctx","CreateAppComponent_ng_container_0_Template","FieldHintComponent_mat_hint_1_ng_container_1_Template","_r2","FieldHintComponent_mat_error_2_ng_container_1_Template","FieldHintComponent","isError","isShort","toggleIsShort","inputs","ngContentSelectors","_c1","decls","vars","consts","template","FieldHintComponent_mat_hint_1_Template","FieldHintComponent_mat_error_2_Template","FieldHintComponent_ng_template_3_Template","_c0"],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/apps-management/constants/app.patterns.ts","./projects/eav-ui/src/app/apps-management/create-app/create-app.component.html","./projects/eav-ui/src/app/apps-management/create-app/create-app.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts"],"sourcesContent":["export const appNamePattern = /^[A-Za-z](?:[A-Za-z0-9\\s\\(\\)-]+)*$/;\r\nexport const appNameError = 'Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.';\r\n","<ng-container *ngIf=\"viewModel$ | async as vm\">\r\n  <div class=\"eav-dialog\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">Create App</div>\r\n    </div>\r\n    <div class=\"eav-dialog-content\">\r\n      <router-outlet></router-outlet>\r\n      <form [formGroup]=\"form\">\r\n        <mat-form-field color=\"accent\" class=\"eav-form-field\">\r\n          <mat-label>Name</mat-label>\r\n          <input matInput type=\"text\" formControlName=\"name\">\r\n        </mat-form-field>\r\n        <app-field-hint>\r\n          App name will also be used for the folder\r\n        </app-field-hint>\r\n        <ng-container *ngIf=\"form.controls.name.touched\">\r\n          <app-field-hint *ngIf=\"form.controls.name.errors?.required\" [isError]=\"true\">\r\n            Required\r\n          </app-field-hint>\r\n          <app-field-hint *ngIf=\"form.controls.name.errors?.pattern\" [isError]=\"true\">\r\n            {{ appNameError }}\r\n          </app-field-hint>\r\n        </ng-container>\r\n      </form>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\">\r\n      <button type=\"button\" mat-raised-button [disabled]=\"vm.loading\" (click)=\"closeDialog()\">\r\n        Cancel\r\n      </button>\r\n      <button type=\"button\" mat-raised-button color=\"accent\" [disabled]=\"vm.loading || !form.valid\" (click)=\"create()\">\r\n        Create\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </div>\r\n</ng-container>","import { Component, HostBinding, OnDestroy, OnInit } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject, Observable, combineLatest, map } from 'rxjs';\r\nimport { appNameError, appNamePattern } from '../constants/app.patterns';\r\nimport { AppsListService } from '../services/apps-list.service';\r\n\r\n@Component({\r\n  selector: 'app-create-app',\r\n  templateUrl: './create-app.component.html',\r\n  styleUrls: ['./create-app.component.scss'],\r\n})\r\nexport class CreateAppComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  loading$: BehaviorSubject<boolean>;\r\n  appNameError = appNameError;\r\n\r\n  viewModel$: Observable<CreateAppViewModel>;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateAppComponent>,\r\n    private appsListService: AppsListService,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.form = this.buildForm();\r\n    this.loading$ = new BehaviorSubject(false);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.viewModel$ = combineLatest([this.loading$]).pipe(\r\n      map(([loading]) => ({ loading })),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loading$.complete();\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  create(): void {\r\n    this.form.disable();\r\n    this.loading$.next(true);\r\n    const name = this.form.controls.name.value?.trim().replace(/\\s\\s+/g, ' '); // remove multiple white spaces and tabs;\r\n    this.snackBar.open('Creating app...');\r\n    this.appsListService.create(name).subscribe({\r\n      error: () => {\r\n        this.form.enable();\r\n        this.loading$.next(false);\r\n        this.snackBar.open('Failed to create app. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.form.enable();\r\n        this.snackBar.open('Created app', undefined, { duration: 2000 });\r\n        this.closeDialog();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildForm(): UntypedFormGroup {\r\n    const form = new UntypedFormGroup({\r\n      name: new UntypedFormControl(null, [Validators.required, Validators.pattern(appNamePattern)]),\r\n    });\r\n    return form;\r\n  }\r\n}\r\n\r\ninterface CreateAppViewModel {\r\n  loading: boolean;\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\" [ngSwitch]=\"isError\">\r\n  <mat-hint *ngSwitchCase=\"false\">\r\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n  </mat-hint>\r\n\r\n  <mat-error *ngSwitchCase=\"true\">\r\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n  </mat-error>\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}