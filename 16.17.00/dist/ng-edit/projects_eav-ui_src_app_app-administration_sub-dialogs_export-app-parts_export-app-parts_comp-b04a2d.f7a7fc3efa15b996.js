"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_comp-b04a2d","projects_eav-ui_src_app_shared_directives_click-stop-propagation_directive_ts"],{8018:(T,x,_)=>{_.r(x),_.d(x,{ExportAppPartsComponent:()=>R});var d=_(8071),m=_(3839),c=_(9736),g=_(8834),l=_(196),r=_(5530),h=_(2369),t=_(1699),f=_(6861),P=_(9851),A=_(131),M=_(9498),u=_(6575),E=_(895),O=_(6515),C=_(8849),v=_(1268),D=_(6355),I=_(257),Z=_(6658);function y(i,p){if(1&i&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&i){const e=p.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function U(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"li",20)(1,"div",21)(2,"mat-checkbox",22),t.NdJ("ngModelChange",function(o){const s=t.CHM(e).$implicit;return t.KtG(s._export=o)}),t.TgZ(3,"span",23),t._uU(4),t.qZA()()()()}if(2&i){const e=p.$implicit;t.xp6(2),t.Q6J("ngModel",e._export),t.xp6(2),t.AsE("",e.Name," (",e.Id,")")}}function k(i,p){if(1&i&&(t.TgZ(0,"ul",25)(1,"p",26),t._uU(2,"Templates"),t.qZA(),t.YNc(3,U,5,3,"li",19),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngForOf",e.Templates)}}function K(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"li",20)(1,"div",21)(2,"mat-checkbox",22),t.NdJ("ngModelChange",function(o){const s=t.CHM(e).$implicit;return t.KtG(s._export=o)}),t.TgZ(3,"span",23),t._uU(4),t.qZA()()()()}if(2&i){const e=p.$implicit;t.xp6(2),t.Q6J("ngModel",e._export),t.xp6(2),t.AsE("",e.Title," (",e.Id,")")}}function S(i,p){if(1&i&&(t.TgZ(0,"ul",25)(1,"p",26),t._uU(2,"Entities"),t.qZA(),t.YNc(3,K,5,3,"li",19),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngForOf",e.Entities)}}function J(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"li",20)(1,"div",21)(2,"mat-checkbox",22),t.NdJ("ngModelChange",function(o){const s=t.CHM(e).$implicit;return t.KtG(s._export=o)}),t.TgZ(3,"span",23),t._uU(4),t.qZA()()(),t.YNc(5,k,4,1,"ul",24),t.YNc(6,S,4,1,"ul",24),t.qZA()}if(2&i){const e=p.$implicit;t.xp6(2),t.Q6J("ngModel",e._export),t.xp6(2),t.AsE("",e.Name," (",e.Id,")"),t.xp6(1),t.Q6J("ngIf",e.Templates.length>0),t.xp6(1),t.Q6J("ngIf",e.Entities.length>0)}}function b(i,p){if(1&i){const e=t.EpF();t.TgZ(0,"li",20)(1,"div",21)(2,"mat-checkbox",22),t.NdJ("ngModelChange",function(o){const s=t.CHM(e).$implicit;return t.KtG(s._export=o)}),t.TgZ(3,"span",23),t._uU(4),t.qZA()()()()}if(2&i){const e=p.$implicit;t.xp6(2),t.Q6J("ngModel",e._export),t.xp6(2),t.AsE("",e.Name," (",e.Id,")")}}function B(i,p){if(1&i&&(t.TgZ(0,"div")(1,"ul",17)(2,"p",18),t._uU(3,"Content Types"),t.qZA(),t.YNc(4,J,7,5,"li",19),t.qZA(),t.TgZ(5,"ul",17)(6,"p",18),t._uU(7,"Templates Without Content Types"),t.qZA(),t.YNc(8,b,5,3,"li",19),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.contentInfo.ContentTypes),t.xp6(4),t.Q6J("ngForOf",e.contentInfo.TemplatesWithoutContentTypes)}}function $(i,p){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Export Content and Templates from this App"),t.qZA()(),t.TgZ(5,"div",4)(6,"p"),t._uU(7," This is an advanced feature to export parts of the app. The export will create an xml file which can be imported into another site or app. To export the entire content of the app (for example when duplicating the entire site), go to the app export. For further help visit "),t.TgZ(8,"a",5),t._uU(9,"2sxc Help"),t.qZA(),t._uU(10,". "),t.qZA(),t.TgZ(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"Scope"),t.qZA(),t.TgZ(15,"mat-select",8),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.changeScope(o))}),t.YNc(16,y,2,2,"mat-option",9),t.TgZ(17,"mat-option",10),t._uU(18,"Other..."),t.qZA()(),t.TgZ(19,"button",11)(20,"mat-icon",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.unlockScope())}),t._uU(21),t.qZA()()(),t.TgZ(22,"app-field-hint"),t._uU(23," The scope should almost never be changed - "),t.TgZ(24,"a",13),t._uU(25,"see help"),t.qZA()()(),t.YNc(26,B,9,2,"div",0),t.qZA(),t.TgZ(27,"mat-dialog-actions",14)(28,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeDialog())}),t._uU(29," Cancel "),t.qZA(),t.TgZ(30,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportAppParts())}),t._uU(31," Export "),t.qZA()()(),t.BQk()}if(2&i){const e=p.ngIf,n=t.oxw();t.xp6(15),t.Q6J("ngModel",n.exportScope)("disabled",n.lockScope),t.xp6(1),t.Q6J("ngForOf",n.scopeOptions),t.xp6(1),t.Q6J("value",n.dropdownInsertValue),t.xp6(2),t.Q6J("tippy",n.lockScope?"Unlock":"Lock"),t.xp6(2),t.hij(" ",n.lockScope?"lock":"lock_open"," "),t.xp6(5),t.Q6J("ngIf",n.contentInfo),t.xp6(2),t.Q6J("disabled",e.loading||e.isExporting),t.xp6(2),t.Q6J("disabled",e.loading||e.isExporting)}}let R=(()=>{var i;class p{constructor(n,o,a){this.dialogRef=n,this.exportAppPartsService=o,this.contentTypesService=a,this.hostClass="dialog-component",this.exportScope=l.Zy.scopes.default.value,this.lockScope=!0,this.dropdownInsertValue=g.G,this.loading$=new d.X(!1),this.isExporting$=new d.X(!1),this.viewModel$=(0,m.a)([this.loading$,this.isExporting$]).pipe((0,c.U)(([s,W])=>({loading:s,isExporting:W})))}ngOnInit(){this.fetchScopes(),this.fetchContentInfo()}ngOnDestroy(){this.loading$.complete(),this.isExporting$.complete()}closeDialog(){this.dialogRef.close()}exportAppParts(){this.isExporting$.next(!0);const n=this.selectedContentTypes().map(s=>s.Id),o=this.selectedTemplates().map(s=>s.Id);let a=this.selectedEntities().map(s=>s.Id);a=a.concat(o),this.exportAppPartsService.exportParts(n,a,o),this.isExporting$.next(!1)}changeScope(n){n!==g.G||(n=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||l.Zy.scopes.default.value,this.scopeOptions.find(o=>o.value===n))||this.scopeOptions.unshift({name:n,value:n}),this.exportScope=n,this.fetchContentInfo()}unlockScope(){this.lockScope=!this.lockScope,this.lockScope&&(this.exportScope=l.Zy.scopes.default.value,this.fetchContentInfo())}fetchScopes(){this.loading$.next(!0),this.contentTypesService.getScopes().subscribe(n=>{this.scopeOptions=n,this.loading$.next(!1)})}fetchContentInfo(){this.loading$.next(!0),this.exportAppPartsService.getContentInfo(this.exportScope).subscribe(n=>{this.contentInfo=n,this.loading$.next(!1)})}selectedContentTypes(){return this.contentInfo.ContentTypes.filter(n=>n._export)}selectedEntities(){let n=[];for(const o of this.contentInfo.ContentTypes)n=n.concat(o.Entities.filter(a=>a._export));return n}selectedTemplates(){let n=[];for(const o of this.contentInfo.ContentTypes)n=n.concat(o.Templates.filter(a=>a._export));return n=n.concat(this.contentInfo.TemplatesWithoutContentTypes.filter(o=>o._export)),n}}return(i=p).\u0275fac=function(n){return new(n||i)(t.Y36(f.so),t.Y36(h.T),t.Y36(r.s))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-export-app-parts"]],hostVars:1,hostBindings:function(n,o){2&n&&t.Ikx("className",o.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],[1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],["href","https://2sxc.org/en/help?tag=export","target","_blank"],[1,"eav-edit-input"],["color","accent",1,"eav-form-field"],["name","Scope",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","","matTextSuffix","",3,"tippy"],["appClickStopPropagation","",3,"click"],["appClickStopPropagation","","href","https://2sxc.org/help?tag=scope","target","_blank"],["align","end"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"eav-content-info__list","eav-content-info__base"],[1,"eav-content-info__title"],["class","eav-content-info__item",4,"ngFor","ngForOf"],[1,"eav-content-info__item"],[1,"eav-option-box"],[3,"ngModel","ngModelChange"],[1,"eav-option-box__text"],["class","eav-content-info__list",4,"ngIf"],[1,"eav-content-info__list"],[1,"eav-content-info__subtitle"]],template:function(n,o){1&n&&(t.YNc(0,$,32,9,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.viewModel$))},dependencies:[P.Y,A.E,M.$,f.H8,u.sg,u.O5,E.lW,E.RK,O.Hw,C.JJ,C.On,v.KE,v.hX,v.R9,D.gD,I.ey,Z.oG,u.Ov],styles:[".eav-edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.eav-content-info__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.eav-content-info__subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.eav-content-info__list[_ngcontent-%COMP%]{font-size:14px;list-style-type:none}.eav-content-info__base[_ngcontent-%COMP%]{padding:0}.eav-content-info__item[_ngcontent-%COMP%]{border-top:1px solid #DDD;padding:2px}.eav-option-box[_ngcontent-%COMP%]{margin:8px 0}.eav-option-box__text[_ngcontent-%COMP%]{white-space:normal;font-size:14px}"]}),p})()},131:(T,x,_)=>{_.d(x,{E:()=>m});var d=_(1699);let m=(()=>{var c;class g{onClick(r){r.stopPropagation()}}return(c=g).\u0275fac=function(r){return new(r||c)},c.\u0275dir=d.lG2({type:c,selectors:[["","appClickStopPropagation",""]],hostBindings:function(r,h){1&r&&d.NdJ("click",function(f){return h.onClick(f)})}}),g})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.17.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_comp-b04a2d.f7a7fc3efa15b996.js.map