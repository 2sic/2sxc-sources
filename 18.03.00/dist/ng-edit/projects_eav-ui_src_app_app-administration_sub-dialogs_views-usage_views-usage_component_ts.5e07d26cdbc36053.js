"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts"],{8267:(S,h,a)=>{a.r(h),a.d(h,{ViewsUsageComponent:()=>$});var e=a(9148),g=a(7941),v=a(2159),w=a(251),V=a(2570),C=a(4175),u=a(3840),b=a(2938),r=a(1828),I=a(4601),y=a(7037);function D(t){const l=t.data;return`ID: ${l.Block.Id}\nGUID: ${l.Block.Guid}`}function M(t){const l=t.data;if(null!=l.Module)return`ID: ${l.Module.Id}\nUsageId: ${l.Module.UsageId}\nTitle: ${l.Module.Title}`}function P(t){return((null!=t.value?"id-action no-padding":"")+" no-outline").split(" ")}function G(t){const l=t.data;if(null!=l.PageId)return`ID: ${l.PageId}`}function U(t){return((null!=t.value?"id-action no-padding":"")+" no-outline").split(" ")}function x(t){return(null!=t.value?"primary-action highlight":"no-outline").split(" ")}function j(t){null!=t.value&&window.open(t.data.Url,"_blank")}function k(t){const l=t.value;if(null!=l)return`\n    <div style="height: 100%;display: flex;align-items: center;">\n      ${l.IsVisible?'<span class="material-symbols-outlined">visibility</span>':'<span class="material-symbols-outlined">visibility_off</span>'}\n      ${l.IsDeleted?'<span style="margin-left: 8px;" class="material-symbols-outlined">delete</span>':""}\n    </div>\n  `}var F=a(5060),T=a(5081);function E(t,l){if(1&t){const i=e.RV6();e.j41(0,"div",1),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.clipboard.copyToClipboard(n.tooltip))}),e.j41(1,"span",2),e.EFF(2),e.k0s(),e.j41(3,"mat-icon",3),e.EFF(4,"file_copy"),e.k0s()()}if(2&t){const i=e.XpG();e.Y8G("tippy",i.tooltip),e.R7$(2),e.JRh(i.id)}}let p=(()=>{class t{constructor(){this.clipboard=(0,b.d)(T.W)}agInit(i){if(this.tooltip=i.value,null==this.tooltip)return;const s=this.tooltip.split("\n")[0];this.id=s.split(" ")[1]}refresh(i){return!0}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-views-usage-id"]],standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["matRipple","",1,"id-box","highlight",3,"tippy"],["matRipple","",1,"id-box","highlight",3,"click","tippy"],[1,"id"],[1,"icon"]],template:function(s,n){1&s&&e.DNE(0,E,5,2,"div",0),2&s&&e.vxM(n.id?0:-1)},dependencies:[F.pZ,F.r6,u.m_,u.An,I.e],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}}return t})();var m=a(4456),f=a(3804);let O=(()=>{class t{constructor(){this.isVisible="",this.isDeleted=""}agInit(i){this.filterParams=i}isFilterActive(){return""!==this.isVisible||""!==this.isDeleted}doesFilterPass(i){let s=!1,n=!1;const o=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:i.node.data,getValue:c=>i.node.data[c],node:i.node});return null!=o&&(s=""===this.isVisible||null!=o.IsVisible&&o.IsVisible.toString()===this.isVisible,n=""===this.isDeleted||null!=o.IsDeleted&&o.IsDeleted.toString()===this.isDeleted,s&&n)}getModel(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}}setModel(i){this.isVisible=i?i.isVisible:"",this.isDeleted=i?i.isDeleted:""}afterGuiAttached(i){}filterChanged(){this.filterParams.filterChangedCallback()}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-views-usage-status-filter"]],standalone:!0,features:[e.aNF],decls:18,vars:2,consts:[[1,"title"],[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(s,n){1&s&&(e.j41(0,"div",0),e.EFF(1,"Visible"),e.k0s(),e.j41(2,"mat-radio-group",1),e.mxI("ngModelChange",function(o){return e.DH7(n.isVisible,o)||(n.isVisible=o),o}),e.bIt("ngModelChange",function(){return n.filterChanged()}),e.j41(3,"mat-radio-button",2),e.EFF(4,"All"),e.k0s(),e.j41(5,"mat-radio-button",3),e.EFF(6,"Visible"),e.k0s(),e.j41(7,"mat-radio-button",4),e.EFF(8,"Hidden"),e.k0s()(),e.j41(9,"div",0),e.EFF(10,"Deleted"),e.k0s(),e.j41(11,"mat-radio-group",1),e.mxI("ngModelChange",function(o){return e.DH7(n.isDeleted,o)||(n.isDeleted=o),o}),e.bIt("ngModelChange",function(){return n.filterChanged()}),e.j41(12,"mat-radio-button",2),e.EFF(13,"All"),e.k0s(),e.j41(14,"mat-radio-button",3),e.EFF(15,"Is deleted"),e.k0s(),e.j41(16,"mat-radio-button",4),e.EFF(17,"Is not deleted"),e.k0s()()),2&s&&(e.R7$(2),e.R50("ngModel",n.isVisible),e.R7$(9),e.R50("ngModel",n.isDeleted))},dependencies:[f.Wk,f.VT,f._g,m.YN,m.BC,m.vS],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}}return t})();function R(t){const l=[];for(const i of t.Blocks){0===i.Modules.length&&l.push({Block:{Id:i.Id,Guid:i.Guid}});for(const s of i.Modules)l.push({Block:{Id:i.Id,Guid:i.Guid},Module:s,PageId:s.Page.Id,Name:s.Page.Name,Url:s.Page.Url,Language:s.Page.CultureCode,Status:{IsVisible:s.Page.Visible,IsDeleted:s.IsDeleted}})}return l}var N=a(9841);let $=(()=>{class t{constructor(i,s){this.dialog=i,this.route=s,this.gridOptions=this.buildGridOptions(),this.viewsService=(0,b.d)(V.y),this.viewGuid=this.route.snapshot.paramMap.get("guid"),this.#e=this.viewsService.getUsage(this.viewGuid),this.view=(0,e.EWP)(()=>{const n=this.#e();if(void 0!==n)return{viewUsageName:n[0]?.Name,viewTooltip:`ID: ${n[0].Id}\nGUID: ${n[0].Guid}`,data:R(n[0])}})}#e;closeDialog(){this.dialog.close()}buildGridOptions(){return{...w.C,columnDefs:[{...r.r.Id,field:"Block",valueGetter:D,cellRenderer:p},{...r.r.Number,field:"Module",width:80,valueGetter:M,cellClass:P,cellRenderer:p},{...r.r.Number,field:"Page",valueGetter:G,cellClass:U,cellRenderer:p},{...r.r.TextWide,field:"Name",sort:"asc",cellClass:x,onCellClicked:j},{...r.r.ItemsText,field:"Language",width:90},{field:"Status",width:80,cellClass:"icon no-outline".split(" "),filter:O,cellRenderer:k}]}}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(g.CP),e.rXU(v.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-views-usage"]],standalone:!0,features:[e.aNF],decls:20,vars:4,consts:[[1,"nav-component-wrapper"],["mat-mdc-dialog-title",""],[1,"dialog-title-box"],[3,"tippy"],["mat-icon-button","","tippy","Close dialog",3,"click"],[2,"overflow","hidden","color","black"],[1,"dialog-description"],["href","https://go.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"]],template:function(s,n){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return n.closeDialog()}),e.j41(6,"mat-icon"),e.EFF(7,"close"),e.k0s()()()(),e.j41(8,"mat-dialog-content",5)(9,"p",6),e.EFF(10," This shows where this view is being used. Read about the "),e.j41(11,"a",7),e.EFF(12,"connections between DNN and 2sxc Views"),e.k0s(),e.EFF(13," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),e.j41(14,"em"),e.EFF(15,"Before you get confused about some things you see here, do read the FAQ on that page."),e.k0s()(),e.nrm(16,"router-outlet"),e.j41(17,"div",8),e.nrm(18,"ag-grid-angular",9)(19,"div",10),e.k0s()()()),2&s){let d,o,c;e.R7$(3),e.Y8G("tippy",null==(d=n.view())?null:d.viewTooltip),e.R7$(),e.SpI("View: ",null==(o=n.view())?null:o.viewUsageName,""),e.R7$(14),e.Y8G("rowData",null==(c=n.view())?null:c.data)("gridOptions",n.gridOptions)}},dependencies:[C.Hl,C.iY,u.m_,u.An,v.n3,y.p,N.xs,I.e,g.hM,g.Yi],encapsulation:2})}}return t})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.03.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts.5e07d26cdbc36053.js.map