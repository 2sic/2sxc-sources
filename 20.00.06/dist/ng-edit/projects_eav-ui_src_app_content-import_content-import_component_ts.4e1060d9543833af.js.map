{"version":3,"file":"projects_eav-ui_src_app_content-import_content-import_component_ts.4e1060d9543833af.js","mappings":"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","names":["BaseDirective","constructor","this","subscriptions","Subscription","ngOnDestroy","unsubscribe","static","__ngFactoryType__","_angular_core__WEBPACK_IMPORTED_MODULE_1__","FsC","logSpecs","all","getEntities","getAvailableEntities","delete","webApiEntityRoot","webApiEntityList","EntityService","HttpServiceBaseSignal","log","classLog","queryService","transient","QueryService","getEntities$","params","fnIf","pipe","filter","p","switchMap","contentTypeName","shareReplay","entitiesFilter","contentTypes","itemIds","fields","map","data","Default","appId","contentType","entityId","force","parentId","parentField","parent","http","apiUrl","id","toString","_angular_core__WEBPACK_IMPORTED_MODULE_9__","jDH","factory","ɵfac","ContentImportService","evaluateContent","formValues","from","toBase64","file","fileBase64","requestData","AppId","DefaultLanguage","defaultLanguage","ContentType","ContentBase64","ResourcesReferences","resourcesReferences","ClearEntities","clearEntities","post","result","Success","Errors","Detail","importContent","root_effect_scheduler_DCy1y1b8","i0","_r1","fileInput_r2","click","$event","ctx_r2","fileChange","name","evaluationResult","DocumentElementsCount","LanguagesInDocumentCount","AttributeNamesInDocument","length","join","AmountOfEntitiesCreated","AmountOfEntitiesUpdated","AmountOfEntitiesDeleted","AttributeNamesNotImported","error_r5","ErrorDetail","LineNumber","LineDetail","ContentImportComponent_Conditional_13_Case_2_Conditional_0_Conditional_1_For_5_Conditional_3_Template","ContentImportComponent_Conditional_13_Case_2_Conditional_0_Conditional_1_For_5_Conditional_4_Template","ContentImportComponent_Conditional_13_Case_2_Conditional_0_Conditional_1_For_5_Conditional_5_Template","errors","ErrorCode","ContentImportComponent_Conditional_13_Case_2_Conditional_0_Conditional_1_For_5_Template","ContentImportComponent_Conditional_13_Case_2_Conditional_0_Conditional_0_Template","ContentImportComponent_Conditional_13_Case_2_Conditional_0_Conditional_1_Template","_r4","back","ContentImportComponent_Conditional_13_Case_2_Conditional_0_Template","ContentImportComponent_Conditional_13_Case_3_Conditional_0_Conditional_1_Template","ContentImportComponent_Conditional_13_Case_3_Conditional_0_Conditional_2_Template","importResult","ContentImportComponent_Conditional_13_Case_3_Conditional_0_Template","_r6","closeDialog","ContentImportComponent_Conditional_13_Case_0_Template","ContentImportComponent_Conditional_13_Case_1_Template","ContentImportComponent_Conditional_13_Case_2_Template","ContentImportComponent_Conditional_13_Case_3_Template","tmp_1_0","viewStateSelected","ContentImportComponent","dialogData","dialog","route","hostClass","contentImportService","contentTypesService","ContentTypesService","dialogConfigSvc","DialogConfigAppService","viewStates","waiting","default","evaluated","imported","signal","contentTypeStaticName","snapshot","paramMap","get","ngOnInit","contentTypeTemp","retrieveContentType","dialogSettings$","getCurrent$","forkJoin","subscribe","dialogSettings","set","Context","Language","Primary","files","close","event","target","filesDropped","MAT_DIALOG_DATA","i1","i2","debug_node_JnOYh9kg","VBU","selectors","hostVars","hostBindings","rf","ctx","ContentImportComponent_Conditional_13_Template","Name","FormsModule","i3","MatButtonModule","i4","MatRadioModule","i5","MatIconModule","i6","MatDialogActions","DragAndDropDirective","styles","webApiTypeRoot","webApiTypeGet","webApiTypes","webApiTypeScopes","HttpServiceBase","nameId","getHttpApiUrl","contentTypeId","getType","httpResource","url","getTypes","scope","defaultValue","retrieveContentTypesPromise","fetchPromise","getScopesPromise","then","scopesData","scopes","old","Object","keys","key","value","getScopesSig","scopesSignal","appid","computed","getScopesV2Promise","save","staticName","NameId","import","formData","FormData","append","zoneId","createGhost","sourceNameId","_angular_core__WEBPACK_IMPORTED_MODULE_4__","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","fromEvent","eventName","options","resultSelector","isFunction","undefined","mapOneOrManyArgs","add","remove","isEventTarget","addEventListener","removeEventListener","methodName","handler","isNodeStyleEventEmitter","addListener","removeListener","toCommonHandlerRegistry","isJQueryStyleEventEmitter","on","off","isArrayLike","mergeMap","subTarget","innerFrom","TypeError","Observable","subscriber","args","next","elementRef","zone","snackBar","super","markStyle","input","allowedFileTypes","output","dropAreaClass","markStyleClass","dragClass","timeouts","element","nativeElement","classList","runOutsideAngular","preventDefault","stopPropagation","clearTimeouts","push","window","setTimeout","onDrop","Array","dataTransfer","filterTypes","emit","timeout","clearTimeout","allowedTypes","split","type","toLocaleLowerCase","filtered","extIndex","lastIndexOf","ext","substring","includes","allowedTypesString","replace","open","duration","context","getFromQuery","queryUrl","hasParams","urlParams","Guids","_angular_core__WEBPACK_IMPORTED_MODULE_2__","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","error","readAsText"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/directives/base.directive.ts","./projects/eav-ui/src/app/shared/services/entity.service.ts","./projects/eav-ui/src/app/content-import/services/content-import.service.ts","./projects/eav-ui/src/app/content-import/content-import.component.html","./projects/eav-ui/src/app/content-import/content-import.component.ts","./projects/eav-ui/src/app/app-administration/services/content-types.service.ts","./node_modules/rxjs/dist/esm/internal/observable/fromEvent.js","./projects/eav-ui/src/app/shared/directives/drag-and-drop.directive.ts","./projects/eav-ui/src/app/shared/services/query.service.ts","./projects/eav-ui/src/app/shared/helpers/file-to-base64.helper.ts"],"sourcesContent":["import { Directive, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive()\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseDirective implements OnDestroy {\r\n  /** Holds all subscriptions to be unsubscribed on destroy */\r\n  protected subscriptions = new Subscription();\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { filter, map, Observable, shareReplay, switchMap } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { EntityLightIdentifier } from '../../../../../edit-types/src/EntityLight';\r\nimport { classLog } from '../logging';\r\nimport { HttpServiceBaseSignal } from './http-service-base-signal';\r\nimport { QueryService } from './query.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getEntities: false,\r\n  getAvailableEntities: false,\r\n  delete: false,\r\n};\r\n\r\nexport const webApiEntityRoot = 'admin/entity/';\r\nexport const webApiEntityList = 'admin/entity/list';\r\n\r\n@Injectable()\r\nexport class EntityService extends HttpServiceBaseSignal {\r\n\r\n  log = classLog({ EntityService }, logSpecs);\r\n\r\n  private queryService = transient(QueryService);\r\n\r\n  /**\r\n   * Get entities based on the content type name.\r\n   * As of 2024-04-29 only used in REST API.\r\n   * @param params\r\n   * @returns\r\n   */\r\n  getEntities$(params: Observable<{ contentTypeName: string }>): Observable<EntityLightIdentifier[]> {\r\n    this.log.fnIf('getEntities');\r\n    return params.pipe(\r\n      filter(p => p != null),\r\n      switchMap(p => this.getAvailableEntities(p.contentTypeName).pipe(shareReplay(1))),\r\n    );\r\n  }\r\n\r\n  private getAvailableEntities(contentTypeName: string, entitiesFilter?: string[]): Observable<EntityLightIdentifier[]> {\r\n    var log = this.log.fnIf('getAvailableEntities');\r\n    return this.queryService.getEntities({\r\n      contentTypes: [contentTypeName],\r\n      itemIds: entitiesFilter,\r\n      fields: 'Id,Guid,Title',\r\n      log: 'getAvailableEntities'\r\n    }).pipe(\r\n      map(data => data.Default)\r\n    );\r\n  }\r\n\r\n  delete(appId: number, contentType: string, entityId: number, force: boolean, parentId?: number, parentField?: string): Observable<null> {\r\n    this.log.fnIf('delete', { appId, contentType, entityId, force, parentId, parent });\r\n    return this.http.delete<null>(this.apiUrl(webApiEntityRoot + 'delete'), {\r\n      params: {\r\n        contentType,\r\n        id: entityId.toString(),\r\n        appId,\r\n        force: force.toString(),\r\n        ...(parentId && { parentId: parentId.toString() }),\r\n        ...(parentId && parentField && { parentField }),\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { webApiEntityRoot } from '../../shared/services/entity.service';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { ContentImport, EvaluateContentResult, ImportContentRequest, ImportContentResult } from '../models/content-import.model';\r\n\r\n@Injectable()\r\nexport class ContentImportService extends HttpServiceBaseSignal {\r\n\r\n  evaluateContent(formValues: ContentImport) {\r\n    return from(toBase64(formValues.file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        const requestData: ImportContentRequest = {\r\n          AppId: this.appId,\r\n          DefaultLanguage: formValues.defaultLanguage,\r\n          ContentType: formValues.contentType,\r\n          ContentBase64: fileBase64,\r\n          ResourcesReferences: formValues.resourcesReferences,\r\n          ClearEntities: formValues.clearEntities,\r\n        };\r\n        return this.http.post<EvaluateContentResult>(this.apiUrl(webApiEntityRoot + 'XmlPreview'), requestData).pipe(\r\n          map(result => {\r\n            if (!result.Success) {\r\n              result.Errors = result.Detail as any;\r\n              delete result.Detail;\r\n            }\r\n            return result;\r\n          }),\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  importContent(formValues: ContentImport) {\r\n    return from(toBase64(formValues.file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        const requestData: ImportContentRequest = {\r\n          AppId: this.appId,\r\n          DefaultLanguage: formValues.defaultLanguage,\r\n          ContentType: formValues.contentType,\r\n          ContentBase64: fileBase64,\r\n          ResourcesReferences: formValues.resourcesReferences,\r\n          ClearEntities: formValues.clearEntities,\r\n        };\r\n        return this.http.post<ImportContentResult>(this.apiUrl(webApiEntityRoot + 'XmlUpload'), requestData);\r\n      })\r\n    );\r\n  }\r\n}\r\n","<div class=\"eav-dialog\" appDragAndDrop [allowedFileTypes]=\"'xml'\" (filesDropped)=\"filesDropped($event)\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      {{ contentType()?.Name }} Import Data\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-description\">\r\n    <p>\r\n      This will import content-items into 2sxc. It requires that you already defined the content-type before you try\r\n      importing, and that you created the import-file using the template provided by the Export. Please visit\r\n      <a href=\"https://2sxc.org/help\" target=\"_blank\">https://2sxc.org/help</a> for more instructions.\r\n    </p>\r\n  </div>\r\n  @if (formValues != null) {\r\n    @switch (viewStateSelected()) {\r\n      <!-- FORM -->\r\n      @case (1) {\r\n        <form #ngForm=\"ngForm\">\r\n          <div class=\"eav-dialog-content\">\r\n            <div>\r\n              <button mat-raised-button tippy=\"Open file browser\" (click)=\"fileInput.click()\">\r\n                <span>{{ formValues.file ? formValues.file.name : 'Select or drop file' }}</span>\r\n              </button>\r\n              <input #fileInput type=\"file\" (change)=\"fileChange($event)\" class=\"hide\" />\r\n            </div>\r\n            <div>\r\n              <p class=\"eav-radio-group-label\">References to pages / files</p>\r\n              <mat-radio-group class=\"eav-radio-group\" [(ngModel)]=\"formValues.resourcesReferences\"\r\n                name=\"ResourcesReferences\">\r\n                <mat-radio-button value=\"Keep\">\r\n                  Import links as written in the file (for example /Portals/...)\r\n                </mat-radio-button>\r\n                <mat-radio-button value=\"Resolve\">\r\n                  Try to resolve paths to references\r\n                </mat-radio-button>\r\n              </mat-radio-group>\r\n            </div>\r\n            <div>\r\n              <p class=\"eav-radio-group-label\">Clear all other entities</p>\r\n              <mat-radio-group class=\"eav-radio-group\" [(ngModel)]=\"formValues.clearEntities\" name=\"ClearEntities\">\r\n                <mat-radio-button value=\"None\">\r\n                  Keep all entities not found in import\r\n                </mat-radio-button>\r\n                <mat-radio-button value=\"All\">\r\n                  Remove all entities not found in import\r\n                </mat-radio-button>\r\n              </mat-radio-group>\r\n            </div>\r\n            <p class=\"eav-hint\">Remember to backup your DNN first!</p>\r\n          </div>\r\n          <mat-dialog-actions align=\"end\">\r\n            <button\r\n              mat-raised-button\r\n              class=\"eav-action-button\"\r\n              [disabled]=\"!formValues.file || !formValues.file.name\"\r\n              (click)=\"evaluateContent()\"\r\n            >\r\n              Preview Import\r\n            </button>\r\n          </mat-dialog-actions>\r\n        </form>\r\n      }\r\n      <!-- END FORM -->\r\n      <!-- WAITING -->\r\n      @case (0) {\r\n        <div class=\"eav-dialog-content\">\r\n          <p>Please wait while processing...</p>\r\n        </div>\r\n      }\r\n      <!-- END WAITING -->\r\n      <!-- EVALUATION RESULT -->\r\n      @case (2) {\r\n        @if (evaluationResult()) {\r\n          <!-- DETAILS / STATISTICS -->\r\n          @if (evaluationResult().Success) {\r\n            <div class=\"eav-dialog-content\">\r\n              <p class=\"eav-evaluation__title\">Try to import file '{{ formValues.file.name }}'</p>\r\n              <p class=\"eav-evaluation__title\">File contains:</p>\r\n              <ul class=\"eav-evaluation__content\">\r\n                <li>{{ evaluationResult().Detail.DocumentElementsCount }} content-items (records/entities)</li>\r\n                <li>{{ evaluationResult().Detail.LanguagesInDocumentCount }} languages</li>\r\n                <li>{{ evaluationResult().Detail.AttributeNamesInDocument.length }} columns:\r\n                  {{ evaluationResult().Detail.AttributeNamesInDocument.join(', ') }}</li>\r\n              </ul>\r\n              <p class=\"eav-evaluation__title\">If you press Import, it will:</p>\r\n              <ul class=\"eav-evaluation__content\">\r\n                <li>Create {{ evaluationResult().Detail.AmountOfEntitiesCreated }} content-items</li>\r\n                <li>Update {{ evaluationResult().Detail.AmountOfEntitiesUpdated }} content-items</li>\r\n                <li>Delete {{ evaluationResult().Detail.AmountOfEntitiesDeleted }} content-items</li>\r\n                <li>Ignore {{ evaluationResult().Detail.AttributeNamesNotImported.length }} columns:\r\n                  {{ evaluationResult().Detail.AttributeNamesNotImported.join(', ') }}</li>\r\n              </ul>\r\n              <p class=\"eav-hint\">Note: The import validates much data and may take several minutes.</p>\r\n            </div>\r\n          }\r\n          <!-- END DETAILS / STATISTICS -->\r\n          <!-- ERRORS -->\r\n          @if (!evaluationResult().Success) {\r\n            <div class=\"eav-dialog-content\">\r\n              <p class=\"eav-evaluation__title\">Try to import file '{{ formValues.file.name }}'</p>\r\n              <ul class=\"eav-evaluation__content\">\r\n                @for (error of evaluationResult().Errors; track error) {\r\n                  <li>\r\n                    <div>{{ errors[error.ErrorCode] }}</div>\r\n                    @if (error.ErrorDetail) {\r\n                      <div><i>Details: {{ error.ErrorDetail }}</i></div>\r\n                    }\r\n                    @if (error.LineNumber) {\r\n                      <div><i>Line-no: {{ error.LineNumber }}</i></div>\r\n                    }\r\n                    @if (error.LineDetail) {\r\n                      <div><i>Line-details: {{ error.LineDetail }}</i></div>\r\n                    }\r\n                  </li>\r\n                }\r\n              </ul>\r\n            </div>\r\n          }\r\n          <!-- END ERRORS -->\r\n          <mat-dialog-actions align=\"end\">\r\n            <button mat-raised-button (click)=\"back()\">Back</button>\r\n            <button\r\n              mat-raised-button\r\n              class=\"eav-action-button\"\r\n              [disabled]=\"!evaluationResult().Success\"\r\n              (click)=\"importContent()\"\r\n            >\r\n              Import\r\n            </button>\r\n          </mat-dialog-actions>\r\n        }\r\n      }\r\n      <!-- END EVALUATION RESULT -->\r\n      <!-- IMPORT RESULT -->\r\n      @case (3) {\r\n        @if (importResult()) {\r\n          <div class=\"eav-dialog-content\">\r\n            @if (importResult().Success) {\r\n              <p>Import done.</p>\r\n            }\r\n            @if (!importResult().Success) {\r\n              <p>Import failed.</p>\r\n            }\r\n          </div>\r\n        }\r\n        <mat-dialog-actions align=\"end\">\r\n          <button\r\n            mat-raised-button\r\n            class=\"eav-action-button\"\r\n            (click)=\"closeDialog()\"\r\n          >\r\n            Close\r\n          </button>\r\n        </mat-dialog-actions>\r\n      }\r\n      <!-- END IMPORT RESULT -->\r\n    }\r\n  }\r\n</div>\r\n","import { Component, HostBinding, Inject, OnInit, signal } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MAT_DIALOG_DATA, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { forkJoin } from 'rxjs';\r\nimport { transient } from '../../../../core';\r\nimport { ContentType } from '../app-administration/models/content-type.model';\r\nimport { ContentTypesService } from '../app-administration/services/content-types.service';\r\nimport { DialogConfigAppService } from '../app-administration/services/dialog-config-app.service';\r\nimport { DragAndDropDirective } from '../shared/directives/drag-and-drop.directive';\r\nimport { ContentImportDialogData } from './content-import-dialog.config';\r\nimport { ContentImport, EvaluateContentResult, ImportContentResult } from './models/content-import.model';\r\nimport { ContentImportService } from './services/content-import.service';\r\n\r\n@Component({\r\n  selector: 'app-content-import',\r\n  templateUrl: './content-import.component.html',\r\n  styleUrls: ['./content-import.component.scss'],\r\n  imports: [\r\n    FormsModule,\r\n    MatButtonModule,\r\n    MatRadioModule,\r\n    MatIconModule,\r\n    MatDialogActions,\r\n    DragAndDropDirective,\r\n  ]\r\n})\r\nexport class ContentImportComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  private contentImportService = transient(ContentImportService);\r\n  private contentTypesService = transient(ContentTypesService);\r\n  private dialogConfigSvc = transient(DialogConfigAppService);\r\n\r\n  formValues: ContentImport;\r\n\r\n  private viewStates = {\r\n    waiting: 0,\r\n    default: 1,\r\n    evaluated: 2,\r\n    imported: 3,\r\n  };\r\n\r\n  contentType = signal<ContentType>(null);\r\n  viewStateSelected = signal(this.viewStates.default);\r\n  evaluationResult = signal<EvaluateContentResult>(null);\r\n  importResult = signal<ImportContentResult>(null);\r\n\r\n  errors: Record<number, string> = {\r\n    0: 'Unknown error occured.',\r\n    1: 'Selected content-type does not exist.',\r\n    2: 'Document is not a valid XML file.',\r\n    3: 'Selected content-type does not match the content-type in the XML file.',\r\n    4: 'The language is not supported.',\r\n    5: 'The document does not specify all languages for all entities.',\r\n    6: 'Language reference cannot be parsed, the language is not supported.',\r\n    7: 'Language reference cannot be parsed, the read-write protection is not supported.',\r\n    8: 'Value cannot be read, because of it has an invalid format.'\r\n  };\r\n\r\n  private contentTypeStaticName = this.route.snapshot.paramMap.get('contentTypeStaticName');\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) private dialogData: ContentImportDialogData,\r\n    private dialog: MatDialogRef<ContentImportComponent>,\r\n    private route: ActivatedRoute,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    const contentTypeTemp = this.contentTypesService.retrieveContentType(this.contentTypeStaticName);\r\n    const dialogSettings$ = this.dialogConfigSvc.getCurrent$();\r\n    forkJoin([contentTypeTemp, dialogSettings$]).subscribe(([contentType, dialogSettings]) => {\r\n      this.contentType.set(contentType);\r\n      this.formValues = {\r\n        defaultLanguage: dialogSettings.Context.Language.Primary,\r\n        contentType: this.contentTypeStaticName,\r\n        file: this.dialogData.files != null ? this.dialogData.files[0] : null,\r\n        resourcesReferences: 'Keep',\r\n        clearEntities: 'None',\r\n      };\r\n    });\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  evaluateContent() {\r\n    this.viewStateSelected.set(this.viewStates.waiting);\r\n    this.contentImportService.evaluateContent(this.formValues).subscribe(result => {\r\n      this.evaluationResult.set(result);\r\n      this.viewStateSelected.set(this.viewStates.evaluated);\r\n    });\r\n  }\r\n\r\n  importContent() {\r\n    this.viewStateSelected.set(this.viewStates.waiting);\r\n    this.contentImportService.importContent(this.formValues).subscribe(result => {\r\n      this.importResult.set(result);\r\n      this.viewStateSelected.set(this.viewStates.imported);\r\n    });\r\n  }\r\n\r\n  back() {\r\n    this.viewStateSelected.set(this.viewStates.default);\r\n    this.evaluationResult.set(null);\r\n  }\r\n\r\n  fileChange(event: Event) {\r\n    this.formValues.file = (event.target as HTMLInputElement).files[0];\r\n  }\r\n\r\n  filesDropped(files: File[]) {\r\n    const importFile = files[0];\r\n    this.formValues.file = importFile;\r\n  }\r\n}\r\n","import { httpResource } from '@angular/common/http';\r\nimport { computed, Injectable, Signal } from '@angular/core';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { ContentType, ContentTypeEdit } from '../models/content-type.model';\r\nimport { ScopeDetailsDto } from '../models/scopedetails.dto';\r\n\r\n// We should list all the \"full\" paths here, so it's easier to find when searching for API calls\r\nexport const webApiTypeRoot = 'admin/type/';\r\nconst webApiTypeGet = 'admin/type/get';\r\nconst webApiTypes = 'admin/type/list';\r\nconst webApiTypeScopes = 'admin/type/scopes';\r\nconst webApiTypeSave = 'admin/type/save';\r\nconst webApiTypeDelete = 'admin/type/delete';\r\nconst webApiTypeImport = 'admin/type/import';\r\nconst webApiTypeAddGhost = 'admin/type/addghost';\r\n@Injectable()\r\nexport class ContentTypesService extends HttpServiceBase {\r\n\r\n  // TODO: @2dg, ask 2dm \r\n  // content-export.component.ts\r\n  // content-import.component.ts\r\n  // data.component.ts\r\n  retrieveContentType(nameId: string) {\r\n    return this.getHttpApiUrl<ContentType>(webApiTypeGet, {\r\n      params: { appId: this.appId, contentTypeId: nameId }\r\n    });\r\n  }\r\n\r\n  getType(nameId: string) {\r\n    return httpResource<ContentType>(() => ({\r\n      url: this.apiUrl(webApiTypeGet),\r\n      params: { appId: this.appId, contentTypeId: nameId }\r\n    }));\r\n  }\r\n\r\n  getTypes(scope: Signal<string>) {\r\n    return httpResource<ContentType[]>(() => ({\r\n      url: this.apiUrl(webApiTypes),\r\n      params: { appId: this.appId, scope: scope() }\r\n    }), {defaultValue: []});\r\n  }\r\n\r\n  retrieveContentTypesPromise(scope: string): Promise<ContentType[]> {\r\n    return this.fetchPromise<ContentType[]>(webApiTypes, {\r\n      params: { appId: this.appId, scope }\r\n    });\r\n  }\r\n\r\n  getScopesPromise(): Promise<ScopeOption[]> {\r\n    return this.fetchPromise<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(webApiTypeScopes, {\r\n      params: { appId: this.appId }\r\n    }).then(scopesData => {\r\n      const scopes = scopesData.old;\r\n      const scopeOptions: ScopeOption[] = Object.keys(scopes).map(key => ({\r\n        name: scopes[key],\r\n        value: key,\r\n      }));\r\n      return scopeOptions;\r\n    });\r\n  }\r\n\r\n  getScopesSig() {\r\n    const scopesSignal = httpResource<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(() => ({\r\n      url: this.apiUrl(webApiTypeScopes),\r\n      params: { appid: this.appId },\r\n    }));\r\n\r\n    const scopeOptionsSignal = computed(() => {\r\n      // Access the value property directly without calling scopesSignal as a function\r\n      const value = scopesSignal.value;\r\n      const scopesData = value();\r\n\r\n      // Add null/undefined check here\r\n      if (!scopesData || !scopesData.old) {\r\n        return []; // Return an empty array or handle this case as appropriate\r\n      }\r\n\r\n      const scopes = scopesData.old;\r\n      return Object.keys(scopes).map(key => ({ name: scopes[key], value: key }));\r\n    });\r\n\r\n    return scopeOptionsSignal;\r\n  }\r\n\r\n  getScopesV2Promise(): Promise<ScopeDetailsDto[]> {\r\n    return this.fetchPromise<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(webApiTypeScopes, {\r\n      params: { appId: this.appId }\r\n    }).then(scopesData => scopesData.scopes);\r\n  }\r\n\r\n  save(contentType: ContentTypeEdit) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiTypeSave), contentType, {\r\n      params: { appid: this.appId },\r\n    });\r\n  }\r\n\r\n  delete(contentType: ContentType) {\r\n    return this.http.delete<boolean>(this.apiUrl(webApiTypeDelete), {\r\n      params: { appid: this.appId, staticName: contentType.NameId }, // TODO: @2pp - replace staticName with NameId\r\n    });\r\n  }\r\n\r\n  import(files: File[]) {\r\n    const formData = new FormData();\r\n    for (const file of files) {\r\n      formData.append('File', file);\r\n    }\r\n    return this.http.post<FileUploadResult>(this.apiUrl(webApiTypeImport), formData, {\r\n      params: { appId: this.appId, zoneId: this.zoneId },\r\n    });\r\n  }\r\n\r\n  createGhost(sourceNameId: string) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiTypeAddGhost), null, {\r\n      params: { appid: this.appId, sourceNameId },\r\n    });\r\n  }\r\n}\r\n","import { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nconst nodeEventEmitterMethods = ['addListener', 'removeListener'];\nconst eventTargetMethods = ['addEventListener', 'removeEventListener'];\nconst jqueryMethods = ['on', 'off'];\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs(resultSelector));\n    }\n    const [add, remove] = isEventTarget(target)\n        ? eventTargetMethods.map((methodName) => (handler) => target[methodName](eventName, handler, options))\n        :\n            isNodeStyleEventEmitter(target)\n                ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName))\n                : isJQueryStyleEventEmitter(target)\n                    ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName))\n                    : [];\n    if (!add) {\n        if (isArrayLike(target)) {\n            return mergeMap((subTarget) => fromEvent(subTarget, eventName, options))(innerFrom(target));\n        }\n    }\n    if (!add) {\n        throw new TypeError('Invalid event target');\n    }\n    return new Observable((subscriber) => {\n        const handler = (...args) => subscriber.next(1 < args.length ? args : args[0]);\n        add(handler);\n        return () => remove(handler);\n    });\n}\nfunction toCommonHandlerRegistry(target, eventName) {\n    return (methodName) => (handler) => target[methodName](eventName, handler);\n}\nfunction isNodeStyleEventEmitter(target) {\n    return isFunction(target.addListener) && isFunction(target.removeListener);\n}\nfunction isJQueryStyleEventEmitter(target) {\n    return isFunction(target.on) && isFunction(target.off);\n}\nfunction isEventTarget(target) {\n    return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}\n","import { Directive, ElementRef, HostListener, input, NgZone, OnDestroy, OnInit, output, signal } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { fromEvent } from 'rxjs';\r\nimport { BaseDirective } from './base.directive';\r\n\r\n@Directive({\r\n  selector: '[appDragAndDrop]',\r\n})\r\nexport class DragAndDropDirective extends BaseDirective implements OnInit, OnDestroy {\r\n  markStyle = input<'outline' | 'fill' | 'shadow'>('outline');\r\n  /** Comma separated file types, e.g. 'txt,doc,docx' */\r\n  allowedFileTypes = input<string>('');\r\n  protected filesDropped = output<File[]>();\r\n\r\n  private element: HTMLElement;\r\n  private dropAreaClass = 'eav-droparea';\r\n  private markStyleClass = signal<string>('');\r\n  private dragClass = 'eav-dragover';\r\n  private timeouts: number[] = [];\r\n\r\n  constructor(elementRef: ElementRef, private zone: NgZone, private snackBar: MatSnackBar) {\r\n    super();\r\n    this.element = elementRef.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.markStyleClass.set(`eav-droparea-${this.markStyle()}`);\r\n    this.element.classList.add(this.dropAreaClass, this.markStyleClass());\r\n    this.zone.runOutsideAngular(() => {\r\n      this.subscriptions.add(\r\n        fromEvent<DragEvent>(this.element, 'dragover').subscribe(event => {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this.clearTimeouts();\r\n          this.element.classList.add(this.dragClass);\r\n        })\r\n      );\r\n      this.subscriptions.add(\r\n        fromEvent<DragEvent>(this.element, 'dragleave').subscribe(event => {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this.timeouts.push(\r\n            window.setTimeout(() => { this.element.classList.remove(this.dragClass); }, 50)\r\n          );\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.clearTimeouts();\r\n    this.element.classList.remove(this.dropAreaClass, this.markStyleClass(), this.dragClass);\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  @HostListener('drop', ['$event'])\r\n  onDrop(event: DragEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    this.clearTimeouts();\r\n    this.element.classList.remove(this.dragClass);\r\n    const fileList = event.dataTransfer.files;\r\n    let files = Array.from(fileList);\r\n    files = this.filterTypes(files, this.allowedFileTypes());\r\n    if (files.length > 0) {\r\n      this.filesDropped.emit(files);\r\n    }\r\n  }\r\n\r\n  private clearTimeouts() {\r\n    for (const timeout of this.timeouts) {\r\n      clearTimeout(timeout);\r\n    }\r\n    this.timeouts = [];\r\n  }\r\n\r\n  private filterTypes(files: File[], allowedFileTypes: string) {\r\n    if (allowedFileTypes === '') { return files; }\r\n\r\n    const allowedTypes = allowedFileTypes.split(',').map(type => type.toLocaleLowerCase());\r\n    const filtered = files.filter(file => {\r\n      const extIndex = file.name.lastIndexOf('.');\r\n      if (extIndex <= 0) { return false; }\r\n      const ext = file.name.substring(extIndex + 1).toLocaleLowerCase();\r\n      const allowed = allowedTypes.includes(ext);\r\n      return allowed;\r\n    });\r\n\r\n    if (files.length !== filtered.length) {\r\n      const allowedTypesString = this.allowedFileTypes().replace(/\\,/g, ', ');\r\n      const message = filtered.length\r\n        ? 'Some files were filtered out. This drop location only accepts file types: ' + allowedTypesString\r\n        : 'This drop location only accepts file types: ' + allowedTypesString;\r\n      this.snackBar.open(message, null, { duration: 5000 });\r\n    }\r\n    return filtered;\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { classLog } from '../logging';\r\nimport { QueryStreams } from '../models/query-stream.model';\r\nimport { Context } from './context';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getAvailableEntities: false,\r\n  getEntities: false,\r\n};\r\n\r\n@Injectable()\r\nexport class QueryService {\r\n\r\n  log = classLog({QueryService}, logSpecs);\r\n\r\n  constructor(private http: HttpClient, private context: Context) { }\r\n\r\n  getFromQuery(queryUrl: string, params: string, fields: string, entitiesFilter?: string[]): Observable<QueryStreams> {\r\n    this.log.fnIf('getAvailableEntities', { queryUrl, params, fields, entitiesFilter });\r\n    // Check if any params we should auto-add are already set (like in a query which has these params set in the configuration)\r\n    const hasParams = !!params;\r\n    const paramsLower = params?.toLocaleLowerCase() ?? '';\r\n    const hasAppId = paramsLower.includes('appid=') ?? false;\r\n    const allParams = ''\r\n      + (hasAppId ? '' : `&appId=${this.context.appId}`)\r\n      + (hasParams ? `&${params}` : '')\r\n      + '&$select=' + (fields ?? '' /* special catch to avoid the word \"null\" */);\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(`app/auto/query/${queryUrl}?${urlParams}`,\r\n      {\r\n        Guids: entitiesFilter,\r\n      },\r\n    );\r\n  }\r\n\r\n  getEntities({ contentTypes, itemIds, fields, log }: { contentTypes: string[]; itemIds: string[]; fields: string; log: string }): Observable<QueryStreams> {\r\n    this.log.fnIf(`getEntities`, { log, contentTypes, itemIds, fields });\r\n    const allParams =\r\n      '&typeNames=' + (contentTypes?.join(',') ?? '')\r\n      + `&appId=${this.context.appId}`\r\n      + '&$select=' + (fields ?? '' /* special catch to avoid the word \"null\" */);\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(\r\n      `app/auto/query/System.EntityPicker/Default?${urlParams}`,\r\n      { Guids: itemIds} // 2dg Guids must be in the body as an array (API filter & too many IDs for URL parameters).\r\n    );\r\n  }\r\n}\r\n","export function toBase64(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n      resolve((reader.result as string).split(',')[1]);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n\r\nexport function toString(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsText(file);\r\n    reader.onload = () => {\r\n      resolve(reader.result as string);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n"],"x_google_ignoreList":[6]}