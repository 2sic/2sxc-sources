"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-type-fields_edit-content-type-fields_edit-content-type-fields-f8dc27"],{4202(y,h,t){t.d(h,{u:()=>m});const m={BooleanDefault:"boolean-default",BooleanTristate:"boolean-tristate",CustomDefault:"custom-default",CustomGps:"custom-gps",CustomJsonEditor:"custom-json-editor",DateTimeDefault:"datetime-default",DefaultSuffix:"-default",EmptyDefault:"empty-default",EmptyEnd:"empty-end",EmptyMessage:"empty-message",EntityContentBlocks:"entity-content-blocks",EntityDefault:"entity-default",EntityQuery:"entity-query",ExternalWebComponent:"external-web-component",HyperlinkDefault:"hyperlink-default",HyperlinkLibrary:"hyperlink-library",NumberDefault:"number-default",NumberDropdown:"number-dropdown",StringDefault:"string-default",StringDropdown:"string-dropdown",StringDropdownQuery:"string-dropdown-query",StringFontIconPicker:"string-font-icon-picker",StringJson:"string-json",StringTemplatePicker:"string-template-picker",StringUrlPath:"string-url-path",StringWysiwyg:"string-wysiwyg",EntityPicker:"entity-picker",StringPicker:"string-picker",NumberPicker:"number-picker",Unknown:"unknown"}},11855(y,h,t){t.d(h,{F:()=>I});var m=t(79748),d=t(37580),i=t(24950),s=t(56884),a=t(36124),f=t(80423);const M=["*"],o=r=>({"hint-box__short":r});function F(r,b){1&r&&a.eu8(0)}function R(r,b){if(1&r&&(a.j41(0,"mat-hint"),a.DNE(1,F,1,0,"ng-container",2),a.k0s()),2&r){a.XpG();const u=a.sdS(4);a.R7$(),a.Y8G("ngTemplateOutlet",u)}}function O(r,b){1&r&&a.eu8(0)}function x(r,b){if(1&r&&(a.j41(0,"mat-error"),a.DNE(1,O,1,0,"ng-container",2),a.k0s()),2&r){a.XpG();const u=a.sdS(4);a.R7$(),a.Y8G("ngTemplateOutlet",u)}}function D(r,b){1&r&&a.SdG(0)}let I=(()=>{class r{constructor(){this.isError=(0,d.hFB)(!1),this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static{this.\u0275fac=function(v){return new(v||r)}}static{this.\u0275cmp=a.VBU({type:r,selectors:[["app-field-hint"]],inputs:{isError:[1,"isError"]},ngContentSelectors:M,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(v,C){if(1&v){const P=a.RV6();a.NAR(),a.j41(0,"div",1),a.bIt("click",function(){return s.eBV(P),s.Njj(C.toggleIsShort())}),a.nVh(1,R,2,1,"mat-hint")(2,x,2,1,"mat-error"),a.k0s(),a.DNE(3,D,1,0,"ng-template",null,0,a.C5r)}if(2&v){let P;a.Y8G("ngClass",a.eq3(2,o,C.isShort)),a.R7$(),a.vxM(!1===(P=C.isError())?1:!0===P?2:-1)}},dependencies:[i.RG,f.MV,f.TL,m.YU,m.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return r})()},18708(y,h,t){t.d(h,{R:()=>i});var m=t(37580),d=t(36124);let i=(()=>{class s{constructor(f){this.elementRef=f,this._disabled=(0,m.hFB)(!1)}ngOnChanges(f){null!=f.disabled&&this.elementRef.nativeElement.toggleAttribute("disabled",this._disabled())}static{this.\u0275fac=function(M){return new(M||s)(d.rXU(d.aKT))}}static{this.\u0275dir=d.FsC({type:s,selectors:[["","extended-fab-speed-dial-action",""]],inputs:{_disabled:[1,"_disabled"]},features:[d.OA$]})}}return s})()},18759(y,h,t){t.d(h,{d:()=>i});var m=t(37580),d=t(36124);let i=(()=>{class s{constructor(){this.label=(0,m.hFB)("Form.Buttons.SaveAndClose"),this.triggerOnFormSubmit=(0,m.hFB)(!1),this.icon=(0,m.hFB)("done"),this.ngClass=(0,m.hFB)(""),this.disabled=(0,m.hFB)(!1),this.action=(0,m.CGW)()}get isDisabled(){return"function"==typeof this.disabled?!!this.disabled():!!this.disabled}onClick(f){this.isDisabled||this.action.emit(f)}static{this.\u0275fac=function(M){return new(M||s)}}static{this.\u0275dir=d.FsC({type:s,inputs:{label:[1,"label"],triggerOnFormSubmit:[1,"triggerOnFormSubmit"],icon:[1,"icon"],ngClass:[1,"ngClass"],disabled:[1,"disabled"]},outputs:{action:"action"}})}}return s})()},18934(y,h,t){t.d(h,{Q:()=>d});var m=t(36124);let d=(()=>{class i{constructor(a){this.templateRef=a}static{this.\u0275fac=function(f){return new(f||i)(m.rXU(m.C4Q))}}static{this.\u0275dir=m.FsC({type:i,selectors:[["","extendedFabSpeedDialTriggerContent",""]]})}}return i})()},20545(y,h,t){t.d(h,{d:()=>d});var m=t(36124);let d=(()=>{class i{constructor(a){this.templateRef=a}static{this.\u0275fac=function(f){return new(f||i)(m.rXU(m.C4Q))}}static{this.\u0275dir=m.FsC({type:i,selectors:[["","extendedFabSpeedDialActionsContent",""]]})}}return i})()},32760(y,h,t){function m(s){return"Escape"===s.key}function d(s){return("s"===s.key||"S"===s.key)&&(s.ctrlKey||s.metaKey)}function i(s){return"Enter"===s.key&&(s.ctrlKey||s.metaKey)}t.d(h,{JY:()=>d,KL:()=>m,YU:()=>i})},63628(y,h,t){t.d(h,{i:()=>I});var m=t(79748),d=t(85309),i=t(93840),s=t(90852),a=t(34601),f=t(18759),M=t(56884),o=t(36124),F=t(82272),R=t(74390),O=t(18934),x=t(17828);function D(r,b){if(1&r){const u=o.RV6();o.j41(0,"button",1),o.nI1(1,"translate"),o.nI1(2,"translate"),o.bIt("click",function(C){M.eBV(u);const P=o.XpG();return M.Njj(P.onClick(C))}),o.j41(3,"span"),o.EFF(4),o.nI1(5,"translate"),o.k0s(),o.j41(6,"span",2)(7,"kbd"),o.EFF(8,"\u2303"),o.k0s(),o.j41(9,"kbd"),o.EFF(10,"\u23ce"),o.k0s()(),o.j41(11,"mat-icon"),o.EFF(12),o.k0s()()}if(2&r){const u=o.XpG();o.Y8G("type",u.triggerOnFormSubmit()?"submit":"button")("tippy",o.bMT(1,6,u.label())+" ("+o.bMT(2,8,"Form.Buttons.ActionAndCloseShortcut")+")")("ngClass",u.ngClass())("disabled",u.isDisabled),o.R7$(4),o.JRh(o.bMT(5,10,u.label())),o.R7$(8),o.JRh(u.icon())}}let I=(()=>{class r extends f.d{static{this.\u0275fac=(()=>{let u;return function(C){return(u||(u=o.xGo(r)))(C||r)}})()}static{this.\u0275cmp=o.VBU({type:r,selectors:[["app-save-close-button-fab"]],features:[o.Vt3],decls:2,vars:0,consts:[["extendedFabSpeedDialTriggerContent",""],["tippyShowDelay","500","extended-fab-speed-dial-trigger","","matRipple","",3,"click","type","tippy","ngClass","disabled"],[1,"keybinding-hint"]],template:function(v,C){1&v&&(o.j41(0,"extended-fab-speed-dial"),o.DNE(1,D,13,12,"ng-template",0),o.k0s())},dependencies:[m.YU,i.m_,i.An,F.d,R.t,O.Q,d.p,x.r6,s.h,a.e,s.D9],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.keybinding-hint[_ngcontent-%COMP%]{display:inline-flex;align-items:center;font-size:.75rem;line-height:1.5}.keybinding-hint[_ngcontent-%COMP%]   kbd[_ngcontent-%COMP%] + kbd[_ngcontent-%COMP%]{margin-left:3px}"]})}}return r})()},74390(y,h,t){t.d(h,{t:()=>i});var m=t(37580),d=t(36124);let i=(()=>{class s{constructor(f){this.elementRef=f,this.disabled=(0,m.hFB)(!1)}ngOnChanges(f){null!=f.disabled&&this.elementRef.nativeElement.toggleAttribute("disabled",this.disabled())}static{this.\u0275fac=function(M){return new(M||s)(d.rXU(d.aKT))}}static{this.\u0275dir=d.FsC({type:s,selectors:[["","extended-fab-speed-dial-trigger",""]],inputs:{disabled:[1,"disabled"]},features:[d.OA$]})}}return s})()},76882(y,h,t){t.d(h,{T:()=>s});var m=t(91687),i=t(50819);function s(a,f){return(0,i.N)(function d(a,f,M,o,F){return(R,O)=>{let x=M,D=f,I=0;R.subscribe((0,m._)(O,r=>{const b=I++;D=x?a(D,r,b):(x=!0,r),o&&O.next(D)},F&&(()=>{x&&O.next(D),O.complete()})))}}(a,f,arguments.length>=2,!1,!0))}},82272(y,h,t){t.d(h,{d:()=>x});var m=t(79748),d=t(37580),i=t(36124),s=t(75797),a=t(19999),f=t(91817),M=t(63037),o=t(30281),F=t(18708),R=t(20545),O=t(18934);let x=(()=>{class D extends o.${constructor(){super(),this.disabled=(0,d.hFB)(!1),this.open$=new s.t(!1)}ngAfterContentInit(){this.subscriptions.add((0,a.z)([this.open$.pipe((0,f.F)()),this.actionButtons.changes.pipe((0,M.Z)(void 0))]).subscribe(([r])=>{this.actionButtons.forEach((b,u,v)=>{const P=Math.min(.3+.05*(v.length-1),.6),A=(P-.3)/(v.length-1),S=(r?.3+A*u:P-A*u)+"s";b.nativeElement.style.transitionDuration!==S&&(b.nativeElement.style.transitionDuration=S)})}))}ngOnDestroy(){this.open$.complete(),super.ngOnDestroy()}setOpen(r,b){"touch"!==r.pointerType&&this.open$.next(b)}static{this.\u0275fac=function(b){return new(b||D)}}static{this.\u0275cmp=i.VBU({type:D,selectors:[["extended-fab-speed-dial"]],contentQueries:function(b,u,v){if(1&b&&i.wni(v,O.Q,5)(v,R.d,5)(v,F.R,4,i.aKT),2&b){let C;i.mGM(C=i.lsd())&&(u.trigger=C.first),i.mGM(C=i.lsd())&&(u.actions=C.first),i.mGM(C=i.lsd())&&(u.actionButtons=C)}},inputs:{disabled:[1,"disabled"]},features:[i.Vt3],decls:5,vars:3,consts:[[1,"extended-fab-speed-dial",3,"pointerenter","pointerleave"],[1,"extended-fab-speed-dial-trigger"],[3,"ngTemplateOutlet"],[1,"extended-fab-speed-dial-actions"]],template:function(b,u){1&b&&(i.j41(0,"div",0),i.bIt("pointerenter",function(C){return u.setOpen(C,!0)})("pointerleave",function(C){return u.setOpen(C,!1)}),i.j41(1,"div",1),i.eu8(2,2),i.k0s(),i.j41(3,"div",3),i.eu8(4,2),i.k0s()()),2&b&&(i.BMQ("disabled",u.disabled()||null),i.R7$(2),i.Y8G("ngTemplateOutlet",null==u.trigger?null:u.trigger.templateRef),i.R7$(2),i.Y8G("ngTemplateOutlet",null==u.actions?null:u.actions.templateRef))},dependencies:[m.T3],styles:['extended-fab-speed-dial{display:block}.extended-fab-speed-dial .extended-fab-speed-dial-actions{display:flex;flex-direction:column-reverse;align-items:flex-end;position:absolute;bottom:44px;right:0;pointer-events:none}.extended-fab-speed-dial .extended-fab-speed-dial-actions button[extended-fab-speed-dial-action]{opacity:0;transition:opacity .3s ease-in-out;margin-bottom:8px}.extended-fab-speed-dial:hover:not([disabled]) .extended-fab-speed-dial-actions{pointer-events:all}.extended-fab-speed-dial:hover:not([disabled]) .extended-fab-speed-dial-actions button[extended-fab-speed-dial-action]{opacity:1}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger],.extended-fab-speed-dial button[extended-fab-speed-dial-action]{display:flex;align-items:center;justify-content:center;min-width:48px;height:44px;border:none;border-radius:16px 0;padding-left:14px;padding-right:14px;color:#fff;font-size:12px;white-space:nowrap;background:linear-gradient(125deg,#240e12 10%,#952c42 90%);cursor:pointer;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;box-sizing:border-box}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>mat-icon,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>mat-icon{color:#fff;font-size:20px;width:20px;height:20px;line-height:20px}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span{color:#fff;display:inline-block;white-space:nowrap;overflow:hidden;max-width:0;transition:all .3s ease-in-out}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span:before,.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span:after,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span:before,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span:after{content:"";width:8px;display:inline-block}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>.keybinding-hint,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>.keybinding-hint{padding:2px 0 0;margin:0}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger][disabled],.extended-fab-speed-dial button[extended-fab-speed-dial-trigger].appear-disabled,.extended-fab-speed-dial button[extended-fab-speed-dial-action][disabled],.extended-fab-speed-dial button[extended-fab-speed-dial-action].appear-disabled{cursor:default;color:#00000042;background-color:#1d273d1f}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]:hover>span,.extended-fab-speed-dial button[extended-fab-speed-dial-action]:hover>span{max-width:256px}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]:hover>.keybinding-hint,.extended-fab-speed-dial button[extended-fab-speed-dial-action]:hover>.keybinding-hint{margin:0 8px 0 4px;padding-top:2px;border-radius:6px;background:#ffffff1a;transition:all .3s ease-in-out}\n'],encapsulation:2})}}return D})()},98629(y,h,t){t.r(h),t.d(h,{EditContentTypeFieldsComponent:()=>pe});var m=t(79748),d=t(56884),i=t(36664),s=t(34456),a=t(84175),f=t(20762),M=t(87941),o=t(24950),F=t(93840),R=t(59791),O=t(25175),x=t(90852),D=t(59452),I=t(61318),r=t(51903),b=t(51567),u=t(43143),v=t(12938),C=t(47703),P=t(17693),A=t(32760),S=t(30281),G=t(11855),V=t(78742),k=t(1726),W=t(4202),X=t(63628),L=t(67993),N=t(14007),j=t(35160),e=t(36124),Y=t(69393),J=t(3347),$=t(80423),H=t(96462),z=t(55326);const Q=["ngForm"],Z=["autoFocusInputField"],w=p=>({"eav-input-obsolete":p}),q=(p,T)=>T.SortOrder;function ee(p,T){1&p&&e.EFF(0," Fields ")}function te(p,T){1&p&&e.EFF(0," Add Fields ")}function ne(p,T){1&p&&e.EFF(0," Edit Field ")}function ie(p,T){if(1&p&&(e.j41(0,"app-field-hint",20),e.EFF(1),e.k0s()),2&p){const n=e.XpG(4);e.Y8G("isError",!0),e.R7$(),e.JRh(n.fieldNameError)}}function ae(p,T){if(1&p&&(e.j41(0,"app-field-hint",20),e.EFF(1),e.k0s()),2&p){e.XpG(2);const n=e.sdS(6);e.Y8G("isError",!0),e.R7$(),e.SpI(" ",n.errors.reservedNames," ")}}function se(p,T){if(1&p&&(e.nVh(0,ie,2,2,"app-field-hint",20),e.nVh(1,ae,2,2,"app-field-hint",20)),2&p){e.XpG();const n=e.sdS(6);e.vxM(n.errors.pattern?0:-1),e.R7$(),e.vxM(n.errors.reservedNames?1:-1)}}function oe(p,T){if(1&p&&(e.j41(0,"mat-option",16),e.EFF(1),e.j41(2,"mat-icon",15),e.EFF(3),e.k0s()()),2&p){const n=T.$implicit;e.Y8G("value",n.name),e.R7$(),e.SpI(" ",n.label," "),e.R7$(2),e.JRh(n.icon)}}function de(p,T){if(1&p&&(e.j41(0,"span")(1,"mat-icon",18),e.EFF(2),e.k0s()()),2&p){const n=e.XpG().$implicit;e.R7$(2),e.JRh(n.icon)}}function le(p,T){if(1&p&&(e.j41(0,"mat-option",19),e.EFF(1),e.nVh(2,de,3,1,"span"),e.k0s()),2&p){const n=T.$implicit;e.Y8G("value",n.inputType)("ngClass",e.eq3(4,w,n.isObsolete)),e.R7$(),e.SpI(" ",n.label," "),e.R7$(),e.vxM(n.icon?2:-1)}}function re(p,T){if(1&p){const n=e.RV6();e.j41(0,"div",8)(1,"div",11)(2,"mat-form-field",12)(3,"mat-label"),e.EFF(4,"Name"),e.k0s(),e.j41(5,"input",13,1),e.mxI("ngModelChange",function(c){const l=d.eBV(n).$implicit;return e.DH7(l.StaticName,c)||(l.StaticName=c),d.Njj(c)}),e.k0s()(),e.nVh(8,se,2,2),e.k0s(),e.j41(9,"div",11)(10,"mat-form-field",12)(11,"mat-label"),e.EFF(12,"Data Type"),e.k0s(),e.j41(13,"mat-select",14),e.bIt("selectionChange",function(c){const l=d.eBV(n).$index,g=e.XpG(2);return d.Njj(g.setFieldType(l,c.value))}),e.j41(14,"mat-select-trigger")(15,"mat-icon",15),e.EFF(16),e.k0s(),e.j41(17,"span"),e.EFF(18),e.k0s()(),e.Z7z(19,oe,4,3,"mat-option",16,e.fX1),e.k0s()(),e.j41(21,"app-field-hint"),e.EFF(22),e.k0s()(),e.j41(23,"div",11)(24,"mat-form-field",12)(25,"mat-label"),e.EFF(26,"Input Type"),e.k0s(),e.j41(27,"mat-select",17),e.bIt("selectionChange",function(c){const l=d.eBV(n).$index,g=e.XpG(2);return d.Njj(g.updateFieldPart(l,{InputType:c.value}))}),e.j41(28,"mat-select-trigger")(29,"span"),e.EFF(30),e.k0s(),e.j41(31,"mat-icon",18),e.EFF(32),e.k0s()(),e.Z7z(33,le,3,6,"mat-option",19,e.fX1),e.k0s()(),e.j41(35,"app-field-hint"),e.EFF(36),e.k0s()()()}if(2&p){let n,_;const c=T.$implicit,l=T.$index,g=e.sdS(6),E=e.XpG(2);e.R7$(5),e.Y8G("pattern",E.fieldNamePattern)("appReservedNames",E.reservedNames()),e.R50("ngModel",c.StaticName),e.Y8G("name","StaticName"+l)("disabled","inputType"===E.editMode),e.R7$(3),e.vxM(g.touched&&g.errors?8:-1),e.R7$(5),e.Y8G("ngModel",c.Type)("name","Type"+l)("disabled",null!=E.editMode),e.R7$(3),e.JRh(E.findIcon(c.Type)),e.R7$(2),e.JRh(E.findLabel(c.Type)),e.R7$(),e.Dyx(E.dataTypes()),e.R7$(3),e.JRh(E.hints()[l].data),e.R7$(5),e.Y8G("ngModel",c.InputType)("name","InputType"+l)("disabled","name"===E.editMode),e.R7$(3),e.JRh(null==(n=E.getInputTypeOption(c.InputType))?null:n.label),e.R7$(2),e.JRh(null==(_=E.getInputTypeOption(c.InputType))?null:_.icon),e.R7$(),e.Dyx(E.inputTypeOptions()[l]),e.R7$(3),e.JRh(E.hints()[l].input)}}function _e(p,T){if(1&p){const n=e.RV6();e.j41(0,"form",6,0),e.bIt("ngSubmit",function(){d.eBV(n);const c=e.XpG();return d.Njj(c.saveAndClose())}),e.j41(2,"div",7),e.Z7z(3,re,37,18,"div",8,q),e.k0s(),e.j41(5,"mat-dialog-actions",9)(6,"app-save-close-button-fab",10),e.bIt("action",function(){d.eBV(n);const c=e.XpG();return d.Njj(c.saveAndClose())}),e.k0s()()()}if(2&p){const n=e.XpG();e.R7$(3),e.Dyx(n.fields()),e.R7$(3),e.Y8G("triggerOnFormSubmit",!0)("ngClass",n.canSave()?"":"disabled")("disabled",!n.canSave())}}let pe=(()=>{class p extends S.${#a;#e;constructor(n,_,c){super(),this.dialog=n,this.route=_,this.snackBar=c,this.hostClass="dialog-component",this.formValid=(0,d.vPA)(!1),this.canSave=(0,i.EW)(()=>this.formValid()&&!this.saving()),this.#a=(0,v.d)(P.g),this.#e=(0,v.d)(V.h),this.fieldNamePattern=C.w,this.fieldNameError=C.s,this.findIcon=N.y,this.findLabel=N.D,this.editMode=this.route.snapshot.paramMap.get("editMode"),this.filteredInputTypeOptions=[],this.saving=(0,d.vPA)(!1),this.dataTypes=this.#e.dataTypes().value,this.#t=this.#e.getInputTypes().value,this.#n=this.#a.getType(this.route.snapshot.paramMap.get("contentTypeStaticName")).value,this.#i=(0,i.EW)(()=>{const l=this.#n();return(0,d.O8t)(()=>this.#e.getFieldsLive((0,d.vPA)(0),l?.NameId))}),this.fields=(()=>{const l=(0,L.bo)("fields",()=>{const g=this.#i()();if(null!=this.editMode){if(0===g.length)return[];const E=this.route.snapshot.paramMap.get("id"),K=E?parseInt(E,10):null;return[g.find(U=>U.Id===K)]}return this.#o(g.length)});return(0,i.uu)({source:l,computation:g=>g})})(),this.#s=this.#e.getReservedNames().value,this.reservedNames=(0,L.bo)("reservedNamesAll",()=>{const l=this.#i()(),g=this.#s();if(0===l.length)return g;const E=j.O.mergeReserved(g,l);return"name"===this.editMode&&delete E[l[0].StaticName],E}),this.inputTypeOptions=(0,L.bo)("inputTypeOptions",()=>{const l=this.#t();return this.fields().map((E,K)=>l.filter(B=>B.dataType===E.Type.toLocaleLowerCase()))}),this.hints=(0,L.bo)("hints",()=>this.fields().map((g,E)=>{const K=this.dataTypes().find(U=>U.name===g.Type),B=this.#t().find(U=>U.inputType===g.InputType);return{data:K?.description??"",input:B?.isObsolete?`OBSOLETE - ${B.obsoleteMessage}`:B?.description??""}})),this.dialog.disableClose=!0,this.subscriptions.add(this.dialog.backdropClick().subscribe(l=>{this.ngForm?.dirty&&!confirm("You have unsaved changes. Are you sure you want to close this dialog?")||this.closeDialog()}))}#t;#n;#i;#s;ngAfterViewInit(){this.fields().length&&this.ngForm?(this.formValid.set(this.ngForm?.form.valid??!1),this.ngForm?.form.statusChanges.subscribe(()=>{this.formValid.set(this.ngForm?.form.valid??!1)}),this.autoFocusInputField&&setTimeout(()=>this.autoFocusInputField.first?.nativeElement?.focus(),250)):setTimeout(()=>this.ngAfterViewInit(),250)}ngOnInit(){this.#d()}#o(n){return[...Array(8).keys()].map(_=>({Id:0,Type:k.O.String,InputType:W.u.StringDefault,StaticName:"",IsTitle:0===n&&0===_,SortOrder:n+_+1}))}updateFieldPart(n,_){this.fields.update(c=>[...c].map((l,g)=>g!==n?l:{...l,..._}))}setFieldType(n,_){this.updateFieldPart(n,{Type:_});const c=_.toLocaleLowerCase()+W.u.DefaultSuffix,l=this.inputTypeOptions()[n],g=l.find(E=>E.inputType===c)?.inputType??l[0].inputType;this.updateFieldPart(n,{InputType:g})}getInputTypeOption(n){return this.#t().find(_=>_.inputType===n)}closeDialog(){this.dialog.close()}saveAndClose(){this.saving.set(!0),this.snackBar.open("Saving...");const n=()=>{this.saving.set(!1),this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()};if(null!=this.editMode){const _=this.fields()[0];"name"===this.editMode?this.#e.rename(_.Id,this.#n().Id,_.StaticName).subscribe(()=>n()):"inputType"===this.editMode&&this.#e.updateInputType(_.Id,_.StaticName,_.InputType).subscribe(()=>n())}else(0,D.of)(...this.fields()).pipe((0,b.p)(_=>!!_.StaticName),(0,r.H)(_=>this.#e.add(_,this.#n().Id).pipe((0,I.W)(c=>(0,D.of)(null)))),(0,u.$)()).subscribe(()=>n())}#d(){this.dialog.keydownEvents().subscribe(n=>{(0,A.YU)(n)&&this.canSave()&&(n.preventDefault(),this.saveAndClose())})}static{this.\u0275fac=function(_){return new(_||p)(e.rXU(M.CP),e.rXU(Y.nX),e.rXU(J.UG))}}static{this.\u0275cmp=e.VBU({type:p,selectors:[["app-edit-content-type-fields"]],viewQuery:function(_,c){if(1&_&&e.GBs(Q,5,s.cV)(Z,5),2&_){let l;e.mGM(l=e.lsd())&&(c.ngForm=l.first),e.mGM(l=e.lsd())&&(c.autoFocusInputField=l)}},hostVars:1,hostBindings:function(_,c){2&_&&e.Avn("className",c.hostClass)},features:[e.Vt3],decls:10,vars:4,consts:[["ngForm","ngForm"],["staticName","ngModel","autoFocusInputField",""],[1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"ngSubmit"],[1,"eav-dialog-content"],[1,"eav-row-container"],["align","end"],[3,"action","triggerOnFormSubmit","ngClass","disabled"],[1,"eav-edit-input"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","pattern","appReservedNames","ngModel","name","disabled"],["panelClass","eav-type-field-type-select","panelWidth","",3,"selectionChange","ngModel","name","disabled"],[1,"eav-type-icon"],[3,"value"],["panelClass","eav-type-field-input-type-select","panelWidth","",3,"selectionChange","ngModel","name","disabled"],[1,"eav-input-icon"],[3,"value","ngClass"],[3,"isError"]],template:function(_,c){if(1&_&&(e.j41(0,"div",2)(1,"div",3)(2,"div",4),e.nVh(3,ee,1,0),e.nVh(4,te,1,0),e.nVh(5,ne,1,0),e.k0s(),e.j41(6,"button",5),e.bIt("click",function(){return c.closeDialog()}),e.j41(7,"mat-icon"),e.EFF(8,"close"),e.k0s()()(),e.nVh(9,_e,7,3,"form"),e.k0s()),2&_){let l;e.R7$(3),e.vxM(void 0===c.editMode?3:-1),e.R7$(),e.vxM(null===c.editMode?4:-1),e.R7$(),e.vxM(null!=c.editMode?5:-1),e.R7$(4),e.vxM(null!=(l=c.fields())&&l.length?9:-1)}},dependencies:[s.YN,s.qT,s.me,s.BC,s.cb,s.R_,s.vS,s.cV,o.RG,$.rl,$.nJ,R.fS,R.fg,j.O,O.Ve,O.VO,O.$2,H.wT,F.m_,F.An,f.S,m.YU,M.E7,a.Hl,z.iY,x.h,G.F,X.i],styles:[".eav-row-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.eav-edit-input[_ngcontent-%COMP%]{padding-bottom:8px;width:30%}.eav-type-icon[_ngcontent-%COMP%]{width:inherit;height:inherit;margin-right:8px;font-size:inherit;vertical-align:top;line-height:inherit}.eav-input-icon[_ngcontent-%COMP%]{width:inherit;height:inherit;margin-left:8px;font-size:inherit;vertical-align:top;line-height:inherit}.eav-input-obsolete[_ngcontent-%COMP%]{-webkit-text-decoration:black line-through;text-decoration:black line-through;color:#696969}  .mdc-menu-surface.mat-mdc-select-panel.eav-type-field-input-type-select,   .mdc-menu-surface.mat-mdc-select-panel.eav-type-field-type-select{max-height:500px}"]})}}return p})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/21.03.00/dist/ng-edit/projects_eav-ui_src_app_content-type-fields_edit-content-type-fields_edit-content-type-fields-f8dc27.f0f88cd75d850d6c.js.map