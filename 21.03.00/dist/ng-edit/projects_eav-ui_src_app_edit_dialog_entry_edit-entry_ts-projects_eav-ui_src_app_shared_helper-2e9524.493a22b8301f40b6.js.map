{"version":3,"file":"projects_eav-ui_src_app_edit_dialog_entry_edit-entry_ts-projects_eav-ui_src_app_shared_helper-2e9524.493a22b8301f40b6.js","mappings":"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A,MAAA,oBACEA,MAAA,wBAAAA,aAAA4pC,GAAA5pC,MAAckqC,EAAAg4D,aAAY,GAO5BliG,QACAA,MAAA,WAEEA,MADA,UACAA,CADqC,cAEvCA,QACAA,MAAA,iBACFA,cAlBKA,MAAA,UAAAA,MAAA,EAAA6xC,GAAA3H,EAAApzB,WAAA06B,SAAAtH,EAAA+6D,iBAODjlG,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAAi5E,IAAA/uC,EAAA+6D,eAAA/6D,EAAA86D,iBAMGhlG,cAAAkqC,EAAArpC,OAAA6zB,uBAA2C10B,MAAA,UAAAA,MAAA,GAAAm5E,GAAAjvC,EAAA86D,iBAIjBhlG,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAm5E,GAAAjvC,EAAA86D,iCDJzBhD,GACA51D,MACAu4D,IAAiBn4D,OAAA,otEAGZu4D,CAAoB,qBEZjC,MAAMK,GAAkB,IAAInzD,MAAe,mBACrCozD,GAAiB,CACnB,QACA,UACA,UACA,WACA,WACA,aACA,OACA,YACA,UACA,YACA,WACA,YACA,YACA,YACA,aACA,cACA,iBACA,kBACA,mBACA,gBACA,kBACA,kBACA,mBACA,mBACA,qBACA,QACA,gBACA,uBAEJ,MAAMC,GACFC,QACAC,UACAC,WACAC,YACAx7F,IACA4kE,OACAv2E,OACAotG,QACAtzF,KACAuzF,OACAC,OACAxwG,SACAywG,WACAC,cACAC,eACAC,gBACAC,kBACAC,qBACAC,UACAC,UACAC,QACAC,SACAC,YACAC,aACAC,cACAC,cACAC,eACAC,eACAC,gBACAC,YACAC,aACAC,aACAC,cACAC,eACAC,eACAC,gBACAC,gBACAC,gBACAC,UACAC,iBACAC,kBACAC,qBACAC,sBACAC,SACAC,UACAC,YACAC,cACAC,iBACAC,qBACAC,kBACAC,mBACAC,oBACAC,eACAC,kBACAC,oBACAC,eACAC,iBACAC,mBACAC,iBACAC,qBACAC,2BACAC,6BACA71G,YAAY2N,EAAS,CAAC,GAClB1N,KAAK61G,OAAOnoG,EAChB,CACAmoG,OAAOnoG,EAAS,CAAC,EAAGnG,GAChBA,EAASA,G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","names":["DataTypeCatalog","Boolean","Custom","DateTime","Empty","Entity","Hyperlink","Number","String","BaseDirective","constructor","this","subscriptions","Subscription","ngOnDestroy","unsubscribe","EavField","dtoToEav","valueDto","type","Values","EavFieldValue","Type","EavEntityAttributes","attributesDto","attributes","typeName","attributeDto","Object","entries","attributeName","mergeSettings","metadataItems","merged","item","Id","name","value","Attributes","copy","UserLanguageService","#stateManager","StateManagerLocal","#config","part","fallback","fromUrl","#dialogUiSettings","LanguagePart","UI","endsWith","language","slice","force","stored","get","save","add","uiCode","toLocaleLowerCase","split","primaryTranslatableEnabled","PrimaryTranslatable","toLowerCase","savePrimaryTranslatable","enabled","isForced","userConfigurable","isConfigurable","languageUserSettings","#uiSettingsCached","storedMaybeString","sessionStorage","getItem","keySettings","JSON","parse","factory","fac","providedIn","logSpecs","all","getEntities","getAvailableEntities","delete","webApiEntityRoot","webApiEntityList","EntityService","HttpServiceBaseSignal","log","classLog","queryService","transient","QueryService","getEntities$","params","fnIf","pipe","filter","p","switchMap","contentTypeName","shareReplay","entitiesFilter","contentTypes","itemIds","fields","map","data","Default","appId","contentType","entityId","parentId","parentField","parent","http","apiUrl","id","toString","__ngFactoryType__","LanguageService","SignalStoreBase","super","getId","NameId","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","fromEvent","target","eventName","options","resultSelector","isFunction","undefined","mapOneOrManyArgs","remove","isEventTarget","addEventListener","removeEventListener","methodName","handler","isNodeStyleEventEmitter","addListener","removeListener","toCommonHandlerRegistry","isJQueryStyleEventEmitter","on","off","isArrayLike","mergeMap","subTarget","innerFrom","TypeError","Observable","subscriber","args","next","length","AdamCacheService","Guid","loadPrefetch","prefetchAdams","snapshots","entityGuid","addMany","getAdamSnapshot","fieldName","cache","LinkCacheService","key","trim","addPrefetch","prefetchLinks","prefetchAdam","links","linkInfo","adamLinkList","flatMap","_","prefetchFields","__","items","adamToLinks","addAdam","addLink","link","Adam","IsFolder","ReferenceId","Value","Url","extractAdamPortalUrl","src","idx","indexOf","substring","adamSegment","fetchFormData","saveFormData","FormDataService","globalConfigService","context","post","formData","Context","Language","List","IsEnabled","tap","allowDebug","Enable","DebugMode","result","partOfPage","i0","i1","PublishModes","Show","Hide","Branch","FormPublishingService","formId","#signalsPublishModeCache","ComputedCacheHelper","setPublishMode","publishMode","eavService","config","versioningOptions","keys","DraftShouldBranch","IsPublished","getPublishMode","getOrCreate","toPublishMode","publishStatus","preserve","InitialValuesService","#cache","formConfig","itemService","languageService","aIf","getMany","itemGuids","allLangs","getAll","includes","current","push","primary","currentLang","formValues","EntityReader","currentValues","cacheKey","#cacheKey","l","r","i2","i3","initMissingValues","DebugFields","InitializeMissingValuesServices","inputTypeService","contentTypeService","lMain","updater","eavConfig","inputTypes","languages","logicManager","FieldSettingsHelpersManager","singleton","switchToDefault","isCreateMode","createMode","fss","FieldsSettingsHelpers","getContentTypeOfItem","ctAttribute","currentName","Name","fnIfInFields","inputType","find","i","InputType","isEmptyType","InputTypeHelpers","isEmpty","a","logic","attributeValues","fieldSettings","getDefaultSettings","flatten","Metadata","fieldType","firstValue","FieldReader","currentOrDefaultOrAny","isValueEmpty","setDefaultValue","disableI18n","DisableI18n","noLanguageValue","currentOrDefault","transactionItem","removeItemAttributeDimension","addItemAttributeValue","defaultLanguageValue","valueIsEmpty","IsEphemeral","i4","i5","mergeResponse","ItemsRequestRestoreHelper","contentsOverride","itemsWithIndex","index","clientId","itemsForRequest","Prefill","ClientData","cleaned","original","Header","dataFromDialog","importLoadedData","EditInitializerService","#formDataService","#userLanguageSvc","#initMissingValuesSvc","route","contentTypeItemService","publishStatusService","translate","languageStore","snackBar","adamCacheService","linkCacheService","featuresService","initialValuesService","loaded","signal","adamPortalUrl","convertUrlToForm","snapshot","dataHelper","requestItems","stringify","subscribe","responseRaw","Prefetch","Links","linkValues","values","fullUrl","set","response","Items","load","Update$2sxcEnvFromContext","App","#importLoadedData","#initMissingValues","loadDto","Math","floor","random","isParentDialog","calculateIsParentDialog","editDialogCount","path","pathFromRoot","url","urlSegment","correctAdamFolderBasePath","orgAdamPortalUrl","imgTagRegex","forEach","entityBundle","content","Content","lang","htmlValue","html","decodeHtml","textarea","document","createElement","innerHTML","replace","imgTag","srcMatch","match","imgSrc","currentAdamUrl","updatedSrc","loadItems","InputTypes","addContentTypeItems","ContentTypeItems","addContentTypes","ContentTypes","isCopy","DuplicateEntity","enableHistory","history","settingsAsEav","Settings","Entities","EavEntity","dtoToEavMany","EavContentType","initFormConfig","langs","userLangCode","Current","use","sortedLanguages","sortLanguages","primaryLangKey","primaryLang","sameLangs","otherLangs","startsWith","sort","b","localeCompare","Primary","addForm","setCurrent","message","instant","open","duration","i6","i7","i8","i9","i10","i11","i12","i13","i14","i15","sortByType","insertToDom","ScriptsLoaderService","#loadedFiles","scripts","callback","sortedFiles","#sortByType","#insertToDom","cssFiles","jsFiles","script","file","_a","resolveUrlTokens","domEl","concat","files","increment","window","sxcVersion","existing","loadedFile","_listener","rel","href","querySelector","appendChild","UrlHelpers","getUrlPrefix","LoadIconsService","matIconRegistry","domSanitizer","icons","folder","sitemap","svg","addSvgIconLiteral","bypassSecurityTrustHtml","EntityFormStateService","controlsCreated","isSaving","formGroup","UntypedFormGroup","childFormResult","expand","watchToRefreshOnVersionsClosed","EditRoutingService","ServiceBase","#dialogRouter","#route","#router","langInstanceSvc","DialogRoutingService","router","#childFormResult$","Subject","#signalsExpandedCache","complete","init","#initHideHeader","#watchChildFormResult","#getParams","#getParamsAndPayload","hasDetails","detailsEntityGuid","detailsFieldId","hasUpdate","updateEntityGuid","updateFieldId","guid","fieldId","isExpanded","fieldIndex","isExpanded$","mapUntilChanged","isExpandedSignal","injector","cached","obs","toSignal","cr","rSilent","childFormClosed","componentTag","pInfo","newUrlIfCurrentContainsOldUrl","end","navigate","state","form","formUrl","convertFormToUrl","relativeTo","updateHideHeader","childDialogClosed$","parseInt","getCurrentNavigation","extras","PickerItemFactory","placeholder","i18nLabel","suffix","label","noSelect","isMessage","noDelete","noEdit","DataAdapterBase","setupEmpty","connectState","initPrefetch","fetchItems","dataSource","signalObj","optionsOrHints","computedObj","dataSourceRaw","setup","deleteCallback","doAfterDelete","logSpecsDataAdapterEntityBase","editItem","getPrefill","DataAdapterEntityBase","#editRoutingService","#snackBar","#entityService","inject","FormConfigService","TranslateService","MatSnackBar","fieldState","FieldState","group","#paramsMaskLazy","FieldMask","initSignal","settingExt","#createEntityTypes","settings","CreateTypes","myFeatures","create","#deletedItemsGuids","errorOptions","errors","ds","deleted","some","loading","#prefill","#createParams","#editParams","syncParams","onAfterViewInit","prefetchGuids","forceReloadData","missingData","fn","addToRefresh","editParams","entityType","editGuid","formParams","#urlToObject","ItemIdHelper","newFromType","editId","parameters","take","l2","deleteItem","props","entity","title","confirm","update","error","dismiss","prefill","fromEntries","line","parts","fill","textEntry","multiValue","edit","mergePickerFeatures","first","second","firstTrue","secondTrue","convertArrayToString","separator","Array","isArray","join","addInfosFromSourceForUi","optionsWithMissing","selectedRaw","selectedOverride","selectedState","features","allOptions","PickerData","#translate","closeWatcherAttachedWIP","ready","optionsRaw","source","optionsOverride","optionsAll","getWith","o","optionsAllowsEmpty","pickerItemsAllowsEmpty","dropdownOptions","#toSelectedWithUiInfo","selectedItems","selectedAll","selectedOne","selected","missing","s","#settingsLazy","#featuresFromSettings","EnableTextEntry","AllowMultiValue","EnableCreate","EnableRemove","EnableDelete","EnableEdit","sourceFeatures","stateFeatures","settingsFeatures","mergeSourceAndState","forControl","showGoToListDialogButton","showAddNewButton","isInFreeTextMode","specs","effect","raw","override","final","allowsEmptyLazy","initiallySelected","selectedCopy","addNewlyCreatedItem","newItemGuid","opts","e","createPickerItemFromItem","tooltip","info","#createPickerItemFromValue","toggleFreeTextMode","validDataExpected","PickerDataFactory","inputTypeSvc","createPickersForAttributes","getSpecs","#createPickersData","it","picker","#createOne","reduce","acc","isAnyPicker","SignalEquals","bool","equal","RxHelpers","valueEquals","number","string","ref","FormsStateService","#formsValid","#formsDirty","triggerTrySaveAndMaybeClose","tryToSave","close","formsAreValid","formsAreDirty","readOnly","itemHeaders","getItemHeaderSignal","getAllSignal","itemsReadOnly","itemHeader","EditInfo","ReadOnly","languageAllowed","IsAllowed","isReadOnly","reason","formsValidTemp","saveButtonDisabled","getFormValid","setFormValid","isValid","allValid","valid","setFormDirty","isDirty","anyDirty","dirty","triggerSave","FormulaExecutionSpecsFactory","#features","FeaturesService","languageSvc","globalConfigSvc","settingsSvc","clientData","#entityGuid","#settingsSvc","#clientData","#warningsObsolete","getSharedSpecs","debugEnabled","isDebug","initialFormValues","fieldsSettingsSvc","FormulaPropsParameters","warningsObsolete","FieldPropsPicker","getPickerInfos","filterFormulasIfPickerNotReady","FormulaFieldPickerHelper","fieldConstants","propsBefore","isSpecialPicker","inputTypeSpecs","isNewPicker","infos","#infos","#getInfos","before","picks","f","fieldIsSpecialPicker","formulas","sleep","changed","ver","pickerData","dummy","list","listRaw","verBefore","mapper","getVersion","sel","updateFormulaSleep","formula","FormulaSpecialPickerAutoSleep","preserveResultsAfterRun","wip","FormulaSettingsHelper","keepSettingIfTypeOk","valueNew","settingsNew","keepSettingIfTypeOkAndStatus","settingName","SettingsFormulaPrefix","prevSetting","isEqual","wasChanged","runFormula","runAllOfField","runOrInitSettings","FormulaRunField","promiseHandler","designerSvc","runOneHelper","settingsCurrent","valueBefore","reuseExecSpecs","setUpdHelper","pickHelp","fAll","untracked","getActive","fGrouped","groupBy","disabled","#showDisabledFormulasWarnings","noPromiseSleep","filterFormulas","finalize","validation","#runAllOfField","settingsInitial","pickerHelper","defaultValueHelper","FieldDefaults","settingsUpdate","correctSettingsAfterChanges","requiredFeatures","FeatureNames","PickerFormulas","console","warn","disabledReason","runParams","reuseObjectsForFormulaDataAndContext","start","performance","now","allRunParams","runParameters","#runFormula","updateStop","handleStopAndPromise","isValue","isValidation","isSetting","afterRun","execSpecs","devHelper","valHelper","getPartsFor","version","showStart","FormulaVersions","V1","v1Raw","ok","v1Result","valueV1","v1","showResult","toFormulaResult","V2","v2Raw","v2Value","v2","promise","Error","showError","getFormulas","runAllFields","runOneFieldOrInitSettings","FormulaEngine","#formulaExecSpecsFactory","logSvc","ctTitle","#promiseHandler","#contentType","#attributes","#contentTypeTitle","propsEngine","cycle","fieldsProps","valueUpdates","fieldUpdates","attr","lAttr","allAttributes","getFieldConstants","latestSettings","getFieldSettingsInCycle","settingsUpdateHelper","updateHelper","fieldProps","FormulaRunOneHelpersFactory","allResults","fixed","translationState","getTranslationState","DisableTranslation","constants","buildWrappers","formulaValidation","FormulaPromiseResult","addFormulaPromise","defineCallbackHandlerIfMissing","changesFromQueue","promiseComplete","FormulaPromiseHandler","itemSvc","#updateValueQueue","#fieldsSettingsService","fieldsSettingsService","modifiedChecker","#modifiedChecker","promiseResult","hasPromise","Promise","newStop","stop","msg","openInDesigner","promises$","completed","#defineCallbackHandlerIfMissing","lcb","updateCallback$","#promiseComplete","FormulaValueCorrections","queue","queueItem","fieldQueue","promiseCompleted","retriggerFormulas","toProcess","valueChanges","newFieldProps","dataEntries","field","flat","modifiedValues","getValueUpdates","itemAttributes","getItemAttributes","setting","constantFieldPart","attribute","mergedSettings","updatedSettings","WrappersCatalog","WrappersLocalizationOnly","wrappers","WrapperHelper","getWrappers","isGroupStart","InputTypeCatalog","EntityDefault","StringDropdownQuery","EntityQuery","EntityContentBlocks","StringDropdown","EntityPicker","StringPicker","NumberPicker","isExternal","getCycleSettingsAndValues","getLatestSettingsAndValues","FieldsPropsEngineCycle","engine","initialValues","#getLatestSettingsAndValues","mergedValues","loopIndex","isFirstRound","formulaPromises","formulaEngine","constFieldPart","ItemFieldVisibility","identifier","defaultIsShow","ruleIsShow","prev","hasRules","isVisibleDisabled","mergedVisible","Visible","VisibleDisabled","makeParentGroupsVisible","allConstFieldParts","groupField","innerField","endsPreviousGroup","stablePartsOfLanguage","stablePartOfField","constantPartsOfField","constantFieldParts","staticPartsOfField","FieldsSettingsConstantsService","#fieldSettingsHelper","itemForIds","entityReaderCurrent","labelReaderCurrent","#item","#itemFieldVisibility","#entityReaderCurrent","#labelReaderCurrent","#fieldSettingsSvc","stableDataOfLanguage","typeNameId","constParts","#constantPartsOfField","#stablePartsOfLanguage","reader","labelReader","entityReader","constPartOfLanguage","lInner","labelMerged","Placeholder","Notes","withGeneric","mergeGenericSettings","c","inputTypeConfiguration","constPartsWithGroupVisibility","contentTypeNameId","mdMerger","initial","allPickers","constFieldParts","metadata","initialSettings","initialDisabled","Disabled","dropzonePreviewsClass","isLastInGroup","ValidationHelpers","isRequired","#shouldIgnoreValidators","Required","getValidators","validators","HyperlinkLibrary","#required","#requiredAdam","#regEx","#decimals","#numberMin","#numberMax","#listMin","#listMax","#formulaValidate","CustomJsonEditor","#jsonValidator","#ensureWarningsAndGetSettingsIfNoIgnore","control","valueRequired","Validators","required","adamItems","ValidationRegExJavaScript","pattern","Decimals","matchString","decimals","Min","min","Max","max","AllowMultiMin","countValues","minNoItems","AllowMultiMax","maxNoItems","warning","jsonMode","JsonValidation","_warning","jsonWarning","jsonError","severity","formulaWarning","formulaMessage","formulaError","pd","convertValueToArray","emptyIsValid","Separator","ValidationHelperSpecs","pickersGet","schemaDisablesTranslation","getDisabledBecauseTranslations","FieldSettingsUpdateHelperFactory","contentTypeMetadata","fieldLogicTools","formReadOnly","slotIsEmpty","FieldSettingsUpdateHelper","formSlotIsEmpty","fieldValue","disableTranslation","#schemaDisablesTranslation","uiDisabledInThisLanguage","#getDisabledBecauseTranslations","uiDisabledForced","uiDisabled","DisableAutoTranslation","tools","attributeMetadata","m","Enabled","v","hasPrimary","attrMd","fieldReader","hasEditableValues","hasCurrentReadonly","FieldsValuesModifiedHelper","valueUpdatesFromSideEffects","originalValues","changes","#findBestValue","FieldValueHelpers","fieldValuesAreEqual","fieldsUpdates","sideEffects","valSideEffect","getPickers","FieldsPropsEngine","#formConfig","#globalConfigService","#formsStateService","#contentTypeItemService","#itemService","#constantsService","#pickerFac","#fieldsValues","GlobalConfigService","ContentTypeItemService","ItemService","fieldsValues","forceDebug","extendName","forceEnable","ct","#fieldLangConstants","#updateHelper","#getPreparedParts","contentTypeSettings","_itemTitle","#itemAttributes","itemAttributesSignal","fieldLangConstants","readerSig","logicTools","debug","contentTypeItemSvc","FieldsPropertiesUpdates","fieldPropsMixins","hasChanges","updateSetting","queueWasEmpty","after","mergeMixins","mixins","ofField","startSync","filterRelevant","transferPickerData","FieldSettingsPickerUpdater","optsOnly","#filterRelevant","selOnly","#transferPickerData","toTransfer","count","logChanges","FieldsSignalsHelper","#itemGuid","#attributesLazy","lChange","difference","object","base","transform","iteratee","accumulator","isArr","isArrLike","isBuffer","isTypedArray","baseIteratee","Ctor","isObject","baseCreate","getPrototype","arrayEach","baseForOwn","#reader","itemGuid","#fieldValueSigCache","lGet","#values","sig","#createValuesSignal","attrSig","#fieldValueOrNullSignal","getOrCreateWithInfo","getBestValue","isNew","effectTransferPickerData","regenerateProps","activateAnalyzer","FieldsSettingsService","#languageSvc","#contentTypeSvc","#itemSvc","#usrLangSvc","#propsEngine","#pickerSync","FormLanguageService","ContentTypeService","allProps","#startSync","#forceRefresh","#disabled","getEntityReader","#labelReader","lblLang","Form","computed","ContentTypeSettingsHelpers","#fieldValues","#fieldPropsCache","buildProxy","#fieldSignalsCache","proxy","allPropsOrNull","#allProps","disableForCleanUp","#fieldsPropsUpdate","debugOnlyCt","deps","idMsg","slotWasEmpty","forceRefresh","watchRestart","prevFieldProps","hasRunOnce","setInterval","setTimeout","#regenerateProps","latestFieldProps","FieldTranslationInfo","getFieldsProps","#settings","#_settings","isAutoTranslatable","notForAutoTranslateBecauseOfType","autoTranslateIsDisabledByTypeButNotByConfig","canAutoTranslate","unlock","lock","getInfo","autoTranslate","findAutoTranslatableFields","addItemAttributeValueHelper","FieldsTranslateService","#contentTypeId","ItemHelper","getContentTypeNameId","contentTypeId","isTransaction","#getInfo","rNull","doesFieldHaveExistingDimension","currentEditable","defaultValue","FormLanguage","bothPrimary","#addItemAttributeValueHelper","toggleUnlockOnAll","isUnlock","translatable","findTranslatableFields","showMessageNoTranslatableFields","forAutoTranslate","fieldNames","sourceLanguageKey","isMany","areAllChecksKnown","autoTranslateLanguageKey","apiKeyInfo","EditApiKeyPaths","GoogleTranslate","IsDemo","alert","textsForTranslation","currentText","isAutoTranslationEnabledButWasDisabledByDefault","ApiKey","q","fieldsWithExistingDims","translations","translation","elem","translatedText","fieldHasExistingDimension","updateItemAttributeValue","copyFrom","copyFromLanguageKey","valueTranslation","ofLanguage","diffCurrent","isEditableOrReadonlyTranslationExist","linkReadOnly","linkWithLanguageKey","linkToOtherField","linkReadWrite","addItemAttributeDimension","autoTranslateMany","canTranslate","cantTranslateAndEmpty","findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault","x","ti","currentLanguage","getAttribute","EntityFormSyncService","entityFormSvc","formsStateSvc","setupSync","startWith","formValid$","invalid","itemHeader$","getItemHeader$","combineLatest","formValid","IsEmpty","getRawValue","distinctUntilChanged","previous","getItemValuesChanges","updateItemAttributesValues","FieldMetadataKey","FieldMetadata","component","Reflect","defineMetadata","ChangeAnchorTargetDirective","#target","#element","#observer","elementRef","zone","nativeElement","ngOnInit","runOutsideAngular","#setAnchorTargets","MutationObserver","observe","childList","subtree","disconnect","nodeName","anchor","childAnchors","getElementsByTagName","from","selectors","$event","_r1","ctx_r1","toggleHint","_c1","showExpand","notes","ctx","FieldHelperTextComponent_Conditional_0_Conditional_1_Template","FieldHelperTextComponent_Conditional_0_Conditional_2_Template","FieldHelperTextComponent_Conditional_0_Conditional_3_Template","_c0","hyperlinkDefaultWrapperFix","smallGap","tmp_3_0","showErrors","errorMessage","tmp_4_0","disableError","warningMessage","FieldHelperTextComponent","input","flatIfEmpty","#invalid","ui","componentId","uiValue","getErrors","getWarnings","show","event","classList","contains","parentNode","inputs","decls","vars","consts","template","rf","FieldHelperTextComponent_Conditional_0_Template","NgClass","MatFormFieldModule","TranslateModule","SafeHtmlPipe","styles","BooleanBaseComponent","basics","changedLabel","encapsulation","BooleanDefaultSettingsHelper","FieldSettingsHelperBase","BooleanDefault","fixedSettings","ReverseToggle","_label","#calculateLabel","TitleTrue","TitleFalse","BooleanDefaultComponent","checkedState","importMe","updateValue","setIfChanged","FormsModule","ReactiveFormsModule","MatSlideToggleModule","__decorate","BooleanTristateSettingsHelper","BooleanTristate","TitleIndeterminate","BooleanTristateComponent","fs","bestLabel","#nextValue","reversed","CustomDefaultComponent","CustomJsonEditorSettingsHelper","Rows","JsonSchemaMode","JsonSchemaSource","JsonSchemaUrl","JsonSchemaRaw","JsonCommentsAllowed","StringJsonSettingsHelper","StringJson","ctx_r0","CustomJsonEditorComponent","#fieldState","#rows","focused","focused$","editorHeight","monacoOptions","lineHeight","jsonSchema","jsonComments","minimap","lineNumbers","lineDecorationsWidth","folding","scrollBeyondLastLine","tabSize","fixedOverflowWidgets","filename","codeChanged","code","onFocused","onBlurred","markTouched","CustomJsonEditorComponent_Conditional_4_Template","touchedAndInvalid","MonacoEditorComponent","NgStyle","_forTrack0","$index","$item","MatTimepicker_ng_template_0_For_2_Template","_r3","_selectValue","option_r4","$implicit","MatTimepicker_ng_template_0_Template","_handleAnimationEnd","_animationsDisabled","isOpen","panelId","ariaLabel","_getAriaLabelledby","_timeOptions","_c2","MatTimepickerToggle_ProjectionFallback_1_Template","INTERVAL_PATTERN","MAT_TIMEPICKER_CONFIG","InjectionToken","parseInterval","parsed","amount","parseFloat","unit","isNaN","MAT_TIMEPICKER_SCROLL_STRATEGY","Injector","createRepositionScrollStrategy","MatTimepicker","_dir","Directionality","optional","_viewContainerRef","ViewContainerRef","_injector","_defaultConfig","_dateAdapter","DateAdapter","_dateFormats","MAT_DATE_FORMATS","_scrollStrategyFactory","_isOpen","_activeDescendant","_input","_overlayRef","_portal","_optionsCacheKey","_localeChanges","_onOpenRender","_panelTemplate","viewChild","_options","viewChildren","MatOption","_keyManager","ActiveDescendantKeyManager","withHomeAndEnd","withPageUpDown","withVerticalOrientation","interval","asReadonly","output","opened","closed","activeDescendant","_IdGenerator","disableRipple","booleanAttribute","alias","ariaLabelledby","element","ElementRef","setAttribute","_handleLocaleChanges","_handleInputStateChanges","change","activeItem","focus","_generateOptions","overlayRef","_getOverlayRef","updateSize","width","getOverlayOrigin","offsetWidth","TemplatePortal","hasAttached","attach","destroy","afterNextRender","_syncSelectedState","emit","detach","registerInput","dispose","_getOverlayHost","hostElement","option","setActiveItem","deselect","timepickerValueAssigned","getLabelId","animationName","positionStrategy","createFlexibleConnectedPositionStrategy","withFlexibleDimensions","withPush","withTransformOriginOn","withPopoverLocation","withPositions","originX","originY","overlayX","overlayY","panelClass","createOverlayRef","scrollStrategy","direction","hasBackdrop","disableAnimations","detachments","keydownEvents","_handleKeydown","outsidePointerEvents","_getEventTarget","origin","adapter","timeFormat","display","timeInput","setTime","today","format","generateOptions","formats","compareTime","sameDate","timeOptionLabel","addSeconds","hasSelected","sameTime","select","scrollOptionIntoView","keyCode","TAB","ESCAPE","hasModifierKey","ENTER","preventDefault","previousActive","onKeydown","currentActive","localeChanges","static","viewQuery","outputs","exportAs","provide","MAT_OPTION_PARENT_COMPONENT","useExisting","dependencies","changeDetection","position","_getHostElement","scrollIntoView","block","inline","MatTimepickerInput","_elementRef","_formField","MAT_FORM_FIELD","_onChange","_onTouched","_validatorOnChange","_cleanupClick","_accessorDisabled","_localeSubscription","_timepickerSubscription","_validator","_lastValueValid","_minValid","_maxValid","_lastValidDate","_ariaActiveDescendant","timepicker","_ariaExpanded","_ariaControls","model","_transformDateInput","openOnClick","disabledInput","renderer","Renderer2","_getValidator","_updateFormsState","_registerTimepicker","_hasFocus","_formatValue","listen","_handleClick","writeValue","deserialized","deserialize","getValidDateOrNull","registerOnChange","registerOnTouched","setDisabledState","isDisabled","validate","registerOnValidatorChange","getConnectedOverlayOrigin","overlayHost","_handleInput","currentValue","date","parseTime","hasChanged","_assignUserSelection","_handleBlur","_isValid","DOWN_ARROW","UP_ARROW","prevValueValid","prevMinValid","prevMaxValid","valueValid","stateChanged","selection","propagateToAccessor","toAssign","hours","getHours","minutes","getMinutes","seconds","getSeconds","_getFocusedElementPierceShadowDom","compose","matTimepickerParse","text","matTimepickerMin","actual","matTimepickerMax","hostAttrs","hostVars","hostBindings","NG_VALUE_ACCESSOR","multi","NG_VALIDATORS","MAT_INPUT_VALUE_ACCESSOR","MatTimepickerToggle","_defaultTabIndex","HostAttributeToken","_isDisabled","_defaultAriaLabel","tabIndex","_open","stopPropagation","getAriaLabel","ngContentSelectors","MatIconButton","MatTimepickerModule","imports","CdkScrollableModule","initializeDayjsFn","locale","dayjs","utc","customParseFormat","getDateTimeValueFn","generateTimePickerOptionsFn","dateTimeValue","hour","minute","predefinedOptions","userOption","valueOf","formatDateTimeFn","getLocaleDateFormatFn","localized","localeData","longDateFormat","handleDateTimeInputFn","currentUiValue","setUiValue","useTimePicker","dateFormat","parsedDate","updateFormattedValueFn","updateTimeFn","timeValue","time","updateDateFn","currentDateTime","year","month","resultDateTime","toISOString","DateTimeUtils","initializeDayjs","updateFormattedValue","updateDate","updateTime","handleDateTimeInput","formatDateTime","generateTimePickerOptions","getDateTimeValue","getLocaleDateFormat","MyMatTimepickerInput","_r2","ctx_r2","_r4","timepicker_r5","timePickerOptions","disabledEffect","ngAfterViewInit","InvalidDate","DatetimeDefaultComponent","navigator","dateFmt","timePickerRef","timeData","updated","DatetimeDefaultComponent_Conditional_3_Template","DatetimeDefaultComponent_Conditional_8_Template","datepicker_r6","MatInputModule","MatDayjsModule","TippyDirective","MatDatepickerModule","DatetimeDefaultComponent_1","EmptyDefaultComponent","EmptyMessageComponent","EmptyMessageComponent_Conditional_0_Template","visible","DataSourceHelpers","stripHtml","stringWithHtml","div","innerText","data2PickerItem","getMasks","patchMasks","parseMasks","buildMasks","DataSourceMasksHelper","parentLog","enableLog","#featInfoEnabled","#featInfoWarned","#isDeveloper","#helpers","enableChildren","allowUse","PickerUiMoreInfo","dialogContext","User","IsSystemAdmin","infoEnabled","#masks","streamName","valueMustUseGuid","valueDefaultsToGuid","masks","#getMasks","maybe","maybeTitle","Title","previewValue","hasPlaceholders","sourceStreamName","rules","Rules","fromMasks","#parseMasks","finalLabel","useInfos","valueItem","search","RegExp","appUrl","portalRoot","appRoot","#buildMasks","ItemTooltip","ItemInformation","ItemLink","Label","PreviewValue","DataSourceMoreFieldsHelper","fieldListToRetrieveFromServer","treeConfig","PickerTreeConfiguration","maskSettings","MoreFields","TreeChildIdField","TreeParentIdField","TreeChildParentRefField","TreeParentChildRefField","extractFieldNamesFromTokens","distinct","enableSimpleFields","regex","exec","trimmedMatch","logSpecsDataSourceBase","triggerGetAll","newIconOptions","fileLoadSettings","DataSourceBase","getAll$","BehaviorSubject","guidsToRefresh","noItemsLoadingFalse","noItemsLoadingTrue","fieldsHelper","helpers","constructorEnd","forField","additionalGuids","createMaskHelper","moreSettings","fieldsToRetrieve","logSpecsDataSourceEntityQueryBase","getFromBackend","loadMoreIntoSignal","DataSourceEntityBase","querySvc","#typeOrParams","#typeOrParams$","toObservable","#paramsDebounced$","#fullList","initialValue","#prefetchNew","#modified","prefetch","modified","Map","overrides","entityGuids","guids","#loadMoreIntoCache","setParams","msgForLog","additions","DataSourceAppAssets","_typeName","_guids","purposeForLog","AssetsRootFolder","rootFolder","AssetsFileFilter","fileFilter","AssetsType","typeLower","stream","fieldMask","getFromQuery","DataAdapterAppAssets","reRegExpChar","reHasRegExpChar","lodash_es_escapeRegExp","escapeRegExp","test","findAllIconsInCss","cssSelector","showPrefix","regEx","buildRegEx","fallbackRegex","buildRegExFromPrefixAndSuffix","allRules","getAllCssRules","styleSheets","getCssRules","foundList","duplicateDetector","allRulesWithSelector","rule","selectorText","selector","lastIndex","groups","ValueRaw","iconClass","Rule","Selector","classPrefix","prefix","buildRegExFromPrefix","startedWithDot","cssSelectorPart","valuePart","sheet","cssRules","DataSourceCss","scriptsLoaderService","#iconEntities","CssSourceFile","CssSelectorFilter","#dataMaskHelper","maskHelper","pickerItem","DataAdapterCss","DataSourceEmpty","#label","notSelectable","preSetup","DataAdapterEmpty","DataSourceEntity","inputSpecs","mustUseGuid","entities","DataAdapterEntity","DataSourceQuery","formState","#appId","#streamName","StreamName","sets","queryName","Query","queryUrl","catchError","of","#transformData","streamNames","converted","itemsMaybeReadOnly","#setDisableEdit","queryEntities","AppId","DataAdapterQuery","DataSourceString","DataAdapterString","logSpecsStateAdapter","reorder","sepAndOpts","createEntityTypes","attachCallback","typesForNew","correctStringEmptyValue","StateAdapter","#formConfigSvc","#createTypesRaw","ts","#fieldName","orig","asUi","toUi","pickerAllowsEmpty","uiMapper","#focusOnSearchComponent","focusCallback","#updateValue","operation","newValue","toState","flush","reorderIndexes","moveItemInArray","previousIndex","currentIndex","splice","StateUiMapperBase","StateUiMapperNoop","StateUiMapperNumberArray","stringValue","parsedNumber","StateUiMapperStringArray","PickerSourcesCustom","UiPickerSourceCustomList","UiPickerSourceCustomCsv","PickerConfigs","UiPickerSourceQuery","UiPickerSourceEntity","UiPickerSourceAppAssets","UiPickerSourceCss","UiPickerModeIsTree","PickerDataSetup","setupPickerData","pdWithSetupState","alreadyStarted","setupAlreadyStarted","#getStateAdapter","dataSourceType","#getSourceAdapter","uiMapperType","partsMap","stateAdapter","dsType","forcePickerConfig","dataAdapterType","mapNameToDataAdapter","#throwIfSourceAdapterNotAllowed","sources","StringFontIconPicker","NumberDropdown","BaseTreeControl","dataNodes","expansionModel","SelectionModel","trackBy","getLevel","isExpandable","getChildren","toggle","dataNode","_trackByValue","collapse","isSelected","toggleDescendants","collapseDescendants","expandDescendants","collapseAll","clear","toBeProcessed","getDescendants","FlatTreeControl","results","expandAll","node","CDK_TREE_NODE_OUTLET_NODE","CdkTreeNodeOutlet","viewContainer","_node","CdkTreeNodeOutletContext","level","CdkTreeNodeDef","TemplateRef","when","getTreeControlMissingError","CdkTree","_differs","IterableDiffers","_changeDetectorRef","ChangeDetectorRef","_onDestroy","_dataDiffer","_defaultNodeDef","_dataSubscription","_levels","_parents","_ariaSets","_dataSource","_switchDataSource","treeControl","levelAccessor","childrenAccessor","expansionKey","_nodeOutlet","_nodeDefs","viewChange","MAX_VALUE","_expansionModel","_flattenedNodes","_nodeType","_nodes","_keyManagerNodes","_keyManagerFactory","TREE_KEY_MANAGER","_viewInit","ngAfterContentInit","_initializeKeyManager","ngAfterContentChecked","_updateDefaultNodeDefinition","_subscribeToDataChanges","_checkTreeControlUsage","_initializeDataDiffer","defaultNodeDefs","def","_setNodeTypeIfUnset","newType","_getExpansionModel","dataStream","isDataSource","connect","isObservable","_getRenderData","takeUntil","renderingData","_renderDataChanges","expansionChanges","_emitExpansionChanges","nodeType","renderNodes","flattenedNodes","_computeRenderingData","convertedData","_updateCachedData","renderNodeChanges","_updateKeyManagerItems","nodes","added","_emitExpansionState","removed","keyManagerNodes","_getExpansionKey","skipPredicate","typeAheadDebounceInterval","horizontalOrientation","_index","dataDiffer","parentData","diff","forEachOperation","adjustedPreviousIndex","insertNode","view","move","forEachIdentityChange","record","newData","markForCheck","detectChanges","_getNodeDef","nodeData","_getLevelAccessor","has","createEmbeddedView","CdkTreeNode","mostRecentTreeNode","_getDescendants","children","child","_forEachExpansionKey","bind","_getChildrenAccessor","_getDirectChildren","EMPTY","expanded","_findChildrenByLevel","coerceObservable","levelDelta","startIndex","findIndex","dataNodeLevel","expectedLevel","currentLevel","_registerNode","_unregisterNode","_getLevel","_getSetSize","_getAriaSet","_getPositionInSet","_getNodeParent","_getNodeChildren","_sendKeydownToKeyManager","getValue","Infinity","_getAllChildrenRecursively","allChildren","nextChildren","concatMap","parentKey","_findParentForNode","cachedNodes","parentIndex","_flattenNestedNodesWithExpansion","childNodes","childKey","nestedNodes","_clearPreviousCache","rootNodes","_calculateParents","toToggle","observables","inner","contentQueries","dirIndex","_t","_tree","_tabindex","_type","role","_role","_isExpandable","_inputIsExpandable","_inputIsExpanded","_data","typeaheadLabel","getLabel","textContent","activation","EventEmitter","expandedChange","_destroyed","_dataChanges","_shouldFocus","_parentNodeAriaLevel","isLeafNode","_getAriaExpanded","getParentNodeAriaLevel","nodeElement","parentElement","isNodeElement","numberAttribute","getParent","unfocus","activate","makeFocusable","_focusItem","focusItem","_setActiveItem","cssUnitPattern","CdkTreeNodePadding","_treeNode","_element","_currentPadding","indentUnits","_level","_setLevelInput","indent","_indent","_setIndentInput","_setPadding","_paddingIndent","nodeLevel","forceChange","padding","paddingProp","resetProp","style","units","CdkTreeNodeToggle","recursive","_toggle","CdkTreeModule","MatTreeNode","tabIndexInputBinding","_tabIndexInputBinding","defaultTabIndex","_getTabindexAttribute","isNoopTreeKeyManager","keyManager","_isNoopTreeKeyManager","MatTreeNodeDef","MatTreeNodeDef_BaseFactory","MatTreeNodePadding","MatTreeNodePadding_BaseFactory","MatTreeNodeOutlet","MatTree","MatTree_BaseFactory","MatTreeNodeToggle","MatTreeNodeToggle_BaseFactory","MatTreeModule","BidiModule","MatTreeFlattener","transformFunction","_flattenNode","resultNodes","parentMap","flatNode","childrenNodes","_flattenChildren","childParentMap","flattenNodes","structuredData","expandFlattenedNodes","currentExpand","MatTreeFlatDataSource","DataSource","_treeControl","_treeFlattener","_flattenedData","_expandedData","initialData","collectionViewer","merge","PickerPartBaseComponent","editRoutingService","enableTextEntry","selectedItem","itemCount","expandDialog","openNewEntityDialog","toggleFreeText","removeItem","buttons","PickerItemButtonsComponent","uiFeatures","uif","noRemove","PickerItemButtonsComponent_Conditional_0_Template","PickerItemButtonsComponent_Conditional_1_Template","PickerItemButtonsComponent_Conditional_2_Template","MatButtonModule","MatIconModule","ClickStopPropagationDirective","goToLink","helpLink","PickerIconHelpComponent","PickerIconHelpComponent_Conditional_0_Template","infoBox","PickerIconInfoComponent","PickerIconInfoComponent_Conditional_0_Template","messagesDict","instanceAlreadyExist","instanceNotExist","childrenInstancesNotFoundGrouped","childrenInstancesNotFoundSingleton","singletonInstanceAlreadyExist","NGX_TIPPY_MESSAGES","NGX_TIPPY_CONFIG","DevModeService","isDevMode","prov","token","InstanceChangeReasonEnum","SetInstance","HideWithInteractivity","Disable","SetProps","SetContent","Unmount","ClearDelayTimeouts","Destroy","NgxTippyNamesEnum","TippyName","SingletonName","CompRef","compRef","viewContainerRef","createComponent","changeDetectorRef","getElement","location","setTemplateVisible","tippyContent","Element","setStyle","TplRef","viewRef","tpl","appRef","attachView","Node","ELEMENT_NODE","append","removeChild","NgxViewService","getViewRefInstance","tippyName","tippyContext","isTemplateRef","createTemplate","isComponent","HTMLTemplateElement","isHTMLTemplate","NgxTippyService","rendererFactory","devModeService","ngxViewService","tippyInstances","tippySingletonEntryInstances","tippyInstances$","createRenderer","setInstance","errMessage","getMessage","messageFor","throwError","emitInstancesChange","instance","getInstance","getInstances","size","setSingletonInstance","getSingletonInstance","getSingletonInstances","callNativeTippyMethod","hide","hideWithInteractivity","mouseEvent","disable","enable","setProps","tippyProps","setContent","throwErrorInstanceNotExist","unmount","clearDelayTimeouts","setDefaultProps","tippy","showAll","hideAll","exclude","excludeName","instancesChanges","asObservable","method","arg","errorConstructor","NgxTippyDirective","tippyEl","ngxTippyService","platform","ngxTippyConfig","cachedInstances","isPlatformServer","initTippy","ngOnChanges","handleChanges","destroyTippy","tippyTarget","ngxTippy","tippyElement","tInstance","setTippyInstance","setClassName","tippyInstance","tippyClassName","writeInstancesToStorage","_tippy","className","classNames","addClass","popper","firstElementChild","removeClassName","removeClass","firstChange","handleNameChanges","handleContentChanges","handlePropsChanges","handleClassChanges","handleContextChanges","previousValue","cachedTippyInstances","deleteEntryInStorage","clearInstance","resetLocalInstance","clearCachedInstances","clearViewRef","destroyTippyInstance","PLATFORM_ID","dir","standalone","NgxTippyModule","mod","inj","CommonModule","classWithoutDot","tippyTemplate_r2","tippyTemplate_r3","imageResize","PickerItemPreviewComponent_Conditional_1_Case_0_Template","PickerItemPreviewComponent_Conditional_1_Case_1_Template","PickerItemPreviewComponent_Conditional_1_Case_2_Template","PickerItemPreviewComponent_Conditional_1_Case_3_Template","tmp_1_0","PreviewType","PickerItemPreviewComponent","debugMessage","originalImage","height","optimizedImage","PickerItemPreviewComponent_Conditional_1_Template","MatIcon","PickerPreviewLabelComponent","actionsFirst","featureWarnings","conditions","debugName","PickerPreviewLabelComponent_For_7_Template","PickerPreviewLabelComponent_Conditional_8_Template","PickerPreviewLabelComponent_Conditional_11_Template","FeatureIconWithDialogComponent","RelationshipParentChild","PickerTreeDataHelper","#pickerTreeConfiguration","#treeItems","expandable","hasChild","build","updateConfig","pickerConfig","addTreeItems","treeItems","updateSelectedData","selectedData","preConvertAllItems","convertedItems","#preConvertItemToTreeItem","#getChildren","allItems","isParentChild","TreeRelationship","cpRef","pcRef","pId","pStreamName","TreeBranchesStream","itemInCorrectStream","currentId","treeFlattener","cId","y","itemParentValue","disableOption","enableReselect","TreeAllowSelectRoot","TreeAllowSelectBranch","TreeAllowSelectLeaf","PickerTreeDataService","treeHelper","PickerDisplayMode","relationshipIsParentChild","runInInjectionContext","filteredData","z","item_r2","isOptionDisabled","PickerSearchComponent_Conditional_14_For_1_Template","filteredItems","item_r4","item_r5","PickerSearchComponent_Conditional_15_mat_tree_node_1_Template","PickerSearchComponent_Conditional_15_mat_tree_node_2_Template","_r6","insertNull","optionSelected","focusOnSearchComponent","onClosed","onOpened","PickerSearchComponent","#logItemChecks","#treeDataService","autocomplete","showSelectedItem","showItemEditButtons","#reFilter","filterInDom","oItem","enableAddExisting","EnableAddExisting","EnableReselect","showAsTree","displaySelected","displayFn","returnValue","ae","markAsTouched","filterSelectionList","isTreeDisplayMode","searchElement","blur","getPlaceholder","getSelectedItem","PickerSearchComponent_Conditional_9_Template","PickerSearchComponent_Conditional_14_Template","PickerSearchComponent_Conditional_15_Template","PickerSearchComponent_Conditional_16_Template","_c3","auto_r7","_c4","labelWithRequired","MatAutocompleteModule","MatOptionModule","PickerInlineBaseComponent","allowMulti","toggled","PickerInlineHeaderComponent","$index_r4","PickerCheckboxesComponent","requireFeature","PickerUiCheckbox","PickerCheckboxesComponent_For_5_Template","MatRippleModule","MatCheckbox","MatDivider","vertical","_vertical","coerceBooleanProperty","inset","_inset","MatDividerModule","_c5","LIST_OPTION","MatListItemTitle","MatListItemLine","MatListItemMeta","_MatListItemGraphicBase","_listOption","_isAlignedAtStart","_getTogglePosition","MatListItemAvatar","MatListItemAvatar_BaseFactory","MatListItemIcon","MatListItemIcon_BaseFactory","MAT_LIST_CONFIG","MatListBase","_isNonInteractive","_disableRipple","_disabled","_defaultOptions","MatListItemBase","_ngZone","NgZone","_listBase","_platform","Platform","_hostElement","_isButtonElement","_noopAnimations","_avatars","_icons","lines","_explicitLines","coerceNumberProperty","_updateItemLines","_subscriptions","_rippleRenderer","_hasUnscopedTextContent","rippleConfig","rippleDisabled","_CdkPrivateStyleLoader","_StructuralStylesLoader","globalRippleOptions","MAT_RIPPLE_GLOBAL_OPTIONS","_initInteractiveListItem","hasAttribute","_monitorProjectedLinesAndTitle","_removeTriggerEvents","_hasIconOrAvatar","RippleRenderer","setupTriggerEvents","_lines","_titles","recheckUnscopedContent","_unscopedContent","_checkDomForUnscopedTextContent","numberOfLines","_inferLinesFromContent","unscopedContentEl","treatAsTitle","numOfLines","COMMENT_NODE","MatActionList","MatActionList_BaseFactory","MatList","MatList_BaseFactory","MatListItem","_meta","_itemText","activated","_activated","_getAriaCurrent","_hasBothLeadingAndTrailing","MatListItem_BaseFactory","CdkObserveContent","MatNavList","MatNavList_BaseFactory","MatListModule","ObserversModule","MatPseudoCheckboxModule","item_r1","PickerPillsComponent_Conditional_6_For_2_Template","PickerPillsComponent","PickerPillsComponent_Conditional_6_Template","PickerPillsComponent_Conditional_7_Template","PickerPillsComponent_Conditional_8_Template","PickerRadioComponent","PickerUiRadio","PickerRadioComponent_For_5_Template","MatRadioButton","isTextMode","csDisabled","PickerTextToggleComponent_Conditional_0_Conditional_1_Template","PickerTextToggleComponent_Conditional_0_Conditional_2_Template","showBoth","PickerTextToggleComponent","allowText","PickerTextToggleComponent_Conditional_0_Template","PickerTextComponent","useMultiLine","PickerTextComponent_Conditional_2_Template","PickerTextComponent_Conditional_3_Template","PickerPreviewComponent_Case_2_ng_container_1_Template","textToggle_r1","PickerPreviewComponent_Case_3_ng_container_1_Template","PickerPreviewComponent_Case_3_ng_container_2_Template","addNew_r2","PickerPreviewComponent_Case_4_ng_container_1_Template","PickerPreviewComponent_Case_4_ng_container_2_Template","PickerPreviewComponent_Case_5_ng_container_1_Template","PickerPreviewComponent_Case_6_ng_container_1_Template","ctx_r3","PickerPreviewComponent_Conditional_7_ng_container_1_Template","PickerPreviewComponent_Conditional_7_Conditional_2_Template","showBoth_r5","ct_r7","PickerPreviewComponent_ng_template_12_Conditional_0_Conditional_0_For_6_Template","entityTypesMenu_r8","_r9","PickerPreviewComponent_ng_template_12_Conditional_0_Conditional_0_Template","PickerPreviewComponent_ng_template_12_Conditional_0_Conditional_1_Template","PickerPreviewComponent_ng_template_12_Conditional_0_Template","PickerPreviewComponent","#pickerMode","mode","skipHelpText","PickerPreviewComponent_Case_2_Template","PickerPreviewComponent_Case_3_Template","PickerPreviewComponent_Case_4_Template","PickerPreviewComponent_Case_5_Template","PickerPreviewComponent_Case_6_Template","PickerPreviewComponent_Conditional_7_Template","PickerPreviewComponent_Conditional_8_Template","PickerPreviewComponent_Conditional_9_Template","PickerPreviewComponent_ng_template_10_Template","PickerPreviewComponent_ng_template_12_Template","tmp_2_0","NgTemplateOutlet","MatMenuModule","PickerListComponent_Conditional_1_For_2_Conditional_2_Template","item_r3","$index_8_r4","drop","PickerListComponent_Conditional_1_For_2_Template","PickerListComponent","PickerListComponent_Conditional_0_Template","PickerListComponent_Conditional_1_Template","CdkDropList","CdkDrag","ct_r2","PickerDialogComponent_Conditional_4_Conditional_1_For_6_Template","entityTypesMenu_r4","_r5","PickerDialogComponent_Conditional_4_Conditional_1_Template","PickerDialogComponent_Conditional_4_Conditional_2_Template","PickerDialogComponent","showAddNewEntityButtonInDialog","PickerDialogComponent_Conditional_1_Template","PickerDialogComponent_Conditional_2_Template","PickerDialogComponent_Conditional_4_Template","PickerComponent","BaseComponent","refreshOnChildClosed","#injector","#pickerData","showPreview","#refreshOnChildClosed","PickerComponent_Conditional_0_Template","PickerComponent_Conditional_1_Template","calculateDropdownOptions","addSelectedIfMissing","DataSourceDropDownOptions","parseOptions","dropdownValuesFormat","dropdownValues","classicOptions","maybeWantedEmptyVal","shift","val","chars","char","escaped","separatorIndex","currentString","DataSourceParserCsv","csv","Papa","header","skipEmptyLines","transformHeader","dynamicTyping","filtered","d","meta","preEmpty","h","empty","getDataSourceAndSetupFieldSettings","PickerLogicShared","setDefaultSettings","noAutoFocus","maybeOverrideEditRestrictions","fsUntyped","removeEditRestrictions","EntityType","preUpdate","fsDefaults","fsRaw","typeConfig","#getDataSourceAndSetupFieldSettings","fsBasic","dataSources","DataSources","isKnownType","sourceIsQuery","sourceIsEntity","sourceIsCss","sourceIsAppAssets","isCustomSource","specsQuery","UrlParameters","QueryParameters","ContentTypeNames","PickerSourceAppAssets","valuesRaw","Csv","PickerSourceCsv","PickerDisplayConfiguration","#getTreeConfigOnce","pickerDisplayConfigurations","ConfigModel","TreeLeavesStream","TreeShowRoot","TreeDepthMax","EntityDefaultSettingsHelper","CreatePrefill","EntityDefaultComponent","EntityDefaultComponent_Conditional_0_Template","EntityDefaultComponent_Conditional_1_Template","EntityContentBlocksSettingsHelper","EntityContentBlockComponent","EntityContentBlockComponent_Conditional_0_Template","EntityContentBlockComponent_Conditional_1_Template","EntityPickerSettingsHelper","EntityPickerComponent","EntityPickerComponent_Conditional_0_Template","EntityPickerComponent_Conditional_1_Template","EntityQuerySettingsHelper","updateSpecs","EntityQueryComponent","EntityQueryComponent_Conditional_0_Template","EntityQueryComponent_Conditional_1_Template","AdamService","getAllPromise","fetchPromise","subfolder","usePortalRoot","addFolder","newFolderName","newFolder","SanitizeHelper","sanitizeName","renamePromise","newName","isFolder","deleteItemPromise","getLinkInfoPromise","appid","ConnectorInstance","fieldConfigSignal","field$","#field$","_experimental","_connectorHost","value$","ConnectorDataInstance","dialog","ConnectorDialogInstance","loadScript","testOrScripts","srcOrCallback","loadScripts","clientValueChangeListeners","onValueChange","getUrlOfId","updateControl","openFeatureDisabledWarning","ConnectorHelper","#translateService","#contentTypeService","#inputTypeService","#featuresService","#dialog","#zone","#adamService","InputTypeService","MatDialog","#value$","#group","#customEl","#viewContainerRef","#changeDetectorRef","customElName","customElContainerRef","connector","#buildConnector","connectorHost","#getCallbacks","experimental","#buildExperimentalProps","toFieldConfig","run","#updateControl","allInputTypeNames","getAttributeInputTypes","lEx","translateService","dropzone","adam","updateField","controls","isFeatureEnabled","isEnabled","setFocused","openPagePicker","PagePicker","featureDisabledWarning","featureNameId","#openFeatureDisabledWarning","#getUrlOfId","getSettings","getFieldMask","mask","showSnackBar","translated","err","then","UiControl","PasteImageFromClipboard","onAction","openFeatureDialog","ConnectorComponent","connectorCreator","componentTagDialogName","CustomGpsSettingsHelper","CustomGps","StringWysiwygSettingsHelper","StringWysiwyg","_allowDialog","Dialog","ButtonSource","ButtonAdvanced","ContentCss","InlineInitialHeight","_advanced","findAndMergeAdvanced","WysiwygConfiguration","Mode","Json","processValueOnLoad","doc","DOMParser","parseFromString","body","querySelectorAll","img","dataCmsid","fileName","pop","adamItem","ExternalWebComponentComponent","loadAssets","assets","UiAssets","default","assetsLoaded","ExternalWebComponentComponent_Conditional_0_Template","ExternalWebComponentComponent_Conditional_1_Template","MatProgressSpinnerModule","handleImage","PasteClipboardImageDirective","#eventListeners","#pasteImageEnabled","matDialog","elementType","pasteImageEnabled","pastableTextarea","pastableNonInputable","#handleImage","listener","image","#getFile","detail","uploadFile","newFile","FormData","imageFileName","HyperlinkDefaultBaseComponent","formsStateService","preview","thumbnailUrl","previewUrl","floatingText","isImage","icon","adamService","adamItemId","status","fetchLink","page","openImageConfiguration","_imageConfigurationContentType","_imageConfigurationId","newMetadata","eavConstants","cmsObject","setPreview","isFileOrPage","isResolved","getPreview","lastIndexOf","ThumbnailUrl","buildUrl","PreviewUrl","FileTypeHelpers","getIconClass","query","cleanValue","HyperlinkDefaultSettingsHelper","HyperlinkDefault","Buttons","FileFilter","Paths","ServerResourceMapping","EnableImageConfiguration","toggleAdam","menu_r5","_r7","_r8","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Conditional_0_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Conditional_1_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Conditional_2_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Conditional_3_Template","showAdam","showPagePicker","showImageManager","showFileManager","preV_r10","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_19_Conditional_1_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_19_Conditional_2_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_1_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_5_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_6_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_18_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_19_Template","buttonAdam","tmp_5_0","tmp_6_0","enableImageConfiguration","tmp_8_0","buttonPage","buttonMore","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Template","HyperlinkDefaultComponent","adamSettings","rootSubfolder","autoLoad","setConfig","onItemClick","setValue","onItemUpload","showImagesOnly","HyperlinkDefaultComponent_Conditional_0_Template","tmp_0_0","MatCardModule","HyperlinkLibrarySettingsHelper","HyperlinkLibraryComponent","updateValueAndValidity","attachAdamConfig","adamConfig","allowAssetsInRoot","AllowAssetsInRoot","enableSelect","folderDepth","FolderDepth","metadataContentTypes","MetadataContentTypes","StringDropdownSettingsHelper","DropdownValuesFormat","DropdownValues","NumberDefaultSettingsHelper","NumberDefault","NumberDefaultComponent","NumberDropdownSettingsHelper","NumberDropdownComponent","NumberDropdownComponent_Conditional_0_Template","NumberDropdownComponent_Conditional_1_Template","NumberPickerSettingsHelper","NumberPickerComponent","NumberPickerComponent_Conditional_0_Template","NumberPickerComponent_Conditional_1_Template","StringDefaultSettingsHelper","StringDefault","InputFontFamily","RowCount","inputFontFamily","rowCount","textWrap","typeIfNotWhatsExpected","StringDefaultComponent","rowCountRaw","abs","isMultiline","rc","isNotExpectedType","StringDefaultComponent_Conditional_1_Template","StringDefaultComponent_Conditional_2_Template","StringDefaultComponent_Conditional_6_Template","StringDropdownQuerySettingsHelper","StringDropdownQueryComponent","StringDropdownQueryComponent_Conditional_0_Template","StringDropdownQueryComponent_Conditional_1_Template","StringDropdownComponent","StringDropdownComponent_Conditional_0_Template","StringDropdownComponent_Conditional_1_Template","StringFontIconPickerSettingsHelper","Files","CssPrefix","PreviewCss","ShowPrefix","StringFontIconPickerComponent","StringFontIconPickerComponent_Conditional_0_Template","StringFontIconPickerComponent_Conditional_1_Template","StringFontIconPickerComponent_1","StringPickerSettingsHelper","StringPickerComponent","StringPickerComponent_Conditional_0_Template","StringPickerComponent_Conditional_1_Template","templateTypes","Token","ext","purpose","file_r1","StringTemplatePickerComponent","#typeMask","#locationMask","#sourceService","#activeSpec","#templates","#global","#resetIfNotFound","FileType","SourceService","#prevLocation","#onLocationChange","#setFileConfig","#setTemplateOptions","Shared","Path","nameMask","global","CreateFileDialogComponent","autoFocus","afterClosed","templateKey","res","StringTemplatePickerComponent_For_7_Template","MatSelectModule","StringTemplatePickerComponent_1","StringUrlPathSettingsHelper","StringUrlPath","AutoGenerateMask","AllowSlashes","StringUrlPathComponent","#maskFromSettings","#lastAutoCopy","#fieldMask","#maskedValueCleaned","initPreClean","stripNonUrlCharacters","clean","#publishFieldMaskResult","cleanedNewValue","lastAutoCopy","allowSlashes","trimEnd","StringUrlPathComponent_1","AdamConfigInstance","allowEdit","maxDepthReached","completeConfig","fieldConfig","oldConfig","startDisabled","newConfig","folders","openUploadClick","AdamBrowserComponent_Conditional_1_Conditional_1_Conditional_7_Template","AdamBrowserComponent_Conditional_1_Conditional_1_Conditional_8_Template","openFeatureInfoDialog","isPasteImageFromClipboardEnabled","pasteDiv_r3","goUp","item_r7","del","rename","editItemMetadata","_metadataContentType","_metadataId","goIntoFolder","AdamBrowserComponent_Conditional_1_For_5_Conditional_0_Conditional_6_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_0_Conditional_10_Template","_icon","_r11","_r12","_r13","_r10","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_1_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_2_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_4_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_14_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_15_Template","_displaySize","AdamBrowserComponent_Conditional_1_For_5_Conditional_0_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Template","AdamBrowserComponent_Conditional_1_Conditional_1_Template","AdamBrowserComponent_Conditional_1_Conditional_2_Template","AdamBrowserComponent_Conditional_1_Conditional_3_Template","AdamBrowserComponent_Conditional_1_For_5_Template","allowAddButtons","processFetchedItems","AdamBrowserComponent","dnnContext","openUpload","#ui","#firstFetch","cnf","#url","$2sxc","doOnDialogClosed","setBrowser","folderName","prompt","metadataId","#getImageConfigurationContentType","imageDecorator","#getMetadataContentType","found","firstFetch","clonedItems","#processFetchedItems","extensionsFilter","getExtensionsFilter","extension","AllowEdit","_isMaterialIcon","Size","toFixed","fixDropzone","oldDzConfig","getConfig","newDzConfig","dzUrlParams","getUrlParams","newUrl","replaceUrlParam","uploadDisabled","AdamBrowserComponent_Conditional_1_Template","MatBadgeModule","animation","trigger","overflow","transition","animate","AdamHintComponent","hideAdamSponsor","NoSponsoredByToSic","AdamHintComponent_Conditional_11_Template","AdamWrapperComponent","adamDisabled","fullscreenAdam","invisibleClickableRef","click","DROPZONE_CONFIG","DropzoneEvents","DropzoneConfig","timeout","autoReset","errorReset","cancelReset","headers","accept","resize","renameFile","transformFile","chunksUploaded","withCredentials","previewsContainer","hiddenInputContainer","clickable","paramName","capture","maxFiles","maxFilesize","filesizeBase","acceptedFiles","forceFallback","addRemoveLinks","uploadMultiple","parallelUploads","resizeWidth","resizeHeight","resizeMethod","resizeQuality","resizeMimeType","thumbnailWidth","thumbnailHeight","thumbnailMethod","previewTemplate","autoQueue","autoProcessQueue","ignoreHiddenFiles","maxThumbnailFilesize","createImageThumbnails","chunking","chunkSize","retryChunks","forceChunking","retryChunksLimit","parallelChunkUploads","dictFileSizeUnits","dictDefaultMessage","dictFallbackMessage","dictFileTooBig","dictResponseError","dictInvalidFileType","dictRemoveFile","dictCancelUpload","dictUploadCanceled","dictFallbackText","dictMaxFilesExceeded","dictRemoveFileConfirmation","dictCancelUploadConfirmation","assign","HTMLElement","DropzoneDirective","differs","platformId","defaults","configDiff","DZ_INIT","DZ_ERROR","DZ_SUCCESS","DZ_SENDING","DZ_CANCELED","DZ_COMPLETE","DZ_PROCESSING","DZ_DROP","DZ_DRAGSTART","DZ_DRAGEND","DZ_DRAGENTER","DZ_DRAGOVER","DZ_DRAGLEAVE","DZ_THUMBNAIL","DZ_ADDEDFILE","DZ_ADDEDFILES","DZ_REMOVEDFILE","DZ_UPLOADPROGRESS","DZ_MAXFILESREACHED","DZ_MAXFILESEXCEEDED","DZ_ERRORMULTIPLE","DZ_SUCCESSMULTIPLE","DZ_SENDINGMULTIPLE","DZ_CANCELEDMULTIPLE","DZ_COMPLETEMULTIPLE","DZ_PROCESSINGMULTIPLE","DZ_RESET","DZ_QUEUECOMPLETE","DZ_TOTALUPLOADPROGRESS","Dropzone","autoDiscover","isPlatformBrowser","observers","reset","emitter","toUpperCase","ngDoCheck","cancel","removeAllFiles","DropzoneModule","DropzoneConfigInstance","WysiwygConstants","classToDetectWysiwyg","DropzoneWysiwyg","isStringWysiwyg","imageTypes","detectWysiwygOnDrop","isParentWysiwyg","toElement","removeFilesHandledByWysiwyg","removeFile","DropzoneWrapperComponent","#wysiwygHelper","dropzoneConfig","dropzoneDisabled","extendFieldConfigWithDropZone","#setConfig","#uploadFile","onDrop","onAddedFile","dropzoneRef","onUploadError","onUploadSuccess","refresh","sxc","webApi","uploadLimit","upload","chunked","defaultOptions","processFile","DropzoneDraggingHelper","eventListeners","htmlEl","dragoverListener","clearTimeouts","timeoutsArray","clearTimeout","windowBodyTimeouts","draggingClass","dropListener","passive","ContentExpandAnimation","maxHeight","bottomPixels","innerWidth","keyframes","closeDialog","saveAll","_c6","saveDisabled","DialogPopupComponent_Conditional_18_ng_template_0_Template","DialogPopupComponent","#dropzoneDraggingHelper","#entityFormStateService","applyEmptyClass","enableSave","#hideAdamSponsor","adamSponsorI18nKey","backdropRef","dialogRef","calculateBottomPixels","DialogPopupComponent_ng_template_17_Template","DialogPopupComponent_Conditional_18_Template","ExpandableWrapperComponent","previewHeight","minHeight","rows","maxHeightInPx","vh","percentage","documentElement","clientHeight","innerHeight","componentTagName","previewContainerRef","dropzoneDraggingHelper","touched","feature_r1","FeatureWarningWrapperComponent_Conditional_3_For_3_Template","FeatureWarningWrapperComponent","req","FeatureWarningWrapperComponent_Conditional_3_Template","EmptyDefaultSettingsHelper","EmptyDefault","Collapsed","CollapsibleWrapperComponent","#fieldsSettingsSvc","collapsed","toggleCollapse","CollapsibleWrapperComponent_Conditional_10_Template","HiddenWrapperComponent","preV_r3","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_8_Conditional_4_Template","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_8_Conditional_8_Template","tmp_7_0","_c7","tmp_10_0","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_3_Template","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_8_Template","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_11_Template","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_14_Template","HyperlinkDefaultExpandableWrapperComponent","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Conditional_1_Conditional_1_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Conditional_1_Conditional_2_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Conditional_1_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Conditional_2_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_0_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Template","HyperlinkLibraryExpandableWrapperComponent","itemsNumber","trackByFn","HyperlinkLibraryExpandableWrapperComponent_For_10_Template","AutoTranslateDisabledWarningDialog","dialogData","MAT_DIALOG_DATA","AutoTranslateDisabledWarningDialog_Conditional_5_Template","AutoTranslateDisabledWarningDialog_Conditional_6_Template","isAutoTranslateAll","I18nKeys","NoTranslate","FromPrimary","FromOther","LinkReadOnly","LinkShared","getTemplateLanguages","linkType","TranslationLinks","LinkReadWrite","findI18nKey","translationLink","Translate","DontTranslate","LinkCopyFrom","TranslateHelperComponent","#languageService","translationStateSignal","translationInfo","noLanguageRequired","showLanguageSelection","i18nRoot","submitDisabled","SnackBarWarningDemoComponent","translatableFields","language_r2","noTranslatableFieldsThatHaveContent","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_1_Conditional_1_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_1_Conditional_2_Template","noTranslatableFields","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_2_Conditional_1_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_2_Conditional_2_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_1_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_2_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_1_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Template","setLanguage","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Template","isTranslateWithGoogleFeatureEnabled","isTranslateMany","AutoTranslateMenuDialogComponent","fieldsTranslateService","EditUiTranslateWithGoogle","languagesSig","getTemplateLanguagesWithContent","countTranslatableFields","countTranslatableFieldsWithContent","langDefToUse","countEditable","countEditableWithContents","isCtrlS","openFromComponent","newTranslationState","AutoTranslateMenuDialogComponent_For_12_Template","FeatureInfoBoxComponent","setLinkType","language_r4","TranslateMenuDialogComponent_Conditional_39_For_10_Template","TranslateMenuDialogComponent","isPrimaryLang","newState","oldState","applyToField","TranslateMenuDialogComponent_Conditional_11_Template","TranslateMenuDialogComponent_Conditional_39_Template","dontTranslate","openAutoTranslateMenuDialog","TranslateMenuComponent_Conditional_0_ng_template_11_Conditional_7_Template","openTranslateMenuDialog","TranslateMenuComponent_Conditional_0_ng_template_11_Template","translationStateClass","infoLabel","infoMessage","disableTranslateButtonSignal","menu_r4","hideTranslateButton","TranslateMenuComponent","fieldsTranslate","TranslateMenuHelpers","getTranslationStateClass","#openDialog","TranslateMenuComponent_Conditional_0_Template","FeatureIconIndicatorComponent","LocalizationWrapperComponent","userLanguageSvc","translatePrimaryLanguage","hasMultipleLanguages","translateMenu","toggleTranslateButtonVisibility","PickerExpandableWrapperComponent","InputComponents","kt_AdamWrapper","kt_CollapsibleWrapper","kt_DropzoneWrapper","kt_PickerExpandableWrapper","kt_ExpandableWrapper","kt_HiddenWrapper","kt_FeatureWarningWrapper","kt_HyperlinkDefaultExpandableWrapper","kt_HyperlinkLibraryExpandableWrapper","kt_LocalizationWrapper","CustomDefault","DateTimeDefault","EmptyMessage","ExternalWebComponent","StringTemplatePicker","AdamConnector","#browser","#items","#count","browser","BasicControlSettings","fromSettings","getInjectors","FieldStateInjectorFactory","#envInjector","#entityFormStateSvc","#featuresSvc","EnvironmentInjector","controlStatusChangeSignal","#buildUiSignal","debouncedValue$","mapUntilObjChanged","injectors","#createInjectors","lDetailed","fnCond","settings$","uiStateChange$","uiStatus$","emptyControl","providers","useValue","environmentInjector","createEnvironmentInjector","createWrapper","readComponentType","EditControlsBuilderDirective","#index","#renderer","#firstInputFocused","#fieldInjectorFac","#myContainerRef","formConfigService","el","#fieldConfigSets","#onInitReady","onInitReady","#createControls","currentContainer","#createGroup","isGroupEnd","#createComponent","containerRef","wrapperInfo","DynamicControlInfo","#createWrappers","contentsRef","componentType","#readComponentType","componentMd","getMetadata","componentRef","#generateAndAttachField","pickerPreviewContainerRef","wrapperRef","previewComponent","previewType","#setAutoFocus","container","outerWrapper","wrapperNames","#createWrapper","wrapperName","fieldComponent","EditForceReloadService","#dialogRef","MatDialogRef","#watcher","refreshEdit","navigateUrl","unlockAll","lockAll","EntityTranslateMenuComponent_Conditional_0_ng_template_10_Conditional_0_Template","EntityTranslateMenuComponent_Conditional_0_ng_template_10_Conditional_5_Template","openTranslateMenuDialogMany","EntityTranslateMenuComponent_Conditional_0_ng_template_10_Template","EntityTranslateMenuComponent","fieldTranslateSvc","fieldSettingsSvc","#autoTranslatableFields","setTranslatePrimary","autoTransFields","translationStateAny","EntityTranslateMenuComponent_Conditional_0_Template","UpperCasePipe","noteProps","note","toggleNote","editNote","triggerClass","itemNotSaved","iconName","noteTouched","deleteNote","noteClass","noteHtml","toggleSlotIsEmpty","ctSettings","itemForTooltip","openHistory","editInstructions","fetchNote","noteFormData","EntityFormComponent","#formsStateSvc","#versioningReloader","#editUiShowNotes","#editUiShowMetadataFor","#retriggerNoteProps","#formDataSvc","#entitySvc","editRoutingSvc","EditUiShowNotes","EditUiShowMetadataFor","Features","ctFeatures","buildContentTypeFeatures","contentTypeFeatures","contentTypeFeature","nameAndValue","itemTitle","slotCanBeEmpty","_slotCanBeEmpty","_slotIsEmpty","EditInstructions","showNotes","showMdFor","getItemForTooltip","itemFor","Target","TargetType","getItemFor","getNoteProps","Note","noteType","NoteType","getItemNote","ngAfterViewChecked","noteRef","_containerInstance","#fetchNote","oldHeader","getItemHeader","newHeader","updateItemHeader","navRelative","getState","MatDialogState","OPEN","openNote","triggerPosition","noteTriggerRef","getBoundingClientRect","noteTemplateRef","disableClose","restoreFocus","closeOnNavigation","top","bottom","left","editItems","EavItem","updateItemMetadata","EntityFormComponent_Conditional_8_Template","EntityFormComponent_ng_template_9_Template","EntityFormComponent_Conditional_11_Template","EntityFormComponent_Conditional_12_Template","EntityFormComponent_Conditional_13_Template","EntityFormComponent_Conditional_18_Template","CdkDragHandle","MousedownStopPropagationDirective","FormFieldsBuilderService","adamCacheSvc","formBuilder","entityFormConfigSvc","createFields","allFields","fieldsToCreate","hasControl","fieldsForNgForm","valSpecs","newControl","addControl","keepFieldsAndStateInSync","FormFieldsSyncService","fieldsToProcess","fieldsOnForm","oldValues","newValues","patchValue","getFieldsToProcess","fieldsToProcess$","EntityFormBuilderComponent","#formStateSvc","#formulaDesignerService","#fieldsTranslateSvc","#formFieldsBuilderService","#fieldsSyncSvc","#formSyncSvc","FormulaDesignerService","itemSettingsServices","fields$","#getFieldsToProcess$","hasOwnProperty","commonSpecs","unlicensedFeatures","FeaturesUsedButUnlicensedComponent","#featureDetails","FeatureDetailService","getFeatureDetails","FeaturesUsedButUnlicensedComponent_For_17_Template","FeatureDetailsDialogComponent","PublishStatusDialogComponent","EditDialogHeaderComponent_Conditional_5_Defer_0_Template","EditDialogHeaderComponent_Conditional_5_Defer_1_DepsFn","openUnlicensedDialog","EditDialogHeaderComponent","hasLanguages","showLicenseWarning","hasUnlicensedFeatures","openPublishStatusDialog","openFeaturesUsedButUnlicensedDialog","EditDialogHeaderComponent_Conditional_5_Template","EditDialogHeaderComponent_Conditional_6_Template","EditDialogHeaderComponent_Conditional_7_Template","EditDialogHeaderComponent_Conditional_16_Template","EavValuesDto","eavToDto","eavValues","dtoValue","dimensions","dimension","dimCode","EavAttributesDto","EavEntityDto","metadataDto","eavToDtoMany","Owner","Version","For","EavEntityBundleDto","bundleToDto","error_r1","SnackBarSaveErrorsComponent","snackBarData","MAT_SNACK_BAR_DATA","SnackBarSaveErrorsComponent_For_6_Template","fieldErrors","EditDialogSaveService","entityFormStateService","editDialog","#skipSaveWhenFormIsInvalid","eavItem","formBuilderRefs","saveMode","#saveThroughJs","#saveDefault","wrappedData","#getValidEavItems","eavToObj","updateItemId","formErrors","formBuilderRef","ValidationMsgHelper","validateForm","formError","mapFn","hasAttributes","saveIfEmpty","classPrevious","animationNames","FormSlideDirective","language$","pairwise","previousLang","prevIndex","slide","an","delay","SnackBarUnsavedChangesComponent","snackRef","saveChanges","dismissWithAction","MatDialogActions","__webpack_require__","EditDialogFooterComponent","$index_18_r2","EditDialogMainComponent_Conditional_7_For_2_Template","canSave","saveSvc","EditDialogMainComponent_Conditional_8_Conditional_2_ng_template_0_Template","EditDialogMainComponent_Conditional_8_ng_template_1_Template","EditDialogMainComponent_Conditional_8_Conditional_2_Template","footerShow","EditDialogMainComponent_Conditional_9_Defer_0_Template","EditDialogMainComponent_Conditional_9_Defer_1_DepsFn","EditDialogMainComponent","#prefManager","#loadIconsService","formulaDesignerService","UserPreferences","footerPreferences","footerSize","viewInitiated","getManySignal","formsValid","hideHeader","getHideHeaderSignal","#debugWasModified","pinned","footerShowOnceOrMore","computedWithPrev","delayForm","pref","#watchKeyboardShortcuts","#startSubscriptions","clearCache","forceClose","saveResult","#snackBarYouHaveUnsavedChanges","backdropClick","isEscape","altKey","isCtrlEnter","snackBarRef","containerInstance","snackBarConfig","EditDialogMainComponent_Conditional_7_Template","EditDialogMainComponent_Conditional_8_Template","EditDialogMainComponent_Conditional_9_Template","CdkScrollable","ToggleDebugDirective","SaveCloseButtonComponent","i16","EditEntryComponent","temp","editInitializerService","LoggingService","EditEntryComponent_Conditional_1_Template","RouterOutlet","root","globalThis","self","sloppyModeThis","functionThis","Function","indirectEvalThis","eval","exporter","makeExporter","defineProperty","configurable","writable","hasOwn","prototype","supportsSymbol","Symbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","call","functionPrototype","getPrototypeOf","_Map","CreateMapPolyfill","cacheSentinel","arraySentinel","MapIterator","_keys","_values","_selector","done","throw","return","_cacheKey","_cacheIndex","enumerable","_find","SameValueZero","getKey","getEntry","insert","_Set","Set","CreateSetPolyfill","_map","_WeakMap","WeakMap","CreateWeakMapPolyfill","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","GenRandomBytes","Uint8Array","array","crypto","getRandomValues","msCrypto","offset","byte","registrySymbol","for","metadataRegistry","GetOrCreateMetadataRegistry","IsUndefined","IsObject","isExtensible","CreateMetadataRegistry","CreateFallbackProvider","reflect","hasOwnMetadata","getOwnMetadata","getOwnMetadataKeys","deleteMetadata","metadataOwner","isProviderFor","O","P","metadataPropertySet","OrdinaryDefineOwnMetadata","OrdinaryHasOwnMetadata","OrdinaryGetOwnMetadata","OrdinaryOwnMetadataKeys","OrdinaryDeleteMetadata","rest","targetProviderMap","registry","registerProvider","getProvider","setProvider","provider","getProviderNoCache","GetIterator","IteratorStep","IteratorValue","IteratorClose","providerMap","hasProvider","existingProvider","metadataProvider","CreateMetadataProvider","targetMetadata","MetadataKey","MetadataValue","GetOrCreateMetadataMap","metadataMap","ToBoolean","k","nextValue","Create","createdTargetMetadata","OrdinaryHasMetadata","OrdinaryGetPrototypeOf","IsNull","GetMetadataProvider","OrdinaryGetMetadata","OrdinaryMetadataKeys","ownKeys","parentKeys","_i","ownKeys_1","parentKeys_1","ToPrimitive","PreferredType","hint","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","toString_2","argument","ToPropertyKey","IsSymbol","ToString","IsArray","IsConstructor","V","func","obj","iterResult","proto","prototypeProto","registeredProvider","decorate","decorators","propertyKey","DecorateConstructor","decorated","decorator","DecorateProperty","descriptor","metadataKey","metadataValue","IsPropertyKey","hasMetadata","getMetadataKeys","#getSpecsInternal","inputTypeMetadata","allValues","oneValue","valueMapper","every","Date","v1Value","#oneValue","targetIsValue","hasDuplicateValues","ids","uniqueIds","otherFieldName","otherAttribute","getTime","getTimezoneOffset","setMilliseconds","toJSON","FormulaSourceCodeHelper","#cleanFormula","cleanFormula","runFormulaPrefix","findFormulaVersion","versionPart","buildFormulaFunction","buildFormulaCache","updateFormulaFromEditor","createPromisedParts","getSharedParts","FormulaCacheBuilder","loggingService","#sharedPartsCache","cacheSvc","formulaCache","shared","#getSharedParts","formulaEntities","Formulas","fEntity","sourceCode","Formula","formulaFunction","cacheResults","getTitle","addLog","LogSeverities","showMessage","formulaCacheItem","isDraft","sourceCodeSaved","sourceCodeGuid","sourceCodeId","#inputTypeSpecsForCacheItem","FormulaSpecialPickerTargets","#createPromisedParts","#targetInfoForCacheItem","FormulaDefaultTargets","Validation","mdFor","user","targetEntity","targetType","email","Email","isAnonymous","IsAnonymous","isSiteAdmin","IsSiteAdmin","isContentEditor","isContentAdmin","IsContentAdmin","isSystemAdmin","username","Username","roles","app","zoneId","isGlobal","IsGlobalApp","isSite","IsSiteApp","isContent","IsContentApp","getSetting","pageId","tabId","moduleId","_noContextInHttpHeaders","_autoAppIdsInUrl","promiseSpecs","errorLabel","getAttributeOfItem","formulaListIndexAndOriginal","streams","newFormulaItem","FormulaCacheService","#cacheBuilder","#results","#findFormulas","allowDraft","forNewPicker","targets","FormulaDefaultTargetValues","FormulaNewPickerTargetValues","FormulaOptionalTargetValues","unstopped","fOrDs","updateSaved","formulaItem","sourceGuid","sourceId","newCache","resetFormula","#deleteResult","isError","isOnlyPromise","newResult","resultListIndexAndOriginal","newResults","FormulaTargetsService","getTargetOptions","targetOptions","fieldFormulas","targetOption","hasFormula","FormulaOptionalTargets","isOldValuePicker","FormulaNewPickerTargets","t","FormulaV1Helpers","buildDesignerSnippetsContext","getSnippets","fieldOptions","formulaPropsParameters","IntellisenseV2","getTypings","#inputTypeToDataType","allParameters","lower","setDesignerOpen","#targetsService","designerState","editMode","formulaResult","currentTargetOptions","entityOptions","entityFormulas","fieldsOptions","currentFormula","v1ContextSnippets","#currentItemHeader","v2JsTypings","v1DataSnippets","initAfterItemSettingsAreReady","firstFieldName","FormulaTargets","nameId","EavContentTypeAttribute","ctAttributeDto","IsTitle","ctAttributesDto","contentTypeDto","Scope","contentTypesDto","valuesDto","EavDimension","createEavFieldValue","entityDto","entitiesDto","contentTypeItems","hasParams","urlParams","Guids","MissingDefaultLangValue","Options","Selected","defaultFormula","defaultListItemFormula","anyToEav","entityBundleDto","#objToEav","overrideContents","getType","calculateSharedInfoMessage","calculateShortDimensions","calculateEditAndReadDimensions","editableDimensions","readOnlyDimensions","editableExist","readOnlyExist","dimMap","langCode","shortNoReadOnly","shortDimension","ContentTypeName","sanitizer","pure","copyToClipboard","str","getSelection","rangeCount","getRangeAt","execCommand","removeAllRanges","addRange","FormulaDeveloperHelper","formulaProps","#isDesignerOpen","toLocaleUpperCase","FormulaExperimentalObject","#specs","#showWarningObsolete","getValues","FormulaContextObject","partialApp","FormulaContextApp","FormulaContextTarget","culture","Culture","FormulaContextFeatures","FormulaContextForm","FormulaContextEntities","xp","getOfType","guidOrName","runFormulas","#propsData","propsData","settingPath","isValueOrValidation","FormulaDataObject","#params","#valueMapper","#picker","#value","getDefaultOrPrefillValue","#getSelected","#getOptions","#dataAndCtx","asWithGenericSettings","SettingsGeneric","genericSettings","defSettings","AllDeprecated","moveDeprecatedSettings","DefaultCollapsed","hasEditable","hasReadonly","#getTranslationStateCore","editableElements","asDeprecated","VisibleInEditUI","storeKey","#partCache","local","#local","session","#session","StateManagerSession","longTerm","#getPart","created","UserPreferencesPart","userSettings","#data","u","#save","setAll","setMany","old","module","exports","__webpack_modules__","__unused_webpack_exports","wellKnownSymbol","definePropertyModule","UNSCOPABLES","ArrayPrototype","charAt","S","unicode","Constructor","ArrayBuffer","DataView","NAME","NATIVE_ARRAY_BUFFER","DESCRIPTORS","classof","createNonEnumerableProperty","redefine","setPrototypeOf","uid","Int8Array","Int8ArrayPrototype","Uint8ClampedArray","Uint8ClampedArrayPrototype","TypedArray","TypedArrayPrototype","ObjectPrototype","isPrototypeOf","TO_STRING_TAG","TYPED_ARRAY_TAG","NATIVE_ARRAY_BUFFER_VIEWS","opera","TYPED_ARRAY_TAG_REQIRED","TypedArrayConstructorsList","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","klass","aTypedArray","aTypedArrayConstructor","C","ARRAY","TypedArrayConstructor","exportTypedArrayMethod","KEY","property","forced","exportTypedArrayStaticMethod","isView","redefineAll","fails","anInstance","toInteger","toLength","toIndex","IEEE754","getOwnPropertyNames","arrayFill","setToStringTag","InternalStateModule","getInternalState","setInternalState","ARRAY_BUFFER","DATA_VIEW","PROTOTYPE","WRONG_INDEX","NativeArrayBuffer","$ArrayBuffer","$DataView","$DataViewPrototype","RangeError","packIEEE754","pack","unpackIEEE754","unpack","packInt8","packInt16","packInt32","unpackInt32","packFloat32","packFloat64","addGetter","isLittleEndian","intIndex","store","byteLength","bytes","byteOffset","reverse","conversion","NaN","ArrayBufferPrototype","j","testView","nativeSetInt8","setInt8","getInt8","setUint8","unsafe","bufferLength","getUint8","getInt16","arguments","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","toObject","toAbsoluteIndex","copyWithin","len","to","inc","argumentsLength","endPos","$forEach","STRICT_METHOD","arrayMethodIsStrict","callbackfn","callWithSafeIterationClosing","isArrayIteratorMethod","createProperty","getIteratorMethod","arrayLike","step","mapfn","mapping","iteratorMethod","toIndexedObject","createMethod","IS_INCLUDES","$this","fromIndex","IndexedObject","arraySpeciesCreate","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_OUT","NO_HOLES","that","specificCreate","boundFunction","filterOut","nativeLastIndexOf","NEGATIVE_ZERO","apply","V8_VERSION","SPECIES","METHOD_NAME","foo","aFunction","IS_RIGHT","memo","right","originalArray","anObject","iteratorClose","ENTRIES","ITERATOR","SAFE_CLOSING","called","iteratorWithReturn","SKIP_CLOSING","ITERATION_SUPPORT","TO_STRING_TAG_SUPPORT","classofRaw","CORRECT_ARGUMENTS","tag","tryGet","callee","getOwnPropertyDescriptorModule","getOwnPropertyDescriptor","F","IteratorPrototype","createPropertyDescriptor","Iterators","returnThis","IteratorConstructor","bitmap","$","createIteratorConstructor","IS_PURE","IteratorsCore","BUGGY_SAFARI_ITERATORS","KEYS","VALUES","Iterable","DEFAULT","IS_SET","FORCED","CurrentIteratorPrototype","methods","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","EXISTS","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","getBuiltIn","userAgent","process","versions","v8","setGlobal","copyConstructorProperties","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","noTargetGet","sham","regexpExec","REPLACE_SUPPORTS_NAMED_GROUPS","re","REPLACE_KEEPS_$0","REPLACE","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","originalExec","SYMBOL","DELEGATES_TO_SYMBOL","DELEGATES_TO_EXEC","execCalled","flags","nativeRegExpMethod","nativeMethod","regexp","arg2","forceStringMethod","regexMethod","variable","namespace","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","matched","captures","namedCaptures","replacement","tailPos","symbols","ch","n","check","g","pow","LN2","mantissaLength","exponent","mantissa","exponentLength","eMax","eBias","rt","sign","nBits","propertyIsEnumerable","Wrapper","NewTarget","NewTargetPrototype","functionToString","inspectSource","NATIVE_WEAK_MAP","objectHas","sharedKey","hiddenKeys","wmget","wmhas","wmset","facade","STATE","enforce","getterFor","feature","detection","normalize","POLYFILL","NATIVE","MATCH","isRegExp","returnMethod","PrototypeOfArrayIteratorPrototype","arrayIterator","NEW_ITERATOR_PROTOTYPE","getOwnPropertySymbols","URL","searchParams","pathname","URLSearchParams","host","hash","objectKeys","getOwnPropertySymbolsModule","propertyIsEnumerableModule","nativeAssign","A","B","symbol","alphabet","chr","T","activeXDocument","defineProperties","enumBugKeys","documentCreateElement","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","LT","NullProtoObject","domain","ActiveXObject","write","parentWindow","NullProtoObjectViaActiveX","iframeDocument","iframe","JS","contentWindow","NullProtoObjectViaIFrame","Properties","__unused_webpack_module","IE8_DOM_DEFINE","nativeDefineProperty","nativeGetOwnPropertyDescriptor","internalObjectKeys","CORRECT_PROTOTYPE_GETTER","names","nativePropertyIsEnumerable","NASHORN_BUG","aPossiblePrototype","setter","CORRECT_SETTER","getOwnPropertyNamesModule","enforceInternalState","TEMPLATE","simple","R","re1","re2","regexpFlags","stickyHelpers","nativeExec","nativeReplace","patchedExec","UPDATES_LAST_INDEX_WRONG","UNSUPPORTED_Y","BROKEN_CARET","NPCG_INCLUDED","reCopy","sticky","charsAdded","strCopy","multiline","ignoreCase","dotAll","RE","CONSTRUCTOR_NAME","TAG","SHARED","copyright","defaultConstructor","requireObjectCoercible","CONVERT_TO_STRING","pos","charCodeAt","codeAt","maxInt","regexNonASCII","regexSeparators","OVERFLOW_ERROR","stringFromCharCode","fromCharCode","digitToBasic","digit","adapt","delta","numPoints","firstTime","baseMinusTMin","encode","inputLength","counter","extra","ucs2decode","bias","basicLength","handledCPCount","handledCPCountPlusOne","qMinusT","baseMinusT","encoded","labels","whitespaces","whitespace","ltrim","rtrim","integer","ceil","toPositiveInteger","BYTES","PREFERRED_STRING","TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS","ArrayBufferViewCore","ArrayBufferModule","toOffset","typedArrayFrom","setSpecies","inheritIfRequired","round","BYTES_PER_ELEMENT","WRONG_LENGTH","fromList","isArrayBuffer","isTypedArrayIndex","wrappedGetOwnPropertyDescriptor","wrappedDefineProperty","wrapper","CLAMPED","GETTER","SETTER","NativeTypedArrayConstructor","TypedArrayConstructorPrototype","exported","addElement","getter","typedArrayOffset","$length","$len","checkCorrectnessOfIteration","iterable","speciesConstructor","postfix","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","arrayBufferModule","arrayMethodHasSpeciesSupport","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","SPECIES_SUPPORT","isConcatSpreadable","spreadable","E","$filter","$indexOf","nativeIndexOf","addToUnscopables","defineIterator","ARRAY_ITERATOR","iterated","kind","Arguments","$map","HAS_SPECIES_SUPPORT","nativeSlice","fin","deleteCount","insertCount","actualDeleteCount","actualStart","FunctionPrototype","FunctionPrototypeToString","nameRE","nativeGetPrototypeOf","TO_STRING","RegExpPrototype","nativeToString","STRING_ITERATOR","point","fixRegExpWellKnownSymbolLogic","advanceStringIndex","regExpExec","nativeMatch","maybeCallNative","matcher","rx","fullUnicode","matchStr","getSubstitution","maybeToString","UNSAFE_SUBSTITUTE","searchValue","replaceValue","replacer","functionalReplace","accumulatedResult","nextSourcePosition","replacerArgs","callRegExpExec","arrayPush","MAX_UINT32","SUPPORTS_Y","SPLIT","nativeSplit","internalSplit","limit","lim","lastLength","lastLastIndex","separatorCopy","splitter","unicodeMatching","$trim","forcedStringTrimMethod","$copyWithin","$every","$fill","fromSpeciesAndList","$findIndex","predicate","$find","$includes","ArrayIterators","arrayValues","arrayKeys","arrayEntries","nativeTypedArrayIterator","CORRECT_ITER_NAME","typedArrayValues","$join","$lastIndexOf","$reduceRight","$reduce","middle","$slice","$some","$sort","comparefn","begin","beginIndex","$toLocaleString","toLocaleString","TO_LOCALE_STRING_BUG","Uint8ArrayPrototype","arrayToString","arrayJoin","createTypedArrayConstructor","DOMIterables","COLLECTION_NAME","Collection","CollectionPrototype","ArrayIteratorMethods","ArrayValues","USE_NATIVE_URL","getIterator","$fetch","Headers","URL_SEARCH_PARAMS","URL_SEARCH_PARAMS_ITERATOR","getInternalParamsState","getInternalIteratorState","plus","sequences","percentSequence","percentDecode","sequence","decodeURIComponent","serialize","encodeURIComponent","parseSearchParams","entry","updateSearchParams","validateArgumentsLength","passed","URLSearchParamsIterator","URLSearchParamsConstructor","entryIterator","entryNext","updateURL","URLSearchParamsPrototype","entriesIndex","sliceIndex","fetch","EOF","arrayFrom","toASCII","URLSearchParamsModule","NativeURL","getInternalSearchParamsState","getInternalURLState","INVALID_SCHEME","INVALID_HOST","INVALID_PORT","ALPHA","ALPHANUMERIC","DIGIT","HEX_START","OCT","DEC","HEX","FORBIDDEN_HOST_CODE_POINT","FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT","LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE","TAB_AND_NEW_LINE","parseHost","codePoints","parseIPv6","isSpecial","parseIPv4","percentEncode","C0ControlPercentEncodeSet","partsLength","numbers","radix","ipv4","numbersSeen","ipv4Piece","swaps","swap","address","pieceIndex","compress","pointer","serializeHost","ignore0","unshift","ipv6","maxIndex","maxLength","currStart","currLength","findLongestZeroSequence","fragmentPercentEncodeSet","pathPercentEncodeSet","userinfoPercentEncodeSet","specialSchemes","ftp","https","ws","wss","scheme","includesCredentials","password","cannotHaveUsernamePasswordPort","cannotBeABaseURL","isWindowsDriveLetter","normalized","startsWithWindowsDriveLetter","third","shortenURLsPath","pathSize","isSingleDot","segment","isDoubleDot","SCHEME_START","SCHEME","NO_SCHEME","SPECIAL_RELATIVE_OR_AUTHORITY","PATH_OR_AUTHORITY","RELATIVE","RELATIVE_SLASH","SPECIAL_AUTHORITY_SLASHES","SPECIAL_AUTHORITY_IGNORE_SLASHES","AUTHORITY","HOST","HOSTNAME","PORT","FILE","FILE_SLASH","FILE_HOST","PATH_START","PATH","CANNOT_BE_A_BASE_URL_PATH","QUERY","FRAGMENT","parseURL","stateOverride","bufferCodePoints","failure","seenAt","seenBracket","seenPasswordToken","port","fragment","codePoint","encodedCodePoints","URLConstructor","baseState","urlString","searchParamsState","serializeURL","getOrigin","protocol","getProtocol","getUsername","getPassword","getHost","hostname","getHostname","getPort","getPathname","getSearch","getSearchParams","getHash","URLPrototype","accessorDescriptor","nativeCreateObjectURL","createObjectURL","nativeRevokeObjectURL","revokeObjectURL","blob","__webpack_module_cache__","definition","prop","toStringTag","__webpack_exports__","_createForOfIteratorHelper","allowArrayLike","_unsupportedIterableToArray","minLen","_arrayLikeToArray","_e","normalCompletion","didErr","_e2","arr","arr2","_defineProperties","Emitter","_classCallCheck","_createClass","protoProps","staticProps","_callbacks","callbacks","_len","_step","_iterator","dispatchEvent","makeEvent","bubbles","cancelable","CustomEvent","evt","createEvent","initCustomEvent","options_createForOfIteratorHelper","options_unsupportedIterableToArray","options_arrayLikeToArray","src_options","acceptedMimeTypes","disablePreviews","renameFilename","tb","gb","mb","kb","xhr","chunk","dzuuid","uuid","dzchunkindex","dztotalfilesize","dzchunksize","dztotalchunkcount","totalChunkCount","dzchunkbyteoffset","messageElement","span","getFallbackForm","srcX","srcY","srcWidth","srcHeight","srcRatio","trgRatio","trgWidth","trgHeight","resizeImage","dragstart","dragend","dragenter","dragover","dragleave","paste","addedfile","_this","previewElement","_step2","_iterator2","_step3","_iterator3","filesize","_removeLink","_step4","removeFileEvent","UPLOADING","_iterator4","removedfile","_updateMaxFilesReachedClass","thumbnail","dataUrl","_step5","_iterator5","thumbnailElement","alt","_step6","_iterator6","errormultiple","processing","processingmultiple","uploadprogress","progress","bytesSent","_step7","_iterator7","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","completemultiple","maxfilesexceeded","maxfilesreached","queuecomplete","addedfiles","_typeof","dropzone_createForOfIteratorHelper","dropzone_unsupportedIterableToArray","dropzone_arrayLikeToArray","dropzone_classCallCheck","dropzone_defineProperties","dropzone_createClass","_setPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","construct","Proxy","Super","_getPrototypeOf","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_Emitter","_inherits","subClass","superClass","_super","clickableElements","listeners","instances","elementOptions","optionsForElement","extend","isBrowserSupported","getExistingFallback","getElements","accepted","getFilesWithStatus","QUEUED","ADDED","_this2","tagName","setupHiddenFileInput","hiddenFileInput","visibility","addFile","webkitURL","events","updateTotalUploadProgress","getAddedFiles","getUploadingFiles","getQueuedFiles","noPropagation","dataTransfer","types","containsFiles","efct","effectAllowed","dropEffect","clickableElement","elementInside","totalUploadProgress","totalBytesSent","totalBytes","getActiveFiles","total","existingFallback","fieldsString","_getParamName","getFallback","elements","_arr","elementListeners","_this3","removeEventListeners","cancelUpload","setupEventListeners","selectedSize","selectedUnit","getAcceptedFiles","webkitGetAsEntry","_addFilesFromItems","handleFiles","__guard__","clipboardData","_this4","isFile","getAsFile","isDirectory","_addFilesFromDirectory","directory","_this5","dirReader","createReader","errorHandler","__guardMethod__","readEntries","fullPath","isValidFile","_this6","uuidv4","_renameFile","_enqueueThumbnail","_errorProcessing","enqueueFile","_step8","_iterator8","_this7","processQueue","_this8","_thumbnailQueue","_processThumbnailQueue","_this9","_processingThumbnail","createThumbnail","without","cancelIfNecessary","_step9","_iterator9","_this10","canvas","resizedDataURL","toDataURL","ExifRestore","restore","dataURL","dataURItoBlob","fixOrientation","_this11","fileReader","FileReader","onload","createThumbnailFromUrl","readAsDataURL","mockFile","imageUrl","crossOrigin","_this12","resizeThumbnail","_this13","getComputedStyle","imageOrientation","loadExif","EXIF","getData","getTag","orientation","resizeInfo","getContext","scale","rotate","PI","drawImageIOSFix","trgX","trgY","onerror","processingLength","queuedFiles","processFiles","_step10","_iterator10","uploadFiles","_step11","groupedFiles","_getFilesWithXhr","_iterator11","CANCELED","abort","_step12","_iterator12","_this14","_transformFiles","transformedFiles","transformedFile","_transformedFile","chunks","handleNextChunk","chunkIndex","startedChunkCount","dataBlock","webkitSlice","retries","_uploadData","finishedChunkUpload","allFinished","SUCCESS","_finished","dataBlocks","_i2","_step13","_this15","XMLHttpRequest","_iterator13","resolveOption","_finishedUploading","ontimeout","_handleUploadError","onprogress","_updateFilesUploadProgress","Accept","headerName","headerValue","setRequestHeader","additionalParams","_getChunk","_step14","_iterator14","_addFormElementData","_i3","submitRequest","_this16","doneCounter","_loop","_step15","_iterator15","inputName","_step16","_iterator16","checked","_file2","_step17","_iterator17","readyState","responseType","responseText","getResponseHeader","send","_step18","_iterator18","_step19","_iterator19","ERROR","_len2","objects","_key2","_i4","_objects","initClass","camelize","forElement","discover","dropzones","checkElements","_step20","_iterator20","_step21","_iterator21","blockedBrowsers","capableBrowser","File","Blob","blacklistedBrowsers","_step22","_iterator22","dataURI","byteString","atob","mimeString","ab","ia","asc","rejectedItem","els","_step23","_iterator23","_step24","_iterator24","question","rejected","_step25","mimeType","baseMimeType","_iterator25","validType","jQuery","each","ACCEPTED","PROCESSING","sx","sy","sw","sh","dx","dy","dw","dh","vertSquashRatio","ih","naturalHeight","drawImage","getImageData","ey","py","ratio","detectVerticalSquash","KEY_STR","chr1","chr2","chr3","enc1","enc2","enc3","enc4","origFileBase64","resizedFileBase64","rawImage","decode64","segments","slice2Segments","exifManipulation","encode64","exifArray","getExifArray","newImageArray","insertExif","seg","imageData","buf","separatePoint","mae","ato","rawImageArray","head","endPoint","_autoDiscoverFunction","win","rem","pre","createEventObject","doScroll","frameElement","poll","contentLoaded","dropzone_dist","logs$","logLimit","lastSnackBarTime","snackBarDebounce","newLogs","nowTime","getLogs$","getLogsSignal","Log","Warn","FieldWriter","#updateAttribute","oldAttributes","attributeKey","newAttributes","attributeCopy","updateAttributesValues","updateValues","eavAttributes","newItemValue","DimensionReader","hasCurrent","newEavValue","updateAttributeValue","newLanguageValue","addAttributeValue","attributeValue","attributeType","addAttributeDimension","newDimensionValue","existingDimensionValue","defaultLanguage","eavValue","removeAttributeDimension","validDimensions","newAttribute","ItemUpdateHelper","oldItem","EntityId","newItem","languageCode","relevantValues","shareWithLanguage","delayUpsert","SignalStoreObservableBase","#itemAttributesCache","#itemHeaderCache","#slotIsEmptyCache","dtoItems","getSignal","getItemAttributes$","list$","IsEmptyAllowed","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","postMessage","IS_PAPA_WORKER","_handle","_completed","_halted","_baseIndex","_partialLine","_rowCount","_start","_nextChunk","isFirstChunk","_completeResults","streamer","_config","parseChunk","skipFirstNLines","newline","guessLineEndings","quoteChar","U","beforeFirstChunk","paused","aborted","cursor","workerId","WORKER_ID","finished","_sendError","RemoteChunkSize","_readChunk","_chunkLoaded","_chunkError","downloadRequestBody","downloadRequestHeaders","statusText","LocalChunkSize","mozSlice","FileReaderSync","readAsText","encoding","pause","resume","_streamData","_streamEnd","_streamError","_checkIsFinished","_streamCleanUp","DefaultDelimiter","dynamicTypingFunction","row","delimiter","RECORD_SEP","UNIT_SEP","comments","successful","bestDelimiter","delimitersToGuess","getCharIndex","I","fastMode","D","L","escapeChar","BAD_DELIMITERS","M","w","substr","linebreak","truncated","renamedHeaders","userError","userStep","userChunk","userComplete","terminate","worker","WORKERS_SUPPORTED","download","readable","read","BLOB_URL","Worker","onmessage","unparse","quotes","columns","escapeFormulae","BYTE_ORDER_MARK","NODE_STREAM_INPUT","Parser","ParserHandle","NetworkStreamer","FileStreamer","StringStreamer","ReadableStreamStreamer","inputElem","instanceConfig","action","FeatureComponentBase","FeatureIconIndicatorComponent_Conditional_0_Template","tab","#log","inheritingClassForLogging","logThis","logicInstance","emptyEntityField","possibleGuid","additionalConfig","advanced","FieldSettingsHelperUnknown","Unknown","getExact","eavFieldSettingsHelpersManagerSingleton","inputTypeName","helper"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/fields/data-type-catalog.ts","./projects/eav-ui/src/app/shared/directives/base.directive.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-field.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-entity-attributes.ts","./projects/eav-ui/src/app/shared/services/user-language.service.ts","./projects/eav-ui/src/app/shared/services/entity.service.ts","./projects/eav-ui/src/app/edit/localization/language.service.ts","./node_modules/rxjs/dist/esm/internal/observable/fromEvent.js","./projects/eav-ui/src/app/edit/shared/adam/adam-cache.service.ts","./projects/eav-ui/src/app/edit/shared/adam/link-cache.service.ts","./projects/eav-ui/src/app/edit/form/correctAdamUrl.ts","./projects/eav-ui/src/app/edit/form/form-data.service.ts","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-main.models.ts","./projects/eav-ui/src/app/edit/form/form-publishing.service.ts","./projects/eav-ui/src/app/edit/form/initial-values-service.ts","./projects/eav-ui/src/app/edit/form/initialize-missing-values-services.ts","./projects/eav-ui/src/app/edit/form/items-request-restore-helper.ts","./projects/eav-ui/src/app/edit/form/edit-initializer.service.ts","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-main.helpers.ts","./projects/eav-ui/src/app/edit/shared/services/scripts-loader.service.ts","./projects/eav-ui/src/app/edit/assets/icons/load-icons.service.ts","./projects/eav-ui/src/app/edit/assets/icons/2sxc/Material-Icon-Adam-48-filled.svg","./projects/eav-ui/src/app/edit/assets/icons/2sxc/Material-Icon-Adam-48-outlined.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/draft-branch.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-archive.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-audio.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-code.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-excel.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-image.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-pdf.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-powerpoint.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-text.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-video.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-word.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/folder.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/folder-plus.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/sitemap.svg","./projects/eav-ui/src/app/edit/entity-form/entity-form-state.service.ts","./projects/eav-ui/src/app/edit/routing/edit-routing.service.ts","./projects/eav-ui/src/app/edit/fields/picker/models/picker-item.model.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-base.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-entity-base.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-features.model.ts","./projects/eav-ui/src/app/edit/fields/picker/picker.helpers.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-data.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-data.factory.ts","./projects/eav-ui/src/app/shared/signals/signal-equals.ts","./projects/eav-ui/src/app/edit/form/forms-state.service.ts","./projects/eav-ui/src/app/edit/formulas/formula-exec-specs.factory.ts","./projects/eav-ui/src/app/edit/state/fields-configs.model.ts","./projects/eav-ui/src/app/edit/formulas/formula-field-picker.helper.ts","./projects/eav-ui/src/app/edit/formulas/results/formula-settings.helper.ts","./projects/eav-ui/src/app/edit/formulas/formula-run-field.ts","./projects/eav-ui/src/app/edit/formulas/formula-engine.ts","./projects/eav-ui/src/app/edit/formulas/promise/formula-promise-result.model.ts","./projects/eav-ui/src/app/edit/formulas/promise/formula-promise-handler.ts","./projects/eav-ui/src/app/edit/fields/wrappers/wrappers.constants.ts","./projects/eav-ui/src/app/edit/fields/wrappers/wrapper.helper.ts","./projects/eav-ui/src/app/edit/state/fields-properties-engine-cycle.ts","./projects/eav-ui/src/app/edit/state/item-field-visibility.ts","./projects/eav-ui/src/app/edit/state/fields-settings-constants.service.ts","./projects/eav-ui/src/app/edit/shared/validation/validation.helpers.ts","./projects/eav-ui/src/app/edit/state/metadata-decorators.constants.ts","./projects/eav-ui/src/app/edit/state/fields-settings-update.helpers.ts","./projects/eav-ui/src/app/edit/state/fields-values-modified.helper.ts","./projects/eav-ui/src/app/edit/state/fields-properties-engine.ts","./projects/eav-ui/src/app/edit/state/fields-properties-updates.ts","./projects/eav-ui/src/app/edit/state/fields-settings-picker-updater.ts","./node_modules/lodash-es/transform.js","./projects/eav-ui/src/app/edit/state/fields-signals.helper.ts","./projects/eav-ui/src/app/shared/helpers/difference.ts","./projects/eav-ui/src/app/edit/state/fields-settings.service.ts","./projects/eav-ui/src/app/edit/state/field-translation-info.ts","./projects/eav-ui/src/app/edit/state/fields-translate.service.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-sync.service.ts","./projects/eav-ui/src/app/edit/fields/field-metadata.decorator.ts","./projects/eav-ui/src/app/edit/fields/directives/change-anchor-target.directive.ts","./projects/eav-ui/src/app/edit/fields/help-text/field-help-text.html","./projects/eav-ui/src/app/edit/fields/help-text/field-help-text.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-default/boolean-base.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-default/boolean-default-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-default/boolean-default.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-default/boolean-default.html","./projects/eav-ui/src/app/edit/fields/basic/boolean-tristate/boolean-tristate-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-tristate/boolean-tristate.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-tristate/boolean-tristate.html","./projects/eav-ui/src/app/edit/fields/basic/custom-default/custom-default.ts","./projects/eav-ui/src/app/edit/fields/basic/custom-default/custom-default.html","./projects/eav-ui/src/app/edit/fields/basic/custom-json-editor/custom-json-editor-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/custom-json-editor/custom-json-editor.html","./projects/eav-ui/src/app/edit/fields/basic/custom-json-editor/custom-json-editor.ts","./node_modules/@angular/material/fesm2022/timepicker.mjs","./projects/eav-ui/src/app/edit/fields/basic/datetime-default/datetime-fn.ts","./projects/eav-ui/src/app/edit/fields/basic/datetime-default/mat-time-picker.ts","./projects/eav-ui/src/app/edit/fields/basic/datetime-default/datetime-default.html","./projects/eav-ui/src/app/edit/fields/basic/datetime-default/datetime-default.ts","./projects/eav-ui/src/app/edit/fields/basic/empty-default/empty-default.ts","./projects/eav-ui/src/app/edit/fields/basic/empty-message/empty-message.html","./projects/eav-ui/src/app/edit/fields/basic/empty-message/empty-message.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-helpers.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-masks-helper.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-more-fields-helper.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-base.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-entity-base.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-app-assets.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-app-assets.ts","./node_modules/lodash-es/escapeRegExp.js","./projects/eav-ui/src/app/edit/fields/picker/data-sources/css/string-font-icon-picker.helpers.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-css.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-css.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-empty.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-empty.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-entity.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-entity.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-query.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-query.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-string.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-string.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-adapter.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-ui-mapper-base.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-ui-mapper-noop.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-ui-mapper-number-array.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-ui-mapper-string-array.ts","./projects/eav-ui/src/app/edit/fields/picker/constants/picker-config-model.constants.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-data-setup.ts","./node_modules/@angular/cdk/fesm2022/tree.mjs","./node_modules/@angular/material/fesm2022/tree.mjs","./projects/eav-ui/src/app/edit/fields/picker/picker-part-base.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-item-buttons/picker-item-buttons.html","./projects/eav-ui/src/app/edit/fields/picker/picker-item-buttons/picker-item-buttons.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-icon-help/picker-icon-help.html","./projects/eav-ui/src/app/edit/fields/picker/picker-icon-help/picker-icon-help.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-icon-info/picker-icon-info.html","./projects/eav-ui/src/app/edit/fields/picker/picker-icon-info/picker-icon-info.ts","./node_modules/ngx-tippy-wrapper/fesm2020/ngx-tippy-wrapper.mjs","./projects/eav-ui/src/app/edit/fields/picker/picker-item-preview/picker-item-preview.html","./projects/eav-ui/src/app/edit/fields/picker/picker-item-preview/picker-item-preview.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-item-label/picker-item-label.html","./projects/eav-ui/src/app/edit/fields/picker/picker-item-label/picker-item-label.ts","./projects/edit-types/src/PickerModeTree.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-tree/picker-tree-data-helper.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-tree/picker-tree-data-service.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-search/picker-search.html","./projects/eav-ui/src/app/edit/fields/picker/picker-search/picker-search.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-inline/picker-inline-base.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-inline/picker-inline-header.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-inline/picker-inline-header.html","./projects/eav-ui/src/app/edit/fields/picker/picker-checkboxes/picker-checkboxes.html","./projects/eav-ui/src/app/edit/fields/picker/picker-checkboxes/picker-checkboxes.ts","./node_modules/@angular/material/fesm2022/divider.mjs","./node_modules/@angular/material/fesm2022/list.mjs","./projects/eav-ui/src/app/edit/fields/picker/picker-pills/picker-pills.html","./projects/eav-ui/src/app/edit/fields/picker/picker-pills/picker-pills.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-radio/picker-radio.html","./projects/eav-ui/src/app/edit/fields/picker/picker-radio/picker-radio.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-text-toggle/picker-text-toggle.html","./projects/eav-ui/src/app/edit/fields/picker/picker-text-toggle/picker-text-toggle.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-text/picker-text.html","./projects/eav-ui/src/app/edit/fields/picker/picker-text/picker-text.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-preview/picker-preview.html","./projects/eav-ui/src/app/edit/fields/picker/picker-preview/picker-preview.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-list/picker-list.html","./projects/eav-ui/src/app/edit/fields/picker/picker-list/picker-list.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-dialog/picker-dialog.html","./projects/eav-ui/src/app/edit/fields/picker/picker-dialog/picker-dialog.ts","./projects/eav-ui/src/app/edit/fields/picker/picker.html","./projects/eav-ui/src/app/edit/fields/picker/picker.ts","./projects/eav-ui/src/app/edit/fields/basic/string-picker/string-picker.helpers.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-parser-csv.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-settings-helper-shared.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-default/entity-default-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-default/entity-default.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-content-blocks/entity-content-blocks-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-content-blocks/entity-content-blocks.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-picker/entity-picker-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-picker/entity-picker.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-query/entity-query-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-query/entity-query.ts","./projects/eav-ui/src/app/edit/shared/adam/adam.service.ts","./projects/eav-ui/src/app/edit/fields/connector/connector-instance.model.ts","./projects/eav-ui/src/app/edit/fields/connector/connector.helper.ts","./projects/eav-ui/src/app/edit/fields/connector/connector.ts","./projects/eav-ui/src/app/edit/fields/connector/connector.html","./projects/eav-ui/src/app/edit/fields/basic/external-web-component/custom-gps-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/external-web-component/string-wysiwyg-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/external-web-component/external-web-component.html","./projects/eav-ui/src/app/edit/fields/basic/external-web-component/external-web-component.ts","./projects/eav-ui/src/app/edit/fields/directives/paste-clipboard-image.directive.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-default/hyperlink-default-base.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-default/hyperlink-default-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-default/hyperlink-default.html","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-default/hyperlink-default.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-library/hyperlink-library-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-library/hyperlink-library.ts","./projects/eav-ui/src/app/edit/fields/basic/string-dropdown/string-dropdown-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/number-default/number-default-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/number-default/number-default.ts","./projects/eav-ui/src/app/edit/fields/basic/number-default/number-default.html","./projects/eav-ui/src/app/edit/fields/basic/number-dropdown/number-dropdown-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/number-dropdown/number-dropdown.ts","./projects/eav-ui/src/app/edit/fields/basic/number-picker/number-picker-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/number-picker/number-picker.ts","./projects/eav-ui/src/app/edit/fields/basic/string-default/string-default-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/string-default/string-default.html","./projects/eav-ui/src/app/edit/fields/basic/string-default/string-default.ts","./projects/eav-ui/src/app/edit/fields/basic/string-dropdown-query/string-dropdown-query-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/string-dropdown-query/string-dropdown-query.ts","./projects/eav-ui/src/app/edit/fields/basic/string-dropdown/string-dropdown.ts","./projects/eav-ui/src/app/edit/fields/basic/string-font-icon-picker/string-font-icon-picker-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/string-font-icon-picker/string-font-icon-picker.ts","./projects/eav-ui/src/app/edit/fields/basic/string-picker/string-picker-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/string-picker/string-picker.ts","./projects/eav-ui/src/app/edit/fields/basic/string-template-picker/string-template-picker.constants.ts","./projects/eav-ui/src/app/edit/fields/basic/string-template-picker/string-template-picker.html","./projects/eav-ui/src/app/edit/fields/basic/string-template-picker/string-template-picker.ts","./projects/eav-ui/src/app/edit/fields/basic/string-url-path/string-url-path-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/basic/string-url-path/string-url-path.ts","./projects/eav-ui/src/app/edit/fields/basic/string-url-path/string-url-path.html","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/adam-browser.models.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/adam-browser.html","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/adam-browser.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/dropzone-helper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-hint/adam-hint.html","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-hint/adam-hint.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-wrapper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-wrapper.html","./node_modules/ngx-dropzone-wrapper/fesm2022/ngx-dropzone-wrapper.mjs","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone/dropzone-wrapper.models.ts","./projects/field-string-wysiwyg/shared/wysiwyg.constants.ts","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone/dropzone-wysiwyg.ts","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone/dropzone-wrapper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone/dropzone-wrapper.html","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone-dragging.helper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/expand-dialog/content-expand.animation.ts","./projects/eav-ui/src/app/edit/fields/wrappers/dialog-popup/dialog-popup.html","./projects/eav-ui/src/app/edit/fields/wrappers/dialog-popup/dialog-popup.ts","./projects/eav-ui/src/app/edit/fields/wrappers/expand-dialog/expandable-wrapper.ts","./projects/eav-ui/src/app/shared/helpers/viewport.helpers.ts","./projects/eav-ui/src/app/edit/fields/wrappers/expand-dialog/expandable-wrapper.html","./projects/eav-ui/src/app/edit/fields/wrappers/feature-warning/feature-warning-wrapper.html","./projects/eav-ui/src/app/edit/fields/wrappers/feature-warning/feature-warning-wrapper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/group/collapsible-wrapper-settings-helper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/group/collapsible-wrapper.html","./projects/eav-ui/src/app/edit/fields/wrappers/group/collapsible-wrapper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/hidden/hidden-wrapper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/hidden/hidden-wrapper.html","./projects/eav-ui/src/app/edit/fields/wrappers/hyperlink-dialog/hyperlink-default-expandable-wrapper.html","./projects/eav-ui/src/app/edit/fields/wrappers/hyperlink-dialog/hyperlink-default-expandable-wrapper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/hyperlink-library-dialog/hyperlink-library-expandable-wrapper.html","./projects/eav-ui/src/app/edit/fields/wrappers/hyperlink-library-dialog/hyperlink-library-expandable-wrapper.ts","./projects/eav-ui/src/app/edit/localization/auto-translate-disabled-warning-dialog/auto-translate-disabled-warning-dialog.html","./projects/eav-ui/src/app/edit/localization/auto-translate-disabled-warning-dialog/auto-translate-disabled-warning-dialog.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.constants.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.helpers.ts","./projects/eav-ui/src/app/shared/components/translate-helper.ts","./projects/eav-ui/src/app/edit/localization/snack-bar-warning-demo/snack-bar-warning-demo.ts","./projects/eav-ui/src/app/edit/localization/snack-bar-warning-demo/snack-bar-warning-demo.html","./projects/eav-ui/src/app/edit/localization/auto-translate-menu-dialog/auto-translate-menu-dialog.html","./projects/eav-ui/src/app/edit/localization/auto-translate-menu-dialog/auto-translate-menu-dialog.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.html","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu/translate-menu.html","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu/translate-menu.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/localization-wrapper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/localization-wrapper.html","./projects/eav-ui/src/app/edit/fields/wrappers/picker-dialog/picker-expandable-wrapper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/picker-dialog/picker-expandable-wrapper.html","./projects/eav-ui/src/app/edit/fields/input-components.constant.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/adam-connector.ts","./projects/edit-types/src/BasicControlSettings.ts","./projects/eav-ui/src/app/edit/fields/builder/field-injector.service.ts","./projects/eav-ui/src/app/edit/fields/builder/fields-builder.directive.ts","./projects/eav-ui/src/app/edit/routing/edit-force-reload.service.ts","./projects/eav-ui/src/app/edit/entity-form/entity-translate-menu/entity-translate-menu.html","./projects/eav-ui/src/app/edit/entity-form/entity-translate-menu/entity-translate-menu.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form/entity-form.html","./projects/eav-ui/src/app/edit/entity-form/entity-form/entity-form.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form.helpers.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-builder/form-fields-builder.service.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-builder/form-fields-sync.service.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-builder/form-builder.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-builder/form-builder.html","./projects/eav-ui/src/app/features/dialogs/features-used-but-unlicensed-dialog.html","./projects/eav-ui/src/app/features/dialogs/features-used-but-unlicensed-dialog.ts","./projects/eav-ui/src/app/edit/dialog/header/publish-status-dialog/publish-status-dialog.ts","./projects/eav-ui/src/app/edit/dialog/header/publish-status-dialog/publish-status-dialog.html","./projects/eav-ui/src/app/edit/dialog/header/edit-dialog-header.html","./projects/eav-ui/src/app/edit/dialog/header/edit-dialog-header.ts","./projects/eav-ui/src/app/edit/shared/models/json-format-v1/eav-values-dto.ts","./projects/eav-ui/src/app/edit/shared/models/json-format-v1/eav-attributes-dto.ts","./projects/eav-ui/src/app/edit/shared/models/json-format-v1/eav-entity-dto.ts","./projects/eav-ui/src/app/edit/shared/models/json-format-v1/eav-entity-bundle-dto.ts","./projects/eav-ui/src/app/edit/dialog/main/snack-bar-save-errors/snack-bar-save-errors.html","./projects/eav-ui/src/app/edit/dialog/main/snack-bar-save-errors/snack-bar-save-errors.ts","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-save.service.ts","./projects/eav-ui/src/app/edit/dialog/main/form-slide.directive.ts","./projects/eav-ui/src/app/edit/dialog/main/snack-bar-unsaved-changes/snack-bar-unsaved-changes.ts","./projects/eav-ui/src/app/edit/dialog/main/snack-bar-unsaved-changes/snack-bar-unsaved-changes.html","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-main.ts","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-main.html","./projects/eav-ui/src/app/edit/dialog/entry/edit-entry.html","./projects/eav-ui/src/app/edit/dialog/entry/edit-entry.ts","./node_modules/reflect-metadata/Reflect.js","./projects/eav-ui/src/app/edit/shared/input-types/input-type.service.ts","./projects/eav-ui/src/app/edit/formulas/results/formula-value-corrections.helper.ts","./projects/eav-ui/src/app/edit/formulas/cache/source-code-helper.ts","./projects/eav-ui/src/app/edit/formulas/cache/formula-cache.builder.ts","./projects/eav-ui/src/app/edit/formulas/cache/formula-cache.service.ts","./projects/eav-ui/src/app/edit/formulas/targets/formula-targets.service.ts","./projects/eav-ui/src/app/edit/formulas/designer/formula-v1-snippets.ts","./projects/eav-ui/src/app/edit/formulas/designer/intellisense-v2.ts","./projects/eav-ui/src/app/edit/formulas/designer/editor-intellisense-function-v2.rawts","./projects/eav-ui/src/app/edit/formulas/designer/formula-designer.service.ts","./projects/eav-ui/src/app/edit/shared/content-types/content-type.service.ts","./projects/eav-ui/src/app/edit/dialog/header/language-settings-dialog/LanguageDropdown/language-part.enum.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-content-type-attribute.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-content-type.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-field-value.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-entity.ts","./projects/eav-ui/src/app/edit/shared/content-types/content-type-item.service.ts","./projects/eav-ui/src/app/shared/services/query.service.ts","./projects/eav-ui/src/app/edit/localization/translation-link.constants.ts","./projects/eav-ui/src/app/edit/formulas/targets/formula-targets.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-dimension.ts","./projects/eav-ui/src/app/edit/formulas/formula-definitions.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-item.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu/translate-menu.helpers.ts","./projects/eav-ui/src/app/edit/shared/helpers/item.helper.ts","./projects/eav-ui/src/app/shared/pipes/safe-html.pipe.ts","./projects/eav-ui/src/app/shared/helpers/copy-to-clipboard.helper.ts","./projects/eav-ui/src/app/edit/formulas/formula-developer-helper.ts","./projects/eav-ui/src/app/edit/formulas/run/formula-experimental-object.ts","./projects/eav-ui/src/app/edit/formulas/run/formula-run-context.ts","./projects/eav-ui/src/app/edit/formulas/run/formula-run-data.ts","./projects/eav-ui/src/app/edit/formulas/formula-run-one-helpers.factory.ts","./projects/eav-ui/src/app/edit/state/field-settings.helper.ts","./projects/eav-ui/src/app/shared/user/user-preferences.service.ts","./node_modules/dropzone/dist/dropzone.js","./projects/eav-ui/src/app/edit/shared/services/logging.service.ts","./projects/eav-ui/src/app/edit/localization/field-writer.ts","./projects/eav-ui/src/app/edit/state/item-updater.helper.ts","./projects/eav-ui/src/app/edit/state/item.service.ts","./node_modules/papaparse/papaparse.min.js","./projects/eav-ui/src/app/features/icons/feature-icon-indicator.html","./projects/eav-ui/src/app/features/icons/feature-icon-indicator.ts","./projects/eav-ui/src/app/edit/dialog/footer/footer-preferences.ts","./projects/eav-ui/src/app/edit/fields/logic/field-settings-helper-base.ts","./projects/eav-ui/src/app/edit/fields/logic/field-settings-helper-unknown.ts","./projects/eav-ui/src/app/edit/fields/logic/field-settings-helpers-manager.ts"],"sourcesContent":["export const DataTypeCatalog = {\r\n  Boolean: 'Boolean',\r\n  Custom: 'Custom',\r\n  DateTime: 'DateTime',\r\n  Empty: 'Empty',\r\n  Entity: 'Entity',\r\n  Hyperlink: 'Hyperlink',\r\n  Number: 'Number',\r\n  String: 'String',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { Directive, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive()\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseDirective implements OnDestroy {\r\n  /** Holds all subscriptions to be unsubscribed on destroy */\r\n  protected subscriptions = new Subscription();\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","import { EavFieldValue } from '.';\r\nimport { EavValuesDto } from '../json-format-v1';\r\n\r\nexport class EavField<T> {\r\n  Values: EavFieldValue<T>[];\r\n  Type: string;\r\n\r\n  static dtoToEav<T>(valueDto: EavValuesDto<T>, type: string): EavField<T> {\r\n    const values = EavFieldValue.dtoToEav(valueDto);\r\n    return {\r\n      Values: values,\r\n      Type: type,\r\n    } satisfies EavField<T>;\r\n  }\r\n}\r\n","import { EavEntity, EavField } from '.';\r\nimport { EavAttributesDto } from '../json-format-v1';\r\n\r\nexport class EavEntityAttributes {\r\n  [attributeName: string]: EavField<any>;\r\n\r\n  static dtoToEav(attributesDto: EavAttributesDto): EavEntityAttributes {\r\n    const attributes: EavEntityAttributes = {};\r\n\r\n    // loop attribute types - String, Boolean, ...\r\n    for (const [typeName, attributeDto] of Object.entries(attributesDto)) {\r\n      // loop attribute names - Description, Name, ...\r\n      for (const [attributeName, valueDto] of Object.entries(attributeDto)) {\r\n        attributes[attributeName] = EavField.dtoToEav(valueDto, typeName);\r\n      }\r\n    }\r\n    return attributes;\r\n  }\r\n\r\n  static mergeSettings(metadataItems: EavEntity[]): EavEntityAttributes {\r\n    if (metadataItems == null)\r\n      return {};\r\n\r\n    const merged: EavEntityAttributes = {};\r\n    // copy metadata settings which are not @All\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id === '@All')\r\n        continue;\r\n\r\n      for (const [name, value] of Object.entries(item.Attributes)) {\r\n        const copy: EavField<any> = { ...value };\r\n        merged[name] = copy;\r\n      }\r\n    }\r\n\r\n    // copy @All metadata settings, overwriting previous settings\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id !== '@All')\r\n        continue;\r\n\r\n      for (const [name, value] of Object.entries(item.Attributes)) {\r\n        // do not overwrite previous settings if @All is empty\r\n        const exists = merged[name] != null;\r\n        const emptyAll = value.Values[0].value === '';\r\n        if (exists && emptyAll) \r\n          continue;\r\n\r\n        const copy: EavField<any> = { ...value };\r\n        merged[name] = copy;\r\n      }\r\n    }\r\n    return merged;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LanguagePart } from '../../edit/dialog/header/language-settings-dialog/LanguageDropdown/language-part.enum';\r\nimport { DialogUiSettings, keySettings } from '../constants/session.constants';\r\nimport { StateManagerLocal } from '../user/state-manager';\r\n\r\nconst storeKey = 'user-language';\r\n\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UserLanguageService {\r\n\r\n  constructor() { }\r\n\r\n  #stateManager = new StateManagerLocal(storeKey);\r\n\r\n  /** Get the UI mixing url, stored etc. */\r\n  #config(part: LanguagePart, fallback?: string): { language: string, force: boolean } {\r\n    // Check if URL overrides everything\r\n    const fromUrl = this.#dialogUiSettings()?.[ part == LanguagePart.UI ? 'languageUi' : 'languageForm' ];\r\n    if (fromUrl?.endsWith('!'))\r\n      return { language: fromUrl.slice(0, -1), force: true };\r\n    return { language: this.stored(part) ?? fromUrl ?? fallback, force: false };\r\n  }\r\n\r\n  value(part: LanguagePart): string {\r\n    return this.#config(part).language;\r\n  }\r\n\r\n  /**\r\n   * Get the UI or Form as stored for the user, for the config-UI\r\n   * Important: can be an empty string! which must be returned as null.\r\n   */\r\n  stored(part: LanguagePart): string {\r\n    return this.#stateManager.get(part) || null;\r\n  }\r\n\r\n  /** Set the UI language in the store */\r\n  save(part: LanguagePart, language: string) {\r\n    this.#stateManager.add(part, language || null); // try to save null instead of \"\"\r\n  }\r\n\r\n  /** Get the code like 'en' or 'de' for setting the language */\r\n  uiCode(fallback?: string): string {\r\n    return this.#config(LanguagePart.UI, fallback)?.language?.toLocaleLowerCase().split('-')[0];\r\n  }\r\n\r\n  /**\r\n   * Return true/false for the PrimaryTranslatable option.\r\n   * If nothing stored, returns false.\r\n   */\r\n  primaryTranslatableEnabled(): boolean {\r\n    const stored = this.stored(LanguagePart.PrimaryTranslatable);\r\n    if (stored === null || stored === undefined) return false;\r\n    // stored might already be boolean serialized as string 'true'/'false'\r\n    if (typeof stored === 'string') {\r\n      return stored.toLowerCase() === 'true';\r\n    }\r\n    return !!stored;\r\n  }\r\n\r\n  /**\r\n   * Save the PrimaryTranslatable boolean flag.\r\n   * Stored as string 'true' or 'false' to keep compatibility with existing StateManagerLocal.\r\n   */\r\n  savePrimaryTranslatable(enabled: boolean) {\r\n    this.save(LanguagePart.PrimaryTranslatable, enabled ? 'true' : 'false');\r\n  }\r\n\r\n  isForced(part: LanguagePart): boolean {\r\n    return this.#config(part)?.force;\r\n  }\r\n\r\n  userConfigurable(): boolean {\r\n    const isConfigurable = this.#dialogUiSettings()?.languageUserSettings;\r\n    return isConfigurable !== false && isConfigurable !== \"false\";\r\n  }\r\n\r\n  // note: for now just here, if we need it more often\r\n  // create some service which caches the object instead of deserializing every time\r\n  #dialogUiSettings(): DialogUiSettings {\r\n    if (this.#uiSettingsCached)\r\n      return this.#uiSettingsCached;\r\n    const storedMaybeString = sessionStorage.getItem(keySettings);\r\n    return (!storedMaybeString)\r\n      ? null\r\n      : this.#uiSettingsCached = JSON.parse(storedMaybeString);\r\n  }\r\n  #uiSettingsCached?: DialogUiSettings;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { filter, map, Observable, shareReplay, switchMap } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { EntityLightIdentifier } from '../../../../../edit-types/src/EntityLight';\r\nimport { classLog } from '../logging';\r\nimport { HttpServiceBaseSignal } from './http-service-base-signal';\r\nimport { QueryService } from './query.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getEntities: false,\r\n  getAvailableEntities: false,\r\n  delete: false,\r\n};\r\n\r\nexport const webApiEntityRoot = 'admin/entity/';\r\nexport const webApiEntityList = 'admin/entity/list';\r\n\r\n@Injectable()\r\nexport class EntityService extends HttpServiceBaseSignal {\r\n\r\n  log = classLog({ EntityService }, logSpecs);\r\n\r\n  private queryService = transient(QueryService);\r\n\r\n  /**\r\n   * Get entities based on the content type name.\r\n   * As of 2024-04-29 only used in REST API.\r\n   * @param params\r\n   * @returns\r\n   */\r\n  getEntities$(params: Observable<{ contentTypeName: string }>): Observable<EntityLightIdentifier[]> {\r\n    this.log.fnIf('getEntities');\r\n    return params.pipe(\r\n      filter(p => p != null),\r\n      switchMap(p => this.getAvailableEntities(p.contentTypeName).pipe(shareReplay(1))),\r\n    );\r\n  }\r\n\r\n  private getAvailableEntities(contentTypeName: string, entitiesFilter?: string[]): Observable<EntityLightIdentifier[]> {\r\n    var log = this.log.fnIf('getAvailableEntities');\r\n    return this.queryService.getEntities({\r\n      contentTypes: [contentTypeName],\r\n      itemIds: entitiesFilter,\r\n      fields: 'Id,Guid,Title',\r\n      log: 'getAvailableEntities'\r\n    }).pipe(\r\n      map(data => data.Default)\r\n    );\r\n  }\r\n\r\n  delete(appId: number, contentType: string, entityId: number, force: boolean, parentId?: number, parentField?: string): Observable<null> {\r\n    this.log.fnIf('delete', { appId, contentType, entityId, force, parentId, parent });\r\n    return this.http.delete<null>(this.apiUrl(webApiEntityRoot + 'delete'), {\r\n      params: {\r\n        contentType,\r\n        id: entityId.toString(),\r\n        appId,\r\n        force: force.toString(),\r\n        ...(parentId && { parentId: parentId.toString() }),\r\n        ...(parentId && parentField && { parentField }),\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { Language } from '../../shared/models/language.model';\r\nimport { SignalStoreBase } from '../shared/store/signal-store-base';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LanguageService extends SignalStoreBase<string, Language> {\r\n\r\n  constructor() {\r\n    super(classLog({LanguageService}));\r\n  }\r\n\r\n  override getId = (item: Language) => item.NameId.toLocaleLowerCase();\r\n}\r\n","import { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nconst nodeEventEmitterMethods = ['addListener', 'removeListener'];\nconst eventTargetMethods = ['addEventListener', 'removeEventListener'];\nconst jqueryMethods = ['on', 'off'];\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs(resultSelector));\n    }\n    const [add, remove] = isEventTarget(target)\n        ? eventTargetMethods.map((methodName) => (handler) => target[methodName](eventName, handler, options))\n        :\n            isNodeStyleEventEmitter(target)\n                ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName))\n                : isJQueryStyleEventEmitter(target)\n                    ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName))\n                    : [];\n    if (!add) {\n        if (isArrayLike(target)) {\n            return mergeMap((subTarget) => fromEvent(subTarget, eventName, options))(innerFrom(target));\n        }\n    }\n    if (!add) {\n        throw new TypeError('Invalid event target');\n    }\n    return new Observable((subscriber) => {\n        const handler = (...args) => subscriber.next(1 < args.length ? args : args[0]);\n        add(handler);\n        return () => remove(handler);\n    });\n}\nfunction toCommonHandlerRegistry(target, eventName) {\n    return (methodName) => (handler) => target[methodName](eventName, handler);\n}\nfunction isNodeStyleEventEmitter(target) {\n    return isFunction(target.addListener) && isFunction(target.removeListener);\n}\nfunction isJQueryStyleEventEmitter(target) {\n    return isFunction(target.on) && isFunction(target.off);\n}\nfunction isEventTarget(target) {\n    return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}\n","import { Injectable } from '@angular/core';\r\nimport { AdamItem } from '../../../../../../edit-types/src/AdamItem';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { PrefetchAdams } from '../../dialog/main/edit-dialog-main.models';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AdamCacheService extends SignalStoreBase<string, AdamSnapshot> {\r\n\r\n  constructor() {\r\n    super(classLog({AdamCacheService}));\r\n  }\r\n\r\n  override getId = (item: AdamSnapshot) => item.Guid;\r\n\r\n  loadPrefetch(prefetchAdams: PrefetchAdams): void {\r\n    if (prefetchAdams == null)\r\n      return; \r\n\r\n    const snapshots = Object.entries(prefetchAdams)\r\n      .map(([entityGuid, attributes]) => ({\r\n        Guid: entityGuid,\r\n        Attributes: attributes,\r\n      } satisfies AdamSnapshot));\r\n    this.addMany(snapshots);\r\n  }\r\n\r\n  getAdamSnapshot(entityGuid: string, fieldName: string): AdamItem[] {\r\n    return this.cache()[entityGuid]?.Attributes[fieldName];\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\ninterface AdamSnapshot {\r\n  Guid: string;\r\n  Attributes: AdamSnapshotAttributes;\r\n}\r\n\r\ninterface AdamSnapshotAttributes {\r\n  [name: string]: AdamItem[];\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AdamItem } from '../../../../../../edit-types/src/AdamItem';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { LinkInfo, PrefetchAdams, PrefetchLinks } from '../../dialog/main/edit-dialog-main.models';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\n\r\n/**\r\n * The link Cache will store info to all links incl. file references (ADAM)\r\n * to provide previews and link-resolution (eg. file:72 = /assets/icon.jpg)\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class LinkCacheService extends SignalStoreBase<string, LinkCache> {\r\n\r\n  constructor() {\r\n    super(classLog({LinkCacheService}));\r\n  }\r\n\r\n  override getId = (item: LinkCache) => item.key.trim().toLocaleLowerCase();\r\n\r\n  addPrefetch(prefetchLinks: PrefetchLinks, prefetchAdam: PrefetchAdams): void {\r\n\r\n    // Convert PrefetchLinks to LinkCache\r\n    const links: LinkCache[] = prefetchLinks\r\n      ? Object.entries(prefetchLinks)\r\n          .map(([key, linkInfo]) => ({ key, ...linkInfo }))\r\n      : [];\r\n\r\n    // Convert PrefetchAdam to LinkCache\r\n    // This is more complex, as the raw data is nested\r\n    const adamLinkList: LinkCache[] = prefetchAdam != null\r\n      ? Object.entries(prefetchAdam)\r\n          .flatMap(([_, prefetchFields]) => Object.entries(prefetchFields)\r\n            .flatMap(([__, items]) => this.adamToLinks(items))\r\n          )\r\n      : [];\r\n\r\n    this.addMany([ ...links, ...adamLinkList ]);\r\n  }\r\n\r\n  /** Add a new ADAM which was just uploaded */\r\n  addAdam(items: AdamItem[]): void {\r\n    this.addMany(this.adamToLinks(items));\r\n  }\r\n\r\n  /** Add a link which was just added (typed/selected) in the UI */\r\n  addLink(key: string, linkInfo: LinkInfo): void {\r\n    key = key.trim().toLocaleLowerCase();\r\n    const link: LinkCache = {\r\n      key,\r\n      ...linkInfo,\r\n      Adam: {\r\n        ...linkInfo.Adam,\r\n      },\r\n    } satisfies LinkCache;\r\n\r\n    this.add(link);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  private adamToLinks(items: AdamItem[]): LinkCache[] {\r\n    return items\r\n      .filter(item => !item.IsFolder)\r\n      .map(item => ({\r\n        key: item.ReferenceId,\r\n        Adam: { ...item },\r\n        Value: item.Url,\r\n      } satisfies LinkCache));\r\n  }\r\n}\r\n\r\n\r\ninterface LinkCache extends LinkInfo{\r\n  key: string;\r\n}\r\n","import { EavEntityBundleDto } from \"../shared/models/json-format-v1\";\r\n\r\n/**\r\n * Replaces the Adam portal URL in all <img> tags within the content fields with the given orgAdamPortalUrl (if it differs).\r\n * @param data Array of EavEntityBundleDto objects containing HTML content.\r\n * @param orgAdamPortalUrl The desired Adam portal URL to be used.\r\n * @returns The modified array with the correct Adam portal URLs.\r\n */\r\nexport function correctAdamFolderBasePath(\r\n    data: EavEntityBundleDto[],\r\n    orgAdamPortalUrl: string\r\n): EavEntityBundleDto[] {\r\n    const imgTagRegex = /<img\\b[^>]*?\\bdata-cmsid=[\"'][^\"']+[\"'][^>]*?>/gi;\r\n\r\n    data.forEach(entityBundle => {\r\n        const content = entityBundle.Entity?.Attributes?.String?.Content;\r\n        if (typeof content !== 'object') return;\r\n\r\n        Object.entries(content).forEach(([lang, htmlValue]) => {\r\n            let html = decodeHtml(htmlValue as string); // Unescape HTML if needed\r\n\r\n            // Replace all <img> tags that have a different Adam portal URL\r\n            html = html.replace(imgTagRegex, imgTag => {\r\n                const srcMatch = imgTag.match(/\\bsrc=[\"']([^\"']+)[\"']/);\r\n                if (!srcMatch) return imgTag;\r\n\r\n                const imgSrc = srcMatch[1];\r\n                const currentAdamUrl = extractAdamPortalUrl(imgSrc);\r\n\r\n                // Only replace if the Adam portal URL actually differs\r\n                if (currentAdamUrl && currentAdamUrl !== orgAdamPortalUrl) {\r\n                    const updatedSrc = imgSrc.replace(currentAdamUrl, orgAdamPortalUrl);\r\n                    return imgTag.replace(imgSrc, updatedSrc);\r\n                }\r\n                return imgTag;\r\n            });\r\n\r\n            // Write the potentially modified HTML code back to the object\r\n            (entityBundle.Entity.Attributes.String.Content as Record<string, string>)[lang] = html;\r\n        });\r\n    });\r\n\r\n    return data;\r\n}\r\n\r\n/**\r\n * Decodes HTML entities to normal characters.\r\n * @param html A string that may contain HTML entities.\r\n * @returns The decoded string.\r\n */\r\nexport function decodeHtml(html: string): string {\r\n    const textarea = document.createElement('textarea');\r\n    textarea.innerHTML = html;\r\n    return textarea.value;\r\n}\r\n\r\n/**\r\n * Extracts the Adam portal URL prefix up to and including \"/adam/\" from an image source URL.\r\n * @param src The full image source (e.g. https://example.org/adam/xyz/abc.jpg)\r\n * @returns The Adam portal URL prefix or null if not found.\r\n */\r\nexport function extractAdamPortalUrl(src: string): string | null {\r\n    const adamSegment = '/adam/';\r\n    const idx = src.indexOf(adamSegment);\r\n    return idx !== -1\r\n        ? src.substring(0, idx + adamSegment.length)\r\n        : null;\r\n}","import { Injectable } from '@angular/core';\r\nimport { map, tap } from 'rxjs';\r\nimport { classLog } from '../../shared/logging';\r\nimport { GlobalConfigService } from '../../shared/services/global-config.service';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { EavEditLoadDto, SaveEavFormData } from '../dialog/main/edit-dialog-main.models';\r\nimport { SaveResult } from '../state/save-result.model';\r\n\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  fetchFormData: false,\r\n  saveFormData: false,\r\n};\r\n\r\nconst webApiLoad = 'cms/edit/load';\r\nconst webApiSave = 'cms/edit/save';\r\n\r\n@Injectable()\r\nexport class FormDataService extends HttpServiceBaseSignal {\r\n\r\n  log = classLog({FormDataService}, logSpecs);\r\n\r\n  constructor(\r\n    private globalConfigService: GlobalConfigService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  fetchFormData(items: string) {\r\n    this.log.fnIf('fetchFormData', { items, context: this.context });\r\n    return this.http.post<EavEditLoadDto>(this.apiUrl(webApiLoad), items, {\r\n      params: { appId: this.appId }\r\n    }).pipe(\r\n      map(formData => {\r\n        formData.Context.Language.List = formData.Context.Language.List.filter(language => language.IsEnabled);\r\n        return formData;\r\n      }),\r\n      tap(formData => {\r\n        this.globalConfigService.allowDebug(formData.Context.Enable.DebugMode);\r\n      }),\r\n    );\r\n  }\r\n\r\n  saveFormData(result: SaveEavFormData, partOfPage: string) {\r\n    this.log.fnIf('saveFormData', { result, partOfPage });\r\n    return this.http.post<SaveResult>(this.apiUrl(webApiSave), result, {\r\n      params: { appId: this.appId, partOfPage }\r\n    });\r\n  }\r\n}\r\n","import { Of } from '../../../../../../core';\r\nimport { AdamItem } from '../../../../../../edit-types/src/AdamItem';\r\nimport { DialogContext } from '../../../app-administration/models';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { InputTypeMetadata } from '../../../shared/fields/input-type-metadata.model';\r\nimport { EavContentType, EavEntity } from '../../shared/models/eav';\r\nimport { EavContentTypeDto, EavEntityBundleDto, EavEntityDto } from '../../shared/models/json-format-v1';\r\n\r\nexport interface EavPublishStatus {\r\n  DraftShouldBranch: boolean;\r\n  IsPublished: boolean;\r\n}\r\n\r\nexport interface PublishStatus extends EavPublishStatus {\r\n  formId: number;\r\n}\r\n\r\n/** PublishMode is short version of PublishStatus */\r\nexport const PublishModes = {\r\n  Show: 'show',\r\n  Hide: 'hide',\r\n  Branch: 'branch',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n\r\nexport type RequiredFeatures = Record<Of<typeof FeatureNames>, string[]>;\r\n\r\nexport interface EavEditLoadDto extends EavPublishStatus {\r\n  ContentTypeItems: EavEntityDto[];\r\n  ContentTypes: EavContentTypeDto[];\r\n  Context: DialogContext;\r\n  InputTypes: InputTypeMetadata[];\r\n  Items: EavEntityBundleDto[];\r\n  Prefetch?: Prefetch;\r\n  Settings: EditSettingsDto;\r\n  RequiredFeatures?: RequiredFeatures;\r\n}\r\n\r\nexport interface EditSettings {\r\n  Values: Record<string, unknown>;\r\n  /** SettingsEntities are important for more advanced settings such as WYSIWYG */\r\n  Entities: EavEntity[];\r\n  /**\r\n   * ContentTypes which are additional settings.\r\n   * New v17 to help Pickers figure out the best title for new-entities.\r\n   * TODO: @SDV\r\n   */\r\n  ContentTypes: EavContentType[];\r\n}\r\n\r\n/** Same interface, but with Dto property types on Entities and ContentTypes */\r\nexport interface EditSettingsDto {\r\n  Values: Record<string, unknown>;\r\n  Entities: EavEntityDto[];\r\n  /**\r\n   * ContentTypes which are additional settings.\r\n   * New v17 to help Pickers figure out the best title for new-entities.\r\n   * TODO: @SDV\r\n   */\r\n  ContentTypes: EavContentTypeDto[];\r\n}\r\n\r\nexport interface SaveEavFormData extends EavPublishStatus {\r\n  Items: EavEntityBundleDto[];\r\n}\r\n\r\nexport interface Prefetch {\r\n  Adam: PrefetchAdams;\r\n\r\n  // #RemovePickerDataCacheService\r\n  // /**\r\n  //  * Entities for dropdowns which were already selected\r\n  //  * TODO: AS OF 2024-08-27 it is not in use any more, so we should either\r\n  //  * - remove from the backend\r\n  //  * - rethink what we do/improve\r\n  //  */\r\n  // Entities: PrefetchEntity[];\r\n  Links: PrefetchLinks;\r\n\r\n  /** NgRx store helper */\r\n  _guid?: string;\r\n}\r\n\r\nexport interface PrefetchAdams {\r\n  [entityGuid: string]: {\r\n    [fieldName: string]: AdamItem[];\r\n  };\r\n}\r\n\r\nexport interface PrefetchLinks {\r\n  [key: string]: LinkInfo;\r\n}\r\n\r\nexport interface LinkInfo {\r\n  /** Null if URL doesn't resolve to ADAM file (is page, external url or blocked by permissions) */\r\n  Adam?: AdamItem;\r\n  /** Resolved or original URL */\r\n  Value: string;\r\n}\r\n","import { Injectable, Signal } from '@angular/core';\r\nimport { Of } from '../../../../../core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { EavPublishStatus, PublishModes, PublishStatus } from '../dialog/main/edit-dialog-main.models';\r\nimport { SignalStoreBase } from '../shared/store/signal-store-base';\r\nimport { FormConfigService } from './form-config.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class FormPublishingService extends SignalStoreBase<number, PublishStatus> {\r\n  \r\n  constructor() {\r\n    super(classLog({FormPublishingService}));\r\n  }\r\n\r\n  override getId = (item: PublishStatus) => item.formId;\r\n\r\n  setPublishMode(publishMode: Of<typeof PublishModes>, formId: number, eavService: FormConfigService): void {\r\n    // if publish mode is prohibited, set default\r\n    if (eavService.config.versioningOptions[publishMode] == null) {\r\n      publishMode = Object.keys(eavService.config.versioningOptions)[0] as Of<typeof PublishModes>;\r\n    }\r\n    const publishStatus: PublishStatus = {\r\n      formId,\r\n      DraftShouldBranch: publishMode === PublishModes.Branch,\r\n      IsPublished: publishMode === PublishModes.Show,\r\n    };\r\n    this.add(publishStatus);\r\n  }\r\n\r\n  getPublishMode(formId: number): Signal<Of<typeof PublishModes>> {\r\n    return this.#signalsPublishModeCache.getOrCreate(formId, () => this.toPublishMode(this.get(formId)));\r\n  }\r\n  #signalsPublishModeCache = new ComputedCacheHelper<number, Of<typeof PublishModes>>('publishMode');\r\n\r\n  \r\n  /** Convert the booleans to the appropriate \"verb\" */\r\n  public toPublishMode(publishStatus: EavPublishStatus): Of<typeof PublishModes> {\r\n    const publishMode: Of<typeof PublishModes> = publishStatus.DraftShouldBranch\r\n      ? PublishModes.Branch\r\n      : publishStatus.IsPublished\r\n        ? PublishModes.Show\r\n        : PublishModes.Hide;\r\n    return publishMode;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { LanguageService } from '../localization/language.service';\r\nimport { EntityReader } from '../shared/helpers/entity-reader';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { ItemService } from '../state/item.service';\r\nimport { FormConfigService } from './form-config.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  preserve: true,\r\n  get: true,\r\n};\r\n\r\n@Injectable()\r\nexport class InitialValuesService {\r\n  log = classLog({ InitialValuesService }, logSpecs);\r\n\r\n  #cache: Record<string, ItemValuesOfLanguage> = {};\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private languageService: LanguageService,\r\n  ) {\r\n    this.log.aIf('constructor', null, \"constructor\");\r\n  }\r\n\r\n  /**\r\n   * Preserve initial values for future use in formulas which may need to know the initial value\r\n   */\r\n  preserve(): void {\r\n    const l = this.log.fnIf('preserve');\r\n    const items = this.itemService.getMany(this.formConfig.config.itemGuids);\r\n\r\n    const allLangs = this.languageService.getAll().map(language => language.NameId);\r\n    const language = this.formConfig.language();\r\n    if (!allLangs.includes(language.current))\r\n      allLangs.push(language.current);\r\n    if (!allLangs.includes(language.primary))\r\n      allLangs.push(language.primary);\r\n\r\n    for (const item of items)\r\n      for (const currentLang of allLangs) {\r\n        const formValues = new EntityReader(currentLang, language.primary).currentValues(item.Entity.Attributes);\r\n        const cacheKey = this.#cacheKey(item.Entity.Guid, currentLang);\r\n        this.#cache[cacheKey] = formValues;\r\n      }\r\n\r\n  }\r\n\r\n  #cacheKey(entityGuid: string, language: string): string {\r\n    return `entityGuid:${entityGuid}:language:${language}`;\r\n  }\r\n\r\n  get(entityGuid: string, language: string): ItemValuesOfLanguage {\r\n    const l = this.log.fnIf('get', { entityGuid, language });\r\n    const result = this.#cache[this.#cacheKey(entityGuid, language)];\r\n    return l.r(result);\r\n  }\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { InputTypeHelpers } from '../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../shared/logging';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldSettingsHelpersManager } from '../fields/logic/field-settings-helpers-manager';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { LanguageService } from '../localization/language.service';\r\nimport { ContentTypeService } from '../shared/content-types/content-type.service';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { InputTypeService } from '../shared/input-types/input-type.service';\r\nimport { FieldsSettingsHelpers } from '../state/field-settings.helper';\r\nimport { ItemService } from '../state/item.service';\r\nimport { FormConfigService } from './form-config.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  initMissingValues: true,\r\n  fields: [...DebugFields, 'releases'],\r\n};\r\n\r\n/**\r\n * Special service to initialize missing values in the edit form.\r\n * This is used to set default values for fields which are empty or null.\r\n * It also handles complex initialization logic based on the available languages and input types.\r\n * \r\n * Note that it does use the ItemService to update the items, so it has a side-effect.\r\n */\r\n@Injectable()\r\nexport class InitializeMissingValuesServices {\r\n  log = classLog({InitializeMissingValuesServices}, logSpecs);\r\n  \r\n  // This is a helper class to initialize the missing values services\r\n  // It is used in the EditInitializerService to initialize the missing values services\r\n  // It is not used anywhere else, but it is a good practice to keep it in a separate file\r\n  // for better readability and maintainability.\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private inputTypeService: InputTypeService,\r\n    private contentTypeService: ContentTypeService,\r\n    private languageService: LanguageService,\r\n  ) { }\r\n\r\n  initMissingValues(): boolean {\r\n    const lMain = this.log.fnIf('initMissingValues');\r\n\r\n    const updater = this.itemService.updater;\r\n    const eavConfig = this.formConfig.config;\r\n    const items = this.itemService.getMany(eavConfig.itemGuids);\r\n    const inputTypes = this.inputTypeService.getAll();\r\n    const languages = this.languageService.getAll();\r\n    const language = this.formConfig.language();\r\n    const logicManager = FieldSettingsHelpersManager.singleton();\r\n\r\n    /** force UI to switch to default language, because some values are missing in the default language */\r\n    let switchToDefault = false;\r\n    const isCreateMode = eavConfig.createMode;\r\n\r\n    const fss = new FieldsSettingsHelpers(\"EditInitializerService\");\r\n\r\n    for (const item of items) {\r\n      const contentType = this.contentTypeService.getContentTypeOfItem(item);\r\n\r\n      for (const ctAttribute of contentType.Attributes) {\r\n        const currentName = ctAttribute.Name;\r\n        const l = this.log.fnIfInFields('initMissingValues', currentName);\r\n\r\n        const inputType = inputTypes.find(i => i.Type === ctAttribute.InputType);\r\n        const isEmptyType = InputTypeHelpers.isEmpty(inputType?.Type);\r\n        l.a(`Attribute: '${currentName}' InputType: '${inputType?.Type}' isEmptyType: '${isEmptyType}'`);\r\n\r\n        if (isEmptyType)\r\n          continue;\r\n\r\n        const logic = logicManager.get(inputType?.Type);\r\n\r\n        const attributeValues = item.Entity.Attributes[ctAttribute.Name];\r\n        const fieldSettings = fss.getDefaultSettings(\r\n          new EntityReader(language.primary, language.primary).flatten(ctAttribute.Metadata)\r\n        );\r\n\r\n        // The type is needed for empty checks\r\n        const fieldType = ctAttribute.InputType.split('-')[0];\r\n\r\n        if (languages.length === 0) {\r\n          l.a(`${currentName} languages none, simple init`);\r\n          const firstValue = new FieldReader(attributeValues, '*').currentOrDefaultOrAny?.value;\r\n\r\n          // console.log('2dm: empty values no lang', { item, ctAttribute, firstValue, isCreateMode });\r\n\r\n          if (logic.isValueEmpty(fieldType, firstValue, isCreateMode))\r\n            updater.setDefaultValue(item, ctAttribute, inputType, fieldSettings, languages, language.primary);\r\n        } else {\r\n          l.a(`${currentName} languages many, complex init`);\r\n\r\n          // check if there is a value for the generic / all language\r\n          const disableI18n = inputType?.DisableI18n;\r\n          const noLanguageValue = new FieldReader(attributeValues, '*').currentOrDefault?.value;\r\n          l.a(currentName, { disableI18n, noLanguageValue });\r\n          if (!disableI18n && noLanguageValue !== undefined) {\r\n            // move * value to defaultLanguage\r\n            const transactionItem = updater.removeItemAttributeDimension(item.Entity.Guid, ctAttribute.Name, '*', true);\r\n            updater.addItemAttributeValue(\r\n              item.Entity.Guid,\r\n              ctAttribute.Name,\r\n              noLanguageValue,\r\n              language.primary,\r\n              false,\r\n              ctAttribute.Type,\r\n              false,\r\n              transactionItem,\r\n            );\r\n            l.a(`${currentName} exit`);\r\n            continue;\r\n          }\r\n\r\n          const defaultLanguageValue = new FieldReader(attributeValues, language.primary).currentOrDefault?.value;\r\n\r\n          const valueIsEmpty = logic.isValueEmpty(fieldType, defaultLanguageValue, isCreateMode);\r\n\r\n          // if (currentName === 'releases')\r\n          //   console.log('2dm: empty values langs', { currentName, item, ctAttribute, defaultLanguageValue, isCreateMode, valueIsEmpty });\r\n\r\n          l.a(currentName, { currentName, valueIsEmpty, defaultLanguageValue, isCreateMode });\r\n\r\n          // if (currentName === 'releases' && valueIsEmpty)\r\n          //   debugger;\r\n\r\n          if (valueIsEmpty) {\r\n            const valUsed = updater.setDefaultValue(item, ctAttribute, inputType, fieldSettings, languages, language.primary);\r\n\r\n            // 2022-08-15 2dm added this\r\n            // If we run into more problems (like required date-fields which result in null)\r\n            // we may have to update the logic to use FieldLogicBase and add rules for each type what would be valid\r\n            // or test for IsRequired as well\r\n\r\n            // If the primary language isn't ready, enforce switch-to-default\r\n            // Skip this for ephemeral fields as they never load with content\r\n            // Also switch for fields which use null as default (like boolean-tristate) as this kind of \"empty\" is valid\r\n            if (valUsed != null && !fieldSettings.IsEphemeral)\r\n              switchToDefault = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return lMain.r(switchToDefault);\r\n  }\r\n\r\n}","import { classLog } from '../../shared/logging';\r\nimport { ItemIdentifier } from '../../shared/models/edit-form.model';\r\nimport { EavEntityBundleDto } from '../shared/models/json-format-v1';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  mergeResponse: true,\r\n};\r\n\r\n/**\r\n * This helps to make items data smaller (for retrieving data),\r\n * and then rejoin the returned data with the parts which were not sent.\r\n * \r\n * Note that as of 2026-01-08 it's not in use any more, but may be useful later.\r\n * It was previously created to transport js-only objects to the edit ui to bypass the url.\r\n * But now it is in the url, so it's not relevant any more.\r\n */\r\nexport class ItemsRequestRestoreHelper {\r\n\r\n  log = classLog({ ItemsRequestRestoreHelper }, logSpecs );\r\n\r\n  constructor(items: ItemIdentifier[], private contentsOverride?: Record<string, unknown>[]) {\r\n    // Add ClientId index number to request,\r\n    // so it can be matched again when the response comes back\r\n    this.itemsWithIndex = items.map((item, index) => ({\r\n      ...item,\r\n      clientId: index,\r\n    }));\r\n  }\r\n\r\n  private itemsWithIndex: (ItemIdentifier & { clientId: number })[];\r\n\r\n  itemsForRequest() {\r\n    const cleaned = this.itemsWithIndex.map((item) => {\r\n      // Drop properties which are not needed for the request\r\n      const { Prefill, ClientData, ...cleaned } = item;\r\n      return cleaned;\r\n    });\r\n    return cleaned;\r\n  }\r\n\r\n  mergeResponse(result: EavEntityBundleDto[]): EavEntityBundleDto[] {\r\n    const l = this.log.fnIf('mergeResponse', { result, itemsWithIndex: this.itemsWithIndex });\r\n    // Merge the response with the original items\r\n    const merged = result.map(item => {\r\n      // try to find original item\r\n      const original = this.itemsWithIndex.find(i => i.clientId === item.Header.clientId);\r\n      l.a('fetchFormData - remix', { item, original });\r\n\r\n      return {\r\n        ...item,\r\n        Header: {\r\n          ...item.Header,\r\n          Prefill: original?.Prefill,\r\n          ClientData: {\r\n            ...original?.ClientData,\r\n          },\r\n        },\r\n      } satisfies EavEntityBundleDto;\r\n    });\r\n    return l.r(merged);\r\n  }\r\n}","import { Injectable, signal } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../core';\r\nimport { FeaturesService } from '../../features/features.service';\r\nimport { Update$2sxcEnvFromContext } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { convertUrlToForm } from '../../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemAddIdentifier } from '../../shared/models/edit-form.model';\r\nimport { UserLanguageService } from '../../shared/services/user-language.service';\r\nimport { calculateIsParentDialog, sortLanguages } from '../dialog/main/edit-dialog-main.helpers';\r\nimport { EavEditLoadDto, EditSettings } from '../dialog/main/edit-dialog-main.models';\r\nimport { LanguageService } from '../localization/language.service';\r\nimport { EditUrlParams } from '../routing/edit-url-params.model';\r\nimport { AdamCacheService } from '../shared/adam/adam-cache.service';\r\nimport { LinkCacheService } from '../shared/adam/link-cache.service';\r\nimport { ContentTypeItemService } from '../shared/content-types/content-type-item.service';\r\nimport { ContentTypeService } from '../shared/content-types/content-type.service';\r\nimport { InputTypeService } from '../shared/input-types/input-type.service';\r\nimport { EavContentType } from '../shared/models/eav/eav-content-type';\r\nimport { EavEntity } from '../shared/models/eav/eav-entity';\r\nimport { ItemService } from '../state/item.service';\r\nimport { correctAdamFolderBasePath, extractAdamPortalUrl } from './correctAdamUrl';\r\nimport { FormConfigService } from './form-config.service';\r\nimport { FormDataService } from './form-data.service';\r\nimport { FormLanguageService } from './form-language.service';\r\nimport { FormPublishingService } from './form-publishing.service';\r\nimport { InitialValuesService } from './initial-values-service';\r\nimport { InitializeMissingValuesServices } from './initialize-missing-values-services';\r\nimport { ItemsRequestRestoreHelper } from './items-request-restore-helper';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  fetchFormData: false,\r\n  dataFromDialog: false,\r\n  importLoadedData: false,\r\n  initMissingValues: false,\r\n};\r\n\r\n/**\r\n * Service to initialize an edit form. Will:\r\n * - Load form data\r\n * - store it in various services, stores etc.\r\n * - Load initial values for formulas\r\n */\r\n@Injectable()\r\nexport class EditInitializerService {\r\n\r\n  log = classLog({ EditInitializerService }, logSpecs);\r\n\r\n  public loaded = signal(false);\r\n\r\n  #formDataService = transient(FormDataService);\r\n\r\n  #userLanguageSvc = transient(UserLanguageService);\r\n  #initMissingValuesSvc = transient(InitializeMissingValuesServices);\r\n\r\n  adamPortalUrl = signal<string | null>(null);\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private inputTypeService: InputTypeService,\r\n    private contentTypeItemService: ContentTypeItemService,\r\n    private contentTypeService: ContentTypeService,\r\n    private publishStatusService: FormPublishingService,\r\n    private translate: TranslateService,\r\n    private languageService: LanguageService,\r\n    private languageStore: FormLanguageService,\r\n    private snackBar: MatSnackBar,\r\n    private adamCacheService: AdamCacheService,\r\n    private linkCacheService: LinkCacheService,\r\n    private featuresService: FeaturesService,\r\n    private initialValuesService: InitialValuesService,\r\n  ) {\r\n    this.log.aIf('constructor', null, \"constructor\");\r\n\r\n  }\r\n\r\n  /**\r\n   * Fetch the form data from the backend and load it into the various services.\r\n   * This will also set the form config and language.\r\n   */\r\n  fetchFormData(): void {\r\n    const l = this.log.fnIf('fetchFormData');\r\n    const d = this.log.fnIf('dataFromDialog');\r\n\r\n    const itemsRaw = (this.route.snapshot.params as EditUrlParams).items;\r\n\r\n    const items = convertUrlToForm(itemsRaw).items;\r\n\r\n    // Reduce amount of data sent to backend by removing unneeded properties\r\n    // Note: 2026-01-08 2dm - not really used any more, as the mechanisms now use a url parameter for data\r\n    // Leave the object in though, in case we want to use it again later for other data\r\n    const dataHelper = new ItemsRequestRestoreHelper(items, null);\r\n\r\n    const requestItems = dataHelper.itemsForRequest();\r\n\r\n    l.a('fetchFormData', { requestItems });\r\n\r\n    this.#formDataService\r\n      .fetchFormData(JSON.stringify(requestItems))\r\n      .subscribe((responseRaw: EavEditLoadDto) => {\r\n\r\n        // Set Adam Portal URL to check with the WYSIWYG editor \r\n        const links = responseRaw?.Prefetch?.Links;\r\n        const linkValues = links && typeof links === 'object' ? Object.values(links) : [];\r\n        const fullUrl = linkValues.length > 0 && linkValues[0]?.Value ? linkValues[0].Value : undefined;\r\n        if (fullUrl)\r\n          this.adamPortalUrl.set(extractAdamPortalUrl(fullUrl));\r\n\r\n        // Restore prefill and client-data from original\r\n        const response: EavEditLoadDto = {\r\n          ...responseRaw,\r\n          Items: dataHelper.mergeResponse(responseRaw.Items),\r\n        };\r\n\r\n        l.a('fetchFormData - after remix', { response });\r\n\r\n        // Load all the feature infos and also mark the ones which the response says are required\r\n        this.featuresService.load(response.Context, response);\r\n\r\n        // Transfer any relevant context data to the $2sxc env for future backend calls\r\n        Update$2sxcEnvFromContext(response.Context.App);\r\n\r\n\r\n        // Import the loaded data into the various services\r\n        this.#importLoadedData(response);\r\n\r\n        // Remember initial values as the formulas sometimes need them\r\n        this.initialValuesService.preserve();\r\n\r\n        // After preserving original values, initialize missing values in the form\r\n        this.#initMissingValues();\r\n\r\n        // Set the form as loaded to trigger the UI to be built\r\n        this.loaded.set(true);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Import the loaded data into the various services and stores.\r\n   * This will also set the form config and language.\r\n   * @param loadDto The loaded data from the backend\r\n   */\r\n  #importLoadedData(loadDto: EavEditLoadDto): void {\r\n    const l = this.log.fnIf('importLoadedData');\r\n\r\n    const formId = Math.floor(Math.random() * 99999);\r\n    const isParentDialog = calculateIsParentDialog(this.route);\r\n\r\n    // Check the Adam Portal URL and adjust the items if necessary (Export App / Import App)\r\n    if (this.adamPortalUrl()) {\r\n      loadDto.Items = correctAdamFolderBasePath(loadDto.Items, this.adamPortalUrl());\r\n      l.a('importLoadedData - checkAdamFolder', { items: loadDto.Items });\r\n    }\r\n\r\n    // Load data into the ItemsService; will convert the data to the correct type\r\n    this.itemService.loadItems(loadDto.Items);\r\n\r\n    // Load InputTypes, ContentTypes and any items which the ContentTypes depend on\r\n    // Note: we assume that input type and content type data won't change between loading parent and child forms\r\n    this.inputTypeService.addMany(loadDto.InputTypes);\r\n    this.contentTypeItemService.addContentTypeItems(loadDto.ContentTypeItems);\r\n    this.contentTypeService.addContentTypes(loadDto.ContentTypes);\r\n\r\n    // Load prefetched data for Adam and Links\r\n    this.adamCacheService.loadPrefetch(loadDto.Prefetch?.Adam);\r\n    this.linkCacheService.addPrefetch(loadDto.Prefetch?.Links, loadDto.Prefetch?.Adam);\r\n\r\n    // Get the (converted) items and set the form config\r\n    const itemGuids = loadDto.Items.map(item => item.Entity.Guid);\r\n    const items = this.itemService.getMany(itemGuids);\r\n\r\n    // Determine what edit-mode we are in, if we are copying an item, if we should enable history etc.\r\n    const createMode = items[0].Entity.Id === 0;\r\n    const isCopy = (items[0].Header as ItemAddIdentifier).DuplicateEntity != null;\r\n    const enableHistory = !createMode && this.route.snapshot.data.history !== false;\r\n\r\n    // Load the form config with the loaded settings\r\n    const settingsAsEav: EditSettings = {\r\n      ...loadDto.Settings,\r\n      // Include / pre-convert settings entities for certain features which need detailed settings\r\n      Entities: EavEntity.dtoToEavMany(loadDto.Settings.Entities),\r\n      // Include / pre-convert content types for certain features which need detailed settings\r\n      ContentTypes: EavContentType.dtoToEavMany(loadDto.Settings.ContentTypes),\r\n    };\r\n    this.formConfig.initFormConfig(loadDto.Context, formId, isParentDialog, itemGuids, createMode, isCopy, enableHistory, settingsAsEav);\r\n\r\n    // Determine languages we should use and inform the language service about them\r\n    // also switch the UI / translate service to the current language\r\n    // Note: the TranslateService is a new instance for every form and language must be set for every one of them\r\n    var langs = loadDto.Context.Language;\r\n    const userLangCode = this.#userLanguageSvc.uiCode(langs.Current);\r\n    this.translate.use(userLangCode);\r\n\r\n    // load language data only for parent dialog to not overwrite languages when opening child dialogs\r\n    if (isParentDialog) {\r\n      const sortedLanguages = sortLanguages(langs.Primary, langs.List);\r\n      this.languageService.addMany(sortedLanguages);\r\n    }\r\n    this.languageStore.addForm(formId, langs.Primary, langs.Current, false);\r\n\r\n    // Get proper publishMode and then run checks if this mode is allowed\r\n    const publishMode = this.publishStatusService.toPublishMode(loadDto);\r\n    this.publishStatusService.setPublishMode(publishMode, formId, this.formConfig);\r\n  }\r\n\r\n  /**\r\n   * Initialize missing values in the form.\r\n   * If necessary, also switch the UI to the default language.\r\n   */\r\n  #initMissingValues(): void {\r\n    const l = this.log.fnIf('initMissingValues');\r\n\r\n    const switchToDefault = this.#initMissingValuesSvc.initMissingValues();\r\n    const language = this.formConfig.language();\r\n\r\n    if (switchToDefault && language.current !== language.primary) {\r\n      const formId = this.formConfig.config.formId;\r\n      this.languageStore.setCurrent(formId, language.primary);\r\n      const message = this.translate.instant('Message.SwitchedLanguageToDefault', { language: language.primary });\r\n      this.snackBar.open(message, null, { duration: 5000 });\r\n    }\r\n  }\r\n}\r\n","import { ActivatedRoute } from '@angular/router';\r\nimport { Language } from '../../form/form-languages.model';\r\n\r\nexport function calculateIsParentDialog(route: ActivatedRoute) {\r\n  let editDialogCount = 0;\r\n  for (const path of route.snapshot.pathFromRoot) {\r\n    if (path.url.length <= 0) continue;\r\n    for (const urlSegment of path.url) {\r\n      if (urlSegment.path !== 'edit') continue;\r\n      editDialogCount++;\r\n    }\r\n  }\r\n  return editDialogCount === 1;\r\n}\r\n\r\nexport function sortLanguages(primaryLangKey: string, languages: Language[]) {\r\n  if (languages.length === 0) { return languages; }\r\n\r\n  let primaryLang: Language;\r\n  const sameLangs: Language[] = [];\r\n  const otherLangs: Language[] = [];\r\n  for (const language of languages) {\r\n    if (language.NameId === primaryLangKey) {\r\n      primaryLang = language;\r\n    } else if (language.NameId.startsWith(primaryLangKey.split('-')[0])) {\r\n      sameLangs.push(language);\r\n    } else {\r\n      otherLangs.push(language);\r\n    }\r\n  }\r\n  sameLangs.sort((a, b) => a.NameId.localeCompare(b.NameId));\r\n  otherLangs.sort((a, b) => a.NameId.localeCompare(b.NameId));\r\n\r\n  const allLangsSorted: Language[] = !primaryLang ? [...sameLangs, ...otherLangs] : [primaryLang, ...sameLangs, ...otherLangs];\r\n  return allLangsSorted;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavWindow } from '../../../shared/models/eav-window.model';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormConfiguration } from '../../form/form-configuration.model';\r\nimport { UrlHelpers } from '../helpers';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  load: true,\r\n  sortByType: false,\r\n  insertToDom: false,\r\n};\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport const FileTypeConstants = {\r\n  CSS: '.css',\r\n  JS: '.js',\r\n} as const;\r\n\r\ninterface LoadFile {\r\n  path: string;\r\n  type: string;\r\n  loaded: boolean;\r\n  domEl: HTMLLinkElement | HTMLScriptElement;\r\n}\r\n\r\n/**\r\n * Service for loading scripts and stylesheets dynamically for an edit form.\r\n * It must be different for each form, since it uses the form's configuration\r\n * to resolve paths pointing to the correct app, zone, etc.\r\n */\r\n@Injectable()\r\nexport class ScriptsLoaderService {\r\n\r\n  log = classLog({ScriptsLoaderService}, logSpecs);\r\n\r\n  #loadedFiles: LoadFile[] = [];\r\n\r\n  constructor(private formConfig: FormConfigService) { }\r\n\r\n  /** Loads CSS and JS files in order (CSS first) and calls callback function when finished */\r\n  load(scripts: string[], callback: () => void) {\r\n    this.log.fnIf('load', {scripts})\r\n    const sortedFiles = this.#sortByType(scripts);\r\n    this.#insertToDom(sortedFiles, callback, 0); // async, called again and again after each script is loaded\r\n  }\r\n\r\n  #sortByType(scripts: string[]): LoadFile[] {\r\n    this.log.fnIf('sortByType', {scripts})\r\n    const cssFiles: LoadFile[] = [];\r\n    const jsFiles: LoadFile[] = [];\r\n    scripts.forEach(script => {\r\n      const file: LoadFile = {\r\n        path: ScriptsLoaderService.resolveUrlTokens(script, this.formConfig.config),\r\n        type: null,\r\n        loaded: false,\r\n        domEl: null\r\n      };\r\n      if (file.path.endsWith(FileTypeConstants.CSS)) {\r\n        file.type = FileTypeConstants.CSS;\r\n        cssFiles.push(file);\r\n      } else if (file.path.endsWith(FileTypeConstants.JS)) {\r\n        file.type = FileTypeConstants.JS;\r\n        jsFiles.push(file);\r\n      }\r\n    });\r\n    return cssFiles.concat(jsFiles);\r\n  }\r\n\r\n  #insertToDom(files: LoadFile[], callback: () => void, increment: number) {\r\n    this.log.fnIf('insertToDom', {files, increment})\r\n    const file = files[increment];\r\n    increment++;\r\n    if (!file) {\r\n      callback();\r\n      return;\r\n    }\r\n    file.path = file.path + '?sxcver=' + window.sxcVersion; // break cache\r\n\r\n    const existing = this.#loadedFiles.find(loadedFile => loadedFile.path === file.path);\r\n    if (existing) {\r\n      if (existing.loaded) {\r\n        this.#insertToDom(files, callback, increment);\r\n      } else {\r\n        const _listener = () => {\r\n          file.loaded = true;\r\n          this.#insertToDom(files, callback, increment);\r\n          existing.domEl.removeEventListener('load', _listener);\r\n          existing.domEl.removeEventListener('error', _listener);\r\n        };\r\n        existing.domEl.addEventListener('load', _listener);\r\n        existing.domEl.addEventListener('error', _listener);\r\n      }\r\n    } else {\r\n      if (file.type === FileTypeConstants.CSS) {\r\n        file.domEl = document.createElement('link');\r\n        file.domEl.rel = 'stylesheet';\r\n        file.domEl.href = file.path;\r\n      } else if (file.type === FileTypeConstants.JS) {\r\n        file.domEl = document.createElement('script');\r\n        file.domEl.type = 'module';\r\n        file.domEl.src = file.path;\r\n      }\r\n\r\n      const _listener = () => {\r\n        file.loaded = true;\r\n        this.#insertToDom(files, callback, increment);\r\n        file.domEl.removeEventListener('load', _listener);\r\n        file.domEl.removeEventListener('error', _listener);\r\n      };\r\n      file.domEl.addEventListener('load', _listener);\r\n      file.domEl.addEventListener('error', _listener);\r\n\r\n      document.querySelector('head').appendChild(file.domEl);\r\n      this.#loadedFiles.push(file);\r\n    }\r\n  }\r\n\r\n  public static resolveUrlTokens(url: string, formConfig: FormConfiguration) {\r\n    return url.replace(/\\[System:Path\\]/i, UrlHelpers.getUrlPrefix('system', formConfig))\r\n      .replace(/\\[Zone:Path\\]/i, UrlHelpers.getUrlPrefix('zone', formConfig))\r\n      .replace(/\\[App:Path\\]/i, UrlHelpers.getUrlPrefix('app', formConfig))\r\n      .replace(/\\[App:PathShared\\]/i, UrlHelpers.getUrlPrefix('appShared', formConfig));\r\n  }\r\n}\r\n","import appleFilled from '!raw-loader!./2sxc/Material-Icon-Adam-48-filled.svg';\r\nimport appleOutlined from '!raw-loader!./2sxc/Material-Icon-Adam-48-outlined.svg';\r\nimport draftBranch from '!raw-loader!./font-awesome/draft-branch.svg';\r\nimport fileArchive from '!raw-loader!./font-awesome/file-archive.svg';\r\nimport fileAudio from '!raw-loader!./font-awesome/file-audio.svg';\r\nimport fileCode from '!raw-loader!./font-awesome/file-code.svg';\r\nimport fileExcel from '!raw-loader!./font-awesome/file-excel.svg';\r\nimport fileImage from '!raw-loader!./font-awesome/file-image.svg';\r\nimport filePdf from '!raw-loader!./font-awesome/file-pdf.svg';\r\nimport filePowerpoint from '!raw-loader!./font-awesome/file-powerpoint.svg';\r\nimport fileText from '!raw-loader!./font-awesome/file-text.svg';\r\nimport fileVideo from '!raw-loader!./font-awesome/file-video.svg';\r\nimport fileWord from '!raw-loader!./font-awesome/file-word.svg';\r\nimport file from '!raw-loader!./font-awesome/file.svg';\r\nimport folderPlus from '!raw-loader!./font-awesome/folder-plus.svg';\r\nimport folder from '!raw-loader!./font-awesome/folder.svg';\r\nimport sitemap from '!raw-loader!./font-awesome/sitemap.svg';\r\nimport { Injectable } from '@angular/core';\r\nimport { MatIconRegistry } from '@angular/material/icon';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Injectable()\r\nexport class LoadIconsService {\r\n  private icons: Record<string, string> = {\r\n    'apple-filled': appleFilled,\r\n    'apple-outlined': appleOutlined,\r\n    'draft-branch': draftBranch,\r\n    file,\r\n    'file-archive': fileArchive,\r\n    'file-audio': fileAudio,\r\n    'file-code': fileCode,\r\n    'file-excel': fileExcel,\r\n    'file-image': fileImage,\r\n    'file-pdf': filePdf,\r\n    'file-powerpoint': filePowerpoint,\r\n    'file-text': fileText,\r\n    'file-video': fileVideo,\r\n    'file-word': fileWord,\r\n    folder,\r\n    'folder-plus': folderPlus,\r\n    sitemap,\r\n  };\r\n\r\n  constructor(private matIconRegistry: MatIconRegistry, private domSanitizer: DomSanitizer) { }\r\n\r\n  load() {\r\n    Object.entries(this.icons).forEach(([name, svg]) => {\r\n      this.matIconRegistry.addSvgIconLiteral(name, this.domSanitizer.bypassSecurityTrustHtml(svg));\r\n    });\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 48 48\\\">\\r\\n<style type=\\\"text/css\\\">\\r\\n\\t.st0{display:none;}\\r\\n\\t.st1{display:inline;}\\r\\n</style>\\r\\n<g id=\\\"Layer_1\\\">\\r\\n\\t<path d=\\\"M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z\\\"/>\\r\\n</g>\\r\\n<g id=\\\"Layer_3\\\" class=\\\"st0\\\">\\r\\n</g>\\r\\n<g id=\\\"Icon\\\">\\r\\n\\t<path d=\\\"M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44c2,0,4-1.85,6-1.85S28,44,30,44\\r\\n\\t\\tc6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z\\\"/>\\r\\n</g>\\r\\n</svg>\\r\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 48 48\\\">\\r\\n<style type=\\\"text/css\\\">\\r\\n\\t.st0{display:none;}\\r\\n\\t.st1{display:inline;}\\r\\n</style>\\r\\n<g id=\\\"Layer_1\\\">\\r\\n\\t<path d=\\\"M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z\\\"/>\\r\\n</g>\\r\\n<g id=\\\"Layer_3\\\" class=\\\"st0\\\">\\r\\n</g>\\r\\n<g id=\\\"Icon\\\">\\r\\n\\t<path d=\\\"M32,20c3.7,0,6,2.1,6,5.47C38,33.21,33.01,40,30.06,40c-0.25-0.04-0.93-0.35-1.38-0.56c-1.25-0.58-2.8-1.3-4.68-1.3\\r\\n\\t\\ts-3.43,0.72-4.68,1.3C18.87,39.65,18.19,39.97,18,40c-3.01,0-8-6.79-8-14.53C10,22.1,12.3,20,16,20c2.44,0,5.29,1.17,6.17,1.62\\r\\n\\t\\tL24,22.56l1.83-0.94C26.64,21.2,29.53,20,32,20 M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44\\r\\n\\t\\tc2,0,4-1.85,6-1.85S28,44,30,44c6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z\\\"/>\\r\\n</g>\\r\\n</svg>\\r\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 39.2 28.2 71.8 65.5 78.7-.8 17.2-5 30.4-12.7 40-17.5 21.8-53.1 25.2-90.7 28.7-28.2 2.6-57.4 5.4-80.4 16.9-3.4 1.7-6.7 3.6-9.7 5.7V158.4c36.5-7.4 64-39.7 64-78.4 0-44.2-35.8-80-80-80S0 35.8 0 80c0 38.7 27.5 71 64 78.4v195.2C27.5 361 0 393.3 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-36.9-24.9-67.9-58.9-77.2 5-9.6 12.3-14.6 19-18 17.5-8.8 42.5-11.2 68.9-13.7 42.6-4 86.7-8.1 112.7-40.5 12.4-15.5 19-35.5 19.8-60.7C357.3 214 384 182.1 384 144zM32 80c0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48-48-21.5-48-48zm96 352c0 26.5-21.5 48-48 48s-48-21.5-48-48c0-26.4 21.4-47.9 47.8-48h.6c26.3.2 47.6 21.7 47.6 48zm187.8-241.5L304 192c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48c0 22.4-15.4 41.2-36.2 46.5z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M128 96v32h32V96zm65.9 169.6c-1.1-5.6-6-9.6-11.8-9.6H160v-32h-32v32l-19.4 97.2c-6.5 32.5 18.3 62.8 51.4 62.8s57.9-30.3 51.4-62.8zm-33.6 124.5c-17.9 0-32.4-12.1-32.4-27s14.5-27 32.4-27 32.4 12.1 32.4 27-14.5 27-32.4 27zM128 160v32h32v-32zm64-96h-32v32h32zm177.9 33.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.4 2.1 7.4 4.2l83.9 83.9c2 2 3.5 4.6 4.2 7.4H256zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h79.7v32h32V32H224v104c0 13.3 10.7 24 24 24h104zM192 192h-32v32h32zm0-64h-32v32h32z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-77.6-66.6c38.5-26 61.6-69.3 61.6-115.7 0-24.7-6.5-48.9-18.9-70.1-12-20.6-29.1-37.8-49.6-50-7.1-4.2-16.3-1.9-20.6 5.2-4.2 7.1-1.9 16.3 5.2 20.6 33.1 19.7 53.7 55.8 53.7 94.3 0 36.5-18.1 70.4-48.3 90.9-6.9 4.6-8.7 14-4 20.8 2.9 4.3 7.6 6.6 12.4 6.6 3.1 0 6-.8 8.5-2.6zm-26.6-38.3c26-17.3 41.5-46.2 41.5-77.4 0-32.9-17.7-63.7-46.2-80.3-7.2-4.2-16.3-1.7-20.5 5.4-4.2 7.2-1.7 16.3 5.4 20.5 19.3 11.2 31.3 32 31.3 54.3 0 21.1-10.5 40.7-28.1 52.4-6.9 4.6-8.8 13.9-4.2 20.8 2.9 4.4 7.7 6.7 12.5 6.7 2.8.1 5.7-.7 8.3-2.4zm-27-38.2c13.7-8.5 21.8-23.1 21.8-39.2 0-17-9.3-32.5-24.2-40.6-7.3-3.9-16.4-1.2-20.3 6.1-3.9 7.3-1.2 16.4 6.1 20.3 5.2 2.8 8.5 8.3 8.5 14.2 0 5.6-2.9 10.8-7.6 13.7-7 4.4-9.2 13.6-4.8 20.7 2.8 4.6 7.7 7.1 12.8 7.1 2.5 0 5.2-.7 7.7-2.3zM138 266.7v74.7L112 322H94v-36h18l26-19.3m17.9-50.7c-2.9 0-6 1.1-8.4 3.5L104 256H76c-6.6 0-12 5.4-12 12v72c0 6.6 5.4 12 12 12h28l43.5 36.5c2.4 2.4 5.4 3.5 8.4 3.5 6.2 0 12.1-4.8 12.1-12V228c0-7.2-5.9-12-12.1-12z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.941 97.941l-83.882-83.882A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zm-22.627 22.628a15.89 15.89 0 0 1 4.195 7.431H256V32.491a15.88 15.88 0 0 1 7.431 4.195l83.883 83.883zM336 480H48c-8.837 0-16-7.163-16-16V48c0-8.837 7.163-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304c0 8.837-7.163 16-16 16zm-161.471-67.404l-25.928-7.527a5.1 5.1 0 0 1-3.476-6.32l58.027-199.869a5.1 5.1 0 0 1 6.32-3.476l25.927 7.527a5.1 5.1 0 0 1 3.476 6.32L180.849 409.12a5.1 5.1 0 0 1-6.32 3.476zm-48.446-47.674l18.492-19.724a5.101 5.101 0 0 0-.351-7.317L105.725 304l38.498-33.881a5.1 5.1 0 0 0 .351-7.317l-18.492-19.724a5.1 5.1 0 0 0-7.209-.233L57.61 300.279a5.1 5.1 0 0 0 0 7.441l61.263 57.434a5.1 5.1 0 0 0 7.21-.232zm139.043.232l61.262-57.434a5.1 5.1 0 0 0 0-7.441l-61.262-57.434a5.1 5.1 0 0 0-7.209.233l-18.492 19.724a5.101 5.101 0 0 0 .351 7.317L278.275 304l-38.499 33.881a5.1 5.1 0 0 0-.351 7.317l18.492 19.724a5.1 5.1 0 0 0 7.209.232z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM211.7 308l50.5-81.8c4.8-8-.9-18.2-10.3-18.2h-4.1c-4.1 0-7.9 2.1-10.1 5.5-31 48.5-36.4 53.5-45.7 74.5-17.2-32.2-8.4-16-45.8-74.5-2.2-3.4-6-5.5-10.1-5.5H132c-9.4 0-15.1 10.3-10.2 18.2L173 308l-59.1 89.5c-5.1 8 .6 18.5 10.1 18.5h3.5c4.1 0 7.9-2.1 10.1-5.5 37.2-58 45.3-62.5 54.4-82.5 31.5 56.7 44.3 67.2 54.4 82.6 2.2 3.4 6 5.4 10 5.4h3.6c9.5 0 15.2-10.4 10.1-18.4L211.7 308z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M159 336l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0l-39 39L63 448h256V304l-55.5-55.5c-4.7-4.7-12.3-4.7-17 0L159 336zm96-50.7l32 32V416H95.1l.3-67.2 15.6-15.6 48 48c20.3-20.3 77.7-77.6 96-95.9zM127 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm0-96c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm242.9-62.1L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-22-171.2c-13.5-13.3-55-9.2-73.7-6.7-21.2-12.8-35.2-30.4-45.1-56.6 4.3-18 12-47.2 6.4-64.9-4.4-28.1-39.7-24.7-44.6-6.8-5 18.3-.3 44.4 8.4 77.8-11.9 28.4-29.7 66.9-42.1 88.6-20.8 10.7-54.1 29.3-58.8 52.4-3.5 16.8 22.9 39.4 53.1 6.4 9.1-9.9 19.3-24.8 31.3-45.5 26.7-8.8 56.1-19.8 82-24 21.9 12 47.6 19.9 64.6 19.9 27.7.1 28.9-30.2 18.5-40.6zm-229.2 89c5.9-15.9 28.6-34.4 35.5-40.8-22.1 35.3-35.5 41.5-35.5 40.8zM180 175.5c8.7 0 7.8 37.5 2.1 47.6-5.2-16.3-5-47.6-2.1-47.6zm-28.4 159.3c11.3-19.8 21-43.2 28.8-63.7 9.7 17.7 22.1 31.7 35.1 41.5-24.3 4.7-45.4 15.1-63.9 22.2zm153.4-5.9s-5.8 7-43.5-9.1c41-3 47.7 6.4 43.5 9.1z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM204.3 208H140c-6.6 0-12 5.4-12 12v184c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12v-60.4h44.3c38.7 0 67.7-27.3 67.7-69 0-38.6-23.8-66.6-67.7-66.6zm26 97.7c-7.5 7.6-17.8 11.4-31 11.4H160V233h39.7c12.9 0 23.1 3.7 30.6 11.1 15.3 15.1 15 46.5 0 61.6z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-48-244v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M224 280.593C224 267.01 212.989 256 199.407 256H88.593C75.011 256 64 267.01 64 280.593v110.815C64 404.99 75.011 416 88.593 416h110.814C212.989 416 224 404.99 224 391.407V381l27.971 27.971a23.998 23.998 0 0 0 16.97 7.029H296c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-27.059a24.003 24.003 0 0 0-16.97 7.029L224 291v-10.407zM192 384H96v-96h96v96zm80.255-96H288v96h-15.745L224 342.826v-13.652L272.255 288zm97.686-190.059l-83.883-83.882A47.996 47.996 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zM256 32.491a15.888 15.888 0 0 1 7.432 4.195l83.882 83.882a15.882 15.882 0 0 1 4.195 7.431H256V32.491zM352 464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V48c0-8.837 7.164-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-53.6-246.5c-6.8 32.8-32.5 139.7-33.4 150.3-5.8-29.1-.7 1.6-41.8-150.9-1.4-5.2-6.2-8.9-11.6-8.9h-6.4c-5.4 0-10.2 3.6-11.6 8.9-38.3 142.3-37.4 140.6-39.4 154.7-4.1-23.9 2.1-2.9-34.4-154.4-1.3-5.4-6.1-9.2-11.7-9.2h-7.2c-7.8 0-13.5 7.3-11.6 14.9 9.5 38 34.5 137.4 42.2 168 1.3 5.3 6.1 9.1 11.6 9.1h17c5.4 0 10.2-3.7 11.6-8.9 34.2-127.7 33.5-123.4 36.7-142.9 6.5 31.1.2 7 36.7 142.9 1.4 5.2 6.2 8.9 11.6 8.9h14c5.5 0 13.7-3.7 15.1-9l42.8-168c1.9-7.6-3.8-15-11.6-15h-6.8c-5.7 0-10.6 4-11.8 9.5z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path d=\\\"M194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path d=\\\"M344 272h-72v-72c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v72h-72c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h72v72c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-72h72c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 640 512\\\"><path d=\\\"M608 352h-32v-97.59c0-16.77-13.62-30.41-30.41-30.41H336v-64h48c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h48v64H94.41C77.62 224 64 237.64 64 254.41V352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32H96v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32h-32v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-480 32v96H32v-96h96zm240 0v96h-96v-96h96zM256 128V32h128v96H256zm352 352h-96v-96h96v96z\\\"/></svg>\";","import { Injectable, signal } from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\nimport { classLog } from '../../shared/logging';\r\n\r\n/**\r\n * A Service to hold the form group and anything specific to a form.\r\n *\r\n * Important: This is specific to a single entity.\r\n */\r\n@Injectable()\r\nexport class EntityFormStateService {\r\n\r\n  log = classLog({EntityFormStateService});\r\n\r\n  constructor() {\r\n    // console.log('2dm - EntityFormStateService - constructor');\r\n  }\r\n\r\n  /** Signal to determine that the form group has been initialized */\r\n  controlsCreated = signal(false);\r\n\r\n  isSaving = signal(false);\r\n\r\n  /** The Form Group */\r\n  public readonly formGroup = new UntypedFormGroup({});\r\n\r\n}\r\n","import { Injectable, Injector, OnDestroy, Signal } from '@angular/core';\r\nimport { toSignal } from '@angular/core/rxjs-interop';\r\nimport { filter, map, Subject } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\nimport { mapUntilChanged } from '../../shared/rxJs/mapUntilChanged';\r\nimport { ServiceBase } from '../../shared/services/service-base';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormLanguageService } from '../form/form-language.service';\r\nimport { UrlHelpers } from '../shared/helpers';\r\nimport { EditUrlParams } from './edit-url-params.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  childFormResult: true,\r\n  expand: false,\r\n  open: false,\r\n  watchToRefreshOnVersionsClosed: true,\r\n}\r\n\r\n/**\r\n * Special helper to handle opening / closing field-specific popups.\r\n * E.g. the larger dialog on hyperlinks/files or entity-pickers.\r\n *\r\n * Note: also seems to be involved in the version-dialog closing as well.\r\n * \r\n * Note that it seems to be \"Scoped\" to the EditDialogMain Component\r\n */\r\n@Injectable()\r\nexport class EditRoutingService extends ServiceBase implements OnDestroy {\r\n\r\n  log = classLog({EditRoutingService}, logSpecs);\r\n\r\n  #dialogRouter = transient(DialogRoutingService);\r\n  #route = this.#dialogRouter.route;\r\n  #router = this.#dialogRouter.router;\r\n\r\n  constructor(\r\n    private langInstanceSvc: FormLanguageService,\r\n    private formConfig: FormConfigService\r\n  ) {\r\n    super();\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#childFormResult$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  init() {\r\n    this.#initHideHeader();\r\n    this.#watchChildFormResult();\r\n  }\r\n\r\n  #childFormResult$ = new Subject<ChildFormResult>();\r\n\r\n  #getParams() { return this.#route.snapshot.params as EditUrlParams; }\r\n\r\n  #getParamsAndPayload() {\r\n    const p = this.#getParams();\r\n    const hasDetails = p.detailsEntityGuid != null && p.detailsFieldId != null;\r\n    return {\r\n      params: p,\r\n      hasDetails,\r\n      hasUpdate: p.updateEntityGuid != null && p.updateFieldId != null,\r\n      guid: hasDetails ? p.detailsEntityGuid : p.updateEntityGuid,\r\n      fieldId: hasDetails ? p.detailsFieldId : p.updateFieldId,\r\n    };\r\n  }\r\n\r\n  /** Tells if field with this index should be expanded */\r\n  isExpanded(fieldId: number, entityGuid: string) {\r\n    const fieldIndex = fieldId.toString();\r\n    const params = this.#getParams();\r\n    const isExpanded = params.detailsEntityGuid === entityGuid && params.detailsFieldId === fieldIndex;\r\n    return isExpanded;\r\n  }\r\n\r\n  /** Tells if field with this index should be expanded */\r\n  isExpanded$(fieldId: number, entityGuid: string) {\r\n    const fieldIndex = fieldId.toString();\r\n    return this.#route.params.pipe(\r\n      mapUntilChanged((p: EditUrlParams) => p.detailsEntityGuid === entityGuid && p.detailsFieldId === fieldIndex),\r\n    );\r\n  }\r\n\r\n  public isExpandedSignal(fieldId: number, entityGuid: string, injector: Injector): Signal<boolean> {\r\n    // Create a unique key by combining fieldId and entityGuid, then check cache\r\n    const key = `${fieldId}-${entityGuid}`;\r\n    const cached = this.#signalsExpandedCache[key];\r\n    if (cached) return cached;\r\n\r\n    // Get the observable and convert it to a signal\r\n    const obs = this.isExpanded$(fieldId, entityGuid);\r\n    return this.#signalsExpandedCache[key] = toSignal(obs, { injector });\r\n  }\r\n  #signalsExpandedCache: Record<string, Signal<boolean>> = {};\r\n\r\n  /** Fires when child form is closed and has a result, new entity was added */\r\n  childFormResult(fieldId: number, entityGuid: string) {\r\n    const l = this.log.fnIf('childFormResult', { fieldId, entityGuid });\r\n    const obs = this.#childFormResult$.pipe(\r\n      filter(cr => cr.updateEntityGuid === entityGuid && cr.updateFieldId === fieldId && cr.result != null),\r\n      map(cr => cr.result),\r\n    );\r\n    return l.rSilent(obs);\r\n  }\r\n\r\n  /** Fires when child form is closed */\r\n  childFormClosed() {\r\n    return this.#childFormResult$.pipe(map(_ => null as string));\r\n  }\r\n\r\n  expand(expand: boolean, fieldId: number, entityGuid: string, componentTag?: string) {\r\n    const l = this.log.fnIf('expand', { expand, fieldId, entityGuid, componentTag });\r\n    const pInfo = this.#getParamsAndPayload();\r\n    const p = pInfo.params;\r\n    const oldEditUrl = `edit/${p.items}` + (pInfo.hasDetails ? `/details/${pInfo.guid}/${pInfo.fieldId}` : '');\r\n    const newEditUrl = `edit/${p.items}` + (expand ? `/details/${entityGuid}/${fieldId}` : '');\r\n    const url = UrlHelpers.newUrlIfCurrentContainsOldUrl(this.#route, oldEditUrl, newEditUrl);\r\n    if (url == null) return l.end('no change');\r\n    this.#router.navigate([url], { state: componentTag && { componentTag } });\r\n    l.end('routed away to ', { url});\r\n  }\r\n\r\n  /** Opens child dialog and stores update entityGuid and fieldId in the url, if field is not expanded already */\r\n  open(fieldId: number, entityGuid: string, form: EditForm) {\r\n    const l = this.log.fnIf('open', { fieldId, entityGuid, form });\r\n    const formUrl = convertFormToUrl(form);\r\n    const pInfo = this.#getParamsAndPayload();\r\n    // if field is expanded, just open child because that info will be used for field update\r\n    if (pInfo.hasDetails) {\r\n      this.#router.navigate([`edit/${formUrl}`], { relativeTo: this.#route });\r\n      return l.end('expanded, just open child');\r\n    }\r\n\r\n    // otherwise add /update/:entityGuid/:fieldId to the url\r\n    const oldEditUrl = `edit/${pInfo.params.items}`;\r\n    const newEditUrl = `edit/${pInfo.params.items}/update/${entityGuid}/${fieldId}/edit/${formUrl}`;\r\n    const url = UrlHelpers.newUrlIfCurrentContainsOldUrl(this.#route,oldEditUrl, newEditUrl);\r\n    if (url == null) return l.end('no change');\r\n    this.#router.navigate([url]);\r\n    l.end('routed away to ', { url });\r\n  }\r\n\r\n  /** Update hideHeader for the form. Fix for safari and mobile browsers */\r\n  #initHideHeader() {\r\n    this.subscriptions.add(\r\n      this.#route.params\r\n        .pipe(\r\n          mapUntilChanged((p: EditUrlParams) => p.detailsEntityGuid != null && p.detailsFieldId != null)\r\n        )\r\n        .subscribe(hasDetails => this.langInstanceSvc.updateHideHeader(this.formConfig.config.formId, hasDetails))\r\n    );\r\n  }\r\n\r\n  #watchChildFormResult() {\r\n    this.subscriptions.add(\r\n      this.#dialogRouter.childDialogClosed$().pipe(\r\n        map(() => {\r\n          const pInfo = this.#getParamsAndPayload();\r\n          return {\r\n            pInfo,\r\n            result: {\r\n              updateEntityGuid: pInfo.guid,\r\n              updateFieldId: parseInt(pInfo.fieldId, 10),\r\n              result: this.#router.getCurrentNavigation().extras?.state,\r\n            } satisfies ChildFormResult\r\n          };\r\n        }),\r\n      ).subscribe(({ pInfo, result }) => {\r\n        // alert subscribers that child form closed\r\n        this.#childFormResult$.next(result);\r\n\r\n        // clear update ids from url (leave expanded/details)\r\n        if (!pInfo.hasUpdate) return;\r\n        \r\n        const p = pInfo.params;\r\n        const url = UrlHelpers.newUrlIfCurrentContainsOldUrl(this.#route, `edit/${p.items}/update/${p.updateEntityGuid}/${p.updateFieldId}`, `edit/${p.items}`);\r\n        if (url == null) return;\r\n        this.#router.navigate([url]);\r\n      })\r\n    );\r\n  }\r\n}\r\n\r\nexport interface NavigateFormResult {\r\n  navigateUrl: string;\r\n}\r\n\r\ninterface ChildFormResult {\r\n  updateEntityGuid: string;\r\n  updateFieldId: number;\r\n  /** On add, contains GUID and Id of newly added item */\r\n  result: {\r\n    [guid: string]: number;\r\n  };\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { EntityLight } from '../../../../../../../edit-types/src/EntityLight';\r\n\r\nexport interface PickerItem {\r\n  /** The title to show in the dropdown */\r\n  label: string;\r\n\r\n  /** The value to store */\r\n  value: string;\r\n\r\n  /** The previewValue to Show (Icon, etc.) */\r\n  previewValue?: string;\r\n\r\n  /** The HTML to show in the preview */\r\n  previewHtml?: string;\r\n\r\n  /**\r\n   * The entity Id, only used to enable edit etc. if the item is an entity.\r\n   */\r\n  id?: number;\r\n\r\n  /**\r\n   * Prevent edit of this item for whatever reason, v15\r\n   * This property does not come from the server, but must be added by code.\r\n   */\r\n  noEdit?: boolean;\r\n\r\n  noRemove?: boolean;\r\n\r\n  /**\r\n   * Prevent delete of this item for whatever reason, v15\r\n   * This property does not come from the server, but must be added by code.\r\n   */\r\n  noDelete?: boolean;\r\n\r\n  /**\r\n   * Prevent select of this item for whatever reason, v16\r\n   * It was originally added so \"no query\" message will be shown in the dropdown.\r\n   * This property does not come from the server, but must be added by code.\r\n   *\r\n   * TODO: this is not quite correct, the UI seems to use and then look if re-select is allowed,\r\n   * but it's usually true for error messages...\r\n   */\r\n  noSelect?: boolean;\r\n\r\n\r\n  /**\r\n   * The tooltip that is seen on hover over item in the dropdown.\r\n   * This property does not come from the server, but must be added by code from the settings.\r\n   */\r\n  tooltip?: string;\r\n\r\n  /**\r\n   * The data that is seen on click on information icon on item in the dropdown.\r\n   * This property does not come from the server, but must be added by code from the settings.\r\n   */\r\n  info?: string;\r\n\r\n  /**\r\n   * The data that is seen on click on help icon on item in the dropdown.\r\n   * This property does not come from the server, but must be added by code from the settings.\r\n   */\r\n  link?: string;\r\n\r\n  /**\r\n   * The streamName is used for tree config when we have data from multiple streams and they have same Ids.\r\n   * This property does not come from the server, but must be added by code from the settings.\r\n   */\r\n  sourceStreamName?: string;\r\n\r\n  /**\r\n   * Indicate that this item is an error or message, which means it should not be selectable and it should\r\n   * also not be filtered out.\r\n   */\r\n  isMessage?: boolean;\r\n\r\n  /**\r\n   * The data of the underlying original entity.\r\n   * Used in formulas and field masks for all properties.\r\n   * Named `data` and not `entity` because in theory the data could come from elsewhere and never be an entity. \r\n   */\r\n  data?: EntityLight;\r\n\r\n  /**\r\n   * WIP to list features required for this item.\r\n   * \r\n   * Goal is to probably have a CSV always consisting of prefix like \r\n   * \r\n   * * `feature:` and then a feature ID such as `feature:PickerUiRadio` + a possible action such as `hint=feature:PickerUiRadio`\r\n   * * later `package:` and then a package\r\n   * * later `permission:` and then a permission\r\n   * \r\n   * Important: This is beta and not for public use; ATM used in the radio/checkboxes of pickers and only there.\r\n   * It can still change at any time, both format and implementation.\r\n   */\r\n  rules?: string;\r\n\r\n}\r\n\r\nexport class PickerItemFactory {\r\n\r\n  /** Generate a placeholder item to show in the list to show during loading or in case of error */\r\n  static placeholder(translate: TranslateService, i18nLabel: string, suffix?: string): PickerItem {\r\n    return {\r\n      label: translate.instant(i18nLabel) + (suffix ?? ''),\r\n      value: null,\r\n      noSelect: true,\r\n      isMessage: true,\r\n      noDelete: true,\r\n      noEdit: true,\r\n    } satisfies PickerItem;\r\n  }\r\n\r\n  /** Generate a placeholder item to show in the list to show during loading or in case of error */\r\n  static message(translate: TranslateService, i18nLabel: string, params?: object): PickerItem {\r\n    return {\r\n      label: translate.instant(i18nLabel, params),\r\n      value: null,\r\n      noSelect: true,\r\n      isMessage: true,\r\n      noDelete: true,\r\n      noEdit: true,\r\n    } satisfies PickerItem;\r\n  }\r\n}\r\n","import { Signal } from '@angular/core';\r\nimport { ClassLogger } from '../../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../../edit-debug';\r\nimport { DataSourceBase } from '../data-sources/data-source-base';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DeleteEntityProps } from '../models/picker.models';\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { StateAdapter } from './state-adapter';\r\n\r\nexport abstract class DataAdapterBase {\r\n\r\n  /** Log Specs to be used as a basis for all inheriting classes */\r\n  static logSpecs = {\r\n    all: false,\r\n    setupEmpty: false,\r\n    connectState: false,\r\n    initPrefetch: true,\r\n    fetchItems: false,\r\n    constructor: false,\r\n    fields: [...DebugFields, 'Categories'],\r\n  };\r\n\r\n  log: ClassLogger<typeof DataAdapterBase.logSpecs>;\r\n\r\n  constructor() { }\r\n\r\n  /** Picker Features of this DataAdapter - must be implemented by every data source to communicate it's features */\r\n  public abstract myFeatures: Signal<Partial<PickerFeatures>>;\r\n\r\n  /** a signal for data-sources - may not need a signal, if it's unchanging... */\r\n  public dataSource = signalObj<DataSourceBase>('dataSource', null satisfies DataSourceBase);\r\n\r\n  /**\r\n   * The options to show.\r\n   * Can be different from the underlying data, since it may have error or loading-entries.\r\n   * This is a signal, so it can be used in the template. it will _never_ be null.\r\n   */\r\n  public optionsOrHints: Signal<PickerItem[]> = computedObj('optionsOrHints', () => this.dataSource().data() ?? []);\r\n\r\n  public deleteCallback: (props: DeleteEntityProps) => void;\r\n\r\n  //#region Setup & Init\r\n\r\n  protected abstract dataSourceRaw: DataSourceBase;\r\n\r\n  public connectState(state: StateAdapter): this {\r\n    const l = this.log.fnIf('connectState');\r\n\r\n    this.dataSource.set(this.dataSourceRaw.setup());\r\n\r\n    this.deleteCallback = p => state.doAfterDelete(p);\r\n    return l.rSilent(this);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  abstract deleteItem(props: DeleteEntityProps): void;\r\n\r\n  abstract editItem(editParams: { entityGuid: string, entityId: number }, entityType: string): void;\r\n\r\n  abstract fetchItems(): void;\r\n}\r\n","import { HttpErrorResponse } from \"@angular/common/http\";\r\nimport { inject } from '@angular/core';\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { ItemIdHelper } from 'projects/eav-ui/src/app/shared/models/item-id-helper';\r\nimport { take } from 'rxjs';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { EditForm } from \"../../../../../app/shared/models/edit-form.model\";\r\nimport { EntityService } from \"../../../../../app/shared/services/entity.service\";\r\nimport { ClassLogger } from '../../../../shared/logging/class/class-logger';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { EntityFormStateService } from '../../../entity-form/entity-form-state.service';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { EditRoutingService } from '../../../routing/edit-routing.service';\r\nimport { FieldMask } from '../../../shared/helpers';\r\nimport { FieldState } from '../../field-state';\r\nimport { DataSourceEntityBase } from '../data-sources/data-source-entity-base';\r\nimport { PickerItem, PickerItemFactory } from '../models/picker-item.model';\r\nimport { DeleteEntityProps } from \"../models/picker.models\";\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { DataAdapterBase } from \"./data-adapter-base\";\r\nimport { DataAdapterCanRefresh } from './data-adapter-can-refresh';\r\n\r\nexport const logSpecsDataAdapterEntityBase = {\r\n  ...DataAdapterBase.logSpecs,\r\n  editItem: true,\r\n  getPrefill: true, // for create Entity & query\r\n};\r\n\r\nexport abstract class DataAdapterEntityBase extends DataAdapterBase implements DataAdapterCanRefresh {\r\n\r\n  //#region Services, constructor, log\r\n\r\n  log: ClassLogger<typeof DataAdapterBase.logSpecs> & ClassLogger<typeof logSpecsDataAdapterEntityBase>;\r\n\r\n  protected formConfig = inject(FormConfigService);\r\n  #editRoutingService = inject(EditRoutingService);\r\n  protected translate = inject(TranslateService);\r\n  #snackBar = inject(MatSnackBar);\r\n  protected fieldState = inject(FieldState) as FieldState<string[], FieldSettingsWithPickerSource & FieldSettingsPickerMerged>;\r\n  protected group = inject(EntityFormStateService).formGroup;\r\n  #entityService = transient(EntityService);\r\n\r\n  constructor() { super(); }\r\n\r\n  protected name = this.fieldState.name;\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * Content Type Mask\r\n   * This is a text or mask containing all query parameters.\r\n   * Since it's a mask, it can also contain values from the current item\r\n   */\r\n  #paramsMaskLazy = transient(FieldMask).initSignal('PickerSource-EntityType', this.fieldState.settingExt('EntityType'));\r\n\r\n  protected contentType = computedObj('contentType', () => this.#paramsMaskLazy?.result() ?? '');\r\n\r\n  #createEntityTypes = computedObj('createEntityTypes', () => this.fieldState.settings().CreateTypes);\r\n\r\n  /** \r\n   * Sync params: patch the data-source with the current settings\r\n   * Should be implemented in Entity & Query, probably not in AppAssets\r\n   */\r\n  syncParams(): void { }\r\n\r\n  onAfterViewInit(): void {\r\n    this.syncParams();\r\n  }\r\n\r\n  /** The features depend on contentType names being available to support create */\r\n  public myFeatures = computedObj<Partial<PickerFeatures>>('features', () => {\r\n    // if we don't know the content-type, we can't create new entities\r\n    const disableCreate = !this.contentType() && !this.#createEntityTypes();\r\n    return { create: !disableCreate } satisfies Partial<PickerFeatures>;\r\n  });\r\n\r\n  // WIP\r\n  #deletedItemsGuids = signalObj<string[]>('deletedItemsGuids', []);\r\n\r\n  /* Error handling to use in the final options - ATM never really used, since we can't really trigger the problem it was meant for */\r\n  protected errorOptions = signalObj<PickerItem[]>('errorOptions', null);\r\n\r\n  /** The options/hints to show in the UI */\r\n  override optionsOrHints = computedObj('optionsOrHints', () => {\r\n    const errors = this.errorOptions();\r\n    if (errors) return errors;\r\n    const ds = this.dataSource();\r\n    const deleted = this.#deletedItemsGuids();\r\n    const items = ds.data().filter(item => !deleted.some(guid => guid === item.value));\r\n    return ds.loading()\r\n      ? [PickerItemFactory.message(this.translate, 'Fields.Picker.Loading'), ...items]\r\n      : items;\r\n  });\r\n\r\n  initPrefetch(prefetchGuids: string[]): void {\r\n    this.syncParams();\r\n    this.log.fnIfInFields('initPrefetch', this.name, { prefetchGuids });\r\n    (this.dataSource() as DataSourceEntityBase).initPrefetch?.(prefetchGuids);\r\n  }\r\n\r\n  forceReloadData(missingData: string[]): void {\r\n    const l = this.log.fn('forceReloadData', { missingData });\r\n    this.dataSource().addToRefresh(missingData);\r\n    l.end();\r\n  }\r\n\r\n  // Note: 2dm 2023-01-24 added entityId as parameter #maybeRemoveGuidOnEditEntity\r\n  // not even sure if the guid would still be needed, as I assume the entityId\r\n  // should always be available.\r\n  // Must test all use cases and then probably simplify again.\r\n  editItem(editParams: { entityGuid: string, entityId: number }, entityType: string): void {\r\n    const l = this.log.fnIf('editItem', { editParams });\r\n    const editGuid = editParams?.entityGuid;\r\n    const formParams = this.#urlToObject(editGuid == null ? this.#createParams.result() : this.#editParams.result());\r\n    const form: EditForm = {\r\n      items: [\r\n        {\r\n          ...(editGuid == null)\r\n            ? ItemIdHelper.newFromType(entityType ?? this.contentType(), this.#urlToObject(this.#prefill.result()))\r\n            : ItemIdHelper.editId(this.optionsOrHints().find(item => item.value === editGuid)?.id ?? editParams.entityId),\r\n          ...( formParams ? { ClientData: { parameters: formParams } } : {} ),\r\n        },\r\n      ],\r\n    };\r\n    l.a('form', { form });\r\n    const config = this.fieldState.config;\r\n\r\n    // Open the form\r\n    this.#editRoutingService.open(config.index, config.entityGuid, form);\r\n\r\n    // Monitor for close to reload data\r\n    this.#editRoutingService.childFormClosed()\r\n      .pipe(take(1))\r\n      .subscribe(data => {\r\n        const l2 = this.log.fn('childFormClosed', { editGuid, data });\r\n        if (editGuid) {\r\n          this.forceReloadData([editGuid]);\r\n          return l2.end('forceReloadData', { editGuid });\r\n        }\r\n        l2.end(\"no guid, won't reload data\");\r\n      })\r\n    l.end();\r\n  }\r\n\r\n  deleteItem(props: DeleteEntityProps): void {\r\n    this.log.a('deleteItem', { props });\r\n    const entity = this.optionsOrHints().find(item => item.value === props.entityGuid);\r\n    const id = entity.id;\r\n    const title = entity.label;\r\n    const contentType = this.contentType();\r\n    const config = this.fieldState.config;\r\n    const parentId = config.entityId;\r\n    const parentField = config.fieldName;\r\n\r\n    const confirmed = confirm(this.translate.instant('Data.Delete.Question', { title, id }));\r\n    if (!confirmed) return;\r\n\r\n    this.#snackBar.open(this.translate.instant('Message.Deleting'));\r\n    this.#entityService.delete(this.formConfig.config.appId, contentType, id, false, parentId, parentField).subscribe({\r\n      next: () => {\r\n        this.#snackBar.open(this.translate.instant('Message.Deleted'), null, { duration: 2000 });\r\n        this.deleteCallback(props); // removes value from selected values\r\n        this.#deletedItemsGuids.update(p => [...p, props.entityGuid]);\r\n      },\r\n      error: (_: HttpErrorResponse) => {\r\n        this.#snackBar.dismiss();\r\n        if (!confirm(this.translate.instant('Data.Delete.Question', { title, id }))) return;\r\n        this.#snackBar.open(this.translate.instant('Message.Deleting'));\r\n        this.#entityService.delete(this.formConfig.config.appId, contentType, id, true, parentId, parentField).subscribe({\r\n          next: () => {\r\n            this.#snackBar.open(this.translate.instant('Message.Deleted'), null, { duration: 2000 });\r\n            this.deleteCallback(props); // removes value from selected values\r\n            this.#deletedItemsGuids.update(p => [...p, props.entityGuid]);\r\n          },\r\n          error: (_: HttpErrorResponse) => {\r\n            this.#snackBar.open(this.translate.instant('Message.DeleteError'), null, { duration: 2000 });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Will create a prefill object (if configured) which is based on a field-mask.\r\n   * This allows create-entity to use add prefills.\r\n   * ATM just normal values (text/number) or placeholders like [Title] work.\r\n   * In future we may add more features like dates etc.\r\n   * new 11.11.03\r\n   */\r\n  // #prefill = transient(FieldMask).initSignal('Prefill', this.fieldState.settingExt<FieldSettingsWithPickerSource, 'CreatePrefill'>('CreatePrefill'));\r\n  #prefill = transient(FieldMask).initSignal('Prefill', this.fieldState.settingExt('CreatePrefill'));\r\n  #createParams = transient(FieldMask).initSignal('CreateParams', this.fieldState.settingExt('CreateParameters'));\r\n  #editParams = transient(FieldMask).initSignal('CreateParams', this.fieldState.settingExt('EditParameters'));\r\n\r\n  // #getPrefillSetting() {\r\n  //   const maybe = this.fieldState.settingExt('CreatePrefill');\r\n  //   if (maybe()) return maybe;\r\n  //   return this.fieldState.settingExt('Prefill');\r\n  // }\r\n\r\n\r\n  #urlToObject(prefill: string) {\r\n    const l = this.log.fnIf('getPrefill', { prefill});\r\n    if (!prefill || !prefill.trim())\r\n      return l.r(null, 'empty');\r\n\r\n    // note: 2024-10-03 old code split for '\\n' but I had to add '&'\r\n    // not sure if the \\n is even relevant, so for now I'll remove it\r\n    const result = Object.fromEntries(\r\n      prefill.split('&')\r\n        .map(line => line.split('='))\r\n        .filter(parts => parts.length === 2 && parts[0] && parts[1])\r\n      ) as Record<string, string>;\r\n    \r\n    return l.r(result);\r\n    \r\n  }\r\n}\r\n\r\nexport interface LogSpecsDataAdapterEntityBase {\r\n  all: boolean;\r\n  connectState: boolean;\r\n}\r\n","/**\r\n * Picker features of a single item.\r\n */\r\nexport interface PickerFeaturesItem {\r\n  /** Item level: provide the edit button */\r\n  edit: boolean;\r\n  /** Item level: provide the remove button */\r\n  remove: boolean;\r\n  /** Item level: provide the delete button */\r\n  delete: boolean;\r\n}\r\n\r\n/**\r\n * Picker Features allow a source, state or control to determine what features are available for a picker.\r\n *\r\n * The idea is that by default, these things should be truish, and then the source, state or control can\r\n * declare that it's not allowed.\r\n *\r\n * In the end the features should be merged into one object, and the picker should be able to determine\r\n * what buttons etc. to show.\r\n */\r\nexport interface PickerFeatures extends PickerFeaturesItem {\r\n  /** Control level: provide the create button */\r\n  create: boolean;\r\n  /** Control level: provide the text entry */\r\n  textEntry: boolean;\r\n  /** Control level: provide the multi-value picker */\r\n  multiValue: boolean;\r\n}\r\n\r\nexport interface PickerFeaturesForControl extends PickerFeatures {\r\n  /**\r\n   * Determines if the control should also show the \"Go to List\" button.\r\n   * This depends on multi-select and in future also on the sortability of the list.\r\n   */\r\n  showGoToListDialogButton: boolean;\r\n\r\n  /**\r\n   * Determines if the control should also show the \"Add New\" button.\r\n   * This depends on the setting to create new items + the availability of the create-names.\r\n   */\r\n  showAddNewButton: boolean;\r\n}\r\n\r\nfunction fill(data: Partial<PickerFeatures>, fallback: boolean): PickerFeatures {\r\n  return {\r\n    create: data.create ?? fallback,\r\n    textEntry: data.textEntry ?? fallback,\r\n    multiValue: data.multiValue ?? fallback,\r\n\r\n    edit: data.edit ?? fallback,\r\n    remove: data.remove ?? fallback,\r\n    delete: data.delete ?? fallback,\r\n  };\r\n}\r\n\r\nconst logMergePickerFeatures = false;\r\n\r\nexport function mergePickerFeatures(first: Partial<PickerFeatures>, second: Partial<PickerFeatures>): PickerFeatures {\r\n  const firstTrue = fill(first, true);\r\n  const secondTrue = fill(second, true);\r\n  const result = {\r\n    create: firstTrue.create && secondTrue.create,\r\n    textEntry: firstTrue.textEntry && secondTrue.textEntry,\r\n    multiValue: firstTrue.multiValue && secondTrue.multiValue,\r\n\r\n    edit: firstTrue.edit && secondTrue.edit,\r\n    remove: firstTrue.remove && secondTrue.remove,\r\n    delete: firstTrue.delete && secondTrue.delete,\r\n  };\r\n  if (logMergePickerFeatures)\r\n    console.log('mergePickerFeatures result', { result, first, second, firstTrue, secondTrue });\r\n  return result;\r\n}","import groupBy from 'lodash-es/groupBy';\r\nimport { guidRegex } from '../../../shared/constants/guid.constants';\r\nimport { PickerItem } from './models/picker-item.model';\r\n\r\nexport function pickerItemsAllowsEmpty(dropdownOptions?: PickerItem[]): boolean {\r\n  return dropdownOptions?.some(o => o.value == '');\r\n}\r\n\r\n/** Convert string value in string array if a value is type string */\r\nexport function convertValueToArray(value: string | string[], separator: string, emptyIsValid: boolean): string[] {\r\n  // Special case: String-picker old with \"empty\" being selected\r\n  // In most dropdowns, empty would mean not-selected, but in string-dropdowns, it _can_ be a valid value\r\n  // So we must check if there is an empty value in the dropdown options\r\n  // And if this is true, return an array with an empty string being \"selected\"\r\n  if (value == '' && emptyIsValid)\r\n    return [''];\r\n\r\n  if (value == '' || !value)\r\n    return [];\r\n\r\n  return (Array.isArray(value))\r\n    ? value\r\n    : value.split(separator);\r\n}\r\n\r\n/** Convert string array value in string value if a value is type array */\r\nexport function convertArrayToString(value: string | string[], separator: string): string {\r\n  if (!value)\r\n    return '';\r\n  if (Array.isArray(value))\r\n    return value.join(separator);\r\n  return value;\r\n}\r\n\r\nexport function filterGuids(entityName: string, fieldName: string, guids: string[]): string[] {\r\n  if (guids == null) return;\r\n\r\n  const grouped = groupBy(guids, guid => guidRegex().test(guid) ? 'valid' : 'invalid');\r\n\r\n  // const validGuids: string[] = [];\r\n  // const invalidGuids: string[] = [];\r\n  // for (const guid of guids) {\r\n  //   if (guidRegex().test(guid)) {\r\n  //     validGuids.push(guid);\r\n  //   } else {\r\n  //     invalidGuids.push(guid);\r\n  //   }\r\n  // }\r\n\r\n  if (grouped.invalid) // invalidGuids.length > 0)\r\n    console.error(`Found invalid guids in Entity: \"${entityName}\", Field: \"${fieldName}\"`, grouped.invalid); // invalidGuids);\r\n\r\n  return grouped.valid ?? []; // validGuids;\r\n}\r\n","import { effect, inject, Injectable, Signal } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { getWith } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { DataAdapterBase } from './adapters/data-adapter-base';\r\nimport { DataAdapterCanRefresh } from './adapters/data-adapter-can-refresh';\r\nimport { DataAdapterEntityBase } from './adapters/data-adapter-entity-base';\r\nimport { StateAdapter } from \"./adapters/state-adapter\";\r\nimport { PickerItem } from './models/picker-item.model';\r\nimport { mergePickerFeatures, PickerFeatures, PickerFeaturesForControl } from './picker-features.model';\r\nimport { pickerItemsAllowsEmpty } from './picker.helpers';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  setup: false,\r\n  addInfosFromSourceForUi: false,\r\n  optionsWithMissing: false,\r\n  selectedRaw: false,\r\n  selectedOverride: false,\r\n  selectedState: false,\r\n  features: true,\r\n  allOptions: false,\r\n  fields: [...DebugFields, '*'],\r\n}\r\n\r\n/**\r\n * Manages the data for the picker component.\r\n * This is quite complex, because there are many combinations of where the configuration and data can come from,\r\n * as well as how the resulting values should be processed.\r\n */\r\n@Injectable()\r\nexport class PickerData {\r\n\r\n  //#region Constructor, Log, Services, Setup\r\n  \r\n  log = classLog({PickerData}, logSpecs);\r\n\r\n  #translate = inject(TranslateService);\r\n\r\n  name: string;\r\n\r\n  constructor() {\r\n    // Log the options when they change (if enabled)\r\n    if (this.log.enabled && this.log.specs.allOptions) {\r\n      effect(() => {\r\n        const ready = this.ready();\r\n        const raw = this.optionsRaw();\r\n        const override = this.optionsOverride();\r\n        const final = this.optionsAll();\r\n        this.log.a('options', { ready, raw, override, final });\r\n      });\r\n    }\r\n  }\r\n\r\n  /** Setup to load initial values and initialize the state */\r\n  public setup(name: string, settings: Signal<FieldSettings>, state: StateAdapter, source: DataAdapterBase) {\r\n    const l = this.log.fnIfInFields('setup', this.name, { name, state, source });\r\n\r\n    // Setup this object\r\n    this.name = name;\r\n    this.#settingsLazy.set(settings as Signal<FieldSettings & FieldSettingsPickerMerged>);\r\n    this.state = state;\r\n    this.source = source;\r\n\r\n    // Setup the State so it is able to do it's work based on data it wouldn't have otherwise\r\n    state.features = this.features;\r\n    state.allowsEmptyLazy.set(this.optionsAllowsEmpty);\r\n\r\n    // 1. Init Prefetch - for Entity Picker\r\n    // This will place the prefetch items into the available-items list\r\n    // Otherwise related entities would only show as GUIDs.\r\n    const values = state.values();\r\n    l.a('setup', { initiallySelected: values });\r\n    (source as DataAdapterBase & DataAdapterCanRefresh)?.initPrefetch?.(values);\r\n\r\n    // When everything is done, mark as ready\r\n    this.ready.set(true);\r\n\r\n    l.end('done');\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Adapters\r\n\r\n  /**\r\n   * The data for the list / options to show.\r\n   * Populated at Setup.\r\n   */\r\n  public source: DataAdapterBase;\r\n\r\n  /**\r\n   * The state containing the currently selected data in the correct object structure\r\n   * Populated at Setup.\r\n  */\r\n  public state: StateAdapter;\r\n\r\n  //#endregion\r\n\r\n  public closeWatcherAttachedWIP = false;\r\n\r\n  //#region Possible Options to provide\r\n\r\n  /**\r\n   * Inform the system that the sources are ready.\r\n   * WIP experimenting with making it public, so that formulas can delay running dependant function.\r\n   */\r\n  public ready = signalObj('sourceIsReady', false);\r\n\r\n  /** Options to show in the picker. Can also show hints if something is wrong. Must be initialized at setup */\r\n  public optionsRaw = computedObj('optionsSource', () => (this.ready() ? this.source.optionsOrHints() : null) ?? []);\r\n  \r\n  /** Overrides / replacements from formulas */\r\n  public optionsOverride = signalObj<PickerItem[]>('overrideOptions', null);\r\n\r\n  /** Final Options to show in the picker and to use to calculate labels of selected etc. */\r\n  public optionsAll = computedObj('optionsFinal', () => getWith(this.optionsOverride(), o => o ? o : this.optionsRaw()));\r\n\r\n  /** Special information for string pickers which allow empty to be valid selection - also used in validator */\r\n  public optionsAllowsEmpty = computedObj('optionsAllowsEmpty', () => pickerItemsAllowsEmpty(this.optionsAll()));\r\n\r\n  //#endregion\r\n\r\n  //#region Selected Data\r\n\r\n  /** Currently selected items. Must watch for ready. */\r\n  public selectedRaw = computedObj<PickerItem[]>('selectedState', () => {\r\n    const l = this.log.fnIfInFields('selectedRaw', this.name);\r\n    return !this.ready()\r\n      ? l.r([], 'not ready')\r\n      : l.r(this.#toSelectedWithUiInfo(this.state.selectedItems(), this.optionsAll()), 'ready');\r\n  });\r\n\r\n  /** Overrides / replacements from formulas */\r\n  public selectedOverride = signalObj<PickerItem[]>('selectedOverride', null);\r\n\r\n  /** Currently selected items from override or raw */\r\n  public selectedAll = computedObj('selectedAll', () => getWith(this.selectedOverride(), o => o ? o : this.selectedRaw()));\r\n\r\n  /** First selected item or null */\r\n  public selectedOne = computedObj('selectedOne', () => this.selectedAll()[0] ?? null);\r\n\r\n  /** Create a copy of the selected items, so that any changes (in formulas) won't affect the real selected data */\r\n  public selectedCopy(original: PickerItem[]): PickerItem[] {\r\n    return original.map(item => ({ ...item }));\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Options containing missing selected\r\n\r\n  public optionsWithMissing = computedObj('optionsWithMissing', () => {\r\n    const l = this.log.fnIf('optionsWithMissing');\r\n    const selected = this.selectedAll();\r\n    const options = this.optionsAll();\r\n    const missing = selected.filter(s => !options.find(o => o.value === s.value));\r\n    if (missing.length === 0) return options;\r\n\r\n    const result = options.concat(missing);\r\n    return l.r(result);\r\n  });\r\n\r\n  //#endregion\r\n\r\n  #settingsLazy = signalObj<Signal<FieldSettings & FieldSettingsPickerMerged>>('settingsLazy', null);\r\n\r\n  #featuresFromSettings = computedObj<PickerFeatures>('featuresFromSettings', () => {\r\n    const s = this.#settingsLazy()();\r\n    return {\r\n      textEntry: s.EnableTextEntry,\r\n      multiValue: s.AllowMultiValue,\r\n      create: s.EnableCreate && !!s.CreateTypes,\r\n      remove: s.EnableRemove,\r\n      delete: s.EnableDelete,\r\n      edit: s.EnableEdit,       // note: added in 19.03.02, seems to have been forgotten before?\r\n    } satisfies PickerFeatures;\r\n  });\r\n\r\n  /** Signal containing the features of the picker, basically to accumulate features such as \"canEdit\" */\r\n  public features = computedObj<PickerFeaturesForControl>('features', () => {\r\n    const sourceFeatures = this.source.myFeatures();\r\n    const stateFeatures = this.state.myFeatures();\r\n    const settingsFeatures = this.#featuresFromSettings();\r\n    \r\n    const mergeSourceAndState = mergePickerFeatures(sourceFeatures, stateFeatures);\r\n    const mergeSettings = mergePickerFeatures(mergeSourceAndState, settingsFeatures);\r\n    const forControl = {\r\n      ...mergeSettings,\r\n      showGoToListDialogButton: mergeSettings.multiValue,\r\n      showAddNewButton: mergeSettings.create,\r\n    } satisfies PickerFeaturesForControl;\r\n\r\n    this.log.aIf('features', { sourceFeatures, stateFeatures, settingsFeatures, mergeSourceAndState, mergeSettings, forControl });\r\n    return forControl;\r\n  });\r\n\r\n  public addNewlyCreatedItem(result: Record<string, number>) {\r\n    const newItemGuid = Object.keys(result)[0];\r\n    const l = this.log.fn('addNewlyCreatedItem', { result, newItemGuid });\r\n    if (!this.state.values().includes(newItemGuid)) {\r\n      this.state.add(newItemGuid);\r\n      (this.source as DataAdapterBase & DataAdapterCanRefresh)?.forceReloadData?.([newItemGuid]);\r\n    }\r\n    l.end();\r\n  }\r\n\r\n  #toSelectedWithUiInfo(selected: string[], opts: PickerItem[]): PickerItem[] {\r\n    const l = this.log.fnIfInFields('addInfosFromSourceForUi', this.name, { selected, opts });\r\n\r\n    const result = selected.map(item => {\r\n      // If the selected item is not in the data, show the raw / original item\r\n      const original = opts.find(e => e.value === item);\r\n\r\n      return original\r\n        // Since we seem to have more information from the source, use that\r\n        ? createPickerItemFromItem(original, original.label ?? this.#translate.instant('Fields.Picker.EntityNotFound'))\r\n        // If it's not in the data, just show the value\r\n        : this.#createPickerItemFromValue(item);\r\n    });\r\n    return l.r(result);\r\n  }\r\n\r\n  //#region Text Mode\r\n\r\n  public isInFreeTextMode = signalObj('isInFreeTextMode', false);\r\n\r\n  toggleFreeTextMode(): void {\r\n    this.isInFreeTextMode.update(p => !p);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  #createPickerItemFromValue(value: string): PickerItem {\r\n    value = value?.toString() ?? '';  // safe to-string, so it's never 'undefined'\r\n\r\n    const validDataExpected = this.source instanceof DataAdapterEntityBase;\r\n\r\n    return {\r\n      // Special: if e.g. string with free text value which is not found, disable edit and delete.\r\n      // Otherwise we may see an edit-pencil for a value that is not in the dropdown (eg. a system query)\r\n      noEdit: true,\r\n      noDelete: true,\r\n      // either the real value or null if text-field or not found\r\n      id: null,\r\n      label: value + (validDataExpected ? ' ': ''),\r\n      tooltip: value + (validDataExpected ? `  ${this.#translate.instant('Fields.Picker.EntityNotFound')} - could result in error` : ' (manual entry)'),\r\n      value,\r\n    } satisfies PickerItem;\r\n  }\r\n}\r\n\r\n//#region Helper Functions for PickerItem\r\n\r\n\r\n\r\nfunction createPickerItemFromItem(original: PickerItem, label: string) {\r\n  return {\r\n    id: original.id,\r\n    value: original.value,\r\n    label,\r\n    tooltip: original.tooltip || `${label} (${original.value})`,\r\n    info: original.info || null,\r\n    link: original.link || null,\r\n    noEdit: original.noEdit === true,\r\n    noDelete: original.noDelete === true,\r\n    noSelect: false,\r\n  } satisfies PickerItem;\r\n}\r\n\r\n//#endregion","import { Injectable, Injector } from '@angular/core';\r\nimport { transient } from '../../../../../../core';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { InputTypeService } from '../../shared/input-types/input-type.service';\r\nimport { EavContentTypeAttribute } from '../../shared/models/eav';\r\nimport { PickerData } from './picker-data';\r\n\r\n/**\r\n * Factory for **creating** PickerData instances.\r\n * It will not set them up yet, because for that it needs the FieldState\r\n * which is not available at this time.\r\n */\r\n@Injectable()\r\nexport class PickerDataFactory {\r\n\r\n  log = classLog({PickerDataFactory});\r\n\r\n  constructor(private injector: Injector, private inputTypeSvc: InputTypeService) { }\r\n\r\n  createPickersForAttributes(attributes: EavContentTypeAttribute[]): Record<string, PickerData> {\r\n    const fields = attributes.map(a => ({ name: a.Name, inputType: this.inputTypeSvc.getSpecs(a)}));\r\n    return this.#createPickersData(fields);\r\n  }\r\n\r\n\r\n  #createPickersData(fields: { name: string, inputType: InputTypeSpecs}[]): Record<string, PickerData> {\r\n    const array = fields\r\n      .map(it => ({ name: it.name, picker: this.#createOne(it.inputType)}))\r\n      .filter(it => it.picker !== null);\r\n\r\n    return array.reduce((acc, it) => {\r\n      acc[it.name] = it.picker;\r\n      return acc;\r\n    }, {} as Record<string, PickerData>);\r\n  }\r\n\r\n  #createOne(inputType: InputTypeSpecs): PickerData {\r\n    return (InputTypeHelpers.isAnyPicker(inputType.inputType))\r\n      ? transient(PickerData, this.injector)\r\n      : null;\r\n  }\r\n};\r\n","import { CreateComputedOptions } from '@angular/core';\r\nimport { RxHelpers } from '../rxJs/rx.helpers';\r\nimport isEqual from 'lodash-es/isEqual';\r\n\r\nexport class SignalEquals {\r\n  /** Options for number signal to ensure equality only on value difference */\r\n  static bool: CreateComputedOptions<boolean> = {\r\n    equal: RxHelpers.valueEquals<boolean>\r\n  };\r\n\r\n  /** Options for string signal to ensure equality only on value difference */\r\n  static number: CreateComputedOptions<number> = {\r\n    equal: RxHelpers.valueEquals<number>\r\n  };\r\n\r\n  /** Options for string signal to ensure equality only on value difference */\r\n  static string: CreateComputedOptions<string> = {\r\n    equal: RxHelpers.valueEquals<string>\r\n  };\r\n\r\n  // note: this doesn't work as expected; leaving in so nobody tries to repeat this\r\n  // /** Options for string signal to ensure equality only on value difference */\r\n  // static valueEquals: CreateComputedOptions<boolean | string | number> = {\r\n  //   equal: RxHelpers.valueEquals<boolean | string | number>\r\n  // };\r\n\r\n  /**\r\n   * Helper to _not_ set the equal and use the standard equal.\r\n   * This is just to ensure that the code can explicitly show that RefEquals was expected,\r\n   * and not an oversight.\r\n   */\r\n  static ref = {  };\r\n}\r\n","import { Injectable, Signal, signal } from '@angular/core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { SignalEquals } from '../../shared/signals/signal-equals';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { LanguageService } from '../localization/language.service';\r\nimport { ItemService } from '../state/item.service';\r\nimport { FormConfigService } from './form-config.service';\r\n\r\n/**\r\n * Service to manage the state of forms.\r\n * Mainly to determine if valid, read-only etc.\r\n */\r\n@Injectable()\r\nexport class FormsStateService {\r\n\r\n  log = classLog({FormsStateService});\r\n\r\n  /** Signal which is filled by sub-dialogs to trigger save (other saves like ctrl+s don't go through this) */\r\n  public triggerTrySaveAndMaybeClose = signal({ tryToSave: false, close: false }, SignalEquals.ref);\r\n  public formsAreValid = signal(false);\r\n  public formsAreDirty = signal(false);\r\n\r\n  #formsValid: Record<string, boolean> = {};\r\n  #formsDirty: Record<string, boolean> = {};\r\n\r\n  readOnly: Signal<FormReadOnly> = (() => {\r\n    const itemHeaders = signal(this.formConfig.config.itemGuids\r\n      .map(guid => this.itemService.getItemHeaderSignal(guid))\r\n    );\r\n    const language = this.languageService.getAllSignal();\r\n\r\n    const readOnly = computedObj('readOnly', () => {\r\n      const itemsReadOnly = itemHeaders().some(itemHeader => itemHeader().EditInfo?.ReadOnly ?? false);\r\n      const languageAllowed = language().find(l => l.NameId === this.formConfig.language().current)?.IsAllowed ?? true;\r\n      const isReadOnly = itemsReadOnly || !languageAllowed;\r\n      const reason = itemsReadOnly ? 'Form' : !languageAllowed ? 'Language' : undefined;\r\n\r\n      return {\r\n        isReadOnly,\r\n        reason,\r\n      } satisfies FormReadOnly;\r\n    });\r\n    return readOnly;\r\n  })();\r\n\r\n  // readOnly: Signal<FormReadOnly>;\r\n  formsValidTemp = signal<boolean>(false);\r\n  saveButtonDisabled = computedObj('saveButtonDisabled', () => this.readOnly().isReadOnly || !this.formsValidTemp());\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private languageService: LanguageService,\r\n  ) {\r\n    // Reset initial dirty/valid states\r\n    for (const entityGuid of this.formConfig.config.itemGuids) {\r\n      this.#formsValid[entityGuid] = false;\r\n      this.#formsDirty[entityGuid] = false;\r\n    }\r\n  }\r\n\r\n  getFormValid(entityGuid: string) {\r\n    return this.#formsValid[entityGuid];\r\n  }\r\n\r\n  setFormValid(entityGuid: string, isValid: boolean) {\r\n    this.#formsValid[entityGuid] = isValid;\r\n\r\n    const allValid = !Object.values(this.#formsValid).some(valid => valid === false);\r\n    if (allValid !== this.formsValidTemp()) {\r\n      this.formsValidTemp.set(allValid);\r\n      this.formsAreValid.set(allValid);\r\n    }\r\n  }\r\n\r\n  setFormDirty(entityGuid: string, isDirty: boolean) {\r\n    this.#formsDirty[entityGuid] = isDirty;\r\n\r\n    const anyDirty = Object.values(this.#formsDirty).some(dirty => dirty === true);\r\n    if (anyDirty !== this.formsAreDirty())\r\n      this.formsAreDirty.set(anyDirty);\r\n  }\r\n\r\n  triggerSave(close: boolean) {\r\n    this.triggerTrySaveAndMaybeClose.set({ tryToSave: true, close });\r\n  }\r\n\r\n}\r\n\r\n\r\ninterface FormReadOnly {\r\n  isReadOnly: boolean;\r\n  reason: undefined | 'Form' | 'Language';\r\n}\r\n","import { inject, Injectable } from '@angular/core';\r\nimport { FeaturesService } from '../../features/features.service';\r\nimport { ItemIdentifierShared } from '../../shared/models/edit-form.model';\r\nimport { GlobalConfigService } from '../../shared/services/global-config.service';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { InitialValuesService } from '../form/initial-values-service';\r\nimport { LanguageService } from '../localization/language.service';\r\nimport { FieldsSettingsService } from '../state/fields-settings.service';\r\nimport { ItemService } from '../state/item.service';\r\nimport { FormulaPropsParameters } from './formula-run-one-helpers.factory';\r\nimport { FormulaExecutionSpecs } from './run/formula-objects-internal-data';\r\n\r\n/**\r\n * Factory for creating FormulaExecutionSpecs objects.\r\n * These are parameters needed to run formulas, which are reused quite a few times.\r\n */\r\n@Injectable()\r\nexport class FormulaExecutionSpecsFactory {\r\n\r\n  #features = inject(FeaturesService).getAll();\r\n  \r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private languageSvc: LanguageService,\r\n    private globalConfigSvc: GlobalConfigService,\r\n    private initialValuesService: InitialValuesService,\r\n  ) { }\r\n\r\n  init(settingsSvc: FieldsSettingsService, entityGuid: string, clientData: Pick<ItemIdentifierShared, \"ClientData\">) {\r\n    this.#entityGuid = entityGuid;\r\n    this.#settingsSvc = settingsSvc;\r\n    this.#clientData = clientData;\r\n  }\r\n\r\n  // properties to set on init\r\n  #entityGuid: string;\r\n  #settingsSvc: FieldsSettingsService;\r\n  #clientData: Pick<ItemIdentifierShared, \"ClientData\">;\r\n  \r\n  #warningsObsolete: Record<string, boolean> = {};\r\n\r\n  /**\r\n   * Get all objects which are needed for the data and context and are reused quite a few times.\r\n   * Can be reused for a short time, as the data doesn't change in a normal cycle,\r\n   * but it will need to be regenerated after things such as language or feature change.\r\n   */\r\n  getSharedSpecs(): FormulaExecutionSpecs {\r\n    const language = this.formConfig.language();\r\n    const languages = this.languageSvc.getAll();\r\n    const debugEnabled = this.globalConfigSvc.isDebug();\r\n    const initialFormValues = this.initialValuesService.get(this.#entityGuid, language.current);\r\n\r\n    return {\r\n      initialFormValues,\r\n      language,\r\n      languages,\r\n      debugEnabled,\r\n      itemService: this.itemService,\r\n      formConfig: this.formConfig,\r\n      fieldsSettingsSvc: this.#settingsSvc,\r\n      features: this.#features,\r\n      parameters: new FormulaPropsParameters(this.#clientData.ClientData?.parameters ?? {}),\r\n      warningsObsolete: this.#warningsObsolete,\r\n    } satisfies FormulaExecutionSpecs;\r\n  }\r\n}","import { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { InputTypeMetadata } from '../../shared/fields/input-type-metadata.model';\r\nimport { FieldSettingsHelperBase } from '../fields/logic/field-settings-helper-base';\r\nimport { PickerItem } from '../fields/picker/models/picker-item.model';\r\nimport { PickerData } from '../fields/picker/picker-data';\r\nimport { FormulaFieldValidation } from '../formulas/targets/formula-targets';\r\nimport { TranslationState } from '../localization/translate-state.model';\r\nimport { InputTypeSpecs } from '../shared/input-types/input-type-specs.model';\r\n\r\n/**\r\n * Field properties of a picker.\r\n * Implemented as a class, so we can use new FieldPropsPicker();\r\n * and reliably get undefined values (not null) to spread objects.\r\n */\r\nexport class FieldPropsPicker {\r\n  list: PickerItem[];\r\n  ver: number | undefined;\r\n}\r\n\r\nexport interface FieldProps {\r\n  /** The language which applied to these field props as added to cache */\r\n  language: string;\r\n  constants: FieldConstants;\r\n  settings: FieldSettings;\r\n  translationState: TranslationState;\r\n\r\n  /** INITIAL Value of this field - eg. at form-load or language change. */\r\n  value: FieldValue;\r\n  buildWrappers: string[];\r\n  formulaValidation: FormulaFieldValidation;\r\n\r\n  opts: FieldPropsPicker;\r\n  sel: FieldPropsPicker;\r\n}\r\n\r\n/** Field Config information which never changes through the entire lifetime in the UI */\r\nexport interface FieldConstants {\r\n  /** The GUID it belongs to - must always be provided */\r\n  entityGuid: string;\r\n\r\n  /** The EntityId is used in field masks (for placeholders and for certain delete operations) */\r\n  entityId: number;\r\n  contentTypeNameId: string;\r\n\r\n  /** The field name - always required */\r\n  fieldName: string;\r\n  index: number;\r\n\r\n  dropzonePreviewsClass?: string;\r\n  initialDisabled?: boolean;\r\n  inputTypeSpecs: InputTypeSpecs;\r\n  isLastInGroup?: boolean;\r\n  type: string;\r\n  logic?: FieldSettingsHelperBase,\r\n\r\n  pickerData: () => PickerData | null;\r\n}\r\n\r\n/** Extended field config information which is constant as long as the language doesn't change. */\r\nexport interface FieldConstantsOfLanguage extends FieldConstants {\r\n  /** The language used for the current \"constants\" */\r\n  language: string,\r\n\r\n  /** The initial field settings in this language */\r\n  settingsInitial: FieldSettings,\r\n\r\n  /** The input type configuration of this language */\r\n  inputTypeConfiguration: InputTypeMetadata,\r\n}\r\n\r\n\r\n\r\n","import { classLog, FnLogger } from '../../shared/logging';\r\nimport { getVersion } from '../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldConstantsOfLanguage, FieldProps } from '../state/fields-configs.model';\r\nimport { FormulaCacheItem } from './cache/formula-cache.model';\r\nimport { FieldFormulasResultPartialSettings, FieldFormulasResultRaw } from './results/formula-results.models';\r\nimport { FormulaRunPicker, FormulaRunPickers } from './run/formula-objects-internal-data';\r\nimport { FormulaSpecialPickerAutoSleep } from './targets/formula-targets';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getPickerInfos: false,\r\n  filterFormulasIfPickerNotReady: true,\r\n  fields: [...DebugFields],\r\n}\r\n\r\nexport class FormulaFieldPickerHelper {\r\n  \r\n  log = classLog({FormulaFieldPickerHelper}, logSpecs);\r\n\r\n  constructor(private fieldName: string, private fieldConstants: FieldConstantsOfLanguage, private propsBefore: FieldProps) {\r\n    this.isSpecialPicker = fieldConstants.inputTypeSpecs.isNewPicker\r\n  }\r\n\r\n  isSpecialPicker: boolean;\r\n\r\n  get infos() { return this.#infos ??= this.#getInfos(this.fieldName, this.fieldConstants, this.propsBefore); }\r\n  #infos: FormulaRunPickers;\r\n\r\n  //#endregion Prepare / Get Picker Infos / Select live formulas\r\n\r\n  /**\r\n   * Filter out formulas which should not run yet, for these reasons:\r\n   * 1. picker is not ready\r\n   * 2. picker is ready but nothing has changed, and \"sleep\" determines that in this case it shouldn't run.\r\n   */\r\n  public filterFormulasIfPickerNotReady(before: FormulaCacheItem[]) {\r\n    const l = this.log.fnIfInFields('filterFormulasIfPickerNotReady', this.fieldName, { before });\r\n    const picks = this.infos;\r\n\r\n    const ready = this.isSpecialPicker && !picks.ready\r\n      ? before.filter(f => !f.fieldIsSpecialPicker)\r\n      : before; \r\n      \r\n    // Figure out which picker-formulas must sleep\r\n    const formulas = ready.filter(f => !f.fieldIsSpecialPicker || (this.isSpecialPicker && !f.sleep || picks.changed));\r\n\r\n    const msg = ` before: ${before.length}; ready: ${ready.length}; formulas:${formulas.length}; pickerChanged: ${picks.changed}; opts: ${picks.options.changed}/${picks.options.ver}; sel: ${picks.selected.changed}/${picks.selected.ver}`;\r\n    return l.rSilent(formulas, msg);\r\n  }\r\n\r\n  #getInfos(fieldName: string, fieldConstants: FieldConstantsOfLanguage, propsBefore: FieldProps): FormulaRunPickers {\r\n    const l = this.log.fnIfInFields('getPickerInfos', fieldName);\r\n    // Get the latest picker data and check if it has changed - as it affects which formulas to run\r\n    const picker = fieldConstants.pickerData();\r\n    if (picker?.ready() != true) {\r\n      const dummy = { list: [], listRaw: [], ver: null, verBefore: null, changed: false, } as FormulaRunPicker;\r\n      return { ready: false, mapper: null, picker, options: dummy, selected: dummy, changed: false, };\r\n    }\r\n\r\n    function getSpecs(cache: typeof picker.optionsRaw, final: typeof picker.optionsRaw, verBefore: number): FormulaRunPicker {\r\n      const listRaw = cache(); // must access before version check\r\n      const ver = getVersion(cache);\r\n      return { list: final(), listRaw, ver, verBefore, changed: ver !== verBefore, } satisfies FormulaRunPicker;\r\n    }\r\n    const options = getSpecs(picker.optionsRaw, picker.optionsAll, propsBefore.opts?.ver);\r\n    const selected = getSpecs(picker.selectedRaw, picker.selectedAll, propsBefore.sel?.ver);\r\n\r\n    const result: FormulaRunPickers = {\r\n      ready: true,\r\n      mapper: picker.state.mapper,\r\n      picker,\r\n      options,\r\n      selected,\r\n      changed: selected.changed || options.changed,\r\n    };\r\n    return l.r(result);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Update Field Props\r\n\r\n  /**\r\n   * Pause depends on explicit result\r\n   */\r\n  public updateFormulaSleep(formula: FormulaCacheItem, raw: FieldFormulasResultRaw, l: FnLogger): void {\r\n    formula.sleep = raw.sleep ?? (FormulaSpecialPickerAutoSleep.includes(formula.target) ? true : formula.sleep);\r\n    l.a(`formula.sleep: ${formula.target}; formula.sleep: ${formula.sleep}; raw.sleep: ${raw.sleep}`);\r\n  }\r\n\r\n  /**\r\n   * Transfer options with version if result contains anything like that.\r\n   */\r\n  public preserveResultsAfterRun(formula: FormulaCacheItem, wip: FieldFormulasResultPartialSettings, raw: FieldFormulasResultRaw, l: FnLogger): FieldFormulasResultPartialSettings {\r\n\r\n    // picker data results - experimental v18\r\n    if (raw.options) {\r\n      wip.options = { list: raw.options, ver: this.infos.options.ver };\r\n      l.a(` options returned, will add`, wip.options as unknown as Record<string, unknown>);\r\n    }\r\n\r\n    if (raw.selected) {\r\n      wip.selected = { list: raw.selected, ver: this.infos.selected.ver };\r\n      l.a(` selected returned, will add`, wip.selected as unknown as Record<string, unknown>);\r\n    }\r\n\r\n    return wip;\r\n  }\r\n\r\n  //#endregion\r\n\r\n}","import { SettingsFormulaPrefix } from '../targets/formula-targets';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport isEqual from 'lodash-es/isEqual';\r\n\r\n/**\r\n * Contains methods for updating settings from formulas.\r\n */\r\nexport class FormulaSettingsHelper {\r\n\r\n  /**\r\n   * Possibly updates setting with formula result if target and type matches.\r\n   * @param target Formula target\r\n   * @param settings Last/Current settings\r\n   * @param valueNew Formula result needed for type checking\r\n   * @param settingsNew Settings that are possibly updated\r\n   * @returns True if setting is updated, false if it is not\r\n   */\r\n  static keepSettingIfTypeOk(\r\n    target: string,\r\n    settings: FieldSettings,\r\n    valueNew: any,\r\n    settingsNew: Partial<FieldSettings>,\r\n  ): Partial<FieldSettings> {\r\n    return FormulaSettingsHelper.keepSettingIfTypeOkAndStatus(target, settings, valueNew, settingsNew).settingsNew;\r\n  }\r\n\r\n  static keepSettingIfTypeOkAndStatus(\r\n    target: string,\r\n    settings: FieldSettings,\r\n    valueNew: any,\r\n    settingsNew: Partial<FieldSettings>,\r\n  ): { settingsNew: Partial<FieldSettings>, wasChanged: boolean } {\r\n    // Retrieve the previous setting\r\n    const settingName = target.substring(SettingsFormulaPrefix.length) as keyof FieldSettings;\r\n    const prevSetting = settings[settingName];\r\n\r\n    if (isEqual(prevSetting, valueNew))\r\n      return { settingsNew, wasChanged: false };\r\n\r\n    const keepNewSetting = (Array.isArray(prevSetting) && Array.isArray(valueNew)) // can't check types of items in array, hope for the best\r\n      || (typeof prevSetting === typeof valueNew); // maybe typesafe\r\n\r\n    if (!keepNewSetting)\r\n      return { settingsNew, wasChanged: false };\r\n\r\n    (settingsNew as Record<keyof FieldSettings, any>)[settingName] = valueNew;\r\n    return { settingsNew, wasChanged: true };\r\n  }\r\n}\r\n","import { untracked } from '@angular/core';\r\nimport groupBy from 'lodash-es/groupBy';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemIdentifierShared } from '../../shared/models/edit-form.model';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldDefaults } from '../shared/helpers';\r\nimport { FieldConstantsOfLanguage, FieldProps, FieldPropsPicker } from '../state/fields-configs.model';\r\nimport { FieldSettingsUpdateHelper } from '../state/fields-settings-update.helpers';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { FormulaCacheItem } from './cache/formula-cache.model';\r\nimport { FormulaDesignerService } from './designer/formula-designer.service';\r\nimport { FormulaFunctionV1, FormulaVersions } from './formula-definitions';\r\nimport { FormulaFieldPickerHelper } from './formula-field-picker.helper';\r\nimport { FormulaRunOneHelpersFactory } from './formula-run-one-helpers.factory';\r\nimport { FormulaPromiseHandler } from './promise/formula-promise-handler';\r\nimport { FieldFormulasResult, FieldFormulasResultPartialSettings, FieldFormulasResultRaw } from './results/formula-results.models';\r\nimport { FormulaSettingsHelper } from './results/formula-settings.helper';\r\nimport { FormulaExecutionSpecs, FormulaExecutionSpecsWithRunParams, FormulaRunParameters } from './run/formula-objects-internal-data';\r\nimport { FormulaFieldValidation } from './targets/formula-targets';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  runFormula: false,\r\n  runAllOfField: true,\r\n  runOrInitSettings: true,\r\n  getPickerInfos: false,\r\n  fields: [...DebugFields], // will be replaced by shared list below\r\n};\r\n\r\n/**\r\n * Run all formulas of a single field.\r\n * Will also ensure that any settings are initialized properly if not yet created.\r\n */\r\nexport class FormulaRunField {\r\n\r\n  log = classLog({FormulaRunField}, logSpecs);\r\n\r\n  constructor(\r\n    private promiseHandler: FormulaPromiseHandler,\r\n    private designerSvc: FormulaDesignerService,\r\n    private entityGuid: string,\r\n    private runOneHelper: FormulaRunOneHelpersFactory,\r\n  ) { }\r\n\r\n  /**\r\n   * Used for running all formulas for a given attribute/field.\r\n   * @returns Object with all changes that formulas should make\r\n   */\r\n  runOrInitSettings(\r\n    currentValues: ItemValuesOfLanguage,\r\n    fieldName: string,\r\n    fieldConstants: FieldConstantsOfLanguage,\r\n    settingsCurrent: FieldSettings,\r\n    itemHeader: Pick<ItemIdentifierShared, \"Prefill\">,\r\n    valueBefore: FieldValue,\r\n    propsBefore: FieldProps,\r\n    reuseExecSpecs: FormulaExecutionSpecs,\r\n    setUpdHelper: FieldSettingsUpdateHelper,\r\n  ): FieldFormulasResult {\r\n    const l = this.log.fnIfInFields('runOrInitSettings', fieldName, { fieldName });\r\n\r\n    // Get the latest picker data and check if it has changed - as it affects which formulas to run\r\n    const pickHelp = new FormulaFieldPickerHelper(fieldName, fieldConstants, propsBefore);\r\n\r\n    // Get the latest formulas. Use untracked() to avoid tracking the reading of the formula-cache\r\n    // TODO: should probably use untracked around all the calls in this class...WIP 2dm\r\n    const fAll = untracked(() => this.designerSvc.cache.getActive(this.entityGuid, fieldName, pickHelp.isSpecialPicker));\r\n    const fGrouped = groupBy(fAll, f => f.disabled ? 'disabled' : 'enabled');\r\n    if (fGrouped.disabled)\r\n      this.#showDisabledFormulasWarnings(fGrouped.disabled);\r\n\r\n    const enabled = fGrouped.enabled ?? [];\r\n\r\n    const noPromiseSleep = this.promiseHandler.filterFormulas(fieldName, enabled)\r\n\r\n    // If we're working on the picker, but it's not ready yet, we must skip these formulas\r\n    const formulas = pickHelp.filterFormulasIfPickerNotReady(noPromiseSleep);\r\n\r\n    l.a(` enabled: ${enabled.length}; noPromisesSleep: ${noPromiseSleep.length}; formulas: ${formulas.length}`);\r\n\r\n    // If we have no formulas, exit early.\r\n    if (formulas.length == 0)\r\n      return finalize({}, valueBefore, {\r\n        value: valueBefore, validation: null, fields: [], settings: {},\r\n        options: new FieldPropsPicker(), selected: new FieldPropsPicker(),\r\n      } satisfies FieldFormulasResultPartialSettings);\r\n\r\n    // Run all formulas IF we have any and work with the objects containing specific changes\r\n    const runParamsStatic: Omit<FormulaRunParameters, 'formula'> = {\r\n      currentValues,\r\n      settingsInitial: fieldConstants.settingsInitial,\r\n      settingsCurrent,\r\n      pickerHelper: pickHelp,\r\n      defaultValueHelper: () => new FieldDefaults(fieldName, fieldConstants.inputTypeSpecs.inputType, fieldConstants.settingsInitial, itemHeader),\r\n    };\r\n    const raw = this.#runAllOfField(runParamsStatic, formulas, reuseExecSpecs);\r\n\r\n    return finalize(raw.settings, raw.value, raw);\r\n\r\n    // Helper to finalize the result, needed to quit early and also when it really runs\r\n    function finalize(settingsUpdate: Partial<FieldSettings>, value: FieldValue, raw: FieldFormulasResultPartialSettings): FieldFormulasResult {\r\n      // Correct any settings necessary after\r\n      // possibly making invalid changes in formulas or if settings need to adjust\r\n      // eg. custom bool labels which react to the value, etc.\r\n      const settings = setUpdHelper.correctSettingsAfterChanges({ ...settingsCurrent, ...settingsUpdate }, value || valueBefore);\r\n\r\n      // If it's a new picker, make sure that requirement is set.\r\n      if (fAll.length > 0 && pickHelp.isSpecialPicker)\r\n        settings.requiredFeatures = [ ...settings.requiredFeatures ?? [], FeatureNames.PickerFormulas ];\r\n      return l.r({ ...raw, settings, } satisfies FieldFormulasResult);\r\n    }\r\n  }\r\n\r\n  #showDisabledFormulasWarnings(disabled: FormulaCacheItem[]): void {\r\n    for (const formula of disabled)\r\n      console.warn(`Formula on field '${formula.fieldName}' with target '${formula.target}' is disabled. Reason: ${formula.disabledReason}`);\r\n  }\r\n\r\n  #runAllOfField(\r\n    runParams: Omit<FormulaRunParameters, 'formula'>,\r\n    formulas: FormulaCacheItem[],\r\n    reuseObjectsForFormulaDataAndContext: FormulaExecutionSpecs,\r\n  ): FieldFormulasResultPartialSettings {\r\n    const l = this.log.fnIfInFields('runAllOfField', formulas[0].fieldName, { runParams, formulas });\r\n\r\n    // Target variables to fill using formula result\r\n    let wip: FieldFormulasResultPartialSettings = {\r\n      value: undefined,                 // The new value\r\n      validation: undefined,            // The new validation\r\n      fields: [],                       // Any additional fields\r\n      options: new FieldPropsPicker(),  // Picker options\r\n      selected: new FieldPropsPicker(), // Picker selected\r\n      settings: {},                     // New settings - which can be updated multiple times by formulas\r\n    };\r\n\r\n    const start = performance.now();\r\n    for (const formula of formulas) {\r\n\r\n      const allRunParams: FormulaExecutionSpecsWithRunParams = {\r\n        runParameters: { formula, ...runParams, },\r\n        ...reuseObjectsForFormulaDataAndContext\r\n      };\r\n\r\n      const raw = this.#runFormula(allRunParams);\r\n      l.a(`formula result`, { formula, raw });\r\n\r\n      // Picker: First check sleep (before promise) since the promise will also need that\r\n      runParams.pickerHelper.updateFormulaSleep(formula, raw, l);\r\n\r\n      // Update Stop-State of formula in cache\r\n      this.promiseHandler.updateStop(formula, raw);\r\n\r\n      // Promise: Pick up in PromiseHandler if necessary and auto-stop if not explicitly set\r\n      this.promiseHandler.handleStopAndPromise(formula, raw);\r\n\r\n      // Picker: picker data results - experimental v18\r\n      wip = runParams.pickerHelper.preserveResultsAfterRun(formula, wip, raw, l);\r\n        \r\n      // If we have field changes, add to the list\r\n      if (raw.fields)\r\n        wip.fields.push(...raw.fields);\r\n\r\n      // If the value is not set, skip further result processing\r\n      if (raw.value === undefined)\r\n        continue;\r\n\r\n      // If we do have a value, we need to place it in the correct target\r\n      switch (true) {\r\n        // Target is the value. Remember it for later\r\n        case formula.isValue:\r\n          wip.value = raw.value;\r\n          break;\r\n\r\n        // Target is the validation. Remember it for later\r\n        case formula.isValidation:\r\n          wip.validation = raw.value as unknown as FormulaFieldValidation;\r\n          break;\r\n\r\n        // Target is a setting. Check validity and merge with other settings\r\n        case formula.isSetting:\r\n          wip.settings = FormulaSettingsHelper.keepSettingIfTypeOk(formula.target, runParams.settingsCurrent, raw.value, wip.settings);\r\n          break;\r\n      }\r\n    }\r\n    const afterRun = performance.now();\r\n\r\n    return l.r(wip, `runAllFormulas Time: ${afterRun - start}ms`);\r\n  }\r\n\r\n  /**\r\n   * Used for running a single formula and returning the result.\r\n   * @param formula\r\n   * @param entityId\r\n   * @param formValues\r\n   * @param inputType\r\n   * @param settingsInitial\r\n   * @param settingsCurrent\r\n   * @param itemIdWithPrefill\r\n   * @returns Result of a single formula.\r\n   */\r\n  #runFormula(execSpecs: FormulaExecutionSpecsWithRunParams): FieldFormulasResultRaw {\r\n\r\n    const { formula, fieldName, params, title, devHelper, valHelper } = this.runOneHelper.getPartsFor(execSpecs);\r\n\r\n    const l = this.log.fnIfInFields('runFormula', fieldName, { fieldName });\r\n\r\n    l.a(`formula version: ${formula.version}, entity: ${title}, field: ${fieldName}, target: ${formula.target}`, {formula});\r\n    try {\r\n      devHelper.showStart();\r\n\r\n      switch (formula.version) {\r\n        // Formula V1\r\n        case FormulaVersions.V1:\r\n          // 2025-04-22 #DropFormulaParamExperimental - remove this comment and warnings ca. 2026-Q2\r\n          const v1Raw = (formula.fn as FormulaFunctionV1)(params.data, params.context /*, params.experimental */);\r\n          const { ok, v1Result: valueV1 } = valHelper.v1(v1Raw);\r\n          if (ok) {\r\n            l.a('V1 formula result is pure', { v1Raw, valueV1 });\r\n            devHelper.showResult(valueV1.value, false, false);\r\n            return valueV1;\r\n          }\r\n          l.a('V1 formula result is not pure', { v1Raw });\r\n          console.error('V1 formulas accept only simple values in return statements. If you need to return an complex object, use V2 formulas.');\r\n          return valHelper.toFormulaResult(undefined);\r\n\r\n        // Formula V2\r\n        case FormulaVersions.V2:\r\n          //TODO: @2dm -> Added item as last argument so if ew use experimental anywhere nothing breaks\r\n          // 2025-04-22 #DropFormulaParamExperimental - remove this comment and warnings ca. 2026-Q2\r\n          const v2Raw = (formula.fn as FormulaFunctionV1)(params.data, params.context /*, params.experimental */);\r\n          const v2Value = valHelper.v2(v2Raw);\r\n          devHelper.showResult(v2Value.options as any ?? v2Value.value, false, !!v2Value.promise);\r\n          return v2Value;\r\n\r\n        default:\r\n          // default should never happen, so don't return any data to use; will probably error if this happens\r\n          throw new Error(`Formula version unknown not supported`);\r\n      }\r\n    } catch (error) {\r\n      devHelper.showError(error);\r\n      return valHelper.toFormulaResult(undefined);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemIdentifierShared } from '../../shared/models/edit-form.model';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { EavContentType, EavContentTypeAttribute } from '../shared/models/eav';\r\nimport { LoggingService } from '../shared/services/logging.service';\r\nimport { FieldsSettingsHelpers } from '../state/field-settings.helper';\r\nimport { FieldProps } from '../state/fields-configs.model';\r\nimport { FieldsPropsEngine } from '../state/fields-properties-engine';\r\nimport { FieldsPropsEngineCycle } from '../state/fields-properties-engine-cycle';\r\nimport { FieldsSettingsService } from '../state/fields-settings.service';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { FormulaDesignerService } from './designer/formula-designer.service';\r\nimport { FormulaExecutionSpecsFactory } from './formula-exec-specs.factory';\r\nimport { FormulaRunField } from './formula-run-field';\r\nimport { FormulaRunOneHelpersFactory } from './formula-run-one-helpers.factory';\r\nimport { FormulaPromiseHandler } from './promise/formula-promise-handler';\r\nimport { NameValuePair } from './results/formula-results.models';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getFormulas: false,\r\n  runAllFields: true,\r\n  runFormula: false,\r\n  runOneFieldOrInitSettings: false,\r\n  fields: [...DebugFields], // or '*' for all\r\n};\r\n\r\n/**\r\n * Formula engine is responsible for running formulas and returning the result.\r\n *\r\n * Each instance of the engine is responsible for a _single_ entity.\r\n */\r\n@Injectable()\r\nexport class FormulaEngine {\r\n\r\n  log = classLog({FormulaEngine}, logSpecs);\r\n\r\n  #formulaExecSpecsFactory = transient(FormulaExecutionSpecsFactory);\r\n\r\n  constructor(\r\n    private designerSvc: FormulaDesignerService,\r\n    private logSvc: LoggingService,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  init(\r\n    entityGuid: string,\r\n    clientData: Pick<ItemIdentifierShared, \"ClientData\">,\r\n    settingsSvc: FieldsSettingsService,\r\n    promiseHandler: FormulaPromiseHandler,\r\n    contentType: EavContentType,\r\n    ctTitle: string\r\n  ) {\r\n    this.#entityGuid = entityGuid;\r\n    this.#promiseHandler = promiseHandler;\r\n    this.#contentType = contentType;\r\n    this.#attributes = contentType.Attributes;\r\n    this.#contentTypeTitle = ctTitle;\r\n    this.#formulaExecSpecsFactory.init(settingsSvc, entityGuid, clientData);\r\n  }\r\n\r\n  // properties to set on init\r\n  #entityGuid: string;\r\n  #contentTypeTitle: string;\r\n  #promiseHandler: FormulaPromiseHandler;\r\n  #contentType: EavContentType;\r\n  #attributes: EavContentTypeAttribute[];\r\n\r\n  runAllFields(propsEngine: FieldsPropsEngine, cycle: FieldsPropsEngineCycle) {\r\n    const fieldsProps: Record<string, FieldProps> = {};\r\n    const valueUpdates: ItemValuesOfLanguage = {};\r\n    const fieldUpdates: NameValuePair[] = [];\r\n\r\n    // Many aspects of a field are re-usable across formulas, so we prepare them here\r\n    // These are things explicit to the entity and either never change, or only rarely\r\n    // so never between cycles\r\n    const reuseExecSpecs = this.#formulaExecSpecsFactory.getSharedSpecs();\r\n\r\n    const fss = new FieldsSettingsHelpers(this.log.name);\r\n\r\n    for (const attr of this.#attributes) {\r\n      const lAttr = this.log.fnIfInFields('runAllFields', attr.Name, { fieldName: attr.Name });\r\n      const values = cycle.allAttributes[attr.Name];\r\n      const valueBefore = cycle.values[attr.Name];\r\n\r\n      const fieldConstants = cycle.getFieldConstants(attr.Name);\r\n      const latestSettings = cycle.getFieldSettingsInCycle(fieldConstants);\r\n      const settingsUpdateHelper = cycle.updateHelper.create(attr.Name, attr, fieldConstants, values);\r\n\r\n      const propsBefore = cycle.fieldProps[attr.Name] ?? {} as FieldProps;\r\n\r\n      // run formulas\r\n      const runOneHelper = new FormulaRunOneHelpersFactory(this.designerSvc, this.translate, this.logSvc, this.#contentType, this.#entityGuid, this.#contentTypeTitle);\r\n      const runOne = new FormulaRunField(this.#promiseHandler, this.designerSvc, this.#entityGuid, runOneHelper);\r\n      const allResults = runOne.runOrInitSettings(\r\n        cycle.values,\r\n        attr.Name,\r\n        fieldConstants,\r\n        latestSettings,\r\n        propsEngine.item.Header,\r\n        valueBefore,\r\n        propsBefore,\r\n        reuseExecSpecs,\r\n        settingsUpdateHelper,\r\n      );\r\n\r\n      const fixed = allResults.settings;\r\n\r\n      // Add any value changes to the queue for finalizing\r\n      valueUpdates[attr.Name] = allResults.value;\r\n\r\n      // If _other_ fields were updated, add it to the queue for later processing\r\n      if (allResults.fields)\r\n        fieldUpdates.push(...allResults.fields);\r\n\r\n      const debugDetails = lAttr.enabled;\r\n      const translationState = fss.getTranslationState(values, fixed.DisableTranslation, propsEngine.languages, debugDetails);\r\n\r\n      if (allResults.options.list)\r\n        lAttr.a('picker options', { options: allResults.options.list, version: allResults.options.ver });\r\n      if (allResults.selected.list)\r\n        lAttr.a('picker selected', { selected: allResults.selected.list, version: allResults.options.ver });\r\n\r\n      fieldsProps[attr.Name] = {\r\n        ...propsBefore,\r\n        language: fieldConstants.language,\r\n        constants: fieldConstants,\r\n        settings: fixed,\r\n        translationState,\r\n        value: valueBefore,\r\n        buildWrappers: null, // required, but set elsewhere\r\n        formulaValidation: allResults.validation,\r\n        // Options and Selected. Use spread, as values must be undefined if not updated\r\n        opts: { ...propsBefore.opts, ...allResults.options, },\r\n        sel: { ...propsBefore.sel, ...allResults.selected, },\r\n      };\r\n    }\r\n    return { fieldsProps, valueUpdates, fieldUpdates };\r\n  }\r\n}\r\n","import { FieldValueOrResultRaw, NameValuePair } from \"../results/formula-results.models\";\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\n\r\n/**\r\n * The result of a formula promise.\r\n * Contains queues of things to broadcast on the next processing cycle.\r\n */\r\nexport class FormulaPromiseResult {\r\n  constructor(public entityGuid: string) { }\r\n\r\n  public data: Record<string, FormulaPromiseResultField> = {};\r\n}\r\n\r\ninterface FormulaPromiseResultField {\r\n  name: string;\r\n  value?: FieldValue;\r\n  fields: NameValuePair[];\r\n  settings: Record<string, unknown>;\r\n}\r\n\r\nexport interface FieldSettingPair {\r\n  name: string;\r\n  settings: NameValuePair[];\r\n}\r\n\r\n\r\nexport interface FormulaPromise {\r\n  promise: Promise<FieldValueOrResultRaw>;\r\n  sleep: boolean;\r\n  completed: boolean;\r\n}","import { Injectable, Signal } from \"@angular/core\";\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { EavContentType } from \"../../shared/models/eav\";\r\nimport { FieldProps } from '../../state/fields-configs.model';\r\nimport { FieldsPropsEngineCycle } from '../../state/fields-properties-engine-cycle';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { FieldsValuesModifiedHelper } from '../../state/fields-values-modified.helper';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FieldFormulasResultRaw, FieldValueOrResultRaw } from \"../results/formula-results.models\";\r\nimport { FormulaSettingsHelper } from \"../results/formula-settings.helper\";\r\nimport { FormulaValueCorrections } from \"../results/formula-value-corrections.helper\";\r\nimport { SettingsFormulaPrefix } from '../targets/formula-targets';\r\nimport { FormulaPromiseResult } from \"./formula-promise-result.model\";\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  addFormulaPromise: true,\r\n  updateStop: false,\r\n  defineCallbackHandlerIfMissing: false,\r\n  changesFromQueue: false,\r\n  promiseComplete: true,\r\n  filterFormulas: true,\r\n  fields: [...DebugFields], // or '*' for all\r\n};\r\n\r\n/**\r\n * FormulaPromiseHandler is responsible for handling the promise parts of formula results.\r\n * \r\n * It is responsible for a single entity.\r\n */\r\n@Injectable()\r\nexport class FormulaPromiseHandler {\r\n\r\n  log = classLog({FormulaPromiseHandler}, logSpecs);\r\n\r\n  // #contentTypeSvc = inject(ContentTypeService);\r\n\r\n  constructor(private itemSvc: ItemService) { }\r\n\r\n  #updateValueQueue: Record<string, FormulaPromiseResult> = {};\r\n  \r\n  init(entityGuid: string,\r\n    contentType: Signal<EavContentType>,\r\n    fieldsSettingsService: FieldsSettingsService,\r\n    modifiedChecker: FieldsValuesModifiedHelper,\r\n  ) {\r\n    this.#entityGuid = entityGuid;\r\n    this.#fieldsSettingsService = fieldsSettingsService;\r\n    this.#contentType = contentType;\r\n    this.#modifiedChecker = modifiedChecker;\r\n  }\r\n\r\n  #fieldsSettingsService: FieldsSettingsService = null;\r\n  #entityGuid: string;\r\n  #contentType: Signal<EavContentType>;\r\n  #modifiedChecker: FieldsValuesModifiedHelper;\r\n\r\n  public updateStop(formula: FormulaCacheItem, raw: FieldFormulasResultRaw): void {\r\n    const l = this.log.fnIfInFields('updateStop', formula.fieldName, { promiseResult: raw, formula }, formula.target);\r\n\r\n    const hasPromise = raw.promise instanceof Promise;\r\n\r\n    // Stop depends on explicit result and the default is different if it has a promise\r\n    // TODO: CONTINUE HERE - probably stop being set aggressively even if sleeping...\r\n    // Sleep state not fully resolved...\r\n    const newStop = raw.stop ?? (hasPromise ? true : formula.stop); \r\n    const msg = ` formula.stop: ${formula.stop}; raw.stop: ${raw.stop}; hasPromise: ${hasPromise}; newStop: ${newStop}`;\r\n    formula.stop = newStop;\r\n    return l.end(msg);\r\n  }\r\n\r\n  /**\r\n   * Used for filling queue and triggering next run.\r\n   * @param raw\r\n   * @param formula\r\n   * @param inputTypeName\r\n   */\r\n  public handleStopAndPromise(formula: FormulaCacheItem, raw: FieldFormulasResultRaw): void {\r\n    const l = this.log.fnIfInFields('addFormulaPromise', formula.fieldName, { promiseResult: raw, formula }, formula.target);\r\n\r\n    // If no promise, exit early\r\n    if (!(raw.promise instanceof Promise))\r\n      return l.end('no promise');\r\n    \r\n    // If the user is currently editing this formula,\r\n    // give him additional info about stopping.\r\n    if (raw.openInDesigner && raw.stop === null)\r\n      console.log(`FYI: formula returned a promise. This automatically stops this formula from running again. If you want it to continue running, return stop: false`);\r\n    \r\n    // Check sleep state (new feat in v18 for Pickers (state/data))\r\n    // Unclear if this should be here in the promise handling...\r\n    const sleep = raw.sleep ?? false;\r\n    \r\n    // If result _contains_ a promise, add it to the queue\r\n    // Add promise to the queue / ensure callback handling ???\r\n    formula.promises$.next({ promise: raw.promise, sleep, completed: false });\r\n    this.#defineCallbackHandlerIfMissing(formula);\r\n\r\n    return l.end(`promise added, sleep: ${sleep}`);\r\n  }\r\n\r\n  /**\r\n   * Filter out formulas which shouldn't run because of promises. Rules are:\r\n   * - not stopped (this is not handled here, as it applies to non-promise formulas too)\r\n   * - has promise, but is sleeping so we don't want to run it until it has completed\r\n   * @param fieldName \r\n   * @param before \r\n   * @returns \r\n   */\r\n  public filterFormulas(fieldName: string, before: FormulaCacheItem[]) {\r\n    const l = this.log.fnIfInFields('filterFormulas', fieldName, { enabled: before });\r\n    const formulas = before.filter(f => {\r\n      const promise = f.promises$.value;\r\n      l.a(`hasPromise: ${!!promise}; completed: ${promise?.completed}; sleep: ${promise?.sleep}`);\r\n      return !promise || (promise.completed || !promise.sleep);\r\n    });\r\n    const msg = ` beforeFilter: ${before.length}; formulas: ${formulas.length}; `;\r\n    return l.rSilent(formulas, msg);\r\n  }\r\n\r\n\r\n  /**\r\n   * Used for defining the callback handler for the promise if it doesn't already exist and filling queue for the next run.\r\n   * @param formula\r\n   * @param inputType\r\n   * @param entityGuid\r\n   */\r\n  #defineCallbackHandlerIfMissing(formula: FormulaCacheItem): void {\r\n    const entityGuid = this.#entityGuid;\r\n    const lcb = this.log.fnIfInFields('defineCallbackHandlerIfMissing', formula.fieldName, { formula, entityGuid }, formula.target);\r\n    if (formula.updateCallback$.value)\r\n      return lcb.end('callback already defined');\r\n\r\n    formula.updateCallback$.next((result: FieldValueOrResultRaw) => this.#promiseComplete(formula, result));\r\n  }\r\n\r\n  #promiseComplete(formula: FormulaCacheItem, result: FieldValueOrResultRaw): void {\r\n    const entityGuid = this.#entityGuid;\r\n    const l = this.log.fnIfInFields('promiseComplete', formula.fieldName, { result, formula, entityGuid }, formula.target);\r\n    const fieldName = formula.fieldName;\r\n    const raw = new FormulaValueCorrections(this.#contentType(), entityGuid, fieldName, formula.isValue, formula.inputType, false).v2(result);\r\n\r\n    // Make sure the cache contains this entry\r\n    const queue = this.#updateValueQueue;\r\n    const queueItem = queue[entityGuid] ??= new FormulaPromiseResult(entityGuid);      \r\n    const fieldQueue = queueItem.data[fieldName] ??= {\r\n      name: fieldName,\r\n      value: formula.isValue ? raw.value : undefined,\r\n      fields: [],\r\n      settings: {}\r\n    };\r\n\r\n    if (formula.isSetting) {\r\n      // New v18 settings are added to the field settings\r\n      l.a(\"formula promise settings\");\r\n      fieldQueue.settings ??= {};\r\n      fieldQueue.settings[formula.settingName] = raw.value;\r\n    }\r\n\r\n    if (raw.fields) {\r\n      l.a(\"formula promise fields\");\r\n      fieldQueue.fields.push(...raw.fields);\r\n    }\r\n\r\n    // new WIP\r\n    formula.stop = raw.stop ?? formula.stop;\r\n    formula.promiseCompleted = true;\r\n    l.end('promise complete, will retriggerFormulas', fieldQueue as unknown as Record<string, unknown>);\r\n    this.#fieldsSettingsService.retriggerFormulas('promise');\r\n  }\r\n\r\n  /**\r\n   * Used for updating values and cleaning settings from queue.\r\n   * @returns true if values were updated, false otherwise and new field props\r\n   */\r\n  public changesFromQueue(cycle: FieldsPropsEngineCycle): QueuedChanges {\r\n    // Get data from change queue and then flush, as we'll process it next and in case of errors we don't want to reprocess it\r\n    const toProcess = this.#updateValueQueue[this.#entityGuid];\r\n    this.#updateValueQueue[this.#entityGuid] = null;\r\n\r\n    // If nothing in the queue for this entity, exit early\r\n    if (toProcess == null || toProcess.data == null || Object.keys(toProcess.data).length === 0)\r\n      return { valueChanges: {}, newFieldProps: null };\r\n\r\n    // Updates to process/import\r\n    const dataEntries = Object.entries(toProcess.data);\r\n    const valuesArray = dataEntries.map(([name, field]) => ({ name, value: field.value }));\r\n    const values = valuesArray.reduce((acc, { name, value }) => {\r\n      acc[name] = value;\r\n      return acc;\r\n    }, {} as ItemValuesOfLanguage);\r\n\r\n    const fields = dataEntries\r\n      .filter(([_, field]) => field.fields.length > 0)\r\n      .map(([_, field]) => field.fields)\r\n      .flat();\r\n\r\n    const settings = dataEntries\r\n      .filter(([_, field]) => Object.keys(field.settings).length > 0)\r\n      .map(([name, field]) => ({ fieldName: name, settings: field.settings }));\r\n\r\n    // Handle values (of this field) and fields (values of other fields)\r\n    const modifiedValues = (Object.keys(values).length !== 0 || fields.length !== 0)\r\n      ? this.#modifiedChecker.getValueUpdates(cycle, fields, values)\r\n      : {};\r\n\r\n    // Handle settings\r\n    const contentType = this.#contentType();\r\n    let newFieldProps: Record<string, FieldProps> = null;\r\n    if (settings.length) {\r\n      newFieldProps = { ...cycle.fieldProps };\r\n      const itemAttributes = this.itemSvc.getItemAttributes(this.#entityGuid);\r\n      Object.values(settings).forEach(setting => {\r\n        const fieldName = setting.fieldName;\r\n        const settingsCurrent = cycle.fieldProps[fieldName]?.settings;\r\n        \r\n        let settingsNew: Partial<FieldSettings> = {};\r\n        Object.entries(setting.settings).forEach(([name, value]) => {\r\n          const target = SettingsFormulaPrefix + name;\r\n          settingsNew = FormulaSettingsHelper.keepSettingIfTypeOk(target, settingsCurrent, value, settingsNew);\r\n\r\n          const constantFieldPart = cycle.getFieldConstants(fieldName);\r\n          const attribute = contentType.Attributes.find(a => a.Name === fieldName);\r\n\r\n          // Prepare helper which the formula will need to verify if the field is visible\r\n          const setUpdHelper = cycle.updateHelper.create(fieldName, attribute, constantFieldPart, itemAttributes[fieldName]);\r\n\r\n          const mergedSettings = { ...settingsCurrent, ...settingsNew };\r\n          const updatedSettings = setUpdHelper.correctSettingsAfterChanges(mergedSettings, cycle.values[fieldName]);\r\n\r\n          newFieldProps[fieldName] = { ...newFieldProps[fieldName], settings: updatedSettings };\r\n        });\r\n\r\n      });\r\n    }\r\n\r\n    return { valueChanges: modifiedValues, newFieldProps };\r\n  }\r\n}\r\n\r\ninterface QueuedChanges {\r\n  /** value changes, may not be null */\r\n  valueChanges: ItemValuesOfLanguage,\r\n  newFieldProps: Record<string, FieldProps>\r\n}","import { FieldMetadataModel } from '../field-metadata.decorator';\r\n\r\n// Note: When creating new wrappers, do this\r\n// 1. Create the component\r\n// 2. Add it to the catalog above\r\n// 3. Make sure the class name is unique...\r\n// 4. ...and that i uses the name from the WrappersCatalog above\r\n// 5. Then also register it in the `InputComponents` list with the name and control\r\n// 6. If it should be applied to many controls, register in the `WrapperHelper` at the right place\r\n// ...otherwise add it as a `@FieldMetadata` to the field (remember that this only works on the entry component)\r\n\r\nexport const WrappersCatalog = {\r\n  AdamWrapper: 'app-adam-wrapper', // default\r\n  CollapsibleWrapper: 'app-collapsible-wrapper', // empty specific\r\n  DropzoneWrapper: 'app-dropzone-wrapper', // default\r\n  PickerExpandableWrapper: 'app-picker-expandable-wrapper', // entity specific\r\n  PickerPreviewWrapper: 'app-picker-preview-wrapper', // entity specific\r\n  ExpandableWrapper: 'app-expandable-wrapper', // default\r\n  HiddenWrapper: 'app-hidden-wrapper', // default\r\n  FeatureWarningWrapper: 'app-feat-warnings-wrapper', // default\r\n  HyperlinkDefaultExpandableWrapper: 'app-hyperlink-default-expandable-wrapper', // hyperlink specific\r\n  HyperlinkLibraryExpandableWrapper: 'app-hyperlink-library-expandable-wrapper', // hyperlink specific\r\n  DialogPopup: 'app-dialog-popup', // hyperlink specific\r\n  LocalizationWrapper: 'app-localization-wrapper', // default\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\nexport const WrappersLocalizationOnly: FieldMetadataModel = {\r\n  wrappers: [WrappersCatalog.LocalizationWrapper],\r\n};\r\n\r\n\r\n","import { Of } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { WrappersCatalog } from './wrappers.constants';\r\n\r\nconst logThis = false;\r\n\r\nexport class WrapperHelper {\r\n\r\n  static getWrappers(settings: FieldSettings, inputTypeSpecs: InputTypeSpecs): Of<typeof WrappersCatalog>[] {\r\n    const inputType = inputTypeSpecs.inputType;\r\n\r\n    if (InputTypeHelpers.isMessage(inputType))\r\n      return [];\r\n\r\n    // Empty input type wrappers - in this case, exit early\r\n    if (InputTypeHelpers.isGroupStart(inputType))\r\n      return [WrappersCatalog.CollapsibleWrapper];\r\n\r\n    // Start with default wrappers for all controls\r\n    const wrappers: Of<typeof WrappersCatalog>[] = [\r\n      WrappersCatalog.HiddenWrapper\r\n    ];\r\n\r\n    // entity-default/string-dropdown wrappers\r\n    const inputsEntityOrStringDropdown: string[] = [\r\n      InputTypeCatalog.EntityDefault,\r\n      InputTypeCatalog.StringDropdownQuery,\r\n      InputTypeCatalog.EntityQuery,\r\n      InputTypeCatalog.EntityContentBlocks,\r\n      InputTypeCatalog.StringDropdown,\r\n      InputTypeCatalog.EntityPicker,\r\n      InputTypeCatalog.StringPicker,\r\n      InputTypeCatalog.NumberPicker,\r\n      // InputTypeCatalog.StringFontIconPicker,\r\n      // || (inputType === InputTypeConstants.WIPNumberPicker);\r\n    ];\r\n    const isEntityOrStringDropdownType = inputsEntityOrStringDropdown.includes(inputType);\r\n\r\n    if (isEntityOrStringDropdownType) {\r\n      // New ...\r\n      wrappers.push(WrappersCatalog.FeatureWarningWrapper);\r\n      // i18n\r\n      wrappers.push(WrappersCatalog.LocalizationWrapper);\r\n      const allowMultiValue = (settings as FieldSettings & FieldSettingsPickerMerged).AllowMultiValue ?? false;\r\n      if (allowMultiValue || inputType === InputTypeCatalog.EntityContentBlocks)\r\n        wrappers.push(WrappersCatalog.PickerExpandableWrapper);\r\n    }\r\n\r\n    // External components should always get these wrappers\r\n    if (inputTypeSpecs.isExternal)\r\n      wrappers.push(\r\n        WrappersCatalog.DropzoneWrapper,\r\n        WrappersCatalog.LocalizationWrapper,\r\n        WrappersCatalog.ExpandableWrapper,\r\n        WrappersCatalog.AdamWrapper,\r\n      );\r\n\r\n    return wrappers;\r\n  }\r\n\r\n}\r\n","import { FieldConstantsOfLanguage, FieldProps } from './fields-configs.model';\r\nimport { ItemValuesOfLanguage } from './item-values-of-language.model';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { WrapperHelper } from '../fields/wrappers/wrapper.helper';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { FieldsPropsEngine } from './fields-properties-engine';\r\nimport { EavEntityAttributes } from '../shared/models/eav';\r\nimport { FieldSettingsUpdateHelperFactory } from './fields-settings-update.helpers';\r\nimport { classLog } from '../../shared/logging';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getCycleSettingsAndValues: false,\r\n  getLatestSettingsAndValues: false,\r\n}\r\n\r\nconst maxChangeCycles = 5;\r\n\r\n/**\r\n * Assistant helper to process / recalculate the value of fields and their settings.\r\n * \r\n * It should function as follows:\r\n * 1. The system initialized or something changed - the language, a value, a setting, etc.\r\n * 2. This triggers a recalculation of the fields and their settings.\r\n * 3. That kind of change can again re-trigger certain value updates, fields, settings - so it loops...\r\n * 4. ...until nothing changes - or a max-value has been achieved and it should stop to prevent infinite loops.\r\n * 5. This is then handed back to the ui / value services for propagation\r\n * 6. ...after this it should not run again until something changes anew...\r\n * \r\n * Note that as of now, this engine should be created and discarded on every cycle.\r\n */\r\nexport class FieldsPropsEngineCycle {\r\n  private log = classLog({FieldsPropsEngineCycle}, logSpecs);\r\n\r\n  constructor(\r\n    private engine: FieldsPropsEngine,\r\n    /** The values of the form - initialized here and to be updated until complete */\r\n    private readonly initialValues: ItemValuesOfLanguage,\r\n    /** The field props at start and during the calculation cycles (may be updated until complete) */\r\n    public fieldProps: Record<string, FieldProps>,\r\n    public allAttributes: EavEntityAttributes,\r\n    public updateHelper: FieldSettingsUpdateHelperFactory,\r\n    private fieldConstants: FieldConstantsOfLanguage[],\r\n  ) {\r\n    this.values = { ...initialValues };\r\n  }\r\n\r\n  public getFieldConstants(name: string) {\r\n    return this.fieldConstants.find(f => f.fieldName === name);\r\n  }\r\n\r\n  /**\r\n   * Get the current values of the fields, as they may update during the cycle\r\n   */\r\n  values: ItemValuesOfLanguage;\r\n\r\n  public getCycleSettingsAndValues(): PropsUpdate {\r\n    const l = this.log.fnIf('getCycleSettingsAndValues');\r\n\r\n    for (let i = 0; i < maxChangeCycles; i++) {\r\n      const cycle = this.#getLatestSettingsAndValues(i);\r\n      const mergedValues = { ...this.values, ...cycle.valueChanges };\r\n\r\n      // Quit if we have no more changes\r\n      if (isEqual(this.fieldProps, cycle.props) && isEqual(this.values, mergedValues)) {\r\n        l.a('No more changes, stable, exit');\r\n        break;\r\n      }\r\n\r\n      // Update state for next cycles\r\n      this.fieldProps = cycle.props;\r\n      this.values = mergedValues;\r\n    }\r\n\r\n    // figure out the final changes to propagate\r\n    const finalChanges = this.engine.modifiedChecker.getValueUpdates(this, [], this.values, this.initialValues);\r\n\r\n    return { valueChanges: finalChanges, props: this.fieldProps };\r\n  }\r\n\r\n  #getLatestSettingsAndValues(loopIndex: number): PropsUpdate {\r\n    const l = this.log.fnIf('getLatestSettingsAndValues', { loopIndex });\r\n\r\n    // 1. Detect first round as it has slightly different behavior\r\n    const isFirstRound = Object.keys(this.fieldProps).length === 0;\r\n\r\n    // 2. Process the queue of changes from promises if necessary\r\n    // If things change, we will exit because then the observable will be retriggered\r\n    if (!isFirstRound) {\r\n      const { valueChanges, newFieldProps } = this.engine.formulaPromises.changesFromQueue(this);\r\n\r\n      // If we only updated values from promise (queue), don't trigger property regular updates\r\n      if (newFieldProps) {\r\n        l.a('New field props from queue', { newFieldProps });\r\n        this.fieldProps = newFieldProps;\r\n      }\r\n      \r\n      // If any value changes then the entire cycle will automatically retrigger.\r\n      // So we exit now as the whole cycle will re-init and repeat.\r\n      if (Object.keys(valueChanges).length > 0) {\r\n        l.a('Value changes from queue', { valueChanges });\r\n        this.values = { ...this.values, ...valueChanges };\r\n      }\r\n    } else\r\n      l.a('First round, no queue to process');\r\n\r\n    // 3. Run formulas for all fields - as a side effect (not nice) will also get / init all field settings\r\n    // Note that in the case of promises being executed, the whole process will need to run again\r\n    // when the promises finish\r\n    const { fieldsProps: props, valueUpdates, fieldUpdates } = this.engine.formulaEngine.runAllFields(this.engine, this);\r\n\r\n    // 4. On first cycle, also make sure we have the wrappers specified as it's needed by the field creator; otherwise preserve previous\r\n    for (const [key, value] of Object.entries(props))\r\n      value.buildWrappers = isFirstRound\r\n        ? WrapperHelper.getWrappers(value.settings, value.constants.inputTypeSpecs)\r\n        : this.fieldProps[key]?.buildWrappers;\r\n\r\n    // 6.1 If we have value changes were applied\r\n    const modifiedValues = this.engine.modifiedChecker.getValueUpdates(this, fieldUpdates, valueUpdates);\r\n\r\n    return { valueChanges: modifiedValues, props: props };\r\n  }\r\n\r\n\r\n  /**\r\n   * Get latest/current valid field settings - if possible from cache\r\n   * if the currentLanguage changed then we need to flush the settings with initial ones that have updated language\r\n   */\r\n  getFieldSettingsInCycle(constFieldPart: FieldConstantsOfLanguage): FieldSettings {\r\n    const cached = this.fieldProps[constFieldPart.fieldName];\r\n    // if the currentLanguage changed then we need to flush the settings with initial ones that have updated language\r\n    const cachedStillValid = constFieldPart.language == cached?.language;\r\n    const result: FieldSettings = cachedStillValid\r\n      ? cached?.settings ?? { ...constFieldPart.settingsInitial }\r\n      : { ...constFieldPart.settingsInitial };\r\n    return result;\r\n  }\r\n}\r\n\r\ninterface PropsUpdate {\r\n  valueChanges: ItemValuesOfLanguage;\r\n  props: Record<string, FieldProps>;\r\n}","import { ItemIdentifierShared } from '../../shared/models/edit-form.model';\r\nimport { InputTypeHelpers } from '../../shared/fields/input-type-helpers';\r\nimport { FieldConstantsOfLanguage } from './fields-configs.model';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../shared/logging';\r\n\r\n/**\r\n * Small helper to parse Item-Field-Visibility requirements from the URL.\r\n * This is to allow callers to specify which fields should be hidden.\r\n * For example, to make the edit-UI only open a specific WYSIWYG field and hide all other fields.\r\n */\r\nexport class ItemFieldVisibility {\r\n  private defaultIsShow = true;\r\n  private fields: Record<string, boolean> = null;\r\n\r\n  private log = classLog({ItemFieldVisibility});\r\n\r\n  constructor(identifier: ItemIdentifierShared) {\r\n    const l = this.log.fn('ctor', { identifier });\r\n    var fields = identifier.ClientData?.fields as string;\r\n    if (fields == null || fields == '') {\r\n      l.end('no fields specified');\r\n      return;\r\n    }\r\n    \r\n    // If the first character is a minus, then default is show all and just hide mentions\r\n    this.defaultIsShow = (fields[0] == '-');\r\n    if (this.defaultIsShow)\r\n      fields = fields.substring(1);\r\n    const ruleIsShow = !this.defaultIsShow;\r\n\r\n    this.fields = fields.toLowerCase().split(',')\r\n      .reduce((prev, f) => {\r\n        prev[f] = ruleIsShow;\r\n        return prev;\r\n      }, {} as Record<string, boolean>);\r\n    l.end('', { fields: this.fields, defaultIsShow: this.defaultIsShow });\r\n  }\r\n\r\n  hasRules(): boolean {\r\n    return this.fields != null;\r\n  }\r\n\r\n  isVisibleDisabled(fieldName: string): boolean {\r\n    const l = this.log.fn('isVisibleDisabled', { fieldName });\r\n\r\n    // check if we have no rules at all - in which case never override\r\n    if (!this.hasRules())\r\n      return l.r(false, 'no rules');\r\n\r\n    const override = this.fields[fieldName.toLowerCase()];\r\n    \r\n    return l.r(!(override ?? this.defaultIsShow));\r\n  }\r\n\r\n  static mergedVisible(settings: FieldSettings): boolean {\r\n    return settings.Visible && !settings.VisibleDisabled;\r\n  }\r\n\r\n  /**  Make sure that groups, which have a forced-visible-field are also visible */\r\n  makeParentGroupsVisible(allConstFieldParts: FieldConstantsOfLanguage[]) {\r\n    const l = this.log.fn('makeParentGroupsVisible', { allConstFieldParts });\r\n\r\n    if (!this.hasRules())\r\n      return l.r(allConstFieldParts, 'no rules, no changes');\r\n\r\n    // ATM in try-catch, to ensure we don't break anything\r\n    try {\r\n      allConstFieldParts.forEach((groupField, index) => {\r\n        // Only work on group-starts\r\n        if (!InputTypeHelpers.isGroupStart(groupField.inputTypeSpecs.inputType))\r\n          return;\r\n\r\n        // Ignore if visible-disabled is already ok\r\n        if (groupField.settingsInitial.VisibleDisabled == false)\r\n          return;\r\n\r\n        // Check if any of the following fields is forced visible - before another group-start/end\r\n        for (let i = index + 1; i < allConstFieldParts.length; i++) {\r\n          const innerField = allConstFieldParts[i];\r\n\r\n          // Stop checking the current group if we found another group start/end\r\n          if (InputTypeHelpers.endsPreviousGroup(innerField.inputTypeSpecs.inputType))\r\n            return;\r\n\r\n          if (innerField.settingsInitial.VisibleDisabled == false) {\r\n            l.a('Forced visible', { fieldName: groupField.fieldName, reason: innerField.fieldName });\r\n            groupField.settingsInitial.VisibleDisabled = false;\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    } catch (e) {\r\n      console.error('Error trying to set item field visibility', e);\r\n    }\r\n\r\n    return allConstFieldParts;\r\n  }\r\n}","import { Injectable, Signal } from '@angular/core';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../shared/logging';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldSettingsHelpersManager } from '../fields/logic/field-settings-helpers-manager';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { InputTypeService } from '../shared/input-types/input-type.service';\r\nimport { EavContentType, EavItem } from '../shared/models/eav';\r\nimport { FieldsSettingsHelpers } from './field-settings.helper';\r\nimport { FieldConstants, FieldConstantsOfLanguage } from './fields-configs.model';\r\nimport { FieldsSettingsService } from './fields-settings.service';\r\nimport { ItemFieldVisibility } from './item-field-visibility';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  stablePartsOfLanguage: false,\r\n  stablePartOfField: true,\r\n  constantPartsOfField: false,\r\n  constantFieldParts: false,\r\n  staticPartsOfField: false,\r\n  fields: [...DebugFields],\r\n}\r\n\r\n/**\r\n * Each instance is responsible for a single entity.\r\n */\r\n@Injectable()\r\nexport class FieldsSettingsConstantsService {\r\n\r\n  log = classLog({FieldsSettingsConstantsService}, logSpecs);\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private inputTypeSvc: InputTypeService,\r\n  ) { }\r\n\r\n  #fieldSettingsHelper = new FieldsSettingsHelpers(this.log.name);\r\n\r\n  init(\r\n    itemForIds: EavItem,\r\n    contentType: EavContentType,\r\n    entityReaderCurrent: Signal<EntityReader>,\r\n    labelReaderCurrent: Signal<EntityReader>,\r\n    fieldsSettingsSvc: FieldsSettingsService,\r\n  ): this {\r\n    this.#item = itemForIds;\r\n    this.#contentType = contentType;\r\n    this.#itemFieldVisibility = new ItemFieldVisibility(itemForIds.Header);\r\n    this.#entityReaderCurrent = entityReaderCurrent;\r\n    this.#labelReaderCurrent = labelReaderCurrent;\r\n    this.#fieldSettingsSvc = fieldsSettingsSvc;\r\n    return this;\r\n  }\r\n\r\n  #item: EavItem;\r\n  #itemFieldVisibility: ItemFieldVisibility;\r\n  #entityReaderCurrent: Signal<EntityReader>;\r\n  #labelReaderCurrent: Signal<EntityReader>;\r\n  #contentType: EavContentType;\r\n  #fieldSettingsSvc: FieldsSettingsService;\r\n\r\n  public stableDataOfLanguage() {\r\n    const guid = this.#item.Entity.Guid;\r\n    const id = this.#item.Entity.Id;\r\n    const typeNameId = this.#contentType.Id;\r\n    const constParts = this.#constantPartsOfField(guid, id, typeNameId);\r\n\r\n    return computedObj('stableDataOfLanguage',\r\n      () => this.#stablePartsOfLanguage(this.#entityReaderCurrent(), this.#labelReaderCurrent(), constParts)\r\n    );\r\n  }\r\n\r\n  #stablePartsOfLanguage(reader: EntityReader, labelReader: EntityReader, fieldConstants: FieldConstants[]) {\r\n    const contentType = this.#contentType;\r\n    const l = this.log.fnIf('stablePartsOfLanguage', { contentType, entityReader: reader });\r\n\r\n    const constPartOfLanguage = contentType.Attributes.map(attr => {\r\n      const fieldName = attr.Name;\r\n      const lInner = this.log.fnIfInFields('stablePartOfField', fieldName, { fieldName });\r\n\r\n      // Input Type config in the current language\r\n      const inputType = this.inputTypeSvc.get(attr.InputType);\r\n\r\n      // Construct the constants with settings and everything\r\n      // using the EntityReader with the current language\r\n      const merged = reader.flatten<FieldSettings>(attr.Metadata);\r\n\r\n      // If the user specified a preferred language for labels, use that\r\n      if (labelReader.current !== reader.current) {\r\n        const labelMerged = labelReader.flatten<FieldSettings>(attr.Metadata);\r\n        merged.Name = labelMerged.Name ?? merged.Name;\r\n        merged.Placeholder = labelMerged.Placeholder ?? merged.Placeholder;\r\n        merged.Notes = labelMerged.Notes ?? merged.Notes;\r\n      }\r\n\r\n      // Also integrate the generic (custom JSON injected field-settings)\r\n      const withGeneric = this.#fieldSettingsHelper.mergeGenericSettings(fieldName, merged);\r\n\r\n      // Sometimes the metadata doesn't have the input type (empty string), so we'll add the attribute.InputType just in case...\r\n      withGeneric.InputType = attr.InputType;\r\n      withGeneric.VisibleDisabled = this.#itemFieldVisibility.isVisibleDisabled(attr.Name);\r\n      const settingsInitial = this.#fieldSettingsHelper.getDefaultSettings(withGeneric);\r\n      const constantFieldParts: FieldConstantsOfLanguage = {\r\n        ...fieldConstants.find(c => c.fieldName === attr.Name),\r\n        settingsInitial,\r\n        inputTypeConfiguration: inputType,\r\n        language: reader.current,\r\n      };\r\n\r\n      return lInner.r(constantFieldParts);\r\n    });\r\n\r\n    const constPartsWithGroupVisibility = this.#itemFieldVisibility.makeParentGroupsVisible(constPartOfLanguage);\r\n\r\n    return l.r(constPartsWithGroupVisibility);\r\n  }\r\n\r\n  #constantPartsOfField(entityGuid: string, entityId: number, contentTypeNameId: string): FieldConstants[] {\r\n    const contentType = this.#contentType;\r\n    const l = this.log.fnIf('constantPartsOfField', { entityGuid, entityId, contentTypeNameId });\r\n    // Get the form languages - but we only need default & initial, so we don't have to observe\r\n    const language = this.formConfig.language();\r\n    \r\n    // When merging the \"constant\" metadata, the primary language must be the initial language, not the current\r\n    // as that contains all the relevant settings which should not be translated\r\n    const mdMerger = new EntityReader(language.initial, language.primary);\r\n\r\n    const allPickers = this.#fieldSettingsSvc.pickerData;\r\n    const eavConfig = this.formConfig.config;\r\n\r\n    l.a('shared across fields', { entityGuid, entityId, contentTypeNameId, language, allPickers });\r\n\r\n    const constFieldParts = contentType.Attributes.map((attr, index) => {\r\n      const fieldName = attr.Name;\r\n      const lInner = this.log.fnIfInFields('constantFieldParts', fieldName, { fieldName, index });\r\n      // metadata in the initial language with all the core settings - just for initialDisabled!\r\n      const metadata = mdMerger.flatten<FieldSettings>(attr.Metadata);\r\n      const initialSettings = this.#fieldSettingsHelper.getDefaultSettings(metadata);\r\n      const initialDisabled = initialSettings.Disabled ?? false;\r\n\r\n      const inputTypeSpecs = this.inputTypeSvc.getSpecs(attr);\r\n\r\n      lInner.a('details', { fieldName, contentType, language, attr, initialSettings, inputTypeSpecs });\r\n\r\n      const logic = FieldSettingsHelpersManager.singleton().get(attr.InputType);\r\n\r\n      // Construct the constants / unchanging aspects of the field, no matter what language\r\n      const constants: FieldConstants = {\r\n        entityGuid,\r\n        entityId,\r\n        contentTypeNameId,\r\n        fieldName,\r\n        index,\r\n        dropzonePreviewsClass: `dropzone-previews-${eavConfig.formId}-${index}`,\r\n        initialDisabled,\r\n        inputTypeSpecs,\r\n        isLastInGroup: this.#fieldSettingsHelper.isLastInGroup(contentType, attr),\r\n        type: attr.Type,\r\n        logic,\r\n        pickerData: () => allPickers[fieldName] ?? null,\r\n      };\r\n\r\n      return lInner.r(constants);\r\n    });\r\n    return l.r(constFieldParts);\r\n  }\r\n\r\n}\r\n","import { Signal } from '@angular/core';\r\nimport { AbstractControl, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { CustomJsonEditor } from 'projects/edit-types/src/FieldSettings-CustomJsonEditor';\r\nimport { FieldSettingsNumber } from 'projects/edit-types/src/FieldSettings-Number';\r\nimport { FieldSettingsPicker } from 'projects/edit-types/src/FieldSettings-Pickers';\r\nimport { Of } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsOptionsWip, FieldSettingsSharedSeparator } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { AdamControl } from '../../fields/basic/hyperlink-library/hyperlink-library.models';\r\nimport { PickerData } from '../../fields/picker/picker-data';\r\nimport { convertValueToArray } from '../../fields/picker/picker.helpers';\r\nimport { FieldProps } from '../../state/fields-configs.model';\r\nimport { ItemFieldVisibility } from '../../state/item-field-visibility';\r\n\r\n\r\n/** Slightly enhanced standard Abstract Control with additional warnings */\r\nexport interface AbstractControlPro extends AbstractControl {\r\n  /**\r\n   * Object containing various warnings (or the object can also be null)\r\n   */\r\n  _warning?: ValidationErrors;\r\n}\r\n\r\n/** Validators here are copied from https://github.com/angular/angular/blob/master/packages/forms/src/validators.ts */\r\nexport class ValidationHelpers {\r\n\r\n  static isRequired(settings: FieldSettings): boolean {\r\n    // hidden field can't be required\r\n    return this.#shouldIgnoreValidators(settings) ? false : settings.Required;\r\n  }\r\n\r\n  public static getValidators(specs: ValidationHelperSpecs, inputType: Of<typeof InputTypeCatalog>): ValidatorFn[] {\r\n    // TODO: merge all validators in a single function? Should be faster\r\n    const validators: ValidatorFn[] = [\r\n      inputType !== InputTypeCatalog.HyperlinkLibrary\r\n        ? this.#required(specs)\r\n        : this.#requiredAdam(specs),\r\n      this.#regEx(specs),\r\n      this.#decimals(specs),\r\n      this.#numberMin(specs),\r\n      this.#numberMax(specs),\r\n      this.#listMin(specs),\r\n      this.#listMax(specs),\r\n      this.#formulaValidate(specs),\r\n    ];\r\n    if (inputType === InputTypeCatalog.CustomJsonEditor)\r\n      validators.push(this.#jsonValidator(specs));\r\n    return validators;\r\n  }\r\n\r\n  static #ensureWarningsAndGetSettingsIfNoIgnore(control: AbstractControl, specs: ValidationHelperSpecs) {\r\n    const settings = specs.settings();\r\n    if (this.#shouldIgnoreValidators(settings)) return null;\r\n    return settings;\r\n  }\r\n\r\n  static #required(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      // if (Array.isArray(control.value))\r\n      //   console.log('2dm #required', control.value)\r\n      if (s == null || !s.valueRequired) return null;\r\n      return Validators.required(control);\r\n    };\r\n  }\r\n\r\n  static #requiredAdam(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s == null || !s.valueRequired) return null;\r\n\r\n      return (control as AdamControl).adamItems === 0 ? { required: true } : null;\r\n    };\r\n  }\r\n\r\n  static #regEx(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s == null || !s.ValidationRegExJavaScript) return null;\r\n\r\n      return Validators.pattern(s.ValidationRegExJavaScript)(control);\r\n    };\r\n  }\r\n\r\n  static #decimals(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s?.Decimals == null || s.Decimals < 0) return null;\r\n      if (control.value == null) return null;\r\n\r\n      const matchString = s.Decimals === 0 ? `^-?[0-9]+$` : `^-?[0-9]+(\\.[0-9]{1,${s.Decimals}})?$`;\r\n      const matches = (control.value as number).toString().match(matchString);\r\n      return !matches ? { decimals: true } : null;\r\n    };\r\n  }\r\n\r\n  static #numberMin(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s?.Min == null) return null;\r\n\r\n      return Validators.min(s.Min)(control);\r\n    };\r\n  }\r\n\r\n  static #numberMax(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s?.Max == null) return null;\r\n\r\n      return Validators.max(s.Max)(control);\r\n    };\r\n  }\r\n\r\n  static #listMin(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s == null || s.AllowMultiMin == 0 || s.AllowMultiMin == undefined) return null;\r\n      return countValues(control, specs, s) < s.AllowMultiMin ? { minNoItems: s.AllowMultiMin } : null;\r\n    };\r\n  }\r\n\r\n  static #listMax(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s == null || s.AllowMultiMax == 0 || s.AllowMultiMax == undefined) return null;\r\n      return countValues(control, specs, s) > s.AllowMultiMax ? { maxNoItems: s.AllowMultiMax } : null;\r\n    };\r\n  }\r\n\r\n  static #jsonValidator(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControlPro): ValidationErrors | null => {\r\n      const settings = specs.settings();\r\n      let error: boolean;\r\n      let warning: boolean;\r\n      const jsonMode = (settings as FieldSettings & CustomJsonEditor).JsonValidation;\r\n\r\n      if (this.#shouldIgnoreValidators(settings) || jsonMode === 'none' || !control.value) {\r\n        error = false;\r\n        warning = false;\r\n      } else {\r\n        try {\r\n          JSON.parse(control.value);\r\n          error = false;\r\n          warning = false;\r\n        } catch {\r\n          if (jsonMode === 'strict') {\r\n            error = true;\r\n            warning = false;\r\n          } else if (jsonMode === 'light') {\r\n            error = false;\r\n            warning = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      control._warning = warning ? { jsonWarning: true } : null;\r\n      return error ? { jsonError: true } : null;\r\n    };\r\n  }\r\n\r\n  static #formulaValidate(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControlPro): ValidationErrors | null => {\r\n      const formulaValidation = specs.props().formulaValidation;\r\n\r\n      const { error, warning } = (() => {\r\n        if (this.#shouldIgnoreValidators(specs.settings()) || formulaValidation == null)\r\n          return { error: false, warning: false };\r\n        if (formulaValidation.severity === 'error')\r\n          return { error: true, warning: false };\r\n        if (formulaValidation.severity === 'warning')\r\n          return { error: false, warning: true };\r\n        return { error: false, warning: false };\r\n      })();\r\n\r\n      control._warning = warning ? { formulaWarning: true, formulaMessage: formulaValidation.message } : null;\r\n      return error ? { formulaError: true, formulaMessage: formulaValidation.message } : null;\r\n    };\r\n  }\r\n\r\n  /** Hidden fields can't have validators */\r\n  static #shouldIgnoreValidators(settings: FieldSettings): boolean {\r\n    return !ItemFieldVisibility.mergedVisible(settings);\r\n  }\r\n}\r\n\r\nfunction countValues(control: AbstractControl, specs: ValidationHelperSpecs, s: FieldSettings & FieldSettingsOptionsWip & FieldSettingsSharedSeparator): number {\r\n  // If it is an array, return the length right away, since we don't need additional processing\r\n  if (Array.isArray(control.value))\r\n    return control.value.length;\r\n\r\n  // Picker Data - can be null in the first few cycles since it may not yet be initialized\r\n  const pd = specs.pickerData;\r\n  if (pd == null)\r\n    return convertValueToArray(control.value, s.Separator, false).length;\r\n\r\n  // PickerData SelectedAll will also contain an empty selected item if the field allows empty values\r\n  return pd.selectedAll().length;\r\n}\r\n\r\n\r\nexport class ValidationHelperSpecs {\r\n  constructor(\r\n    /** The Field Name */\r\n    public fieldName: string,\r\n    /** The Input Type */\r\n    public inputType: Of<typeof InputTypeCatalog>,\r\n    /** The settings, but must be re-cast so the system knows it has more properties */\r\n    settings: Signal<FieldSettings>,\r\n    /** The field properties an updated on every formula cycle */\r\n    public props: Signal<FieldProps>,\r\n    /** Delayed get pickers data */\r\n    private pickersGet: () => Record<string, PickerData>,\r\n  ) {\r\n    this.settings = settings as Signal<FieldSettings & FieldSettingsSharedSeparator & CustomJsonEditor & FieldSettingsNumber & FieldSettingsPicker & FieldSettingsOptionsWip>;\r\n  }\r\n\r\n  /** The settings cast in a way that it should have all relevant properties */\r\n  settings: Signal<FieldSettings & FieldSettingsSharedSeparator & CustomJsonEditor & FieldSettingsNumber & FieldSettingsPicker & FieldSettingsOptionsWip>;\r\n\r\n  /** Get the pickers for this field */\r\n  get pickerData(): PickerData {\r\n    return this.pickersGet()?.[this.fieldName] ?? null;\r\n  }\r\n}","export const MetadataDecorators = {\r\n  LanguagesDecorator: 'LanguagesDecorator',\r\n  SaveEmptyDecorator: 'SaveEmptyDecorator',\r\n} as const;\r\n","import { Signal } from '@angular/core';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../shared/logging';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldSettingsTools } from '../fields/logic/field-settings-tools';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { EavContentTypeAttribute, EavEntity, EavField } from '../shared/models/eav';\r\nimport { ValidationHelpers } from '../shared/validation/validation.helpers';\r\nimport { FieldConstantsOfLanguage } from './fields-configs.model';\r\nimport { MetadataDecorators } from './metadata-decorators.constants';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  correctSettingsAfterChanges: true,\r\n  schemaDisablesTranslation: false,\r\n  getDisabledBecauseTranslations: false,\r\n  fields: [...DebugFields], // or '*' for all\r\n};\r\n\r\nexport class FieldSettingsUpdateHelperFactory {\r\n  log = classLog({FieldSettingsUpdateHelperFactory});\r\n  constructor(\r\n    // General & Content Type Info\r\n    private contentTypeMetadata: EavEntity[],\r\n    private language: FormLanguage,\r\n    /** set of configuration for running field logic - shared */\r\n    private fieldLogicTools: FieldSettingsTools,\r\n    /** Info that the form is read-only */\r\n    private formReadOnly: boolean,\r\n    private slotIsEmpty: Signal<boolean>,\r\n  ) { }\r\n\r\n  create(\r\n    fieldName: string,\r\n    attribute: EavContentTypeAttribute,\r\n    constantFieldPart: FieldConstantsOfLanguage,\r\n    attributeValues: EavField<any>,\r\n  ): FieldSettingsUpdateHelper {\r\n    return new FieldSettingsUpdateHelper(\r\n      fieldName,\r\n      this.contentTypeMetadata,\r\n      this.language,\r\n      this.fieldLogicTools,\r\n      this.formReadOnly,\r\n      this.slotIsEmpty,\r\n      attribute,\r\n      constantFieldPart,\r\n      attributeValues,\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Special helper to check if a field should remain disabled because of various language settings.\r\n * \r\n * Only used in formulas, after running formulas which modify settings.\r\n * \r\n * Each one is specific to a certain field, so you must create another object for every field you check.\r\n */\r\nexport class FieldSettingsUpdateHelper {\r\n\r\n  log = classLog({FieldSettingsUpdateHelper}, logSpecs);\r\n\r\n  constructor(\r\n    private fieldName: string,\r\n    // General & Content Type Info\r\n    private contentTypeMetadata: EavEntity[],\r\n    private language: FormLanguage,\r\n    /** set of configuration for running field logic - shared */\r\n    private fieldLogicTools: FieldSettingsTools,\r\n    /** Info that the form is read-only */\r\n    private formReadOnly: boolean,\r\n    private formSlotIsEmpty: Signal<boolean>,\r\n\r\n    // Field specific info\r\n    private attribute: EavContentTypeAttribute,\r\n    private constantFieldPart: FieldConstantsOfLanguage,\r\n    private attributeValues: EavField<any>,\r\n  ) { }\r\n\r\n  /**\r\n   * Used for verifying and updating new settings.\r\n   * @param settings Latest/newest settings\r\n   * @param fieldValue\r\n   * @returns Corrected settings\r\n   */\r\n  correctSettingsAfterChanges(settings: FieldSettings, fieldValue: FieldValue): FieldSettings {\r\n    const l = this.log.fnIfInFields('correctSettingsAfterChanges', this.fieldName, () => ({ settings, fieldValue }));\r\n\r\n    const constantFieldPart = this.constantFieldPart;\r\n    const slotIsEmpty = this.formSlotIsEmpty();\r\n\r\n    // Why are we doing this?\r\n    settings.Name = settings.Name || this.attribute.Name;\r\n\r\n    settings.valueRequired = ValidationHelpers.isRequired(settings);\r\n    const disableTranslation = this.#schemaDisablesTranslation();\r\n\r\n    settings.DisableTranslation = slotIsEmpty || disableTranslation;\r\n    settings.uiDisabledInThisLanguage = this.#getDisabledBecauseTranslations(settings.DisableTranslation);\r\n\r\n    settings.uiDisabledForced = slotIsEmpty || settings.uiDisabledInThisLanguage || this.formReadOnly;\r\n\r\n    settings.uiDisabled = settings.uiDisabledForced || settings.Disabled;\r\n\r\n    settings.DisableAutoTranslation = constantFieldPart.settingsInitial.DisableAutoTranslation\r\n      || settings.DisableTranslation;\r\n\r\n    // Correct these fresh settings with FieldLogics of this field\r\n    const fixed = constantFieldPart.logic?.update({ fieldName: this.fieldName, settings: settings, value: fieldValue, tools: this.fieldLogicTools }) ?? settings;\r\n\r\n    return l.r(fixed);\r\n  }\r\n\r\n\r\n  /** Find if DisableTranslation is true in any setting and in any language */\r\n  #schemaDisablesTranslation(): boolean {\r\n    const l = this.log.fnIfInFields('schemaDisablesTranslation', this.fieldName);\r\n    const contentTypeMetadata = this.contentTypeMetadata;\r\n    const inputType = this.constantFieldPart.inputTypeConfiguration;\r\n    const attributeValues = this.attributeValues;\r\n    const attributeMetadata = this.attribute.Metadata;\r\n\r\n    // Disable translation if not allowed by the ContentType.\r\n    // This is configured using a LanguagesDecorator in ContentType.\r\n    const languagesDecorator = contentTypeMetadata.find(m => m.Type.Name === MetadataDecorators.LanguagesDecorator);\r\n    if (languagesDecorator?.Attributes.Enabled?.Values.some(v => v.value === false))\r\n      return true;\r\n\r\n    // Disable translation if the input type says it can't be translated (e.g. Entity).\r\n    if (inputType?.DisableI18n)\r\n      return true;\r\n\r\n    // TODO: CHECK if this should be here - it's repeated below\r\n    if (!new FieldReader(attributeValues, this.language).hasPrimary)\r\n      return true;\r\n\r\n    // Disable translation if the Attribute Configuration says so.\r\n    // DisableTranslation is true in any language in @All, @String, @string-default, etc...\r\n    for (const attrMd of attributeMetadata ?? [])\r\n      if (attrMd.Attributes.DisableTranslation?.Values.some(v => v.value === true))\r\n        return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  #getDisabledBecauseTranslations(disableTranslation: boolean): boolean {\r\n    const l = this.log.fnIfInFields('getDisabledBecauseTranslations', this.fieldName);\r\n    const attributeValues = this.attributeValues;\r\n    const language = this.language;\r\n    // On primary edit is never disabled by translations\r\n    // This is the only one we check \r\n    if (language.current === language.primary)\r\n      return l.r(false, 'enabled, primary language');\r\n\r\n    const fieldReader = new FieldReader(attributeValues, language);\r\n    // If translations are disabled, then it's disabled\r\n    // Only check this _after_ checking if we're in the primary language\r\n    if (disableTranslation)\r\n      return l.r(true, 'disabled, disableTranslation');\r\n    // If no value on primary, then it's disabled\r\n    if (!fieldReader.hasPrimary)\r\n      return l.r(true, 'disabled, no value on primary');\r\n    if (fieldReader.hasEditableValues)\r\n      return l.r(false, 'disabled, has editable value');\r\n    if (fieldReader.hasCurrentReadonly)\r\n      return l.r(true, 'enabled, has readonly value');\r\n    return l.r(true, 'enabled, no rule applies');\r\n  }\r\n}\r\n","import { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { NameValuePair } from '../formulas/results/formula-results.models';\r\nimport { ItemValuesOfLanguage } from './item-values-of-language.model';\r\nimport { Signal } from '@angular/core';\r\nimport { EavContentType } from '../shared/models/eav/eav-content-type';\r\nimport { FieldValueHelpers } from '../shared/helpers/field-value.helpers';\r\nimport { FieldsPropsEngineCycle } from './fields-properties-engine-cycle';\r\nimport { classLog } from '../../shared/logging';\r\n\r\nexport class FieldsValuesModifiedHelper {\r\n  private log = classLog({FieldsValuesModifiedHelper});\r\n\r\n  constructor(\r\n    private contentType: Signal<EavContentType>,\r\n    private slotIsEmpty: Signal<boolean>,\r\n  ) { }\r\n\r\n\r\n  // NEW WIP\r\n  getValueUpdates(\r\n    cycle: FieldsPropsEngineCycle,\r\n    valueUpdatesFromSideEffects: NameValuePair[],\r\n    valueUpdates: ItemValuesOfLanguage,\r\n    originalValues?: ItemValuesOfLanguage\r\n  ): ItemValuesOfLanguage {\r\n    const contentType = this.contentType();\r\n    const slotIsEmpty = this.slotIsEmpty();\r\n\r\n    originalValues ??= cycle.values;\r\n    const fieldsProps = cycle.fieldProps;\r\n    const l = this.log.fn('getValueUpdates', { contentType, originalValues, fieldsProps, valueUpdates, valueUpdatesFromSideEffects, slotIsEmpty });\r\n\r\n    if (slotIsEmpty)\r\n      return l.r({}, 'Slot is empty, exit early');\r\n\r\n    const prep = contentType.Attributes\r\n      .map(attr => ({\r\n        name: attr.Name,\r\n        original: originalValues[attr.Name],\r\n      }))\r\n      // Only skip force disabled, not all disabled. If it's only disabled because the user shouldn't interact with it, we still want to update it.\r\n      .filter(p => p.original !== undefined && !fieldsProps[p.name]?.settings.uiDisabledForced)\r\n      .map(p => ({\r\n        ...p,\r\n        value: this.#findBestValue(p.name, valueUpdatesFromSideEffects, valueUpdates)\r\n      }))\r\n      .filter(p => p.value !== undefined && !FieldValueHelpers.fieldValuesAreEqual(p.original, p.value))\r\n\r\n\r\n    // Convert to object\r\n    const changes = prep.reduce((acc, p) => { acc[p.name] = p.value; return acc; }, {} as ItemValuesOfLanguage);\r\n    return l.rSilent(changes);\r\n  }\r\n\r\n  #findBestValue(fieldName: string, fieldsUpdates: NameValuePair[], valueUpdates: ItemValuesOfLanguage): FieldValue {\r\n    // First check if a formula had given a value as a side-effect of it's own calculation\r\n    // This is prioritized in case we have both,\r\n    // because it's very rare and it's usually something which resets another field\r\n    // In case we get many, we'll just keep the last one.\r\n    const sideEffects = fieldsUpdates.filter(f => f.name === fieldName);\r\n    const valSideEffect = sideEffects[sideEffects.length - 1]?.value; // findLast\r\n    if (valSideEffect != null)\r\n      return valSideEffect;\r\n\r\n    // If no value from formula, check if the field has a new value from a formula\r\n    return valueUpdates[fieldName];\r\n  }\r\n\r\n}","import { inject, Injectable, Signal } from '@angular/core';\r\nimport { transient } from '../../../../../core/transient';\r\nimport { classLog } from '../../shared/logging';\r\nimport { GlobalConfigService } from '../../shared/services/global-config.service';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { FieldSettingsTools } from '../fields/logic/field-settings-tools';\r\nimport { PickerData } from '../fields/picker/picker-data';\r\nimport { PickerDataFactory } from '../fields/picker/picker-data.factory';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { FormsStateService } from '../form/forms-state.service';\r\nimport { FormulaEngine } from '../formulas/formula-engine';\r\nimport { FormulaPromiseHandler } from '../formulas/promise/formula-promise-handler';\r\nimport { ContentTypeItemService } from '../shared/content-types/content-type-item.service';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { EavContentType, EavEntityAttributes, EavItem } from '../shared/models/eav';\r\nimport { FieldConstantsOfLanguage, FieldProps } from './fields-configs.model';\r\nimport { FieldsPropsEngineCycle } from './fields-properties-engine-cycle';\r\nimport { FieldsSettingsConstantsService } from './fields-settings-constants.service';\r\nimport { FieldSettingsUpdateHelperFactory } from './fields-settings-update.helpers';\r\nimport { FieldsSettingsService } from './fields-settings.service';\r\nimport { FieldsSignalsHelper } from './fields-signals.helper';\r\nimport { FieldsValuesModifiedHelper } from './fields-values-modified.helper';\r\nimport { ItemValuesOfLanguage } from './item-values-of-language.model';\r\nimport { ItemService } from './item.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  init: true,\r\n  getPickers: true,\r\n}\r\n/**\r\n * Assistant helper to process / recalculate the value of fields and their settings.\r\n * \r\n */\r\n@Injectable()\r\nexport class FieldsPropsEngine {\r\n  private log = classLog({FieldsPropsEngine}, logSpecs);\r\n\r\n  // Shared / inherited services\r\n  #formConfig = inject(FormConfigService);\r\n  #globalConfigService = inject(GlobalConfigService);\r\n  #formsStateService = inject(FormsStateService);\r\n  #contentTypeItemService = inject(ContentTypeItemService);\r\n  #itemService = inject(ItemService);\r\n\r\n  // Transient services for this instance only\r\n  #constantsService = transient(FieldsSettingsConstantsService);\r\n  #pickerFac = transient(PickerDataFactory);\r\n  public formulaEngine = transient(FormulaEngine);\r\n  public formulaPromises = transient(FormulaPromiseHandler);\r\n  \r\n  /** The item we're working on - needed by the formula engine */\r\n  public item: EavItem;\r\n\r\n  public modifiedChecker: FieldsValuesModifiedHelper;\r\n  #fieldsValues: FieldsSignalsHelper;\r\n\r\n  constructor() { }\r\n\r\n  /** Setup everything which won't change throughout cycles */\r\n  init(\r\n    fss: FieldsSettingsService,\r\n    entityGuid: string,\r\n    item: EavItem,\r\n    contentType: Signal<EavContentType>,\r\n    reader: Signal<EntityReader>,\r\n    labelReader: Signal<EntityReader>,\r\n    fieldsValues: FieldsSignalsHelper,\r\n    forceDebug: boolean | null = null\r\n  ): this {\r\n    this.log.extendName(`[${entityGuid.substring(0, 8)}]`);\r\n    const l = this.log.fnIf('init', { entityGuid, item, contentType, reader, forceDebug });\r\n    if (forceDebug != null) this.log.forceEnable(forceDebug);\r\n\r\n    this.item = item;\r\n    this.languages = reader();\r\n    this.#fieldsValues = fieldsValues;\r\n\r\n    const slotIsEmpty = this.#itemService.slotIsEmpty(entityGuid);\r\n    const ct = contentType();\r\n\r\n    this.pickerData = this.#pickerFac.createPickersForAttributes(ct.Attributes);\r\n    l.a('Pickers created', this.pickerData);\r\n\r\n    // Constant field parts which don't ever change.\r\n    // They can only be created once the inputTypes and contentTypes are available\r\n    this.#fieldLangConstants = this.#constantsService\r\n      .init(item, ct, reader, labelReader, fss)\r\n      .stableDataOfLanguage();\r\n\r\n    this.#updateHelper = this.#getPreparedParts(reader, ct, slotIsEmpty);\r\n\r\n    this.modifiedChecker = new FieldsValuesModifiedHelper(contentType, slotIsEmpty);\r\n    this.formulaPromises.init(entityGuid, contentType, fss, this.modifiedChecker);\r\n    this.formulaEngine.init(entityGuid, item.Header, fss, this.formulaPromises, ct, fss.contentTypeSettings()._itemTitle);\r\n\r\n    this.#itemAttributes = this.#itemService.itemAttributesSignal(entityGuid);\r\n    return this;\r\n  }\r\n\r\n  #updateHelper: Signal<FieldSettingsUpdateHelperFactory>;\r\n\r\n  /**\r\n   * Constant field parts which don't ever change.\r\n   * They can only be created once the inputTypes and contentTypes are available\r\n   */\r\n  #fieldLangConstants: Signal<FieldConstantsOfLanguage[]>;\r\n\r\n  #itemAttributes: Signal<EavEntityAttributes>;\r\n\r\n  pickerData: Record<string, PickerData>;\r\n\r\n  /**\r\n   * The languages used in the form, for retrieving various things during the calculation.\r\n   */\r\n  languages: FormLanguage;\r\n\r\n  /**\r\n   * The current cycle of updating the properties.\r\n   * Will be reset every time a new round starts.\r\n   */\r\n  cycle: FieldsPropsEngineCycle;\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {ItemValuesOfLanguage} initialValues The values of the form - initialized here and to be updated until complete\r\n   * @param {Record<string, FieldProps>} fieldProps The field props at start and during the calculation cycles (may be updated until complete)\r\n   * @return {*}  {PropsUpdate}\r\n   * @memberof FieldsPropsEngine\r\n   */\r\n  public getLatestSettingsAndValues(fieldProps: Record<string, FieldProps>): Record<string, FieldProps> {  \r\n    const l = this.log.fn('getLatestSettingsAndValues');\r\n\r\n    const initialValues = this.#fieldsValues.values();\r\n\r\n    this.languages = this.#formConfig.language();\r\n\r\n    // These should only be accessed here, so the signal is only depended on once!\r\n    // All this should never change during the cycle\r\n    const attributes = this.#itemAttributes();\r\n    const updateHelper = this.#updateHelper();\r\n    const fieldLangConstants = this.#fieldLangConstants();\r\n\r\n    this.cycle = new FieldsPropsEngineCycle(this, initialValues, fieldProps, attributes, updateHelper, fieldLangConstants);\r\n    const cycleResult = this.cycle.getCycleSettingsAndValues();\r\n\r\n    // figure out the final changes to propagate\r\n    // const finalChanges = this.modifiedChecker.getValueUpdates(this.cycle, [], cycleResult.valueChanges, initialValues);\r\n\r\n    return cycleResult.props;\r\n  }\r\n\r\n  /**\r\n   * Prepare / build FieldLogicTools for use in all the formulas / field settings updates\r\n   */\r\n  #getPreparedParts(readerSig: Signal<EntityReader>, contentType: EavContentType, slotIsEmpty: Signal<boolean>): Signal<FieldSettingsUpdateHelperFactory> {\r\n    // Prepare / build FieldLogicTools for use in all the formulas / field settings updates\r\n    const prepared = computedObj('prepared-parts', () => {\r\n      const reader = readerSig(); // must be as a signal, so a language change triggers an update\r\n      const languages = reader;\r\n      const isDebug = this.#globalConfigService.isDebug();\r\n      const isReadOnly = this.#formsStateService.readOnly();\r\n\r\n        // Logic Tools are needed when checking for settings defaults etc.\r\n        const logicTools: FieldSettingsTools = {\r\n          eavConfig: this.#formConfig.config,\r\n          reader: reader,\r\n          debug: isDebug,\r\n          contentTypeItemSvc: this.#contentTypeItemService,\r\n        };\r\n        // This factory will generate helpers to validate settings updates\r\n        const updHelperFactory = new FieldSettingsUpdateHelperFactory(\r\n          contentType.Metadata,\r\n          languages, // for languages current, default, initial\r\n          logicTools,\r\n          isReadOnly.isReadOnly,\r\n          slotIsEmpty,\r\n        );\r\n        return updHelperFactory;\r\n    });\r\n    return prepared;\r\n  }\r\n\r\n}\r\n","import { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { Signal } from '@angular/core';\r\nimport { FieldProps } from './fields-configs.model';\r\nimport { classLog } from '../../shared/logging';\r\n\r\n/**\r\n * Manage \"manual\" / forced updates of fields properties\r\n */\r\nexport class FieldsPropertiesUpdates {\r\n  \r\n  log = classLog({FieldsPropertiesUpdates});\r\n\r\n  constructor(private entityGuid: string) {\r\n    this.log.extendName(`[${entityGuid.substring(0, 8)}]`);\r\n  }\r\n\r\n  fieldPropsMixins: Record<string, Partial<FieldSettings>> = {};\r\n\r\n  hasChanges(): boolean {\r\n    return Object.keys(this.fieldPropsMixins).length > 0;\r\n  }\r\n\r\n  /**\r\n   * Modify a setting, ATM just to set collapsed / dialog-open states.\r\n   * Note that this change won't fire the formulas - which may not be correct.\r\n   */\r\n  updateSetting(fieldName: string, update: Partial<FieldSettings>, source: string, fieldsProps: Signal<Record<string, FieldProps>>): void {\r\n    const queueWasEmpty = Object.keys(this.fieldPropsMixins).length === 0;\r\n    const l = this.log.fn('updateSetting', { source, fieldName, update, queueWasEmpty });\r\n    // Test if the update is a change, or if it's the same as the current value\r\n    const before = fieldsProps()[fieldName].settings;\r\n    const after = { ...before, ...update };\r\n    if (isEqual(before, after))\r\n      return l.end(`no change; entityGuid: ${this.entityGuid}; fieldName: ${fieldName}`);\r\n    // Add change to queue, but mix with previous changes in queue.\r\n    const prev = this.fieldPropsMixins[fieldName] ?? {};\r\n    this.fieldPropsMixins[fieldName] = { ...prev, ...update };\r\n    \r\n    l.end('added to queue', { before, after, update });\r\n  }\r\n\r\n  mergeMixins(before: Record<string, FieldProps>): Record<string, FieldProps> {\r\n    const l = this.log.fn('mergeMixins', { before, mixins: this.fieldPropsMixins });\r\n    const mixins = this.fieldPropsMixins;\r\n    if (Object.keys(mixins).length === 0)\r\n      return before;\r\n\r\n    const final = Object.keys(mixins).reduce((acc, key) => {\r\n      const ofField = acc[key];\r\n      const update = mixins[key];\r\n      return {\r\n        ...acc,\r\n        [key]: {\r\n          ...ofField,\r\n          settings: { ...ofField.settings, ...update }\r\n        }\r\n      };\r\n    }, before);\r\n\r\n    this.fieldPropsMixins = {};\r\n    return l.r(final, `merged`);\r\n  }\r\n}","import { effect, Signal } from '@angular/core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { PickerItem } from '../fields/picker/models/picker-item.model';\r\nimport { PickerData } from '../fields/picker/picker-data';\r\nimport { FieldProps } from './fields-configs.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  startSync: true,\r\n  filterRelevant: true,\r\n  transferPickerData: true,\r\n};\r\n\r\n/**\r\n * Simple helper in charge of updating the picker data in the updated/calculated field settings.\r\n */\r\nexport class FieldSettingsPickerUpdater {\r\n\r\n  log = classLog({FieldSettingsPickerUpdater}, logSpecs);\r\n\r\n  constructor() {} \r\n  \r\n  startSync(source: Signal<Record<string, FieldProps> | null>) {\r\n    const l = this.log.fnIf('startSync', { source });\r\n\r\n    // Only Options to transfer, with change detection on the signal to not fire the effect unnecessarily\r\n    const optsOnly = computedObj('optsOnly', () =>  this.#filterRelevant(source(), 'opts'));\r\n\r\n    // Only Selected to transfer, with change detection on the signal to not fire the effect unnecessarily\r\n    const selOnly = computedObj('selOnly', () => this.#filterRelevant(source(), 'sel'));\r\n\r\n    // Options-Transfer\r\n    effect(() => this.#transferPickerData(optsOnly(), 'opts'));\r\n\r\n    // Selected-Transfer\r\n    effect(() => this.#transferPickerData(selOnly(), 'sel'));\r\n\r\n    l.end();\r\n  }\r\n\r\n  #filterRelevant(update: Record<string, FieldProps>, part: 'opts' | 'sel'): DataToTransfer[] {\r\n    // Make sure we already have data.\r\n    if (!update) return [];\r\n\r\n    // Transfer picker data\r\n    // 1. find all fieldProps with picker data and transfer to pickerData\r\n    const toTransfer = Object.entries(update)\r\n      .filter(([_, v]) => v[part]?.list)\r\n      .map(([field, v]) => ({\r\n        field,\r\n        list: v[part].list,\r\n        pickerData: v.constants.pickerData\r\n      } as const));\r\n\r\n    const l = this.log.fnIf('filterRelevant', { count: toTransfer.length, toTransfer }, part);\r\n    return l.rSilent(toTransfer);\r\n  }\r\n\r\n  /** Transfer picker data */\r\n  #transferPickerData(update: DataToTransfer[], part: 'opts' | 'sel'): void {\r\n    if (!update.length) return;\r\n    const l = this.log.fnIf('transferPickerData', { count: update.length, toTransfer: update }, `${part}`);\r\n\r\n    for (const { field, list, pickerData } of update) {\r\n      l.a('Transfer', { field, list });\r\n      const pd = pickerData();\r\n      const target = part == 'opts' ? pd.optionsOverride : pd.selectedOverride;\r\n      target.set(list);\r\n    }\r\n  }\r\n\r\n}\r\n\r\ninterface DataToTransfer {\r\n  field: string,\r\n  list: PickerItem[],\r\n  pickerData: () => PickerData | null\r\n}","import arrayEach from './_arrayEach.js';\nimport baseCreate from './_baseCreate.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\nimport getPrototype from './_getPrototype.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isTypedArray from './isTypedArray.js';\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nexport default transform;\n","import { effect, Injectable, Signal } from '@angular/core';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { difference } from '../../shared/helpers/difference';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { computedObj, signalObj } from '../../shared/signals/signal.utilities';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { EavEntityAttributes } from '../shared/models/eav';\r\nimport { ItemService } from './item.service';\r\n\r\nconst logSpecs = {\r\n  logChanges: false,\r\n};\r\n\r\n@Injectable()\r\nexport class FieldsSignalsHelper {\r\n\r\n  log = classLog({FieldsSignalsHelper}, logSpecs);\r\n\r\n  constructor(private itemSvc: ItemService) {\r\n    if (this.log.specs.logChanges) {\r\n      const lChange = classLog('FieldValues');\r\n      lChange.a('will log value changes');\r\n      let before: Record<string, FieldValue> = {};\r\n      effect(() => {\r\n        const guid = this.#itemGuid();\r\n        if (!guid) return lChange.a('no guid');\r\n        const all = this.values();\r\n        const changes = difference(all, before);\r\n        before = all;\r\n        lChange.a(`changed on guid: ${guid}`, changes);\r\n      });\r\n    }\r\n  }\r\n\r\n  #reader: Signal<EntityReader>;\r\n  #itemGuid = signalObj<string>('itemGuid', null);\r\n\r\n  init(itemGuid: string, reader: Signal<EntityReader>): this {\r\n    this.#itemGuid.set(itemGuid);\r\n    this.#fieldValueSigCache = new ComputedCacheHelper(itemGuid);\r\n    this.#reader = reader;\r\n    const attributes = this.itemSvc.itemAttributesSignal(itemGuid);\r\n    if (attributes == null)\r\n      console.error('item-entity-attributes is null');\r\n\r\n    this.#attributesLazy.set(attributes);\r\n    return this;\r\n  }\r\n\r\n  #attributesLazy = signalObj<Signal<EavEntityAttributes>>('attributesLazy', null);\r\n\r\n  get values(): Signal<Record<string, FieldValue>> {\r\n    const lGet = this.log.fn('get-values', { itemGuid: this.#itemGuid });\r\n    if (this.#values != null)\r\n      return lGet.rSilent(this.#values, 'cached');\r\n\r\n    const sig = this.#createValuesSignal();\r\n    this.#values = sig;\r\n    return lGet.rSilent(this.#values, 'generated');\r\n  }\r\n  #values: Signal<Record<string, FieldValue>>;\r\n\r\n  #createValuesSignal() {\r\n    const sig = computedObj(`${this.#itemGuid().substring(0, 8)}-ALL`, () => {\r\n      const l = this.log.fn('values');\r\n\r\n      // Track dependencies early\r\n      const reader = this.#reader();\r\n      const attrSig = this.#attributesLazy();\r\n\r\n      if (attrSig == null)\r\n        return l.r({}, 'attributes is null');\r\n\r\n      const attributes = attrSig();\r\n      if (!attributes || Object.keys(attributes).length == 0)\r\n        return l.r({}, 'attributes is empty');\r\n\r\n      const values = reader.currentValues(attributes);\r\n      return values\r\n    });\r\n    return sig;\r\n  }\r\n\r\n\r\n  get(field: string): Signal<FieldValue> {\r\n    const l = this.log.fn('get', { field });\r\n    const sig = this.#fieldValueOrNullSignal(field);\r\n    return l.rSilent(sig);\r\n  }\r\n\r\n  #fieldValueSigCache: ComputedCacheHelper<string, FieldValue>;\r\n\r\n  #fieldValueOrNullSignal(fieldName: string): Signal<FieldValue> {\r\n    // TODO: REFACTOR - TO USE THE new value signal\r\n\r\n    const l = this.log.fn('#fieldValueOrNullSignal', { fieldName });\r\n    const sig = this.#fieldValueSigCache.getOrCreateWithInfo(fieldName, () => {\r\n      // Do we already have attributes?\r\n      const attrSig = this.#attributesLazy();\r\n      if (attrSig == null)\r\n        return null;\r\n\r\n      const attributes = attrSig();\r\n      if (!attributes || Object.keys(attributes).length == 0)\r\n        return null;\r\n\r\n      const attribute = attributes[fieldName];\r\n      const values = attribute?.Values;\r\n      if (values == null || values.length == 0)\r\n        return null;\r\n\r\n      const value = this.#reader().getBestValue(attribute);\r\n      return value as FieldValue;\r\n    });\r\n    return l.rSilent(sig.signal, `isNew: ${sig.isNew}`);\r\n  }\r\n\r\n}","import isEqual from 'lodash-es/isEqual';\r\nimport isObject from 'lodash-es/isObject';\r\nimport transform from 'lodash-es/transform';\r\n// https://gist.github.com/Yimiprod/7ee176597fef230d1451?permalink_comment_id=2569085\r\n\r\n/**\r\n * This code is licensed under the terms of the MIT license\r\n *\r\n * Deep diff between two object, using lodash\r\n * @param  {Object} object Object compared\r\n * @param  {Object} base   Object to compare with\r\n * @return {Object}        Return a new object who represent the diff\r\n */\r\nexport function difference(object: any, base: any) {\r\n  function changes(object: any, base: any) {\r\n    return transform(object, function (result: Record<string, any>, value, key: string) {\r\n      if (!isEqual(value, base[key])) {\r\n        result[key] = (isObject(value) && isObject(base[key])) ? changes(value, base[key]) : value;\r\n      }\r\n    });\r\n  }\r\n  return changes(object, base);\r\n}\r\n","import { computed, effect, inject, Injectable, signal, Signal, WritableSignal } from '@angular/core';\r\nimport { transient } from '../../../../../core';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../shared/logging';\r\nimport { UserLanguageService } from '../../shared/services/user-language.service';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { computedObj, signalObj } from '../../shared/signals/signal.utilities';\r\nimport { LanguagePart } from '../dialog/header/language-settings-dialog/LanguageDropdown/language-part.enum';\r\nimport { PickerData } from '../fields/picker/picker-data';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormLanguageService } from '../form/form-language.service';\r\nimport { TranslationState } from '../localization/translate-state.model';\r\nimport { ContentTypeService } from '../shared/content-types/content-type.service';\r\nimport { ContentTypeSettingsHelpers, EntityReader } from '../shared/helpers';\r\nimport { EavItem } from '../shared/models/eav';\r\nimport { FieldProps } from './fields-configs.model';\r\nimport { FieldsPropsEngine } from './fields-properties-engine';\r\nimport { FieldsPropertiesUpdates } from './fields-properties-updates';\r\nimport { FieldSettingsPickerUpdater } from './fields-settings-picker-updater';\r\nimport { FieldsSignalsHelper } from './fields-signals.helper';\r\nimport { ItemService } from './item.service';\r\n\r\nconst logSpecs = {\r\n  effectTransferPickerData: true,\r\n  regenerateProps: true,\r\n  // Debug only on the following content type\r\n  type: '', //'@String';\r\n  activateAnalyzer: false,\r\n}\r\n\r\nconst maxCyclesMs = 250;\r\nconst maxCycleRestartDelay = 500;\r\nconst maxCyclesPerTime = 10;\r\nconst maxCyclesWarning = \"Max cycles reached, stopping for this second\";\r\n\r\n/**\r\n * FieldsSettingsService is responsible for handling the settings, values and validations of fields.\r\n * Each instance is responsible for a single entity.\r\n */\r\n@Injectable()\r\nexport class FieldsSettingsService {\r\n\r\n  log = classLog({FieldsSettingsService}, logSpecs);\r\n\r\n  // Shared / inherited services\r\n  #languageSvc = inject(FormLanguageService);\r\n  #formConfig = inject(FormConfigService);\r\n  #contentTypeSvc = inject(ContentTypeService);\r\n  #itemSvc = inject(ItemService);\r\n  #usrLangSvc = transient(UserLanguageService);\r\n\r\n  // Transient services for this instance only\r\n  #propsEngine = transient(FieldsPropsEngine);\r\n\r\n  #pickerSync = new FieldSettingsPickerUpdater();\r\n\r\n  constructor() {\r\n\r\n    // Signal to combine startSync and computed allProps\r\n    const allPropsOrNull = computedObj<Record<string, FieldProps> | null>('allPropsOrNull', () => this.#startSync() && this.#allProps());\r\n\r\n    // Transfer changes to the props state to the public property\r\n    effect(() => {\r\n      const update = allPropsOrNull();\r\n      if (!update) return;\r\n      this.allProps.set(update);\r\n    });\r\n\r\n    // Start the picker sync\r\n    this.#pickerSync.startSync(allPropsOrNull);\r\n  }\r\n\r\n  //#region injected services, constructor, clean-up\r\n\r\n  disableForCleanUp(): void {\r\n    this.log.fn('cleanUp');\r\n    this.#disabled.set(true);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * Field properties of all fields.\r\n   * It is updated when every round of change-cycles are complete and stable.\r\n   */\r\n  public allProps = signalObj<Record<string, FieldProps>>('allProps', {});\r\n  #startSync = signal(false);\r\n  #allProps: Signal<Record<string, FieldProps>>;\r\n\r\n  /** Signal to force a refresh. */\r\n  #forceRefresh = signalObj('forceRefresh', 0);\r\n\r\n  /** Signal to disable everything. Mainly on clean-up, as the computed will still run when data is removed from cache */\r\n  #disabled = signalObj('disabled', false);\r\n\r\n  #fieldsPropsUpdate: FieldsPropertiesUpdates;\r\n\r\n  #reader = this.#languageSvc.getEntityReader(this.#formConfig.config.formId);\r\n  #labelReader = computedObj('labelReader', () => {\r\n    // Watch the reader, so it will update when the reader changes\r\n    const reader = this.#reader();\r\n\r\n    // Now first check if the user has a language set, and if so, use that.\r\n    const lblLang = this.#usrLangSvc.value(LanguagePart.Form);\r\n    if (!lblLang)\r\n      return reader;\r\n    \r\n    const customLng = { current: lblLang, primary: reader.primary };\r\n    const userReader = new EntityReader(customLng);\r\n    return userReader;\r\n  });\r\n\r\n  //#region Item and content-type\r\n\r\n  /** The item - set on init, used for many other computations */\r\n  #item = signal<EavItem>(null);\r\n\r\n  #contentType = computed(() => (!this.#item()) ? null : this.#contentTypeSvc.getContentTypeOfItem(this.#item()));\r\n\r\n  /** The settings of the content-type of this item */\r\n  public contentTypeSettings = computed(() => !this.#item()\r\n    ? null\r\n    : ContentTypeSettingsHelpers.getDefaultSettings(this.#labelReader(), this.#contentType(), this.#item().Header)\r\n  );\r\n\r\n  //#endregion\r\n\r\n  /** Signals for each field value */\r\n  #fieldValues = transient(FieldsSignalsHelper);\r\n\r\n  /** Start the observables etc. to monitor changes */\r\n  init(entityGuid: string): void {\r\n\r\n    const item = this.#itemSvc.get(entityGuid);\r\n    this.#item.set(item);\r\n    this.#fieldsPropsUpdate = new FieldsPropertiesUpdates(entityGuid);\r\n\r\n    // Remember content-type, as it won't change and we don't need to listen to a signal\r\n    const ct = this.#contentType();\r\n    const debugOnlyCt = this.log.specs.type;\r\n    const forceDebug = debugOnlyCt === null ? null : ct.Id === debugOnlyCt;\r\n    if (forceDebug !== null) {\r\n      this.log.a(`Set debug for content type '${ct.Id}' to ${forceDebug}, only debugging ${debugOnlyCt}`);\r\n      this.log.forceEnable(forceDebug);\r\n    }\r\n\r\n    const slotIsEmpty = this.#itemSvc.slotIsEmpty(entityGuid);\r\n    this.#fieldValues.init(entityGuid, this.#reader);\r\n    this.#propsEngine.init(this, entityGuid, item, this.#contentType, this.#reader, this.#labelReader, this.#fieldValues, forceDebug);\r\n\r\n    // properties for the computation - set on an object, so we can do the call in a function\r\n    // and change what we'll do with it.\r\n    const deps: Deps = {\r\n      idMsg: `entityGuid: ${entityGuid}; contentTypeId: ${ct.Id};`,\r\n      cycle: 0,\r\n      // analyzer: null, // @2pp: 2025-12-19 - unavailable\r\n      disabled: this.#disabled,\r\n      slotIsEmpty,\r\n      slotWasEmpty: false, // must start false, so it will certainly run once.\r\n      forceRefresh: this.#forceRefresh,\r\n      watchRestart: signal(0),\r\n      prevFieldProps: {} as Record<string, FieldProps>,\r\n      hasRunOnce: false,\r\n    } satisfies Deps;\r\n    \r\n    // Protect against infinite loops\r\n    setInterval(() => {\r\n      // If we ran into a max-count, we should reset and trigger the watchRestart\r\n      if (deps.cycle > maxCyclesPerTime)\r\n        setTimeout(() => {\r\n          this.log.a(`restarting max cycles from ${deps.cycle}; ${deps.idMsg}`);\r\n          return deps.watchRestart.update(v => v + 1);\r\n        }, maxCycleRestartDelay);\r\n      // Every interval, reset the cycle count\r\n      deps.cycle = 0;\r\n    }, maxCyclesMs);\r\n\r\n    // This computed will contain all the updated field properties\r\n    this.#allProps = computedObj('allFieldProps', () => this.#regenerateProps(deps));\r\n\r\n    // Start Analyzer if necessary\r\n    // @2pp: 2025-12-19 - unavailable\r\n    // if (this.log.specs.activateAnalyzer)\r\n      // deps.analyzer = new ComputedAnalyzer(this.#allProps);\r\n\r\n    this.#startSync.set(true);\r\n  }\r\n\r\n  #regenerateProps(deps: Deps): Record<string, FieldProps> {\r\n    // @2pp: 2025-12-19 - unavailable\r\n    // if (deps.analyzer)\r\n      // console.log('analyzer', { fieldProps: this.allProps }, deps.analyzer.snapShotProducers(true));\r\n\r\n    const l = this.log.fnIf('regenerateProps', { cycle: deps.cycle, props: this.allProps }, deps.idMsg);\r\n    // If disabled for any reason, return the previous value (but do make sure there is a previous value)\r\n    // The #disabled is a safeguard as data will be missing when this is being cleaned up.\r\n    // The #slotIsEmpty means that the current entity is not being edited and will not be saved; can change from cycle to cycle.\r\n    const slotIsEmpty = deps.slotIsEmpty();\r\n    const justReuse = this.#disabled() || (slotIsEmpty && slotIsEmpty == deps.slotWasEmpty);\r\n    if (justReuse && deps.hasRunOnce)\r\n      return l.r(deps.prevFieldProps, 'disabled or slotIsEmpty');\r\n    else {\r\n      deps.hasRunOnce = true;\r\n      deps.slotWasEmpty = slotIsEmpty;\r\n    }\r\n\r\n    // Listen to ForceRefresh. This is triggered by a) promise-completed messages and b) v1 formulas\r\n    this.#forceRefresh();\r\n\r\n    // If we have reached the max cycles, we should stop\r\n    if (deps.cycle++ > maxCyclesPerTime) {\r\n      const msg = `${maxCyclesWarning}; cycle: ${deps.cycle}; ${deps.idMsg};`;\r\n      console.warn(msg);\r\n      deps.watchRestart(); // to ensure it can start again in a second, access this before we exit.\r\n      return l.r(deps.prevFieldProps, msg);\r\n    }\r\n\r\n    const latestFieldProps = this.#fieldsPropsUpdate.hasChanges()\r\n      ? this.#fieldsPropsUpdate.mergeMixins(deps.prevFieldProps)\r\n      : deps.prevFieldProps;\r\n    \r\n    // Note that this will access a lot of source signals\r\n    // whose dependencies will be incorporated into this calculation\r\n    const props = this.#propsEngine.getLatestSettingsAndValues(latestFieldProps);\r\n    deps.prevFieldProps = props;\r\n        \r\n    return l.rSilent(props, 'normal update');\r\n    // const propsDiff = difference(props, prevFieldProps);\r\n    // if (Object.keys(propsDiff).length > 0) {\r\n    //   l.a('Fields Props Diff', propsDiff);\r\n    //   return l.r(props, `props: normal update`);\r\n    // } else {\r\n    //   return l.rSilent(prevFieldProps, 'props: no changes');\r\n    // }\r\n  }\r\n\r\n\r\n  #fieldPropsCache = new ComputedCacheHelper<string, FieldProps>('field-props');\r\n  public fieldProps = this.#fieldPropsCache.buildProxy(f => () => this.allProps()[f]);\r\n  \r\n  #fieldSignalsCache = new ComputedCacheHelper<string, FieldSettings>('fields');\r\n  /**\r\n   * Used for getting field settings for a specific field.\r\n   * @param fieldName\r\n   * @returns Field settings\r\n   */\r\n  public settings = this.#fieldSignalsCache.buildProxy(f => () => this.allProps()[f].settings);\r\n\r\n  /**\r\n   * Used for translation state stream for a specific field.\r\n   * @param fieldName\r\n   * @returns Translation state signal\r\n   */\r\n  translationState = ComputedCacheHelper.proxy<string, TranslationState>('transl-state', f => () => this.allProps()[f].translationState);\r\n\r\n  /**\r\n   * Triggers a reevaluation of all formulas.\r\n   */\r\n  retriggerFormulas(source: string): void {\r\n    this.log.fn('retriggerFormulas', { source});\r\n    this.#forceRefresh.update(v => v + 1);\r\n  }\r\n\r\n  //#region Update Settings of a field\r\n\r\n  /**\r\n   * Modify a setting, ATM just to set collapsed / dialog-open states.\r\n   * Note that this change won't fire the formulas - which may not be correct.\r\n   */\r\n  updateSetting<T extends FieldSettings>(fieldName: string, update: Partial<T>, source: string): void {\r\n    this.#fieldsPropsUpdate.updateSetting(fieldName, update, source, this.allProps);\r\n    \r\n    // Retrigger formulas if the queue was empty (otherwise it was already retriggered and will run soon)\r\n    // Put a very small delay into processing the queue, since startup can send single updates for many fields one at a time.\r\n    setTimeout(() => this.retriggerFormulas('updateSetting'), 10);\r\n  }\r\n\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * WIP\r\n   * Field States for every field.\r\n   * ATM just used for formulas which have data-sources + in Validators for picker fields.\r\n   */\r\n  public get pickerData(): Record<string, PickerData> { return this.#propsEngine.pickerData; };\r\n}\r\n\r\ninterface Deps {\r\n  idMsg: string,\r\n  cycle: number,\r\n  // analyzer: any, // @2pp: 2025-12-19 - unavailable\r\n  disabled: Signal<boolean>,\r\n  slotIsEmpty: Signal<boolean>,\r\n  forceRefresh: Signal<number>,\r\n  watchRestart: WritableSignal<number>,\r\n  prevFieldProps: Record<string, FieldProps>,\r\n\r\n  /**\r\n   * Informs that on a previous run, the slot was empty.\r\n   * This is important, since we don't want to run the same cycle again if the slot is empty.\r\n   * But if it started empty, or was set back to empty, the formulas must run once\r\n   * to correct disabled state of all fields.\r\n   */\r\n  slotWasEmpty: boolean,\r\n\r\n  hasRunOnce: boolean,\r\n}","import { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../shared/logging';\r\nimport { FieldSettingsHelpersManager } from '../fields/logic/field-settings-helpers-manager';\r\nimport { FieldProps } from './fields-configs.model';\r\n\r\nexport class FieldTranslationInfo implements Pick<FieldSettings, 'DisableTranslation' | 'DisableAutoTranslation'> {\r\n\r\n  log = classLog({FieldTranslationInfo});\r\n\r\n  constructor(private getFieldsProps: () => FieldProps) { }\r\n\r\n  get #settings(): FieldSettings { return this.#_settings ??= this.getFieldsProps().settings; }\r\n  #_settings: FieldSettings;\r\n\r\n  get isAutoTranslatable(): boolean { return !this.DisableTranslation && !this.DisableAutoTranslation; }\r\n\r\n  get notForAutoTranslateBecauseOfType(): boolean { return !this.DisableTranslation && this.autoTranslateIsDisabledByTypeButNotByConfig(); }\r\n\r\n  get DisableTranslation(): boolean { return this.#settings.DisableTranslation; }\r\n\r\n  get DisableAutoTranslation(): boolean { return this.#settings.DisableAutoTranslation; }\r\n\r\n  /**\r\n   * Returns true if auto translation is enabled for the field, but was disabled by default because of the field type.\r\n   * This is meant to spot \"additional\" disabled fields which should be added to a list of fields that should not be translated.\r\n   * ...this is a bit ugly...\r\n   */\r\n  autoTranslateIsDisabledByTypeButNotByConfig() {\r\n    // first check if it's already disabled - in which case we say \"false\"\r\n    // so it's not added (again) to lists of Fields that should not be translated\r\n    if (this.DisableAutoTranslation) return false;\r\n    const logic = FieldSettingsHelpersManager.singleton().get(this.getFieldsProps().constants.inputTypeSpecs.inputType);\r\n    return !logic.canAutoTranslate;\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { EditApiKeyPaths } from '../../shared/constants/eav.constants';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ApiKeySpecs } from '../../shared/models/dialog-context.models';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { ContentTypeService } from '../shared/content-types/content-type.service';\r\nimport { ItemHelper } from '../shared/helpers/item.helper';\r\nimport { EavEntityAttributes, EavItem } from '../shared/models/eav';\r\nimport { FieldTranslationInfo } from './field-translation-info';\r\nimport { FieldsSettingsService } from './fields-settings.service';\r\nimport { ItemService } from './item.service';\r\n\r\nconst apiKeyInDemoModeAlert = `This translation is a demo. Please provide your own Google Translate API key in the EAV configuration.`;\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  constructor: false,\r\n  init: true,\r\n  unlock: true,\r\n  lock: true,\r\n  getInfo: true,\r\n  autoTranslate: true,\r\n  findAutoTranslatableFields: true,\r\n  addItemAttributeValueHelper: true,\r\n};\r\n\r\n/**\r\n * Fields-Translation service.\r\n * TODO: should probably split into two, to move Auto-Translate SoC\r\n */\r\n@Injectable()\r\nexport class FieldsTranslateService {\r\n  log = classLog({FieldsTranslateService}, logSpecs);\r\n\r\n  #itemAttributes: Signal<EavEntityAttributes>;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private itemService: ItemService,\r\n    private formConfig: FormConfigService,\r\n    private contentTypeService: ContentTypeService,\r\n    private fieldsSettingsService: FieldsSettingsService,\r\n    private snackBar: MatSnackBar,\r\n    private translate: TranslateService,\r\n  ) {\r\n    this.log.fnIf('constructor');\r\n  }\r\n\r\n  updater = this.itemService.updater;\r\n\r\n  init(entityGuid: string): void {\r\n    const l = this.log.fnIf('init');\r\n    this.#entityGuid = entityGuid;\r\n    const item = this.itemService.get(entityGuid);\r\n    this.#contentTypeId = ItemHelper.getContentTypeNameId(item);\r\n    this.#itemAttributes = this.itemService.itemAttributesSignal(entityGuid);\r\n    l.end('', { entityGuid, contentTypeId: this.#contentTypeId });\r\n  }\r\n\r\n  #entityGuid: string;\r\n  #contentTypeId: string;\r\n\r\n\r\n  //#region Lock / Unlock\r\n\r\n  unlock(fieldName: string, isTransaction = false, transactionItem?: EavItem): EavItem {\r\n    const l = this.log.fnIf('unlock', { fieldName, isTransaction, transactionItem });\r\n    \r\n    if (this.#getInfo(fieldName).DisableTranslation)\r\n      return l.rNull('Translation is disabled for this field.');\r\n\r\n    const language = this.formConfig.language();\r\n    transactionItem = this.updater.removeItemAttributeDimension(this.#entityGuid, fieldName, language.current, isTransaction, transactionItem);\r\n\r\n    const values = this.#itemAttributes()[fieldName];\r\n    const doesFieldHaveExistingDimension = new FieldReader(values, language).currentEditable != null;\r\n    const fieldReaderPrimaryLang = new FieldReader(values, FormLanguage.bothPrimary(language));\r\n    const defaultValue = fieldReaderPrimaryLang.current;\r\n    if (!doesFieldHaveExistingDimension) \r\n      return l.r(this.#addItemAttributeValueHelper(fieldName, defaultValue.value, language.current, false));\r\n    else\r\n      return l.rNull();\r\n  }\r\n\r\n  lock(fieldName: string, isTransaction = false, transactionItem?: EavItem): EavItem {\r\n    const l = this.log.fnIf('lock', { fieldName, isTransaction, transactionItem });\r\n    if (this.#getInfo(fieldName).DisableTranslation)\r\n      return l.rNull('Translation is disabled for this field.');\r\n\r\n    const language = this.formConfig.language();\r\n    transactionItem = this.updater.removeItemAttributeDimension(this.#entityGuid, fieldName, language.current, isTransaction, transactionItem);\r\n    return transactionItem;\r\n  }\r\n\r\n  /** For all fields, to unlock or lock */\r\n  toggleUnlockOnAll(isUnlock: boolean): void {\r\n    const translatable = this.findTranslatableFields();\r\n    if (translatable.length === 0)\r\n      return this.showMessageNoTranslatableFields(false);\r\n\r\n    let transactionItem: EavItem;\r\n    for (const fieldName of translatable) {\r\n      // will finish the transaction when last field is being translated\r\n      const isTransaction = fieldName !== translatable[translatable.length - 1];\r\n      transactionItem = isUnlock\r\n        ? this.unlock(fieldName, isTransaction, transactionItem)\r\n        : this.lock(fieldName, isTransaction, transactionItem);\r\n    }\r\n  }\r\n\r\n  //#endregion\r\n\r\n  showMessageNoTranslatableFields(forAutoTranslate: boolean): void {\r\n    const msg = this.translate.instant(\"LangMenu.NoAutoTranslatableFieldsFound\".replace(\"Auto\", forAutoTranslate ? \"Auto\" : \"\"));\r\n    this.snackBar.open(msg, null, { duration: 2000 });\r\n  }\r\n\r\n  /**\r\n   * Auto-translate the field value to the current language.\r\n   * @param areAllChecksKnown If true, the function will not check if the field value is empty, or if the field auto-translate was disabled by default.\r\n   */\r\n  autoTranslate(fieldNames: string[], sourceLanguageKey: string, isMany: boolean = false, areAllChecksKnown: boolean = false): void {\r\n    const l = this.log.fnIf('autoTranslate', { fieldNames, autoTranslateLanguageKey: sourceLanguageKey, isMany, areAllChecksKnown });\r\n    // Get API key and optionally show warning\r\n    const apiKeyInfo = this.formConfig.settings.Values[EditApiKeyPaths.GoogleTranslate] as ApiKeySpecs;\r\n    if (apiKeyInfo.IsDemo)\r\n      alert(apiKeyInDemoModeAlert);\r\n\r\n    const language = this.formConfig.language();\r\n    const attributes = this.#itemAttributes();\r\n\r\n    // Filter out fields that have translation disabled\r\n    fieldNames = fieldNames.filter(f => !this.#getInfo(f).DisableTranslation);\r\n    const textsForTranslation = fieldNames.map(f => new FieldReader(attributes[f], sourceLanguageKey).currentEditable.value);\r\n\r\n    if (!areAllChecksKnown)\r\n      fieldNames.forEach((field, i) => {\r\n        const currentText = textsForTranslation[i];\r\n        const isAutoTranslationEnabledButWasDisabledByDefault = this.#getInfo(field).autoTranslateIsDisabledByTypeButNotByConfig();\r\n        if (currentText == null || currentText === '' || isAutoTranslationEnabledButWasDisabledByDefault)\r\n          this.unlock(field);\r\n      });\r\n\r\n    const translationData = {\r\n      q: textsForTranslation,\r\n      target: language.current,\r\n      source: sourceLanguageKey\r\n    };\r\n    this.http.post(`https://translation.googleapis.com/language/translate/v2?key=${apiKeyInfo.ApiKey}`, translationData)\r\n      .subscribe((response: any) => {\r\n        const fieldsWithExistingDims = fieldNames.map(f => new FieldReader(attributes[f], language).currentEditable != null);\r\n        response.data.translations.forEach((translation: any, i: number) => {\r\n          const elem = document.createElement('textarea');\r\n          elem.innerHTML = translation.translatedText;\r\n          const fieldHasExistingDimension = fieldsWithExistingDims[i];\r\n          if (!isMany && fieldHasExistingDimension) {\r\n            this.updater.updateItemAttributeValue(this.#entityGuid, fieldNames[i], elem.value, language, false);\r\n          } else if (!fieldHasExistingDimension) {\r\n            this.#addItemAttributeValueHelper(fieldNames[i], elem.value, language.current, false);\r\n          }\r\n        });\r\n      });\r\n  }\r\n\r\n  copyFrom(fieldName: string, copyFromLanguageKey: string): void {\r\n    if (this.#getInfo(fieldName).DisableTranslation) return;\r\n\r\n    const attributes = this.#itemAttributes();\r\n    const values = attributes[fieldName];\r\n    const language = this.formConfig.language();\r\n    const fieldReader = new FieldReader(values, language);\r\n    const valueTranslation = fieldReader.ofLanguage(FormLanguage.diffCurrent(language, copyFromLanguageKey));\r\n    if (valueTranslation) {\r\n      const valueAlreadyExists = values\r\n        ? fieldReader.isEditableOrReadonlyTranslationExist()\r\n        : false;\r\n\r\n      if (valueAlreadyExists)\r\n        // Copy attribute value where language is languageKey to value where language is current language\r\n        this.updater.updateItemAttributeValue(\r\n          this.#entityGuid, fieldName, valueTranslation.value, language, false,\r\n        );\r\n      else\r\n        // Copy attribute value where language is languageKey to new attribute with current language\r\n        this.#addItemAttributeValueHelper(fieldName, valueTranslation.value, language.current, false);\r\n    } else\r\n      this.log.a(`${language.current}: Cant copy value from ${copyFromLanguageKey} because that value does not exist.`);\r\n  }\r\n\r\n  linkReadOnly(fieldName: string, linkWithLanguageKey: string): void {\r\n    this.linkToOtherField(fieldName, linkWithLanguageKey, true);\r\n  }\r\n\r\n  linkReadWrite(fieldName: string, linkWithLanguageKey: string): void {\r\n    return this.linkToOtherField(fieldName, linkWithLanguageKey, false);\r\n  }\r\n\r\n  private linkToOtherField(fieldName: string, linkWithLanguageKey: string, isReadOnly: boolean): void {\r\n    if (this.#getInfo(fieldName).DisableTranslation) return;\r\n\r\n    const language = this.formConfig.language();\r\n    const transactionItem = this.updater.removeItemAttributeDimension(this.#entityGuid, fieldName, language.current, true);\r\n    this.updater.addItemAttributeDimension(\r\n      this.#entityGuid, fieldName, language.current, linkWithLanguageKey, language.primary, isReadOnly, transactionItem,\r\n    );\r\n  }\r\n\r\n\r\n  /**\r\n   * Auto-translates all field that have auto-translate enabled and are not empty, empty ones are unlocked.\r\n   */\r\n  autoTranslateMany(sourceLanguageKey: string): void {\r\n    const attributes = this.#itemAttributes();\r\n    // fields that have auto-translate enabled and are not empty\r\n    const canTranslate: string[] = [];\r\n    // fields that have auto-translate enabled but didn't have it by default or are empty\r\n    const cantTranslateAndEmpty: string[] = this.findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault();\r\n    // fields that have auto-translate enabled and can be empty\r\n    const canTranslateWithEmpty = this.findAutoTranslatableFields().filter(x => !cantTranslateAndEmpty.includes(x));\r\n    // separate fields that have auto-translate enabled and are empty\r\n    canTranslateWithEmpty.forEach(fieldName => {\r\n      const value = new FieldReader(attributes[fieldName], sourceLanguageKey).currentEditable?.value;\r\n      if (value !== '' && value != null && value !== undefined)\r\n        canTranslate.push(fieldName);\r\n      // this is commented out because future edits on fields should automatically be passed to the other languages\r\n      // else\r\n      //   cantTranslateAndEmpty.push(fieldName);\r\n    });\r\n    // translate fields that have auto-translate enabled and are not empty\r\n    this.autoTranslate(canTranslate, sourceLanguageKey, true, true);\r\n    let transactionItem: EavItem;\r\n    // unlock fields that have auto-translate enabled but didn't have it by default or are empty\r\n    cantTranslateAndEmpty.forEach(fieldName => {\r\n      this.unlock(fieldName, false, transactionItem);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns all fields that can be translated.\r\n   */\r\n  findTranslatableFields(): string[] {\r\n    const attributes = this.#itemAttributes();\r\n    return Object.keys(attributes).filter(fieldName => !this.#getInfo(fieldName).DisableTranslation);\r\n  }\r\n\r\n  /**\r\n   * Returns all fields that can be translated and autoTranslated.\r\n   */\r\n  findAutoTranslatableFields(): string[] {\r\n    const attributes = this.#itemAttributes();\r\n    const result = Object.keys(attributes).filter(fieldName => this.#getInfo(fieldName).isAutoTranslatable);\r\n    this.log.fnIf('findAutoTranslatableFields', { attributes, result });\r\n    return result;\r\n  }\r\n\r\n  #getInfo(fieldName: string): FieldTranslationInfo {\r\n    const ti = new FieldTranslationInfo(() => this.fieldsSettingsService.fieldProps[fieldName]());\r\n    this.log.fnIf('getInfo', { fieldName, ti });\r\n    return ti;\r\n  }\r\n\r\n  /**\r\n   * Returns all fields that can be translated and autoTranslated, but were not autoTranslatable by default.\r\n   */\r\n  findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault(): string[] {\r\n    const attributes = this.#itemAttributes();\r\n    return Object.keys(attributes).filter(fieldName => this.#getInfo(fieldName).notForAutoTranslateBecauseOfType);\r\n  }\r\n\r\n  #addItemAttributeValueHelper(fieldName: string, value: any, currentLanguage: string, isReadOnly: boolean): EavItem {\r\n    const l = this.log.fnIf('addItemAttributeValueHelper', { fieldName, value, currentLanguage, isReadOnly });\r\n    const ctAttribute = this.contentTypeService.getAttribute(this.#contentTypeId, fieldName);\r\n    const result = this.updater.addItemAttributeValue(\r\n      this.#entityGuid, fieldName, value, currentLanguage, isReadOnly, ctAttribute.Type\r\n    );\r\n    return l.r(result);\r\n  }\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { combineLatest, distinctUntilChanged, map, startWith } from 'rxjs';\r\nimport { classLog } from '../../shared/logging';\r\nimport { mapUntilChanged } from '../../shared/rxJs/mapUntilChanged';\r\nimport { ServiceBase } from '../../shared/services/service-base';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormsStateService } from '../form/forms-state.service';\r\nimport { FieldValueHelpers } from '../shared/helpers/field-value.helpers';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { ItemService } from '../state/item.service';\r\nimport { EntityFormStateService } from './entity-form-state.service';\r\n\r\n/**\r\n * A Service to ....\r\n * \r\n * Important: This is specific to a single entity.\r\n */\r\n@Injectable()\r\nexport class EntityFormSyncService extends ServiceBase {\r\n\r\n  log = classLog({EntityFormSyncService});\r\n\r\n  constructor(\r\n    private entityFormSvc: EntityFormStateService,\r\n    private formsStateSvc: FormsStateService,\r\n    private formConfig: FormConfigService,\r\n    private itemSvc: ItemService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  public setupSync(entityGuid: string) {\r\n    const form = this.entityFormSvc.formGroup;\r\n\r\n    // 1. Sync dirty state upwards\r\n    this.subscriptions.add(\r\n      form.valueChanges.pipe(\r\n        map(() => form.dirty),\r\n        startWith(form.dirty),\r\n        // We can't have distinctUntilChanged because dirty state is not reset on form save.\r\n        // leave this comment and the code below for future reference, so people don't add it back.\r\n        // distinctUntilChanged(),\r\n      ).subscribe(isDirty => {\r\n        this.formsStateSvc.setFormDirty(entityGuid, isDirty);\r\n      })\r\n    );\r\n\r\n    // 2. Sync form-valid state to the global states\r\n    // 2.1. Get the form-valid state\r\n    const formValid$ = form.valueChanges.pipe(\r\n      map(() => !form.invalid),\r\n      startWith(!form.invalid),\r\n      mapUntilChanged(m => m),\r\n    );\r\n\r\n    // 2.2. Get the item header. Note that it will be null during destruction\r\n    const itemHeader$ = this.itemSvc.getItemHeader$(entityGuid);\r\n\r\n    // 2.3. Setup sync\r\n    this.subscriptions.add(\r\n      combineLatest([formValid$, itemHeader$]).pipe(\r\n        mapUntilChanged(([formValid, itemHeader]) => itemHeader?.IsEmpty || formValid),\r\n      ).subscribe(isValid => {\r\n        this.formsStateSvc.setFormValid(entityGuid, isValid);\r\n      })\r\n    );\r\n\r\n    // 3. Sync raw values as they change from the form...\r\n    // TODO: THIS LOOKS a bit fishy, since I think we have another service syncing form values to the controls\r\n    this.subscriptions.add(\r\n      form.valueChanges.pipe(\r\n        map(() => form.getRawValue() as ItemValuesOfLanguage),\r\n        distinctUntilChanged((previous, current) => FieldValueHelpers.getItemValuesChanges(previous, current) == null),\r\n      ).subscribe(formValues => {\r\n        const language = this.formConfig.language();\r\n        this.itemSvc.updater.updateItemAttributesValues(entityGuid, formValues, language);\r\n      })\r\n    );\r\n\r\n  }\r\n}","import { Type } from '@angular/core';\r\nimport 'reflect-metadata';\r\n\r\nexport const FieldMetadataKey = 'FieldMetadata' as const;\r\n\r\n/**\r\n * Angular decorator to add metadata to a field component.\r\n * @param metadata \r\n * @returns \r\n */\r\nexport function FieldMetadata(metadata: FieldMetadataModel) {\r\n  return (component: Type<any>) => {\r\n    Reflect.defineMetadata(FieldMetadataKey, metadata, component);\r\n  };\r\n}\r\n\r\nexport interface FieldMetadataModel {\r\n  wrappers?: string[];\r\n  requiredFeatures?: string[];\r\n}\r\n","import { Directive, ElementRef, NgZone, OnDestroy, OnInit } from '@angular/core';\r\n\r\n/**\r\n * This directive will fix all html inside it so that links open in a new tab.\r\n */\r\n@Directive({\r\n  selector: '[appChangeAnchorTarget]',\r\n})\r\nexport class ChangeAnchorTargetDirective implements OnInit, OnDestroy {\r\n  #target = '_blank';\r\n  #element: HTMLElement;\r\n  #observer: MutationObserver;\r\n\r\n  constructor(elementRef: ElementRef, private zone: NgZone) {\r\n    this.#element = elementRef.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.#setAnchorTargets();\r\n      this.#observer = new MutationObserver((_: unknown) => {\r\n        this.#setAnchorTargets();\r\n      });\r\n      this.#observer.observe(this.#element, { attributes: true, childList: true, subtree: true });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.zone.runOutsideAngular(() => this.#observer.disconnect());\r\n  }\r\n\r\n  #setAnchorTargets() {\r\n    if (this.#element.nodeName.toLocaleLowerCase() === 'a') {\r\n      const anchor = this.#element as HTMLAnchorElement;\r\n      if (anchor.target !== this.#target)\r\n        anchor.target = this.#target;\r\n    }\r\n    const childAnchors = this.#element.getElementsByTagName('a');\r\n    for (const anchor of Array.from(childAnchors))\r\n      if (anchor.target !== this.#target)\r\n        anchor.target = this.#target;\r\n  }\r\n}\r\n","@if (show()) {\r\n  <div class=\"my-main\" [ngClass]=\"{\r\n      'my-last-field': fieldState.config.isLastInGroup,\r\n      'my-hyperlink-wrapper-fix': hyperlinkDefaultWrapperFix() && !fieldState.config.isLastInGroup,\r\n      'small-gap': smallGap(),\r\n    }\"\r\n  >\r\n    @if (notes()) {\r\n      <mat-hint class=\"my-notes\" (click)=\"toggleHint($event)\" [ngClass]=\"{ 'disabled': disabled() }\">\r\n        <div class=\"id-notes-container\" [ngClass]=\"showExpand ? 'expandable': ''\" appChangeAnchorTarget\r\n          [innerHtml]=\"notes() | safeHtml\">\r\n        </div>\r\n      </mat-hint>\r\n    }\r\n    @if (showErrors() && errorMessage(); as error) {\r\n      <mat-error class=\"\">{{ error | translate: settings() }}</mat-error>\r\n    }\r\n    @if (!disableError() && warningMessage(); as warning) {\r\n      <mat-error class=\"warning\">{{ warning | translate }}</mat-error>\r\n    }\r\n  </div>\r\n}","import { NgClass } from '@angular/common';\r\nimport { Component, inject, input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\nimport { computedObj } from '../../../shared/signals/signal.utilities';\r\nimport { ChangeAnchorTargetDirective } from '../directives/change-anchor-target.directive';\r\nimport { FieldState } from '../field-state';\r\n\r\n@Component({\r\n    selector: 'app-field-helper-text',\r\n    templateUrl: './field-help-text.html',\r\n    styleUrls: ['./field-help-text.scss'],\r\n    imports: [\r\n        NgClass,\r\n        MatFormFieldModule,\r\n        ChangeAnchorTargetDirective,\r\n        TranslateModule,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class FieldHelperTextComponent {\r\n  disableError = input<boolean>(false);\r\n  hyperlinkDefaultWrapperFix = input<boolean>(false);\r\n\r\n  /** Make the control \"flat\" to not take space if there is nothing to show. */\r\n  flatIfEmpty = input<boolean>(false);\r\n\r\n  smallGap = input<boolean>(false);\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  constructor() {\r\n    // Get the component ID from the compiler, so we can use it in the template\r\n    // This is to get style encapsulation to work with inner html\r\n    this.componentId = (this.constructor as unknown as { ['cmp']: { id: string } })['cmp'].id;\r\n  }\r\n\r\n  componentId: string;\r\n\r\n  protected settings = this.fieldState.settings;\r\n\r\n  #invalid = computedObj('invalid', () => this.fieldState.ui().invalid);\r\n  disabled = computedObj('disabled', () => this.fieldState.ui().disabled);\r\n\r\n  showErrors = computedObj('showErrors', () => this.#invalid() && !this.disableError());\r\n\r\n  /**\r\n   * Notes with all p-tags updated to have the current components identifying class.\r\n   * This ensures that styles which are on this component will also affect the notes.\r\n   */\r\n  notes = computedObj('notes', () => {\r\n    const n = this.settings().Notes ?? '';\r\n    return n.replace(/<p>/g, `<p _ngcontent-ng-${this.componentId}>`);\r\n  });\r\n\r\n  isEmpty = computedObj('isEmpty', () => !this.notes() && !this.showErrors());\r\n\r\n  errorMessage = computedObj('errorMessage', () => {\r\n    // Make dependency on value change - otherwise errors are not updated reliably\r\n    const _ = this.fieldState.uiValue();\r\n    // Get the current errors\r\n    return this.fieldState.ui().getErrors();\r\n  });\r\n\r\n  warningMessage = computedObj('warningMessage', () => this.fieldState.ui().getWarnings());\r\n\r\n  /**\r\n   * Show the control if:\r\n   * - it's not empty (which already checks if it has errors) \r\n   * - and if it doesn't have warnings\r\n   * - and flat wasn't preferred\r\n   */\r\n  show = computedObj('show', () => !this.isEmpty() || this.warningMessage() || !this.flatIfEmpty());\r\n\r\n  showExpand = true;\r\n\r\n  /** Don't toggle if clicked on an anchor tag or it's children */\r\n  toggleHint(event: MouseEvent) {\r\n    let target = event.target as HTMLElement;\r\n\r\n    if (target.nodeName.toLocaleLowerCase() === 'a') return;\r\n    while (target && target.classList && !target.classList.contains('id-notes-container')) {\r\n      target = target.parentNode as HTMLElement;\r\n      if (!target) return;\r\n      if (target.nodeName.toLocaleLowerCase() === 'a') return;\r\n    }\r\n\r\n    this.showExpand = !this.showExpand;\r\n  }\r\n}\r\n","import { Component, inject } from '@angular/core';\r\nimport { FieldSettingsBoolean } from 'projects/edit-types/src/FieldSettings-Boolean';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldState } from '../../field-state';\r\n\r\n@Component({\r\n  selector: 'app-boolean-base',\r\n  template: '',\r\n})\r\n// @FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport abstract class BooleanBaseComponent {\r\n\r\n  fieldState = inject(FieldState) as FieldState<boolean, FieldSettings & FieldSettingsBoolean>;\r\n\r\n  group = this.fieldState.group;\r\n  ui = this.fieldState.ui;\r\n  uiValue = this.fieldState.uiValue;\r\n\r\n  settings = this.fieldState.settings;\r\n  basics = this.fieldState.basics;\r\n\r\n  // TODO: CONTINUE HERE\r\n  changedLabel = this.fieldState.settingExt('_label');\r\n}\r\n","import { FieldSettingsBoolean } from 'projects/edit-types/src/FieldSettings-Boolean';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class BooleanDefaultSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.BooleanDefault;\r\n\r\n  constructor() { super({ BooleanDefaultSettingsHelper }); }\r\n\r\n  update({ settings, value }: FieldSettingsUpdateTask<boolean>): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & FieldSettingsBoolean;\r\n    fixedSettings.ReverseToggle ??= false;\r\n    fixedSettings._label = this.#calculateLabel(value, fixedSettings);\r\n    return fixedSettings;\r\n  }\r\n\r\n  #calculateLabel(value: boolean, settings: FieldSettings & FieldSettingsBoolean): string {\r\n    if (value === true && settings.TitleTrue)\r\n      return settings.TitleTrue;\r\n    if (value === false && settings.TitleFalse)\r\n      return settings.TitleFalse;\r\n    return settings.Name;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(BooleanDefaultSettingsHelper);\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { BooleanBaseComponent } from './boolean-base';\r\nimport { BooleanDefaultSettingsHelper } from './boolean-default-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.BooleanDefault,\r\n    templateUrl: './boolean-default.html',\r\n    styleUrls: ['./boolean-default.scss'],\r\n    imports: [\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatSlideToggleModule,\r\n        NgClass,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class BooleanDefaultComponent extends BooleanBaseComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    BooleanDefaultSettingsHelper.importMe();\r\n  }\r\n\r\n  checkedState = computedObj('checkedState', () => {\r\n    const value = this.uiValue();\r\n    const reverseToggle = this.settings().ReverseToggle;\r\n    return reverseToggle ? !value : value;\r\n  });\r\n\r\n  updateValue() {\r\n    if (this.ui().disabled) return;\r\n    this.fieldState.ui().setIfChanged(!this.uiValue());\r\n  }\r\n}\r\n","<div [formGroup]=\"group\">\r\n  <div class=\"eav-toggle-hitbox\" (click)=\"updateValue()\">\r\n    <mat-slide-toggle\r\n      [checked]=\"checkedState()\"\r\n      [disabled]=\"ui().disabled\"\r\n      [ngClass]=\"!uiValue() ? 'changeable-label-mat-slide-toggle' : ''\" />\r\n    <span [ngClass]=\"!uiValue() ? 'eav-toggle-label' : ''\" class=\"eav-slide-toggle-label\">\r\n      {{ changedLabel() ?? basics().label }}\r\n    </span>\r\n  </div>\r\n  <app-field-helper-text [disableError]=\"true\"></app-field-helper-text>\r\n</div>\r\n","import { FieldSettingsBoolean } from 'projects/edit-types/src/FieldSettings-Boolean';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class BooleanTristateSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.BooleanTristate;\r\n\r\n  constructor() { super({ BooleanTristateSettingsHelper }); }\r\n\r\n  update({ settings, value }: FieldSettingsUpdateTask<boolean | ''>): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & FieldSettingsBoolean;\r\n    fixedSettings.ReverseToggle ??= false;\r\n    fixedSettings._label = this.#calculateLabel(value, fixedSettings);\r\n    return fixedSettings;\r\n  }\r\n\r\n  #calculateLabel(value: boolean | '', settings: FieldSettings & FieldSettingsBoolean): string {\r\n    if (value === true && settings.TitleTrue)\r\n      return settings.TitleTrue;\r\n    if (value === false && settings.TitleFalse)\r\n      return settings.TitleFalse;\r\n    if (!value /* null | '' */ && settings.TitleIndeterminate)\r\n      return settings.TitleIndeterminate;\r\n    return settings.Name;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(BooleanTristateSettingsHelper);\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { BooleanBaseComponent } from '../boolean-default/boolean-base';\r\nimport { BooleanTristateSettingsHelper } from './boolean-tristate-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.BooleanTristate,\r\n    templateUrl: './boolean-tristate.html',\r\n    styleUrls: ['./boolean-tristate.scss'],\r\n    imports: [\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatSlideToggleModule,\r\n        NgClass,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class BooleanTristateComponent extends BooleanBaseComponent {\r\n\r\n  fs = this.fieldState as FieldState<boolean | ''>;\r\n\r\n  constructor() {\r\n    super();\r\n    BooleanTristateSettingsHelper.importMe();\r\n  }\r\n\r\n  checkedState = computedObj('checkedState', () => {\r\n    const value = this.fs.uiValue();\r\n    const reverseToggle = this.settings().ReverseToggle;\r\n    return reverseToggle\r\n      ? (value === true ? false : value === false ? true : value)\r\n      : (value === '' ? null : value);\r\n  });\r\n\r\n  bestLabel = computedObj('bestLabel', () => {\r\n    const value = this.checkedState();\r\n    const settings = this.settings();\r\n    if (value === true && settings.TitleTrue)           return settings.TitleTrue;\r\n    if (value === false && settings.TitleFalse)         return settings.TitleFalse;\r\n    if (value === null && settings.TitleIndeterminate)  return settings.TitleIndeterminate;\r\n    return settings.Name;\r\n  });\r\n\r\n  updateValue(disabled: boolean) {\r\n    if (disabled) return;\r\n    this.fieldState.ui().setIfChanged(this.#nextValue());\r\n  }\r\n\r\n  #nextValue() {\r\n    const current = this.fs.uiValue();\r\n    const reversed = this.settings().ReverseToggle;\r\n\r\n    switch (current) {\r\n      case false: return reversed ? true : null;\r\n      case true: return reversed ? null : false;\r\n      case '':\r\n      case null: return reversed ? false : true;\r\n    }\r\n  }\r\n}\r\n","<!-- New -->\r\n<div [formGroup]=\"group\">\r\n  <div class=\"eav-toggle-hitbox\" (click)=\"updateValue(ui().disabled)\">\r\n    <mat-slide-toggle\r\n    [checked]=\"checkedState()\"\r\n    [disabled]=\"ui().disabled\"\r\n    [ngClass]=\"{\r\n          'toggle-false': checkedState() === false,\r\n          'toggle-true': checkedState() === true,\r\n          'toggle-null': checkedState() === null,\r\n          'changeable-label-tristate-mat-slide-toggle': changedLabel() !== basics().label\r\n            }\" />\r\n    <span [ngClass]=\"!checkedState() ? 'eav-toggle-label' : ''\" class=\"eav-slide-toggle-label\">\r\n      {{ changedLabel() ?? basics().label }}\r\n    </span>\r\n  </div>\r\n  <app-field-helper-text [disableError]=\"true\"></app-field-helper-text>\r\n</div>\r\n","import { Component, inject } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.CustomDefault,\r\n  templateUrl: './custom-default.html',\r\n  styleUrls: ['./custom-default.scss'],\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class CustomDefaultComponent {\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected config = this.fieldState.config;\r\n\r\n  constructor() {\r\n  }\r\n}\r\n","<div class=\"message\">\r\n  {{ config.fieldName }}: Field configuration is incomplete and should be fixed.\r\n  If this is a custom field, the JS is probably not loading and/or not creating the correct custom tag such as <code>string-custom-name</code>\r\n</div>\r\n","import { CustomJsonEditor } from 'projects/edit-types/src/FieldSettings-CustomJsonEditor';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class CustomJsonEditorSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.CustomJsonEditor as string;\r\n\r\n  constructor() { super({ CustomJsonEditorSettingsHelper }); }\r\n\r\n  update({ settings }: FieldSettingsUpdateTask): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & CustomJsonEditor;\r\n    fixedSettings.Rows ||= 5;\r\n    fixedSettings.JsonValidation ||= 'strict';\r\n    fixedSettings.JsonSchemaMode ||= 'none';\r\n    fixedSettings.JsonSchemaSource ||= 'link';\r\n    fixedSettings.JsonSchemaUrl ??= '';\r\n    fixedSettings.JsonSchemaRaw ??= '';\r\n    fixedSettings.JsonCommentsAllowed ??= false;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(CustomJsonEditorSettingsHelper);\r\n\r\nexport class StringJsonSettingsHelper extends CustomJsonEditorSettingsHelper {\r\n  name = InputTypeCatalog.StringJson;\r\n}\r\n\r\nFieldSettingsHelperBase.add(StringJsonSettingsHelper);\r\n","<div class=\"json-field\" [ngClass]=\"{\r\n  'disabled': ui().disabled,\r\n  'focused': focused().value,\r\n  'error': ui().touchedAndInvalid\r\n  }\">\r\n  <mat-label class=\"label\">{{ basics().label }} {{ basics().required ? '*' : '' }}</mat-label>\r\n  <app-monaco-editor class=\"editor\"\r\n    [filename]=\"filename\"\r\n    [ngStyle]=\"{ 'height': editorHeight() }\"\r\n    [value]=\"uiValue()\"\r\n    [options]=\"monacoOptions\"\r\n    [jsonSchema]=\"jsonSchema()\"\r\n    [jsonComments]=\"jsonComments()\"\r\n    (valueChanged)=\"codeChanged($event)\"\r\n    (focused)=\"onFocused()\"\r\n    (blurred)=\"onBlurred()\">\r\n  </app-monaco-editor>\r\n  @if (!uiValue() && basics().placeholder) {\r\n    <input class=\"placeholder eav-translate-on-dblclick\" [placeholder]=\"basics().placeholder\">\r\n  }\r\n</div>\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { NgClass, NgStyle } from '@angular/common';\r\nimport { Component, computed, inject } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport type * as Monaco from 'monaco-editor';\r\nimport { CustomJsonEditor } from 'projects/edit-types/src/FieldSettings-CustomJsonEditor';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { MonacoEditorComponent } from '../../../../monaco-editor/monaco-editor';\r\nimport { JsonSchema } from '../../../../monaco-editor/monaco-editor.models';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { CustomJsonEditorSettingsHelper, StringJsonSettingsHelper } from './custom-json-editor-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.CustomJsonEditor,\r\n    templateUrl: './custom-json-editor.html',\r\n    styleUrls: ['./custom-json-editor.scss'],\r\n    imports: [\r\n        NgClass,\r\n        MatFormFieldModule,\r\n        MonacoEditorComponent,\r\n        NgStyle,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class CustomJsonEditorComponent {\r\n  #fieldState = inject(FieldState) as FieldState<string, FieldSettings & CustomJsonEditor>;\r\n  #config = this.#fieldState.config;\r\n\r\n  protected ui = this.#fieldState.ui;\r\n  protected uiValue = this.#fieldState.uiValue;\r\n  protected basics = this.#fieldState.basics;\r\n  #settings = this.#fieldState.settings;\r\n\r\n  #rows = this.#fieldState.settingExt('Rows');\r\n  protected focused = computed(() => this.#config.focused$);\r\n\r\n  protected editorHeight = computed(() => {\r\n    return this.#rows() * this.monacoOptions.lineHeight + 'px';\r\n  });\r\n\r\n  protected jsonSchema = computed(() => {\r\n    const settings = this.#settings();\r\n    if (settings.JsonSchemaMode === 'none') return;\r\n    const jsonSchema: JsonSchema = {\r\n      type: settings.JsonSchemaSource,\r\n      value: settings.JsonSchemaSource === 'link' ? settings.JsonSchemaUrl : settings.JsonSchemaRaw,\r\n    };\r\n    return jsonSchema;\r\n  });\r\n\r\n  protected jsonComments = computed(() => {\r\n    const settings = this.#settings();\r\n    const jsonComments: Monaco.languages.json.SeverityLevel = settings.JsonCommentsAllowed ? 'ignore' : 'error';\r\n    return jsonComments;\r\n  });\r\n\r\n  protected filename: string;\r\n  protected monacoOptions: Monaco.editor.IStandaloneEditorConstructionOptions = {\r\n    minimap: {\r\n      enabled: false,\r\n    },\r\n    lineHeight: 19,\r\n    lineNumbers: 'off',\r\n    lineDecorationsWidth: 0,\r\n    folding: false,\r\n    scrollBeyondLastLine: false,\r\n    tabSize: 2,\r\n    fixedOverflowWidgets: true,\r\n  };\r\n\r\n  constructor(private formConfig: FormConfigService) {\r\n    CustomJsonEditorSettingsHelper.importMe();\r\n    StringJsonSettingsHelper.importMe();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.filename = `${this.#config.fieldName} ${this.#config.entityGuid} ${this.formConfig.config.formId}.json`;\r\n  }\r\n\r\n  codeChanged(code: string): void {\r\n    this.ui().setIfChanged(code);\r\n  }\r\n\r\n  onFocused(): void {\r\n    this.#config.focused$.next(true);\r\n  }\r\n\r\n  onBlurred(): void {\r\n    this.ui().markTouched();\r\n    this.#config.focused$.next(false);\r\n  }\r\n}\r\n","import * as i0 from '@angular/core';\nimport { InjectionToken, inject, Injector, ViewContainerRef, signal, viewChild, viewChildren, input, output, booleanAttribute, computed, effect, ElementRef, afterNextRender, untracked, Component, ChangeDetectionStrategy, ViewEncapsulation, model, Renderer2, Directive, HostAttributeToken, NgModule } from '@angular/core';\nimport { Directionality } from '@angular/cdk/bidi';\nimport { createRepositionScrollStrategy, createFlexibleConnectedPositionStrategy, createOverlayRef } from '@angular/cdk/overlay';\nimport { TemplatePortal } from '@angular/cdk/portal';\nimport { _getEventTarget, _getFocusedElementPierceShadowDom } from '@angular/cdk/platform';\nimport { TAB, ESCAPE, hasModifierKey, ENTER, DOWN_ARROW, UP_ARROW } from '@angular/cdk/keycodes';\nimport { ActiveDescendantKeyManager, _IdGenerator } from '@angular/cdk/a11y';\nimport { DateAdapter, MAT_DATE_FORMATS } from './_date-formats-chunk.mjs';\nimport { _animationsDisabled } from './_animation-chunk.mjs';\nimport { MatOption, MAT_OPTION_PARENT_COMPONENT } from './_option-chunk.mjs';\nimport { Validators, NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { MAT_FORM_FIELD } from './_form-field-chunk.mjs';\nimport { MAT_INPUT_VALUE_ACCESSOR } from './_input-value-accessor-chunk.mjs';\nimport { MatIconButton } from './_icon-button-chunk.mjs';\nimport { CdkScrollableModule } from '@angular/cdk/scrolling';\nimport 'rxjs';\nimport '@angular/cdk/layout';\nimport './_ripple-chunk.mjs';\nimport '@angular/cdk/coercion';\nimport '@angular/cdk/private';\nimport './_pseudo-checkbox-chunk.mjs';\nimport './_structural-styles-chunk.mjs';\nimport '@angular/common';\nimport 'rxjs/operators';\nimport '@angular/cdk/observers/private';\nimport './_ripple-loader-chunk.mjs';\n\nconst INTERVAL_PATTERN = /^(\\d*\\.?\\d+)\\s*(h|hour|hours|m|min|minute|minutes|s|second|seconds)?$/i;\nconst MAT_TIMEPICKER_CONFIG = new InjectionToken('MAT_TIMEPICKER_CONFIG');\nfunction parseInterval(value) {\n  let result;\n  if (value === null) {\n    return null;\n  } else if (typeof value === 'number') {\n    result = value;\n  } else {\n    if (value.trim().length === 0) {\n      return null;\n    }\n    const parsed = value.match(INTERVAL_PATTERN);\n    const amount = parsed ? parseFloat(parsed[1]) : null;\n    const unit = parsed?.[2]?.toLowerCase() || null;\n    if (!parsed || amount === null || isNaN(amount)) {\n      return null;\n    }\n    if (unit === 'h' || unit === 'hour' || unit === 'hours') {\n      result = amount * 3600;\n    } else if (unit === 'm' || unit === 'min' || unit === 'minute' || unit === 'minutes') {\n      result = amount * 60;\n    } else {\n      result = amount;\n    }\n  }\n  return result;\n}\nfunction generateOptions(adapter, formats, min, max, interval) {\n  const options = [];\n  let current = adapter.compareTime(min, max) < 1 ? min : max;\n  while (adapter.sameDate(current, min) && adapter.compareTime(current, max) < 1 && adapter.isValid(current)) {\n    options.push({\n      value: current,\n      label: adapter.format(current, formats.display.timeOptionLabel)\n    });\n    current = adapter.addSeconds(current, interval);\n  }\n  return options;\n}\nfunction validateAdapter(adapter, formats) {\n  function missingAdapterError(provider) {\n    return Error(`MatTimepicker: No provider found for ${provider}. You must add one of the following ` + `to your app config: provideNativeDateAdapter, provideDateFnsAdapter, ` + `provideLuxonDateAdapter, provideMomentDateAdapter, or provide a custom implementation.`);\n  }\n  if (!adapter) {\n    throw missingAdapterError('DateAdapter');\n  }\n  if (!formats) {\n    throw missingAdapterError('MAT_DATE_FORMATS');\n  }\n  if (formats.display.timeInput === undefined || formats.display.timeOptionLabel === undefined || formats.parse.timeInput === undefined) {\n    throw new Error('MatTimepicker: Incomplete `MAT_DATE_FORMATS` has been provided. ' + '`MAT_DATE_FORMATS` must provide `display.timeInput`, `display.timeOptionLabel` ' + 'and `parse.timeInput` formats in order to be compatible with MatTimepicker.');\n  }\n}\n\nconst MAT_TIMEPICKER_SCROLL_STRATEGY = new InjectionToken('MAT_TIMEPICKER_SCROLL_STRATEGY', {\n  providedIn: 'root',\n  factory: () => {\n    const injector = inject(Injector);\n    return () => createRepositionScrollStrategy(injector);\n  }\n});\nclass MatTimepicker {\n  _dir = inject(Directionality, {\n    optional: true\n  });\n  _viewContainerRef = inject(ViewContainerRef);\n  _injector = inject(Injector);\n  _defaultConfig = inject(MAT_TIMEPICKER_CONFIG, {\n    optional: true\n  });\n  _dateAdapter = inject(DateAdapter, {\n    optional: true\n  });\n  _dateFormats = inject(MAT_DATE_FORMATS, {\n    optional: true\n  });\n  _scrollStrategyFactory = inject(MAT_TIMEPICKER_SCROLL_STRATEGY);\n  _animationsDisabled = _animationsDisabled();\n  _isOpen = signal(false, ...(ngDevMode ? [{\n    debugName: \"_isOpen\"\n  }] : []));\n  _activeDescendant = signal(null, ...(ngDevMode ? [{\n    debugName: \"_activeDescendant\"\n  }] : []));\n  _input = signal(null, ...(ngDevMode ? [{\n    debugName: \"_input\"\n  }] : []));\n  _overlayRef = null;\n  _portal = null;\n  _optionsCacheKey = null;\n  _localeChanges;\n  _onOpenRender = null;\n  _panelTemplate = viewChild.required('panelTemplate');\n  _timeOptions = [];\n  _options = viewChildren(MatOption, ...(ngDevMode ? [{\n    debugName: \"_options\"\n  }] : []));\n  _keyManager = new ActiveDescendantKeyManager(this._options, this._injector).withHomeAndEnd(true).withPageUpDown(true).withVerticalOrientation(true);\n  interval = input(parseInterval(this._defaultConfig?.interval || null), {\n    ...(ngDevMode ? {\n      debugName: \"interval\"\n    } : {}),\n    transform: parseInterval\n  });\n  options = input(null, ...(ngDevMode ? [{\n    debugName: \"options\"\n  }] : []));\n  isOpen = this._isOpen.asReadonly();\n  selected = output();\n  opened = output();\n  closed = output();\n  activeDescendant = this._activeDescendant.asReadonly();\n  panelId = inject(_IdGenerator).getId('mat-timepicker-panel-');\n  disableRipple = input(this._defaultConfig?.disableRipple ?? false, {\n    ...(ngDevMode ? {\n      debugName: \"disableRipple\"\n    } : {}),\n    transform: booleanAttribute\n  });\n  ariaLabel = input(null, {\n    ...(ngDevMode ? {\n      debugName: \"ariaLabel\"\n    } : {}),\n    alias: 'aria-label'\n  });\n  ariaLabelledby = input(null, {\n    ...(ngDevMode ? {\n      debugName: \"ariaLabelledby\"\n    } : {}),\n    alias: 'aria-labelledby'\n  });\n  disabled = computed(() => !!this._input()?.disabled(), ...(ngDevMode ? [{\n    debugName: \"disabled\"\n  }] : []));\n  constructor() {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      validateAdapter(this._dateAdapter, this._dateFormats);\n      effect(() => {\n        const options = this.options();\n        const interval = this.interval();\n        if (options !== null && interval !== null) {\n          throw new Error('Cannot specify both the `options` and `interval` inputs at the same time');\n        } else if (options?.length === 0) {\n          throw new Error('Value of `options` input cannot be an empty array');\n        }\n      });\n    }\n    const element = inject(ElementRef);\n    element.nativeElement.setAttribute('mat-timepicker-panel-id', this.panelId);\n    this._handleLocaleChanges();\n    this._handleInputStateChanges();\n    this._keyManager.change.subscribe(() => this._activeDescendant.set(this._keyManager.activeItem?.id || null));\n  }\n  open() {\n    const input = this._input();\n    if (!input) {\n      return;\n    }\n    input.focus();\n    if (this._isOpen()) {\n      return;\n    }\n    this._isOpen.set(true);\n    this._generateOptions();\n    const overlayRef = this._getOverlayRef();\n    overlayRef.updateSize({\n      width: input.getOverlayOrigin().nativeElement.offsetWidth\n    });\n    this._portal ??= new TemplatePortal(this._panelTemplate(), this._viewContainerRef);\n    if (!overlayRef.hasAttached()) {\n      overlayRef.attach(this._portal);\n    }\n    this._onOpenRender?.destroy();\n    this._onOpenRender = afterNextRender(() => {\n      const options = this._options();\n      this._syncSelectedState(input.value(), options, options[0]);\n      this._onOpenRender = null;\n    }, {\n      injector: this._injector\n    });\n    this.opened.emit();\n  }\n  close() {\n    if (this._isOpen()) {\n      this._isOpen.set(false);\n      this.closed.emit();\n      if (this._animationsDisabled) {\n        this._overlayRef?.detach();\n      }\n    }\n  }\n  registerInput(input) {\n    const currentInput = this._input();\n    if (currentInput && input !== currentInput && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw new Error('MatTimepicker can only be registered with one input at a time');\n    }\n    this._input.set(input);\n  }\n  ngOnDestroy() {\n    this._keyManager.destroy();\n    this._localeChanges.unsubscribe();\n    this._onOpenRender?.destroy();\n    this._overlayRef?.dispose();\n  }\n  _getOverlayHost() {\n    return this._overlayRef?.hostElement;\n  }\n  _selectValue(option) {\n    this.close();\n    this._keyManager.setActiveItem(option);\n    this._options().forEach(current => {\n      if (current !== option) {\n        current.deselect(false);\n      }\n    });\n    this._input()?.timepickerValueAssigned(option.value);\n    this.selected.emit({\n      value: option.value,\n      source: this\n    });\n    this._input()?.focus();\n  }\n  _getAriaLabelledby() {\n    if (this.ariaLabel()) {\n      return null;\n    }\n    return this.ariaLabelledby() || this._input()?.getLabelId() || null;\n  }\n  _handleAnimationEnd(event) {\n    if (event.animationName === '_mat-timepicker-exit') {\n      this._overlayRef?.detach();\n    }\n  }\n  _getOverlayRef() {\n    if (this._overlayRef) {\n      return this._overlayRef;\n    }\n    const positionStrategy = createFlexibleConnectedPositionStrategy(this._injector, this._input().getOverlayOrigin()).withFlexibleDimensions(false).withPush(false).withTransformOriginOn('.mat-timepicker-panel').withPopoverLocation('inline').withPositions([{\n      originX: 'start',\n      originY: 'bottom',\n      overlayX: 'start',\n      overlayY: 'top'\n    }, {\n      originX: 'start',\n      originY: 'top',\n      overlayX: 'start',\n      overlayY: 'bottom',\n      panelClass: 'mat-timepicker-above'\n    }]);\n    this._overlayRef = createOverlayRef(this._injector, {\n      positionStrategy,\n      scrollStrategy: this._scrollStrategyFactory(),\n      direction: this._dir || 'ltr',\n      hasBackdrop: false,\n      disableAnimations: this._animationsDisabled\n    });\n    this._overlayRef.detachments().subscribe(() => this.close());\n    this._overlayRef.keydownEvents().subscribe(event => this._handleKeydown(event));\n    this._overlayRef.outsidePointerEvents().subscribe(event => {\n      const target = _getEventTarget(event);\n      const origin = this._input()?.getOverlayOrigin().nativeElement;\n      if (target && origin && target !== origin && !origin.contains(target)) {\n        this.close();\n      }\n    });\n    return this._overlayRef;\n  }\n  _generateOptions() {\n    const interval = this.interval() ?? 30 * 60;\n    const options = this.options();\n    if (options !== null) {\n      this._timeOptions = options;\n    } else {\n      const input = this._input();\n      const adapter = this._dateAdapter;\n      const timeFormat = this._dateFormats.display.timeInput;\n      const min = input?.min() || adapter.setTime(adapter.today(), 0, 0, 0);\n      const max = input?.max() || adapter.setTime(adapter.today(), 23, 59, 0);\n      const cacheKey = interval + '/' + adapter.format(min, timeFormat) + '/' + adapter.format(max, timeFormat);\n      if (cacheKey !== this._optionsCacheKey) {\n        this._optionsCacheKey = cacheKey;\n        this._timeOptions = generateOptions(adapter, this._dateFormats, min, max, interval);\n      }\n    }\n  }\n  _syncSelectedState(value, options, fallback) {\n    let hasSelected = false;\n    for (const option of options) {\n      if (value && this._dateAdapter.sameTime(option.value, value)) {\n        option.select(false);\n        scrollOptionIntoView(option, 'center');\n        untracked(() => this._keyManager.setActiveItem(option));\n        hasSelected = true;\n      } else {\n        option.deselect(false);\n      }\n    }\n    if (!hasSelected) {\n      if (fallback) {\n        untracked(() => this._keyManager.setActiveItem(fallback));\n        scrollOptionIntoView(fallback, 'center');\n      } else {\n        untracked(() => this._keyManager.setActiveItem(-1));\n      }\n    }\n  }\n  _handleKeydown(event) {\n    const keyCode = event.keyCode;\n    if (keyCode === TAB) {\n      this.close();\n    } else if (keyCode === ESCAPE && !hasModifierKey(event)) {\n      event.preventDefault();\n      this.close();\n    } else if (keyCode === ENTER) {\n      event.preventDefault();\n      if (this._keyManager.activeItem) {\n        this._selectValue(this._keyManager.activeItem);\n      } else {\n        this.close();\n      }\n    } else {\n      const previousActive = this._keyManager.activeItem;\n      this._keyManager.onKeydown(event);\n      const currentActive = this._keyManager.activeItem;\n      if (currentActive && currentActive !== previousActive) {\n        scrollOptionIntoView(currentActive, 'nearest');\n      }\n    }\n  }\n  _handleLocaleChanges() {\n    this._localeChanges = this._dateAdapter.localeChanges.subscribe(() => {\n      this._optionsCacheKey = null;\n      if (this.isOpen()) {\n        this._generateOptions();\n      }\n    });\n  }\n  _handleInputStateChanges() {\n    effect(() => {\n      const input = this._input();\n      const options = this._options();\n      if (this._isOpen() && input) {\n        this._syncSelectedState(input.value(), options, null);\n      }\n    });\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTimepicker,\n    deps: [],\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"17.0.0\",\n    version: \"21.0.3\",\n    type: MatTimepicker,\n    isStandalone: true,\n    selector: \"mat-timepicker\",\n    inputs: {\n      interval: {\n        classPropertyName: \"interval\",\n        publicName: \"interval\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      options: {\n        classPropertyName: \"options\",\n        publicName: \"options\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      disableRipple: {\n        classPropertyName: \"disableRipple\",\n        publicName: \"disableRipple\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      ariaLabel: {\n        classPropertyName: \"ariaLabel\",\n        publicName: \"aria-label\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      ariaLabelledby: {\n        classPropertyName: \"ariaLabelledby\",\n        publicName: \"aria-labelledby\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      }\n    },\n    outputs: {\n      selected: \"selected\",\n      opened: \"opened\",\n      closed: \"closed\"\n    },\n    providers: [{\n      provide: MAT_OPTION_PARENT_COMPONENT,\n      useExisting: MatTimepicker\n    }],\n    viewQueries: [{\n      propertyName: \"_panelTemplate\",\n      first: true,\n      predicate: [\"panelTemplate\"],\n      descendants: true,\n      isSignal: true\n    }, {\n      propertyName: \"_options\",\n      predicate: MatOption,\n      descendants: true,\n      isSignal: true\n    }],\n    exportAs: [\"matTimepicker\"],\n    ngImport: i0,\n    template: \"<ng-template #panelTemplate>\\n  <div\\n    role=\\\"listbox\\\"\\n    class=\\\"mat-timepicker-panel\\\"\\n    [class.mat-timepicker-panel-animations-enabled]=\\\"!_animationsDisabled\\\"\\n    [class.mat-timepicker-panel-exit]=\\\"!isOpen()\\\"\\n    [attr.aria-label]=\\\"ariaLabel() || null\\\"\\n    [attr.aria-labelledby]=\\\"_getAriaLabelledby()\\\"\\n    [id]=\\\"panelId\\\"\\n    (animationend)=\\\"_handleAnimationEnd($event)\\\">\\n    @for (option of _timeOptions; track option.value) {\\n      <mat-option\\n        [value]=\\\"option.value\\\"\\n        (onSelectionChange)=\\\"_selectValue($event.source)\\\">{{option.label}}</mat-option>\\n    }\\n  </div>\\n</ng-template>\\n\",\n    styles: [\"@keyframes _mat-timepicker-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-timepicker-exit{from{opacity:1}to{opacity:0}}mat-timepicker{display:none}.mat-timepicker-panel{width:100%;max-height:256px;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:relative;border-bottom-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-timepicker-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-timepicker-container-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){.mat-timepicker-panel{outline:solid 1px}}.mat-timepicker-above .mat-timepicker-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small))}.mat-timepicker-panel-animations-enabled{animation:_mat-timepicker-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-timepicker-panel-animations-enabled.mat-timepicker-panel-exit{animation:_mat-timepicker-exit 100ms linear}.mat-timepicker-input[readonly]{cursor:pointer}@media(forced-colors: active){.mat-timepicker-toggle-default-icon{color:CanvasText}}\\n\"],\n    dependencies: [{\n      kind: \"component\",\n      type: MatOption,\n      selector: \"mat-option\",\n      inputs: [\"value\", \"id\", \"disabled\"],\n      outputs: [\"onSelectionChange\"],\n      exportAs: [\"matOption\"]\n    }],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTimepicker,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-timepicker',\n      exportAs: 'matTimepicker',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None,\n      imports: [MatOption],\n      providers: [{\n        provide: MAT_OPTION_PARENT_COMPONENT,\n        useExisting: MatTimepicker\n      }],\n      template: \"<ng-template #panelTemplate>\\n  <div\\n    role=\\\"listbox\\\"\\n    class=\\\"mat-timepicker-panel\\\"\\n    [class.mat-timepicker-panel-animations-enabled]=\\\"!_animationsDisabled\\\"\\n    [class.mat-timepicker-panel-exit]=\\\"!isOpen()\\\"\\n    [attr.aria-label]=\\\"ariaLabel() || null\\\"\\n    [attr.aria-labelledby]=\\\"_getAriaLabelledby()\\\"\\n    [id]=\\\"panelId\\\"\\n    (animationend)=\\\"_handleAnimationEnd($event)\\\">\\n    @for (option of _timeOptions; track option.value) {\\n      <mat-option\\n        [value]=\\\"option.value\\\"\\n        (onSelectionChange)=\\\"_selectValue($event.source)\\\">{{option.label}}</mat-option>\\n    }\\n  </div>\\n</ng-template>\\n\",\n      styles: [\"@keyframes _mat-timepicker-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-timepicker-exit{from{opacity:1}to{opacity:0}}mat-timepicker{display:none}.mat-timepicker-panel{width:100%;max-height:256px;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:relative;border-bottom-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-timepicker-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-timepicker-container-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){.mat-timepicker-panel{outline:solid 1px}}.mat-timepicker-above .mat-timepicker-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small))}.mat-timepicker-panel-animations-enabled{animation:_mat-timepicker-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-timepicker-panel-animations-enabled.mat-timepicker-panel-exit{animation:_mat-timepicker-exit 100ms linear}.mat-timepicker-input[readonly]{cursor:pointer}@media(forced-colors: active){.mat-timepicker-toggle-default-icon{color:CanvasText}}\\n\"]\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    _panelTemplate: [{\n      type: i0.ViewChild,\n      args: ['panelTemplate', {\n        isSignal: true\n      }]\n    }],\n    _options: [{\n      type: i0.ViewChildren,\n      args: [i0.forwardRef(() => MatOption), {\n        isSignal: true\n      }]\n    }],\n    interval: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"interval\",\n        required: false\n      }]\n    }],\n    options: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"options\",\n        required: false\n      }]\n    }],\n    selected: [{\n      type: i0.Output,\n      args: [\"selected\"]\n    }],\n    opened: [{\n      type: i0.Output,\n      args: [\"opened\"]\n    }],\n    closed: [{\n      type: i0.Output,\n      args: [\"closed\"]\n    }],\n    disableRipple: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"disableRipple\",\n        required: false\n      }]\n    }],\n    ariaLabel: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"aria-label\",\n        required: false\n      }]\n    }],\n    ariaLabelledby: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"aria-labelledby\",\n        required: false\n      }]\n    }]\n  }\n});\nfunction scrollOptionIntoView(option, position) {\n  option._getHostElement().scrollIntoView({\n    block: position,\n    inline: position\n  });\n}\n\nclass MatTimepickerInput {\n  _elementRef = inject(ElementRef);\n  _dateAdapter = inject(DateAdapter, {\n    optional: true\n  });\n  _dateFormats = inject(MAT_DATE_FORMATS, {\n    optional: true\n  });\n  _formField = inject(MAT_FORM_FIELD, {\n    optional: true\n  });\n  _onChange;\n  _onTouched;\n  _validatorOnChange;\n  _cleanupClick;\n  _accessorDisabled = signal(false, ...(ngDevMode ? [{\n    debugName: \"_accessorDisabled\"\n  }] : []));\n  _localeSubscription;\n  _timepickerSubscription;\n  _validator;\n  _lastValueValid = true;\n  _minValid = true;\n  _maxValid = true;\n  _lastValidDate = null;\n  _ariaActiveDescendant = computed(() => {\n    const timepicker = this.timepicker();\n    const isOpen = timepicker.isOpen();\n    const activeDescendant = timepicker.activeDescendant();\n    return isOpen && activeDescendant ? activeDescendant : null;\n  }, ...(ngDevMode ? [{\n    debugName: \"_ariaActiveDescendant\"\n  }] : []));\n  _ariaExpanded = computed(() => this.timepicker().isOpen() + '', ...(ngDevMode ? [{\n    debugName: \"_ariaExpanded\"\n  }] : []));\n  _ariaControls = computed(() => {\n    const timepicker = this.timepicker();\n    return timepicker.isOpen() ? timepicker.panelId : null;\n  }, ...(ngDevMode ? [{\n    debugName: \"_ariaControls\"\n  }] : []));\n  value = model(null, ...(ngDevMode ? [{\n    debugName: \"value\"\n  }] : []));\n  timepicker = input.required({\n    ...(ngDevMode ? {\n      debugName: \"timepicker\"\n    } : {}),\n    alias: 'matTimepicker'\n  });\n  min = input(null, {\n    ...(ngDevMode ? {\n      debugName: \"min\"\n    } : {}),\n    alias: 'matTimepickerMin',\n    transform: value => this._transformDateInput(value)\n  });\n  max = input(null, {\n    ...(ngDevMode ? {\n      debugName: \"max\"\n    } : {}),\n    alias: 'matTimepickerMax',\n    transform: value => this._transformDateInput(value)\n  });\n  openOnClick = input(true, {\n    ...(ngDevMode ? {\n      debugName: \"openOnClick\"\n    } : {}),\n    alias: 'matTimepickerOpenOnClick',\n    transform: booleanAttribute\n  });\n  disabled = computed(() => this.disabledInput() || this._accessorDisabled(), ...(ngDevMode ? [{\n    debugName: \"disabled\"\n  }] : []));\n  disabledInput = input(false, {\n    ...(ngDevMode ? {\n      debugName: \"disabledInput\"\n    } : {}),\n    transform: booleanAttribute,\n    alias: 'disabled'\n  });\n  constructor() {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      validateAdapter(this._dateAdapter, this._dateFormats);\n    }\n    const renderer = inject(Renderer2);\n    this._validator = this._getValidator();\n    this._updateFormsState();\n    this._registerTimepicker();\n    this._localeSubscription = this._dateAdapter.localeChanges.subscribe(() => {\n      if (!this._hasFocus()) {\n        this._formatValue(this.value());\n      }\n    });\n    this._cleanupClick = renderer.listen(this.getOverlayOrigin().nativeElement, 'click', this._handleClick);\n  }\n  writeValue(value) {\n    const deserialized = this._dateAdapter.deserialize(value);\n    this.value.set(this._dateAdapter.getValidDateOrNull(deserialized));\n  }\n  registerOnChange(fn) {\n    this._onChange = fn;\n  }\n  registerOnTouched(fn) {\n    this._onTouched = fn;\n  }\n  setDisabledState(isDisabled) {\n    this._accessorDisabled.set(isDisabled);\n  }\n  validate(control) {\n    return this._validator(control);\n  }\n  registerOnValidatorChange(fn) {\n    this._validatorOnChange = fn;\n  }\n  getOverlayOrigin() {\n    return this._formField?.getConnectedOverlayOrigin() || this._elementRef;\n  }\n  focus() {\n    this._elementRef.nativeElement.focus();\n  }\n  ngOnDestroy() {\n    this._cleanupClick();\n    this._timepickerSubscription?.unsubscribe();\n    this._localeSubscription.unsubscribe();\n  }\n  getLabelId() {\n    return this._formField?.getLabelId() || null;\n  }\n  _handleClick = event => {\n    if (this.disabled() || !this.openOnClick()) {\n      return;\n    }\n    const target = _getEventTarget(event);\n    const overlayHost = this.timepicker()._getOverlayHost();\n    if (!target || !overlayHost || !overlayHost.contains(target)) {\n      this.timepicker().open();\n    }\n  };\n  _handleInput(event) {\n    const value = event.target.value;\n    const currentValue = this.value();\n    const date = this._dateAdapter.parseTime(value, this._dateFormats.parse.timeInput);\n    const hasChanged = !this._dateAdapter.sameTime(date, currentValue);\n    if (!date || hasChanged || !!(value && !currentValue)) {\n      this._assignUserSelection(date, true);\n    } else {\n      this._validatorOnChange?.();\n    }\n  }\n  _handleBlur() {\n    const value = this.value();\n    if (value && this._isValid(value)) {\n      this._formatValue(value);\n    }\n    if (!this.timepicker().isOpen()) {\n      this._onTouched?.();\n    }\n  }\n  _handleKeydown(event) {\n    if (this.timepicker().isOpen() || this.disabled()) {\n      return;\n    }\n    if (event.keyCode === ESCAPE && !hasModifierKey(event) && this.value() !== null) {\n      event.preventDefault();\n      this.value.set(null);\n      this._formatValue(null);\n    } else if (event.keyCode === DOWN_ARROW || event.keyCode === UP_ARROW) {\n      event.preventDefault();\n      this.timepicker().open();\n    }\n  }\n  timepickerValueAssigned(value) {\n    if (!this._dateAdapter.sameTime(value, this.value())) {\n      this._assignUserSelection(value, true);\n      this._formatValue(value);\n    }\n  }\n  _updateFormsState() {\n    effect(() => {\n      const {\n        _dateAdapter: adapter,\n        _lastValueValid: prevValueValid,\n        _minValid: prevMinValid,\n        _maxValid: prevMaxValid\n      } = this;\n      const value = adapter.deserialize(this.value());\n      const min = this.min();\n      const max = this.max();\n      const valueValid = this._lastValueValid = this._isValid(value);\n      this._minValid = !min || !value || !valueValid || adapter.compareTime(min, value) <= 0;\n      this._maxValid = !max || !value || !valueValid || adapter.compareTime(max, value) >= 0;\n      const stateChanged = prevValueValid !== valueValid || prevMinValid !== this._minValid || prevMaxValid !== this._maxValid;\n      if (!this._hasFocus()) {\n        this._formatValue(value);\n      }\n      if (value && valueValid) {\n        this._lastValidDate = value;\n      }\n      if (stateChanged) {\n        this._validatorOnChange?.();\n      }\n    });\n  }\n  _registerTimepicker() {\n    effect(() => {\n      const timepicker = this.timepicker();\n      timepicker.registerInput(this);\n      timepicker.closed.subscribe(() => this._onTouched?.());\n    });\n  }\n  _assignUserSelection(selection, propagateToAccessor) {\n    let toAssign;\n    if (selection == null || !this._isValid(selection)) {\n      toAssign = selection;\n    } else {\n      const adapter = this._dateAdapter;\n      const target = adapter.getValidDateOrNull(this._lastValidDate || this.value());\n      const hours = adapter.getHours(selection);\n      const minutes = adapter.getMinutes(selection);\n      const seconds = adapter.getSeconds(selection);\n      toAssign = target ? adapter.setTime(target, hours, minutes, seconds) : selection;\n    }\n    if (propagateToAccessor) {\n      this._onChange?.(toAssign);\n    }\n    this.value.set(toAssign);\n  }\n  _formatValue(value) {\n    value = this._dateAdapter.getValidDateOrNull(value);\n    this._elementRef.nativeElement.value = value == null ? '' : this._dateAdapter.format(value, this._dateFormats.display.timeInput);\n  }\n  _isValid(value) {\n    return !value || this._dateAdapter.isValid(value);\n  }\n  _transformDateInput(value) {\n    const date = typeof value === 'string' ? this._dateAdapter.parseTime(value, this._dateFormats.parse.timeInput) : this._dateAdapter.deserialize(value);\n    return date && this._dateAdapter.isValid(date) ? date : null;\n  }\n  _hasFocus() {\n    return _getFocusedElementPierceShadowDom() === this._elementRef.nativeElement;\n  }\n  _getValidator() {\n    return Validators.compose([() => this._lastValueValid ? null : {\n      'matTimepickerParse': {\n        'text': this._elementRef.nativeElement.value\n      }\n    }, control => this._minValid ? null : {\n      'matTimepickerMin': {\n        'min': this.min(),\n        'actual': this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value))\n      }\n    }, control => this._maxValid ? null : {\n      'matTimepickerMax': {\n        'max': this.max(),\n        'actual': this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value))\n      }\n    }]);\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTimepickerInput,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"17.1.0\",\n    version: \"21.0.3\",\n    type: MatTimepickerInput,\n    isStandalone: true,\n    selector: \"input[matTimepicker]\",\n    inputs: {\n      value: {\n        classPropertyName: \"value\",\n        publicName: \"value\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      timepicker: {\n        classPropertyName: \"timepicker\",\n        publicName: \"matTimepicker\",\n        isSignal: true,\n        isRequired: true,\n        transformFunction: null\n      },\n      min: {\n        classPropertyName: \"min\",\n        publicName: \"matTimepickerMin\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      max: {\n        classPropertyName: \"max\",\n        publicName: \"matTimepickerMax\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      openOnClick: {\n        classPropertyName: \"openOnClick\",\n        publicName: \"matTimepickerOpenOnClick\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      disabledInput: {\n        classPropertyName: \"disabledInput\",\n        publicName: \"disabled\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      }\n    },\n    outputs: {\n      value: \"valueChange\"\n    },\n    host: {\n      attributes: {\n        \"role\": \"combobox\",\n        \"type\": \"text\",\n        \"aria-haspopup\": \"listbox\"\n      },\n      listeners: {\n        \"blur\": \"_handleBlur()\",\n        \"input\": \"_handleInput($event)\",\n        \"keydown\": \"_handleKeydown($event)\"\n      },\n      properties: {\n        \"attr.aria-activedescendant\": \"_ariaActiveDescendant()\",\n        \"attr.aria-expanded\": \"_ariaExpanded()\",\n        \"attr.aria-controls\": \"_ariaControls()\",\n        \"attr.mat-timepicker-id\": \"timepicker()?.panelId\",\n        \"disabled\": \"disabled()\"\n      },\n      classAttribute: \"mat-timepicker-input\"\n    },\n    providers: [{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: MatTimepickerInput,\n      multi: true\n    }, {\n      provide: NG_VALIDATORS,\n      useExisting: MatTimepickerInput,\n      multi: true\n    }, {\n      provide: MAT_INPUT_VALUE_ACCESSOR,\n      useExisting: MatTimepickerInput\n    }],\n    exportAs: [\"matTimepickerInput\"],\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTimepickerInput,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'input[matTimepicker]',\n      exportAs: 'matTimepickerInput',\n      host: {\n        'class': 'mat-timepicker-input',\n        'role': 'combobox',\n        'type': 'text',\n        'aria-haspopup': 'listbox',\n        '[attr.aria-activedescendant]': '_ariaActiveDescendant()',\n        '[attr.aria-expanded]': '_ariaExpanded()',\n        '[attr.aria-controls]': '_ariaControls()',\n        '[attr.mat-timepicker-id]': 'timepicker()?.panelId',\n        '[disabled]': 'disabled()',\n        '(blur)': '_handleBlur()',\n        '(input)': '_handleInput($event)',\n        '(keydown)': '_handleKeydown($event)'\n      },\n      providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: MatTimepickerInput,\n        multi: true\n      }, {\n        provide: NG_VALIDATORS,\n        useExisting: MatTimepickerInput,\n        multi: true\n      }, {\n        provide: MAT_INPUT_VALUE_ACCESSOR,\n        useExisting: MatTimepickerInput\n      }]\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    value: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"value\",\n        required: false\n      }]\n    }, {\n      type: i0.Output,\n      args: [\"valueChange\"]\n    }],\n    timepicker: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"matTimepicker\",\n        required: true\n      }]\n    }],\n    min: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"matTimepickerMin\",\n        required: false\n      }]\n    }],\n    max: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"matTimepickerMax\",\n        required: false\n      }]\n    }],\n    openOnClick: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"matTimepickerOpenOnClick\",\n        required: false\n      }]\n    }],\n    disabledInput: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"disabled\",\n        required: false\n      }]\n    }]\n  }\n});\n\nclass MatTimepickerToggle {\n  _defaultConfig = inject(MAT_TIMEPICKER_CONFIG, {\n    optional: true\n  });\n  _defaultTabIndex = (() => {\n    const value = inject(new HostAttributeToken('tabindex'), {\n      optional: true\n    });\n    const parsed = Number(value);\n    return isNaN(parsed) ? null : parsed;\n  })();\n  _isDisabled = computed(() => {\n    const timepicker = this.timepicker();\n    return this.disabled() || timepicker.disabled();\n  }, ...(ngDevMode ? [{\n    debugName: \"_isDisabled\"\n  }] : []));\n  timepicker = input.required({\n    ...(ngDevMode ? {\n      debugName: \"timepicker\"\n    } : {}),\n    alias: 'for'\n  });\n  ariaLabel = input(undefined, {\n    ...(ngDevMode ? {\n      debugName: \"ariaLabel\"\n    } : {}),\n    alias: 'aria-label'\n  });\n  ariaLabelledby = input(undefined, {\n    ...(ngDevMode ? {\n      debugName: \"ariaLabelledby\"\n    } : {}),\n    alias: 'aria-labelledby'\n  });\n  _defaultAriaLabel = 'Open timepicker options';\n  disabled = input(false, {\n    ...(ngDevMode ? {\n      debugName: \"disabled\"\n    } : {}),\n    transform: booleanAttribute,\n    alias: 'disabled'\n  });\n  tabIndex = input(this._defaultTabIndex, ...(ngDevMode ? [{\n    debugName: \"tabIndex\"\n  }] : []));\n  disableRipple = input(this._defaultConfig?.disableRipple ?? false, {\n    ...(ngDevMode ? {\n      debugName: \"disableRipple\"\n    } : {}),\n    transform: booleanAttribute\n  });\n  _open(event) {\n    if (this.timepicker() && !this._isDisabled()) {\n      this.timepicker().open();\n      event.stopPropagation();\n    }\n  }\n  getAriaLabel() {\n    return this.ariaLabelledby() ? null : this.ariaLabel() || this._defaultAriaLabel;\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTimepickerToggle,\n    deps: [],\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"17.1.0\",\n    version: \"21.0.3\",\n    type: MatTimepickerToggle,\n    isStandalone: true,\n    selector: \"mat-timepicker-toggle\",\n    inputs: {\n      timepicker: {\n        classPropertyName: \"timepicker\",\n        publicName: \"for\",\n        isSignal: true,\n        isRequired: true,\n        transformFunction: null\n      },\n      ariaLabel: {\n        classPropertyName: \"ariaLabel\",\n        publicName: \"aria-label\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      ariaLabelledby: {\n        classPropertyName: \"ariaLabelledby\",\n        publicName: \"aria-labelledby\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      disabled: {\n        classPropertyName: \"disabled\",\n        publicName: \"disabled\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      tabIndex: {\n        classPropertyName: \"tabIndex\",\n        publicName: \"tabIndex\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      },\n      disableRipple: {\n        classPropertyName: \"disableRipple\",\n        publicName: \"disableRipple\",\n        isSignal: true,\n        isRequired: false,\n        transformFunction: null\n      }\n    },\n    host: {\n      listeners: {\n        \"click\": \"_open($event)\"\n      },\n      properties: {\n        \"attr.tabindex\": \"null\"\n      },\n      classAttribute: \"mat-timepicker-toggle\"\n    },\n    exportAs: [\"matTimepickerToggle\"],\n    ngImport: i0,\n    template: \"<button\\n  matIconButton\\n  type=\\\"button\\\"\\n  aria-haspopup=\\\"listbox\\\"\\n  [attr.aria-label]=\\\"getAriaLabel()\\\"\\n  [attr.aria-labelledby]=\\\"ariaLabelledby()\\\"\\n  [attr.aria-expanded]=\\\"timepicker().isOpen()\\\"\\n  [tabIndex]=\\\"_isDisabled() ? -1 : tabIndex()\\\"\\n  [disabled]=\\\"_isDisabled()\\\"\\n  [disableRipple]=\\\"disableRipple()\\\">\\n\\n  <ng-content select=\\\"[matTimepickerToggleIcon]\\\">\\n    <svg\\n      class=\\\"mat-timepicker-toggle-default-icon\\\"\\n      height=\\\"24px\\\"\\n      width=\\\"24px\\\"\\n      viewBox=\\\"0 -960 960 960\\\"\\n      fill=\\\"currentColor\\\"\\n      focusable=\\\"false\\\"\\n      aria-hidden=\\\"true\\\">\\n      <path d=\\\"m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Z\\\"/>\\n    </svg>\\n  </ng-content>\\n</button>\\n\",\n    dependencies: [{\n      kind: \"component\",\n      type: MatIconButton,\n      selector: \"button[mat-icon-button], a[mat-icon-button], button[matIconButton], a[matIconButton]\",\n      exportAs: [\"matButton\", \"matAnchor\"]\n    }],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTimepickerToggle,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-timepicker-toggle',\n      host: {\n        'class': 'mat-timepicker-toggle',\n        '[attr.tabindex]': 'null',\n        '(click)': '_open($event)'\n      },\n      exportAs: 'matTimepickerToggle',\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      imports: [MatIconButton],\n      template: \"<button\\n  matIconButton\\n  type=\\\"button\\\"\\n  aria-haspopup=\\\"listbox\\\"\\n  [attr.aria-label]=\\\"getAriaLabel()\\\"\\n  [attr.aria-labelledby]=\\\"ariaLabelledby()\\\"\\n  [attr.aria-expanded]=\\\"timepicker().isOpen()\\\"\\n  [tabIndex]=\\\"_isDisabled() ? -1 : tabIndex()\\\"\\n  [disabled]=\\\"_isDisabled()\\\"\\n  [disableRipple]=\\\"disableRipple()\\\">\\n\\n  <ng-content select=\\\"[matTimepickerToggleIcon]\\\">\\n    <svg\\n      class=\\\"mat-timepicker-toggle-default-icon\\\"\\n      height=\\\"24px\\\"\\n      width=\\\"24px\\\"\\n      viewBox=\\\"0 -960 960 960\\\"\\n      fill=\\\"currentColor\\\"\\n      focusable=\\\"false\\\"\\n      aria-hidden=\\\"true\\\">\\n      <path d=\\\"m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Z\\\"/>\\n    </svg>\\n  </ng-content>\\n</button>\\n\"\n    }]\n  }],\n  propDecorators: {\n    timepicker: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"for\",\n        required: true\n      }]\n    }],\n    ariaLabel: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"aria-label\",\n        required: false\n      }]\n    }],\n    ariaLabelledby: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"aria-labelledby\",\n        required: false\n      }]\n    }],\n    disabled: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"disabled\",\n        required: false\n      }]\n    }],\n    tabIndex: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"tabIndex\",\n        required: false\n      }]\n    }],\n    disableRipple: [{\n      type: i0.Input,\n      args: [{\n        isSignal: true,\n        alias: \"disableRipple\",\n        required: false\n      }]\n    }]\n  }\n});\n\nclass MatTimepickerModule {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTimepickerModule,\n    deps: [],\n    target: i0.FactoryTarget.NgModule\n  });\n  static mod = i0.ngDeclareNgModule({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTimepickerModule,\n    imports: [MatTimepicker, MatTimepickerInput, MatTimepickerToggle],\n    exports: [CdkScrollableModule, MatTimepicker, MatTimepickerInput, MatTimepickerToggle]\n  });\n  static inj = i0.ngDeclareInjector({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTimepickerModule,\n    imports: [MatTimepicker, MatTimepickerToggle, CdkScrollableModule]\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTimepickerModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: [MatTimepicker, MatTimepickerInput, MatTimepickerToggle],\n      exports: [CdkScrollableModule, MatTimepicker, MatTimepickerInput, MatTimepickerToggle]\n    }]\n  }]\n});\n\nexport { MAT_TIMEPICKER_CONFIG, MAT_TIMEPICKER_SCROLL_STRATEGY, MatTimepicker, MatTimepickerInput, MatTimepickerModule, MatTimepickerToggle };\n","import dayjs, { Dayjs } from 'dayjs';\r\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\r\nimport utc from 'dayjs/plugin/utc';\r\n\r\n/**\r\n * Initializes and configures dayjs with UTC and localization\r\n * Should be called once at application startup\r\n * \r\n * @param locale - The locale string (e.g., 'en', 'de', 'fr') to configure dayjs\r\n */\r\nexport function initializeDayjsFn(locale: string): void {\r\n  dayjs.extend(utc);\r\n  dayjs.extend(customParseFormat);\r\n  dayjs.locale(locale);\r\n}\r\n\r\n/**\r\n * Creates a Dayjs object from a UI value string\r\n * \r\n * @param uiValue - ISO string representation of date/time\r\n * @returns A Dayjs object in UTC timezone\r\n */\r\nexport function getDateTimeValueFn(uiValue: string): Dayjs {\r\n  return dayjs.utc(uiValue);\r\n}\r\n\r\n/**\r\n * Generates options for the time picker dropdown\r\n * Includes predefined times plus the user's current selection if not already in the list\r\n * \r\n * @param dateTimeValue - The current date/time value\r\n * @returns Array of time options with labels and values, sorted chronologically\r\n */\r\nexport function generateTimePickerOptionsFn(dateTimeValue: Dayjs | null): { label: string; value: Dayjs }[] {\r\n  const template = dayjs().utc().hour(0).minute(0).second(0);\r\n\r\n  // Create predefined time options (common times throughout the day)\r\n  const predefinedOptions = [\r\n    { label: '00:00 AM', value: template.hour(0) },\r\n    { label: '06:00 AM', value: template.hour(6) },\r\n    { label: '08:00 AM', value: template.hour(8) },\r\n    { label: '10:00 AM', value: template.hour(10) },\r\n    { label: '12:00 PM', value: template.hour(12) },\r\n    { label: '06:00 PM', value: template.hour(18) },\r\n  ];\r\n\r\n  // If dateTimeValue is null or invalid, return only predefined options\r\n  if (!dateTimeValue || !dateTimeValue.isValid()) {\r\n    return predefinedOptions;\r\n  }\r\n\r\n  let userOption = {\r\n    label: dateTimeValue.format('HH:mm A'),\r\n    value: dayjs()\r\n      .utc()\r\n      .hour(dateTimeValue.hour())\r\n      .minute(dateTimeValue.minute())\r\n      .second(0),\r\n  };\r\n\r\n  // If the user's current time is already in predefined options, just return those\r\n  if (predefinedOptions.some(\r\n    (option) =>\r\n      option.value.hour() === userOption.value.hour() &&\r\n      option.value.minute() === userOption.value.minute()\r\n  )) return predefinedOptions;\r\n\r\n  // Otherwise, add user's time to the options and sort chronologically\r\n  const allOptions = [...predefinedOptions, userOption];\r\n  allOptions.sort((a, b) => a.value.valueOf() - b.value.valueOf());\r\n\r\n  return allOptions;\r\n}\r\n\r\n// Additional help function for standard options\r\nexport function generateDefaultTimePickerOptions(): { label: string; value: Dayjs }[] {\r\n  const template = dayjs().utc().hour(0).minute(0).second(0);\r\n\r\n  return [\r\n    { label: '00:00 AM', value: template.hour(0) },\r\n    { label: '06:00 AM', value: template.hour(6) },\r\n    { label: '08:00 AM', value: template.hour(8) },\r\n    { label: '10:00 AM', value: template.hour(10) },\r\n    { label: '12:00 PM', value: template.hour(12) },\r\n    { label: '06:00 PM', value: template.hour(18) },\r\n  ];\r\n}\r\n\r\n/**\r\n * Formats a date and time for display in the UI\r\n * Uses localized date (L) and time (LT) formats\r\n * \r\n * @param date - The date to format\r\n * @returns Formatted date string or empty string if date is null\r\n */\r\nexport function formatDateTimeFn(date: dayjs.Dayjs | Date | null): string {\r\n  if (!date) return '';\r\n  return dayjs(date).format('L LT');\r\n}\r\n\r\n/**\r\n * Get the current locale's date format\r\n * \r\n * @returns The localized date format string (e.g., 'DD.MM.YYYY', 'MM/DD/YYYY')\r\n */\r\nexport function getLocaleDateFormatFn(): string {\r\n  try {\r\n    const localized = dayjs().localeData().longDateFormat('L');\r\n    if (localized && typeof localized === 'string') {\r\n      return localized;\r\n    }\r\n  } catch (e) {\r\n    // keep fallback\r\n  }\r\n  return 'YYYY-MM-DD';\r\n}\r\n\r\n/**\r\n * Handles user input in the date-time field\r\n * Attempts to parse the input with multiple localized formats\r\n * \r\n * @param value - The string value entered by the user\r\n * @param currentUiValue - The current UI value\r\n * @param setUiValue - Callback function to update the UI value\r\n * @param useTimePicker - Whether time picker is enabled\r\n * @returns Boolean indicating if the input was valid and processed\r\n */\r\nexport function handleDateTimeInputFn(\r\n  value: string,\r\n  currentUiValue: string,\r\n  setUiValue: (value: string | null) => void,\r\n  useTimePicker: boolean = true\r\n): boolean {\r\n  if (!value) {\r\n    setUiValue(null);\r\n    return true;\r\n  }\r\n\r\n  const dateFormat = getLocaleDateFormatFn();\r\n  let parsedDate: Dayjs | null = null;\r\n\r\n  // Try multiple parsing formats in order of specificity\r\n  const formats = [\r\n    'YYYY-MM-DD',     // ISO date - PRIORITIZED\r\n    'YYYY-MM-DD HH:mm: ss', // ISO datetime with seconds - PRIORITIZED\r\n    'YYYY-MM-DD HH:mm',    // ISO datetime without seconds - PRIORITIZED\r\n    'YYYY/MM/DD',     // Alternative slash format\r\n    'YYYY/MM/DD HH: mm:ss',\r\n    'YYYY/MM/DD HH: mm',\r\n    'L LT',           // Localized date + time (e.g., \"31. 12.2025 14:30\")\r\n    'L LTS',          // Localized date + time with seconds (e.g., \"31.12.2025 14:30:45\")\r\n    'L',              // Localized date only (e.g., \"31.12.2025\")\r\n    dateFormat,       // Raw locale format (e.g., \"DD.MM.YYYY\")\r\n    `${dateFormat} HH:mm:ss`, // Raw locale format + time with seconds\r\n    `${dateFormat} HH:mm`,    // Raw locale format + time without seconds\r\n  ];\r\n\r\n  for (const format of formats) {\r\n    parsedDate = dayjs(value, format, true); // strict parsing\r\n    if (parsedDate.isValid()) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  // If all strict parsing fails, try lenient parsing\r\n  if (!parsedDate || !parsedDate.isValid()) {\r\n    parsedDate = dayjs(value);\r\n  }\r\n\r\n  if (parsedDate && parsedDate.isValid()) {\r\n    updateFormattedValueFn(parsedDate, parsedDate, currentUiValue, setUiValue, useTimePicker);\r\n    return true;\r\n  }\r\n\r\n  return false; // Invalid format\r\n}\r\n\r\n/**\r\n * Updates the time component based on time picker input\r\n * \r\n * @param timeValue - The time string in HH:mm format\r\n * @param currentUiValue - The current UI value\r\n * @param setUiValue - Callback function to update the UI value\r\n */\r\nexport function updateTimeFn(\r\n  timeValue: string,\r\n  currentUiValue: string,\r\n  setUiValue: (value: string | null) => void\r\n): void {\r\n  const time = dayjs(timeValue, 'HH:mm');\r\n\r\n  if (time == null) {\r\n    setUiValue(null);\r\n    return;\r\n  }\r\n\r\n  if (time.isValid()) {\r\n    updateFormattedValueFn(null, time, currentUiValue, setUiValue);\r\n  }\r\n}\r\n\r\n/**\r\n * Material Date Picker Event Handler\r\n * Updates the date component while preserving the existing time\r\n * \r\n * @param date - The selected date from the date picker\r\n * @param currentUiValue - The current UI value\r\n * @param setUiValue - Callback function to update the UI value\r\n */\r\nexport function updateDateFn(\r\n  date: Dayjs | null,\r\n  currentUiValue: string,\r\n  setUiValue: (value: string | null) => void\r\n): void {\r\n  if (date == null) {\r\n    setUiValue(null);\r\n    return;\r\n  }\r\n\r\n  if (date.isValid()) {\r\n    updateFormattedValueFn(date, null, currentUiValue, setUiValue);\r\n  }\r\n}\r\n\r\n/**\r\n * Combines date and time values and updates the UI\r\n * Core function that merges date and time components while preserving \r\n * other components from the current value\r\n * \r\n * @param date - The date component to update (or null to keep current)\r\n * @param time - The time component to update (or null to keep current)\r\n * @param currentUiValue - The current UI value\r\n * @param setUiValue - Callback function to update the UI value\r\n * @param useTimePicker - Whether time picking is enabled (if false, time is set to 00:00:00)\r\n * @returns The updated ISO string or null if no updates were made\r\n */\r\nexport function updateFormattedValueFn(\r\n  date: Dayjs | null,\r\n  time: Dayjs | null,\r\n  currentUiValue: string,\r\n  setUiValue: (value: string | null) => void,\r\n  useTimePicker: boolean = true\r\n): string | null {\r\n  if (!date && !time)\r\n    return null;\r\n\r\n  // Initialize with current date/time from UI or with default values\r\n  let currentDateTime = dayjs(currentUiValue).isValid()\r\n    ? dayjs(currentUiValue).utc()\r\n    : dayjs().utc().hour(0).minute(0).second(0);\r\n\r\n  // Update date components if a date is provided\r\n  if (date) {\r\n    currentDateTime = currentDateTime\r\n      .year(date.year())\r\n      .month(date.month())\r\n      .date(date.date());\r\n  }\r\n\r\n  // Update time components if a time is provided\r\n  if (time) {\r\n    currentDateTime = currentDateTime\r\n      .hour(time.hour())\r\n      .minute(time.minute())\r\n      .second(0); // Explicitly set seconds to 0\r\n  }\r\n\r\n  // Set time to 00:00:00 if time picker is disabled\r\n  const resultDateTime = !useTimePicker\r\n    ? currentDateTime.utc().hour(0).minute(0).second(0).toISOString()\r\n    : currentDateTime.toISOString();\r\n\r\n  setUiValue(resultDateTime);\r\n  return resultDateTime;\r\n}\r\n\r\nexport class DateTimeUtils {\r\n  static initializeDayjs = initializeDayjsFn;\r\n  static updateFormattedValue = updateFormattedValueFn;\r\n  static updateDate = updateDateFn;\r\n  static updateTime = updateTimeFn;\r\n  static handleDateTimeInput = handleDateTimeInputFn;\r\n  static formatDateTime = formatDateTimeFn;\r\n  static generateTimePickerOptions = generateTimePickerOptionsFn;\r\n  static getDateTimeValue = getDateTimeValueFn;\r\n  static getLocaleDateFormat = getLocaleDateFormatFn;\r\n}","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.dev/license\r\n */\r\n\r\nimport {\r\n  Directive,\r\n  input,\r\n  InputSignal,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport {\r\n  NG_VALIDATORS,\r\n  NG_VALUE_ACCESSOR\r\n} from '@angular/forms';\r\nimport { MAT_INPUT_VALUE_ACCESSOR } from '@angular/material/input';\r\nimport { MatTimepicker, MatTimepickerInput } from '@angular/material/timepicker';\r\n\r\n/**\r\n * Custom directive to override the behavior of `MatTimepickerInput`.\r\n * This prevents the timepicker from opening automatically (e.g. on click).\r\n */\r\n@Directive({\r\n  selector: 'input[myMatTimepicker]',\r\n  exportAs: 'myMatTimepickerInput',\r\n  host: {\r\n    // Set accessibility and style attributes\r\n    'class': 'mat-timepicker-input',\r\n    'role': 'combobox',\r\n    'type': 'text',\r\n    'aria-haspopup': 'listbox',\r\n    '[attr.aria-activedescendant]': '_ariaActiveDescendant()',\r\n    '[attr.aria-expanded]': '_ariaExpanded()',\r\n    '[attr.aria-controls]': '_ariaControls()',\r\n    '[attr.mat-timepicker-id]': 'timepicker()?.panelId',\r\n    '[disabled]': 'disabled()',\r\n\r\n    // Event handlers as in the original implementation\r\n    '(blur)': '_handleBlur()',\r\n    '(input)': '_handleInput($event)',\r\n    '(keydown)': '_handleKeydown($event)',\r\n  },\r\n  providers: [\r\n    // Provide form and Material value accessors as in the original\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: MyMatTimepickerInput,\r\n      multi: true,\r\n    },\r\n    {\r\n      provide: NG_VALIDATORS,\r\n      useExisting: MyMatTimepickerInput,\r\n      multi: true,\r\n    },\r\n    {\r\n      provide: MAT_INPUT_VALUE_ACCESSOR,\r\n      useExisting: MyMatTimepickerInput,\r\n    },\r\n  ],\r\n})\r\nexport class MyMatTimepickerInput<D> extends MatTimepickerInput<D> implements OnDestroy {\r\n\r\n  /** The timepicker instance this input is connected to. */\r\n  readonly timepicker: InputSignal<MatTimepicker<D>> = input.required<MatTimepicker<D>>({\r\n    alias: 'myMatTimepicker',\r\n  });\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    // Call the private method _cleanupClick().\r\n    // This removes the default click listener that would otherwise open the picker.\r\n    // The call uses a TypeScript hack (as any) to bypass the private restriction.\r\n    // Background: The original implementation registers a click handler to open the picker automatically.\r\n    // By calling this, you remove the handler and prevent the picker from opening on click.\r\n    // See: https://github.com/angular/components/blob/main/src/material/timepicker/timepicker-input.ts\r\n    // @ts-ignore\r\n    (this as any)['_cleanupClick']();\r\n  }\r\n}","<mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n  <mat-label>{{ basics().label }}</mat-label>\r\n  <!-- Visible Input-Field when both Date & Time Picker (no Picker) -->\r\n  <!-- Also Responsible for formatting the dateTimeValue() -->\r\n  @if (useTimePicker()) {\r\n    <input\r\n      matInput\r\n      [disabled]=\"ui().disabled\"\r\n      [required]=\"basics().required\"\r\n      [value]=\"formatDateTime(dateTimeValue())\"\r\n      (change)=\"handleDateTimeInput($event)\"\r\n      [placeholder]=\"basics().placeholder || placeholder\"\r\n    />\r\n  }\r\n\r\n  <!-- Material DatePicker -->\r\n  <!-- Toggle for Dropdown -->\r\n  <!-- Input visible when TimePicker isn't used -->\r\n  <input\r\n    matInput\r\n    [disabled]=\"ui().disabled\"\r\n    [class.hidden-picker-input]=\"useTimePicker()\"\r\n    [required]=\"basics().required\"\r\n    [matDatepicker]=\"datepicker\"\r\n    [value]=\"dateTimeValue()\"\r\n    [placeholder]=\"basics().placeholder || placeholder\"\r\n    (dateChange)=\"updateDate($event)\"\r\n    (change)=\"handleDateTimeInput($event)\"\r\n  />\r\n  <mat-datepicker #datepicker xPosition=\"end\" />\r\n  <mat-datepicker-toggle [for]=\"datepicker\" matSuffix tippyTranslate=\"Fields.DateTime.OpenCalender\" />\r\n\r\n  <!-- Material TimePicker -->\r\n  <!-- Toggle for Dropdown -->\r\n  <!-- Input not visible at all times -->\r\n  @if (useTimePicker()) {\r\n    <ng-container matSuffix>\r\n      <!-- Hidden input for Angular Material Time Picker -->\r\n      <input\r\n        matInput\r\n        [disabled]=\"ui().disabled\"\r\n        [required]=\"basics().required\"\r\n        [myMatTimepicker]=\"timepicker\"\r\n        class=\"hidden-picker-input\"\r\n        [value]=\"dateTimeValue()\"\r\n        [placeholder]=\"basics().placeholder || placeholder\"\r\n        (input)=\"updateTime($event)\"\r\n      />\r\n      <mat-timepicker #timepicker [options]=\"timePickerOptions()\" />\r\n      <mat-timepicker-toggle [disabled]=\"ui().disabled\" [for]=\"timepicker\" tippyTranslate=\"Fields.DateTime.OpenTime\" />\r\n    </ng-container>\r\n  }\r\n</mat-form-field>\r\n\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { AfterViewInit, ChangeDetectionStrategy, Component, computed, inject, ViewChild } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDatepickerInputEvent, MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatTimepicker, MatTimepickerModule } from '@angular/material/timepicker';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport dayjs, { Dayjs } from 'dayjs';\r\nimport { FieldSettingsDateTime } from 'projects/edit-types/src/FieldSettings-DateTime';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { MatDayjsModule } from '../../../shared/date-adapters/date-adapter-api';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport {\r\n  DateTimeUtils\r\n} from './datetime-fn';\r\nimport { MyMatTimepickerInput } from './mat-time-picker';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  updateDate: false,\r\n  updateTime: false,\r\n  handleDateTimeInput: false,\r\n  disabledEffect: false,\r\n  ngAfterViewInit: false,\r\n  dateTimeValue: false,\r\n  formatDateTime: false,\r\n  InvalidDate: false,\r\n}\r\n\r\n/**\r\n * Component for date and time input field with calendar and time picker\r\n * Uses extracted logic functions for better testability\r\n */\r\n@Component({\r\n  selector: InputTypeCatalog.DateTimeDefault,\r\n  templateUrl: './datetime-default.html',\r\n  styleUrls: ['./datetime-default.scss'],\r\n  imports: [\r\n    MatFormFieldModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatInputModule,\r\n    FieldHelperTextComponent,\r\n    MatDayjsModule,\r\n    TippyDirective,\r\n    MatDatepickerModule,\r\n    MatTimepickerModule,\r\n    MyMatTimepickerInput\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class DatetimeDefaultComponent implements AfterViewInit {\r\n\r\n  log = classLog({ DatetimeDefaultComponent }, logSpecs);\r\n\r\n  @ViewChild(MatTimepicker) timePickerRef: MatTimepicker<Dayjs>;\r\n\r\n  protected fieldState = inject(FieldState) as FieldState<string, FieldSettings & FieldSettingsDateTime>;\r\n  protected group = this.fieldState.group;\r\n  protected ui = this.fieldState.ui;\r\n  uiValue = this.fieldState.uiValue;\r\n  protected basics = this.fieldState.basics;\r\n  protected useTimePicker = this.fieldState.settingExt('UseTimePicker');\r\n\r\n  // Computed value for the current date-time from UI value\r\n  dateTimeValue = computed(() => {\r\n    const l = this.log.fnIf('dateTimeValue', { uiValue: this.uiValue() });\r\n    if (!this.uiValue()) return null;\r\n    return DateTimeUtils.getDateTimeValue(this.uiValue())\r\n  });\r\n\r\n  // Generates time picker options including the current time and common presets\r\n  timePickerOptions = computed(() => {\r\n    return DateTimeUtils.generateTimePickerOptions(this.dateTimeValue());\r\n  });\r\n\r\n  constructor(\r\n    private translate: TranslateService,\r\n  ) {\r\n    const locale = navigator.language.substring(0, 2); // e.g. 'de-De' to 'de'\r\n    DateTimeUtils.initializeDayjs(locale);\r\n    this.translate.currentLang = locale;\r\n  }\r\n\r\n  /**\r\n   * Localized placeholder depending on locale and whether time picker is active.\r\n   * Uses dayjs.localeData().longDateFormat('L') for the date part and 'HH:mm:ss' for time.\r\n   * If dayjs doesn't provide a format, fall back to 'YYYY-MM-DD' (date-only) and 'YYYY-MM-DD HH:mm:ss' (date+time).\r\n   */\r\n  get placeholder(): string {\r\n    const dateFmt = DateTimeUtils.getLocaleDateFormat();\r\n    const timeFmt = 'HH:mm:ss';\r\n    return this.useTimePicker() ? `${dateFmt} ${timeFmt}` : dateFmt;\r\n  }\r\n\r\n  /**\r\n   * Set up time picker event subscription after view initialization\r\n   */\r\n  ngAfterViewInit(): void {\r\n    const l = this.log.fnIf('ngAfterViewInit');\r\n    if (this.timePickerRef) {\r\n      this.timePickerRef.selected.subscribe(timeData => {\r\n        if (timeData)\r\n          this.updateFormattedValue(null, timeData.value);\r\n      });\r\n    }\r\n    l.end();\r\n  }\r\n\r\n  /**\r\n   * Format date for display in UI using localized format\r\n   */\r\n  formatDateTime(date: dayjs.Dayjs | Date | null): string {\r\n    const l = this.log.fnIf('formatDateTime', { date: date });\r\n    return DateTimeUtils.formatDateTime(date);\r\n  }\r\n\r\n  /**\r\n   * Handle manual user input in the date-time field\r\n   * Validates the input and updates the UI value if valid\r\n   */\r\n  handleDateTimeInput(event: Event): void {\r\n    const input = event.target as HTMLInputElement;\r\n    const value = input.value.trim();\r\n\r\n    this.log.aIf('handleDateTimeInput', { value });\r\n\r\n    const isValid = DateTimeUtils.handleDateTimeInput(\r\n      value,\r\n      this.uiValue(),\r\n      (value) => this.ui().setIfChanged(value),\r\n      this.useTimePicker()\r\n    );\r\n\r\n    // Restore previous value if input is invalid\r\n    if (!isValid) {\r\n      input.value = DateTimeUtils.formatDateTime(this.dateTimeValue());\r\n      console.error(`Invalid date format: ${value}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle time picker changes\r\n   */\r\n  updateTime(event: any): void {\r\n    this.log.aIf('updateTime', { event });\r\n    DateTimeUtils.updateTime(\r\n      event.target.value,\r\n      this.uiValue(),\r\n      (value) => this.ui().setIfChanged(value)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Handle date picker changes\r\n   */\r\n  updateDate(event: MatDatepickerInputEvent<Dayjs>) {\r\n    this.log.aIf('updateDate', { event });\r\n\r\n    DateTimeUtils.updateDate(\r\n      event.value,\r\n      this.uiValue(),\r\n      (value) => this.ui().setIfChanged(value)\r\n    );\r\n\r\n    // Log invalid dates for debugging\r\n    if (event.value && !event.value.isValid()) {\r\n      const l = this.log.fnIf('InvalidDate', { date: event.value });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update the formatted value by combining date and time\r\n   * Preserves unmodified components from the current value\r\n   */\r\n  updateFormattedValue(date?: Dayjs, time?: Dayjs) {\r\n    const updated = DateTimeUtils.updateFormattedValue(\r\n      date || null,\r\n      time || null,\r\n      this.uiValue(),\r\n      (value) => { }, //this.ui().setIfChanged(value),\r\n      this.useTimePicker()\r\n    );\r\n    this.ui().setIfChanged(updated);\r\n    return updated;\r\n  }\r\n}","import { Component } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.EmptyDefault,\r\n  template: '',\r\n  styleUrls: [],\r\n})\r\nexport class EmptyDefaultComponent {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","@if (basics().visible) {\r\n  <div class=\"message-box\" [innerHtml]=\"basics().notes | safeHtml\"></div>\r\n}\r\n","import { Component, inject } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { SafeHtmlPipe } from '../../../../shared/pipes/safe-html.pipe';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EmptyMessage,\r\n    templateUrl: './empty-message.html',\r\n    styleUrls: ['./empty-message.scss'],\r\n    imports: [SafeHtmlPipe,]\r\n})\r\n// TODO: @2dm - remove empty FieldMetadata as not needed any more\r\n@FieldMetadata({ /* This is needed for the field to work */ })\r\nexport class EmptyMessageComponent {\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected basics = this.fieldState.basics;\r\n\r\n}\r\n","\r\nexport class DataSourceHelpers {\r\n  /**\r\n   * remove HTML tags from a string, which possibly was created in a WYSIWYG\r\n   */\r\n  public stripHtml(stringWithHtml: string): string {\r\n    if (!stringWithHtml) return '';\r\n    if (!stringWithHtml.includes('<')) return stringWithHtml;\r\n    const div = document.createElement(\"div\");\r\n    div.innerHTML = stringWithHtml ?? '';\r\n    return div.innerText || '';\r\n  }\r\n}\r\n","import { EntityLight } from '../../../../../../../edit-types/src/EntityLight';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DataSourceHelpers } from './data-source-helpers';\r\nimport { DataSourceMasks } from './data-source-masks.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  data2PickerItem: false,\r\n  getMasks: false,\r\n  patchMasks: false,\r\n  parseMasks: false,\r\n  buildMasks: false,\r\n}\r\n\r\ntype MaskedPickerParts = Pick<PickerItem, 'label' | 'tooltip' | 'info' | 'link' | 'previewValue'>;\r\n\r\n/**\r\n * Helper class to process masks for a DataSource.\r\n * Masks are strings with placeholders, vs. just the name of the field to show.\r\n */\r\nexport class DataSourceMasksHelper {\r\n\r\n  log = classLog({ DataSourceMasksHelper }, logSpecs);\r\n\r\n  constructor(\r\n    private name: string,\r\n    private settings: DataSourceMaskSettings,\r\n    features: FeaturesService,\r\n    private formConfig: FormConfigService,\r\n    parentLog: { enableChildren: boolean }, enableLog?: boolean\r\n  ) {\r\n    this.log.forceEnable(enableLog ?? parentLog.enableChildren ?? false);\r\n    this.#featInfoEnabled = features.allowUse[FeatureNames.PickerUiMoreInfo]();\r\n    this.#isDeveloper = formConfig.config.dialogContext.User?.IsSystemAdmin;\r\n    this.log.a('constructor - settings', { settings, infoEnabled: this.#featInfoEnabled });\r\n  }\r\n\r\n  #featInfoEnabled = false;\r\n  #featInfoWarned = false;\r\n  #isDeveloper = false;\r\n\r\n  #helpers = new DataSourceHelpers();\r\n\r\n  #masks: DataSourceMasks;\r\n\r\n  /** Convert an Entity data to Picker-Item, processing any masks */\r\n  data2PickerItem({ entity, streamName, valueMustUseGuid, valueDefaultsToGuid = false }\r\n    : { entity: EntityLight; streamName: string | undefined; valueMustUseGuid: boolean; valueDefaultsToGuid?: boolean; }\r\n  ): PickerItem {\r\n\r\n    const l = this.log.fnIf('data2PickerItem', { entity, streamName, valueMustUseGuid });\r\n    // Check if we have masks, if yes\r\n    const masks = this.#getMasks();\r\n\r\n    // Figure out Value to use if we don't use masks - fallback is to use the Guid\r\n    const value = (() => {\r\n      if (valueMustUseGuid || (valueDefaultsToGuid && !masks.value))\r\n        return entity.Guid;\r\n      if (entity[masks.value] === undefined)\r\n        return entity.Value;\r\n      const maybe = entity[masks.value];\r\n      // the value could be an empty string (pickers); not sure if it can be null though\r\n      return maybe !== undefined ? `${maybe}` : entity.Guid;\r\n    })();\r\n\r\n    // Figure out Title Value if we don't use masks - fallback is to use the title, or the value with asterisk\r\n    const label = (() => {\r\n      const maybeTitle = entity[masks.label];\r\n      return maybeTitle ? `${maybeTitle}` : entity.Title ? `${entity.Title}` : `${value}`; // If there is no title, use value with '*'\r\n    })();\r\n\r\n    const previewValue = (() => {\r\n      const maybePreview = entity[masks.previewValue];\r\n      if (maybePreview) return maybePreview;\r\n      return value;\r\n    })();\r\n\r\n    l.a('debug values', { masks, value, label, previewValue, hasPlaceholders: masks.hasPlaceholders });\r\n\r\n    // If we don't have masks, we are done\r\n    if (!masks.hasPlaceholders) {\r\n      const result: PickerItem = {\r\n        id: entity.Id,\r\n        data: entity,\r\n        value,\r\n        previewValue,\r\n        label,\r\n        tooltip: masks.tooltip,\r\n        info: masks.info,\r\n        link: masks.link,\r\n        sourceStreamName: streamName ?? null,\r\n        rules: entity[\"Rules\"],\r\n      };\r\n      return l.r(result, 'no masks');\r\n    }\r\n\r\n    // Prepare the masks\r\n    const fromMasks = this.#parseMasks(masks, entity);\r\n\r\n    // If the original was not a mask, look up the field\r\n    const finalLabel = masks.label.includes('[') ? fromMasks.label : label;\r\n\r\n    return l.r({\r\n      id: entity.Id,\r\n      data: entity,\r\n      ...fromMasks,\r\n      value,\r\n      label: finalLabel,\r\n      sourceStreamName: streamName ?? null,\r\n      rules: entity[\"Rules\"],\r\n    } satisfies PickerItem, 'with masks');\r\n  }\r\n\r\n  /** Process all placeholders in all masks to get tooltip, info, link and title */\r\n  #parseMasks(masks: DataSourceMasks, data: Record<string, any>): MaskedPickerParts {\r\n    const l = this.log.fnIf('parseMasks', { masks, data });\r\n    let label = masks.label;\r\n\r\n    // If we have placeholders, but the feature is not enabled, warn about it\r\n    if (!this.#featInfoWarned && !this.#featInfoEnabled && `${masks.tooltip}${masks.info}${masks.link}`.length > 0) {\r\n      const msgAddOn = this.#isDeveloper\r\n        ? `It is enabled for developers, but will be disabled for normal users until it's licensed.`\r\n        : '';\r\n      this.#featInfoWarned = true;\r\n    }\r\n    const useInfos = this.#featInfoEnabled || this.#isDeveloper;\r\n    let tooltip = useInfos ? masks.tooltip : '';\r\n    let info = useInfos ? masks.info : '';\r\n    let link = useInfos ? masks.link : '';\r\n    let previewValue = masks.previewValue;\r\n\r\n    Object.keys(data).forEach(key => {\r\n      // must check for null and use '' instead\r\n      const valueItem = data[key] ?? '';\r\n\r\n      // replace all occurrences of [Item:Key] with value - should be case insensitive\r\n      const search = new RegExp(`\\\\[Item:${key}\\\\]`, 'gi');\r\n\r\n      if (previewValue.includes(\"App:Path\")) {\r\n        // var x = ScriptsLoaderService.resolveUrlTokens(previewValue, this.formConfig.config)\r\n        const portalRoot = (this.formConfig.config.portalRoot).replace(/\\/$/, '');\r\n        const appUrl = portalRoot + this.formConfig.config.appRoot;\r\n        previewValue = previewValue.replace(\"[App:Path]\", appUrl);\r\n      }\r\n\r\n      tooltip = tooltip.replace(search, valueItem);\r\n      info = info.replace(search, valueItem);\r\n      link = link.replace(search, valueItem);\r\n      label = label.replace(search, valueItem);\r\n      previewValue = previewValue.replace(search, valueItem);\r\n    });\r\n\r\n    return l.r({ label, tooltip, info, link, previewValue } satisfies MaskedPickerParts, 'result');\r\n  }\r\n\r\n  /** Get the mask - if possibly from current objects cache */\r\n  #getMasks() {\r\n    if (!!this.#masks) return this.#masks;\r\n    this.#masks = this.#buildMasks();\r\n    this.log.aIf('getMasks', { masks: this.#masks });\r\n    return this.#masks;\r\n  }\r\n\r\n  #buildMasks(): DataSourceMasks {\r\n    const settings = this.settings;\r\n    const l = this.log.fnIf('buildMasks', { settings });\r\n    // Figure out the masks\r\n    const tooltip = !!settings.ItemTooltip ? this.#helpers.stripHtml(settings.ItemTooltip) : '';\r\n    const info = !!settings.ItemInformation ? this.#helpers.stripHtml(settings.ItemInformation) : '';\r\n    const link = settings.ItemLink ?? '';\r\n    const label = settings.Label ?? '';\r\n    const value = settings.Value ?? '';\r\n    const previewValue = settings.PreviewValue ?? '';\r\n    const hasPlaceholders = (tooltip + info + link + label + previewValue).includes('[');\r\n    const result: DataSourceMasks = {\r\n      hasPlaceholders,\r\n      tooltip,\r\n      info,\r\n      link,\r\n      label,\r\n      value,\r\n      previewValue,\r\n    };\r\n\r\n    return l.r(result, 'result');\r\n  }\r\n\r\n}\r\n\r\ninterface DataSourceMaskSettings {\r\n  ItemTooltip: string;\r\n  ItemInformation: string;\r\n  ItemLink: string;\r\n  Label: string;\r\n  Value: string;\r\n  PreviewValue: string;\r\n}\r\n","import { FieldSettingsPicker, FieldSettingsPickerMasks } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { RxHelpers } from '../../../../shared/rxJs/rx.helpers';\r\n\r\n/**\r\n * Helper class for data source, to figure out all the fields we need to retrieve from the server.\r\n */\r\nexport class DataSourceMoreFieldsHelper {\r\n  log = classLog({DataSourceMoreFieldsHelper});\r\n\r\n  fieldListToRetrieveFromServer(settings: FieldSettingsWithPickerSource): string {\r\n    this.log.a('fieldListToRetrieveFromServer', { settings });\r\n\r\n    const treeConfig = (settings as FieldSettingsWithPickerSource & FieldSettingsPicker).PickerTreeConfiguration;\r\n    const maskSettings = settings as FieldSettingsWithPickerSource & FieldSettingsPickerMasks;\r\n    const moreFields = maskSettings.MoreFields?.split(',') ?? [];\r\n    const queryFields = [maskSettings.Value, maskSettings.Label];\r\n    const treeFields = [\r\n      treeConfig?.TreeChildIdField,\r\n      treeConfig?.TreeParentIdField,\r\n      treeConfig?.TreeChildParentRefField,\r\n      treeConfig?.TreeParentChildRefField,\r\n    ];\r\n    const combinedFields = [...['Title', 'Id', 'Guid'], ...moreFields, ...queryFields, ...treeFields]\r\n      // extraction should happen in every field\r\n      .map(field => this.extractFieldNamesFromTokens(field, true)).flat();\r\n\r\n    const stringFields = [settings.ItemTooltip, settings.ItemInformation, settings.ItemLink]\r\n      .map(field => this.extractFieldNamesFromTokens(field, false)).flat();\r\n\r\n    // in the end, we should deduplicate the fields\r\n    const allFields = [...combinedFields, ...stringFields]\r\n      .filter(RxHelpers.distinct);\r\n\r\n    // merging into one long string\r\n    return allFields.join(',');\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse a string to find out the field names in [Item:FieldName] format\r\n   *\r\n   * @param input input string\r\n   * @param enableSimpleFields enable simple fields\r\n   * @returns parsed fields\r\n   */\r\n  extractFieldNamesFromTokens(input: string, enableSimpleFields: boolean = true): string[] {\r\n    this.log.a('extractFieldNamesFromTokens', { input, enableSimpleFields });\r\n    const fields: string[] = [];\r\n\r\n    // 1.) skip processing on null or empty\r\n    if (!(input?.trim().length > 0)) return fields;\r\n\r\n    // 2.) some input parts could have a string such as \"[Item:Color] - [Item:Title]\"\r\n    // these should be extracted, so then we have \"Color\" and \"Title\"\r\n    const regex = /\\[Item:(\\S.*?)\\]/gi;\r\n    let match: RegExpExecArray | null;\r\n    while ((match = regex.exec(input)) !== null) {\r\n      const trimmedMatch = match[1].trim();\r\n      if (trimmedMatch) fields.push(trimmedMatch);\r\n    }\r\n\r\n    // 3.) optionaly, when input parts is simple field name, like \"Color\" - these should be used 1:1\r\n    // so nothing to do, just return input\r\n    if (enableSimpleFields && fields.length === 0) fields.push(input);\r\n\r\n    return fields;\r\n  }\r\n\r\n}\r\n","import { inject, Injectable, Signal } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMasks, FieldSettingsPickerMerged } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldValue } from '../../../../../../../edit-types/src/FieldValue';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { classLog, ClassLogger } from '../../../../shared/logging';\r\nimport { RxHelpers } from '../../../../shared/rxJs/rx.helpers';\r\nimport { ServiceBase } from '../../../../shared/services/service-base';\r\nimport { signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../../edit-debug';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { PickerItem } from '../../picker/models/picker-item.model';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { DataSourceHelpers } from './data-source-helpers';\r\nimport { DataSourceMasksHelper } from './data-source-masks-helper';\r\nimport { DataSourceMoreFieldsHelper } from './data-source-more-fields-helper';\r\n\r\nexport const logSpecsDataSourceBase = {\r\n  all: false,\r\n  constructor: false,\r\n  data: false,\r\n  triggerGetAll: false,\r\n  addToRefresh: false,\r\n  fields: [...DebugFields, 'Categories'],\r\n  newIconOptions: false,\r\n  fileLoadSettings: false,\r\n}\r\n\r\n@Injectable()\r\nexport abstract class DataSourceBase extends ServiceBase {\r\n\r\n  abstract log: ClassLogger<typeof logSpecsDataSourceBase>;\r\n\r\n  /** Field State with settings etc. */\r\n  protected fieldState = inject(FieldState) as FieldState<FieldValue, FieldSettingsWithPickerSource & FieldSettingsPickerMerged>;\r\n\r\n  /** For feature checks in the info/tooltip etc. of picker data */\r\n  protected features = inject(FeaturesService);\r\n\r\n  /** To get info if the current user is a developer */\r\n  protected formConfig = inject(FormConfigService);\r\n\r\n  protected fieldName = this.fieldState.name;\r\n\r\n  constructor() { super(); }\r\n\r\n  constructorEnd() {\r\n    this.log ??= classLog({DataSourceBase});\r\n    this.log.aIf('constructor', { forField: this.fieldState.name });\r\n  }\r\n\r\n  /** Signal containing the data */\r\n  public data: Signal<PickerItem[]>;\r\n\r\n  /** Signal with loading-status */\r\n  public loading = signalObj('loading', true);\r\n\r\n  /** Toggle to trigger a full refresh. */\r\n  protected getAll$ = new BehaviorSubject<boolean>(false);\r\n  protected getAll = signalObj('getAll', false);\r\n\r\n  /**\r\n   * Force refresh of the entities with these guids.\r\n   * Typically for entities which are added or updated.\r\n   * Once an entity has run through any modification, it's safer to refresh it.\r\n   * Since it's difficult to know which ones have been cached or not,\r\n   * for now we'll just keep on retrieving all on each backend access.\r\n   * In future we may enhance this, but we must be sure that previous retrievals are preserved.\r\n   */\r\n  protected guidsToRefresh = signalObj<string[]>('guidsToRefresh', []);\r\n\r\n  protected settings = this.fieldState.settings;\r\n\r\n  protected noItemsLoadingFalse: DataWithLoading<PickerItem[]> = { data: [], loading: false };\r\n  protected noItemsLoadingTrue: DataWithLoading<PickerItem[]> = { data: [], loading: true };\r\n\r\n  public setup(): this { return this; }\r\n\r\n  ngOnDestroy(): void {\r\n    this.getAll$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  protected fieldsHelper = new DataSourceMoreFieldsHelper();\r\n\r\n  protected helpers = new DataSourceHelpers();\r\n\r\n  triggerGetAll(): void {\r\n    const l = this.log.fnIf('triggerGetAll');\r\n    this.getAll$.next(true);\r\n    this.getAll.set(true);\r\n    l.end();\r\n  }\r\n\r\n  addToRefresh(additionalGuids: string[]): void {\r\n    const l = this.log.fnIf('addToRefresh', { additionalGuids });\r\n    const before = this.guidsToRefresh();\r\n    const merged = [...before, ...additionalGuids].filter(RxHelpers.distinct);\r\n    l.values({ before, additionalGuids, merged });\r\n    this.guidsToRefresh.set(merged);\r\n    l.end();\r\n  }\r\n\r\n  protected createMaskHelper(moreSettings?: Partial<FieldSettings & FieldSettingsPickerMasks>, enableLog?: boolean): DataSourceMasksHelper {\r\n    return new DataSourceMasksHelper(this.fieldName, {...this.settings(), ...moreSettings }, this.features, this.formConfig, this.log, enableLog);\r\n  }\r\n\r\n  protected fieldsToRetrieve(settings: FieldSettingsWithPickerSource): string {\r\n    return this.fieldsHelper.fieldListToRetrieveFromServer(settings);\r\n  }\r\n\r\n}\r\n","import { Injectable, WritableSignal } from '@angular/core';\r\nimport { toObservable, toSignal } from '@angular/core/rxjs-interop';\r\nimport { Observable, combineLatest, distinctUntilChanged, filter, map, switchMap } from \"rxjs\";\r\nimport { transient } from '../../../../../../../core';\r\nimport { ClassLogger } from '../../../../shared/logging';\r\nimport { RxHelpers } from '../../../../shared/rxJs/rx.helpers';\r\nimport { QueryService } from '../../../../shared/services/query.service';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DataSourceBase, logSpecsDataSourceBase } from './data-source-base';\r\n\r\nexport const logSpecsDataSourceEntityQueryBase: typeof logSpecsDataSourceBase & any = {\r\n  ...logSpecsDataSourceBase,\r\n  all: true,\r\n  initPrefetch: false,\r\n  getFromBackend: false,\r\n  addToRefresh: false,\r\n  loadMoreIntoSignal: true,\r\n  ['loadMoreIntoSignal-data']: true,\r\n}\r\n\r\n/**\r\n * This is the base class for data-sources providing data from\r\n * - entities\r\n * - queries\r\n */\r\n@Injectable()\r\nexport abstract class DataSourceEntityBase extends DataSourceBase {\r\n\r\n  //#region Inject and blank constructor\r\n\r\n  abstract log: ClassLogger<typeof logSpecsDataSourceEntityQueryBase>;\r\n\r\n  protected querySvc = transient(QueryService);\r\n\r\n  constructor() { super(); }\r\n\r\n  ngOnDestroy(): void {\r\n    this.getAll$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * The params are either query-url params or the type-name.\r\n   * Implemented as observable, since all requests depend on observables.\r\n   * If there is ever an httpSignal service or something, then this should be migrated.\r\n   */\r\n  #typeOrParams = signalObj<string>('typeOrParams', null);\r\n  #typeOrParams$ = toObservable(this.#typeOrParams);\r\n  #paramsDebounced$ = this.#typeOrParams$.pipe(distinctUntilChanged());\r\n\r\n  /** Get the data from a query - all or only the ones listed in the guids */\r\n  protected abstract getFromBackend(params: string, guids: string[], purposeForLog: string) : Observable<DataWithLoading<PickerItem[]>>;\r\n\r\n  /**\r\n   * Signal containing \"all\" the data from the backend when not filtered.\r\n   * It's triggered for retrieval when\r\n   * - the params change (in many cases just at start, but sometimes ongoing eg. view-data picker)\r\n   * @memberof DataSourceEntityQueryBase\r\n   */\r\n  #fullList = toSignal(combineLatest([\r\n    this.#paramsDebounced$,\r\n    this.getAll$.pipe(\r\n      distinctUntilChanged(),\r\n      filter(getAll => !!getAll),\r\n      map(() => [] as unknown[])),\r\n  ]).pipe(\r\n    // SwitchMap ensures that only the latest request is processed\r\n    // This is important if parameters change, so that the old request is not used\r\n    // Otherwise it can lead to scenarios where the old result is used, if the first request takes longer.\r\n    switchMap(([typeName]) => this.getFromBackend(typeName, [], 'getAll')),\r\n  ), { initialValue: this.noItemsLoadingFalse });\r\n\r\n  #prefetchNew = signalObj<DataWithLoading<PickerItem[]>>('prefetchNow', this.noItemsLoadingFalse);\r\n\r\n  /** Additional items which were updated after sub-edits */\r\n  #modified = signalObj<DataWithLoading<PickerItem[]>>('modified', this.noItemsLoadingFalse);\r\n\r\n  public override data = computedObj('data', () => {\r\n    const prefetch = this.#prefetchNew().data;\r\n    const all = this.#fullList().data;\r\n    const modified = this.#modified().data;\r\n    const data = [...new Map([...prefetch, ...all, ...modified].map(item => [item.value, item])).values()];\r\n    this.log.a('data', { prefetch, all, overrides: modified, data });\r\n    return data;\r\n  });\r\n\r\n  /** Signal with loading-status */\r\n  public override loading = computedObj('loading', () => this.#fullList().loading || this.#modified().loading) as WritableSignal<boolean>;\r\n\r\n  initPrefetch(entityGuids: string[]): void {\r\n    const l = this.log.fnIfInFields('initPrefetch', this.fieldName, { entityGuids });\r\n    // in rare cases - such as json-based entities (which are never stored as real entities)\r\n    // the entityGuids can be null, in which case a prefetch would be pointless and cause errors\r\n    if (entityGuids == null)\r\n      return l.end('no entity guids to prefetch');\r\n    const guids = entityGuids.filter(RxHelpers.distinct);\r\n    this.#loadMoreIntoCache(this.#prefetchNew, guids, 'initPrefetch');\r\n    l.end();\r\n  }\r\n\r\n  /** Set parameters for retrieval - either contentTypeName or query url parameters */\r\n  setParams(params: string): void {\r\n    this.log.fnIfInFields('setParams', this.fieldName, { params });\r\n    this.#typeOrParams.set(params);\r\n  }\r\n\r\n\r\n  public override addToRefresh(additionalGuids: string[]): void {\r\n    const l = this.log.fnIf('addToRefresh', { additionalGuids });\r\n    this.#loadMoreIntoCache(this.#modified, additionalGuids, 'addToRefresh');\r\n    l.end();\r\n  }\r\n\r\n  /**\r\n   * Load some data and place it inside a target signal cache, adding to existing data.\r\n   */\r\n  #loadMoreIntoCache(target: WritableSignal<DataWithLoading<PickerItem[]>>, additionalGuids: string[], msgForLog: string): void {\r\n    const params = this.#typeOrParams();\r\n    const l = this.log.fnIfInFields('loadMoreIntoSignal', this.fieldName, { additionalGuids, params, msgForLog });\r\n    if (additionalGuids == null || additionalGuids.length === 0)\r\n      return l.end('no additional guids to load/refresh');\r\n\r\n    // get existing value and set loading to true\r\n    target.update(before => ({ data: before.data, loading: true }));\r\n\r\n    this.getFromBackend(params, additionalGuids, msgForLog)\r\n      .subscribe(additions => {\r\n        const l = this.log.fn('loadMoreIntoSignal-data', { additionalGuids, additions });\r\n        const before = target();\r\n        target.update(before => ({\r\n          data: [...new Map([...before.data, ...additions.data].map(item => [item.value, item])).values()],\r\n          loading: false\r\n        }));\r\n        l.values({ before, additions: additions, merged: target().data });\r\n      });\r\n    l.end();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map, Observable } from \"rxjs\";\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DataSourceEntityBase, logSpecsDataSourceEntityQueryBase } from './data-source-entity-base';\r\n\r\n@Injectable()\r\nexport class DataSourceAppAssets extends DataSourceEntityBase {\r\n\r\n  log = classLog({ DataSourceAppAssets }, logSpecsDataSourceEntityQueryBase);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n  }\r\n\r\n  /**\r\n  * Get the data from the Query System.AppAssets/Default\r\n  */\r\n  protected override getFromBackend(_typeName: string, _guids: string[], purposeForLog: string): Observable<DataWithLoading<PickerItem[]>> {\r\n    const settings = this.settings();\r\n    const { AssetsRootFolder: rootFolder, AssetsFileFilter: fileFilter, AssetsType: type } = settings;\r\n\r\n    const l = this.log.fnIf('getFromBackend', { settings }, purposeForLog);\r\n\r\n    const typeLower = (type ?? '').toLocaleLowerCase();\r\n    const stream = typeLower === 'all'\r\n      ? 'Default'\r\n        : typeLower === 'folders'\r\n          ? 'Folders'\r\n          : 'Files';\r\n\r\n    \r\n    const fieldMask = this.createMaskHelper({ Value: settings.Value || 'FullName'});\r\n\r\n    const data = this.querySvc.getFromQuery(`System.AppAssets/${stream}`, `rootFolder=${rootFolder}&filter=${fileFilter}`, '').pipe(\r\n      map(list => {\r\n        // const fieldMask = this.createMaskHelper({ Value: 'Name' });\r\n        const data = list[stream].map(entity => fieldMask.data2PickerItem({ entity, streamName: stream, valueMustUseGuid: false }));\r\n        return { data, loading: false } as DataWithLoading<PickerItem[]>;\r\n      })\r\n    );\r\n    return l.r(data);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog, ClassLogger } from '../../../../shared/logging';\r\nimport { DataSourceAppAssets } from '../data-sources/data-source-app-assets';\r\nimport { DataAdapterBase } from './data-adapter-base';\r\nimport { DataAdapterEntityBase, logSpecsDataAdapterEntityBase } from \"./data-adapter-entity-base\";\r\n\r\n/**\r\n * App Assets behave a lot like an entity-source,\r\n * since the internals are loaded from a query.\r\n */\r\n@Injectable()\r\nexport class DataAdapterAppAssets extends DataAdapterEntityBase {\r\n\r\n  log = classLog({DataAdapterAppAssets}, logSpecsDataAdapterEntityBase) as ClassLogger<typeof DataAdapterBase.logSpecs> & ClassLogger<typeof logSpecsDataAdapterEntityBase>;\r\n\r\n  protected dataSourceRaw = transient(DataSourceAppAssets);\r\n\r\n  constructor() { super(); }\r\n\r\n  fetchItems(): void {\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n}\r\n","import toString from './toString.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n    reHasRegExpChar = RegExp(reRegExpChar.source);\n\n/**\n * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n */\nfunction escapeRegExp(string) {\n  string = toString(string);\n  return (string && reHasRegExpChar.test(string))\n    ? string.replace(reRegExpChar, '\\\\$&')\n    : string;\n}\n\nexport default escapeRegExp;\n","import escapeRegExp from 'lodash-es/escapeRegExp';\r\nimport { EntityLight } from '../../../../../../../../edit-types/src/EntityLight';\r\nimport { classLog } from '../../../../../shared/logging/logging';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  findAllIconsInCss: false,\r\n};\r\n\r\n/** Calculates available css classes with className prefix. WARNING: Expensive operation */\r\nexport function findAllIconsInCss(cssSelector: string, showPrefix?: boolean): EntityLight[] {\r\n\r\n  const log = classLog({ findAllIconsInCss }, logSpecs);\r\n\r\n  const l = log.fnIf('findAllIconsInCss', { cssSelector, showPrefix });\r\n\r\n  if (!cssSelector)\r\n    return [];\r\n\r\n  const regEx = buildRegEx(cssSelector);\r\n  console.warn(regEx)\r\n\r\n  const allRules = getAllCssRules();\r\n  const foundList: IconOption[] = [];\r\n  const duplicateDetector: Record<string, boolean> = {};\r\n  for (const rules of allRules) {\r\n    const allRulesWithSelector = (Array.from(rules) as CSSStyleRule[])\r\n      .filter(rule => rule.selectorText);\r\n\r\n    for (const rule of allRulesWithSelector) {\r\n      // The full selector text, such as \".fa-x-ray:before\"\r\n      // Note that ATM we're still looking for icons, which is probably not the final solution\r\n      const selector = rule.selectorText;\r\n\r\n      // Reset the regex, otherwise it will only work every second time\r\n      // https://medium.com/codesnips/js-careful-when-reusing-regex-636b92c6bf07\r\n      regEx.lastIndex = 0;\r\n      const groups = regEx.exec(selector)?.groups;\r\n\r\n      // Skip if not found\r\n      if (!groups)\r\n        continue;\r\n      \r\n      console.log('regExed', groups.Value, groups.ValueRaw, groups.Title);\r\n\r\n      const iconClass = groups.ValueRaw;\r\n\r\n      if (duplicateDetector[iconClass]) continue;\r\n\r\n      foundList.push({\r\n        Id: null,\r\n        Guid: null,\r\n        Rule: rule,\r\n        ...groups as { Value: string, ValueRaw: string, Title: string },\r\n        Selector: selector,\r\n      });\r\n      duplicateDetector[iconClass] = true;\r\n    }\r\n  }\r\n\r\n  l.a('findAllIconsInCss', { classPrefix: cssSelector, showPrefix, foundList });\r\n\r\n  return l.r(foundList);\r\n}\r\n\r\nconst fallbackRegex = `(?<ValueRaw>\\\\.(?<Value>(?<Title>[\\\\-a-zA-Z0-9]+)))[:,\\{}]`;\r\nconst fontAwesomeRegex = `(?<ValueRaw>\\\\.(?<Value>fa-(?<Title>[\\\\-a-zA-Z0-9]+))):`;\r\n\r\nfunction buildRegEx(cssSelector: string): RegExp {\r\n  if (!cssSelector)\r\n    return new RegExp(fallbackRegex);\r\n\r\n  // If it contains a <, it's a regex with the names, so use that, but be sure to double-escape the backslashes\r\n  if (cssSelector.includes('<'))\r\n    return new RegExp(cssSelector, 'g');\r\n\r\n  // It's just a starts with, so create the default regex\r\n  const regEx = buildRegExFromPrefixAndSuffix(cssSelector, '[:\\{,]');\r\n\r\n  return new RegExp(regEx, 'g');\r\n}\r\n\r\nexport function buildRegExFromPrefixAndSuffix(prefix: string, suffix: string): string {\r\n  if (!prefix) return '';\r\n  const valueRaw = buildRegExFromPrefix(prefix);\r\n  const withEnding = `${valueRaw}${suffix}`;\r\n  return withEnding;\r\n}\r\n\r\nfunction buildRegExFromPrefix(prefix: string): string {\r\n  if (!prefix)\r\n    return '';\r\n\r\n  // Capturing group called \"Title\" containing the main part of the capture\r\n  const titlePart = '(?<Title>[\\\\-a-zA-Z0-9]+)';\r\n  // Check if it has a dot, which we don't want in the Value, but we want in the ValueRaw\r\n  const startedWithDot = prefix.startsWith('.');\r\n  const cssSelectorPart = startedWithDot ? prefix.substring(1) : prefix;\r\n\r\n  // Capturing group with name Value\r\n  const valuePart = `(?<Value>${escapeRegExp(cssSelectorPart)}${titlePart})`;\r\n\r\n  // If it started with a dot, we want to capture the dot as well\r\n  const valueWithPrefix = startedWithDot ? `${escapeRegExp('.')}${valuePart}` : valuePart;\r\n  // Capturing group with name ValueRaw\r\n  const valueRaw = `(?<ValueRaw>${valueWithPrefix})`;\r\n  return valueRaw;\r\n}\r\n\r\n\r\nfunction getAllCssRules(): CSSRuleList[] {\r\n  const allRules: CSSRuleList[] = Array.from(document.styleSheets)\r\n    .map(getCssRules)\r\n    .filter(Boolean);\r\n  return allRules;\r\n}\r\n\r\nfunction getCssRules(sheet: CSSStyleSheet): CSSRuleList {\r\n  if (!sheet) return null;\r\n  \r\n  // Try old browser API (officially deprecated)\r\n  try {\r\n    return sheet.rules;\r\n  } catch (error) { /* errors happens if browser denies access to css rules */ }\r\n\r\n  // Try newer browser API\r\n  try {\r\n    return sheet.cssRules;\r\n  } catch (error) { /* errors happens if browser denies access to css rules */ }\r\n\r\n  return null;\r\n}\r\n\r\n\r\nexport interface IconOption extends EntityLight {\r\n  Rule: CSSRule;\r\n  /** The Class - which is the main value we're picking */\r\n  Value: string;\r\n  /** Label for showing in the dropdown */\r\n  Title: string;\r\n\r\n  /** Optional: Icon class for new Picker */\r\n  ValueRaw?: string;\r\n  Selector?: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityLight } from 'projects/edit-types/src/EntityLight';\r\nimport { getWith } from '../../../../../../../core/object-utilities';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { ScriptsLoaderService } from '../../../shared/services/scripts-loader.service';\r\nimport { findAllIconsInCss } from './css/string-font-icon-picker.helpers';\r\nimport { DataSourceBase, logSpecsDataSourceBase } from './data-source-base';\r\nimport { DataSourceMasksHelper } from './data-source-masks-helper';\r\n\r\nconst logSpecs = {\r\n  ...logSpecsDataSourceBase,\r\n  data: false,\r\n  newIconOptions: true,\r\n  fileLoadSettings: false,\r\n  fields: [...logSpecsDataSourceBase.fields, '*'],\r\n};\r\n\r\n@Injectable()\r\nexport class DataSourceCss extends DataSourceBase {\r\n\r\n  log = classLog({ DataSourceCss }, logSpecs);\r\n\r\n  constructor(private scriptsLoaderService: ScriptsLoaderService) {\r\n    super();\r\n    this.constructorEnd();\r\n    this.log.fnIf('fileLoadSettings', this.fileLoadSettings());\r\n\r\n    const settings = this.fileLoadSettings();\r\n    this.scriptsLoaderService.load(settings.CssSourceFile.split('\\n'), () => {\r\n      const newIconOptions = findAllIconsInCss(settings.CssSelectorFilter, false);\r\n      this.log.fnIf('newIconOptions', { settings, newIconOptions });\r\n      this.#iconEntities.set(newIconOptions);\r\n    });\r\n\r\n  }\r\n\r\n  loading = signalObj('loading', false);\r\n\r\n  #settings = this.fieldState.settings;\r\n  #iconEntities = signalObj<EntityLight[]>('iconOptions', []);\r\n\r\n  fileLoadSettings = computedObj('fileLoadSettings', () => getWith(this.#settings(), s => ({\r\n    CssSourceFile: s.CssSourceFile,\r\n    CssSelectorFilter: s.CssSelectorFilter,\r\n    PreviewValue: s.PreviewValue,\r\n    Value: s.Value,\r\n  })));\r\n\r\n\r\n\r\n  #dataMaskHelper = (() => {\r\n    // Make sure the converter/builder uses the \"Value\" field for the final 'value'\r\n    const s = this.settings();\r\n    const maskHelper = new DataSourceMasksHelper(this.fieldName, { ...s, Label: s.Label || 'Value' }, this.features, this.formConfig, this.log);\r\n    return maskHelper;\r\n  })();\r\n\r\n  data = computedObj('data', () => {\r\n\r\n    const options = this.#iconEntities();\r\n    const maskHelper = this.#dataMaskHelper;\r\n\r\n    const l = this.log.fnIfInFields('data', this.fieldName, { options, maskHelper });\r\n\r\n    const result = options.map(entity => {\r\n      const pickerItem = maskHelper.data2PickerItem({ entity, streamName: null, valueMustUseGuid: false });\r\n      l.a('one item', { entity, pickerItem });\r\n      return pickerItem;\r\n    });\r\n    return l.r(result);\r\n  })\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataSourceCss } from \"../data-sources/data-source-css\";\r\nimport { DeleteEntityProps } from \"../models/picker.models\";\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { DataAdapterBase } from \"./data-adapter-base\";\r\n\r\n@Injectable()\r\nexport class DataAdapterCss extends DataAdapterBase {\r\n\r\n  log = classLog({ DataAdapterCss }, DataAdapterBase.logSpecs);\r\n\r\n  protected dataSourceRaw = transient(DataSourceCss);\r\n\r\n  constructor() {\r\n    super();\r\n    this.log.fnIf('constructor');\r\n  }\r\n\r\n  public myFeatures = signalObj('features', { edit: false, create: false, delete: false, } satisfies Partial<PickerFeatures>);\r\n\r\n  fetchItems(): void {\r\n    this.log.fnIf('fetchItems');\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n\r\n  deleteItem(props: DeleteEntityProps): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n\r\n  editItem(editParams: { entityGuid: string; entityId: number; }, entityType: string): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n}\r\n","import { DataSourceBase } from './data-source-base';\r\nimport { Injectable } from '@angular/core';\r\nimport { signalObj, computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { classLog } from '../../../../shared/logging';\r\n\r\n/**\r\n * This is the data-source we plan to attach when a picker is not configured.\r\n * It should only show the information that it's not configured.\r\n */\r\n@Injectable()\r\nexport class DataSourceEmpty extends DataSourceBase {\r\n\r\n  log = classLog({DataSourceEmpty});\r\n\r\n  constructor() { super(); this.constructorEnd() }\r\n  \r\n  loading = signalObj('loading', false);\r\n\r\n  #label = signalObj('label', `something is wrong - using DataSourceEmpty`);\r\n\r\n  public preSetup(label: string): this {\r\n    this.#label.set(label);\r\n    return this;\r\n  }\r\n\r\n  public override data = computedObj('data', () => [{\r\n    value: '',\r\n    label: this.#label() ?? 'No options available',\r\n    notSelectable: true,\r\n    isMessage: true,\r\n  }]);\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataSourceEmpty } from '../data-sources/data-source-empty';\r\nimport { DeleteEntityProps } from \"../models/picker.models\";\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { DataAdapterBase } from \"./data-adapter-base\";\r\nimport { StateAdapter } from './state-adapter';\r\n\r\n@Injectable()\r\nexport class DataAdapterEmpty extends DataAdapterBase {\r\n\r\n  log = classLog({DataAdapterEmpty}, DataAdapterBase.logSpecs);\r\n\r\n  protected dataSourceRaw = transient(DataSourceEmpty);\r\n\r\n  constructor() { super();}\r\n\r\n  public myFeatures = signalObj('features', { edit: false, create: false, delete: false, } satisfies Partial<PickerFeatures>);\r\n\r\n  public override connectState(state: StateAdapter): this {\r\n    this.dataSourceRaw.preSetup(\"Error: configuration missing\");\r\n    return super.connectState(state);\r\n  }\r\n\r\n  public setupEmpty(): this {\r\n    const l = this.log.fnIf('setupEmpty');\r\n    this.dataSource.set(this.dataSourceRaw.preSetup(\"Error: configuration missing\"));\r\n    return l.rSilent(this);\r\n  }\r\n\r\n  fetchItems(): void {\r\n    this.log.a('fetchItems');\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n\r\n  deleteItem(props: DeleteEntityProps): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n\r\n  editItem(editParams: { entityGuid: string; entityId: number; }, entityType: string): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map, Observable } from \"rxjs\";\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DataSourceEntityBase, logSpecsDataSourceEntityQueryBase } from './data-source-entity-base';\r\n\r\n@Injectable()\r\nexport class DataSourceEntity extends DataSourceEntityBase {\r\n\r\n  log = classLog({ DataSourceEntity }, logSpecsDataSourceEntityQueryBase);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n  }\r\n\r\n  /**\r\n   * Get the data from the backend using the built-in get-Entities query\r\n   */\r\n  protected override getFromBackend(typeName: string, guids: string[], purposeForLog: string): Observable<DataWithLoading<PickerItem[]>> {\r\n    const fields = this.fieldsToRetrieve(this.settings());\r\n\r\n    // Behavior changes a bit if the query is meant to supply data for string-inputs\r\n    // ...mainly because the value is allowed to be any field, not just the Guid.\r\n    const inputSpecs = this.fieldState.config.inputTypeSpecs;\r\n    const valueMustUseGuid = inputSpecs.mustUseGuid;\r\n\r\n    var l = this.log.fnIf('getFromBackend', { typeName, guids, fields, inputType: inputSpecs.inputType, valueMustUseGuid }, purposeForLog);\r\n    const fieldMask = this.createMaskHelper();\r\n    const entities = this.querySvc.getEntities({ contentTypes: [typeName], itemIds: guids, fields, log: this.log.name })\r\n      .pipe(\r\n        // tap(list => l.a('getEntities', { typeName, list })),\r\n        map(list => {\r\n          const data = list.Default.map(entity => fieldMask.data2PickerItem({ entity, streamName: null, valueMustUseGuid, valueDefaultsToGuid: true }));\r\n          return { data, loading: false } as DataWithLoading<PickerItem[]>;\r\n        }),\r\n      )\r\n    return l.r(entities);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog, ClassLogger } from '../../../../shared/logging';\r\nimport { DataSourceEntity } from \"../data-sources/data-source-entity\";\r\nimport { DataAdapterBase } from './data-adapter-base';\r\nimport { DataAdapterEntityBase, logSpecsDataAdapterEntityBase } from \"./data-adapter-entity-base\";\r\n\r\n@Injectable()\r\nexport class DataAdapterEntity extends DataAdapterEntityBase {\r\n\r\n  log = classLog({DataAdapterEntity}, logSpecsDataAdapterEntityBase) as ClassLogger<typeof DataAdapterBase.logSpecs> & ClassLogger<typeof logSpecsDataAdapterEntityBase>;\r\n\r\n  protected dataSourceRaw = transient(DataSourceEntity);\r\n\r\n  constructor() { super(); }\r\n\r\n  override syncParams(): void {\r\n    this.dataSourceRaw.setParams(this.contentType());\r\n  }\r\n\r\n  fetchItems(): void {\r\n    this.syncParams();\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n}\r\n","import { Injectable, inject } from '@angular/core';\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { Observable, catchError, map, of } from \"rxjs\";\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { QueryStreams } from '../../../../shared/models/query-stream.model';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { PickerItem, PickerItemFactory } from '../models/picker-item.model';\r\nimport { DataSourceEntityBase, logSpecsDataSourceEntityQueryBase } from './data-source-entity-base';\r\n\r\n// TODO: NEXT STEPS\r\n// 5. afterwards check all edge cases.\r\n// - EG. not aggressively loading\r\n// - eg changes to data (edits)\r\n// - deletes - NOT QUITE WORKING ATM\r\n// - I believe some kind of clean-up is still necessary...?\r\n\r\n@Injectable()\r\nexport class DataSourceQuery extends DataSourceEntityBase {\r\n\r\n  log = classLog({DataSourceQuery}, logSpecsDataSourceEntityQueryBase);\r\n\r\n  #translate = inject(TranslateService);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n  }\r\n\r\n  protected formState = inject(FormConfigService);\r\n  #appId = Number(this.formState.config.appId);\r\n  #streamName = computedObj('streamName', () => this.settings().StreamName);\r\n\r\n  /**\r\n   * Get the data from a query - all or only the ones listed in the guids\r\n   */\r\n  protected override getFromBackend(params: string, guids: string[], purposeForLog: string): Observable<DataWithLoading<PickerItem[]>> {\r\n    var l = this.log.fnIfInFields('getFromBackend', this.fieldName, { params, guids }, purposeForLog);\r\n    // If the configuration isn't complete, the query can be empty\r\n    const sets = this.settings();\r\n    const streamName = this.#streamName();\r\n    const queryName = sets.Query;\r\n    const queryUrl = !!queryName\r\n      ? queryName.includes('/') ? sets.Query : `${sets.Query}/${streamName}`\r\n      : null;\r\n\r\n    l.a('queryUrl', { queryName, streamName, queryUrl })\r\n\r\n    // If no query, return a dummy item with a message\r\n    const source: Observable<DataWithLoading<QueryStreams>> = (() => {\r\n      // If we don't have a query, return a dummy item\r\n      if (!queryUrl) {\r\n        l.a('noQueryUrl - will create dummy item');\r\n        return of<DataWithLoading<QueryStreams>>({\r\n          data: {\r\n            'Default': [\r\n              {\r\n                Id: -1,\r\n                Guid: null,\r\n                Title: this.#translate.instant('Fields.Picker.QueryNotConfigured'),\r\n              },\r\n            ],\r\n          },\r\n          loading: false,\r\n        });\r\n      }\r\n\r\n      // We have query (default case), get the data\r\n      l.a('queryUrl for request', { queryUrl });\r\n      return this.querySvc\r\n        .getFromQuery(queryUrl, params, this.fieldsToRetrieve(this.settings()), guids)\r\n        .pipe(\r\n          // 2025-03-27 2dm\r\n          // Temp: show error; not sure if this is the best method\r\n          // since it may prevent a better error indicator in the UI\r\n          // but otherwise we end up throwing the exception again and again,\r\n          // because somehow it keeps on triggering changes which causes all fields to be recalculated - throwing the error again.\r\n          catchError(() => [] as unknown[]),\r\n          map(data => ({ data, loading: false } as DataWithLoading<QueryStreams>)),\r\n          \r\n        );\r\n    })();\r\n\r\n    const result = source.pipe(\r\n      map(set => ({\r\n        data: this.#transformData(set.data, streamName),\r\n        loading: set.loading,\r\n      } as DataWithLoading<PickerItem[]>)),\r\n    );\r\n    return l.r(result);\r\n  }\r\n\r\n\r\n  #transformData(data: QueryStreams, streamName: string | null): PickerItem[] {\r\n    \r\n    const l = this.log.fn('transformData', { data, streamName });\r\n    if (!data)\r\n      return l.r([PickerItemFactory.message(this.#translate, 'Fields.Picker.QueryErrorNoData')], 'data is null');\r\n    \r\n    // Behavior changes a bit if the query is meant to supply data for string-inputs\r\n    // ...mainly because the value is allowed to be any field, not just the Guid.\r\n    const inputSpecs = this.fieldState.config.inputTypeSpecs;\r\n    const valueMustUseGuid = inputSpecs.mustUseGuid;\r\n    const streamNames = streamName.split(',');\r\n    l.values({ inputType: inputSpecs.inputType, valueMustUseGuid, streamNames });\r\n\r\n    // If expected streams are missing, create placeholders\r\n    const errors = streamNames\r\n      .filter(streamName => !data[streamName])\r\n      .map(streamName => PickerItemFactory.placeholder(this.#translate, 'Fields.Picker.QueryStreamNotFound', ' ' + streamName));\r\n\r\n    // Create the items\r\n    const maskHelper = this.createMaskHelper();\r\n    const items = streamNames\r\n      .filter(streamName => data[streamName])\r\n      .reduce((acc, streamName) => {\r\n        const converted = data[streamName]\r\n          .map(entity => maskHelper.data2PickerItem({ entity, streamName, valueMustUseGuid, valueDefaultsToGuid: true }));\r\n        return acc.concat(converted);\r\n      }, []);\r\n\r\n    // Set read-only flags on items from other apps\r\n    const itemsMaybeReadOnly = this.#setDisableEdit(items);\r\n\r\n    // Merge errors and items\r\n    return l.r([...errors, ...itemsMaybeReadOnly]);\r\n  }\r\n\r\n  #setDisableEdit<T extends PickerItem>(queryEntities: T[]): T[] {\r\n    if (queryEntities)\r\n      queryEntities.forEach(e => {\r\n        const appId = e.data?.AppId;\r\n        e.noEdit = appId != null && appId !== this.#appId;\r\n        e.noDelete = e.noEdit;\r\n      });\r\n    return queryEntities;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog, ClassLogger } from '../../../../shared/logging';\r\nimport { FieldMask } from '../../../shared/helpers/field-mask.helper';\r\nimport { DataSourceQuery } from \"../data-sources/data-source-query\";\r\nimport { PickerItemFactory } from '../models/picker-item.model';\r\nimport { DataAdapterBase } from './data-adapter-base';\r\nimport { DataAdapterEntityBase, logSpecsDataAdapterEntityBase } from \"./data-adapter-entity-base\";\r\n\r\n@Injectable()\r\nexport class DataAdapterQuery extends DataAdapterEntityBase {\r\n\r\n  log = classLog({DataAdapterQuery}, logSpecsDataAdapterEntityBase) as ClassLogger<typeof DataAdapterBase.logSpecs> & ClassLogger<typeof logSpecsDataAdapterEntityBase>;\r\n\r\n  protected dataSourceRaw = transient(DataSourceQuery);\r\n\r\n  constructor() { super(); }\r\n\r\n  /**\r\n   * Url Parameters - often mask - from settings\r\n   * This is a text or mask containing all query parameters.\r\n   * Since it's a mask, it can also contain values from the current item\r\n   */\r\n  #paramsMaskLazy = transient(FieldMask).initSignal(this.log.name, this.fieldState.settingExt('UrlParameters'));\r\n\r\n  override syncParams(): void {\r\n    this.dataSourceRaw.setParams(this.#paramsMaskLazy?.result());\r\n  }\r\n\r\n  fetchItems(): void {\r\n    const l = this.log.fnIfInFields('fetchItems', this.name);\r\n    this.syncParams();\r\n    // note: it's kind of hard to produce this error, because the config won't save without a query\r\n    if (!this.fieldState.settings().Query) {\r\n      const errors = [PickerItemFactory.placeholder(this.translate, 'Fields.Picker.QueryNotDefined')];\r\n      this.errorOptions.set(errors);\r\n      return;\r\n    }\r\n    this.dataSourceRaw.triggerGetAll();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityLight } from '../../../../../../../edit-types/src/EntityLight';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataSourceBase, logSpecsDataSourceBase } from './data-source-base';\r\n\r\nconst logSpecs = {\r\n  ...logSpecsDataSourceBase,\r\n  data: true,\r\n};\r\n\r\n@Injectable()\r\nexport class DataSourceString extends DataSourceBase {\r\n\r\n  log = classLog({DataSourceString}, logSpecs);\r\n  \r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n  }\r\n\r\n  loading = signalObj('loading', false);\r\n\r\n  /**\r\n   * The Data Mask Helper to create Picker Items from the source data\r\n   * Make sure the converter/builder uses the \"Value\" field\r\n   * as all the dropdown sources (CSV, etc.) use that field.\r\n   */\r\n  #dataMaskHelper = (() => this.createMaskHelper({ Value: 'Value' }))();\r\n\r\n  data = computedObj('data', () => {\r\n    const options = this.settings()._options;\r\n    const maskHelper = this.#dataMaskHelper;\r\n    const l = this.log.fnIfInFields('data', this.fieldName, { options, maskHelper });\r\n    const result = options.map(option => {\r\n      const entity: EntityLight = {\r\n        Id: null,\r\n        Guid: null,\r\n        ...option,  // Must contain at least Title / Value\r\n      };\r\n      const pickerItem = maskHelper.data2PickerItem({ entity, streamName: null, valueMustUseGuid: false });\r\n      l.a('one item', { entity, pickerItem });\r\n      return pickerItem;\r\n    });\r\n    return l.r(result);\r\n  })\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataSourceString } from \"../data-sources/data-source-string\";\r\nimport { DeleteEntityProps } from \"../models/picker.models\";\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { DataAdapterBase } from \"./data-adapter-base\";\r\n\r\n@Injectable()\r\nexport class DataAdapterString extends DataAdapterBase {\r\n\r\n  log = classLog({DataAdapterString}, DataAdapterBase.logSpecs);\r\n\r\n  protected dataSourceRaw = transient(DataSourceString);\r\n\r\n  constructor() { super();}\r\n\r\n  public myFeatures = signalObj('features', { edit: false, create: false, delete: false, } satisfies Partial<PickerFeatures>);\r\n\r\n  fetchItems(): void {\r\n    this.log.fnIf('fetchItems');\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n\r\n  deleteItem(props: DeleteEntityProps): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n\r\n  editItem(editParams: { entityGuid: string; entityId: number; }, entityType: string): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n}\r\n","import { moveItemInArray } from '@angular/cdk/drag-drop';\r\nimport { Injectable, Signal, inject } from '@angular/core';\r\nimport { getWith } from '../../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsOptionsWip, FieldSettingsPickerMerged } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../../edit-debug';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { DeleteEntityProps } from '../models/picker.models';\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { ReorderIndexes } from '../picker-list/reorder-index.models';\r\nimport { StateUiMapperBase } from './state-ui-mapper-base';\r\n\r\nexport const logSpecsStateAdapter = {\r\n  all: false,\r\n  updateValue: false,\r\n  add: false,\r\n  set: false,\r\n  remove: false,\r\n  reorder: false,\r\n  doAfterDelete: false,\r\n  selectedItems: false,\r\n  sepAndOpts: false,\r\n  createEntityTypes: false,\r\n  attachCallback: false,\r\n  typesForNew: false,\r\n  correctStringEmptyValue: true,\r\n  fields: [...DebugFields, 'Query'],\r\n};\r\n\r\n@Injectable()\r\nexport class StateAdapter {\r\n\r\n  //#region Setup / Inject / Logs\r\n\r\n  log = classLog({StateAdapter}, logSpecsStateAdapter);\r\n\r\n  #formConfigSvc = inject(FormConfigService);\r\n  #fieldState = inject(FieldState) as FieldState<number | string | string[], FieldSettings & FieldSettingsOptionsWip & FieldSettingsPickerMerged>;\r\n\r\n  constructor() { }\r\n\r\n  public setup(fieldName: string, uiMapper: StateUiMapperBase): this {\r\n    this.#fieldName = fieldName;\r\n    this.mapper = uiMapper as StateUiMapperBase<number | string | string[], string[]>;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Mapper to convert between the state and the UI - must be configured in setup.\r\n   * On the UI side, must always be an array of strings.\r\n   */\r\n  public mapper: StateUiMapperBase<number | string | string[], string[]>;\r\n\r\n  /** Field Name - just for selective debugging */\r\n  #fieldName: string;\r\n\r\n  //#endregion\r\n\r\n  protected readonly settings = this.#fieldState.settings;\r\n\r\n  /** The features this source will broadcast, to be merged with other features */\r\n  public myFeatures = signalObj('features', {} as Partial<PickerFeatures>);\r\n\r\n  /** The final valid features, must be provided by the picker-data */\r\n  public features: Signal<PickerFeatures>;\r\n\r\n\r\n  #createTypesRaw = computedObj('createTypesRaw',\r\n    () => getWith(this.settings().CreateTypes,\r\n      ts => ts.split(ts.indexOf('\\n') > -1 ? '\\n' : ',')).filter(Boolean));\r\n\r\n  /**  List of entity types to create for the (+) button; ATM exclusively used in the new pickers for selecting the source. */\r\n  public typesForNew = computedObj('typesForNew', () => {\r\n    const raw = this.#createTypesRaw().map((guid: string) => ({ label: null as string, guid }));\r\n    \r\n    const l = this.log.fnIfInFields('typesForNew', this.#fieldName, { raw });\r\n\r\n    // return [];\r\n    // Augment with additional label and guid if we have this\r\n    const updated = raw.map(orig => {\r\n      const guid = orig.guid;\r\n      const ct = this.#formConfigSvc.settings.ContentTypes\r\n        .find(ct => ct.Id === guid || ct.Name == guid);\r\n      return {\r\n        ...orig,\r\n        // replace is a bit temporary, as the names are a bit long...\r\n        label: (ct?.Title ?? ct?.Name ?? `${guid} (not found)`).replace('UI Picker Source - ', ''),\r\n        guid: ct?.Id ?? guid,\r\n      }\r\n    });\r\n    return l.r(updated);\r\n  });\r\n\r\n  /**\r\n   * Lazy Signal telling us if empty values are allowed\r\n   * Should ONLY be used in 'selectedItems' - and never in Values, as we would create a loop\r\n   * since the this will also access the possible options, which in turn is initialized using the selectedItems\r\n   */\r\n  public allowsEmptyLazy = signalObj<Signal<boolean>>('allowsEmptyLazy', signalObj('initial', false));\r\n\r\n  /**\r\n   * Signal with all the currently selected items.\r\n   * The PickerItems are fairly basic, as any additional data is added later on.\r\n   * The only case the additional data matters,\r\n   * is when we have a string-picker with a free-text value that is not in the dropdown.\r\n   * In that case, additional data from here is used to disable edit and delete.\r\n   */\r\n  public selectedItems: Signal<string[]> = computedObj('selectedItems', () => {\r\n    const uiValue = this.#fieldState.uiValue();\r\n    this.log.fnIf('selectedItems', { uiValue });\r\n    const asUi = this.mapper.toUi(uiValue);\r\n    // console.warn('asUi before empty fix', { field: this.#fieldName, mapper: this.mapper, uiValue, asUi });\r\n    // if (this.#fieldName === 'releases')\r\n    //   debugger;\r\n    const pickerAllowsEmpty = this.allowsEmptyLazy()();\r\n    const uiFixed = asUi.length == 0 && pickerAllowsEmpty\r\n      ? ['']\r\n      : asUi;\r\n    return uiFixed;\r\n  });\r\n\r\n  //#region Callbacks for setting the focus, like after removing the last selection\r\n\r\n  #focusOnSearchComponent: () => void;\r\n\r\n  public attachCallback(focusCallback: () => void): this {\r\n    const l = this.log.fnIf('attachCallback');\r\n    this.#focusOnSearchComponent = focusCallback;\r\n    return l.rSilent(this);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Conversion back and forth between formats\r\n\r\n  /** Signal with the current values in the picker, as an array */\r\n  public values = computedObj('values', () => {\r\n    const asUi = this.mapper.toUi(this.#fieldState.uiValue());\r\n    return asUi;\r\n  });\r\n\r\n  //#endregion\r\n\r\n  //#region CRUD operations\r\n\r\n  #updateValue(operation: (original: string[]) => string[]): void {\r\n    const l = this.log.fnIfInFields('updateValue', this.#fieldName);\r\n    // Get original data, and make sure we have a copy, so that ongoing changes won't affect the original\r\n    // If we don't do this, then later change detection can fail!\r\n    const valueArray = [...this.values()];\r\n    const modified = operation(valueArray);\r\n    const newValue = this.mapper.toState(modified);\r\n    this.#fieldState.ui().setIfChanged(newValue);\r\n    l.end('', { newValue });\r\n  }\r\n\r\n  public add(value: string): void {\r\n    this.log.fnIfInFields('add', this.#fieldName, { value });\r\n    this.#updateValue(list => (this.features().multiValue) ? [...list, value] : [value]);\r\n  }\r\n\r\n  public set(values: string[]): void {\r\n    this.log.fnIf('set', { values });\r\n    this.#updateValue(() => values);\r\n  }\r\n\r\n  public flush(): void {\r\n    this.set([]);\r\n  }\r\n\r\n  public reorder(reorderIndexes: ReorderIndexes) {\r\n    this.log.fnIf('reorder', { reorderIndexes });\r\n    this.#updateValue(list => {\r\n      moveItemInArray(list, reorderIndexes.previousIndex, reorderIndexes.currentIndex);\r\n      return [...list];\r\n    });\r\n  }\r\n\r\n  public remove(index: number) {\r\n    this.log.fnIf('remove', { index });\r\n    this.#updateValue(list => {\r\n      list.splice(index, 1);\r\n      return [...list];\r\n    });\r\n\r\n    // If we have no items left, set focus back to the search component, since this is usually wanted\r\n    if (!this.values().length)\r\n      setTimeout(() => this.#focusOnSearchComponent());\r\n  }\r\n\r\n  public doAfterDelete(props: DeleteEntityProps) {\r\n    this.log.fnIf('doAfterDelete', { props });\r\n    this.remove(props.index);\r\n  }\r\n\r\n  //#endregion\r\n\r\n}\r\n","import { Signal } from '@angular/core';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsSharedSeparator } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldValue } from '../../../../../../../edit-types/src/FieldValue';\r\n\r\n/**\r\n * Small helper class to do mapping between the state and the UI.\r\n *\r\n * Basically the reason is that the UI sometimes needs a slightly different representation of the state.\r\n *\r\n * This class should help map both ways.\r\n */\r\nexport abstract class StateUiMapperBase<TState extends FieldValue = FieldValue, TUi extends FieldValue = FieldValue> {\r\n\r\n  constructor(protected fieldName: string, protected settings: Signal<FieldSettings & FieldSettingsSharedSeparator>) { }\r\n\r\n  abstract toUi(state: TState): TUi;\r\n\r\n  abstract toState(uiValue: TUi): TState;\r\n}\r\n","import { StateUiMapperBase } from './state-ui-mapper-base';\r\n\r\n/**\r\n * A noop mapper that does nothing, as the data-type for state is the same as the UI.\r\n * \r\n * Typically used in Entity-Picker fields.\r\n */\r\nexport class StateUiMapperNoop extends StateUiMapperBase<any, any> {\r\n  toUi(state: any): any {\r\n    return state;\r\n  }\r\n\r\n  toState(uiValue: any): any {\r\n    return uiValue;\r\n  }\r\n}","import { convertArrayToString } from '../picker.helpers';\r\nimport { StateUiMapperBase } from './state-ui-mapper-base';\r\n\r\n/**\r\n * A mapper that converts a string to a number .\r\n *\r\n * Typically used for string-pickers, where the data is a string but the UI is an array of strings.\r\n */\r\nexport class StateUiMapperNumberArray extends StateUiMapperBase<number, string[]> {\r\n  /**\r\n    * Convert a number to an array of strings for use in the UI.\r\n    */\r\n  toUi(state: number): string[] {\r\n    return state == null\r\n      ? []\r\n      : [state.toString()];\r\n  }\r\n\r\n  /**\r\n  * Convert an array of strings to a number for state.\r\n  */\r\n  toState(uiValue: string[]): number {\r\n    const stringValue = (uiValue == null || uiValue.length === 0)\r\n      ? ''\r\n      : convertArrayToString(uiValue, this.settings().Separator);\r\n\r\n    const parsedNumber = Number(stringValue);\r\n    return isNaN(parsedNumber) ? null : parsedNumber;\r\n  }\r\n}\r\n","import { convertArrayToString } from '../picker.helpers';\r\nimport { StateUiMapperBase } from './state-ui-mapper-base';\r\n\r\n/**\r\n * A mapper that converts a string to an array of strings, and vice versa.\r\n *\r\n * Typically used for string-pickers, where the data is a string but the UI is an array of strings.\r\n */\r\nexport class StateUiMapperStringArray extends StateUiMapperBase<string, string[]> {\r\n  /**\r\n   * Convert a string to an array of strings for use in the UI.\r\n   */\r\n  toUi(state: string): string[] {\r\n    return (state == null || state === '')\r\n      ? []\r\n      : state.split(this.settings().Separator) ?? [];\r\n  }\r\n\r\n  /**\r\n   * The state needs a string, using the specified separator.\r\n   */\r\n  toState(uiValue: string[]): string {\r\n    return (uiValue == null || uiValue.length === 0) \r\n      ? ''\r\n      : convertArrayToString(uiValue, this.settings().Separator);\r\n  }\r\n}","export const PickerSourcesCustom = {\r\n  UiPickerSourceCustomList: 'UiPickerSourceCustomList',\r\n  UiPickerSourceCustomCsv: 'UiPickerSourceCustomCsv',\r\n} as const;\r\n\r\nexport const PickerConfigs = {\r\n  ...PickerSourcesCustom,\r\n  UiPickerSourceQuery: 'UiPickerSourceQuery',\r\n  UiPickerSourceEntity: 'UiPickerSourceEntity',\r\n  UiPickerSourceAppAssets: 'UiPickerSourceAppAssets',\r\n  UiPickerSourceCss: 'UiPickerSourceCss',\r\n} as const;\r\n\r\nexport const UiPickerModeIsTree = 'UiPickerModeTree';\r\n\r\n","import { Injector, ProviderToken } from '@angular/core';\r\nimport { FieldSettingsPicker } from 'projects/edit-types/src/FieldSettings-Pickers';\r\nimport { Of, transient } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldState } from '../field-state';\r\nimport { DataAdapterAppAssets } from './adapters/data-adapter-app-assets';\r\nimport { DataAdapterBase } from './adapters/data-adapter-base';\r\nimport { DataAdapterCss } from './adapters/data-adapter-css';\r\nimport { DataAdapterEmpty } from './adapters/data-adapter-empty';\r\nimport { DataAdapterEntity } from './adapters/data-adapter-entity';\r\nimport { DataAdapterEntityBase } from './adapters/data-adapter-entity-base';\r\nimport { DataAdapterQuery } from './adapters/data-adapter-query';\r\nimport { DataAdapterString } from './adapters/data-adapter-string';\r\nimport { StateAdapter } from './adapters/state-adapter';\r\nimport { StateUiMapperBase } from './adapters/state-ui-mapper-base';\r\nimport { StateUiMapperNoop } from './adapters/state-ui-mapper-noop';\r\nimport { StateUiMapperNumberArray } from './adapters/state-ui-mapper-number-array';\r\nimport { StateUiMapperStringArray } from './adapters/state-ui-mapper-string-array';\r\nimport { PickerConfigs } from './constants/picker-config-model.constants';\r\nimport { PickerData } from './picker-data';\r\n\r\n/**\r\n * Factory for creating PickerData instances.\r\n * Goal is to move all the logic for which combination of input types\r\n * result in what states etc. to here.\r\n */\r\nexport class PickerDataSetup {\r\n\r\n  log = classLog({ PickerDataSetup }, null);\r\n\r\n  constructor(private injector: Injector) { }\r\n\r\n  // Notes: previous flow of initialization\r\n  // 1. Final control (eg. StringPickerComponent) gets services which it will use using transient(...)\r\n  // ... and also importMe on the logic\r\n  // 2. PickerComponent.ngOnInit() will\r\n  // ...\r\n  // 3. The control will override initAdaptersAndModel()\r\n  // 3.1 init state with\r\n  // ... it will also attach a CALLBACK! for focused?\r\n\r\n  /**\r\n   * Setup / initialize a Picker Data.\r\n   * Note that it can't be called when fields are being created, but must be called from inside each field.\r\n   * Reason is that objects created later on through DI will need the FieldState and other context objects to be injected.\r\n   */\r\n  setupPickerData(pickerData: PickerData, fieldState: FieldState<FieldValue>): PickerData {\r\n    const pdWithSetupState = pickerData as PickerData & { setupAlreadyStarted: boolean };\r\n    const alreadyStarted = pdWithSetupState.setupAlreadyStarted;\r\n    const inputType = fieldState.config.inputTypeSpecs.inputType;\r\n    const l = this.log.fn('createPickerAdapters', { pickerData, fieldState, inputType, alreadyStarted });\r\n    if (alreadyStarted)\r\n      return l.rSilent(pickerData, 'exist, already started');\r\n    \r\n    pdWithSetupState.setupAlreadyStarted = true;\r\n\r\n    // First get the state, since the sources will depend on it.\r\n    const state = this.#getStateAdapter(fieldState.name, inputType, fieldState.settings as ConstructorParameters<typeof StateUiMapperBase>[1]);\r\n\r\n    const dataSourceType = (fieldState.settings() as FieldSettings & FieldSettingsPicker).dataSourceType;\r\n    const source = this.#getSourceAdapter(inputType, dataSourceType, state);\r\n\r\n    pickerData.setup(fieldState.name, fieldState.settings, state, source);\r\n\r\n    // l.end('ok', { state, source });\r\n\r\n    // Perform any post-init actions for the source - ATM only on Entity/Query\r\n    (pickerData.source as DataAdapterEntityBase)?.onAfterViewInit?.();\r\n    \r\n    return l.rSilent(pickerData);\r\n  }\r\n\r\n  #getStateAdapter(fieldName: string, inputType: Of<typeof InputTypeCatalog>, settings: ConstructorParameters<typeof StateUiMapperBase>[1]): StateAdapter {\r\n    const uiMapperType = partsMap[inputType]?.uiMapper as typeof StateUiMapperNoop;\r\n    if (!uiMapperType)\r\n      throw new Error(`No State Adapter found for inputTypeSpecs: ${inputType}`);\r\n\r\n    const stateAdapter = transient(StateAdapter, this.injector);\r\n    const uiMapper = new uiMapperType(fieldName, settings);\r\n    stateAdapter.setup(fieldName, uiMapper);\r\n    return stateAdapter;\r\n  }\r\n\r\n  #getSourceAdapter(inputType: Of<typeof InputTypeCatalog>, dataSourceType: string, state: StateAdapter): DataAdapterBase {\r\n    const l = this.log.fn('getSourceAdapter', { inputType, dataSourceType });\r\n    // Get config for allowed sources / adapters for the current inputType\r\n    const parts = partsMap[inputType];\r\n\r\n    // The config type is either the forced type (from defaults for old pickers) or the specified type\r\n    const dsType = parts.forcePickerConfig ?? dataSourceType;\r\n    l.a(`use config type`, { dataSourceType, forcePickerConfig: parts.forcePickerConfig, dsType });\r\n\r\n    const dataAdapterType = mapNameToDataAdapter[dsType] ?? DataAdapterEmpty;\r\n    this.#throwIfSourceAdapterNotAllowed(inputType, dataAdapterType);\r\n    const result = transient(dataAdapterType, this.injector).connectState(state);\r\n    return l.r(result);\r\n  }\r\n\r\n  #throwIfSourceAdapterNotAllowed(inputType: Of<typeof InputTypeCatalog>, dataSourceType: ProviderToken<unknown>): boolean {\r\n    // Empty is always allowed, as it's usually for errors / missing configs\r\n    if (dataSourceType === DataAdapterEmpty) return false;\r\n    if (partsMap[inputType]?.sources?.includes(dataSourceType)) return false;\r\n    throw new Error(`Specified SourceAdapter not allowed for inputTypeSpecs: ${inputType}: ${DataAdapterString}`);\r\n  }\r\n\r\n}\r\n\r\nconst mapNameToDataAdapter: Record<string, ProviderToken<DataAdapterBase>> = {\r\n  [PickerConfigs.UiPickerSourceCustomList]: DataAdapterString,\r\n  [PickerConfigs.UiPickerSourceCustomCsv]: DataAdapterString,\r\n  [PickerConfigs.UiPickerSourceCss]: DataAdapterCss,\r\n  [PickerConfigs.UiPickerSourceQuery]: DataAdapterQuery,\r\n  [PickerConfigs.UiPickerSourceEntity]: DataAdapterEntity,\r\n  [PickerConfigs.UiPickerSourceAppAssets]: DataAdapterAppAssets,\r\n};\r\n\r\n/**\r\n * Catalog of the parts to be used for each picker type.\r\n * This includes what data-sources and state-adapters to use.\r\n * For older pickers, a predefined source is used.\r\n */\r\nconst partsMap: Record<string, PartMap> = {\r\n  [InputTypeCatalog.StringPicker]: {\r\n    sources: [DataAdapterString, DataAdapterQuery, DataAdapterEntity, DataAdapterCss, DataAdapterAppAssets],\r\n    uiMapper: StateUiMapperStringArray,\r\n  },\r\n  [InputTypeCatalog.StringDropdown]: {\r\n    sources: [DataAdapterString],\r\n    uiMapper: StateUiMapperStringArray,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceCustomList,\r\n  },\r\n\r\n  [InputTypeCatalog.StringFontIconPicker]: {\r\n    sources: [DataAdapterCss],\r\n    uiMapper: StateUiMapperStringArray,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceCss,\r\n  },\r\n\r\n  [InputTypeCatalog.NumberDropdown]: {\r\n    sources: [DataAdapterString],\r\n    uiMapper: StateUiMapperNumberArray,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceCustomList,\r\n  },\r\n\r\n  [InputTypeCatalog.NumberPicker]: {\r\n    sources: [DataAdapterString, DataAdapterQuery, DataAdapterEntity],\r\n    uiMapper: StateUiMapperNumberArray,\r\n  },\r\n  [InputTypeCatalog.StringDropdownQuery]: {\r\n    sources: [DataAdapterQuery],\r\n    uiMapper: StateUiMapperStringArray,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceQuery,\r\n  },\r\n  [InputTypeCatalog.EntityDefault]: {\r\n    sources: [DataAdapterEntity],\r\n    uiMapper: StateUiMapperNoop,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceEntity,\r\n  },\r\n  [InputTypeCatalog.EntityQuery]: {\r\n    sources: [DataAdapterQuery],\r\n    uiMapper: StateUiMapperNoop,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceQuery,\r\n  },\r\n  [InputTypeCatalog.EntityContentBlocks]: {\r\n    sources: [DataAdapterEntity],\r\n    uiMapper: StateUiMapperNoop,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceEntity,\r\n  },\r\n  [InputTypeCatalog.EntityPicker]: {\r\n    sources: [DataAdapterEntity, DataAdapterQuery, DataAdapterString],\r\n    uiMapper: StateUiMapperNoop,\r\n  },\r\n};\r\n\r\ninterface PartMap {\r\n  /** The allowed source adapters for this input type */\r\n  sources: ProviderToken<unknown>[],\r\n\r\n  /** The UI mapper to convert between state and UI representations */\r\n  uiMapper: typeof StateUiMapperBase | typeof StateUiMapperStringArray | typeof StateUiMapperNumberArray,\r\n\r\n  /** Force some string-sources to assume no-configuration, since the config is in the classic metadata, not in a DataSource config */\r\n  forcePickerConfig?: Of<typeof PickerConfigs>,\r\n}\r\n","import { SelectionModel } from './_selection-model-chunk.mjs';\nimport { isObservable, Subject, BehaviorSubject, of, combineLatest, EMPTY, concat } from 'rxjs';\nimport { take, filter, takeUntil, startWith, tap, switchMap, map, reduce, concatMap, distinctUntilChanged } from 'rxjs/operators';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, inject, ViewContainerRef, Directive, TemplateRef, IterableDiffers, ChangeDetectorRef, ElementRef, Component, ViewEncapsulation, ChangeDetectionStrategy, Input, ViewChild, ContentChildren, EventEmitter, booleanAttribute, Output, numberAttribute, NgModule } from '@angular/core';\nimport { TREE_KEY_MANAGER } from './_tree-key-manager-chunk.mjs';\nimport { Directionality } from './_directionality-chunk.mjs';\nimport { isDataSource } from './_data-source-chunk.mjs';\nimport { coerceObservable } from './coercion-private.mjs';\nimport './_typeahead-chunk.mjs';\nimport './_keycodes-chunk.mjs';\n\nclass BaseTreeControl {\n  dataNodes;\n  expansionModel = new SelectionModel(true);\n  trackBy;\n  getLevel;\n  isExpandable;\n  getChildren;\n  toggle(dataNode) {\n    this.expansionModel.toggle(this._trackByValue(dataNode));\n  }\n  expand(dataNode) {\n    this.expansionModel.select(this._trackByValue(dataNode));\n  }\n  collapse(dataNode) {\n    this.expansionModel.deselect(this._trackByValue(dataNode));\n  }\n  isExpanded(dataNode) {\n    return this.expansionModel.isSelected(this._trackByValue(dataNode));\n  }\n  toggleDescendants(dataNode) {\n    this.expansionModel.isSelected(this._trackByValue(dataNode)) ? this.collapseDescendants(dataNode) : this.expandDescendants(dataNode);\n  }\n  collapseAll() {\n    this.expansionModel.clear();\n  }\n  expandDescendants(dataNode) {\n    let toBeProcessed = [dataNode];\n    toBeProcessed.push(...this.getDescendants(dataNode));\n    this.expansionModel.select(...toBeProcessed.map(value => this._trackByValue(value)));\n  }\n  collapseDescendants(dataNode) {\n    let toBeProcessed = [dataNode];\n    toBeProcessed.push(...this.getDescendants(dataNode));\n    this.expansionModel.deselect(...toBeProcessed.map(value => this._trackByValue(value)));\n  }\n  _trackByValue(value) {\n    return this.trackBy ? this.trackBy(value) : value;\n  }\n}\n\nclass FlatTreeControl extends BaseTreeControl {\n  getLevel;\n  isExpandable;\n  options;\n  constructor(getLevel, isExpandable, options) {\n    super();\n    this.getLevel = getLevel;\n    this.isExpandable = isExpandable;\n    this.options = options;\n    if (this.options) {\n      this.trackBy = this.options.trackBy;\n    }\n  }\n  getDescendants(dataNode) {\n    const startIndex = this.dataNodes.indexOf(dataNode);\n    const results = [];\n    for (let i = startIndex + 1; i < this.dataNodes.length && this.getLevel(dataNode) < this.getLevel(this.dataNodes[i]); i++) {\n      results.push(this.dataNodes[i]);\n    }\n    return results;\n  }\n  expandAll() {\n    this.expansionModel.select(...this.dataNodes.map(node => this._trackByValue(node)));\n  }\n}\n\nclass NestedTreeControl extends BaseTreeControl {\n  getChildren;\n  options;\n  constructor(getChildren, options) {\n    super();\n    this.getChildren = getChildren;\n    this.options = options;\n    if (this.options) {\n      this.trackBy = this.options.trackBy;\n    }\n    if (this.options?.isExpandable) {\n      this.isExpandable = this.options.isExpandable;\n    }\n  }\n  expandAll() {\n    this.expansionModel.clear();\n    const allNodes = this.dataNodes.reduce((accumulator, dataNode) => [...accumulator, ...this.getDescendants(dataNode), dataNode], []);\n    this.expansionModel.select(...allNodes.map(node => this._trackByValue(node)));\n  }\n  getDescendants(dataNode) {\n    const descendants = [];\n    this._getDescendants(descendants, dataNode);\n    return descendants.splice(1);\n  }\n  _getDescendants(descendants, dataNode) {\n    descendants.push(dataNode);\n    const childrenNodes = this.getChildren(dataNode);\n    if (Array.isArray(childrenNodes)) {\n      childrenNodes.forEach(child => this._getDescendants(descendants, child));\n    } else if (isObservable(childrenNodes)) {\n      childrenNodes.pipe(take(1), filter(Boolean)).subscribe(children => {\n        for (const child of children) {\n          this._getDescendants(descendants, child);\n        }\n      });\n    }\n  }\n}\n\nconst CDK_TREE_NODE_OUTLET_NODE = new InjectionToken('CDK_TREE_NODE_OUTLET_NODE');\nclass CdkTreeNodeOutlet {\n  viewContainer = inject(ViewContainerRef);\n  _node = inject(CDK_TREE_NODE_OUTLET_NODE, {\n    optional: true\n  });\n  constructor() {}\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTreeNodeOutlet,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: CdkTreeNodeOutlet,\n    isStandalone: true,\n    selector: \"[cdkTreeNodeOutlet]\",\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: CdkTreeNodeOutlet,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[cdkTreeNodeOutlet]'\n    }]\n  }],\n  ctorParameters: () => []\n});\n\nclass CdkTreeNodeOutletContext {\n  $implicit;\n  level;\n  index;\n  count;\n  constructor(data) {\n    this.$implicit = data;\n  }\n}\nclass CdkTreeNodeDef {\n  template = inject(TemplateRef);\n  when;\n  constructor() {}\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTreeNodeDef,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: CdkTreeNodeDef,\n    isStandalone: true,\n    selector: \"[cdkTreeNodeDef]\",\n    inputs: {\n      when: [\"cdkTreeNodeDefWhen\", \"when\"]\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: CdkTreeNodeDef,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[cdkTreeNodeDef]',\n      inputs: [{\n        name: 'when',\n        alias: 'cdkTreeNodeDefWhen'\n      }]\n    }]\n  }],\n  ctorParameters: () => []\n});\n\nfunction getTreeNoValidDataSourceError() {\n  return Error(`A valid data source must be provided.`);\n}\nfunction getTreeMultipleDefaultNodeDefsError() {\n  return Error(`There can only be one default row without a when predicate function.`);\n}\nfunction getTreeMissingMatchingNodeDefError() {\n  return Error(`Could not find a matching node definition for the provided node data.`);\n}\nfunction getTreeControlMissingError() {\n  return Error(`Could not find a tree control, levelAccessor, or childrenAccessor for the tree.`);\n}\nfunction getMultipleTreeControlsError() {\n  return Error(`More than one of tree control, levelAccessor, or childrenAccessor were provided.`);\n}\n\nclass CdkTree {\n  _differs = inject(IterableDiffers);\n  _changeDetectorRef = inject(ChangeDetectorRef);\n  _elementRef = inject(ElementRef);\n  _dir = inject(Directionality);\n  _onDestroy = new Subject();\n  _dataDiffer;\n  _defaultNodeDef;\n  _dataSubscription;\n  _levels = new Map();\n  _parents = new Map();\n  _ariaSets = new Map();\n  get dataSource() {\n    return this._dataSource;\n  }\n  set dataSource(dataSource) {\n    if (this._dataSource !== dataSource) {\n      this._switchDataSource(dataSource);\n    }\n  }\n  _dataSource;\n  treeControl;\n  levelAccessor;\n  childrenAccessor;\n  trackBy;\n  expansionKey;\n  _nodeOutlet;\n  _nodeDefs;\n  viewChange = new BehaviorSubject({\n    start: 0,\n    end: Number.MAX_VALUE\n  });\n  _expansionModel;\n  _flattenedNodes = new BehaviorSubject([]);\n  _nodeType = new BehaviorSubject(null);\n  _nodes = new BehaviorSubject(new Map());\n  _keyManagerNodes = new BehaviorSubject([]);\n  _keyManagerFactory = inject(TREE_KEY_MANAGER);\n  _keyManager;\n  _viewInit = false;\n  constructor() {}\n  ngAfterContentInit() {\n    this._initializeKeyManager();\n  }\n  ngAfterContentChecked() {\n    this._updateDefaultNodeDefinition();\n    this._subscribeToDataChanges();\n  }\n  ngOnDestroy() {\n    this._nodeOutlet.viewContainer.clear();\n    this._nodes.complete();\n    this._keyManagerNodes.complete();\n    this._nodeType.complete();\n    this._flattenedNodes.complete();\n    this.viewChange.complete();\n    this._onDestroy.next();\n    this._onDestroy.complete();\n    if (this._dataSource && typeof this._dataSource.disconnect === 'function') {\n      this.dataSource.disconnect(this);\n    }\n    if (this._dataSubscription) {\n      this._dataSubscription.unsubscribe();\n      this._dataSubscription = null;\n    }\n    this._keyManager?.destroy();\n  }\n  ngOnInit() {\n    this._checkTreeControlUsage();\n    this._initializeDataDiffer();\n  }\n  ngAfterViewInit() {\n    this._viewInit = true;\n  }\n  _updateDefaultNodeDefinition() {\n    const defaultNodeDefs = this._nodeDefs.filter(def => !def.when);\n    if (defaultNodeDefs.length > 1 && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw getTreeMultipleDefaultNodeDefsError();\n    }\n    this._defaultNodeDef = defaultNodeDefs[0];\n  }\n  _setNodeTypeIfUnset(newType) {\n    const currentType = this._nodeType.value;\n    if (currentType === null) {\n      this._nodeType.next(newType);\n    } else if ((typeof ngDevMode === 'undefined' || ngDevMode) && currentType !== newType) {\n      console.warn(`Tree is using conflicting node types which can cause unexpected behavior. ` + `Please use tree nodes of the same type (e.g. only flat or only nested). ` + `Current node type: \"${currentType}\", new node type \"${newType}\".`);\n    }\n  }\n  _switchDataSource(dataSource) {\n    if (this._dataSource && typeof this._dataSource.disconnect === 'function') {\n      this.dataSource.disconnect(this);\n    }\n    if (this._dataSubscription) {\n      this._dataSubscription.unsubscribe();\n      this._dataSubscription = null;\n    }\n    if (!dataSource) {\n      this._nodeOutlet.viewContainer.clear();\n    }\n    this._dataSource = dataSource;\n    if (this._nodeDefs) {\n      this._subscribeToDataChanges();\n    }\n  }\n  _getExpansionModel() {\n    if (!this.treeControl) {\n      this._expansionModel ??= new SelectionModel(true);\n      return this._expansionModel;\n    }\n    return this.treeControl.expansionModel;\n  }\n  _subscribeToDataChanges() {\n    if (this._dataSubscription) {\n      return;\n    }\n    let dataStream;\n    if (isDataSource(this._dataSource)) {\n      dataStream = this._dataSource.connect(this);\n    } else if (isObservable(this._dataSource)) {\n      dataStream = this._dataSource;\n    } else if (Array.isArray(this._dataSource)) {\n      dataStream = of(this._dataSource);\n    }\n    if (!dataStream) {\n      if (typeof ngDevMode === 'undefined' || ngDevMode) {\n        throw getTreeNoValidDataSourceError();\n      }\n      return;\n    }\n    this._dataSubscription = this._getRenderData(dataStream).pipe(takeUntil(this._onDestroy)).subscribe(renderingData => {\n      this._renderDataChanges(renderingData);\n    });\n  }\n  _getRenderData(dataStream) {\n    const expansionModel = this._getExpansionModel();\n    return combineLatest([dataStream, this._nodeType, expansionModel.changed.pipe(startWith(null), tap(expansionChanges => {\n      this._emitExpansionChanges(expansionChanges);\n    }))]).pipe(switchMap(([data, nodeType]) => {\n      if (nodeType === null) {\n        return of({\n          renderNodes: data,\n          flattenedNodes: null,\n          nodeType\n        });\n      }\n      return this._computeRenderingData(data, nodeType).pipe(map(convertedData => ({\n        ...convertedData,\n        nodeType\n      })));\n    }));\n  }\n  _renderDataChanges(data) {\n    if (data.nodeType === null) {\n      this.renderNodeChanges(data.renderNodes);\n      return;\n    }\n    this._updateCachedData(data.flattenedNodes);\n    this.renderNodeChanges(data.renderNodes);\n    this._updateKeyManagerItems(data.flattenedNodes);\n  }\n  _emitExpansionChanges(expansionChanges) {\n    if (!expansionChanges) {\n      return;\n    }\n    const nodes = this._nodes.value;\n    for (const added of expansionChanges.added) {\n      const node = nodes.get(added);\n      node?._emitExpansionState(true);\n    }\n    for (const removed of expansionChanges.removed) {\n      const node = nodes.get(removed);\n      node?._emitExpansionState(false);\n    }\n  }\n  _initializeKeyManager() {\n    const items = combineLatest([this._keyManagerNodes, this._nodes]).pipe(map(([keyManagerNodes, renderNodes]) => keyManagerNodes.reduce((items, data) => {\n      const node = renderNodes.get(this._getExpansionKey(data));\n      if (node) {\n        items.push(node);\n      }\n      return items;\n    }, [])));\n    const keyManagerOptions = {\n      trackBy: node => this._getExpansionKey(node.data),\n      skipPredicate: node => !!node.isDisabled,\n      typeAheadDebounceInterval: true,\n      horizontalOrientation: this._dir.value\n    };\n    this._keyManager = this._keyManagerFactory(items, keyManagerOptions);\n  }\n  _initializeDataDiffer() {\n    const trackBy = this.trackBy ?? ((_index, item) => this._getExpansionKey(item));\n    this._dataDiffer = this._differs.find([]).create(trackBy);\n  }\n  _checkTreeControlUsage() {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      let numTreeControls = 0;\n      if (this.treeControl) {\n        numTreeControls++;\n      }\n      if (this.levelAccessor) {\n        numTreeControls++;\n      }\n      if (this.childrenAccessor) {\n        numTreeControls++;\n      }\n      if (!numTreeControls) {\n        throw getTreeControlMissingError();\n      } else if (numTreeControls > 1) {\n        throw getMultipleTreeControlsError();\n      }\n    }\n  }\n  renderNodeChanges(data, dataDiffer = this._dataDiffer, viewContainer = this._nodeOutlet.viewContainer, parentData) {\n    const changes = dataDiffer.diff(data);\n    if (!changes && !this._viewInit) {\n      return;\n    }\n    changes?.forEachOperation((item, adjustedPreviousIndex, currentIndex) => {\n      if (item.previousIndex == null) {\n        this.insertNode(data[currentIndex], currentIndex, viewContainer, parentData);\n      } else if (currentIndex == null) {\n        viewContainer.remove(adjustedPreviousIndex);\n      } else {\n        const view = viewContainer.get(adjustedPreviousIndex);\n        viewContainer.move(view, currentIndex);\n      }\n    });\n    changes?.forEachIdentityChange(record => {\n      const newData = record.item;\n      if (record.currentIndex != undefined) {\n        const view = viewContainer.get(record.currentIndex);\n        view.context.$implicit = newData;\n      }\n    });\n    if (parentData) {\n      this._changeDetectorRef.markForCheck();\n    } else {\n      this._changeDetectorRef.detectChanges();\n    }\n  }\n  _getNodeDef(data, i) {\n    if (this._nodeDefs.length === 1) {\n      return this._nodeDefs.first;\n    }\n    const nodeDef = this._nodeDefs.find(def => def.when && def.when(i, data)) || this._defaultNodeDef;\n    if (!nodeDef && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw getTreeMissingMatchingNodeDefError();\n    }\n    return nodeDef;\n  }\n  insertNode(nodeData, index, viewContainer, parentData) {\n    const levelAccessor = this._getLevelAccessor();\n    const node = this._getNodeDef(nodeData, index);\n    const key = this._getExpansionKey(nodeData);\n    const context = new CdkTreeNodeOutletContext(nodeData);\n    context.index = index;\n    parentData ??= this._parents.get(key) ?? undefined;\n    if (levelAccessor) {\n      context.level = levelAccessor(nodeData);\n    } else if (parentData !== undefined && this._levels.has(this._getExpansionKey(parentData))) {\n      context.level = this._levels.get(this._getExpansionKey(parentData)) + 1;\n    } else {\n      context.level = 0;\n    }\n    this._levels.set(key, context.level);\n    const container = viewContainer ? viewContainer : this._nodeOutlet.viewContainer;\n    container.createEmbeddedView(node.template, context, index);\n    if (CdkTreeNode.mostRecentTreeNode) {\n      CdkTreeNode.mostRecentTreeNode.data = nodeData;\n    }\n  }\n  isExpanded(dataNode) {\n    return !!(this.treeControl?.isExpanded(dataNode) || this._expansionModel?.isSelected(this._getExpansionKey(dataNode)));\n  }\n  toggle(dataNode) {\n    if (this.treeControl) {\n      this.treeControl.toggle(dataNode);\n    } else if (this._expansionModel) {\n      this._expansionModel.toggle(this._getExpansionKey(dataNode));\n    }\n  }\n  expand(dataNode) {\n    if (this.treeControl) {\n      this.treeControl.expand(dataNode);\n    } else if (this._expansionModel) {\n      this._expansionModel.select(this._getExpansionKey(dataNode));\n    }\n  }\n  collapse(dataNode) {\n    if (this.treeControl) {\n      this.treeControl.collapse(dataNode);\n    } else if (this._expansionModel) {\n      this._expansionModel.deselect(this._getExpansionKey(dataNode));\n    }\n  }\n  toggleDescendants(dataNode) {\n    if (this.treeControl) {\n      this.treeControl.toggleDescendants(dataNode);\n    } else if (this._expansionModel) {\n      if (this.isExpanded(dataNode)) {\n        this.collapseDescendants(dataNode);\n      } else {\n        this.expandDescendants(dataNode);\n      }\n    }\n  }\n  expandDescendants(dataNode) {\n    if (this.treeControl) {\n      this.treeControl.expandDescendants(dataNode);\n    } else if (this._expansionModel) {\n      const expansionModel = this._expansionModel;\n      expansionModel.select(this._getExpansionKey(dataNode));\n      this._getDescendants(dataNode).pipe(take(1), takeUntil(this._onDestroy)).subscribe(children => {\n        expansionModel.select(...children.map(child => this._getExpansionKey(child)));\n      });\n    }\n  }\n  collapseDescendants(dataNode) {\n    if (this.treeControl) {\n      this.treeControl.collapseDescendants(dataNode);\n    } else if (this._expansionModel) {\n      const expansionModel = this._expansionModel;\n      expansionModel.deselect(this._getExpansionKey(dataNode));\n      this._getDescendants(dataNode).pipe(take(1), takeUntil(this._onDestroy)).subscribe(children => {\n        expansionModel.deselect(...children.map(child => this._getExpansionKey(child)));\n      });\n    }\n  }\n  expandAll() {\n    if (this.treeControl) {\n      this.treeControl.expandAll();\n    } else if (this._expansionModel) {\n      this._forEachExpansionKey(keys => this._expansionModel?.select(...keys));\n    }\n  }\n  collapseAll() {\n    if (this.treeControl) {\n      this.treeControl.collapseAll();\n    } else if (this._expansionModel) {\n      this._forEachExpansionKey(keys => this._expansionModel?.deselect(...keys));\n    }\n  }\n  _getLevelAccessor() {\n    return this.treeControl?.getLevel?.bind(this.treeControl) ?? this.levelAccessor;\n  }\n  _getChildrenAccessor() {\n    return this.treeControl?.getChildren?.bind(this.treeControl) ?? this.childrenAccessor;\n  }\n  _getDirectChildren(dataNode) {\n    const levelAccessor = this._getLevelAccessor();\n    const expansionModel = this._expansionModel ?? this.treeControl?.expansionModel;\n    if (!expansionModel) {\n      return of([]);\n    }\n    const key = this._getExpansionKey(dataNode);\n    const isExpanded = expansionModel.changed.pipe(switchMap(changes => {\n      if (changes.added.includes(key)) {\n        return of(true);\n      } else if (changes.removed.includes(key)) {\n        return of(false);\n      }\n      return EMPTY;\n    }), startWith(this.isExpanded(dataNode)));\n    if (levelAccessor) {\n      return combineLatest([isExpanded, this._flattenedNodes]).pipe(map(([expanded, flattenedNodes]) => {\n        if (!expanded) {\n          return [];\n        }\n        return this._findChildrenByLevel(levelAccessor, flattenedNodes, dataNode, 1);\n      }));\n    }\n    const childrenAccessor = this._getChildrenAccessor();\n    if (childrenAccessor) {\n      return coerceObservable(childrenAccessor(dataNode) ?? []);\n    }\n    throw getTreeControlMissingError();\n  }\n  _findChildrenByLevel(levelAccessor, flattenedNodes, dataNode, levelDelta) {\n    const key = this._getExpansionKey(dataNode);\n    const startIndex = flattenedNodes.findIndex(node => this._getExpansionKey(node) === key);\n    const dataNodeLevel = levelAccessor(dataNode);\n    const expectedLevel = dataNodeLevel + levelDelta;\n    const results = [];\n    for (let i = startIndex + 1; i < flattenedNodes.length; i++) {\n      const currentLevel = levelAccessor(flattenedNodes[i]);\n      if (currentLevel <= dataNodeLevel) {\n        break;\n      }\n      if (currentLevel <= expectedLevel) {\n        results.push(flattenedNodes[i]);\n      }\n    }\n    return results;\n  }\n  _registerNode(node) {\n    this._nodes.value.set(this._getExpansionKey(node.data), node);\n    this._nodes.next(this._nodes.value);\n  }\n  _unregisterNode(node) {\n    this._nodes.value.delete(this._getExpansionKey(node.data));\n    this._nodes.next(this._nodes.value);\n  }\n  _getLevel(node) {\n    return this._levels.get(this._getExpansionKey(node));\n  }\n  _getSetSize(dataNode) {\n    const set = this._getAriaSet(dataNode);\n    return set.length;\n  }\n  _getPositionInSet(dataNode) {\n    const set = this._getAriaSet(dataNode);\n    const key = this._getExpansionKey(dataNode);\n    return set.findIndex(node => this._getExpansionKey(node) === key) + 1;\n  }\n  _getNodeParent(node) {\n    const parent = this._parents.get(this._getExpansionKey(node.data));\n    return parent && this._nodes.value.get(this._getExpansionKey(parent));\n  }\n  _getNodeChildren(node) {\n    return this._getDirectChildren(node.data).pipe(map(children => children.reduce((nodes, child) => {\n      const value = this._nodes.value.get(this._getExpansionKey(child));\n      if (value) {\n        nodes.push(value);\n      }\n      return nodes;\n    }, [])));\n  }\n  _sendKeydownToKeyManager(event) {\n    if (event.target === this._elementRef.nativeElement) {\n      this._keyManager.onKeydown(event);\n    } else {\n      const nodes = this._nodes.getValue();\n      for (const [, node] of nodes) {\n        if (event.target === node._elementRef.nativeElement) {\n          this._keyManager.onKeydown(event);\n          break;\n        }\n      }\n    }\n  }\n  _getDescendants(dataNode) {\n    if (this.treeControl) {\n      return of(this.treeControl.getDescendants(dataNode));\n    }\n    if (this.levelAccessor) {\n      const results = this._findChildrenByLevel(this.levelAccessor, this._flattenedNodes.value, dataNode, Infinity);\n      return of(results);\n    }\n    if (this.childrenAccessor) {\n      return this._getAllChildrenRecursively(dataNode).pipe(reduce((allChildren, nextChildren) => {\n        allChildren.push(...nextChildren);\n        return allChildren;\n      }, []));\n    }\n    throw getTreeControlMissingError();\n  }\n  _getAllChildrenRecursively(dataNode) {\n    if (!this.childrenAccessor) {\n      return of([]);\n    }\n    return coerceObservable(this.childrenAccessor(dataNode)).pipe(take(1), switchMap(children => {\n      for (const child of children) {\n        this._parents.set(this._getExpansionKey(child), dataNode);\n      }\n      return of(...children).pipe(concatMap(child => concat(of([child]), this._getAllChildrenRecursively(child))));\n    }));\n  }\n  _getExpansionKey(dataNode) {\n    return this.expansionKey?.(dataNode) ?? dataNode;\n  }\n  _getAriaSet(node) {\n    const key = this._getExpansionKey(node);\n    const parent = this._parents.get(key);\n    const parentKey = parent ? this._getExpansionKey(parent) : null;\n    const set = this._ariaSets.get(parentKey);\n    return set ?? [node];\n  }\n  _findParentForNode(node, index, cachedNodes) {\n    if (!cachedNodes.length) {\n      return null;\n    }\n    const currentLevel = this._levels.get(this._getExpansionKey(node)) ?? 0;\n    for (let parentIndex = index - 1; parentIndex >= 0; parentIndex--) {\n      const parentNode = cachedNodes[parentIndex];\n      const parentLevel = this._levels.get(this._getExpansionKey(parentNode)) ?? 0;\n      if (parentLevel < currentLevel) {\n        return parentNode;\n      }\n    }\n    return null;\n  }\n  _flattenNestedNodesWithExpansion(nodes, level = 0) {\n    const childrenAccessor = this._getChildrenAccessor();\n    if (!childrenAccessor) {\n      return of([...nodes]);\n    }\n    return of(...nodes).pipe(concatMap(node => {\n      const parentKey = this._getExpansionKey(node);\n      if (!this._parents.has(parentKey)) {\n        this._parents.set(parentKey, null);\n      }\n      this._levels.set(parentKey, level);\n      const children = coerceObservable(childrenAccessor(node));\n      return concat(of([node]), children.pipe(take(1), tap(childNodes => {\n        this._ariaSets.set(parentKey, [...(childNodes ?? [])]);\n        for (const child of childNodes ?? []) {\n          const childKey = this._getExpansionKey(child);\n          this._parents.set(childKey, node);\n          this._levels.set(childKey, level + 1);\n        }\n      }), switchMap(childNodes => {\n        if (!childNodes) {\n          return of([]);\n        }\n        return this._flattenNestedNodesWithExpansion(childNodes, level + 1).pipe(map(nestedNodes => this.isExpanded(node) ? nestedNodes : []));\n      })));\n    }), reduce((results, children) => {\n      results.push(...children);\n      return results;\n    }, []));\n  }\n  _computeRenderingData(nodes, nodeType) {\n    if (this.childrenAccessor && nodeType === 'flat') {\n      this._clearPreviousCache();\n      this._ariaSets.set(null, [...nodes]);\n      return this._flattenNestedNodesWithExpansion(nodes).pipe(map(flattenedNodes => ({\n        renderNodes: flattenedNodes,\n        flattenedNodes\n      })));\n    } else if (this.levelAccessor && nodeType === 'nested') {\n      const levelAccessor = this.levelAccessor;\n      return of(nodes.filter(node => levelAccessor(node) === 0)).pipe(map(rootNodes => ({\n        renderNodes: rootNodes,\n        flattenedNodes: nodes\n      })), tap(({\n        flattenedNodes\n      }) => {\n        this._calculateParents(flattenedNodes);\n      }));\n    } else if (nodeType === 'flat') {\n      return of({\n        renderNodes: nodes,\n        flattenedNodes: nodes\n      }).pipe(tap(({\n        flattenedNodes\n      }) => {\n        this._calculateParents(flattenedNodes);\n      }));\n    } else {\n      this._clearPreviousCache();\n      this._ariaSets.set(null, [...nodes]);\n      return this._flattenNestedNodesWithExpansion(nodes).pipe(map(flattenedNodes => ({\n        renderNodes: nodes,\n        flattenedNodes\n      })));\n    }\n  }\n  _updateCachedData(flattenedNodes) {\n    this._flattenedNodes.next(flattenedNodes);\n  }\n  _updateKeyManagerItems(flattenedNodes) {\n    this._keyManagerNodes.next(flattenedNodes);\n  }\n  _calculateParents(flattenedNodes) {\n    const levelAccessor = this._getLevelAccessor();\n    if (!levelAccessor) {\n      return;\n    }\n    this._clearPreviousCache();\n    for (let index = 0; index < flattenedNodes.length; index++) {\n      const dataNode = flattenedNodes[index];\n      const key = this._getExpansionKey(dataNode);\n      this._levels.set(key, levelAccessor(dataNode));\n      const parent = this._findParentForNode(dataNode, index, flattenedNodes);\n      this._parents.set(key, parent);\n      const parentKey = parent ? this._getExpansionKey(parent) : null;\n      const group = this._ariaSets.get(parentKey) ?? [];\n      group.splice(index, 0, dataNode);\n      this._ariaSets.set(parentKey, group);\n    }\n  }\n  _forEachExpansionKey(callback) {\n    const toToggle = [];\n    const observables = [];\n    this._nodes.value.forEach(node => {\n      toToggle.push(this._getExpansionKey(node.data));\n      observables.push(this._getDescendants(node.data));\n    });\n    if (observables.length > 0) {\n      combineLatest(observables).pipe(take(1), takeUntil(this._onDestroy)).subscribe(results => {\n        results.forEach(inner => inner.forEach(r => toToggle.push(this._getExpansionKey(r))));\n        callback(toToggle);\n      });\n    } else {\n      callback(toToggle);\n    }\n  }\n  _clearPreviousCache() {\n    this._parents.clear();\n    this._levels.clear();\n    this._ariaSets.clear();\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTree,\n    deps: [],\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: CdkTree,\n    isStandalone: true,\n    selector: \"cdk-tree\",\n    inputs: {\n      dataSource: \"dataSource\",\n      treeControl: \"treeControl\",\n      levelAccessor: \"levelAccessor\",\n      childrenAccessor: \"childrenAccessor\",\n      trackBy: \"trackBy\",\n      expansionKey: \"expansionKey\"\n    },\n    host: {\n      attributes: {\n        \"role\": \"tree\"\n      },\n      listeners: {\n        \"keydown\": \"_sendKeydownToKeyManager($event)\"\n      },\n      classAttribute: \"cdk-tree\"\n    },\n    queries: [{\n      propertyName: \"_nodeDefs\",\n      predicate: CdkTreeNodeDef,\n      descendants: true\n    }],\n    viewQueries: [{\n      propertyName: \"_nodeOutlet\",\n      first: true,\n      predicate: CdkTreeNodeOutlet,\n      descendants: true,\n      static: true\n    }],\n    exportAs: [\"cdkTree\"],\n    ngImport: i0,\n    template: `<ng-container cdkTreeNodeOutlet></ng-container>`,\n    isInline: true,\n    dependencies: [{\n      kind: \"directive\",\n      type: CdkTreeNodeOutlet,\n      selector: \"[cdkTreeNodeOutlet]\"\n    }],\n    changeDetection: i0.ChangeDetectionStrategy.Default,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: CdkTree,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'cdk-tree',\n      exportAs: 'cdkTree',\n      template: `<ng-container cdkTreeNodeOutlet></ng-container>`,\n      host: {\n        'class': 'cdk-tree',\n        'role': 'tree',\n        '(keydown)': '_sendKeydownToKeyManager($event)'\n      },\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.Default,\n      imports: [CdkTreeNodeOutlet]\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    dataSource: [{\n      type: Input\n    }],\n    treeControl: [{\n      type: Input\n    }],\n    levelAccessor: [{\n      type: Input\n    }],\n    childrenAccessor: [{\n      type: Input\n    }],\n    trackBy: [{\n      type: Input\n    }],\n    expansionKey: [{\n      type: Input\n    }],\n    _nodeOutlet: [{\n      type: ViewChild,\n      args: [CdkTreeNodeOutlet, {\n        static: true\n      }]\n    }],\n    _nodeDefs: [{\n      type: ContentChildren,\n      args: [CdkTreeNodeDef, {\n        descendants: true\n      }]\n    }]\n  }\n});\nclass CdkTreeNode {\n  _elementRef = inject(ElementRef);\n  _tree = inject(CdkTree);\n  _tabindex = -1;\n  _type = 'flat';\n  get role() {\n    return 'treeitem';\n  }\n  set role(_role) {}\n  get isExpandable() {\n    return this._isExpandable();\n  }\n  set isExpandable(isExpandable) {\n    this._inputIsExpandable = isExpandable;\n    if (this.data && !this._isExpandable || !this._inputIsExpandable) {\n      return;\n    }\n    if (this._inputIsExpanded) {\n      this.expand();\n    } else if (this._inputIsExpanded === false) {\n      this.collapse();\n    }\n  }\n  get isExpanded() {\n    return this._tree.isExpanded(this._data);\n  }\n  set isExpanded(isExpanded) {\n    this._inputIsExpanded = isExpanded;\n    if (isExpanded) {\n      this.expand();\n    } else {\n      this.collapse();\n    }\n  }\n  isDisabled;\n  typeaheadLabel;\n  getLabel() {\n    return this.typeaheadLabel || this._elementRef.nativeElement.textContent?.trim() || '';\n  }\n  activation = new EventEmitter();\n  expandedChange = new EventEmitter();\n  static mostRecentTreeNode = null;\n  _destroyed = new Subject();\n  _dataChanges = new Subject();\n  _inputIsExpandable = false;\n  _inputIsExpanded = undefined;\n  _shouldFocus = true;\n  _parentNodeAriaLevel;\n  get data() {\n    return this._data;\n  }\n  set data(value) {\n    if (value !== this._data) {\n      this._data = value;\n      this._dataChanges.next();\n    }\n  }\n  _data;\n  get isLeafNode() {\n    if (this._tree.treeControl?.isExpandable !== undefined && !this._tree.treeControl.isExpandable(this._data)) {\n      return true;\n    } else if (this._tree.treeControl?.isExpandable === undefined && this._tree.treeControl?.getDescendants(this._data).length === 0) {\n      return true;\n    }\n    return false;\n  }\n  get level() {\n    return this._tree._getLevel(this._data) ?? this._parentNodeAriaLevel;\n  }\n  _isExpandable() {\n    if (this._tree.treeControl) {\n      if (this.isLeafNode) {\n        return false;\n      }\n      return true;\n    }\n    return this._inputIsExpandable;\n  }\n  _getAriaExpanded() {\n    if (!this._isExpandable()) {\n      return null;\n    }\n    return String(this.isExpanded);\n  }\n  _getSetSize() {\n    return this._tree._getSetSize(this._data);\n  }\n  _getPositionInSet() {\n    return this._tree._getPositionInSet(this._data);\n  }\n  _changeDetectorRef = inject(ChangeDetectorRef);\n  constructor() {\n    CdkTreeNode.mostRecentTreeNode = this;\n  }\n  ngOnInit() {\n    this._parentNodeAriaLevel = getParentNodeAriaLevel(this._elementRef.nativeElement);\n    this._tree._getExpansionModel().changed.pipe(map(() => this.isExpanded), distinctUntilChanged(), takeUntil(this._destroyed)).pipe(takeUntil(this._destroyed)).subscribe(() => this._changeDetectorRef.markForCheck());\n    this._tree._setNodeTypeIfUnset(this._type);\n    this._tree._registerNode(this);\n  }\n  ngOnDestroy() {\n    if (CdkTreeNode.mostRecentTreeNode === this) {\n      CdkTreeNode.mostRecentTreeNode = null;\n    }\n    this._dataChanges.complete();\n    this._destroyed.next();\n    this._destroyed.complete();\n  }\n  getParent() {\n    return this._tree._getNodeParent(this) ?? null;\n  }\n  getChildren() {\n    return this._tree._getNodeChildren(this);\n  }\n  focus() {\n    this._tabindex = 0;\n    if (this._shouldFocus) {\n      this._elementRef.nativeElement.focus();\n    }\n    this._changeDetectorRef.markForCheck();\n  }\n  unfocus() {\n    this._tabindex = -1;\n    this._changeDetectorRef.markForCheck();\n  }\n  activate() {\n    if (this.isDisabled) {\n      return;\n    }\n    this.activation.next(this._data);\n  }\n  collapse() {\n    if (this.isExpandable) {\n      this._tree.collapse(this._data);\n    }\n  }\n  expand() {\n    if (this.isExpandable) {\n      this._tree.expand(this._data);\n    }\n  }\n  makeFocusable() {\n    this._tabindex = 0;\n    this._changeDetectorRef.markForCheck();\n  }\n  _focusItem() {\n    if (this.isDisabled) {\n      return;\n    }\n    this._tree._keyManager.focusItem(this);\n  }\n  _setActiveItem() {\n    if (this.isDisabled) {\n      return;\n    }\n    this._shouldFocus = false;\n    this._tree._keyManager.focusItem(this);\n    this._shouldFocus = true;\n  }\n  _emitExpansionState(expanded) {\n    this.expandedChange.emit(expanded);\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTreeNode,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"16.1.0\",\n    version: \"21.0.3\",\n    type: CdkTreeNode,\n    isStandalone: true,\n    selector: \"cdk-tree-node\",\n    inputs: {\n      role: \"role\",\n      isExpandable: [\"isExpandable\", \"isExpandable\", booleanAttribute],\n      isExpanded: \"isExpanded\",\n      isDisabled: [\"isDisabled\", \"isDisabled\", booleanAttribute],\n      typeaheadLabel: [\"cdkTreeNodeTypeaheadLabel\", \"typeaheadLabel\"]\n    },\n    outputs: {\n      activation: \"activation\",\n      expandedChange: \"expandedChange\"\n    },\n    host: {\n      attributes: {\n        \"role\": \"treeitem\"\n      },\n      listeners: {\n        \"click\": \"_setActiveItem()\",\n        \"focus\": \"_focusItem()\"\n      },\n      properties: {\n        \"attr.aria-expanded\": \"_getAriaExpanded()\",\n        \"attr.aria-level\": \"level + 1\",\n        \"attr.aria-posinset\": \"_getPositionInSet()\",\n        \"attr.aria-setsize\": \"_getSetSize()\",\n        \"tabindex\": \"_tabindex\"\n      },\n      classAttribute: \"cdk-tree-node\"\n    },\n    exportAs: [\"cdkTreeNode\"],\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: CdkTreeNode,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'cdk-tree-node',\n      exportAs: 'cdkTreeNode',\n      host: {\n        'class': 'cdk-tree-node',\n        '[attr.aria-expanded]': '_getAriaExpanded()',\n        '[attr.aria-level]': 'level + 1',\n        '[attr.aria-posinset]': '_getPositionInSet()',\n        '[attr.aria-setsize]': '_getSetSize()',\n        '[tabindex]': '_tabindex',\n        'role': 'treeitem',\n        '(click)': '_setActiveItem()',\n        '(focus)': '_focusItem()'\n      }\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    role: [{\n      type: Input\n    }],\n    isExpandable: [{\n      type: Input,\n      args: [{\n        transform: booleanAttribute\n      }]\n    }],\n    isExpanded: [{\n      type: Input\n    }],\n    isDisabled: [{\n      type: Input,\n      args: [{\n        transform: booleanAttribute\n      }]\n    }],\n    typeaheadLabel: [{\n      type: Input,\n      args: ['cdkTreeNodeTypeaheadLabel']\n    }],\n    activation: [{\n      type: Output\n    }],\n    expandedChange: [{\n      type: Output\n    }]\n  }\n});\nfunction getParentNodeAriaLevel(nodeElement) {\n  let parent = nodeElement.parentElement;\n  while (parent && !isNodeElement(parent)) {\n    parent = parent.parentElement;\n  }\n  if (!parent) {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      throw Error('Incorrect tree structure containing detached node.');\n    } else {\n      return -1;\n    }\n  } else if (parent.classList.contains('cdk-nested-tree-node')) {\n    return numberAttribute(parent.getAttribute('aria-level'));\n  } else {\n    return 0;\n  }\n}\nfunction isNodeElement(element) {\n  const classList = element.classList;\n  return !!(classList?.contains('cdk-nested-tree-node') || classList?.contains('cdk-tree'));\n}\n\nclass CdkNestedTreeNode extends CdkTreeNode {\n  _type = 'nested';\n  _differs = inject(IterableDiffers);\n  _dataDiffer;\n  _children;\n  nodeOutlet;\n  constructor() {\n    super();\n  }\n  ngAfterContentInit() {\n    this._dataDiffer = this._differs.find([]).create(this._tree.trackBy);\n    this._tree._getDirectChildren(this.data).pipe(takeUntil(this._destroyed)).subscribe(result => this.updateChildrenNodes(result));\n    this.nodeOutlet.changes.pipe(takeUntil(this._destroyed)).subscribe(() => this.updateChildrenNodes());\n  }\n  ngOnDestroy() {\n    this._clear();\n    super.ngOnDestroy();\n  }\n  updateChildrenNodes(children) {\n    const outlet = this._getNodeOutlet();\n    if (children) {\n      this._children = children;\n    }\n    if (outlet && this._children) {\n      const viewContainer = outlet.viewContainer;\n      this._tree.renderNodeChanges(this._children, this._dataDiffer, viewContainer, this._data);\n    } else {\n      this._dataDiffer.diff([]);\n    }\n  }\n  _clear() {\n    const outlet = this._getNodeOutlet();\n    if (outlet) {\n      outlet.viewContainer.clear();\n      this._dataDiffer.diff([]);\n    }\n  }\n  _getNodeOutlet() {\n    const outlets = this.nodeOutlet;\n    return outlets && outlets.find(outlet => !outlet._node || outlet._node === this);\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkNestedTreeNode,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: CdkNestedTreeNode,\n    isStandalone: true,\n    selector: \"cdk-nested-tree-node\",\n    host: {\n      classAttribute: \"cdk-nested-tree-node\"\n    },\n    providers: [{\n      provide: CdkTreeNode,\n      useExisting: CdkNestedTreeNode\n    }, {\n      provide: CDK_TREE_NODE_OUTLET_NODE,\n      useExisting: CdkNestedTreeNode\n    }],\n    queries: [{\n      propertyName: \"nodeOutlet\",\n      predicate: CdkTreeNodeOutlet,\n      descendants: true\n    }],\n    exportAs: [\"cdkNestedTreeNode\"],\n    usesInheritance: true,\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: CdkNestedTreeNode,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'cdk-nested-tree-node',\n      exportAs: 'cdkNestedTreeNode',\n      providers: [{\n        provide: CdkTreeNode,\n        useExisting: CdkNestedTreeNode\n      }, {\n        provide: CDK_TREE_NODE_OUTLET_NODE,\n        useExisting: CdkNestedTreeNode\n      }],\n      host: {\n        'class': 'cdk-nested-tree-node'\n      }\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    nodeOutlet: [{\n      type: ContentChildren,\n      args: [CdkTreeNodeOutlet, {\n        descendants: true\n      }]\n    }]\n  }\n});\n\nconst cssUnitPattern = /([A-Za-z%]+)$/;\nclass CdkTreeNodePadding {\n  _treeNode = inject(CdkTreeNode);\n  _tree = inject(CdkTree);\n  _element = inject(ElementRef);\n  _dir = inject(Directionality, {\n    optional: true\n  });\n  _currentPadding;\n  _destroyed = new Subject();\n  indentUnits = 'px';\n  get level() {\n    return this._level;\n  }\n  set level(value) {\n    this._setLevelInput(value);\n  }\n  _level;\n  get indent() {\n    return this._indent;\n  }\n  set indent(indent) {\n    this._setIndentInput(indent);\n  }\n  _indent = 40;\n  constructor() {\n    this._setPadding();\n    this._dir?.change.pipe(takeUntil(this._destroyed)).subscribe(() => this._setPadding(true));\n    this._treeNode._dataChanges.subscribe(() => this._setPadding());\n  }\n  ngOnDestroy() {\n    this._destroyed.next();\n    this._destroyed.complete();\n  }\n  _paddingIndent() {\n    const nodeLevel = (this._treeNode.data && this._tree._getLevel(this._treeNode.data)) ?? null;\n    const level = this._level == null ? nodeLevel : this._level;\n    return typeof level === 'number' ? `${level * this._indent}${this.indentUnits}` : null;\n  }\n  _setPadding(forceChange = false) {\n    const padding = this._paddingIndent();\n    if (padding !== this._currentPadding || forceChange) {\n      const element = this._element.nativeElement;\n      const paddingProp = this._dir && this._dir.value === 'rtl' ? 'paddingRight' : 'paddingLeft';\n      const resetProp = paddingProp === 'paddingLeft' ? 'paddingRight' : 'paddingLeft';\n      element.style[paddingProp] = padding || '';\n      element.style[resetProp] = '';\n      this._currentPadding = padding;\n    }\n  }\n  _setLevelInput(value) {\n    this._level = isNaN(value) ? null : value;\n    this._setPadding();\n  }\n  _setIndentInput(indent) {\n    let value = indent;\n    let units = 'px';\n    if (typeof indent === 'string') {\n      const parts = indent.split(cssUnitPattern);\n      value = parts[0];\n      units = parts[1] || units;\n    }\n    this.indentUnits = units;\n    this._indent = numberAttribute(value);\n    this._setPadding();\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTreeNodePadding,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"16.1.0\",\n    version: \"21.0.3\",\n    type: CdkTreeNodePadding,\n    isStandalone: true,\n    selector: \"[cdkTreeNodePadding]\",\n    inputs: {\n      level: [\"cdkTreeNodePadding\", \"level\", numberAttribute],\n      indent: [\"cdkTreeNodePaddingIndent\", \"indent\"]\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: CdkTreeNodePadding,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[cdkTreeNodePadding]'\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    level: [{\n      type: Input,\n      args: [{\n        alias: 'cdkTreeNodePadding',\n        transform: numberAttribute\n      }]\n    }],\n    indent: [{\n      type: Input,\n      args: ['cdkTreeNodePaddingIndent']\n    }]\n  }\n});\n\nclass CdkTreeNodeToggle {\n  _tree = inject(CdkTree);\n  _treeNode = inject(CdkTreeNode);\n  recursive = false;\n  constructor() {}\n  _toggle() {\n    this.recursive ? this._tree.toggleDescendants(this._treeNode.data) : this._tree.toggle(this._treeNode.data);\n    this._tree._keyManager.focusItem(this._treeNode);\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTreeNodeToggle,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"16.1.0\",\n    version: \"21.0.3\",\n    type: CdkTreeNodeToggle,\n    isStandalone: true,\n    selector: \"[cdkTreeNodeToggle]\",\n    inputs: {\n      recursive: [\"cdkTreeNodeToggleRecursive\", \"recursive\", booleanAttribute]\n    },\n    host: {\n      attributes: {\n        \"tabindex\": \"-1\"\n      },\n      listeners: {\n        \"click\": \"_toggle(); $event.stopPropagation();\",\n        \"keydown.Enter\": \"_toggle(); $event.preventDefault();\",\n        \"keydown.Space\": \"_toggle(); $event.preventDefault();\"\n      }\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: CdkTreeNodeToggle,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[cdkTreeNodeToggle]',\n      host: {\n        '(click)': '_toggle(); $event.stopPropagation();',\n        '(keydown.Enter)': '_toggle(); $event.preventDefault();',\n        '(keydown.Space)': '_toggle(); $event.preventDefault();',\n        'tabindex': '-1'\n      }\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    recursive: [{\n      type: Input,\n      args: [{\n        alias: 'cdkTreeNodeToggleRecursive',\n        transform: booleanAttribute\n      }]\n    }]\n  }\n});\n\nconst EXPORTED_DECLARATIONS = [CdkNestedTreeNode, CdkTreeNodeDef, CdkTreeNodePadding, CdkTreeNodeToggle, CdkTree, CdkTreeNode, CdkTreeNodeOutlet];\nclass CdkTreeModule {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTreeModule,\n    deps: [],\n    target: i0.FactoryTarget.NgModule\n  });\n  static mod = i0.ngDeclareNgModule({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTreeModule,\n    imports: [CdkNestedTreeNode, CdkTreeNodeDef, CdkTreeNodePadding, CdkTreeNodeToggle, CdkTree, CdkTreeNode, CdkTreeNodeOutlet],\n    exports: [CdkNestedTreeNode, CdkTreeNodeDef, CdkTreeNodePadding, CdkTreeNodeToggle, CdkTree, CdkTreeNode, CdkTreeNodeOutlet]\n  });\n  static inj = i0.ngDeclareInjector({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: CdkTreeModule\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: CdkTreeModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: EXPORTED_DECLARATIONS,\n      exports: EXPORTED_DECLARATIONS\n    }]\n  }]\n});\n\nexport { BaseTreeControl, CDK_TREE_NODE_OUTLET_NODE, CdkNestedTreeNode, CdkTree, CdkTreeModule, CdkTreeNode, CdkTreeNodeDef, CdkTreeNodeOutlet, CdkTreeNodeOutletContext, CdkTreeNodePadding, CdkTreeNodeToggle, FlatTreeControl, NestedTreeControl, getMultipleTreeControlsError, getTreeControlMissingError, getTreeMissingMatchingNodeDefError, getTreeMultipleDefaultNodeDefsError, getTreeNoValidDataSourceError };\n","import { CdkTreeNode, CdkTreeNodeDef, CdkNestedTreeNode, CDK_TREE_NODE_OUTLET_NODE, CdkTreeNodePadding, CdkTreeNodeOutlet, CdkTree, CdkTreeNodeToggle, CdkTreeModule } from '@angular/cdk/tree';\nimport * as i0 from '@angular/core';\nimport { inject, HostAttributeToken, numberAttribute, booleanAttribute, Directive, Input, ViewContainerRef, Component, ViewEncapsulation, ChangeDetectionStrategy, ViewChild, NgModule } from '@angular/core';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { DataSource } from '@angular/cdk/collections';\nimport { BehaviorSubject, merge } from 'rxjs';\nimport { take, map } from 'rxjs/operators';\n\nfunction isNoopTreeKeyManager(keyManager) {\n  return !!keyManager._isNoopTreeKeyManager;\n}\nclass MatTreeNode extends CdkTreeNode {\n  get tabIndexInputBinding() {\n    return this._tabIndexInputBinding;\n  }\n  set tabIndexInputBinding(value) {\n    this._tabIndexInputBinding = value;\n  }\n  _tabIndexInputBinding;\n  defaultTabIndex = 0;\n  _getTabindexAttribute() {\n    if (isNoopTreeKeyManager(this._tree._keyManager)) {\n      return this.tabIndexInputBinding;\n    }\n    return this._tabindex;\n  }\n  get disabled() {\n    return this.isDisabled;\n  }\n  set disabled(value) {\n    this.isDisabled = value;\n  }\n  constructor() {\n    super();\n    const tabIndex = inject(new HostAttributeToken('tabindex'), {\n      optional: true\n    });\n    this.tabIndexInputBinding = Number(tabIndex) || this.defaultTabIndex;\n  }\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTreeNode,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"16.1.0\",\n    version: \"21.0.3\",\n    type: MatTreeNode,\n    isStandalone: true,\n    selector: \"mat-tree-node\",\n    inputs: {\n      tabIndexInputBinding: [\"tabIndex\", \"tabIndexInputBinding\", value => value == null ? 0 : numberAttribute(value)],\n      disabled: [\"disabled\", \"disabled\", booleanAttribute]\n    },\n    outputs: {\n      activation: \"activation\",\n      expandedChange: \"expandedChange\"\n    },\n    host: {\n      listeners: {\n        \"click\": \"_focusItem()\"\n      },\n      properties: {\n        \"attr.aria-expanded\": \"_getAriaExpanded()\",\n        \"attr.aria-level\": \"level + 1\",\n        \"attr.aria-posinset\": \"_getPositionInSet()\",\n        \"attr.aria-setsize\": \"_getSetSize()\",\n        \"tabindex\": \"_getTabindexAttribute()\"\n      },\n      classAttribute: \"mat-tree-node\"\n    },\n    providers: [{\n      provide: CdkTreeNode,\n      useExisting: MatTreeNode\n    }],\n    exportAs: [\"matTreeNode\"],\n    usesInheritance: true,\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTreeNode,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'mat-tree-node',\n      exportAs: 'matTreeNode',\n      outputs: ['activation', 'expandedChange'],\n      providers: [{\n        provide: CdkTreeNode,\n        useExisting: MatTreeNode\n      }],\n      host: {\n        'class': 'mat-tree-node',\n        '[attr.aria-expanded]': '_getAriaExpanded()',\n        '[attr.aria-level]': 'level + 1',\n        '[attr.aria-posinset]': '_getPositionInSet()',\n        '[attr.aria-setsize]': '_getSetSize()',\n        '(click)': '_focusItem()',\n        '[tabindex]': '_getTabindexAttribute()'\n      }\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    tabIndexInputBinding: [{\n      type: Input,\n      args: [{\n        transform: value => value == null ? 0 : numberAttribute(value),\n        alias: 'tabIndex'\n      }]\n    }],\n    disabled: [{\n      type: Input,\n      args: [{\n        transform: booleanAttribute\n      }]\n    }]\n  }\n});\nclass MatTreeNodeDef extends CdkTreeNodeDef {\n  data;\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTreeNodeDef,\n    deps: null,\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatTreeNodeDef,\n    isStandalone: true,\n    selector: \"[matTreeNodeDef]\",\n    inputs: {\n      when: [\"matTreeNodeDefWhen\", \"when\"],\n      data: [\"matTreeNode\", \"data\"]\n    },\n    providers: [{\n      provide: CdkTreeNodeDef,\n      useExisting: MatTreeNodeDef\n    }],\n    usesInheritance: true,\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTreeNodeDef,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matTreeNodeDef]',\n      inputs: [{\n        name: 'when',\n        alias: 'matTreeNodeDefWhen'\n      }],\n      providers: [{\n        provide: CdkTreeNodeDef,\n        useExisting: MatTreeNodeDef\n      }]\n    }]\n  }],\n  propDecorators: {\n    data: [{\n      type: Input,\n      args: ['matTreeNode']\n    }]\n  }\n});\nclass MatNestedTreeNode extends CdkNestedTreeNode {\n  node;\n  get disabled() {\n    return this.isDisabled;\n  }\n  set disabled(value) {\n    this.isDisabled = value;\n  }\n  get tabIndex() {\n    return this.isDisabled ? -1 : this._tabIndex;\n  }\n  set tabIndex(value) {\n    this._tabIndex = value;\n  }\n  _tabIndex;\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  ngAfterContentInit() {\n    super.ngAfterContentInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatNestedTreeNode,\n    deps: null,\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"16.1.0\",\n    version: \"21.0.3\",\n    type: MatNestedTreeNode,\n    isStandalone: true,\n    selector: \"mat-nested-tree-node\",\n    inputs: {\n      node: [\"matNestedTreeNode\", \"node\"],\n      disabled: [\"disabled\", \"disabled\", booleanAttribute],\n      tabIndex: [\"tabIndex\", \"tabIndex\", value => value == null ? 0 : numberAttribute(value)]\n    },\n    outputs: {\n      activation: \"activation\",\n      expandedChange: \"expandedChange\"\n    },\n    host: {\n      classAttribute: \"mat-nested-tree-node\"\n    },\n    providers: [{\n      provide: CdkNestedTreeNode,\n      useExisting: MatNestedTreeNode\n    }, {\n      provide: CdkTreeNode,\n      useExisting: MatNestedTreeNode\n    }, {\n      provide: CDK_TREE_NODE_OUTLET_NODE,\n      useExisting: MatNestedTreeNode\n    }],\n    exportAs: [\"matNestedTreeNode\"],\n    usesInheritance: true,\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatNestedTreeNode,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'mat-nested-tree-node',\n      exportAs: 'matNestedTreeNode',\n      outputs: ['activation', 'expandedChange'],\n      providers: [{\n        provide: CdkNestedTreeNode,\n        useExisting: MatNestedTreeNode\n      }, {\n        provide: CdkTreeNode,\n        useExisting: MatNestedTreeNode\n      }, {\n        provide: CDK_TREE_NODE_OUTLET_NODE,\n        useExisting: MatNestedTreeNode\n      }],\n      host: {\n        'class': 'mat-nested-tree-node'\n      }\n    }]\n  }],\n  propDecorators: {\n    node: [{\n      type: Input,\n      args: ['matNestedTreeNode']\n    }],\n    disabled: [{\n      type: Input,\n      args: [{\n        transform: booleanAttribute\n      }]\n    }],\n    tabIndex: [{\n      type: Input,\n      args: [{\n        transform: value => value == null ? 0 : numberAttribute(value)\n      }]\n    }]\n  }\n});\n\nclass MatTreeNodePadding extends CdkTreeNodePadding {\n  get level() {\n    return this._level;\n  }\n  set level(value) {\n    this._setLevelInput(value);\n  }\n  get indent() {\n    return this._indent;\n  }\n  set indent(indent) {\n    this._setIndentInput(indent);\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTreeNodePadding,\n    deps: null,\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"16.1.0\",\n    version: \"21.0.3\",\n    type: MatTreeNodePadding,\n    isStandalone: true,\n    selector: \"[matTreeNodePadding]\",\n    inputs: {\n      level: [\"matTreeNodePadding\", \"level\", numberAttribute],\n      indent: [\"matTreeNodePaddingIndent\", \"indent\"]\n    },\n    providers: [{\n      provide: CdkTreeNodePadding,\n      useExisting: MatTreeNodePadding\n    }],\n    usesInheritance: true,\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTreeNodePadding,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matTreeNodePadding]',\n      providers: [{\n        provide: CdkTreeNodePadding,\n        useExisting: MatTreeNodePadding\n      }]\n    }]\n  }],\n  propDecorators: {\n    level: [{\n      type: Input,\n      args: [{\n        alias: 'matTreeNodePadding',\n        transform: numberAttribute\n      }]\n    }],\n    indent: [{\n      type: Input,\n      args: ['matTreeNodePaddingIndent']\n    }]\n  }\n});\n\nclass MatTreeNodeOutlet {\n  viewContainer = inject(ViewContainerRef);\n  _node = inject(CDK_TREE_NODE_OUTLET_NODE, {\n    optional: true\n  });\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTreeNodeOutlet,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatTreeNodeOutlet,\n    isStandalone: true,\n    selector: \"[matTreeNodeOutlet]\",\n    providers: [{\n      provide: CdkTreeNodeOutlet,\n      useExisting: MatTreeNodeOutlet\n    }],\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTreeNodeOutlet,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matTreeNodeOutlet]',\n      providers: [{\n        provide: CdkTreeNodeOutlet,\n        useExisting: MatTreeNodeOutlet\n      }]\n    }]\n  }]\n});\n\nclass MatTree extends CdkTree {\n  _nodeOutlet = undefined;\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTree,\n    deps: null,\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatTree,\n    isStandalone: true,\n    selector: \"mat-tree\",\n    host: {\n      classAttribute: \"mat-tree\"\n    },\n    providers: [{\n      provide: CdkTree,\n      useExisting: MatTree\n    }],\n    viewQueries: [{\n      propertyName: \"_nodeOutlet\",\n      first: true,\n      predicate: MatTreeNodeOutlet,\n      descendants: true,\n      static: true\n    }],\n    exportAs: [\"matTree\"],\n    usesInheritance: true,\n    ngImport: i0,\n    template: `<ng-container matTreeNodeOutlet></ng-container>`,\n    isInline: true,\n    styles: [\".mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-sys-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-sys-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-sys-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height, 48px)}.mat-nested-tree-node{border-bottom-width:0}\\n\"],\n    dependencies: [{\n      kind: \"directive\",\n      type: MatTreeNodeOutlet,\n      selector: \"[matTreeNodeOutlet]\"\n    }],\n    changeDetection: i0.ChangeDetectionStrategy.Default,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTree,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-tree',\n      exportAs: 'matTree',\n      template: `<ng-container matTreeNodeOutlet></ng-container>`,\n      host: {\n        'class': 'mat-tree'\n      },\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.Default,\n      providers: [{\n        provide: CdkTree,\n        useExisting: MatTree\n      }],\n      imports: [MatTreeNodeOutlet],\n      styles: [\".mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-sys-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-sys-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-sys-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height, 48px)}.mat-nested-tree-node{border-bottom-width:0}\\n\"]\n    }]\n  }],\n  propDecorators: {\n    _nodeOutlet: [{\n      type: ViewChild,\n      args: [MatTreeNodeOutlet, {\n        static: true\n      }]\n    }]\n  }\n});\n\nclass MatTreeNodeToggle extends CdkTreeNodeToggle {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTreeNodeToggle,\n    deps: null,\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatTreeNodeToggle,\n    isStandalone: true,\n    selector: \"[matTreeNodeToggle]\",\n    inputs: {\n      recursive: [\"matTreeNodeToggleRecursive\", \"recursive\"]\n    },\n    providers: [{\n      provide: CdkTreeNodeToggle,\n      useExisting: MatTreeNodeToggle\n    }],\n    usesInheritance: true,\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTreeNodeToggle,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matTreeNodeToggle]',\n      providers: [{\n        provide: CdkTreeNodeToggle,\n        useExisting: MatTreeNodeToggle\n      }],\n      inputs: [{\n        name: 'recursive',\n        alias: 'matTreeNodeToggleRecursive'\n      }]\n    }]\n  }]\n});\n\nconst MAT_TREE_DIRECTIVES = [MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet];\nclass MatTreeModule {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTreeModule,\n    deps: [],\n    target: i0.FactoryTarget.NgModule\n  });\n  static mod = i0.ngDeclareNgModule({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTreeModule,\n    imports: [CdkTreeModule, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet],\n    exports: [BidiModule, MatNestedTreeNode, MatTreeNodeDef, MatTreeNodePadding, MatTreeNodeToggle, MatTree, MatTreeNode, MatTreeNodeOutlet]\n  });\n  static inj = i0.ngDeclareInjector({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTreeModule,\n    imports: [CdkTreeModule, BidiModule]\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTreeModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: [CdkTreeModule, ...MAT_TREE_DIRECTIVES],\n      exports: [BidiModule, MAT_TREE_DIRECTIVES]\n    }]\n  }]\n});\n\nclass MatTreeFlattener {\n  transformFunction;\n  getLevel;\n  isExpandable;\n  getChildren;\n  constructor(transformFunction, getLevel, isExpandable, getChildren) {\n    this.transformFunction = transformFunction;\n    this.getLevel = getLevel;\n    this.isExpandable = isExpandable;\n    this.getChildren = getChildren;\n  }\n  _flattenNode(node, level, resultNodes, parentMap) {\n    const flatNode = this.transformFunction(node, level);\n    resultNodes.push(flatNode);\n    if (this.isExpandable(flatNode)) {\n      const childrenNodes = this.getChildren(node);\n      if (childrenNodes) {\n        if (Array.isArray(childrenNodes)) {\n          this._flattenChildren(childrenNodes, level, resultNodes, parentMap);\n        } else {\n          childrenNodes.pipe(take(1)).subscribe(children => {\n            this._flattenChildren(children, level, resultNodes, parentMap);\n          });\n        }\n      }\n    }\n    return resultNodes;\n  }\n  _flattenChildren(children, level, resultNodes, parentMap) {\n    children.forEach((child, index) => {\n      let childParentMap = parentMap.slice();\n      childParentMap.push(index != children.length - 1);\n      this._flattenNode(child, level + 1, resultNodes, childParentMap);\n    });\n  }\n  flattenNodes(structuredData) {\n    let resultNodes = [];\n    structuredData.forEach(node => this._flattenNode(node, 0, resultNodes, []));\n    return resultNodes;\n  }\n  expandFlattenedNodes(nodes, treeControl) {\n    let results = [];\n    let currentExpand = [];\n    currentExpand[0] = true;\n    nodes.forEach(node => {\n      let expand = true;\n      for (let i = 0; i <= this.getLevel(node); i++) {\n        expand = expand && currentExpand[i];\n      }\n      if (expand) {\n        results.push(node);\n      }\n      if (this.isExpandable(node)) {\n        currentExpand[this.getLevel(node) + 1] = treeControl.isExpanded(node);\n      }\n    });\n    return results;\n  }\n}\nclass MatTreeFlatDataSource extends DataSource {\n  _treeControl;\n  _treeFlattener;\n  _flattenedData = new BehaviorSubject([]);\n  _expandedData = new BehaviorSubject([]);\n  get data() {\n    return this._data.value;\n  }\n  set data(value) {\n    this._data.next(value);\n    this._flattenedData.next(this._treeFlattener.flattenNodes(this.data));\n    this._treeControl.dataNodes = this._flattenedData.value;\n  }\n  _data = new BehaviorSubject([]);\n  constructor(_treeControl, _treeFlattener, initialData) {\n    super();\n    this._treeControl = _treeControl;\n    this._treeFlattener = _treeFlattener;\n    if (initialData) {\n      this.data = initialData;\n    }\n  }\n  connect(collectionViewer) {\n    return merge(collectionViewer.viewChange, this._treeControl.expansionModel.changed, this._flattenedData).pipe(map(() => {\n      this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value, this._treeControl));\n      return this._expandedData.value;\n    }));\n  }\n  disconnect() {}\n}\n\nclass MatTreeNestedDataSource extends DataSource {\n  get data() {\n    return this._data.value;\n  }\n  set data(value) {\n    this._data.next(value);\n  }\n  _data = new BehaviorSubject([]);\n  connect(collectionViewer) {\n    return merge(...[collectionViewer.viewChange, this._data]).pipe(map(() => this.data));\n  }\n  disconnect() {}\n}\n\nexport { MatNestedTreeNode, MatTree, MatTreeFlatDataSource, MatTreeFlattener, MatTreeModule, MatTreeNestedDataSource, MatTreeNode, MatTreeNodeDef, MatTreeNodeOutlet, MatTreeNodePadding, MatTreeNodeToggle };\n","import { Component, inject } from '@angular/core';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../edit-types/src/PickerSources';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { computedObj } from '../../../shared/signals/signal.utilities';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { FieldState } from '../field-state';\r\n\r\n/**\r\n * Base class for Picker Part Components.\r\n */\r\n@Component({\r\n  selector: 'app-picker-part-base',\r\n  template: '',\r\n})\r\nexport class PickerPartBaseComponent {\r\n\r\n  //#region Setup: Logging, inject, constructor\r\n\r\n  log = classLog({PickerPartBaseComponent});\r\n\r\n  /** Entire Field State */\r\n  protected fieldState = inject(FieldState) as FieldState<FieldValue, FieldSettingsWithPickerSource & FieldSettingsPickerMerged>;\r\n\r\n  /** Routing service to open edit-dialogs for entities where necessary */\r\n  editRoutingService = inject(EditRoutingService);\r\n\r\n  constructor() { }\r\n\r\n  //#endregion\r\n\r\n  //#region Settings - simple values\r\n\r\n  protected enableTextEntry = this.fieldState.settingExt('EnableTextEntry');\r\n\r\n  //#endregion\r\n\r\n  /** Picker Data Bundle with Source and state etc. */\r\n  protected pickerData = this.fieldState.pickerData;\r\n\r\n  protected isInFreeTextMode = this.pickerData.isInFreeTextMode;\r\n\r\n  protected ui = this.fieldState.ui;\r\n\r\n  /** All Selected Items */\r\n  protected selectedItems = this.pickerData.selectedAll;\r\n  protected selectedItem = this.pickerData.selectedOne;\r\n  itemCount = computedObj('itemCount', () => this.selectedItems().length);\r\n\r\n  /** Field Configuration - from field state */\r\n  protected config = this.fieldState.config;\r\n\r\n  /** Label and other basics to show from the picker data. Is not auto-attached, since it's not the initial/top-level component. */\r\n  protected basics = this.fieldState.basics;\r\n\r\n  /** Features */\r\n  protected features = this.pickerData.features;\r\n\r\n  //#region CRUD style operations\r\n\r\n  expandDialog() {\r\n    const config = this.fieldState.config;\r\n    if (config.initialDisabled) return;\r\n    this.editRoutingService.expand(true, config.index, config.entityGuid);\r\n  }\r\n\r\n  openNewEntityDialog(entityType: string): void {\r\n    this.log.a(`openNewEntityDialog: '${entityType}'`);\r\n    this.pickerData.source.editItem(null, entityType);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  toggleFreeText(disabled: boolean): void {\r\n    this.log.a(`toggleFreeText ${disabled}`);\r\n    if (disabled) return;\r\n    this.pickerData.toggleFreeTextMode();\r\n  }\r\n}\r\n","\r\n@if (buttons().edit)\r\n{\r\n  <!-- Disable edit only if it was disabled in the settings, not if disabled by language change -->\r\n  <!-- note: not sure if the above comment is applied in this code, as it still uses ui().disabled -->\r\n  <button\r\n    mat-icon-button\r\n    matSuffix\r\n    class=\"picker-inline-button\"\r\n    tippyTranslate=\"Fields.Picker.Edit\"\r\n    [disabled]=\"ui().disabled || config.initialDisabled\"\r\n    appClickStopPropagation\r\n    (click)=\"edit(item().value, item().id)\"\r\n  >\r\n    <mat-icon>edit</mat-icon>\r\n  </button>\r\n}\r\n\r\n@if (buttons().remove)\r\n{\r\n  <button\r\n    mat-icon-button\r\n    matSuffix\r\n    class=\"picker-inline-button\"\r\n    tippyTranslate=\"Fields.Picker.Remove\"\r\n    [disabled]=\"ui().disabled\"\r\n    appClickStopPropagation\r\n    (click)=\"removeItem(index())\"\r\n  >\r\n    <mat-icon>do_not_disturb_on</mat-icon>\r\n  </button>\r\n}\r\n\r\n\r\n@if (buttons().delete)\r\n{\r\n  <button\r\n    mat-icon-button\r\n    matSuffix\r\n    class=\"picker-inline-button\"\r\n    tippyTranslate=\"Fields.Picker.Delete\"\r\n    [disabled]=\"ui().disabled\"\r\n    appClickStopPropagation\r\n    (click)=\"deleteItem(index(), item().value)\"\r\n  >\r\n    <mat-icon>delete</mat-icon>\r\n  </button>\r\n}\r\n","import { Component, input } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { classLog } from 'projects/eav-ui/src/app/shared/logging';\r\nimport { ClickStopPropagationDirective } from '../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerFeaturesItem } from '../picker-features.model';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\n\r\nconst logSpecs = {\r\n  buttons: true,\r\n};\r\n\r\n@Component({\r\n  selector: 'app-picker-item-buttons',\r\n  templateUrl: './picker-item-buttons.html',\r\n  styleUrl: './picker-item-buttons.scss',\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    TippyDirective,\r\n    ClickStopPropagationDirective,\r\n  ]\r\n})\r\nexport class PickerItemButtonsComponent extends PickerPartBaseComponent {\r\n\r\n  log = classLog({PickerItemButtonsComponent}, logSpecs);\r\n\r\n  /** The item to show the label/buttons for */\r\n  item = input.required<PickerItem>();\r\n  \r\n  /** The item index, important for certain button actions */\r\n  index = input.required<number>();\r\n\r\n  /** If the buttons should show or not - I believe ATM it's always true */\r\n  show = input.required<boolean>();\r\n\r\n  /** UI Features can let the control determine that certain buttons shouldn't be available, eg. \"remove\" on radio-button */\r\n  uiFeatures = input<Partial<PickerFeaturesItem>>(null);\r\n\r\n  constructor() { super(); }\r\n\r\n  /** Current applicable settings like \"enableEdit\" etc. */\r\n  buttons = computedObj('buttons', () => {\r\n    // note that selected can be null, since a item in the list can be null\r\n    const item = this.item();\r\n    const show = this.show() && !!item;\r\n    const f = this.features();          // features from config, source-type etc.\r\n    const uif = this.uiFeatures();      // features requested by the parent-control\r\n    const merged = {\r\n      edit: f.edit && uif?.edit != false && show && !item?.noEdit,\r\n      remove: f.remove && uif?.remove != false && show && !item?.noRemove,\r\n      delete: f.delete && uif?.delete != false && show && !item?.noDelete,\r\n    };\r\n    this.log.aIf('buttons', { merged, item, show, f, uif });\r\n    return merged;\r\n  });\r\n  \r\n\r\n  edit(entityGuid: string, entityId: number): void {\r\n    this.log.a(`edit guid: '${entityGuid}'; id: '${entityId}'`);\r\n    this.pickerData.source.editItem({ entityGuid, entityId }, null);\r\n  }\r\n\r\n  removeItem(index: number): void {\r\n    this.log.a(`removeItem index: '${index}'`);\r\n    this.pickerData.state.remove(index);\r\n  }\r\n\r\n  deleteItem(index: number, entityGuid: string): void {\r\n    this.log.a(`deleteItem index: '${index}'; entityGuid: '${entityGuid}'`);\r\n    this.pickerData.source.deleteItem({ index, entityGuid });\r\n  }\r\n\r\n}\r\n","@if (helpLink()) {\r\n  <mat-icon (click)=\"goToLink()\" [tippy]=\"helpLink()\" appClickStopPropagation>open_in_new</mat-icon>\r\n}","import { Component, input } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n    selector: 'app-picker-help',\r\n    imports: [\r\n        MatIconModule,\r\n        TippyDirective,\r\n        ClickStopPropagationDirective,\r\n    ],\r\n    templateUrl: './picker-icon-help.html'\r\n})\r\nexport class PickerIconHelpComponent {\r\n  helpLink = input<string>();\r\n\r\n  goToLink(): void {\r\n    window.open(this.helpLink(), '_blank');\r\n  }\r\n}\r\n","@if (infoBox()) {\r\n  <mat-icon [tippy]=\"infoBox()\" [tippyAllowHtml]=\"true\" [tippyArrow]=\"true\" tippyFontSize=\"larger\" appClickStopPropagation>\r\n    info\r\n  </mat-icon>\r\n}\r\n","import { Component, input } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n    selector: 'app-picker-icon-info',\r\n    imports: [\r\n        MatIconModule,\r\n        TippyDirective,\r\n        ClickStopPropagationDirective,\r\n    ],\r\n    templateUrl: './picker-icon-info.html'\r\n})\r\nexport class PickerIconInfoComponent {\r\n  infoBox = input<string>();\r\n}\r\n","import { isPlatformServer, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, PLATFORM_ID, ElementRef, Component, Inject, Input, ViewChild, isDevMode, Injectable, TemplateRef, Directive, NgModule } from '@angular/core';\nimport tippy, { hideAll, createSingleton } from 'tippy.js';\nimport { Subject } from 'rxjs';\n\nconst messagesDict = {\n    instanceAlreadyExist: `Instance with name #tippyName already exist, please pick unique [tippyName]`,\n    instanceNotExist: `Instance with name #tippyName does not exist`,\n    childrenInstancesNotFoundGrouped: `No children tippy instances found within 'ngx-tippy-group' component`,\n    childrenInstancesNotFoundSingleton: `No children tippy instances found within 'ngx-tippy-singleton' component`,\n    singletonInstanceAlreadyExist: `Singleton instance with name #singletonName already exist, please pick unique [singletonName]`,\n};\n\nconst tippyFakeInstance = {\n    clearDelayTimeouts: () => { },\n    destroy: () => { },\n    disable: () => { },\n    enable: () => { },\n    hide: () => { },\n    hideWithInteractivity: () => { },\n    id: 0,\n    plugins: [\n        {\n            name: 'followCursor',\n            defaultValue: false,\n        },\n    ],\n    popper: {\n        state: {},\n    },\n    popperInstance: {},\n    props: {},\n    reference: {},\n    setContent: () => { },\n    setProps: () => { },\n    show: () => { },\n    state: {\n        isEnabled: true,\n        isVisible: true,\n        isDestroyed: false,\n        isMounted: true,\n        isShown: false,\n    },\n    unmount: () => { },\n};\n\nconst NGX_TIPPY_MESSAGES = new InjectionToken('NGX_TIPPY_MESSAGES', {\n    providedIn: 'root',\n    factory: () => messagesDict,\n});\nconst TIPPY_FAKE_INSTANCE = new InjectionToken('TIPPY_FAKE_INSTANCE', {\n    providedIn: 'root',\n    factory: () => tippyFakeInstance,\n});\nconst NGX_TIPPY_CONFIG = new InjectionToken('NGX_TIPPY_CONFIG', {\n    providedIn: 'root',\n    factory: () => ({}),\n});\n\n/**\n * Different tooltip content to many different elements, but only one tippy instance\n */\nclass NgxTippyGroupComponent {\n    constructor(platform, messagesDict, ngxTippyConfig) {\n        this.platform = platform;\n        this.messagesDict = messagesDict;\n        this.ngxTippyConfig = ngxTippyConfig;\n    }\n    ngAfterViewInit() {\n        if (isPlatformServer(this.platform))\n            return;\n        this.setTooltips();\n    }\n    setTooltips() {\n        const contentWrapperNativeEl = this.contentWrapper.nativeElement;\n        const tooltips = Array.from(contentWrapperNativeEl.querySelectorAll('[data-tippy-grouped]'));\n        if (tooltips.length) {\n            this.initTippy(tooltips);\n        }\n        else {\n            throw new Error(this.messagesDict.childrenInstancesNotFoundGrouped);\n        }\n    }\n    initTippy(tooltips) {\n        tippy(tooltips, {\n            ...this.ngxTippyConfig,\n            ...this.groupedProps,\n        });\n    }\n}\nNgxTippyGroupComponent.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyGroupComponent, deps: [{ token: PLATFORM_ID }, { token: NGX_TIPPY_MESSAGES }, { token: NGX_TIPPY_CONFIG }], target: i0.FactoryTarget.Component });\nNgxTippyGroupComponent.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"14.2.12\", type: NgxTippyGroupComponent, selector: \"ngx-tippy-group\", inputs: { groupedProps: \"groupedProps\" }, viewQueries: [{ propertyName: \"contentWrapper\", first: true, predicate: [\"contentWrapper\"], descendants: true, read: ElementRef }], ngImport: i0, template: `\n    <div #contentWrapper>\n      <ng-content></ng-content>\n    </div>\n  `, isInline: true });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyGroupComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'ngx-tippy-group',\n                    template: `\n    <div #contentWrapper>\n      <ng-content></ng-content>\n    </div>\n  `,\n                }]\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_MESSAGES]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_CONFIG]\n                }] }]; }, propDecorators: { groupedProps: [{\n                type: Input\n            }], contentWrapper: [{\n                type: ViewChild,\n                args: ['contentWrapper', { read: ElementRef, static: false }]\n            }] } });\n\nclass DevModeService {\n    isDevMode() {\n        return isDevMode();\n    }\n}\nDevModeService.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: DevModeService, deps: [], target: i0.FactoryTarget.Injectable });\nDevModeService.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: DevModeService, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: DevModeService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nvar InstanceChangeReasonEnum;\n(function (InstanceChangeReasonEnum) {\n    InstanceChangeReasonEnum[\"SetInstance\"] = \"setInstance\";\n    InstanceChangeReasonEnum[\"Show\"] = \"show\";\n    InstanceChangeReasonEnum[\"Hide\"] = \"hide\";\n    InstanceChangeReasonEnum[\"HideWithInteractivity\"] = \"hideWithInteractivity\";\n    InstanceChangeReasonEnum[\"Disable\"] = \"disable\";\n    InstanceChangeReasonEnum[\"Enable\"] = \"enable\";\n    InstanceChangeReasonEnum[\"SetProps\"] = \"setProps\";\n    InstanceChangeReasonEnum[\"SetContent\"] = \"setContent\";\n    InstanceChangeReasonEnum[\"Unmount\"] = \"unmount\";\n    InstanceChangeReasonEnum[\"ClearDelayTimeouts\"] = \"clearDelayTimeouts\";\n    InstanceChangeReasonEnum[\"Destroy\"] = \"destroy\";\n})(InstanceChangeReasonEnum || (InstanceChangeReasonEnum = {}));\nvar NgxTippyNamesEnum;\n(function (NgxTippyNamesEnum) {\n    NgxTippyNamesEnum[\"TippyName\"] = \"tippyName\";\n    NgxTippyNamesEnum[\"SingletonName\"] = \"singletonName\";\n})(NgxTippyNamesEnum || (NgxTippyNamesEnum = {}));\n\nclass CompRef {\n    constructor(args) {\n        this.args = args;\n        this.compRef = this.args.viewContainerRef.createComponent(this.args.component);\n    }\n    detectChanges() {\n        this.compRef?.changeDetectorRef.detectChanges();\n        return this;\n    }\n    getElement() {\n        return this.compRef?.location.nativeElement;\n    }\n    destroy() {\n        this.compRef?.destroy();\n        this.compRef = null;\n    }\n}\n\nconst isComponent = (value) => typeof value === 'function';\n\nconst isHTMLTemplate = (value) => value instanceof HTMLTemplateElement;\n\nconst isTemplateRef = (value) => value instanceof TemplateRef;\n\n/**\n * Set display: \"block\" for content wrapper element\n *\n * @param tippyContent  { NgxTippyContent }\n * @param renderer { Renderer2 }\n */\nconst setTemplateVisible = (tippyContent, renderer) => {\n    tippyContent && tippyContent instanceof Element && renderer.setStyle(tippyContent, 'display', 'block');\n};\n\nclass TplRef {\n    constructor(args) {\n        this.args = args;\n        this.viewRef = this.args.tpl.createEmbeddedView(this.args.context || {});\n        this.viewRef.detectChanges();\n        this.args.appRef.attachView(this.viewRef);\n    }\n    detectChanges() {\n        this.viewRef?.detectChanges();\n        return this;\n    }\n    getElement() {\n        if (!this.viewRef)\n            return null;\n        const rootNodes = this.viewRef.rootNodes;\n        if (rootNodes.length === 1 && rootNodes[0].nodeType === Node.ELEMENT_NODE) {\n            this.element = rootNodes[0];\n        }\n        else {\n            this.element = document.createElement('div');\n            this.element.append(...rootNodes);\n        }\n        return this.element;\n    }\n    destroy() {\n        if (!this.viewRef)\n            return;\n        if (this.viewRef.rootNodes[0] !== 1) {\n            this.element?.parentNode?.removeChild(this.element);\n            this.element = null;\n        }\n        this.viewRef.destroy();\n        this.viewRef = null;\n    }\n}\n\nclass NgxViewService {\n    constructor(appRef) {\n        this.appRef = appRef;\n    }\n    getViewRefInstance(content, tippyName, tippyContext = {}) {\n        let viewRef;\n        if (isTemplateRef(content)) {\n            tippyContext.$implicit = tippyName;\n            viewRef = this.createTemplate(content, tippyContext);\n        }\n        else if (isComponent(content)) {\n            viewRef = this.createComponent(content);\n        }\n        else if (isHTMLTemplate(content)) {\n            viewRef = {\n                getElement: () => content.content,\n            };\n        }\n        else {\n            viewRef = {\n                getElement: () => content,\n            };\n        }\n        return viewRef;\n    }\n    createTemplate(tpl, context) {\n        return new TplRef({\n            tpl,\n            context,\n            appRef: this.appRef,\n        });\n    }\n    createComponent(component) {\n        return new CompRef({\n            component,\n            viewContainerRef: this.viewContainerRef,\n        });\n    }\n}\nNgxViewService.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxViewService, deps: [{ token: i0.ApplicationRef }], target: i0.FactoryTarget.Injectable });\nNgxViewService.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxViewService, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxViewService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: i0.ApplicationRef }]; } });\n\nclass NgxTippyService {\n    constructor(rendererFactory, devModeService, ngxViewService, messagesDict) {\n        this.devModeService = devModeService;\n        this.ngxViewService = ngxViewService;\n        this.messagesDict = messagesDict;\n        this.tippyInstances = new Map();\n        this.tippySingletonEntryInstances = new Map();\n        this.tippyInstances$ = new Subject();\n        this.createRenderer(rendererFactory);\n    }\n    /**\n     * Working with storage\n     */\n    /**\n     * Write tippy instances to storage\n     *\n     * @param name { string } name of tippy instance\n     * @param state { NgxTippyInstance } tippy instance\n     */\n    setInstance(name, state) {\n        const instance = this.tippyInstances.get(name);\n        if (instance) {\n            const errMessage = this.getMessage({\n                reason: 'instanceAlreadyExist',\n                messageFor: NgxTippyNamesEnum.TippyName,\n                name,\n            });\n            this.throwError(errMessage);\n        }\n        else {\n            this.tippyInstances.set(name, state);\n            this.emitInstancesChange({\n                name,\n                reason: InstanceChangeReasonEnum.SetInstance,\n                instance: state,\n            });\n        }\n    }\n    /**\n     * Get specific tippy instance\n     *\n     * @param name { string } name of tippy instance\n     * @returns { NgxTippyInstance | null } specific tippy instance or null\n     */\n    getInstance(name) {\n        return this.tippyInstances.has(name) ? this.tippyInstances.get(name) : null;\n    }\n    /**\n     * Get all tippy instances from storage\n     *\n     * @returns { Map<string, NgxTippyInstance> | null } all tippy instances or null\n     */\n    getInstances() {\n        return this.tippyInstances.size ? this.tippyInstances : null;\n    }\n    /**\n     * Write singleton instances to storage\n     *\n     * @param name { string } name of tippy instance\n     * @param state { NgxTippyInstance } tippy instance\n     */\n    setSingletonInstance(name, state) {\n        if (this.tippySingletonEntryInstances.has(name)) {\n            const errMessage = this.getMessage({\n                reason: 'singletonInstanceAlreadyExist',\n                messageFor: NgxTippyNamesEnum.SingletonName,\n                name,\n            });\n            this.throwError(errMessage);\n        }\n        else {\n            this.tippySingletonEntryInstances.set(name, state);\n        }\n    }\n    /**\n     * Get specific singleton tippy instance\n     *\n     * @param name { string } name of singleton tippy instance\n     * @returns { NgxTippySingletonInstance | null } specific singleton tippy instance or null\n     */\n    getSingletonInstance(name) {\n        return this.tippySingletonEntryInstances.has(name) ? this.tippySingletonEntryInstances.get(name) : null;\n    }\n    /**\n     * Get all singleton tippy instances\n     *\n     * @returns { Map<string, NgxTippyInstance> | null } all singleton tippy instances or null\n     */\n    getSingletonInstances() {\n        return this.tippySingletonEntryInstances.size ? this.tippySingletonEntryInstances : null;\n    }\n    /**\n     * Working with tippy instance methods\n     */\n    /**\n     * Programmatically show the tippy\n     *\n     * @param name { string } name of tippy instance\n     */\n    show(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Show);\n    }\n    /**\n     * Programmatically hide the tippy\n     *\n     * @param name { string } name of tippy instance\n     */\n    hide(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Hide);\n    }\n    /**\n     * Will hide the tippy only if the cursor is outside of the tippy's interactive region\n     * This allows you to programmatically hook into interactive behavior upon a mouseleave event if implementing custom event listeners\n     *\n     * @param name { string } name of tippy instance\n     * @param name { mouseEvent } pass the mouse event object in from your event listener\n     */\n    hideWithInteractivity(name, mouseEvent) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.HideWithInteractivity, mouseEvent);\n    }\n    /**\n     * Prevent a tippy from showing or hiding\n     *\n     * @param name { string } name of tippy instance\n     */\n    disable(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Disable);\n    }\n    /**\n     * Re-enable a tippy\n     *\n     * @param name { string } name of tippy instance\n     */\n    enable(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Enable);\n    }\n    /**\n     * Update any tippy props\n     *\n     * @param name { string } name of tippy instance\n     * @param tippyProps { NgxTippyProps } new props\n     */\n    setProps(name, tippyProps) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.SetProps, tippyProps);\n    }\n    /**\n     * Update the content for tippy\n     *\n     * @param name { string } name of tippy instance\n     * @param tippyContent { NgxTippyContent } new content\n     */\n    setContent(name, tippyContent, tippyContext) {\n        const instance = this.getInstance(name);\n        if (!instance) {\n            this.throwErrorInstanceNotExist(name);\n            return;\n        }\n        if (tippyContent) {\n            const viewRef = this.ngxViewService.getViewRefInstance(tippyContent, instance.tippyName, tippyContext);\n            const content = viewRef.getElement();\n            if (content) {\n                setTemplateVisible(content, this.renderer);\n                instance.setContent(content);\n                instance.viewRef = viewRef;\n                this.emitInstancesChange({\n                    name,\n                    reason: 'setContent',\n                    instance,\n                });\n            }\n            else {\n                this.throwError('message');\n            }\n        }\n    }\n    /**\n     * Unmount the tippy from the DOM\n     *\n     * @param name { string } name of tippy instance\n     */\n    unmount(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Unmount);\n    }\n    /**\n     * Clears the instances delay timeouts\n     *\n     * @param name { string } name of tippy instance\n     */\n    clearDelayTimeouts(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.ClearDelayTimeouts);\n    }\n    /**\n     * Permanently destroy and clean up the tippy instance\n     *\n     * @param name { string } name of tippy instance\n     */\n    destroy(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Destroy);\n        this.tippyInstances.delete(name);\n    }\n    /** Working with tippy static methods */\n    /**\n     * Set the default props for each new tippy instance\n     *\n     * @param tippyProps { NgxTippyDefaultProps } default props\n     */\n    setDefaultProps(tippyProps) {\n        tippy.setDefaultProps(tippyProps);\n    }\n    /**\n     * Show all tippies\n     */\n    showAll() {\n        this.tippyInstances.forEach((instance, name) => {\n            instance.show();\n            this.emitInstancesChange({\n                name,\n                reason: 'show',\n                instance,\n            });\n        });\n    }\n    /**\n     * Hide all tippies or hide all except a particular one\n     * Additional hide them with duration\n     *\n     * @param { NgxTippyHideAllOptions } [options] - additional hiding options\n     */\n    hideAll(options) {\n        const exclude = this.getInstance(options?.excludeName || '');\n        const duration = options?.duration;\n        hideAll({ duration, ...exclude });\n    }\n    /**\n     * Subscription to change of tippy instances\n     *\n     * @returns { Observable<InstancesChanges> } observable of tippy instances change\n     */\n    get instancesChanges() {\n        return this.tippyInstances$.asObservable();\n    }\n    /**\n     * Service methods\n     */\n    callNativeTippyMethod(name, method, arg) {\n        const instance = this.getInstance(name);\n        if (instance) {\n            instance[method](arg);\n            this.emitInstancesChange({\n                name,\n                reason: method,\n                instance,\n            });\n        }\n        else {\n            this.throwErrorInstanceNotExist(name);\n        }\n    }\n    emitInstancesChange({ name, reason, instance, }) {\n        this.tippyInstances$.next({ name, reason, instance });\n    }\n    createRenderer(rendererFactory) {\n        this.renderer = rendererFactory.createRenderer(null, null);\n    }\n    throwErrorInstanceNotExist(name) {\n        const errMessage = this.getMessage({\n            reason: 'instanceNotExist',\n            messageFor: NgxTippyNamesEnum.TippyName,\n            name,\n        });\n        this.throwError(errMessage);\n    }\n    throwError(message, errorConstructor = Error) {\n        if (this.devModeService.isDevMode())\n            throw new errorConstructor(message);\n    }\n    getMessage({ reason, messageFor, name, }) {\n        return this.messagesDict[reason].replace(`#${messageFor}`, `'${name}'`);\n    }\n}\nNgxTippyService.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyService, deps: [{ token: i0.RendererFactory2 }, { token: DevModeService }, { token: NgxViewService }, { token: NGX_TIPPY_MESSAGES }], target: i0.FactoryTarget.Injectable });\nNgxTippyService.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyService, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.RendererFactory2 }, { type: DevModeService }, { type: NgxViewService }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_MESSAGES]\n                }] }]; } });\n\n/**\n * Tippy singleton - single tippy element that takes the place of an array of regular tippy instances\n */\nclass NgxTippySingletonComponent {\n    constructor(platform, ngxTippyService, messagesDict, ngxTippyConfig) {\n        this.platform = platform;\n        this.ngxTippyService = ngxTippyService;\n        this.messagesDict = messagesDict;\n        this.ngxTippyConfig = ngxTippyConfig;\n    }\n    ngAfterViewInit() {\n        if (isPlatformServer(this.platform))\n            return;\n        this.setSingleton();\n    }\n    ngOnDestroy() {\n        this.clearSingletonInstance();\n    }\n    /**\n     * Take projected in component tooltips element\n     * Take initiated tippy instances\n     * Initiate `singleton addon` only for projected tooltips for current component instance\n     */\n    setSingleton() {\n        const contentWrapperNativeEl = this.contentWrapper.nativeElement;\n        const singletonTooltipIDs = Array.from(contentWrapperNativeEl.querySelectorAll('[data-tippy-singleton]')).map((el) => el._tippy.id);\n        const tippyInstances = this.ngxTippyService.getInstances();\n        const tippyInstancesSerialized = tippyInstances && [...tippyInstances.values()];\n        this.currentSingletonChildrenTippyInstances =\n            tippyInstancesSerialized &&\n                tippyInstancesSerialized.filter(tippyInstance => singletonTooltipIDs.includes(tippyInstance.id));\n        if (this.currentSingletonChildrenTippyInstances?.length) {\n            this.initTippySingletonEntry(this.currentSingletonChildrenTippyInstances);\n        }\n        else {\n            throw new Error(this.messagesDict.childrenInstancesNotFoundSingleton);\n        }\n    }\n    initTippySingletonEntry(childrenSingletonInstances) {\n        this.singletonInstance = createSingleton(childrenSingletonInstances, {\n            ...this.ngxTippyConfig,\n            ...this.singletonProps,\n        });\n        this.writeSingletonInstanceToStorage(this.singletonInstance);\n    }\n    /**\n     * To manipulate singleton groups, write all instances to storage\n     * `singletonName` used as unique key\n     * If `singletonName` does not provided - it will be generated using id of singletonInstance\n     *\n     * @param tippyInstance { NgxTippySingletonInstance }\n     */\n    writeSingletonInstanceToStorage(singletonInstance) {\n        const extendedSingletonInstance = this.extendShowFn(singletonInstance);\n        this.ngxTippyService.setSingletonInstance(this.singletonName || `singleton-${singletonInstance.id}`, extendedSingletonInstance);\n    }\n    /**\n     * Extend original `show` method\n     * Purpose: manipulate tooltip state by [tippyName]\n     *\n     * @param singletonInstance { NgxTippySingletonInstance }\n     * @returns { NgxTippySingletonInstance }\n     */\n    extendShowFn(singletonInstance) {\n        const originalShowFn = singletonInstance.show;\n        singletonInstance.show = (singletonInstanceIdentifier) => {\n            if (typeof singletonInstanceIdentifier === 'string') {\n                const instance = this.ngxTippyService.getInstance(singletonInstanceIdentifier);\n                instance && originalShowFn(instance);\n            }\n            else {\n                originalShowFn(singletonInstanceIdentifier);\n            }\n        };\n        return singletonInstance;\n    }\n    clearSingletonInstance() {\n        const singletonInstances = this.ngxTippyService.getSingletonInstances();\n        if (singletonInstances && this.singletonInstance) {\n            this.destroySingletonInstance();\n            this.deleteEntryInStorage(singletonInstances);\n        }\n    }\n    destroySingletonInstance() {\n        this.singletonInstance.destroy();\n    }\n    deleteEntryInStorage(singletonInstances) {\n        singletonInstances.delete(this.singletonName || `singleton-${this.singletonInstance.id}`);\n    }\n}\nNgxTippySingletonComponent.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippySingletonComponent, deps: [{ token: PLATFORM_ID }, { token: NgxTippyService }, { token: NGX_TIPPY_MESSAGES }, { token: NGX_TIPPY_CONFIG }], target: i0.FactoryTarget.Component });\nNgxTippySingletonComponent.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"14.2.12\", type: NgxTippySingletonComponent, selector: \"ngx-tippy-singleton\", inputs: { singletonProps: \"singletonProps\", singletonName: \"singletonName\" }, viewQueries: [{ propertyName: \"contentWrapper\", first: true, predicate: [\"contentWrapper\"], descendants: true, read: ElementRef }], ngImport: i0, template: `\n    <div #contentWrapper>\n      <ng-content></ng-content>\n    </div>\n  `, isInline: true });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippySingletonComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'ngx-tippy-singleton',\n                    template: `\n    <div #contentWrapper>\n      <ng-content></ng-content>\n    </div>\n  `,\n                }]\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: NgxTippyService }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_MESSAGES]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_CONFIG]\n                }] }]; }, propDecorators: { singletonProps: [{\n                type: Input\n            }], singletonName: [{\n                type: Input\n            }], contentWrapper: [{\n                type: ViewChild,\n                args: ['contentWrapper', { read: ElementRef, static: false }]\n            }] } });\n\nclass NgxTippyDirective {\n    constructor(tippyEl, renderer, ngxTippyService, ngxViewService, viewContainerRef, platform, ngxTippyConfig) {\n        this.tippyEl = tippyEl;\n        this.renderer = renderer;\n        this.ngxTippyService = ngxTippyService;\n        this.ngxViewService = ngxViewService;\n        this.viewContainerRef = viewContainerRef;\n        this.platform = platform;\n        this.ngxTippyConfig = ngxTippyConfig;\n        this.cachedInstances = new Map();\n    }\n    ngOnInit() {\n        if (isPlatformServer(this.platform))\n            return;\n        this.ngxViewService.viewContainerRef = this.viewContainerRef;\n        this.initTippy();\n    }\n    ngOnChanges(changes) {\n        this.handleChanges(changes);\n    }\n    ngOnDestroy() {\n        this.destroyTippy();\n    }\n    /**\n     * Tooltip initialize\n     * Content can be directly passed through `ngxTippy` selector\n     */\n    initTippy() {\n        const tippyTarget = this.tippyEl.nativeElement;\n        if (this.ngxTippy === null || this.ngxTippy === undefined)\n            return;\n        const viewRef = this.ngxViewService.getViewRefInstance(this.ngxTippy, this.tippyName, this.tippyContext);\n        const tippyElement = viewRef.getElement();\n        const tInstance = tippy(tippyTarget, {\n            ...(this.ngxTippyConfig),\n            ...(this.tippyProps || {}),\n            ...(tippyElement && { content: tippyElement }),\n        });\n        this.tippyName = this.tippyName || `tippy-${tInstance.id}`;\n        setTemplateVisible(tippyElement, this.renderer);\n        this.setTippyInstance({ tippyTarget, tippyName: this.tippyName, viewRef });\n        this.setClassName(this.tippyInstance, this.tippyClassName);\n        this.writeInstancesToStorage(this.tippyInstance, this.tippyName);\n    }\n    setTippyInstance({ tippyTarget, tippyName, viewRef, }) {\n        this.tippyInstance = { ...tippyTarget._tippy, tippyName, viewRef };\n    }\n    setClassName(tippyInstance, className) {\n        if (!className || !tippyInstance)\n            return;\n        const classNames = className.split(' ');\n        classNames.length &&\n            classNames.forEach(className => {\n                this.renderer.addClass(tippyInstance.popper.firstElementChild, className);\n            });\n    }\n    removeClassName(tippyInstance, className) {\n        if (!className || !tippyInstance)\n            return;\n        const classNames = className.split(' ');\n        classNames.length &&\n            classNames.forEach(className => {\n                this.renderer.removeClass(tippyInstance.popper.firstElementChild, className);\n            });\n    }\n    /**\n     * To manipulate tooltips, write all instances to storage\n     * `tippyName` used as unique key\n     * If `tippyName` does not provided - it will be generated using `tippyInstance.id`\n     *\n     * @param tippyInstance { NgxTippyInstance }\n     */\n    writeInstancesToStorage(tippyInstance, tippyName) {\n        tippyInstance && this.ngxTippyService.setInstance(tippyName, tippyInstance);\n    }\n    handleChanges({ tippyName, ngxTippy, tippyProps, tippyClassName, tippyContext }) {\n        tippyName && !tippyName.firstChange && this.handleNameChanges(tippyName);\n        ngxTippy && !ngxTippy.firstChange && this.handleContentChanges(ngxTippy);\n        tippyProps && !tippyProps.firstChange && this.handlePropsChanges(tippyProps);\n        tippyClassName && !tippyClassName.firstChange && this.handleClassChanges(tippyClassName);\n        tippyContext && !tippyContext.firstChange && this.handleContextChanges(tippyContext);\n    }\n    handleNameChanges({ previousValue, currentValue }) {\n        const tippyInstances = this.cachedTippyInstances();\n        if (!tippyInstances || !this.tippyInstance)\n            return;\n        this.deleteEntryInStorage(tippyInstances, previousValue);\n        this.tippyInstance = { ...this.tippyInstance, tippyName: currentValue };\n        tippyInstances.set(currentValue, this.tippyInstance);\n    }\n    handleContentChanges({ currentValue }) {\n        if (this.tippyInstance && this.tippyName) {\n            this.ngxTippyService.setContent(this.tippyName, currentValue);\n            if (currentValue === null || currentValue === undefined) {\n                this.ngxTippyService.disable(this.tippyName);\n            }\n            else {\n                this.ngxTippyService.enable(this.tippyName);\n            }\n        }\n        else {\n            this.initTippy();\n        }\n    }\n    handlePropsChanges({ currentValue }) {\n        this.tippyName && this.ngxTippyService.setProps(this.tippyName, currentValue);\n    }\n    handleClassChanges({ previousValue, currentValue }) {\n        this.removeClassName(this.tippyInstance, previousValue);\n        this.setClassName(this.tippyInstance, currentValue);\n    }\n    handleContextChanges({ currentValue }) {\n        if (this.tippyInstance && this.tippyName && this.ngxTippy) {\n            this.ngxTippyService.setContent(this.tippyName, this.ngxTippy, currentValue);\n        }\n        else {\n            this.initTippy();\n        }\n    }\n    cachedTippyInstances() {\n        const tippyInstances = this.ngxTippyService.getInstances();\n        if (this.cachedInstances.has(tippyInstances)) {\n            return this.cachedInstances.get(tippyInstances);\n        }\n        else {\n            this.cachedInstances.set(tippyInstances, tippyInstances);\n            return tippyInstances;\n        }\n    }\n    destroyTippy() {\n        const tippyInstances = this.cachedTippyInstances();\n        const tippyInstance = this.tippyInstance;\n        if (!tippyInstance || !tippyInstances)\n            return;\n        this.clearInstance({ tippyInstance, tippyInstances });\n        this.resetLocalInstance();\n        this.clearCachedInstances();\n    }\n    clearInstance({ tippyInstance, tippyInstances, }) {\n        const { tippyName } = tippyInstance;\n        this.clearViewRef(tippyInstance);\n        this.destroyTippyInstance(tippyInstance);\n        this.deleteEntryInStorage(tippyInstances, tippyName);\n    }\n    clearViewRef(tippyInstance) {\n        tippyInstance.viewRef?.destroy && tippyInstance.viewRef.destroy();\n    }\n    destroyTippyInstance(tippyInstance) {\n        tippyInstance.destroy();\n    }\n    deleteEntryInStorage(tippyInstances, tippyName) {\n        tippyInstances.delete(tippyName);\n    }\n    resetLocalInstance() {\n        this.tippyInstance = undefined;\n    }\n    clearCachedInstances() {\n        this.cachedInstances.clear();\n    }\n}\nNgxTippyDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyDirective, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: NgxTippyService }, { token: NgxViewService }, { token: i0.ViewContainerRef }, { token: PLATFORM_ID }, { token: NGX_TIPPY_CONFIG }], target: i0.FactoryTarget.Directive });\nNgxTippyDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"14.2.12\", type: NgxTippyDirective, selector: \"[ngxTippy]\", inputs: { ngxTippy: \"ngxTippy\", tippyProps: \"tippyProps\", tippyName: \"tippyName\", tippyClassName: \"tippyClassName\", tippyContext: \"tippyContext\" }, usesOnChanges: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ngxTippy]',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: NgxTippyService }, { type: NgxViewService }, { type: i0.ViewContainerRef }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_CONFIG]\n                }] }]; }, propDecorators: { ngxTippy: [{\n                type: Input\n            }], tippyProps: [{\n                type: Input\n            }], tippyName: [{\n                type: Input\n            }], tippyClassName: [{\n                type: Input\n            }], tippyContext: [{\n                type: Input\n            }] } });\n\nclass NgxTippyModule {\n}\nNgxTippyModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyModule, deps: [], target: i0.FactoryTarget.NgModule });\nNgxTippyModule.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyModule, declarations: [NgxTippyDirective, NgxTippyGroupComponent, NgxTippySingletonComponent], imports: [CommonModule], exports: [NgxTippyDirective, NgxTippyGroupComponent, NgxTippySingletonComponent] });\nNgxTippyModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyModule, imports: [CommonModule] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    declarations: [NgxTippyDirective, NgxTippyGroupComponent, NgxTippySingletonComponent],\n                    exports: [NgxTippyDirective, NgxTippyGroupComponent, NgxTippySingletonComponent],\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-tippy-wrapper\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NGX_TIPPY_CONFIG, NgxTippyDirective, NgxTippyGroupComponent, NgxTippyModule, NgxTippyService, NgxTippySingletonComponent };\n","<!-- Type Text for String are Default -->\r\n\r\n{{ debugMessage() }}\r\n\r\n<!-- Only try to show something if we have a valid item and a valid preview-value -->\r\n@if (item()?.previewValue) {\r\n  @switch (settings().PreviewType) {\r\n    <!-- Type Font Icon -->\r\n    @case (\"icon-css\") {\r\n      <i class=\"icon-preview {{ classWithoutDot(item().previewValue) }}\"></i>\r\n    }\r\n    <!-- Type Material Icon -->\r\n    @case (\"icon-material\") {\r\n      <!-- TODO: ATM it can only take material icons, but in future it should be able to also take other icons, in which case the tag would have to be reworked... -->\r\n      <mat-icon>{{ item().previewValue }}</mat-icon> &nbsp;\r\n    }\r\n    <!--  Type SVG Icon -->\r\n    @case (\"svg\") {\r\n      <img [ngxTippy]=\"tippyTemplate\" class=\"image-preview\" [src]=\"item().previewValue\" [alt]=\"item().value\" />\r\n      <!-- Tippy to Show Big Image -->\r\n      <div #tippyTemplate class=\"tippy-custom\">\r\n        <img class=\"image-tippy\" [src]=\"item().previewValue\" [alt]=\"item().value\" />\r\n      </div>\r\n    }\r\n    <!-- Type Image -->\r\n    @case (\"image\") {\r\n      <!-- Small Image Preview -->\r\n      <img [ngxTippy]=\"tippyTemplate\" class=\"image-preview\" [src]=\"imageResize(item().previewValue, 24, 24)\" [alt]=\"item().value\" />\r\n      <!-- Tippy to Show Big Image -->\r\n      <div #tippyTemplate class=\"tippy-custom\">\r\n        <img class=\"image-tippy\" [src]=\"imageResize(item().previewValue, 140, 140)\" [alt]=\"item().value\" />\r\n      </div>\r\n    }\r\n  }\r\n}","import { Component, computed, input } from '@angular/core';\r\nimport { MatIcon } from '@angular/material/icon';\r\nimport { NgxTippyModule } from 'ngx-tippy-wrapper';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { PickerItem } from '../models/picker-item.model';\r\n\r\nconst debug = false;\r\n\r\n/**\r\n * Preview as an image/icon of an item.\r\n */\r\n@Component({\r\n  selector: 'app-picker-item-preview',\r\n  templateUrl: './picker-item-preview.html',\r\n  styleUrl: './picker-item-preview.scss',\r\n  imports: [\r\n    MatIcon,\r\n    NgxTippyModule,\r\n  ]\r\n})\r\nexport class PickerItemPreviewComponent {\r\n\r\n  item = input.required<PickerItem>();\r\n\r\n  settings = input.required<FieldSettingsWithPickerSource>();\r\n\r\n  debugMessage = computed(() => {\r\n    if (!debug) return '';\r\n\r\n    const settings = this.settings();\r\n    const previewType = settings.PreviewType;\r\n\r\n    const item = this.item();\r\n\r\n    const msg = `Debug:: Preview type: ${previewType}; PreviewValue: '${item?.previewValue}'; Item: ${JSON.stringify(item)}`;\r\n    console.log('debug message', msg, item);\r\n    return '';\r\n  });\r\n\r\n  /** Remove the dot from the class name, as it would be wrong in the class-attribute. */\r\n  classWithoutDot(value: string): string {\r\n    return value?.replace(/\\./g, '');\r\n  }\r\n\r\n  imageResize(originalImage: string, width: number, height: number): string {\r\n\r\n    if (!originalImage) return originalImage;\r\n\r\n    // Remove w and h parameters completely\r\n    let optimizedImage = originalImage\r\n      .replace(/[\\?&]w=\\d+/g, '')  // Remove w parameter\r\n      .replace(/[\\?&]h=\\d+/g, ''); // Remove h parameter\r\n\r\n    // Replace width and height if they exist\r\n    optimizedImage = optimizedImage\r\n      .replace(/width=\\d+/g, `width=${width}`)\r\n      .replace(/height=\\d+/g, `height=${height}`);\r\n\r\n    // If width is not present, add it\r\n    if (!optimizedImage.includes('width='))\r\n      optimizedImage += (optimizedImage.includes('?') ? '&' : '?') + `width=${width}`;\r\n\r\n    // If height is not present, add it\r\n    if (!optimizedImage.includes('height='))\r\n      optimizedImage += (optimizedImage.includes('?') ? '&' : '?') + `height=${height}`;\r\n\r\n    return optimizedImage;\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"picker-option-contents\">\r\n  <!-- Preview Type -->\r\n  <div class=\"picker-option\">\r\n    <!-- Show Icon or Image -->\r\n    <app-picker-item-preview [item]=\"item()\" [settings]=\"settings()\"></app-picker-item-preview>\r\n    <span class=\"picker-option-label\"> {{ item().label || item().value }}</span>\r\n  </div>\r\n\r\n  <div class=\"picker-option-info\">\r\n    <!-- Show feature warnings if available. Do this first, to avoid the icons from fluttering back and forth -->\r\n    @for (feature of featureWarnings(); track feature)\r\n    {\r\n      <app-feature-icon-with-dialog [featureNameId]=\"feature\"></app-feature-icon-with-dialog>\r\n    }\r\n    <!-- Action items such as edit, remove, delete - in scenarios where they should be in front of the (i) etc. to avoid fluttering -->\r\n    @if (actionsFirst()) {\r\n      <app-picker-item-buttons class=\"my-item-actions\" [show]=\"show()\" [item]=\"item()\" [index]=\"index()\" [uiFeatures]=\"uiFeatures()\"></app-picker-item-buttons>\r\n    }\r\n    <app-picker-help [helpLink]=\"item().link\"></app-picker-help>\r\n    <app-picker-icon-info [infoBox]=\"item().info\"></app-picker-icon-info>\r\n    <!-- Action items such as edit, remove, delete -->\r\n    @if (!actionsFirst()) {\r\n      <app-picker-item-buttons class=\"my-item-actions\" [show]=\"show()\" [item]=\"item()\" [index]=\"index()\" [uiFeatures]=\"uiFeatures()\"></app-picker-item-buttons>\r\n    }\r\n  </div>\r\n</div>\r\n","import { Component, computed, input } from '@angular/core';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { FeatureIconWithDialogComponent } from '../../../../features/icons/feature-icon-with-dialog';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerFeaturesItem } from '../picker-features.model';\r\nimport { PickerIconHelpComponent } from '../picker-icon-help/picker-icon-help';\r\nimport { PickerIconInfoComponent } from '../picker-icon-info/picker-icon-info';\r\nimport { PickerItemButtonsComponent } from '../picker-item-buttons/picker-item-buttons';\r\nimport { PickerItemPreviewComponent } from '../picker-item-preview/picker-item-preview';\r\n\r\n@Component({\r\n  selector: 'app-picker-item-label',\r\n  imports: [\r\n    PickerItemPreviewComponent,\r\n    PickerIconHelpComponent,\r\n    PickerIconInfoComponent,\r\n    PickerItemButtonsComponent,\r\n    FeatureIconWithDialogComponent,\r\n  ],\r\n  templateUrl: './picker-item-label.html',\r\n  styleUrl: './picker-item-label.scss'\r\n})\r\nexport class PickerPreviewLabelComponent {\r\n  /** The item to show the label/buttons for */\r\n  item = input.required<PickerItem>();\r\n\r\n  /** The item index, important for certain button actions */\r\n  index = input<number>(0);\r\n\r\n  /** Settings, mainly for the preview feature such as icon etc. */\r\n  settings = input.required<FieldSettingsWithPickerSource>();\r\n\r\n  /** UI Features can let the control determine that certain buttons shouldn't be available, eg. \"remove\" on radio-button */\r\n  uiFeatures = input<Partial<PickerFeaturesItem>>(null);\r\n\r\n  /** If the buttons should show or not - I believe ATM it's always true */\r\n  show = input<boolean>(false);\r\n\r\n  /** Show the action-buttons before the (i) buttons */\r\n  actionsFirst = input<boolean>(false);\r\n\r\n  featureWarnings = computed(() => {\r\n    const conditions = this.item().rules;\r\n    if (!conditions) return [];\r\n    const list = conditions\r\n      .split(';')\r\n      .map(c => c.trim())\r\n      .filter(c => c.startsWith('warn-req=feature:'))\r\n      .map(c => c.split(':')[1]);\r\n    console.log('list', list);\r\n    return list;\r\n  }, { debugName: 'featureWarnings' });\r\n}\r\n","\r\ninterface PickerSourceBase {\r\n  Title: string;\r\n\r\n  ConfigModel: 'UiPickerModeTree';\r\n}\r\n\r\nexport interface UiPickerModeTree extends PickerSourceBase {\r\n  TreeRelationship: typeof RelationshipParentChild | typeof RelationshipChildParent; //child-parent or parent-child\r\n  TreeBranchesStream: string;\r\n  TreeLeavesStream: string;\r\n  TreeParentIdField: string;\r\n  TreeChildIdField: string;\r\n  TreeParentChildRefField: string;\r\n  TreeChildParentRefField: string;\r\n\r\n  TreeShowRoot: boolean;\r\n  TreeDepthMax: number;\r\n\r\n  TreeAllowSelectRoot: boolean;\r\n  TreeAllowSelectBranch: boolean;\r\n  TreeAllowSelectLeaf: boolean;\r\n}\r\n\r\nexport const RelationshipParentChild = 'parent-child';\r\nexport const RelationshipChildParent = 'child-parent';\r\n","import { FlatTreeControl } from '@angular/cdk/tree';\r\nimport { Injectable } from '@angular/core';\r\nimport { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree';\r\nimport { RelationshipChildParent, RelationshipParentChild, UiPickerModeTree } from '../../../../../../../edit-types/src/PickerModeTree';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerTreeItem } from '../models/picker-tree.models';\r\n\r\n@Injectable()\r\nexport class PickerTreeDataHelper {\r\n  \r\n  log = classLog({PickerTreeDataHelper});\r\n\r\n  #pickerTreeConfiguration: UiPickerModeTree;\r\n  #treeItems: PickerTreeItem[];\r\n\r\n  dataSource: MatTreeFlatDataSource<PickerItem, PickerTreeItem, PickerTreeItem>\r\n\r\n  constructor() {\r\n    this.build();\r\n  }\r\n\r\n  public updateConfig(pickerConfig: UiPickerModeTree) {\r\n    this.log.a('updateConfigAndSelectedData');\r\n    // set config, which will be accessed on 'this.' whenever it's needed\r\n    this.#pickerTreeConfiguration = pickerConfig;\r\n  }\r\n\r\n  public addTreeItems(treeItems: PickerTreeItem[]) {\r\n    this.log.a('addTreeItems');\r\n    this.#treeItems = treeItems;\r\n  }\r\n\r\n  public updateSelectedData(selectedData: PickerItem[]) {\r\n    this.log.a('updateSelectedData');\r\n    this.dataSource.data = selectedData;\r\n  }\r\n\r\n  public preConvertAllItems(treeConfig: UiPickerModeTree, items: PickerItem[]) {\r\n    this.log.a('preConvertAllItemsToTreeItems', { treeConfig, items });\r\n    const convertedItems = items.map(x => this.#preConvertItemToTreeItem(treeConfig, x, items));\r\n\r\n    // todo: establish relationships\r\n    const withChildren = convertedItems.map(x => {\r\n      if (!x.expandable) return x;\r\n      const children = this.#getChildren(treeConfig, x, convertedItems);\r\n      // important: don't use spread, we really want to modify the object\r\n      // so that all object correctly reference each other\r\n      x.children = children;\r\n      return x;\r\n      // return { ...x, children };\r\n    });\r\n    // todo: open collapse first level...\r\n\r\n    return withChildren;\r\n  }\r\n\r\n  #preConvertItemToTreeItem(treeConfig: UiPickerModeTree, item: PickerItem, allItems: PickerItem[]) {\r\n    // Log and do some initial checks\r\n    this.log.a(`preConvertItemToTreeItem for item ${item?.id}`, { treeConfig, item, allItems });\r\n    if (!treeConfig) throw new Error('No tree configuration found');\r\n    if (!item) throw new Error(\"Can't transform null-item\");\r\n\r\n    // Get the tree configuration\r\n    const isParentChild = treeConfig.TreeRelationship == RelationshipParentChild;\r\n    const cpRef = treeConfig.TreeChildParentRefField;\r\n    const pcRef = treeConfig.TreeParentChildRefField;\r\n    const cId = treeConfig.TreeChildIdField;\r\n    const pId = treeConfig.TreeParentIdField;\r\n    const cStreamName = treeConfig.TreeLeavesStream;\r\n    const pStreamName = treeConfig.TreeBranchesStream;\r\n    const itemInCorrectStream = allItems\r\n      .filter(x => !x.sourceStreamName || x.sourceStreamName == pStreamName)\r\n      .find(x => x == item);\r\n\r\n    // figure out if this node can be expanded\r\n    // todo: first variant isParentChild probably doesn't work yet\r\n    const currentId = item?.data?.[pId];\r\n    const expandable = isParentChild\r\n      ? itemInCorrectStream && (item.data[pcRef]?.length > 0 || false)\r\n      : itemInCorrectStream && !!allItems.find(x => {\r\n        return (x.data[cpRef]?.[0]?.[pId] == currentId)\r\n      }\r\n      );\r\n\r\n    const result: PickerTreeItem = {\r\n      ...item,\r\n      level: -1,\r\n      expandable: expandable,\r\n      parent: item.data[cpRef],\r\n      children: item.data[pcRef],\r\n    };\r\n    this.log.a('result', { result });\r\n    return result;\r\n  }\r\n\r\n  public build() {\r\n    this.log.a('build');\r\n\r\n    const treeFlattener = new MatTreeFlattener(\r\n      // transformFunction converts an item to a tree-item\r\n      (item: PickerTreeItem, level: number): PickerTreeItem => ({\r\n        ...item,\r\n        level,\r\n      }),\r\n\r\n      // getLevel\r\n      (item): number => { return item.level; },\r\n\r\n      // isExpandable\r\n      (item): boolean => { return item.expandable; },\r\n\r\n      // getChildren\r\n      (item): PickerTreeItem[] => {\r\n        // TODO: @2dm - must determine which method is better\r\n        // getting them here is a bit more functional, but the other model doesn't need the catalog to be stored separately\r\n\r\n        // return item.children; //\r\n        // const getChildren = this.getChildren(this.pickerTreeConfiguration, item, this.treeItems);\r\n        // console.warn('2dm item', item, 'getChildren', getChildren, 'item.children', item.children)\r\n        // return getChildren;\r\n        return item.children;\r\n      },\r\n    );\r\n\r\n    this.dataSource = new MatTreeFlatDataSource(this.treeControl, treeFlattener);\r\n  }\r\n\r\n  #getChildren(treeConfig: UiPickerModeTree, item: PickerTreeItem, allItems: PickerTreeItem[]) {\r\n    const isParentChild = treeConfig.TreeRelationship == RelationshipParentChild;\r\n    const cpRef = treeConfig.TreeChildParentRefField;\r\n    const pcRef = treeConfig.TreeParentChildRefField;\r\n    const cId = treeConfig.TreeChildIdField;\r\n    const pId = treeConfig.TreeParentIdField;\r\n    if (isParentChild)\r\n      return item.data[pcRef].map((x: any) => {\r\n        const child = allItems.find(y => (y as any)[cId] == (x as any)[cId]);\r\n        return child;\r\n      });\r\n    else if (treeConfig.TreeRelationship == RelationshipChildParent) {\r\n      const itemParentValue = item.data?.[pId];\r\n      // console.log(`RelationshipChildParent - 2dm for parentIdField: '${pId}' on item: '${itemParentValue}' with parent having id field '${cId}' `);\r\n      return allItems.filter(x => {\r\n        const childParentId = x.data[cpRef]?.[0]?.[pId];\r\n        return childParentId == itemParentValue;\r\n      });\r\n    }\r\n    else\r\n      throw new Error(`Unknown tree relationship: \"${treeConfig?.TreeRelationship}\"`);\r\n  }\r\n\r\n  /** Needed by material tree to somehow determine the properties */\r\n  treeControl = new FlatTreeControl<PickerTreeItem>(\r\n    item => item.level,\r\n    item => item.expandable,\r\n  );\r\n\r\n\r\n  disableOption(item: PickerTreeItem, selected: PickerItem[], enableReselect: boolean): boolean {\r\n    const treeConfig = this.#pickerTreeConfiguration;\r\n    const selectedButNoReselect = enableReselect\r\n      ? false\r\n      : selected.some(entity => entity.value === item.value);\r\n\r\n    // test code to verify functionality\r\n    // if (item.label?.indexOf('Kawasaki') > -1) {\r\n    //   this.log.enabled = true;\r\n    //   this.log.add('disableOption', item, selected, enableReselect, selectedButNoReselect);\r\n    //   this.log.enabled = false;\r\n    // }\r\n\r\n    const isRootButRootNotAllowed = treeConfig?.TreeAllowSelectRoot\r\n      ? false\r\n      : item.children?.length > 0 && item.parent?.length === 0;\r\n    const isBranchButBranchNotAllowed = treeConfig?.TreeAllowSelectBranch\r\n      ? false\r\n      : item.children?.length > 0 && item.parent?.length > 0;\r\n    const isLeafButLeafNotAllowed = treeConfig?.TreeAllowSelectLeaf\r\n      ? false\r\n      : item.children?.length === 0;\r\n    return selectedButNoReselect || isRootButRootNotAllowed || isBranchButBranchNotAllowed || isLeafButLeafNotAllowed;\r\n  }\r\n\r\n  hasChild = (_: number, item: PickerTreeItem) => item.expandable;\r\n}\r\n","import { Injectable, Injector, Signal, effect, runInInjectionContext } from '@angular/core';\r\nimport { FieldSettingsPicker } from 'projects/edit-types/src/FieldSettings-Pickers';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { RelationshipParentChild } from '../../../../../../../edit-types/src/PickerModeTree';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerTreeItem } from '../models/picker-tree.models';\r\nimport { PickerTreeDataHelper } from './picker-tree-data-helper';\r\n\r\n@Injectable()\r\nexport class PickerTreeDataService {\r\n\r\n  log = classLog({PickerTreeDataService});\r\n\r\n  constructor(public treeHelper: PickerTreeDataHelper, private inject: Injector) { }\r\n\r\n  public init(fieldSettings: Signal<FieldSettings>, allItems: Signal<PickerItem[]>) {\r\n    this.log.a('init');\r\n\r\n    const settings = fieldSettings() as FieldSettings & FieldSettingsPicker;\r\n    const isTree = settings.PickerDisplayMode === 'tree';\r\n\r\n    // if not tree, quit early, nothing has to work then\r\n    if (!isTree) return;\r\n\r\n    // as of now, the tree config can not change at runtime, so pick up early\r\n    const treeConfig = settings.PickerTreeConfiguration;\r\n    const relationshipIsParentChild = treeConfig?.TreeRelationship == RelationshipParentChild;\r\n\r\n    runInInjectionContext(this.inject, () => {\r\n      effect(() => {\r\n        const all = allItems();\r\n        // if the objects don't have a data property, we can't convert them to tree items\r\n        // todo: not sure why this happens, possibly early cycles don't have it yet?\r\n        const treeItems = all?.[0]?.data == null\r\n          ? [] as PickerTreeItem[]\r\n          : this.treeHelper.preConvertAllItems(treeConfig, all);\r\n\r\n        if (treeItems?.[0]?.data != undefined) {\r\n          this.treeHelper.updateConfig(treeConfig);\r\n          this.treeHelper.addTreeItems(treeItems);\r\n\r\n          const filteredData = treeItems.filter(x => relationshipIsParentChild //check for two streams type also\r\n            ? !treeItems.some(y => y.data[treeConfig?.TreeParentChildRefField]?.some((z: { Id: number; }) => z.Id === x.id))\r\n            : x.data[treeConfig?.TreeChildParentRefField]?.length == 0);\r\n          this.treeHelper.updateSelectedData(filteredData);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n","<mat-form-field\r\n  [formGroup]=\"fieldState.group\"\r\n  class=\"eav-mat-form-field my-search\"\r\n  color=\"accent\"\r\n  [ngClass]=\"{ 'mat-form-field-invalid': ui().touchedAndInvalid }\"\r\n  (click)=\"filterSelectionList()\"\r\n>\r\n  <!-- Show Icon or Image -->\r\n  <div class=\"show-input-container\">\r\n    <!-- Note: very patching quick style-fix to get alignment look ok. Should be researched and fixed properly -->\r\n    <app-picker-item-preview class=\"picker-container\" [item]=\"getSelectedItem(selectedItem()?.value)\" [settings]=\"fieldState.settings()\"></app-picker-item-preview>\r\n\r\n    <!-- The initial input showing the selected value - one only. As soon as there are more, this control won't show any more -->\r\n    <input\r\n      matInput\r\n      class=\"eav-translate-on-dblclick\"\r\n      #autocomplete\r\n      [matAutocomplete]=\"auto\"\r\n      [value]=\"displaySelected(selectedItem())\"\r\n      [placeholder]=\"getPlaceholder()\"\r\n      [disabled]=\"ui().disabled || !settings().enableAddExisting\"\r\n      [tippy]=\"tooltip()\"\r\n      [tippyArrow]=\"true\"\r\n      (focus)=\"pickerData.source.fetchItems()\"\r\n      (blur)=\"markAsTouched()\"\r\n      (input)=\"filterSelectionList()\"\r\n    />\r\n  </div>\r\n\r\n  <!-- Action items such as edit, remove, delete -->\r\n  <app-picker-item-buttons\r\n    matSuffix\r\n    class=\"my-item-actions\"\r\n    [show]=\"showItemEditButtons()\"\r\n    [item]=\"selectedItem()\"\r\n    [index]=\"0\"\r\n  ></app-picker-item-buttons>\r\n\r\n  <!-- \"v\" button to open the drop-down -->\r\n  <button\r\n    mat-icon-button\r\n    matSuffix\r\n    class=\"entity-dropdown-button picker-inline-button\"\r\n    disableRipple=\"true\"\r\n    [disabled]=\"ui().disabled || !settings().enableAddExisting\"\r\n  >\r\n    <mat-icon>arrow_drop_down</mat-icon>\r\n  </button>\r\n\r\n  <!-- Toggle Text Mode -->\r\n  @if (features().textEntry) {\r\n    <span matSuffix>\r\n      <ng-content select=\"[freeTextButtons]\"></ng-content>\r\n    </span>\r\n  }\r\n\r\n  <!-- Help text / error messages -->\r\n  <mat-label [ngClass]=\"{ 'mat-error': ui().touchedAndInvalid }\">\r\n    {{ basics().labelWithRequired }}\r\n  </mat-label>\r\n</mat-form-field>\r\n\r\n<mat-autocomplete\r\n  #auto=\"matAutocomplete\"\r\n  [displayWith]=\"displayFn.bind(this)\"\r\n  [hideSingleSelectionIndicator]=\"true\"\r\n  (optionSelected)=\"optionSelected($event)\"\r\n  (closed)=\"onClosed()\"\r\n  (opened)=\"onOpened(settings().showAsTree)\"\r\n>\r\n  @if (!settings().showAsTree) {\r\n    <!-- Standard List-Search Mode -->\r\n    @for (item of filteredItems(); track item.value) {\r\n      <mat-option\r\n        [value]=\"item.value\"\r\n        class=\"picker-option-wrapper\"\r\n        [disabled]=\"item.noSelect ? true : settings().enableReselect ? false : isOptionDisabled(item.value)\"\r\n        [tippy]=\"item.tooltip\"\r\n        tippyShowDelay=\"500\"\r\n        [tippyAllowHtml]=\"true\"\r\n        [tippyArrow]=\"true\"\r\n      >\r\n        <!-- Show Preview Label -->\r\n        <app-picker-item-label [item]=\"item\" [settings]=\"fieldState.settings()\"></app-picker-item-label>\r\n      </mat-option>\r\n    }\r\n  } @else {\r\n    <!-- Tree Search Mode (BETA not really working) -->\r\n    <mat-tree [dataSource]=\"treeHelper.dataSource\" [treeControl]=\"treeHelper.treeControl\">\r\n      <mat-tree-node *matTreeNodeDef=\"let item\" matTreeNodePadding class=\"eav-tree-node\">\r\n        <button mat-icon-button disabled></button>\r\n        <mat-option\r\n          [value]=\"item.value\"\r\n          class=\"picker-option-wrapper\"\r\n          [disabled]=\"treeHelper.disableOption(item, selectedItems(), settings().enableReselect)\"\r\n          [tippy]=\"item.tooltip\"\r\n          tippyShowDelay=\"500\"\r\n          [tippyAllowHtml]=\"true\"\r\n          [tippyArrow]=\"true\"\r\n        >\r\n          <!-- Show Preview Label -->\r\n          <app-picker-item-label [item]=\"item\" [settings]=\"fieldState.settings()\"></app-picker-item-label>\r\n        </mat-option>\r\n      </mat-tree-node>\r\n      <mat-tree-node *matTreeNodeDef=\"let item; when: hasChild\" matTreeNodePadding class=\"eav-tree-node\">\r\n        <button mat-icon-button matTreeNodeToggle [attr.aria-label]=\"'Toggle ' + item.name\">\r\n          <mat-icon class=\"mat-icon-rtl-mirror\">\r\n            {{ treeHelper.treeControl.isExpanded(item) ? \"expand_more\" : \"chevron_right\" }}\r\n          </mat-icon>\r\n        </button>\r\n        <mat-option\r\n          [value]=\"item.value\"\r\n          class=\"picker-option-wrapper\"\r\n          [disabled]=\"treeHelper.disableOption(item, selectedItems(), settings().enableReselect)\"\r\n          [tippy]=\"item.tooltip\"\r\n          tippyShowDelay=\"500\"\r\n          [tippyAllowHtml]=\"true\"\r\n          [tippyArrow]=\"true\"\r\n        >\r\n          <!-- Show Preview Label -->\r\n          <app-picker-item-label [item]=\"item\" [settings]=\"fieldState.settings()\"></app-picker-item-label>\r\n        </mat-option>\r\n      </mat-tree-node>\r\n    </mat-tree>\r\n  }\r\n</mat-autocomplete>\r\n\r\n<!-- Button to add null-item, in debug-mode only -->\r\n@if (debugEnabled()) {\r\n  <div class=\"null-box\">debug: <span class=\"null-button\" tippy=\"Add null-item\" (click)=\"insertNull()\">add null-item</span></div>\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, ElementRef, OnInit, input, viewChild } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatAutocompleteModule, MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatTreeModule } from '@angular/material/tree';\r\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { GlobalConfigService } from '../../../../shared/services/global-config.service';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../../edit-debug';\r\nimport { PickerItem, PickerItemFactory } from '../models/picker-item.model';\r\nimport { PickerTreeItem } from '../models/picker-tree.models';\r\nimport { PickerItemButtonsComponent } from '../picker-item-buttons/picker-item-buttons';\r\nimport { PickerPreviewLabelComponent } from '../picker-item-label/picker-item-label';\r\nimport { PickerItemPreviewComponent } from '../picker-item-preview/picker-item-preview';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\nimport { PickerTreeDataHelper } from '../picker-tree/picker-tree-data-helper';\r\nimport { PickerTreeDataService } from '../picker-tree/picker-tree-data-service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  optionSelected: true,\r\n  focusOnSearchComponent: false,\r\n  onClosed: true,\r\n  onOpened: true,\r\n  tooltip: false,\r\n  fields: [...DebugFields, 'Author'],\r\n}\r\n\r\n@Component({\r\n  selector: 'app-picker-search',\r\n  templateUrl: './picker-search.html',\r\n  styleUrls: ['./picker-search.scss'],\r\n  imports: [\r\n    MatFormFieldModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgClass,\r\n    MatInputModule,\r\n    MatAutocompleteModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatOptionModule,\r\n    MatTreeModule,\r\n    TranslateModule,\r\n    PickerItemButtonsComponent,\r\n    TippyDirective,\r\n    PickerPreviewLabelComponent,\r\n    PickerItemPreviewComponent,\r\n  ]\r\n})\r\nexport class PickerSearchComponent extends PickerPartBaseComponent implements OnInit {\r\n\r\n  /** Main log */\r\n  log = classLog({ PickerSearchComponent }, logSpecs);\r\n\r\n  /** Special log which would fire a lot for each item doing disabled checks etc. */\r\n  #logItemChecks = classLog(`PickerSearchComponent-ItemChecks`);\r\n\r\n  //#region Inputs\r\n\r\n  /** The input field for the search */\r\n  autocomplete = viewChild.required<ElementRef<HTMLInputElement>>('autocomplete');\r\n\r\n  /** Determine if the input field shows the selected items. eg. not when in dialog where it's just a search-box */\r\n  showSelectedItem = input.required<boolean>();\r\n\r\n  /** Determine if edit buttons are possible, eg. not in preview */\r\n  showItemEditButtons = input.required<boolean>();\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * The tree helper which is used by the tree display.\r\n   * Will only be initialized if we're really showing a tree.\r\n   */\r\n  #treeDataService = transient(PickerTreeDataService);\r\n  public treeHelper = transient(PickerTreeDataHelper);\r\n\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private globalConfigService: GlobalConfigService,\r\n  ) { super(); }\r\n\r\n  /** Currently selected 1 item, as this input will only ever show 1 and it needs to know if certain edit buttons should be shown. */\r\n  public selectedItem = computedObj('selectedItems', () => this.pickerData.selectedOne());\r\n\r\n  /** special trigger to recalculate filtered items; not ideal, should happen automatically */\r\n  #reFilter = signalObj('reFilter', false);\r\n\r\n  public filteredItems = computedObj('filteredItems', () => {\r\n    const _ = this.#reFilter(); // just make a dependency\r\n    const all = this.pickerData.optionsAll();\r\n    const filterInDom = this.autocomplete()?.nativeElement.value;\r\n    const filter = filterInDom?.toLocaleLowerCase();\r\n\r\n    const result = !filter\r\n      ? all\r\n      : all.filter(oItem => ((oItem.label ? oItem.label : oItem.value) ?? '').toLocaleLowerCase().includes(filter));\r\n\r\n    // If the list is empty, show a message about this.\r\n    return result.length > 0\r\n      ? result\r\n      : [PickerItemFactory.message(this.translate, 'Fields.Picker.FilterNoResults', { search: filterInDom })];\r\n  });\r\n\r\n  /** Debug status for UI, mainly to show \"add-null\" button */\r\n  debugEnabled = this.globalConfigService.isDebug;\r\n\r\n  /** Current applicable settings like \"enableEdit\" etc. */\r\n  settings = computedObj('settings', () => {\r\n    const s = this.fieldState.settings();\r\n    return {\r\n      enableAddExisting: s.EnableAddExisting,\r\n      enableReselect: s.EnableReselect,\r\n      showAsTree: s.PickerDisplayMode === 'tree',\r\n    };\r\n  });\r\n\r\n\r\n  ngOnInit(): void {\r\n    const fieldSettings = this.fieldState.settings;\r\n    if (fieldSettings().PickerDisplayMode === 'tree') {\r\n      // Setup Tree Helper - but should only happen, if we're really doing trees\r\n      // Only doing this the first time, as these settings are not expected to change\r\n      this.#treeDataService.init(fieldSettings, this.pickerData.optionsAll);\r\n      this.treeHelper = this.#treeDataService.treeHelper;\r\n\r\n    }\r\n    this.pickerData.state.attachCallback(() => this.focusOnSearchComponent());\r\n  }\r\n\r\n  focusOnSearchComponent(): void {\r\n    this.log.fnIf('focusOnSearchComponent');\r\n    this.autocomplete()?.nativeElement.focus();\r\n  }\r\n\r\n\r\n  displaySelected(item: PickerItem): string {\r\n    return this.showSelectedItem() ? (item?.label ?? '') : '';\r\n  }\r\n\r\n  tooltip(): string {\r\n    const l = this.log.fnIfInFields('tooltip', this.fieldState.name, null, this.fieldState.name);\r\n    // no tooltip if zero or multiple items selected\r\n    const count = this.pickerData.selectedAll().length;\r\n    if (count != 1)\r\n      return l.r(null, `0 or more than 1 selected: ${count}`);\r\n    return l.r(this.selectedItem().tooltip, 'ok');\r\n  }\r\n\r\n  \r\n  displayFn(value: string): string {\r\n    const selectedItem = this.selectedItem();\r\n    this.#logItemChecks.a(`displayFn: value: '${value}'`, { selectedItem });\r\n    // and probably clean up if it's stable for a few days\r\n    if (value == null) return '';\r\n    const returnValue = this.pickerData.optionsAll().find(ae => ae.value == value)?.label;\r\n\r\n    // If nothing yet, try to return label of selected or fallback to return the value\r\n    // note: not quite sure, but I believe this is for scenarios where a manual entry was done\r\n    // ...so it would return it, even though it's not in the list of available items\r\n    if (!returnValue)\r\n      return selectedItem?.value == value\r\n        ? selectedItem?.label\r\n        : value + \" *\";\r\n    this.log.a('displayFn result', { value, returnValue });\r\n    return returnValue;\r\n  }\r\n\r\n  markAsTouched(): void {\r\n    this.fieldState.ui().markTouched();\r\n  }\r\n\r\n  filterSelectionList(): void {\r\n    this.#reFilter.update(x => !x);\r\n  }\r\n\r\n  /**\r\n   * Event triggered when opening the auto-complete / search\r\n   */\r\n  onOpened(isTreeDisplayMode: boolean): void {\r\n    const l = this.log.fnIf('onOpened', { isTreeDisplayMode });\r\n    const searchElement = this.autocomplete().nativeElement;\r\n    l.a(`onOpened: isTreeDisplayMode ${isTreeDisplayMode}; domValue: '${searchElement.value}'`);\r\n    // flush the input so the user can use it to search, otherwise the list is filtered\r\n    searchElement.value = '';\r\n    this.#reFilter.update(x => !x);\r\n    // If tree, we need to blur so tree reacts to the first click, otherwise the user must click 2x\r\n    if (isTreeDisplayMode)\r\n      searchElement.blur();\r\n  }\r\n\r\n  onClosed(): void {\r\n    const selectedItems = this.selectedItems();\r\n    const selectedItem = this.selectedItem();\r\n    const searchElement = this.autocomplete().nativeElement;\r\n    const l = this.log.fnIf('onClosed', { selectedItems, selectedItem });\r\n\r\n    // If we should not show the selected item in search,\r\n    // like in the popup, where selections are added to the list above\r\n    // exit early\r\n    if (!this.showSelectedItem()) {\r\n      searchElement.value = '';\r\n      return l.end('!showSelectedItem')\r\n    }\r\n\r\n    // If we should show the selected item, try to do it\r\n    // Note that this is false in search-add-only scenarios, like the popup dialog\r\n    // where the selections are added to the list above.\r\n    l.a('showSelectedItem');\r\n\r\n    // If nothing is selected, make sure the text is empty afterwards, otherwise the user thinks he selected something\r\n    if (!selectedItem) {\r\n      searchElement.value = '';\r\n      return l.end('!selectedItem')\r\n    }\r\n    \r\n    // Something is selected. If it's less than 2, we don't show the pills, so we want to show the label\r\n    if (selectedItems.length < 2) {\r\n      searchElement.value = selectedItem.label;\r\n      return l.end(`selectedItem & < 2; label updated to ${selectedItem.label}`, { selectedItem });\r\n    }\r\n  }\r\n\r\n  /** Callback from autocomplete when selected */\r\n  optionSelected(event: MatAutocompleteSelectedEvent): void {\r\n    const multiValue = this.features().multiValue;\r\n    const l = this.log.fnIf('optionSelected', { value: event.option.value, multiValue });\r\n    const selected = event.option.value;\r\n\r\n    // 2025-02-15 2dm Expected behavior is\r\n    // 1. When single value, just set the value\r\n    // 2. When multi value in simple dropdown mode, just set the value (replace previous selection)\r\n    // 3. In multi-value when in the list-dialog, keep adding to the selection\r\n    const setToJustThisValue = this.showSelectedItem() || !multiValue;\r\n\r\n    if (setToJustThisValue) {\r\n      l.a('no multiValue, will set to new');\r\n      this.pickerData.state.set([selected]);\r\n    } else {\r\n      l.a('multiValue, will add to selection');\r\n      this.pickerData.state.add(selected);\r\n    }\r\n    // This is needed so after choosing option, this element is not focused.\r\n    // It gets focused by default so if blur is outside of setTimeout it will happen before refocus.\r\n    setTimeout(() => this.autocomplete().nativeElement.blur());\r\n  }\r\n\r\n  getPlaceholder(): string {\r\n    const allOptions = this.pickerData.optionsAll();\r\n    var placeholder = allOptions.length > 0\r\n      ? this.translate.instant('Fields.Picker.Search')\r\n      : this.translate.instant('Fields.Picker.QueryNoItems');\r\n    this.#logItemChecks.a(`getPlaceholder: '${placeholder}'`, { allOptions });\r\n    return placeholder;\r\n  }\r\n\r\n  insertNull(): void {\r\n    this.log.a('insertNull');\r\n    this.pickerData.state.add(null);\r\n  }\r\n\r\n  isOptionDisabled(value: string): boolean {\r\n    const selected = this.selectedItems();\r\n    const isSelected = selected.some(entity => entity.value === value);\r\n    this.#logItemChecks.a(`sOptionDisabled value: '${value}'; result: ${isSelected}`, { selected });\r\n    return isSelected;\r\n  }\r\n\r\n\r\n  goToLink(helpLink: string): void {\r\n    this.log.a(`goToLink helpLink: '${helpLink}'`);\r\n    window.open(helpLink, '_blank');\r\n  }\r\n\r\n  hasChild = (_: number, item: PickerTreeItem) => this.treeHelper.hasChild(_, item);\r\n\r\n  getSelectedItem(value: string): PickerItem {\r\n    return this.pickerData.optionsAll().find(ae => ae.value === value);\r\n  }\r\n\r\n}\r\n","import { classLog } from '../../../../shared/logging';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  options: true,\r\n  select: true,\r\n};\r\n\r\nexport abstract class PickerInlineBaseComponent extends PickerPartBaseComponent {\r\n\r\n  log = classLog({PickerInlineBaseComponent}, logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    // Make sure the data is loaded - especially for entity/query sources\r\n    this.pickerData.source.fetchItems();\r\n  }\r\n\r\n  options = computedObj('options', () => {\r\n    const options = this.pickerData.optionsWithMissing();\r\n    const selected = this.selectedItems();\r\n\r\n    // Off all the possible options, mark the ones that are selected\r\n    const final = options.map(o => {\r\n      const isSelected = selected.find((s) => s.value === o.value);\r\n      return { ...o, selected: !!isSelected };\r\n    });\r\n    this.log.aIf('options', { options, selected, final });\r\n\r\n    // TODO: trap if too many hits... since we can almost break the UI if it has too many items\r\n\r\n    return final as (PickerItem & { selected?: boolean})[];\r\n  });\r\n  \r\n  select(item: PickerItem) {\r\n    const l = this.log.fn('select', { item });\r\n    if (item.noSelect) return l.end('noSelect, exit early');\r\n    const allowMulti = this.features().multiValue;\r\n    if (!allowMulti) {\r\n      this.pickerData.state.set([item.value]);\r\n      return l.end('no-multi', { item, allowMulti });\r\n    }\r\n\r\n    const before = this.options();\r\n    const toggled = before.map(o => o.value === item.value ? { ...o, selected: !o.selected } : o);\r\n    const selected = toggled.filter(o => o.selected);\r\n    const values = selected.map(o => o.value);\r\n    this.pickerData.state.set(values);\r\n    l.end('multi', { item, allowMulti, before, toggled, selected, values });\r\n  }\r\n\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\n\r\n@Component({\r\n    selector: 'app-picker-inline-header',\r\n    templateUrl: './picker-inline-header.html',\r\n    styleUrl: './picker-inline-header.scss',\r\n    imports: [\r\n        NgClass,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\nexport class PickerInlineHeaderComponent extends PickerPartBaseComponent {\r\n\r\n}\r\n","<div class=\"my-title-bar\">\r\n  <div>\r\n    <mat-label class=\"c-ew__preview-label\" [ngClass]=\"{\r\n      'mat-caption' : itemCount(),\r\n      'mat-empty' : !itemCount(),\r\n      'mat-error' : ui().touchedAndInvalid && !config.initialDisabled,\r\n      'color__primary' : !ui().touchedAndInvalid && !config.initialDisabled,\r\n      'my-label-disabled' : config.initialDisabled\r\n      }\"\r\n    >\r\n      {{ basics().labelWithRequired }}\r\n    </mat-label>\r\n    <app-field-helper-text [flatIfEmpty]=\"true\" [smallGap]=\"true\"></app-field-helper-text>\r\n  </div>\r\n  <div>\r\n    <ng-content select=\"[addNew]\"></ng-content>\r\n    <ng-content select=\"[freeTextButtons]\"></ng-content>\r\n  </div>\r\n\r\n</div>\r\n","<div class=\"c-ew__preview-holder\">\r\n  <app-picker-inline-header>\r\n    <ng-content addNew select=\"[addNew]\"></ng-content>\r\n    <ng-content freeTextButtons select=\"[freeTextButtons]\"></ng-content>\r\n  </app-picker-inline-header>\r\n\r\n  <!-- <div (click)=\"expandDialog()\"\r\n    [ngClass]=\"{\r\n    'c-ew__preview--invalid' : ui().touchedAndInvalid,\r\n    'c-ew__preview--disabled': config.initialDisabled\r\n    }\"> -->\r\n\r\n  @for (item of options(); track item.value) {\r\n    <mat-checkbox\r\n      class=\"picker-option-wrapper\"\r\n      (click)=\"select(item)\"\r\n      [checked]=\"item.selected\"\r\n      [disabled]=\"ui().disabled || item.noSelect\"\r\n      [tippy]=\"item.tooltip\"\r\n      tippyShowDelay=\"500\"\r\n      [tippyAllowHtml]=\"true\"\r\n      [tippyArrow]=\"true\"\r\n    >\r\n      <!-- Show Label, Tooltips, Links-Buttons and Feature-Warnings -->\r\n      <app-picker-item-label [item]=\"item\" [show]=\"true\" [index]=\"$index\" [settings]=\"fieldState.settings()\" [uiFeatures]=\"{ remove: false }\" [actionsFirst]=\"true\"></app-picker-item-label>\r\n    </mat-checkbox>\r\n  }\r\n  <!-- </div> -->\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { MatCheckbox } from '@angular/material/checkbox';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { PickerInlineBaseComponent } from '../picker-inline/picker-inline-base';\r\nimport { PickerInlineHeaderComponent } from '../picker-inline/picker-inline-header';\r\nimport { PickerPreviewLabelComponent } from '../picker-item-label/picker-item-label';\r\n\r\n@Component({\r\n    selector: 'app-picker-checkboxes',\r\n    templateUrl: './picker-checkboxes.html',\r\n    styleUrls: ['./picker-checkboxes.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatRippleModule,\r\n        MatCheckbox,\r\n        TippyDirective,\r\n        PickerInlineHeaderComponent,\r\n        PickerPreviewLabelComponent,\r\n    ]\r\n})\r\nexport class PickerCheckboxesComponent extends PickerInlineBaseComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    this.fieldState.requireFeature(FeatureNames.PickerUiCheckbox);\r\n  }\r\n\r\n}\r\n","import * as i0 from '@angular/core';\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, Input, NgModule } from '@angular/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { BidiModule } from '@angular/cdk/bidi';\n\nclass MatDivider {\n  get vertical() {\n    return this._vertical;\n  }\n  set vertical(value) {\n    this._vertical = coerceBooleanProperty(value);\n  }\n  _vertical = false;\n  get inset() {\n    return this._inset;\n  }\n  set inset(value) {\n    this._inset = coerceBooleanProperty(value);\n  }\n  _inset = false;\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatDivider,\n    deps: [],\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatDivider,\n    isStandalone: true,\n    selector: \"mat-divider\",\n    inputs: {\n      vertical: \"vertical\",\n      inset: \"inset\"\n    },\n    host: {\n      attributes: {\n        \"role\": \"separator\"\n      },\n      properties: {\n        \"attr.aria-orientation\": \"vertical ? \\\"vertical\\\" : \\\"horizontal\\\"\",\n        \"class.mat-divider-vertical\": \"vertical\",\n        \"class.mat-divider-horizontal\": \"!vertical\",\n        \"class.mat-divider-inset\": \"inset\"\n      },\n      classAttribute: \"mat-divider\"\n    },\n    ngImport: i0,\n    template: '',\n    isInline: true,\n    styles: [\".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\\n\"],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatDivider,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-divider',\n      host: {\n        'role': 'separator',\n        '[attr.aria-orientation]': 'vertical ? \"vertical\" : \"horizontal\"',\n        '[class.mat-divider-vertical]': 'vertical',\n        '[class.mat-divider-horizontal]': '!vertical',\n        '[class.mat-divider-inset]': 'inset',\n        'class': 'mat-divider'\n      },\n      template: '',\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      styles: [\".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\\n\"]\n    }]\n  }],\n  propDecorators: {\n    vertical: [{\n      type: Input\n    }],\n    inset: [{\n      type: Input\n    }]\n  }\n});\n\nclass MatDividerModule {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatDividerModule,\n    deps: [],\n    target: i0.FactoryTarget.NgModule\n  });\n  static mod = i0.ngDeclareNgModule({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatDividerModule,\n    imports: [MatDivider],\n    exports: [MatDivider, BidiModule]\n  });\n  static inj = i0.ngDeclareInjector({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatDividerModule,\n    imports: [BidiModule]\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatDividerModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: [MatDivider],\n      exports: [MatDivider, BidiModule]\n    }]\n  }]\n});\n\nexport { MatDivider, MatDividerModule };\n","import { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, inject, ElementRef, Directive, signal, Input, NgZone, Injector, ContentChildren, Component, ViewEncapsulation, ChangeDetectionStrategy, ViewChild, ChangeDetectorRef, EventEmitter, Output, forwardRef, Renderer2, NgModule } from '@angular/core';\nimport { Platform, _getFocusedElementPierceShadowDom } from '@angular/cdk/platform';\nimport { _CdkPrivateStyleLoader } from '@angular/cdk/private';\nimport { Subscription, merge, Subject } from 'rxjs';\nimport { MAT_RIPPLE_GLOBAL_OPTIONS, RippleRenderer } from './_ripple-chunk.mjs';\nimport { _animationsDisabled } from './_animation-chunk.mjs';\nimport { _StructuralStylesLoader } from './_structural-styles-chunk.mjs';\nimport { NgTemplateOutlet } from '@angular/common';\nimport { CdkObserveContent, ObserversModule } from '@angular/cdk/observers';\nimport { MatDividerModule } from './divider.mjs';\nexport { MatDivider } from './divider.mjs';\nimport { FocusKeyManager } from '@angular/cdk/a11y';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { ENTER, SPACE, A, hasModifierKey } from '@angular/cdk/keycodes';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { takeUntil } from 'rxjs/operators';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { MatPseudoCheckboxModule } from './_pseudo-checkbox-module-chunk.mjs';\nimport { MatRippleModule } from './_ripple-module-chunk.mjs';\nimport '@angular/cdk/layout';\nimport './_pseudo-checkbox-chunk.mjs';\n\nconst LIST_OPTION = new InjectionToken('ListOption');\n\nclass MatListItemTitle {\n  _elementRef = inject(ElementRef);\n  constructor() {}\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListItemTitle,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListItemTitle,\n    isStandalone: true,\n    selector: \"[matListItemTitle]\",\n    host: {\n      classAttribute: \"mat-mdc-list-item-title mdc-list-item__primary-text\"\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListItemTitle,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matListItemTitle]',\n      host: {\n        'class': 'mat-mdc-list-item-title mdc-list-item__primary-text'\n      }\n    }]\n  }],\n  ctorParameters: () => []\n});\nclass MatListItemLine {\n  _elementRef = inject(ElementRef);\n  constructor() {}\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListItemLine,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListItemLine,\n    isStandalone: true,\n    selector: \"[matListItemLine]\",\n    host: {\n      classAttribute: \"mat-mdc-list-item-line mdc-list-item__secondary-text\"\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListItemLine,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matListItemLine]',\n      host: {\n        'class': 'mat-mdc-list-item-line mdc-list-item__secondary-text'\n      }\n    }]\n  }],\n  ctorParameters: () => []\n});\nclass MatListItemMeta {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListItemMeta,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListItemMeta,\n    isStandalone: true,\n    selector: \"[matListItemMeta]\",\n    host: {\n      classAttribute: \"mat-mdc-list-item-meta mdc-list-item__end\"\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListItemMeta,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matListItemMeta]',\n      host: {\n        'class': 'mat-mdc-list-item-meta mdc-list-item__end'\n      }\n    }]\n  }]\n});\nclass _MatListItemGraphicBase {\n  _listOption = inject(LIST_OPTION, {\n    optional: true\n  });\n  constructor() {}\n  _isAlignedAtStart() {\n    return !this._listOption || this._listOption?._getTogglePosition() === 'after';\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: _MatListItemGraphicBase,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: _MatListItemGraphicBase,\n    isStandalone: true,\n    host: {\n      properties: {\n        \"class.mdc-list-item__start\": \"_isAlignedAtStart()\",\n        \"class.mdc-list-item__end\": \"!_isAlignedAtStart()\"\n      }\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: _MatListItemGraphicBase,\n  decorators: [{\n    type: Directive,\n    args: [{\n      host: {\n        '[class.mdc-list-item__start]': '_isAlignedAtStart()',\n        '[class.mdc-list-item__end]': '!_isAlignedAtStart()'\n      }\n    }]\n  }],\n  ctorParameters: () => []\n});\nclass MatListItemAvatar extends _MatListItemGraphicBase {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListItemAvatar,\n    deps: null,\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListItemAvatar,\n    isStandalone: true,\n    selector: \"[matListItemAvatar]\",\n    host: {\n      classAttribute: \"mat-mdc-list-item-avatar\"\n    },\n    usesInheritance: true,\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListItemAvatar,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matListItemAvatar]',\n      host: {\n        'class': 'mat-mdc-list-item-avatar'\n      }\n    }]\n  }]\n});\nclass MatListItemIcon extends _MatListItemGraphicBase {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListItemIcon,\n    deps: null,\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListItemIcon,\n    isStandalone: true,\n    selector: \"[matListItemIcon]\",\n    host: {\n      classAttribute: \"mat-mdc-list-item-icon\"\n    },\n    usesInheritance: true,\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListItemIcon,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[matListItemIcon]',\n      host: {\n        'class': 'mat-mdc-list-item-icon'\n      }\n    }]\n  }]\n});\n\nconst MAT_LIST_CONFIG = new InjectionToken('MAT_LIST_CONFIG');\n\nclass MatListBase {\n  _isNonInteractive = true;\n  get disableRipple() {\n    return this._disableRipple;\n  }\n  set disableRipple(value) {\n    this._disableRipple = coerceBooleanProperty(value);\n  }\n  _disableRipple = false;\n  get disabled() {\n    return this._disabled();\n  }\n  set disabled(value) {\n    this._disabled.set(coerceBooleanProperty(value));\n  }\n  _disabled = signal(false, ...(ngDevMode ? [{\n    debugName: \"_disabled\"\n  }] : []));\n  _defaultOptions = inject(MAT_LIST_CONFIG, {\n    optional: true\n  });\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListBase,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListBase,\n    isStandalone: true,\n    inputs: {\n      disableRipple: \"disableRipple\",\n      disabled: \"disabled\"\n    },\n    host: {\n      properties: {\n        \"attr.aria-disabled\": \"disabled\"\n      }\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListBase,\n  decorators: [{\n    type: Directive,\n    args: [{\n      host: {\n        '[attr.aria-disabled]': 'disabled'\n      }\n    }]\n  }],\n  propDecorators: {\n    disableRipple: [{\n      type: Input\n    }],\n    disabled: [{\n      type: Input\n    }]\n  }\n});\nclass MatListItemBase {\n  _elementRef = inject(ElementRef);\n  _ngZone = inject(NgZone);\n  _listBase = inject(MatListBase, {\n    optional: true\n  });\n  _platform = inject(Platform);\n  _hostElement;\n  _isButtonElement;\n  _noopAnimations = _animationsDisabled();\n  _avatars;\n  _icons;\n  set lines(lines) {\n    this._explicitLines = coerceNumberProperty(lines, null);\n    this._updateItemLines(false);\n  }\n  _explicitLines = null;\n  get disableRipple() {\n    return this.disabled || this._disableRipple || this._noopAnimations || !!this._listBase?.disableRipple;\n  }\n  set disableRipple(value) {\n    this._disableRipple = coerceBooleanProperty(value);\n  }\n  _disableRipple = false;\n  get disabled() {\n    return this._disabled() || !!this._listBase?.disabled;\n  }\n  set disabled(value) {\n    this._disabled.set(coerceBooleanProperty(value));\n  }\n  _disabled = signal(false, ...(ngDevMode ? [{\n    debugName: \"_disabled\"\n  }] : []));\n  _subscriptions = new Subscription();\n  _rippleRenderer = null;\n  _hasUnscopedTextContent = false;\n  rippleConfig;\n  get rippleDisabled() {\n    return this.disableRipple || !!this.rippleConfig.disabled;\n  }\n  constructor() {\n    inject(_CdkPrivateStyleLoader).load(_StructuralStylesLoader);\n    const globalRippleOptions = inject(MAT_RIPPLE_GLOBAL_OPTIONS, {\n      optional: true\n    });\n    this.rippleConfig = globalRippleOptions || {};\n    this._hostElement = this._elementRef.nativeElement;\n    this._isButtonElement = this._hostElement.nodeName.toLowerCase() === 'button';\n    if (this._listBase && !this._listBase._isNonInteractive) {\n      this._initInteractiveListItem();\n    }\n    if (this._isButtonElement && !this._hostElement.hasAttribute('type')) {\n      this._hostElement.setAttribute('type', 'button');\n    }\n  }\n  ngAfterViewInit() {\n    this._monitorProjectedLinesAndTitle();\n    this._updateItemLines(true);\n  }\n  ngOnDestroy() {\n    this._subscriptions.unsubscribe();\n    if (this._rippleRenderer !== null) {\n      this._rippleRenderer._removeTriggerEvents();\n    }\n  }\n  _hasIconOrAvatar() {\n    return !!(this._avatars.length || this._icons.length);\n  }\n  _initInteractiveListItem() {\n    this._hostElement.classList.add('mat-mdc-list-item-interactive');\n    this._rippleRenderer = new RippleRenderer(this, this._ngZone, this._hostElement, this._platform, inject(Injector));\n    this._rippleRenderer.setupTriggerEvents(this._hostElement);\n  }\n  _monitorProjectedLinesAndTitle() {\n    this._ngZone.runOutsideAngular(() => {\n      this._subscriptions.add(merge(this._lines.changes, this._titles.changes).subscribe(() => this._updateItemLines(false)));\n    });\n  }\n  _updateItemLines(recheckUnscopedContent) {\n    if (!this._lines || !this._titles || !this._unscopedContent) {\n      return;\n    }\n    if (recheckUnscopedContent) {\n      this._checkDomForUnscopedTextContent();\n    }\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      sanityCheckListItemContent(this);\n    }\n    const numberOfLines = this._explicitLines ?? this._inferLinesFromContent();\n    const unscopedContentEl = this._unscopedContent.nativeElement;\n    this._hostElement.classList.toggle('mat-mdc-list-item-single-line', numberOfLines <= 1);\n    this._hostElement.classList.toggle('mdc-list-item--with-one-line', numberOfLines <= 1);\n    this._hostElement.classList.toggle('mdc-list-item--with-two-lines', numberOfLines === 2);\n    this._hostElement.classList.toggle('mdc-list-item--with-three-lines', numberOfLines === 3);\n    if (this._hasUnscopedTextContent) {\n      const treatAsTitle = this._titles.length === 0 && numberOfLines === 1;\n      unscopedContentEl.classList.toggle('mdc-list-item__primary-text', treatAsTitle);\n      unscopedContentEl.classList.toggle('mdc-list-item__secondary-text', !treatAsTitle);\n    } else {\n      unscopedContentEl.classList.remove('mdc-list-item__primary-text');\n      unscopedContentEl.classList.remove('mdc-list-item__secondary-text');\n    }\n  }\n  _inferLinesFromContent() {\n    let numOfLines = this._titles.length + this._lines.length;\n    if (this._hasUnscopedTextContent) {\n      numOfLines += 1;\n    }\n    return numOfLines;\n  }\n  _checkDomForUnscopedTextContent() {\n    this._hasUnscopedTextContent = Array.from(this._unscopedContent.nativeElement.childNodes).filter(node => node.nodeType !== node.COMMENT_NODE).some(node => !!(node.textContent && node.textContent.trim()));\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListItemBase,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListItemBase,\n    isStandalone: true,\n    inputs: {\n      lines: \"lines\",\n      disableRipple: \"disableRipple\",\n      disabled: \"disabled\"\n    },\n    host: {\n      properties: {\n        \"class.mdc-list-item--disabled\": \"disabled\",\n        \"attr.aria-disabled\": \"disabled\",\n        \"attr.disabled\": \"(_isButtonElement && disabled) || null\"\n      }\n    },\n    queries: [{\n      propertyName: \"_avatars\",\n      predicate: MatListItemAvatar\n    }, {\n      propertyName: \"_icons\",\n      predicate: MatListItemIcon\n    }],\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListItemBase,\n  decorators: [{\n    type: Directive,\n    args: [{\n      host: {\n        '[class.mdc-list-item--disabled]': 'disabled',\n        '[attr.aria-disabled]': 'disabled',\n        '[attr.disabled]': '(_isButtonElement && disabled) || null'\n      }\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    _avatars: [{\n      type: ContentChildren,\n      args: [MatListItemAvatar, {\n        descendants: false\n      }]\n    }],\n    _icons: [{\n      type: ContentChildren,\n      args: [MatListItemIcon, {\n        descendants: false\n      }]\n    }],\n    lines: [{\n      type: Input\n    }],\n    disableRipple: [{\n      type: Input\n    }],\n    disabled: [{\n      type: Input\n    }]\n  }\n});\nfunction sanityCheckListItemContent(item) {\n  const numTitles = item._titles.length;\n  const numLines = item._lines.length;\n  if (numTitles > 1) {\n    console.warn('A list item cannot have multiple titles.');\n  }\n  if (numTitles === 0 && numLines > 0) {\n    console.warn('A list item line can only be used if there is a list item title.');\n  }\n  if (numTitles === 0 && item._hasUnscopedTextContent && item._explicitLines !== null && item._explicitLines > 1) {\n    console.warn('A list item cannot have wrapping content without a title.');\n  }\n  if (numLines > 2 || numLines === 2 && item._hasUnscopedTextContent) {\n    console.warn('A list item can have at maximum three lines.');\n  }\n}\n\nclass MatActionList extends MatListBase {\n  _isNonInteractive = false;\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatActionList,\n    deps: null,\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatActionList,\n    isStandalone: true,\n    selector: \"mat-action-list\",\n    host: {\n      attributes: {\n        \"role\": \"group\"\n      },\n      classAttribute: \"mat-mdc-action-list mat-mdc-list-base mdc-list\"\n    },\n    providers: [{\n      provide: MatListBase,\n      useExisting: MatActionList\n    }],\n    exportAs: [\"matActionList\"],\n    usesInheritance: true,\n    ngImport: i0,\n    template: '<ng-content></ng-content>',\n    isInline: true,\n    styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\\n\"],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatActionList,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-action-list',\n      exportAs: 'matActionList',\n      template: '<ng-content></ng-content>',\n      host: {\n        'class': 'mat-mdc-action-list mat-mdc-list-base mdc-list',\n        'role': 'group'\n      },\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      providers: [{\n        provide: MatListBase,\n        useExisting: MatActionList\n      }],\n      styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\\n\"]\n    }]\n  }]\n});\n\nconst MAT_LIST = new InjectionToken('MatList');\nclass MatList extends MatListBase {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatList,\n    deps: null,\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatList,\n    isStandalone: true,\n    selector: \"mat-list\",\n    host: {\n      classAttribute: \"mat-mdc-list mat-mdc-list-base mdc-list\"\n    },\n    providers: [{\n      provide: MatListBase,\n      useExisting: MatList\n    }],\n    exportAs: [\"matList\"],\n    usesInheritance: true,\n    ngImport: i0,\n    template: '<ng-content></ng-content>',\n    isInline: true,\n    styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\\n\"],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatList,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-list',\n      exportAs: 'matList',\n      template: '<ng-content></ng-content>',\n      host: {\n        'class': 'mat-mdc-list mat-mdc-list-base mdc-list'\n      },\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      providers: [{\n        provide: MatListBase,\n        useExisting: MatList\n      }],\n      styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\\n\"]\n    }]\n  }]\n});\nclass MatListItem extends MatListItemBase {\n  _lines;\n  _titles;\n  _meta;\n  _unscopedContent;\n  _itemText;\n  get activated() {\n    return this._activated;\n  }\n  set activated(activated) {\n    this._activated = coerceBooleanProperty(activated);\n  }\n  _activated = false;\n  _getAriaCurrent() {\n    return this._hostElement.nodeName === 'A' && this._activated ? 'page' : null;\n  }\n  _hasBothLeadingAndTrailing() {\n    return this._meta.length !== 0 && (this._avatars.length !== 0 || this._icons.length !== 0);\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListItem,\n    deps: null,\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListItem,\n    isStandalone: true,\n    selector: \"mat-list-item, a[mat-list-item], button[mat-list-item]\",\n    inputs: {\n      activated: \"activated\"\n    },\n    host: {\n      properties: {\n        \"class.mdc-list-item--activated\": \"activated\",\n        \"class.mdc-list-item--with-leading-avatar\": \"_avatars.length !== 0\",\n        \"class.mdc-list-item--with-leading-icon\": \"_icons.length !== 0\",\n        \"class.mdc-list-item--with-trailing-meta\": \"_meta.length !== 0\",\n        \"class.mat-mdc-list-item-both-leading-and-trailing\": \"_hasBothLeadingAndTrailing()\",\n        \"class._mat-animation-noopable\": \"_noopAnimations\",\n        \"attr.aria-current\": \"_getAriaCurrent()\"\n      },\n      classAttribute: \"mat-mdc-list-item mdc-list-item\"\n    },\n    queries: [{\n      propertyName: \"_lines\",\n      predicate: MatListItemLine,\n      descendants: true\n    }, {\n      propertyName: \"_titles\",\n      predicate: MatListItemTitle,\n      descendants: true\n    }, {\n      propertyName: \"_meta\",\n      predicate: MatListItemMeta,\n      descendants: true\n    }],\n    viewQueries: [{\n      propertyName: \"_unscopedContent\",\n      first: true,\n      predicate: [\"unscopedContent\"],\n      descendants: true\n    }, {\n      propertyName: \"_itemText\",\n      first: true,\n      predicate: [\"text\"],\n      descendants: true\n    }],\n    exportAs: [\"matListItem\"],\n    usesInheritance: true,\n    ngImport: i0,\n    template: \"<ng-content select=\\\"[matListItemAvatar],[matListItemIcon]\\\"></ng-content>\\n\\n<span class=\\\"mdc-list-item__content\\\">\\n  <ng-content select=\\\"[matListItemTitle]\\\"></ng-content>\\n  <ng-content select=\\\"[matListItemLine]\\\"></ng-content>\\n  <span #unscopedContent class=\\\"mat-mdc-list-item-unscoped-content\\\"\\n        (cdkObserveContent)=\\\"_updateItemLines(true)\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</span>\\n\\n<ng-content select=\\\"[matListItemMeta]\\\"></ng-content>\\n\\n<ng-content select=\\\"mat-divider\\\"></ng-content>\\n\\n<!--\\n  Strong focus indicator element. MDC uses the `::before` pseudo element for the default\\n  focus/hover/selected state, so we need a separate element.\\n-->\\n<div class=\\\"mat-focus-indicator\\\"></div>\\n\",\n    dependencies: [{\n      kind: \"directive\",\n      type: CdkObserveContent,\n      selector: \"[cdkObserveContent]\",\n      inputs: [\"cdkObserveContentDisabled\", \"debounce\"],\n      outputs: [\"cdkObserveContent\"],\n      exportAs: [\"cdkObserveContent\"]\n    }],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListItem,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-list-item, a[mat-list-item], button[mat-list-item]',\n      exportAs: 'matListItem',\n      host: {\n        'class': 'mat-mdc-list-item mdc-list-item',\n        '[class.mdc-list-item--activated]': 'activated',\n        '[class.mdc-list-item--with-leading-avatar]': '_avatars.length !== 0',\n        '[class.mdc-list-item--with-leading-icon]': '_icons.length !== 0',\n        '[class.mdc-list-item--with-trailing-meta]': '_meta.length !== 0',\n        '[class.mat-mdc-list-item-both-leading-and-trailing]': '_hasBothLeadingAndTrailing()',\n        '[class._mat-animation-noopable]': '_noopAnimations',\n        '[attr.aria-current]': '_getAriaCurrent()'\n      },\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      imports: [CdkObserveContent],\n      template: \"<ng-content select=\\\"[matListItemAvatar],[matListItemIcon]\\\"></ng-content>\\n\\n<span class=\\\"mdc-list-item__content\\\">\\n  <ng-content select=\\\"[matListItemTitle]\\\"></ng-content>\\n  <ng-content select=\\\"[matListItemLine]\\\"></ng-content>\\n  <span #unscopedContent class=\\\"mat-mdc-list-item-unscoped-content\\\"\\n        (cdkObserveContent)=\\\"_updateItemLines(true)\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</span>\\n\\n<ng-content select=\\\"[matListItemMeta]\\\"></ng-content>\\n\\n<ng-content select=\\\"mat-divider\\\"></ng-content>\\n\\n<!--\\n  Strong focus indicator element. MDC uses the `::before` pseudo element for the default\\n  focus/hover/selected state, so we need a separate element.\\n-->\\n<div class=\\\"mat-focus-indicator\\\"></div>\\n\"\n    }]\n  }],\n  propDecorators: {\n    _lines: [{\n      type: ContentChildren,\n      args: [MatListItemLine, {\n        descendants: true\n      }]\n    }],\n    _titles: [{\n      type: ContentChildren,\n      args: [MatListItemTitle, {\n        descendants: true\n      }]\n    }],\n    _meta: [{\n      type: ContentChildren,\n      args: [MatListItemMeta, {\n        descendants: true\n      }]\n    }],\n    _unscopedContent: [{\n      type: ViewChild,\n      args: ['unscopedContent']\n    }],\n    _itemText: [{\n      type: ViewChild,\n      args: ['text']\n    }],\n    activated: [{\n      type: Input\n    }]\n  }\n});\n\nconst SELECTION_LIST = new InjectionToken('SelectionList');\nclass MatListOption extends MatListItemBase {\n  _selectionList = inject(SELECTION_LIST);\n  _changeDetectorRef = inject(ChangeDetectorRef);\n  _lines;\n  _titles;\n  _unscopedContent;\n  selectedChange = new EventEmitter();\n  togglePosition = 'after';\n  get checkboxPosition() {\n    return this.togglePosition;\n  }\n  set checkboxPosition(value) {\n    this.togglePosition = value;\n  }\n  get color() {\n    return this._color || this._selectionList.color;\n  }\n  set color(newValue) {\n    this._color = newValue;\n  }\n  _color;\n  get value() {\n    return this._value;\n  }\n  set value(newValue) {\n    if (this.selected && newValue !== this.value && this._inputsInitialized) {\n      this.selected = false;\n    }\n    this._value = newValue;\n  }\n  _value;\n  get selected() {\n    return this._selectionList.selectedOptions.isSelected(this);\n  }\n  set selected(value) {\n    const isSelected = coerceBooleanProperty(value);\n    if (isSelected !== this._selected) {\n      this._setSelected(isSelected);\n      if (isSelected || this._selectionList.multiple) {\n        this._selectionList._reportValueChange();\n      }\n    }\n  }\n  _selected = false;\n  _inputsInitialized = false;\n  ngOnInit() {\n    const list = this._selectionList;\n    if (list._value && list._value.some(value => list.compareWith(this._value, value))) {\n      this._setSelected(true);\n    }\n    const wasSelected = this._selected;\n    Promise.resolve().then(() => {\n      if (this._selected || wasSelected) {\n        this.selected = true;\n        this._changeDetectorRef.markForCheck();\n      }\n    });\n    this._inputsInitialized = true;\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    if (this.selected) {\n      Promise.resolve().then(() => {\n        this.selected = false;\n      });\n    }\n  }\n  toggle() {\n    this.selected = !this.selected;\n  }\n  focus() {\n    this._hostElement.focus();\n  }\n  getLabel() {\n    const titleElement = this._titles?.get(0)?._elementRef.nativeElement;\n    const labelEl = titleElement || this._unscopedContent?.nativeElement;\n    return labelEl?.textContent || '';\n  }\n  _hasCheckboxAt(position) {\n    return this._selectionList.multiple && this._getTogglePosition() === position;\n  }\n  _hasRadioAt(position) {\n    return !this._selectionList.multiple && this._getTogglePosition() === position && !this._selectionList.hideSingleSelectionIndicator;\n  }\n  _hasIconsOrAvatarsAt(position) {\n    return this._hasProjected('icons', position) || this._hasProjected('avatars', position);\n  }\n  _hasProjected(type, position) {\n    return this._getTogglePosition() !== position && (type === 'avatars' ? this._avatars.length !== 0 : this._icons.length !== 0);\n  }\n  _handleBlur() {\n    this._selectionList._onTouched();\n  }\n  _getTogglePosition() {\n    return this.togglePosition || 'after';\n  }\n  _setSelected(selected) {\n    if (selected === this._selected) {\n      return false;\n    }\n    this._selected = selected;\n    if (selected) {\n      this._selectionList.selectedOptions.select(this);\n    } else {\n      this._selectionList.selectedOptions.deselect(this);\n    }\n    this.selectedChange.emit(selected);\n    this._changeDetectorRef.markForCheck();\n    return true;\n  }\n  _markForCheck() {\n    this._changeDetectorRef.markForCheck();\n  }\n  _toggleOnInteraction() {\n    if (!this.disabled) {\n      if (this._selectionList.multiple) {\n        this.selected = !this.selected;\n        this._selectionList._emitChangeEvent([this]);\n      } else if (!this.selected) {\n        this.selected = true;\n        this._selectionList._emitChangeEvent([this]);\n      }\n    }\n  }\n  _setTabindex(value) {\n    this._hostElement.setAttribute('tabindex', value + '');\n  }\n  _hasBothLeadingAndTrailing() {\n    const hasLeading = this._hasProjected('avatars', 'before') || this._hasProjected('icons', 'before') || this._hasCheckboxAt('before') || this._hasRadioAt('before');\n    const hasTrailing = this._hasProjected('icons', 'after') || this._hasProjected('avatars', 'after') || this._hasCheckboxAt('after') || this._hasRadioAt('after');\n    return hasLeading && hasTrailing;\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListOption,\n    deps: null,\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"17.0.0\",\n    version: \"21.0.3\",\n    type: MatListOption,\n    isStandalone: true,\n    selector: \"mat-list-option\",\n    inputs: {\n      togglePosition: \"togglePosition\",\n      checkboxPosition: \"checkboxPosition\",\n      color: \"color\",\n      value: \"value\",\n      selected: \"selected\"\n    },\n    outputs: {\n      selectedChange: \"selectedChange\"\n    },\n    host: {\n      attributes: {\n        \"role\": \"option\"\n      },\n      listeners: {\n        \"blur\": \"_handleBlur()\",\n        \"click\": \"_toggleOnInteraction()\"\n      },\n      properties: {\n        \"class.mdc-list-item--selected\": \"selected && !_selectionList.multiple && _selectionList.hideSingleSelectionIndicator\",\n        \"class.mdc-list-item--with-leading-avatar\": \"_hasProjected(\\\"avatars\\\", \\\"before\\\")\",\n        \"class.mdc-list-item--with-leading-icon\": \"_hasProjected(\\\"icons\\\", \\\"before\\\")\",\n        \"class.mdc-list-item--with-trailing-icon\": \"_hasProjected(\\\"icons\\\", \\\"after\\\")\",\n        \"class.mat-mdc-list-option-with-trailing-avatar\": \"_hasProjected(\\\"avatars\\\", \\\"after\\\")\",\n        \"class.mdc-list-item--with-leading-checkbox\": \"_hasCheckboxAt(\\\"before\\\")\",\n        \"class.mdc-list-item--with-trailing-checkbox\": \"_hasCheckboxAt(\\\"after\\\")\",\n        \"class.mdc-list-item--with-leading-radio\": \"_hasRadioAt(\\\"before\\\")\",\n        \"class.mdc-list-item--with-trailing-radio\": \"_hasRadioAt(\\\"after\\\")\",\n        \"class.mat-mdc-list-item-both-leading-and-trailing\": \"_hasBothLeadingAndTrailing()\",\n        \"class.mat-accent\": \"color !== \\\"primary\\\" && color !== \\\"warn\\\"\",\n        \"class.mat-warn\": \"color === \\\"warn\\\"\",\n        \"class._mat-animation-noopable\": \"_noopAnimations\",\n        \"attr.aria-selected\": \"selected\"\n      },\n      classAttribute: \"mat-mdc-list-item mat-mdc-list-option mdc-list-item\"\n    },\n    providers: [{\n      provide: MatListItemBase,\n      useExisting: MatListOption\n    }, {\n      provide: LIST_OPTION,\n      useExisting: MatListOption\n    }],\n    queries: [{\n      propertyName: \"_lines\",\n      predicate: MatListItemLine,\n      descendants: true\n    }, {\n      propertyName: \"_titles\",\n      predicate: MatListItemTitle,\n      descendants: true\n    }],\n    viewQueries: [{\n      propertyName: \"_unscopedContent\",\n      first: true,\n      predicate: [\"unscopedContent\"],\n      descendants: true\n    }],\n    exportAs: [\"matListOption\"],\n    usesInheritance: true,\n    ngImport: i0,\n    template: \"<!--\\n  Save icons and the pseudo checkbox/radio so that they can be re-used in the template without\\n  duplication. Also content can only be injected once so we need to extract icons/avatars\\n  into a template since we use it in multiple places.\\n-->\\n<ng-template #icons>\\n  <ng-content select=\\\"[matListItemAvatar],[matListItemIcon]\\\">\\n  </ng-content>\\n</ng-template>\\n\\n<ng-template #checkbox>\\n  <div class=\\\"mdc-checkbox\\\" [class.mdc-checkbox--disabled]=\\\"disabled\\\">\\n    <input type=\\\"checkbox\\\" class=\\\"mdc-checkbox__native-control\\\"\\n           [checked]=\\\"selected\\\" [disabled]=\\\"disabled\\\"/>\\n    <div class=\\\"mdc-checkbox__background\\\">\\n      <svg class=\\\"mdc-checkbox__checkmark\\\"\\n           viewBox=\\\"0 0 24 24\\\"\\n           aria-hidden=\\\"true\\\">\\n        <path class=\\\"mdc-checkbox__checkmark-path\\\"\\n              fill=\\\"none\\\"\\n              d=\\\"M1.73,12.91 8.1,19.28 22.79,4.59\\\"/>\\n      </svg>\\n      <div class=\\\"mdc-checkbox__mixedmark\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #radio>\\n  <div class=\\\"mdc-radio\\\" [class.mdc-radio--disabled]=\\\"disabled\\\">\\n    <input type=\\\"radio\\\" class=\\\"mdc-radio__native-control\\\"\\n           [checked]=\\\"selected\\\" [disabled]=\\\"disabled\\\"/>\\n    <div class=\\\"mdc-radio__background\\\">\\n      <div class=\\\"mdc-radio__outer-circle\\\"></div>\\n      <div class=\\\"mdc-radio__inner-circle\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n@if (_hasCheckboxAt('before')) {\\n  <!-- Container for the checkbox at start. -->\\n  <span class=\\\"mdc-list-item__start mat-mdc-list-option-checkbox-before\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"checkbox\\\"></ng-template>\\n  </span>\\n} @else if (_hasRadioAt('before')) {\\n  <!-- Container for the radio at the start. -->\\n  <span class=\\\"mdc-list-item__start mat-mdc-list-option-radio-before\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"radio\\\"></ng-template>\\n  </span>\\n}\\n<!-- Conditionally renders icons/avatars before the list item text. -->\\n@if (_hasIconsOrAvatarsAt('before')) {\\n  <ng-template [ngTemplateOutlet]=\\\"icons\\\"></ng-template>\\n}\\n\\n<!-- Text -->\\n<span class=\\\"mdc-list-item__content\\\">\\n  <ng-content select=\\\"[matListItemTitle]\\\"></ng-content>\\n  <ng-content select=\\\"[matListItemLine]\\\"></ng-content>\\n  <span #unscopedContent class=\\\"mat-mdc-list-item-unscoped-content\\\"\\n        (cdkObserveContent)=\\\"_updateItemLines(true)\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</span>\\n\\n@if (_hasCheckboxAt('after')) {\\n  <!-- Container for the checkbox at the end. -->\\n  <span class=\\\"mdc-list-item__end\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"checkbox\\\"></ng-template>\\n  </span>\\n} @else if (_hasRadioAt('after')) {\\n  <!-- Container for the radio at the end. -->\\n  <span class=\\\"mdc-list-item__end\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"radio\\\"></ng-template>\\n  </span>\\n}\\n\\n<!-- Conditionally renders icons/avatars after the list item text. -->\\n@if (_hasIconsOrAvatarsAt('after')) {\\n  <ng-template [ngTemplateOutlet]=\\\"icons\\\"></ng-template>\\n}\\n\\n<!-- Divider -->\\n<ng-content select=\\\"mat-divider\\\"></ng-content>\\n\\n<!--\\n  Strong focus indicator element. MDC uses the `::before` pseudo element for the default\\n  focus/hover/selected state, so we need a separate element.\\n-->\\n<div class=\\\"mat-focus-indicator\\\"></div>\\n\",\n    styles: [\".mat-mdc-list-option-with-trailing-avatar.mdc-list-item,[dir=rtl] .mat-mdc-list-option-with-trailing-avatar.mdc-list-item{padding-left:0;padding-right:0}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{margin-left:16px;margin-right:16px;width:40px;height:40px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{border-radius:50%}.mat-mdc-list-option .mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1;width:var(--mat-checkbox-state-layer-size, 40px);height:var(--mat-checkbox-state-layer-size, 40px);top:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2);right:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2);left:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2)}.mat-mdc-list-option .mdc-checkbox--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mat-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2)}.mat-mdc-list-option .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mat-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__background{border-color:GrayText}}.mat-mdc-list-option .mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mat-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{border-color:GrayText}}.mat-mdc-list-option .mdc-checkbox:hover>.mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox:hover>.mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mat-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox:hover>.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox:hover>.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mat-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mat-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:GrayText}}.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mat-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mat-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__checkmark{color:CanvasText}}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mat-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:GrayText}}.mat-mdc-list-option .mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mat-mdc-list-option .mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mat-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__mixedmark{margin:0 1px}}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mat-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:GrayText}}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-list-option .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-list-option .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-list-option .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:\\\"\\\";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px);top:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-list-option .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0);border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),background-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}@media(forced-colors: active){.mat-mdc-list-option .mdc-radio__inner-circle{background-color:CanvasText !important}}.mat-mdc-list-option .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface, currentColor));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-list-option .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-list-option._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-list-option._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark{transition:none !important;animation:none !important}.mat-mdc-list-option .mdc-checkbox__native-control,.mat-mdc-list-option .mdc-radio__native-control{display:none}@media(forced-colors: active){.mat-mdc-list-option.mdc-list-item--selected::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.mat-mdc-list-option.mdc-list-item--selected [dir=rtl]::after{right:auto;left:16px}}\\n\"],\n    dependencies: [{\n      kind: \"directive\",\n      type: NgTemplateOutlet,\n      selector: \"[ngTemplateOutlet]\",\n      inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\", \"ngTemplateOutletInjector\"]\n    }, {\n      kind: \"directive\",\n      type: CdkObserveContent,\n      selector: \"[cdkObserveContent]\",\n      inputs: [\"cdkObserveContentDisabled\", \"debounce\"],\n      outputs: [\"cdkObserveContent\"],\n      exportAs: [\"cdkObserveContent\"]\n    }],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListOption,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-list-option',\n      exportAs: 'matListOption',\n      host: {\n        'class': 'mat-mdc-list-item mat-mdc-list-option mdc-list-item',\n        'role': 'option',\n        '[class.mdc-list-item--selected]': 'selected && !_selectionList.multiple && _selectionList.hideSingleSelectionIndicator',\n        '[class.mdc-list-item--with-leading-avatar]': '_hasProjected(\"avatars\", \"before\")',\n        '[class.mdc-list-item--with-leading-icon]': '_hasProjected(\"icons\", \"before\")',\n        '[class.mdc-list-item--with-trailing-icon]': '_hasProjected(\"icons\", \"after\")',\n        '[class.mat-mdc-list-option-with-trailing-avatar]': '_hasProjected(\"avatars\", \"after\")',\n        '[class.mdc-list-item--with-leading-checkbox]': '_hasCheckboxAt(\"before\")',\n        '[class.mdc-list-item--with-trailing-checkbox]': '_hasCheckboxAt(\"after\")',\n        '[class.mdc-list-item--with-leading-radio]': '_hasRadioAt(\"before\")',\n        '[class.mdc-list-item--with-trailing-radio]': '_hasRadioAt(\"after\")',\n        '[class.mat-mdc-list-item-both-leading-and-trailing]': '_hasBothLeadingAndTrailing()',\n        '[class.mat-accent]': 'color !== \"primary\" && color !== \"warn\"',\n        '[class.mat-warn]': 'color === \"warn\"',\n        '[class._mat-animation-noopable]': '_noopAnimations',\n        '[attr.aria-selected]': 'selected',\n        '(blur)': '_handleBlur()',\n        '(click)': '_toggleOnInteraction()'\n      },\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      providers: [{\n        provide: MatListItemBase,\n        useExisting: MatListOption\n      }, {\n        provide: LIST_OPTION,\n        useExisting: MatListOption\n      }],\n      imports: [NgTemplateOutlet, CdkObserveContent],\n      template: \"<!--\\n  Save icons and the pseudo checkbox/radio so that they can be re-used in the template without\\n  duplication. Also content can only be injected once so we need to extract icons/avatars\\n  into a template since we use it in multiple places.\\n-->\\n<ng-template #icons>\\n  <ng-content select=\\\"[matListItemAvatar],[matListItemIcon]\\\">\\n  </ng-content>\\n</ng-template>\\n\\n<ng-template #checkbox>\\n  <div class=\\\"mdc-checkbox\\\" [class.mdc-checkbox--disabled]=\\\"disabled\\\">\\n    <input type=\\\"checkbox\\\" class=\\\"mdc-checkbox__native-control\\\"\\n           [checked]=\\\"selected\\\" [disabled]=\\\"disabled\\\"/>\\n    <div class=\\\"mdc-checkbox__background\\\">\\n      <svg class=\\\"mdc-checkbox__checkmark\\\"\\n           viewBox=\\\"0 0 24 24\\\"\\n           aria-hidden=\\\"true\\\">\\n        <path class=\\\"mdc-checkbox__checkmark-path\\\"\\n              fill=\\\"none\\\"\\n              d=\\\"M1.73,12.91 8.1,19.28 22.79,4.59\\\"/>\\n      </svg>\\n      <div class=\\\"mdc-checkbox__mixedmark\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #radio>\\n  <div class=\\\"mdc-radio\\\" [class.mdc-radio--disabled]=\\\"disabled\\\">\\n    <input type=\\\"radio\\\" class=\\\"mdc-radio__native-control\\\"\\n           [checked]=\\\"selected\\\" [disabled]=\\\"disabled\\\"/>\\n    <div class=\\\"mdc-radio__background\\\">\\n      <div class=\\\"mdc-radio__outer-circle\\\"></div>\\n      <div class=\\\"mdc-radio__inner-circle\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n@if (_hasCheckboxAt('before')) {\\n  <!-- Container for the checkbox at start. -->\\n  <span class=\\\"mdc-list-item__start mat-mdc-list-option-checkbox-before\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"checkbox\\\"></ng-template>\\n  </span>\\n} @else if (_hasRadioAt('before')) {\\n  <!-- Container for the radio at the start. -->\\n  <span class=\\\"mdc-list-item__start mat-mdc-list-option-radio-before\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"radio\\\"></ng-template>\\n  </span>\\n}\\n<!-- Conditionally renders icons/avatars before the list item text. -->\\n@if (_hasIconsOrAvatarsAt('before')) {\\n  <ng-template [ngTemplateOutlet]=\\\"icons\\\"></ng-template>\\n}\\n\\n<!-- Text -->\\n<span class=\\\"mdc-list-item__content\\\">\\n  <ng-content select=\\\"[matListItemTitle]\\\"></ng-content>\\n  <ng-content select=\\\"[matListItemLine]\\\"></ng-content>\\n  <span #unscopedContent class=\\\"mat-mdc-list-item-unscoped-content\\\"\\n        (cdkObserveContent)=\\\"_updateItemLines(true)\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</span>\\n\\n@if (_hasCheckboxAt('after')) {\\n  <!-- Container for the checkbox at the end. -->\\n  <span class=\\\"mdc-list-item__end\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"checkbox\\\"></ng-template>\\n  </span>\\n} @else if (_hasRadioAt('after')) {\\n  <!-- Container for the radio at the end. -->\\n  <span class=\\\"mdc-list-item__end\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"radio\\\"></ng-template>\\n  </span>\\n}\\n\\n<!-- Conditionally renders icons/avatars after the list item text. -->\\n@if (_hasIconsOrAvatarsAt('after')) {\\n  <ng-template [ngTemplateOutlet]=\\\"icons\\\"></ng-template>\\n}\\n\\n<!-- Divider -->\\n<ng-content select=\\\"mat-divider\\\"></ng-content>\\n\\n<!--\\n  Strong focus indicator element. MDC uses the `::before` pseudo element for the default\\n  focus/hover/selected state, so we need a separate element.\\n-->\\n<div class=\\\"mat-focus-indicator\\\"></div>\\n\",\n      styles: [\".mat-mdc-list-option-with-trailing-avatar.mdc-list-item,[dir=rtl] .mat-mdc-list-option-with-trailing-avatar.mdc-list-item{padding-left:0;padding-right:0}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{margin-left:16px;margin-right:16px;width:40px;height:40px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{border-radius:50%}.mat-mdc-list-option .mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1;width:var(--mat-checkbox-state-layer-size, 40px);height:var(--mat-checkbox-state-layer-size, 40px);top:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2);right:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2);left:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2)}.mat-mdc-list-option .mdc-checkbox--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mat-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2)}.mat-mdc-list-option .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mat-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__background{border-color:GrayText}}.mat-mdc-list-option .mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mat-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{border-color:GrayText}}.mat-mdc-list-option .mdc-checkbox:hover>.mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox:hover>.mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mat-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox:hover>.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox:hover>.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mat-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mat-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:GrayText}}.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mat-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mat-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__checkmark{color:CanvasText}}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mat-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:GrayText}}.mat-mdc-list-option .mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mat-mdc-list-option .mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mat-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__mixedmark{margin:0 1px}}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mat-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:GrayText}}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-list-option .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-list-option .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-list-option .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:\\\"\\\";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px);top:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-list-option .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0);border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),background-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}@media(forced-colors: active){.mat-mdc-list-option .mdc-radio__inner-circle{background-color:CanvasText !important}}.mat-mdc-list-option .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface, currentColor));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-list-option .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-list-option._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-list-option._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__start>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-list-option._mat-animation-noopable>.mdc-list-item__end>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark{transition:none !important;animation:none !important}.mat-mdc-list-option .mdc-checkbox__native-control,.mat-mdc-list-option .mdc-radio__native-control{display:none}@media(forced-colors: active){.mat-mdc-list-option.mdc-list-item--selected::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.mat-mdc-list-option.mdc-list-item--selected [dir=rtl]::after{right:auto;left:16px}}\\n\"]\n    }]\n  }],\n  propDecorators: {\n    _lines: [{\n      type: ContentChildren,\n      args: [MatListItemLine, {\n        descendants: true\n      }]\n    }],\n    _titles: [{\n      type: ContentChildren,\n      args: [MatListItemTitle, {\n        descendants: true\n      }]\n    }],\n    _unscopedContent: [{\n      type: ViewChild,\n      args: ['unscopedContent']\n    }],\n    selectedChange: [{\n      type: Output\n    }],\n    togglePosition: [{\n      type: Input\n    }],\n    checkboxPosition: [{\n      type: Input\n    }],\n    color: [{\n      type: Input\n    }],\n    value: [{\n      type: Input\n    }],\n    selected: [{\n      type: Input\n    }]\n  }\n});\n\nclass MatListSubheaderCssMatStyler {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListSubheaderCssMatStyler,\n    deps: [],\n    target: i0.FactoryTarget.Directive\n  });\n  static dir = i0.ngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatListSubheaderCssMatStyler,\n    isStandalone: true,\n    selector: \"[mat-subheader], [matSubheader]\",\n    host: {\n      classAttribute: \"mat-mdc-subheader mdc-list-group__subheader\"\n    },\n    ngImport: i0\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListSubheaderCssMatStyler,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[mat-subheader], [matSubheader]',\n      host: {\n        'class': 'mat-mdc-subheader mdc-list-group__subheader'\n      }\n    }]\n  }]\n});\n\nconst MAT_NAV_LIST = new InjectionToken('MatNavList');\nclass MatNavList extends MatListBase {\n  _isNonInteractive = false;\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatNavList,\n    deps: null,\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatNavList,\n    isStandalone: true,\n    selector: \"mat-nav-list\",\n    host: {\n      attributes: {\n        \"role\": \"navigation\"\n      },\n      classAttribute: \"mat-mdc-nav-list mat-mdc-list-base mdc-list\"\n    },\n    providers: [{\n      provide: MatListBase,\n      useExisting: MatNavList\n    }],\n    exportAs: [\"matNavList\"],\n    usesInheritance: true,\n    ngImport: i0,\n    template: '<ng-content></ng-content>',\n    isInline: true,\n    styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\\n\"],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatNavList,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-nav-list',\n      exportAs: 'matNavList',\n      template: '<ng-content></ng-content>',\n      host: {\n        'class': 'mat-mdc-nav-list mat-mdc-list-base mdc-list',\n        'role': 'navigation'\n      },\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      providers: [{\n        provide: MatListBase,\n        useExisting: MatNavList\n      }],\n      styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\\n\"]\n    }]\n  }]\n});\n\nconst MAT_SELECTION_LIST_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => MatSelectionList),\n  multi: true\n};\nclass MatSelectionListChange {\n  source;\n  options;\n  constructor(source, options) {\n    this.source = source;\n    this.options = options;\n  }\n}\nclass MatSelectionList extends MatListBase {\n  _element = inject(ElementRef);\n  _ngZone = inject(NgZone);\n  _renderer = inject(Renderer2);\n  _initialized = false;\n  _keyManager;\n  _listenerCleanups;\n  _destroyed = new Subject();\n  _isDestroyed;\n  _onChange = _ => {};\n  _items;\n  selectionChange = new EventEmitter();\n  color = 'accent';\n  compareWith = (a1, a2) => a1 === a2;\n  get multiple() {\n    return this._multiple;\n  }\n  set multiple(value) {\n    const newValue = coerceBooleanProperty(value);\n    if (newValue !== this._multiple) {\n      if ((typeof ngDevMode === 'undefined' || ngDevMode) && this._initialized) {\n        throw new Error('Cannot change `multiple` mode of mat-selection-list after initialization.');\n      }\n      this._multiple = newValue;\n      this.selectedOptions = new SelectionModel(this._multiple, this.selectedOptions.selected);\n    }\n  }\n  _multiple = true;\n  get hideSingleSelectionIndicator() {\n    return this._hideSingleSelectionIndicator;\n  }\n  set hideSingleSelectionIndicator(value) {\n    this._hideSingleSelectionIndicator = coerceBooleanProperty(value);\n  }\n  _hideSingleSelectionIndicator = this._defaultOptions?.hideSingleSelectionIndicator ?? false;\n  selectedOptions = new SelectionModel(this._multiple);\n  _value;\n  _onTouched = () => {};\n  _changeDetectorRef = inject(ChangeDetectorRef);\n  constructor() {\n    super();\n    this._isNonInteractive = false;\n  }\n  ngAfterViewInit() {\n    this._initialized = true;\n    this._setupRovingTabindex();\n    this._ngZone.runOutsideAngular(() => {\n      this._listenerCleanups = [this._renderer.listen(this._element.nativeElement, 'focusin', this._handleFocusin), this._renderer.listen(this._element.nativeElement, 'focusout', this._handleFocusout)];\n    });\n    if (this._value) {\n      this._setOptionsFromValues(this._value);\n    }\n    this._watchForSelectionChange();\n  }\n  ngOnChanges(changes) {\n    const disabledChanges = changes['disabled'];\n    const disableRippleChanges = changes['disableRipple'];\n    const hideSingleSelectionIndicatorChanges = changes['hideSingleSelectionIndicator'];\n    if (disableRippleChanges && !disableRippleChanges.firstChange || disabledChanges && !disabledChanges.firstChange || hideSingleSelectionIndicatorChanges && !hideSingleSelectionIndicatorChanges.firstChange) {\n      this._markOptionsForCheck();\n    }\n  }\n  ngOnDestroy() {\n    this._keyManager?.destroy();\n    this._listenerCleanups?.forEach(current => current());\n    this._destroyed.next();\n    this._destroyed.complete();\n    this._isDestroyed = true;\n  }\n  focus(options) {\n    this._element.nativeElement.focus(options);\n  }\n  selectAll() {\n    return this._setAllOptionsSelected(true);\n  }\n  deselectAll() {\n    return this._setAllOptionsSelected(false);\n  }\n  _reportValueChange() {\n    if (this.options && !this._isDestroyed) {\n      const value = this._getSelectedOptionValues();\n      this._onChange(value);\n      this._value = value;\n    }\n  }\n  _emitChangeEvent(options) {\n    this.selectionChange.emit(new MatSelectionListChange(this, options));\n  }\n  writeValue(values) {\n    this._value = values;\n    if (this.options) {\n      this._setOptionsFromValues(values || []);\n    }\n  }\n  setDisabledState(isDisabled) {\n    this.disabled = isDisabled;\n    this._changeDetectorRef.markForCheck();\n    this._markOptionsForCheck();\n  }\n  get disabled() {\n    return this._selectionListDisabled();\n  }\n  set disabled(value) {\n    this._selectionListDisabled.set(coerceBooleanProperty(value));\n    if (this._selectionListDisabled()) {\n      this._keyManager?.setActiveItem(-1);\n    }\n  }\n  _selectionListDisabled = signal(false, ...(ngDevMode ? [{\n    debugName: \"_selectionListDisabled\"\n  }] : []));\n  registerOnChange(fn) {\n    this._onChange = fn;\n  }\n  registerOnTouched(fn) {\n    this._onTouched = fn;\n  }\n  _watchForSelectionChange() {\n    this.selectedOptions.changed.pipe(takeUntil(this._destroyed)).subscribe(event => {\n      for (let item of event.added) {\n        item.selected = true;\n      }\n      for (let item of event.removed) {\n        item.selected = false;\n      }\n      if (!this._containsFocus()) {\n        this._resetActiveOption();\n      }\n    });\n  }\n  _setOptionsFromValues(values) {\n    this.options.forEach(option => option._setSelected(false));\n    values.forEach(value => {\n      const correspondingOption = this.options.find(option => {\n        return option.selected ? false : this.compareWith(option.value, value);\n      });\n      if (correspondingOption) {\n        correspondingOption._setSelected(true);\n      }\n    });\n  }\n  _getSelectedOptionValues() {\n    return this.options.filter(option => option.selected).map(option => option.value);\n  }\n  _markOptionsForCheck() {\n    if (this.options) {\n      this.options.forEach(option => option._markForCheck());\n    }\n  }\n  _setAllOptionsSelected(isSelected, skipDisabled) {\n    const changedOptions = [];\n    this.options.forEach(option => {\n      if ((!skipDisabled || !option.disabled) && option._setSelected(isSelected)) {\n        changedOptions.push(option);\n      }\n    });\n    if (changedOptions.length) {\n      this._reportValueChange();\n    }\n    return changedOptions;\n  }\n  get options() {\n    return this._items;\n  }\n  _handleKeydown(event) {\n    const activeItem = this._keyManager.activeItem;\n    if ((event.keyCode === ENTER || event.keyCode === SPACE) && !this._keyManager.isTyping() && activeItem && !activeItem.disabled) {\n      event.preventDefault();\n      activeItem._toggleOnInteraction();\n    } else if (event.keyCode === A && this.multiple && !this._keyManager.isTyping() && hasModifierKey(event, 'ctrlKey', 'metaKey')) {\n      const shouldSelect = this.options.some(option => !option.disabled && !option.selected);\n      event.preventDefault();\n      this._emitChangeEvent(this._setAllOptionsSelected(shouldSelect, true));\n    } else {\n      this._keyManager.onKeydown(event);\n    }\n  }\n  _handleFocusout = () => {\n    setTimeout(() => {\n      if (!this._containsFocus()) {\n        this._resetActiveOption();\n      }\n    });\n  };\n  _handleFocusin = event => {\n    if (this.disabled) {\n      return;\n    }\n    const activeIndex = this._items.toArray().findIndex(item => item._elementRef.nativeElement.contains(event.target));\n    if (activeIndex > -1) {\n      this._setActiveOption(activeIndex);\n    } else {\n      this._resetActiveOption();\n    }\n  };\n  _setupRovingTabindex() {\n    this._keyManager = new FocusKeyManager(this._items).withHomeAndEnd().withTypeAhead().withWrap().skipPredicate(() => this.disabled);\n    this._resetActiveOption();\n    this._keyManager.change.subscribe(activeItemIndex => this._setActiveOption(activeItemIndex));\n    this._items.changes.pipe(takeUntil(this._destroyed)).subscribe(() => {\n      const activeItem = this._keyManager.activeItem;\n      if (!activeItem || this._items.toArray().indexOf(activeItem) === -1) {\n        this._resetActiveOption();\n      }\n    });\n  }\n  _setActiveOption(index) {\n    this._items.forEach((item, itemIndex) => item._setTabindex(itemIndex === index ? 0 : -1));\n    this._keyManager.updateActiveItem(index);\n  }\n  _resetActiveOption() {\n    if (this.disabled) {\n      this._setActiveOption(-1);\n      return;\n    }\n    const activeItem = this._items.find(item => item.selected && !item.disabled) || this._items.first;\n    this._setActiveOption(activeItem ? this._items.toArray().indexOf(activeItem) : -1);\n  }\n  _containsFocus() {\n    const activeElement = _getFocusedElementPierceShadowDom();\n    return activeElement && this._element.nativeElement.contains(activeElement);\n  }\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatSelectionList,\n    deps: [],\n    target: i0.FactoryTarget.Component\n  });\n  static cmp = i0.ngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatSelectionList,\n    isStandalone: true,\n    selector: \"mat-selection-list\",\n    inputs: {\n      color: \"color\",\n      compareWith: \"compareWith\",\n      multiple: \"multiple\",\n      hideSingleSelectionIndicator: \"hideSingleSelectionIndicator\",\n      disabled: \"disabled\"\n    },\n    outputs: {\n      selectionChange: \"selectionChange\"\n    },\n    host: {\n      attributes: {\n        \"role\": \"listbox\"\n      },\n      listeners: {\n        \"keydown\": \"_handleKeydown($event)\"\n      },\n      properties: {\n        \"attr.aria-multiselectable\": \"multiple\"\n      },\n      classAttribute: \"mat-mdc-selection-list mat-mdc-list-base mdc-list\"\n    },\n    providers: [MAT_SELECTION_LIST_VALUE_ACCESSOR, {\n      provide: MatListBase,\n      useExisting: MatSelectionList\n    }, {\n      provide: SELECTION_LIST,\n      useExisting: MatSelectionList\n    }],\n    queries: [{\n      propertyName: \"_items\",\n      predicate: MatListOption,\n      descendants: true\n    }],\n    exportAs: [\"matSelectionList\"],\n    usesInheritance: true,\n    usesOnChanges: true,\n    ngImport: i0,\n    template: '<ng-content></ng-content>',\n    isInline: true,\n    styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\\n\"],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatSelectionList,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-selection-list',\n      exportAs: 'matSelectionList',\n      host: {\n        'class': 'mat-mdc-selection-list mat-mdc-list-base mdc-list',\n        'role': 'listbox',\n        '[attr.aria-multiselectable]': 'multiple',\n        '(keydown)': '_handleKeydown($event)'\n      },\n      template: '<ng-content></ng-content>',\n      encapsulation: ViewEncapsulation.None,\n      providers: [MAT_SELECTION_LIST_VALUE_ACCESSOR, {\n        provide: MatListBase,\n        useExisting: MatSelectionList\n      }, {\n        provide: SELECTION_LIST,\n        useExisting: MatSelectionList\n      }],\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\\n\"]\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    _items: [{\n      type: ContentChildren,\n      args: [MatListOption, {\n        descendants: true\n      }]\n    }],\n    selectionChange: [{\n      type: Output\n    }],\n    color: [{\n      type: Input\n    }],\n    compareWith: [{\n      type: Input\n    }],\n    multiple: [{\n      type: Input\n    }],\n    hideSingleSelectionIndicator: [{\n      type: Input\n    }],\n    disabled: [{\n      type: Input\n    }]\n  }\n});\n\nclass MatListModule {\n  static fac = i0.ngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListModule,\n    deps: [],\n    target: i0.FactoryTarget.NgModule\n  });\n  static mod = i0.ngDeclareNgModule({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListModule,\n    imports: [ObserversModule, MatRippleModule, MatPseudoCheckboxModule, MatList, MatActionList, MatNavList, MatSelectionList, MatListItem, MatListOption, MatListSubheaderCssMatStyler, MatListItemAvatar, MatListItemIcon, MatListItemLine, MatListItemTitle, MatListItemMeta],\n    exports: [BidiModule, MatList, MatActionList, MatNavList, MatSelectionList, MatListItem, MatListOption, MatListItemAvatar, MatListItemIcon, MatListSubheaderCssMatStyler, MatDividerModule, MatListItemLine, MatListItemTitle, MatListItemMeta]\n  });\n  static inj = i0.ngDeclareInjector({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatListModule,\n    imports: [ObserversModule, MatRippleModule, MatPseudoCheckboxModule, BidiModule, MatDividerModule]\n  });\n}\ni0.ngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatListModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: [ObserversModule, MatRippleModule, MatPseudoCheckboxModule, MatList, MatActionList, MatNavList, MatSelectionList, MatListItem, MatListOption, MatListSubheaderCssMatStyler, MatListItemAvatar, MatListItemIcon, MatListItemLine, MatListItemTitle, MatListItemMeta],\n      exports: [BidiModule, MatList, MatActionList, MatNavList, MatSelectionList, MatListItem, MatListOption, MatListItemAvatar, MatListItemIcon, MatListSubheaderCssMatStyler, MatDividerModule, MatListItemLine, MatListItemTitle, MatListItemMeta]\n    }]\n  }]\n});\n\nexport { MAT_LIST, MAT_LIST_CONFIG, MAT_NAV_LIST, MAT_SELECTION_LIST_VALUE_ACCESSOR, MatActionList, MatList, MatListItem, MatListItemAvatar, MatListItemIcon, MatListItemLine, MatListItemMeta, MatListItemTitle, MatListModule, MatListOption, MatListSubheaderCssMatStyler, MatNavList, MatSelectionList, MatSelectionListChange, SELECTION_LIST, _MatListItemGraphicBase };\n","<div class=\"c-ew__preview-holder\">\r\n  <mat-label class=\"c-ew__preview-label\" [ngClass]=\"{\r\n    'mat-caption' : itemCount(),\r\n    'mat-empty' : !itemCount(),\r\n    'mat-error' : ui().touchedAndInvalid && !config.initialDisabled,\r\n    'color__primary' : !ui().touchedAndInvalid && !config.initialDisabled,\r\n    'my-label-disabled' : config.initialDisabled\r\n    }\">\r\n    {{ basics().labelWithRequired }}\r\n  </mat-label>\r\n  <div matRipple [matRippleAnimation]=\"{ enterDuration: 360 }\" class=\"c-ew__preview mat-ripple\" (click)=\"expandDialog()\"\r\n    [ngClass]=\"{\r\n    'c-ew__preview--invalid' : ui().touchedAndInvalid,\r\n    'c-ew__preview--disabled': config.initialDisabled\r\n    }\">\r\n    <div [ngClass]=\"itemCount() ? 'c-ew__preview-container' : 'c-ew__preview-container--empty'\">\r\n      <div class=\"my-flex\">\r\n        @if (itemCount()) {\r\n          <mat-list class=\"eav-list my-pills\">\r\n            @for (item of selectedItems(); track (item.value + $index)) {\r\n              <mat-list-item role=\"listitem\" class=\"eav-list-item\" [tippy]=\"item.tooltip\">\r\n                <span mat-line>{{ item.label }}</span>\r\n              </mat-list-item>\r\n            }\r\n          </mat-list>\r\n        }\r\n        @if (itemCount() > 3) {\r\n          <span class=\"eav-more-entities\" [ngClass]=\"{'eav-more-entities-margin-right': enableTextEntry() }\">\r\n            {{ itemCount() }}\r\n          </span>\r\n        }\r\n        @if (enableTextEntry()) {\r\n          <span matSuffix>\r\n            <ng-content select=\"[freeTextButtons]\"></ng-content>\r\n          </span>\r\n        }\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { TippyDirective } from 'projects/eav-ui/src/app/shared/directives/tippy.directive';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\n\r\n@Component({\r\n    selector: 'app-picker-pills',\r\n    templateUrl: './picker-pills.html',\r\n    styleUrls: ['./picker-pills.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        NgClass,\r\n        MatRippleModule,\r\n        MatListModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PickerPillsComponent extends PickerPartBaseComponent { }\r\n","<div class=\"c-ew__preview-holder\">\r\n  <app-picker-inline-header>\r\n    <ng-content addNew select=\"[addNew]\"></ng-content>\r\n    <ng-content freeTextButtons select=\"[freeTextButtons]\"></ng-content>\r\n  </app-picker-inline-header>\r\n\r\n  <!-- <div (click)=\"expandDialog()\"\r\n    [ngClass]=\"{\r\n    'c-ew__preview--invalid' : ui().touchedAndInvalid,\r\n    'c-ew__preview--disabled': config.initialDisabled\r\n    }\"> -->\r\n\r\n    @for (item of options(); track item.value) {\r\n      <div>\r\n        <mat-radio-button\r\n          class=\"picker-option-wrapper\"\r\n          (click)=\"select(item)\"\r\n          [name]=\"name\"\r\n          [checked]=\"item.selected\"\r\n          [disabled]=\"ui().disabled || item.noSelect\"\r\n          [tippy]=\"item.tooltip\"\r\n          tippyShowDelay=\"500\"\r\n          [tippyAllowHtml]=\"true\"\r\n          [tippyArrow]=\"true\"\r\n        >\r\n          <!-- Show Preview Label -->\r\n          <app-picker-item-label [item]=\"item\" [show]=\"true\" [index]=\"$index\" [settings]=\"fieldState.settings()\" [uiFeatures]=\"{ remove: false }\" [actionsFirst]=\"true\"></app-picker-item-label>\r\n        </mat-radio-button>\r\n      </div>\r\n    }\r\n  <!-- </div> -->\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatRadioButton } from '@angular/material/radio';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { PickerInlineBaseComponent } from '../picker-inline/picker-inline-base';\r\nimport { PickerInlineHeaderComponent } from '../picker-inline/picker-inline-header';\r\nimport { PickerPreviewLabelComponent } from '../picker-item-label/picker-item-label';\r\n\r\n@Component({\r\n    selector: 'app-picker-radio',\r\n    templateUrl: './picker-radio.html',\r\n    styleUrls: ['./picker-radio.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatRippleModule,\r\n        MatRadioButton,\r\n        TippyDirective,\r\n        PickerInlineHeaderComponent,\r\n        PickerPreviewLabelComponent,\r\n    ]\r\n})\r\nexport class PickerRadioComponent extends PickerInlineBaseComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    this.fieldState.requireFeature(FeatureNames.PickerUiRadio);\r\n  }\r\n\r\n  /** Name is used to group the radio buttons together in the form */\r\n  name = this.fieldState.name;\r\n\r\n}\r\n","@if (allowText()) {\r\n  <span matSuffix class=\"toggle-buttons\">\r\n    @if (showBoth() || isTextMode()) {\r\n      <button\r\n        mat-icon-button\r\n        class=\"eav-suffix-button\"\r\n        [ngClass]=\"isTextMode() ? '' : 'active'\"\r\n        tippyTranslate=\"Fields.String.Dropdown\"\r\n        [disabled]=\"csDisabled()\"\r\n        appClickStopPropagation\r\n        (click)=\"isTextMode() ? toggleFreeText(csDisabled()) : null\"\r\n      >\r\n        <mat-icon>search</mat-icon>\r\n      </button>\r\n    }\r\n    @if (showBoth() || !isTextMode()) {\r\n      <button\r\n        mat-icon-button\r\n        class=\"eav-suffix-button\"\r\n        [ngClass]=\"isTextMode() ? 'active' : ''\"\r\n        tippyTranslate=\"Fields.String.Freetext\"\r\n        [disabled]=\"csDisabled()\"\r\n        appClickStopPropagation\r\n        (click)=\"isTextMode() ? null : toggleFreeText(csDisabled())\"\r\n      >\r\n        <mat-icon>text_fields</mat-icon>\r\n      </button>\r\n    }\r\n  </span>\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, inject, input } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { FieldState } from '../../field-state';\r\n\r\n@Component({\r\n    selector: 'app-picker-toggle-text',\r\n    templateUrl: './picker-text-toggle.html',\r\n    styleUrls: ['./picker-text-toggle.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatButtonModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        ClickStopPropagationDirective,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PickerTextToggleComponent {\r\n  csDisabled = input<boolean>();\r\n  allowText = input<boolean>();\r\n  isTextMode = input<boolean>(false);\r\n\r\n  showBoth = input<boolean>(true);\r\n\r\n  pickerData = inject(FieldState).pickerData;\r\n\r\n  constructor() { }\r\n\r\n  toggleFreeText(disabled: boolean): void {\r\n    if (disabled) return;\r\n    this.pickerData.toggleFreeTextMode();\r\n  }\r\n}\r\n","<div>\r\n  <mat-form-field [formGroup]=\"fieldState.group\" class=\"eav-mat-form-field\" color=\"accent\">\r\n    @if (useMultiLine()) {\r\n      <textarea matInput [required]=\"basics().required\" [formControlName]=\"fieldState.name\"\r\n        [placeholder]=\"basics().placeholder\"></textarea>\r\n    } @else {\r\n      <input matInput [required]=\"basics().required\" [formControlName]=\"fieldState.name\" [placeholder]=\"basics().placeholder\">\r\n    }\r\n    <div matSuffix>\r\n      <ng-content select=\"[freeTextButtons]\"></ng-content>\r\n    </div>\r\n    <mat-label>{{ basics().label }}</mat-label>\r\n  </mat-form-field>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\n\r\n@Component({\r\n    selector: 'app-picker-text',\r\n    templateUrl: './picker-text.html',\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n    ]\r\n})\r\nexport class PickerTextComponent extends PickerPartBaseComponent {\r\n  \r\n  log = classLog({PickerTextComponent});\r\n\r\n  constructor() { super(); }\r\n\r\n  /**\r\n   * Tell the text-input to be multi-line, if the separator is a newline.\r\n   * Otherwise, it will be single-line.\r\n   */\r\n  protected useMultiLine = computedObj('useMultiLine', () => {\r\n    const settings = this.fieldState.settings();\r\n    const separator = settings.Separator;\r\n    const isSeparatorNewLine = separator == '\\\\n' /* buggy temp double-slash-n */ || separator == '\\n' /* correct */;\r\n    return isSeparatorNewLine;\r\n  });\r\n}\r\n","<div class=\"my-flex\">\r\n  <!-- The Input field / checkboxes etc. -->\r\n  <div class=\"eav-mat-form-field\">\r\n    @switch (mode()) {\r\n      @case (\"text\") {\r\n        <app-picker-text>\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle\"></ng-container>\r\n        </app-picker-text>\r\n      }\r\n      @case (\"checkbox\") {\r\n        <app-picker-checkboxes>\r\n          <ng-container addNew *ngTemplateOutlet=\"addNew\"></ng-container>\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle; context: { $implicit: false }\"></ng-container>\r\n        </app-picker-checkboxes>\r\n      }\r\n      @case (\"radio\") {\r\n        <app-picker-radio>\r\n          <ng-container addNew *ngTemplateOutlet=\"addNew\"></ng-container>\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle; context: { $implicit: false }\"></ng-container>\r\n        </app-picker-radio>\r\n      }\r\n      @case (\"pills\") {\r\n        <app-picker-pills>\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle\"></ng-container>\r\n        </app-picker-pills>\r\n      }\r\n      @case (\"search\") {\r\n        <app-picker-search [showSelectedItem]=\"true\" [showItemEditButtons]=\"true\">\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle\"></ng-container>\r\n        </app-picker-search>\r\n      }\r\n    }\r\n  </div>\r\n\r\n  <!-- The edit / add buttons -->\r\n  @if (mode() !== \"radio\" && mode() !== \"checkbox\") {\r\n\r\n    <div class=\"my-flex\">\r\n      <!-- create new entity to add to this list -->\r\n      <ng-container *ngTemplateOutlet=\"addNew\"></ng-container>\r\n      <!-- Open dialog button -->\r\n      @if (features().showGoToListDialogButton) {\r\n        <button\r\n          mat-icon-button\r\n          class=\"picker-inline-button\"\r\n          [disabled]=\"ui().disabled\"\r\n          tippyTranslate=\"Fields.Picker.OpenMultiselect\"\r\n          (click)=\"expandDialog()\"\r\n        >\r\n          <mat-icon>post_add</mat-icon>\r\n        </button>\r\n      }\r\n    </div>\r\n  }\r\n</div>\r\n\r\n<!-- Help text for most controls (not radio/checkbox) -->\r\n@if (!skipHelpText()) {\r\n  <app-field-helper-text></app-field-helper-text>\r\n} @else {\r\n  <!-- Cheap spacer if no help text, should probably be done better some day -->\r\n  <br />\r\n}\r\n\r\n<!-- Part to add the text-toggle to the control -->\r\n<ng-template #textToggle let-showBoth>\r\n  <span [ngClass]=\"{ 'picker-suffix-text': showBoth }\">\r\n    <app-picker-toggle-text\r\n      [csDisabled]=\"ui().disabled\"\r\n      [allowText]=\"features().textEntry\"\r\n      [isTextMode]=\"isInFreeTextMode()\"\r\n      [showBoth]=\"showBoth ?? true\"\r\n    >\r\n    </app-picker-toggle-text>\r\n  </span>\r\n</ng-template>\r\n\r\n<!-- Part for the AddNew button, which will either open the edit, or first show a menu with all the options -->\r\n<ng-template #addNew>\r\n  @if (features().showAddNewButton) {\r\n    @if (pickerData.state.typesForNew().length > 1) {\r\n      <button\r\n        mat-icon-button\r\n        class=\"picker-inline-button\"\r\n        tippyTranslate=\"Fields.Picker.New\"\r\n        [disabled]=\"ui().disabled || !features().create\"\r\n        [matMenuTriggerFor]=\"entityTypesMenu\"\r\n      >\r\n        <mat-icon>add_circle_outline</mat-icon>\r\n      </button>\r\n      <mat-menu #entityTypesMenu=\"matMenu\">\r\n        @for (ct of pickerData.state.typesForNew(); track ct) {\r\n          <button mat-menu-item (click)=\"openNewEntityDialog(ct.guid)\">\r\n            <span>{{ ct.label }}</span>\r\n          </button>\r\n        }\r\n      </mat-menu>\r\n    } @else {\r\n      <button\r\n        mat-icon-button\r\n        class=\"picker-inline-button\"\r\n        tippyTranslate=\"Fields.Picker.New\"\r\n        [disabled]=\"ui().disabled || !features().create\"\r\n        (click)=\"openNewEntityDialog(null)\"\r\n      >\r\n        <mat-icon>add_circle_outline</mat-icon>\r\n      </button>\r\n    }\r\n  }\r\n</ng-template>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { PickerCheckboxesComponent } from '../picker-checkboxes/picker-checkboxes';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\nimport { PickerPillsComponent } from '../picker-pills/picker-pills';\r\nimport { PickerRadioComponent } from '../picker-radio/picker-radio';\r\nimport { PickerSearchComponent } from '../picker-search/picker-search';\r\nimport { PickerTextToggleComponent } from '../picker-text-toggle/picker-text-toggle';\r\nimport { PickerTextComponent } from '../picker-text/picker-text';\r\n\r\n@Component({\r\n    selector: 'app-picker-preview',\r\n    templateUrl: './picker-preview.html',\r\n    styleUrls: ['./picker-preview.scss'],\r\n    imports: [\r\n        NgTemplateOutlet,\r\n        NgClass,\r\n        MatButtonModule,\r\n        MatMenuModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n        PickerPillsComponent,\r\n        PickerTextToggleComponent,\r\n        PickerSearchComponent,\r\n        PickerTextComponent,\r\n        PickerCheckboxesComponent,\r\n        PickerRadioComponent,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\nexport class PickerPreviewComponent extends PickerPartBaseComponent {\r\n\r\n  log = classLog({PickerPreviewComponent});\r\n\r\n  constructor() { super(); }\r\n\r\n  #pickerMode = this.fieldState.settingExt('PickerDisplayMode');\r\n\r\n  mode = computedObj('mode', () => {\r\n    if (this.isInFreeTextMode()) return 'text';\r\n    const pdm = this.#pickerMode();\r\n    switch (pdm) {\r\n      case 'radio': return 'radio';\r\n      case 'checkbox': return 'checkbox';\r\n      case 'auto-inline':\r\n        // TODO: Check if the selected exist in the options, if not, default to text\r\n        const pd = this.fieldState.pickerData;\r\n\r\n\r\n        // Multi-value should automatically use checkboxes\r\n        if (this.features().multiValue) return 'checkbox';\r\n        return 'radio';\r\n      case 'list':\r\n      default:\r\n        if (this.selectedItems().length > 1) return 'pills';\r\n        return 'search';\r\n    }\r\n  });\r\n\r\n  skipHelpText = computedObj('helpTextOnTop', () => {\r\n    const mode = this.mode();\r\n    return mode === 'radio' || mode === 'checkbox';\r\n  });\r\n\r\n}\r\n","\r\n@if (!features().multiValue) {\r\n  <mat-label class=\"field-label\"\r\n    [ngClass]=\"{ 'disabled': ui().disabled }\">\r\n    {{ basics().labelWithRequired }}\r\n  </mat-label>\r\n}\r\n@if (selectedItems().length > 0) {\r\n  <div\r\n    cdkDropList\r\n    [cdkDropListDisabled]=\"!features().multiValue || ui().disabled\"\r\n    (cdkDropListDropped)=\"drop($event)\"\r\n    class=\"my-list\"\r\n    [ngClass]=\"'my-list-' + (features().multiValue ? 'draggable' : 'static')\"\r\n  >\r\n    <!-- Normal list usually shows only one item, but can show \"empty slot\" / \"null-item\" in debug mode -->\r\n    @for (item of selectedItems(); track (item.value + $index); let index = $index) {\r\n      <div cdkDrag class=\"my-item\" [ngClass]=\"('my-item-' + (features().multiValue ? 'draggable' : 'static')) + ' ' + (ui().disabled ? 'disabled' : '')\">\r\n        <div class=\"item-title\" [ngClass]=\"{ 'disabled': ui().disabled }\">\r\n          <!-- visual Drag-Handle if sortable -->\r\n          @if (features().multiValue) {\r\n            <mat-icon class=\"item-title__icon\"\r\n              tippyTranslate=\"Fields.Picker.DragMove\"\r\n              [tippyDisabled]=\"ui().disabled\">\r\n              drag_handle\r\n            </mat-icon>\r\n          }\r\n          <span class=\"item-title__text\" [tippy]=\"item.tooltip\">\r\n            {{ item.label }}\r\n          </span>\r\n        </div>\r\n        <app-picker-item-buttons matSuffix class=\"my-item-actions\" [show]=\"true\" [item]=\"item\" [index]=\"index\"></app-picker-item-buttons>\r\n      </div>\r\n    }\r\n  </div>\r\n}\r\n","import { CdkDrag, CdkDragDrop, CdkDropList } from '@angular/cdk/drag-drop';\r\nimport { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerItemButtonsComponent } from '../picker-item-buttons/picker-item-buttons';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\nimport { ReorderIndexes } from './reorder-index.models';\r\n\r\n@Component({\r\n    selector: 'app-picker-list',\r\n    templateUrl: './picker-list.html',\r\n    styleUrls: ['./picker-list.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatIconModule,\r\n        MatButtonModule,\r\n        NgClass,\r\n        CdkDropList,\r\n        CdkDrag,\r\n        PickerItemButtonsComponent,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PickerListComponent extends PickerPartBaseComponent {\r\n  \r\n  log = classLog({PickerListComponent});\r\n\r\n  constructor() { super(); }\r\n\r\n  drop(event: CdkDragDrop<PickerItem[]>): void {\r\n    this.pickerData.state.reorder({\r\n      previousIndex: event.previousIndex,\r\n      currentIndex: event.currentIndex,\r\n    } satisfies ReorderIndexes);\r\n  }\r\n\r\n}\r\n","<app-picker-list></app-picker-list>\r\n\r\n@if (!isInFreeTextMode()) {\r\n  <app-picker-search\r\n    [showSelectedItem]=\"false\"\r\n    [showItemEditButtons]=\"false\">\r\n  </app-picker-search>\r\n}\r\n@else {\r\n  <app-picker-text></app-picker-text>\r\n}\r\n<app-field-helper-text></app-field-helper-text>\r\n\r\n<!-- Note: this is almost the same as in picker-preview, but the styling (FAB) and icons are a bit different -->\r\n<!-- add new entity -->\r\n@if (showAddNewEntityButtonInDialog()) {\r\n  <div style=\"display: flex; justify-content: end\">\r\n    @if (pickerData.state.typesForNew().length > 1) {\r\n      <button\r\n        mat-mini-fab\r\n        color=\"accent\"\r\n        tippyTranslate=\"Fields.Picker.New\"\r\n        [disabled]=\"ui().disabled || !features().create\"\r\n        [matMenuTriggerFor]=\"entityTypesMenu\"\r\n      >\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n      <mat-menu #entityTypesMenu=\"matMenu\">\r\n        @for (ct of pickerData.state.typesForNew(); track ct) {\r\n          <button mat-menu-item (click)=\"openNewEntityDialog(ct.guid)\">\r\n            <span>{{ ct.label }}</span>\r\n          </button>\r\n        }\r\n      </mat-menu>\r\n    } @else {\r\n      <button\r\n        mat-mini-fab\r\n        color=\"accent\"\r\n        tippyTranslate=\"Fields.Picker.New\"\r\n        [disabled]=\"ui().disabled || !features().create\"\r\n        (click)=\"openNewEntityDialog(null)\"\r\n      >\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    }\r\n  </div>\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { PickerListComponent } from '../picker-list/picker-list';\r\nimport { PickerPartBaseComponent } from '../picker-part-base';\r\nimport { PickerSearchComponent } from '../picker-search/picker-search';\r\nimport { PickerTextComponent } from '../picker-text/picker-text';\r\n\r\n@Component({\r\n    selector: 'app-picker-dialog',\r\n    templateUrl: './picker-dialog.html',\r\n    imports: [\r\n        PickerListComponent,\r\n        PickerSearchComponent,\r\n        PickerTextComponent,\r\n        FieldHelperTextComponent,\r\n        MatButtonModule,\r\n        MatMenuModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PickerDialogComponent extends PickerPartBaseComponent {\r\n\r\n  protected showAddNewEntityButtonInDialog = computedObj('showAddNewEntityButtonInDialog', () => {\r\n    const features = this.features();\r\n    const settings = this.fieldState.settings();\r\n    const showAddNew = !this.isInFreeTextMode()\r\n      && settings.EnableCreate\r\n      && settings.CreateTypes\r\n      && features.multiValue;\r\n    return showAddNew;\r\n  });\r\n\r\n}\r\n","<!--\r\nThis template is used for all entity like fields,\r\ne.g. EntityDefault, EntityContentBlocks, EntityQuery, StringDropdownQuery\r\n-->\r\n<!-- <pre>Field.Picker Start - showPreview: {{ showPreview() }}</pre> -->\r\n@if (showPreview()) {\r\n  <!-- Had to disable defer 2024-06-14 2dm when Upgrading to Angular 17.3 from 17.0 before, seems to be module-related\r\n        can probably reactivate once modules are gone\r\n  -->\r\n  <!-- @defer { -->\r\n    <!-- <div>preview</div> -->\r\n    <app-picker-preview></app-picker-preview>\r\n  <!-- } -->\r\n}\r\n@else {\r\n  <!-- @defer { -->\r\n    <!-- <div>search, not preview</div> -->\r\n    <app-picker-dialog></app-picker-dialog>\r\n  <!-- } -->\r\n}\r\n<!-- <pre>Field.Picker End</pre> -->","import { Component, inject, Injector, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../edit-types/src/PickerSources';\r\nimport { BaseComponent } from '../../../shared/components/base';\r\nimport { classLog, ClassLogger } from '../../../shared/logging';\r\nimport { computedObj } from '../../../shared/signals/signal.utilities';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { FieldState } from '../field-state';\r\nimport { PickerDataSetup } from './picker-data-setup';\r\nimport { PickerImports } from './picker-providers.constant';\r\nimport { PickerSearchComponent } from './picker-search/picker-search';\r\n\r\n@Component({\r\n    // selector: none since it's a base class\r\n    templateUrl: './picker.html',\r\n    imports: PickerImports\r\n})\r\nexport abstract class PickerComponent extends BaseComponent implements OnInit, OnDestroy {\r\n\r\n  /** Typed Log Specs for inheriting classes to reuse */\r\n  static logSpecs = {\r\n    all: false,\r\n    focusOnSearchComponent: true,\r\n    refreshOnChildClosed: false,\r\n    childFormResult: true,\r\n  };\r\n\r\n  log: ClassLogger<typeof PickerComponent.logSpecs>;\r\n  \r\n  constructor() { super(); }\r\n  \r\n  constructorEnd() {\r\n    this.log ??= classLog({PickerComponent}, PickerComponent.logSpecs);\r\n    this.log.a('constructor');\r\n    const pickerDataFactory = new PickerDataSetup(this.#injector);\r\n    pickerDataFactory.setupPickerData(this.#pickerData, this.#fieldState);\r\n  }\r\n\r\n  @ViewChild(PickerSearchComponent) protected entitySearchComponent: PickerSearchComponent;\r\n\r\n  /** The injector is used by most children to get transient one-time objects */\r\n  #injector = inject(Injector);\r\n  #editRoutingService = inject(EditRoutingService);\r\n  #fieldState = inject(FieldState) as FieldState<FieldValue, FieldSettingsWithPickerSource>;\r\n\r\n  #pickerData = this.#fieldState.pickerData;\r\n\r\n  /**\r\n   * Whether to show the preview or not,\r\n   * since this control is used both for preview and dialog.\r\n   */\r\n  showPreview = computedObj('showPreview', () => {\r\n    const s = this.#pickerData.features();\r\n    return !s.multiValue || (s.multiValue && !this.#fieldState.isOpen());\r\n  });\r\n\r\n  ngOnInit(): void {\r\n    if (this.#pickerData.closeWatcherAttachedWIP)\r\n      return;\r\n    this.#refreshOnChildClosed();\r\n    this.#pickerData.closeWatcherAttachedWIP = true;\r\n  }\r\n\r\n  #refreshOnChildClosed(): void {\r\n    const l = this.log.fnIf('refreshOnChildClosed');\r\n\r\n    // this is used when new entity is created in child form it automatically adds it to the picker as selected item\r\n    const config = this.#fieldState.config;\r\n    this.subscriptions.add(\r\n      // TODO: 2dm 2024-09-05 I believe this doesn't work as expected\r\n      this.#editRoutingService.childFormResult(config.index, config.entityGuid)\r\n        .subscribe(result => {\r\n          const l2 = this.log.fnIf('childFormResult', { result });\r\n          return l2.r(this.#pickerData.addNewlyCreatedItem(result));\r\n        })\r\n    );\r\n    l.end();\r\n  }\r\n}\r\n","import { PickerOptionCustom } from '../../../../../../../edit-types/src/DropdownOption';\r\nimport { classLog } from '../../../../shared/logging/logging';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  calculateDropdownOptions: true,\r\n  addSelectedIfMissing: true,\r\n}\r\n\r\nexport class DataSourceDropDownOptions {\r\n  log = classLog({DataSourceDropDownOptions}, logSpecs);\r\n\r\n  constructor() { }\r\n\r\n  parseOptions(\r\n    currentValue: string | number | null,\r\n    type: 'string' | 'number',\r\n    dropdownValuesFormat: '' | 'value-label', // first one is empty as a compatibility with old 2sxc versions\r\n    dropdownValues: string\r\n  ): PickerOptionCustom[] {\r\n    const l = this.log.fn('calculateDropdownOptions', { currentValue, type, dropdownValuesFormat, dropdownValues });\r\n\r\n    if (!dropdownValues)\r\n      return l.r(this.addSelectedIfMissing([], currentValue), 'No dropdownValues');\r\n  \r\n    const lines = dropdownValues\r\n      .replace(/\\r/g, '')\r\n      .split('\\n');\r\n  \r\n    switch (dropdownValuesFormat) {\r\n      case '':\r\n        const classicOptions = lines.map(line => {\r\n          const s = line.split(':');\r\n          const maybeWantedEmptyVal = s[1];\r\n          const key = s.shift();    // first element is the key; remove it\r\n          const val = s.join(':');  // in case there are more than one colon, we'll join them back\r\n          return {\r\n            Title: key,\r\n            Value: (val || maybeWantedEmptyVal === '') ? val : key\r\n          } satisfies PickerOptionCustom;\r\n        });\r\n        return l.r(this.addSelectedIfMissing(classicOptions, currentValue));\r\n  \r\n      // Newer format, where the value is the first part, and the label is the rest\r\n      // Numbers can only be in this format, as we added the number-dropdowns later\r\n      case 'value-label':\r\n        const options = lines.map(line => {\r\n          // remove backslash escapes\r\n          const chars: { char: string, escaped: boolean }[] = [];\r\n          for (let i = 0; i < line.length; i++) {\r\n            const current = line[i];\r\n            const next = line[i + 1];\r\n  \r\n            if (current === '\\\\' && next != null) {\r\n              chars.push({ char: next, escaped: true });\r\n              i++;\r\n              continue;\r\n            }\r\n  \r\n            chars.push({ char: current, escaped: false });\r\n          }\r\n  \r\n          // dropdownValues split with \":\", but ignore if escaped\r\n          const separatorIndex = chars.findIndex(c => c.char === ':' && c.escaped === false);\r\n          const option: PickerOptionCustom = {\r\n            Title: separatorIndex >= 0\r\n              ? chars.slice(separatorIndex + 1, chars.length).map(c => c.char).join('')\r\n              : chars.map(c => c.char).join(''),\r\n            Value: separatorIndex >= 0\r\n              ? chars.slice(0, separatorIndex).map(c => c.char).join('')\r\n              : chars.map(c => c.char).join(''),\r\n          };\r\n          if (type === 'number') {\r\n            option.Value = option.Value != null && option.Value !== ''\r\n              ? !isNaN(Number(option.Value)) ? Number(option.Value) : null\r\n              : null;\r\n          }\r\n          return option;\r\n        });\r\n        return l.r(this.addSelectedIfMissing(options, currentValue));\r\n    }\r\n  }\r\n\r\n  addSelectedIfMissing(options: PickerOptionCustom[], currentValue: string | number | null): PickerOptionCustom[] {\r\n    const l = this.log.fn('addSelectedIfMissing', { options, currentValue });\r\n\r\n    if (currentValue == null || currentValue === '')\r\n      return l.r(options, 'currentValue is null');\r\n    \r\n    // Perform string-compare because we don't know if the currentValue is a number or a string\r\n    const currentString = currentValue.toString();\r\n    const currentValueFound = options.some(o => o.Value?.toString() === currentString);\r\n    if (currentValueFound)\r\n      return l.r(options, 'found');\r\n\r\n    // 2024-12-17 2dm - this condition doesn't seem to make sense, so turn it off until we\r\n    // understand when we would need it\r\n    // if (!currentValueFound && !currentValue && currentValue !== '') {\r\n      return l.r([\r\n        ...options,\r\n        {\r\n          Title: currentString,\r\n          Value: currentValue,\r\n        } \r\n      ]);\r\n    // }\r\n    // return l.r(options);\r\n  }\r\n}\r\n","import Papa from 'papaparse';\r\nimport { PickerOptionCustomExtended } from '../../../../../../../edit-types/src/DropdownOption';\r\nimport { classLog } from '../../../../shared/logging';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  parse: true,\r\n};\r\n\r\nexport class DataSourceParserCsv {\r\n  \r\n  log = classLog({DataSourceParserCsv}, logSpecs);\r\n\r\n  constructor() { }\r\n\r\n  parse(csv: string): PickerOptionCustomExtended[] {\r\n\r\n    const l = this.log.fnIf('parse', { csv });\r\n\r\n    const x = Papa.parse<PickerOptionCustomExtended>(csv, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      transformHeader: (header: string) => header.trim(),\r\n      transform: (value: string, header: string) => header == 'Value' ? value : value.trim(),\r\n      dynamicTyping: true,  // auto-detect booleans, numbers, etc\r\n    });\r\n\r\n    // If no data, return empty array\r\n    const data = x?.data;\r\n    if (!data || !Array.isArray(data) || data.length == 0) return [];\r\n\r\n    // Filter out all without a value property (but empty strings are ok)\r\n    const filtered = data.filter(d => d.Value !== undefined);\r\n\r\n    if (filtered.length != data.length)\r\n      console.warn('CSV contains rows without a value', { data, filtered });\r\n\r\n    // Use header to create empty object with all fields\r\n    const header = x?.meta.fields ?? [];\r\n    const preEmpty = header.reduce((acc, h) => ({\r\n      ...acc,\r\n      [h]: null }) as { [key: string]: any },\r\n      {}\r\n    ) as { [key: string]: any };\r\n    const { Value, ...empty } = preEmpty;\r\n    \r\n    l.a('Parsed CSV', { header, empty, data, filtered });\r\n\r\n    // Make sure all the rows have all the fields\r\n    const complete = filtered.map(f => ({\r\n      ...empty,\r\n      ...f,\r\n      Value: f.Value ?? '' // this is necessary, because the 'dynamicTyping' option will make it a null if it's empty\r\n    }));\r\n\r\n    return l.r(complete);\r\n  }\r\n}","import { Of } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsEntity, FieldSettingsPicker, FieldSettingsPickerMerged } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { RelationshipParentChild, UiPickerModeTree } from '../../../../../../edit-types/src/PickerModeTree';\r\nimport { FieldSettingsWithPickerSource, PickerSourceCustomCsv, PickerSourceCustomList, PickerSourceEntity, PickerSourceQuery, UiPickerSourcesAll } from '../../../../../../edit-types/src/PickerSources';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavEntity } from '../../shared/models/eav';\r\nimport { DataSourceDropDownOptions } from '../basic/string-picker/string-picker.helpers';\r\nimport { FieldSettingsTools } from '../logic/field-settings-tools';\r\nimport { FieldSettingsUpdateTask } from '../logic/field-settings-update-task';\r\nimport { PickerConfigs, PickerSourcesCustom, UiPickerModeIsTree } from './constants/picker-config-model.constants';\r\nimport { DataSourceParserCsv } from './data-sources/data-source-parser-csv';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  getDataSourceAndSetupFieldSettings: true,\r\n  data: true,\r\n};\r\n\r\nexport class PickerLogicShared {\r\n\r\n  log = classLog({ PickerLogicShared }, logSpecs);\r\n\r\n  constructor() { }\r\n\r\n  static setDefaultSettings(settings: FieldSettings): FieldSettings {\r\n    const s = settings as FieldSettings & FieldSettingsPickerMerged;\r\n    s.AllowMultiValue ??= false;\r\n    s.EnableEdit ??= true;\r\n    s.EnableCreate ??= true;\r\n    s.EnableAddExisting ??= true;\r\n    // if multi-value is ever allowed, then we must also enable remove...\r\n    s.EnableRemove ??= true;\r\n    s.EnableDelete ??= false;\r\n    s.Label ??= '';\r\n    s.EnableTextEntry ??= false;\r\n\r\n    s.noAutoFocus = true;\r\n\r\n    return s;\r\n  }\r\n\r\n  static maybeOverrideEditRestrictions(fsUntyped: FieldSettings, tools: FieldSettingsTools): { fs: FieldSettings, removeEditRestrictions: boolean } {\r\n    const fs = fsUntyped as FieldSettings & FieldSettingsPickerMerged;\r\n    if (!(tools.eavConfig.removeEditRestrictions && tools.debug))\r\n      return { fs, removeEditRestrictions: false };\r\n\r\n    console.log(`SystemAdmin + Debug: Overriding edit restrictions for field \\'${fs.Name}\\' (EntityType: \\'${fs.EntityType}\\').`);\r\n    fs.EnableEdit = true;\r\n    fs.EnableCreate = true;\r\n    fs.EnableAddExisting = true;\r\n    fs.EnableRemove = true;\r\n    fs.EnableDelete = true;\r\n    return { fs, removeEditRestrictions: true };\r\n  }\r\n\r\n  preUpdate({ settings, tools, value }: FieldSettingsUpdateTask) {\r\n\r\n    const fsDefaults = PickerLogicShared.setDefaultSettings({ ...settings });\r\n\r\n    const { fs: fsRaw, removeEditRestrictions } = PickerLogicShared.maybeOverrideEditRestrictions(fsDefaults, tools);\r\n\r\n    const { fs, typeConfig } = new PickerLogicShared().#getDataSourceAndSetupFieldSettings(value, fsRaw, tools);\r\n\r\n    return { fs, removeEditRestrictions, typeConfig };\r\n  }\r\n\r\n\r\n  #getDataSourceAndSetupFieldSettings(value: FieldValue, fsBasic: FieldSettings, tools: FieldSettingsTools) {\r\n    // Define field settings to be a merged FieldSettings and PickerSources\r\n    const fs = fsBasic as FieldSettingsWithPickerSource & FieldSettingsPickerMerged;\r\n\r\n    const dataSources: EavEntity[] = (fs.DataSources?.length > 0)\r\n      ? tools.contentTypeItemSvc.getMany(fs.DataSources)\r\n      : [];\r\n\r\n    // Transfer configuration\r\n    const dataSource = dataSources[0];\r\n    const typeName = dataSource?.Type.Name as Of<typeof PickerConfigs>;\r\n    fs.dataSourceType = typeName ?? '' as Of<typeof PickerConfigs>;\r\n\r\n    // DataSource may not be configured yet, in which case the object is just {}\r\n    const typeConfig = tools.reader.flatten<UiPickerSourcesAll>(dataSource);\r\n\r\n    const isKnownType = Object.values(PickerConfigs).includes(typeName);\r\n\r\n    const l = this.log.fn('dataSources', { dataSources });\r\n\r\n    l.values({ typeName, isKnownType, dataSources, typeConfig });\r\n\r\n    if (!isKnownType) {\r\n      console.error(`Unknown picker source type: '${typeName}' on field ${fs.Name}`);\r\n      return { fs, typeConfig };\r\n    }\r\n\r\n    // Properties to transfer from just about all sources\r\n    fs.CreateTypes = typeConfig.CreateTypes ?? '';// possible multiple types\r\n    fs.MoreFields = typeConfig.MoreFields ?? '';\r\n    fs.Label = typeConfig.Label ?? '';\r\n    fs.ItemInformation = typeConfig.ItemInformation ?? '';\r\n    fs.ItemTooltip = typeConfig.ItemTooltip ?? '';\r\n    fs.ItemLink = typeConfig.ItemLink ?? '';\r\n    fs.PreviewType = typeConfig.PreviewType ?? '';\r\n\r\n    // May specify another value to be used as the value - eg. for strings/numbers\r\n    fs.Value = typeConfig.Value ?? '';\r\n\r\n    // Do this for all, as it's a common property - e.g. Css, AppAssets, etc.\r\n    fs.PreviewValue = typeConfig.PreviewValue ?? '';\r\n\r\n    const sourceIsQuery = typeName === PickerConfigs.UiPickerSourceQuery;\r\n    const sourceIsEntity = typeName === PickerConfigs.UiPickerSourceEntity;\r\n    const sourceIsCss = typeName === PickerConfigs.UiPickerSourceCss;\r\n    const sourceIsAppAssets = typeName === PickerConfigs.UiPickerSourceAppAssets;\r\n\r\n    l.values({ sourceIsQuery, sourceIsEntity, sourceIsCss, sourceIsAppAssets });\r\n\r\n    const isCustomSource = Object.values(PickerSourcesCustom).includes(typeName as Of<typeof PickerSourcesCustom>);\r\n\r\n    /** Query Data Source */\r\n    if (sourceIsQuery) {\r\n      const specsQuery = typeConfig as PickerSourceQuery;\r\n      fs.Query = specsQuery.Query ?? '';\r\n      fs.StreamName = specsQuery.StreamName ?? 'Default';// stream name could be multiple stream names\r\n      fs.UrlParameters = specsQuery.QueryParameters ?? '';\r\n    }\r\n\r\n    /** Entity Data Source */\r\n    if (sourceIsEntity) {\r\n      const specsEntity = typeConfig as PickerSourceEntity;\r\n      (fs as FieldSettingsEntity).EntityType = specsEntity.ContentTypeNames ?? '';// possible multiple types\r\n    }\r\n\r\n    /** Css File Data Source */\r\n    if (sourceIsCss) {\r\n      fs.CssSourceFile = typeConfig.CssSourceFile ?? '';\r\n      fs.CssSelectorFilter = typeConfig.CssSelectorFilter ?? '';\r\n    }\r\n\r\n    /** App Assets Source */\r\n    if (sourceIsAppAssets) {\r\n      fs.AssetsRootFolder = typeConfig.AssetsRootFolder ?? '/';\r\n      fs.AssetsFileFilter = typeConfig.AssetsFileFilter ?? '*.*';\r\n      fs.AssetsType = typeConfig.AssetsType ?? 'files';\r\n      fs.requiredFeatures = [FeatureNames.PickerSourceAppAssets];\r\n    }\r\n\r\n    if (isCustomSource) {\r\n      if (typeName === PickerConfigs.UiPickerSourceCustomList) {\r\n        const valuesRaw = (typeConfig as UiPickerSourcesAll & PickerSourceCustomList).Values ?? '';\r\n        // note that 'value-label' is the only format supported by the new picker config\r\n        fs._options ??= new DataSourceDropDownOptions().parseOptions(value as string, 'string', 'value-label', valuesRaw) ?? [];\r\n      } else if (typeName === PickerConfigs.UiPickerSourceCustomCsv) {\r\n        const csv = (typeConfig as UiPickerSourcesAll & PickerSourceCustomCsv).Csv;\r\n        fs._options ??= new DataSourceParserCsv().parse(csv);\r\n        fs.requiredFeatures = [FeatureNames.PickerSourceCsv];\r\n      }\r\n    }\r\n\r\n    // If AllowMultiValue is false then EnableReselect must be false\r\n    fs.AllowMultiValue ? fs.EnableReselect ??= false : fs.EnableReselect = false;\r\n    // If AllowMultiValue is false then AllowMultiMin and AllowMultiMax must be 0 so we don't trigger the validation\r\n    if (fs.AllowMultiValue) {\r\n      fs.AllowMultiMin ??= 0;\r\n      fs.AllowMultiMax ??= 0;\r\n    } else {\r\n      fs.AllowMultiMin = 0;\r\n      fs.AllowMultiMax = 0;\r\n    }\r\n\r\n    // Display Mode and configuration of that\r\n    fs.PickerDisplayMode ??= 'list';\r\n    fs.PickerDisplayConfiguration ??= [];\r\n\r\n    // Tree configuration WIP\r\n    fs.PickerTreeConfiguration = this.#getTreeConfigOnce(fs, tools);\r\n\r\n    return { fs, typeConfig };\r\n  }\r\n\r\n  /** Get the tree config, unless it was already created, in which case we reuse it. */\r\n  #getTreeConfigOnce(fs: FieldSettings & FieldSettingsPicker, tools: FieldSettingsTools): UiPickerModeTree {\r\n    if (fs.PickerTreeConfiguration)\r\n      return fs.PickerTreeConfiguration;\r\n\r\n    if (fs.PickerDisplayMode !== 'tree')\r\n      return null;\r\n\r\n    // Tree configuration WIP\r\n    const pickerDisplayConfigurations: EavEntity[] = (fs.PickerDisplayConfiguration?.length > 0)\r\n      ? tools.contentTypeItemSvc.getMany(fs.PickerDisplayConfiguration)\r\n      : [];\r\n\r\n    const pickerDisplayConfigName = pickerDisplayConfigurations[0]?.Type.Name;\r\n\r\n    if (pickerDisplayConfigName !== UiPickerModeIsTree)\r\n      return null;\r\n\r\n    const specs = tools.reader.flatten<UiPickerModeTree>(pickerDisplayConfigurations[0]);\r\n    const final: UiPickerModeTree = {\r\n      Title: specs.Title ?? '',\r\n      ConfigModel: UiPickerModeIsTree,\r\n      TreeRelationship: specs.TreeRelationship ?? RelationshipParentChild,\r\n      TreeBranchesStream: specs.TreeBranchesStream ?? 'Default',\r\n      TreeLeavesStream: specs.TreeLeavesStream ?? 'Default',\r\n      TreeParentIdField: specs.TreeParentIdField ?? 'Id',\r\n      TreeChildIdField: specs.TreeChildIdField ?? 'Id',\r\n      TreeParentChildRefField: specs.TreeParentChildRefField ?? 'Children',\r\n      TreeChildParentRefField: specs.TreeChildParentRefField ?? 'Parent',\r\n      TreeShowRoot: specs.TreeShowRoot ?? true,\r\n      TreeDepthMax: specs.TreeDepthMax ?? 10,\r\n      TreeAllowSelectRoot: specs.TreeAllowSelectRoot ?? true,\r\n      TreeAllowSelectBranch: specs.TreeAllowSelectBranch ?? true,\r\n      TreeAllowSelectLeaf: specs.TreeAllowSelectLeaf ?? true,\r\n    } satisfies UiPickerModeTree;\r\n    return final;\r\n  }\r\n\r\n}\r\n","import { PickerSourceEntity } from 'projects/edit-types/src/PickerSources';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsEntity, FieldSettingsSharedCreate } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { PickerLogicShared } from '../../picker/picker-settings-helper-shared';\r\n\r\nexport class EntityDefaultSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.EntityDefault;\r\n  \r\n  constructor() { super({ EntityDefaultSettingsHelper }); }\r\n\r\n  update({ settings, tools }: FieldSettingsUpdateTask): FieldSettings {\r\n    \r\n    const fsRaw = PickerLogicShared.setDefaultSettings({ ...settings }) as FieldSettings & FieldSettingsSharedCreate & FieldSettingsEntity;\r\n    \r\n    // Both the query type and create-type are the same\r\n    fsRaw.EntityType ??= '';\r\n    fsRaw.CreateTypes = fsRaw.EntityType ?? '';\r\n\r\n    // The old entity-type has a prefill, which is now the create-prefill\r\n    (fsRaw as unknown as PickerSourceEntity).CreatePrefill ??= fsRaw.Prefill;\r\n    delete fsRaw.Prefill;\r\n\r\n    const fs = PickerLogicShared.maybeOverrideEditRestrictions(fsRaw, tools).fs;\r\n    \r\n    return fs;\r\n  }\r\n\r\n}\r\n\r\nFieldSettingsHelperBase.add(EntityDefaultSettingsHelper);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { EntityDefaultSettingsHelper } from './entity-default-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EntityDefault,\r\n    templateUrl: '../../picker/picker.html',\r\n    imports: PickerImports\r\n})\r\nexport class EntityDefaultComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({EntityDefaultComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    EntityDefaultSettingsHelper.importMe();\r\n  }\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsHelpersManager } from '../../logic/field-settings-helpers-manager';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class EntityContentBlocksSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.EntityContentBlocks;\r\n\r\n  constructor() { super({ EntityContentBlocksSettingsHelper }); }\r\n\r\n  update(specs: FieldSettingsUpdateTask<string[]>): FieldSettings {\r\n    const entityDefaultLogic = FieldSettingsHelpersManager.singleton().get(InputTypeCatalog.EntityDefault);\r\n    const fs = entityDefaultLogic.update(specs)  as FieldSettings & FieldSettingsPickerMerged;\r\n    fs.EnableRemove = true;\r\n    fs.AllowMultiValue = true;\r\n    fs.EnableAddExisting = false;\r\n    fs.EnableCreate = false;\r\n    fs.EnableEdit = false;\r\n    fs.Visible = false;\r\n\r\n    // Both the query type and create-type are the same\r\n    fs.EntityType = 'ContentGroupReference';\r\n    fs.CreateTypes = fs.EntityType;\r\n\r\n    return fs;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(EntityContentBlocksSettingsHelper);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { EntityDefaultComponent } from '../entity-default/entity-default';\r\nimport { EntityContentBlocksSettingsHelper } from './entity-content-blocks-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EntityContentBlocks,\r\n    templateUrl: '../../picker/picker.html',\r\n    imports: PickerImports\r\n})\r\nexport class EntityContentBlockComponent extends EntityDefaultComponent implements OnInit, OnDestroy {\r\n\r\n  constructor() {\r\n    super();\r\n    EntityContentBlocksSettingsHelper.importMe();\r\n  }\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { PickerLogicShared } from '../../picker/picker-settings-helper-shared';\r\n\r\nexport class EntityPickerSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.EntityPicker;\r\n\r\n  constructor() { super({ EntityPickerSettingsHelper }); }\r\n\r\n  update(specs: FieldSettingsUpdateTask): FieldSettings {\r\n    return new PickerLogicShared().preUpdate(specs).fs;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(EntityPickerSettingsHelper);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { EntityPickerSettingsHelper } from './entity-picker-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EntityPicker,\r\n    templateUrl: '../../picker/picker.html',\r\n    imports: PickerImports\r\n})\r\nexport class EntityPickerComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({EntityPickerComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    EntityPickerSettingsHelper.importMe();\r\n  }\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsEntityQuery } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsHelpersManager } from '../../logic/field-settings-helpers-manager';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { EntityDefaultSettingsHelper } from '../entity-default/entity-default-settings-helper';\r\n\r\nexport class EntityQuerySettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.EntityQuery;\r\n\r\n  constructor() { super({ EntityQuerySettingsHelper }); }\r\n\r\n  update(updateSpecs: FieldSettingsUpdateTask<string[]>): FieldSettings {\r\n    const entityDefaultLogic = FieldSettingsHelpersManager.singleton().get(InputTypeCatalog.EntityDefault) as EntityDefaultSettingsHelper;\r\n    const s = entityDefaultLogic.update(updateSpecs) as FieldSettings & FieldSettingsEntityQuery;\r\n    s.Query ??= '';\r\n    s.StreamName ||= 'Default';\r\n    s.UrlParameters ??= '';\r\n    return s;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(EntityQuerySettingsHelper);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { EntityQuerySettingsHelper } from './entity-query-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EntityQuery,\r\n    templateUrl: '../../picker/picker.html',\r\n    imports: PickerImports\r\n})\r\nexport class EntityQueryComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({EntityQueryComponent}, PickerComponent.logSpecs);\r\n  \r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    EntityQuerySettingsHelper.importMe();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AdamConfig } from '../../../../../../edit-types/src/AdamConfig';\r\nimport { AdamItem } from '../../../../../../edit-types/src/AdamItem';\r\nimport { HttpServiceBaseSignal } from '../../../shared/services/http-service-base-signal';\r\nimport { LinkInfo } from '../../dialog/main/edit-dialog-main.models';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { SanitizeHelper } from '../helpers';\r\n\r\n/**\r\n * Form wide ADAM helper to get files, add folders etc.\r\n * Must be created once per edit-form, as it needs the exact app etc.\r\n */\r\n@Injectable()\r\nexport class AdamService extends HttpServiceBaseSignal {\r\n\r\n  constructor(private formConfig: FormConfigService) {\r\n    super();\r\n  }\r\n\r\n  getAllPromise(url: string, config: AdamConfig): Promise<AdamItem[]> {\r\n    return this.fetchPromise<AdamItem[]>(url + '/items', {\r\n      params: {\r\n        subfolder: config.subfolder,\r\n        usePortalRoot: config.usePortalRoot.toString(),\r\n        appId: this.formConfig.config.appId,\r\n      },\r\n    });\r\n  }\r\n\r\n  addFolder(newFolderName: string, url: string, config: AdamConfig) {\r\n    return this.http.post<AdamItem[]>(\r\n      url + '/folder',\r\n      {},\r\n      {\r\n        params: {\r\n          subfolder: config.subfolder,\r\n          newFolder: SanitizeHelper.sanitizeName(newFolderName),\r\n          usePortalRoot: config.usePortalRoot.toString(),\r\n          appId: this.formConfig.config.appId,\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  renamePromise(item: AdamItem, newName: string, url: string, config: AdamConfig): Promise<boolean> {\r\n    return this.fetchPromise<boolean>(url + '/rename', {\r\n      params: {\r\n        subfolder: config.subfolder,\r\n        isFolder: item.IsFolder.toString(),\r\n        id: item.Id.toString(),\r\n        usePortalRoot: config.usePortalRoot.toString(),\r\n        newName: SanitizeHelper.sanitizeName(newName),\r\n        appId: this.formConfig.config.appId,\r\n      },\r\n    });\r\n  }\r\n\r\n  deleteItemPromise(item: AdamItem, url: string, config: AdamConfig): Promise<boolean> {\r\n    return this.fetchPromise<boolean>(url + '/delete', {\r\n      params: {\r\n        subfolder: config.subfolder,\r\n        isFolder: item.IsFolder.toString(),\r\n        id: item.Id.toString(),\r\n        usePortalRoot: config.usePortalRoot.toString(),\r\n        appId: this.formConfig.config.appId,\r\n      },\r\n    });\r\n  }\r\n\r\n  getLinkInfoPromise(\r\n    link: string,\r\n    contentType: string,\r\n    guid: string,\r\n    field: string\r\n  ): Promise<LinkInfo> {\r\n    return this.fetchPromise<LinkInfo>('cms/edit/linkInfo', {\r\n      params: {\r\n        link,\r\n        ...(guid && { guid }),\r\n        ...(contentType && { contentType }),\r\n        ...(field && { field }),\r\n        appid: this.formConfig.config.appId,\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","import { Signal } from '@angular/core';\r\nimport { toObservable } from '@angular/core/rxjs-interop';\r\nimport { Observable } from 'rxjs';\r\nimport { Connector } from '../../../../../../edit-types/src/Connector';\r\nimport { ConnectorData } from '../../../../../../edit-types/src/ConnectorData';\r\nimport { ConnectorDialog } from '../../../../../../edit-types/src/ConnectorDialog';\r\nimport { ExperimentalProps } from '../../../../../../edit-types/src/ExperimentalProps';\r\nimport { FieldConfig } from '../../../../../../edit-types/src/FieldConfig';\r\nimport { loadScripts } from '../../../shared/helpers/load-scripts.helper';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FormConfiguration } from '../../form/form-configuration.model';\r\nimport { ScriptsLoaderService } from '../../shared/services/scripts-loader.service';\r\n\r\nexport class ConnectorInstance<T = any> implements Connector<T> {\r\n  \r\n  log = classLog({ConnectorInstance});\r\n  \r\n  data: ConnectorData<T>;\r\n  dialog: ConnectorDialog;\r\n  loadScript: (...args: any[]) => void;\r\n\r\n  get field() { return this.fieldConfigSignal(); }\r\n\r\n  get field$() {\r\n    return this.#field$\r\n      ??= toObservable(this.fieldConfigSignal, { injector: this._experimental.injector })\r\n  }\r\n  #field$: Observable<FieldConfig>;\r\n\r\n  constructor(\r\n    _connectorHost: ConnectorHost<T>,\r\n    value$: Observable<T>,\r\n    private fieldConfigSignal: Signal<FieldConfig>,\r\n    public _experimental: ExperimentalProps,\r\n    formConfig: FormConfiguration,\r\n  ) {\r\n    this.data = new ConnectorDataInstance<T>(_connectorHost, value$);\r\n    this.dialog = new ConnectorDialogInstance<T>(_connectorHost);\r\n\r\n    this.loadScript = (\r\n      testOrScripts: string | (() => boolean) | { test: string | (() => boolean); src: string }[],\r\n      srcOrCallback: string | (() => void),\r\n      callback?: () => void,\r\n    ) => {\r\n      // one script (3 parameters: global or test, script url and a callback)\r\n      const isMainSignature = (typeof testOrScripts === 'string' || typeof testOrScripts === 'function')\r\n        && typeof srcOrCallback === 'string'\r\n        && typeof callback === 'function';\r\n      if (isMainSignature) {\r\n        srcOrCallback = ScriptsLoaderService.resolveUrlTokens(srcOrCallback as string, formConfig);\r\n        loadScripts([{ test: testOrScripts, src: srcOrCallback }], callback);\r\n        return;\r\n      }\r\n      // multiple scripts (2 parameters: scripts array and a callback)\r\n      if (Array.isArray(testOrScripts) && typeof srcOrCallback === 'function') {\r\n        for (const script of testOrScripts)\r\n          script.src = ScriptsLoaderService.resolveUrlTokens(script.src, formConfig);\r\n        loadScripts(testOrScripts, srcOrCallback);\r\n        return;\r\n      }\r\n      throw new Error('Unrecognized parameters. Please double check your input');\r\n    };\r\n  }\r\n}\r\n\r\nclass ConnectorDataInstance<T> implements ConnectorData<T> {\r\n  value: T;\r\n  clientValueChangeListeners: ((newValue: T) => void)[] = [];\r\n\r\n  constructor(private _connectorHost: ConnectorHost<T>, public value$: Observable<T>) {\r\n    // Host will complete this observable. Therefore unsubscribe is not required\r\n    this.value$.subscribe(newValue => {\r\n      this.value = newValue;\r\n      this.clientValueChangeListeners.forEach(callback => callback(newValue));\r\n    });\r\n  }\r\n\r\n  update(newValue: T) {\r\n    this._connectorHost.update(newValue);\r\n  }\r\n\r\n  onValueChange(callback: (newValue: T) => void) {\r\n    this.clientValueChangeListeners.push(callback);\r\n  }\r\n}\r\n\r\nclass ConnectorDialogInstance<T> implements ConnectorDialog {\r\n  constructor(private _connectorHost: ConnectorHost<T>) { }\r\n\r\n  open(componentTag?: string) {\r\n    return this._connectorHost.expand(true, componentTag);\r\n  }\r\n\r\n  close() {\r\n    this._connectorHost.expand(false);\r\n  }\r\n}\r\n\r\n/** Props and methods available to the connector to communicate with the host */\r\nexport interface ConnectorHost<T = any> {\r\n  update: (value: T) => void;\r\n  expand: (expand: boolean, componentTag?: string) => void;\r\n}\r\n","import { ChangeDetectorRef, ElementRef, Injectable, Injector, NgZone, OnDestroy, ViewContainerRef, computed, effect, inject } from '@angular/core';\r\nimport { AbstractControl } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { distinctUntilChanged, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../../core';\r\nimport { EavCustomInputField } from '../../../../../../edit-types/src/EavCustomInputField';\r\nimport { FieldConfig } from '../../../../../../edit-types/src/FieldConfig';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { openFeatureDialog } from '../../../features/shared/feature-component-base';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { ServiceBase } from '../../../shared/services/service-base';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { AdamService } from '../../shared/adam/adam.service';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { UiControl } from '../../shared/controls/ui-control';\r\nimport { FieldMask } from '../../shared/helpers';\r\nimport { InputTypeService } from '../../shared/input-types/input-type.service';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\nimport { FieldState } from '../field-state';\r\nimport { PagePicker } from '../page-picker/page-picker.helper';\r\nimport { ExperimentalProps } from './../../../../../../edit-types/src/ExperimentalProps';\r\nimport { FieldValue } from './../../../../../../edit-types/src/FieldValue';\r\nimport { ConnectorHost, ConnectorInstance } from './connector-instance.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  init: true,\r\n  getUrlOfId: false,\r\n  updateControl: false,\r\n  openFeatureDisabledWarning: false,\r\n};\r\n\r\n@Injectable()\r\nexport class ConnectorHelper extends ServiceBase implements OnDestroy {\r\n\r\n  log = classLog({ ConnectorHelper }, logSpecs);\r\n\r\n  #injector = inject(Injector);\r\n  #fieldState = inject(FieldState);\r\n  #formConfig = inject(FormConfigService);\r\n  #translateService = inject(TranslateService);\r\n  #contentTypeService = inject(ContentTypeService);\r\n  #inputTypeService = inject(InputTypeService);\r\n  #featuresService = inject(FeaturesService);\r\n  #editRoutingService = inject(EditRoutingService);\r\n  #dialog = inject(MatDialog);\r\n  #snackBar = inject(MatSnackBar);\r\n  #zone = inject(NgZone);\r\n  #adamService = transient(AdamService);\r\n\r\n  constructor() {\r\n    super();\r\n    this.log.aIf('constructor')\r\n  }\r\n\r\n  #customEl: EavCustomInputField;\r\n  #value$ = this.#fieldState.ui().control.valueChanges.pipe(startWith(this.#fieldState.uiValue()), distinctUntilChanged(isEqual));\r\n\r\n  #config = this.#fieldState.config;\r\n  #group = this.#fieldState.group;\r\n\r\n  #viewContainerRef: ViewContainerRef;\r\n  #changeDetectorRef: ChangeDetectorRef;\r\n\r\n  public init(\r\n    customElName: string,\r\n    customElContainerRef: ElementRef,\r\n    viewContainerRef: ViewContainerRef,\r\n    changeDetectorRef: ChangeDetectorRef,\r\n  ): this {\r\n    this.log.a('init');\r\n    this.#viewContainerRef = viewContainerRef;\r\n    this.#changeDetectorRef = changeDetectorRef;\r\n    this.#customEl = document.createElement(customElName) as EavCustomInputField;\r\n    this.#customEl.connector = this.#buildConnector();\r\n    customElContainerRef.nativeElement.appendChild(this.#customEl);\r\n    return this;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.log.a('ngOnDestroy');\r\n    this.#customEl?.parentNode.removeChild(this.#customEl);\r\n    this.#customEl = null;\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  #buildConnector() {\r\n    const connectorHost = this.#getCallbacks();\r\n    const experimental = this.#buildExperimentalProps();\r\n    const fieldConfigSignal = computed(() => {\r\n      const settings = this.#fieldState.settings();\r\n      return toFieldConfig(this.#config, settings);\r\n    }, { equal: isEqual });\r\n    const connector = new ConnectorInstance(connectorHost, this.#value$, fieldConfigSignal, experimental, this.#formConfig.config);\r\n\r\n    effect(() => {\r\n      const s = this.#fieldState.settings();\r\n      const field = connector.field as FieldConfig;\r\n      field.settings = s;\r\n      field.label = s.Name;\r\n      field.placeholder = s.Placeholder;\r\n      field.required = s.valueRequired;\r\n    }, { injector: this.#injector });\r\n    return connector;\r\n  }\r\n\r\n  #getCallbacks() {\r\n    const connectorHost: ConnectorHost = {\r\n      update: (value) => {\r\n        this.#zone.run(() => this.#updateControl(value));\r\n      },\r\n      expand: (expand, componentTag) => {\r\n        this.#zone.run(() => this.#editRoutingService.expand(expand, this.#config.index, this.#config.entityGuid, componentTag));\r\n      },\r\n    };\r\n    return connectorHost;\r\n  }\r\n\r\n  #buildExperimentalProps() {\r\n    const contentType = this.#contentTypeService.get(this.#config.contentTypeNameId);\r\n    const allInputTypeNames = this.#inputTypeService.getAttributeInputTypes(contentType.Attributes);\r\n\r\n    const lEx = classLog(\"ConnectorHelperExperimental\");\r\n\r\n    const experimentalProps: ExperimentalProps = {\r\n      entityGuid: this.#config.entityGuid,\r\n      allInputTypeNames,\r\n      formGroup: this.#group,\r\n      translateService: this.#translateService,\r\n      isExpanded$: this.#editRoutingService.isExpanded$(this.#config.index, this.#config.entityGuid),\r\n      dropzone: this.#config.dropzone,\r\n      adam: this.#config.adam,\r\n      updateField: (name, value) => {\r\n        lEx.fn('updateField', { name, value });\r\n        this.#zone.run(() => { this.#updateControl(value, this.#group.controls[name]); });\r\n      },\r\n      isFeatureEnabled: this.#featuresService.isEnabled,\r\n      setFocused: (focused) => {\r\n        lEx.fn('setFocused', { focused });\r\n        this.#zone.run(() => { this.#config.focused$.next(focused); });\r\n      },\r\n      openPagePicker: (callback) => {\r\n        lEx.fn('openPagePicker');\r\n        this.#zone.run(() => {\r\n          PagePicker.open(this.#config, this.#group, this.#dialog, this.#viewContainerRef, this.#changeDetectorRef, callback);\r\n        });\r\n      },\r\n      featureDisabledWarning: (featureNameId) => {\r\n        lEx.fn('featureDisabledWarning', { featureNameId });\r\n        this.#zone.run(() => {\r\n          this.#openFeatureDisabledWarning(featureNameId);\r\n        });\r\n      },\r\n      getUrlOfId: (value, callback) => {\r\n        lEx.fn('getUrlOfId', { value });\r\n        this.#zone.run(() => { this.#getUrlOfId(value, callback); });\r\n      },\r\n      getSettings: (name) => this.#formConfig.config.settings?.Values[name],\r\n\r\n      getFieldMask: (mask: string, name?: string) => {\r\n        return transient(FieldMask, this.#injector).init(name, mask);\r\n      },\r\n\r\n      injector: this.#injector,\r\n\r\n      // expose a showSnackBar helper so editor can display messages directly\r\n      showSnackBar: (message: string) => {\r\n        try {\r\n          this.#zone.run(() => {\r\n            // Use translation if available\r\n            const translated = this.#translateService?.instant ? this.#translateService.instant(message) : message;\r\n            // If message is a translation key and translation exists, instant will return a translated string,\r\n            // otherwise it returns the key - we prefer raw message as-is in that case.\r\n            this.#snackBar.open(translated ?? message, undefined, { duration: 3000 });\r\n          });\r\n        } catch (err) {\r\n          // keep silent on errors here, fallback will be handled by caller\r\n          console.warn('[ConnectorHelper] showSnackBar failed', err);\r\n        }\r\n      },\r\n    };\r\n\r\n    return experimentalProps;\r\n  }\r\n\r\n  #getUrlOfId(value: string, callback: (value: string) => void) {\r\n    if (!value) return;\r\n\r\n    // handle short-ID links like file:17\r\n    const contentType = this.#config.contentTypeNameId;\r\n    const entityGuid = this.#config.entityGuid;\r\n    const field = this.#config.fieldName;\r\n    this.#adamService.getLinkInfoPromise(value, contentType, entityGuid, field).then(linkInfo => {\r\n      if (!linkInfo) return;\r\n      callback(linkInfo.Value);\r\n    });\r\n  }\r\n\r\n  #updateControl(value: FieldValue, control: AbstractControl = null) {\r\n    const ui = control ? new UiControl(control) : this.#fieldState.ui();\r\n    if (ui.disabled) return;\r\n    this.#fieldState.ui().setIfChanged(value);\r\n  }\r\n\r\n  #openFeatureDisabledWarning(featureNameId: string) {\r\n    if (featureNameId === FeatureNames.PasteImageFromClipboard) {\r\n      this.#snackBar.open(this.#translateService.instant('Message.PastingFilesIsNotEnabled'), this.#translateService.instant('Message.FindOutMore'), { duration: 3000 })\r\n        .onAction()\r\n        .subscribe(() => openFeatureDialog(this.#dialog, FeatureNames.PasteImageFromClipboard, this.#viewContainerRef, this.#changeDetectorRef));\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * This function must stay here and not be in the edit-types folder,\r\n * otherwise too many dependencies are added because the FieldConfigSet is used.\r\n * @param config \r\n * @param settings \r\n * @returns \r\n */\r\nfunction toFieldConfig(config: FieldConfigSet, settings: FieldSettings): FieldConfig {\r\n  return {\r\n    name: config.fieldName,\r\n    index: config.index,\r\n    label: settings.Name,\r\n    placeholder: settings.Placeholder,\r\n    inputType: config.inputTypeSpecs.inputType,\r\n    type: config.type,\r\n    required: settings.valueRequired,\r\n    disabled: config.initialDisabled,\r\n    settings,\r\n  } satisfies FieldConfig;\r\n}","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, inject, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { transient } from '../../../../../../core/transient';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldState } from '../field-state';\r\nimport { ConnectorHelper } from './connector.helper';\r\n\r\n@Component({\r\n  selector: 'app-connector',\r\n  templateUrl: './connector.html',\r\n})\r\nexport class ConnectorComponent implements AfterViewInit {\r\n\r\n  log = classLog({ConnectorComponent});\r\n\r\n  /** Child tag which will contain the inner html */\r\n  @ViewChild('customElContainer') private customElContainerRef: ElementRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  private connectorCreator = transient(ConnectorHelper);\r\n  private viewContainerRef = inject(ViewContainerRef);\r\n  private changeDetectorRef = inject(ChangeDetectorRef);\r\n\r\n  constructor() { }\r\n\r\n  ngAfterViewInit() {\r\n    const l = this.log.fn('ngAfterViewInit');\r\n    const componentTag = history?.state?.componentTag || this.fieldState.config.inputTypeSpecs.componentTagDialogName;\r\n    l.a('Connector created for:', { componentTag });\r\n    this.connectorCreator.init(\r\n      componentTag,\r\n      this.customElContainerRef,\r\n      this.viewContainerRef,\r\n      this.changeDetectorRef,\r\n    );\r\n  }\r\n\r\n}\r\n","<div #customElContainer style=\"height:100%; position:relative;\"></div>\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class CustomGpsSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.CustomGps;\r\n\r\n  constructor() { super({ CustomGpsSettingsHelper }); }\r\n\r\n  update({ settings }: FieldSettingsUpdateTask): FieldSettings {\r\n    const fixedSettings: FieldSettings = { ...settings };\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(CustomGpsSettingsHelper);\r\n","import { StringWysiwyg } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../../edit-types/src/FieldValue';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsHelperWithValueInit } from '../../logic/field-settings-helper-with-value-init';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\n\r\nexport class StringWysiwygSettingsHelper extends FieldSettingsHelperBase implements FieldSettingsHelperWithValueInit {\r\n  name = InputTypeCatalog.StringWysiwyg;\r\n\r\n  constructor() { super({ StringWysiwygSettingsHelper }); }\r\n\r\n  canAutoTranslate = true;\r\n\r\n  update({ settings, tools }: FieldSettingsUpdateTask): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & StringWysiwyg;\r\n    // If the `Dialog` setting is blank, it means start inline (default) and allow switching to dialog.\r\n    fixedSettings._allowDialog ??= fixedSettings.Dialog == null || fixedSettings.Dialog === '';\r\n    fixedSettings.Dialog ||= 'inline';\r\n    fixedSettings.ButtonSource ||= '';\r\n    fixedSettings.ButtonAdvanced ||= '';\r\n    fixedSettings.ContentCss ||= '';\r\n    fixedSettings.InlineInitialHeight ||= '3';\r\n\r\n    // New - configuration bundles\r\n    fixedSettings._advanced = this.findAndMergeAdvanced(tools, fixedSettings.WysiwygConfiguration, {\r\n      Mode: 'default',\r\n      Json: '',\r\n    });\r\n\r\n    return fixedSettings;\r\n  }\r\n\r\n  /** Checks if dataCmsId is same as file name and if it is switches img src with adam item url */\r\n  processValueOnLoad(value: FieldValue, adamItems: AdamItem[]): FieldValue {\r\n    try {\r\n      const doc = new DOMParser().parseFromString(value as string, 'text/html');\r\n      doc.body.querySelectorAll('img').forEach((img) => {\r\n        const dataCmsid = img.getAttribute('data-cmsid')?.replace('file:', '');\r\n        const src = img.getAttribute('src');\r\n        if (dataCmsid && src) {\r\n          const fileName = src.split('/').pop();\r\n          if (dataCmsid === fileName) {\r\n            const adamItem = adamItems.find(x => x.Name === dataCmsid);\r\n            if (adamItem)\r\n              img.setAttribute('src', adamItem.Url);\r\n          }\r\n        }\r\n      });\r\n      return doc.body.innerHTML;\r\n    } catch (error) {\r\n      console.error('Error while cleaning wysiwyg content', error);\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(StringWysiwygSettingsHelper);\r\n\r\n","@if (loading()) {\r\n  <mat-spinner color=\"accent\"></mat-spinner>\r\n}\r\n@else if (this.fieldState.isOpen()) {\r\n  <app-connector></app-connector>\r\n}\r\n","import { Component, inject, signal } from '@angular/core';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { ScriptsLoaderService } from '../../../shared/services/scripts-loader.service';\r\nimport { ConnectorComponent } from '../../connector/connector';\r\nimport { FieldState } from '../../field-state';\r\nimport { CustomGpsSettingsHelper } from './custom-gps-settings-helper';\r\nimport { StringWysiwygSettingsHelper } from './string-wysiwyg-settings-helper';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.ExternalWebComponent,\r\n  templateUrl: './external-web-component.html',\r\n  imports: [\r\n    MatProgressSpinnerModule,\r\n    ConnectorComponent,\r\n  ]\r\n})\r\nexport class ExternalWebComponentComponent {\r\n\r\n  log = classLog({ExternalWebComponentComponent});\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected config = this.fieldState.config;\r\n \r\n  protected loading = signal<boolean>(true)\r\n\r\n  constructor(\r\n    private scriptsLoaderService: ScriptsLoaderService,\r\n  ) {\r\n    StringWysiwygSettingsHelper.importMe();\r\n    CustomGpsSettingsHelper.importMe();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadAssets();\r\n  }\r\n\r\n  private loadAssets() {\r\n    const assets = this.config.inputTypeSpecs.metadata.UiAssets?.default?.split('\\n') ?? [];\r\n    if (assets.length === 0)\r\n      return;\r\n    this.scriptsLoaderService.load(assets, this.assetsLoaded.bind(this));\r\n  }\r\n\r\n  private assetsLoaded() {\r\n    this.log.fn('assetsLoaded ' + this.config.fieldName);\r\n    this.loading.set(false);\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Directive, ElementRef, input, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { openFeatureDialog } from '../../../features/shared/feature-component-base';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { ElementEventListener } from '../../shared/controls/element-event-listener.model';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  constructor: false,\r\n  handleImage: false,\r\n};\r\n\r\n\r\n@Directive({\r\n  selector: '[appPasteClipboardImage]',\r\n})\r\nexport class PasteClipboardImageDirective implements OnInit, OnDestroy {\r\n\r\n  log = classLog({PasteClipboardImageDirective}, logSpecs);\r\n\r\n  config = input<FieldConfigSet>();\r\n  elementType = input<string>();\r\n  #eventListeners: ElementEventListener[] = [];\r\n\r\n  #pasteImageEnabled = this.features.isEnabled[FeatureNames.PasteImageFromClipboard]();\r\n\r\n  constructor(\r\n    private elementRef: ElementRef,\r\n    private features: FeaturesService,\r\n    private snackBar: MatSnackBar,\r\n    private translate: TranslateService,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    this.log.fn('constructor', { elementType: this.elementType(), pasteImageEnabled: this.#pasteImageEnabled });\r\n  }\r\n\r\n  ngOnInit() {\r\n    switch (this.elementType()) {\r\n      case 'input':\r\n        this.elementRef.nativeElement.pastableTextarea();\r\n        break;\r\n      case 'element':\r\n        this.elementRef.nativeElement.pastableNonInputable();\r\n        break;\r\n    }\r\n\r\n\r\n    const handleImage = (event: CustomEvent) => { this.#handleImage(event); };\r\n    this.elementRef.nativeElement.addEventListener('handleImage', handleImage);\r\n\r\n    this.#eventListeners.push(\r\n      { element: this.elementRef.nativeElement, type: 'handleImage', listener: handleImage },\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // spm 2019-10-24 paste.js which handles clipboard paste doesn't destroy listeners\r\n    this.#eventListeners.forEach(({ element, type, listener }) => {\r\n      element.removeEventListener(type, listener);\r\n    });\r\n  }\r\n\r\n  #handleImage(event: CustomEvent) {\r\n    const enabled = this.#pasteImageEnabled;\r\n    const l = this.log.fnIf('handleImage', { event }, 'handling paste image - ' + (enabled ? 'enabled' : 'disabled') );\r\n    if (enabled) {\r\n      const image = this.#getFile(event.detail as PasteClipboardImageEventDetail);\r\n      this.config().dropzone.uploadFile(image);\r\n      l.end('started upload');\r\n    } else {\r\n      this.snackBar.open(this.translate.instant('Message.PastingFilesIsNotEnabled'), this.translate.instant('Message.FindOutMore'), { duration: 3000 }).onAction().subscribe(() => {\r\n        openFeatureDialog(this.matDialog, FeatureNames.PasteImageFromClipboard, this.viewContainerRef, this.changeDetectorRef);\r\n      });\r\n      l.end('not enabled, showing snackbar');\r\n    }\r\n  }\r\n\r\n  #getFile(data: PasteClipboardImageEventDetail) {\r\n    let newFile = data.file; // for fallback\r\n\r\n    try {\r\n      // File.name is readonly so we do this\r\n      const formData = new FormData();\r\n      formData.append('file', data.file, data.imageFileName);\r\n      newFile = formData.get('file') as File;\r\n    } catch (e) {\r\n      console.error('paste image error', e);\r\n    }\r\n    return newFile;\r\n  }\r\n}\r\n\r\ninterface PasteClipboardImageEventDetail {\r\n  file: File;\r\n  imageFileName: string;\r\n  originalEvent: ClipboardEvent;\r\n}\r\n","import { ChangeDetectorRef, Component, Injector, OnInit, ViewContainerRef, effect, inject, signal } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ItemIdHelper } from 'projects/eav-ui/src/app/shared/models/item-id-helper';\r\nimport { Hyperlink, HyperlinkLibrary } from 'projects/edit-types/src/FieldSettings-Hyperlink';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { eavConstants } from '../../../../shared/constants/eav.constants';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { EditForm } from '../../../../shared/models/edit-form.model';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../form/forms-state.service';\r\nimport { EditRoutingService } from '../../../routing/edit-routing.service';\r\nimport { AdamService } from '../../../shared/adam/adam.service';\r\nimport { LinkCacheService } from '../../../shared/adam/link-cache.service';\r\nimport { FileTypeHelpers, UrlHelpers } from '../../../shared/helpers';\r\nimport { FieldState } from '../../field-state';\r\nimport { PagePicker } from '../../page-picker/page-picker.helper';\r\nimport { Preview } from './hyperlink-default.models';\r\n\r\n@Component({\r\n  selector: 'app-base-field-hyperlink',\r\n  template: '',\r\n})\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport class HyperlinkDefaultBaseComponent implements OnInit {\r\n\r\n  log = classLog({HyperlinkDefaultBaseComponent});\r\n\r\n  preview = signal<Preview>({\r\n    url: '',\r\n    thumbnailUrl: '',\r\n    previewUrl: '',\r\n    floatingText: '',\r\n    isImage: false,\r\n    isKnownType: false,\r\n    icon: '',\r\n  });\r\n\r\n  protected fieldState = inject(FieldState) as FieldState<string, FieldSettings & Hyperlink & HyperlinkLibrary>;\r\n\r\n  protected settings = this.fieldState.settings;\r\n  protected basics = this.fieldState.basics;\r\n  public config = this.fieldState.config;\r\n  public group = this.fieldState.group;\r\n  protected ui = this.fieldState.ui;\r\n  protected uiValue = this.fieldState.uiValue;\r\n\r\n  #injector = inject(Injector);\r\n  #editRoutingService = inject(EditRoutingService);\r\n\r\n  public adamService = transient(AdamService);\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    public matDialog: MatDialog,\r\n    public viewContainerRef: ViewContainerRef,\r\n    public changeDetectorRef: ChangeDetectorRef,\r\n    public linkCacheService: LinkCacheService,\r\n    public formsStateService: FormsStateService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    effect(() => {\r\n      this.log.a('controlStatus effect');\r\n      const status = this.fieldState.uiValue();\r\n      this.fetchLink(status);\r\n    }, { injector: this.#injector });\r\n  }\r\n\r\n  adamItem = computedObj('adamItem', () => {\r\n    const value = this.uiValue();\r\n    const adamItems = this.config.adam.items() as AdamItem[];\r\n\r\n    if (!value || !adamItems.length) return;\r\n\r\n    const match = value.trim().match(/^file:([0-9]+)$/i);\r\n    if (!match) return;\r\n\r\n    const adamItemId = parseInt(match[1], 10);\r\n    const adamItem = adamItems.find(i => i.Id === adamItemId);\r\n    return adamItem;\r\n  });\r\n\r\n\r\n  openPagePicker() {\r\n    PagePicker.open(this.config, this.group, this.matDialog, this.viewContainerRef, this.changeDetectorRef, (page) => {\r\n      // convert to page:xyz format (if it wasn't cancelled)\r\n      if (!page) return;\r\n      this.fieldState.ui().setIfChanged(`page:${page.id}`);\r\n    });\r\n  }\r\n\r\n  openImageConfiguration(adamItem?: AdamItem) {\r\n    if (this.formsStateService.readOnly().isReadOnly || !adamItem?._imageConfigurationContentType)\r\n      return;\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        adamItem._imageConfigurationId > 0\r\n          ? ItemIdHelper.editId(adamItem._imageConfigurationId)\r\n          : ItemIdHelper.newMetadata(adamItem.ReferenceId, adamItem._imageConfigurationContentType, eavConstants.metadata.cmsObject),\r\n      ],\r\n    };\r\n    this.#editRoutingService.open(this.config.index, this.config.entityGuid, form);\r\n  }\r\n\r\n  private fetchLink(value: string) {\r\n    this.log.a('fetchLink', { value });\r\n    if (!value) {\r\n      this.setPreview(value, false);\r\n      return;\r\n    }\r\n\r\n    const isFileOrPage = this.isFileOrPage(value);\r\n    if (!isFileOrPage) {\r\n      this.setPreview(value, false);\r\n      return;\r\n    }\r\n\r\n    const cached = this.linkCacheService.get(value);\r\n    if (cached) {\r\n      const isResolved = !this.isFileOrPage(cached.Value);\r\n      this.setPreview(cached.Value, isResolved, cached.Adam);\r\n      return;\r\n    }\r\n\r\n    // handle short-ID links like file:17\r\n    const contentType = this.config.contentTypeNameId;\r\n    const entityGuid = this.config.entityGuid;\r\n    const field = this.config.fieldName;\r\n    this.adamService.getLinkInfoPromise(value, contentType, entityGuid, field)\r\n      .then(linkInfo => {\r\n        if (!linkInfo) {\r\n          this.setPreview(value, false);\r\n          return;\r\n        }\r\n        this.linkCacheService.addLink(value, linkInfo);\r\n        const isResolved = !this.isFileOrPage(linkInfo.Value);\r\n        this.setPreview(linkInfo.Value, isResolved, linkInfo.Adam);\r\n      });\r\n  }\r\n\r\n  private setPreview(value: string, isResolved: boolean, adam?: AdamItem) {\r\n    const preview = this.getPreview(value, isResolved, adam);\r\n    this.preview.set(preview);\r\n  }\r\n\r\n  private getPreview(value: string, isResolved: boolean, adam?: AdamItem): Preview {\r\n    // for preview resolve [App:Path]\r\n    value = value.replace(/\\[App:Path\\]/i, UrlHelpers.getUrlPrefix('app', this.formConfig.config));\r\n\r\n    return {\r\n      url: value,\r\n      floatingText: isResolved ? `.../${value.substring(value.lastIndexOf('/') + 1)}` : '',\r\n      thumbnailUrl: `url(\"${adam?.ThumbnailUrl ?? this.buildUrl(value, 1)}\")`,\r\n      previewUrl: adam?.PreviewUrl ?? this.buildUrl(value, 2),\r\n      isImage: FileTypeHelpers.isImage(value),\r\n      isKnownType: FileTypeHelpers.isKnownType(value),\r\n      icon: FileTypeHelpers.getIconClass(value),\r\n    } satisfies Preview;\r\n  }\r\n\r\n  private buildUrl(url: string, size?: 1 | 2): string {\r\n    let query = '';\r\n    if (size === 1)\r\n      query += 'w=80&h=80&mode=crop';\r\n    if (size === 2)\r\n      query += 'w=800&h=800&mode=max';\r\n    if (query && !url.includes('?'))\r\n      query = '?' + query;\r\n    return url + query;\r\n  }\r\n\r\n  private isFileOrPage(value: string) {\r\n    const cleanValue = value.trim().toLocaleLowerCase();\r\n    const isFileOrPage = cleanValue.startsWith('file:') || cleanValue.startsWith('page:');\r\n    return isFileOrPage;\r\n  }\r\n}\r\n","import { Hyperlink } from 'projects/edit-types/src/FieldSettings-Hyperlink';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class HyperlinkDefaultSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.HyperlinkDefault;\r\n\r\n  constructor() { super({ HyperlinkDefaultSettingsHelper }); }\r\n\r\n  update({ settings }: FieldSettingsUpdateTask): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & Hyperlink;\r\n    fixedSettings.Buttons ||= 'adam,more';\r\n    fixedSettings.FileFilter ??= '';\r\n    fixedSettings.Paths ??= '';\r\n    fixedSettings.ServerResourceMapping ??= '';\r\n    fixedSettings.EnableImageConfiguration ??= true; // 2022-11-08 v14.12 changed default to true // false;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(HyperlinkDefaultSettingsHelper);\r\n","@if (preview(); as preV) {\r\n  @if (this.fieldState.isOpen()) {\r\n    <div class=\"fabs-box\">\r\n      @if (buttonAdam()) {\r\n        <button\r\n          mat-mini-fab\r\n          color=\"accent\"\r\n          tippyTranslate=\"Fields.Hyperlink.Default.AdamTip\"\r\n          [disabled]=\"ui().disabled\"\r\n          (click)=\"toggleAdam(false, false)\"\r\n        >\r\n          <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n        </button>\r\n      }\r\n      <button\r\n        mat-mini-fab\r\n        color=\"primary\"\r\n        [disabled]=\"!adamItem()?._imageConfigurationContentType\"\r\n        [ngClass]=\"{ 'metadata-exists': adamItem()?._imageConfigurationId > 0 }\"\r\n        tippyTranslate=\"Fields.Hyperlink.AdamFileManager.ImageSettings\"\r\n        (click)=\"openImageConfiguration(adamItem())\"\r\n      >\r\n        <mat-icon\r\n          [tippyTranslate]=\"\r\n            enableImageConfiguration()\r\n              ? 'Fields.Hyperlink.AdamFileManager.ImageSettingsUnavailable'\r\n              : 'Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled'\r\n          \"\r\n          [tippyDisabled]=\"adamItem()?._imageConfigurationContentType\"\r\n          >filter_center_focus</mat-icon\r\n        >\r\n      </button>\r\n      @if (buttonPage()) {\r\n        <button\r\n          mat-mini-fab\r\n          color=\"primary\"\r\n          tippyTranslate=\"Fields.Hyperlink.Default.PageTip\"\r\n          [disabled]=\"ui().disabled\"\r\n          (click)=\"openPagePicker()\"\r\n        >\r\n          <mat-icon svgIcon=\"sitemap\"></mat-icon>\r\n        </button>\r\n      }\r\n      @if (buttonMore()) {\r\n        <button\r\n          mat-mini-fab\r\n          color=\"primary\"\r\n          tippyTranslate=\"Fields.Hyperlink.Default.MoreOptions\"\r\n          [disabled]=\"ui().disabled\"\r\n          [matMenuTriggerFor]=\"menu\"\r\n        >\r\n          <mat-icon>more_vert</mat-icon>\r\n        </button>\r\n      }\r\n    </div>\r\n    <mat-menu #menu=\"matMenu\" class=\"menu-box\">\r\n      <ng-template matMenuContent>\r\n        @if (showAdam()) {\r\n          <button mat-menu-item (click)=\"toggleAdam(false, false)\">\r\n            <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n            <span>{{ \"Fields.Hyperlink.Default.MenuAdam\" | translate }}</span>\r\n          </button>\r\n        }\r\n        @if (showPagePicker()) {\r\n          <button mat-menu-item (click)=\"openPagePicker()\">\r\n            <mat-icon svgIcon=\"sitemap\"></mat-icon>\r\n            <span>{{ \"Fields.Hyperlink.Default.MenuPage\" | translate }}</span>\r\n          </button>\r\n        }\r\n        @if (showImageManager()) {\r\n          <button mat-menu-item (click)=\"toggleAdam(true, true)\">\r\n            <mat-icon svgIcon=\"file-image\"></mat-icon>\r\n            <span>{{ \"Fields.Hyperlink.Default.MenuImage\" | translate }}</span>\r\n          </button>\r\n        }\r\n        @if (showFileManager()) {\r\n          <button mat-menu-item (click)=\"toggleAdam(true, false)\">\r\n            <mat-icon svgIcon=\"file\"></mat-icon>\r\n            <span>{{ \"Fields.Hyperlink.Default.MenuDocs\" | translate }}</span>\r\n          </button>\r\n        }\r\n      </ng-template>\r\n    </mat-menu>\r\n    <!-- content -->\r\n    <div class=\"eav-layout-grid\">\r\n      <div class=\"eav-layout-grid__inner\">\r\n        <mat-card class=\"eav-card eav-layout-grid__cell--span-12 hyperlink-card shadow-bottom-z-1\">\r\n          <div class=\"hyperlink-input-link-wrapper\">\r\n            <!-- input -->\r\n            <mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n              <input\r\n                matInput\r\n                [formControlName]=\"config.fieldName\"\r\n                tippyTranslate=\"Fields.Hyperlink.Default.Tooltip\"\r\n                tippyPlacement=\"top\"\r\n                [placeholder]=\"basics().placeholder\"\r\n                [required]=\"basics().required\"\r\n                appPasteClipboardImage\r\n                [config]=\"config\"\r\n                [elementType]=\"'input'\"\r\n              />\r\n              <mat-label>{{ basics().label }}</mat-label>\r\n            </mat-form-field>\r\n            <!-- link absolutely positioned above input -->\r\n            @if (preV?.floatingText) {\r\n              <div class=\"hyperlink-floating\">\r\n                <div class=\"hyperlink-floating__value\">{{ uiValue() }}</div>\r\n                <div class=\"hyperlink-floating__url-box\">\r\n                  <a [href]=\"preV.url\" target=\"_blank\" class=\"hyperlink-floating__url\" [tippy]=\"preV.url\">\r\n                    <span>{{ preV.floatingText }}</span>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          @if (uiValue()) {\r\n            <div class=\"preview-wrapper\">\r\n              @if (preV.isImage) {\r\n                <!-- image -->\r\n                <a [href]=\"preV.url\" target=\"_blank\">\r\n                  <div class=\"preview-image-box\">\r\n                    <img [src]=\"preV.previewUrl\" class=\"preview-image\" />\r\n                  </div>\r\n                </a>\r\n              } @else {\r\n                <!-- icon -->\r\n                <a [href]=\"preV.url\" target=\"_blank\" [tippy]=\"preV.url\" tippyPlacement=\"right\">\r\n                  <div class=\"preview-icon-box\">\r\n                    <mat-icon [svgIcon]=\"preV.icon\"></mat-icon>\r\n                  </div>\r\n                </a>\r\n              }\r\n            </div>\r\n          }\r\n        </mat-card>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, computed, effect, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { SignalEquals } from '../../../../shared/signals/signal-equals';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../form/forms-state.service';\r\nimport { LinkCacheService } from '../../../shared/adam/link-cache.service';\r\nimport { PasteClipboardImageDirective } from '../../directives/paste-clipboard-image.directive';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { WrappersCatalog } from '../../wrappers/wrappers.constants';\r\nimport { HyperlinkDefaultBaseComponent } from './hyperlink-default-base';\r\nimport { HyperlinkDefaultSettingsHelper } from './hyperlink-default-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.HyperlinkDefault,\r\n    templateUrl: './hyperlink-default.html',\r\n    styleUrls: ['./hyperlink-default.scss'],\r\n    imports: [\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        NgClass,\r\n        MatMenuModule,\r\n        MatCardModule,\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        PasteClipboardImageDirective,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\n@FieldMetadata({\r\n  wrappers: [\r\n    WrappersCatalog.DropzoneWrapper,\r\n    WrappersCatalog.LocalizationWrapper,\r\n    WrappersCatalog.HyperlinkDefaultExpandableWrapper,\r\n    WrappersCatalog.AdamWrapper,\r\n  ],\r\n})\r\nexport class HyperlinkDefaultComponent extends HyperlinkDefaultBaseComponent implements OnInit {\r\n  protected buttonAdam = computed(() => this.settings().Buttons.includes('adam'), SignalEquals.bool);\r\n  protected buttonPage = computed(() => this.settings().Buttons.includes('page'), SignalEquals.bool);\r\n  protected buttonMore = computed(() => this.settings().Buttons.includes('more'), SignalEquals.bool);\r\n  protected showAdam = this.fieldState.settingExt('ShowAdam');\r\n  protected showPagePicker = this.fieldState.settingExt('ShowPagePicker');\r\n  protected showImageManager = this.fieldState.settingExt('ShowImageManager');\r\n  protected showFileManager = this.fieldState.settingExt('ShowFileManager');\r\n  protected enableImageConfiguration = this.fieldState.settingExt('EnableImageConfiguration');\r\n\r\n  constructor(\r\n    eavService: FormConfigService,\r\n    matDialog: MatDialog,\r\n    viewContainerRef: ViewContainerRef,\r\n    changeDetectorRef: ChangeDetectorRef,\r\n    linkCacheService: LinkCacheService,\r\n    formsStateService: FormsStateService,\r\n  ) {\r\n    super(\r\n      eavService,\r\n      matDialog,\r\n      viewContainerRef,\r\n      changeDetectorRef,\r\n      linkCacheService,\r\n      formsStateService,\r\n    );\r\n    HyperlinkDefaultSettingsHelper.importMe();\r\n\r\n    // ADAM Settings, in a way which ensures they only fire on relevant changes\r\n    // must be in constructor for effect() to work\r\n    const adamSettings = computedObj('adamSettings', () => {\r\n      const s = this.fieldState.settings();\r\n      return {\r\n        rootSubfolder: s.Paths,\r\n        fileFilter: s.FileFilter,\r\n        autoLoad: true,\r\n      };\r\n    });\r\n\r\n    effect(() => {\r\n      const config = adamSettings();\r\n      // console.warn('adamConfig in Hyperlink-Default', config);\r\n      this.config.adam.setConfig(config);\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n\r\n    // Should probably be in ngOnInit, because this.config.adam is created late\r\n    this.config.adam.onItemClick = (item: AdamItem) => { this.setValue(item); };\r\n    this.config.adam.onItemUpload = (item: AdamItem) => { this.setValue(item); };\r\n  }\r\n\r\n  toggleAdam(usePortalRoot: boolean, showImagesOnly: boolean) {\r\n    this.config.adam.toggle(usePortalRoot, showImagesOnly);\r\n  }\r\n\r\n  private setValue(item: AdamItem) {\r\n    const usePath = this.settings().ServerResourceMapping === 'url';\r\n    const newValue = !usePath ? item.ReferenceId : item.Url;\r\n    this.fieldState.ui().setIfChanged(newValue);\r\n  }\r\n}\r\n","import { HyperlinkLibrary } from 'projects/edit-types/src/FieldSettings-Hyperlink';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class HyperlinkLibrarySettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.HyperlinkLibrary;\r\n\r\n  constructor() { super({ HyperlinkLibrarySettingsHelper }); }\r\n\r\n  update({ settings }: FieldSettingsUpdateTask): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & HyperlinkLibrary;\r\n    fixedSettings.EnableImageConfiguration ??= true; // 2022-11-08 v14.12 changed default to true // false;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(HyperlinkLibrarySettingsHelper);\r\n","import { Component, effect, inject, Injector, OnInit } from '@angular/core';\r\nimport { AdamConfig } from '../../../../../../../edit-types/src/AdamConfig';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../../wrappers/wrappers.constants';\r\nimport { HyperlinkLibrarySettingsHelper } from './hyperlink-library-settings-helper';\r\nimport { AdamControl } from './hyperlink-library.models';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.HyperlinkLibrary,\r\n  template: '', // note: no template - it will just show the adam component in the popup\r\n  styleUrls: [],\r\n})\r\n@FieldMetadata({\r\n  wrappers: [\r\n    WrappersCatalog.DropzoneWrapper,\r\n    WrappersCatalog.LocalizationWrapper,\r\n    WrappersCatalog.HyperlinkLibraryExpandableWrapper,\r\n    WrappersCatalog.AdamWrapper,\r\n  ],\r\n})\r\nexport class HyperlinkLibraryComponent implements OnInit {\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  private injector = inject(Injector);\r\n\r\n  constructor() {\r\n    HyperlinkLibrarySettingsHelper.importMe();\r\n\r\n    let first = true;\r\n    effect(() => {\r\n      const control = this.fieldState.ui().control as AdamControl;\r\n      // Patch length info to the control state, so the validator can pick it up\r\n      control.adamItems = this.fieldState.config.adam.items().length;\r\n      // Update the validity of the control - but not during initialization, only on later changes\r\n      // otherwise the field would glow red right from the start\r\n      if (!first)\r\n        control.updateValueAndValidity();\r\n      first = false;\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.attachAdamConfig();\r\n    // this.attachAdamValidator();\r\n  }\r\n\r\n  private attachAdamConfig() {\r\n    const adamConfig = computedObj('adamConfig', () => {\r\n      const s = this.fieldState.settings();\r\n      return {\r\n        allowAssetsInRoot: s.AllowAssetsInRoot,\r\n        autoLoad: true,\r\n        enableSelect: false,\r\n        rootSubfolder: s.Paths,\r\n        fileFilter: s.FileFilter,\r\n        folderDepth: s.FolderDepth || 0,\r\n        metadataContentTypes: s.MetadataContentTypes,\r\n      } as AdamConfig;\r\n    });\r\n\r\n    effect(() => {\r\n      const config = adamConfig();\r\n      // console.warn('adamConfig in HyperlinkLibrary', config);\r\n      this.fieldState.config.adam.setConfig(config);\r\n    }, { injector: this.injector });\r\n  }\r\n}\r\n","import { Of } from '../../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMerged, StringDropdown } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { PickerLogicShared } from '../../picker/picker-settings-helper-shared';\r\nimport { DataSourceDropDownOptions } from '../string-picker/string-picker.helpers';\r\n\r\nexport class StringDropdownSettingsHelper extends FieldSettingsHelperBase {\r\n  name: Of<typeof InputTypeCatalog> = InputTypeCatalog.StringDropdown;\r\n  type: 'string' | 'number' = 'string';\r\n\r\n  constructor() { super({ StringDropdownSettingsHelper }); }\r\n\r\n  update({ settings, value }: FieldSettingsUpdateTask<string>): FieldSettings {\r\n    const fs = PickerLogicShared.setDefaultSettings({ ...settings }) as FieldSettings & StringDropdown & FieldSettingsPickerMerged;\r\n    // fixedSettings.EnableTextEntry ??= false;\r\n    // fixedSettings.DropdownValues ??= '';\r\n    // fixedSettings.DropdownValuesFormat ??= '';// maybe we should change this to 'value-label' in the future\r\n    fs._options = new DataSourceDropDownOptions().parseOptions(value, this.type, fs.DropdownValuesFormat || '', fs.DropdownValues || '');\r\n    \r\n    // Both the query type and create-type are the same\r\n    fs.EntityType ??= '';\r\n    fs.CreateTypes = fs.EntityType;\r\n\r\n    fs.EnableEdit ??= false;\r\n    fs.EnableCreate ??= false;\r\n    // fixedSettings.EnableAddExisting ??= true;\r\n    // fixedSettings.EnableDelete ??= false;\r\n    // if multi-value is ever allowed, then we must also enable remove\r\n    // since we're migrating to pickers, we don't plan to implement multi-value dropdowns here\r\n    // fixedSettings.AllowMultiValue ??= false;\r\n    fs.EnableRemove ??= fs.AllowMultiValue;\r\n    return fs;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(StringDropdownSettingsHelper);\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { StringDropdownSettingsHelper } from '../string-dropdown/string-dropdown-settings-helper';\r\n\r\n\r\nexport class NumberDefaultSettingsHelper extends StringDropdownSettingsHelper {\r\n  name = InputTypeCatalog.NumberDefault;\r\n\r\n  update(specs: FieldSettingsUpdateTask<string>): FieldSettings {\r\n    const fixedSettings: FieldSettings = { ...super.update(specs) };\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(NumberDefaultSettingsHelper);\r\n","import { Component, inject } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { NumberDefaultSettingsHelper } from './number-default-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.NumberDefault,\r\n    templateUrl: './number-default.html',\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class NumberDefaultComponent {\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  protected group = this.fieldState.group;\r\n  protected config = this.fieldState.config;\r\n\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected min = this.fieldState.settingExt('Min');\r\n  protected max = this.fieldState.settingExt('Max');\r\n\r\n  constructor() {\r\n    NumberDefaultSettingsHelper.importMe();\r\n  }\r\n\r\n}\r\n","<mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n  <input matInput type=\"number\"\r\n    class=\"eav-translate-on-dblclick\"\r\n    [formControlName]=\"config.fieldName\"\r\n    [required]=\"basics().required\"\r\n    [placeholder]=\"basics().placeholder\"\r\n    [min]=\"min()\"\r\n    [max]=\"max()\">\r\n  <mat-label>{{ basics().label }}</mat-label>\r\n</mat-form-field>\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { StringDropdownSettingsHelper } from '../string-dropdown/string-dropdown-settings-helper';\r\n\r\n\r\nexport class NumberDropdownSettingsHelper extends StringDropdownSettingsHelper {\r\n  name = InputTypeCatalog.NumberDropdown;\r\n  type = 'number' as 'number';\r\n\r\n  update(specs: FieldSettingsUpdateTask<string>): FieldSettings {\r\n    const fixedSettings: FieldSettings = { ...super.update(specs) };\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(NumberDropdownSettingsHelper);\r\n","import { Component } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { NumberDropdownSettingsHelper } from './number-dropdown-settings-helper';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.NumberDropdown,\r\n  templateUrl: '../../picker/picker.html',\r\n  imports: [\r\n    PickerImports\r\n  ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class NumberDropdownComponent extends PickerComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    NumberDropdownSettingsHelper.importMe();\r\n  }\r\n}\r\n","import { Of } from '../../../../../../../core/type-utilities';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsHelpersManager } from '../../logic/field-settings-helpers-manager';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { StringPickerSettingsHelper } from '../string-picker/string-picker-settings-helper';\r\n\r\nexport class NumberPickerSettingsHelper extends FieldSettingsHelperBase {\r\n  name: Of<typeof InputTypeCatalog> = InputTypeCatalog.NumberPicker;\r\n\r\n  constructor() { super({ NumberPickerSettingsHelper }); }\r\n\r\n  update(specs: FieldSettingsUpdateTask<string>): FieldSettings {\r\n\r\n    const stringLogic = FieldSettingsHelpersManager.singleton().get(InputTypeCatalog.StringPicker) as StringPickerSettingsHelper;\r\n    return stringLogic.update(specs);\r\n\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(NumberPickerSettingsHelper);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging/logging';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { NumberPickerSettingsHelper } from './number-picker-settings-helper';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.NumberPicker,\r\n  templateUrl: '../../picker/picker.html',\r\n  imports: PickerImports\r\n})\r\nexport class NumberPickerComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({ NumberPickerComponent }, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    NumberPickerSettingsHelper.importMe();\r\n  }\r\n}\r\n\r\n\r\n","import { FieldSettingsStringDefault } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class StringDefaultSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.StringDefault;\r\n\r\n  constructor() { super({ StringDefaultSettingsHelper }); }\r\n\r\n  canAutoTranslate = true;\r\n\r\n  update(specs: FieldSettingsUpdateTask): FieldSettings {\r\n    const fixedSettings = { ...specs.settings } as FieldSettings & FieldSettingsStringDefault;\r\n    fixedSettings.InputFontFamily ??= '';\r\n    fixedSettings.RowCount ||= 1;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(StringDefaultSettingsHelper);\r\n","\r\n<mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\" [ngClass]=\"{'textarea-field': rowCount() > 1}\">\r\n  @if (!isMultiline()) {\r\n    <!-- Single Line field -->\r\n    <input matInput class=\"eav-translate-on-dblclick\"\r\n      [formControlName]=\"config.fieldName\"\r\n      [placeholder]=\"basics().placeholder\"\r\n      [required]=\"basics().required\"\r\n      [ngStyle]=\"{ 'font-family': inputFontFamily() }\">\r\n  }\r\n  @else {\r\n    <!-- Multi Line field -->\r\n    <textarea matInput class=\"eav-translate-on-dblclick\"\r\n      [formControlName]=\"config.fieldName\"\r\n      [rows]=\"rowCount()\"\r\n      [placeholder]=\"basics().placeholder\"\r\n      [required]=\"basics().required\"\r\n      [ngStyle]=\"{ 'font-family': inputFontFamily(), 'white-space': textWrap() }\">\r\n    </textarea>\r\n  }\r\n  <mat-label>{{ basics().label }}</mat-label>\r\n</mat-form-field>\r\n<app-field-helper-text></app-field-helper-text>\r\n\r\n<!-- Show message if this input-field is only being shown as a fallback -->\r\n@if (typeIfNotWhatsExpected() != null) {\r\n  <div style=\"color: red;\">\r\n    Error: Input <code>{{ typeIfNotWhatsExpected() }}</code> for <code>{{ basics().label }}</code> not found.\r\n    It's probably be an extension input field, but it's not loaded.\r\n    Showing default, please fix extension or change field configuration.\r\n  </div>\r\n}","import { NgClass, NgStyle } from '@angular/common';\r\nimport { Component, inject } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { FieldSettingsStringDefault } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { StringDefaultSettingsHelper } from './string-default-settings-helper';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.StringDefault,\r\n  templateUrl: './string-default.html',\r\n  styleUrls: ['./string-default.scss'],\r\n  imports: [\r\n    MatFormFieldModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgClass,\r\n    MatInputModule,\r\n    NgStyle,\r\n    FieldHelperTextComponent,\r\n  ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class StringDefaultComponent {\r\n\r\n  #fieldState = inject(FieldState) as FieldState<string, FieldSettings & FieldSettingsStringDefault>;\r\n\r\n  protected group = this.#fieldState.group;\r\n  protected config = this.#fieldState.config;\r\n\r\n  // #settings = this.#fieldState.settings;\r\n  protected basics = this.#fieldState.basics;\r\n\r\n  /**\r\n   * Row Count as it is in the settings\r\n   * It has an undocumented feature - ATM only used in icon-picker,\r\n   * where the row count can be negative to create a multi-line picker.\r\n   * This is not an official feature, as we may add a toggle to this some day instead, and then fix the icon-picker.\r\n   */\r\n  protected rowCountRaw = this.#fieldState.settingExt('RowCount');\r\n\r\n  /**\r\n   * Row Count corrected and also neutralize negative numbers, as it's an undocumented feature to create multi-line with 1 line\r\n   */\r\n  protected rowCount = computedObj('rowCount', () => Math.abs(this.rowCountRaw() || 1));\r\n  \r\n  protected isMultiline = computedObj('isMultiline', () => {\r\n    const rc = this.rowCountRaw() || 1;\r\n    return rc < 0 || rc > 1;\r\n  });\r\n  \r\n  protected inputFontFamily = this.#fieldState.settingExt('InputFontFamily');\r\n  protected textWrap = this.#fieldState.settingExt('TextWrapping');\r\n\r\n  /**\r\n   * The string-default is also used when a custom string-* is not found.\r\n   * If this is being shown as a fallback for another field type, keep the name here\r\n   * to show in the UI.\r\n   */\r\n  protected typeIfNotWhatsExpected = this.#fieldState.isNotExpectedType([InputTypeCatalog.StringDefault]);\r\n\r\n  constructor() {\r\n    StringDefaultSettingsHelper.importMe();\r\n  }\r\n\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsSharedSeparator } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsHelpersManager } from '../../logic/field-settings-helpers-manager';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { EntityDefaultSettingsHelper } from '../entity-default/entity-default-settings-helper';\r\n\r\nexport class StringDropdownQuerySettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.StringDropdownQuery;\r\n\r\n  constructor() { super({ StringDropdownQuerySettingsHelper }); }\r\n\r\n  update(specs: FieldSettingsUpdateTask<string[]>): FieldSettings {\r\n    const entityDefaultLogic = FieldSettingsHelpersManager.singleton().get(InputTypeCatalog.EntityDefault) as EntityDefaultSettingsHelper;\r\n    const fs = entityDefaultLogic.update(specs) as FieldSettings & FieldSettingsSharedSeparator;\r\n    fs.Separator ||= ',';\r\n\r\n    // New features should not be supported in this old input, so commented out\r\n    // fixedSettings.Value ??= '';\r\n    // fixedSettings.Label ??= '';\r\n    // fixedSettings.MoreFields ??= '';\r\n    return fs;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(StringDropdownQuerySettingsHelper);\r\n","import { Component } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { StringDropdownQuerySettingsHelper } from './string-dropdown-query-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringDropdownQuery,\r\n    templateUrl: '../../picker/picker.html',\r\n    imports: PickerImports\r\n})\r\nexport class StringDropdownQueryComponent extends PickerComponent {\r\n\r\n  log = classLog({StringDropdownQueryComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    StringDropdownQuerySettingsHelper.importMe();\r\n  }\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { EntityDefaultSettingsHelper } from '../entity-default/entity-default-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringDropdown,\r\n    templateUrl: '../../picker/picker.html',\r\n    imports: PickerImports\r\n})\r\nexport class StringDropdownComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({StringDropdownComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    EntityDefaultSettingsHelper.importMe();\r\n  }\r\n\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPicker, FieldSettingsPickerMasks, FieldSettingsStringFontIconPicker } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { PickerSourceCss } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { buildRegExFromPrefixAndSuffix } from '../../picker/data-sources/css/string-font-icon-picker.helpers';\r\n\r\n/**\r\n * Logic for the StringFontIconPicker field.\r\n * This is an older field, which was standalone till ca. v18.01.\r\n * \r\n * In v18.02 it was changed to use the standard picker,\r\n * so it now ports the configuration from the names in the old config entity\r\n * to how the new picker expects them.\r\n */\r\nexport class StringFontIconPickerSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.StringFontIconPicker;\r\n\r\n  constructor() { super({ StringFontIconPickerSettingsHelper }); }\r\n\r\n  update({ fieldName, settings }: FieldSettingsUpdateTask): FieldSettings {\r\n    const l = this.log.fnIfInFields('update', fieldName, { fieldName, settings });\r\n\r\n    // Cast settings to type which knows about the properties\r\n    // and the raw settings which show what values can be read\r\n    const fs = { ...settings } as FieldSettings & FieldSettingsPickerMasks & PickerSourceCss & FieldSettingsPicker;\r\n    const raw = fs as unknown as FieldSettingsStringFontIconPicker;\r\n\r\n    ///// OLD Settings\r\n    // fixedSettings.Files ??= '';\r\n    // fixedSettings.CssPrefix ??= '';\r\n    // fixedSettings.ShowPrefix ??= false;\r\n\r\n    // Note: the original Files was multi-line. We assume it was never used, but we can't be sure.\r\n    fs.CssSourceFile = raw.Files ?? '';\r\n    fs.CssSelectorFilter = raw.CssPrefix ?? '';\r\n    fs.CssSelectorFilter = buildRegExFromPrefixAndSuffix(raw.CssPrefix ?? '', ':');\r\n    fs.PreviewValue = `${raw.PreviewCss} [Item:Value]`;\r\n\r\n    fs.PreviewType ='icon-css';\r\n    fs.EnableTextEntry = false;\r\n    fs.EnableAddExisting = true;\r\n    fs.AllowMultiValue = false;\r\n\r\n    fs.noAutoFocus = true;\r\n\r\n    // The label should either be the entire class, or just the part after the prefix\r\n    // These values will be in the `Value` or `Title` fields, respectively.\r\n    fs.Label = raw.ShowPrefix ? 'Value' : 'Title';\r\n    return l.r(fs);\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(StringFontIconPickerSettingsHelper);\r\n","import { Component } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { StringFontIconPickerSettingsHelper } from './string-font-icon-picker-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringFontIconPicker,\r\n    templateUrl: '../../picker/picker.html',\r\n    imports: [\r\n        PickerImports,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class StringFontIconPickerComponent extends PickerComponent {\r\n\r\n  log = classLog({StringFontIconPickerComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    StringFontIconPickerSettingsHelper.importMe();\r\n  }\r\n}\r\n","import { Of } from '../../../../../../../core/type-utilities';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\nimport { PickerSourcesCustom } from '../../picker/constants/picker-config-model.constants';\r\nimport { PickerLogicShared } from '../../picker/picker-settings-helper-shared';\r\n\r\nexport class StringPickerSettingsHelper extends FieldSettingsHelperBase {\r\n  name: Of<typeof InputTypeCatalog> = InputTypeCatalog.StringPicker;\r\n\r\n  constructor() { super({StringPickerSettingsHelper}); }\r\n\r\n  update(specs: FieldSettingsUpdateTask<string>): FieldSettings {\r\n    \r\n    var log = classLog({StringPickerSettingsHelper}, null);\r\n    const l = log.fn('update', { specs });\r\n\r\n    const { fs, removeEditRestrictions, typeConfig } = new PickerLogicShared().preUpdate(specs);\r\n\r\n    fs.Separator ??= '\\n'; //'\\\\n';\r\n    if (fs.Separator == '\\\\n') fs.Separator = '\\n'; //buggy temp double-slash-n\r\n\r\n    /** Dropdown data source aka custom-list picker */\r\n    const typeName = fs.dataSourceType;\r\n    const isCustomSource = Object.values(PickerSourcesCustom).includes(typeName as Of<typeof PickerSourcesCustom>);\r\n    l.a(`type: ${typeName}`, { typeConfig, isCustomSource });\r\n\r\n    if (isCustomSource) {\r\n      if (!removeEditRestrictions) {\r\n        fs.EnableEdit = false;\r\n        fs.EnableCreate = false;\r\n        fs.EnableDelete = false;\r\n      }\r\n    } else\r\n      l.a('type: not UiPickerSourceCustom-List/Csv', { typeConfig });\r\n\r\n    return l.r(fs);\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(StringPickerSettingsHelper);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerComponent } from '../../picker/picker';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { StringPickerSettingsHelper } from './string-picker-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringPicker,\r\n    templateUrl: '../../picker/picker.html',\r\n    imports: PickerImports\r\n})\r\nexport class StringPickerComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({ StringPickerComponent }, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    StringPickerSettingsHelper.importMe();\r\n  }\r\n\r\n}\r\n","import { TemplateTypes } from './string-template-picker.models';\r\n\r\nexport const templateTypes: TemplateTypes = {\r\n  Token: {\r\n    ext: '.html',\r\n    purpose: 'Template',\r\n    type: 'Token',\r\n  },\r\n  'C# Razor': {\r\n    ext: '.cshtml',\r\n    purpose: 'Template',\r\n    type: 'Razor',\r\n  },\r\n  // New in 12.02 - won't show up in the selection-dropdown but is used for Controller-Selectors\r\n  'C# Search': {\r\n    ext: '.cs',\r\n    purpose: 'Search',\r\n  },\r\n} as const;\r\n","  <div class=\"picker-wrapper\">\r\n    <mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n      <mat-select [formControlName]=\"config.fieldName\" [required]=\"basics().required\" class=\"eav-translate-on-dblclick\">\r\n        <mat-option value=\"\">{{ 'Fields.TemplatePicker.NotSelected' | translate }}</mat-option>\r\n        @for (file of files(); track file) {\r\n          <mat-option [value]=\"file\">\r\n            {{ file }}\r\n          </mat-option>\r\n        }\r\n      </mat-select>\r\n      <mat-label>{{ basics().label }}</mat-label>\r\n    </mat-form-field>\r\n    <button mat-icon-button tippyTranslate=\"Fields.TemplatePicker.NewTemplate\" [disabled]=\"ui().disabled\" (click)=\"createTemplate()\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n  </div>\r\n  <app-field-helper-text></app-field-helper-text>\r\n","import { Component, Injector, ViewContainerRef, effect, inject, signal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { StringTemplatePicker } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { SourceService } from '../../../../code-editor/services/source.service';\r\nimport { CreateFileDialogComponent } from '../../../../create-file-dialog/create-file-dialog';\r\nimport { CreateFileDialogData, CreateFileDialogResult } from '../../../../create-file-dialog/create-file-dialog.models';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FieldMask } from '../../../shared/helpers';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { templateTypes } from './string-template-picker.constants';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringTemplatePicker,\r\n    templateUrl: './string-template-picker.html',\r\n    styleUrls: ['./string-template-picker.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatSelectModule,\r\n        MatOptionModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        FieldHelperTextComponent,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class StringTemplatePickerComponent {\r\n  \r\n  log = classLog({StringTemplatePickerComponent});\r\n\r\n  #fieldState = inject(FieldState) as FieldState<string, FieldSettings & StringTemplatePicker>;\r\n\r\n  // needed to create more FieldMasks as needed\r\n  #injector = inject(Injector);\r\n\r\n  // If we have a configured type, use that, otherwise use the field mask\r\n  // We'll still use the field-mask (even though it wouldn't be needed) to keep the logic simple\r\n  #typeMask = transient(FieldMask).init('typeMask', this.#fieldState.settings().FileType ?? '[Type]');\r\n\r\n  #locationMask = transient(FieldMask).init('String-LocationMask', '[Location]');\r\n\r\n  #sourceService = transient(SourceService);\r\n\r\n  protected group = this.#fieldState.group;\r\n  protected config = this.#fieldState.config;\r\n\r\n  protected basics = this.#fieldState.basics;\r\n  protected ui = this.#fieldState.ui;\r\n\r\n  protected files = signal<string[]>([]);\r\n\r\n  #activeSpec = templateTypes.Token;\r\n  #templates: string[] = [];\r\n  #global = false;\r\n\r\n  /** Reset only after templates have been fetched once */\r\n  #resetIfNotFound = false;\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) {\r\n    // Watch for location changes to update the files in the dropdown\r\n    effect(() => this.#onLocationChange(this.#locationMask.result()));\r\n\r\n    // Watch for changes to the Type mask\r\n    effect(() => this.#setFileConfig(this.#typeMask.result()));\r\n  }\r\n\r\n  #setFileConfig(type: string) {\r\n    this.#activeSpec = templateTypes[type];\r\n    this.#setTemplateOptions();\r\n  }\r\n\r\n  #prevLocation = '';\r\n  #onLocationChange(location: string) {\r\n    const l = this.log.fn('onLocationChange', { location });\r\n    this.#global = (\r\n      location === 'Host File System' // Original value used from 2sxc up until v12.01\r\n      || location === 'Global' // New key used in 2sxc 12.02 and later\r\n    );\r\n\r\n    if (this.#prevLocation === location)\r\n      return;\r\n    this.#prevLocation = location;\r\n\r\n    this.#sourceService.getAllPromise().then(files => {\r\n      this.#templates = files.filter(file => file.Shared === this.#global).map(file => file.Path);\r\n      this.#resetIfNotFound = true;\r\n      this.#setTemplateOptions();\r\n    });\r\n  }\r\n\r\n  #setTemplateOptions() {\r\n    const ext = this.#activeSpec.ext;\r\n    const filtered = this.#templates\r\n      // new feature in v11 - '.code.xxx' files shouldn't be shown, they are code-behind\r\n      .filter(template => !/\\.code\\.[a-zA-Z0-9]+$/.test(template))\r\n      .filter(template => template.endsWith(ext));\r\n    this.files.set(filtered);\r\n\r\n    const resetValue = this.#resetIfNotFound && !filtered.some(template => template === this.#fieldState.uiValue());\r\n    if (resetValue)\r\n      this.ui().setIfChanged('');\r\n  }\r\n\r\n  createTemplate() {\r\n    const nameMask = transient(FieldMask, this.#injector).init('String-NameMask', '[Name]');\r\n    const data: CreateFileDialogData = {\r\n      global: this.#global,\r\n      purpose: this.#activeSpec.purpose,\r\n      type: this.#activeSpec.type,\r\n      name: nameMask.result(),\r\n    };\r\n    nameMask.destroy();\r\n    const dialogRef = this.matDialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) return;\r\n\r\n      this.#sourceService.create(result.name, this.#global, result.templateKey).subscribe(res => {\r\n        if (res === false) {\r\n          alert('Server reported that create failed - the file probably already exists');\r\n        } else {\r\n          this.#templates.push(result.name);\r\n          this.#setTemplateOptions();\r\n          this.ui().setIfChanged(result.name);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { StringUrlPath } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class StringUrlPathSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.StringUrlPath;\r\n\r\n  constructor() { super({ InputTypeCatalog }); }\r\n\r\n  update({ settings }: FieldSettingsUpdateTask): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & StringUrlPath;\r\n    fixedSettings.AutoGenerateMask ??= null;\r\n    fixedSettings.AllowSlashes ??= false;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(StringUrlPathSettingsHelper);\r\n","import { Component, computed, effect, inject, signal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FieldMask, UrlHelpers } from '../../../shared/helpers';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { StringUrlPathSettingsHelper } from './string-url-path-settings-helper';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringUrlPath,\r\n    templateUrl: './string-url-path.html',\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class StringUrlPathComponent {\r\n\r\n  log = classLog({StringUrlPathComponent});\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  protected group = this.fieldState.group;\r\n\r\n  protected settings = this.fieldState.settings;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  /** The mask to use comes from the field settings */\r\n  #maskFromSettings = this.fieldState.settingExt('AutoGenerateMask');\r\n\r\n  /**\r\n   * Blocks external update if field was changed manually and doesn't match external updates.\r\n   * WARNING: Doesn't work on language change\r\n   * TODO: MAKE work on language change\r\n   */\r\n  #lastAutoCopy = signal('');\r\n\r\n  /** The Field-Mask Helper which will continuously parse the result */\r\n  #fieldMask = transient(FieldMask)\r\n    // .logChanges()\r\n    .initPreClean((_, value) => typeof value === 'string' ? value.replace('/', '-').replace('\\\\', '-') : value)\r\n    .initSignal('UrlPath', this.#maskFromSettings);\r\n\r\n  /** The cleaned value, ready for broadcasting back to the field */\r\n  #maskedValueCleaned = computed(() => {\r\n    const newValue = this.#fieldMask.result();\r\n    return UrlHelpers.stripNonUrlCharacters(newValue, this.settings().AllowSlashes, true);\r\n  });\r\n\r\n  constructor() {\r\n    StringUrlPathSettingsHelper.importMe();\r\n\r\n    // Listen to value changes to correct spaces and other non-allowed characters\r\n    effect(() => {\r\n      const _ = this.fieldState.uiValue();\r\n      this.clean(false);\r\n    });\r\n\r\n    // Listen to the mask changes to update the field\r\n    effect(() => this.#publishFieldMaskResult(this.#maskedValueCleaned()));\r\n  }\r\n\r\n\r\n  #publishFieldMaskResult(cleanedNewValue: string) {\r\n    const l = this.log.fn('#onSourcesChanged', { newValue: cleanedNewValue });\r\n\r\n    const v = {\r\n      uiValue: this.fieldState.uiValue(),\r\n      lastAutoCopy: this.#lastAutoCopy(),\r\n      allowSlashes: this.settings().AllowSlashes,\r\n      cleaned: cleanedNewValue,\r\n    };\r\n\r\n    // Exit early if the UI is a) not empty and b) doesn't have the last copy of the stripped value\r\n    if (v.uiValue && (v.uiValue !== v.lastAutoCopy))\r\n      return l.end(`UI not empty but manually modified, so no auto-update`, v);\r\n\r\n    if (!v.cleaned)\r\n      return l.end('cleaned is empty', v);\r\n\r\n    if (v.uiValue === v.cleaned)\r\n      return l.end('no changes', v);\r\n\r\n    this.#lastAutoCopy.set(v.cleaned);\r\n    this.fieldState.ui().setIfChanged(v.cleaned);\r\n    l.end(`updated to \"${v.cleaned}\"`, v);\r\n  }\r\n\r\n  clean(trimEnd: boolean) {\r\n    const l = this.log.fn('clean', { trimEnd });\r\n    const value = this.fieldState.uiValue();\r\n    const cleaned = UrlHelpers.stripNonUrlCharacters(value, this.settings().AllowSlashes, trimEnd);\r\n    this.fieldState.ui().setIfChanged(cleaned);\r\n  }\r\n}\r\n","<mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n  <input matInput class=\"eav-translate-on-dblclick\"\r\n    [formControlName]=\"fieldState.name\"\r\n    (blur)=\"clean(true)\"\r\n    [placeholder]=\"basics().placeholder\"\r\n    [required]=\"basics().required\">\r\n  <mat-label>{{ basics().label }}</mat-label>\r\n</mat-form-field>\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { AdamConfig } from '../../../../../../../../edit-types/src/AdamConfig';\r\nimport { FieldConfigSet } from '../../../field-config-set.model';\r\n\r\nexport class AdamConfigInstance implements AdamConfig {\r\n  //#region Field settings\r\n  rootSubfolder = '';\r\n  fileFilter = '';\r\n  allowAssetsInRoot = true;\r\n  folderDepth = 0;\r\n  metadataContentTypes = '';\r\n  //#endregion\r\n\r\n  //#region Toggle\r\n  usePortalRoot = false;\r\n  showImagesOnly = false;\r\n  //#endregion\r\n\r\n  //#region Calculated\r\n  autoLoad = false;\r\n  enableSelect = true;\r\n  subfolder = '';\r\n  allowEdit = true;\r\n  disabled = true;\r\n  maxDepthReached = false;\r\n  //#endregion\r\n\r\n  constructor(disabled: boolean) {\r\n    this.disabled = disabled;\r\n  }\r\n\r\n  static completeConfig(config: Partial<AdamConfig>, fieldConfig: FieldConfigSet, oldConfig?: AdamConfigInstance): AdamConfigInstance {\r\n    // set new values and use old ones where new value is not provided\r\n    const startDisabled = fieldConfig.inputTypeSpecs.isExternal;\r\n    oldConfig = oldConfig ?? new AdamConfigInstance(startDisabled);\r\n    const newConfig = new AdamConfigInstance(startDisabled);\r\n\r\n    for (const key of Object.keys(newConfig))\r\n      (newConfig as any)[key] = (config as any)[key] ?? (oldConfig as any)[key];\r\n\r\n    // fixes\r\n    const resetSubfolder = oldConfig.usePortalRoot !== newConfig.usePortalRoot;\r\n    if (resetSubfolder)\r\n      newConfig.subfolder = '';\r\n\r\n    if (newConfig.usePortalRoot) {\r\n      const fixBackSlashes = newConfig.rootSubfolder.includes('\\\\');\r\n      if (fixBackSlashes)\r\n        newConfig.rootSubfolder = newConfig.rootSubfolder.replace(/\\\\/g, '/');\r\n      const fixStartingSlash = newConfig.rootSubfolder.startsWith('/');\r\n      if (fixStartingSlash)\r\n        newConfig.rootSubfolder = newConfig.rootSubfolder.replace('/', '');\r\n      const fixRoot = !newConfig.subfolder.startsWith(newConfig.rootSubfolder);\r\n      if (fixRoot)\r\n        newConfig.subfolder = newConfig.rootSubfolder;\r\n      newConfig.maxDepthReached = false; // when using portal root depth is infinite\r\n    }\r\n\r\n    if (!newConfig.usePortalRoot) {\r\n      const currentDepth = newConfig.subfolder ? newConfig.subfolder.split('/').length : 0;\r\n      const fixDepth = currentDepth >= newConfig.folderDepth;\r\n      if (fixDepth) {\r\n        let folders = newConfig.subfolder.split('/');\r\n        folders = folders.slice(0, newConfig.folderDepth);\r\n        newConfig.subfolder = folders.join('/');\r\n        newConfig.maxDepthReached = true;\r\n      } else\r\n        newConfig.maxDepthReached = false;\r\n    }\r\n\r\n    return newConfig;\r\n  }\r\n\r\n}\r\n","<div class=\"dropzone\" [@adamShowAnimate]=\"adamConfig()?.autoLoad ? 'open' : 'closed'\">\r\n  @if (adamConfig()?.autoLoad && this.fieldState.isOpen()) {\r\n    <div\r\n      [ngClass]=\"{\r\n        'adam-scope-site': adamConfig().usePortalRoot,\r\n        'adam-scope-field': !adamConfig().usePortalRoot,\r\n      }\"\r\n    >\r\n      @if (!disabled() && allowAddButtons()) {\r\n        <!-- click to upload -->\r\n        <div class=\"dz-preview dropzone-adam\" (click)=\"openUploadClick($event)\" tippyTranslate=\"Fields.Hyperlink.AdamFileManager.UploadTip\">\r\n          <div class=\"dz-image adam-browse-background-icon adam-browse-background\">\r\n            <mat-icon>cloud_upload</mat-icon>\r\n            <div class=\"adam-upload-label\">\r\n              {{ 'Fields.Hyperlink.AdamFileManager.UploadLabel' | translate }}\r\n              &nbsp;\r\n              @if (adamConfig().usePortalRoot) {\r\n                <mat-icon>public</mat-icon>\r\n              } @else {\r\n                <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- paste image from clipboard -->\r\n        <div\r\n          #pasteDiv\r\n          appPasteClipboardImage\r\n          [config]=\"config\"\r\n          [elementType]=\"'element'\"\r\n          class=\"dz-preview dropzone-adam paste-image\"\r\n          tippyTranslate=\"Fields.Hyperlink.AdamFileManager.UploadPasteTip\"\r\n          (click)=\"openFeatureInfoDialog()\"\r\n        >\r\n          <div class=\"dz-image adam-browse-background-icon adam-browse-background\">\r\n            <mat-icon\r\n              class=\"adam-filter-mat-icon-with-grey-mat-badge\"\r\n              [matBadgeHidden]=\"isPasteImageFromClipboardEnabled()\"\r\n              matBadgeSize=\"large\"\r\n              matBadge=\"\"\r\n              matBadgePosition=\"below after\"\r\n              matBadgeOverlap=\"true\"\r\n              aria-hidden=\"false\"\r\n            >\r\n              filter\r\n            </mat-icon>\r\n\r\n            <!-- TODO: @2dm -->\r\n            <div class=\"adam-upload-label\">\r\n              {{\r\n                !isPasteImageFromClipboardEnabled()\r\n                  ? 'Fields.Hyperlink.AdamFileManager.UploadPasteLabel'\r\n                  : pasteDiv.classList.contains('pastable-focus')\r\n                    ? 'Fields.Hyperlink.AdamFileManager.UploadPasteFocusedLabel'\r\n                    : ('Fields.Hyperlink.AdamFileManager.UploadPasteLabel' | translate)\r\n              }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      }\r\n      <!-- add folder -->\r\n      @if (!adamConfig().maxDepthReached && !disabled() && allowAddButtons()) {\r\n        <div class=\"dz-preview\" (click)=\"addFolder()\" tippyTranslate=\"Fields.Hyperlink.AdamFileManager.NewFolderTip\">\r\n          <div class=\"dz-image adam-browse-background-icon adam-browse-background\">\r\n            <mat-icon svgIcon=\"folder-plus\"></mat-icon>\r\n            <div class=\"adam-short-label\">{{ 'Fields.Hyperlink.AdamFileManager.NewFolder' | translate }}</div>\r\n          </div>\r\n          <div class=\"dz-details\" style=\"opacity: 1\"></div>\r\n        </div>\r\n      }\r\n      <!-- browse up a folder -->\r\n      @if (adamConfig().subfolder !== '' || (adamConfig().usePortalRoot && adamConfig().subfolder !== adamConfig().rootSubfolder)) {\r\n        <div class=\"dz-preview\" (click)=\"goUp()\" tippyTranslate=\"Fields.Hyperlink.AdamFileManager.BackFolderTip\">\r\n          <div class=\"dz-image adam-browse-background-icon adam-browse-background\">\r\n            <mat-icon svgIcon=\"folder\"></mat-icon>\r\n            <div class=\"adam-short-label\">{{ 'Fields.Hyperlink.AdamFileManager.BackFolder' | translate }}</div>\r\n          </div>\r\n          <div class=\"adam-background adam-browse-background-icon\">\r\n            <mat-icon class=\"adam-back-folder-arrow\">arrow_back</mat-icon>\r\n          </div>\r\n        </div>\r\n      }\r\n      @for (item of items(); track item.Id) {\r\n        <!-- folders -->\r\n        @if (item.IsFolder) {\r\n          <div class=\"dz-preview\" (click)=\"goIntoFolder(item)\">\r\n            <div class=\"dz-image adam-blur adam-browse-background-icon adam-browse-background\">\r\n              <mat-icon svgIcon=\"folder\"></mat-icon>\r\n              <div class=\"short-label\">{{ item.Name }}</div>\r\n            </div>\r\n            <div class=\"dz-details file-type-{{ item.Type }}\">\r\n              @if (adamConfig().allowEdit) {\r\n                <mat-icon\r\n                  (click)=\"del(item)\"\r\n                  appClickStopPropagation\r\n                  class=\"adam-delete-button\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Delete\"\r\n                  [ngClass]=\"{ 'adam-button-disabled': disabled() }\"\r\n                  >clear</mat-icon\r\n                >\r\n\r\n                <mat-icon\r\n                  (click)=\"rename(item)\"\r\n                  appClickStopPropagation\r\n                  class=\"adam-rename-button\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Edit\"\r\n                  [ngClass]=\"{ 'adam-button-disabled': disabled() }\"\r\n                  >edit</mat-icon\r\n                >\r\n              }\r\n              <div class=\"adam-full-name-area\">\r\n                <div class=\"adam-full-name\" [title]=\"item.Name\">{{ item.Name }}</div>\r\n              </div>\r\n            </div>\r\n            @if (item._metadataContentType) {\r\n              <mat-icon\r\n                class=\"adam-tag\"\r\n                appClickStopPropagation\r\n                [ngClass]=\"{ 'metadata-exists': item._metadataId > 0 }\"\r\n                tippy=\"{{ item._metadataContentType }}: {{ item._metadataId }}\"\r\n                (click)=\"editItemMetadata(item, item._metadataContentType, item._metadataId)\"\r\n                >local_offer</mat-icon\r\n              >\r\n            }\r\n          </div>\r\n        }\r\n        <!-- files -->\r\n        @if (!item.IsFolder) {\r\n          <div\r\n            class=\"dz-preview\"\r\n            (click)=\"select(item)\"\r\n            [ngClass]=\"{\r\n              'dz-success': value() === 'file:' + item.Id,\r\n              'disable-select': !adamConfig().enableSelect,\r\n            }\"\r\n          >\r\n            @if (item.Type !== 'image') {\r\n              <div class=\"dz-image adam-blur adam-browse-background-icon adam-browse-background\">\r\n                <mat-icon>{{ item._icon }}</mat-icon>\r\n                <div class=\"adam-short-label\">{{ item.Name }}</div>\r\n              </div>\r\n            } @else {\r\n              <div class=\"dz-image adam-browse-background-image\">\r\n                <img vm-dz-thumbnail=\"\" [alt]=\"item.Id + ':' + item.Name\" [src]=\"item.ThumbnailUrl\" />\r\n              </div>\r\n            }\r\n            <div class=\"dz-details file-type-{{ item.Type }}\">\r\n              @if (adamConfig().allowEdit) {\r\n                <mat-icon\r\n                  (click)=\"del(item)\"\r\n                  appClickStopPropagation\r\n                  class=\"adam-delete-button\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Delete\"\r\n                  [ngClass]=\"{ 'adam-button-disabled': disabled() }\"\r\n                  >clear</mat-icon\r\n                >\r\n\r\n                <mat-icon\r\n                  (click)=\"rename(item)\"\r\n                  appClickStopPropagation\r\n                  class=\"adam-rename-button\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Edit\"\r\n                  [ngClass]=\"{ 'adam-button-disabled': disabled() }\"\r\n                  >edit</mat-icon\r\n                >\r\n              }\r\n              <div class=\"adam-full-name-area\">\r\n                <div class=\"adam-full-name\" [title]=\"item.Name\">{{ item.Name }}</div>\r\n              </div>\r\n              <div class=\"dz-filename adam-short-label\" appClickStopPropagation title=\"#{{ item.Id }} - {{ item._displaySize }} KB\">\r\n                <span>#{{ item.Id }} - {{ item._displaySize }} KB</span>\r\n              </div>\r\n              <a class=\"adam-link-button\" target=\"_blank\" [href]=\"item.Url\" appClickStopPropagation>\r\n                <mat-icon tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Show\">open_in_new</mat-icon>\r\n              </a>\r\n              @if (item.Type === 'image') {\r\n                <mat-icon\r\n                  class=\"image-configuration-button\"\r\n                  appClickStopPropagation\r\n                  [ngClass]=\"{\r\n                    'adam-button-disabled': !item._imageConfigurationContentType,\r\n                    'metadata-exists': item._imageConfigurationId > 0,\r\n                  }\"\r\n                  [tippyTranslate]=\"\r\n                    item._imageConfigurationContentType\r\n                      ? 'Fields.Hyperlink.AdamFileManager.ImageSettings'\r\n                      : 'Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled'\r\n                  \"\r\n                  (click)=\"editItemMetadata(item, item._imageConfigurationContentType, item._imageConfigurationId)\"\r\n                >\r\n                  filter_center_focus</mat-icon\r\n                >\r\n              }\r\n            </div>\r\n            @if (item._metadataContentType) {\r\n              <mat-icon\r\n                class=\"adam-tag\"\r\n                appClickStopPropagation\r\n                [ngClass]=\"{ 'metadata-exists': item._metadataId > 0 }\"\r\n                tippy=\"{{ item._metadataContentType }}: {{ item._metadataId }}\"\r\n                (click)=\"editItemMetadata(item, item._metadataContentType, item._metadataId)\"\r\n                >local_offer</mat-icon\r\n              >\r\n            }\r\n            <div class=\"dz-success-mark\">\r\n              <svg\r\n                width=\"54px\"\r\n                height=\"54px\"\r\n                viewBox=\"0 0 54 54\"\r\n                version=\"1.1\"\r\n                xmlns=\"https://www.w3.org/2000/svg\"\r\n                xmlns:xlink=\"https://www.w3.org/1999/xlink\"\r\n                xmlns:sketch=\"https://www.bohemiancoding.com/sketch/ns\"\r\n              >\r\n                <title>Check</title>\r\n                <defs></defs>\r\n                <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\r\n                  <path\r\n                    d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\"\r\n                    id=\"Oval-2\"\r\n                    stroke-opacity=\"0.198794158\"\r\n                    stroke=\"#747474\"\r\n                    fill-opacity=\"0.816519475\"\r\n                    fill=\"#FFFFFF\"\r\n                    sketch:type=\"MSShapeGroup\"\r\n                  ></path>\r\n                </g>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        }\r\n      }\r\n    </div>\r\n  }\r\n</div>\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { animate, state, style, transition, trigger } from '@angular/animations';\r\nimport { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, effect, inject, OnInit, output, ViewContainerRef } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { ItemIdHelper } from 'projects/eav-ui/src/app/shared/models/item-id-helper';\r\nimport { transient } from '../../../../../../../../core/transient';\r\nimport { AdamConfig } from '../../../../../../../../edit-types/src/AdamConfig';\r\nimport { AdamItem } from '../../../../../../../../edit-types/src/AdamItem';\r\nimport { FeatureNames } from '../../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../../features/features.service';\r\nimport { openFeatureDialog } from '../../../../../features/shared/feature-component-base';\r\nimport { eavConstants } from '../../../../../shared/constants/eav.constants';\r\nimport { ClickStopPropagationDirective } from '../../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../../shared/logging';\r\nimport { EditForm } from '../../../../../shared/models/edit-form.model';\r\nimport { DialogRoutingService } from '../../../../../shared/routing/dialog-routing.service';\r\nimport { computedObj, signalObj } from '../../../../../shared/signals/signal.utilities';\r\nimport { FormsStateService } from '../../../../form/forms-state.service';\r\nimport { EditRoutingService } from '../../../../routing/edit-routing.service';\r\nimport { AdamCacheService } from '../../../../shared/adam/adam-cache.service';\r\nimport { AdamService } from '../../../../shared/adam/adam.service';\r\nimport { LinkCacheService } from '../../../../shared/adam/link-cache.service';\r\nimport { FileTypeHelpers } from '../../../../shared/helpers';\r\nimport { PasteClipboardImageDirective } from '../../../directives/paste-clipboard-image.directive';\r\nimport { FieldState } from '../../../field-state';\r\nimport { AdamConfigInstance } from './adam-browser.models';\r\nimport { AdamConnector } from './adam-connector';\r\nimport { fixDropzone } from './dropzone-helper';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  editItemMetadata: false,\r\n  setConfig: false,\r\n  fetchItems: true,\r\n  processFetchedItems: true,\r\n}\r\n\r\n@Component({\r\n  // tslint:disable-next-line:component-selector\r\n  selector: 'adam-browser',\r\n  templateUrl: './adam-browser.html',\r\n  styleUrls: ['./adam-browser.scss'],\r\n  animations: [\r\n    trigger('adamShowAnimate', [\r\n      state('closed', style({\r\n        height: '0',\r\n        overflow: 'hidden',\r\n      })),\r\n      state('open', style({\r\n        height: '*',\r\n        overflow: 'hidden',\r\n      })),\r\n      transition('closed => open', [\r\n        animate('300ms cubic-bezier(0.4, 0.0, 0.2, 1)'),\r\n      ]),\r\n    ]),\r\n  ],\r\n  imports: [\r\n    NgClass,\r\n    MatIconModule,\r\n    PasteClipboardImageDirective,\r\n    MatBadgeModule,\r\n    TranslateModule,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n  ]\r\n})\r\nexport class AdamBrowserComponent implements OnInit {\r\n\r\n  openUpload = output<void>();\r\n\r\n  log = classLog({ AdamBrowserComponent }, logSpecs);\r\n\r\n  protected fieldState = inject(FieldState);\r\n  #editRoutingService = inject(EditRoutingService);\r\n  #features = inject(FeaturesService);\r\n\r\n  #adamService = transient(AdamService);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dnnContext: DnnContext,\r\n    private adamCacheService: AdamCacheService,\r\n    private linkCacheService: LinkCacheService,\r\n    private formsStateService: FormsStateService,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    const l = this.log.fnIf('constructor');\r\n    // Ensure that we fetch items when we have the configuration\r\n    effect(() => {\r\n      const adamConfig = this.adamConfig();\r\n      if (adamConfig == null) return;\r\n      this.fetchItems();\r\n    });\r\n\r\n    const cnf = this.config;\r\n    this.#url = this.dnnContext.$2sxc.http.apiUrl(`app/auto/data/${cnf.contentTypeNameId}/${cnf.entityGuid}/${cnf.fieldName}`);\r\n  }\r\n\r\n  protected config = this.fieldState.config;\r\n  protected group = this.fieldState.group;\r\n  #ui = this.fieldState.ui;\r\n\r\n  protected disabled = computedObj('disabled', () => this.#ui().disabled);\r\n\r\n  protected value = computedObj('value', () => this.fieldState.uiValue());\r\n\r\n  public adamConfig = signalObj<AdamConfig>('adamConfig', null); // here the change detection is critical\r\n  public items = signalObj<AdamItem[]>('items', []);\r\n\r\n  #url: string;\r\n  #firstFetch = true;\r\n\r\n  allowAddButtons = computedObj('allowAddButtons', () => {\r\n    const cnf = this.adamConfig();\r\n    return cnf.allowEdit && !((cnf.subfolder === '' || cnf.usePortalRoot && cnf.subfolder === cnf.rootSubfolder) && !cnf.allowAssetsInRoot)\r\n  });\r\n\r\n  protected isPasteImageFromClipboardEnabled = this.#features.isEnabled[FeatureNames.PasteImageFromClipboard];\r\n\r\n  ngOnInit() {\r\n    // Update data if a child-form closes\r\n    this.#dialogRouter.doOnDialogClosed(() => this.fetchItems());\r\n\r\n    // Attach this browser to the AdamConnector\r\n    (this.config.adam as AdamConnector).setBrowser(this);\r\n  }\r\n\r\n  addFolder() {\r\n    if (this.#ui().disabled) return;\r\n\r\n    const folderName = window.prompt('Please enter a folder name'); // todo i18n\r\n    if (!folderName) return;\r\n\r\n    this.#adamService.addFolder(folderName, this.#url, this.adamConfig())\r\n      .subscribe(() => this.fetchItems());\r\n  }\r\n\r\n  del(item: AdamItem) {\r\n    if (this.#ui().disabled) return;\r\n\r\n    const ok = window.confirm('Are you sure you want to delete this item?'); // todo i18n\r\n    if (!ok) return;\r\n\r\n    this.#adamService.deleteItemPromise(item, this.#url, this.adamConfig())\r\n      .then(() => this.fetchItems());\r\n  }\r\n\r\n  editItemMetadata(adamItem: AdamItem, contentTypeName: string, metadataId: number) {\r\n    const l = this.log.fnIf('editItemMetadata', { adamItem, contentTypeName, metadataId });\r\n    if (this.formsStateService.readOnly().isReadOnly || !contentTypeName)\r\n      return l.end('readonly or no content type');\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        metadataId > 0\r\n          ? ItemIdHelper.editId(metadataId)\r\n          : ItemIdHelper.newMetadata(adamItem.ReferenceId, contentTypeName, eavConstants.metadata.cmsObject),\r\n      ],\r\n    };\r\n    this.#editRoutingService.open(this.config.index, this.config.entityGuid, form);\r\n  }\r\n\r\n  goUp() {\r\n    let subfolder = this.adamConfig().subfolder;\r\n    subfolder = subfolder.includes('/') ? subfolder.slice(0, subfolder.lastIndexOf('/')) : '';\r\n    this.setConfig({ subfolder });\r\n  }\r\n\r\n  #getImageConfigurationContentType(item: AdamItem) {\r\n    // allow image configuration if file is type image and if image configuration is enabled in settings\r\n    const settings = this.fieldState.settings();\r\n    return settings.EnableImageConfiguration && item.Type === 'image'\r\n      ? eavConstants.contentTypes.imageDecorator\r\n      : null;\r\n  }\r\n\r\n  #getMetadataContentType(item: AdamItem) {\r\n    let found: string[];\r\n\r\n    // check if it's a folder and if this has a special registration\r\n    if (item.Type === 'folder') {\r\n      found = this.adamConfig().metadataContentTypes.match(/^(folder)(:)([^\\n]*)/im);\r\n      if (found) {\r\n        return found[3];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    // check if the extension has a special registration\r\n    // -- not implemented yet\r\n\r\n    // check if the type \"image\" or \"document\" has a special registration\r\n    // -- not implemented yet\r\n\r\n    // nothing found so far, go for the default with nothing as the prefix\r\n    found = this.adamConfig().metadataContentTypes.match(/^([^:\\n]*)(\\n|$)/im);\r\n    if (found) { return found[1]; }\r\n\r\n    // this is if we don't find anything\r\n    return null;\r\n  }\r\n\r\n  goIntoFolder(item: AdamItem) {\r\n    let subfolder = this.adamConfig().subfolder;\r\n    subfolder = subfolder ? `${subfolder}/${item.Name}` : item.Name;\r\n    this.setConfig({ subfolder });\r\n  }\r\n\r\n  openUploadClick(event: MouseEvent) {\r\n    this.openUpload.emit();\r\n  }\r\n\r\n  rename(item: AdamItem) {\r\n    if (this.#ui().disabled) return;\r\n\r\n    const newName = window.prompt('Rename the file / folder to: ', item.Name); // todo i18n\r\n    if (!newName) return;\r\n\r\n    this.#adamService.renamePromise(item, newName, this.#url, this.adamConfig())\r\n      .then(() => this.fetchItems());\r\n  }\r\n\r\n  select(item: AdamItem) {\r\n    if (this.#ui().disabled || !this.adamConfig().enableSelect) return;\r\n    this.config.adam.onItemClick(item);\r\n  }\r\n\r\n  /**\r\n   * Note: since all fetch-items happen in a timeout or subscribe, it doesn't need to be in the NgZone\r\n   * @returns\r\n   */\r\n  public fetchItems() {\r\n    const adamConfig = this.adamConfig();\r\n    const l = this.log.fnIf('fetchItems', { adamConfig, firstFetch: this.#firstFetch, usePortalRoot: adamConfig?.usePortalRoot });\r\n    if (adamConfig == null) return;\r\n    if (!adamConfig.autoLoad) return;\r\n\r\n    if (this.#firstFetch) {\r\n      this.#firstFetch = false;\r\n      const adamItems = this.adamCacheService.getAdamSnapshot(this.config.entityGuid, this.config.fieldName);\r\n      if (adamItems) {\r\n        const clonedItems = adamItems.map(adamItem => ({ ...adamItem } satisfies AdamItem));\r\n        setTimeout(() => this.#processFetchedItems(clonedItems, adamConfig));\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.#adamService.getAllPromise(this.#url, adamConfig)\r\n      .then(items => this.#processFetchedItems(items, adamConfig));\r\n  }\r\n\r\n  openFeatureInfoDialog() {\r\n    if (!this.isPasteImageFromClipboardEnabled())\r\n      openFeatureDialog(this.matDialog, FeatureNames.PasteImageFromClipboard, this.viewContainerRef, this.changeDetectorRef);\r\n  }\r\n\r\n  #processFetchedItems(items: AdamItem[], adamConfig: AdamConfig): void {\r\n    const l = this.log.fnIf('processFetchedItems', { items, adamConfig, usePortalRoot: adamConfig.usePortalRoot });\r\n    this.linkCacheService.addAdam(items);\r\n\r\n    const filteredItems: AdamItem[] = [];\r\n    const extensionsFilter = getExtensionsFilter(adamConfig.fileFilter);\r\n\r\n    for (const item of items) {\r\n      if (item.Name === '.') { // is root\r\n        const allowEdit = item.AllowEdit;\r\n        if (allowEdit !== adamConfig.allowEdit)\r\n          this.setConfig({ allowEdit });\r\n        continue;\r\n      }\r\n      if (item.Name === '2sxc' || item.Name === 'adam')\r\n        continue;\r\n      if (!item.IsFolder && adamConfig.showImagesOnly && item.Type !== 'image')\r\n        continue;\r\n      if (item.IsFolder && adamConfig.maxDepthReached)\r\n        continue;\r\n      if (extensionsFilter.length > 0) {\r\n        const extension = item.Name.substring(item.Name.lastIndexOf('.') + 1).toLocaleLowerCase();\r\n        if (!extensionsFilter.includes(extension)) continue;\r\n      }\r\n\r\n      item._imageConfigurationContentType = this.#getImageConfigurationContentType(item);\r\n      item._imageConfigurationId = item.Metadata?.find(m => m.Type.Name === item._imageConfigurationContentType)?.Id ?? 0;\r\n      item._metadataContentType = this.#getMetadataContentType(item);\r\n      item._metadataId = item.Metadata?.find(m => m.Type.Name === item._metadataContentType)?.Id ?? 0;\r\n      item._icon = FileTypeHelpers.getIconClass(item.Name);\r\n      item._isMaterialIcon = FileTypeHelpers.isKnownType(item.Name);\r\n      item._displaySize = (item.Size / 1024).toFixed(0);\r\n      filteredItems.push(item);\r\n    }\r\n\r\n    filteredItems.sort((a, b) => a.Name.toLocaleLowerCase().localeCompare(b.Name.toLocaleLowerCase()));\r\n    filteredItems.sort((a, b) => b.IsFolder.toString().localeCompare(a.IsFolder.toString()));\r\n    this.items.set(filteredItems);\r\n  }\r\n\r\n  public setConfig(config: Partial<AdamConfig>) {\r\n    const l = this.log.fnIf('setConfig', config);\r\n    const newConfig = AdamConfigInstance.completeConfig(config, this.config, this.adamConfig());\r\n\r\n    // There is a high risk of infinite loops here, so we need to ensure that we don't do this too often\r\n    if (isEqual(newConfig, this.adamConfig())) {\r\n      l.end('no change');\r\n      return;\r\n    }\r\n\r\n    this.adamConfig.set(newConfig);\r\n    fixDropzone(newConfig, this.config);\r\n    l.end();\r\n  }\r\n\r\n\r\n  public toggle(usePortalRoot: boolean, showImagesOnly: boolean) {\r\n    const newConfig: AdamConfig = { ...this.adamConfig(), ...{ usePortalRoot, showImagesOnly } };\r\n\r\n    if (isEqual(newConfig, this.adamConfig()))\r\n      newConfig.autoLoad = !newConfig.autoLoad;\r\n    else if (!newConfig.autoLoad)\r\n      newConfig.autoLoad = true;\r\n\r\n    this.setConfig(newConfig);\r\n  }\r\n}\r\n\r\nfunction getExtensionsFilter(fileFilter: string) {\r\n  if (!fileFilter) return [];\r\n\r\n  const extensions = fileFilter.split(',').map(extension => {\r\n    extension = extension.trim();\r\n\r\n    if (extension.startsWith('*.'))\r\n      extension = extension.replace('*.', '');\r\n    else if (extension.startsWith('*'))\r\n      extension = extension.replace('*', '');\r\n\r\n    return extension.toLocaleLowerCase();\r\n  });\r\n\r\n  return extensions;\r\n}\r\n\r\n","import { DropzoneConfigExt } from '../../../../../../../../edit-types/src/DropzoneConfigExt';\r\nimport { UrlHelpers } from '../../../../shared/helpers';\r\nimport { FieldConfigSet } from '../../../field-config-set.model';\r\nimport { AdamConfigInstance } from './adam-browser.models';\r\n\r\nexport function fixDropzone(newConfig: AdamConfigInstance, fieldConfig: FieldConfigSet) {\r\n  const oldDzConfig = fieldConfig.dropzone.getConfig();\r\n  const newDzConfig: Partial<DropzoneConfigExt> = {};\r\n  const dzUrlParams = UrlHelpers.getUrlParams(oldDzConfig.url as string);\r\n  const dzSubfolder = dzUrlParams.subfolder || '';\r\n  const dzUsePortalRoot = dzUrlParams.usePortalRoot;\r\n  const fixUploadUrl = dzSubfolder !== newConfig.subfolder || dzUsePortalRoot !== newConfig.usePortalRoot.toString();\r\n\r\n  if (fixUploadUrl) {\r\n    let newUrl = oldDzConfig.url as string;\r\n    newUrl = UrlHelpers.replaceUrlParam(newUrl, 'subfolder', newConfig.subfolder);\r\n    newUrl = UrlHelpers.replaceUrlParam(newUrl, 'usePortalRoot', newConfig.usePortalRoot.toString());\r\n    newDzConfig.url = newUrl;\r\n  }\r\n\r\n  const uploadDisabled = !newConfig.allowEdit\r\n    || (\r\n      (newConfig.subfolder === '' || newConfig.usePortalRoot && newConfig.subfolder === newConfig.rootSubfolder)\r\n      && !newConfig.allowAssetsInRoot\r\n    );\r\n\r\n  const fixDisabled = oldDzConfig.disabled !== uploadDisabled;\r\n  if (fixDisabled)\r\n    newDzConfig.disabled = uploadDisabled;\r\n\r\n  if (Object.keys(newDzConfig).length > 0)\r\n    fieldConfig.dropzone.setConfig(newDzConfig);\r\n}\r\n","<mat-divider></mat-divider>\r\n\r\n<div class=\"hint-box u-border-radius-bottom mat-caption u-shadow-top\">\r\n  <div class=\"hint-box__hint\">{{ \"Fields.Hyperlink.AdamFileManager.Hint\" | translate }}</div>\r\n  <div class=\"hint-box__sponsor\">\r\n    <a\r\n      href=\"https://2sxc.org/help?tag=adam\"\r\n      target=\"_blank\"\r\n      tabindex=\"-1\"\r\n      class=\"adam-link\"\r\n      tippyTranslate=\"Fields.Hyperlink.AdamFileManager.HelpTooltip\"\r\n    >\r\n      <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n      <span>{{ \"Fields.Hyperlink.AdamFileManager.Name\" | translate }}</span>\r\n    </a>\r\n    @if (!hideAdamSponsor()) {\r\n      &nbsp;\r\n      <span>{{ \"Fields.Hyperlink.AdamFileManager.SponsorLine\" | translate }}</span>\r\n      &nbsp;\r\n      <a href=\"https://www.2sic.com\" target=\"_blank\" tabindex=\"-1\">2sic.com</a>\r\n    }\r\n  </div>\r\n</div>\r\n","import { Component, inject } from '@angular/core';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FeaturesService } from '../../../../../features/features.service';\r\nimport { TippyDirective } from '../../../../../shared/directives/tippy.directive';\r\nimport { FeatureNames } from './../../../../../features/feature-names';\r\n\r\n@Component({\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'adam-hint',\r\n    templateUrl: './adam-hint.html',\r\n    styleUrls: ['./adam-hint.scss'],\r\n    imports: [\r\n        MatDividerModule,\r\n        MatIconModule,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class AdamHintComponent {\r\n  public features = inject(FeaturesService);\r\n  protected hideAdamSponsor = this.features.isEnabled[FeatureNames.NoSponsoredByToSic];\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, ElementRef, inject, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\nimport { AdamBrowserComponent } from './adam-browser/adam-browser';\r\nimport { AdamHintComponent } from './adam-hint/adam-hint';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.AdamWrapper,\r\n    templateUrl: './adam-wrapper.html',\r\n    styleUrls: ['./adam-wrapper.scss'],\r\n    imports: [\r\n        AdamBrowserComponent,\r\n        NgClass,\r\n        AdamHintComponent,\r\n    ]\r\n})\r\nexport class AdamWrapperComponent implements OnInit {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n  @ViewChild('invisibleClickable') invisibleClickableRef: ElementRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected config = this.fieldState.config;\r\n\r\n  constructor() { }\r\n\r\n  fullscreenAdam: boolean;\r\n  adamDisabled = this.config.adam.isDisabled;\r\n\r\n\r\n  ngOnInit() {\r\n    this.fullscreenAdam = this.config.inputTypeSpecs.inputType === InputTypeCatalog.HyperlinkLibrary;\r\n  }\r\n\r\n  openUpload() {\r\n    this.invisibleClickableRef.nativeElement.click();\r\n  }\r\n}\r\n","<div [ngClass]=\"{ 'adam-in-popup': this.fieldState.isOpen(), 'c-ew__dialog-content--empty': fullscreenAdam }\">\r\n  <div class=\"adam-dialog-content\">\r\n    <ng-container #fieldComponent></ng-container>\r\n  </div>\r\n  <adam-browser\r\n    (openUpload)=\"openUpload()\"\r\n    class=\"u-shadow-top\"\r\n    [ngClass]=\"{\r\n      'adam-browser-container--short u-hide-scrollbar': !fullscreenAdam,\r\n      'u-display-none': adamDisabled(),\r\n    }\"\r\n  >\r\n  </adam-browser>\r\n  <div class=\"{{ config.dropzonePreviewsClass }}\" [ngClass]=\"{ 'u-display-none': adamDisabled() }\">\r\n    <div class=\"dropzone-previews\"></div>\r\n    <span #invisibleClickable class=\"invisible-clickable\" data-note=\"just a fake, invisible area for dropzone\"></span>\r\n  </div>\r\n  <adam-hint class=\"field-hints\" [ngClass]=\"{ 'u-display-none': adamDisabled() }\"></adam-hint>\r\n</div>\r\n","import * as i0 from '@angular/core';\nimport { InjectionToken, EventEmitter, PLATFORM_ID, Directive, Inject, Optional, Input, Output, Component, ViewEncapsulation, ViewChild, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport { Dropzone } from 'dropzone';\n\nconst DROPZONE_CONFIG = new InjectionToken('DROPZONE_CONFIG');\nconst DropzoneEvents = [\n    'error',\n    'success',\n    'sending',\n    'canceled',\n    'complete',\n    'processing',\n    'drop',\n    'dragStart',\n    'dragEnd',\n    'dragEnter',\n    'dragOver',\n    'dragLeave',\n    'thumbnail',\n    'addedFile',\n    'addedFiles',\n    'removedFile',\n    'uploadProgress',\n    'maxFilesReached',\n    'maxFilesExceeded',\n    'errorMultiple',\n    'successMultiple',\n    'sendingMultiple',\n    'canceledMultiple',\n    'completeMultiple',\n    'processingMultiple',\n    'reset',\n    'queueComplete',\n    'totalUploadProgress'\n];\nclass DropzoneConfig {\n    timeout;\n    autoReset;\n    errorReset;\n    cancelReset;\n    url;\n    method;\n    params;\n    headers;\n    init;\n    accept;\n    resize;\n    fallback;\n    renameFile;\n    transformFile;\n    chunksUploaded;\n    withCredentials;\n    previewsContainer;\n    hiddenInputContainer;\n    clickable;\n    paramName;\n    capture;\n    maxFiles;\n    maxFilesize;\n    filesizeBase;\n    acceptedFiles;\n    forceFallback;\n    addRemoveLinks;\n    uploadMultiple;\n    parallelUploads;\n    resizeWidth;\n    resizeHeight;\n    resizeMethod;\n    resizeQuality;\n    resizeMimeType;\n    thumbnailWidth;\n    thumbnailHeight;\n    thumbnailMethod;\n    previewTemplate;\n    autoQueue;\n    autoProcessQueue;\n    ignoreHiddenFiles;\n    maxThumbnailFilesize;\n    createImageThumbnails;\n    chunking;\n    chunkSize;\n    retryChunks;\n    forceChunking;\n    retryChunksLimit;\n    parallelChunkUploads;\n    dictFileSizeUnits;\n    dictDefaultMessage;\n    dictFallbackMessage;\n    dictFileTooBig;\n    dictResponseError;\n    dictInvalidFileType;\n    dictRemoveFile;\n    dictCancelUpload;\n    dictUploadCanceled;\n    dictFallbackText;\n    dictMaxFilesExceeded;\n    dictRemoveFileConfirmation;\n    dictCancelUploadConfirmation;\n    constructor(config = {}) {\n        this.assign(config);\n    }\n    assign(config = {}, target) {\n        target = target || this;\n        for (const key in config) {\n            if (config[key] != null && !(Array.isArray(config[key])) &&\n                typeof config[key] === 'object' && !(config[key] instanceof HTMLElement)) {\n                target[key] = {};\n                this.assign(config[key], target[key]);\n            }\n            else {\n                target[key] = config[key];\n            }\n        }\n    }\n}\n\nclass DropzoneDirective {\n    zone;\n    renderer;\n    elementRef;\n    differs;\n    platformId;\n    defaults;\n    instance;\n    configDiff = null;\n    disabled = false;\n    config;\n    DZ_INIT = new EventEmitter();\n    DZ_ERROR = new EventEmitter();\n    DZ_SUCCESS = new EventEmitter();\n    DZ_SENDING = new EventEmitter();\n    DZ_CANCELED = new EventEmitter();\n    DZ_COMPLETE = new EventEmitter();\n    DZ_PROCESSING = new EventEmitter();\n    DZ_DROP = new EventEmitter();\n    DZ_DRAGSTART = new EventEmitter();\n    DZ_DRAGEND = new EventEmitter();\n    DZ_DRAGENTER = new EventEmitter();\n    DZ_DRAGOVER = new EventEmitter();\n    DZ_DRAGLEAVE = new EventEmitter();\n    DZ_THUMBNAIL = new EventEmitter();\n    DZ_ADDEDFILE = new EventEmitter();\n    DZ_ADDEDFILES = new EventEmitter();\n    DZ_REMOVEDFILE = new EventEmitter();\n    DZ_UPLOADPROGRESS = new EventEmitter();\n    DZ_MAXFILESREACHED = new EventEmitter();\n    DZ_MAXFILESEXCEEDED = new EventEmitter();\n    DZ_ERRORMULTIPLE = new EventEmitter();\n    DZ_SUCCESSMULTIPLE = new EventEmitter();\n    DZ_SENDINGMULTIPLE = new EventEmitter();\n    DZ_CANCELEDMULTIPLE = new EventEmitter();\n    DZ_COMPLETEMULTIPLE = new EventEmitter();\n    DZ_PROCESSINGMULTIPLE = new EventEmitter();\n    DZ_RESET = new EventEmitter();\n    DZ_QUEUECOMPLETE = new EventEmitter();\n    DZ_TOTALUPLOADPROGRESS = new EventEmitter();\n    constructor(zone, renderer, elementRef, differs, platformId, defaults) {\n        this.zone = zone;\n        this.renderer = renderer;\n        this.elementRef = elementRef;\n        this.differs = differs;\n        this.platformId = platformId;\n        this.defaults = defaults;\n        const dz = Dropzone;\n        dz.autoDiscover = false;\n    }\n    ngOnInit() {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n        const params = new DropzoneConfig(this.defaults);\n        params.assign(this.config); // Custom configuration\n        this.renderer.addClass(this.elementRef.nativeElement, params.maxFiles === 1 ? \"dz-single\" : \"dz-multiple\");\n        this.renderer.removeClass(this.elementRef.nativeElement, params.maxFiles === 1 ? \"dz-multiple\" : \"dz-single\");\n        Object.keys(params).forEach(key => params[key] === undefined && delete params[key]);\n        this.zone.runOutsideAngular(() => {\n            this.instance = new Dropzone(this.elementRef.nativeElement, params);\n        });\n        if (this.disabled) {\n            this.instance.disable();\n        }\n        if (this.DZ_INIT.observers.length) {\n            this.zone.run(() => {\n                this.DZ_INIT.emit(this.instance);\n            });\n        }\n        // Add auto reset handling for events\n        this.instance.on(\"success\", () => {\n            if (params.autoReset != null) {\n                setTimeout(() => this.reset(), params.autoReset);\n            }\n        });\n        this.instance.on(\"error\", () => {\n            if (params.errorReset != null) {\n                setTimeout(() => this.reset(), params.errorReset);\n            }\n        });\n        this.instance.on(\"canceled\", () => {\n            if (params.cancelReset != null) {\n                setTimeout(() => this.reset(), params.cancelReset);\n            }\n        });\n        // Add native Dropzone event handling\n        DropzoneEvents.forEach((eventName) => {\n            this.instance.on(eventName.toLowerCase(), (...args) => {\n                args = args.length === 1 ? args[0] : args;\n                const output = `DZ_${eventName.toUpperCase()}`;\n                const emitter = this[output];\n                if (emitter.observers.length > 0) {\n                    this.zone.run(() => {\n                        emitter.emit(args);\n                    });\n                }\n            });\n        });\n        if (!this.configDiff) {\n            this.configDiff = this.differs.find(this.config || {}).create();\n            this.configDiff.diff(this.config || {});\n        }\n    }\n    ngOnDestroy() {\n        if (this.instance) {\n            this.zone.runOutsideAngular(() => {\n                this.instance.destroy();\n            });\n            this.instance = null;\n        }\n    }\n    ngDoCheck() {\n        if (!this.disabled && this.configDiff) {\n            const changes = this.configDiff.diff(this.config || {});\n            if (changes && this.instance) {\n                this.ngOnDestroy();\n                this.ngOnInit();\n            }\n        }\n    }\n    ngOnChanges(changes) {\n        if (this.instance && changes[\"disabled\"]) {\n            if (changes[\"disabled\"].currentValue !== changes[\"disabled\"].previousValue) {\n                if (changes[\"disabled\"].currentValue === false) {\n                    this.zone.runOutsideAngular(() => {\n                        this.instance.enable();\n                    });\n                }\n                else if (changes[\"disabled\"].currentValue === true) {\n                    this.zone.runOutsideAngular(() => {\n                        this.instance.disable();\n                    });\n                }\n            }\n        }\n    }\n    dropzone() {\n        return this.instance;\n    }\n    reset(cancel) {\n        if (this.instance) {\n            this.zone.runOutsideAngular(() => {\n                this.instance.removeAllFiles(cancel);\n            });\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.3.11\", ngImport: i0, type: DropzoneDirective, deps: [{ token: i0.NgZone }, { token: i0.Renderer2 }, { token: i0.ElementRef }, { token: i0.KeyValueDiffers }, { token: PLATFORM_ID }, { token: DROPZONE_CONFIG, optional: true }], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"17.3.11\", type: DropzoneDirective, selector: \"[dropzone]\", inputs: { disabled: \"disabled\", config: [\"dropzone\", \"config\"] }, outputs: { DZ_INIT: \"init\", DZ_ERROR: \"error\", DZ_SUCCESS: \"success\", DZ_SENDING: \"sending\", DZ_CANCELED: \"canceled\", DZ_COMPLETE: \"complete\", DZ_PROCESSING: \"processing\", DZ_DROP: \"drop\", DZ_DRAGSTART: \"dragStart\", DZ_DRAGEND: \"dragEnd\", DZ_DRAGENTER: \"dragEnter\", DZ_DRAGOVER: \"dragOver\", DZ_DRAGLEAVE: \"dragLeave\", DZ_THUMBNAIL: \"thumbnail\", DZ_ADDEDFILE: \"addedFile\", DZ_ADDEDFILES: \"addedFiles\", DZ_REMOVEDFILE: \"removedFile\", DZ_UPLOADPROGRESS: \"uploadProgress\", DZ_MAXFILESREACHED: \"maxFilesReached\", DZ_MAXFILESEXCEEDED: \"maxFilesExceeded\", DZ_ERRORMULTIPLE: \"errorMultiple\", DZ_SUCCESSMULTIPLE: \"successMultiple\", DZ_SENDINGMULTIPLE: \"sendingMultiple\", DZ_CANCELEDMULTIPLE: \"canceledMultiple\", DZ_COMPLETEMULTIPLE: \"completeMultiple\", DZ_PROCESSINGMULTIPLE: \"processingMultiple\", DZ_RESET: \"reset\", DZ_QUEUECOMPLETE: \"queueComplete\", DZ_TOTALUPLOADPROGRESS: \"totalUploadProgress\" }, exportAs: [\"ngxDropzone\"], usesOnChanges: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.3.11\", ngImport: i0, type: DropzoneDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: \"[dropzone]\",\n                    exportAs: \"ngxDropzone\",\n                }]\n        }], ctorParameters: () => [{ type: i0.NgZone }, { type: i0.Renderer2 }, { type: i0.ElementRef }, { type: i0.KeyValueDiffers }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [DROPZONE_CONFIG]\n                }] }], propDecorators: { disabled: [{\n                type: Input\n            }], config: [{\n                type: Input,\n                args: [\"dropzone\"]\n            }], DZ_INIT: [{\n                type: Output,\n                args: [\"init\"]\n            }], DZ_ERROR: [{\n                type: Output,\n                args: [\"error\"]\n            }], DZ_SUCCESS: [{\n                type: Output,\n                args: [\"success\"]\n            }], DZ_SENDING: [{\n                type: Output,\n                args: [\"sending\"]\n            }], DZ_CANCELED: [{\n                type: Output,\n                args: [\"canceled\"]\n            }], DZ_COMPLETE: [{\n                type: Output,\n                args: [\"complete\"]\n            }], DZ_PROCESSING: [{\n                type: Output,\n                args: [\"processing\"]\n            }], DZ_DROP: [{\n                type: Output,\n                args: [\"drop\"]\n            }], DZ_DRAGSTART: [{\n                type: Output,\n                args: [\"dragStart\"]\n            }], DZ_DRAGEND: [{\n                type: Output,\n                args: [\"dragEnd\"]\n            }], DZ_DRAGENTER: [{\n                type: Output,\n                args: [\"dragEnter\"]\n            }], DZ_DRAGOVER: [{\n                type: Output,\n                args: [\"dragOver\"]\n            }], DZ_DRAGLEAVE: [{\n                type: Output,\n                args: [\"dragLeave\"]\n            }], DZ_THUMBNAIL: [{\n                type: Output,\n                args: [\"thumbnail\"]\n            }], DZ_ADDEDFILE: [{\n                type: Output,\n                args: [\"addedFile\"]\n            }], DZ_ADDEDFILES: [{\n                type: Output,\n                args: [\"addedFiles\"]\n            }], DZ_REMOVEDFILE: [{\n                type: Output,\n                args: [\"removedFile\"]\n            }], DZ_UPLOADPROGRESS: [{\n                type: Output,\n                args: [\"uploadProgress\"]\n            }], DZ_MAXFILESREACHED: [{\n                type: Output,\n                args: [\"maxFilesReached\"]\n            }], DZ_MAXFILESEXCEEDED: [{\n                type: Output,\n                args: [\"maxFilesExceeded\"]\n            }], DZ_ERRORMULTIPLE: [{\n                type: Output,\n                args: [\"errorMultiple\"]\n            }], DZ_SUCCESSMULTIPLE: [{\n                type: Output,\n                args: [\"successMultiple\"]\n            }], DZ_SENDINGMULTIPLE: [{\n                type: Output,\n                args: [\"sendingMultiple\"]\n            }], DZ_CANCELEDMULTIPLE: [{\n                type: Output,\n                args: [\"canceledMultiple\"]\n            }], DZ_COMPLETEMULTIPLE: [{\n                type: Output,\n                args: [\"completeMultiple\"]\n            }], DZ_PROCESSINGMULTIPLE: [{\n                type: Output,\n                args: [\"processingMultiple\"]\n            }], DZ_RESET: [{\n                type: Output,\n                args: [\"reset\"]\n            }], DZ_QUEUECOMPLETE: [{\n                type: Output,\n                args: [\"queueComplete\"]\n            }], DZ_TOTALUPLOADPROGRESS: [{\n                type: Output,\n                args: [\"totalUploadProgress\"]\n            }] } });\n\nclass DropzoneComponent {\n    platformId;\n    disabled = false;\n    config;\n    message = 'Click or drag files to upload';\n    placeholder = '';\n    useDropzoneClass = true;\n    DZ_INIT = new EventEmitter();\n    DZ_ERROR = new EventEmitter();\n    DZ_SUCCESS = new EventEmitter();\n    DZ_SENDING = new EventEmitter();\n    DZ_CANCELED = new EventEmitter();\n    DZ_COMPLETE = new EventEmitter();\n    DZ_PROCESSING = new EventEmitter();\n    DZ_DROP = new EventEmitter();\n    DZ_DRAGSTART = new EventEmitter();\n    DZ_DRAGEND = new EventEmitter();\n    DZ_DRAGENTER = new EventEmitter();\n    DZ_DRAGOVER = new EventEmitter();\n    DZ_DRAGLEAVE = new EventEmitter();\n    DZ_THUMBNAIL = new EventEmitter();\n    DZ_ADDEDFILE = new EventEmitter();\n    DZ_ADDEDFILES = new EventEmitter();\n    DZ_REMOVEDFILE = new EventEmitter();\n    DZ_UPLOADPROGRESS = new EventEmitter();\n    DZ_MAXFILESREACHED = new EventEmitter();\n    DZ_MAXFILESEXCEEDED = new EventEmitter();\n    DZ_ERRORMULTIPLE = new EventEmitter();\n    DZ_SUCCESSMULTIPLE = new EventEmitter();\n    DZ_SENDINGMULTIPLE = new EventEmitter();\n    DZ_CANCELEDMULTIPLE = new EventEmitter();\n    DZ_COMPLETEMULTIPLE = new EventEmitter();\n    DZ_PROCESSINGMULTIPLE = new EventEmitter();\n    DZ_RESET = new EventEmitter();\n    DZ_QUEUECOMPLETE = new EventEmitter();\n    DZ_TOTALUPLOADPROGRESS = new EventEmitter();\n    directiveRef;\n    constructor(platformId) {\n        this.platformId = platformId;\n    }\n    ngOnInit() {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n        window.setTimeout(() => {\n            DropzoneEvents.forEach((eventName) => {\n                if (this.directiveRef) {\n                    const output = `DZ_${eventName.toUpperCase()}`;\n                    const directiveOutput = output;\n                    const componentOutput = output;\n                    this.directiveRef[directiveOutput] = this[componentOutput];\n                }\n            });\n        }, 0);\n    }\n    getPlaceholder() {\n        return 'url(' + encodeURI(this.placeholder) + ')';\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.3.11\", ngImport: i0, type: DropzoneComponent, deps: [{ token: PLATFORM_ID }], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"17.3.11\", type: DropzoneComponent, selector: \"dropzone\", inputs: { disabled: \"disabled\", config: \"config\", message: \"message\", placeholder: \"placeholder\", useDropzoneClass: \"useDropzoneClass\" }, outputs: { DZ_INIT: \"init\", DZ_ERROR: \"error\", DZ_SUCCESS: \"success\", DZ_SENDING: \"sending\", DZ_CANCELED: \"canceled\", DZ_COMPLETE: \"complete\", DZ_PROCESSING: \"processing\", DZ_DROP: \"drop\", DZ_DRAGSTART: \"dragStart\", DZ_DRAGEND: \"dragEnd\", DZ_DRAGENTER: \"dragEnter\", DZ_DRAGOVER: \"dragOver\", DZ_DRAGLEAVE: \"dragLeave\", DZ_THUMBNAIL: \"thumbnail\", DZ_ADDEDFILE: \"addedFile\", DZ_ADDEDFILES: \"addedFiles\", DZ_REMOVEDFILE: \"removedFile\", DZ_UPLOADPROGRESS: \"uploadProgress\", DZ_MAXFILESREACHED: \"maxFilesReached\", DZ_MAXFILESEXCEEDED: \"maxFilesExceeded\", DZ_ERRORMULTIPLE: \"errorMultiple\", DZ_SUCCESSMULTIPLE: \"successMultiple\", DZ_SENDINGMULTIPLE: \"sendingMultiple\", DZ_CANCELEDMULTIPLE: \"canceledMultiple\", DZ_COMPLETEMULTIPLE: \"completeMultiple\", DZ_PROCESSINGMULTIPLE: \"processingMultiple\", DZ_RESET: \"reset\", DZ_QUEUECOMPLETE: \"queueComplete\", DZ_TOTALUPLOADPROGRESS: \"totalUploadProgress\" }, viewQueries: [{ propertyName: \"directiveRef\", first: true, predicate: DropzoneDirective, descendants: true, static: true }], exportAs: [\"ngxDropzone\"], ngImport: i0, template: \"<div class=\\\"dz-wrapper\\\" [class.dropzone]=\\\"useDropzoneClass\\\" [dropzone]=\\\"config\\\" [disabled]=\\\"disabled\\\" (init)=\\\"DZ_INIT.emit($event)\\\">\\n  <div class=\\\"dz-message\\\" [class.disabled]=\\\"disabled\\\" [class.dz-placeholder]=\\\"placeholder\\\">\\n    <div class=\\\"dz-text\\\" [innerHTML]=\\\"config?.dictDefaultMessage || message\\\"></div>\\n\\n    <div *ngIf=\\\"placeholder\\\" class=\\\"dz-image\\\" [style.background-image]=\\\"getPlaceholder()\\\"></div>\\n  </div>\\n\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\"dropzone{display:block;width:100%;height:auto}dropzone.flex{display:flex;flex-direction:inherit;min-width:0;min-height:0;-webkit-box-direction:inherit;-webkit-box-orient:inherit}dropzone.flex>.dropzone.dz-wrapper{flex:1 1 auto;min-width:0;min-height:0;-webkit-box-flex:1}dropzone.flex{align-items:inherit;align-content:inherit;justify-content:inherit;-webkit-box-align:inherit;-webkit-box-pack:inherit}dropzone.flex>.dropzone.dz-wrapper.dz-single{display:flex;flex-direction:column;align-items:center;align-content:center;justify-content:center;-webkit-box-align:center;-webkit-box-direction:column;-webkit-box-orient:column;-webkit-box-pack:center}dropzone.flex>.dropzone.dz-wrapper.dz-multiple{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;justify-content:space-between;-webkit-box-align:flex-start;-webkit-box-direction:row;-webkit-box-orient:row;-webkit-box-pack:flex-start}dropzone>.dropzone.dz-wrapper{position:relative;overflow:auto;width:100%;min-height:0;max-height:100%;padding:0;border:none;color:#666;background:transparent}dropzone>.dropzone.dz-wrapper .dz-message{position:relative;display:inline-block;overflow:auto;width:calc(100% - 16px);min-width:calc(100% - 16px);min-height:40px;max-width:calc(100% - 16px);max-height:100%;margin:8px;border:2px dashed #aaa;background-color:#eee}dropzone>.dropzone.dz-wrapper .dz-message .dz-text{position:absolute;top:50%;width:100%;padding:8px 16px;text-align:center;transform:translateY(-50%)}dropzone>.dropzone.dz-wrapper .dz-message .dz-image{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:50% 50%}dropzone>.dropzone.dz-wrapper .dz-message.disabled{cursor:not-allowed}dropzone>.dropzone.dz-wrapper .dz-message.disabled .dz-text{opacity:.5}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder{border-color:rgba(#aaa,0)}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder .dz-text{position:absolute;z-index:1;top:0;right:10%;left:10%;opacity:0;font-weight:700;background-color:rgba(#fff,.5);transform:translateY(-50%);transition:filter .25s ease-in-out,opacity .25s ease-in-out,border-color .25s ease-in-out}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled){border-color:#aaa}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-text{opacity:1}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-image{-webkit-filter:blur(8px);filter:blur(8px)}dropzone>.dropzone.dz-wrapper .dz-preview{margin:8px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-details{padding:24px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress{width:80%;margin-left:-40%;border:1px solid #aaa;border-radius:4px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress .dz-upload{background-color:#666}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span{display:block;overflow:hidden;width:100%;max-width:100%;text-overflow:ellipsis}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span:hover{overflow:visible;white-space:normal;word-wrap:break-word}dropzone>.dropzone.dz-wrapper.dz-single .dz-message{width:100%;height:100%}dropzone>.dropzone.dz-wrapper.dz-single.dz-started .dz-message{display:none}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview{width:calc(100% - 16px);height:100%}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image{width:100%;height:100%;border-radius:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image img{display:block;width:100%;height:auto;margin:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-error-message{top:50%;left:50%;transform:translate(-50%) translateY(100%)}dropzone>.dropzone.dz-wrapper.dz-multiple.dz-started .dz-message{display:inline-block}\\n\", \"@-webkit-keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@-moz-keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@-webkit-keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@-moz-keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@-webkit-keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@-moz-keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}.dropzone,.dropzone *{box-sizing:border-box}.dropzone{min-height:150px;border:2px solid rgba(0,0,0,.3);background:#fff;padding:20px}.dropzone.dz-clickable{cursor:pointer}.dropzone.dz-clickable *{cursor:default}.dropzone.dz-clickable .dz-message,.dropzone.dz-clickable .dz-message *{cursor:pointer}.dropzone.dz-started .dz-message{display:none}.dropzone.dz-drag-hover{border-style:solid}.dropzone.dz-drag-hover .dz-message{opacity:.5}.dropzone .dz-message{text-align:center;margin:2em 0}.dropzone .dz-message .dz-button{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.dropzone .dz-preview{position:relative;display:inline-block;vertical-align:top;margin:16px;min-height:100px}.dropzone .dz-preview:hover{z-index:1000}.dropzone .dz-preview.dz-file-preview .dz-image{border-radius:20px;background:#999;background:linear-gradient(to bottom,#eee,#ddd)}.dropzone .dz-preview.dz-file-preview .dz-details{opacity:1}.dropzone .dz-preview.dz-image-preview{background:#fff}.dropzone .dz-preview.dz-image-preview .dz-details{-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;-ms-transition:opacity .2s linear;-o-transition:opacity .2s linear;transition:opacity .2s linear}.dropzone .dz-preview .dz-remove{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.dropzone .dz-preview .dz-remove:hover{text-decoration:underline}.dropzone .dz-preview:hover .dz-details{opacity:1}.dropzone .dz-preview .dz-details{z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:#000000e6;line-height:150%}.dropzone .dz-preview .dz-details .dz-size{margin-bottom:1em;font-size:16px}.dropzone .dz-preview .dz-details .dz-filename{white-space:nowrap}.dropzone .dz-preview .dz-details .dz-filename:hover span{border:1px solid rgba(200,200,200,.8);background-color:#fffc}.dropzone .dz-preview .dz-details .dz-filename:not(:hover){overflow:hidden;text-overflow:ellipsis}.dropzone .dz-preview .dz-details .dz-filename:not(:hover) span{border:1px solid transparent}.dropzone .dz-preview .dz-details .dz-filename span,.dropzone .dz-preview .dz-details .dz-size span{background-color:#fff6;padding:0 .4em;border-radius:3px}.dropzone .dz-preview:hover .dz-image img{-webkit-transform:scale(1.05,1.05);-moz-transform:scale(1.05,1.05);-ms-transform:scale(1.05,1.05);-o-transform:scale(1.05,1.05);transform:scale(1.05);-webkit-filter:blur(8px);filter:blur(8px)}.dropzone .dz-preview .dz-image{border-radius:20px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.dropzone .dz-preview .dz-image img{display:block}.dropzone .dz-preview.dz-success .dz-success-mark{-webkit-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-moz-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-ms-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-o-animation:passing-through 3s cubic-bezier(.77,0,.175,1);animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview.dz-error .dz-error-mark{opacity:1;-webkit-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-moz-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-ms-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-o-animation:slide-in 3s cubic-bezier(.77,0,.175,1);animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview .dz-success-mark,.dropzone .dz-preview .dz-error-mark{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:50%;left:50%;margin-left:-27px;margin-top:-27px}.dropzone .dz-preview .dz-success-mark svg,.dropzone .dz-preview .dz-error-mark svg{display:block;width:54px;height:54px}.dropzone .dz-preview.dz-processing .dz-progress{opacity:1;-webkit-transition:all .2s linear;-moz-transition:all .2s linear;-ms-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear}.dropzone .dz-preview.dz-complete .dz-progress{opacity:0;-webkit-transition:opacity .4s ease-in;-moz-transition:opacity .4s ease-in;-ms-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.dropzone .dz-preview:not(.dz-processing) .dz-progress{-webkit-animation:pulse 6s ease infinite;-moz-animation:pulse 6s ease infinite;-ms-animation:pulse 6s ease infinite;-o-animation:pulse 6s ease infinite;animation:pulse 6s ease infinite}.dropzone .dz-preview .dz-progress{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:#ffffffe6;-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.dropzone .dz-preview .dz-progress .dz-upload{background:#333;background:linear-gradient(to bottom,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;-webkit-transition:width .3s ease-in-out;-moz-transition:width .3s ease-in-out;-ms-transition:width .3s ease-in-out;-o-transition:width .3s ease-in-out;transition:width .3s ease-in-out}.dropzone .dz-preview.dz-error .dz-error-message{display:block}.dropzone .dz-preview.dz-error:hover .dz-error-message{opacity:1;pointer-events:auto}.dropzone .dz-preview .dz-error-message{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;-webkit-transition:opacity .3s ease;-moz-transition:opacity .3s ease;-ms-transition:opacity .3s ease;-o-transition:opacity .3s ease;transition:opacity .3s ease;border-radius:8px;font-size:13px;top:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(to bottom,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.dropzone .dz-preview .dz-error-message:after{content:\\\"\\\";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}\\n\"], dependencies: [{ kind: \"directive\", type: i1.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: DropzoneDirective, selector: \"[dropzone]\", inputs: [\"disabled\", \"dropzone\"], outputs: [\"init\", \"error\", \"success\", \"sending\", \"canceled\", \"complete\", \"processing\", \"drop\", \"dragStart\", \"dragEnd\", \"dragEnter\", \"dragOver\", \"dragLeave\", \"thumbnail\", \"addedFile\", \"addedFiles\", \"removedFile\", \"uploadProgress\", \"maxFilesReached\", \"maxFilesExceeded\", \"errorMultiple\", \"successMultiple\", \"sendingMultiple\", \"canceledMultiple\", \"completeMultiple\", \"processingMultiple\", \"reset\", \"queueComplete\", \"totalUploadProgress\"], exportAs: [\"ngxDropzone\"] }], encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.3.11\", ngImport: i0, type: DropzoneComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'dropzone', exportAs: 'ngxDropzone', encapsulation: ViewEncapsulation.None, template: \"<div class=\\\"dz-wrapper\\\" [class.dropzone]=\\\"useDropzoneClass\\\" [dropzone]=\\\"config\\\" [disabled]=\\\"disabled\\\" (init)=\\\"DZ_INIT.emit($event)\\\">\\n  <div class=\\\"dz-message\\\" [class.disabled]=\\\"disabled\\\" [class.dz-placeholder]=\\\"placeholder\\\">\\n    <div class=\\\"dz-text\\\" [innerHTML]=\\\"config?.dictDefaultMessage || message\\\"></div>\\n\\n    <div *ngIf=\\\"placeholder\\\" class=\\\"dz-image\\\" [style.background-image]=\\\"getPlaceholder()\\\"></div>\\n  </div>\\n\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\"dropzone{display:block;width:100%;height:auto}dropzone.flex{display:flex;flex-direction:inherit;min-width:0;min-height:0;-webkit-box-direction:inherit;-webkit-box-orient:inherit}dropzone.flex>.dropzone.dz-wrapper{flex:1 1 auto;min-width:0;min-height:0;-webkit-box-flex:1}dropzone.flex{align-items:inherit;align-content:inherit;justify-content:inherit;-webkit-box-align:inherit;-webkit-box-pack:inherit}dropzone.flex>.dropzone.dz-wrapper.dz-single{display:flex;flex-direction:column;align-items:center;align-content:center;justify-content:center;-webkit-box-align:center;-webkit-box-direction:column;-webkit-box-orient:column;-webkit-box-pack:center}dropzone.flex>.dropzone.dz-wrapper.dz-multiple{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;justify-content:space-between;-webkit-box-align:flex-start;-webkit-box-direction:row;-webkit-box-orient:row;-webkit-box-pack:flex-start}dropzone>.dropzone.dz-wrapper{position:relative;overflow:auto;width:100%;min-height:0;max-height:100%;padding:0;border:none;color:#666;background:transparent}dropzone>.dropzone.dz-wrapper .dz-message{position:relative;display:inline-block;overflow:auto;width:calc(100% - 16px);min-width:calc(100% - 16px);min-height:40px;max-width:calc(100% - 16px);max-height:100%;margin:8px;border:2px dashed #aaa;background-color:#eee}dropzone>.dropzone.dz-wrapper .dz-message .dz-text{position:absolute;top:50%;width:100%;padding:8px 16px;text-align:center;transform:translateY(-50%)}dropzone>.dropzone.dz-wrapper .dz-message .dz-image{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:50% 50%}dropzone>.dropzone.dz-wrapper .dz-message.disabled{cursor:not-allowed}dropzone>.dropzone.dz-wrapper .dz-message.disabled .dz-text{opacity:.5}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder{border-color:rgba(#aaa,0)}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder .dz-text{position:absolute;z-index:1;top:0;right:10%;left:10%;opacity:0;font-weight:700;background-color:rgba(#fff,.5);transform:translateY(-50%);transition:filter .25s ease-in-out,opacity .25s ease-in-out,border-color .25s ease-in-out}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled){border-color:#aaa}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-text{opacity:1}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-image{-webkit-filter:blur(8px);filter:blur(8px)}dropzone>.dropzone.dz-wrapper .dz-preview{margin:8px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-details{padding:24px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress{width:80%;margin-left:-40%;border:1px solid #aaa;border-radius:4px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress .dz-upload{background-color:#666}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span{display:block;overflow:hidden;width:100%;max-width:100%;text-overflow:ellipsis}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span:hover{overflow:visible;white-space:normal;word-wrap:break-word}dropzone>.dropzone.dz-wrapper.dz-single .dz-message{width:100%;height:100%}dropzone>.dropzone.dz-wrapper.dz-single.dz-started .dz-message{display:none}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview{width:calc(100% - 16px);height:100%}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image{width:100%;height:100%;border-radius:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image img{display:block;width:100%;height:auto;margin:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-error-message{top:50%;left:50%;transform:translate(-50%) translateY(100%)}dropzone>.dropzone.dz-wrapper.dz-multiple.dz-started .dz-message{display:inline-block}\\n\", \"@-webkit-keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@-moz-keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@-webkit-keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@-moz-keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@-webkit-keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@-moz-keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}.dropzone,.dropzone *{box-sizing:border-box}.dropzone{min-height:150px;border:2px solid rgba(0,0,0,.3);background:#fff;padding:20px}.dropzone.dz-clickable{cursor:pointer}.dropzone.dz-clickable *{cursor:default}.dropzone.dz-clickable .dz-message,.dropzone.dz-clickable .dz-message *{cursor:pointer}.dropzone.dz-started .dz-message{display:none}.dropzone.dz-drag-hover{border-style:solid}.dropzone.dz-drag-hover .dz-message{opacity:.5}.dropzone .dz-message{text-align:center;margin:2em 0}.dropzone .dz-message .dz-button{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.dropzone .dz-preview{position:relative;display:inline-block;vertical-align:top;margin:16px;min-height:100px}.dropzone .dz-preview:hover{z-index:1000}.dropzone .dz-preview.dz-file-preview .dz-image{border-radius:20px;background:#999;background:linear-gradient(to bottom,#eee,#ddd)}.dropzone .dz-preview.dz-file-preview .dz-details{opacity:1}.dropzone .dz-preview.dz-image-preview{background:#fff}.dropzone .dz-preview.dz-image-preview .dz-details{-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;-ms-transition:opacity .2s linear;-o-transition:opacity .2s linear;transition:opacity .2s linear}.dropzone .dz-preview .dz-remove{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.dropzone .dz-preview .dz-remove:hover{text-decoration:underline}.dropzone .dz-preview:hover .dz-details{opacity:1}.dropzone .dz-preview .dz-details{z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:#000000e6;line-height:150%}.dropzone .dz-preview .dz-details .dz-size{margin-bottom:1em;font-size:16px}.dropzone .dz-preview .dz-details .dz-filename{white-space:nowrap}.dropzone .dz-preview .dz-details .dz-filename:hover span{border:1px solid rgba(200,200,200,.8);background-color:#fffc}.dropzone .dz-preview .dz-details .dz-filename:not(:hover){overflow:hidden;text-overflow:ellipsis}.dropzone .dz-preview .dz-details .dz-filename:not(:hover) span{border:1px solid transparent}.dropzone .dz-preview .dz-details .dz-filename span,.dropzone .dz-preview .dz-details .dz-size span{background-color:#fff6;padding:0 .4em;border-radius:3px}.dropzone .dz-preview:hover .dz-image img{-webkit-transform:scale(1.05,1.05);-moz-transform:scale(1.05,1.05);-ms-transform:scale(1.05,1.05);-o-transform:scale(1.05,1.05);transform:scale(1.05);-webkit-filter:blur(8px);filter:blur(8px)}.dropzone .dz-preview .dz-image{border-radius:20px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.dropzone .dz-preview .dz-image img{display:block}.dropzone .dz-preview.dz-success .dz-success-mark{-webkit-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-moz-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-ms-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-o-animation:passing-through 3s cubic-bezier(.77,0,.175,1);animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview.dz-error .dz-error-mark{opacity:1;-webkit-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-moz-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-ms-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-o-animation:slide-in 3s cubic-bezier(.77,0,.175,1);animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview .dz-success-mark,.dropzone .dz-preview .dz-error-mark{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:50%;left:50%;margin-left:-27px;margin-top:-27px}.dropzone .dz-preview .dz-success-mark svg,.dropzone .dz-preview .dz-error-mark svg{display:block;width:54px;height:54px}.dropzone .dz-preview.dz-processing .dz-progress{opacity:1;-webkit-transition:all .2s linear;-moz-transition:all .2s linear;-ms-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear}.dropzone .dz-preview.dz-complete .dz-progress{opacity:0;-webkit-transition:opacity .4s ease-in;-moz-transition:opacity .4s ease-in;-ms-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.dropzone .dz-preview:not(.dz-processing) .dz-progress{-webkit-animation:pulse 6s ease infinite;-moz-animation:pulse 6s ease infinite;-ms-animation:pulse 6s ease infinite;-o-animation:pulse 6s ease infinite;animation:pulse 6s ease infinite}.dropzone .dz-preview .dz-progress{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:#ffffffe6;-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.dropzone .dz-preview .dz-progress .dz-upload{background:#333;background:linear-gradient(to bottom,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;-webkit-transition:width .3s ease-in-out;-moz-transition:width .3s ease-in-out;-ms-transition:width .3s ease-in-out;-o-transition:width .3s ease-in-out;transition:width .3s ease-in-out}.dropzone .dz-preview.dz-error .dz-error-message{display:block}.dropzone .dz-preview.dz-error:hover .dz-error-message{opacity:1;pointer-events:auto}.dropzone .dz-preview .dz-error-message{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;-webkit-transition:opacity .3s ease;-moz-transition:opacity .3s ease;-ms-transition:opacity .3s ease;-o-transition:opacity .3s ease;transition:opacity .3s ease;border-radius:8px;font-size:13px;top:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(to bottom,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.dropzone .dz-preview .dz-error-message:after{content:\\\"\\\";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}\\n\"] }]\n        }], ctorParameters: () => [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }], propDecorators: { disabled: [{\n                type: Input\n            }], config: [{\n                type: Input\n            }], message: [{\n                type: Input\n            }], placeholder: [{\n                type: Input\n            }], useDropzoneClass: [{\n                type: Input\n            }], DZ_INIT: [{\n                type: Output,\n                args: ['init']\n            }], DZ_ERROR: [{\n                type: Output,\n                args: ['error']\n            }], DZ_SUCCESS: [{\n                type: Output,\n                args: ['success']\n            }], DZ_SENDING: [{\n                type: Output,\n                args: ['sending']\n            }], DZ_CANCELED: [{\n                type: Output,\n                args: ['canceled']\n            }], DZ_COMPLETE: [{\n                type: Output,\n                args: ['complete']\n            }], DZ_PROCESSING: [{\n                type: Output,\n                args: ['processing']\n            }], DZ_DROP: [{\n                type: Output,\n                args: ['drop']\n            }], DZ_DRAGSTART: [{\n                type: Output,\n                args: ['dragStart']\n            }], DZ_DRAGEND: [{\n                type: Output,\n                args: ['dragEnd']\n            }], DZ_DRAGENTER: [{\n                type: Output,\n                args: ['dragEnter']\n            }], DZ_DRAGOVER: [{\n                type: Output,\n                args: ['dragOver']\n            }], DZ_DRAGLEAVE: [{\n                type: Output,\n                args: ['dragLeave']\n            }], DZ_THUMBNAIL: [{\n                type: Output,\n                args: ['thumbnail']\n            }], DZ_ADDEDFILE: [{\n                type: Output,\n                args: ['addedFile']\n            }], DZ_ADDEDFILES: [{\n                type: Output,\n                args: ['addedFiles']\n            }], DZ_REMOVEDFILE: [{\n                type: Output,\n                args: ['removedFile']\n            }], DZ_UPLOADPROGRESS: [{\n                type: Output,\n                args: ['uploadProgress']\n            }], DZ_MAXFILESREACHED: [{\n                type: Output,\n                args: ['maxFilesReached']\n            }], DZ_MAXFILESEXCEEDED: [{\n                type: Output,\n                args: ['maxFilesExceeded']\n            }], DZ_ERRORMULTIPLE: [{\n                type: Output,\n                args: ['errorMultiple']\n            }], DZ_SUCCESSMULTIPLE: [{\n                type: Output,\n                args: ['successMultiple']\n            }], DZ_SENDINGMULTIPLE: [{\n                type: Output,\n                args: ['sendingMultiple']\n            }], DZ_CANCELEDMULTIPLE: [{\n                type: Output,\n                args: ['canceledMultiple']\n            }], DZ_COMPLETEMULTIPLE: [{\n                type: Output,\n                args: ['completeMultiple']\n            }], DZ_PROCESSINGMULTIPLE: [{\n                type: Output,\n                args: ['processingMultiple']\n            }], DZ_RESET: [{\n                type: Output,\n                args: ['reset']\n            }], DZ_QUEUECOMPLETE: [{\n                type: Output,\n                args: ['queueComplete']\n            }], DZ_TOTALUPLOADPROGRESS: [{\n                type: Output,\n                args: ['totalUploadProgress']\n            }], directiveRef: [{\n                type: ViewChild,\n                args: [DropzoneDirective, { static: true }]\n            }] } });\n\nclass DropzoneModule {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.3.11\", ngImport: i0, type: DropzoneModule, deps: [], target: i0.FactoryTarget.NgModule });\n    static mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"17.3.11\", ngImport: i0, type: DropzoneModule, declarations: [DropzoneComponent, DropzoneDirective], imports: [CommonModule], exports: [CommonModule, DropzoneComponent, DropzoneDirective] });\n    static inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"17.3.11\", ngImport: i0, type: DropzoneModule, imports: [CommonModule, CommonModule] });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.3.11\", ngImport: i0, type: DropzoneModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    declarations: [DropzoneComponent, DropzoneDirective],\n                    exports: [CommonModule, DropzoneComponent, DropzoneDirective]\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DROPZONE_CONFIG, DropzoneComponent, DropzoneConfig, DropzoneDirective, DropzoneModule };\n","import { DropzoneConfigExt } from '../../../../../../../edit-types/src/DropzoneConfigExt';\r\n\r\nexport type DropzoneType = any;\r\n\r\nexport class DropzoneConfigInstance implements DropzoneConfigExt {\r\n  /** Subfolder and UsePortalRoot are updated from AdamBrowser */\r\n  disabled: boolean;\r\n  url: string;\r\n  headers: Record<string, string>;\r\n  acceptedFiles: string = null;\r\n  maxFiles = 1000;\r\n  parallelUploads = 1000;\r\n  autoReset: number = null;\r\n  errorReset: number = null;\r\n  cancelReset: number = null;\r\n  /** In MB. Upload will also be stopped on the server if file is larger than allowed */\r\n  maxFilesize = 20000;\r\n  /** In milliseconds */\r\n  timeout = 1800000;\r\n  paramName = 'uploadfile';\r\n  maxThumbnailFilesize = 10;\r\n  dictDefaultMessage = '';\r\n  addRemoveLinks = false;\r\n  previewsContainer = '.dropzone-previews';\r\n  /**\r\n   * We need a clickable, because otherwise the entire area is clickable,\r\n   * so i'm just making the preview clickable, as it's not important\r\n   */\r\n  clickable = '.dropzone-previews';\r\n\r\n  constructor(disabled: boolean, url: string, headers: Record<string, string>) {\r\n    this.disabled = disabled;\r\n    this.url = url;\r\n    this.headers = headers;\r\n  }\r\n}\r\n","export class WysiwygConstants {\r\n\r\n  /** Constant to mark the WYSIWYG dom tag */\r\n  static readonly classToDetectWysiwyg = \"class-distinguish-from-adam-dropzone\";\r\n}","import { WysiwygConstants } from '../../../../../../../field-string-wysiwyg/shared/wysiwyg.constants';\r\n\r\n\r\n/**\r\n * Special helper / constants so Dropzone works together with the WYSIWYG editor\r\n */\r\nexport class DropzoneWysiwyg {\r\n\r\n  /** If the last drop was on a WYSIWYG field */\r\n  isStringWysiwyg = false;\r\n\r\n  /** Allowed image / mime types on WYSIWYG */\r\n  imageTypes: string[] = [\"image/jpeg\", \"image/png\"];\r\n\r\n  // on onDrop we check if drop is on wysiwyg or not\r\n  detectWysiwygOnDrop(event: any) {\r\n    this.isStringWysiwyg = DropzoneWysiwyg.isParentWysiwyg((event.toElement as HTMLElement));\r\n  }\r\n  \r\n  // here we check if file is image type so we can cancel upload if it is also uploaded on wysiwyg\r\n  removeFilesHandledByWysiwyg(dropzone: any, file: any) {\r\n    if (this.isStringWysiwyg && this.imageTypes.some(x => x === file.type))\r\n      dropzone.removeFile(file);\r\n  }\r\n\r\n\r\n  static isParentWysiwyg(element: HTMLElement): boolean {\r\n    // Traverse the DOM to see if we can find the wysiwyg editor\r\n    do {\r\n      if (element == null) return false;\r\n      if (element?.classList.contains(WysiwygConstants.classToDetectWysiwyg)) return true;\r\n      element = element.parentElement;\r\n    } while (!element?.classList.contains(WysiwygConstants.classToDetectWysiwyg) || element.parentElement != document.body);\r\n    return false;\r\n  }\r\n\r\n}","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { NgClass } from '@angular/common';\r\nimport { AfterViewInit, Component, computed, inject, signal, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { DropzoneDirective, DropzoneModule } from 'ngx-dropzone-wrapper';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { DropzoneConfigExt } from '../../../../../../../edit-types/src/DropzoneConfigExt';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\nimport { DropzoneConfigInstance, DropzoneType } from './dropzone-wrapper.models';\r\nimport { DropzoneWysiwyg } from './dropzone-wysiwyg';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.DropzoneWrapper,\r\n    templateUrl: './dropzone-wrapper.html',\r\n    styleUrls: ['./dropzone-wrapper.scss'],\r\n    imports: [\r\n        NgClass,\r\n        DropzoneModule,\r\n    ]\r\n})\r\nexport class DropzoneWrapperComponent implements AfterViewInit {\r\n  \r\n  log = classLog({DropzoneWrapperComponent});\r\n\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n  @ViewChild(DropzoneDirective) dropzoneRef: DropzoneDirective;\r\n\r\n  #fieldState = inject(FieldState);\r\n  #config = this.#fieldState.config;\r\n\r\n  dropzoneConfig = signal<DropzoneConfigExt>(null);\r\n  dropzoneDisabled = computed(() => this.#fieldState.ui().disabled || (this.dropzoneConfig()?.disabled ?? true));\r\n  \r\n  #wysiwygHelper = new DropzoneWysiwyg();\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private dnnContext: DnnContext,\r\n  ) {\r\n    this.extendFieldConfigWithDropZone();\r\n    this.#setConfig({});\r\n  }\r\n\r\n  extendFieldConfigWithDropZone() {\r\n    this.#config.dropzone = {\r\n      setConfig: (config) => this.#setConfig(config),\r\n      getConfig: () => this.dropzoneConfig(),\r\n      uploadFile: (image) => this.#uploadFile(image),\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.#setConfig({\r\n      previewsContainer: `.${this.#config.dropzonePreviewsClass} .dropzone-previews`,\r\n      clickable: `.${this.#config.dropzonePreviewsClass} .invisible-clickable`,\r\n    });\r\n  }\r\n\r\n  // on onDrop we check if drop is on wysiwyg or not\r\n  onDrop(event: any) {\r\n    this.#wysiwygHelper.detectWysiwygOnDrop(event);\r\n  }\r\n\r\n  // here we check if file is image type so we can cancel upload if it is also uploaded on wysiwyg\r\n  onAddedFile(file: any) {\r\n    this.#wysiwygHelper.removeFilesHandledByWysiwyg(this.dropzoneRef.dropzone(), file);\r\n  }\r\n\r\n  onUploadError(event: DropzoneType) {\r\n    this.log.fn('onUploadError', { event });\r\n    alert(`Dropzone upload error. Event ${event}`);\r\n    this.dropzoneRef.reset();\r\n  }\r\n\r\n  onUploadSuccess(event: DropzoneType) {\r\n    const l = this.log.fn('onUploadSuccess', { event });\r\n    const response: AdamItem = event[1]; // gets the server response as second argument.\r\n    if (!response.Error) {\r\n      if (this.#config.adam) {\r\n        this.#config.adam.onItemUpload(response);\r\n        this.#config.adam.refresh();\r\n      } else {\r\n        l.a(`Upload failed because: ADAM reference doesn't exist`);\r\n      }\r\n    } else {\r\n      l.a(`Upload failed because: ${response.Error}`);\r\n      alert(`Upload failed because: ${response.Error}`);\r\n    }\r\n    this.dropzoneRef.reset();\r\n  }\r\n\r\n  #setConfig(config: Partial<DropzoneConfigExt>) {\r\n    const contentType = this.#config.contentTypeNameId;\r\n    const entityGuid = this.#config.entityGuid;\r\n    const field = this.#config.fieldName;\r\n    const appId = this.formConfig.config.appId;\r\n\r\n    const startDisabled = this.#config.inputTypeSpecs.isExternal;\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(`app/auto/data/${contentType}/${entityGuid}/${field}?subfolder=&usePortalRoot=false&appId=${appId}`);\r\n    const headers = this.dnnContext.sxc.webApi.headers();\r\n\r\n    const newConfig = new DropzoneConfigInstance(startDisabled, url, headers);\r\n    const oldConfig = this.dropzoneConfig() ?? newConfig;\r\n\r\n    for (const key of Object.keys(newConfig))\r\n      (newConfig as any)[key] = (config as any)[key] ?? (oldConfig as any)[key];\r\n\r\n    // fixes\r\n    const syncUploadLimit = newConfig.maxFiles !== newConfig.parallelUploads;\r\n    if (syncUploadLimit) {\r\n      const uploadLimit = (newConfig.maxFiles >= newConfig.parallelUploads)\r\n        ? newConfig.maxFiles\r\n        : newConfig.parallelUploads;\r\n      newConfig.maxFiles = uploadLimit;\r\n      newConfig.parallelUploads = uploadLimit;\r\n    }\r\n\r\n    // Make sure dropzone accepts all files, since we'll process it afterwards\r\n    // only way to tell dropzone to accept all files is to remove acceptedFiles from config\r\n    // so if the config exists but is empty/null, we must completely remove it\r\n    const fixAcceptedFiles = newConfig.acceptedFiles == null || newConfig.acceptedFiles === '';\r\n    if (fixAcceptedFiles)\r\n      delete newConfig.acceptedFiles; \r\n\r\n    this.dropzoneConfig.set(newConfig);\r\n  }\r\n\r\n  #uploadFile(file: File & { upload?: { chunked: boolean; }; }) {\r\n    const dropzone = this.dropzoneRef.dropzone();\r\n    // 2025-03-29 previous used defaultOptions, but that doesn't seem to work any more\r\n    // switching to fallback to options - not sure if defaultOptions is still a thing...\r\n    file.upload = { chunked: dropzone.defaultOptions?.chunking ?? dropzone.options?.chunking };\r\n    dropzone.processFile(file);\r\n  }\r\n}\r\n","<div class=\"dropzone dropzone-container\" [ngClass]=\"{ 'dropzone-disabled': dropzoneDisabled() }\"\r\n  [dropzone]=\"dropzoneConfig()\" [disabled]=\"dropzoneDisabled()\" (error)=\"onUploadError($event)\"\r\n  (success)=\"onUploadSuccess($event)\" (addedFile)=\"onAddedFile($event)\" (drop)=\"onDrop($event)\">\r\n  <ng-container #fieldComponent></ng-container>\r\n</div>","import { NgZone } from '@angular/core';\r\nimport { EavWindow } from '../../../shared/models/eav-window.model';\r\nimport { ElementEventListener } from '../../shared/controls/element-event-listener.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport class DropzoneDraggingHelper {\r\n  private eventListeners: ElementEventListener[] = [];\r\n\r\n  constructor(private zone: NgZone) { }\r\n\r\n  /** Starts listening for dragover and drop events on a given element */\r\n  attach(htmlEl: HTMLElement) {\r\n    this.zone.runOutsideAngular(() => {\r\n      htmlEl.addEventListener('dragover', dragoverListener, { passive: true });\r\n      htmlEl.addEventListener('drop', dropListener, { passive: true });\r\n\r\n      this.eventListeners.push(\r\n        { element: htmlEl, type: 'dragover', listener: dragoverListener },\r\n        { element: htmlEl, type: 'drop', listener: dropListener },\r\n      );\r\n\r\n      function dragoverListener() {\r\n        clearTimeouts(window.windowBodyTimeouts); // clear timeouts from global array of timeouts which clear draggingClass from body\r\n        document.body.classList.add(window.draggingClass);\r\n      }\r\n      function dropListener() {\r\n        document.body.classList.remove(window.draggingClass);\r\n      }\r\n      function clearTimeouts(timeoutsArray: number[]) {\r\n        for (const timeout of timeoutsArray)\r\n          clearTimeout(timeout);\r\n        timeoutsArray.splice(0, timeoutsArray.length);\r\n      }\r\n    });\r\n  }\r\n\r\n  /** Removes event listeners from registered elements */\r\n  detach() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.eventListeners.forEach(({ element, type, listener }) => element.removeEventListener(type, listener));\r\n    });\r\n  }\r\n}\r\n","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\r\n\r\nexport const ContentExpandAnimation = [\r\n  trigger('itemShrinkAnimation', [\r\n    state(\r\n      'open',\r\n      style({\r\n        height: '30vh',\r\n      }),\r\n    ),\r\n    state(\r\n      'closed',\r\n      style({\r\n        height: '0vh',\r\n      }),\r\n    ),\r\n    transition('open => closed', [animate('300ms cubic-bezier(0.4, 0.0, 0.2, 1)')]),\r\n  ]),\r\n  trigger('contentExpandAnimation', [\r\n    state(\r\n      'closed',\r\n      style({\r\n        height: '0',\r\n      }),\r\n    ),\r\n    state(\r\n      'expanded',\r\n      style({\r\n        height: 'calc(100vh - {{bottomPixels}})', // 100px on desktop, 50px on mobile\r\n        maxHeight: 'calc(100vh - {{bottomPixels}})',\r\n      }),\r\n      { params: { bottomPixels: window.innerWidth > 600 ? '100px' : '50px' } },\r\n    ),\r\n    transition(\r\n      'closed => expanded',\r\n      [\r\n        animate(\r\n          '300ms cubic-bezier(0.4, 0.0, 0.2, 1)',\r\n          keyframes([\r\n            style({ height: '0vh', overflow: 'hidden' }),\r\n            style({ height: 'calc(100vh - {{bottomPixels}})', overflow: 'hidden' }),\r\n          ]),\r\n        ),\r\n      ],\r\n      { params: { bottomPixels: window.innerWidth > 600 ? '100px' : '50px' } },\r\n    ),\r\n  ]),\r\n];\r\n","<div [ngClass]=\"open() ? 'c-ew__container' : 'u-display-none'\">\r\n  <div #backdrop class=\"c-ew__backdrop\" (click)=\"closeDialog()\"></div>\r\n  <div #dialog class=\"c-ew__dialog mat-elevation-z24 u-border-radius\">\r\n    <div [ngClass]=\"{ 'c-ew__dialog-header mat-elevation-z2': open() }\">\r\n      <mat-card appearance=\"raised\" class=\"mat-elevation-z0\">\r\n        <button mat-icon-button class=\"back-arrow\" tippyTranslate=\"Form.Buttons.Return.Tip\" (click)=\"closeDialog()\">\r\n          <mat-icon>arrow_back</mat-icon>\r\n        </button>\r\n        <span class=\"title mat-headline-4\">{{ basics().label }}</span>\r\n      </mat-card>\r\n    </div>\r\n    <div>\r\n      <div [@itemShrinkAnimation]=\"open() ? 'closed' : 'open'\"></div>\r\n      <div\r\n        [class]=\"\r\n          'c-ew__dialog-content u-border-radius-bottom u-add-scrollbar u-hide-scrollbar' +\r\n          (applyEmptyClass() ? ' c-ew__dialog-content--empty' : '')\r\n        \"\r\n        [@contentExpandAnimation]=\"{\r\n          value: open() ? 'expanded' : 'closed',\r\n          params: { bottomPixels: calculateBottomPixels() },\r\n        }\"\r\n      >\r\n        <!-- This is where the content comes from the parent / calling HTML -->\r\n        <ng-content></ng-content>\r\n\r\n        <extended-fab-speed-dial class=\"adam\">\r\n          <ng-template extendedFabSpeedDialTriggerContent>\r\n            <button extended-fab-speed-dial-trigger\r\n              matRipple\r\n              (click)=\"closeDialog()\"\r\n            >\r\n              <mat-icon>done</mat-icon>\r\n              <span>{{ 'Form.Buttons.Return.Tip' | translate }}</span>\r\n            </button>\r\n          </ng-template>\r\n          @if (enableSave) {\r\n            <ng-template extendedFabSpeedDialActionsContent>\r\n              <button\r\n                extended-fab-speed-dial-action\r\n                matRipple\r\n                [ngClass]=\"{ 'appear-disabled': saveDisabled() }\"\r\n                (click)=\"saveAll(false)\"\r\n              >\r\n                <span>{{ 'Form.Buttons.Save' | translate }}</span>\r\n                <mat-icon>save</mat-icon>\r\n              </button>\r\n              <button\r\n                extended-fab-speed-dial-action\r\n                matRipple\r\n                [ngClass]=\"{ 'appear-disabled': saveDisabled() }\"\r\n                (click)=\"saveAll(true)\"\r\n              >\r\n                <span>{{ 'Form.Buttons.SaveAndClose' | translate }}</span>\r\n                <mat-icon>done_all</mat-icon>\r\n              </button>\r\n            </ng-template>\r\n          }\r\n        </extended-fab-speed-dial>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { CommonModule, NgClass } from '@angular/common';\r\nimport { Component, computed, ElementRef, inject, input, NgZone, ViewChild } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { transient } from 'projects/core';\r\nimport { computedObj } from 'projects/eav-ui/src/app/shared/signals/signal.utilities';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { ExtendedFabSpeedDialImports } from '../../../../shared/modules/extended-fab-speed-dial/extended-fab-speed-dial.imports';\r\nimport { EntityFormStateService } from '../../../entity-form/entity-form-state.service';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../form/forms-state.service';\r\nimport { EditRoutingService } from '../../../routing/edit-routing.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { DropzoneDraggingHelper } from '../dropzone-dragging.helper';\r\nimport { ContentExpandAnimation } from '../expand-dialog/content-expand.animation';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.DialogPopup,\r\n    templateUrl: './dialog-popup.html',\r\n    styleUrls: ['./dialog-popup.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        NgClass,\r\n        MatCardModule,\r\n        MatRippleModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        TranslateModule,\r\n        ...ExtendedFabSpeedDialImports,\r\n        TippyDirective,\r\n        CommonModule,\r\n    ]\r\n})\r\n// tslint:disable-next-line:max-line-length\r\nexport class DialogPopupComponent {\r\n  @ViewChild('backdrop') private backdropRef: ElementRef;\r\n  @ViewChild('dialog') private dialogRef: ElementRef;\r\n\r\n  applyEmptyClass = input<boolean>();\r\n\r\n  protected fieldState = inject(FieldState);\r\n  public config = this.fieldState.config;\r\n  public basics = this.fieldState.basics;\r\n\r\n  #editRoutingService = inject(EditRoutingService);\r\n  formsStateService = inject(FormsStateService);\r\n  private featuresService = inject(FeaturesService);\r\n\r\n  #formConfig = inject(FormConfigService);\r\n  enableSave = this.#formConfig.config.save.mode !== false; // if false, then no save button is shown\r\n  \r\n  #dropzoneDraggingHelper: DropzoneDraggingHelper;\r\n\r\n  #entityFormStateService = transient(EntityFormStateService);\r\n  \r\n  constructor(\r\n    private zone: NgZone,\r\n  ) { }\r\n  \r\n  saveDisabled = computedObj('saveDisabled', () => this.#entityFormStateService.isSaving() || this.formsStateService.saveButtonDisabled());\r\n\r\n  open = this.fieldState.isOpen\r\n\r\n  ngAfterViewInit() {\r\n    this.#dropzoneDraggingHelper = new DropzoneDraggingHelper(this.zone);\r\n    this.#dropzoneDraggingHelper.attach(this.backdropRef.nativeElement);\r\n    this.#dropzoneDraggingHelper.attach(this.dialogRef.nativeElement);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#dropzoneDraggingHelper.detach();\r\n  }\r\n\r\n  #hideAdamSponsor = this.featuresService.isEnabled[FeatureNames.NoSponsoredByToSic];\r\n  adamSponsorI18nKey = computed(() => this.#hideAdamSponsor()\r\n    ? 'Fields.Hyperlink.AdamFileManager.Name'\r\n    : 'Fields.Hyperlink.Default.Sponsor'\r\n  );\r\n\r\n  calculateBottomPixels() {\r\n    return window.innerWidth > 600 ? '100px' : '50px';\r\n  }\r\n\r\n  closeDialog() {\r\n    this.#editRoutingService.expand(false, this.config.index, this.config.entityGuid);\r\n  }\r\n\r\n  saveAll(close: boolean) {\r\n    this.formsStateService.triggerSave(close);\r\n  }\r\n}\r\n","import { CommonModule } from \"@angular/common\";\r\nimport { AfterViewInit, ChangeDetectorRef, Component, computed, ElementRef, inject, NgZone, OnDestroy, signal, ViewChild, ViewContainerRef } from \"@angular/core\";\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { vh } from '../../../../shared/helpers/viewport.helpers';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FormsStateService } from \"../../../form/forms-state.service\";\r\nimport { ConnectorHelper } from \"../../connector/connector.helper\";\r\nimport { FieldState } from \"../../field-state\";\r\nimport { FieldHelperTextComponent } from \"../../help-text/field-help-text\";\r\nimport { DialogPopupComponent } from \"../dialog-popup/dialog-popup\";\r\nimport { DropzoneDraggingHelper } from \"../dropzone-dragging.helper\";\r\nimport { WrappersCatalog } from \"../wrappers.constants\";\r\nimport { ContentExpandAnimation } from \"./content-expand.animation\";\r\nimport { PreviewHeight } from \"./expandable-wrapper.models\";\r\n\r\n@Component({\r\n    selector: WrappersCatalog.ExpandableWrapper,\r\n    templateUrl: './expandable-wrapper.html',\r\n    styleUrls: ['./expandable-wrapper.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        FieldHelperTextComponent,\r\n        DialogPopupComponent,\r\n        CommonModule,\r\n        DialogPopupComponent,\r\n        FieldHelperTextComponent\r\n    ]\r\n})\r\nexport class ExpandableWrapperComponent implements AfterViewInit, OnDestroy {\r\n  \r\n  log = classLog({ExpandableWrapperComponent});\r\n\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  /** Child tag which will contain the inner html */\r\n  @ViewChild('previewContainer') private previewContainerRef: ElementRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  public config = this.fieldState.config;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected settings = this.fieldState.settings;\r\n  protected ui = this.fieldState.ui;\r\n  protected uiValue = this.fieldState.uiValue;\r\n\r\n  focused = signal(false);\r\n\r\n  adamDisabled = this.config.adam.isDisabled;\r\n\r\n  previewHeight = computed(() => {\r\n    const settings = this.settings();\r\n    const previewHeight: PreviewHeight = {\r\n      minHeight: '36px',\r\n      maxHeight: '50vh',\r\n    };\r\n\r\n    if (this.config.inputTypeSpecs.inputType !== InputTypeCatalog.StringWysiwyg && settings.Dialog !== 'inline')\r\n      return previewHeight;\r\n\r\n    let rows = parseInt(settings.InlineInitialHeight, 10);\r\n    if (rows < 1)\r\n      rows = 1;\r\n\r\n    // header + rows\r\n    const maxHeightInPx = vh(50);\r\n    let minHeight = 40 + rows * 36;\r\n\r\n    if (minHeight > maxHeightInPx)\r\n      minHeight = maxHeightInPx;\r\n\r\n    previewHeight.minHeight = `${minHeight}px`;\r\n\r\n    return previewHeight;\r\n  })\r\n\r\n  private connectorCreator = transient(ConnectorHelper);\r\n  private dropzoneDraggingHelper: DropzoneDraggingHelper;\r\n\r\n  constructor(\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private zone: NgZone,\r\n    public formsStateService: FormsStateService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.config.focused$.subscribe(this.focused.set);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const l = this.log.fn('ngAfterViewInit');\r\n\r\n    const componentTagName = this.config.inputTypeSpecs.componentTagName;\r\n    l.a('ExpandableWrapper created for:', { componentTagName });\r\n    this.connectorCreator.init(\r\n      componentTagName,\r\n      this.previewContainerRef,\r\n      this.viewContainerRef,\r\n      this.changeDetectorRef,\r\n    );\r\n\r\n    this.dropzoneDraggingHelper = new DropzoneDraggingHelper(this.zone);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.log.fn('ngOnDestroy', null, 'destroying ExpandableWrapper');\r\n    this.dropzoneDraggingHelper.detach();\r\n  }\r\n}\r\n","export function vh(percentage: number) {\r\n  const viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n  return (percentage * viewportHeight) / 100;\r\n}\r\n\r\nexport function vw(percentage: number) {\r\n  const viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\r\n  return (percentage * viewportWidth) / 100;\r\n}\r\n","<app-dialog-popup>\r\n  <ng-container #fieldComponent></ng-container>\r\n</app-dialog-popup>\r\n<div class=\"c-ew__preview-holder\">\r\n  <mat-label class=\"c-ew__preview-label\" [ngClass]=\"{\r\n      'mat-caption' : uiValue(),\r\n      'mat-empty' : !uiValue(),\r\n      'mat-error' : ui().invalid && (ui().touched || ui().dirty) && !ui().disabled,\r\n      'color__primary' : !(ui().touchedAndInvalid) && !ui().disabled,\r\n      'my-label-disabled' : ui().disabled,\r\n      'c-ew__preview-label--focused': focused()\r\n      }\">\r\n    {{basics().labelWithRequired}}\r\n  </mat-label>\r\n  <div class=\"c-ew__preview\" [ngClass]=\"{\r\n      'c-ew__preview--invalid' : ui().invalid && (ui().touched || ui().dirty),\r\n      'c-ew__preview--disabled': ui().disabled,\r\n      'c-ew__preview--focused': focused()\r\n      }\">\r\n    <div class=\"c-ew__preview-container\">\r\n      <div #previewContainer class=\"c-ew__preview-content u-hide-scrollbar\" [ngClass]=\"{\r\n          'c-ew__preview-content--disabled': ui().disabled\r\n          }\" [ngStyle]=\"{\r\n          'min-height': previewHeight().minHeight,\r\n          'max-height': previewHeight().maxHeight\r\n          }\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <app-field-helper-text></app-field-helper-text>\r\n</div>\r\n","<!-- <pre>Wrapper.FeatureWarning Start - rEQ1: '{{ requiredFeatures()[0] }}'</pre> -->\r\n<div [ngClass]=\"{ mark: requiredFeatures().length }\">\r\n  <ng-container #fieldComponent></ng-container>\r\n  <!-- 2dm: for now, don't show the required features on the field, as we have it in the entire form -->\r\n  @if (false && requiredFeatures().length > 0) {\r\n    <div class=\"feature-warning\">\r\n      This uses features which are not licensed:\r\n      @for (feature of requiredFeatures(); track feature) {\r\n        {{ feature }}\r\n        <app-feature-icon-with-dialog [featureNameId]=\"feature\"></app-feature-icon-with-dialog>\r\n      }\r\n    </div>\r\n  }\r\n</div>\r\n<!-- <pre>Wrapper.FeatureWarning End</pre> -->\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, inject, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { FeatureIconWithDialogComponent } from '../../../../features/icons/feature-icon-with-dialog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.FeatureWarningWrapper,\r\n    templateUrl: './feature-warning-wrapper.html',\r\n    styleUrls: ['./feature-warning-wrapper.scss'],\r\n    imports: [\r\n        NgClass,\r\n        FeatureIconWithDialogComponent,\r\n    ]\r\n})\r\nexport class FeatureWarningWrapperComponent {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  #fieldState = inject(FieldState);\r\n\r\n  #features = inject(FeaturesService);\r\n\r\n  constructor() { }\r\n\r\n  requiredFeatures = computedObj('requiredFeatures', () => {\r\n    const req = this.#fieldState.requiredFeatures();\r\n    if (req.length === 0) return req;\r\n    // Check if feature is allowed to be used - NOT if it's enabled\r\n    return req.filter(f => !this.#features.allowUse[f]());\r\n  });\r\n\r\n  protected basics = this.#fieldState.basics;\r\n}\r\n","import { EmptyDefault } from 'projects/edit-types/src/FieldSettings-EmptyDefault';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from '../../logic/field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from '../../logic/field-settings-update-task';\r\n\r\nexport class EmptyDefaultSettingsHelper extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.EmptyDefault;\r\n\r\n  constructor() { super({ EmptyDefaultSettingsHelper }); }\r\n\r\n  update({ settings }: FieldSettingsUpdateTask): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & EmptyDefault;\r\n    fixedSettings.Visible ??= true;\r\n    fixedSettings.Collapsed ??= false;\r\n    fixedSettings.Notes ??= '';\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldSettingsHelperBase.add(EmptyDefaultSettingsHelper);\r\n","<mat-card appearance=\"raised\" class=\"eav-card-group-child shadow-bottom-z-1\" [ngClass]=\"{ 'force-hide': basics().visible === false }\">\r\n\r\n  <!-- The title bar with ^v buttons to toggle state -->\r\n  <div class=\"eav-card-header-group-child\" (click)=\"toggleCollapse()\">\r\n    <div class=\"my-title-bar eav-card-title-group mat-body-2\">\r\n      <mat-icon class=\"title-arrow\">{{ collapsed() ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}\r\n      </mat-icon>\r\n      <span class=\"title\">\r\n        {{ basics().label || config.fieldName }}\r\n      </span>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- The notes and all inner components -->\r\n  <mat-card-content class=\"eav-card-content-group-child\" [style.display]=\"collapsed() ? 'none' : 'block'\">\r\n    <div class=\"eav-layout-grid\">\r\n      <div class=\"eav-layout-grid__inner\">\r\n        <!-- Notes -->\r\n        @if (basics().notes; as note) {\r\n          <div class=\"eav-layout-grid__cell--span-12 mat-body-2\" align=\"start\">\r\n            <div class=\"description\" appChangeAnchorTarget [innerHtml]=\"note | safeHtml\"></div>\r\n          </div>\r\n        }\r\n        <!-- Components inside this -->\r\n        <div class=\"eav-layout-grid__cell--span-12\">\r\n          <ng-container #fieldComponent></ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </mat-card-content>\r\n</mat-card>","import { NgClass } from '@angular/common';\r\nimport { Component, ViewChild, ViewContainerRef, inject } from '@angular/core';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { EmptyDefault } from 'projects/edit-types/src/FieldSettings-EmptyDefault';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { SafeHtmlPipe } from '../../../../shared/pipes/safe-html.pipe';\r\nimport { FieldsSettingsService } from '../../../state/fields-settings.service';\r\nimport { ChangeAnchorTargetDirective } from '../../directives/change-anchor-target.directive';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\nimport { EmptyDefaultSettingsHelper } from './collapsible-wrapper-settings-helper';\r\n\r\n\r\n@Component({\r\n    selector: WrappersCatalog.CollapsibleWrapper,\r\n    templateUrl: './collapsible-wrapper.html',\r\n    styleUrls: ['./collapsible-wrapper.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        ChangeAnchorTargetDirective,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class CollapsibleWrapperComponent {\r\n\r\n  log = classLog({CollapsibleWrapperComponent});\r\n\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  #fieldState = inject(FieldState);\r\n  protected config = this.#fieldState.config;\r\n  protected group = this.#fieldState.group;\r\n  protected basics = this.#fieldState.basics;\r\n\r\n  /** Collapsed state - will be updated in various scenarios */\r\n  collapsed= this.#fieldState.settingExt('Collapsed');\r\n\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n\r\n  constructor() {\r\n    EmptyDefaultSettingsHelper.importMe();\r\n  }\r\n\r\n  toggleCollapse(): void {\r\n    const before = this.collapsed();\r\n    this.log.a('toggleCollapse', { before })\r\n    this.#fieldsSettingsSvc.updateSetting<FieldSettings & EmptyDefault>(this.#fieldState.name, { Collapsed: !before }, \"CollapsibleWrapperComponent\");\r\n  }\r\n}\r\n","import { Component, inject, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.HiddenWrapper,\r\n    templateUrl: './hidden-wrapper.html',\r\n    imports: []\r\n})\r\nexport class HiddenWrapperComponent {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected basics = this.fieldState.basics;\r\n\r\n  constructor() { }\r\n}\r\n","<!-- <pre>Wrapper.Hidden Start - VisibleAndEnabled: '{{ basics().visibleAndEnabled }}'</pre> -->\r\n<div [hidden]=\"!basics().visible\">\r\n  <ng-container #fieldComponent></ng-container>\r\n</div>\r\n<!-- <pre>Wrapper.Hidden End</pre> -->\r\n","<app-dialog-popup>\r\n  <ng-container #fieldComponent></ng-container>\r\n</app-dialog-popup>\r\n\r\n<!-- preview -->\r\n@if (preview(); as preV) {\r\n  <div class=\"c-hyperlink-default-field-preview\">\r\n    <div\r\n      class=\"c-ew__preview c-ew__preview--hyperlink\"\r\n      [ngClass]=\"{\r\n        'c-ew__preview--disabled': ui().disabled,\r\n        'c-ew__preview--last-in-group': config.isLastInGroup,\r\n      }\"\r\n    >\r\n      <!-- image / icon -->\r\n      <div\r\n        class=\"thumbnail-before-input\"\r\n        tippyTranslate=\"Fields.Hyperlink.Default.Fullscreen\"\r\n        [tippyDisabled]=\"ui().disabled\"\r\n        [ngClass]=\"{\r\n          'icon-before-input': uiValue() && !preV.isImage,\r\n          'thumbnail-before-input--disabled': ui().disabled,\r\n        }\"\r\n        [ngStyle]=\"{ 'background-image': uiValue() && preV.isImage ? preV.thumbnailUrl : '' }\"\r\n        (click)=\"expandDialog()\"\r\n      >\r\n        @if (uiValue() && !preV.isImage) {\r\n          <mat-icon [tippy]=\"preV.url\" tippyPlacement=\"right\" [svgIcon]=\"preV.icon\"></mat-icon>\r\n        }\r\n      </div>\r\n      <!-- field -->\r\n      <div class=\"c-ew__preview-field--short\">\r\n        <!-- input -->\r\n        <div class=\"hyperlink-input-link-wrapper\">\r\n          <mat-form-field\r\n            color=\"accent\"\r\n            class=\"eav-mat-form-field\"\r\n            [ngClass]=\"{\r\n              'mat-form-field-invalid': ui().touchedAndInvalid,\r\n            }\"\r\n          >\r\n            <input\r\n              matInput\r\n              class=\"eav-translate-on-dblclick\"\r\n              tippyTranslate=\"Fields.Hyperlink.Default.Tooltip\"\r\n              tippyPlacement=\"top\"\r\n              [placeholder]=\"basics().placeholder\"\r\n              (change)=\"setValue($event)\"\r\n              [disabled]=\"ui().disabled\"\r\n              (blur)=\"markAsTouched()\"\r\n              [value]=\"uiValue()\"\r\n              (keyup)=\"setValue($event)\"\r\n              appPasteClipboardImage\r\n              [config]=\"config\"\r\n              [elementType]=\"'input'\"\r\n            />\r\n            @if (buttonAdam() || buttonPage()) {\r\n              <div matTextSuffix class=\"c-ew__preview-suffix\">\r\n                <div\r\n                  class=\"c-ew__preview-suffix-text\"\r\n                  fxHide\r\n                  fxShow.gt-xs\r\n                  [ngClass]=\"{\r\n                    'c-ew__preview-suffix-text--disabled': ui().disabled,\r\n                  }\"\r\n                >\r\n                  {{ buttonAdam() ? ('Fields.Hyperlink.AdamFileManager.Hint' | translate) : '' }}\r\n                </div>\r\n                <!-- Open Dialog -->\r\n                @if (buttonAdam()) {\r\n                  <button\r\n                    mat-icon-button\r\n                    class=\"c-ew__preview-suffix-icon\"\r\n                    tippyTranslate=\"Fields.Hyperlink.Default.Fullscreen\"\r\n                    appClickStopPropagation\r\n                    [disabled]=\"ui().disabled\"\r\n                    (click)=\"expandDialog()\"\r\n                  >\r\n                    <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n                  </button>\r\n                }\r\n                <button\r\n                  mat-icon-button\r\n                  class=\"c-ew__preview-suffix-icon\"\r\n                  appClickStopPropagation\r\n                  [disabled]=\"!adamItem()?._imageConfigurationContentType\"\r\n                  [ngClass]=\"{ 'metadata-exists': adamItem()?._imageConfigurationId > 0 }\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.ImageSettings\"\r\n                  (click)=\"openImageConfiguration(adamItem())\"\r\n                >\r\n                  <mat-icon\r\n                    [tippyTranslate]=\"\r\n                      enableImageConfiguration()\r\n                        ? 'Fields.Hyperlink.AdamFileManager.ImageSettingsUnavailable'\r\n                        : 'Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled'\r\n                    \"\r\n                    [tippyDisabled]=\"adamItem()?._imageConfigurationContentType\"\r\n                    >filter_center_focus</mat-icon\r\n                  >\r\n                </button>\r\n                @if (buttonPage()) {\r\n                  <button\r\n                    mat-icon-button\r\n                    class=\"c-ew__preview-suffix-icon\"\r\n                    tippyTranslate=\"Fields.Hyperlink.Default.PageTip\"\r\n                    appClickStopPropagation\r\n                    [disabled]=\"ui().disabled\"\r\n                    (click)=\"openPagePicker()\"\r\n                  >\r\n                    <mat-icon svgIcon=\"sitemap\"></mat-icon>\r\n                  </button>\r\n                }\r\n              </div>\r\n            }\r\n            <mat-label [ngClass]=\"{ 'mat-error': ui().touchedAndInvalid }\">\r\n              {{ basics().labelWithRequired }}\r\n            </mat-label>\r\n          </mat-form-field>\r\n          <!-- link absolutely positioned above input -->\r\n          @if (preV.floatingText) {\r\n            <div class=\"hyperlink-floating\" fxHide fxShow.gt-xs>\r\n              <div class=\"hyperlink-floating__value\">{{ uiValue() }}</div>\r\n              <div class=\"hyperlink-floating__url-box\">\r\n                <a [href]=\"preV.url\" target=\"_blank\" tabindex=\"-1\" class=\"hyperlink-floating__url\" [tippy]=\"preV.url\">\r\n                  <span>{{ preV.floatingText }}</span>\r\n                </a>\r\n              </div>\r\n            </div>\r\n          }\r\n        </div>\r\n        <!-- helper text and adam text -->\r\n        <div class=\"c__helper-wrapper\">\r\n          <app-field-helper-text class=\"c__helper-wrapper--left\" [hyperlinkDefaultWrapperFix]=\"true\"> </app-field-helper-text>\r\n          @if (buttonAdam()) {\r\n            <div class=\"c-ew__preview-field-hint c__helper-wrapper--right\">\r\n              <span>{{ adamSponsorI18nKey() | translate }}</span>\r\n              <app-feature-icon-with-dialog [forText]=\"true\" [featureNameId]=\"'NoSponsoredByToSic'\"></app-feature-icon-with-dialog>\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n}\r\n","import { CommonModule, NgClass, NgStyle } from \"@angular/common\";\r\nimport { AfterViewInit, ChangeDetectorRef, Component, computed, inject, NgZone, OnDestroy, ViewChild, ViewContainerRef } from \"@angular/core\";\r\nimport { MatButtonModule } from \"@angular/material/button\";\r\nimport { MatDialog } from \"@angular/material/dialog\";\r\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\r\nimport { MatIconModule } from \"@angular/material/icon\";\r\nimport { MatInputModule } from \"@angular/material/input\";\r\nimport { TranslateModule } from \"@ngx-translate/core\";\r\nimport { FeatureIconWithDialogComponent } from 'projects/eav-ui/src/app/features/icons/feature-icon-with-dialog';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { SignalEquals } from '../../../../shared/signals/signal-equals';\r\nimport { FormConfigService } from \"../../../form/form-config.service\";\r\nimport { FormsStateService } from \"../../../form/forms-state.service\";\r\nimport { EditRoutingService } from \"../../../routing/edit-routing.service\";\r\nimport { LinkCacheService } from \"../../../shared/adam/link-cache.service\";\r\nimport { HyperlinkDefaultBaseComponent } from \"../../basic/hyperlink-default/hyperlink-default-base\";\r\nimport { PasteClipboardImageDirective } from \"../../directives/paste-clipboard-image.directive\";\r\nimport { FieldState } from \"../../field-state\";\r\nimport { FieldHelperTextComponent } from \"../../help-text/field-help-text\";\r\nimport { DialogPopupComponent } from \"../dialog-popup/dialog-popup\";\r\nimport { DropzoneDraggingHelper } from \"../dropzone-dragging.helper\";\r\nimport { ContentExpandAnimation } from \"../expand-dialog/content-expand.animation\";\r\nimport { WrappersCatalog } from \"../wrappers.constants\";\r\n\r\n\r\n@Component({\r\n    selector: WrappersCatalog.HyperlinkDefaultExpandableWrapper,\r\n    templateUrl: './hyperlink-default-expandable-wrapper.html',\r\n    styleUrls: ['./hyperlink-default-expandable-wrapper.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        NgClass,\r\n        MatIconModule,\r\n        NgStyle,\r\n        TranslateModule,\r\n        TippyDirective,\r\n        DialogPopupComponent,\r\n        FieldHelperTextComponent,\r\n        FeatureIconWithDialogComponent,\r\n        PasteClipboardImageDirective,\r\n        CommonModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n    ]\r\n})\r\n// tslint:disable-next-line:max-line-length\r\nexport class HyperlinkDefaultExpandableWrapperComponent extends HyperlinkDefaultBaseComponent implements AfterViewInit, OnDestroy {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  public config = this.fieldState.config;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected buttonAdam = computed(() => this.fieldState.settings().Buttons.includes('adam'), SignalEquals.bool);\r\n  protected buttonPage = computed(() => this.fieldState.settings().Buttons.includes('page'), SignalEquals.bool);\r\n  protected enableImageConfiguration= this.fieldState.settingExt('EnableImageConfiguration');\r\n\r\n  private dropzoneDraggingHelper: DropzoneDraggingHelper;\r\n  private editRoutingService: EditRoutingService;\r\n\r\n  constructor(\r\n    eavService: FormConfigService,\r\n    matDialog: MatDialog,\r\n    viewContainerRef: ViewContainerRef,\r\n    changeDetectorRef: ChangeDetectorRef,\r\n    linkCacheService: LinkCacheService,\r\n    editRoutingService: EditRoutingService,\r\n    private zone: NgZone,\r\n    public formsStateService: FormsStateService,\r\n    private featuresService: FeaturesService,\r\n  ) {\r\n    super(\r\n      eavService,\r\n      matDialog,\r\n      viewContainerRef,\r\n      changeDetectorRef,\r\n      linkCacheService,\r\n      formsStateService,\r\n    );\r\n    this.editRoutingService = editRoutingService;\r\n  }\r\n\r\n  #hideAdamSponsor = this.featuresService.isEnabled[FeatureNames.NoSponsoredByToSic];\r\n  adamSponsorI18nKey = computed(() => this.#hideAdamSponsor()\r\n    ? 'Fields.Hyperlink.AdamFileManager.Name'\r\n    : 'Fields.Hyperlink.Default.Sponsor'\r\n  );\r\n\r\n  ngAfterViewInit() {\r\n    this.dropzoneDraggingHelper = new DropzoneDraggingHelper(this.zone);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dropzoneDraggingHelper.detach();\r\n  }\r\n\r\n  markAsTouched() {\r\n    this.fieldState.ui().markTouched();\r\n  }\r\n\r\n  setValue(event: Event) {\r\n    const newValue = (event.target as HTMLInputElement).value;\r\n    this.fieldState.ui().setIfChanged(newValue);\r\n  }\r\n\r\n  expandDialog() {\r\n    if (this.fieldState.ui().disabled) return;\r\n    this.editRoutingService.expand(true, this.config.index, this.config.entityGuid);\r\n  }\r\n}\r\n","<app-dialog-popup [applyEmptyClass]=\"true\">\r\n  <ng-container #fieldComponent></ng-container>\r\n</app-dialog-popup>\r\n\r\n<!-- preview -->\r\n<div class=\"c-ew__preview-holder\">\r\n  <mat-label\r\n    class=\"c-ew__preview-label c-ew__color--primary\"\r\n    [ngClass]=\"{\r\n      'mat-caption': itemsNumber() > 0,\r\n      'mat-empty': itemsNumber() === 0,\r\n      'mat-error': ui().invalid && !config.initialDisabled,\r\n      color__primary: !ui().invalid && !config.initialDisabled,\r\n      'my-label-disabled': config.initialDisabled,\r\n    }\"\r\n  >\r\n    {{ basics().labelWithRequired }}\r\n  </mat-label>\r\n  <div\r\n    matRipple\r\n    class=\"c-ew__preview mat-ripple\"\r\n    [matRippleAnimation]=\"{ enterDuration: 360 }\"\r\n    (click)=\"expandDialog()\"\r\n    [ngClass]=\"{\r\n      'c-ew__preview--invalid': ui().invalid,\r\n      'c-ew__preview--disabled': config.initialDisabled,\r\n    }\"\r\n  >\r\n    <div [ngClass]=\"uiValue() ? 'c-ew__preview-container' : 'c-ew__preview-container--empty'\">\r\n      <div class=\"c-ew__preview-content\">\r\n        @for (item of items(); track trackByFn($index, item)) {\r\n          <!-- folders -->\r\n          @if (item.IsFolder) {\r\n            <div>\r\n              <div class=\"adam-browse-background-icon\">\r\n                <mat-icon svgIcon=\"folder\"></mat-icon>\r\n                <div class=\"adam-short-label mat-caption\">{{ item.Name }}</div>\r\n              </div>\r\n            </div>\r\n          }\r\n          <!-- files -->\r\n          @if (!item.IsFolder) {\r\n            <div>\r\n              @if (item.Type !== \"image\") {\r\n                <div class=\"adam-browse-background-icon\">\r\n                  @if (item._isMaterialIcon) {\r\n                    <mat-icon>{{ item._icon }}</mat-icon>\r\n                  }\r\n                  @if (!item._isMaterialIcon) {\r\n                    <mat-icon>{{ item._icon }}</mat-icon>\r\n                  }\r\n                  <div class=\"adam-short-label mat-caption\">{{ item.Name }}</div>\r\n                </div>\r\n              }\r\n              @if (item.Type === \"image\") {\r\n                <div class=\"adam-browse-background-image\">\r\n                  <img vm-dz-thumbnail=\"\" alt=\"{{ item.Id }}:{{ item.Name }}\" [src]=\"item.ThumbnailUrl\" />\r\n                </div>\r\n              }\r\n            </div>\r\n          }\r\n        }\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- hints -->\r\n  <div class=\"mat-caption c-ew__preview-hint\">\r\n    <div class=\"c__helper-wrapper--left\">\r\n      <app-field-helper-text></app-field-helper-text>\r\n    </div>\r\n    <div class=\"c__helper-wrapper--right c-ew__preview-hint-text\" fxHide fxShow.gt-xs>\r\n      <span>{{ adamSponsorI18nKey() | translate }} </span>\r\n      <app-feature-icon-with-dialog [forText]=\"true\" [featureNameId]=\"'NoSponsoredByToSic'\"></app-feature-icon-with-dialog>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { CommonModule } from \"@angular/common\";\r\nimport { AfterViewInit, Component, computed, inject, NgZone, OnDestroy, ViewChild, ViewContainerRef } from \"@angular/core\";\r\nimport { MatRippleModule } from \"@angular/material/core\";\r\nimport { MatIconModule } from \"@angular/material/icon\";\r\nimport { TranslateModule } from \"@ngx-translate/core\";\r\nimport { FeatureIconWithDialogComponent } from 'projects/eav-ui/src/app/features/icons/feature-icon-with-dialog';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { SignalEquals } from '../../../../shared/signals/signal-equals';\r\nimport { FormsStateService } from \"../../../form/forms-state.service\";\r\nimport { EditRoutingService } from \"../../../routing/edit-routing.service\";\r\nimport { FieldState } from \"../../field-state\";\r\nimport { FieldHelperTextComponent } from \"../../help-text/field-help-text\";\r\nimport { DialogPopupComponent } from \"../dialog-popup/dialog-popup\";\r\nimport { DropzoneDraggingHelper } from \"../dropzone-dragging.helper\";\r\nimport { ContentExpandAnimation } from \"../expand-dialog/content-expand.animation\";\r\nimport { WrappersCatalog } from \"../wrappers.constants\";\r\n\r\n@Component({\r\n    selector: WrappersCatalog.HyperlinkLibraryExpandableWrapper,\r\n    templateUrl: './hyperlink-library-expandable-wrapper.html',\r\n    styleUrls: ['./hyperlink-library-expandable-wrapper.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        DialogPopupComponent,\r\n        MatIconModule,\r\n        MatRippleModule,\r\n        FieldHelperTextComponent,\r\n        FeatureIconWithDialogComponent,\r\n        TranslateModule,\r\n        CommonModule,\r\n    ]\r\n})\r\n// tslint:disable-next-line:max-line-length\r\nexport class HyperlinkLibraryExpandableWrapperComponent implements AfterViewInit, OnDestroy {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected config = this.fieldState.config;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected ui = this.fieldState.ui;\r\n  protected uiValue = this.fieldState.uiValue;\r\n\r\n  protected items = computed(() => this.config.adam.items().slice(0, 9));\r\n  protected itemsNumber = computed(() => this.config.adam.items().length, SignalEquals.number);\r\n\r\n  #hideAdamSponsor = this.featuresService.isEnabled[FeatureNames.NoSponsoredByToSic];\r\n  adamSponsorI18nKey = computed(() => this.#hideAdamSponsor()\r\n    ? 'Fields.Hyperlink.AdamFileManager.Name'\r\n    : 'Fields.Hyperlink.Default.Sponsor'\r\n  );\r\n\r\n  private dropzoneDraggingHelper: DropzoneDraggingHelper;\r\n\r\n  constructor(\r\n    private zone: NgZone,\r\n    private editRoutingService: EditRoutingService,\r\n    public formsStateService: FormsStateService,\r\n    private featuresService: FeaturesService,\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.dropzoneDraggingHelper = new DropzoneDraggingHelper(this.zone);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dropzoneDraggingHelper.detach();\r\n  }\r\n\r\n  trackByFn(index: number, item: AdamItem) {\r\n    return item.Id;\r\n  }\r\n\r\n  expandDialog() {\r\n    if (this.config.initialDisabled) return;\r\n    this.editRoutingService.expand(true, this.config.index, this.config.entityGuid);\r\n  }\r\n}","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>\r\n      {{ 'LangMenu.Dialog.CantAutoTranslate' | translate }}\r\n    </mat-card-title>\r\n    @if (dialogData.isAutoTranslateAll) {\r\n      <mat-card-subtitle>\r\n        {{'LangMenu.Dialog.NoAutoTranslatableFields' | translate }}\r\n      </mat-card-subtitle>\r\n    }\r\n    @if (!dialogData.isAutoTranslateAll) {\r\n      <mat-card-subtitle>\r\n        {{'LangMenu.Dialog.ThisFieldIsNotAutoTranslatable' | translate }}\r\n      </mat-card-subtitle>\r\n    }\r\n  </mat-card-header>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-button color=\"accent\" (click)=\"closeDialog()\">{{'Features.Close' | translate }}</button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@Component({\r\n    selector: 'app-auto-translate-disabled-warning-dialog',\r\n    templateUrl: './auto-translate-disabled-warning-dialog.html',\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        TranslateModule,\r\n    ]\r\n})\r\nexport class AutoTranslateDisabledWarningDialog implements OnInit {\r\n  constructor(\r\n    private dialog: MatDialogRef<AutoTranslateDisabledWarningDialog>,\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: any,\r\n  ) { }\r\n\r\n  ngOnInit(): void { }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n}","export const I18nKeys = {\r\n  NoTranslate: 'NoTranslate',\r\n  FromPrimary: 'FromPrimary',\r\n  FromOther: 'FromOther',\r\n  LinkReadOnly: 'LinkReadOnly',\r\n  LinkShared: 'LinkShared',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { Of } from '../../../../../../../../core';\r\nimport { FormLanguage, Language } from '../../../../form/form-languages.model';\r\nimport { FieldReader } from '../../../../localization/field-reader';\r\nimport { TranslationLinks } from '../../../../localization/translation-link.constants';\r\nimport { EavEntityAttributes } from '../../../../shared/models/eav';\r\nimport { I18nKeys } from './translate-menu-dialog.constants';\r\nimport { TranslateMenuDialogTemplateLanguage } from './translate-menu-dialog.models';\r\n\r\nexport function getTemplateLanguages(\r\n  config: { fieldName: string }, // FieldConfigSet,\r\n  language: FormLanguage,\r\n  languages: Language[],\r\n  attributes: EavEntityAttributes,\r\n  linkType: Of<typeof TranslationLinks>,\r\n): TranslateMenuDialogTemplateLanguage[] {\r\n  const templateLanguages = languages\r\n    .filter(lang => lang.NameId !== language.current)\r\n    .map(lang => {\r\n      const values = attributes[config.fieldName];\r\n      const disabled = (linkType === TranslationLinks.LinkReadWrite && !lang.IsAllowed)\r\n        || !new FieldReader(values, FormLanguage.diffCurrent(language, lang.NameId)).hasEditableValues;\r\n      const templateLanguage: TranslateMenuDialogTemplateLanguage = {\r\n        key: lang.NameId,\r\n        disabled,\r\n      };\r\n      return templateLanguage;\r\n    });\r\n  return templateLanguages;\r\n}\r\n\r\nexport function getTemplateLanguagesWithContent(\r\n  language: FormLanguage,\r\n  languages: Language[],\r\n  attributes: EavEntityAttributes,\r\n  linkType: Of<typeof TranslationLinks>,\r\n  translatableFields?: string[],\r\n): TranslateMenuDialogTemplateLanguage[] {\r\n  const templateLanguages = languages\r\n    .filter(lang => lang.NameId !== language.current)\r\n    .map(lang => {\r\n      let countTranslatableFields: number = 0;\r\n      let countTranslatableFieldsWithContent: number = 0;\r\n      let isDisabled: boolean = false;\r\n      const langDefToUse = FormLanguage.diffCurrent(language, lang.NameId);\r\n      translatableFields.forEach(field => {\r\n        const values = attributes[field];\r\n        const fieldReader = new FieldReader(values, langDefToUse);\r\n        countTranslatableFields += fieldReader.countEditable(); // LocalizationHelpers.countEditableValues(values, langDefToUse);\r\n        countTranslatableFieldsWithContent += fieldReader.countEditableWithContents(); // LocalizationHelpers.countEditableValuesWithContent(values, langDefToUse);\r\n        isDisabled = (linkType === TranslationLinks.LinkReadWrite && !lang.IsAllowed)\r\n          || countTranslatableFields == 0;\r\n      });\r\n      const templateLanguage: TranslateMenuDialogTemplateLanguage = {\r\n        key: lang.NameId,\r\n        disabled: isDisabled,\r\n        noTranslatableFields: countTranslatableFields,\r\n        noTranslatableFieldsThatHaveContent: countTranslatableFieldsWithContent,\r\n      };\r\n      return templateLanguage;\r\n    });\r\n  return templateLanguages;\r\n}\r\n\r\nexport function findI18nKey(translationLink: Of<typeof TranslationLinks>): Of<typeof I18nKeys> {\r\n  switch (translationLink) {\r\n    case TranslationLinks.Translate:\r\n      return I18nKeys.FromPrimary;\r\n    case TranslationLinks.DontTranslate:\r\n      return I18nKeys.NoTranslate;\r\n    case TranslationLinks.LinkReadOnly:\r\n      return I18nKeys.LinkReadOnly;\r\n    case TranslationLinks.LinkReadWrite:\r\n      return I18nKeys.LinkShared;\r\n    case TranslationLinks.LinkCopyFrom:\r\n      return I18nKeys.FromOther;\r\n  }\r\n}\r\n","import { Component, inject, Inject, signal } from '@angular/core';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { Of } from '../../../../../core';\r\nimport { I18nKeys } from '../../edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.constants';\r\nimport { findI18nKey } from '../../edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.helpers';\r\nimport { TranslateMenuDialogData } from '../../edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.models';\r\nimport { FormConfigService } from '../../edit/form/form-config.service';\r\nimport { LanguageService } from '../../edit/localization/language.service';\r\nimport { TranslationStateCore } from '../../edit/localization/translate-state.model';\r\nimport { TranslationLinks } from '../../edit/localization/translation-link.constants';\r\nimport { ItemService } from '../../edit/state/item.service';\r\nimport { computedObj } from '../signals/signal.utilities';\r\n\r\ninterface TranslationInfo {\r\n  showLanguageSelection: boolean;\r\n  i18nRoot: string;\r\n  submitDisabled: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-translate-helper-base',\r\n  template: '',\r\n})\r\nexport abstract class TranslateHelperComponent {\r\n\r\n  #languageService = inject(LanguageService);\r\n  #itemService = inject(ItemService);\r\n  public formConfig = inject(FormConfigService);\r\n\r\n  constructor(@Inject(MAT_DIALOG_DATA) public dialogData: TranslateMenuDialogData) {}\r\n\r\n  TranslationLinks = TranslationLinks;\r\n  I18nKeys = I18nKeys;\r\n\r\n  public noLanguageRequired: Of<typeof TranslationLinks>[];\r\n\r\n  protected language = this.formConfig.language;\r\n  public translationStateSignal = signal<TranslationStateCore>(this.dialogData.translationState);\r\n\r\n  protected translationInfo = computedObj<TranslationInfo>('translationInfo', () => {\r\n    const translationState = this.translationStateSignal();\r\n    this.noLanguageRequired = [TranslationLinks.Translate, TranslationLinks.DontTranslate];\r\n    return {\r\n      showLanguageSelection: !this.noLanguageRequired.includes(translationState.linkType),\r\n      i18nRoot: `LangMenu.Dialog.${findI18nKey(translationState.linkType)}`,\r\n      submitDisabled: translationState.language === '' && !this.noLanguageRequired.includes(translationState.linkType),\r\n    };\r\n  });\r\n\r\n  protected languages = this.#languageService.getAllSignal();\r\n  protected itemAttributes = this.#itemService.itemAttributesSignal(this.dialogData.config.entityGuid);\r\n\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\n\r\n@Component({\r\n    selector: 'app-snack-bar-warning-demo',\r\n    templateUrl: './snack-bar-warning-demo.html',\r\n    styleUrls: ['./snack-bar-warning-demo.scss'],\r\n    imports: [\r\n        TranslateModule,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class SnackBarWarningDemoComponent {\r\n  constructor() { }\r\n}\r\n","<h3 [innerHTML]=\"'LangMenu.SnackBar.Title' | translate | safeHtml\"></h3>\r\n<p [innerHTML]=\"'LangMenu.SnackBar.Body' | translate | safeHtml\" class=\"snack-bar-warning-demo-white-hyperlink\"></p>","<mat-card class=\"auto-translate-menu-dialog-card u-hide-scrollbar\">\r\n  <app-feature-info-box class=\"feature-info\" [featureNameId]=\"EditUiTranslateWithGoogle\"></app-feature-info-box>\r\n  <mat-card-header>\r\n    <mat-card-title>\r\n      {{ 'LangMenu.Dialog.AutoTranslateAll.Title' | translate }}\r\n    </mat-card-title>\r\n    <mat-card-subtitle [innerHTML]=\"'LangMenu.Dialog.AutoTranslateAll.Body' | translate | safeHtml\">\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content class=\"eav-card-content__no-padding\">\r\n    <mat-action-list>\r\n      @for (language of languagesSig(); track language) {\r\n      <mat-list-item (click)=\"setLanguage(language.key)\"\r\n        [disabled]=\"language.disabled || !isTranslateWithGoogleFeatureEnabled()\" [ngClass]=\"{\r\n            'eav-list-item__focus': translationStateSignal().language === language.key,\r\n            'list-item__disabled': language.disabled || !isTranslateWithGoogleFeatureEnabled()\r\n            }\">\r\n        <mat-icon matListItemIcon [ngClass]=\"{ 'list-item-icon__disabled': language.disabled }\">language</mat-icon>\r\n        <span matListItemTitle>{{ language.key }}\r\n          @if (dialogData.isTranslateMany) {\r\n          <span>\r\n            @if (language.noTranslatableFields == 0) {\r\n            <span>({{\"LangMenu.Dialog.AutoTranslateAll.NoContent\" |\r\n              translate}})\r\n            </span>\r\n            }\r\n            @if (language.noTranslatableFields != 0) {\r\n            <span>\r\n              @if (language.noTranslatableFields == dialogData.translatableFields.length) {\r\n              <span>\r\n                @if (dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent == 0) {\r\n                <span>({{\"LangMenu.Dialog.AutoTranslateAll.AllTranslatableFields\"\r\n                  | translate}})\r\n                </span>\r\n                }\r\n                @if (dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent != 0) {\r\n                <span>({{\"LangMenu.Dialog.AutoTranslateAll.AllTranslatableFields\"\r\n                  | translate}},\r\n                  {{dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent}}\r\n                  {{\"LangMenu.Dialog.AutoTranslateAll.Empty\" | translate}})\r\n                </span>\r\n                }\r\n              </span>\r\n              }\r\n              @if (language.noTranslatableFields != dialogData.translatableFields.length) {\r\n              <span>\r\n                @if (dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent == 0) {\r\n                <span>({{language.noTranslatableFields}}\r\n                  {{\"LangMenu.Dialog.AutoTranslateAll.Of\" | translate}}\r\n                  {{dialogData.translatableFields.length}} {{\"LangMenu.Dialog.AutoTranslateAll.TranslatableFields\" |\r\n                  translate}})\r\n                </span>\r\n                }\r\n                @if (dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent != 0) {\r\n                <span>({{language.noTranslatableFields}}\r\n                  {{\"LangMenu.Dialog.AutoTranslateAll.Of\" | translate}}\r\n                  {{dialogData.translatableFields.length}} {{\"LangMenu.Dialog.AutoTranslateAll.TranslatableFields\" |\r\n                  translate}}\r\n                  , {{dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent}}\r\n                  {{\"LangMenu.Dialog.AutoTranslateAll.Empty\" | translate}})\r\n                </span>\r\n                }\r\n              </span>\r\n              }\r\n            </span>\r\n            }\r\n          </span>\r\n          }\r\n        </span>\r\n      </mat-list-item>\r\n      }\r\n    </mat-action-list>\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, Inject, OnInit, computed, inject } from '@angular/core';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FeatureInfoBoxComponent } from '../../../features/feature-info-box/feature-info-box';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { TranslateHelperComponent } from '../../../shared/components/translate-helper';\r\nimport { EditApiKeyPaths } from '../../../shared/constants/eav.constants';\r\nimport { ApiKeySpecs } from '../../../shared/models/dialog-context.models';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\nimport { isCtrlS } from '../../dialog/main/keyboard-shortcuts';\r\nimport { getTemplateLanguages, getTemplateLanguagesWithContent } from '../../fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.helpers';\r\nimport { TranslateMenuDialogData } from '../../fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.models';\r\nimport { FieldsTranslateService } from '../../state/fields-translate.service';\r\nimport { SnackBarWarningDemoComponent } from '../snack-bar-warning-demo/snack-bar-warning-demo';\r\nimport { TranslationStateCore } from '../translate-state.model';\r\n\r\n@Component({\r\n  selector: 'app-auto-translate-menu-dialog',\r\n  templateUrl: './auto-translate-menu-dialog.html',\r\n  styleUrls: ['./auto-translate-menu-dialog.scss'],\r\n  imports: [\r\n    MatCardModule,\r\n    FeatureInfoBoxComponent,\r\n    MatListModule,\r\n    NgClass,\r\n    MatIconModule,\r\n    TranslateModule,\r\n    SafeHtmlPipe,\r\n  ]\r\n})\r\nexport class AutoTranslateMenuDialogComponent extends TranslateHelperComponent implements OnInit {\r\n\r\n  public features = inject(FeaturesService);\r\n  public isTranslateWithGoogleFeatureEnabled = this.features.isEnabled[FeatureNames.EditUiTranslateWithGoogle];\r\n  EditUiTranslateWithGoogle = FeatureNames.EditUiTranslateWithGoogle;\r\n\r\n  protected languagesSig = computed(() => {\r\n    const languages = this.languages();\r\n    const language = this.language();\r\n    const attributes = this.itemAttributes();\r\n    const translationState = this.translationStateSignal();\r\n\r\n    return this.dialogData.isTranslateMany\r\n      ? getTemplateLanguagesWithContent(language, languages, attributes, translationState.linkType, this.dialogData.translatableFields)\r\n      : getTemplateLanguages({ fieldName: this.dialogData.config.fieldName ?? '' }, language, languages, attributes, translationState.linkType);\r\n  });\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<AutoTranslateMenuDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: TranslateMenuDialogData,\r\n    private fieldsTranslateService: FieldsTranslateService,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    super(dialogData);\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlS(event))\r\n        event.preventDefault();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // If not enabled, ensure that after closed ...??? @STV\r\n    if (this.isTranslateWithGoogleFeatureEnabled())\r\n      this.dialog.afterClosed().subscribe(() => this.snackBar.dismiss());\r\n\r\n    // If the demo API key is being used, show snackbar warning\r\n    const apiKeyInfo = this.formConfig.settings.Values[EditApiKeyPaths.GoogleTranslate] as ApiKeySpecs;\r\n    if (apiKeyInfo.IsDemo)\r\n      this.snackBar.openFromComponent(SnackBarWarningDemoComponent);\r\n  }\r\n\r\n  setLanguage(language: string): void {\r\n    const newTranslationState: TranslationStateCore = { ...this.translationStateSignal(), language };\r\n    this.translationStateSignal.set(newTranslationState);\r\n\r\n    const oldState = this.dialogData.translationState;\r\n    const isEqual = oldState.language === newTranslationState.language;\r\n    if (isEqual) {\r\n      this.closeDialog();\r\n      return;\r\n    }\r\n\r\n    this.dialogData.isTranslateMany\r\n      ? this.fieldsTranslateService.autoTranslateMany(newTranslationState.language)\r\n      : this.fieldsTranslateService.autoTranslate([this.dialogData.config.fieldName], newTranslationState.language);\r\n\r\n    this.closeDialog();\r\n  }\r\n\r\n  private closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n}\r\n","  <mat-card class=\"translate-menu-dialog-card u-hide-scrollbar\">\r\n    <mat-card-header>\r\n      <mat-card-title>\r\n        {{ 'LangMenu.Dialog.Title' | translate: { name: dialogData.config.fieldName || 'LangMenu.AllFields' | translate } }}\r\n      </mat-card-title>\r\n      <mat-card-subtitle>\r\n        {{ 'LangMenu.Dialog.Intro' | translate }}\r\n      </mat-card-subtitle>\r\n    </mat-card-header>\r\n    <mat-card-content class=\"eav-card-content__no-padding\">\r\n      <mat-nav-list toggle focus>\r\n        @if (!isPrimaryLang()) {\r\n          <mat-list-item\r\n            [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.DontTranslate }\"\r\n            (click)=\"setLinkType(TranslationLinks.DontTranslate)\">\r\n            <mat-icon matListItemIcon color=\"accent\">lock</mat-icon>\r\n            <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.NoTranslate + '.Title') | translate : { primary: language().primary } }}</span>\r\n            <span matListItemLine>{{ ('LangMenu.Dialog.' + I18nKeys.NoTranslate + '.Body') | translate : { primary: language().primary } }}</span>\r\n          </mat-list-item>\r\n          <mat-list-item lines=3\r\n            [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.Translate }\"\r\n            (click)=\"setLinkType(TranslationLinks.Translate)\">\r\n            <mat-icon matListItemIcon color=\"accent\">lock_open</mat-icon>\r\n            <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.FromPrimary + '.Title') | translate : { primary: language().primary } }}</span>\r\n            <span>{{ ('LangMenu.Dialog.' + I18nKeys.FromPrimary + '.Body') | translate : { primary: language().primary } }}</span>\r\n          </mat-list-item>\r\n        }\r\n        <mat-list-item lines=3\r\n          [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.LinkCopyFrom }\"\r\n          (click)=\"setLinkType(TranslationLinks.LinkCopyFrom)\">\r\n          <mat-icon matListItemIcon color=\"accent\">translate</mat-icon>\r\n          <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.FromOther + '.Title') | translate : { primary: language().primary } }}</span>\r\n          <span>{{ ('LangMenu.Dialog.' + I18nKeys.FromOther + '.Body') | translate : { primary: language().primary }\r\n          }}</span>\r\n        </mat-list-item>\r\n        <mat-list-item\r\n          [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.LinkReadOnly }\"\r\n          (click)=\"setLinkType(TranslationLinks.LinkReadOnly)\">\r\n          <mat-icon matListItemIcon color=\"accent\">link</mat-icon>\r\n          <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.LinkReadOnly + '.Title') | translate : { primary: language().primary } }}</span>\r\n          <span matListItemLine>{{ ('LangMenu.Dialog.' + I18nKeys.LinkReadOnly + '.Body') | translate : { primary: language().primary } }}</span>\r\n        </mat-list-item>\r\n        <mat-list-item lines=3\r\n          [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.LinkReadWrite }\"\r\n          (click)=\"setLinkType(TranslationLinks.LinkReadWrite)\">\r\n          <mat-icon matListItemIcon color=\"accent\">share</mat-icon>\r\n          <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.LinkShared + '.Title') | translate : { primary: language().primary } }}</span>\r\n          <span>{{ ('LangMenu.Dialog.' + I18nKeys.LinkShared + '.Body') | translate : { primary: language().primary }\r\n          }}</span>\r\n        </mat-list-item>\r\n      </mat-nav-list>\r\n      @if (translationInfo().showLanguageSelection) {\r\n        <div>\r\n          <mat-card-header>\r\n            <mat-card-title>\r\n              {{ (translationInfo().i18nRoot + '.Subtitle') | translate }}\r\n            </mat-card-title>\r\n            <mat-card-subtitle>\r\n              {{'LangMenu.Dialog.PickLanguageIntro' | translate }}\r\n            </mat-card-subtitle>\r\n          </mat-card-header>\r\n          <mat-action-list>\r\n            @for (language of languagesSig(); track language) {\r\n              <mat-list-item (click)=\"setLanguage(language.key)\"\r\n                [disabled]=\"language.disabled\" [ngClass]=\"{\r\n                'eav-list-item__focus': translationStateSignal().language === language.key,\r\n                'list-item__disabled': language.disabled\r\n                }\">\r\n                <mat-icon matListItemIcon [ngClass]=\"{ 'list-item-icon__disabled': language.disabled }\">language</mat-icon>\r\n                <span matListItemTitle>{{ language.key }}</span>\r\n              </mat-list-item>\r\n            }\r\n          </mat-action-list>\r\n        </div>\r\n      }\r\n    </mat-card-content>\r\n    <mat-card-actions align=\"end\">\r\n      <button mat-button color=\"accent\" [disabled]=\"translationInfo().submitDisabled\" (click)=\"run()\">OK</button>\r\n    </mat-card-actions>\r\n  </mat-card>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, computed, Inject } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { Of } from '../../../../../../../../core';\r\nimport { TranslateHelperComponent } from '../../../../../shared/components/translate-helper';\r\nimport { isCtrlS } from '../../../../dialog/main/keyboard-shortcuts';\r\nimport { TranslationStateCore } from '../../../../localization/translate-state.model';\r\nimport { TranslationLinks } from '../../../../localization/translation-link.constants';\r\nimport { FieldsTranslateService } from '../../../../state/fields-translate.service';\r\nimport { getTemplateLanguages } from './translate-menu-dialog.helpers';\r\nimport { TranslateMenuDialogData } from './translate-menu-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-translate-menu-dialog',\r\n  templateUrl: './translate-menu-dialog.html',\r\n  styleUrls: ['./translate-menu-dialog.scss'],\r\n  imports: [\r\n    MatCardModule,\r\n    MatListModule,\r\n    NgClass,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    TranslateModule,\r\n  ]\r\n})\r\nexport class TranslateMenuDialogComponent extends TranslateHelperComponent {\r\n\r\n  protected languagesSig = computed(() => {\r\n    const languages = this.languages();\r\n    const language = this.language();\r\n    const attributes = this.itemAttributes();\r\n    const translationState = this.translationStateSignal();\r\n\r\n    const fieldName = this.dialogData.isTranslateMany\r\n      ? this.dialogData.translatableFields?.[0] ?? ''\r\n      : this.dialogData.config.fieldName ?? '';\r\n\r\n    return getTemplateLanguages({ fieldName }, language, languages, attributes, translationState.linkType);\r\n  });\r\n  \r\n  public isPrimaryLang = computed(() => this.language().current === this.language().primary);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<TranslateMenuDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: TranslateMenuDialogData,\r\n    public fieldsTranslateService: FieldsTranslateService,\r\n  ) {\r\n    super(dialogData); //\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlS(event))\r\n        event.preventDefault();\r\n    });\r\n  }\r\n\r\n  setLinkType(linkType: Of<typeof TranslationLinks>): void {\r\n    const newTranslationState: TranslationStateCore = {\r\n      linkType,\r\n      language: this.noLanguageRequired.includes(linkType) ? '' : this.translationStateSignal().language,\r\n    };\r\n    this.translationStateSignal.set(newTranslationState);\r\n  }\r\n\r\n  setLanguage(language: string): void {\r\n    const newTranslationState: TranslationStateCore = { ...this.translationStateSignal(), language };\r\n    this.translationStateSignal.set(newTranslationState);\r\n  }\r\n\r\n  run(): void {\r\n    const newState = this.translationStateSignal();\r\n    const oldState = this.dialogData.translationState;\r\n\r\n    const noChange = oldState.linkType === newState.linkType && oldState.language === newState.language;\r\n    if (noChange)\r\n      return this.closeDialog();\r\n\r\n    const applyToField = (fieldName: string) => {\r\n      switch (newState.linkType) {\r\n        case TranslationLinks.Translate:\r\n          this.fieldsTranslateService.unlock(fieldName);\r\n          break;\r\n        case TranslationLinks.DontTranslate:\r\n          this.fieldsTranslateService.lock(fieldName);\r\n          break;\r\n        case TranslationLinks.LinkReadOnly:\r\n          this.fieldsTranslateService.linkReadOnly(fieldName, newState.language);\r\n          break;\r\n        case TranslationLinks.LinkReadWrite:\r\n          this.fieldsTranslateService.linkReadWrite(fieldName, newState.language);\r\n          break;\r\n        case TranslationLinks.LinkCopyFrom:\r\n          this.fieldsTranslateService.copyFrom(fieldName, newState.language);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n\r\n    if (this.dialogData.isTranslateMany && this.dialogData.translatableFields?.length) {\r\n      for (const fieldName of this.dialogData.translatableFields) {\r\n        applyToField(fieldName);\r\n      }\r\n    } else {\r\n      // single-field behavior (existing)\r\n      applyToField(this.dialogData.config.fieldName!);\r\n    }\r\n\r\n    this.closeDialog();\r\n  }\r\n\r\n  private closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n}","@if (canTranslate()) {\r\n  <div class=\"my-flex-main\">\r\n    <div class=\"my-flex-inside eav-shared-languages-container\" [ngClass]=\"translationStateClass()\">\r\n      <div class=\"eav-shared-languages mat-caption\" [ngClass]=\"{ 'eav-shared-languages--disabled': disabled() }\">\r\n        {{translationState().infoLabel ? (translationState().infoLabel | translate:{ languages:\r\n        translationState().infoMessage }): '' }}\r\n      </div>\r\n      <div tippyTranslate=\"LangMenu.NotTranslatable\" [tippyDisabled]=\"!disableTranslateButtonSignal()\" tippyPlacement=\"top\">\r\n        <button mat-icon-button class=\"eav-translate-icon-button\" [matMenuTriggerFor]=\"menu\"\r\n          [disabled]=\"disableTranslateButtonSignal()\" [ngClass]=\"{ 'hidden': hideTranslateButton() }\">\r\n          <mat-icon class=\"eav-translate-icon\">translate</mat-icon>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <ng-template matMenuContent>\r\n        <button mat-menu-item (click)=\"translate()\"\r\n          [ngClass]=\"{ 'eav-menu-item-selected':translationState().linkType === TranslationLinks.Translate }\">\r\n          {{ 'LangMenu.Translate' | translate }}\r\n        </button>\r\n        <button mat-menu-item (click)=\"openAutoTranslateMenuDialog(translationState())\"\r\n          [ngClass]=\"{ 'eav-menu-item-selected':translationState().linkType === TranslationLinks.Translate }\">\r\n          {{ 'LangMenu.AutoTranslate' | translate }}\r\n          <app-feature-icon-indicator [featureNameId]=\"'EditUiTranslateWithGoogle'\"></app-feature-icon-indicator>\r\n        </button>\r\n        @if(language().current !== language().primary) {\r\n          <button mat-menu-item (click)=\"dontTranslate()\"\r\n            [ngClass]=\"{ 'eav-menu-item-selected':translationState().linkType === TranslationLinks.DontTranslate }\">\r\n            {{ 'LangMenu.NoTranslate' | translate }}\r\n          </button>\r\n        }\r\n        <button mat-menu-item (click)=\"openTranslateMenuDialog(translationState())\"\r\n          [ngClass]=\"{ 'eav-menu-item-selected':translationState().language !== '' }\">\r\n          {{ 'LangMenu.Link' | translate }}\r\n        </button>\r\n      </ng-template>\r\n    </mat-menu>\r\n  </div>\r\n}","import { NgClass } from '@angular/common';\r\nimport { Component, inject, input, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FeatureIconIndicatorComponent } from '../../../../../features/icons/feature-icon-indicator';\r\nimport { TippyDirective } from '../../../../../shared/directives/tippy.directive';\r\nimport { computedObj } from '../../../../../shared/signals/signal.utilities';\r\nimport { FormConfigService } from '../../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../../form/forms-state.service';\r\nimport { AutoTranslateDisabledWarningDialog } from '../../../../localization/auto-translate-disabled-warning-dialog/auto-translate-disabled-warning-dialog';\r\nimport { AutoTranslateMenuDialogComponent } from '../../../../localization/auto-translate-menu-dialog/auto-translate-menu-dialog';\r\nimport { TranslationState } from '../../../../localization/translate-state.model';\r\nimport { TranslationLinks } from '../../../../localization/translation-link.constants';\r\nimport { FieldsTranslateService } from '../../../../state/fields-translate.service';\r\nimport { FieldState } from '../../../field-state';\r\nimport { TranslateMenuDialogComponent } from '../translate-menu-dialog/translate-menu-dialog';\r\nimport { TranslateMenuDialogData } from '../translate-menu-dialog/translate-menu-dialog.models';\r\nimport { TranslateMenuHelpers } from './translate-menu.helpers';\r\n\r\n@Component({\r\n  selector: 'app-translate-menu',\r\n  templateUrl: './translate-menu.html',\r\n  styleUrls: ['./translate-menu.scss'],\r\n  imports: [\r\n    NgClass,\r\n    MatButtonModule,\r\n    MatMenuModule,\r\n    MatIconModule,\r\n    FeatureIconIndicatorComponent,\r\n    TranslateModule,\r\n    TippyDirective,\r\n  ]\r\n})\r\nexport class TranslateMenuComponent {\r\n  hideTranslateButton = input<boolean>();\r\n  canTranslate = input<boolean>();\r\n\r\n  #fieldState = inject(FieldState);\r\n  #formsStateService = inject(FormsStateService);\r\n\r\n  TranslationLinks = TranslationLinks;\r\n\r\n  protected translationState = this.#fieldState.translationState;\r\n  protected language = this.formConfig.language;\r\n\r\n  protected disabled = computedObj('disabled', () => this.#fieldState.ui().disabled);\r\n\r\n  translationStateClass = computedObj('translationStateClass', () => TranslateMenuHelpers.getTranslationStateClass(this.translationState().linkType));\r\n\r\n  disableTranslateButtonSignal = computedObj('disableTranslateButtonSignal',\r\n    () => this.#formsStateService.readOnly().isReadOnly || this.#fieldState.settings().DisableTranslation\r\n  );\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private formConfig: FormConfigService,\r\n    private fieldsTranslate: FieldsTranslateService,\r\n  ) { }\r\n\r\n  translate(): void {\r\n    this.fieldsTranslate.unlock(this.#fieldState.name);\r\n  }\r\n\r\n  dontTranslate(): void {\r\n    this.fieldsTranslate.lock(this.#fieldState.name);\r\n  }\r\n\r\n  openTranslateMenuDialog(translationState: TranslationState): void {\r\n    this.#openDialog(translationState, TranslateMenuDialogComponent);\r\n  }\r\n\r\n  openAutoTranslateMenuDialog(translationState: TranslationState): void {\r\n    if (this.#fieldState.settings().DisableAutoTranslation) {\r\n      this.matDialog.open(AutoTranslateDisabledWarningDialog, {\r\n        autoFocus: false,\r\n        data: { isAutoTranslateAll: false },\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '350px',\r\n      });\r\n    } else {\r\n      this.#openDialog(translationState, AutoTranslateMenuDialogComponent);\r\n    }\r\n  }\r\n\r\n  #openDialog(translationState: TranslationState, component: any): void {\r\n    const dialogData: TranslateMenuDialogData = {\r\n      config: this.#fieldState.config,\r\n      translationState: {\r\n        language: translationState.language,\r\n        linkType: translationState.linkType,\r\n      },\r\n    };\r\n    this.matDialog.open(component, {\r\n      autoFocus: false,\r\n      data: dialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '400px',\r\n    });\r\n  }\r\n}","import { NgClass } from '@angular/common';\r\nimport { Component, computed, inject, signal, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { UserLanguageService } from 'projects/eav-ui/src/app/shared/services/user-language.service';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../form/forms-state.service';\r\nimport { EditRoutingService } from '../../../routing/edit-routing.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\nimport { TranslateMenuComponent } from './translate-menu/translate-menu';\r\n\r\n@Component({\r\n  selector: WrappersCatalog.LocalizationWrapper,\r\n  templateUrl: './localization-wrapper.html',\r\n  styleUrls: ['./localization-wrapper.scss'],\r\n  imports: [\r\n    NgClass,\r\n    TranslateMenuComponent,\r\n  ]\r\n})\r\nexport class LocalizationWrapperComponent {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n  @ViewChild(TranslateMenuComponent) private translateMenu: TranslateMenuComponent;\r\n\r\n  #formConfig = inject(FormConfigService);\r\n  #fieldState = inject(FieldState);\r\n\r\n  protected language = this.#formConfig.language;\r\n\r\n  private userLanguageSvc = inject(UserLanguageService);\r\n  translatePrimaryLanguage = signal<boolean>(false);\r\n\r\n  hasMultipleLanguages = computed(() => {\r\n    return this.#formConfig.languages.list.length > 1;\r\n  });\r\n\r\ncanTranslate = computed(() => {\r\n  return (\r\n    this.hasMultipleLanguages() &&\r\n    !this.#fieldState.settings().DisableTranslation &&\r\n    (this.language().current !== this.language().primary || this.translatePrimaryLanguage())\r\n  );\r\n});\r\n\r\n  hideTranslateButton: boolean = true;\r\n\r\n  constructor(\r\n    private editRoutingService: EditRoutingService,\r\n    private formsStateService: FormsStateService,\r\n  ) {\r\n    this.translatePrimaryLanguage.set(this.userLanguageSvc.primaryTranslatableEnabled());\r\n  }\r\n\r\n  translate() {\r\n    if (this.formsStateService.readOnly().isReadOnly) return;\r\n    const language = this.#formConfig.language();\r\n    if (language.current === language.primary) return;\r\n    if (!this.#fieldState.ui().disabled) return;\r\n    const config = this.#fieldState.config;\r\n    const isExpanded = this.editRoutingService.isExpanded(config.index, config.entityGuid);\r\n    if (isExpanded) return;\r\n\r\n    this.translateMenu.translate();\r\n  }\r\n\r\n  toggleTranslateButtonVisibility(hide: boolean) {\r\n    this.hideTranslateButton = hide;\r\n  }\r\n}\r\n","<!-- <pre>Wrapper.Localization Start</pre> -->\r\n<div\r\n  class=\"language-wrap\"\r\n  (mouseenter)=\"toggleTranslateButtonVisibility(false)\"\r\n  (mouseleave)=\"toggleTranslateButtonVisibility(true)\"\r\n>\r\n  <div\r\n    class=\"language-wrap__field\"\r\n    [ngClass]=\"{ 'language-wrap__field-short': canTranslate() }\"\r\n    (dblclick)=\"translate()\"\r\n  >\r\n    <!-- <pre>Wrapper.Localization - Field Start</pre> -->\r\n    <ng-container #fieldComponent></ng-container>\r\n    <!-- <pre>Wrapper.Localization - Field End</pre> -->\r\n  </div>\r\n\r\n  <app-translate-menu\r\n    class=\"language-wrap__translate\"\r\n    [hideTranslateButton]=\"hideTranslateButton\"\r\n    [canTranslate]=\"canTranslate()\"\r\n    [ngClass]=\"{ 'language-wrap__translate--hidden': !canTranslate() }\"\r\n  >\r\n  </app-translate-menu>\r\n</div>\r\n<!-- <pre>Wrapper.Localization End</pre> -->\r\n","\r\nimport { Component, inject, ViewChild, ViewContainerRef } from \"@angular/core\";\r\nimport { MatCardModule } from \"@angular/material/card\";\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FormsStateService } from \"../../../form/forms-state.service\";\r\nimport { FieldState } from \"../../field-state\";\r\nimport { DialogPopupComponent } from \"../dialog-popup/dialog-popup\";\r\nimport { ContentExpandAnimation } from \"../expand-dialog/content-expand.animation\";\r\nimport { WrappersCatalog } from \"../wrappers.constants\";\r\n\r\n\r\n@Component({\r\n    selector: WrappersCatalog.PickerExpandableWrapper,\r\n    templateUrl: './picker-expandable-wrapper.html',\r\n    styleUrls: ['./picker-expandable-wrapper.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n    MatCardModule,\r\n    DialogPopupComponent,\r\n    DialogPopupComponent\r\n]\r\n})\r\nexport class PickerExpandableWrapperComponent {\r\n\r\n  log = classLog({ PickerExpandableWrapperComponent });\r\n\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n  @ViewChild('previewComponent', { static: true, read: ViewContainerRef }) previewComponent: ViewContainerRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  public config = this.fieldState.config;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  constructor(\r\n    public formsStateService: FormsStateService,\r\n  ) { }\r\n}\r\n","<!--\r\n  Dialog part for large picker\r\n  Should only show when dialogIsOpen() is true.\r\n  It must be part of the DOM already (so no @if) as it is used in the code.\r\n-->\r\n<app-dialog-popup>\r\n  <div class=\"eav-layout-grid\">\r\n    <div class=\"eav-layout-grid__inner\">\r\n      <mat-card class=\"eav-card eav-layout-grid__cell--span-12 u-border-radius shadow-bottom-z-1\">\r\n        <ng-container #fieldComponent></ng-container>\r\n      </mat-card>\r\n    </div>\r\n  </div>\r\n</app-dialog-popup>\r\n<!-- Preview = inline search or pills -->\r\n<ng-container #previewComponent></ng-container>","import { Type } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../shared/fields/input-type-catalog';\r\nimport { BooleanDefaultComponent } from './basic/boolean-default/boolean-default';\r\nimport { BooleanTristateComponent } from './basic/boolean-tristate/boolean-tristate';\r\nimport { CustomDefaultComponent } from './basic/custom-default/custom-default';\r\nimport { CustomJsonEditorComponent } from './basic/custom-json-editor/custom-json-editor';\r\nimport { DatetimeDefaultComponent } from './basic/datetime-default/datetime-default';\r\nimport { EmptyDefaultComponent } from './basic/empty-default/empty-default';\r\nimport { EmptyMessageComponent } from './basic/empty-message/empty-message';\r\nimport { EntityContentBlockComponent } from './basic/entity-content-blocks/entity-content-blocks';\r\nimport { EntityDefaultComponent } from './basic/entity-default/entity-default';\r\nimport { EntityPickerComponent } from './basic/entity-picker/entity-picker';\r\nimport { EntityQueryComponent } from './basic/entity-query/entity-query';\r\nimport { ExternalWebComponentComponent } from './basic/external-web-component/external-web-component';\r\nimport { HyperlinkDefaultComponent } from './basic/hyperlink-default/hyperlink-default';\r\nimport { HyperlinkLibraryComponent } from './basic/hyperlink-library/hyperlink-library';\r\nimport { NumberDefaultComponent } from './basic/number-default/number-default';\r\nimport { NumberDropdownComponent } from './basic/number-dropdown/number-dropdown';\r\nimport { NumberPickerComponent } from './basic/number-picker/number-picker';\r\nimport { StringDefaultComponent } from './basic/string-default/string-default';\r\nimport { StringDropdownQueryComponent } from './basic/string-dropdown-query/string-dropdown-query';\r\nimport { StringDropdownComponent } from './basic/string-dropdown/string-dropdown';\r\nimport { StringFontIconPickerComponent } from './basic/string-font-icon-picker/string-font-icon-picker';\r\nimport { StringPickerComponent } from './basic/string-picker/string-picker';\r\nimport { StringTemplatePickerComponent } from './basic/string-template-picker/string-template-picker';\r\nimport { StringUrlPathComponent } from './basic/string-url-path/string-url-path';\r\nimport { AdamWrapperComponent } from './wrappers/adam/adam-wrapper';\r\nimport { DropzoneWrapperComponent } from './wrappers/dropzone/dropzone-wrapper';\r\nimport { ExpandableWrapperComponent } from './wrappers/expand-dialog/expandable-wrapper';\r\nimport { FeatureWarningWrapperComponent } from './wrappers/feature-warning/feature-warning-wrapper';\r\nimport { CollapsibleWrapperComponent } from './wrappers/group/collapsible-wrapper';\r\nimport { HiddenWrapperComponent } from './wrappers/hidden/hidden-wrapper';\r\nimport { HyperlinkDefaultExpandableWrapperComponent } from './wrappers/hyperlink-dialog/hyperlink-default-expandable-wrapper';\r\nimport { HyperlinkLibraryExpandableWrapperComponent } from './wrappers/hyperlink-library-dialog/hyperlink-library-expandable-wrapper';\r\nimport { LocalizationWrapperComponent } from './wrappers/localization/localization-wrapper';\r\nimport { PickerExpandableWrapperComponent } from './wrappers/picker-dialog/picker-expandable-wrapper';\r\nimport { WrappersCatalog } from './wrappers/wrappers.constants';\r\n\r\nexport const InputComponents: Record<string, Type<any>> = {\r\n  // Wrappers\r\n  [WrappersCatalog.AdamWrapper]: AdamWrapperComponent,\r\n  [WrappersCatalog.CollapsibleWrapper]: CollapsibleWrapperComponent,\r\n  [WrappersCatalog.DropzoneWrapper]: DropzoneWrapperComponent,\r\n  [WrappersCatalog.PickerExpandableWrapper]: PickerExpandableWrapperComponent,\r\n  [WrappersCatalog.ExpandableWrapper]: ExpandableWrapperComponent,\r\n  [WrappersCatalog.HiddenWrapper]: HiddenWrapperComponent,\r\n  [WrappersCatalog.FeatureWarningWrapper]: FeatureWarningWrapperComponent,\r\n  [WrappersCatalog.HyperlinkDefaultExpandableWrapper]: HyperlinkDefaultExpandableWrapperComponent,\r\n  [WrappersCatalog.HyperlinkLibraryExpandableWrapper]: HyperlinkLibraryExpandableWrapperComponent,\r\n  [WrappersCatalog.LocalizationWrapper]: LocalizationWrapperComponent,\r\n\r\n  // Input Types\r\n  [InputTypeCatalog.BooleanDefault]: BooleanDefaultComponent,\r\n  [InputTypeCatalog.BooleanTristate]: BooleanTristateComponent,\r\n  [InputTypeCatalog.CustomDefault]: CustomDefaultComponent,\r\n  [InputTypeCatalog.CustomJsonEditor]: CustomJsonEditorComponent,\r\n  [InputTypeCatalog.DateTimeDefault]: DatetimeDefaultComponent,\r\n  [InputTypeCatalog.EmptyDefault]: EmptyDefaultComponent,\r\n  [InputTypeCatalog.EmptyMessage]: EmptyMessageComponent,\r\n  [InputTypeCatalog.EntityContentBlocks]: EntityContentBlockComponent,\r\n  [InputTypeCatalog.EntityDefault]: EntityDefaultComponent,\r\n  [InputTypeCatalog.EntityQuery]: EntityQueryComponent,\r\n  [InputTypeCatalog.ExternalWebComponent]: ExternalWebComponentComponent,\r\n  [InputTypeCatalog.HyperlinkDefault]: HyperlinkDefaultComponent,\r\n  [InputTypeCatalog.HyperlinkLibrary]: HyperlinkLibraryComponent,\r\n  [InputTypeCatalog.NumberDefault]: NumberDefaultComponent,\r\n  [InputTypeCatalog.NumberDropdown]: NumberDropdownComponent,\r\n  [InputTypeCatalog.StringDefault]: StringDefaultComponent,\r\n  [InputTypeCatalog.StringDropdown]: StringDropdownComponent,\r\n  [InputTypeCatalog.StringDropdownQuery]: StringDropdownQueryComponent,\r\n  [InputTypeCatalog.StringFontIconPicker]: StringFontIconPickerComponent,\r\n  [InputTypeCatalog.StringJson]: CustomJsonEditorComponent,\r\n  [InputTypeCatalog.StringTemplatePicker]: StringTemplatePickerComponent,\r\n  [InputTypeCatalog.StringUrlPath]: StringUrlPathComponent,\r\n\r\n  // Pickers\r\n  [InputTypeCatalog.EntityPicker]: EntityPickerComponent,\r\n  [InputTypeCatalog.StringPicker]: StringPickerComponent,\r\n  [InputTypeCatalog.NumberPicker]: NumberPickerComponent,\r\n};\r\n","import { computed, signal } from '@angular/core';\r\nimport { computedObj } from 'projects/eav-ui/src/app/shared/signals/signal.utilities';\r\nimport { Adam } from '../../../../../../../../edit-types/src/Adam';\r\nimport { AdamConfig } from '../../../../../../../../edit-types/src/AdamConfig';\r\nimport { AdamItem } from '../../../../../../../../edit-types/src/AdamItem';\r\nimport { classLog } from '../../../../../shared/logging';\r\nimport { AdamBrowserComponent } from './adam-browser';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  setConfig: true,\r\n  refresh: true,\r\n}\r\n\r\n/**\r\n * Helper to connect ADAM.\r\n * It will be added to the field state early on, but won't work until the browser is initialized.\r\n */\r\nexport class AdamConnector implements Adam {\r\n  \r\n  log = classLog({AdamConnector}, logSpecs);\r\n\r\n  get browser() {\r\n    const b = this.#browser();\r\n    if (b) return b;\r\n    throw new Error('Browser not set');\r\n  }\r\n\r\n  public setBrowser(browser: AdamBrowserComponent) {\r\n    this.#browser.set(browser);\r\n  }\r\n  #browser = signal<AdamBrowserComponent>(null);\r\n\r\n  #items = computedObj('items', () => this.#browser()?.items() ?? [] satisfies AdamItem[]);\r\n  get items() { return this.#items };\r\n\r\n  public toggle(usePortalRoot: boolean, showImagesOnly: boolean) {\r\n    this.log.fn('toggle', { usePortalRoot, showImagesOnly });\r\n    this.browser.toggle(usePortalRoot, showImagesOnly)\r\n  };\r\n\r\n  #count = 0;\r\n\r\n  public setConfig(config: Partial<AdamConfig>) {\r\n    const l = this.log.fnIf('setConfig', { config, count: this.#count });\r\n    this.#count++;\r\n\r\n    if (this.#count > 10)\r\n      throw new Error('Infinite loop');\r\n\r\n    this.browser.setConfig(config);\r\n    l.end();\r\n  };\r\n  public getConfig() { return this.browser.adamConfig() };\r\n\r\n  public isDisabled = computed(() => this.#browser()?.adamConfig()?.disabled ?? true);\r\n\r\n  onItemClick() { return; }\r\n\r\n  onItemUpload() { return; }\r\n\r\n  refresh() {\r\n    this.log.fnIf('refresh');\r\n    this.browser.fetchItems()\r\n  }\r\n\r\n}","import { FieldSettings } from './FieldSettings';\r\nimport { EmptyDefault } from './FieldSettings-EmptyDefault';\r\n\r\n/**\r\n * Goal of this is to provide the basic settings for a control\r\n * in the BaseFieldComponent<T = FieldValue>\r\n * to replace all the many subscriptions etc.\r\n * with a simple signal containing the important settings.\r\n */\r\nexport class BasicControlSettings {\r\n  /** Label to show on an input field */\r\n  label: string;\r\n\r\n  /** Notes to show below an input field */\r\n  notes: string;\r\n\r\n  /** Label with a * if required */\r\n  labelWithRequired: string;\r\n\r\n  /** Placeholder to show on an input field */\r\n  placeholder: string;\r\n\r\n  /** If the field is required */\r\n  required: boolean;\r\n\r\n  /** Real final visibility. Also respects if it was disabled by the ItemFieldVisibility. */\r\n  visible: boolean;\r\n\r\n  // /** Original visibility, more as info. ATM not used any where. */\r\n  // visibilityRaw: boolean;\r\n\r\n  // /** Information if this field was forcibly disabled */\r\n  // visibilityDisabled: boolean;\r\n\r\n  /** If the field is collapsed */\r\n  collapsed: boolean;\r\n\r\n\r\n  static fromSettings(s: FieldSettings): BasicControlSettings {\r\n    const label = s?.Name ?? 'loading...';\r\n    const notes = s?.Notes ?? '';\r\n    const required = s?.valueRequired ?? true;\r\n    const visibilityRaw = s?.Visible ?? true;\r\n    const visibilityDisabled = s?.VisibleDisabled ?? false;\r\n    const visible = visibilityRaw && !visibilityDisabled;\r\n    const collapsed = (s as FieldSettings & EmptyDefault)?.Collapsed ?? false;\r\n    // if (label == 'loading...') {\r\n    //   console.log('s', s);\r\n    // }\r\n    return {\r\n      label,\r\n      notes,\r\n      placeholder: s?.Placeholder ?? 'loading...',\r\n      required,\r\n      labelWithRequired: label + (required ? ' *' : ''),\r\n      visible,\r\n      // visibilityRaw,\r\n      // visibilityDisabled,\r\n      collapsed,\r\n    };\r\n  }\r\n}\r\n","import { EnvironmentInjector, Injectable, Injector, Signal, createEnvironmentInjector, inject, runInInjectionContext } from '@angular/core';\r\nimport { toObservable, toSignal } from '@angular/core/rxjs-interop';\r\nimport { AbstractControl } from '@angular/forms';\r\nimport { combineLatest, tap } from 'rxjs';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { mapUntilObjChanged } from '../../../shared/rxJs/mapUntilChanged';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { EntityFormStateService } from '../../entity-form/entity-form-state.service';\r\nimport { FieldState } from '../../fields/field-state';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { UiControl } from '../../shared/controls/ui-control';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\nimport { BasicControlSettings } from './../../../../../../edit-types/src/BasicControlSettings';\r\nimport { InjectorBundle } from './injector-bundle.model';\r\n\r\nconst logSpecs = {\r\n  getInjectors: true,\r\n  fields: [...DebugFields] as string[], // example: ['Boolean'],\r\n};\r\n\r\nconst detailedDebug = false;\r\n\r\n/**\r\n * This service creates custom injectors for each field.\r\n * It's used in the fields-builder to initialize dynamic controls.\r\n */\r\n@Injectable()\r\nexport class FieldStateInjectorFactory {\r\n\r\n  log = classLog({FieldStateInjectorFactory}, logSpecs);\r\n\r\n  #injector = inject(Injector);\r\n  #envInjector = inject(EnvironmentInjector);\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n  #entityFormStateSvc = inject(EntityFormStateService);\r\n  #featuresSvc = inject(FeaturesService);\r\n\r\n  #editRoutingService = inject(EditRoutingService);\r\n\r\n  constructor() { }\r\n\r\n  /**\r\n   * Get the injectors for a specific form field.\r\n   * Requires that the angular form has already created the field.\r\n   * \r\n   * IMPORTANT: It also has a side-effect that it adds picker data to the FieldStateService.\r\n   * this is not elegant ATM.\r\n   * @param fieldConfig \r\n   * @param inputType \r\n   * @returns an injector bundle with control and environment injectors\r\n   */\r\n  public getInjectors(fieldConfig: FieldConfigSet, inputType: InputTypeSpecs): InjectorBundle {\r\n    const l = this.log.fnIf('getInjectors', { fieldConfig, inputType });\r\n\r\n    const name = fieldConfig.fieldName;\r\n\r\n    // Create settings() and basics() signal for further use\r\n    const settings = this.#fieldsSettingsSvc.settings[name];\r\n    const basics = computedObj('basics', () => BasicControlSettings.fromSettings(settings()));\r\n\r\n    // Control and Control Status\r\n    const formGroup = this.#entityFormStateSvc.formGroup;\r\n    const control = formGroup.controls[name];    \r\n    const controlStatusChangeSignal = this.#buildUiSignal(name, control, inputType, settings);\r\n\r\n    /** The UI Value changes. Since it can also contain arrays, so we're using the strong equal */\r\n    const uiValue: Signal<FieldValue> = (() => {\r\n      if (!control) return signalObj('value-change-empty', null);\r\n      const debouncedValue$ = control.valueChanges.pipe(\r\n        // tap(v => console.warn('2dm value change on UI - before equals', v)),\r\n        // distinctUntilChanged((p, c) => {\r\n        //   const eq = isEqual(p, c);\r\n        //   console.warn('2dm value change on UI - equals', p, c, eq);\r\n        //   return eq;\r\n        // }),\r\n        mapUntilObjChanged(v => v),\r\n        // tap(v => console.warn('2dm value change on UI - after equals', v)),\r\n      );\r\n      return toSignal(debouncedValue$, { injector: this.#injector, initialValue: control.value });\r\n    })();\r\n\r\n    const fieldState = new FieldState(\r\n      name,\r\n      fieldConfig,\r\n      formGroup,\r\n      settings,\r\n      basics,\r\n      controlStatusChangeSignal,\r\n      uiValue,\r\n      this.#fieldsSettingsSvc.translationState[name],\r\n      this.#editRoutingService.isExpandedSignal(fieldConfig.index, fieldConfig.entityGuid, this.#injector),\r\n      this.#fieldsSettingsSvc.pickerData[name] ?? null,\r\n      this.#featuresSvc,\r\n      this.#injector,\r\n    );\r\n\r\n    const injectors = this.#createInjectors(fieldState);\r\n    return l.r(injectors);\r\n  }\r\n\r\n  /**\r\n   * Create a signal for the control status - mainly disabled etc.\r\n   */\r\n  #buildUiSignal(fieldName: string, control: AbstractControl, inputType: InputTypeSpecs, settings: Signal<FieldSettings>): Signal<UiControl> {\r\n    // Conditional logger for detailed logging\r\n    const lDetailed = this.log.fnCond(this.log.specs.fields.includes(fieldName), 'buildControlChangeSignal', { fieldName, inputType });\r\n\r\n    // Create a signal to watch for control-state changes\r\n    if (control) {\r\n      const settings$ = toObservable(settings, { injector: this.#injector });\r\n\r\n      return runInInjectionContext(this.#injector, () => {\r\n        // Watch the control for state changes - this is triggered on the ValueChanges\r\n        // but we only want to continue triggering if a relevant state changed.\r\n        const uiStateChange$ = control.valueChanges.pipe(\r\n          mapUntilObjChanged(_ => ({ dirty: control.dirty, invalid: control.invalid, touched: control.touched, disabled: control.disabled })),\r\n          tap(state => detailedDebug && console.error('controlStateChange', state)),\r\n        );\r\n\r\n        // disabled can be caused by settings in addition to the control status\r\n        // since the control doesn't cause a `valueChanged` on disabled, we need to watch the settings\r\n        const uiStatus$ = combineLatest([\r\n          uiStateChange$,\r\n          settings$.pipe(mapUntilObjChanged(s => s.uiDisabled)),\r\n        ]).pipe(\r\n          tap(([_, disabled]) => lDetailed.a('controlStateChange on control', { control, disabled })),\r\n          mapUntilObjChanged(([_, disabled]) => new UiControl(control, fieldName, disabled)),\r\n          tap(result => lDetailed.a('controlStatusChangeSignal', { result })),\r\n        );\r\n\r\n        // Build controlStatus observable.\r\n        // Should be changed to a pure signal without the observables probably in Angular 18\r\n        // which probably has a signal for this as well...\r\n        return toSignal(uiStatus$, { initialValue: new UiControl(control, fieldName, settings().uiDisabled) });\r\n      });\r\n    }\r\n    \r\n    // No control found - could be a problem, could be expected\r\n    // If it's an empty message field, this is kind of expected, since it doesn't have a value control in the form\r\n    if (!InputTypeHelpers.isEmpty(inputType.inputType)) {\r\n      console.error(`Error: can't create signal for control of ${fieldName} (not found). Input type is not empty, it's ${inputType.inputType}.`);\r\n      // try to have a temporary result, so that in most cases it won't just fail\r\n      return signalObj('control-status-empty', UiControl.emptyControl());\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Create the injector definitions to use for this field.\r\n   */\r\n  #createInjectors(fieldState: FieldState<FieldValue>) {\r\n    const providers = [\r\n      { provide: FieldState, useValue: fieldState },\r\n    ];\r\n\r\n    // Component injector, not actually sure if it's used, because standalone only use environmentInjector AFAIK\r\n    const injector = Injector.create({\r\n      providers: providers,\r\n      parent: this.#injector,\r\n      name: 'FieldInjector',\r\n    });\r\n\r\n    // Environment injector\r\n    const environmentInjector = createEnvironmentInjector(\r\n      providers,\r\n      this.#envInjector,\r\n      'FieldEnvInjector'\r\n    );\r\n    return { injector, environmentInjector };\r\n  }\r\n}\r\n","import { ComponentRef, Directive, ElementRef, OnDestroy, OnInit, Renderer2, Type, ViewContainerRef, effect, inject, signal, untracked } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { transient } from '../../../../../../core';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EntityFormStateService } from '../../entity-form/entity-form-state.service';\r\nimport { InputComponents } from '../../fields/input-components.constant';\r\nimport { FieldProps } from '../../state/fields-configs.model';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { CustomDefaultComponent } from '../basic/custom-default/custom-default';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\nimport { FieldMetadataKey, FieldMetadataModel } from '../field-metadata.decorator';\r\nimport { AdamConnector } from '../wrappers/adam/adam-browser/adam-connector';\r\nimport { PickerExpandableWrapperComponent } from '../wrappers/picker-dialog/picker-expandable-wrapper';\r\nimport { FieldStateInjectorFactory } from './field-injector.service';\r\nimport { InjectorBundle } from './injector-bundle.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  createWrapper: true,\r\n  readComponentType: false,\r\n};\r\n\r\n/**\r\n * This directive is responsible for creating the dynamic fields based on the field settings.\r\n * It will create the fields based on the settings and attach them to the view.\r\n */\r\n@Directive({\r\n  selector: '[appEditControlsBuilder]',\r\n})\r\nexport class EditControlsBuilderDirective implements OnInit, OnDestroy {\r\n\r\n  #index: number;\r\n\r\n  // In the class, inject Renderer2\r\n  #renderer = inject(Renderer2);\r\n  #firstInputFocused = false;\r\n\r\n  log = classLog({ EditControlsBuilderDirective }, logSpecs);\r\n\r\n  /** Service to create custom injectors for each field */\r\n  #fieldInjectorFac = transient(FieldStateInjectorFactory);\r\n\r\n  /** Ref to this HTML DOM, for adding controls */\r\n  #myContainerRef = inject(ViewContainerRef);\r\n\r\n  /** Service to get all settings for each field */\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n\r\n  constructor(private formConfigService: EntityFormStateService, private el: ElementRef) {\r\n    effect(() => {\r\n      const onInitReady = this.#onInitReady();\r\n      const controlsCreated = this.formConfigService.controlsCreated();\r\n      this.log.a('createControls - effect', { onInitReady, controlsCreated });\r\n      if (!(onInitReady && controlsCreated))\r\n        return;\r\n\r\n      this.log.a('createControls RUN');\r\n      // TODO: NOT YET CLEAR IF THIS IS THE RIGHT SOLUTION\r\n      untracked(() => this.#createControls());\r\n    });\r\n  }\r\n\r\n  /** Field Configs for clean-up after the control closes */\r\n  #fieldConfigSets: FieldConfigSet[] = [];\r\n\r\n  #onInitReady = signal(false);\r\n\r\n  ngOnInit() {\r\n    this.#onInitReady.set(true);\r\n    // Get the Index from the HTML element attribute\r\n    this.#index = parseInt(this.el.nativeElement.getAttribute('data-index'));\r\n  }\r\n\r\n  #createControls() {\r\n    // clear container\r\n    this.#myContainerRef.clear();\r\n\r\n    // Set the current container to be \"This\" = the main container (not a specific group)\r\n    // When groups open/close, this will be set to that group,\r\n    // so fields are then inside that container.\r\n    let currentContainer = this.#myContainerRef;\r\n    const fieldsProps = this.#fieldsSettingsSvc.allProps();\r\n\r\n    // Loop through each field and create the component\r\n    // If we encounter a group, we create a new container and set it as the main one\r\n    for (const [fieldName, fieldProps] of Object.entries(fieldsProps)) {\r\n      const fieldConfig: FieldConfigSet = {\r\n        ...fieldProps.constants,\r\n        fieldName: fieldName,\r\n        focused$: new BehaviorSubject(false),\r\n        adam: new AdamConnector(),\r\n      };\r\n      this.#fieldConfigSets.push(fieldConfig);\r\n      const inputType = fieldProps.constants.inputTypeSpecs.inputType;\r\n\r\n      if (InputTypeHelpers.isGroupStart(inputType)) {\r\n        // If we encounter a group-start, then create a new container based on the main container\r\n        currentContainer = this.#createGroup(this.#myContainerRef, fieldProps, fieldConfig);\r\n      } else if (InputTypeHelpers.isGroupEnd(inputType)) {\r\n        // If we encounter a group-end, set the main container to be the default one again\r\n        currentContainer = this.#myContainerRef;\r\n      } else {\r\n        // Just create the normal component within the current container\r\n        this.#createComponent(currentContainer, fieldProps, fieldConfig);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    for (const fieldConfig of this.#fieldConfigSets)\r\n      fieldConfig.focused$.complete();\r\n  }\r\n\r\n  #createGroup(containerRef: ViewContainerRef, fieldProps: FieldProps, fieldConfig: FieldConfigSet): ViewContainerRef {\r\n    const injectors = this.#fieldInjectorFac.getInjectors(fieldConfig, fieldProps.constants.inputTypeSpecs);\r\n    let wrapperInfo = new DynamicControlInfo(null, containerRef, injectors);\r\n    if (fieldProps.buildWrappers)\r\n      wrapperInfo = this.#createWrappers(wrapperInfo, fieldProps.buildWrappers);\r\n    return wrapperInfo.contentsRef;\r\n  }\r\n\r\n  #createComponent(containerRef: ViewContainerRef, fieldProps: FieldProps, fieldConfig: FieldConfigSet) {\r\n    const inputSpecs = fieldProps.constants.inputTypeSpecs;\r\n    this.log.a('createComponent', { inputSpecs });\r\n\r\n    // Add injector to first wrapper, so that it will be attached to the top level, and then dropped\r\n    const injectors = this.#fieldInjectorFac.getInjectors(fieldConfig, inputSpecs);\r\n    let wrapperInfo = new DynamicControlInfo(null, containerRef, injectors);\r\n    if (fieldProps.buildWrappers)\r\n      wrapperInfo = this.#createWrappers(wrapperInfo, fieldProps.buildWrappers);\r\n\r\n    // if it's external, don't load it directly, but instead use the external-web-component wrapper\r\n    const componentName = inputSpecs.isExternal\r\n      ? InputTypeCatalog.ExternalWebComponent\r\n      : inputSpecs.inputType;\r\n    const componentType = this.#readComponentType(componentName);\r\n\r\n    // create component - ideally with metadata if provided (ATM can specify alternate wrapper)\r\n    const componentMd: FieldMetadataModel = Reflect.getMetadata(FieldMetadataKey, componentType);\r\n\r\n    // generate wrappers if they are defined\r\n    if (componentMd?.wrappers)\r\n      wrapperInfo = this.#createWrappers(wrapperInfo, componentMd.wrappers);\r\n\r\n    // generate the real input field component\r\n    // this.log.a('createComponent - add component', { componentType });\r\n    const componentRef = this.#generateAndAttachField(componentType, wrapperInfo.contentsRef, wrapperInfo.injectors);\r\n\r\n    // generate the picker preview component if it exists\r\n    const pickerPreviewContainerRef = (wrapperInfo.wrapperRef?.instance as PickerExpandableWrapperComponent)?.previewComponent;\r\n    if (pickerPreviewContainerRef != null) {\r\n      const previewType = this.#readComponentType(inputSpecs.inputType);\r\n      this.log.a('createComponent - add preview', { previewType });\r\n      this.#generateAndAttachField(previewType, pickerPreviewContainerRef, wrapperInfo.injectors);\r\n    }\r\n\r\n    // Set only the first input to be focused, if it is the first input\r\n    if (this.#firstInputFocused === false && this.#index === 0 && fieldProps.settings.noAutoFocus !== true) {\r\n      this.#setAutoFocus(componentRef);\r\n      this.#firstInputFocused = true;\r\n    }\r\n  }\r\n\r\n  #setAutoFocus(componentRef: ComponentRef<any>) {\r\n    setTimeout(() => {\r\n      // Get the input element from the component\r\n      const nativeElement = componentRef.location.nativeElement.querySelector('input');\r\n      if (nativeElement) {\r\n        this.#renderer.setAttribute(nativeElement, 'autofocus', 'true');\r\n        nativeElement?.focus(); // Focus the input element - with null check in case we're too early\r\n      }\r\n    }, 250); // Wait for the input to be created before focusing\r\n\r\n  }\r\n\r\n  #generateAndAttachField(componentType: Type<any>, container: ViewContainerRef, injectors: InjectorBundle): ComponentRef<any> {\r\n    const component = container.createComponent(componentType, injectors);\r\n\r\n    // Prevent 'e' | 'E' (science notation) in <input type=\"number\"> for \"number-default\"\r\n    if (componentType === InputComponents['number-default']) {\r\n      const inputEl = component.location.nativeElement.querySelector('input[type=\"number\"]');\r\n      inputEl?.addEventListener('keydown', (e: KeyboardEvent) => {\r\n        if (e.key?.toLowerCase() === 'e')\r\n          e.preventDefault();\r\n      });\r\n    }\r\n\r\n    return component;\r\n  }\r\n\r\n  /** Stack all wrappers inside each other */\r\n  #createWrappers(outerWrapper: DynamicControlInfo, wrapperNames: string[]): DynamicControlInfo {\r\n    return wrapperNames.reduce((acc, name) => this.#createWrapper(acc, name), outerWrapper);\r\n  }\r\n\r\n  /** Create a single wrapper */\r\n  #createWrapper(wrapperInfo: DynamicControlInfo, wrapperName: string): DynamicControlInfo {\r\n    const l = this.log.fnIf('createWrapper', { wrapperName });\r\n    const componentType = this.#readComponentType(wrapperName);\r\n    const ref = wrapperInfo.contentsRef.createComponent(componentType, wrapperInfo.injectors);\r\n    return new DynamicControlInfo(ref, ref.instance.fieldComponent, null /* no injectors for following wrappers */);\r\n  }\r\n\r\n  #readComponentType(selector: string): Type<any> {\r\n    const l = this.log.fnIf('readComponentType', { selector, InputComponents });\r\n    const componentType = InputComponents[selector];\r\n    if (componentType != null)\r\n      return l.r(componentType, 'found component type');\r\n\r\n    console.error(`Missing component class for: ${selector}. \r\nThis indicates that the field is not registered correctly, so the JS won't run. \r\nIt could also mean that the JS runs, but doesn't correctly create the custom tag. \r\nWill show an info-error instead.`\r\n    );\r\n\r\n    // Try to show the [type]-default component if it exists\r\n    const fieldType = selector.split('-')[0];\r\n    const fallback = InputComponents[`${fieldType}-default`] || CustomDefaultComponent;\r\n    return l.r(fallback, 'defaulting to fallback component');\r\n  }\r\n}\r\n\r\nclass DynamicControlInfo {\r\n  constructor(\r\n    public wrapperRef: ComponentRef<any>,\r\n    public contentsRef: ViewContainerRef,\r\n    // will only need to be set the first time\r\n    public injectors: InjectorBundle,\r\n  ) { }\r\n}\r\n","import { inject, Injectable, OnDestroy } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { filter, map, Subscription } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { ItemHistoryResult } from '../../item-history/models/item-history-result.model';\r\nimport { classLog } from '../../shared/logging';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\nimport { EditEntryComponent } from '../dialog/entry/edit-entry';\r\nimport { UrlHelpers } from '../shared/helpers';\r\nimport { NavigateFormResult } from './edit-routing.service';\r\nimport { EditUrlParams } from './edit-url-params.model';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  watchToRefreshOnVersionsClosed: true,\r\n}\r\n\r\n/**\r\n * Special helper to watch for history-dialog closing.\r\n */\r\n@Injectable()\r\nexport class EditForceReloadService implements OnDestroy {\r\n\r\n  log = classLog({EditForceReloadService}, logSpecs);\r\n\r\n  #dialogRef = inject(MatDialogRef<EditEntryComponent>);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  ngOnDestroy() {\r\n    this.#watcher?.unsubscribe();\r\n  }\r\n  #watcher: Subscription;\r\n\r\n  watchToRefreshOnVersionsClosed() {\r\n    const l = this.log.fnIf('watchToRefreshOnVersionsClosed');\r\n    this.#watcher = this.#dialogRouter.childDialogClosed$().pipe(\r\n      map(() => this.#dialogRouter.state<ItemHistoryResult>()),\r\n      filter(result => result?.refreshEdit === true),\r\n    ).subscribe(_ => {\r\n      const l2 = this.log.fnIf('watchToRefreshOnVersionsClosed', null, 'refreshEdit');\r\n      l.a('version closed, refreshing edit dialog');\r\n      const p = this.#dialogRouter.snapshot.params as EditUrlParams;\r\n      const newUrl = UrlHelpers.newUrlIfCurrentContainsOldUrl(this.#dialogRouter.route,`edit/${p.items}`, `edit/refresh/${p.items}`);\r\n      if (newUrl == null) return l2.end('no change');\r\n      this.#dialogRef.close({ navigateUrl: newUrl } satisfies NavigateFormResult);\r\n      l2.end(`routed away to :${newUrl}`);\r\n    })\r\n    l.end();\r\n  }\r\n}\r\n","@if (!isPrimaryLang() || translatePrimaryLanguage()) {\r\n  <div>\r\n    <button mat-button [disabled]=\"readOnly().isReadOnly || slotIsEmpty()\" [matMenuTriggerFor]=\"menu\">\r\n      <span class=\"my-flex-inside\">\r\n        {{ 'LangMenu.Translate' | translate | uppercase }}\r\n        &nbsp;&nbsp;\r\n        <mat-icon class=\"eav-translate-icon\">translate</mat-icon>\r\n      </span>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <ng-template matMenuContent>\r\n        @if (!isPrimaryLang()) {\r\n          <button mat-menu-item (click)=\"unlockAll()\">{{ 'LangMenu.TranslateAll' | translate }}</button>\r\n        }\r\n        <button mat-menu-item (click)=\"autoTranslateMany()\">\r\n          {{ 'LangMenu.AutoTranslateAll' | translate }}\r\n          <app-feature-icon-indicator [featureNameId]=\"'EditUiTranslateWithGoogle'\"></app-feature-icon-indicator>\r\n        </button>\r\n        @if (!isPrimaryLang()) {\r\n          <button mat-menu-item (click)=\"lockAll()\">{{ 'LangMenu.NoTranslateAll' | translate }}</button>\r\n        }\r\n        <button mat-menu-item (click)=\"openTranslateMenuDialogMany()\">\r\n          {{ 'LangMenu.Link' | translate }}\r\n        </button>\r\n      </ng-template>\r\n    </mat-menu>\r\n  </div>\r\n}\r\n","import { UpperCasePipe } from '@angular/common';\r\nimport { Component, computed, inject, input, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FeatureIconIndicatorComponent } from '../../../features/icons/feature-icon-indicator';\r\nimport { UserLanguageService } from '../../../shared/services/user-language.service';\r\nimport { SignalEquals } from '../../../shared/signals/signal-equals';\r\nimport { TranslateMenuDialogComponent } from '../../fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog';\r\nimport { TranslateMenuDialogConfig, TranslateMenuDialogData } from '../../fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.models';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { AutoTranslateDisabledWarningDialog } from '../../localization/auto-translate-disabled-warning-dialog/auto-translate-disabled-warning-dialog';\r\nimport { AutoTranslateMenuDialogComponent } from '../../localization/auto-translate-menu-dialog/auto-translate-menu-dialog';\r\nimport { TranslationState } from '../../localization/translate-state.model';\r\nimport { TranslationLinks } from '../../localization/translation-link.constants';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { FieldsTranslateService } from '../../state/fields-translate.service';\r\nimport { ItemService } from '../../state/item.service';\r\n\r\n@Component({\r\n  selector: 'app-entity-translate-menu',\r\n  templateUrl: './entity-translate-menu.html',\r\n  styleUrls: ['./entity-translate-menu.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatMenuModule,\r\n    MatIconModule,\r\n    FeatureIconIndicatorComponent,\r\n    UpperCasePipe,\r\n    TranslateModule,\r\n  ]\r\n})\r\nexport class EntityTranslateMenuComponent {\r\n  entityGuid = input<string>();\r\n\r\n  private formsStateService = inject(FormsStateService);\r\n  protected readOnly = this.formsStateService.readOnly;\r\n\r\n  private userLanguageSvc = inject(UserLanguageService);\r\n\r\n  // Initialize with a proper TranslationState so the signal satisfies the type\r\n  translationState = signal<TranslationState>({\r\n    infoLabel: '',\r\n    infoMessage: '',\r\n    linkType: TranslationLinks.Translate, // use an existing member from TranslationLinks\r\n    language: '',\r\n  });\r\n\r\n  language = this.eavService.language;\r\n  translatePrimaryLanguage = signal<boolean>(false);\r\n  public isPrimaryLang = computed(() => this.language().current === this.language().primary);\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private itemService: ItemService,\r\n    private eavService: FormConfigService,\r\n    private fieldTranslateSvc: FieldsTranslateService,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private fieldSettingsSvc: FieldsSettingsService,\r\n  ) {\r\n    // initialize translatePrimaryLanguage from persisted value\r\n    this.translatePrimaryLanguage.set(this.userLanguageSvc.primaryTranslatableEnabled());\r\n  }\r\n\r\n  setTranslatePrimary(enabled: boolean) {\r\n    this.translatePrimaryLanguage.set(!!enabled);\r\n    this.userLanguageSvc.savePrimaryTranslatable(!!enabled);\r\n  }\r\n\r\n  #autoTranslatableFields = computed(() => {\r\n    return this.fieldTranslateSvc.findAutoTranslatableFields();\r\n  });\r\n\r\n  protected slotIsEmpty = computed(() => {\r\n    return this.itemService.slotIsEmpty(this.entityGuid())();\r\n  }, SignalEquals.bool);\r\n\r\n  unlockAll() {\r\n    this.fieldTranslateSvc.toggleUnlockOnAll(true);\r\n  }\r\n\r\n  lockAll() {\r\n    this.fieldTranslateSvc.toggleUnlockOnAll(false);\r\n  }\r\n\r\n  autoTranslateMany(): void {\r\n    const autoTransFields = this.#autoTranslatableFields();\r\n    if (autoTransFields.length === 0)\r\n      return this.fieldTranslateSvc.showMessageNoTranslatableFields(true);\r\n\r\n    // Translation state of any field, to detect the languages\r\n    const translationStateAny = this.fieldSettingsSvc.translationState[autoTransFields[0]]();\r\n    if (autoTransFields.length > 0) {\r\n      const config: TranslateMenuDialogConfig = {\r\n        entityGuid: this.entityGuid(),\r\n        // intentionally no fieldName for \"many\" mode\r\n      }\r\n      const dialogData: TranslateMenuDialogData = {\r\n        config,\r\n        translationState: {\r\n          language: translationStateAny.language,\r\n          linkType: translationStateAny.linkType,\r\n        },\r\n        isTranslateMany: true,\r\n        translatableFields: autoTransFields,\r\n      };\r\n      this.matDialog.open(AutoTranslateMenuDialogComponent, {\r\n        autoFocus: false,\r\n        data: dialogData,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n    } else {\r\n      this.matDialog.open(AutoTranslateDisabledWarningDialog, {\r\n        autoFocus: false,\r\n        data: { isAutoTranslateAll: true },\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open the translate dialog to \"Link\" many fields at once.\r\n   * Gathers translatable fields from FieldsSettingsService and passes them as translatableFields.\r\n   */\r\n  openTranslateMenuDialogMany(): void {\r\n    // gather fields we can operate on\r\n    const allFieldKeys = Object.keys(this.fieldSettingsSvc.translationState);\r\n    const translatableFields = allFieldKeys.filter(fn => {\r\n      // fieldSettingsSvc.translationState[fn] is a Signal<TranslationState>\r\n      const ts = this.fieldSettingsSvc.translationState[fn]?.();\r\n      return !!ts; // include only fields that have a translationState object\r\n    });\r\n\r\n    if (translatableFields.length === 0) {\r\n      return this.fieldTranslateSvc.showMessageNoTranslatableFields(true);\r\n    }\r\n\r\n    // pick a representative field state to provide default language/linkType for the dialog\r\n    const translationStateAny = this.fieldSettingsSvc.translationState[translatableFields[0]]();\r\n\r\n    // only pass the entity GUID in config for multi-field mode (no fieldName supplied)\r\n    const config: TranslateMenuDialogConfig = {\r\n      entityGuid: this.entityGuid(),\r\n    };\r\n\r\n    this.#openDialog(config, translationStateAny, translatableFields);\r\n  }\r\n\r\n  #openDialog(\r\n    config: TranslateMenuDialogConfig,\r\n    translationState: TranslationState,\r\n    translatableFields: string[]\r\n  ): void {\r\n    const dialogData: TranslateMenuDialogData = {\r\n      config,\r\n      translationState: {\r\n        language: translationState.language,\r\n        linkType: translationState.linkType,\r\n      },\r\n      isTranslateMany: true,\r\n      translatableFields,\r\n    };\r\n\r\n    this.matDialog.open(TranslateMenuDialogComponent, {\r\n      autoFocus: false,\r\n      data: dialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '400px',\r\n    });\r\n  }\r\n}","<!--\r\n Header containing title, notes, slot empty toggle, metadata-for information, history button and translate menu\r\n-->\r\n<mat-card appearance=\"raised\" class=\"eav-card-group-parent shadow-bottom-z-1\">\r\n  <div class=\"my-title-bar-outer eav-card-header-group-parent\">\r\n    <!-- ^v icon to indicate state + Title -->\r\n    <div class=\"my-title-bar eav-card-title-group mat-headline-4\" (click)=\"toggleCollapse()\">\r\n      <mat-icon class=\"title-arrow\">\r\n        {{ collapse ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}\r\n      </mat-icon>\r\n      <span class=\"title\">\r\n        {{ ctSettings().itemTitle || ('ItemCard.DefaultTitle' | translate) }}\r\n      </span>\r\n    </div>\r\n\r\n    <!-- Notes button -->\r\n    @if (ctSettings().showNotes) {\r\n      <button\r\n        type=\"button\"\r\n        #noteTrigger\r\n        mat-icon-button\r\n        class=\"eav-note {{ noteProps().triggerClass }}\"\r\n        [disabled]=\"readOnly()\"\r\n        [tippyTranslate]=\"noteProps().tooltip\"\r\n        [tippyDisabled]=\"readOnly()\"\r\n        [disableRipple]=\"noteProps().itemNotSaved\"\r\n        (pointerenter)=\"noteProps().note ? toggleNote($event) : null\"\r\n        (pointerleave)=\"noteProps().note ? toggleNote($event) : null\"\r\n        (click)=\"noteProps().note ? toggleNote($event) : editNote()\"\r\n      >\r\n        <mat-icon>{{ noteProps().iconName }}</mat-icon>\r\n      </button>\r\n    }\r\n\r\n    <!-- Note template to show on demand -->\r\n    <ng-template #noteTemplate>\r\n      <div\r\n        class=\"eav-note-wrapper {{ noteProps().noteClass }}\"\r\n        cdkDrag\r\n        cdkDragRootElement=\".cdk-overlay-pane\"\r\n        cdkDragBoundary=\"body\"\r\n        (pointerdown)=\"noteTouched = true\"\r\n      >\r\n        <div class=\"eav-note-actions\" cdkDragHandle>\r\n          <button mat-icon-button appMousedownStopPropagation (click)=\"editNote(noteProps().note)\">\r\n            <mat-icon>edit</mat-icon>\r\n          </button>\r\n          <button mat-icon-button appMousedownStopPropagation (click)=\"deleteNote(noteProps().note)\">\r\n            <mat-icon>delete</mat-icon>\r\n          </button>\r\n          <button mat-icon-button appMousedownStopPropagation (click)=\"toggleNote($event)\">\r\n            <mat-icon>close</mat-icon>\r\n          </button>\r\n        </div>\r\n        <div class=\"eav-note-content eav-hide-scrollbar\" [innerHtml]=\"noteProps().noteHtml | safeHtml\"></div>\r\n      </div>\r\n    </ng-template>\r\n\r\n    <!-- Slot Empty Toggle -->\r\n    @if (ctSettings().slotCanBeEmpty) {\r\n      <mat-slide-toggle\r\n        class=\"empty-slot-toggle\"\r\n        (change)=\"toggleSlotIsEmpty()\"\r\n        [checked]=\"!ctSettings().slotIsEmpty\"\r\n        [disabled]=\"readOnly() || languages().current !== languages().primary\"\r\n        [tippyTranslate]=\"!ctSettings().slotIsEmpty ? 'ItemCard.SlotUsedTrue' : 'ItemCard.SlotUsedFalse'\"\r\n        [tippyDisabled]=\"readOnly() || languages().current !== languages().primary\"\r\n      >\r\n      </mat-slide-toggle>\r\n    }\r\n\r\n    <!-- Metadata-For Information -->\r\n    @if (ctSettings().showMdFor && itemForTooltip()) {\r\n      <div class=\"icon-box\" [tippy]=\"itemForTooltip()\">\r\n        <mat-icon>local_offer</mat-icon>\r\n      </div>\r\n    }\r\n\r\n    <!-- History Button -->\r\n    @if (formConfig.config.enableHistory) {\r\n      <button type=\"button\" mat-icon-button tippyTranslate=\"Form.Buttons.History.Tip\" [disabled]=\"readOnly()\" (click)=\"openHistory()\">\r\n        <mat-icon>history</mat-icon>\r\n      </button>\r\n    }\r\n    <app-entity-translate-menu [entityGuid]=\"entityGuid()\"> </app-entity-translate-menu>\r\n  </div>\r\n  <mat-card-content class=\"eav-card-content-group-parent\" [style.display]=\"collapse ? 'none' : 'block'\">\r\n    <div class=\"eav-layout-grid\">\r\n      <div class=\"eav-layout-grid__inner\">\r\n        @if (ctSettings().editInstructions) {\r\n          <div class=\"eav-layout-grid__cell--span-12 mat-body-2\" align=\"start\">\r\n            <div class=\"description\" appChangeAnchorTarget [innerHtml]=\"ctSettings().editInstructions | safeHtml\"></div>\r\n          </div>\r\n        }\r\n        <div class=\"eav-layout-grid__cell--span-12\">\r\n          <!-- Pass input index -->\r\n          <div appEditControlsBuilder [attr.data-index]=\"index()\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { CdkDrag, CdkDragHandle } from '@angular/cdk/drag-drop';\r\nimport { AfterViewChecked, Component, ElementRef, inject, input, OnDestroy, OnInit, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialog, MatDialogRef, MatDialogState } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../../core';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { eavConstants } from '../../../shared/constants/eav.constants';\r\nimport { MousedownStopPropagationDirective } from '../../../shared/directives/mousedown-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EditForm, ItemIdentifierHeader } from '../../../shared/models/edit-form.model';\r\nimport { ItemIdHelper } from '../../../shared/models/item-id-helper';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\nimport { DialogRoutingService } from '../../../shared/routing/dialog-routing.service';\r\nimport { EntityService } from '../../../shared/services/entity.service';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { EditControlsBuilderDirective } from '../../fields/builder/fields-builder.directive';\r\nimport { ChangeAnchorTargetDirective } from '../../fields/directives/change-anchor-target.directive';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormDataService } from '../../form/form-data.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { EditForceReloadService } from '../../routing/edit-force-reload.service';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { EntityReader } from '../../shared/helpers/entity-reader';\r\nimport { EavEntity, EavItem } from '../../shared/models/eav';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { buildContentTypeFeatures, getItemForTooltip, getNoteProps } from '../entity-form.helpers';\r\nimport { EntityTranslateMenuComponent } from '../entity-translate-menu/entity-translate-menu';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  fetchNote: true,\r\n  noteFormData: true,\r\n};\r\n\r\n/**\r\n * This wraps a single entity in the multi-entities-form.\r\n */\r\n@Component({\r\n  selector: 'app-edit-entity-form',\r\n  templateUrl: './entity-form.html',\r\n  styleUrls: ['./entity-form.scss'],\r\n  imports: [\r\n    MatCardModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    CdkDrag,\r\n    CdkDragHandle,\r\n    MatSlideToggleModule,\r\n    EntityTranslateMenuComponent,\r\n    ChangeAnchorTargetDirective,\r\n    EditControlsBuilderDirective,\r\n    TranslateModule,\r\n    TippyDirective,\r\n    SafeHtmlPipe,\r\n    MousedownStopPropagationDirective,\r\n  ]\r\n})\r\nexport class EntityFormComponent implements OnInit, AfterViewChecked, OnDestroy {\r\n\r\n  log = classLog({ EntityFormComponent }, logSpecs);\r\n\r\n  @ViewChild('noteTrigger', { read: ElementRef }) private noteTriggerRef?: ElementRef<HTMLButtonElement>;\r\n  @ViewChild('noteTemplate') private noteTemplateRef?: TemplateRef<undefined>;\r\n\r\n  entityGuid = input<string>();\r\n  index = input<number>();\r\n\r\n  protected formConfig = inject(FormConfigService);\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n  #formsStateSvc = inject(FormsStateService);\r\n  #translate = inject(TranslateService);\r\n  #versioningReloader = transient(EditForceReloadService);\r\n\r\n  collapse = false;\r\n  noteTouched: boolean = false;\r\n\r\n  #features = inject(FeaturesService);\r\n  #editUiShowNotes = this.#features.isEnabled[FeatureNames.EditUiShowNotes];\r\n  #editUiShowMetadataFor = this.#features.isEnabled[FeatureNames.EditUiShowMetadataFor];\r\n\r\n  /** Languages */\r\n  languages = this.formConfig.language;\r\n\r\n  /** Content-Type Settings */\r\n  ctSettings = computedObj('ctSettings', () => {\r\n    const s = this.#fieldsSettingsSvc.contentTypeSettings();\r\n    const features = s.Features;\r\n    const ctFeatures = buildContentTypeFeatures(s.Features);\r\n\r\n    return {\r\n      itemTitle: s._itemTitle,\r\n      slotCanBeEmpty: s._slotCanBeEmpty,\r\n      slotIsEmpty: s._slotIsEmpty,\r\n      editInstructions: s.EditInstructions,\r\n      features,\r\n      showNotes: ctFeatures[FeatureNames.EditUiShowNotes] ?? this.#editUiShowNotes(),\r\n      showMdFor: ctFeatures[FeatureNames.EditUiShowMetadataFor] ?? this.#editUiShowMetadataFor(),\r\n    };\r\n  });\r\n\r\n  readOnly = computedObj('readOnly', () => this.#formsStateSvc.readOnly().isReadOnly);\r\n\r\n  /** Item-For (Target) Tooltip */\r\n  itemForTooltip = computedObj('itemForTooltip', () => {\r\n    const item = this.itemSvc.getItemFor(this.entityGuid());\r\n    return getItemForTooltip(item, this.#translate);\r\n  });\r\n\r\n  #retriggerNoteProps = signalObj<boolean>('retriggerNoteProps', false);\r\n  noteProps = computedObj('noteProps', () => {\r\n    this.#retriggerNoteProps(); // dependency to retrigger when #retriggerNoteProps changes\r\n    const entityGuid = this.entityGuid();\r\n    const languages = this.formConfig.language();\r\n    const note = this.itemSvc.getItemNote(entityGuid);\r\n    const notCreatedYet = this.itemSvc.get(entityGuid).Entity.Id === 0;\r\n    return getNoteProps(note, languages, notCreatedYet);\r\n  });\r\n\r\n  private noteRef?: MatDialogRef<undefined, any>;\r\n\r\n  #formDataSvc = transient(FormDataService);\r\n  #entitySvc = transient(EntityService);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private itemSvc: ItemService,\r\n    private editRoutingSvc: EditRoutingService,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) { }\r\n\r\n  ngAfterViewChecked() {\r\n    // change detection inside note template seems to be independent of this component and without forcing checks\r\n    // throws ExpressionChangedAfterItHasBeenCheckedError\r\n    (this.noteRef?._containerInstance as any)?._changeDetectorRef?.detectChanges();\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Update the notes whenever a child form is closed\r\n    this.#dialogRouter.doOnDialogClosed(() => this.#fetchNote());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.noteRef?.close();\r\n  }\r\n\r\n  toggleCollapse() {\r\n    this.collapse = !this.collapse;\r\n  }\r\n\r\n  toggleSlotIsEmpty() {\r\n    const entityGuid = this.entityGuid();\r\n    const oldHeader = this.itemSvc.getItemHeader(entityGuid);\r\n    const newHeader: ItemIdentifierHeader = {\r\n      ...oldHeader,\r\n      IsEmpty: !oldHeader.IsEmpty,\r\n    };\r\n    const l = this.log.fn('toggleSlotIsEmpty', { oldHeader, newHeader });\r\n    this.itemSvc.updater.updateItemHeader(entityGuid, newHeader);\r\n    l.end();\r\n  }\r\n\r\n  openHistory() {\r\n    const item = this.itemSvc.get(this.entityGuid());\r\n    this.#versioningReloader.watchToRefreshOnVersionsClosed();\r\n    this.#dialogRouter.navRelative([`versions/${item.Entity.Id}`]);\r\n  }\r\n\r\n  toggleNote(event: Event) {\r\n    const isOpen = this.noteRef?.getState() === MatDialogState.OPEN;\r\n    if (event.type === 'pointerenter' && this.noteTouched == false) this.openNote();\r\n    else if (event.type === 'pointerleave' && this.noteTouched == false) this.noteRef?.close();\r\n    else if (event.type === 'click' && isOpen) {\r\n      if (this.noteTouched == false)\r\n        this.noteTouched = true;\r\n      else {\r\n        this.noteRef?.close();\r\n        this.noteTouched = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  openNote() {\r\n    const triggerPosition = this.noteTriggerRef.nativeElement.getBoundingClientRect();\r\n    this.noteRef = this.matDialog.open(this.noteTemplateRef, {\r\n      autoFocus: false,\r\n      hasBackdrop: false,\r\n      disableClose: true,\r\n      restoreFocus: false,\r\n      closeOnNavigation: false,\r\n      position: {\r\n        top: `${triggerPosition.bottom}px`,\r\n        left: `${triggerPosition.left - 200}px`,\r\n      },\r\n      viewContainerRef: this.viewContainerRef,\r\n      panelClass: 'note-dialog',\r\n    });\r\n  }\r\n\r\n  editNote(note?: EavEntity) {\r\n    const entityGuid = this.entityGuid();\r\n    const l = this.log.fn('editNote', { note });\r\n    const item = this.itemSvc.get(entityGuid);\r\n    if (item.Entity.Id === 0) {\r\n      l.end('Item not saved yet, ID = 0');\r\n      return;\r\n    }\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        note == null\r\n          ? ItemIdHelper.newMetadata(entityGuid, eavConstants.contentTypes.notes, eavConstants.metadata.entity, true)\r\n          : ItemIdHelper.editId(note.Id),\r\n      ],\r\n    };\r\n    this.editRoutingSvc.open(null, null, form);\r\n  }\r\n\r\n  deleteNote(note: EavEntity) {\r\n    const language = this.formConfig.language();\r\n    const title = new EntityReader(language).getBestValue(note.Attributes.Title); // LocalizationHelpers.translate(language, note.Attributes.Title, null);\r\n    const id = note.Id;\r\n    if (!confirm(this.#translate.instant('Data.Delete.Question', { title, id })))\r\n      return;\r\n    this.#entitySvc.delete(this.formConfig.config.appId, eavConstants.contentTypes.notes, note.Id, false).subscribe(() => {\r\n      this.noteRef?.close();\r\n      this.#fetchNote();\r\n    });\r\n  }\r\n\r\n  #fetchNote() {\r\n    const entityGuid = this.entityGuid();\r\n    const item = this.itemSvc.get(entityGuid);\r\n    const l = this.log.fnIf('fetchNote', { entityGuid, item, id: item.Entity.Id });\r\n    if (item.Entity.Id === 0)\r\n      return l.end('no change');\r\n\r\n    const editItems = [ItemIdHelper.editId(item.Entity.Id)];\r\n    this.#formDataSvc.fetchFormData(JSON.stringify(editItems))\r\n      .subscribe(formData => {\r\n        const l2 = this.log.fn('noteFormData', { formData });\r\n        // Check if the item is still in the service being edited, as it could have been flushed when this triggers on version-restore\r\n        if (!this.itemSvc.get(entityGuid))\r\n          return l2.end(`Item ${entityGuid} not found in service, was probably flushed for reload`);\r\n\r\n        // Parse and update the note metadata\r\n        const items = formData.Items.map(i => EavItem.dtoToEav(i));\r\n        this.itemSvc.updater.updateItemMetadata(entityGuid, items[0].Entity.Metadata);\r\n        this.#retriggerNoteProps.set(true);\r\n        l2.end('updated note');\r\n      });\r\n    l.end('started note-loading');\r\n  }\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { EavEntity, EavFor } from '../shared/models/eav';\r\nimport { NoteProps } from './note-props.model';\r\n\r\nexport function getItemForTooltip(itemFor: EavFor, translate: TranslateService) {\r\n  if (!itemFor) return;\r\n  return translate.instant('Form.Buttons.Metadata.Tip')\r\n    + `\\nTarget: ${itemFor.Target}`\r\n    + `\\nTargetType: ${itemFor.TargetType}`\r\n    + (itemFor.Number ? `\\nNumber: ${itemFor.Number}` : '')\r\n    + (itemFor.String ? `\\nString: ${itemFor.String}` : '')\r\n    + (itemFor.Guid ? `\\nGuid: ${itemFor.Guid}` : '')\r\n    + (itemFor.Title ? `\\nTitle: ${itemFor.Title}` : '');\r\n}\r\n\r\nexport function getNoteProps(note: EavEntity, language: FormLanguage, itemNotSaved: boolean): NoteProps {\r\n  const noteProps: NoteProps = {\r\n    note,\r\n    tooltip: itemNotSaved ? 'Form.Buttons.Note.ItemNotSaved' : 'Form.Buttons.Note.Add',\r\n    triggerClass: `no-note ${itemNotSaved ? 'item-not-saved' : ''}`,\r\n    iconName: 'sticky_note_2',\r\n    noteClass: '',\r\n    noteHtml: undefined,\r\n    itemNotSaved,\r\n  };\r\n  if (!note) { return noteProps; }\r\n\r\n  noteProps.tooltip = undefined;\r\n  const reader = new EntityReader(language);\r\n  noteProps.noteHtml = reader.getBestValue(note.Attributes.Note);\r\n\r\n  const noteType = reader.getBestValue(note.Attributes.NoteType);\r\n  if (noteType === 'note') {\r\n    noteProps.triggerClass = 'has-note';\r\n  } else if (noteType === 'warning') {\r\n    noteProps.triggerClass = 'has-warning';\r\n    noteProps.iconName = 'warning';\r\n    noteProps.noteClass = 'warning';\r\n  }\r\n  return noteProps;\r\n}\r\n\r\nexport function buildContentTypeFeatures(contentTypeFeatures: string): Record<string, boolean> {\r\n  const features = contentTypeFeatures\r\n    .split('\\n')\r\n    .reduce((result, contentTypeFeature) => {\r\n      if (!contentTypeFeature)\r\n        return result;\r\n      const nameAndValue = contentTypeFeature.split('=');\r\n      const name = nameAndValue[0];\r\n      const value = nameAndValue[1] === 'true';\r\n      result[name] = value;\r\n      return result;\r\n    }, {} as Record<string, boolean>);\r\n  return features;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldSettingsHelperWithValueInit } from '../../fields/logic/field-settings-helper-with-value-init';\r\nimport { FieldSettingsHelpersManager } from '../../fields/logic/field-settings-helpers-manager';\r\nimport { AdamCacheService } from '../../shared/adam/adam-cache.service';\r\nimport { ValidationHelpers, ValidationHelperSpecs } from '../../shared/validation/validation.helpers';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { EntityFormStateService } from '../entity-form-state.service';\r\nimport { FieldInitSpecs } from './field-init-specs.model';\r\n\r\n@Injectable()\r\nexport class FormFieldsBuilderService {\r\n\r\n  log = classLog({FormFieldsBuilderService}, null);\r\n\r\n  constructor(\r\n    private fieldsSettingsSvc: FieldsSettingsService,\r\n    private adamCacheSvc: AdamCacheService,\r\n    private formBuilder: UntypedFormBuilder,\r\n    private entityFormConfigSvc: EntityFormStateService,\r\n  ) { }\r\n\r\n  public createFields(entityGuid: string, form: UntypedFormGroup, allFields: FieldInitSpecs[]) {\r\n\r\n    const l = this.log.fn('createFields');\r\n\r\n    // 1. create missing controls - usually just on first cycle\r\n    const fieldsToCreate = allFields.filter(({ inputType, hasControl }) =>\r\n      !InputTypeHelpers.isEmpty(inputType)    // Empty type, skip\r\n      && !hasControl                          // If control already exists, skip\r\n    );\r\n\r\n    this.log.a(`create missing controls ${fieldsToCreate.length} of ${allFields.length}`, { fieldsForNgForm: fieldsToCreate });\r\n\r\n    // Generate any fields which don't exist yet (usually only on first cycle)\r\n    for (const fields of fieldsToCreate) {\r\n      const { name: fieldName, props: fieldProps, inputType, value } = fields;\r\n      // The initial value at the moment the control is first created in this language\r\n      let initialValue = value;\r\n\r\n      // Special treatment for wysiwyg fields\r\n      // Note by 2dm 2024-08-19 - not sure if this actually works, because the changed buildValue is maybe never reused\r\n      // ...except for directly below\r\n      if (inputType === InputTypeCatalog.StringWysiwyg && initialValue) {\r\n        const logic = FieldSettingsHelpersManager.singleton().get(InputTypeCatalog.StringWysiwyg);\r\n        const adamItems = this.adamCacheSvc.getAdamSnapshot(entityGuid, fieldName);\r\n        fields.value = initialValue = (logic as unknown as FieldSettingsHelperWithValueInit).processValueOnLoad(initialValue, adamItems);\r\n      }\r\n\r\n      // Build control in the Angular form with validators\r\n      const disabled = fieldProps.settings.uiDisabled;\r\n      const fss = this.fieldsSettingsSvc;\r\n      const valSpecs = new ValidationHelperSpecs(fieldName, inputType, fss.settings[fieldName], fss.fieldProps[fieldName], () => fss.pickerData);\r\n      const validators = ValidationHelpers.getValidators(valSpecs, inputType);\r\n      const newControl = this.formBuilder.control({ disabled, value: initialValue }, validators);\r\n      // TODO: build all fields at once. That should be faster\r\n      form.addControl(fieldName, newControl);\r\n    }\r\n\r\n    this.entityFormConfigSvc.controlsCreated.set(true);\r\n    l.end();\r\n  }\r\n}\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { ServiceBase } from '../../../shared/services/service-base';\r\nimport { FieldValueHelpers } from '../../shared/helpers/field-value.helpers';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldInitSpecs } from './field-init-specs.model';\r\nimport { UiControl } from '../../shared/controls/ui-control';\r\n\r\nconst logSpecs = {\r\n  keepFieldsAndStateInSync: true,\r\n};\r\n\r\n@Injectable()\r\nexport class FormFieldsSyncService extends ServiceBase {\r\n\r\n  log = classLog({FormFieldsSyncService}, logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  keepFieldsAndStateInSync(form: UntypedFormGroup, fieldsToProcess: Observable<FieldInitSpecs[]>) {\r\n    const l = this.log.fnIf('keepFieldsAndStateInSync');\r\n    // This has multiple features, possibly we should separate them\r\n    // 2. Sync values between form and fieldProps - eg. on value changes which are from formulas\r\n    // 3. Ensure disabled state is in sync eg. after settings recalculations\r\n    // 4. Ensure validators are run in such scenarios\r\n    this.subscriptions.add(\r\n      fieldsToProcess.subscribe(allFields => {\r\n        // Figure out which fields may require further processing\r\n        const fieldsOnForm = allFields.filter(set => set.hasControl);\r\n\r\n        // 2. sync values - create list comparing the old raw values and new fieldProps - eg. modified by formulas\r\n        l.a(`sync values for max ${fieldsOnForm.length} controls`);\r\n        const oldValues: ItemValuesOfLanguage = form.getRawValue();\r\n        const newValues: ItemValuesOfLanguage = {};\r\n        for (const { name: fieldName, value } of fieldsOnForm)\r\n          newValues[fieldName] = value;\r\n\r\n        const changes = FieldValueHelpers.getItemValuesChanges(oldValues, newValues);\r\n        if (changes != null) {\r\n          l.a(`patching form as it changed (${Object.keys(changes).length}`, { changes, oldValues, newValues })\r\n          // controls probably don't need to set touched and dirty for this kind of update.\r\n          // This update usually happens for language change, formula or updates on same entity in another Edit Ui.\r\n          // In case controls should be updated, update with control.markAsTouched and control.markAsDirty.\r\n          // Marking the form will not mark controls, but marking controls marks the form\r\n          form.patchValue(changes);\r\n        } else\r\n          l.a('no changes detected', { oldValues, newValues });\r\n\r\n        // 3. sync disabled if state not matching\r\n        // Important: Fires valueChange event for every single control\r\n        l.a('sync \"disabled\" state');\r\n        for (const { control, props } of fieldsOnForm)\r\n          UiControl.disable(control, props.settings.uiDisabled);\r\n\r\n        // 4. run validators - required because formulas can recalculate validators and if value doesn't change, new validator will not run\r\n        l.a('run validators');\r\n        for (const { control } of fieldsOnForm)\r\n          control.updateValueAndValidity();\r\n      })\r\n    );\r\n\r\n    l.end();\r\n  }\r\n}\r\n","import { Component, inject, Injector, input, OnDestroy, OnInit } from '@angular/core';\r\nimport { toObservable } from '@angular/core/rxjs-interop';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { filter, map, Observable, take } from 'rxjs';\r\nimport { transient } from '../../../../../../core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FormulaDesignerService } from '../../formulas/designer/formula-designer.service';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { FieldsTranslateService } from '../../state/fields-translate.service';\r\nimport { EntityFormStateService } from '../entity-form-state.service';\r\nimport { EntityFormSyncService } from '../entity-form-sync.service';\r\nimport { EntityFormComponent } from '../entity-form/entity-form';\r\nimport { FieldInitSpecs } from './field-init-specs.model';\r\nimport { FormFieldsBuilderService } from './form-fields-builder.service';\r\nimport { FormFieldsSyncService } from './form-fields-sync.service';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  getFieldsToProcess: false,\r\n  ngOnInit: false,\r\n  ['fieldsToProcess$']: true,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-edit-entity-form-builder',\r\n  templateUrl: './form-builder.html',\r\n  styleUrls: ['./form-builder.scss'],\r\n  imports: [\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    EntityFormComponent,\r\n  ],\r\n  providers: [\r\n    FieldsSettingsService, // used for all field settings - must be shared from here\r\n    FieldsTranslateService, // used for field translations and uses FieldsSettingsService, so also shared here\r\n    EntityFormStateService, // used for sharing information about this entity form\r\n  ]\r\n})\r\nexport class EntityFormBuilderComponent implements OnInit, OnDestroy {\r\n  entityGuid = input<string>();\r\n  index = input<number>();\r\n\r\n  log = classLog({ EntityFormBuilderComponent }, logSpecs);\r\n\r\n  /** Inject the form state service to start it here */\r\n  #formStateSvc = inject(EntityFormStateService);\r\n\r\n  #formulaDesignerService = inject(FormulaDesignerService);\r\n  #fieldsTranslateSvc = inject(FieldsTranslateService);\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n  #injector = inject(Injector);\r\n\r\n  // Transient services\r\n  #formFieldsBuilderService = transient(FormFieldsBuilderService);\r\n  #fieldsSyncSvc = transient(FormFieldsSyncService);\r\n  #formSyncSvc = transient(EntityFormSyncService);\r\n\r\n  constructor() { }\r\n\r\n  public form = this.#formStateSvc.formGroup;\r\n\r\n  ngOnInit() {\r\n    const entityGuid = this.entityGuid();\r\n    const l = this.log.fnIf('ngOnInit', { entityGuid });\r\n    this.#fieldsSettingsSvc.init(entityGuid);\r\n    this.#formulaDesignerService.itemSettingsServices[entityGuid] = this.#fieldsSettingsSvc;\r\n    this.#fieldsTranslateSvc.init(entityGuid);\r\n\r\n    const fields$ = this.#getFieldsToProcess$(entityGuid);\r\n\r\n    // Create all the controls in the form right at the beginning\r\n    fields$.pipe(take(1)).subscribe(allFields => this.#formFieldsBuilderService.createFields(entityGuid, this.form, allFields));\r\n\r\n    this.#fieldsSyncSvc.keepFieldsAndStateInSync(this.form, fields$);\r\n\r\n    // Sync state to parent: dirty, isValid, value changes\r\n    this.#formSyncSvc.setupSync(entityGuid);\r\n\r\n    l.end();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#fieldsSettingsSvc.disableForCleanUp();\r\n  }\r\n\r\n  #getFieldsToProcess$(entityGuid: string): Observable<FieldInitSpecs[]> {\r\n    const l = this.log.fnIf('getFieldsToProcess', null, entityGuid);\r\n    const form = this.form;\r\n\r\n    const allProps = this.#fieldsSettingsSvc.allProps;\r\n    const allProps$ = toObservable(allProps, { injector: this.#injector });\r\n\r\n    // 1. Prepare: Take field props and enrich initial values and input types\r\n    const fieldsToProcess: Observable<FieldInitSpecs[]> = allProps$\r\n      .pipe(\r\n        filter(fields => fields != null && Object.keys(fields).length > 0),\r\n        map(allFields => {\r\n          const fields: FieldInitSpecs[] = Object.entries(allFields)\r\n            .map(([name, props]) => {\r\n              const hasControl = form.controls.hasOwnProperty(name);\r\n              const control = hasControl ? form.controls[name] : null;\r\n              return {\r\n                name,\r\n                props,\r\n                inputType: props.constants.inputTypeSpecs.inputType,\r\n                value: props.value,\r\n                hasControl,\r\n                control,\r\n              } satisfies FieldInitSpecs;\r\n            });\r\n          this.log.aIf('fieldsToProcess$', { entityGuid, fields });\r\n          return fields;\r\n        }),\r\n      );\r\n    return l.rSilent(fieldsToProcess);\r\n  }\r\n}\r\n","<form class=\"dynamic-form\" [formGroup]=\"form\">\r\n  <app-edit-entity-form [entityGuid]=\"entityGuid()\" [index]=\"index()\"></app-edit-entity-form>\r\n</form>\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Preview of Features which are not Licensed</mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <p>\r\n      99% of all features in 2sxc are free. But some very advanced features are only for patrons (supporters) and enterprise customers. You\r\n      are permitted to try these features, but to really use them you must get a license.\r\n    </p>\r\n    <p>\r\n      This message should remind you  of that.\r\n      <br />\r\n      Please contact your account manager to get them licensed, or visit the\r\n      <a href=\"https://patrons.2sxc.org/\" target=\"_blank\">patrons</a> to learn more.\r\n    </p>\r\n    <p>The following features are currently in preview:</p>\r\n    @for (feature of features(); track feature.nameId) {\r\n      <app-feature-details-dialog\r\n        [specs]=\"{ feature: feature, showGuid: false, showStatus: true, showClose: false }\"\r\n      ></app-feature-details-dialog>\r\n      <br />\r\n    }\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { Component, inject, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../core';\r\nimport { FeatureDetailsDialogComponent } from '../../apps-management/licence-info/feature-details-dialog/feature-details-dialog';\r\nimport { classLog, commonSpecs } from '../../shared/logging';\r\nimport { FeaturesService } from '../features.service';\r\nimport { FeatureDetailService } from '../services/feature-detail.service';\r\n\r\nconst logSpecs = {\r\n  ...commonSpecs,\r\n  unlicensedFeatures: false,\r\n};\r\n\r\n@Component({\r\n    selector: 'app-features-used-but-unlicensed-dialog',\r\n    templateUrl: './features-used-but-unlicensed-dialog.html',\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        TranslateModule,\r\n        FeatureDetailsDialogComponent,\r\n    ]\r\n})\r\nexport class FeaturesUsedButUnlicensedComponent {\r\n\r\n  log = classLog({ FeaturesUsedButUnlicensedComponent }, logSpecs);\r\n\r\n  #features = inject(FeaturesService);\r\n\r\n  #featureDetails = transient(FeatureDetailService);\r\n\r\n  constructor() {\r\n    const l = this.log.fnIf('constructor');\r\n  }\r\n\r\n  protected features = this.#featureDetails.getFeatureDetails(this.#features.unlicensedFeatures());\r\n  \r\n\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param dialog\r\n * @param viewContainerRef the container ref is important to get services (eg. features) from the parent component\r\n */\r\nexport function openFeaturesUsedButUnlicensedDialog(dialog: MatDialog, viewContainerRef: ViewContainerRef) {\r\n  dialog.open(FeaturesUsedButUnlicensedComponent, {\r\n    autoFocus: false,\r\n    viewContainerRef: viewContainerRef,\r\n    width: '600px',\r\n  });\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { Of } from '../../../../../../../core';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormPublishingService } from '../../../form/form-publishing.service';\r\nimport { PublishModes } from '../../main/edit-dialog-main.models';\r\nimport { isCtrlS } from '../../main/keyboard-shortcuts';\r\n\r\n\r\n@Component({\r\n    selector: 'app-publish-status-dialog',\r\n    templateUrl: './publish-status-dialog.html',\r\n    styleUrls: ['./publish-status-dialog.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        MatListModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        TranslateModule,\r\n    ]\r\n})\r\nexport class PublishStatusDialogComponent {\r\n  PublishModes = PublishModes;\r\n\r\n  protected publishMode = this.publishStatusService.getPublishMode(this.formConfig.config.formId)\r\n  protected options = this.formConfig.config.versioningOptions;\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<PublishStatusDialogComponent>,\r\n    private publishStatusService: FormPublishingService,\r\n    private formConfig: FormConfigService,\r\n  ) {\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlS(event))\r\n        event.preventDefault();\r\n    });\r\n  }\r\n\r\n  setPublishMode(publishMode: Of<typeof PublishModes>) {\r\n    this.publishStatusService.setPublishMode(publishMode, this.formConfig.config.formId, this.formConfig);\r\n    this.closeDialog();\r\n  }\r\n\r\n  private closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>{{ 'PublishStatus.Dialog.Title' | translate }}</mat-card-title>\r\n    <mat-card-subtitle>{{ 'PublishStatus.Dialog.Intro' | translate }}</mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content class=\"eav-card-content__no-padding\">\r\n    <mat-nav-list toggle>\r\n      <mat-list-item lines=\"3\" (click)=\"setPublishMode(PublishModes.Show)\"\r\n        [disabled]=\"options[PublishModes.Show] !== true\"\r\n        [ngClass]=\"{ 'eav-list-item__focus': publishMode() === PublishModes.Show }\">\r\n        <mat-icon matListItemIcon>visibility</mat-icon>\r\n        <span matListItemTitle>{{ 'PublishStatus.Dialog.Show.Title' | translate }}</span>\r\n        <span>{{ 'PublishStatus.Dialog.Show.Body' | translate }}</span>\r\n      </mat-list-item>\r\n      <mat-list-item lines=\"3\" (click)=\"setPublishMode(PublishModes.Hide)\"\r\n        [disabled]=\"options[PublishModes.Hide] !== true\"\r\n        [ngClass]=\"{ 'eav-list-item__focus': publishMode() === PublishModes.Hide }\">\r\n        <mat-icon matListItemIcon>visibility_off</mat-icon>\r\n        <span matListItemTitle>{{ 'PublishStatus.Dialog.Hide.Title' | translate }}</span>\r\n        <span>{{ 'PublishStatus.Dialog.Hide.Body' | translate }}</span>\r\n      </mat-list-item>\r\n      <mat-list-item lines=\"3\" (click)=\"setPublishMode(PublishModes.Branch)\"\r\n        [disabled]=\"options[PublishModes.Branch] !== true\"\r\n        [ngClass]=\"{ 'eav-list-item__focus': publishMode() === PublishModes.Branch }\">\r\n        <mat-icon matListItemIcon svgIcon=\"draft-branch\"></mat-icon>\r\n        <span matListItemTitle>{{ 'PublishStatus.Dialog.Branch.Title' | translate }}</span>\r\n        <span>{{ 'PublishStatus.Dialog.Branch.Body' | translate }}</span>\r\n      </mat-list-item>\r\n    </mat-nav-list>\r\n  </mat-card-content>\r\n</mat-card>\r\n","<mat-card class=\"eav-header\">\r\n  <!-- Close button to the left -->\r\n  <button\r\n    mat-icon-button\r\n    class=\"eav-exit-button\"\r\n    (click)=\"close()\"\r\n    [tippyTranslate]=\"'Form.Buttons.' + (config.isParentDialog ? 'Exit' : 'Return') + '.Tip'\"\r\n  >\r\n    <mat-icon class=\"eav-icon\">{{ config.isParentDialog ? 'clear' : 'arrow_back' }}</mat-icon>\r\n  </button>\r\n\r\n  <!-- Language Bar (if used). The empty div is always needed because ATM the alignment would otherwise be off (should fix) -->\r\n  <div class=\"eav-languages\">\r\n    @if (hasLanguages()) {\r\n      @defer {\r\n        <app-language-switcher [disabled]=\"disabled()\"></app-language-switcher>\r\n      }\r\n    }\r\n  </div>\r\n\r\n  <!-- END -->\r\n  @if (readOnly().isReadOnly) {\r\n    <mat-icon class=\"eav-hint-icon\" [tippyTranslate]=\"'General.ReadOnlyHint.' + readOnly().reason\"> lock </mat-icon>\r\n  }\r\n  @if (config.isCopy) {\r\n    <mat-icon class=\"eav-hint-icon\" tippyTranslate=\"General.CopyHint\"> file_copy </mat-icon>\r\n  }\r\n  <button\r\n    mat-button\r\n    class=\"eav-publish-button\"\r\n    [disabled]=\"readOnly().isReadOnly\"\r\n    (click)=\"openPublishStatusDialog()\"\r\n    [tippyTranslate]=\"'PublishStatus.' + publishMode() + '.Tip'\"\r\n  >\r\n    <span class=\"eav-publish-mode\">\r\n      {{ 'PublishStatus.Label' | translate }}\r\n      <b>{{ 'PublishStatus.' + publishMode() | translate | uppercase }}</b>\r\n    </span>\r\n  </button>\r\n  @if (showLicenseWarning()) {\r\n    <button mat-button tippyTranslate=\"License-EditUi-Warning-Tooltip\" (click)=\"openUnlicensedDialog()\">\r\n      {{ 'License-EditUi-Warning-Label' | translate }} \r\n    </button>\r\n  }\r\n</mat-card>\r\n","import { UpperCasePipe } from '@angular/common';\r\nimport { Component, computed, inject, input, output, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { openFeaturesUsedButUnlicensedDialog } from '../../../features/dialogs/features-used-but-unlicensed-dialog';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormPublishingService } from '../../form/form-publishing.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { LanguageService } from '../../localization/language.service';\r\nimport { LanguageSwitcherComponent } from './language-switcher/language-switcher';\r\nimport { PublishStatusDialogComponent } from './publish-status-dialog/publish-status-dialog';\r\n\r\n@Component({\r\n    selector: 'app-edit-dialog-header',\r\n    templateUrl: './edit-dialog-header.html',\r\n    styleUrls: ['./edit-dialog-header.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        LanguageSwitcherComponent,\r\n        UpperCasePipe,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class EditDialogHeaderComponent {\r\n  disabled = input<boolean>();\r\n  protected closeDialog = output<void>();\r\n\r\n  #formsStateSvc = inject(FormsStateService);\r\n  #features = inject(FeaturesService);\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private languageService: LanguageService,\r\n    private publishStatusService: FormPublishingService,\r\n    public formConfig: FormConfigService,\r\n  ) { }\r\n\r\n  protected config = this.formConfig.config;\r\n  protected readOnly = this.#formsStateSvc.readOnly;\r\n  protected publishMode = this.publishStatusService.getPublishMode(this.formConfig.config.formId)\r\n\r\n  protected hasLanguages = computed(() => {\r\n    const languages = this.languageService.getAllSignal();\r\n    return languages().length > 0\r\n  });\r\n\r\n  protected showLicenseWarning = this.#features.hasUnlicensedFeatures;\r\n\r\n  close() {\r\n    this.closeDialog.emit();\r\n  }\r\n\r\n  openPublishStatusDialog() {\r\n    this.matDialog.open(PublishStatusDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '350px',\r\n    });\r\n  }\r\n\r\n  openUnlicensedDialog() {\r\n    openFeaturesUsedButUnlicensedDialog(this.matDialog, this.viewContainerRef);\r\n  }\r\n}\r\n","import { EavField } from '../eav';\r\n\r\n/**\r\n * A JSON representation of EavValues.\r\n * The keys are a string containing a CSV list of assigned dimensions, the values are the values.\r\n * This is a DTO (Data Transfer Object).\r\n */\r\nexport class EavValuesDto<T> {\r\n  [languages: string]: T;\r\n\r\n  static eavToDto<T>(eavValues: EavField<T>): EavValuesDto<T> {\r\n    const dtoValue: EavValuesDto<T> = {};\r\n    for (const value of eavValues.Values) {\r\n      const dimensions = value.dimensions.map(dimension => dimension.dimCode).join();\r\n      dtoValue[dimensions] = value.value;\r\n    }\r\n    return dtoValue;\r\n  }\r\n}\r\n","import { EavAttributesOfTypeDto, EavValuesDto } from '.';\r\nimport { EavEntityAttributes } from '../eav';\r\n\r\n/**\r\n * A JSON representation of EavAttributes.\r\n * It's basically a list containing each type (string, number, etc.).\r\n * That then contains an array of all the attributes of that type.\r\n * This is a DTO (Data Transfer Object).\r\n */\r\nexport class EavAttributesDto {\r\n  [attributeType: string]: EavAttributesOfTypeDto<any>;\r\n\r\n  static eavToDto(attributes: EavEntityAttributes): EavAttributesDto {\r\n    const attributesDto: EavAttributesDto = {};\r\n\r\n    for (const [name, values] of Object.entries(attributes)) {\r\n      const type = values.Type;\r\n      if (attributesDto[type] == null)\r\n        attributesDto[type] = {};\r\n      attributesDto[type][name] = EavValuesDto.eavToDto(values);\r\n    }\r\n    return attributesDto;\r\n  }\r\n}\r\n","import { EavAttributesDto } from '.';\r\nimport { EavEntity, EavFor, EavType } from '../eav';\r\n\r\n/**\r\n * A JSON representation of an EavEntity.\r\n * This is a DTO (Data Transfer Object).\r\n */\r\nexport class EavEntityDto {\r\n  Attributes: EavAttributesDto;\r\n  Guid: string;\r\n  Id: number;\r\n  Owner: string;\r\n  Type: EavType;\r\n  Version: number;\r\n  For?: EavFor;\r\n  Metadata?: EavEntityDto[];\r\n\r\n  static eavToDto(entity: EavEntity): EavEntityDto {\r\n    const attributesDto = EavAttributesDto.eavToDto(entity.Attributes);\r\n    const metadataDto = this.eavToDtoMany(entity.Metadata);\r\n\r\n    const entityDto: EavEntityDto = {\r\n      Attributes: attributesDto,\r\n      Guid: entity.Guid,\r\n      Id: entity.Id,\r\n      Owner: entity.Owner,\r\n      Type: entity.Type,\r\n      Version: entity.Version,\r\n      For: entity.For,\r\n      Metadata: metadataDto,\r\n    };\r\n    return entityDto;\r\n  }\r\n\r\n  private static eavToDtoMany(entities: EavEntity[]): EavEntityDto[] {\r\n    if (entities == null)\r\n      return null;\r\n\r\n    const result = entities.map(e => EavEntityDto.eavToDto(e));\r\n    return result;\r\n  }\r\n}\r\n","import { EavEntityDto } from '.';\r\nimport { ItemIdentifierHeader } from '../../../../shared/models/edit-form.model';\r\nimport { EavItem } from '../eav';\r\n\r\n/**\r\n * A bundle/set for an Entity.\r\n * Contains the Entity and the Header.\r\n * This is a DTO (Data Transfer Object).\r\n */\r\nexport class EavEntityBundleDto {\r\n  Entity: EavEntityDto;\r\n  Header: ItemIdentifierHeader;\r\n\r\n  static bundleToDto(item: EavItem): EavEntityBundleDto {\r\n    const entity1 = EavEntityDto.eavToDto(item.Entity);\r\n\r\n    const bundleDto: EavEntityBundleDto = {\r\n      Entity: entity1,\r\n      Header: item.Header,\r\n    };\r\n    return bundleDto;\r\n  }\r\n}\r\n","<div class=\"save-errors-container\">\r\n  <div>{{ 'Errors.SaveErrors' | translate }}</div>\r\n  <br />\r\n  @for (error of snackBarData.fieldErrors; track error) {\r\n    <div>\r\n      <span>{{ error.field }}<span>: {{ error.message | translate }}</span></span>\r\n    </div>\r\n  }\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_SNACK_BAR_DATA } from '@angular/material/snack-bar';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { SaveErrorsSnackBarData } from './snack-bar-save-errors.models';\r\n\r\n@Component({\r\n    selector: 'app-snack-bar-save-errors',\r\n    templateUrl: './snack-bar-save-errors.html',\r\n    styleUrls: ['./snack-bar-save-errors.scss'],\r\n    imports: [TranslateModule]\r\n})\r\nexport class SnackBarSaveErrorsComponent {\r\n  constructor(@Inject(MAT_SNACK_BAR_DATA) public snackBarData: SaveErrorsSnackBarData) { }\r\n}\r\n","import { computed, inject, Injectable, QueryList } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { transient } from 'projects/core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EntityFormBuilderComponent } from '../../entity-form/entity-form-builder/form-builder';\r\nimport { EntityFormStateService } from '../../entity-form/entity-form-state.service';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormDataService } from '../../form/form-data.service';\r\nimport { FormPublishingService } from '../../form/form-publishing.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { EavItem } from '../../shared/models/eav/eav-item';\r\nimport { EavEntityBundleDto } from '../../shared/models/json-format-v1/eav-entity-bundle-dto';\r\nimport { ValidationMsgHelper } from '../../shared/validation/validation-messages.helpers';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { MetadataDecorators } from '../../state/metadata-decorators.constants';\r\nimport { SaveJsReturnData } from '../dialogRouteState.model';\r\nimport { EditDialogMainComponent } from './edit-dialog-main';\r\nimport { SaveEavFormData } from './edit-dialog-main.models';\r\nimport { SnackBarSaveErrorsComponent } from './snack-bar-save-errors/snack-bar-save-errors';\r\nimport { FieldErrorMessage, SaveErrorsSnackBarData } from './snack-bar-save-errors/snack-bar-save-errors.models';\r\n\r\nconst logSpecs = {\r\n  'saveAll': true,\r\n  '#saveThroughJs': true,\r\n  '#saveDefault': true,\r\n}\r\n\r\n/**\r\n * Helper to perform saving operations in the Edit Dialog\r\n */\r\n@Injectable()\r\nexport class EditDialogSaveService {\r\n\r\n  log = classLog({ EditDialogSaveService }, logSpecs);\r\n  \r\n  #formConfig = inject(FormConfigService);\r\n  itemService = inject(ItemService);\r\n  contentTypeService = inject(ContentTypeService);\r\n  formsStateService = inject(FormsStateService);\r\n  publishStatusService = inject(FormPublishingService);\r\n  translate = inject(TranslateService);\r\n  snackBar = inject(MatSnackBar);\r\n\r\n  #formDataService = transient(FormDataService);\r\n\r\n  /**\r\n   * Bug: 2026-01-08 this is injected as transient, so it's its own instance.\r\n   * But it's also used in one other place (the popup-dialog)\r\n   * where it checks for isSaving - but that will never match with this one.\r\n   * Won't fix yet, because the side-effect must be minimal, but it's not quite right.\r\n   */\r\n  entityFormStateService = transient(EntityFormStateService);\r\n\r\n  /** Determine that save is not allowed / enabled at certain times */\r\n  disabled = computed(() => this.entityFormStateService.isSaving() || this.formsStateService.saveButtonDisabled());\r\n\r\n\r\n  /** \r\n   * Save Everything - if possible, and optionally close the dialog\r\n   */\r\n  saveAll(editDialog: EditDialogMainComponent, close: boolean): void {\r\n\r\n    const l = this.log.fnIf('saveAll', { close });\r\n\r\n    this.entityFormStateService.isSaving.set(true);\r\n\r\n\r\n    // Case 1. New v20 - if no save mode, then just close the dialog\r\n    if (this.#formConfig.config.save.mode === false) {\r\n      editDialog.dialog.close();\r\n      return l.end('no-save mode; closed without saving');\r\n    }\r\n\r\n    // Case 2. Form not valid\r\n    if (!this.formsStateService.formsAreValid()) {\r\n      this.#skipSaveWhenFormIsInvalid(editDialog);\r\n      return l.end('save skipped - form invalid');\r\n    }\r\n\r\n    // Case 3. If the Dialog is Local return data mode, then return the data\r\n    const eavItem = this.itemService.get(editDialog.formBuilderRefs.get(0).entityGuid());\r\n    const saveMode = eavItem.Header.ClientData?.save === 'js';\r\n\r\n    console.log('2dm - EditDialogSaveService - saveAll', { saveMode, clientData: eavItem.Header.ClientData });\r\n\r\n    if (saveMode) {\r\n      this.#saveThroughJs(editDialog, close);\r\n      return l.end('will be saved through js');\r\n    }\r\n\r\n    // Case 4. If the Dialog is in standard Save Mode, then just save the data\r\n    this.#saveDefault(editDialog, close);\r\n    return l.end('saved default');\r\n\r\n  }\r\n\r\n  /**\r\n   * Skip saving, but instead return the data so upstream can handle saving\r\n   * @returns \r\n   */\r\n  #saveThroughJs(editDialog: EditDialogMainComponent, close: boolean): void {\r\n    const l = this.log.fnIf('#saveThroughJs', { close });\r\n    const itemsEavObj: Record<string, unknown>[] = this.#getValidEavItems(editDialog.formBuilderRefs,\r\n      eavItem => EavItem.eavToObj(eavItem),\r\n    );\r\n\r\n    // Need to be clearly define for the route state (if objData in the state, data will be not refresh from the server) \r\n    const wrappedData: SaveJsReturnData<unknown> = {\r\n      data: itemsEavObj[0]\r\n    };\r\n    editDialog.dialog.close(wrappedData);\r\n    return l.end('returning wrapped data');\r\n  }\r\n\r\n  /**\r\n   * Do standard save operation\r\n   * @param editDialog \r\n   * @param close \r\n   */\r\n  #saveDefault(editDialog: EditDialogMainComponent, close: boolean): void {\r\n    const l = this.log.fnIf('#saveDefault', { close });\r\n\r\n    // Convert data to save format, get publishing state and prepare save data\r\n    const items = this.#getValidEavItems(\r\n      editDialog.formBuilderRefs,\r\n      eavItem => EavEntityBundleDto.bundleToDto(eavItem)\r\n    );\r\n\r\n    const publishStatus = this.publishStatusService.get(this.#formConfig.config.formId);\r\n\r\n    const saveFormData: SaveEavFormData = {\r\n      Items: items,\r\n      IsPublished: publishStatus.IsPublished,\r\n      DraftShouldBranch: publishStatus.DraftShouldBranch,\r\n    };\r\n    l.a('SAVE FORM DATA:', { saveFormData });\r\n\r\n    // Show saving message and start saving process\r\n    this.snackBar.open(this.translate.instant('Message.Saving'), null, { duration: 2000 });\r\n\r\n    this.#formDataService\r\n      .saveFormData(saveFormData, this.#formConfig.config.partOfPage)\r\n      .subscribe({\r\n        next: result => {\r\n          l.a('SAVED!, result:', { result, close });\r\n          this.itemService.updater.updateItemId(result);\r\n          this.snackBar.open(this.translate.instant('Message.Saved'), null, { duration: 2000 });\r\n          this.formsStateService.formsAreDirty.set(false);\r\n          if (close)\r\n            editDialog.closeDialog(undefined, result);\r\n\r\n          setTimeout(() => this.entityFormStateService.isSaving.set(false), 500);\r\n        },\r\n        error: err => {\r\n          l.a('SAVE FAILED:', err);\r\n          this.snackBar.open('Error', null, { duration: 2000 });\r\n          this.entityFormStateService.isSaving.set(false)\r\n        },\r\n      });\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle skipping save when the form is invalid.\r\n   */\r\n  #skipSaveWhenFormIsInvalid(editDialog: EditDialogMainComponent): void {\r\n    // Quickly set saving to false, otherwise further saves will be blocked\r\n    this.entityFormStateService.isSaving.set(false);\r\n\r\n    // check if there is even a formBuilder to process, otherwise exit\r\n    if (editDialog.formBuilderRefs == null)\r\n      return;\r\n\r\n    const formErrors: Record<string, string>[] = [];\r\n    editDialog.formBuilderRefs.forEach(formBuilderRef => {\r\n      if (!formBuilderRef.form.invalid)\r\n        return;\r\n      formErrors.push(ValidationMsgHelper.validateForm(formBuilderRef.form));\r\n    });\r\n\r\n    const fieldErrors: FieldErrorMessage[] = [];\r\n    formErrors.forEach(formError => {\r\n      Object.keys(formError).forEach(key => {\r\n        fieldErrors.push({ field: key, message: formError[key] });\r\n      });\r\n    });\r\n\r\n    this.snackBar.openFromComponent(SnackBarSaveErrorsComponent, {\r\n      data: {\r\n        fieldErrors,\r\n      } satisfies SaveErrorsSnackBarData,\r\n      duration: 5000,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get valid EAV items by mapping them with the provided function.\r\n   * @param mapFn Function to map EavItem to a specific type T or null if invalid\r\n   * @returns Array of valid mapped items\r\n   */\r\n  #getValidEavItems<T>(formBuilderRefs: QueryList<EntityFormBuilderComponent>, mapFn: (eavItem: EavItem) => T | null): T[] {\r\n    return formBuilderRefs\r\n      .map(ref => {\r\n        const eavItem = this.itemService.get(ref.entityGuid());\r\n\r\n        const isValid = this.formsStateService.getFormValid(eavItem.Entity.Guid);\r\n        if (!isValid)\r\n          return null;\r\n\r\n        const hasAttributes = Object.keys(eavItem.Entity.Attributes).length > 0;\r\n        const contentType = this.contentTypeService.getContentTypeOfItem(eavItem);\r\n        const saveIfEmpty = contentType.Metadata.some(\r\n          m => m.Type.Name === MetadataDecorators.SaveEmptyDecorator\r\n        );\r\n\r\n        if (!hasAttributes && !saveIfEmpty)\r\n          return null;\r\n\r\n        return mapFn(eavItem);\r\n      })\r\n      .filter((item): item is T => item != null);\r\n  }\r\n\r\n}","import { Directive, ElementRef, OnDestroy, OnInit } from '@angular/core';\r\nimport { delay, filter, fromEvent, map, merge, pairwise } from 'rxjs';\r\nimport { BaseDirective } from '../../../shared/directives/base.directive';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { mapUntilChanged } from '../../../shared/rxJs/mapUntilChanged';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { LanguageService } from '../../localization/language.service';\r\n\r\nconst classNext = 'next';\r\nconst classPrevious = 'previous';\r\nconst animationNames = ['move-next', 'move-previous'];\r\n\r\n@Directive({\r\n  selector: '[appFormSlide]',\r\n})\r\nexport class FormSlideDirective extends BaseDirective implements OnInit, OnDestroy {\r\n\r\n  log = classLog({FormSlideDirective});\r\n\r\n  constructor(\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    private languageService: LanguageService,\r\n    private formConfig: FormConfigService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    const l = this.log.fn('ngOnInit');\r\n    const languages = this.languageService.getAll();\r\n    const nativeElement = this.elementRef.nativeElement;\r\n    this.subscriptions.add(\r\n      merge(\r\n        // emit 'next' and 'previous' slide direction based on language change\r\n        this.formConfig.language$.pipe(\r\n          map(language => language.current),\r\n          mapUntilChanged(m => m),\r\n          // distinctUntilChanged(),\r\n          pairwise(),\r\n          map(([previousLang, currentLang]) => {\r\n            l.a('toggle', { previousLang, currentLang });\r\n            const prevIndex = languages.findIndex(lang => lang.NameId === previousLang);\r\n            const currentIndex = languages.findIndex(lang => lang.NameId === currentLang);\r\n            const slide = (prevIndex > currentIndex) ? classPrevious : classNext;\r\n            l.a('slide', { prevIndex, currentIndex, slide });\r\n            return slide;\r\n          }),\r\n        ),\r\n        // emit '' to stop the slide animation\r\n        fromEvent<AnimationEvent>(nativeElement, 'animationend').pipe(\r\n          filter(event => animationNames.find(an => event.animationName.endsWith(an)) !== undefined),\r\n          map(() => ''),\r\n          delay(0), // small delay because animationend fires a bit too early\r\n        ),\r\n      ).subscribe(slide => {\r\n        const classList = nativeElement.classList;\r\n        if (slide === '') {\r\n          l.a('stop-slide');\r\n          classList.remove(classNext);\r\n          classList.remove(classPrevious);\r\n        } else {\r\n          l.a(`start-slide to '${slide}'`);\r\n          classList.add(slide);\r\n        }\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { UpperCasePipe } from '@angular/common';\r\nimport { Component, Inject } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MAT_SNACK_BAR_DATA, MatSnackBarRef } from '@angular/material/snack-bar';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { UnsavedChangesSnackBarData } from './snack-bar-unsaved-changes.models';\r\n\r\n@Component({\r\n    selector: 'app-snack-bar-unsaved-changes',\r\n    templateUrl: './snack-bar-unsaved-changes.html',\r\n    styleUrls: ['./snack-bar-unsaved-changes.scss'],\r\n    imports: [\r\n        MatButtonModule,\r\n        UpperCasePipe,\r\n        TranslateModule,\r\n        UpperCasePipe\r\n    ]\r\n})\r\nexport class SnackBarUnsavedChangesComponent {\r\n  constructor(\r\n    private snackRef: MatSnackBarRef<SnackBarUnsavedChangesComponent>,\r\n    @Inject(MAT_SNACK_BAR_DATA) private snackBarData: UnsavedChangesSnackBarData,\r\n  ) { }\r\n\r\n  saveChanges(save: boolean) {\r\n    this.snackBarData.save = save;\r\n    this.snackRef.dismissWithAction();\r\n  }\r\n}\r\n","<!-- The message -->\r\n<span class=\"error-message\">\r\n  {{ 'Errors.UnsavedChanges' | translate }}\r\n</span>\r\n\r\n<!-- The save / exit buttons -->\r\n<div class=\"my-flex-right\">\r\n  <button mat-button color=\"primary\" (click)=\"saveChanges(false)\">\r\n    {{ 'General.Buttons.NotSave' | translate | uppercase }}\r\n  </button>\r\n  <button mat-button color=\"primary\" (click)=\"saveChanges(true)\">\r\n    {{ 'General.Buttons.Save' | translate | uppercase }}\r\n  </button>\r\n</div>\r\n","import { CdkScrollable } from '@angular/cdk/scrolling';\r\nimport { NgClass } from '@angular/common';\r\nimport { AfterViewInit, Component, computed, effect, inject, OnDestroy, OnInit, QueryList, signal, untracked, ViewChildren } from '@angular/core';\r\nimport { toSignal } from '@angular/core/rxjs-interop';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { delay, fromEvent, of, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../../core';\r\nimport { BaseComponent } from '../../../shared/components/base';\r\nimport { ToggleDebugDirective } from '../../../shared/directives/toggle-debug.directive';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { ExtendedFabSpeedDialImports } from '../../../shared/modules/extended-fab-speed-dial/extended-fab-speed-dial.imports';\r\nimport { SaveCloseButtonComponent } from '../../../shared/modules/save-close-button/save-close-button';\r\nimport { GlobalConfigService } from '../../../shared/services/global-config.service';\r\nimport { computedWithPrev } from '../../../shared/signals/signal.utilities';\r\nimport { UserPreferences } from '../../../shared/user/user-preferences.service';\r\nimport { LoadIconsService } from '../../assets/icons/load-icons.service';\r\nimport { EntityFormBuilderComponent } from '../../entity-form/entity-form-builder/form-builder';\r\nimport { PickerTreeDataHelper } from '../../fields/picker/picker-tree/picker-tree-data-helper';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormLanguageService } from '../../form/form-language.service';\r\nimport { FormPublishingService } from '../../form/form-publishing.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { FormulaDesignerService } from '../../formulas/designer/formula-designer.service';\r\nimport { LanguageService } from '../../localization/language.service';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { AdamCacheService } from '../../shared/adam/adam-cache.service';\r\nimport { LinkCacheService } from '../../shared/adam/link-cache.service';\r\nimport { ContentTypeItemService } from '../../shared/content-types/content-type-item.service';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { InputTypeService } from '../../shared/input-types/input-type.service';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { SaveResult } from '../../state/save-result.model';\r\nimport { EditEntryComponent } from '../entry/edit-entry';\r\nimport { EditDialogFooterComponent } from '../footer/edit-dialog-footer';\r\nimport { footerPreferences } from '../footer/footer-preferences';\r\nimport { EditDialogHeaderComponent } from '../header/edit-dialog-header';\r\nimport { EditDialogSaveService } from './edit-dialog-save.service';\r\nimport { FormSlideDirective } from './form-slide.directive';\r\nimport { isCtrlEnter, isCtrlS, isEscape } from './keyboard-shortcuts';\r\nimport { SnackBarUnsavedChangesComponent } from './snack-bar-unsaved-changes/snack-bar-unsaved-changes';\r\nimport { UnsavedChangesSnackBarData } from './snack-bar-unsaved-changes/snack-bar-unsaved-changes.models';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: true,\r\n  saveAll: true,\r\n}\r\n\r\n/**\r\n * The edit-main component is the complete edit component containing:\r\n * - Header (which also contains the languages and publish state)\r\n * - Each entity form\r\n * - Footer\r\n */\r\n@Component({\r\n  selector: 'app-edit-dialog-main',\r\n  templateUrl: './edit-dialog-main.html',\r\n  styleUrls: ['./edit-dialog-main.scss'],\r\n  imports: [\r\n    MatDialogActions,\r\n    NgClass,\r\n    EditDialogHeaderComponent,\r\n    CdkScrollable,\r\n    FormSlideDirective,\r\n    EntityFormBuilderComponent,\r\n    MatRippleModule,\r\n    MatIconModule,\r\n    EditDialogFooterComponent,\r\n    TranslateModule,\r\n    ...ExtendedFabSpeedDialImports,\r\n    ToggleDebugDirective,\r\n    SaveCloseButtonComponent,\r\n  ],\r\n  providers: [\r\n    EditRoutingService,\r\n    FormsStateService,\r\n    // This is shared across all entities on this form\r\n    FormulaDesignerService,\r\n    // TODO: probably move to each picker component (Errors)\r\n    PickerTreeDataHelper,\r\n  ]\r\n})\r\nexport class EditDialogMainComponent extends BaseComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  log = classLog({ EditDialogMainComponent }, logSpecs);\r\n\r\n  @ViewChildren(EntityFormBuilderComponent) formBuilderRefs: QueryList<EntityFormBuilderComponent>;\r\n\r\n  #globalConfigService = inject(GlobalConfigService);\r\n  #formConfig = inject(FormConfigService);\r\n\r\n  canSave = this.#formConfig.config.save.mode; // if false, then no save button is shown\r\n\r\n  /** Signal to tell the UI if the footer should show and/or the footer needs more space (changes CSS) */\r\n  #prefManager = inject(UserPreferences).part(footerPreferences)\r\n  footerSize = computed(() => this.#prefManager.data().size);\r\n\r\n  #loadIconsService = transient(LoadIconsService);\r\n\r\n  protected viewInitiated = signal(false);\r\n\r\n  itemService = inject(ItemService);\r\n  contentTypeService = inject(ContentTypeService);\r\n  formsStateService = inject(FormsStateService);\r\n  publishStatusService = inject(FormPublishingService);\r\n  translate = inject(TranslateService);\r\n\r\n  /** Reference to the main dialog, for closing on esc. etc. */\r\n  dialog: MatDialogRef<EditEntryComponent> = inject(MatDialogRef<EditEntryComponent>);\r\n\r\n  saveSvc = transient(EditDialogSaveService);\r\n\r\n  constructor(\r\n    private contentTypeItemService: ContentTypeItemService,\r\n    private inputTypeService: InputTypeService,\r\n    private languageService: LanguageService,\r\n    private languageStore: FormLanguageService,\r\n    private snackBar: MatSnackBar,\r\n    private editRoutingService: EditRoutingService,\r\n    private adamCacheService: AdamCacheService,\r\n    private linkCacheService: LinkCacheService,\r\n    private formulaDesignerService: FormulaDesignerService,\r\n  ) {\r\n    super();\r\n    const l = this.log.fnIf('constructor');\r\n    this.dialog.disableClose = true;\r\n\r\n    // Initialize default user preferences for footer show/hide\r\n    const pref = this.#prefManager;\r\n    if (pref.data().pinned == null)\r\n      pref.set('pinned', this.#formConfig.config.dialogContext.User?.IsSystemAdmin ?? false);\r\n\r\n    // Watch for the \"try-save\" event from the forms\r\n    effect(() => {\r\n      const current = this.formsStateService.triggerTrySaveAndMaybeClose();\r\n      if (current.tryToSave)\r\n        untracked(() => this.saveAll(current.close));\r\n    });\r\n\r\n  }\r\n\r\n  protected items = this.itemService.getManySignal(this.#formConfig.config.itemGuids);\r\n\r\n  protected formsValid = this.formsStateService.formsValidTemp;\r\n  protected hideHeader = this.languageStore.getHideHeaderSignal(this.#formConfig.config.formId);\r\n\r\n\r\n  //#region Footer - Show once or more, hide again, and expand footer (extra large footer)\r\n\r\n  /** Signal to determine if we should show the footer. Will affect style.display of the footer tag */\r\n  protected footerShow = computed(() => {\r\n    // if debug is true, then it was set once using the keyboard shortcut\r\n    if (this.#globalConfigService.isDebug()) {\r\n      this.#debugWasModified = true;\r\n      return true;\r\n    }\r\n\r\n    // If debug is false, and was never modified, show based on system admin status\r\n    return !this.#debugWasModified && this.#prefManager.data().pinned;\r\n  });\r\n\r\n  /** Show footer once or more - basically stays true if it was ever shown */\r\n  protected footerShowOnceOrMore = computedWithPrev(prev => prev || this.footerShow(), false);\r\n\r\n  /** Special variable to check if debug was ever triggered, to allow super-users to re-hide the footer */\r\n  #debugWasModified = false;\r\n\r\n  //#endregion\r\n\r\n\r\n  /** delay showing the form, but not quite sure why. maybe to prevent flickering? */\r\n  protected delayForm = toSignal(\r\n    of(false).pipe(\r\n      delay(0),\r\n      startWith(true)\r\n    ));\r\n\r\n  ngOnInit() {\r\n    this.#watchKeyboardShortcuts();\r\n\r\n    this.editRoutingService.init();\r\n    this.#loadIconsService.load();\r\n    this.formulaDesignerService.cache.init();\r\n\r\n    this.#startSubscriptions();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => this.viewInitiated.set(true));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.languageStore.remove(this.#formConfig.config.formId);\r\n    this.publishStatusService.remove(this.#formConfig.config.formId);\r\n\r\n    if (this.#formConfig.config.isParentDialog) {\r\n      // clear the rest of the store\r\n      this.languageStore.clearCache();\r\n      this.languageService.clearCache();\r\n      this.itemService.clearCache();\r\n      this.inputTypeService.clearCache();\r\n      this.contentTypeItemService.clearCache();\r\n      this.contentTypeService.clearCache();\r\n      this.publishStatusService.clearCache();\r\n      this.adamCacheService.clearCache();\r\n      this.linkCacheService.clearCache();\r\n    }\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog(forceClose?: boolean, saveResult?: SaveResult): void {\r\n    if (forceClose)\r\n      return this.dialog.close(this.#formConfig.config.createMode ? saveResult : undefined);\r\n\r\n    if (!this.formsStateService.readOnly().isReadOnly && this.formsStateService.formsAreDirty())\r\n      return this.#snackBarYouHaveUnsavedChanges();\r\n\r\n    this.dialog.close(this.#formConfig.config.createMode ? saveResult : undefined);\r\n  }\r\n\r\n  /** Save all forms */\r\n  saveAll(close: boolean): void {\r\n    const l = this.log.fnIf('saveAll', { close });\r\n\r\n    this.saveSvc.saveAll(this, close);\r\n    \r\n    return l.end('saved default');\r\n  }\r\n\r\n\r\n  #startSubscriptions() {\r\n    this.subscriptions.add(\r\n      fromEvent<BeforeUnloadEvent>(window, 'beforeunload').subscribe(event => {\r\n        if (this.formsStateService.readOnly().isReadOnly || !this.formsStateService.formsAreDirty())\r\n          return;\r\n        event.preventDefault();\r\n        event.returnValue = ''; // fix for Chrome\r\n        this.#snackBarYouHaveUnsavedChanges();\r\n      })\r\n    );\r\n\r\n    this.subscriptions.add(\r\n      this.dialog.backdropClick().subscribe(_ => this.closeDialog())\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Watch for keyboard shortcuts like Ctrl+S, Esc, etc.\r\n   */\r\n  #watchKeyboardShortcuts(): void {\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isEscape(event))\r\n        return this.closeDialog();\r\n\r\n      const canSave = !this.formsStateService.readOnly().isReadOnly\r\n        && !this.saveSvc.entityFormStateService.isSaving();\r\n\r\n      if (isCtrlS(event) && canSave) {\r\n        event.preventDefault();\r\n        this.saveAll(event.altKey);\r\n      }\r\n\r\n      if (isCtrlEnter(event) && canSave) {\r\n        event.preventDefault();\r\n        this.saveAll(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Show snack bar warning about unsaved changes\r\n   * and save/cancel depending on user action\r\n   */\r\n  #snackBarYouHaveUnsavedChanges(): void {\r\n    const snackBarRef = this.snackBar.openFromComponent(SnackBarUnsavedChangesComponent, {\r\n      data: {\r\n        save: false,\r\n      } satisfies UnsavedChangesSnackBarData,\r\n      duration: 5000,\r\n    });\r\n\r\n    snackBarRef.onAction().subscribe(() => {\r\n      if ((snackBarRef.containerInstance.snackBarConfig.data as UnsavedChangesSnackBarData).save)\r\n        return this.saveAll(true);\r\n\r\n      this.closeDialog(true);\r\n    });\r\n  }\r\n}\r\n","<div style=\"position: relative\" mat-dialog__container appToggleDebug>\r\n  <div\r\n    mat-dialog-actions\r\n    class=\"form-header-container\"\r\n    [ngClass]=\"{ 'u-display-none': hideHeader() }\"\r\n  >\r\n    <app-edit-dialog-header\r\n      class=\"multi-item-edit-form-header\"\r\n      [disabled]=\"!formsValid()\"\r\n      (closeDialog)=\"closeDialog()\"\r\n    >\r\n    </app-edit-dialog-header>\r\n  </div>\r\n  <div style=\"position: relative\">\r\n    <!-- cdkScrollable is required when using matAutocomplete with scrollable element that is not body. Fixes matAutocomplete not following input  -->\r\n    <!-- TODO_(mdc-migration) -->\r\n    <div\r\n      mat-mdc-dialog-content\r\n      cdkScrollable\r\n      class=\"eav-dialog-content u-hide-scrollbar\"\r\n      [ngClass]=\"{\r\n        'debug-enabled': footerShow(),\r\n        'debug-info-is-open': footerShow() && footerSize(),\r\n        'footer-xl': footerShow() && (footerSize() == 2),\r\n        'hide-header-height-fix': hideHeader(),\r\n      }\"\r\n    >\r\n      <div class=\"eav-layout-grid\">\r\n        <div class=\"eav-layout-grid__inner\">\r\n          @if (!delayForm()) {\r\n            <div class=\"eav-layout-grid__cell--span-12\" appFormSlide>\r\n              @for (item of items(); track item.Entity.Guid; let i = $index) {\r\n                <div>\r\n                  <app-edit-entity-form-builder\r\n                    [entityGuid]=\"item.Entity.Guid\"\r\n                    [index]=\"i\"\r\n                  ></app-edit-entity-form-builder>\r\n                </div>\r\n              }\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n    @if (viewInitiated()) {\r\n      <extended-fab-speed-dial>\r\n        <ng-template extendedFabSpeedDialTriggerContent>\r\n          <app-save-close-button\r\n            [label]=\"canSave ? 'Form.Buttons.SaveAndClose' : 'Form.Buttons.Done'\"\r\n            [ngClass]=\"saveSvc.disabled() ? 'appear-disabled' : ''\"\r\n            (action)=\"saveAll(true)\"\r\n          ></app-save-close-button>\r\n        </ng-template>\r\n        @if (canSave) {\r\n          <ng-template extendedFabSpeedDialActionsContent>\r\n            <button\r\n              extended-fab-speed-dial-action\r\n              matRipple [ngClass]=\"saveSvc.disabled()\r\n                ? 'appear-disabled'\r\n                : ''\"\r\n              (click)=\"saveAll(false)\"\r\n            >\r\n              <span>\r\n                {{ 'Form.Buttons.Save' | translate }}\r\n              </span>\r\n              <mat-icon>save</mat-icon>\r\n            </button>\r\n          </ng-template>\r\n        }\r\n      </extended-fab-speed-dial>\r\n    }\r\n  </div>\r\n  @if (footerShowOnceOrMore()) {\r\n    @defer {\r\n      <app-edit-dialog-footer\r\n        [style.display]=\"footerShow()\r\n          ? 'block'\r\n          : 'none'\"\r\n        mat-dialog-actions\r\n      ></app-edit-dialog-footer>\r\n    }\r\n  }\r\n</div>\r\n","<router-outlet></router-outlet>\r\n\r\n@if (editInitializerService.loaded()) {\r\n  <app-edit-dialog-main></app-edit-dialog-main>\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from 'projects/core';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { Context } from '../../../shared/services/context';\r\nimport { EditInitializerService } from '../../form/edit-initializer.service';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { InitialValuesService } from '../../form/initial-values-service';\r\nimport { LoggingService } from '../../shared/services/logging.service';\r\nimport { ScriptsLoaderService } from '../../shared/services/scripts-loader.service';\r\nimport { EditDialogMainComponent } from '../main/edit-dialog-main';\r\n\r\n/**\r\n * This component is the entry point for every edit dialog.\r\n * It initializes the form data and the form itself.\r\n *\r\n * Each edit-entry can show multiple entities, as the form can contain multiple sections each having an entity.\r\n * But if a sub-dialog is opened, this will start anew, with it's own provided services etc.\r\n */\r\n@Component({\r\n  selector: 'app-edit-entry',\r\n  templateUrl: './edit-entry.html',\r\n  imports: [\r\n    RouterOutlet,\r\n    EditDialogMainComponent,\r\n  ],\r\n  providers: [\r\n    // must be by Providers\r\n    LoggingService,\r\n    // Shared Services across the edit form\r\n    FeaturesService, // for checking if features are enabled - this can change from dialog to dialog\r\n    Context, // Form context, such as what app etc. - the same for the entire form\r\n    FormConfigService, // form configuration valid for this entire form; will be initialized by the EditInitializerService\r\n    ScriptsLoaderService, // Loader for external scripts. Shared as it keeps track of what's been loaded. Maybe should be providedIn: 'root'?\r\n    InitialValuesService, // for preserving initial values for formulas.\r\n  ]\r\n})\r\nexport class EditEntryComponent implements OnInit {\r\n\r\n  log = classLog({ EditEntryComponent });\r\n\r\n  protected editInitializerService = transient(EditInitializerService);\r\n\r\n  constructor(temp: FeaturesService) {\r\n    this.log.aIf('constructor');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Load the data - when it's loaded, the HTML will show the rest\r\n    this.editInitializerService.fetchFormData();\r\n  }\r\n}\r\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof globalThis === \"object\" ? globalThis :\n            typeof global === \"object\" ? global :\n                typeof self === \"object\" ? self :\n                    typeof this === \"object\" ? this :\n                        sloppyModeThis();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect !== \"undefined\") {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter, root);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                if (previous)\n                    previous(key, value);\n            };\n        }\n        function functionThis() {\n            try {\n                return Function(\"return this;\")();\n            }\n            catch (_) { }\n        }\n        function indirectEvalThis() {\n            try {\n                return (void 0, eval)(\"(function() { return this; })()\");\n            }\n            catch (_) { }\n        }\n        function sloppyModeThis() {\n            return functionThis() || indirectEvalThis();\n        }\n    })(function (exporter, root) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var _Map = typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        var registrySymbol = supportsSymbol ? Symbol.for(\"@reflect-metadata:registry\") : undefined;\n        var metadataRegistry = GetOrCreateMetadataRegistry();\n        var metadataProvider = CreateMetadataProvider(metadataRegistry);\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var provider = GetMetadataProvider(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return provider.OrdinaryDeleteMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return ToBoolean(provider.OrdinaryHasOwnMetadata(MetadataKey, O, P));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return;\n            return provider.OrdinaryGetOwnMetadata(MetadataKey, O, P);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ true);\n            provider.OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var provider = GetMetadataProvider(O, P, /*create*/ false);\n            if (!provider) {\n                return [];\n            }\n            return provider.OrdinaryOwnMetadataKeys(O, P);\n        }\n        // 6 ECMAScript Data Types and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        function SameValueZero(x, y) {\n            return x === y || x !== x && y !== y;\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // Global metadata registry\n        // - Allows `import \"reflect-metadata\"` and `import \"reflect-metadata/no-conflict\"` to interoperate.\n        // - Uses isolated metadata if `Reflect` is frozen before the registry can be installed.\n        /**\n         * Creates a registry used to allow multiple `reflect-metadata` providers.\n         */\n        function CreateMetadataRegistry() {\n            var fallback;\n            if (!IsUndefined(registrySymbol) &&\n                typeof root.Reflect !== \"undefined\" &&\n                !(registrySymbol in root.Reflect) &&\n                typeof root.Reflect.defineMetadata === \"function\") {\n                // interoperate with older version of `reflect-metadata` that did not support a registry.\n                fallback = CreateFallbackProvider(root.Reflect);\n            }\n            var first;\n            var second;\n            var rest;\n            var targetProviderMap = new _WeakMap();\n            var registry = {\n                registerProvider: registerProvider,\n                getProvider: getProvider,\n                setProvider: setProvider,\n            };\n            return registry;\n            function registerProvider(provider) {\n                if (!Object.isExtensible(registry)) {\n                    throw new Error(\"Cannot add provider to a frozen registry.\");\n                }\n                switch (true) {\n                    case fallback === provider: break;\n                    case IsUndefined(first):\n                        first = provider;\n                        break;\n                    case first === provider: break;\n                    case IsUndefined(second):\n                        second = provider;\n                        break;\n                    case second === provider: break;\n                    default:\n                        if (rest === undefined)\n                            rest = new _Set();\n                        rest.add(provider);\n                        break;\n                }\n            }\n            function getProviderNoCache(O, P) {\n                if (!IsUndefined(first)) {\n                    if (first.isProviderFor(O, P))\n                        return first;\n                    if (!IsUndefined(second)) {\n                        if (second.isProviderFor(O, P))\n                            return first;\n                        if (!IsUndefined(rest)) {\n                            var iterator = GetIterator(rest);\n                            while (true) {\n                                var next = IteratorStep(iterator);\n                                if (!next) {\n                                    return undefined;\n                                }\n                                var provider = IteratorValue(next);\n                                if (provider.isProviderFor(O, P)) {\n                                    IteratorClose(iterator);\n                                    return provider;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!IsUndefined(fallback) && fallback.isProviderFor(O, P)) {\n                    return fallback;\n                }\n                return undefined;\n            }\n            function getProvider(O, P) {\n                var providerMap = targetProviderMap.get(O);\n                var provider;\n                if (!IsUndefined(providerMap)) {\n                    provider = providerMap.get(P);\n                }\n                if (!IsUndefined(provider)) {\n                    return provider;\n                }\n                provider = getProviderNoCache(O, P);\n                if (!IsUndefined(provider)) {\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return provider;\n            }\n            function hasProvider(provider) {\n                if (IsUndefined(provider))\n                    throw new TypeError();\n                return first === provider || second === provider || !IsUndefined(rest) && rest.has(provider);\n            }\n            function setProvider(O, P, provider) {\n                if (!hasProvider(provider)) {\n                    throw new Error(\"Metadata provider not registered.\");\n                }\n                var existingProvider = getProvider(O, P);\n                if (existingProvider !== provider) {\n                    if (!IsUndefined(existingProvider)) {\n                        return false;\n                    }\n                    var providerMap = targetProviderMap.get(O);\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return true;\n            }\n        }\n        /**\n         * Gets or creates the shared registry of metadata providers.\n         */\n        function GetOrCreateMetadataRegistry() {\n            var metadataRegistry;\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                metadataRegistry = root.Reflect[registrySymbol];\n            }\n            if (IsUndefined(metadataRegistry)) {\n                metadataRegistry = CreateMetadataRegistry();\n            }\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                Object.defineProperty(root.Reflect, registrySymbol, {\n                    enumerable: false,\n                    configurable: false,\n                    writable: false,\n                    value: metadataRegistry\n                });\n            }\n            return metadataRegistry;\n        }\n        function CreateMetadataProvider(registry) {\n            // [[Metadata]] internal slot\n            // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n            var metadata = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var targetMetadata = metadata.get(O);\n                    if (IsUndefined(targetMetadata))\n                        return false;\n                    return targetMetadata.has(P);\n                },\n                OrdinaryDefineOwnMetadata: OrdinaryDefineOwnMetadata,\n                OrdinaryHasOwnMetadata: OrdinaryHasOwnMetadata,\n                OrdinaryGetOwnMetadata: OrdinaryGetOwnMetadata,\n                OrdinaryOwnMetadataKeys: OrdinaryOwnMetadataKeys,\n                OrdinaryDeleteMetadata: OrdinaryDeleteMetadata,\n            };\n            metadataRegistry.registerProvider(provider);\n            return provider;\n            function GetOrCreateMetadataMap(O, P, Create) {\n                var targetMetadata = metadata.get(O);\n                var createdTargetMetadata = false;\n                if (IsUndefined(targetMetadata)) {\n                    if (!Create)\n                        return undefined;\n                    targetMetadata = new _Map();\n                    metadata.set(O, targetMetadata);\n                    createdTargetMetadata = true;\n                }\n                var metadataMap = targetMetadata.get(P);\n                if (IsUndefined(metadataMap)) {\n                    if (!Create)\n                        return undefined;\n                    metadataMap = new _Map();\n                    targetMetadata.set(P, metadataMap);\n                    if (!registry.setProvider(O, P, provider)) {\n                        targetMetadata.delete(P);\n                        if (createdTargetMetadata) {\n                            metadata.delete(O);\n                        }\n                        throw new Error(\"Wrong provider for target.\");\n                    }\n                }\n                return metadataMap;\n            }\n            // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n            function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                return ToBoolean(metadataMap.has(MetadataKey));\n            }\n            // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n            function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return undefined;\n                return metadataMap.get(MetadataKey);\n            }\n            // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n            function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n                metadataMap.set(MetadataKey, MetadataValue);\n            }\n            // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n            function OrdinaryOwnMetadataKeys(O, P) {\n                var keys = [];\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return keys;\n                var keysObj = metadataMap.keys();\n                var iterator = GetIterator(keysObj);\n                var k = 0;\n                while (true) {\n                    var next = IteratorStep(iterator);\n                    if (!next) {\n                        keys.length = k;\n                        return keys;\n                    }\n                    var nextValue = IteratorValue(next);\n                    try {\n                        keys[k] = nextValue;\n                    }\n                    catch (e) {\n                        try {\n                            IteratorClose(iterator);\n                        }\n                        finally {\n                            throw e;\n                        }\n                    }\n                    k++;\n                }\n            }\n            function OrdinaryDeleteMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                if (!metadataMap.delete(MetadataKey))\n                    return false;\n                if (metadataMap.size === 0) {\n                    var targetMetadata = metadata.get(O);\n                    if (!IsUndefined(targetMetadata)) {\n                        targetMetadata.delete(P);\n                        if (targetMetadata.size === 0) {\n                            metadata.delete(targetMetadata);\n                        }\n                    }\n                }\n                return true;\n            }\n        }\n        function CreateFallbackProvider(reflect) {\n            var defineMetadata = reflect.defineMetadata, hasOwnMetadata = reflect.hasOwnMetadata, getOwnMetadata = reflect.getOwnMetadata, getOwnMetadataKeys = reflect.getOwnMetadataKeys, deleteMetadata = reflect.deleteMetadata;\n            var metadataOwner = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var metadataPropertySet = metadataOwner.get(O);\n                    if (!IsUndefined(metadataPropertySet) && metadataPropertySet.has(P)) {\n                        return true;\n                    }\n                    if (getOwnMetadataKeys(O, P).length) {\n                        if (IsUndefined(metadataPropertySet)) {\n                            metadataPropertySet = new _Set();\n                            metadataOwner.set(O, metadataPropertySet);\n                        }\n                        metadataPropertySet.add(P);\n                        return true;\n                    }\n                    return false;\n                },\n                OrdinaryDefineOwnMetadata: defineMetadata,\n                OrdinaryHasOwnMetadata: hasOwnMetadata,\n                OrdinaryGetOwnMetadata: getOwnMetadata,\n                OrdinaryOwnMetadataKeys: getOwnMetadataKeys,\n                OrdinaryDeleteMetadata: deleteMetadata,\n            };\n            return provider;\n        }\n        /**\n         * Gets the metadata provider for an object. If the object has no metadata provider and this is for a create operation,\n         * then this module's metadata provider is assigned to the object.\n         */\n        function GetMetadataProvider(O, P, Create) {\n            var registeredProvider = metadataRegistry.getProvider(O, P);\n            if (!IsUndefined(registeredProvider)) {\n                return registeredProvider;\n            }\n            if (Create) {\n                if (metadataRegistry.setProvider(O, P, metadataProvider)) {\n                    return metadataProvider;\n                }\n                throw new Error(\"Illegal state.\");\n            }\n            return undefined;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            var Map = /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (SameValueZero(key, this._cacheKey)) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (!SameValueZero(this._cacheKey, key)) {\n                        this._cacheIndex = -1;\n                        for (var i = 0; i < this._keys.length; i++) {\n                            if (SameValueZero(this._keys[i], key)) {\n                                this._cacheIndex = i;\n                                break;\n                            }\n                        }\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            return Map;\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            var Set = /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.keys(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n            return Set;\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    var array = new Uint8Array(size);\n                    if (typeof crypto !== \"undefined\") {\n                        crypto.getRandomValues(array);\n                    }\n                    else if (typeof msCrypto !== \"undefined\") {\n                        msCrypto.getRandomValues(array);\n                    }\n                    else {\n                        FillRandomBytes(array, size);\n                    }\n                    return array;\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","import { Injectable } from '@angular/core';\r\nimport { Of } from '../../../../../../core';\r\nimport { AttributeInputType } from '../../../../../../edit-types/src/InputTypeName';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { InputTypeMetadata } from '../../../shared/fields/input-type-metadata.model';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavContentTypeAttribute } from '../models/eav';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\nimport { InputTypeSpecs } from './input-type-specs.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class InputTypeService extends SignalStoreBase<string, InputTypeMetadata> {\r\n\r\n  constructor() {\r\n    super(classLog({InputTypeService}, null));\r\n  }\r\n\r\n  override getId = (item: InputTypeMetadata) => item.Type;\r\n\r\n  /**\r\n   * Get Name specs with a nice name and a longer name\r\n   * Note: ATM only used in the external connector, not sure why it's even here.\r\n   */\r\n  getAttributeInputTypes(attributes: EavContentTypeAttribute[]): AttributeInputType[] {\r\n    const inputTypes = this.getAll();\r\n    return attributes.map(attribute => {\r\n      const specs = this.#getSpecsInternal(attribute.InputType, inputTypes);\r\n      return {\r\n        name: attribute.Name,\r\n        inputType: specs.inputType,\r\n      } satisfies AttributeInputType;\r\n    });\r\n  }\r\n\r\n  getSpecs(attribute: EavContentTypeAttribute): InputTypeSpecs {\r\n    return this.#getSpecsInternal(attribute.InputType, this.getAll());\r\n  }\r\n\r\n  #getSpecsInternal(inputType: Of<typeof InputTypeCatalog>, inputTypes: InputTypeMetadata[]): InputTypeSpecs {\r\n    const inputTypeMetadata = inputTypes.find(i => i.Type === inputType);\r\n    const name = inputType.toString();\r\n    const calculated: InputTypeSpecs = {\r\n      inputType,\r\n      isExternal: !!inputTypeMetadata?.UiAssets?.default,\r\n      mustUseGuid: !name.startsWith('string') && !name.startsWith('number'),\r\n      componentTagName: `field-${inputType}`,\r\n      componentTagDialogName: `field-${inputType}-dialog`,\r\n      metadata: inputTypeMetadata,\r\n      isNewPicker: InputTypeHelpers.isNewPicker(inputType),\r\n    };\r\n    return calculated;\r\n  }\r\n\r\n}\r\n","import { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { DataTypeCatalog } from \"../../../shared/fields/data-type-catalog\";\r\nimport { InputTypeCatalog } from \"../../../shared/fields/input-type-catalog\";\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { StateUiMapperBase } from '../../fields/picker/adapters/state-ui-mapper-base';\r\nimport { PickerItem } from '../../fields/picker/models/picker-item.model';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { EavContentType } from '../../shared/models/eav/eav-content-type';\r\nimport { FieldFormulasResultRaw, FieldValueOrResultRaw } from \"./formula-results.models\";\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  v1: false,\r\n  v2: false,\r\n  allValues: true,\r\n  oneValue: true,\r\n  fields: [...DebugFields],\r\n}\r\n\r\n/**\r\n * Contains methods for correcting formula results.\r\n */\r\nexport class FormulaValueCorrections {\r\n\r\n  log = classLog({FormulaValueCorrections}, logSpecs);\r\n\r\n  constructor(\r\n    private contentType: EavContentType,\r\n    // private contentTypeSvc: ContentTypeService,\r\n    private entityGuid: string,\r\n    private fieldName: string,\r\n    private isValue: boolean,\r\n    private inputType: InputTypeSpecs,\r\n    private isOpen: boolean,\r\n    private valueMapper?: StateUiMapperBase,\r\n  ) { }\r\n\r\n\r\n  v1(v1Result: FieldValueOrResultRaw): { ok: boolean, v1Result: FieldFormulasResultRaw } {\r\n    const isArray = v1Result && Array.isArray(v1Result) && v1Result.every(r => typeof r === 'string');\r\n    const resultIsPure = ['string', 'number', 'boolean'].includes(typeof v1Result) || v1Result instanceof Date || isArray || !v1Result;\r\n    if (!resultIsPure)\r\n      return { ok: false, v1Result: this.toFormulaResult(undefined) };\r\n\r\n    const v1Value = this.isValue\r\n      ? this.#oneValue(v1Result as FieldValue)\r\n      : v1Result as FieldValue;\r\n    return { ok: true, v1Result: this.toFormulaResult(v1Value) };\r\n  }\r\n\r\n  v2(result: FieldValueOrResultRaw): FieldFormulasResultRaw {\r\n    const raw = this.allValues(result);\r\n    return { ...raw, openInDesigner: this.isOpen };\r\n  }\r\n\r\n  /**\r\n   * This method is used to support duck typing in the formula result and from it to fill FormulaResultRaw object with corrected values.\r\n   * @param target Formula target\r\n   * @param result Formula result\r\n   * @param inputType InputType is needed to check if the result is a date which needs to be corrected\r\n   * @returns Strongly typed FormulaResultRaw object\r\n   */\r\n  allValues(result: FieldValueOrResultRaw): FieldFormulasResultRaw {\r\n    const l = this.log.fnIfInFields('allValues', this.fieldName, { result });\r\n\r\n    // if (l.enabled)\r\n    //   debugger;\r\n\r\n    // 2024-09-10 21:15 2dm changed this, as I believe all cases have a clear stop-value\r\n    // const stop = (result as FormulaResultRaw)?.stop ?? null;\r\n    const defaults: Partial<FieldFormulasResultRaw> = { value: undefined, fields: [], stop: null, sleep: null };\r\n    if (result == null)\r\n      return l.r({ ...defaults, value: result as FieldValue}, 'null/empty');\r\n    \r\n    const targetIsValue = this.isValue;\r\n\r\n    // Show warning if array - new v18 newPicker\r\n    if (Array.isArray(result)) {\r\n      console.warn('Formula result was an array - this is not allowed. Please return an object containing the array instead: { value: [...] }.', result);\r\n      return l.r(defaults, 'array');\r\n    }\r\n\r\n    // Handle object results - the larger / more complex case\r\n    if (typeof result === 'object') {\r\n      if (result instanceof Date && targetIsValue)\r\n        return l.r({ ...defaults, value: this.#oneValue(result) }, 'date');\r\n\r\n      if (result instanceof Promise)\r\n        return l.r({\r\n          ...defaults,\r\n          value: undefined,\r\n          promise: result as Promise<FieldFormulasResultRaw>,\r\n        }, 'promise');\r\n\r\n      const raw: FieldFormulasResultRaw = result as FieldFormulasResultRaw;\r\n\r\n      // fix stop so it's never undefined\r\n      raw.stop ??= null;\r\n      raw.sleep ??= null;\r\n\r\n      // Fix single value - but only if it's not an array, in which case we must leave as is\r\n      if (raw.value && targetIsValue)\r\n        raw.value = Array.isArray(raw.value)\r\n          ? this.valueMapper?.toState(raw.value) ?? raw.value\r\n          : this.#oneValue(raw.value);\r\n\r\n      // fix fields\r\n      if (raw.fields)\r\n        raw.fields = raw.fields?.map(f => {\r\n          f.value = this.#oneValue(f.value, f.name);\r\n          return f;\r\n        });\r\n\r\n      // test options\r\n      if (raw.options) {\r\n        if (!Array.isArray(raw.options)) {\r\n          console.error('options is not an array', raw.options);\r\n          raw.options = [];\r\n        } else if (raw.options.length > 0) {\r\n          if (raw.options.find(o => !o || o.value == null)) {\r\n            console.error('some options are missing value', raw.options);\r\n            raw.options = [];\r\n          }\r\n          if (hasDuplicateValues(raw.options)) {\r\n            console.error('duplicate values in options', raw.options);\r\n            raw.options = [];\r\n          }\r\n        }\r\n      }\r\n      return l.r(raw, 'object');\r\n    }\r\n\r\n    // Non-Object results\r\n    const value: FieldFormulasResultRaw = { value: result as FieldValue };\r\n\r\n    // Handle value only result\r\n    // atm we are only correcting Value formulas\r\n    if (targetIsValue)\r\n      return l.r({ ...defaults, value: this.#oneValue(value.value) }, 'non-object, value');\r\n    return l.r(value, 'non-object, non-value');\r\n  }\r\n\r\n  /**\r\n   * Used to correct datetime field value from formula result.\r\n   * @param value Field value from formula result\r\n   * @param inputType InputType is needed to check if the result is a date which needs to be corrected\r\n   * @returns Corrected field value\r\n   */\r\n  #oneValue(value: FieldValue | Date, otherFieldName: string = null): FieldValue {\r\n    const l = this.log.fnIf('oneValue', { fieldName: this.fieldName, otherFieldName, value, type: typeof value });\r\n    if (value == null)\r\n      return l.r(value as FieldValue, 'null');\r\n\r\n    let inputType = this.inputType.inputType;\r\n\r\n    // If doing this for another field, we must lookup the definition of the other field and handle it's expected input type\r\n    if (otherFieldName) {\r\n      const otherAttribute = this.contentType.Attributes.find(a => a.Name === otherFieldName);\r\n      \r\n      if (!otherAttribute?.InputType)\r\n        return l.r(value as FieldValue, `other field ${otherFieldName}; value not changed as target field not found`);\r\n            \r\n      inputType = otherAttribute.InputType;\r\n      l.a(`other field ${otherFieldName} found, inputType: ${inputType}`);\r\n    }\r\n\r\n\r\n    if (inputType === InputTypeCatalog.DateTimeDefault || value instanceof Date) {\r\n      const date = new Date(value as string | number | Date);\r\n\r\n      // if value is not ISO string, nor milliseconds, correct timezone\r\n      if (!(typeof value === 'string' && value.endsWith('Z')) && date.getTime() !== value)\r\n        date.setTime(date.getTime() - date.getTimezoneOffset() * 60000);\r\n\r\n      date.setMilliseconds(0);\r\n      return l.r(date.toJSON(), 'date');\r\n    }\r\n    \r\n    if (typeof (value) !== 'string' && (inputType?.startsWith(DataTypeCatalog.String.toLocaleLowerCase())\r\n      || inputType?.startsWith(DataTypeCatalog.Hyperlink.toLocaleLowerCase()))) {\r\n      return l.r(value.toString(), 'not string, but input is string or hyperlink');\r\n    }\r\n    return l.r(value, 'unchanged');\r\n  }\r\n\r\n\r\n  toFormulaResult(value: FieldValue): FieldFormulasResultRaw {\r\n    return {\r\n      value,\r\n      fields: [],\r\n      stop: null,\r\n      sleep: null,\r\n      openInDesigner: this.isOpen\r\n    };\r\n  }\r\n}\r\n\r\nfunction hasDuplicateValues(options: PickerItem[]) {\r\n  var ids = options.map(o => o.value);\r\n  var uniqueIds = new Set(ids);\r\n  if (ids.length !== uniqueIds.size) {\r\n    console.error('Duplicate values in options', options, ids, uniqueIds);\r\n    return true;\r\n  }\r\n  return false;\r\n}","import { Of } from '../../../../../../core';\r\nimport { FormulaFunction, FormulaVersions, runFormulaPrefix } from '../formula-definitions';\r\n\r\n/**\r\n * Contains methods for building formulas.\r\n */\r\n\r\nexport class FormulaSourceCodeHelper {\r\n  /**\r\n   * Used to clean formula text.\r\n   * @param formula Formula text to clean\r\n   * @returns Cleaned formula text\r\n   */\r\n  static #cleanFormula(formula: string): string {\r\n    if (!formula)\r\n      return formula;\r\n\r\n    // Clean and remove any leading single-line comments\r\n    let cleanFormula = formula.trim();\r\n    if (cleanFormula.startsWith('//'))\r\n      cleanFormula = cleanFormula.replace(/^\\/\\/.*\\n/gm, '').trim();\r\n\r\n    /*\r\n      Valid function string:\r\n      function NAME (...ARGS) { BODY }\r\n \r\n      Must build function string for these inputs:\r\n      v1 (...ARGS) { BODY }\r\n      function v1 (...ARGS) { BODY }\r\n      v2((...ARGS) => { BODY });\r\n \r\n      Everything else is ignored.\r\n      TODO: do this properly with regex if it's not too slow\r\n    */\r\n    if (cleanFormula.startsWith(FormulaVersions.V1))\r\n      return `${runFormulaPrefix}${cleanFormula}`;\r\n\r\n    if (cleanFormula.startsWith(`${runFormulaPrefix}${FormulaVersions.V1}`))\r\n      return cleanFormula;\r\n\r\n    if (cleanFormula.startsWith('v2(')) {\r\n      cleanFormula = cleanFormula.substring(3, cleanFormula.lastIndexOf('}') + 1);\r\n      cleanFormula = cleanFormula.replace('=>', '');\r\n      return `${runFormulaPrefix}v2 ${cleanFormula}`;\r\n    }\r\n\r\n    return cleanFormula;\r\n  }\r\n\r\n  /**\r\n   * Used to find formula version.\r\n   * @param formula Formula text\r\n   * @returns If formula is V1 or V2\r\n   */\r\n  static findFormulaVersion(formula: string): Of<typeof FormulaVersions> {\r\n    const cleanFormula = this.#cleanFormula(formula);\r\n    const versionPart = cleanFormula.substring(runFormulaPrefix.length, cleanFormula.indexOf('(')).trim();\r\n    const validVersions = Object.values(FormulaVersions);\r\n\r\n    return (validVersions).includes(versionPart as Of<typeof FormulaVersions>)\r\n      ? versionPart as Of<typeof FormulaVersions>\r\n      : undefined;\r\n  }\r\n\r\n  /**\r\n   * Used to build executable formula function from formula text.\r\n   * @param formula Formula text\r\n   * @returns Executable formula function\r\n   */\r\n  static buildFormulaFunction(formula: string): FormulaFunction {\r\n    const cleanFormula = this.#cleanFormula(formula);\r\n    const fn: FormulaFunction = new Function(`return ${cleanFormula}`)();\r\n    return fn;\r\n  }\r\n}\r\n","import { Sxc } from '@2sic.com/2sxc-typings';\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, combineLatest, filter, from, map, switchMap } from 'rxjs';\r\nimport { Of } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DialogContextUser } from '../../../shared/models/dialog-context.models';\r\nimport { ServiceBase } from '../../../shared/services/service-base';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { ContentTypeItemService } from '../../shared/content-types/content-type-item.service';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { ContentTypeSettingsHelpers, EntityReader } from '../../shared/helpers';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { InputTypeService } from '../../shared/input-types/input-type.service';\r\nimport { EavItem } from '../../shared/models/eav/eav-item';\r\nimport { LoggingService, LogSeverities } from '../../shared/services/logging.service';\r\nimport { FieldsSettingsHelpers } from '../../state/field-settings.helper';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { FormulaFunction } from '../formula-definitions';\r\nimport { FormulaPromise } from '../promise/formula-promise-result.model';\r\nimport { FieldValueOrResultRaw, FormulaIdentifier } from '../results/formula-results.models';\r\nimport { FormulaV1CtxApp, FormulaV1CtxTargetEntity, FormulaV1CtxUser } from '../run/formula-run-context.model';\r\nimport { FormulaDefaultTargets, FormulaSpecialPickerTargets, FormulaTargets, SettingsFormulaPrefix } from '../targets/formula-targets';\r\nimport { FormulaCacheItem, FormulaCacheItemConstants } from './formula-cache.model';\r\nimport { FormulaCacheService } from './formula-cache.service';\r\nimport { FormulaSourceCodeHelper } from './source-code-helper';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  buildFormulaCache: false,\r\n  updateFormulaFromEditor: false,\r\n  createPromisedParts: false,\r\n  getSharedParts: false,\r\n};\r\n\r\n/**\r\n * Service just to cache formulas for execution and use in the designer.\r\n */\r\n@Injectable()\r\nexport class FormulaCacheBuilder extends ServiceBase {\r\n  log = classLog({FormulaCacheBuilder}, logSpecs);\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private contentTypeService: ContentTypeService,\r\n    private contentTypeItemService: ContentTypeItemService,\r\n    private loggingService: LoggingService,\r\n    private translate: TranslateService,\r\n    private inputTypes: InputTypeService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Used for building the initial formula cache.\r\n   * @returns\r\n   */\r\n  public buildFormulaCache(cacheSvc: FormulaCacheService): FormulaCacheItem[] {\r\n    const l = this.log.fnIf('buildFormulaCache');\r\n    const formulaCache: FormulaCacheItem[] = [];\r\n    const language = this.formConfig.language();\r\n    const reader = new EntityReader(language);\r\n\r\n    const fss = new FieldsSettingsHelpers(this.log.name);\r\n\r\n    for (const entityGuid of this.formConfig.config.itemGuids) {\r\n      const item = this.itemService.get(entityGuid);\r\n\r\n      const shared = this.#getSharedParts(entityGuid, item);\r\n\r\n      const contentType = this.contentTypeService.getContentTypeOfItem(item);\r\n      for (const attribute of contentType.Attributes) {\r\n        // Get field settings\r\n        const settings = fss.getDefaultSettings(reader.flatten<FieldSettings>(attribute.Metadata));\r\n\r\n        // get input type specs\r\n        const inputType = this.inputTypes.getSpecs(attribute);\r\n\r\n        // Get all formulas for the field\r\n        const formulaEntities = this.contentTypeItemService\r\n          .getMany(settings.Formulas)\r\n          .filter(f => reader.getBestValue<boolean>(f.Attributes.Enabled));\r\n\r\n        for (const fEntity of formulaEntities) {\r\n          const sourceCode = reader.getBestValue<string>(fEntity.Attributes.Formula);\r\n          if (!sourceCode) \r\n            continue;\r\n\r\n          const target: Of<typeof FormulaTargets> = reader.getBestValue<string>(fEntity.Attributes.Target);\r\n\r\n          // create cleaned formula function, or if this fails, add info to log & results\r\n          let formulaFunction: FormulaFunction;\r\n          try {\r\n            formulaFunction = FormulaSourceCodeHelper.buildFormulaFunction(sourceCode);\r\n          } catch (error) {\r\n            cacheSvc.cacheResults({ entityGuid, fieldName: attribute.Name, target } satisfies FormulaIdentifier, undefined, true, false);\r\n            const itemTitle = ContentTypeSettingsHelpers.getTitle(contentType, language);\r\n            this.loggingService.addLog(LogSeverities.Error, `Error building formula for Entity: \"${itemTitle}\", Field: \"${attribute.Name}\", Target: \"${target}\"`, error);\r\n            this.loggingService.showMessage(this.translate.instant('Errors.FormulaConfiguration'), 2000);\r\n          }\r\n\r\n          const formulaCacheItem: FormulaCacheItem = {\r\n            cache: {},\r\n            entityGuid,\r\n            fieldName: attribute.Name,\r\n            fn: formulaFunction?.bind({}),\r\n            isDraft: formulaFunction == null,\r\n            sourceCode,\r\n            sourceCodeSaved: sourceCode,\r\n            sourceCodeGuid: fEntity.Guid,\r\n            sourceCodeId: fEntity.Id,\r\n            target,\r\n            ...this.#inputTypeSpecsForCacheItem(target, inputType),\r\n            version: FormulaSourceCodeHelper.findFormulaVersion(sourceCode),\r\n            ...shared,\r\n            stop: false,\r\n            sleep: false,\r\n            fieldIsSpecialPicker: FormulaSpecialPickerTargets.includes(target),\r\n            ...this.#createPromisedParts(),\r\n            ...this.#targetInfoForCacheItem(target),\r\n          };\r\n\r\n          formulaCache.push(formulaCacheItem);\r\n        }\r\n      }\r\n    }\r\n\r\n    return l.r(formulaCache);\r\n  }\r\n\r\n\r\n  #inputTypeSpecsForCacheItem(target: Of<typeof FormulaTargets>, inputType: InputTypeSpecs): Pick<FormulaCacheItem, 'inputType' | 'isNewPicker' | 'disabled' | 'disabledReason'> {\r\n\r\n    // Disable picker checks WIP\r\n    /* if (!inputType.isNewPicker) */\r\n    return { inputType: inputType, isNewPicker: inputType.isNewPicker, disabled: false, disabledReason: '' };\r\n    // return [FormulaDefaultTargets.Value /*, FormulaNewPickerTargets.Options */].includes(target)\r\n    //   ? { isNewPicker: true, disabled: true, disabledReason: 'New picker is not supported in formulas yet' }\r\n    //   : { isNewPicker: true, disabled: false, disabledReason: '' };\r\n  }\r\n\r\n  #targetInfoForCacheItem(target: Of<typeof FormulaTargets>): Pick<FormulaCacheItem, 'isSetting' | 'settingName' | 'isValue' | 'isValidation'> {\r\n    return target.startsWith(SettingsFormulaPrefix)\r\n      ? { isSetting: true, settingName: target.substring(SettingsFormulaPrefix.length), isValue: false, isValidation: false }\r\n      : { isSetting: false, settingName: '', isValue: target === FormulaDefaultTargets.Value, isValidation: target === FormulaDefaultTargets.Validation };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Used for building shared parts of formula cache item.\r\n   * @param item\r\n   * @param entityGuid\r\n   * @returns\r\n   */\r\n  #getSharedParts(entityGuid: string, item: EavItem = null): FormulaCacheItemConstants {\r\n    this.log.fnIf('getSharedParts', { item, entityGuid });\r\n\r\n    if (this.#sharedPartsCache[entityGuid])\r\n      return this.#sharedPartsCache[entityGuid];\r\n\r\n    item = item ?? this.itemService.get(entityGuid);\r\n    const entity = item.Entity;\r\n    const mdFor = entity.For;\r\n    const targetEntity: FormulaV1CtxTargetEntity = {\r\n      guid: entity.Guid,\r\n      id: entity.Id,\r\n      type: {\r\n        guid: entity.Type.Id,\r\n        name: entity.Type.Name,\r\n      },\r\n      // New v15.04\r\n      for: {\r\n        targetType: mdFor?.TargetType ?? 0,\r\n        guid: mdFor?.Guid,\r\n        number: mdFor?.Number,\r\n        string: mdFor?.String,\r\n      },\r\n      // new v20\r\n      isNew: entity.Id === 0,\r\n      isCopy: this.formConfig.config.isCopy,\r\n    };\r\n    const formConfig = this.formConfig.config;\r\n    const user = formConfig.dialogContext.User ?? {} as Partial<DialogContextUser>;\r\n    const shared = {\r\n      targetEntity,\r\n      user: {\r\n        email: user.Email,\r\n        guid: user.Guid,\r\n        id: user.Id,\r\n        isAnonymous: user.IsAnonymous,\r\n        isSiteAdmin: user.IsSiteAdmin,\r\n        isContentEditor: user.isContentEditor,\r\n        isContentAdmin: user.IsContentAdmin,\r\n        isSystemAdmin: user.IsSystemAdmin,\r\n        name: user.Name,\r\n        username: user.Username,\r\n        roles: user.roles,\r\n      } satisfies FormulaV1CtxUser,\r\n      app: {\r\n        appId: formConfig.appId,\r\n        zoneId: formConfig.zoneId,\r\n        isGlobal: formConfig.dialogContext.App.IsGlobalApp,\r\n        isSite: formConfig.dialogContext.App.IsSiteApp,\r\n        isContent: formConfig.dialogContext.App.IsContentApp,\r\n        getSetting: (key: string) => undefined,\r\n      } satisfies FormulaV1CtxApp,\r\n      sxc: window.$2sxc({\r\n        zoneId: formConfig.zoneId,\r\n        appId: formConfig.appId,\r\n        pageId: formConfig.tabId,\r\n        moduleId: formConfig.moduleId,\r\n        _noContextInHttpHeaders: true,  // disable pageid etc. headers in http headers, because it would make debugging very hard\r\n        _autoAppIdsInUrl: true,         // auto-add appid and zoneid to url so formula developer can see what's happening\r\n      } as any) satisfies Sxc,\r\n    } satisfies FormulaCacheItemConstants;\r\n    this.#sharedPartsCache[entityGuid] = shared;\r\n    return shared;\r\n  }\r\n  #sharedPartsCache: Record<string, FormulaCacheItemConstants> = {};\r\n\r\n\r\n  /**\r\n   * Used for pacing promises$ and callback$ triggers. Callback$ triggers for the first time when the last promise is resolved.\r\n   * @returns\r\n   */\r\n  #createPromisedParts() {\r\n    this.log.fnIf('createPromisedParts');\r\n    const promises$ = new BehaviorSubject<FormulaPromise>(null);\r\n    const updateCallback$ = new BehaviorSubject<(result: FieldValueOrResultRaw) => void>(null);\r\n    const promiseSpecs = promises$.pipe(\r\n      filter(x => !!x),\r\n      switchMap(set => from(set.promise).pipe(map(result => ({ set, result })))),\r\n    );\r\n    // This combineLatest triggers the callback for the first time when the last promise is resolved\r\n    this.subscriptions.add(combineLatest([promiseSpecs, updateCallback$.pipe(filter(x => !!x))])\r\n      .subscribe(\r\n        ([promise, callback]) => {\r\n          promise.set.completed = true;\r\n          promise.set.sleep = false;\r\n          return callback(promise.result);\r\n        },\r\n      ));\r\n\r\n    return { promises$, updateCallback$ };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Used for updating formula from editor.\r\n   * @param entityGuid\r\n   * @param fieldName\r\n   * @param target\r\n   * @param sourceCode\r\n   * @param run\r\n   */\r\n  public updateFormulaFromEditor(cacheSvc: FormulaCacheService, id: FormulaIdentifier, sourceCode: string, run: boolean) {\r\n    this.log.fnIf('updateFormulaFromEditor', { id, sourceCode, run });\r\n    // important: the designer contains too much info, so we need to extract the essentials\r\n    // to not have it in the cache - which would trigger loads of changes to that signal later on.\r\n    let formulaFunction: FormulaFunction;\r\n\r\n    // If we should also run it, push it to the formulas cache so it will be executed\r\n    if (run)\r\n      try {\r\n        formulaFunction = FormulaSourceCodeHelper.buildFormulaFunction(sourceCode);\r\n      } catch (error) {\r\n        cacheSvc.cacheResults(id, /* value: */ undefined, /* isError: */ true, /* isPromise */ false);\r\n        const item = this.itemService.get(id.entityGuid);\r\n        const contentType = this.contentTypeService.getContentTypeOfItem(item);\r\n        const language = this.formConfig.language();\r\n        const itemTitle = ContentTypeSettingsHelpers.getTitle(contentType, language);\r\n        const errorLabel = `Error building formula for Entity: \"${itemTitle}\", Field: \"${id.fieldName}\", Target: \"${id.target}\"`;\r\n        this.loggingService.addLog(LogSeverities.Error, errorLabel, error);\r\n\r\n        console.error(errorLabel, error);\r\n      }\r\n\r\n    // find input type\r\n    const item = this.itemService.get(id.entityGuid);\r\n    const attribute = this.contentTypeService.getAttributeOfItem(item, id.fieldName);\r\n    const inputType = this.inputTypes.getSpecs(attribute);\r\n\r\n    // Find original in case we had it already (as we would then update it)\r\n    const { list, index, value } = cacheSvc.formulaListIndexAndOriginal(id);\r\n    const formula = value ?? {} as FormulaCacheItem;\r\n\r\n    // Get shared calculated properties, which we need in case the old-formula doesn't have them yet\r\n    const shared = this.#getSharedParts(id.entityGuid);\r\n\r\n    const streams = (formula.promises$ && formula.updateCallback$)\r\n      ? { promises$: value.promises$, updateCallback$: value.updateCallback$ }\r\n      : this.#createPromisedParts();\r\n\r\n    const newFormulaItem: FormulaCacheItem = {\r\n      ...id,\r\n      cache: formula.cache ?? {},\r\n      fn: formulaFunction?.bind({}),\r\n      isDraft: run ? formulaFunction == null : true,\r\n      sourceCode,\r\n      sourceCodeSaved: formula.sourceCodeSaved,\r\n      sourceCodeGuid: formula.sourceCodeGuid,\r\n      sourceCodeId: formula.sourceCodeId,\r\n      version: FormulaSourceCodeHelper.findFormulaVersion(sourceCode),\r\n      ...this.#inputTypeSpecsForCacheItem(id.target, inputType),\r\n      ...shared,\r\n      stop: false,\r\n      sleep: false,\r\n      fieldIsSpecialPicker: FormulaSpecialPickerTargets.includes(id.target),\r\n      ...streams,\r\n      ...this.#targetInfoForCacheItem(id.target),\r\n    };\r\n\r\n    const newCache = index >= 0\r\n      ? [...list.slice(0, index), newFormulaItem, ...list.slice(index + 1)]\r\n      : [newFormulaItem, ...list];\r\n    return newCache;\r\n  }\r\n\r\n}","import { Injectable, untracked } from '@angular/core';\r\nimport { Of, transient } from '../../../../../../core';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { FormulaIdentifier } from '../results/formula-results.models';\r\nimport { FormulaDefaultTargetValues, FormulaNewPickerTargetValues, FormulaOptionalTargetValues, FormulaTargets } from '../targets/formula-targets';\r\nimport { FormulaCacheBuilder } from './formula-cache.builder';\r\nimport { FormulaCacheItem, FormulaResultCacheItem } from './formula-cache.model';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  getActive: true,\r\n  fields: [...DebugFields],\r\n};\r\n\r\n/**\r\n * Service just to cache formulas for execution and use in the designer.\r\n */\r\n@Injectable()\r\nexport class FormulaCacheService {\r\n\r\n  log = classLog({FormulaCacheService}, logSpecs);\r\n\r\n  #cacheBuilder = transient(FormulaCacheBuilder);\r\n\r\n  constructor() { }\r\n\r\n  /** All the formulas with various additional info to enable execution and editing */\r\n  public formulas = signalObj<FormulaCacheItem[]>('formulas', []);\r\n\r\n  /** All the formula results */\r\n  #results = signalObj<FormulaResultCacheItem[]>('formula-results', []);\r\n\r\n  init() {\r\n    const formulaCache = this.#cacheBuilder.buildFormulaCache(this);\r\n    this.formulas.set(formulaCache);\r\n  }\r\n\r\n  //#region Formulas Get / Find\r\n\r\n  /**\r\n   * Used for returning formulas filtered by optional entity, field or target.\r\n   * @param entityGuid Optional entity guid\r\n   * @param fieldName Optional field\r\n   * @param target Optional target\r\n   * @param allowDraft\r\n   * @returns Filtered formula array\r\n   */\r\n  #findFormulas(entityGuid?: string, fieldName?: string, target?: Of<typeof FormulaTargets>[], allowDraft?: boolean): FormulaCacheItem[] {\r\n    return this.formulas().filter(f =>\r\n        (entityGuid ? f.entityGuid === entityGuid : true)\r\n        && (fieldName ? f.fieldName === fieldName : true)\r\n        && (target ? target?.find(target => f.target == target) : true)\r\n        && (allowDraft ? true : !f.isDraft)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Find formulas of the current field which are still running.\r\n   * Uses the designerService as that can modify the behavior while developing a formula.\r\n   */\r\n  public getActive(entityGuid: string, name: string, forNewPicker: boolean): FormulaCacheItem[] {\r\n    const l = this.log.fnIfInFields('getActive', name, () => ({ name, forNewPicker, formulas: this.formulas() }));\r\n    const targets = FormulaDefaultTargetValues\r\n      .concat(forNewPicker ? FormulaNewPickerTargetValues : FormulaOptionalTargetValues);\r\n    \r\n    const all = this.#findFormulas(entityGuid, name, targets, /* allowDraft: */ false);\r\n\r\n    const unstopped = all.filter(f => !f.stop);\r\n\r\n    return l.r(unstopped, `all: ${all.length}, unstopped: ${unstopped.length}`);\r\n  }\r\n\r\n\r\n\r\n  public formulaListIndexAndOriginal(fOrDs: FormulaIdentifier) {\r\n    const list = this.formulas();\r\n    const index = list.findIndex(f => f.entityGuid === fOrDs.entityGuid && f.fieldName === fOrDs.fieldName && f.target === fOrDs.target);\r\n    const value = list[index];\r\n    return { list, index, value };\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Formulas CRUD\r\n\r\n  /**\r\n   * Used for saving updated formula from editor.\r\n   */\r\n  public updateSaved(formulaItem: FormulaCacheItem, sourceGuid: string, sourceId: number): void {\r\n    const { list, index, value } = this.formulaListIndexAndOriginal(formulaItem);\r\n    if (value == null)\r\n      return;\r\n\r\n    const updated: FormulaCacheItem = {\r\n      ...value,\r\n      sourceCodeSaved: formulaItem.sourceCode,\r\n      sourceCodeGuid: sourceGuid,\r\n      sourceCodeId: sourceId,\r\n    };\r\n\r\n    const newCache = [...list.slice(0, index), updated, ...list.slice(index + 1)];\r\n    this.formulas.set(newCache);\r\n  }\r\n\r\n  /**\r\n   * Used for updating formula from editor.\r\n   */\r\n  public updateFormulaFromEditor(id: FormulaIdentifier, formula: string, run: boolean): void {\r\n    const newCache = this.#cacheBuilder.updateFormulaFromEditor(this, id, formula, run);\r\n    this.formulas.set(newCache);\r\n  }\r\n\r\n  /**\r\n   * Used for deleting formula.\r\n   */\r\n  public delete(id: FormulaIdentifier): void {\r\n    const { list, index } = this.formulaListIndexAndOriginal(id);\r\n    if (index < 0) return;\r\n    const newCache = [...list.slice(0, index), ...list.slice(index + 1)];\r\n    this.formulas.set(newCache);\r\n  }\r\n\r\n  /**\r\n   * Used for resetting formula.\r\n   */\r\n  public resetFormula(id: FormulaIdentifier): void {\r\n    this.#deleteResult(id);\r\n\r\n    // If we reset to saved code, then do that, otherwise delete/flush\r\n    const sourceCodeSaved = this.formulaListIndexAndOriginal(id).value?.sourceCodeSaved;\r\n    if (sourceCodeSaved != null)\r\n      this.updateFormulaFromEditor(id, sourceCodeSaved, true);\r\n    else \r\n      this.delete(id);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Get Results & Delete\r\n\r\n  /**\r\n   * Cache the results of a formula - mainly for showing formula result in editor.\r\n   * @param entityGuid\r\n   * @param fieldName\r\n   * @param target\r\n   * @param value\r\n   * @param isError\r\n   * @param isOnlyPromise\r\n   */\r\n  public cacheResults(formulaItem: FormulaIdentifier, value: FieldValue, isError: boolean, isOnlyPromise: boolean): void {\r\n    const newResult: FormulaResultCacheItem = {\r\n      entityGuid: formulaItem.entityGuid,\r\n      fieldName: formulaItem.fieldName,\r\n      target: formulaItem.target,\r\n      value,\r\n      isError,\r\n      isOnlyPromise,\r\n    };\r\n    const l = this.log.fn('cacheResults', { newResult });\r\n\r\n    // We should not track reading the list during formula execution\r\n    // since we don't depend on it!\r\n    untracked(() => {\r\n      const { list, index } = this.resultListIndexAndOriginal(formulaItem);\r\n      const newResults = index >= 0\r\n        ? [...list.slice(0, index), newResult, ...list.slice(index + 1)]\r\n        : [newResult, ...list];\r\n\r\n      // side effect within props calculations\r\n        l.a('set results', { list, index, newResults});\r\n        this.#results.set(newResults);\r\n    });\r\n    l.end('ok');\r\n  }\r\n\r\n  public resultListIndexAndOriginal(id: FormulaIdentifier) {\r\n    const list = this.#results();\r\n    const index = list.findIndex(r => r.entityGuid === id.entityGuid && r.fieldName === id.fieldName && r.target === id.target);\r\n    const value = list[index];\r\n    return { list, index, value };\r\n  }\r\n\r\n  /**\r\n   * Delete Results from cache.\r\n   */\r\n  #deleteResult(id: FormulaIdentifier): void {\r\n    const { list, index } = this.resultListIndexAndOriginal(id);\r\n    if (index < 0) return;\r\n    const newResults = [...list.slice(0, index), ...list.slice(index + 1)];\r\n    this.#results.set(newResults);\r\n  }  \r\n\r\n  //#endregion\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Of } from '../../../../../../core';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { TargetOption } from '../../dialog/footer/formula-designer/formula-designer.models';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FormulaIdentifier } from '../results/formula-results.models';\r\nimport { FormulaDefaultTargets, FormulaNewPickerTargets, FormulaOptionalTargets, FormulaTargets } from './formula-targets';\r\n\r\n/**\r\n * Small helper service to get the target options for the formula designer.\r\n * \r\n * The purpose is to figure out what targets are possible for each field (eg. Settings.Name, etc.)\r\n * and to ensure that the information (eg. hasFormula) is correct.\r\n */\r\n@Injectable()\r\nexport class FormulaTargetsService {\r\n\r\n  constructor(\r\n    private itemService: ItemService,\r\n    private contentTypeService: ContentTypeService,\r\n  ) { }\r\n\r\n  getTargetOptions(id: FormulaIdentifier, formulas: FormulaCacheItem[]): TargetOption[] {\r\n    // Create a list of formula targets for the selected field - eg. Value, Tooltip, ListItem.Label, ListItem.Tooltip etc.\r\n    const targetOptions: TargetOption[] = [];\r\n    if (id.entityGuid == null || id.fieldName == null)\r\n      return targetOptions;\r\n\r\n    const fieldFormulas = formulas.filter(f => f.entityGuid === id.entityGuid && f.fieldName === id.fieldName);\r\n\r\n    // default targets\r\n    for (const target of Object.values(FormulaDefaultTargets)) {\r\n      const targetOption: TargetOption = {\r\n        hasFormula: fieldFormulas.some(f => f.target === target),\r\n        label: target.substring(target.lastIndexOf('.') + 1),\r\n        target,\r\n      };\r\n      targetOptions.push(targetOption);\r\n    }\r\n\r\n    // optional targets\r\n    const item = this.itemService.get(id.entityGuid);\r\n    const attribute = this.contentTypeService.getAttributeOfItem(item, id.fieldName);\r\n    const inputType = attribute.InputType;\r\n    if (InputTypeHelpers.isGroupStart(inputType)) {\r\n      for (const target of [FormulaOptionalTargets.Collapsed]) {\r\n        const targetOption: TargetOption = {\r\n          hasFormula: fieldFormulas.some(f => f.target === target),\r\n          label: target.substring(target.lastIndexOf('.') + 1),\r\n          target: target as Of<typeof FormulaTargets>,\r\n        };\r\n        targetOptions.push(targetOption);\r\n      }\r\n    }\r\n    if (InputTypeHelpers.isOldValuePicker(inputType)) {\r\n      for (const target of [FormulaOptionalTargets.DropdownValues]) {\r\n        const targetOption: TargetOption = {\r\n          hasFormula: fieldFormulas.some(f => f.target === target),\r\n          label: target.substring(target.lastIndexOf('.') + 1),\r\n          target: target as Of<typeof FormulaTargets>,\r\n        };\r\n        targetOptions.push(targetOption);\r\n      }\r\n    }\r\n\r\n    // TODO: HERE\r\n    if (InputTypeHelpers.isNewPicker(inputType)) {\r\n      for (const target of Object.values(FormulaNewPickerTargets)) {\r\n        const targetOption: TargetOption = {\r\n          hasFormula: fieldFormulas.some(f => f.target === target),\r\n          label: \"Picker \" + target.substring(target.lastIndexOf('.') + 1),\r\n          target: target as Of<typeof FormulaTargets>,\r\n        };\r\n        targetOptions.push(targetOption);\r\n      }\r\n    }\r\n\r\n    /* TODO: for picker types WIP\r\n      add formulas -> Field.ListItem.Label\r\n                      Field.ListItem.Tooltip\r\n                      Field.ListItem.Information\r\n                      Field.ListItem.HelpLink\r\n                      Field.ListItem.Disabled\r\n\r\n      Template for all new type formulas\r\n      v2((data, context, item) => {\r\n        return data.value;\r\n      });\r\n\r\n      old template for all of the rest\r\n\r\n      run formulas upon dropdowning the picker, upon each opening\r\n    */\r\n\r\n    // targets for formulas\r\n    for (const formula of fieldFormulas) {\r\n      const formulaExists = targetOptions.some(t => t.target === formula.target);\r\n      if (formulaExists) \r\n        continue;\r\n\r\n      const targetOption: TargetOption = {\r\n        hasFormula: true,\r\n        label: formula.target.substring(formula.target.lastIndexOf('.') + 1),\r\n        target: formula.target,\r\n      };\r\n      targetOptions.push(targetOption);\r\n    }\r\n\r\n    // currently selected target\r\n    const selectedExists = targetOptions.some(t => t.target === id.target);\r\n    if (!selectedExists) {\r\n      const targetOption: TargetOption = {\r\n        hasFormula: fieldFormulas.some(f => f.target === id.target),\r\n        label: id.target.substring(id.target.lastIndexOf('.') + 1),\r\n        target: id.target,\r\n      };\r\n      targetOptions.push(targetOption);\r\n    }\r\n    return targetOptions;    \r\n  }\r\n\r\n}","import { DesignerSnippet, FieldOption } from '../../dialog/footer/formula-designer/formula-designer.models';\r\nimport { FormulaVersions } from '../formula-definitions';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FormulaPropsParameters, FormulaRunOneHelpersFactory } from '../formula-run-one-helpers.factory';\r\n\r\nexport class FormulaV1Helpers {\r\n\r\n  /**\r\n   * Used to build the designer snippets context for use in formulas.\r\n   * @param formula\r\n   * @returns Designer snippets context for use in formulas\r\n   */\r\n  static buildDesignerSnippetsContext(formula: FormulaCacheItem): DesignerSnippet[] {\r\n    switch (formula.version) {\r\n      case FormulaVersions.V1:\r\n        const snippets = [\r\n          'app.appId',\r\n          'app.zoneId',\r\n          'app.isGlobal',\r\n          'app.isSite',\r\n          'app.isContent',\r\n          'cache.ChangeThis',\r\n          'culture.code',\r\n          'culture.name',\r\n          'debug',\r\n          'features.isEnabled(\\'nameId\\')',\r\n          'form.runFormulas()',\r\n          'sxc.ChangeThis',\r\n          'target.entity.id',\r\n          'target.entity.guid',\r\n          'target.name',\r\n          'target.type',\r\n          'user.id',\r\n          'user.isAnonymous',\r\n          'user.isSiteAdmin',\r\n          'user.isSystemAdmin',\r\n        ].map(name => {\r\n          const code = `context.${name}`;\r\n          const fieldSnippet: DesignerSnippet = {\r\n            code,\r\n            label: code,\r\n          };\r\n          return fieldSnippet;\r\n        });\r\n        return snippets;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Used to build the designer snippets for use in formulas.\r\n   * @param formula\r\n   * @param fieldOptions\r\n   * @param itemHeader\r\n   * @returns Designer snippets for use in formulas\r\n   */\r\n  static getSnippets(formula: FormulaCacheItem, fieldOptions: FieldOption[], prefill: Record<string, unknown>): DesignerSnippet[] {\r\n    switch (formula.version) {\r\n      case FormulaVersions.V1:\r\n        const formulaPropsParameters = new FormulaPropsParameters(prefill).all;\r\n        const snippets = [\r\n          'value',\r\n          'default',\r\n          'prefill',\r\n          'initial',\r\n          ...fieldOptions.map(f => f.fieldName),\r\n          'parameters.ChangeThis',\r\n          ...Object.keys(formulaPropsParameters).map(key => `parameters.${key}`),\r\n        ].map(name => {\r\n          const code = `data.${name}`;\r\n          const fieldSnippet: DesignerSnippet = {\r\n            code,\r\n            label: code,\r\n          };\r\n          return fieldSnippet;\r\n        });\r\n        return snippets;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n}","import { FieldOption } from '../../dialog/footer/formula-designer/formula-designer.models';\r\nimport { FormulaVersions } from '../formula-definitions';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FormulaV1Data } from '../run/formula-run-data.model';\r\nimport { FormulaV1Context } from '../run/formula-run-context.model';\r\nimport { FormulaV1Experimental } from '../run/formula-run-experimental.model';\r\nimport { PickerItem } from '../../fields/picker/models/picker-item.model';\r\nimport { FormulaPropsParameters, FormulaRunOneHelpersFactory } from '../formula-run-one-helpers.factory';\r\n\r\n// Import the type definitions for intellisense\r\nimport editorTypesForIntellisense from '!raw-loader!./editor-intellisense-function-v2.rawts';\r\n\r\nexport class IntellisenseV2 {\r\n  /**\r\n   * Used to build the formula typings for use in intellisense.\r\n   * @param formula\r\n   * @param fieldOptions\r\n   * @param itemHeader\r\n   * @returns Formula typings for use in intellisense\r\n   */\r\n  static getTypings(formula: FormulaCacheItem, fieldOptions: FieldOption[], prefill: Record<string, unknown>): string {\r\n    switch (formula.version) {\r\n      case FormulaVersions.V2: {\r\n        const formulaPropsParameters = new FormulaPropsParameters(prefill).all;\r\n\r\n        const allFields = fieldOptions.map(f => `${f.fieldName}: ${this.#inputTypeToDataType(f.inputType)};`).join('\\n');\r\n        const allParameters = Object.keys(formulaPropsParameters).map(key => `${key}: any;`).join('\\n');\r\n        const final = editorTypesForIntellisense\r\n          .replace('/* [inject:AllFields] */', allFields)\r\n          .replace('/* [inject:AllParameters] */', allParameters);\r\n\r\n        return final;\r\n\r\n        // TODO: probably update the entity-type info which was added in v14.07.05\r\n      }\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  static #inputTypeToDataType(inputType: string) {\r\n    const lower = inputType.toLowerCase();\r\n    if (lower.startsWith('string')) return 'string';\r\n    if (lower.startsWith('number')) return 'number';\r\n    if (lower.startsWith('date')) return 'Date';\r\n    if (lower.startsWith('boolean')) return 'boolean';\r\n    return \"any\";\r\n  }\r\n}\r\n\r\n\r\ninterface FormulaPropsV1 {\r\n  data: FormulaV1Data;\r\n  context: FormulaV1Context;\r\n  experimental: FormulaV1Experimental;\r\n  item?: PickerItem; //@SDV possibly add PickerTreeItem also\r\n}\r\n\r\n\r\n","export default \"/*\\r\\n  This is a special file which is not compiled as a normal TypeScript.\\r\\n  Instead it's loaded as raw text, to hand over to Monaco.\\r\\n  It ensures that v2 functions have intellisense.\\r\\n\\r\\n  TIP: To edit this file, briefly rename it to ...raw.ts, then back to ...rawts\\r\\n       This will make VSCode load it as a normal TypeScript file, so you can edit it.\\r\\n\\r\\n  - Try to keep in sync with the real code in the 2sxc project.\\r\\n  - The comments are _documentation_ for the user, so they can see what's available\\r\\n  - If you need any \\\"internal\\\" comments, use // instead\\r\\n  - Note that the [inject:...] comments are replaced by the build process\\r\\n*/\\r\\n\\r\\n/**\\r\\n * The data object is the main object for figuring out what the field or setting contained and what other fields currently store.\\r\\n * It has properties such as `.value` etc.\\r\\n * Just start typing to see the intellisense.\\r\\n */\\r\\n// Note that the type must be explicitly like `string | boolean | number | string[]`\\r\\n// Otherwise it won't show the details to the user\\r\\ndeclare interface FormulaData {\\r\\n  /**\\r\\n   * The value of the current field/setting when the formula runs.\\r\\n   *\\r\\n   * _It's exact type depends on the underlying type._\\r\\n   */\\r\\n  value: string | boolean | number | string[];\\r\\n  /**\\r\\n   * The _default_ value of the current field/setting as defined in the field settings.\\r\\n   *\\r\\n   * _It's exact type depends on the underlying type._\\r\\n   */\\r\\n  default: string | boolean | number | string[];\\r\\n  /**\\r\\n   * A prefill value that was passed into the form when it was loaded.\\r\\n   *\\r\\n   * _It's exact type depends on the underlying type._\\r\\n   */\\r\\n  prefill: string | boolean | number | string[];\\r\\n  /**\\r\\n   * The value of the current field/setting when the form initially loaded.\\r\\n   *\\r\\n   * _It's exact type depends on the underlying type._\\r\\n   */\\r\\n  initial: string | boolean | number | string[];\\r\\n  /* [inject:AllFields] */\\r\\n  /**\\r\\n   * All parameters which were passed to the form when it was loaded\\r\\n   *\\r\\n   * _It's exact type depends on the parameter, but it's usually a string._\\r\\n   */\\r\\n  parameters: {\\r\\n    /* [inject:AllParameters] */\\r\\n  };\\r\\n}\\r\\n\\r\\ndeclare interface FormulaContext {\\r\\n  /**\\r\\n   * Information about the current App\\r\\n   */\\r\\n  app: {\\r\\n    /** The current App ID */\\r\\n    appId: number;\\r\\n    /** The current Zone ID */\\r\\n    zoneId: number;\\r\\n    /** Determines if the current App is the global App */\\r\\n    isGlobal: boolean;\\r\\n    /** Determines if the current App is the primary (main) App on the site */\\r\\n    isSite: boolean;\\r\\n    /** Determines if the current App is a content App */\\r\\n    isContent: boolean;\\r\\n    /**\\r\\n     * Retrieve a setting like an App setting.\\r\\n     * You need the full path like `Settings.ShowCategories`.\\r\\n     * \\r\\n     * Important: For security reasons formulas will only get settings which where configured in the ContentType for use in Formulas.\\r\\n     */\\r\\n    getSetting(settingPath: string): string;\\r\\n  };\\r\\n  /**\\r\\n   * Cache for this formula. You can store any data here and it will be available in the next run.\\r\\n   */\\r\\n  cache: Record<string, any>;\\r\\n  /**\\r\\n   * Information about the current language\\r\\n   */\\r\\n  culture: {\\r\\n    code: string;\\r\\n    name: string;\\r\\n  };\\r\\n  debug: boolean;\\r\\n  /**\\r\\n   * API to detect what features are currently enabled/available\\r\\n   */\\r\\n  features: {\\r\\n    // /**\\r\\n    //  * Get internal information about a feature if it's available. This is rarely used.\\r\\n    //  * @param nameId The name of the feature, eg. `PasteImageFromClipboard`\\r\\n    //  */\\r\\n    // get(nameId: string): Record<string, any>;\\r\\n    /** Find out if the feature is enabled. Eg. `...isEnabled('PasteImageFromClipboard')` */\\r\\n    isEnabled(nameId: string): boolean;\\r\\n  };\\r\\n  /**\\r\\n   * Work with the current form\\r\\n   */\\r\\n  form: {\\r\\n    // v16 Deprecated for v2\\r\\n    // /** Re-trigger all formulas. Usually used inside promises when they complete. */\\r\\n    // runFormulas(): void;\\r\\n  };\\r\\n  /**\\r\\n   * The standard sxc object for the current App.\\r\\n   * It's the same as the sxc-instance in the page.\\r\\n   *\\r\\n   * You can use it to make API calls to the server.\\r\\n   */\\r\\n  sxc: {\\r\\n    /** The module ID */\\r\\n    id: number;\\r\\n    /** The Content-Block ID - matches the module ID unless it's an inner-content block inside another module */\\r\\n    cbid: number;\\r\\n    /** The sxc WebAPI object. Check the docs: https://docs.2sxc.org/api/js/SxcWebApi.html */\\r\\n    webApi: {\\r\\n      /**\\r\\n       * Get data from a url and return the json-object\\r\\n       * @param url Url to call. It's usually a virtual url such as `app/auto/api/basic/hello`\\r\\n       * @param data Optional data. If provided, it will use a POST\\r\\n       * @param method Optional method, default is `GET` unless you specify data, then it's `POST`\\r\\n       */\\r\\n      fetchJson<TData>(url: string, data?: string | Record<string, any>, method?: string): Promise<TData>;\\r\\n      /**\\r\\n       * Get data from a url and return the response (not a nice object)\\r\\n       * @param url Url to call. It's usually a virtual url such as `app/auto/api/basic/hello`\\r\\n       * @param data Optional data. If provided, it will use a POST\\r\\n       * @param method Optional method, default is `GET` unless you specify data, then it's `POST`\\r\\n       */\\r\\n      fetchRaw<TData>(url: string, data?: string | Record<string, any>, method?: string): Promise<TData>;\\r\\n    };\\r\\n    // turn off for now v16.00 - confusing\\r\\n    // [key: string]: any;\\r\\n  };\\r\\n  /**\\r\\n   * Information about the item this formula targets.\\r\\n   */\\r\\n  target: {\\r\\n    /** The entity the current formula affects */\\r\\n    entity: {\\r\\n      /** The entity ID */\\r\\n      id: number;\\r\\n      /** The entity GUID */\\r\\n      guid: string;\\r\\n      /** Metadata For information */\\r\\n      for: {\\r\\n        /** The target type like `4` (Entity). `0` if it's not metadata  */\\r\\n        targetType: number;\\r\\n        /** The int-key if it uses number keys, otherwise null */\\r\\n        number?: number;\\r\\n        /** The string-key if it uses string keys, otherwise null */\\r\\n        string?: string;\\r\\n        /** The GUID-key if it uses GUIDs, otherwise null */\\r\\n        guid?: string;\\r\\n      },\\r\\n      /** this is a new entity */\\r\\n      isNew: boolean;\\r\\n      /** this is a copy, note that isNew will also be true */\\r\\n      isCopy: boolean;\\r\\n    };\\r\\n    name: string;\\r\\n    /** The entity type name */\\r\\n    type: string;\\r\\n  };\\r\\n  /**\\r\\n   * Information about the current user\\r\\n   */\\r\\n  user: {\\r\\n    /** The current user ID */\\r\\n    id: number;\\r\\n    /** Check if the current user is anonymous eg. not logged in */\\r\\n    isAnonymous: boolean;\\r\\n    /** Check if the current user is a content admin */\\r\\n    isContentAdmin: boolean;\\r\\n    /** Check if the current user is a content editor (but maybe not admin) - new v20.01 */\\r\\n    isContentEditor: boolean;\\r\\n    /** Check if the current user is a site admin */\\r\\n    isSiteAdmin: boolean;\\r\\n    /** Check if the current user is a system admin */\\r\\n    isSystemAdmin: boolean;\\r\\n    /** current user e-mail */\\r\\n    email: string;\\r\\n    /** The user GUID */\\r\\n    guid: string;\\r\\n    /** the name usually shown in greetings */\\r\\n    name: string;\\r\\n    /** The user name used for login */\\r\\n    username: string;\\r\\n    /** The names of user roles of the current user is in - new v20.01 */\\r\\n    roles: string[];\\r\\n  };\\r\\n}\\r\\n\\r\\n// /**\\r\\n//  * Test docs\\r\\n//  * @param data The data object\\r\\n//  */\\r\\n// declare function callbackV2(data: FormulaData): string | string[];\\r\\n\\r\\n// /**\\r\\n//  * test docs 3\\r\\n//  * @param callback The real code of the formula\\r\\n//  */\\r\\n// declare function v3(callback: typeof callbackV2);\\r\\n\\r\\n/**\\r\\n * This `v2` wrapper is required for the intellisense to work.\\r\\n * @param callback The real code of the formula\\r\\n * @returns A string, boolean, number, date or an advanced object\\r\\n */\\r\\ndeclare function v2(\\r\\n  // The main function - adding comments here does not show up, so we don't have them ATM\\r\\n  callback: (\\r\\n    data: FormulaData,\\r\\n    context: FormulaContext,\\r\\n  ) => string | boolean | number | Date | {\\r\\n    value?: string | boolean | number | Date | { severity: 'warning' | 'error', message: string },\\r\\n    fields?: {\\r\\n      name: string,\\r\\n      value: string | boolean | number | Date\\r\\n    }[],\\r\\n    promise?: Promise<any>,\\r\\n    stop?: boolean,\\r\\n  },\\r\\n): void;\\r\\n\";","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { EntityOption, FieldOption, TargetOption } from '../../dialog/footer/formula-designer/formula-designer.models';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FormulaCacheService } from '../cache/formula-cache.service';\r\nimport { FormulaTargets } from '../targets/formula-targets';\r\nimport { FormulaTargetsService } from '../targets/formula-targets.service';\r\nimport { DesignerState } from './designer-state.model';\r\nimport { FormulaV1Helpers } from './formula-v1-snippets';\r\nimport { IntellisenseV2 } from './intellisense-v2';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  setDesignerOpen: false,\r\n}\r\n\r\n/**\r\n * Contains methods for extended CRUD operations for formulas.\r\n */\r\n@Injectable()\r\nexport class FormulaDesignerService {\r\n\r\n  log = classLog({FormulaDesignerService}, logSpecs);\r\n\r\n  public cache = transient(FormulaCacheService);\r\n  #targetsService = transient(FormulaTargetsService);\r\n\r\n  constructor(private itemService: ItemService) {\r\n    this.log.fnIf('constructor');\r\n  }\r\n\r\n  /**\r\n   * Contain all the settings to all items/settings in this form\r\n   * for rare cases (formulas) which need to access settings of all items\r\n   */\r\n  public itemSettingsServices: Record<string, FieldsSettingsService> = {};\r\n\r\n  /** The current state of the UI, what field is being edited etc. */\r\n  public designerState = signalObj<DesignerState>('designerState', {\r\n    editMode: false,\r\n    entityGuid: undefined,\r\n    fieldName: undefined,\r\n    isOpen: false,\r\n    target: undefined,\r\n  } satisfies DesignerState);\r\n\r\n  /** Formula result of the formula which is currently open in the editor */\r\n  formulaResult = computedObj('formulaResult', () => {\r\n    const state = this.designerState();\r\n    return this.cache.resultListIndexAndOriginal(state).value;\r\n  });\r\n\r\n  currentTargetOptions = computedObj<TargetOption[]>('currentTargetOptions', () => {\r\n    const state = this.designerState();\r\n    const formulas = this.cache.formulas();\r\n    return this.#targetsService.getTargetOptions(state, formulas);\r\n  });\r\n\r\n  /** Possible entities incl. state if they have formulas */\r\n  entityOptions = computedObj<EntityOption[]>('entityOptions', () => {\r\n    // this is a signal, so this will change when the data is loaded...\r\n    const formulas = this.cache.formulas();\r\n    return Object.entries(this.itemSettingsServices).map(([entityGuid, settingsSvc]) => {\r\n      const entityFormulas = formulas.filter(f => f.entityGuid === entityGuid);\r\n      return {\r\n        entityGuid: entityGuid,\r\n        formulas: entityFormulas,\r\n        hasFormula: entityFormulas.length > 0,\r\n        label: settingsSvc.contentTypeSettings()._itemTitle,\r\n      } satisfies EntityOption;\r\n    })\r\n  });\r\n\r\n  /** possible fields of the current entity incl. state such as if it has formulas */\r\n  fieldsOptions = computedObj<FieldOption[]>('fieldsOptions', () => {\r\n    const guid = this.designerState().entityGuid;\r\n    if (guid == null)\r\n      return [];\r\n    const entityFormulas = this.entityOptions().find(e => e.entityGuid == guid).formulas;\r\n    // find the current fieldSettingsService to get all properties\r\n    const selectedSettings = this.itemSettingsServices[guid];\r\n    const fieldsProps = selectedSettings.allProps();\r\n    const fieldOptions: FieldOption[] = Object.keys(fieldsProps).map(fieldName => {\r\n      const formulas = entityFormulas.filter(f => f.fieldName === fieldName);\r\n      return {\r\n        fieldName,\r\n        formulas,\r\n        hasFormula: formulas.length > 0,\r\n        inputType: fieldsProps[fieldName].settings.InputType,\r\n        label: fieldName,\r\n      } satisfies FieldOption;\r\n    });\r\n    return fieldOptions;\r\n  });\r\n\r\n  initAfterItemSettingsAreReady(): void {\r\n    // Initialize the first designer state to contain the first item and field\r\n    const oldState = this.designerState();\r\n    const [entityGuid, settingsSvc] = Object.entries(this.itemSettingsServices)[0];\r\n    const fieldsProps = settingsSvc.allProps();\r\n    const firstFieldName = Object.keys(fieldsProps)[0];\r\n    const target = firstFieldName != null ? FormulaTargets.Value : null;\r\n\r\n    const newState: DesignerState = {\r\n      ...oldState,\r\n      entityGuid,\r\n      fieldName: firstFieldName,\r\n      target,\r\n    };\r\n    this.designerState.set(newState);\r\n  }\r\n\r\n  /** The currently selected formula or null */\r\n  currentFormula = computedObj<FormulaCacheItem>('currentFormula', () => {\r\n    const s = this.designerState();\r\n    const { value } = this.cache.formulaListIndexAndOriginal(s);\r\n    return value;\r\n  });\r\n\r\n  /** Snippets for the current formula based on it's version */\r\n  v1ContextSnippets = computedObj('v1ContextSnippets', () => {\r\n    const current = this.currentFormula();\r\n    return current != null\r\n    ? FormulaV1Helpers.buildDesignerSnippetsContext(current)\r\n    : [];\r\n  });\r\n\r\n  /** Snippets for the current item header based on the current formulas target guid */\r\n  #currentItemHeader = computedObj('currentItemHeader', () => {\r\n    const guid = this.designerState().entityGuid;\r\n    return guid == null ? null : this.itemService.getItemHeader(guid);\r\n  });\r\n\r\n  /** JS Typings for V2 formulas - all the properties and type names */\r\n  v2JsTypings = computedObj('v2JsTypings', () => {\r\n    const formula = this.currentFormula();\r\n    const itemHeader = this.#currentItemHeader();\r\n    return formula != null && itemHeader != null\r\n      ? IntellisenseV2.getTypings(formula, this.fieldsOptions(), itemHeader.Prefill)\r\n      : ''\r\n  });\r\n\r\n  /** Data snippets for the current formula V1 - all the data that can be used in formulas */\r\n  v1DataSnippets = computedObj('v1DataSnippets', () => {\r\n    const formula = this.currentFormula();\r\n    const itemHeader = this.#currentItemHeader();\r\n    return formula != null && itemHeader != null\r\n    ? FormulaV1Helpers.getSnippets(formula, this.fieldsOptions(), itemHeader.Prefill)\r\n    : []\r\n  });\r\n\r\n\r\n  /**\r\n   * Used for opening or closing designer\r\n   * @param isOpen\r\n   */\r\n  setDesignerOpen(isOpen: boolean): void {\r\n    this.log.fnIf('setDesignerOpen', { isOpen });\r\n    this.designerState.set({\r\n      ...this.designerState(),\r\n      isOpen,\r\n    } satisfies DesignerState);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { ItemHelper } from '../helpers/item.helper';\r\nimport { EavContentType, EavContentTypeAttribute, EavItem } from '../models/eav';\r\nimport { EavContentTypeDto } from '../models/json-format-v1';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ContentTypeService extends SignalStoreBase<string, EavContentType> {\r\n\r\n  constructor() {\r\n    super(classLog({ContentTypeService}));\r\n  }\r\n  \r\n  override getId = (item: EavContentType) => item.Id;\r\n\r\n  addContentTypes(contentTypes: EavContentTypeDto[]): void {\r\n    const converted = EavContentType.dtoToEavMany(contentTypes);\r\n    this.addMany(converted);\r\n  }\r\n\r\n  getContentTypeOfItem(item: EavItem): EavContentType {\r\n    const nameId = ItemHelper.getContentTypeNameId(item);\r\n    return this.get(nameId);\r\n  }\r\n\r\n  getAttribute(guid: string, name: string): EavContentTypeAttribute {\r\n    return this.get(guid).Attributes.find(a => a.Name === name);\r\n  }\r\n\r\n  getAttributeOfItem(item: EavItem, name: string): EavContentTypeAttribute {\r\n    return this.getContentTypeOfItem(item).Attributes.find(a => a.Name === name);\r\n  }\r\n}\r\n","export enum LanguagePart {\r\n  UI = 'ui',\r\n  Form = 'form',\r\n  PrimaryTranslatable = 'primaryTranslatable'\r\n}","import { EavEntity, EavEntityAttributes } from '.';\r\nimport { Of } from '../../../../../../../core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { EavContentTypeAttributesDto } from '../json-format-v1';\r\n\r\nexport class EavContentTypeAttribute {\r\n  InputType: Of<typeof InputTypeCatalog>;\r\n  IsTitle: boolean;\r\n  Metadata: EavEntity[];\r\n  Name: string;\r\n  Settings: EavEntityAttributes;\r\n  Type: string;\r\n\r\n  private static dtoToEav(ctAttributeDto: EavContentTypeAttributesDto): EavContentTypeAttribute {\r\n    const metadata = EavEntity.dtoToEavMany(ctAttributeDto.Metadata);\r\n    const settings = EavEntityAttributes.mergeSettings(metadata);\r\n\r\n    const attribute: EavContentTypeAttribute = {\r\n      InputType: ctAttributeDto.InputType,\r\n      IsTitle: ctAttributeDto.IsTitle,\r\n      Metadata: metadata,\r\n      Name: ctAttributeDto.Name,\r\n      Settings: settings,\r\n      Type: ctAttributeDto.Type,\r\n    };\r\n    return attribute;\r\n  }\r\n\r\n  static dtoToEavMany(ctAttributesDto: EavContentTypeAttributesDto[]): EavContentTypeAttribute[] {\r\n    if (ctAttributesDto == null)\r\n      return [];\r\n\r\n    const attributes = ctAttributesDto.map(a => EavContentTypeAttribute.dtoToEav(a));\r\n    return attributes;\r\n  }\r\n}\r\n","import { EavContentTypeAttribute, EavEntity, EavEntityAttributes } from '.';\r\nimport { EavContentTypeDto } from '../json-format-v1';\r\n\r\nexport class EavContentType {\r\n  Attributes: EavContentTypeAttribute[];\r\n  /** The NameId / Guid of this Content-Type */\r\n  Id: string;\r\n  Metadata: EavEntity[];\r\n  Name: string;\r\n  Scope: string;\r\n  Settings: EavEntityAttributes;\r\n\r\n  /** WIP v18.02 */\r\n  Title: string;\r\n\r\n  static dtoToEav(contentTypeDto: EavContentTypeDto): EavContentType {\r\n    const attributes = EavContentTypeAttribute.dtoToEavMany(contentTypeDto.Attributes);\r\n    const metadata = EavEntity.dtoToEavMany(contentTypeDto.Metadata);\r\n    const settings = EavEntityAttributes.mergeSettings(metadata);\r\n\r\n    const contentType: EavContentType = {\r\n      Attributes: attributes,\r\n      Id: contentTypeDto.Id,\r\n      Metadata: metadata,\r\n      Name: contentTypeDto.Name,\r\n      Scope: contentTypeDto.Scope,\r\n      Settings: settings,\r\n      Title: contentTypeDto.Title,\r\n    };\r\n    return contentType;\r\n  }\r\n\r\n  static dtoToEavMany(contentTypesDto: EavContentTypeDto[]): EavContentType[] {\r\n    if (contentTypesDto == null)\r\n      return null;\r\n\r\n    const result = contentTypesDto.map(ct => EavContentType.dtoToEav(ct));\r\n    return result;\r\n  }\r\n}\r\n","import { EavDimension, EavTypeMap, EavTypeName } from '.';\r\nimport { EavValuesDto } from '../json-format-v1';\r\n\r\nexport class EavFieldValue<T> {\r\n  value: T;\r\n  dimensions: EavDimension[];\r\n\r\n  static create<T>(value: T, dimensions: EavDimension[]): EavFieldValue<T> {\r\n    return { value, dimensions } satisfies EavFieldValue<T>;\r\n  }\r\n\r\n  static dtoToEav<T>(valuesDto: EavValuesDto<T>): EavFieldValue<T>[] {\r\n    const values = Object.entries(valuesDto)\r\n      .map(([langs, value]) => {\r\n        const dimensions = langs.split(',').map(lang => EavDimension.create(lang));\r\n        return this.create(value, dimensions);\r\n      });\r\n    return values;\r\n  }\r\n\r\n\r\n  static createEavFieldValue<K extends EavTypeName>(\r\n    value: EavTypeMap[K],\r\n  ): EavFieldValue<EavTypeMap[K]>[] {\r\n    return [\r\n      {\r\n        value,\r\n        dimensions: [{ dimCode: '*' }],\r\n      },\r\n    ];\r\n  }\r\n\r\n}\r\n","import { EavEntityAttributes, EavFor, EavType } from '.';\r\nimport { EavEntityDto } from '../json-format-v1';\r\n\r\nexport class EavEntity {\r\n  Attributes: EavEntityAttributes;\r\n  Guid: string;\r\n  Id: number;\r\n  Owner: string;\r\n  Type: EavType;\r\n  Version: number;\r\n  For?: EavFor;\r\n  Metadata?: EavEntity[];\r\n\r\n  static dtoToEav(entityDto: EavEntityDto): EavEntity {\r\n    const attributes = EavEntityAttributes.dtoToEav(entityDto.Attributes);\r\n    const metadata = this.dtoToEavMany(entityDto.Metadata);\r\n\r\n    const entity: EavEntity = {\r\n      Attributes: attributes,\r\n      Guid: entityDto.Guid,\r\n      Id: entityDto.Id,\r\n      Owner: entityDto.Owner,\r\n      Type: entityDto.Type,\r\n      Version: entityDto.Version,\r\n      For: entityDto.For ?? null,\r\n      Metadata: metadata,\r\n    };\r\n    return entity;\r\n  }\r\n\r\n  static dtoToEavMany(entitiesDto: EavEntityDto[]): EavEntity[] {\r\n    if (entitiesDto == null)\r\n      return null;\r\n\r\n    const entities = entitiesDto.map(e => EavEntity.dtoToEav(e));\r\n    return entities;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavEntity } from '../models/eav';\r\nimport { EavEntityDto } from '../models/json-format-v1';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\n\r\n/**\r\n * Content-Type Items are additional entities which the ContentType info needs.\r\n * For example, external formulas.\r\n * \r\n * This service stores / retrieves these.\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class ContentTypeItemService extends SignalStoreBase<string, EavEntity> {\r\n\r\n  constructor() {\r\n    super(classLog({ContentTypeItemService}));\r\n  }\r\n\r\n  override getId = (item: EavEntity) => item.Guid;\r\n\r\n  addContentTypeItems(contentTypeItems: EavEntityDto[]): void {\r\n    const converted = EavEntity.dtoToEavMany(contentTypeItems);\r\n    this.addMany(converted);\r\n  }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { classLog } from '../logging';\r\nimport { QueryStreams } from '../models/query-stream.model';\r\nimport { Context } from './context';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getAvailableEntities: false,\r\n  getEntities: false,\r\n};\r\n\r\n@Injectable()\r\nexport class QueryService {\r\n\r\n  log = classLog({QueryService}, logSpecs);\r\n\r\n  constructor(private http: HttpClient, private context: Context) { }\r\n\r\n  getFromQuery(queryUrl: string, params: string, fields: string, entitiesFilter?: string[]): Observable<QueryStreams> {\r\n    this.log.fnIf('getAvailableEntities', { queryUrl, params, fields, entitiesFilter });\r\n    // Check if any params we should auto-add are already set (like in a query which has these params set in the configuration)\r\n    const hasParams = !!params;\r\n    const paramsLower = params?.toLocaleLowerCase() ?? '';\r\n    const hasAppId = paramsLower.includes('appid=') ?? false;\r\n    const allParams = ''\r\n      + (hasAppId ? '' : `&appId=${this.context.appId}`)\r\n      + (hasParams ? `&${params}` : '')\r\n      + '&$select=' + (fields ?? '' /* special catch to avoid the word \"null\" */);\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(`app/auto/query/${queryUrl}?${urlParams}`,\r\n      {\r\n        Guids: entitiesFilter,\r\n      },\r\n    );\r\n  }\r\n\r\n  getEntities({ contentTypes, itemIds, fields, log }: { contentTypes: string[]; itemIds: string[]; fields: string; log: string }): Observable<QueryStreams> {\r\n    this.log.fnIf(`getEntities`, { log, contentTypes, itemIds, fields });\r\n    const allParams =\r\n      '&typeNames=' + (contentTypes?.join(',') ?? '')\r\n      + `&appId=${this.context.appId}`\r\n      + '&$select=' + (fields ?? '' /* special catch to avoid the word \"null\" */);\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(\r\n      `app/auto/query/System.EntityPicker/Default?${urlParams}`,\r\n      { Guids: itemIds} // 2dg Guids must be in the body as an array (API filter & too many IDs for URL parameters).\r\n    );\r\n  }\r\n}\r\n","export const TranslationLinks = {\r\n  Translate: 'Translate',\r\n  DontTranslate: 'DontTranslate',\r\n  MissingDefaultLangValue: 'MissingDefaultLangValue',\r\n  LinkReadOnly: 'LinkReadOnly',\r\n  LinkReadWrite: 'LinkReadWrite',\r\n  LinkCopyFrom: 'LinkCopyFrom',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","/** Prefix for any kind of field settings */\r\nexport const SettingsFormulaPrefix = 'Field.Settings.';\r\n\r\n\r\n\r\n/** Default targets for formulas */\r\nexport const FormulaDefaultTargets = {\r\n  Disabled: `${SettingsFormulaPrefix}Disabled`,\r\n  Name: `${SettingsFormulaPrefix}Name`,\r\n  Notes: `${SettingsFormulaPrefix}Notes`,\r\n  Required: `${SettingsFormulaPrefix}Required`,\r\n  Value: 'Field.Value',\r\n  Visible: `${SettingsFormulaPrefix}Visible`,\r\n  Validation: 'Field.Validation',\r\n};\r\n\r\n/** Values of the Default Targets (used often, so precalculated) */\r\nexport const FormulaDefaultTargetValues = Object.values(FormulaDefaultTargets);\r\n\r\n\r\n\r\n/** Targets for new Pickers only */\r\nexport const FormulaNewPickerTargets = {\r\n  Options: 'Field.Options',\r\n  Selected: 'Field.Selected',\r\n};\r\n\r\n/** Values of the NewPicker Targets (used often, so precalculated) */\r\nexport const FormulaNewPickerTargetValues = Object.values(FormulaNewPickerTargets);\r\n\r\nexport const FormulaSpecialPickerTargets = [\r\n  FormulaNewPickerTargets.Options,\r\n  // FormulaDefaultTargets.Value,\r\n  FormulaNewPickerTargets.Selected,\r\n];\r\n\r\n/** These formulas should auto-sleep unless specified otherwise */\r\nexport const FormulaSpecialPickerAutoSleep = [\r\n  FormulaNewPickerTargets.Options,\r\n  FormulaNewPickerTargets.Selected,\r\n];\r\n\r\n\r\n\r\nexport const FormulaOptionalTargets = {\r\n  Collapsed: `${SettingsFormulaPrefix}Collapsed`,\r\n  DropdownValues: `${SettingsFormulaPrefix}DropdownValues`,\r\n};\r\n\r\nexport const FormulaOptionalTargetValues = Object.values(FormulaOptionalTargets);\r\n\r\n\r\n\r\n/** All possible targets for formulas (merged) */\r\nexport const FormulaTargets = {\r\n  ...FormulaDefaultTargets,\r\n  ...FormulaOptionalTargets,\r\n  ...FormulaNewPickerTargets,\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n/** Validation object interface */\r\nexport interface FormulaFieldValidation {\r\n  severity: '' | 'error' | 'warning';\r\n  message?: string;\r\n}\r\n\r\n","export class EavDimension {\r\n  /** A dimension reference, such as `*` or `en-us`.\r\n   * Usually all in lower case.\r\n   */\r\n  dimCode: string;\r\n\r\n  static create(dimCode: string): EavDimension {\r\n    return { dimCode } satisfies EavDimension;\r\n  }\r\n}\r\n","import { FieldValueOrResultRaw } from './results/formula-results.models';\r\nimport { FormulaV1Context } from './run/formula-run-context.model';\r\nimport { FormulaV1Data } from './run/formula-run-data.model';\r\n\r\n//#region Formula strings / parts to process and show templates\r\n\r\n/**\r\n * This must be in front of every formula so that JavaScript will run it.\r\n * Normally it's not there, so it's added before running the code.\r\n */\r\nexport const runFormulaPrefix = 'function ';\r\n\r\n// V1 sample, just for reference\r\n// const defaultFormulaV1 = `${requiredFormulaPrefix}v1 (data, context) {\r\n//   return data.value;\r\n// }`;\r\n\r\n// new\r\nconst defaultFormulaV2 = `v2((data, context) => {\r\n  return data.value;\r\n});`;\r\n\r\nexport const defaultFormula = defaultFormulaV2;\r\n\r\nconst listItemFormulaV2 = `v2((data, context, item) => {\r\n  return data.value;\r\n});`;\r\n\r\nexport const defaultListItemFormula = listItemFormulaV2;\r\n\r\n//#endregion\r\n\r\n//#region Formula Function Types\r\n\r\nexport type FormulaFunction = FormulaFunctionDefault | FormulaFunctionV1;\r\n\r\nexport type FormulaFunctionDefault = () => FieldValueOrResultRaw;\r\n\r\nexport type FormulaFunctionV1 = (\r\n  data: FormulaV1Data,\r\n  context: FormulaV1Context,\r\n  // 2025-04-22 #DropFormulaParamExperimental - remove this comment and warnings ca. 2026-Q2\r\n  // experimental: FormulaV1Experimental\r\n) => FieldValueOrResultRaw;\r\n\r\n//#endregion\r\n\r\n//#region Formula Versions\r\n\r\nexport const FormulaVersions = {\r\n  V1: 'v1',\r\n  V2: 'v2',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n//#endregion","import { EavEntity, EavEntityAttributes, EavFieldValue } from '.';\r\nimport { ItemIdentifierHeader } from '../../../../shared/models/edit-form.model';\r\nimport { EavEntityBundleDto } from '../json-format-v1';\r\n\r\nexport type EavTypeMap = {\r\n  String: string;\r\n  Number: number;\r\n  Boolean: boolean;\r\n  Object: Record<string, unknown>;\r\n  Unknown: unknown;\r\n};\r\n\r\nexport type EavTypeName = keyof EavTypeMap;\r\n\r\nexport class EavItem {\r\n  Entity: EavEntity;\r\n  Header: ItemIdentifierHeader;\r\n\r\n  static anyToEav(entityBundleDto: EavEntityBundleDto): EavItem {\r\n\r\n    const data = entityBundleDto.Header.ClientData?.data;\r\n    if (data) {\r\n      return this.#objToEav(data as Record<string, unknown>, entityBundleDto, 'from ClientData.data');\r\n    }\r\n    \r\n    const override = entityBundleDto.Header.ClientData?.overrideContents;\r\n\r\n    return override\r\n      ? EavItem.#objToEav(override, entityBundleDto, 'from ClientData.overrideContents')\r\n      : EavItem.dtoToEav(entityBundleDto);\r\n  }\r\n\r\n  static dtoToEav(entityBundleDto: EavEntityBundleDto): EavItem {\r\n    const entity = EavEntity.dtoToEav(entityBundleDto.Entity);\r\n\r\n    return {\r\n      ...entityBundleDto,\r\n      Entity: entity,\r\n    } satisfies EavItem;\r\n  }\r\n\r\n  /**\r\n * Converts a raw override object and DTOs into a complete EavItem.\r\n */\r\n  static #objToEav(\r\n    override: Record<string, unknown>,\r\n    entityBundleDto: EavEntityBundleDto,\r\n    message: string,\r\n  ): EavItem {\r\n    // Build attributes by converting each override key-value pair\r\n    const attributes: EavEntityAttributes = Object.fromEntries(\r\n      Object.entries(override).map(([key, value]) => {\r\n        const type = this.getType(value);\r\n        return [\r\n          key,\r\n          {\r\n            Values: EavFieldValue.createEavFieldValue(\r\n              value as EavTypeMap[EavTypeName],\r\n            ),\r\n            Type: type,\r\n          },\r\n        ];\r\n      })\r\n    );\r\n\r\n    // Convert DTO to entity and assign new attributes\r\n    const entity: EavEntity = {\r\n      ...EavEntity.dtoToEav(entityBundleDto.Entity),\r\n      Attributes: attributes,\r\n    };\r\n\r\n    // Combine entity and header into EavItem\r\n    return {\r\n      ...entityBundleDto,\r\n      Entity: entity,\r\n    } satisfies EavItem;\r\n  }\r\n\r\n\r\n\r\n  static eavToObj(eavItem: EavItem): Record<string, unknown> {\r\n    const attributes = eavItem.Entity.Attributes;\r\n    const result: Record<string, unknown> = {};\r\n\r\n    for (const key in attributes) {\r\n      const attr = attributes[key];\r\n      if (!attr.Values || attr.Values.length === 0)\r\n        continue;\r\n\r\n      // to map to object, just take the first value\r\n      result[key] = attr.Values[0].value;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n\r\n  /**\r\n   * Determines the EAV data type based on the JS type of the value.\r\n   */\r\n  static getType(value: unknown): string {\r\n    switch (typeof value) {\r\n      case 'string':\r\n        return 'String';\r\n      case 'number':\r\n        return 'Number';\r\n      case 'boolean':\r\n        return 'Boolean';\r\n      default:\r\n        return 'Unknown';\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","import { Of } from '../../../../../../../../core';\r\nimport { TranslationLinks } from '../../../../localization/translation-link.constants';\r\n\r\nexport class TranslateMenuHelpers {\r\n\r\n  static getTranslationStateClass(linkType: Of<typeof TranslationLinks>) {\r\n    switch (linkType) {\r\n      case TranslationLinks.MissingDefaultLangValue:\r\n        return 'localization-missing-default-lang-value';\r\n      case TranslationLinks.Translate:\r\n      case TranslationLinks.LinkCopyFrom:\r\n        return 'localization-translate';\r\n      case TranslationLinks.DontTranslate:\r\n        return '';\r\n      case TranslationLinks.LinkReadOnly:\r\n        return 'localization-link-read-only';\r\n      case TranslationLinks.LinkReadWrite:\r\n        return 'localization-link-read-write';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  static calculateSharedInfoMessage(dimensions: string[], currentLanguage: string): string {\r\n    dimensions = TranslateMenuHelpers.calculateShortDimensions(dimensions, currentLanguage);\r\n    const result = TranslateMenuHelpers.calculateEditAndReadDimensions(dimensions);\r\n    const editableDimensions = result.editableDimensions;\r\n    const readOnlyDimensions = result.readOnlyDimensions;\r\n    let infoMessage = '';\r\n\r\n    const editableExist = editableDimensions.length > 0;\r\n    const readOnlyExist = readOnlyDimensions.length > 0;\r\n    if (editableExist && readOnlyExist) {\r\n      infoMessage = `${editableDimensions.join(', ')}, (${readOnlyDimensions.join(', ')})`;\r\n    } else if (editableExist) {\r\n      infoMessage = editableDimensions.join(', ');\r\n    } else if (readOnlyExist) {\r\n      infoMessage = `(${readOnlyDimensions.join(', ')})`;\r\n    }\r\n\r\n    return infoMessage;\r\n  }\r\n\r\n  private static calculateShortDimensions(dimensions: string[], currentLanguage: string): string[] {\r\n    const dimMap: Record<string, string[]> = {};\r\n    const langCode = currentLanguage.slice(0, currentLanguage.indexOf('-'));\r\n\r\n    dimMap[langCode] = [langCode];\r\n\r\n    dimensions.forEach(dimension => {\r\n      const shortDimension = dimension.slice(0, dimension.indexOf('-'));\r\n      const shortNoReadOnly = shortDimension.replace('~', '');\r\n\r\n      if (!dimMap[shortNoReadOnly]) {\r\n        dimMap[shortNoReadOnly] = [dimension];\r\n      } else {\r\n        dimMap[shortNoReadOnly].push(dimension);\r\n      }\r\n    });\r\n\r\n    dimensions = dimensions.map(dimension => {\r\n      const shortDimension = dimension.slice(0, dimension.indexOf('-'));\r\n      const shortNoReadOnly = shortDimension.replace('~', '');\r\n\r\n      if (dimMap[shortNoReadOnly].length > 1) {\r\n        return dimension;\r\n      } else {\r\n        return shortDimension;\r\n      }\r\n    });\r\n\r\n    return dimensions;\r\n  }\r\n\r\n  private static calculateEditAndReadDimensions(dimensions: string[]) {\r\n    return {\r\n      editableDimensions: [] as string[],\r\n      readOnlyDimensions: dimensions.map(d => d.replace('~', '')),\r\n    };\r\n  }\r\n}\r\n","import { ItemAddIdentifier } from '../../../shared/models/edit-form.model';\r\nimport { EavItem } from '../models/eav';\r\n\r\nexport class ItemHelper {\r\n  static getContentTypeNameId(item: EavItem): string {\r\n    return item.Entity.Type?.Id\r\n      ?? (item.Header as ItemAddIdentifier).ContentTypeName;\r\n  }\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n  name: 'safeHtml',\r\n})\r\nexport class SafeHtmlPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(html: string) {\r\n    return this.sanitizer.bypassSecurityTrustHtml(html);\r\n  }\r\n}\r\n","/** https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f */\r\nexport function copyToClipboard(str: string) {\r\n  const el = document.createElement('textarea');  // Create a <textarea> element\r\n  el.value = str;                                 // Set its value to the string that you want copied\r\n  el.setAttribute('readonly', '');                // Make it readonly to be tamper-proof\r\n  el.style.position = 'absolute';\r\n  el.style.left = '-9999px';                      // Move outside the screen to make it invisible\r\n  document.body.appendChild(el);                  // Append the <textarea> element to the HTML document\r\n  const selected =\r\n    document.getSelection().rangeCount > 0        // Check if there is any content selected previously\r\n      ? document.getSelection().getRangeAt(0)     // Store selection if found\r\n      : false;                                    // Mark as false to know no selection existed before\r\n  el.select();                                    // Select the <textarea> content\r\n  document.execCommand('copy');                   // Copy - only works as a result of a user action (e.g. click events)\r\n  document.body.removeChild(el);                  // Remove the <textarea> element\r\n  if (selected) {                                 // If a selection existed before copying\r\n    document.getSelection().removeAllRanges();    // Unselect everything on the HTML document\r\n    document.getSelection().addRange(selected);   // Restore the original selection\r\n  }\r\n}\r\n","import { untracked } from '@angular/core';\r\nimport { FormulaCacheItem } from './cache/formula-cache.model';\r\nimport { FormulaDesignerService } from './designer/formula-designer.service';\r\nimport { FormulaPropsV1 } from './formula-run-one-helpers.factory';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { LoggingService, LogSeverities } from '../shared/services/logging.service';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\n\r\nexport class FormulaDeveloperHelper {\r\n\r\n  constructor(\r\n    private designerSvc: FormulaDesignerService,\r\n    private translate: TranslateService,\r\n    private logSvc: LoggingService,\r\n    private formula: FormulaCacheItem,\r\n    private ctTitle: string,\r\n    private formulaProps: FormulaPropsV1,\r\n  ) {\r\n    this.isOpen = this.#isDesignerOpen(formula);\r\n  }\r\n  \r\n  /** The designer is currently open, so we should show more information to the developer */\r\n  public isOpen: boolean = false;\r\n\r\n  showStart() {\r\n    if (!this.isOpen) return;\r\n    const f = this.formula;\r\n    console.log(`Running formula${f.version?.toLocaleUpperCase()} for Entity: \"${this.ctTitle}\", Field: \"${f.fieldName}\", Target: \"${f.target}\", arguments:`, this.formulaProps);\r\n  }\r\n\r\n  showResult(value: FieldValue, isError: boolean, isOnlyPromise: boolean) {\r\n    this.designerSvc.cache.cacheResults(this.formula, value, false, false);\r\n    if (this.isOpen)\r\n      console.log('Formula result:', value);\r\n  }\r\n\r\n  showError(error: unknown) {\r\n    const formula = this.formula;\r\n    const errorLabel = `Error in formula calculation for Entity: \"${this.ctTitle}\", Field: \"${formula.fieldName}\", Target: \"${formula.target}\"`;\r\n    this.designerSvc.cache.cacheResults(formula, undefined, true, false);\r\n    this.logSvc.addLog(LogSeverities.Error, errorLabel, error);\r\n    if (this.isOpen)\r\n      console.error(errorLabel, error);\r\n    else\r\n      this.logSvc.showMessage(this.translate.instant('Errors.FormulaCalculation'), 2000);\r\n  }\r\n\r\n  /**\r\n   * Used for checking if the currently running formula is open in designer.\r\n   * @param f\r\n   * @returns True if formula is open in designer, otherwise false\r\n   */\r\n  #isDesignerOpen(f: FormulaCacheItem): boolean {\r\n    return untracked(() => {\r\n      const ds = this.designerSvc.designerState();\r\n      const isOpenInDesigner = ds.isOpen && ds.entityGuid === f.entityGuid && ds.fieldName === f.fieldName && ds.target === f.target;\r\n      return isOpenInDesigner;\r\n    });\r\n  }\r\n}","import { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { EntityReader } from '../../shared/helpers';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\nimport { FormulaExecutionSpecsWithRunParams } from './formula-objects-internal-data';\r\nimport { FormulaContextEntityInfo, FormulaV1Experimental } from './formula-run-experimental.model';\r\n\r\nconst messageObsolete = 'A formula in this dialog is using an experimental feature: \"{0}\" - this will be removed soon.';\r\n\r\n/**\r\n * The object containing experimental information which can change at any time.\r\n * Usually given to a formula on the third parameter, but not officially documented.\r\n * eg v2((data, ctx, experimental) => { ... })\r\n */\r\nexport class FormulaExperimentalObject implements FormulaV1Experimental {\r\n  #specs: FormulaExecutionSpecsWithRunParams;\r\n  constructor(specs: FormulaExecutionSpecsWithRunParams) { \r\n    this.#specs = specs; \r\n  }\r\n\r\n  getEntities(): FormulaContextEntityInfo[] {\r\n    this.#showWarningObsolete('getEntities');\r\n    const v1Entities = this.#specs.itemService.getMany(this.#specs.formConfig.config.itemGuids).map(i => ({\r\n      guid: i.Entity.Guid,\r\n      id: i.Entity.Id,\r\n      type: {\r\n        guid: i.Entity.Type.Id,\r\n        name: i.Entity.Type.Name,\r\n      }\r\n    } satisfies FormulaContextEntityInfo));\r\n    return v1Entities;\r\n  }\r\n\r\n  getSettings(fieldName: string): FieldSettings {\r\n    this.#showWarningObsolete('getSettings');\r\n    return this.#specs.fieldsSettingsSvc.settings[fieldName]();\r\n  }\r\n\r\n  getValues(entityGuid: string): ItemValuesOfLanguage {\r\n    this.#showWarningObsolete('getValues');\r\n    const item = this.#specs.itemService.get(entityGuid);\r\n    const reader = new EntityReader(this.#specs.language);\r\n    return reader.currentValues(item.Entity.Attributes);\r\n  }\r\n\r\n  #showWarningObsolete(name: string) {\r\n    const msg = messageObsolete.replace('{0}', name);\r\n    console.error(msg);\r\n\r\n    if (this.#specs.warningsObsolete[name])\r\n      return;\r\n    this.#specs.warningsObsolete[name] = true;\r\n    alert(msg);\r\n  }\r\n}","import { Sxc } from '@2sic.com/2sxc-typings';\r\nimport { FormulaVersions } from '../formula-definitions';\r\nimport { FormulaExperimentalObject } from './formula-experimental-object';\r\nimport { FormulaExecutionSpecsWithRunParams } from './formula-objects-internal-data';\r\nimport { FormulaV1Context, FormulaV1CtxApp, FormulaV1CtxCulture, FormulaV1CtxFeatures, FormulaV1CtxForm, FormulaV1CtxTarget, FormulaV1CtxTargetEntity, FormulaV1CtxUser } from './formula-run-context.model';\r\nimport { FormulaContextEntityInfo } from './formula-run-experimental.model';\r\n\r\n/**\r\n * The object containing context information.\r\n * Usually given to a formula on the second parameter.\r\n * eg v2((data, CTX) => { ... })\r\n */\r\nexport class FormulaContextObject implements FormulaV1Context {\r\n\r\n  cache: Record<string, any>;\r\n  debug: boolean;\r\n  sxc: Sxc;\r\n  user: FormulaV1CtxUser;\r\n  app: FormulaV1CtxApp;\r\n  culture: FormulaV1CtxCulture;\r\n\r\n  /**\r\n   * new v18.01\r\n   */\r\n  entities: FormulaContextEntities;\r\n\r\n  features: FormulaV1CtxFeatures;\r\n  form: FormulaV1CtxForm;\r\n  target: FormulaV1CtxTarget;\r\n\r\n  xp: FormulaExperimentalObject;\r\n\r\n  constructor(specs: FormulaExecutionSpecsWithRunParams, experimental: FormulaExperimentalObject) {\r\n    const formula = specs.runParameters.formula;\r\n    this.cache = formula.cache;\r\n    this.debug = specs.debugEnabled;\r\n    this.sxc = formula.sxc;\r\n    this.user = formula.user;\r\n\r\n    // Build the App, but don't include the getSetting method which would be an empty method\r\n    const { getSetting, ...partialApp } = specs.runParameters.formula.app;\r\n    this.app = Object.assign(new FormulaContextApp(specs), partialApp);\r\n\r\n    this.target = new FormulaContextTarget(specs);\r\n\r\n    const language = specs.language;\r\n    const languages = specs.languages\r\n    this.culture = {\r\n      code: language.current,\r\n      name: languages.find(l => l.NameId === language.current)?.Culture,\r\n    };\r\n\r\n    this.features = new FormulaContextFeatures(specs);\r\n\r\n    this.form = new FormulaContextForm(specs);\r\n\r\n    this.entities = new FormulaContextEntities(specs);\r\n\r\n    this.xp = experimental;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * new v18.01\r\n */\r\nclass FormulaContextEntities {\r\n  #specs: FormulaExecutionSpecsWithRunParams\r\n  constructor(specs: FormulaExecutionSpecsWithRunParams) {\r\n    this.#specs = specs;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns All entities in the context\r\n   * new v18.01\r\n   */\r\n  getAll() {\r\n    const v1Entities = this.#specs.itemService.getMany(this.#specs.formConfig.config.itemGuids).map(i => ({\r\n      guid: i.Entity.Guid,\r\n      id: i.Entity.Id,\r\n      type: {\r\n        guid: i.Entity.Type.Id,\r\n        name: i.Entity.Type.Name,\r\n      }\r\n    } satisfies FormulaContextEntityInfo));\r\n    return v1Entities;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param guidOrName \r\n   * @returns The first entity in the context which matches the guid or name\r\n   * new v18.01\r\n   */\r\n  getOfType(guidOrName: string) {\r\n    return this.getAll().find(a => a.type.guid == guidOrName || a.type.name == guidOrName);\r\n  }\r\n}\r\n\r\nclass FormulaContextFeatures implements FormulaV1CtxFeatures {\r\n  #specs: FormulaExecutionSpecsWithRunParams;\r\n  constructor(specs: FormulaExecutionSpecsWithRunParams) {\r\n    this.#specs = specs;\r\n  }\r\n\r\n  isEnabled(name: string): boolean {\r\n    return this.#specs.features().find(f => f.nameId === name)?.isEnabled ?? false;\r\n  }\r\n}\r\n\r\nclass FormulaContextForm implements FormulaV1CtxForm {\r\n  #specs: FormulaExecutionSpecsWithRunParams;\r\n\r\n  constructor(specs: FormulaExecutionSpecsWithRunParams) {\r\n    this.#specs = specs;\r\n  }\r\n\r\n  runFormulas(): void {\r\n    // Pre v20 (2025-04-22)\r\n    // const formula = this.#specs.runParameters.formula;\r\n    // if (formula.version === FormulaVersions.V1) {\r\n    //   console.error('form.runFormulas() is being deprecated and will stop working end of 2024. Use V2 formulas and return the promise. Formulas will auto-run when it completes.');\r\n    //   this.#specs.fieldsSettingsSvc.retriggerFormulas('form.runFormulas()');\r\n    //   return;\r\n    // }\r\n    \r\n    // console.error('form.runFormulas() is not supported in V2 formulas. Just return a promise.');\r\n\r\n    // New v20 - to be removed completely ca. EOY 2025\r\n    console.error('A formula uses form.runFormulas(). This is deprecated since v18.. It is now disabled. Change formula to V2 and return a promise to achieve the same effect.');\r\n  }\r\n}\r\n\r\n/**\r\n * The object containing app context information.\r\n * Usually on the context.app property.\r\n * \r\n * Note that most properties are assigned to this object from outside, which is why we don't initialize them.\r\n * This is because they are created once, and don't need to be re-created for each formula run.\r\n */\r\nclass FormulaContextApp implements FormulaV1CtxApp {\r\n  /** Private variable containing the data used in the getters */\r\n  #propsData: FormulaExecutionSpecsWithRunParams;\r\n\r\n  constructor(propsData: FormulaExecutionSpecsWithRunParams) {\r\n    this.#propsData = propsData;\r\n  }\r\n\r\n  appId: number;\r\n  zoneId: number;\r\n  isGlobal: boolean;\r\n  isSite: boolean;\r\n  isContent: boolean;\r\n  getSetting(settingPath: string) {\r\n    if (this.#propsData.runParameters.formula.version === FormulaVersions.V1) {\r\n      console.warn('app.getSetting() is not available in v1 formulas, please use v2.');\r\n      return ' error - see console';\r\n    }\r\n\r\n    const result = this.#propsData.formConfig.config.settings.Values[settingPath];\r\n    if (result != null)\r\n      return result;\r\n    console.warn(`Error: Setting '${settingPath}' not found. Did you configure it in the ContentType to be included? ` +\r\n      `See https://go.2sxc.org/formulas`);\r\n    return ' error - see console';\r\n  }\r\n}\r\n\r\n/**\r\n * The object containing formula target information.\r\n * So it says what the formula is for, which entity, field, setting/value etc.\r\n * Usually on the context.target property.\r\n */\r\nclass FormulaContextTarget implements FormulaV1CtxTarget {\r\n\r\n  entity: FormulaV1CtxTargetEntity;\r\n  name: string;\r\n  type: string;\r\n\r\n  /** Private variable containing the data used in the getters */\r\n  #propsData: FormulaExecutionSpecsWithRunParams;\r\n\r\n  constructor(propsData: FormulaExecutionSpecsWithRunParams) {\r\n    this.#propsData = propsData;\r\n    const def = propsData.runParameters.formula;\r\n    this.entity = def.targetEntity;\r\n\r\n    // Name and type are truncated from the original target string if it's a setting\r\n    const isValueOrValidation = def.isValue || def.isValidation;\r\n    this.name = isValueOrValidation\r\n      ? def.fieldName\r\n      : def.target.substring(def.target.lastIndexOf('.') + 1);\r\n    this.type = isValueOrValidation\r\n      ? def.target\r\n      : def.target.substring(0, def.target.lastIndexOf('.'))\r\n  }\r\n\r\n}","import { FormulaFieldValidation } from '../targets/formula-targets';\r\nimport { FormulaV1Data } from './formula-run-data.model';\r\nimport { FormulaExecutionSpecsWithRunParams, FormulaRunParameters, FormulaRunPickers } from './formula-objects-internal-data';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { PickerItem } from '../../fields/picker/models/picker-item.model';\r\nimport { StateUiMapperBase } from '../../fields/picker/adapters/state-ui-mapper-base';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\n\r\n/**\r\n * The object containing data information.\r\n * Usually given to a formula on the first parameter.\r\n * eg v2((DATA, ctx) => { ... })\r\n */\r\nexport class FormulaDataObject implements FormulaV1Data {\r\n  /** Private variable containing the data used in the getters */\r\n  #propsData: FormulaExecutionSpecsWithRunParams;\r\n  #params: FormulaRunParameters;\r\n  #valueMapper: StateUiMapperBase;\r\n  #picker: FormulaRunPickers;\r\n\r\n  constructor(propsData: FormulaExecutionSpecsWithRunParams) {\r\n    this.#propsData = propsData;\r\n    this.#params = propsData.runParameters;\r\n    this.#picker = this.#params.pickerHelper.infos;\r\n    this.#valueMapper = this.#params.pickerHelper.infos.mapper;\r\n  }\r\n\r\n  get default(): FieldValue {\r\n    const { formula } = this.#params;\r\n    if (formula.isValue)\r\n      return this.#value(this.#params.defaultValueHelper().getDefaultOrPrefillValue());\r\n\r\n    if (formula.isSetting)\r\n      return (this.#params.settingsInitial)[formula.settingName as keyof FieldSettings] as FieldValue;\r\n\r\n    if (formula.isNewPicker)\r\n      return this.#picker.options.list as unknown as FieldValue;\r\n  }\r\n\r\n  get initial(): FieldValue {\r\n    const formula = this.#params.formula;\r\n    return formula.isValue\r\n      ? this.#value(this.#propsData.initialFormValues[formula.fieldName])\r\n      : null;\r\n  }\r\n\r\n  get parameters(): Record<string, any> {\r\n    return this.#propsData.parameters.all();\r\n  }\r\n\r\n  get prefill(): FieldValue {\r\n    const { formula } = this.#params;\r\n    return formula.isValue\r\n      ? this.#value(this.#params.defaultValueHelper().getDefaultOrPrefillValue(true))\r\n      : null;\r\n  }\r\n\r\n  get value(): FieldValue | FormulaFieldValidation {\r\n    const formula = this.#params.formula;\r\n\r\n    if (formula.isValue)\r\n      return this.#value(this.#params.currentValues[formula.fieldName]);\r\n\r\n    if (formula.isSetting)\r\n      return (this.#params.settingsCurrent)[formula.settingName as keyof FieldSettings] as FieldValue;\r\n\r\n    if (formula.isValidation)\r\n      return {\r\n        severity: '',\r\n        message: '',\r\n      } satisfies FormulaFieldValidation;\r\n  }\r\n\r\n  /** Get the selected data - make sure it's a copy of each item, so changes don't affect the source! */\r\n  get selected(): PickerItem[] { return this.#getSelected('list'); }\r\n\r\n  get selectedRaw(): PickerItem[] { return this.#getSelected('listRaw'); }\r\n\r\n  #getSelected(part: 'list' | 'listRaw') {\r\n    const list = this.#picker.selected[part];\r\n    return this.#picker.picker.selectedCopy(list);\r\n  }\r\n\r\n  get options(): PickerItem[] {\r\n    return this.#getOptions('list');\r\n  }\r\n\r\n  get optionsRaw(): PickerItem[] {\r\n    return this.#getOptions('listRaw');\r\n  }\r\n\r\n  #getOptions(part: 'list' | 'listRaw') {\r\n    // TODO: create copy!\r\n    const list = this.#picker.options[part];\r\n    return list;\r\n  }\r\n\r\n\r\n  #value(raw: FieldValue): FieldValue {\r\n    return this.#valueMapper?.toUi(raw) ?? raw;\r\n  }\r\n}\r\n","\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { EavContentType } from '../shared/models/eav';\r\nimport { LoggingService } from '../shared/services/logging.service';\r\nimport { FormulaDesignerService } from './designer/formula-designer.service';\r\nimport { FormulaVersions } from './formula-definitions';\r\nimport { FormulaDeveloperHelper } from './formula-developer-helper';\r\nimport { FormulaValueCorrections } from './results/formula-value-corrections.helper';\r\nimport { FormulaExperimentalObject } from './run/formula-experimental-object';\r\nimport { FormulaExecutionSpecsWithRunParams } from './run/formula-objects-internal-data';\r\nimport { FormulaContextObject } from './run/formula-run-context';\r\nimport { FormulaV1Context } from './run/formula-run-context.model';\r\nimport { FormulaDataObject } from './run/formula-run-data';\r\nimport { FormulaV1Data } from './run/formula-run-data.model';\r\n\r\n/**\r\n * Helper to run a single formula.\r\n * Will be initialized for each field as it's about to run all, and can then provide\r\n * helper objects and build the formula props (data/context/experimental).\r\n */\r\nexport class FormulaRunOneHelpersFactory {\r\n\r\n  constructor(\r\n    private designerSvc: FormulaDesignerService,\r\n    private translate: TranslateService,\r\n    private logSvc: LoggingService,\r\n    private contentType: EavContentType,\r\n    private entityGuid: string,\r\n    public ctTitle: string,\r\n  ) { }\r\n\r\n  public getPartsFor(execSpecs: FormulaExecutionSpecsWithRunParams) {\r\n    const f = execSpecs.runParameters.formula;\r\n    const params = this.#dataAndCtx(execSpecs);\r\n    const devHelper = new FormulaDeveloperHelper(this.designerSvc, this.translate, this.logSvc, f, this.ctTitle, params);\r\n    const valueMapper = execSpecs.runParameters.pickerHelper.infos.mapper;\r\n\r\n    return {\r\n      formula: f,\r\n      fieldName: f.fieldName,\r\n      params,\r\n      title: this.ctTitle,\r\n      devHelper,\r\n      valHelper: new FormulaValueCorrections(this.contentType, this.entityGuid, f.fieldName, f.isValue, f.inputType, devHelper.isOpen, valueMapper),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Used to build formula props parameters.\r\n   * @returns Formula properties\r\n   */\r\n  #dataAndCtx(runParams: FormulaExecutionSpecsWithRunParams,): FormulaPropsV1 {\r\n    const { formula, currentValues: formValues } = runParams.runParameters;\r\n    \r\n    switch (formula.version) {\r\n      case FormulaVersions.V1:\r\n      case FormulaVersions.V2:\r\n\r\n        // Create the data object and add all value properties of the form to it\r\n        const data = Object.assign(new FormulaDataObject(runParams), formValues);\r\n\r\n        const experimental = new FormulaExperimentalObject(runParams);\r\n\r\n        const context = new FormulaContextObject(runParams, experimental);\r\n\r\n        return {\r\n          data,\r\n          context,\r\n          // 2025-04-22 #DropFormulaParamExperimental - remove this comment and warnings ca. 2026-Q2\r\n          // experimental,\r\n        } satisfies FormulaPropsV1;\r\n\r\n      default:\r\n        // default should never happen, so don't return any data to use; will probably error if this happens\r\n        throw new Error(`Formula version '${formula.version}' unknown not supported`);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Used to build the formula props parameters as a record of key-value pairs.\r\n * @param prefillAsParameters\r\n * @returns\r\n */\r\nexport class FormulaPropsParameters {\r\n  constructor(private prefill: Record<string, unknown>) { }\r\n\r\n  all(): Record<string, any> {\r\n    if (!this.#cache)\r\n      this.#cache = this.prefill ? JSON.parse(JSON.stringify(this.prefill)) : {};\r\n    return this.#cache;\r\n  }\r\n  #cache: Record<string, any>;\r\n}\r\n\r\n\r\n\r\nexport interface FormulaPropsV1 {\r\n  data: FormulaV1Data;\r\n  context: FormulaV1Context;\r\n  // 2025-04-22 #DropFormulaParamExperimental - remove this comment and warnings ca. 2026-Q2\r\n  // experimental: FormulaV1Experimental;\r\n}\r\n","import { EmptyDefault } from 'projects/edit-types/src/FieldSettings-EmptyDefault';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeHelpers } from '../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../shared/logging';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldSettingsHelpersManager } from '../fields/logic/field-settings-helpers-manager';\r\nimport { TranslateMenuHelpers } from '../fields/wrappers/localization/translate-menu/translate-menu.helpers';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { TranslationState, TranslationStateCore } from '../localization/translate-state.model';\r\nimport { TranslationLinks } from '../localization/translation-link.constants';\r\nimport { EavContentType, EavContentTypeAttribute, EavField } from '../shared/models/eav';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  mergeGenericSettings: true,\r\n  getDefaultSettings: false,\r\n  fields: [...DebugFields, 'GroupPreview'],\r\n};\r\n\r\n/**\r\n * Helper to figure out / initialize field settings.\r\n * \r\n * It is, and must be, stateless.\r\n */\r\nexport class FieldsSettingsHelpers {\r\n\r\n  // TODO: conditionally create logger based on source name\r\n  log = classLog({FieldsSettingsHelpers}, logSpecs);\r\n\r\n  constructor(source: string) { }\r\n\r\n  /**\r\n   * Special feature in 18.02\r\n   * Generic settings are metadata which contain a JSON to basically set anything for which there is no Content-Type metadata.\r\n   * @param settings \r\n   * @param genericSettings \r\n   */\r\n  mergeGenericSettings(fieldName: string, settings: FieldSettings): FieldSettings {\r\n    const l = this.log.fnIfInFields('mergeGenericSettings', fieldName, { fieldName, settings });\r\n    const asWithGenericSettings = settings as unknown as { SettingsGeneric: string };\r\n    if (asWithGenericSettings.SettingsGeneric == null)\r\n      return l.r(settings, 'No generic settings');\r\n\r\n    try {\r\n      const genericSettings = JSON.parse(asWithGenericSettings.SettingsGeneric);\r\n      return l.r({ ...settings, ...genericSettings }, 'Merged generic settings');\r\n    } catch (error) {\r\n      console.error('mergeGenericSettings', error);\r\n      return l.r(settings, 'Error parsing generic settings');\r\n    }\r\n  }\r\n\r\n  getDefaultSettings(settings: FieldSettings): FieldSettings {\r\n    const defSettings = AllDeprecated.moveDeprecatedSettings({ ...settings }) as FieldSettings & EmptyDefault;\r\n    // update @All settings\r\n    defSettings.Name ??= '';\r\n    defSettings.Placeholder ??= '';\r\n    defSettings.Notes ??= '';\r\n    defSettings.Required ??= false;\r\n    defSettings.Disabled ??= false;\r\n    defSettings.DisableTranslation ??= false;\r\n    defSettings.Visible ??= true;\r\n    if (defSettings.DefaultCollapsed != null) {\r\n      defSettings.Collapsed = defSettings.DefaultCollapsed;\r\n      delete defSettings.DefaultCollapsed;\r\n    }\r\n    defSettings.Formulas ??= [];\r\n    let logic = FieldSettingsHelpersManager.singleton().get(settings.InputType);\r\n    defSettings.DisableAutoTranslation ??= !logic?.canAutoTranslate;\r\n    return defSettings;\r\n  }\r\n\r\n  isLastInGroup(contentType: EavContentType, attribute: EavContentTypeAttribute): boolean {\r\n    const index = contentType.Attributes.indexOf(attribute);\r\n    if (contentType.Attributes[index + 1] == null) return true;\r\n\r\n    const indexOfFirstEmpty = contentType.Attributes.findIndex(a => InputTypeHelpers.isGroupStart(a.InputType));\r\n    if (index < indexOfFirstEmpty) return false;\r\n\r\n    if (InputTypeHelpers.isGroupEnd(attribute.InputType)) return true;\r\n\r\n    if (InputTypeHelpers.endsPreviousGroup(contentType.Attributes[index + 1].InputType)) return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  getDisabledBecauseTranslations(\r\n    attributeValues: EavField<any>,\r\n    disableTranslation: boolean,\r\n    language: FormLanguage\r\n  ): boolean {\r\n    const fieldReader = new FieldReader(attributeValues, language);\r\n    if (language.current === language.primary) return false;\r\n    if (!fieldReader.hasPrimary) return true;\r\n    if (disableTranslation) return true;\r\n    if (fieldReader.hasEditableValues) return false;\r\n    if (fieldReader.hasCurrentReadonly) return true;\r\n    return true;\r\n  }\r\n\r\n  getTranslationState(attributeValues: EavField<any>, disableTranslation: boolean, language: FormLanguage, debug: boolean): TranslationState {\r\n    if (debug)\r\n      this.log.fn('getTranslationState', { attributeValues, disableTranslation, language });\r\n\r\n    let infoLabel: string;\r\n    let infoMessage: string;\r\n\r\n    const fieldReader = new FieldReader(attributeValues, language);\r\n\r\n    if (disableTranslation) {\r\n      infoLabel = 'LangMenu.InAllLanguages';\r\n      infoMessage = '';\r\n    } else if (!fieldReader.hasPrimary) {\r\n      infoLabel = 'LangMenu.MissingDefaultLangValue';\r\n      infoMessage = language.primary;\r\n    } else {\r\n      const hasEditable = fieldReader.hasEditableValues;\r\n      const hasReadonly = fieldReader.hasCurrentReadonly;\r\n\r\n      if (hasEditable || hasReadonly) {\r\n        const dimensions = fieldReader.current\r\n          .dimensions.map(dimension => dimension.dimCode)\r\n          .filter(dimension => !dimension.includes(language.current));\r\n\r\n        const isShared = dimensions.length > 0;\r\n        if (isShared) {\r\n          if (hasEditable)\r\n            infoLabel = 'LangMenu.In';\r\n          else if (hasReadonly)\r\n            infoLabel = 'LangMenu.From';\r\n\r\n          infoMessage = TranslateMenuHelpers.calculateSharedInfoMessage(dimensions, language.current);\r\n        } else {\r\n          infoLabel = '';\r\n          infoMessage = '';\r\n        }\r\n      } else {\r\n        infoLabel = 'LangMenu.UseDefault';\r\n        infoMessage = '';\r\n      }\r\n    }\r\n    const state = this.#getTranslationStateCore(attributeValues, disableTranslation, language);\r\n    const translationState: TranslationState = {\r\n      infoLabel,\r\n      infoMessage,\r\n      language: state.language,\r\n      linkType: state.linkType,\r\n    };\r\n    return translationState;\r\n  }\r\n\r\n  #getTranslationStateCore(\r\n    attributeValues: EavField<any>,\r\n    disableTranslation: boolean,\r\n    language: FormLanguage\r\n  ): TranslationStateCore {\r\n    const fieldReader = new FieldReader(attributeValues, language);\r\n    // Determine is control disabled or enabled and info message\r\n    if (!fieldReader.hasPrimary)\r\n      return { language: '', linkType: TranslationLinks.MissingDefaultLangValue };\r\n\r\n    if (disableTranslation)\r\n      return { language: '', linkType: TranslationLinks.DontTranslate };\r\n\r\n    if (fieldReader.hasEditableValues) {\r\n      const editableElements = fieldReader.current\r\n        .dimensions.filter(d => d.dimCode !== language.current);\r\n\r\n      return (editableElements.length > 0)\r\n        ? { language: editableElements[0].dimCode, linkType: TranslationLinks.LinkReadWrite }\r\n        : { language: '', linkType: TranslationLinks.Translate };\r\n    }\r\n\r\n    if (fieldReader.hasCurrentReadonly) {\r\n      const readOnlyElements = fieldReader.current\r\n        .dimensions.filter(d => d.dimCode !== language.current);\r\n\r\n      return { language: readOnlyElements[0].dimCode, linkType: TranslationLinks.LinkReadOnly, };\r\n    }\r\n\r\n    return { language: '', linkType: TranslationLinks.DontTranslate, };\r\n  }\r\n}\r\nclass AllDeprecated {\r\n  /** @deprecated */\r\n  VisibleInEditUI: boolean;\r\n  /** VisibleInEditUi is copied Visible and then deleted */\r\n  static moveDeprecatedSettings(settings: FieldSettings): FieldSettings {\r\n    var asDeprecated = settings as unknown as AllDeprecated;\r\n    if (asDeprecated.VisibleInEditUI == null) return settings;\r\n    settings.Visible = asDeprecated.VisibleInEditUI;\r\n    delete asDeprecated.VisibleInEditUI;\r\n    return settings;\r\n  }\r\n}\r\n","import { Injectable, signal, WritableSignal } from '@angular/core';\r\nimport { classLog } from '../logging';\r\nimport { StateManagerLocal, StateManagerSession } from './state-manager';\r\n\r\nconst storeKey = 'user-settings';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UserPreferences {\r\n\r\n  log = classLog({UserPreferences});\r\n\r\n  constructor() {\r\n    this.log.fn('constructor');\r\n  }\r\n\r\n  get local() { return this.#local ??= new StateManagerLocal(storeKey); }\r\n  #local: StateManagerLocal;\r\n\r\n  get session() { return this.#session ??= new StateManagerSession(storeKey); }\r\n  #session: StateManagerSession;\r\n\r\n  get<T>(key: string, longTerm = false): T {\r\n    return (longTerm ? this.local : this.session).get(key);\r\n  }\r\n\r\n  set<T>(key: string, value: T, longTerm = false) {\r\n    (longTerm ? this.local : this.session).add(key, value);\r\n  }\r\n\r\n  part<T extends Record<string, unknown>>({ key, data }: { key: string; data: T; }): UserPreferencesPart<T> {\r\n    return this.#getPart(key, data, true);\r\n  }\r\n\r\n  #getPart<T extends Record<string, unknown>>(key: string, data: T, longTerm = false): UserPreferencesPart<T> {\r\n    if (this.#partCache[key]) return this.#partCache[key] as unknown as UserPreferencesPart<T>;\r\n    const created = new UserPreferencesPart(this, key, data, longTerm);\r\n    this.#partCache[key] = created;\r\n    return created as unknown as UserPreferencesPart<T>;\r\n  }\r\n  #partCache: Record<string, UserPreferencesPart<Record<string, unknown>>> = {};\r\n}\r\n\r\nclass UserPreferencesPart<T extends Record<string, unknown>> {\r\n\r\n  log = classLog({UserPreferencesPart});\r\n  \r\n  constructor(private userSettings: UserPreferences, private storeKey: string, data: T, private longTerm = false) {\r\n    const merged = { ...data, ...userSettings.get<T>(storeKey, longTerm) };\r\n    this.log.fn('constructor', merged);\r\n    this.#data = signal<T>(merged);\r\n  }\r\n  #data: WritableSignal<T>;\r\n\r\n  get snapshot() { return this.#data(); }\r\n\r\n  get data() { return this.#data.asReadonly(); }\r\n\r\n  get<K extends keyof T>(key: K): T[K] {\r\n    return this.#data()[key];\r\n  }\r\n\r\n  set<K extends keyof T>(key: K, value: T[K]) {\r\n    this.#data.update(data => ({ ...data, [key]: value }));\r\n    this.#save();\r\n  }\r\n\r\n  toggle<K extends keyof T>(key: K) {\r\n    this.#data.update(data => ({ ...data, [key]: !data[key] }));\r\n    this.#save();\r\n  }\r\n\r\n  setAll(data: T) {\r\n    this.#data.set(data);\r\n    this.#save();\r\n  }\r\n\r\n  setMany(data: Partial<T>) {\r\n    this.#data.update(old => ({ ...old, ...data }));\r\n    this.#save();\r\n  }\r\n\r\n  #save() {\r\n    const data = this.#data();\r\n    this.log.fn('save', data);\r\n    this.userSettings.set(this.storeKey, this.#data(), this.longTerm);\r\n  }\r\n}","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn /******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 3099:\n/***/ (function(module) {\n\nmodule.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n\n\n/***/ }),\n\n/***/ 6077:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(111);\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n\n\n/***/ }),\n\n/***/ 1223:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar wellKnownSymbol = __webpack_require__(5112);\nvar create = __webpack_require__(30);\nvar definePropertyModule = __webpack_require__(3070);\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n\n\n/***/ }),\n\n/***/ 1530:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar charAt = __webpack_require__(8710).charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.es/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n\n\n/***/ }),\n\n/***/ 5787:\n/***/ (function(module) {\n\nmodule.exports = function (it, Constructor, name) {\n  if (!(it instanceof Constructor)) {\n    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');\n  } return it;\n};\n\n\n/***/ }),\n\n/***/ 9670:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(111);\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n\n\n/***/ }),\n\n/***/ 4019:\n/***/ (function(module) {\n\nmodule.exports = typeof ArrayBuffer !== 'undefined' && typeof DataView !== 'undefined';\n\n\n/***/ }),\n\n/***/ 260:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar NATIVE_ARRAY_BUFFER = __webpack_require__(4019);\nvar DESCRIPTORS = __webpack_require__(9781);\nvar global = __webpack_require__(7854);\nvar isObject = __webpack_require__(111);\nvar has = __webpack_require__(6656);\nvar classof = __webpack_require__(648);\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar redefine = __webpack_require__(1320);\nvar defineProperty = __webpack_require__(3070).f;\nvar getPrototypeOf = __webpack_require__(9518);\nvar setPrototypeOf = __webpack_require__(7674);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar uid = __webpack_require__(9711);\n\nvar Int8Array = global.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = global.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar isPrototypeOf = ObjectPrototype.isPrototypeOf;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQIRED = false;\nvar NAME;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || has(TypedArrayConstructorsList, klass)\n    || has(BigIntArrayConstructorsList, klass);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return has(TypedArrayConstructorsList, klass)\n    || has(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (setPrototypeOf) {\n    if (isPrototypeOf.call(TypedArray, C)) return C;\n  } else for (var ARRAY in TypedArrayConstructorsList) if (has(TypedArrayConstructorsList, NAME)) {\n    var TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && (C === TypedArrayConstructor || isPrototypeOf.call(TypedArrayConstructor, C))) {\n      return C;\n    }\n  } throw TypeError('Target is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && has(TypedArrayConstructor.prototype, KEY)) {\n      delete TypedArrayConstructor.prototype[KEY];\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    redefine(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = global[ARRAY];\n      if (TypedArrayConstructor && has(TypedArrayConstructor, KEY)) {\n        delete TypedArrayConstructor[KEY];\n      }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return redefine(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && Int8Array[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      redefine(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  if (!global[NAME]) NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || typeof TypedArray != 'function' || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !has(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQIRED = true;\n  defineProperty(TypedArrayPrototype, TO_STRING_TAG, { get: function () {\n    return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n  } });\n  for (NAME in TypedArrayConstructorsList) if (global[NAME]) {\n    createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n\n\n/***/ }),\n\n/***/ 3331:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar global = __webpack_require__(7854);\nvar DESCRIPTORS = __webpack_require__(9781);\nvar NATIVE_ARRAY_BUFFER = __webpack_require__(4019);\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar redefineAll = __webpack_require__(2248);\nvar fails = __webpack_require__(7293);\nvar anInstance = __webpack_require__(5787);\nvar toInteger = __webpack_require__(9958);\nvar toLength = __webpack_require__(7466);\nvar toIndex = __webpack_require__(7067);\nvar IEEE754 = __webpack_require__(1179);\nvar getPrototypeOf = __webpack_require__(9518);\nvar setPrototypeOf = __webpack_require__(7674);\nvar getOwnPropertyNames = __webpack_require__(8006).f;\nvar defineProperty = __webpack_require__(3070).f;\nvar arrayFill = __webpack_require__(1285);\nvar setToStringTag = __webpack_require__(8003);\nvar InternalStateModule = __webpack_require__(9909);\n\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length';\nvar WRONG_INDEX = 'Wrong index';\nvar NativeArrayBuffer = global[ARRAY_BUFFER];\nvar $ArrayBuffer = NativeArrayBuffer;\nvar $DataView = global[DATA_VIEW];\nvar $DataViewPrototype = $DataView && $DataView[PROTOTYPE];\nvar ObjectPrototype = Object.prototype;\nvar RangeError = global.RangeError;\n\nvar packIEEE754 = IEEE754.pack;\nvar unpackIEEE754 = IEEE754.unpack;\n\nvar packInt8 = function (number) {\n  return [number & 0xFF];\n};\n\nvar packInt16 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF];\n};\n\nvar packInt32 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF, number >> 16 & 0xFF, number >> 24 & 0xFF];\n};\n\nvar unpackInt32 = function (buffer) {\n  return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];\n};\n\nvar packFloat32 = function (number) {\n  return packIEEE754(number, 23, 4);\n};\n\nvar packFloat64 = function (number) {\n  return packIEEE754(number, 52, 8);\n};\n\nvar addGetter = function (Constructor, key) {\n  defineProperty(Constructor[PROTOTYPE], key, { get: function () { return getInternalState(this)[key]; } });\n};\n\nvar get = function (view, count, index, isLittleEndian) {\n  var intIndex = toIndex(index);\n  var store = getInternalState(view);\n  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);\n  var bytes = getInternalState(store.buffer).bytes;\n  var start = intIndex + store.byteOffset;\n  var pack = bytes.slice(start, start + count);\n  return isLittleEndian ? pack : pack.reverse();\n};\n\nvar set = function (view, count, index, conversion, value, isLittleEndian) {\n  var intIndex = toIndex(index);\n  var store = getInternalState(view);\n  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);\n  var bytes = getInternalState(store.buffer).bytes;\n  var start = intIndex + store.byteOffset;\n  var pack = conversion(+value);\n  for (var i = 0; i < count; i++) bytes[start + i] = pack[isLittleEndian ? i : count - i - 1];\n};\n\nif (!NATIVE_ARRAY_BUFFER) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    setInternalState(this, {\n      bytes: arrayFill.call(new Array(byteLength), 0),\n      byteLength: byteLength\n    });\n    if (!DESCRIPTORS) this.byteLength = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = getInternalState(buffer).byteLength;\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    setInternalState(this, {\n      buffer: buffer,\n      byteLength: byteLength,\n      byteOffset: offset\n    });\n    if (!DESCRIPTORS) {\n      this.buffer = buffer;\n      this.byteLength = byteLength;\n      this.byteOffset = offset;\n    }\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, 'byteLength');\n    addGetter($DataView, 'buffer');\n    addGetter($DataView, 'byteLength');\n    addGetter($DataView, 'byteOffset');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined)) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 23);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 52);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : undefined);\n    }\n  });\n} else {\n  /* eslint-disable no-new -- required for testing */\n  if (!fails(function () {\n    NativeArrayBuffer(1);\n  }) || !fails(function () {\n    new NativeArrayBuffer(-1);\n  }) || fails(function () {\n    new NativeArrayBuffer();\n    new NativeArrayBuffer(1.5);\n    new NativeArrayBuffer(NaN);\n    return NativeArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n  /* eslint-enable no-new -- required for testing */\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new NativeArrayBuffer(toIndex(length));\n    };\n    var ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE] = NativeArrayBuffer[PROTOTYPE];\n    for (var keys = getOwnPropertyNames(NativeArrayBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) {\n        createNonEnumerableProperty($ArrayBuffer, key, NativeArrayBuffer[key]);\n      }\n    }\n    ArrayBufferPrototype.constructor = $ArrayBuffer;\n  }\n\n  // WebKit bug - the same parent prototype for typed arrays and data view\n  if (setPrototypeOf && getPrototypeOf($DataViewPrototype) !== ObjectPrototype) {\n    setPrototypeOf($DataViewPrototype, ObjectPrototype);\n  }\n\n  // iOS Safari 7.x bug\n  var testView = new $DataView(new $ArrayBuffer(2));\n  var nativeSetInt8 = $DataViewPrototype.setInt8;\n  testView.setInt8(0, 2147483648);\n  testView.setInt8(1, 2147483649);\n  if (testView.getInt8(0) || !testView.getInt8(1)) redefineAll($DataViewPrototype, {\n    setInt8: function setInt8(byteOffset, value) {\n      nativeSetInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      nativeSetInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, { unsafe: true });\n}\n\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\n\nmodule.exports = {\n  ArrayBuffer: $ArrayBuffer,\n  DataView: $DataView\n};\n\n\n/***/ }),\n\n/***/ 1048:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar toObject = __webpack_require__(7908);\nvar toAbsoluteIndex = __webpack_require__(1400);\nvar toLength = __webpack_require__(7466);\n\nvar min = Math.min;\n\n// `Array.prototype.copyWithin` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.copywithin\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n\n\n/***/ }),\n\n/***/ 1285:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar toObject = __webpack_require__(7908);\nvar toAbsoluteIndex = __webpack_require__(1400);\nvar toLength = __webpack_require__(7466);\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n\n\n/***/ }),\n\n/***/ 8533:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $forEach = __webpack_require__(2092).forEach;\nvar arrayMethodIsStrict = __webpack_require__(9341);\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n\n\n/***/ }),\n\n/***/ 8457:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar bind = __webpack_require__(9974);\nvar toObject = __webpack_require__(7908);\nvar callWithSafeIterationClosing = __webpack_require__(3411);\nvar isArrayIteratorMethod = __webpack_require__(7659);\nvar toLength = __webpack_require__(7466);\nvar createProperty = __webpack_require__(6135);\nvar getIteratorMethod = __webpack_require__(1246);\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 1318:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toIndexedObject = __webpack_require__(5656);\nvar toLength = __webpack_require__(7466);\nvar toAbsoluteIndex = __webpack_require__(1400);\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n\n\n/***/ }),\n\n/***/ 2092:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar bind = __webpack_require__(9974);\nvar IndexedObject = __webpack_require__(8361);\nvar toObject = __webpack_require__(7908);\nvar toLength = __webpack_require__(7466);\nvar arraySpeciesCreate = __webpack_require__(5417);\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_OUT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterOut\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterOut` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterOut: createMethod(7)\n};\n\n\n/***/ }),\n\n/***/ 6583:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar toIndexedObject = __webpack_require__(5656);\nvar toInteger = __webpack_require__(9958);\nvar toLength = __webpack_require__(7466);\nvar arrayMethodIsStrict = __webpack_require__(9341);\n\nvar min = Math.min;\nvar nativeLastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : nativeLastIndexOf;\n\n\n/***/ }),\n\n/***/ 1194:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar fails = __webpack_require__(7293);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar V8_VERSION = __webpack_require__(7392);\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n\n\n/***/ }),\n\n/***/ 9341:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar fails = __webpack_require__(7293);\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n\n\n/***/ }),\n\n/***/ 3671:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar aFunction = __webpack_require__(3099);\nvar toObject = __webpack_require__(7908);\nvar IndexedObject = __webpack_require__(8361);\nvar toLength = __webpack_require__(7466);\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n\n\n/***/ }),\n\n/***/ 5417:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(111);\nvar isArray = __webpack_require__(3157);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n\n\n/***/ }),\n\n/***/ 3411:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(9670);\nvar iteratorClose = __webpack_require__(9212);\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    iteratorClose(iterator);\n    throw error;\n  }\n};\n\n\n/***/ }),\n\n/***/ 7072:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n\n\n/***/ }),\n\n/***/ 4326:\n/***/ (function(module) {\n\nvar toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n/***/ }),\n\n/***/ 648:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(1694);\nvar classofRaw = __webpack_require__(4326);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n\n\n/***/ }),\n\n/***/ 9920:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar has = __webpack_require__(6656);\nvar ownKeys = __webpack_require__(3887);\nvar getOwnPropertyDescriptorModule = __webpack_require__(1236);\nvar definePropertyModule = __webpack_require__(3070);\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n\n\n/***/ }),\n\n/***/ 8544:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar fails = __webpack_require__(7293);\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n\n\n/***/ }),\n\n/***/ 4994:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar IteratorPrototype = __webpack_require__(3383).IteratorPrototype;\nvar create = __webpack_require__(30);\nvar createPropertyDescriptor = __webpack_require__(9114);\nvar setToStringTag = __webpack_require__(8003);\nvar Iterators = __webpack_require__(7497);\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n\n\n/***/ }),\n\n/***/ 8880:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar DESCRIPTORS = __webpack_require__(9781);\nvar definePropertyModule = __webpack_require__(3070);\nvar createPropertyDescriptor = __webpack_require__(9114);\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n\n/***/ 9114:\n/***/ (function(module) {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n\n/***/ 6135:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar toPrimitive = __webpack_require__(7593);\nvar definePropertyModule = __webpack_require__(3070);\nvar createPropertyDescriptor = __webpack_require__(9114);\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n\n\n/***/ }),\n\n/***/ 654:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar createIteratorConstructor = __webpack_require__(4994);\nvar getPrototypeOf = __webpack_require__(9518);\nvar setPrototypeOf = __webpack_require__(7674);\nvar setToStringTag = __webpack_require__(8003);\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar redefine = __webpack_require__(1320);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar IS_PURE = __webpack_require__(1913);\nvar Iterators = __webpack_require__(7497);\nvar IteratorsCore = __webpack_require__(3383);\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n\n\n/***/ }),\n\n/***/ 9781:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar fails = __webpack_require__(7293);\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar isObject = __webpack_require__(111);\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n\n/***/ 8324:\n/***/ (function(module) {\n\n// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n\n\n/***/ }),\n\n/***/ 8113:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar getBuiltIn = __webpack_require__(5005);\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n\n\n/***/ }),\n\n/***/ 7392:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar userAgent = __webpack_require__(8113);\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n\n\n/***/ }),\n\n/***/ 748:\n/***/ (function(module) {\n\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\n\n/***/ }),\n\n/***/ 2109:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar getOwnPropertyDescriptor = __webpack_require__(1236).f;\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar redefine = __webpack_require__(1320);\nvar setGlobal = __webpack_require__(3505);\nvar copyConstructorProperties = __webpack_require__(9920);\nvar isForced = __webpack_require__(4705);\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n\n\n/***/ }),\n\n/***/ 7293:\n/***/ (function(module) {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\n\n/***/ }),\n\n/***/ 7007:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\n// TODO: Remove from `core-js@4` since it's moved to entry points\n__webpack_require__(4916);\nvar redefine = __webpack_require__(1320);\nvar fails = __webpack_require__(7293);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar regexpExec = __webpack_require__(2261);\nvar createNonEnumerableProperty = __webpack_require__(8880);\n\nvar SPECIES = wellKnownSymbol('species');\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  // #replace needs built-in support for named groups.\n  // #match works fine because it just return the exec results, even if it has\n  // a \"grops\" property.\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\nvar REPLACE = wellKnownSymbol('replace');\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  // eslint-disable-next-line regexp/no-empty-group -- required for testing\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\nmodule.exports = function (KEY, length, exec, sham) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    (KEY === 'replace' && !(\n      REPLACE_SUPPORTS_NAMED_GROUPS &&\n      REPLACE_KEEPS_$0 &&\n      !REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    )) ||\n    (KEY === 'split' && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)\n  ) {\n    var nativeRegExpMethod = /./[SYMBOL];\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      if (regexp.exec === regexpExec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: nativeRegExpMethod.call(regexp, str, arg2) };\n        }\n        return { done: true, value: nativeMethod.call(str, regexp, arg2) };\n      }\n      return { done: false };\n    }, {\n      REPLACE_KEEPS_$0: REPLACE_KEEPS_$0,\n      REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    });\n    var stringMethod = methods[0];\n    var regexMethod = methods[1];\n\n    redefine(String.prototype, KEY, stringMethod);\n    redefine(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return regexMethod.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return regexMethod.call(string, this); }\n    );\n  }\n\n  if (sham) createNonEnumerableProperty(RegExp.prototype[SYMBOL], 'sham', true);\n};\n\n\n/***/ }),\n\n/***/ 9974:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar aFunction = __webpack_require__(3099);\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/***/ }),\n\n/***/ 5005:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar path = __webpack_require__(857);\nvar global = __webpack_require__(7854);\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n\n\n/***/ }),\n\n/***/ 1246:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar classof = __webpack_require__(648);\nvar Iterators = __webpack_require__(7497);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/***/ }),\n\n/***/ 8554:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(9670);\nvar getIteratorMethod = __webpack_require__(1246);\n\nmodule.exports = function (it) {\n  var iteratorMethod = getIteratorMethod(it);\n  if (typeof iteratorMethod != 'function') {\n    throw TypeError(String(it) + ' is not iterable');\n  } return anObject(iteratorMethod.call(it));\n};\n\n\n/***/ }),\n\n/***/ 647:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toObject = __webpack_require__(7908);\n\nvar floor = Math.floor;\nvar replace = ''.replace;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d\\d?|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d\\d?)/g;\n\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace.call(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (ch.charAt(0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return str.slice(0, position);\n      case \"'\": return str.slice(tailPos);\n      case '<':\n        capture = namedCaptures[ch.slice(1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n\n\n/***/ }),\n\n/***/ 7854:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  /* global globalThis -- safe */\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof __webpack_require__.g == 'object' && __webpack_require__.g) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n\n\n/***/ }),\n\n/***/ 6656:\n/***/ (function(module) {\n\nvar hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n/***/ }),\n\n/***/ 3501:\n/***/ (function(module) {\n\nmodule.exports = {};\n\n\n/***/ }),\n\n/***/ 490:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar getBuiltIn = __webpack_require__(5005);\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n\n\n/***/ }),\n\n/***/ 4664:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar DESCRIPTORS = __webpack_require__(9781);\nvar fails = __webpack_require__(7293);\nvar createElement = __webpack_require__(317);\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n\n\n/***/ }),\n\n/***/ 1179:\n/***/ (function(module) {\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\n\nvar pack = function (number, mantissaLength, bytes) {\n  var buffer = new Array(bytes);\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;\n  var index = 0;\n  var exponent, mantissa, c;\n  number = abs(number);\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (number != number || number === Infinity) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    mantissa = number != number ? 1 : 0;\n    exponent = eMax;\n  } else {\n    exponent = floor(log(number) / LN2);\n    if (number * (c = pow(2, -exponent)) < 1) {\n      exponent--;\n      c *= 2;\n    }\n    if (exponent + eBias >= 1) {\n      number += rt / c;\n    } else {\n      number += rt * pow(2, 1 - eBias);\n    }\n    if (number * c >= 2) {\n      exponent++;\n      c /= 2;\n    }\n    if (exponent + eBias >= eMax) {\n      mantissa = 0;\n      exponent = eMax;\n    } else if (exponent + eBias >= 1) {\n      mantissa = (number * c - 1) * pow(2, mantissaLength);\n      exponent = exponent + eBias;\n    } else {\n      mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);\n      exponent = 0;\n    }\n  }\n  for (; mantissaLength >= 8; buffer[index++] = mantissa & 255, mantissa /= 256, mantissaLength -= 8);\n  exponent = exponent << mantissaLength | mantissa;\n  exponentLength += mantissaLength;\n  for (; exponentLength > 0; buffer[index++] = exponent & 255, exponent /= 256, exponentLength -= 8);\n  buffer[--index] |= sign * 128;\n  return buffer;\n};\n\nvar unpack = function (buffer, mantissaLength) {\n  var bytes = buffer.length;\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var nBits = exponentLength - 7;\n  var index = bytes - 1;\n  var sign = buffer[index--];\n  var exponent = sign & 127;\n  var mantissa;\n  sign >>= 7;\n  for (; nBits > 0; exponent = exponent * 256 + buffer[index], index--, nBits -= 8);\n  mantissa = exponent & (1 << -nBits) - 1;\n  exponent >>= -nBits;\n  nBits += mantissaLength;\n  for (; nBits > 0; mantissa = mantissa * 256 + buffer[index], index--, nBits -= 8);\n  if (exponent === 0) {\n    exponent = 1 - eBias;\n  } else if (exponent === eMax) {\n    return mantissa ? NaN : sign ? -Infinity : Infinity;\n  } else {\n    mantissa = mantissa + pow(2, mantissaLength);\n    exponent = exponent - eBias;\n  } return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);\n};\n\nmodule.exports = {\n  pack: pack,\n  unpack: unpack\n};\n\n\n/***/ }),\n\n/***/ 8361:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar fails = __webpack_require__(7293);\nvar classof = __webpack_require__(4326);\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n\n\n/***/ }),\n\n/***/ 9587:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(111);\nvar setPrototypeOf = __webpack_require__(7674);\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n\n\n/***/ }),\n\n/***/ 2788:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar store = __webpack_require__(5465);\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n\n\n/***/ }),\n\n/***/ 9909:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar NATIVE_WEAK_MAP = __webpack_require__(8536);\nvar global = __webpack_require__(7854);\nvar isObject = __webpack_require__(111);\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar objectHas = __webpack_require__(6656);\nvar shared = __webpack_require__(5465);\nvar sharedKey = __webpack_require__(6200);\nvar hiddenKeys = __webpack_require__(3501);\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\n\n/***/ }),\n\n/***/ 7659:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar wellKnownSymbol = __webpack_require__(5112);\nvar Iterators = __webpack_require__(7497);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n\n\n/***/ }),\n\n/***/ 3157:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar classof = __webpack_require__(4326);\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n\n\n/***/ }),\n\n/***/ 4705:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar fails = __webpack_require__(7293);\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n\n\n/***/ }),\n\n/***/ 111:\n/***/ (function(module) {\n\nmodule.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/***/ }),\n\n/***/ 1913:\n/***/ (function(module) {\n\nmodule.exports = false;\n\n\n/***/ }),\n\n/***/ 7850:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(111);\nvar classof = __webpack_require__(4326);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n\n\n/***/ }),\n\n/***/ 9212:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(9670);\n\nmodule.exports = function (iterator) {\n  var returnMethod = iterator['return'];\n  if (returnMethod !== undefined) {\n    return anObject(returnMethod.call(iterator)).value;\n  }\n};\n\n\n/***/ }),\n\n/***/ 3383:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar fails = __webpack_require__(7293);\nvar getPrototypeOf = __webpack_require__(9518);\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar has = __webpack_require__(6656);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar IS_PURE = __webpack_require__(1913);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif ((!IS_PURE || NEW_ITERATOR_PROTOTYPE) && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n\n\n/***/ }),\n\n/***/ 7497:\n/***/ (function(module) {\n\nmodule.exports = {};\n\n\n/***/ }),\n\n/***/ 133:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar fails = __webpack_require__(7293);\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  /* global Symbol -- required for testing */\n  return !String(Symbol());\n});\n\n\n/***/ }),\n\n/***/ 590:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar fails = __webpack_require__(7293);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar IS_PURE = __webpack_require__(1913);\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = !fails(function () {\n  var url = new URL('b?a=1&b=2&c=3', 'http://a');\n  var searchParams = url.searchParams;\n  var result = '';\n  url.pathname = 'c%20d';\n  searchParams.forEach(function (value, key) {\n    searchParams['delete']('b');\n    result += key + value;\n  });\n  return (IS_PURE && !url.toJSON)\n    || !searchParams.sort\n    || url.href !== 'http://a/c%20d?a=1&c=3'\n    || searchParams.get('c') !== '3'\n    || String(new URLSearchParams('?a=1')) !== 'a=1'\n    || !searchParams[ITERATOR]\n    // throws in Edge\n    || new URL('https://a@b').username !== 'a'\n    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'\n    // not punycoded in Edge\n    || new URL('http://').host !== 'xn--e1aybc'\n    // not escaped in Chrome 62-\n    || new URL('http://a#').hash !== '#%D0%B1'\n    // fails in Chrome 66-\n    || result !== 'a1c3'\n    // throws in Safari\n    || new URL('http://x', undefined).host !== 'x';\n});\n\n\n/***/ }),\n\n/***/ 8536:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar inspectSource = __webpack_require__(2788);\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n\n\n/***/ }),\n\n/***/ 1574:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar DESCRIPTORS = __webpack_require__(9781);\nvar fails = __webpack_require__(7293);\nvar objectKeys = __webpack_require__(1956);\nvar getOwnPropertySymbolsModule = __webpack_require__(5181);\nvar propertyIsEnumerableModule = __webpack_require__(5296);\nvar toObject = __webpack_require__(7908);\nvar IndexedObject = __webpack_require__(8361);\n\nvar nativeAssign = Object.assign;\nvar defineProperty = Object.defineProperty;\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !nativeAssign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && nativeAssign({ b: 1 }, nativeAssign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  /* global Symbol -- required for testing */\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return nativeAssign({}, A)[symbol] != 7 || objectKeys(nativeAssign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : nativeAssign;\n\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(9670);\nvar defineProperties = __webpack_require__(6048);\nvar enumBugKeys = __webpack_require__(748);\nvar hiddenKeys = __webpack_require__(3501);\nvar html = __webpack_require__(490);\nvar documentCreateElement = __webpack_require__(317);\nvar sharedKey = __webpack_require__(6200);\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject -- old IE */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n\n\n/***/ }),\n\n/***/ 6048:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar DESCRIPTORS = __webpack_require__(9781);\nvar definePropertyModule = __webpack_require__(3070);\nvar anObject = __webpack_require__(9670);\nvar objectKeys = __webpack_require__(1956);\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n\n\n/***/ }),\n\n/***/ 3070:\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\nvar DESCRIPTORS = __webpack_require__(9781);\nvar IE8_DOM_DEFINE = __webpack_require__(4664);\nvar anObject = __webpack_require__(9670);\nvar toPrimitive = __webpack_require__(7593);\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n\n/***/ 1236:\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\nvar DESCRIPTORS = __webpack_require__(9781);\nvar propertyIsEnumerableModule = __webpack_require__(5296);\nvar createPropertyDescriptor = __webpack_require__(9114);\nvar toIndexedObject = __webpack_require__(5656);\nvar toPrimitive = __webpack_require__(7593);\nvar has = __webpack_require__(6656);\nvar IE8_DOM_DEFINE = __webpack_require__(4664);\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n\n\n/***/ }),\n\n/***/ 8006:\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\nvar internalObjectKeys = __webpack_require__(6324);\nvar enumBugKeys = __webpack_require__(748);\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n\n\n/***/ }),\n\n/***/ 5181:\n/***/ (function(__unused_webpack_module, exports) {\n\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n\n/***/ 9518:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar has = __webpack_require__(6656);\nvar toObject = __webpack_require__(7908);\nvar sharedKey = __webpack_require__(6200);\nvar CORRECT_PROTOTYPE_GETTER = __webpack_require__(8544);\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n\n\n/***/ }),\n\n/***/ 6324:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar has = __webpack_require__(6656);\nvar toIndexedObject = __webpack_require__(5656);\nvar indexOf = __webpack_require__(1318).indexOf;\nvar hiddenKeys = __webpack_require__(3501);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 1956:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar internalObjectKeys = __webpack_require__(6324);\nvar enumBugKeys = __webpack_require__(748);\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n\n\n/***/ }),\n\n/***/ 5296:\n/***/ (function(__unused_webpack_module, exports) {\n\n\"use strict\";\n\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n\n\n/***/ }),\n\n/***/ 7674:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n/* eslint-disable no-proto -- safe */\nvar anObject = __webpack_require__(9670);\nvar aPossiblePrototype = __webpack_require__(6077);\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n\n\n/***/ }),\n\n/***/ 288:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(1694);\nvar classof = __webpack_require__(648);\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n\n\n/***/ }),\n\n/***/ 3887:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar getBuiltIn = __webpack_require__(5005);\nvar getOwnPropertyNamesModule = __webpack_require__(8006);\nvar getOwnPropertySymbolsModule = __webpack_require__(5181);\nvar anObject = __webpack_require__(9670);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n\n\n/***/ }),\n\n/***/ 857:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\n\nmodule.exports = global;\n\n\n/***/ }),\n\n/***/ 2248:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar redefine = __webpack_require__(1320);\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) redefine(target, key, src[key], options);\n  return target;\n};\n\n\n/***/ }),\n\n/***/ 1320:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar has = __webpack_require__(6656);\nvar setGlobal = __webpack_require__(3505);\nvar inspectSource = __webpack_require__(2788);\nvar InternalStateModule = __webpack_require__(9909);\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n\n\n/***/ }),\n\n/***/ 7651:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar classof = __webpack_require__(4326);\nvar regexpExec = __webpack_require__(2261);\n\n// `RegExpExec` abstract operation\n// https://tc39.es/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (typeof exec === 'function') {\n    var result = exec.call(R, S);\n    if (typeof result !== 'object') {\n      throw TypeError('RegExp exec method returned something other than an Object or null');\n    }\n    return result;\n  }\n\n  if (classof(R) !== 'RegExp') {\n    throw TypeError('RegExp#exec called on incompatible receiver');\n  }\n\n  return regexpExec.call(R, S);\n};\n\n\n\n/***/ }),\n\n/***/ 2261:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar regexpFlags = __webpack_require__(7066);\nvar stickyHelpers = __webpack_require__(2999);\n\nvar nativeExec = RegExp.prototype.exec;\n// This always refers to the native implementation, because the\n// String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,\n// which loads this file before patching the method.\nvar nativeReplace = String.prototype.replace;\n\nvar patchedExec = nativeExec;\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  nativeExec.call(re1, 'a');\n  nativeExec.call(re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y || stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\n// eslint-disable-next-line regexp/no-assertion-capturing-group, regexp/no-empty-group -- required for testing\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y;\n\nif (PATCH) {\n  patchedExec = function exec(str) {\n    var re = this;\n    var lastIndex, reCopy, match, i;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = regexpFlags.call(re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = flags.replace('y', '');\n      if (flags.indexOf('g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = String(str).slice(re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && str[re.lastIndex - 1] !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = nativeExec.call(sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = match.input.slice(charsAdded);\n        match[0] = match[0].slice(charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      nativeReplace.call(match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n\n\n/***/ }),\n\n/***/ 7066:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar anObject = __webpack_require__(9670);\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 2999:\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar fails = __webpack_require__(7293);\n\n// babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError,\n// so we use an intermediate function.\nfunction RE(s, f) {\n  return RegExp(s, f);\n}\n\nexports.UNSUPPORTED_Y = fails(function () {\n  // babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\n  var re = RE('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') != null;\n});\n\nexports.BROKEN_CARET = fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = RE('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') != null;\n});\n\n\n/***/ }),\n\n/***/ 4488:\n/***/ (function(module) {\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n\n\n/***/ }),\n\n/***/ 3505:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar createNonEnumerableProperty = __webpack_require__(8880);\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n\n\n/***/ }),\n\n/***/ 6340:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar getBuiltIn = __webpack_require__(5005);\nvar definePropertyModule = __webpack_require__(3070);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar DESCRIPTORS = __webpack_require__(9781);\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n\n\n/***/ }),\n\n/***/ 8003:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar defineProperty = __webpack_require__(3070).f;\nvar has = __webpack_require__(6656);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n\n\n/***/ }),\n\n/***/ 6200:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar shared = __webpack_require__(2309);\nvar uid = __webpack_require__(9711);\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\n\n/***/ }),\n\n/***/ 5465:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar setGlobal = __webpack_require__(3505);\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n\n\n/***/ }),\n\n/***/ 2309:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar IS_PURE = __webpack_require__(1913);\nvar store = __webpack_require__(5465);\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.9.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2021 Denis Pushkarev (zloirock.ru)'\n});\n\n\n/***/ }),\n\n/***/ 6707:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(9670);\nvar aFunction = __webpack_require__(3099);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n\n\n/***/ }),\n\n/***/ 8710:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(9958);\nvar requireObjectCoercible = __webpack_require__(4488);\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n\n\n/***/ }),\n\n/***/ 3197:\n/***/ (function(module) {\n\n\"use strict\";\n\n// based on https://github.com/bestiejs/punycode.js/blob/master/punycode.js\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\nvar regexNonASCII = /[^\\0-\\u007E]/; // non-ASCII chars\nvar regexSeparators = /[.\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\nvar OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';\nvar baseMinusTMin = base - tMin;\nvar floor = Math.floor;\nvar stringFromCharCode = String.fromCharCode;\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n */\nvar ucs2decode = function (string) {\n  var output = [];\n  var counter = 0;\n  var length = string.length;\n  while (counter < length) {\n    var value = string.charCodeAt(counter++);\n    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n      // It's a high surrogate, and there is a next character.\n      var extra = string.charCodeAt(counter++);\n      if ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n        output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n      } else {\n        // It's an unmatched surrogate; only append this code unit, in case the\n        // next code unit is the high surrogate of a surrogate pair.\n        output.push(value);\n        counter--;\n      }\n    } else {\n      output.push(value);\n    }\n  }\n  return output;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n */\nvar digitToBasic = function (digit) {\n  //  0..25 map to ASCII a..z or A..Z\n  // 26..35 map to ASCII 0..9\n  return digit + 22 + 75 * (digit < 26);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n */\nvar adapt = function (delta, numPoints, firstTime) {\n  var k = 0;\n  delta = firstTime ? floor(delta / damp) : delta >> 1;\n  delta += floor(delta / numPoints);\n  for (; delta > baseMinusTMin * tMax >> 1; k += base) {\n    delta = floor(delta / baseMinusTMin);\n  }\n  return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n */\n// eslint-disable-next-line max-statements -- TODO\nvar encode = function (input) {\n  var output = [];\n\n  // Convert the input in UCS-2 to an array of Unicode code points.\n  input = ucs2decode(input);\n\n  // Cache the length.\n  var inputLength = input.length;\n\n  // Initialize the state.\n  var n = initialN;\n  var delta = 0;\n  var bias = initialBias;\n  var i, currentValue;\n\n  // Handle the basic code points.\n  for (i = 0; i < input.length; i++) {\n    currentValue = input[i];\n    if (currentValue < 0x80) {\n      output.push(stringFromCharCode(currentValue));\n    }\n  }\n\n  var basicLength = output.length; // number of basic code points.\n  var handledCPCount = basicLength; // number of code points that have been handled;\n\n  // Finish the basic string with a delimiter unless it's empty.\n  if (basicLength) {\n    output.push(delimiter);\n  }\n\n  // Main encoding loop:\n  while (handledCPCount < inputLength) {\n    // All non-basic code points < n have been handled already. Find the next larger one:\n    var m = maxInt;\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue >= n && currentValue < m) {\n        m = currentValue;\n      }\n    }\n\n    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>, but guard against overflow.\n    var handledCPCountPlusOne = handledCPCount + 1;\n    if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n      throw RangeError(OVERFLOW_ERROR);\n    }\n\n    delta += (m - n) * handledCPCountPlusOne;\n    n = m;\n\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue < n && ++delta > maxInt) {\n        throw RangeError(OVERFLOW_ERROR);\n      }\n      if (currentValue == n) {\n        // Represent delta as a generalized variable-length integer.\n        var q = delta;\n        for (var k = base; /* no condition */; k += base) {\n          var t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n          if (q < t) break;\n          var qMinusT = q - t;\n          var baseMinusT = base - t;\n          output.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT)));\n          q = floor(qMinusT / baseMinusT);\n        }\n\n        output.push(stringFromCharCode(digitToBasic(q)));\n        bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n        delta = 0;\n        ++handledCPCount;\n      }\n    }\n\n    ++delta;\n    ++n;\n  }\n  return output.join('');\n};\n\nmodule.exports = function (input) {\n  var encoded = [];\n  var labels = input.toLowerCase().replace(regexSeparators, '\\u002E').split('.');\n  var i, label;\n  for (i = 0; i < labels.length; i++) {\n    label = labels[i];\n    encoded.push(regexNonASCII.test(label) ? 'xn--' + encode(label) : label);\n  }\n  return encoded.join('.');\n};\n\n\n/***/ }),\n\n/***/ 6091:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar fails = __webpack_require__(7293);\nvar whitespaces = __webpack_require__(1361);\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n\n\n/***/ }),\n\n/***/ 3111:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar requireObjectCoercible = __webpack_require__(4488);\nvar whitespaces = __webpack_require__(1361);\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n\n\n/***/ }),\n\n/***/ 1400:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(9958);\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n\n\n/***/ }),\n\n/***/ 7067:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(9958);\nvar toLength = __webpack_require__(7466);\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length or index');\n  return length;\n};\n\n\n/***/ }),\n\n/***/ 5656:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = __webpack_require__(8361);\nvar requireObjectCoercible = __webpack_require__(4488);\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n\n\n/***/ }),\n\n/***/ 9958:\n/***/ (function(module) {\n\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n\n\n/***/ }),\n\n/***/ 7466:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(9958);\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\n\n/***/ }),\n\n/***/ 7908:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar requireObjectCoercible = __webpack_require__(4488);\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n\n\n/***/ }),\n\n/***/ 4590:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toPositiveInteger = __webpack_require__(3002);\n\nmodule.exports = function (it, BYTES) {\n  var offset = toPositiveInteger(it);\n  if (offset % BYTES) throw RangeError('Wrong offset');\n  return offset;\n};\n\n\n/***/ }),\n\n/***/ 3002:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(9958);\n\nmodule.exports = function (it) {\n  var result = toInteger(it);\n  if (result < 0) throw RangeError(\"The argument can't be less than 0\");\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 7593:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(111);\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n\n/***/ 1694:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n\n\n/***/ }),\n\n/***/ 9843:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar global = __webpack_require__(7854);\nvar DESCRIPTORS = __webpack_require__(9781);\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(3832);\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar ArrayBufferModule = __webpack_require__(3331);\nvar anInstance = __webpack_require__(5787);\nvar createPropertyDescriptor = __webpack_require__(9114);\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar toLength = __webpack_require__(7466);\nvar toIndex = __webpack_require__(7067);\nvar toOffset = __webpack_require__(4590);\nvar toPrimitive = __webpack_require__(7593);\nvar has = __webpack_require__(6656);\nvar classof = __webpack_require__(648);\nvar isObject = __webpack_require__(111);\nvar create = __webpack_require__(30);\nvar setPrototypeOf = __webpack_require__(7674);\nvar getOwnPropertyNames = __webpack_require__(8006).f;\nvar typedArrayFrom = __webpack_require__(7321);\nvar forEach = __webpack_require__(2092).forEach;\nvar setSpecies = __webpack_require__(6340);\nvar definePropertyModule = __webpack_require__(3070);\nvar getOwnPropertyDescriptorModule = __webpack_require__(1236);\nvar InternalStateModule = __webpack_require__(9909);\nvar inheritIfRequired = __webpack_require__(9587);\n\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar round = Math.round;\nvar RangeError = global.RangeError;\nvar ArrayBuffer = ArrayBufferModule.ArrayBuffer;\nvar DataView = ArrayBufferModule.DataView;\nvar NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;\nvar TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;\nvar TypedArray = ArrayBufferViewCore.TypedArray;\nvar TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\nvar isTypedArray = ArrayBufferViewCore.isTypedArray;\nvar BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\nvar WRONG_LENGTH = 'Wrong length';\n\nvar fromList = function (C, list) {\n  var index = 0;\n  var length = list.length;\n  var result = new (aTypedArrayConstructor(C))(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n\nvar addGetter = function (it, key) {\n  nativeDefineProperty(it, key, { get: function () {\n    return getInternalState(this)[key];\n  } });\n};\n\nvar isArrayBuffer = function (it) {\n  var klass;\n  return it instanceof ArrayBuffer || (klass = classof(it)) == 'ArrayBuffer' || klass == 'SharedArrayBuffer';\n};\n\nvar isTypedArrayIndex = function (target, key) {\n  return isTypedArray(target)\n    && typeof key != 'symbol'\n    && key in target\n    && String(+key) == String(key);\n};\n\nvar wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {\n  return isTypedArrayIndex(target, key = toPrimitive(key, true))\n    ? createPropertyDescriptor(2, target[key])\n    : nativeGetOwnPropertyDescriptor(target, key);\n};\n\nvar wrappedDefineProperty = function defineProperty(target, key, descriptor) {\n  if (isTypedArrayIndex(target, key = toPrimitive(key, true))\n    && isObject(descriptor)\n    && has(descriptor, 'value')\n    && !has(descriptor, 'get')\n    && !has(descriptor, 'set')\n    // TODO: add validation descriptor w/o calling accessors\n    && !descriptor.configurable\n    && (!has(descriptor, 'writable') || descriptor.writable)\n    && (!has(descriptor, 'enumerable') || descriptor.enumerable)\n  ) {\n    target[key] = descriptor.value;\n    return target;\n  } return nativeDefineProperty(target, key, descriptor);\n};\n\nif (DESCRIPTORS) {\n  if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n    getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;\n    definePropertyModule.f = wrappedDefineProperty;\n    addGetter(TypedArrayPrototype, 'buffer');\n    addGetter(TypedArrayPrototype, 'byteOffset');\n    addGetter(TypedArrayPrototype, 'byteLength');\n    addGetter(TypedArrayPrototype, 'length');\n  }\n\n  $({ target: 'Object', stat: true, forced: !NATIVE_ARRAY_BUFFER_VIEWS }, {\n    getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,\n    defineProperty: wrappedDefineProperty\n  });\n\n  module.exports = function (TYPE, wrapper, CLAMPED) {\n    var BYTES = TYPE.match(/\\d+$/)[0] / 8;\n    var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + TYPE;\n    var SETTER = 'set' + TYPE;\n    var NativeTypedArrayConstructor = global[CONSTRUCTOR_NAME];\n    var TypedArrayConstructor = NativeTypedArrayConstructor;\n    var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;\n    var exported = {};\n\n    var getter = function (that, index) {\n      var data = getInternalState(that);\n      return data.view[GETTER](index * BYTES + data.byteOffset, true);\n    };\n\n    var setter = function (that, index, value) {\n      var data = getInternalState(that);\n      if (CLAMPED) value = (value = round(value)) < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;\n      data.view[SETTER](index * BYTES + data.byteOffset, value, true);\n    };\n\n    var addElement = function (that, index) {\n      nativeDefineProperty(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n\n    if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n      TypedArrayConstructor = wrapper(function (that, data, offset, $length) {\n        anInstance(that, TypedArrayConstructor, CONSTRUCTOR_NAME);\n        var index = 0;\n        var byteOffset = 0;\n        var buffer, byteLength, length;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new ArrayBuffer(byteLength);\n        } else if (isArrayBuffer(data)) {\n          buffer = data;\n          byteOffset = toOffset(offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - byteOffset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + byteOffset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (isTypedArray(data)) {\n          return fromList(TypedArrayConstructor, data);\n        } else {\n          return typedArrayFrom.call(TypedArrayConstructor, data);\n        }\n        setInternalState(that, {\n          buffer: buffer,\n          byteOffset: byteOffset,\n          byteLength: byteLength,\n          length: length,\n          view: new DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);\n    } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {\n      TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {\n        anInstance(dummy, TypedArrayConstructor, CONSTRUCTOR_NAME);\n        return inheritIfRequired(function () {\n          if (!isObject(data)) return new NativeTypedArrayConstructor(toIndex(data));\n          if (isArrayBuffer(data)) return $length !== undefined\n            ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length)\n            : typedArrayOffset !== undefined\n              ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES))\n              : new NativeTypedArrayConstructor(data);\n          if (isTypedArray(data)) return fromList(TypedArrayConstructor, data);\n          return typedArrayFrom.call(TypedArrayConstructor, data);\n        }(), dummy, TypedArrayConstructor);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {\n        if (!(key in TypedArrayConstructor)) {\n          createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);\n        }\n      });\n      TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;\n    }\n\n    if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);\n    }\n\n    if (TYPED_ARRAY_TAG) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);\n    }\n\n    exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;\n\n    $({\n      global: true, forced: TypedArrayConstructor != NativeTypedArrayConstructor, sham: !NATIVE_ARRAY_BUFFER_VIEWS\n    }, exported);\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {\n      createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    setSpecies(CONSTRUCTOR_NAME);\n  };\n} else module.exports = function () { /* empty */ };\n\n\n/***/ }),\n\n/***/ 3832:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n/* eslint-disable no-new -- required for testing */\nvar global = __webpack_require__(7854);\nvar fails = __webpack_require__(7293);\nvar checkCorrectnessOfIteration = __webpack_require__(7072);\nvar NATIVE_ARRAY_BUFFER_VIEWS = __webpack_require__(260).NATIVE_ARRAY_BUFFER_VIEWS;\n\nvar ArrayBuffer = global.ArrayBuffer;\nvar Int8Array = global.Int8Array;\n\nmodule.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {\n  Int8Array(1);\n}) || !fails(function () {\n  new Int8Array(-1);\n}) || !checkCorrectnessOfIteration(function (iterable) {\n  new Int8Array();\n  new Int8Array(null);\n  new Int8Array(1.5);\n  new Int8Array(iterable);\n}, true) || fails(function () {\n  // Safari (11+) bug - a reason why even Safari 13 should load a typed array polyfill\n  return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;\n});\n\n\n/***/ }),\n\n/***/ 3074:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar aTypedArrayConstructor = __webpack_require__(260).aTypedArrayConstructor;\nvar speciesConstructor = __webpack_require__(6707);\n\nmodule.exports = function (instance, list) {\n  var C = speciesConstructor(instance, instance.constructor);\n  var index = 0;\n  var length = list.length;\n  var result = new (aTypedArrayConstructor(C))(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 7321:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar toObject = __webpack_require__(7908);\nvar toLength = __webpack_require__(7466);\nvar getIteratorMethod = __webpack_require__(1246);\nvar isArrayIteratorMethod = __webpack_require__(7659);\nvar bind = __webpack_require__(9974);\nvar aTypedArrayConstructor = __webpack_require__(260).aTypedArrayConstructor;\n\nmodule.exports = function from(source /* , mapfn, thisArg */) {\n  var O = toObject(source);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var i, length, result, step, iterator, next;\n  if (iteratorMethod != undefined && !isArrayIteratorMethod(iteratorMethod)) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    O = [];\n    while (!(step = next.call(iterator)).done) {\n      O.push(step.value);\n    }\n  }\n  if (mapping && argumentsLength > 2) {\n    mapfn = bind(mapfn, arguments[2], 2);\n  }\n  length = toLength(O.length);\n  result = new (aTypedArrayConstructor(this))(length);\n  for (i = 0; length > i; i++) {\n    result[i] = mapping ? mapfn(O[i], i) : O[i];\n  }\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 9711:\n/***/ (function(module) {\n\nvar id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n\n\n/***/ }),\n\n/***/ 3307:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar NATIVE_SYMBOL = __webpack_require__(133);\n\nmodule.exports = NATIVE_SYMBOL\n  /* global Symbol -- safe */\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n\n\n/***/ }),\n\n/***/ 5112:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar shared = __webpack_require__(2309);\nvar has = __webpack_require__(6656);\nvar uid = __webpack_require__(9711);\nvar NATIVE_SYMBOL = __webpack_require__(133);\nvar USE_SYMBOL_AS_UID = __webpack_require__(3307);\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n\n\n/***/ }),\n\n/***/ 1361:\n/***/ (function(module) {\n\n// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n\n\n/***/ }),\n\n/***/ 8264:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar global = __webpack_require__(7854);\nvar arrayBufferModule = __webpack_require__(3331);\nvar setSpecies = __webpack_require__(6340);\n\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar ArrayBuffer = arrayBufferModule[ARRAY_BUFFER];\nvar NativeArrayBuffer = global[ARRAY_BUFFER];\n\n// `ArrayBuffer` constructor\n// https://tc39.es/ecma262/#sec-arraybuffer-constructor\n$({ global: true, forced: NativeArrayBuffer !== ArrayBuffer }, {\n  ArrayBuffer: ArrayBuffer\n});\n\nsetSpecies(ARRAY_BUFFER);\n\n\n/***/ }),\n\n/***/ 2222:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar fails = __webpack_require__(7293);\nvar isArray = __webpack_require__(3157);\nvar isObject = __webpack_require__(111);\nvar toObject = __webpack_require__(7908);\nvar toLength = __webpack_require__(7466);\nvar createProperty = __webpack_require__(6135);\nvar arraySpeciesCreate = __webpack_require__(5417);\nvar arrayMethodHasSpeciesSupport = __webpack_require__(1194);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar V8_VERSION = __webpack_require__(7392);\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n\n\n/***/ }),\n\n/***/ 7327:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar $filter = __webpack_require__(2092).filter;\nvar arrayMethodHasSpeciesSupport = __webpack_require__(1194);\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n/***/ }),\n\n/***/ 2772:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar $indexOf = __webpack_require__(1318).indexOf;\nvar arrayMethodIsStrict = __webpack_require__(9341);\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n/***/ }),\n\n/***/ 6992:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar toIndexedObject = __webpack_require__(5656);\nvar addToUnscopables = __webpack_require__(1223);\nvar Iterators = __webpack_require__(7497);\nvar InternalStateModule = __webpack_require__(9909);\nvar defineIterator = __webpack_require__(654);\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/***/ }),\n\n/***/ 1249:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar $map = __webpack_require__(2092).map;\nvar arrayMethodHasSpeciesSupport = __webpack_require__(1194);\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n/***/ }),\n\n/***/ 7042:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar isObject = __webpack_require__(111);\nvar isArray = __webpack_require__(3157);\nvar toAbsoluteIndex = __webpack_require__(1400);\nvar toLength = __webpack_require__(7466);\nvar toIndexedObject = __webpack_require__(5656);\nvar createProperty = __webpack_require__(6135);\nvar wellKnownSymbol = __webpack_require__(5112);\nvar arrayMethodHasSpeciesSupport = __webpack_require__(1194);\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n\n\n/***/ }),\n\n/***/ 561:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar toAbsoluteIndex = __webpack_require__(1400);\nvar toInteger = __webpack_require__(9958);\nvar toLength = __webpack_require__(7466);\nvar toObject = __webpack_require__(7908);\nvar arraySpeciesCreate = __webpack_require__(5417);\nvar createProperty = __webpack_require__(6135);\nvar arrayMethodHasSpeciesSupport = __webpack_require__(1194);\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n\n\n/***/ }),\n\n/***/ 8309:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\nvar DESCRIPTORS = __webpack_require__(9781);\nvar defineProperty = __webpack_require__(3070).f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n\n\n/***/ }),\n\n/***/ 489:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\nvar $ = __webpack_require__(2109);\nvar fails = __webpack_require__(7293);\nvar toObject = __webpack_require__(7908);\nvar nativeGetPrototypeOf = __webpack_require__(9518);\nvar CORRECT_PROTOTYPE_GETTER = __webpack_require__(8544);\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n\n\n/***/ }),\n\n/***/ 1539:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(1694);\nvar redefine = __webpack_require__(1320);\nvar toString = __webpack_require__(288);\n\n// `Object.prototype.toString` method\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n\n\n/***/ }),\n\n/***/ 4916:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar exec = __webpack_require__(2261);\n\n// `RegExp.prototype.exec` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.exec\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n\n\n/***/ }),\n\n/***/ 9714:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar redefine = __webpack_require__(1320);\nvar anObject = __webpack_require__(9670);\nvar fails = __webpack_require__(7293);\nvar flags = __webpack_require__(7066);\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n\n\n/***/ }),\n\n/***/ 8783:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar charAt = __webpack_require__(8710).charAt;\nvar InternalStateModule = __webpack_require__(9909);\nvar defineIterator = __webpack_require__(654);\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n\n\n/***/ }),\n\n/***/ 4723:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar fixRegExpWellKnownSymbolLogic = __webpack_require__(7007);\nvar anObject = __webpack_require__(9670);\nvar toLength = __webpack_require__(7466);\nvar requireObjectCoercible = __webpack_require__(4488);\nvar advanceStringIndex = __webpack_require__(1530);\nvar regExpExec = __webpack_require__(7651);\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', 1, function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.es/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : regexp[MATCH];\n      return matcher !== undefined ? matcher.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative(nativeMatch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n\n\n/***/ }),\n\n/***/ 5306:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar fixRegExpWellKnownSymbolLogic = __webpack_require__(7007);\nvar anObject = __webpack_require__(9670);\nvar toLength = __webpack_require__(7466);\nvar toInteger = __webpack_require__(9958);\nvar requireObjectCoercible = __webpack_require__(4488);\nvar advanceStringIndex = __webpack_require__(1530);\nvar getSubstitution = __webpack_require__(647);\nvar regExpExec = __webpack_require__(7651);\n\nvar max = Math.max;\nvar min = Math.min;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', 2, function (REPLACE, nativeReplace, maybeCallNative, reason) {\n  var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;\n  var REPLACE_KEEPS_$0 = reason.REPLACE_KEEPS_$0;\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return replacer !== undefined\n        ? replacer.call(searchValue, O, replaceValue)\n        : nativeReplace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      if (\n        (!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE && REPLACE_KEEPS_$0) ||\n        (typeof replaceValue === 'string' && replaceValue.indexOf(UNSAFE_SUBSTITUTE) === -1)\n      ) {\n        var res = maybeCallNative(nativeReplace, regexp, this, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        results.push(result);\n        if (!global) break;\n\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n});\n\n\n/***/ }),\n\n/***/ 3123:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar fixRegExpWellKnownSymbolLogic = __webpack_require__(7007);\nvar isRegExp = __webpack_require__(7850);\nvar anObject = __webpack_require__(9670);\nvar requireObjectCoercible = __webpack_require__(4488);\nvar speciesConstructor = __webpack_require__(6707);\nvar advanceStringIndex = __webpack_require__(1530);\nvar toLength = __webpack_require__(7466);\nvar callRegExpExec = __webpack_require__(7651);\nvar regexpExec = __webpack_require__(2261);\nvar fails = __webpack_require__(7293);\n\nvar arrayPush = [].push;\nvar min = Math.min;\nvar MAX_UINT32 = 0xFFFFFFFF;\n\n// babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError\nvar SUPPORTS_Y = !fails(function () { return !RegExp(MAX_UINT32, 'y'); });\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    // eslint-disable-next-line regexp/no-empty-group -- required for testing\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    // eslint-disable-next-line regexp/no-assertion-capturing-group, regexp/no-empty-group -- required for testing\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return nativeSplit.call(string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output.length > lim ? output.slice(0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.es/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (SUPPORTS_Y ? 'y' : 'g');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = SUPPORTS_Y ? q : 0;\n        var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n}, !SUPPORTS_Y);\n\n\n/***/ }),\n\n/***/ 3210:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $ = __webpack_require__(2109);\nvar $trim = __webpack_require__(3111).trim;\nvar forcedStringTrimMethod = __webpack_require__(6091);\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n\n\n/***/ }),\n\n/***/ 2990:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $copyWithin = __webpack_require__(1048);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.copyWithin` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.copywithin\nexportTypedArrayMethod('copyWithin', function copyWithin(target, start /* , end */) {\n  return $copyWithin.call(aTypedArray(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 8927:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $every = __webpack_require__(2092).every;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.every` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.every\nexportTypedArrayMethod('every', function every(callbackfn /* , thisArg */) {\n  return $every(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 3105:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $fill = __webpack_require__(1285);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.fill` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill\n// eslint-disable-next-line no-unused-vars -- required for `.length`\nexportTypedArrayMethod('fill', function fill(value /* , start, end */) {\n  return $fill.apply(aTypedArray(this), arguments);\n});\n\n\n/***/ }),\n\n/***/ 5035:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $filter = __webpack_require__(2092).filter;\nvar fromSpeciesAndList = __webpack_require__(3074);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.filter` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.filter\nexportTypedArrayMethod('filter', function filter(callbackfn /* , thisArg */) {\n  var list = $filter(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  return fromSpeciesAndList(this, list);\n});\n\n\n/***/ }),\n\n/***/ 7174:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $findIndex = __webpack_require__(2092).findIndex;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findindex\nexportTypedArrayMethod('findIndex', function findIndex(predicate /* , thisArg */) {\n  return $findIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 4345:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $find = __webpack_require__(2092).find;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.find` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.find\nexportTypedArrayMethod('find', function find(predicate /* , thisArg */) {\n  return $find(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 2846:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $forEach = __webpack_require__(2092).forEach;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.foreach\nexportTypedArrayMethod('forEach', function forEach(callbackfn /* , thisArg */) {\n  $forEach(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 4731:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $includes = __webpack_require__(1318).includes;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.includes` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.includes\nexportTypedArrayMethod('includes', function includes(searchElement /* , fromIndex */) {\n  return $includes(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 7209:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $indexOf = __webpack_require__(1318).indexOf;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.indexof\nexportTypedArrayMethod('indexOf', function indexOf(searchElement /* , fromIndex */) {\n  return $indexOf(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 6319:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar global = __webpack_require__(7854);\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar ArrayIterators = __webpack_require__(6992);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar Uint8Array = global.Uint8Array;\nvar arrayValues = ArrayIterators.values;\nvar arrayKeys = ArrayIterators.keys;\nvar arrayEntries = ArrayIterators.entries;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar nativeTypedArrayIterator = Uint8Array && Uint8Array.prototype[ITERATOR];\n\nvar CORRECT_ITER_NAME = !!nativeTypedArrayIterator\n  && (nativeTypedArrayIterator.name == 'values' || nativeTypedArrayIterator.name == undefined);\n\nvar typedArrayValues = function values() {\n  return arrayValues.call(aTypedArray(this));\n};\n\n// `%TypedArray%.prototype.entries` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.entries\nexportTypedArrayMethod('entries', function entries() {\n  return arrayEntries.call(aTypedArray(this));\n});\n// `%TypedArray%.prototype.keys` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.keys\nexportTypedArrayMethod('keys', function keys() {\n  return arrayKeys.call(aTypedArray(this));\n});\n// `%TypedArray%.prototype.values` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.values\nexportTypedArrayMethod('values', typedArrayValues, !CORRECT_ITER_NAME);\n// `%TypedArray%.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype-@@iterator\nexportTypedArrayMethod(ITERATOR, typedArrayValues, !CORRECT_ITER_NAME);\n\n\n/***/ }),\n\n/***/ 8867:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $join = [].join;\n\n// `%TypedArray%.prototype.join` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.join\n// eslint-disable-next-line no-unused-vars -- required for `.length`\nexportTypedArrayMethod('join', function join(separator) {\n  return $join.apply(aTypedArray(this), arguments);\n});\n\n\n/***/ }),\n\n/***/ 7789:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $lastIndexOf = __webpack_require__(6583);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.lastIndexOf` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.lastindexof\n// eslint-disable-next-line no-unused-vars -- required for `.length`\nexportTypedArrayMethod('lastIndexOf', function lastIndexOf(searchElement /* , fromIndex */) {\n  return $lastIndexOf.apply(aTypedArray(this), arguments);\n});\n\n\n/***/ }),\n\n/***/ 3739:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $map = __webpack_require__(2092).map;\nvar speciesConstructor = __webpack_require__(6707);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.map` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.map\nexportTypedArrayMethod('map', function map(mapfn /* , thisArg */) {\n  return $map(aTypedArray(this), mapfn, arguments.length > 1 ? arguments[1] : undefined, function (O, length) {\n    return new (aTypedArrayConstructor(speciesConstructor(O, O.constructor)))(length);\n  });\n});\n\n\n/***/ }),\n\n/***/ 4483:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $reduceRight = __webpack_require__(3671).right;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.reduceRicht` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduceright\nexportTypedArrayMethod('reduceRight', function reduceRight(callbackfn /* , initialValue */) {\n  return $reduceRight(aTypedArray(this), callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 9368:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $reduce = __webpack_require__(3671).left;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduce\nexportTypedArrayMethod('reduce', function reduce(callbackfn /* , initialValue */) {\n  return $reduce(aTypedArray(this), callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 2056:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar floor = Math.floor;\n\n// `%TypedArray%.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reverse\nexportTypedArrayMethod('reverse', function reverse() {\n  var that = this;\n  var length = aTypedArray(that).length;\n  var middle = floor(length / 2);\n  var index = 0;\n  var value;\n  while (index < middle) {\n    value = that[index];\n    that[index++] = that[--length];\n    that[length] = value;\n  } return that;\n});\n\n\n/***/ }),\n\n/***/ 3462:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar toLength = __webpack_require__(7466);\nvar toOffset = __webpack_require__(4590);\nvar toObject = __webpack_require__(7908);\nvar fails = __webpack_require__(7293);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar FORCED = fails(function () {\n  /* global Int8Array -- safe */\n  new Int8Array(1).set({});\n});\n\n// `%TypedArray%.prototype.set` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.set\nexportTypedArrayMethod('set', function set(arrayLike /* , offset */) {\n  aTypedArray(this);\n  var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);\n  var length = this.length;\n  var src = toObject(arrayLike);\n  var len = toLength(src.length);\n  var index = 0;\n  if (len + offset > length) throw RangeError('Wrong length');\n  while (index < len) this[offset + index] = src[index++];\n}, FORCED);\n\n\n/***/ }),\n\n/***/ 678:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar speciesConstructor = __webpack_require__(6707);\nvar fails = __webpack_require__(7293);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $slice = [].slice;\n\nvar FORCED = fails(function () {\n  /* global Int8Array -- safe */\n  new Int8Array(1).slice();\n});\n\n// `%TypedArray%.prototype.slice` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.slice\nexportTypedArrayMethod('slice', function slice(start, end) {\n  var list = $slice.call(aTypedArray(this), start, end);\n  var C = speciesConstructor(this, this.constructor);\n  var index = 0;\n  var length = list.length;\n  var result = new (aTypedArrayConstructor(C))(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n}, FORCED);\n\n\n/***/ }),\n\n/***/ 7462:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar $some = __webpack_require__(2092).some;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.some` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.some\nexportTypedArrayMethod('some', function some(callbackfn /* , thisArg */) {\n  return $some(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n/***/ }),\n\n/***/ 3824:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $sort = [].sort;\n\n// `%TypedArray%.prototype.sort` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\nexportTypedArrayMethod('sort', function sort(comparefn) {\n  return $sort.call(aTypedArray(this), comparefn);\n});\n\n\n/***/ }),\n\n/***/ 5021:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar toLength = __webpack_require__(7466);\nvar toAbsoluteIndex = __webpack_require__(1400);\nvar speciesConstructor = __webpack_require__(6707);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.subarray` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.subarray\nexportTypedArrayMethod('subarray', function subarray(begin, end) {\n  var O = aTypedArray(this);\n  var length = O.length;\n  var beginIndex = toAbsoluteIndex(begin, length);\n  return new (speciesConstructor(O, O.constructor))(\n    O.buffer,\n    O.byteOffset + beginIndex * O.BYTES_PER_ELEMENT,\n    toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - beginIndex)\n  );\n});\n\n\n/***/ }),\n\n/***/ 2974:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar global = __webpack_require__(7854);\nvar ArrayBufferViewCore = __webpack_require__(260);\nvar fails = __webpack_require__(7293);\n\nvar Int8Array = global.Int8Array;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $toLocaleString = [].toLocaleString;\nvar $slice = [].slice;\n\n// iOS Safari 6.x fails here\nvar TO_LOCALE_STRING_BUG = !!Int8Array && fails(function () {\n  $toLocaleString.call(new Int8Array(1));\n});\n\nvar FORCED = fails(function () {\n  return [1, 2].toLocaleString() != new Int8Array([1, 2]).toLocaleString();\n}) || !fails(function () {\n  Int8Array.prototype.toLocaleString.call([1, 2]);\n});\n\n// `%TypedArray%.prototype.toLocaleString` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tolocalestring\nexportTypedArrayMethod('toLocaleString', function toLocaleString() {\n  return $toLocaleString.apply(TO_LOCALE_STRING_BUG ? $slice.call(aTypedArray(this)) : aTypedArray(this), arguments);\n}, FORCED);\n\n\n/***/ }),\n\n/***/ 5016:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\nvar exportTypedArrayMethod = __webpack_require__(260).exportTypedArrayMethod;\nvar fails = __webpack_require__(7293);\nvar global = __webpack_require__(7854);\n\nvar Uint8Array = global.Uint8Array;\nvar Uint8ArrayPrototype = Uint8Array && Uint8Array.prototype || {};\nvar arrayToString = [].toString;\nvar arrayJoin = [].join;\n\nif (fails(function () { arrayToString.call({}); })) {\n  arrayToString = function toString() {\n    return arrayJoin.call(this);\n  };\n}\n\nvar IS_NOT_ARRAY_METHOD = Uint8ArrayPrototype.toString != arrayToString;\n\n// `%TypedArray%.prototype.toString` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tostring\nexportTypedArrayMethod('toString', arrayToString, IS_NOT_ARRAY_METHOD);\n\n\n/***/ }),\n\n/***/ 2472:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\nvar createTypedArrayConstructor = __webpack_require__(9843);\n\n// `Uint8Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint8', function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n/***/ }),\n\n/***/ 4747:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar DOMIterables = __webpack_require__(8324);\nvar forEach = __webpack_require__(8533);\nvar createNonEnumerableProperty = __webpack_require__(8880);\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n\n\n/***/ }),\n\n/***/ 3948:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\nvar global = __webpack_require__(7854);\nvar DOMIterables = __webpack_require__(8324);\nvar ArrayIteratorMethods = __webpack_require__(6992);\nvar createNonEnumerableProperty = __webpack_require__(8880);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n\n\n/***/ }),\n\n/***/ 1637:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\n__webpack_require__(6992);\nvar $ = __webpack_require__(2109);\nvar getBuiltIn = __webpack_require__(5005);\nvar USE_NATIVE_URL = __webpack_require__(590);\nvar redefine = __webpack_require__(1320);\nvar redefineAll = __webpack_require__(2248);\nvar setToStringTag = __webpack_require__(8003);\nvar createIteratorConstructor = __webpack_require__(4994);\nvar InternalStateModule = __webpack_require__(9909);\nvar anInstance = __webpack_require__(5787);\nvar hasOwn = __webpack_require__(6656);\nvar bind = __webpack_require__(9974);\nvar classof = __webpack_require__(648);\nvar anObject = __webpack_require__(9670);\nvar isObject = __webpack_require__(111);\nvar create = __webpack_require__(30);\nvar createPropertyDescriptor = __webpack_require__(9114);\nvar getIterator = __webpack_require__(8554);\nvar getIteratorMethod = __webpack_require__(1246);\nvar wellKnownSymbol = __webpack_require__(5112);\n\nvar $fetch = getBuiltIn('fetch');\nvar Headers = getBuiltIn('Headers');\nvar ITERATOR = wellKnownSymbol('iterator');\nvar URL_SEARCH_PARAMS = 'URLSearchParams';\nvar URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);\nvar getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);\n\nvar plus = /\\+/g;\nvar sequences = Array(4);\n\nvar percentSequence = function (bytes) {\n  return sequences[bytes - 1] || (sequences[bytes - 1] = RegExp('((?:%[\\\\da-f]{2}){' + bytes + '})', 'gi'));\n};\n\nvar percentDecode = function (sequence) {\n  try {\n    return decodeURIComponent(sequence);\n  } catch (error) {\n    return sequence;\n  }\n};\n\nvar deserialize = function (it) {\n  var result = it.replace(plus, ' ');\n  var bytes = 4;\n  try {\n    return decodeURIComponent(result);\n  } catch (error) {\n    while (bytes) {\n      result = result.replace(percentSequence(bytes--), percentDecode);\n    }\n    return result;\n  }\n};\n\nvar find = /[!'()~]|%20/g;\n\nvar replace = {\n  '!': '%21',\n  \"'\": '%27',\n  '(': '%28',\n  ')': '%29',\n  '~': '%7E',\n  '%20': '+'\n};\n\nvar replacer = function (match) {\n  return replace[match];\n};\n\nvar serialize = function (it) {\n  return encodeURIComponent(it).replace(find, replacer);\n};\n\nvar parseSearchParams = function (result, query) {\n  if (query) {\n    var attributes = query.split('&');\n    var index = 0;\n    var attribute, entry;\n    while (index < attributes.length) {\n      attribute = attributes[index++];\n      if (attribute.length) {\n        entry = attribute.split('=');\n        result.push({\n          key: deserialize(entry.shift()),\n          value: deserialize(entry.join('='))\n        });\n      }\n    }\n  }\n};\n\nvar updateSearchParams = function (query) {\n  this.entries.length = 0;\n  parseSearchParams(this.entries, query);\n};\n\nvar validateArgumentsLength = function (passed, required) {\n  if (passed < required) throw TypeError('Not enough arguments');\n};\n\nvar URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {\n  setInternalState(this, {\n    type: URL_SEARCH_PARAMS_ITERATOR,\n    iterator: getIterator(getInternalParamsState(params).entries),\n    kind: kind\n  });\n}, 'Iterator', function next() {\n  var state = getInternalIteratorState(this);\n  var kind = state.kind;\n  var step = state.iterator.next();\n  var entry = step.value;\n  if (!step.done) {\n    step.value = kind === 'keys' ? entry.key : kind === 'values' ? entry.value : [entry.key, entry.value];\n  } return step;\n});\n\n// `URLSearchParams` constructor\n// https://url.spec.whatwg.org/#interface-urlsearchparams\nvar URLSearchParamsConstructor = function URLSearchParams(/* init */) {\n  anInstance(this, URLSearchParamsConstructor, URL_SEARCH_PARAMS);\n  var init = arguments.length > 0 ? arguments[0] : undefined;\n  var that = this;\n  var entries = [];\n  var iteratorMethod, iterator, next, step, entryIterator, entryNext, first, second, key;\n\n  setInternalState(that, {\n    type: URL_SEARCH_PARAMS,\n    entries: entries,\n    updateURL: function () { /* empty */ },\n    updateSearchParams: updateSearchParams\n  });\n\n  if (init !== undefined) {\n    if (isObject(init)) {\n      iteratorMethod = getIteratorMethod(init);\n      if (typeof iteratorMethod === 'function') {\n        iterator = iteratorMethod.call(init);\n        next = iterator.next;\n        while (!(step = next.call(iterator)).done) {\n          entryIterator = getIterator(anObject(step.value));\n          entryNext = entryIterator.next;\n          if (\n            (first = entryNext.call(entryIterator)).done ||\n            (second = entryNext.call(entryIterator)).done ||\n            !entryNext.call(entryIterator).done\n          ) throw TypeError('Expected sequence with length 2');\n          entries.push({ key: first.value + '', value: second.value + '' });\n        }\n      } else for (key in init) if (hasOwn(init, key)) entries.push({ key: key, value: init[key] + '' });\n    } else {\n      parseSearchParams(entries, typeof init === 'string' ? init.charAt(0) === '?' ? init.slice(1) : init : init + '');\n    }\n  }\n};\n\nvar URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;\n\nredefineAll(URLSearchParamsPrototype, {\n  // `URLSearchParams.prototype.append` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-append\n  append: function append(name, value) {\n    validateArgumentsLength(arguments.length, 2);\n    var state = getInternalParamsState(this);\n    state.entries.push({ key: name + '', value: value + '' });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.delete` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-delete\n  'delete': function (name) {\n    validateArgumentsLength(arguments.length, 1);\n    var state = getInternalParamsState(this);\n    var entries = state.entries;\n    var key = name + '';\n    var index = 0;\n    while (index < entries.length) {\n      if (entries[index].key === key) entries.splice(index, 1);\n      else index++;\n    }\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.get` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-get\n  get: function get(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = name + '';\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) return entries[index].value;\n    }\n    return null;\n  },\n  // `URLSearchParams.prototype.getAll` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-getall\n  getAll: function getAll(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = name + '';\n    var result = [];\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) result.push(entries[index].value);\n    }\n    return result;\n  },\n  // `URLSearchParams.prototype.has` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-has\n  has: function has(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = name + '';\n    var index = 0;\n    while (index < entries.length) {\n      if (entries[index++].key === key) return true;\n    }\n    return false;\n  },\n  // `URLSearchParams.prototype.set` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-set\n  set: function set(name, value) {\n    validateArgumentsLength(arguments.length, 1);\n    var state = getInternalParamsState(this);\n    var entries = state.entries;\n    var found = false;\n    var key = name + '';\n    var val = value + '';\n    var index = 0;\n    var entry;\n    for (; index < entries.length; index++) {\n      entry = entries[index];\n      if (entry.key === key) {\n        if (found) entries.splice(index--, 1);\n        else {\n          found = true;\n          entry.value = val;\n        }\n      }\n    }\n    if (!found) entries.push({ key: key, value: val });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.sort` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-sort\n  sort: function sort() {\n    var state = getInternalParamsState(this);\n    var entries = state.entries;\n    // Array#sort is not stable in some engines\n    var slice = entries.slice();\n    var entry, entriesIndex, sliceIndex;\n    entries.length = 0;\n    for (sliceIndex = 0; sliceIndex < slice.length; sliceIndex++) {\n      entry = slice[sliceIndex];\n      for (entriesIndex = 0; entriesIndex < sliceIndex; entriesIndex++) {\n        if (entries[entriesIndex].key > entry.key) {\n          entries.splice(entriesIndex, 0, entry);\n          break;\n        }\n      }\n      if (entriesIndex === sliceIndex) entries.push(entry);\n    }\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.forEach` method\n  forEach: function forEach(callback /* , thisArg */) {\n    var entries = getInternalParamsState(this).entries;\n    var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined, 3);\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      boundFunction(entry.value, entry.key, this);\n    }\n  },\n  // `URLSearchParams.prototype.keys` method\n  keys: function keys() {\n    return new URLSearchParamsIterator(this, 'keys');\n  },\n  // `URLSearchParams.prototype.values` method\n  values: function values() {\n    return new URLSearchParamsIterator(this, 'values');\n  },\n  // `URLSearchParams.prototype.entries` method\n  entries: function entries() {\n    return new URLSearchParamsIterator(this, 'entries');\n  }\n}, { enumerable: true });\n\n// `URLSearchParams.prototype[@@iterator]` method\nredefine(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries);\n\n// `URLSearchParams.prototype.toString` method\n// https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior\nredefine(URLSearchParamsPrototype, 'toString', function toString() {\n  var entries = getInternalParamsState(this).entries;\n  var result = [];\n  var index = 0;\n  var entry;\n  while (index < entries.length) {\n    entry = entries[index++];\n    result.push(serialize(entry.key) + '=' + serialize(entry.value));\n  } return result.join('&');\n}, { enumerable: true });\n\nsetToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);\n\n$({ global: true, forced: !USE_NATIVE_URL }, {\n  URLSearchParams: URLSearchParamsConstructor\n});\n\n// Wrap `fetch` for correct work with polyfilled `URLSearchParams`\n// https://github.com/zloirock/core-js/issues/674\nif (!USE_NATIVE_URL && typeof $fetch == 'function' && typeof Headers == 'function') {\n  $({ global: true, enumerable: true, forced: true }, {\n    fetch: function fetch(input /* , init */) {\n      var args = [input];\n      var init, body, headers;\n      if (arguments.length > 1) {\n        init = arguments[1];\n        if (isObject(init)) {\n          body = init.body;\n          if (classof(body) === URL_SEARCH_PARAMS) {\n            headers = init.headers ? new Headers(init.headers) : new Headers();\n            if (!headers.has('content-type')) {\n              headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n            }\n            init = create(init, {\n              body: createPropertyDescriptor(0, String(body)),\n              headers: createPropertyDescriptor(0, headers)\n            });\n          }\n        }\n        args.push(init);\n      } return $fetch.apply(this, args);\n    }\n  });\n}\n\nmodule.exports = {\n  URLSearchParams: URLSearchParamsConstructor,\n  getState: getInternalParamsState\n};\n\n\n/***/ }),\n\n/***/ 285:\n/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {\n\n\"use strict\";\n\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\n__webpack_require__(8783);\nvar $ = __webpack_require__(2109);\nvar DESCRIPTORS = __webpack_require__(9781);\nvar USE_NATIVE_URL = __webpack_require__(590);\nvar global = __webpack_require__(7854);\nvar defineProperties = __webpack_require__(6048);\nvar redefine = __webpack_require__(1320);\nvar anInstance = __webpack_require__(5787);\nvar has = __webpack_require__(6656);\nvar assign = __webpack_require__(1574);\nvar arrayFrom = __webpack_require__(8457);\nvar codeAt = __webpack_require__(8710).codeAt;\nvar toASCII = __webpack_require__(3197);\nvar setToStringTag = __webpack_require__(8003);\nvar URLSearchParamsModule = __webpack_require__(1637);\nvar InternalStateModule = __webpack_require__(9909);\n\nvar NativeURL = global.URL;\nvar URLSearchParams = URLSearchParamsModule.URLSearchParams;\nvar getInternalSearchParamsState = URLSearchParamsModule.getState;\nvar setInternalState = InternalStateModule.set;\nvar getInternalURLState = InternalStateModule.getterFor('URL');\nvar floor = Math.floor;\nvar pow = Math.pow;\n\nvar INVALID_AUTHORITY = 'Invalid authority';\nvar INVALID_SCHEME = 'Invalid scheme';\nvar INVALID_HOST = 'Invalid host';\nvar INVALID_PORT = 'Invalid port';\n\nvar ALPHA = /[A-Za-z]/;\nvar ALPHANUMERIC = /[\\d+-.A-Za-z]/;\nvar DIGIT = /\\d/;\nvar HEX_START = /^(0x|0X)/;\nvar OCT = /^[0-7]+$/;\nvar DEC = /^\\d+$/;\nvar HEX = /^[\\dA-Fa-f]+$/;\n/* eslint-disable no-control-regex -- safe */\nvar FORBIDDEN_HOST_CODE_POINT = /[\\u0000\\t\\u000A\\u000D #%/:?@[\\\\]]/;\nvar FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\\u0000\\t\\u000A\\u000D #/:?@[\\\\]]/;\nvar LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE = /^[\\u0000-\\u001F ]+|[\\u0000-\\u001F ]+$/g;\nvar TAB_AND_NEW_LINE = /[\\t\\u000A\\u000D]/g;\n/* eslint-enable no-control-regex -- safe */\nvar EOF;\n\nvar parseHost = function (url, input) {\n  var result, codePoints, index;\n  if (input.charAt(0) == '[') {\n    if (input.charAt(input.length - 1) != ']') return INVALID_HOST;\n    result = parseIPv6(input.slice(1, -1));\n    if (!result) return INVALID_HOST;\n    url.host = result;\n  // opaque host\n  } else if (!isSpecial(url)) {\n    if (FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT.test(input)) return INVALID_HOST;\n    result = '';\n    codePoints = arrayFrom(input);\n    for (index = 0; index < codePoints.length; index++) {\n      result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);\n    }\n    url.host = result;\n  } else {\n    input = toASCII(input);\n    if (FORBIDDEN_HOST_CODE_POINT.test(input)) return INVALID_HOST;\n    result = parseIPv4(input);\n    if (result === null) return INVALID_HOST;\n    url.host = result;\n  }\n};\n\nvar parseIPv4 = function (input) {\n  var parts = input.split('.');\n  var partsLength, numbers, index, part, radix, number, ipv4;\n  if (parts.length && parts[parts.length - 1] == '') {\n    parts.pop();\n  }\n  partsLength = parts.length;\n  if (partsLength > 4) return input;\n  numbers = [];\n  for (index = 0; index < partsLength; index++) {\n    part = parts[index];\n    if (part == '') return input;\n    radix = 10;\n    if (part.length > 1 && part.charAt(0) == '0') {\n      radix = HEX_START.test(part) ? 16 : 8;\n      part = part.slice(radix == 8 ? 1 : 2);\n    }\n    if (part === '') {\n      number = 0;\n    } else {\n      if (!(radix == 10 ? DEC : radix == 8 ? OCT : HEX).test(part)) return input;\n      number = parseInt(part, radix);\n    }\n    numbers.push(number);\n  }\n  for (index = 0; index < partsLength; index++) {\n    number = numbers[index];\n    if (index == partsLength - 1) {\n      if (number >= pow(256, 5 - partsLength)) return null;\n    } else if (number > 255) return null;\n  }\n  ipv4 = numbers.pop();\n  for (index = 0; index < numbers.length; index++) {\n    ipv4 += numbers[index] * pow(256, 3 - index);\n  }\n  return ipv4;\n};\n\n// eslint-disable-next-line max-statements -- TODO\nvar parseIPv6 = function (input) {\n  var address = [0, 0, 0, 0, 0, 0, 0, 0];\n  var pieceIndex = 0;\n  var compress = null;\n  var pointer = 0;\n  var value, length, numbersSeen, ipv4Piece, number, swaps, swap;\n\n  var char = function () {\n    return input.charAt(pointer);\n  };\n\n  if (char() == ':') {\n    if (input.charAt(1) != ':') return;\n    pointer += 2;\n    pieceIndex++;\n    compress = pieceIndex;\n  }\n  while (char()) {\n    if (pieceIndex == 8) return;\n    if (char() == ':') {\n      if (compress !== null) return;\n      pointer++;\n      pieceIndex++;\n      compress = pieceIndex;\n      continue;\n    }\n    value = length = 0;\n    while (length < 4 && HEX.test(char())) {\n      value = value * 16 + parseInt(char(), 16);\n      pointer++;\n      length++;\n    }\n    if (char() == '.') {\n      if (length == 0) return;\n      pointer -= length;\n      if (pieceIndex > 6) return;\n      numbersSeen = 0;\n      while (char()) {\n        ipv4Piece = null;\n        if (numbersSeen > 0) {\n          if (char() == '.' && numbersSeen < 4) pointer++;\n          else return;\n        }\n        if (!DIGIT.test(char())) return;\n        while (DIGIT.test(char())) {\n          number = parseInt(char(), 10);\n          if (ipv4Piece === null) ipv4Piece = number;\n          else if (ipv4Piece == 0) return;\n          else ipv4Piece = ipv4Piece * 10 + number;\n          if (ipv4Piece > 255) return;\n          pointer++;\n        }\n        address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;\n        numbersSeen++;\n        if (numbersSeen == 2 || numbersSeen == 4) pieceIndex++;\n      }\n      if (numbersSeen != 4) return;\n      break;\n    } else if (char() == ':') {\n      pointer++;\n      if (!char()) return;\n    } else if (char()) return;\n    address[pieceIndex++] = value;\n  }\n  if (compress !== null) {\n    swaps = pieceIndex - compress;\n    pieceIndex = 7;\n    while (pieceIndex != 0 && swaps > 0) {\n      swap = address[pieceIndex];\n      address[pieceIndex--] = address[compress + swaps - 1];\n      address[compress + --swaps] = swap;\n    }\n  } else if (pieceIndex != 8) return;\n  return address;\n};\n\nvar findLongestZeroSequence = function (ipv6) {\n  var maxIndex = null;\n  var maxLength = 1;\n  var currStart = null;\n  var currLength = 0;\n  var index = 0;\n  for (; index < 8; index++) {\n    if (ipv6[index] !== 0) {\n      if (currLength > maxLength) {\n        maxIndex = currStart;\n        maxLength = currLength;\n      }\n      currStart = null;\n      currLength = 0;\n    } else {\n      if (currStart === null) currStart = index;\n      ++currLength;\n    }\n  }\n  if (currLength > maxLength) {\n    maxIndex = currStart;\n    maxLength = currLength;\n  }\n  return maxIndex;\n};\n\nvar serializeHost = function (host) {\n  var result, index, compress, ignore0;\n  // ipv4\n  if (typeof host == 'number') {\n    result = [];\n    for (index = 0; index < 4; index++) {\n      result.unshift(host % 256);\n      host = floor(host / 256);\n    } return result.join('.');\n  // ipv6\n  } else if (typeof host == 'object') {\n    result = '';\n    compress = findLongestZeroSequence(host);\n    for (index = 0; index < 8; index++) {\n      if (ignore0 && host[index] === 0) continue;\n      if (ignore0) ignore0 = false;\n      if (compress === index) {\n        result += index ? ':' : '::';\n        ignore0 = true;\n      } else {\n        result += host[index].toString(16);\n        if (index < 7) result += ':';\n      }\n    }\n    return '[' + result + ']';\n  } return host;\n};\n\nvar C0ControlPercentEncodeSet = {};\nvar fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {\n  ' ': 1, '\"': 1, '<': 1, '>': 1, '`': 1\n});\nvar pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {\n  '#': 1, '?': 1, '{': 1, '}': 1\n});\nvar userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {\n  '/': 1, ':': 1, ';': 1, '=': 1, '@': 1, '[': 1, '\\\\': 1, ']': 1, '^': 1, '|': 1\n});\n\nvar percentEncode = function (char, set) {\n  var code = codeAt(char, 0);\n  return code > 0x20 && code < 0x7F && !has(set, char) ? char : encodeURIComponent(char);\n};\n\nvar specialSchemes = {\n  ftp: 21,\n  file: null,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443\n};\n\nvar isSpecial = function (url) {\n  return has(specialSchemes, url.scheme);\n};\n\nvar includesCredentials = function (url) {\n  return url.username != '' || url.password != '';\n};\n\nvar cannotHaveUsernamePasswordPort = function (url) {\n  return !url.host || url.cannotBeABaseURL || url.scheme == 'file';\n};\n\nvar isWindowsDriveLetter = function (string, normalized) {\n  var second;\n  return string.length == 2 && ALPHA.test(string.charAt(0))\n    && ((second = string.charAt(1)) == ':' || (!normalized && second == '|'));\n};\n\nvar startsWithWindowsDriveLetter = function (string) {\n  var third;\n  return string.length > 1 && isWindowsDriveLetter(string.slice(0, 2)) && (\n    string.length == 2 ||\n    ((third = string.charAt(2)) === '/' || third === '\\\\' || third === '?' || third === '#')\n  );\n};\n\nvar shortenURLsPath = function (url) {\n  var path = url.path;\n  var pathSize = path.length;\n  if (pathSize && (url.scheme != 'file' || pathSize != 1 || !isWindowsDriveLetter(path[0], true))) {\n    path.pop();\n  }\n};\n\nvar isSingleDot = function (segment) {\n  return segment === '.' || segment.toLowerCase() === '%2e';\n};\n\nvar isDoubleDot = function (segment) {\n  segment = segment.toLowerCase();\n  return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';\n};\n\n// States:\nvar SCHEME_START = {};\nvar SCHEME = {};\nvar NO_SCHEME = {};\nvar SPECIAL_RELATIVE_OR_AUTHORITY = {};\nvar PATH_OR_AUTHORITY = {};\nvar RELATIVE = {};\nvar RELATIVE_SLASH = {};\nvar SPECIAL_AUTHORITY_SLASHES = {};\nvar SPECIAL_AUTHORITY_IGNORE_SLASHES = {};\nvar AUTHORITY = {};\nvar HOST = {};\nvar HOSTNAME = {};\nvar PORT = {};\nvar FILE = {};\nvar FILE_SLASH = {};\nvar FILE_HOST = {};\nvar PATH_START = {};\nvar PATH = {};\nvar CANNOT_BE_A_BASE_URL_PATH = {};\nvar QUERY = {};\nvar FRAGMENT = {};\n\n// eslint-disable-next-line max-statements -- TODO\nvar parseURL = function (url, input, stateOverride, base) {\n  var state = stateOverride || SCHEME_START;\n  var pointer = 0;\n  var buffer = '';\n  var seenAt = false;\n  var seenBracket = false;\n  var seenPasswordToken = false;\n  var codePoints, char, bufferCodePoints, failure;\n\n  if (!stateOverride) {\n    url.scheme = '';\n    url.username = '';\n    url.password = '';\n    url.host = null;\n    url.port = null;\n    url.path = [];\n    url.query = null;\n    url.fragment = null;\n    url.cannotBeABaseURL = false;\n    input = input.replace(LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE, '');\n  }\n\n  input = input.replace(TAB_AND_NEW_LINE, '');\n\n  codePoints = arrayFrom(input);\n\n  while (pointer <= codePoints.length) {\n    char = codePoints[pointer];\n    switch (state) {\n      case SCHEME_START:\n        if (char && ALPHA.test(char)) {\n          buffer += char.toLowerCase();\n          state = SCHEME;\n        } else if (!stateOverride) {\n          state = NO_SCHEME;\n          continue;\n        } else return INVALID_SCHEME;\n        break;\n\n      case SCHEME:\n        if (char && (ALPHANUMERIC.test(char) || char == '+' || char == '-' || char == '.')) {\n          buffer += char.toLowerCase();\n        } else if (char == ':') {\n          if (stateOverride && (\n            (isSpecial(url) != has(specialSchemes, buffer)) ||\n            (buffer == 'file' && (includesCredentials(url) || url.port !== null)) ||\n            (url.scheme == 'file' && !url.host)\n          )) return;\n          url.scheme = buffer;\n          if (stateOverride) {\n            if (isSpecial(url) && specialSchemes[url.scheme] == url.port) url.port = null;\n            return;\n          }\n          buffer = '';\n          if (url.scheme == 'file') {\n            state = FILE;\n          } else if (isSpecial(url) && base && base.scheme == url.scheme) {\n            state = SPECIAL_RELATIVE_OR_AUTHORITY;\n          } else if (isSpecial(url)) {\n            state = SPECIAL_AUTHORITY_SLASHES;\n          } else if (codePoints[pointer + 1] == '/') {\n            state = PATH_OR_AUTHORITY;\n            pointer++;\n          } else {\n            url.cannotBeABaseURL = true;\n            url.path.push('');\n            state = CANNOT_BE_A_BASE_URL_PATH;\n          }\n        } else if (!stateOverride) {\n          buffer = '';\n          state = NO_SCHEME;\n          pointer = 0;\n          continue;\n        } else return INVALID_SCHEME;\n        break;\n\n      case NO_SCHEME:\n        if (!base || (base.cannotBeABaseURL && char != '#')) return INVALID_SCHEME;\n        if (base.cannotBeABaseURL && char == '#') {\n          url.scheme = base.scheme;\n          url.path = base.path.slice();\n          url.query = base.query;\n          url.fragment = '';\n          url.cannotBeABaseURL = true;\n          state = FRAGMENT;\n          break;\n        }\n        state = base.scheme == 'file' ? FILE : RELATIVE;\n        continue;\n\n      case SPECIAL_RELATIVE_OR_AUTHORITY:\n        if (char == '/' && codePoints[pointer + 1] == '/') {\n          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          pointer++;\n        } else {\n          state = RELATIVE;\n          continue;\n        } break;\n\n      case PATH_OR_AUTHORITY:\n        if (char == '/') {\n          state = AUTHORITY;\n          break;\n        } else {\n          state = PATH;\n          continue;\n        }\n\n      case RELATIVE:\n        url.scheme = base.scheme;\n        if (char == EOF) {\n          url.username = base.username;\n          url.password = base.password;\n          url.host = base.host;\n          url.port = base.port;\n          url.path = base.path.slice();\n          url.query = base.query;\n        } else if (char == '/' || (char == '\\\\' && isSpecial(url))) {\n          state = RELATIVE_SLASH;\n        } else if (char == '?') {\n          url.username = base.username;\n          url.password = base.password;\n          url.host = base.host;\n          url.port = base.port;\n          url.path = base.path.slice();\n          url.query = '';\n          state = QUERY;\n        } else if (char == '#') {\n          url.username = base.username;\n          url.password = base.password;\n          url.host = base.host;\n          url.port = base.port;\n          url.path = base.path.slice();\n          url.query = base.query;\n          url.fragment = '';\n          state = FRAGMENT;\n        } else {\n          url.username = base.username;\n          url.password = base.password;\n          url.host = base.host;\n          url.port = base.port;\n          url.path = base.path.slice();\n          url.path.pop();\n          state = PATH;\n          continue;\n        } break;\n\n      case RELATIVE_SLASH:\n        if (isSpecial(url) && (char == '/' || char == '\\\\')) {\n          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n        } else if (char == '/') {\n          state = AUTHORITY;\n        } else {\n          url.username = base.username;\n          url.password = base.password;\n          url.host = base.host;\n          url.port = base.port;\n          state = PATH;\n          continue;\n        } break;\n\n      case SPECIAL_AUTHORITY_SLASHES:\n        state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n        if (char != '/' || buffer.charAt(pointer + 1) != '/') continue;\n        pointer++;\n        break;\n\n      case SPECIAL_AUTHORITY_IGNORE_SLASHES:\n        if (char != '/' && char != '\\\\') {\n          state = AUTHORITY;\n          continue;\n        } break;\n\n      case AUTHORITY:\n        if (char == '@') {\n          if (seenAt) buffer = '%40' + buffer;\n          seenAt = true;\n          bufferCodePoints = arrayFrom(buffer);\n          for (var i = 0; i < bufferCodePoints.length; i++) {\n            var codePoint = bufferCodePoints[i];\n            if (codePoint == ':' && !seenPasswordToken) {\n              seenPasswordToken = true;\n              continue;\n            }\n            var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);\n            if (seenPasswordToken) url.password += encodedCodePoints;\n            else url.username += encodedCodePoints;\n          }\n          buffer = '';\n        } else if (\n          char == EOF || char == '/' || char == '?' || char == '#' ||\n          (char == '\\\\' && isSpecial(url))\n        ) {\n          if (seenAt && buffer == '') return INVALID_AUTHORITY;\n          pointer -= arrayFrom(buffer).length + 1;\n          buffer = '';\n          state = HOST;\n        } else buffer += char;\n        break;\n\n      case HOST:\n      case HOSTNAME:\n        if (stateOverride && url.scheme == 'file') {\n          state = FILE_HOST;\n          continue;\n        } else if (char == ':' && !seenBracket) {\n          if (buffer == '') return INVALID_HOST;\n          failure = parseHost(url, buffer);\n          if (failure) return failure;\n          buffer = '';\n          state = PORT;\n          if (stateOverride == HOSTNAME) return;\n        } else if (\n          char == EOF || char == '/' || char == '?' || char == '#' ||\n          (char == '\\\\' && isSpecial(url))\n        ) {\n          if (isSpecial(url) && buffer == '') return INVALID_HOST;\n          if (stateOverride && buffer == '' && (includesCredentials(url) || url.port !== null)) return;\n          failure = parseHost(url, buffer);\n          if (failure) return failure;\n          buffer = '';\n          state = PATH_START;\n          if (stateOverride) return;\n          continue;\n        } else {\n          if (char == '[') seenBracket = true;\n          else if (char == ']') seenBracket = false;\n          buffer += char;\n        } break;\n\n      case PORT:\n        if (DIGIT.test(char)) {\n          buffer += char;\n        } else if (\n          char == EOF || char == '/' || char == '?' || char == '#' ||\n          (char == '\\\\' && isSpecial(url)) ||\n          stateOverride\n        ) {\n          if (buffer != '') {\n            var port = parseInt(buffer, 10);\n            if (port > 0xFFFF) return INVALID_PORT;\n            url.port = (isSpecial(url) && port === specialSchemes[url.scheme]) ? null : port;\n            buffer = '';\n          }\n          if (stateOverride) return;\n          state = PATH_START;\n          continue;\n        } else return INVALID_PORT;\n        break;\n\n      case FILE:\n        url.scheme = 'file';\n        if (char == '/' || char == '\\\\') state = FILE_SLASH;\n        else if (base && base.scheme == 'file') {\n          if (char == EOF) {\n            url.host = base.host;\n            url.path = base.path.slice();\n            url.query = base.query;\n          } else if (char == '?') {\n            url.host = base.host;\n            url.path = base.path.slice();\n            url.query = '';\n            state = QUERY;\n          } else if (char == '#') {\n            url.host = base.host;\n            url.path = base.path.slice();\n            url.query = base.query;\n            url.fragment = '';\n            state = FRAGMENT;\n          } else {\n            if (!startsWithWindowsDriveLetter(codePoints.slice(pointer).join(''))) {\n              url.host = base.host;\n              url.path = base.path.slice();\n              shortenURLsPath(url);\n            }\n            state = PATH;\n            continue;\n          }\n        } else {\n          state = PATH;\n          continue;\n        } break;\n\n      case FILE_SLASH:\n        if (char == '/' || char == '\\\\') {\n          state = FILE_HOST;\n          break;\n        }\n        if (base && base.scheme == 'file' && !startsWithWindowsDriveLetter(codePoints.slice(pointer).join(''))) {\n          if (isWindowsDriveLetter(base.path[0], true)) url.path.push(base.path[0]);\n          else url.host = base.host;\n        }\n        state = PATH;\n        continue;\n\n      case FILE_HOST:\n        if (char == EOF || char == '/' || char == '\\\\' || char == '?' || char == '#') {\n          if (!stateOverride && isWindowsDriveLetter(buffer)) {\n            state = PATH;\n          } else if (buffer == '') {\n            url.host = '';\n            if (stateOverride) return;\n            state = PATH_START;\n          } else {\n            failure = parseHost(url, buffer);\n            if (failure) return failure;\n            if (url.host == 'localhost') url.host = '';\n            if (stateOverride) return;\n            buffer = '';\n            state = PATH_START;\n          } continue;\n        } else buffer += char;\n        break;\n\n      case PATH_START:\n        if (isSpecial(url)) {\n          state = PATH;\n          if (char != '/' && char != '\\\\') continue;\n        } else if (!stateOverride && char == '?') {\n          url.query = '';\n          state = QUERY;\n        } else if (!stateOverride && char == '#') {\n          url.fragment = '';\n          state = FRAGMENT;\n        } else if (char != EOF) {\n          state = PATH;\n          if (char != '/') continue;\n        } break;\n\n      case PATH:\n        if (\n          char == EOF || char == '/' ||\n          (char == '\\\\' && isSpecial(url)) ||\n          (!stateOverride && (char == '?' || char == '#'))\n        ) {\n          if (isDoubleDot(buffer)) {\n            shortenURLsPath(url);\n            if (char != '/' && !(char == '\\\\' && isSpecial(url))) {\n              url.path.push('');\n            }\n          } else if (isSingleDot(buffer)) {\n            if (char != '/' && !(char == '\\\\' && isSpecial(url))) {\n              url.path.push('');\n            }\n          } else {\n            if (url.scheme == 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {\n              if (url.host) url.host = '';\n              buffer = buffer.charAt(0) + ':'; // normalize windows drive letter\n            }\n            url.path.push(buffer);\n          }\n          buffer = '';\n          if (url.scheme == 'file' && (char == EOF || char == '?' || char == '#')) {\n            while (url.path.length > 1 && url.path[0] === '') {\n              url.path.shift();\n            }\n          }\n          if (char == '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (char == '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          }\n        } else {\n          buffer += percentEncode(char, pathPercentEncodeSet);\n        } break;\n\n      case CANNOT_BE_A_BASE_URL_PATH:\n        if (char == '?') {\n          url.query = '';\n          state = QUERY;\n        } else if (char == '#') {\n          url.fragment = '';\n          state = FRAGMENT;\n        } else if (char != EOF) {\n          url.path[0] += percentEncode(char, C0ControlPercentEncodeSet);\n        } break;\n\n      case QUERY:\n        if (!stateOverride && char == '#') {\n          url.fragment = '';\n          state = FRAGMENT;\n        } else if (char != EOF) {\n          if (char == \"'\" && isSpecial(url)) url.query += '%27';\n          else if (char == '#') url.query += '%23';\n          else url.query += percentEncode(char, C0ControlPercentEncodeSet);\n        } break;\n\n      case FRAGMENT:\n        if (char != EOF) url.fragment += percentEncode(char, fragmentPercentEncodeSet);\n        break;\n    }\n\n    pointer++;\n  }\n};\n\n// `URL` constructor\n// https://url.spec.whatwg.org/#url-class\nvar URLConstructor = function URL(url /* , base */) {\n  var that = anInstance(this, URLConstructor, 'URL');\n  var base = arguments.length > 1 ? arguments[1] : undefined;\n  var urlString = String(url);\n  var state = setInternalState(that, { type: 'URL' });\n  var baseState, failure;\n  if (base !== undefined) {\n    if (base instanceof URLConstructor) baseState = getInternalURLState(base);\n    else {\n      failure = parseURL(baseState = {}, String(base));\n      if (failure) throw TypeError(failure);\n    }\n  }\n  failure = parseURL(state, urlString, null, baseState);\n  if (failure) throw TypeError(failure);\n  var searchParams = state.searchParams = new URLSearchParams();\n  var searchParamsState = getInternalSearchParamsState(searchParams);\n  searchParamsState.updateSearchParams(state.query);\n  searchParamsState.updateURL = function () {\n    state.query = String(searchParams) || null;\n  };\n  if (!DESCRIPTORS) {\n    that.href = serializeURL.call(that);\n    that.origin = getOrigin.call(that);\n    that.protocol = getProtocol.call(that);\n    that.username = getUsername.call(that);\n    that.password = getPassword.call(that);\n    that.host = getHost.call(that);\n    that.hostname = getHostname.call(that);\n    that.port = getPort.call(that);\n    that.pathname = getPathname.call(that);\n    that.search = getSearch.call(that);\n    that.searchParams = getSearchParams.call(that);\n    that.hash = getHash.call(that);\n  }\n};\n\nvar URLPrototype = URLConstructor.prototype;\n\nvar serializeURL = function () {\n  var url = getInternalURLState(this);\n  var scheme = url.scheme;\n  var username = url.username;\n  var password = url.password;\n  var host = url.host;\n  var port = url.port;\n  var path = url.path;\n  var query = url.query;\n  var fragment = url.fragment;\n  var output = scheme + ':';\n  if (host !== null) {\n    output += '//';\n    if (includesCredentials(url)) {\n      output += username + (password ? ':' + password : '') + '@';\n    }\n    output += serializeHost(host);\n    if (port !== null) output += ':' + port;\n  } else if (scheme == 'file') output += '//';\n  output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + path.join('/') : '';\n  if (query !== null) output += '?' + query;\n  if (fragment !== null) output += '#' + fragment;\n  return output;\n};\n\nvar getOrigin = function () {\n  var url = getInternalURLState(this);\n  var scheme = url.scheme;\n  var port = url.port;\n  if (scheme == 'blob') try {\n    return new URL(scheme.path[0]).origin;\n  } catch (error) {\n    return 'null';\n  }\n  if (scheme == 'file' || !isSpecial(url)) return 'null';\n  return scheme + '://' + serializeHost(url.host) + (port !== null ? ':' + port : '');\n};\n\nvar getProtocol = function () {\n  return getInternalURLState(this).scheme + ':';\n};\n\nvar getUsername = function () {\n  return getInternalURLState(this).username;\n};\n\nvar getPassword = function () {\n  return getInternalURLState(this).password;\n};\n\nvar getHost = function () {\n  var url = getInternalURLState(this);\n  var host = url.host;\n  var port = url.port;\n  return host === null ? ''\n    : port === null ? serializeHost(host)\n    : serializeHost(host) + ':' + port;\n};\n\nvar getHostname = function () {\n  var host = getInternalURLState(this).host;\n  return host === null ? '' : serializeHost(host);\n};\n\nvar getPort = function () {\n  var port = getInternalURLState(this).port;\n  return port === null ? '' : String(port);\n};\n\nvar getPathname = function () {\n  var url = getInternalURLState(this);\n  var path = url.path;\n  return url.cannotBeABaseURL ? path[0] : path.length ? '/' + path.join('/') : '';\n};\n\nvar getSearch = function () {\n  var query = getInternalURLState(this).query;\n  return query ? '?' + query : '';\n};\n\nvar getSearchParams = function () {\n  return getInternalURLState(this).searchParams;\n};\n\nvar getHash = function () {\n  var fragment = getInternalURLState(this).fragment;\n  return fragment ? '#' + fragment : '';\n};\n\nvar accessorDescriptor = function (getter, setter) {\n  return { get: getter, set: setter, configurable: true, enumerable: true };\n};\n\nif (DESCRIPTORS) {\n  defineProperties(URLPrototype, {\n    // `URL.prototype.href` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-href\n    href: accessorDescriptor(serializeURL, function (href) {\n      var url = getInternalURLState(this);\n      var urlString = String(href);\n      var failure = parseURL(url, urlString);\n      if (failure) throw TypeError(failure);\n      getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);\n    }),\n    // `URL.prototype.origin` getter\n    // https://url.spec.whatwg.org/#dom-url-origin\n    origin: accessorDescriptor(getOrigin),\n    // `URL.prototype.protocol` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-protocol\n    protocol: accessorDescriptor(getProtocol, function (protocol) {\n      var url = getInternalURLState(this);\n      parseURL(url, String(protocol) + ':', SCHEME_START);\n    }),\n    // `URL.prototype.username` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-username\n    username: accessorDescriptor(getUsername, function (username) {\n      var url = getInternalURLState(this);\n      var codePoints = arrayFrom(String(username));\n      if (cannotHaveUsernamePasswordPort(url)) return;\n      url.username = '';\n      for (var i = 0; i < codePoints.length; i++) {\n        url.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n      }\n    }),\n    // `URL.prototype.password` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-password\n    password: accessorDescriptor(getPassword, function (password) {\n      var url = getInternalURLState(this);\n      var codePoints = arrayFrom(String(password));\n      if (cannotHaveUsernamePasswordPort(url)) return;\n      url.password = '';\n      for (var i = 0; i < codePoints.length; i++) {\n        url.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n      }\n    }),\n    // `URL.prototype.host` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-host\n    host: accessorDescriptor(getHost, function (host) {\n      var url = getInternalURLState(this);\n      if (url.cannotBeABaseURL) return;\n      parseURL(url, String(host), HOST);\n    }),\n    // `URL.prototype.hostname` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-hostname\n    hostname: accessorDescriptor(getHostname, function (hostname) {\n      var url = getInternalURLState(this);\n      if (url.cannotBeABaseURL) return;\n      parseURL(url, String(hostname), HOSTNAME);\n    }),\n    // `URL.prototype.port` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-port\n    port: accessorDescriptor(getPort, function (port) {\n      var url = getInternalURLState(this);\n      if (cannotHaveUsernamePasswordPort(url)) return;\n      port = String(port);\n      if (port == '') url.port = null;\n      else parseURL(url, port, PORT);\n    }),\n    // `URL.prototype.pathname` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-pathname\n    pathname: accessorDescriptor(getPathname, function (pathname) {\n      var url = getInternalURLState(this);\n      if (url.cannotBeABaseURL) return;\n      url.path = [];\n      parseURL(url, pathname + '', PATH_START);\n    }),\n    // `URL.prototype.search` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-search\n    search: accessorDescriptor(getSearch, function (search) {\n      var url = getInternalURLState(this);\n      search = String(search);\n      if (search == '') {\n        url.query = null;\n      } else {\n        if ('?' == search.charAt(0)) search = search.slice(1);\n        url.query = '';\n        parseURL(url, search, QUERY);\n      }\n      getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);\n    }),\n    // `URL.prototype.searchParams` getter\n    // https://url.spec.whatwg.org/#dom-url-searchparams\n    searchParams: accessorDescriptor(getSearchParams),\n    // `URL.prototype.hash` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-hash\n    hash: accessorDescriptor(getHash, function (hash) {\n      var url = getInternalURLState(this);\n      hash = String(hash);\n      if (hash == '') {\n        url.fragment = null;\n        return;\n      }\n      if ('#' == hash.charAt(0)) hash = hash.slice(1);\n      url.fragment = '';\n      parseURL(url, hash, FRAGMENT);\n    })\n  });\n}\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\nredefine(URLPrototype, 'toJSON', function toJSON() {\n  return serializeURL.call(this);\n}, { enumerable: true });\n\n// `URL.prototype.toString` method\n// https://url.spec.whatwg.org/#URL-stringification-behavior\nredefine(URLPrototype, 'toString', function toString() {\n  return serializeURL.call(this);\n}, { enumerable: true });\n\nif (NativeURL) {\n  var nativeCreateObjectURL = NativeURL.createObjectURL;\n  var nativeRevokeObjectURL = NativeURL.revokeObjectURL;\n  // `URL.createObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  if (nativeCreateObjectURL) redefine(URLConstructor, 'createObjectURL', function createObjectURL(blob) {\n    return nativeCreateObjectURL.apply(NativeURL, arguments);\n  });\n  // `URL.revokeObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  if (nativeRevokeObjectURL) redefine(URLConstructor, 'revokeObjectURL', function revokeObjectURL(url) {\n    return nativeRevokeObjectURL.apply(NativeURL, arguments);\n  });\n}\n\nsetToStringTag(URLConstructor, 'URL');\n\n$({ global: true, forced: !USE_NATIVE_URL, sham: !DESCRIPTORS }, {\n  URL: URLConstructor\n});\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(__webpack_module_cache__[moduleId]) {\n/******/ \t\t\treturn __webpack_module_cache__[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/global */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.g = (function() {\n/******/ \t\t\tif (typeof globalThis === 'object') return globalThis;\n/******/ \t\t\ttry {\n/******/ \t\t\t\treturn this || new Function('return this')();\n/******/ \t\t\t} catch (e) {\n/******/ \t\t\t\tif (typeof window === 'object') return window;\n/******/ \t\t\t}\n/******/ \t\t})();\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t!function() {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = function(exports) {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n!function() {\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"Dropzone\": function() { return /* reexport */ Dropzone; },\n  \"default\": function() { return /* binding */ dropzone_dist; }\n});\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__(2222);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__(7327);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.index-of.js\nvar es_array_index_of = __webpack_require__(2772);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js\nvar es_array_iterator = __webpack_require__(6992);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js\nvar es_array_map = __webpack_require__(1249);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js\nvar es_array_slice = __webpack_require__(7042);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.splice.js\nvar es_array_splice = __webpack_require__(561);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.constructor.js\nvar es_array_buffer_constructor = __webpack_require__(8264);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js\nvar es_function_name = __webpack_require__(8309);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-prototype-of.js\nvar es_object_get_prototype_of = __webpack_require__(489);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(1539);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__(4916);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js\nvar es_regexp_to_string = __webpack_require__(9714);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js\nvar es_string_iterator = __webpack_require__(8783);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js\nvar es_string_match = __webpack_require__(4723);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(5306);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.split.js\nvar es_string_split = __webpack_require__(3123);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim.js\nvar es_string_trim = __webpack_require__(3210);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-array.js\nvar es_typed_array_uint8_array = __webpack_require__(2472);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.copy-within.js\nvar es_typed_array_copy_within = __webpack_require__(2990);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.every.js\nvar es_typed_array_every = __webpack_require__(8927);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.fill.js\nvar es_typed_array_fill = __webpack_require__(3105);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.filter.js\nvar es_typed_array_filter = __webpack_require__(5035);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find.js\nvar es_typed_array_find = __webpack_require__(4345);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-index.js\nvar es_typed_array_find_index = __webpack_require__(7174);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.for-each.js\nvar es_typed_array_for_each = __webpack_require__(2846);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.includes.js\nvar es_typed_array_includes = __webpack_require__(4731);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.index-of.js\nvar es_typed_array_index_of = __webpack_require__(7209);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.iterator.js\nvar es_typed_array_iterator = __webpack_require__(6319);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.join.js\nvar es_typed_array_join = __webpack_require__(8867);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.last-index-of.js\nvar es_typed_array_last_index_of = __webpack_require__(7789);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.map.js\nvar es_typed_array_map = __webpack_require__(3739);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce.js\nvar es_typed_array_reduce = __webpack_require__(9368);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce-right.js\nvar es_typed_array_reduce_right = __webpack_require__(4483);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reverse.js\nvar es_typed_array_reverse = __webpack_require__(2056);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.set.js\nvar es_typed_array_set = __webpack_require__(3462);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.slice.js\nvar es_typed_array_slice = __webpack_require__(678);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.some.js\nvar es_typed_array_some = __webpack_require__(7462);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.sort.js\nvar es_typed_array_sort = __webpack_require__(3824);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.subarray.js\nvar es_typed_array_subarray = __webpack_require__(5021);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-locale-string.js\nvar es_typed_array_to_locale_string = __webpack_require__(2974);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-string.js\nvar es_typed_array_to_string = __webpack_require__(5016);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(4747);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(3948);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js\nvar web_url = __webpack_require__(285);\n;// CONCATENATED MODULE: ./src/emitter.js\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// The Emitter class provides the ability to call `.on()` on Dropzone to listen\n// to events.\n// It is strongly based on component's emitter class, and I removed the\n// functionality because of the dependency hell with different frameworks.\nvar Emitter = /*#__PURE__*/function () {\n  function Emitter() {\n    _classCallCheck(this, Emitter);\n  }\n\n  _createClass(Emitter, [{\n    key: \"on\",\n    value: // Add an event listener for given event\n    function on(event, fn) {\n      this._callbacks = this._callbacks || {}; // Create namespace for this event\n\n      if (!this._callbacks[event]) {\n        this._callbacks[event] = [];\n      }\n\n      this._callbacks[event].push(fn);\n\n      return this;\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      this._callbacks = this._callbacks || {};\n      var callbacks = this._callbacks[event];\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (callbacks) {\n        var _iterator = _createForOfIteratorHelper(callbacks, true),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var callback = _step.value;\n            callback.apply(this, args);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } // trigger a corresponding DOM event\n\n\n      if (this.element) {\n        this.element.dispatchEvent(this.makeEvent(\"dropzone:\" + event, {\n          args: args\n        }));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"makeEvent\",\n    value: function makeEvent(eventName, detail) {\n      var params = {\n        bubbles: true,\n        cancelable: true,\n        detail: detail\n      };\n\n      if (typeof window.CustomEvent === \"function\") {\n        return new CustomEvent(eventName, params);\n      } else {\n        // IE 11 support\n        // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n        var evt = document.createEvent(\"CustomEvent\");\n        evt.initCustomEvent(eventName, params.bubbles, params.cancelable, params.detail);\n        return evt;\n      }\n    } // Remove event listener for given event. If fn is not provided, all event\n    // listeners for that event will be removed. If neither is provided, all\n    // event listeners will be removed.\n\n  }, {\n    key: \"off\",\n    value: function off(event, fn) {\n      if (!this._callbacks || arguments.length === 0) {\n        this._callbacks = {};\n        return this;\n      } // specific event\n\n\n      var callbacks = this._callbacks[event];\n\n      if (!callbacks) {\n        return this;\n      } // remove all handlers\n\n\n      if (arguments.length === 1) {\n        delete this._callbacks[event];\n        return this;\n      } // remove specific handler\n\n\n      for (var i = 0; i < callbacks.length; i++) {\n        var callback = callbacks[i];\n\n        if (callback === fn) {\n          callbacks.splice(i, 1);\n          break;\n        }\n      }\n\n      return this;\n    }\n  }]);\n\n  return Emitter;\n}();\n\n\n;// CONCATENATED MODULE: ./src/preview-template.html\n// Module\nvar code = \"<div class=\\\"dz-preview dz-file-preview\\\"> <div class=\\\"dz-image\\\"><img data-dz-thumbnail/></div> <div class=\\\"dz-details\\\"> <div class=\\\"dz-size\\\"><span data-dz-size></span></div> <div class=\\\"dz-filename\\\"><span data-dz-name></span></div> </div> <div class=\\\"dz-progress\\\"> <span class=\\\"dz-upload\\\" data-dz-uploadprogress></span> </div> <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div> <div class=\\\"dz-success-mark\\\"> <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"> <title>Check</title> <g stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"> <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\"></path> </g> </svg> </div> <div class=\\\"dz-error-mark\\\"> <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"> <title>Error</title> <g stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\"> <g stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\"> <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\"></path> </g> </g> </svg> </div> </div> \";\n// Exports\n/* harmony default export */ var preview_template = (code);\n;// CONCATENATED MODULE: ./src/options.js\n\n\n\n\n\nfunction options_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = options_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction options_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return options_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return options_arrayLikeToArray(o, minLen); }\n\nfunction options_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\nvar defaultOptions = {\n  /**\n   * Has to be specified on elements other than form (or when the form\n   * doesn't have an `action` attribute). You can also\n   * provide a function that will be called with `files` and\n   * must return the url (since `v3.12.0`)\n   */\n  url: null,\n\n  /**\n   * Can be changed to `\"put\"` if necessary. You can also provide a function\n   * that will be called with `files` and must return the method (since `v3.12.0`).\n   */\n  method: \"post\",\n\n  /**\n   * Will be set on the XHRequest.\n   */\n  withCredentials: false,\n\n  /**\n   * The timeout for the XHR requests in milliseconds (since `v4.4.0`).\n   * If set to null or 0, no timeout is going to be set.\n   */\n  timeout: null,\n\n  /**\n   * How many file uploads to process in parallel (See the\n   * Enqueuing file uploads documentation section for more info)\n   */\n  parallelUploads: 2,\n\n  /**\n   * Whether to send multiple files in one request. If\n   * this it set to true, then the fallback file input element will\n   * have the `multiple` attribute as well. This option will\n   * also trigger additional events (like `processingmultiple`). See the events\n   * documentation section for more information.\n   */\n  uploadMultiple: false,\n\n  /**\n   * Whether you want files to be uploaded in chunks to your server. This can't be\n   * used in combination with `uploadMultiple`.\n   *\n   * See [chunksUploaded](#config-chunksUploaded) for the callback to finalise an upload.\n   */\n  chunking: false,\n\n  /**\n   * If `chunking` is enabled, this defines whether **every** file should be chunked,\n   * even if the file size is below chunkSize. This means, that the additional chunk\n   * form data will be submitted and the `chunksUploaded` callback will be invoked.\n   */\n  forceChunking: false,\n\n  /**\n   * If `chunking` is `true`, then this defines the chunk size in bytes.\n   */\n  chunkSize: 2000000,\n\n  /**\n   * If `true`, the individual chunks of a file are being uploaded simultaneously.\n   */\n  parallelChunkUploads: false,\n\n  /**\n   * Whether a chunk should be retried if it fails.\n   */\n  retryChunks: false,\n\n  /**\n   * If `retryChunks` is true, how many times should it be retried.\n   */\n  retryChunksLimit: 3,\n\n  /**\n   * The maximum filesize (in bytes) that is allowed to be uploaded.\n   */\n  maxFilesize: 256,\n\n  /**\n   * The name of the file param that gets transferred.\n   * **NOTE**: If you have the option  `uploadMultiple` set to `true`, then\n   * Dropzone will append `[]` to the name.\n   */\n  paramName: \"file\",\n\n  /**\n   * Whether thumbnails for images should be generated\n   */\n  createImageThumbnails: true,\n\n  /**\n   * In MB. When the filename exceeds this limit, the thumbnail will not be generated.\n   */\n  maxThumbnailFilesize: 10,\n\n  /**\n   * If `null`, the ratio of the image will be used to calculate it.\n   */\n  thumbnailWidth: 120,\n\n  /**\n   * The same as `thumbnailWidth`. If both are null, images will not be resized.\n   */\n  thumbnailHeight: 120,\n\n  /**\n   * How the images should be scaled down in case both, `thumbnailWidth` and `thumbnailHeight` are provided.\n   * Can be either `contain` or `crop`.\n   */\n  thumbnailMethod: \"crop\",\n\n  /**\n   * If set, images will be resized to these dimensions before being **uploaded**.\n   * If only one, `resizeWidth` **or** `resizeHeight` is provided, the original aspect\n   * ratio of the file will be preserved.\n   *\n   * The `options.transformFile` function uses these options, so if the `transformFile` function\n   * is overridden, these options don't do anything.\n   */\n  resizeWidth: null,\n\n  /**\n   * See `resizeWidth`.\n   */\n  resizeHeight: null,\n\n  /**\n   * The mime type of the resized image (before it gets uploaded to the server).\n   * If `null` the original mime type will be used. To force jpeg, for example, use `image/jpeg`.\n   * See `resizeWidth` for more information.\n   */\n  resizeMimeType: null,\n\n  /**\n   * The quality of the resized images. See `resizeWidth`.\n   */\n  resizeQuality: 0.8,\n\n  /**\n   * How the images should be scaled down in case both, `resizeWidth` and `resizeHeight` are provided.\n   * Can be either `contain` or `crop`.\n   */\n  resizeMethod: \"contain\",\n\n  /**\n   * The base that is used to calculate the **displayed** filesize. You can\n   * change this to 1024 if you would rather display kibibytes, mebibytes,\n   * etc... 1024 is technically incorrect, because `1024 bytes` are `1 kibibyte`\n   * not `1 kilobyte`. You can change this to `1024` if you don't care about\n   * validity.\n   */\n  filesizeBase: 1000,\n\n  /**\n   * If not `null` defines how many files this Dropzone handles. If it exceeds,\n   * the event `maxfilesexceeded` will be called. The dropzone element gets the\n   * class `dz-max-files-reached` accordingly so you can provide visual\n   * feedback.\n   */\n  maxFiles: null,\n\n  /**\n   * An optional object to send additional headers to the server. Eg:\n   * `{ \"My-Awesome-Header\": \"header value\" }`\n   */\n  headers: null,\n\n  /**\n   * If `true`, the dropzone element itself will be clickable, if `false`\n   * nothing will be clickable.\n   *\n   * You can also pass an HTML element, a CSS selector (for multiple elements)\n   * or an array of those. In that case, all of those elements will trigger an\n   * upload when clicked.\n   */\n  clickable: true,\n\n  /**\n   * Whether hidden files in directories should be ignored.\n   */\n  ignoreHiddenFiles: true,\n\n  /**\n   * The default implementation of `accept` checks the file's mime type or\n   * extension against this list. This is a comma separated list of mime\n   * types or file extensions.\n   *\n   * Eg.: `image/*,application/pdf,.psd`\n   *\n   * If the Dropzone is `clickable` this option will also be used as\n   * [`accept`](https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept)\n   * parameter on the hidden file input as well.\n   */\n  acceptedFiles: null,\n\n  /**\n   * **Deprecated!**\n   * Use acceptedFiles instead.\n   */\n  acceptedMimeTypes: null,\n\n  /**\n   * If false, files will be added to the queue but the queue will not be\n   * processed automatically.\n   * This can be useful if you need some additional user input before sending\n   * files (or if you want want all files sent at once).\n   * If you're ready to send the file simply call `myDropzone.processQueue()`.\n   *\n   * See the [enqueuing file uploads](#enqueuing-file-uploads) documentation\n   * section for more information.\n   */\n  autoProcessQueue: true,\n\n  /**\n   * If false, files added to the dropzone will not be queued by default.\n   * You'll have to call `enqueueFile(file)` manually.\n   */\n  autoQueue: true,\n\n  /**\n   * If `true`, this will add a link to every file preview to remove or cancel (if\n   * already uploading) the file. The `dictCancelUpload`, `dictCancelUploadConfirmation`\n   * and `dictRemoveFile` options are used for the wording.\n   */\n  addRemoveLinks: false,\n\n  /**\n   * Defines where to display the file previews  if `null` the\n   * Dropzone element itself is used. Can be a plain `HTMLElement` or a CSS\n   * selector. The element should have the `dropzone-previews` class so\n   * the previews are displayed properly.\n   */\n  previewsContainer: null,\n\n  /**\n   * Set this to `true` if you don't want previews to be shown.\n   */\n  disablePreviews: false,\n\n  /**\n   * This is the element the hidden input field (which is used when clicking on the\n   * dropzone to trigger file selection) will be appended to. This might\n   * be important in case you use frameworks to switch the content of your page.\n   *\n   * Can be a selector string, or an element directly.\n   */\n  hiddenInputContainer: \"body\",\n\n  /**\n   * If null, no capture type will be specified\n   * If camera, mobile devices will skip the file selection and choose camera\n   * If microphone, mobile devices will skip the file selection and choose the microphone\n   * If camcorder, mobile devices will skip the file selection and choose the camera in video mode\n   * On apple devices multiple must be set to false.  AcceptedFiles may need to\n   * be set to an appropriate mime type (e.g. \"image/*\", \"audio/*\", or \"video/*\").\n   */\n  capture: null,\n\n  /**\n   * **Deprecated**. Use `renameFile` instead.\n   */\n  renameFilename: null,\n\n  /**\n   * A function that is invoked before the file is uploaded to the server and renames the file.\n   * This function gets the `File` as argument and can use the `file.name`. The actual name of the\n   * file that gets used during the upload can be accessed through `file.upload.filename`.\n   */\n  renameFile: null,\n\n  /**\n   * If `true` the fallback will be forced. This is very useful to test your server\n   * implementations first and make sure that everything works as\n   * expected without dropzone if you experience problems, and to test\n   * how your fallbacks will look.\n   */\n  forceFallback: false,\n\n  /**\n   * The text used before any files are dropped.\n   */\n  dictDefaultMessage: \"Drop files here to upload\",\n\n  /**\n   * The text that replaces the default message text it the browser is not supported.\n   */\n  dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\n\n  /**\n   * The text that will be added before the fallback form.\n   * If you provide a  fallback element yourself, or if this option is `null` this will\n   * be ignored.\n   */\n  dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\n\n  /**\n   * If the filesize is too big.\n   * `{{filesize}}` and `{{maxFilesize}}` will be replaced with the respective configuration values.\n   */\n  dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\n\n  /**\n   * If the file doesn't match the file type.\n   */\n  dictInvalidFileType: \"You can't upload files of this type.\",\n\n  /**\n   * If the server response was invalid.\n   * `{{statusCode}}` will be replaced with the servers status code.\n   */\n  dictResponseError: \"Server responded with {{statusCode}} code.\",\n\n  /**\n   * If `addRemoveLinks` is true, the text to be used for the cancel upload link.\n   */\n  dictCancelUpload: \"Cancel upload\",\n\n  /**\n   * The text that is displayed if an upload was manually canceled\n   */\n  dictUploadCanceled: \"Upload canceled.\",\n\n  /**\n   * If `addRemoveLinks` is true, the text to be used for confirmation when cancelling upload.\n   */\n  dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\n\n  /**\n   * If `addRemoveLinks` is true, the text to be used to remove a file.\n   */\n  dictRemoveFile: \"Remove file\",\n\n  /**\n   * If this is not null, then the user will be prompted before removing a file.\n   */\n  dictRemoveFileConfirmation: null,\n\n  /**\n   * Displayed if `maxFiles` is st and exceeded.\n   * The string `{{maxFiles}}` will be replaced by the configuration value.\n   */\n  dictMaxFilesExceeded: \"You can not upload any more files.\",\n\n  /**\n   * Allows you to translate the different units. Starting with `tb` for terabytes and going down to\n   * `b` for bytes.\n   */\n  dictFileSizeUnits: {\n    tb: \"TB\",\n    gb: \"GB\",\n    mb: \"MB\",\n    kb: \"KB\",\n    b: \"b\"\n  },\n\n  /**\n   * Called when dropzone initialized\n   * You can add event listeners here\n   */\n  init: function init() {},\n\n  /**\n   * Can be an **object** of additional parameters to transfer to the server, **or** a `Function`\n   * that gets invoked with the `files`, `xhr` and, if it's a chunked upload, `chunk` arguments. In case\n   * of a function, this needs to return a map.\n   *\n   * The default implementation does nothing for normal uploads, but adds relevant information for\n   * chunked uploads.\n   *\n   * This is the same as adding hidden input fields in the form element.\n   */\n  params: function params(files, xhr, chunk) {\n    if (chunk) {\n      return {\n        dzuuid: chunk.file.upload.uuid,\n        dzchunkindex: chunk.index,\n        dztotalfilesize: chunk.file.size,\n        dzchunksize: this.options.chunkSize,\n        dztotalchunkcount: chunk.file.upload.totalChunkCount,\n        dzchunkbyteoffset: chunk.index * this.options.chunkSize\n      };\n    }\n  },\n\n  /**\n   * A function that gets a [file](https://developer.mozilla.org/en-US/docs/DOM/File)\n   * and a `done` function as parameters.\n   *\n   * If the done function is invoked without arguments, the file is \"accepted\" and will\n   * be processed. If you pass an error message, the file is rejected, and the error\n   * message will be displayed.\n   * This function will not be called if the file is too big or doesn't match the mime types.\n   */\n  accept: function accept(file, done) {\n    return done();\n  },\n\n  /**\n   * The callback that will be invoked when all chunks have been uploaded for a file.\n   * It gets the file for which the chunks have been uploaded as the first parameter,\n   * and the `done` function as second. `done()` needs to be invoked when everything\n   * needed to finish the upload process is done.\n   */\n  chunksUploaded: function chunksUploaded(file, done) {\n    done();\n  },\n\n  /**\n   * Gets called when the browser is not supported.\n   * The default implementation shows the fallback input field and adds\n   * a text.\n   */\n  fallback: function fallback() {\n    // This code should pass in IE7... :(\n    var messageElement;\n    this.element.className = \"\".concat(this.element.className, \" dz-browser-not-supported\");\n\n    var _iterator = options_createForOfIteratorHelper(this.element.getElementsByTagName(\"div\"), true),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var child = _step.value;\n\n        if (/(^| )dz-message($| )/.test(child.className)) {\n          messageElement = child;\n          child.className = \"dz-message\"; // Removes the 'dz-default' class\n\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    if (!messageElement) {\n      messageElement = Dropzone.createElement('<div class=\"dz-message\"><span></span></div>');\n      this.element.appendChild(messageElement);\n    }\n\n    var span = messageElement.getElementsByTagName(\"span\")[0];\n\n    if (span) {\n      if (span.textContent != null) {\n        span.textContent = this.options.dictFallbackMessage;\n      } else if (span.innerText != null) {\n        span.innerText = this.options.dictFallbackMessage;\n      }\n    }\n\n    return this.element.appendChild(this.getFallbackForm());\n  },\n\n  /**\n   * Gets called to calculate the thumbnail dimensions.\n   *\n   * It gets `file`, `width` and `height` (both may be `null`) as parameters and must return an object containing:\n   *\n   *  - `srcWidth` & `srcHeight` (required)\n   *  - `trgWidth` & `trgHeight` (required)\n   *  - `srcX` & `srcY` (optional, default `0`)\n   *  - `trgX` & `trgY` (optional, default `0`)\n   *\n   * Those values are going to be used by `ctx.drawImage()`.\n   */\n  resize: function resize(file, width, height, resizeMethod) {\n    var info = {\n      srcX: 0,\n      srcY: 0,\n      srcWidth: file.width,\n      srcHeight: file.height\n    };\n    var srcRatio = file.width / file.height; // Automatically calculate dimensions if not specified\n\n    if (width == null && height == null) {\n      width = info.srcWidth;\n      height = info.srcHeight;\n    } else if (width == null) {\n      width = height * srcRatio;\n    } else if (height == null) {\n      height = width / srcRatio;\n    } // Make sure images aren't upscaled\n\n\n    width = Math.min(width, info.srcWidth);\n    height = Math.min(height, info.srcHeight);\n    var trgRatio = width / height;\n\n    if (info.srcWidth > width || info.srcHeight > height) {\n      // Image is bigger and needs rescaling\n      if (resizeMethod === \"crop\") {\n        if (srcRatio > trgRatio) {\n          info.srcHeight = file.height;\n          info.srcWidth = info.srcHeight * trgRatio;\n        } else {\n          info.srcWidth = file.width;\n          info.srcHeight = info.srcWidth / trgRatio;\n        }\n      } else if (resizeMethod === \"contain\") {\n        // Method 'contain'\n        if (srcRatio > trgRatio) {\n          height = width / srcRatio;\n        } else {\n          width = height * srcRatio;\n        }\n      } else {\n        throw new Error(\"Unknown resizeMethod '\".concat(resizeMethod, \"'\"));\n      }\n    }\n\n    info.srcX = (file.width - info.srcWidth) / 2;\n    info.srcY = (file.height - info.srcHeight) / 2;\n    info.trgWidth = width;\n    info.trgHeight = height;\n    return info;\n  },\n\n  /**\n   * Can be used to transform the file (for example, resize an image if necessary).\n   *\n   * The default implementation uses `resizeWidth` and `resizeHeight` (if provided) and resizes\n   * images according to those dimensions.\n   *\n   * Gets the `file` as the first parameter, and a `done()` function as the second, that needs\n   * to be invoked with the file when the transformation is done.\n   */\n  transformFile: function transformFile(file, done) {\n    if ((this.options.resizeWidth || this.options.resizeHeight) && file.type.match(/image.*/)) {\n      return this.resizeImage(file, this.options.resizeWidth, this.options.resizeHeight, this.options.resizeMethod, done);\n    } else {\n      return done(file);\n    }\n  },\n\n  /**\n   * A string that contains the template used for each dropped\n   * file. Change it to fulfill your needs but make sure to properly\n   * provide all elements.\n   *\n   * If you want to use an actual HTML element instead of providing a String\n   * as a config option, you could create a div with the id `tpl`,\n   * put the template inside it and provide the element like this:\n   *\n   *     document\n   *       .querySelector('#tpl')\n   *       .innerHTML\n   *\n   */\n  previewTemplate: preview_template,\n\n  /*\n   Those functions register themselves to the events on init and handle all\n   the user interface specific stuff. Overwriting them won't break the upload\n   but can break the way it's displayed.\n   You can overwrite them if you don't like the default behavior. If you just\n   want to add an additional event handler, register it on the dropzone object\n   and don't overwrite those options.\n   */\n  // Those are self explanatory and simply concern the DragnDrop.\n  drop: function drop(e) {\n    return this.element.classList.remove(\"dz-drag-hover\");\n  },\n  dragstart: function dragstart(e) {},\n  dragend: function dragend(e) {\n    return this.element.classList.remove(\"dz-drag-hover\");\n  },\n  dragenter: function dragenter(e) {\n    return this.element.classList.add(\"dz-drag-hover\");\n  },\n  dragover: function dragover(e) {\n    return this.element.classList.add(\"dz-drag-hover\");\n  },\n  dragleave: function dragleave(e) {\n    return this.element.classList.remove(\"dz-drag-hover\");\n  },\n  paste: function paste(e) {},\n  // Called whenever there are no files left in the dropzone anymore, and the\n  // dropzone should be displayed as if in the initial state.\n  reset: function reset() {\n    return this.element.classList.remove(\"dz-started\");\n  },\n  // Called when a file is added to the queue\n  // Receives `file`\n  addedfile: function addedfile(file) {\n    var _this = this;\n\n    if (this.element === this.previewsContainer) {\n      this.element.classList.add(\"dz-started\");\n    }\n\n    if (this.previewsContainer && !this.options.disablePreviews) {\n      file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\n      file.previewTemplate = file.previewElement; // Backwards compatibility\n\n      this.previewsContainer.appendChild(file.previewElement);\n\n      var _iterator2 = options_createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-name]\"), true),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var node = _step2.value;\n          node.textContent = file.name;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = options_createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-size]\"), true),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          node = _step3.value;\n          node.innerHTML = this.filesize(file.size);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      if (this.options.addRemoveLinks) {\n        file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\".concat(this.options.dictRemoveFile, \"</a>\"));\n        file.previewElement.appendChild(file._removeLink);\n      }\n\n      var removeFileEvent = function removeFileEvent(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (file.status === Dropzone.UPLOADING) {\n          return Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function () {\n            return _this.removeFile(file);\n          });\n        } else {\n          if (_this.options.dictRemoveFileConfirmation) {\n            return Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function () {\n              return _this.removeFile(file);\n            });\n          } else {\n            return _this.removeFile(file);\n          }\n        }\n      };\n\n      var _iterator4 = options_createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-remove]\"), true),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var removeLink = _step4.value;\n          removeLink.addEventListener(\"click\", removeFileEvent);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  },\n  // Called whenever a file is removed.\n  removedfile: function removedfile(file) {\n    if (file.previewElement != null && file.previewElement.parentNode != null) {\n      file.previewElement.parentNode.removeChild(file.previewElement);\n    }\n\n    return this._updateMaxFilesReachedClass();\n  },\n  // Called when a thumbnail has been generated\n  // Receives `file` and `dataUrl`\n  thumbnail: function thumbnail(file, dataUrl) {\n    if (file.previewElement) {\n      file.previewElement.classList.remove(\"dz-file-preview\");\n\n      var _iterator5 = options_createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\"), true),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var thumbnailElement = _step5.value;\n          thumbnailElement.alt = file.name;\n          thumbnailElement.src = dataUrl;\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      return setTimeout(function () {\n        return file.previewElement.classList.add(\"dz-image-preview\");\n      }, 1);\n    }\n  },\n  // Called whenever an error occurs\n  // Receives `file` and `message`\n  error: function error(file, message) {\n    if (file.previewElement) {\n      file.previewElement.classList.add(\"dz-error\");\n\n      if (typeof message !== \"string\" && message.error) {\n        message = message.error;\n      }\n\n      var _iterator6 = options_createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-errormessage]\"), true),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var node = _step6.value;\n          node.textContent = message;\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  },\n  errormultiple: function errormultiple() {},\n  // Called when a file gets processed. Since there is a cue, not all added\n  // files are processed immediately.\n  // Receives `file`\n  processing: function processing(file) {\n    if (file.previewElement) {\n      file.previewElement.classList.add(\"dz-processing\");\n\n      if (file._removeLink) {\n        return file._removeLink.innerHTML = this.options.dictCancelUpload;\n      }\n    }\n  },\n  processingmultiple: function processingmultiple() {},\n  // Called whenever the upload progress gets updated.\n  // Receives `file`, `progress` (percentage 0-100) and `bytesSent`.\n  // To get the total number of bytes of the file, use `file.size`\n  uploadprogress: function uploadprogress(file, progress, bytesSent) {\n    if (file.previewElement) {\n      var _iterator7 = options_createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\"), true),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var node = _step7.value;\n          node.nodeName === \"PROGRESS\" ? node.value = progress : node.style.width = \"\".concat(progress, \"%\");\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n    }\n  },\n  // Called whenever the total upload progress gets updated.\n  // Called with totalUploadProgress (0-100), totalBytes and totalBytesSent\n  totaluploadprogress: function totaluploadprogress() {},\n  // Called just before the file is sent. Gets the `xhr` object as second\n  // parameter, so you can modify it (for example to add a CSRF token) and a\n  // `formData` object to add additional information.\n  sending: function sending() {},\n  sendingmultiple: function sendingmultiple() {},\n  // When the complete upload is finished and successful\n  // Receives `file`\n  success: function success(file) {\n    if (file.previewElement) {\n      return file.previewElement.classList.add(\"dz-success\");\n    }\n  },\n  successmultiple: function successmultiple() {},\n  // When the upload is canceled.\n  canceled: function canceled(file) {\n    return this.emit(\"error\", file, this.options.dictUploadCanceled);\n  },\n  canceledmultiple: function canceledmultiple() {},\n  // When the upload is finished, either with success or an error.\n  // Receives `file`\n  complete: function complete(file) {\n    if (file._removeLink) {\n      file._removeLink.innerHTML = this.options.dictRemoveFile;\n    }\n\n    if (file.previewElement) {\n      return file.previewElement.classList.add(\"dz-complete\");\n    }\n  },\n  completemultiple: function completemultiple() {},\n  maxfilesexceeded: function maxfilesexceeded() {},\n  maxfilesreached: function maxfilesreached() {},\n  queuecomplete: function queuecomplete() {},\n  addedfiles: function addedfiles() {}\n};\n/* harmony default export */ var src_options = (defaultOptions);\n;// CONCATENATED MODULE: ./src/dropzone.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction dropzone_createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = dropzone_unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction dropzone_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return dropzone_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return dropzone_arrayLikeToArray(o, minLen); }\n\nfunction dropzone_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction dropzone_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction dropzone_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction dropzone_createClass(Constructor, protoProps, staticProps) { if (protoProps) dropzone_defineProperties(Constructor.prototype, protoProps); if (staticProps) dropzone_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\nvar Dropzone = /*#__PURE__*/function (_Emitter) {\n  _inherits(Dropzone, _Emitter);\n\n  var _super = _createSuper(Dropzone);\n\n  function Dropzone(el, options) {\n    var _this;\n\n    dropzone_classCallCheck(this, Dropzone);\n\n    _this = _super.call(this);\n    var fallback, left;\n    _this.element = el; // For backwards compatibility since the version was in the prototype previously\n\n    _this.version = Dropzone.version;\n    _this.clickableElements = [];\n    _this.listeners = [];\n    _this.files = []; // All files\n\n    if (typeof _this.element === \"string\") {\n      _this.element = document.querySelector(_this.element);\n    } // Not checking if instance of HTMLElement or Element since IE9 is extremely weird.\n\n\n    if (!_this.element || _this.element.nodeType == null) {\n      throw new Error(\"Invalid dropzone element.\");\n    }\n\n    if (_this.element.dropzone) {\n      throw new Error(\"Dropzone already attached.\");\n    } // Now add this dropzone to the instances.\n\n\n    Dropzone.instances.push(_assertThisInitialized(_this)); // Put the dropzone inside the element itself.\n\n    _this.element.dropzone = _assertThisInitialized(_this);\n    var elementOptions = (left = Dropzone.optionsForElement(_this.element)) != null ? left : {};\n    _this.options = Dropzone.extend({}, src_options, elementOptions, options != null ? options : {});\n    _this.options.previewTemplate = _this.options.previewTemplate.replace(/\\n*/g, \"\"); // If the browser failed, just call the fallback and leave\n\n    if (_this.options.forceFallback || !Dropzone.isBrowserSupported()) {\n      return _possibleConstructorReturn(_this, _this.options.fallback.call(_assertThisInitialized(_this)));\n    } // @options.url = @element.getAttribute \"action\" unless @options.url?\n\n\n    if (_this.options.url == null) {\n      _this.options.url = _this.element.getAttribute(\"action\");\n    }\n\n    if (!_this.options.url) {\n      throw new Error(\"No URL provided.\");\n    }\n\n    if (_this.options.acceptedFiles && _this.options.acceptedMimeTypes) {\n      throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\n    }\n\n    if (_this.options.uploadMultiple && _this.options.chunking) {\n      throw new Error(\"You cannot set both: uploadMultiple and chunking.\");\n    } // Backwards compatibility\n\n\n    if (_this.options.acceptedMimeTypes) {\n      _this.options.acceptedFiles = _this.options.acceptedMimeTypes;\n      delete _this.options.acceptedMimeTypes;\n    } // Backwards compatibility\n\n\n    if (_this.options.renameFilename != null) {\n      _this.options.renameFile = function (file) {\n        return _this.options.renameFilename.call(_assertThisInitialized(_this), file.name, file);\n      };\n    }\n\n    if (typeof _this.options.method === \"string\") {\n      _this.options.method = _this.options.method.toUpperCase();\n    }\n\n    if ((fallback = _this.getExistingFallback()) && fallback.parentNode) {\n      // Remove the fallback\n      fallback.parentNode.removeChild(fallback);\n    } // Display previews in the previewsContainer element or the Dropzone element unless explicitly set to false\n\n\n    if (_this.options.previewsContainer !== false) {\n      if (_this.options.previewsContainer) {\n        _this.previewsContainer = Dropzone.getElement(_this.options.previewsContainer, \"previewsContainer\");\n      } else {\n        _this.previewsContainer = _this.element;\n      }\n    }\n\n    if (_this.options.clickable) {\n      if (_this.options.clickable === true) {\n        _this.clickableElements = [_this.element];\n      } else {\n        _this.clickableElements = Dropzone.getElements(_this.options.clickable, \"clickable\");\n      }\n    }\n\n    _this.init();\n\n    return _this;\n  } // Returns all files that have been accepted\n\n\n  dropzone_createClass(Dropzone, [{\n    key: \"getAcceptedFiles\",\n    value: function getAcceptedFiles() {\n      return this.files.filter(function (file) {\n        return file.accepted;\n      }).map(function (file) {\n        return file;\n      });\n    } // Returns all files that have been rejected\n    // Not sure when that's going to be useful, but added for completeness.\n\n  }, {\n    key: \"getRejectedFiles\",\n    value: function getRejectedFiles() {\n      return this.files.filter(function (file) {\n        return !file.accepted;\n      }).map(function (file) {\n        return file;\n      });\n    }\n  }, {\n    key: \"getFilesWithStatus\",\n    value: function getFilesWithStatus(status) {\n      return this.files.filter(function (file) {\n        return file.status === status;\n      }).map(function (file) {\n        return file;\n      });\n    } // Returns all files that are in the queue\n\n  }, {\n    key: \"getQueuedFiles\",\n    value: function getQueuedFiles() {\n      return this.getFilesWithStatus(Dropzone.QUEUED);\n    }\n  }, {\n    key: \"getUploadingFiles\",\n    value: function getUploadingFiles() {\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\n    }\n  }, {\n    key: \"getAddedFiles\",\n    value: function getAddedFiles() {\n      return this.getFilesWithStatus(Dropzone.ADDED);\n    } // Files that are either queued or uploading\n\n  }, {\n    key: \"getActiveFiles\",\n    value: function getActiveFiles() {\n      return this.files.filter(function (file) {\n        return file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED;\n      }).map(function (file) {\n        return file;\n      });\n    } // The function that gets called when Dropzone is initialized. You\n    // can (and should) setup event listeners inside this function.\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      // In case it isn't set already\n      if (this.element.tagName === \"form\") {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n      }\n\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><button class=\\\"dz-button\\\" type=\\\"button\\\">\".concat(this.options.dictDefaultMessage, \"</button></div>\")));\n      }\n\n      if (this.clickableElements.length) {\n        var setupHiddenFileInput = function setupHiddenFileInput() {\n          if (_this2.hiddenFileInput) {\n            _this2.hiddenFileInput.parentNode.removeChild(_this2.hiddenFileInput);\n          }\n\n          _this2.hiddenFileInput = document.createElement(\"input\");\n\n          _this2.hiddenFileInput.setAttribute(\"type\", \"file\");\n\n          if (_this2.options.maxFiles === null || _this2.options.maxFiles > 1) {\n            _this2.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n          }\n\n          _this2.hiddenFileInput.className = \"dz-hidden-input\";\n\n          if (_this2.options.acceptedFiles !== null) {\n            _this2.hiddenFileInput.setAttribute(\"accept\", _this2.options.acceptedFiles);\n          }\n\n          if (_this2.options.capture !== null) {\n            _this2.hiddenFileInput.setAttribute(\"capture\", _this2.options.capture);\n          } // Making sure that no one can \"tab\" into this field.\n\n\n          _this2.hiddenFileInput.setAttribute(\"tabindex\", \"-1\"); // Not setting `display=\"none\"` because some browsers don't accept clicks\n          // on elements that aren't displayed.\n\n\n          _this2.hiddenFileInput.style.visibility = \"hidden\";\n          _this2.hiddenFileInput.style.position = \"absolute\";\n          _this2.hiddenFileInput.style.top = \"0\";\n          _this2.hiddenFileInput.style.left = \"0\";\n          _this2.hiddenFileInput.style.height = \"0\";\n          _this2.hiddenFileInput.style.width = \"0\";\n          Dropzone.getElement(_this2.options.hiddenInputContainer, \"hiddenInputContainer\").appendChild(_this2.hiddenFileInput);\n\n          _this2.hiddenFileInput.addEventListener(\"change\", function () {\n            var files = _this2.hiddenFileInput.files;\n\n            if (files.length) {\n              var _iterator = dropzone_createForOfIteratorHelper(files, true),\n                  _step;\n\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  var file = _step.value;\n\n                  _this2.addFile(file);\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n            }\n\n            _this2.emit(\"addedfiles\", files);\n\n            setupHiddenFileInput();\n          });\n        };\n\n        setupHiddenFileInput();\n      }\n\n      this.URL = window.URL !== null ? window.URL : window.webkitURL; // Setup all event listeners on the Dropzone object itself.\n      // They're not in @setupEventListeners() because they shouldn't be removed\n      // again when the dropzone gets disabled.\n\n      var _iterator2 = dropzone_createForOfIteratorHelper(this.events, true),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var eventName = _step2.value;\n          this.on(eventName, this.options[eventName]);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      this.on(\"uploadprogress\", function () {\n        return _this2.updateTotalUploadProgress();\n      });\n      this.on(\"removedfile\", function () {\n        return _this2.updateTotalUploadProgress();\n      });\n      this.on(\"canceled\", function (file) {\n        return _this2.emit(\"complete\", file);\n      }); // Emit a `queuecomplete` event if all files finished uploading.\n\n      this.on(\"complete\", function (file) {\n        if (_this2.getAddedFiles().length === 0 && _this2.getUploadingFiles().length === 0 && _this2.getQueuedFiles().length === 0) {\n          // This needs to be deferred so that `queuecomplete` really triggers after `complete`\n          return setTimeout(function () {\n            return _this2.emit(\"queuecomplete\");\n          }, 0);\n        }\n      });\n\n      var containsFiles = function containsFiles(e) {\n        if (e.dataTransfer.types) {\n          // Because e.dataTransfer.types is an Object in\n          // IE, we need to iterate like this instead of\n          // using e.dataTransfer.types.some()\n          for (var i = 0; i < e.dataTransfer.types.length; i++) {\n            if (e.dataTransfer.types[i] === \"Files\") return true;\n          }\n        }\n\n        return false;\n      };\n\n      var noPropagation = function noPropagation(e) {\n        // If there are no files, we don't want to stop\n        // propagation so we don't interfere with other\n        // drag and drop behaviour.\n        if (!containsFiles(e)) return;\n        e.stopPropagation();\n\n        if (e.preventDefault) {\n          return e.preventDefault();\n        } else {\n          return e.returnValue = false;\n        }\n      }; // Create the listeners\n\n\n      this.listeners = [{\n        element: this.element,\n        events: {\n          dragstart: function dragstart(e) {\n            return _this2.emit(\"dragstart\", e);\n          },\n          dragenter: function dragenter(e) {\n            noPropagation(e);\n            return _this2.emit(\"dragenter\", e);\n          },\n          dragover: function dragover(e) {\n            // Makes it possible to drag files from chrome's download bar\n            // http://stackoverflow.com/questions/19526430/drag-and-drop-file-uploads-from-chrome-downloads-bar\n            // Try is required to prevent bug in Internet Explorer 11 (SCRIPT65535 exception)\n            var efct;\n\n            try {\n              efct = e.dataTransfer.effectAllowed;\n            } catch (error) {}\n\n            e.dataTransfer.dropEffect = \"move\" === efct || \"linkMove\" === efct ? \"move\" : \"copy\";\n            noPropagation(e);\n            return _this2.emit(\"dragover\", e);\n          },\n          dragleave: function dragleave(e) {\n            return _this2.emit(\"dragleave\", e);\n          },\n          drop: function drop(e) {\n            noPropagation(e);\n            return _this2.drop(e);\n          },\n          dragend: function dragend(e) {\n            return _this2.emit(\"dragend\", e);\n          }\n        } // This is disabled right now, because the browsers don't implement it properly.\n        // \"paste\": (e) =>\n        //   noPropagation e\n        //   @paste e\n\n      }];\n      this.clickableElements.forEach(function (clickableElement) {\n        return _this2.listeners.push({\n          element: clickableElement,\n          events: {\n            click: function click(evt) {\n              // Only the actual dropzone or the message element should trigger file selection\n              if (clickableElement !== _this2.element || evt.target === _this2.element || Dropzone.elementInside(evt.target, _this2.element.querySelector(\".dz-message\"))) {\n                _this2.hiddenFileInput.click(); // Forward the click\n\n              }\n\n              return true;\n            }\n          }\n        });\n      });\n      this.enable();\n      return this.options.init.call(this);\n    } // Not fully tested yet\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.disable();\n      this.removeAllFiles(true);\n\n      if (this.hiddenFileInput != null ? this.hiddenFileInput.parentNode : undefined) {\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n      }\n\n      delete this.element.dropzone;\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\n    }\n  }, {\n    key: \"updateTotalUploadProgress\",\n    value: function updateTotalUploadProgress() {\n      var totalUploadProgress;\n      var totalBytesSent = 0;\n      var totalBytes = 0;\n      var activeFiles = this.getActiveFiles();\n\n      if (activeFiles.length) {\n        var _iterator3 = dropzone_createForOfIteratorHelper(this.getActiveFiles(), true),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var file = _step3.value;\n            totalBytesSent += file.upload.bytesSent;\n            totalBytes += file.upload.total;\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\n      } else {\n        totalUploadProgress = 100;\n      }\n\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\n    } // @options.paramName can be a function taking one parameter rather than a string.\n    // A parameter name for a file is obtained simply by calling this with an index number.\n\n  }, {\n    key: \"_getParamName\",\n    value: function _getParamName(n) {\n      if (typeof this.options.paramName === \"function\") {\n        return this.options.paramName(n);\n      } else {\n        return \"\".concat(this.options.paramName).concat(this.options.uploadMultiple ? \"[\".concat(n, \"]\") : \"\");\n      }\n    } // If @options.renameFile is a function,\n    // the function will be used to rename the file.name before appending it to the formData\n\n  }, {\n    key: \"_renameFile\",\n    value: function _renameFile(file) {\n      if (typeof this.options.renameFile !== \"function\") {\n        return file.name;\n      }\n\n      return this.options.renameFile(file);\n    } // Returns a form that can be used as fallback if the browser does not support DragnDrop\n    //\n    // If the dropzone is already a form, only the input field and button are returned. Otherwise a complete form element is provided.\n    // This code has to pass in IE7 :(\n\n  }, {\n    key: \"getFallbackForm\",\n    value: function getFallbackForm() {\n      var existingFallback, form;\n\n      if (existingFallback = this.getExistingFallback()) {\n        return existingFallback;\n      }\n\n      var fieldsString = '<div class=\"dz-fallback\">';\n\n      if (this.options.dictFallbackText) {\n        fieldsString += \"<p>\".concat(this.options.dictFallbackText, \"</p>\");\n      }\n\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\".concat(this._getParamName(0), \"\\\" \").concat(this.options.uploadMultiple ? 'multiple=\"multiple\"' : undefined, \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\");\n      var fields = Dropzone.createElement(fieldsString);\n\n      if (this.element.tagName !== \"FORM\") {\n        form = Dropzone.createElement(\"<form action=\\\"\".concat(this.options.url, \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\").concat(this.options.method, \"\\\"></form>\"));\n        form.appendChild(fields);\n      } else {\n        // Make sure that the enctype and method attributes are set properly\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n        this.element.setAttribute(\"method\", this.options.method);\n      }\n\n      return form != null ? form : fields;\n    } // Returns the fallback elements if they exist already\n    //\n    // This code has to pass in IE7 :(\n\n  }, {\n    key: \"getExistingFallback\",\n    value: function getExistingFallback() {\n      var getFallback = function getFallback(elements) {\n        var _iterator4 = dropzone_createForOfIteratorHelper(elements, true),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var el = _step4.value;\n\n            if (/(^| )fallback($| )/.test(el.className)) {\n              return el;\n            }\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      };\n\n      for (var _i = 0, _arr = [\"div\", \"form\"]; _i < _arr.length; _i++) {\n        var tagName = _arr[_i];\n        var fallback;\n\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\n          return fallback;\n        }\n      }\n    } // Activates all listeners stored in @listeners\n\n  }, {\n    key: \"setupEventListeners\",\n    value: function setupEventListeners() {\n      return this.listeners.map(function (elementListeners) {\n        return function () {\n          var result = [];\n\n          for (var event in elementListeners.events) {\n            var listener = elementListeners.events[event];\n            result.push(elementListeners.element.addEventListener(event, listener, false));\n          }\n\n          return result;\n        }();\n      });\n    } // Deactivates all listeners stored in @listeners\n\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      return this.listeners.map(function (elementListeners) {\n        return function () {\n          var result = [];\n\n          for (var event in elementListeners.events) {\n            var listener = elementListeners.events[event];\n            result.push(elementListeners.element.removeEventListener(event, listener, false));\n          }\n\n          return result;\n        }();\n      });\n    } // Removes all event listeners and cancels all files in the queue or being processed.\n\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      var _this3 = this;\n\n      this.clickableElements.forEach(function (element) {\n        return element.classList.remove(\"dz-clickable\");\n      });\n      this.removeEventListeners();\n      this.disabled = true;\n      return this.files.map(function (file) {\n        return _this3.cancelUpload(file);\n      });\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      delete this.disabled;\n      this.clickableElements.forEach(function (element) {\n        return element.classList.add(\"dz-clickable\");\n      });\n      return this.setupEventListeners();\n    } // Returns a nicely formatted filesize\n\n  }, {\n    key: \"filesize\",\n    value: function filesize(size) {\n      var selectedSize = 0;\n      var selectedUnit = \"b\";\n\n      if (size > 0) {\n        var units = [\"tb\", \"gb\", \"mb\", \"kb\", \"b\"];\n\n        for (var i = 0; i < units.length; i++) {\n          var unit = units[i];\n          var cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\n\n          if (size >= cutoff) {\n            selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\n            selectedUnit = unit;\n            break;\n          }\n        }\n\n        selectedSize = Math.round(10 * selectedSize) / 10; // Cutting of digits\n      }\n\n      return \"<strong>\".concat(selectedSize, \"</strong> \").concat(this.options.dictFileSizeUnits[selectedUnit]);\n    } // Adds or removes the `dz-max-files-reached` class from the form.\n\n  }, {\n    key: \"_updateMaxFilesReachedClass\",\n    value: function _updateMaxFilesReachedClass() {\n      if (this.options.maxFiles != null && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\n          this.emit(\"maxfilesreached\", this.files);\n        }\n\n        return this.element.classList.add(\"dz-max-files-reached\");\n      } else {\n        return this.element.classList.remove(\"dz-max-files-reached\");\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop(e) {\n      if (!e.dataTransfer) {\n        return;\n      }\n\n      this.emit(\"drop\", e); // Convert the FileList to an Array\n      // This is necessary for IE11\n\n      var files = [];\n\n      for (var i = 0; i < e.dataTransfer.files.length; i++) {\n        files[i] = e.dataTransfer.files[i];\n      } // Even if it's a folder, files.length will contain the folders.\n\n\n      if (files.length) {\n        var items = e.dataTransfer.items;\n\n        if (items && items.length && items[0].webkitGetAsEntry != null) {\n          // The browser supports dropping of folders, so handle items instead of files\n          this._addFilesFromItems(items);\n        } else {\n          this.handleFiles(files);\n        }\n      }\n\n      this.emit(\"addedfiles\", files);\n    }\n  }, {\n    key: \"paste\",\n    value: function paste(e) {\n      if (__guard__(e != null ? e.clipboardData : undefined, function (x) {\n        return x.items;\n      }) == null) {\n        return;\n      }\n\n      this.emit(\"paste\", e);\n      var items = e.clipboardData.items;\n\n      if (items.length) {\n        return this._addFilesFromItems(items);\n      }\n    }\n  }, {\n    key: \"handleFiles\",\n    value: function handleFiles(files) {\n      var _iterator5 = dropzone_createForOfIteratorHelper(files, true),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var file = _step5.value;\n          this.addFile(file);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    } // When a folder is dropped (or files are pasted), items must be handled\n    // instead of files.\n\n  }, {\n    key: \"_addFilesFromItems\",\n    value: function _addFilesFromItems(items) {\n      var _this4 = this;\n\n      return function () {\n        var result = [];\n\n        var _iterator6 = dropzone_createForOfIteratorHelper(items, true),\n            _step6;\n\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var item = _step6.value;\n            var entry;\n\n            if (item.webkitGetAsEntry != null && (entry = item.webkitGetAsEntry())) {\n              if (entry.isFile) {\n                result.push(_this4.addFile(item.getAsFile()));\n              } else if (entry.isDirectory) {\n                // Append all files from that directory to files\n                result.push(_this4._addFilesFromDirectory(entry, entry.name));\n              } else {\n                result.push(undefined);\n              }\n            } else if (item.getAsFile != null) {\n              if (item.kind == null || item.kind === \"file\") {\n                result.push(_this4.addFile(item.getAsFile()));\n              } else {\n                result.push(undefined);\n              }\n            } else {\n              result.push(undefined);\n            }\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n\n        return result;\n      }();\n    } // Goes through the directory, and adds each file it finds recursively\n\n  }, {\n    key: \"_addFilesFromDirectory\",\n    value: function _addFilesFromDirectory(directory, path) {\n      var _this5 = this;\n\n      var dirReader = directory.createReader();\n\n      var errorHandler = function errorHandler(error) {\n        return __guardMethod__(console, \"log\", function (o) {\n          return o.log(error);\n        });\n      };\n\n      var readEntries = function readEntries() {\n        return dirReader.readEntries(function (entries) {\n          if (entries.length > 0) {\n            var _iterator7 = dropzone_createForOfIteratorHelper(entries, true),\n                _step7;\n\n            try {\n              for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                var entry = _step7.value;\n\n                if (entry.isFile) {\n                  entry.file(function (file) {\n                    if (_this5.options.ignoreHiddenFiles && file.name.substring(0, 1) === \".\") {\n                      return;\n                    }\n\n                    file.fullPath = \"\".concat(path, \"/\").concat(file.name);\n                    return _this5.addFile(file);\n                  });\n                } else if (entry.isDirectory) {\n                  _this5._addFilesFromDirectory(entry, \"\".concat(path, \"/\").concat(entry.name));\n                }\n              } // Recursively call readEntries() again, since browser only handle\n              // the first 100 entries.\n              // See: https://developer.mozilla.org/en-US/docs/Web/API/DirectoryReader#readEntries\n\n            } catch (err) {\n              _iterator7.e(err);\n            } finally {\n              _iterator7.f();\n            }\n\n            readEntries();\n          }\n\n          return null;\n        }, errorHandler);\n      };\n\n      return readEntries();\n    } // If `done()` is called without argument the file is accepted\n    // If you call it with an error message, the file is rejected\n    // (This allows for asynchronous validation)\n    //\n    // This function checks the filesize, and if the file.type passes the\n    // `acceptedFiles` check.\n\n  }, {\n    key: \"accept\",\n    value: function accept(file, done) {\n      if (this.options.maxFilesize && file.size > this.options.maxFilesize * 1024 * 1024) {\n        done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\n        done(this.options.dictInvalidFileType);\n      } else if (this.options.maxFiles != null && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\n        this.emit(\"maxfilesexceeded\", file);\n      } else {\n        this.options.accept.call(this, file, done);\n      }\n    }\n  }, {\n    key: \"addFile\",\n    value: function addFile(file) {\n      var _this6 = this;\n\n      file.upload = {\n        uuid: Dropzone.uuidv4(),\n        progress: 0,\n        // Setting the total upload size to file.size for the beginning\n        // It's actual different than the size to be transmitted.\n        total: file.size,\n        bytesSent: 0,\n        filename: this._renameFile(file) // Not setting chunking information here, because the acutal data  and\n        // thus the chunks  might change if `options.transformFile` is set\n        // and does something to the data.\n\n      };\n      this.files.push(file);\n      file.status = Dropzone.ADDED;\n      this.emit(\"addedfile\", file);\n\n      this._enqueueThumbnail(file);\n\n      this.accept(file, function (error) {\n        if (error) {\n          file.accepted = false;\n\n          _this6._errorProcessing([file], error); // Will set the file.status\n\n        } else {\n          file.accepted = true;\n\n          if (_this6.options.autoQueue) {\n            _this6.enqueueFile(file);\n          } // Will set .accepted = true\n\n        }\n\n        _this6._updateMaxFilesReachedClass();\n      });\n    } // Wrapper for enqueueFile\n\n  }, {\n    key: \"enqueueFiles\",\n    value: function enqueueFiles(files) {\n      var _iterator8 = dropzone_createForOfIteratorHelper(files, true),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var file = _step8.value;\n          this.enqueueFile(file);\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"enqueueFile\",\n    value: function enqueueFile(file) {\n      var _this7 = this;\n\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\n        file.status = Dropzone.QUEUED;\n\n        if (this.options.autoProcessQueue) {\n          return setTimeout(function () {\n            return _this7.processQueue();\n          }, 0); // Deferring the call\n        }\n      } else {\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\n      }\n    }\n  }, {\n    key: \"_enqueueThumbnail\",\n    value: function _enqueueThumbnail(file) {\n      var _this8 = this;\n\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n        this._thumbnailQueue.push(file);\n\n        return setTimeout(function () {\n          return _this8._processThumbnailQueue();\n        }, 0); // Deferring the call\n      }\n    }\n  }, {\n    key: \"_processThumbnailQueue\",\n    value: function _processThumbnailQueue() {\n      var _this9 = this;\n\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\n        return;\n      }\n\n      this._processingThumbnail = true;\n\n      var file = this._thumbnailQueue.shift();\n\n      return this.createThumbnail(file, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.thumbnailMethod, true, function (dataUrl) {\n        _this9.emit(\"thumbnail\", file, dataUrl);\n\n        _this9._processingThumbnail = false;\n        return _this9._processThumbnailQueue();\n      });\n    } // Can be called by the user to remove a file\n\n  }, {\n    key: \"removeFile\",\n    value: function removeFile(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        this.cancelUpload(file);\n      }\n\n      this.files = without(this.files, file);\n      this.emit(\"removedfile\", file);\n\n      if (this.files.length === 0) {\n        return this.emit(\"reset\");\n      }\n    } // Removes all files that aren't currently processed from the list\n\n  }, {\n    key: \"removeAllFiles\",\n    value: function removeAllFiles(cancelIfNecessary) {\n      // Create a copy of files since removeFile() changes the @files array.\n      if (cancelIfNecessary == null) {\n        cancelIfNecessary = false;\n      }\n\n      var _iterator9 = dropzone_createForOfIteratorHelper(this.files.slice(), true),\n          _step9;\n\n      try {\n        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n          var file = _step9.value;\n\n          if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\n            this.removeFile(file);\n          }\n        }\n      } catch (err) {\n        _iterator9.e(err);\n      } finally {\n        _iterator9.f();\n      }\n\n      return null;\n    } // Resizes an image before it gets sent to the server. This function is the default behavior of\n    // `options.transformFile` if `resizeWidth` or `resizeHeight` are set. The callback is invoked with\n    // the resized blob.\n\n  }, {\n    key: \"resizeImage\",\n    value: function resizeImage(file, width, height, resizeMethod, callback) {\n      var _this10 = this;\n\n      return this.createThumbnail(file, width, height, resizeMethod, true, function (dataUrl, canvas) {\n        if (canvas == null) {\n          // The image has not been resized\n          return callback(file);\n        } else {\n          var resizeMimeType = _this10.options.resizeMimeType;\n\n          if (resizeMimeType == null) {\n            resizeMimeType = file.type;\n          }\n\n          var resizedDataURL = canvas.toDataURL(resizeMimeType, _this10.options.resizeQuality);\n\n          if (resizeMimeType === \"image/jpeg\" || resizeMimeType === \"image/jpg\") {\n            // Now add the original EXIF information\n            resizedDataURL = ExifRestore.restore(file.dataURL, resizedDataURL);\n          }\n\n          return callback(Dropzone.dataURItoBlob(resizedDataURL));\n        }\n      });\n    }\n  }, {\n    key: \"createThumbnail\",\n    value: function createThumbnail(file, width, height, resizeMethod, fixOrientation, callback) {\n      var _this11 = this;\n\n      var fileReader = new FileReader();\n\n      fileReader.onload = function () {\n        file.dataURL = fileReader.result; // Don't bother creating a thumbnail for SVG images since they're vector\n\n        if (file.type === \"image/svg+xml\") {\n          if (callback != null) {\n            callback(fileReader.result);\n          }\n\n          return;\n        }\n\n        _this11.createThumbnailFromUrl(file, width, height, resizeMethod, fixOrientation, callback);\n      };\n\n      fileReader.readAsDataURL(file);\n    } // `mockFile` needs to have these attributes:\n    //\n    //     { name: 'name', size: 12345, imageUrl: '' }\n    //\n    // `callback` will be invoked when the image has been downloaded and displayed.\n    // `crossOrigin` will be added to the `img` tag when accessing the file.\n\n  }, {\n    key: \"displayExistingFile\",\n    value: function displayExistingFile(mockFile, imageUrl, callback, crossOrigin) {\n      var _this12 = this;\n\n      var resizeThumbnail = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      this.emit(\"addedfile\", mockFile);\n      this.emit(\"complete\", mockFile);\n\n      if (!resizeThumbnail) {\n        this.emit(\"thumbnail\", mockFile, imageUrl);\n        if (callback) callback();\n      } else {\n        var onDone = function onDone(thumbnail) {\n          _this12.emit(\"thumbnail\", mockFile, thumbnail);\n\n          if (callback) callback();\n        };\n\n        mockFile.dataURL = imageUrl;\n        this.createThumbnailFromUrl(mockFile, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.thumbnailMethod, this.options.fixOrientation, onDone, crossOrigin);\n      }\n    }\n  }, {\n    key: \"createThumbnailFromUrl\",\n    value: function createThumbnailFromUrl(file, width, height, resizeMethod, fixOrientation, callback, crossOrigin) {\n      var _this13 = this;\n\n      // Not using `new Image` here because of a bug in latest Chrome versions.\n      // See https://github.com/enyo/dropzone/pull/226\n      var img = document.createElement(\"img\");\n\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      } // fixOrientation is not needed anymore with browsers handling imageOrientation\n\n\n      fixOrientation = getComputedStyle(document.body)[\"imageOrientation\"] == \"from-image\" ? false : fixOrientation;\n\n      img.onload = function () {\n        var loadExif = function loadExif(callback) {\n          return callback(1);\n        };\n\n        if (typeof EXIF !== \"undefined\" && EXIF !== null && fixOrientation) {\n          loadExif = function loadExif(callback) {\n            return EXIF.getData(img, function () {\n              return callback(EXIF.getTag(this, \"Orientation\"));\n            });\n          };\n        }\n\n        return loadExif(function (orientation) {\n          file.width = img.width;\n          file.height = img.height;\n\n          var resizeInfo = _this13.options.resize.call(_this13, file, width, height, resizeMethod);\n\n          var canvas = document.createElement(\"canvas\");\n          var ctx = canvas.getContext(\"2d\");\n          canvas.width = resizeInfo.trgWidth;\n          canvas.height = resizeInfo.trgHeight;\n\n          if (orientation > 4) {\n            canvas.width = resizeInfo.trgHeight;\n            canvas.height = resizeInfo.trgWidth;\n          }\n\n          switch (orientation) {\n            case 2:\n              // horizontal flip\n              ctx.translate(canvas.width, 0);\n              ctx.scale(-1, 1);\n              break;\n\n            case 3:\n              // 180 rotate left\n              ctx.translate(canvas.width, canvas.height);\n              ctx.rotate(Math.PI);\n              break;\n\n            case 4:\n              // vertical flip\n              ctx.translate(0, canvas.height);\n              ctx.scale(1, -1);\n              break;\n\n            case 5:\n              // vertical flip + 90 rotate right\n              ctx.rotate(0.5 * Math.PI);\n              ctx.scale(1, -1);\n              break;\n\n            case 6:\n              // 90 rotate right\n              ctx.rotate(0.5 * Math.PI);\n              ctx.translate(0, -canvas.width);\n              break;\n\n            case 7:\n              // horizontal flip + 90 rotate right\n              ctx.rotate(0.5 * Math.PI);\n              ctx.translate(canvas.height, -canvas.width);\n              ctx.scale(-1, 1);\n              break;\n\n            case 8:\n              // 90 rotate left\n              ctx.rotate(-0.5 * Math.PI);\n              ctx.translate(-canvas.height, 0);\n              break;\n          } // This is a bugfix for iOS' scaling bug.\n\n\n          drawImageIOSFix(ctx, img, resizeInfo.srcX != null ? resizeInfo.srcX : 0, resizeInfo.srcY != null ? resizeInfo.srcY : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, resizeInfo.trgX != null ? resizeInfo.trgX : 0, resizeInfo.trgY != null ? resizeInfo.trgY : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\n          var thumbnail = canvas.toDataURL(\"image/png\");\n\n          if (callback != null) {\n            return callback(thumbnail, canvas);\n          }\n        });\n      };\n\n      if (callback != null) {\n        img.onerror = callback;\n      }\n\n      return img.src = file.dataURL;\n    } // Goes through the queue and processes files if there aren't too many already.\n\n  }, {\n    key: \"processQueue\",\n    value: function processQueue() {\n      var parallelUploads = this.options.parallelUploads;\n      var processingLength = this.getUploadingFiles().length;\n      var i = processingLength; // There are already at least as many files uploading than should be\n\n      if (processingLength >= parallelUploads) {\n        return;\n      }\n\n      var queuedFiles = this.getQueuedFiles();\n\n      if (!(queuedFiles.length > 0)) {\n        return;\n      }\n\n      if (this.options.uploadMultiple) {\n        // The files should be uploaded in one request\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\n      } else {\n        while (i < parallelUploads) {\n          if (!queuedFiles.length) {\n            return;\n          } // Nothing left to process\n\n\n          this.processFile(queuedFiles.shift());\n          i++;\n        }\n      }\n    } // Wrapper for `processFiles`\n\n  }, {\n    key: \"processFile\",\n    value: function processFile(file) {\n      return this.processFiles([file]);\n    } // Loads the file, then calls finishedLoading()\n\n  }, {\n    key: \"processFiles\",\n    value: function processFiles(files) {\n      var _iterator10 = dropzone_createForOfIteratorHelper(files, true),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var file = _step10.value;\n          file.processing = true; // Backwards compatibility\n\n          file.status = Dropzone.UPLOADING;\n          this.emit(\"processing\", file);\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n\n      if (this.options.uploadMultiple) {\n        this.emit(\"processingmultiple\", files);\n      }\n\n      return this.uploadFiles(files);\n    }\n  }, {\n    key: \"_getFilesWithXhr\",\n    value: function _getFilesWithXhr(xhr) {\n      var files;\n      return files = this.files.filter(function (file) {\n        return file.xhr === xhr;\n      }).map(function (file) {\n        return file;\n      });\n    } // Cancels the file upload and sets the status to CANCELED\n    // **if** the file is actually being uploaded.\n    // If it's still in the queue, the file is being removed from it and the status\n    // set to CANCELED.\n\n  }, {\n    key: \"cancelUpload\",\n    value: function cancelUpload(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        var groupedFiles = this._getFilesWithXhr(file.xhr);\n\n        var _iterator11 = dropzone_createForOfIteratorHelper(groupedFiles, true),\n            _step11;\n\n        try {\n          for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n            var groupedFile = _step11.value;\n            groupedFile.status = Dropzone.CANCELED;\n          }\n        } catch (err) {\n          _iterator11.e(err);\n        } finally {\n          _iterator11.f();\n        }\n\n        if (typeof file.xhr !== \"undefined\") {\n          file.xhr.abort();\n        }\n\n        var _iterator12 = dropzone_createForOfIteratorHelper(groupedFiles, true),\n            _step12;\n\n        try {\n          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n            var _groupedFile = _step12.value;\n            this.emit(\"canceled\", _groupedFile);\n          }\n        } catch (err) {\n          _iterator12.e(err);\n        } finally {\n          _iterator12.f();\n        }\n\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", groupedFiles);\n        }\n      } else if (file.status === Dropzone.ADDED || file.status === Dropzone.QUEUED) {\n        file.status = Dropzone.CANCELED;\n        this.emit(\"canceled\", file);\n\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", [file]);\n        }\n      }\n\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    }\n  }, {\n    key: \"resolveOption\",\n    value: function resolveOption(option) {\n      if (typeof option === \"function\") {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        return option.apply(this, args);\n      }\n\n      return option;\n    }\n  }, {\n    key: \"uploadFile\",\n    value: function uploadFile(file) {\n      return this.uploadFiles([file]);\n    }\n  }, {\n    key: \"uploadFiles\",\n    value: function uploadFiles(files) {\n      var _this14 = this;\n\n      this._transformFiles(files, function (transformedFiles) {\n        if (_this14.options.chunking) {\n          // Chunking is not allowed to be used with `uploadMultiple` so we know\n          // that there is only __one__file.\n          var transformedFile = transformedFiles[0];\n          files[0].upload.chunked = _this14.options.chunking && (_this14.options.forceChunking || transformedFile.size > _this14.options.chunkSize);\n          files[0].upload.totalChunkCount = Math.ceil(transformedFile.size / _this14.options.chunkSize);\n        }\n\n        if (files[0].upload.chunked) {\n          // This file should be sent in chunks!\n          // If the chunking option is set, we **know** that there can only be **one** file, since\n          // uploadMultiple is not allowed with this option.\n          var file = files[0];\n          var _transformedFile = transformedFiles[0];\n          var startedChunkCount = 0;\n          file.upload.chunks = [];\n\n          var handleNextChunk = function handleNextChunk() {\n            var chunkIndex = 0; // Find the next item in file.upload.chunks that is not defined yet.\n\n            while (file.upload.chunks[chunkIndex] !== undefined) {\n              chunkIndex++;\n            } // This means, that all chunks have already been started.\n\n\n            if (chunkIndex >= file.upload.totalChunkCount) return;\n            startedChunkCount++;\n            var start = chunkIndex * _this14.options.chunkSize;\n            var end = Math.min(start + _this14.options.chunkSize, _transformedFile.size);\n            var dataBlock = {\n              name: _this14._getParamName(0),\n              data: _transformedFile.webkitSlice ? _transformedFile.webkitSlice(start, end) : _transformedFile.slice(start, end),\n              filename: file.upload.filename,\n              chunkIndex: chunkIndex\n            };\n            file.upload.chunks[chunkIndex] = {\n              file: file,\n              index: chunkIndex,\n              dataBlock: dataBlock,\n              // In case we want to retry.\n              status: Dropzone.UPLOADING,\n              progress: 0,\n              retries: 0 // The number of times this block has been retried.\n\n            };\n\n            _this14._uploadData(files, [dataBlock]);\n          };\n\n          file.upload.finishedChunkUpload = function (chunk, response) {\n            var allFinished = true;\n            chunk.status = Dropzone.SUCCESS; // Clear the data from the chunk\n\n            chunk.dataBlock = null; // Leaving this reference to xhr intact here will cause memory leaks in some browsers\n\n            chunk.xhr = null;\n\n            for (var i = 0; i < file.upload.totalChunkCount; i++) {\n              if (file.upload.chunks[i] === undefined) {\n                return handleNextChunk();\n              }\n\n              if (file.upload.chunks[i].status !== Dropzone.SUCCESS) {\n                allFinished = false;\n              }\n            }\n\n            if (allFinished) {\n              _this14.options.chunksUploaded(file, function () {\n                _this14._finished(files, response, null);\n              });\n            }\n          };\n\n          if (_this14.options.parallelChunkUploads) {\n            for (var i = 0; i < file.upload.totalChunkCount; i++) {\n              handleNextChunk();\n            }\n          } else {\n            handleNextChunk();\n          }\n        } else {\n          var dataBlocks = [];\n\n          for (var _i2 = 0; _i2 < files.length; _i2++) {\n            dataBlocks[_i2] = {\n              name: _this14._getParamName(_i2),\n              data: transformedFiles[_i2],\n              filename: files[_i2].upload.filename\n            };\n          }\n\n          _this14._uploadData(files, dataBlocks);\n        }\n      });\n    } /// Returns the right chunk for given file and xhr\n\n  }, {\n    key: \"_getChunk\",\n    value: function _getChunk(file, xhr) {\n      for (var i = 0; i < file.upload.totalChunkCount; i++) {\n        if (file.upload.chunks[i] !== undefined && file.upload.chunks[i].xhr === xhr) {\n          return file.upload.chunks[i];\n        }\n      }\n    } // This function actually uploads the file(s) to the server.\n    // If dataBlocks contains the actual data to upload (meaning, that this could either be transformed\n    // files, or individual chunks for chunked upload).\n\n  }, {\n    key: \"_uploadData\",\n    value: function _uploadData(files, dataBlocks) {\n      var _this15 = this;\n\n      var xhr = new XMLHttpRequest(); // Put the xhr object in the file objects to be able to reference it later.\n\n      var _iterator13 = dropzone_createForOfIteratorHelper(files, true),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var file = _step13.value;\n          file.xhr = xhr;\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n\n      if (files[0].upload.chunked) {\n        // Put the xhr object in the right chunk object, so it can be associated later, and found with _getChunk\n        files[0].upload.chunks[dataBlocks[0].chunkIndex].xhr = xhr;\n      }\n\n      var method = this.resolveOption(this.options.method, files);\n      var url = this.resolveOption(this.options.url, files);\n      xhr.open(method, url, true); // Setting the timeout after open because of IE11 issue: https://gitlab.com/meno/dropzone/issues/8\n\n      var timeout = this.resolveOption(this.options.timeout, files);\n      if (timeout) xhr.timeout = this.resolveOption(this.options.timeout, files); // Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179\n\n      xhr.withCredentials = !!this.options.withCredentials;\n\n      xhr.onload = function (e) {\n        _this15._finishedUploading(files, xhr, e);\n      };\n\n      xhr.ontimeout = function () {\n        _this15._handleUploadError(files, xhr, \"Request timedout after \".concat(_this15.options.timeout / 1000, \" seconds\"));\n      };\n\n      xhr.onerror = function () {\n        _this15._handleUploadError(files, xhr);\n      }; // Some browsers do not have the .upload property\n\n\n      var progressObj = xhr.upload != null ? xhr.upload : xhr;\n\n      progressObj.onprogress = function (e) {\n        return _this15._updateFilesUploadProgress(files, xhr, e);\n      };\n\n      var headers = {\n        Accept: \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      };\n\n      if (this.options.headers) {\n        Dropzone.extend(headers, this.options.headers);\n      }\n\n      for (var headerName in headers) {\n        var headerValue = headers[headerName];\n\n        if (headerValue) {\n          xhr.setRequestHeader(headerName, headerValue);\n        }\n      }\n\n      var formData = new FormData(); // Adding all @options parameters\n\n      if (this.options.params) {\n        var additionalParams = this.options.params;\n\n        if (typeof additionalParams === \"function\") {\n          additionalParams = additionalParams.call(this, files, xhr, files[0].upload.chunked ? this._getChunk(files[0], xhr) : null);\n        }\n\n        for (var key in additionalParams) {\n          var value = additionalParams[key];\n\n          if (Array.isArray(value)) {\n            // The additional parameter contains an array,\n            // so lets iterate over it to attach each value\n            // individually.\n            for (var i = 0; i < value.length; i++) {\n              formData.append(key, value[i]);\n            }\n          } else {\n            formData.append(key, value);\n          }\n        }\n      } // Let the user add additional data if necessary\n\n\n      var _iterator14 = dropzone_createForOfIteratorHelper(files, true),\n          _step14;\n\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var _file = _step14.value;\n          this.emit(\"sending\", _file, xhr, formData);\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n\n      if (this.options.uploadMultiple) {\n        this.emit(\"sendingmultiple\", files, xhr, formData);\n      }\n\n      this._addFormElementData(formData); // Finally add the files\n      // Has to be last because some servers (eg: S3) expect the file to be the last parameter\n\n\n      for (var _i3 = 0; _i3 < dataBlocks.length; _i3++) {\n        var dataBlock = dataBlocks[_i3];\n        formData.append(dataBlock.name, dataBlock.data, dataBlock.filename);\n      }\n\n      this.submitRequest(xhr, formData, files);\n    } // Transforms all files with this.options.transformFile and invokes done with the transformed files when done.\n\n  }, {\n    key: \"_transformFiles\",\n    value: function _transformFiles(files, done) {\n      var _this16 = this;\n\n      var transformedFiles = []; // Clumsy way of handling asynchronous calls, until I get to add a proper Future library.\n\n      var doneCounter = 0;\n\n      var _loop = function _loop(i) {\n        _this16.options.transformFile.call(_this16, files[i], function (transformedFile) {\n          transformedFiles[i] = transformedFile;\n\n          if (++doneCounter === files.length) {\n            done(transformedFiles);\n          }\n        });\n      };\n\n      for (var i = 0; i < files.length; i++) {\n        _loop(i);\n      }\n    } // Takes care of adding other input elements of the form to the AJAX request\n\n  }, {\n    key: \"_addFormElementData\",\n    value: function _addFormElementData(formData) {\n      // Take care of other input elements\n      if (this.element.tagName === \"FORM\") {\n        var _iterator15 = dropzone_createForOfIteratorHelper(this.element.querySelectorAll(\"input, textarea, select, button\"), true),\n            _step15;\n\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var input = _step15.value;\n            var inputName = input.getAttribute(\"name\");\n            var inputType = input.getAttribute(\"type\");\n            if (inputType) inputType = inputType.toLowerCase(); // If the input doesn't have a name, we can't use it.\n\n            if (typeof inputName === \"undefined\" || inputName === null) continue;\n\n            if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\n              // Possibly multiple values\n              var _iterator16 = dropzone_createForOfIteratorHelper(input.options, true),\n                  _step16;\n\n              try {\n                for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                  var option = _step16.value;\n\n                  if (option.selected) {\n                    formData.append(inputName, option.value);\n                  }\n                }\n              } catch (err) {\n                _iterator16.e(err);\n              } finally {\n                _iterator16.f();\n              }\n            } else if (!inputType || inputType !== \"checkbox\" && inputType !== \"radio\" || input.checked) {\n              formData.append(inputName, input.value);\n            }\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n      }\n    } // Invoked when there is new progress information about given files.\n    // If e is not provided, it is assumed that the upload is finished.\n\n  }, {\n    key: \"_updateFilesUploadProgress\",\n    value: function _updateFilesUploadProgress(files, xhr, e) {\n      if (!files[0].upload.chunked) {\n        // Handle file uploads without chunking\n        var _iterator17 = dropzone_createForOfIteratorHelper(files, true),\n            _step17;\n\n        try {\n          for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n            var file = _step17.value;\n\n            if (file.upload.total && file.upload.bytesSent && file.upload.bytesSent == file.upload.total) {\n              // If both, the `total` and `bytesSent` have already been set, and\n              // they are equal (meaning progress is at 100%), we can skip this\n              // file, since an upload progress shouldn't go down.\n              continue;\n            }\n\n            if (e) {\n              file.upload.progress = 100 * e.loaded / e.total;\n              file.upload.total = e.total;\n              file.upload.bytesSent = e.loaded;\n            } else {\n              // No event, so we're at 100%\n              file.upload.progress = 100;\n              file.upload.bytesSent = file.upload.total;\n            }\n\n            this.emit(\"uploadprogress\", file, file.upload.progress, file.upload.bytesSent);\n          }\n        } catch (err) {\n          _iterator17.e(err);\n        } finally {\n          _iterator17.f();\n        }\n      } else {\n        // Handle chunked file uploads\n        // Chunked upload is not compatible with uploading multiple files in one\n        // request, so we know there's only one file.\n        var _file2 = files[0]; // Since this is a chunked upload, we need to update the appropriate chunk\n        // progress.\n\n        var chunk = this._getChunk(_file2, xhr);\n\n        if (e) {\n          chunk.progress = 100 * e.loaded / e.total;\n          chunk.total = e.total;\n          chunk.bytesSent = e.loaded;\n        } else {\n          // No event, so we're at 100%\n          chunk.progress = 100;\n          chunk.bytesSent = chunk.total;\n        } // Now tally the *file* upload progress from its individual chunks\n\n\n        _file2.upload.progress = 0;\n        _file2.upload.total = 0;\n        _file2.upload.bytesSent = 0;\n\n        for (var i = 0; i < _file2.upload.totalChunkCount; i++) {\n          if (_file2.upload.chunks[i] && typeof _file2.upload.chunks[i].progress !== \"undefined\") {\n            _file2.upload.progress += _file2.upload.chunks[i].progress;\n            _file2.upload.total += _file2.upload.chunks[i].total;\n            _file2.upload.bytesSent += _file2.upload.chunks[i].bytesSent;\n          }\n        } // Since the process is a percentage, we need to divide by the amount of\n        // chunks we've used.\n\n\n        _file2.upload.progress = _file2.upload.progress / _file2.upload.totalChunkCount;\n        this.emit(\"uploadprogress\", _file2, _file2.upload.progress, _file2.upload.bytesSent);\n      }\n    }\n  }, {\n    key: \"_finishedUploading\",\n    value: function _finishedUploading(files, xhr, e) {\n      var response;\n\n      if (files[0].status === Dropzone.CANCELED) {\n        return;\n      }\n\n      if (xhr.readyState !== 4) {\n        return;\n      }\n\n      if (xhr.responseType !== \"arraybuffer\" && xhr.responseType !== \"blob\") {\n        response = xhr.responseText;\n\n        if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n          try {\n            response = JSON.parse(response);\n          } catch (error) {\n            e = error;\n            response = \"Invalid JSON response from server.\";\n          }\n        }\n      }\n\n      this._updateFilesUploadProgress(files, xhr);\n\n      if (!(200 <= xhr.status && xhr.status < 300)) {\n        this._handleUploadError(files, xhr, response);\n      } else {\n        if (files[0].upload.chunked) {\n          files[0].upload.finishedChunkUpload(this._getChunk(files[0], xhr), response);\n        } else {\n          this._finished(files, response, e);\n        }\n      }\n    }\n  }, {\n    key: \"_handleUploadError\",\n    value: function _handleUploadError(files, xhr, response) {\n      if (files[0].status === Dropzone.CANCELED) {\n        return;\n      }\n\n      if (files[0].upload.chunked && this.options.retryChunks) {\n        var chunk = this._getChunk(files[0], xhr);\n\n        if (chunk.retries++ < this.options.retryChunksLimit) {\n          this._uploadData(files, [chunk.dataBlock]);\n\n          return;\n        } else {\n          console.warn(\"Retried this chunk too often. Giving up.\");\n        }\n      }\n\n      this._errorProcessing(files, response || this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr);\n    }\n  }, {\n    key: \"submitRequest\",\n    value: function submitRequest(xhr, formData, files) {\n      if (xhr.readyState != 1) {\n        console.warn(\"Cannot send this request because the XMLHttpRequest.readyState is not OPENED.\");\n        return;\n      }\n\n      xhr.send(formData);\n    } // Called internally when processing is finished.\n    // Individual callbacks have to be called in the appropriate sections.\n\n  }, {\n    key: \"_finished\",\n    value: function _finished(files, responseText, e) {\n      var _iterator18 = dropzone_createForOfIteratorHelper(files, true),\n          _step18;\n\n      try {\n        for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n          var file = _step18.value;\n          file.status = Dropzone.SUCCESS;\n          this.emit(\"success\", file, responseText, e);\n          this.emit(\"complete\", file);\n        }\n      } catch (err) {\n        _iterator18.e(err);\n      } finally {\n        _iterator18.f();\n      }\n\n      if (this.options.uploadMultiple) {\n        this.emit(\"successmultiple\", files, responseText, e);\n        this.emit(\"completemultiple\", files);\n      }\n\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    } // Called internally when processing is finished.\n    // Individual callbacks have to be called in the appropriate sections.\n\n  }, {\n    key: \"_errorProcessing\",\n    value: function _errorProcessing(files, message, xhr) {\n      var _iterator19 = dropzone_createForOfIteratorHelper(files, true),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var file = _step19.value;\n          file.status = Dropzone.ERROR;\n          this.emit(\"error\", file, message, xhr);\n          this.emit(\"complete\", file);\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n\n      if (this.options.uploadMultiple) {\n        this.emit(\"errormultiple\", files, message, xhr);\n        this.emit(\"completemultiple\", files);\n      }\n\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    }\n  }], [{\n    key: \"initClass\",\n    value: function initClass() {\n      // Exposing the emitter class, mainly for tests\n      this.prototype.Emitter = Emitter;\n      /*\n       This is a list of all available events you can register on a dropzone object.\n        You can register an event handler like this:\n        dropzone.on(\"dragEnter\", function() { });\n        */\n\n      this.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"addedfiles\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\n      this.prototype._thumbnailQueue = [];\n      this.prototype._processingThumbnail = false;\n    } // global utility\n\n  }, {\n    key: \"extend\",\n    value: function extend(target) {\n      for (var _len2 = arguments.length, objects = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        objects[_key2 - 1] = arguments[_key2];\n      }\n\n      for (var _i4 = 0, _objects = objects; _i4 < _objects.length; _i4++) {\n        var object = _objects[_i4];\n\n        for (var key in object) {\n          var val = object[key];\n          target[key] = val;\n        }\n      }\n\n      return target;\n    }\n  }, {\n    key: \"uuidv4\",\n    value: function uuidv4() {\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0,\n            v = c === \"x\" ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n      });\n    }\n  }]);\n\n  return Dropzone;\n}(Emitter);\n\n\nDropzone.initClass();\nDropzone.version = \"5.9.3\"; // This is a map of options for your different dropzones. Add configurations\n// to this object for your different dropzone elemens.\n//\n// Example:\n//\n//     Dropzone.options.myDropzoneElementId = { maxFilesize: 1 };\n//\n// To disable autoDiscover for a specific element, you can set `false` as an option:\n//\n//     Dropzone.options.myDisabledElementId = false;\n//\n// And in html:\n//\n//     <form action=\"/upload\" id=\"my-dropzone-element-id\" class=\"dropzone\"></form>\n\nDropzone.options = {}; // Returns the options for an element or undefined if none available.\n\nDropzone.optionsForElement = function (element) {\n  // Get the `Dropzone.options.elementId` for this element if it exists\n  if (element.getAttribute(\"id\")) {\n    return Dropzone.options[camelize(element.getAttribute(\"id\"))];\n  } else {\n    return undefined;\n  }\n}; // Holds a list of all dropzone instances\n\n\nDropzone.instances = []; // Returns the dropzone for given element if any\n\nDropzone.forElement = function (element) {\n  if (typeof element === \"string\") {\n    element = document.querySelector(element);\n  }\n\n  if ((element != null ? element.dropzone : undefined) == null) {\n    throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\n  }\n\n  return element.dropzone;\n}; // Set to false if you don't want Dropzone to automatically find and attach to .dropzone elements.\n\n\nDropzone.autoDiscover = true; // Looks for all .dropzone elements and creates a dropzone for them\n\nDropzone.discover = function () {\n  var dropzones;\n\n  if (document.querySelectorAll) {\n    dropzones = document.querySelectorAll(\".dropzone\");\n  } else {\n    dropzones = []; // IE :(\n\n    var checkElements = function checkElements(elements) {\n      return function () {\n        var result = [];\n\n        var _iterator20 = dropzone_createForOfIteratorHelper(elements, true),\n            _step20;\n\n        try {\n          for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n            var el = _step20.value;\n\n            if (/(^| )dropzone($| )/.test(el.className)) {\n              result.push(dropzones.push(el));\n            } else {\n              result.push(undefined);\n            }\n          }\n        } catch (err) {\n          _iterator20.e(err);\n        } finally {\n          _iterator20.f();\n        }\n\n        return result;\n      }();\n    };\n\n    checkElements(document.getElementsByTagName(\"div\"));\n    checkElements(document.getElementsByTagName(\"form\"));\n  }\n\n  return function () {\n    var result = [];\n\n    var _iterator21 = dropzone_createForOfIteratorHelper(dropzones, true),\n        _step21;\n\n    try {\n      for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n        var dropzone = _step21.value;\n\n        // Create a dropzone unless auto discover has been disabled for specific element\n        if (Dropzone.optionsForElement(dropzone) !== false) {\n          result.push(new Dropzone(dropzone));\n        } else {\n          result.push(undefined);\n        }\n      }\n    } catch (err) {\n      _iterator21.e(err);\n    } finally {\n      _iterator21.f();\n    }\n\n    return result;\n  }();\n}; // Some browsers support drag and drog functionality, but not correctly.\n//\n// So I created a blocklist of userAgents. Yes, yes. Browser sniffing, I know.\n// But what to do when browsers *theoretically* support an API, but crash\n// when using it.\n//\n// This is a list of regular expressions tested against navigator.userAgent\n//\n// ** It should only be used on browser that *do* support the API, but\n// incorrectly **\n\n\nDropzone.blockedBrowsers = [// The mac os and windows phone version of opera 12 seems to have a problem with the File drag'n'drop API.\n/opera.*(Macintosh|Windows Phone).*version\\/12/i]; // Checks if the browser is supported\n\nDropzone.isBrowserSupported = function () {\n  var capableBrowser = true;\n\n  if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\n    if (!(\"classList\" in document.createElement(\"a\"))) {\n      capableBrowser = false;\n    } else {\n      if (Dropzone.blacklistedBrowsers !== undefined) {\n        // Since this has been renamed, this makes sure we don't break older\n        // configuration.\n        Dropzone.blockedBrowsers = Dropzone.blacklistedBrowsers;\n      } // The browser supports the API, but may be blocked.\n\n\n      var _iterator22 = dropzone_createForOfIteratorHelper(Dropzone.blockedBrowsers, true),\n          _step22;\n\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var regex = _step22.value;\n\n          if (regex.test(navigator.userAgent)) {\n            capableBrowser = false;\n            continue;\n          }\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n    }\n  } else {\n    capableBrowser = false;\n  }\n\n  return capableBrowser;\n};\n\nDropzone.dataURItoBlob = function (dataURI) {\n  // convert base64 to raw binary data held in a string\n  // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n  var byteString = atob(dataURI.split(\",\")[1]); // separate out the mime component\n\n  var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0]; // write the bytes of the string to an ArrayBuffer\n\n  var ab = new ArrayBuffer(byteString.length);\n  var ia = new Uint8Array(ab);\n\n  for (var i = 0, end = byteString.length, asc = 0 <= end; asc ? i <= end : i >= end; asc ? i++ : i--) {\n    ia[i] = byteString.charCodeAt(i);\n  } // write the ArrayBuffer to a blob\n\n\n  return new Blob([ab], {\n    type: mimeString\n  });\n}; // Returns an array without the rejected item\n\n\nvar without = function without(list, rejectedItem) {\n  return list.filter(function (item) {\n    return item !== rejectedItem;\n  }).map(function (item) {\n    return item;\n  });\n}; // abc-def_ghi -> abcDefGhi\n\n\nvar camelize = function camelize(str) {\n  return str.replace(/[\\-_](\\w)/g, function (match) {\n    return match.charAt(1).toUpperCase();\n  });\n}; // Creates an element from string\n\n\nDropzone.createElement = function (string) {\n  var div = document.createElement(\"div\");\n  div.innerHTML = string;\n  return div.childNodes[0];\n}; // Tests if given element is inside (or simply is) the container\n\n\nDropzone.elementInside = function (element, container) {\n  if (element === container) {\n    return true;\n  } // Coffeescript doesn't support do/while loops\n\n\n  while (element = element.parentNode) {\n    if (element === container) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nDropzone.getElement = function (el, name) {\n  var element;\n\n  if (typeof el === \"string\") {\n    element = document.querySelector(el);\n  } else if (el.nodeType != null) {\n    element = el;\n  }\n\n  if (element == null) {\n    throw new Error(\"Invalid `\".concat(name, \"` option provided. Please provide a CSS selector or a plain HTML element.\"));\n  }\n\n  return element;\n};\n\nDropzone.getElements = function (els, name) {\n  var el, elements;\n\n  if (els instanceof Array) {\n    elements = [];\n\n    try {\n      var _iterator23 = dropzone_createForOfIteratorHelper(els, true),\n          _step23;\n\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          el = _step23.value;\n          elements.push(this.getElement(el, name));\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n    } catch (e) {\n      elements = null;\n    }\n  } else if (typeof els === \"string\") {\n    elements = [];\n\n    var _iterator24 = dropzone_createForOfIteratorHelper(document.querySelectorAll(els), true),\n        _step24;\n\n    try {\n      for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n        el = _step24.value;\n        elements.push(el);\n      }\n    } catch (err) {\n      _iterator24.e(err);\n    } finally {\n      _iterator24.f();\n    }\n  } else if (els.nodeType != null) {\n    elements = [els];\n  }\n\n  if (elements == null || !elements.length) {\n    throw new Error(\"Invalid `\".concat(name, \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\"));\n  }\n\n  return elements;\n}; // Asks the user the question and calls accepted or rejected accordingly\n//\n// The default implementation just uses `window.confirm` and then calls the\n// appropriate callback.\n\n\nDropzone.confirm = function (question, accepted, rejected) {\n  if (window.confirm(question)) {\n    return accepted();\n  } else if (rejected != null) {\n    return rejected();\n  }\n}; // Validates the mime type like this:\n//\n// https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept\n\n\nDropzone.isValidFile = function (file, acceptedFiles) {\n  if (!acceptedFiles) {\n    return true;\n  } // If there are no accepted mime types, it's OK\n\n\n  acceptedFiles = acceptedFiles.split(\",\");\n  var mimeType = file.type;\n  var baseMimeType = mimeType.replace(/\\/.*$/, \"\");\n\n  var _iterator25 = dropzone_createForOfIteratorHelper(acceptedFiles, true),\n      _step25;\n\n  try {\n    for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n      var validType = _step25.value;\n      validType = validType.trim();\n\n      if (validType.charAt(0) === \".\") {\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n          return true;\n        }\n      } else if (/\\/\\*$/.test(validType)) {\n        // This is something like a image/* mime type\n        if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\n          return true;\n        }\n      } else {\n        if (mimeType === validType) {\n          return true;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator25.e(err);\n  } finally {\n    _iterator25.f();\n  }\n\n  return false;\n}; // Augment jQuery\n\n\nif (typeof jQuery !== \"undefined\" && jQuery !== null) {\n  jQuery.fn.dropzone = function (options) {\n    return this.each(function () {\n      return new Dropzone(this, options);\n    });\n  };\n} // Dropzone file status codes\n\n\nDropzone.ADDED = \"added\";\nDropzone.QUEUED = \"queued\"; // For backwards compatibility. Now, if a file is accepted, it's either queued\n// or uploading.\n\nDropzone.ACCEPTED = Dropzone.QUEUED;\nDropzone.UPLOADING = \"uploading\";\nDropzone.PROCESSING = Dropzone.UPLOADING; // alias\n\nDropzone.CANCELED = \"canceled\";\nDropzone.ERROR = \"error\";\nDropzone.SUCCESS = \"success\";\n/*\n\n Bugfix for iOS 6 and 7\n Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n based on the work of https://github.com/stomita/ios-imagefile-megapixel\n\n */\n// Detecting vertical squash in loaded image.\n// Fixes a bug which squash image vertically while drawing into canvas for some images.\n// This is a bug in iOS6 devices. This function from https://github.com/stomita/ios-imagefile-megapixel\n\nvar detectVerticalSquash = function detectVerticalSquash(img) {\n  var iw = img.naturalWidth;\n  var ih = img.naturalHeight;\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = 1;\n  canvas.height = ih;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(img, 0, 0);\n\n  var _ctx$getImageData = ctx.getImageData(1, 0, 1, ih),\n      data = _ctx$getImageData.data; // search image edge pixel position in case it is squashed vertically.\n\n\n  var sy = 0;\n  var ey = ih;\n  var py = ih;\n\n  while (py > sy) {\n    var alpha = data[(py - 1) * 4 + 3];\n\n    if (alpha === 0) {\n      ey = py;\n    } else {\n      sy = py;\n    }\n\n    py = ey + sy >> 1;\n  }\n\n  var ratio = py / ih;\n\n  if (ratio === 0) {\n    return 1;\n  } else {\n    return ratio;\n  }\n}; // A replacement for context.drawImage\n// (args are for source and destination).\n\n\nvar drawImageIOSFix = function drawImageIOSFix(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n  var vertSquashRatio = detectVerticalSquash(img);\n  return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n}; // Based on MinifyJpeg\n// Source: http://www.perry.cz/files/ExifRestorer.js\n// http://elicon.blog57.fc2.com/blog-entry-206.html\n\n\nvar ExifRestore = /*#__PURE__*/function () {\n  function ExifRestore() {\n    dropzone_classCallCheck(this, ExifRestore);\n  }\n\n  dropzone_createClass(ExifRestore, null, [{\n    key: \"initClass\",\n    value: function initClass() {\n      this.KEY_STR = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    }\n  }, {\n    key: \"encode64\",\n    value: function encode64(input) {\n      var output = \"\";\n      var chr1 = undefined;\n      var chr2 = undefined;\n      var chr3 = \"\";\n      var enc1 = undefined;\n      var enc2 = undefined;\n      var enc3 = undefined;\n      var enc4 = \"\";\n      var i = 0;\n\n      while (true) {\n        chr1 = input[i++];\n        chr2 = input[i++];\n        chr3 = input[i++];\n        enc1 = chr1 >> 2;\n        enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n        enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n          enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n          enc4 = 64;\n        }\n\n        output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n        chr1 = chr2 = chr3 = \"\";\n        enc1 = enc2 = enc3 = enc4 = \"\";\n\n        if (!(i < input.length)) {\n          break;\n        }\n      }\n\n      return output;\n    }\n  }, {\n    key: \"restore\",\n    value: function restore(origFileBase64, resizedFileBase64) {\n      if (!origFileBase64.match(\"data:image/jpeg;base64,\")) {\n        return resizedFileBase64;\n      }\n\n      var rawImage = this.decode64(origFileBase64.replace(\"data:image/jpeg;base64,\", \"\"));\n      var segments = this.slice2Segments(rawImage);\n      var image = this.exifManipulation(resizedFileBase64, segments);\n      return \"data:image/jpeg;base64,\".concat(this.encode64(image));\n    }\n  }, {\n    key: \"exifManipulation\",\n    value: function exifManipulation(resizedFileBase64, segments) {\n      var exifArray = this.getExifArray(segments);\n      var newImageArray = this.insertExif(resizedFileBase64, exifArray);\n      var aBuffer = new Uint8Array(newImageArray);\n      return aBuffer;\n    }\n  }, {\n    key: \"getExifArray\",\n    value: function getExifArray(segments) {\n      var seg = undefined;\n      var x = 0;\n\n      while (x < segments.length) {\n        seg = segments[x];\n\n        if (seg[0] === 255 & seg[1] === 225) {\n          return seg;\n        }\n\n        x++;\n      }\n\n      return [];\n    }\n  }, {\n    key: \"insertExif\",\n    value: function insertExif(resizedFileBase64, exifArray) {\n      var imageData = resizedFileBase64.replace(\"data:image/jpeg;base64,\", \"\");\n      var buf = this.decode64(imageData);\n      var separatePoint = buf.indexOf(255, 3);\n      var mae = buf.slice(0, separatePoint);\n      var ato = buf.slice(separatePoint);\n      var array = mae;\n      array = array.concat(exifArray);\n      array = array.concat(ato);\n      return array;\n    }\n  }, {\n    key: \"slice2Segments\",\n    value: function slice2Segments(rawImageArray) {\n      var head = 0;\n      var segments = [];\n\n      while (true) {\n        var length;\n\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 218) {\n          break;\n        }\n\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 216) {\n          head += 2;\n        } else {\n          length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3];\n          var endPoint = head + length + 2;\n          var seg = rawImageArray.slice(head, endPoint);\n          segments.push(seg);\n          head = endPoint;\n        }\n\n        if (head > rawImageArray.length) {\n          break;\n        }\n      }\n\n      return segments;\n    }\n  }, {\n    key: \"decode64\",\n    value: function decode64(input) {\n      var output = \"\";\n      var chr1 = undefined;\n      var chr2 = undefined;\n      var chr3 = \"\";\n      var enc1 = undefined;\n      var enc2 = undefined;\n      var enc3 = undefined;\n      var enc4 = \"\";\n      var i = 0;\n      var buf = []; // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n\n      var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n\n      if (base64test.exec(input)) {\n        console.warn(\"There were invalid base64 characters in the input text.\\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\\nExpect errors in decoding.\");\n      }\n\n      input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n      while (true) {\n        enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n        chr1 = enc1 << 2 | enc2 >> 4;\n        chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n        chr3 = (enc3 & 3) << 6 | enc4;\n        buf.push(chr1);\n\n        if (enc3 !== 64) {\n          buf.push(chr2);\n        }\n\n        if (enc4 !== 64) {\n          buf.push(chr3);\n        }\n\n        chr1 = chr2 = chr3 = \"\";\n        enc1 = enc2 = enc3 = enc4 = \"\";\n\n        if (!(i < input.length)) {\n          break;\n        }\n      }\n\n      return buf;\n    }\n  }]);\n\n  return ExifRestore;\n}();\n\nExifRestore.initClass();\n/*\n * contentloaded.js\n *\n * Author: Diego Perini (diego.perini at gmail.com)\n * Summary: cross-browser wrapper for DOMContentLoaded\n * Updated: 20101020\n * License: MIT\n * Version: 1.2\n *\n * URL:\n * http://javascript.nwbox.com/ContentLoaded/\n * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\n */\n// @win window reference\n// @fn function reference\n\nvar contentLoaded = function contentLoaded(win, fn) {\n  var done = false;\n  var top = true;\n  var doc = win.document;\n  var root = doc.documentElement;\n  var add = doc.addEventListener ? \"addEventListener\" : \"attachEvent\";\n  var rem = doc.addEventListener ? \"removeEventListener\" : \"detachEvent\";\n  var pre = doc.addEventListener ? \"\" : \"on\";\n\n  var init = function init(e) {\n    if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\n      return;\n    }\n\n    (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\n\n    if (!done && (done = true)) {\n      return fn.call(win, e.type || e);\n    }\n  };\n\n  var poll = function poll() {\n    try {\n      root.doScroll(\"left\");\n    } catch (e) {\n      setTimeout(poll, 50);\n      return;\n    }\n\n    return init(\"poll\");\n  };\n\n  if (doc.readyState !== \"complete\") {\n    if (doc.createEventObject && root.doScroll) {\n      try {\n        top = !win.frameElement;\n      } catch (error) {}\n\n      if (top) {\n        poll();\n      }\n    }\n\n    doc[add](pre + \"DOMContentLoaded\", init, false);\n    doc[add](pre + \"readystatechange\", init, false);\n    return win[add](pre + \"load\", init, false);\n  }\n}; // As a single function to be able to write tests.\n\n\nDropzone._autoDiscoverFunction = function () {\n  if (Dropzone.autoDiscover) {\n    return Dropzone.discover();\n  }\n};\n\ncontentLoaded(window, Dropzone._autoDiscoverFunction);\n\nfunction __guard__(value, transform) {\n  return typeof value !== \"undefined\" && value !== null ? transform(value) : undefined;\n}\n\nfunction __guardMethod__(obj, methodName, transform) {\n  if (typeof obj !== \"undefined\" && obj !== null && typeof obj[methodName] === \"function\") {\n    return transform(obj, methodName);\n  } else {\n    return undefined;\n  }\n}\n\n\n;// CONCATENATED MODULE: ./tool/dropzone.dist.js\n /// Make Dropzone a global variable.\n\nwindow.Dropzone = Dropzone;\n/* harmony default export */ var dropzone_dist = (Dropzone);\n\n}();\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});","import { Injectable, OnDestroy, Signal } from '@angular/core';\r\nimport { toSignal } from '@angular/core/rxjs-interop';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { Of } from '../../../../../../core';\r\n\r\n/**\r\n * Logging service - ATM not really used, but would be great\r\n * to show logs in the debug-panel.\r\n * So don't delete - reconsider how to use.\r\n */\r\n@Injectable()\r\nexport class LoggingService implements OnDestroy {\r\n  private logs$ = new BehaviorSubject<LogEntry[]>([]);\r\n  private logLimit = 50;\r\n  private lastSnackBarTime = 0;\r\n  private snackBarDebounce = 10000;\r\n\r\n  constructor(private snackBar: MatSnackBar) { }\r\n\r\n  ngOnDestroy(): void {\r\n    this.logs$.complete();\r\n  }\r\n\r\n  addLog(severity: Of<typeof LogSeverities>, label: string, error: any): void {\r\n    const newLogEntry: LogEntry = {\r\n      error,\r\n      label,\r\n      severity,\r\n      time: Date.now(),\r\n    };\r\n    const oldLogs = this.logs$.value;\r\n    const newLogs = [newLogEntry, ...oldLogs.slice(0, this.logLimit - 2)];\r\n    this.logs$.next(newLogs);\r\n  }\r\n\r\n  /** Show snackBar to the user. By default snackBars have debounce timer, but you can force snackBar to show instantly */\r\n  showMessage(message: string, duration: number, force?: boolean): void {\r\n    const nowTime = Date.now();\r\n    if (!force && (nowTime - this.lastSnackBarTime) <= this.snackBarDebounce) {\r\n      return;\r\n    }\r\n\r\n    if (duration != null && duration > 0) {\r\n      this.snackBar.open(message, null, { duration });\r\n    } else {\r\n      this.snackBar.open(message);\r\n    }\r\n    this.lastSnackBarTime = nowTime;\r\n  }\r\n\r\n  getLogs$(): Observable<LogEntry[]> {\r\n    return this.logs$.asObservable();\r\n  }\r\n\r\n  getLogsSignal(): Signal<LogEntry[]> {\r\n    return toSignal(this.logs$);\r\n  }\r\n\r\n}\r\n\r\n\r\nexport interface LogEntry {\r\n  error: any;\r\n  label: string;\r\n  severity: Of<typeof LogSeverities>;\r\n  time: number;\r\n}\r\n\r\nexport const LogSeverities = {\r\n  Error: 'error',\r\n  Log: 'log',\r\n  Warn: 'warn',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../shared/logging';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { EavDimension } from '../shared/models/eav/eav-dimension';\r\nimport { EavEntityAttributes } from '../shared/models/eav/eav-entity-attributes';\r\nimport { EavField } from '../shared/models/eav/eav-field';\r\nimport { EavFieldValue } from '../shared/models/eav/eav-field-value';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { DimensionReader } from './dimension-reader';\r\nimport { FieldReader } from './field-reader';\r\n\r\nexport class FieldWriter {\r\n\r\n  log = classLog({FieldWriter});\r\n\r\n  /** Copy attributes from item */\r\n  #updateAttribute(\r\n    oldAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    attribute: EavField<any>,\r\n  ): EavEntityAttributes {\r\n    const newAttributes: EavEntityAttributes = {};\r\n    if (Object.keys(oldAttributes).length === 0) {\r\n      const attributeCopy: EavField<any> = { ...attribute };\r\n      newAttributes[attributeKey] = attributeCopy;\r\n      return newAttributes;\r\n    }\r\n\r\n    for (const key of Object.keys(oldAttributes)) {\r\n      if (key === attributeKey) {\r\n        const attributeCopy: EavField<any> = { ...attribute };\r\n        newAttributes[key] = attributeCopy;\r\n      } else {\r\n        const attributeCopy: EavField<any> = { ...oldAttributes[key] };\r\n        newAttributes[key] = attributeCopy;\r\n      }\r\n    }\r\n\r\n    if (oldAttributes[attributeKey] == null) {\r\n      const attributeCopy: EavField<any> = { ...attribute };\r\n      newAttributes[attributeKey] = attributeCopy;\r\n    }\r\n    return newAttributes;\r\n  }\r\n\r\n  /** Update values for languageKey */\r\n  updateAttributesValues(\r\n    allFields: EavEntityAttributes,\r\n    updateValues: ItemValuesOfLanguage,\r\n    language: FormLanguage,\r\n  ): EavEntityAttributes {\r\n    const l = this.log.fn('updateAttributesValues', { allFields, updateValues, language });\r\n    // copy attributes from item\r\n    const eavAttributes: EavEntityAttributes = {};\r\n    Object.keys(allFields).forEach(attributeKey => {\r\n      const newItemValue = updateValues[attributeKey];\r\n      // if new value exist update attribute for languageKey   \r\n      // it's important to check for undefined, because empty string and sometimes null (bool-tristate) are valid values\r\n      if (newItemValue !== undefined) {\r\n        const fr = new FieldReader(allFields[attributeKey], language);\r\n        const valueWithLanguageExist = fr.isEditableOrReadonlyTranslationExist();\r\n\r\n        // if valueWithLanguageExist update value for languageKey\r\n        if (valueWithLanguageExist) {\r\n          const newValues: EavField<any> = {\r\n            ...allFields[attributeKey],\r\n            Values: allFields[attributeKey].Values.map(val => {\r\n              const hasLanguage = new DimensionReader(val.dimensions, language).hasCurrent;\r\n              const newValue: EavFieldValue<any> = hasLanguage\r\n                // Update value for languageKey\r\n                ? {\r\n                    ...val,\r\n                    value: newItemValue,\r\n                  }\r\n                  : val;\r\n              return newValue;\r\n            })\r\n          };\r\n          eavAttributes[attributeKey] = newValues;\r\n        } else { // else add new value with dimension languageKey\r\n          l.a('saveAttributeValues add values ', { newItemValue });\r\n          const newEavValue = EavFieldValue.create(newItemValue, [EavDimension.create(language.current)]);\r\n          eavAttributes[attributeKey] = {\r\n            ...allFields[attributeKey],\r\n            Values: [...allFields[attributeKey].Values, newEavValue]\r\n          } satisfies EavField<any>;\r\n        }\r\n      } else { // else copy item attributes\r\n        eavAttributes[attributeKey] = { ...allFields[attributeKey] };\r\n      }\r\n    });\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** update attribute value, and change language readonly state if needed */\r\n  updateAttributeValue(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    updateValue: FieldValue,\r\n    language: FormLanguage,\r\n    isReadOnly: boolean,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    let newLanguageValue = language.current;\r\n\r\n    if (isReadOnly)\r\n      newLanguageValue = `~${language.current}`;\r\n\r\n    const attribute: EavField<any> = {\r\n      ...allAttributes[attributeKey], Values: allAttributes[attributeKey].Values.map(val => {\r\n        const hasLanguage = new DimensionReader(val.dimensions, language).hasCurrent;\r\n        const newValue: EavFieldValue<any> = hasLanguage\r\n          // Update value and dimension\r\n          ? {\r\n            ...val,\r\n            // update value\r\n            value: updateValue,\r\n            // update languageKey with newLanguageValue\r\n            dimensions: val.dimensions.map(d => {\r\n              const dimensionIsForLanguage = (d.dimCode === language.current\r\n                || d.dimCode === `~${language.current}`\r\n                || (language.current === language.primary && d.dimCode === '*'));\r\n              return dimensionIsForLanguage\r\n                ? { dimCode: newLanguageValue } satisfies EavDimension\r\n                : d;\r\n            })\r\n          }\r\n          : val;\r\n        return newValue;\r\n      })\r\n    };\r\n    eavAttributes = this.#updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  addAttributeValue(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeValue: EavFieldValue<any>,\r\n    attributeKey: string,\r\n    attributeType: string,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    const attribute: EavField<any> =\r\n      Object.keys(allAttributes).length === 0 || !allAttributes[attributeKey]\r\n        ? {\r\n          ...allAttributes[attributeKey],\r\n          Values: [attributeValue],\r\n          Type: attributeType\r\n        }\r\n        : {\r\n          ...allAttributes[attributeKey],\r\n          Values: [...allAttributes[attributeKey].Values, attributeValue],\r\n          Type: attributeType\r\n        };\r\n    eavAttributes = this.#updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** Add dimension to value with existing dimension */\r\n  addAttributeDimension(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    newDimensionValue: string,\r\n    existingDimensionValue: string,\r\n    defaultLanguage: string,\r\n    isReadOnly: boolean,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    let newLanguageValue = newDimensionValue;\r\n\r\n    if (isReadOnly) {\r\n      newLanguageValue = `~${newDimensionValue}`;\r\n    }\r\n\r\n    const attribute: EavField<any> = {\r\n      ...allAttributes[attributeKey], Values: allAttributes[attributeKey].Values.map(eavValue => {\r\n        const newValue: EavFieldValue<any> = eavValue.dimensions.find(d => d.dimCode === existingDimensionValue\r\n          || (existingDimensionValue === defaultLanguage && d.dimCode === '*'))\r\n          // Update dimension for current language\r\n          ? {\r\n            ...eavValue,\r\n            // if languageKey already exist\r\n            dimensions: eavValue.dimensions.concat({ dimCode: newLanguageValue })\r\n          }\r\n          : eavValue;\r\n        return newValue;\r\n      })\r\n    };\r\n    eavAttributes = this.#updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** Removes dimension (language) from attribute. If multiple dimensions exist, delete only dimension, else delete value and dimension */\r\n  removeAttributeDimension(attributes: EavEntityAttributes, attributeKey: string, language: string): EavEntityAttributes {\r\n    const oldAttributes = attributes;\r\n    const validDimensions = [language, `~${language}`];\r\n\r\n    const value = oldAttributes[attributeKey].Values.find(eavValue => {\r\n      const dimensionExists = eavValue.dimensions.some(d => validDimensions.includes(d.dimCode));\r\n      return dimensionExists;\r\n    });\r\n\r\n    // given dimension doesn't exist for this attribute so no change is needed\r\n    if (!value) {\r\n      const attributesCopy: EavEntityAttributes = { ...oldAttributes };\r\n      return attributesCopy;\r\n    }\r\n\r\n    let newAttribute: EavField<any>;\r\n    if (value.dimensions.length > 1) {\r\n      // if multiple dimensions exist delete only dimension\r\n      newAttribute = {\r\n        ...oldAttributes[attributeKey],\r\n        Values: oldAttributes[attributeKey].Values.map(eavValue => {\r\n          const dimensionExists = eavValue.dimensions.some(d => validDimensions.includes(d.dimCode));\r\n          return (!dimensionExists)\r\n            ? eavValue\r\n            : {\r\n                ...eavValue,\r\n                dimensions: eavValue.dimensions.filter(d => !validDimensions.includes(d.dimCode)),\r\n              } satisfies EavFieldValue<any>;\r\n        })\r\n      };\r\n    } else if (value.dimensions.length === 1) {\r\n      // if only one dimension exists delete value and dimension\r\n      newAttribute = {\r\n        ...oldAttributes[attributeKey],\r\n        Values: oldAttributes[attributeKey].Values.filter(eavValue => {\r\n          const dimensionExists = eavValue.dimensions.some(d => validDimensions.includes(d.dimCode));\r\n          return !dimensionExists;\r\n        })\r\n      };\r\n    }\r\n\r\n    const newAttributes = this.#updateAttribute(oldAttributes, attributeKey, newAttribute);\r\n    return newAttributes;\r\n  }\r\n\r\n}","import { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { InputTypeMetadata } from '../../shared/fields/input-type-metadata.model';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemEditIdentifier, ItemIdentifierHeader } from '../../shared/models/edit-form.model';\r\nimport { FormLanguage, Language } from '../form/form-languages.model';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { FieldWriter } from '../localization/field-writer';\r\nimport { EntityReader, FieldDefaults } from '../shared/helpers';\r\nimport { FieldValueHelpers } from '../shared/helpers/field-value.helpers';\r\nimport { EavContentTypeAttribute, EavDimension, EavEntity, EavFieldValue, EavItem } from '../shared/models/eav';\r\nimport { ItemValuesOfLanguage } from './item-values-of-language.model';\r\nimport { ItemService } from './item.service';\r\nimport { SaveResult } from './save-result.model';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  updateItemId: false,\r\n  updateItemHeader: false,\r\n  addItemAttributeValue: false,\r\n  updateItemAttributeValue: false,\r\n  setDefaultValue: false,\r\n  updateItemAttributesValues: false,\r\n  addItemAttributeDimension: false,\r\n  removeItemAttributeDimension: false,\r\n  updateItemMetadata: false,\r\n};\r\n\r\nexport class ItemUpdateHelper {\r\n\r\n  log = classLog({ItemUpdateHelper}, logSpecs);\r\n  \r\n  constructor(private itemSvc: ItemService) { }\r\n\r\n  updateItemId(saveResult: SaveResult): void {\r\n    const l = this.log.fnIf('updateItemId', { saveResult });\r\n    const entityGuid = Object.keys(saveResult)[0];\r\n    const entityId = saveResult[entityGuid];\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    if (!oldItem || ((oldItem.Header as ItemEditIdentifier).EntityId !== 0 && oldItem.Entity.Id !== 0))\r\n      return;\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Header: {\r\n        ...oldItem.Header,\r\n        EntityId: entityId,\r\n      },\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Id: entityId,\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n  }\r\n\r\n\r\n  /** Update parts of the header; ATM just to tell us about the slot being empty */\r\n  updateItemHeader(entityGuid: string, header: ItemIdentifierHeader): void {\r\n    const l = this.log.fnIf('updateItemHeader', { entityGuid, header });\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    if (!oldItem) return;\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Header: {\r\n        ...header\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n    l.end();\r\n  }\r\n\r\n  //#region Item Attribute - Single Value\r\n\r\n  addItemAttributeValue(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    newValue: FieldValue,\r\n    currentLanguage: string,\r\n    isReadOnly: boolean,\r\n    attributeType: string,\r\n    isTransaction = false,\r\n    transactionItem?: EavItem,\r\n  ): EavItem {\r\n    const l = this.log.fnIf('addItemAttributeValue', { entityGuid, attributeKey, newValue, currentLanguage, isReadOnly, attributeType, isTransaction, transactionItem });\r\n    const newValueDimension = isReadOnly ? `~${currentLanguage}` : currentLanguage;\r\n    const newEavValue = EavFieldValue.create(newValue, [EavDimension.create(newValueDimension)]);\r\n    const oldItem = transactionItem ?? this.itemSvc.get(entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: new FieldWriter().addAttributeValue(oldItem.Entity.Attributes, newEavValue, attributeKey, attributeType),\r\n      }\r\n    };\r\n\r\n    // if we're in a transaction, then save/update will happen later on, so don't trigger state changes yet\r\n    if (!isTransaction) \r\n      this.itemSvc.add(newItem);\r\n\r\n    return newItem;\r\n  }\r\n\r\n  updateItemAttributeValue(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    newValue: FieldValue,\r\n    language: FormLanguage,\r\n    isReadOnly: boolean,\r\n  ): void {\r\n    const l = this.log.fnIf('updateItemAttributeValue', { entityGuid, attributeKey, newValue, language, isReadOnly });\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    if (!oldItem) return;\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: new FieldWriter().updateAttributeValue(\r\n          oldItem.Entity.Attributes, attributeKey, newValue, language, isReadOnly,\r\n        ),\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n  }\r\n\r\n  setDefaultValue(\r\n    item: EavItem,\r\n    ctAttribute: EavContentTypeAttribute,\r\n    inputType: InputTypeMetadata,\r\n    settings: FieldSettings,\r\n    languages: Language[],\r\n    defaultLanguage: string,\r\n  ): FieldValue {\r\n    const l = this.log.fnIf('setDefaultValue', { item, ctAttribute, inputType, settings, languages, defaultLanguage }, `Name: ${ctAttribute.Name}`);\r\n    const defaultValue = new FieldDefaults(ctAttribute.Name, inputType?.Type, settings, item.Header).getDefaultOrPrefillValue();\r\n\r\n    // const defaultLanguageValue = LocalizationHelpers.getBestValue(\r\n    //   item.Entity.Attributes[ctAttribute.Name],\r\n    //   defaultLanguage,\r\n    //   // defaultLanguage,\r\n    //   BestValueModes.Strict,\r\n    // );\r\n    const defaultLanguageValue = new FieldReader(item.Entity.Attributes[ctAttribute.Name], defaultLanguage).currentOrDefault?.value;\r\n\r\n    // 2023-08-31 2dm simplified; leave comments in till EOY in case I broke something\r\n    const languageCode = (languages.length === 0 || inputType?.DisableI18n) ? '*' : defaultLanguage;\r\n    if (defaultLanguageValue === undefined) {\r\n      this.addItemAttributeValue(item.Entity.Guid, ctAttribute.Name, defaultValue, languageCode, false, ctAttribute.Type);\r\n    } else {\r\n      // most likely used only for entity fields because we can never know if they were cleaned out or brand new\r\n      this.updateItemAttributeValue(item.Entity.Guid, ctAttribute.Name, defaultValue, { current: languageCode, primary: defaultLanguage }, false);\r\n    }\r\n\r\n    // return what was used, so it can be checked on form-init\r\n    return l.r(defaultValue);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Item Attribute - Multi Value\r\n\r\n  updateItemAttributesValues(entityGuid: string, newValues: ItemValuesOfLanguage, language: FormLanguage): void {\r\n    const l = this.log.fnIf('updateItemAttributesValues', { entityGuid, newValues, language });\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    if (!oldItem) return l.end('Item not found');\r\n\r\n    const reader = new EntityReader(language);\r\n    const oldValues: ItemValuesOfLanguage = {};\r\n    const relevantValues = Object.entries(oldItem.Entity.Attributes)\r\n      .filter(([name]) => newValues.hasOwnProperty(name));\r\n    for (const [name, values] of relevantValues)\r\n      oldValues[name] = reader.getBestValue(values);\r\n\r\n    const changes = FieldValueHelpers.getItemValuesChanges(oldValues, newValues);\r\n    if (changes == null)\r\n      return l.end('No changes');\r\n\r\n    const newAttributes = new FieldWriter().updateAttributesValues(oldItem.Entity.Attributes, changes, language);\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: newAttributes,\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Item Value Dimensions\r\n\r\n  /**\r\n   * Update entity attribute dimension. Add readonly languageKey to existing useFromLanguageKey.\r\n   * Example to useFrom en-us add fr-fr = \"en-us,-fr-fr\"\r\n   */\r\n  addItemAttributeDimension(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    currentLanguage: string,\r\n    shareWithLanguage: string,\r\n    defaultLanguage: string,\r\n    isReadOnly: boolean,\r\n    transactionItem?: EavItem,\r\n  ): void {\r\n    const l = this.log.fnIf('addItemAttributeDimension', { entityGuid, attributeKey, currentLanguage, shareWithLanguage, defaultLanguage, isReadOnly, transactionItem });\r\n    const oldItem = transactionItem ?? this.itemSvc.get(entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: new FieldWriter().addAttributeDimension(\r\n          oldItem.Entity.Attributes, attributeKey, currentLanguage, shareWithLanguage, defaultLanguage, isReadOnly,\r\n        ),\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n  }\r\n\r\n  // TODO:: Old Code, remove after testing ist done\r\n  removeItemAttributeDimension(\r\n    entityGuid: string,\r\n    fieldName: string,\r\n    current: string,\r\n    delayUpsert = false,\r\n    transactionItem?: EavItem,\r\n  ): EavItem {\r\n    const l = this.log.fnIf('removeItemAttributeDimension', { entityGuid, attributeKey: fieldName, currentLanguage: current, isTransaction: delayUpsert, transactionItem });\r\n    const oldItem = transactionItem ?? this.itemSvc.get(entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: new FieldWriter().removeAttributeDimension(oldItem.Entity.Attributes, fieldName, current),\r\n      }\r\n    };\r\n\r\n    if (!delayUpsert)\r\n      this.itemSvc.add(newItem);\r\n    return l.r(newItem);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Metadata\r\n\r\n  updateItemMetadata(entityGuid: string, metadata: EavEntity[]): void {\r\n    const l = this.log.fnIf('updateItemMetadata', { entityGuid, metadata });\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Metadata: metadata,\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n    l.end('ok', { newItem });\r\n  }\r\n\r\n  //#endregion\r\n\r\n}","import { Injectable, Signal } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemIdentifierHeader } from '../../shared/models/edit-form.model';\r\nimport { mapUntilChanged, mapUntilObjChanged } from '../../shared/rxJs/mapUntilChanged';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { EavEntity, EavFor, EavItem } from '../shared/models/eav';\r\nimport { EavEntityAttributes } from '../shared/models/eav/eav-entity-attributes';\r\nimport { EavEntityBundleDto } from '../shared/models/json-format-v1';\r\nimport { SignalStoreObservableBase } from '../shared/store/signal-store-observable-base';\r\nimport { ItemUpdateHelper } from './item-updater.helper';\r\n\r\n/**\r\n * This class provides access to the items / entities cache which are being edited in the UI.\r\n * \r\n * It's undergoing a lot of refactoring to get rid of observables, so ATM it's a bit confusing.\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class ItemService extends SignalStoreObservableBase<string, EavItem> {\r\n\r\n  constructor() {\r\n    super(classLog({ItemService}));\r\n  }\r\n\r\n  override getId = (item: EavItem) => item.Entity.Guid;\r\n\r\n  public updater = new ItemUpdateHelper(this);\r\n\r\n  //#region Loaders and Updaters\r\n\r\n  loadItems(dtoItems: EavEntityBundleDto[]): void {\r\n    const items = dtoItems.map(item => EavItem.anyToEav(item));\r\n    this.addMany(items);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Item Attributes\r\n\r\n  itemAttributesSignal(entityGuid: string): Signal<EavEntityAttributes> {\r\n    const l = this.log.fn('itemAttributes', { entityGuid });\r\n    const result = this.#itemAttributesCache.getOrCreate(entityGuid, () => this.getSignal(entityGuid)()?.Entity.Attributes);\r\n    return l.r(result);\r\n  }\r\n  #itemAttributesCache = new ComputedCacheHelper<string, EavEntityAttributes>('itemAttributes');\r\n\r\n  getItemAttributes(entityGuid: string): EavEntityAttributes {\r\n    const l = this.log.fn('getItemAttributes', { entityGuid });\r\n    const result = this.get(entityGuid)?.Entity.Attributes;\r\n    return l.r(result);\r\n  }\r\n\r\n  getItemAttributes$(entityGuid: string): Observable<EavEntityAttributes> {\r\n    return this.list$.pipe(\r\n      map(items => items.find(item => item.Entity.Guid === entityGuid)?.Entity.Attributes),\r\n      mapUntilChanged(m => m),\r\n    );\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Item Headers\r\n\r\n  getItemHeader(entityGuid: string): ItemIdentifierHeader {\r\n    return this.get(entityGuid)?.Header;\r\n  };\r\n\r\n  getItemHeader$(entityGuid: string): Observable<ItemIdentifierHeader> {\r\n    return this.list$.pipe(\r\n      map(items => items.find(item => item.Entity.Guid === entityGuid)?.Header),\r\n      mapUntilObjChanged(m => m),\r\n    );\r\n  }\r\n\r\n  getItemHeaderSignal(entityGuid: string): Signal<ItemIdentifierHeader> {\r\n    return this.#itemHeaderCache.getOrCreate(entityGuid, () => this.getSignal(entityGuid)()?.Header);\r\n  }\r\n  #itemHeaderCache = new ComputedCacheHelper<string, ItemIdentifierHeader>('itemHeader');\r\n\r\n  //#endregion\r\n\r\n  //#region Item Header Properties\r\n\r\n  slotIsEmpty(entityGuid: string): Signal<boolean> {\r\n    return this.#slotIsEmptyCache.getOrCreate(entityGuid, () => {\r\n      const header = this.getSignal(entityGuid)()?.Header;\r\n      return header == null ? true : header.IsEmptyAllowed && header.IsEmpty;\r\n    });\r\n  }\r\n  #slotIsEmptyCache = new ComputedCacheHelper<string, boolean>('slotIsEmpty');\r\n\r\n  //#endregion\r\n\r\n  //#region Item Metadata & For (Metadata Target)\r\n\r\n  /** Sync get-item-for info to show metadata-target info on an entity in the UI */\r\n  getItemFor(entityGuid: string): EavFor {\r\n    return this.get(entityGuid)?.Entity.For;\r\n  }\r\n\r\n\r\n  getItemNote(entityGuid: string): EavEntity | undefined {\r\n    return this.get(entityGuid)?.Entity.Metadata\r\n      ?.find(metadata => metadata.Type.Name === eavConstants.contentTypes.notes);\r\n  }\r\n\r\n  //#endregion\r\n\r\n}\r\n","/* @license\nPapa Parse\nv5.5.3\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n((e,t)=>{\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof module&&\"undefined\"!=typeof exports?module.exports=t():e.Papa=t()})(this,function r(){var n=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==n?n:{};var d,s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},h=0,v={};function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(t,e){var i=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<i){let e=this._config.newline;e||(r=this._config.quoteChar||'\"',e=this._handle.guessLineEndings(t,r)),t=[...t.split(e).slice(i)].join(e)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&void 0!==(r=this._config.beforeFirstChunk(t))&&(t=r),this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+t,r=(this._partialLine=\"\",this._handle.parse(i,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){t=r.meta.cursor,i=(this._finished||(this._partialLine=i.substring(t-this._baseIndex),this._baseIndex=t),r&&r.data&&(this._rowCount+=r.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview);if(a)n.postMessage({results:r,workerId:v.WORKER_ID,finished:i});else if(U(this._config.chunk)&&!e){if(this._config.chunk(r,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=r=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),this._completed||!i||!U(this._config.complete)||r&&r.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),i||r&&r.meta.paused||this._nextChunk(),r}this._halted=!0},this._sendError=function(e){U(this._config.error)?this._config.error(e):a&&this._config.error&&n.postMessage({workerId:v.WORKER_ID,error:e,finished:!1})}}function f(e){var r;(e=e||{}).chunkSize||(e.chunkSize=v.RemoteChunkSize),u.call(this,e),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),s||(r.onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)),r.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!s),this._config.downloadRequestHeaders){var e,t=this._config.downloadRequestHeaders;for(e in t)r.setRequestHeader(e,t[e])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,r.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+i));try{r.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}s&&0===r.status&&this._chunkError()}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize||r.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader(\"Content-Range\"))?parseInt(e.substring(e.lastIndexOf(\"/\")+1)):-1)(r),this.parseChunk(r.responseText)))},this._chunkError=function(e){e=r.statusText||e;this._sendError(new Error(e))}}function l(e){(e=e||{}).chunkSize||(e.chunkSize=v.LocalChunkSize),u.call(this,e);var i,r,n=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((i=new FileReader).onload=y(this._chunkLoaded,this),i.onerror=y(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,t=(this._config.chunkSize&&(t=Math.min(this._start+this._config.chunkSize,this._input.size),e=r.call(e,this._start,t)),i.readAsText(e,this._config.encoding));n||this._chunkLoaded({target:{result:t}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(i.error)}}function c(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){var e,t;if(!this._finished)return e=this._config.chunkSize,i=e?(t=i.substring(0,e),i.substring(e)):(t=i,\"\"),this._finished=!i,this.parseChunk(t)}}function p(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=y(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=y(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=y(function(){this._streamCleanUp(),r=!0,this._streamData(\"\")},this),this._streamCleanUp=y(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError)},this)}function i(m){var n,s,a,t,o=Math.pow(2,53),h=-o,u=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)([eE][-+]?\\d+)?\\s*$/,d=/^((\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z)))$/,i=this,r=0,f=0,l=!1,e=!1,c=[],p={data:[],errors:[],meta:{}};function y(e){return\"greedy\"===m.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){if(p&&a&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+v.DefaultDelimiter+\"'\"),a=!1),m.skipEmptyLines&&(p.data=p.data.filter(function(e){return!y(e)})),_()){if(p)if(Array.isArray(p.data[0])){for(var e=0;_()&&e<p.data.length;e++)p.data[e].forEach(t);p.data.splice(0,1)}else p.data.forEach(t);function t(e,t){U(m.transformHeader)&&(e=m.transformHeader(e,t)),c.push(e)}}function i(e,t){for(var i=m.header?{}:[],r=0;r<e.length;r++){var n=r,s=e[r],s=((e,t)=>(e=>(m.dynamicTypingFunction&&void 0===m.dynamicTyping[e]&&(m.dynamicTyping[e]=m.dynamicTypingFunction(e)),!0===(m.dynamicTyping[e]||m.dynamicTyping)))(e)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&((e=>{if(u.test(e)){e=parseFloat(e);if(h<e&&e<o)return 1}})(t)?parseFloat(t):d.test(t)?new Date(t):\"\"===t?null:t):t)(n=m.header?r>=c.length?\"__parsed_extra\":c[r]:n,s=m.transform?m.transform(s,n):s);\"__parsed_extra\"===n?(i[n]=i[n]||[],i[n].push(s)):i[n]=s}return m.header&&(r>c.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+c.length+\" fields but parsed \"+r,f+t):r<c.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+c.length+\" fields but parsed \"+r,f+t)),i}var r;p&&(m.header||m.dynamicTyping||m.transform)&&(r=1,!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(i),r=p.data.length):p.data=i(p.data,0),m.header&&p.meta&&(p.meta.fields=c),f+=r)}function _(){return m.header&&0===c.length}function k(e,t,i,r){e={type:e,code:t,message:i};void 0!==r&&(e.row=r),p.errors.push(e)}U(m.step)&&(t=m.step,m.step=function(e){p=e,_()?g():(g(),0!==p.data.length&&(r+=e.data.length,m.preview&&r>m.preview?s.abort():(p.data=p.data[0],t(p,i))))}),this.parse=function(e,t,i){var r=m.quoteChar||'\"',r=(m.newline||(m.newline=this.guessLineEndings(e,r)),a=!1,m.delimiter?U(m.delimiter)&&(m.delimiter=m.delimiter(e),p.meta.delimiter=m.delimiter):((r=((e,t,i,r,n)=>{var s,a,o,h;n=n||[\",\",\"\\t\",\"|\",\";\",v.RECORD_SEP,v.UNIT_SEP];for(var u=0;u<n.length;u++){for(var d,f=n[u],l=0,c=0,p=0,g=(o=void 0,new E({comments:r,delimiter:f,newline:t,preview:10}).parse(e)),_=0;_<g.data.length;_++)i&&y(g.data[_])?p++:(d=g.data[_].length,c+=d,void 0===o?o=d:0<d&&(l+=Math.abs(d-o),o=d));0<g.data.length&&(c/=g.data.length-p),(void 0===a||l<=a)&&(void 0===h||h<c)&&1.99<c&&(a=l,s=f,h=c)}return{successful:!!(m.delimiter=s),bestDelimiter:s}})(e,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess)).successful?m.delimiter=r.bestDelimiter:(a=!0,m.delimiter=v.DefaultDelimiter),p.meta.delimiter=m.delimiter),b(m));return m.preview&&m.header&&r.preview++,n=e,s=new E(r),p=s.parse(n,t,i),g(),l?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,s.abort(),n=U(m.chunk)?\"\":n.substring(s.getCharIndex())},this.resume=function(){i.streamer._halted?(l=!1,i.streamer.parseChunk(n,!0)):setTimeout(i.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,s.abort(),p.meta.aborted=!0,U(m.complete)&&m.complete(p),n=\"\"},this.guessLineEndings=function(e,t){e=e.substring(0,1048576);var t=new RegExp(P(t)+\"([^]*?)\"+P(t),\"gm\"),i=(e=e.replace(t,\"\")).split(\"\\r\"),t=e.split(\"\\n\"),e=1<t.length&&t[0].length<i[0].length;if(1===i.length||e)return\"\\n\";for(var r=0,n=0;n<i.length;n++)\"\\n\"===i[n][0]&&r++;return r>=i.length/2?\"\\r\\n\":\"\\r\"}}function P(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function E(C){var S=(C=C||{}).delimiter,O=C.newline,x=C.comments,I=C.step,A=C.preview,T=C.fastMode,D=null,L=!1,F=null==C.quoteChar?'\"':C.quoteChar,j=F;if(void 0!==C.escapeChar&&(j=C.escapeChar),(\"string\"!=typeof S||-1<v.BAD_DELIMITERS.indexOf(S))&&(S=\",\"),x===S)throw new Error(\"Comment character same as delimiter\");!0===x?x=\"#\":(\"string\"!=typeof x||-1<v.BAD_DELIMITERS.indexOf(x))&&(x=!1),\"\\n\"!==O&&\"\\r\"!==O&&\"\\r\\n\"!==O&&(O=\"\\n\");var z=0,M=!1;this.parse=function(i,t,r){if(\"string\"!=typeof i)throw new Error(\"Input must be a string\");var n=i.length,e=S.length,s=O.length,a=x.length,o=U(I),h=[],u=[],d=[],f=z=0;if(!i)return w();if(T||!1!==T&&-1===i.indexOf(F)){for(var l=i.split(O),c=0;c<l.length;c++){if(d=l[c],z+=d.length,c!==l.length-1)z+=O.length;else if(r)return w();if(!x||d.substring(0,a)!==x){if(o){if(h=[],k(d.split(S)),R(),M)return w()}else k(d.split(S));if(A&&A<=c)return h=h.slice(0,A),w(!0)}}return w()}for(var p=i.indexOf(S,z),g=i.indexOf(O,z),_=new RegExp(P(j)+P(F),\"g\"),m=i.indexOf(F,z);;)if(i[z]===F)for(m=z,z++;;){if(-1===(m=i.indexOf(F,m+1)))return r||u.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:h.length,index:z}),E();if(m===n-1)return E(i.substring(z,m).replace(_,F));if(F===j&&i[m+1]===j)m++;else if(F===j||0===m||i[m-1]!==j){-1!==p&&p<m+1&&(p=i.indexOf(S,m+1));var y=v(-1===(g=-1!==g&&g<m+1?i.indexOf(O,m+1):g)?p:Math.min(p,g));if(i.substr(m+1+y,e)===S){d.push(i.substring(z,m).replace(_,F)),i[z=m+1+y+e]!==F&&(m=i.indexOf(F,z)),p=i.indexOf(S,z),g=i.indexOf(O,z);break}y=v(g);if(i.substring(m+1+y,m+1+y+s)===O){if(d.push(i.substring(z,m).replace(_,F)),b(m+1+y+s),p=i.indexOf(S,z),m=i.indexOf(F,z),o&&(R(),M))return w();if(A&&h.length>=A)return w(!0);break}u.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:h.length,index:z}),m++}}else if(x&&0===d.length&&i.substring(z,z+a)===x){if(-1===g)return w();z=g+s,g=i.indexOf(O,z),p=i.indexOf(S,z)}else if(-1!==p&&(p<g||-1===g))d.push(i.substring(z,p)),z=p+e,p=i.indexOf(S,z);else{if(-1===g)break;if(d.push(i.substring(z,g)),b(g+s),o&&(R(),M))return w();if(A&&h.length>=A)return w(!0)}return E();function k(e){h.push(e),f=z}function v(e){var t=0;return t=-1!==e&&(e=i.substring(m+1,e))&&\"\"===e.trim()?e.length:t}function E(e){return r||(void 0===e&&(e=i.substring(z)),d.push(e),z=n,k(d),o&&R()),w()}function b(e){z=e,k(d),d=[],g=i.indexOf(O,z)}function w(e){if(C.header&&!t&&h.length&&!L){var s=h[0],a=Object.create(null),o=new Set(s);let n=!1;for(let r=0;r<s.length;r++){let i=s[r];if(a[i=U(C.transformHeader)?C.transformHeader(i,r):i]){let e,t=a[i];for(;e=i+\"_\"+t,t++,o.has(e););o.add(e),s[r]=e,a[i]++,n=!0,(D=null===D?{}:D)[e]=i}else a[i]=1,s[r]=i;o.add(i)}n&&console.warn(\"Duplicate headers found and renamed.\"),L=!0}return{data:h,errors:u,meta:{delimiter:S,linebreak:O,aborted:M,truncated:!!e,cursor:f+(t||0),renamedHeaders:D}}}function R(){I(w()),h=[],u=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return z}}function g(e){var t=e.data,i=o[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,_(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(U(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results}else U(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!r&&_(t.workerId,t.results)}function _(e,t){var i=o[e];U(i.userComplete)&&i.userComplete(t),i.terminate(),delete o[e]}function m(){throw new Error(\"Not implemented.\")}function b(e){if(\"object\"!=typeof e||null===e)return e;var t,i=Array.isArray(e)?[]:{};for(t in e)i[t]=b(e[t]);return i}function y(e,t){return function(){e.apply(t,arguments)}}function U(e){return\"function\"==typeof e}return v.parse=function(e,t){var i=(t=t||{}).dynamicTyping||!1;U(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!U(t.transform)&&t.transform,!t.worker||!v.WORKERS_SUPPORTED)return i=null,v.NODE_STREAM_INPUT,\"string\"==typeof e?(e=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(e),i=new(t.download?f:c)(t)):!0===e.readable&&U(e.read)&&U(e.on)?i=new p(t):(n.File&&e instanceof File||e instanceof Object)&&(i=new l(t)),i.stream(e);(i=(()=>{var e;return!!v.WORKERS_SUPPORTED&&(e=(()=>{var e=n.URL||n.webkitURL||null,t=r.toString();return v.BLOB_URL||(v.BLOB_URL=e.createObjectURL(new Blob([\"var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; \",\"(\",t,\")();\"],{type:\"text/javascript\"})))})(),(e=new n.Worker(e)).onmessage=g,e.id=h++,o[e.id]=e)})()).userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=U(t.step),t.chunk=U(t.chunk),t.complete=U(t.complete),t.error=U(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id})},v.unparse=function(e,t){var n=!1,_=!0,m=\",\",y=\"\\r\\n\",s='\"',a=s+s,i=!1,r=null,o=!1,h=((()=>{if(\"object\"==typeof t){if(\"string\"!=typeof t.delimiter||v.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(m=t.delimiter),\"boolean\"!=typeof t.quotes&&\"function\"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines),\"string\"==typeof t.newline&&(y=t.newline),\"string\"==typeof t.quoteChar&&(s=t.quoteChar),\"boolean\"==typeof t.header&&(_=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");r=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s),t.escapeFormulae instanceof RegExp?o=t.escapeFormulae:\"boolean\"==typeof t.escapeFormulae&&t.escapeFormulae&&(o=/^[=+\\-@\\t\\r].*$/)}})(),new RegExp(P(s),\"g\"));\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return u(null,e,i);if(\"object\"==typeof e[0])return u(r||Object.keys(e[0]),e,i)}else if(\"object\"==typeof e)return\"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||r),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:\"object\"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),u(e.fields||[],e.data||[],i);throw new Error(\"Unable to serialize unrecognized input\");function u(e,t,i){var r=\"\",n=(\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(r+=m),r+=k(e[a],a);0<t.length&&(r+=y)}for(var o=0;o<t.length;o++){var h=(n?e:t[o]).length,u=!1,d=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u=\"greedy\"===i?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===i&&n){for(var f=[],l=0;l<h;l++){var c=s?e[l]:l;f.push(t[o][c])}u=\"\"===f.join(\"\").trim()}if(!u){for(var p=0;p<h;p++){0<p&&!d&&(r+=m);var g=n&&s?e[p]:p;r+=k(t[o][g],p)}o<t.length-1&&(!i||0<h&&!d)&&(r+=y)}}return r}function k(e,t){var i,r;return null==e?\"\":e.constructor===Date?JSON.stringify(e).slice(1,25):(r=!1,o&&\"string\"==typeof e&&o.test(e)&&(e=\"'\"+e,r=!0),i=e.toString().replace(h,a),(r=r||!0===n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1})(i,v.BAD_DELIMITERS)||-1<i.indexOf(m)||\" \"===i.charAt(0)||\" \"===i.charAt(i.length-1))?s+i+s:i)}},v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK=\"\\ufeff\",v.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!s&&!!n.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=\",\",v.Parser=E,v.ParserHandle=i,v.NetworkStreamer=f,v.FileStreamer=l,v.StringStreamer=c,v.ReadableStreamStreamer=p,n.jQuery&&((d=n.jQuery).fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&n.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)})}),e(),this;function e(){if(0===h.length)U(o.complete)&&o.complete();else{var e,t,i,r,n=h[0];if(U(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,i=n.inputElem,r=s.reason,void(U(o.error)&&o.error({name:e},t,i,r));if(\"skip\"===s.action)return void u();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if(\"skip\"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){U(a)&&a(e,n.file,n.inputElem),u()},v.parse(n.file,n.instanceConfig)}}function u(){h.splice(0,1),e()}}),a&&(n.onmessage=function(e){e=e.data;void 0===v.WORKER_ID&&e&&(v.WORKER_ID=e.workerId);\"string\"==typeof e.input?n.postMessage({workerId:v.WORKER_ID,results:v.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=v.parse(e.input,e.config))&&n.postMessage({workerId:v.WORKER_ID,results:e,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(c.prototype)).constructor=c,(p.prototype=Object.create(u.prototype)).constructor=p,v});","@if (show()) {\r\n  <mat-icon tippyTranslate=\"Features.NotActivated\" [tippyData]=\"{ name: featureNameId() }\">diamond</mat-icon>\r\n}","import { Component } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { FeatureComponentBase } from '../shared/feature-component-base';\r\n\r\n@Component({\r\n  selector: 'app-feature-icon-indicator',\r\n  templateUrl: './feature-icon-indicator.html',\r\n  imports: [\r\n    MatIconModule,\r\n    TippyDirective,\r\n  ]\r\n})\r\nexport class FeatureIconIndicatorComponent extends FeatureComponentBase { }\r\n","import { Of } from '../../../../../../core/type-utilities';\r\nimport { DebugTypes } from './edit-dialog-footer.models';\r\n\r\n/**\r\n * User preferences how the footer should be displayed.\r\n */\r\nexport const footerPreferences = {\r\n  key: 'edit-dialog-footer',\r\n  data: {\r\n    /** Which tab is expanded (or none) */\r\n    tab: null as Of<typeof DebugTypes>,\r\n    /**  */\r\n    expanded: false,\r\n    /** Expansion size, as it can be larger (2) */\r\n    size: 0,\r\n    /** If the footer is pinned, e.g. visible on load. If null, will be prefilled with user-host-status */\r\n    pinned: null as boolean,\r\n  }\r\n};\r\n","import { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { classLog, ClassLogger } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { FieldSettingsHelpersManager } from './field-settings-helpers-manager';\r\nimport { FieldSettingsTools } from './field-settings-tools';\r\nimport { FieldSettingsUpdateTask } from './field-settings-update-task';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: true,\r\n  update: true,\r\n  fields: [...DebugFields, 'Icon'],\r\n}\r\n\r\nexport abstract class FieldSettingsHelperBase {\r\n\r\n  /** Logger - lazy created on first access if not yet created */\r\n  get log() { return this.#log ??= classLog({FieldSettingsHelperBase}, logSpecs).extendName(`[${this.name}]`) };\r\n  \r\n  #log: ClassLogger<typeof logSpecs>;\r\n\r\n  constructor(inheritingClassForLogging: Record<string, unknown> | string, logThis?: boolean) {\r\n    this.#log = classLog(inheritingClassForLogging ?? {FieldSettingsHelperBase}, logSpecs, null, logThis);\r\n    this.name ??= this.#log.name;\r\n    this.log.fnIf('constructor');\r\n  }\r\n\r\n  /** Input type name */\r\n  name: string;\r\n\r\n  /** If this field supports AutoTranslate (new v15.x) */\r\n  public canAutoTranslate = false;\r\n\r\n  /** Quick shorthand to Register a Logic to FieldLogicManager */\r\n  static add(logic: LogicFactory) {\r\n    const logicInstance = new logic();\r\n    FieldSettingsHelpersManager.singleton().add(logicInstance);\r\n  }\r\n\r\n  /** Run this dummy method from component to make sure Logic files are not tree shaken */\r\n  static importMe(): void { }\r\n\r\n  /**\r\n   * We need to know if a value is empty, to decide if we should initialize it with a default value.\r\n   * \r\n   * Special case: Entity fields for empty items are prefilled on the backend with []\r\n   * so I can never know if entity field is brand new, or just emptied out by the user\r\n   * \r\n   * Note: 2dm 2023-08-31 moved from InputFieldHelpers; in future, each logic can override this\r\n   */\r\n  isValueEmpty(fieldType: string, value: FieldValue, isCreateMode: boolean): boolean {\r\n    const l = this.log.fn('isValueEmpty', { fieldType, value, isCreateMode });\r\n\r\n    // If value is undefined, it's definitely empty\r\n    // Note: 2026-01-08 2dm: Not sure why we only check for undefined, but this is the original logic, so we won't change it now.\r\n    // My guess is that entities which are being edited will return null for many empty fields, so we don't want to treat null started-empty here.\r\n    if (value === undefined)\r\n      return l.r(true, 'value is undefined');\r\n    \r\n    // 2026-01-08 2dm added this special case for entity-fields which load data from a json, and they are null, not undefined\r\n    if (fieldType === 'entity' && value === null)\r\n      return l.r(true, 'entity field is null');\r\n\r\n    const emptyEntityField = Array.isArray(value) && value.length === 0 && isCreateMode;\r\n\r\n    return l.r(emptyEntityField);\r\n  }\r\n\r\n  /** \r\n   * Update field settings - typically used on init and in every formula cycle\r\n   */\r\n  abstract update(updateSpecs: FieldSettingsUpdateTask): FieldSettings;\r\n\r\n  /**\r\n   * Lookup advanced (external) configuration.\r\n   * These are usually stored in the eavConfig.settings.\r\n   * Needs defaults to merge for anything that is not defined in the external config.\r\n   * As of 2026-01 only used in WYSIWYG.\r\n   * @param possibleGuid - guid of the external config, if empty, return defaults\r\n   * @param defaults - defaults to merge with external config\r\n   */\r\n  findAndMergeAdvanced<T>(tools: FieldSettingsTools, possibleGuid: string, defaults: T): T {\r\n    if (!possibleGuid)\r\n      return defaults;\r\n\r\n    // Check if there were any settings provided for this guid\r\n    // For example, WYSIWYG has advanced settings which should be merged in.\r\n    const additionalConfig = tools.eavConfig.settings.Entities.find(e => e.Guid === possibleGuid);\r\n    if (!additionalConfig)\r\n      return defaults;\r\n\r\n    const advanced = tools.reader.flatten(additionalConfig) as T;\r\n    return { ...defaults, ...advanced };\r\n  }\r\n}\r\n\r\ntype LogicFactory = new (...args: any[]) => FieldSettingsHelperBase;","import { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { FieldSettingsHelperBase } from './field-settings-helper-base';\r\nimport { FieldSettingsUpdateTask } from './field-settings-update-task';\r\n\r\nexport class FieldSettingsHelperUnknown extends FieldSettingsHelperBase {\r\n  name = InputTypeCatalog.Unknown;\r\n  \r\n  constructor() { super({FieldSettingsHelperUnknown}); }\r\n\r\n  canAutoTranslate = false;\r\n\r\n  update({ settings }: FieldSettingsUpdateTask): FieldSettings {\r\n    return settings;\r\n  }\r\n}\r\n\r\n// Don't register here, the manager will register it as a fallback\r\n// FieldLogicBase.add(UnknownLogic);\r\n\r\n","import { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldSettingsHelperBase } from './field-settings-helper-base';\r\nimport { FieldSettingsHelperUnknown } from './field-settings-helper-unknown';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  get: false,\r\n  getExact: false,\r\n}\r\n\r\n/** Keep the singleton FieldLogicManager on the Window object - probably not the best way to do this? */\r\ndeclare global {\r\n  interface Window {\r\n    eavFieldSettingsHelpersManagerSingleton: FieldSettingsHelpersManager;\r\n  }\r\n}\r\n\r\n/**\r\n * Manages all Field Settings Helpers.\r\n * \r\n * Use this to get a specific field-settings helper for each input type.\r\n */\r\nexport class FieldSettingsHelpersManager {\r\n  log = classLog({ FieldSettingsHelpersManager}, logSpecs);\r\n\r\n  // Private constructor to enforce singleton pattern\r\n  private constructor() {\r\n    // add unknown as a fallback for all scenarios\r\n    this.add(new FieldSettingsHelperUnknown());\r\n  }\r\n\r\n  static singleton(): FieldSettingsHelpersManager {\r\n    // Keep the singleton FieldLogicManager on the Window object - probably not the best way to do this?\r\n    return window.eavFieldSettingsHelpersManagerSingleton ??= new FieldSettingsHelpersManager();\r\n  }\r\n\r\n  #helpers: Record<string, FieldSettingsHelperBase> = {};\r\n\r\n  /** Add settings logic */\r\n  add(logic: FieldSettingsHelperBase): void {\r\n    this.#helpers[logic.name] = logic;\r\n  }\r\n\r\n  /**\r\n   * Get settings logic for input type\r\n   * Note: 2026-01-08 changed to always return unknown if not found, to prevent any scenario where there is none.\r\n   * Previously this was a separate getOrUnknown method marked as temporary v16.04\r\n   */\r\n  get(inputTypeName: string): FieldSettingsHelperBase {\r\n    const l = this.log.fnIf('get', { inputTypeName });\r\n    const helper = this.getExact(inputTypeName);\r\n    return helper\r\n      ? l.r(helper, `found logic for ${inputTypeName}`)\r\n      : l.r(this.getExact(InputTypeCatalog.Unknown), `using unknown logic for ${inputTypeName}`);\r\n  }\r\n  \r\n  /** Get settings logic for input type */\r\n  getExact(inputTypeName: string): FieldSettingsHelperBase {\r\n    const l = this.log.fnIf('getExact', { inputTypeName });\r\n    const r = this.#helpers[inputTypeName] ?? null;\r\n    return l.r(r, `found logic: ${r != null}`);\r\n  }\r\n\r\n}\r\n"],"x_google_ignoreList":[7,69,92,107,126,127,135,150,151,227,303,338,343]}