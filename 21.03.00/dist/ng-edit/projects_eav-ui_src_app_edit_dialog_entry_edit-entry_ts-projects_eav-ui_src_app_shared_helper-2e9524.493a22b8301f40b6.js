(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_edit_dialog_entry_edit-entry_ts-projects_eav-ui_src_app_shared_helper-2e9524"],{1726(ht,Xe,g){"use strict";g.d(Xe,{O:()=>q});const q={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},3140(ht,Xe,g){"use strict";g.d(Xe,{J:()=>v});var q=g(27092),le=g(36124);let v=(()=>{class f{constructor(){this.subscriptions=new q.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(h){return new(h||f)}}static{this.\u0275dir=le.FsC({type:f})}}return f})()},3346(ht,Xe,g){"use strict";g.d(Xe,{h:()=>v});var q=g(45129);class le{static dtoToEav(l,r){return{Values:q.U.dtoToEav(l),Type:r}}}class v{static dtoToEav(l){const r={};for(const[h,u]of Object.entries(l))for(const[d,m]of Object.entries(u))r[d]=le.dtoToEav(m,h);return r}static mergeSettings(l){if(null==l)return{};const r={};for(const h of l)if("@All"!==h.Type.Id)for(const[u,d]of Object.entries(h.Attributes)){const m={...d};r[u]=m}for(const h of l)if("@All"===h.Type.Id)for(const[u,d]of Object.entries(h.Attributes)){if(null!=r[u]&&""===d.Values[0].value)continue;const w={...d};r[u]=w}return r}}},7167(ht,Xe,g){"use strict";g.d(Xe,{L:()=>r});var q=g(38604),le=g(38172),v=g(58798),f=g(56884);let r=(()=>{class h{constructor(){}#e=new v.Yz("user-language");#t(d,m){const b=this.#n()?.[d==q.a.UI?"languageUi":"languageForm"];return b?.endsWith("!")?{language:b.slice(0,-1),force:!0}:{language:this.stored(d)??b??m,force:!1}}value(d){return this.#t(d).language}stored(d){return this.#e.get(d)||null}save(d,m){this.#e.add(d,m||null)}uiCode(d){return this.#t(q.a.UI,d)?.language?.toLocaleLowerCase().split("-")[0]}primaryTranslatableEnabled(){const d=this.stored(q.a.PrimaryTranslatable);return null!=d&&("string"==typeof d?"true"===d.toLowerCase():!!d)}savePrimaryTranslatable(d){this.save(q.a.PrimaryTranslatable,d?"true":"false")}isForced(d){return this.#t(d)?.force}userConfigurable(){const d=this.#n()?.languageUserSettings;return!1!==d&&"false"!==d}#n(){if(this.#i)return this.#i;const d=sessionStorage.getItem(le.p2);return d?this.#i=JSON.parse(d):null}#i;static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275prov=f.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},9234(ht,Xe,g){"use strict";g.d(Xe,{Gg:()=>S,Tr:()=>F,gb:()=>w});var q=g(51567),le=g(70271),v=g(86301),f=g(36647),l=g(12938),r=g(34435),h=g(24467),u=g(54839),d=g(56884),m=g(36124);const b={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},w="admin/entity/",S="admin/entity/list";let F=(()=>{class E extends h.B{constructor(){super(...arguments),this.log=(0,r.Tq)({EntityService:E},b),this.queryService=(0,l.d)(u.c)}getEntities$(N){return this.log.fnIf("getEntities"),N.pipe((0,q.p)(ee=>null!=ee),(0,f.n)(ee=>this.getAvailableEntities(ee.contentTypeName).pipe((0,v.t)(1))))}getAvailableEntities(N,ee){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[N],itemIds:ee,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,le.T)(D=>D.Default))}delete(N,ee,M,D,I,W){return this.log.fnIf("delete",{appId:N,contentType:ee,entityId:M,force:D,parentId:I,parent}),this.http.delete(this.apiUrl(w+"delete"),{params:{contentType:ee,id:M.toString(),appId:N,force:D.toString(),...I&&{parentId:I.toString()},...I&&W&&{parentField:W}}})}static{this.\u0275fac=(()=>{let N;return function(M){return(N||(N=m.xGo(E)))(M||E)}})()}static{this.\u0275prov=d.jDH({token:E,factory:E.\u0275fac})}}return E})()},9977(ht,Xe,g){"use strict";g.d(Xe,{g:()=>f});var q=g(34435),le=g(16632),v=g(56884);let f=(()=>{class l extends le.r{constructor(){super((0,q.Tq)({LanguageService:l})),this.getId=h=>h.NameId.toLocaleLowerCase()}static{this.\u0275fac=function(u){return new(u||l)}}static{this.\u0275prov=v.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},18537(ht,Xe,g){"use strict";g.d(Xe,{R:()=>m});var q=g(82645),le=g(43942),v=g(1365),f=g(88830),l=g(81530),r=g(38067);const h=["addListener","removeListener"],u=["addEventListener","removeEventListener"],d=["on","off"];function m(E,B,N,ee){if((0,l.T)(N)&&(ee=N,N=void 0),ee)return m(E,B,N).pipe((0,r.I)(ee));const[M,D]=function F(E){return(0,l.T)(E.addEventListener)&&(0,l.T)(E.removeEventListener)}(E)?u.map(I=>W=>E[I](B,W,N)):function w(E){return(0,l.T)(E.addListener)&&(0,l.T)(E.removeListener)}(E)?h.map(b(E,B)):function S(E){return(0,l.T)(E.on)&&(0,l.T)(E.off)}(E)?d.map(b(E,B)):[];if(!M&&(0,f.X)(E))return(0,v.Z)(I=>m(I,B,N))((0,q.Tg)(E));if(!M)throw new TypeError("Invalid event target");return new le.c(I=>{const W=(...R)=>I.next(1<R.length?R:R[0]);return M(W),()=>D(W)})}function b(E,B){return N=>ee=>E[N](B,ee)}},22118(ht,Xe,g){"use strict";g.r(Xe),g.d(Xe,{EditEntryComponent:()=>Fv});var q=g(69393),le=g(12938),v=g(9001),f=g(34435),l=g(68873),r=g(56884),h=g(71477),u=g(92324),d=g(7167),w=g(9977),S=g(16632);let F=(()=>{class i extends S.r{constructor(){super((0,f.Tq)({AdamCacheService:i})),this.getId=t=>t.Guid}loadPrefetch(t){if(null==t)return;const n=Object.entries(t).map(([a,s])=>({Guid:a,Attributes:s}));this.addMany(n)}getAdamSnapshot(t,n){return this.cache()[t]?.Attributes[n]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),E=(()=>{class i extends S.r{constructor(){super((0,f.Tq)({LinkCacheService:i})),this.getId=t=>t.key.trim().toLocaleLowerCase()}addPrefetch(t,n){const a=t?Object.entries(t).map(([c,p])=>({key:c,...p})):[],s=null!=n?Object.entries(n).flatMap(([c,p])=>Object.entries(p).flatMap(([x,O])=>this.adamToLinks(O))):[];this.addMany([...a,...s])}addAdam(t){this.addMany(this.adamToLinks(t))}addLink(t,n){const a={key:t=t.trim().toLocaleLowerCase(),...n,Adam:{...n.Adam}};this.add(a)}adamToLinks(t){return t.filter(n=>!n.IsFolder).map(n=>({key:n.ReferenceId,Adam:{...n},Value:n.Url}))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var B=g(53991),N=g(36849),ee=g(26001),M=g(44813),D=g(48394),I=g(90927);function L(i){const t=i.indexOf("/adam/");return-1!==t?i.substring(0,t+6):null}var y=g(8265),C=g(70271),A=g(98764),X=g(24467),K=g(39431);const ve={all:!1,fetchFormData:!1,saveFormData:!1};let He=(()=>{class i extends X.B{constructor(t){super(),this.globalConfigService=t,this.log=(0,f.Tq)({FormDataService:i},ve)}fetchFormData(t){return this.log.fnIf("fetchFormData",{items:t,context:this.context}),this.http.post(this.apiUrl("cms/edit/load"),t,{params:{appId:this.appId}}).pipe((0,C.T)(n=>(n.Context.Language.List=n.Context.Language.List.filter(a=>a.IsEnabled),n)),(0,A.M)(n=>{this.globalConfigService.allowDebug(n.Context.Enable.DebugMode)}))}saveFormData(t,n){return this.log.fnIf("saveFormData",{result:t,partOfPage:n}),this.http.post(this.apiUrl("cms/edit/save"),t,{params:{appId:this.appId,partOfPage:n}})}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(K.B))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var je=g(32093),qe=g(98503);const Le={Show:"show",Hide:"hide",Branch:"branch"};let ye=(()=>{class i extends S.r{constructor(){super((0,f.Tq)({FormPublishingService:i})),this.getId=t=>t.formId,this.#e=new qe.K("publishMode")}setPublishMode(t,n,a){null==a.config.versioningOptions[t]&&(t=Object.keys(a.config.versioningOptions)[0]),this.add({formId:n,DraftShouldBranch:t===Le.Branch,IsPublished:t===Le.Show})}getPublishMode(t){return this.#e.getOrCreate(t,()=>this.toPublishMode(this.get(t)))}#e;toPublishMode(t){return t.DraftShouldBranch?Le.Branch:t.IsPublished?Le.Show:Le.Hide}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ae=g(95443);const J={all:!1,constructor:!1,preserve:!0,get:!0};let V=(()=>{class i{#e;constructor(t,n,a){this.formConfig=t,this.itemService=n,this.languageService=a,this.log=(0,f.Tq)({InitialValuesService:i},J),this.#e={},this.log.aIf("constructor",null,"constructor")}preserve(){this.log.fnIf("preserve");const n=this.itemService.getMany(this.formConfig.config.itemGuids),a=this.languageService.getAll().map(c=>c.NameId),s=this.formConfig.language();a.includes(s.current)||a.push(s.current),a.includes(s.primary)||a.push(s.primary);for(const c of n)for(const p of a){const x=new Ae.b(p,s.primary).currentValues(c.Entity.Attributes),O=this.#t(c.Entity.Guid,p);this.#e[O]=x}}#t(t,n){return`entityGuid:${t}:language:${n}`}get(t,n){const a=this.log.fnIf("get",{entityGuid:t,language:n}),s=this.#e[this.#t(t,n)];return a.r(s)}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(y.S),r.KVO(I.b),r.KVO(w.g))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var oe=g(51612),ge=g(36740),xe=g(98712),Re=g(47314),ce=g(13050),We=g(77706);const Ve={all:!1,constructor:!1,initMissingValues:!0,fields:[...ge.z,"releases"]};let Ie=(()=>{class i{constructor(t,n,a,s,c){this.formConfig=t,this.itemService=n,this.inputTypeService=a,this.contentTypeService=s,this.languageService=c,this.log=(0,f.Tq)({InitializeMissingValuesServices:i},Ve)}initMissingValues(){const t=this.log.fnIf("initMissingValues"),n=this.itemService.updater,a=this.formConfig.config,s=this.itemService.getMany(a.itemGuids),c=this.inputTypeService.getAll(),p=this.languageService.getAll(),x=this.formConfig.language(),O=xe.a.singleton();let G=!1;const ie=a.createMode,ae=new We.q("EditInitializerService");for(const ke of s){const Je=this.contentTypeService.getContentTypeOfItem(ke);for(const rt of Je.Attributes){const st=rt.Name,It=this.log.fnIfInFields("initMissingValues",st),jt=c.find(wn=>wn.Type===rt.InputType),Mt=oe.Q.isEmpty(jt?.Type);if(It.a(`Attribute: '${st}' InputType: '${jt?.Type}' isEmptyType: '${Mt}'`),Mt)continue;const Kt=O.get(jt?.Type),rn=ke.Entity.Attributes[rt.Name],vn=ae.getDefaultSettings(new ce.bT(x.primary,x.primary).flatten(rt.Metadata)),Cn=rt.InputType.split("-")[0];if(0===p.length){It.a(`${st} languages none, simple init`);const wn=new Re.U(rn,"*").currentOrDefaultOrAny?.value;Kt.isValueEmpty(Cn,wn,ie)&&n.setDefaultValue(ke,rt,jt,vn,p,x.primary)}else{It.a(`${st} languages many, complex init`);const wn=jt?.DisableI18n,Zn=new Re.U(rn,"*").currentOrDefault?.value;if(It.a(st,{disableI18n:wn,noLanguageValue:Zn}),!wn&&void 0!==Zn){const io=n.removeItemAttributeDimension(ke.Entity.Guid,rt.Name,"*",!0);n.addItemAttributeValue(ke.Entity.Guid,rt.Name,Zn,x.primary,!1,rt.Type,!1,io),It.a(`${st} exit`);continue}const to=new Re.U(rn,x.primary).currentOrDefault?.value,no=Kt.isValueEmpty(Cn,to,ie);It.a(st,{currentName:st,valueIsEmpty:no,defaultLanguageValue:to,isCreateMode:ie}),no&&null!=n.setDefaultValue(ke,rt,jt,vn,p,x.primary)&&!vn.IsEphemeral&&(G=!0)}}}return t.r(G)}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(y.S),r.KVO(I.b),r.KVO(ee.A),r.KVO(N.n),r.KVO(w.g))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const Te={all:!1,mergeResponse:!0};class ze{constructor(o,t){this.contentsOverride=t,this.log=(0,f.Tq)({ItemsRequestRestoreHelper:ze},Te),this.itemsWithIndex=o.map((n,a)=>({...n,clientId:a}))}itemsForRequest(){return this.itemsWithIndex.map(t=>{const{Prefill:n,ClientData:a,...s}=t;return s})}mergeResponse(o){const t=this.log.fnIf("mergeResponse",{result:o,itemsWithIndex:this.itemsWithIndex}),n=o.map(a=>{const s=this.itemsWithIndex.find(c=>c.clientId===a.Header.clientId);return t.a("fetchFormData - remix",{item:a,original:s}),{...a,Header:{...a.Header,Prefill:s?.Prefill,ClientData:{...s?.ClientData}}}});return t.r(n)}}var ue=g(90852),Se=g(3347);const Fe={all:!1,constructor:!1,fetchFormData:!1,dataFromDialog:!1,importLoadedData:!1,initMissingValues:!1};let Ee=(()=>{class i{#e;#t;#n;constructor(t,n,a,s,c,p,x,O,G,ie,ae,ke,Je,rt,st){this.route=t,this.formConfig=n,this.itemService=a,this.inputTypeService=s,this.contentTypeItemService=c,this.contentTypeService=p,this.publishStatusService=x,this.translate=O,this.languageService=G,this.languageStore=ie,this.snackBar=ae,this.adamCacheService=ke,this.linkCacheService=Je,this.featuresService=rt,this.initialValuesService=st,this.log=(0,f.Tq)({EditInitializerService:i},Fe),this.loaded=(0,r.vPA)(!1),this.#e=(0,le.d)(He),this.#t=(0,le.d)(d.L),this.#n=(0,le.d)(Ie),this.adamPortalUrl=(0,r.vPA)(null),this.log.aIf("constructor",null,"constructor")}fetchFormData(){const t=this.log.fnIf("fetchFormData"),s=(this.log.fnIf("dataFromDialog"),(0,u.K)(this.route.snapshot.params.items).items),c=new ze(s,null),p=c.itemsForRequest();t.a("fetchFormData",{requestItems:p}),this.#e.fetchFormData(JSON.stringify(p)).subscribe(x=>{const O=x?.Prefetch?.Links,G=O&&"object"==typeof O?Object.values(O):[],ie=G.length>0&&G[0]?.Value?G[0].Value:void 0;ie&&this.adamPortalUrl.set(L(ie));const ae={...x,Items:c.mergeResponse(x.Items)};t.a("fetchFormData - after remix",{response:ae}),this.featuresService.load(ae.Context,ae),(0,h.g)(ae.Context.App),this.#i(ae),this.initialValuesService.preserve(),this.#a(),this.loaded.set(!0)})}#i(t){const n=this.log.fnIf("importLoadedData"),a=Math.floor(99999*Math.random()),s=function m(i){let o=0;for(const t of i.snapshot.pathFromRoot)if(!(t.url.length<=0))for(const n of t.url)"edit"===n.path&&o++;return 1===o}(this.route);this.adamPortalUrl()&&(t.Items=function W(i,o){const t=/<img\b[^>]*?\bdata-cmsid=["'][^"']+["'][^>]*?>/gi;return i.forEach(n=>{const a=n.Entity?.Attributes?.String?.Content;"object"==typeof a&&Object.entries(a).forEach(([s,c])=>{let p=function R(i){const o=document.createElement("textarea");return o.innerHTML=i,o.value}(c);p=p.replace(t,x=>{const O=x.match(/\bsrc=["']([^"']+)["']/);if(!O)return x;const G=O[1],ie=L(G);if(ie&&ie!==o){const ae=G.replace(ie,o);return x.replace(G,ae)}return x}),n.Entity.Attributes.String.Content[s]=p})}),i}(t.Items,this.adamPortalUrl()),n.a("importLoadedData - checkAdamFolder",{items:t.Items})),this.itemService.loadItems(t.Items),this.inputTypeService.addMany(t.InputTypes),this.contentTypeItemService.addContentTypeItems(t.ContentTypeItems),this.contentTypeService.addContentTypes(t.ContentTypes),this.adamCacheService.loadPrefetch(t.Prefetch?.Adam),this.linkCacheService.addPrefetch(t.Prefetch?.Links,t.Prefetch?.Adam);const c=t.Items.map(rt=>rt.Entity.Guid),p=this.itemService.getMany(c),x=0===p[0].Entity.Id,O=null!=p[0].Header.DuplicateEntity,G=!x&&!1!==this.route.snapshot.data.history,ie={...t.Settings,Entities:D.g.dtoToEavMany(t.Settings.Entities),ContentTypes:M._.dtoToEavMany(t.Settings.ContentTypes)};this.formConfig.initFormConfig(t.Context,a,s,c,x,O,G,ie);var ae=t.Context.Language;const ke=this.#t.uiCode(ae.Current);if(this.translate.use(ke),s){const rt=function b(i,o){if(0===o.length)return o;let t;const n=[],a=[];for(const c of o)c.NameId===i?t=c:c.NameId.startsWith(i.split("-")[0])?n.push(c):a.push(c);return n.sort((c,p)=>c.NameId.localeCompare(p.NameId)),a.sort((c,p)=>c.NameId.localeCompare(p.NameId)),t?[t,...n,...a]:[...n,...a]}(ae.Primary,ae.List);this.languageService.addMany(rt)}this.languageStore.addForm(a,ae.Primary,ae.Current,!1);const Je=this.publishStatusService.toPublishMode(t);this.publishStatusService.setPublishMode(Je,a,this.formConfig)}#a(){this.log.fnIf("initMissingValues");const n=this.#n.initMissingValues(),a=this.formConfig.language();if(n&&a.current!==a.primary){this.languageStore.setCurrent(this.formConfig.config.formId,a.primary);const c=this.translate.instant("Message.SwitchedLanguageToDefault",{language:a.primary});this.snackBar.open(c,null,{duration:5e3})}}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(q.nX),r.KVO(y.S),r.KVO(I.b),r.KVO(ee.A),r.KVO(B.k),r.KVO(N.n),r.KVO(ye),r.KVO(ue.c$),r.KVO(w.g),r.KVO(je.A),r.KVO(Se.UG),r.KVO(F),r.KVO(E),r.KVO(v.D),r.KVO(V))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Me,re=g(87149);const Ge={all:!1,load:!0,sortByType:!1,insertToDom:!1};let lt=(()=>{class i{#e;constructor(t){this.formConfig=t,this.log=(0,f.Tq)({ScriptsLoaderService:i},Ge),this.#e=[]}load(t,n){this.log.fnIf("load",{scripts:t});const a=this.#t(t);this.#n(a,n,0)}#t(t){this.log.fnIf("sortByType",{scripts:t});const n=[],a=[];return t.forEach(s=>{const c={path:Me.resolveUrlTokens(s,this.formConfig.config),type:null,loaded:!1,domEl:null};c.path.endsWith(".css")?(c.type=".css",n.push(c)):c.path.endsWith(".js")&&(c.type=".js",a.push(c))}),n.concat(a)}#n(t,n,a){this.log.fnIf("insertToDom",{files:t,increment:a});const s=t[a];if(a++,!s)return void n();s.path=s.path+"?sxcver="+window.sxcVersion;const c=this.#e.find(p=>p.path===s.path);if(c)if(c.loaded)this.#n(t,n,a);else{const p=()=>{s.loaded=!0,this.#n(t,n,a),c.domEl.removeEventListener("load",p),c.domEl.removeEventListener("error",p)};c.domEl.addEventListener("load",p),c.domEl.addEventListener("error",p)}else{".css"===s.type?(s.domEl=document.createElement("link"),s.domEl.rel="stylesheet",s.domEl.href=s.path):".js"===s.type&&(s.domEl=document.createElement("script"),s.domEl.type="module",s.domEl.src=s.path);const p=()=>{s.loaded=!0,this.#n(t,n,a),s.domEl.removeEventListener("load",p),s.domEl.removeEventListener("error",p)};s.domEl.addEventListener("load",p),s.domEl.addEventListener("error",p),document.querySelector("head").appendChild(s.domEl),this.#e.push(s)}}static resolveUrlTokens(t,n){return t.replace(/\[System:Path\]/i,ce.b.getUrlPrefix("system",n)).replace(/\[Zone:Path\]/i,ce.b.getUrlPrefix("zone",n)).replace(/\[App:Path\]/i,ce.b.getUrlPrefix("app",n)).replace(/\[App:PathShared\]/i,ce.b.getUrlPrefix("appShared",n))}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(y.S))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();Me=lt;var Tt=g(84344),Ue=g(79748),Ne=g(36664),et=g(49074),_t=g(85309),tt=g(87941),j=g(93840),te=g(59452),de=g(60591),fe=g(63037),Be=g(18537),ut=g(30281),Ct=g(95699),nt=g(11980),Q=g(67993),$e=g(78656),Z=g(49926),he=g(80436);let me=(()=>{class i{constructor(t,n){this.matIconRegistry=t,this.domSanitizer=n,this.icons={"apple-filled":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">\r\n<style type="text/css">\r\n\t.st0{display:none;}\r\n\t.st1{display:inline;}\r\n</style>\r\n<g id="Layer_1">\r\n\t<path d="M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z"/>\r\n</g>\r\n<g id="Layer_3" class="st0">\r\n</g>\r\n<g id="Icon">\r\n\t<path d="M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44c2,0,4-1.85,6-1.85S28,44,30,44\r\n\t\tc6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z"/>\r\n</g>\r\n</svg>\r\n',"apple-outlined":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">\r\n<style type="text/css">\r\n\t.st0{display:none;}\r\n\t.st1{display:inline;}\r\n</style>\r\n<g id="Layer_1">\r\n\t<path d="M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z"/>\r\n</g>\r\n<g id="Layer_3" class="st0">\r\n</g>\r\n<g id="Icon">\r\n\t<path d="M32,20c3.7,0,6,2.1,6,5.47C38,33.21,33.01,40,30.06,40c-0.25-0.04-0.93-0.35-1.38-0.56c-1.25-0.58-2.8-1.3-4.68-1.3\r\n\t\ts-3.43,0.72-4.68,1.3C18.87,39.65,18.19,39.97,18,40c-3.01,0-8-6.79-8-14.53C10,22.1,12.3,20,16,20c2.44,0,5.29,1.17,6.17,1.62\r\n\t\tL24,22.56l1.83-0.94C26.64,21.2,29.53,20,32,20 M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44\r\n\t\tc2,0,4-1.85,6-1.85S28,44,30,44c6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z"/>\r\n</g>\r\n</svg>\r\n',"draft-branch":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 39.2 28.2 71.8 65.5 78.7-.8 17.2-5 30.4-12.7 40-17.5 21.8-53.1 25.2-90.7 28.7-28.2 2.6-57.4 5.4-80.4 16.9-3.4 1.7-6.7 3.6-9.7 5.7V158.4c36.5-7.4 64-39.7 64-78.4 0-44.2-35.8-80-80-80S0 35.8 0 80c0 38.7 27.5 71 64 78.4v195.2C27.5 361 0 393.3 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-36.9-24.9-67.9-58.9-77.2 5-9.6 12.3-14.6 19-18 17.5-8.8 42.5-11.2 68.9-13.7 42.6-4 86.7-8.1 112.7-40.5 12.4-15.5 19-35.5 19.8-60.7C357.3 214 384 182.1 384 144zM32 80c0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48-48-21.5-48-48zm96 352c0 26.5-21.5 48-48 48s-48-21.5-48-48c0-26.4 21.4-47.9 47.8-48h.6c26.3.2 47.6 21.7 47.6 48zm187.8-241.5L304 192c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48c0 22.4-15.4 41.2-36.2 46.5z"/></svg>',file:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16z"/></svg>',"file-archive":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M128 96v32h32V96zm65.9 169.6c-1.1-5.6-6-9.6-11.8-9.6H160v-32h-32v32l-19.4 97.2c-6.5 32.5 18.3 62.8 51.4 62.8s57.9-30.3 51.4-62.8zm-33.6 124.5c-17.9 0-32.4-12.1-32.4-27s14.5-27 32.4-27 32.4 12.1 32.4 27-14.5 27-32.4 27zM128 160v32h32v-32zm64-96h-32v32h32zm177.9 33.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.4 2.1 7.4 4.2l83.9 83.9c2 2 3.5 4.6 4.2 7.4H256zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h79.7v32h32V32H224v104c0 13.3 10.7 24 24 24h104zM192 192h-32v32h32zm0-64h-32v32h32z"/></svg>',"file-audio":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-77.6-66.6c38.5-26 61.6-69.3 61.6-115.7 0-24.7-6.5-48.9-18.9-70.1-12-20.6-29.1-37.8-49.6-50-7.1-4.2-16.3-1.9-20.6 5.2-4.2 7.1-1.9 16.3 5.2 20.6 33.1 19.7 53.7 55.8 53.7 94.3 0 36.5-18.1 70.4-48.3 90.9-6.9 4.6-8.7 14-4 20.8 2.9 4.3 7.6 6.6 12.4 6.6 3.1 0 6-.8 8.5-2.6zm-26.6-38.3c26-17.3 41.5-46.2 41.5-77.4 0-32.9-17.7-63.7-46.2-80.3-7.2-4.2-16.3-1.7-20.5 5.4-4.2 7.2-1.7 16.3 5.4 20.5 19.3 11.2 31.3 32 31.3 54.3 0 21.1-10.5 40.7-28.1 52.4-6.9 4.6-8.8 13.9-4.2 20.8 2.9 4.4 7.7 6.7 12.5 6.7 2.8.1 5.7-.7 8.3-2.4zm-27-38.2c13.7-8.5 21.8-23.1 21.8-39.2 0-17-9.3-32.5-24.2-40.6-7.3-3.9-16.4-1.2-20.3 6.1-3.9 7.3-1.2 16.4 6.1 20.3 5.2 2.8 8.5 8.3 8.5 14.2 0 5.6-2.9 10.8-7.6 13.7-7 4.4-9.2 13.6-4.8 20.7 2.8 4.6 7.7 7.1 12.8 7.1 2.5 0 5.2-.7 7.7-2.3zM138 266.7v74.7L112 322H94v-36h18l26-19.3m17.9-50.7c-2.9 0-6 1.1-8.4 3.5L104 256H76c-6.6 0-12 5.4-12 12v72c0 6.6 5.4 12 12 12h28l43.5 36.5c2.4 2.4 5.4 3.5 8.4 3.5 6.2 0 12.1-4.8 12.1-12V228c0-7.2-5.9-12-12.1-12z"/></svg>',"file-code":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.941 97.941l-83.882-83.882A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zm-22.627 22.628a15.89 15.89 0 0 1 4.195 7.431H256V32.491a15.88 15.88 0 0 1 7.431 4.195l83.883 83.883zM336 480H48c-8.837 0-16-7.163-16-16V48c0-8.837 7.163-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304c0 8.837-7.163 16-16 16zm-161.471-67.404l-25.928-7.527a5.1 5.1 0 0 1-3.476-6.32l58.027-199.869a5.1 5.1 0 0 1 6.32-3.476l25.927 7.527a5.1 5.1 0 0 1 3.476 6.32L180.849 409.12a5.1 5.1 0 0 1-6.32 3.476zm-48.446-47.674l18.492-19.724a5.101 5.101 0 0 0-.351-7.317L105.725 304l38.498-33.881a5.1 5.1 0 0 0 .351-7.317l-18.492-19.724a5.1 5.1 0 0 0-7.209-.233L57.61 300.279a5.1 5.1 0 0 0 0 7.441l61.263 57.434a5.1 5.1 0 0 0 7.21-.232zm139.043.232l61.262-57.434a5.1 5.1 0 0 0 0-7.441l-61.262-57.434a5.1 5.1 0 0 0-7.209.233l-18.492 19.724a5.101 5.101 0 0 0 .351 7.317L278.275 304l-38.499 33.881a5.1 5.1 0 0 0-.351 7.317l18.492 19.724a5.1 5.1 0 0 0 7.209.232z"/></svg>',"file-excel":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM211.7 308l50.5-81.8c4.8-8-.9-18.2-10.3-18.2h-4.1c-4.1 0-7.9 2.1-10.1 5.5-31 48.5-36.4 53.5-45.7 74.5-17.2-32.2-8.4-16-45.8-74.5-2.2-3.4-6-5.5-10.1-5.5H132c-9.4 0-15.1 10.3-10.2 18.2L173 308l-59.1 89.5c-5.1 8 .6 18.5 10.1 18.5h3.5c4.1 0 7.9-2.1 10.1-5.5 37.2-58 45.3-62.5 54.4-82.5 31.5 56.7 44.3 67.2 54.4 82.6 2.2 3.4 6 5.4 10 5.4h3.6c9.5 0 15.2-10.4 10.1-18.4L211.7 308z"/></svg>',"file-image":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M159 336l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0l-39 39L63 448h256V304l-55.5-55.5c-4.7-4.7-12.3-4.7-17 0L159 336zm96-50.7l32 32V416H95.1l.3-67.2 15.6-15.6 48 48c20.3-20.3 77.7-77.6 96-95.9zM127 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm0-96c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm242.9-62.1L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304z"/></svg>',"file-pdf":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-22-171.2c-13.5-13.3-55-9.2-73.7-6.7-21.2-12.8-35.2-30.4-45.1-56.6 4.3-18 12-47.2 6.4-64.9-4.4-28.1-39.7-24.7-44.6-6.8-5 18.3-.3 44.4 8.4 77.8-11.9 28.4-29.7 66.9-42.1 88.6-20.8 10.7-54.1 29.3-58.8 52.4-3.5 16.8 22.9 39.4 53.1 6.4 9.1-9.9 19.3-24.8 31.3-45.5 26.7-8.8 56.1-19.8 82-24 21.9 12 47.6 19.9 64.6 19.9 27.7.1 28.9-30.2 18.5-40.6zm-229.2 89c5.9-15.9 28.6-34.4 35.5-40.8-22.1 35.3-35.5 41.5-35.5 40.8zM180 175.5c8.7 0 7.8 37.5 2.1 47.6-5.2-16.3-5-47.6-2.1-47.6zm-28.4 159.3c11.3-19.8 21-43.2 28.8-63.7 9.7 17.7 22.1 31.7 35.1 41.5-24.3 4.7-45.4 15.1-63.9 22.2zm153.4-5.9s-5.8 7-43.5-9.1c41-3 47.7 6.4 43.5 9.1z"/></svg>',"file-powerpoint":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM204.3 208H140c-6.6 0-12 5.4-12 12v184c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12v-60.4h44.3c38.7 0 67.7-27.3 67.7-69 0-38.6-23.8-66.6-67.7-66.6zm26 97.7c-7.5 7.6-17.8 11.4-31 11.4H160V233h39.7c12.9 0 23.1 3.7 30.6 11.1 15.3 15.1 15 46.5 0 61.6z"/></svg>',"file-text":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-48-244v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12z"/></svg>',"file-video":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M224 280.593C224 267.01 212.989 256 199.407 256H88.593C75.011 256 64 267.01 64 280.593v110.815C64 404.99 75.011 416 88.593 416h110.814C212.989 416 224 404.99 224 391.407V381l27.971 27.971a23.998 23.998 0 0 0 16.97 7.029H296c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-27.059a24.003 24.003 0 0 0-16.97 7.029L224 291v-10.407zM192 384H96v-96h96v96zm80.255-96H288v96h-15.745L224 342.826v-13.652L272.255 288zm97.686-190.059l-83.883-83.882A47.996 47.996 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zM256 32.491a15.888 15.888 0 0 1 7.432 4.195l83.882 83.882a15.882 15.882 0 0 1 4.195 7.431H256V32.491zM352 464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V48c0-8.837 7.164-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304z"/></svg>',"file-word":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-53.6-246.5c-6.8 32.8-32.5 139.7-33.4 150.3-5.8-29.1-.7 1.6-41.8-150.9-1.4-5.2-6.2-8.9-11.6-8.9h-6.4c-5.4 0-10.2 3.6-11.6 8.9-38.3 142.3-37.4 140.6-39.4 154.7-4.1-23.9 2.1-2.9-34.4-154.4-1.3-5.4-6.1-9.2-11.7-9.2h-7.2c-7.8 0-13.5 7.3-11.6 14.9 9.5 38 34.5 137.4 42.2 168 1.3 5.3 6.1 9.1 11.6 9.1h17c5.4 0 10.2-3.7 11.6-8.9 34.2-127.7 33.5-123.4 36.7-142.9 6.5 31.1.2 7 36.7 142.9 1.4 5.2 6.2 8.9 11.6 8.9h14c5.5 0 13.7-3.7 15.1-9l42.8-168c1.9-7.6-3.8-15-11.6-15h-6.8c-5.7 0-10.6 4-11.8 9.5z"/></svg>',folder:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z"/></svg>',"folder-plus":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M344 272h-72v-72c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v72h-72c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h72v72c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-72h72c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z"/></svg>',sitemap:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M608 352h-32v-97.59c0-16.77-13.62-30.41-30.41-30.41H336v-64h48c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h48v64H94.41C77.62 224 64 237.64 64 254.41V352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32H96v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32h-32v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-480 32v96H32v-96h96zm240 0v96h-96v-96h96zM256 128V32h128v96H256zm352 352h-96v-96h96v96z"/></svg>'}}load(){Object.entries(this.icons).forEach(([t,n])=>{this.matIconRegistry.addSvgIconLiteral(t,this.domSanitizer.bypassSecurityTrustHtml(n))})}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(Z.tp),r.KVO(he.up))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Y=g(37580),ne=g(34456),we=g(64334),Ke=g(51567),xt=g(33688),pt=g(38604),k=g(13620),se=g(30056),pe=g(9234);let Ce=(()=>{class i{constructor(){this.log=(0,f.Tq)({EntityFormStateService:i}),this.controlsCreated=(0,r.vPA)(!1),this.isSaving=(0,r.vPA)(!1),this.formGroup=new ne.J3({})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var De=g(84205),at=g(60852),Qe=g(48021),ft=g(4979);const St={all:!1,childFormResult:!0,expand:!1,open:!1,watchToRefreshOnVersionsClosed:!0};let gt=(()=>{class i extends ft.V{#e;#t;#n;constructor(t,n){super(),this.langInstanceSvc=t,this.formConfig=n,this.log=(0,f.Tq)({EditRoutingService:i},St),this.#e=(0,le.d)(at.c),this.#t=this.#e.route,this.#n=this.#e.router,this.#i=new De.B,this.#r={},this.log.a("constructor")}ngOnDestroy(){this.#i.complete(),super.ngOnDestroy()}init(){this.#o(),this.#l()}#i;#a(){return this.#t.snapshot.params}#s(){const t=this.#a(),n=null!=t.detailsEntityGuid&&null!=t.detailsFieldId;return{params:t,hasDetails:n,hasUpdate:null!=t.updateEntityGuid&&null!=t.updateFieldId,guid:n?t.detailsEntityGuid:t.updateEntityGuid,fieldId:n?t.detailsFieldId:t.updateFieldId}}isExpanded(t,n){const a=t.toString(),s=this.#a();return s.detailsEntityGuid===n&&s.detailsFieldId===a}isExpanded$(t,n){const a=t.toString();return this.#t.params.pipe((0,Qe.J)(s=>s.detailsEntityGuid===n&&s.detailsFieldId===a))}isExpandedSignal(t,n,a){const s=`${t}-${n}`,c=this.#r[s];if(c)return c;const p=this.isExpanded$(t,n);return this.#r[s]=(0,et.ot)(p,{injector:a})}#r;childFormResult(t,n){const a=this.log.fnIf("childFormResult",{fieldId:t,entityGuid:n}),s=this.#i.pipe((0,Ke.p)(c=>c.updateEntityGuid===n&&c.updateFieldId===t&&null!=c.result),(0,C.T)(c=>c.result));return a.rSilent(s)}childFormClosed(){return this.#i.pipe((0,C.T)(t=>null))}expand(t,n,a,s){const c=this.log.fnIf("expand",{expand:t,fieldId:n,entityGuid:a,componentTag:s}),p=this.#s(),x=p.params,ie=ce.b.newUrlIfCurrentContainsOldUrl(this.#t,`edit/${x.items}`+(p.hasDetails?`/details/${p.guid}/${p.fieldId}`:""),`edit/${x.items}`+(t?`/details/${a}/${n}`:""));if(null==ie)return c.end("no change");this.#n.navigate([ie],{state:s&&{componentTag:s}}),c.end("routed away to ",{url:ie})}open(t,n,a){const s=this.log.fnIf("open",{fieldId:t,entityGuid:n,form:a}),c=(0,u.s)(a),p=this.#s();if(p.hasDetails)return this.#n.navigate([`edit/${c}`],{relativeTo:this.#t}),s.end("expanded, just open child");const G=ce.b.newUrlIfCurrentContainsOldUrl(this.#t,`edit/${p.params.items}`,`edit/${p.params.items}/update/${n}/${t}/edit/${c}`);if(null==G)return s.end("no change");this.#n.navigate([G]),s.end("routed away to ",{url:G})}#o(){this.subscriptions.add(this.#t.params.pipe((0,Qe.J)(t=>null!=t.detailsEntityGuid&&null!=t.detailsFieldId)).subscribe(t=>this.langInstanceSvc.updateHideHeader(this.formConfig.config.formId,t)))}#l(){this.subscriptions.add(this.#e.childDialogClosed$().pipe((0,C.T)(()=>{const t=this.#s();return{pInfo:t,result:{updateEntityGuid:t.guid,updateFieldId:parseInt(t.fieldId,10),result:this.#n.getCurrentNavigation().extras?.state}}})).subscribe(({pInfo:t,result:n})=>{if(this.#i.next(n),!t.hasUpdate)return;const a=t.params,s=ce.b.newUrlIfCurrentContainsOldUrl(this.#t,`edit/${a.items}/update/${a.updateEntityGuid}/${a.updateFieldId}`,`edit/${a.items}`);null!=s&&this.#n.navigate([s])}))}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(je.A),r.KVO(y.S))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var it=g(7796);class Pe{static placeholder(o,t,n){return{label:o.instant(t)+(n??""),value:null,noSelect:!0,isMessage:!0,noDelete:!0,noEdit:!0}}static message(o,t,n){return{label:o.instant(t,n),value:null,noSelect:!0,isMessage:!0,noDelete:!0,noEdit:!0}}}class bt{static{this.logSpecs={all:!1,setupEmpty:!1,connectState:!1,initPrefetch:!0,fetchItems:!1,constructor:!1,fields:[...ge.z,"Categories"]}}constructor(){this.dataSource=(0,Q.KX)("dataSource",null),this.optionsOrHints=(0,Q.bo)("optionsOrHints",()=>this.dataSource().data()??[])}connectState(o){const t=this.log.fnIf("connectState");return this.dataSource.set(this.dataSourceRaw.setup()),this.deleteCallback=n=>o.doAfterDelete(n),t.rSilent(this)}}const Qt={...bt.logSpecs,editItem:!0,getPrefill:!0};class yn extends bt{#e;#t;#n;constructor(){super(),this.formConfig=(0,r.WQX)(y.S),this.#e=(0,r.WQX)(gt),this.translate=(0,r.WQX)(ue.c$),this.#t=(0,r.WQX)(Se.UG),this.fieldState=(0,r.WQX)(it.W),this.group=(0,r.WQX)(Ce).formGroup,this.#n=(0,le.d)(pe.Tr),this.name=this.fieldState.name,this.#i=(0,le.d)(ce.Nt).initSignal("PickerSource-EntityType",this.fieldState.settingExt("EntityType")),this.contentType=(0,Q.bo)("contentType",()=>this.#i?.result()??""),this.#a=(0,Q.bo)("createEntityTypes",()=>this.fieldState.settings().CreateTypes),this.myFeatures=(0,Q.bo)("features",()=>({create:!(!this.contentType()&&!this.#a())})),this.#s=(0,Q.KX)("deletedItemsGuids",[]),this.errorOptions=(0,Q.KX)("errorOptions",null),this.optionsOrHints=(0,Q.bo)("optionsOrHints",()=>{const o=this.errorOptions();if(o)return o;const t=this.dataSource(),n=this.#s(),a=t.data().filter(s=>!n.some(c=>c===s.value));return t.loading()?[Pe.message(this.translate,"Fields.Picker.Loading"),...a]:a}),this.#r=(0,le.d)(ce.Nt).initSignal("Prefill",this.fieldState.settingExt("CreatePrefill")),this.#o=(0,le.d)(ce.Nt).initSignal("CreateParams",this.fieldState.settingExt("CreateParameters")),this.#l=(0,le.d)(ce.Nt).initSignal("CreateParams",this.fieldState.settingExt("EditParameters"))}#i;#a;syncParams(){}onAfterViewInit(){this.syncParams()}#s;initPrefetch(o){this.syncParams(),this.log.fnIfInFields("initPrefetch",this.name,{prefetchGuids:o}),this.dataSource().initPrefetch?.(o)}forceReloadData(o){const t=this.log.fn("forceReloadData",{missingData:o});this.dataSource().addToRefresh(o),t.end()}editItem(o,t){const n=this.log.fnIf("editItem",{editParams:o}),a=o?.entityGuid,s=this.#d(null==a?this.#o.result():this.#l.result()),c={items:[{...null==a?se.H.newFromType(t??this.contentType(),this.#d(this.#r.result())):se.H.editId(this.optionsOrHints().find(x=>x.value===a)?.id??o.entityId),...s?{ClientData:{parameters:s}}:{}}]};n.a("form",{form:c});const p=this.fieldState.config;this.#e.open(p.index,p.entityGuid,c),this.#e.childFormClosed().pipe((0,we.s)(1)).subscribe(x=>{const O=this.log.fn("childFormClosed",{editGuid:a,data:x});if(a)return this.forceReloadData([a]),O.end("forceReloadData",{editGuid:a});O.end("no guid, won't reload data")}),n.end()}deleteItem(o){this.log.a("deleteItem",{props:o});const t=this.optionsOrHints().find(G=>G.value===o.entityGuid),n=t.id,a=t.label,s=this.contentType(),c=this.fieldState.config,p=c.entityId,x=c.fieldName;confirm(this.translate.instant("Data.Delete.Question",{title:a,id:n}))&&(this.#t.open(this.translate.instant("Message.Deleting")),this.#n.delete(this.formConfig.config.appId,s,n,!1,p,x).subscribe({next:()=>{this.#t.open(this.translate.instant("Message.Deleted"),null,{duration:2e3}),this.deleteCallback(o),this.#s.update(G=>[...G,o.entityGuid])},error:G=>{this.#t.dismiss(),confirm(this.translate.instant("Data.Delete.Question",{title:a,id:n}))&&(this.#t.open(this.translate.instant("Message.Deleting")),this.#n.delete(this.formConfig.config.appId,s,n,!0,p,x).subscribe({next:()=>{this.#t.open(this.translate.instant("Message.Deleted"),null,{duration:2e3}),this.deleteCallback(o),this.#s.update(ie=>[...ie,o.entityGuid])},error:ie=>{this.#t.open(this.translate.instant("Message.DeleteError"),null,{duration:2e3})}}))}}))}#r;#o;#l;#d(o){const t=this.log.fnIf("getPrefill",{prefill:o});if(!o||!o.trim())return t.r(null,"empty");const n=Object.fromEntries(o.split("&").map(a=>a.split("=")).filter(a=>2===a.length&&a[0]&&a[1]));return t.r(n)}}function Vn(i,o){return{create:i.create??o,textEntry:i.textEntry??o,multiValue:i.multiValue??o,edit:i.edit??o,remove:i.remove??o,delete:i.delete??o}}function kn(i,o){const t=Vn(i,!0),n=Vn(o,!0);return{create:t.create&&n.create,textEntry:t.textEntry&&n.textEntry,multiValue:t.multiValue&&n.multiValue,edit:t.edit&&n.edit,remove:t.remove&&n.remove,delete:t.delete&&n.delete}}function ys(i,o){return i?Array.isArray(i)?i.join(o):i:""}const ro={all:!1,setup:!1,addInfosFromSourceForUi:!1,optionsWithMissing:!1,selectedRaw:!1,selectedOverride:!1,selectedState:!1,features:!0,allOptions:!1,fields:[...ge.z,"*"]};let oo=(()=>{class i{#e;constructor(){this.log=(0,f.Tq)({PickerData:i},ro),this.#e=(0,r.WQX)(ue.c$),this.closeWatcherAttachedWIP=!1,this.ready=(0,Q.KX)("sourceIsReady",!1),this.optionsRaw=(0,Q.bo)("optionsSource",()=>(this.ready()?this.source.optionsOrHints():null)??[]),this.optionsOverride=(0,Q.KX)("overrideOptions",null),this.optionsAll=(0,Q.bo)("optionsFinal",()=>(0,k.z)(this.optionsOverride(),t=>t||this.optionsRaw())),this.optionsAllowsEmpty=(0,Q.bo)("optionsAllowsEmpty",()=>function ao(i){return i?.some(o=>""==o.value)}(this.optionsAll())),this.selectedRaw=(0,Q.bo)("selectedState",()=>{const t=this.log.fnIfInFields("selectedRaw",this.name);return this.ready()?t.r(this.#i(this.state.selectedItems(),this.optionsAll()),"ready"):t.r([],"not ready")}),this.selectedOverride=(0,Q.KX)("selectedOverride",null),this.selectedAll=(0,Q.bo)("selectedAll",()=>(0,k.z)(this.selectedOverride(),t=>t||this.selectedRaw())),this.selectedOne=(0,Q.bo)("selectedOne",()=>this.selectedAll()[0]??null),this.optionsWithMissing=(0,Q.bo)("optionsWithMissing",()=>{const t=this.log.fnIf("optionsWithMissing"),n=this.selectedAll(),a=this.optionsAll(),s=n.filter(p=>!a.find(x=>x.value===p.value));if(0===s.length)return a;const c=a.concat(s);return t.r(c)}),this.#t=(0,Q.KX)("settingsLazy",null),this.#n=(0,Q.bo)("featuresFromSettings",()=>{const t=this.#t()();return{textEntry:t.EnableTextEntry,multiValue:t.AllowMultiValue,create:t.EnableCreate&&!!t.CreateTypes,remove:t.EnableRemove,delete:t.EnableDelete,edit:t.EnableEdit}}),this.features=(0,Q.bo)("features",()=>{const t=this.source.myFeatures(),n=this.state.myFeatures(),a=this.#n(),s=kn(t,n),c=kn(s,a),p={...c,showGoToListDialogButton:c.multiValue,showAddNewButton:c.create};return this.log.aIf("features",{sourceFeatures:t,stateFeatures:n,settingsFeatures:a,mergeSourceAndState:s,mergeSettings:c,forControl:p}),p}),this.isInFreeTextMode=(0,Q.KX)("isInFreeTextMode",!1),this.log.enabled&&this.log.specs.allOptions&&(0,r.QZP)(()=>{const t=this.ready(),n=this.optionsRaw(),a=this.optionsOverride(),s=this.optionsAll();this.log.a("options",{ready:t,raw:n,override:a,final:s})})}setup(t,n,a,s){const c=this.log.fnIfInFields("setup",this.name,{name:t,state:a,source:s});this.name=t,this.#t.set(n),this.state=a,this.source=s,a.features=this.features,a.allowsEmptyLazy.set(this.optionsAllowsEmpty);const p=a.values();c.a("setup",{initiallySelected:p}),s?.initPrefetch?.(p),this.ready.set(!0),c.end("done")}selectedCopy(t){return t.map(n=>({...n}))}#t;#n;addNewlyCreatedItem(t){const n=Object.keys(t)[0],a=this.log.fn("addNewlyCreatedItem",{result:t,newItemGuid:n});this.state.values().includes(n)||(this.state.add(n),this.source?.forceReloadData?.([n])),a.end()}#i(t,n){const a=this.log.fnIfInFields("addInfosFromSourceForUi",this.name,{selected:t,opts:n}),s=t.map(c=>{const p=n.find(x=>x.value===c);return p?function lo(i,o){return{id:i.id,value:i.value,label:o,tooltip:i.tooltip||`${o} (${i.value})`,info:i.info||null,link:i.link||null,noEdit:!0===i.noEdit,noDelete:!0===i.noDelete,noSelect:!1}}(p,p.label??this.#e.instant("Fields.Picker.EntityNotFound")):this.#a(c)});return a.r(s)}toggleFreeTextMode(){this.isInFreeTextMode.update(t=>!t)}#a(t){t=t?.toString()??"";const n=this.source instanceof yn;return{noEdit:!0,noDelete:!0,id:null,label:t+(n?" \u26a0\ufe0f":""),tooltip:t+(n?` \u26a0\ufe0f ${this.#e.instant("Fields.Picker.EntityNotFound")} - could result in error`:" (manual entry)"),value:t}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),co=(()=>{class i{constructor(t,n){this.injector=t,this.inputTypeSvc=n,this.log=(0,f.Tq)({PickerDataFactory:i})}createPickersForAttributes(t){const n=t.map(a=>({name:a.Name,inputType:this.inputTypeSvc.getSpecs(a)}));return this.#e(n)}#e(t){return t.map(a=>({name:a.name,picker:this.#t(a.inputType)})).filter(a=>null!==a.picker).reduce((a,s)=>(a[s.name]=s.picker,a),{})}#t(t){return oe.Q.isAnyPicker(t.inputType)?(0,le.d)(oo,this.injector):null}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(r.zZn),r.KVO(ee.A))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Sn=g(93826);class bn{static{this.bool={equal:Sn.a.valueEquals}}static{this.number={equal:Sn.a.valueEquals}}static{this.string={equal:Sn.a.valueEquals}}static{this.ref={}}}let Vt=(()=>{class i{#e;#t;constructor(t,n,a){this.formConfig=t,this.itemService=n,this.languageService=a,this.log=(0,f.Tq)({FormsStateService:i}),this.triggerTrySaveAndMaybeClose=(0,r.vPA)({tryToSave:!1,close:!1},bn.ref),this.formsAreValid=(0,r.vPA)(!1),this.formsAreDirty=(0,r.vPA)(!1),this.#e={},this.#t={},this.readOnly=(()=>{const s=(0,r.vPA)(this.formConfig.config.itemGuids.map(x=>this.itemService.getItemHeaderSignal(x))),c=this.languageService.getAllSignal();return(0,Q.bo)("readOnly",()=>{const x=s().some(ae=>ae().EditInfo?.ReadOnly??!1),O=c().find(ae=>ae.NameId===this.formConfig.language().current)?.IsAllowed??!0;return{isReadOnly:x||!O,reason:x?"Form":O?void 0:"Language"}})})(),this.formsValidTemp=(0,r.vPA)(!1),this.saveButtonDisabled=(0,Q.bo)("saveButtonDisabled",()=>this.readOnly().isReadOnly||!this.formsValidTemp());for(const s of this.formConfig.config.itemGuids)this.#e[s]=!1,this.#t[s]=!1}getFormValid(t){return this.#e[t]}setFormValid(t,n){this.#e[t]=n;const a=!Object.values(this.#e).some(s=>!1===s);a!==this.formsValidTemp()&&(this.formsValidTemp.set(a),this.formsAreValid.set(a))}setFormDirty(t,n){this.#t[t]=n;const a=Object.values(this.#t).some(s=>!0===s);a!==this.formsAreDirty()&&this.formsAreDirty.set(a)}triggerSave(t){this.triggerTrySaveAndMaybeClose.set({tryToSave:!0,close:t})}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(y.S),r.KVO(I.b),r.KVO(w.g))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var bs=g(75067);let uo=(()=>{class i{#e=(0,r.WQX)(v.D).getAll();constructor(t,n,a,s,c){this.formConfig=t,this.itemService=n,this.languageSvc=a,this.globalConfigSvc=s,this.initialValuesService=c}init(t,n,a){this.#t=n,this.#n=t,this.#i=a}#t;#n;#i;#a={};getSharedSpecs(){const t=this.formConfig.language(),n=this.languageSvc.getAll(),a=this.globalConfigSvc.isDebug();return{initialFormValues:this.initialValuesService.get(this.#t,t.current),language:t,languages:n,debugEnabled:a,itemService:this.itemService,formConfig:this.formConfig,fieldsSettingsSvc:this.#n,features:this.#e,parameters:new bs.Z(this.#i.ClientData?.parameters??{}),warningsObsolete:this.#a}}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(y.S),r.KVO(I.b),r.KVO(w.g),r.KVO(K.B),r.KVO(V))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var po=g(37739),Ot=g(28136);class qn{}var _s=g(60827),Ki=g(55970);const ho={all:!1,getPickerInfos:!1,filterFormulasIfPickerNotReady:!0,fields:[...ge.z]};class Zi{constructor(o,t,n){this.fieldName=o,this.fieldConstants=t,this.propsBefore=n,this.log=(0,f.Tq)({FormulaFieldPickerHelper:Zi},ho),this.isSpecialPicker=t.inputTypeSpecs.isNewPicker}get infos(){return this.#e??=this.#t(this.fieldName,this.fieldConstants,this.propsBefore)}#e;filterFormulasIfPickerNotReady(o){const t=this.log.fnIfInFields("filterFormulasIfPickerNotReady",this.fieldName,{before:o}),n=this.infos,a=this.isSpecialPicker&&!n.ready?o.filter(p=>!p.fieldIsSpecialPicker):o,s=a.filter(p=>!p.fieldIsSpecialPicker||this.isSpecialPicker&&!p.sleep||n.changed);return t.rSilent(s,`\u{1f9ea}\u{1f4ca} before: ${o.length}; ready: ${a.length}; formulas:${s.length}; pickerChanged: ${n.changed}; opts: ${n.options.changed}/${n.options.ver}; sel: ${n.selected.changed}/${n.selected.ver}`)}#t(o,t,n){const a=this.log.fnIfInFields("getPickerInfos",o),s=t.pickerData();if(1!=s?.ready()){const G={list:[],listRaw:[],ver:null,verBefore:null,changed:!1};return{ready:!1,mapper:null,picker:s,options:G,selected:G,changed:!1}}function c(G,ie,ae){const ke=G(),Je=(0,Q.HF)(G);return{list:ie(),listRaw:ke,ver:Je,verBefore:ae,changed:Je!==ae}}const p=c(s.optionsRaw,s.optionsAll,n.opts?.ver),x=c(s.selectedRaw,s.selectedAll,n.sel?.ver);return a.r({ready:!0,mapper:s.state.mapper,picker:s,options:p,selected:x,changed:x.changed||p.changed})}updateFormulaSleep(o,t,n){o.sleep=t.sleep??(!!Ki.wB.includes(o.target)||o.sleep),n.a(`\u{1f9ea}\u23f8\ufe0fformula.sleep: ${o.target}; formula.sleep: ${o.sleep}; raw.sleep: ${t.sleep}`)}preserveResultsAfterRun(o,t,n,a){return n.options&&(t.options={list:n.options,ver:this.infos.options.ver},a.a("\u{1f9ea}\u{1f4c3} options returned, will add",t.options)),n.selected&&(t.selected={list:n.selected,ver:this.infos.selected.ver},a.a("\u{1f9ea}\u{1f4c3} selected returned, will add",t.selected)),t}}var pn=g(92434);class ei{static keepSettingIfTypeOk(o,t,n,a){return ei.keepSettingIfTypeOkAndStatus(o,t,n,a).settingsNew}static keepSettingIfTypeOkAndStatus(o,t,n,a){const s=o.substring(Ki.si.length),c=t[s];return(0,pn.A)(c,n)?{settingsNew:a,wasChanged:!1}:Array.isArray(c)&&Array.isArray(n)||typeof c==typeof n?(a[s]=n,{settingsNew:a,wasChanged:!0}):{settingsNew:a,wasChanged:!1}}}const mo={all:!1,runFormula:!1,runAllOfField:!0,runOrInitSettings:!0,getPickerInfos:!1,fields:[...ge.z]};class Ji{constructor(o,t,n,a){this.promiseHandler=o,this.designerSvc=t,this.entityGuid=n,this.runOneHelper=a,this.log=(0,f.Tq)({FormulaRunField:Ji},mo)}runOrInitSettings(o,t,n,a,s,c,p,x,O){const G=this.log.fnIfInFields("runOrInitSettings",t,{fieldName:t}),ie=new Zi(t,n,p),ae=(0,r.O8t)(()=>this.designerSvc.cache.getActive(this.entityGuid,t,ie.isSpecialPicker)),ke=(0,po.A)(ae,Kt=>Kt.disabled?"disabled":"enabled");ke.disabled&&this.#e(ke.disabled);const Je=ke.enabled??[],rt=this.promiseHandler.filterFormulas(t,Je),st=ie.filterFormulasIfPickerNotReady(rt);if(G.a(`\u{1f9ea}\u{1f4ca} enabled: ${Je.length}; noPromisesSleep: ${rt.length}; formulas: ${st.length}`),0==st.length)return Mt({},c,{value:c,validation:null,fields:[],settings:{},options:new qn,selected:new qn});const jt=this.#t({currentValues:o,settingsInitial:n.settingsInitial,settingsCurrent:a,pickerHelper:ie,defaultValueHelper:()=>new ce.X3(t,n.inputTypeSpecs.inputType,n.settingsInitial,s)},st,x);return Mt(jt.settings,jt.value,jt);function Mt(Kt,rn,vn){const Cn=O.correctSettingsAfterChanges({...a,...Kt},rn||c);return ae.length>0&&ie.isSpecialPicker&&(Cn.requiredFeatures=[...Cn.requiredFeatures??[],Ot.T.PickerFormulas]),G.r({...vn,settings:Cn})}}#e(o){for(const t of o)console.warn(`Formula on field '${t.fieldName}' with target '${t.target}' is disabled. Reason: ${t.disabledReason}`)}#t(o,t,n){const a=this.log.fnIfInFields("runAllOfField",t[0].fieldName,{runParams:o,formulas:t});let s={value:void 0,validation:void 0,fields:[],options:new qn,selected:new qn,settings:{}};const c=performance.now();for(const x of t){const O={runParameters:{formula:x,...o},...n},G=this.#n(O);if(a.a("formula result",{formula:x,raw:G}),o.pickerHelper.updateFormulaSleep(x,G,a),this.promiseHandler.updateStop(x,G),this.promiseHandler.handleStopAndPromise(x,G),s=o.pickerHelper.preserveResultsAfterRun(x,s,G,a),G.fields&&s.fields.push(...G.fields),void 0!==G.value)switch(!0){case x.isValue:s.value=G.value;break;case x.isValidation:s.validation=G.value;break;case x.isSetting:s.settings=ei.keepSettingIfTypeOk(x.target,o.settingsCurrent,G.value,s.settings)}}const p=performance.now();return a.r(s,`runAllFormulas Time: ${p-c}ms`)}#n(o){const{formula:t,fieldName:n,params:a,title:s,devHelper:c,valHelper:p}=this.runOneHelper.getPartsFor(o),x=this.log.fnIfInFields("runFormula",n,{fieldName:n});x.a(`formula version: ${t.version}, entity: ${s}, field: ${n}, target: ${t.target}`,{formula:t});try{switch(c.showStart(),t.version){case _s.GI.V1:const O=t.fn(a.data,a.context),{ok:G,v1Result:ie}=p.v1(O);return G?(x.a("V1 formula result is pure",{v1Raw:O,valueV1:ie}),c.showResult(ie.value,!1,!1),ie):(x.a("V1 formula result is not pure",{v1Raw:O}),console.error("V1 formulas accept only simple values in return statements. If you need to return an complex object, use V2 formulas."),p.toFormulaResult(void 0));case _s.GI.V2:const ae=t.fn(a.data,a.context),ke=p.v2(ae);return c.showResult(ke.options??ke.value,!1,!!ke.promise),ke;default:throw new Error("Formula version unknown not supported")}}catch(O){return c.showError(O),p.toFormulaResult(void 0)}}}const fo={all:!1,getFormulas:!1,runAllFields:!0,runFormula:!1,runOneFieldOrInitSettings:!1,fields:[...ge.z]};let go=(()=>{class i{#e;constructor(t,n,a){this.designerSvc=t,this.logSvc=n,this.translate=a,this.log=(0,f.Tq)({FormulaEngine:i},fo),this.#e=(0,le.d)(uo)}init(t,n,a,s,c,p){this.#t=t,this.#i=s,this.#a=c,this.#s=c.Attributes,this.#n=p,this.#e.init(a,t,n)}#t;#n;#i;#a;#s;runAllFields(t,n){const a={},s={},c=[],p=this.#e.getSharedSpecs(),x=new We.q(this.log.name);for(const O of this.#s){const G=this.log.fnIfInFields("runAllFields",O.Name,{fieldName:O.Name}),ie=n.allAttributes[O.Name],ae=n.values[O.Name],ke=n.getFieldConstants(O.Name),Je=n.getFieldSettingsInCycle(ke),rt=n.updateHelper.create(O.Name,O,ke,ie),st=n.fieldProps[O.Name]??{},It=new bs.$(this.designerSvc,this.translate,this.logSvc,this.#a,this.#t,this.#n),Mt=new Ji(this.#i,this.designerSvc,this.#t,It).runOrInitSettings(n.values,O.Name,ke,Je,t.item.Header,ae,st,p,rt),Kt=Mt.settings;s[O.Name]=Mt.value,Mt.fields&&c.push(...Mt.fields);const vn=x.getTranslationState(ie,Kt.DisableTranslation,t.languages,G.enabled);Mt.options.list&&G.a("picker options",{options:Mt.options.list,version:Mt.options.ver}),Mt.selected.list&&G.a("picker selected",{selected:Mt.selected.list,version:Mt.options.ver}),a[O.Name]={...st,language:ke.language,constants:ke,settings:Kt,translationState:vn,value:ae,buildWrappers:null,formulaValidation:Mt.validation,opts:{...st.opts,...Mt.options},sel:{...st.sel,...Mt.selected}}}return{fieldsProps:a,valueUpdates:s,fieldUpdates:c}}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(xt.f),r.KVO(re.J),r.KVO(ue.c$))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var vo=g(28003);class yo{constructor(o){this.entityGuid=o,this.data={}}}const bo={all:!1,addFormulaPromise:!0,updateStop:!1,defineCallbackHandlerIfMissing:!1,changesFromQueue:!1,promiseComplete:!0,filterFormulas:!0,fields:[...ge.z]};let _o=(()=>{class i{constructor(t){this.itemSvc=t,this.log=(0,f.Tq)({FormulaPromiseHandler:i},bo),this.#e={},this.#t=null}#e;init(t,n,a,s){this.#n=t,this.#t=a,this.#i=n,this.#a=s}#t;#n;#i;#a;updateStop(t,n){const a=this.log.fnIfInFields("updateStop",t.fieldName,{promiseResult:n,formula:t},t.target),s=n.promise instanceof Promise,c=n.stop??(!!s||t.stop),p=`\u{1f9ea}\u23f9\ufe0f formula.stop: ${t.stop}; raw.stop: ${n.stop}; hasPromise: ${s}; newStop: ${c}`;return t.stop=c,a.end(p)}handleStopAndPromise(t,n){const a=this.log.fnIfInFields("addFormulaPromise",t.fieldName,{promiseResult:n,formula:t},t.target);if(!(n.promise instanceof Promise))return a.end("no promise");n.openInDesigner&&null===n.stop&&console.log("FYI: formula returned a promise. This automatically stops this formula from running again. If you want it to continue running, return stop: false");const s=n.sleep??!1;return t.promises$.next({promise:n.promise,sleep:s,completed:!1}),this.#s(t),a.end(`promise added, sleep: ${s}`)}filterFormulas(t,n){const a=this.log.fnIfInFields("filterFormulas",t,{enabled:n}),s=n.filter(p=>{const x=p.promises$.value;return a.a(`hasPromise: ${!!x}; completed: ${x?.completed}; sleep: ${x?.sleep}`),!x||x.completed||!x.sleep});return a.rSilent(s,`\u{1f9ea}\u{1f4ca} beforeFilter: ${n.length}; formulas: ${s.length}; `)}#s(t){const n=this.#n,a=this.log.fnIfInFields("defineCallbackHandlerIfMissing",t.fieldName,{formula:t,entityGuid:n},t.target);if(t.updateCallback$.value)return a.end("callback already defined");t.updateCallback$.next(s=>this.#r(t,s))}#r(t,n){const a=this.#n,s=this.log.fnIfInFields("promiseComplete",t.fieldName,{result:n,formula:t,entityGuid:a},t.target),c=t.fieldName,p=new vo.d(this.#i(),a,c,t.isValue,t.inputType,!1).v2(n),x=this.#e,O=x[a]??=new yo(a),G=O.data[c]??={name:c,value:t.isValue?p.value:void 0,fields:[],settings:{}};t.isSetting&&(s.a("formula promise settings"),G.settings??={},G.settings[t.settingName]=p.value),p.fields&&(s.a("formula promise fields"),G.fields.push(...p.fields)),t.stop=p.stop??t.stop,t.promiseCompleted=!0,s.end("promise complete, will retriggerFormulas",G),this.#t.retriggerFormulas("promise")}changesFromQueue(t){const n=this.#e[this.#n];if(this.#e[this.#n]=null,null==n||null==n.data||0===Object.keys(n.data).length)return{valueChanges:{},newFieldProps:null};const a=Object.entries(n.data),c=a.map(([ae,ke])=>({name:ae,value:ke.value})).reduce((ae,{name:ke,value:Je})=>(ae[ke]=Je,ae),{}),p=a.filter(([ae,ke])=>ke.fields.length>0).map(([ae,ke])=>ke.fields).flat(),x=a.filter(([ae,ke])=>Object.keys(ke.settings).length>0).map(([ae,ke])=>({fieldName:ae,settings:ke.settings})),O=0!==Object.keys(c).length||0!==p.length?this.#a.getValueUpdates(t,p,c):{},G=this.#i();let ie=null;if(x.length){ie={...t.fieldProps};const ae=this.itemSvc.getItemAttributes(this.#n);Object.values(x).forEach(ke=>{const Je=ke.fieldName,rt=t.fieldProps[Je]?.settings;let st={};Object.entries(ke.settings).forEach(([It,jt])=>{st=ei.keepSettingIfTypeOk(Ki.si+It,rt,jt,st);const Kt=t.getFieldConstants(Je),rn=G.Attributes.find(Zn=>Zn.Name===Je),vn=t.updateHelper.create(Je,rn,Kt,ae[Je]),Cn={...rt,...st},wn=vn.correctSettingsAfterChanges(Cn,t.values[Je]);ie[Je]={...ie[Je],settings:wn}})})}return{valueChanges:O,newFieldProps:ie}}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(I.b))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Ye=g(4202);const kt_AdamWrapper="app-adam-wrapper",kt_CollapsibleWrapper="app-collapsible-wrapper",kt_DropzoneWrapper="app-dropzone-wrapper",kt_PickerExpandableWrapper="app-picker-expandable-wrapper",kt_ExpandableWrapper="app-expandable-wrapper",kt_HiddenWrapper="app-hidden-wrapper",kt_FeatureWarningWrapper="app-feat-warnings-wrapper",kt_HyperlinkDefaultExpandableWrapper="app-hyperlink-default-expandable-wrapper",kt_HyperlinkLibraryExpandableWrapper="app-hyperlink-library-expandable-wrapper",kt_LocalizationWrapper="app-localization-wrapper",Jt={wrappers:["app-localization-wrapper"]};class xo{static getWrappers(o,t){const n=t.inputType;if(oe.Q.isMessage(n))return[];if(oe.Q.isGroupStart(n))return["app-collapsible-wrapper"];const a=["app-hidden-wrapper"];return[Ye.u.EntityDefault,Ye.u.StringDropdownQuery,Ye.u.EntityQuery,Ye.u.EntityContentBlocks,Ye.u.StringDropdown,Ye.u.EntityPicker,Ye.u.StringPicker,Ye.u.NumberPicker].includes(n)&&(a.push("app-feat-warnings-wrapper"),a.push("app-localization-wrapper"),((o.AllowMultiValue??!1)||n===Ye.u.EntityContentBlocks)&&a.push("app-picker-expandable-wrapper")),t.isExternal&&a.push("app-dropzone-wrapper","app-localization-wrapper","app-expandable-wrapper","app-adam-wrapper"),a}}const Co={all:!1,getCycleSettingsAndValues:!1,getLatestSettingsAndValues:!1};class qi{constructor(o,t,n,a,s,c){this.engine=o,this.initialValues=t,this.fieldProps=n,this.allAttributes=a,this.updateHelper=s,this.fieldConstants=c,this.log=(0,f.Tq)({FieldsPropsEngineCycle:qi},Co),this.values={...t}}getFieldConstants(o){return this.fieldConstants.find(t=>t.fieldName===o)}getCycleSettingsAndValues(){const o=this.log.fnIf("getCycleSettingsAndValues");for(let n=0;n<5;n++){const a=this.#e(n),s={...this.values,...a.valueChanges};if((0,pn.A)(this.fieldProps,a.props)&&(0,pn.A)(this.values,s)){o.a("No more changes, stable, exit");break}this.fieldProps=a.props,this.values=s}return{valueChanges:this.engine.modifiedChecker.getValueUpdates(this,[],this.values,this.initialValues),props:this.fieldProps}}#e(o){const t=this.log.fnIf("getLatestSettingsAndValues",{loopIndex:o}),n=0===Object.keys(this.fieldProps).length;if(n)t.a("First round, no queue to process");else{const{valueChanges:x,newFieldProps:O}=this.engine.formulaPromises.changesFromQueue(this);O&&(t.a("New field props from queue",{newFieldProps:O}),this.fieldProps=O),Object.keys(x).length>0&&(t.a("Value changes from queue",{valueChanges:x}),this.values={...this.values,...x})}const{fieldsProps:a,valueUpdates:s,fieldUpdates:c}=this.engine.formulaEngine.runAllFields(this.engine,this);for(const[x,O]of Object.entries(a))O.buildWrappers=n?xo.getWrappers(O.settings,O.constants.inputTypeSpecs):this.fieldProps[x]?.buildWrappers;return{valueChanges:this.engine.modifiedChecker.getValueUpdates(this,c,s),props:a}}getFieldSettingsInCycle(o){const t=this.fieldProps[o.fieldName];return o.language==t?.language?t?.settings??{...o.settingsInitial}:{...o.settingsInitial}}}class ti{constructor(o){this.defaultIsShow=!0,this.fields=null,this.log=(0,f.Tq)({ItemFieldVisibility:ti});const t=this.log.fn("ctor",{identifier:o});var n=o.ClientData?.fields;if(null==n||""==n)return void t.end("no fields specified");this.defaultIsShow="-"==n[0],this.defaultIsShow&&(n=n.substring(1));const a=!this.defaultIsShow;this.fields=n.toLowerCase().split(",").reduce((s,c)=>(s[c]=a,s),{}),t.end("",{fields:this.fields,defaultIsShow:this.defaultIsShow})}hasRules(){return null!=this.fields}isVisibleDisabled(o){const t=this.log.fn("isVisibleDisabled",{fieldName:o});if(!this.hasRules())return t.r(!1,"no rules");const n=this.fields[o.toLowerCase()];return t.r(!(n??this.defaultIsShow))}static mergedVisible(o){return o.Visible&&!o.VisibleDisabled}makeParentGroupsVisible(o){const t=this.log.fn("makeParentGroupsVisible",{allConstFieldParts:o});if(!this.hasRules())return t.r(o,"no rules, no changes");try{o.forEach((n,a)=>{if(oe.Q.isGroupStart(n.inputTypeSpecs.inputType)&&0!=n.settingsInitial.VisibleDisabled)for(let s=a+1;s<o.length;s++){const c=o[s];if(oe.Q.endsPreviousGroup(c.inputTypeSpecs.inputType))return;if(0==c.settingsInitial.VisibleDisabled)return t.a("Forced visible",{fieldName:n.fieldName,reason:c.fieldName}),void(n.settingsInitial.VisibleDisabled=!1)}})}catch(n){console.error("Error trying to set item field visibility",n)}return o}}const To={all:!1,stablePartsOfLanguage:!1,stablePartOfField:!0,constantPartsOfField:!1,constantFieldParts:!1,staticPartsOfField:!1,fields:[...ge.z]};let ko=(()=>{class i{constructor(t,n){this.formConfig=t,this.inputTypeSvc=n,this.log=(0,f.Tq)({FieldsSettingsConstantsService:i},To),this.#e=new We.q(this.log.name)}#e;init(t,n,a,s,c){return this.#t=t,this.#s=n,this.#n=new ti(t.Header),this.#i=a,this.#a=s,this.#r=c,this}#t;#n;#i;#a;#s;#r;stableDataOfLanguage(){const t=this.#t.Entity.Guid,n=this.#t.Entity.Id,a=this.#s.Id,s=this.#l(t,n,a);return(0,Q.bo)("stableDataOfLanguage",()=>this.#o(this.#i(),this.#a(),s))}#o(t,n,a){const s=this.#s,c=this.log.fnIf("stablePartsOfLanguage",{contentType:s,entityReader:t}),p=s.Attributes.map(O=>{const G=O.Name,ie=this.log.fnIfInFields("stablePartOfField",G,{fieldName:G}),ae=this.inputTypeSvc.get(O.InputType),ke=t.flatten(O.Metadata);if(n.current!==t.current){const It=n.flatten(O.Metadata);ke.Name=It.Name??ke.Name,ke.Placeholder=It.Placeholder??ke.Placeholder,ke.Notes=It.Notes??ke.Notes}const Je=this.#e.mergeGenericSettings(G,ke);Je.InputType=O.InputType,Je.VisibleDisabled=this.#n.isVisibleDisabled(O.Name);const rt=this.#e.getDefaultSettings(Je),st={...a.find(It=>It.fieldName===O.Name),settingsInitial:rt,inputTypeConfiguration:ae,language:t.current};return ie.r(st)}),x=this.#n.makeParentGroupsVisible(p);return c.r(x)}#l(t,n,a){const s=this.#s,c=this.log.fnIf("constantPartsOfField",{entityGuid:t,entityId:n,contentTypeNameId:a}),p=this.formConfig.language(),x=new ce.bT(p.initial,p.primary),O=this.#r.pickerData,G=this.formConfig.config;c.a("shared across fields",{entityGuid:t,entityId:n,contentTypeNameId:a,language:p,allPickers:O});const ie=s.Attributes.map((ae,ke)=>{const Je=ae.Name,rt=this.log.fnIfInFields("constantFieldParts",Je,{fieldName:Je,index:ke}),st=x.flatten(ae.Metadata),It=this.#e.getDefaultSettings(st),jt=It.Disabled??!1,Mt=this.inputTypeSvc.getSpecs(ae);rt.a("details",{fieldName:Je,contentType:s,language:p,attr:ae,initialSettings:It,inputTypeSpecs:Mt});const Kt=xe.a.singleton().get(ae.InputType),rn={entityGuid:t,entityId:n,contentTypeNameId:a,fieldName:Je,index:ke,dropzonePreviewsClass:`dropzone-previews-${G.formId}-${ke}`,initialDisabled:jt,inputTypeSpecs:Mt,isLastInGroup:this.#e.isLastInGroup(s,ae),type:ae.Type,logic:Kt,pickerData:()=>O[Je]??null};return rt.r(rn)});return c.r(ie)}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(y.S),r.KVO(ee.A))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();class xs{static isRequired(o){return!this.#p(o)&&o.Required}static getValidators(o,t){const n=[t!==Ye.u.HyperlinkLibrary?this.#t(o):this.#n(o),this.#i(o),this.#a(o),this.#s(o),this.#r(o),this.#o(o),this.#l(o),this.#c(o)];return t===Ye.u.CustomJsonEditor&&n.push(this.#d(o)),n}static#e(o,t){const n=t.settings();return this.#p(n)?null:n}static#t(o){return t=>{const n=this.#e(t,o);return null!=n&&n.valueRequired?ne.k0.required(t):null}}static#n(o){return t=>{const n=this.#e(t,o);return null!=n&&n.valueRequired&&0===t.adamItems?{required:!0}:null}}static#i(o){return t=>{const n=this.#e(t,o);return null!=n&&n.ValidationRegExJavaScript?ne.k0.pattern(n.ValidationRegExJavaScript)(t):null}}static#a(o){return t=>{const n=this.#e(t,o);if(null==n?.Decimals||n.Decimals<0||null==t.value)return null;const a=0===n.Decimals?"^-?[0-9]+$":`^-?[0-9]+(.[0-9]{1,${n.Decimals}})?$`;return t.value.toString().match(a)?null:{decimals:!0}}}static#s(o){return t=>{const n=this.#e(t,o);return null==n?.Min?null:ne.k0.min(n.Min)(t)}}static#r(o){return t=>{const n=this.#e(t,o);return null==n?.Max?null:ne.k0.max(n.Max)(t)}}static#o(o){return t=>{const n=this.#e(t,o);return null==n||0==n.AllowMultiMin||null==n.AllowMultiMin?null:Cs(t,o,n)<n.AllowMultiMin?{minNoItems:n.AllowMultiMin}:null}}static#l(o){return t=>{const n=this.#e(t,o);return null==n||0==n.AllowMultiMax||null==n.AllowMultiMax?null:Cs(t,o,n)>n.AllowMultiMax?{maxNoItems:n.AllowMultiMax}:null}}static#d(o){return t=>{const n=o.settings();let a,s;const c=n.JsonValidation;if(this.#p(n)||"none"===c||!t.value)a=!1,s=!1;else try{JSON.parse(t.value),a=!1,s=!1}catch{"strict"===c?(a=!0,s=!1):"light"===c&&(a=!1,s=!0)}return t._warning=s?{jsonWarning:!0}:null,a?{jsonError:!0}:null}}static#c(o){return t=>{const n=o.props().formulaValidation,{error:a,warning:s}=this.#p(o.settings())||null==n?{error:!1,warning:!1}:"error"===n.severity?{error:!0,warning:!1}:"warning"===n.severity?{error:!1,warning:!0}:{error:!1,warning:!1};return t._warning=s?{formulaWarning:!0,formulaMessage:n.message}:null,a?{formulaError:!0,formulaMessage:n.message}:null}}static#p(o){return!ti.mergedVisible(o)}}function Cs(i,o,t){if(Array.isArray(i.value))return i.value.length;const n=o.pickerData;return null==n?function so(i,o,t){return""==i&&t?[""]:""!=i&&i?Array.isArray(i)?i:i.split(o):[]}(i.value,t.Separator,!1).length:n.selectedAll().length}class So{constructor(o,t,n,a,s){this.fieldName=o,this.inputType=t,this.props=a,this.pickersGet=s,this.settings=n}get pickerData(){return this.pickersGet()?.[this.fieldName]??null}}const Eo={all:!1,correctSettingsAfterChanges:!0,schemaDisablesTranslation:!1,getDisabledBecauseTranslations:!1,fields:[...ge.z]};class ea{constructor(o,t,n,a,s){this.contentTypeMetadata=o,this.language=t,this.fieldLogicTools=n,this.formReadOnly=a,this.slotIsEmpty=s,this.log=(0,f.Tq)({FieldSettingsUpdateHelperFactory:ea})}create(o,t,n,a){return new ta(o,this.contentTypeMetadata,this.language,this.fieldLogicTools,this.formReadOnly,this.slotIsEmpty,t,n,a)}}class ta{constructor(o,t,n,a,s,c,p,x,O){this.fieldName=o,this.contentTypeMetadata=t,this.language=n,this.fieldLogicTools=a,this.formReadOnly=s,this.formSlotIsEmpty=c,this.attribute=p,this.constantFieldPart=x,this.attributeValues=O,this.log=(0,f.Tq)({FieldSettingsUpdateHelper:ta},Eo)}correctSettingsAfterChanges(o,t){const n=this.log.fnIfInFields("correctSettingsAfterChanges",this.fieldName,()=>({settings:o,fieldValue:t})),a=this.constantFieldPart,s=this.formSlotIsEmpty();o.Name=o.Name||this.attribute.Name,o.valueRequired=xs.isRequired(o);const c=this.#e();o.DisableTranslation=s||c,o.uiDisabledInThisLanguage=this.#t(o.DisableTranslation),o.uiDisabledForced=s||o.uiDisabledInThisLanguage||this.formReadOnly,o.uiDisabled=o.uiDisabledForced||o.Disabled,o.DisableAutoTranslation=a.settingsInitial.DisableAutoTranslation||o.DisableTranslation;const p=a.logic?.update({fieldName:this.fieldName,settings:o,value:t,tools:this.fieldLogicTools})??o;return n.r(p)}#e(){this.log.fnIfInFields("schemaDisablesTranslation",this.fieldName);const t=this.contentTypeMetadata,n=this.constantFieldPart.inputTypeConfiguration,a=this.attributeValues,s=this.attribute.Metadata;if(t.find(p=>"LanguagesDecorator"===p.Type.Name)?.Attributes.Enabled?.Values.some(p=>!1===p.value)||n?.DisableI18n||!new Re.U(a,this.language).hasPrimary)return!0;for(const p of s??[])if(p.Attributes.DisableTranslation?.Values.some(x=>!0===x.value))return!0;return!1}#t(o){const t=this.log.fnIfInFields("getDisabledBecauseTranslations",this.fieldName),n=this.attributeValues,a=this.language;if(a.current===a.primary)return t.r(!1,"enabled, primary language");const s=new Re.U(n,a);return o?t.r(!0,"disabled, disableTranslation"):s.hasPrimary?s.hasEditableValues?t.r(!1,"disabled, has editable value"):t.r(!0,s.hasCurrentReadonly?"enabled, has readonly value":"enabled, no rule applies"):t.r(!0,"disabled, no value on primary")}}var na=g(6953);class ia{constructor(o,t){this.contentType=o,this.slotIsEmpty=t,this.log=(0,f.Tq)({FieldsValuesModifiedHelper:ia})}getValueUpdates(o,t,n,a){const s=this.contentType(),c=this.slotIsEmpty();a??=o.values;const p=o.fieldProps,x=this.log.fn("getValueUpdates",{contentType:s,originalValues:a,fieldsProps:p,valueUpdates:n,valueUpdatesFromSideEffects:t,slotIsEmpty:c});if(c)return x.r({},"Slot is empty, exit early");const G=s.Attributes.map(ie=>({name:ie.Name,original:a[ie.Name]})).filter(ie=>void 0!==ie.original&&!p[ie.name]?.settings.uiDisabledForced).map(ie=>({...ie,value:this.#e(ie.name,t,n)})).filter(ie=>void 0!==ie.value&&!na.$.fieldValuesAreEqual(ie.original,ie.value)).reduce((ie,ae)=>(ie[ae.name]=ae.value,ie),{});return x.rSilent(G)}#e(o,t,n){const a=t.filter(c=>c.name===o),s=a[a.length-1]?.value;return s??n[o]}}const Io={all:!1,init:!0,getPickers:!0};let Mo=(()=>{class i{#e;#t;#n;#i;#a;#s;#r;#o;constructor(){this.log=(0,f.Tq)({FieldsPropsEngine:i},Io),this.#e=(0,r.WQX)(y.S),this.#t=(0,r.WQX)(K.B),this.#n=(0,r.WQX)(Vt),this.#i=(0,r.WQX)(B.k),this.#a=(0,r.WQX)(I.b),this.#s=(0,le.d)(ko),this.#r=(0,le.d)(co),this.formulaEngine=(0,le.d)(go),this.formulaPromises=(0,le.d)(_o)}init(t,n,a,s,c,p,x,O=null){this.log.extendName(`[${n.substring(0,8)}]`);const G=this.log.fnIf("init",{entityGuid:n,item:a,contentType:s,reader:c,forceDebug:O});null!=O&&this.log.forceEnable(O),this.item=a,this.languages=c(),this.#o=x;const ie=this.#a.slotIsEmpty(n),ae=s();return this.pickerData=this.#r.createPickersForAttributes(ae.Attributes),G.a("Pickers created",this.pickerData),this.#d=this.#s.init(a,ae,c,p,t).stableDataOfLanguage(),this.#l=this.#p(c,ae,ie),this.modifiedChecker=new ia(s,ie),this.formulaPromises.init(n,s,t,this.modifiedChecker),this.formulaEngine.init(n,a.Header,t,this.formulaPromises,ae,t.contentTypeSettings()._itemTitle),this.#c=this.#a.itemAttributesSignal(n),this}#l;#d;#c;getLatestSettingsAndValues(t){this.log.fn("getLatestSettingsAndValues");const a=this.#o.values();this.languages=this.#e.language();const s=this.#c(),c=this.#l(),p=this.#d();return this.cycle=new qi(this,a,t,s,c,p),this.cycle.getCycleSettingsAndValues().props}#p(t,n,a){return(0,Q.bo)("prepared-parts",()=>{const c=t(),p=c,x=this.#t.isDebug(),O=this.#n.readOnly(),G={eavConfig:this.#e.config,reader:c,debug:x,contentTypeItemSvc:this.#i};return new ea(n.Metadata,p,G,O.isReadOnly,a)})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();class aa{constructor(o){this.entityGuid=o,this.log=(0,f.Tq)({FieldsPropertiesUpdates:aa}),this.fieldPropsMixins={},this.log.extendName(`[${o.substring(0,8)}]`)}hasChanges(){return Object.keys(this.fieldPropsMixins).length>0}updateSetting(o,t,n,a){const s=0===Object.keys(this.fieldPropsMixins).length,c=this.log.fn("updateSetting",{source:n,fieldName:o,update:t,queueWasEmpty:s}),p=a()[o].settings,x={...p,...t};if((0,pn.A)(p,x))return c.end(`no change; entityGuid: ${this.entityGuid}; fieldName: ${o}`);this.fieldPropsMixins[o]={...this.fieldPropsMixins[o]??{},...t},c.end("added to queue",{before:p,after:x,update:t})}mergeMixins(o){const t=this.log.fn("mergeMixins",{before:o,mixins:this.fieldPropsMixins}),n=this.fieldPropsMixins;if(0===Object.keys(n).length)return o;const a=Object.keys(n).reduce((s,c)=>{const p=s[c],x=n[c];return{...s,[c]:{...p,settings:{...p.settings,...x}}}},o);return this.fieldPropsMixins={},t.r(a,"merged")}}const Po={all:!1,startSync:!0,filterRelevant:!0,transferPickerData:!0};class sa{constructor(){this.log=(0,f.Tq)({FieldSettingsPickerUpdater:sa},Po)}startSync(o){const t=this.log.fnIf("startSync",{source:o}),n=(0,Q.bo)("optsOnly",()=>this.#e(o(),"opts")),a=(0,Q.bo)("selOnly",()=>this.#e(o(),"sel"));(0,r.QZP)(()=>this.#t(n(),"opts")),(0,r.QZP)(()=>this.#t(a(),"sel")),t.end()}#e(o,t){if(!o)return[];const n=Object.entries(o).filter(([s,c])=>c[t]?.list).map(([s,c])=>({field:s,list:c[t].list,pickerData:c.constants.pickerData}));return this.log.fnIf("filterRelevant",{count:n.length,toTransfer:n},t).rSilent(n)}#t(o,t){if(!o.length)return;const n=this.log.fnIf("transferPickerData",{count:o.length,toTransfer:o},`\u{1f9ea}\u{1f501}${t}`);for(const{field:a,list:s,pickerData:c}of o){n.a("Transfer",{field:a,list:s});const p=c();("opts"==t?p.optionsOverride:p.selectedOverride).set(s)}}}var ra=g(23151),Do=g(45839),Fo=g(49934),Oo=g(92484),Ao=g(14138),Ro=g(32549),Lo=g(19247),Vo=g(3101),zo=g(68104),No=g(69913);const Uo={logChanges:!1};let $o=(()=>{class i{constructor(t){if(this.itemSvc=t,this.log=(0,f.Tq)({FieldsSignalsHelper:i},Uo),this.#t=(0,Q.KX)("itemGuid",null),this.#n=(0,Q.KX)("attributesLazy",null),this.log.specs.logChanges){const n=(0,f.Tq)("FieldValues");n.a("will log value changes");let a={};(0,r.QZP)(()=>{const s=this.#t();if(!s)return n.a("no guid");const c=this.values(),p=function Go(i,o){return function t(n,a){return function jo(i,o,t){var n=(0,Lo.A)(i),a=n||(0,Vo.A)(i)||(0,No.A)(i);if(o=(0,Ao.A)(o,4),null==t){var s=i&&i.constructor;t=a?n?new s:[]:(0,ra.A)(i)&&(0,zo.A)(s)?(0,Fo.A)((0,Ro.A)(i)):{}}return(a?Do.A:Oo.A)(i,function(c,p,x){return o(t,c,p,x)}),t}(n,function(s,c,p){(0,pn.A)(c,a[p])||(s[p]=(0,ra.A)(c)&&(0,ra.A)(a[p])?t(c,a[p]):c)})}(i,o)}(c,a);a=c,n.a(`changed on guid: ${s}`,p)})}}#e;#t;init(t,n){this.#t.set(t),this.#s=new qe.K(t),this.#e=n;const a=this.itemSvc.itemAttributesSignal(t);return null==a&&console.error("item-entity-attributes is null"),this.#n.set(a),this}#n;get values(){const t=this.log.fn("get-values",{itemGuid:this.#t});if(null!=this.#i)return t.rSilent(this.#i,"cached");const n=this.#a();return this.#i=n,t.rSilent(this.#i,"generated")}#i;#a(){return(0,Q.bo)(`${this.#t().substring(0,8)}-ALL`,()=>{const n=this.log.fn("values"),a=this.#e(),s=this.#n();if(null==s)return n.r({},"attributes is null");const c=s();return c&&0!=Object.keys(c).length?a.currentValues(c):n.r({},"attributes is empty")})}get(t){const n=this.log.fn("get",{field:t}),a=this.#r(t);return n.rSilent(a)}#s;#r(t){const n=this.log.fn("#fieldValueOrNullSignal",{fieldName:t}),a=this.#s.getOrCreateWithInfo(t,()=>{const s=this.#n();if(null==s)return null;const c=s();if(!c||0==Object.keys(c).length)return null;const p=c[t],x=p?.Values;return null==x||0==x.length?null:this.#e().getBestValue(p)});return n.rSilent(a.signal,`isNew: ${a.isNew}`)}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(I.b))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const Ho={effectTransferPickerData:!0,regenerateProps:!0,type:"",activateAnalyzer:!1};let hn=(()=>{class i{#e;#t;#n;#i;#a;#s;#r;constructor(){this.log=(0,f.Tq)({FieldsSettingsService:i},Ho),this.#e=(0,r.WQX)(je.A),this.#t=(0,r.WQX)(y.S),this.#n=(0,r.WQX)(N.n),this.#i=(0,r.WQX)(I.b),this.#a=(0,le.d)(d.L),this.#s=(0,le.d)(Mo),this.#r=new sa,this.allProps=(0,Q.KX)("allProps",{}),this.#o=(0,r.vPA)(!1),this.#d=(0,Q.KX)("forceRefresh",0),this.#c=(0,Q.KX)("disabled",!1),this.#h=this.#e.getEntityReader(this.#t.config.formId),this.#f=(0,Q.bo)("labelReader",()=>{const n=this.#h(),a=this.#a.value(pt.a.Form);return a?new ce.bT({current:a,primary:n.primary}):n}),this.#u=(0,r.vPA)(null),this.#m=(0,Ne.EW)(()=>this.#u()?this.#n.getContentTypeOfItem(this.#u()):null),this.contentTypeSettings=(0,Ne.EW)(()=>this.#u()?ce.im.getDefaultSettings(this.#f(),this.#m(),this.#u().Header):null),this.#g=(0,le.d)($o),this.#y=new qe.K("field-props"),this.fieldProps=this.#y.buildProxy(n=>()=>this.allProps()[n]),this.#b=new qe.K("fields"),this.settings=this.#b.buildProxy(n=>()=>this.allProps()[n].settings),this.translationState=qe.K.proxy("transl-state",n=>()=>this.allProps()[n].translationState);const t=(0,Q.bo)("allPropsOrNull",()=>this.#o()&&this.#l());(0,r.QZP)(()=>{const n=t();n&&this.allProps.set(n)}),this.#r.startSync(t)}disableForCleanUp(){this.log.fn("cleanUp"),this.#c.set(!0)}#o;#l;#d;#c;#p;#h;#f;#u;#m;#g;init(t){const n=this.#i.get(t);this.#u.set(n),this.#p=new aa(t);const a=this.#m(),s=this.log.specs.type,c=null===s?null:a.Id===s;null!==c&&(this.log.a(`Set debug for content type '${a.Id}' to ${c}, only debugging ${s}`),this.log.forceEnable(c));const p=this.#i.slotIsEmpty(t);this.#g.init(t,this.#h),this.#s.init(this,t,n,this.#m,this.#h,this.#f,this.#g,c);const x={idMsg:`entityGuid: ${t}; contentTypeId: ${a.Id};`,cycle:0,disabled:this.#c,slotIsEmpty:p,slotWasEmpty:!1,forceRefresh:this.#d,watchRestart:(0,r.vPA)(0),prevFieldProps:{},hasRunOnce:!1};setInterval(()=>{x.cycle>10&&setTimeout(()=>(this.log.a(`restarting max cycles from ${x.cycle}; ${x.idMsg}`),x.watchRestart.update(O=>O+1)),500),x.cycle=0},250),this.#l=(0,Q.bo)("allFieldProps",()=>this.#v(x)),this.#o.set(!0)}#v(t){const n=this.log.fnIf("regenerateProps",{cycle:t.cycle,props:this.allProps},t.idMsg),a=t.slotIsEmpty();if((this.#c()||a&&a==t.slotWasEmpty)&&t.hasRunOnce)return n.r(t.prevFieldProps,"disabled or slotIsEmpty");if(t.hasRunOnce=!0,t.slotWasEmpty=a,this.#d(),t.cycle++>10){const x=`Max cycles reached, stopping for this second; cycle: ${t.cycle}; ${t.idMsg};`;return console.warn(x),t.watchRestart(),n.r(t.prevFieldProps,x)}const c=this.#p.hasChanges()?this.#p.mergeMixins(t.prevFieldProps):t.prevFieldProps,p=this.#s.getLatestSettingsAndValues(c);return t.prevFieldProps=p,n.rSilent(p,"normal update")}#y;#b;retriggerFormulas(t){this.log.fn("retriggerFormulas",{source:t}),this.#d.update(n=>n+1)}updateSetting(t,n,a){this.#p.updateSetting(t,n,a,this.allProps),setTimeout(()=>this.retriggerFormulas("updateSetting"),10)}get pickerData(){return this.#s.pickerData}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var _n=g(50052),ni=g(79868),Qo=g(69765);class oa{constructor(o){this.getFieldsProps=o,this.log=(0,f.Tq)({FieldTranslationInfo:oa})}get#e(){return this.#t??=this.getFieldsProps().settings}#t;get isAutoTranslatable(){return!this.DisableTranslation&&!this.DisableAutoTranslation}get notForAutoTranslateBecauseOfType(){return!this.DisableTranslation&&this.autoTranslateIsDisabledByTypeButNotByConfig()}get DisableTranslation(){return this.#e.DisableTranslation}get DisableAutoTranslation(){return this.#e.DisableAutoTranslation}autoTranslateIsDisabledByTypeButNotByConfig(){return!this.DisableAutoTranslation&&!xe.a.singleton().get(this.getFieldsProps().constants.inputTypeSpecs.inputType).canAutoTranslate}}var Ko=g(50698);const Jo={all:!0,constructor:!1,init:!0,unlock:!0,lock:!0,getInfo:!0,autoTranslate:!0,findAutoTranslatableFields:!0,addItemAttributeValueHelper:!0};let En=(()=>{class i{#e;constructor(t,n,a,s,c,p,x){this.http=t,this.itemService=n,this.formConfig=a,this.contentTypeService=s,this.fieldsSettingsService=c,this.snackBar=p,this.translate=x,this.log=(0,f.Tq)({FieldsTranslateService:i},Jo),this.updater=this.itemService.updater,this.log.fnIf("constructor")}init(t){const n=this.log.fnIf("init");this.#t=t;const a=this.itemService.get(t);this.#n=Qo.i.getContentTypeNameId(a),this.#e=this.itemService.itemAttributesSignal(t),n.end("",{entityGuid:t,contentTypeId:this.#n})}#t;#n;unlock(t,n=!1,a){const s=this.log.fnIf("unlock",{fieldName:t,isTransaction:n,transactionItem:a});if(this.#i(t).DisableTranslation)return s.rNull("Translation is disabled for this field.");const c=this.formConfig.language();a=this.updater.removeItemAttributeDimension(this.#t,t,c.current,n,a);const p=this.#e()[t],x=null!=new Re.U(p,c).currentEditable,G=new Re.U(p,ni.N.bothPrimary(c)).current;return x?s.rNull():s.r(this.#a(t,G.value,c.current,!1))}lock(t,n=!1,a){const s=this.log.fnIf("lock",{fieldName:t,isTransaction:n,transactionItem:a});if(this.#i(t).DisableTranslation)return s.rNull("Translation is disabled for this field.");const c=this.formConfig.language();return this.updater.removeItemAttributeDimension(this.#t,t,c.current,n,a)}toggleUnlockOnAll(t){const n=this.findTranslatableFields();if(0===n.length)return this.showMessageNoTranslatableFields(!1);let a;for(const s of n){const c=s!==n[n.length-1];a=t?this.unlock(s,c,a):this.lock(s,c,a)}}showMessageNoTranslatableFields(t){const n=this.translate.instant("LangMenu.NoAutoTranslatableFieldsFound".replace("Auto",t?"Auto":""));this.snackBar.open(n,null,{duration:2e3})}autoTranslate(t,n,a=!1,s=!1){this.log.fnIf("autoTranslate",{fieldNames:t,autoTranslateLanguageKey:n,isMany:a,areAllChecksKnown:s});const p=this.formConfig.settings.Values[_n.Ox.GoogleTranslate];p.IsDemo&&alert("This translation is a demo. Please provide your own Google Translate API key in the EAV configuration.");const x=this.formConfig.language(),O=this.#e(),G=(t=t.filter(ae=>!this.#i(ae).DisableTranslation)).map(ae=>new Re.U(O[ae],n).currentEditable.value);s||t.forEach((ae,ke)=>{const Je=G[ke],rt=this.#i(ae).autoTranslateIsDisabledByTypeButNotByConfig();(null==Je||""===Je||rt)&&this.unlock(ae)}),this.http.post(`https://translation.googleapis.com/language/translate/v2?key=${p.ApiKey}`,{q:G,target:x.current,source:n}).subscribe(ae=>{const ke=t.map(Je=>null!=new Re.U(O[Je],x).currentEditable);ae.data.translations.forEach((Je,rt)=>{const st=document.createElement("textarea");st.innerHTML=Je.translatedText;const It=ke[rt];!a&&It?this.updater.updateItemAttributeValue(this.#t,t[rt],st.value,x,!1):It||this.#a(t[rt],st.value,x.current,!1)})})}copyFrom(t,n){if(this.#i(t).DisableTranslation)return;const s=this.#e()[t],c=this.formConfig.language(),p=new Re.U(s,c),x=p.ofLanguage(ni.N.diffCurrent(c,n));x?s&&p.isEditableOrReadonlyTranslationExist()?this.updater.updateItemAttributeValue(this.#t,t,x.value,c,!1):this.#a(t,x.value,c.current,!1):this.log.a(`${c.current}: Cant copy value from ${n} because that value does not exist.`)}linkReadOnly(t,n){this.linkToOtherField(t,n,!0)}linkReadWrite(t,n){return this.linkToOtherField(t,n,!1)}linkToOtherField(t,n,a){if(this.#i(t).DisableTranslation)return;const s=this.formConfig.language(),c=this.updater.removeItemAttributeDimension(this.#t,t,s.current,!0);this.updater.addItemAttributeDimension(this.#t,t,s.current,n,s.primary,a,c)}autoTranslateMany(t){const n=this.#e(),a=[],s=this.findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault();this.findAutoTranslatableFields().filter(x=>!s.includes(x)).forEach(x=>{const O=new Re.U(n[x],t).currentEditable?.value;""!==O&&null!=O&&void 0!==O&&a.push(x)}),this.autoTranslate(a,t,!0,!0),s.forEach(x=>{this.unlock(x,!1,void 0)})}findTranslatableFields(){const t=this.#e();return Object.keys(t).filter(n=>!this.#i(n).DisableTranslation)}findAutoTranslatableFields(){const t=this.#e(),n=Object.keys(t).filter(a=>this.#i(a).isAutoTranslatable);return this.log.fnIf("findAutoTranslatableFields",{attributes:t,result:n}),n}#i(t){const n=new oa(()=>this.fieldsSettingsService.fieldProps[t]());return this.log.fnIf("getInfo",{fieldName:t,ti:n}),n}findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault(){const t=this.#e();return Object.keys(t).filter(n=>this.#i(n).notForAutoTranslateBecauseOfType)}#a(t,n,a,s){const c=this.log.fnIf("addItemAttributeValueHelper",{fieldName:t,value:n,currentLanguage:a,isReadOnly:s}),p=this.contentTypeService.getAttribute(this.#n,t),x=this.updater.addItemAttributeValue(this.#t,t,n,a,s,p.Type);return c.r(x)}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(Ko.Qq),r.KVO(I.b),r.KVO(y.S),r.KVO(N.n),r.KVO(hn),r.KVO(Se.UG),r.KVO(ue.c$))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Tn=g(19999),zn=g(91817);let qo=(()=>{class i extends ft.V{constructor(t,n,a,s){super(),this.entityFormSvc=t,this.formsStateSvc=n,this.formConfig=a,this.itemSvc=s,this.log=(0,f.Tq)({EntityFormSyncService:i})}setupSync(t){const n=this.entityFormSvc.formGroup;this.subscriptions.add(n.valueChanges.pipe((0,C.T)(()=>n.dirty),(0,fe.Z)(n.dirty)).subscribe(c=>{this.formsStateSvc.setFormDirty(t,c)}));const a=n.valueChanges.pipe((0,C.T)(()=>!n.invalid),(0,fe.Z)(!n.invalid),(0,Qe.J)(c=>c)),s=this.itemSvc.getItemHeader$(t);this.subscriptions.add((0,Tn.z)([a,s]).pipe((0,Qe.J)(([c,p])=>p?.IsEmpty||c)).subscribe(c=>{this.formsStateSvc.setFormValid(t,c)})),this.subscriptions.add(n.valueChanges.pipe((0,C.T)(()=>n.getRawValue()),(0,zn.F)((c,p)=>null==na.$.getItemValuesChanges(c,p))).subscribe(c=>{const p=this.formConfig.language();this.itemSvc.updater.updateItemAttributesValues(t,c,p)}))}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(Ce),r.KVO(Vt),r.KVO(y.S),r.KVO(I.b))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Nn=g(86571),e=g(36124),Pt=g(84175),dt=g(53777),In=g(8827),el=g(23840),At=g(34601),Mn=g(69914),on=g(75797),Et=g(24398);g(22256);const ks="FieldMetadata";function Wt(i){return o=>{Reflect.defineMetadata(ks,i,o)}}var Gt=g(24950);let la=(()=>{class i{#e="_blank";#t;#n;constructor(t,n){this.zone=n,this.#t=t.nativeElement}ngOnInit(){this.zone.runOutsideAngular(()=>{this.#i(),this.#n=new MutationObserver(t=>{this.#i()}),this.#n.observe(this.#t,{attributes:!0,childList:!0,subtree:!0})})}ngOnDestroy(){this.zone.runOutsideAngular(()=>this.#n.disconnect())}#i(){if("a"===this.#t.nodeName.toLocaleLowerCase()){const n=this.#t;n.target!==this.#e&&(n.target=this.#e)}const t=this.#t.getElementsByTagName("a");for(const n of Array.from(t))n.target!==this.#e&&(n.target=this.#e)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(e.aKT),e.rXU(r.SKi))}}static{this.\u0275dir=e.FsC({type:i,selectors:[["","appChangeAnchorTarget",""]]})}}return i})();var wt=g(80423);const tl=(i,o,t)=>({"my-last-field":i,"my-hyperlink-wrapper-fix":o,"small-gap":t}),nl=i=>({disabled:i});function il(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-hint",4),e.bIt("click",function(a){r.eBV(t);const s=e.XpG(2);return r.Njj(s.toggleHint(a))}),e.nrm(1,"div",5),e.nI1(2,"safeHtml"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(5,nl,t.disabled())),e.R7$(),e.Y8G("ngClass",t.showExpand?"expandable":"")("innerHtml",e.bMT(2,3,t.notes()),e.npT)}}function al(i,o){if(1&i&&(e.j41(0,"mat-error",2),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,o,t.settings()))}}function sl(i,o){1&i&&(e.j41(0,"mat-error",3),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,o)))}function rl(i,o){if(1&i&&(e.j41(0,"div",0),e.nVh(1,il,3,7,"mat-hint",1),e.nVh(2,al,3,4,"mat-error",2),e.nVh(3,sl,3,3,"mat-error",3),e.k0s()),2&i){let t,n;const a=e.XpG();e.Y8G("ngClass",e.sMw(4,tl,a.fieldState.config.isLastInGroup,a.hyperlinkDefaultWrapperFix()&&!a.fieldState.config.isLastInGroup,a.smallGap())),e.R7$(),e.vxM(a.notes()?1:-1),e.R7$(),e.vxM((t=a.showErrors()&&a.errorMessage())?2:-1,t),e.R7$(),e.vxM((n=!a.disableError()&&a.warningMessage())?3:-1,n)}}let Xt=(()=>{class i{constructor(){this.disableError=(0,Y.hFB)(!1),this.hyperlinkDefaultWrapperFix=(0,Y.hFB)(!1),this.flatIfEmpty=(0,Y.hFB)(!1),this.smallGap=(0,Y.hFB)(!1),this.fieldState=(0,r.WQX)(it.W),this.settings=this.fieldState.settings,this.#e=(0,Q.bo)("invalid",()=>this.fieldState.ui().invalid),this.disabled=(0,Q.bo)("disabled",()=>this.fieldState.ui().disabled),this.showErrors=(0,Q.bo)("showErrors",()=>this.#e()&&!this.disableError()),this.notes=(0,Q.bo)("notes",()=>(this.settings().Notes??"").replace(/<p>/g,`<p _ngcontent-ng-${this.componentId}>`)),this.isEmpty=(0,Q.bo)("isEmpty",()=>!this.notes()&&!this.showErrors()),this.errorMessage=(0,Q.bo)("errorMessage",()=>(this.fieldState.uiValue(),this.fieldState.ui().getErrors())),this.warningMessage=(0,Q.bo)("warningMessage",()=>this.fieldState.ui().getWarnings()),this.show=(0,Q.bo)("show",()=>!this.isEmpty()||this.warningMessage()||!this.flatIfEmpty()),this.showExpand=!0,this.componentId=this.constructor.\u0275cmp.id}#e;toggleHint(t){let n=t.target;if("a"!==n.nodeName.toLocaleLowerCase()){for(;n&&n.classList&&!n.classList.contains("id-notes-container");)if(n=n.parentNode,!n||"a"===n.nodeName.toLocaleLowerCase())return;this.showExpand=!this.showExpand}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-field-helper-text"]],inputs:{disableError:[1,"disableError"],hyperlinkDefaultWrapperFix:[1,"hyperlinkDefaultWrapperFix"],flatIfEmpty:[1,"flatIfEmpty"],smallGap:[1,"smallGap"]},decls:1,vars:1,consts:[[1,"my-main",3,"ngClass"],[1,"my-notes",3,"ngClass"],[1,""],[1,"warning"],[1,"my-notes",3,"click","ngClass"],["appChangeAnchorTarget","",1,"id-notes-container",3,"ngClass","innerHtml"]],template:function(n,a){1&n&&e.nVh(0,rl,4,8,"div",0),2&n&&e.vxM(a.show()?0:-1)},dependencies:[Ue.YU,Gt.RG,wt.MV,wt.TL,la,ue.h,ue.D9,Mn.$],styles:[".my-main[_ngcontent-%COMP%]{padding:.5em 0 13px;font-size:12px}.my-main.small-gap[_ngcontent-%COMP%]{padding-bottom:0}.my-main.my-hyperlink-wrapper-fix[_ngcontent-%COMP%]{min-height:22px}.my-main.my-last-field[_ngcontent-%COMP%]{padding:.5em 0 5px}.my-main.input-invalid[_ngcontent-%COMP%]{padding:6px 12px 11px;border:2px;border-bottom-style:solid;border-color:#b00030}.mat-mdc-form-field-error.warning[_ngcontent-%COMP%]{color:#ffc107}.my-notes[_ngcontent-%COMP%]{color:#1d273d80;display:flex}.my-notes.disabled[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1d273d40}.my-notes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{margin:0}.my-notes[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-height:16px}.my-notes[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;display:block;margin:0;padding:0}"]})}}return i})(),Ss=(()=>{class i{constructor(){this.fieldState=(0,r.WQX)(it.W),this.group=this.fieldState.group,this.ui=this.fieldState.ui,this.uiValue=this.fieldState.uiValue,this.settings=this.fieldState.settings,this.basics=this.fieldState.basics,this.changedLabel=this.fieldState.settingExt("_label")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-boolean-base"]],decls:0,vars:0,template:function(n,a){},encapsulation:2})}}return i})();var mt=g(97568);class ii extends mt.L{constructor(){super({BooleanDefaultSettingsHelper:ii}),this.name=Ye.u.BooleanDefault}update({settings:o,value:t}){const n={...o};return n.ReverseToggle??=!1,n._label=this.#e(t,n),n}#e(o,t){return!0===o&&t.TitleTrue?t.TitleTrue:!1===o&&t.TitleFalse?t.TitleFalse:t.Name}}mt.L.add(ii);let ca=class ls extends Ss{constructor(){super(),this.checkedState=(0,Q.bo)("checkedState",()=>{const o=this.uiValue();return this.settings().ReverseToggle?!o:o}),ii.importMe()}updateValue(){this.ui().disabled||this.fieldState.ui().setIfChanged(!this.uiValue())}static{this.\u0275fac=function(t){return new(t||ls)}}static{this.\u0275cmp=e.VBU({type:ls,selectors:[["boolean-default"]],features:[e.Vt3],decls:6,vars:7,consts:[[3,"formGroup"],[1,"eav-toggle-hitbox",3,"click"],[3,"checked","disabled","ngClass"],[1,"eav-slide-toggle-label",3,"ngClass"],[3,"disableError"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1),e.bIt("click",function(){return n.updateValue()}),e.nrm(2,"mat-slide-toggle",2),e.j41(3,"span",3),e.EFF(4),e.k0s()(),e.nrm(5,"app-field-helper-text",4),e.k0s()),2&t&&(e.Y8G("formGroup",n.group),e.R7$(2),e.Y8G("checked",n.checkedState())("disabled",n.ui().disabled)("ngClass",n.uiValue()?"":"changeable-label-mat-slide-toggle"),e.R7$(),e.Y8G("ngClass",n.uiValue()?"":"eav-toggle-label"),e.R7$(),e.SpI(" ",n.changedLabel()??n.basics().label," "),e.R7$(),e.Y8G("disableError",!0))},dependencies:[ne.YN,ne.cb,ne.X1,ne.j4,In.mV,In.sG,Ue.YU,Xt],styles:["[_nghost-%COMP%]     .changeable-label-mat-slide-toggle.mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked:not(.mat-disabled) .mdc-switch__shadow{background-color:#0088f4}[_nghost-%COMP%]     .changeable-label-mat-slide-toggle.mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked:not(.mat-disabled) .mdc-switch__track:after{background-color:#7fc3f9!important}[_nghost-%COMP%]     .changeable-label-mat-slide-toggle.mat-mdc-slide-toggle:not(.mat-mdc-slide-toggle-checked):not(.mat-disabled) .mdc-switch__shadow{background-color:#7fc3f9}[_nghost-%COMP%]     .changeable-label-mat-slide-toggle.mat-mdc-slide-toggle:not(.mat-mdc-slide-toggle-checked):not(.mat-disabled) .mdc-switch__track:before{background-color:#bfe1fc!important}.eav-slide-toggle-label[_ngcontent-%COMP%]{margin-left:8px}.eav-toggle-hitbox[_ngcontent-%COMP%]{width:fit-content;cursor:pointer}.eav-toggle-label[_ngcontent-%COMP%]{color:gray;cursor:default}"]})}};ca=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[])],ca);class ai extends mt.L{constructor(){super({BooleanTristateSettingsHelper:ai}),this.name=Ye.u.BooleanTristate}update({settings:o,value:t}){const n={...o};return n.ReverseToggle??=!1,n._label=this.#e(t,n),n}#e(o,t){return!0===o&&t.TitleTrue?t.TitleTrue:!1===o&&t.TitleFalse?t.TitleFalse:!o&&t.TitleIndeterminate?t.TitleIndeterminate:t.Name}}mt.L.add(ai);const ol=(i,o,t,n)=>({"toggle-false":i,"toggle-true":o,"toggle-null":t,"changeable-label-tristate-mat-slide-toggle":n});let da=class cs extends Ss{constructor(){super(),this.fs=this.fieldState,this.checkedState=(0,Q.bo)("checkedState",()=>{const o=this.fs.uiValue();return this.settings().ReverseToggle?!0!==o&&(!1===o||o):""===o?null:o}),this.bestLabel=(0,Q.bo)("bestLabel",()=>{const o=this.checkedState(),t=this.settings();return!0===o&&t.TitleTrue?t.TitleTrue:!1===o&&t.TitleFalse?t.TitleFalse:null===o&&t.TitleIndeterminate?t.TitleIndeterminate:t.Name}),ai.importMe()}updateValue(o){o||this.fieldState.ui().setIfChanged(this.#e())}#e(){const o=this.fs.uiValue(),t=this.settings().ReverseToggle;switch(o){case!1:return!!t||null;case!0:return!!t&&null;case"":case null:return!t}}static{this.\u0275fac=function(t){return new(t||cs)}}static{this.\u0275cmp=e.VBU({type:cs,selectors:[["boolean-tristate"]],features:[e.Vt3],decls:6,vars:12,consts:[[3,"formGroup"],[1,"eav-toggle-hitbox",3,"click"],[3,"checked","disabled","ngClass"],[1,"eav-slide-toggle-label",3,"ngClass"],[3,"disableError"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1),e.bIt("click",function(){return n.updateValue(n.ui().disabled)}),e.nrm(2,"mat-slide-toggle",2),e.j41(3,"span",3),e.EFF(4),e.k0s()(),e.nrm(5,"app-field-helper-text",4),e.k0s()),2&t&&(e.Y8G("formGroup",n.group),e.R7$(2),e.Y8G("checked",n.checkedState())("disabled",n.ui().disabled)("ngClass",e.ziG(7,ol,!1===n.checkedState(),!0===n.checkedState(),null===n.checkedState(),n.changedLabel()!==n.basics().label)),e.R7$(),e.Y8G("ngClass",n.checkedState()?"":"eav-toggle-label"),e.R7$(),e.SpI(" ",n.changedLabel()??n.basics().label," "),e.R7$(),e.Y8G("disableError",!0))},dependencies:[ne.YN,ne.cb,ne.X1,ne.j4,In.mV,In.sG,Ue.YU,Xt],styles:["[_nghost-%COMP%]     .toggle-true.changeable-label-tristate-mat-slide-toggle.mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked:not(.mat-disabled) .mdc-switch__shadow{background-color:#0088f4}[_nghost-%COMP%]     .toggle-true.changeable-label-tristate-mat-slide-toggle.mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked:not(.mat-disabled) .mdc-switch__track:after{background-color:#7fc3f9}[_nghost-%COMP%]     .toggle-false.changeable-label-tristate-mat-slide-toggle.mat-mdc-slide-toggle:not(.mat-mdc-slide-toggle-checked):not(.mat-disabled) .mdc-switch__shadow{background-color:#7fc3f9!important}[_nghost-%COMP%]     .toggle-false.changeable-label-tristate-mat-slide-toggle.mat-mdc-slide-toggle:not(.mat-mdc-slide-toggle-checked):not(.mat-disabled) .mdc-switch__track:before{background-color:#bfe1fc!important}[_nghost-%COMP%]     .toggle-null.changeable-label-tristate-mat-slide-toggle.mat-mdc-slide-toggle:not(.mat-mdc-slide-toggle-checked):not(.mat-disabled) .mdc-switch__shadow{background-color:#7fc3f9}[_nghost-%COMP%]     .toggle-null.changeable-label-tristate-mat-slide-toggle.mat-mdc-slide-toggle:not(.mat-mdc-slide-toggle-checked):not(.mat-disabled) .mdc-switch__track:before{background-image:linear-gradient(to right,#7fc3f9,#bfe1fc)!important}[_nghost-%COMP%]     .toggle-null .mdc-switch__handle{margin-left:8px!important}.eav-slide-toggle-label[_ngcontent-%COMP%]{margin-left:8px}.eav-toggle-hitbox[_ngcontent-%COMP%]{width:fit-content;cursor:pointer}.eav-toggle-label[_ngcontent-%COMP%]{color:gray;cursor:default}"]})}};da=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[])],da);let si=class ds{constructor(){this.fieldState=(0,r.WQX)(it.W),this.config=this.fieldState.config}static{this.\u0275fac=function(t){return new(t||ds)}}static{this.\u0275cmp=e.VBU({type:ds,selectors:[["custom-default"]],decls:4,vars:1,consts:[[1,"message"]],template:function(t,n){1&t&&(e.rj2(0,"div",0),e.EFF(1),e.rj2(2,"code"),e.EFF(3,"string-custom-name"),e.eux()()),2&t&&(e.R7$(),e.SpI(" ",n.config.fieldName,": Field configuration is incomplete and should be fixed. If this is a custom field, the JS is probably not loading and/or not creating the correct custom tag such as "))},styles:[".message[_ngcontent-%COMP%]{padding:16px}"]})}};si=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[])],si);var ll=g(63255);class jn extends mt.L{constructor(){super({CustomJsonEditorSettingsHelper:jn}),this.name=Ye.u.CustomJsonEditor}update({settings:o}){const t={...o};return t.Rows||=5,t.JsonValidation||="strict",t.JsonSchemaMode||="none",t.JsonSchemaSource||="link",t.JsonSchemaUrl??="",t.JsonSchemaRaw??="",t.JsonCommentsAllowed??=!1,t}}mt.L.add(jn);class Es extends jn{constructor(){super(...arguments),this.name=Ye.u.StringJson}}mt.L.add(Es);const cl=(i,o,t)=>({disabled:i,focused:o,error:t}),dl=i=>({height:i});function ul(i,o){if(1&i&&e.nrm(0,"input",3),2&i){const t=e.XpG();e.Y8G("placeholder",t.basics().placeholder)}}let ri=class us{#e;#t;#n;#i;constructor(o){this.formConfig=o,this.#e=(0,r.WQX)(it.W),this.#t=this.#e.config,this.ui=this.#e.ui,this.uiValue=this.#e.uiValue,this.basics=this.#e.basics,this.#n=this.#e.settings,this.#i=this.#e.settingExt("Rows"),this.focused=(0,Ne.EW)(()=>this.#t.focused$),this.editorHeight=(0,Ne.EW)(()=>this.#i()*this.monacoOptions.lineHeight+"px"),this.jsonSchema=(0,Ne.EW)(()=>{const t=this.#n();return"none"===t.JsonSchemaMode?void 0:{type:t.JsonSchemaSource,value:"link"===t.JsonSchemaSource?t.JsonSchemaUrl:t.JsonSchemaRaw}}),this.jsonComments=(0,Ne.EW)(()=>this.#n().JsonCommentsAllowed?"ignore":"error"),this.monacoOptions={minimap:{enabled:!1},lineHeight:19,lineNumbers:"off",lineDecorationsWidth:0,folding:!1,scrollBeyondLastLine:!1,tabSize:2,fixedOverflowWidgets:!0},jn.importMe(),Es.importMe()}ngOnInit(){this.filename=`${this.#t.fieldName} ${this.#t.entityGuid} ${this.formConfig.config.formId}.json`}codeChanged(o){this.ui().setIfChanged(o)}onFocused(){this.#t.focused$.next(!0)}onBlurred(){this.ui().markTouched(),this.#t.focused$.next(!1)}static{this.\u0275fac=function(t){return new(t||us)(e.rXU(y.S))}}static{this.\u0275cmp=e.VBU({type:us,selectors:[["custom-json-editor"]],decls:6,vars:16,consts:[[1,"json-field",3,"ngClass"],[1,"label"],[1,"editor",3,"valueChanged","focused","blurred","filename","ngStyle","value","options","jsonSchema","jsonComments"],[1,"placeholder","eav-translate-on-dblclick",3,"placeholder"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"mat-label",1),e.EFF(2),e.k0s(),e.j41(3,"app-monaco-editor",2),e.bIt("valueChanged",function(s){return n.codeChanged(s)})("focused",function(){return n.onFocused()})("blurred",function(){return n.onBlurred()}),e.k0s(),e.nVh(4,ul,1,1,"input",3),e.k0s(),e.nrm(5,"app-field-helper-text")),2&t&&(e.Y8G("ngClass",e.sMw(10,cl,n.ui().disabled,n.focused().value,n.ui().touchedAndInvalid)),e.R7$(2),e.Lme("",n.basics().label," ",n.basics().required?"*":""),e.R7$(),e.Y8G("filename",n.filename)("ngStyle",e.eq3(14,dl,n.editorHeight()))("value",n.uiValue())("options",n.monacoOptions)("jsonSchema",n.jsonSchema())("jsonComments",n.jsonComments()),e.R7$(),e.vxM(!n.uiValue()&&n.basics().placeholder?4:-1))},dependencies:[Ue.YU,Gt.RG,wt.nJ,ll.K,Ue.B3,Xt],styles:[".json-field[_ngcontent-%COMP%]{padding-top:28px;border-bottom:1px solid rgba(0,0,0,.2);padding-bottom:12px;position:relative}.json-field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:#0009;cursor:default;font-size:12px;transition:none;position:absolute;left:0;top:0;-webkit-user-select:none;user-select:none}.json-field[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{position:absolute;top:28px;left:64px;border:none;background:transparent;outline:none;width:calc(100% - 112px);font-family:inherit;overflow:hidden;text-overflow:ellipsis;pointer-events:none}.json-field[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]     .monaco-editor .scroll-decoration{display:none}.json-field[_ngcontent-%COMP%]:hover{border-bottom:2px solid rgba(0,0,0,.4);padding-bottom:11px}.json-field.focused[_ngcontent-%COMP%]{border-bottom:2px solid #002753;padding-bottom:11px}.json-field.focused[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#002753}.json-field.error[_ngcontent-%COMP%]{border-bottom:2px solid #b00030;padding-bottom:11px}.json-field.error[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#b00030}.json-field.disabled[_ngcontent-%COMP%]{border-bottom:none;padding-bottom:13px;background-image:linear-gradient(to right,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 33%,transparent 0%);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.json-field.disabled[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]{pointer-events:none}.json-field.disabled[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]     *{color:#00000061}"]})}};ri=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[y.S])],ri);var oi=g(61977),Ut=g(59791),ua=g(43433),pa=g(65637),pl=g(9168),li=g(68310),mn=g(97552),ha=g(74879),hl=g(77022),ml=g(26306),ci=g(2261),Is=g(87432),Pn=g(96462),Ms=g(95722),qt=g(55326);const fl=["panelTemplate"],gl=(i,o)=>o.value;function vl(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-option",3),e.bIt("onSelectionChange",function(a){r.eBV(t);const s=e.XpG(2);return r.Njj(s._selectValue(a.source))}),e.EFF(1),e.k0s()}if(2&i){const t=o.$implicit;e.Y8G("value",t.value),e.R7$(),e.JRh(t.label)}}function yl(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",1),e.bIt("animationend",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s._handleAnimationEnd(a))}),e.Z7z(1,vl,2,2,"mat-option",2,gl),e.k0s()}if(2&i){const t=e.XpG();e.AVh("mat-timepicker-panel-animations-enabled",!t._animationsDisabled)("mat-timepicker-panel-exit",!t.isOpen()),e.Y8G("id",t.panelId),e.BMQ("aria-label",t.ariaLabel()||null)("aria-labelledby",t._getAriaLabelledby()),e.R7$(),e.Dyx(t._timeOptions)}}const bl=[[["","matTimepickerToggleIcon",""]]],_l=["[matTimepickerToggleIcon]"];function xl(i,o){1&i&&(r.qSk(),e.j41(0,"svg",1),e.nrm(1,"path",2),e.k0s())}const Cl=/^(\d*\.?\d+)\s*(h|hour|hours|m|min|minute|minutes|s|second|seconds)?$/i,Ps=new r.nKC("MAT_TIMEPICKER_CONFIG");function Ds(i){let o;if(null===i)return null;if("number"==typeof i)o=i;else{if(0===i.trim().length)return null;const t=i.match(Cl),n=t?parseFloat(t[1]):null,a=t?.[2]?.toLowerCase()||null;if(!t||null===n||isNaN(n))return null;o="h"===a||"hour"===a||"hours"===a?3600*n:"m"===a||"min"===a||"minute"===a||"minutes"===a?60*n:n}return o}const Tl=new r.nKC("MAT_TIMEPICKER_SCROLL_STRATEGY",{providedIn:"root",factory:()=>{const i=(0,r.WQX)(r.zZn);return()=>(0,pa.RH)(i)}});let ma=(()=>{class i{_dir=(0,r.WQX)(ua.dS,{optional:!0});_viewContainerRef=(0,r.WQX)(e.c1b);_injector=(0,r.WQX)(r.zZn);_defaultConfig=(0,r.WQX)(Ps,{optional:!0});_dateAdapter=(0,r.WQX)(ci.MJ,{optional:!0});_dateFormats=(0,r.WQX)(ci.de,{optional:!0});_scrollStrategyFactory=(0,r.WQX)(Tl);_animationsDisabled=(0,Is.Rc)();_isOpen=(0,r.vPA)(!1);_activeDescendant=(0,r.vPA)(null);_input=(0,r.vPA)(null);_overlayRef=null;_portal=null;_optionsCacheKey=null;_localeChanges;_onOpenRender=null;_panelTemplate=Y.ebz.required("panelTemplate");_timeOptions=[];_options=(0,Y.dtW)(Pn.wT);_keyManager=new hl.A(this._options,this._injector).withHomeAndEnd(!0).withPageUpDown(!0).withVerticalOrientation(!0);interval=(0,Y.hFB)(Ds(this._defaultConfig?.interval||null),{transform:Ds});options=(0,Y.hFB)(null);isOpen=this._isOpen.asReadonly();selected=(0,Y.CGW)();opened=(0,Y.CGW)();closed=(0,Y.CGW)();activeDescendant=this._activeDescendant.asReadonly();panelId=(0,r.WQX)(ml.g).getId("mat-timepicker-panel-");disableRipple=(0,Y.hFB)(this._defaultConfig?.disableRipple??!1,{transform:Y.L39});ariaLabel=(0,Y.hFB)(null,{alias:"aria-label"});ariaLabelledby=(0,Y.hFB)(null,{alias:"aria-labelledby"});disabled=(0,Ne.EW)(()=>!!this._input()?.disabled());constructor(){(0,r.WQX)(e.aKT).nativeElement.setAttribute("mat-timepicker-panel-id",this.panelId),this._handleLocaleChanges(),this._handleInputStateChanges(),this._keyManager.change.subscribe(()=>this._activeDescendant.set(this._keyManager.activeItem?.id||null))}open(){const t=this._input();if(!t||(t.focus(),this._isOpen()))return;this._isOpen.set(!0),this._generateOptions();const n=this._getOverlayRef();n.updateSize({width:t.getOverlayOrigin().nativeElement.offsetWidth}),this._portal??=new pl.VA(this._panelTemplate(),this._viewContainerRef),n.hasAttached()||n.attach(this._portal),this._onOpenRender?.destroy(),this._onOpenRender=(0,e.mal)(()=>{const a=this._options();this._syncSelectedState(t.value(),a,a[0]),this._onOpenRender=null},{injector:this._injector}),this.opened.emit()}close(){this._isOpen()&&(this._isOpen.set(!1),this.closed.emit(),this._animationsDisabled&&this._overlayRef?.detach())}registerInput(t){this._input(),this._input.set(t)}ngOnDestroy(){this._keyManager.destroy(),this._localeChanges.unsubscribe(),this._onOpenRender?.destroy(),this._overlayRef?.dispose()}_getOverlayHost(){return this._overlayRef?.hostElement}_selectValue(t){this.close(),this._keyManager.setActiveItem(t),this._options().forEach(n=>{n!==t&&n.deselect(!1)}),this._input()?.timepickerValueAssigned(t.value),this.selected.emit({value:t.value,source:this}),this._input()?.focus()}_getAriaLabelledby(){return this.ariaLabel()?null:this.ariaLabelledby()||this._input()?.getLabelId()||null}_handleAnimationEnd(t){"_mat-timepicker-exit"===t.animationName&&this._overlayRef?.detach()}_getOverlayRef(){if(this._overlayRef)return this._overlayRef;const t=(0,pa.$M)(this._injector,this._input().getOverlayOrigin()).withFlexibleDimensions(!1).withPush(!1).withTransformOriginOn(".mat-timepicker-panel").withPopoverLocation("inline").withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-timepicker-above"}]);return this._overlayRef=(0,pa.Y$)(this._injector,{positionStrategy:t,scrollStrategy:this._scrollStrategyFactory(),direction:this._dir||"ltr",hasBackdrop:!1,disableAnimations:this._animationsDisabled}),this._overlayRef.detachments().subscribe(()=>this.close()),this._overlayRef.keydownEvents().subscribe(n=>this._handleKeydown(n)),this._overlayRef.outsidePointerEvents().subscribe(n=>{const a=(0,li.Fb)(n),s=this._input()?.getOverlayOrigin().nativeElement;a&&s&&a!==s&&!s.contains(a)&&this.close()}),this._overlayRef}_generateOptions(){const t=this.interval()??1800,n=this.options();if(null!==n)this._timeOptions=n;else{const a=this._input(),s=this._dateAdapter,c=this._dateFormats.display.timeInput,p=a?.min()||s.setTime(s.today(),0,0,0),x=a?.max()||s.setTime(s.today(),23,59,0),O=t+"/"+s.format(p,c)+"/"+s.format(x,c);O!==this._optionsCacheKey&&(this._optionsCacheKey=O,this._timeOptions=function wl(i,o,t,n,a){const s=[];let c=i.compareTime(t,n)<1?t:n;for(;i.sameDate(c,t)&&i.compareTime(c,n)<1&&i.isValid(c);)s.push({value:c,label:i.format(c,o.display.timeOptionLabel)}),c=i.addSeconds(c,a);return s}(s,this._dateFormats,p,x,t))}}_syncSelectedState(t,n,a){let s=!1;for(const c of n)t&&this._dateAdapter.sameTime(c.value,t)?(c.select(!1),fa(c,"center"),(0,r.O8t)(()=>this._keyManager.setActiveItem(c)),s=!0):c.deselect(!1);s||(a?((0,r.O8t)(()=>this._keyManager.setActiveItem(a)),fa(a,"center")):(0,r.O8t)(()=>this._keyManager.setActiveItem(-1)))}_handleKeydown(t){const n=t.keyCode;if(n===mn.wn)this.close();else if(n!==mn._f||(0,ha.rp)(t))if(n===mn.Fm)t.preventDefault(),this._keyManager.activeItem?this._selectValue(this._keyManager.activeItem):this.close();else{const a=this._keyManager.activeItem;this._keyManager.onKeydown(t);const s=this._keyManager.activeItem;s&&s!==a&&fa(s,"nearest")}else t.preventDefault(),this.close()}_handleLocaleChanges(){this._localeChanges=this._dateAdapter.localeChanges.subscribe(()=>{this._optionsCacheKey=null,this.isOpen()&&this._generateOptions()})}_handleInputStateChanges(){(0,r.QZP)(()=>{const t=this._input(),n=this._options();this._isOpen()&&t&&this._syncSelectedState(t.value(),n,null)})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=e.VBU({type:i,selectors:[["mat-timepicker"]],viewQuery:function(n,a){1&n&&e.wEZ(a._panelTemplate,fl,5)(a._options,Pn.wT,5),2&n&&e.NyB(2)},inputs:{interval:[1,"interval"],options:[1,"options"],disableRipple:[1,"disableRipple"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"]},outputs:{selected:"selected",opened:"opened",closed:"closed"},exportAs:["matTimepicker"],features:[e.Jv_([{provide:Pn.is,useExisting:i}])],decls:2,vars:0,consts:[["panelTemplate",""],["role","listbox",1,"mat-timepicker-panel",3,"animationend","id"],[3,"value"],[3,"onSelectionChange","value"]],template:function(n,a){1&n&&e.DNE(0,yl,3,7,"ng-template",null,0,e.C5r)},dependencies:[Pn.wT],styles:["@keyframes _mat-timepicker-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-timepicker-exit{from{opacity:1}to{opacity:0}}mat-timepicker{display:none}.mat-timepicker-panel{width:100%;max-height:256px;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:relative;border-bottom-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-timepicker-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-timepicker-container-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){.mat-timepicker-panel{outline:solid 1px}}.mat-timepicker-above .mat-timepicker-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small))}.mat-timepicker-panel-animations-enabled{animation:_mat-timepicker-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-timepicker-panel-animations-enabled.mat-timepicker-panel-exit{animation:_mat-timepicker-exit 100ms linear}.mat-timepicker-input[readonly]{cursor:pointer}@media(forced-colors: active){.mat-timepicker-toggle-default-icon{color:CanvasText}}\n"],encapsulation:2,changeDetection:0})}return i})();function fa(i,o){i._getHostElement().scrollIntoView({block:o,inline:o})}let kl=(()=>{class i{_elementRef=(0,r.WQX)(e.aKT);_dateAdapter=(0,r.WQX)(ci.MJ,{optional:!0});_dateFormats=(0,r.WQX)(ci.de,{optional:!0});_formField=(0,r.WQX)(wt.xb,{optional:!0});_onChange;_onTouched;_validatorOnChange;_cleanupClick;_accessorDisabled=(0,r.vPA)(!1);_localeSubscription;_timepickerSubscription;_validator;_lastValueValid=!0;_minValid=!0;_maxValid=!0;_lastValidDate=null;_ariaActiveDescendant=(0,Ne.EW)(()=>{const t=this.timepicker(),n=t.isOpen(),a=t.activeDescendant();return n&&a?a:null});_ariaExpanded=(0,Ne.EW)(()=>this.timepicker().isOpen()+"");_ariaControls=(0,Ne.EW)(()=>{const t=this.timepicker();return t.isOpen()?t.panelId:null});value=(0,Y.geq)(null);timepicker=Y.hFB.required({alias:"matTimepicker"});min=(0,Y.hFB)(null,{alias:"matTimepickerMin",transform:t=>this._transformDateInput(t)});max=(0,Y.hFB)(null,{alias:"matTimepickerMax",transform:t=>this._transformDateInput(t)});openOnClick=(0,Y.hFB)(!0,{alias:"matTimepickerOpenOnClick",transform:Y.L39});disabled=(0,Ne.EW)(()=>this.disabledInput()||this._accessorDisabled());disabledInput=(0,Y.hFB)(!1,{transform:Y.L39,alias:"disabled"});constructor(){const t=(0,r.WQX)(e.sFG);this._validator=this._getValidator(),this._updateFormsState(),this._registerTimepicker(),this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._hasFocus()||this._formatValue(this.value())}),this._cleanupClick=t.listen(this.getOverlayOrigin().nativeElement,"click",this._handleClick)}writeValue(t){const n=this._dateAdapter.deserialize(t);this.value.set(this._dateAdapter.getValidDateOrNull(n))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._accessorDisabled.set(t)}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._validatorOnChange=t}getOverlayOrigin(){return this._formField?.getConnectedOverlayOrigin()||this._elementRef}focus(){this._elementRef.nativeElement.focus()}ngOnDestroy(){this._cleanupClick(),this._timepickerSubscription?.unsubscribe(),this._localeSubscription.unsubscribe()}getLabelId(){return this._formField?.getLabelId()||null}_handleClick=t=>{if(this.disabled()||!this.openOnClick())return;const n=(0,li.Fb)(t),a=this.timepicker()._getOverlayHost();(!n||!a||!a.contains(n))&&this.timepicker().open()};_handleInput(t){const n=t.target.value,a=this.value(),s=this._dateAdapter.parseTime(n,this._dateFormats.parse.timeInput),c=!this._dateAdapter.sameTime(s,a);!s||c||n&&!a?this._assignUserSelection(s,!0):this._validatorOnChange?.()}_handleBlur(){const t=this.value();t&&this._isValid(t)&&this._formatValue(t),this.timepicker().isOpen()||this._onTouched?.()}_handleKeydown(t){this.timepicker().isOpen()||this.disabled()||(t.keyCode!==mn._f||(0,ha.rp)(t)||null===this.value()?(t.keyCode===mn.n6||t.keyCode===mn.i7)&&(t.preventDefault(),this.timepicker().open()):(t.preventDefault(),this.value.set(null),this._formatValue(null)))}timepickerValueAssigned(t){this._dateAdapter.sameTime(t,this.value())||(this._assignUserSelection(t,!0),this._formatValue(t))}_updateFormsState(){(0,r.QZP)(()=>{const{_dateAdapter:t,_lastValueValid:n,_minValid:a,_maxValid:s}=this,c=t.deserialize(this.value()),p=this.min(),x=this.max(),O=this._lastValueValid=this._isValid(c);this._minValid=!p||!c||!O||t.compareTime(p,c)<=0,this._maxValid=!x||!c||!O||t.compareTime(x,c)>=0;const G=n!==O||a!==this._minValid||s!==this._maxValid;this._hasFocus()||this._formatValue(c),c&&O&&(this._lastValidDate=c),G&&this._validatorOnChange?.()})}_registerTimepicker(){(0,r.QZP)(()=>{const t=this.timepicker();t.registerInput(this),t.closed.subscribe(()=>this._onTouched?.())})}_assignUserSelection(t,n){let a;if(null!=t&&this._isValid(t)){const s=this._dateAdapter,c=s.getValidDateOrNull(this._lastValidDate||this.value()),p=s.getHours(t),x=s.getMinutes(t),O=s.getSeconds(t);a=c?s.setTime(c,p,x,O):t}else a=t;n&&this._onChange?.(a),this.value.set(a)}_formatValue(t){t=this._dateAdapter.getValidDateOrNull(t),this._elementRef.nativeElement.value=null==t?"":this._dateAdapter.format(t,this._dateFormats.display.timeInput)}_isValid(t){return!t||this._dateAdapter.isValid(t)}_transformDateInput(t){const n="string"==typeof t?this._dateAdapter.parseTime(t,this._dateFormats.parse.timeInput):this._dateAdapter.deserialize(t);return n&&this._dateAdapter.isValid(n)?n:null}_hasFocus(){return(0,li.vc)()===this._elementRef.nativeElement}_getValidator(){return ne.k0.compose([()=>this._lastValueValid?null:{matTimepickerParse:{text:this._elementRef.nativeElement.value}},t=>this._minValid?null:{matTimepickerMin:{min:this.min(),actual:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t.value))}},t=>this._maxValid?null:{matTimepickerMax:{max:this.max(),actual:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t.value))}}])}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["input","matTimepicker",""]],hostAttrs:["role","combobox","type","text","aria-haspopup","listbox",1,"mat-timepicker-input"],hostVars:5,hostBindings:function(n,a){if(1&n&&e.bIt("blur",function(){return a._handleBlur()})("input",function(c){return a._handleInput(c)})("keydown",function(c){return a._handleKeydown(c)}),2&n){let s;e.Avn("disabled",a.disabled()),e.BMQ("aria-activedescendant",a._ariaActiveDescendant())("aria-expanded",a._ariaExpanded())("aria-controls",a._ariaControls())("mat-timepicker-id",null==(s=a.timepicker())?null:s.panelId)}},inputs:{value:[1,"value"],timepicker:[1,"matTimepicker","timepicker"],min:[1,"matTimepickerMin","min"],max:[1,"matTimepickerMax","max"],openOnClick:[1,"matTimepickerOpenOnClick","openOnClick"],disabledInput:[1,"disabled","disabledInput"]},outputs:{value:"valueChange"},exportAs:["matTimepickerInput"],features:[e.Jv_([{provide:ne.kq,useExisting:i,multi:!0},{provide:ne.cz,useExisting:i,multi:!0},{provide:Ms.O,useExisting:i}])]})}return i})(),Fs=(()=>{class i{_defaultConfig=(0,r.WQX)(Ps,{optional:!0});_defaultTabIndex=(()=>{const t=(0,r.WQX)(new Y.ES_("tabindex"),{optional:!0}),n=Number(t);return isNaN(n)?null:n})();_isDisabled=(0,Ne.EW)(()=>{const t=this.timepicker();return this.disabled()||t.disabled()});timepicker=Y.hFB.required({alias:"for"});ariaLabel=(0,Y.hFB)(void 0,{alias:"aria-label"});ariaLabelledby=(0,Y.hFB)(void 0,{alias:"aria-labelledby"});_defaultAriaLabel="Open timepicker options";disabled=(0,Y.hFB)(!1,{transform:Y.L39,alias:"disabled"});tabIndex=(0,Y.hFB)(this._defaultTabIndex);disableRipple=(0,Y.hFB)(this._defaultConfig?.disableRipple??!1,{transform:Y.L39});_open(t){this.timepicker()&&!this._isDisabled()&&(this.timepicker().open(),t.stopPropagation())}getAriaLabel(){return this.ariaLabelledby()?null:this.ariaLabel()||this._defaultAriaLabel}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=e.VBU({type:i,selectors:[["mat-timepicker-toggle"]],hostAttrs:[1,"mat-timepicker-toggle"],hostVars:1,hostBindings:function(n,a){1&n&&e.bIt("click",function(c){return a._open(c)}),2&n&&e.BMQ("tabindex",null)},inputs:{timepicker:[1,"for","timepicker"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"],disabled:[1,"disabled"],tabIndex:[1,"tabIndex"],disableRipple:[1,"disableRipple"]},exportAs:["matTimepickerToggle"],ngContentSelectors:_l,decls:3,vars:6,consts:[["matIconButton","","type","button","aria-haspopup","listbox",3,"tabIndex","disabled","disableRipple"],["height","24px","width","24px","viewBox","0 -960 960 960","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-timepicker-toggle-default-icon"],["d","m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Z"]],template:function(n,a){1&n&&(e.NAR(bl),e.j41(0,"button",0),e.SdG(1,0,null,xl,2,0),e.k0s()),2&n&&(e.Y8G("tabIndex",a._isDisabled()?-1:a.tabIndex())("disabled",a._isDisabled())("disableRipple",a.disableRipple()),e.BMQ("aria-label",a.getAriaLabel())("aria-labelledby",a.ariaLabelledby())("aria-expanded",a.timepicker().isOpen()))},dependencies:[qt.iY],encapsulation:2,changeDetection:0})}return i})(),Sl=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=e.$C({type:i});static \u0275inj=r.G2t({imports:[ma,Fs,Tt.Gj]})}return i})();var El=g(30709),Il=g(49645),Yt=g.n(Il),Ml=g(30001),Pl=g.n(Ml),Dl=g(21102),Fl=g.n(Dl);function Ol(i){Yt().extend(Fl()),Yt().extend(Pl()),Yt().locale(i)}function Al(i){return Yt().utc(i)}function Rl(i){const o=Yt()().utc().hour(0).minute(0).second(0),t=[{label:"00:00 AM",value:o.hour(0)},{label:"06:00 AM",value:o.hour(6)},{label:"08:00 AM",value:o.hour(8)},{label:"10:00 AM",value:o.hour(10)},{label:"12:00 PM",value:o.hour(12)},{label:"06:00 PM",value:o.hour(18)}];if(!i||!i.isValid())return t;let n={label:i.format("HH:mm A"),value:Yt()().utc().hour(i.hour()).minute(i.minute()).second(0)};if(t.some(s=>s.value.hour()===n.value.hour()&&s.value.minute()===n.value.minute()))return t;const a=[...t,n];return a.sort((s,c)=>s.value.valueOf()-c.value.valueOf()),a}function Ll(i){return i?Yt()(i).format("L LT"):""}function Os(){try{const i=Yt()().localeData().longDateFormat("L");if(i&&"string"==typeof i)return i}catch{}return"YYYY-MM-DD"}function Vl(i,o,t,n=!0){if(!i)return t(null),!0;const a=Os();let s=null;const c=["YYYY-MM-DD","YYYY-MM-DD HH:mm: ss","YYYY-MM-DD HH:mm","YYYY/MM/DD","YYYY/MM/DD HH: mm:ss","YYYY/MM/DD HH: mm","L LT","L LTS","L",a,`${a} HH:mm:ss`,`${a} HH:mm`];for(const p of c)if(s=Yt()(i,p,!0),s.isValid())break;return(!s||!s.isValid())&&(s=Yt()(i)),!(!s||!s.isValid()||(di(s,s,o,t,n),0))}function zl(i,o,t){const n=Yt()(i,"HH:mm");null!=n?n.isValid()&&di(null,n,o,t):t(null)}function Nl(i,o,t){null!=i?i.isValid()&&di(i,null,o,t):t(null)}function di(i,o,t,n,a=!0){if(!i&&!o)return null;let s=Yt()(t).isValid()?Yt()(t).utc():Yt()().utc().hour(0).minute(0).second(0);i&&(s=s.year(i.year()).month(i.month()).date(i.date())),o&&(s=s.hour(o.hour()).minute(o.minute()).second(0));const c=a?s.toISOString():s.utc().hour(0).minute(0).second(0).toISOString();return n(c),c}let ln=(()=>{class i{static{this.initializeDayjs=Ol}static{this.updateFormattedValue=di}static{this.updateDate=Nl}static{this.updateTime=zl}static{this.handleDateTimeInput=Vl}static{this.formatDateTime=Ll}static{this.generateTimePickerOptions=Rl}static{this.getDateTimeValue=Al}static{this.getLocaleDateFormat=Os}}return i})(),jl=(()=>{class i extends kl{constructor(){super(),this.timepicker=Y.hFB.required({alias:"myMatTimepicker"}),this._cleanupClick()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=e.FsC({type:i,selectors:[["input","myMatTimepicker",""]],hostAttrs:["role","combobox","type","text","aria-haspopup","listbox",1,"mat-timepicker-input"],hostVars:5,hostBindings:function(n,a){if(1&n&&e.bIt("blur",function(){return a._handleBlur()})("input",function(c){return a._handleInput(c)})("keydown",function(c){return a._handleKeydown(c)}),2&n){let s;e.Avn("disabled",a.disabled()),e.BMQ("aria-activedescendant",a._ariaActiveDescendant())("aria-expanded",a._ariaExpanded())("aria-controls",a._ariaControls())("mat-timepicker-id",null==(s=a.timepicker())?null:s.panelId)}},inputs:{timepicker:[1,"myMatTimepicker","timepicker"]},exportAs:["myMatTimepickerInput"],features:[e.Jv_([{provide:ne.kq,useExisting:i,multi:!0},{provide:ne.cz,useExisting:i,multi:!0},{provide:Ms.O,useExisting:i}]),e.Vt3]})}}return i})();function Bl(i,o){if(1&i){const t=e.RV6();e.j41(0,"input",8),e.bIt("change",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.handleDateTimeInput(a))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.ui().disabled)("required",t.basics().required)("value",t.formatDateTime(t.dateTimeValue()))("placeholder",t.basics().placeholder||t.placeholder)}}function Gl(i,o){if(1&i){const t=e.RV6();e.qex(0,7),e.j41(1,"input",9),e.bIt("input",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.updateTime(a))}),e.k0s(),e.nrm(2,"mat-timepicker",10,1)(4,"mat-timepicker-toggle",11),e.bVm()}if(2&i){const t=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("disabled",n.ui().disabled)("required",n.basics().required)("myMatTimepicker",t)("value",n.dateTimeValue())("placeholder",n.basics().placeholder||n.placeholder),e.R7$(),e.Y8G("options",n.timePickerOptions()),e.R7$(2),e.Y8G("disabled",n.ui().disabled)("for",t)}}const Ul={all:!1,updateDate:!1,updateTime:!1,handleDateTimeInput:!1,disabledEffect:!1,ngAfterViewInit:!1,dateTimeValue:!1,formatDateTime:!1,InvalidDate:!1};let ga=class Wi{constructor(t){this.translate=t,this.log=(0,f.Tq)({DatetimeDefaultComponent:Wi},Ul),this.fieldState=(0,r.WQX)(it.W),this.group=this.fieldState.group,this.ui=this.fieldState.ui,this.uiValue=this.fieldState.uiValue,this.basics=this.fieldState.basics,this.useTimePicker=this.fieldState.settingExt("UseTimePicker"),this.dateTimeValue=(0,Ne.EW)(()=>(this.log.fnIf("dateTimeValue",{uiValue:this.uiValue()}),this.uiValue()?ln.getDateTimeValue(this.uiValue()):null)),this.timePickerOptions=(0,Ne.EW)(()=>ln.generateTimePickerOptions(this.dateTimeValue()));const n=navigator.language.substring(0,2);ln.initializeDayjs(n),this.translate.currentLang=n}get placeholder(){const t=ln.getLocaleDateFormat();return this.useTimePicker()?`${t} HH:mm:ss`:t}ngAfterViewInit(){const t=this.log.fnIf("ngAfterViewInit");this.timePickerRef&&this.timePickerRef.selected.subscribe(n=>{n&&this.updateFormattedValue(null,n.value)}),t.end()}formatDateTime(t){return this.log.fnIf("formatDateTime",{date:t}),ln.formatDateTime(t)}handleDateTimeInput(t){const n=t.target,a=n.value.trim();this.log.aIf("handleDateTimeInput",{value:a}),ln.handleDateTimeInput(a,this.uiValue(),c=>this.ui().setIfChanged(c),this.useTimePicker())||(n.value=ln.formatDateTime(this.dateTimeValue()),console.error(`Invalid date format: ${a}`))}updateTime(t){this.log.aIf("updateTime",{event:t}),ln.updateTime(t.target.value,this.uiValue(),n=>this.ui().setIfChanged(n))}updateDate(t){this.log.aIf("updateDate",{event:t}),ln.updateDate(t.value,this.uiValue(),n=>this.ui().setIfChanged(n)),t.value&&!t.value.isValid()&&this.log.fnIf("InvalidDate",{date:t.value})}updateFormattedValue(t,n){const a=ln.updateFormattedValue(t||null,n||null,this.uiValue(),s=>{},this.useTimePicker());return this.ui().setIfChanged(a),a}static{this.\u0275fac=function(n){return new(n||Wi)(e.rXU(ue.c$))}}static{this.\u0275cmp=e.VBU({type:Wi,selectors:[["datetime-default"]],viewQuery:function(n,a){if(1&n&&e.GBs(ma,5),2&n){let s;e.mGM(s=e.lsd())&&(a.timePickerRef=s.first)}},decls:10,vars:11,consts:[["datepicker",""],["timepicker",""],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"disabled","required","value","placeholder"],["matInput","",3,"dateChange","change","disabled","required","matDatepicker","value","placeholder"],["xPosition","end"],["matSuffix","","tippyTranslate","Fields.DateTime.OpenCalender",3,"for"],["matSuffix",""],["matInput","",3,"change","disabled","required","value","placeholder"],["matInput","",1,"hidden-picker-input",3,"input","disabled","required","myMatTimepicker","value","placeholder"],[3,"options"],["tippyTranslate","Fields.DateTime.OpenTime",3,"disabled","for"]],template:function(n,a){if(1&n){const s=e.RV6();e.j41(0,"mat-form-field",2)(1,"mat-label"),e.EFF(2),e.k0s(),e.nVh(3,Bl,1,4,"input",3),e.j41(4,"input",4),e.bIt("dateChange",function(p){return r.eBV(s),r.Njj(a.updateDate(p))})("change",function(p){return r.eBV(s),r.Njj(a.handleDateTimeInput(p))}),e.k0s(),e.nrm(5,"mat-datepicker",5,0)(7,"mat-datepicker-toggle",6),e.nVh(8,Gl,5,8,"ng-container",7),e.k0s(),e.nrm(9,"app-field-helper-text")}if(2&n){const s=e.sdS(6);e.R7$(2),e.JRh(a.basics().label),e.R7$(),e.vxM(a.useTimePicker()?3:-1),e.R7$(),e.AVh("hidden-picker-input",a.useTimePicker()),e.Y8G("disabled",a.ui().disabled)("required",a.basics().required)("matDatepicker",s)("value",a.dateTimeValue())("placeholder",a.basics().placeholder||a.placeholder),e.R7$(3),e.Y8G("for",s),e.R7$(),e.vxM(a.useTimePicker()?8:-1)}},dependencies:[Gt.RG,wt.rl,wt.nJ,wt.yw,ne.YN,ne.X1,Ut.fS,Ut.fg,Xt,El.uf,At.e,oi.X6,oi.Vh,oi.bZ,oi.bU,Sl,ma,Fs,jl],styles:[".hidden-picker-input[_ngcontent-%COMP%]{display:none}  .mat-timepicker-panel{--mat-option-selected-state-label-text-color: black;max-width:10rem!important;position:absolute!important;right:0!important}  .cdk-overlay-pane:has(.mat-timepicker-panel){position:relative!important}"],changeDetection:0})}};ga=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[ue.c$])],ga);let $l=(()=>{class i{constructor(){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["empty-default"]],decls:0,vars:0,template:function(n,a){},encapsulation:2})}}return i})();function Hl(i,o){if(1&i&&(e.Hgh(0,"div",0),e.nI1(1,"safeHtml")),2&i){const t=e.XpG();e.Avn("innerHTML",e.bMT(1,1,t.basics().notes),e.npT)}}let va=class ps{constructor(){this.fieldState=(0,r.WQX)(it.W),this.basics=this.fieldState.basics}static{this.\u0275fac=function(t){return new(t||ps)}}static{this.\u0275cmp=e.VBU({type:ps,selectors:[["empty-message"]],decls:1,vars:1,consts:[[1,"message-box",3,"innerHtml"]],template:function(t,n){1&t&&e.nVh(0,Hl,2,3,"div",0),2&t&&e.vxM(n.basics().visible?0:-1)},dependencies:[Mn.$],styles:[".message-box[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}"]})}};va=(0,Et.Cg)([Wt({})],va);var Bn=g(36647),Wl=g(54839);class Rs{stripHtml(o){if(!o)return"";if(!o.includes("<"))return o;const t=document.createElement("div");return t.innerHTML=o??"",t.innerText||""}}const Xl={all:!1,data2PickerItem:!1,getMasks:!1,patchMasks:!1,parseMasks:!1,buildMasks:!1};class ui{constructor(o,t,n,a,s,c){this.name=o,this.settings=t,this.formConfig=a,this.log=(0,f.Tq)({DataSourceMasksHelper:ui},Xl),this.#e=!1,this.#t=!1,this.#n=!1,this.#i=new Rs,this.log.forceEnable(c??s.enableChildren??!1),this.#e=n.allowUse[Ot.T.PickerUiMoreInfo](),this.#n=a.config.dialogContext.User?.IsSystemAdmin,this.log.a("constructor - settings",{settings:t,infoEnabled:this.#e})}#e;#t;#n;#i;#a;data2PickerItem({entity:o,streamName:t,valueMustUseGuid:n,valueDefaultsToGuid:a=!1}){const s=this.log.fnIf("data2PickerItem",{entity:o,streamName:t,valueMustUseGuid:n}),c=this.#r(),p=(()=>{if(n||a&&!c.value)return o.Guid;if(void 0===o[c.value])return o.Value;const ae=o[c.value];return void 0!==ae?`${ae}`:o.Guid})(),x=(()=>{const ae=o[c.label];return ae?`${ae}`:o.Title?`${o.Title}`:`${p}`})(),O=o[c.previewValue]||p;if(s.a("debug values",{masks:c,value:p,label:x,previewValue:O,hasPlaceholders:c.hasPlaceholders}),!c.hasPlaceholders)return s.r({id:o.Id,data:o,value:p,previewValue:O,label:x,tooltip:c.tooltip,info:c.info,link:c.link,sourceStreamName:t??null,rules:o.Rules},"no masks");const G=this.#s(c,o),ie=c.label.includes("[")?G.label:x;return s.r({id:o.Id,data:o,...G,value:p,label:ie,sourceStreamName:t??null,rules:o.Rules},"with masks")}#s(o,t){const n=this.log.fnIf("parseMasks",{masks:o,data:t});let a=o.label;!this.#t&&!this.#e&&`${o.tooltip}${o.info}${o.link}`.length>0&&(this.#n,this.#t=!0);const s=this.#e||this.#n;let c=s?o.tooltip:"",p=s?o.info:"",x=s?o.link:"",O=o.previewValue;return Object.keys(t).forEach(G=>{const ie=t[G]??"",ae=new RegExp(`\\[Item:${G}\\]`,"gi");if(O.includes("App:Path")){const Je=this.formConfig.config.portalRoot.replace(/\/$/,"")+this.formConfig.config.appRoot;O=O.replace("[App:Path]",Je)}c=c.replace(ae,ie),p=p.replace(ae,ie),x=x.replace(ae,ie),a=a.replace(ae,ie),O=O.replace(ae,ie)}),n.r({label:a,tooltip:c,info:p,link:x,previewValue:O},"result")}#r(){return this.#a||(this.#a=this.#o(),this.log.aIf("getMasks",{masks:this.#a})),this.#a}#o(){const o=this.settings,t=this.log.fnIf("buildMasks",{settings:o}),n=o.ItemTooltip?this.#i.stripHtml(o.ItemTooltip):"",a=o.ItemInformation?this.#i.stripHtml(o.ItemInformation):"",s=o.ItemLink??"",c=o.Label??"",p=o.Value??"",x=o.PreviewValue??"",G={hasPlaceholders:(n+a+s+c+x).includes("["),tooltip:n,info:a,link:s,label:c,value:p,previewValue:x};return t.r(G,"result")}}class ya{constructor(){this.log=(0,f.Tq)({DataSourceMoreFieldsHelper:ya})}fieldListToRetrieveFromServer(o){this.log.a("fieldListToRetrieveFromServer",{settings:o});const t=o.PickerTreeConfiguration,n=o;return[...["Title","Id","Guid",...n.MoreFields?.split(",")??[],n.Value,n.Label,t?.TreeChildIdField,t?.TreeParentIdField,t?.TreeChildParentRefField,t?.TreeParentChildRefField].map(G=>this.extractFieldNamesFromTokens(G,!0)).flat(),...[o.ItemTooltip,o.ItemInformation,o.ItemLink].map(G=>this.extractFieldNamesFromTokens(G,!1)).flat()].filter(Sn.a.distinct).join(",")}extractFieldNamesFromTokens(o,t=!0){this.log.a("extractFieldNamesFromTokens",{input:o,enableSimpleFields:t});const n=[];if(!(o?.trim().length>0))return n;const a=/\[Item:(\S.*?)\]/gi;let s;for(;null!==(s=a.exec(o));){const c=s[1].trim();c&&n.push(c)}return t&&0===n.length&&n.push(o),n}}const pi={all:!1,constructor:!1,data:!1,triggerGetAll:!1,addToRefresh:!1,fields:[...ge.z,"Categories"],newIconOptions:!1,fileLoadSettings:!1};let hi=(()=>{class i extends ft.V{constructor(){super(),this.fieldState=(0,r.WQX)(it.W),this.features=(0,r.WQX)(v.D),this.formConfig=(0,r.WQX)(y.S),this.fieldName=this.fieldState.name,this.loading=(0,Q.KX)("loading",!0),this.getAll$=new on.t(!1),this.getAll=(0,Q.KX)("getAll",!1),this.guidsToRefresh=(0,Q.KX)("guidsToRefresh",[]),this.settings=this.fieldState.settings,this.noItemsLoadingFalse={data:[],loading:!1},this.noItemsLoadingTrue={data:[],loading:!0},this.fieldsHelper=new ya,this.helpers=new Rs}constructorEnd(){this.log??=(0,f.Tq)({DataSourceBase:i}),this.log.aIf("constructor",{forField:this.fieldState.name})}setup(){return this}ngOnDestroy(){this.getAll$.complete(),super.ngOnDestroy()}triggerGetAll(){const t=this.log.fnIf("triggerGetAll");this.getAll$.next(!0),this.getAll.set(!0),t.end()}addToRefresh(t){const n=this.log.fnIf("addToRefresh",{additionalGuids:t}),a=this.guidsToRefresh(),s=[...a,...t].filter(Sn.a.distinct);n.values({before:a,additionalGuids:t,merged:s}),this.guidsToRefresh.set(s),n.end()}createMaskHelper(t,n){return new ui(this.fieldName,{...this.settings(),...t},this.features,this.formConfig,this.log,n)}fieldsToRetrieve(t){return this.fieldsHelper.fieldListToRetrieveFromServer(t)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const ba={...pi,all:!0,initPrefetch:!1,getFromBackend:!1,addToRefresh:!1,loadMoreIntoSignal:!0,"loadMoreIntoSignal-data":!0};let _a=(()=>{class i extends hi{constructor(){super(),this.querySvc=(0,le.d)(Wl.c),this.#e=(0,Q.KX)("typeOrParams",null),this.#t=(0,et.br)(this.#e),this.#n=this.#t.pipe((0,zn.F)()),this.#i=(0,et.ot)((0,Tn.z)([this.#n,this.getAll$.pipe((0,zn.F)(),(0,Ke.p)(t=>!!t),(0,C.T)(()=>[]))]).pipe((0,Bn.n)(([t])=>this.getFromBackend(t,[],"getAll"))),{initialValue:this.noItemsLoadingFalse}),this.#a=(0,Q.KX)("prefetchNow",this.noItemsLoadingFalse),this.#s=(0,Q.KX)("modified",this.noItemsLoadingFalse),this.data=(0,Q.bo)("data",()=>{const t=this.#a().data,n=this.#i().data,a=this.#s().data,s=[...new Map([...t,...n,...a].map(c=>[c.value,c])).values()];return this.log.a("data",{prefetch:t,all:n,overrides:a,data:s}),s}),this.loading=(0,Q.bo)("loading",()=>this.#i().loading||this.#s().loading)}ngOnDestroy(){this.getAll$.complete(),super.ngOnDestroy()}#e;#t;#n;#i;#a;#s;initPrefetch(t){const n=this.log.fnIfInFields("initPrefetch",this.fieldName,{entityGuids:t});if(null==t)return n.end("no entity guids to prefetch");const a=t.filter(Sn.a.distinct);this.#r(this.#a,a,"initPrefetch"),n.end()}setParams(t){this.log.fnIfInFields("setParams",this.fieldName,{params:t}),this.#e.set(t)}addToRefresh(t){const n=this.log.fnIf("addToRefresh",{additionalGuids:t});this.#r(this.#s,t,"addToRefresh"),n.end()}#r(t,n,a){const s=this.#e(),c=this.log.fnIfInFields("loadMoreIntoSignal",this.fieldName,{additionalGuids:n,params:s,msgForLog:a});if(null==n||0===n.length)return c.end("no additional guids to load/refresh");t.update(p=>({data:p.data,loading:!0})),this.getFromBackend(s,n,a).subscribe(p=>{const x=this.log.fn("loadMoreIntoSignal-data",{additionalGuids:n,additions:p}),O=t();t.update(G=>({data:[...new Map([...G.data,...p.data].map(ie=>[ie.value,ie])).values()],loading:!1})),x.values({before:O,additions:p,merged:t().data})}),c.end()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),Yl=(()=>{class i extends _a{constructor(){super(),this.log=(0,f.Tq)({DataSourceAppAssets:i},ba),this.constructorEnd()}getFromBackend(t,n,a){const s=this.settings(),{AssetsRootFolder:c,AssetsFileFilter:p,AssetsType:x}=s,O=this.log.fnIf("getFromBackend",{settings:s},a),G=(x??"").toLocaleLowerCase(),ie="all"===G?"Default":"folders"===G?"Folders":"Files",ae=this.createMaskHelper({Value:s.Value||"FullName"}),ke=this.querySvc.getFromQuery(`System.AppAssets/${ie}`,`rootFolder=${c}&filter=${p}`,"").pipe((0,C.T)(Je=>({data:Je[ie].map(st=>ae.data2PickerItem({entity:st,streamName:ie,valueMustUseGuid:!1})),loading:!1})));return O.r(ke)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),Ls=(()=>{class i extends yn{constructor(){super(),this.log=(0,f.Tq)({DataAdapterAppAssets:i},Qt),this.dataSourceRaw=(0,le.d)(Yl)}fetchItems(){this.dataSource().triggerGetAll()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Ql=g(85800),Vs=/[\\^$.*+?()[\]{}|]/g,Kl=RegExp(Vs.source);const zs=function Zl(i){return(i=(0,Ql.A)(i))&&Kl.test(i)?i.replace(Vs,"\\$&"):i};var xa=g(98729);const Jl={all:!0,findAllIconsInCss:!1};function Ns(i,o){const n=(0,xa.T)({findAllIconsInCss:Ns},Jl).fnIf("findAllIconsInCss",{cssSelector:i,showPrefix:o});if(!i)return[];const a=function ec(i){if(!i)return new RegExp(ql);if(i.includes("<"))return new RegExp(i,"g");const o=js(i,"[:{,]");return new RegExp(o,"g")}(i);console.warn(a);const s=function nc(){return Array.from(document.styleSheets).map(ic).filter(Boolean)}(),c=[],p={};for(const x of s){const O=Array.from(x).filter(G=>G.selectorText);for(const G of O){const ie=G.selectorText;a.lastIndex=0;const ae=a.exec(ie)?.groups;if(!ae)continue;console.log("regExed",ae.Value,ae.ValueRaw,ae.Title);const ke=ae.ValueRaw;p[ke]||(c.push({Id:null,Guid:null,Rule:G,...ae,Selector:ie}),p[ke]=!0)}}return n.a("findAllIconsInCss",{classPrefix:i,showPrefix:o,foundList:c}),n.r(c)}const ql="(?<ValueRaw>\\.(?<Value>(?<Title>[\\-a-zA-Z0-9]+)))[:,{}]";function js(i,o){return i?`${function tc(i){if(!i)return"";const t=i.startsWith("."),n=t?i.substring(1):i,a=`(?<Value>${zs(n)}(?<Title>[\\-a-zA-Z0-9]+))`;return`(?<ValueRaw>${t?`${zs(".")}${a}`:a})`}(i)}${o}`:""}function ic(i){if(!i)return null;try{return i.rules}catch{}try{return i.cssRules}catch{}return null}const ac={...pi,data:!1,newIconOptions:!0,fileLoadSettings:!1,fields:[...pi.fields,"*"]};let sc=(()=>{class i extends hi{constructor(t){super(),this.scriptsLoaderService=t,this.log=(0,f.Tq)({DataSourceCss:i},ac),this.loading=(0,Q.KX)("loading",!1),this.#e=this.fieldState.settings,this.#t=(0,Q.KX)("iconOptions",[]),this.fileLoadSettings=(0,Q.bo)("fileLoadSettings",()=>(0,k.z)(this.#e(),a=>({CssSourceFile:a.CssSourceFile,CssSelectorFilter:a.CssSelectorFilter,PreviewValue:a.PreviewValue,Value:a.Value}))),this.#n=(()=>{const a=this.settings();return new ui(this.fieldName,{...a,Label:a.Label||"Value"},this.features,this.formConfig,this.log)})(),this.data=(0,Q.bo)("data",()=>{const a=this.#t(),s=this.#n,c=this.log.fnIfInFields("data",this.fieldName,{options:a,maskHelper:s}),p=a.map(x=>{const O=s.data2PickerItem({entity:x,streamName:null,valueMustUseGuid:!1});return c.a("one item",{entity:x,pickerItem:O}),O});return c.r(p)}),this.constructorEnd(),this.log.fnIf("fileLoadSettings",this.fileLoadSettings());const n=this.fileLoadSettings();this.scriptsLoaderService.load(n.CssSourceFile.split("\n"),()=>{const a=Ns(n.CssSelectorFilter,!1);this.log.fnIf("newIconOptions",{settings:n,newIconOptions:a}),this.#t.set(a)})}#e;#t;#n;static{this.\u0275fac=function(n){return new(n||i)(r.KVO(lt))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),Ca=(()=>{class i extends bt{constructor(){super(),this.log=(0,f.Tq)({DataAdapterCss:i},bt.logSpecs),this.dataSourceRaw=(0,le.d)(sc),this.myFeatures=(0,Q.KX)("features",{edit:!1,create:!1,delete:!1}),this.log.fnIf("constructor")}fetchItems(){this.log.fnIf("fetchItems"),this.dataSource().triggerGetAll()}deleteItem(t){throw new Error("Method not implemented.")}editItem(t,n){throw new Error("Method not implemented.")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),rc=(()=>{class i extends hi{constructor(){super(),this.log=(0,f.Tq)({DataSourceEmpty:i}),this.loading=(0,Q.KX)("loading",!1),this.#e=(0,Q.KX)("label","something is wrong - using DataSourceEmpty"),this.data=(0,Q.bo)("data",()=>[{value:"",label:this.#e()??"No options available",notSelectable:!0,isMessage:!0}]),this.constructorEnd()}#e;preSetup(t){return this.#e.set(t),this}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),Bs=(()=>{class i extends bt{constructor(){super(),this.log=(0,f.Tq)({DataAdapterEmpty:i},bt.logSpecs),this.dataSourceRaw=(0,le.d)(rc),this.myFeatures=(0,Q.KX)("features",{edit:!1,create:!1,delete:!1})}connectState(t){return this.dataSourceRaw.preSetup("Error: configuration missing"),super.connectState(t)}setupEmpty(){const t=this.log.fnIf("setupEmpty");return this.dataSource.set(this.dataSourceRaw.preSetup("Error: configuration missing")),t.rSilent(this)}fetchItems(){this.log.a("fetchItems"),this.dataSource().triggerGetAll()}deleteItem(t){throw new Error("Method not implemented.")}editItem(t,n){throw new Error("Method not implemented.")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),oc=(()=>{class i extends _a{constructor(){super(),this.log=(0,f.Tq)({DataSourceEntity:i},ba),this.constructorEnd()}getFromBackend(t,n,a){const s=this.fieldsToRetrieve(this.settings()),c=this.fieldState.config.inputTypeSpecs,p=c.mustUseGuid;var x=this.log.fnIf("getFromBackend",{typeName:t,guids:n,fields:s,inputType:c.inputType,valueMustUseGuid:p},a);const O=this.createMaskHelper(),G=this.querySvc.getEntities({contentTypes:[t],itemIds:n,fields:s,log:this.log.name}).pipe((0,C.T)(ie=>({data:ie.Default.map(ke=>O.data2PickerItem({entity:ke,streamName:null,valueMustUseGuid:p,valueDefaultsToGuid:!0})),loading:!1})));return x.r(G)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),Dn=(()=>{class i extends yn{constructor(){super(),this.log=(0,f.Tq)({DataAdapterEntity:i},Qt),this.dataSourceRaw=(0,le.d)(oc)}syncParams(){this.dataSourceRaw.setParams(this.contentType())}fetchItems(){this.syncParams(),this.dataSource().triggerGetAll()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var lc=g(41573),cc=g(61318);let dc=(()=>{class i extends _a{#e;constructor(){super(),this.log=(0,f.Tq)({DataSourceQuery:i},ba),this.#e=(0,r.WQX)(ue.c$),this.formState=(0,r.WQX)(y.S),this.#t=Number(this.formState.config.appId),this.#n=(0,Q.bo)("streamName",()=>this.settings().StreamName),this.constructorEnd()}#t;#n;getFromBackend(t,n,a){var s=this.log.fnIfInFields("getFromBackend",this.fieldName,{params:t,guids:n},a);const c=this.settings(),p=this.#n(),x=c.Query,O=x?x.includes("/")?c.Query:`${c.Query}/${p}`:null;s.a("queryUrl",{queryName:x,streamName:p,queryUrl:O});const ie=(O?(s.a("queryUrl for request",{queryUrl:O}),this.querySvc.getFromQuery(O,t,this.fieldsToRetrieve(this.settings()),n).pipe((0,cc.W)(()=>[]),(0,C.T)(ae=>({data:ae,loading:!1})))):(s.a("noQueryUrl - will create dummy item"),(0,te.of)({data:{Default:[{Id:-1,Guid:null,Title:this.#e.instant("Fields.Picker.QueryNotConfigured")}]},loading:!1}))).pipe((0,C.T)(ae=>({data:this.#i(ae.data,p),loading:ae.loading})));return s.r(ie)}#i(t,n){const a=this.log.fn("transformData",{data:t,streamName:n});if(!t)return a.r([Pe.message(this.#e,"Fields.Picker.QueryErrorNoData")],"data is null");const s=this.fieldState.config.inputTypeSpecs,c=s.mustUseGuid,p=n.split(",");a.values({inputType:s.inputType,valueMustUseGuid:c,streamNames:p});const x=p.filter(ae=>!t[ae]).map(ae=>Pe.placeholder(this.#e,"Fields.Picker.QueryStreamNotFound"," "+ae)),O=this.createMaskHelper(),G=p.filter(ae=>t[ae]).reduce((ae,ke)=>{const Je=t[ke].map(rt=>O.data2PickerItem({entity:rt,streamName:ke,valueMustUseGuid:c,valueDefaultsToGuid:!0}));return ae.concat(Je)},[]),ie=this.#a(G);return a.r([...x,...ie])}#a(t){return t&&t.forEach(n=>{const a=n.data?.AppId;n.noEdit=null!=a&&a!==this.#t,n.noDelete=n.noEdit}),t}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),Fn=(()=>{class i extends yn{constructor(){super(),this.log=(0,f.Tq)({DataAdapterQuery:i},Qt),this.dataSourceRaw=(0,le.d)(dc),this.#e=(0,le.d)(lc.N).initSignal(this.log.name,this.fieldState.settingExt("UrlParameters"))}#e;syncParams(){this.dataSourceRaw.setParams(this.#e?.result())}fetchItems(){if(this.log.fnIfInFields("fetchItems",this.name),this.syncParams(),!this.fieldState.settings().Query){const n=[Pe.placeholder(this.translate,"Fields.Picker.QueryNotDefined")];return void this.errorOptions.set(n)}this.dataSourceRaw.triggerGetAll()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const uc={...pi,data:!0};let pc=(()=>{class i extends hi{constructor(){super(),this.log=(0,f.Tq)({DataSourceString:i},uc),this.loading=(0,Q.KX)("loading",!1),this.#e=this.createMaskHelper({Value:"Value"}),this.data=(0,Q.bo)("data",()=>{const t=this.settings()._options,n=this.#e,a=this.log.fnIfInFields("data",this.fieldName,{options:t,maskHelper:n}),s=t.map(c=>{const p={Id:null,Guid:null,...c},x=n.data2PickerItem({entity:p,streamName:null,valueMustUseGuid:!1});return a.a("one item",{entity:p,pickerItem:x}),x});return a.r(s)}),this.constructorEnd()}#e;static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),xn=(()=>{class i extends bt{constructor(){super(),this.log=(0,f.Tq)({DataAdapterString:i},bt.logSpecs),this.dataSourceRaw=(0,le.d)(pc),this.myFeatures=(0,Q.KX)("features",{edit:!1,create:!1,delete:!1})}fetchItems(){this.log.fnIf("fetchItems"),this.dataSource().triggerGetAll()}deleteItem(t){throw new Error("Method not implemented.")}editItem(t,n){throw new Error("Method not implemented.")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const hc={all:!1,updateValue:!1,add:!1,set:!1,remove:!1,reorder:!1,doAfterDelete:!1,selectedItems:!1,sepAndOpts:!1,createEntityTypes:!1,attachCallback:!1,typesForNew:!1,correctStringEmptyValue:!0,fields:[...ge.z,"Query"]};let mc=(()=>{class i{#e;#t;constructor(){this.log=(0,f.Tq)({StateAdapter:i},hc),this.#e=(0,r.WQX)(y.S),this.#t=(0,r.WQX)(it.W),this.settings=this.#t.settings,this.myFeatures=(0,Q.KX)("features",{}),this.#i=(0,Q.bo)("createTypesRaw",()=>(0,k.z)(this.settings().CreateTypes,t=>t.split(t.indexOf("\n")>-1?"\n":",")).filter(Boolean)),this.typesForNew=(0,Q.bo)("typesForNew",()=>{const t=this.#i().map(s=>({label:null,guid:s})),n=this.log.fnIfInFields("typesForNew",this.#n,{raw:t}),a=t.map(s=>{const c=s.guid,p=this.#e.settings.ContentTypes.find(x=>x.Id===c||x.Name==c);return{...s,label:(p?.Title??p?.Name??`${c} (not found)`).replace("UI Picker Source - ",""),guid:p?.Id??c}});return n.r(a)}),this.allowsEmptyLazy=(0,Q.KX)("allowsEmptyLazy",(0,Q.KX)("initial",!1)),this.selectedItems=(0,Q.bo)("selectedItems",()=>{const t=this.#t.uiValue();this.log.fnIf("selectedItems",{uiValue:t});const n=this.mapper.toUi(t),a=this.allowsEmptyLazy()();return 0==n.length&&a?[""]:n}),this.values=(0,Q.bo)("values",()=>this.mapper.toUi(this.#t.uiValue()))}setup(t,n){return this.#n=t,this.mapper=n,this}#n;#i;#a;attachCallback(t){const n=this.log.fnIf("attachCallback");return this.#a=t,n.rSilent(this)}#s(t){const n=this.log.fnIfInFields("updateValue",this.#n),s=t([...this.values()]),c=this.mapper.toState(s);this.#t.ui().setIfChanged(c),n.end("",{newValue:c})}add(t){this.log.fnIfInFields("add",this.#n,{value:t}),this.#s(n=>this.features().multiValue?[...n,t]:[t])}set(t){this.log.fnIf("set",{values:t}),this.#s(()=>t)}flush(){this.set([])}reorder(t){this.log.fnIf("reorder",{reorderIndexes:t}),this.#s(n=>((0,Nn.HD)(n,t.previousIndex,t.currentIndex),[...n]))}remove(t){this.log.fnIf("remove",{index:t}),this.#s(n=>(n.splice(t,1),[...n])),this.values().length||setTimeout(()=>this.#a())}doAfterDelete(t){this.log.fnIf("doAfterDelete",{props:t}),this.remove(t.index)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();class wa{constructor(o,t){this.fieldName=o,this.settings=t}}class mi extends wa{toUi(o){return o}toState(o){return o}}class Gs extends wa{toUi(o){return null==o?[]:[o.toString()]}toState(o){const t=null==o||0===o.length?"":ys(o,this.settings().Separator),n=Number(t);return isNaN(n)?null:n}}class fi extends wa{toUi(o){return null==o||""===o?[]:o.split(this.settings().Separator)??[]}toState(o){return null==o||0===o.length?"":ys(o,this.settings().Separator)}}const Ta={UiPickerSourceCustomList:"UiPickerSourceCustomList",UiPickerSourceCustomCsv:"UiPickerSourceCustomCsv"},Rt={...Ta,UiPickerSourceQuery:"UiPickerSourceQuery",UiPickerSourceEntity:"UiPickerSourceEntity",UiPickerSourceAppAssets:"UiPickerSourceAppAssets",UiPickerSourceCss:"UiPickerSourceCss"},Us="UiPickerModeTree";class ka{constructor(o){this.injector=o,this.log=(0,f.Tq)({PickerDataSetup:ka},null)}setupPickerData(o,t){const n=o,a=n.setupAlreadyStarted,s=t.config.inputTypeSpecs.inputType,c=this.log.fn("createPickerAdapters",{pickerData:o,fieldState:t,inputType:s,alreadyStarted:a});if(a)return c.rSilent(o,"exist, already started");n.setupAlreadyStarted=!0;const p=this.#e(t.name,s,t.settings),x=t.settings().dataSourceType,O=this.#t(s,x,p);return o.setup(t.name,t.settings,p,O),o.source?.onAfterViewInit?.(),c.rSilent(o)}#e(o,t,n){const a=Sa[t]?.uiMapper;if(!a)throw new Error(`No State Adapter found for inputTypeSpecs: ${t}`);const s=(0,le.d)(mc,this.injector),c=new a(o,n);return s.setup(o,c),s}#t(o,t,n){const a=this.log.fn("getSourceAdapter",{inputType:o,dataSourceType:t}),s=Sa[o],c=s.forcePickerConfig??t;a.a("use config type",{dataSourceType:t,forcePickerConfig:s.forcePickerConfig,dsType:c});const p=fc[c]??Bs;this.#n(o,p);const x=(0,le.d)(p,this.injector).connectState(n);return a.r(x)}#n(o,t){if(t===Bs||Sa[o]?.sources?.includes(t))return!1;throw new Error(`Specified SourceAdapter not allowed for inputTypeSpecs: ${o}: ${xn}`)}}const fc={[Rt.UiPickerSourceCustomList]:xn,[Rt.UiPickerSourceCustomCsv]:xn,[Rt.UiPickerSourceCss]:Ca,[Rt.UiPickerSourceQuery]:Fn,[Rt.UiPickerSourceEntity]:Dn,[Rt.UiPickerSourceAppAssets]:Ls},Sa={[Ye.u.StringPicker]:{sources:[xn,Fn,Dn,Ca,Ls],uiMapper:fi},[Ye.u.StringDropdown]:{sources:[xn],uiMapper:fi,forcePickerConfig:Rt.UiPickerSourceCustomList},[Ye.u.StringFontIconPicker]:{sources:[Ca],uiMapper:fi,forcePickerConfig:Rt.UiPickerSourceCss},[Ye.u.NumberDropdown]:{sources:[xn],uiMapper:Gs,forcePickerConfig:Rt.UiPickerSourceCustomList},[Ye.u.NumberPicker]:{sources:[xn,Fn,Dn],uiMapper:Gs},[Ye.u.StringDropdownQuery]:{sources:[Fn],uiMapper:fi,forcePickerConfig:Rt.UiPickerSourceQuery},[Ye.u.EntityDefault]:{sources:[Dn],uiMapper:mi,forcePickerConfig:Rt.UiPickerSourceEntity},[Ye.u.EntityQuery]:{sources:[Fn],uiMapper:mi,forcePickerConfig:Rt.UiPickerSourceQuery},[Ye.u.EntityContentBlocks]:{sources:[Dn],uiMapper:mi,forcePickerConfig:Rt.UiPickerSourceEntity},[Ye.u.EntityPicker]:{sources:[Dn,Fn,xn],uiMapper:mi}};var Ea=g(79771),$s=g(20762),gi=g(48405),Hs=g(72551),gc=g(59400),Ws=g(23513),en=g(33900),Xs=g(76882),Ys=g(51903),vc=g(11349),Qs=g(61050),Ia=g(86576);class Ks{dataNodes;expansionModel=new gi.C(!0);trackBy;getLevel;isExpandable;getChildren;toggle(o){this.expansionModel.toggle(this._trackByValue(o))}expand(o){this.expansionModel.select(this._trackByValue(o))}collapse(o){this.expansionModel.deselect(this._trackByValue(o))}isExpanded(o){return this.expansionModel.isSelected(this._trackByValue(o))}toggleDescendants(o){this.expansionModel.isSelected(this._trackByValue(o))?this.collapseDescendants(o):this.expandDescendants(o)}collapseAll(){this.expansionModel.clear()}expandDescendants(o){let t=[o];t.push(...this.getDescendants(o)),this.expansionModel.select(...t.map(n=>this._trackByValue(n)))}collapseDescendants(o){let t=[o];t.push(...this.getDescendants(o)),this.expansionModel.deselect(...t.map(n=>this._trackByValue(n)))}_trackByValue(o){return this.trackBy?this.trackBy(o):o}}class yc extends Ks{getLevel;isExpandable;options;constructor(o,t,n){super(),this.getLevel=o,this.isExpandable=t,this.options=n,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(o){const n=[];for(let a=this.dataNodes.indexOf(o)+1;a<this.dataNodes.length&&this.getLevel(o)<this.getLevel(this.dataNodes[a]);a++)n.push(this.dataNodes[a]);return n}expandAll(){this.expansionModel.select(...this.dataNodes.map(o=>this._trackByValue(o)))}}const vi=new r.nKC("CDK_TREE_NODE_OUTLET_NODE");let Gn=(()=>{class i{viewContainer=(0,r.WQX)(e.c1b);_node=(0,r.WQX)(vi,{optional:!0});constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["","cdkTreeNodeOutlet",""]]})}return i})();class bc{$implicit;level;index;count;constructor(o){this.$implicit=o}}let yi=(()=>{class i{template=(0,r.WQX)(e.C4Q);when;constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[0,"cdkTreeNodeDefWhen","when"]}})}return i})();function Zs(){return Error("Could not find a tree control, levelAccessor, or childrenAccessor for the tree.")}let On=(()=>{class i{_differs=(0,r.WQX)(Y._q3);_changeDetectorRef=(0,r.WQX)(Y.gRc);_elementRef=(0,r.WQX)(e.aKT);_dir=(0,r.WQX)(ua.dS);_onDestroy=new De.B;_dataDiffer;_defaultNodeDef;_dataSubscription;_levels=new Map;_parents=new Map;_ariaSets=new Map;get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}_dataSource;treeControl;levelAccessor;childrenAccessor;trackBy;expansionKey;_nodeOutlet;_nodeDefs;viewChange=new on.t({start:0,end:Number.MAX_VALUE});_expansionModel;_flattenedNodes=new on.t([]);_nodeType=new on.t(null);_nodes=new on.t(new Map);_keyManagerNodes=new on.t([]);_keyManagerFactory=(0,r.WQX)(vc.Z);_keyManager;_viewInit=!1;constructor(){}ngAfterContentInit(){this._initializeKeyManager()}ngAfterContentChecked(){this._updateDefaultNodeDefinition(),this._subscribeToDataChanges()}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this._nodes.complete(),this._keyManagerNodes.complete(),this._nodeType.complete(),this._flattenedNodes.complete(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),this._keyManager?.destroy()}ngOnInit(){this._checkTreeControlUsage(),this._initializeDataDiffer()}ngAfterViewInit(){this._viewInit=!0}_updateDefaultNodeDefinition(){const t=this._nodeDefs.filter(n=>!n.when);this._defaultNodeDef=t[0]}_setNodeTypeIfUnset(t){null===this._nodeType.value&&this._nodeType.next(t)}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._subscribeToDataChanges()}_getExpansionModel(){return this.treeControl?this.treeControl.expansionModel:(this._expansionModel??=new gi.C(!0),this._expansionModel)}_subscribeToDataChanges(){if(this._dataSubscription)return;let t;(0,Qs.y)(this._dataSource)?t=this._dataSource.connect(this):(0,Hs.A)(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=(0,te.of)(this._dataSource)),t&&(this._dataSubscription=this._getRenderData(t).pipe((0,en.Q)(this._onDestroy)).subscribe(n=>{this._renderDataChanges(n)}))}_getRenderData(t){const n=this._getExpansionModel();return(0,Tn.z)([t,this._nodeType,n.changed.pipe((0,fe.Z)(null),(0,A.M)(a=>{this._emitExpansionChanges(a)}))]).pipe((0,Bn.n)(([a,s])=>null===s?(0,te.of)({renderNodes:a,flattenedNodes:null,nodeType:s}):this._computeRenderingData(a,s).pipe((0,C.T)(c=>({...c,nodeType:s})))))}_renderDataChanges(t){null!==t.nodeType?(this._updateCachedData(t.flattenedNodes),this.renderNodeChanges(t.renderNodes),this._updateKeyManagerItems(t.flattenedNodes)):this.renderNodeChanges(t.renderNodes)}_emitExpansionChanges(t){if(!t)return;const n=this._nodes.value;for(const a of t.added)n.get(a)?._emitExpansionState(!0);for(const a of t.removed)n.get(a)?._emitExpansionState(!1)}_initializeKeyManager(){const t=(0,Tn.z)([this._keyManagerNodes,this._nodes]).pipe((0,C.T)(([a,s])=>a.reduce((c,p)=>{const x=s.get(this._getExpansionKey(p));return x&&c.push(x),c},[])));this._keyManager=this._keyManagerFactory(t,{trackBy:a=>this._getExpansionKey(a.data),skipPredicate:a=>!!a.isDisabled,typeAheadDebounceInterval:!0,horizontalOrientation:this._dir.value})}_initializeDataDiffer(){const t=this.trackBy??((n,a)=>this._getExpansionKey(a));this._dataDiffer=this._differs.find([]).create(t)}_checkTreeControlUsage(){}renderNodeChanges(t,n=this._dataDiffer,a=this._nodeOutlet.viewContainer,s){const c=n.diff(t);!c&&!this._viewInit||(c?.forEachOperation((p,x,O)=>{if(null==p.previousIndex)this.insertNode(t[O],O,a,s);else if(null==O)a.remove(x);else{const G=a.get(x);a.move(G,O)}}),c?.forEachIdentityChange(p=>{const x=p.item;null!=p.currentIndex&&(a.get(p.currentIndex).context.$implicit=x)}),s?this._changeDetectorRef.markForCheck():this._changeDetectorRef.detectChanges())}_getNodeDef(t,n){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(s=>s.when&&s.when(n,t))||this._defaultNodeDef}insertNode(t,n,a,s){const c=this._getLevelAccessor(),p=this._getNodeDef(t,n),x=this._getExpansionKey(t),O=new bc(t);O.index=n,s??=this._parents.get(x)??void 0,O.level=c?c(t):void 0!==s&&this._levels.has(this._getExpansionKey(s))?this._levels.get(this._getExpansionKey(s))+1:0,this._levels.set(x,O.level),(a||this._nodeOutlet.viewContainer).createEmbeddedView(p.template,O,n),cn.mostRecentTreeNode&&(cn.mostRecentTreeNode.data=t)}isExpanded(t){return!(!this.treeControl?.isExpanded(t)&&!this._expansionModel?.isSelected(this._getExpansionKey(t)))}toggle(t){this.treeControl?this.treeControl.toggle(t):this._expansionModel&&this._expansionModel.toggle(this._getExpansionKey(t))}expand(t){this.treeControl?this.treeControl.expand(t):this._expansionModel&&this._expansionModel.select(this._getExpansionKey(t))}collapse(t){this.treeControl?this.treeControl.collapse(t):this._expansionModel&&this._expansionModel.deselect(this._getExpansionKey(t))}toggleDescendants(t){this.treeControl?this.treeControl.toggleDescendants(t):this._expansionModel&&(this.isExpanded(t)?this.collapseDescendants(t):this.expandDescendants(t))}expandDescendants(t){if(this.treeControl)this.treeControl.expandDescendants(t);else if(this._expansionModel){const n=this._expansionModel;n.select(this._getExpansionKey(t)),this._getDescendants(t).pipe((0,we.s)(1),(0,en.Q)(this._onDestroy)).subscribe(a=>{n.select(...a.map(s=>this._getExpansionKey(s)))})}}collapseDescendants(t){if(this.treeControl)this.treeControl.collapseDescendants(t);else if(this._expansionModel){const n=this._expansionModel;n.deselect(this._getExpansionKey(t)),this._getDescendants(t).pipe((0,we.s)(1),(0,en.Q)(this._onDestroy)).subscribe(a=>{n.deselect(...a.map(s=>this._getExpansionKey(s)))})}}expandAll(){this.treeControl?this.treeControl.expandAll():this._expansionModel&&this._forEachExpansionKey(t=>this._expansionModel?.select(...t))}collapseAll(){this.treeControl?this.treeControl.collapseAll():this._expansionModel&&this._forEachExpansionKey(t=>this._expansionModel?.deselect(...t))}_getLevelAccessor(){return this.treeControl?.getLevel?.bind(this.treeControl)??this.levelAccessor}_getChildrenAccessor(){return this.treeControl?.getChildren?.bind(this.treeControl)??this.childrenAccessor}_getDirectChildren(t){const n=this._getLevelAccessor(),a=this._expansionModel??this.treeControl?.expansionModel;if(!a)return(0,te.of)([]);const s=this._getExpansionKey(t),c=a.changed.pipe((0,Bn.n)(x=>x.added.includes(s)?(0,te.of)(!0):x.removed.includes(s)?(0,te.of)(!1):gc.w),(0,fe.Z)(this.isExpanded(t)));if(n)return(0,Tn.z)([c,this._flattenedNodes]).pipe((0,C.T)(([x,O])=>x?this._findChildrenByLevel(n,O,t,1):[]));const p=this._getChildrenAccessor();if(p)return(0,Ia.x)(p(t)??[]);throw Zs()}_findChildrenByLevel(t,n,a,s){const c=this._getExpansionKey(a),p=n.findIndex(ie=>this._getExpansionKey(ie)===c),x=t(a),O=x+s,G=[];for(let ie=p+1;ie<n.length;ie++){const ae=t(n[ie]);if(ae<=x)break;ae<=O&&G.push(n[ie])}return G}_registerNode(t){this._nodes.value.set(this._getExpansionKey(t.data),t),this._nodes.next(this._nodes.value)}_unregisterNode(t){this._nodes.value.delete(this._getExpansionKey(t.data)),this._nodes.next(this._nodes.value)}_getLevel(t){return this._levels.get(this._getExpansionKey(t))}_getSetSize(t){return this._getAriaSet(t).length}_getPositionInSet(t){const n=this._getAriaSet(t),a=this._getExpansionKey(t);return n.findIndex(s=>this._getExpansionKey(s)===a)+1}_getNodeParent(t){const n=this._parents.get(this._getExpansionKey(t.data));return n&&this._nodes.value.get(this._getExpansionKey(n))}_getNodeChildren(t){return this._getDirectChildren(t.data).pipe((0,C.T)(n=>n.reduce((a,s)=>{const c=this._nodes.value.get(this._getExpansionKey(s));return c&&a.push(c),a},[])))}_sendKeydownToKeyManager(t){if(t.target===this._elementRef.nativeElement)this._keyManager.onKeydown(t);else{const n=this._nodes.getValue();for(const[,a]of n)if(t.target===a._elementRef.nativeElement){this._keyManager.onKeydown(t);break}}}_getDescendants(t){if(this.treeControl)return(0,te.of)(this.treeControl.getDescendants(t));if(this.levelAccessor){const n=this._findChildrenByLevel(this.levelAccessor,this._flattenedNodes.value,t,1/0);return(0,te.of)(n)}if(this.childrenAccessor)return this._getAllChildrenRecursively(t).pipe((0,Xs.T)((n,a)=>(n.push(...a),n),[]));throw Zs()}_getAllChildrenRecursively(t){return this.childrenAccessor?(0,Ia.x)(this.childrenAccessor(t)).pipe((0,we.s)(1),(0,Bn.n)(n=>{for(const a of n)this._parents.set(this._getExpansionKey(a),t);return(0,te.of)(...n).pipe((0,Ys.H)(a=>(0,Ws.x)((0,te.of)([a]),this._getAllChildrenRecursively(a))))})):(0,te.of)([])}_getExpansionKey(t){return this.expansionKey?.(t)??t}_getAriaSet(t){const n=this._getExpansionKey(t),a=this._parents.get(n),s=a?this._getExpansionKey(a):null;return this._ariaSets.get(s)??[t]}_findParentForNode(t,n,a){if(!a.length)return null;const s=this._levels.get(this._getExpansionKey(t))??0;for(let c=n-1;c>=0;c--){const p=a[c];if((this._levels.get(this._getExpansionKey(p))??0)<s)return p}return null}_flattenNestedNodesWithExpansion(t,n=0){const a=this._getChildrenAccessor();return a?(0,te.of)(...t).pipe((0,Ys.H)(s=>{const c=this._getExpansionKey(s);this._parents.has(c)||this._parents.set(c,null),this._levels.set(c,n);const p=(0,Ia.x)(a(s));return(0,Ws.x)((0,te.of)([s]),p.pipe((0,we.s)(1),(0,A.M)(x=>{this._ariaSets.set(c,[...x??[]]);for(const O of x??[]){const G=this._getExpansionKey(O);this._parents.set(G,s),this._levels.set(G,n+1)}}),(0,Bn.n)(x=>x?this._flattenNestedNodesWithExpansion(x,n+1).pipe((0,C.T)(O=>this.isExpanded(s)?O:[])):(0,te.of)([]))))}),(0,Xs.T)((s,c)=>(s.push(...c),s),[])):(0,te.of)([...t])}_computeRenderingData(t,n){if(this.childrenAccessor&&"flat"===n)return this._clearPreviousCache(),this._ariaSets.set(null,[...t]),this._flattenNestedNodesWithExpansion(t).pipe((0,C.T)(a=>({renderNodes:a,flattenedNodes:a})));if(this.levelAccessor&&"nested"===n){const a=this.levelAccessor;return(0,te.of)(t.filter(s=>0===a(s))).pipe((0,C.T)(s=>({renderNodes:s,flattenedNodes:t})),(0,A.M)(({flattenedNodes:s})=>{this._calculateParents(s)}))}return"flat"===n?(0,te.of)({renderNodes:t,flattenedNodes:t}).pipe((0,A.M)(({flattenedNodes:a})=>{this._calculateParents(a)})):(this._clearPreviousCache(),this._ariaSets.set(null,[...t]),this._flattenNestedNodesWithExpansion(t).pipe((0,C.T)(a=>({renderNodes:t,flattenedNodes:a}))))}_updateCachedData(t){this._flattenedNodes.next(t)}_updateKeyManagerItems(t){this._keyManagerNodes.next(t)}_calculateParents(t){const n=this._getLevelAccessor();if(n){this._clearPreviousCache();for(let a=0;a<t.length;a++){const s=t[a],c=this._getExpansionKey(s);this._levels.set(c,n(s));const p=this._findParentForNode(s,a,t);this._parents.set(c,p);const x=p?this._getExpansionKey(p):null,O=this._ariaSets.get(x)??[];O.splice(a,0,s),this._ariaSets.set(x,O)}}}_forEachExpansionKey(t){const n=[],a=[];this._nodes.value.forEach(s=>{n.push(this._getExpansionKey(s.data)),a.push(this._getDescendants(s.data))}),a.length>0?(0,Tn.z)(a).pipe((0,we.s)(1),(0,en.Q)(this._onDestroy)).subscribe(s=>{s.forEach(c=>c.forEach(p=>n.push(this._getExpansionKey(p)))),t(n)}):t(n)}_clearPreviousCache(){this._parents.clear(),this._levels.clear(),this._ariaSets.clear()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=e.VBU({type:i,selectors:[["cdk-tree"]],contentQueries:function(n,a,s){if(1&n&&e.wni(s,yi,5),2&n){let c;e.mGM(c=e.lsd())&&(a._nodeDefs=c)}},viewQuery:function(n,a){if(1&n&&e.GBs(Gn,7),2&n){let s;e.mGM(s=e.lsd())&&(a._nodeOutlet=s.first)}},hostAttrs:["role","tree",1,"cdk-tree"],hostBindings:function(n,a){1&n&&e.bIt("keydown",function(c){return a._sendKeydownToKeyManager(c)})},inputs:{dataSource:"dataSource",treeControl:"treeControl",levelAccessor:"levelAccessor",childrenAccessor:"childrenAccessor",trackBy:"trackBy",expansionKey:"expansionKey"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(n,a){1&n&&e.eu8(0,0)},dependencies:[Gn],encapsulation:2})}return i})(),cn=(()=>{class i{_elementRef=(0,r.WQX)(e.aKT);_tree=(0,r.WQX)(On);_tabindex=-1;_type="flat";get role(){return"treeitem"}set role(t){}get isExpandable(){return this._isExpandable()}set isExpandable(t){this._inputIsExpandable=t,(!this.data||this._isExpandable)&&this._inputIsExpandable&&(this._inputIsExpanded?this.expand():!1===this._inputIsExpanded&&this.collapse())}get isExpanded(){return this._tree.isExpanded(this._data)}set isExpanded(t){this._inputIsExpanded=t,t?this.expand():this.collapse()}isDisabled;typeaheadLabel;getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}activation=new r.bkB;expandedChange=new r.bkB;static mostRecentTreeNode=null;_destroyed=new De.B;_dataChanges=new De.B;_inputIsExpandable=!1;_inputIsExpanded=void 0;_shouldFocus=!0;_parentNodeAriaLevel;get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._dataChanges.next())}_data;get isLeafNode(){return void 0!==this._tree.treeControl?.isExpandable&&!this._tree.treeControl.isExpandable(this._data)||void 0===this._tree.treeControl?.isExpandable&&0===this._tree.treeControl?.getDescendants(this._data).length}get level(){return this._tree._getLevel(this._data)??this._parentNodeAriaLevel}_isExpandable(){return this._tree.treeControl?!this.isLeafNode:this._inputIsExpandable}_getAriaExpanded(){return this._isExpandable()?String(this.isExpanded):null}_getSetSize(){return this._tree._getSetSize(this._data)}_getPositionInSet(){return this._tree._getPositionInSet(this._data)}_changeDetectorRef=(0,r.WQX)(Y.gRc);constructor(){i.mostRecentTreeNode=this}ngOnInit(){this._parentNodeAriaLevel=function _c(i){let o=i.parentElement;for(;o&&!xc(o);)o=o.parentElement;return o?o.classList.contains("cdk-nested-tree-node")?(0,Y.Udg)(o.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._tree._getExpansionModel().changed.pipe((0,C.T)(()=>this.isExpanded),(0,zn.F)(),(0,en.Q)(this._destroyed)).pipe((0,en.Q)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._tree._setNodeTypeIfUnset(this._type),this._tree._registerNode(this)}ngOnDestroy(){i.mostRecentTreeNode===this&&(i.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}getParent(){return this._tree._getNodeParent(this)??null}getChildren(){return this._tree._getNodeChildren(this)}focus(){this._tabindex=0,this._shouldFocus&&this._elementRef.nativeElement.focus(),this._changeDetectorRef.markForCheck()}unfocus(){this._tabindex=-1,this._changeDetectorRef.markForCheck()}activate(){this.isDisabled||this.activation.next(this._data)}collapse(){this.isExpandable&&this._tree.collapse(this._data)}expand(){this.isExpandable&&this._tree.expand(this._data)}makeFocusable(){this._tabindex=0,this._changeDetectorRef.markForCheck()}_focusItem(){this.isDisabled||this._tree._keyManager.focusItem(this)}_setActiveItem(){this.isDisabled||(this._shouldFocus=!1,this._tree._keyManager.focusItem(this),this._shouldFocus=!0)}_emitExpansionState(t){this.expandedChange.emit(t)}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["cdk-tree-node"]],hostAttrs:["role","treeitem",1,"cdk-tree-node"],hostVars:5,hostBindings:function(n,a){1&n&&e.bIt("click",function(){return a._setActiveItem()})("focus",function(){return a._focusItem()}),2&n&&(e.Avn("tabIndex",a._tabindex),e.BMQ("aria-expanded",a._getAriaExpanded())("aria-level",a.level+1)("aria-posinset",a._getPositionInSet())("aria-setsize",a._getSetSize()))},inputs:{role:"role",isExpandable:[2,"isExpandable","isExpandable",Y.L39],isExpanded:"isExpanded",isDisabled:[2,"isDisabled","isDisabled",Y.L39],typeaheadLabel:[0,"cdkTreeNodeTypeaheadLabel","typeaheadLabel"]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["cdkTreeNode"]})}return i})();function xc(i){const o=i.classList;return!(!o?.contains("cdk-nested-tree-node")&&!o?.contains("cdk-tree"))}const Cc=/([A-Za-z%]+)$/;let Pa=(()=>{class i{_treeNode=(0,r.WQX)(cn);_tree=(0,r.WQX)(On);_element=(0,r.WQX)(e.aKT);_dir=(0,r.WQX)(ua.dS,{optional:!0});_currentPadding;_destroyed=new De.B;indentUnits="px";get level(){return this._level}set level(t){this._setLevelInput(t)}_level;get indent(){return this._indent}set indent(t){this._setIndentInput(t)}_indent=40;constructor(){this._setPadding(),this._dir?.change.pipe((0,en.Q)(this._destroyed)).subscribe(()=>this._setPadding(!0)),this._treeNode._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=(this._treeNode.data&&this._tree._getLevel(this._treeNode.data))??null,n=null==this._level?t:this._level;return"number"==typeof n?`${n*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const n=this._paddingIndent();if(n!==this._currentPadding||t){const a=this._element.nativeElement,s=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",c="paddingLeft"===s?"paddingRight":"paddingLeft";a.style[s]=n||"",a.style[c]="",this._currentPadding=n}}_setLevelInput(t){this._level=isNaN(t)?null:t,this._setPadding()}_setIndentInput(t){let n=t,a="px";if("string"==typeof t){const s=t.split(Cc);n=s[0],a=s[1]||a}this.indentUnits=a,this._indent=(0,Y.Udg)(n),this._setPadding()}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:[2,"cdkTreeNodePadding","level",Y.Udg],indent:[0,"cdkTreeNodePaddingIndent","indent"]}})}return i})(),Da=(()=>{class i{_tree=(0,r.WQX)(On);_treeNode=(0,r.WQX)(cn);recursive=!1;constructor(){}_toggle(){this.recursive?this._tree.toggleDescendants(this._treeNode.data):this._tree.toggle(this._treeNode.data),this._tree._keyManager.focusItem(this._treeNode)}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["","cdkTreeNodeToggle",""]],hostAttrs:["tabindex","-1"],hostBindings:function(n,a){1&n&&e.bIt("click",function(c){return a._toggle(),c.stopPropagation()})("keydown.Enter",function(c){return a._toggle(),c.preventDefault()})("keydown.Space",function(c){return a._toggle(),c.preventDefault()})},inputs:{recursive:[2,"cdkTreeNodeToggleRecursive","recursive",Y.L39]}})}return i})(),wc=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=e.$C({type:i});static \u0275inj=r.G2t({})}return i})();var Fa=g(63680),Oa=g(63617);let Js=(()=>{class i extends cn{get tabIndexInputBinding(){return this._tabIndexInputBinding}set tabIndexInputBinding(t){this._tabIndexInputBinding=t}_tabIndexInputBinding;defaultTabIndex=0;_getTabindexAttribute(){return function Tc(i){return!!i._isNoopTreeKeyManager}(this._tree._keyManager)?this.tabIndexInputBinding:this._tabindex}get disabled(){return this.isDisabled}set disabled(t){this.isDisabled=t}constructor(){super();const t=(0,r.WQX)(new Y.ES_("tabindex"),{optional:!0});this.tabIndexInputBinding=Number(t)||this.defaultTabIndex}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:5,hostBindings:function(n,a){1&n&&e.bIt("click",function(){return a._focusItem()}),2&n&&(e.Avn("tabIndex",a._getTabindexAttribute()),e.BMQ("aria-expanded",a._getAriaExpanded())("aria-level",a.level+1)("aria-posinset",a._getPositionInSet())("aria-setsize",a._getSetSize()))},inputs:{tabIndexInputBinding:[2,"tabIndex","tabIndexInputBinding",t=>null==t?0:(0,Y.Udg)(t)],disabled:[2,"disabled","disabled",Y.L39]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["matTreeNode"],features:[e.Jv_([{provide:cn,useExisting:i}]),e.Vt3]})}return i})(),qs=(()=>{class i extends yi{data;static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275dir=e.FsC({type:i,selectors:[["","matTreeNodeDef",""]],inputs:{when:[0,"matTreeNodeDefWhen","when"],data:[0,"matTreeNode","data"]},features:[e.Jv_([{provide:yi,useExisting:i}]),e.Vt3]})}return i})(),er=(()=>{class i extends Pa{get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275dir=e.FsC({type:i,selectors:[["","matTreeNodePadding",""]],inputs:{level:[2,"matTreeNodePadding","level",Y.Udg],indent:[0,"matTreeNodePaddingIndent","indent"]},features:[e.Jv_([{provide:Pa,useExisting:i}]),e.Vt3]})}return i})(),Aa=(()=>{class i{viewContainer=(0,r.WQX)(e.c1b);_node=(0,r.WQX)(vi,{optional:!0});static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["","matTreeNodeOutlet",""]],features:[e.Jv_([{provide:Gn,useExisting:i}])]})}return i})(),tr=(()=>{class i extends On{_nodeOutlet=void 0;static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275cmp=e.VBU({type:i,selectors:[["mat-tree"]],viewQuery:function(n,a){if(1&n&&e.GBs(Aa,7),2&n){let s;e.mGM(s=e.lsd())&&(a._nodeOutlet=s.first)}},hostAttrs:[1,"mat-tree"],exportAs:["matTree"],features:[e.Jv_([{provide:On,useExisting:i}]),e.Vt3],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(n,a){1&n&&e.eu8(0,0)},dependencies:[Aa],styles:[".mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-sys-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-sys-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-sys-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height, 48px)}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2})}return i})(),nr=(()=>{class i extends Da{static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275dir=e.FsC({type:i,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:[0,"matTreeNodeToggleRecursive","recursive"]},features:[e.Jv_([{provide:Da,useExisting:i}]),e.Vt3]})}return i})(),Sc=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=e.$C({type:i});static \u0275inj=r.G2t({imports:[wc,Fa.jI]})}return i})();class Ec{transformFunction;getLevel;isExpandable;getChildren;constructor(o,t,n,a){this.transformFunction=o,this.getLevel=t,this.isExpandable=n,this.getChildren=a}_flattenNode(o,t,n,a){const s=this.transformFunction(o,t);if(n.push(s),this.isExpandable(s)){const c=this.getChildren(o);c&&(Array.isArray(c)?this._flattenChildren(c,t,n,a):c.pipe((0,we.s)(1)).subscribe(p=>{this._flattenChildren(p,t,n,a)}))}return n}_flattenChildren(o,t,n,a){o.forEach((s,c)=>{let p=a.slice();p.push(c!=o.length-1),this._flattenNode(s,t+1,n,p)})}flattenNodes(o){let t=[];return o.forEach(n=>this._flattenNode(n,0,t,[])),t}expandFlattenedNodes(o,t){let n=[],a=[];return a[0]=!0,o.forEach(s=>{let c=!0;for(let p=0;p<=this.getLevel(s);p++)c=c&&a[p];c&&n.push(s),this.isExpandable(s)&&(a[this.getLevel(s)+1]=t.isExpanded(s))}),n}}class Ic extends Qs.q{_treeControl;_treeFlattener;_flattenedData=new on.t([]);_expandedData=new on.t([]);get data(){return this._data.value}set data(o){this._data.next(o),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}_data=new on.t([]);constructor(o,t,n){super(),this._treeControl=o,this._treeFlattener=t,n&&(this.data=n)}connect(o){return(0,Oa.h)(o.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,C.T)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}var Un=g(39333);let fn=(()=>{class i{constructor(){this.log=(0,f.Tq)({PickerPartBaseComponent:i}),this.fieldState=(0,r.WQX)(it.W),this.editRoutingService=(0,r.WQX)(gt),this.enableTextEntry=this.fieldState.settingExt("EnableTextEntry"),this.pickerData=this.fieldState.pickerData,this.isInFreeTextMode=this.pickerData.isInFreeTextMode,this.ui=this.fieldState.ui,this.selectedItems=this.pickerData.selectedAll,this.selectedItem=this.pickerData.selectedOne,this.itemCount=(0,Q.bo)("itemCount",()=>this.selectedItems().length),this.config=this.fieldState.config,this.basics=this.fieldState.basics,this.features=this.pickerData.features}expandDialog(){const t=this.fieldState.config;t.initialDisabled||this.editRoutingService.expand(!0,t.index,t.entityGuid)}openNewEntityDialog(t){this.log.a(`openNewEntityDialog: '${t}'`),this.pickerData.source.editItem(null,t)}toggleFreeText(t){this.log.a(`toggleFreeText ${t}`),!t&&this.pickerData.toggleFreeTextMode()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-part-base"]],decls:0,vars:0,template:function(n,a){},encapsulation:2})}}return i})();function Mc(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",3),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.edit(a.item().value,a.item().id))}),e.j41(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.ui().disabled||t.config.initialDisabled)}}function Pc(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",4),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.removeItem(a.index()))}),e.j41(1,"mat-icon"),e.EFF(2,"do_not_disturb_on"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.ui().disabled)}}function Dc(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.deleteItem(a.index(),a.item().value))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.ui().disabled)}}const Fc={buttons:!0};let Ra=(()=>{class i extends fn{constructor(){super(),this.log=(0,f.Tq)({PickerItemButtonsComponent:i},Fc),this.item=Y.hFB.required(),this.index=Y.hFB.required(),this.show=Y.hFB.required(),this.uiFeatures=(0,Y.hFB)(null),this.buttons=(0,Q.bo)("buttons",()=>{const t=this.item(),n=this.show()&&!!t,a=this.features(),s=this.uiFeatures(),c={edit:a.edit&&0!=s?.edit&&n&&!t?.noEdit,remove:a.remove&&0!=s?.remove&&n&&!t?.noRemove,delete:a.delete&&0!=s?.delete&&n&&!t?.noDelete};return this.log.aIf("buttons",{merged:c,item:t,show:n,f:a,uif:s}),c})}edit(t,n){this.log.a(`edit guid: '${t}'; id: '${n}'`),this.pickerData.source.editItem({entityGuid:t,entityId:n},null)}removeItem(t){this.log.a(`removeItem index: '${t}'`),this.pickerData.state.remove(t)}deleteItem(t,n){this.log.a(`deleteItem index: '${t}'; entityGuid: '${n}'`),this.pickerData.source.deleteItem({index:t,entityGuid:n})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-item-buttons"]],inputs:{item:[1,"item"],index:[1,"index"],show:[1,"show"],uiFeatures:[1,"uiFeatures"]},features:[e.Vt3],decls:3,vars:3,consts:[["mat-icon-button","","matSuffix","","tippyTranslate","Fields.Picker.Edit","appClickStopPropagation","",1,"picker-inline-button",3,"disabled"],["mat-icon-button","","matSuffix","","tippyTranslate","Fields.Picker.Remove","appClickStopPropagation","",1,"picker-inline-button",3,"disabled"],["mat-icon-button","","matSuffix","","tippyTranslate","Fields.Picker.Delete","appClickStopPropagation","",1,"picker-inline-button",3,"disabled"],["mat-icon-button","","matSuffix","","tippyTranslate","Fields.Picker.Edit","appClickStopPropagation","",1,"picker-inline-button",3,"click","disabled"],["mat-icon-button","","matSuffix","","tippyTranslate","Fields.Picker.Remove","appClickStopPropagation","",1,"picker-inline-button",3,"click","disabled"],["mat-icon-button","","matSuffix","","tippyTranslate","Fields.Picker.Delete","appClickStopPropagation","",1,"picker-inline-button",3,"click","disabled"]],template:function(n,a){1&n&&(e.nVh(0,Mc,3,1,"button",0),e.nVh(1,Pc,3,1,"button",1),e.nVh(2,Dc,3,1,"button",2)),2&n&&(e.vxM(a.buttons().edit?0:-1),e.R7$(),e.vxM(a.buttons().remove?1:-1),e.R7$(),e.vxM(a.buttons().delete?2:-1))},dependencies:[Pt.Hl,qt.iY,j.m_,j.An,At.e,Un.c],styles:[".picker-inline-button[_ngcontent-%COMP%]{scale:.8;margin-left:-4px;margin-right:-4px}"]})}}return i})();var bi=g(97930);function Oc(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-icon",1),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.goToLink())}),e.EFF(1,"open_in_new"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("tippy",t.helpLink())}}let Ac=(()=>{class i{constructor(){this.helpLink=(0,Y.hFB)()}goToLink(){window.open(this.helpLink(),"_blank")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-help"]],inputs:{helpLink:[1,"helpLink"]},decls:1,vars:1,consts:[["appClickStopPropagation","",3,"tippy"],["appClickStopPropagation","",3,"click","tippy"]],template:function(n,a){1&n&&e.nVh(0,Oc,2,1,"mat-icon",0),2&n&&e.vxM(a.helpLink()?0:-1)},dependencies:[j.m_,j.An,At.e,Un.c],encapsulation:2})}}return i})();function Rc(i,o){if(1&i&&(e.j41(0,"mat-icon",0),e.EFF(1," info "),e.k0s()),2&i){const t=e.XpG();e.Y8G("tippy",t.infoBox())("tippyAllowHtml",!0)("tippyArrow",!0)}}let Lc=(()=>{class i{constructor(){this.infoBox=(0,Y.hFB)()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-icon-info"]],inputs:{infoBox:[1,"infoBox"]},decls:1,vars:1,consts:[["tippyFontSize","larger","appClickStopPropagation","",3,"tippy","tippyAllowHtml","tippyArrow"]],template:function(n,a){1&n&&e.nVh(0,Rc,2,3,"mat-icon",0),2&n&&e.vxM(a.infoBox()?0:-1)},dependencies:[j.m_,j.An,At.e,Un.c],encapsulation:2})}}return i})();var ir=g(60316),La=g(839);const Vc={instanceAlreadyExist:"Instance with name #tippyName already exist, please pick unique [tippyName]",instanceNotExist:"Instance with name #tippyName does not exist",childrenInstancesNotFoundGrouped:"No children tippy instances found within 'ngx-tippy-group' component",childrenInstancesNotFoundSingleton:"No children tippy instances found within 'ngx-tippy-singleton' component",singletonInstanceAlreadyExist:"Singleton instance with name #singletonName already exist, please pick unique [singletonName]"},Nc=new r.nKC("NGX_TIPPY_MESSAGES",{providedIn:"root",factory:()=>Vc}),jc=new r.nKC("NGX_TIPPY_CONFIG",{providedIn:"root",factory:()=>({})});let Bc=(()=>{class i{isDevMode(){return(0,Y.naY)()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=r.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var tn=function(i){return i.SetInstance="setInstance",i.Show="show",i.Hide="hide",i.HideWithInteractivity="hideWithInteractivity",i.Disable="disable",i.Enable="enable",i.SetProps="setProps",i.SetContent="setContent",i.Unmount="unmount",i.ClearDelayTimeouts="clearDelayTimeouts",i.Destroy="destroy",i}(tn||{}),_i=function(i){return i.TippyName="tippyName",i.SingletonName="singletonName",i}(_i||{});class Gc{constructor(o){this.args=o,this.compRef=this.args.viewContainerRef.createComponent(this.args.component)}detectChanges(){return this.compRef?.changeDetectorRef.detectChanges(),this}getElement(){return this.compRef?.location.nativeElement}destroy(){this.compRef?.destroy(),this.compRef=null}}const ar=(i,o)=>{i&&i instanceof Element&&o.setStyle(i,"display","block")};class Wc{constructor(o){this.args=o,this.viewRef=this.args.tpl.createEmbeddedView(this.args.context||{}),this.viewRef.detectChanges(),this.args.appRef.attachView(this.viewRef)}detectChanges(){return this.viewRef?.detectChanges(),this}getElement(){if(!this.viewRef)return null;const o=this.viewRef.rootNodes;return 1===o.length&&o[0].nodeType===Node.ELEMENT_NODE?this.element=o[0]:(this.element=document.createElement("div"),this.element.append(...o)),this.element}destroy(){this.viewRef&&(1!==this.viewRef.rootNodes[0]&&(this.element?.parentNode?.removeChild(this.element),this.element=null),this.viewRef.destroy(),this.viewRef=null)}}let sr=(()=>{class i{constructor(t){this.appRef=t}getViewRefInstance(t,n,a={}){let s;return(i=>i instanceof e.C4Q)(t)?(a.$implicit=n,s=this.createTemplate(t,a)):s=(i=>"function"==typeof i)(t)?this.createComponent(t):(i=>i instanceof HTMLTemplateElement)(t)?{getElement:()=>t.content}:{getElement:()=>t},s}createTemplate(t,n){return new Wc({tpl:t,context:n,appRef:this.appRef})}createComponent(t){return new Gc({component:t,viewContainerRef:this.viewContainerRef})}}return i.\u0275fac=function(t){return new(t||i)(r.KVO(e.o8S))},i.\u0275prov=r.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Xc=(()=>{class i{constructor(t,n,a,s){this.devModeService=n,this.ngxViewService=a,this.messagesDict=s,this.tippyInstances=new Map,this.tippySingletonEntryInstances=new Map,this.tippyInstances$=new De.B,this.createRenderer(t)}setInstance(t,n){if(this.tippyInstances.get(t)){const s=this.getMessage({reason:"instanceAlreadyExist",messageFor:_i.TippyName,name:t});this.throwError(s)}else this.tippyInstances.set(t,n),this.emitInstancesChange({name:t,reason:tn.SetInstance,instance:n})}getInstance(t){return this.tippyInstances.has(t)?this.tippyInstances.get(t):null}getInstances(){return this.tippyInstances.size?this.tippyInstances:null}setSingletonInstance(t,n){if(this.tippySingletonEntryInstances.has(t)){const a=this.getMessage({reason:"singletonInstanceAlreadyExist",messageFor:_i.SingletonName,name:t});this.throwError(a)}else this.tippySingletonEntryInstances.set(t,n)}getSingletonInstance(t){return this.tippySingletonEntryInstances.has(t)?this.tippySingletonEntryInstances.get(t):null}getSingletonInstances(){return this.tippySingletonEntryInstances.size?this.tippySingletonEntryInstances:null}show(t){this.callNativeTippyMethod(t,tn.Show)}hide(t){this.callNativeTippyMethod(t,tn.Hide)}hideWithInteractivity(t,n){this.callNativeTippyMethod(t,tn.HideWithInteractivity,n)}disable(t){this.callNativeTippyMethod(t,tn.Disable)}enable(t){this.callNativeTippyMethod(t,tn.Enable)}setProps(t,n){this.callNativeTippyMethod(t,tn.SetProps,n)}setContent(t,n,a){const s=this.getInstance(t);if(s){if(n){const c=this.ngxViewService.getViewRefInstance(n,s.tippyName,a),p=c.getElement();p?(ar(p,this.renderer),s.setContent(p),s.viewRef=c,this.emitInstancesChange({name:t,reason:"setContent",instance:s})):this.throwError("message")}}else this.throwErrorInstanceNotExist(t)}unmount(t){this.callNativeTippyMethod(t,tn.Unmount)}clearDelayTimeouts(t){this.callNativeTippyMethod(t,tn.ClearDelayTimeouts)}destroy(t){this.callNativeTippyMethod(t,tn.Destroy),this.tippyInstances.delete(t)}setDefaultProps(t){La.Ay.setDefaultProps(t)}showAll(){this.tippyInstances.forEach((t,n)=>{t.show(),this.emitInstancesChange({name:n,reason:"show",instance:t})})}hideAll(t){const n=this.getInstance(t?.excludeName||""),a=t?.duration;(0,La.cJ)({duration:a,...n})}get instancesChanges(){return this.tippyInstances$.asObservable()}callNativeTippyMethod(t,n,a){const s=this.getInstance(t);s?(s[n](a),this.emitInstancesChange({name:t,reason:n,instance:s})):this.throwErrorInstanceNotExist(t)}emitInstancesChange({name:t,reason:n,instance:a}){this.tippyInstances$.next({name:t,reason:n,instance:a})}createRenderer(t){this.renderer=t.createRenderer(null,null)}throwErrorInstanceNotExist(t){const n=this.getMessage({reason:"instanceNotExist",messageFor:_i.TippyName,name:t});this.throwError(n)}throwError(t,n=Error){if(this.devModeService.isDevMode())throw new n(t)}getMessage({reason:t,messageFor:n,name:a}){return this.messagesDict[t].replace(`#${n}`,`'${a}'`)}}return i.\u0275fac=function(t){return new(t||i)(r.KVO(e._9s),r.KVO(Bc),r.KVO(sr),r.KVO(Nc))},i.\u0275prov=r.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Yc=(()=>{class i{constructor(t,n,a,s,c,p,x){this.tippyEl=t,this.renderer=n,this.ngxTippyService=a,this.ngxViewService=s,this.viewContainerRef=c,this.platform=p,this.ngxTippyConfig=x,this.cachedInstances=new Map}ngOnInit(){(0,ir.Vy)(this.platform)||(this.ngxViewService.viewContainerRef=this.viewContainerRef,this.initTippy())}ngOnChanges(t){this.handleChanges(t)}ngOnDestroy(){this.destroyTippy()}initTippy(){const t=this.tippyEl.nativeElement;if(null==this.ngxTippy)return;const n=this.ngxViewService.getViewRefInstance(this.ngxTippy,this.tippyName,this.tippyContext),a=n.getElement(),s=(0,La.Ay)(t,{...this.ngxTippyConfig,...this.tippyProps||{},...a&&{content:a}});this.tippyName=this.tippyName||`tippy-${s.id}`,ar(a,this.renderer),this.setTippyInstance({tippyTarget:t,tippyName:this.tippyName,viewRef:n}),this.setClassName(this.tippyInstance,this.tippyClassName),this.writeInstancesToStorage(this.tippyInstance,this.tippyName)}setTippyInstance({tippyTarget:t,tippyName:n,viewRef:a}){this.tippyInstance={...t._tippy,tippyName:n,viewRef:a}}setClassName(t,n){if(!n||!t)return;const a=n.split(" ");a.length&&a.forEach(s=>{this.renderer.addClass(t.popper.firstElementChild,s)})}removeClassName(t,n){if(!n||!t)return;const a=n.split(" ");a.length&&a.forEach(s=>{this.renderer.removeClass(t.popper.firstElementChild,s)})}writeInstancesToStorage(t,n){t&&this.ngxTippyService.setInstance(n,t)}handleChanges({tippyName:t,ngxTippy:n,tippyProps:a,tippyClassName:s,tippyContext:c}){t&&!t.firstChange&&this.handleNameChanges(t),n&&!n.firstChange&&this.handleContentChanges(n),a&&!a.firstChange&&this.handlePropsChanges(a),s&&!s.firstChange&&this.handleClassChanges(s),c&&!c.firstChange&&this.handleContextChanges(c)}handleNameChanges({previousValue:t,currentValue:n}){const a=this.cachedTippyInstances();!a||!this.tippyInstance||(this.deleteEntryInStorage(a,t),this.tippyInstance={...this.tippyInstance,tippyName:n},a.set(n,this.tippyInstance))}handleContentChanges({currentValue:t}){this.tippyInstance&&this.tippyName?(this.ngxTippyService.setContent(this.tippyName,t),null==t?this.ngxTippyService.disable(this.tippyName):this.ngxTippyService.enable(this.tippyName)):this.initTippy()}handlePropsChanges({currentValue:t}){this.tippyName&&this.ngxTippyService.setProps(this.tippyName,t)}handleClassChanges({previousValue:t,currentValue:n}){this.removeClassName(this.tippyInstance,t),this.setClassName(this.tippyInstance,n)}handleContextChanges({currentValue:t}){this.tippyInstance&&this.tippyName&&this.ngxTippy?this.ngxTippyService.setContent(this.tippyName,this.ngxTippy,t):this.initTippy()}cachedTippyInstances(){const t=this.ngxTippyService.getInstances();return this.cachedInstances.has(t)?this.cachedInstances.get(t):(this.cachedInstances.set(t,t),t)}destroyTippy(){const t=this.cachedTippyInstances(),n=this.tippyInstance;!n||!t||(this.clearInstance({tippyInstance:n,tippyInstances:t}),this.resetLocalInstance(),this.clearCachedInstances())}clearInstance({tippyInstance:t,tippyInstances:n}){const{tippyName:a}=t;this.clearViewRef(t),this.destroyTippyInstance(t),this.deleteEntryInStorage(n,a)}clearViewRef(t){t.viewRef?.destroy&&t.viewRef.destroy()}destroyTippyInstance(t){t.destroy()}deleteEntryInStorage(t,n){t.delete(n)}resetLocalInstance(){this.tippyInstance=void 0}clearCachedInstances(){this.cachedInstances.clear()}}return i.\u0275fac=function(t){return new(t||i)(e.rXU(e.aKT),e.rXU(e.sFG),e.rXU(Xc),e.rXU(sr),e.rXU(e.c1b),e.rXU(e.Agw),e.rXU(jc))},i.\u0275dir=e.FsC({type:i,selectors:[["","ngxTippy",""]],inputs:{ngxTippy:"ngxTippy",tippyProps:"tippyProps",tippyName:"tippyName",tippyClassName:"tippyClassName",tippyContext:"tippyContext"},standalone:!1,features:[e.OA$]}),i})(),Qc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=r.G2t({imports:[Ue.MD]}),i})();function Kc(i,o){if(1&i&&e.nrm(0,"i"),2&i){const t=e.XpG(2);e.HbH(e.VkB("icon-preview ",t.classWithoutDot(t.item().previewValue)))}}function Zc(i,o){if(1&i&&(e.j41(0,"mat-icon"),e.EFF(1),e.k0s(),e.EFF(2," \xa0 ")),2&i){const t=e.XpG(2);e.R7$(),e.JRh(t.item().previewValue)}}function Jc(i,o){if(1&i&&(e.nrm(0,"img",2),e.j41(1,"div",3,0),e.nrm(3,"img",4),e.k0s()),2&i){const t=e.sdS(2),n=e.XpG(2);e.Y8G("ngxTippy",t)("src",n.item().previewValue,e.B4B)("alt",n.item().value),e.R7$(3),e.Y8G("src",n.item().previewValue,e.B4B)("alt",n.item().value)}}function qc(i,o){if(1&i&&(e.nrm(0,"img",2),e.j41(1,"div",3,0),e.nrm(3,"img",4),e.k0s()),2&i){const t=e.sdS(2),n=e.XpG(2);e.Y8G("ngxTippy",t)("src",n.imageResize(n.item().previewValue,24,24),e.B4B)("alt",n.item().value),e.R7$(3),e.Y8G("src",n.imageResize(n.item().previewValue,140,140),e.B4B)("alt",n.item().value)}}function ed(i,o){if(1&i&&e.nVh(0,Kc,1,3,"i",1)(1,Zc,3,1)(2,Jc,4,5)(3,qc,4,5),2&i){let t;const n=e.XpG();e.vxM("icon-css"===(t=n.settings().PreviewType)?0:"icon-material"===t?1:"svg"===t?2:"image"===t?3:-1)}}let rr=(()=>{class i{constructor(){this.item=Y.hFB.required(),this.settings=Y.hFB.required(),this.debugMessage=(0,Ne.EW)(()=>"")}classWithoutDot(t){return t?.replace(/\./g,"")}imageResize(t,n,a){if(!t)return t;let s=t.replace(/[\?&]w=\d+/g,"").replace(/[\?&]h=\d+/g,"");return s=s.replace(/width=\d+/g,`width=${n}`).replace(/height=\d+/g,`height=${a}`),s.includes("width=")||(s+=(s.includes("?")?"&":"?")+`width=${n}`),s.includes("height=")||(s+=(s.includes("?")?"&":"?")+`height=${a}`),s}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-item-preview"]],inputs:{item:[1,"item"],settings:[1,"settings"]},decls:2,vars:2,consts:[["tippyTemplate",""],[3,"class"],[1,"image-preview",3,"ngxTippy","src","alt"],[1,"tippy-custom"],[1,"image-tippy",3,"src","alt"]],template:function(n,a){if(1&n&&(e.EFF(0),e.nVh(1,ed,4,1)),2&n){let s;e.SpI(" ",a.debugMessage()," "),e.R7$(),e.vxM(null!=(s=a.item())&&s.previewValue?1:-1)}},dependencies:[j.An,Qc,Yc],styles:[".picker-option-contents[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%!important}.picker-option-label[_ngcontent-%COMP%]{flex:1 1 auto}.picker-option-wrapper[_ngcontent-%COMP%]   .picker-option-info[_ngcontent-%COMP%]{display:none}.picker-option-wrapper[_ngcontent-%COMP%]:hover   .picker-option-info[_ngcontent-%COMP%]{display:block}.picker-option[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-preview[_ngcontent-%COMP%]{display:flex;height:18px;margin-right:8px}.image-preview[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:8px;border-radius:2px;object-fit:cover;object-position:center}  .tippy-content{padding:6px!important}.tippy-custom[_ngcontent-%COMP%]{background-color:#fff!important}.tippy-custom[_ngcontent-%COMP%]   .image-tippy[_ngcontent-%COMP%]{width:140px;height:140px;border-radius:2px;object-fit:cover;object-position:center}"]})}}return i})();function nd(i,o){1&i&&e.nrm(0,"app-feature-icon-with-dialog",5),2&i&&e.Y8G("featureNameId",o.$implicit)}function id(i,o){if(1&i&&e.nrm(0,"app-picker-item-buttons",6),2&i){const t=e.XpG();e.Y8G("show",t.show())("item",t.item())("index",t.index())("uiFeatures",t.uiFeatures())}}function ad(i,o){if(1&i&&e.nrm(0,"app-picker-item-buttons",6),2&i){const t=e.XpG();e.Y8G("show",t.show())("item",t.item())("index",t.index())("uiFeatures",t.uiFeatures())}}let Va=(()=>{class i{constructor(){this.item=Y.hFB.required(),this.index=(0,Y.hFB)(0),this.settings=Y.hFB.required(),this.uiFeatures=(0,Y.hFB)(null),this.show=(0,Y.hFB)(!1),this.actionsFirst=(0,Y.hFB)(!1),this.featureWarnings=(0,Ne.EW)(()=>{const t=this.item().rules;if(!t)return[];const n=t.split(";").map(a=>a.trim()).filter(a=>a.startsWith("warn-req=feature:")).map(a=>a.split(":")[1]);return console.log("list",n),n},{debugName:"featureWarnings"})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-item-label"]],inputs:{item:[1,"item"],index:[1,"index"],settings:[1,"settings"],uiFeatures:[1,"uiFeatures"],show:[1,"show"],actionsFirst:[1,"actionsFirst"]},decls:12,vars:7,consts:[[1,"picker-option-contents"],[1,"picker-option"],[3,"item","settings"],[1,"picker-option-label"],[1,"picker-option-info"],[3,"featureNameId"],[1,"my-item-actions",3,"show","item","index","uiFeatures"],[3,"helpLink"],[3,"infoBox"]],template:function(n,a){1&n&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"app-picker-item-preview",2),e.j41(3,"span",3),e.EFF(4),e.k0s()(),e.j41(5,"div",4),e.Z7z(6,nd,1,1,"app-feature-icon-with-dialog",5,e.fX1),e.nVh(8,id,1,4,"app-picker-item-buttons",6),e.nrm(9,"app-picker-help",7)(10,"app-picker-icon-info",8),e.nVh(11,ad,1,4,"app-picker-item-buttons",6),e.k0s()()),2&n&&(e.R7$(2),e.Y8G("item",a.item())("settings",a.settings()),e.R7$(2),e.SpI(" ",a.item().label||a.item().value),e.R7$(2),e.Dyx(a.featureWarnings()),e.R7$(2),e.vxM(a.actionsFirst()?8:-1),e.R7$(),e.Y8G("helpLink",a.item().link),e.R7$(),e.Y8G("infoBox",a.item().info),e.R7$(),e.vxM(a.actionsFirst()?-1:11))},dependencies:[rr,Ac,Lc,Ra,bi.X],styles:[".picker-option-contents[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%!important}.picker-option-label[_ngcontent-%COMP%]{flex:1 1 auto}.picker-option-wrapper[_ngcontent-%COMP%]   .picker-option-info[_ngcontent-%COMP%]{display:none}.picker-option-wrapper[_ngcontent-%COMP%]:hover   .picker-option-info[_ngcontent-%COMP%]{display:block}.picker-option[_ngcontent-%COMP%]{display:flex;align-items:center}.picker-option-contents[_ngcontent-%COMP%]:not(:hover)   .my-item-actions[_ngcontent-%COMP%]{display:none}"]})}}return i})();const xi="parent-child";let za=(()=>{class i{#e;#t;constructor(){this.log=(0,f.Tq)({PickerTreeDataHelper:i}),this.treeControl=new yc(t=>t.level,t=>t.expandable),this.hasChild=(t,n)=>n.expandable,this.build()}updateConfig(t){this.log.a("updateConfigAndSelectedData"),this.#e=t}addTreeItems(t){this.log.a("addTreeItems"),this.#t=t}updateSelectedData(t){this.log.a("updateSelectedData"),this.dataSource.data=t}preConvertAllItems(t,n){this.log.a("preConvertAllItemsToTreeItems",{treeConfig:t,items:n});const a=n.map(c=>this.#n(t,c,n));return a.map(c=>{if(!c.expandable)return c;const p=this.#i(t,c,a);return c.children=p,c})}#n(t,n,a){if(this.log.a(`preConvertItemToTreeItem for item ${n?.id}`,{treeConfig:t,item:n,allItems:a}),!t)throw new Error("No tree configuration found");if(!n)throw new Error("Can't transform null-item");const s=t.TreeRelationship==xi,c=t.TreeChildParentRefField,p=t.TreeParentChildRefField,O=t.TreeParentIdField,ie=t.TreeBranchesStream,ae=a.filter(st=>!st.sourceStreamName||st.sourceStreamName==ie).find(st=>st==n),ke=n?.data?.[O],Je=s?ae&&(n.data[p]?.length>0||!1):ae&&!!a.find(st=>st.data[c]?.[0]?.[O]==ke),rt={...n,level:-1,expandable:Je,parent:n.data[c],children:n.data[p]};return this.log.a("result",{result:rt}),rt}build(){this.log.a("build");const t=new Ec((n,a)=>({...n,level:a}),n=>n.level,n=>n.expandable,n=>n.children);this.dataSource=new Ic(this.treeControl,t)}#i(t,n,a){const c=t.TreeChildParentRefField,x=t.TreeChildIdField,O=t.TreeParentIdField;if(t.TreeRelationship==xi)return n.data[t.TreeParentChildRefField].map(G=>a.find(ae=>ae[x]==G[x]));if("child-parent"==t.TreeRelationship){const G=n.data?.[O];return a.filter(ie=>ie.data[c]?.[0]?.[O]==G)}throw new Error(`Unknown tree relationship: "${t?.TreeRelationship}"`)}disableOption(t,n,a){const s=this.#e;return!a&&n.some(G=>G.value===t.value)||!s?.TreeAllowSelectRoot&&t.children?.length>0&&0===t.parent?.length||!s?.TreeAllowSelectBranch&&t.children?.length>0&&t.parent?.length>0||!s?.TreeAllowSelectLeaf&&0===t.children?.length}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})(),rd=(()=>{class i{constructor(t,n){this.treeHelper=t,this.inject=n,this.log=(0,f.Tq)({PickerTreeDataService:i})}init(t,n){this.log.a("init");const a=t();if("tree"!==a.PickerDisplayMode)return;const c=a.PickerTreeConfiguration,p=c?.TreeRelationship==xi;(0,r.N4e)(this.inject,()=>{(0,r.QZP)(()=>{const x=n(),O=null==x?.[0]?.data?[]:this.treeHelper.preConvertAllItems(c,x);if(null!=O?.[0]?.data){this.treeHelper.updateConfig(c),this.treeHelper.addTreeItems(O);const G=O.filter(ie=>p?!O.some(ae=>ae.data[c?.TreeParentChildRefField]?.some(ke=>ke.Id===ie.id)):0==ie.data[c?.TreeChildParentRefField]?.length);this.treeHelper.updateSelectedData(G)}})})}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(za),r.KVO(r.zZn))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const od=["autocomplete"],ld=[[["","freeTextButtons",""]]],cd=["[freeTextButtons]"],dd=i=>({"mat-form-field-invalid":i}),ud=i=>({"mat-error":i}),pd=(i,o)=>o.value;function hd(i,o){1&i&&(e.j41(0,"span",8),e.SdG(1),e.k0s())}function md(i,o){if(1&i&&(e.j41(0,"mat-option",13),e.nrm(1,"app-picker-item-label",14),e.k0s()),2&i){const t=o.$implicit,n=e.XpG(2);e.Y8G("value",t.value)("disabled",!!t.noSelect||!n.settings().enableReselect&&n.isOptionDisabled(t.value))("tippy",t.tooltip)("tippyAllowHtml",!0)("tippyArrow",!0),e.R7$(),e.Y8G("item",t)("settings",n.fieldState.settings())}}function fd(i,o){if(1&i&&e.Z7z(0,md,2,7,"mat-option",13,pd),2&i){const t=e.XpG();e.Dyx(t.filteredItems())}}function gd(i,o){if(1&i&&(e.j41(0,"mat-tree-node",17),e.nrm(1,"button",18),e.j41(2,"mat-option",13),e.nrm(3,"app-picker-item-label",14),e.k0s()()),2&i){const t=o.$implicit,n=e.XpG(2);e.R7$(2),e.Y8G("value",t.value)("disabled",n.treeHelper.disableOption(t,n.selectedItems(),n.settings().enableReselect))("tippy",t.tooltip)("tippyAllowHtml",!0)("tippyArrow",!0),e.R7$(),e.Y8G("item",t)("settings",n.fieldState.settings())}}function vd(i,o){if(1&i&&(e.j41(0,"mat-tree-node",17)(1,"button",19)(2,"mat-icon",20),e.EFF(3),e.k0s()(),e.j41(4,"mat-option",13),e.nrm(5,"app-picker-item-label",14),e.k0s()()),2&i){const t=o.$implicit,n=e.XpG(2);e.R7$(),e.BMQ("aria-label","Toggle "+t.name),e.R7$(2),e.SpI(" ",n.treeHelper.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.R7$(),e.Y8G("value",t.value)("disabled",n.treeHelper.disableOption(t,n.selectedItems(),n.settings().enableReselect))("tippy",t.tooltip)("tippyAllowHtml",!0)("tippyArrow",!0),e.R7$(),e.Y8G("item",t)("settings",n.fieldState.settings())}}function yd(i,o){if(1&i&&(e.j41(0,"mat-tree",11),e.DNE(1,gd,4,7,"mat-tree-node",15)(2,vd,6,9,"mat-tree-node",16),e.k0s()),2&i){const t=e.XpG();e.Y8G("dataSource",t.treeHelper.dataSource)("treeControl",t.treeHelper.treeControl),e.R7$(2),e.Y8G("matTreeNodeDefWhen",t.hasChild)}}function bd(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",12),e.EFF(1,"debug: "),e.j41(2,"span",21),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.insertNull())}),e.EFF(3,"add null-item"),e.k0s()()}}const _d={all:!1,optionSelected:!0,focusOnSearchComponent:!1,onClosed:!0,onOpened:!0,tooltip:!1,fields:[...ge.z,"Author"]};let Na=(()=>{class i extends fn{#e;#t;constructor(t,n){super(),this.translate=t,this.globalConfigService=n,this.log=(0,f.Tq)({PickerSearchComponent:i},_d),this.#e=(0,f.Tq)("PickerSearchComponent-ItemChecks"),this.autocomplete=Y.ebz.required("autocomplete"),this.showSelectedItem=Y.hFB.required(),this.showItemEditButtons=Y.hFB.required(),this.#t=(0,le.d)(rd),this.treeHelper=(0,le.d)(za),this.selectedItem=(0,Q.bo)("selectedItems",()=>this.pickerData.selectedOne()),this.#n=(0,Q.KX)("reFilter",!1),this.filteredItems=(0,Q.bo)("filteredItems",()=>{this.#n();const s=this.pickerData.optionsAll(),c=this.autocomplete()?.nativeElement.value,p=c?.toLocaleLowerCase(),x=p?s.filter(O=>((O.label?O.label:O.value)??"").toLocaleLowerCase().includes(p)):s;return x.length>0?x:[Pe.message(this.translate,"Fields.Picker.FilterNoResults",{search:c})]}),this.debugEnabled=this.globalConfigService.isDebug,this.settings=(0,Q.bo)("settings",()=>{const a=this.fieldState.settings();return{enableAddExisting:a.EnableAddExisting,enableReselect:a.EnableReselect,showAsTree:"tree"===a.PickerDisplayMode}}),this.hasChild=(a,s)=>this.treeHelper.hasChild(a,s)}#n;ngOnInit(){const t=this.fieldState.settings;"tree"===t().PickerDisplayMode&&(this.#t.init(t,this.pickerData.optionsAll),this.treeHelper=this.#t.treeHelper),this.pickerData.state.attachCallback(()=>this.focusOnSearchComponent())}focusOnSearchComponent(){this.log.fnIf("focusOnSearchComponent"),this.autocomplete()?.nativeElement.focus()}displaySelected(t){return this.showSelectedItem()?t?.label??"":""}tooltip(){const t=this.log.fnIfInFields("tooltip",this.fieldState.name,null,this.fieldState.name),n=this.pickerData.selectedAll().length;return 1!=n?t.r(null,`0 or more than 1 selected: ${n}`):t.r(this.selectedItem().tooltip,"ok")}displayFn(t){const n=this.selectedItem();if(this.#e.a(`displayFn: value: '${t}'`,{selectedItem:n}),null==t)return"";const a=this.pickerData.optionsAll().find(s=>s.value==t)?.label;return a?(this.log.a("displayFn result",{value:t,returnValue:a}),a):n?.value==t?n?.label:t+" *"}markAsTouched(){this.fieldState.ui().markTouched()}filterSelectionList(){this.#n.update(t=>!t)}onOpened(t){const n=this.log.fnIf("onOpened",{isTreeDisplayMode:t}),a=this.autocomplete().nativeElement;n.a(`onOpened: isTreeDisplayMode ${t}; domValue: '${a.value}'`),a.value="",this.#n.update(s=>!s),t&&a.blur()}onClosed(){const t=this.selectedItems(),n=this.selectedItem(),a=this.autocomplete().nativeElement,s=this.log.fnIf("onClosed",{selectedItems:t,selectedItem:n});return this.showSelectedItem()?(s.a("showSelectedItem"),n?t.length<2?(a.value=n.label,s.end(`selectedItem & < 2; label updated to ${n.label}`,{selectedItem:n})):void 0:(a.value="",s.end("!selectedItem"))):(a.value="",s.end("!showSelectedItem"))}optionSelected(t){const n=this.features().multiValue,a=this.log.fnIf("optionSelected",{value:t.option.value,multiValue:n}),s=t.option.value;this.showSelectedItem()||!n?(a.a("no multiValue, will set to new"),this.pickerData.state.set([s])):(a.a("multiValue, will add to selection"),this.pickerData.state.add(s)),setTimeout(()=>this.autocomplete().nativeElement.blur())}getPlaceholder(){const t=this.pickerData.optionsAll();var n=this.translate.instant(t.length>0?"Fields.Picker.Search":"Fields.Picker.QueryNoItems");return this.#e.a(`getPlaceholder: '${n}'`,{allOptions:t}),n}insertNull(){this.log.a("insertNull"),this.pickerData.state.add(null)}isOptionDisabled(t){const n=this.selectedItems(),a=n.some(s=>s.value===t);return this.#e.a(`sOptionDisabled value: '${t}'; result: ${a}`,{selected:n}),a}goToLink(t){this.log.a(`goToLink helpLink: '${t}'`),window.open(t,"_blank")}getSelectedItem(t){return this.pickerData.optionsAll().find(n=>n.value===t)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(ue.c$),e.rXU(K.B))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-search"]],viewQuery:function(n,a){1&n&&e.wEZ(a.autocomplete,od,5),2&n&&e.NyB()},inputs:{showSelectedItem:[1,"showSelectedItem"],showItemEditButtons:[1,"showItemEditButtons"]},features:[e.Vt3],ngContentSelectors:cd,decls:17,vars:25,consts:[["autocomplete",""],["auto","matAutocomplete"],["color","accent",1,"eav-mat-form-field","my-search",3,"click","formGroup","ngClass"],[1,"show-input-container"],[1,"picker-container",3,"item","settings"],["matInput","",1,"eav-translate-on-dblclick",3,"focus","blur","input","matAutocomplete","value","placeholder","disabled","tippy","tippyArrow"],["matSuffix","",1,"my-item-actions",3,"show","item","index"],["mat-icon-button","","matSuffix","","disableRipple","true",1,"entity-dropdown-button","picker-inline-button",3,"disabled"],["matSuffix",""],[3,"ngClass"],[3,"optionSelected","closed","opened","displayWith","hideSingleSelectionIndicator"],[3,"dataSource","treeControl"],[1,"null-box"],["tippyShowDelay","500",1,"picker-option-wrapper",3,"value","disabled","tippy","tippyAllowHtml","tippyArrow"],[3,"item","settings"],["matTreeNodePadding","","class","eav-tree-node",4,"matTreeNodeDef"],["matTreeNodePadding","","class","eav-tree-node",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","",1,"eav-tree-node"],["mat-icon-button","","disabled",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["tippy","Add null-item",1,"null-button",3,"click"]],template:function(n,a){if(1&n){const s=e.RV6();e.NAR(ld),e.j41(0,"mat-form-field",2),e.bIt("click",function(){return r.eBV(s),r.Njj(a.filterSelectionList())}),e.j41(1,"div",3),e.nrm(2,"app-picker-item-preview",4),e.j41(3,"input",5,0),e.bIt("focus",function(){return r.eBV(s),r.Njj(a.pickerData.source.fetchItems())})("blur",function(){return r.eBV(s),r.Njj(a.markAsTouched())})("input",function(){return r.eBV(s),r.Njj(a.filterSelectionList())}),e.k0s()(),e.nrm(5,"app-picker-item-buttons",6),e.j41(6,"button",7)(7,"mat-icon"),e.EFF(8,"arrow_drop_down"),e.k0s()(),e.nVh(9,hd,2,0,"span",8),e.j41(10,"mat-label",9),e.EFF(11),e.k0s()(),e.j41(12,"mat-autocomplete",10,1),e.bIt("optionSelected",function(p){return r.eBV(s),r.Njj(a.optionSelected(p))})("closed",function(){return r.eBV(s),r.Njj(a.onClosed())})("opened",function(){return r.eBV(s),r.Njj(a.onOpened(a.settings().showAsTree))}),e.nVh(14,fd,2,0)(15,yd,3,3,"mat-tree",11),e.k0s(),e.nVh(16,bd,4,0,"div",12)}if(2&n){let s;const c=e.sdS(13);e.Y8G("formGroup",a.fieldState.group)("ngClass",e.eq3(21,dd,a.ui().touchedAndInvalid)),e.R7$(2),e.Y8G("item",a.getSelectedItem(null==(s=a.selectedItem())?null:s.value))("settings",a.fieldState.settings()),e.R7$(),e.Y8G("matAutocomplete",c)("value",a.displaySelected(a.selectedItem()))("placeholder",a.getPlaceholder())("disabled",a.ui().disabled||!a.settings().enableAddExisting)("tippy",a.tooltip())("tippyArrow",!0),e.R7$(2),e.Y8G("show",a.showItemEditButtons())("item",a.selectedItem())("index",0),e.R7$(),e.Y8G("disabled",a.ui().disabled||!a.settings().enableAddExisting),e.R7$(3),e.vxM(a.features().textEntry?9:-1),e.R7$(),e.Y8G("ngClass",e.eq3(23,ud,a.ui().touchedAndInvalid)),e.R7$(),e.SpI(" ",a.basics().labelWithRequired," "),e.R7$(),e.Y8G("displayWith",a.displayFn.bind(a))("hideSingleSelectionIndicator",!0),e.R7$(2),e.vxM(a.settings().showAsTree?15:14),e.R7$(2),e.vxM(a.debugEnabled()?16:-1)}},dependencies:[Gt.RG,wt.rl,wt.nJ,wt.yw,ne.YN,ne.cb,ne.X1,ne.j4,Ue.YU,Ut.fS,Ut.fg,Ea.jL,Ea.$3,Pn.wT,Ea.pN,Pt.Hl,qt.iY,j.m_,j.An,$s.S,Sc,qs,er,nr,tr,Js,ue.h,Ra,At.e,Va,rr],styles:[".eav-add-new-entity[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.ed-field[_ngcontent-%COMP%]{width:100%;height:100%}.ed-field__create-icon[_ngcontent-%COMP%]{width:38px}.ed-field__create-two-icon[_ngcontent-%COMP%]{width:72px;padding-bottom:4px}.ed-field__create-two-icon[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.ed-field__create-icon-hide[_ngcontent-%COMP%]{width:0}.ed-field__field-short[_ngcontent-%COMP%]{width:calc(100% - 38px);max-width:calc(100% - 38px)}.ed-field__field[_ngcontent-%COMP%]{width:100%}.null-box[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.null-box[_ngcontent-%COMP%]   .null-button[_ngcontent-%COMP%]{cursor:pointer}.show-input-container[_ngcontent-%COMP%]{display:flex}.picker-inline-button[_ngcontent-%COMP%]{scale:.8;margin-left:-4px;margin-right:-4px}.my-search[_ngcontent-%COMP%]:not(:hover)   .my-item-actions[_ngcontent-%COMP%]{display:none}.picker-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]})}}return i})();var Ft=g(31034),xd=g(97024);const Cd={all:!0,options:!0,select:!0};class Ci extends fn{constructor(){super(),this.log=(0,f.Tq)({PickerInlineBaseComponent:Ci},Cd),this.options=(0,Q.bo)("options",()=>{const o=this.pickerData.optionsWithMissing(),t=this.selectedItems(),n=o.map(a=>{const s=t.find(c=>c.value===a.value);return{...a,selected:!!s}});return this.log.aIf("options",{options:o,selected:t,final:n}),n}),this.pickerData.source.fetchItems()}select(o){const t=this.log.fn("select",{item:o});if(o.noSelect)return t.end("noSelect, exit early");const n=this.features().multiValue;if(!n)return this.pickerData.state.set([o.value]),t.end("no-multi",{item:o,allowMulti:n});const a=this.options(),s=a.map(x=>x.value===o.value?{...x,selected:!x.selected}:x),c=s.filter(x=>x.selected),p=c.map(x=>x.value);this.pickerData.state.set(p),t.end("multi",{item:o,allowMulti:n,before:a,toggled:s,selected:c,values:p})}}const wd=[[["","addNew",""]],[["","freeTextButtons",""]]],Td=["[addNew]","[freeTextButtons]"],kd=(i,o,t,n,a)=>({"mat-caption":i,"mat-empty":o,"mat-error":t,color__primary:n,"my-label-disabled":a});let or=(()=>{class i extends fn{static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})()}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-inline-header"]],features:[e.Vt3],ngContentSelectors:Td,decls:8,vars:10,consts:[[1,"my-title-bar"],[1,"c-ew__preview-label",3,"ngClass"],[3,"flatIfEmpty","smallGap"]],template:function(n,a){1&n&&(e.NAR(wd),e.j41(0,"div",0)(1,"div")(2,"mat-label",1),e.EFF(3),e.k0s(),e.nrm(4,"app-field-helper-text",2),e.k0s(),e.j41(5,"div"),e.SdG(6),e.SdG(7,1),e.k0s()()),2&n&&(e.R7$(2),e.Y8G("ngClass",e.s1E(4,kd,a.itemCount(),!a.itemCount(),a.ui().touchedAndInvalid&&!a.config.initialDisabled,!a.ui().touchedAndInvalid&&!a.config.initialDisabled,a.config.initialDisabled)),e.R7$(),e.SpI(" ",a.basics().labelWithRequired," "),e.R7$(),e.Y8G("flatIfEmpty",!0)("smallGap",!0))},dependencies:[Ue.YU,Xt],styles:[".my-title-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0}.my-label-disabled[_ngcontent-%COMP%]{color:#1d273d3d}"]})}}return i})();const Sd=[[["","addNew",""]],[["","freeTextButtons",""]]],Ed=["[addNew]","[freeTextButtons]"],Id=()=>({remove:!1}),Md=(i,o)=>o.value;function Pd(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-checkbox",2),e.bIt("click",function(){const a=r.eBV(t).$implicit,s=e.XpG();return r.Njj(s.select(a))}),e.nrm(1,"app-picker-item-label",3),e.k0s()}if(2&i){const t=o.$implicit,n=o.$index,a=e.XpG();e.Y8G("checked",t.selected)("disabled",a.ui().disabled||t.noSelect)("tippy",t.tooltip)("tippyAllowHtml",!0)("tippyArrow",!0),e.R7$(),e.Y8G("item",t)("show",!0)("index",n)("settings",a.fieldState.settings())("uiFeatures",e.lJ4(11,Id))("actionsFirst",!0)}}let Dd=(()=>{class i extends Ci{constructor(){super(),this.fieldState.requireFeature(Ot.T.PickerUiCheckbox)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-checkboxes"]],features:[e.Vt3],ngContentSelectors:Ed,decls:6,vars:0,consts:[[1,"c-ew__preview-holder"],["tippyShowDelay","500",1,"picker-option-wrapper",3,"checked","disabled","tippy","tippyAllowHtml","tippyArrow"],["tippyShowDelay","500",1,"picker-option-wrapper",3,"click","checked","disabled","tippy","tippyAllowHtml","tippyArrow"],[3,"item","show","index","settings","uiFeatures","actionsFirst"]],template:function(n,a){1&n&&(e.NAR(Sd),e.j41(0,"div",0)(1,"app-picker-inline-header"),e.SdG(2,0,["addNew",""]),e.SdG(3,1,["freeTextButtons",""]),e.k0s(),e.Z7z(4,Pd,2,12,"mat-checkbox",1,Md),e.k0s()),2&n&&(e.R7$(4),e.Dyx(a.options()))},dependencies:[Gt.RG,_t.p,xd.So,At.e,or,Va],styles:[".picker-option-contents[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%!important}.picker-option-label[_ngcontent-%COMP%]{flex:1 1 auto}.picker-option-wrapper[_ngcontent-%COMP%]   .picker-option-info[_ngcontent-%COMP%]{display:none}.picker-option-wrapper[_ngcontent-%COMP%]:hover   .picker-option-info[_ngcontent-%COMP%]{display:block}.picker-option[_ngcontent-%COMP%]{display:flex;align-items:center}mat-checkbox[_ngcontent-%COMP%]{width:100%}"]})}}return i})();var nn=g(2814),Fd=g(6075),Od=g(98508),Ad=g(59504),Rd=g(27092),An=g(17828),Ld=g(22158),ja=g(39539);let Vd=(()=>{class i{get vertical(){return this._vertical}set vertical(t){this._vertical=(0,nn.he)(t)}_vertical=!1;get inset(){return this._inset}set inset(t){this._inset=(0,nn.he)(t)}_inset=!1;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=e.VBU({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(n,a){2&n&&(e.BMQ("aria-orientation",a.vertical?"vertical":"horizontal"),e.AVh("mat-divider-vertical",a.vertical)("mat-divider-horizontal",!a.vertical)("mat-divider-inset",a.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(n,a){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline-variant));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0})}return i})(),lr=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=e.$C({type:i});static \u0275inj=r.G2t({imports:[Fa.jI]})}return i})();g(2903);var Nd=g(33115);const wi=["*"],Ba='.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\n',cr=["unscopedContent"],jd=["text"],Bd=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Gd=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"],dr=new r.nKC("ListOption");let $n=(()=>{class i{_elementRef=(0,r.WQX)(e.aKT);constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return i})(),Ga=(()=>{class i{_elementRef=(0,r.WQX)(e.aKT);constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return i})(),ru=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return i})(),ur=(()=>{class i{_listOption=(0,r.WQX)(dr,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,hostVars:4,hostBindings:function(n,a){2&n&&e.AVh("mdc-list-item__start",a._isAlignedAtStart())("mdc-list-item__end",!a._isAlignedAtStart())}})}return i})(),ou=(()=>{class i extends ur{static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275dir=e.FsC({type:i,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[e.Vt3]})}return i})(),Ti=(()=>{class i extends ur{static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275dir=e.FsC({type:i,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[e.Vt3]})}return i})();const lu=new r.nKC("MAT_LIST_CONFIG");let gn=(()=>{class i{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=(0,nn.he)(t)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set((0,nn.he)(t))}_disabled=(0,r.vPA)(!1);_defaultOptions=(0,r.WQX)(lu,{optional:!0});static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,hostVars:1,hostBindings:function(n,a){2&n&&e.BMQ("aria-disabled",a.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return i})(),Ua=(()=>{class i{_elementRef=(0,r.WQX)(e.aKT);_ngZone=(0,r.WQX)(r.SKi);_listBase=(0,r.WQX)(gn,{optional:!0});_platform=(0,r.WQX)(Od.O);_hostElement;_isButtonElement;_noopAnimations=(0,Is.Rc)();_avatars;_icons;set lines(t){this._explicitLines=(0,Fd.OE)(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=(0,nn.he)(t)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(t){this._disabled.set((0,nn.he)(t))}_disabled=(0,r.vPA)(!1);_subscriptions=new Rd.yU;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){(0,r.WQX)(Ad.l).load(Ld.A);const t=(0,r.WQX)(An.$E,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new An.ug(this,this._ngZone,this._hostElement,this._platform,(0,r.WQX)(r.zZn)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add((0,Oa.h)(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();const n=this._explicitLines??this._inferLinesFromContent(),a=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===n),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===n),this._hasUnscopedTextContent){const s=0===this._titles.length&&1===n;a.classList.toggle("mdc-list-item__primary-text",s),a.classList.toggle("mdc-list-item__secondary-text",!s)}else a.classList.remove("mdc-list-item__primary-text"),a.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!(!t.textContent||!t.textContent.trim()))}static \u0275fac=function(n){return new(n||i)};static \u0275dir=e.FsC({type:i,contentQueries:function(n,a,s){if(1&n&&e.wni(s,ou,4)(s,Ti,4),2&n){let c;e.mGM(c=e.lsd())&&(a._avatars=c),e.mGM(c=e.lsd())&&(a._icons=c)}},hostVars:4,hostBindings:function(n,a){2&n&&(e.BMQ("aria-disabled",a.disabled)("disabled",a._isButtonElement&&a.disabled||null),e.AVh("mdc-list-item--disabled",a.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return i})(),pr=(()=>{class i extends gn{_isNonInteractive=!1;static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275cmp=e.VBU({type:i,selectors:[["mat-action-list"]],hostAttrs:["role","group",1,"mat-mdc-action-list","mat-mdc-list-base","mdc-list"],exportAs:["matActionList"],features:[e.Jv_([{provide:gn,useExisting:i}]),e.Vt3],ngContentSelectors:wi,decls:1,vars:0,template:function(n,a){1&n&&(e.NAR(),e.SdG(0))},styles:['.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus-visible>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\n'],encapsulation:2,changeDetection:0})}return i})(),cu=(()=>{class i extends gn{static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275cmp=e.VBU({type:i,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[e.Jv_([{provide:gn,useExisting:i}]),e.Vt3],ngContentSelectors:wi,decls:1,vars:0,template:function(n,a){1&n&&(e.NAR(),e.SdG(0))},styles:[Ba],encapsulation:2,changeDetection:0})}return i})(),ki=(()=>{class i extends Ua{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=(0,nn.he)(t)}_activated=!1;_getAriaCurrent(){return"A"===this._hostElement.nodeName&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return 0!==this._meta.length&&(0!==this._avatars.length||0!==this._icons.length)}static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275cmp=e.VBU({type:i,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(n,a,s){if(1&n&&e.wni(s,Ga,5)(s,$n,5)(s,ru,5),2&n){let c;e.mGM(c=e.lsd())&&(a._lines=c),e.mGM(c=e.lsd())&&(a._titles=c),e.mGM(c=e.lsd())&&(a._meta=c)}},viewQuery:function(n,a){if(1&n&&e.GBs(cr,5)(jd,5),2&n){let s;e.mGM(s=e.lsd())&&(a._unscopedContent=s.first),e.mGM(s=e.lsd())&&(a._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(n,a){2&n&&(e.BMQ("aria-current",a._getAriaCurrent()),e.AVh("mdc-list-item--activated",a.activated)("mdc-list-item--with-leading-avatar",0!==a._avatars.length)("mdc-list-item--with-leading-icon",0!==a._icons.length)("mdc-list-item--with-trailing-meta",0!==a._meta.length)("mat-mdc-list-item-both-leading-and-trailing",a._hasBothLeadingAndTrailing())("_mat-animation-noopable",a._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[e.Vt3],ngContentSelectors:Gd,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(n,a){if(1&n){const s=e.RV6();e.NAR(Bd),e.SdG(0),e.j41(1,"span",1),e.SdG(2,1),e.SdG(3,2),e.j41(4,"span",2,0),e.bIt("cdkObserveContent",function(){return r.eBV(s),r.Njj(a._updateItemLines(!0))}),e.SdG(6,3),e.k0s()(),e.SdG(7,4),e.SdG(8,5),e.nrm(9,"div",3)}},dependencies:[ja.Wv],encapsulation:2,changeDetection:0})}return i})(),mr=(()=>{class i extends gn{_isNonInteractive=!1;static \u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})();static \u0275cmp=e.VBU({type:i,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[e.Jv_([{provide:gn,useExisting:i}]),e.Vt3],ngContentSelectors:wi,decls:1,vars:0,template:function(n,a){1&n&&(e.NAR(),e.SdG(0))},styles:[Ba],encapsulation:2,changeDetection:0})}return i})(),Si=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=e.$C({type:i});static \u0275inj=r.G2t({imports:[ja.w5,_t.p,Nd.O,Fa.jI,lr]})}return i})();const mu=[[["","freeTextButtons",""]]],fu=["[freeTextButtons]"],gu=(i,o,t,n,a)=>({"mat-caption":i,"mat-empty":o,"mat-error":t,color__primary:n,"my-label-disabled":a}),vu=()=>({enterDuration:360}),yu=(i,o)=>({"c-ew__preview--invalid":i,"c-ew__preview--disabled":o}),bu=i=>({"eav-more-entities-margin-right":i}),_u=(i,o)=>o.value+i;function xu(i,o){if(1&i&&(e.j41(0,"mat-list-item",8)(1,"span",9),e.EFF(2),e.k0s()()),2&i){const t=o.$implicit;e.Y8G("tippy",t.tooltip),e.R7$(2),e.JRh(t.label)}}function Cu(i,o){if(1&i&&(e.j41(0,"mat-list",5),e.Z7z(1,xu,3,2,"mat-list-item",8,_u),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Dyx(t.selectedItems())}}function wu(i,o){if(1&i&&(e.j41(0,"span",6),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(2,bu,t.enableTextEntry())),e.R7$(),e.SpI(" ",t.itemCount()," ")}}function Tu(i,o){1&i&&(e.j41(0,"span",7),e.SdG(1),e.k0s())}let ku=(()=>{class i extends fn{static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})()}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-pills"]],features:[e.Vt3],ngContentSelectors:fu,decls:9,vars:18,consts:[[1,"c-ew__preview-holder"],[1,"c-ew__preview-label",3,"ngClass"],["matRipple","",1,"c-ew__preview","mat-ripple",3,"click","matRippleAnimation","ngClass"],[3,"ngClass"],[1,"my-flex"],[1,"eav-list","my-pills"],[1,"eav-more-entities",3,"ngClass"],["matSuffix",""],["role","listitem",1,"eav-list-item",3,"tippy"],["mat-line",""]],template:function(n,a){1&n&&(e.NAR(mu),e.j41(0,"div",0)(1,"mat-label",1),e.EFF(2),e.k0s(),e.j41(3,"div",2),e.bIt("click",function(){return a.expandDialog()}),e.j41(4,"div",3)(5,"div",4),e.nVh(6,Cu,3,0,"mat-list",5),e.nVh(7,wu,2,4,"span",6),e.nVh(8,Tu,2,0,"span",7),e.k0s()()()()),2&n&&(e.R7$(),e.Y8G("ngClass",e.s1E(8,gu,a.itemCount(),!a.itemCount(),a.ui().touchedAndInvalid&&!a.config.initialDisabled,!a.ui().touchedAndInvalid&&!a.config.initialDisabled,a.config.initialDisabled)),e.R7$(),e.SpI(" ",a.basics().labelWithRequired," "),e.R7$(),e.Y8G("matRippleAnimation",e.lJ4(14,vu))("ngClass",e.l_i(15,yu,a.ui().touchedAndInvalid,a.config.initialDisabled)),e.R7$(),e.Y8G("ngClass",a.itemCount()?"c-ew__preview-container":"c-ew__preview-container--empty"),e.R7$(2),e.vxM(a.itemCount()?6:-1),e.R7$(),e.vxM(a.itemCount()>3?7:-1),e.R7$(),e.vxM(a.enableTextEntry()?8:-1))},dependencies:[Gt.RG,wt.nJ,wt.yw,Ue.YU,_t.p,An.r6,Si,cu,ki,At.e],styles:[".c-ew__preview[_ngcontent-%COMP%]{padding:0 0 1px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){padding:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{padding:0;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;background-image:linear-gradient(to right,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 33%,transparent 0%);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;cursor:pointer}.c-ew__preview[_ngcontent-%COMP%]   .color__accent[_ngcontent-%COMP%]{color:#002753}.c-ew__preview[_ngcontent-%COMP%]   .color__primary[_ngcontent-%COMP%]{color:#1d273d70}.c-ew__preview[_ngcontent-%COMP%]   .my-label-disabled[_ngcontent-%COMP%]{color:#1d273d3d}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:16px}.c-ew__preview-label[_ngcontent-%COMP%]{top:-16px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-error){color:#1d273d70}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;height:100%;align-content:center}.c-ew__preview-container--empty[_ngcontent-%COMP%]{padding:6px 0 0}.eav-more-entities[_ngcontent-%COMP%]{padding:0 12px;margin-left:10px;background:transparent;color:#1d273d;border-radius:10px;border:1px solid rgba(29,39,61,.44);height:18px;font-size:12px;line-height:16px;flex:0 0 auto;display:flex;align-items:center}.eav-more-entities-margin-right[_ngcontent-%COMP%]{margin-right:10px}.eav-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;overflow-y:hidden;flex:1 1 auto;max-height:35px}.eav-list-item[_ngcontent-%COMP%]{width:auto!important;max-width:200px;flex:0 1 auto;height:20px!important;background:#1d273d14;border-radius:10px;margin-right:10px;margin-bottom:7px;font-size:12px;line-height:16px;white-space:nowrap;text-overflow:ellipsis;padding:0 16px}.my-flex[_ngcontent-%COMP%]{display:flex;align-items:center}.my-pills[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;box-sizing:border-box}"]})}}return i})();var Su=g(53804);const Eu=[[["","addNew",""]],[["","freeTextButtons",""]]],Iu=["[addNew]","[freeTextButtons]"],Mu=()=>({remove:!1}),Pu=(i,o)=>o.value;function Du(i,o){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"mat-radio-button",1),e.bIt("click",function(){const a=r.eBV(t).$implicit,s=e.XpG();return r.Njj(s.select(a))}),e.nrm(2,"app-picker-item-label",2),e.k0s()()}if(2&i){const t=o.$implicit,n=o.$index,a=e.XpG();e.R7$(),e.Y8G("name",a.name)("checked",t.selected)("disabled",a.ui().disabled||t.noSelect)("tippy",t.tooltip)("tippyAllowHtml",!0)("tippyArrow",!0),e.R7$(),e.Y8G("item",t)("show",!0)("index",n)("settings",a.fieldState.settings())("uiFeatures",e.lJ4(12,Mu))("actionsFirst",!0)}}let Fu=(()=>{class i extends Ci{constructor(){super(),this.name=this.fieldState.name,this.fieldState.requireFeature(Ot.T.PickerUiRadio)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-radio"]],features:[e.Vt3],ngContentSelectors:Iu,decls:6,vars:0,consts:[[1,"c-ew__preview-holder"],["tippyShowDelay","500",1,"picker-option-wrapper",3,"click","name","checked","disabled","tippy","tippyAllowHtml","tippyArrow"],[3,"item","show","index","settings","uiFeatures","actionsFirst"]],template:function(n,a){1&n&&(e.NAR(Eu),e.j41(0,"div",0)(1,"app-picker-inline-header"),e.SdG(2,0,["addNew",""]),e.SdG(3,1,["freeTextButtons",""]),e.k0s(),e.Z7z(4,Du,3,13,"div",null,Pu),e.k0s()),2&n&&(e.R7$(4),e.Dyx(a.options()))},dependencies:[Gt.RG,_t.p,Su._g,At.e,or,Va],styles:[".picker-option-contents[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%!important}.picker-option-label[_ngcontent-%COMP%]{flex:1 1 auto}.picker-option-wrapper[_ngcontent-%COMP%]   .picker-option-info[_ngcontent-%COMP%]{display:none}.picker-option-wrapper[_ngcontent-%COMP%]:hover   .picker-option-info[_ngcontent-%COMP%]{display:block}.picker-option[_ngcontent-%COMP%]{display:flex;align-items:center}mat-radio-button[_ngcontent-%COMP%]{width:100%}"]})}}return i})();function Ou(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",3),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.isTextMode()?a.toggleFreeText(a.csDisabled()):null)}),e.j41(1,"mat-icon"),e.EFF(2,"search"),e.k0s()()}if(2&i){const t=e.XpG(2);e.Y8G("ngClass",t.isTextMode()?"":"active")("disabled",t.csDisabled())}}function Au(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",4),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.isTextMode()?null:a.toggleFreeText(a.csDisabled()))}),e.j41(1,"mat-icon"),e.EFF(2,"text_fields"),e.k0s()()}if(2&i){const t=e.XpG(2);e.Y8G("ngClass",t.isTextMode()?"active":"")("disabled",t.csDisabled())}}function Ru(i,o){if(1&i&&(e.j41(0,"span",0),e.nVh(1,Ou,3,2,"button",1),e.nVh(2,Au,3,2,"button",2),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.vxM(t.showBoth()||t.isTextMode()?1:-1),e.R7$(),e.vxM(t.showBoth()||!t.isTextMode()?2:-1)}}let Lu=(()=>{class i{constructor(){this.csDisabled=(0,Y.hFB)(),this.allowText=(0,Y.hFB)(),this.isTextMode=(0,Y.hFB)(!1),this.showBoth=(0,Y.hFB)(!0),this.pickerData=(0,r.WQX)(it.W).pickerData}toggleFreeText(t){t||this.pickerData.toggleFreeTextMode()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-toggle-text"]],inputs:{csDisabled:[1,"csDisabled"],allowText:[1,"allowText"],isTextMode:[1,"isTextMode"],showBoth:[1,"showBoth"]},decls:1,vars:1,consts:[["matSuffix","",1,"toggle-buttons"],["mat-icon-button","","tippyTranslate","Fields.String.Dropdown","appClickStopPropagation","",1,"eav-suffix-button",3,"ngClass","disabled"],["mat-icon-button","","tippyTranslate","Fields.String.Freetext","appClickStopPropagation","",1,"eav-suffix-button",3,"ngClass","disabled"],["mat-icon-button","","tippyTranslate","Fields.String.Dropdown","appClickStopPropagation","",1,"eav-suffix-button",3,"click","ngClass","disabled"],["mat-icon-button","","tippyTranslate","Fields.String.Freetext","appClickStopPropagation","",1,"eav-suffix-button",3,"click","ngClass","disabled"]],template:function(n,a){1&n&&e.nVh(0,Ru,3,2,"span",0),2&n&&e.vxM(a.allowText()?0:-1)},dependencies:[Gt.RG,wt.yw,Pt.Hl,qt.iY,Ue.YU,j.m_,j.An,Un.c,At.e],styles:[".eav-suffix-button[_ngcontent-%COMP%]{scale:.8;margin-left:-4px;margin-right:-4px}.toggle-buttons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{top:3px}.toggle-buttons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px}.toggle-buttons[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#002753;color:#fff}.toggle-buttons[_ngcontent-%COMP%]   .active.mat-mdc-icon-button[_ngcontent-%COMP%]:disabled{background-color:#1d273d3d;color:#fff}"]})}}return i})();const Vu=[[["","freeTextButtons",""]]],zu=["[freeTextButtons]"];function Nu(i,o){if(1&i&&e.nrm(0,"textarea",1),2&i){const t=e.XpG();e.Y8G("required",t.basics().required)("formControlName",t.fieldState.name)("placeholder",t.basics().placeholder)}}function ju(i,o){if(1&i&&e.nrm(0,"input",1),2&i){const t=e.XpG();e.Y8G("required",t.basics().required)("formControlName",t.fieldState.name)("placeholder",t.basics().placeholder)}}let fr=(()=>{class i extends fn{constructor(){super(),this.log=(0,f.Tq)({PickerTextComponent:i}),this.useMultiLine=(0,Q.bo)("useMultiLine",()=>{const n=this.fieldState.settings().Separator;return"\\n"==n||"\n"==n})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-text"]],features:[e.Vt3],ngContentSelectors:zu,decls:8,vars:3,consts:[["color","accent",1,"eav-mat-form-field",3,"formGroup"],["matInput","",3,"required","formControlName","placeholder"],["matSuffix",""]],template:function(n,a){1&n&&(e.NAR(Vu),e.j41(0,"div")(1,"mat-form-field",0),e.nVh(2,Nu,1,3,"textarea",1)(3,ju,1,3,"input",1),e.j41(4,"div",2),e.SdG(5),e.k0s(),e.j41(6,"mat-label"),e.EFF(7),e.k0s()()()),2&n&&(e.R7$(),e.Y8G("formGroup",a.fieldState.group),e.R7$(),e.vxM(a.useMultiLine()?2:3),e.R7$(5),e.JRh(a.basics().label))},dependencies:[Gt.RG,wt.rl,wt.nJ,wt.yw,ne.YN,ne.me,ne.BC,ne.cb,ne.YS,ne.X1,ne.j4,ne.JD,Ut.fS,Ut.fg],encapsulation:2})}}return i})();const gr=()=>({$implicit:!1}),Bu=i=>({"picker-suffix-text":i});function Gu(i,o){1&i&&e.eu8(0,7)}function Uu(i,o){if(1&i&&(e.j41(0,"app-picker-text"),e.DNE(1,Gu,1,0,"ng-container",6),e.k0s()),2&i){e.XpG();const t=e.sdS(11);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function $u(i,o){1&i&&e.eu8(0,1)}function Hu(i,o){1&i&&e.eu8(0,7)}function Wu(i,o){if(1&i&&(e.j41(0,"app-picker-checkboxes"),e.DNE(1,$u,1,0,"ng-container",8)(2,Hu,1,0,"ng-container",9),e.k0s()),2&i){e.XpG();const t=e.sdS(11),n=e.sdS(13);e.R7$(),e.Y8G("ngTemplateOutlet",n),e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.lJ4(3,gr))}}function Xu(i,o){1&i&&e.eu8(0,1)}function Yu(i,o){1&i&&e.eu8(0,7)}function Qu(i,o){if(1&i&&(e.j41(0,"app-picker-radio"),e.DNE(1,Xu,1,0,"ng-container",8)(2,Yu,1,0,"ng-container",9),e.k0s()),2&i){e.XpG();const t=e.sdS(11),n=e.sdS(13);e.R7$(),e.Y8G("ngTemplateOutlet",n),e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.lJ4(3,gr))}}function Ku(i,o){1&i&&e.eu8(0,7)}function Zu(i,o){if(1&i&&(e.j41(0,"app-picker-pills"),e.DNE(1,Ku,1,0,"ng-container",6),e.k0s()),2&i){e.XpG();const t=e.sdS(11);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function Ju(i,o){1&i&&e.eu8(0,7)}function qu(i,o){if(1&i&&(e.j41(0,"app-picker-search",5),e.DNE(1,Ju,1,0,"ng-container",6),e.k0s()),2&i){e.XpG();const t=e.sdS(11);e.Y8G("showSelectedItem",!0)("showItemEditButtons",!0),e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function ep(i,o){1&i&&e.eu8(0)}function tp(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.expandDialog())}),e.j41(1,"mat-icon"),e.EFF(2,"post_add"),e.k0s()()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.ui().disabled)}}function np(i,o){if(1&i&&(e.j41(0,"div",3),e.DNE(1,ep,1,0,"ng-container",10),e.nVh(2,tp,3,1,"button",11),e.k0s()),2&i){const t=e.XpG(),n=e.sdS(13);e.R7$(),e.Y8G("ngTemplateOutlet",n),e.R7$(),e.vxM(t.features().showGoToListDialogButton?2:-1)}}function ip(i,o){1&i&&e.nrm(0,"app-field-helper-text")}function ap(i,o){1&i&&e.nrm(0,"br")}function sp(i,o){if(1&i&&(e.j41(0,"span",13),e.nrm(1,"app-picker-toggle-text",14),e.k0s()),2&i){const t=o.$implicit,n=e.XpG();e.Y8G("ngClass",e.eq3(5,Bu,t)),e.R7$(),e.Y8G("csDisabled",n.ui().disabled)("allowText",n.features().textEntry)("isTextMode",n.isInFreeTextMode())("showBoth",t??!0)}}function rp(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",18),e.bIt("click",function(){const a=r.eBV(t).$implicit,s=e.XpG(4);return r.Njj(s.openNewEntityDialog(a.guid))}),e.j41(1,"span"),e.EFF(2),e.k0s()()}if(2&i){const t=o.$implicit;e.R7$(2),e.JRh(t.label)}}function op(i,o){if(1&i&&(e.j41(0,"button",16)(1,"mat-icon"),e.EFF(2,"add_circle_outline"),e.k0s()(),e.j41(3,"mat-menu",null,2),e.Z7z(5,rp,3,1,"button",17,e.fX1),e.k0s()),2&i){const t=e.sdS(4),n=e.XpG(3);e.Y8G("disabled",n.ui().disabled||!n.features().create)("matMenuTriggerFor",t),e.R7$(5),e.Dyx(n.pickerData.state.typesForNew())}}function lp(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.openNewEntityDialog(null))}),e.j41(1,"mat-icon"),e.EFF(2,"add_circle_outline"),e.k0s()()}if(2&i){const t=e.XpG(3);e.Y8G("disabled",t.ui().disabled||!t.features().create)}}function cp(i,o){if(1&i&&e.nVh(0,op,7,2)(1,lp,3,1,"button",15),2&i){const t=e.XpG(2);e.vxM(t.pickerData.state.typesForNew().length>1?0:1)}}function dp(i,o){if(1&i&&e.nVh(0,cp,2,1),2&i){const t=e.XpG();e.vxM(t.features().showAddNewButton?0:-1)}}let an=(()=>{class i extends fn{constructor(){super(),this.log=(0,f.Tq)({PickerPreviewComponent:i}),this.#e=this.fieldState.settingExt("PickerDisplayMode"),this.mode=(0,Q.bo)("mode",()=>{if(this.isInFreeTextMode())return"text";switch(this.#e()){case"radio":return"radio";case"checkbox":return"checkbox";case"auto-inline":return this.features().multiValue?"checkbox":"radio";default:return this.selectedItems().length>1?"pills":"search"}}),this.skipHelpText=(0,Q.bo)("helpTextOnTop",()=>{const t=this.mode();return"radio"===t||"checkbox"===t})}#e;static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-preview"]],features:[e.Vt3],decls:14,vars:3,consts:[["textToggle",""],["addNew",""],["entityTypesMenu","matMenu"],[1,"my-flex"],[1,"eav-mat-form-field"],[3,"showSelectedItem","showItemEditButtons"],["freeTextButtons","",4,"ngTemplateOutlet"],["freeTextButtons",""],["addNew","",4,"ngTemplateOutlet"],["freeTextButtons","",4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],["mat-icon-button","","tippyTranslate","Fields.Picker.OpenMultiselect",1,"picker-inline-button",3,"disabled"],["mat-icon-button","","tippyTranslate","Fields.Picker.OpenMultiselect",1,"picker-inline-button",3,"click","disabled"],[3,"ngClass"],[3,"csDisabled","allowText","isTextMode","showBoth"],["mat-icon-button","","tippyTranslate","Fields.Picker.New",1,"picker-inline-button",3,"disabled"],["mat-icon-button","","tippyTranslate","Fields.Picker.New",1,"picker-inline-button",3,"disabled","matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],["mat-icon-button","","tippyTranslate","Fields.Picker.New",1,"picker-inline-button",3,"click","disabled"]],template:function(n,a){if(1&n&&(e.j41(0,"div",3)(1,"div",4),e.nVh(2,Uu,2,1,"app-picker-text")(3,Wu,3,4,"app-picker-checkboxes")(4,Qu,3,4,"app-picker-radio")(5,Zu,2,1,"app-picker-pills")(6,qu,2,3,"app-picker-search",5),e.k0s(),e.nVh(7,np,3,2,"div",3),e.k0s(),e.nVh(8,ip,1,0,"app-field-helper-text")(9,ap,1,0,"br"),e.DNE(10,sp,2,7,"ng-template",null,0,e.C5r)(12,dp,1,1,"ng-template",null,1,e.C5r)),2&n){let s;e.R7$(2),e.vxM("text"===(s=a.mode())?2:"checkbox"===s?3:"radio"===s?4:"pills"===s?5:"search"===s?6:-1),e.R7$(5),e.vxM("radio"!==a.mode()&&"checkbox"!==a.mode()?7:-1),e.R7$(),e.vxM(a.skipHelpText()?9:8)}},dependencies:[Ue.T3,Ue.YU,Pt.Hl,qt.iY,Ft.Cn,Ft.kk,Ft.fb,Ft.Cp,j.m_,j.An,At.e,ku,Lu,Na,fr,Dd,Fu,Xt],styles:[".picker-inline-button[_ngcontent-%COMP%]{scale:.8;margin-left:-4px;margin-right:-4px}.picker-suffix-text[_ngcontent-%COMP%]{min-width:80px}.my-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0}"]})}}return i})();const vr=i=>({disabled:i}),up=(i,o)=>o.value+i;function pp(i,o){if(1&i&&(e.j41(0,"mat-label",0),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(2,vr,t.ui().disabled)),e.R7$(),e.SpI(" ",t.basics().labelWithRequired," ")}}function hp(i,o){if(1&i&&(e.j41(0,"mat-icon",5),e.EFF(1," drag_handle "),e.k0s()),2&i){const t=e.XpG(3);e.Y8G("tippyDisabled",t.ui().disabled)}}function mp(i,o){if(1&i&&(e.j41(0,"div",3)(1,"div",4),e.nVh(2,hp,2,1,"mat-icon",5),e.j41(3,"span",6),e.EFF(4),e.k0s()(),e.nrm(5,"app-picker-item-buttons",7),e.k0s()),2&i){const t=o.$implicit,n=o.$index,a=e.XpG(2);e.Y8G("ngClass","my-item-"+(a.features().multiValue?"draggable":"static")+" "+(a.ui().disabled?"disabled":"")),e.R7$(),e.Y8G("ngClass",e.eq3(8,vr,a.ui().disabled)),e.R7$(),e.vxM(a.features().multiValue?2:-1),e.R7$(),e.Y8G("tippy",t.tooltip),e.R7$(),e.SpI(" ",t.label," "),e.R7$(),e.Y8G("show",!0)("item",t)("index",n)}}function fp(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",2),e.bIt("cdkDropListDropped",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.drop(a))}),e.Z7z(1,mp,6,10,"div",3,up),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("cdkDropListDisabled",!t.features().multiValue||t.ui().disabled)("ngClass","my-list-"+(t.features().multiValue?"draggable":"static")),e.R7$(),e.Dyx(t.selectedItems())}}let gp=(()=>{class i extends fn{constructor(){super(),this.log=(0,f.Tq)({PickerListComponent:i})}drop(t){this.pickerData.state.reorder({previousIndex:t.previousIndex,currentIndex:t.currentIndex})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-list"]],features:[e.Vt3],decls:2,vars:2,consts:[[1,"field-label",3,"ngClass"],["cdkDropList","",1,"my-list",3,"cdkDropListDisabled","ngClass"],["cdkDropList","",1,"my-list",3,"cdkDropListDropped","cdkDropListDisabled","ngClass"],["cdkDrag","",1,"my-item",3,"ngClass"],[1,"item-title",3,"ngClass"],["tippyTranslate","Fields.Picker.DragMove",1,"item-title__icon",3,"tippyDisabled"],[1,"item-title__text",3,"tippy"],["matSuffix","",1,"my-item-actions",3,"show","item","index"]],template:function(n,a){1&n&&(e.nVh(0,pp,2,4,"mat-label",0),e.nVh(1,fp,3,2,"div",1)),2&n&&(e.vxM(a.features().multiValue?-1:0),e.R7$(),e.vxM(a.selectedItems().length>0?1:-1))},dependencies:[Gt.RG,wt.nJ,wt.yw,j.m_,j.An,Pt.Hl,Ue.YU,Nn.O7,Nn.T1,Ra,At.e],styles:[".my-list-static[_ngcontent-%COMP%]   .my-item-static[_ngcontent-%COMP%]{padding:0 0 1px;border-bottom:1px solid rgba(0,0,0,.2)}.my-list-static[_ngcontent-%COMP%]   .my-item-static[_ngcontent-%COMP%]:hover:not(.disabled){padding:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.my-list-static[_ngcontent-%COMP%]   .my-item-static.disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;background-image:linear-gradient(to right,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 33%,transparent 0%);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.field-label[_ngcontent-%COMP%]{display:block;-webkit-user-select:none;user-select:none;font-size:12px;line-height:14px;padding-top:12px;padding-bottom:4px;color:#1d273d70}.field-label.disabled[_ngcontent-%COMP%]{color:#1d273d3d}.my-list-static[_ngcontent-%COMP%]   .my-item-static[_ngcontent-%COMP%]{height:30px;display:flex;align-items:center;justify-content:space-between}.my-list-static[_ngcontent-%COMP%]   .my-item-static[_ngcontent-%COMP%]:first-of-type{height:31px}.my-list-static[_ngcontent-%COMP%]   .my-item-static[_ngcontent-%COMP%]:first-of-type   .item-title[_ngcontent-%COMP%]{margin-top:-2px}.my-list-static[_ngcontent-%COMP%]   .my-item-static[_ngcontent-%COMP%]:first-of-type   .my-item-actions[_ngcontent-%COMP%]{margin-top:-2px}.my-list-draggable[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;overflow:hidden;margin-bottom:32px}.my-item-draggable[_ngcontent-%COMP%]{height:40px;border-bottom:1px solid #ccc;padding:0 8px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-sizing:border-box;font-size:14px}.my-item-draggable[_ngcontent-%COMP%]:not(.disabled){cursor:move}.my-item-draggable[_ngcontent-%COMP%]:last-child{border:none}.item-title[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden}.item-title__icon[_ngcontent-%COMP%]{margin-right:8px;opacity:.4;-webkit-user-select:none;user-select:none}.item-title__text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item-title.disabled[_ngcontent-%COMP%]   .item-title__icon[_ngcontent-%COMP%]{color:#1d273d3d}.item-title.disabled[_ngcontent-%COMP%]   .item-title__text[_ngcontent-%COMP%]{color:#1d273d3d;cursor:default}.my-item-actions[_ngcontent-%COMP%]{flex-shrink:0}.my-item[_ngcontent-%COMP%]:not(:hover)   .my-item-actions[_ngcontent-%COMP%]{display:none}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.my-list-draggable.cdk-drop-list-dragging[_ngcontent-%COMP%]   .my-item-draggable[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}}return i})();function vp(i,o){1&i&&e.nrm(0,"app-picker-search",1),2&i&&e.Y8G("showSelectedItem",!1)("showItemEditButtons",!1)}function yp(i,o){1&i&&e.nrm(0,"app-picker-text")}function bp(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){const a=r.eBV(t).$implicit,s=e.XpG(3);return r.Njj(s.openNewEntityDialog(a.guid))}),e.j41(1,"span"),e.EFF(2),e.k0s()()}if(2&i){const t=o.$implicit;e.R7$(2),e.JRh(t.label)}}function _p(i,o){if(1&i&&(e.j41(0,"button",4)(1,"mat-icon"),e.EFF(2,"add"),e.k0s()(),e.j41(3,"mat-menu",null,0),e.Z7z(5,bp,3,1,"button",5,e.fX1),e.k0s()),2&i){const t=e.sdS(4),n=e.XpG(2);e.Y8G("disabled",n.ui().disabled||!n.features().create)("matMenuTriggerFor",t),e.R7$(5),e.Dyx(n.pickerData.state.typesForNew())}}function xp(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.openNewEntityDialog(null))}),e.j41(1,"mat-icon"),e.EFF(2,"add"),e.k0s()()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.ui().disabled||!t.features().create)}}function Cp(i,o){if(1&i&&(e.j41(0,"div",2),e.nVh(1,_p,7,2)(2,xp,3,1,"button",3),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.vxM(t.pickerData.state.typesForNew().length>1?1:2)}}let sn=(()=>{class i extends fn{constructor(){super(...arguments),this.showAddNewEntityButtonInDialog=(0,Q.bo)("showAddNewEntityButtonInDialog",()=>{const t=this.features(),n=this.fieldState.settings();return!this.isInFreeTextMode()&&n.EnableCreate&&n.CreateTypes&&t.multiValue})}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(i)))(a||i)}})()}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-dialog"]],features:[e.Vt3],decls:5,vars:2,consts:[["entityTypesMenu","matMenu"],[3,"showSelectedItem","showItemEditButtons"],[2,"display","flex","justify-content","end"],["mat-mini-fab","","color","accent","tippyTranslate","Fields.Picker.New",3,"disabled"],["mat-mini-fab","","color","accent","tippyTranslate","Fields.Picker.New",3,"disabled","matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",3,"click"],["mat-mini-fab","","color","accent","tippyTranslate","Fields.Picker.New",3,"click","disabled"]],template:function(n,a){1&n&&(e.nrm(0,"app-picker-list"),e.nVh(1,vp,1,2,"app-picker-search",1)(2,yp,1,0,"app-picker-text"),e.nrm(3,"app-field-helper-text"),e.nVh(4,Cp,3,1,"div",2)),2&n&&(e.R7$(),e.vxM(a.isInFreeTextMode()?2:1),e.R7$(3),e.vxM(a.showAddNewEntityButtonInDialog()?4:-1))},dependencies:[gp,Na,fr,Xt,Pt.Hl,Pt.$0,Ft.Cn,Ft.kk,Ft.fb,Ft.Cp,j.m_,j.An,At.e],encapsulation:2})}}return i})();function wp(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Tp(i,o){1&i&&e.nrm(0,"app-picker-dialog")}let zt=(()=>{class i extends ut.${static{this.logSpecs={all:!1,focusOnSearchComponent:!0,refreshOnChildClosed:!1,childFormResult:!0}}constructor(){super(),this.#e=(0,r.WQX)(r.zZn),this.#t=(0,r.WQX)(gt),this.#n=(0,r.WQX)(it.W),this.#i=this.#n.pickerData,this.showPreview=(0,Q.bo)("showPreview",()=>{const t=this.#i.features();return!t.multiValue||t.multiValue&&!this.#n.isOpen()})}constructorEnd(){this.log??=(0,f.Tq)({PickerComponent:i},i.logSpecs),this.log.a("constructor"),new ka(this.#e).setupPickerData(this.#i,this.#n)}#e;#t;#n;#i;ngOnInit(){this.#i.closeWatcherAttachedWIP||(this.#a(),this.#i.closeWatcherAttachedWIP=!0)}#a(){const t=this.log.fnIf("refreshOnChildClosed"),n=this.#n.config;this.subscriptions.add(this.#t.childFormResult(n.index,n.entityGuid).subscribe(a=>this.log.fnIf("childFormResult",{result:a}).r(this.#i.addNewlyCreatedItem(a)))),t.end()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["ng-component"]],viewQuery:function(n,a){if(1&n&&e.GBs(Na,5),2&n){let s;e.mGM(s=e.lsd())&&(a.entitySearchComponent=s.first)}},features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,wp,1,0,"app-picker-preview")(1,Tp,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();const kp={all:!0,calculateDropdownOptions:!0,addSelectedIfMissing:!0};class Ei{constructor(){this.log=(0,xa.T)({DataSourceDropDownOptions:Ei},kp)}parseOptions(o,t,n,a){const s=this.log.fn("calculateDropdownOptions",{currentValue:o,type:t,dropdownValuesFormat:n,dropdownValues:a});if(!a)return s.r(this.addSelectedIfMissing([],o),"No dropdownValues");const c=a.replace(/\r/g,"").split("\n");switch(n){case"":const p=c.map(O=>{const G=O.split(":"),ie=G[1],ae=G.shift(),ke=G.join(":");return{Title:ae,Value:ke||""===ie?ke:ae}});return s.r(this.addSelectedIfMissing(p,o));case"value-label":const x=c.map(O=>{const G=[];for(let ke=0;ke<O.length;ke++){const Je=O[ke],rt=O[ke+1];"\\"!==Je||null==rt?G.push({char:Je,escaped:!1}):(G.push({char:rt,escaped:!0}),ke++)}const ie=G.findIndex(ke=>":"===ke.char&&!1===ke.escaped),ae={Title:ie>=0?G.slice(ie+1,G.length).map(ke=>ke.char).join(""):G.map(ke=>ke.char).join(""),Value:ie>=0?G.slice(0,ie).map(ke=>ke.char).join(""):G.map(ke=>ke.char).join("")};return"number"===t&&(ae.Value=null!=ae.Value&&""!==ae.Value?isNaN(Number(ae.Value))?null:Number(ae.Value):null),ae});return s.r(this.addSelectedIfMissing(x,o))}}addSelectedIfMissing(o,t){const n=this.log.fn("addSelectedIfMissing",{options:o,currentValue:t});if(null==t||""===t)return n.r(o,"currentValue is null");const a=t.toString();return o.some(c=>c.Value?.toString()===a)?n.r(o,"found"):n.r([...o,{Title:a,Value:t}])}}var Sp=g(92853),Ep=g.n(Sp);const Ip={all:!0,parse:!0};class $a{constructor(){this.log=(0,f.Tq)({DataSourceParserCsv:$a},Ip)}parse(o){const t=this.log.fnIf("parse",{csv:o}),n=Ep().parse(o,{header:!0,skipEmptyLines:!0,transformHeader:ie=>ie.trim(),transform:(ie,ae)=>"Value"==ae?ie:ie.trim(),dynamicTyping:!0}),a=n?.data;if(!a||!Array.isArray(a)||0==a.length)return[];const s=a.filter(ie=>void 0!==ie.Value);s.length!=a.length&&console.warn("CSV contains rows without a value",{data:a,filtered:s});const c=n?.meta.fields??[],p=c.reduce((ie,ae)=>({...ie,[ae]:null}),{}),{Value:x,...O}=p;t.a("Parsed CSV",{header:c,empty:O,data:a,filtered:s});const G=s.map(ie=>({...O,...ie,Value:ie.Value??""}));return t.r(G)}}const Mp={all:!0,getDataSourceAndSetupFieldSettings:!0,data:!0};class dn{constructor(){this.log=(0,f.Tq)({PickerLogicShared:dn},Mp)}static setDefaultSettings(o){const t=o;return t.AllowMultiValue??=!1,t.EnableEdit??=!0,t.EnableCreate??=!0,t.EnableAddExisting??=!0,t.EnableRemove??=!0,t.EnableDelete??=!1,t.Label??="",t.EnableTextEntry??=!1,t.noAutoFocus=!0,t}static maybeOverrideEditRestrictions(o,t){const n=o;return t.eavConfig.removeEditRestrictions&&t.debug?(console.log(`SystemAdmin + Debug: Overriding edit restrictions for field '${n.Name}' (EntityType: '${n.EntityType}').`),n.EnableEdit=!0,n.EnableCreate=!0,n.EnableAddExisting=!0,n.EnableRemove=!0,n.EnableDelete=!0,{fs:n,removeEditRestrictions:!0}):{fs:n,removeEditRestrictions:!1}}preUpdate({settings:o,tools:t,value:n}){const a=dn.setDefaultSettings({...o}),{fs:s,removeEditRestrictions:c}=dn.maybeOverrideEditRestrictions(a,t),{fs:p,typeConfig:x}=(new dn).#e(n,s,t);return{fs:p,removeEditRestrictions:c,typeConfig:x}}#e(o,t,n){const a=t,s=a.DataSources?.length>0?n.contentTypeItemSvc.getMany(a.DataSources):[],c=s[0],p=c?.Type.Name;a.dataSourceType=p??"";const x=n.reader.flatten(c),O=Object.values(Rt).includes(p),G=this.log.fn("dataSources",{dataSources:s});if(G.values({typeName:p,isKnownType:O,dataSources:s,typeConfig:x}),!O)return console.error(`Unknown picker source type: '${p}' on field ${a.Name}`),{fs:a,typeConfig:x};a.CreateTypes=x.CreateTypes??"",a.MoreFields=x.MoreFields??"",a.Label=x.Label??"",a.ItemInformation=x.ItemInformation??"",a.ItemTooltip=x.ItemTooltip??"",a.ItemLink=x.ItemLink??"",a.PreviewType=x.PreviewType??"",a.Value=x.Value??"",a.PreviewValue=x.PreviewValue??"";const ie=p===Rt.UiPickerSourceQuery,ae=p===Rt.UiPickerSourceEntity,ke=p===Rt.UiPickerSourceCss,Je=p===Rt.UiPickerSourceAppAssets;G.values({sourceIsQuery:ie,sourceIsEntity:ae,sourceIsCss:ke,sourceIsAppAssets:Je});const rt=Object.values(Ta).includes(p);if(ie){const st=x;a.Query=st.Query??"",a.StreamName=st.StreamName??"Default",a.UrlParameters=st.QueryParameters??""}if(ae&&(a.EntityType=x.ContentTypeNames??""),ke&&(a.CssSourceFile=x.CssSourceFile??"",a.CssSelectorFilter=x.CssSelectorFilter??""),Je&&(a.AssetsRootFolder=x.AssetsRootFolder??"/",a.AssetsFileFilter=x.AssetsFileFilter??"*.*",a.AssetsType=x.AssetsType??"files",a.requiredFeatures=[Ot.T.PickerSourceAppAssets]),rt)if(p===Rt.UiPickerSourceCustomList){const st=x.Values??"";a._options??=(new Ei).parseOptions(o,"string","value-label",st)??[]}else if(p===Rt.UiPickerSourceCustomCsv){const st=x.Csv;a._options??=(new $a).parse(st),a.requiredFeatures=[Ot.T.PickerSourceCsv]}return a.AllowMultiValue?a.EnableReselect??=!1:a.EnableReselect=!1,a.AllowMultiValue?(a.AllowMultiMin??=0,a.AllowMultiMax??=0):(a.AllowMultiMin=0,a.AllowMultiMax=0),a.PickerDisplayMode??="list",a.PickerDisplayConfiguration??=[],a.PickerTreeConfiguration=this.#t(a,n),{fs:a,typeConfig:x}}#t(o,t){if(o.PickerTreeConfiguration)return o.PickerTreeConfiguration;if("tree"!==o.PickerDisplayMode)return null;const n=o.PickerDisplayConfiguration?.length>0?t.contentTypeItemSvc.getMany(o.PickerDisplayConfiguration):[];if(n[0]?.Type.Name!==Us)return null;const s=t.reader.flatten(n[0]);return{Title:s.Title??"",ConfigModel:Us,TreeRelationship:s.TreeRelationship??xi,TreeBranchesStream:s.TreeBranchesStream??"Default",TreeLeavesStream:s.TreeLeavesStream??"Default",TreeParentIdField:s.TreeParentIdField??"Id",TreeChildIdField:s.TreeChildIdField??"Id",TreeParentChildRefField:s.TreeParentChildRefField??"Children",TreeChildParentRefField:s.TreeChildParentRefField??"Parent",TreeShowRoot:s.TreeShowRoot??!0,TreeDepthMax:s.TreeDepthMax??10,TreeAllowSelectRoot:s.TreeAllowSelectRoot??!0,TreeAllowSelectBranch:s.TreeAllowSelectBranch??!0,TreeAllowSelectLeaf:s.TreeAllowSelectLeaf??!0}}}class Hn extends mt.L{constructor(){super({EntityDefaultSettingsHelper:Hn}),this.name=Ye.u.EntityDefault}update({settings:o,tools:t}){const n=dn.setDefaultSettings({...o});return n.EntityType??="",n.CreateTypes=n.EntityType??"",n.CreatePrefill??=n.Prefill,delete n.Prefill,dn.maybeOverrideEditRestrictions(n,t).fs}}function Pp(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Dp(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(Hn);let yr=(()=>{class i extends zt{constructor(){super(),this.log=(0,f.Tq)({EntityDefaultComponent:i},zt.logSpecs),this.constructorEnd(),Hn.importMe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["entity-default"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,Pp,1,0,"app-picker-preview")(1,Dp,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();class Ii extends mt.L{constructor(){super({EntityContentBlocksSettingsHelper:Ii}),this.name=Ye.u.EntityContentBlocks}update(o){const n=xe.a.singleton().get(Ye.u.EntityDefault).update(o);return n.EnableRemove=!0,n.AllowMultiValue=!0,n.EnableAddExisting=!1,n.EnableCreate=!1,n.EnableEdit=!1,n.Visible=!1,n.EntityType="ContentGroupReference",n.CreateTypes=n.EntityType,n}}function Fp(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Op(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(Ii);let Ap=(()=>{class i extends yr{constructor(){super(),Ii.importMe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["entity-content-blocks"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,Fp,1,0,"app-picker-preview")(1,Op,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();class Mi extends mt.L{constructor(){super({EntityPickerSettingsHelper:Mi}),this.name=Ye.u.EntityPicker}update(o){return(new dn).preUpdate(o).fs}}function Rp(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Lp(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(Mi);let Vp=(()=>{class i extends zt{constructor(){super(),this.log=(0,f.Tq)({EntityPickerComponent:i},zt.logSpecs),this.constructorEnd(),Mi.importMe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["entity-picker"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,Rp,1,0,"app-picker-preview")(1,Lp,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();class Pi extends mt.L{constructor(){super({EntityQuerySettingsHelper:Pi}),this.name=Ye.u.EntityQuery}update(o){const n=xe.a.singleton().get(Ye.u.EntityDefault).update(o);return n.Query??="",n.StreamName||="Default",n.UrlParameters??="",n}}function zp(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Np(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(Pi);let jp=(()=>{class i extends zt{constructor(){super(),this.log=(0,f.Tq)({EntityQueryComponent:i},zt.logSpecs),this.constructorEnd(),Pi.importMe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["entity-query"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,zp,1,0,"app-picker-preview")(1,Np,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();var br=g(41134),Ha=g(92063);let Wa=(()=>{class i extends X.B{constructor(t){super(),this.formConfig=t}getAllPromise(t,n){return this.fetchPromise(t+"/items",{params:{subfolder:n.subfolder,usePortalRoot:n.usePortalRoot.toString(),appId:this.formConfig.config.appId}})}addFolder(t,n,a){return this.http.post(n+"/folder",{},{params:{subfolder:a.subfolder,newFolder:ce.SX.sanitizeName(t),usePortalRoot:a.usePortalRoot.toString(),appId:this.formConfig.config.appId}})}renamePromise(t,n,a,s){return this.fetchPromise(a+"/rename",{params:{subfolder:s.subfolder,isFolder:t.IsFolder.toString(),id:t.Id.toString(),usePortalRoot:s.usePortalRoot.toString(),newName:ce.SX.sanitizeName(n),appId:this.formConfig.config.appId}})}deleteItemPromise(t,n,a){return this.fetchPromise(n+"/delete",{params:{subfolder:a.subfolder,isFolder:t.IsFolder.toString(),id:t.Id.toString(),usePortalRoot:a.usePortalRoot.toString(),appId:this.formConfig.config.appId}})}getLinkInfoPromise(t,n,a,s){return this.fetchPromise("cms/edit/linkInfo",{params:{link:t,...a&&{guid:a},...n&&{contentType:n},...s&&{field:s},appid:this.formConfig.config.appId}})}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(y.S))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Wn=g(88857),_r=g(89498),xr=g(33518);class Xa{get field(){return this.fieldConfigSignal()}get field$(){return this.#e??=(0,et.br)(this.fieldConfigSignal,{injector:this._experimental.injector})}#e;constructor(o,t,n,a,s){this.fieldConfigSignal=n,this._experimental=a,this.log=(0,f.Tq)({ConnectorInstance:Xa}),this.data=new Bp(o,t),this.dialog=new Gp(o),this.loadScript=(c,p,x)=>{if(("string"==typeof c||"function"==typeof c)&&"string"==typeof p&&"function"==typeof x)return p=lt.resolveUrlTokens(p,s),void(0,xr.P)([{test:c,src:p}],x);if(!Array.isArray(c)||"function"!=typeof p)throw new Error("Unrecognized parameters. Please double check your input");for(const G of c)G.src=lt.resolveUrlTokens(G.src,s);(0,xr.P)(c,p)}}}class Bp{constructor(o,t){this._connectorHost=o,this.value$=t,this.clientValueChangeListeners=[],this.value$.subscribe(n=>{this.value=n,this.clientValueChangeListeners.forEach(a=>a(n))})}update(o){this._connectorHost.update(o)}onValueChange(o){this.clientValueChangeListeners.push(o)}}class Gp{constructor(o){this._connectorHost=o}open(o){return this._connectorHost.expand(!0,o)}close(){this._connectorHost.expand(!1)}}const Up={all:!1,constructor:!1,init:!0,getUrlOfId:!1,updateControl:!1,openFeatureDisabledWarning:!1};let Cr=(()=>{class i extends ft.V{#e;#t;#n;#i;#a;#s;#r;#o;#l;#d;#c;#p;constructor(){super(),this.log=(0,f.Tq)({ConnectorHelper:i},Up),this.#e=(0,r.WQX)(r.zZn),this.#t=(0,r.WQX)(it.W),this.#n=(0,r.WQX)(y.S),this.#i=(0,r.WQX)(ue.c$),this.#a=(0,r.WQX)(N.n),this.#s=(0,r.WQX)(ee.A),this.#r=(0,r.WQX)(v.D),this.#o=(0,r.WQX)(gt),this.#l=(0,r.WQX)(tt.bZ),this.#d=(0,r.WQX)(Se.UG),this.#c=(0,r.WQX)(r.SKi),this.#p=(0,le.d)(Wa),this.#f=this.#t.ui().control.valueChanges.pipe((0,fe.Z)(this.#t.uiValue()),(0,zn.F)(pn.A)),this.#u=this.#t.config,this.#m=this.#t.group,this.log.aIf("constructor")}#h;#f;#u;#m;#g;#v;init(t,n,a,s){return this.log.a("init"),this.#g=a,this.#v=s,this.#h=document.createElement(t),this.#h.connector=this.#y(),n.nativeElement.appendChild(this.#h),this}ngOnDestroy(){this.log.a("ngOnDestroy"),this.#h?.parentNode.removeChild(this.#h),this.#h=null,super.ngOnDestroy()}#y(){const t=this.#b(),n=this.#x(),a=(0,Ne.EW)(()=>{const c=this.#t.settings();return function $p(i,o){return{name:i.fieldName,index:i.index,label:o.Name,placeholder:o.Placeholder,inputType:i.inputTypeSpecs.inputType,type:i.type,required:o.valueRequired,disabled:i.initialDisabled,settings:o}}(this.#u,c)},{equal:pn.A}),s=new Xa(t,this.#f,a,n,this.#n.config);return(0,r.QZP)(()=>{const c=this.#t.settings(),p=s.field;p.settings=c,p.label=c.Name,p.placeholder=c.Placeholder,p.required=c.valueRequired},{injector:this.#e}),s}#b(){return{update:n=>{this.#c.run(()=>this.#_(n))},expand:(n,a)=>{this.#c.run(()=>this.#o.expand(n,this.#u.index,this.#u.entityGuid,a))}}}#x(){const t=this.#a.get(this.#u.contentTypeNameId),n=this.#s.getAttributeInputTypes(t.Attributes),a=(0,f.Tq)("ConnectorHelperExperimental");return{entityGuid:this.#u.entityGuid,allInputTypeNames:n,formGroup:this.#m,translateService:this.#i,isExpanded$:this.#o.isExpanded$(this.#u.index,this.#u.entityGuid),dropzone:this.#u.dropzone,adam:this.#u.adam,updateField:(c,p)=>{a.fn("updateField",{name:c,value:p}),this.#c.run(()=>{this.#_(p,this.#m.controls[c])})},isFeatureEnabled:this.#r.isEnabled,setFocused:c=>{a.fn("setFocused",{focused:c}),this.#c.run(()=>{this.#u.focused$.next(c)})},openPagePicker:c=>{a.fn("openPagePicker"),this.#c.run(()=>{_r.C.open(this.#u,this.#m,this.#l,this.#g,this.#v,c)})},featureDisabledWarning:c=>{a.fn("featureDisabledWarning",{featureNameId:c}),this.#c.run(()=>{this.#w(c)})},getUrlOfId:(c,p)=>{a.fn("getUrlOfId",{value:c}),this.#c.run(()=>{this.#C(c,p)})},getSettings:c=>this.#n.config.settings?.Values[c],getFieldMask:(c,p)=>(0,le.d)(ce.Nt,this.#e).init(p,c),injector:this.#e,showSnackBar:c=>{try{this.#c.run(()=>{const p=this.#i?.instant?this.#i.instant(c):c;this.#d.open(p??c,void 0,{duration:3e3})})}catch(p){console.warn("[ConnectorHelper] showSnackBar failed",p)}}}}#C(t,n){if(!t)return;const a=this.#u.contentTypeNameId,s=this.#u.entityGuid,c=this.#u.fieldName;this.#p.getLinkInfoPromise(t,a,s,c).then(p=>{p&&n(p.Value)})}#_(t,n=null){(n?new Wn.a(n):this.#t.ui()).disabled||this.#t.ui().setIfChanged(t)}#w(t){t===Ot.T.PasteImageFromClipboard&&this.#d.open(this.#i.instant("Message.PastingFilesIsNotEnabled"),this.#i.instant("Message.FindOutMore"),{duration:3e3}).onAction().subscribe(()=>(0,Ha.j)(this.#l,Ot.T.PasteImageFromClipboard,this.#g,this.#v))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const Hp=["customElContainer"];let Wp=(()=>{class i{constructor(){this.log=(0,f.Tq)({ConnectorComponent:i}),this.fieldState=(0,r.WQX)(it.W),this.connectorCreator=(0,le.d)(Cr),this.viewContainerRef=(0,r.WQX)(e.c1b),this.changeDetectorRef=(0,r.WQX)(Y.gRc)}ngAfterViewInit(){const t=this.log.fn("ngAfterViewInit"),n=history?.state?.componentTag||this.fieldState.config.inputTypeSpecs.componentTagDialogName;t.a("Connector created for:",{componentTag:n}),this.connectorCreator.init(n,this.customElContainerRef,this.viewContainerRef,this.changeDetectorRef)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-connector"]],viewQuery:function(n,a){if(1&n&&e.GBs(Hp,5),2&n){let s;e.mGM(s=e.lsd())&&(a.customElContainerRef=s.first)}},decls:2,vars:0,consts:[["customElContainer",""],[2,"height","100%","position","relative"]],template:function(n,a){1&n&&e.Hgh(0,"div",1,0)},encapsulation:2})}}return i})();class Di extends mt.L{constructor(){super({CustomGpsSettingsHelper:Di}),this.name=Ye.u.CustomGps}update({settings:o}){return{...o}}}mt.L.add(Di);class Fi extends mt.L{constructor(){super({StringWysiwygSettingsHelper:Fi}),this.name=Ye.u.StringWysiwyg,this.canAutoTranslate=!0}update({settings:o,tools:t}){const n={...o};return n._allowDialog??=null==n.Dialog||""===n.Dialog,n.Dialog||="inline",n.ButtonSource||="",n.ButtonAdvanced||="",n.ContentCss||="",n.InlineInitialHeight||="3",n._advanced=this.findAndMergeAdvanced(t,n.WysiwygConfiguration,{Mode:"default",Json:""}),n}processValueOnLoad(o,t){try{const n=(new DOMParser).parseFromString(o,"text/html");return n.body.querySelectorAll("img").forEach(a=>{const s=a.getAttribute("data-cmsid")?.replace("file:",""),c=a.getAttribute("src");if(s&&c){const p=c.split("/").pop();if(s===p){const x=t.find(O=>O.Name===s);x&&a.setAttribute("src",x.Url)}}}),n.body.innerHTML}catch(n){return console.error("Error while cleaning wysiwyg content",n),o}}}function Xp(i,o){1&i&&e.nrm(0,"mat-spinner",0)}function Yp(i,o){1&i&&e.nrm(0,"app-connector")}mt.L.add(Fi);let Qp=(()=>{class i{constructor(t){this.scriptsLoaderService=t,this.log=(0,f.Tq)({ExternalWebComponentComponent:i}),this.fieldState=(0,r.WQX)(it.W),this.config=this.fieldState.config,this.loading=(0,r.vPA)(!0),Fi.importMe(),Di.importMe()}ngOnInit(){this.loadAssets()}loadAssets(){const t=this.config.inputTypeSpecs.metadata.UiAssets?.default?.split("\n")??[];0!==t.length&&this.scriptsLoaderService.load(t,this.assetsLoaded.bind(this))}assetsLoaded(){this.log.fn("assetsLoaded "+this.config.fieldName),this.loading.set(!1)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(lt))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["external-web-component"]],decls:2,vars:1,consts:[["color","accent"]],template:function(n,a){1&n&&e.nVh(0,Xp,1,0,"mat-spinner",0)(1,Yp,1,0,"app-connector"),2&n&&e.vxM(a.loading()?0:a.fieldState.isOpen()?1:-1)},dependencies:[br.D6,br.LG,Wp],encapsulation:2})}}return i})();const Kp={all:!0,constructor:!1,handleImage:!1};let Ya=(()=>{class i{#e;#t;constructor(t,n,a,s,c,p,x){this.elementRef=t,this.features=n,this.snackBar=a,this.translate=s,this.matDialog=c,this.viewContainerRef=p,this.changeDetectorRef=x,this.log=(0,f.Tq)({PasteClipboardImageDirective:i},Kp),this.config=(0,Y.hFB)(),this.elementType=(0,Y.hFB)(),this.#e=[],this.#t=this.features.isEnabled[Ot.T.PasteImageFromClipboard](),this.log.fn("constructor",{elementType:this.elementType(),pasteImageEnabled:this.#t})}ngOnInit(){switch(this.elementType()){case"input":this.elementRef.nativeElement.pastableTextarea();break;case"element":this.elementRef.nativeElement.pastableNonInputable()}const t=n=>{this.#n(n)};this.elementRef.nativeElement.addEventListener("handleImage",t),this.#e.push({element:this.elementRef.nativeElement,type:"handleImage",listener:t})}ngOnDestroy(){this.#e.forEach(({element:t,type:n,listener:a})=>{t.removeEventListener(n,a)})}#n(t){const n=this.#t,a=this.log.fnIf("handleImage",{event:t},"handling paste image - "+(n?"enabled":"disabled"));if(n){const s=this.#i(t.detail);this.config().dropzone.uploadFile(s),a.end("started upload")}else this.snackBar.open(this.translate.instant("Message.PastingFilesIsNotEnabled"),this.translate.instant("Message.FindOutMore"),{duration:3e3}).onAction().subscribe(()=>{(0,Ha.j)(this.matDialog,Ot.T.PasteImageFromClipboard,this.viewContainerRef,this.changeDetectorRef)}),a.end("not enabled, showing snackbar")}#i(t){let n=t.file;try{const a=new FormData;a.append("file",t.file,t.imageFileName),n=a.get("file")}catch(a){console.error("paste image error",a)}return n}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(e.aKT),e.rXU(v.D),e.rXU(Se.UG),e.rXU(ue.c$),e.rXU(tt.bZ),e.rXU(e.c1b),e.rXU(Y.gRc))}}static{this.\u0275dir=e.FsC({type:i,selectors:[["","appPasteClipboardImage",""]],inputs:{config:[1,"config"],elementType:[1,"elementType"]}})}}return i})(),wr=(()=>{class i{#e;#t;constructor(t,n,a,s,c,p){this.formConfig=t,this.matDialog=n,this.viewContainerRef=a,this.changeDetectorRef=s,this.linkCacheService=c,this.formsStateService=p,this.log=(0,f.Tq)({HyperlinkDefaultBaseComponent:i}),this.preview=(0,r.vPA)({url:"",thumbnailUrl:"",previewUrl:"",floatingText:"",isImage:!1,isKnownType:!1,icon:""}),this.fieldState=(0,r.WQX)(it.W),this.settings=this.fieldState.settings,this.basics=this.fieldState.basics,this.config=this.fieldState.config,this.group=this.fieldState.group,this.ui=this.fieldState.ui,this.uiValue=this.fieldState.uiValue,this.#e=(0,r.WQX)(r.zZn),this.#t=(0,r.WQX)(gt),this.adamService=(0,le.d)(Wa),this.adamItem=(0,Q.bo)("adamItem",()=>{const x=this.uiValue(),O=this.config.adam.items();if(!x||!O.length)return;const G=x.trim().match(/^file:([0-9]+)$/i);if(!G)return;const ie=parseInt(G[1],10);return O.find(ke=>ke.Id===ie)})}ngOnInit(){(0,r.QZP)(()=>{this.log.a("controlStatus effect");const t=this.fieldState.uiValue();this.fetchLink(t)},{injector:this.#e})}openPagePicker(){_r.C.open(this.config,this.group,this.matDialog,this.viewContainerRef,this.changeDetectorRef,t=>{t&&this.fieldState.ui().setIfChanged(`page:${t.id}`)})}openImageConfiguration(t){if(this.formsStateService.readOnly().isReadOnly||!t?._imageConfigurationContentType)return;const n={items:[t._imageConfigurationId>0?se.H.editId(t._imageConfigurationId):se.H.newMetadata(t.ReferenceId,t._imageConfigurationContentType,_n.YX.metadata.cmsObject)]};this.#t.open(this.config.index,this.config.entityGuid,n)}fetchLink(t){if(this.log.a("fetchLink",{value:t}),!t)return void this.setPreview(t,!1);if(!this.isFileOrPage(t))return void this.setPreview(t,!1);const a=this.linkCacheService.get(t);if(a){const x=!this.isFileOrPage(a.Value);return void this.setPreview(a.Value,x,a.Adam)}this.adamService.getLinkInfoPromise(t,this.config.contentTypeNameId,this.config.entityGuid,this.config.fieldName).then(x=>{if(!x)return void this.setPreview(t,!1);this.linkCacheService.addLink(t,x);const O=!this.isFileOrPage(x.Value);this.setPreview(x.Value,O,x.Adam)})}setPreview(t,n,a){const s=this.getPreview(t,n,a);this.preview.set(s)}getPreview(t,n,a){return{url:t=t.replace(/\[App:Path\]/i,ce.b.getUrlPrefix("app",this.formConfig.config)),floatingText:n?`.../${t.substring(t.lastIndexOf("/")+1)}`:"",thumbnailUrl:`url("${a?.ThumbnailUrl??this.buildUrl(t,1)}")`,previewUrl:a?.PreviewUrl??this.buildUrl(t,2),isImage:ce.M5.isImage(t),isKnownType:ce.M5.isKnownType(t),icon:ce.M5.getIconClass(t)}}buildUrl(t,n){let a="";return 1===n&&(a+="w=80&h=80&mode=crop"),2===n&&(a+="w=800&h=800&mode=max"),a&&!t.includes("?")&&(a="?"+a),t+a}isFileOrPage(t){const n=t.trim().toLocaleLowerCase();return n.startsWith("file:")||n.startsWith("page:")}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(y.S),e.rXU(tt.bZ),e.rXU(e.c1b),e.rXU(Y.gRc),e.rXU(E),e.rXU(Vt))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-base-field-hyperlink"]],decls:0,vars:0,template:function(n,a){},encapsulation:2})}}return i})();class Oi extends mt.L{constructor(){super({HyperlinkDefaultSettingsHelper:Oi}),this.name=Ye.u.HyperlinkDefault}update({settings:o}){const t={...o};return t.Buttons||="adam,more",t.FileFilter??="",t.Paths??="",t.ServerResourceMapping??="",t.EnableImageConfiguration??=!0,t}}mt.L.add(Oi);const Zp=i=>({"metadata-exists":i});function Jp(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.toggleAdam(!1,!1))}),e.nrm(1,"mat-icon",18),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("disabled",t.ui().disabled)}}function qp(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.openPagePicker())}),e.nrm(1,"mat-icon",20),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("disabled",t.ui().disabled)}}function eh(i,o){if(1&i&&(e.j41(0,"button",6)(1,"mat-icon"),e.EFF(2,"more_vert"),e.k0s()()),2&i){e.XpG();const t=e.sdS(8),n=e.XpG(2);e.Y8G("disabled",n.ui().disabled)("matMenuTriggerFor",t)}}function th(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){r.eBV(t);const a=e.XpG(4);return r.Njj(a.toggleAdam(!1,!1))}),e.nrm(1,"mat-icon",18),e.j41(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"Fields.Hyperlink.Default.MenuAdam")))}function nh(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){r.eBV(t);const a=e.XpG(4);return r.Njj(a.openPagePicker())}),e.nrm(1,"mat-icon",20),e.j41(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"Fields.Hyperlink.Default.MenuPage")))}function ih(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){r.eBV(t);const a=e.XpG(4);return r.Njj(a.toggleAdam(!0,!0))}),e.nrm(1,"mat-icon",23),e.j41(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"Fields.Hyperlink.Default.MenuImage")))}function ah(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){r.eBV(t);const a=e.XpG(4);return r.Njj(a.toggleAdam(!0,!1))}),e.nrm(1,"mat-icon",24),e.j41(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"Fields.Hyperlink.Default.MenuDocs")))}function sh(i,o){if(1&i&&(e.nVh(0,th,5,3,"button",21),e.nVh(1,nh,5,3,"button",21),e.nVh(2,ih,5,3,"button",21),e.nVh(3,ah,5,3,"button",21)),2&i){const t=e.XpG(3);e.vxM(t.showAdam()?0:-1),e.R7$(),e.vxM(t.showPagePicker()?1:-1),e.R7$(),e.vxM(t.showImageManager()?2:-1),e.R7$(),e.vxM(t.showFileManager()?3:-1)}}function rh(i,o){if(1&i&&(e.j41(0,"div",15)(1,"div",25),e.EFF(2),e.k0s(),e.j41(3,"div",26)(4,"a",27)(5,"span"),e.EFF(6),e.k0s()()()()),2&i){const t=e.XpG(2),n=e.XpG();e.R7$(2),e.JRh(n.uiValue()),e.R7$(2),e.Y8G("href",t.url,e.B4B)("tippy",t.url),e.R7$(2),e.JRh(t.floatingText)}}function oh(i,o){if(1&i&&(e.j41(0,"a",28)(1,"div",30),e.nrm(2,"img",31),e.k0s()()),2&i){const t=e.XpG(3);e.Y8G("href",t.url,e.B4B),e.R7$(2),e.Y8G("src",t.previewUrl,e.B4B)}}function lh(i,o){if(1&i&&(e.j41(0,"a",29)(1,"div",32),e.nrm(2,"mat-icon",33),e.k0s()()),2&i){const t=e.XpG(3);e.Y8G("href",t.url,e.B4B)("tippy",t.url),e.R7$(2),e.Y8G("svgIcon",t.icon)}}function ch(i,o){if(1&i&&(e.j41(0,"div",16),e.nVh(1,oh,3,2,"a",28)(2,lh,3,3,"a",29),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.vxM(t.isImage?1:2)}}function dh(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",1),e.nVh(1,Jp,2,1,"button",2),e.j41(2,"button",3),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.openImageConfiguration(a.adamItem()))}),e.j41(3,"mat-icon",4),e.EFF(4,"filter_center_focus"),e.k0s()(),e.nVh(5,qp,2,1,"button",5),e.nVh(6,eh,3,2,"button",6),e.k0s(),e.j41(7,"mat-menu",7,0),e.DNE(9,sh,4,4,"ng-template",8),e.k0s(),e.j41(10,"div",9)(11,"div",10)(12,"mat-card",11)(13,"div",12)(14,"mat-form-field",13),e.nrm(15,"input",14),e.j41(16,"mat-label"),e.EFF(17),e.k0s()(),e.nVh(18,rh,7,4,"div",15),e.k0s(),e.nVh(19,ch,3,1,"div",16),e.k0s()()()}if(2&i){let t,n,a;const s=e.XpG(),c=e.XpG();e.R7$(),e.vxM(c.buttonAdam()?1:-1),e.R7$(),e.Y8G("disabled",!(null!=(t=c.adamItem())&&t._imageConfigurationContentType))("ngClass",e.eq3(16,Zp,(null==(n=c.adamItem())?null:n._imageConfigurationId)>0)),e.R7$(),e.Y8G("tippyTranslate",c.enableImageConfiguration()?"Fields.Hyperlink.AdamFileManager.ImageSettingsUnavailable":"Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled")("tippyDisabled",null==(a=c.adamItem())?null:a._imageConfigurationContentType),e.R7$(2),e.vxM(c.buttonPage()?5:-1),e.R7$(),e.vxM(c.buttonMore()?6:-1),e.R7$(8),e.Y8G("formGroup",c.group),e.R7$(),e.Y8G("formControlName",c.config.fieldName)("placeholder",c.basics().placeholder)("required",c.basics().required)("config",c.config)("elementType","input"),e.R7$(2),e.JRh(c.basics().label),e.R7$(),e.vxM(null!=s&&s.floatingText?18:-1),e.R7$(),e.vxM(c.uiValue()?19:-1)}}function uh(i,o){if(1&i&&e.nVh(0,dh,20,18),2&i){const t=e.XpG();e.vxM(t.fieldState.isOpen()?0:-1)}}let Qa=class hs extends wr{constructor(o,t,n,a,s,c){super(o,t,n,a,s,c),this.buttonAdam=(0,Ne.EW)(()=>this.settings().Buttons.includes("adam"),bn.bool),this.buttonPage=(0,Ne.EW)(()=>this.settings().Buttons.includes("page"),bn.bool),this.buttonMore=(0,Ne.EW)(()=>this.settings().Buttons.includes("more"),bn.bool),this.showAdam=this.fieldState.settingExt("ShowAdam"),this.showPagePicker=this.fieldState.settingExt("ShowPagePicker"),this.showImageManager=this.fieldState.settingExt("ShowImageManager"),this.showFileManager=this.fieldState.settingExt("ShowFileManager"),this.enableImageConfiguration=this.fieldState.settingExt("EnableImageConfiguration"),Oi.importMe();const p=(0,Q.bo)("adamSettings",()=>{const x=this.fieldState.settings();return{rootSubfolder:x.Paths,fileFilter:x.FileFilter,autoLoad:!0}});(0,r.QZP)(()=>{const x=p();this.config.adam.setConfig(x)})}ngOnInit(){super.ngOnInit(),this.config.adam.onItemClick=o=>{this.setValue(o)},this.config.adam.onItemUpload=o=>{this.setValue(o)}}toggleAdam(o,t){this.config.adam.toggle(o,t)}setValue(o){const n="url"===this.settings().ServerResourceMapping?o.Url:o.ReferenceId;this.fieldState.ui().setIfChanged(n)}static{this.\u0275fac=function(t){return new(t||hs)(e.rXU(y.S),e.rXU(tt.bZ),e.rXU(e.c1b),e.rXU(Y.gRc),e.rXU(E),e.rXU(Vt))}}static{this.\u0275cmp=e.VBU({type:hs,selectors:[["hyperlink-default"]],features:[e.Vt3],decls:1,vars:1,consts:[["menu","matMenu"],[1,"fabs-box"],["mat-mini-fab","","color","accent","tippyTranslate","Fields.Hyperlink.Default.AdamTip",3,"disabled"],["mat-mini-fab","","color","primary","tippyTranslate","Fields.Hyperlink.AdamFileManager.ImageSettings",3,"click","disabled","ngClass"],[3,"tippyTranslate","tippyDisabled"],["mat-mini-fab","","color","primary","tippyTranslate","Fields.Hyperlink.Default.PageTip",3,"disabled"],["mat-mini-fab","","color","primary","tippyTranslate","Fields.Hyperlink.Default.MoreOptions",3,"disabled","matMenuTriggerFor"],[1,"menu-box"],["matMenuContent",""],[1,"eav-layout-grid"],[1,"eav-layout-grid__inner"],[1,"eav-card","eav-layout-grid__cell--span-12","hyperlink-card","shadow-bottom-z-1"],[1,"hyperlink-input-link-wrapper"],["color","accent",1,"eav-mat-form-field",3,"formGroup"],["matInput","","tippyTranslate","Fields.Hyperlink.Default.Tooltip","tippyPlacement","top","appPasteClipboardImage","",3,"formControlName","placeholder","required","config","elementType"],[1,"hyperlink-floating"],[1,"preview-wrapper"],["mat-mini-fab","","color","accent","tippyTranslate","Fields.Hyperlink.Default.AdamTip",3,"click","disabled"],["svgIcon","apple-outlined"],["mat-mini-fab","","color","primary","tippyTranslate","Fields.Hyperlink.Default.PageTip",3,"click","disabled"],["svgIcon","sitemap"],["mat-menu-item",""],["mat-menu-item","",3,"click"],["svgIcon","file-image"],["svgIcon","file"],[1,"hyperlink-floating__value"],[1,"hyperlink-floating__url-box"],["target","_blank",1,"hyperlink-floating__url",3,"href","tippy"],["target","_blank",3,"href"],["target","_blank","tippyPlacement","right",3,"href","tippy"],[1,"preview-image-box"],[1,"preview-image",3,"src"],[1,"preview-icon-box"],[3,"svgIcon"]],template:function(t,n){if(1&t&&e.nVh(0,uh,1,1),2&t){let a;e.vxM((a=n.preview())?0:-1,a)}},dependencies:[Pt.Hl,Pt.$0,j.m_,j.An,Ue.YU,Ft.Cn,Ft.kk,Ft.fb,Ft.z8,Ft.Cp,dt.Hu,dt.RN,Gt.RG,wt.rl,wt.nJ,ne.YN,ne.me,ne.BC,ne.cb,ne.YS,ne.X1,ne.j4,ne.JD,Ut.fS,Ut.fg,Ya,ue.h,At.e,ue.D9],styles:[".eav-card[_ngcontent-%COMP%]{padding:16px}.metadata-exists[_ngcontent-%COMP%]{color:#0087f4}.fabs-box[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:8px;z-index:11;position:fixed;width:800px;pointer-events:none}.fabs-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:16px;pointer-events:auto}.fabs-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:32px!important}.menu-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.hyperlink-card[_ngcontent-%COMP%]{border-radius:8px}.preview-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:8px}.preview-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.preview-image-box[_ngcontent-%COMP%]{z-index:100;width:100%;height:auto}.preview-image[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 219px - var(--edit-dialog-header-height) - var(--edit-dialog-margin-top));height:auto}.preview-icon-box[_ngcontent-%COMP%]{z-index:100;display:flex;align-items:center;justify-content:center;width:80px;height:80px;background-color:#1d273d14}.preview-icon-box[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:56px;width:56px;height:56px;line-height:56px;color:#1d273d70}"]})}};Qa=(0,Et.Cg)([Wt({wrappers:["app-dropzone-wrapper","app-localization-wrapper","app-hyperlink-default-expandable-wrapper","app-adam-wrapper"]}),(0,Et.Sn)("design:paramtypes",[y.S,tt.bZ,e.c1b,Y.gRc,E,Vt])],Qa);class Ai extends mt.L{constructor(){super({HyperlinkLibrarySettingsHelper:Ai}),this.name=Ye.u.HyperlinkLibrary}update({settings:o}){const t={...o};return t.EnableImageConfiguration??=!0,t}}mt.L.add(Ai);let Ka=class ms{constructor(){this.fieldState=(0,r.WQX)(it.W),this.injector=(0,r.WQX)(r.zZn),Ai.importMe();let o=!0;(0,r.QZP)(()=>{const t=this.fieldState.ui().control;t.adamItems=this.fieldState.config.adam.items().length,o||t.updateValueAndValidity(),o=!1})}ngOnInit(){this.attachAdamConfig()}attachAdamConfig(){const o=(0,Q.bo)("adamConfig",()=>{const t=this.fieldState.settings();return{allowAssetsInRoot:t.AllowAssetsInRoot,autoLoad:!0,enableSelect:!1,rootSubfolder:t.Paths,fileFilter:t.FileFilter,folderDepth:t.FolderDepth||0,metadataContentTypes:t.MetadataContentTypes}});(0,r.QZP)(()=>{const t=o();this.fieldState.config.adam.setConfig(t)},{injector:this.injector})}static{this.\u0275fac=function(t){return new(t||ms)}}static{this.\u0275cmp=e.VBU({type:ms,selectors:[["hyperlink-library"]],decls:0,vars:0,template:function(t,n){},encapsulation:2})}};Ka=(0,Et.Cg)([Wt({wrappers:["app-dropzone-wrapper","app-localization-wrapper","app-hyperlink-library-expandable-wrapper","app-adam-wrapper"]}),(0,Et.Sn)("design:paramtypes",[])],Ka);class Xn extends mt.L{constructor(){super({StringDropdownSettingsHelper:Xn}),this.name=Ye.u.StringDropdown,this.type="string"}update({settings:o,value:t}){const n=dn.setDefaultSettings({...o});return n._options=(new Ei).parseOptions(t,this.type,n.DropdownValuesFormat||"",n.DropdownValues||""),n.EntityType??="",n.CreateTypes=n.EntityType,n.EnableEdit??=!1,n.EnableCreate??=!1,n.EnableRemove??=n.AllowMultiValue,n}}mt.L.add(Xn);class Tr extends Xn{constructor(){super(...arguments),this.name=Ye.u.NumberDefault}update(o){return{...super.update(o)}}}mt.L.add(Tr);let Za=class fs{constructor(){this.fieldState=(0,r.WQX)(it.W),this.group=this.fieldState.group,this.config=this.fieldState.config,this.basics=this.fieldState.basics,this.min=this.fieldState.settingExt("Min"),this.max=this.fieldState.settingExt("Max"),Tr.importMe()}static{this.\u0275fac=function(t){return new(t||fs)}}static{this.\u0275cmp=e.VBU({type:fs,selectors:[["number-default"]],decls:5,vars:7,consts:[["color","accent",1,"eav-mat-form-field",3,"formGroup"],["matInput","","type","number",1,"eav-translate-on-dblclick",3,"formControlName","required","placeholder","min","max"]],template:function(t,n){1&t&&(e.j41(0,"mat-form-field",0),e.nrm(1,"input",1),e.j41(2,"mat-label"),e.EFF(3),e.k0s()(),e.nrm(4,"app-field-helper-text")),2&t&&(e.Y8G("formGroup",n.group),e.R7$(),e.Y8G("formControlName",n.config.fieldName)("required",n.basics().required)("placeholder",n.basics().placeholder)("min",n.min())("max",n.max()),e.R7$(2),e.JRh(n.basics().label))},dependencies:[Gt.RG,wt.rl,wt.nJ,ne.YN,ne.me,ne.Q0,ne.BC,ne.cb,ne.YS,ne.VZ,ne.zX,ne.X1,ne.j4,ne.JD,Ut.fS,Ut.fg,Xt],encapsulation:2})}};Za=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[])],Za);class kr extends Xn{constructor(){super(...arguments),this.name=Ye.u.NumberDropdown,this.type="number"}update(o){return{...super.update(o)}}}function ph(i,o){1&i&&e.nrm(0,"app-picker-preview")}function hh(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(kr);let Ja=class gs extends zt{constructor(){super(),this.constructorEnd(),kr.importMe()}static{this.\u0275fac=function(t){return new(t||gs)}}static{this.\u0275cmp=e.VBU({type:gs,selectors:[["number-dropdown"]],features:[e.Vt3],decls:2,vars:1,template:function(t,n){1&t&&e.nVh(0,ph,1,0,"app-picker-preview")(1,hh,1,0,"app-picker-dialog"),2&t&&e.vxM(n.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}};Ja=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[])],Ja);class Ri extends mt.L{constructor(){super({NumberPickerSettingsHelper:Ri}),this.name=Ye.u.NumberPicker}update(o){return xe.a.singleton().get(Ye.u.StringPicker).update(o)}}function mh(i,o){1&i&&e.nrm(0,"app-picker-preview")}function fh(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(Ri);let gh=(()=>{class i extends zt{constructor(){super(),this.log=(0,xa.T)({NumberPickerComponent:i},zt.logSpecs),this.constructorEnd(),Ri.importMe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["number-picker"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,mh,1,0,"app-picker-preview")(1,fh,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();class Li extends mt.L{constructor(){super({StringDefaultSettingsHelper:Li}),this.name=Ye.u.StringDefault,this.canAutoTranslate=!0}update(o){const t={...o.settings};return t.InputFontFamily??="",t.RowCount||=1,t}}mt.L.add(Li);const vh=i=>({"textarea-field":i}),yh=i=>({"font-family":i}),bh=(i,o)=>({"font-family":i,"white-space":o});function _h(i,o){if(1&i&&e.nrm(0,"input",1),2&i){const t=e.XpG();e.Y8G("formControlName",t.config.fieldName)("placeholder",t.basics().placeholder)("required",t.basics().required)("ngStyle",e.eq3(4,yh,t.inputFontFamily()))}}function xh(i,o){if(1&i&&(e.j41(0,"textarea",2),e.EFF(1,"    "),e.k0s()),2&i){const t=e.XpG();e.Y8G("formControlName",t.config.fieldName)("rows",t.rowCount())("placeholder",t.basics().placeholder)("required",t.basics().required)("ngStyle",e.l_i(5,bh,t.inputFontFamily(),t.textWrap()))}}function Ch(i,o){if(1&i&&(e.j41(0,"div",3),e.EFF(1," Error: Input "),e.j41(2,"code"),e.EFF(3),e.k0s(),e.EFF(4," for "),e.j41(5,"code"),e.EFF(6),e.k0s(),e.EFF(7," not found. It's probably be an extension input field, but it's not loaded. Showing default, please fix extension or change field configuration. "),e.k0s()),2&i){const t=e.XpG();e.R7$(3),e.JRh(t.typeIfNotWhatsExpected()),e.R7$(3),e.JRh(t.basics().label)}}let qa=class vs{#e;constructor(){this.#e=(0,r.WQX)(it.W),this.group=this.#e.group,this.config=this.#e.config,this.basics=this.#e.basics,this.rowCountRaw=this.#e.settingExt("RowCount"),this.rowCount=(0,Q.bo)("rowCount",()=>Math.abs(this.rowCountRaw()||1)),this.isMultiline=(0,Q.bo)("isMultiline",()=>{const o=this.rowCountRaw()||1;return o<0||o>1}),this.inputFontFamily=this.#e.settingExt("InputFontFamily"),this.textWrap=this.#e.settingExt("TextWrapping"),this.typeIfNotWhatsExpected=this.#e.isNotExpectedType([Ye.u.StringDefault]),Li.importMe()}static{this.\u0275fac=function(t){return new(t||vs)}}static{this.\u0275cmp=e.VBU({type:vs,selectors:[["string-default"]],decls:7,vars:7,consts:[["color","accent",1,"eav-mat-form-field",3,"formGroup","ngClass"],["matInput","",1,"eav-translate-on-dblclick",3,"formControlName","placeholder","required","ngStyle"],["matInput","",1,"eav-translate-on-dblclick",3,"formControlName","rows","placeholder","required","ngStyle"],[2,"color","red"]],template:function(t,n){1&t&&(e.j41(0,"mat-form-field",0),e.nVh(1,_h,1,6,"input",1)(2,xh,2,8,"textarea",2),e.j41(3,"mat-label"),e.EFF(4),e.k0s()(),e.nrm(5,"app-field-helper-text"),e.nVh(6,Ch,8,2,"div",3)),2&t&&(e.Y8G("formGroup",n.group)("ngClass",e.eq3(5,vh,n.rowCount()>1)),e.R7$(),e.vxM(n.isMultiline()?2:1),e.R7$(3),e.JRh(n.basics().label),e.R7$(2),e.vxM(null!=n.typeIfNotWhatsExpected()?6:-1))},dependencies:[Gt.RG,wt.rl,wt.nJ,ne.YN,ne.me,ne.BC,ne.cb,ne.YS,ne.X1,ne.j4,ne.JD,Ue.YU,Ut.fS,Ut.fg,Ue.B3,Xt],styles:[".textarea-field[_ngcontent-%COMP%]{height:auto}"]})}};qa=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[])],qa);class Vi extends mt.L{constructor(){super({StringDropdownQuerySettingsHelper:Vi}),this.name=Ye.u.StringDropdownQuery}update(o){const n=xe.a.singleton().get(Ye.u.EntityDefault).update(o);return n.Separator||=",",n}}function wh(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Th(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(Vi);let kh=(()=>{class i extends zt{constructor(){super(),this.log=(0,f.Tq)({StringDropdownQueryComponent:i},zt.logSpecs),this.constructorEnd(),Vi.importMe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["string-dropdown-query"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,wh,1,0,"app-picker-preview")(1,Th,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();function Sh(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Eh(i,o){1&i&&e.nrm(0,"app-picker-dialog")}let Ih=(()=>{class i extends zt{constructor(){super(),this.log=(0,f.Tq)({StringDropdownComponent:i},zt.logSpecs),this.constructorEnd(),Hn.importMe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["string-dropdown"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,Sh,1,0,"app-picker-preview")(1,Eh,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();class zi extends mt.L{constructor(){super({StringFontIconPickerSettingsHelper:zi}),this.name=Ye.u.StringFontIconPicker}update({fieldName:o,settings:t}){const n=this.log.fnIfInFields("update",o,{fieldName:o,settings:t}),a={...t},s=a;return a.CssSourceFile=s.Files??"",a.CssSelectorFilter=s.CssPrefix??"",a.CssSelectorFilter=js(s.CssPrefix??"",":"),a.PreviewValue=`${s.PreviewCss} [Item:Value]`,a.PreviewType="icon-css",a.EnableTextEntry=!1,a.EnableAddExisting=!0,a.AllowMultiValue=!1,a.noAutoFocus=!0,a.Label=s.ShowPrefix?"Value":"Title",n.r(a)}}function Mh(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Ph(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(zi);let es=class Xi extends zt{constructor(){super(),this.log=(0,f.Tq)({StringFontIconPickerComponent:Xi},zt.logSpecs),this.constructorEnd(),zi.importMe()}static{this.\u0275fac=function(n){return new(n||Xi)}}static{this.\u0275cmp=e.VBU({type:Xi,selectors:[["string-font-icon-picker"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,Mh,1,0,"app-picker-preview")(1,Ph,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}};es=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[])],es);class Yn extends mt.L{constructor(){super({StringPickerSettingsHelper:Yn}),this.name=Ye.u.StringPicker}update(o){const n=(0,f.Tq)({StringPickerSettingsHelper:Yn},null).fn("update",{specs:o}),{fs:a,removeEditRestrictions:s,typeConfig:c}=(new dn).preUpdate(o);a.Separator??="\n","\\n"==a.Separator&&(a.Separator="\n");const p=a.dataSourceType,x=Object.values(Ta).includes(p);return n.a(`type: ${p}`,{typeConfig:c,isCustomSource:x}),x?s||(a.EnableEdit=!1,a.EnableCreate=!1,a.EnableDelete=!1):n.a("type: not UiPickerSourceCustom-List/Csv",{typeConfig:c}),n.r(a)}}function Dh(i,o){1&i&&e.nrm(0,"app-picker-preview")}function Fh(i,o){1&i&&e.nrm(0,"app-picker-dialog")}mt.L.add(Yn);let Oh=(()=>{class i extends zt{constructor(){super(),this.log=(0,f.Tq)({StringPickerComponent:i},zt.logSpecs),this.constructorEnd(),Yn.importMe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["string-picker"]],features:[e.Vt3],decls:2,vars:1,template:function(n,a){1&n&&e.nVh(0,Dh,1,0,"app-picker-preview")(1,Fh,1,0,"app-picker-dialog"),2&n&&e.vxM(a.showPreview()?0:1)},dependencies:[an,sn],encapsulation:2})}}return i})();var Er=g(25175),Ah=g(79996),Rh=g(62996);const Ir={Token:{ext:".html",purpose:"Template",type:"Token"},"C# Razor":{ext:".cshtml",purpose:"Template",type:"Razor"},"C# Search":{ext:".cs",purpose:"Search"}};function Lh(i,o){if(1&i&&(e.j41(0,"mat-option",4),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}let ts=class Yi{#e;#t;#n;#i;#a;#s;#r;#o;#l;constructor(t,n){this.matDialog=t,this.viewContainerRef=n,this.log=(0,f.Tq)({StringTemplatePickerComponent:Yi}),this.#e=(0,r.WQX)(it.W),this.#t=(0,r.WQX)(r.zZn),this.#n=(0,le.d)(ce.Nt).init("typeMask",this.#e.settings().FileType??"[Type]"),this.#i=(0,le.d)(ce.Nt).init("String-LocationMask","[Location]"),this.#a=(0,le.d)(Ah.F),this.group=this.#e.group,this.config=this.#e.config,this.basics=this.#e.basics,this.ui=this.#e.ui,this.files=(0,r.vPA)([]),this.#s=Ir.Token,this.#r=[],this.#o=!1,this.#l=!1,this.#c="",(0,r.QZP)(()=>this.#p(this.#i.result())),(0,r.QZP)(()=>this.#d(this.#n.result()))}#d(t){this.#s=Ir[t],this.#h()}#c;#p(t){this.log.fn("onLocationChange",{location:t}),this.#o="Host File System"===t||"Global"===t,this.#c!==t&&(this.#c=t,this.#a.getAllPromise().then(a=>{this.#r=a.filter(s=>s.Shared===this.#o).map(s=>s.Path),this.#l=!0,this.#h()}))}#h(){const t=this.#s.ext,n=this.#r.filter(s=>!/\.code\.[a-zA-Z0-9]+$/.test(s)).filter(s=>s.endsWith(t));this.files.set(n),this.#l&&!n.some(s=>s===this.#e.uiValue())&&this.ui().setIfChanged("")}createTemplate(){const t=(0,le.d)(ce.Nt,this.#t).init("String-NameMask","[Name]"),n={global:this.#o,purpose:this.#s.purpose,type:this.#s.type,name:t.result()};t.destroy(),this.matDialog.open(Rh.g,{autoFocus:!1,data:n,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{s&&this.#a.create(s.name,this.#o,s.templateKey).subscribe(c=>{!1===c?alert("Server reported that create failed - the file probably already exists"):(this.#r.push(s.name),this.#h(),this.ui().setIfChanged(s.name))})})}static{this.\u0275fac=function(n){return new(n||Yi)(e.rXU(tt.bZ),e.rXU(e.c1b))}}static{this.\u0275cmp=e.VBU({type:Yi,selectors:[["string-template-picker"]],decls:14,vars:8,consts:[[1,"picker-wrapper"],["color","accent",1,"eav-mat-form-field",3,"formGroup"],[1,"eav-translate-on-dblclick",3,"formControlName","required"],["value",""],[3,"value"],["mat-icon-button","","tippyTranslate","Fields.TemplatePicker.NewTemplate",3,"click","disabled"]],template:function(n,a){1&n&&(e.j41(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2)(3,"mat-option",3),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.Z7z(6,Lh,2,2,"mat-option",4,e.fX1),e.k0s(),e.j41(8,"mat-label"),e.EFF(9),e.k0s()(),e.j41(10,"button",5),e.bIt("click",function(){return a.createTemplate()}),e.j41(11,"mat-icon"),e.EFF(12,"add"),e.k0s()()(),e.nrm(13,"app-field-helper-text")),2&n&&(e.R7$(),e.Y8G("formGroup",a.group),e.R7$(),e.Y8G("formControlName",a.config.fieldName)("required",a.basics().required),e.R7$(2),e.JRh(e.bMT(5,6,"Fields.TemplatePicker.NotSelected")),e.R7$(2),e.Dyx(a.files()),e.R7$(3),e.JRh(a.basics().label),e.R7$(),e.Y8G("disabled",a.ui().disabled))},dependencies:[Gt.RG,wt.rl,wt.nJ,ne.YN,ne.BC,ne.cb,ne.YS,ne.X1,ne.j4,ne.JD,Er.Ve,Er.VO,Pn.wT,$s.S,Pt.Hl,qt.iY,j.m_,j.An,Xt,ue.h,At.e,ue.D9],styles:[".picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]})}};ts=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[tt.bZ,e.c1b])],ts);class Pr extends mt.L{constructor(){super({InputTypeCatalog:Ye.u}),this.name=Ye.u.StringUrlPath}update({settings:o}){const t={...o};return t.AutoGenerateMask??=null,t.AllowSlashes??=!1,t}}mt.L.add(Pr);let ns=class Qi{#e;#t;#n;#i;constructor(){this.log=(0,f.Tq)({StringUrlPathComponent:Qi}),this.fieldState=(0,r.WQX)(it.W),this.group=this.fieldState.group,this.settings=this.fieldState.settings,this.basics=this.fieldState.basics,this.#e=this.fieldState.settingExt("AutoGenerateMask"),this.#t=(0,r.vPA)(""),this.#n=(0,le.d)(ce.Nt).initPreClean((t,n)=>"string"==typeof n?n.replace("/","-").replace("\\","-"):n).initSignal("UrlPath",this.#e),this.#i=(0,Ne.EW)(()=>{const t=this.#n.result();return ce.b.stripNonUrlCharacters(t,this.settings().AllowSlashes,!0)}),Pr.importMe(),(0,r.QZP)(()=>{this.fieldState.uiValue(),this.clean(!1)}),(0,r.QZP)(()=>this.#a(this.#i()))}#a(t){const n=this.log.fn("#onSourcesChanged",{newValue:t}),a={uiValue:this.fieldState.uiValue(),lastAutoCopy:this.#t(),allowSlashes:this.settings().AllowSlashes,cleaned:t};return a.uiValue&&a.uiValue!==a.lastAutoCopy?n.end("UI not empty but manually modified, so no auto-update",a):a.cleaned?a.uiValue===a.cleaned?n.end("no changes",a):(this.#t.set(a.cleaned),this.fieldState.ui().setIfChanged(a.cleaned),void n.end(`updated to "${a.cleaned}"`,a)):n.end("cleaned is empty",a)}clean(t){this.log.fn("clean",{trimEnd:t});const a=this.fieldState.uiValue(),s=ce.b.stripNonUrlCharacters(a,this.settings().AllowSlashes,t);this.fieldState.ui().setIfChanged(s)}static{this.\u0275fac=function(n){return new(n||Qi)}}static{this.\u0275cmp=e.VBU({type:Qi,selectors:[["string-url-path"]],decls:5,vars:5,consts:[["color","accent",1,"eav-mat-form-field",3,"formGroup"],["matInput","",1,"eav-translate-on-dblclick",3,"blur","formControlName","placeholder","required"]],template:function(n,a){1&n&&(e.j41(0,"mat-form-field",0)(1,"input",1),e.bIt("blur",function(){return a.clean(!0)}),e.k0s(),e.j41(2,"mat-label"),e.EFF(3),e.k0s()(),e.nrm(4,"app-field-helper-text")),2&n&&(e.Y8G("formGroup",a.group),e.R7$(),e.Y8G("formControlName",a.fieldState.name)("placeholder",a.basics().placeholder)("required",a.basics().required),e.R7$(2),e.JRh(a.basics().label))},dependencies:[Gt.RG,wt.rl,wt.nJ,ne.YN,ne.me,ne.BC,ne.cb,ne.YS,ne.X1,ne.j4,ne.JD,Ut.fS,Ut.fg,Xt],encapsulation:2})}};ns=(0,Et.Cg)([Wt({...Jt}),(0,Et.Sn)("design:paramtypes",[])],ns);var Dt=g(98130),Fr=g(16256);class Ni{constructor(o){this.rootSubfolder="",this.fileFilter="",this.allowAssetsInRoot=!0,this.folderDepth=0,this.metadataContentTypes="",this.usePortalRoot=!1,this.showImagesOnly=!1,this.autoLoad=!1,this.enableSelect=!0,this.subfolder="",this.allowEdit=!0,this.disabled=!0,this.maxDepthReached=!1,this.disabled=o}static completeConfig(o,t,n){const a=t.inputTypeSpecs.isExternal;n=n??new Ni(a);const s=new Ni(a);for(const p of Object.keys(s))s[p]=o[p]??n[p];if(n.usePortalRoot!==s.usePortalRoot&&(s.subfolder=""),s.usePortalRoot&&(s.rootSubfolder.includes("\\")&&(s.rootSubfolder=s.rootSubfolder.replace(/\\/g,"/")),s.rootSubfolder.startsWith("/")&&(s.rootSubfolder=s.rootSubfolder.replace("/","")),!s.subfolder.startsWith(s.rootSubfolder)&&(s.subfolder=s.rootSubfolder),s.maxDepthReached=!1),!s.usePortalRoot)if((s.subfolder?s.subfolder.split("/").length:0)>=s.folderDepth){let O=s.subfolder.split("/");O=O.slice(0,s.folderDepth),s.subfolder=O.join("/"),s.maxDepthReached=!0}else s.maxDepthReached=!1;return s}}var Or=g(81955);const zh=(i,o)=>({"adam-scope-site":i,"adam-scope-field":o}),ji=i=>({"adam-button-disabled":i}),Ar=i=>({"metadata-exists":i}),Nh=(i,o)=>({"dz-success":i,"disable-select":o}),jh=(i,o)=>({"adam-button-disabled":i,"metadata-exists":o}),Bh=(i,o)=>o.Id;function Gh(i,o){1&i&&(e.j41(0,"mat-icon"),e.EFF(1,"public"),e.k0s())}function Uh(i,o){1&i&&e.nrm(0,"mat-icon",8)}function $h(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",5),e.bIt("click",function(a){r.eBV(t);const s=e.XpG(2);return r.Njj(s.openUploadClick(a))}),e.j41(1,"div",6)(2,"mat-icon"),e.EFF(3,"cloud_upload"),e.k0s(),e.j41(4,"div",7),e.EFF(5),e.nI1(6,"translate"),e.nVh(7,Gh,2,0,"mat-icon")(8,Uh,1,0,"mat-icon",8),e.k0s()()(),e.j41(9,"div",9,0),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.openFeatureInfoDialog())}),e.j41(11,"div",6)(12,"mat-icon",10),e.EFF(13," filter "),e.k0s(),e.j41(14,"div",7),e.EFF(15),e.nI1(16,"translate"),e.k0s()()()}if(2&i){const t=e.sdS(10),n=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,6,"Fields.Hyperlink.AdamFileManager.UploadLabel")," \xa0 "),e.R7$(2),e.vxM(n.adamConfig().usePortalRoot?7:8),e.R7$(2),e.Y8G("config",n.config)("elementType","element"),e.R7$(3),e.Y8G("matBadgeHidden",n.isPasteImageFromClipboardEnabled()),e.R7$(3),e.SpI(" ",n.isPasteImageFromClipboardEnabled()?t.classList.contains("pastable-focus")?"Fields.Hyperlink.AdamFileManager.UploadPasteFocusedLabel":e.bMT(16,8,"Fields.Hyperlink.AdamFileManager.UploadPasteLabel"):"Fields.Hyperlink.AdamFileManager.UploadPasteLabel"," ")}}function Hh(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",11),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.addFolder())}),e.j41(1,"div",6),e.nrm(2,"mat-icon",12),e.j41(3,"div",13),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.nrm(6,"div",14),e.k0s()}2&i&&(e.R7$(4),e.JRh(e.bMT(5,1,"Fields.Hyperlink.AdamFileManager.NewFolder")))}function Wh(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",15),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.goUp())}),e.j41(1,"div",6),e.nrm(2,"mat-icon",16),e.j41(3,"div",13),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"div",17)(7,"mat-icon",18),e.EFF(8,"arrow_back"),e.k0s()()()}2&i&&(e.R7$(4),e.JRh(e.bMT(5,1,"Fields.Hyperlink.AdamFileManager.BackFolder")))}function Xh(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-icon",27),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2).$implicit,s=e.XpG(2);return r.Njj(s.del(a))}),e.EFF(1,"clear"),e.k0s(),e.j41(2,"mat-icon",28),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2).$implicit,s=e.XpG(2);return r.Njj(s.rename(a))}),e.EFF(3,"edit"),e.k0s()}if(2&i){const t=e.XpG(4);e.Y8G("ngClass",e.eq3(2,ji,t.disabled())),e.R7$(2),e.Y8G("ngClass",e.eq3(4,ji,t.disabled()))}}function Yh(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-icon",29),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2).$implicit,s=e.XpG(2);return r.Njj(s.editItemMetadata(a,a._metadataContentType,a._metadataId))}),e.EFF(1,"local_offer"),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("tippy",e.ai1("",t._metadataContentType,": ",t._metadataId))("ngClass",e.eq3(4,Ar,t._metadataId>0))}}function Qh(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",21),e.bIt("click",function(){r.eBV(t);const a=e.XpG().$implicit,s=e.XpG(2);return r.Njj(s.goIntoFolder(a))}),e.j41(1,"div",22),e.nrm(2,"mat-icon",16),e.j41(3,"div",23),e.EFF(4),e.k0s()(),e.j41(5,"div"),e.nVh(6,Xh,4,6),e.j41(7,"div",24)(8,"div",25),e.EFF(9),e.k0s()()(),e.nVh(10,Yh,2,6,"mat-icon",26),e.k0s()}if(2&i){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(4),e.JRh(t.Name),e.R7$(),e.HbH(e.VkB("dz-details file-type-",t.Type)),e.R7$(),e.vxM(n.adamConfig().allowEdit?6:-1),e.R7$(2),e.Y8G("title",t.Name),e.R7$(),e.JRh(t.Name),e.R7$(),e.vxM(t._metadataContentType?10:-1)}}function Kh(i,o){if(1&i&&(e.j41(0,"div",22)(1,"mat-icon"),e.EFF(2),e.k0s(),e.j41(3,"div",13),e.EFF(4),e.k0s()()),2&i){const t=e.XpG(2).$implicit;e.R7$(2),e.JRh(t._icon),e.R7$(2),e.JRh(t.Name)}}function Zh(i,o){if(1&i&&(e.j41(0,"div",31),e.nrm(1,"img",40),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("alt",t.Id+":"+t.Name)("src",t.ThumbnailUrl,e.B4B)}}function Jh(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-icon",27),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2).$implicit,s=e.XpG(2);return r.Njj(s.del(a))}),e.EFF(1,"clear"),e.k0s(),e.j41(2,"mat-icon",28),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2).$implicit,s=e.XpG(2);return r.Njj(s.rename(a))}),e.EFF(3,"edit"),e.k0s()}if(2&i){const t=e.XpG(4);e.Y8G("ngClass",e.eq3(2,ji,t.disabled())),e.R7$(2),e.Y8G("ngClass",e.eq3(4,ji,t.disabled()))}}function qh(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-icon",41),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2).$implicit,s=e.XpG(2);return r.Njj(s.editItemMetadata(a,a._imageConfigurationContentType,a._imageConfigurationId))}),e.EFF(1," filter_center_focus"),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("ngClass",e.l_i(2,jh,!t._imageConfigurationContentType,t._imageConfigurationId>0))("tippyTranslate",t._imageConfigurationContentType?"Fields.Hyperlink.AdamFileManager.ImageSettings":"Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled")}}function em(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-icon",29),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2).$implicit,s=e.XpG(2);return r.Njj(s.editItemMetadata(a,a._metadataContentType,a._metadataId))}),e.EFF(1,"local_offer"),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("tippy",e.ai1("",t._metadataContentType,": ",t._metadataId))("ngClass",e.eq3(4,Ar,t._metadataId>0))}}function tm(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",30),e.bIt("click",function(){r.eBV(t);const a=e.XpG().$implicit,s=e.XpG(2);return r.Njj(s.select(a))}),e.nVh(1,Kh,5,2,"div",22)(2,Zh,2,2,"div",31),e.j41(3,"div"),e.nVh(4,Jh,4,6),e.j41(5,"div",24)(6,"div",25),e.EFF(7),e.k0s()(),e.j41(8,"div",32)(9,"span"),e.EFF(10),e.k0s()(),e.j41(11,"a",33)(12,"mat-icon",34),e.EFF(13,"open_in_new"),e.k0s()(),e.nVh(14,qh,2,5,"mat-icon",35),e.k0s(),e.nVh(15,em,2,6,"mat-icon",26),e.j41(16,"div",36),r.qSk(),e.j41(17,"svg",37)(18,"title"),e.EFF(19,"Check"),e.k0s(),e.nrm(20,"defs"),e.j41(21,"g",38),e.nrm(22,"path",39),e.k0s()()()()}if(2&i){const t=e.XpG().$implicit,n=e.XpG(2);e.Y8G("ngClass",e.l_i(16,Nh,n.value()==="file:"+t.Id,!n.adamConfig().enableSelect)),e.R7$(),e.vxM("image"!==t.Type?1:2),e.R7$(2),e.HbH(e.VkB("dz-details file-type-",t.Type)),e.R7$(),e.vxM(n.adamConfig().allowEdit?4:-1),e.R7$(2),e.Y8G("title",t.Name),e.R7$(),e.JRh(t.Name),e.R7$(),e.Y8G("title",e.ai1("#",t.Id," - ",t._displaySize," KB")),e.R7$(2),e.Lme("#",t.Id," - ",t._displaySize," KB"),e.R7$(),e.Y8G("href",t.Url,e.B4B),e.R7$(3),e.vxM("image"===t.Type?14:-1),e.R7$(),e.vxM(t._metadataContentType?15:-1)}}function nm(i,o){if(1&i&&(e.nVh(0,Qh,11,8,"div",19),e.nVh(1,tm,23,19,"div",20)),2&i){const t=o.$implicit;e.vxM(t.IsFolder?0:-1),e.R7$(),e.vxM(t.IsFolder?-1:1)}}function im(i,o){if(1&i&&(e.j41(0,"div",2),e.nVh(1,$h,17,10),e.nVh(2,Hh,7,3,"div",3),e.nVh(3,Wh,9,3,"div",4),e.Z7z(4,nm,2,2,null,null,Bh),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.l_i(4,zh,t.adamConfig().usePortalRoot,!t.adamConfig().usePortalRoot)),e.R7$(),e.vxM(!t.disabled()&&t.allowAddButtons()?1:-1),e.R7$(),e.vxM(t.adamConfig().maxDepthReached||t.disabled()||!t.allowAddButtons()?-1:2),e.R7$(),e.vxM(""!==t.adamConfig().subfolder||t.adamConfig().usePortalRoot&&t.adamConfig().subfolder!==t.adamConfig().rootSubfolder?3:-1),e.R7$(),e.Dyx(t.items())}}const am={all:!1,constructor:!1,editItemMetadata:!1,setConfig:!1,fetchItems:!0,processFetchedItems:!0};let sm=(()=>{class i{#e;#t;#n;#i;constructor(t,n,a,s,c,p,x){this.dnnContext=t,this.adamCacheService=n,this.linkCacheService=a,this.formsStateService=s,this.matDialog=c,this.viewContainerRef=p,this.changeDetectorRef=x,this.openUpload=(0,Y.CGW)(),this.log=(0,f.Tq)({AdamBrowserComponent:i},am),this.fieldState=(0,r.WQX)(it.W),this.#e=(0,r.WQX)(gt),this.#t=(0,r.WQX)(v.D),this.#n=(0,le.d)(Wa),this.#i=(0,le.d)(at.c),this.config=this.fieldState.config,this.group=this.fieldState.group,this.#a=this.fieldState.ui,this.disabled=(0,Q.bo)("disabled",()=>this.#a().disabled),this.value=(0,Q.bo)("value",()=>this.fieldState.uiValue()),this.adamConfig=(0,Q.KX)("adamConfig",null),this.items=(0,Q.KX)("items",[]),this.#r=!0,this.allowAddButtons=(0,Q.bo)("allowAddButtons",()=>{const ie=this.adamConfig();return ie.allowEdit&&!((""===ie.subfolder||ie.usePortalRoot&&ie.subfolder===ie.rootSubfolder)&&!ie.allowAssetsInRoot)}),this.isPasteImageFromClipboardEnabled=this.#t.isEnabled[Ot.T.PasteImageFromClipboard],this.log.fnIf("constructor"),(0,r.QZP)(()=>{null!=this.adamConfig()&&this.fetchItems()});const G=this.config;this.#s=this.dnnContext.$2sxc.http.apiUrl(`app/auto/data/${G.contentTypeNameId}/${G.entityGuid}/${G.fieldName}`)}#a;#s;#r;ngOnInit(){this.#i.doOnDialogClosed(()=>this.fetchItems()),this.config.adam.setBrowser(this)}addFolder(){if(this.#a().disabled)return;const t=window.prompt("Please enter a folder name");t&&this.#n.addFolder(t,this.#s,this.adamConfig()).subscribe(()=>this.fetchItems())}del(t){this.#a().disabled||!window.confirm("Are you sure you want to delete this item?")||this.#n.deleteItemPromise(t,this.#s,this.adamConfig()).then(()=>this.fetchItems())}editItemMetadata(t,n,a){const s=this.log.fnIf("editItemMetadata",{adamItem:t,contentTypeName:n,metadataId:a});if(this.formsStateService.readOnly().isReadOnly||!n)return s.end("readonly or no content type");const c={items:[a>0?se.H.editId(a):se.H.newMetadata(t.ReferenceId,n,_n.YX.metadata.cmsObject)]};this.#e.open(this.config.index,this.config.entityGuid,c)}goUp(){let t=this.adamConfig().subfolder;t=t.includes("/")?t.slice(0,t.lastIndexOf("/")):"",this.setConfig({subfolder:t})}#o(t){return this.fieldState.settings().EnableImageConfiguration&&"image"===t.Type?_n.YX.contentTypes.imageDecorator:null}#l(t){let n;return"folder"===t.Type?(n=this.adamConfig().metadataContentTypes.match(/^(folder)(:)([^\n]*)/im),n?n[3]:null):(n=this.adamConfig().metadataContentTypes.match(/^([^:\n]*)(\n|$)/im),n?n[1]:null)}goIntoFolder(t){let n=this.adamConfig().subfolder;n=n?`${n}/${t.Name}`:t.Name,this.setConfig({subfolder:n})}openUploadClick(t){this.openUpload.emit()}rename(t){if(this.#a().disabled)return;const n=window.prompt("Rename the file / folder to: ",t.Name);n&&this.#n.renamePromise(t,n,this.#s,this.adamConfig()).then(()=>this.fetchItems())}select(t){this.#a().disabled||!this.adamConfig().enableSelect||this.config.adam.onItemClick(t)}fetchItems(){const t=this.adamConfig();if(this.log.fnIf("fetchItems",{adamConfig:t,firstFetch:this.#r,usePortalRoot:t?.usePortalRoot}),null!=t&&t.autoLoad){if(this.#r){this.#r=!1;const a=this.adamCacheService.getAdamSnapshot(this.config.entityGuid,this.config.fieldName);if(a){const s=a.map(c=>({...c}));return void setTimeout(()=>this.#d(s,t))}}this.#n.getAllPromise(this.#s,t).then(a=>this.#d(a,t))}}openFeatureInfoDialog(){this.isPasteImageFromClipboardEnabled()||(0,Ha.j)(this.matDialog,Ot.T.PasteImageFromClipboard,this.viewContainerRef,this.changeDetectorRef)}#d(t,n){this.log.fnIf("processFetchedItems",{items:t,adamConfig:n,usePortalRoot:n.usePortalRoot}),this.linkCacheService.addAdam(t);const s=[],c=function rm(i){return i?i.split(",").map(t=>((t=t.trim()).startsWith("*.")?t=t.replace("*.",""):t.startsWith("*")&&(t=t.replace("*","")),t.toLocaleLowerCase())):[]}(n.fileFilter);for(const p of t){if("."===p.Name){const x=p.AllowEdit;x!==n.allowEdit&&this.setConfig({allowEdit:x});continue}if("2sxc"!==p.Name&&"adam"!==p.Name&&(p.IsFolder||!n.showImagesOnly||"image"===p.Type)&&(!p.IsFolder||!n.maxDepthReached)){if(c.length>0){const x=p.Name.substring(p.Name.lastIndexOf(".")+1).toLocaleLowerCase();if(!c.includes(x))continue}p._imageConfigurationContentType=this.#o(p),p._imageConfigurationId=p.Metadata?.find(x=>x.Type.Name===p._imageConfigurationContentType)?.Id??0,p._metadataContentType=this.#l(p),p._metadataId=p.Metadata?.find(x=>x.Type.Name===p._metadataContentType)?.Id??0,p._icon=ce.M5.getIconClass(p.Name),p._isMaterialIcon=ce.M5.isKnownType(p.Name),p._displaySize=(p.Size/1024).toFixed(0),s.push(p)}}s.sort((p,x)=>p.Name.toLocaleLowerCase().localeCompare(x.Name.toLocaleLowerCase())),s.sort((p,x)=>x.IsFolder.toString().localeCompare(p.IsFolder.toString())),this.items.set(s)}setConfig(t){const n=this.log.fnIf("setConfig",t),a=Ni.completeConfig(t,this.config,this.adamConfig());(0,pn.A)(a,this.adamConfig())?n.end("no change"):(this.adamConfig.set(a),function Vh(i,o){const t=o.dropzone.getConfig(),n={},a=ce.b.getUrlParams(t.url);if((a.subfolder||"")!==i.subfolder||a.usePortalRoot!==i.usePortalRoot.toString()){let G=t.url;G=ce.b.replaceUrlParam(G,"subfolder",i.subfolder),G=ce.b.replaceUrlParam(G,"usePortalRoot",i.usePortalRoot.toString()),n.url=G}const x=!i.allowEdit||(""===i.subfolder||i.usePortalRoot&&i.subfolder===i.rootSubfolder)&&!i.allowAssetsInRoot;t.disabled!==x&&(n.disabled=x),Object.keys(n).length>0&&o.dropzone.setConfig(n)}(a,this.config),n.end())}toggle(t,n){const a={...this.adamConfig(),usePortalRoot:t,showImagesOnly:n};(0,pn.A)(a,this.adamConfig())?a.autoLoad=!a.autoLoad:a.autoLoad||(a.autoLoad=!0),this.setConfig(a)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(Or.ob),e.rXU(F),e.rXU(E),e.rXU(Vt),e.rXU(tt.bZ),e.rXU(e.c1b),e.rXU(Y.gRc))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["adam-browser"]],outputs:{openUpload:"openUpload"},decls:2,vars:2,consts:[["pasteDiv",""],[1,"dropzone"],[3,"ngClass"],["tippyTranslate","Fields.Hyperlink.AdamFileManager.NewFolderTip",1,"dz-preview"],["tippyTranslate","Fields.Hyperlink.AdamFileManager.BackFolderTip",1,"dz-preview"],["tippyTranslate","Fields.Hyperlink.AdamFileManager.UploadTip",1,"dz-preview","dropzone-adam",3,"click"],[1,"dz-image","adam-browse-background-icon","adam-browse-background"],[1,"adam-upload-label"],["svgIcon","apple-outlined"],["appPasteClipboardImage","","tippyTranslate","Fields.Hyperlink.AdamFileManager.UploadPasteTip",1,"dz-preview","dropzone-adam","paste-image",3,"click","config","elementType"],["matBadgeSize","large","matBadge","\u{1f48e}","matBadgePosition","below after","matBadgeOverlap","true","aria-hidden","false",1,"adam-filter-mat-icon-with-grey-mat-badge",3,"matBadgeHidden"],["tippyTranslate","Fields.Hyperlink.AdamFileManager.NewFolderTip",1,"dz-preview",3,"click"],["svgIcon","folder-plus"],[1,"adam-short-label"],[1,"dz-details",2,"opacity","1"],["tippyTranslate","Fields.Hyperlink.AdamFileManager.BackFolderTip",1,"dz-preview",3,"click"],["svgIcon","folder"],[1,"adam-background","adam-browse-background-icon"],[1,"adam-back-folder-arrow"],[1,"dz-preview"],[1,"dz-preview",3,"ngClass"],[1,"dz-preview",3,"click"],[1,"dz-image","adam-blur","adam-browse-background-icon","adam-browse-background"],[1,"short-label"],[1,"adam-full-name-area"],[1,"adam-full-name",3,"title"],["appClickStopPropagation","",1,"adam-tag",3,"ngClass","tippy"],["appClickStopPropagation","","tippyTranslate","Fields.Hyperlink.AdamFileManager.Delete",1,"adam-delete-button",3,"click","ngClass"],["appClickStopPropagation","","tippyTranslate","Fields.Hyperlink.AdamFileManager.Edit",1,"adam-rename-button",3,"click","ngClass"],["appClickStopPropagation","",1,"adam-tag",3,"click","ngClass","tippy"],[1,"dz-preview",3,"click","ngClass"],[1,"dz-image","adam-browse-background-image"],["appClickStopPropagation","",1,"dz-filename","adam-short-label",3,"title"],["target","_blank","appClickStopPropagation","",1,"adam-link-button",3,"href"],["tippyTranslate","Fields.Hyperlink.AdamFileManager.Show"],["appClickStopPropagation","",1,"image-configuration-button",3,"ngClass","tippyTranslate"],[1,"dz-success-mark"],["width","54px","height","54px","viewBox","0 0 54 54","version","1.1","xmlns","https://www.w3.org/2000/svg",0,"xmlns","xlink","https://www.w3.org/1999/xlink",0,"xmlns","sketch","https://www.bohemiancoding.com/sketch/ns"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd",0,"sketch","type","MSPage"],["d","M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z","id","Oval-2","stroke-opacity","0.198794158","stroke","#747474","fill-opacity","0.816519475","fill","#FFFFFF",0,"sketch","type","MSShapeGroup"],["vm-dz-thumbnail","",3,"alt","src"],["appClickStopPropagation","",1,"image-configuration-button",3,"click","ngClass","tippyTranslate"]],template:function(n,a){if(1&n&&(e.j41(0,"div",1),e.nVh(1,im,6,7,"div",2),e.k0s()),2&n){let s,c;e.Y8G("@adamShowAnimate",null!=(s=a.adamConfig())&&s.autoLoad?"open":"closed"),e.R7$(),e.vxM(null!=(c=a.adamConfig())&&c.autoLoad&&a.fieldState.isOpen()?1:-1)}},dependencies:[Ue.YU,j.m_,j.An,Ya,Fr.Y,Fr.k,ue.h,Un.c,At.e,ue.D9],styles:['.adam-browse-background-icon[_ngcontent-%COMP%]{padding:20px 5px 10px;min-width:100%;min-height:100%;text-align:center}.adam-browse-background-icon[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px}.adam-browse-background-image[_ngcontent-%COMP%]{display:flex!important;justify-content:center;align-items:center}.adam-browse-background-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.adam-background[_ngcontent-%COMP%]{z-index:20;position:absolute;top:0;left:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;line-height:150%;cursor:pointer}.adam-background[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer}.adam-tag[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:-15px;top:50px;font-size:34px;width:34px;height:34px;z-index:30}.adam-back-folder-arrow[_ngcontent-%COMP%]{font-size:35px!important;top:13px;position:relative;-webkit-user-select:none;user-select:none;cursor:default}.adam-link-button[_ngcontent-%COMP%]{position:absolute;left:4px;top:4px;font-size:24px;width:24px;height:24px;color:#000000e6}.image-configuration-button[_ngcontent-%COMP%]{position:absolute;left:30px;top:4px;font-size:24px;width:24px;height:24px;color:#000000e6;cursor:pointer}.adam-delete-button[_ngcontent-%COMP%], .adam-rename-button[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;cursor:pointer;font-size:24px;width:24px;height:24px}.adam-delete-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled), .adam-rename-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled), .image-configuration-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled):not(.metadata-exists), .adam-link-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled){color:#002753}.image-configuration-button.metadata-exists[_ngcontent-%COMP%], .adam-tag.metadata-exists[_ngcontent-%COMP%]{color:#0087f4}.adam-button-disabled[_ngcontent-%COMP%]{color:#1d273d3d;cursor:default}.adam-rename-button[_ngcontent-%COMP%]{right:26px;font-size:22px;width:22px;height:22px}.dz-details[_ngcontent-%COMP%]{bottom:0;cursor:pointer}.dz-image[_ngcontent-%COMP%]{cursor:pointer}.disable-select[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%], .disable-select[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{cursor:default}.disable-select[_ngcontent-%COMP%]   .adam-full-name[_ngcontent-%COMP%]{cursor:text}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .adam-blur[_ngcontent-%COMP%]{transform:scale(1.05);filter:blur(8px)}.adam-short-label[_ngcontent-%COMP%]{cursor:text;display:flex;justify-content:center;align-items:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;left:0;right:0;bottom:10px}.adam-upload-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;left:0;right:0;bottom:10px}.adam-upload-label[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:19px;width:19px;height:19px}.adam-full-name[_ngcontent-%COMP%]{background-color:#fffc;border-radius:3px;word-break:break-all;width:80%;max-height:3em;position:absolute;top:48%;left:50%;transform:translate(-50%,-50%);overflow-x:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scrollbar-width:none}.adam-full-name[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.adam-full-name-area[_ngcontent-%COMP%]{height:60px;display:block}.adam-browse-background[_ngcontent-%COMP%]{background-color:#f5f5f5}.mce-ico[class^=icon-][_ngcontent-%COMP%]:before, .mce-ico[class*=" icon-"][_ngcontent-%COMP%]:before{margin-left:0}.dropzone[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;outline-color:#0069bf}.eav-dragging[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%], .dropzone.dz-drag-hover[_ngcontent-%COMP%]{min-height:0;outline:2px dashed #0069BF;background:#fff;padding:0;border-radius:5px;transition:outline-color .5s}.dropzone.dz-clickable[_ngcontent-%COMP%]{cursor:pointer}.dropzone.dz-clickable[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.dropzone.dz-clickable[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%], .dropzone.dz-clickable[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropzone.dz-started[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{display:none}.dropzone.dz-drag-hover[_ngcontent-%COMP%]{outline-color:#0087f7}.dropzone.dz-drag-hover[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{opacity:.5}.dropzone[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{text-align:center;margin:2em 0}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;vertical-align:top;margin:5px;min-height:100px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover{z-index:1000}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-file-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{border-radius:6px;background:#999;background:linear-gradient(to bottom,#eee,#ddd)}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-file-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{opacity:1}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-image-preview[_ngcontent-%COMP%]{background:#fff}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-image-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{transition:opacity .2s linear}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-remove[_ngcontent-%COMP%]{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-remove[_ngcontent-%COMP%]:hover{text-decoration:underline}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .dz-details[_ngcontent-%COMP%]{opacity:1}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:#000000e6;line-height:150%}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-size[_ngcontent-%COMP%]{margin-bottom:1em;font-size:16px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]{white-space:nowrap}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{border:1px solid rgba(200,200,200,.8);background-color:#fffc}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:not(:hover){overflow:hidden;text-overflow:ellipsis}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:not(:hover)   span[_ngcontent-%COMP%]{border:1px solid transparent}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#fff6;padding:0 .4em;border-radius:3px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05);filter:blur(8px)}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{border-radius:6px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-success[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%]{animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%]{opacity:1;animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%]{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:50%;left:50%;margin-left:-27px;margin-top:-27px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;width:54px;height:54px}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-processing[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:1;transition:all .2s linear}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-complete[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:0;transition:opacity .4s ease-in}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:not(.dz-processing)   .dz-progress[_ngcontent-%COMP%]{animation:pulse 6s ease infinite}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:#ffffffe6;-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]   .dz-upload[_ngcontent-%COMP%]{background:#333;background:linear-gradient(to bottom,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;transition:width .3s ease-in-out}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]{display:block}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]:hover   .dz-error-message[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;transition:opacity .3s ease;border-radius:8px;font-size:13px;top:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(to bottom,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}[_nghost-%COMP%]     .adam-filter-mat-icon-with-grey-mat-badge .mat-badge-content{background:#fff0!important}'],data:{animation:[(0,Dt.hZ)("adamShowAnimate",[(0,Dt.wk)("closed",(0,Dt.iF)({height:"0",overflow:"hidden"})),(0,Dt.wk)("open",(0,Dt.iF)({height:"*",overflow:"hidden"})),(0,Dt.kY)("closed => open",[(0,Dt.i0)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)")])])]}})}}return i})();function om(i,o){1&i&&(e.EFF(0," \xa0 "),e.j41(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.EFF(4," \xa0 "),e.j41(5,"a",5),e.EFF(6,"2sic.com"),e.k0s()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"Fields.Hyperlink.AdamFileManager.SponsorLine")))}let lm=(()=>{class i{constructor(){this.features=(0,r.WQX)(v.D),this.hideAdamSponsor=this.features.isEnabled[Ot.T.NoSponsoredByToSic]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["adam-hint"]],decls:12,vars:7,consts:[[1,"hint-box","u-border-radius-bottom","mat-caption","u-shadow-top"],[1,"hint-box__hint"],[1,"hint-box__sponsor"],["href","https://2sxc.org/help?tag=adam","target","_blank","tabindex","-1","tippyTranslate","Fields.Hyperlink.AdamFileManager.HelpTooltip",1,"adam-link"],["svgIcon","apple-outlined"],["href","https://www.2sic.com","target","_blank","tabindex","-1"]],template:function(n,a){1&n&&(e.nrm(0,"mat-divider"),e.j41(1,"div",0)(2,"div",1),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",2)(6,"a",3),e.nrm(7,"mat-icon",4),e.j41(8,"span"),e.EFF(9),e.nI1(10,"translate"),e.k0s()(),e.nVh(11,om,7,3),e.k0s()()),2&n&&(e.R7$(3),e.JRh(e.bMT(4,3,"Fields.Hyperlink.AdamFileManager.Hint")),e.R7$(6),e.JRh(e.bMT(10,5,"Fields.Hyperlink.AdamFileManager.Name")),e.R7$(2),e.vxM(a.hideAdamSponsor()?-1:11))},dependencies:[lr,Vd,j.m_,j.An,ue.h,At.e,ue.D9],styles:[".hint-box[_ngcontent-%COMP%]{padding:2px 24px;background-color:#fff;color:#1d273d70;display:flex}.hint-box__hint[_ngcontent-%COMP%]{flex:1 1 auto}.hint-box__sponsor[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.adam-link[_ngcontent-%COMP%]{display:flex;align-items:center}.adam-link[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;line-height:14px}"]})}}return i})();const cm=["fieldComponent"],dm=["invisibleClickable"],um=(i,o)=>({"adam-in-popup":i,"c-ew__dialog-content--empty":o}),pm=(i,o)=>({"adam-browser-container--short u-hide-scrollbar":i,"u-display-none":o}),Rr=i=>({"u-display-none":i});let hm=(()=>{class i{constructor(){this.fieldState=(0,r.WQX)(it.W),this.config=this.fieldState.config,this.adamDisabled=this.config.adam.isDisabled}ngOnInit(){this.fullscreenAdam=this.config.inputTypeSpecs.inputType===Ye.u.HyperlinkLibrary}openUpload(){this.invisibleClickableRef.nativeElement.click()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-adam-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(cm,7,e.c1b)(dm,5),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first),e.mGM(s=e.lsd())&&(a.invisibleClickableRef=s.first)}},decls:10,vars:16,consts:[["fieldComponent",""],["invisibleClickable",""],[3,"ngClass"],[1,"adam-dialog-content"],[1,"u-shadow-top",3,"openUpload","ngClass"],[1,"dropzone-previews"],["data-note","just a fake, invisible area for dropzone",1,"invisible-clickable"],[1,"field-hints",3,"ngClass"]],template:function(n,a){if(1&n){const s=e.RV6();e.j41(0,"div",2)(1,"div",3),e.eu8(2,null,0),e.k0s(),e.j41(4,"adam-browser",4),e.bIt("openUpload",function(){return r.eBV(s),r.Njj(a.openUpload())}),e.k0s(),e.j41(5,"div",2),e.nrm(6,"div",5)(7,"span",6,1),e.k0s(),e.nrm(9,"adam-hint",7),e.k0s()}2&n&&(e.Y8G("ngClass",e.l_i(6,um,a.fieldState.isOpen(),a.fullscreenAdam)),e.R7$(4),e.Y8G("ngClass",e.l_i(9,pm,!a.fullscreenAdam,a.adamDisabled())),e.R7$(),e.HbH(a.config.dropzonePreviewsClass),e.Y8G("ngClass",e.eq3(12,Rr,a.adamDisabled())),e.R7$(4),e.Y8G("ngClass",e.eq3(14,Rr,a.adamDisabled())))},dependencies:[sm,Ue.YU,lm],styles:['.adam-browser-container--short[_ngcontent-%COMP%]{flex-shrink:0;max-height:45%;overflow-y:scroll}.dropzone-previews[_ngcontent-%COMP%]{display:flex;overflow-x:auto;overflow-y:hidden;box-shadow:0 2px #ccc inset}.dropzone-previews[_ngcontent-%COMP%]     .dz-preview{padding:5px}.dropzone-previews[_ngcontent-%COMP%]     .dz-details, .dropzone-previews[_ngcontent-%COMP%]     .dz-progress, .dropzone-previews[_ngcontent-%COMP%]     .dz-error-message, .dropzone-previews[_ngcontent-%COMP%]     .dz-success-mark, .dropzone-previews[_ngcontent-%COMP%]     .dz-error-mark{display:none}@keyframes _ngcontent-%COMP%_spinner{to{transform:rotate(360deg)}}.dropzone-previews[_ngcontent-%COMP%]     .dz-image{position:relative}.dropzone-previews[_ngcontent-%COMP%]     .dz-image:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:32px;height:32px;margin-top:-16px;margin-left:-16px;border-radius:50%;border:4px solid #0087f4;border-top-color:transparent;animation:_ngcontent-%COMP%_spinner .6s linear infinite}.c-ew__dialog-content[_ngcontent-%COMP%], .adam-in-popup[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.c-ew__dialog-content[_ngcontent-%COMP%]   .adam-dialog-content[_ngcontent-%COMP%], .adam-in-popup[_ngcontent-%COMP%]   .adam-dialog-content[_ngcontent-%COMP%]{flex:1 1 auto;overflow:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scrollbar-width:none}.c-ew__dialog-content[_ngcontent-%COMP%]   .adam-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar, .adam-in-popup[_ngcontent-%COMP%]   .adam-dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.c-ew__dialog-content[_ngcontent-%COMP%]   adam-browser[_ngcontent-%COMP%], .adam-in-popup[_ngcontent-%COMP%]   adam-browser[_ngcontent-%COMP%]{background:#fff;z-index:2}.c-ew__dialog-content[_ngcontent-%COMP%]   adam-hint[_ngcontent-%COMP%], .adam-in-popup[_ngcontent-%COMP%]   adam-hint[_ngcontent-%COMP%]{z-index:3}.c-ew__dialog-content--empty[_ngcontent-%COMP%]   adam-browser[_ngcontent-%COMP%]{flex:1 1 100%;overflow:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scrollbar-width:none}.c-ew__dialog-content--empty[_ngcontent-%COMP%]   adam-browser[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}']})}}return i})();var Lr=g(85176);const mm=new r.nKC("DROPZONE_CONFIG"),fm=["error","success","sending","canceled","complete","processing","drop","dragStart","dragEnd","dragEnter","dragOver","dragLeave","thumbnail","addedFile","addedFiles","removedFile","uploadProgress","maxFilesReached","maxFilesExceeded","errorMultiple","successMultiple","sendingMultiple","canceledMultiple","completeMultiple","processingMultiple","reset","queueComplete","totalUploadProgress"];class gm{timeout;autoReset;errorReset;cancelReset;url;method;params;headers;init;accept;resize;fallback;renameFile;transformFile;chunksUploaded;withCredentials;previewsContainer;hiddenInputContainer;clickable;paramName;capture;maxFiles;maxFilesize;filesizeBase;acceptedFiles;forceFallback;addRemoveLinks;uploadMultiple;parallelUploads;resizeWidth;resizeHeight;resizeMethod;resizeQuality;resizeMimeType;thumbnailWidth;thumbnailHeight;thumbnailMethod;previewTemplate;autoQueue;autoProcessQueue;ignoreHiddenFiles;maxThumbnailFilesize;createImageThumbnails;chunking;chunkSize;retryChunks;forceChunking;retryChunksLimit;parallelChunkUploads;dictFileSizeUnits;dictDefaultMessage;dictFallbackMessage;dictFileTooBig;dictResponseError;dictInvalidFileType;dictRemoveFile;dictCancelUpload;dictUploadCanceled;dictFallbackText;dictMaxFilesExceeded;dictRemoveFileConfirmation;dictCancelUploadConfirmation;constructor(o={}){this.assign(o)}assign(o={},t){t=t||this;for(const n in o)null==o[n]||Array.isArray(o[n])||"object"!=typeof o[n]||o[n]instanceof HTMLElement?t[n]=o[n]:(t[n]={},this.assign(o[n],t[n]))}}let Vr=(()=>{class i{zone;renderer;elementRef;differs;platformId;defaults;instance;configDiff=null;disabled=!1;config;DZ_INIT=new r.bkB;DZ_ERROR=new r.bkB;DZ_SUCCESS=new r.bkB;DZ_SENDING=new r.bkB;DZ_CANCELED=new r.bkB;DZ_COMPLETE=new r.bkB;DZ_PROCESSING=new r.bkB;DZ_DROP=new r.bkB;DZ_DRAGSTART=new r.bkB;DZ_DRAGEND=new r.bkB;DZ_DRAGENTER=new r.bkB;DZ_DRAGOVER=new r.bkB;DZ_DRAGLEAVE=new r.bkB;DZ_THUMBNAIL=new r.bkB;DZ_ADDEDFILE=new r.bkB;DZ_ADDEDFILES=new r.bkB;DZ_REMOVEDFILE=new r.bkB;DZ_UPLOADPROGRESS=new r.bkB;DZ_MAXFILESREACHED=new r.bkB;DZ_MAXFILESEXCEEDED=new r.bkB;DZ_ERRORMULTIPLE=new r.bkB;DZ_SUCCESSMULTIPLE=new r.bkB;DZ_SENDINGMULTIPLE=new r.bkB;DZ_CANCELEDMULTIPLE=new r.bkB;DZ_COMPLETEMULTIPLE=new r.bkB;DZ_PROCESSINGMULTIPLE=new r.bkB;DZ_RESET=new r.bkB;DZ_QUEUECOMPLETE=new r.bkB;DZ_TOTALUPLOADPROGRESS=new r.bkB;constructor(t,n,a,s,c,p){this.zone=t,this.renderer=n,this.elementRef=a,this.differs=s,this.platformId=c,this.defaults=p,Lr.Dropzone.autoDiscover=!1}ngOnInit(){if(!(0,ir.UE)(this.platformId))return;const t=new gm(this.defaults);t.assign(this.config),this.renderer.addClass(this.elementRef.nativeElement,1===t.maxFiles?"dz-single":"dz-multiple"),this.renderer.removeClass(this.elementRef.nativeElement,1===t.maxFiles?"dz-multiple":"dz-single"),Object.keys(t).forEach(n=>void 0===t[n]&&delete t[n]),this.zone.runOutsideAngular(()=>{this.instance=new Lr.Dropzone(this.elementRef.nativeElement,t)}),this.disabled&&this.instance.disable(),this.DZ_INIT.observers.length&&this.zone.run(()=>{this.DZ_INIT.emit(this.instance)}),this.instance.on("success",()=>{null!=t.autoReset&&setTimeout(()=>this.reset(),t.autoReset)}),this.instance.on("error",()=>{null!=t.errorReset&&setTimeout(()=>this.reset(),t.errorReset)}),this.instance.on("canceled",()=>{null!=t.cancelReset&&setTimeout(()=>this.reset(),t.cancelReset)}),fm.forEach(n=>{this.instance.on(n.toLowerCase(),(...a)=>{a=1===a.length?a[0]:a;const c=this[`DZ_${n.toUpperCase()}`];c.observers.length>0&&this.zone.run(()=>{c.emit(a)})})}),this.configDiff||(this.configDiff=this.differs.find(this.config||{}).create(),this.configDiff.diff(this.config||{}))}ngOnDestroy(){this.instance&&(this.zone.runOutsideAngular(()=>{this.instance.destroy()}),this.instance=null)}ngDoCheck(){!this.disabled&&this.configDiff&&this.configDiff.diff(this.config||{})&&this.instance&&(this.ngOnDestroy(),this.ngOnInit())}ngOnChanges(t){this.instance&&t.disabled&&t.disabled.currentValue!==t.disabled.previousValue&&(!1===t.disabled.currentValue?this.zone.runOutsideAngular(()=>{this.instance.enable()}):!0===t.disabled.currentValue&&this.zone.runOutsideAngular(()=>{this.instance.disable()}))}dropzone(){return this.instance}reset(t){this.instance&&this.zone.runOutsideAngular(()=>{this.instance.removeAllFiles(t)})}static \u0275fac=function(n){return new(n||i)(e.rXU(r.SKi),e.rXU(e.sFG),e.rXU(e.aKT),e.rXU(Y.MKu),e.rXU(e.Agw),e.rXU(mm,8))};static \u0275dir=e.FsC({type:i,selectors:[["","dropzone",""]],inputs:{disabled:"disabled",config:[0,"dropzone","config"]},outputs:{DZ_INIT:"init",DZ_ERROR:"error",DZ_SUCCESS:"success",DZ_SENDING:"sending",DZ_CANCELED:"canceled",DZ_COMPLETE:"complete",DZ_PROCESSING:"processing",DZ_DROP:"drop",DZ_DRAGSTART:"dragStart",DZ_DRAGEND:"dragEnd",DZ_DRAGENTER:"dragEnter",DZ_DRAGOVER:"dragOver",DZ_DRAGLEAVE:"dragLeave",DZ_THUMBNAIL:"thumbnail",DZ_ADDEDFILE:"addedFile",DZ_ADDEDFILES:"addedFiles",DZ_REMOVEDFILE:"removedFile",DZ_UPLOADPROGRESS:"uploadProgress",DZ_MAXFILESREACHED:"maxFilesReached",DZ_MAXFILESEXCEEDED:"maxFilesExceeded",DZ_ERRORMULTIPLE:"errorMultiple",DZ_SUCCESSMULTIPLE:"successMultiple",DZ_SENDINGMULTIPLE:"sendingMultiple",DZ_CANCELEDMULTIPLE:"canceledMultiple",DZ_COMPLETEMULTIPLE:"completeMultiple",DZ_PROCESSINGMULTIPLE:"processingMultiple",DZ_RESET:"reset",DZ_QUEUECOMPLETE:"queueComplete",DZ_TOTALUPLOADPROGRESS:"totalUploadProgress"},exportAs:["ngxDropzone"],standalone:!1,features:[e.OA$]})}return i})(),vm=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=e.$C({type:i});static \u0275inj=r.G2t({imports:[Ue.MD,Ue.MD]})}return i})();class ym{constructor(o,t,n){this.acceptedFiles=null,this.maxFiles=1e3,this.parallelUploads=1e3,this.autoReset=null,this.errorReset=null,this.cancelReset=null,this.maxFilesize=2e4,this.timeout=18e5,this.paramName="uploadfile",this.maxThumbnailFilesize=10,this.dictDefaultMessage="",this.addRemoveLinks=!1,this.previewsContainer=".dropzone-previews",this.clickable=".dropzone-previews",this.disabled=o,this.url=t,this.headers=n}}let zr=(()=>{class i{static{this.classToDetectWysiwyg="class-distinguish-from-adam-dropzone"}}return i})();class is{constructor(){this.isStringWysiwyg=!1,this.imageTypes=["image/jpeg","image/png"]}detectWysiwygOnDrop(o){this.isStringWysiwyg=is.isParentWysiwyg(o.toElement)}removeFilesHandledByWysiwyg(o,t){this.isStringWysiwyg&&this.imageTypes.some(n=>n===t.type)&&o.removeFile(t)}static isParentWysiwyg(o){do{if(null==o)return!1;if(o?.classList.contains(zr.classToDetectWysiwyg))return!0;o=o.parentElement}while(!o?.classList.contains(zr.classToDetectWysiwyg)||o.parentElement!=document.body);return!1}}const bm=["fieldComponent"],_m=i=>({"dropzone-disabled":i});let xm=(()=>{class i{#e;#t;#n;constructor(t,n){this.formConfig=t,this.dnnContext=n,this.log=(0,f.Tq)({DropzoneWrapperComponent:i}),this.#e=(0,r.WQX)(it.W),this.#t=this.#e.config,this.dropzoneConfig=(0,r.vPA)(null),this.dropzoneDisabled=(0,Ne.EW)(()=>this.#e.ui().disabled||(this.dropzoneConfig()?.disabled??!0)),this.#n=new is,this.extendFieldConfigWithDropZone(),this.#i({})}extendFieldConfigWithDropZone(){this.#t.dropzone={setConfig:t=>this.#i(t),getConfig:()=>this.dropzoneConfig(),uploadFile:t=>this.#a(t)}}ngAfterViewInit(){this.#i({previewsContainer:`.${this.#t.dropzonePreviewsClass} .dropzone-previews`,clickable:`.${this.#t.dropzonePreviewsClass} .invisible-clickable`})}onDrop(t){this.#n.detectWysiwygOnDrop(t)}onAddedFile(t){this.#n.removeFilesHandledByWysiwyg(this.dropzoneRef.dropzone(),t)}onUploadError(t){this.log.fn("onUploadError",{event:t}),alert(`Dropzone upload error. Event ${t}`),this.dropzoneRef.reset()}onUploadSuccess(t){const n=this.log.fn("onUploadSuccess",{event:t}),a=t[1];a.Error?(n.a(`Upload failed because: ${a.Error}`),alert(`Upload failed because: ${a.Error}`)):this.#t.adam?(this.#t.adam.onItemUpload(a),this.#t.adam.refresh()):n.a("Upload failed because: ADAM reference doesn't exist"),this.dropzoneRef.reset()}#i(t){const n=this.#t.contentTypeNameId,a=this.#t.entityGuid,s=this.#t.fieldName,p=this.#t.inputTypeSpecs.isExternal,x=this.dnnContext.$2sxc.http.apiUrl(`app/auto/data/${n}/${a}/${s}?subfolder=&usePortalRoot=false&appId=${this.formConfig.config.appId}`),O=this.dnnContext.sxc.webApi.headers(),G=new ym(p,x,O),ie=this.dropzoneConfig()??G;for(const Je of Object.keys(G))G[Je]=t[Je]??ie[Je];if(G.maxFiles!==G.parallelUploads){const Je=G.maxFiles>=G.parallelUploads?G.maxFiles:G.parallelUploads;G.maxFiles=Je,G.parallelUploads=Je}(null==G.acceptedFiles||""===G.acceptedFiles)&&delete G.acceptedFiles,this.dropzoneConfig.set(G)}#a(t){const n=this.dropzoneRef.dropzone();t.upload={chunked:n.defaultOptions?.chunking??n.options?.chunking},n.processFile(t)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(y.S),e.rXU(Or.ob))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-dropzone-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(bm,7,e.c1b)(Vr,5),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first),e.mGM(s=e.lsd())&&(a.dropzoneRef=s.first)}},decls:3,vars:5,consts:[["fieldComponent",""],[1,"dropzone","dropzone-container",3,"error","success","addedFile","drop","ngClass","dropzone","disabled"]],template:function(n,a){if(1&n){const s=e.RV6();e.j41(0,"div",1),e.bIt("error",function(p){return r.eBV(s),r.Njj(a.onUploadError(p))})("success",function(p){return r.eBV(s),r.Njj(a.onUploadSuccess(p))})("addedFile",function(p){return r.eBV(s),r.Njj(a.onAddedFile(p))})("drop",function(p){return r.eBV(s),r.Njj(a.onDrop(p))}),e.eu8(1,null,0),e.k0s()}2&n&&e.Y8G("ngClass",e.eq3(3,_m,a.dropzoneDisabled()))("dropzone",a.dropzoneConfig())("disabled",a.dropzoneDisabled())},dependencies:[Ue.YU,vm,Vr],styles:[".dropzone-container[_ngcontent-%COMP%]{height:100%;position:relative}"]})}}return i})();class Bi{constructor(o){this.zone=o,this.eventListeners=[]}attach(o){this.zone.runOutsideAngular(()=>{function t(){(function a(s){for(const c of s)clearTimeout(c);s.splice(0,s.length)})(window.windowBodyTimeouts),document.body.classList.add(window.draggingClass)}function n(){document.body.classList.remove(window.draggingClass)}o.addEventListener("dragover",t,{passive:!0}),o.addEventListener("drop",n,{passive:!0}),this.eventListeners.push({element:o,type:"dragover",listener:t},{element:o,type:"drop",listener:n})})}detach(){this.zone.runOutsideAngular(()=>{this.eventListeners.forEach(({element:o,type:t,listener:n})=>o.removeEventListener(t,n))})}}const Qn=[(0,Dt.hZ)("itemShrinkAnimation",[(0,Dt.wk)("open",(0,Dt.iF)({height:"30vh"})),(0,Dt.wk)("closed",(0,Dt.iF)({height:"0vh"})),(0,Dt.kY)("open => closed",[(0,Dt.i0)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)")])]),(0,Dt.hZ)("contentExpandAnimation",[(0,Dt.wk)("closed",(0,Dt.iF)({height:"0"})),(0,Dt.wk)("expanded",(0,Dt.iF)({height:"calc(100vh - {{bottomPixels}})",maxHeight:"calc(100vh - {{bottomPixels}})"}),{params:{bottomPixels:window.innerWidth>600?"100px":"50px"}}),(0,Dt.kY)("closed => expanded",[(0,Dt.i0)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,Dt.i7)([(0,Dt.iF)({height:"0vh",overflow:"hidden"}),(0,Dt.iF)({height:"calc(100vh - {{bottomPixels}})",overflow:"hidden"})]))],{params:{bottomPixels:window.innerWidth>600?"100px":"50px"}})])];var Nr=g(82272),wm=g(74390),jr=g(18708),Br=g(18934),Gr=g(20545);const Tm=["backdrop"],km=["dialog"],Sm=["*"],Em=i=>({"c-ew__dialog-header mat-elevation-z2":i}),Im=i=>({bottomPixels:i}),Mm=(i,o)=>({value:i,params:o}),Ur=i=>({"appear-disabled":i});function Pm(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.closeDialog())}),e.j41(1,"mat-icon"),e.EFF(2,"done"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()}2&i&&(e.R7$(4),e.JRh(e.bMT(5,1,"Form.Buttons.Return.Tip")))}function Dm(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.saveAll(!1))}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"mat-icon"),e.EFF(5,"save"),e.k0s()(),e.j41(6,"button",12),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.saveAll(!0))}),e.j41(7,"span"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"mat-icon"),e.EFF(11,"done_all"),e.k0s()()}if(2&i){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(8,Ur,t.saveDisabled())),e.R7$(2),e.JRh(e.bMT(3,4,"Form.Buttons.Save")),e.R7$(4),e.Y8G("ngClass",e.eq3(10,Ur,t.saveDisabled())),e.R7$(2),e.JRh(e.bMT(9,6,"Form.Buttons.SaveAndClose"))}}function Fm(i,o){1&i&&e.DNE(0,Dm,12,12,"ng-template",10)}let Gi=(()=>{class i{#e;#t;#n;#i;constructor(t){this.zone=t,this.applyEmptyClass=(0,Y.hFB)(),this.fieldState=(0,r.WQX)(it.W),this.config=this.fieldState.config,this.basics=this.fieldState.basics,this.#e=(0,r.WQX)(gt),this.formsStateService=(0,r.WQX)(Vt),this.featuresService=(0,r.WQX)(v.D),this.#t=(0,r.WQX)(y.S),this.enableSave=!1!==this.#t.config.save.mode,this.#i=(0,le.d)(Ce),this.saveDisabled=(0,Q.bo)("saveDisabled",()=>this.#i.isSaving()||this.formsStateService.saveButtonDisabled()),this.open=this.fieldState.isOpen,this.#a=this.featuresService.isEnabled[Ot.T.NoSponsoredByToSic],this.adamSponsorI18nKey=(0,Ne.EW)(()=>this.#a()?"Fields.Hyperlink.AdamFileManager.Name":"Fields.Hyperlink.Default.Sponsor")}ngAfterViewInit(){this.#n=new Bi(this.zone),this.#n.attach(this.backdropRef.nativeElement),this.#n.attach(this.dialogRef.nativeElement)}ngOnDestroy(){this.#n.detach()}#a;calculateBottomPixels(){return window.innerWidth>600?"100px":"50px"}closeDialog(){this.#e.expand(!1,this.config.index,this.config.entityGuid)}saveAll(t){this.formsStateService.triggerSave(t)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(r.SKi))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-dialog-popup"]],viewQuery:function(n,a){if(1&n&&e.GBs(Tm,5)(km,5),2&n){let s;e.mGM(s=e.lsd())&&(a.backdropRef=s.first),e.mGM(s=e.lsd())&&(a.dialogRef=s.first)}},inputs:{applyEmptyClass:[1,"applyEmptyClass"]},ngContentSelectors:Sm,decls:19,vars:15,consts:[["backdrop",""],["dialog",""],[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],[1,"c-ew__dialog","mat-elevation-z24","u-border-radius"],["appearance","raised",1,"mat-elevation-z0"],["mat-icon-button","","tippyTranslate","Form.Buttons.Return.Tip",1,"back-arrow",3,"click"],[1,"title","mat-headline-4"],[1,"adam"],["extendedFabSpeedDialTriggerContent",""],["extendedFabSpeedDialActionsContent",""],["extended-fab-speed-dial-trigger","","matRipple","",3,"click"],["extended-fab-speed-dial-action","","matRipple","",3,"click","ngClass"]],template:function(n,a){if(1&n){const s=e.RV6();e.NAR(),e.j41(0,"div",2)(1,"div",3,0),e.bIt("click",function(){return r.eBV(s),r.Njj(a.closeDialog())}),e.k0s(),e.j41(3,"div",4,1)(5,"div",2)(6,"mat-card",5)(7,"button",6),e.bIt("click",function(){return r.eBV(s),r.Njj(a.closeDialog())}),e.j41(8,"mat-icon"),e.EFF(9,"arrow_back"),e.k0s()(),e.j41(10,"span",7),e.EFF(11),e.k0s()()(),e.j41(12,"div"),e.nrm(13,"div"),e.j41(14,"div"),e.SdG(15),e.j41(16,"extended-fab-speed-dial",8),e.DNE(17,Pm,6,3,"ng-template",9),e.nVh(18,Fm,1,0,null,10),e.k0s()()()()()}2&n&&(e.Y8G("ngClass",a.open()?"c-ew__container":"u-display-none"),e.R7$(5),e.Y8G("ngClass",e.eq3(8,Em,a.open())),e.R7$(6),e.JRh(a.basics().label),e.R7$(2),e.Y8G("@itemShrinkAnimation",a.open()?"closed":"open"),e.R7$(),e.HbH("c-ew__dialog-content u-border-radius-bottom u-add-scrollbar u-hide-scrollbar"+(a.applyEmptyClass()?" c-ew__dialog-content--empty":"")),e.Y8G("@contentExpandAnimation",e.l_i(12,Mm,a.open()?"expanded":"closed",e.eq3(10,Im,a.calculateBottomPixels()))),e.R7$(4),e.vxM(a.enableSave?18:-1))},dependencies:[Ue.YU,dt.Hu,dt.RN,_t.p,An.r6,Pt.Hl,qt.iY,j.m_,j.An,ue.h,Nr.d,wm.t,jr.R,Br.Q,Gr.d,At.e,Ue.MD,ue.D9],styles:[".c-ew__container[_ngcontent-%COMP%]{border-radius:8px;position:fixed;z-index:2;inset:0;width:100%;height:100%;align-items:self-start;justify-content:center;display:flex}.mat-elevation-z0[_ngcontent-%COMP%]{display:flex;flex-direction:row}.c-ew__backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%}.c-ew__dialog[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;max-width:800px;width:100vw;margin-top:24px;min-height:calc(var(--edit-content-max-height-default) + var(--edit-dialog-header-height));max-height:calc(var(--edit-content-max-height-default) + var(--edit-dialog-header-height));padding:0}@media(max-width:600px){.c-ew__dialog[_ngcontent-%COMP%]{margin-top:0;min-height:calc(var(--edit-ui-dialog-max-height-mobile) + var(--edit-dialog-header-height));max-height:calc(var(--edit-ui-dialog-max-height-mobile) + var(--edit-dialog-header-height))}}.c-ew__dialog[_ngcontent-%COMP%]   .mat-mdc-dialog-actions[_ngcontent-%COMP%]{padding:16px}.c-ew__dialog-header[_ngcontent-%COMP%]{z-index:4;border-radius:8px 8px 0 0}.c-ew__dialog-header[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{padding:16px;align-items:center;border-radius:8px 8px 0 0;height:52px;z-index:1}.c-ew__dialog-header[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]   .back-arrow[_ngcontent-%COMP%]{scale:.6666666667}.c-ew__dialog-header[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin-top:1px;line-height:20px}.c-ew__dialog-content[_ngcontent-%COMP%]{position:relative;background:#e9eaec;border-radius:0 0 8px 8px}.c-ew__dialog-content[_ngcontent-%COMP%]   .eav-layout-grid[_ngcontent-%COMP%]{padding:16px}.c-ew__dialog-content[_ngcontent-%COMP%]   .eav-layout-grid[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{height:calc(100% - 32px)}"],data:{animation:[Qn]}})}}return i})();const Om=["fieldComponent"],Am=["previewContainer"],Rm=(i,o,t,n,a,s)=>({"mat-caption":i,"mat-empty":o,"mat-error":t,color__primary:n,"my-label-disabled":a,"c-ew__preview-label--focused":s}),Lm=(i,o,t)=>({"c-ew__preview--invalid":i,"c-ew__preview--disabled":o,"c-ew__preview--focused":t}),Vm=i=>({"c-ew__preview-content--disabled":i}),zm=(i,o)=>({"min-height":i,"max-height":o});let Nm=(()=>{class i{constructor(t,n,a,s){this.changeDetectorRef=t,this.viewContainerRef=n,this.zone=a,this.formsStateService=s,this.log=(0,f.Tq)({ExpandableWrapperComponent:i}),this.fieldState=(0,r.WQX)(it.W),this.config=this.fieldState.config,this.basics=this.fieldState.basics,this.settings=this.fieldState.settings,this.ui=this.fieldState.ui,this.uiValue=this.fieldState.uiValue,this.focused=(0,r.vPA)(!1),this.adamDisabled=this.config.adam.isDisabled,this.previewHeight=(0,Ne.EW)(()=>{const c=this.settings(),p={minHeight:"36px",maxHeight:"50vh"};if(this.config.inputTypeSpecs.inputType!==Ye.u.StringWysiwyg&&"inline"!==c.Dialog)return p;let x=parseInt(c.InlineInitialHeight,10);x<1&&(x=1);const O=function Cm(i){return i*Math.max(document.documentElement.clientHeight,window.innerHeight||0)/100}(50);let G=40+36*x;return G>O&&(G=O),p.minHeight=`${G}px`,p}),this.connectorCreator=(0,le.d)(Cr)}ngOnInit(){this.config.focused$.subscribe(this.focused.set)}ngAfterViewInit(){const t=this.log.fn("ngAfterViewInit"),n=this.config.inputTypeSpecs.componentTagName;t.a("ExpandableWrapper created for:",{componentTagName:n}),this.connectorCreator.init(n,this.previewContainerRef,this.viewContainerRef,this.changeDetectorRef),this.dropzoneDraggingHelper=new Bi(this.zone)}ngOnDestroy(){this.log.fn("ngOnDestroy",null,"destroying ExpandableWrapper"),this.dropzoneDraggingHelper.detach()}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(Y.gRc),e.rXU(e.c1b),e.rXU(r.SKi),e.rXU(Vt))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-expandable-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(Om,7,e.c1b)(Am,5),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first),e.mGM(s=e.lsd())&&(a.previewContainerRef=s.first)}},decls:11,vars:21,consts:[["fieldComponent",""],["previewContainer",""],[1,"c-ew__preview-holder"],[1,"c-ew__preview-label",3,"ngClass"],[1,"c-ew__preview",3,"ngClass"],[1,"c-ew__preview-container"],[1,"c-ew__preview-content","u-hide-scrollbar",3,"ngClass","ngStyle"]],template:function(n,a){1&n&&(e.j41(0,"app-dialog-popup"),e.eu8(1,null,0),e.k0s(),e.j41(3,"div",2)(4,"mat-label",3),e.EFF(5),e.k0s(),e.j41(6,"div",4)(7,"div",5),e.nrm(8,"div",6,1),e.k0s()(),e.nrm(10,"app-field-helper-text"),e.k0s()),2&n&&(e.R7$(4),e.Y8G("ngClass",e.l4e(5,Rm,a.uiValue(),!a.uiValue(),a.ui().invalid&&(a.ui().touched||a.ui().dirty)&&!a.ui().disabled,!a.ui().touchedAndInvalid&&!a.ui().disabled,a.ui().disabled,a.focused())),e.R7$(),e.SpI(" ",a.basics().labelWithRequired," "),e.R7$(),e.Y8G("ngClass",e.sMw(12,Lm,a.ui().invalid&&(a.ui().touched||a.ui().dirty),a.ui().disabled,a.focused())),e.R7$(2),e.Y8G("ngClass",e.eq3(16,Vm,a.ui().disabled))("ngStyle",e.l_i(18,zm,a.previewHeight().minHeight,a.previewHeight().maxHeight)))},dependencies:[Xt,Gi,Ue.MD,Ue.YU,Ue.B3],styles:[".c-ew__preview[_ngcontent-%COMP%]{margin-bottom:1px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){margin-bottom:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--focused[_ngcontent-%COMP%]:not(.c-ew__preview--invalid){margin-bottom:0;border-bottom:2px solid #002753!important;transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{margin-bottom:0;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;margin-bottom:0;background-image:linear-gradient(to right,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 33%,transparent 0%);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;min-height:36px;max-height:50vh;font-size:14px}.c-ew__preview[_ngcontent-%COMP%]   .color__accent[_ngcontent-%COMP%]{color:#002753}.c-ew__preview[_ngcontent-%COMP%]   .color__primary[_ngcontent-%COMP%]{color:#1d273d70}.c-ew__preview[_ngcontent-%COMP%]   .my-label-disabled[_ngcontent-%COMP%]{color:#1d273d3d}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:26px}.c-ew__preview-label[_ngcontent-%COMP%]{top:-14px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-mdc-form-field-error){color:#1d273d70}.c-ew__preview-label--focused[_ngcontent-%COMP%]:not(.mat-mdc-form-field-error){color:#002753!important}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;min-height:inherit;max-height:inherit}.c-ew__preview-content[_ngcontent-%COMP%]{position:relative;overflow-x:hidden;overflow-y:scroll;min-height:36px;max-height:50vh}.c-ew__preview-content--disabled[_ngcontent-%COMP%]{pointer-events:none;color:#1d273d70}"],data:{animation:[Qn]}})}}return i})();const jm=["fieldComponent"],Bm=i=>({mark:i});function Gm(i,o){if(1&i&&(e.EFF(0),e.nrm(1,"app-feature-icon-with-dialog",3)),2&i){const t=o.$implicit;e.SpI(" ",t," "),e.R7$(),e.Y8G("featureNameId",t)}}function Um(i,o){if(1&i&&(e.j41(0,"div",2),e.EFF(1," This uses features which are not licensed: "),e.Z7z(2,Gm,2,2,null,null,e.fX1),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Dyx(t.requiredFeatures())}}let $m=(()=>{class i{#e;#t;constructor(){this.#e=(0,r.WQX)(it.W),this.#t=(0,r.WQX)(v.D),this.requiredFeatures=(0,Q.bo)("requiredFeatures",()=>{const t=this.#e.requiredFeatures();return 0===t.length?t:t.filter(n=>!this.#t.allowUse[n]())}),this.basics=this.#e.basics}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-feat-warnings-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(jm,7,e.c1b),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first)}},decls:4,vars:4,consts:[["fieldComponent",""],[3,"ngClass"],[1,"feature-warning"],[3,"featureNameId"]],template:function(n,a){1&n&&(e.j41(0,"div",1),e.eu8(1,null,0),e.nVh(3,Um,4,0,"div",2),e.k0s()),2&n&&(e.Y8G("ngClass",e.eq3(2,Bm,a.requiredFeatures().length)),e.R7$(3),e.vxM(-1))},dependencies:[Ue.YU,bi.X],styles:[".feature-warning[_ngcontent-%COMP%]{display:none}.mark[_ngcontent-%COMP%]{border-right:2px solid #00A6ED;--s: 2px;-webkit-mask:conic-gradient(at var(--s) var(--s),rgba(0,0,0,0) 75%,#000 0) 0 0/calc(100% - var(--s)) calc(100% - var(--s)),linear-gradient(#000 0 0) content-box;mask:conic-gradient(at var(--s) var(--s),rgba(0,0,0,0) 75%,#000 0) 0 0/calc(100% - var(--s)) calc(100% - var(--s)),linear-gradient(#000 0 0) content-box}.mark[_ngcontent-%COMP%]   .feature-warning[_ngcontent-%COMP%]{display:block;background-color:#f0ad4e;padding:4px}"]})}}return i})();class Ui extends mt.L{constructor(){super({EmptyDefaultSettingsHelper:Ui}),this.name=Ye.u.EmptyDefault}update({settings:o}){const t={...o};return t.Visible??=!0,t.Collapsed??=!1,t.Notes??="",t}}mt.L.add(Ui);const Hm=["fieldComponent"],Wm=i=>({"force-hide":i});function Xm(i,o){1&i&&(e.j41(0,"div",9),e.nrm(1,"div",11),e.nI1(2,"safeHtml"),e.k0s()),2&i&&(e.R7$(),e.Y8G("innerHtml",e.bMT(2,1,o),e.npT))}let Ym=(()=>{class i{#e;#t;constructor(){this.log=(0,f.Tq)({CollapsibleWrapperComponent:i}),this.#e=(0,r.WQX)(it.W),this.config=this.#e.config,this.group=this.#e.group,this.basics=this.#e.basics,this.collapsed=this.#e.settingExt("Collapsed"),this.#t=(0,r.WQX)(hn),Ui.importMe()}toggleCollapse(){const t=this.collapsed();this.log.a("toggleCollapse",{before:t}),this.#t.updateSetting(this.#e.name,{Collapsed:!t},"CollapsibleWrapperComponent")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-collapsible-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(Hm,7,e.c1b),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first)}},decls:14,vars:8,consts:[["fieldComponent",""],["appearance","raised",1,"eav-card-group-child","shadow-bottom-z-1",3,"ngClass"],[1,"eav-card-header-group-child",3,"click"],[1,"my-title-bar","eav-card-title-group","mat-body-2"],[1,"title-arrow"],[1,"title"],[1,"eav-card-content-group-child"],[1,"eav-layout-grid"],[1,"eav-layout-grid__inner"],["align","start",1,"eav-layout-grid__cell--span-12","mat-body-2"],[1,"eav-layout-grid__cell--span-12"],["appChangeAnchorTarget","",1,"description",3,"innerHtml"]],template:function(n,a){if(1&n){const s=e.RV6();e.j41(0,"mat-card",1)(1,"div",2),e.bIt("click",function(){return r.eBV(s),r.Njj(a.toggleCollapse())}),e.j41(2,"div",3)(3,"mat-icon",4),e.EFF(4),e.k0s(),e.j41(5,"span",5),e.EFF(6),e.k0s()()(),e.j41(7,"mat-card-content",6)(8,"div",7)(9,"div",8),e.nVh(10,Xm,3,3,"div",9),e.j41(11,"div",10),e.eu8(12,null,0),e.k0s()()()()()}if(2&n){let s;e.Y8G("ngClass",e.eq3(6,Wm,!1===a.basics().visible)),e.R7$(4),e.SpI("",a.collapsed()?"keyboard_arrow_down":"keyboard_arrow_up"," "),e.R7$(2),e.SpI(" ",a.basics().label||a.config.fieldName," "),e.R7$(),e.xc7("display",a.collapsed()?"none":"block"),e.R7$(3),e.vxM((s=a.basics().notes)?10:-1,s)}},dependencies:[dt.Hu,dt.RN,dt.m2,Ue.YU,j.m_,j.An,la,Mn.$],styles:[".eav-card-content-group-child[_ngcontent-%COMP%]{padding:0}.eav-card-group-child[_ngcontent-%COMP%]{padding:0;margin:0 0 8px;border-radius:8px}.eav-card-header-group-child[_ngcontent-%COMP%]{padding:20px 32px;border-radius:8px}.eav-card-header-group-child[_ngcontent-%COMP%]   .title-arrow[_ngcontent-%COMP%]{margin-right:6px}.eav-card-header-group-child[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.mat-mdc-card-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;padding-left:16px;padding-right:16px;margin-top:-14px;margin-bottom:14px}.eav-card-title-group[_ngcontent-%COMP%]{margin:0;cursor:pointer;line-height:20px;color:#002753}.mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px!important}.eav-layout-grid[_ngcontent-%COMP%]{padding:0 16px 16px}.my-title-bar[_ngcontent-%COMP%]{display:flex}"]})}}return i})();const Qm=["fieldComponent"];let Km=(()=>{class i{constructor(){this.fieldState=(0,r.WQX)(it.W),this.basics=this.fieldState.basics}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-hidden-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(Qm,7,e.c1b),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first)}},decls:3,vars:1,consts:[["fieldComponent",""],[3,"hidden"]],template:function(n,a){1&n&&(e.rj2(0,"div",1),e.AQ1(1,null,0),e.eux()),2&n&&e.Avn("hidden",!a.basics().visible)},encapsulation:2})}}return i})();const Zm=["fieldComponent"],Jm=(i,o)=>({"c-ew__preview--disabled":i,"c-ew__preview--last-in-group":o}),qm=(i,o)=>({"icon-before-input":i,"thumbnail-before-input--disabled":o}),ef=i=>({"background-image":i}),tf=i=>({"mat-form-field-invalid":i}),nf=i=>({"mat-error":i}),af=i=>({"c-ew__preview-suffix-text--disabled":i}),sf=i=>({"metadata-exists":i});function rf(i,o){if(1&i&&e.nrm(0,"mat-icon",4),2&i){const t=e.XpG();e.Y8G("tippy",t.url)("svgIcon",t.icon)}}function of(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.expandDialog())}),e.nrm(1,"mat-icon",21),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("disabled",t.ui().disabled)}}function lf(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.openPagePicker())}),e.nrm(1,"mat-icon",23),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("disabled",t.ui().disabled)}}function cf(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",9)(1,"div",15),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nVh(4,of,2,1,"button",16),e.j41(5,"button",17),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.openImageConfiguration(a.adamItem()))}),e.j41(6,"mat-icon",18),e.EFF(7,"filter_center_focus"),e.k0s()(),e.nVh(8,lf,2,1,"button",19),e.k0s()}if(2&i){let t,n,a;const s=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(10,af,s.ui().disabled)),e.R7$(),e.SpI(" ",s.buttonAdam()?e.bMT(3,8,"Fields.Hyperlink.AdamFileManager.Hint"):""," "),e.R7$(2),e.vxM(s.buttonAdam()?4:-1),e.R7$(),e.Y8G("disabled",!(null!=(t=s.adamItem())&&t._imageConfigurationContentType))("ngClass",e.eq3(12,sf,(null==(n=s.adamItem())?null:n._imageConfigurationId)>0)),e.R7$(),e.Y8G("tippyTranslate",s.enableImageConfiguration()?"Fields.Hyperlink.AdamFileManager.ImageSettingsUnavailable":"Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled")("tippyDisabled",null==(a=s.adamItem())?null:a._imageConfigurationContentType),e.R7$(2),e.vxM(s.buttonPage()?8:-1)}}function df(i,o){if(1&i&&(e.j41(0,"div",11)(1,"div",24),e.EFF(2),e.k0s(),e.j41(3,"div",25)(4,"a",26)(5,"span"),e.EFF(6),e.k0s()()()()),2&i){const t=e.XpG(),n=e.XpG();e.R7$(2),e.JRh(n.uiValue()),e.R7$(2),e.Y8G("href",t.url,e.B4B)("tippy",t.url),e.R7$(2),e.JRh(t.floatingText)}}function uf(i,o){if(1&i&&(e.j41(0,"div",14)(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"app-feature-icon-with-dialog",27),e.k0s()),2&i){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,3,t.adamSponsorI18nKey())),e.R7$(2),e.Y8G("forText",!0)("featureNameId","NoSponsoredByToSic")}}function pf(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.expandDialog())}),e.nVh(3,rf,1,2,"mat-icon",4),e.k0s(),e.j41(4,"div",5)(5,"div",6)(6,"mat-form-field",7)(7,"input",8),e.bIt("change",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.setValue(a))})("blur",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.markAsTouched())})("keyup",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.setValue(a))}),e.k0s(),e.nVh(8,cf,9,14,"div",9),e.j41(9,"mat-label",10),e.EFF(10),e.k0s()(),e.nVh(11,df,7,4,"div",11),e.k0s(),e.j41(12,"div",12),e.nrm(13,"app-field-helper-text",13),e.nVh(14,uf,5,5,"div",14),e.k0s()()()()}if(2&i){const t=o,n=e.XpG();e.R7$(),e.Y8G("ngClass",e.l_i(17,Jm,n.ui().disabled,n.config.isLastInGroup)),e.R7$(),e.Y8G("tippyDisabled",n.ui().disabled)("ngClass",e.l_i(20,qm,n.uiValue()&&!t.isImage,n.ui().disabled))("ngStyle",e.eq3(23,ef,n.uiValue()&&t.isImage?t.thumbnailUrl:"")),e.R7$(),e.vxM(n.uiValue()&&!t.isImage?3:-1),e.R7$(3),e.Y8G("ngClass",e.eq3(25,tf,n.ui().touchedAndInvalid)),e.R7$(),e.Y8G("placeholder",n.basics().placeholder)("disabled",n.ui().disabled)("value",n.uiValue())("config",n.config)("elementType","input"),e.R7$(),e.vxM(n.buttonAdam()||n.buttonPage()?8:-1),e.R7$(),e.Y8G("ngClass",e.eq3(27,nf,n.ui().touchedAndInvalid)),e.R7$(),e.SpI(" ",n.basics().labelWithRequired," "),e.R7$(),e.vxM(t.floatingText?11:-1),e.R7$(2),e.Y8G("hyperlinkDefaultWrapperFix",!0),e.R7$(),e.vxM(n.buttonAdam()?14:-1)}}let hf=(()=>{class i extends wr{constructor(t,n,a,s,c,p,x,O,G){super(t,n,a,s,c,O),this.zone=x,this.formsStateService=O,this.featuresService=G,this.fieldState=(0,r.WQX)(it.W),this.config=this.fieldState.config,this.basics=this.fieldState.basics,this.buttonAdam=(0,Ne.EW)(()=>this.fieldState.settings().Buttons.includes("adam"),bn.bool),this.buttonPage=(0,Ne.EW)(()=>this.fieldState.settings().Buttons.includes("page"),bn.bool),this.enableImageConfiguration=this.fieldState.settingExt("EnableImageConfiguration"),this.#e=this.featuresService.isEnabled[Ot.T.NoSponsoredByToSic],this.adamSponsorI18nKey=(0,Ne.EW)(()=>this.#e()?"Fields.Hyperlink.AdamFileManager.Name":"Fields.Hyperlink.Default.Sponsor"),this.editRoutingService=p}#e;ngAfterViewInit(){this.dropzoneDraggingHelper=new Bi(this.zone)}ngOnDestroy(){this.dropzoneDraggingHelper.detach()}markAsTouched(){this.fieldState.ui().markTouched()}setValue(t){const n=t.target.value;this.fieldState.ui().setIfChanged(n)}expandDialog(){this.fieldState.ui().disabled||this.editRoutingService.expand(!0,this.config.index,this.config.entityGuid)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(y.S),e.rXU(tt.bZ),e.rXU(e.c1b),e.rXU(Y.gRc),e.rXU(E),e.rXU(gt),e.rXU(r.SKi),e.rXU(Vt),e.rXU(v.D))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-hyperlink-default-expandable-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(Zm,7,e.c1b),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first)}},features:[e.Vt3],decls:4,vars:1,consts:[["fieldComponent",""],[1,"c-hyperlink-default-field-preview"],[1,"c-ew__preview","c-ew__preview--hyperlink",3,"ngClass"],["tippyTranslate","Fields.Hyperlink.Default.Fullscreen",1,"thumbnail-before-input",3,"click","tippyDisabled","ngClass","ngStyle"],["tippyPlacement","right",3,"tippy","svgIcon"],[1,"c-ew__preview-field--short"],[1,"hyperlink-input-link-wrapper"],["color","accent",1,"eav-mat-form-field",3,"ngClass"],["matInput","","tippyTranslate","Fields.Hyperlink.Default.Tooltip","tippyPlacement","top","appPasteClipboardImage","",1,"eav-translate-on-dblclick",3,"change","blur","keyup","placeholder","disabled","value","config","elementType"],["matTextSuffix","",1,"c-ew__preview-suffix"],[3,"ngClass"],["fxHide","","fxShow.gt-xs","",1,"hyperlink-floating"],[1,"c__helper-wrapper"],[1,"c__helper-wrapper--left",3,"hyperlinkDefaultWrapperFix"],[1,"c-ew__preview-field-hint","c__helper-wrapper--right"],["fxHide","","fxShow.gt-xs","",1,"c-ew__preview-suffix-text",3,"ngClass"],["mat-icon-button","","tippyTranslate","Fields.Hyperlink.Default.Fullscreen","appClickStopPropagation","",1,"c-ew__preview-suffix-icon",3,"disabled"],["mat-icon-button","","appClickStopPropagation","","tippyTranslate","Fields.Hyperlink.AdamFileManager.ImageSettings",1,"c-ew__preview-suffix-icon",3,"click","disabled","ngClass"],[3,"tippyTranslate","tippyDisabled"],["mat-icon-button","","tippyTranslate","Fields.Hyperlink.Default.PageTip","appClickStopPropagation","",1,"c-ew__preview-suffix-icon",3,"disabled"],["mat-icon-button","","tippyTranslate","Fields.Hyperlink.Default.Fullscreen","appClickStopPropagation","",1,"c-ew__preview-suffix-icon",3,"click","disabled"],["svgIcon","apple-outlined"],["mat-icon-button","","tippyTranslate","Fields.Hyperlink.Default.PageTip","appClickStopPropagation","",1,"c-ew__preview-suffix-icon",3,"click","disabled"],["svgIcon","sitemap"],[1,"hyperlink-floating__value"],[1,"hyperlink-floating__url-box"],["target","_blank","tabindex","-1",1,"hyperlink-floating__url",3,"href","tippy"],[3,"forText","featureNameId"]],template:function(n,a){if(1&n&&(e.j41(0,"app-dialog-popup"),e.eu8(1,null,0),e.k0s(),e.nVh(3,pf,15,29,"div",1)),2&n){let s;e.R7$(3),e.vxM((s=a.preview())?3:-1,s)}},dependencies:[Ue.YU,j.m_,j.An,Ue.B3,ue.h,At.e,Gi,Xt,bi.X,Ya,Ue.MD,Gt.RG,wt.rl,wt.nJ,wt.yw,Ut.fS,Ut.fg,Pt.Hl,qt.iY,ue.D9],styles:[".metadata-exists[_ngcontent-%COMP%]{color:#0087f4}.c-ew__preview--hyperlink[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input[_ngcontent-%COMP%]{background-color:#1d273d14;width:78px;height:78px;border-radius:4px;border:1px solid rgba(0,0,0,.2);cursor:pointer;background-repeat:no-repeat;background-position:center}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input.icon-before-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input.icon-before-input[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:56px;height:56px;font-size:56px;line-height:56px;color:#1d273d70}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input--disabled[_ngcontent-%COMP%]{cursor:default}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input--disabled[_ngcontent-%COMP%]   .c-ew__preview-field-hint[_ngcontent-%COMP%]{color:#1d273d3d}.c-ew__preview-field--short[_ngcontent-%COMP%]{flex:1 1 auto;width:1%;padding:0 0 0 8px;margin-top:-4px}.c-ew__preview-field-hint[_ngcontent-%COMP%]{color:#1d273d70;font-size:12px}.c-ew__preview--disabled[_ngcontent-%COMP%]   .c-ew__preview-field-hint[_ngcontent-%COMP%]{color:#1d273d3d}.c-ew__preview-suffix[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.c-ew__preview-suffix-text[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:#06599a;-webkit-user-select:none;user-select:none;cursor:text}.c-ew__preview-suffix-text--disabled[_ngcontent-%COMP%]{color:#1d273d3d}@media(min-width:601px){.c-ew__preview-suffix-icon[_ngcontent-%COMP%]{top:0!important}.hyperlink-floating[_ngcontent-%COMP%], .c-ew__preview-field-hint.c__helper-wrapper--right[_ngcontent-%COMP%]{display:flex}}@media(max-width:600px){.c-ew__preview-suffix-icon[_ngcontent-%COMP%]{top:10px!important}.hyperlink-floating[_ngcontent-%COMP%], .c-ew__preview-field-hint.c__helper-wrapper--right[_ngcontent-%COMP%]{display:none}}.c__helper-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.c__helper-wrapper--left[_ngcontent-%COMP%]{flex:auto;width:1%}.c__helper-wrapper--right[_ngcontent-%COMP%]{flex:0 0 auto;padding-top:.54166667em;padding-left:12px;line-height:16px}"],data:{animation:[Qn]}})}}return i})();const mf=["fieldComponent"],ff=(i,o,t,n,a)=>({"mat-caption":i,"mat-empty":o,"mat-error":t,color__primary:n,"my-label-disabled":a}),gf=()=>({enterDuration:360}),vf=(i,o)=>({"c-ew__preview--invalid":i,"c-ew__preview--disabled":o});function yf(i,o){if(1&i&&(e.j41(0,"div")(1,"div",11),e.nrm(2,"mat-icon",12),e.j41(3,"div",13),e.EFF(4),e.k0s()()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.Name)}}function bf(i,o){if(1&i&&(e.j41(0,"mat-icon"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.JRh(t._icon)}}function _f(i,o){if(1&i&&(e.j41(0,"mat-icon"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.JRh(t._icon)}}function xf(i,o){if(1&i&&(e.j41(0,"div",11),e.nVh(1,bf,2,1,"mat-icon"),e.nVh(2,_f,2,1,"mat-icon"),e.j41(3,"div",13),e.EFF(4),e.k0s()()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.vxM(t._isMaterialIcon?1:-1),e.R7$(),e.vxM(t._isMaterialIcon?-1:2),e.R7$(2),e.JRh(t.Name)}}function Cf(i,o){if(1&i&&(e.j41(0,"div",14),e.nrm(1,"img",15),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("alt",e.ai1("",t.Id,":",t.Name))("src",t.ThumbnailUrl,e.B4B)}}function wf(i,o){if(1&i&&(e.j41(0,"div"),e.nVh(1,xf,5,3,"div",11),e.nVh(2,Cf,2,4,"div",14),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.vxM("image"!==t.Type?1:-1),e.R7$(),e.vxM("image"===t.Type?2:-1)}}function Tf(i,o){if(1&i&&(e.nVh(0,yf,5,1,"div"),e.nVh(1,wf,3,2,"div")),2&i){const t=o.$implicit;e.vxM(t.IsFolder?0:-1),e.R7$(),e.vxM(t.IsFolder?-1:1)}}let kf=(()=>{class i{#e;constructor(t,n,a,s){this.zone=t,this.editRoutingService=n,this.formsStateService=a,this.featuresService=s,this.fieldState=(0,r.WQX)(it.W),this.config=this.fieldState.config,this.basics=this.fieldState.basics,this.ui=this.fieldState.ui,this.uiValue=this.fieldState.uiValue,this.items=(0,Ne.EW)(()=>this.config.adam.items().slice(0,9)),this.itemsNumber=(0,Ne.EW)(()=>this.config.adam.items().length,bn.number),this.#e=this.featuresService.isEnabled[Ot.T.NoSponsoredByToSic],this.adamSponsorI18nKey=(0,Ne.EW)(()=>this.#e()?"Fields.Hyperlink.AdamFileManager.Name":"Fields.Hyperlink.Default.Sponsor")}ngAfterViewInit(){this.dropzoneDraggingHelper=new Bi(this.zone)}ngOnDestroy(){this.dropzoneDraggingHelper.detach()}trackByFn(t,n){return n.Id}expandDialog(){this.config.initialDisabled||this.editRoutingService.expand(!0,this.config.index,this.config.entityGuid)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(r.SKi),e.rXU(gt),e.rXU(Vt),e.rXU(v.D))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-hyperlink-library-expandable-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(mf,7,e.c1b),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first)}},decls:19,vars:21,consts:[["fieldComponent",""],[3,"applyEmptyClass"],[1,"c-ew__preview-holder"],[1,"c-ew__preview-label","c-ew__color--primary",3,"ngClass"],["matRipple","",1,"c-ew__preview","mat-ripple",3,"click","matRippleAnimation","ngClass"],[3,"ngClass"],[1,"c-ew__preview-content"],[1,"mat-caption","c-ew__preview-hint"],[1,"c__helper-wrapper--left"],["fxHide","","fxShow.gt-xs","",1,"c__helper-wrapper--right","c-ew__preview-hint-text"],[3,"forText","featureNameId"],[1,"adam-browse-background-icon"],["svgIcon","folder"],[1,"adam-short-label","mat-caption"],[1,"adam-browse-background-image"],["vm-dz-thumbnail","",3,"alt","src"]],template:function(n,a){if(1&n){const s=e.RV6();e.j41(0,"app-dialog-popup",1),e.eu8(1,null,0),e.k0s(),e.j41(3,"div",2)(4,"mat-label",3),e.EFF(5),e.k0s(),e.j41(6,"div",4),e.bIt("click",function(){return r.eBV(s),r.Njj(a.expandDialog())}),e.j41(7,"div",5)(8,"div",6),e.Z7z(9,Tf,2,2,null,null,a.trackByFn,!0),e.k0s()()(),e.j41(11,"div",7)(12,"div",8),e.nrm(13,"app-field-helper-text"),e.k0s(),e.j41(14,"div",9)(15,"span"),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.nrm(18,"app-feature-icon-with-dialog",10),e.k0s()()()}2&n&&(e.Y8G("applyEmptyClass",!0),e.R7$(4),e.Y8G("ngClass",e.s1E(11,ff,a.itemsNumber()>0,0===a.itemsNumber(),a.ui().invalid&&!a.config.initialDisabled,!a.ui().invalid&&!a.config.initialDisabled,a.config.initialDisabled)),e.R7$(),e.SpI(" ",a.basics().labelWithRequired," "),e.R7$(),e.Y8G("matRippleAnimation",e.lJ4(17,gf))("ngClass",e.l_i(18,vf,a.ui().invalid,a.config.initialDisabled)),e.R7$(),e.Y8G("ngClass",a.uiValue()?"c-ew__preview-container":"c-ew__preview-container--empty"),e.R7$(2),e.Dyx(a.items()),e.R7$(7),e.SpI("",e.bMT(17,9,a.adamSponsorI18nKey())," "),e.R7$(2),e.Y8G("forText",!0)("featureNameId","NoSponsoredByToSic"))},dependencies:[Gi,j.m_,j.An,_t.p,An.r6,Xt,bi.X,ue.h,Ue.MD,Ue.YU,ue.D9],styles:[".c-ew__preview[_ngcontent-%COMP%]{padding:0 0 12px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){padding:0 0 11px;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{padding:0 0 11px;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 13px;background-image:linear-gradient(to right,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 33%,transparent 0%);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;min-height:37px;max-height:119px;cursor:pointer}.c-ew__preview[_ngcontent-%COMP%]   .c-ew__color--accent[_ngcontent-%COMP%]{color:#002753}.c-ew__preview[_ngcontent-%COMP%]   .c-ew__color--primary[_ngcontent-%COMP%]{color:#1d273d70}.c-ew__preview[_ngcontent-%COMP%]   .my-label-disabled[_ngcontent-%COMP%]{color:#1d273d3d}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%]{height:78px;width:78px;text-align:center;border-radius:4px;border:1px solid rgba(0,0,0,.2);display:flex;flex-direction:column;align-items:center;justify-content:center}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]{height:78px;width:78px;border-radius:4px;border:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;border-radius:4px}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:38px}.c-ew__preview-label[_ngcontent-%COMP%]{top:-26px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-mdc-form-field-error){color:#1d273d70}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;height:100%;align-content:center}.c-ew__preview-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;gap:2px;overflow:hidden}.c-ew__preview-hint[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start}.c-ew__preview-hint-text[_ngcontent-%COMP%]{color:#1d273d70}.c-ew__preview--disabled[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%], .c-ew__preview--disabled[_ngcontent-%COMP%]   .c-ew__preview-hint-text[_ngcontent-%COMP%]{color:#1d273d3d}.c-ew__preview--disabled[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]{opacity:.5}.c__helper-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.c__helper-wrapper--left[_ngcontent-%COMP%]{flex:auto;width:1%}.c__helper-wrapper--right[_ngcontent-%COMP%]{flex:0 0 auto;padding-top:.54166667em;padding-left:12px;line-height:16px}.adam-short-label[_ngcontent-%COMP%]{max-width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],data:{animation:[Qn]}})}}return i})();var $r=g(93875);function Sf(i,o){1&i&&(e.j41(0,"mat-card-subtitle"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"LangMenu.Dialog.NoAutoTranslatableFields")," "))}function Ef(i,o){1&i&&(e.j41(0,"mat-card-subtitle"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"LangMenu.Dialog.ThisFieldIsNotAutoTranslatable")," "))}let Hr=(()=>{class i{constructor(t,n){this.dialog=t,this.dialogData=n}ngOnInit(){}closeDialog(){this.dialog.close()}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(tt.CP),e.rXU(tt.Vh))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-auto-translate-disabled-warning-dialog"]],decls:11,vars:8,consts:[["align","end"],["mat-button","","color","accent",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nVh(5,Sf,3,3,"mat-card-subtitle"),e.nVh(6,Ef,3,3,"mat-card-subtitle"),e.k0s(),e.j41(7,"mat-card-actions",0)(8,"button",1),e.bIt("click",function(){return a.closeDialog()}),e.EFF(9),e.nI1(10,"translate"),e.k0s()()()),2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,4,"LangMenu.Dialog.CantAutoTranslate")," "),e.R7$(2),e.vxM(a.dialogData.isAutoTranslateAll?5:-1),e.R7$(),e.vxM(a.dialogData.isAutoTranslateAll?-1:6),e.R7$(3),e.JRh(e.bMT(10,6,"Features.Close")))},dependencies:[dt.Hu,dt.RN,dt.YY,dt.MM,dt.Lc,dt.dh,Pt.Hl,Pt.$z,ue.h,ue.D9],encapsulation:2})}}return i})();var If=g(66184);const Rn={NoTranslate:"NoTranslate",FromPrimary:"FromPrimary",FromOther:"FromOther",LinkReadOnly:"LinkReadOnly",LinkShared:"LinkShared"};var Nt=g(55675);function Wr(i,o,t,n,a){return t.filter(c=>c.NameId!==o.current).map(c=>{const x=a===Nt.J.LinkReadWrite&&!c.IsAllowed||!new Re.U(n[i.fieldName],ni.N.diffCurrent(o,c.NameId)).hasEditableValues;return{key:c.NameId,disabled:x}})}function Pf(i){switch(i){case Nt.J.Translate:return Rn.FromPrimary;case Nt.J.DontTranslate:return Rn.NoTranslate;case Nt.J.LinkReadOnly:return Rn.LinkReadOnly;case Nt.J.LinkReadWrite:return Rn.LinkShared;case Nt.J.LinkCopyFrom:return Rn.FromOther}}let Xr=(()=>{class i{#e;#t;constructor(t){this.dialogData=t,this.#e=(0,r.WQX)(w.g),this.#t=(0,r.WQX)(I.b),this.formConfig=(0,r.WQX)(y.S),this.TranslationLinks=Nt.J,this.I18nKeys=Rn,this.language=this.formConfig.language,this.translationStateSignal=(0,r.vPA)(this.dialogData.translationState),this.translationInfo=(0,Q.bo)("translationInfo",()=>{const n=this.translationStateSignal();return this.noLanguageRequired=[Nt.J.Translate,Nt.J.DontTranslate],{showLanguageSelection:!this.noLanguageRequired.includes(n.linkType),i18nRoot:`LangMenu.Dialog.${Pf(n.linkType)}`,submitDisabled:""===n.language&&!this.noLanguageRequired.includes(n.linkType)}}),this.languages=this.#e.getAllSignal(),this.itemAttributes=this.#t.itemAttributesSignal(this.dialogData.config.entityGuid)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(tt.Vh))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-translate-helper-base"]],decls:0,vars:0,template:function(n,a){},encapsulation:2})}}return i})();var Ln=g(32760);let Df=(()=>{class i{constructor(){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-snack-bar-warning-demo"]],decls:6,vars:10,consts:[[3,"innerHTML"],[1,"snack-bar-warning-demo-white-hyperlink",3,"innerHTML"]],template:function(n,a){1&n&&(e.Hgh(0,"h3",0),e.nI1(1,"translate"),e.nI1(2,"safeHtml"),e.Hgh(3,"p",1),e.nI1(4,"translate"),e.nI1(5,"safeHtml")),2&n&&(e.Avn("innerHTML",e.bMT(2,4,e.bMT(1,2,"LangMenu.SnackBar.Title")),e.npT),e.R7$(3),e.Avn("innerHTML",e.bMT(5,8,e.bMT(4,6,"LangMenu.SnackBar.Body")),e.npT))},dependencies:[ue.h,ue.D9,Mn.$],styles:[".snack-bar-warning-demo-white-hyperlink a{color:#fff;text-decoration:underline}"]})}}return i})();const Ff=(i,o)=>({"eav-list-item__focus":i,"list-item__disabled":o}),Of=i=>({"list-item-icon__disabled":i});function Af(i,o){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI("(",e.bMT(2,1,"LangMenu.Dialog.AutoTranslateAll.NoContent"),") "))}function Rf(i,o){1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI("(",e.bMT(2,1,"LangMenu.Dialog.AutoTranslateAll.AllTranslatableFields"),") "))}function Lf(i,o){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.k0s()),2&i){const t=e.XpG(4).$implicit,n=e.XpG();e.R7$(),e.E5c("(",e.bMT(2,3,"LangMenu.Dialog.AutoTranslateAll.AllTranslatableFields"),", ",n.dialogData.translatableFields.length-t.noTranslatableFieldsThatHaveContent," ",e.bMT(3,5,"LangMenu.Dialog.AutoTranslateAll.Empty"),") ")}}function Vf(i,o){if(1&i&&(e.j41(0,"span"),e.nVh(1,Rf,3,3,"span"),e.nVh(2,Lf,4,7,"span"),e.k0s()),2&i){const t=e.XpG(3).$implicit,n=e.XpG();e.R7$(),e.vxM(n.dialogData.translatableFields.length-t.noTranslatableFieldsThatHaveContent==0?1:-1),e.R7$(),e.vxM(n.dialogData.translatableFields.length-t.noTranslatableFieldsThatHaveContent!=0?2:-1)}}function zf(i,o){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.k0s()),2&i){const t=e.XpG(4).$implicit,n=e.XpG();e.R7$(),e.LHq("(",t.noTranslatableFields," ",e.bMT(2,4,"LangMenu.Dialog.AutoTranslateAll.Of")," ",n.dialogData.translatableFields.length," ",e.bMT(3,6,"LangMenu.Dialog.AutoTranslateAll.TranslatableFields"),") ")}}function Nf(i,o){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s()),2&i){const t=e.XpG(4).$implicit,n=e.XpG();e.R7$(),e.ZXR("(",t.noTranslatableFields," ",e.bMT(2,6,"LangMenu.Dialog.AutoTranslateAll.Of")," ",n.dialogData.translatableFields.length," ",e.bMT(3,8,"LangMenu.Dialog.AutoTranslateAll.TranslatableFields")," , ",n.dialogData.translatableFields.length-t.noTranslatableFieldsThatHaveContent," ",e.bMT(4,10,"LangMenu.Dialog.AutoTranslateAll.Empty"),") ")}}function jf(i,o){if(1&i&&(e.j41(0,"span"),e.nVh(1,zf,4,8,"span"),e.nVh(2,Nf,5,12,"span"),e.k0s()),2&i){const t=e.XpG(3).$implicit,n=e.XpG();e.R7$(),e.vxM(n.dialogData.translatableFields.length-t.noTranslatableFieldsThatHaveContent==0?1:-1),e.R7$(),e.vxM(n.dialogData.translatableFields.length-t.noTranslatableFieldsThatHaveContent!=0?2:-1)}}function Bf(i,o){if(1&i&&(e.j41(0,"span"),e.nVh(1,Vf,3,2,"span"),e.nVh(2,jf,3,2,"span"),e.k0s()),2&i){const t=e.XpG(2).$implicit,n=e.XpG();e.R7$(),e.vxM(t.noTranslatableFields==n.dialogData.translatableFields.length?1:-1),e.R7$(),e.vxM(t.noTranslatableFields!=n.dialogData.translatableFields.length?2:-1)}}function Gf(i,o){if(1&i&&(e.j41(0,"span"),e.nVh(1,Af,3,3,"span"),e.nVh(2,Bf,3,2,"span"),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.vxM(0==t.noTranslatableFields?1:-1),e.R7$(),e.vxM(0!=t.noTranslatableFields?2:-1)}}function Uf(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-list-item",5),e.bIt("click",function(){const a=r.eBV(t).$implicit,s=e.XpG();return r.Njj(s.setLanguage(a.key))}),e.j41(1,"mat-icon",6),e.EFF(2,"language"),e.k0s(),e.j41(3,"span",7),e.EFF(4),e.nVh(5,Gf,3,2,"span"),e.k0s()()}if(2&i){const t=o.$implicit,n=e.XpG();e.Y8G("disabled",t.disabled||!n.isTranslateWithGoogleFeatureEnabled())("ngClass",e.l_i(5,Ff,n.translationStateSignal().language===t.key,t.disabled||!n.isTranslateWithGoogleFeatureEnabled())),e.R7$(),e.Y8G("ngClass",e.eq3(8,Of,t.disabled)),e.R7$(3),e.SpI("",t.key," "),e.R7$(),e.vxM(n.dialogData.isTranslateMany?5:-1)}}let Yr=(()=>{class i extends Xr{constructor(t,n,a,s){super(n),this.dialog=t,this.dialogData=n,this.fieldsTranslateService=a,this.snackBar=s,this.features=(0,r.WQX)(v.D),this.isTranslateWithGoogleFeatureEnabled=this.features.isEnabled[Ot.T.EditUiTranslateWithGoogle],this.EditUiTranslateWithGoogle=Ot.T.EditUiTranslateWithGoogle,this.languagesSig=(0,Ne.EW)(()=>{const c=this.languages(),p=this.language(),x=this.itemAttributes(),O=this.translationStateSignal();return this.dialogData.isTranslateMany?function Mf(i,o,t,n,a){return o.filter(c=>c.NameId!==i.current).map(c=>{let p=0,x=0,O=!1;const G=ni.N.diffCurrent(i,c.NameId);return a.forEach(ae=>{const Je=new Re.U(t[ae],G);p+=Je.countEditable(),x+=Je.countEditableWithContents(),O=n===Nt.J.LinkReadWrite&&!c.IsAllowed||0==p}),{key:c.NameId,disabled:O,noTranslatableFields:p,noTranslatableFieldsThatHaveContent:x}})}(p,c,x,O.linkType,this.dialogData.translatableFields):Wr({fieldName:this.dialogData.config.fieldName??""},p,c,x,O.linkType)}),this.dialog.keydownEvents().subscribe(c=>{(0,Ln.JY)(c)&&c.preventDefault()})}ngOnInit(){this.isTranslateWithGoogleFeatureEnabled()&&this.dialog.afterClosed().subscribe(()=>this.snackBar.dismiss()),this.formConfig.settings.Values[_n.Ox.GoogleTranslate].IsDemo&&this.snackBar.openFromComponent(Df)}setLanguage(t){const n={...this.translationStateSignal(),language:t};this.translationStateSignal.set(n),this.dialogData.translationState.language!==n.language?(this.dialogData.isTranslateMany?this.fieldsTranslateService.autoTranslateMany(n.language):this.fieldsTranslateService.autoTranslate([this.dialogData.config.fieldName],n.language),this.closeDialog()):this.closeDialog()}closeDialog(){this.dialog.close()}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(tt.CP),e.rXU(tt.Vh),e.rXU(En),e.rXU(Se.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-auto-translate-menu-dialog"]],features:[e.Vt3],decls:13,vars:9,consts:[[1,"auto-translate-menu-dialog-card","u-hide-scrollbar"],[1,"feature-info",3,"featureNameId"],[3,"innerHTML"],[1,"eav-card-content__no-padding"],[3,"disabled","ngClass"],[3,"click","disabled","ngClass"],["matListItemIcon","",3,"ngClass"],["matListItemTitle",""]],template:function(n,a){1&n&&(e.j41(0,"mat-card",0),e.nrm(1,"app-feature-info-box",1),e.j41(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.nrm(6,"mat-card-subtitle",2),e.nI1(7,"translate"),e.nI1(8,"safeHtml"),e.k0s(),e.j41(9,"mat-card-content",3)(10,"mat-action-list"),e.Z7z(11,Uf,6,10,"mat-list-item",4,e.fX1),e.k0s()()()),2&n&&(e.R7$(),e.Y8G("featureNameId",a.EditUiTranslateWithGoogle),e.R7$(3),e.SpI(" ",e.bMT(5,3,"LangMenu.Dialog.AutoTranslateAll.Title")," "),e.R7$(2),e.Y8G("innerHTML",e.bMT(8,7,e.bMT(7,5,"LangMenu.Dialog.AutoTranslateAll.Body")),e.npT),e.R7$(5),e.Dyx(a.languagesSig()))},dependencies:[dt.Hu,dt.RN,dt.m2,dt.MM,dt.Lc,dt.dh,If.b,Si,pr,ki,Ti,$n,Ue.YU,j.m_,j.An,ue.h,ue.D9,Mn.$],styles:[".auto-translate-menu-dialog-card[_ngcontent-%COMP%]{max-height:99vh;overflow-y:scroll}.auto-translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]{padding:0}.auto-translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]:last-child{padding-bottom:16px}.auto-translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]   .eav-list-item__focus[_ngcontent-%COMP%]{background:#0000000a}.auto-translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]   .list-item__disabled[_ngcontent-%COMP%]{cursor:default;color:#1d273d3d;background:#fff}.auto-translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]   .list-item__disabled[_ngcontent-%COMP%]   .list-item-icon__disabled[_ngcontent-%COMP%]{color:#1d273d3d}.feature-info[_ngcontent-%COMP%]{margin:12px 12px 0}"]})}}return i})();const $f=i=>({name:i}),Kn=i=>({"eav-list-item__focus":i}),un=i=>({primary:i}),Hf=(i,o)=>({"eav-list-item__focus":i,"list-item__disabled":o}),Wf=i=>({"list-item-icon__disabled":i});function Xf(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-list-item",6),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.setLinkType(a.TranslationLinks.DontTranslate))}),e.j41(1,"mat-icon",4),e.EFF(2,"lock"),e.k0s(),e.j41(3,"span",5),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"span",7),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"mat-list-item",3),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.setLinkType(a.TranslationLinks.Translate))}),e.j41(10,"mat-icon",4),e.EFF(11,"lock_open"),e.k0s(),e.j41(12,"span",5),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"span"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(18,Kn,t.translationStateSignal().linkType===t.TranslationLinks.DontTranslate)),e.R7$(4),e.JRh(e.i5U(5,6,"LangMenu.Dialog."+t.I18nKeys.NoTranslate+".Title",e.eq3(20,un,t.language().primary))),e.R7$(3),e.JRh(e.i5U(8,9,"LangMenu.Dialog."+t.I18nKeys.NoTranslate+".Body",e.eq3(22,un,t.language().primary))),e.R7$(2),e.Y8G("ngClass",e.eq3(24,Kn,t.translationStateSignal().linkType===t.TranslationLinks.Translate)),e.R7$(4),e.JRh(e.i5U(14,12,"LangMenu.Dialog."+t.I18nKeys.FromPrimary+".Title",e.eq3(26,un,t.language().primary))),e.R7$(3),e.JRh(e.i5U(17,15,"LangMenu.Dialog."+t.I18nKeys.FromPrimary+".Body",e.eq3(28,un,t.language().primary)))}}function Yf(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-list-item",11),e.bIt("click",function(){const a=r.eBV(t).$implicit,s=e.XpG(2);return r.Njj(s.setLanguage(a.key))}),e.j41(1,"mat-icon",12),e.EFF(2,"language"),e.k0s(),e.j41(3,"span",5),e.EFF(4),e.k0s()()}if(2&i){const t=o.$implicit,n=e.XpG(2);e.Y8G("disabled",t.disabled)("ngClass",e.l_i(4,Hf,n.translationStateSignal().language===t.key,t.disabled)),e.R7$(),e.Y8G("ngClass",e.eq3(7,Wf,t.disabled)),e.R7$(3),e.JRh(t.key)}}function Qf(i,o){if(1&i&&(e.j41(0,"div")(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"mat-card-subtitle"),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"mat-action-list"),e.Z7z(9,Yf,5,9,"mat-list-item",10,e.fX1),e.k0s()()),2&i){const t=e.XpG();e.R7$(3),e.SpI(" ",e.bMT(4,2,t.translationInfo().i18nRoot+".Subtitle")," "),e.R7$(3),e.SpI(" ",e.bMT(7,4,"LangMenu.Dialog.PickLanguageIntro")," "),e.R7$(3),e.Dyx(t.languagesSig())}}let Qr=(()=>{class i extends Xr{constructor(t,n,a){super(n),this.dialog=t,this.dialogData=n,this.fieldsTranslateService=a,this.languagesSig=(0,Ne.EW)(()=>{const s=this.languages(),c=this.language(),p=this.itemAttributes(),x=this.translationStateSignal();return Wr({fieldName:this.dialogData.isTranslateMany?this.dialogData.translatableFields?.[0]??"":this.dialogData.config.fieldName??""},c,s,p,x.linkType)}),this.isPrimaryLang=(0,Ne.EW)(()=>this.language().current===this.language().primary),this.dialog.keydownEvents().subscribe(s=>{(0,Ln.JY)(s)&&s.preventDefault()})}setLinkType(t){const n={linkType:t,language:this.noLanguageRequired.includes(t)?"":this.translationStateSignal().language};this.translationStateSignal.set(n)}setLanguage(t){const n={...this.translationStateSignal(),language:t};this.translationStateSignal.set(n)}run(){const t=this.translationStateSignal(),n=this.dialogData.translationState;if(n.linkType===t.linkType&&n.language===t.language)return this.closeDialog();const s=c=>{switch(t.linkType){case Nt.J.Translate:this.fieldsTranslateService.unlock(c);break;case Nt.J.DontTranslate:this.fieldsTranslateService.lock(c);break;case Nt.J.LinkReadOnly:this.fieldsTranslateService.linkReadOnly(c,t.language);break;case Nt.J.LinkReadWrite:this.fieldsTranslateService.linkReadWrite(c,t.language);break;case Nt.J.LinkCopyFrom:this.fieldsTranslateService.copyFrom(c,t.language)}};if(this.dialogData.isTranslateMany&&this.dialogData.translatableFields?.length)for(const c of this.dialogData.translatableFields)s(c);else s(this.dialogData.config.fieldName);this.closeDialog()}closeDialog(){this.dialog.close()}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(tt.CP),e.rXU(tt.Vh),e.rXU(En))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-translate-menu-dialog"]],features:[e.Vt3],decls:43,vars:59,consts:[[1,"translate-menu-dialog-card","u-hide-scrollbar"],[1,"eav-card-content__no-padding"],["toggle","","focus",""],["lines","3",3,"click","ngClass"],["matListItemIcon","","color","accent"],["matListItemTitle",""],[3,"click","ngClass"],["matListItemLine",""],["align","end"],["mat-button","","color","accent",3,"click","disabled"],[3,"disabled","ngClass"],[3,"click","disabled","ngClass"],["matListItemIcon","",3,"ngClass"]],template:function(n,a){1&n&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3),e.nI1(4,"translate"),e.nI1(5,"translate"),e.k0s(),e.j41(6,"mat-card-subtitle"),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"mat-card-content",1)(10,"mat-nav-list",2),e.nVh(11,Xf,18,30),e.j41(12,"mat-list-item",3),e.bIt("click",function(){return a.setLinkType(a.TranslationLinks.LinkCopyFrom)}),e.j41(13,"mat-icon",4),e.EFF(14,"translate"),e.k0s(),e.j41(15,"span",5),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"span"),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"mat-list-item",6),e.bIt("click",function(){return a.setLinkType(a.TranslationLinks.LinkReadOnly)}),e.j41(22,"mat-icon",4),e.EFF(23,"link"),e.k0s(),e.j41(24,"span",5),e.EFF(25),e.nI1(26,"translate"),e.k0s(),e.j41(27,"span",7),e.EFF(28),e.nI1(29,"translate"),e.k0s()(),e.j41(30,"mat-list-item",3),e.bIt("click",function(){return a.setLinkType(a.TranslationLinks.LinkReadWrite)}),e.j41(31,"mat-icon",4),e.EFF(32,"share"),e.k0s(),e.j41(33,"span",5),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.j41(36,"span"),e.EFF(37),e.nI1(38,"translate"),e.k0s()()(),e.nVh(39,Qf,11,6,"div"),e.k0s(),e.j41(40,"mat-card-actions",8)(41,"button",9),e.bIt("click",function(){return a.run()}),e.EFF(42,"OK"),e.k0s()()()),2&n&&(e.R7$(3),e.SpI(" ",e.i5U(5,16,"LangMenu.Dialog.Title",e.eq3(39,$f,e.bMT(4,14,a.dialogData.config.fieldName||"LangMenu.AllFields")))," "),e.R7$(4),e.SpI(" ",e.bMT(8,19,"LangMenu.Dialog.Intro")," "),e.R7$(4),e.vxM(a.isPrimaryLang()?-1:11),e.R7$(),e.Y8G("ngClass",e.eq3(41,Kn,a.translationStateSignal().linkType===a.TranslationLinks.LinkCopyFrom)),e.R7$(4),e.JRh(e.i5U(17,21,"LangMenu.Dialog."+a.I18nKeys.FromOther+".Title",e.eq3(43,un,a.language().primary))),e.R7$(3),e.JRh(e.i5U(20,24,"LangMenu.Dialog."+a.I18nKeys.FromOther+".Body",e.eq3(45,un,a.language().primary))),e.R7$(2),e.Y8G("ngClass",e.eq3(47,Kn,a.translationStateSignal().linkType===a.TranslationLinks.LinkReadOnly)),e.R7$(4),e.JRh(e.i5U(26,27,"LangMenu.Dialog."+a.I18nKeys.LinkReadOnly+".Title",e.eq3(49,un,a.language().primary))),e.R7$(3),e.JRh(e.i5U(29,30,"LangMenu.Dialog."+a.I18nKeys.LinkReadOnly+".Body",e.eq3(51,un,a.language().primary))),e.R7$(2),e.Y8G("ngClass",e.eq3(53,Kn,a.translationStateSignal().linkType===a.TranslationLinks.LinkReadWrite)),e.R7$(4),e.JRh(e.i5U(35,33,"LangMenu.Dialog."+a.I18nKeys.LinkShared+".Title",e.eq3(55,un,a.language().primary))),e.R7$(3),e.JRh(e.i5U(38,36,"LangMenu.Dialog."+a.I18nKeys.LinkShared+".Body",e.eq3(57,un,a.language().primary))),e.R7$(2),e.vxM(a.translationInfo().showLanguageSelection?39:-1),e.R7$(2),e.Y8G("disabled",a.translationInfo().submitDisabled))},dependencies:[dt.Hu,dt.RN,dt.YY,dt.m2,dt.MM,dt.Lc,dt.dh,Si,pr,mr,ki,Ti,Ga,$n,Ue.YU,j.m_,j.An,Pt.Hl,Pt.$z,ue.h,ue.D9],styles:[".translate-menu-dialog-card[_ngcontent-%COMP%]{max-height:99vh;overflow-y:scroll}.translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]{padding:0}.translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]:last-child{padding-bottom:16px}.translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]   .eav-list-item__focus[_ngcontent-%COMP%]{background:#0000000a}.translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]   .list-item__disabled[_ngcontent-%COMP%]{cursor:default;color:#1d273d3d;background:#fff}.translate-menu-dialog-card[_ngcontent-%COMP%]   .eav-card-content__no-padding[_ngcontent-%COMP%]   .list-item__disabled[_ngcontent-%COMP%]   .list-item-icon__disabled[_ngcontent-%COMP%]{color:#1d273d3d}"]})}}return i})();var Kf=g(66177);const Zf=i=>({"eav-shared-languages--disabled":i}),Jf=i=>({languages:i}),qf=i=>({hidden:i}),$i=i=>({"eav-menu-item-selected":i});function eg(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.dontTranslate())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("ngClass",e.eq3(4,$i,t.translationState().linkType===t.TranslationLinks.DontTranslate)),e.R7$(),e.SpI(" ",e.bMT(2,2,"LangMenu.NoTranslate")," ")}}function tg(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.translate())}),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"button",8),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.openAutoTranslateMenuDialog(a.translationState()))}),e.EFF(4),e.nI1(5,"translate"),e.nrm(6,"app-feature-icon-indicator",9),e.k0s(),e.nVh(7,eg,3,6,"button",10),e.j41(8,"button",8),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.openTranslateMenuDialog(a.translationState()))}),e.EFF(9),e.nI1(10,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(14,$i,t.translationState().linkType===t.TranslationLinks.Translate)),e.R7$(),e.SpI(" ",e.bMT(2,8,"LangMenu.Translate")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(16,$i,t.translationState().linkType===t.TranslationLinks.Translate)),e.R7$(),e.SpI(" ",e.bMT(5,10,"LangMenu.AutoTranslate")," "),e.R7$(2),e.Y8G("featureNameId","EditUiTranslateWithGoogle"),e.R7$(),e.vxM(t.language().current!==t.language().primary?7:-1),e.R7$(),e.Y8G("ngClass",e.eq3(18,$i,""!==t.translationState().language)),e.R7$(),e.SpI(" ",e.bMT(10,12,"LangMenu.Link")," ")}}function ng(i,o){if(1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",4)(6,"button",5)(7,"mat-icon",6),e.EFF(8,"translate"),e.k0s()()()(),e.j41(9,"mat-menu",null,0),e.DNE(11,tg,11,20,"ng-template",7),e.k0s()()),2&i){const t=e.sdS(10),n=e.XpG();e.R7$(),e.Y8G("ngClass",n.translationStateClass()),e.R7$(),e.Y8G("ngClass",e.eq3(10,Zf,n.disabled())),e.R7$(),e.SpI(" ",n.translationState().infoLabel?e.i5U(4,7,n.translationState().infoLabel,e.eq3(12,Jf,n.translationState().infoMessage)):""," "),e.R7$(2),e.Y8G("tippyDisabled",!n.disableTranslateButtonSignal()),e.R7$(),e.Y8G("matMenuTriggerFor",t)("disabled",n.disableTranslateButtonSignal())("ngClass",e.eq3(14,qf,n.hideTranslateButton()))}}let Kr=(()=>{class i{#e;#t;constructor(t,n,a,s){this.matDialog=t,this.viewContainerRef=n,this.formConfig=a,this.fieldsTranslate=s,this.hideTranslateButton=(0,Y.hFB)(),this.canTranslate=(0,Y.hFB)(),this.#e=(0,r.WQX)(it.W),this.#t=(0,r.WQX)(Vt),this.TranslationLinks=Nt.J,this.translationState=this.#e.translationState,this.language=this.formConfig.language,this.disabled=(0,Q.bo)("disabled",()=>this.#e.ui().disabled),this.translationStateClass=(0,Q.bo)("translationStateClass",()=>Kf.x.getTranslationStateClass(this.translationState().linkType)),this.disableTranslateButtonSignal=(0,Q.bo)("disableTranslateButtonSignal",()=>this.#t.readOnly().isReadOnly||this.#e.settings().DisableTranslation)}translate(){this.fieldsTranslate.unlock(this.#e.name)}dontTranslate(){this.fieldsTranslate.lock(this.#e.name)}openTranslateMenuDialog(t){this.#n(t,Qr)}openAutoTranslateMenuDialog(t){this.#e.settings().DisableAutoTranslation?this.matDialog.open(Hr,{autoFocus:!1,data:{isAutoTranslateAll:!1},viewContainerRef:this.viewContainerRef,width:"350px"}):this.#n(t,Yr)}#n(t,n){const a={config:this.#e.config,translationState:{language:t.language,linkType:t.linkType}};this.matDialog.open(n,{autoFocus:!1,data:a,viewContainerRef:this.viewContainerRef,width:"400px"})}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(tt.bZ),e.rXU(e.c1b),e.rXU(y.S),e.rXU(En))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-translate-menu"]],inputs:{hideTranslateButton:[1,"hideTranslateButton"],canTranslate:[1,"canTranslate"]},decls:1,vars:1,consts:[["menu","matMenu"],[1,"my-flex-main"],[1,"my-flex-inside","eav-shared-languages-container",3,"ngClass"],[1,"eav-shared-languages","mat-caption",3,"ngClass"],["tippyTranslate","LangMenu.NotTranslatable","tippyPlacement","top",3,"tippyDisabled"],["mat-icon-button","",1,"eav-translate-icon-button",3,"matMenuTriggerFor","disabled","ngClass"],[1,"eav-translate-icon"],["matMenuContent",""],["mat-menu-item","",3,"click","ngClass"],[3,"featureNameId"],["mat-menu-item","",3,"ngClass"]],template:function(n,a){1&n&&e.nVh(0,ng,12,16,"div",1),2&n&&e.vxM(a.canTranslate()?0:-1)},dependencies:[Ue.YU,Pt.Hl,qt.iY,Ft.Cn,Ft.kk,Ft.fb,Ft.z8,Ft.Cp,j.m_,j.An,$r.s,ue.h,At.e,ue.D9],styles:[".eav-menu-item-selected[_ngcontent-%COMP%]{background:#0000000a}.localization-lock-open[_ngcontent-%COMP%]{color:green}.localization-missing-default-lang-value[_ngcontent-%COMP%]{color:red}.localization-translate[_ngcontent-%COMP%]{color:green}.localization-link-read-only[_ngcontent-%COMP%], .localization-link-read-write[_ngcontent-%COMP%]{color:#00f}.eav-shared-languages[_ngcontent-%COMP%]{position:relative;left:-6px;top:-12px;padding:0 4px 0 6px;white-space:nowrap;font-size:12px;overflow:hidden;text-overflow:ellipsis;max-height:16px;cursor:default;color:#1d273d70}.eav-shared-languages--disabled[_ngcontent-%COMP%]{color:#1d273d3d}.eav-translate-icon-button[_ngcontent-%COMP%]{scale:.8;position:relative;top:-8px}.eav-translate-icon-button.hidden[_ngcontent-%COMP%]{visibility:hidden}.my-flex-main[_ngcontent-%COMP%]{display:flex;place-content:center end}.my-flex-inside[_ngcontent-%COMP%]{display:flex;align-items:center}"]})}}return i})();const ig=["fieldComponent"],ag=i=>({"language-wrap__field-short":i}),sg=i=>({"language-wrap__translate--hidden":i});let rg=(()=>{class i{#e;#t;constructor(t,n){this.editRoutingService=t,this.formsStateService=n,this.#e=(0,r.WQX)(y.S),this.#t=(0,r.WQX)(it.W),this.language=this.#e.language,this.userLanguageSvc=(0,r.WQX)(d.L),this.translatePrimaryLanguage=(0,r.vPA)(!1),this.hasMultipleLanguages=(0,Ne.EW)(()=>this.#e.languages.list.length>1),this.canTranslate=(0,Ne.EW)(()=>this.hasMultipleLanguages()&&!this.#t.settings().DisableTranslation&&(this.language().current!==this.language().primary||this.translatePrimaryLanguage())),this.hideTranslateButton=!0,this.translatePrimaryLanguage.set(this.userLanguageSvc.primaryTranslatableEnabled())}translate(){if(this.formsStateService.readOnly().isReadOnly)return;const t=this.#e.language();if(t.current===t.primary||!this.#t.ui().disabled)return;const n=this.#t.config;this.editRoutingService.isExpanded(n.index,n.entityGuid)||this.translateMenu.translate()}toggleTranslateButtonVisibility(t){this.hideTranslateButton=t}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(gt),e.rXU(Vt))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-localization-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(ig,7,e.c1b)(Kr,5),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first),e.mGM(s=e.lsd())&&(a.translateMenu=s.first)}},decls:5,vars:8,consts:[["fieldComponent",""],[1,"language-wrap",3,"mouseenter","mouseleave"],[1,"language-wrap__field",3,"dblclick","ngClass"],[1,"language-wrap__translate",3,"hideTranslateButton","canTranslate","ngClass"]],template:function(n,a){if(1&n){const s=e.RV6();e.j41(0,"div",1),e.bIt("mouseenter",function(){return r.eBV(s),r.Njj(a.toggleTranslateButtonVisibility(!1))})("mouseleave",function(){return r.eBV(s),r.Njj(a.toggleTranslateButtonVisibility(!0))}),e.j41(1,"div",2),e.bIt("dblclick",function(){return r.eBV(s),r.Njj(a.translate())}),e.eu8(2,null,0),e.k0s(),e.nrm(4,"app-translate-menu",3),e.k0s()}2&n&&(e.R7$(),e.Y8G("ngClass",e.eq3(4,ag,a.canTranslate())),e.R7$(3),e.Y8G("hideTranslateButton",a.hideTranslateButton)("canTranslate",a.canTranslate())("ngClass",e.eq3(6,sg,!a.canTranslate())))},dependencies:[Ue.YU,Kr],styles:[".language-wrap[_ngcontent-%COMP%]{display:flex;padding-left:16px;padding-right:16px}.language-wrap__field[_ngcontent-%COMP%]{width:100%;height:100%}.language-wrap__field-short[_ngcontent-%COMP%]{width:calc(100% - 48px)}.language-wrap__translate[_ngcontent-%COMP%]{width:48px;position:relative}.language-wrap__translate--hidden[_ngcontent-%COMP%]{width:0}"]})}}return i})();const og=["fieldComponent"],lg=["previewComponent"];let cg=(()=>{class i{constructor(t){this.formsStateService=t,this.log=(0,f.Tq)({PickerExpandableWrapperComponent:i}),this.fieldState=(0,r.WQX)(it.W),this.config=this.fieldState.config,this.basics=this.fieldState.basics}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(Vt))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-picker-expandable-wrapper"]],viewQuery:function(n,a){if(1&n&&e.GBs(og,7,e.c1b)(lg,7,e.c1b),2&n){let s;e.mGM(s=e.lsd())&&(a.fieldComponent=s.first),e.mGM(s=e.lsd())&&(a.previewComponent=s.first)}},decls:8,vars:0,consts:[["fieldComponent",""],["previewComponent",""],[1,"eav-layout-grid"],[1,"eav-layout-grid__inner"],[1,"eav-card","eav-layout-grid__cell--span-12","u-border-radius","shadow-bottom-z-1"]],template:function(n,a){1&n&&(e.j41(0,"app-dialog-popup")(1,"div",2)(2,"div",3)(3,"mat-card",4),e.eu8(4,null,0),e.k0s()()()(),e.eu8(6,null,1))},dependencies:[dt.Hu,dt.RN,Gi],styles:[".eav-card[_ngcontent-%COMP%]{padding:16px}  .eav-layout-grid{padding:16px}  .eav-layout-grid .mat-mdc-card{height:calc(100% - 32px)}"],data:{animation:[Qn]}})}}return i})();const Hi={[kt_AdamWrapper]:hm,[kt_CollapsibleWrapper]:Ym,[kt_DropzoneWrapper]:xm,[kt_PickerExpandableWrapper]:cg,[kt_ExpandableWrapper]:Nm,[kt_HiddenWrapper]:Km,[kt_FeatureWarningWrapper]:$m,[kt_HyperlinkDefaultExpandableWrapper]:hf,[kt_HyperlinkLibraryExpandableWrapper]:kf,[kt_LocalizationWrapper]:rg,[Ye.u.BooleanDefault]:ca,[Ye.u.BooleanTristate]:da,[Ye.u.CustomDefault]:si,[Ye.u.CustomJsonEditor]:ri,[Ye.u.DateTimeDefault]:ga,[Ye.u.EmptyDefault]:$l,[Ye.u.EmptyMessage]:va,[Ye.u.EntityContentBlocks]:Ap,[Ye.u.EntityDefault]:yr,[Ye.u.EntityQuery]:jp,[Ye.u.ExternalWebComponent]:Qp,[Ye.u.HyperlinkDefault]:Qa,[Ye.u.HyperlinkLibrary]:Ka,[Ye.u.NumberDefault]:Za,[Ye.u.NumberDropdown]:Ja,[Ye.u.StringDefault]:qa,[Ye.u.StringDropdown]:Ih,[Ye.u.StringDropdownQuery]:kh,[Ye.u.StringFontIconPicker]:es,[Ye.u.StringJson]:ri,[Ye.u.StringTemplatePicker]:ts,[Ye.u.StringUrlPath]:ns,[Ye.u.EntityPicker]:Vp,[Ye.u.StringPicker]:Oh,[Ye.u.NumberPicker]:gh},dg={all:!1,setConfig:!0,refresh:!0};class as{constructor(){this.log=(0,f.Tq)({AdamConnector:as},dg),this.#e=(0,r.vPA)(null),this.#t=(0,Q.bo)("items",()=>this.#e()?.items()??[]),this.#n=0,this.isDisabled=(0,Ne.EW)(()=>this.#e()?.adamConfig()?.disabled??!0)}get browser(){const o=this.#e();if(o)return o;throw new Error("Browser not set")}setBrowser(o){this.#e.set(o)}#e;#t;get items(){return this.#t}toggle(o,t){this.log.fn("toggle",{usePortalRoot:o,showImagesOnly:t}),this.browser.toggle(o,t)}#n;setConfig(o){const t=this.log.fnIf("setConfig",{config:o,count:this.#n});if(this.#n++,this.#n>10)throw new Error("Infinite loop");this.browser.setConfig(o),t.end()}getConfig(){return this.browser.adamConfig()}onItemClick(){}onItemUpload(){}refresh(){this.log.fnIf("refresh"),this.browser.fetchItems()}}class ug{static fromSettings(o){const t=o?.Name??"loading...",n=o?.Notes??"",a=o?.valueRequired??!0,p=(o?.Visible??!0)&&!o?.VisibleDisabled,x=o?.Collapsed??!1;return{label:t,notes:n,placeholder:o?.Placeholder??"loading...",required:a,labelWithRequired:t+(a?" *":""),visible:p,collapsed:x}}}const pg={getInjectors:!0,fields:[...ge.z]};let mg=(()=>{class i{#e;#t;#n;#i;#a;#s;constructor(){this.log=(0,f.Tq)({FieldStateInjectorFactory:i},pg),this.#e=(0,r.WQX)(r.zZn),this.#t=(0,r.WQX)(r.uvJ),this.#n=(0,r.WQX)(hn),this.#i=(0,r.WQX)(Ce),this.#a=(0,r.WQX)(v.D),this.#s=(0,r.WQX)(gt)}getInjectors(t,n){const a=this.log.fnIf("getInjectors",{fieldConfig:t,inputType:n}),s=t.fieldName,c=this.#n.settings[s],p=(0,Q.bo)("basics",()=>ug.fromSettings(c())),x=this.#i.formGroup,O=x.controls[s],G=this.#r(s,O,n,c),ie=(()=>{if(!O)return(0,Q.KX)("value-change-empty",null);const Je=O.valueChanges.pipe((0,Qe.A)(rt=>rt));return(0,et.ot)(Je,{injector:this.#e,initialValue:O.value})})(),ae=new it.W(s,t,x,c,p,G,ie,this.#n.translationState[s],this.#s.isExpandedSignal(t.index,t.entityGuid,this.#e),this.#n.pickerData[s]??null,this.#a,this.#e),ke=this.#o(ae);return a.r(ke)}#r(t,n,a,s){const c=this.log.fnCond(this.log.specs.fields.includes(t),"buildControlChangeSignal",{fieldName:t,inputType:a});if(n){const p=(0,et.br)(s,{injector:this.#e});return(0,r.N4e)(this.#e,()=>{const x=n.valueChanges.pipe((0,Qe.A)(G=>({dirty:n.dirty,invalid:n.invalid,touched:n.touched,disabled:n.disabled})),(0,A.M)(G=>!1)),O=(0,Tn.z)([x,p.pipe((0,Qe.A)(G=>G.uiDisabled))]).pipe((0,A.M)(([G,ie])=>c.a("controlStateChange on control",{control:n,disabled:ie})),(0,Qe.A)(([G,ie])=>new Wn.a(n,t,ie)),(0,A.M)(G=>c.a("controlStatusChangeSignal",{result:G})));return(0,et.ot)(O,{initialValue:new Wn.a(n,t,s().uiDisabled)})})}return oe.Q.isEmpty(a.inputType)?null:(console.error(`Error: can't create signal for control of ${t} (not found). Input type is not empty, it's ${a.inputType}.`),(0,Q.KX)("control-status-empty",Wn.a.emptyControl()))}#o(t){const n=[{provide:it.W,useValue:t}];return{injector:r.zZn.create({providers:n,parent:this.#e,name:"FieldInjector"}),environmentInjector:(0,e.Ol2)(n,this.#t,"FieldEnvInjector")}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const fg={all:!1,createWrapper:!0,readComponentType:!1};let gg=(()=>{class i{#e;#t;#n;#i;#a;#s;constructor(t,n){this.formConfigService=t,this.el=n,this.#t=(0,r.WQX)(e.sFG),this.#n=!1,this.log=(0,f.Tq)({EditControlsBuilderDirective:i},fg),this.#i=(0,le.d)(mg),this.#a=(0,r.WQX)(e.c1b),this.#s=(0,r.WQX)(hn),this.#r=[],this.#o=(0,r.vPA)(!1),(0,r.QZP)(()=>{const a=this.#o(),s=this.formConfigService.controlsCreated();this.log.a("createControls - effect",{onInitReady:a,controlsCreated:s}),a&&s&&(this.log.a("createControls RUN"),(0,r.O8t)(()=>this.#l()))})}#r;#o;ngOnInit(){this.#o.set(!0),this.#e=parseInt(this.el.nativeElement.getAttribute("data-index"))}#l(){this.#a.clear();let t=this.#a;const n=this.#s.allProps();for(const[a,s]of Object.entries(n)){const c={...s.constants,fieldName:a,focused$:new on.t(!1),adam:new as};this.#r.push(c);const p=s.constants.inputTypeSpecs.inputType;oe.Q.isGroupStart(p)?t=this.#d(this.#a,s,c):oe.Q.isGroupEnd(p)?t=this.#a:this.#c(t,s,c)}}ngOnDestroy(){for(const t of this.#r)t.focused$.complete()}#d(t,n,a){const s=this.#i.getInjectors(a,n.constants.inputTypeSpecs);let c=new ss(null,t,s);return n.buildWrappers&&(c=this.#f(c,n.buildWrappers)),c.contentsRef}#c(t,n,a){const s=n.constants.inputTypeSpecs;this.log.a("createComponent",{inputSpecs:s});const c=this.#i.getInjectors(a,s);let p=new ss(null,t,c);n.buildWrappers&&(p=this.#f(p,n.buildWrappers));const O=this.#m(s.isExternal?Ye.u.ExternalWebComponent:s.inputType),G=Reflect.getMetadata(ks,O);G?.wrappers&&(p=this.#f(p,G.wrappers));const ie=this.#h(O,p.contentsRef,p.injectors),ae=p.wrapperRef?.instance?.previewComponent;if(null!=ae){const ke=this.#m(s.inputType);this.log.a("createComponent - add preview",{previewType:ke}),this.#h(ke,ae,p.injectors)}!1===this.#n&&0===this.#e&&!0!==n.settings.noAutoFocus&&(this.#p(ie),this.#n=!0)}#p(t){setTimeout(()=>{const n=t.location.nativeElement.querySelector("input");n&&(this.#t.setAttribute(n,"autofocus","true"),n?.focus())},250)}#h(t,n,a){const s=n.createComponent(t,a);return t===Hi["number-default"]&&s.location.nativeElement.querySelector('input[type="number"]')?.addEventListener("keydown",p=>{"e"===p.key?.toLowerCase()&&p.preventDefault()}),s}#f(t,n){return n.reduce((a,s)=>this.#u(a,s),t)}#u(t,n){this.log.fnIf("createWrapper",{wrapperName:n});const s=this.#m(n),c=t.contentsRef.createComponent(s,t.injectors);return new ss(c,c.instance.fieldComponent,null)}#m(t){const n=this.log.fnIf("readComponentType",{selector:t,InputComponents:Hi}),a=Hi[t];if(null!=a)return n.r(a,"found component type");console.error(`Missing component class for: ${t}. \nThis indicates that the field is not registered correctly, so the JS won't run. \nIt could also mean that the JS runs, but doesn't correctly create the custom tag. \nWill show an info-error instead.`);const s=t.split("-")[0];return n.r(Hi[`${s}-default`]||si,"defaulting to fallback component")}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(Ce),e.rXU(e.aKT))}}static{this.\u0275dir=e.FsC({type:i,selectors:[["","appEditControlsBuilder",""]]})}}return i})();class ss{constructor(o,t,n){this.wrapperRef=o,this.contentsRef=t,this.injectors=n}}const vg={all:!0,watchToRefreshOnVersionsClosed:!0};let yg=(()=>{class i{constructor(){this.log=(0,f.Tq)({EditForceReloadService:i},vg),this.#e=(0,r.WQX)(tt.CP),this.#t=(0,le.d)(at.c)}#e;#t;ngOnDestroy(){this.#n?.unsubscribe()}#n;watchToRefreshOnVersionsClosed(){const t=this.log.fnIf("watchToRefreshOnVersionsClosed");this.#n=this.#t.childDialogClosed$().pipe((0,C.T)(()=>this.#t.state()),(0,Ke.p)(n=>!0===n?.refreshEdit)).subscribe(n=>{const a=this.log.fnIf("watchToRefreshOnVersionsClosed",null,"refreshEdit");t.a("version closed, refreshing edit dialog");const s=this.#t.snapshot.params,c=ce.b.newUrlIfCurrentContainsOldUrl(this.#t.route,`edit/${s.items}`,`edit/refresh/${s.items}`);if(null==c)return a.end("no change");this.#e.close({navigateUrl:c}),a.end(`routed away to :${c}`)}),t.end()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var Zr=g(63966);function Cg(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.unlockAll())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"LangMenu.TranslateAll")))}function wg(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.lockAll())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"LangMenu.NoTranslateAll")))}function Tg(i,o){if(1&i){const t=e.RV6();e.nVh(0,Cg,3,3,"button",5),e.j41(1,"button",6),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.autoTranslateMany())}),e.EFF(2),e.nI1(3,"translate"),e.nrm(4,"app-feature-icon-indicator",7),e.k0s(),e.nVh(5,wg,3,3,"button",5),e.j41(6,"button",6),e.bIt("click",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.openTranslateMenuDialogMany())}),e.EFF(7),e.nI1(8,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.vxM(t.isPrimaryLang()?-1:0),e.R7$(2),e.SpI(" ",e.bMT(3,5,"LangMenu.AutoTranslateAll")," "),e.R7$(2),e.Y8G("featureNameId","EditUiTranslateWithGoogle"),e.R7$(),e.vxM(t.isPrimaryLang()?-1:5),e.R7$(2),e.SpI(" ",e.bMT(8,7,"LangMenu.Link")," ")}}function kg(i,o){if(1&i&&(e.j41(0,"div")(1,"button",1)(2,"span",2),e.EFF(3),e.nI1(4,"translate"),e.nI1(5,"uppercase"),e.j41(6,"mat-icon",3),e.EFF(7,"translate"),e.k0s()()(),e.j41(8,"mat-menu",null,0),e.DNE(10,Tg,9,9,"ng-template",4),e.k0s()()),2&i){const t=e.sdS(9),n=e.XpG();e.R7$(),e.Y8G("disabled",n.readOnly().isReadOnly||n.slotIsEmpty())("matMenuTriggerFor",t),e.R7$(2),e.SpI(" ",e.bMT(5,5,e.bMT(4,3,"LangMenu.Translate"))," \xa0\xa0 ")}}let Sg=(()=>{class i{constructor(t,n,a,s,c,p){this.matDialog=t,this.itemService=n,this.eavService=a,this.fieldTranslateSvc=s,this.viewContainerRef=c,this.fieldSettingsSvc=p,this.entityGuid=(0,Y.hFB)(),this.formsStateService=(0,r.WQX)(Vt),this.readOnly=this.formsStateService.readOnly,this.userLanguageSvc=(0,r.WQX)(d.L),this.translationState=(0,r.vPA)({infoLabel:"",infoMessage:"",linkType:Nt.J.Translate,language:""}),this.language=this.eavService.language,this.translatePrimaryLanguage=(0,r.vPA)(!1),this.isPrimaryLang=(0,Ne.EW)(()=>this.language().current===this.language().primary),this.#e=(0,Ne.EW)(()=>this.fieldTranslateSvc.findAutoTranslatableFields()),this.slotIsEmpty=(0,Ne.EW)(()=>this.itemService.slotIsEmpty(this.entityGuid())(),bn.bool),this.translatePrimaryLanguage.set(this.userLanguageSvc.primaryTranslatableEnabled())}setTranslatePrimary(t){this.translatePrimaryLanguage.set(!!t),this.userLanguageSvc.savePrimaryTranslatable(!!t)}#e;unlockAll(){this.fieldTranslateSvc.toggleUnlockOnAll(!0)}lockAll(){this.fieldTranslateSvc.toggleUnlockOnAll(!1)}autoTranslateMany(){const t=this.#e();if(0===t.length)return this.fieldTranslateSvc.showMessageNoTranslatableFields(!0);const n=this.fieldSettingsSvc.translationState[t[0]]();if(t.length>0){const s={config:{entityGuid:this.entityGuid()},translationState:{language:n.language,linkType:n.linkType},isTranslateMany:!0,translatableFields:t};this.matDialog.open(Yr,{autoFocus:!1,data:s,viewContainerRef:this.viewContainerRef,width:"400px"})}else this.matDialog.open(Hr,{autoFocus:!1,data:{isAutoTranslateAll:!0},viewContainerRef:this.viewContainerRef,width:"400px"})}openTranslateMenuDialogMany(){const n=Object.keys(this.fieldSettingsSvc.translationState).filter(c=>!!this.fieldSettingsSvc.translationState[c]?.());if(0===n.length)return this.fieldTranslateSvc.showMessageNoTranslatableFields(!0);const a=this.fieldSettingsSvc.translationState[n[0]](),s={entityGuid:this.entityGuid()};this.#t(s,a,n)}#t(t,n,a){this.matDialog.open(Qr,{autoFocus:!1,data:{config:t,translationState:{language:n.language,linkType:n.linkType},isTranslateMany:!0,translatableFields:a},viewContainerRef:this.viewContainerRef,width:"400px"})}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(tt.bZ),e.rXU(I.b),e.rXU(y.S),e.rXU(En),e.rXU(e.c1b),e.rXU(hn))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-entity-translate-menu"]],inputs:{entityGuid:[1,"entityGuid"]},decls:1,vars:1,consts:[["menu","matMenu"],["mat-button","",3,"disabled","matMenuTriggerFor"],[1,"my-flex-inside"],[1,"eav-translate-icon"],["matMenuContent",""],["mat-menu-item",""],["mat-menu-item","",3,"click"],[3,"featureNameId"]],template:function(n,a){1&n&&e.nVh(0,kg,11,7,"div"),2&n&&e.vxM(!a.isPrimaryLang()||a.translatePrimaryLanguage()?0:-1)},dependencies:[Pt.Hl,Pt.$z,Ft.Cn,Ft.kk,Ft.fb,Ft.z8,Ft.Cp,j.m_,j.An,$r.s,ue.h,Ue.Pc,ue.D9],styles:[".eav-translate-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px;line-height:20px}.my-flex-main[_ngcontent-%COMP%]{display:flex;place-content:center end}.my-flex-inside[_ngcontent-%COMP%]{display:flex;align-items:center}"]})}}return i})();const Eg=["noteTrigger"],Ig=["noteTemplate"];function Mg(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",18,1),e.bIt("pointerenter",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.noteProps().note?s.toggleNote(a):null)})("pointerleave",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.noteProps().note?s.toggleNote(a):null)})("click",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.noteProps().note?s.toggleNote(a):s.editNote())}),e.j41(2,"mat-icon"),e.EFF(3),e.k0s()()}if(2&i){const t=e.XpG();e.HbH(e.VkB("eav-note ",t.noteProps().triggerClass)),e.Y8G("disabled",t.readOnly())("tippyTranslate",t.noteProps().tooltip)("tippyDisabled",t.readOnly())("disableRipple",t.noteProps().itemNotSaved),e.R7$(3),e.JRh(t.noteProps().iconName)}}function Pg(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",19),e.bIt("pointerdown",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.noteTouched=!0)}),e.j41(1,"div",20)(2,"button",21),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.editNote(a.noteProps().note))}),e.j41(3,"mat-icon"),e.EFF(4,"edit"),e.k0s()(),e.j41(5,"button",21),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.deleteNote(a.noteProps().note))}),e.j41(6,"mat-icon"),e.EFF(7,"delete"),e.k0s()(),e.j41(8,"button",21),e.bIt("click",function(a){r.eBV(t);const s=e.XpG();return r.Njj(s.toggleNote(a))}),e.j41(9,"mat-icon"),e.EFF(10,"close"),e.k0s()()(),e.nrm(11,"div",22),e.nI1(12,"safeHtml"),e.k0s()}if(2&i){const t=e.XpG();e.HbH(e.VkB("eav-note-wrapper ",t.noteProps().noteClass)),e.R7$(11),e.Y8G("innerHtml",e.bMT(12,4,t.noteProps().noteHtml),e.npT)}}function Dg(i,o){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",23),e.bIt("change",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.toggleSlotIsEmpty())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("checked",!t.ctSettings().slotIsEmpty)("disabled",t.readOnly()||t.languages().current!==t.languages().primary)("tippyTranslate",t.ctSettings().slotIsEmpty?"ItemCard.SlotUsedFalse":"ItemCard.SlotUsedTrue")("tippyDisabled",t.readOnly()||t.languages().current!==t.languages().primary)}}function Fg(i,o){if(1&i&&(e.j41(0,"div",9)(1,"mat-icon"),e.EFF(2,"local_offer"),e.k0s()()),2&i){const t=e.XpG();e.Y8G("tippy",t.itemForTooltip())}}function Og(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.openHistory())}),e.j41(1,"mat-icon"),e.EFF(2,"history"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.readOnly())}}function Ag(i,o){if(1&i&&(e.j41(0,"div",15),e.nrm(1,"div",25),e.nI1(2,"safeHtml"),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("innerHtml",e.bMT(2,1,t.ctSettings().editInstructions),e.npT)}}const Rg={all:!1,fetchNote:!0,noteFormData:!0};let Lg=(()=>{class i{#e;#t;#n;#i;#a;#s;#r;#o;#l;#d;#c;constructor(t,n,a,s){this.itemSvc=t,this.editRoutingSvc=n,this.matDialog=a,this.viewContainerRef=s,this.log=(0,f.Tq)({EntityFormComponent:i},Rg),this.entityGuid=(0,Y.hFB)(),this.index=(0,Y.hFB)(),this.formConfig=(0,r.WQX)(y.S),this.#e=(0,r.WQX)(hn),this.#t=(0,r.WQX)(Vt),this.#n=(0,r.WQX)(ue.c$),this.#i=(0,le.d)(yg),this.collapse=!1,this.noteTouched=!1,this.#a=(0,r.WQX)(v.D),this.#s=this.#a.isEnabled[Ot.T.EditUiShowNotes],this.#r=this.#a.isEnabled[Ot.T.EditUiShowMetadataFor],this.languages=this.formConfig.language,this.ctSettings=(0,Q.bo)("ctSettings",()=>{const c=this.#e.contentTypeSettings(),p=c.Features,x=function xg(i){return i.split("\n").reduce((t,n)=>{if(!n)return t;const a=n.split("=");return t[a[0]]="true"===a[1],t},{})}(c.Features);return{itemTitle:c._itemTitle,slotCanBeEmpty:c._slotCanBeEmpty,slotIsEmpty:c._slotIsEmpty,editInstructions:c.EditInstructions,features:p,showNotes:x[Ot.T.EditUiShowNotes]??this.#s(),showMdFor:x[Ot.T.EditUiShowMetadataFor]??this.#r()}}),this.readOnly=(0,Q.bo)("readOnly",()=>this.#t.readOnly().isReadOnly),this.itemForTooltip=(0,Q.bo)("itemForTooltip",()=>function bg(i,o){if(i)return o.instant("Form.Buttons.Metadata.Tip")+`\nTarget: ${i.Target}\nTargetType: ${i.TargetType}`+(i.Number?`\nNumber: ${i.Number}`:"")+(i.String?`\nString: ${i.String}`:"")+(i.Guid?`\nGuid: ${i.Guid}`:"")+(i.Title?`\nTitle: ${i.Title}`:"")}(this.itemSvc.getItemFor(this.entityGuid()),this.#n)),this.#o=(0,Q.KX)("retriggerNoteProps",!1),this.noteProps=(0,Q.bo)("noteProps",()=>{this.#o();const c=this.entityGuid(),p=this.formConfig.language();return function _g(i,o,t){const n={note:i,tooltip:t?"Form.Buttons.Note.ItemNotSaved":"Form.Buttons.Note.Add",triggerClass:"no-note "+(t?"item-not-saved":""),iconName:"sticky_note_2",noteClass:"",noteHtml:void 0,itemNotSaved:t};if(!i)return n;n.tooltip=void 0;const a=new ce.bT(o);n.noteHtml=a.getBestValue(i.Attributes.Note);const s=a.getBestValue(i.Attributes.NoteType);return"note"===s?n.triggerClass="has-note":"warning"===s&&(n.triggerClass="has-warning",n.iconName="warning",n.noteClass="warning"),n}(this.itemSvc.getItemNote(c),p,0===this.itemSvc.get(c).Entity.Id)}),this.#l=(0,le.d)(He),this.#d=(0,le.d)(pe.Tr),this.#c=(0,le.d)(at.c)}ngAfterViewChecked(){this.noteRef?._containerInstance?._changeDetectorRef?.detectChanges()}ngOnInit(){this.#c.doOnDialogClosed(()=>this.#p())}ngOnDestroy(){this.noteRef?.close()}toggleCollapse(){this.collapse=!this.collapse}toggleSlotIsEmpty(){const t=this.entityGuid(),n=this.itemSvc.getItemHeader(t),a={...n,IsEmpty:!n.IsEmpty},s=this.log.fn("toggleSlotIsEmpty",{oldHeader:n,newHeader:a});this.itemSvc.updater.updateItemHeader(t,a),s.end()}openHistory(){const t=this.itemSvc.get(this.entityGuid());this.#i.watchToRefreshOnVersionsClosed(),this.#c.navRelative([`versions/${t.Entity.Id}`])}toggleNote(t){const n=this.noteRef?.getState()===tt.CF.OPEN;"pointerenter"===t.type&&0==this.noteTouched?this.openNote():"pointerleave"===t.type&&0==this.noteTouched?this.noteRef?.close():"click"===t.type&&n&&(0==this.noteTouched?this.noteTouched=!0:(this.noteRef?.close(),this.noteTouched=!1))}openNote(){const t=this.noteTriggerRef.nativeElement.getBoundingClientRect();this.noteRef=this.matDialog.open(this.noteTemplateRef,{autoFocus:!1,hasBackdrop:!1,disableClose:!0,restoreFocus:!1,closeOnNavigation:!1,position:{top:`${t.bottom}px`,left:t.left-200+"px"},viewContainerRef:this.viewContainerRef,panelClass:"note-dialog"})}editNote(t){const n=this.entityGuid(),a=this.log.fn("editNote",{note:t});if(0===this.itemSvc.get(n).Entity.Id)return void a.end("Item not saved yet, ID = 0");const c={items:[null==t?se.H.newMetadata(n,_n.YX.contentTypes.notes,_n.YX.metadata.entity,!0):se.H.editId(t.Id)]};this.editRoutingSvc.open(null,null,c)}deleteNote(t){const n=this.formConfig.language(),a=new Ae.b(n).getBestValue(t.Attributes.Title);confirm(this.#n.instant("Data.Delete.Question",{title:a,id:t.Id}))&&this.#d.delete(this.formConfig.config.appId,_n.YX.contentTypes.notes,t.Id,!1).subscribe(()=>{this.noteRef?.close(),this.#p()})}#p(){const t=this.entityGuid(),n=this.itemSvc.get(t),a=this.log.fnIf("fetchNote",{entityGuid:t,item:n,id:n.Entity.Id});if(0===n.Entity.Id)return a.end("no change");const s=[se.H.editId(n.Entity.Id)];this.#l.fetchFormData(JSON.stringify(s)).subscribe(c=>{const p=this.log.fn("noteFormData",{formData:c});if(!this.itemSvc.get(t))return p.end(`Item ${t} not found in service, was probably flushed for reload`);const x=c.Items.map(O=>Zr.U.dtoToEav(O));this.itemSvc.updater.updateItemMetadata(t,x[0].Entity.Metadata),this.#o.set(!0),p.end("updated note")}),a.end("started note-loading")}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(I.b),e.rXU(gt),e.rXU(tt.bZ),e.rXU(e.c1b))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-edit-entity-form"]],viewQuery:function(n,a){if(1&n&&e.GBs(Eg,5,e.aKT)(Ig,5),2&n){let s;e.mGM(s=e.lsd())&&(a.noteTriggerRef=s.first),e.mGM(s=e.lsd())&&(a.noteTemplateRef=s.first)}},inputs:{entityGuid:[1,"entityGuid"],index:[1,"index"]},decls:21,vars:13,consts:[["noteTemplate",""],["noteTrigger",""],["appearance","raised",1,"eav-card-group-parent","shadow-bottom-z-1"],[1,"my-title-bar-outer","eav-card-header-group-parent"],[1,"my-title-bar","eav-card-title-group","mat-headline-4",3,"click"],[1,"title-arrow"],[1,"title"],["type","button","mat-icon-button","",3,"class","disabled","tippyTranslate","tippyDisabled","disableRipple"],[1,"empty-slot-toggle",3,"checked","disabled","tippyTranslate","tippyDisabled"],[1,"icon-box",3,"tippy"],["type","button","mat-icon-button","","tippyTranslate","Form.Buttons.History.Tip",3,"disabled"],[3,"entityGuid"],[1,"eav-card-content-group-parent"],[1,"eav-layout-grid"],[1,"eav-layout-grid__inner"],["align","start",1,"eav-layout-grid__cell--span-12","mat-body-2"],[1,"eav-layout-grid__cell--span-12"],["appEditControlsBuilder",""],["type","button","mat-icon-button","",3,"pointerenter","pointerleave","click","disabled","tippyTranslate","tippyDisabled","disableRipple"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragBoundary","body",3,"pointerdown"],["cdkDragHandle","",1,"eav-note-actions"],["mat-icon-button","","appMousedownStopPropagation","",3,"click"],[1,"eav-note-content","eav-hide-scrollbar",3,"innerHtml"],[1,"empty-slot-toggle",3,"change","checked","disabled","tippyTranslate","tippyDisabled"],["type","button","mat-icon-button","","tippyTranslate","Form.Buttons.History.Tip",3,"click","disabled"],["appChangeAnchorTarget","",1,"description",3,"innerHtml"]],template:function(n,a){if(1&n){const s=e.RV6();e.j41(0,"mat-card",2)(1,"div",3)(2,"div",4),e.bIt("click",function(){return r.eBV(s),r.Njj(a.toggleCollapse())}),e.j41(3,"mat-icon",5),e.EFF(4),e.k0s(),e.j41(5,"span",6),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.nVh(8,Mg,4,8,"button",7),e.DNE(9,Pg,13,6,"ng-template",null,0,e.C5r),e.nVh(11,Dg,1,4,"mat-slide-toggle",8),e.nVh(12,Fg,3,1,"div",9),e.nVh(13,Og,3,1,"button",10),e.nrm(14,"app-entity-translate-menu",11),e.k0s(),e.j41(15,"mat-card-content",12)(16,"div",13)(17,"div",14),e.nVh(18,Ag,3,3,"div",15),e.j41(19,"div",16),e.nrm(20,"div",17),e.k0s()()()()()}2&n&&(e.R7$(4),e.SpI(" ",a.collapse?"keyboard_arrow_down":"keyboard_arrow_up"," "),e.R7$(2),e.SpI(" ",a.ctSettings().itemTitle||e.bMT(7,11,"ItemCard.DefaultTitle")," "),e.R7$(2),e.vxM(a.ctSettings().showNotes?8:-1),e.R7$(3),e.vxM(a.ctSettings().slotCanBeEmpty?11:-1),e.R7$(),e.vxM(a.ctSettings().showMdFor&&a.itemForTooltip()?12:-1),e.R7$(),e.vxM(a.formConfig.config.enableHistory?13:-1),e.R7$(),e.Y8G("entityGuid",a.entityGuid()),e.R7$(),e.xc7("display",a.collapse?"none":"block"),e.R7$(3),e.vxM(a.ctSettings().editInstructions?18:-1),e.R7$(2),e.BMQ("data-index",a.index()))},dependencies:[dt.Hu,dt.RN,dt.m2,j.m_,j.An,Pt.Hl,qt.iY,Nn.T1,Nn.Fb,In.mV,In.sG,Sg,la,gg,ue.h,At.e,el.z,ue.D9,Mn.$],styles:[".eav-card-group-parent[_ngcontent-%COMP%]{padding:0;margin:0;border-radius:8px}@media(max-width:600px){.eav-card-group-parent[_ngcontent-%COMP%]{border-radius:4px}}.eav-card-header-group-parent[_ngcontent-%COMP%]{padding:24px 32px;border-radius:8px;height:68px}.eav-card-header-group-parent[_ngcontent-%COMP%]   .title-arrow[_ngcontent-%COMP%]{margin-right:6px}.eav-card-header-group-parent[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.eav-card-header-group-parent[_ngcontent-%COMP%]:not(:hover)   .no-note[_ngcontent-%COMP%]{display:none}.eav-card-content-group-parent[_ngcontent-%COMP%]{border-radius:8px;padding:0}.eav-card-content-group-parent[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;padding-left:16px;padding-right:16px;margin-top:-14px;margin-bottom:14px}.eav-card-title-group[_ngcontent-%COMP%]{margin:0;cursor:pointer;line-height:20px;color:#002753}.mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px!important}.eav-layout-grid[_ngcontent-%COMP%]{padding:0 16px 16px}.empty-slot-toggle[_ngcontent-%COMP%]{padding-top:0}.icon-box[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.eav-note.item-not-saved[_ngcontent-%COMP%]{cursor:default}.eav-note[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#d9ca1f}.eav-note.has-warning[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#e90000}.eav-note-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:16px;width:300px;min-height:300px;max-height:400px;box-sizing:border-box;overflow:hidden;background-color:#fff79f}.eav-note-wrapper.warning[_ngcontent-%COMP%]{background-color:#ffdede}.eav-note-content[_ngcontent-%COMP%]{flex-shrink:1;overflow:auto}.eav-note-actions[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:flex-end;cursor:move;margin-top:-16px;margin-left:-16px;margin-right:-16px;padding-top:8px;padding-left:8px;padding-right:8px}.my-title-bar-outer[_ngcontent-%COMP%]{display:flex;align-items:center;box-sizing:border-box}.my-title-bar[_ngcontent-%COMP%]{display:flex;flex:auto}"]})}}return i})(),Vg=(()=>{class i{constructor(t,n,a,s){this.fieldsSettingsSvc=t,this.adamCacheSvc=n,this.formBuilder=a,this.entityFormConfigSvc=s,this.log=(0,f.Tq)({FormFieldsBuilderService:i},null)}createFields(t,n,a){const s=this.log.fn("createFields"),c=a.filter(({inputType:p,hasControl:x})=>!oe.Q.isEmpty(p)&&!x);this.log.a(`create missing controls ${c.length} of ${a.length}`,{fieldsForNgForm:c});for(const p of c){const{name:x,props:O,inputType:G,value:ie}=p;let ae=ie;if(G===Ye.u.StringWysiwyg&&ae){const jt=xe.a.singleton().get(Ye.u.StringWysiwyg),Mt=this.adamCacheSvc.getAdamSnapshot(t,x);p.value=ae=jt.processValueOnLoad(ae,Mt)}const ke=O.settings.uiDisabled,Je=this.fieldsSettingsSvc,rt=new So(x,G,Je.settings[x],Je.fieldProps[x],()=>Je.pickerData),st=xs.getValidators(rt,G),It=this.formBuilder.control({disabled:ke,value:ae},st);n.addControl(x,It)}this.entityFormConfigSvc.controlsCreated.set(!0),s.end()}static{this.\u0275fac=function(n){return new(n||i)(r.KVO(hn),r.KVO(F),r.KVO(ne.ze),r.KVO(Ce))}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const zg={keepFieldsAndStateInSync:!0};let Ng=(()=>{class i extends ft.V{constructor(){super(),this.log=(0,f.Tq)({FormFieldsSyncService:i},zg)}keepFieldsAndStateInSync(t,n){const a=this.log.fnIf("keepFieldsAndStateInSync");this.subscriptions.add(n.subscribe(s=>{const c=s.filter(G=>G.hasControl);a.a(`sync values for max ${c.length} controls`);const p=t.getRawValue(),x={};for(const{name:G,value:ie}of c)x[G]=ie;const O=na.$.getItemValuesChanges(p,x);null!=O?(a.a(`patching form as it changed (${Object.keys(O).length}`,{changes:O,oldValues:p,newValues:x}),t.patchValue(O)):a.a("no changes detected",{oldValues:p,newValues:x}),a.a('sync "disabled" state');for(const{control:G,props:ie}of c)Wn.a.disable(G,ie.settings.uiDisabled);a.a("run validators");for(const{control:G}of c)G.updateValueAndValidity()})),a.end()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();const jg={all:!0,getFieldsToProcess:!1,ngOnInit:!1,fieldsToProcess$:!0};let Jr=(()=>{class i{#e;#t;#n;#i;#a;#s;#r;#o;constructor(){this.entityGuid=(0,Y.hFB)(),this.index=(0,Y.hFB)(),this.log=(0,f.Tq)({EntityFormBuilderComponent:i},jg),this.#e=(0,r.WQX)(Ce),this.#t=(0,r.WQX)(xt.f),this.#n=(0,r.WQX)(En),this.#i=(0,r.WQX)(hn),this.#a=(0,r.WQX)(r.zZn),this.#s=(0,le.d)(Vg),this.#r=(0,le.d)(Ng),this.#o=(0,le.d)(qo),this.form=this.#e.formGroup}ngOnInit(){const t=this.entityGuid(),n=this.log.fnIf("ngOnInit",{entityGuid:t});this.#i.init(t),this.#t.itemSettingsServices[t]=this.#i,this.#n.init(t);const a=this.#l(t);a.pipe((0,we.s)(1)).subscribe(s=>this.#s.createFields(t,this.form,s)),this.#r.keepFieldsAndStateInSync(this.form,a),this.#o.setupSync(t),n.end()}ngOnDestroy(){this.#i.disableForCleanUp()}#l(t){const n=this.log.fnIf("getFieldsToProcess",null,t),a=this.form,s=this.#i.allProps,p=(0,et.br)(s,{injector:this.#a}).pipe((0,Ke.p)(x=>null!=x&&Object.keys(x).length>0),(0,C.T)(x=>{const O=Object.entries(x).map(([G,ie])=>{const ae=a.controls.hasOwnProperty(G);return{name:G,props:ie,inputType:ie.constants.inputTypeSpecs.inputType,value:ie.value,hasControl:ae,control:ae?a.controls[G]:null}});return this.log.aIf("fieldsToProcess$",{entityGuid:t,fields:O}),O}));return n.rSilent(p)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-edit-entity-form-builder"]],inputs:{entityGuid:[1,"entityGuid"],index:[1,"index"]},features:[e.Jv_([hn,En,Ce])],decls:2,vars:3,consts:[[1,"dynamic-form",3,"formGroup"],[3,"entityGuid","index"]],template:function(n,a){1&n&&(e.j41(0,"form",0),e.nrm(1,"app-edit-entity-form",1),e.k0s()),2&n&&(e.Y8G("formGroup",a.form),e.R7$(),e.Y8G("entityGuid",a.entityGuid())("index",a.index()))},dependencies:[ne.YN,ne.qT,ne.cb,ne.X1,ne.j4,Lg],styles:[".dynamic-form[_ngcontent-%COMP%]{margin-bottom:8px}"]})}}return i})();var Bg=g(94065),Gg=g(24630),Ug=g(45943);const $g=i=>({feature:i,showGuid:!1,showStatus:!0,showClose:!1}),Hg=(i,o)=>o.nameId;function Wg(i,o){1&i&&e.nrm(0,"app-feature-details-dialog",1)(1,"br"),2&i&&e.Y8G("specs",e.eq3(1,$g,o.$implicit))}const Xg={...f.W_,unlicensedFeatures:!1};let Yg=(()=>{class i{#e;#t;constructor(){this.log=(0,f.Tq)({FeaturesUsedButUnlicensedComponent:i},Xg),this.#e=(0,r.WQX)(v.D),this.#t=(0,le.d)(Ug.N),this.features=this.#t.getFeatureDetails(this.#e.unlicensedFeatures()),this.log.fnIf("constructor")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-features-used-but-unlicensed-dialog"]],decls:18,vars:0,consts:[["href","https://patrons.2sxc.org/","target","_blank"],[3,"specs"]],template:function(n,a){1&n&&(e.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3,"Preview of Features which are not Licensed"),e.k0s()(),e.j41(4,"mat-card-content")(5,"p"),e.EFF(6," 99% of all features in 2sxc are free. But some very advanced features are only for patrons (supporters) and enterprise customers. You are permitted to try these features, but to really use them you must get a license. "),e.k0s(),e.j41(7,"p"),e.EFF(8," This message should remind you \u{1f609} of that. "),e.nrm(9,"br"),e.EFF(10," Please contact your account manager to get them licensed, or visit the "),e.j41(11,"a",0),e.EFF(12,"patrons"),e.k0s(),e.EFF(13," to learn more. "),e.k0s(),e.j41(14,"p"),e.EFF(15,"The following features are currently in preview:"),e.k0s(),e.Z7z(16,Wg,2,3,null,null,Hg),e.k0s()()),2&n&&(e.R7$(16),e.Dyx(a.features()))},dependencies:[dt.Hu,dt.RN,dt.m2,dt.MM,dt.dh,Pt.Hl,j.m_,ue.h,Gg.O],encapsulation:2})}}return i})();const rs=i=>({"eav-list-item__focus":i});let Kg=(()=>{class i{constructor(t,n,a){this.dialog=t,this.publishStatusService=n,this.formConfig=a,this.PublishModes=Le,this.publishMode=this.publishStatusService.getPublishMode(this.formConfig.config.formId),this.options=this.formConfig.config.versioningOptions,this.dialog.keydownEvents().subscribe(s=>{(0,Ln.JY)(s)&&s.preventDefault()})}setPublishMode(t){this.publishStatusService.setPublishMode(t,this.formConfig.config.formId,this.formConfig),this.closeDialog()}closeDialog(){this.dialog.close()}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(tt.CP),e.rXU(ye),e.rXU(y.S))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-publish-status-dialog"]],decls:36,vars:36,consts:[[1,"eav-card-content__no-padding"],["toggle",""],["lines","3",3,"click","disabled","ngClass"],["matListItemIcon",""],["matListItemTitle",""],["matListItemIcon","","svgIcon","draft-branch"]],template:function(n,a){1&n&&(e.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"mat-card-subtitle"),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"mat-card-content",0)(9,"mat-nav-list",1)(10,"mat-list-item",2),e.bIt("click",function(){return a.setPublishMode(a.PublishModes.Show)}),e.j41(11,"mat-icon",3),e.EFF(12,"visibility"),e.k0s(),e.j41(13,"span",4),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.j41(16,"span"),e.EFF(17),e.nI1(18,"translate"),e.k0s()(),e.j41(19,"mat-list-item",2),e.bIt("click",function(){return a.setPublishMode(a.PublishModes.Hide)}),e.j41(20,"mat-icon",3),e.EFF(21,"visibility_off"),e.k0s(),e.j41(22,"span",4),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.j41(25,"span"),e.EFF(26),e.nI1(27,"translate"),e.k0s()(),e.j41(28,"mat-list-item",2),e.bIt("click",function(){return a.setPublishMode(a.PublishModes.Branch)}),e.nrm(29,"mat-icon",5),e.j41(30,"span",4),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"span"),e.EFF(34),e.nI1(35,"translate"),e.k0s()()()()()),2&n&&(e.R7$(3),e.JRh(e.bMT(4,14,"PublishStatus.Dialog.Title")),e.R7$(3),e.JRh(e.bMT(7,16,"PublishStatus.Dialog.Intro")),e.R7$(4),e.Y8G("disabled",!0!==a.options[a.PublishModes.Show])("ngClass",e.eq3(30,rs,a.publishMode()===a.PublishModes.Show)),e.R7$(4),e.JRh(e.bMT(15,18,"PublishStatus.Dialog.Show.Title")),e.R7$(3),e.JRh(e.bMT(18,20,"PublishStatus.Dialog.Show.Body")),e.R7$(2),e.Y8G("disabled",!0!==a.options[a.PublishModes.Hide])("ngClass",e.eq3(32,rs,a.publishMode()===a.PublishModes.Hide)),e.R7$(4),e.JRh(e.bMT(24,22,"PublishStatus.Dialog.Hide.Title")),e.R7$(3),e.JRh(e.bMT(27,24,"PublishStatus.Dialog.Hide.Body")),e.R7$(2),e.Y8G("disabled",!0!==a.options[a.PublishModes.Branch])("ngClass",e.eq3(34,rs,a.publishMode()===a.PublishModes.Branch)),e.R7$(3),e.JRh(e.bMT(32,26,"PublishStatus.Dialog.Branch.Title")),e.R7$(3),e.JRh(e.bMT(35,28,"PublishStatus.Dialog.Branch.Body")))},dependencies:[dt.Hu,dt.RN,dt.m2,dt.MM,dt.Lc,dt.dh,Si,mr,ki,Ti,$n,Ue.YU,j.m_,j.An,ue.h,ue.D9],styles:[".eav-card-content__no-padding[_ngcontent-%COMP%]{padding:0}.eav-card-content__no-padding[_ngcontent-%COMP%]:last-child{padding-bottom:16px}.eav-card-content__no-padding[_ngcontent-%COMP%]   .eav-list-item__focus[_ngcontent-%COMP%]{background:#0000000a}"]})}}return i})();const Zg=()=>[g.e("projects_eav-ui_src_app_edit_dialog_header_language-switcher_language-switcher_ts").then(g.bind(g,66674)).then(i=>i.LanguageSwitcherComponent)];function Jg(i,o){if(1&i&&e.nrm(0,"app-language-switcher",9),2&i){const t=e.XpG(2);e.Y8G("disabled",t.disabled())}}function qg(i,o){1&i&&(e.PeT(0,Jg,1,1),e.nv$(1,0,Zg),e.g25())}function ev(i,o){if(1&i&&(e.j41(0,"mat-icon",4),e.EFF(1," lock "),e.k0s()),2&i){const t=e.XpG();e.Y8G("tippyTranslate","General.ReadOnlyHint."+t.readOnly().reason)}}function tv(i,o){1&i&&(e.j41(0,"mat-icon",5),e.EFF(1," file_copy "),e.k0s())}function nv(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){r.eBV(t);const a=e.XpG();return r.Njj(a.openUnlicensedDialog())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"License-EditUi-Warning-Label")," \u{1f6e1}\ufe0f "))}let iv=(()=>{class i{#e;#t;constructor(t,n,a,s,c){this.matDialog=t,this.viewContainerRef=n,this.languageService=a,this.publishStatusService=s,this.formConfig=c,this.disabled=(0,Y.hFB)(),this.closeDialog=(0,Y.CGW)(),this.#e=(0,r.WQX)(Vt),this.#t=(0,r.WQX)(v.D),this.config=this.formConfig.config,this.readOnly=this.#e.readOnly,this.publishMode=this.publishStatusService.getPublishMode(this.formConfig.config.formId),this.hasLanguages=(0,Ne.EW)(()=>this.languageService.getAllSignal()().length>0),this.showLicenseWarning=this.#t.hasUnlicensedFeatures}close(){this.closeDialog.emit()}openPublishStatusDialog(){this.matDialog.open(Kg,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"350px"})}openUnlicensedDialog(){!function Qg(i,o){i.open(Yg,{autoFocus:!1,viewContainerRef:o,width:"600px"})}(this.matDialog,this.viewContainerRef)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(tt.bZ),e.rXU(e.c1b),e.rXU(w.g),e.rXU(ye),e.rXU(y.S))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-edit-dialog-header"]],inputs:{disabled:[1,"disabled"]},outputs:{closeDialog:"closeDialog"},decls:17,vars:16,consts:[[1,"eav-header"],["mat-icon-button","",1,"eav-exit-button",3,"click","tippyTranslate"],[1,"eav-icon"],[1,"eav-languages"],[1,"eav-hint-icon",3,"tippyTranslate"],["tippyTranslate","General.CopyHint",1,"eav-hint-icon"],["mat-button","",1,"eav-publish-button",3,"click","disabled","tippyTranslate"],[1,"eav-publish-mode"],["mat-button","","tippyTranslate","License-EditUi-Warning-Tooltip"],[3,"disabled"],["mat-button","","tippyTranslate","License-EditUi-Warning-Tooltip",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"mat-card",0)(1,"button",1),e.bIt("click",function(){return a.close()}),e.j41(2,"mat-icon",2),e.EFF(3),e.k0s()(),e.j41(4,"div",3),e.nVh(5,qg,3,0),e.k0s(),e.nVh(6,ev,2,1,"mat-icon",4),e.nVh(7,tv,2,0,"mat-icon",5),e.j41(8,"button",6),e.bIt("click",function(){return a.openPublishStatusDialog()}),e.j41(9,"span",7),e.EFF(10),e.nI1(11,"translate"),e.j41(12,"b"),e.EFF(13),e.nI1(14,"translate"),e.nI1(15,"uppercase"),e.k0s()()(),e.nVh(16,nv,3,3,"button",8),e.k0s()),2&n&&(e.R7$(),e.Y8G("tippyTranslate","Form.Buttons."+(a.config.isParentDialog?"Exit":"Return")+".Tip"),e.R7$(2),e.JRh(a.config.isParentDialog?"clear":"arrow_back"),e.R7$(2),e.vxM(a.hasLanguages()?5:-1),e.R7$(),e.vxM(a.readOnly().isReadOnly?6:-1),e.R7$(),e.vxM(a.config.isCopy?7:-1),e.R7$(),e.Y8G("disabled",a.readOnly().isReadOnly)("tippyTranslate","PublishStatus."+a.publishMode()+".Tip"),e.R7$(2),e.SpI(" ",e.bMT(11,10,"PublishStatus.Label")," "),e.R7$(3),e.JRh(e.bMT(15,14,e.bMT(14,12,"PublishStatus."+a.publishMode()))),e.R7$(3),e.vxM(a.showLicenseWarning()?16:-1))},dependencies:[dt.Hu,dt.RN,Pt.Hl,Pt.$z,qt.iY,j.m_,j.An,ue.h,At.e,Ue.Pc,ue.D9],styles:[".eav-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:0 16px;border-bottom-left-radius:0;border-bottom-right-radius:0;height:var(--edit-dialog-header-height);z-index:1;box-shadow:0 2px 5px #00000042}@media(max-width:600px){.eav-header[_ngcontent-%COMP%]{border-radius:0}}.eav-header[_ngcontent-%COMP%]   .eav-exit-button[_ngcontent-%COMP%]   .eav-icon[_ngcontent-%COMP%]{scale:.6666666667}.eav-header[_ngcontent-%COMP%]   .eav-languages[_ngcontent-%COMP%]{margin-left:12px;flex-grow:1;overflow:hidden;height:100%}.eav-header[_ngcontent-%COMP%]   .eav-hint-icon[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;font-size:20px;width:20px;height:20px;line-height:20px!important}.eav-header[_ngcontent-%COMP%]   .eav-publish-button[_ngcontent-%COMP%]{margin-right:-6px;padding:0 10px;height:30px;line-height:32px;flex-shrink:0}.eav-header[_ngcontent-%COMP%]   .eav-publish-mode[_ngcontent-%COMP%]{font-weight:400}"]})}}return i})();class av{static eavToDto(o){const t={};for(const n of o.Values)t[n.dimensions.map(s=>s.dimCode).join()]=n.value;return t}}class sv{static eavToDto(o){const t={};for(const[n,a]of Object.entries(o)){const s=a.Type;null==t[s]&&(t[s]={}),t[s][n]=av.eavToDto(a)}return t}}class os{static eavToDto(o){const t=sv.eavToDto(o.Attributes),n=this.eavToDtoMany(o.Metadata);return{Attributes:t,Guid:o.Guid,Id:o.Id,Owner:o.Owner,Type:o.Type,Version:o.Version,For:o.For,Metadata:n}}static eavToDtoMany(o){return null==o?null:o.map(n=>os.eavToDto(n))}}class rv{static bundleToDto(o){return{Entity:os.eavToDto(o.Entity),Header:o.Header}}}var ov=g(58275);function lv(i,o){if(1&i&&(e.rj2(0,"div")(1,"span"),e.EFF(2),e.rj2(3,"span"),e.EFF(4),e.nI1(5,"translate"),e.eux()()()),2&i){const t=o.$implicit;e.R7$(2),e.JRh(t.field),e.R7$(2),e.SpI(": ",e.bMT(5,2,t.message))}}let cv=(()=>{class i{constructor(t){this.snackBarData=t}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(Se.ht))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-snack-bar-save-errors"]],decls:7,vars:3,consts:[[1,"save-errors-container"]],template:function(n,a){1&n&&(e.rj2(0,"div",0)(1,"div"),e.EFF(2),e.nI1(3,"translate"),e.eux(),e.Hgh(4,"br"),e.Z7z(5,lv,6,4,"div",null,e.fX1),e.eux()),2&n&&(e.R7$(2),e.JRh(e.bMT(3,1,"Errors.SaveErrors")),e.R7$(3),e.Dyx(a.snackBarData.fieldErrors))},dependencies:[ue.h,ue.D9],styles:[".save-errors-container[_ngcontent-%COMP%]{font-size:14px}"]})}}return i})();const dv={saveAll:!0,"#saveThroughJs":!0,"#saveDefault":!0};let uv=(()=>{class i{constructor(){this.log=(0,f.Tq)({EditDialogSaveService:i},dv),this.#e=(0,r.WQX)(y.S),this.itemService=(0,r.WQX)(I.b),this.contentTypeService=(0,r.WQX)(N.n),this.formsStateService=(0,r.WQX)(Vt),this.publishStatusService=(0,r.WQX)(ye),this.translate=(0,r.WQX)(ue.c$),this.snackBar=(0,r.WQX)(Se.UG),this.#t=(0,le.d)(He),this.entityFormStateService=(0,le.d)(Ce),this.disabled=(0,Ne.EW)(()=>this.entityFormStateService.isSaving()||this.formsStateService.saveButtonDisabled())}#e;#t;saveAll(t,n){const a=this.log.fnIf("saveAll",{close:n});if(this.entityFormStateService.isSaving.set(!0),!1===this.#e.config.save.mode)return t.dialog.close(),a.end("no-save mode; closed without saving");if(!this.formsStateService.formsAreValid())return this.#a(t),a.end("save skipped - form invalid");const s=this.itemService.get(t.formBuilderRefs.get(0).entityGuid()),c="js"===s.Header.ClientData?.save;return console.log("2dm - EditDialogSaveService - saveAll",{saveMode:c,clientData:s.Header.ClientData}),c?(this.#n(t,n),a.end("will be saved through js")):(this.#i(t,n),a.end("saved default"))}#n(t,n){const a=this.log.fnIf("#saveThroughJs",{close:n}),c={data:this.#s(t.formBuilderRefs,p=>Zr.U.eavToObj(p))[0]};return t.dialog.close(c),a.end("returning wrapped data")}#i(t,n){const a=this.log.fnIf("#saveDefault",{close:n}),s=this.#s(t.formBuilderRefs,x=>rv.bundleToDto(x)),c=this.publishStatusService.get(this.#e.config.formId),p={Items:s,IsPublished:c.IsPublished,DraftShouldBranch:c.DraftShouldBranch};a.a("SAVE FORM DATA:",{saveFormData:p}),this.snackBar.open(this.translate.instant("Message.Saving"),null,{duration:2e3}),this.#t.saveFormData(p,this.#e.config.partOfPage).subscribe({next:x=>{a.a("SAVED!, result:",{result:x,close:n}),this.itemService.updater.updateItemId(x),this.snackBar.open(this.translate.instant("Message.Saved"),null,{duration:2e3}),this.formsStateService.formsAreDirty.set(!1),n&&t.closeDialog(void 0,x),setTimeout(()=>this.entityFormStateService.isSaving.set(!1),500)},error:x=>{a.a("SAVE FAILED:",x),this.snackBar.open("Error",null,{duration:2e3}),this.entityFormStateService.isSaving.set(!1)}})}#a(t){if(this.entityFormStateService.isSaving.set(!1),null==t.formBuilderRefs)return;const n=[];t.formBuilderRefs.forEach(s=>{s.form.invalid&&n.push(ov.n.validateForm(s.form))});const a=[];n.forEach(s=>{Object.keys(s).forEach(c=>{a.push({field:c,message:s[c]})})}),this.snackBar.openFromComponent(cv,{data:{fieldErrors:a},duration:5e3})}#s(t,n){return t.map(a=>{const s=this.itemService.get(a.entityGuid());if(!this.formsStateService.getFormValid(s.Entity.Guid))return null;const p=Object.keys(s.Entity.Attributes).length>0,O=this.contentTypeService.getContentTypeOfItem(s).Metadata.some(G=>"SaveEmptyDecorator"===G.Type.Name);return p||O?n(s):null}).filter(a=>null!=a)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})();var pv=g(5057),hv=g(3140);const eo="previous",mv=["move-next","move-previous"];let fv=(()=>{class i extends hv.J{constructor(t,n,a){super(),this.elementRef=t,this.languageService=n,this.formConfig=a,this.log=(0,f.Tq)({FormSlideDirective:i})}ngOnInit(){const t=this.log.fn("ngOnInit"),n=this.languageService.getAll(),a=this.elementRef.nativeElement;this.subscriptions.add((0,Oa.h)(this.formConfig.language$.pipe((0,C.T)(s=>s.current),(0,Qe.J)(s=>s),(0,pv.J)(),(0,C.T)(([s,c])=>{t.a("toggle",{previousLang:s,currentLang:c});const p=n.findIndex(G=>G.NameId===s),x=n.findIndex(G=>G.NameId===c),O=p>x?eo:"next";return t.a("slide",{prevIndex:p,currentIndex:x,slide:O}),O})),(0,Be.R)(a,"animationend").pipe((0,Ke.p)(s=>void 0!==mv.find(c=>s.animationName.endsWith(c))),(0,C.T)(()=>""),(0,de.c)(0))).subscribe(s=>{const c=a.classList;""===s?(t.a("stop-slide"),c.remove("next"),c.remove(eo)):(t.a(`start-slide to '${s}'`),c.add(s))}))}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(e.aKT),e.rXU(w.g),e.rXU(y.S))}}static{this.\u0275dir=e.FsC({type:i,selectors:[["","appFormSlide",""]],features:[e.Vt3]})}}return i})(),gv=(()=>{class i{constructor(t,n){this.snackRef=t,this.snackBarData=n}saveChanges(t){this.snackBarData.save=t,this.snackRef.dismissWithAction()}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(Se.TQ),e.rXU(Se.ht))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-snack-bar-unsaved-changes"]],decls:12,vars:13,consts:[[1,"error-message"],[1,"my-flex-right"],["mat-button","","color","primary",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"span",0),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"div",1)(4,"button",2),e.bIt("click",function(){return a.saveChanges(!1)}),e.EFF(5),e.nI1(6,"translate"),e.nI1(7,"uppercase"),e.k0s(),e.j41(8,"button",2),e.bIt("click",function(){return a.saveChanges(!0)}),e.EFF(9),e.nI1(10,"translate"),e.nI1(11,"uppercase"),e.k0s()()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,3,"Errors.UnsavedChanges"),"\n"),e.R7$(4),e.SpI(" ",e.bMT(7,7,e.bMT(6,5,"General.Buttons.NotSave"))," "),e.R7$(4),e.SpI(" ",e.bMT(11,11,e.bMT(10,9,"General.Buttons.Save"))," "))},dependencies:[Pt.Hl,Pt.$z,ue.h,Ue.Pc,ue.D9],styles:[".error-message[_ngcontent-%COMP%]{font-size:14px}.my-flex-right[_ngcontent-%COMP%]{display:flex;justify-content:end}"]})}}return i})();const vv=()=>[tt.E7,g.e("projects_eav-ui_src_app_edit_dialog_footer_edit-dialog-footer_ts").then(g.bind(g,8158)).then(i=>i.EditDialogFooterComponent)],yv=i=>({"u-display-none":i}),bv=(i,o,t,n)=>({"debug-enabled":i,"debug-info-is-open":o,"footer-xl":t,"hide-header-height-fix":n}),_v=(i,o)=>o.Entity.Guid;function xv(i,o){if(1&i&&(e.j41(0,"div"),e.nrm(1,"app-edit-entity-form-builder",8),e.k0s()),2&i){const t=o.$implicit,n=o.$index;e.R7$(),e.Y8G("entityGuid",t.Entity.Guid)("index",n)}}function Cv(i,o){if(1&i&&(e.j41(0,"div",7),e.Z7z(1,xv,2,2,"div",null,_v),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Dyx(t.items())}}function wv(i,o){if(1&i){const t=e.RV6();e.j41(0,"app-save-close-button",11),e.bIt("action",function(){r.eBV(t);const a=e.XpG(2);return r.Njj(a.saveAll(!0))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("label",t.canSave?"Form.Buttons.SaveAndClose":"Form.Buttons.Done")("ngClass",t.saveSvc.disabled()?"appear-disabled":"")}}function Tv(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){r.eBV(t);const a=e.XpG(3);return r.Njj(a.saveAll(!1))}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"mat-icon"),e.EFF(5,"save"),e.k0s()()}if(2&i){const t=e.XpG(3);e.Y8G("ngClass",t.saveSvc.disabled()?"appear-disabled":""),e.R7$(2),e.SpI(" ",e.bMT(3,2,"Form.Buttons.Save")," ")}}function kv(i,o){1&i&&e.DNE(0,Tv,6,4,"ng-template",10)}function Sv(i,o){if(1&i&&(e.j41(0,"extended-fab-speed-dial"),e.DNE(1,wv,1,2,"ng-template",9),e.nVh(2,kv,1,0,null,10),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.vxM(t.canSave?2:-1)}}function Ev(i,o){if(1&i&&e.nrm(0,"app-edit-dialog-footer",13),2&i){const t=e.XpG(2);e.xc7("display",t.footerShow()?"block":"none")}}function Iv(i,o){1&i&&(e.PeT(0,Ev,1,2),e.nv$(1,0,vv),e.g25())}const Mv={all:!1,constructor:!0,saveAll:!0};let Pv=(()=>{class i extends ut.${#e;#t;#n;#i;constructor(t,n,a,s,c,p,x,O,G){super(),this.contentTypeItemService=t,this.inputTypeService=n,this.languageService=a,this.languageStore=s,this.snackBar=c,this.editRoutingService=p,this.adamCacheService=x,this.linkCacheService=O,this.formulaDesignerService=G,this.log=(0,f.Tq)({EditDialogMainComponent:i},Mv),this.#e=(0,r.WQX)(K.B),this.#t=(0,r.WQX)(y.S),this.canSave=this.#t.config.save.mode,this.#n=(0,r.WQX)($e.i).part(Bg.K),this.footerSize=(0,Ne.EW)(()=>this.#n.data().size),this.#i=(0,le.d)(me),this.viewInitiated=(0,r.vPA)(!1),this.itemService=(0,r.WQX)(I.b),this.contentTypeService=(0,r.WQX)(N.n),this.formsStateService=(0,r.WQX)(Vt),this.publishStatusService=(0,r.WQX)(ye),this.translate=(0,r.WQX)(ue.c$),this.dialog=(0,r.WQX)(tt.CP),this.saveSvc=(0,le.d)(uv),this.items=this.itemService.getManySignal(this.#t.config.itemGuids),this.formsValid=this.formsStateService.formsValidTemp,this.hideHeader=this.languageStore.getHideHeaderSignal(this.#t.config.formId),this.footerShow=(0,Ne.EW)(()=>this.#e.isDebug()?(this.#a=!0,!0):!this.#a&&this.#n.data().pinned),this.footerShowOnceOrMore=(0,Q.tD)(ke=>ke||this.footerShow(),!1),this.#a=!1,this.delayForm=(0,et.ot)((0,te.of)(!1).pipe((0,de.c)(0),(0,fe.Z)(!0))),this.log.fnIf("constructor"),this.dialog.disableClose=!0;const ae=this.#n;null==ae.data().pinned&&ae.set("pinned",this.#t.config.dialogContext.User?.IsSystemAdmin??!1),(0,r.QZP)(()=>{const ke=this.formsStateService.triggerTrySaveAndMaybeClose();ke.tryToSave&&(0,r.O8t)(()=>this.saveAll(ke.close))})}#a;ngOnInit(){this.#r(),this.editRoutingService.init(),this.#i.load(),this.formulaDesignerService.cache.init(),this.#s()}ngAfterViewInit(){setTimeout(()=>this.viewInitiated.set(!0))}ngOnDestroy(){this.languageStore.remove(this.#t.config.formId),this.publishStatusService.remove(this.#t.config.formId),this.#t.config.isParentDialog&&(this.languageStore.clearCache(),this.languageService.clearCache(),this.itemService.clearCache(),this.inputTypeService.clearCache(),this.contentTypeItemService.clearCache(),this.contentTypeService.clearCache(),this.publishStatusService.clearCache(),this.adamCacheService.clearCache(),this.linkCacheService.clearCache()),super.ngOnDestroy()}closeDialog(t,n){return t?this.dialog.close(this.#t.config.createMode?n:void 0):!this.formsStateService.readOnly().isReadOnly&&this.formsStateService.formsAreDirty()?this.#o():void this.dialog.close(this.#t.config.createMode?n:void 0)}saveAll(t){const n=this.log.fnIf("saveAll",{close:t});return this.saveSvc.saveAll(this,t),n.end("saved default")}#s(){this.subscriptions.add((0,Be.R)(window,"beforeunload").subscribe(t=>{this.formsStateService.readOnly().isReadOnly||!this.formsStateService.formsAreDirty()||(t.preventDefault(),t.returnValue="",this.#o())})),this.subscriptions.add(this.dialog.backdropClick().subscribe(t=>this.closeDialog()))}#r(){this.dialog.keydownEvents().subscribe(t=>{if((0,Ln.KL)(t))return this.closeDialog();const n=!this.formsStateService.readOnly().isReadOnly&&!this.saveSvc.entityFormStateService.isSaving();(0,Ln.JY)(t)&&n&&(t.preventDefault(),this.saveAll(t.altKey)),(0,Ln.YU)(t)&&n&&(t.preventDefault(),this.saveAll(!0))})}#o(){const t=this.snackBar.openFromComponent(gv,{data:{save:!1},duration:5e3});t.onAction().subscribe(()=>{if(t.containerInstance.snackBarConfig.data.save)return this.saveAll(!0);this.closeDialog(!0)})}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(B.k),e.rXU(ee.A),e.rXU(w.g),e.rXU(je.A),e.rXU(Se.UG),e.rXU(gt),e.rXU(F),e.rXU(E),e.rXU(xt.f))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-edit-dialog-main"]],viewQuery:function(n,a){if(1&n&&e.GBs(Jr,5),2&n){let s;e.mGM(s=e.lsd())&&(a.formBuilderRefs=s)}},features:[e.Jv_([gt,Vt,xt.f,za]),e.Vt3],decls:10,vars:13,consts:[["mat-dialog__container","","appToggleDebug","",2,"position","relative"],["mat-dialog-actions","",1,"form-header-container",3,"ngClass"],[1,"multi-item-edit-form-header",3,"closeDialog","disabled"],[2,"position","relative"],["mat-mdc-dialog-content","","cdkScrollable","",1,"eav-dialog-content","u-hide-scrollbar",3,"ngClass"],[1,"eav-layout-grid"],[1,"eav-layout-grid__inner"],["appFormSlide","",1,"eav-layout-grid__cell--span-12"],[3,"entityGuid","index"],["extendedFabSpeedDialTriggerContent",""],["extendedFabSpeedDialActionsContent",""],[3,"action","label","ngClass"],["extended-fab-speed-dial-action","","matRipple","",3,"click","ngClass"],["mat-dialog-actions",""]],template:function(n,a){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"app-edit-dialog-header",2),e.bIt("closeDialog",function(){return a.closeDialog()}),e.k0s()(),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e.nVh(7,Cv,3,0,"div",7),e.k0s()()(),e.nVh(8,Sv,3,1,"extended-fab-speed-dial"),e.k0s(),e.nVh(9,Iv,3,0),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngClass",e.eq3(6,yv,a.hideHeader())),e.R7$(),e.Y8G("disabled",!a.formsValid()),e.R7$(2),e.Y8G("ngClass",e.ziG(8,bv,a.footerShow(),a.footerShow()&&a.footerSize(),a.footerShow()&&2==a.footerSize(),a.hideHeader())),e.R7$(3),e.vxM(a.delayForm()?-1:7),e.R7$(),e.vxM(a.viewInitiated()?8:-1),e.R7$(),e.vxM(a.footerShowOnceOrMore()?9:-1))},dependencies:[tt.E7,Ue.YU,iv,Tt.uv,fv,Jr,_t.p,An.r6,j.m_,j.An,ue.h,Nr.d,jr.R,Br.Q,Gr.d,Ct.V,nt.j,ue.D9],styles:["@keyframes _ngcontent-%COMP%_move-next{0%{transform:translate(0)}49%{transform:translate(-800px);animation-timing-function:step-end}50%{transform:translate(800px);animation-timing-function:ease-out}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_move-previous{0%{transform:translate(0)}49%{transform:translate(800px);animation-timing-function:step-end}50%{transform:translate(-800px);animation-timing-function:ease-out}to{transform:translate(0)}}.next[_ngcontent-%COMP%]{animation:.2s ease-in _ngcontent-%COMP%_move-next}.previous[_ngcontent-%COMP%]{animation:.2s ease-in _ngcontent-%COMP%_move-previous}.multi-item-edit-form-header[_ngcontent-%COMP%]{width:100%}.eav-dialog-content[_ngcontent-%COMP%]{--edit-content-max-height: var(--edit-content-max-height-no-margins);--edit-footer-height: 0px;--edit-margins-vertical: var(--edit-dialog-margins-vertical);--edit-safari-fix: 0px;margin:0;padding:0;max-height:calc(var(--edit-content-max-height) - var(--edit-footer-height) - var(--edit-margins-vertical) + var(--edit-safari-fix));background-color:#0000000f}@media(max-width:600px){.eav-dialog-content[_ngcontent-%COMP%]{--edit-margins-vertical: 0px}}.eav-dialog-content.hide-header-height-fix[_ngcontent-%COMP%]{--edit-safari-fix: var(--edit-dialog-header-height)}.eav-dialog-content.debug-enabled[_ngcontent-%COMP%]{--edit-footer-height: var(--edit-footer-bar-height)}.eav-dialog-content.debug-enabled.debug-info-is-open[_ngcontent-%COMP%]{--edit-footer-height: calc(var(--edit-footer-bar-height) + var(--edit-footer-container-height-total))}.eav-dialog-content.debug-enabled.debug-info-is-open.footer-xl[_ngcontent-%COMP%]{--edit-footer-height: calc(var(--edit-footer-bar-height) + var(--edit-footer-container-height-total) + var(--edit-footer-container-height))}.mat-mdc-dialog-actions[_ngcontent-%COMP%]{padding:0;margin-bottom:0;z-index:1}.eav-layout-grid[_ngcontent-%COMP%]{padding:16px}@media(max-width:600px){.eav-layout-grid[_ngcontent-%COMP%]{padding:8px 0 0}}"]})}}return i})();function Dv(i,o){1&i&&e.nrm(0,"app-edit-dialog-main")}let Fv=(()=>{class i{constructor(t){this.log=(0,f.Tq)({EditEntryComponent:i}),this.editInitializerService=(0,le.d)(Ee),this.log.aIf("constructor")}ngOnInit(){this.editInitializerService.fetchFormData()}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(v.D))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-edit-entry"]],features:[e.Jv_([re.J,v.D,l.o,y.S,lt,V])],decls:2,vars:1,template:function(n,a){1&n&&(e.nrm(0,"router-outlet"),e.nVh(1,Dv,1,0,"app-edit-dialog-main")),2&n&&(e.R7$(),e.vxM(a.editInitializerService.loaded()?1:-1))},dependencies:[q.n3,Pv],encapsulation:2})}}return i})()},22256(){var ht,Xe;Xe=ht||(ht={}),function(){var q="object"==typeof globalThis?globalThis:"object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:function r(){return function f(){try{return Function("return this;")()}catch{}}()||function l(){try{return(0,eval)("(function() { return this; })()")}catch{}}()}(),le=v(Xe);function v(h,u){return function(d,m){Object.defineProperty(h,d,{configurable:!0,writable:!0,value:m}),u&&u(d,m)}}typeof q.Reflect<"u"&&(le=v(q.Reflect,le)),function(g,q){var le=Object.prototype.hasOwnProperty,v="function"==typeof Symbol,f=v&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",l=v&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",r="function"==typeof Object.create,h={__proto__:[]}instanceof Array,u=!r&&!h,d={create:r?function(){return tt(Object.create(null))}:h?function(){return tt({__proto__:null})}:function(){return tt({})},has:u?function(j,te){return le.call(j,te)}:function(j,te){return te in j},get:u?function(j,te){return le.call(j,te)?j[te]:void 0}:function(j,te){return j[te]}},m=Object.getPrototypeOf(Function),b="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function Ne(){var j={},te=[],de=function(){function nt(Q,$e,_e){this._index=0,this._keys=Q,this._values=$e,this._selector=_e}return nt.prototype["@@iterator"]=function(){return this},nt.prototype[l]=function(){return this},nt.prototype.next=function(){var Q=this._index;if(Q>=0&&Q<this._keys.length){var $e=this._selector(this._keys[Q],this._values[Q]);return Q+1>=this._keys.length?(this._index=-1,this._keys=te,this._values=te):this._index++,{value:$e,done:!1}}return{value:void 0,done:!0}},nt.prototype.throw=function(Q){throw this._index>=0&&(this._index=-1,this._keys=te,this._values=te),Q},nt.prototype.return=function(Q){return this._index>=0&&(this._index=-1,this._keys=te,this._values=te),{value:Q,done:!0}},nt}();return function(){function nt(){this._keys=[],this._values=[],this._cacheKey=j,this._cacheIndex=-2}return Object.defineProperty(nt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),nt.prototype.has=function(Q){return this._find(Q,!1)>=0},nt.prototype.get=function(Q){var $e=this._find(Q,!1);return $e>=0?this._values[$e]:void 0},nt.prototype.set=function(Q,$e){var _e=this._find(Q,!0);return this._values[_e]=$e,this},nt.prototype.delete=function(Q){var $e=this._find(Q,!1);if($e>=0){for(var _e=this._keys.length,Ze=$e+1;Ze<_e;Ze++)this._keys[Ze-1]=this._keys[Ze],this._values[Ze-1]=this._values[Ze];return this._keys.length--,this._values.length--,ze(Q,this._cacheKey)&&(this._cacheKey=j,this._cacheIndex=-2),!0}return!1},nt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=j,this._cacheIndex=-2},nt.prototype.keys=function(){return new de(this._keys,this._values,Be)},nt.prototype.values=function(){return new de(this._keys,this._values,ut)},nt.prototype.entries=function(){return new de(this._keys,this._values,Ct)},nt.prototype["@@iterator"]=function(){return this.entries()},nt.prototype[l]=function(){return this.entries()},nt.prototype._find=function(Q,$e){if(!ze(this._cacheKey,Q)){this._cacheIndex=-1;for(var _e=0;_e<this._keys.length;_e++)if(ze(this._keys[_e],Q)){this._cacheIndex=_e;break}}return this._cacheIndex<0&&$e&&(this._cacheIndex=this._keys.length,this._keys.push(Q),this._values.push(void 0)),this._cacheIndex},nt}();function Be(nt,Q){return nt}function ut(nt,Q){return Q}function Ct(nt,Q){return[nt,Q]}}(),w="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function et(){return function(){function te(){this._map=new b}return Object.defineProperty(te.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),te.prototype.has=function(de){return this._map.has(de)},te.prototype.add=function(de){return this._map.set(de,de),this},te.prototype.delete=function(de){return this._map.delete(de)},te.prototype.clear=function(){this._map.clear()},te.prototype.keys=function(){return this._map.keys()},te.prototype.values=function(){return this._map.keys()},te.prototype.entries=function(){return this._map.entries()},te.prototype["@@iterator"]=function(){return this.keys()},te.prototype[l]=function(){return this.keys()},te}()}(),S="function"==typeof WeakMap?WeakMap:function _t(){var te=d.create(),de=fe();return function(){function Q(){this._key=fe()}return Q.prototype.has=function($e){var _e=Be($e,!1);return void 0!==_e&&d.has(_e,this._key)},Q.prototype.get=function($e){var _e=Be($e,!1);return void 0!==_e?d.get(_e,this._key):void 0},Q.prototype.set=function($e,_e){return Be($e,!0)[this._key]=_e,this},Q.prototype.delete=function($e){var _e=Be($e,!1);return void 0!==_e&&delete _e[this._key]},Q.prototype.clear=function(){this._key=fe()},Q}();function fe(){var Q;do{Q="@@WeakMap@@"+nt()}while(d.has(te,Q));return te[Q]=!0,Q}function Be(Q,$e){if(!le.call(Q,de)){if(!$e)return;Object.defineProperty(Q,de,{value:d.create()})}return Q[de]}function ut(Q,$e){for(var _e=0;_e<$e;++_e)Q[_e]=255*Math.random()|0;return Q}function nt(){var Q=function Ct(Q){if("function"==typeof Uint8Array){var $e=new Uint8Array(Q);return typeof crypto<"u"?crypto.getRandomValues($e):typeof msCrypto<"u"?msCrypto.getRandomValues($e):ut($e,Q),$e}return ut(new Array(Q),Q)}(16);Q[6]=79&Q[6]|64,Q[8]=191&Q[8]|128;for(var $e="",_e=0;_e<16;++_e){var Ze=Q[_e];(4===_e||6===_e||8===_e)&&($e+="-"),Ze<16&&($e+="0"),$e+=Ze.toString(16).toLowerCase()}return $e}}(),F=v?Symbol.for("@reflect-metadata:registry"):void 0,E=function ot(){var j;return!ye(F)&&V(q.Reflect)&&Object.isExtensible(q.Reflect)&&(j=q.Reflect[F]),ye(j)&&(j=function Ge(){var j;!ye(F)&&typeof q.Reflect<"u"&&!(F in q.Reflect)&&"function"==typeof q.Reflect.defineMetadata&&(j=function Tt(j){var te=j.defineMetadata,de=j.hasOwnMetadata,fe=j.getOwnMetadata,Be=j.getOwnMetadataKeys,ut=j.deleteMetadata,Ct=new S;return{isProviderFor:function(Q,$e){var _e=Ct.get(Q);return!(ye(_e)||!_e.has($e))||!!Be(Q,$e).length&&(ye(_e)&&(_e=new w,Ct.set(Q,_e)),_e.add($e),!0)},OrdinaryDefineOwnMetadata:te,OrdinaryHasOwnMetadata:de,OrdinaryGetOwnMetadata:fe,OrdinaryOwnMetadataKeys:Be,OrdinaryDeleteMetadata:ut}}(q.Reflect));var te,de,fe,Be=new S,ut={registerProvider:Ct,getProvider:Q,setProvider:_e};return ut;function Ct(Ze){if(!Object.isExtensible(ut))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case j===Ze:break;case ye(te):te=Ze;break;case te===Ze:break;case ye(de):de=Ze;break;case de===Ze:break;default:void 0===fe&&(fe=new w),fe.add(Ze)}}function nt(Ze,ct){if(!ye(te)){if(te.isProviderFor(Ze,ct))return te;if(!ye(de)){if(de.isProviderFor(Ze,ct))return te;if(!ye(fe))for(var vt=Se(fe);;){var yt=Ee(vt);if(!yt)return;var Lt=Fe(yt);if(Lt.isProviderFor(Ze,ct))return re(vt),Lt}}}if(!ye(j)&&j.isProviderFor(Ze,ct))return j}function Q(Ze,ct){var yt,vt=Be.get(Ze);return ye(vt)||(yt=vt.get(ct)),ye(yt)&&(ye(yt=nt(Ze,ct))||(ye(vt)&&(vt=new b,Be.set(Ze,vt)),vt.set(ct,yt))),yt}function $e(Ze){if(ye(Ze))throw new TypeError;return te===Ze||de===Ze||!ye(fe)&&fe.has(Ze)}function _e(Ze,ct,vt){if(!$e(vt))throw new Error("Metadata provider not registered.");var yt=Q(Ze,ct);if(yt!==vt){if(!ye(yt))return!1;var Lt=Be.get(Ze);ye(Lt)&&(Lt=new b,Be.set(Ze,Lt)),Lt.set(ct,vt)}return!0}}()),!ye(F)&&V(q.Reflect)&&Object.isExtensible(q.Reflect)&&Object.defineProperty(q.Reflect,F,{enumerable:!1,configurable:!1,writable:!1,value:j}),j}(),B=function lt(j){var te=new S,de={isProviderFor:function($e,_e){var Ze=te.get($e);return!ye(Ze)&&Ze.has(_e)},OrdinaryDefineOwnMetadata:function Ct($e,_e,Ze,ct){fe(Ze,ct,!0).set($e,_e)},OrdinaryHasOwnMetadata:function Be($e,_e,Ze){var ct=fe(_e,Ze,!1);return!ye(ct)&&xe(ct.has($e))},OrdinaryGetOwnMetadata:function ut($e,_e,Ze){var ct=fe(_e,Ze,!1);if(!ye(ct))return ct.get($e)},OrdinaryOwnMetadataKeys:function nt($e,_e){var Ze=[],ct=fe($e,_e,!1);if(ye(ct))return Ze;for(var yt=Se(ct.keys()),Lt=0;;){var Ht=Ee(yt);if(!Ht)return Ze.length=Lt,Ze;var $t=Fe(Ht);try{Ze[Lt]=$t}catch(Bt){try{re(yt)}finally{throw Bt}}Lt++}},OrdinaryDeleteMetadata:function Q($e,_e,Ze){var ct=fe(_e,Ze,!1);if(ye(ct)||!ct.delete($e))return!1;if(0===ct.size){var vt=te.get(_e);ye(vt)||(vt.delete(Ze),0===vt.size&&te.delete(vt))}return!0}};return E.registerProvider(de),de;function fe($e,_e,Ze){var ct=te.get($e),vt=!1;if(ye(ct)){if(!Ze)return;ct=new b,te.set($e,ct),vt=!0}var yt=ct.get(_e);if(ye(yt)){if(!Ze)return;if(yt=new b,ct.set(_e,yt),!j.setProvider($e,_e,de))throw ct.delete(_e),vt&&te.delete($e),new Error("Wrong provider for target.")}return yt}}(E);function K(j,te,de){if(ve(j,te,de))return!0;var Be=Me(te);return!Ae(Be)&&K(j,Be,de)}function ve(j,te,de){var fe=Ue(te,de,!1);return!ye(fe)&&xe(fe.OrdinaryHasOwnMetadata(j,te,de))}function be(j,te,de){if(ve(j,te,de))return Oe(j,te,de);var Be=Me(te);return Ae(Be)?void 0:be(j,Be,de)}function Oe(j,te,de){var fe=Ue(te,de,!1);if(!ye(fe))return fe.OrdinaryGetOwnMetadata(j,te,de)}function He(j,te,de,fe){Ue(de,fe,!0).OrdinaryDefineOwnMetadata(j,te,de,fe)}function je(j,te){var de=qe(j,te),fe=Me(j);if(null===fe)return de;var Be=je(fe,te);if(Be.length<=0)return de;if(de.length<=0)return Be;for(var ut=new w,Ct=[],nt=0,Q=de;nt<Q.length;nt++)ut.has($e=Q[nt])||(ut.add($e),Ct.push($e));for(var Ze=0,ct=Be;Ze<ct.length;Ze++){var $e;ut.has($e=ct[Ze])||(ut.add($e),Ct.push($e))}return Ct}function qe(j,te){var de=Ue(j,te,!1);return de?de.OrdinaryOwnMetadataKeys(j,te):[]}function Le(j){if(null===j)return 1;switch(typeof j){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===j?1:6;default:return 6}}function ye(j){return void 0===j}function Ae(j){return null===j}function V(j){return"object"==typeof j?null!==j:"function"==typeof j}function oe(j,te){switch(Le(j)){case 0:case 1:case 2:case 3:case 4:case 5:return j}var de=3===te?"string":5===te?"number":"default",fe=ue(j,f);if(void 0!==fe){var Be=fe.call(j,de);if(V(Be))throw new TypeError;return Be}return function ge(j,te){if("string"===te){var de=j.toString;if(Ve(de)&&!V(fe=de.call(j)))return fe;if(Ve(Be=j.valueOf)&&!V(fe=Be.call(j)))return fe}else{var Be;if(Ve(Be=j.valueOf)&&!V(fe=Be.call(j)))return fe;var fe,ut=j.toString;if(Ve(ut)&&!V(fe=ut.call(j)))return fe}throw new TypeError}(j,"default"===de?"number":de)}function xe(j){return!!j}function ce(j){var te=oe(j,3);return function J(j){return"symbol"==typeof j}(te)?te:function Re(j){return""+j}(te)}function We(j){return Array.isArray?Array.isArray(j):j instanceof Object?j instanceof Array:"[object Array]"===Object.prototype.toString.call(j)}function Ve(j){return"function"==typeof j}function Ie(j){return"function"==typeof j}function ze(j,te){return j===te||j!=j&&te!=te}function ue(j,te){var de=j[te];if(null!=de){if(!Ve(de))throw new TypeError;return de}}function Se(j){var te=ue(j,l);if(!Ve(te))throw new TypeError;var de=te.call(j);if(!V(de))throw new TypeError;return de}function Fe(j){return j.value}function Ee(j){var te=j.next();return!te.done&&te}function re(j){var te=j.return;te&&te.call(j)}function Me(j){var te=Object.getPrototypeOf(j);if("function"!=typeof j||j===m||te!==m)return te;var de=j.prototype,fe=de&&Object.getPrototypeOf(de);if(null==fe||fe===Object.prototype)return te;var Be=fe.constructor;return"function"!=typeof Be||Be===j?te:Be}function Ue(j,te,de){var fe=E.getProvider(j,te);if(!ye(fe))return fe;if(de){if(E.setProvider(j,te,B))return B;throw new Error("Illegal state.")}}function tt(j){return j.__=void 0,delete j.__,j}g("decorate",function N(j,te,de,fe){if(ye(de)){if(!We(j))throw new TypeError;if(!Ie(te))throw new TypeError;return function A(j,te){for(var de=j.length-1;de>=0;--de){var Be=(0,j[de])(te);if(!ye(Be)&&!Ae(Be)){if(!Ie(Be))throw new TypeError;te=Be}}return te}(j,te)}if(!We(j))throw new TypeError;if(!V(te))throw new TypeError;if(!V(fe)&&!ye(fe)&&!Ae(fe))throw new TypeError;return Ae(fe)&&(fe=void 0),function X(j,te,de,fe){for(var Be=j.length-1;Be>=0;--Be){var Ct=(0,j[Be])(te,de,fe);if(!ye(Ct)&&!Ae(Ct)){if(!V(Ct))throw new TypeError;fe=Ct}}return fe}(j,te,de=ce(de),fe)}),g("metadata",function ee(j,te){return function de(fe,Be){if(!V(fe))throw new TypeError;if(!ye(Be)&&!function Te(j){switch(Le(j)){case 3:case 4:return!0;default:return!1}}(Be))throw new TypeError;He(j,te,fe,Be)}}),g("defineMetadata",function M(j,te,de,fe){if(!V(de))throw new TypeError;return ye(fe)||(fe=ce(fe)),He(j,te,de,fe)}),g("hasMetadata",function D(j,te,de){if(!V(te))throw new TypeError;return ye(de)||(de=ce(de)),K(j,te,de)}),g("hasOwnMetadata",function I(j,te,de){if(!V(te))throw new TypeError;return ye(de)||(de=ce(de)),ve(j,te,de)}),g("getMetadata",function W(j,te,de){if(!V(te))throw new TypeError;return ye(de)||(de=ce(de)),be(j,te,de)}),g("getOwnMetadata",function R(j,te,de){if(!V(te))throw new TypeError;return ye(de)||(de=ce(de)),Oe(j,te,de)}),g("getMetadataKeys",function L(j,te){if(!V(j))throw new TypeError;return ye(te)||(te=ce(te)),je(j,te)}),g("getOwnMetadataKeys",function y(j,te){if(!V(j))throw new TypeError;return ye(te)||(te=ce(te)),qe(j,te)}),g("deleteMetadata",function C(j,te,de){if(!V(te))throw new TypeError;if(ye(de)||(de=ce(de)),!V(te))throw new TypeError;ye(de)||(de=ce(de));var fe=Ue(te,de,!1);return!ye(fe)&&fe.OrdinaryDeleteMetadata(j,te,de)})}(le,q),typeof q.Reflect>"u"&&(q.Reflect=Xe)}()},26001(ht,Xe,g){"use strict";g.d(Xe,{A:()=>l});var q=g(51612),le=g(34435),v=g(16632),f=g(56884);let l=(()=>{class r extends v.r{constructor(){super((0,le.Tq)({InputTypeService:r},null)),this.getId=u=>u.Type}getAttributeInputTypes(u){const d=this.getAll();return u.map(m=>{const b=this.#e(m.InputType,d);return{name:m.Name,inputType:b.inputType}})}getSpecs(u){return this.#e(u.InputType,this.getAll())}#e(u,d){const m=d.find(S=>S.Type===u),b=u.toString();return{inputType:u,isExternal:!!m?.UiAssets?.default,mustUseGuid:!b.startsWith("string")&&!b.startsWith("number"),componentTagName:`field-${u}`,componentTagDialogName:`field-${u}-dialog`,metadata:m,isNewPicker:q.Q.isNewPicker(u)}}static{this.\u0275fac=function(d){return new(d||r)}}static{this.\u0275prov=f.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},28003(ht,Xe,g){"use strict";g.d(Xe,{d:()=>r});var q=g(1726),le=g(4202),v=g(34435);const l={all:!1,v1:!1,v2:!1,allValues:!0,oneValue:!0,fields:[...g(36740).z]};class r{constructor(d,m,b,w,S,F,E){this.contentType=d,this.entityGuid=m,this.fieldName=b,this.isValue=w,this.inputType=S,this.isOpen=F,this.valueMapper=E,this.log=(0,v.Tq)({FormulaValueCorrections:r},l)}v1(d){const m=d&&Array.isArray(d)&&d.every(S=>"string"==typeof S);if(!(["string","number","boolean"].includes(typeof d)||d instanceof Date||m)&&d)return{ok:!1,v1Result:this.toFormulaResult(void 0)};const w=this.isValue?this.#e(d):d;return{ok:!0,v1Result:this.toFormulaResult(w)}}v2(d){return{...this.allValues(d),openInDesigner:this.isOpen}}allValues(d){const m=this.log.fnIfInFields("allValues",this.fieldName,{result:d}),b={value:void 0,fields:[],stop:null,sleep:null};if(null==d)return m.r({...b,value:d},"null/empty");const w=this.isValue;if(Array.isArray(d))return console.warn("Formula result was an array - this is not allowed. Please return an object containing the array instead: { value: [...] }.",d),m.r(b,"array");if("object"==typeof d){if(d instanceof Date&&w)return m.r({...b,value:this.#e(d)},"date");if(d instanceof Promise)return m.r({...b,value:void 0,promise:d},"promise");const F=d;return F.stop??=null,F.sleep??=null,F.value&&w&&(F.value=Array.isArray(F.value)?this.valueMapper?.toState(F.value)??F.value:this.#e(F.value)),F.fields&&(F.fields=F.fields?.map(E=>(E.value=this.#e(E.value,E.name),E))),F.options&&(Array.isArray(F.options)?F.options.length>0&&(F.options.find(E=>!E||null==E.value)&&(console.error("some options are missing value",F.options),F.options=[]),function h(u){var d=u.map(b=>b.value),m=new Set(d);return d.length!==m.size&&(console.error("Duplicate values in options",u,d,m),!0)}(F.options)&&(console.error("duplicate values in options",F.options),F.options=[])):(console.error("options is not an array",F.options),F.options=[])),m.r(F,"object")}const S={value:d};return w?m.r({...b,value:this.#e(S.value)},"non-object, value"):m.r(S,"non-object, non-value")}#e(d,m=null){const b=this.log.fnIf("oneValue",{fieldName:this.fieldName,otherFieldName:m,value:d,type:typeof d});if(null==d)return b.r(d,"null");let w=this.inputType.inputType;if(m){const S=this.contentType.Attributes.find(F=>F.Name===m);if(!S?.InputType)return b.r(d,`other field ${m}; value not changed as target field not found`);w=S.InputType,b.a(`other field ${m} found, inputType: ${w}`)}if(w===le.u.DateTimeDefault||d instanceof Date){const S=new Date(d);return!("string"==typeof d&&d.endsWith("Z"))&&S.getTime()!==d&&S.setTime(S.getTime()-6e4*S.getTimezoneOffset()),S.setMilliseconds(0),b.r(S.toJSON(),"date")}return"string"!=typeof d&&(w?.startsWith(q.O.String.toLocaleLowerCase())||w?.startsWith(q.O.Hyperlink.toLocaleLowerCase()))?b.r(d.toString(),"not string, but input is string or hyperlink"):b.r(d,"unchanged")}toFormulaResult(d){return{value:d,fields:[],stop:null,sleep:null,openInDesigner:this.isOpen}}}},33688(ht,Xe,g){"use strict";g.d(Xe,{f:()=>Le});var q=g(12938),le=g(34435),v=g(67993),f=g(90927),l=g(56884),r=g(36740),h=g(55970),u=g(75797),d=g(51567),m=g(36647),b=g(14600),w=g(70271),S=g(19999),F=g(4979),E=g(8265),B=g(53991),N=g(36849),ee=g(13050),M=g(26001),D=g(87149),I=g(77706),W=g(60827);class R{static#e(Ae){if(!Ae)return Ae;let J=Ae.trim();return J.startsWith("//")&&(J=J.replace(/^\/\/.*\n/gm,"").trim()),J.startsWith(W.GI.V1)?`${W.qe}${J}`:J.startsWith(`${W.qe}${W.GI.V1}`)?J:J.startsWith("v2(")?(J=J.substring(3,J.lastIndexOf("}")+1),J=J.replace("=>",""),`${W.qe}v2 ${J}`):J}static findFormulaVersion(Ae){const J=this.#e(Ae),V=J.substring(W.qe.length,J.indexOf("(")).trim();return Object.values(W.GI).includes(V)?V:void 0}static buildFormulaFunction(Ae){const J=this.#e(Ae);return new Function(`return ${J}`)()}}var L=g(90852);const y={all:!1,buildFormulaCache:!1,updateFormulaFromEditor:!1,createPromisedParts:!1,getSharedParts:!1};let C=(()=>{class ye extends F.V{constructor(J,V,oe,ge,xe,Re,ce){super(),this.formConfig=J,this.itemService=V,this.contentTypeService=oe,this.contentTypeItemService=ge,this.loggingService=xe,this.translate=Re,this.inputTypes=ce,this.log=(0,le.Tq)({FormulaCacheBuilder:ye},y),this.#i={}}buildFormulaCache(J){const V=this.log.fnIf("buildFormulaCache"),oe=[],ge=this.formConfig.language(),xe=new ee.bT(ge),Re=new I.q(this.log.name);for(const ce of this.formConfig.config.itemGuids){const We=this.itemService.get(ce),Ve=this.#n(ce,We),Ie=this.contentTypeService.getContentTypeOfItem(We);for(const Te of Ie.Attributes){const ze=Re.getDefaultSettings(xe.flatten(Te.Metadata)),ue=this.inputTypes.getSpecs(Te),Se=this.contentTypeItemService.getMany(ze.Formulas).filter(Fe=>xe.getBestValue(Fe.Attributes.Enabled));for(const Fe of Se){const Ee=xe.getBestValue(Fe.Attributes.Formula);if(!Ee)continue;const re=xe.getBestValue(Fe.Attributes.Target);let Me;try{Me=R.buildFormulaFunction(Ee)}catch(ot){J.cacheResults({entityGuid:ce,fieldName:Te.Name,target:re},void 0,!0,!1);const lt=ee.im.getTitle(Ie,ge);this.loggingService.addLog(D.E.Error,`Error building formula for Entity: "${lt}", Field: "${Te.Name}", Target: "${re}"`,ot),this.loggingService.showMessage(this.translate.instant("Errors.FormulaConfiguration"),2e3)}const Ge={cache:{},entityGuid:ce,fieldName:Te.Name,fn:Me?.bind({}),isDraft:null==Me,sourceCode:Ee,sourceCodeSaved:Ee,sourceCodeGuid:Fe.Guid,sourceCodeId:Fe.Id,target:re,...this.#e(re,ue),version:R.findFormulaVersion(Ee),...Ve,stop:!1,sleep:!1,fieldIsSpecialPicker:h.Yb.includes(re),...this.#a(),...this.#t(re)};oe.push(Ge)}}}return V.r(oe)}#e(J,V){return{inputType:V,isNewPicker:V.isNewPicker,disabled:!1,disabledReason:""}}#t(J){return J.startsWith(h.si)?{isSetting:!0,settingName:J.substring(h.si.length),isValue:!1,isValidation:!1}:{isSetting:!1,settingName:"",isValue:J===h.a2.Value,isValidation:J===h.a2.Validation}}#n(J,V=null){if(this.log.fnIf("getSharedParts",{item:V,entityGuid:J}),this.#i[J])return this.#i[J];const oe=(V=V??this.itemService.get(J)).Entity,ge=oe.For,Re=this.formConfig.config,ce=Re.dialogContext.User??{},We={targetEntity:{guid:oe.Guid,id:oe.Id,type:{guid:oe.Type.Id,name:oe.Type.Name},for:{targetType:ge?.TargetType??0,guid:ge?.Guid,number:ge?.Number,string:ge?.String},isNew:0===oe.Id,isCopy:this.formConfig.config.isCopy},user:{email:ce.Email,guid:ce.Guid,id:ce.Id,isAnonymous:ce.IsAnonymous,isSiteAdmin:ce.IsSiteAdmin,isContentEditor:ce.isContentEditor,isContentAdmin:ce.IsContentAdmin,isSystemAdmin:ce.IsSystemAdmin,name:ce.Name,username:ce.Username,roles:ce.roles},app:{appId:Re.appId,zoneId:Re.zoneId,isGlobal:Re.dialogContext.App.IsGlobalApp,isSite:Re.dialogContext.App.IsSiteApp,isContent:Re.dialogContext.App.IsContentApp,getSetting:Ve=>{}},sxc:window.$2sxc({zoneId:Re.zoneId,appId:Re.appId,pageId:Re.tabId,moduleId:Re.moduleId,_noContextInHttpHeaders:!0,_autoAppIdsInUrl:!0})};return this.#i[J]=We,We}#i;#a(){this.log.fnIf("createPromisedParts");const J=new u.t(null),V=new u.t(null),oe=J.pipe((0,d.p)(ge=>!!ge),(0,m.n)(ge=>(0,b.H)(ge.promise).pipe((0,w.T)(xe=>({set:ge,result:xe})))));return this.subscriptions.add((0,S.z)([oe,V.pipe((0,d.p)(ge=>!!ge))]).subscribe(([ge,xe])=>(ge.set.completed=!0,ge.set.sleep=!1,xe(ge.result)))),{promises$:J,updateCallback$:V}}updateFormulaFromEditor(J,V,oe,ge){let xe;if(this.log.fnIf("updateFormulaFromEditor",{id:V,sourceCode:oe,run:ge}),ge)try{xe=R.buildFormulaFunction(oe)}catch(re){J.cacheResults(V,void 0,!0,!1);const Me=this.itemService.get(V.entityGuid),Ge=this.contentTypeService.getContentTypeOfItem(Me),ot=this.formConfig.language(),Tt=`Error building formula for Entity: "${ee.im.getTitle(Ge,ot)}", Field: "${V.fieldName}", Target: "${V.target}"`;this.loggingService.addLog(D.E.Error,Tt,re),console.error(Tt,re)}const Re=this.itemService.get(V.entityGuid),ce=this.contentTypeService.getAttributeOfItem(Re,V.fieldName),We=this.inputTypes.getSpecs(ce),{list:Ve,index:Ie,value:Te}=J.formulaListIndexAndOriginal(V),ze=Te??{},ue=this.#n(V.entityGuid),Se=ze.promises$&&ze.updateCallback$?{promises$:Te.promises$,updateCallback$:Te.updateCallback$}:this.#a(),Fe={...V,cache:ze.cache??{},fn:xe?.bind({}),isDraft:!ge||null==xe,sourceCode:oe,sourceCodeSaved:ze.sourceCodeSaved,sourceCodeGuid:ze.sourceCodeGuid,sourceCodeId:ze.sourceCodeId,version:R.findFormulaVersion(oe),...this.#e(V.target,We),...ue,stop:!1,sleep:!1,fieldIsSpecialPicker:h.Yb.includes(V.target),...Se,...this.#t(V.target)};return Ie>=0?[...Ve.slice(0,Ie),Fe,...Ve.slice(Ie+1)]:[Fe,...Ve]}static{this.\u0275fac=function(V){return new(V||ye)(l.KVO(E.S),l.KVO(f.b),l.KVO(N.n),l.KVO(B.k),l.KVO(D.J),l.KVO(L.c$),l.KVO(M.A))}}static{this.\u0275prov=l.jDH({token:ye,factory:ye.\u0275fac})}}return ye})();const A={all:!0,getActive:!0,fields:[...r.z]};let X=(()=>{class ye{#e;constructor(){this.log=(0,le.Tq)({FormulaCacheService:ye},A),this.#e=(0,q.d)(C),this.formulas=(0,v.KX)("formulas",[]),this.#t=(0,v.KX)("formula-results",[])}#t;init(){const J=this.#e.buildFormulaCache(this);this.formulas.set(J)}#n(J,V,oe,ge){return this.formulas().filter(xe=>(!J||xe.entityGuid===J)&&(!V||xe.fieldName===V)&&(!oe||oe?.find(Re=>xe.target==Re))&&(!!ge||!xe.isDraft))}getActive(J,V,oe){const ge=this.log.fnIfInFields("getActive",V,()=>({name:V,forNewPicker:oe,formulas:this.formulas()})),xe=h.zD.concat(oe?h.AJ:h.K3),Re=this.#n(J,V,xe,!1),ce=Re.filter(We=>!We.stop);return ge.r(ce,`all: ${Re.length}, unstopped: ${ce.length}`)}formulaListIndexAndOriginal(J){const V=this.formulas(),oe=V.findIndex(xe=>xe.entityGuid===J.entityGuid&&xe.fieldName===J.fieldName&&xe.target===J.target);return{list:V,index:oe,value:V[oe]}}updateSaved(J,V,oe){const{list:ge,index:xe,value:Re}=this.formulaListIndexAndOriginal(J);if(null==Re)return;const ce={...Re,sourceCodeSaved:J.sourceCode,sourceCodeGuid:V,sourceCodeId:oe},We=[...ge.slice(0,xe),ce,...ge.slice(xe+1)];this.formulas.set(We)}updateFormulaFromEditor(J,V,oe){const ge=this.#e.updateFormulaFromEditor(this,J,V,oe);this.formulas.set(ge)}delete(J){const{list:V,index:oe}=this.formulaListIndexAndOriginal(J);if(oe<0)return;const ge=[...V.slice(0,oe),...V.slice(oe+1)];this.formulas.set(ge)}resetFormula(J){this.#i(J);const V=this.formulaListIndexAndOriginal(J).value?.sourceCodeSaved;null!=V?this.updateFormulaFromEditor(J,V,!0):this.delete(J)}cacheResults(J,V,oe,ge){const xe={entityGuid:J.entityGuid,fieldName:J.fieldName,target:J.target,value:V,isError:oe,isOnlyPromise:ge},Re=this.log.fn("cacheResults",{newResult:xe});(0,l.O8t)(()=>{const{list:ce,index:We}=this.resultListIndexAndOriginal(J),Ve=We>=0?[...ce.slice(0,We),xe,...ce.slice(We+1)]:[xe,...ce];Re.a("set results",{list:ce,index:We,newResults:Ve}),this.#t.set(Ve)}),Re.end("ok")}resultListIndexAndOriginal(J){const V=this.#t(),oe=V.findIndex(xe=>xe.entityGuid===J.entityGuid&&xe.fieldName===J.fieldName&&xe.target===J.target);return{list:V,index:oe,value:V[oe]}}#i(J){const{list:V,index:oe}=this.resultListIndexAndOriginal(J);if(oe<0)return;const ge=[...V.slice(0,oe),...V.slice(oe+1)];this.#t.set(ge)}static{this.\u0275fac=function(V){return new(V||ye)}}static{this.\u0275prov=l.jDH({token:ye,factory:ye.\u0275fac})}}return ye})();var K=g(51612);let ve=(()=>{class ye{constructor(J,V){this.itemService=J,this.contentTypeService=V}getTargetOptions(J,V){const oe=[];if(null==J.entityGuid||null==J.fieldName)return oe;const ge=V.filter(Ve=>Ve.entityGuid===J.entityGuid&&Ve.fieldName===J.fieldName);for(const Ve of Object.values(h.a2)){const Ie={hasFormula:ge.some(Te=>Te.target===Ve),label:Ve.substring(Ve.lastIndexOf(".")+1),target:Ve};oe.push(Ie)}const xe=this.itemService.get(J.entityGuid),ce=this.contentTypeService.getAttributeOfItem(xe,J.fieldName).InputType;if(K.Q.isGroupStart(ce))for(const Ve of[h.j5.Collapsed]){const Ie={hasFormula:ge.some(Te=>Te.target===Ve),label:Ve.substring(Ve.lastIndexOf(".")+1),target:Ve};oe.push(Ie)}if(K.Q.isOldValuePicker(ce))for(const Ve of[h.j5.DropdownValues]){const Ie={hasFormula:ge.some(Te=>Te.target===Ve),label:Ve.substring(Ve.lastIndexOf(".")+1),target:Ve};oe.push(Ie)}if(K.Q.isNewPicker(ce))for(const Ve of Object.values(h.jk)){const Ie={hasFormula:ge.some(Te=>Te.target===Ve),label:"Picker "+Ve.substring(Ve.lastIndexOf(".")+1),target:Ve};oe.push(Ie)}for(const Ve of ge){if(oe.some(ze=>ze.target===Ve.target))continue;const Te={hasFormula:!0,label:Ve.target.substring(Ve.target.lastIndexOf(".")+1),target:Ve.target};oe.push(Te)}if(!oe.some(Ve=>Ve.target===J.target)){const Ve={hasFormula:ge.some(Ie=>Ie.target===J.target),label:J.target.substring(J.target.lastIndexOf(".")+1),target:J.target};oe.push(Ve)}return oe}static{this.\u0275fac=function(V){return new(V||ye)(l.KVO(f.b),l.KVO(N.n))}}static{this.\u0275prov=l.jDH({token:ye,factory:ye.\u0275fac})}}return ye})();var be=g(75067);class Oe{static buildDesignerSnippetsContext(Ae){if(Ae.version===W.GI.V1)return["app.appId","app.zoneId","app.isGlobal","app.isSite","app.isContent","cache.ChangeThis","culture.code","culture.name","debug","features.isEnabled('nameId')","form.runFormulas()","sxc.ChangeThis","target.entity.id","target.entity.guid","target.name","target.type","user.id","user.isAnonymous","user.isSiteAdmin","user.isSystemAdmin"].map(V=>{const oe=`context.${V}`;return{code:oe,label:oe}})}static getSnippets(Ae,J,V){if(Ae.version===W.GI.V1){const oe=new be.Z(V).all;return["value","default","prefill","initial",...J.map(xe=>xe.fieldName),"parameters.ChangeThis",...Object.keys(oe).map(xe=>`parameters.${xe}`)].map(xe=>{const Re=`data.${xe}`;return{code:Re,label:Re}})}}}class je{static getTypings(Ae,J,V){if(Ae.version===W.GI.V2){const oe=new be.Z(V).all,ge=J.map(ce=>`${ce.fieldName}: ${this.#e(ce.inputType)};`).join("\n"),xe=Object.keys(oe).map(ce=>`${ce}: any;`).join("\n");return"/*\r\n  This is a special file which is not compiled as a normal TypeScript.\r\n  Instead it's loaded as raw text, to hand over to Monaco.\r\n  It ensures that v2 functions have intellisense.\r\n\r\n  TIP: To edit this file, briefly rename it to ...raw.ts, then back to ...rawts\r\n       This will make VSCode load it as a normal TypeScript file, so you can edit it.\r\n\r\n  - Try to keep in sync with the real code in the 2sxc project.\r\n  - The comments are _documentation_ for the user, so they can see what's available\r\n  - If you need any \"internal\" comments, use // instead\r\n  - Note that the [inject:...] comments are replaced by the build process\r\n*/\r\n\r\n/**\r\n * The data object is the main object for figuring out what the field or setting contained and what other fields currently store.\r\n * It has properties such as `.value` etc.\r\n * Just start typing to see the intellisense.\r\n */\r\n// Note that the type must be explicitly like `string | boolean | number | string[]`\r\n// Otherwise it won't show the details to the user\r\ndeclare interface FormulaData {\r\n  /**\r\n   * The value of the current field/setting when the formula runs.\r\n   *\r\n   * _It's exact type depends on the underlying type._\r\n   */\r\n  value: string | boolean | number | string[];\r\n  /**\r\n   * The _default_ value of the current field/setting as defined in the field settings.\r\n   *\r\n   * _It's exact type depends on the underlying type._\r\n   */\r\n  default: string | boolean | number | string[];\r\n  /**\r\n   * A prefill value that was passed into the form when it was loaded.\r\n   *\r\n   * _It's exact type depends on the underlying type._\r\n   */\r\n  prefill: string | boolean | number | string[];\r\n  /**\r\n   * The value of the current field/setting when the form initially loaded.\r\n   *\r\n   * _It's exact type depends on the underlying type._\r\n   */\r\n  initial: string | boolean | number | string[];\r\n  /* [inject:AllFields] */\r\n  /**\r\n   * All parameters which were passed to the form when it was loaded\r\n   *\r\n   * _It's exact type depends on the parameter, but it's usually a string._\r\n   */\r\n  parameters: {\r\n    /* [inject:AllParameters] */\r\n  };\r\n}\r\n\r\ndeclare interface FormulaContext {\r\n  /**\r\n   * Information about the current App\r\n   */\r\n  app: {\r\n    /** The current App ID */\r\n    appId: number;\r\n    /** The current Zone ID */\r\n    zoneId: number;\r\n    /** Determines if the current App is the global App */\r\n    isGlobal: boolean;\r\n    /** Determines if the current App is the primary (main) App on the site */\r\n    isSite: boolean;\r\n    /** Determines if the current App is a content App */\r\n    isContent: boolean;\r\n    /**\r\n     * Retrieve a setting like an App setting.\r\n     * You need the full path like `Settings.ShowCategories`.\r\n     * \r\n     * Important: For security reasons formulas will only get settings which where configured in the ContentType for use in Formulas.\r\n     */\r\n    getSetting(settingPath: string): string;\r\n  };\r\n  /**\r\n   * Cache for this formula. You can store any data here and it will be available in the next run.\r\n   */\r\n  cache: Record<string, any>;\r\n  /**\r\n   * Information about the current language\r\n   */\r\n  culture: {\r\n    code: string;\r\n    name: string;\r\n  };\r\n  debug: boolean;\r\n  /**\r\n   * API to detect what features are currently enabled/available\r\n   */\r\n  features: {\r\n    // /**\r\n    //  * Get internal information about a feature if it's available. This is rarely used.\r\n    //  * @param nameId The name of the feature, eg. `PasteImageFromClipboard`\r\n    //  */\r\n    // get(nameId: string): Record<string, any>;\r\n    /** Find out if the feature is enabled. Eg. `...isEnabled('PasteImageFromClipboard')` */\r\n    isEnabled(nameId: string): boolean;\r\n  };\r\n  /**\r\n   * Work with the current form\r\n   */\r\n  form: {\r\n    // v16 Deprecated for v2\r\n    // /** Re-trigger all formulas. Usually used inside promises when they complete. */\r\n    // runFormulas(): void;\r\n  };\r\n  /**\r\n   * The standard sxc object for the current App.\r\n   * It's the same as the sxc-instance in the page.\r\n   *\r\n   * You can use it to make API calls to the server.\r\n   */\r\n  sxc: {\r\n    /** The module ID */\r\n    id: number;\r\n    /** The Content-Block ID - matches the module ID unless it's an inner-content block inside another module */\r\n    cbid: number;\r\n    /** The sxc WebAPI object. Check the docs: https://docs.2sxc.org/api/js/SxcWebApi.html */\r\n    webApi: {\r\n      /**\r\n       * Get data from a url and return the json-object\r\n       * @param url Url to call. It's usually a virtual url such as `app/auto/api/basic/hello`\r\n       * @param data Optional data. If provided, it will use a POST\r\n       * @param method Optional method, default is `GET` unless you specify data, then it's `POST`\r\n       */\r\n      fetchJson<TData>(url: string, data?: string | Record<string, any>, method?: string): Promise<TData>;\r\n      /**\r\n       * Get data from a url and return the response (not a nice object)\r\n       * @param url Url to call. It's usually a virtual url such as `app/auto/api/basic/hello`\r\n       * @param data Optional data. If provided, it will use a POST\r\n       * @param method Optional method, default is `GET` unless you specify data, then it's `POST`\r\n       */\r\n      fetchRaw<TData>(url: string, data?: string | Record<string, any>, method?: string): Promise<TData>;\r\n    };\r\n    // turn off for now v16.00 - confusing\r\n    // [key: string]: any;\r\n  };\r\n  /**\r\n   * Information about the item this formula targets.\r\n   */\r\n  target: {\r\n    /** The entity the current formula affects */\r\n    entity: {\r\n      /** The entity ID */\r\n      id: number;\r\n      /** The entity GUID */\r\n      guid: string;\r\n      /** Metadata For information */\r\n      for: {\r\n        /** The target type like `4` (Entity). `0` if it's not metadata  */\r\n        targetType: number;\r\n        /** The int-key if it uses number keys, otherwise null */\r\n        number?: number;\r\n        /** The string-key if it uses string keys, otherwise null */\r\n        string?: string;\r\n        /** The GUID-key if it uses GUIDs, otherwise null */\r\n        guid?: string;\r\n      },\r\n      /** this is a new entity */\r\n      isNew: boolean;\r\n      /** this is a copy, note that isNew will also be true */\r\n      isCopy: boolean;\r\n    };\r\n    name: string;\r\n    /** The entity type name */\r\n    type: string;\r\n  };\r\n  /**\r\n   * Information about the current user\r\n   */\r\n  user: {\r\n    /** The current user ID */\r\n    id: number;\r\n    /** Check if the current user is anonymous eg. not logged in */\r\n    isAnonymous: boolean;\r\n    /** Check if the current user is a content admin */\r\n    isContentAdmin: boolean;\r\n    /** Check if the current user is a content editor (but maybe not admin) - new v20.01 */\r\n    isContentEditor: boolean;\r\n    /** Check if the current user is a site admin */\r\n    isSiteAdmin: boolean;\r\n    /** Check if the current user is a system admin */\r\n    isSystemAdmin: boolean;\r\n    /** current user e-mail */\r\n    email: string;\r\n    /** The user GUID */\r\n    guid: string;\r\n    /** the name usually shown in greetings */\r\n    name: string;\r\n    /** The user name used for login */\r\n    username: string;\r\n    /** The names of user roles of the current user is in - new v20.01 */\r\n    roles: string[];\r\n  };\r\n}\r\n\r\n// /**\r\n//  * Test docs\r\n//  * @param data The data object\r\n//  */\r\n// declare function callbackV2(data: FormulaData): string | string[];\r\n\r\n// /**\r\n//  * test docs 3\r\n//  * @param callback The real code of the formula\r\n//  */\r\n// declare function v3(callback: typeof callbackV2);\r\n\r\n/**\r\n * This `v2` wrapper is required for the intellisense to work.\r\n * @param callback The real code of the formula\r\n * @returns A string, boolean, number, date or an advanced object\r\n */\r\ndeclare function v2(\r\n  // The main function - adding comments here does not show up, so we don't have them ATM\r\n  callback: (\r\n    data: FormulaData,\r\n    context: FormulaContext,\r\n  ) => string | boolean | number | Date | {\r\n    value?: string | boolean | number | Date | { severity: 'warning' | 'error', message: string },\r\n    fields?: {\r\n      name: string,\r\n      value: string | boolean | number | Date\r\n    }[],\r\n    promise?: Promise<any>,\r\n    stop?: boolean,\r\n  },\r\n): void;\r\n".replace("/* [inject:AllFields] */",ge).replace("/* [inject:AllParameters] */",xe)}}static#e(Ae){const J=Ae.toLowerCase();return J.startsWith("string")?"string":J.startsWith("number")?"number":J.startsWith("date")?"Date":J.startsWith("boolean")?"boolean":"any"}}const qe={all:!1,constructor:!1,setDesignerOpen:!1};let Le=(()=>{class ye{#e;constructor(J){this.itemService=J,this.log=(0,le.Tq)({FormulaDesignerService:ye},qe),this.cache=(0,q.d)(X),this.#e=(0,q.d)(ve),this.itemSettingsServices={},this.designerState=(0,v.KX)("designerState",{editMode:!1,entityGuid:void 0,fieldName:void 0,isOpen:!1,target:void 0}),this.formulaResult=(0,v.bo)("formulaResult",()=>{const V=this.designerState();return this.cache.resultListIndexAndOriginal(V).value}),this.currentTargetOptions=(0,v.bo)("currentTargetOptions",()=>{const V=this.designerState(),oe=this.cache.formulas();return this.#e.getTargetOptions(V,oe)}),this.entityOptions=(0,v.bo)("entityOptions",()=>{const V=this.cache.formulas();return Object.entries(this.itemSettingsServices).map(([oe,ge])=>{const xe=V.filter(Re=>Re.entityGuid===oe);return{entityGuid:oe,formulas:xe,hasFormula:xe.length>0,label:ge.contentTypeSettings()._itemTitle}})}),this.fieldsOptions=(0,v.bo)("fieldsOptions",()=>{const V=this.designerState().entityGuid;if(null==V)return[];const oe=this.entityOptions().find(ce=>ce.entityGuid==V).formulas,xe=this.itemSettingsServices[V].allProps();return Object.keys(xe).map(ce=>{const We=oe.filter(Ve=>Ve.fieldName===ce);return{fieldName:ce,formulas:We,hasFormula:We.length>0,inputType:xe[ce].settings.InputType,label:ce}})}),this.currentFormula=(0,v.bo)("currentFormula",()=>{const V=this.designerState(),{value:oe}=this.cache.formulaListIndexAndOriginal(V);return oe}),this.v1ContextSnippets=(0,v.bo)("v1ContextSnippets",()=>{const V=this.currentFormula();return null!=V?Oe.buildDesignerSnippetsContext(V):[]}),this.#t=(0,v.bo)("currentItemHeader",()=>{const V=this.designerState().entityGuid;return null==V?null:this.itemService.getItemHeader(V)}),this.v2JsTypings=(0,v.bo)("v2JsTypings",()=>{const V=this.currentFormula(),oe=this.#t();return null!=V&&null!=oe?je.getTypings(V,this.fieldsOptions(),oe.Prefill):""}),this.v1DataSnippets=(0,v.bo)("v1DataSnippets",()=>{const V=this.currentFormula(),oe=this.#t();return null!=V&&null!=oe?Oe.getSnippets(V,this.fieldsOptions(),oe.Prefill):[]}),this.log.fnIf("constructor")}initAfterItemSettingsAreReady(){const J=this.designerState(),[V,oe]=Object.entries(this.itemSettingsServices)[0],ge=oe.allProps(),xe=Object.keys(ge)[0],ce={...J,entityGuid:V,fieldName:xe,target:null!=xe?h.tC.Value:null};this.designerState.set(ce)}#t;setDesignerOpen(J){this.log.fnIf("setDesignerOpen",{isOpen:J}),this.designerState.set({...this.designerState(),isOpen:J})}static{this.\u0275fac=function(V){return new(V||ye)(l.KVO(f.b))}}static{this.\u0275prov=l.jDH({token:ye,factory:ye.\u0275fac})}}return ye})()},36849(ht,Xe,g){"use strict";g.d(Xe,{n:()=>r});var q=g(34435),le=g(69765),v=g(44813),f=g(16632),l=g(56884);let r=(()=>{class h extends f.r{constructor(){super((0,q.Tq)({ContentTypeService:h})),this.getId=d=>d.Id}addContentTypes(d){const m=v._.dtoToEavMany(d);this.addMany(m)}getContentTypeOfItem(d){const m=le.i.getContentTypeNameId(d);return this.get(m)}getAttribute(d,m){return this.get(d).Attributes.find(b=>b.Name===m)}getAttributeOfItem(d,m){return this.getContentTypeOfItem(d).Attributes.find(b=>b.Name===m)}static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275prov=l.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},38604(ht,Xe,g){"use strict";g.d(Xe,{a:()=>q});var q=function(le){return le.UI="ui",le.Form="form",le.PrimaryTranslatable="primaryTranslatable",le}(q||{})},44813(ht,Xe,g){"use strict";g.d(Xe,{_:()=>f});var q=g(48394),le=g(3346);class v{static dtoToEav(r){const h=q.g.dtoToEavMany(r.Metadata),u=le.h.mergeSettings(h);return{InputType:r.InputType,IsTitle:r.IsTitle,Metadata:h,Name:r.Name,Settings:u,Type:r.Type}}static dtoToEavMany(r){return null==r?[]:r.map(u=>v.dtoToEav(u))}}class f{static dtoToEav(r){const h=v.dtoToEavMany(r.Attributes),u=q.g.dtoToEavMany(r.Metadata),d=le.h.mergeSettings(u);return{Attributes:h,Id:r.Id,Metadata:u,Name:r.Name,Scope:r.Scope,Settings:d,Title:r.Title}}static dtoToEavMany(r){return null==r?null:r.map(u=>f.dtoToEav(u))}}},45129(ht,Xe,g){"use strict";g.d(Xe,{U:()=>le});var q=g(58021);class le{static create(f,l){return{value:f,dimensions:l}}static dtoToEav(f){return Object.entries(f).map(([r,h])=>{const u=r.split(",").map(d=>q.v.create(d));return this.create(h,u)})}static createEavFieldValue(f){return[{value:f,dimensions:[{dimCode:"*"}]}]}}},48394(ht,Xe,g){"use strict";g.d(Xe,{g:()=>le});var q=g(3346);class le{static dtoToEav(f){const l=q.h.dtoToEav(f.Attributes),r=this.dtoToEavMany(f.Metadata);return{Attributes:l,Guid:f.Guid,Id:f.Id,Owner:f.Owner,Type:f.Type,Version:f.Version,For:f.For??null,Metadata:r}}static dtoToEavMany(f){return null==f?null:f.map(r=>le.dtoToEav(r))}}},53991(ht,Xe,g){"use strict";g.d(Xe,{k:()=>l});var q=g(34435),le=g(48394),v=g(16632),f=g(56884);let l=(()=>{class r extends v.r{constructor(){super((0,q.Tq)({ContentTypeItemService:r})),this.getId=u=>u.Guid}addContentTypeItems(u){const d=le.g.dtoToEavMany(u);this.addMany(d)}static{this.\u0275fac=function(d){return new(d||r)}}static{this.\u0275prov=f.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},54839(ht,Xe,g){"use strict";g.d(Xe,{c:()=>r});var q=g(34435),le=g(68873),v=g(56884),f=g(50698);const l={all:!1,getAvailableEntities:!1,getEntities:!1};let r=(()=>{class h{constructor(d,m){this.http=d,this.context=m,this.log=(0,q.Tq)({QueryService:h},l)}getFromQuery(d,m,b,w){this.log.fnIf("getAvailableEntities",{queryUrl:d,params:m,fields:b,entitiesFilter:w});const S=!!m,N=(((m?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(S?`&${m}`:"")+"&$select="+(b??"")).substring(1);return this.http.post(`app/auto/query/${d}?${N}`,{Guids:w})}getEntities({contentTypes:d,itemIds:m,fields:b,log:w}){this.log.fnIf("getEntities",{log:w,contentTypes:d,itemIds:m,fields:b});const F=("&typeNames="+(d?.join(",")??"")+`&appId=${this.context.appId}&$select=`+(b??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${F}`,{Guids:m})}static{this.\u0275fac=function(m){return new(m||h)(v.KVO(f.Qq),v.KVO(le.o))}}static{this.\u0275prov=v.jDH({token:h,factory:h.\u0275fac})}}return h})()},55675(ht,Xe,g){"use strict";g.d(Xe,{J:()=>q});const q={Translate:"Translate",DontTranslate:"DontTranslate",MissingDefaultLangValue:"MissingDefaultLangValue",LinkReadOnly:"LinkReadOnly",LinkReadWrite:"LinkReadWrite",LinkCopyFrom:"LinkCopyFrom"}},55970(ht,Xe,g){"use strict";g.d(Xe,{AJ:()=>l,K3:()=>d,Yb:()=>r,a2:()=>le,j5:()=>u,jk:()=>f,si:()=>q,tC:()=>m,wB:()=>h,zD:()=>v});const q="Field.Settings.",le={Disabled:`${q}Disabled`,Name:`${q}Name`,Notes:`${q}Notes`,Required:`${q}Required`,Value:"Field.Value",Visible:`${q}Visible`,Validation:"Field.Validation"},v=Object.values(le),f={Options:"Field.Options",Selected:"Field.Selected"},l=Object.values(f),r=[f.Options,f.Selected],h=[f.Options,f.Selected],u={Collapsed:`${q}Collapsed`,DropdownValues:`${q}DropdownValues`},d=Object.values(u),m={...le,...u,...f}},58021(ht,Xe,g){"use strict";g.d(Xe,{v:()=>q});class q{static create(v){return{dimCode:v}}}},60827(ht,Xe,g){"use strict";g.d(Xe,{GI:()=>r,OK:()=>v,pk:()=>l,qe:()=>q});const q="function ",v="v2((data, context) => {\n  return data.value;\n});",l="v2((data, context, item) => {\n  return data.value;\n});",r={V1:"v1",V2:"v2"}},63966(ht,Xe,g){"use strict";g.d(Xe,{U:()=>v});var q=g(48394),le=g(45129);class v{static anyToEav(l){const r=l.Header.ClientData?.data;if(r)return this.#e(r,l,"from ClientData.data");const h=l.Header.ClientData?.overrideContents;return h?v.#e(h,l,"from ClientData.overrideContents"):v.dtoToEav(l)}static dtoToEav(l){const r=q.g.dtoToEav(l.Entity);return{...l,Entity:r}}static#e(l,r,h){const u=Object.fromEntries(Object.entries(l).map(([m,b])=>{const w=this.getType(b);return[m,{Values:le.U.createEavFieldValue(b),Type:w}]})),d={...q.g.dtoToEav(r.Entity),Attributes:u};return{...r,Entity:d}}static eavToObj(l){const r=l.Entity.Attributes,h={};for(const u in r){const d=r[u];!d.Values||0===d.Values.length||(h[u]=d.Values[0].value)}return h}static getType(l){switch(typeof l){case"string":return"String";case"number":return"Number";case"boolean":return"Boolean";default:return"Unknown"}}}},66177(ht,Xe,g){"use strict";g.d(Xe,{x:()=>le});var q=g(55675);class le{static getTranslationStateClass(f){switch(f){case q.J.MissingDefaultLangValue:return"localization-missing-default-lang-value";case q.J.Translate:case q.J.LinkCopyFrom:return"localization-translate";case q.J.DontTranslate:return"";case q.J.LinkReadOnly:return"localization-link-read-only";case q.J.LinkReadWrite:return"localization-link-read-write";default:return""}}static calculateSharedInfoMessage(f,l){f=le.calculateShortDimensions(f,l);const r=le.calculateEditAndReadDimensions(f),h=r.editableDimensions,u=r.readOnlyDimensions;let d="";const m=h.length>0,b=u.length>0;return m&&b?d=`${h.join(", ")}, (${u.join(", ")})`:m?d=h.join(", "):b&&(d=`(${u.join(", ")})`),d}static calculateShortDimensions(f,l){const r={},h=l.slice(0,l.indexOf("-"));return r[h]=[h],f.forEach(u=>{const m=u.slice(0,u.indexOf("-")).replace("~","");r[m]?r[m].push(u):r[m]=[u]}),f.map(u=>{const d=u.slice(0,u.indexOf("-")),m=d.replace("~","");return r[m].length>1?u:d})}static calculateEditAndReadDimensions(f){return{editableDimensions:[],readOnlyDimensions:f.map(l=>l.replace("~",""))}}}},69765(ht,Xe,g){"use strict";g.d(Xe,{i:()=>q});class q{static getContentTypeNameId(v){return v.Entity.Type?.Id??v.Header.ContentTypeName}}},69914(ht,Xe,g){"use strict";g.d(Xe,{$:()=>v});var q=g(36124),le=g(80436);let v=(()=>{class f{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustHtml(r)}static{this.\u0275fac=function(h){return new(h||f)(q.rXU(le.up,16))}}static{this.\u0275pipe=q.EJ8({name:"safeHtml",type:f,pure:!0})}}return f})()},70519(ht,Xe,g){"use strict";function q(le){const v=document.createElement("textarea");v.value=le,v.setAttribute("readonly",""),v.style.position="absolute",v.style.left="-9999px",document.body.appendChild(v);const f=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);v.select(),document.execCommand("copy"),document.body.removeChild(v),f&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(f))}g.d(Xe,{l:()=>q})},75067(ht,Xe,g){"use strict";g.d(Xe,{Z:()=>N,$:()=>B});var q=g(60827),le=g(56884),v=g(87149);class f{constructor(M,D,I,W,R,L){this.designerSvc=M,this.translate=D,this.logSvc=I,this.formula=W,this.ctTitle=R,this.formulaProps=L,this.isOpen=!1,this.isOpen=this.#e(W)}showStart(){if(!this.isOpen)return;const M=this.formula;console.log(`Running formula${M.version?.toLocaleUpperCase()} for Entity: "${this.ctTitle}", Field: "${M.fieldName}", Target: "${M.target}", arguments:`,this.formulaProps)}showResult(M,D,I){this.designerSvc.cache.cacheResults(this.formula,M,!1,!1),this.isOpen&&console.log("Formula result:",M)}showError(M){const D=this.formula,I=`Error in formula calculation for Entity: "${this.ctTitle}", Field: "${D.fieldName}", Target: "${D.target}"`;this.designerSvc.cache.cacheResults(D,void 0,!0,!1),this.logSvc.addLog(v.E.Error,I,M),this.isOpen?console.error(I,M):this.logSvc.showMessage(this.translate.instant("Errors.FormulaCalculation"),2e3)}#e(M){return(0,le.O8t)(()=>{const D=this.designerSvc.designerState();return D.isOpen&&D.entityGuid===M.entityGuid&&D.fieldName===M.fieldName&&D.target===M.target})}}var l=g(28003),r=g(13050);class u{#e;constructor(M){this.#e=M}getEntities(){return this.#t("getEntities"),this.#e.itemService.getMany(this.#e.formConfig.config.itemGuids).map(D=>({guid:D.Entity.Guid,id:D.Entity.Id,type:{guid:D.Entity.Type.Id,name:D.Entity.Type.Name}}))}getSettings(M){return this.#t("getSettings"),this.#e.fieldsSettingsSvc.settings[M]()}getValues(M){this.#t("getValues");const D=this.#e.itemService.get(M);return new r.bT(this.#e.language).currentValues(D.Entity.Attributes)}#t(M){const D='A formula in this dialog is using an experimental feature: "{0}" - this will be removed soon.'.replace("{0}",M);console.error(D),!this.#e.warningsObsolete[M]&&(this.#e.warningsObsolete[M]=!0,alert(D))}}class d{constructor(M,D){const I=M.runParameters.formula;this.cache=I.cache,this.debug=M.debugEnabled,this.sxc=I.sxc,this.user=I.user;const{getSetting:W,...R}=M.runParameters.formula.app;this.app=Object.assign(new S(M),R),this.target=new F(M);const L=M.language,y=M.languages;this.culture={code:L.current,name:y.find(C=>C.NameId===L.current)?.Culture},this.features=new b(M),this.form=new w(M),this.entities=new m(M),this.xp=D}}class m{#e;constructor(M){this.#e=M}getAll(){return this.#e.itemService.getMany(this.#e.formConfig.config.itemGuids).map(D=>({guid:D.Entity.Guid,id:D.Entity.Id,type:{guid:D.Entity.Type.Id,name:D.Entity.Type.Name}}))}getOfType(M){return this.getAll().find(D=>D.type.guid==M||D.type.name==M)}}class b{#e;constructor(M){this.#e=M}isEnabled(M){return this.#e.features().find(D=>D.nameId===M)?.isEnabled??!1}}class w{#e;constructor(M){this.#e=M}runFormulas(){console.error("A formula uses form.runFormulas(). This is deprecated since v18.. It is now disabled. Change formula to V2 and return a promise to achieve the same effect.")}}class S{#e;constructor(M){this.#e=M}getSetting(M){return this.#e.runParameters.formula.version===q.GI.V1?(console.warn("app.getSetting() is not available in v1 formulas, please use v2."),"\u26a0\ufe0f error - see console"):this.#e.formConfig.config.settings.Values[M]??(console.warn(`Error: Setting '${M}' not found. Did you configure it in the ContentType to be included? See https://go.2sxc.org/formulas`),"\u26a0\ufe0f error - see console")}}class F{#e;constructor(M){this.#e=M;const D=M.runParameters.formula;this.entity=D.targetEntity;const I=D.isValue||D.isValidation;this.name=I?D.fieldName:D.target.substring(D.target.lastIndexOf(".")+1),this.type=I?D.target:D.target.substring(0,D.target.lastIndexOf("."))}}class E{#e;#t;#n;#i;constructor(M){this.#e=M,this.#t=M.runParameters,this.#i=this.#t.pickerHelper.infos,this.#n=this.#t.pickerHelper.infos.mapper}get default(){const{formula:M}=this.#t;return M.isValue?this.#r(this.#t.defaultValueHelper().getDefaultOrPrefillValue()):M.isSetting?this.#t.settingsInitial[M.settingName]:M.isNewPicker?this.#i.options.list:void 0}get initial(){const M=this.#t.formula;return M.isValue?this.#r(this.#e.initialFormValues[M.fieldName]):null}get parameters(){return this.#e.parameters.all()}get prefill(){const{formula:M}=this.#t;return M.isValue?this.#r(this.#t.defaultValueHelper().getDefaultOrPrefillValue(!0)):null}get value(){const M=this.#t.formula;return M.isValue?this.#r(this.#t.currentValues[M.fieldName]):M.isSetting?this.#t.settingsCurrent[M.settingName]:M.isValidation?{severity:"",message:""}:void 0}get selected(){return this.#a("list")}get selectedRaw(){return this.#a("listRaw")}#a(M){const D=this.#i.selected[M];return this.#i.picker.selectedCopy(D)}get options(){return this.#s("list")}get optionsRaw(){return this.#s("listRaw")}#s(M){return this.#i.options[M]}#r(M){return this.#n?.toUi(M)??M}}class B{constructor(M,D,I,W,R,L){this.designerSvc=M,this.translate=D,this.logSvc=I,this.contentType=W,this.entityGuid=R,this.ctTitle=L}getPartsFor(M){const D=M.runParameters.formula,I=this.#e(M),W=new f(this.designerSvc,this.translate,this.logSvc,D,this.ctTitle,I);return{formula:D,fieldName:D.fieldName,params:I,title:this.ctTitle,devHelper:W,valHelper:new l.d(this.contentType,this.entityGuid,D.fieldName,D.isValue,D.inputType,W.isOpen,M.runParameters.pickerHelper.infos.mapper)}}#e(M){const{formula:D,currentValues:I}=M.runParameters;switch(D.version){case q.GI.V1:case q.GI.V2:const W=Object.assign(new E(M),I),R=new u(M);return{data:W,context:new d(M,R)};default:throw new Error(`Formula version '${D.version}' unknown not supported`)}}}class N{constructor(M){this.prefill=M}all(){return this.#e||(this.#e=this.prefill?JSON.parse(JSON.stringify(this.prefill)):{}),this.#e}#e}},77706(ht,Xe,g){"use strict";g.d(Xe,{q:()=>d});var q=g(51612),le=g(34435),v=g(36740),f=g(98712),l=g(66177),r=g(47314),h=g(55675);const u={all:!1,mergeGenericSettings:!0,getDefaultSettings:!1,fields:[...v.z,"GroupPreview"]};class d{constructor(w){this.log=(0,le.Tq)({FieldsSettingsHelpers:d},u)}mergeGenericSettings(w,S){const F=this.log.fnIfInFields("mergeGenericSettings",w,{fieldName:w,settings:S}),E=S;if(null==E.SettingsGeneric)return F.r(S,"No generic settings");try{const B=JSON.parse(E.SettingsGeneric);return F.r({...S,...B},"Merged generic settings")}catch(B){return console.error("mergeGenericSettings",B),F.r(S,"Error parsing generic settings")}}getDefaultSettings(w){const S=m.moveDeprecatedSettings({...w});S.Name??="",S.Placeholder??="",S.Notes??="",S.Required??=!1,S.Disabled??=!1,S.DisableTranslation??=!1,S.Visible??=!0,null!=S.DefaultCollapsed&&(S.Collapsed=S.DefaultCollapsed,delete S.DefaultCollapsed),S.Formulas??=[];let F=f.a.singleton().get(w.InputType);return S.DisableAutoTranslation??=!F?.canAutoTranslate,S}isLastInGroup(w,S){const F=w.Attributes.indexOf(S);return null==w.Attributes[F+1]||!(F<w.Attributes.findIndex(B=>q.Q.isGroupStart(B.InputType))||!q.Q.isGroupEnd(S.InputType)&&!q.Q.endsPreviousGroup(w.Attributes[F+1].InputType))}getDisabledBecauseTranslations(w,S,F){const E=new r.U(w,F);return!(F.current===F.primary||E.hasPrimary&&!S&&E.hasEditableValues)}getTranslationState(w,S,F,E){let B,N;E&&this.log.fn("getTranslationState",{attributeValues:w,disableTranslation:S,language:F});const ee=new r.U(w,F);if(S)B="LangMenu.InAllLanguages",N="";else if(ee.hasPrimary){const I=ee.hasEditableValues,W=ee.hasCurrentReadonly;if(I||W){const R=ee.current.dimensions.map(y=>y.dimCode).filter(y=>!y.includes(F.current));R.length>0?(I?B="LangMenu.In":W&&(B="LangMenu.From"),N=l.x.calculateSharedInfoMessage(R,F.current)):(B="",N="")}else B="LangMenu.UseDefault",N=""}else B="LangMenu.MissingDefaultLangValue",N=F.primary;const M=this.#e(w,S,F);return{infoLabel:B,infoMessage:N,language:M.language,linkType:M.linkType}}#e(w,S,F){const E=new r.U(w,F);if(!E.hasPrimary)return{language:"",linkType:h.J.MissingDefaultLangValue};if(S)return{language:"",linkType:h.J.DontTranslate};if(E.hasEditableValues){const B=E.current.dimensions.filter(N=>N.dimCode!==F.current);return B.length>0?{language:B[0].dimCode,linkType:h.J.LinkReadWrite}:{language:"",linkType:h.J.Translate}}return E.hasCurrentReadonly?{language:E.current.dimensions.filter(N=>N.dimCode!==F.current)[0].dimCode,linkType:h.J.LinkReadOnly}:{language:"",linkType:h.J.DontTranslate}}}class m{static moveDeprecatedSettings(w){var S=w;return null==S.VisibleInEditUI||(w.Visible=S.VisibleInEditUI,delete S.VisibleInEditUI),w}}},78656(ht,Xe,g){"use strict";g.d(Xe,{i:()=>l});var q=g(56884),le=g(34435),v=g(58798);const f="user-settings";let l=(()=>{class h{constructor(){this.log=(0,le.Tq)({UserPreferences:h}),this.#i={},this.log.fn("constructor")}get local(){return this.#e??=new v.Yz(f)}#e;get session(){return this.#t??=new v.pj(f)}#t;get(d,m=!1){return(m?this.local:this.session).get(d)}set(d,m,b=!1){(b?this.local:this.session).add(d,m)}part({key:d,data:m}){return this.#n(d,m,!0)}#n(d,m,b=!1){if(this.#i[d])return this.#i[d];const w=new r(this,d,m,b);return this.#i[d]=w,w}#i;static{this.\u0275fac=function(m){return new(m||h)}}static{this.\u0275prov=q.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})();class r{constructor(u,d,m,b=!1){this.userSettings=u,this.storeKey=d,this.longTerm=b,this.log=(0,le.Tq)({UserPreferencesPart:r});const w={...m,...u.get(d,b)};this.log.fn("constructor",w),this.#e=(0,q.vPA)(w)}#e;get snapshot(){return this.#e()}get data(){return this.#e.asReadonly()}get(u){return this.#e()[u]}set(u,d){this.#e.update(m=>({...m,[u]:d})),this.#t()}toggle(u){this.#e.update(d=>({...d,[u]:!d[u]})),this.#t()}setAll(u){this.#e.set(u),this.#t()}setMany(u){this.#e.update(d=>({...d,...u})),this.#t()}#t(){const u=this.#e();this.log.fn("save",u),this.userSettings.set(this.storeKey,this.#e(),this.longTerm)}}},85176(ht){self,ht.exports=function(){var Xe={3099:function(v){v.exports=function(f){if("function"!=typeof f)throw TypeError(String(f)+" is not a function");return f}},6077:function(v,f,l){var r=l(111);v.exports=function(h){if(!r(h)&&null!==h)throw TypeError("Can't set "+String(h)+" as a prototype");return h}},1223:function(v,f,l){var r=l(5112),h=l(30),u=l(3070),d=r("unscopables"),m=Array.prototype;null==m[d]&&u.f(m,d,{configurable:!0,value:h(null)}),v.exports=function(b){m[d][b]=!0}},1530:function(v,f,l){"use strict";var r=l(8710).charAt;v.exports=function(h,u,d){return u+(d?r(h,u).length:1)}},5787:function(v){v.exports=function(f,l,r){if(!(f instanceof l))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return f}},9670:function(v,f,l){var r=l(111);v.exports=function(h){if(!r(h))throw TypeError(String(h)+" is not an object");return h}},4019:function(v){v.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:function(v,f,l){"use strict";var be,r=l(4019),h=l(9781),u=l(7854),d=l(111),m=l(6656),b=l(648),w=l(8880),S=l(1320),F=l(3070).f,E=l(9518),B=l(7674),N=l(5112),ee=l(9711),M=u.Int8Array,D=M&&M.prototype,I=u.Uint8ClampedArray,W=I&&I.prototype,R=M&&E(M),L=D&&E(D),y=Object.prototype,C=y.isPrototypeOf,A=N("toStringTag"),X=ee("TYPED_ARRAY_TAG"),K=r&&!!B&&"Opera"!==b(u.opera),ve=!1,Oe={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},He={BigInt64Array:8,BigUint64Array:8},qe=function(V){if(!d(V))return!1;var oe=b(V);return m(Oe,oe)||m(He,oe)};for(be in Oe)u[be]||(K=!1);if((!K||"function"!=typeof R||R===Function.prototype)&&(R=function(){throw TypeError("Incorrect invocation")},K))for(be in Oe)u[be]&&B(u[be],R);if((!K||!L||L===y)&&(L=R.prototype,K))for(be in Oe)u[be]&&B(u[be].prototype,L);if(K&&E(W)!==L&&B(W,L),h&&!m(L,A))for(be in ve=!0,F(L,A,{get:function(){return d(this)?this[X]:void 0}}),Oe)u[be]&&w(u[be],X,be);v.exports={NATIVE_ARRAY_BUFFER_VIEWS:K,TYPED_ARRAY_TAG:ve&&X,aTypedArray:function(V){if(qe(V))return V;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(V){if(B){if(C.call(R,V))return V}else for(var oe in Oe)if(m(Oe,be)){var ge=u[oe];if(ge&&(V===ge||C.call(ge,V)))return V}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(V,oe,ge){if(h){if(ge)for(var xe in Oe){var Re=u[xe];Re&&m(Re.prototype,V)&&delete Re.prototype[V]}(!L[V]||ge)&&S(L,V,ge?oe:K&&D[V]||oe)}},exportTypedArrayStaticMethod:function(V,oe,ge){var xe,Re;if(h){if(B){if(ge)for(xe in Oe)(Re=u[xe])&&m(Re,V)&&delete Re[V];if(R[V]&&!ge)return;try{return S(R,V,ge?oe:K&&M[V]||oe)}catch{}}for(xe in Oe)(Re=u[xe])&&(!Re[V]||ge)&&S(Re,V,oe)}},isView:function(oe){if(!d(oe))return!1;var ge=b(oe);return"DataView"===ge||m(Oe,ge)||m(He,ge)},isTypedArray:qe,TypedArray:R,TypedArrayPrototype:L}},3331:function(v,f,l){"use strict";var r=l(7854),h=l(9781),u=l(4019),d=l(8880),m=l(2248),b=l(7293),w=l(5787),S=l(9958),F=l(7466),E=l(7067),B=l(1179),N=l(9518),ee=l(7674),M=l(8006).f,D=l(3070).f,I=l(1285),W=l(8003),R=l(9909),L=R.get,y=R.set,C="ArrayBuffer",A="DataView",X="prototype",ve="Wrong index",be=r[C],Oe=be,He=r[A],je=He&&He[X],qe=Object.prototype,Le=r.RangeError,ye=B.pack,Ae=B.unpack,J=function(Ee){return[255&Ee]},V=function(Ee){return[255&Ee,Ee>>8&255]},oe=function(Ee){return[255&Ee,Ee>>8&255,Ee>>16&255,Ee>>24&255]},ge=function(Ee){return Ee[3]<<24|Ee[2]<<16|Ee[1]<<8|Ee[0]},xe=function(Ee){return ye(Ee,23,4)},Re=function(Ee){return ye(Ee,52,8)},ce=function(Ee,re){D(Ee[X],re,{get:function(){return L(this)[re]}})},We=function(Ee,re,Me,Ge){var ot=E(Me),lt=L(Ee);if(ot+re>lt.byteLength)throw Le(ve);var Tt=L(lt.buffer).bytes,Ue=ot+lt.byteOffset,Ne=Tt.slice(Ue,Ue+re);return Ge?Ne:Ne.reverse()},Ve=function(Ee,re,Me,Ge,ot,lt){var Tt=E(Me),Ue=L(Ee);if(Tt+re>Ue.byteLength)throw Le(ve);for(var Ne=L(Ue.buffer).bytes,et=Tt+Ue.byteOffset,_t=Ge(+ot),tt=0;tt<re;tt++)Ne[et+tt]=_t[lt?tt:re-tt-1]};if(u){if(!b(function(){be(1)})||!b(function(){new be(-1)})||b(function(){return new be,new be(1.5),new be(NaN),be.name!=C})){for(var ue,Ie=(Oe=function(re){return w(this,Oe),new be(E(re))})[X]=be[X],Te=M(be),ze=0;Te.length>ze;)(ue=Te[ze++])in Oe||d(Oe,ue,be[ue]);Ie.constructor=Oe}ee&&N(je)!==qe&&ee(je,qe);var Se=new He(new Oe(2)),Fe=je.setInt8;Se.setInt8(0,2147483648),Se.setInt8(1,2147483649),(Se.getInt8(0)||!Se.getInt8(1))&&m(je,{setInt8:function(re,Me){Fe.call(this,re,Me<<24>>24)},setUint8:function(re,Me){Fe.call(this,re,Me<<24>>24)}},{unsafe:!0})}else Oe=function(re){w(this,Oe,C);var Me=E(re);y(this,{bytes:I.call(new Array(Me),0),byteLength:Me}),h||(this.byteLength=Me)},He=function(re,Me,Ge){w(this,He,A),w(re,Oe,A);var ot=L(re).byteLength,lt=S(Me);if(lt<0||lt>ot)throw Le("Wrong offset");if(lt+(Ge=void 0===Ge?ot-lt:F(Ge))>ot)throw Le("Wrong length");y(this,{buffer:re,byteLength:Ge,byteOffset:lt}),h||(this.buffer=re,this.byteLength=Ge,this.byteOffset=lt)},h&&(ce(Oe,"byteLength"),ce(He,"buffer"),ce(He,"byteLength"),ce(He,"byteOffset")),m(He[X],{getInt8:function(re){return We(this,1,re)[0]<<24>>24},getUint8:function(re){return We(this,1,re)[0]},getInt16:function(re){var Me=We(this,2,re,arguments.length>1?arguments[1]:void 0);return(Me[1]<<8|Me[0])<<16>>16},getUint16:function(re){var Me=We(this,2,re,arguments.length>1?arguments[1]:void 0);return Me[1]<<8|Me[0]},getInt32:function(re){return ge(We(this,4,re,arguments.length>1?arguments[1]:void 0))},getUint32:function(re){return ge(We(this,4,re,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(re){return Ae(We(this,4,re,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(re){return Ae(We(this,8,re,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(re,Me){Ve(this,1,re,J,Me)},setUint8:function(re,Me){Ve(this,1,re,J,Me)},setInt16:function(re,Me){Ve(this,2,re,V,Me,arguments.length>2?arguments[2]:void 0)},setUint16:function(re,Me){Ve(this,2,re,V,Me,arguments.length>2?arguments[2]:void 0)},setInt32:function(re,Me){Ve(this,4,re,oe,Me,arguments.length>2?arguments[2]:void 0)},setUint32:function(re,Me){Ve(this,4,re,oe,Me,arguments.length>2?arguments[2]:void 0)},setFloat32:function(re,Me){Ve(this,4,re,xe,Me,arguments.length>2?arguments[2]:void 0)},setFloat64:function(re,Me){Ve(this,8,re,Re,Me,arguments.length>2?arguments[2]:void 0)}});W(Oe,C),W(He,A),v.exports={ArrayBuffer:Oe,DataView:He}},1048:function(v,f,l){"use strict";var r=l(7908),h=l(1400),u=l(7466),d=Math.min;v.exports=[].copyWithin||function(b,w){var S=r(this),F=u(S.length),E=h(b,F),B=h(w,F),N=arguments.length>2?arguments[2]:void 0,ee=d((void 0===N?F:h(N,F))-B,F-E),M=1;for(B<E&&E<B+ee&&(M=-1,B+=ee-1,E+=ee-1);ee-- >0;)B in S?S[E]=S[B]:delete S[E],E+=M,B+=M;return S}},1285:function(v,f,l){"use strict";var r=l(7908),h=l(1400),u=l(7466);v.exports=function(m){for(var b=r(this),w=u(b.length),S=arguments.length,F=h(S>1?arguments[1]:void 0,w),E=S>2?arguments[2]:void 0,B=void 0===E?w:h(E,w);B>F;)b[F++]=m;return b}},8533:function(v,f,l){"use strict";var r=l(2092).forEach,u=l(9341)("forEach");v.exports=u?[].forEach:function(m){return r(this,m,arguments.length>1?arguments[1]:void 0)}},8457:function(v,f,l){"use strict";var r=l(9974),h=l(7908),u=l(3411),d=l(7659),m=l(7466),b=l(6135),w=l(1246);v.exports=function(F){var W,R,L,y,C,A,E=h(F),B="function"==typeof this?this:Array,N=arguments.length,ee=N>1?arguments[1]:void 0,M=void 0!==ee,D=w(E),I=0;if(M&&(ee=r(ee,N>2?arguments[2]:void 0,2)),null==D||B==Array&&d(D))for(R=new B(W=m(E.length));W>I;I++)A=M?ee(E[I],I):E[I],b(R,I,A);else for(C=(y=D.call(E)).next,R=new B;!(L=C.call(y)).done;I++)A=M?u(y,ee,[L.value,I],!0):L.value,b(R,I,A);return R.length=I,R}},1318:function(v,f,l){var r=l(5656),h=l(7466),u=l(1400),d=function(m){return function(b,w,S){var N,F=r(b),E=h(F.length),B=u(S,E);if(m&&w!=w){for(;E>B;)if((N=F[B++])!=N)return!0}else for(;E>B;B++)if((m||B in F)&&F[B]===w)return m||B||0;return!m&&-1}};v.exports={includes:d(!0),indexOf:d(!1)}},2092:function(v,f,l){var r=l(9974),h=l(8361),u=l(7908),d=l(7466),m=l(5417),b=[].push,w=function(S){var F=1==S,E=2==S,B=3==S,N=4==S,ee=6==S,M=7==S,D=5==S||ee;return function(I,W,R,L){for(var Oe,He,y=u(I),C=h(y),A=r(W,R,3),X=d(C.length),K=0,ve=L||m,be=F?ve(I,X):E||M?ve(I,0):void 0;X>K;K++)if((D||K in C)&&(He=A(Oe=C[K],K,y),S))if(F)be[K]=He;else if(He)switch(S){case 3:return!0;case 5:return Oe;case 6:return K;case 2:b.call(be,Oe)}else switch(S){case 4:return!1;case 7:b.call(be,Oe)}return ee?-1:B||N?N:be}};v.exports={forEach:w(0),map:w(1),filter:w(2),some:w(3),every:w(4),find:w(5),findIndex:w(6),filterOut:w(7)}},6583:function(v,f,l){"use strict";var r=l(5656),h=l(9958),u=l(7466),d=l(9341),m=Math.min,b=[].lastIndexOf,w=!!b&&1/[1].lastIndexOf(1,-0)<0,S=d("lastIndexOf");v.exports=w||!S?function(B){if(w)return b.apply(this,arguments)||0;var N=r(this),ee=u(N.length),M=ee-1;for(arguments.length>1&&(M=m(M,h(arguments[1]))),M<0&&(M=ee+M);M>=0;M--)if(M in N&&N[M]===B)return M||0;return-1}:b},1194:function(v,f,l){var r=l(7293),h=l(5112),u=l(7392),d=h("species");v.exports=function(m){return u>=51||!r(function(){var b=[];return(b.constructor={})[d]=function(){return{foo:1}},1!==b[m](Boolean).foo})}},9341:function(v,f,l){"use strict";var r=l(7293);v.exports=function(h,u){var d=[][h];return!!d&&r(function(){d.call(null,u||function(){throw 1},1)})}},3671:function(v,f,l){var r=l(3099),h=l(7908),u=l(8361),d=l(7466),m=function(b){return function(w,S,F,E){r(S);var B=h(w),N=u(B),ee=d(B.length),M=b?ee-1:0,D=b?-1:1;if(F<2)for(;;){if(M in N){E=N[M],M+=D;break}if(M+=D,b?M<0:ee<=M)throw TypeError("Reduce of empty array with no initial value")}for(;b?M>=0:ee>M;M+=D)M in N&&(E=S(E,N[M],M,B));return E}};v.exports={left:m(!1),right:m(!0)}},5417:function(v,f,l){var r=l(111),h=l(3157),d=l(5112)("species");v.exports=function(m,b){var w;return h(m)&&("function"!=typeof(w=m.constructor)||w!==Array&&!h(w.prototype)?r(w)&&null===(w=w[d])&&(w=void 0):w=void 0),new(void 0===w?Array:w)(0===b?0:b)}},3411:function(v,f,l){var r=l(9670),h=l(9212);v.exports=function(u,d,m,b){try{return b?d(r(m)[0],m[1]):d(m)}catch(w){throw h(u),w}}},7072:function(v,f,l){var h=l(5112)("iterator"),u=!1;try{var d=0,m={next:function(){return{done:!!d++}},return:function(){u=!0}};m[h]=function(){return this},Array.from(m,function(){throw 2})}catch{}v.exports=function(b,w){if(!w&&!u)return!1;var S=!1;try{var F={};F[h]=function(){return{next:function(){return{done:S=!0}}}},b(F)}catch{}return S}},4326:function(v){var f={}.toString;v.exports=function(l){return f.call(l).slice(8,-1)}},648:function(v,f,l){var r=l(1694),h=l(4326),d=l(5112)("toStringTag"),m="Arguments"==h(function(){return arguments}());v.exports=r?h:function(w){var S,F,E;return void 0===w?"Undefined":null===w?"Null":"string"==typeof(F=function(w,S){try{return w[S]}catch{}}(S=Object(w),d))?F:m?h(S):"Object"==(E=h(S))&&"function"==typeof S.callee?"Arguments":E}},9920:function(v,f,l){var r=l(6656),h=l(3887),u=l(1236),d=l(3070);v.exports=function(m,b){for(var w=h(b),S=d.f,F=u.f,E=0;E<w.length;E++){var B=w[E];r(m,B)||S(m,B,F(b,B))}}},8544:function(v,f,l){var r=l(7293);v.exports=!r(function(){function h(){}return h.prototype.constructor=null,Object.getPrototypeOf(new h)!==h.prototype})},4994:function(v,f,l){"use strict";var r=l(3383).IteratorPrototype,h=l(30),u=l(9114),d=l(8003),m=l(7497),b=function(){return this};v.exports=function(w,S,F){var E=S+" Iterator";return w.prototype=h(r,{next:u(1,F)}),d(w,E,!1,!0),m[E]=b,w}},8880:function(v,f,l){var r=l(9781),h=l(3070),u=l(9114);v.exports=r?function(d,m,b){return h.f(d,m,u(1,b))}:function(d,m,b){return d[m]=b,d}},9114:function(v){v.exports=function(f,l){return{enumerable:!(1&f),configurable:!(2&f),writable:!(4&f),value:l}}},6135:function(v,f,l){"use strict";var r=l(7593),h=l(3070),u=l(9114);v.exports=function(d,m,b){var w=r(m);w in d?h.f(d,w,u(0,b)):d[w]=b}},654:function(v,f,l){"use strict";var r=l(2109),h=l(4994),u=l(9518),d=l(7674),m=l(8003),b=l(8880),w=l(1320),S=l(5112),F=l(1913),E=l(7497),B=l(3383),N=B.IteratorPrototype,ee=B.BUGGY_SAFARI_ITERATORS,M=S("iterator"),D="keys",I="values",W="entries",R=function(){return this};v.exports=function(L,y,C,A,X,K,ve){h(C,y,A);var Ae,J,V,be=function(oe){if(oe===X&&Le)return Le;if(!ee&&oe in je)return je[oe];switch(oe){case D:case I:case W:return function(){return new C(this,oe)}}return function(){return new C(this)}},Oe=y+" Iterator",He=!1,je=L.prototype,qe=je[M]||je["@@iterator"]||X&&je[X],Le=!ee&&qe||be(X),ye="Array"==y&&je.entries||qe;if(ye&&(Ae=u(ye.call(new L)),N!==Object.prototype&&Ae.next&&(!F&&u(Ae)!==N&&(d?d(Ae,N):"function"!=typeof Ae[M]&&b(Ae,M,R)),m(Ae,Oe,!0,!0),F&&(E[Oe]=R))),X==I&&qe&&qe.name!==I&&(He=!0,Le=function(){return qe.call(this)}),(!F||ve)&&je[M]!==Le&&b(je,M,Le),E[y]=Le,X)if(J={values:be(I),keys:K?Le:be(D),entries:be(W)},ve)for(V in J)(ee||He||!(V in je))&&w(je,V,J[V]);else r({target:y,proto:!0,forced:ee||He},J);return J}},9781:function(v,f,l){var r=l(7293);v.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(v,f,l){var r=l(7854),h=l(111),u=r.document,d=h(u)&&h(u.createElement);v.exports=function(m){return d?u.createElement(m):{}}},8324:function(v){v.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(v,f,l){var r=l(5005);v.exports=r("navigator","userAgent")||""},7392:function(v,f,l){var b,w,r=l(7854),h=l(8113),u=r.process,d=u&&u.versions,m=d&&d.v8;m?w=(b=m.split("."))[0]+b[1]:h&&(!(b=h.match(/Edge\/(\d+)/))||b[1]>=74)&&(b=h.match(/Chrome\/(\d+)/))&&(w=b[1]),v.exports=w&&+w},748:function(v){v.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(v,f,l){var r=l(7854),h=l(1236).f,u=l(8880),d=l(1320),m=l(3505),b=l(9920),w=l(4705);v.exports=function(S,F){var M,D,I,W,R,E=S.target,B=S.global,N=S.stat;if(M=B?r:N?r[E]||m(E,{}):(r[E]||{}).prototype)for(D in F){if(W=F[D],I=S.noTargetGet?(R=h(M,D))&&R.value:M[D],!w(B?D:E+(N?".":"#")+D,S.forced)&&void 0!==I){if(typeof W==typeof I)continue;b(W,I)}(S.sham||I&&I.sham)&&u(W,"sham",!0),d(M,D,W,S)}}},7293:function(v){v.exports=function(f){try{return!!f()}catch{return!0}}},7007:function(v,f,l){"use strict";l(4916);var r=l(1320),h=l(7293),u=l(5112),d=l(2261),m=l(8880),b=u("species"),w=!h(function(){var N=/./;return N.exec=function(){var ee=[];return ee.groups={a:"7"},ee},"7"!=="".replace(N,"$<a>")}),S="$0"==="a".replace(/./,"$0"),F=u("replace"),E=!!/./[F]&&""===/./[F]("a","$0"),B=!h(function(){var N=/(?:)/,ee=N.exec;N.exec=function(){return ee.apply(this,arguments)};var M="ab".split(N);return 2!==M.length||"a"!==M[0]||"b"!==M[1]});v.exports=function(N,ee,M,D){var I=u(N),W=!h(function(){var X={};return X[I]=function(){return 7},7!=""[N](X)}),R=W&&!h(function(){var X=!1,K=/a/;return"split"===N&&((K={}).constructor={},K.constructor[b]=function(){return K},K.flags="",K[I]=/./[I]),K.exec=function(){return X=!0,null},K[I](""),!X});if(!W||!R||"replace"===N&&(!w||!S||E)||"split"===N&&!B){var L=/./[I],y=M(I,""[N],function(X,K,ve,be,Oe){return K.exec===d?W&&!Oe?{done:!0,value:L.call(K,ve,be)}:{done:!0,value:X.call(ve,K,be)}:{done:!1}},{REPLACE_KEEPS_$0:S,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:E}),A=y[1];r(String.prototype,N,y[0]),r(RegExp.prototype,I,2==ee?function(X,K){return A.call(X,this,K)}:function(X){return A.call(X,this)})}D&&m(RegExp.prototype[I],"sham",!0)}},9974:function(v,f,l){var r=l(3099);v.exports=function(h,u,d){if(r(h),void 0===u)return h;switch(d){case 0:return function(){return h.call(u)};case 1:return function(m){return h.call(u,m)};case 2:return function(m,b){return h.call(u,m,b)};case 3:return function(m,b,w){return h.call(u,m,b,w)}}return function(){return h.apply(u,arguments)}}},5005:function(v,f,l){var r=l(857),h=l(7854),u=function(d){return"function"==typeof d?d:void 0};v.exports=function(d,m){return arguments.length<2?u(r[d])||u(h[d]):r[d]&&r[d][m]||h[d]&&h[d][m]}},1246:function(v,f,l){var r=l(648),h=l(7497),d=l(5112)("iterator");v.exports=function(m){if(null!=m)return m[d]||m["@@iterator"]||h[r(m)]}},8554:function(v,f,l){var r=l(9670),h=l(1246);v.exports=function(u){var d=h(u);if("function"!=typeof d)throw TypeError(String(u)+" is not iterable");return r(d.call(u))}},647:function(v,f,l){var r=l(7908),h=Math.floor,u="".replace,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;v.exports=function(b,w,S,F,E,B){var N=S+b.length,ee=F.length,M=m;return void 0!==E&&(E=r(E),M=d),u.call(B,M,function(D,I){var W;switch(I.charAt(0)){case"$":return"$";case"&":return b;case"`":return w.slice(0,S);case"'":return w.slice(N);case"<":W=E[I.slice(1,-1)];break;default:var R=+I;if(0===R)return D;if(R>ee){var L=h(R/10);return 0===L?D:L<=ee?void 0===F[L-1]?I.charAt(1):F[L-1]+I.charAt(1):D}W=F[R-1]}return void 0===W?"":W})}},7854:function(v,f,l){var r=function(h){return h&&h.Math==Math&&h};v.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof l.g&&l.g)||function(){return this}()||Function("return this")()},6656:function(v){var f={}.hasOwnProperty;v.exports=function(l,r){return f.call(l,r)}},3501:function(v){v.exports={}},490:function(v,f,l){var r=l(5005);v.exports=r("document","documentElement")},4664:function(v,f,l){var r=l(9781),h=l(7293),u=l(317);v.exports=!r&&!h(function(){return 7!=Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a})},1179:function(v){var f=Math.abs,l=Math.pow,r=Math.floor,h=Math.log,u=Math.LN2;v.exports={pack:function(b,w,S){var I,W,R,F=new Array(S),E=8*S-w-1,B=(1<<E)-1,N=B>>1,ee=23===w?l(2,-24)-l(2,-77):0,M=b<0||0===b&&1/b<0?1:0,D=0;for((b=f(b))!=b||b===1/0?(W=b!=b?1:0,I=B):(I=r(h(b)/u),b*(R=l(2,-I))<1&&(I--,R*=2),(b+=I+N>=1?ee/R:ee*l(2,1-N))*R>=2&&(I++,R/=2),I+N>=B?(W=0,I=B):I+N>=1?(W=(b*R-1)*l(2,w),I+=N):(W=b*l(2,N-1)*l(2,w),I=0));w>=8;F[D++]=255&W,W/=256,w-=8);for(I=I<<w|W,E+=w;E>0;F[D++]=255&I,I/=256,E-=8);return F[--D]|=128*M,F},unpack:function(b,w){var I,S=b.length,F=8*S-w-1,E=(1<<F)-1,B=E>>1,N=F-7,ee=S-1,M=b[ee--],D=127&M;for(M>>=7;N>0;D=256*D+b[ee],ee--,N-=8);for(I=D&(1<<-N)-1,D>>=-N,N+=w;N>0;I=256*I+b[ee],ee--,N-=8);if(0===D)D=1-B;else{if(D===E)return I?NaN:M?-1/0:1/0;I+=l(2,w),D-=B}return(M?-1:1)*I*l(2,D-w)}}},8361:function(v,f,l){var r=l(7293),h=l(4326),u="".split;v.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return"String"==h(d)?u.call(d,""):Object(d)}:Object},9587:function(v,f,l){var r=l(111),h=l(7674);v.exports=function(u,d,m){var b,w;return h&&"function"==typeof(b=d.constructor)&&b!==m&&r(w=b.prototype)&&w!==m.prototype&&h(u,w),u}},2788:function(v,f,l){var r=l(5465),h=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(u){return h.call(u)}),v.exports=r.inspectSource},9909:function(v,f,l){var E,B,N,r=l(8536),h=l(7854),u=l(111),d=l(8880),m=l(6656),b=l(5465),w=l(6200),S=l(3501);if(r){var D=b.state||(b.state=new(0,h.WeakMap)),I=D.get,W=D.has,R=D.set;E=function(y,C){return C.facade=y,R.call(D,y,C),C},B=function(y){return I.call(D,y)||{}},N=function(y){return W.call(D,y)}}else{var L=w("state");S[L]=!0,E=function(y,C){return C.facade=y,d(y,L,C),C},B=function(y){return m(y,L)?y[L]:{}},N=function(y){return m(y,L)}}v.exports={set:E,get:B,has:N,enforce:function(y){return N(y)?B(y):E(y,{})},getterFor:function(y){return function(C){var A;if(!u(C)||(A=B(C)).type!==y)throw TypeError("Incompatible receiver, "+y+" required");return A}}}},7659:function(v,f,l){var r=l(5112),h=l(7497),u=r("iterator"),d=Array.prototype;v.exports=function(m){return void 0!==m&&(h.Array===m||d[u]===m)}},3157:function(v,f,l){var r=l(4326);v.exports=Array.isArray||function(u){return"Array"==r(u)}},4705:function(v,f,l){var r=l(7293),h=/#|\.prototype\./,u=function(S,F){var E=m[d(S)];return E==w||E!=b&&("function"==typeof F?r(F):!!F)},d=u.normalize=function(S){return String(S).replace(h,".").toLowerCase()},m=u.data={},b=u.NATIVE="N",w=u.POLYFILL="P";v.exports=u},111:function(v){v.exports=function(f){return"object"==typeof f?null!==f:"function"==typeof f}},1913:function(v){v.exports=!1},7850:function(v,f,l){var r=l(111),h=l(4326),d=l(5112)("match");v.exports=function(m){var b;return r(m)&&(void 0!==(b=m[d])?!!b:"RegExp"==h(m))}},9212:function(v,f,l){var r=l(9670);v.exports=function(h){var u=h.return;if(void 0!==u)return r(u.call(h)).value}},3383:function(v,f,l){"use strict";var E,B,N,r=l(7293),h=l(9518),u=l(8880),d=l(6656),m=l(5112),b=l(1913),w=m("iterator"),S=!1;[].keys&&("next"in(N=[].keys())?(B=h(h(N)))!==Object.prototype&&(E=B):S=!0);var ee=null==E||r(function(){var M={};return E[w].call(M)!==M});ee&&(E={}),(!b||ee)&&!d(E,w)&&u(E,w,function(){return this}),v.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:S}},7497:function(v){v.exports={}},133:function(v,f,l){var r=l(7293);v.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},590:function(v,f,l){var r=l(7293),h=l(5112),u=l(1913),d=h("iterator");v.exports=!r(function(){var m=new URL("b?a=1&b=2&c=3","http://a"),b=m.searchParams,w="";return m.pathname="c%20d",b.forEach(function(S,F){b.delete("b"),w+=F+S}),u&&!m.toJSON||!b.sort||"http://a/c%20d?a=1&c=3"!==m.href||"3"!==b.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!b[d]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==w||"x"!==new URL("http://x",void 0).host})},8536:function(v,f,l){var r=l(7854),h=l(2788),u=r.WeakMap;v.exports="function"==typeof u&&/native code/.test(h(u))},1574:function(v,f,l){"use strict";var r=l(9781),h=l(7293),u=l(1956),d=l(5181),m=l(5296),b=l(7908),w=l(8361),S=Object.assign,F=Object.defineProperty;v.exports=!S||h(function(){if(r&&1!==S({b:1},S(F({},"a",{enumerable:!0,get:function(){F(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var E={},B={},N=Symbol(),ee="abcdefghijklmnopqrst";return E[N]=7,ee.split("").forEach(function(M){B[M]=M}),7!=S({},E)[N]||u(S({},B)).join("")!=ee})?function(B,N){for(var ee=b(B),M=arguments.length,D=1,I=d.f,W=m.f;M>D;)for(var A,R=w(arguments[D++]),L=I?u(R).concat(I(R)):u(R),y=L.length,C=0;y>C;)A=L[C++],(!r||W.call(R,A))&&(ee[A]=R[A]);return ee}:S},30:function(v,f,l){var W,r=l(9670),h=l(6048),u=l(748),d=l(3501),m=l(490),b=l(317),w=l(6200),E="prototype",B="script",N=w("IE_PROTO"),ee=function(){},M=function(L){return"<"+B+">"+L+"</"+B+">"},R=function(){try{W=document.domain&&new ActiveXObject("htmlfile")}catch{}R=W?function(L){L.write(M("")),L.close();var y=L.parentWindow.Object;return L=null,y}(W):function(){var C,L=b("iframe"),y="java"+B+":";return L.style.display="none",m.appendChild(L),L.src=String(y),(C=L.contentWindow.document).open(),C.write(M("document.F=Object")),C.close(),C.F}();for(var L=u.length;L--;)delete R[E][u[L]];return R()};d[N]=!0,v.exports=Object.create||function(y,C){var A;return null!==y?(ee[E]=r(y),A=new ee,ee[E]=null,A[N]=y):A=R(),void 0===C?A:h(A,C)}},6048:function(v,f,l){var r=l(9781),h=l(3070),u=l(9670),d=l(1956);v.exports=r?Object.defineProperties:function(b,w){u(b);for(var B,S=d(w),F=S.length,E=0;F>E;)h.f(b,B=S[E++],w[B]);return b}},3070:function(v,f,l){var r=l(9781),h=l(4664),u=l(9670),d=l(7593),m=Object.defineProperty;f.f=r?m:function(w,S,F){if(u(w),S=d(S,!0),u(F),h)try{return m(w,S,F)}catch{}if("get"in F||"set"in F)throw TypeError("Accessors not supported");return"value"in F&&(w[S]=F.value),w}},1236:function(v,f,l){var r=l(9781),h=l(5296),u=l(9114),d=l(5656),m=l(7593),b=l(6656),w=l(4664),S=Object.getOwnPropertyDescriptor;f.f=r?S:function(E,B){if(E=d(E),B=m(B,!0),w)try{return S(E,B)}catch{}if(b(E,B))return u(!h.f.call(E,B),E[B])}},8006:function(v,f,l){var r=l(6324),u=l(748).concat("length","prototype");f.f=Object.getOwnPropertyNames||function(m){return r(m,u)}},5181:function(v,f){f.f=Object.getOwnPropertySymbols},9518:function(v,f,l){var r=l(6656),h=l(7908),u=l(6200),d=l(8544),m=u("IE_PROTO"),b=Object.prototype;v.exports=d?Object.getPrototypeOf:function(w){return w=h(w),r(w,m)?w[m]:"function"==typeof w.constructor&&w instanceof w.constructor?w.constructor.prototype:w instanceof Object?b:null}},6324:function(v,f,l){var r=l(6656),h=l(5656),u=l(1318).indexOf,d=l(3501);v.exports=function(m,b){var E,w=h(m),S=0,F=[];for(E in w)!r(d,E)&&r(w,E)&&F.push(E);for(;b.length>S;)r(w,E=b[S++])&&(~u(F,E)||F.push(E));return F}},1956:function(v,f,l){var r=l(6324),h=l(748);v.exports=Object.keys||function(d){return r(d,h)}},5296:function(v,f){"use strict";var l={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,h=r&&!l.call({1:2},1);f.f=h?function(d){var m=r(this,d);return!!m&&m.enumerable}:l},7674:function(v,f,l){var r=l(9670),h=l(6077);v.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m,u=!1,d={};try{(m=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(d,[]),u=d instanceof Array}catch{}return function(w,S){return r(w),h(S),u?m.call(w,S):w.__proto__=S,w}}():void 0)},288:function(v,f,l){"use strict";var r=l(1694),h=l(648);v.exports=r?{}.toString:function(){return"[object "+h(this)+"]"}},3887:function(v,f,l){var r=l(5005),h=l(8006),u=l(5181),d=l(9670);v.exports=r("Reflect","ownKeys")||function(b){var w=h.f(d(b)),S=u.f;return S?w.concat(S(b)):w}},857:function(v,f,l){var r=l(7854);v.exports=r},2248:function(v,f,l){var r=l(1320);v.exports=function(h,u,d){for(var m in u)r(h,m,u[m],d);return h}},1320:function(v,f,l){var r=l(7854),h=l(8880),u=l(6656),d=l(3505),m=l(2788),b=l(9909),w=b.get,S=b.enforce,F=String(String).split("String");(v.exports=function(E,B,N,ee){var W,M=!!ee&&!!ee.unsafe,D=!!ee&&!!ee.enumerable,I=!!ee&&!!ee.noTargetGet;"function"==typeof N&&("string"==typeof B&&!u(N,"name")&&h(N,"name",B),(W=S(N)).source||(W.source=F.join("string"==typeof B?B:""))),E!==r?(M?!I&&E[B]&&(D=!0):delete E[B],D?E[B]=N:h(E,B,N)):D?E[B]=N:d(B,N)})(Function.prototype,"toString",function(){return"function"==typeof this&&w(this).source||m(this)})},7651:function(v,f,l){var r=l(4326),h=l(2261);v.exports=function(u,d){var m=u.exec;if("function"==typeof m){var b=m.call(u,d);if("object"!=typeof b)throw TypeError("RegExp exec method returned something other than an Object or null");return b}if("RegExp"!==r(u))throw TypeError("RegExp#exec called on incompatible receiver");return h.call(u,d)}},2261:function(v,f,l){"use strict";var E,B,r=l(7066),h=l(2999),u=RegExp.prototype.exec,d=String.prototype.replace,m=u,b=(B=/b*/g,u.call(E=/a/,"a"),u.call(B,"a"),0!==E.lastIndex||0!==B.lastIndex),w=h.UNSUPPORTED_Y||h.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(b||S||w)&&(m=function(B){var ee,M,D,I,N=this,W=w&&N.sticky,R=r.call(N),L=N.source,y=0,C=B;return W&&(-1===(R=R.replace("y","")).indexOf("g")&&(R+="g"),C=String(B).slice(N.lastIndex),N.lastIndex>0&&(!N.multiline||N.multiline&&"\n"!==B[N.lastIndex-1])&&(L="(?: "+L+")",C=" "+C,y++),M=new RegExp("^(?:"+L+")",R)),S&&(M=new RegExp("^"+L+"$(?!\\s)",R)),b&&(ee=N.lastIndex),D=u.call(W?M:N,C),W?D?(D.input=D.input.slice(y),D[0]=D[0].slice(y),D.index=N.lastIndex,N.lastIndex+=D[0].length):N.lastIndex=0:b&&D&&(N.lastIndex=N.global?D.index+D[0].length:ee),S&&D&&D.length>1&&d.call(D[0],M,function(){for(I=1;I<arguments.length-2;I++)void 0===arguments[I]&&(D[I]=void 0)}),D}),v.exports=m},7066:function(v,f,l){"use strict";var r=l(9670);v.exports=function(){var h=r(this),u="";return h.global&&(u+="g"),h.ignoreCase&&(u+="i"),h.multiline&&(u+="m"),h.dotAll&&(u+="s"),h.unicode&&(u+="u"),h.sticky&&(u+="y"),u}},2999:function(v,f,l){"use strict";var r=l(7293);function h(u,d){return RegExp(u,d)}f.UNSUPPORTED_Y=r(function(){var u=h("a","y");return u.lastIndex=2,null!=u.exec("abcd")}),f.BROKEN_CARET=r(function(){var u=h("^r","gy");return u.lastIndex=2,null!=u.exec("str")})},4488:function(v){v.exports=function(f){if(null==f)throw TypeError("Can't call method on "+f);return f}},3505:function(v,f,l){var r=l(7854),h=l(8880);v.exports=function(u,d){try{h(r,u,d)}catch{r[u]=d}return d}},6340:function(v,f,l){"use strict";var r=l(5005),h=l(3070),u=l(5112),d=l(9781),m=u("species");v.exports=function(b){var w=r(b);d&&w&&!w[m]&&(0,h.f)(w,m,{configurable:!0,get:function(){return this}})}},8003:function(v,f,l){var r=l(3070).f,h=l(6656),d=l(5112)("toStringTag");v.exports=function(m,b,w){m&&!h(m=w?m:m.prototype,d)&&r(m,d,{configurable:!0,value:b})}},6200:function(v,f,l){var r=l(2309),h=l(9711),u=r("keys");v.exports=function(d){return u[d]||(u[d]=h(d))}},5465:function(v,f,l){var r=l(7854),h=l(3505),u="__core-js_shared__",d=r[u]||h(u,{});v.exports=d},2309:function(v,f,l){var r=l(1913),h=l(5465);(v.exports=function(u,d){return h[u]||(h[u]=void 0!==d?d:{})})("versions",[]).push({version:"3.9.0",mode:r?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(v,f,l){var r=l(9670),h=l(3099),d=l(5112)("species");v.exports=function(m,b){var S,w=r(m).constructor;return void 0===w||null==(S=r(w)[d])?b:h(S)}},8710:function(v,f,l){var r=l(9958),h=l(4488),u=function(d){return function(m,b){var E,B,w=String(h(m)),S=r(b),F=w.length;return S<0||S>=F?d?"":void 0:(E=w.charCodeAt(S))<55296||E>56319||S+1===F||(B=w.charCodeAt(S+1))<56320||B>57343?d?w.charAt(S):E:d?w.slice(S,S+2):B-56320+(E-55296<<10)+65536}};v.exports={codeAt:u(!1),charAt:u(!0)}},3197:function(v){"use strict";var f=2147483647,S=/[^\0-\u007E]/,F=/[.\u3002\uFF0E\uFF61]/g,E="Overflow: input needs wider integers to process",N=Math.floor,ee=String.fromCharCode,D=function(R){return R+22+75*(R<26)},I=function(R,L,y){var C=0;for(R=y?N(R/700):R>>1,R+=N(R/L);R>455;C+=36)R=N(R/35);return N(C+36*R/(R+38))},W=function(R){var K,ve,L=[],y=(R=function(R){for(var L=[],y=0,C=R.length;y<C;){var A=R.charCodeAt(y++);if(A>=55296&&A<=56319&&y<C){var X=R.charCodeAt(y++);56320==(64512&X)?L.push(((1023&A)<<10)+(1023&X)+65536):(L.push(A),y--)}else L.push(A)}return L}(R)).length,C=128,A=0,X=72;for(K=0;K<R.length;K++)(ve=R[K])<128&&L.push(ee(ve));var be=L.length,Oe=be;for(be&&L.push("-");Oe<y;){var He=f;for(K=0;K<R.length;K++)(ve=R[K])>=C&&ve<He&&(He=ve);var je=Oe+1;if(He-C>N((f-A)/je))throw RangeError(E);for(A+=(He-C)*je,C=He,K=0;K<R.length;K++){if((ve=R[K])<C&&++A>f)throw RangeError(E);if(ve==C){for(var qe=A,Le=36;;Le+=36){var ye=Le<=X?1:Le>=X+26?26:Le-X;if(qe<ye)break;var Ae=qe-ye,J=36-ye;L.push(ee(D(ye+Ae%J))),qe=N(Ae/J)}L.push(ee(D(qe))),X=I(A,je,Oe==be),A=0,++Oe}}++A,++C}return L.join("")};v.exports=function(R){var C,A,L=[],y=R.toLowerCase().replace(F,".").split(".");for(C=0;C<y.length;C++)L.push(S.test(A=y[C])?"xn--"+W(A):A);return L.join(".")}},6091:function(v,f,l){var r=l(7293),h=l(1361);v.exports=function(d){return r(function(){return!!h[d]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[d]()||h[d].name!==d})}},3111:function(v,f,l){var r=l(4488),u="["+l(1361)+"]",d=RegExp("^"+u+u+"*"),m=RegExp(u+u+"*$"),b=function(w){return function(S){var F=String(r(S));return 1&w&&(F=F.replace(d,"")),2&w&&(F=F.replace(m,"")),F}};v.exports={start:b(1),end:b(2),trim:b(3)}},1400:function(v,f,l){var r=l(9958),h=Math.max,u=Math.min;v.exports=function(d,m){var b=r(d);return b<0?h(b+m,0):u(b,m)}},7067:function(v,f,l){var r=l(9958),h=l(7466);v.exports=function(u){if(void 0===u)return 0;var d=r(u),m=h(d);if(d!==m)throw RangeError("Wrong length or index");return m}},5656:function(v,f,l){var r=l(8361),h=l(4488);v.exports=function(u){return r(h(u))}},9958:function(v){var f=Math.ceil,l=Math.floor;v.exports=function(r){return isNaN(r=+r)?0:(r>0?l:f)(r)}},7466:function(v,f,l){var r=l(9958),h=Math.min;v.exports=function(u){return u>0?h(r(u),9007199254740991):0}},7908:function(v,f,l){var r=l(4488);v.exports=function(h){return Object(r(h))}},4590:function(v,f,l){var r=l(3002);v.exports=function(h,u){var d=r(h);if(d%u)throw RangeError("Wrong offset");return d}},3002:function(v,f,l){var r=l(9958);v.exports=function(h){var u=r(h);if(u<0)throw RangeError("The argument can't be less than 0");return u}},7593:function(v,f,l){var r=l(111);v.exports=function(h,u){if(!r(h))return h;var d,m;if(u&&"function"==typeof(d=h.toString)&&!r(m=d.call(h))||"function"==typeof(d=h.valueOf)&&!r(m=d.call(h))||!u&&"function"==typeof(d=h.toString)&&!r(m=d.call(h)))return m;throw TypeError("Can't convert object to primitive value")}},1694:function(v,f,l){var u={};u[l(5112)("toStringTag")]="z",v.exports="[object z]"===String(u)},9843:function(v,f,l){"use strict";var r=l(2109),h=l(7854),u=l(9781),d=l(3832),m=l(260),b=l(3331),w=l(5787),S=l(9114),F=l(8880),E=l(7466),B=l(7067),N=l(4590),ee=l(7593),M=l(6656),D=l(648),I=l(111),W=l(30),R=l(7674),L=l(8006).f,y=l(7321),C=l(2092).forEach,A=l(6340),X=l(3070),K=l(1236),ve=l(9909),be=l(9587),Oe=ve.get,He=ve.set,je=X.f,qe=K.f,Le=Math.round,ye=h.RangeError,Ae=b.ArrayBuffer,J=b.DataView,V=m.NATIVE_ARRAY_BUFFER_VIEWS,oe=m.TYPED_ARRAY_TAG,ge=m.TypedArray,xe=m.TypedArrayPrototype,Re=m.aTypedArrayConstructor,ce=m.isTypedArray,We="BYTES_PER_ELEMENT",Ve="Wrong length",Ie=function(Ee,re){for(var Me=0,Ge=re.length,ot=new(Re(Ee))(Ge);Ge>Me;)ot[Me]=re[Me++];return ot},Te=function(Ee,re){je(Ee,re,{get:function(){return Oe(this)[re]}})},ze=function(Ee){var re;return Ee instanceof Ae||"ArrayBuffer"==(re=D(Ee))||"SharedArrayBuffer"==re},ue=function(Ee,re){return ce(Ee)&&"symbol"!=typeof re&&re in Ee&&String(+re)==String(re)},Se=function(re,Me){return ue(re,Me=ee(Me,!0))?S(2,re[Me]):qe(re,Me)},Fe=function(re,Me,Ge){return!(ue(re,Me=ee(Me,!0))&&I(Ge)&&M(Ge,"value"))||M(Ge,"get")||M(Ge,"set")||Ge.configurable||M(Ge,"writable")&&!Ge.writable||M(Ge,"enumerable")&&!Ge.enumerable?je(re,Me,Ge):(re[Me]=Ge.value,re)};u?(V||(K.f=Se,X.f=Fe,Te(xe,"buffer"),Te(xe,"byteOffset"),Te(xe,"byteLength"),Te(xe,"length")),r({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:Se,defineProperty:Fe}),v.exports=function(Ee,re,Me){var Ge=Ee.match(/\d+$/)[0]/8,ot=Ee+(Me?"Clamped":"")+"Array",lt="get"+Ee,Tt="set"+Ee,Ue=h[ot],Ne=Ue,et=Ne&&Ne.prototype,_t={},te=function(de,fe){je(de,fe,{get:function(){return function(de,fe){var Be=Oe(de);return Be.view[lt](fe*Ge+Be.byteOffset,!0)}(this,fe)},set:function(Be){return function(de,fe,Be){var ut=Oe(de);Me&&(Be=(Be=Le(Be))<0?0:Be>255?255:255&Be),ut.view[Tt](fe*Ge+ut.byteOffset,Be,!0)}(this,fe,Be)},enumerable:!0})};V?d&&(Ne=re(function(de,fe,Be,ut){return w(de,Ne,ot),be(I(fe)?ze(fe)?void 0!==ut?new Ue(fe,N(Be,Ge),ut):void 0!==Be?new Ue(fe,N(Be,Ge)):new Ue(fe):ce(fe)?Ie(Ne,fe):y.call(Ne,fe):new Ue(B(fe)),de,Ne)}),R&&R(Ne,ge),C(L(Ue),function(de){de in Ne||F(Ne,de,Ue[de])}),Ne.prototype=et):(Ne=re(function(de,fe,Be,ut){w(de,Ne,ot);var Q,$e,_e,Ct=0,nt=0;if(I(fe)){if(!ze(fe))return ce(fe)?Ie(Ne,fe):y.call(Ne,fe);Q=fe,nt=N(Be,Ge);var Ze=fe.byteLength;if(void 0===ut){if(Ze%Ge||($e=Ze-nt)<0)throw ye(Ve)}else if(($e=E(ut)*Ge)+nt>Ze)throw ye(Ve);_e=$e/Ge}else _e=B(fe),Q=new Ae($e=_e*Ge);for(He(de,{buffer:Q,byteOffset:nt,byteLength:$e,length:_e,view:new J(Q)});Ct<_e;)te(de,Ct++)}),R&&R(Ne,ge),et=Ne.prototype=W(xe)),et.constructor!==Ne&&F(et,"constructor",Ne),oe&&F(et,oe,ot),_t[ot]=Ne,r({global:!0,forced:Ne!=Ue,sham:!V},_t),We in Ne||F(Ne,We,Ge),We in et||F(et,We,Ge),A(ot)}):v.exports=function(){}},3832:function(v,f,l){var r=l(7854),h=l(7293),u=l(7072),d=l(260).NATIVE_ARRAY_BUFFER_VIEWS,m=r.ArrayBuffer,b=r.Int8Array;v.exports=!d||!h(function(){b(1)})||!h(function(){new b(-1)})||!u(function(w){new b,new b(null),new b(1.5),new b(w)},!0)||h(function(){return 1!==new b(new m(2),1,void 0).length})},3074:function(v,f,l){var r=l(260).aTypedArrayConstructor,h=l(6707);v.exports=function(u,d){for(var m=h(u,u.constructor),b=0,w=d.length,S=new(r(m))(w);w>b;)S[b]=d[b++];return S}},7321:function(v,f,l){var r=l(7908),h=l(7466),u=l(1246),d=l(7659),m=l(9974),b=l(260).aTypedArrayConstructor;v.exports=function(S){var M,D,I,W,R,L,F=r(S),E=arguments.length,B=E>1?arguments[1]:void 0,N=void 0!==B,ee=u(F);if(null!=ee&&!d(ee))for(L=(R=ee.call(F)).next,F=[];!(W=L.call(R)).done;)F.push(W.value);for(N&&E>2&&(B=m(B,arguments[2],2)),D=h(F.length),I=new(b(this))(D),M=0;D>M;M++)I[M]=N?B(F[M],M):F[M];return I}},9711:function(v){var f=0,l=Math.random();v.exports=function(r){return"Symbol("+String(void 0===r?"":r)+")_"+(++f+l).toString(36)}},3307:function(v,f,l){var r=l(133);v.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(v,f,l){var r=l(7854),h=l(2309),u=l(6656),d=l(9711),m=l(133),b=l(3307),w=h("wks"),S=r.Symbol,F=b?S:S&&S.withoutSetter||d;v.exports=function(E){return u(w,E)||(w[E]=m&&u(S,E)?S[E]:F("Symbol."+E)),w[E]}},1361:function(v){v.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(v,f,l){"use strict";var r=l(2109),h=l(7854),u=l(3331),d=l(6340),m="ArrayBuffer",b=u[m];r({global:!0,forced:h[m]!==b},{ArrayBuffer:b}),d(m)},2222:function(v,f,l){"use strict";var r=l(2109),h=l(7293),u=l(3157),d=l(111),m=l(7908),b=l(7466),w=l(6135),S=l(5417),F=l(1194),E=l(5112),B=l(7392),N=E("isConcatSpreadable"),ee=9007199254740991,M="Maximum allowed index exceeded",D=B>=51||!h(function(){var L=[];return L[N]=!1,L.concat()[0]!==L}),I=F("concat"),W=function(L){if(!d(L))return!1;var y=L[N];return void 0!==y?!!y:u(L)};r({target:"Array",proto:!0,forced:!D||!I},{concat:function(y){var K,ve,be,Oe,He,C=m(this),A=S(C,0),X=0;for(K=-1,be=arguments.length;K<be;K++)if(W(He=-1===K?C:arguments[K])){if(X+(Oe=b(He.length))>ee)throw TypeError(M);for(ve=0;ve<Oe;ve++,X++)ve in He&&w(A,X,He[ve])}else{if(X>=ee)throw TypeError(M);w(A,X++,He)}return A.length=X,A}})},7327:function(v,f,l){"use strict";var r=l(2109),h=l(2092).filter;r({target:"Array",proto:!0,forced:!l(1194)("filter")},{filter:function(b){return h(this,b,arguments.length>1?arguments[1]:void 0)}})},2772:function(v,f,l){"use strict";var r=l(2109),h=l(1318).indexOf,u=l(9341),d=[].indexOf,m=!!d&&1/[1].indexOf(1,-0)<0,b=u("indexOf");r({target:"Array",proto:!0,forced:m||!b},{indexOf:function(S){return m?d.apply(this,arguments)||0:h(this,S,arguments.length>1?arguments[1]:void 0)}})},6992:function(v,f,l){"use strict";var r=l(5656),h=l(1223),u=l(7497),d=l(9909),m=l(654),b="Array Iterator",w=d.set,S=d.getterFor(b);v.exports=m(Array,"Array",function(F,E){w(this,{type:b,target:r(F),index:0,kind:E})},function(){var F=S(this),E=F.target,B=F.kind,N=F.index++;return!E||N>=E.length?(F.target=void 0,{value:void 0,done:!0}):"keys"==B?{value:N,done:!1}:"values"==B?{value:E[N],done:!1}:{value:[N,E[N]],done:!1}},"values"),u.Arguments=u.Array,h("keys"),h("values"),h("entries")},1249:function(v,f,l){"use strict";var r=l(2109),h=l(2092).map;r({target:"Array",proto:!0,forced:!l(1194)("map")},{map:function(b){return h(this,b,arguments.length>1?arguments[1]:void 0)}})},7042:function(v,f,l){"use strict";var r=l(2109),h=l(111),u=l(3157),d=l(1400),m=l(7466),b=l(5656),w=l(6135),S=l(5112),E=l(1194)("slice"),B=S("species"),N=[].slice,ee=Math.max;r({target:"Array",proto:!0,forced:!E},{slice:function(D,I){var C,A,X,W=b(this),R=m(W.length),L=d(D,R),y=d(void 0===I?R:I,R);if(u(W)&&("function"!=typeof(C=W.constructor)||C!==Array&&!u(C.prototype)?h(C)&&null===(C=C[B])&&(C=void 0):C=void 0,C===Array||void 0===C))return N.call(W,L,y);for(A=new(void 0===C?Array:C)(ee(y-L,0)),X=0;L<y;L++,X++)L in W&&w(A,X,W[L]);return A.length=X,A}})},561:function(v,f,l){"use strict";var r=l(2109),h=l(1400),u=l(9958),d=l(7466),m=l(7908),b=l(5417),w=l(6135),F=l(1194)("splice"),E=Math.max,B=Math.min;r({target:"Array",proto:!0,forced:!F},{splice:function(D,I){var C,A,X,K,ve,be,W=m(this),R=d(W.length),L=h(D,R),y=arguments.length;if(0===y?C=A=0:1===y?(C=0,A=R-L):(C=y-2,A=B(E(u(I),0),R-L)),R+C-A>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(X=b(W,A),K=0;K<A;K++)(ve=L+K)in W&&w(X,K,W[ve]);if(X.length=A,C<A){for(K=L;K<R-A;K++)be=K+C,(ve=K+A)in W?W[be]=W[ve]:delete W[be];for(K=R;K>R-A+C;K--)delete W[K-1]}else if(C>A)for(K=R-A;K>L;K--)be=K+C-1,(ve=K+A-1)in W?W[be]=W[ve]:delete W[be];for(K=0;K<C;K++)W[K+L]=arguments[K+2];return W.length=R-A+C,X}})},8309:function(v,f,l){var r=l(9781),h=l(3070).f,u=Function.prototype,d=u.toString,m=/^\s*function ([^ (]*)/,b="name";r&&!(b in u)&&h(u,b,{configurable:!0,get:function(){try{return d.call(this).match(m)[1]}catch{return""}}})},489:function(v,f,l){var r=l(2109),h=l(7293),u=l(7908),d=l(9518),m=l(8544);r({target:"Object",stat:!0,forced:h(function(){d(1)}),sham:!m},{getPrototypeOf:function(S){return d(u(S))}})},1539:function(v,f,l){var r=l(1694),h=l(1320),u=l(288);r||h(Object.prototype,"toString",u,{unsafe:!0})},4916:function(v,f,l){"use strict";var r=l(2109),h=l(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==h},{exec:h})},9714:function(v,f,l){"use strict";var r=l(1320),h=l(9670),u=l(7293),d=l(7066),m="toString",b=RegExp.prototype,w=b[m];(u(function(){return"/a/b"!=w.call({source:"a",flags:"b"})})||w.name!=m)&&r(RegExp.prototype,m,function(){var B=h(this),N=String(B.source),ee=B.flags;return"/"+N+"/"+String(void 0===ee&&B instanceof RegExp&&!("flags"in b)?d.call(B):ee)},{unsafe:!0})},8783:function(v,f,l){"use strict";var r=l(8710).charAt,h=l(9909),u=l(654),d="String Iterator",m=h.set,b=h.getterFor(d);u(String,"String",function(w){m(this,{type:d,string:String(w),index:0})},function(){var B,S=b(this),F=S.string,E=S.index;return E>=F.length?{value:void 0,done:!0}:(B=r(F,E),S.index+=B.length,{value:B,done:!1})})},4723:function(v,f,l){"use strict";var r=l(7007),h=l(9670),u=l(7466),d=l(4488),m=l(1530),b=l(7651);r("match",1,function(w,S,F){return[function(B){var N=d(this),ee=B?.[w];return void 0!==ee?ee.call(B,N):new RegExp(B)[w](String(N))},function(E){var B=F(S,E,this);if(B.done)return B.value;var N=h(E),ee=String(this);if(!N.global)return b(N,ee);var M=N.unicode;N.lastIndex=0;for(var W,D=[],I=0;null!==(W=b(N,ee));){var R=String(W[0]);D[I]=R,""===R&&(N.lastIndex=m(ee,u(N.lastIndex),M)),I++}return 0===I?null:D}]})},5306:function(v,f,l){"use strict";var r=l(7007),h=l(9670),u=l(7466),d=l(9958),m=l(4488),b=l(1530),w=l(647),S=l(7651),F=Math.max,E=Math.min,B=function(N){return void 0===N?N:String(N)};r("replace",2,function(N,ee,M,D){var I=D.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,W=D.REPLACE_KEEPS_$0,R=I?"$":"$0";return[function(y,C){var A=m(this),X=y?.[N];return void 0!==X?X.call(y,A,C):ee.call(String(A),y,C)},function(L,y){if(!I&&W||"string"==typeof y&&-1===y.indexOf(R)){var C=M(ee,L,this,y);if(C.done)return C.value}var A=h(L),X=String(this),K="function"==typeof y;K||(y=String(y));var ve=A.global;if(ve){var be=A.unicode;A.lastIndex=0}for(var Oe=[];;){var He=S(A,X);if(null===He||(Oe.push(He),!ve))break;""===String(He[0])&&(A.lastIndex=b(X,u(A.lastIndex),be))}for(var qe="",Le=0,ye=0;ye<Oe.length;ye++){He=Oe[ye];for(var Ae=String(He[0]),J=F(E(d(He.index),X.length),0),V=[],oe=1;oe<He.length;oe++)V.push(B(He[oe]));var ge=He.groups;if(K){var xe=[Ae].concat(V,J,X);void 0!==ge&&xe.push(ge);var Re=String(y.apply(void 0,xe))}else Re=w(Ae,X,J,V,ge,y);J>=Le&&(qe+=X.slice(Le,J)+Re,Le=J+Ae.length)}return qe+X.slice(Le)}]})},3123:function(v,f,l){"use strict";var r=l(7007),h=l(7850),u=l(9670),d=l(4488),m=l(6707),b=l(1530),w=l(7466),S=l(7651),F=l(2261),E=l(7293),B=[].push,N=Math.min,ee=4294967295,M=!E(function(){return!RegExp(ee,"y")});r("split",2,function(D,I,W){var R;return R="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(L,y){var C=String(d(this)),A=void 0===y?ee:y>>>0;if(0===A)return[];if(void 0===L)return[C];if(!h(L))return I.call(C,L,A);for(var Oe,He,je,X=[],ve=0,be=new RegExp(L.source,(L.ignoreCase?"i":"")+(L.multiline?"m":"")+(L.unicode?"u":"")+(L.sticky?"y":"")+"g");(Oe=F.call(be,C))&&!((He=be.lastIndex)>ve&&(X.push(C.slice(ve,Oe.index)),Oe.length>1&&Oe.index<C.length&&B.apply(X,Oe.slice(1)),je=Oe[0].length,ve=He,X.length>=A));)be.lastIndex===Oe.index&&be.lastIndex++;return ve===C.length?(je||!be.test(""))&&X.push(""):X.push(C.slice(ve)),X.length>A?X.slice(0,A):X}:"0".split(void 0,0).length?function(L,y){return void 0===L&&0===y?[]:I.call(this,L,y)}:I,[function(y,C){var A=d(this),X=y?.[D];return void 0!==X?X.call(y,A,C):R.call(String(A),y,C)},function(L,y){var C=W(R,L,this,y,R!==I);if(C.done)return C.value;var A=u(L),X=String(this),K=m(A,RegExp),ve=A.unicode,Oe=new K(M?A:"^(?:"+A.source+")",(A.ignoreCase?"i":"")+(A.multiline?"m":"")+(A.unicode?"u":"")+(M?"y":"g")),He=void 0===y?ee:y>>>0;if(0===He)return[];if(0===X.length)return null===S(Oe,X)?[X]:[];for(var je=0,qe=0,Le=[];qe<X.length;){Oe.lastIndex=M?qe:0;var Ae,ye=S(Oe,M?X:X.slice(qe));if(null===ye||(Ae=N(w(Oe.lastIndex+(M?0:qe)),X.length))===je)qe=b(X,qe,ve);else{if(Le.push(X.slice(je,qe)),Le.length===He)return Le;for(var J=1;J<=ye.length-1;J++)if(Le.push(ye[J]),Le.length===He)return Le;qe=je=Ae}}return Le.push(X.slice(je)),Le}]},!M)},3210:function(v,f,l){"use strict";var r=l(2109),h=l(3111).trim;r({target:"String",proto:!0,forced:l(6091)("trim")},{trim:function(){return h(this)}})},2990:function(v,f,l){"use strict";var r=l(260),h=l(1048),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",function(b,w){return h.call(u(this),b,w,arguments.length>2?arguments[2]:void 0)})},8927:function(v,f,l){"use strict";var r=l(260),h=l(2092).every,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",function(b){return h(u(this),b,arguments.length>1?arguments[1]:void 0)})},3105:function(v,f,l){"use strict";var r=l(260),h=l(1285),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",function(b){return h.apply(u(this),arguments)})},5035:function(v,f,l){"use strict";var r=l(260),h=l(2092).filter,u=l(3074),d=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",function(w){var S=h(d(this),w,arguments.length>1?arguments[1]:void 0);return u(this,S)})},7174:function(v,f,l){"use strict";var r=l(260),h=l(2092).findIndex,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",function(b){return h(u(this),b,arguments.length>1?arguments[1]:void 0)})},4345:function(v,f,l){"use strict";var r=l(260),h=l(2092).find,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",function(b){return h(u(this),b,arguments.length>1?arguments[1]:void 0)})},2846:function(v,f,l){"use strict";var r=l(260),h=l(2092).forEach,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",function(b){h(u(this),b,arguments.length>1?arguments[1]:void 0)})},4731:function(v,f,l){"use strict";var r=l(260),h=l(1318).includes,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",function(b){return h(u(this),b,arguments.length>1?arguments[1]:void 0)})},7209:function(v,f,l){"use strict";var r=l(260),h=l(1318).indexOf,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",function(b){return h(u(this),b,arguments.length>1?arguments[1]:void 0)})},6319:function(v,f,l){"use strict";var r=l(7854),h=l(260),u=l(6992),m=l(5112)("iterator"),b=r.Uint8Array,w=u.values,S=u.keys,F=u.entries,E=h.aTypedArray,B=h.exportTypedArrayMethod,N=b&&b.prototype[m],ee=!!N&&("values"==N.name||null==N.name),M=function(){return w.call(E(this))};B("entries",function(){return F.call(E(this))}),B("keys",function(){return S.call(E(this))}),B("values",M,!ee),B(m,M,!ee)},8867:function(v,f,l){"use strict";var r=l(260),h=r.aTypedArray,d=[].join;(0,r.exportTypedArrayMethod)("join",function(b){return d.apply(h(this),arguments)})},7789:function(v,f,l){"use strict";var r=l(260),h=l(6583),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",function(b){return h.apply(u(this),arguments)})},3739:function(v,f,l){"use strict";var r=l(260),h=l(2092).map,u=l(6707),d=r.aTypedArray,m=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",function(S){return h(d(this),S,arguments.length>1?arguments[1]:void 0,function(F,E){return new(m(u(F,F.constructor)))(E)})})},4483:function(v,f,l){"use strict";var r=l(260),h=l(3671).right,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",function(b){return h(u(this),b,arguments.length,arguments.length>1?arguments[1]:void 0)})},9368:function(v,f,l){"use strict";var r=l(260),h=l(3671).left,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",function(b){return h(u(this),b,arguments.length,arguments.length>1?arguments[1]:void 0)})},2056:function(v,f,l){"use strict";var r=l(260),h=r.aTypedArray,d=Math.floor;(0,r.exportTypedArrayMethod)("reverse",function(){for(var E,b=this,w=h(b).length,S=d(w/2),F=0;F<S;)E=b[F],b[F++]=b[--w],b[w]=E;return b})},3462:function(v,f,l){"use strict";var r=l(260),h=l(7466),u=l(4590),d=l(7908),m=l(7293),b=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",function(E){b(this);var B=u(arguments.length>1?arguments[1]:void 0,1),N=this.length,ee=d(E),M=h(ee.length),D=0;if(M+B>N)throw RangeError("Wrong length");for(;D<M;)this[B+D]=ee[D++]},m(function(){new Int8Array(1).set({})}))},678:function(v,f,l){"use strict";var r=l(260),h=l(6707),u=l(7293),d=r.aTypedArray,m=r.aTypedArrayConstructor,w=[].slice;(0,r.exportTypedArrayMethod)("slice",function(E,B){for(var N=w.call(d(this),E,B),ee=h(this,this.constructor),M=0,D=N.length,I=new(m(ee))(D);D>M;)I[M]=N[M++];return I},u(function(){new Int8Array(1).slice()}))},7462:function(v,f,l){"use strict";var r=l(260),h=l(2092).some,u=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",function(b){return h(u(this),b,arguments.length>1?arguments[1]:void 0)})},3824:function(v,f,l){"use strict";var r=l(260),h=r.aTypedArray,d=[].sort;(0,r.exportTypedArrayMethod)("sort",function(b){return d.call(h(this),b)})},5021:function(v,f,l){"use strict";var r=l(260),h=l(7466),u=l(1400),d=l(6707),m=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",function(S,F){var E=m(this),B=E.length,N=u(S,B);return new(d(E,E.constructor))(E.buffer,E.byteOffset+N*E.BYTES_PER_ELEMENT,h((void 0===F?B:u(F,B))-N))})},2974:function(v,f,l){"use strict";var r=l(7854),h=l(260),u=l(7293),d=r.Int8Array,m=h.aTypedArray,b=h.exportTypedArrayMethod,w=[].toLocaleString,S=[].slice,F=!!d&&u(function(){w.call(new d(1))});b("toLocaleString",function(){return w.apply(F?S.call(m(this)):m(this),arguments)},u(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!u(function(){d.prototype.toLocaleString.call([1,2])}))},5016:function(v,f,l){"use strict";var r=l(260).exportTypedArrayMethod,h=l(7293),d=l(7854).Uint8Array,m=d&&d.prototype||{},b=[].toString,w=[].join;h(function(){b.call({})})&&(b=function(){return w.call(this)}),r("toString",b,m.toString!=b)},2472:function(v,f,l){l(9843)("Uint8",function(h){return function(d,m,b){return h(this,d,m,b)}})},4747:function(v,f,l){var r=l(7854),h=l(8324),u=l(8533),d=l(8880);for(var m in h){var b=r[m],w=b&&b.prototype;if(w&&w.forEach!==u)try{d(w,"forEach",u)}catch{w.forEach=u}}},3948:function(v,f,l){var r=l(7854),h=l(8324),u=l(6992),d=l(8880),m=l(5112),b=m("iterator"),w=m("toStringTag"),S=u.values;for(var F in h){var E=r[F],B=E&&E.prototype;if(B){if(B[b]!==S)try{d(B,b,S)}catch{B[b]=S}if(B[w]||d(B,w,F),h[F])for(var N in u)if(B[N]!==u[N])try{d(B,N,u[N])}catch{B[N]=u[N]}}}},1637:function(v,f,l){"use strict";l(6992);var r=l(2109),h=l(5005),u=l(590),d=l(1320),m=l(2248),b=l(8003),w=l(4994),S=l(9909),F=l(5787),E=l(6656),B=l(9974),N=l(648),ee=l(9670),M=l(111),D=l(30),I=l(9114),W=l(8554),R=l(1246),L=l(5112),y=h("fetch"),C=h("Headers"),A=L("iterator"),X="URLSearchParams",K=X+"Iterator",ve=S.set,be=S.getterFor(X),Oe=S.getterFor(K),He=/\+/g,je=Array(4),qe=function(Ie){return je[Ie-1]||(je[Ie-1]=RegExp("((?:%[\\da-f]{2}){"+Ie+"})","gi"))},Le=function(Ie){try{return decodeURIComponent(Ie)}catch{return Ie}},ye=function(Ie){var Te=Ie.replace(He," "),ze=4;try{return decodeURIComponent(Te)}catch{for(;ze;)Te=Te.replace(qe(ze--),Le);return Te}},Ae=/[!'()~]|%20/g,J={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},V=function(Ie){return J[Ie]},oe=function(Ie){return encodeURIComponent(Ie).replace(Ae,V)},ge=function(Ie,Te){if(Te)for(var Se,Fe,ze=Te.split("&"),ue=0;ue<ze.length;)(Se=ze[ue++]).length&&(Fe=Se.split("="),Ie.push({key:ye(Fe.shift()),value:ye(Fe.join("="))}))},xe=function(Ie){this.entries.length=0,ge(this.entries,Ie)},Re=function(Ie,Te){if(Ie<Te)throw TypeError("Not enough arguments")},ce=w(function(Te,ze){ve(this,{type:K,iterator:W(be(Te).entries),kind:ze})},"Iterator",function(){var Te=Oe(this),ze=Te.kind,ue=Te.iterator.next(),Se=ue.value;return ue.done||(ue.value="keys"===ze?Se.key:"values"===ze?Se.value:[Se.key,Se.value]),ue}),We=function(){F(this,We,X);var Se,Fe,Ee,re,Me,Ge,ot,lt,Tt,Te=arguments.length>0?arguments[0]:void 0,ue=[];if(ve(this,{type:X,entries:ue,updateURL:function(){},updateSearchParams:xe}),void 0!==Te)if(M(Te))if("function"==typeof(Se=R(Te)))for(Ee=(Fe=Se.call(Te)).next;!(re=Ee.call(Fe)).done;){if((ot=(Ge=(Me=W(ee(re.value))).next).call(Me)).done||(lt=Ge.call(Me)).done||!Ge.call(Me).done)throw TypeError("Expected sequence with length 2");ue.push({key:ot.value+"",value:lt.value+""})}else for(Tt in Te)E(Te,Tt)&&ue.push({key:Tt,value:Te[Tt]+""});else ge(ue,"string"==typeof Te?"?"===Te.charAt(0)?Te.slice(1):Te:Te+"")},Ve=We.prototype;m(Ve,{append:function(Te,ze){Re(arguments.length,2);var ue=be(this);ue.entries.push({key:Te+"",value:ze+""}),ue.updateURL()},delete:function(Ie){Re(arguments.length,1);for(var Te=be(this),ze=Te.entries,ue=Ie+"",Se=0;Se<ze.length;)ze[Se].key===ue?ze.splice(Se,1):Se++;Te.updateURL()},get:function(Te){Re(arguments.length,1);for(var ze=be(this).entries,ue=Te+"",Se=0;Se<ze.length;Se++)if(ze[Se].key===ue)return ze[Se].value;return null},getAll:function(Te){Re(arguments.length,1);for(var ze=be(this).entries,ue=Te+"",Se=[],Fe=0;Fe<ze.length;Fe++)ze[Fe].key===ue&&Se.push(ze[Fe].value);return Se},has:function(Te){Re(arguments.length,1);for(var ze=be(this).entries,ue=Te+"",Se=0;Se<ze.length;)if(ze[Se++].key===ue)return!0;return!1},set:function(Te,ze){Re(arguments.length,1);for(var Ge,ue=be(this),Se=ue.entries,Fe=!1,Ee=Te+"",re=ze+"",Me=0;Me<Se.length;Me++)(Ge=Se[Me]).key===Ee&&(Fe?Se.splice(Me--,1):(Fe=!0,Ge.value=re));Fe||Se.push({key:Ee,value:re}),ue.updateURL()},sort:function(){var Se,Fe,Ee,Te=be(this),ze=Te.entries,ue=ze.slice();for(ze.length=0,Ee=0;Ee<ue.length;Ee++){for(Se=ue[Ee],Fe=0;Fe<Ee;Fe++)if(ze[Fe].key>Se.key){ze.splice(Fe,0,Se);break}Fe===Ee&&ze.push(Se)}Te.updateURL()},forEach:function(Te){for(var Fe,ze=be(this).entries,ue=B(Te,arguments.length>1?arguments[1]:void 0,3),Se=0;Se<ze.length;)ue((Fe=ze[Se++]).value,Fe.key,this)},keys:function(){return new ce(this,"keys")},values:function(){return new ce(this,"values")},entries:function(){return new ce(this,"entries")}},{enumerable:!0}),d(Ve,A,Ve.entries),d(Ve,"toString",function(){for(var Se,Te=be(this).entries,ze=[],ue=0;ue<Te.length;)Se=Te[ue++],ze.push(oe(Se.key)+"="+oe(Se.value));return ze.join("&")},{enumerable:!0}),b(We,X),r({global:!0,forced:!u},{URLSearchParams:We}),!u&&"function"==typeof y&&"function"==typeof C&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(Te){var ue,Se,Fe,ze=[Te];return arguments.length>1&&(M(ue=arguments[1])&&N(Se=ue.body)===X&&((Fe=ue.headers?new C(ue.headers):new C).has("content-type")||Fe.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ue=D(ue,{body:I(0,String(Se)),headers:I(0,Fe)})),ze.push(ue)),y.apply(this,ze)}}),v.exports={URLSearchParams:We,getState:be}},285:function(v,f,l){"use strict";l(8783);var xe,r=l(2109),h=l(9781),u=l(590),d=l(7854),m=l(6048),b=l(1320),w=l(5787),S=l(6656),F=l(1574),E=l(8457),B=l(8710).codeAt,N=l(3197),ee=l(8003),M=l(1637),D=l(9909),I=d.URL,W=M.URLSearchParams,R=M.getState,L=D.set,y=D.getterFor("URL"),C=Math.floor,A=Math.pow,K="Invalid scheme",ve="Invalid host",be="Invalid port",Oe=/[A-Za-z]/,He=/[\d+-.A-Za-z]/,je=/\d/,qe=/^(0x|0X)/,Le=/^[0-7]+$/,ye=/^\d+$/,Ae=/^[\dA-Fa-f]+$/,J=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,V=/[\u0000\t\u000A\u000D #/:?@[\\]]/,oe=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ge=/[\t\u000A\u000D]/g,Re=function(k,se){var pe,Ce,De;if("["==se.charAt(0)){if("]"!=se.charAt(se.length-1)||!(pe=We(se.slice(1,-1))))return ve;k.host=pe}else if(re(k)){if(se=N(se),J.test(se)||null===(pe=ce(se)))return ve;k.host=pe}else{if(V.test(se))return ve;for(pe="",Ce=E(se),De=0;De<Ce.length;De++)pe+=Fe(Ce[De],Te);k.host=pe}},ce=function(k){var pe,Ce,De,at,Qe,ft,St,se=k.split(".");if(se.length&&""==se[se.length-1]&&se.pop(),(pe=se.length)>4)return k;for(Ce=[],De=0;De<pe;De++){if(""==(at=se[De]))return k;if(Qe=10,at.length>1&&"0"==at.charAt(0)&&(Qe=qe.test(at)?16:8,at=at.slice(8==Qe?1:2)),""===at)ft=0;else{if(!(10==Qe?ye:8==Qe?Le:Ae).test(at))return k;ft=parseInt(at,Qe)}Ce.push(ft)}for(De=0;De<pe;De++)if(ft=Ce[De],De==pe-1){if(ft>=A(256,5-pe))return null}else if(ft>255)return null;for(St=Ce.pop(),De=0;De<Ce.length;De++)St+=Ce[De]*A(256,3-De);return St},We=function(k){var at,Qe,ft,St,gt,it,Pe,se=[0,0,0,0,0,0,0,0],pe=0,Ce=null,De=0,bt=function(){return k.charAt(De)};if(":"==bt()){if(":"!=k.charAt(1))return;De+=2,Ce=++pe}for(;bt();){if(8==pe)return;if(":"!=bt()){for(at=Qe=0;Qe<4&&Ae.test(bt());)at=16*at+parseInt(bt(),16),De++,Qe++;if("."==bt()){if(0==Qe||(De-=Qe,pe>6))return;for(ft=0;bt();){if(St=null,ft>0){if(!("."==bt()&&ft<4))return;De++}if(!je.test(bt()))return;for(;je.test(bt());){if(gt=parseInt(bt(),10),null===St)St=gt;else{if(0==St)return;St=10*St+gt}if(St>255)return;De++}se[pe]=256*se[pe]+St,(2==++ft||4==ft)&&pe++}if(4!=ft)return;break}if(":"==bt()){if(De++,!bt())return}else if(bt())return;se[pe++]=at}else{if(null!==Ce)return;De++,Ce=++pe}}if(null!==Ce)for(it=pe-Ce,pe=7;0!=pe&&it>0;)Pe=se[pe],se[pe--]=se[Ce+it-1],se[Ce+--it]=Pe;else if(8!=pe)return;return se},Ie=function(k){var se,pe,Ce,De;if("number"==typeof k){for(se=[],pe=0;pe<4;pe++)se.unshift(k%256),k=C(k/256);return se.join(".")}if("object"==typeof k){for(se="",Ce=function(k){for(var se=null,pe=1,Ce=null,De=0,at=0;at<8;at++)0!==k[at]?(De>pe&&(se=Ce,pe=De),Ce=null,De=0):(null===Ce&&(Ce=at),++De);return De>pe&&(se=Ce,pe=De),se}(k),pe=0;pe<8;pe++)De&&0===k[pe]||(De&&(De=!1),Ce===pe?(se+=pe?":":"::",De=!0):(se+=k[pe].toString(16),pe<7&&(se+=":")));return"["+se+"]"}return k},Te={},ze=F({},Te,{" ":1,'"':1,"<":1,">":1,"`":1}),ue=F({},ze,{"#":1,"?":1,"{":1,"}":1}),Se=F({},ue,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Fe=function(k,se){var pe=B(k,0);return pe>32&&pe<127&&!S(se,k)?k:encodeURIComponent(k)},Ee={ftp:21,file:null,http:80,https:443,ws:80,wss:443},re=function(k){return S(Ee,k.scheme)},Me=function(k){return""!=k.username||""!=k.password},Ge=function(k){return!k.host||k.cannotBeABaseURL||"file"==k.scheme},ot=function(k,se){var pe;return 2==k.length&&Oe.test(k.charAt(0))&&(":"==(pe=k.charAt(1))||!se&&"|"==pe)},lt=function(k){var se;return k.length>1&&ot(k.slice(0,2))&&(2==k.length||"/"===(se=k.charAt(2))||"\\"===se||"?"===se||"#"===se)},Tt=function(k){var se=k.path,pe=se.length;pe&&("file"!=k.scheme||1!=pe||!ot(se[0],!0))&&se.pop()},Ue=function(k){return"."===k||"%2e"===k.toLowerCase()},Ne=function(k){return".."===(k=k.toLowerCase())||"%2e."===k||".%2e"===k||"%2e%2e"===k},et={},_t={},tt={},j={},te={},de={},fe={},Be={},ut={},Ct={},nt={},Q={},$e={},_e={},Ze={},ct={},vt={},yt={},Lt={},Ht={},$t={},Bt=function(k,se,pe,Ce){var it,Pe,bt,Qt,De=pe||et,at=0,Qe="",ft=!1,St=!1,gt=!1;for(pe||(k.scheme="",k.username="",k.password="",k.host=null,k.port=null,k.path=[],k.query=null,k.fragment=null,k.cannotBeABaseURL=!1,se=se.replace(oe,"")),se=se.replace(ge,""),it=E(se);at<=it.length;){switch(Pe=it[at],De){case et:if(!Pe||!Oe.test(Pe)){if(pe)return K;De=tt;continue}Qe+=Pe.toLowerCase(),De=_t;break;case _t:if(Pe&&(He.test(Pe)||"+"==Pe||"-"==Pe||"."==Pe))Qe+=Pe.toLowerCase();else{if(":"!=Pe){if(pe)return K;Qe="",De=tt,at=0;continue}if(pe&&(re(k)!=S(Ee,Qe)||"file"==Qe&&(Me(k)||null!==k.port)||"file"==k.scheme&&!k.host))return;if(k.scheme=Qe,pe)return void(re(k)&&Ee[k.scheme]==k.port&&(k.port=null));Qe="","file"==k.scheme?De=_e:re(k)&&Ce&&Ce.scheme==k.scheme?De=j:re(k)?De=Be:"/"==it[at+1]?(De=te,at++):(k.cannotBeABaseURL=!0,k.path.push(""),De=Lt)}break;case tt:if(!Ce||Ce.cannotBeABaseURL&&"#"!=Pe)return K;if(Ce.cannotBeABaseURL&&"#"==Pe){k.scheme=Ce.scheme,k.path=Ce.path.slice(),k.query=Ce.query,k.fragment="",k.cannotBeABaseURL=!0,De=$t;break}De="file"==Ce.scheme?_e:de;continue;case j:if("/"!=Pe||"/"!=it[at+1]){De=de;continue}De=ut,at++;break;case te:if("/"==Pe){De=Ct;break}De=yt;continue;case de:if(k.scheme=Ce.scheme,Pe==xe)k.username=Ce.username,k.password=Ce.password,k.host=Ce.host,k.port=Ce.port,k.path=Ce.path.slice(),k.query=Ce.query;else if("/"==Pe||"\\"==Pe&&re(k))De=fe;else if("?"==Pe)k.username=Ce.username,k.password=Ce.password,k.host=Ce.host,k.port=Ce.port,k.path=Ce.path.slice(),k.query="",De=Ht;else{if("#"!=Pe){k.username=Ce.username,k.password=Ce.password,k.host=Ce.host,k.port=Ce.port,k.path=Ce.path.slice(),k.path.pop(),De=yt;continue}k.username=Ce.username,k.password=Ce.password,k.host=Ce.host,k.port=Ce.port,k.path=Ce.path.slice(),k.query=Ce.query,k.fragment="",De=$t}break;case fe:if(!re(k)||"/"!=Pe&&"\\"!=Pe){if("/"!=Pe){k.username=Ce.username,k.password=Ce.password,k.host=Ce.host,k.port=Ce.port,De=yt;continue}De=Ct}else De=ut;break;case Be:if(De=ut,"/"!=Pe||"/"!=Qe.charAt(at+1))continue;at++;break;case ut:if("/"!=Pe&&"\\"!=Pe){De=Ct;continue}break;case Ct:if("@"==Pe){ft&&(Qe="%40"+Qe),ft=!0,bt=E(Qe);for(var yn=0;yn<bt.length;yn++){var Vn=bt[yn];if(":"!=Vn||gt){var Jn=Fe(Vn,Se);gt?k.password+=Jn:k.username+=Jn}else gt=!0}Qe=""}else if(Pe==xe||"/"==Pe||"?"==Pe||"#"==Pe||"\\"==Pe&&re(k)){if(ft&&""==Qe)return"Invalid authority";at-=E(Qe).length+1,Qe="",De=nt}else Qe+=Pe;break;case nt:case Q:if(pe&&"file"==k.scheme){De=ct;continue}if(":"!=Pe||St){if(Pe==xe||"/"==Pe||"?"==Pe||"#"==Pe||"\\"==Pe&&re(k)){if(re(k)&&""==Qe)return ve;if(pe&&""==Qe&&(Me(k)||null!==k.port))return;if(Qt=Re(k,Qe))return Qt;if(Qe="",De=vt,pe)return;continue}"["==Pe?St=!0:"]"==Pe&&(St=!1),Qe+=Pe}else{if(""==Qe)return ve;if(Qt=Re(k,Qe))return Qt;if(Qe="",De=$e,pe==Q)return}break;case $e:if(!je.test(Pe)){if(Pe==xe||"/"==Pe||"?"==Pe||"#"==Pe||"\\"==Pe&&re(k)||pe){if(""!=Qe){var kn=parseInt(Qe,10);if(kn>65535)return be;k.port=re(k)&&kn===Ee[k.scheme]?null:kn,Qe=""}if(pe)return;De=vt;continue}return be}Qe+=Pe;break;case _e:if(k.scheme="file","/"==Pe||"\\"==Pe)De=Ze;else{if(!Ce||"file"!=Ce.scheme){De=yt;continue}if(Pe==xe)k.host=Ce.host,k.path=Ce.path.slice(),k.query=Ce.query;else if("?"==Pe)k.host=Ce.host,k.path=Ce.path.slice(),k.query="",De=Ht;else{if("#"!=Pe){lt(it.slice(at).join(""))||(k.host=Ce.host,k.path=Ce.path.slice(),Tt(k)),De=yt;continue}k.host=Ce.host,k.path=Ce.path.slice(),k.query=Ce.query,k.fragment="",De=$t}}break;case Ze:if("/"==Pe||"\\"==Pe){De=ct;break}Ce&&"file"==Ce.scheme&&!lt(it.slice(at).join(""))&&(ot(Ce.path[0],!0)?k.path.push(Ce.path[0]):k.host=Ce.host),De=yt;continue;case ct:if(Pe==xe||"/"==Pe||"\\"==Pe||"?"==Pe||"#"==Pe){if(!pe&&ot(Qe))De=yt;else if(""==Qe){if(k.host="",pe)return;De=vt}else{if(Qt=Re(k,Qe))return Qt;if("localhost"==k.host&&(k.host=""),pe)return;Qe="",De=vt}continue}Qe+=Pe;break;case vt:if(re(k)){if(De=yt,"/"!=Pe&&"\\"!=Pe)continue}else if(pe||"?"!=Pe)if(pe||"#"!=Pe){if(Pe!=xe&&(De=yt,"/"!=Pe))continue}else k.fragment="",De=$t;else k.query="",De=Ht;break;case yt:if(Pe==xe||"/"==Pe||"\\"==Pe&&re(k)||!pe&&("?"==Pe||"#"==Pe)){if(Ne(Qe)?(Tt(k),"/"!=Pe&&!("\\"==Pe&&re(k))&&k.path.push("")):Ue(Qe)?"/"!=Pe&&!("\\"==Pe&&re(k))&&k.path.push(""):("file"==k.scheme&&!k.path.length&&ot(Qe)&&(k.host&&(k.host=""),Qe=Qe.charAt(0)+":"),k.path.push(Qe)),Qe="","file"==k.scheme&&(Pe==xe||"?"==Pe||"#"==Pe))for(;k.path.length>1&&""===k.path[0];)k.path.shift();"?"==Pe?(k.query="",De=Ht):"#"==Pe&&(k.fragment="",De=$t)}else Qe+=Fe(Pe,ue);break;case Lt:"?"==Pe?(k.query="",De=Ht):"#"==Pe?(k.fragment="",De=$t):Pe!=xe&&(k.path[0]+=Fe(Pe,Te));break;case Ht:pe||"#"!=Pe?Pe!=xe&&("'"==Pe&&re(k)?k.query+="%27":k.query+="#"==Pe?"%23":Fe(Pe,Te)):(k.fragment="",De=$t);break;case $t:Pe!=xe&&(k.fragment+=Fe(Pe,ze))}at++}},Zt=function(se){var Qe,ft,pe=w(this,Zt,"URL"),Ce=arguments.length>1?arguments[1]:void 0,De=String(se),at=L(pe,{type:"URL"});if(void 0!==Ce)if(Ce instanceof Zt)Qe=y(Ce);else if(ft=Bt(Qe={},String(Ce)))throw TypeError(ft);if(ft=Bt(at,De,null,Qe))throw TypeError(ft);var St=at.searchParams=new W,gt=R(St);gt.updateSearchParams(at.query),gt.updateURL=function(){at.query=String(St)||null},h||(pe.href=H.call(pe),pe.origin=P.call(pe),pe.protocol=U.call(pe),pe.username=_.call(pe),pe.password=T.call(pe),pe.host=z.call(pe),pe.hostname=Z.call(pe),pe.port=he.call(pe),pe.pathname=me.call(pe),pe.search=Y.call(pe),pe.searchParams=ne.call(pe),pe.hash=we.call(pe))},$=Zt.prototype,H=function(){var k=y(this),se=k.scheme,pe=k.username,Ce=k.password,De=k.host,at=k.port,Qe=k.path,ft=k.query,St=k.fragment,gt=se+":";return null!==De?(gt+="//",Me(k)&&(gt+=pe+(Ce?":"+Ce:"")+"@"),gt+=Ie(De),null!==at&&(gt+=":"+at)):"file"==se&&(gt+="//"),gt+=k.cannotBeABaseURL?Qe[0]:Qe.length?"/"+Qe.join("/"):"",null!==ft&&(gt+="?"+ft),null!==St&&(gt+="#"+St),gt},P=function(){var k=y(this),se=k.scheme,pe=k.port;if("blob"==se)try{return new URL(se.path[0]).origin}catch{return"null"}return"file"!=se&&re(k)?se+"://"+Ie(k.host)+(null!==pe?":"+pe:""):"null"},U=function(){return y(this).scheme+":"},_=function(){return y(this).username},T=function(){return y(this).password},z=function(){var k=y(this),se=k.host,pe=k.port;return null===se?"":null===pe?Ie(se):Ie(se)+":"+pe},Z=function(){var k=y(this).host;return null===k?"":Ie(k)},he=function(){var k=y(this).port;return null===k?"":String(k)},me=function(){var k=y(this),se=k.path;return k.cannotBeABaseURL?se[0]:se.length?"/"+se.join("/"):""},Y=function(){var k=y(this).query;return k?"?"+k:""},ne=function(){return y(this).searchParams},we=function(){var k=y(this).fragment;return k?"#"+k:""},Ke=function(k,se){return{get:k,set:se,configurable:!0,enumerable:!0}};if(h&&m($,{href:Ke(H,function(k){var se=y(this),pe=String(k),Ce=Bt(se,pe);if(Ce)throw TypeError(Ce);R(se.searchParams).updateSearchParams(se.query)}),origin:Ke(P),protocol:Ke(U,function(k){var se=y(this);Bt(se,String(k)+":",et)}),username:Ke(_,function(k){var se=y(this),pe=E(String(k));if(!Ge(se)){se.username="";for(var Ce=0;Ce<pe.length;Ce++)se.username+=Fe(pe[Ce],Se)}}),password:Ke(T,function(k){var se=y(this),pe=E(String(k));if(!Ge(se)){se.password="";for(var Ce=0;Ce<pe.length;Ce++)se.password+=Fe(pe[Ce],Se)}}),host:Ke(z,function(k){var se=y(this);se.cannotBeABaseURL||Bt(se,String(k),nt)}),hostname:Ke(Z,function(k){var se=y(this);se.cannotBeABaseURL||Bt(se,String(k),Q)}),port:Ke(he,function(k){var se=y(this);Ge(se)||(""==(k=String(k))?se.port=null:Bt(se,k,$e))}),pathname:Ke(me,function(k){var se=y(this);se.cannotBeABaseURL||(se.path=[],Bt(se,k+"",vt))}),search:Ke(Y,function(k){var se=y(this);""==(k=String(k))?se.query=null:("?"==k.charAt(0)&&(k=k.slice(1)),se.query="",Bt(se,k,Ht)),R(se.searchParams).updateSearchParams(se.query)}),searchParams:Ke(ne),hash:Ke(we,function(k){var se=y(this);""!=(k=String(k))?("#"==k.charAt(0)&&(k=k.slice(1)),se.fragment="",Bt(se,k,$t)):se.fragment=null})}),b($,"toJSON",function(){return H.call(this)},{enumerable:!0}),b($,"toString",function(){return H.call(this)},{enumerable:!0}),I){var xt=I.createObjectURL,pt=I.revokeObjectURL;xt&&b(Zt,"createObjectURL",function(se){return xt.apply(I,arguments)}),pt&&b(Zt,"revokeObjectURL",function(se){return pt.apply(I,arguments)})}ee(Zt,"URL"),r({global:!0,forced:!u,sham:!h},{URL:Zt})}},g={};function q(v){if(g[v])return g[v].exports;var f=g[v]={exports:{}};return Xe[v](f,f.exports,q),f.exports}q.d=function(v,f){for(var l in f)q.o(f,l)&&!q.o(v,l)&&Object.defineProperty(v,l,{enumerable:!0,get:f[l]})},q.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),q.o=function(v,f){return Object.prototype.hasOwnProperty.call(v,f)},q.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})};var le={};return function(){"use strict";function Ie($,H){var P;if(typeof Symbol>"u"||null==$[Symbol.iterator]){if(Array.isArray($)||(P=function Te($,H){if($){if("string"==typeof $)return ze($,H);var P=Object.prototype.toString.call($).slice(8,-1);if("Object"===P&&$.constructor&&(P=$.constructor.name),"Map"===P||"Set"===P)return Array.from($);if("Arguments"===P||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return ze($,H)}}($))||H&&$&&"number"==typeof $.length){P&&($=P);var U=0,_=function(){};return{s:_,n:function(){return U>=$.length?{done:!0}:{done:!1,value:$[U++]}},e:function(me){throw me},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Z,T=!0,z=!1;return{s:function(){P=$[Symbol.iterator]()},n:function(){var me=P.next();return T=me.done,me},e:function(me){z=!0,Z=me},f:function(){try{!T&&null!=P.return&&P.return()}finally{if(z)throw Z}}}}function ze($,H){(null==H||H>$.length)&&(H=$.length);for(var P=0,U=new Array(H);P<H;P++)U[P]=$[P];return U}function Se($,H){for(var P=0;P<H.length;P++){var U=H[P];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty($,U.key,U)}}q.r(le),q.d(le,{Dropzone:function(){return _e},default:function(){return Zt}}),q(2222),q(7327),q(2772),q(6992),q(1249),q(7042),q(561),q(8264),q(8309),q(489),q(1539),q(4916),q(9714),q(8783),q(4723),q(5306),q(3123),q(3210),q(2472),q(2990),q(8927),q(3105),q(5035),q(4345),q(7174),q(2846),q(4731),q(7209),q(6319),q(8867),q(7789),q(3739),q(9368),q(4483),q(2056),q(3462),q(678),q(7462),q(3824),q(5021),q(2974),q(5016),q(4747),q(3948),q(285);var Ee=function(){function $(){!function ue($,H){if(!($ instanceof H))throw new TypeError("Cannot call a class as a function")}(this,$)}return function Fe($,H,P){return H&&Se($.prototype,H),P&&Se($,P),$}($,[{key:"on",value:function(P,U){return this._callbacks=this._callbacks||{},this._callbacks[P]||(this._callbacks[P]=[]),this._callbacks[P].push(U),this}},{key:"emit",value:function(P){this._callbacks=this._callbacks||{};for(var U=this._callbacks[P],_=arguments.length,T=new Array(_>1?_-1:0),z=1;z<_;z++)T[z-1]=arguments[z];if(U){var he,Z=Ie(U,!0);try{for(Z.s();!(he=Z.n()).done;)he.value.apply(this,T)}catch(Y){Z.e(Y)}finally{Z.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+P,{args:T})),this}},{key:"makeEvent",value:function(P,U){var _={bubbles:!0,cancelable:!0,detail:U};if("function"==typeof window.CustomEvent)return new CustomEvent(P,_);var T=document.createEvent("CustomEvent");return T.initCustomEvent(P,_.bubbles,_.cancelable,_.detail),T}},{key:"off",value:function(P,U){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var _=this._callbacks[P];if(!_)return this;if(1===arguments.length)return delete this._callbacks[P],this;for(var T=0;T<_.length;T++)if(_[T]===U){_.splice(T,1);break}return this}}]),$}();function Ge($,H){var P;if(typeof Symbol>"u"||null==$[Symbol.iterator]){if(Array.isArray($)||(P=function ot($,H){if($){if("string"==typeof $)return lt($,H);var P=Object.prototype.toString.call($).slice(8,-1);if("Object"===P&&$.constructor&&(P=$.constructor.name),"Map"===P||"Set"===P)return Array.from($);if("Arguments"===P||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return lt($,H)}}($))||H&&$&&"number"==typeof $.length){P&&($=P);var U=0,_=function(){};return{s:_,n:function(){return U>=$.length?{done:!0}:{done:!1,value:$[U++]}},e:function(me){throw me},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Z,T=!0,z=!1;return{s:function(){P=$[Symbol.iterator]()},n:function(){var me=P.next();return T=me.done,me},e:function(me){z=!0,Z=me},f:function(){try{!T&&null!=P.return&&P.return()}finally{if(z)throw Z}}}}function lt($,H){(null==H||H>$.length)&&(H=$.length);for(var P=0,U=new Array(H);P<H;P++)U[P]=$[P];return U}var Ue={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(H,P,U){if(U)return{dzuuid:U.file.upload.uuid,dzchunkindex:U.index,dztotalfilesize:U.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:U.file.upload.totalChunkCount,dzchunkbyteoffset:U.index*this.options.chunkSize}},accept:function(H,P){return P()},chunksUploaded:function(H,P){P()},fallback:function(){var H;this.element.className="".concat(this.element.className," dz-browser-not-supported");var U,P=Ge(this.element.getElementsByTagName("div"),!0);try{for(P.s();!(U=P.n()).done;){var _=U.value;if(/(^| )dz-message($| )/.test(_.className)){H=_,_.className="dz-message";break}}}catch(z){P.e(z)}finally{P.f()}H||(H=_e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(H));var T=H.getElementsByTagName("span")[0];return T&&(null!=T.textContent?T.textContent=this.options.dictFallbackMessage:null!=T.innerText&&(T.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(H,P,U,_){var T={srcX:0,srcY:0,srcWidth:H.width,srcHeight:H.height},z=H.width/H.height;null==P&&null==U?(P=T.srcWidth,U=T.srcHeight):null==P?P=U*z:null==U&&(U=P/z);var Z=(P=Math.min(P,T.srcWidth))/(U=Math.min(U,T.srcHeight));if(T.srcWidth>P||T.srcHeight>U)if("crop"===_)z>Z?(T.srcHeight=H.height,T.srcWidth=T.srcHeight*Z):(T.srcWidth=H.width,T.srcHeight=T.srcWidth/Z);else{if("contain"!==_)throw new Error("Unknown resizeMethod '".concat(_,"'"));z>Z?U=P/z:P=U*z}return T.srcX=(H.width-T.srcWidth)/2,T.srcY=(H.height-T.srcHeight)/2,T.trgWidth=P,T.trgHeight=U,T},transformFile:function(H,P){return(this.options.resizeWidth||this.options.resizeHeight)&&H.type.match(/image.*/)?this.resizeImage(H,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,P):P(H)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(H){return this.element.classList.remove("dz-drag-hover")},dragstart:function(H){},dragend:function(H){return this.element.classList.remove("dz-drag-hover")},dragenter:function(H){return this.element.classList.add("dz-drag-hover")},dragover:function(H){return this.element.classList.add("dz-drag-hover")},dragleave:function(H){return this.element.classList.remove("dz-drag-hover")},paste:function(H){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(H){var P=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){H.previewElement=_e.createElement(this.options.previewTemplate.trim()),H.previewTemplate=H.previewElement,this.previewsContainer.appendChild(H.previewElement);var _,U=Ge(H.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(U.s();!(_=U.n()).done;){var T=_.value;T.textContent=H.name}}catch(we){U.e(we)}finally{U.f()}var Z,z=Ge(H.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(z.s();!(Z=z.n()).done;)(T=Z.value).innerHTML=this.filesize(H.size)}catch(we){z.e(we)}finally{z.f()}this.options.addRemoveLinks&&(H._removeLink=_e.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),H.previewElement.appendChild(H._removeLink));var Y,he=function(Ke){return Ke.preventDefault(),Ke.stopPropagation(),H.status===_e.UPLOADING?_e.confirm(P.options.dictCancelUploadConfirmation,function(){return P.removeFile(H)}):P.options.dictRemoveFileConfirmation?_e.confirm(P.options.dictRemoveFileConfirmation,function(){return P.removeFile(H)}):P.removeFile(H)},me=Ge(H.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(me.s();!(Y=me.n()).done;)Y.value.addEventListener("click",he)}catch(we){me.e(we)}finally{me.f()}}},removedfile:function(H){return null!=H.previewElement&&null!=H.previewElement.parentNode&&H.previewElement.parentNode.removeChild(H.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(H,P){if(H.previewElement){H.previewElement.classList.remove("dz-file-preview");var _,U=Ge(H.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(U.s();!(_=U.n()).done;){var T=_.value;T.alt=H.name,T.src=P}}catch(z){U.e(z)}finally{U.f()}return setTimeout(function(){return H.previewElement.classList.add("dz-image-preview")},1)}},error:function(H,P){if(H.previewElement){H.previewElement.classList.add("dz-error"),"string"!=typeof P&&P.error&&(P=P.error);var _,U=Ge(H.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(U.s();!(_=U.n()).done;)_.value.textContent=P}catch(z){U.e(z)}finally{U.f()}}},errormultiple:function(){},processing:function(H){if(H.previewElement&&(H.previewElement.classList.add("dz-processing"),H._removeLink))return H._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(H,P,U){if(H.previewElement){var T,_=Ge(H.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(_.s();!(T=_.n()).done;){var z=T.value;"PROGRESS"===z.nodeName?z.value=P:z.style.width="".concat(P,"%")}}catch(Z){_.e(Z)}finally{_.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(H){if(H.previewElement)return H.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(H){return this.emit("error",H,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(H){if(H._removeLink&&(H._removeLink.innerHTML=this.options.dictRemoveFile),H.previewElement)return H.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function Ne($){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})($)}function et($,H){var P;if(typeof Symbol>"u"||null==$[Symbol.iterator]){if(Array.isArray($)||(P=function _t($,H){if($){if("string"==typeof $)return tt($,H);var P=Object.prototype.toString.call($).slice(8,-1);if("Object"===P&&$.constructor&&(P=$.constructor.name),"Map"===P||"Set"===P)return Array.from($);if("Arguments"===P||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return tt($,H)}}($))||H&&$&&"number"==typeof $.length){P&&($=P);var U=0,_=function(){};return{s:_,n:function(){return U>=$.length?{done:!0}:{done:!1,value:$[U++]}},e:function(me){throw me},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Z,T=!0,z=!1;return{s:function(){P=$[Symbol.iterator]()},n:function(){var me=P.next();return T=me.done,me},e:function(me){z=!0,Z=me},f:function(){try{!T&&null!=P.return&&P.return()}finally{if(z)throw Z}}}}function tt($,H){(null==H||H>$.length)&&(H=$.length);for(var P=0,U=new Array(H);P<H;P++)U[P]=$[P];return U}function j($,H){if(!($ instanceof H))throw new TypeError("Cannot call a class as a function")}function te($,H){for(var P=0;P<H.length;P++){var U=H[P];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty($,U.key,U)}}function de($,H,P){return H&&te($.prototype,H),P&&te($,P),$}function Be($,H){return(Be=Object.setPrototypeOf||function(U,_){return U.__proto__=_,U})($,H)}function ut($){var H=function Q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var _,U=$e($);if(H){var T=$e(this).constructor;_=Reflect.construct(U,arguments,T)}else _=U.apply(this,arguments);return Ct(this,_)}}function Ct($,H){return!H||"object"!==Ne(H)&&"function"!=typeof H?nt($):H}function nt($){if(void 0===$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function $e($){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)})($)}var _e=function($){!function fe($,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(H&&H.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),H&&Be($,H)}(P,$);var H=ut(P);function P(U,_){var T,z,Z;if(j(this,P),(T=H.call(this)).element=U,T.version=P.version,T.clickableElements=[],T.listeners=[],T.files=[],"string"==typeof T.element&&(T.element=document.querySelector(T.element)),!T.element||null==T.element.nodeType)throw new Error("Invalid dropzone element.");if(T.element.dropzone)throw new Error("Dropzone already attached.");P.instances.push(nt(T)),T.element.dropzone=nt(T);var he=null!=(Z=P.optionsForElement(T.element))?Z:{};if(T.options=P.extend({},Ue,he,_??{}),T.options.previewTemplate=T.options.previewTemplate.replace(/\n*/g,""),T.options.forceFallback||!P.isBrowserSupported())return Ct(T,T.options.fallback.call(nt(T)));if(null==T.options.url&&(T.options.url=T.element.getAttribute("action")),!T.options.url)throw new Error("No URL provided.");if(T.options.acceptedFiles&&T.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(T.options.uploadMultiple&&T.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return T.options.acceptedMimeTypes&&(T.options.acceptedFiles=T.options.acceptedMimeTypes,delete T.options.acceptedMimeTypes),null!=T.options.renameFilename&&(T.options.renameFile=function(me){return T.options.renameFilename.call(nt(T),me.name,me)}),"string"==typeof T.options.method&&(T.options.method=T.options.method.toUpperCase()),(z=T.getExistingFallback())&&z.parentNode&&z.parentNode.removeChild(z),!1!==T.options.previewsContainer&&(T.previewsContainer=T.options.previewsContainer?P.getElement(T.options.previewsContainer,"previewsContainer"):T.element),T.options.clickable&&(T.clickableElements=!0===T.options.clickable?[T.element]:P.getElements(T.options.clickable,"clickable")),T.init(),T}return de(P,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(_){return _.accepted}).map(function(_){return _})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(_){return!_.accepted}).map(function(_){return _})}},{key:"getFilesWithStatus",value:function(_){return this.files.filter(function(T){return T.status===_}).map(function(T){return T})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(P.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(P.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(P.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(_){return _.status===P.UPLOADING||_.status===P.QUEUED}).map(function(_){return _})}},{key:"init",value:function(){var _=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(P.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function ne(){_.hiddenFileInput&&_.hiddenFileInput.parentNode.removeChild(_.hiddenFileInput),_.hiddenFileInput=document.createElement("input"),_.hiddenFileInput.setAttribute("type","file"),(null===_.options.maxFiles||_.options.maxFiles>1)&&_.hiddenFileInput.setAttribute("multiple","multiple"),_.hiddenFileInput.className="dz-hidden-input",null!==_.options.acceptedFiles&&_.hiddenFileInput.setAttribute("accept",_.options.acceptedFiles),null!==_.options.capture&&_.hiddenFileInput.setAttribute("capture",_.options.capture),_.hiddenFileInput.setAttribute("tabindex","-1"),_.hiddenFileInput.style.visibility="hidden",_.hiddenFileInput.style.position="absolute",_.hiddenFileInput.style.top="0",_.hiddenFileInput.style.left="0",_.hiddenFileInput.style.height="0",_.hiddenFileInput.style.width="0",P.getElement(_.options.hiddenInputContainer,"hiddenInputContainer").appendChild(_.hiddenFileInput),_.hiddenFileInput.addEventListener("change",function(){var we=_.hiddenFileInput.files;if(we.length){var xt,Ke=et(we,!0);try{for(Ke.s();!(xt=Ke.n()).done;)_.addFile(xt.value)}catch(k){Ke.e(k)}finally{Ke.f()}}_.emit("addedfiles",we),ne()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var Z,z=et(this.events,!0);try{for(z.s();!(Z=z.n()).done;){var he=Z.value;this.on(he,this.options[he])}}catch(ne){z.e(ne)}finally{z.f()}this.on("uploadprogress",function(){return _.updateTotalUploadProgress()}),this.on("removedfile",function(){return _.updateTotalUploadProgress()}),this.on("canceled",function(ne){return _.emit("complete",ne)}),this.on("complete",function(ne){if(0===_.getAddedFiles().length&&0===_.getUploadingFiles().length&&0===_.getQueuedFiles().length)return setTimeout(function(){return _.emit("queuecomplete")},0)});var Y=function(we){if(function(we){if(we.dataTransfer.types)for(var Ke=0;Ke<we.dataTransfer.types.length;Ke++)if("Files"===we.dataTransfer.types[Ke])return!0;return!1}(we))return we.stopPropagation(),we.preventDefault?we.preventDefault():we.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(we){return _.emit("dragstart",we)},dragenter:function(we){return Y(we),_.emit("dragenter",we)},dragover:function(we){var Ke;try{Ke=we.dataTransfer.effectAllowed}catch{}return we.dataTransfer.dropEffect="move"===Ke||"linkMove"===Ke?"move":"copy",Y(we),_.emit("dragover",we)},dragleave:function(we){return _.emit("dragleave",we)},drop:function(we){return Y(we),_.drop(we)},dragend:function(we){return _.emit("dragend",we)}}}],this.clickableElements.forEach(function(ne){return _.listeners.push({element:ne,events:{click:function(Ke){return(ne!==_.element||Ke.target===_.element||P.elementInside(Ke.target,_.element.querySelector(".dz-message")))&&_.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,P.instances.splice(P.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var _,T=0,z=0;if(this.getActiveFiles().length){var me,he=et(this.getActiveFiles(),!0);try{for(he.s();!(me=he.n()).done;){var Y=me.value;T+=Y.upload.bytesSent,z+=Y.upload.total}}catch(ne){he.e(ne)}finally{he.f()}_=100*T/z}else _=100;return this.emit("totaluploadprogress",_,z,T)}},{key:"_getParamName",value:function(_){return"function"==typeof this.options.paramName?this.options.paramName(_):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(_,"]"):"")}},{key:"_renameFile",value:function(_){return"function"!=typeof this.options.renameFile?_.name:this.options.renameFile(_)}},{key:"getFallbackForm",value:function(){var _,T;if(_=this.getExistingFallback())return _;var z='<div class="dz-fallback">';this.options.dictFallbackText&&(z+="<p>".concat(this.options.dictFallbackText,"</p>")),z+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var Z=P.createElement(z);return"FORM"!==this.element.tagName?(T=P.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(Z):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),T??Z}},{key:"getExistingFallback",value:function(){for(var _=function(Y){var we,ne=et(Y,!0);try{for(ne.s();!(we=ne.n()).done;){var Ke=we.value;if(/(^| )fallback($| )/.test(Ke.className))return Ke}}catch(xt){ne.e(xt)}finally{ne.f()}},T=0,z=["div","form"];T<z.length;T++){var he;if(he=_(this.element.getElementsByTagName(z[T])))return he}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(_){return function(){var T=[];for(var z in _.events)T.push(_.element.addEventListener(z,_.events[z],!1));return T}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(_){return function(){var T=[];for(var z in _.events)T.push(_.element.removeEventListener(z,_.events[z],!1));return T}()})}},{key:"disable",value:function(){var _=this;return this.clickableElements.forEach(function(T){return T.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(T){return _.cancelUpload(T)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(_){return _.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(_){var T=0,z="b";if(_>0){for(var Z=["tb","gb","mb","kb","b"],he=0;he<Z.length;he++){var me=Z[he];if(_>=Math.pow(this.options.filesizeBase,4-he)/10){T=_/Math.pow(this.options.filesizeBase,4-he),z=me;break}}T=Math.round(10*T)/10}return"<strong>".concat(T,"</strong> ").concat(this.options.dictFileSizeUnits[z])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(_){if(_.dataTransfer){this.emit("drop",_);for(var T=[],z=0;z<_.dataTransfer.files.length;z++)T[z]=_.dataTransfer.files[z];if(T.length){var Z=_.dataTransfer.items;Z&&Z.length&&null!=Z[0].webkitGetAsEntry?this._addFilesFromItems(Z):this.handleFiles(T)}this.emit("addedfiles",T)}}},{key:"paste",value:function(_){if(null!=function $t($,H){return typeof $<"u"&&null!==$?H($):void 0}(_?.clipboardData,function(z){return z.items})){this.emit("paste",_);var T=_.clipboardData.items;if(T.length)return this._addFilesFromItems(T)}}},{key:"handleFiles",value:function(_){var z,T=et(_,!0);try{for(T.s();!(z=T.n()).done;)this.addFile(z.value)}catch(he){T.e(he)}finally{T.f()}}},{key:"_addFilesFromItems",value:function(_){var T=this;return function(){var he,z=[],Z=et(_,!0);try{for(Z.s();!(he=Z.n()).done;){var Y,me=he.value;null!=me.webkitGetAsEntry&&(Y=me.webkitGetAsEntry())?z.push(Y.isFile?T.addFile(me.getAsFile()):Y.isDirectory?T._addFilesFromDirectory(Y,Y.name):void 0):z.push(null==me.getAsFile||null!=me.kind&&"file"!==me.kind?void 0:T.addFile(me.getAsFile()))}}catch(ne){Z.e(ne)}finally{Z.f()}return z}()}},{key:"_addFilesFromDirectory",value:function(_,T){var z=this,Z=_.createReader(),he=function(ne){return function Bt($,H,P){if(typeof $<"u"&&null!==$&&"function"==typeof $[H])return P($,H)}(console,"log",function(we){return we.log(ne)})};return function Y(){return Z.readEntries(function(ne){if(ne.length>0){var Ke,we=et(ne,!0);try{for(we.s();!(Ke=we.n()).done;){var xt=Ke.value;xt.isFile?xt.file(function(pt){if(!z.options.ignoreHiddenFiles||"."!==pt.name.substring(0,1))return pt.fullPath="".concat(T,"/").concat(pt.name),z.addFile(pt)}):xt.isDirectory&&z._addFilesFromDirectory(xt,"".concat(T,"/").concat(xt.name))}}catch(pt){we.e(pt)}finally{we.f()}Y()}return null},he)}()}},{key:"accept",value:function(_,T){this.options.maxFilesize&&_.size>1024*this.options.maxFilesize*1024?T(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(_.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):P.isValidFile(_,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(T(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",_)):this.options.accept.call(this,_,T):T(this.options.dictInvalidFileType)}},{key:"addFile",value:function(_){var T=this;_.upload={uuid:P.uuidv4(),progress:0,total:_.size,bytesSent:0,filename:this._renameFile(_)},this.files.push(_),_.status=P.ADDED,this.emit("addedfile",_),this._enqueueThumbnail(_),this.accept(_,function(z){z?(_.accepted=!1,T._errorProcessing([_],z)):(_.accepted=!0,T.options.autoQueue&&T.enqueueFile(_)),T._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(_){var z,T=et(_,!0);try{for(T.s();!(z=T.n()).done;)this.enqueueFile(z.value)}catch(he){T.e(he)}finally{T.f()}return null}},{key:"enqueueFile",value:function(_){var T=this;if(_.status!==P.ADDED||!0!==_.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(_.status=P.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return T.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(_){var T=this;if(this.options.createImageThumbnails&&_.type.match(/image.*/)&&_.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(_),setTimeout(function(){return T._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var _=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var T=this._thumbnailQueue.shift();return this.createThumbnail(T,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(z){return _.emit("thumbnail",T,z),_._processingThumbnail=!1,_._processThumbnailQueue()})}}},{key:"removeFile",value:function(_){if(_.status===P.UPLOADING&&this.cancelUpload(_),this.files=Ze(this.files,_),this.emit("removedfile",_),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(_){null==_&&(_=!1);var z,T=et(this.files.slice(),!0);try{for(T.s();!(z=T.n()).done;){var Z=z.value;(Z.status!==P.UPLOADING||_)&&this.removeFile(Z)}}catch(he){T.e(he)}finally{T.f()}return null}},{key:"resizeImage",value:function(_,T,z,Z,he){var me=this;return this.createThumbnail(_,T,z,Z,!0,function(Y,ne){if(null==ne)return he(_);var we=me.options.resizeMimeType;null==we&&(we=_.type);var Ke=ne.toDataURL(we,me.options.resizeQuality);return("image/jpeg"===we||"image/jpg"===we)&&(Ke=Lt.restore(_.dataURL,Ke)),he(P.dataURItoBlob(Ke))})}},{key:"createThumbnail",value:function(_,T,z,Z,he,me){var Y=this,ne=new FileReader;ne.onload=function(){_.dataURL=ne.result,"image/svg+xml"!==_.type?Y.createThumbnailFromUrl(_,T,z,Z,he,me):me?.(ne.result)},ne.readAsDataURL(_)}},{key:"displayExistingFile",value:function(_,T,z,Z){var he=this,me=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",_),this.emit("complete",_),me){_.dataURL=T,this.createThumbnailFromUrl(_,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(we){he.emit("thumbnail",_,we),z&&z()},Z)}else this.emit("thumbnail",_,T),z&&z()}},{key:"createThumbnailFromUrl",value:function(_,T,z,Z,he,me,Y){var ne=this,we=document.createElement("img");return Y&&(we.crossOrigin=Y),he="from-image"!=getComputedStyle(document.body).imageOrientation&&he,we.onload=function(){var Ke=function(pt){return pt(1)};return typeof EXIF<"u"&&null!==EXIF&&he&&(Ke=function(pt){return EXIF.getData(we,function(){return pt(EXIF.getTag(this,"Orientation"))})}),Ke(function(xt){_.width=we.width,_.height=we.height;var pt=ne.options.resize.call(ne,_,T,z,Z),k=document.createElement("canvas"),se=k.getContext("2d");switch(k.width=pt.trgWidth,k.height=pt.trgHeight,xt>4&&(k.width=pt.trgHeight,k.height=pt.trgWidth),xt){case 2:se.translate(k.width,0),se.scale(-1,1);break;case 3:se.translate(k.width,k.height),se.rotate(Math.PI);break;case 4:se.translate(0,k.height),se.scale(1,-1);break;case 5:se.rotate(.5*Math.PI),se.scale(1,-1);break;case 6:se.rotate(.5*Math.PI),se.translate(0,-k.width);break;case 7:se.rotate(.5*Math.PI),se.translate(k.height,-k.width),se.scale(-1,1);break;case 8:se.rotate(-.5*Math.PI),se.translate(-k.height,0)}yt(se,we,null!=pt.srcX?pt.srcX:0,null!=pt.srcY?pt.srcY:0,pt.srcWidth,pt.srcHeight,null!=pt.trgX?pt.trgX:0,null!=pt.trgY?pt.trgY:0,pt.trgWidth,pt.trgHeight);var pe=k.toDataURL("image/png");if(null!=me)return me(pe,k)})},null!=me&&(we.onerror=me),we.src=_.dataURL}},{key:"processQueue",value:function(){var _=this.options.parallelUploads,T=this.getUploadingFiles().length,z=T;if(!(T>=_)){var Z=this.getQueuedFiles();if(Z.length>0){if(this.options.uploadMultiple)return this.processFiles(Z.slice(0,_-T));for(;z<_;){if(!Z.length)return;this.processFile(Z.shift()),z++}}}}},{key:"processFile",value:function(_){return this.processFiles([_])}},{key:"processFiles",value:function(_){var z,T=et(_,!0);try{for(T.s();!(z=T.n()).done;){var Z=z.value;Z.processing=!0,Z.status=P.UPLOADING,this.emit("processing",Z)}}catch(he){T.e(he)}finally{T.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",_),this.uploadFiles(_)}},{key:"_getFilesWithXhr",value:function(_){return this.files.filter(function(z){return z.xhr===_}).map(function(z){return z})}},{key:"cancelUpload",value:function(_){if(_.status===P.UPLOADING){var Z,T=this._getFilesWithXhr(_.xhr),z=et(T,!0);try{for(z.s();!(Z=z.n()).done;)Z.value.status=P.CANCELED}catch(we){z.e(we)}finally{z.f()}typeof _.xhr<"u"&&_.xhr.abort();var Y,me=et(T,!0);try{for(me.s();!(Y=me.n()).done;)this.emit("canceled",Y.value)}catch(we){me.e(we)}finally{me.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",T)}else(_.status===P.ADDED||_.status===P.QUEUED)&&(_.status=P.CANCELED,this.emit("canceled",_),this.options.uploadMultiple&&this.emit("canceledmultiple",[_]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(_){if("function"==typeof _){for(var T=arguments.length,z=new Array(T>1?T-1:0),Z=1;Z<T;Z++)z[Z-1]=arguments[Z];return _.apply(this,z)}return _}},{key:"uploadFile",value:function(_){return this.uploadFiles([_])}},{key:"uploadFiles",value:function(_){var T=this;this._transformFiles(_,function(z){if(T.options.chunking){var Z=z[0];_[0].upload.chunked=T.options.chunking&&(T.options.forceChunking||Z.size>T.options.chunkSize),_[0].upload.totalChunkCount=Math.ceil(Z.size/T.options.chunkSize)}if(_[0].upload.chunked){var he=_[0],me=z[0];he.upload.chunks=[];var ne=function(){for(var k=0;void 0!==he.upload.chunks[k];)k++;if(!(k>=he.upload.totalChunkCount)){var se=k*T.options.chunkSize,pe=Math.min(se+T.options.chunkSize,me.size),Ce={name:T._getParamName(0),data:me.webkitSlice?me.webkitSlice(se,pe):me.slice(se,pe),filename:he.upload.filename,chunkIndex:k};he.upload.chunks[k]={file:he,index:k,dataBlock:Ce,status:P.UPLOADING,progress:0,retries:0},T._uploadData(_,[Ce])}};if(he.upload.finishedChunkUpload=function(pt,k){var se=!0;pt.status=P.SUCCESS,pt.dataBlock=null,pt.xhr=null;for(var pe=0;pe<he.upload.totalChunkCount;pe++){if(void 0===he.upload.chunks[pe])return ne();he.upload.chunks[pe].status!==P.SUCCESS&&(se=!1)}se&&T.options.chunksUploaded(he,function(){T._finished(_,k,null)})},T.options.parallelChunkUploads)for(var we=0;we<he.upload.totalChunkCount;we++)ne();else ne()}else{for(var Ke=[],xt=0;xt<_.length;xt++)Ke[xt]={name:T._getParamName(xt),data:z[xt],filename:_[xt].upload.filename};T._uploadData(_,Ke)}})}},{key:"_getChunk",value:function(_,T){for(var z=0;z<_.upload.totalChunkCount;z++)if(void 0!==_.upload.chunks[z]&&_.upload.chunks[z].xhr===T)return _.upload.chunks[z]}},{key:"_uploadData",value:function(_,T){var me,z=this,Z=new XMLHttpRequest,he=et(_,!0);try{for(he.s();!(me=he.n()).done;)me.value.xhr=Z}catch(bt){he.e(bt)}finally{he.f()}_[0].upload.chunked&&(_[0].upload.chunks[T[0].chunkIndex].xhr=Z);var ne=this.resolveOption(this.options.method,_),we=this.resolveOption(this.options.url,_);Z.open(ne,we,!0),this.resolveOption(this.options.timeout,_)&&(Z.timeout=this.resolveOption(this.options.timeout,_)),Z.withCredentials=!!this.options.withCredentials,Z.onload=function(bt){z._finishedUploading(_,Z,bt)},Z.ontimeout=function(){z._handleUploadError(_,Z,"Request timedout after ".concat(z.options.timeout/1e3," seconds"))},Z.onerror=function(){z._handleUploadError(_,Z)},(null!=Z.upload?Z.upload:Z).onprogress=function(bt){return z._updateFilesUploadProgress(_,Z,bt)};var pt={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var k in this.options.headers&&P.extend(pt,this.options.headers),pt){var se=pt[k];se&&Z.setRequestHeader(k,se)}var pe=new FormData;if(this.options.params){var Ce=this.options.params;for(var De in"function"==typeof Ce&&(Ce=Ce.call(this,_,Z,_[0].upload.chunked?this._getChunk(_[0],Z):null)),Ce){var at=Ce[De];if(Array.isArray(at))for(var Qe=0;Qe<at.length;Qe++)pe.append(De,at[Qe]);else pe.append(De,at)}}var St,ft=et(_,!0);try{for(ft.s();!(St=ft.n()).done;)this.emit("sending",St.value,Z,pe)}catch(bt){ft.e(bt)}finally{ft.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",_,Z,pe),this._addFormElementData(pe);for(var it=0;it<T.length;it++){var Pe=T[it];pe.append(Pe.name,Pe.data,Pe.filename)}this.submitRequest(Z,pe,_)}},{key:"_transformFiles",value:function(_,T){for(var z=this,Z=[],he=0,me=function(we){z.options.transformFile.call(z,_[we],function(Ke){Z[we]=Ke,++he===_.length&&T(Z)})},Y=0;Y<_.length;Y++)me(Y)}},{key:"_addFormElementData",value:function(_){if("FORM"===this.element.tagName){var z,T=et(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(T.s();!(z=T.n()).done;){var Z=z.value,he=Z.getAttribute("name"),me=Z.getAttribute("type");if(me&&(me=me.toLowerCase()),!(typeof he>"u"||null===he))if("SELECT"===Z.tagName&&Z.hasAttribute("multiple")){var ne,Y=et(Z.options,!0);try{for(Y.s();!(ne=Y.n()).done;){var we=ne.value;we.selected&&_.append(he,we.value)}}catch(Ke){Y.e(Ke)}finally{Y.f()}}else(!me||"checkbox"!==me&&"radio"!==me||Z.checked)&&_.append(he,Z.value)}}catch(Ke){T.e(Ke)}finally{T.f()}}}},{key:"_updateFilesUploadProgress",value:function(_,T,z){if(_[0].upload.chunked){var Y=_[0],ne=this._getChunk(Y,T);z?(ne.progress=100*z.loaded/z.total,ne.total=z.total,ne.bytesSent=z.loaded):(ne.progress=100,ne.bytesSent=ne.total),Y.upload.progress=0,Y.upload.total=0,Y.upload.bytesSent=0;for(var we=0;we<Y.upload.totalChunkCount;we++)Y.upload.chunks[we]&&typeof Y.upload.chunks[we].progress<"u"&&(Y.upload.progress+=Y.upload.chunks[we].progress,Y.upload.total+=Y.upload.chunks[we].total,Y.upload.bytesSent+=Y.upload.chunks[we].bytesSent);Y.upload.progress=Y.upload.progress/Y.upload.totalChunkCount,this.emit("uploadprogress",Y,Y.upload.progress,Y.upload.bytesSent)}else{var he,Z=et(_,!0);try{for(Z.s();!(he=Z.n()).done;){var me=he.value;me.upload.total&&me.upload.bytesSent&&me.upload.bytesSent==me.upload.total||(z?(me.upload.progress=100*z.loaded/z.total,me.upload.total=z.total,me.upload.bytesSent=z.loaded):(me.upload.progress=100,me.upload.bytesSent=me.upload.total),this.emit("uploadprogress",me,me.upload.progress,me.upload.bytesSent))}}catch(Ke){Z.e(Ke)}finally{Z.f()}}}},{key:"_finishedUploading",value:function(_,T,z){var Z;if(_[0].status!==P.CANCELED&&4===T.readyState){if("arraybuffer"!==T.responseType&&"blob"!==T.responseType&&(Z=T.responseText,T.getResponseHeader("content-type")&&~T.getResponseHeader("content-type").indexOf("application/json")))try{Z=JSON.parse(Z)}catch(he){z=he,Z="Invalid JSON response from server."}this._updateFilesUploadProgress(_,T),200<=T.status&&T.status<300?_[0].upload.chunked?_[0].upload.finishedChunkUpload(this._getChunk(_[0],T),Z):this._finished(_,Z,z):this._handleUploadError(_,T,Z)}}},{key:"_handleUploadError",value:function(_,T,z){if(_[0].status!==P.CANCELED){if(_[0].upload.chunked&&this.options.retryChunks){var Z=this._getChunk(_[0],T);if(Z.retries++<this.options.retryChunksLimit)return void this._uploadData(_,[Z.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(_,z||this.options.dictResponseError.replace("{{statusCode}}",T.status),T)}}},{key:"submitRequest",value:function(_,T,z){1==_.readyState?_.send(T):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(_,T,z){var he,Z=et(_,!0);try{for(Z.s();!(he=Z.n()).done;){var me=he.value;me.status=P.SUCCESS,this.emit("success",me,T,z),this.emit("complete",me)}}catch(Y){Z.e(Y)}finally{Z.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",_,T,z),this.emit("completemultiple",_)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(_,T,z){var he,Z=et(_,!0);try{for(Z.s();!(he=Z.n()).done;){var me=he.value;me.status=P.ERROR,this.emit("error",me,T,z),this.emit("complete",me)}}catch(Y){Z.e(Y)}finally{Z.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",_,T,z),this.emit("completemultiple",_)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=Ee,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(_){for(var T=arguments.length,z=new Array(T>1?T-1:0),Z=1;Z<T;Z++)z[Z-1]=arguments[Z];for(var he=0,me=z;he<me.length;he++){var Y=me[he];for(var ne in Y)_[ne]=Y[ne]}return _}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(_){var T=16*Math.random()|0;return("x"===_?T:3&T|8).toString(16)})}}]),P}(Ee);_e.initClass(),_e.version="5.9.3",_e.options={},_e.optionsForElement=function($){if($.getAttribute("id"))return _e.options[ct($.getAttribute("id"))]},_e.instances=[],_e.forElement=function($){if("string"==typeof $&&($=document.querySelector($)),null==$?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return $.dropzone},_e.autoDiscover=!0,_e.discover=function(){var $;if(document.querySelectorAll)$=document.querySelectorAll(".dropzone");else{$=[];var H=function(U){return function(){var z,_=[],T=et(U,!0);try{for(T.s();!(z=T.n()).done;){var Z=z.value;/(^| )dropzone($| )/.test(Z.className)?_.push($.push(Z)):_.push(void 0)}}catch(he){T.e(he)}finally{T.f()}return _}()};H(document.getElementsByTagName("div")),H(document.getElementsByTagName("form"))}return function(){var _,P=[],U=et($,!0);try{for(U.s();!(_=U.n()).done;){var T=_.value;!1!==_e.optionsForElement(T)?P.push(new _e(T)):P.push(void 0)}}catch(z){U.e(z)}finally{U.f()}return P}()},_e.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],_e.isBrowserSupported=function(){var $=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==_e.blacklistedBrowsers&&(_e.blockedBrowsers=_e.blacklistedBrowsers);var P,H=et(_e.blockedBrowsers,!0);try{for(H.s();!(P=H.n()).done;)P.value.test(navigator.userAgent)&&($=!1)}catch(_){H.e(_)}finally{H.f()}}else $=!1;else $=!1;return $},_e.dataURItoBlob=function($){for(var H=atob($.split(",")[1]),P=$.split(",")[0].split(":")[1].split(";")[0],U=new ArrayBuffer(H.length),_=new Uint8Array(U),T=0,z=H.length,Z=0<=z;Z?T<=z:T>=z;Z?T++:T--)_[T]=H.charCodeAt(T);return new Blob([U],{type:P})};var Ze=function(H,P){return H.filter(function(U){return U!==P}).map(function(U){return U})},ct=function(H){return H.replace(/[\-_](\w)/g,function(P){return P.charAt(1).toUpperCase()})};_e.createElement=function($){var H=document.createElement("div");return H.innerHTML=$,H.childNodes[0]},_e.elementInside=function($,H){if($===H)return!0;for(;$=$.parentNode;)if($===H)return!0;return!1},_e.getElement=function($,H){var P;if("string"==typeof $?P=document.querySelector($):null!=$.nodeType&&(P=$),null==P)throw new Error("Invalid `".concat(H,"` option provided. Please provide a CSS selector or a plain HTML element."));return P},_e.getElements=function($,H){var U;if($ instanceof Array){U=[];try{var T,_=et($,!0);try{for(_.s();!(T=_.n()).done;)U.push(this.getElement(T.value,H))}catch(he){_.e(he)}finally{_.f()}}catch{U=null}}else if("string"==typeof $){U=[];var Z,z=et(document.querySelectorAll($),!0);try{for(z.s();!(Z=z.n()).done;)U.push(Z.value)}catch(he){z.e(he)}finally{z.f()}}else null!=$.nodeType&&(U=[$]);if(null==U||!U.length)throw new Error("Invalid `".concat(H,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return U},_e.confirm=function($,H,P){return window.confirm($)?H():null!=P?P():void 0},_e.isValidFile=function($,H){if(!H)return!0;H=H.split(",");var T,P=$.type,U=P.replace(/\/.*$/,""),_=et(H,!0);try{for(_.s();!(T=_.n()).done;){var z=T.value;if("."===(z=z.trim()).charAt(0)){if(-1!==$.name.toLowerCase().indexOf(z.toLowerCase(),$.name.length-z.length))return!0}else if(/\/\*$/.test(z)){if(U===z.replace(/\/.*$/,""))return!0}else if(P===z)return!0}}catch(Z){_.e(Z)}finally{_.f()}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function($){return this.each(function(){return new _e(this,$)})}),_e.ADDED="added",_e.QUEUED="queued",_e.ACCEPTED=_e.QUEUED,_e.UPLOADING="uploading",_e.PROCESSING=_e.UPLOADING,_e.CANCELED="canceled",_e.ERROR="error",_e.SUCCESS="success";var yt=function(H,P,U,_,T,z,Z,he,me,Y){var ne=function(H){var U=H.naturalHeight,_=document.createElement("canvas");_.width=1,_.height=U;var T=_.getContext("2d");T.drawImage(H,0,0);for(var Z=T.getImageData(1,0,1,U).data,he=0,me=U,Y=U;Y>he;)0===Z[4*(Y-1)+3]?me=Y:he=Y,Y=me+he>>1;var we=Y/U;return 0===we?1:we}(P);return H.drawImage(P,U,_,T,z,Z,he,me,Y/ne)},Lt=function(){function $(){j(this,$)}return de($,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(P){for(var U="",_=void 0,T=void 0,z="",Z=void 0,he=void 0,me=void 0,Y="",ne=0;Z=(_=P[ne++])>>2,he=(3&_)<<4|(T=P[ne++])>>4,me=(15&T)<<2|(z=P[ne++])>>6,Y=63&z,isNaN(T)?me=Y=64:isNaN(z)&&(Y=64),U=U+this.KEY_STR.charAt(Z)+this.KEY_STR.charAt(he)+this.KEY_STR.charAt(me)+this.KEY_STR.charAt(Y),_=T=z="",Z=he=me=Y="",ne<P.length;);return U}},{key:"restore",value:function(P,U){if(!P.match("data:image/jpeg;base64,"))return U;var _=this.decode64(P.replace("data:image/jpeg;base64,","")),T=this.slice2Segments(_),z=this.exifManipulation(U,T);return"data:image/jpeg;base64,".concat(this.encode64(z))}},{key:"exifManipulation",value:function(P,U){var _=this.getExifArray(U),T=this.insertExif(P,_);return new Uint8Array(T)}},{key:"getExifArray",value:function(P){for(var U=void 0,_=0;_<P.length;){if(255===(U=P[_])[0]&225===U[1])return U;_++}return[]}},{key:"insertExif",value:function(P,U){var _=P.replace("data:image/jpeg;base64,",""),T=this.decode64(_),z=T.indexOf(255,3),Z=T.slice(0,z),he=T.slice(z),me=Z;return(me=me.concat(U)).concat(he)}},{key:"slice2Segments",value:function(P){for(var U=0,_=[];!(255===P[U]&218===P[U+1]);){if(255===P[U]&216===P[U+1])U+=2;else{var z=U+(256*P[U+2]+P[U+3])+2,Z=P.slice(U,z);_.push(Z),U=z}if(U>P.length)break}return _}},{key:"decode64",value:function(P){var T=void 0,z="",Z=void 0,he=void 0,me=void 0,Y="",ne=0,we=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(P)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),P=P.replace(/[^A-Za-z0-9\+\/\=]/g,"");Z=this.KEY_STR.indexOf(P.charAt(ne++)),T=(15&(he=this.KEY_STR.indexOf(P.charAt(ne++))))<<4|(me=this.KEY_STR.indexOf(P.charAt(ne++)))>>2,z=(3&me)<<6|(Y=this.KEY_STR.indexOf(P.charAt(ne++))),we.push(Z<<2|he>>4),64!==me&&we.push(T),64!==Y&&we.push(z),T=z="",Z=he=me=Y="",ne<P.length;);return we}}]),$}();Lt.initClass();_e._autoDiscoverFunction=function(){if(_e.autoDiscover)return _e.discover()},function(H,P){var U=!1,_=!0,T=H.document,z=T.documentElement,Z=T.addEventListener?"addEventListener":"attachEvent",he=T.addEventListener?"removeEventListener":"detachEvent",me=T.addEventListener?"":"on",Y=function we(Ke){if(("readystatechange"!==Ke.type||"complete"===T.readyState)&&(("load"===Ke.type?H:T)[he](me+Ke.type,we,!1),!U&&(U=!0)))return P.call(H,Ke.type||Ke)};if("complete"!==T.readyState){if(T.createEventObject&&z.doScroll){try{_=!H.frameElement}catch{}_&&function we(){try{z.doScroll("left")}catch{return void setTimeout(we,50)}return Y("poll")}()}T[Z](me+"DOMContentLoaded",Y,!1),T[Z](me+"readystatechange",Y,!1),H[Z](me+"load",Y,!1)}}(window,_e._autoDiscoverFunction),window.Dropzone=_e;var Zt=_e}(),le}()},87149(ht,Xe,g){"use strict";g.d(Xe,{E:()=>r,J:()=>l});var q=g(49074),le=g(75797),v=g(56884),f=g(3347);let l=(()=>{class h{constructor(d){this.snackBar=d,this.logs$=new le.t([]),this.logLimit=50,this.lastSnackBarTime=0,this.snackBarDebounce=1e4}ngOnDestroy(){this.logs$.complete()}addLog(d,m,b){const F=[{error:b,label:m,severity:d,time:Date.now()},...this.logs$.value.slice(0,this.logLimit-2)];this.logs$.next(F)}showMessage(d,m,b){const w=Date.now();!b&&w-this.lastSnackBarTime<=this.snackBarDebounce||(null!=m&&m>0?this.snackBar.open(d,null,{duration:m}):this.snackBar.open(d),this.lastSnackBarTime=w)}getLogs$(){return this.logs$.asObservable()}getLogsSignal(){return(0,q.ot)(this.logs$)}static{this.\u0275fac=function(m){return new(m||h)(v.KVO(f.UG))}}static{this.\u0275prov=v.jDH({token:h,factory:h.\u0275fac})}}return h})();const r={Error:"error",Log:"log",Warn:"warn"}},90927(ht,Xe,g){"use strict";g.d(Xe,{b:()=>ee});var q=g(70271),le=g(50052),v=g(34435),f=g(48021),l=g(98503),r=g(63966),h=g(89964),u=g(47314),d=g(58021),m=g(45129),b=g(89274);class w{constructor(){this.log=(0,v.Tq)({FieldWriter:w})}#e(D,I,W){const R={};if(0===Object.keys(D).length){const L={...W};return R[I]=L,R}for(const L of Object.keys(D))if(L===I){const y={...W};R[L]=y}else{const y={...D[L]};R[L]=y}if(null==D[I]){const L={...W};R[I]=L}return R}updateAttributesValues(D,I,W){const R=this.log.fn("updateAttributesValues",{allFields:D,updateValues:I,language:W}),L={};return Object.keys(D).forEach(y=>{const C=I[y];if(void 0!==C)if(new u.U(D[y],W).isEditableOrReadonlyTranslationExist()){const K={...D[y],Values:D[y].Values.map(ve=>new b.Y(ve.dimensions,W).hasCurrent?{...ve,value:C}:ve)};L[y]=K}else{R.a("saveAttributeValues add values ",{newItemValue:C});const K=m.U.create(C,[d.v.create(W.current)]);L[y]={...D[y],Values:[...D[y].Values,K]}}else L[y]={...D[y]}}),L}updateAttributeValue(D,I,W,R,L){let y={},C=R.current;L&&(C=`~${R.current}`);const A={...D[I],Values:D[I].Values.map(X=>new b.Y(X.dimensions,R).hasCurrent?{...X,value:W,dimensions:X.dimensions.map(be=>be.dimCode===R.current||be.dimCode===`~${R.current}`||R.current===R.primary&&"*"===be.dimCode?{dimCode:C}:be)}:X)};return y=this.#e(D,I,A),y}addAttributeValue(D,I,W,R){let L={};const y=0!==Object.keys(D).length&&D[W]?{...D[W],Values:[...D[W].Values,I],Type:R}:{...D[W],Values:[I],Type:R};return L=this.#e(D,W,y),L}addAttributeDimension(D,I,W,R,L,y){let C={},A=W;y&&(A=`~${W}`);const X={...D[I],Values:D[I].Values.map(K=>K.dimensions.find(be=>be.dimCode===R||R===L&&"*"===be.dimCode)?{...K,dimensions:K.dimensions.concat({dimCode:A})}:K)};return C=this.#e(D,I,X),C}removeAttributeDimension(D,I,W){const R=D,L=[W,`~${W}`],y=R[I].Values.find(X=>X.dimensions.some(ve=>L.includes(ve.dimCode)));if(!y)return{...R};let C;return y.dimensions.length>1?C={...R[I],Values:R[I].Values.map(X=>X.dimensions.some(ve=>L.includes(ve.dimCode))?{...X,dimensions:X.dimensions.filter(ve=>!L.includes(ve.dimCode))}:X)}:1===y.dimensions.length&&(C={...R[I],Values:R[I].Values.filter(X=>!X.dimensions.some(ve=>L.includes(ve.dimCode)))}),this.#e(R,I,C)}}var S=g(13050),F=g(6953);const E={all:!0,updateItemId:!1,updateItemHeader:!1,addItemAttributeValue:!1,updateItemAttributeValue:!1,setDefaultValue:!1,updateItemAttributesValues:!1,addItemAttributeDimension:!1,removeItemAttributeDimension:!1,updateItemMetadata:!1};class B{constructor(D){this.itemSvc=D,this.log=(0,v.Tq)({ItemUpdateHelper:B},E)}updateItemId(D){this.log.fnIf("updateItemId",{saveResult:D});const W=Object.keys(D)[0],R=D[W],L=this.itemSvc.get(W);if(!L||0!==L.Header.EntityId&&0!==L.Entity.Id)return;const y={...L,Header:{...L.Header,EntityId:R},Entity:{...L.Entity,Id:R}};this.itemSvc.add(y)}updateItemHeader(D,I){const W=this.log.fnIf("updateItemHeader",{entityGuid:D,header:I}),R=this.itemSvc.get(D);if(!R)return;const L={...R,Header:{...I}};this.itemSvc.add(L),W.end()}addItemAttributeValue(D,I,W,R,L,y,C=!1,A){this.log.fnIf("addItemAttributeValue",{entityGuid:D,attributeKey:I,newValue:W,currentLanguage:R,isReadOnly:L,attributeType:y,isTransaction:C,transactionItem:A});const ve=m.U.create(W,[d.v.create(L?`~${R}`:R)]),be=A??this.itemSvc.get(D),Oe={...be,Entity:{...be.Entity,Attributes:(new w).addAttributeValue(be.Entity.Attributes,ve,I,y)}};return C||this.itemSvc.add(Oe),Oe}updateItemAttributeValue(D,I,W,R,L){this.log.fnIf("updateItemAttributeValue",{entityGuid:D,attributeKey:I,newValue:W,language:R,isReadOnly:L});const C=this.itemSvc.get(D);if(!C)return;const A={...C,Entity:{...C.Entity,Attributes:(new w).updateAttributeValue(C.Entity.Attributes,I,W,R,L)}};this.itemSvc.add(A)}setDefaultValue(D,I,W,R,L,y){const C=this.log.fnIf("setDefaultValue",{item:D,ctAttribute:I,inputType:W,settings:R,languages:L,defaultLanguage:y},`Name: ${I.Name}`),A=new S.X3(I.Name,W?.Type,R,D.Header).getDefaultOrPrefillValue(),X=new u.U(D.Entity.Attributes[I.Name],y).currentOrDefault?.value,K=0===L.length||W?.DisableI18n?"*":y;return void 0===X?this.addItemAttributeValue(D.Entity.Guid,I.Name,A,K,!1,I.Type):this.updateItemAttributeValue(D.Entity.Guid,I.Name,A,{current:K,primary:y},!1),C.r(A)}updateItemAttributesValues(D,I,W){const R=this.log.fnIf("updateItemAttributesValues",{entityGuid:D,newValues:I,language:W}),L=this.itemSvc.get(D);if(!L)return R.end("Item not found");const y=new S.bT(W),C={},A=Object.entries(L.Entity.Attributes).filter(([be])=>I.hasOwnProperty(be));for(const[be,Oe]of A)C[be]=y.getBestValue(Oe);const X=F.$.getItemValuesChanges(C,I);if(null==X)return R.end("No changes");const K=(new w).updateAttributesValues(L.Entity.Attributes,X,W),ve={...L,Entity:{...L.Entity,Attributes:K}};this.itemSvc.add(ve)}addItemAttributeDimension(D,I,W,R,L,y,C){this.log.fnIf("addItemAttributeDimension",{entityGuid:D,attributeKey:I,currentLanguage:W,shareWithLanguage:R,defaultLanguage:L,isReadOnly:y,transactionItem:C});const X=C??this.itemSvc.get(D),K={...X,Entity:{...X.Entity,Attributes:(new w).addAttributeDimension(X.Entity.Attributes,I,W,R,L,y)}};this.itemSvc.add(K)}removeItemAttributeDimension(D,I,W,R=!1,L){const y=this.log.fnIf("removeItemAttributeDimension",{entityGuid:D,attributeKey:I,currentLanguage:W,isTransaction:R,transactionItem:L}),C=L??this.itemSvc.get(D),A={...C,Entity:{...C.Entity,Attributes:(new w).removeAttributeDimension(C.Entity.Attributes,I,W)}};return R||this.itemSvc.add(A),y.r(A)}updateItemMetadata(D,I){const W=this.log.fnIf("updateItemMetadata",{entityGuid:D,metadata:I}),R=this.itemSvc.get(D),L={...R,Entity:{...R.Entity,Metadata:I}};this.itemSvc.add(L),W.end("ok",{newItem:L})}}var N=g(56884);let ee=(()=>{class M extends h.k{constructor(){super((0,v.Tq)({ItemService:M})),this.getId=I=>I.Entity.Guid,this.updater=new B(this),this.#e=new l.K("itemAttributes"),this.#t=new l.K("itemHeader"),this.#n=new l.K("slotIsEmpty")}loadItems(I){const W=I.map(R=>r.U.anyToEav(R));this.addMany(W)}itemAttributesSignal(I){const W=this.log.fn("itemAttributes",{entityGuid:I}),R=this.#e.getOrCreate(I,()=>this.getSignal(I)()?.Entity.Attributes);return W.r(R)}#e;getItemAttributes(I){const W=this.log.fn("getItemAttributes",{entityGuid:I}),R=this.get(I)?.Entity.Attributes;return W.r(R)}getItemAttributes$(I){return this.list$.pipe((0,q.T)(W=>W.find(R=>R.Entity.Guid===I)?.Entity.Attributes),(0,f.J)(W=>W))}getItemHeader(I){return this.get(I)?.Header}getItemHeader$(I){return this.list$.pipe((0,q.T)(W=>W.find(R=>R.Entity.Guid===I)?.Header),(0,f.A)(W=>W))}getItemHeaderSignal(I){return this.#t.getOrCreate(I,()=>this.getSignal(I)()?.Header)}#t;slotIsEmpty(I){return this.#n.getOrCreate(I,()=>{const W=this.getSignal(I)()?.Header;return null==W||W.IsEmptyAllowed&&W.IsEmpty})}#n;getItemFor(I){return this.get(I)?.Entity.For}getItemNote(I){return this.get(I)?.Entity.Metadata?.find(W=>W.Type.Name===le.YX.contentTypes.notes)}static{this.\u0275fac=function(W){return new(W||M)}}static{this.\u0275prov=N.jDH({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})()},92853(ht,Xe){var g,le;g=function v(){var l,f=typeof self<"u"?self:typeof window<"u"?window:void 0!==f?f:{},r=!f.document&&!!f.postMessage,h=f.IS_PAPA_WORKER||!1,u={},d=0,m={};function b(y){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(C){var A=W(C);A.chunkSize=parseInt(A.chunkSize),C.step||C.chunk||(A.chunkSize=null),this._handle=new B(A),(this._handle.streamer=this)._config=A}.call(this,y),this.parseChunk=function(C,A){var X=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<X){let ve=this._config.newline;ve||(ve=this._handle.guessLineEndings(C,K=this._config.quoteChar||'"')),C=[...C.split(ve).slice(X)].join(ve)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&void 0!==(K=this._config.beforeFirstChunk(C))&&(C=K),this.isFirstChunk=!1,this._halted=!1,X=this._partialLine+C;var K=(this._partialLine="",this._handle.parse(X,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=K.meta.cursor,this._finished||(this._partialLine=X.substring(C-this._baseIndex),this._baseIndex=C),K&&K.data&&(this._rowCount+=K.data.length),X=this._finished||this._config.preview&&this._rowCount>=this._config.preview,h)f.postMessage({results:K,workerId:m.WORKER_ID,finished:X});else if(L(this._config.chunk)&&!A){if(this._config.chunk(K,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=K=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(K.data),this._completeResults.errors=this._completeResults.errors.concat(K.errors),this._completeResults.meta=K.meta),this._completed||!X||!L(this._config.complete)||K&&K.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),X||K&&K.meta.paused||this._nextChunk(),K}this._halted=!0},this._sendError=function(C){L(this._config.error)?this._config.error(C):h&&this._config.error&&f.postMessage({workerId:m.WORKER_ID,error:C,finished:!1})}}function w(y){var C;(y=y||{}).chunkSize||(y.chunkSize=m.RemoteChunkSize),b.call(this,y),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(A){this._input=A,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),r||(C.onload=R(this._chunkLoaded,this),C.onerror=R(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var A,X=this._config.downloadRequestHeaders;for(A in X)C.setRequestHeader(A,X[A])}this._config.chunkSize&&C.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{C.send(this._config.downloadRequestBody)}catch(ve){this._chunkError(ve.message)}r&&0===C.status&&this._chunkError()}},this._chunkLoaded=function(){var A;4===C.readyState&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null!==(A=(A=C).getResponseHeader("Content-Range"))?parseInt(A.substring(A.lastIndexOf("/")+1)):-1),this.parseChunk(C.responseText)))},this._chunkError=function(A){A=C.statusText||A,this._sendError(new Error(A))}}function S(y){(y=y||{}).chunkSize||(y.chunkSize=m.LocalChunkSize),b.call(this,y);var C,A,X=typeof FileReader<"u";this.stream=function(K){this._input=K,A=K.slice||K.webkitSlice||K.mozSlice,X?((C=new FileReader).onload=R(this._chunkLoaded,this),C.onerror=R(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var K=this._input,ve=(this._config.chunkSize&&(ve=Math.min(this._start+this._config.chunkSize,this._input.size),K=A.call(K,this._start,ve)),C.readAsText(K,this._config.encoding));X||this._chunkLoaded({target:{result:ve}})},this._chunkLoaded=function(K){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(K.target.result)},this._chunkError=function(){this._sendError(C.error)}}function F(y){var C;b.call(this,y=y||{}),this.stream=function(A){return C=A,this._nextChunk()},this._nextChunk=function(){var A,X;if(!this._finished)return C=(A=this._config.chunkSize)?(X=C.substring(0,A),C.substring(A)):(X=C,""),this._finished=!C,this.parseChunk(X)}}function E(y){b.call(this,y=y||{});var C=[],A=!0,X=!1;this.pause=function(){b.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){b.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(K){this._input=K,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){X&&1===C.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):A=!0},this._streamData=R(function(K){try{C.push("string"==typeof K?K:K.toString(this._config.encoding)),A&&(A=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(ve){this._streamError(ve)}},this),this._streamError=R(function(K){this._streamCleanUp(),this._sendError(K)},this),this._streamEnd=R(function(){this._streamCleanUp(),X=!0,this._streamData("")},this),this._streamCleanUp=R(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function B(y){var C,A,X,K,ve=Math.pow(2,53),be=-ve,Oe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,He=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,je=this,qe=0,Le=0,ye=!1,Ae=!1,J=[],V={data:[],errors:[],meta:{}};function oe(ce){return"greedy"===y.skipEmptyLines?""===ce.join("").trim():1===ce.length&&0===ce[0].length}function ge(){if(V&&X&&(Re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),X=!1),y.skipEmptyLines&&(V.data=V.data.filter(function(Te){return!oe(Te)})),xe()){let Te=function(ze,ue){L(y.transformHeader)&&(ze=y.transformHeader(ze,ue)),J.push(ze)};if(V)if(Array.isArray(V.data[0])){for(var ce=0;xe()&&ce<V.data.length;ce++)V.data[ce].forEach(Te);V.data.splice(0,1)}else V.data.forEach(Te)}function We(Te,ze){for(var ue=y.header?{}:[],Se=0;Se<Te.length;Se++){var Fe=Se,Ee=Te[Se];Ee=((re,Me)=>{return Ge=re,y.dynamicTypingFunction&&void 0===y.dynamicTyping[Ge]&&(y.dynamicTyping[Ge]=y.dynamicTypingFunction(Ge)),!0===(y.dynamicTyping[Ge]||y.dynamicTyping)?"true"===Me||"TRUE"===Me||"false"!==Me&&"FALSE"!==Me&&((Ge=>{if(Oe.test(Ge)&&(Ge=parseFloat(Ge),be<Ge&&Ge<ve))return 1})(Me)?parseFloat(Me):He.test(Me)?new Date(Me):""===Me?null:Me):Me;var Ge})(Fe=y.header?Se>=J.length?"__parsed_extra":J[Se]:Fe,Ee=y.transform?y.transform(Ee,Fe):Ee),"__parsed_extra"===Fe?(ue[Fe]=ue[Fe]||[],ue[Fe].push(Ee)):ue[Fe]=Ee}return y.header&&(Se>J.length?Re("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+Se,Le+ze):Se<J.length&&Re("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+Se,Le+ze)),ue}var Ve;V&&(y.header||y.dynamicTyping||y.transform)&&(Ve=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(We),Ve=V.data.length):V.data=We(V.data,0),y.header&&V.meta&&(V.meta.fields=J),Le+=Ve)}function xe(){return y.header&&0===J.length}function Re(ce,We,Ve,Ie){ce={type:ce,code:We,message:Ve},void 0!==Ie&&(ce.row=Ie),V.errors.push(ce)}L(y.step)&&(K=y.step,y.step=function(ce){V=ce,xe()?ge():(ge(),0!==V.data.length&&(qe+=ce.data.length,y.preview&&qe>y.preview?A.abort():(V.data=V.data[0],K(V,je))))}),this.parse=function(ce,We,Ve){var Ie=y.quoteChar||'"';return y.newline||(y.newline=this.guessLineEndings(ce,Ie)),X=!1,y.delimiter?L(y.delimiter)&&(y.delimiter=y.delimiter(ce),V.meta.delimiter=y.delimiter):((Ie=((Te,ze,ue,Se,Fe)=>{var Ee,re,Me,Ge;Fe=Fe||[",","\t","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var ot=0;ot<Fe.length;ot++){for(var lt,Tt=Fe[ot],Ue=0,Ne=0,et=0,_t=(Me=void 0,new ee({comments:Se,delimiter:Tt,newline:ze,preview:10}).parse(Te)),tt=0;tt<_t.data.length;tt++)ue&&oe(_t.data[tt])?et++:(Ne+=lt=_t.data[tt].length,void 0===Me?Me=lt:0<lt&&(Ue+=Math.abs(lt-Me),Me=lt));0<_t.data.length&&(Ne/=_t.data.length-et),(void 0===re||Ue<=re)&&(void 0===Ge||Ge<Ne)&&1.99<Ne&&(re=Ue,Ee=Tt,Ge=Ne)}return{successful:!!(y.delimiter=Ee),bestDelimiter:Ee}})(ce,y.newline,y.skipEmptyLines,y.comments,y.delimitersToGuess)).successful?y.delimiter=Ie.bestDelimiter:(X=!0,y.delimiter=m.DefaultDelimiter),V.meta.delimiter=y.delimiter),Ie=W(y),y.preview&&y.header&&Ie.preview++,C=ce,A=new ee(Ie),V=A.parse(C,We,Ve),ge(),ye?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return ye},this.pause=function(){ye=!0,A.abort(),C=L(y.chunk)?"":C.substring(A.getCharIndex())},this.resume=function(){je.streamer._halted?(ye=!1,je.streamer.parseChunk(C,!0)):setTimeout(je.resume,3)},this.aborted=function(){return Ae},this.abort=function(){Ae=!0,A.abort(),V.meta.aborted=!0,L(y.complete)&&y.complete(V),C=""},this.guessLineEndings=function(Te,Ie){Te=Te.substring(0,1048576),Ie=new RegExp(N(Ie)+"([^]*?)"+N(Ie),"gm");var Ve=(Te=Te.replace(Ie,"")).split("\r");if(Te=1<(Ie=Te.split("\n")).length&&Ie[0].length<Ve[0].length,1===Ve.length||Te)return"\n";for(var ze=0,ue=0;ue<Ve.length;ue++)"\n"===Ve[ue][0]&&ze++;return ze>=Ve.length/2?"\r\n":"\r"}}function N(y){return y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(y){var C=(y=y||{}).delimiter,A=y.newline,X=y.comments,K=y.step,ve=y.preview,be=y.fastMode,Oe=null,He=!1,je=null==y.quoteChar?'"':y.quoteChar,qe=je;if(void 0!==y.escapeChar&&(qe=y.escapeChar),("string"!=typeof C||-1<m.BAD_DELIMITERS.indexOf(C))&&(C=","),X===C)throw new Error("Comment character same as delimiter");!0===X?X="#":("string"!=typeof X||-1<m.BAD_DELIMITERS.indexOf(X))&&(X=!1),"\n"!==A&&"\r"!==A&&"\r\n"!==A&&(A="\n");var Le=0,ye=!1;this.parse=function(Ae,J,V){if("string"!=typeof Ae)throw new Error("Input must be a string");var oe=Ae.length,ge=C.length,xe=A.length,Re=X.length,ce=L(K),We=[],Ve=[],Ie=[],Te=Le=0;if(!Ae)return Ue();if(be||!1!==be&&-1===Ae.indexOf(je)){for(var ze=Ae.split(A),ue=0;ue<ze.length;ue++){if(Le+=(Ie=ze[ue]).length,ue!==ze.length-1)Le+=A.length;else if(V)return Ue();if(!X||Ie.substring(0,Re)!==X){if(ce){if(We=[],Ge(Ie.split(C)),Ne(),ye)return Ue()}else Ge(Ie.split(C));if(ve&&ve<=ue)return We=We.slice(0,ve),Ue(!0)}}return Ue()}for(var Se=Ae.indexOf(C,Le),Fe=Ae.indexOf(A,Le),Ee=new RegExp(N(qe)+N(je),"g"),re=Ae.indexOf(je,Le);;)if(Ae[Le]===je)for(re=Le,Le++;;){if(-1===(re=Ae.indexOf(je,re+1)))return V||Ve.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:We.length,index:Le}),lt();if(re===oe-1)return lt(Ae.substring(Le,re).replace(Ee,je));if(je===qe&&Ae[re+1]===qe)re++;else if(je===qe||0===re||Ae[re-1]!==qe){-1!==Se&&Se<re+1&&(Se=Ae.indexOf(C,re+1));var Me=ot(-1===(Fe=-1!==Fe&&Fe<re+1?Ae.indexOf(A,re+1):Fe)?Se:Math.min(Se,Fe));if(Ae.substr(re+1+Me,ge)===C){Ie.push(Ae.substring(Le,re).replace(Ee,je)),Ae[Le=re+1+Me+ge]!==je&&(re=Ae.indexOf(je,Le)),Se=Ae.indexOf(C,Le),Fe=Ae.indexOf(A,Le);break}if(Me=ot(Fe),Ae.substring(re+1+Me,re+1+Me+xe)===A){if(Ie.push(Ae.substring(Le,re).replace(Ee,je)),Tt(re+1+Me+xe),Se=Ae.indexOf(C,Le),re=Ae.indexOf(je,Le),ce&&(Ne(),ye))return Ue();if(ve&&We.length>=ve)return Ue(!0);break}Ve.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:We.length,index:Le}),re++}}else if(X&&0===Ie.length&&Ae.substring(Le,Le+Re)===X){if(-1===Fe)return Ue();Fe=Ae.indexOf(A,Le=Fe+xe),Se=Ae.indexOf(C,Le)}else if(-1!==Se&&(Se<Fe||-1===Fe))Ie.push(Ae.substring(Le,Se)),Se=Ae.indexOf(C,Le=Se+ge);else{if(-1===Fe)break;if(Ie.push(Ae.substring(Le,Fe)),Tt(Fe+xe),ce&&(Ne(),ye))return Ue();if(ve&&We.length>=ve)return Ue(!0)}return lt();function Ge(et){We.push(et),Te=Le}function ot(et){return-1!==et&&(et=Ae.substring(re+1,et))&&""===et.trim()?et.length:0}function lt(et){return V||(void 0===et&&(et=Ae.substring(Le)),Ie.push(et),Le=oe,Ge(Ie),ce&&Ne()),Ue()}function Tt(et){Le=et,Ge(Ie),Ie=[],Fe=Ae.indexOf(A,Le)}function Ue(et){if(y.header&&!J&&We.length&&!He){var _t=We[0],tt=Object.create(null),j=new Set(_t);let te=!1;for(let de=0;de<_t.length;de++){let fe=_t[de];if(tt[fe=L(y.transformHeader)?y.transformHeader(fe,de):fe]){let Be,ut=tt[fe];for(;Be=fe+"_"+ut,ut++,j.has(Be););j.add(Be),_t[de]=Be,tt[fe]++,te=!0,(Oe=null===Oe?{}:Oe)[Be]=fe}else tt[fe]=1,_t[de]=fe;j.add(fe)}te&&console.warn("Duplicate headers found and renamed."),He=!0}return{data:We,errors:Ve,meta:{delimiter:C,linebreak:A,aborted:ye,truncated:!!et,cursor:Te+(J||0),renamedHeaders:Oe}}}function Ne(){K(Ue()),We=[],Ve=[]}},this.abort=function(){ye=!0},this.getCharIndex=function(){return Le}}function M(y){var C=y.data,A=u[C.workerId],X=!1;if(C.error)A.userError(C.error,C.file);else if(C.results&&C.results.data){var K={abort:function(){X=!0,D(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(L(A.userStep)){for(var ve=0;ve<C.results.data.length&&(A.userStep({data:C.results.data[ve],errors:C.results.errors,meta:C.results.meta},K),!X);ve++);delete C.results}else L(A.userChunk)&&(A.userChunk(C.results,K,C.file),delete C.results)}C.finished&&!X&&D(C.workerId,C.results)}function D(y,C){var A=u[y];L(A.userComplete)&&A.userComplete(C),A.terminate(),delete u[y]}function I(){throw new Error("Not implemented.")}function W(y){if("object"!=typeof y||null===y)return y;var C,A=Array.isArray(y)?[]:{};for(C in y)A[C]=W(y[C]);return A}function R(y,C){return function(){y.apply(C,arguments)}}function L(y){return"function"==typeof y}return m.parse=function(y,C){var X,A=(C=C||{}).dynamicTyping||!1;if(L(A)&&(C.dynamicTypingFunction=A,A={}),C.dynamicTyping=A,C.transform=!!L(C.transform)&&C.transform,!C.worker||!m.WORKERS_SUPPORTED)return A=null,"string"==typeof y?(y=65279!==(X=y).charCodeAt(0)?X:X.slice(1),A=new(C.download?w:F)(C)):!0===y.readable&&L(y.read)&&L(y.on)?A=new E(C):(f.File&&y instanceof File||y instanceof Object)&&(A=new S(C)),A.stream(y);(A=(()=>{var X,K,ve;return!!m.WORKERS_SUPPORTED&&(K=f.URL||f.webkitURL||null,ve=v.toString(),X=m.BLOB_URL||(m.BLOB_URL=K.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ve,")();"],{type:"text/javascript"}))),(X=new f.Worker(X)).onmessage=M,X.id=d++,u[X.id]=X)})()).userStep=C.step,A.userChunk=C.chunk,A.userComplete=C.complete,A.userError=C.error,C.step=L(C.step),C.chunk=L(C.chunk),C.complete=L(C.complete),C.error=L(C.error),delete C.worker,A.postMessage({input:y,config:C,workerId:A.id})},m.unparse=function(y,C){var A=!1,X=!0,K=",",ve="\r\n",be='"',Oe=be+be,He=!1,je=null,qe=!1,Le=((()=>{if("object"==typeof C){if("string"!=typeof C.delimiter||m.BAD_DELIMITERS.filter(function(J){return-1!==C.delimiter.indexOf(J)}).length||(K=C.delimiter),"boolean"!=typeof C.quotes&&"function"!=typeof C.quotes&&!Array.isArray(C.quotes)||(A=C.quotes),"boolean"!=typeof C.skipEmptyLines&&"string"!=typeof C.skipEmptyLines||(He=C.skipEmptyLines),"string"==typeof C.newline&&(ve=C.newline),"string"==typeof C.quoteChar&&(be=C.quoteChar),"boolean"==typeof C.header&&(X=C.header),Array.isArray(C.columns)){if(0===C.columns.length)throw new Error("Option columns is empty");je=C.columns}void 0!==C.escapeChar&&(Oe=C.escapeChar+be),C.escapeFormulae instanceof RegExp?qe=C.escapeFormulae:"boolean"==typeof C.escapeFormulae&&C.escapeFormulae&&(qe=/^[=+\-@\t\r].*$/)}})(),new RegExp(N(be),"g"));if("string"==typeof y&&(y=JSON.parse(y)),Array.isArray(y)){if(!y.length||Array.isArray(y[0]))return ye(null,y,He);if("object"==typeof y[0])return ye(je||Object.keys(y[0]),y,He)}else if("object"==typeof y)return"string"==typeof y.data&&(y.data=JSON.parse(y.data)),Array.isArray(y.data)&&(y.fields||(y.fields=y.meta&&y.meta.fields||je),y.fields||(y.fields=Array.isArray(y.data[0])?y.fields:"object"==typeof y.data[0]?Object.keys(y.data[0]):[]),Array.isArray(y.data[0])||"object"==typeof y.data[0]||(y.data=[y.data])),ye(y.fields||[],y.data||[],He);throw new Error("Unable to serialize unrecognized input");function ye(J,V,oe){var ge="",xe=("string"==typeof J&&(J=JSON.parse(J)),"string"==typeof V&&(V=JSON.parse(V)),Array.isArray(J)&&0<J.length),Re=!Array.isArray(V[0]);if(xe&&X){for(var ce=0;ce<J.length;ce++)0<ce&&(ge+=K),ge+=Ae(J[ce],ce);0<V.length&&(ge+=ve)}for(var We=0;We<V.length;We++){var Ve=(xe?J:V[We]).length,Ie=!1,Te=xe?0===Object.keys(V[We]).length:0===V[We].length;if(oe&&!xe&&(Ie="greedy"===oe?""===V[We].join("").trim():1===V[We].length&&0===V[We][0].length),"greedy"===oe&&xe){for(var ze=[],ue=0;ue<Ve;ue++)ze.push(V[We][Re?J[ue]:ue]);Ie=""===ze.join("").trim()}if(!Ie){for(var Fe=0;Fe<Ve;Fe++)0<Fe&&!Te&&(ge+=K),ge+=Ae(V[We][xe&&Re?J[Fe]:Fe],Fe);We<V.length-1&&(!oe||0<Ve&&!Te)&&(ge+=ve)}}return ge}function Ae(J,V){var oe,ge;return null==J?"":J.constructor===Date?JSON.stringify(J).slice(1,25):(ge=!1,qe&&"string"==typeof J&&qe.test(J)&&(J="'"+J,ge=!0),oe=J.toString().replace(Le,Oe),(ge=ge||!0===A||"function"==typeof A&&A(J,V)||Array.isArray(A)&&A[V]||((xe,Re)=>{for(var ce=0;ce<Re.length;ce++)if(-1<xe.indexOf(Re[ce]))return!0;return!1})(oe,m.BAD_DELIMITERS)||-1<oe.indexOf(K)||" "===oe.charAt(0)||" "===oe.charAt(oe.length-1))?be+oe+be:oe)}},m.RECORD_SEP="\x1e",m.UNIT_SEP="\x1f",m.BYTE_ORDER_MARK="\ufeff",m.BAD_DELIMITERS=["\r","\n",'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!r&&!!f.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=ee,m.ParserHandle=B,m.NetworkStreamer=w,m.FileStreamer=S,m.StringStreamer=F,m.ReadableStreamStreamer=E,f.jQuery&&((l=f.jQuery).fn.parse=function(y){var C=y.config||{},A=[];return this.each(function(ve){if("INPUT"!==l(this).prop("tagName").toUpperCase()||"file"!==l(this).attr("type").toLowerCase()||!f.FileReader||!this.files||0===this.files.length)return!0;for(var be=0;be<this.files.length;be++)A.push({file:this.files[be],inputElem:this,instanceConfig:l.extend({},C)})}),X(),this;function X(){if(0===A.length)L(y.complete)&&y.complete();else{var be,Oe,He,je=A[0];if(L(y.before)){var qe=y.before(je.file,je.inputElem);if("object"==typeof qe){if("abort"===qe.action)return be=je.file,Oe=je.inputElem,He=qe.reason,void(L(y.error)&&y.error({name:"AbortError"},be,Oe,He));if("skip"===qe.action)return void K();"object"==typeof qe.config&&(je.instanceConfig=l.extend(je.instanceConfig,qe.config))}else if("skip"===qe)return void K()}var Le=je.instanceConfig.complete;je.instanceConfig.complete=function(ye){L(Le)&&Le(ye,je.file,je.inputElem),K()},m.parse(je.file,je.instanceConfig)}}function K(){A.splice(0,1),X()}}),h&&(f.onmessage=function(y){y=y.data,void 0===m.WORKER_ID&&y&&(m.WORKER_ID=y.workerId),"string"==typeof y.input?f.postMessage({workerId:m.WORKER_ID,results:m.parse(y.input,y.config),finished:!0}):(f.File&&y.input instanceof File||y.input instanceof Object)&&(y=m.parse(y.input,y.config))&&f.postMessage({workerId:m.WORKER_ID,results:y,finished:!0})}),(w.prototype=Object.create(b.prototype)).constructor=w,(S.prototype=Object.create(b.prototype)).constructor=S,(F.prototype=Object.create(F.prototype)).constructor=F,(E.prototype=Object.create(b.prototype)).constructor=E,m},void 0!==(le=g.apply(Xe,[]))&&(ht.exports=le)},93875(ht,Xe,g){"use strict";g.d(Xe,{s:()=>h});var q=g(93840),le=g(34601),v=g(92063),f=g(36124);const l=u=>({name:u});function r(u,d){if(1&u&&(f.j41(0,"mat-icon",0),f.EFF(1,"diamond"),f.k0s()),2&u){const m=f.XpG();f.Y8G("tippyData",f.eq3(1,l,m.featureNameId()))}}let h=(()=>{class u extends v.x{static{this.\u0275fac=(()=>{let m;return function(w){return(m||(m=f.xGo(u)))(w||u)}})()}static{this.\u0275cmp=f.VBU({type:u,selectors:[["app-feature-icon-indicator"]],features:[f.Vt3],decls:1,vars:1,consts:[["tippyTranslate","Features.NotActivated",3,"tippyData"]],template:function(b,w){1&b&&f.nVh(0,r,2,3,"mat-icon",0),2&b&&f.vxM(w.show()?0:-1)},dependencies:[q.m_,q.An,le.e],encapsulation:2})}}return u})()},94065(ht,Xe,g){"use strict";g.d(Xe,{K:()=>q});const q={key:"edit-dialog-footer",data:{tab:null,expanded:!1,size:0,pinned:null}}},97568(ht,Xe,g){"use strict";g.d(Xe,{L:()=>l});var q=g(34435),le=g(36740),v=g(98712);const f={all:!1,constructor:!0,update:!0,fields:[...le.z,"Icon"]};class l{get log(){return this.#e??=(0,q.Tq)({FieldSettingsHelperBase:l},f).extendName(`[${this.name}]`)}#e;constructor(h,u){this.canAutoTranslate=!1,this.#e=(0,q.Tq)(h??{FieldSettingsHelperBase:l},f,null,u),this.name??=this.#e.name,this.log.fnIf("constructor")}static add(h){const u=new h;v.a.singleton().add(u)}static importMe(){}isValueEmpty(h,u,d){const m=this.log.fn("isValueEmpty",{fieldType:h,value:u,isCreateMode:d});if(void 0===u)return m.r(!0,"value is undefined");if("entity"===h&&null===u)return m.r(!0,"entity field is null");const b=Array.isArray(u)&&0===u.length&&d;return m.r(b)}findAndMergeAdvanced(h,u,d){if(!u)return d;const m=h.eavConfig.settings.Entities.find(w=>w.Guid===u);if(!m)return d;const b=h.reader.flatten(m);return{...d,...b}}}},98712(ht,Xe,g){"use strict";g.d(Xe,{a:()=>r});var q=g(4202),le=g(34435),v=g(97568);class f extends v.L{constructor(){super({FieldSettingsHelperUnknown:f}),this.name=q.u.Unknown,this.canAutoTranslate=!1}update({settings:u}){return u}}const l={all:!1,get:!1,getExact:!1};class r{constructor(){this.log=(0,le.Tq)({FieldSettingsHelpersManager:r},l),this.#e={},this.add(new f)}static singleton(){return window.eavFieldSettingsHelpersManagerSingleton??=new r}#e;add(u){this.#e[u.name]=u}get(u){const d=this.log.fnIf("get",{inputTypeName:u}),m=this.getExact(u);return m?d.r(m,`found logic for ${u}`):d.r(this.getExact(q.u.Unknown),`using unknown logic for ${u}`)}getExact(u){const d=this.log.fnIf("getExact",{inputTypeName:u}),m=this.#e[u]??null;return d.r(m,`found logic: ${null!=m}`)}}}}]);
//# sourceMappingURL=https://sources.2sxc.org/21.03.00/dist/ng-edit/projects_eav-ui_src_app_edit_dialog_entry_edit-entry_ts-projects_eav-ui_src_app_shared_helper-2e9524.493a22b8301f40b6.js.map