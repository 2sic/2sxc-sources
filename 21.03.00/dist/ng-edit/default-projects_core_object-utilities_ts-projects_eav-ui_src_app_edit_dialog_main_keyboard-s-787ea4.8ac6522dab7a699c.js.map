{"version":3,"file":"default-projects_core_object-utilities_ts-projects_eav-ui_src_app_edit_dialog_main_keyboard-s-787ea4.8ac6522dab7a699c.js","mappings":"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","names":["ServiceBase","constructor","this","subscriptions","Subscription","ngOnDestroy","destroy","unsubscribe","factory","Éµfac","convert","obj","fn","getWith","ExtendedFabSpeedDialActionDirective","elementRef","_disabled","input","ngOnChanges","changes","disabled","nativeElement","toggleAttribute","i0","selectors","inputs","features","SaveCloseButtonBase","label","triggerOnFormSubmit","icon","ngClass","action","output","isDisabled","onClick","event","emit","outputs","ExtendedFabSpeedDialTriggerContentDirective","templateRef","ExtendedFabSpeedDialActionsContentDirective","isEscape","key","isCtrlS","ctrlKey","metaKey","isCtrlEnter","logSpecs","doOnDialogClosed","doOnDialogClosedWithData","DialogRoutingService","router","route","super","log","classLog","snapshot","url","urlSegments","split","getParam","paramMap","get","getParams","keys","reduce","acc","getQueryParam","queryParamMap","getQueryParams","state","currentNavigation","extras","callback","l","fnIf","add","childDialogClosed$","subscribe","data","a","end","#childDialogClosedWithData","urlSubRoute","params","tree","createUrlTree","relativeTo","serializeUrl","navPath","navigate","navRelative","commands","events","pipe","filter","NavigationEnd","startWith","firstChild","map","pairwise","hadChildBefore","hasChildNow","tap","snapShot","prev","curr","i1","ExtendedFabSpeedDialTriggerDirective","ExtendedFabSpeedDialComponent","BaseComponent","open$","BehaviorSubject","ngAfterContentInit","combineLatest","distinctUntilChanged","actionButtons","undefined","open","forEach","btn","i","all","max","Math","min","length","step","transitionDuration","style","complete","setOpen","pointerType","next","contentQueries","rf","ctx","dirIndex","ElementRef","$event","trigger","actions","NgTemplateOutlet","styles","encapsulation"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/services/service-base.ts","./projects/core/object-utilities.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial-action.directive.ts","./projects/eav-ui/src/app/shared/modules/save-close-button/save-close-button-base.directive.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial-trigger-content.directive.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial-actions-content.directive.ts","./projects/eav-ui/src/app/edit/dialog/main/keyboard-shortcuts.ts","./projects/eav-ui/src/app/shared/routing/dialog-routing.service.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial-trigger.directive.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial.html"],"sourcesContent":["import { Injectable, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * Base class for services - just to standardize use of subscriptions.\r\n * Has @Injectable() just to allow it ot use the standard OnDestroy interface.\r\n */\r\n@Injectable()\r\nexport abstract class ServiceBase implements OnDestroy {\r\n\r\n  protected subscriptions = new Subscription();\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy();\r\n  }\r\n\r\n  // TODO: TRY TO GET RID OF THIS. AFAIK it's just used in the mask, which should switch over to signals.\r\n  destroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","\r\n/**\r\n * Conversion function to change something to something else, a bit like 'map' but for a single item.\r\n * \r\n * Typically used in short return statements.\r\n * \r\n * Internally it's the same as the `getWith` function, but has a different name to indicate the usage.\r\n */\r\nexport function convert<T extends unknown, R extends unknown>(obj: T, fn: (value: T) => R): R {\r\n  return fn(obj);\r\n}\r\n\r\n/**\r\n * Function to do something with an object and return the result.\r\n * \r\n * Typically used in short return statements.\r\n * \r\n * Internally it's the same as the `convert` function, but has a different name to indicate the usage.\r\n */\r\nexport function getWith<T extends unknown, R extends unknown>(obj: T, fn: (value: T) => R): R {\r\n  return fn(obj);\r\n}\r\n\r\n","import { Directive, ElementRef, input, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\n// tslint:disable-next-line:directive-selector\r\n@Directive({\r\n  selector: '[extended-fab-speed-dial-action]',\r\n})\r\nexport class ExtendedFabSpeedDialActionDirective implements OnChanges {\r\n  _disabled = input<boolean>(false);\r\n\r\n  constructor(private elementRef: ElementRef<HTMLElement>) { }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.disabled != null) {\r\n      this.elementRef.nativeElement.toggleAttribute('disabled', this._disabled());\r\n    }\r\n  }\r\n}\r\n","import { Directive, input, output } from '@angular/core';\r\n\r\n// 2pp: needs to be a directive in order to make input, output functions work\r\n@Directive()\r\nexport abstract class SaveCloseButtonBase {\r\n  /** Button label, can be a translation key or plain text */\r\n  label = input<string>('Form.Buttons.SaveAndClose');\r\n\r\n  triggerOnFormSubmit = input<boolean>(false);\r\n\r\n  /** Material icon name to show */\r\n  icon = input<'done' | 'delete'>('done');\r\n\r\n  /** Classes to apply to the button */\r\n  ngClass = input<string>('');\r\n\r\n  /** If true, disables the button. Can also be a function returning boolean */\r\n  disabled = input<boolean | (() => boolean)>(false);\r\n\r\n  /** Emits when the button is clicked */\r\n  action = output<Event>();\r\n\r\n  /** Derived property for disabled state */\r\n  get isDisabled(): boolean {\r\n    return typeof this.disabled === 'function' ? !!this.disabled() : !!this.disabled;\r\n  }\r\n\r\n  onClick(event: Event) {\r\n    if (!this.isDisabled) {\r\n      this.action.emit(event);\r\n    }\r\n  }\r\n}","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n// tslint:disable-next-line:directive-selector\r\n@Directive({\r\n  selector: '[extendedFabSpeedDialTriggerContent]',\r\n})\r\nexport class ExtendedFabSpeedDialTriggerContentDirective {\r\n  constructor(public templateRef: TemplateRef<unknown>) { }\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n// tslint:disable-next-line:directive-selector\r\n@Directive({\r\n  selector: '[extendedFabSpeedDialActionsContent]',\r\n})\r\nexport class ExtendedFabSpeedDialActionsContentDirective {\r\n  constructor(public templateRef: TemplateRef<unknown>) { }\r\n}\r\n","/**\r\n * Checks if the keyboard event is triggered by the Escape key.\r\n * @param event KeyboardEvent\r\n * @returns boolean\r\n */\r\nexport function isEscape(event: KeyboardEvent): boolean {\r\n  return event.key === 'Escape';\r\n}\r\n\r\n/**\r\n * Checks if the keyboard event is triggered by Ctrl + S (or Cmd + S on Mac).\r\n * @param event KeyboardEvent\r\n * @returns boolean\r\n */\r\nexport function isCtrlS(event: KeyboardEvent): boolean {\r\n  return (event.key === 's' || event.key === 'S') && (event.ctrlKey || event.metaKey);\r\n}\r\n\r\n/**\r\n * Checks if the keyboard event is triggered by Ctrl + Enter (or Cmd + Enter on Mac).\r\n * @param event KeyboardEvent\r\n * @returns boolean\r\n */\r\nexport function isCtrlEnter(event: KeyboardEvent): boolean {\r\n  return event.key === 'Enter' && (event.ctrlKey || event.metaKey);\r\n}","import { Injectable } from '@angular/core';\r\nimport { ActivatedRoute, NavigationEnd, NavigationExtras, Router } from '@angular/router';\r\nimport { filter, map, pairwise, startWith, tap } from 'rxjs';\r\nimport { classLog } from '../logging';\r\nimport { ServiceBase } from '../services/service-base';\r\n\r\nconst logSpecs = {\r\n  doOnDialogClosed: false,\r\n  doOnDialogClosedWithData: true,\r\n};\r\n\r\n/**\r\n * Helper to handle dialog routings, especially:\r\n * 1. handling on-child-closed events (it also takes care of subscriptions)\r\n * 2. accessing the router and route - a very common task when you have dialogs\r\n */\r\n@Injectable()\r\nexport class DialogRoutingService extends ServiceBase {\r\n\r\n  log = classLog({ DialogRoutingService }, logSpecs);\r\n\r\n  constructor(\r\n    public router: Router,\r\n    public route: ActivatedRoute\r\n  ) { super(); }\r\n\r\n  get snapshot() { return this.route.snapshot; }\r\n\r\n  get url() { return this.router.url; }\r\n\r\n  get urlSegments() { return this.router.url.split('/'); }\r\n\r\n  getParam(key: string): string {\r\n    return this.route.snapshot.paramMap.get(key);\r\n  }\r\n\r\n  getParams<K extends string>(keys: K[]): Record<K, string> {\r\n    const paramMap = this.route.snapshot.paramMap;\r\n    return keys.reduce((acc, key) => {\r\n      acc[key] = paramMap.get(key);\r\n      return acc;\r\n    }, {} as Record<string, string>);\r\n  }\r\n\r\n  getQueryParam(key: string): string {\r\n    return this.route.snapshot.queryParamMap.get(key);\r\n  }\r\n\r\n  getQueryParams<K extends string>(keys: K[]): Record<K, string> {\r\n    const queryParamMap = this.route.snapshot.queryParamMap;\r\n    return keys.reduce((acc, key) => {\r\n      acc[key] = queryParamMap.get(key);\r\n      return acc;\r\n    }, {} as Record<string, string>);\r\n  }\r\n\r\n  state<T = any>() { return this.router.currentNavigation().extras?.state as T; }\r\n\r\n  /**\r\n   * Preferred way to register a callback, since the caller doesn't need to worry about subscriptions.\r\n   */\r\n  public doOnDialogClosed(callback: () => void) {\r\n    const l = this.log.fnIf('doOnDialogClosed');\r\n    this.subscriptions.add(\r\n      this.childDialogClosed$().subscribe((data: unknown) => {\r\n        l.a('Dialog closed', { data });\r\n        return callback();\r\n      })\r\n    );\r\n    l.end();\r\n  }\r\n\r\n  public doOnDialogClosedWithData(callback: (data: any) => void) {\r\n    const l = this.log.fnIf('doOnDialogClosedWithData');\r\n    this.subscriptions.add(\r\n      this.#childDialogClosedWithData().subscribe(({ state }) => {\r\n        l.a('Dialog closed', { state });\r\n        callback(state);\r\n      })\r\n    );\r\n    l.end();\r\n  }\r\n\r\n  /**\r\n   * Get the URL for a sub-route of the current route.\r\n   */\r\n  public urlSubRoute(params: string) {\r\n    const tree = this.router.createUrlTree([params], { relativeTo: this.route });\r\n    const routeUrl = this.router.serializeUrl(tree);\r\n    return routeUrl;\r\n  }\r\n\r\n  /**\r\n   * Navigate to a new route.\r\n   * Just looks a bit simpler than the internal array notation.\r\n   */\r\n  public navPath(url: string, extras?: NavigationExtras): Promise<boolean> {\r\n    return this.router.navigate([url], extras);\r\n  }\r\n\r\n  /**\r\n   * Navigate relative to the current route.\r\n   */\r\n  public navRelative(commands: any[], extras?: Omit<NavigationExtras, 'relativeTo'>): Promise<boolean> {\r\n    return this.router.navigate(commands, { ...extras, relativeTo: this.route });\r\n  }\r\n\r\n  public childDialogClosed$() {\r\n    return this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      startWith(!!this.route.snapshot.firstChild),\r\n      map(() => !!this.route.snapshot.firstChild),\r\n      pairwise(),\r\n      filter(([hadChildBefore, hasChildNow]) => hadChildBefore && !hasChildNow),\r\n    )\r\n  }\r\n\r\n  #childDialogClosedWithData() {\r\n    return this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      tap(event => {\r\n        const l = this.log.fn(\"childDialogClosed$\", {\r\n          event,\r\n          firstChild: this.route.snapshot.firstChild,\r\n          snapShot: this.route.snapshot,\r\n          state: this.router.currentNavigation()?.extras.state,\r\n        });\r\n        l.a('NavigationEnd', { event });\r\n        l.end();\r\n      }),\r\n      startWith(!!this.route.snapshot.firstChild),\r\n      map(() => ({\r\n        hasChildNow: !!this.route.snapshot.firstChild,\r\n        state: this.router.currentNavigation()?.extras.state,\r\n      })),\r\n      pairwise(),\r\n      filter(([prev, curr]) => prev.hasChildNow && !curr.hasChildNow),\r\n      map(([prev, curr]) => ({\r\n        hadChildBefore: prev.hasChildNow,\r\n        hasChildNow: curr.hasChildNow,\r\n        state: curr.state\r\n      }))\r\n    );\r\n  }\r\n}\r\n","import { Directive, ElementRef, input, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\n// tslint:disable-next-line:directive-selector\r\n@Directive({\r\n  selector: '[extended-fab-speed-dial-trigger]',\r\n})\r\nexport class ExtendedFabSpeedDialTriggerDirective implements OnChanges {\r\n  disabled = input<boolean>(false);\r\n\r\n  constructor(private elementRef: ElementRef<HTMLElement>) { }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.disabled != null) {\r\n      this.elementRef.nativeElement.toggleAttribute('disabled', this.disabled());\r\n    }\r\n  }\r\n}\r\n","// tslint:disable-next-line:max-line-length\r\nimport { NgTemplateOutlet } from '@angular/common';\r\nimport { AfterContentInit, Component, ContentChild, ContentChildren, ElementRef, input, OnDestroy, QueryList, ViewEncapsulation } from '@angular/core';\r\nimport { BehaviorSubject, combineLatest, distinctUntilChanged, startWith } from 'rxjs';\r\nimport { BaseComponent } from '../../components/base';\r\nimport { ExtendedFabSpeedDialActionDirective } from './extended-fab-speed-dial-action.directive';\r\nimport { ExtendedFabSpeedDialActionsContentDirective } from './extended-fab-speed-dial-actions-content.directive';\r\nimport { ExtendedFabSpeedDialTriggerContentDirective } from './extended-fab-speed-dial-trigger-content.directive';\r\n\r\n/**\r\n * Special Speed-Dial kind of FAB which opens more menu items on hover.\r\n *\r\n * IMPORTANT: to work it needs ca. 4 more directives.\r\n * So never import this component directly, but instead import the ExtendedFabSpeedDialImports.\r\n */\r\n@Component({\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'extended-fab-speed-dial',\r\n    templateUrl: './extended-fab-speed-dial.html',\r\n    styleUrls: ['./extended-fab-speed-dial.scss'],\r\n    encapsulation: ViewEncapsulation.None,\r\n    imports: [\r\n        NgTemplateOutlet\r\n    ]\r\n})\r\nexport class ExtendedFabSpeedDialComponent extends BaseComponent implements AfterContentInit, OnDestroy {\r\n  @ContentChild(ExtendedFabSpeedDialTriggerContentDirective) trigger: ExtendedFabSpeedDialTriggerContentDirective;\r\n  @ContentChild(ExtendedFabSpeedDialActionsContentDirective) actions: ExtendedFabSpeedDialActionsContentDirective;\r\n  @ContentChildren(ExtendedFabSpeedDialActionDirective, { read: ElementRef }) actionButtons: QueryList<ElementRef<HTMLButtonElement>>;\r\n\r\n  disabled = input<boolean>(false);\r\n\r\n  open$ = new BehaviorSubject(false);\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  ngAfterContentInit(): void {\r\n    this.subscriptions.add(\r\n      combineLatest([\r\n        this.open$.pipe(distinctUntilChanged()),\r\n        this.actionButtons.changes.pipe(startWith(undefined)),\r\n      ]).subscribe(([open]) => {\r\n        this.actionButtons.forEach((btn, i, all) => {\r\n          const min = 0.3;\r\n          const max = Math.min(min + (all.length - 1) * 0.05, 0.6);\r\n          const step = (max - min) / (all.length - 1);\r\n          const transitionDuration = `${open ? min + step * i : max - step * i}s`;\r\n          if (btn.nativeElement.style.transitionDuration !== transitionDuration) {\r\n            btn.nativeElement.style.transitionDuration = transitionDuration;\r\n          }\r\n        });\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.open$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  setOpen(event: PointerEvent, open: boolean): void {\r\n    if (event.pointerType === 'touch') return;\r\n    this.open$.next(open);\r\n  }\r\n}\r\n","<div class=\"extended-fab-speed-dial\" [attr.disabled]=\"disabled() || null\" (pointerenter)=\"setOpen($event, true)\"\r\n  (pointerleave)=\"setOpen($event, false)\">\r\n  <div class=\"extended-fab-speed-dial-trigger\">\r\n    <ng-container [ngTemplateOutlet]=\"trigger?.templateRef\"></ng-container>\r\n  </div>\r\n  <div class=\"extended-fab-speed-dial-actions\">\r\n    <ng-container [ngTemplateOutlet]=\"actions?.templateRef\"></ng-container>\r\n  </div>\r\n</div>\r\n"],"x_google_ignoreList":[]}