"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_shared_components_base_ts-projects_eav-ui_src_app_shared_fiel-d2d33b","projects_eav-ui_src_app_shared_components_base_ts-projects_eav-ui_src_app_shared_pipes_safe-h-6ce629"],{320(T,_,t){t.d(_,{t:()=>d});var s=t(89204),c=t(46443),p=t(71772),a=t(24467),m=t(56884),r=t(36124);let d=(()=>{class o extends a.B{getAppInfo(){return(0,c.fx)(()=>({url:this.apiUrl("admin/app/Statistics"),params:{appid:this.appId,zoneId:this.zoneId}}))}exportAppUrl(){return`${this.apiUrl(`${p.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl(E){var h=this;return(0,s.A)(function*({includeContentGroups:v,resetAppGuid:l,withFiles:O}){return h.getStatusPromise("admin/app/SaveData",{params:{appid:h.appId,zoneId:h.zoneId,includeContentGroups:v.toString(),resetAppGuid:l.toString(),withPortalFiles:O.toString()}})}).apply(this,arguments)}static{this.\u0275fac=(()=>{let E;return function(v){return(E||(E=r.xGo(o)))(v||o)}})()}static{this.\u0275prov=m.jDH({token:o,factory:o.\u0275fac})}}return o})()},1726(T,_,t){t.d(_,{O:()=>s});const s={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},2570(T,_,t){t.d(_,{Y:()=>I,y:()=>E});var s=t(89204),c=t(46443),p=t(24467),a=t(56884),m=t(36124);const r="admin/view/all",I="a495b51f-44e7-4335-81db-b8a7e33120f0";let E=(()=>{class h extends p.B{getAllOnce(){return(0,c.fx)(()=>({url:this.apiUrl(r),params:{appId:this.appId}}))}getAllLive(l){return(0,c.fx)(()=>(l(),{url:this.apiUrl(r),params:{appId:this.appId}}))}delete(l){var O=this;return(0,s.A)(function*(){return O.getStatusPromise("admin/view/delete",{params:{appId:O.appId,Id:l.toString()}})})()}import(l){const O=new FormData;return O.append("File",l),this.http.post(this.apiUrl("admin/view/import"),O,{params:{appId:this.appId,zoneId:this.zoneId}})}export(l){const O=this.apiUrl("admin/view/json")+"?appId="+this.appId+"&viewId="+l;window.open(O,"_blank","")}getUsage(l){return this.newHttpResource(()=>({url:this.apiUrl("admin/view/usage"),params:{appId:this.appId,guid:l}}))}static{this.\u0275fac=(()=>{let l;return function(i){return(l||(l=m.xGo(h)))(i||h)}})()}static{this.\u0275prov=a.jDH({token:h,factory:h.\u0275fac})}}return h})()},9234(T,_,t){t.d(_,{Gg:()=>h,Tr:()=>v,gb:()=>E});var s=t(51567),c=t(70271),p=t(86301),a=t(36647),m=t(12938),r=t(34435),n=t(24467),g=t(54839),d=t(56884),o=t(36124);const I={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},E="admin/entity/",h="admin/entity/list";let v=(()=>{class l extends n.B{constructor(){super(...arguments),this.log=(0,r.Tq)({EntityService:l},I),this.queryService=(0,m.d)(g.c)}getEntities$(i){return this.log.fnIf("getEntities"),i.pipe((0,s.p)(f=>null!=f),(0,a.n)(f=>this.getAvailableEntities(f.contentTypeName).pipe((0,p.t)(1))))}getAvailableEntities(i,f){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[i],itemIds:f,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,c.T)(U=>U.Default))}delete(i,f,M,U,A,L){return this.log.fnIf("delete",{appId:i,contentType:f,entityId:M,force:U,parentId:A,parent}),this.http.delete(this.apiUrl(E+"delete"),{params:{contentType:f,id:M.toString(),appId:i,force:U.toString(),...A&&{parentId:A.toString()},...A&&L&&{parentField:L}}})}static{this.\u0275fac=(()=>{let i;return function(M){return(i||(i=o.xGo(l)))(M||l)}})()}static{this.\u0275prov=d.jDH({token:l,factory:l.\u0275fac})}}return l})()},14007(T,_,t){t.d(_,{D:()=>p,y:()=>c});var s=t(1726);function c(a){return{[s.O.Boolean]:"toggle_on",[s.O.Custom]:"extension",[s.O.DateTime]:"today",[s.O.Empty]:"crop_free",[s.O.Entity]:"share",[s.O.Hyperlink]:"link",[s.O.Number]:"dialpad",[s.O.String]:"text_fields"}[a]??"device_unknown"}function p(a){return{[s.O.Boolean]:"Boolean (yes/no)",[s.O.Custom]:"Custom - ui-tools or custom types",[s.O.DateTime]:"Date and/or time",[s.O.Empty]:"Empty - for form-titles etc.",[s.O.Entity]:"Entity (other content-items)",[s.O.Hyperlink]:"Link / file reference",[s.O.Number]:"Number",[s.O.String]:"Text / string"}[a]??"device_unknown"}},17693(T,_,t){t.d(_,{X:()=>r,g:()=>v});var s=t(46443),c=t(36664),p=t(96474),a=t(56884),m=t(36124);const r="admin/type/",n="admin/type/get",g="admin/type/list",d="admin/type/scopes";let v=(()=>{class l extends p.D{retrieveContentType(i){return this.getHttpApiUrl(n,{params:{appId:this.appId,contentTypeId:i}})}getType(i){return(0,s.fx)(()=>({url:this.apiUrl(n),params:{appId:this.appId,contentTypeId:i}}))}getTypes(i){return(0,s.fx)(()=>({url:this.apiUrl(g),params:{appId:this.appId,scope:i()}}),{defaultValue:[]})}retrieveContentTypesPromise(i){return this.fetchPromise(g,{params:{appId:this.appId,scope:i}})}getScopesPromise(){return this.fetchPromise(d,{params:{appId:this.appId}}).then(i=>{const f=i.old;return Object.keys(f).map(U=>({name:f[U],value:U}))})}getScopesSig(){const i=(0,s.fx)(()=>({url:this.apiUrl(d),params:{appid:this.appId}}));return(0,c.EW)(()=>{const U=(0,i.value)();if(!U||!U.old)return[];const A=U.old;return Object.keys(A).map(L=>({name:A[L],value:L}))})}getScopesV2Promise(){return this.fetchPromise(d,{params:{appId:this.appId}}).then(i=>i.scopes)}save(i){return this.http.post(this.apiUrl("admin/type/save"),i,{params:{appid:this.appId}})}delete(i){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:i.NameId}})}import(i){const f=new FormData;for(const M of i)f.append("File",M);return this.http.post(this.apiUrl("admin/type/import"),f,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(i){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceNameId:i}})}static{this.\u0275fac=(()=>{let i;return function(M){return(i||(i=m.xGo(l)))(M||l)}})()}static{this.\u0275prov=a.jDH({token:l,factory:l.\u0275fac})}}return l})()},30281(T,_,t){t.d(_,{$:()=>p});var s=t(27092),c=t(36124);let p=(()=>{class a{constructor(){this.subscriptions=new s.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=c.VBU({type:a,selectors:[["app-base"]],decls:0,vars:0,template:function(n,g){},encapsulation:2})}}return a})()},54839(T,_,t){t.d(_,{c:()=>r});var s=t(34435),c=t(68873),p=t(56884),a=t(50698);const m={all:!1,getAvailableEntities:!1,getEntities:!1};let r=(()=>{class n{constructor(d,o){this.http=d,this.context=o,this.log=(0,s.Tq)({QueryService:n},m)}getFromQuery(d,o,I,E){this.log.fnIf("getAvailableEntities",{queryUrl:d,params:o,fields:I,entitiesFilter:E});const h=!!o,i=(((o?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(h?`&${o}`:"")+"&$select="+(I??"")).substring(1);return this.http.post(`app/auto/query/${d}?${i}`,{Guids:E})}getEntities({contentTypes:d,itemIds:o,fields:I,log:E}){this.log.fnIf("getEntities",{log:E,contentTypes:d,itemIds:o,fields:I});const v=("&typeNames="+(d?.join(",")??"")+`&appId=${this.context.appId}&$select=`+(I??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${v}`,{Guids:o})}static{this.\u0275fac=function(o){return new(o||n)(p.KVO(a.Qq),p.KVO(c.o))}}static{this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}}return n})()},58624(T,_,t){t.d(_,{Q:()=>m,S:()=>r});var s=t(71772),c=t(24467),p=t(56884),a=t(36124);const m="admin/appParts/";let r=(()=>{class n extends c.B{importAppParts(d){const o=new FormData;return o.append("File",d),this.http.post(this.apiUrl(m+"Import"),o,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(d){return this.http.post(this.apiUrl(s.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:d.toString()}})}static{this.\u0275fac=(()=>{let d;return function(I){return(d||(d=a.xGo(n)))(I||n)}})()}static{this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}}return n})()},69914(T,_,t){t.d(_,{$:()=>p});var s=t(36124),c=t(80436);let p=(()=>{class a{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustHtml(r)}static{this.\u0275fac=function(n){return new(n||a)(s.rXU(c.up,16))}}static{this.\u0275pipe=s.EJ8({name:"safeHtml",type:a,pure:!0})}}return a})()},70693(T,_,t){function s(p){return new Promise((a,m)=>{const r=new FileReader;r.readAsDataURL(p),r.onload=()=>{a(r.result.split(",")[1])},r.onerror=n=>{m(n)}})}function c(p){return new Promise((a,m)=>{const r=new FileReader;r.readAsText(p),r.onload=()=>{a(r.result)},r.onerror=n=>{m(n)}})}t.d(_,{d:()=>c,n:()=>s})},71475(T,_,t){t.d(_,{j:()=>n});var s=t(46443),c=t(24467),p=t(58624),a=t(56884),m=t(36124);let n=(()=>{class g extends c.B{getContentInfoLiveParam(o){return(0,s.fx)(()=>({url:this.apiUrl("admin/appParts/get"),params:{appid:this.appId,zoneId:this.zoneId,scope:o()}}))}exportParts(o,I,E){const h=this.apiUrl(p.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+o.join(";")+"&entityIdsString="+I.join(";")+"&templateIdsString="+E.join(";");window.open(h,"_blank","")}static{this.\u0275fac=(()=>{let o;return function(E){return(o||(o=m.xGo(g)))(E||g)}})()}static{this.\u0275prov=a.jDH({token:g,factory:g.\u0275fac})}}return g})()},71772(T,_,t){t.d(_,{I:()=>g,u:()=>n});var s=t(59452),c=t(36647),p=t(62876),a=t(24467),m=t(56884),r=t(36124);const n="admin/app/";let g=(()=>{class d extends a.B{importApp(I,E,h=!1){const v=new FormData;return v.append("File",I),v.append("Name",E??""),this.http.post(this.apiUrl(n+"Import"),v,{params:{zoneId:this.zoneId}}).pipe((0,c.n)(l=>{if(h&&l.Messages[0]?.MessageType===p.G1.Warning){const O=prompt(l.Messages[0].Text+" Would you like to install it using another folder name?");if(O)return this.importApp(I,O,!0)}return(0,s.of)(l)}))}static{this.\u0275fac=(()=>{let I;return function(h){return(I||(I=r.xGo(d)))(h||d)}})()}static{this.\u0275prov=m.jDH({token:d,factory:d.\u0275fac})}}return d})()},74079(T,_,t){t.d(_,{Cu:()=>i,JL:()=>f,Mk:()=>l,ei:()=>O,vN:()=>M,xR:()=>U});var s=t(46443),c=t(14600),p=t(70271),a=t(36647),m=t(70693),r=t(34435),n=t(9234),g=t(96474),d=t(56884),o=t(36124);const I={all:!0,getAll:!1,getAllSig:!0,getAllLive:!1,getAllRes:!0,importQuery:!1,clonePipeline:!1,delete:!1,update:!1},l="admin/query/RunDev",O="admin/query/DebugStream",i="admin/query/Save",f="admin/query/Get",M="admin/query/DataSources";let U=(()=>{class A extends g.D{constructor(){super(...arguments),this.log=(0,r.Tq)({PipelinesService:A},I)}getAll(y){return this.log.fnIf("getAll").r(this.getHttpApiUrl(n.Gg,{params:{appId:this.appId,contentType:y}}))}getAllLive(y,R){return this.log.fnIf("getAllLive",{contentType:y,refresh:R}),(0,s.fx)(()=>(R(),{url:this.apiUrl(n.Gg),params:{appId:this.appId,contentType:y}}))}getAllRes(y,R){const C=this.log.fnIf("getAllRes"),b=(0,s.fx)(()=>({url:n.Gg,params:{appId:this.appId,contentType:y}}),{defaultValue:R});return C.r(b)}importQuery(y){const R=this.log.fnIf("importQuery"),C=(0,c.H)((0,m.n)(y)).pipe((0,a.n)(b=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:b})),(0,p.T)(b=>({Success:b,Messages:[]})));return R.r(C)}clonePipelinePromise(y){const R=this.log.fnIf("clonePipeline"),C=this.fetchPromise("admin/query/Clone",{params:{Id:y.toString(),appId:this.appId}});return R.r(C)}delete(y){const R=this.log.fnIf("delete"),C=this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:y.toString()}});return R.r(C)}static{this.\u0275fac=(()=>{let y;return function(C){return(y||(y=o.xGo(A)))(C||A)}})()}static{this.\u0275prov=d.jDH({token:A,factory:A.\u0275fac})}}return A})()},75445(T,_,t){t.d(_,{Cu:()=>r.Cu,JL:()=>r.JL,Mk:()=>r.Mk,X6:()=>c.X,ei:()=>r.ei,gs:()=>c.g,tr:()=>s.t,vN:()=>r.vN,xR:()=>r.xR,y0:()=>n.y});var s=t(61479),c=t(17693),r=(t(71475),t(320),t(58624),t(74079)),n=t(2570)},78742(T,_,t){t.d(_,{h:()=>b,z:()=>o});var s=t(36664),c=t(75445),p=t(1726),a=t(14007);const m={Boolean:{label:(0,a.D)(p.O.Boolean),description:"Yes/no or true/false values"},Custom:{label:(0,a.D)(p.O.Custom),description:"Use for things like gps-pickers (which writes into multiple fields) or for custom-data which serializes something exotic into the db like an array, a custom json or anything"},DateTime:{label:(0,a.D)(p.O.DateTime),description:"For date, time or combined values"},Empty:{label:(0,a.D)(p.O.Empty),description:"Use to structure your form"},Entity:{label:(0,a.D)(p.O.Entity),description:"One or more other content-items"},Hyperlink:{label:(0,a.D)(p.O.Hyperlink),description:"Hyperlink or reference to a picture / file"},Number:{label:(0,a.D)(p.O.Number),description:"Any kind of number"},String:{label:(0,a.D)(p.O.String),description:"Any kind of text"}};var n=t(24467),g=t(36124),d=t(56884);const o="admin/field/all",M=c.X6+"SetTitle",y="admin/field/GetSharedFields";let b=(()=>{class B extends n.B{paramsAppId(e={}){return{params:{appid:this.appId,...e}}}dataTypes(){const e=this.newHttpResource(()=>({url:this.apiUrl("admin/field/DataTypes"),params:this.paramsAppId().params}));return{value:(0,s.EW)(()=>{const P=e.value();return P?function r(B){const x=[];for(const e of B)x.push({name:e,label:m[e].label,icon:(0,a.y)(e),description:m[e].description});return x}(P):[]}),loading:e.isLoading,error:e.error}}getInputTypes(){const e=this.newHttpResource(()=>({url:this.apiUrl("admin/field/InputTypes"),params:this.paramsAppId().params})),u=D=>({dataType:D.Type.substring(0,D.Type.indexOf("-")),inputType:D.Type,label:D.Label,description:D.Description,isDefault:D.IsDefault,isObsolete:D.IsObsolete,isRecommended:D.IsRecommended,obsoleteMessage:D.ObsoleteMessage,icon:D.IsDefault?"stars":D.IsRecommended?"star":null,sort:(D.IsObsolete?"z":D.IsDefault?"a":D.IsRecommended?"b":"c")+D.Label});return{value:(0,s.EW)(()=>e.value()?.map(u).sort((D,S)=>D.sort.localeCompare(S.sort))||[]),loading:e.isLoading,error:e.error}}getReservedNames(){return this.newHttpResource(()=>({url:this.apiUrl("admin/field/ReservedNames")}))}getFieldsLive(e,u){const P=this.newHttpResource(()=>(e(),{url:this.apiUrl(o),params:this.paramsAppId({staticName:u}).params})).value;return(0,s.EW)(()=>{const S=P()||[];for(const W of S){if(!W.Metadata)continue;const K=W.Metadata;K.merged={...K.All,...K[W.Type],...K[W.InputType]}}return S})}getFieldsPromise(e){return this.fetchPromise(o,this.paramsAppId({staticName:e})).then(u=>{if(u)for(const P of u){if(!P.Metadata)continue;const D=P.Metadata;D.merged={...D.All,...D[P.Type],...D[P.InputType]}}return u})}getShareableFieldsPromise(){return this.fetchPromise(y,{params:this.paramsAppId().params})}getShareableFieldsFor(e){return this.#t(y,e)}getAncestors(e){return this.#t("admin/field/GetAncestors",e)}getDescendants(e){return this.#t("admin/field/GetDescendants",e)}#t(e,u){return this.fetchPromise(e,{params:this.paramsAppId({attributeId:u}).params})}addInheritedField(e,u,P,D){return this.http.post(this.apiUrl("admin/field/AddInheritedField"),null,this.paramsAppId({contentTypeId:e.toString(),sourceType:u,sourceField:P,name:D}))}share(e,u=!0){return this.http.post(this.apiUrl("admin/field/Share"),null,{params:{appid:this.appId,attributeId:e.toString(),share:u}})}inherit(e,u){return this.http.post(this.apiUrl("admin/field/Inherit"),null,{params:{appid:this.appId,attributeId:e.toString(),inheritMetadataOf:u}})}reOrder(e,u){return this.http.post(this.apiUrl("admin/field/Sort"),null,{params:{appid:this.appId,contentTypeId:u.Id.toString(),order:JSON.stringify(e)}})}setTitle(e,u){return this.http.post(this.apiUrl(M),null,{params:{appid:this.appId,contentTypeId:u.Id.toString(),attributeId:e.Id.toString()}})}rename(e,u,P){return this.http.post(this.apiUrl("admin/field/Rename"),null,{params:{appid:this.appId,contentTypeId:u.toString(),attributeId:e.toString(),newName:P}})}delete(e,u){if(e.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl("admin/field/Delete"),{params:{appid:this.appId,contentTypeId:u.Id.toString(),attributeId:e.Id.toString()}})}add(e,u){return this.http.post(this.apiUrl("admin/field/Add"),null,{params:{AppId:this.appId,ContentTypeId:u.toString(),Id:e.Id.toString(),Type:e.Type,InputType:e.InputType,StaticName:e.StaticName,IsTitle:e.IsTitle.toString(),Index:e.SortOrder.toString()}})}updateInputType(e,u,P){return this.http.post(this.apiUrl("admin/field/InputType"),null,{params:{appId:this.appId,attributeId:e,field:u,inputType:P}})}static{this.\u0275fac=(()=>{let e;return function(P){return(e||(e=g.xGo(B)))(P||B)}})()}static{this.\u0275prov=d.jDH({token:B,factory:B.\u0275fac})}}return B})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/21.03.00/dist/ng-edit/default-projects_eav-ui_src_app_shared_components_base_ts-projects_eav-ui_src_app_shared_fiel-d2d33b.faa14dfc32930683.js.map