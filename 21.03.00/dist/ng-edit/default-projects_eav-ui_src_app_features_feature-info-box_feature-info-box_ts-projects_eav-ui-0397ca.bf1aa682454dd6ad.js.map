{"version":3,"file":"default-projects_eav-ui_src_app_features_feature-info-box_feature-info-box_ts-projects_eav-ui-0397ca.bf1aa682454dd6ad.js","mappings":"kXAsBUA,MADF,UACEA,CADwB,WACSA,MAAA,wBAAoCA,QAEnEA,MADF,UACEA,CAD+B,UACzBA,MAAA,wBAEVA,mCAJmCA,MAAA,GAAAA,MAAA,GAAAA,MAAA,4BAEzBA,MAAA,GAAAA,YAAA,IAAAC,EAAAC,UAAAC,UAAA,kFAORH,MADF,UACEA,CADwB,WACSA,MAAA,WAAKA,QAEpCA,MADF,WACEA,CADyC,YACnCA,MAAA,mBAAAA,MAAAI,GAAA,MAAAH,EAAAD,MAAA,UAAAA,MAASC,EAAAI,UAAAC,gBAA0BL,EAAAC,UAASK,MAAM,GAAEP,MAAA,GAE9DA,qCAF8DA,MAAA,GAAAA,MAAAC,EAAAC,UAAAK,+CA9BhEP,MAFJ,UAEIA,CAFoB,UAEpBA,CAD6B,WAE3BA,MAAA,GACFA,QACAA,MAAA,cAA6CA,MAAA,mBAAAA,MAAAQ,GAAA,MAAAP,EAAAD,QAAA,OAAAA,MAASC,EAAAQ,cAAa,GACjET,MAAA,cAAUA,MAAA,WAEdA,YACAA,MAAA,WACEA,MAAA,6BAGEA,MADF,WACEA,CADwB,YACSA,MAAA,UAAGA,QAElCA,MADF,WACEA,CAD+B,aACzBA,MAAA,mBAAAA,MAAAQ,GAAA,MAAAP,EAAAD,QAAA,OAAAA,MAASC,EAAAI,UAAAC,gBAA0BL,EAAAC,UAASQ,QAAQ,GAAEV,MAAA,IAEhEA,YAEAA,MAAA,GAAAW,EAAA,aASAX,MAAA,GAAAY,EAAA,aAUEZ,MADF,WACEA,CADwB,YACSA,MAAA,uBAAgBA,QAE/CA,MADF,WACEA,CAD+B,WACzBA,MAAA,IAGZA,cAGIA,MAFJ,2BAEIA,CAF4B,UAE5BA,CAD2D,eACjDA,MAAA,kBAAWA,QACrBA,MAAA,sBAGNA,oCA/CMA,MAAA,GAAAA,MAAA,IAAAC,EAAAC,UAAAW,KAAA,KAOCb,MAAA,GAAAA,MAAA,YAAAA,MAAA,IAAAC,EAAAC,UAAAY,aAAAd,OAK6DA,MAAA,GAAAA,MAAAC,EAAAC,UAAAQ,QAIhEV,cAAAC,EAAAc,UAAAC,WAAA,OASAhB,cAAAC,EAAAc,UAAAE,SAAA,OAYUjB,MAAA,GAAAA,MAAAC,EAAAC,UAAAgB,SAAAC,OAAA,KAAAlB,EAAAC,UAAAgB,SAAAE,SAKPpB,MAAA,GAAAA,MAAA,OAAAC,EAAAC,UAAAmB,KAAArB,QCvBF,IAAMsB,EAA6B,MAApC,MAAOA,EAGXC,YAC+CC,EACnCC,GADmCC,KAAAF,cACnCE,KAAAD,SAJZC,KAAAC,SAAQC,SAOEF,KAAAX,WAAUc,MAAY,UAAW,IAAMH,KAAKC,SAAWD,KAAKF,aAC5DE,KAAAxB,WAAU2B,MAAY,UAAW,IAAMH,KAAKX,WAAWb,SACvDwB,KAAArB,aAAYyB,KAAUC,IAJ5B,CAMJtB,cACEiB,KAAKD,OAAOO,OACd,iDAdWV,GAA6BtB,MAIlBiC,KAAe,GAAAjC,MAAAkC,MAAA,oCAJ1BZ,EAA6Ba,UAAA,iCAAAC,OAAA,CAAAT,MAAA,aAAAU,MAAA,EAAAC,KAAA,EAAAC,OAAA,wWAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDvB1CzC,MAAA,EAAA2C,EAAA,mBAAA3C,MAAA0C,EAAAxC,UAAA,qBCgBI0C,KAAeC,UACfC,KAAaC,KAEbC,IACAC,KAFAC,IAAYC,MAAAC,OAAA,gHAKH9B,CAA6B,wEClBnC,IAAMS,EAAgB,MAAvB,MAAOA,EAEXR,YAAoB8B,GAAA3B,KAAA2B,UAAyB,CAE7C/C,gBAAgBgD,IACdhD,OAAgBgD,GAChB5B,KAAK2B,SAASE,KAAK,sBAAuB,KAAM,CAAEC,SAAU,KAC9D,iDAPWzB,GAAgB/B,MAAAkC,MAAA,sCAAhBH,EAAgB0B,QAAhB1B,EAAgB2B,UAAAC,WADH,QAAM,SACnB5B,CAAgB,oCCHtB,MAAM6B,EAAe,CAC1BC,qBAAsB,uBACtBC,sBAAuB,wBACvBC,wBAAyB,0BACzBC,gBAAiB,kBACjBC,sBAAuB,wBACvBC,mBAAoB,qBACpBC,0BAA2B,4BAC3BC,WAAY,wBACZC,sBAAuB,wBACvBC,sBAAuB,wBACvBC,kCAAmC,oCACnCC,wBAAyB,0BACzBC,wBAAyB,0BAGzBC,iBAAkB,mBAClBC,cAAe,gBACfC,gBAAiB,kBACjBC,sBAAuB,wBACvBC,eAAgB,iBAChBC,iBAAkB,wFCnBpB,MAAMC,EAAuB,wBAEtB,IAAMC,EAAqB,MAA5B,MAAOA,UAA6BC,IAExCC,iBAAiBzE,GACf,OAAOgB,KAAK0D,gBAAyB,MACnCC,IAAK3D,KAAK4D,OAAON,GACjBO,OAAQ,CAAE7E,OAAQA,OAEtB,CAEA8E,kBAAkBC,GAChB,MAAMC,KAAcC,OAAkB,IACtC,UAAWjF,KAAU+E,EAEnB/D,KAAKkE,aAAsBZ,EAAsB,CAC/CO,OAAQ,CAAE7E,YACTmF,KAAK3F,IACNwF,EAAYI,OAAOC,GAAQ,IAAIA,EAAM7F,MAGzC,OAAOwF,CACT,yEApBWT,KAAoBe,GAApBf,EAAoB,0CAApBA,EAAoBxB,QAApBwB,EAAoBvB,WAAA,SAApBuB,CAAqB,sLCLhCjF,MAAA,gCAA+BA,MAAA,mBAAAA,MAAAQ,GAAA,MAAAP,EAAAD,QAAA,OAAAA,MAASC,EAAAgG,aAAY,GAElDjG,MAAA,cAAuCA,MAAA,GAAYA,QAGjDA,MADF,UACEA,CADqC,WACAA,MAAA,wBAAgDA,QACrFA,MAAA,WAAwCA,MAAA,yBAA+CA,QACvFA,MAAA,IAEJA,kCATsDA,MAAA,QAAAA,MAAA,uBAAAC,EAAAC,YAE1CF,MAAA,GAAAA,YAAA,aAAAC,EAAAiG,SAA6BlG,cAAAC,EAAAiG,QAGAlG,MAAA,GAAAA,YAAA,sCACGA,MAAA,GAAAA,YAAA,uCCUvC,IAAMmG,EAAwB,MAA/B,MAAOA,UAAgCC,IAV7C7E,kCAeEG,KAAA2E,UAASzE,QAAe,GAKxBF,KAAAwE,QAAOrE,MAAY,OAAQ,IAAMH,KAAK2E,SAAW,OAAS,mFAV/CF,KAAuBH,GAAvBG,EAAuB,wCAAvBA,EAAuBhE,UAAA,2BAAAC,OAAA,CAAAiE,OAAA,cAAAC,SAAA,CAAAtG,OAAAuG,mBAAAC,EAAAnE,MAAA,EAAAC,KAAA,EAAAC,OAAA,6KAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,YDjBpCzC,MAAA,EAAAyG,EAAA,qBAAAzG,MAAA0C,EAAAgE,OAAA,qBCYI5D,KAAaZ,KACbc,IACA2D,IAAc9D,MAAAO,OAAA,4rBAGL+C,CAAwB,qPChBnCnG,MAAA,uCAA4BA,MAAA,QAAAA,MAAA,EAAAwG,EAAA9D,ICcvB,IAAMkE,EAA0B,MAAjC,MAAOA,EACXC,GAGAtF,YACkCuF,EACtBrF,EACFsF,GAFwBrF,KAAAoF,aACtBpF,KAAAD,SACFC,KAAAqF,QANVrF,MAAAmF,KAAoB/E,KAAUmD,KAC9BvD,KAAAsF,aAAYrB,OAAe,IAcjBjE,KAAArB,aAAYyB,KAAUC,IAR5B,CAEJkF,WACEvF,KAAKsF,UAAUE,IAAIxF,KAAKqF,MAAMI,SAASC,KAAKJ,WAAgBtF,KAAKoF,YAAc,IAC/EpF,KAAK2F,eAAiB3F,MAAKmF,EAAkB1B,iBAAiBzD,KAAKsF,WAAWM,KAChF,iDAbWV,GAA0B5G,MAK3BiC,MAAejC,MAAAkC,MAAAlC,MAAA6C,MAAA,oCALd+D,EAA0BzE,UAAA,8BAAAE,MAAA,EAAAC,KAAA,EAAAC,OAAA,cAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,GDfvCzC,MAAA,EAAAuH,EAAA,+CAAAvH,OAAAwH,EAAA9E,EAAA2E,kBAAA,KAAAG,mBCYQlG,KAA6BmG,cAAA,YAGxBb,CAA0B,4HCJhC,IAAMR,EAAoB,MAA3B,MAAOA,EAQXsB,GACAC,GACAC,GACAC,GAEAtG,cAVAG,KAAAoG,cAAgBlG,MAAMmG,WAGtBrG,KAAAsG,UAASpG,QAAe,GAExBF,MAAAgG,KAAaO,OAAOC,MACpBxG,MAAAiG,KAAoBM,OAAOE,OAC3BzG,MAAAkG,KAAqBK,OAAOG,OAC5B1G,MAAAmG,KAAmBI,OAAOI,KAI1B3G,KAAAxB,WAAU2B,MAAY,UAAW,IAAMH,MAAKmG,EAAiBS,WAAW5G,KAAKoG,kBAE7EpG,KAAAgF,QAAO7E,MAAY,OAAQ,KACzB,MAAM0G,EAAO7G,KAAKxB,UAClB,OAAY,MAARqI,GAEG7G,KAAKsG,WAAaO,GAAMpI,YAAa,IAR9B,CAWhB8F,aACEuC,EAAkB9G,MAAKgG,EAAYhG,KAAKoG,gBAAiBpG,MAAKiG,EAAmBjG,MAAKkG,EACxF,iDA1BWxB,EAAoB,oCAApBA,EAAoBhE,OAAA,CAAA0F,cAAA,oBAAAE,OAAA,wBAApB5B,CAAoB,KA6B3B,SAAUoC,EAAkB/G,EAAmBuF,EAAmByB,EAAoCC,GAC1GjH,EAAO8B,KAAKqD,6BAA4B,CACtC+B,WAAW,EACXvB,KAAMJ,EACNyB,iBAAkBA,EAClBG,MAAO,UAGTF,GAAmBG,cACrB","names":["i0","ctx_r1","feature","isEnabled","_r3","clipboard","copyToClipboard","guid","_r1","closeDialog","nameId","FeatureDetailsDialogComponent_Conditional_0_Conditional_16_Template","FeatureDetailsDialogComponent_Conditional_0_Conditional_17_Template","name","description","mySpecs","showStatus","showGuid","security","Impact","Message","link","FeatureDetailsDialogComponent","constructor","dialogSpecs","dialog","this","specs","input","computedObj","transient","ClipboardService","close","MAT_DIALOG_DATA","i1","selectors","inputs","decls","vars","consts","template","rf","ctx","FeatureDetailsDialogComponent_Conditional_0_Template","MatButtonModule","i2","MatIconModule","i3","TranslateModule","MatDialogActions","SafeHtmlPipe","i4","styles","snackBar","text","open","duration","factory","Éµfac","providedIn","FeatureNames","AppSyncWithSiteFiles","WysiwygPasteFormatted","PasteImageFromClipboard","EditUiShowNotes","EditUiShowMetadataFor","NoSponsoredByToSic","EditUiTranslateWithGoogle","LightSpeed","ContentSecurityPolicy","PermissionsByLanguage","ContentTypeFieldsReuseDefinitions","AppExportAssetsAdvanced","DataExportImportBundles","PickerUiCheckbox","PickerUiRadio","PickerSourceCsv","PickerSourceAppAssets","PickerFormulas","PickerUiMoreInfo","webApiFeatureDetails","FeatureDetailService","HttpServiceBaseSignal","getFeatureDetail","newHttpResource","url","apiUrl","params","getFeatureDetails","nameIds","featureList","signal","fetchPromise","then","update","prev","__ngFactoryType__","openDialog","icon","FeatureInfoBoxComponent","FeatureComponentBase","asInfo","features","ngContentSelectors","_c0","FeatureInfoBoxComponent_Conditional_0_Template","show","TippyDirective","FeatureInfoDialogComponent","#featureDetailSvc","dialogData","route","featureId","ngOnInit","set","snapshot","data","featureDetails","value","FeatureInfoDialogComponent_Conditional_0_Template","tmp_0_0","encapsulation","#matDialog","#viewContainerRef","#changeDetectorRef","#featuresService","featureNameId","required","showIf","inject","MatDialog","ViewContainerRef","ChangeDetectorRef","FeaturesService","getCurrent","feat","openFeatureDialog","viewContainerRef","changeDetectorRef","autoFocus","width","markForCheck"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/apps-management/licence-info/feature-details-dialog/feature-details-dialog.html","./projects/eav-ui/src/app/apps-management/licence-info/feature-details-dialog/feature-details-dialog.ts","./projects/eav-ui/src/app/shared/services/clipboard.service.ts","./projects/eav-ui/src/app/features/feature-names.ts","./projects/eav-ui/src/app/features/services/feature-detail.service.ts","./projects/eav-ui/src/app/features/feature-info-box/feature-info-box.html","./projects/eav-ui/src/app/features/feature-info-box/feature-info-box.ts","./projects/eav-ui/src/app/features/dialogs/feature-info-dialog.html","./projects/eav-ui/src/app/features/dialogs/feature-info-dialog.ts","./projects/eav-ui/src/app/features/shared/feature-component-base.ts"],"sourcesContent":["@if (feature()) {\r\n  <div class=\"eav-dialog\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">\r\n        {{ feature().name }}\r\n      </div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n    <div class=\"eav-dialog-content\">\r\n      <p [innerHtml]=\"feature().description | safeHtml\"></p>\r\n      <!-- Name ID -->\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">ID:</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <span (click)=\"clipboard.copyToClipboard(feature().nameId)\">{{ feature().nameId }}</span>\r\n        </div>\r\n      </div>\r\n      <!-- Status -->\r\n      @if (mySpecs().showStatus) {\r\n        <div class=\"eav-info-row\">\r\n          <div class=\"eav-info-row__label\">{{ 'Features.Status' | translate }}:</div>\r\n          <div class=\"eav-info-row__value\">\r\n            <span>{{ (feature().isEnabled ? 'Features.Active' : 'Features.NotActive') | translate }}</span>\r\n          </div>\r\n        </div>\r\n      }\r\n      <!-- GUID -->\r\n      @if (mySpecs().showGuid) {\r\n        <div class=\"eav-info-row\">\r\n          <div class=\"eav-info-row__label\">GUID:</div>\r\n          <div class=\"eav-info-row__value eav_click\">\r\n            <span (click)=\"clipboard.copyToClipboard(feature().guid)\">{{ feature().guid }}</span>\r\n          </div>\r\n        </div>\r\n      }\r\n      <!-- Security Rating -->\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">Security Rating:</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <span>{{ feature().security.Impact + ': ' + feature().security.Message }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\">\r\n      <a [href]=\"feature().link\" target=\"_blank\" mat-raised-button>\r\n        <mat-icon>open_in_new</mat-icon>\r\n        Find out more\r\n      </a>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}\r\n","import { Component, Inject, input, Optional } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MAT_DIALOG_DATA, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../../core/transient';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\nimport { ClipboardService } from '../../../shared/services/clipboard.service';\r\nimport { computedObj } from '../../../shared/signals/signal.utilities';\r\nimport { FeatureDetailsDialogData } from './feature-details-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-feature-details-dialog',\r\n  templateUrl: './feature-details-dialog.html',\r\n  styleUrls: ['./feature-details-dialog.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    SafeHtmlPipe,\r\n    TranslateModule,\r\n    MatDialogActions,\r\n  ]\r\n})\r\nexport class FeatureDetailsDialogComponent {\r\n  specs = input<FeatureDetailsDialogData>();\r\n\r\n  constructor(\r\n    @Optional() @Inject(MAT_DIALOG_DATA) private dialogSpecs: FeatureDetailsDialogData,\r\n    protected dialog: MatDialogRef<FeatureDetailsDialogComponent>,\r\n  ) { }\r\n\r\n  protected mySpecs = computedObj('mySpecs', () => this.specs() ?? this.dialogSpecs);\r\n  protected feature = computedObj('feature', () => this.mySpecs()?.feature);\r\n  protected clipboard = transient(ClipboardService);\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { copyToClipboard } from '../helpers/copy-to-clipboard.helper';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ClipboardService {\r\n\r\n  constructor(private snackBar: MatSnackBar) { }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n}","// This will make it easier for us to see where certain feature names are in use\r\n\r\nexport const FeatureNames = {\r\n  AppSyncWithSiteFiles: 'AppSyncWithSiteFiles',\r\n  WysiwygPasteFormatted: 'WysiwygPasteFormatted',\r\n  PasteImageFromClipboard: 'PasteImageFromClipboard',\r\n  EditUiShowNotes: 'EditUiShowNotes',\r\n  EditUiShowMetadataFor: 'EditUiShowMetadataFor',\r\n  NoSponsoredByToSic: 'NoSponsoredByToSic',\r\n  EditUiTranslateWithGoogle: 'EditUiTranslateWithGoogle',\r\n  LightSpeed: 'LightSpeedOutputCache',\r\n  ContentSecurityPolicy: 'ContentSecurityPolicy',\r\n  PermissionsByLanguage: 'PermissionsByLanguage',\r\n  ContentTypeFieldsReuseDefinitions: 'ContentTypeFieldsReuseDefinitions',\r\n  AppExportAssetsAdvanced: 'AppExportAssetsAdvanced',\r\n  DataExportImportBundles: 'DataExportImportBundles',\r\n\r\n  // Picker features\r\n  PickerUiCheckbox: 'PickerUiCheckbox',\r\n  PickerUiRadio: 'PickerUiRadio',\r\n  PickerSourceCsv: 'PickerSourceCsv',\r\n  PickerSourceAppAssets: 'PickerSourceAppAssets',\r\n  PickerFormulas: 'PickerFormulas',\r\n  PickerUiMoreInfo: 'PickerUiMoreInfo',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { Injectable, signal, Signal } from '@angular/core';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { Feature } from '../models';\r\n\r\nconst webApiFeatureDetails = \"admin/feature/details\";\r\n@Injectable()\r\nexport class FeatureDetailService extends HttpServiceBaseSignal {\r\n  \r\n  getFeatureDetail(nameId: Signal<string>) {\r\n    return this.newHttpResource<Feature>(() => ({\r\n      url: this.apiUrl(webApiFeatureDetails),\r\n      params: { nameId: nameId() },\r\n    }));\r\n  }\r\n\r\n  getFeatureDetails(nameIds: string[]): Signal<Feature[]> {\r\n    const featureList = signal<Feature[]>([]);\r\n    for (const nameId of nameIds) {\r\n\r\n      this.fetchPromise<Feature>(webApiFeatureDetails, {\r\n        params: { nameId }\r\n      }).then(feature => {\r\n        featureList.update(prev => [...prev, feature]);\r\n      });\r\n    }\r\n    return featureList;\r\n  }\r\n}\r\n","@if (show()) {\r\n  <div class=\"feature-text-info\" (click)=\"openDialog()\" [tippy]=\"'Features.Tooltip' | translate: feature()\">\r\n    <!-- Icon column -->\r\n    <mat-icon class=\"icon icon-{{icon()}}\">{{ icon() }}</mat-icon>\r\n    <!-- Text column -->\r\n    <div class=\"feature-text-info-content\">\r\n      <div class=\"feature-text-info-title\">{{ 'Features.FeatureNotActivated' | translate }}</div>\r\n      <div class=\"feature-text-info-subtitle\">{{ 'Features.ClickToFindOutMore' | translate }}</div>\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n}\r\n","import { Component, input } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { FeatureComponentBase } from '../shared/feature-component-base';\r\n\r\n@Component({\r\n  selector: 'app-feature-info-box',\r\n  templateUrl: './feature-info-box.html',\r\n  styleUrls: ['./feature-info-box.scss'],\r\n  imports: [\r\n    MatIconModule,\r\n    TranslateModule,\r\n    TippyDirective,\r\n  ]\r\n})\r\nexport class FeatureInfoBoxComponent extends FeatureComponentBase {\r\n\r\n  /**\r\n   * Just indicate that this is an info, not a warning - so it can be styled differently if needed.\r\n   */\r\n  asInfo = input<boolean>(false);\r\n\r\n  /**\r\n   * Change the icon based on if this is info or warning, so it can be styled differently if needed.\r\n   */\r\n  icon = computedObj('icon', () => this.asInfo() ? 'info' : 'warning');\r\n}\r\n","@if (featureDetails(); as feature) {\r\n  <app-feature-details-dialog [specs]=\"{ feature: feature, showGuid: false, showStatus: true, showClose: true }\"></app-feature-details-dialog>\r\n}\r\n","import { Component, Inject, OnInit, signal } from \"@angular/core\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from \"@angular/material/dialog\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { transient } from \"projects/core\";\r\nimport { FeatureDetailsDialogComponent } from \"../../apps-management/licence-info/feature-details-dialog/feature-details-dialog\";\r\nimport { ClipboardService } from \"../../shared/services/clipboard.service\";\r\nimport { FeatureDetailService } from \"../services/feature-detail.service\";\r\n\r\n@Component({\r\n    selector: 'app-feature-info-dialog',\r\n    templateUrl: './feature-info-dialog.html',\r\n    imports: [\r\n        FeatureDetailsDialogComponent\r\n    ]\r\n})\r\nexport class FeatureInfoDialogComponent implements OnInit {\r\n  #featureDetailSvc = transient(FeatureDetailService);\r\n  featureId = signal<string>('');\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: string,\r\n    protected dialog: MatDialogRef<FeatureInfoDialogComponent>,\r\n    private route: ActivatedRoute,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.featureId.set(this.route.snapshot.data['featureId'] || this.dialogData || '');\r\n    this.featureDetails = this.#featureDetailSvc.getFeatureDetail(this.featureId).value;\r\n  }\r\n\r\n  protected featureDetails: any;\r\n  protected clipboard = transient(ClipboardService);\r\n}\r\n","import { ChangeDetectorRef, Directive, ViewContainerRef, inject, input } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { FeatureInfoDialogComponent } from '../dialogs/feature-info-dialog';\r\nimport { FeaturesService } from '../features.service';\r\n\r\n/**\r\n * Base **component** for various UI components which inform that a feature is not enabled.\r\n * It's meant to show the indicator/warning, and open a dialog with more information about the feature.\r\n */\r\n@Directive()  // actually a component, not really a directive, but this is necessary so that it works as a base class for components with their own templates.\r\nexport class FeatureComponentBase {\r\n\r\n  /** Feature NameId to check */\r\n  featureNameId = input.required<string>();\r\n\r\n  /** When to show it - typically when it is _not_ enabled (default) */\r\n  showIf = input<boolean>(false);\r\n\r\n  #matDialog = inject(MatDialog);\r\n  #viewContainerRef = inject(ViewContainerRef);\r\n  #changeDetectorRef = inject(ChangeDetectorRef);\r\n  #featuresService = inject(FeaturesService);\r\n\r\n  constructor() { }\r\n\r\n  feature = computedObj('feature', () => this.#featuresService.getCurrent(this.featureNameId()));\r\n\r\n  show = computedObj('show', () => {\r\n    const feat = this.feature();\r\n    if (feat == null)\r\n      return false;\r\n    return this.showIf() == (feat?.isEnabled ?? false);\r\n  })\r\n\r\n  openDialog() {\r\n    openFeatureDialog(this.#matDialog, this.featureNameId(), this.#viewContainerRef, this.#changeDetectorRef);\r\n  }\r\n}\r\n\r\nexport function openFeatureDialog(dialog: MatDialog, featureId: string, viewContainerRef: ViewContainerRef, changeDetectorRef: ChangeDetectorRef) {\r\n  dialog.open(FeatureInfoDialogComponent, {\r\n    autoFocus: false,\r\n    data: featureId,\r\n    viewContainerRef: viewContainerRef,\r\n    width: '400px',\r\n  });\r\n\r\n  changeDetectorRef?.markForCheck();\r\n}\r\n"],"x_google_ignoreList":[]}