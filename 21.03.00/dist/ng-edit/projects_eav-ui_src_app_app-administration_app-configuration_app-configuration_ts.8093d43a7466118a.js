"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_app-configuration_app-configuration_ts"],{16256($,x,o){o.d(x,{Y:()=>G,k:()=>j});var E=o(72102),l=o(5642),b=o(26306),h=o(56884),C=o(36124),S=o(37580),d=o(59504),T=o(66329),M=o(87432),D=o(63680);const y="mat-badge-content";let k=(()=>{class g{static \u0275fac=function(a){return new(a||g)};static \u0275cmp=C.VBU({type:g,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,v){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}\n"],encapsulation:2,changeDetection:0})}return g})(),j=(()=>{class g{_ngZone=(0,h.WQX)(h.SKi);_elementRef=(0,h.WQX)(C.aKT);_ariaDescriber=(0,h.WQX)(E.vr);_renderer=(0,h.WQX)(C.sFG);_animationsDisabled=(0,M.Rc)();_idGenerator=(0,h.WQX)(b.g);get color(){return this._color}set color(c){this._setColor(c),this._color=c}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(c){this._updateRenderedContent(c)}_content;get description(){return this._description}set description(c){this._updateDescription(c)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=(0,h.WQX)(l.Z7);_document=(0,h.WQX)(h.qQL);constructor(){const c=(0,h.WQX)(d.l);c.load(k),c.load(T.Y)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){const c=this._renderer.createElement("span"),a="mat-badge-active";return c.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),c.setAttribute("aria-hidden","true"),c.classList.add(y),this._animationsDisabled&&c.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(c),"function"!=typeof requestAnimationFrame||this._animationsDisabled?c.classList.add(a):this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{c.classList.add(a)})}),c}_updateRenderedContent(c){const a=`${c??""}`.trim();this._isInitialized&&a&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=a),this._content=a}_updateDescription(c){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!c||this._isHostInteractive())&&this._removeInlineDescription(),this._description=c,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,c):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(c){const a=this._elementRef.nativeElement.classList;a.remove(`mat-badge-${this._color}`),c&&a.add(`mat-badge-${c}`)}_clearExistingBadges(){const c=this._elementRef.nativeElement.querySelectorAll(`:scope > .${y}`);for(const a of Array.from(c))a!==this._badgeElement&&a.remove()}static \u0275fac=function(a){return new(a||g)};static \u0275dir=C.FsC({type:g,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(a,v){2&a&&C.AVh("mat-badge-overlap",v.overlap)("mat-badge-above",v.isAbove())("mat-badge-below",!v.isAbove())("mat-badge-before",!v.isAfter())("mat-badge-after",v.isAfter())("mat-badge-small","small"===v.size)("mat-badge-medium","medium"===v.size)("mat-badge-large","large"===v.size)("mat-badge-hidden",v.hidden||!v.content)("mat-badge-disabled",v.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",S.L39],disabled:[2,"matBadgeDisabled","disabled",S.L39],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",S.L39]}})}return g})(),G=(()=>{class g{static \u0275fac=function(a){return new(a||g)};static \u0275mod=C.$C({type:g});static \u0275inj=h.G2t({imports:[l.Pd,D.jI]})}return g})()},25796($,x,o){o.d(x,{AppConfiguration:()=>Ct});var E=o(79748),l=o(56884),b=o(36664),h=o(49074),C=o(16256),S=o(84175),d=o(53777),T=o(93840),M=o(69393),D=o(84205),y=o(12938),k=o(97360),j=o(336),G=o(66184),g=o(28136),Y=o(9001),c=o(72437),a=o(50052),v=o(59339),O=o(34601),B=o(92324),I=o(46666),F=o(30056),N=o(71693),L=o(60852),z=o(68873),U=o(58713),V=o(46443),X=o(24467),t=o(36124);let w=(()=>{class s extends X.B{getAppInternalsLive(e){return(0,V.fx)(()=>(e(),{url:this.apiUrl("admin/appinternals/get"),params:{appid:this.appId}}))}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(s)))(i||s)}})()}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac})}}return s})();var H=o(17693),K=o(64699);const Q={Settings:"Settings",Resources:"Resources"};var P=o(37580),J=o(93454),Z=o(25081),q=o(3347);function tt(s,m){if(1&s){const e=t.RV6();t.j41(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),t.EFF(3,"Configuration"),t.k0s(),t.j41(4,"mat-icon"),t.EFF(5,"redeem"),t.k0s()(),t.j41(6,"mat-card-content"),t.nrm(7,"p"),t.j41(8,"div",2)(9,"div",3),t.EFF(10,"Name:"),t.k0s(),t.j41(11,"div",4)(12,"span",5),t.bIt("click",function(){l.eBV(e);const i=t.XpG();return l.Njj(i.clipboard.copyToClipboard(i.contentItem()[0].DisplayName))}),t.EFF(13),t.k0s()()(),t.j41(14,"div",2)(15,"div",3),t.EFF(16,"Folder:"),t.k0s(),t.j41(17,"div",4)(18,"span",5),t.bIt("click",function(){l.eBV(e);const i=t.XpG();return l.Njj(i.clipboard.copyToClipboard(i.contentItem()[0].Folder))}),t.EFF(19),t.k0s()()(),t.j41(20,"div",2)(21,"div",3),t.EFF(22,"Version:"),t.k0s(),t.j41(23,"div",4)(24,"span",5),t.bIt("click",function(){l.eBV(e);const i=t.XpG();return l.Njj(i.clipboard.copyToClipboard(i.contentItem()[0].Version))}),t.EFF(25),t.k0s()()(),t.j41(26,"div",2)(27,"div",3),t.EFF(28,"For"),t.k0s(),t.j41(29,"div",4)(30,"b"),t.EFF(31,"2sxc: "),t.k0s(),t.j41(32,"span",5),t.bIt("click",function(){l.eBV(e);const i=t.XpG();return l.Njj(i.clipboard.copyToClipboard(i.contentItem()[0].RequiredVersion))}),t.EFF(33),t.k0s(),t.j41(34,"b"),t.EFF(35," DNN: "),t.k0s(),t.j41(36,"span",5),t.bIt("click",function(){l.eBV(e);const i=t.XpG();return l.Njj(i.clipboard.copyToClipboard(i.contentItem()[0].RequiredDnnVersion))}),t.EFF(37),t.k0s(),t.j41(38,"b"),t.EFF(39," Oqt: "),t.k0s(),t.j41(40,"span",5),t.bIt("click",function(){l.eBV(e);const i=t.XpG();return l.Njj(i.clipboard.copyToClipboard(i.contentItem()[0].RequiredOqtaneVersion))}),t.EFF(41),t.k0s()()()(),t.nrm(42,"div",6),t.j41(43,"mat-card-actions",7),t.nrm(44,"app-docs-link-helper",8),t.j41(45,"a",9)(46,"mat-icon",10),t.EFF(47,"edit"),t.k0s(),t.j41(48,"span"),t.EFF(49,"Edit"),t.k0s()(),t.j41(50,"a",11)(51,"mat-icon",10),t.EFF(52,"local_offer"),t.k0s(),t.j41(53,"span"),t.EFF(54,"Metadata"),t.k0s()()()()}if(2&s){let e,n,i,r,_,p,f,A;const u=t.XpG();t.R7$(12),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(u.formatValue(null==(e=u.contentItem()[0])?null:e.DisplayName)),t.R7$(5),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(u.formatValue(null==(n=u.contentItem()[0])?null:n.Folder)),t.R7$(5),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(u.formatValue(null==(i=u.contentItem()[0])?null:i.Version)),t.R7$(7),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",u.formatValue(null==(r=u.contentItem()[0])?null:r.RequiredVersion)," "),t.R7$(3),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",u.formatValue(null==(_=u.contentItem()[0])?null:_.RequiredDnnVersion)," "),t.R7$(3),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",u.formatValue(null==(p=u.contentItem()[0])?null:p.RequiredOqtaneVersion)," "),t.R7$(3),t.Y8G("link","https://docs.2sxc.org/basics/app/configuration.html"),t.R7$(),t.Y8G("href",u.appConfigurationUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(f=u.appSettingsInternal())||null==f.EntityLists?null:f.EntityLists.ToSxcContentApp.length)||null),t.R7$(4),t.Y8G("href",u.urlToOpenMetadata(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(A=u.appSettingsInternal())?null:A.MetadataList.Items.length)||null)}}let et=(()=>{class s{#e;#i;constructor(e,n){this.context=e,this.snackBar=n,this.dialogSettings=P.hFB.required(),this.appSettingsInternal=P.hFB.required(),this.refresh=P.hFB.required(),this.#e=(0,y.d)(j.F),this.#i=(0,y.d)(L.c),this.appConfigurationUrl=(0,l.vPA)(""),this.appConfigAvailable=(0,l.vPA)(!1),this.contentItem=this.#e.getAllLive(a.YX.contentTypes.appConfiguration,this.refresh).value,this.clipboard=(0,y.d)(Z.W),this.appConfigurationUrl=this.urlToEdit()}ngOnDestroy(){this.snackBar.dismiss()}#n(e,n,i){let r="#"+this.#i.urlSubRoute(e);return n&&(r+=`?${new URLSearchParams(n).toString()}`),i&&(r+=`&errComponent=${i}`),r}urlToEdit(){let e=(0,l.vPA)("");return this.#e.getAllPromise(a.YX.contentTypes.appConfiguration).then(n=>{if(1!==n.length)return e.set(this.#n("message/e",{error:"AppAdmin.ErrorTooManyAppSettings",errComponent:"App-Specifications",openUrl:"/data/System.App"})),e;this.appConfigAvailable.set(!0),e.set(this.#n(`edit/${(0,B.s)({items:[F.H.editId(n[0].Id)]})}`))}),e}urlToOpenMetadata(){return this.#n(J.H.getUrlApp(this.context.appId,`Metadata for App: ${this.dialogSettings().Context.App.Name} (${this.context.appId})`))}formatValue(e){return""===e?"-":e??"-"}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(z.o),t.rXU(q.UG))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-app-configuration-card"]],inputs:{dialogSettings:[1,"dialogSettings"],appSettingsInternal:[1,"appSettingsInternal"],refresh:[1,"refresh"]},decls:1,vars:1,consts:[[1,"eav-card"],[1,"eav-card-header"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],[3,"click","tippy"],[1,"eav-card-space-div"],["align","start"],[3,"link","label","icon"],["mat-button","","tippy","Edit app system resources",1,"eav-button__with-icon",3,"href"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadge"],["mat-button","",1,"eav-button__with-icon",3,"href"]],template:function(n,i){1&n&&t.nVh(0,tt,55,17,"mat-card",0),2&n&&t.vxM(i.contentItem()?0:-1)},dependencies:[d.Hu,d.RN,d.YY,d.m2,d.MM,d.dh,T.m_,T.An,S.Hl,S.$z,C.Y,C.k,O.e,k.u],styles:[".eav-card-space-div[_ngcontent-%COMP%]{min-height:30px}.eav-button__with-icon[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#85283b!important}"]})}}return s})();var nt=o(55326);function it(s,m){1&s&&t.EFF(0," This is the Global App. Anything configured here will affect all Sites and Apps in this installation. ")}function st(s,m){1&s&&t.EFF(0," This is the Primary App of this Site. You can also configure site wide settings and resources here. ")}function at(s,m){if(1&s&&(t.j41(0,"div",2),t.nVh(1,it,1,0),t.nVh(2,st,1,0),t.EFF(3," See "),t.j41(4,"a",6),t.EFF(5,"docs"),t.k0s(),t.EFF(6,". "),t.k0s()),2&s){const e=t.XpG(2);t.R7$(),t.vxM(e.isGlobal()?1:-1),t.R7$(),t.vxM(e.isSite()?2:-1)}}function ot(s,m){1&s&&t.eu8(0)}function rt(s,m){if(1&s&&t.DNE(0,ot,1,0,"ng-container",23),2&s){t.XpG();const e=t.sdS(91);t.Y8G("ngTemplateOutlet",e)}}function lt(s,m){1&s&&t.eu8(0)}function ct(s,m){1&s&&t.eu8(0)}function dt(s,m){if(1&s&&t.DNE(0,lt,1,0,"ng-container",23)(1,ct,1,0,"ng-container",23),2&s){t.XpG();const e=t.sdS(91),n=t.sdS(93);t.Y8G("ngTemplateOutlet",n),t.R7$(),t.Y8G("ngTemplateOutlet",e)}}function pt(s,m){1&s&&t.eu8(0)}function gt(s,m){if(1&s&&t.DNE(0,pt,1,0,"ng-container",23),2&s){t.XpG();const e=t.sdS(91);t.Y8G("ngTemplateOutlet",e)}}function ut(s,m){1&s&&t.eu8(0)}function mt(s,m){1&s&&t.eu8(0)}function ht(s,m){if(1&s&&t.DNE(0,ut,1,0,"ng-container",23)(1,mt,1,0,"ng-container",23),2&s){t.XpG();const e=t.sdS(91),n=t.sdS(93);t.Y8G("ngTemplateOutlet",n),t.R7$(),t.Y8G("ngTemplateOutlet",e)}}function ft(s,m){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Global"),t.k0s(),t.j41(3,"td")(4,"button",24),t.bIt("click",function(){l.eBV(e);const i=t.XpG(2);return l.Njj(i.openGlobalSettings())}),t.j41(5,"mat-icon"),t.EFF(6,"open_in_new"),t.k0s()()()()}}function _t(s,m){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Site"),t.k0s(),t.j41(3,"td")(4,"button",25),t.bIt("click",function(){l.eBV(e);const i=t.XpG(2);return l.Njj(i.openSiteSettings())}),t.j41(5,"mat-icon"),t.EFF(6,"open_in_new"),t.k0s()()()()}}function bt(s,m){1&s&&t.EFF(0," (not on Global App) ")}function vt(s,m){1&s&&t.EFF(0," (not on Content) ")}function St(s,m){if(1&s&&(t.nVh(0,bt,1,0),t.nVh(1,vt,1,0)),2&s){const e=t.XpG(2);t.vxM(e.isGlobal()?0:-1),t.R7$(),t.vxM(e.isApp()?1:-1)}}function yt(s,m){if(1&s){const e=t.RV6();t.nVh(0,at,7,2,"div",2),t.j41(1,"div",3)(2,"mat-card",4)(3,"mat-card-header",5)(4,"mat-card-title"),t.EFF(5,"Settings"),t.k0s(),t.j41(6,"mat-icon"),t.EFF(7,"settings"),t.k0s()(),t.j41(8,"mat-card-content")(9,"p"),t.EFF(10,' Settings are things like SQL-connection strings, default "items-to-show" numbers and similar. If necessary, settings like a link to an RSS-Feed could be different in each language. '),t.j41(11,"a",6),t.EFF(12,"docs"),t.k0s()(),t.j41(13,"table",7)(14,"thead")(15,"tr"),t.nrm(16,"th"),t.j41(17,"th"),t.EFF(18,"System Settings"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Custom Settings"),t.k0s()()(),t.j41(21,"tbody")(22,"tr")(23,"th"),t.EFF(24),t.k0s(),t.j41(25,"td")(26,"a",8)(27,"mat-icon",9),t.EFF(28,"edit"),t.k0s()()(),t.j41(29,"td")(30,"a",10),t.bIt("click",function(i){l.eBV(e);const r=t.XpG();return l.Njj(r.fixContentTypeIfNecessary(r.buttons().customSettings.url,r.buttons().customSettingsType,i))}),t.j41(31,"mat-icon",9),t.EFF(32,"edit"),t.k0s()(),t.j41(33,"a",10),t.bIt("click",function(i){l.eBV(e);const r=t.XpG();return l.Njj(r.fixContentTypeIfNecessary(r.buttons().customSettings.url,r.buttons().customSettingsType,i))}),t.j41(34,"mat-icon",9),t.EFF(35,"dns"),t.k0s()()()(),t.nVh(36,rt,1,1,"ng-container")(37,dt,2,2),t.k0s()()(),t.nrm(38,"div",11),t.j41(39,"mat-card-actions",12),t.nrm(40,"app-docs-link-helper",13),t.j41(41,"a",14)(42,"mat-icon",15),t.EFF(43,"manage_search"),t.k0s(),t.j41(44,"span"),t.EFF(45,"Analyze Combined Settings"),t.k0s()()()(),t.j41(46,"mat-card",4)(47,"mat-card-header",5)(48,"mat-card-title"),t.EFF(49,"Language Resources (i18n)"),t.k0s(),t.j41(50,"mat-icon"),t.EFF(51,"translate"),t.k0s()(),t.j41(52,"mat-card-content")(53,"p"),t.EFF(54," Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual views and such, and should not be used for App-Settings. "),t.j41(55,"a",6),t.EFF(56,"docs"),t.k0s()(),t.j41(57,"table",7)(58,"thead")(59,"tr"),t.nrm(60,"th"),t.j41(61,"th"),t.EFF(62,"System Resources"),t.k0s(),t.j41(63,"th"),t.EFF(64,"Custom Resources"),t.k0s()()(),t.j41(65,"tbody")(66,"tr")(67,"th"),t.EFF(68),t.k0s(),t.j41(69,"td")(70,"a",8)(71,"mat-icon",9),t.EFF(72,"edit"),t.k0s()()(),t.j41(73,"td")(74,"a",10),t.bIt("click",function(i){l.eBV(e);const r=t.XpG();return l.Njj(r.fixContentTypeIfNecessary(r.buttons().customResources.url,r.buttons().customResourcesType,i))}),t.j41(75,"mat-icon",9),t.EFF(76,"edit"),t.k0s()(),t.j41(77,"a",10),t.bIt("click",function(i){l.eBV(e);const r=t.XpG();return l.Njj(r.fixContentTypeIfNecessary(r.buttons().customResources.url,r.buttons().customResourcesType,i))}),t.j41(78,"mat-icon",9),t.EFF(79,"dns"),t.k0s()()()(),t.nVh(80,gt,1,1,"ng-container")(81,ht,2,2),t.k0s()()(),t.nrm(82,"div",11),t.j41(83,"mat-card-actions",12),t.nrm(84,"app-docs-link-helper",13),t.j41(85,"a",16)(86,"mat-icon",15),t.EFF(87,"manage_search"),t.k0s(),t.j41(88,"span"),t.EFF(89,"Analyze Combined Resources"),t.k0s()()()(),t.DNE(90,ft,7,0,"ng-template",null,0,t.C5r)(92,_t,7,0,"ng-template",null,1,t.C5r),t.k0s(),t.j41(94,"div",3),t.nrm(95,"app-app-configuration-card",17),t.j41(96,"mat-card",4)(97,"mat-card-header",5)(98,"mat-card-title"),t.EFF(99,"Performance"),t.k0s(),t.j41(100,"mat-icon"),t.EFF(101,"bolt"),t.k0s()(),t.j41(102,"mat-card-content")(103,"p"),t.EFF(104,"LightSpeed Output Cache to speed up page by 50-90%"),t.k0s(),t.nrm(105,"app-feature-info-box",18),t.k0s(),t.nrm(106,"div",11),t.j41(107,"mat-card-actions",12),t.nrm(108,"app-docs-link-helper",13),t.j41(109,"a",19)(110,"mat-icon",20),t.EFF(111,"bolt"),t.k0s(),t.j41(112,"span"),t.EFF(113,"Edit LightSpeed"),t.k0s()()()(),t.j41(114,"mat-card",4)(115,"mat-card-header",5)(116,"mat-card-title"),t.EFF(117,"Security"),t.k0s(),t.j41(118,"mat-icon"),t.EFF(119,"local_police"),t.k0s()(),t.j41(120,"mat-card-content")(121,"p"),t.EFF(122,"ContentSecurityPolicy (CSP) features in this App - for maximum control."),t.k0s(),t.nrm(123,"app-feature-info-box",18),t.k0s(),t.nrm(124,"div",11),t.j41(125,"mat-card-actions",12),t.nrm(126,"app-docs-link-helper",13),t.k0s()(),t.j41(127,"mat-card",4)(128,"mat-card-header",5)(129,"mat-card-title"),t.EFF(130,"Permissions"),t.k0s(),t.j41(131,"mat-icon"),t.EFF(132,"person"),t.k0s()(),t.j41(133,"mat-card-content")(134,"p"),t.EFF(135,"Give access to the entire app (all data). Use with care."),t.k0s()(),t.nrm(136,"div",11),t.j41(137,"mat-card-actions",12),t.nrm(138,"app-docs-link-helper",13),t.j41(139,"a",19)(140,"mat-icon",20),t.EFF(141,"person"),t.k0s(),t.j41(142,"span"),t.EFF(143," Edit Permissions "),t.nVh(144,St,2,2),t.k0s()(),t.nrm(145,"app-docs-link-helper",13),t.j41(146,"a",21)(147,"mat-icon",22),t.EFF(148," person "),t.k0s(),t.j41(149,"span"),t.EFF(150,"Language Permissions"),t.k0s()()()()()}if(2&s){const e=t.XpG();t.vxM(e.isGlobal()||e.isSite()?0:-1),t.R7$(24),t.JRh(e.buttons().topRowLabel),t.R7$(2),t.Y8G("href",e.buttons().systemSettings.url,t.B4B)("tippy",e.buttons().systemSettings.tooltip),t.R7$(),t.Y8G("matBadge",e.buttons().systemSettings.count),t.R7$(3),t.Y8G("href",e.buttons().customSettings.url,t.B4B)("tippy",e.buttons().customSettings.tooltip),t.R7$(),t.Y8G("matBadge",e.buttons().customSettings.count),t.R7$(2),t.Y8G("href",e.buttons().customSettingsFields.url,t.B4B)("tippy",e.buttons().customSettingsFields.tooltip),t.R7$(),t.Y8G("matBadge",e.buttons().customSettingsFields.count),t.R7$(2),t.vxM(e.isSite()?36:e.isApp()?37:-1),t.R7$(4),t.Y8G("link","https://go.2sxc.org/settings"),t.R7$(),t.Y8G("href",e.urlToAnalyze(e.AnalyzeParts.Settings),t.B4B),t.R7$(27),t.JRh(e.buttons().topRowLabel),t.R7$(2),t.Y8G("href",e.buttons().systemResources.url,t.B4B)("tippy",e.buttons().systemResources.tooltip),t.R7$(),t.Y8G("matBadge",e.buttons().systemResources.count),t.R7$(3),t.Y8G("href",e.buttons().customResources.url,t.B4B)("tippy",e.buttons().customResources.tooltip),t.R7$(),t.Y8G("matBadge",e.buttons().customResources.count),t.R7$(2),t.Y8G("href",e.buttons().customResourcesFields.url,t.B4B)("tippy",e.buttons().customResourcesFields.tooltip),t.R7$(),t.Y8G("matBadge",e.buttons().customResourcesFields.count),t.R7$(2),t.vxM(e.isSite()?80:e.isApp()?81:-1),t.R7$(4),t.Y8G("link","https://go.2sxc.org/settings"),t.R7$(),t.Y8G("href",e.urlToAnalyze(e.AnalyzeParts.Resources),t.B4B),t.R7$(10),t.Y8G("dialogSettings",e.dialogSettings())("appSettingsInternal",e.appSpecsLazy())("refresh",e.refresh()),t.R7$(10),t.Y8G("featureNameId",e.LightSpeedOutputCache)("asInfo",!0),t.R7$(3),t.Y8G("link","https://go.2sxc.org/lightspeed"),t.R7$(),t.Y8G("disabled",t.mNQ(!e.lightSpeedEnabled()))("href",e.buttons().lightspeed.url,t.B4B),t.R7$(),t.Y8G("matBadge",e.buttons().lightspeed.count),t.R7$(13),t.Y8G("featureNameId",e.ContentSecurityPolicy)("asInfo",!0),t.R7$(3),t.Y8G("link","https://go.2sxc.org/csp"),t.R7$(12),t.Y8G("link","https://docs.2sxc.org/basics/app/permissions.html"),t.R7$(),t.Y8G("href",e.urlToOpenPermissions(),t.B4B)("disabled",!e.dialogSettings().Context.Enable.AppPermissions),t.R7$(),t.Y8G("matBadge",e.dialogSettings().Context.App.Permissions.Count||null),t.R7$(4),t.vxM(e.dialogSettings().Context.Enable.AppPermissions?-1:144),t.R7$(),t.Y8G("link","https://patrons.2sxc.org/features/feat/PermissionsByLanguage"),t.R7$(),t.Y8G("href",e.urlToOpenLanguagePermissions(e.langPermsEnabled()),t.B4B),t.R7$(),t.Y8G("matBadgeHidden",e.langPermsEnabled())}}let Ct=(()=>{class s{#e;#i;#n;#r;#s;#l;#o;constructor(e){this.context=e,this.#e=(0,l.WQX)(Y.D),this.#i=(0,y.d)(N.d),this.#n=(0,y.d)(H.g),this.#r=(0,y.d)(w),this.#s=(0,y.d)(j.F),this.#l=(0,y.d)(K.L),this.#o=(0,y.d)(L.c),this.eavConstants=a.YX,this.AnalyzeParts=Q,this.SystemSettingsScopes=a.Sq,this.AppScopes=I.F,this.LightSpeedOutputCache=g.T.LightSpeed,this.ContentSecurityPolicy=g.T.ContentSecurityPolicy,this.dialogSettings=(0,h.ot)(this.#l.getCurrent$()),this.#a=(0,b.EW)(()=>this.dialogSettings()?.Context.App.SettingsScope),this.isGlobal=(0,b.EW)(()=>{const n=this.#a();return null==n?null:n===I.F.Global}),this.isSite=(0,b.EW)(()=>{const n=this.#a();return null==n?null:n===I.F.Site}),this.isApp=(0,b.EW)(()=>{const n=this.#a();return null==n?null:n===I.F.App}),this.appSystemSettingsUrl=(0,b.EW)(()=>{const n=this.isGlobal(),i=this.isSite();return null==n||null==i?null:(this.#c??=this.urlToEditSystem(a.YX.contentTypes.systemSettings,n?a.Sq.App:i?a.Sq.Site:a.Sq.App),this.#c())}),this.appSystemResourcesUrl=(0,b.EW)(()=>{const n=this.isGlobal(),i=this.isSite();return null==n||null==i?null:(this.#d??=this.urlToEditSystem(a.YX.contentTypes.systemResources,n?a.Sq.App:i?a.Sq.Site:a.Sq.App),this.#d())}),this.appCustomSettingsUrl=(0,b.EW)(()=>{const n=this.isGlobal(),i=this.isSite();return null==n||null==i?null:(this.#p??=this.urlToEditSystem(n||i?a.YX.contentTypes.customSettings:a.YX.contentTypes.settings,n?a.Sq.App:i?a.Sq.Site:a.Sq.App),this.#p())}),this.appCustomResourcesUrl=(0,b.EW)(()=>{const n=this.isGlobal(),i=this.isSite();return null==n||null==i?null:(this.#g??=this.urlToEditSystem(n||i?a.YX.contentTypes.customResources:a.YX.contentTypes.resources,n?a.Sq.App:i?a.Sq.Site:a.Sq.App),this.#g())}),this.appSettingsInternal$=new D.B,this.appStateAdvanced=!1,this.lightSpeedEnabled=this.#e.isEnabled[g.T.LightSpeed],this.cspEnabled=this.#e.isEnabled[g.T.ContentSecurityPolicy],this.langPermsEnabled=this.#e.isEnabled[g.T.PermissionsByLanguage],this.refresh=(0,l.vPA)(0),this.appSpecsLazy=this.#r.getAppInternalsLive(this.refresh).value,this.#u=(0,b.EW)(()=>{const n=this.appSpecsLazy();if(!n)return null;const i=n?.EntityLists,r=a.YX.appMetadata.LightSpeed.ContentTypeName,_=this.isSite();return{appLightSpeedCount:n.MetadataList.Items.filter(f=>f._Type.Name===r).length,systemSettingsCount:_?i.SettingsSystem.filter(f=>f.SettingsEntityScope===a.Sq.Site).length:i.SettingsSystem.filter(f=>!f.SettingsEntityScope).length,customSettingsCount:i.AppSettings?.length,customSettingsFieldsCount:n.FieldAll.AppSettings?.length,systemResourcesCount:_?i.ResourcesSystem.filter(f=>f.SettingsEntityScope===a.Sq.Site).length:i.ResourcesSystem.filter(f=>!f.SettingsEntityScope).length,customResourcesCount:i.AppResources?.length,customResourcesFieldsCount:n?.FieldAll.AppResources?.length}}),this.#m=(0,b.EW)(()=>{const n=this.appSpecsLazy();return n?{settings:null!=n.FieldAll.AppSettings,resources:null!=n.FieldAll.AppResources}:{settings:!1,resources:!1}}),this.buttons=(0,b.EW)(()=>{if(null==this.dialogSettings()){const R={tooltip:"",url:"",count:null};return{topRowLabel:"loading...",customSettingsType:"",customResourcesType:"",systemSettings:R,customSettings:R,customSettingsFields:R,systemResources:R,customResources:R,customResourcesFields:R,lightspeed:R}}const i=!!this.isApp(),r=this.dialogSettings().Context.App.SettingsScope,_=this.#u(),p=a.YX.contentTypes,f=i?p.settings:p.customSettings,A=i?p.resources:p.customResources,u=this.#m();return{topRowLabel:r,customSettingsType:f,customResourcesType:A,systemSettings:{tooltip:`Edit ${r} system settings`,url:this.appSystemSettingsUrl(),count:_?.systemSettingsCount||null},customSettings:{tooltip:`Edit ${r} custom settings`,url:u.settings?this.appCustomSettingsUrl():null,count:_?.customSettingsCount||null},customSettingsFields:{tooltip:`Configure fields of the custom ${r} settings`,url:u.settings?this.urlToConfig(f):null,count:_?.customSettingsFieldsCount||null},systemResources:{tooltip:`Edit ${r} system resources`,url:this.appSystemResourcesUrl(),count:_?.systemResourcesCount||null},customResources:{tooltip:`Edit ${r} custom resources`,url:u.resources?this.appCustomResourcesUrl():null,count:_?.customResourcesCount||null},customResourcesFields:{tooltip:`Edit ${r} custom resources fields`,url:this.urlToConfig(A),count:_?.customResourcesFieldsCount||null},lightspeed:{tooltip:`Edit ${r} LightSpeed`,url:this.urlToGetLightSpeedLink(),count:_?.appLightSpeedCount||null}}})}#a;#c;#d;#p;#g;#u;#m;ngOnInit(){this.#o.doOnDialogClosed(()=>{this.refresh.update(e=>++e)})}#t(e,n,i){let r="#"+this.#o.urlSubRoute(e);return n&&(r+=`?${new URLSearchParams(n).toString()}`),i&&(r+=`&errComponent=${i}`),r}urlToEditSystem(e,n){const i=(0,l.vPA)("");return this.#s.getAllPromise(e).then(r=>{const _=r.filter(p=>n===a.Sq.App?!p.SettingsEntityScope:p.SettingsEntityScope===a.Sq.Site);if(_.length>1)i.set(this.#t("message/e",{error:"AppAdmin.ErrorTooManyAppSettings",openUrl:"/data/System.App"},e));else{const p=_[0];i.set(this.#t(`edit/${(0,B.s)({items:[null==p?F.H.newFromType(e,{...n===a.Sq.Site&&{SettingsEntityScope:a.Sq.Site}}):F.H.editId(p.Id)]})}`))}}),i}urlToEditCustom(e){const n=(0,l.vPA)("");return this.#s.getAllPromise(e).then(i=>{if(i.length>1)n.set(this.#t("message/e",{error:"AppAdmin.ErrorTooManyAppSettings",openUrl:"/data/System.App"},e));else{const r=i[0];n.set(this.#t(`edit/${(0,B.s)({items:[null==r?F.H.newFromType(e):F.H.editId(r.Id)]})}`))}}),n}urlToEditDefault(e){const n=(0,l.vPA)("");return this.#s.getAllPromise(e).then(i=>{n.set(i.length<1?this.#t("message/e",{error:"AppAdmin.ErrorNoAppSettings",openUrl:"/data/System.App"},e):i.length>1?this.#t("message/e",{error:"AppAdmin.ErrorTooManyAppSettings",openUrl:"/data/System.App"},e):this.#t(`edit/${(0,B.s)({items:[F.H.editId(i[0].Id)]})}`))}),n}urlToGetLightSpeedLink(){return this.#t(`edit/${(0,B.s)(U.g.getLightSpeedEditParams(this.context.appId))}`)}openSiteSettings(){const e=this.dialogSettings().Context.Site.PrimaryApp;this.#i.openAppAdministration(e.ZoneId,e.AppId,"app")}openGlobalSettings(){const e=this.dialogSettings().Context.System.PrimaryApp;this.#i.openAppAdministration(e.ZoneId,e.AppId,"app")}urlToConfig(e){return this.#t(`fields/${e}`)}urlToOpenPermissions(){return this.#t(c.k.getUrlApp(this.context.appId))}urlToOpenLanguagePermissions(e){return e?this.#t("language-permissions"):this.#t("edit-language-permissions")}urlToAnalyze(e){return this.#t(`analyze/${e}`)}fixContentTypeIfNecessary(e,n,i){e||(i.preventDefault(),i.stopPropagation(),this.#n.retrieveContentTypesPromise(a.YX.scopes.configuration.value).then(r=>{if(r.some(p=>p.Name===n)){const p=this.#t(`edit/${(0,B.s)({items:[F.H.newFromType(n)]})}`);return p?void window.open(p,"_self"):void 0}return this.#n.save({StaticName:"",Name:n,Description:"",Scope:a.YX.scopes.configuration.value,ChangeNameId:!1,NewNameId:""}).subscribe(f=>{f&&(this.refresh.update(A=>++A),alert("Created a new Content Type. Please try again \u{1f44d}\u{1f3fc}."))}),!1}))}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(z.o))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-app-configuration"]],decls:2,vars:1,consts:[["goToGlobal",""],["goToSite",""],[1,"alert","alert-info","scope-info"],[1,"eav-cards-box"],[1,"eav-card"],[1,"eav-card-header"],["href","https://go.2sxc.org/settings","target","_blank"],[1,"eav-settings-and-resources-table"],["mat-icon-button","",3,"href","tippy"],["matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge"],["mat-icon-button","",3,"click","href","tippy"],[1,"eav-card-space-div"],["align","start"],[3,"link","label","icon"],["mat-button","","tippy","See the result of combining all settings",1,"eav-button__with-icon",3,"href"],[1,"eav-icon"],["mat-button","","tippy","See the result of combining all resources",1,"eav-button__with-icon",3,"href"],[3,"dialogSettings","appSettingsInternal","refresh"],[3,"featureNameId","asInfo"],["mat-button","",1,"eav-button__with-icon",3,"href","disabled"],["matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadge"],["mat-button","",1,"eav-button__with-icon",3,"href"],["matBadgeSize","small","matBadgeIcon","diamond","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadgeHidden"],[4,"ngTemplateOutlet"],["mat-icon-button","","tippy","Go to global",3,"click"],["mat-icon-button","","tippy","Go to site",3,"click"]],template:function(n,i){1&n&&(t.nVh(0,yt,151,48),t.nrm(1,"router-outlet")),2&n&&t.vxM(i.isGlobal()||i.isSite()||i.isApp()?0:-1)},dependencies:[d.Hu,d.RN,d.YY,d.m2,d.MM,d.dh,T.m_,T.An,S.Hl,S.$z,nt.iY,C.Y,C.k,v.A,E.T3,et,G.b,M.n3,O.e,k.u],styles:["a[_ngcontent-%COMP%]{color:#465da3!important}a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .eav-button__with-icon[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#85283b!important}a.mat-mdc-button.mat-mdc-button-disabled[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#00000061!important}.eav-settings-and-resources-table[_ngcontent-%COMP%]{width:100%}.eav-settings-and-resources-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.eav-settings-and-resources-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}"]})}}return s})()},59339($,x,o){o.d(x,{A:()=>b});var E=o(36124),l=o(16256);let b=(()=>{class h extends l.k{constructor(S){super(),this.renderer=S,this.matBadgeIcon=""}ngOnInit(){if(!this.matBadgeIcon)return;const S=this._createBadgeElement();this.renderer.setStyle(S,"display","flex");const d=this.renderer.createElement("mat-icon");this.renderer.appendChild(d,this.renderer.createText(this.matBadgeIcon)),this.renderer.setStyle(d,"font-family","Material Symbols Outlined"),this.renderer.setStyle(d,"font-size","10"),this.renderer.setStyle(d,"height","16px"),this.renderer.setStyle(d,"line-height","16px"),this.renderer.setStyle(d,"color","#fff",E.czy.Important),this.renderer.addClass(d,"mat-icon"),this.renderer.addClass(d,"material-icons"),this.renderer.appendChild(S,d)}static{this.\u0275fac=function(d){return new(d||h)(E.rXU(E.sFG))}}static{this.\u0275dir=E.FsC({type:h,selectors:[["","matBadgeIcon",""]],inputs:{matBadgeIcon:"matBadgeIcon"},features:[E.Vt3]})}}return h})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/21.03.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_app-configuration_app-configuration_ts.8093d43a7466118a.js.map