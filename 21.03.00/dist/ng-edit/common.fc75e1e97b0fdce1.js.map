{"version":3,"file":"common.fc75e1e97b0fdce1.js","mappings":"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","names":["JsonHelpers","tryParse","input","JSON","parse","i0","_r1","ctx_r1","openLightspeedFeatureInfo","params","lightSpeedLink","lightSpeedOwner","LightSpeedActions_Conditional_1_Conditional_1_Template","LightSpeedActions_Conditional_1_Conditional_2_Template","appHasLightSpeed","lightSpeed","Title","appLightSpeedEnabled","LightSpeedActions","#featuresSvc","constructor","this","required","inject","FeaturesService","lightSpeedEnabled","isEnabled","FeatureNames","LightSpeed","Id","IsEnabled","selectors","inputs","decls","vars","consts","template","rf","ctx","LightSpeedActions_Conditional_0_Template","LightSpeedActions_Conditional_1_Template","TippyDirective","MatIconModule","i1","MatBadgeIconDirective","MatRippleModule","i2","encapsulation","FieldValueHelpers","fieldValuesAreEqual","x","y","isNaN","Array","isArray","RxHelpers","arraysEqual","getItemValuesChanges","oldValues","newValues","changes","key","Object","keys","newValue","length","undefined","logSpecs","all","get","getResource","getFirst","SysDataService","HttpServiceBase","log","classLogEnabled","specs","fnIf","resource","computedObj","source","data","l","getMany","a","isLoading","error","allData","value","default","Default","refresh","fields","noCamel","streams","newHttpResource","paramChanged","paramsFinal","fieldsFinal","url","appId","context","SysDataSource","$select","$casing","__ngFactoryType__","factory","Éµfac","importContentItemDialog","name","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","ImportContentItemComponent","Promise","__webpack_require__","e","then","bind","contentItemsRoutes","path","component","DialogEntryComponent","dialog","ContentItemsComponent","children","GoToMetadata","getRoutes","loadChildren","m","ContentExportRoutes","contentImportRoutes","title","EditRoutes","loadScripts","scriptObjects","callback","iteration","newCallback","scrObj","global","test","w","window","require","src","exportedVar","FeaturesConfigService","HttpServiceBaseSignal","saveFeatures","featuresStates","http","post","apiUrl","getLicensesLive","httpResource","uploadLicense","file","formData","FormData","append","pipe","map","info","Success","Messages","MessageType","FileUploadMessageTypes","Error","Text","Message","retrieveLicensePromise","fetchPromise","ReservedNamesValidatorDirective","appReservedNames","validate","control","controlValue","toLocaleLowerCase","reservedName","find","reservedNames","mergeReserved","existingFields","forEach","field","StaticName","features","provide","NG_VALIDATORS","useExisting","multi","DebugFields","environment","production","ct_r1","localEntities","f_r2","status","InspectExtensionComponent_Conditional_0_For_6_Template","InspectExtensionComponent_Conditional_0_For_26_Template","_forTrack0","ctx_r2","contentTypes","foundLock","summary","total","changed","added","missing","files","InspectExtensionComponent","InspectExtensionComponent_Conditional_0_Template","InspectExtensionComponent_Conditional_1_Template","tmp_0_0","MatButtonModule","MatSlideToggleModule","FormsModule","MatExpansionModule","styles","AgActionsAlwaysRefresh","arrReducer","arr","push","toArray","operate","subscriber","reduce","subscribe","attribute_r2","values","value_r4","change","oldValue","HistoryItemComponent_Conditional_10_For_1_Conditional_9_For_2_Conditional_4_Template","HistoryItemComponent_Conditional_10_For_1_Conditional_9_For_2_Conditional_5_Template","langKey","HistoryItemComponent_Conditional_10_For_1_Conditional_9_For_2_Template","$implicit","toggleAttribute","HistoryItemComponent_Conditional_10_For_1_Conditional_5_Template","HistoryItemComponent_Conditional_10_For_1_Conditional_9_Template","expandedAttributes","historyItem","versionNumber","dataType","_r5","onRestore","HistoryItemComponent_Conditional_10_For_1_Template","HistoryItemComponent_Conditional_10_Conditional_3_Template","attributes","isLastVersion","HistoryItemComponent","expanded","expandedChange","EventEmitter","restore","getLocalDate","date","Date","attributeName","emit","changeSetId","outputs","$event","HistoryItemComponent_Conditional_10_Template","timeStamp","DatePipe","editContentTypeFieldsDialog","EditContentTypeFieldsComponent","contentTypeFieldsRoutes","ContentTypeFieldsComponent","GoToPermissions","route","AppScopes","App","Site","Global","fieldNamePattern","fieldNameError","importRoutes","ImportAppComponent","prefix","notValid","ValidationMsgHelper","messages","long","min","max","minNoItems","maxNoItems","pattern","decimals","jsonError","formulaError","validateForm","form","errors","controlKey","entries","controls","UiControl","markTouched","invalid","errorKey","AnalyzeSettingsService","getStack","part","view","webApiAppRoot","AppAdminHelpers","getLightSpeedEditParams","items","ItemIdHelper","newMetadata","eavConstants","appMetadata","ContentTypeName","metadata","app","webApiContentGroup","webApiContentGroupReplace","webApiContentGroupItemlist","webApiContentGroupHeader","ContentGroupService","getItemsPromise","item","guid","index","toString","saveItem","entityId","id","add","removeItem","contentGroup","delete","parent","getListPromise","saveList","resortedList","getAllLive","AnalyzeSettingsValueComponent","clipboard","transient","ClipboardService","agInit","copy","copyToClipboard","ZoneService","getLanguageLive","toggleLanguage","code","enable","_this","getStatusPromise","cultureCode","getSystemInfoLive","getLanguagesPermissionsLive","Update$2sxcEnvFromContext","appContext","includedApiRoot","Api","new2sxcHeader","$2sxc","env","header","appApi","load","DialogInNewWindowService","Context","openCodeFile","isShared","templateId","Path","editId","hashParams","#buildHashParam","keyDialog","DialogTypeConstants","Develop","keyIsShared","keyItems","stringify","#buildFullUrl","open","openAppAdministration","zoneId","tab","scope","extras","keyZoneId","keyAppId","keyExtras","#buildSharedHashParams","keyModuleId","moduleId","keyContentBlockId","contentBlockId","keyPartOfPage","sessionStorage","getItem","keyDebug","rawKey","replace","valueTemp","rawValue","encodeURIComponent","oldHref","keyUrl","oldUrl","URL","newHref","origin","pathname","search","allHashParams","acc","onClose","closeTooltip","DialogHeaderComponent","showClose","close","DialogHeaderComponent_Conditional_3_Template","RestApiHelpTextComponent","apiTitle","getHistoryItems","versions","page","pageSize","compareWith","calcHistoryItems","filteredVersions","version","ChangeSetId","calcHistoryAttributes","historyId","HistoryId","TimeStamp","user","User","VersionNumber","some","v","slice","currentDataTypes","Json","Entity","Attributes","previousItem","findLive","liveVersion","previousDataTypes","allAttributes","attribute","currentValues","previousValues","calcChangeType","calcHistoryValues","allLangKeys","lang","includes","currentValue","previousValue","sortObjectKeys","sortKeysAlphabetically","obj","sort","s","MatTooltipModule","static","type","imports","A11yModule","OverlayModule","BidiModule","CdkScrollableModule","#dialogData","#dialog","#originalUrl","matDialog","viewContainerRef","router","changeDetectorRef","injector","classLog","navigation","currentNavigation","state","ngOnInit","fn","dialogConfig","snapshot","_dialogAnimatingOpen","_lastDialogRef","afterOpened","openDialogComponent","ngOnDestroy","svcId","init","autoFocus","backdropClass","closeOnNavigation","showScrollbar","position","top","_ref","overlayRef","_host","removeAttribute","afterClosed","navRes","navigateUrl","pathFromRoot","totalPopup","navigate","relativeTo","markForCheck","i3","set","disable","getErrors","pfx","moreDisabled","#warningMessages","jsonWarning","formulaWarning","dirty","touched","disabled","extendName","aIfInList","emptyControl","touchedAndInvalid","setIfChanged","before","isEqual","#set","markAsTouched","markAsDirty","patchValue","updateValueAndValidity","fnIfInFields","r","formulaMessage","getWarnings","_warning","warning","warningKey","replaceContentRoutes","ReplaceContentComponent","EditRoutesNoHistory"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/helpers/json.helpers.ts","./projects/eav-ui/src/app/admin-shared/lightspeed-action/lightspeed-action.html","./projects/eav-ui/src/app/admin-shared/lightspeed-action/lightspeed-action.ts","./projects/eav-ui/src/app/edit/shared/helpers/field-value.helpers.ts","./projects/eav-ui/src/app/shared/services/sys-data.service.ts","./projects/eav-ui/src/app/content-items/content-items-dialog.config.ts","./projects/eav-ui/src/app/content-items/import-content-item/import-content-item-dialog.config.ts","./projects/eav-ui/src/app/content-items/content-items.routing.ts","./projects/eav-ui/src/app/shared/helpers/load-scripts.helper.ts","./projects/eav-ui/src/app/apps-management/services/features-config.service.ts","./projects/eav-ui/src/app/content-type-fields/edit-content-type-fields/reserved-names.directive.ts","./projects/eav-ui/src/app/edit/edit-debug.ts","./projects/eav-ui/src/app/app-administration/app-extensions/inspect/inspect-extension.html","./projects/eav-ui/src/app/app-administration/app-extensions/inspect/inspect-extension-content.ts","./projects/eav-ui/src/app/app-administration/queries/ag-actions/ag-actions.ts","./node_modules/rxjs/dist/esm/internal/operators/toArray.js","./projects/eav-ui/src/app/item-history/history-item.html","./projects/eav-ui/src/app/item-history/history-item.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-dialog.config.ts","./projects/eav-ui/src/app/content-type-fields/edit-content-type-fields/edit-content-type-fields-dialog.config.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields.routing.ts","./projects/eav-ui/src/app/shared/models/dialog-context.models.ts","./projects/eav-ui/src/app/app-administration/constants/field-name.patterns.ts","./projects/eav-ui/src/app/import-app/import-app-dialog.config.ts","./projects/eav-ui/src/app/import-app/import-app.routing.ts","./projects/eav-ui/src/app/edit/shared/validation/validation-messages.helpers.ts","./projects/eav-ui/src/app/app-administration/services/analyze-settings.service.ts","./projects/eav-ui/src/app/app-administration/app-admin-helpers.ts","./projects/eav-ui/src/app/manage-content-list/services/content-group.service.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/analyze-settings/analyze-settings-value/analyze-settings-value.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/analyze-settings/analyze-settings-value/analyze-settings-value.html","./projects/eav-ui/src/app/apps-management/services/zone.service.ts","./projects/eav-ui/src/app/shared/helpers/update-env-vars-from-dialog-settings.helper.ts","./projects/eav-ui/src/app/shared/routing/dialog-in-new-window.service.ts","./projects/eav-ui/src/app/shared/dialog-header/dialog-header.html","./projects/eav-ui/src/app/shared/dialog-header/dialog-header.ts","./projects/eav-ui/src/app/shared/components/rest-api-help-text/rest-api-help-text.ts","./projects/eav-ui/src/app/shared/components/rest-api-help-text/rest-api-help-text.html","./projects/eav-ui/src/app/item-history/item-history.helpers.ts","./node_modules/@angular/material/fesm2022/tooltip.mjs","./projects/eav-ui/src/app/shared/components/dialog-entry/dialog-entry.ts","./projects/eav-ui/src/app/edit/shared/controls/ui-control.ts","./projects/eav-ui/src/app/replace-content/replace-content-dialog.config.ts","./projects/eav-ui/src/app/replace-content/replace-content.routing.ts"],"sourcesContent":["\r\nexport class JsonHelpers {\r\n\r\n  /** Tries to parse string as JSON */\r\n  static tryParse(input: string): any {\r\n    try {\r\n      return JSON.parse(input);\r\n    } catch { }\r\n  }\r\n}\r\n","@if (!lightSpeedEnabled()) {\r\n  <div class=\"eav-grid-action-button disabled\" tippy=\"Lightspeed is disabled\" (click)=\"openLightspeedFeatureInfo()\">\r\n    <mat-icon matBadgeSize=\"small\" matBadgeIcon=\"diamond\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n  </div>\r\n} @else {\r\n  <div\r\n    class=\"eav-grid-action-button {{ appHasLightSpeed ? '' : 'disabled' }}\"\r\n    matRipple\r\n    [tippy]=\"appHasLightSpeed ? lightSpeed().Title : 'Not yet configured for LightSpeed'\"\r\n  >\r\n    @if (appLightSpeedEnabled) {\r\n      <a class=\"default-link\" [href]=\"'#' + params().lightSpeedLink(lightSpeedOwner())\">\r\n        <mat-icon matBadgeSize=\"small\" matBadgeIcon=\"check\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n      </a>\r\n    } @else {\r\n      <a class=\"default-link\" [href]=\"'#' + params().lightSpeedLink(lightSpeedOwner())\">\r\n        <mat-icon matBadgeSize=\"small\" matBadgeIcon=\"block\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n      </a>\r\n    }\r\n  </div>\r\n}\r\n","import { Component, inject, input } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { LightSpeedInfo } from '../../apps-management/models/LightSpeedInfo';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { FeaturesService } from '../../features/features.service';\r\nimport { MatBadgeIconDirective } from '../../shared/directives/mat-badge-icon.directive';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n/**\r\n * LightSpeedActionsComponent\r\n *\r\n * Specially meant to be used inside an AGGrid action, and receive the parameters from it.\r\n *\r\n */\r\n@Component({\r\n  selector: 'app-lightspeed-action',\r\n  templateUrl: './lightspeed-action.html',\r\n  imports: [\r\n    TippyDirective,\r\n    MatIconModule,\r\n    MatBadgeIconDirective,\r\n    MatRippleModule,\r\n  ]\r\n})\r\nexport class LightSpeedActions {\r\n  /**\r\n   * App or view which owns this lightspeed.\r\n   * Needed for lightspeed checks, will be passed back to the action handlers.\r\n   */\r\n  lightSpeedOwner = input.required<unknown>();\r\n\r\n  params = input.required<{\r\n    openLightspeedFeatureInfo(): void;\r\n    lightSpeedLink?: (app: unknown) => string;\r\n  }>();\r\n\r\n  lightSpeed = input.required<LightSpeedInfo | null>();\r\n\r\n  #featuresSvc = inject(FeaturesService);\r\n\r\n  protected lightSpeedEnabled = this.#featuresSvc.isEnabled[FeatureNames.LightSpeed]\r\n\r\n  constructor() { }\r\n\r\n\r\n  public get appHasLightSpeed(): boolean {\r\n    return this.lightSpeed()?.Id != null;\r\n  }\r\n\r\n  public get appLightSpeedEnabled(): boolean {\r\n    return this.lightSpeed()?.IsEnabled == true;\r\n  }\r\n\r\n  openLightspeedFeatureInfo(): void {\r\n    this.params().openLightspeedFeatureInfo();\r\n  }\r\n}\r\n","import { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { RxHelpers } from '../../../shared/rxJs/rx.helpers';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\n\r\n\r\nexport class FieldValueHelpers {\r\n  /** Detect if two values are equal, incl. special NaN and Array checks */\r\n  static fieldValuesAreEqual(x: FieldValue, y: FieldValue): boolean {\r\n    if (x === y) return true;\r\n    if (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y)) return true;\r\n    if (Array.isArray(x) && Array.isArray(y) && RxHelpers.arraysEqual(x, y)) return true;\r\n    return false;\r\n  }\r\n\r\n  /** Searches where newValues has values different from oldValues */\r\n  static getItemValuesChanges(oldValues: ItemValuesOfLanguage, newValues: ItemValuesOfLanguage): ItemValuesOfLanguage {\r\n    const changes: ItemValuesOfLanguage = {};\r\n    for (const key of Object.keys(newValues)) {\r\n      const newValue = newValues[key];\r\n      const oldValue = oldValues[key];\r\n      if (FieldValueHelpers.fieldValuesAreEqual(newValue, oldValue))\r\n        continue;\r\n\r\n      changes[key] = newValue;\r\n    }\r\n    return Object.keys(changes).length === 0 ? undefined : changes;\r\n  }\r\n}\r\n","import { Injectable, Signal } from '@angular/core';\r\nimport { classLogEnabled } from '../logging';\r\nimport { computedObj } from '../signals/signal.utilities';\r\nimport { HttpServiceBase } from './http-service-base';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  get: true,\r\n  getResource: true,\r\n  getFirst: true,\r\n};\r\n\r\ninterface SysDataSpecs {\r\n  /** optional signal to trigger refresh */\r\n  refresh?: Signal<unknown>;\r\n  /** The name of the data source */\r\n  source: string;\r\n  /** parameters in the query for the data source */\r\n  params?: Record<string, unknown> | Signal<Record<string, unknown>>;\r\n  /** fields to select in the query */\r\n  fields?: string | Signal<string>;\r\n  // entitiesFilter?: string[];\r\n\r\n  /** Optional parameter to disable camel casing - WIP, in future we plan to always use camel casing */\r\n  noCamel?: boolean;\r\n\r\n  /** Optional parameter to specify which stream to select from the result - WIP */\r\n  streams?: string;\r\n}\r\n\r\ninterface ResultWIP<TData> {\r\n  /** non-camel case */\r\n  Default: TData[];\r\n\r\n  /** camel case - recommended */\r\n  default: TData[];\r\n}\r\n\r\n/**\r\n * Special service to get system data from the backend.\r\n *\r\n * @export\r\n * @class SysDataService\r\n * @extends {HttpServiceBase}\r\n */\r\n@Injectable()\r\nexport class SysDataService extends HttpServiceBase {\r\n\r\n  log = classLogEnabled({SysDataService}, logSpecs);\r\n\r\n  /**\r\n   * Get the first item of a data source as a signal. This is useful for cases where you expect only one item, like the polymorphism info.\r\n   * @param specs \r\n   * @returns \r\n   */\r\n  getFirst<TData>(specs : SysDataSpecs) {\r\n    const l = this.log.fnIf('getFirst', specs as unknown as Record<string, unknown>);\r\n    const resource = this.get<TData>(specs);\r\n    return computedObj(specs.source, () => {\r\n      const data = resource();\r\n      return data.length > 0 ? data[0] : null;\r\n    });\r\n  }\r\n\r\n  /** \r\n   * Get data from the backend as a signal.\r\n   * Internally it uses an httpResource, but since we flatten it (remove the 'Default' wrapper)\r\n   * it arrives as a computed signal here.\r\n   * @returns \r\n   */\r\n  get<TData>(specs : SysDataSpecs) {\r\n    const l = this.log.fnIf('get', specs as unknown as Record<string, unknown>);\r\n\r\n    // Get the real underlying httpResource\r\n    const resource = this.getMany<ResultWIP<TData>>(specs);\r\n\r\n    // Flatten the data to remove the 'Default' wrapper\r\n    const flattened = computedObj(specs.source, () => {\r\n      l.a(`computing flattened data for source: ${specs.source}`);\r\n      if (resource.isLoading()) {\r\n        l.a('Resource is loading, returning empty array');\r\n        return [];\r\n      }\r\n      if (resource.error()) {\r\n        l.a(`Error loading SysData source '${specs.source}': ${resource.error()}`);\r\n        return [];\r\n      }\r\n\r\n      const allData = resource.value();\r\n      const data = allData?.default ?? allData?.Default;\r\n      l.a('data', { allData, data });\r\n\r\n      return data ?? [];\r\n    });\r\n    return flattened;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns \r\n   */\r\n  getMany<TData>({ refresh, source, params, fields, noCamel, streams } : SysDataSpecs) {\r\n    const l = this.log.fnIf('getResource', { source, params, fields /*, entitiesFilter */ });\r\n    return this.newHttpResource<TData>(() => {\r\n      const paramChanged = refresh?.();\r\n\r\n      // Resolve the params\r\n      // const pIsSig = typeof params === 'function';\r\n      const paramsFinal = (typeof params === 'function' ? params() : params) ?? {};\r\n      \r\n      const fieldsFinal = (typeof fields === 'function' ? fields() : fields) ?? '';\r\n\r\n      l.a(`creating httpResource for source: ${source}, '${paramChanged}'`, { params, fields, noCamel, streams });\r\n      // console.log(`creating httpResource for source: ${source}`);\r\n\r\n      const streamNames = streams == '*'\r\n        ? ''\r\n        : streams ?? 'Default';\r\n\r\n      return {\r\n        url: `app/auto/query/System.SysData/${streamNames}`,\r\n        params: {\r\n          appId: this.context.appId,\r\n          SysDataSource: source,\r\n          ...(fieldsFinal ? { '$select': fieldsFinal } : {}),\r\n          ...(noCamel ? {} : { '$casing': 'camel' }),\r\n          ...paramsFinal,\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const contentItemsDialog: DialogConfig = {\r\n  name: 'CONTENT_ITEMS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ContentItemsComponent } = await import('./content-items');\r\n    return ContentItemsComponent;\r\n  }\r\n};\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const importContentItemDialog: DialogConfig = {\r\n  name: 'IMPORT_CONTENT_ITEM_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ImportContentItemComponent: ImportContentItemComponent } = await import('./import-content-item');\r\n    return ImportContentItemComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry';\r\nimport { contentItemsDialog } from './content-items-dialog.config';\r\nimport { importContentItemDialog } from './import-content-item/import-content-item-dialog.config';\r\n\r\nexport const contentItemsRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: contentItemsDialog },\r\n    children: [\r\n      ...GoToMetadata.getRoutes(),\r\n      {\r\n        path: 'export/:contentTypeStaticName',\r\n        loadChildren: () => import('../content-export/content-export.routing')\r\n          .then(m => m.ContentExportRoutes)\r\n      },\r\n      {\r\n        path: 'export/:contentTypeStaticName/:selectedIds',\r\n        loadChildren: () => import('../content-export/content-export.routing')\r\n          .then(m => m.ContentExportRoutes)\r\n      },\r\n      {\r\n        path: 'import',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: importContentItemDialog }\r\n      },\r\n      {\r\n        path: ':contentTypeStaticName/import',\r\n        loadChildren: () => import('../content-import/content-import.routing')\r\n          .then(m => m.contentImportRoutes),\r\n        data: { title: 'Import Items' },\r\n      },\r\n      ...EditRoutes,\r\n    ]\r\n  },\r\n];\r\n\r\n","import { EavWindow } from '../models/eav-window.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport function loadScripts(scriptObjects: ScriptObject[], callback: () => void, iteration = 0) {\r\n  const isLast = scriptObjects.length === iteration + 1;\r\n  const newCallback = isLast ? callback : loadScripts.bind(this, scriptObjects, callback, iteration + 1);\r\n  const scrObj = scriptObjects[iteration];\r\n\r\n  const global = typeof scrObj.test === 'string' ? scrObj.test : null;\r\n  const test = typeof scrObj.test === 'function' ? scrObj.test : null;\r\n  const w = window as Record<string, any>;\r\n\r\n  if (global != null && !!w[global]) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  if (test != null && test()) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  window.require([scrObj.src], (exportedVar: any) => {\r\n    if (exportedVar && !w[global]) {\r\n      w[global] = exportedVar;\r\n    }\r\n    newCallback();\r\n  });\r\n}\r\n\r\nexport interface ScriptObject {\r\n  /** window.xxx or a function that returns a boolean */\r\n  test: string | (() => boolean);\r\n  src: string;\r\n}\r\n","import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { FileUploadMessageTypes, FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { License, LicenseDownloadInfo, LicenseUploadInfo } from '../models/license.model';\r\nimport { FeatureConfigSavePackage } from './feature-config-save-package';\r\n\r\nconst webAPiLicenseRetrieve = 'sys/license/Retrieve';\r\nconst webApiFeatSaveNew = 'admin/feature/SaveNew';\r\nconst webApiLicSummary = 'sys/license/Summary';\r\nconst webApiUpload = 'sys/license/Upload';\r\n\r\n@Injectable()\r\nexport class FeaturesConfigService extends HttpServiceBaseSignal {\r\n\r\n  saveFeatures(featuresStates: FeatureConfigSavePackage[]): Observable<null> {\r\n    return this.http.post<null>(this.apiUrl(webApiFeatSaveNew), featuresStates);\r\n  }\r\n\r\n  getLicensesLive(refresh: Signal<unknown>) {\r\n    return httpResource<License[]>(() => {\r\n      refresh();\r\n      return this.apiUrl(webApiLicSummary);\r\n    });\r\n  }\r\n\r\n  uploadLicense(file: File): Observable<FileUploadResult> {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<LicenseUploadInfo>(this.apiUrl(webApiUpload), formData)\r\n      .pipe(\r\n        map(info => ({\r\n          Success: info.Success,\r\n          Messages: [{\r\n            MessageType: info.Success ? FileUploadMessageTypes.Success : FileUploadMessageTypes.Error,\r\n            Text: `License ${info.Success ? 'uploaded' : 'upload failed'}: ${info.Message}`,\r\n          }],\r\n        } satisfies FileUploadResult)),\r\n      );\r\n  }\r\n\r\n  retrieveLicensePromise(): Promise<LicenseDownloadInfo> {\r\n    return this.fetchPromise<LicenseDownloadInfo>(webAPiLicenseRetrieve, {\r\n    });\r\n  }\r\n}\r\n","import { Directive, input } from '@angular/core';\r\nimport { AbstractControl, NG_VALIDATORS, ValidationErrors, Validator } from '@angular/forms';\r\n\r\n@Directive({\r\n  selector: '[appReservedNames]',\r\n  providers: [\r\n    { provide: NG_VALIDATORS, useExisting: ReservedNamesValidatorDirective, multi: true },\r\n  ],\r\n})\r\nexport class ReservedNamesValidatorDirective implements Validator {\r\n  appReservedNames = input<Record<string, string>>({});\r\n\r\n\r\n  validate(control: AbstractControl): ValidationErrors | null {\r\n    if (!control.value) { return null; }\r\n\r\n    const controlValue = (control.value as string).toLocaleLowerCase();\r\n    const reservedName = Object.keys(this.appReservedNames()).find(name => name.toLocaleLowerCase() === controlValue);\r\n    return reservedName ? { reservedNames: this.appReservedNames()[reservedName] } : null;\r\n  }\r\n\r\n  static mergeReserved(reservedNames: Record<string, string>, fields: {StaticName: string }[]) {\r\n    const existingFields: Record<string, string> = {};\r\n    fields.forEach(field => {\r\n      existingFields[field.StaticName] = 'this field already exists';\r\n    });\r\n    return {\r\n      ...reservedNames,\r\n      ...existingFields,\r\n    };\r\n  }\r\n\r\n}\r\n","import { environment } from '../../environments/environment';\r\n\r\n/**\r\n * List of fields to debug across the entire application.\r\n * \r\n * Change as you need, but after debugging, best set it back to [].\r\n */\r\nexport const DebugFields: string[] = !environment.production\r\n  // ? ['StringPicker']\r\n  // ? ['NumberInputAddUntillDevisibleBy5']\r\n  // ? ['WysiwygConfiguration']\r\n  // ? ['Items']\r\n  ? ['ViewController']\r\n  // ? ['Title']\r\n  // ? [] // no fields\r\n  // ? ['*'] // all fields\r\n  : [];\r\n","@if (data()?.foundLock) {\r\n  <h4>Data</h4>\r\n  <div>\r\n    Content Types: {{ data().data.contentTypes.length }}\r\n    <br />\r\n\r\n    @for (ct of data().data.contentTypes; track ct) {\r\n      <div class=\"content-type-chip\">\r\n        {{ ct.name }} ({{ ct.localEntities }})\r\n      </div>\r\n    }\r\n  </div>\r\n\r\n  <h4>Lock File</h4>\r\n  <div class=\"status\" [class.ok]=\"data().foundLock\" [class.error]=\"!data().foundLock\">\r\n    {{ data().foundLock ? 'Found' : 'Missing' }}\r\n  </div>\r\n\r\n  <h4>Files</h4>\r\n  <mat-accordion>\r\n    <mat-expansion-panel>\r\n      <mat-expansion-panel-header>\r\n        <mat-panel-description>\r\n          Total: {{ data().summary.total }} |\r\n          Changed: {{ data().summary.changed }} |\r\n          Added: {{ data().summary.added }} |\r\n          Missing: {{ data().summary.missing }}\r\n        </mat-panel-description>\r\n      </mat-expansion-panel-header>\r\n      <div class=\"content\">\r\n        <table class=\"file-table\">\r\n          <tr>\r\n            <th>Path</th>\r\n            <th>Status</th>\r\n          </tr>\r\n\r\n          @for (f of data().files; track f.path) {\r\n            <tr>\r\n              <td>{{ f.path }}</td>\r\n              <td\r\n                [class.ok]=\"f.status === 'unchanged'\"\r\n                [class.changed]=\"f.status === 'changed'\"\r\n                [class.added]=\"f.status === 'added'\"\r\n                [class.missing]=\"f.status === 'missing'\"\r\n              >\r\n                {{ f.status }}\r\n              </td>\r\n            </tr>\r\n          }\r\n        </table>\r\n      </div>\r\n    </mat-expansion-panel>\r\n  </mat-accordion>\r\n}\r\n@else {\r\n  <div class=\"no-data\">\r\n    <p>No data available.</p>\r\n  </div>\r\n} \r\n","import { Component, input } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { ExtensionInspectResult } from '../extension.model';\r\n\r\n@Component({\r\n  selector: 'app-inspect-extension',\r\n  templateUrl: './inspect-extension.html',\r\n  styleUrls: ['./inspect-extension.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatSlideToggleModule,\r\n    FormsModule,\r\n    MatExpansionModule,\r\n  ]\r\n})\r\nexport class InspectExtensionComponent {\r\n  data = input.required<ExtensionInspectResult | undefined>();\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\n\r\nexport abstract class AgActionsAlwaysRefresh implements ICellRendererAngularComp {\r\n  abstract agInit(params: any): void;\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","import { reduce } from './reduce';\nimport { operate } from '../util/lift';\nconst arrReducer = (arr, value) => (arr.push(value), arr);\nexport function toArray() {\n    return operate((source, subscriber) => {\n        reduce(arrReducer, [])(source).subscribe(subscriber);\n    });\n}\n","<mat-expansion-panel\r\n  [(expanded)]=\"expanded\"\r\n>\r\n  <mat-expansion-panel-header>\r\n    <mat-panel-title>Version {{ historyItem.versionNumber }}</mat-panel-title>\r\n\r\n    <mat-panel-description>\r\n      {{ getLocalDate(historyItem.timeStamp) | date: 'yyyy-MM-dd HH:mm' }} &nbsp;\r\n      <small>({{ getLocalDate(historyItem.timeStamp) | date: 'yyyy-MM-dd HH:mm' : 'UTC' }} UTC)</small>\r\n    </mat-panel-description>\r\n  </mat-expansion-panel-header>\r\n  @if (expanded) {\r\n    @for (attribute of historyItem.attributes; track attribute) {\r\n      <div class=\"eav-table-row\">\r\n        <div\r\n          class=\"eav-table-row__main eav-row-main\"\r\n          (click)=\"toggleAttribute(attribute.name)\"\r\n        >\r\n          <div class=\"eav-row-main__label eav-history-{{ attribute.change }}\">\r\n            {{ attribute.name }}\r\n          </div>\r\n          <div class=\"eav-row-main__value eav-history-{{ attribute.change }}\">\r\n            @if (!expandedAttributes[historyItem.versionNumber + attribute.name]) {\r\n              {{ attribute.values[0]?.value }}\r\n            }\r\n          </div>\r\n          <div class=\"eav-row-main__type\">\r\n            <i>[{{ attribute.dataType }}]</i>\r\n          </div>\r\n        </div>\r\n        @if (expandedAttributes[historyItem.versionNumber + attribute.name]) {\r\n          <div class=\"eav-table-row__details\">\r\n            @for (value of attribute.values; track value) {\r\n              <div class=\"eav-detail-row\">\r\n                <div class=\"eav-detail-row__label eav-history-{{ value.change }}\">{{ value.langKey }}:</div>\r\n                <div class=\"eav-detail-row__value\">\r\n                  @if (value.change !== 'changed') {\r\n                    <div class=\"eav-history-{{ value.change }}\">\r\n                      {{ value.change === 'deleted' ? value.oldValue : value.value }}\r\n                    </div>\r\n                  }\r\n                  @if (value.change === 'changed') {\r\n                    <div class=\"eav-history-new\">{{ value.value }}</div>\r\n                    <div class=\"eav-history-deleted eav-history-deleted__value\">{{ value.oldValue }}</div>\r\n                  }\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n        }\r\n      </div>\r\n    }\r\n    <div class=\"eav-row-actions\">\r\n      @if (!historyItem.isLastVersion) {\r\n        <button\r\n          mat-raised-button\r\n          class=\"eav-action-button\"\r\n          (click)=\"onRestore()\"\r\n        >\r\n          Restore\r\n        </button>\r\n      }\r\n    </div>\r\n  }\r\n</mat-expansion-panel>\r\n","import { DatePipe } from '@angular/common';\r\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { HistoryItem } from './models/history-item.model';\r\n\r\n@Component({\r\n  selector: 'app-history-item',\r\n  templateUrl: './history-item.html',\r\n  styleUrls: ['./item-history.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatExpansionModule,\r\n    DatePipe,\r\n  ]\r\n})\r\nexport class HistoryItemComponent {\r\n  @Input({ required: true }) historyItem!: HistoryItem;\r\n  @Input() expanded = false;\r\n  @Output() expandedChange = new EventEmitter<boolean>();\r\n  @Output() restore = new EventEmitter<number>();\r\n\r\n  expandedAttributes: Record<string, boolean> = {};\r\n  \r\n  getLocalDate(date: string) {\r\n    return new Date(date);\r\n  }\r\n\r\n  toggleAttribute(attributeName: string) {\r\n    const key = this.historyItem.versionNumber + attributeName;\r\n    this.expandedAttributes[key] = !this.expandedAttributes[key];\r\n  }\r\n\r\n  onRestore() {\r\n    this.restore.emit(this.historyItem.changeSetId);\r\n  }\r\n}","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const contentTypeFieldsDialog: DialogConfig = {\r\n  name: 'CONTENT_TYPE_FIELDS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ContentTypeFieldsComponent } = await import('./content-type-fields');\r\n    return ContentTypeFieldsComponent;\r\n  }\r\n};\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const editContentTypeFieldsDialog: DialogConfig = {\r\n  name: 'EDIT_CONTENT_TYPE_FIELDS_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { EditContentTypeFieldsComponent } = await import('./edit-content-type-fields');\r\n    return EditContentTypeFieldsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { GoToPermissions } from '../permissions/go-to-permissions';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry';\r\nimport { contentTypeFieldsDialog } from './content-type-fields-dialog.config';\r\nimport { editContentTypeFieldsDialog } from './edit-content-type-fields/edit-content-type-fields-dialog.config';\r\n\r\nexport const contentTypeFieldsRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: contentTypeFieldsDialog },\r\n    children: [\r\n      {\r\n        path: 'add/:contentTypeStaticName',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: editContentTypeFieldsDialog }\r\n      },\r\n      {\r\n        path: 'update/:contentTypeStaticName/:id/:editMode',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: editContentTypeFieldsDialog },\r\n      },\r\n      ...GoToMetadata.getRoutes(),\r\n      GoToPermissions.route,\r\n      ...EditRoutes,\r\n    ]\r\n  }\r\n];\r\n","import { Of } from '../../../../../core';\r\nimport { PermissionsCount } from '../../app-administration/models/permissions-count.model';\r\nimport { Language } from './language.model';\r\n\r\nexport interface DialogContextApp {\r\n  /** Root for app APIs and content/query */\r\n  Api: string;\r\n  Folder: string;\r\n  GettingStartedUrl: string;\r\n  Id: number;\r\n  Identifier: string;\r\n  IsContentApp: boolean;\r\n  IsGlobalApp: boolean;\r\n  IsInherited: boolean;\r\n  IsShared: boolean;\r\n  IsSiteApp: boolean;\r\n  Name: string;\r\n  Permissions: PermissionsCount;\r\n  SettingsScope: Of<typeof AppScopes>;\r\n  Url: string;\r\n  SharedUrl: string;\r\n\r\n  /** New app icon */\r\n  Icon: string;\r\n}\r\n\r\nexport interface ApiKeySpecs {\r\n  NameId: string;\r\n  ApiKey: string;\r\n  IsDemo: boolean;\r\n}\r\n\r\nexport const AppScopes = {\r\n  App: 'App',\r\n  Site: 'Site',\r\n  Global: 'Global',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n\r\nexport interface DialogContextEnable {\r\n  /** Determines if app admin should show app-permissions (true for Apps, false for Content and Global) */\r\n  AppPermissions?: boolean;\r\n  /** Determines if Code editing should be enabled (true for super-users) */\r\n  CodeEditor?: boolean;\r\n  DebugMode: boolean;\r\n  /** True if saving of formulas should be enabled (for edit-ui) */\r\n  FormulaSave?: boolean;\r\n  /** While debug is enabled, this allows some Edit Ui actions even when they are disabled in fields settings */\r\n  OverrideEditRestrictions?: boolean;\r\n  /** Determines if Queries should be enabled (true for Apps) */\r\n  Query?: boolean;\r\n}\r\n\r\nexport interface DialogContextLanguage {\r\n  Current: string;\r\n  List: Language[];\r\n  Primary: string;\r\n}\r\n\r\nexport interface DialogContextPage {\r\n  Id: number;\r\n}\r\n\r\nexport interface DialogContextSite {\r\n  DefaultApp: DialogContextSiteApp;\r\n  Id: number;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSystem {\r\n  DefaultApp: DialogContextSiteApp;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSiteApp {\r\n  ZoneId: number;\r\n  AppId: number;\r\n}\r\n\r\nexport interface DialogContextUser {\r\n  Email: string;\r\n  Id: number;\r\n  Guid: string;\r\n  IsAnonymous: boolean;\r\n  IsSiteAdmin: boolean;\r\n  isContentEditor: boolean;\r\n  IsContentAdmin: boolean;\r\n  IsSystemAdmin: boolean;\r\n  Name: string;\r\n  Username: string;\r\n  roles: string[];\r\n}\r\n\r\n// export interface DialogContextFeature {\r\n//   NameId: string;\r\n//   Enabled: boolean;\r\n// }\r\n","export const fieldNamePattern = /^[A-Za-z][A-Za-z0-9]+$/;\r\nexport const fieldNameError = 'Standard letters and numbers are allowed. Must start with a letter.';\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const importAppDialog: DialogConfig = {\r\n  name: 'IMPORT_APP_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ImportAppComponent } = await import('./import-app');\r\n    return ImportAppComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry';\r\nimport { importAppDialog } from './import-app-dialog.config';\r\n\r\nexport const importRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: importAppDialog }\r\n  }\r\n];\r\n\r\n","import { UntypedFormGroup } from '@angular/forms';\r\nimport { UiControl } from '../controls/ui-control';\r\n\r\n// prefix for translation keys\r\nconst prefix = 'ValidationMessage.';\r\nconst notValid = 'ValidationMessage.NotValid';\r\n\r\nexport class ValidationMsgHelper {\r\n\r\n  public static messages: Record<string, (long: boolean) => string> = {\r\n    required: (long: boolean) => long ? `${prefix}Required` : `${prefix}RequiredShort` /* short version in snackbar*/,\r\n    min: (long: boolean) => long ? `${prefix}Min` : notValid,\r\n    max: (long: boolean) => long ? `${prefix}Max` : notValid,\r\n    minNoItems: (long: boolean) => long ? `${prefix}MinNoItems` : notValid,\r\n    maxNoItems: (long: boolean) => long ? `${prefix}MaxNoItems` : notValid,\r\n    pattern: (long: boolean) => long ? `${prefix}Pattern` : notValid,\r\n    decimals: (long: boolean) => long ? `${prefix}Decimals` : notValid,\r\n    jsonError: (long: boolean) => long ? `${prefix}JsonError` : notValid,\r\n    formulaError: (long: boolean) => notValid,\r\n  };\r\n\r\n  /** Marks controls as touched to show errors beneath controls and collects error messages */\r\n  static validateForm(form: UntypedFormGroup): Record<string, string> {\r\n    const errors: Record<string, string> = {};\r\n    for (const [controlKey, control] of Object.entries(form.controls)) {\r\n      UiControl.markTouched(control);\r\n\r\n      if (!control.invalid) continue;\r\n\r\n      for (const errorKey of Object.keys(control.errors)) {\r\n        errors[controlKey] = this.messages[errorKey]?.(false);\r\n        if (errors[controlKey]) break;\r\n      }\r\n    }\r\n    return errors;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Of } from '../../../../../core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { AnalyzeParts, SettingsStackItem } from '../sub-dialogs/analyze-settings/analyze-settings.models';\r\n\r\n@Injectable()\r\nexport class AnalyzeSettingsService extends HttpServiceBaseSignal {\r\n\r\n  getStack(part: Of<typeof AnalyzeParts>, key?: string, view?: string) {\r\n    return this.newHttpResource<SettingsStackItem[]>(() => ({\r\n      url: this.apiUrl(webApiAppRoot + 'GetStack'),\r\n      params: {\r\n        appId: this.appId,\r\n        part,\r\n        ...(key && { key }),\r\n        ...(view && { view }),\r\n      },\r\n    }));\r\n  }\r\n}\r\n","import { eavConstants } from '../shared/constants/eav.constants';\r\nimport { EditForm } from '../shared/models/edit-form.model';\r\nimport { ItemIdHelper } from '../shared/models/item-id-helper';\r\n\r\nexport class AppAdminHelpers {\r\n  public static getLightSpeedEditParams(appId: number) {\r\n    const form: EditForm = {\r\n      items: [\r\n        ItemIdHelper.newMetadata(appId, eavConstants.appMetadata.LightSpeed.ContentTypeName, eavConstants.metadata.app, true),\r\n      ],\r\n    };\r\n    return form;\r\n  }\r\n}\r\n","import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { ReplaceConfig } from '../../replace-content/replace-config.model';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { ContentGroup, ContentGroupAdd } from '../models/content-group.model';\r\nimport { GroupHeader } from '../models/group-header.model';\r\n\r\nconst webApiContentGroup = 'cms/contentgroup/';\r\nconst webApiContentGroupReplace = webApiContentGroup + 'replace';\r\nconst webApiContentGroupItemlist = webApiContentGroup + 'itemlist';\r\nconst webApiContentGroupHeader = webApiContentGroup + 'header';\r\nconst removeItem = 'cms/list/delete';\r\n\r\n@Injectable()\r\nexport class ContentGroupService extends HttpServiceBaseSignal {\r\n\r\n  getItemsPromise(item: ContentGroup): Promise<ReplaceConfig> {\r\n    return this.fetchPromise<ReplaceConfig>(webApiContentGroupReplace, {\r\n      params: { appId: this.appId, guid: item.guid, part: item.part, index: item.index.toString() }\r\n    });\r\n  }\r\n\r\n  saveItem(item: ContentGroupAdd) {\r\n    return this.http.post<null>(this.apiUrl(webApiContentGroupReplace), {}, {\r\n      params: { guid: item.guid, part: item.part, index: item.index.toString(), entityId: item.id.toString(), add: `${item.add}` }\r\n    });\r\n  }\r\n\r\n  removeItem(contentGroup: ContentGroup, index: number) {\r\n    // note: the server checks if the part == 'content' and will automatically treat it as a pair with presentation\r\n    return this.http.delete<null>(this.apiUrl(removeItem), {\r\n      params: { index: index, parent: contentGroup.guid, fields: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  getListPromise(contentGroup: ContentGroup): Promise<GroupHeader[]> {\r\n    return this.fetchPromise<GroupHeader[]>(webApiContentGroupItemlist, {\r\n      params: { appId: this.appId, guid: contentGroup.guid, part: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  saveList(contentGroup: ContentGroup, resortedList: GroupHeader[]) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiContentGroupItemlist), resortedList, {\r\n      params: { appId: this.appId, guid: contentGroup.guid, part: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  getAllLive(contentGroup: ContentGroup, refresh: Signal<unknown>) {\r\n    return httpResource<GroupHeader>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiContentGroupHeader),\r\n        params: { appId: this.appId, guid: contentGroup.guid }\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { JsonHelpers } from '../../../../shared/helpers/json.helpers';\r\nimport { ClipboardService } from '../../../../shared/services/clipboard.service';\r\n\r\n@Component({\r\n    selector: 'app-analyze-settings-value',\r\n    templateUrl: './analyze-settings-value.html',\r\n    styleUrls: ['./analyze-settings-value.scss'],\r\n    imports: [\r\n        MatRippleModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class AnalyzeSettingsValueComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n\r\n  constructor() { }\r\n\r\n  protected clipboard = transient(ClipboardService);\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n  \r\n  copy(value: string) {\r\n    value = JsonHelpers.tryParse(value) ?? value;\r\n    this.clipboard.copyToClipboard(value);\r\n  }\r\n}\r\n","<div matRipple class=\"value-box highlight\" [tippy]=\"value\" (click)=\"copy(value)\">\r\n  <span class=\"value\">{{ value }}</span>\r\n</div>\r\n","import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { SiteLanguage, SiteLanguagePermissions } from '../models/site-language.model';\r\nimport { SystemInfoSet } from '../models/system-info.model';\r\n\r\nconst webApiZoneRootGetLanguages = 'admin/zone/GetLanguages';\r\nconst webApiZoneRootSwitchLanguage = 'admin/zone/SwitchLanguage';\r\nconst webApiZoneRootGetSystemInfo = 'admin/zone/GetSystemInfo';\r\nconst webApiAppRootLanguages = 'admin/app/languages';\r\n\r\n@Injectable()\r\nexport class ZoneService extends HttpServiceBaseSignal {\r\n\r\n  getLanguageLive(refresh: Signal<unknown>) {\r\n    return httpResource<SiteLanguage[]>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiZoneRootGetLanguages),\r\n        params: { appId: this.appId }\r\n      });\r\n    });\r\n  }\r\n\r\n  async toggleLanguage(code: string, enable: boolean): Promise<number> {\r\n    return this.getStatusPromise(webApiZoneRootSwitchLanguage, {\r\n      params: { cultureCode: code, enable: enable.toString() },\r\n    });\r\n  }\r\n\r\n  getSystemInfoLive(refresh: Signal<unknown>) {\r\n    return httpResource<SystemInfoSet>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiZoneRootGetSystemInfo),\r\n      });\r\n    });\r\n  }\r\n\r\n  getLanguagesPermissionsLive(refresh: Signal<unknown>) {\r\n    return httpResource<SiteLanguagePermissions[]>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiAppRootLanguages),\r\n        params: { appId: this.appId }\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { EnvironmentSpecs } from '@2sic.com/2sxc-typings';\r\nimport { DialogContextApp } from '../models/dialog-context.models';\r\nimport { EavWindow } from '../models/eav-window.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n/**\r\n * This ensures that $2sxc is fully initialized with parameters which are provided later on\r\n * The appApi is being added in v12\r\n * It's important because in Oqtane the app-api root is different in from the normal admin-apis\r\n */\r\nexport function Update$2sxcEnvFromContext(appContext: DialogContextApp): void {\r\n  try {\r\n    const includedApiRoot = appContext?.Api;\r\n    if (!includedApiRoot)\r\n      return;\r\n\r\n    const old2sxcHeader = (window.$2sxc.env as any).header as EnvironmentSpecs;\r\n    const new2sxcHeader = { ...old2sxcHeader, appApi: includedApiRoot } as EnvironmentSpecs;\r\n    window.$2sxc.env.load(new2sxcHeader);\r\n  } catch { /* ignore */ }\r\n}\r\n","import { inject, Injectable } from '@angular/core';\r\nimport { DialogTypeConstants } from '../constants/dialog-type.constants';\r\n// tslint:disable-next-line:max-line-length\r\nimport { keyAppId, keyContentBlockId, keyDebug, keyDialog, keyExtras, keyIsShared, keyItems, keyModuleId, keyPartOfPage, keyUrl, keyZoneId, prefix } from '../constants/session.constants';\r\nimport { ViewOrFileIdentifier } from '../models/edit-form.model';\r\nimport { ItemIdHelper } from '../models/item-id-helper';\r\nimport { Context } from '../services/context';\r\nimport { ExtrasParam } from './dialog-url-params.model';\r\n\r\n/**\r\n * Service to open dialogs in a new window.\r\n */\r\n@Injectable()\r\nexport class DialogInNewWindowService {\r\n\r\n  protected context = inject(Context);\r\n\r\n  openCodeFile(path: string, isShared: boolean, templateId?: number) {\r\n    const form = {\r\n      items: [{\r\n        Path: path,\r\n        ...(templateId != null && ItemIdHelper.editId(templateId)),\r\n      }] as ViewOrFileIdentifier[]\r\n    };\r\n\r\n    const hashParams: Record<string, string> = {\r\n      ...this.#buildHashParam(keyDialog, DialogTypeConstants.Develop),\r\n      ...this.#buildHashParam(keyIsShared, isShared.toString()),\r\n      ...this.#buildHashParam(keyItems, JSON.stringify(form.items)),\r\n    };\r\n    const url = this.#buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openAppAdministration(zoneId: number, appId: number, tab?: string, scope?: string) {\r\n    const extras: ExtrasParam = {\r\n      ...(tab && { tab }),\r\n      ...(scope && { scope }),\r\n    };\r\n    const hashParams: Record<string, string> = {\r\n      ...this.#buildHashParam(keyZoneId, zoneId.toString()),\r\n      ...this.#buildHashParam(keyAppId, appId.toString()),\r\n      ...this.#buildHashParam(keyDialog, DialogTypeConstants.App),\r\n      ...(Object.keys(extras).length ? this.#buildHashParam(keyExtras, JSON.stringify(extras)) : ''),\r\n    };\r\n    const url = this.#buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  /** A lot of the link is identical when opening the admin-dialogs in a new window */\r\n  #buildSharedHashParams() {\r\n    const hashParams: Record<string, string> = {\r\n      ...this.#buildHashParam(keyZoneId, this.context.zoneId),\r\n      ...this.#buildHashParam(keyAppId, this.context.appId),\r\n      ...this.#buildHashParam(keyModuleId, this.context.moduleId?.toString()),\r\n      ...this.#buildHashParam(keyContentBlockId, this.context.contentBlockId?.toString()),\r\n      ...this.#buildHashParam(keyPartOfPage),\r\n      ...(sessionStorage.getItem(keyDebug) ? this.#buildHashParam(keyDebug) : {}),\r\n    };\r\n    return hashParams;\r\n  }\r\n\r\n  /** Encodes param if necessary */\r\n  #buildHashParam(key: string, value?: number | string) {\r\n    const rawKey = key.replace(prefix, '');\r\n    const valueTemp = value ?? sessionStorage.getItem(key);\r\n    const rawValue = encodeURIComponent(valueTemp);\r\n    const hashParam: Record<string, string> = { [rawKey]: rawValue };\r\n    return hashParam;\r\n  }\r\n\r\n  /** Builds the full (ugly) url with all the hash parameters */\r\n  #buildFullUrl(hashParams: Record<string, string>) {\r\n    const oldHref = sessionStorage.getItem(keyUrl);\r\n    const oldUrl = new URL(oldHref);\r\n    const newHref = oldUrl.origin + oldUrl.pathname + oldUrl.search;\r\n\r\n    const allHashParams: Record<string, string> = {\r\n      ...this.#buildSharedHashParams(),\r\n      ...hashParams,\r\n    };\r\n    const hashUrl = Object.entries(allHashParams).reduce((acc, [key, value]) => `${acc}&${key}=${value}`, '').replace('&', '#');\r\n    return newHref + hashUrl;\r\n  }\r\n}\r\n","<div class=\"eav-dialog-header\" eav-dialog-header>\r\n  <div class=\"eav-dialog-header__title\">{{ title }}</div>\r\n  @if (showClose) {\r\n    <button mat-icon-button mat-dialog-close [tippy]=\"closeTooltip\" (click)=\"onClose()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  }\r\n</div>","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from \"../directives/tippy.directive\";\r\n\r\n@Component({\r\n  selector: 'app-dialog-header',\r\n  templateUrl: './dialog-header.html',\r\n  imports: [\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    TippyDirective,\r\n  ]\r\n})\r\nexport class DialogHeaderComponent {\r\n  @Input() title: string = '';\r\n  @Input() showClose: boolean = true;\r\n  @Input() closeTooltip: string = 'Close dialog';\r\n  @Output() close = new EventEmitter<void>();\r\n\r\n  onClose() {\r\n    this.close.emit();\r\n  }\r\n}","import { Component, input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-rest-api-help-text',\r\n  imports: [],\r\n  templateUrl: './rest-api-help-text.html',\r\n  styleUrl: './rest-api-help-text.scss'\r\n})\r\nexport class RestApiHelpTextComponent {\r\n\r\n  apiTitle = input.required<string>();\r\n\r\n}\r\n","<div class=\"rest-helper-container\">\r\n  <span class=\"help-info-card-text\">\r\n    <span><strong> Select your Rest Api for {{apiTitle()}} </strong></span>\r\n    <br />\r\n    <span>\r\n      REST APIs in 2sxc allow you to connect your app with other systems or frontend code.<br />\r\n      You can create custom endpoints to send and receive data, automate processes, or expose business logic for your website and external\r\n      applications.\r\n    </span>\r\n  </span>\r\n</div>\r\n","import { CompareWith } from './models/compare-with.model';\r\nimport { HistoryAttribute, HistoryAttributeValue, HistoryItem } from './models/history-item.model';\r\nimport { Version, VersionEntityAttributeValues, VersionJsonParsed } from './models/version.model';\r\n\r\nexport function getHistoryItems(versions: Version[], page: number, pageSize: number, compareWith: CompareWith) {\r\n  if (versions == null || page == null || pageSize == null || compareWith == null)\r\n    return null;\r\n  const filtered = versions.slice((page - 1) * pageSize, page * pageSize);\r\n\r\n  const historyItems = calcHistoryItems(filtered, versions, compareWith);\r\n  return historyItems;\r\n}\r\n\r\nfunction calcHistoryItems(filteredVersions: Version[], versions: Version[], compareWith: CompareWith) {\r\n  return filteredVersions.map(version => ({\r\n    changeSetId: version.ChangeSetId,\r\n    attributes: calcHistoryAttributes(version, versions, compareWith),\r\n    historyId: version.HistoryId,\r\n    timeStamp: version.TimeStamp,\r\n    user: version.User,\r\n    versionNumber: version.VersionNumber,\r\n    isLastVersion: !versions.some(v => v.VersionNumber === version.VersionNumber + 1),\r\n  } satisfies HistoryItem));\r\n}\r\n\r\nfunction calcHistoryAttributes(version: Version, versions: Version[], compareWith: CompareWith) {\r\n  const currentDataTypes = (JSON.parse(version.Json) as VersionJsonParsed).Entity.Attributes;\r\n  const previousItem = compareWith === 'live' ? findLive(versions) : versions.find(v => v.VersionNumber === version.VersionNumber - 1);\r\n  const previousDataTypes = previousItem ? (JSON.parse(previousItem.Json) as VersionJsonParsed).Entity.Attributes : null;\r\n\r\n  const allAttributes: { name: string, dataType: string }[] = [];\r\n  if (currentDataTypes != null) {\r\n    Object.entries(currentDataTypes).forEach(([dataType, attributes]) => {\r\n      Object.keys(attributes).forEach(attributeName => {\r\n        if (allAttributes.find(a => a.name === attributeName && a.dataType === dataType) != null)\r\n          return;\r\n        allAttributes.push({ name: attributeName, dataType });\r\n      });\r\n    });\r\n  }\r\n  if (previousDataTypes != null) {\r\n    Object.entries(previousDataTypes).forEach(([dataType, attributes]) => {\r\n      Object.keys(attributes).forEach(attributeName => {\r\n        if (allAttributes.find(a => a.name === attributeName && a.dataType === dataType) != null)\r\n          return;\r\n        allAttributes.push({ name: attributeName, dataType });\r\n      });\r\n    });\r\n  }\r\n\r\n  const historyAttributes = allAttributes.map(attribute => {\r\n    const currentValues = currentDataTypes?.[attribute.dataType]?.[attribute.name];\r\n    const previousValues = previousDataTypes?.[attribute.dataType]?.[attribute.name];\r\n    return {\r\n      name: attribute.name,\r\n      dataType: attribute.dataType,\r\n      change: calcChangeType(currentValues, previousValues, true),\r\n      values: calcHistoryValues(currentValues, previousValues),\r\n    } satisfies HistoryAttribute;\r\n  });\r\n\r\n  return historyAttributes;\r\n}\r\n\r\nfunction findLive(versions: Version[]) {\r\n  let liveVersion = versions[0];\r\n  for (const version of versions) {\r\n    if (version.VersionNumber <= liveVersion.VersionNumber)\r\n      continue;\r\n    liveVersion = version;\r\n  }\r\n  return liveVersion;\r\n}\r\n\r\nfunction calcHistoryValues(values: VersionEntityAttributeValues, previousValues: VersionEntityAttributeValues) {\r\n  const allLangKeys: string[] = [];\r\n  if (values != null) {\r\n    Object.keys(values).forEach(lang => {\r\n      if (allLangKeys.includes(lang)) return;\r\n      allLangKeys.push(lang);\r\n    });\r\n  }\r\n  if (previousValues != null) {\r\n    Object.keys(previousValues).forEach(lang => {\r\n      if (allLangKeys.includes(lang)) return;\r\n      allLangKeys.push(lang);\r\n    });\r\n  }\r\n\r\n  const historyValues = allLangKeys.map(langKey => {\r\n    const currentValue = values?.[langKey];\r\n    const previousValue = previousValues?.[langKey];\r\n    return {\r\n      langKey,\r\n      value: currentValue,\r\n      oldValue: previousValue,\r\n      change: calcChangeType(currentValue, previousValue),\r\n    } satisfies HistoryAttributeValue;\r\n  });\r\n\r\n  return historyValues;\r\n}\r\n\r\nfunction calcChangeType(currentValue: any, previousValue: any, sortObjectKeys = false) {\r\n  let change: 'new' | 'deleted' | 'changed' | 'none';\r\n\r\n  if (sortObjectKeys) {\r\n    if (typeof currentValue === 'object') {\r\n      currentValue = sortKeysAlphabetically(currentValue);\r\n    }\r\n    if (typeof previousValue === 'object') {\r\n      previousValue = sortKeysAlphabetically(previousValue);\r\n    }\r\n  }\r\n\r\n  change = (currentValue != null && previousValue != null)\r\n    ? (JSON.stringify(currentValue) !== JSON.stringify(previousValue)) ?  'changed' : 'none'\r\n    : (currentValue != null) ? 'new' : 'deleted';\r\n\r\n  return change;\r\n}\r\n\r\nfunction sortKeysAlphabetically(obj: Record<string, any>): Record<string, any> {\r\n  if (typeof obj !== 'object') return obj;\r\n\r\n  return Object.keys(obj)\r\n    .sort()\r\n    .reduce((acc, key) => ({ ...acc, [key]: obj[key] }), {});\r\n}\r\n","import { MatTooltip, TooltipComponent } from './_tooltip-chunk.mjs';\nexport { MAT_TOOLTIP_DEFAULT_OPTIONS, MAT_TOOLTIP_SCROLL_STRATEGY, SCROLL_THROTTLE_MS, TOOLTIP_PANEL_CLASS, getMatTooltipInvalidPositionError } from './_tooltip-chunk.mjs';\nimport * as i0 from '@angular/core';\nimport { NgModule } from '@angular/core';\nimport { A11yModule } from '@angular/cdk/a11y';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { CdkScrollableModule } from '@angular/cdk/scrolling';\nimport 'rxjs/operators';\nimport '@angular/cdk/coercion';\nimport '@angular/cdk/keycodes';\nimport '@angular/common';\nimport '@angular/cdk/platform';\nimport '@angular/cdk/portal';\nimport 'rxjs';\nimport './_animation-chunk.mjs';\nimport '@angular/cdk/layout';\n\nclass MatTooltipModule {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTooltipModule,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.NgModule\n  });\n  static Éµmod = i0.ÉµÉµngDeclareNgModule({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTooltipModule,\n    imports: [A11yModule, OverlayModule, MatTooltip, TooltipComponent],\n    exports: [MatTooltip, TooltipComponent, BidiModule, CdkScrollableModule]\n  });\n  static Éµinj = i0.ÉµÉµngDeclareInjector({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatTooltipModule,\n    imports: [A11yModule, OverlayModule, BidiModule, CdkScrollableModule]\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatTooltipModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: [A11yModule, OverlayModule, MatTooltip, TooltipComponent],\n      exports: [MatTooltip, TooltipComponent, BidiModule, CdkScrollableModule]\n    }]\n  }]\n});\n\nexport { MatTooltip, MatTooltipModule, TooltipComponent };\n","import { ChangeDetectorRef, Component, Injector, OnDestroy, OnInit, Type, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NavigateFormResult } from '../../../edit/routing/edit-routing.service';\r\nimport { classLog } from '../../logging';\r\nimport { DialogConfig } from '../../models/dialog-config.model';\r\nimport { EavWindow } from '../../models/eav-window.model';\r\nimport { Context } from '../../services/context';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n@Component({\r\n  selector: 'app-dialog-entry',\r\n  templateUrl: './dialog-entry.html',\r\n  imports: [],\r\n  providers: [\r\n    Context, // this is used in the dialog to get the correct App\r\n  ]\r\n})\r\nexport class DialogEntryComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({ DialogEntryComponent });\r\n\r\n  #dialogData: Record<string, any>;\r\n  #dialog: MatDialogRef<any>;\r\n  #originalUrl: string;\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private context: Context,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    private injector: Injector,\r\n  ) {\r\n    const navigation = this.router.currentNavigation();\r\n    this.#dialogData = navigation?.extras?.state || {};\r\n  }\r\n\r\n  ngOnInit() {\r\n    const l = this.log.fn('ngOnInit');\r\n    const dialogConfig: DialogConfig = this.route.snapshot.data.dialog;\r\n    if (dialogConfig == null)\r\n      throw new Error(`Could not find config for dialog. Did you forget to add DialogConfig to route data?`);\r\n\r\n    l.a('Open dialog: ' + dialogConfig.name, { id: this.context.id, context: this.context });\r\n\r\n    dialogConfig.getComponent(this.injector).then(component => {\r\n      // spm Workaround for \"feature\" where you can't open new dialog while last one is still opening\r\n      // https://github.com/angular/components/commit/728cf1c8ebd49e089f4bae945511bb0918972c26\r\n      const dialog = (this.matDialog as any);\r\n      if (dialog._dialogAnimatingOpen && dialog._lastDialogRef)\r\n        (dialog._lastDialogRef as MatDialogRef<any>).afterOpened()\r\n          .subscribe(() => this.openDialogComponent(dialogConfig, component));\r\n      else\r\n        this.openDialogComponent(dialogConfig, component);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#dialog?.close();\r\n  }\r\n\r\n  // Open the dialog with the specified component and configuration\r\n  // separated into its own method for clarity\r\n  // and to allow for async component loading\r\n  private openDialogComponent(dialogConfig: DialogConfig, component: Type<any>) {\r\n    this.log.a(`Open dialog(initContext: ${dialogConfig.initContext})`, { name: dialogConfig.name, 'Contextid:': this.context.log.svcId, 'Context:': this.context });\r\n    if (dialogConfig.initContext)\r\n      this.context.init(this.route);\r\n\r\n    this.#originalUrl = this.router.url;\r\n\r\n    this.#dialog = this.matDialog.open(component, {\r\n      autoFocus: false,\r\n      backdropClass: 'dialog-backdrop',\r\n      closeOnNavigation: false,\r\n      data: this.#dialogData,\r\n      panelClass: [\r\n        'dialog-panel',\r\n        `dialog-panel-${dialogConfig.panelSize}`,\r\n        dialogConfig.showScrollbar ? 'show-scrollbar' : 'no-scrollbar',\r\n        ...(dialogConfig.panelClass ? dialogConfig.panelClass : []),\r\n      ],\r\n      // spm NOTE: position used to force align-items: flex-start; on cdk-global-overlay-wrapper.\r\n      // Real top margin is overwritten in css e.g. dialog-panel-large\r\n      position: { top: '0' },\r\n      viewContainerRef: this.viewContainerRef,\r\n    });\r\n\r\n    // Workaround / Improvement for Angular Material Dialog and Popover issue\r\n    // With Angular 21 the popover attribute is added to the overlay container\r\n    // and causes issues with other elements like tooltips inside the dialog\r\n    // access the overlay host element\r\n    const dialogOverlayRef = this.#dialog[\"_ref\"].overlayRef._host;\r\n    // remove popover attribute to avoid issues\r\n    dialogOverlayRef.removeAttribute('popover');\r\n\r\n    // Handle dialog close event\r\n    // When the dialog is closed, navigate or close popup as needed\r\n    this.#dialog.afterClosed().subscribe((data: any) => {\r\n      this.log.a('Dialog was closed - name:' + dialogConfig.name, { data });\r\n\r\n      const navRes = data as NavigateFormResult;\r\n      if (navRes?.navigateUrl != null) {\r\n        this.router.navigate([navRes.navigateUrl]);\r\n        return;\r\n      }\r\n\r\n      // Route already changed -> do nothing since we're not on the same view anymore\r\n      if (this.router.url !== this.#originalUrl) {\r\n        return;\r\n      }\r\n\r\n      // If this is the last opened dialog, close the popup to get back to the original site\r\n      if (this.route.pathFromRoot.length <= 3) {\r\n        try {\r\n          window.parent.$2sxc.totalPopup.close();\r\n        }\r\n        catch (error) { }\r\n        return;\r\n      }\r\n\r\n      // Determine the correct parent route to navigate back to after dialog closes.\r\n      // Explanation:\r\n      // - If the current route has a URL segment (snapshot.url.length > 0),\r\n      //   it means we're on a child route, so we use this.route.parent.\r\n      // - If not, we're likely on a route added purely for the dialog (no URL segment),\r\n      //   so we need to go up two levels (this.route.parent.parent) to reach the actual parent.\r\n      const parent = this.route.snapshot.url.length > 0\r\n        ? this.route.parent\r\n        : this.route.parent.parent;\r\n      this.router.navigate(['./'], { relativeTo: parent, state: data });\r\n    });\r\n\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n}\r\n","import { AbstractControl } from '@angular/forms';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { FieldValueHelpers } from '../helpers/field-value.helpers';\r\nimport { ValidationMsgHelper } from '../validation/validation-messages.helpers';\r\nimport { AbstractControlPro } from '../validation/validation.helpers';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  constructor: false,\r\n  markTouched: false,\r\n  set: false,\r\n  disable: false,\r\n  getErrors: true,\r\n  fields: [...DebugFields, '*'],\r\n};\r\n\r\nconst pfx = 'ValidationMessage.';\r\n\r\n/**\r\n * Provides information about the UI Control, but NOT the value.\r\n * It is used to simplify the logic when interacting with the Angular Virtual Form.\r\n */\r\nexport class UiControl {\r\n\r\n  log = classLog({UiControl}, logSpecs);\r\n\r\n  constructor(\r\n    public control: AbstractControl,\r\n    private name = 'unknown',\r\n    private moreDisabled: boolean = false,\r\n  ) {\r\n    // Patch control with dummy object for the nullable case where we're just creating a fake control...\r\n    this.control ??= { dirty: false, invalid: false, touched: false, value: null, disabled: false } as AbstractControl;\r\n    this.log.extendName(`[${name}]`);\r\n    this.log.aIfInList('fields', this.name, { moreDisabled }, 'constructor');\r\n  }\r\n\r\n  static emptyControl() {\r\n    return new UiControl({ dirty: false, invalid: false, touched: false, value: null, disabled: false } as AbstractControl);\r\n  }\r\n\r\n  //#region simple direct properties & complex properties\r\n  get dirty() { return this.control.dirty; }\r\n  get invalid() { return this.control.invalid; }\r\n  get touched() { return this.control.touched; }\r\n  get disabled() { return this.control.disabled || this.moreDisabled; }\r\n  get touchedAndInvalid() { return this.control.touched && this.control.invalid; }\r\n  //#endregion\r\n\r\n  //#region methods\r\n\r\n  markTouched(): void {\r\n    this.log.aIfInList('fields', this.name, null, 'markTouched');\r\n    UiControl.markTouched(this.control);\r\n  }\r\n\r\n  setIfChanged(newValue: FieldValue): void {\r\n    const before = this.control.value;\r\n    this.log.aIfInList('fields', this.name, { before, newValue }, 'setIfChanged');\r\n    if (isEqual(newValue, this.control.value)) return;\r\n    this.#set(newValue);\r\n  }\r\n\r\n  /** Use to update form controls value */\r\n  #set(newValue: FieldValue): void {\r\n    const control = this.control;\r\n    const before = control.value;\r\n    this.log.aIfInList('fields', this.name, { before, newValue }, 'set');\r\n\r\n    if (!control.touched)\r\n      control.markAsTouched();\r\n\r\n    if (!control.dirty && !FieldValueHelpers.fieldValuesAreEqual(before, newValue))\r\n      control.markAsDirty();\r\n\r\n    // Note: 2024-10-21 ca. 18.02 we have some timing issues, error always seems to show previous error; maybe fixed now, otherwise revisit\r\n    // Set value must happen at the end, otherwise errors will be late by one cycle\r\n    // for example, they could show \"required\" after the value was\r\n    control.patchValue(newValue);\r\n  }\r\n\r\n  disable(disable: boolean): void {\r\n    this.log.aIfInList('fields', this.name, null, `disable: ${disable}`);\r\n    UiControl.disable(this.control, disable);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region private helpers\r\n\r\n  /** TODO: Try to remove this by assigning controls [formControlName] in [formGroup] */\r\n  static markTouched(control: AbstractControl): void {\r\n    if (control.touched)\r\n      return;\r\n\r\n    control.markAsTouched();\r\n    control.updateValueAndValidity();\r\n  }\r\n\r\n  /** Disables/enables control if not already disabled/enabled. Use this helper to trigger fewer events on the form */\r\n  static disable(control: AbstractControl, disable: boolean) {\r\n    if (control.disabled === disable)\r\n      return;\r\n\r\n    if (disable)\r\n      control.disable();\r\n    else\r\n      control.enable();\r\n  }\r\n  //#endregion\r\n\r\n  /** Calculates error message */\r\n  getErrors(): string {\r\n    const control = this.control;\r\n    const errors = control.errors;\r\n    const l = this.log.fnIfInFields('getErrors', this.name, { control, name: this.name });\r\n    if (!control.invalid)\r\n      return l.r('', 'valid');\r\n    if (!control.dirty && !control.touched)\r\n      return l.r('', 'not dirty or touched');\r\n\r\n    for (const errorKey of Object.keys(errors)) {\r\n      const error = (errorKey === 'formulaError')\r\n        ? control.errors['formulaMessage'] ?? ValidationMsgHelper.messages[errorKey]?.(true)\r\n        : ValidationMsgHelper.messages[errorKey]?.(true);\r\n      if (error)\r\n        return l.r(error, 'error found');\r\n    }\r\n\r\n    return l.r('', 'no error');\r\n  }\r\n\r\n  #warningMessages: Record<string, string> = {\r\n    jsonWarning: `${pfx}JsonWarning`,\r\n    formulaWarning: `${pfx}NotValid`,\r\n  };\r\n\r\n  getWarnings(): string {\r\n    const control = this.control as AbstractControlPro;\r\n    if (control._warning == null)\r\n      return '';\r\n    if (!control.dirty && !control.touched)\r\n      return '';\r\n\r\n    let warning = '';\r\n    for (const warningKey of Object.keys(control._warning)) {\r\n      warning = (warningKey === 'formulaWarning')\r\n        ? control._warning['formulaMessage'] ?? this.#warningMessages[warningKey]\r\n        : this.#warningMessages[warningKey];\r\n      if (warning)\r\n        break;\r\n    }\r\n    return warning;\r\n  }\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const replaceContentDialog: DialogConfig = {\r\n  name: 'REPLACE_CONTENT_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ReplaceContentComponent } = await import('./replace-content');\r\n    return ReplaceContentComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { EditRoutesNoHistory } from '../edit/edit.routing';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry';\r\nimport { replaceContentDialog } from './replace-content-dialog.config';\r\n\r\nexport const replaceContentRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: replaceContentDialog },\r\n    children: [\r\n      // Note 2024-07-01 2dm - not sure why it is configured without history, but to be safe I'll keep it for now\r\n      ...EditRoutesNoHistory\r\n    ],\r\n  },\r\n];\r\n"],"x_google_ignoreList":[15,39]}