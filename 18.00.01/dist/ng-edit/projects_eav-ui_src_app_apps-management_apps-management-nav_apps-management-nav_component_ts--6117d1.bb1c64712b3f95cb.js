"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts--6117d1","projects_eav-ui_src_app_app-administration_services_content-types_service_ts-projects_eav-ui_-a8fb8f"],{7693:(x,E,e)=>{e.d(E,{X:()=>r,g:()=>h});var t=e(271),g=e(8873),u=e(8559),m=e(6443),p=e(4821);const r="admin/type/",a="admin/type/scopes";let h=(()=>{class s{constructor(_,v,D){this.http=_,this.context=v,this.dnnContext=D}apiUrl(_){return this.dnnContext.$2sxc.http.apiUrl(_)}retrieveContentType(_){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:_}})}retrieveContentTypes(_){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:_}})}getScopes(){return this.http.get(this.apiUrl(a),{params:{appId:this.context.appId.toString()}}).pipe((0,t.T)(_=>{const v=_.old;return Object.keys(v).map(y=>({name:v[y],value:y}))}))}getScopesV2(){return this.http.get(this.apiUrl(a),{params:{appId:this.context.appId.toString()}}).pipe((0,t.T)(_=>_.scopes))}save(_){return this.http.post(this.apiUrl("admin/type/save"),_,{params:{appid:this.context.appId.toString()}})}delete(_){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:_.StaticName}})}import(_){const v=new FormData;for(const D of _)v.append("File",D);return this.http.post(this.apiUrl("admin/type/import"),v,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(_){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:_}})}static#t=this.\u0275fac=function(v){return new(v||s)(u.KVO(m.Qq),u.KVO(g.o),u.KVO(p.ob))};static#e=this.\u0275prov=u.jDH({token:s,factory:s.\u0275fac})}return s})()},6163:(x,E,e)=>{e.d(E,{t:()=>i});var t=e(6301),g=e(271),u=e(8764),m=e(8873),p=e(8147),r=e(9431),d=e(8559),l=e(6443);let i=(()=>{class c{constructor(s,O,_){this.http=s,this.context=O,this.globalConfigService=_,this.log=new p.B("GlobalDialogConfigService",!1),this.dialogSettings$={},this.log.a(`using context #${this.context.log.svcId}`)}getShared$(s){return this.log.a("getShared$ appId: "+s),this.dialogSettings$[s]??=this.getDialogSettings(s,"getShared$").pipe((0,t.t)({refCount:!1})),this.dialogSettings$[s]}getDialogSettings(s,O){return this.log.a("getDialogSettings",{appId:s,reqBy:O}),this.http.get("admin/dialog/settings",{params:{appId:s??this.context.appId.toString()}}).pipe((0,g.T)(_=>(_.Context.Language.List=_.Context.Language.List.filter(v=>v.IsEnabled),_)),(0,u.M)(_=>{this.globalConfigService.allowDebug(_.Context.Enable.DebugMode)}))}static#t=this.\u0275fac=function(O){return new(O||c)(d.KVO(l.Qq),d.KVO(m.o),d.KVO(r.B))};static#e=this.\u0275prov=d.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},5445:(x,E,e)=>{e.d(E,{Cu:()=>r.Cu,JL:()=>r.JL,Mk:()=>r.Mk,ei:()=>r.ei,gs:()=>g.g,tn:()=>t.t,vN:()=>r.vN,xR:()=>r.xR,y0:()=>d.y});var t=e(6163),g=e(7693),r=(e(1475),e(320),e(8624),e(4079)),d=e(2570)},4079:(x,E,e)=>{e.d(E,{Cu:()=>s,JL:()=>O,Mk:()=>c,ei:()=>h,vN:()=>_,xR:()=>v});var t=e(4600),g=e(6647),u=e(271),m=e(693),p=e(8873),r=e(9234),d=e(8559),l=e(6443),a=e(4821);const c="admin/query/Run",h="admin/query/DebugStream",s="admin/query/Save",O="admin/query/Get",_="admin/query/DataSources";let v=(()=>{class D{constructor(P,I,M){this.http=P,this.context=I,this.dnnContext=M}getAll(P){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(r.Gg),{params:{appId:this.context.appId.toString(),contentType:P}})}importQuery(P){return(0,t.H)((0,m.n)(P)).pipe((0,g.n)(I=>this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:this.context.appId.toString(),ContentBase64:I})),(0,u.T)(I=>({Success:I,Messages:[]})))}clonePipeline(P){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:P.toString(),appId:this.context.appId.toString()}})}delete(P){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:P.toString()}})}static#t=this.\u0275fac=function(I){return new(I||D)(d.KVO(l.Qq),d.KVO(p.o),d.KVO(a.ob))};static#e=this.\u0275prov=d.jDH({token:D,factory:D.\u0275fac})}return D})()},2570:(x,E,e)=>{e.d(E,{y:()=>o});var t=e(8873),g=e(8559),u=e(6443),m=e(4821);const p="admin/view/",r=p+"all",d=p+"delete",l=p+"import",a=p+"polymorphism",n=p+"usage";let o=(()=>{class i{constructor(h,s,O){this.http=h,this.context=s,this.dnnContext=O}getAll(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(r),{params:{appId:this.context.appId.toString()}})}delete(h){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(d),{params:{appId:this.context.appId.toString(),Id:h.toString()}})}import(h){const s=new FormData;return s.append("File",h),this.http.post(this.dnnContext.$2sxc.http.apiUrl(l),s,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}export(h){const s=this.dnnContext.$2sxc.http.apiUrl(p+"json")+"?appId="+this.context.appId+"&viewId="+h;window.open(s,"_blank","")}getPolymorphism(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(a),{params:{appId:this.context.appId.toString()}})}getUsage(h){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(n),{params:{appId:this.context.appId.toString(),guid:h}})}static#t=this.\u0275fac=function(s){return new(s||i)(g.KVO(u.Qq),g.KVO(t.o),g.KVO(m.ob))};static#e=this.\u0275prov=g.jDH({token:i,factory:i.\u0275fac})}return i})()},7756:(x,E,e)=>{e.r(E),e.d(E,{AppsManagementNavComponent:()=>I});var t=e(8559),g=e(2159),u=e(1735),m=e(8873),p=e(7049),r=e(5445);const d=[{name:"System",path:"system",icon:"settings",svgIcon:!1,tippy:"System Info",child:[{name:"Register",path:"registration",icon:"how_to_reg",svgIcon:!1,tippy:"Register this System on 2sxc Patrons"}]},{name:"Apps",path:"list",icon:"star_border",svgIcon:!1,tippy:"Apps"},{name:"Languages",path:"languages",icon:"translate",svgIcon:!1,tippy:"Languages"},{name:"Extensions / Features",path:"license",icon:"tune",svgIcon:!1,tippy:"Extensions and Features"}];var l=e(4175),a=e(3011),n=e(3840),o=e(9552),i=e(1808),c=e(5699),h=e(7941),s=e(7912);const O=["sidenav"],_=(M,T)=>T.path;function v(M,T){if(1&M&&(t.j41(0,"mat-icon",13),t.EFF(1,"chevron_right"),t.k0s(),t.EFF(2)),2&M){const C=t.XpG().$implicit;t.R7$(2),t.SpI(" ",C," ")}}function D(M,T){if(1&M&&(t.qex(0),t.DNE(1,v,3,1),t.bVm()),2&M){const C=T.last;t.R7$(),t.vxM(1,C?1:-1)}}function y(M,T){}function P(M,T){1&M&&t.nrm(0,"app-nav-item-list",10),2&M&&t.Y8G("navItem",T.$implicit)}let I=(()=>{class M extends u.V{constructor(C,f,A,b,U){super(C,f),this.router=C,this.route=f,this.dialogRef=A,this.context=b,this.media=U,this.globalDialogConfigSvc=(0,t.WQX)(r.tn),this.zoneId=this.context.zoneId,this.smallScreen=this.media.matchMedia("(max-width: 1000px)"),this.sideNavOpened=!this.smallScreen.matches,this.navItems=d}ngOnInit(){this.fetchDialogSettings(),this.subscriptions.add(this.childDialogClosed$().subscribe(()=>this.fetchDialogSettings())),this.smallScreen.addEventListener("change",C=>(this.sidenav.opened=!C.matches,this.sidenav.mode=C.matches?"over":"side"))}closeDialog(){this.dialogRef.close()}fetchDialogSettings(){this.globalDialogConfigSvc.getShared$(0).subscribe()}static#t=this.\u0275fac=function(f){return new(f||M)(t.rXU(g.Ix),t.rXU(g.nX),t.rXU(h.CP),t.rXU(m.o),t.rXU(s.DY))};static#e=this.\u0275cmp=t.VBU({type:M,selectors:[["app-apps-management-nav"]],viewQuery:function(f,A){if(1&f&&t.GBs(O,5),2&f){let b;t.mGM(b=t.lsd())&&(A.sidenav=b.first)}},standalone:!0,features:[t.Vt3,t.aNF],decls:26,vars:4,consts:[["emptyTemplate",""],["sidenav",""],["appToggleDebug",""],[1,"toolbar-container"],[1,"menu-container",3,"click"],[3,"separator"],[4,"xngBreadcrumbItem"],[1,"toolbar-spacer"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"mode","opened"],[3,"navItem"],[1,"sideNav-bottom-info"],[1,"container-content"],[1,"breadcrumb-icon"]],template:function(f,A){if(1&f){const b=t.RV6();t.j41(0,"mat-toolbar",2)(1,"div",3)(2,"mat-icon",4),t.bIt("click",function(){t.eBV(b);const R=t.sdS(17);return t.Njj(R.opened=!R.opened)}),t.EFF(3,"menu"),t.k0s(),t.j41(4,"div")(5,"span"),t.EFF(6),t.k0s()(),t.j41(7,"xng-breadcrumb",5),t.DNE(8,D,2,1,"ng-container",6),t.k0s(),t.DNE(9,y,0,0,"ng-template",null,0,t.C5r),t.k0s(),t.nrm(11,"span",7),t.j41(12,"button",8),t.bIt("click",function(){return t.eBV(b),t.Njj(A.closeDialog())}),t.j41(13,"mat-icon"),t.EFF(14,"close"),t.k0s()()(),t.j41(15,"mat-sidenav-container",2)(16,"mat-sidenav",9,1),t.Z7z(18,P,1,1,"app-nav-item-list",10,_),t.j41(20,"div",11)(21,"p"),t.EFF(22,"use Burger icon to show/hide menu"),t.k0s()()(),t.j41(23,"mat-sidenav-content")(24,"div",12),t.nrm(25,"router-outlet"),t.k0s()()()}if(2&f){const b=t.sdS(10);t.R7$(6),t.SpI(" Manage Zone ",A.zoneId," "),t.R7$(),t.Y8G("separator",b),t.R7$(9),t.Y8G("mode",A.smallScreen.matches?"over":"side")("opened",A.sideNavOpened),t.R7$(2),t.Dyx(A.navItems)}},dependencies:[o.s5,o.KQ,n.m_,n.An,a._S,a.Dg,a._Y,l.Hl,l.iY,p.vg,p.LG,p.US,p.El,g.n3,i.a,c.V],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid rgba(0,0,0,.1);position:sticky;top:0;z-index:10;flex:1 0 74px}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{margin-right:16px;cursor:pointer}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid rgba(0,0,0,.2);border-radius:16px 0;margin-right:16px;-webkit-user-select:none;user-select:none;text-shadow:none;cursor:pointer;display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]   .mat-icon-admin[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:295px;border-right:1px solid rgba(0,0,0,.1)}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]   .sideNav-bottom-info[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;font-size:12px}.container-content[_ngcontent-%COMP%]{height:100%}.active[_ngcontent-%COMP%]{background-color:#8080801a}  .xng-breadcrumb-separator{margin-left:0!important;margin-right:0!important}  .mat-drawer-container{background-color:transparent!important}"]})}return M})()},1772:(x,E,e)=>{e.d(E,{I:()=>a,u:()=>l});var t=e(6647),g=e(9452),u=e(3550),m=e(8873),p=e(8559),r=e(6443),d=e(4821);const l="admin/app/";let a=(()=>{class n{constructor(i,c,h){this.http=i,this.context=c,this.dnnContext=h}importApp(i,c,h=!1){const s=new FormData;return s.append("File",i),s.append("Name",c??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(l+"Import"),s,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(O=>{if(h&&O.Messages[0]?.MessageType===u.G1.Warning){const _=prompt(O.Messages[0].Text+" Would you like to install it using another folder name?");if(_)return this.importApp(i,_,!0)}return(0,g.of)(O)}))}static#t=this.\u0275fac=function(c){return new(c||n)(p.KVO(r.Qq),p.KVO(m.o),p.KVO(d.ob))};static#e=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})()},1735:(x,E,e)=>{e.d(E,{V:()=>a});var t=e(2159),g=e(1567),u=e(3037),m=e(271),p=e(5057),r=e(3176),d=e(8147);class a extends r.${constructor(o,i,c){super(),this.router=o,this.route=i,this.log=c,this.log??=new d.B("BaseComponent",!1)}childDialogClosed$(){return this.router.events.pipe((0,g.p)(o=>o instanceof t.wF),(0,u.Z)(!!this.route.snapshot.firstChild),(0,m.T)(()=>!!this.route.snapshot.firstChild),(0,p.J)(),(0,g.p)(([o,i])=>o&&!i))}}},693:(x,E,e)=>{function t(u){return new Promise((m,p)=>{const r=new FileReader;r.readAsDataURL(u),r.onload=()=>{m(r.result.split(",")[1])},r.onerror=d=>{p(d)}})}function g(u){return new Promise((m,p)=>{const r=new FileReader;r.readAsText(u),r.onload=()=>{m(r.result)},r.onerror=d=>{p(d)}})}e.d(E,{d:()=>g,n:()=>t})},9234:(x,E,e)=>{e.d(E,{Gg:()=>h,Tr:()=>s,gb:()=>c});var t=e(1567),g=e(6647),u=e(6301),m=e(271),p=e(4979),r=e(8147),d=e(4839),l=e(5437),a=e(8559),n=e(6443),o=e(4821);const c="admin/entity/",h="admin/entity/list";let s=(()=>{class O extends p.V{constructor(v,D){super(new r.B("EntityService",!1)),this.http=v,this.dnnContext=D,this.queryService=(0,l.d)(d.c)}getEntities$(v){return v.pipe((0,t.p)(D=>null!=D),(0,g.n)(D=>this.getAvailableEntities(D.contentTypeName).pipe((0,u.t)(1))))}getAvailableEntities(v,D){var y=this.log.rxTap("getEntities",{enabled:!0});return this.queryService.getEntities({contentTypes:[v],itemIds:D,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe(y.pipe(),(0,m.T)(P=>P.Default))}delete(v,D,y,P,I,M){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(c+"delete"),{params:{contentType:D,id:y.toString(),appId:v,force:P.toString(),...I&&{parentId:I.toString()},...I&&M&&{parentField:M}}})}static#t=this.\u0275fac=function(D){return new(D||O)(a.KVO(n.Qq),a.KVO(o.ob))};static#e=this.\u0275prov=a.jDH({token:O,factory:O.\u0275fac})}return O})()},9431:(x,E,e)=>{e.d(E,{B:()=>p});var t=e(8559),g=e(9074),u=e(8172),m=e(3347);let p=(()=>{class r{constructor(l){this.snackBar=l,this.debugState=(0,t.vPA)(null),this.isDebug=(0,t.EWP)(()=>!!this.debugState()?.allowDebugMode&&!!this.debugState()?.debugEnabled),this.debugEnabled$=(0,g.br)(this.isDebug);const a={id:0,debugEnabled:"true"===sessionStorage.getItem(u.tn),allowDebugMode:!1};this.debugState.set(a)}allowDebug(l){const a=this.debugState();if(a.allowDebugMode===l)return;const n={...a,allowDebugMode:l};this.debugState.set(n)}toggleDebugEnabled(){const l=this.debugState();if(!l.allowDebugMode)return void this.snackBar.open("You do not have permissions to enter developer mode",null,{duration:3e3});const a={...l,debugEnabled:!l.debugEnabled};this.debugState.set(a),this.snackBar.open(a.debugEnabled?"developer mode on":"developer mode off",null,{duration:3e3})}static#t=this.\u0275fac=function(a){return new(a||r)(t.KVO(m.UG))};static#e=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},4839:(x,E,e)=>{e.d(E,{c:()=>d});var t=e(8147),g=e(4979),u=e(8873),m=e(8559),p=e(6443);let d=(()=>{class l extends g.V{constructor(n,o){super(new t.B("QueryService",!1)),this.http=n,this.context=o}getAvailableEntities(n,o,i,c){this.log.a("getAvailableEntities",{queryUrl:n,params:o,fields:i,entitiesFilter:c});const h=!!o,v=(((o?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(h?`&${o}`:"")+"&$select="+(i??"")).substring(1);return this.http.post(`app/auto/query/${n}?${v}`,{Guids:c})}getEntities({contentTypes:n,itemIds:o,fields:i,log:c}){this.log.a(`getEntities(${c})`,{contentTypes:n,itemIds:o,fields:i});const s=("&typeNames="+(n?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(o?.join(",")??"")+"&$select="+(i??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${s}`,{})}static#t=this.\u0275fac=function(o){return new(o||l)(m.KVO(p.Qq),m.KVO(u.o))};static#e=this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}return l})()},9074:(x,E,e)=>{e.d(E,{br:()=>d,ot:()=>l});var t=e(8559),g=e(6042);function d(a,n){!n?.injector&&(0,t.Af3)(d);const o=n?.injector??(0,t.WQX)(t.zZn),i=new g.m(1),c=(0,t.QZP)(()=>{let h;try{h=a()}catch(s){return void(0,t.O8t)(()=>i.error(s))}(0,t.O8t)(()=>i.next(h))},{injector:o,manualCleanup:!0});return o.get(t.abz).onDestroy(()=>{c.destroy(),i.complete()}),i.asObservable()}function l(a,n){const o=!n?.manualCleanup;o&&!n?.injector&&(0,t.Af3)(l);const i=o?n?.injector?.get(t.abz)??(0,t.WQX)(t.abz):null;let c;c=(0,t.vPA)(n?.requireSync?{kind:0}:{kind:1,value:n?.initialValue});const h=a.subscribe({next:s=>c.set({kind:1,value:s}),error:s=>{if(n?.rejectErrors)throw s;c.set({kind:2,error:s})}});return i?.onDestroy(h.unsubscribe.bind(h)),(0,t.EWP)(()=>{const s=c();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new t.wOt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts--6117d1.bb1c64712b3f95cb.js.map