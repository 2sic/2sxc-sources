"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_permissions_permissions_component_ts"],{7319:(T,f,t)=>{t.d(f,{T:()=>p});var h=t(8873),r=t(9234),s=t(8559),m=t(6443),e=t(4821);let p=(()=>{class i{constructor(a,l,o){this.http=a,this.context=l,this.dnnContext=o}create(a,l){return this.http.post(`app/auto/data/${a}`,l,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}update(a,l,o){return this.http.post(`app/auto/data/${a}/${l}`,o,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}delete(a,l,o){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(r.gb+"delete"),{params:{contentType:a,id:l.toString(),appId:this.context.appId.toString(),force:o.toString()}})}static#t=this.\u0275fac=function(l){return new(l||i)(s.KVO(m.Qq),s.KVO(h.o),s.KVO(e.ob))};static#e=this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac})}return i})()},2871:(T,f,t)=>{t.d(f,{J:()=>s});var h=t(3840),r=t(8559);let s=(()=>{class m{constructor(){this.trueIcon="check_circle",this.falseIcon="circle"}agInit(p){let i=p.value;p.reverse&&(i=!i),p.trueIcon&&(this.trueIcon=p.trueIcon),p.falseIcon&&(this.falseIcon=p.falseIcon),this.icon=i?this.trueIcon:this.falseIcon}refresh(p){return!0}static#t=this.\u0275fac=function(i){return new(i||m)};static#e=this.\u0275cmp=r.VBU({type:m,selectors:[["app-rest-api-true-false"]],standalone:!0,features:[r.aNF],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(i,_){1&i&&(r.j41(0,"div",0)(1,"mat-icon"),r.EFF(2),r.k0s()()),2&i&&(r.R7$(2),r.JRh(_.icon))},dependencies:[h.m_,h.An],encapsulation:2})}return m})()},2458:(T,f,t)=>{t.r(f),t.d(f,{PermissionsComponent:()=>B});var h=t(7941),r=t(9184),s=t(5797),m=t(9999),e=t(271),p=t(1735),i=t(6378),_=t(251),a=t(52),l=t(3216),o=t(3840),c=t(5060),n=t(8559);let g=(()=>{class P{agInit(d){this.params=d}refresh(d){return!0}deletePermission(){this.params.onDelete(this.params.data)}static#t=this.\u0275fac=function(u){return new(u||P)};static#e=this.\u0275cmp=n.VBU({type:P,selectors:[["app-permissions-actions"]],standalone:!0,features:[n.aNF],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"eav-grid-action-button","highlight",3,"click"]],template:function(u,v){1&u&&(n.j41(0,"div",0)(1,"div",1),n.bIt("click",function(){return v.deletePermission()}),n.j41(2,"mat-icon"),n.EFF(3,"delete"),n.k0s()()())},dependencies:[c.pZ,c.r6,o.m_,o.An]})}return P})();var C=t(4900),y=t(1828),O=t(316),I=t(4175),M=t(7319),D=t(7037),x=t(5437),R=t(3347),F=t(9841);function A(P,U){if(1&P){const d=n.RV6();n.j41(0,"div",0)(1,"div",1)(2,"div",2),n.EFF(3,"Permissions"),n.k0s(),n.j41(4,"button",3),n.bIt("click",function(){n.eBV(d);const v=n.XpG();return n.Njj(v.closeDialog())}),n.j41(5,"mat-icon"),n.EFF(6,"close"),n.k0s()()(),n.j41(7,"div",4),n.nrm(8,"router-outlet"),n.j41(9,"div",5),n.nrm(10,"ag-grid-angular",6),n.k0s(),n.j41(11,"mat-dialog-actions",7)(12,"button",8),n.bIt("click",function(){n.eBV(d);const v=n.XpG();return n.Njj(v.editPermission(null))}),n.j41(13,"mat-icon"),n.EFF(14,"add"),n.k0s()()()()()}if(2&P){const d=n.XpG();n.R7$(10),n.Y8G("rowData",U.permissions)("gridOptions",d.gridOptions)}}let B=(()=>{class P extends p.V{constructor(d,u,v,E){super(d,u),this.router=d,this.route=u,this.dialogRef=v,this.snackBar=E,this.permissions$=new s.t(void 0),this.gridOptions=this.buildGridOptions(),this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills={[a.YX.metadata.language.targetType]:{PermissionType:"language"}},this.permissionsService=(0,x.d)(C.K)}ngOnInit(){this.fetchPermissions(),this.subscriptions.add(this.childDialogClosed$().subscribe(()=>{this.fetchPermissions()})),this.viewModel$=(0,m.z)([this.permissions$]).pipe((0,e.T)(([d])=>({permissions:d})))}ngOnDestroy(){this.permissions$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}fetchPermissions(){this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(d=>{this.permissions$.next(d)})}editPermission(d){let u;u=null==d?{items:[{ContentTypeName:a.YX.contentTypes.permissions,For:{Target:Object.values(a.YX.metadata).find(E=>E.targetType===this.targetType)?.target??this.targetType.toString(),TargetType:this.targetType,...this.keyType===a.YX.keyTypes.guid&&{Guid:this.key},...this.keyType===a.YX.keyTypes.number&&{Number:parseInt(this.key,10)},...this.keyType===a.YX.keyTypes.string&&{String:this.key}},...this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]}}]}:{items:[{EntityId:d.Id}]};const v=(0,l.s)(u);this.router.navigate([`edit/${v}`],{relativeTo:this.route})}deletePermission(d){confirm(`Delete '${d.Title}' (${d.Id})?`)&&(this.snackBar.open("Deleting..."),this.permissionsService.delete(d.Id).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchPermissions()}))}buildGridOptions(){return{..._.C,columnDefs:[{...y.r.Id,cellRenderer:i.L,cellRendererParams:{tooltipGetter:v=>`ID: ${v.Id}\nGUID: ${v.Guid}`}},{...y.r.TextWide,headerName:"Name",field:"Title",sort:"asc",onCellClicked:u=>{this.editPermission(u.data)}},{...y.r.TextWide,field:"Identity"},{...y.r.TextWide,field:"Condition"},{...y.r.Character,field:"Grant"},{...y.r.ActionsPinnedRight1,cellRenderer:g,cellRendererParams:{onDelete:v=>this.deletePermission(v)}}]}}static#t=this.\u0275fac=function(u){return new(u||P)(n.rXU(r.Ix),n.rXU(r.nX),n.rXU(h.CP),n.rXU(R.UG))};static#e=this.\u0275cmp=n.VBU({type:P,selectors:[["app-permissions"]],standalone:!0,features:[n.Jv_([M.T]),n.Vt3,n.aNF],decls:2,vars:3,consts:[[1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(u,v){if(1&u&&(n.DNE(0,A,15,2,"div",0),n.nI1(1,"async")),2&u){let E;n.vxM(0,(E=n.bMT(1,1,v.viewModel$))?0:-1,E)}},dependencies:[I.Hl,I.iY,I.Sr,o.m_,o.An,r.n3,h.E7,O.Jj,D.p,F.xs]})}return P})()},401:(T,f,t)=>{t.d(f,{T:()=>p});var h=t(8873),r=t(8559),s=t(6443),m=t(4821);let p=(()=>{class i{constructor(a,l,o){this.http=a,this.context=l,this.dnnContext=o}getMetadata(a,l,o,c){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:{appId:this.context.appId.toString(),targetType:a.toString(),keyType:l,key:o.toString(),...c&&{contentType:c}}})}static#t=this.\u0275fac=function(l){return new(l||i)(r.KVO(s.Qq),r.KVO(h.o),r.KVO(m.ob))};static#e=this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}return i})()},4900:(T,f,t)=>{t.d(f,{K:()=>i});var h=t(271),r=t(7319),s=t(52),m=t(401),e=t(5437),p=t(8559);let i=(()=>{class _{constructor(l){this.entitiesService=l,this.metadataService=(0,e.d)(m.T)}getAll(l,o,c){return this.metadataService.getMetadata(l,o,c,s.YX.contentTypes.permissions).pipe((0,h.T)(n=>n.Items))}delete(l){return this.entitiesService.delete(s.YX.contentTypes.permissions,l,!1)}static#t=this.\u0275fac=function(o){return new(o||_)(p.KVO(r.T))};static#e=this.\u0275prov=p.jDH({token:_,factory:_.\u0275fac})}return _})()},8991:(T,f,t)=>{t.d(f,{N:()=>o});const h={states:{true:{tooltip:"true/on",icon:"radio_button_checked"},false:{tooltip:"false/off",icon:"radio_button_unchecked"}}};var r=t(4601),s=t(3840),m=t(316),e=t(8559);const p=c=>({clickable:c});function i(c,n){1&c&&e.eu8(0)}function _(c,n){if(1&c&&(e.j41(0,"a",2),e.DNE(1,i,1,0,"ng-container",3),e.k0s()),2&c){const g=e.XpG(),C=e.sdS(4);e.Y8G("href",g.data.url,e.B4B),e.R7$(),e.Y8G("ngTemplateOutlet",C)}}function a(c,n){if(1&c&&(e.j41(0,"div",4)(1,"mat-icon"),e.EFF(2),e.k0s()()),2&c){const g=e.XpG();e.Y8G("ngClass",e.eq3(3,p,g.data.clickable))("tippy",g.data.tooltip),e.R7$(2),e.JRh(g.data.icon)}}function l(c,n){if(1&c&&(e.j41(0,"div",4)(1,"mat-icon"),e.EFF(2),e.k0s()()),2&c){const g=e.XpG();e.Y8G("ngClass",e.eq3(3,p,g.data.clickable))("tippy",g.data.tooltip),e.R7$(2),e.JRh(g.data.icon)}}let o=(()=>{class c{agInit(g){this.value=g.value,this.allSettings=g.settings?.(g.data)??h;const C=this.allSettings.states[this.value?"true":"false"];this.data={...C,url:C.url??C.getUrl?.(g.data)}}refresh(g){return!0}static#t=this.\u0275fac=function(C){return new(C||c)};static#e=this.\u0275cmp=e.VBU({type:c,selectors:[["app-ag-bool-icon-renderer"]],standalone:!0,features:[e.aNF],decls:5,vars:1,consts:[["showIcon",""],[1,"icon-container"],["target","_blank",3,"href"],[4,"ngTemplateOutlet"],[1,"icon-cell","icon",3,"ngClass","tippy"]],template:function(C,y){1&C&&(e.j41(0,"div",1),e.DNE(1,_,2,2,"a",2)(2,a,3,5),e.k0s(),e.DNE(3,l,3,5,"ng-template",null,0,e.C5r)),2&C&&(e.R7$(),e.vxM(1,y.data.url?1:2))},dependencies:[r.e,s.m_,s.An,m.YU],encapsulation:2})}return c})()},1828:(T,f,t)=>{t.d(f,{r:()=>m});var h=t(1960),r=t(8991),s=t(2871);class m{static#t=this.ActionsPinnedRight1={width:42,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#e=this.ActionsPinnedRight3={width:122,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#n=this.ActionsPinnedRight4={width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#i=this.ActionsPinnedRight5={width:202,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#s=this.ActionsPinnedRight6={width:82,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#a=this.ActionsPinnedRight7={width:62,cellClass:"secondary-action no-outline no-padding".split(" "),pinned:"right"};static#o=this.IconShow={headerName:"Show",width:70,headerClass:"dense",cellClass:"icons no-outline".split(" "),sortable:!0,filter:h.y,valueGetter:p=>!p.data.IsHidden,cellRenderer:r.N};static#l=this.Items={width:102,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#r=this.Fields={width:94,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#c=this.Character={width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#d=this.Id={headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#p=this.Boolean={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0};static#h=this.Boolean2={width:100,sortable:!0,cellClass:"no-outline",filter:h.y};static#u=this.Boolean3={headerClass:"dense",width:80,cellClass:"no-outline",cellRenderer:s.J,cellRendererParams:{reverse:!1}};static#m=this.Number={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#_=this.TextWideType={flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agTextColumnFilter"};static#g=this.TextWide={flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#f=this.TextWideMin100={flex:1,minWidth:100,sortable:!0,filter:"agTextColumnFilter"};static#v=this.TextWideFlex3={flex:3,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#C=this.TextNarrow={flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#P=this.TextWideActionClass={flex:2,minWidth:250,cellClass:"primary-action no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter"}}},1960:(T,f,t)=>{t.d(f,{y:()=>m});var h=t(4456),r=t(3804),s=t(8559);let m=(()=>{class e{constructor(){this.filter=""}agInit(i){this.filterParams=i}isFilterActive(){return""!==this.filter}doesFilterPass(i){const a=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:i.node.data,getValue:l=>i.node.data[l],node:i.node});return null!=a&&a.toString()===this.filter}getModel(){if(this.isFilterActive())return{filterType:"boolean",filter:this.filter}}setModel(i){this.filter=i?i.filter:""}afterGuiAttached(i){}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(_){return new(_||e)};static#e=this.\u0275cmp=s.VBU({type:e,selectors:[["app-boolean-filter"]],standalone:!0,features:[s.aNF],decls:7,vars:1,consts:[[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(_,a){1&_&&(s.j41(0,"mat-radio-group",0),s.mxI("ngModelChange",function(o){return s.DH7(a.filter,o)||(a.filter=o),o}),s.bIt("ngModelChange",function(){return a.filterChanged()}),s.j41(1,"mat-radio-button",1),s.EFF(2,"All"),s.k0s(),s.j41(3,"mat-radio-button",2),s.EFF(4,"True"),s.k0s(),s.j41(5,"mat-radio-button",3),s.EFF(6,"False"),s.k0s()()),2&_&&s.R50("ngModel",a.filter)},dependencies:[h.YN,h.BC,h.vS,r.Wk,r.VT,r._g],styles:[".mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return e})()},6378:(T,f,t)=>{t.d(f,{L:()=>_});var h=t(519),r=t(316),s=t(3840),m=t(4601),e=t(8559),p=t(3347);const i=(a,l)=>({"align-start":a,"align-end":l});let _=(()=>{class a{constructor(o){this.snackBar=o}agInit(o){this.id=o.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=o.tooltipGetter(o.data)}refresh(o){return!0}copy(){(0,h.l)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(c){return new(c||a)(e.rXU(p.UG))};static#e=this.\u0275cmp=e.VBU({type:a,selectors:[["app-id-field"]],standalone:!0,features:[e.aNF],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"click","tippy","ngClass"],[1,"id"],[1,"icon"]],template:function(c,n){1&c&&(e.j41(0,"div",0),e.bIt("click",function(){return n.copy()}),e.j41(1,"span",1),e.EFF(2),e.k0s(),e.j41(3,"mat-icon",2),e.EFF(4,"file_copy"),e.k0s()()),2&c&&(e.Y8G("tippy",n.tooltip)("ngClass",e.l_i(3,i,"start"===n.align,"end"===n.align)),e.R7$(2),e.JRh(n.id))},dependencies:[r.YU,s.m_,s.An,m.e],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}return a})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/default-projects_eav-ui_src_app_permissions_permissions_component_ts.703e23a0252c9c47.js.map