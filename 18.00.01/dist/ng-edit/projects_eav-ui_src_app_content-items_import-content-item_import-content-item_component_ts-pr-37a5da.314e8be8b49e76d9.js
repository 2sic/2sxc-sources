"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-37a5da"],{7693:(D,E,t)=>{t.d(E,{X:()=>r,g:()=>i});var m=t(271),g=t(8873),l=t(8559),h=t(6443),a=t(4821);const r="admin/type/",c="admin/type/scopes";let i=(()=>{class n{constructor(s,I,d){this.http=s,this.context=I,this.dnnContext=d}apiUrl(s){return this.dnnContext.$2sxc.http.apiUrl(s)}retrieveContentType(s){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:s}})}retrieveContentTypes(s){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:s}})}getScopes(){return this.http.get(this.apiUrl(c),{params:{appId:this.context.appId.toString()}}).pipe((0,m.T)(s=>{const I=s.old;return Object.keys(I).map(_=>({name:I[_],value:_}))}))}getScopesV2(){return this.http.get(this.apiUrl(c),{params:{appId:this.context.appId.toString()}}).pipe((0,m.T)(s=>s.scopes))}save(s){return this.http.post(this.apiUrl("admin/type/save"),s,{params:{appid:this.context.appId.toString()}})}delete(s){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:s.StaticName}})}import(s){const I=new FormData;for(const d of s)I.append("File",d);return this.http.post(this.apiUrl("admin/type/import"),I,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(s){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:s}})}static#t=this.\u0275fac=function(I){return new(I||n)(l.KVO(h.Qq),l.KVO(g.o),l.KVO(a.ob))};static#e=this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac})}return n})()},6754:(D,E,t)=>{t.r(E),t.d(E,{ImportContentItemComponent:()=>r});var m=t(7941),g=t(3550),l=t(336),h=t(5437),a=t(8559);let r=(()=>{class p{constructor(c){this.uploadType=g.HL.ContentItem,this.contentItemsService=(0,h.d)(l.F),c.title??="Import Single Item",c.description??="Select an item file (json) from your computer to import.",c.allowedFileTypes??="json",c.upload$??=o=>this.contentItemsService.importItem(o[0])}static#t=this.\u0275fac=function(o){return new(o||p)(a.rXU(m.Vh))};static#e=this.\u0275cmp=a.VBU({type:p,selectors:[["app-import-content-item"]],standalone:!0,features:[a.aNF],decls:1,vars:1,consts:[[3,"uploadType"]],template:function(o,u){1&o&&a.nrm(0,"app-file-upload-dialog",0),2&o&&a.Y8G("uploadType",u.uploadType)},dependencies:[g.jj]})}return p})()},3051:(D,E,t)=>{t.d(E,{h6:()=>o,zZ:()=>O});var m=t(271),g=t(7693),l=t(8873),h=t(8559),a=t(6443),r=t(4821);const p="admin/field/",O="admin/field/all",c="admin/field/GetSharedFields";let o=(()=>{class u{constructor(e,i,n){this.http=e,this.context=i,this.dnnContext=n}apiUrl(e){return this.dnnContext.$2sxc.http.apiUrl(e)}typeListRetrieve(){return this.http.get(this.apiUrl(p+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(p+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,m.T)(e=>e.map(n=>({dataType:n.Type.substring(0,n.Type.indexOf("-")),inputType:n.Type,label:n.Label,description:n.Description,isDefault:n.IsDefault,isObsolete:n.IsObsolete,isRecommended:n.IsRecommended,obsoleteMessage:n.ObsoleteMessage,icon:n.IsDefault?"star":n.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(p+"ReservedNames"))}getFields(e){return this.http.get(this.apiUrl(O),{params:{appid:this.context.appId.toString(),staticName:e}}).pipe((0,m.T)(i=>{if(i)for(const n of i){if(!n.Metadata)continue;const T=n.Metadata;T.merged={...T.All,...T[n.Type],...T[n.InputType]}}return i}))}getShareableFields(){return this.http.get(this.apiUrl(c),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(e){return this.http.get(this.apiUrl(c),{params:{appid:this.context.appId.toString(),attributeId:e.toString()}})}addInheritedField(e,i,n,T){return this.http.post(this.apiUrl(p+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:e.toString(),SourceType:i,SourceField:n,name:T}})}share(e,i=!0){return this.http.post(this.apiUrl(p+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:e.toString(),share:i}})}inherit(e,i){return this.http.post(this.apiUrl(p+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:e.toString(),inheritMetadataOf:i}})}reOrder(e,i){return this.http.post(this.apiUrl(p+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:i.Id.toString(),order:JSON.stringify(e)}})}setTitle(e,i){return this.http.post(this.apiUrl(g.X+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:i.Id.toString(),attributeId:e.Id.toString()}})}rename(e,i,n){return this.http.post(this.apiUrl(p+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:i.toString(),attributeId:e.toString(),newName:n}})}delete(e,i){if(e.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(p+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:i.Id.toString(),attributeId:e.Id.toString()}})}add(e,i){return this.http.post(this.apiUrl(p+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:i.toString(),Id:e.Id.toString(),Type:e.Type,InputType:e.InputType,StaticName:e.StaticName,IsTitle:e.IsTitle.toString(),Index:e.SortOrder.toString()}})}updateInputType(e,i,n){return this.http.post(this.apiUrl(p+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:e.toString(),field:i,inputType:n}})}static#t=this.\u0275fac=function(i){return new(i||u)(h.KVO(a.Qq),h.KVO(l.o),h.KVO(r.ob))};static#e=this.\u0275prov=h.jDH({token:u,factory:u.\u0275fac})}return u})()},693:(D,E,t)=>{function m(l){return new Promise((h,a)=>{const r=new FileReader;r.readAsDataURL(l),r.onload=()=>{h(r.result.split(",")[1])},r.onerror=p=>{a(p)}})}function g(l){return new Promise((h,a)=>{const r=new FileReader;r.readAsText(l),r.onload=()=>{h(r.result)},r.onerror=p=>{a(p)}})}t.d(E,{d:()=>g,n:()=>m})},9234:(D,E,t)=>{t.d(E,{Gg:()=>n,Tr:()=>T,gb:()=>i});var m=t(1567),g=t(6647),l=t(6301),h=t(271),a=t(4979),r=t(3472),p=t(4839),O=t(1736),c=t(5437),o=t(8559),u=t(6443),M=t(4821);const i="admin/entity/",n="admin/entity/list";let T=(()=>{class s extends a.V{constructor(d,_,y){super(new r.B("EntityService",!1)),this.http=d,this.formConfig=_,this.dnnContext=y,this.queryService=(0,c.d)(p.c)}getEntities$(d){return d.pipe((0,m.p)(_=>null!=_),(0,g.n)(_=>this.getAvailableEntities(_.contentTypeName).pipe((0,l.t)(1))))}getAvailableEntities(d,_){var y=this.log.rxTap("getEntities",{enabled:!0});return this.queryService.getEntities({contentTypes:[d],itemIds:_,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe(y.pipe(),(0,h.T)(S=>S.Default))}delete(d,_,y,S,v){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(i+"delete"),{params:{contentType:d,id:_.toString(),appId:this.formConfig.config.appId,force:y.toString(),...S&&{parentId:S.toString()},...S&&v&&{parentField:v}}})}static#t=this.\u0275fac=function(_){return new(_||s)(o.KVO(u.Qq),o.KVO(O.S),o.KVO(M.ob))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac})}return s})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-37a5da.314e8be8b49e76d9.js.map