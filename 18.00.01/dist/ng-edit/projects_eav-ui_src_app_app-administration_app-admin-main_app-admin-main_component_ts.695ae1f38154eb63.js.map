{"version":3,"file":"projects_eav-ui_src_app_app-administration_app-admin-main_app-admin-main_component_ts.695ae1f38154eb63.js","mappings":"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","names":["AppAdminMenu","name","path","icon","svgIcon","tippy","eavConstants","scopes","default","value","child","GoToCopilot","routeDefinition","GoToDevRest","routeDataDefinition","routeQueryDefinition","CopilotSpecs","webApi","teaser","routeWebApiDefinition","i0","_r2","sidenav_r3","opened","vm_r4","dialogSettings","Context","App","Icon","_r5","Name","breadcrumb_r6","AppAdminMainComponent_Conditional_0_ng_container_13_Conditional_1_Template","last_r7","AppAdminMainComponent_Conditional_0_Conditional_2_Template","AppAdminMainComponent_Conditional_0_Conditional_3_Template","AppAdminMainComponent_Conditional_0_Conditional_5_Template","AppAdminMainComponent_Conditional_0_Conditional_6_Template","AppAdminMainComponent_Conditional_0_ng_container_13_Template","AppAdminMainComponent_Conditional_0_ng_template_14_Template","_r1","ctx_r7","closeDialog","AppAdminMainComponent_Conditional_0_For_24_Template","_forTrack0","SettingsScope","AppScopes","Global","emptyTemplate_r10","smallScreen","matches","sideNavOpened","navItems","AppAdminMainComponent","BaseWithChildDialogComponent","constructor","router","route","dialogRef","media","super","EavLogger","this","dialogConfigSvc","transient","AppDialogConfigService","dialogSettings$","BehaviorSubject","undefined","pathsArray$","currentPath$","combineLatest","events","pipe","filter","event","NavigationEnd","map","snapshot","firstChild","url","startWith","paths","currentPath","viewModel$","matchMedia","log","a","ngOnInit","fetchDialogSettings","subscriptions","add","childDialogClosed$","subscribe","addEventListener","c","sidenav","mode","ngOnDestroy","complete","close","getCurrent$","UpdateEnvVarsFromDialogSettings","next","Enable","Query","item","static","t","i1","i2","i3","core","VBU","selectors","viewQuery","rf","ctx","AppAdminMainComponent_Conditional_0_Template","tmp_0_0","MatToolbarModule","i4","MatIconModule","i5","BreadcrumbModule","i6","MatButtonModule","i7","MatSidenavModule","i8","RouterOutlet","AsyncPipe","NavItemListComponent","ToggleDebugDirective","styles"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-menu.ts","./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-main.component.html","./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-main.component.ts"],"sourcesContent":["import { NavItem } from \"../../shared/models/nav-item.model\";\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { GoToCopilot } from '../copilot/go-to-copilot';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { CopilotSpecs } from '../copilot/copilot-specs';\r\n\r\nexport const AppAdminMenu: NavItem[] = [\r\n\r\n  { name: 'App Info', path: 'home', icon: 'info', svgIcon: false, tippy: 'App Info' },\r\n  {\r\n    name: 'Data', path: `data/${eavConstants.scopes.default.value}`, icon: 'menu', svgIcon: false, tippy: 'Data / Content',\r\n    child: [\r\n      { ...GoToCopilot.routeDefinition('data'), tippy: 'Autogenerate content types ' },\r\n      { ...GoToDevRest.routeDataDefinition, tippy: 'Rest-Api Data ' },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Queries',\r\n    path: 'queries',\r\n    icon: 'filter_list',\r\n    svgIcon: false,\r\n    tippy: 'Queries / Visual Query Designer',\r\n    child: [\r\n      { ...GoToDevRest.routeQueryDefinition, tippy: 'Rest-Api Queries' },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Views',\r\n    path: 'views',\r\n    icon: 'layers',\r\n    svgIcon: false,\r\n    tippy: 'Views / Templates',\r\n    child: [\r\n      {\r\n        ...GoToCopilot.routeDefinition('views'),\r\n        tippy: 'Autogenerate Razor Views'\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Web API', path: 'web-api', icon: 'offline_bolt', svgIcon: false, tippy: 'WebApi',\r\n    child: [\r\n      {\r\n        ...GoToCopilot.routeDefinition('web-api'),\r\n        tippy: CopilotSpecs.webApi.teaser,\r\n      },\r\n      {\r\n        ...GoToDevRest.routeWebApiDefinition,\r\n        tippy: 'Rest-Api Queries'\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    name: 'App',\r\n    path: 'app',\r\n    icon: 'settings_applications',\r\n    svgIcon: false,\r\n    tippy: 'App Settings',\r\n    child: [\r\n      {\r\n        name: 'Export App',\r\n        path: 'export-app',\r\n        // icon: 'browser_updated',\r\n        // 2dm: note that I would prefer this icon, but we would first have to switch to Material Symbols\r\n        icon: 'deployed_code_update',\r\n        svgIcon: false,\r\n        tippy: 'Export this entire App'\r\n      },\r\n      {\r\n        name: 'Export Parts',\r\n        path: 'export-parts',\r\n        icon: 'cloud_download',\r\n        svgIcon: false,\r\n        tippy: 'Export parts of this App'\r\n      },\r\n      {\r\n        name: 'Imports Parts',\r\n        path: 'import-parts',\r\n        icon: 'cloud_upload',\r\n        svgIcon: false,\r\n        tippy: 'Import parts of this App'\r\n      },\r\n      {\r\n        name: 'App-State Git Sync',\r\n        path: 'app-state',\r\n        icon: 'sync',\r\n        svgIcon: false,\r\n        tippy: 'App-State Versioning'\r\n      },\r\n    ]\r\n  },\r\n];\r\n","@if (viewModel$ | async; as vm) {\r\n<mat-toolbar appToggleDebug>\r\n  <div class=\"toolbar-container\">\r\n    <!-- App Logo -->\r\n    @if (vm.dialogSettings?.Context.App.Icon) {\r\n    <img (click)=\"sidenav.opened = !sidenav.opened\"\r\n      [src]=\"vm.dialogSettings?.Context.App.Icon + '?w=40&h=40&mode=crop'\" />\r\n    } @else {\r\n    <mat-icon class=\"menu-container\" (click)=\"sidenav.opened = !sidenav.opened\">menu</mat-icon>\r\n    }\r\n    <!-- App Name -->\r\n    <div class=\"d-flex\">\r\n      @if (vm.dialogSettings?.Context.App.SettingsScope === AppScopes.Global) {\r\n      Global\r\n      }\r\n      @if (vm.dialogSettings?.Context.App.SettingsScope !== AppScopes.Global) {\r\n      {{ vm.dialogSettings?.Context.App.Name }}\r\n      }\r\n      <span>\r\n        <span class=\"mat-icon-admin\">\r\n          <mat-icon>settings</mat-icon>\r\n        </span>\r\n        Admin\r\n      </span>\r\n    </div>\r\n    <!-- Breadcrumb in the Toolbar after show Img and Aoo Name -->\r\n    <xng-breadcrumb [separator]=\"emptyTemplate\">\r\n      <ng-container *xngBreadcrumbItem=\"let breadcrumb; let info = info; let last = last\">\r\n        @if (last) {\r\n        <mat-icon class=\"breadcrumb-icon\">chevron_right</mat-icon>\r\n        {{ breadcrumb }}\r\n        }\r\n      </ng-container>\r\n    </xng-breadcrumb>\r\n    <ng-template #emptyTemplate></ng-template>\r\n  </div>\r\n  <span class=\"toolbar-spacer\"></span>\r\n  <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n    <mat-icon>close</mat-icon>\r\n  </button>\r\n</mat-toolbar>\r\n<mat-sidenav-container appToggleDebug>\r\n\r\n  <mat-sidenav #sidenav [mode]=\"smallScreen.matches ? 'over' : 'side'\" [opened]=\"sideNavOpened\">\r\n    @for (navItem of navItems; track navItem.path) {\r\n    <app-nav-item-list [navItem]=\"navItem\"></app-nav-item-list>\r\n    }\r\n    <div class=\"sideNav-bottom-info\">\r\n      <p>use App logo to show/hide menu</p>\r\n    </div>\r\n  </mat-sidenav>\r\n\r\n  <mat-sidenav-content>\r\n    <router-outlet></router-outlet>\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n}\r\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router, RouterOutlet } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, filter, map, startWith } from 'rxjs';\r\nimport { BaseWithChildDialogComponent } from '../../shared/components/base-with-child-dialog.component';\r\nimport { UpdateEnvVarsFromDialogSettings } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { AppScopes } from '../../shared/models/dialog-context.models';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { MatSidenav, MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MediaMatcher } from '@angular/cdk/layout';\r\nimport { AppAdminMenu } from './app-admin-menu';\r\nimport { EavLogger } from '../../shared/logging/eav-logger';\r\nimport { AsyncPipe } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { BreadcrumbModule } from 'xng-breadcrumb';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { NavItemListComponent } from '../../shared/components/nav-item-list/nav-item-list.component';\r\nimport { ToggleDebugDirective } from '../../shared/directives/toggle-debug.directive';\r\nimport { AppDialogConfigService } from '../services/app-dialog-config.service';\r\nimport { transient } from '../../core';\r\n\r\nconst logThis = false;\r\n\r\n@Component({\r\n  selector: 'app-app-admin-main',\r\n  templateUrl: './app-admin-main.component.html',\r\n  styleUrls: ['./app-admin-main.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatToolbarModule,\r\n    MatIconModule,\r\n    BreadcrumbModule,\r\n    MatButtonModule,\r\n    MatSidenavModule,\r\n    RouterOutlet,\r\n    AsyncPipe,\r\n    NavItemListComponent,\r\n    ToggleDebugDirective,\r\n  ],\r\n})\r\nexport class AppAdminMainComponent extends BaseWithChildDialogComponent implements OnInit, OnDestroy {\r\n\r\n  private dialogConfigSvc = transient(AppDialogConfigService);\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private dialogRef: MatDialogRef<AppAdminMainComponent>,\r\n    private media: MediaMatcher\r\n  ) {\r\n    super(router, route, new EavLogger('AppAdminMainComponent', logThis));\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  AppScopes = AppScopes;\r\n\r\n  private dialogSettings$ = new BehaviorSubject<DialogSettings>(undefined);\r\n  private pathsArray$ = new BehaviorSubject<string[]>(undefined);\r\n  private currentPath$ = combineLatest([\r\n    this.pathsArray$,\r\n    this.router.events.pipe(\r\n      filter((event) => event instanceof NavigationEnd),\r\n      map(() => this.route.snapshot.firstChild.url[0].path),\r\n      startWith(this.route.snapshot.firstChild.url[0].path)\r\n    ),\r\n  ]).pipe(\r\n    map(([paths, currentPath]) => {\r\n      if (paths == null) return;\r\n      return currentPath;\r\n    })\r\n  );\r\n\r\n  // Generate View Model\r\n  viewModel$ = combineLatest([this.dialogSettings$, this.currentPath$]).pipe(\r\n    map(([dialogSettings, currentPath]) => {\r\n      return {\r\n        dialogSettings,\r\n        currentPath,\r\n      };\r\n    })\r\n  );\r\n\r\n  smallScreen: MediaQueryList = this.media.matchMedia('(max-width: 1000px)');\r\n  @ViewChild('sidenav') sidenav!: MatSidenav;\r\n  sideNavOpened = !this.smallScreen.matches;\r\n\r\n  /** Navigation menu buttons - prefilled; may be modified after settings are loaded */\r\n  navItems = AppAdminMenu;\r\n\r\n  matcher!: MediaQueryList;\r\n\r\n\r\n  ngOnInit() {\r\n    this.fetchDialogSettings();\r\n    this.subscriptions.add(\r\n      this.childDialogClosed$().subscribe(() => {\r\n        this.fetchDialogSettings();\r\n      })\r\n    );\r\n\r\n    this.smallScreen.addEventListener(\r\n      'change',\r\n      (c) => (\r\n        this.sidenav.opened = !c.matches,\r\n        this.sidenav.mode = c.matches ? 'over' : 'side'\r\n      )\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dialogSettings$.complete();\r\n    this.pathsArray$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  private fetchDialogSettings() {\r\n    this.dialogConfigSvc.getCurrent$().subscribe(dialogSettings => {\r\n      UpdateEnvVarsFromDialogSettings(dialogSettings.Context.App);\r\n      this.dialogSettings$.next(dialogSettings);\r\n\r\n      if (!dialogSettings.Context.Enable.Query)\r\n        this.navItems = this.navItems.filter(\r\n          (item) => item.name !== 'Queries' && item.name !== 'Web API'\r\n        );\r\n\r\n      this.pathsArray$.next(this.navItems.map((item) => item.path));\r\n    });\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}