{"version":3,"file":"main.92705b910ec612c6.js","mappings":"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AG,IAAKC,OAAG,IAAKC,OAAG,IACnFC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KACtFC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAChFC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IACnFC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,KACpFC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,QAAI,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,KAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC7FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,KAAMC,OAAG,IAAKC,OAAG,KAC7FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC7FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IACnBC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAAMC,OAAG,KAC1FC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,KAAMC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC7FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,KAAMC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC9FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC7FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC5FC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC7FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAC3FC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,IAAKC,OAAG,KAAMC,OAAG,KAAMC,OAAG,IAAKC,OAAG,IAC7FC,OAAG,IAAKC,OAAG,IAAKC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","names":["transient","token","injector","inject","Injector","create","providers","parent","get","undefined","self","editDialog","name","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","EditEntryComponent","Promise","all","__webpack_require__","e","then","bind","logger","EavLogger","editRouteMatcherSubEdit","url","l","fn","length","path","rNull","hasDetails","hasUpdate","posParams","items","detailsEntityGuid","detailsFieldId","updateEntityGuid","updateFieldId","match","consumed","slice","r","EditRoutesSubItems","matcher","loadChildren","a","EditRoutes","editRouteMatcherSubEditRefresh","m","RefreshEditModule","EditRoutesSubItemsNoHistory","data","history","component","DialogEntryComponent","dialog","children","historyRoutes","EditRoutesRoot","editRouteMatcherRoot","zoneId","appId","editRouteMatcherRootRefresh","UrlHelpers","stripNonUrlCharacters","controlValue","allowPath","trimEnd","rexSeparators","this","latinizeText","toLowerCase","replace","input","latinMap","Á","Ă","Ắ","Ặ","Ằ","Ẳ","Ẵ","Ǎ","Â","Ấ","Ậ","Ầ","Ẩ","Ẫ","Ä","Ǟ","Ȧ","Ǡ","Ạ","Ȁ","À","Ả","Ȃ","Ā","Ą","Å","Ǻ","Ḁ","Ⱥ","Ã","Ꜳ","Æ","Ǽ","Ǣ","Ꜵ","Ꜷ","Ꜹ","Ꜻ","Ꜽ","Ḃ","Ḅ","Ɓ","Ḇ","Ƀ","Ƃ","Ć","Č","Ç","Ḉ","Ĉ","Ċ","Ƈ","Ȼ","Ď","Ḑ","Ḓ","Ḋ","Ḍ","Ɗ","Ḏ","ǲ","ǅ","Đ","Ƌ","Ǳ","Ǆ","É","Ĕ","Ě","Ȩ","Ḝ","Ê","Ế","Ệ","Ề","Ể","Ễ","Ḙ","Ë","Ė","Ẹ","Ȅ","È","Ẻ","Ȇ","Ē","Ḗ","Ḕ","Ę","Ɇ","Ẽ","Ḛ","Ꝫ","Ḟ","Ƒ","Ǵ","Ğ","Ǧ","Ģ","Ĝ","Ġ","Ɠ","Ḡ","Ǥ","Ḫ","Ȟ","Ḩ","Ĥ","Ⱨ","Ḧ","Ḣ","Ḥ","Ħ","Í","Ĭ","Ǐ","Î","Ï","Ḯ","İ","Ị","Ȉ","Ì","Ỉ","Ȋ","Ī","Į","Ɨ","Ĩ","Ḭ","Ꝺ","Ꝼ","Ᵹ","Ꞃ","Ꞅ","Ꞇ","Ꝭ","Ĵ","Ɉ","Ḱ","Ǩ","Ķ","Ⱪ","Ꝃ","Ḳ","Ƙ","Ḵ","Ꝁ","Ꝅ","Ĺ","Ƚ","Ľ","Ļ","Ḽ","Ḷ","Ḹ","Ⱡ","Ꝉ","Ḻ","Ŀ","Ɫ","ǈ","Ł","Ǉ","Ḿ","Ṁ","Ṃ","Ɱ","Ń","Ň","Ņ","Ṋ","Ṅ","Ṇ","Ǹ","Ɲ","Ṉ","Ƞ","ǋ","Ñ","Ǌ","Ó","Ŏ","Ǒ","Ô","Ố","Ộ","Ồ","Ổ","Ỗ","Öe","Ȫ","Ȯ","Ȱ","Ọ","Ő","Ȍ","Ò","Ỏ","Ơ","Ớ","Ợ","Ờ","Ở","Ỡ","Ȏ","Ꝋ","Ꝍ","Ō","Ṓ","Ṑ","Ɵ","Ǫ","Ǭ","Ø","Ǿ","Õ","Ṍ","Ṏ","Ȭ","Ƣ","Ꝏ","Ɛ","Ɔ","Ȣ","Ṕ","Ṗ","Ꝓ","Ƥ","Ꝕ","Ᵽ","Ꝑ","Ꝙ","Ꝗ","Ŕ","Ř","Ŗ","Ṙ","Ṛ","Ṝ","Ȑ","Ȓ","Ṟ","Ɍ","Ɽ","Ꜿ","Ǝ","Ś","Ṥ","Š","Ṧ","Ş","Ŝ","Ș","Ṡ","Ṣ","Ṩ","Ť","Ţ","Ṱ","Ț","Ⱦ","Ṫ","Ṭ","Ƭ","Ṯ","Ʈ","Ŧ","Ɐ","Ꞁ","Ɯ","Ʌ","Ꜩ","Ú","Ŭ","Ǔ","Û","Ṷ","Ü","Ǘ","Ǚ","Ǜ","Ǖ","Ṳ","Ụ","Ű","Ȕ","Ù","Ủ","Ư","Ứ","Ự","Ừ","Ử","Ữ","Ȗ","Ū","Ṻ","Ų","Ů","Ũ","Ṹ","Ṵ","Ꝟ","Ṿ","Ʋ","Ṽ","Ꝡ","Ẃ","Ŵ","Ẅ","Ẇ","Ẉ","Ẁ","Ⱳ","Ẍ","Ẋ","Ý","Ŷ","Ÿ","Ẏ","Ỵ","Ỳ","Ƴ","Ỷ","Ỿ","Ȳ","Ɏ","Ỹ","Ź","Ž","Ẑ","Ⱬ","Ż","Ẓ","Ȥ","Ẕ","Ƶ","Ĳ","Œ","ᴀ","ᴁ","ʙ","ᴃ","ᴄ","ᴅ","ᴇ","ꜰ","ɢ","ʛ","ʜ","ɪ","ʁ","ᴊ","ᴋ","ʟ","ᴌ","ᴍ","ɴ","ᴏ","ɶ","ᴐ","ᴕ","ᴘ","ʀ","ᴎ","ᴙ","ꜱ","ᴛ","ⱻ","ᴚ","ᴜ","ᴠ","ᴡ","ʏ","ᴢ","á","ă","ắ","ặ","ằ","ẳ","ẵ","ǎ","â","ấ","ậ","ầ","ẩ","ẫ","ä","ǟ","ȧ","ǡ","ạ","ȁ","à","ả","ȃ","ā","ą","ᶏ","ẚ","å","ǻ","ḁ","ⱥ","ã","ꜳ","æ","ǽ","ǣ","ꜵ","ꜷ","ꜹ","ꜻ","ꜽ","ḃ","ḅ","ɓ","ḇ","ᵬ","ᶀ","ƀ","ƃ","ɵ","ć","č","ç","ḉ","ĉ","ɕ","ċ","ƈ","ȼ","ď","ḑ","ḓ","ȡ","ḋ","ḍ","ɗ","ᶑ","ḏ","ᵭ","ᶁ","đ","ɖ","ƌ","ı","ȷ","ɟ","ʄ","ǳ","ǆ","é","ĕ","ě","ȩ","ḝ","ê","ế","ệ","ề","ể","ễ","ḙ","ë","ė","ẹ","ȅ","è","ẻ","ȇ","ē","ḗ","ḕ","ⱸ","ę","ᶒ","ɇ","ẽ","ḛ","ꝫ","ḟ","ƒ","ᵮ","ᶂ","ǵ","ğ","ǧ","ģ","ĝ","ġ","ɠ","ḡ","ᶃ","ǥ","ḫ","ȟ","ḩ","ĥ","ⱨ","ḧ","ḣ","ḥ","ɦ","ẖ","ħ","ƕ","í","ĭ","ǐ","î","ï","ḯ","ị","ȉ","ì","ỉ","ȋ","ī","į","ᶖ","ɨ","ĩ","ḭ","ꝺ","ꝼ","ᵹ","ꞃ","ꞅ","ꞇ","ꝭ","ǰ","ĵ","ʝ","ɉ","ḱ","ǩ","ķ","ⱪ","ꝃ","ḳ","ƙ","ḵ","ᶄ","ꝁ","ꝅ","ĺ","ƚ","ɬ","ľ","ļ","ḽ","ȴ","ḷ","ḹ","ⱡ","ꝉ","ḻ","ŀ","ɫ","ᶅ","ɭ","ł","ǉ","ſ","ẜ","ẛ","ẝ","ḿ","ṁ","ṃ","ɱ","ᵯ","ᶆ","ń","ň","ņ","ṋ","ȵ","ṅ","ṇ","ǹ","ɲ","ṉ","ƞ","ᵰ","ᶇ","ɳ","ñ","ǌ","ó","ŏ","ǒ","ô","ố","ộ","ồ","ổ","ỗ","ö","ȫ","ȯ","ȱ","ọ","ő","ȍ","ò","ỏ","ơ","ớ","ợ","ờ","ở","ỡ","ȏ","ꝋ","ꝍ","ⱺ","ō","ṓ","ṑ","ǫ","ǭ","ø","ǿ","õ","ṍ","ṏ","ȭ","ƣ","ꝏ","ɛ","ᶓ","ɔ","ᶗ","ȣ","ṕ","ṗ","ꝓ","ƥ","ᵱ","ᶈ","ꝕ","ᵽ","ꝑ","ꝙ","ʠ","ɋ","ꝗ","ŕ","ř","ŗ","ṙ","ṛ","ṝ","ȑ","ɾ","ᵳ","ȓ","ṟ","ɼ","ᵲ","ᶉ","ɍ","ɽ","ↄ","ꜿ","ɘ","ɿ","ß","ś","ṥ","š","ṧ","ş","ŝ","ș","ṡ","ṣ","ṩ","ʂ","ᵴ","ᶊ","ȿ","ɡ","ᴑ","ᴓ","ᴝ","ť","ţ","ṱ","ț","ȶ","ẗ","ⱦ","ṫ","ṭ","ƭ","ṯ","ᵵ","ƫ","ʈ","ŧ","ᵺ","ɐ","ᴂ","ǝ","ᵷ","ɥ","ʮ","ʯ","ᴉ","ʞ","ꞁ","ɯ","ɰ","ᴔ","ɹ","ɻ","ɺ","ⱹ","ʇ","ʌ","ʍ","ʎ","ꜩ","ú","ŭ","ǔ","û","ṷ","ü","ǘ","ǚ","ǜ","ǖ","ṳ","ụ","ű","ȕ","ù","ủ","ư","ứ","ự","ừ","ử","ữ","ȗ","ū","ṻ","ų","ᶙ","ů","ũ","ṹ","ṵ","ᵫ","ꝸ","ⱴ","ꝟ","ṿ","ʋ","ᶌ","ⱱ","ṽ","ꝡ","ẃ","ŵ","ẅ","ẇ","ẉ","ẁ","ⱳ","ẘ","ẍ","ẋ","ᶍ","ý","ŷ","ÿ","ẏ","ỵ","ỳ","ƴ","ỷ","ỿ","ȳ","ẙ","ɏ","ỹ","ź","ž","ẑ","ʑ","ⱬ","ż","ẓ","ȥ","ẕ","ᵶ","ᶎ","ʐ","ƶ","ɀ","ﬀ","ﬃ","ﬄ","ﬁ","ﬂ","ĳ","œ","ﬆ","ₐ","ₑ","ᵢ","ⱼ","ₒ","ᵣ","ᵤ","ᵥ","ₓ","readQueryStringParameters","queryParams","split","forEach","f","decodeURIComponent","getUrlParams","qs","join","params","tokens","re","exec","replaceUrlParam","paramName","paramValue","pattern","RegExp","search","indexOf","getUrlPrefix","area","eavConfig","result","systemRoot","portalRoot","appRoot","appSharedRoot","endsWith","substring","calculatePathFromRoot","route","lastChild","firstChild","pathFromRoot","snapshot","urlSegment","BaseComponent","constructor","log","subscriptions","Subscription","ngOnDestroy","unsubscribe","static","t","i0","i1","_angular_core__WEBPACK_IMPORTED_MODULE_2__","VBU","selectors","decls","vars","template","rf","ctx","encapsulation","viewContainerRef","router","context","changeDetectorRef","super","navigation","getCurrentNavigation","dialogData","extras","state","ngOnInit","dialogConfig","Error","id","_dialogAnimatingOpen","_lastDialogRef","afterOpened","subscribe","openDialogComponent","dialogRef","close","svcId","init","open","autoFocus","backdropClass","closeOnNavigation","showScrollbar","position","top","afterClosed","navRes","navigateUrl","window","$2sxc","totalPopup","navigate","relativeTo","markForCheck","i2","i3","_angular_core__WEBPACK_IMPORTED_MODULE_3__","standalone","features","Context","DialogTypeConstants","Zone","Apps","AppImport","App","ContentType","ContentItems","Edit","ItemHistory","Develop","PipelineDesigner","Replace","InstanceList","SystemSettingsScopes","Site","EditApiKeyPaths","GoogleTranslate","GoogleMaps","eavConstants","metadata","attribute","targetType","target","label","keyType","app","entity","contentType","zone","language","cmsObject","hint","appMetadata","LightSpeed","ContentTypeName","keyTypes","guid","string","number","scopes","default","value","configuration","contentTypes","appConfiguration","permissions","query","settings","resources","systemSettings","systemResources","customSettings","customResources","formulas","notes","imageDecorator","pipelineDesigner","dataSourceDifficulties","advanced","outDataSource","Description","EntityGuid","In","Name","PartAssemblyAndType","PrimaryType","VisualDesignerData","Top","Left","Width","defaultPipeline","dataSources","streamWiring","From","Out","To","testParameters","prefix","keyZoneId","keyContentBlockId","keyModuleId","keyAppId","keyDebug","keyDialog","keyContentType","keyItems","keyPartOfPage","keyPublishing","keyFilters","keyPipelineId","keyUrl","keyIsShared","keyExtras","partOfPageDefault","PREFILL_PREFIX","GROUP_PREFIX","FIELDS_PREFIX","PARAM_PREFIX","ITEM_SEPARATOR","VAL_SEPARATOR","LIST_SEPARATOR","toOrderedParams","values","convertFormToUrl","form","formUrl","item","asGroup","asItem","asInboundParams","fields","UiFields","ClientData","parameters","Parameters","Parent","Field","Index","Add","EntityId","prefill2UrlParams","Prefill","fields2UrlParams","obj2UrlParams","addItem","getParamForMetadata","DuplicateEntity","buildForSuffix","itemFor","Target","TargetType","Singleton","toString","For","String","paramEncode","Number","Guid","Metadata","getParamForOldMetadata","toLocaleLowerCase","Object","find","key","prefill","obj","entries","prefillFromUrlParams","addTo","prefillParams","paramDecode","isNumber","maybeNumber","test","convertUrlToForm","startsWith","innerItem","options","option","parms","parseInt","addParamToItemIdentifier","push","parts","editItem","part","newParams","forParams","forKeyType","forKey","forTarget","forTargetType","forSingleton","copyParams","end","formParams","text","enableLogging","always","dev","store","editForm","warningNoLogShown","logMain","message","consoleLogObject","segment","callStack","environment","production","segmentUpper","toUpperCase","console","groupCollapsed","trace","groupEnd","keys","show","EavLoggerFn","fnName","intro","enabled","nameWithSvcId","RxTapDebug","jsonify","generateFn","subName","source","counter","pipe","tap","showData","JSON","parse","stringify","rxTap","map","filter","shareReplay","distinctUntilChanged","start","step","num","read","enableChildren","Math","random","rename","inherit","val","fnCond","condition","ServiceBase","parentContext","ready","parentId","contextId","_zoneId","routeNum","_appId","tabId","env","page","contentBlockId","_contentBlockId","moduleId","_moduleId","routeSnapshot","clearCachedValues","initRoot","sessionNumber","sessionStorage","getItem","isNaN","paramMap","jDH","factory","ɵfac","destroy","iconsFontAwesome","AppIconsService","matIconRegistry","domSanitizer","load","setDefaultFontSetClass","svg","addSvgIconLiteral","bypassSecurityTrustHtml","core","AppComponent","SxcAppComponent","el","dnnContext","activatedRoute","preConfigure","subscription","titleService","Title","appIconsService","appTitle","getTitle","add","events","event","NavigationEnd","child","title","setTitle","RouterModule","changeDetection","routes","appsManagementRoutes","importRoutes","appAdministrationRoutes","codeEditorRoutes","visualQueryRoutes","replaceContentRoutes","manageContentRoutes","contentItemsRoutes","contentTypeFieldsRoutes","HandleErrorsInterceptor","excludedUrls","intercept","req","next","handle","catchError","error","checkIfExcluded","showDetailedHttpError","throwError","excludedUrl","includes","infoText","status","srvResp","msg","Message","msgDet","MessageDetail","ExceptionMessage","alert","SetHeadersInterceptor","modified","body","FormData","clone","setHeaders","TranslateLoaderWithErrorHandling","http","suffix","getTranslation","lang","warn","of","appConfig","provideRouter","importProvidersFrom","BrowserModule","BrowserAnimationsModule","HttpClientModule","TranslateModule","forRoot","forChild","buildTranslateConfiguration","loader","provide","TranslateLoader","useFactory","deps","HttpClient","defaultLanguage","isolate","translateLoaderFactory","sxcVersion","SxcHttpInterceptorProvider","APP_INITIALIZER","paramsInitFactory","eavKeys","location","hash","href","removeItem","setItem","urlHash","queryParametersFromUrl","paramKey","Router","extrasZone","tab","extrasApp","scope","historyItems","pipelineId","repItem","grpItem","multi","LocationStrategy","useClass","HashLocationStrategy","HTTP_INTERCEPTORS","MAT_FORM_FIELD_DEFAULT_OPTIONS","useValue","subscriptSizing","enableProdMode","bootstrapApplication","catch","err"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/core/transient.ts","./projects/eav-ui/src/app/edit/edit-dialog.config.ts","./projects/eav-ui/src/app/edit/edit.matcher.ts","./projects/eav-ui/src/app/edit/edit.routing.ts","./projects/eav-ui/src/app/edit/shared/helpers/url.helpers.ts","./projects/eav-ui/src/app/shared/components/base.component.ts","./projects/eav-ui/src/app/shared/components/dialog-entry/dialog-entry.component.ts","./projects/eav-ui/src/app/shared/constants/dialog-type.constants.ts","./projects/eav-ui/src/app/shared/constants/eav.constants.ts","./projects/eav-ui/src/app/shared/constants/session.constants.ts","./projects/eav-ui/src/app/shared/helpers/url-prep.helper.ts","./projects/eav-ui/src/app/shared/helpers/console-log-angular.helper.ts","./projects/eav-ui/src/app/shared/logging/eav-logger-fn.ts","./projects/eav-ui/src/app/shared/logging/rx-debug-dbg.ts","./projects/eav-ui/src/app/shared/logging/eav-logger.ts","./projects/eav-ui/src/app/shared/services/context.ts","./projects/eav-ui/src/app/shared/services/service-base.ts","./projects/eav-ui/src/environments/environment.prod.ts","./projects/eav-ui/src/app/shared/icons/index.ts","./projects/eav-ui/src/app/assets/icons/code-curly.svg","./projects/eav-ui/src/app/shared/icons/app-icons.service.ts","./projects/eav-ui/src/app/app.component.ts","./projects/eav-ui/src/app/app.component.html","./projects/eav-ui/src/app/app.routes.ts","./projects/eav-ui/src/app/shared/interceptors/handle-errors.interceptor.ts","./projects/eav-ui/src/app/shared/interceptors/set-headers.interceptor.ts","./projects/eav-ui/src/app/shared/translation/translate-loader-with-error-handling.ts","./projects/eav-ui/src/app/app.config.ts","./projects/eav-ui/src/app/shared/translation/translate-configuration.ts","./projects/eav-ui/src/app/shared/translation/translate-loader-factory.ts","./projects/eav-ui/src/app/params-init.factory.ts","./projects/eav-ui/src/main.ts"],"sourcesContent":["import { Injector, ProviderToken, TypeProvider, inject } from '@angular/core';\r\n\r\n/**\r\n * Transient dependency injection provider.\r\n * This will create a new instance of the provided token,\r\n * without making it available in sub-components\r\n * as would happen with providers in a component.\r\n * \r\n * @param token the class which is injectable\r\n * @param injector the injector to use, if not provided, the current injector will be used.\r\n *     Not not necessary when using transient in the class properties construction or in the constructor,\r\n *     as the injector will be available in the constructor.\r\n *     But necessary when using transient inside anything else.\r\n * @returns \r\n */\r\nexport function transient<T>(token: ProviderToken<T>, injector?: Injector): T {\r\n  // make sure we have an injector\r\n  // this will throw an error, if transient is used outside of construction and without providing an injector\r\n  injector ??= inject(Injector);\r\n\r\n  // create a new injector which is only meant to be used for this transient instance\r\n  const subInjector = Injector.create({\r\n    providers: [\r\n      token as TypeProvider\r\n    ],\r\n    parent: injector\r\n  });\r\n\r\n  // return the instance\r\n  return subInjector.get(token, undefined, { self: true });\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const editDialog: DialogConfig = {\r\n  name: 'ITEMS_EDIT_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'custom',\r\n  panelClass: ['c-multi-item-dialog'],\r\n\r\n  async getComponent() {\r\n    const { EditEntryComponent } = await import('./dialog/entry/edit-entry.component');\r\n    return EditEntryComponent;\r\n  }\r\n};\r\n","import { UrlMatchResult, UrlSegment } from '@angular/router';\r\nimport { EditPosParams } from './edit-matcher.models';\r\nimport { EavLogger } from '../shared/logging/eav-logger';\r\n\r\nconst logThis = false;\r\nconst logger = new EavLogger('EditRouteMatchers', logThis);\r\n\r\n/**\r\n * ':zoneId/:appId/edit/:items'\r\n * ':zoneId/:appId/edit/:items/details/:detailsEntityGuid/:detailsFieldId'\r\n * ':zoneId/:appId/edit/:items/update/:updateEntityGuid/:updateFieldId'\r\n */\r\nexport function editRouteMatcherRoot(url: UrlSegment[]): UrlMatchResult {\r\n  const l = logger.fn('editRouteMatcherRoot', { url });\r\n  if (url.length < 4) return l.rNull();\r\n  if (url[2].path !== 'edit') return l.rNull();\r\n  const hasDetails = url[4] != null && url[4].path === 'details' && url[5] != null && url[6] != null;\r\n  const hasUpdate = url[4] != null && url[4].path === 'update' && url[5] != null && url[6] != null;\r\n  const posParams: EditPosParams = {\r\n    zoneId: url[0],\r\n    appId: url[1],\r\n    items: url[3],\r\n    ...(hasDetails && { detailsEntityGuid: url[5], detailsFieldId: url[6] }),\r\n    ...(hasUpdate && { updateEntityGuid: url[5], updateFieldId: url[6] }),\r\n  };\r\n  const match: UrlMatchResult = {\r\n    consumed: url.slice(0, (hasDetails || hasUpdate) ? 7 : 4),\r\n    posParams: posParams as any,\r\n  };\r\n  return l.r(match, '✅');\r\n}\r\n\r\n/** ':zoneId/:appId/edit/refresh/:items' */\r\nexport function editRouteMatcherRootRefresh(url: UrlSegment[]): UrlMatchResult {\r\n  const l = logger.fn('editRouteMatcherRootRefresh', { url });\r\n  if (url.length < 5) return l.rNull();\r\n  if (url[2].path !== 'edit' || url[3].path !== 'refresh') { return null; }\r\n  const posParams: EditPosParams = {\r\n    zoneId: url[0],\r\n    appId: url[1],\r\n    items: url[4],\r\n  };\r\n  const match: UrlMatchResult = {\r\n    consumed: url.slice(0, 5),\r\n    posParams: posParams as any,\r\n  };\r\n  return l.r(match, '✅');\r\n}\r\n\r\n/**\r\n * 'edit/:items'\r\n * 'edit/:items/details/:detailsEntityGuid/:detailsFieldId'\r\n * 'edit/:items/update/:updateEntityGuid/:updateFieldId'\r\n */\r\nexport function editRouteMatcherSubEdit(url: UrlSegment[]): UrlMatchResult {\r\n  const l = logger.fn('editRouteMatcherSubEdit', { url });\r\n  if (url.length < 2) return l.rNull();\r\n  if (url[0].path !== 'edit') return l.rNull();\r\n  const hasDetails = url[2] != null && url[2].path === 'details' && url[3] != null && url[4] != null;\r\n  const hasUpdate = url[2] != null && url[2].path === 'update' && url[3] != null && url[4] != null;\r\n  const posParams: EditPosParams = {\r\n    items: url[1],\r\n    ...(hasDetails && { detailsEntityGuid: url[3], detailsFieldId: url[4] }),\r\n    ...(hasUpdate && { updateEntityGuid: url[3], updateFieldId: url[4] }),\r\n  };\r\n  const match: UrlMatchResult = {\r\n    consumed: url.slice(0, (hasDetails || hasUpdate) ? 5 : 2),\r\n    posParams: posParams as any,\r\n  };\r\n  return l.r(match, '✅');\r\n}\r\n\r\n/** 'edit/refresh/:items' */\r\nexport function editRouteMatcherSubEditRefresh(url: UrlSegment[]): UrlMatchResult {\r\n  const l = logger.fn('editRouteMatcherSubEditRefresh', { url });\r\n  if (url.length < 3) return l.rNull();\r\n  if (url[0].path !== 'edit' || url[1].path !== 'refresh') return l.rNull();\r\n  const posParams: EditPosParams = {\r\n    items: url[2],\r\n  };\r\n  const match: UrlMatchResult = {\r\n    consumed: url.slice(0, 3),\r\n    posParams: posParams as any,\r\n  };\r\n  return l.r(match, '✅');\r\n}\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { editDialog } from './edit-dialog.config';\r\nimport { editRouteMatcherRoot, editRouteMatcherRootRefresh, editRouteMatcherSubEdit, editRouteMatcherSubEditRefresh } from './edit.matcher';\r\nimport { EavLogger } from '../shared/logging/eav-logger';\r\n\r\nconst logThis = false;\r\nconst logger = new EavLogger('EditRoutingModule', logThis);\r\n\r\n\r\nexport const EditRoutesSubItems: Routes = [\r\n  {\r\n    matcher: editRouteMatcherSubEdit,\r\n    loadChildren: () => {\r\n      // Recursively use these routes again.\r\n      logger.a('loadChildren - matcher: sub-edit');\r\n      return EditRoutes;\r\n    },\r\n  },\r\n  {\r\n    matcher: editRouteMatcherSubEditRefresh,\r\n    loadChildren: () => import('./refresh-edit.module').then(m => m.RefreshEditModule)\r\n  },\r\n];\r\n\r\n/**\r\n * In some cases the history could cause trouble, eg. in VisualQuery, where there are many hidden fields which\r\n * build the query, and if someone goes back in time thinking they are just changing the labels, the query would break.\r\n */\r\nexport const EditRoutesSubItemsNoHistory: Routes = [\r\n  {\r\n    matcher: editRouteMatcherSubEdit,\r\n    loadChildren: () => EditRoutes,\r\n    data: { history: false },\r\n  },\r\n  // 2024-07-01 2dm: not sure why the refresh-part was never on this, but leave until I know better.\r\n  // {\r\n  //   matcher: editRouteMatcherSubEditRefresh,\r\n  //   loadChildren: () => import('./refresh-edit.module').then(m => m.RefreshEditModule)\r\n  // },\r\n];\r\n\r\nexport const EditRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: editDialog },\r\n    children: [\r\n      ...EditRoutesSubItems,\r\n      {\r\n        path: 'versions/:itemId',\r\n        loadChildren: () => import('../item-history/item-history.routing').then(m => m.historyRoutes),\r\n      }\r\n    ],\r\n  },\r\n];\r\n\r\n/**\r\n * Root routes only meant for the entry points of the application, \"App\" and \"Apps\"\r\n */\r\nexport const EditRoutesRoot: Routes = [\r\n  {\r\n    matcher: editRouteMatcherRoot,\r\n    loadChildren: () => EditRoutes,\r\n  },\r\n  {\r\n    matcher: editRouteMatcherRootRefresh,\r\n    loadChildren: () => import('../edit/refresh-edit.module').then(m => m.RefreshEditModule)\r\n  },\r\n];","import { ActivatedRoute } from '@angular/router';\r\nimport { FormConfiguration } from '../../state/form-configuration.model';\r\n\r\nexport class UrlHelpers {\r\n\r\n  static stripNonUrlCharacters(controlValue: string, allowPath: boolean, trimEnd: boolean) {\r\n    if (!controlValue) { return ''; }\r\n\r\n    const rexSeparators = allowPath ? /[^a-z0-9-_/]+/gi : /[^a-z0-9-_]+/gi;\r\n    const latinized = this.latinizeText(controlValue.toLowerCase());\r\n    const cleanInputValue = latinized\r\n      .replace(`'s `, 's ') // neutralize it's, daniel's etc. but only if followed by a space, to ensure we don't kill quotes\r\n      .replace('\\\\', '/') // neutralize slash representation\r\n      .replace(rexSeparators, '-') // replace everything we don't want with a -\r\n      .replace(/-+/gi, '-') // reduce multiple '-'\r\n      .replace(/\\/+/gi, '/') // reduce multiple slashes\r\n      .replace(/-*\\/-*/gi, '/') // reduce '-/' or '/-' combinations to a simple '/'\r\n      .replace(trimEnd ? /^-|-+$/gi : /^-/gi, ''); // trim front and maybe end '-'\r\n    return cleanInputValue;\r\n  }\r\n\r\n  static latinizeText(input: string) {\r\n    const latinMap: Record<string, string> = {\r\n      Á: 'A', Ă: 'A', Ắ: 'A', Ặ: 'A', Ằ: 'A', Ẳ: 'A', Ẵ: 'A', Ǎ: 'A', Â: 'A', Ấ: 'A', Ậ: 'A',\r\n      Ầ: 'A', Ẩ: 'A', Ẫ: 'A', Ä: 'Ae', Ǟ: 'A', Ȧ: 'A', Ǡ: 'A', Ạ: 'A', Ȁ: 'A', À: 'A', Ả: 'A', Ȃ: 'A',\r\n      Ā: 'A', Ą: 'A', Å: 'A', Ǻ: 'A', Ḁ: 'A', Ⱥ: 'A', Ã: 'A', Ꜳ: 'AA', Æ: 'AE', Ǽ: 'AE', Ǣ: 'AE',\r\n      Ꜵ: 'AO', Ꜷ: 'AU', Ꜹ: 'AV', Ꜻ: 'AV', Ꜽ: 'AY', Ḃ: 'B', Ḅ: 'B', Ɓ: 'B', Ḇ: 'B', Ƀ: 'B',\r\n      Ƃ: 'B', Ć: 'C', Č: 'C', Ç: 'C', Ḉ: 'C', Ĉ: 'C', Ċ: 'C', Ƈ: 'C', Ȼ: 'C', Ď: 'D', Ḑ: 'D',\r\n      Ḓ: 'D', Ḋ: 'D', Ḍ: 'D', Ɗ: 'D', Ḏ: 'D', ǲ: 'D', ǅ: 'D', Đ: 'D', Ƌ: 'D', Ǳ: 'DZ', Ǆ: 'DZ',\r\n      É: 'E', Ĕ: 'E', Ě: 'E', Ȩ: 'E', Ḝ: 'E', Ê: 'E', Ế: 'E', Ệ: 'E', Ề: 'E', Ể: 'E', Ễ: 'E', Ḙ: 'E',\r\n      Ë: 'E', Ė: 'E', Ẹ: 'E', Ȅ: 'E', È: 'E', Ẻ: 'E', Ȇ: 'E', Ē: 'E', Ḗ: 'E', Ḕ: 'E', Ę: 'E', Ɇ: 'E',\r\n      Ẽ: 'E', Ḛ: 'E', Ꝫ: 'ET', Ḟ: 'F', Ƒ: 'F', Ǵ: 'G', Ğ: 'G', Ǧ: 'G', Ģ: 'G', Ĝ: 'G', Ġ: 'G', Ɠ: 'G',\r\n      Ḡ: 'G', Ǥ: 'G', Ḫ: 'H', Ȟ: 'H', Ḩ: 'H', Ĥ: 'H', Ⱨ: 'H', Ḧ: 'H', Ḣ: 'H', Ḥ: 'H', Ħ: 'H', Í: 'I',\r\n      Ĭ: 'I', Ǐ: 'I', Î: 'I', Ï: 'I', Ḯ: 'I', İ: 'I', Ị: 'I', Ȉ: 'I', Ì: 'I', Ỉ: 'I', Ȋ: 'I', Ī: 'I',\r\n      Į: 'I', Ɨ: 'I', Ĩ: 'I', Ḭ: 'I', Ꝺ: 'D', Ꝼ: 'F', Ᵹ: 'G', Ꞃ: 'R', Ꞅ: 'S', Ꞇ: 'T', Ꝭ: 'IS', Ĵ: 'J',\r\n      Ɉ: 'J', Ḱ: 'K', Ǩ: 'K', Ķ: 'K', Ⱪ: 'K', Ꝃ: 'K', Ḳ: 'K', Ƙ: 'K', Ḵ: 'K', Ꝁ: 'K', Ꝅ: 'K', Ĺ: 'L',\r\n      Ƚ: 'L', Ľ: 'L', Ļ: 'L', Ḽ: 'L', Ḷ: 'L', Ḹ: 'L', Ⱡ: 'L', Ꝉ: 'L', Ḻ: 'L', Ŀ: 'L', Ɫ: 'L', ǈ: 'L',\r\n      Ł: 'L', Ǉ: 'LJ', Ḿ: 'M', Ṁ: 'M', Ṃ: 'M', Ɱ: 'M', Ń: 'N', Ň: 'N', Ņ: 'N', Ṋ: 'N', Ṅ: 'N', Ṇ: 'N',\r\n      Ǹ: 'N', Ɲ: 'N', Ṉ: 'N', Ƞ: 'N', ǋ: 'N', Ñ: 'N', Ǌ: 'NJ', Ó: 'O', Ŏ: 'O', Ǒ: 'O', Ô: 'O', Ố: 'O',\r\n      Ộ: 'O', Ồ: 'O', Ổ: 'O', Ỗ: 'O', Öe: 'O', Ȫ: 'O', Ȯ: 'O', Ȱ: 'O', Ọ: 'O', Ő: 'O', Ȍ: 'O', Ò: 'O',\r\n      Ỏ: 'O', Ơ: 'O', Ớ: 'O', Ợ: 'O', Ờ: 'O', Ở: 'O', Ỡ: 'O', Ȏ: 'O', Ꝋ: 'O', Ꝍ: 'O', Ō: 'O', Ṓ: 'O',\r\n      Ṑ: 'O', Ɵ: 'O', Ǫ: 'O', Ǭ: 'O', Ø: 'O', Ǿ: 'O', Õ: 'O', Ṍ: 'O', Ṏ: 'O', Ȭ: 'O', Ƣ: 'OI', Ꝏ: 'OO',\r\n      Ɛ: 'E', Ɔ: 'O', Ȣ: 'OU', Ṕ: 'P', Ṗ: 'P', Ꝓ: 'P', Ƥ: 'P', Ꝕ: 'P', Ᵽ: 'P', Ꝑ: 'P', Ꝙ: 'Q', Ꝗ: 'Q',\r\n      Ŕ: 'R', Ř: 'R', Ŗ: 'R', Ṙ: 'R', Ṛ: 'R', Ṝ: 'R', Ȑ: 'R', Ȓ: 'R', Ṟ: 'R', Ɍ: 'R', Ɽ: 'R', Ꜿ: 'C',\r\n      Ǝ: 'E', Ś: 'S', Ṥ: 'S', Š: 'S', Ṧ: 'S', Ş: 'S', Ŝ: 'S', Ș: 'S', Ṡ: 'S', Ṣ: 'S', Ṩ: 'S', Ť: 'T',\r\n      Ţ: 'T', Ṱ: 'T', Ț: 'T', Ⱦ: 'T', Ṫ: 'T', Ṭ: 'T', Ƭ: 'T', Ṯ: 'T', Ʈ: 'T', Ŧ: 'T', Ɐ: 'A', Ꞁ: 'L',\r\n      Ɯ: 'M', Ʌ: 'V', Ꜩ: 'TZ', Ú: 'U', Ŭ: 'U', Ǔ: 'U', Û: 'U', Ṷ: 'U', Ü: 'Ue', Ǘ: 'U', Ǚ: 'U', Ǜ: 'U',\r\n      Ǖ: 'U', Ṳ: 'U', Ụ: 'U', Ű: 'U', Ȕ: 'U', Ù: 'U', Ủ: 'U', Ư: 'U', Ứ: 'U', Ự: 'U', Ừ: 'U', Ử: 'U',\r\n      Ữ: 'U', Ȗ: 'U', Ū: 'U', Ṻ: 'U', Ų: 'U', Ů: 'U', Ũ: 'U', Ṹ: 'U', Ṵ: 'U', Ꝟ: 'V', Ṿ: 'V', Ʋ: 'V',\r\n      Ṽ: 'V', Ꝡ: 'VY', Ẃ: 'W', Ŵ: 'W', Ẅ: 'W', Ẇ: 'W', Ẉ: 'W', Ẁ: 'W', Ⱳ: 'W', Ẍ: 'X', Ẋ: 'X', Ý: 'Y',\r\n      Ŷ: 'Y', Ÿ: 'Y', Ẏ: 'Y', Ỵ: 'Y', Ỳ: 'Y', Ƴ: 'Y', Ỷ: 'Y', Ỿ: 'Y', Ȳ: 'Y', Ɏ: 'Y', Ỹ: 'Y', Ź: 'Z',\r\n      Ž: 'Z', Ẑ: 'Z', Ⱬ: 'Z', Ż: 'Z', Ẓ: 'Z', Ȥ: 'Z', Ẕ: 'Z', Ƶ: 'Z', Ĳ: 'IJ', Œ: 'OE', ᴀ: 'A', ᴁ: 'AE',\r\n      ʙ: 'B', ᴃ: 'B', ᴄ: 'C', ᴅ: 'D', ᴇ: 'E', ꜰ: 'F', ɢ: 'G', ʛ: 'G', ʜ: 'H', ɪ: 'I', ʁ: 'R', ᴊ: 'J',\r\n      ᴋ: 'K', ʟ: 'L', ᴌ: 'L', ᴍ: 'M', ɴ: 'N', ᴏ: 'O', ɶ: 'OE', ᴐ: 'O', ᴕ: 'OU', ᴘ: 'P', ʀ: 'R', ᴎ: 'N',\r\n      ᴙ: 'R', ꜱ: 'S', ᴛ: 'T', ⱻ: 'E', ᴚ: 'R', ᴜ: 'U', ᴠ: 'V', ᴡ: 'W', ʏ: 'Y', ᴢ: 'Z', á: 'a', ă: 'a',\r\n      ắ: 'a', ặ: 'a', ằ: 'a', ẳ: 'a', ẵ: 'a', ǎ: 'a', â: 'a', ấ: 'a', ậ: 'a', ầ: 'a', ẩ: 'a', ẫ: 'a',\r\n      ä: 'ae', ǟ: 'a', ȧ: 'a', ǡ: 'a', ạ: 'a', ȁ: 'a', à: 'a', ả: 'a', ȃ: 'a', ā: 'a', ą: 'a', ᶏ: 'a',\r\n      ẚ: 'a', å: 'a', ǻ: 'a',\r\n      ḁ: 'a', ⱥ: 'a', ã: 'a', ꜳ: 'aa', æ: 'ae', ǽ: 'ae', ǣ: 'ae', ꜵ: 'ao', ꜷ: 'au', ꜹ: 'av', ꜻ: 'av',\r\n      ꜽ: 'ay', ḃ: 'b', ḅ: 'b', ɓ: 'b', ḇ: 'b', ᵬ: 'b', ᶀ: 'b', ƀ: 'b', ƃ: 'b', ɵ: 'o', ć: 'c', č: 'c',\r\n      ç: 'c', ḉ: 'c', ĉ: 'c', ɕ: 'c', ċ: 'c', ƈ: 'c', ȼ: 'c', ď: 'd', ḑ: 'd', ḓ: 'd', ȡ: 'd', ḋ: 'd',\r\n      ḍ: 'd', ɗ: 'd', ᶑ: 'd', ḏ: 'd', ᵭ: 'd', ᶁ: 'd', đ: 'd', ɖ: 'd', ƌ: 'd', ı: 'i', ȷ: 'j', ɟ: 'j',\r\n      ʄ: 'j', ǳ: 'dz', ǆ: 'dz', é: 'e', ĕ: 'e', ě: 'e', ȩ: 'e', ḝ: 'e', ê: 'e', ế: 'e', ệ: 'e', ề: 'e',\r\n      ể: 'e', ễ: 'e', ḙ: 'e', ë: 'e', ė: 'e', ẹ: 'e', ȅ: 'e', è: 'e', ẻ: 'e', ȇ: 'e', ē: 'e', ḗ: 'e',\r\n      ḕ: 'e', ⱸ: 'e', ę: 'e', ᶒ: 'e', ɇ: 'e', ẽ: 'e', ḛ: 'e', ꝫ: 'et', ḟ: 'f', ƒ: 'f', ᵮ: 'f', ᶂ: 'f',\r\n      ǵ: 'g', ğ: 'g', ǧ: 'g', ģ: 'g', ĝ: 'g', ġ: 'g', ɠ: 'g', ḡ: 'g', ᶃ: 'g', ǥ: 'g', ḫ: 'h', ȟ: 'h',\r\n      ḩ: 'h', ĥ: 'h', ⱨ: 'h', ḧ: 'h', ḣ: 'h', ḥ: 'h', ɦ: 'h', ẖ: 'h', ħ: 'h', ƕ: 'hv', í: 'i', ĭ: 'i',\r\n      ǐ: 'i', î: 'i', ï: 'i', ḯ: 'i', ị: 'i', ȉ: 'i', ì: 'i', ỉ: 'i', ȋ: 'i', ī: 'i', į: 'i', ᶖ: 'i',\r\n      ɨ: 'i', ĩ: 'i', ḭ: 'i', ꝺ: 'd', ꝼ: 'f', ᵹ: 'g', ꞃ: 'r', ꞅ: 's', ꞇ: 't', ꝭ: 'is', ǰ: 'j', ĵ: 'j',\r\n      ʝ: 'j', ɉ: 'j', ḱ: 'k', ǩ: 'k', ķ: 'k', ⱪ: 'k', ꝃ: 'k', ḳ: 'k', ƙ: 'k', ḵ: 'k', ᶄ: 'k', ꝁ: 'k',\r\n      ꝅ: 'k', ĺ: 'l', ƚ: 'l', ɬ: 'l', ľ: 'l', ļ: 'l', ḽ: 'l', ȴ: 'l', ḷ: 'l', ḹ: 'l', ⱡ: 'l', ꝉ: 'l',\r\n      ḻ: 'l', ŀ: 'l', ɫ: 'l', ᶅ: 'l', ɭ: 'l', ł: 'l', ǉ: 'lj', ſ: 's', ẜ: 's', ẛ: 's', ẝ: 's', ḿ: 'm',\r\n      ṁ: 'm', ṃ: 'm', ɱ: 'm', ᵯ: 'm', ᶆ: 'm', ń: 'n', ň: 'n', ņ: 'n', ṋ: 'n', ȵ: 'n', ṅ: 'n', ṇ: 'n',\r\n      ǹ: 'n', ɲ: 'n', ṉ: 'n', ƞ: 'n', ᵰ: 'n', ᶇ: 'n', ɳ: 'n', ñ: 'n', ǌ: 'nj', ó: 'o', ŏ: 'o', ǒ: 'o',\r\n      ô: 'o', ố: 'o', ộ: 'o', ồ: 'o', ổ: 'o', ỗ: 'o', ö: 'oe', ȫ: 'o', ȯ: 'o', ȱ: 'o', ọ: 'o', ő: 'o',\r\n      ȍ: 'o', ò: 'o', ỏ: 'o', ơ: 'o', ớ: 'o', ợ: 'o', ờ: 'o', ở: 'o', ỡ: 'o', ȏ: 'o', ꝋ: 'o', ꝍ: 'o',\r\n      ⱺ: 'o', ō: 'o', ṓ: 'o', ṑ: 'o', ǫ: 'o', ǭ: 'o', ø: 'o', ǿ: 'o', õ: 'o', ṍ: 'o', ṏ: 'o', ȭ: 'o',\r\n      ƣ: 'oi', ꝏ: 'oo', ɛ: 'e', ᶓ: 'e', ɔ: 'o', ᶗ: 'o', ȣ: 'ou', ṕ: 'p', ṗ: 'p', ꝓ: 'p', ƥ: 'p', ᵱ: 'p',\r\n      ᶈ: 'p', ꝕ: 'p', ᵽ: 'p', ꝑ: 'p', ꝙ: 'q', ʠ: 'q', ɋ: 'q', ꝗ: 'q', ŕ: 'r', ř: 'r', ŗ: 'r', ṙ: 'r',\r\n      ṛ: 'r', ṝ: 'r', ȑ: 'r', ɾ: 'r', ᵳ: 'r', ȓ: 'r', ṟ: 'r', ɼ: 'r', ᵲ: 'r', ᶉ: 'r', ɍ: 'r', ɽ: 'r',\r\n      ↄ: 'c', ꜿ: 'c', ɘ: 'e', ɿ: 'r', ß: 'ss', ś: 's', ṥ: 's', š: 's', ṧ: 's', ş: 's', ŝ: 's', ș: 's',\r\n      ṡ: 's', ṣ: 's', ṩ: 's', ʂ: 's', ᵴ: 's', ᶊ: 's', ȿ: 's', ɡ: 'g', ᴑ: 'o', ᴓ: 'o', ᴝ: 'u', ť: 't',\r\n      ţ: 't', ṱ: 't', ț: 't', ȶ: 't', ẗ: 't', ⱦ: 't', ṫ: 't', ṭ: 't', ƭ: 't', ṯ: 't', ᵵ: 't', ƫ: 't',\r\n      ʈ: 't', ŧ: 't', ᵺ: 'th', ɐ: 'a', ᴂ: 'ae', ǝ: 'e', ᵷ: 'g', ɥ: 'h', ʮ: 'h', ʯ: 'h', ᴉ: 'i', ʞ: 'k',\r\n      ꞁ: 'l', ɯ: 'm', ɰ: 'm', ᴔ: 'oe', ɹ: 'r', ɻ: 'r', ɺ: 'r', ⱹ: 'r', ʇ: 't', ʌ: 'v', ʍ: 'w', ʎ: 'y',\r\n      ꜩ: 'tz', ú: 'u', ŭ: 'u', ǔ: 'u', û: 'u', ṷ: 'u', ü: 'ue', ǘ: 'u', ǚ: 'u', ǜ: 'u', ǖ: 'u', ṳ: 'u',\r\n      ụ: 'u', ű: 'u', ȕ: 'u', ù: 'u', ủ: 'u', ư: 'u', ứ: 'u', ự: 'u', ừ: 'u', ử: 'u', ữ: 'u', ȗ: 'u',\r\n      ū: 'u', ṻ: 'u', ų: 'u', ᶙ: 'u', ů: 'u', ũ: 'u', ṹ: 'u', ṵ: 'u', ᵫ: 'ue', ꝸ: 'um', ⱴ: 'v', ꝟ: 'v',\r\n      ṿ: 'v', ʋ: 'v', ᶌ: 'v', ⱱ: 'v', ṽ: 'v', ꝡ: 'vy', ẃ: 'w', ŵ: 'w', ẅ: 'w', ẇ: 'w', ẉ: 'w', ẁ: 'w',\r\n      ⱳ: 'w', ẘ: 'w', ẍ: 'x', ẋ: 'x', ᶍ: 'x', ý: 'y', ŷ: 'y', ÿ: 'y', ẏ: 'y', ỵ: 'y', ỳ: 'y', ƴ: 'y',\r\n      ỷ: 'y', ỿ: 'y', ȳ: 'y', ẙ: 'y', ɏ: 'y', ỹ: 'y', ź: 'z', ž: 'z', ẑ: 'z', ʑ: 'z', ⱬ: 'z', ż: 'z',\r\n      ẓ: 'z', ȥ: 'z', ẕ: 'z', ᵶ: 'z', ᶎ: 'z', ʐ: 'z', ƶ: 'z', ɀ: 'z', ﬀ: 'ff', ﬃ: 'ffi', ﬄ: 'ffl', ﬁ: 'fi',\r\n      ﬂ: 'fl', ĳ: 'ij', œ: 'oe', ﬆ: 'st', ₐ: 'a', ₑ: 'e', ᵢ: 'i', ⱼ: 'j', ₒ: 'o', ᵣ: 'r', ᵤ: 'u', ᵥ: 'v',\r\n      ₓ: 'x',\r\n    };\r\n    return input.replace(/[^A-Za-z0-9\\[\\] ]/g, (a) => (latinMap[a] || a));\r\n  }\r\n\r\n  static readQueryStringParameters(url: string): Record<string, string> {\r\n    const queryParams: Record<string, string> = {};\r\n    url.split('&').forEach(f => {\r\n      if (f.split('=').length === 2) {\r\n        queryParams[f.split('=')[0]] = decodeURIComponent(f.split('=')[1].replace(/\\+/g, ' '));\r\n      }\r\n    });\r\n    return queryParams;\r\n  }\r\n\r\n  /** https://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters/1099670#1099670 */\r\n  static getUrlParams(qs: string) {\r\n    qs = qs.split('+').join(' ');\r\n\r\n    const params: Record<string, string> = {};\r\n    let tokens;\r\n    const re = /[?&]?([^=]+)=([^&]*)/g;\r\n\r\n    // tslint:disable-next-line:no-conditional-assignment\r\n    while (tokens = re.exec(qs)) {\r\n      params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\r\n    }\r\n\r\n    return params;\r\n  }\r\n\r\n  static replaceUrlParam(url: string, paramName: string, paramValue: string) {\r\n    if (paramValue === null) { paramValue = ''; }\r\n\r\n    const pattern = new RegExp('\\\\b(' + paramName + '=).*?(&|#|$)');\r\n    if (url.search(pattern) >= 0) { return url.replace(pattern, '$1' + paramValue + '$2'); }\r\n\r\n    url = url.replace(/[?#]$/, '');\r\n    return url + (url.indexOf('?') > 0 ? '&' : '?') + paramName + '=' + paramValue;\r\n  }\r\n\r\n  static getUrlPrefix(area: 'system' | 'zone' | 'app' | 'appShared', eavConfig: FormConfiguration) {\r\n    let result = '';\r\n\r\n    if (area === 'system') { result = eavConfig.systemRoot; } // used to link to JS-stuff and similar\r\n    if (area === 'zone') { result = eavConfig.portalRoot; } // used to link to the site-root (like an image)\r\n    if (area === 'app') { result = eavConfig.appRoot; } // used to find the app-root of something inside an app\r\n    if (area === 'appShared') { result = eavConfig.appSharedRoot; } // used to find the app-root of something inside an app\r\n    if (result.endsWith('/')) { result = result.substring(0, result.length - 1); }\r\n\r\n    return result;\r\n  }\r\n\r\n  static calculatePathFromRoot(route: ActivatedRoute) {\r\n    let lastChild = route;\r\n    while (lastChild.firstChild) {\r\n      lastChild = lastChild.firstChild;\r\n    }\r\n    let pathFromRoot = '';\r\n    for (const path of lastChild.snapshot.pathFromRoot) {\r\n      if (path.url.length <= 0) { continue; }\r\n      for (const urlSegment of path.url) {\r\n        if (!urlSegment.path) { continue; }\r\n        pathFromRoot += '/' + urlSegment.path;\r\n      }\r\n    }\r\n    return pathFromRoot;\r\n  }\r\n}\r\n","import { Component, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { EavLogger } from '../logging/eav-logger';\r\n\r\n// 2024-06-12 2dm experimental - remove comments if all is good mid of June\r\n// - previously had\r\n// @Directive()  // Needs the @Directive() so the compiler allows OnDestroy to be implemented\r\n@Component({\r\n  selector: 'app-base-component',\r\n  template: ''\r\n})\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseComponent implements OnDestroy {\r\n  \r\n  /** Holds all subscriptions to be unsubscribed on destroy */\r\n  protected subscriptions = new Subscription();\r\n\r\n  constructor(public log?: EavLogger) {\r\n    this.log ??= new EavLogger('BaseComponent', false);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n\r\n}\r\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit, Type, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { DialogConfig } from '../../models/dialog-config.model';\r\nimport { EavWindow } from '../../models/eav-window.model';\r\nimport { Context } from '../../services/context';\r\nimport { EavLogger } from '../../logging/eav-logger';\r\nimport { BaseComponent } from '../base.component';\r\nimport { NavigateFormResult } from '../../../edit/shared/services/edit-routing.service';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nconst logThis = false;\r\nconst nameOfThis = 'DialogEntryComponent';\r\n\r\n@Component({\r\n  selector: 'app-dialog-entry',\r\n  templateUrl: './dialog-entry.component.html',\r\n  styleUrls: ['./dialog-entry.component.scss'],\r\n  standalone: true,\r\n  imports: [],\r\n  providers: [\r\n    Context, // this is used in the dialog to get the correct App\r\n  ],\r\n})\r\nexport class DialogEntryComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  private dialogData: Record<string, any>;\r\n  private dialogRef: MatDialogRef<any>;\r\n\r\n  constructor(\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private context: Context,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    super(new EavLogger(nameOfThis, logThis));\r\n    const navigation = this.router.getCurrentNavigation();\r\n    this.dialogData = navigation?.extras?.state || {};\r\n  }\r\n\r\n  ngOnInit() {\r\n    const l = this.log.fn('ngOnInit');\r\n    const dialogConfig: DialogConfig = this.route.snapshot.data.dialog;\r\n    if (dialogConfig == null)\r\n      throw new Error(`Could not find config for dialog. Did you forget to add DialogConfig to route data?`);\r\n\r\n    l.a('Open dialog: '+ dialogConfig.name, { id: this.context.id, context: this.context });\r\n\r\n    dialogConfig.getComponent().then(component => {\r\n      // spm Workaround for \"feature\" where you can't open new dialog while last one is still opening\r\n      // https://github.com/angular/components/commit/728cf1c8ebd49e089f4bae945511bb0918972c26\r\n      const dialog = (this.dialog as any);\r\n      if (dialog._dialogAnimatingOpen && dialog._lastDialogRef)\r\n        (dialog._lastDialogRef as MatDialogRef<any>).afterOpened()\r\n          .subscribe(() => this.openDialogComponent(dialogConfig, component));\r\n      else\r\n        this.openDialogComponent(dialogConfig, component);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dialogRef.close();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  private openDialogComponent(dialogConfig: DialogConfig, component: Type<any>) {\r\n    this.log.a(`Open dialog(initContext: ${dialogConfig.initContext})`, { name: dialogConfig.name, 'Contextid:': this.context.log.svcId, 'Context:': this.context });\r\n    if (dialogConfig.initContext)\r\n      this.context.init(this.route);\r\n\r\n    this.dialogRef = this.dialog.open(component, {\r\n      autoFocus: false,\r\n      backdropClass: 'dialog-backdrop',\r\n      closeOnNavigation: false,\r\n      data: this.dialogData,\r\n      panelClass: [\r\n        'dialog-panel',\r\n        `dialog-panel-${dialogConfig.panelSize}`,\r\n        dialogConfig.showScrollbar ? 'show-scrollbar' : 'no-scrollbar',\r\n        ...(dialogConfig.panelClass ? dialogConfig.panelClass : []),\r\n      ],\r\n      // spm NOTE: position used to force align-items: flex-start; on cdk-global-overlay-wrapper.\r\n      // Real top margin is overwritten in css e.g. dialog-panel-large\r\n      position: { top: '0' },\r\n      viewContainerRef: this.viewContainerRef,\r\n    });\r\n\r\n    this.dialogRef.afterClosed().subscribe((data: any) => {\r\n      this.log.a('Dialog was closed - name:' + dialogConfig.name, { data });\r\n\r\n      const navRes = data as NavigateFormResult;\r\n      if (navRes?.navigateUrl != null) {\r\n        this.router.navigate([navRes.navigateUrl]);\r\n        return;\r\n      }\r\n\r\n      if (this.route.pathFromRoot.length <= 3) {\r\n        try {\r\n          window.parent.$2sxc.totalPopup.close();\r\n        } catch (error) { }\r\n        return;\r\n      }\r\n\r\n      if (this.route.snapshot.url.length > 0)\r\n        this.router.navigate(['./'], { relativeTo: this.route.parent, state: data });\r\n      else\r\n        this.router.navigate(['./'], { relativeTo: this.route.parent.parent, state: data });\r\n    });\r\n\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n}\r\n","export const DialogTypeConstants = {\r\n  Zone: 'zone',\r\n  Apps: 'apps',\r\n  AppImport: 'app-import',\r\n  App: 'app',\r\n  ContentType: 'contenttype',\r\n  ContentItems: 'contentitems',\r\n  Edit: 'edit',\r\n  ItemHistory: 'item-history',\r\n  Develop: 'develop',\r\n  PipelineDesigner: 'pipeline-designer',\r\n  Replace: 'replace',\r\n  InstanceList: 'instance-list',\r\n} as const;\r\n\r\nexport type DialogTypeConstant = typeof DialogTypeConstants[keyof typeof DialogTypeConstants];\r\n","const MetadataKeyTypes = {\r\n  Guid: 'guid',\r\n  String: 'string',\r\n  Number: 'number',\r\n} as const;\r\nexport type MetadataKeyType = typeof MetadataKeyTypes[keyof typeof MetadataKeyTypes];\r\n\r\nexport interface ScopeOption {\r\n  name: string;\r\n  value: string;\r\n}\r\n\r\nexport const SystemSettingsScopes = {\r\n  App: 'app',\r\n  Site: 'site',\r\n} as const;\r\nexport type SystemSettingsScope = typeof SystemSettingsScopes[keyof typeof SystemSettingsScopes];\r\n\r\nexport const EditApiKeyPaths = {\r\n  GoogleTranslate: 'Settings.GoogleTranslate.ApiKey',\r\n  GoogleMaps: 'Settings.GoogleMaps.ApiKey',\r\n} as const;\r\n\r\nexport interface MetadataKeyDefinition {\r\n  targetType: number;\r\n  target: string;\r\n  label: string;\r\n  keyType: MetadataKeyType;\r\n  hint?: string;\r\n}\r\n\r\n\r\nexport const eavConstants = {\r\n  metadata: {\r\n    /** Metadata of Attribute */\r\n    // tslint:disable-next-line:max-line-length\r\n    attribute: { targetType: 2, target: 'EAV Field Properties', label: 'Content-Type Field/Attribute (2)', keyType: MetadataKeyTypes.Number },\r\n    /** Metadata of App */\r\n    app: { targetType: 3, target: 'App', label: 'App (3)', keyType: MetadataKeyTypes.Number },\r\n    /** Metadata of Entity */\r\n    entity: { targetType: 4, target: 'Entity', label: 'Entity (4)', keyType: MetadataKeyTypes.Guid },\r\n    /** Metadata of ContentType */\r\n    contentType: { targetType: 5, target: 'ContentType', label: 'Content-Type (5)', keyType: MetadataKeyTypes.String },\r\n    /** Metadata of Zone */\r\n    zone: { targetType: 6, target: 'Zone', label: 'Zone (6) - not used as of now', keyType: MetadataKeyTypes.Number },\r\n    /** Metadata of Language (a Dimension) */\r\n    language: { targetType: 8, target: 'Dimension', label: 'Language (8)', keyType: MetadataKeyTypes.String },\r\n    /** Metadata of CmsObject */\r\n    cmsObject: { targetType: 10, target: 'CmsObject', label: 'Cms Object (10)', keyType: MetadataKeyTypes.String, hint: 'Usually this is \"file:400\" or \"folder:4030\"' },\r\n  } satisfies Record<string, MetadataKeyDefinition>,\r\n\r\n  appMetadata: {\r\n    LightSpeed: { ContentTypeName: 'LightSpeedOutputDecorator' }\r\n  },\r\n\r\n  /** Lookup type for the metadata, e.g. key=80adb152-efad-4aa4-855e-74c5ef230e1f is keyType=guid */\r\n  keyTypes: {\r\n    guid: MetadataKeyTypes.Guid,\r\n    string: MetadataKeyTypes.String,\r\n    number: MetadataKeyTypes.Number,\r\n  },\r\n\r\n  /** Scopes */\r\n  scopes: {\r\n    /** This is the main schema and the data you usually see is from here */\r\n    default: { name: 'Default', value: 'Default' },\r\n    configuration: { name: 'Configuration (Views etc.)', value: 'System.Configuration' },\r\n  },\r\n\r\n  /** Content types where templates, permissions, etc. are stored */\r\n  contentTypes: {\r\n    /** Content type containing app's specifications */\r\n    appConfiguration: '2SexyContent-App',\r\n    /** Content type containing app's views */\r\n    template: '2SexyContent-Template',\r\n    /** Content type containing permissions */\r\n    permissions: 'PermissionConfiguration',\r\n    /** Content type containing queries */\r\n    query: 'DataPipeline',\r\n    /** Content type containing content type metadata */\r\n    contentType: 'ContentType',\r\n    /** Content type containing app's custom settings */\r\n    settings: 'App-Settings',\r\n    /** Content type containing app's custom resources */\r\n    resources: 'App-Resources',\r\n    /** Content type containing app's system settings */\r\n    systemSettings: 'SettingsSystem',\r\n    /** Content type containing app's system resources */\r\n    systemResources: 'ResourcesSystem',\r\n    /** Content type containing Primary and Global App custom settings */\r\n    customSettings: 'SettingsCustom',\r\n    /** Content type containing Primary and Global App custom resources */\r\n    customResources: 'ResourcesCustom',\r\n    /** Content type containing formulas */\r\n    formulas: 'UiFormula',\r\n    /** Content type containing notes */\r\n    notes: 'NoteDecorator',\r\n    /** Content type containing settings for image scaling */\r\n    imageDecorator: 'ImageDecorator',\r\n  },\r\n\r\n  pipelineDesigner: {\r\n    dataSourceDifficulties: {\r\n      default: 100,\r\n      advanced: 200,\r\n    },\r\n    outDataSource: {\r\n      Description: 'The template/script which will show this data',\r\n      EntityGuid: 'Out',\r\n      In: ['Default', 'Header'],\r\n      Name: '2sxc Target (View or API)',\r\n      PartAssemblyAndType: 'SexyContentTemplate',\r\n      PrimaryType: 'Target',\r\n      VisualDesignerData: { Top: 20, Left: 200, Width: 700 },\r\n    },\r\n    defaultPipeline: {\r\n      dataSources: [\r\n        {\r\n          EntityGuid: 'unsaved1',\r\n          PartAssemblyAndType: 'ToSic.Sxc.DataSources.CmsBlock, ToSic.Sxc',\r\n          VisualDesignerData: { Top: 170, Left: 440 },\r\n        }\r\n      ],\r\n      streamWiring: [\r\n        { From: 'unsaved1', Out: 'Header', To: 'Out', In: 'Header' },\r\n        { From: 'unsaved1', Out: 'Default', To: 'Out', In: 'Default' },\r\n      ],\r\n    },\r\n    testParameters: '[Demo:Demo]=true',\r\n  },\r\n};\r\n","export const prefix = 'eav-';\r\nexport const keyZoneId = prefix + 'zoneId';\r\nexport const keyContentBlockId = prefix + 'cbid';\r\nexport const keyModuleId = prefix + 'mid';\r\nexport const keyAppId = prefix + 'appId';\r\nexport const keyDebug = prefix + 'debug';\r\nexport const keyDialog = prefix + 'dialog';\r\nexport const keyContentType = prefix + 'contentType';\r\nexport const keyItems = prefix + 'items';\r\nexport const keyPartOfPage = prefix + 'partOfPage';\r\nexport const keyPublishing = prefix + 'publishing';\r\nexport const keyFilters = prefix + 'filters';\r\nexport const keyPipelineId = prefix + 'pipelineId';\r\n\r\n/** WIP v16.01 */\r\nexport const keyEditFields = prefix + 'uifields';\r\n\r\n/** Url which opened the dialog. Used for debugging */\r\nexport const keyUrl = prefix + 'url';\r\n\r\n/** This is used by file editor to determine if it's editing shared files or of that portal only */\r\nexport const keyIsShared = prefix + 'isshared';\r\n\r\n/** Contains extra options for dialogs */\r\nexport const keyExtras = prefix + 'extras';\r\n\r\n/** Fallback value in case it is missing in url */\r\nexport const partOfPageDefault = 'false';\r\n","import { EavFor } from '../../edit/shared/models/eav';\r\nimport { eavConstants } from '../constants/eav.constants';\r\nimport { EavLogger } from '../logging/eav-logger';\r\nimport { EditForm, ItemAddIdentifier, ItemEditIdentifier, ItemIdentifierInbound, ItemIdentifierShared, ItemInListIdentifier } from '../models/edit-form.model';\r\n\r\nconst logThis = false;\r\nconst nameOfThis = \"UrlPrepHelper\";\r\n\r\nconst log = new EavLogger(nameOfThis, logThis);\r\n\r\nconst PREFILL_PREFIX = 'prefill:';\r\nconst GROUP_PREFIX = 'group:';\r\nconst FIELDS_PREFIX = 'uifields:';\r\nconst PARAM_PREFIX = 'parameters:';\r\nconst ITEM_SEPARATOR = ',';\r\nconst VAL_SEPARATOR = '&';\r\nconst LIST_SEPARATOR = ':';\r\n\r\nfunction toOrderedParams(values: unknown[]): string {\r\n  return values.join(LIST_SEPARATOR);\r\n}\r\n\r\nexport function convertFormToUrl(form: EditForm) {\r\n  const l = log.fn('convertFormToUrl', { form });\r\n  let formUrl = '';\r\n\r\n  for (const item of form.items) {\r\n    // If we already have one, the next must be separated\r\n    if (formUrl) formUrl += ITEM_SEPARATOR;\r\n\r\n    const asGroup = item as ItemInListIdentifier;\r\n    const asItem = item as ItemEditIdentifier;\r\n    const asInboundParams = item as ItemIdentifierInbound;\r\n    // Fields/Parameters can come from two places\r\n    // When a link is inbound from the page, it will use UiFields/Parameters\r\n    // If it's from the Admin-UI itself, it should use the newer / deeper ClientData\r\n    const fields = asInboundParams.UiFields ?? item.ClientData?.fields;\r\n    const parameters = asInboundParams.Parameters ?? item.ClientData?.parameters;\r\n    // Group- or Inner-Item\r\n    if (asGroup.Parent) {\r\n      l.a(\"asGroup having parent\", {asGroup});\r\n      formUrl += GROUP_PREFIX + toOrderedParams([\r\n        asGroup.Parent,\r\n        asGroup.Field,\r\n        asGroup.Index,\r\n        asGroup.Add,\r\n        asGroup.EntityId\r\n      ]);\r\n      formUrl += prefill2UrlParams(asGroup.Prefill);\r\n      formUrl += fields2UrlParams(fields);\r\n      formUrl += obj2UrlParams(parameters, PARAM_PREFIX);\r\n\r\n    } else if (asItem.EntityId) {\r\n      l.a(\"asItem having entity id\", {asItem});\r\n      // Edit Item\r\n      formUrl += asItem.EntityId;\r\n\r\n      // New: fields\r\n      formUrl += fields2UrlParams(fields);\r\n      formUrl += obj2UrlParams(parameters, PARAM_PREFIX);\r\n\r\n      // 2023-05-11 in edit-id mode, prefill isn't supported, but we want the fields\r\n      // I actually think that prefill should be supported, because it can also transport more parameters\r\n      // formUrl += prefill2UrlParams(groupItem.Prefill, fields);\r\n\r\n      // 2024-05-30 2dm reactivating prefill on edit, for scenarios where new fields were added\r\n      // and for ephemeral control fields\r\n      // 2024-06-01 2dm re-disabled, since this also affects links coming in from the page\r\n      // so this could be an unexpected breaking change...\r\n      // formUrl += prefill2UrlParams(asItem.Prefill);\r\n\r\n    } else if ((item as ItemAddIdentifier).ContentTypeName) {\r\n      l.a(\"asItem having content type name\", {item});\r\n      // Add Item\r\n      const addItem = item as ItemAddIdentifier;\r\n      formUrl += 'new:' + addItem.ContentTypeName;\r\n\r\n      formUrl += getParamForMetadata(addItem);\r\n      formUrl += prefill2UrlParams(addItem.Prefill);\r\n      formUrl += fields2UrlParams(fields);\r\n      formUrl += obj2UrlParams(parameters, PARAM_PREFIX);\r\n\r\n      if (addItem.DuplicateEntity) formUrl += `${VAL_SEPARATOR}copy:` + addItem.DuplicateEntity;\r\n    }\r\n  }\r\n\r\n  return l.r(formUrl);\r\n}\r\n\r\nfunction getParamForMetadata(addItem: ItemAddIdentifier) {\r\n  const l = log.fn(\"getParamForMetadata\", {addItem});\r\n\r\n  // helper function\r\n  const buildForSuffix = (itemFor: EavFor) => toOrderedParams([\r\n    '', // empty string to ensure it will start with a \":\"\r\n    itemFor.Target,\r\n    itemFor.TargetType,\r\n    (itemFor.Singleton ? itemFor.Singleton.toString() : '')\r\n  ]);\r\n\r\n  if (addItem.For?.String)\r\n    return l.r(`${VAL_SEPARATOR}for:s~` + paramEncode(addItem.For.String) + buildForSuffix(addItem.For), \"for string\");\r\n  if (addItem.For?.Number)\r\n    return l.r(`${VAL_SEPARATOR}for:n~` + addItem.For.Number + buildForSuffix(addItem.For), \"for number\");\r\n  if (addItem.For?.Guid)\r\n    return l.r(`${VAL_SEPARATOR}for:g~` + addItem.For.Guid + buildForSuffix(addItem.For), \"for guid\");\r\n  if (addItem.Metadata)\r\n    return l.r(getParamForOldMetadata(addItem), \"metadata\");\r\n  return l.r('', \"other\");\r\n}\r\n\r\nfunction getParamForOldMetadata(addItem: ItemAddIdentifier) {\r\n  const l = log.fn(\"getParamForOldMetadata\", {addItem});\r\n  let keyType: string;\r\n  switch (addItem.Metadata.keyType.toLocaleLowerCase()) {\r\n    case eavConstants.keyTypes.string:\r\n      keyType = 's';\r\n      break;\r\n    case eavConstants.keyTypes.number:\r\n      keyType = 'n';\r\n      break;\r\n    case eavConstants.keyTypes.guid:\r\n      keyType = 'g';\r\n      break;\r\n  }\r\n  const target = Object.values(eavConstants.metadata)\r\n    .find(m => m.targetType === addItem.Metadata.targetType)?.target;\r\n  const result = `${VAL_SEPARATOR}for:` + keyType + '~' + toOrderedParams([\r\n    paramEncode(addItem.Metadata.key),\r\n    target,\r\n    addItem.Metadata.targetType\r\n  ]);\r\n  return l.r(result, result);\r\n}\r\n\r\nfunction prefill2UrlParams(prefill: Record<string, unknown>) {\r\n  return obj2UrlParams(prefill, PREFILL_PREFIX);\r\n}\r\n\r\nfunction obj2UrlParams(obj: Record<string, unknown>, prefix: string) {\r\n  let result = '';\r\n  if (!obj) return result;\r\n  for (const [key, value] of Object.entries(obj)) {\r\n    if (value == null) continue;\r\n    result += `${VAL_SEPARATOR}${prefix}${key}~${paramEncode(value.toString())}`;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction prefillFromUrlParams(url: string, addTo: Record<string, unknown>): Record<string, unknown> {\r\n  const result = addTo ?? {} as Record<string, string>;\r\n  if (url == null) return result;\r\n  const prefillParams = url.split(LIST_SEPARATOR);\r\n  const key = prefillParams[1].split('~')[0];\r\n  const value = paramDecode(prefillParams[1].split('~')[1]);\r\n  result[key] = value;\r\n  return result;\r\n}\r\n\r\n// function objFromUrlParams(url: string, addTo: Record<string, string>, prefix: string): Record<string, string> {\r\n//   const result = addTo ?? {} as Record<string, string>;\r\n//   if (url == null) return result;\r\n//   const prefillParams = url.split(LIST_SEPARATOR);\r\n//   const key = prefillParams[1].split('~')[0];\r\n//   const value = paramDecode(prefillParams[1].split('~')[1]);\r\n//   result[key] = value;\r\n//   return result;\r\n// }\r\n\r\nfunction fields2UrlParams(fields: string) {\r\n  return fields ? `${VAL_SEPARATOR}${FIELDS_PREFIX}${paramEncode(fields)}` : '';\r\n}\r\n\r\nfunction isNumber(maybeNumber: string): boolean {\r\n  // The regex must be re-created for each test\r\n  return /^[0-9]*$/g.test(maybeNumber);\r\n}\r\n\r\nexport function convertUrlToForm(formUrl: string) {\r\n  const l = log.fn(\"convertUrlToForm\", { formUrl });\r\n  const form: EditForm = { items: [] };\r\n  const items = formUrl.split(ITEM_SEPARATOR);\r\n\r\n  for (const item of items) {\r\n    l.a(\"item\", {item});\r\n    if (item.startsWith(GROUP_PREFIX)) {\r\n      // Inner Item / Group Item\r\n      const innerItem = {} as ItemInListIdentifier;\r\n      const options = item.split(VAL_SEPARATOR);\r\n\r\n      for (const option of options) {\r\n        if (option.startsWith(GROUP_PREFIX)) {\r\n          const parms = option.split(LIST_SEPARATOR);\r\n          innerItem.Parent = parms[1];\r\n          innerItem.Field = parms[2];\r\n          innerItem.Index = parseInt(parms[3], 10);\r\n          innerItem.Add = parms[4] === 'true';\r\n          if (parms.length > 4 && parms[5] && isNumber(parms[5]))\r\n            innerItem.EntityId = parseInt(parms[5], 10);\r\n        } else\r\n          addParamToItemIdentifier(innerItem, option);\r\n      }\r\n      form.items.push(innerItem);\r\n    } else if (isNumber((item ?? '').split(VAL_SEPARATOR)[0])) {\r\n      // Edit Item\r\n      const parts = item.split(VAL_SEPARATOR);\r\n      const editItem: ItemEditIdentifier = { EntityId: parseInt(parts[0], 10) };\r\n      for (const part of parts)\r\n        addParamToItemIdentifier(editItem, part);\r\n      form.items.push(editItem);\r\n    } else if (item.startsWith('new:')) {\r\n      // Add Item\r\n      const addItem = {} as ItemAddIdentifier;\r\n      const options = item.split(VAL_SEPARATOR);\r\n\r\n      for (const option of options) {\r\n        if (option.startsWith('new:')) {\r\n          // Add Item ContentType\r\n          const newParams = option.split(LIST_SEPARATOR);\r\n          addItem.ContentTypeName = newParams[1];\r\n        } else if (option.startsWith('for:')) {\r\n          // Add Item For\r\n          const forParams = option.split(LIST_SEPARATOR);\r\n          const forKeyType = forParams[1].split('~')[0];\r\n          const forKey = forParams[1].split('~')[1];\r\n          const forTarget = forParams[2];\r\n          const forTargetType = parseInt(forParams[3], 10);\r\n          const forSingleton = forParams[4] != null ? forParams[4] === 'true' : undefined;\r\n          addItem.For = {\r\n            Target: forTarget,\r\n            TargetType: forTargetType,\r\n            ...(forKeyType === 'g' && { Guid: forKey }),\r\n            ...(forKeyType === 'n' && { Number: parseInt(forKey, 10) }),\r\n            ...(forKeyType === 's' && { String: paramDecode(forKey) }),\r\n            ...(forSingleton != null && { Singleton: forSingleton }),\r\n          };\r\n        } else if (option.startsWith('copy:')) {\r\n          // Add Item Copy\r\n          const copyParams = option.split(LIST_SEPARATOR);\r\n          addItem.DuplicateEntity = parseInt(copyParams[1], 10);\r\n        } else\r\n          addParamToItemIdentifier(addItem, option);\r\n      }\r\n      form.items.push(addItem);\r\n    }\r\n  }\r\n  return l.r(form);\r\n}\r\n\r\n/** add prefill and filter to url parameters */\r\nfunction addParamToItemIdentifier(item: ItemIdentifierShared, part: string): void {\r\n  const l = log.fn(\"addParamToItemIdentifier\", {item, part});\r\n  if (part.startsWith(FIELDS_PREFIX)) {\r\n    const fields = paramDecode(part.split(':')[1]);\r\n    // temp hacky workaround - put it prefill so it's still there after round-trip\r\n    // should later be on the re-added after the round-trip on the Fields property\r\n    item.Prefill = prefillFromUrlParams(part, { fields });\r\n    item.ClientData = { ...item.ClientData, fields };\r\n    return l.end();\r\n  }\r\n  // Add Item Prefill\r\n  if (part.startsWith(PREFILL_PREFIX)) {\r\n    item.Prefill = prefillFromUrlParams(part, item.Prefill);\r\n    return l.end();\r\n  }\r\n  // Add Item Form\r\n  if (part.startsWith(PARAM_PREFIX)) {\r\n    const formParams = prefillFromUrlParams(part, item.ClientData?.parameters);\r\n    item.ClientData = { ...item.ClientData, parameters: formParams };\r\n    return l.end();\r\n  }\r\n  l.end(null, 'no match');\r\n}\r\n\r\n/** Encodes characters in URL parameter to not mess up routing. Don't forget to decode it! :) */\r\nfunction paramEncode(text: string) {\r\n  return (text ?? '')\r\n    .replace(/\\//g, '%2F')\r\n    .replace(/\\:/g, '%3A')\r\n    .replace(/\\&/g, '%26')\r\n    .replace(/\\~/g, '%7E')\r\n    .replace(/\\,/g, '%2C');\r\n}\r\n\r\n/** Decodes characters in URL parameter */\r\nfunction paramDecode(text: string) {\r\n  return (text ?? '')\r\n    .replace(/%2F/g, '/')\r\n    .replace(/%3A/g, ':')\r\n    .replace(/%26/g, '&')\r\n    .replace(/%7E/g, '~')\r\n    .replace(/%2C/g, ',');\r\n}\r\n","import { environment } from '../../../environments/environment';\r\n\r\n/**\r\n * Enable logging of different messages.\r\n *\r\n * When needed, add new keys for new \"segments\"\r\n */\r\nconst enableLogging = {\r\n  always: true, // always active\r\n  dev: false,\r\n  store: false,\r\n  editForm: false,\r\n};\r\n\r\nconst warningNoLogShown: Record<string, boolean> = {};\r\n\r\n\r\n/** Log Store changes */\r\nexport function consoleLogStore(message?: any, ...optionalParams: any[]): void {\r\n  consoleLogInternal({ segment: 'store', message, data: optionalParams })\r\n}\r\n\r\n/** Log to Dev lightweight (no stack) - always active */\r\nexport function logMain(message?: any, data?: Record<string, unknown>): void {\r\n  consoleLogObject({ segment: 'always', message, callStack: false, data: data })\r\n}\r\n\r\nfunction consoleLogInternal(\r\n  { segment, message, callStack, data = [] }\r\n    : { segment: keyof typeof enableLogging; message?: any; callStack?: boolean, data?: any[]; }\r\n): void {\r\n  // Skip on production\r\n  if (environment.production) return;\r\n\r\n  // Check if we've already logged a lot to then stop logging\r\n  const segmentUpper = `[${segment?.toUpperCase()}]`;\r\n  if (!enableLogging[segment]) {\r\n    if (warningNoLogShown[segment]) return;\r\n    console.log(`${segmentUpper}-logging disabled, no further messages will show for this segment.`)\r\n    warningNoLogShown[segment] = true;\r\n    return;\r\n  }\r\n\r\n  // Make prefix uppercase if not always\r\n  const prefix = segment === 'always' ? '' : segmentUpper;\r\n\r\n  // New lightweight log, without the entire trace / call stack\r\n  if (callStack == false) {\r\n    if (!data || data.length === 0) {\r\n      console.log(`${prefix} ${message}`)\r\n      return;\r\n    }\r\n\r\n    if (data.length === 1) {\r\n      const show = data[0]\r\n      const len = (typeof (show) === 'string') ? `:${show.length}` : '';\r\n      console.log(`${prefix} ${message} [${typeof (show)}${len}]`, show);\r\n      return;\r\n    }\r\n\r\n    console.log(`${prefix} ${message}`, ...data);\r\n    return;\r\n  }\r\n\r\n  console.groupCollapsed(`${prefix} ${message}`, ...data);\r\n\r\n  // tslint:disable-next-line:no-console\r\n  console.trace();\r\n  console.groupEnd();\r\n}\r\n\r\nfunction consoleLogObject(\r\n  { segment, message, callStack, data = null }\r\n    : { segment: keyof typeof enableLogging; message?: any; callStack?: boolean, data?: Record<string, unknown>; }\r\n): void {\r\n  // Skip on production\r\n  if (environment.production) return;\r\n\r\n  // Check if we've already logged a lot to then stop logging\r\n  const segmentUpper = `[${segment?.toUpperCase()}]`;\r\n  if (!enableLogging[segment]) {\r\n    if (warningNoLogShown[segment]) return;\r\n    console.log(`${segmentUpper}-logging disabled, no further messages will show for this segment.`)\r\n    warningNoLogShown[segment] = true;\r\n    return;\r\n  }\r\n\r\n  // Make prefix uppercase if not always\r\n  const prefix = segment === 'always' ? '' : segmentUpper;\r\n\r\n  // New lightweight log, without the entire trace / call stack\r\n  if (callStack == false) {\r\n    if (!data)\r\n      return console.log(`${prefix} ${message}`)\r\n\r\n    const keys = Object.keys(data);\r\n    if (keys.length === 0)\r\n      return console.log(`${prefix} ${message}`);\r\n\r\n    if (keys.length === 1) {\r\n      const key = keys[0];\r\n      const show = data[key];\r\n      if (typeof (show) === 'string')\r\n        return console.log(`${prefix} ${message} [string:${show.length}] '${key}'='${show}'`);\r\n      return console.log(`${prefix} ${message} [${typeof (show)}}] '${key}'=`, show);\r\n    }\r\n\r\n    console.log(`${prefix} ${message} [${keys.length} data-items]`, data);\r\n    return;\r\n  }\r\n\r\n  console.groupCollapsed(`${prefix} ${message}`, data);\r\n\r\n  // tslint:disable-next-line:no-console\r\n  console.trace();\r\n  console.groupEnd();\r\n}\r\n\r\n","import { logMain } from '../helpers/console-log-angular.helper';\r\nimport { EavLogger } from './eav-logger';\r\n\r\nexport class EavLoggerFn {\r\n  constructor(private parent: EavLogger, private fnName: string, message?: string, data?: Record<string, unknown>) {\r\n    this.parent.a(fnName + '() ' + (message ?? ''), data);\r\n  }\r\n\r\n  values(data: Record<string, unknown>, intro?: string): void {\r\n    if (!data) return;\r\n    if (!this.parent.enabled) return;\r\n    intro = intro ? ` ${intro} ` : '';\r\n    logMain(`[${this.parent.nameWithSvcId}.${this.fnName}()] ${intro} values:`, data);\r\n  }\r\n\r\n  a(message: string, data?: Record<string, unknown>): void {\r\n    this.parent.a(`${this.fnName}/${message}`, data);\r\n  }\r\n\r\n  /** Return */\r\n  r<TResult>(value: TResult, message?: string): TResult {\r\n    this.parent.a(`${this.fnName}/return${message ? ' ' + message : ''}`, { result: value });\r\n    return value;\r\n  }\r\n\r\n  rNull(message?: string): null {\r\n    this.parent.a(`${this.fnName}/return NULL ${message}`);\r\n    return null;\r\n  }\r\n\r\n  /** End without return */\r\n  end(data?: Record<string, unknown>, message?: string) {\r\n    this.parent.a(`${this.fnName}/end${message ? ' ' + message : ''}`, data);\r\n  }\r\n}\r\n","import { Observable, tap } from 'rxjs';\r\nimport { EavLogger } from './eav-logger';\r\n\r\n/**\r\n * Special debug helper for RxJS observables\r\n */\r\nexport class RxTapDebug {\r\n  /**\r\n   * Constructor which will know the context and name of the stream it's for\r\n   * @param logger the main objects logger with name etc.\r\n   * @param name name of the stream we're logging\r\n   * @param jsonify will JSON.stringify the data if true - this is much faster as the browser doesn't block the debugger as much\r\n   */\r\n  constructor(private logger: EavLogger, public name: string, private enabled = true, private jsonify: boolean = true) { }\r\n\r\n  /**\r\n   * Generate a rxjs tap function that logs the data with the current context\r\n   * Inspired by https://blog.angular-university.io/debug-rxjs/\r\n   * @param key\r\n   * @param subName\r\n   * @param message\r\n   * @returns\r\n   */\r\n  private generateFn<T>(key: string, subName?: unknown, message?: string): (source: Observable<T>) => Observable<T> {\r\n    // if not enabled, just return the original observable\r\n    if (!this.enabled || !this.logger.enabled) return (source: Observable<T>) => source;\r\n\r\n    const label = `${this.name}/${key}${subName ? `-${subName}` : ''}`;\r\n    let counter = 0;\r\n\r\n    // return a function that takes an observable and returns an observable\r\n    // and logs the data, and counts every access\r\n    return (source: Observable<T>) =>\r\n      source.pipe(\r\n        tap((data) => {\r\n          const showData = data == null\r\n            ? data  // if null or undefined, just show it\r\n            : this.jsonify ? JSON.parse(JSON.stringify(data)) : data;\r\n          return this.logger.a(label + ` #${counter++}`, { showData });\r\n        })\r\n      );\r\n  };\r\n\r\n  /** Create a sub-rx-tap (not yet tested as of 2024-06-11) */\r\n  rxTap(name: string, { enabled = true, jsonify = true }: { enabled?: boolean; jsonify?: boolean; } = { enabled: true, jsonify: true }) {\r\n    return new RxTapDebug(this.logger, `${this.name}-${name}`, enabled, jsonify);\r\n  }\r\n\r\n\r\n  /**\r\n   * Recommended to use at the beginning of a pipe to show when inbound signals came\r\n   * @param subName optional sub-name, to distinguish between different uses\r\n   */\r\n  pipe<T>(subName?: string) { return this.generateFn<T>('pipe', subName); }\r\n\r\n  /**\r\n   * Recommended after map to show what the map did\r\n   * @param subName optional sub-name, to distinguish between different uses\r\n   */\r\n  map<T>(subName?: string) { return this.generateFn<T>('map', subName); }\r\n\r\n  /**\r\n   * Recommended after filter to show what the filter did\r\n   * @param subName optional sub-name, to distinguish between different uses\r\n   */\r\n  filter<T>(subName?: string) { return this.generateFn<T>('filter', subName); }\r\n\r\n  /**\r\n   * Recommended after shareReplay\r\n   * @param subName optional sub-name, to distinguish between different uses\r\n   * @returns\r\n   */\r\n  shareReplay<T>(subName?: string) { return this.generateFn<T>('shareReplay', subName); }\r\n\r\n  /**\r\n   * Recommended after distinctUntilChanged\r\n   * @param subName optional sub-name, to distinguish between different uses\r\n   * @returns\r\n   */\r\n  distinctUntilChanged<T>(subName?: string) { return this.generateFn<T>('distinctUntilChanged', subName); }\r\n\r\n\r\n  start<T>() { return this.generateFn<T>('start'); }\r\n  end<T>() { return this.generateFn<T>('end'); }\r\n  step<T>(num: number) { return this.generateFn('step' + num); }\r\n  part<T>(subName?: string) { return this.generateFn<T>('part', subName); };\r\n  read<T>(subName?: string) { return this.generateFn<T>('read', subName); }\r\n}\r\n","import { logMain } from '../helpers/console-log-angular.helper';\r\nimport { EavLoggerFn } from './eav-logger-fn';\r\nimport { RxTapDebug } from './rx-debug-dbg';\r\n\r\nexport class EavLogger {\r\n  /** Special random ID to identify a specific service and detect reuse or separate instances  */\r\n  svcId = Math.random().toString(36).substring(7);\r\n\r\n  enableChildren: boolean;\r\n\r\n  constructor(public name: string, public enabled: boolean, enableChildren?: boolean) {\r\n    this.enableChildren = enableChildren ?? false;\r\n    this.nameWithSvcId = `${name}-${this.svcId}`;\r\n  }\r\n\r\n  public rename(name: string) {\r\n    this.name = name;\r\n    this.nameWithSvcId = `${name}-${this.svcId}`;\r\n  }\r\n\r\n  public nameWithSvcId: string;\r\n\r\n  inherit(parent: EavLogger) {\r\n    this.enabled = this.enabled || parent.enabled;\r\n\r\n    // if this results in log enabled, inform the console.\r\n    // otherwise it's really hard to find out why a log is on\r\n    if (parent.enabled)\r\n      this.a(`Enabled: Inheriting log settings from parent ${parent.nameWithSvcId}`);\r\n  }\r\n\r\n  /**\r\n   * Special 'a' = add log helper to better diagnose what is happening\r\n   */\r\n  a(message: string, data?: Record<string, unknown>): void {\r\n    if (!this.enabled) return;\r\n    logMain(`[${this.nameWithSvcId}] ${message}`, data);\r\n  }\r\n\r\n  /** Create a special logger for rx logging */\r\n  rxTap(name: string, { enabled = true, jsonify = true }: { enabled?: boolean; jsonify?: boolean; } = { enabled: true, jsonify: true }) {\r\n    return new RxTapDebug(this, name, enabled, jsonify);\r\n  }\r\n\r\n  val(name: string, value: unknown) {\r\n    if (!this.enabled) return;\r\n    logMain(`[${this.nameWithSvcId}] value of ${name}:`, { value });\r\n  }\r\n\r\n  values(data: Record<string, unknown>) {\r\n    if (!this.enabled) return;\r\n    logMain(`[${this.nameWithSvcId}] values:`, data);\r\n  }\r\n\r\n  fn(name: string, data?: Record<string, unknown>, message?: string): EavLoggerFn {\r\n    return new EavLoggerFn(this, name, message, data);\r\n  }\r\n\r\n  /**\r\n   * Create a logger function that will only log if the condition is true\r\n   */\r\n  fnCond(condition: boolean, name: string, data?: Record<string, unknown>, message?: string): EavLoggerFn {\r\n    // create real logger if condition is true, or if this logger is disabled anyhow\r\n    return condition || !this.enabled\r\n      ? this.fn(name, data, message)\r\n      : new EavLogger('noop', false).fn('noop', { condition });\r\n  }\r\n}\r\n","import { Injectable, Optional, SkipSelf } from '@angular/core';\r\nimport { ActivatedRoute, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { keyAppId, keyContentBlockId, keyModuleId, keyZoneId, prefix } from '../constants/session.constants';\r\nimport { EavWindow } from '../models/eav-window.model';\r\nimport { ServiceBase } from './service-base';\r\nimport { EavLogger } from '../logging/eav-logger';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nconst logThis = false;\r\nconst nameOfThis = 'RouteContext';\r\n\r\n/**\r\n * Context is used to display information about the current app in various depths.\r\n * In other words, if you open another app in a deeper dialog in the app on Apps Management\r\n * (the component is deeper), you get the information from this app and not the initial app.\r\n */\r\n\r\n@Injectable()\r\nexport class Context extends ServiceBase {\r\n\r\n  constructor(@Optional() @SkipSelf() parentContext: Context) {\r\n    super(new EavLogger(nameOfThis, logThis));\r\n    this.log.a(`constructor; hasParent: ${parentContext != null}`, { parentContext, 'parentId': parentContext?.id });\r\n    this.parent = parentContext;\r\n\r\n    // spm NOTE: I've given id to every context to make it easier to follow how things work\r\n    if (!window.contextId)\r\n      window.contextId = 0;\r\n    this.id = window.contextId++;\r\n    this.log.a('Context.constructor', { this: this });\r\n  }\r\n\r\n  /** Id of current context */\r\n  public id: number;\r\n\r\n  /** Determines if the context is ready to use, and everything is initialized */\r\n  public ready = false;\r\n\r\n  /** The parent, for hierarchical lookup */\r\n  private parent: Context;\r\n\r\n  private routeSnapshot: ActivatedRouteSnapshot;\r\n\r\n  /** The current Zone ID */\r\n  get zoneId(): number {\r\n    return this._zoneId || (this._zoneId = this.routeNum(keyZoneId) || this.parent?.zoneId);\r\n  }\r\n  private _zoneId: number;\r\n\r\n  /** The current App ID */\r\n  get appId(): number {\r\n    return (this._appId != null) ? this._appId : (this._appId = this.routeNum(keyAppId) || this.parent?.appId);\r\n  }\r\n  private _appId: number;\r\n\r\n\r\n  /** Tab Id is global */\r\n  get tabId(): number {\r\n    return window.$2sxc.env.page();\r\n  }\r\n\r\n  /** Content Block Id is global */\r\n  get contentBlockId(): number {\r\n    return this._contentBlockId || (this._contentBlockId = this.routeNum(keyContentBlockId) || this.parent?.contentBlockId);\r\n  }\r\n  private _contentBlockId: number;\r\n\r\n  /** Module Id is global */\r\n  get moduleId(): number {\r\n    return this._moduleId || (this._moduleId = this.routeNum(keyModuleId) || this.parent?.moduleId);\r\n  }\r\n  private _moduleId: number;\r\n\r\n  /**\r\n   * This is the initializer at entry-components of modules.\r\n   * It ensures that within that module, the context has the values given by the route.\r\n   *\r\n   * Note: 2024-07-01 2dm: a long time ago the context was recreated for every single component, so init was also called for every component.\r\n   * But after going standalone, thi doesn't happen any more, and the re-init seems to kill the context from previous,\r\n   * which is why we skip this if already ready.\r\n   * This is still a bit shaky, not sure if this should be the final implementation.\r\n   */\r\n  init(route: ActivatedRoute) {\r\n    const l = this.log.fn(`init - previously ready: '${this.ready}'`, { route });\r\n    // New prevent-multiple-init checks 2dm 2024-07-01\r\n    if (this.ready)\r\n      return l.r(this, 'Already ready, skipping init');\r\n    this.routeSnapshot = route?.snapshot;\r\n    this.clearCachedValues();\r\n    this.ready = route != null;\r\n    this.log.a('init done', { this: this, 'appId': this.appId, 'zoneId': this.zoneId, 'contentBlockId': this.contentBlockId, 'moduleId': this.moduleId });\r\n  }\r\n\r\n  initRoot(): void {\r\n    const l = this.log.fn('initRoot');\r\n    this._zoneId = this.sessionNumber(keyZoneId);\r\n    this._contentBlockId = this.sessionNumber(keyContentBlockId);\r\n    this._moduleId = this.sessionNumber(keyModuleId);\r\n    this._appId = this.sessionNumber(keyAppId);\r\n\r\n    if (!this._zoneId)\r\n      throw new Error('Context is missing some of the required parameters');\r\n\r\n    this.ready = true;\r\n    l.r(this);\r\n  }\r\n\r\n  private sessionNumber(name: string): number {\r\n    const result = sessionStorage.getItem(name);\r\n    if (result === null) return null;\r\n    const num = parseInt(result, 10);\r\n    return isNaN(num) ? null : num;\r\n  }\r\n\r\n  /**\r\n   * Get a number from the route, or optionally its parents.\r\n   * Returns value in route or null\r\n   */\r\n  private routeNum(name: string): number {\r\n    // catch case where state is null, like when the recursive parent is in use\r\n    if (this.routeSnapshot == null) { return null; }\r\n    const paramName = name.substring(prefix.length);\r\n    const result = this.routeSnapshot.paramMap.get(paramName);\r\n    if (result !== null) {\r\n      const num = parseInt(result, 10);\r\n      return isNaN(num) ? null : num;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clears cached values. Required when one module instance is opened multiple times,\r\n   * e.g. Apps Management -> App Admin for appId 2 -> back -> App Admin for appId 17.\r\n   * Module is reused, and so is context and it contains values for previous appId.\r\n   */\r\n  private clearCachedValues() {\r\n    this._zoneId = null;\r\n    this._appId = null;\r\n    this._contentBlockId = null;\r\n    this._moduleId = null;\r\n  }\r\n}\r\n","import { Subscription } from 'rxjs';\r\nimport { EavLogger } from '../logging/eav-logger';\r\n\r\n/** Base class for services, with logging */\r\nexport class ServiceBase {\r\n  protected subscriptions = new Subscription();\r\n\r\n  constructor(public log: EavLogger) {\r\n  }\r\n\r\n  destroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n\r\n  // Note: we can't do this, because angular compiler complains about wanting to implement OnDestroy\r\n  // and if we do that, it will want a decorator, which we can't have here.\r\n  // ngOnDestroy() {\r\n  //   this.destroy();\r\n  // }\r\n\r\n}\r\n","export const environment = {\r\n  production: true\r\n};\r\n","// Font-Awesome\r\nimport codeCurly from '!raw-loader!../../assets/icons/code-curly.svg';\r\n\r\nexport const iconsFontAwesome: Record<string, string> = {\r\n  'code-curly': codeCurly,\r\n};\r\n","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M2.98187 13.2188C3.38292 13.2083 3.70844 13.1016 3.95844 12.8984C4.21365 12.6901 4.38292 12.4062 4.46625 12.0469C4.54958 11.6875 4.59385 11.0729 4.59906 10.2031C4.60427 9.33333 4.6199 8.76042 4.64594 8.48438C4.69281 8.04688 4.77875 7.69531 4.90375 7.42969C5.03396 7.16406 5.19281 6.95312 5.38031 6.79688C5.56781 6.63542 5.8074 6.51302 6.09906 6.42969C6.29698 6.3776 6.6199 6.35156 7.06781 6.35156H7.50531V7.57812H7.26312C6.72146 7.57812 6.36208 7.67708 6.185 7.875C6.00792 8.06771 5.91937 8.5026 5.91937 9.17969C5.91937 10.5443 5.89073 11.4062 5.83344 11.7656C5.73969 12.3229 5.57823 12.7526 5.34906 13.0547C5.1251 13.3568 4.77094 13.625 4.28656 13.8594C4.85948 14.099 5.27354 14.4661 5.52875 14.9609C5.78917 15.4505 5.91937 16.2552 5.91937 17.375C5.91937 18.3906 5.92979 18.9948 5.95062 19.1875C5.99229 19.5417 6.09646 19.7891 6.26312 19.9297C6.435 20.0703 6.76833 20.1406 7.26312 20.1406H7.50531V21.3672H7.06781C6.5574 21.3672 6.1876 21.3255 5.95844 21.2422C5.6251 21.1224 5.34906 20.9271 5.13031 20.6562C4.91156 20.3906 4.76833 20.0521 4.70062 19.6406C4.63812 19.2292 4.60427 18.5547 4.59906 17.6172C4.59385 16.6797 4.54958 16.0312 4.46625 15.6719C4.38292 15.3125 4.21365 15.0286 3.95844 14.8203C3.70844 14.612 3.38292 14.5026 2.98187 14.4922V13.2188ZM8.05344 18V16.3984H9.655V18H8.05344ZM11.2266 18V16.3984H12.8281V18H11.2266ZM14.3997 18V16.3984H16.0012V18H14.3997ZM21.0103 13.2188V14.4922C20.6093 14.5026 20.2811 14.612 20.0259 14.8203C19.7759 15.0286 19.6093 15.3125 19.5259 15.6719C19.4426 16.026 19.3983 16.638 19.3931 17.5078C19.3879 18.3776 19.3723 18.9505 19.3462 19.2266C19.2994 19.6693 19.2108 20.0208 19.0806 20.2812C18.9556 20.5469 18.7994 20.7578 18.6119 20.9141C18.4244 21.0755 18.1848 21.1979 17.8931 21.2812C17.6952 21.3385 17.3723 21.3672 16.9244 21.3672H16.4869V20.1406H16.7291C17.2707 20.1406 17.6301 20.0417 17.8072 19.8438C17.9843 19.651 18.0728 19.2135 18.0728 18.5312C18.0728 17.2292 18.0962 16.4036 18.1431 16.0547C18.2265 15.4766 18.3931 15.0156 18.6431 14.6719C18.8931 14.3229 19.2473 14.0521 19.7056 13.8594C19.1067 13.5729 18.6848 13.1953 18.44 12.7266C18.1952 12.2526 18.0728 11.4557 18.0728 10.3359C18.0728 9.32031 18.0598 8.71354 18.0337 8.51562C17.9973 8.16667 17.8931 7.92448 17.7212 7.78906C17.5546 7.64844 17.2239 7.57812 16.7291 7.57812H16.4869V6.35156H16.9244C17.4348 6.35156 17.8046 6.39323 18.0337 6.47656C18.3671 6.59115 18.6431 6.78385 18.8619 7.05469C19.0806 7.32552 19.2212 7.66667 19.2837 8.07812C19.3515 8.48958 19.3879 9.16406 19.3931 10.1016C19.3983 11.0391 19.4426 11.6875 19.5259 12.0469C19.6093 12.401 19.7759 12.6823 20.0259 12.8906C20.2811 13.099 20.6093 13.2083 21.0103 13.2188Z\\\"/>\\r\\n</svg>\\r\\n\";","import { Injectable } from '@angular/core';\r\nimport { MatIconRegistry } from '@angular/material/icon';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { iconsFontAwesome } from '.';\r\n\r\n@Injectable()\r\nexport class AppIconsService {\r\n  constructor(private matIconRegistry: MatIconRegistry, private domSanitizer: DomSanitizer) { }\r\n\r\n  load() {\r\n    // v18.01 - changing to Material Symbols\r\n    // this.matIconRegistry.setDefaultFontSetClass('material-icons-outlined');\r\n    this.matIconRegistry.setDefaultFontSetClass('material-symbols-outlined');\r\n\r\n    Object.entries(iconsFontAwesome).forEach(([name, svg]) => {\r\n      this.matIconRegistry.addSvgIconLiteral(name, this.domSanitizer.bypassSecurityTrustHtml(svg));\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext, SxcAppComponent } from '@2sic.com/sxc-angular';\r\nimport { ChangeDetectionStrategy, Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute, NavigationEnd, Router, RouterModule } from '@angular/router';\r\nimport { filter, map, Subscription } from 'rxjs';\r\nimport { AppIconsService } from './shared/icons/app-icons.service';\r\nimport { keyContentBlockId, keyModuleId } from './shared/constants/session.constants';\r\nimport { Context } from './shared/services/context';\r\nimport { transient } from './core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  standalone: true,\r\n  imports: [\r\n    RouterModule,\r\n  ],\r\n})\r\nexport class AppComponent extends SxcAppComponent implements OnInit, OnDestroy {\r\n  private subscription = new Subscription();\r\n\r\n  private titleService = transient(Title);\r\n\r\n  private appIconsService = transient(AppIconsService);\r\n\r\n  constructor(\r\n    el: ElementRef,\r\n    dnnContext: DnnContext,\r\n    private context: Context,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute,\r\n  ) {\r\n    super(\r\n      el,\r\n      dnnContext.preConfigure({\r\n        moduleId: parseInt(sessionStorage.getItem(keyModuleId) || '-1234', 10),\r\n        contentBlockId: parseInt(sessionStorage.getItem(keyContentBlockId) || '-1234', 10),\r\n      }),\r\n    );\r\n    this.context.initRoot();\r\n    this.appIconsService.load();\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Mostly copied from https://blog.bitsrc.io/dynamic-page-titles-in-angular-98ce20b5c334\r\n    // Routes need a data: { title: '...' } for this to work\r\n    const appTitle = this.titleService.getTitle(); // initial title when loading the page\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        map(() => {\r\n          let child = this.activatedRoute.firstChild;\r\n          while (child?.firstChild)\r\n            child = child.firstChild;\r\n          return child?.snapshot.data['title'] ?? appTitle;\r\n        }),\r\n      ).subscribe((title: string) => this.titleService.setTitle(title))\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { Routes } from '@angular/router';\r\nimport { EditRoutesRoot } from './edit/edit.routing';\r\n\r\nexport const routes: Routes = [\r\n  {\r\n    path: ':zoneId/apps',\r\n    loadChildren: () => import('./apps-management/apps-management.routing').then(m => m.appsManagementRoutes),\r\n\r\n    data: { title: 'Apps' },\r\n  },\r\n  {\r\n    path: ':zoneId/import',\r\n    loadChildren: () => import('./import-app/import-app.routing').then(m => m.importRoutes),\r\n    data: { title: 'Import App' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/app',\r\n    loadChildren: () => import('./app-administration/app-administration.routing').then(m => m.appAdministrationRoutes),\r\n    data: { title: 'App' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/code',\r\n    loadChildren: () => import('./code-editor/code-editor.routing').then(m => m.codeEditorRoutes),\r\n\r\n    data: { title: 'Code Editor' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/query/:pipelineId',\r\n    loadChildren: () => import('./visual-query/visual-query.routing').then(m => m.visualQueryRoutes),\r\n    data: { title: 'Visual Query' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/:guid/:part/:index/replace',\r\n    loadChildren: () => import('./replace-content/replace-content.routing').then(m => m.replaceContentRoutes),\r\n\r\n    data: { title: 'Apps' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/:guid/:part/:index/reorder',\r\n    loadChildren: () => import('./manage-content-list/manage-content-list.routing').then(m => m.manageContentRoutes),\r\n    data: { title: 'Reorder Items' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/items/:contentTypeStaticName',\r\n    loadChildren: () => import('./content-items/content-items.routing').then(m => m.contentItemsRoutes),\r\n    data: { title: 'Items' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/fields/:contentTypeStaticName',\r\n    loadChildren: () => import('./content-type-fields/content-type-fields.routing').then(m => m.contentTypeFieldsRoutes),\r\n    data: { title: 'Fields' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/versions/:itemId',\r\n    loadChildren: () => import('./item-history/item-history.routing').then(m => m.historyRoutes),\r\n  },\r\n  ...EditRoutesRoot,\r\n];\r\n\r\n","import { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { catchError, Observable, throwError } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class HandleErrorsInterceptor implements HttpInterceptor {\r\n  /** URLs excluded from detailed error alert  */\r\n  private excludedUrls = [\r\n    'dist/ng-edit/i18n',\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    return next.handle(req).pipe(\r\n      catchError((error: HttpErrorResponse) => {\r\n        if (!this.checkIfExcluded(error.url)) {\r\n          this.showDetailedHttpError(error);\r\n        }\r\n        return throwError(error);\r\n      })\r\n    );\r\n  }\r\n\r\n  private checkIfExcluded(url: string) {\r\n    for (const excludedUrl of this.excludedUrls) {\r\n      if (url.includes(excludedUrl)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private showDetailedHttpError(error: HttpErrorResponse) {\r\n    let infoText = 'Had an error talking to the server (status ' + error.status + ').';\r\n    const srvResp = error.error;\r\n    if (srvResp) {\r\n      const msg = srvResp.Message;\r\n      if (msg) { infoText += '\\nMessage: ' + msg; }\r\n      const msgDet = srvResp.MessageDetail || srvResp.ExceptionMessage;\r\n      if (msgDet) { infoText += '\\nDetail: ' + msgDet; }\r\n\r\n      if (msgDet && msgDet.indexOf('No action was found') === 0) {\r\n        if (msgDet.indexOf('that matches the name') > 0) {\r\n          infoText += '\\n\\nTip from 2sxc: you probably got the action-name wrong in your JS.';\r\n        } else if (msgDet.indexOf('that matches the request.') > 0) {\r\n          infoText += '\\n\\nTip from 2sxc: Seems like the parameters are the wrong amount or type.';\r\n        }\r\n      }\r\n\r\n      if (msg && msg.indexOf('Controller') === 0 && msg.indexOf('not found') > 0) {\r\n        infoText += '\\n\\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word \\'controller\\' from the call in JS. To call a controller called \\'DemoController\\' only use \\'Demo\\'.';\r\n      }\r\n      infoText += '\\n\\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug';\r\n    }\r\n\r\n    alert(infoText);\r\n  }\r\n}\r\n","import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class SetHeadersInterceptor implements HttpInterceptor {\r\n\r\n  constructor() { }\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    let modified: HttpRequest<any>;\r\n    if (req.body instanceof FormData) {\r\n      // sending files. Do not set content type so browser can add delimiter boundary automatically\r\n      return next.handle(req);\r\n    } else {\r\n      modified = req.clone({\r\n        setHeaders: {\r\n          'Content-Type': 'application/json;charset=UTF-8',\r\n        }\r\n      });\r\n      return next.handle(modified);\r\n    }\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { TranslateLoader } from '@ngx-translate/core';\r\nimport { catchError, Observable, of } from 'rxjs';\r\n\r\n/**\r\n * This loader should catch a 404 if the file doesn't exist and not result in errors.\r\n * https://stackoverflow.com/questions/47391613/how-to-set-a-fallback-assets-i18n-en-json-when-url-is-not-available-ngx-trans\r\n */\r\nexport class TranslateLoaderWithErrorHandling implements TranslateLoader {\r\n  constructor(private http: HttpClient, private prefix: string, private suffix: string) { }\r\n\r\n  getTranslation(lang: string): Observable<Record<string, any>> {\r\n    return this.http.get<Record<string, any>>(`${this.prefix}${lang}${this.suffix}`).pipe(\r\n      catchError(error => {\r\n        console.warn(`Translation: Failed to get language '${lang}' from ${this.prefix}`, error);\r\n        return of({});\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { provideRouter } from '@angular/router';\r\nimport { routes } from './app.routes';\r\nimport { APP_INITIALIZER, ApplicationConfig, importProvidersFrom, Injector } from '@angular/core';\r\nimport { SxcHttpInterceptorProvider } from '@2sic.com/sxc-angular';\r\nimport { LocationStrategy, HashLocationStrategy } from '@angular/common';\r\nimport { HTTP_INTERCEPTORS, HttpClientModule } from '@angular/common/http';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { paramsInitFactory } from './params-init.factory';\r\nimport { HandleErrorsInterceptor } from './shared/interceptors/handle-errors.interceptor';\r\nimport { SetHeadersInterceptor } from './shared/interceptors/set-headers.interceptor';\r\nimport { Context } from './shared/services/context';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { buildTranslateConfiguration } from './shared/translation';\r\nimport { translateLoaderFactory } from './shared/translation/translate-loader-factory';\r\nimport { MAT_FORM_FIELD_DEFAULT_OPTIONS } from '@angular/material/form-field';\r\n\r\nexport const appConfig: ApplicationConfig = {\r\n\r\n  providers: [\r\n    provideRouter(routes),\r\n    importProvidersFrom(\r\n      BrowserModule,\r\n      BrowserAnimationsModule,\r\n      HttpClientModule,\r\n      TranslateModule.forRoot(),\r\n      TranslateModule.forChild(buildTranslateConfiguration(translateLoaderFactory)),\r\n    ),\r\n    SxcHttpInterceptorProvider,\r\n    Context,\r\n    { provide: APP_INITIALIZER, useFactory: paramsInitFactory, deps: [Injector], multi: true },\r\n    { provide: LocationStrategy, useClass: HashLocationStrategy },\r\n    { provide: HTTP_INTERCEPTORS, useClass: SetHeadersInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: HandleErrorsInterceptor, multi: true },\r\n    { provide: MAT_FORM_FIELD_DEFAULT_OPTIONS, useValue: { subscriptSizing: 'dynamic' } },\r\n  ],\r\n\r\n};\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { TranslateLoader, TranslateModuleConfig } from '@ngx-translate/core';\r\n\r\nexport function buildTranslateConfiguration(factory: (http: HttpClient) => TranslateLoader): TranslateModuleConfig {\r\n  const config: TranslateModuleConfig = {\r\n    loader: {\r\n      provide: TranslateLoader,\r\n      useFactory: factory,\r\n      deps: [HttpClient],\r\n    },\r\n    defaultLanguage: 'en',\r\n    isolate: true,\r\n  };\r\n  return config;\r\n}\r\n","import { HttpClient } from \"@angular/common/http\";\r\nimport { TranslateLoader } from \"@ngx-translate/core\";\r\nimport { EavWindow } from \"../models/eav-window.model\";\r\nimport { TranslateLoaderWithErrorHandling } from \"./translate-loader-with-error-handling\";\r\n\r\ndeclare const window: EavWindow;\r\n\r\n// AoT requires an exported function for factories\r\n// at least according to https://github.com/ngx-translate/http-loader\r\nexport function translateLoaderFactory(http: HttpClient): TranslateLoader {\r\n  return new TranslateLoaderWithErrorHandling(http, './i18n/', `.js?${window.sxcVersion}`);\r\n}\r\n","import { Injector } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { UrlHelpers } from './edit/shared/helpers/url.helpers';\r\nimport { DialogTypeConstant, DialogTypeConstants } from './shared/constants/dialog-type.constants';\r\n// tslint:disable-next-line:max-line-length\r\nimport { keyAppId, keyContentType, keyDialog, keyExtras, keyItems, keyPipelineId, keyUrl, keyZoneId, prefix } from './shared/constants/session.constants';\r\nimport { convertFormToUrl } from './shared/helpers/url-prep.helper';\r\nimport { ExtrasParam } from './shared/models/dialog-url-params.model';\r\nimport { EavWindow } from './shared/models/eav-window.model';\r\nimport { EditForm, ItemEditIdentifier, ItemInListIdentifier } from './shared/models/edit-form.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport function paramsInitFactory(injector: Injector): () => void {\r\n  return () => {\r\n    console.log('Setting parameters config and clearing route');\r\n    const eavKeys = Object.keys(sessionStorage).filter(key => key.startsWith(prefix));\r\n    const isParamsRoute = !window.location.hash.startsWith('#/');\r\n    if (isParamsRoute) {\r\n      console.log('Initial route:', window.location.href);\r\n      // clear our part of the session\r\n      for (const key of eavKeys) {\r\n        sessionStorage.removeItem(key);\r\n      }\r\n      sessionStorage.setItem(keyUrl, window.location.href); // save url which opened the dialog\r\n      sessionStorage.setItem(keyDialog, DialogTypeConstants.Edit); // set edit dialog as the default\r\n\r\n      // save params\r\n      const urlHash = window.location.hash.substring(1); // substring removes first # char\r\n      const queryParametersFromUrl = UrlHelpers.readQueryStringParameters(urlHash);\r\n\r\n      for (const [paramKey, paramValue] of Object.entries(queryParametersFromUrl)) {\r\n        if (paramValue == null) { continue; }\r\n        sessionStorage.setItem(prefix + paramKey, paramValue);\r\n      }\r\n\r\n      // redirect\r\n      const router = injector.get(Router);\r\n      const zoneId = sessionStorage.getItem(keyZoneId);\r\n      const appId = sessionStorage.getItem(keyAppId);\r\n      const dialog = sessionStorage.getItem(keyDialog) as DialogTypeConstant;\r\n      const contentType = sessionStorage.getItem(keyContentType);\r\n      const items = sessionStorage.getItem(keyItems);\r\n      switch (dialog) {\r\n        case DialogTypeConstants.Zone:\r\n          const extrasZone: ExtrasParam = JSON.parse(sessionStorage.getItem(keyExtras));\r\n          router.navigate([`${zoneId}/apps${extrasZone?.tab ? `/${extrasZone.tab}` : ''}`]);\r\n          break;\r\n        case DialogTypeConstants.Apps:\r\n          router.navigate([`${zoneId}/apps/list`]);\r\n          break;\r\n        case DialogTypeConstants.AppImport:\r\n          router.navigate([`${zoneId}/import`]);\r\n          break;\r\n        case DialogTypeConstants.App:\r\n          const extrasApp: ExtrasParam = JSON.parse(sessionStorage.getItem(keyExtras));\r\n          router.navigate([`${zoneId}/${appId}/app${extrasApp?.tab ? `/${extrasApp.tab}` : ''}${extrasApp?.scope ? `/${extrasApp.scope}` : ''}`]);\r\n          break;\r\n        case DialogTypeConstants.ContentType:\r\n          router.navigate([`${zoneId}/${appId}/fields/${contentType}`]);\r\n          break;\r\n        case DialogTypeConstants.ContentItems:\r\n          router.navigate([`${zoneId}/${appId}/items/${contentType}`]);\r\n          break;\r\n        case DialogTypeConstants.Edit:\r\n          const editItems: ItemEditIdentifier[] = JSON.parse(items);\r\n          const form: EditForm = { items: editItems };\r\n          // const fields = sessionStorage.getItem(keyEditFields);\r\n          const formUrl = convertFormToUrl(form);\r\n          router.navigate([`${zoneId}/${appId}/edit/${formUrl}`]);\r\n          break;\r\n        case DialogTypeConstants.ItemHistory:\r\n          const historyItems: ItemEditIdentifier[] = JSON.parse(items);\r\n          router.navigate([`${zoneId}/${appId}/versions/${historyItems[0].EntityId}`]);\r\n          break;\r\n        case DialogTypeConstants.Develop:\r\n          router.navigate([`${zoneId}/${appId}/code`]);\r\n          break;\r\n        case DialogTypeConstants.PipelineDesigner:\r\n          const pipelineId = sessionStorage.getItem(keyPipelineId);\r\n          router.navigate([`${zoneId}/${appId}/query/${pipelineId}`]);\r\n          break;\r\n        case DialogTypeConstants.Replace:\r\n          const repItem = (JSON.parse(items) as ItemInListIdentifier[])[0];\r\n          const rGuid = repItem.Parent;\r\n          const rPart = repItem.Field;\r\n          const rIndex = repItem.Index;\r\n          const add = repItem.Add;\r\n          const queryParams = add ? { add: true } : {};\r\n          router.navigate([`${zoneId}/${appId}/${rGuid}/${rPart}/${rIndex}/replace`], { queryParams });\r\n          break;\r\n        case DialogTypeConstants.InstanceList:\r\n          const grpItem = (JSON.parse(items) as ItemInListIdentifier[])[0];\r\n          const gGuid = grpItem.Parent;\r\n          const gPart = grpItem.Field;\r\n          const gIndex = grpItem.Index;\r\n          router.navigate([`${zoneId}/${appId}/${gGuid}/${gPart}/${gIndex}/reorder`]);\r\n          break;\r\n        default:\r\n          alert(`Cannot open unknown dialog \"${dialog}\"`);\r\n          try {\r\n            window.parent.$2sxc.totalPopup.close();\r\n          } catch (error) { }\r\n      }\r\n    } else if (eavKeys.length === 0) {\r\n      // if not params route and no params are saved, e.g. browser was reopened, throw error\r\n      alert('Missing required url parameters. Please reopen dialog.');\r\n      throw new Error('Missing required url parameters. Please reopen dialog.');\r\n    } else {\r\n      console.log('Initial route:', sessionStorage.getItem(keyUrl));\r\n    }\r\n  };\r\n}\r\n","import { enableProdMode } from '@angular/core';\r\nimport { environment } from './environments/environment';\r\nimport { AppComponent } from './app/app.component';\r\nimport { appConfig } from './app/app.config';\r\nimport { bootstrapApplication } from '@angular/platform-browser';\r\n\r\nif (environment.production)\r\n  enableProdMode();\r\n\r\nbootstrapApplication(AppComponent, appConfig)\r\n  .catch((err) => console.error(err));\r\n"],"x_google_ignoreList":[]}