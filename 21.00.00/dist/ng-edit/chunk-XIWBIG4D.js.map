{"version":3,"sources":["node_modules/@monaco-editor/loader/lib/es/_virtual/_rollupPluginBabelHelpers.js","node_modules/state-local/lib/es/state-local.js","node_modules/@monaco-editor/loader/lib/es/config/index.js","node_modules/@monaco-editor/loader/lib/es/utils/curry.js","node_modules/@monaco-editor/loader/lib/es/utils/isObject.js","node_modules/@monaco-editor/loader/lib/es/validators/index.js","node_modules/@monaco-editor/loader/lib/es/utils/compose.js","node_modules/@monaco-editor/loader/lib/es/utils/deepMerge.js","node_modules/@monaco-editor/loader/lib/es/utils/makeCancelable.js","node_modules/@monaco-editor/loader/lib/es/loader/index.js","projects/eav-ui/src/app/shared/typescript-helpers/name-of.ts","projects/eav-ui/src/app/monaco-editor/monaco-instance.ts","projects/eav-ui/src/app/monaco-editor/monaco-editor.ts","projects/eav-ui/src/app/monaco-editor/monaco-editor.html"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _arrayLikeToArray as arrayLikeToArray, _arrayWithHoles as arrayWithHoles, _defineProperty as defineProperty, _iterableToArrayLimit as iterableToArrayLimit, _nonIterableRest as nonIterableRest, _objectSpread2 as objectSpread2, _objectWithoutProperties as objectWithoutProperties, _objectWithoutPropertiesLoose as objectWithoutPropertiesLoose, _slicedToArray as slicedToArray, _unsupportedIterableToArray as unsupportedIterableToArray };","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n}\nfunction curry(fn) {\n  return function curried() {\n    var _this = this;\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len3 = arguments.length, nextArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        nextArgs[_key3] = arguments[_key3];\n      }\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\nfunction isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\nfunction isEmpty(obj) {\n  return !Object.keys(obj).length;\n}\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\nfunction validateChanges(initial, changes) {\n  if (!isObject(changes)) errorHandler('changeType');\n  if (Object.keys(changes).some(function (field) {\n    return !hasOwnProperty(initial, field);\n  })) errorHandler('changeField');\n  return changes;\n}\nfunction validateSelector(selector) {\n  if (!isFunction(selector)) errorHandler('selectorType');\n}\nfunction validateHandler(handler) {\n  if (!(isFunction(handler) || isObject(handler))) errorHandler('handlerType');\n  if (isObject(handler) && Object.values(handler).some(function (_handler) {\n    return !isFunction(_handler);\n  })) errorHandler('handlersType');\n}\nfunction validateInitial(initial) {\n  if (!initial) errorHandler('initialIsRequired');\n  if (!isObject(initial)) errorHandler('initialType');\n  if (isEmpty(initial)) errorHandler('initialContent');\n}\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\nvar errorMessages = {\n  initialIsRequired: 'initial state is required',\n  initialType: 'initial state should be an object',\n  initialContent: 'initial state shouldn\\'t be an empty object',\n  handlerType: 'handler should be an object or a function',\n  handlersType: 'all handlers should be a functions',\n  selectorType: 'selector should be a function',\n  changeType: 'provided value of changes should be an object',\n  changeField: 'it seams you want to change a field in the state which is not specified in the \"initial\" state',\n  \"default\": 'an unknown error accured in `state-local` package'\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  changes: validateChanges,\n  selector: validateSelector,\n  handler: validateHandler,\n  initial: validateInitial\n};\nfunction create(initial) {\n  var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  validators.initial(initial);\n  validators.handler(handler);\n  var state = {\n    current: initial\n  };\n  var didUpdate = curry(didStateUpdate)(state, handler);\n  var update = curry(updateState)(state);\n  var validate = curry(validators.changes)(initial);\n  var getChanges = curry(extractChanges)(state);\n  function getState() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (state) {\n      return state;\n    };\n    validators.selector(selector);\n    return selector(state.current);\n  }\n  function setState(causedChanges) {\n    compose(didUpdate, update, validate, getChanges)(causedChanges);\n  }\n  return [getState, setState];\n}\nfunction extractChanges(state, causedChanges) {\n  return isFunction(causedChanges) ? causedChanges(state.current) : causedChanges;\n}\nfunction updateState(state, changes) {\n  state.current = _objectSpread2(_objectSpread2({}, state.current), changes);\n  return changes;\n}\nfunction didStateUpdate(state, handler, changes) {\n  isFunction(handler) ? handler(state.current) : Object.keys(changes).forEach(function (field) {\n    var _handler$field;\n    return (_handler$field = handler[field]) === null || _handler$field === void 0 ? void 0 : _handler$field.call(handler, state.current[field]);\n  });\n  return changes;\n}\nvar index = {\n  create: create\n};\nexport default index;","var config = {\n  paths: {\n    vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs'\n  }\n};\nexport default config;","function curry(fn) {\n  return function curried() {\n    var _this = this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len2 = arguments.length, nextArgs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        nextArgs[_key2] = arguments[_key2];\n      }\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\nexport default curry;","function isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\nexport default isObject;","import curry from '../utils/curry.js';\nimport isObject from '../utils/isObject.js';\n\n/**\n * validates the configuration object and informs about deprecation\n * @param {Object} config - the configuration object \n * @return {Object} config - the validated configuration object\n */\n\nfunction validateConfig(config) {\n  if (!config) errorHandler('configIsRequired');\n  if (!isObject(config)) errorHandler('configType');\n  if (config.urls) {\n    informAboutDeprecation();\n    return {\n      paths: {\n        vs: config.urls.monacoBase\n      }\n    };\n  }\n  return config;\n}\n/**\n * logs deprecation message\n */\n\nfunction informAboutDeprecation() {\n  console.warn(errorMessages.deprecation);\n}\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\nvar errorMessages = {\n  configIsRequired: 'the configuration object is required',\n  configType: 'the configuration object should be an object',\n  \"default\": 'an unknown error accured in `@monaco-editor/loader` package',\n  deprecation: \"Deprecation warning!\\n    You are using deprecated way of configuration.\\n\\n    Instead of using\\n      monaco.config({ urls: { monacoBase: '...' } })\\n    use\\n      monaco.config({ paths: { vs: '...' } })\\n\\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\\n  \"\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  config: validateConfig\n};\nexport default validators;\nexport { errorHandler, errorMessages };","var compose = function compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n};\nexport default compose;","import { objectSpread2 as _objectSpread2 } from '../_virtual/_rollupPluginBabelHelpers.js';\nfunction merge(target, source) {\n  Object.keys(source).forEach(function (key) {\n    if (source[key] instanceof Object) {\n      if (target[key]) {\n        Object.assign(source[key], merge(target[key], source[key]));\n      }\n    }\n  });\n  return _objectSpread2(_objectSpread2({}, target), source);\n}\nexport default merge;","// The source (has been changed) is https://github.com/facebook/react/issues/5465#issuecomment-157888325\nvar CANCELATION_MESSAGE = {\n  type: 'cancelation',\n  msg: 'operation is manually canceled'\n};\nfunction makeCancelable(promise) {\n  var hasCanceled_ = false;\n  var wrappedPromise = new Promise(function (resolve, reject) {\n    promise.then(function (val) {\n      return hasCanceled_ ? reject(CANCELATION_MESSAGE) : resolve(val);\n    });\n    promise[\"catch\"](reject);\n  });\n  return wrappedPromise.cancel = function () {\n    return hasCanceled_ = true;\n  }, wrappedPromise;\n}\nexport default makeCancelable;\nexport { CANCELATION_MESSAGE };","import { slicedToArray as _slicedToArray, objectWithoutProperties as _objectWithoutProperties } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport state from 'state-local';\nimport config$1 from '../config/index.js';\nimport validators from '../validators/index.js';\nimport compose from '../utils/compose.js';\nimport merge from '../utils/deepMerge.js';\nimport makeCancelable from '../utils/makeCancelable.js';\n\n/** the local state of the module */\n\nvar _state$create = state.create({\n    config: config$1,\n    isInitialized: false,\n    resolve: null,\n    reject: null,\n    monaco: null\n  }),\n  _state$create2 = _slicedToArray(_state$create, 2),\n  getState = _state$create2[0],\n  setState = _state$create2[1];\n/**\n * set the loader configuration\n * @param {Object} config - the configuration object\n */\n\nfunction config(globalConfig) {\n  var _validators$config = validators.config(globalConfig),\n    monaco = _validators$config.monaco,\n    config = _objectWithoutProperties(_validators$config, [\"monaco\"]);\n  setState(function (state) {\n    return {\n      config: merge(state.config, config),\n      monaco: monaco\n    };\n  });\n}\n/**\n * handles the initialization of the monaco-editor\n * @return {Promise} - returns an instance of monaco (with a cancelable promise)\n */\n\nfunction init() {\n  var state = getState(function (_ref) {\n    var monaco = _ref.monaco,\n      isInitialized = _ref.isInitialized,\n      resolve = _ref.resolve;\n    return {\n      monaco: monaco,\n      isInitialized: isInitialized,\n      resolve: resolve\n    };\n  });\n  if (!state.isInitialized) {\n    setState({\n      isInitialized: true\n    });\n    if (state.monaco) {\n      state.resolve(state.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n    if (window.monaco && window.monaco.editor) {\n      storeMonacoInstance(window.monaco);\n      state.resolve(window.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n    compose(injectScripts, getMonacoLoaderScript)(configureLoader);\n  }\n  return makeCancelable(wrapperPromise);\n}\n/**\n * injects provided scripts into the document.body\n * @param {Object} script - an HTML script element\n * @return {Object} - the injected HTML script element\n */\n\nfunction injectScripts(script) {\n  return document.body.appendChild(script);\n}\n/**\n * creates an HTML script element with/without provided src\n * @param {string} [src] - the source path of the script\n * @return {Object} - the created HTML script element\n */\n\nfunction createScript(src) {\n  var script = document.createElement('script');\n  return src && (script.src = src), script;\n}\n/**\n * creates an HTML script element with the monaco loader src\n * @return {Object} - the created HTML script element\n */\n\nfunction getMonacoLoaderScript(configureLoader) {\n  var state = getState(function (_ref2) {\n    var config = _ref2.config,\n      reject = _ref2.reject;\n    return {\n      config: config,\n      reject: reject\n    };\n  });\n  var loaderScript = createScript(\"\".concat(state.config.paths.vs, \"/loader.js\"));\n  loaderScript.onload = function () {\n    return configureLoader();\n  };\n  loaderScript.onerror = state.reject;\n  return loaderScript;\n}\n/**\n * configures the monaco loader\n */\n\nfunction configureLoader() {\n  var state = getState(function (_ref3) {\n    var config = _ref3.config,\n      resolve = _ref3.resolve,\n      reject = _ref3.reject;\n    return {\n      config: config,\n      resolve: resolve,\n      reject: reject\n    };\n  });\n  var require = window.require;\n  require.config(state.config);\n  require(['vs/editor/editor.main'], function (monaco) {\n    storeMonacoInstance(monaco);\n    state.resolve(monaco);\n  }, function (error) {\n    state.reject(error);\n  });\n}\n/**\n * store monaco instance in local state\n */\n\nfunction storeMonacoInstance(monaco) {\n  if (!getState().monaco) {\n    setState({\n      monaco: monaco\n    });\n  }\n}\n/**\n * internal helper function\n * extracts stored monaco instance\n * @return {Object|null} - the monaco instance\n */\n\nfunction __getMonacoInstance() {\n  return getState(function (_ref4) {\n    var monaco = _ref4.monaco;\n    return monaco;\n  });\n}\nvar wrapperPromise = new Promise(function (resolve, reject) {\n  return setState({\n    resolve: resolve,\n    reject: reject\n  });\n});\nvar loader = {\n  config: config,\n  init: init,\n  __getMonacoInstance: __getMonacoInstance\n};\nexport default loader;","// Inspired by https://schneidenbach.gitbooks.io/typescript-cookbook/content/nameof-operator.html\r\nexport const nameof = <T>(name: keyof T) => name;\r\n","import type * as Monaco from 'monaco-editor';\r\nimport { JsonSchema, Monaco2sxc } from '.';\r\nimport { Snippet } from '../code-editor/models/snippet.model';\r\nimport { Tooltip } from '../code-editor/models/tooltip.model';\r\n\r\nexport const voidElements = 'area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr'\r\n  .split(',')\r\n  .map(el => el.trim().toLocaleLowerCase());\r\n\r\nexport class MonacoInstance {\r\n  /** Editor instance configuration */\r\n  private editorInstance: Monaco.editor.IStandaloneCodeEditor;\r\n  private completionItemProviders: Monaco.IDisposable[];\r\n  private jsTypingsLib?: Monaco.IDisposable;\r\n  private resizeObserver: ResizeObserver;\r\n  private globalCache: Monaco2sxc;\r\n  private cachedValue: string;\r\n  private valueChangedCallback?: (value: string) => void;\r\n  private focusedCallback?: () => void;\r\n  private blurredCallback?: () => void;\r\n\r\n  constructor(\r\n    /** Global Monaco configuration */\r\n    private monaco: typeof Monaco,\r\n    private filename: string,\r\n    value: string,\r\n    container: HTMLElement,\r\n    options: Monaco.editor.IStandaloneEditorConstructionOptions,\r\n    private snippets: Snippet[],\r\n    private tooltips: Tooltip[],\r\n  ) {\r\n    this.globalCache = this.createGlobalCache(monaco);\r\n    this.defineThemes(this.globalCache, this.monaco);\r\n    this.cachedValue = value;\r\n    this.editorInstance = this.createInstance(this.monaco, filename, value, container, options);\r\n    this.completionItemProviders = this.addSnippets(this.monaco, this.editorInstance);\r\n    this.resizeObserver = this.createResizeObserver(container, this.editorInstance);\r\n    this.restoreState(this.globalCache, this.editorInstance);\r\n    this.addEvents(this.editorInstance);\r\n  }\r\n\r\n  destroy(): void {\r\n    this.saveState(this.globalCache, this.editorInstance);\r\n    this.resizeObserver.disconnect();\r\n    this.completionItemProviders.forEach(completionItemProvider => completionItemProvider.dispose());\r\n    this.jsTypingsLib?.dispose();\r\n    this.editorInstance.getModel().dispose();\r\n    this.editorInstance.dispose();\r\n  }\r\n\r\n  updateValue(value: string): void {\r\n    if (this.cachedValue === value) return;\r\n    this.cachedValue = value;\r\n    this.editorInstance.getModel().setValue(value);\r\n  }\r\n\r\n  focus(): void {\r\n    this.editorInstance.focus();\r\n  }\r\n\r\n  onValueChange(callback: (value: string) => void): void {\r\n    this.valueChangedCallback = callback;\r\n  }\r\n\r\n  onFocus(callback: () => void): void {\r\n    this.focusedCallback = callback;\r\n  }\r\n\r\n  onBlur(callback: () => void): void {\r\n    this.blurredCallback = callback;\r\n  }\r\n\r\n  insertSnippet(snippet: string): void {\r\n    const snippetController = this.editorInstance\r\n      .getContribution<Monaco.editor.IEditorContribution & { insert(template: string, opts?: Record<string, any>): void; }>('snippetController2');\r\n    snippetController.insert(snippet);\r\n  }\r\n\r\n  setSnippets(snippets: Snippet[]): void {\r\n    this.snippets = snippets;\r\n  }\r\n\r\n  setTooltips(tooltips: Tooltip[]): void {\r\n    this.tooltips = tooltips;\r\n  }\r\n\r\n  setJsonSchema(jsonSchema?: JsonSchema): void {\r\n    const uri = this.editorInstance.getModel().uri.toString();\r\n    const oldJsonDiagnostics = this.monaco.languages.json.jsonDefaults.diagnosticsOptions;\r\n    const exists = oldJsonDiagnostics.schemas?.some(schema => schema.fileMatch[0] === uri) ?? false;\r\n\r\n    const newSchema: Monaco.languages.json.DiagnosticsOptions['schemas'][0] = jsonSchema?.type === 'link'\r\n      ? { uri: jsonSchema.value, fileMatch: [uri] }\r\n      : jsonSchema?.type === 'raw'\r\n        ? { uri, fileMatch: [uri], schema: JSON.parse(jsonSchema.value) }\r\n        : undefined;\r\n\r\n    if (!exists && !newSchema) return;\r\n\r\n    const newJsonDiagnostics: Monaco.languages.json.DiagnosticsOptions = {\r\n      ...oldJsonDiagnostics,\r\n      enableSchemaRequest: true,\r\n      schemas: exists && !newSchema\r\n        ? oldJsonDiagnostics.schemas.filter(schema => schema.fileMatch[0] !== uri)\r\n        : exists\r\n          ? oldJsonDiagnostics.schemas.map(schema => schema.fileMatch[0] === uri ? newSchema : schema)\r\n          : [...(oldJsonDiagnostics.schemas ?? []), newSchema],\r\n    };\r\n\r\n    this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(newJsonDiagnostics);\r\n  }\r\n\r\n  setJsonComments(comments?: Monaco.languages.json.SeverityLevel): void {\r\n    if (!comments) return;\r\n\r\n    const jsonDiagnostics: Monaco.languages.json.DiagnosticsOptions = {\r\n      ...this.monaco.languages.json.jsonDefaults.diagnosticsOptions,\r\n      comments,\r\n    };\r\n    this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(jsonDiagnostics);\r\n  }\r\n\r\n  setJsDiagnostics(options: Monaco.languages.typescript.DiagnosticsOptions): void {\r\n    if (!options) return;\r\n\r\n    const javascriptDiagnostics: Monaco.languages.typescript.DiagnosticsOptions = {\r\n      ...this.monaco.languages.typescript.javascriptDefaults.getDiagnosticsOptions(),\r\n      ...options,\r\n    };\r\n    this.monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions(javascriptDiagnostics);\r\n  }\r\n\r\n  setJsTypings(typings: string): void {\r\n    if (!typings) {\r\n      this.jsTypingsLib?.dispose();\r\n      return;\r\n    }\r\n    this.jsTypingsLib = this.monaco.languages.typescript.javascriptDefaults.addExtraLib(typings, `js-typings-${this.filename}`);\r\n  }\r\n\r\n  private createGlobalCache(monaco: typeof Monaco & { _2sxc?: Monaco2sxc }): Monaco2sxc {\r\n    if (monaco._2sxc == null) {\r\n      const _2sxc: Monaco2sxc = {\r\n        themesAreDefined: false,\r\n        savedStates: {},\r\n      };\r\n      monaco._2sxc = _2sxc;\r\n    }\r\n    return monaco._2sxc;\r\n  }\r\n\r\n  /** Registers our themes. Themes are global. Run before creating editor */\r\n  private defineThemes(globalCache: Monaco2sxc, monaco: typeof Monaco): void {\r\n    // there is currently no official way to get defined themes from Monaco to check if some theme was already defined\r\n    if (globalCache.themesAreDefined) return;\r\n    globalCache.themesAreDefined = true;\r\n\r\n    monaco.editor.defineTheme('2sxc-dark', {\r\n      base: 'vs-dark',\r\n      inherit: true,\r\n      rules: [\r\n        { token: 'metatag.cs', foreground: 'ffff00' },\r\n      ],\r\n      colors: {\r\n      },\r\n    });\r\n  }\r\n\r\n  private createInstance(\r\n    monaco: typeof Monaco,\r\n    filename: string,\r\n    value: string,\r\n    container: HTMLElement,\r\n    options: Monaco.editor.IStandaloneEditorConstructionOptions,\r\n  ): Monaco.editor.IStandaloneCodeEditor {\r\n    const editorInstance = monaco.editor.create(container, options);\r\n    const editorModelUri = monaco.Uri.file(filename);\r\n    const editorModel = monaco.editor.createModel(value, undefined, editorModelUri);\r\n    editorInstance.setModel(editorModel);\r\n    return editorInstance;\r\n  }\r\n\r\n  private saveState(globalCache: Monaco2sxc, editorInstance: Monaco.editor.IStandaloneCodeEditor): void {\r\n    const uri = editorInstance.getModel().uri.toString();\r\n    const viewState = JSON.stringify(editorInstance.saveViewState());\r\n\r\n    if (globalCache.savedStates[uri] == null) {\r\n      globalCache.savedStates[uri] = { viewState };\r\n    } else {\r\n      globalCache.savedStates[uri].viewState = viewState;\r\n    }\r\n  }\r\n\r\n  private restoreState(globalCache: Monaco2sxc, editorInstance: Monaco.editor.IStandaloneCodeEditor): void {\r\n    const uri = editorInstance.getModel().uri.toString();\r\n    const savedState = globalCache.savedStates[uri];\r\n    if (savedState == null) return;\r\n\r\n    const viewState: Monaco.editor.ICodeEditorViewState = JSON.parse(savedState.viewState);\r\n    editorInstance.restoreViewState(viewState);\r\n  }\r\n\r\n  private addSnippets(monaco: typeof Monaco, editorInstance: Monaco.editor.IStandaloneCodeEditor): Monaco.IDisposable[] {\r\n    const completionItemProviders = [\r\n      monaco.languages.registerCompletionItemProvider(editorInstance.getModel().getLanguageId(), {\r\n        triggerCharacters: ['>'],\r\n        provideCompletionItems: (model, position) => {\r\n          if (editorInstance.getModel() !== model) { return { suggestions: [] }; }\r\n\r\n          const textUntilPosition: string = model.getValueInRange({\r\n            startLineNumber: position.lineNumber,\r\n            startColumn: 1,\r\n            endLineNumber: position.lineNumber,\r\n            endColumn: position.column,\r\n          });\r\n\r\n          // sometimes trigger character is wrong\r\n          const trigger = textUntilPosition[textUntilPosition.length - 1];\r\n          if (trigger !== '>') { return { suggestions: [] }; }\r\n\r\n          const tagStartIndex = textUntilPosition.lastIndexOf('<');\r\n          if (tagStartIndex === -1) { return { suggestions: [] }; }\r\n\r\n          const codeInTag = textUntilPosition.substring(tagStartIndex);\r\n          // check that > is not in between quotes like in <div class=\"car>\"\r\n          let quotes = 0;\r\n          Array.from(codeInTag).forEach(c => {\r\n            if (c === '\"') { quotes++; }\r\n          });\r\n          if (quotes % 2 !== 0) { return { suggestions: [] }; }\r\n          // check that it's not a closing tag\r\n          if (codeInTag.startsWith('</')) { return { suggestions: [] }; }\r\n          // check that tag is not already closed\r\n          if (codeInTag.indexOf('>') !== codeInTag.length - 1) { return { suggestions: [] }; }\r\n\r\n          // tag name ends with space or tag is closed completely\r\n          let tagEndIndex = codeInTag.indexOf(' ');\r\n          if (tagEndIndex === -1) {\r\n            tagEndIndex = codeInTag.indexOf('>');\r\n          }\r\n          if (tagEndIndex === -1) { return { suggestions: [] }; }\r\n\r\n          const tag = codeInTag.substring(1, tagEndIndex);\r\n          if (!tag) { return { suggestions: [] }; }\r\n          if (voidElements.includes(tag.toLocaleLowerCase())) { return { suggestions: [] }; }\r\n          if (!/[a-zA-Z0-9_-]/.test(tag)) { return { suggestions: [] }; }\r\n\r\n          const suggestions: Monaco.languages.CompletionItem[] = [{\r\n            label: `</${tag}>`,\r\n            kind: monaco.languages.CompletionItemKind.Snippet,\r\n            insertText: `\\$0</${tag}>`,\r\n            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n            range: {\r\n              startLineNumber: position.lineNumber,\r\n              endLineNumber: position.lineNumber,\r\n              startColumn: position.column,\r\n              endColumn: position.column,\r\n            },\r\n          }];\r\n          return { suggestions };\r\n        },\r\n      }),\r\n\r\n      monaco.languages.registerCompletionItemProvider(editorInstance.getModel().getLanguageId(), {\r\n        provideCompletionItems: (model, position) => {\r\n          if (this.snippets == null || editorInstance.getModel() !== model) { return { suggestions: [] }; }\r\n\r\n          const word = model.getWordUntilPosition(position);\r\n          const suggestions = this.snippets.map(snippet => {\r\n            if (!snippet.content) return;\r\n            const suggestion: Monaco.languages.CompletionItem = {\r\n              label: snippet.name,\r\n              kind: monaco.languages.CompletionItemKind.Snippet,\r\n              documentation: `${snippet.title ?? ''}\\n${snippet.help ?? ''}\\n${snippet.links ?? ''}`,\r\n              insertText: snippet.content,\r\n              insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n              range: {\r\n                startLineNumber: position.lineNumber,\r\n                endLineNumber: position.lineNumber,\r\n                startColumn: word.startColumn,\r\n                endColumn: word.endColumn\r\n              },\r\n            };\r\n            return suggestion;\r\n          }).filter(suggestion => !!suggestion);\r\n          return { suggestions };\r\n        },\r\n      }),\r\n\r\n      monaco.languages.registerHoverProvider(editorInstance.getModel().getLanguageId(), {\r\n        provideHover: (model, position) => {\r\n          if (this.tooltips == null || editorInstance.getModel() !== model) return;\r\n\r\n          const word = model.getWordAtPosition(position);\r\n          if (!word) return;\r\n\r\n          const tooltip = this.tooltips.find(i => i.Term === word.word);\r\n          if (!tooltip) return;\r\n\r\n          return {\r\n            contents: tooltip.Help.map(value => {\r\n              const content: Monaco.IMarkdownString = {\r\n                value,\r\n              };\r\n              return content;\r\n            }),\r\n            range: {\r\n              startLineNumber: position.lineNumber,\r\n              endLineNumber: position.lineNumber,\r\n              startColumn: word.startColumn,\r\n              endColumn: word.endColumn,\r\n            },\r\n          };\r\n        }\r\n      }),\r\n    ];\r\n\r\n    return completionItemProviders;\r\n  }\r\n\r\n  private createResizeObserver(container: HTMLElement, editorInstance: Monaco.editor.IStandaloneCodeEditor): ResizeObserver {\r\n    const resizeObserver = new ResizeObserver(() => {\r\n      editorInstance.layout();\r\n    });\r\n    resizeObserver.observe(container);\r\n    return resizeObserver;\r\n  }\r\n\r\n  private addEvents(editorInstance: Monaco.editor.IStandaloneCodeEditor): void {\r\n    editorInstance.getModel().onDidChangeContent(() => {\r\n      const newValue = editorInstance.getModel().getValue();\r\n      if (newValue === this.cachedValue) return;\r\n      this.cachedValue = newValue;\r\n      this.valueChangedCallback?.(newValue);\r\n    });\r\n\r\n    editorInstance.onDidFocusEditorWidget(() => {\r\n      this.focusedCallback?.();\r\n    });\r\n\r\n    editorInstance.onDidBlurEditorWidget(() => {\r\n      this.blurredCallback?.();\r\n    });\r\n\r\n    // this.editorInstance.onDidChangeModelDecorations(e => {\r\n    //   const value = this.editorInstance.getModel().getValue();\r\n    //   const markers = this.monaco.editor.getModelMarkers({}).filter(marker => marker.resource.path === `/${this.filename}`);\r\n    //   const valid = !markers.some(\r\n    //     marker => marker.severity === this.monaco.MarkerSeverity.Error || marker.severity === this.monaco.MarkerSeverity.Warning\r\n    //   );\r\n    // });\r\n\r\n    // this.monaco.editor.onDidChangeMarkers(() => {\r\n    //   // markers updates are async and lagging behind value updates\r\n    //   const markers = this.monaco.editor.getModelMarkers({}).filter(marker => marker.resource.path === `/${this.filename}`);\r\n    //   if (markers.some(marker => marker.severity === this.monaco.MarkerSeverity.Error)) {\r\n    //     // has errors\r\n    //   } else if (markers.some(marker => marker.severity === this.monaco.MarkerSeverity.Warning)) {\r\n    //     // has warnings\r\n    //   } else {\r\n    //     // has no errors or warnings\r\n    //   }\r\n    // });\r\n  }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, input, OnChanges, OnDestroy, output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport loader from '@monaco-editor/loader';\r\nimport type * as Monaco from 'monaco-editor';\r\nimport { JsonSchema } from '.';\r\nimport { Snippet } from '../code-editor/models/snippet.model';\r\nimport { Tooltip } from '../code-editor/models/tooltip.model';\r\nimport { nameof } from '../shared/typescript-helpers';\r\nimport { MonacoInstance } from './monaco-instance';\r\n\r\n@Component({\r\n  selector: 'app-monaco-editor',\r\n  templateUrl: './monaco-editor.html',\r\n  styleUrls: ['./monaco-editor.scss'],\r\n})\r\nexport class MonacoEditorComponent implements AfterViewInit, OnChanges, OnDestroy {\r\n  @ViewChild('editor') private editorRef: ElementRef<HTMLElement>;\r\n  filename = input<string>();\r\n  value = input<string>();\r\n  tooltips? = input<Tooltip[]>();\r\n  snippets? = input<Snippet[]>();\r\n  options? = input<Monaco.editor.IStandaloneEditorConstructionOptions>();\r\n  jsonSchema? = input<JsonSchema>();\r\n  jsonComments? = input<Monaco.languages.json.SeverityLevel>();\r\n  jsTypings? = input<string>();\r\n  jsDiagnostics? = input<Monaco.languages.typescript.DiagnosticsOptions>();\r\n\r\n  autoFocus = input<boolean>(false);\r\n  \r\n  protected valueChanged = output<string>();\r\n  protected focused = output<void>();\r\n  protected blurred = output<void>();\r\n\r\n  private monaco?: typeof Monaco;\r\n  private monacoInstance?: MonacoInstance;\r\n\r\n  constructor() { }\r\n\r\n  ngAfterViewInit(): void {\r\n    loader.init().then(monaco => {\r\n      this.monaco = monaco;\r\n      this.createEditor(this.autoFocus());\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes[nameof<MonacoEditorComponent>('filename')] != null && this.monacoInstance != null) {\r\n      this.monacoInstance.destroy();\r\n      this.createEditor(true);\r\n    }\r\n    if (changes[nameof<MonacoEditorComponent>('value')] != null) {\r\n      this.monacoInstance?.updateValue(this.value());\r\n    }\r\n    if (changes[nameof<MonacoEditorComponent>('jsonSchema')] != null) {\r\n      this.monacoInstance?.setJsonSchema(this.jsonSchema());\r\n    }\r\n    if (changes[nameof<MonacoEditorComponent>('jsonComments')] != null) {\r\n      this.monacoInstance?.setJsonComments(this.jsonComments());\r\n    }\r\n    if (changes[nameof<MonacoEditorComponent>('snippets')] != null) {\r\n      this.monacoInstance?.setSnippets(this.snippets());\r\n    }\r\n    if (changes[nameof<MonacoEditorComponent>('tooltips')] != null) {\r\n      this.monacoInstance?.setTooltips(this.tooltips());\r\n    }\r\n    if (changes[nameof<MonacoEditorComponent>('jsTypings')] != null) {\r\n      this.monacoInstance?.setJsTypings(this.jsTypings());\r\n    }\r\n    if (changes[nameof<MonacoEditorComponent>('jsDiagnostics')] != null) {\r\n      this.monacoInstance?.setJsDiagnostics(this.jsDiagnostics());\r\n    }\r\n  }\r\n\r\n  insertSnippet(snippet: string): void {\r\n    this.monacoInstance?.insertSnippet(snippet);\r\n    this.monacoInstance?.focus();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.monacoInstance?.destroy();\r\n  }\r\n\r\n  private createEditor(autoFocus: boolean): void {\r\n    this.monacoInstance = new MonacoInstance(\r\n      this.monaco, this.filename(), this.value(), this.editorRef.nativeElement, this.options(), this.snippets(), this.tooltips(),\r\n    );\r\n\r\n    this.monacoInstance.setJsonSchema(this.jsonSchema());\r\n    this.monacoInstance.setJsonComments(this.jsonComments());\r\n    this.monacoInstance.setJsTypings(this.jsTypings());\r\n    this.monacoInstance.setJsDiagnostics(this.jsDiagnostics());\r\n\r\n    this.monacoInstance.onValueChange(value => {\r\n      this.valueChanged.emit(value);\r\n    });\r\n\r\n    this.monacoInstance.onFocus(() => {\r\n      this.focused.emit();\r\n    });\r\n\r\n    this.monacoInstance.onBlur(() => {\r\n      this.blurred.emit();\r\n    });\r\n\r\n    if (autoFocus) {\r\n      this.monacoInstance.focus();\r\n    }\r\n  }\r\n}\r\n","<div class=\"editor\" #editor></div>\r\n"],"mappings":"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","names":["_defineProperty","obj","key","value","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread2","target","i","source","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arr","_n","_d","_e","_i","_s","err","o","minLen","_arrayLikeToArray","len","arr2","_defineProperty","obj","key","value","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread2","target","i","source","compose","_len","fns","_key","x","y","f","curry","fn","curried","_this","_len2","args","_key2","_len3","nextArgs","_key3","isObject","isEmpty","isFunction","hasOwnProperty","property","validateChanges","initial","changes","errorHandler","field","validateSelector","selector","validateHandler","handler","_handler","validateInitial","throwError","errorMessages","type","validators","create","state","didUpdate","didStateUpdate","update","updateState","validate","getChanges","extractChanges","getState","setState","causedChanges","_handler$field","index","state_local_default","config","config_default","curry","fn","curried","_this","_len","args","_key","_len2","nextArgs","_key2","curry_default","isObject","value","isObject_default","validateConfig","config","errorHandler","isObject_default","informAboutDeprecation","errorMessages","throwError","type","curry_default","validators","validators_default","compose","_len","fns","_key","x","y","f","compose_default","merge","target","source","key","_objectSpread2","deepMerge_default","CANCELATION_MESSAGE","makeCancelable","promise","hasCanceled_","wrappedPromise","resolve","reject","val","makeCancelable_default","_state$create","state_local_default","config_default","_state$create2","_slicedToArray","getState","setState","config","globalConfig","_validators$config","validators_default","monaco","_objectWithoutProperties","state","deepMerge_default","init","_ref","isInitialized","resolve","makeCancelable_default","wrapperPromise","storeMonacoInstance","compose_default","injectScripts","getMonacoLoaderScript","configureLoader","script","createScript","src","_ref2","reject","loaderScript","_ref3","require","error","__getMonacoInstance","_ref4","loader","loader_default","nameof","name","voidElements","split","map","el","trim","toLocaleLowerCase","MonacoInstance","constructor","monaco","filename","value","container","options","snippets","tooltips","globalCache","createGlobalCache","defineThemes","cachedValue","editorInstance","createInstance","completionItemProviders","addSnippets","resizeObserver","createResizeObserver","restoreState","addEvents","destroy","saveState","disconnect","forEach","completionItemProvider","dispose","jsTypingsLib","getModel","updateValue","setValue","focus","onValueChange","callback","valueChangedCallback","onFocus","focusedCallback","onBlur","blurredCallback","insertSnippet","snippet","getContribution","insert","setSnippets","setTooltips","setJsonSchema","jsonSchema","uri","toString","oldJsonDiagnostics","languages","json","jsonDefaults","diagnosticsOptions","exists","schemas","some","schema","fileMatch","newSchema","type","JSON","parse","undefined","newJsonDiagnostics","__spreadProps","__spreadValues","enableSchemaRequest","filter","setDiagnosticsOptions","setJsonComments","comments","jsonDiagnostics","setJsDiagnostics","javascriptDiagnostics","typescript","javascriptDefaults","getDiagnosticsOptions","setJsTypings","typings","addExtraLib","_2sxc","themesAreDefined","savedStates","editor","defineTheme","base","inherit","rules","token","foreground","colors","create","editorModelUri","Uri","file","editorModel","createModel","setModel","viewState","stringify","saveViewState","savedState","restoreViewState","registerCompletionItemProvider","getLanguageId","triggerCharacters","provideCompletionItems","model","position","suggestions","textUntilPosition","getValueInRange","startLineNumber","lineNumber","startColumn","endLineNumber","endColumn","column","length","tagStartIndex","lastIndexOf","codeInTag","substring","quotes","Array","from","c","startsWith","indexOf","tagEndIndex","tag","includes","test","label","kind","CompletionItemKind","Snippet","insertText","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","range","word","getWordUntilPosition","content","name","documentation","title","help","links","suggestion","registerHoverProvider","provideHover","getWordAtPosition","tooltip","find","i","Term","contents","Help","ResizeObserver","layout","observe","onDidChangeContent","newValue","getValue","onDidFocusEditorWidget","onDidBlurEditorWidget","MonacoEditorComponent","constructor","filename","input","value","tooltips","snippets","options","jsonSchema","jsonComments","jsTypings","jsDiagnostics","autoFocus","valueChanged","output","focused","blurred","ngAfterViewInit","loader","init","then","monaco","createEditor","ngOnChanges","changes","nameof","monacoInstance","destroy","updateValue","setJsonSchema","setJsonComments","setSnippets","setTooltips","setJsTypings","setJsDiagnostics","insertSnippet","snippet","focus","ngOnDestroy","MonacoInstance","editorRef","nativeElement","onValueChange","emit","onFocus","onBlur","selectors","viewQuery","rf","ctx","domElement"],"x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}