import{a as ie}from"./chunk-LTBMRGUR.js";import{e as f}from"./chunk-RAUQWANF.js";import{a as Z}from"./chunk-3S44UA6M.js";import{b as ee,d as te}from"./chunk-S7Y6G6OZ.js";import{a as K,b as X,c as Y}from"./chunk-56YE37V6.js";import{a as z}from"./chunk-BTK5NHS7.js";import"./chunk-K5FCDENP.js";import"./chunk-ENHI5GWA.js";import"./chunk-IGMB27B5.js";import"./chunk-ME7PJXWA.js";import"./chunk-GL2SUH6T.js";import"./chunk-3M22BTAM.js";import"./chunk-HCPBPEHV.js";import{c as A,f as B,g as $,l as W}from"./chunk-QVLOO535.js";import{c as M}from"./chunk-XREQECMQ.js";import"./chunk-RPJBZPSB.js";import{f as J,k as Q,v as q}from"./chunk-UMOPET3G.js";import"./chunk-EZZQWHAZ.js";import{b as w,c as b}from"./chunk-23CS2WID.js";import{a as C}from"./chunk-OIHIMR2W.js";import"./chunk-BDMUNOAA.js";import{c as F,d as N}from"./chunk-OYQCZWOE.js";import{b as L,f as j,h as H}from"./chunk-G33ZJSCE.js";import"./chunk-DX662RXJ.js";import"./chunk-N5GZ74QQ.js";import"./chunk-XASILSQS.js";import{Cb as h,Db as o,Eb as s,Fb as I,Gc as E,Nb as R,Pb as c,Rb as y,Sa as u,Za as x,db as g,ec as a,fc as T,gc as O,lc as V,mc as D,nc as S,oa as G,pa as P,wb as U,yb as k}from"./chunk-46QINP2S.js";import{a as p,b as m}from"./chunk-BDOJB7O2.js";function ne(e){let l=e.data;return`ID: ${l.Block.Id}
GUID: ${l.Block.Guid}`}function oe(e){let l=e.data;if(l.Module!=null)return`ID: ${l.Module.Id}
UsageId: ${l.Module.UsageId}
Title: ${l.Module.Title}`}function le(e){return`${e.value!=null?"id-action no-padding":""} no-outline`.split(" ")}function ae(e){let l=e.data;if(l.PageId!=null)return`ID: ${l.PageId}`}function se(e){return`${e.value!=null?"id-action no-padding":""} no-outline`.split(" ")}function re(e){return`${e.value!=null?"primary-action highlight":"no-outline"}`.split(" ")}function de(e){if(e.value==null)return;let l=e.data;window.open(l.Url,"_blank")}function ue(e){let l=e.value;if(l!=null)return`
    <div style="height: 100%;display: flex;align-items: center;">
      ${l.IsVisible?'<span class="material-symbols-outlined">visibility</span>':'<span class="material-symbols-outlined">visibility_off</span>'}
      ${l.IsDeleted?'<span style="margin-left: 8px;" class="material-symbols-outlined">delete</span>':""}
    </div>
  `}function fe(e,l){if(e&1){let t=R();o(0,"div",1),c("click",function(){G(t);let n=y();return P(n.clipboard.copyToClipboard(n.tooltip))}),o(1,"span",2),a(2),s(),o(3,"mat-icon",3),a(4,"file_copy"),s()()}if(e&2){let t=y();h("tippy",t.tooltip),u(2),T(t.id)}}var _=(()=>{class e{constructor(){this.clipboard=C(z)}agInit(t){if(this.tooltip=t.value,this.tooltip==null)return;let i=this.tooltip.split(`
`)[0];this.id=i.split(" ")[1]}refresh(t){return!0}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-views-usage-id"]],decls:1,vars:1,consts:[["matRipple","",1,"id-box","highlight",3,"tippy"],["matRipple","",1,"id-box","highlight",3,"click","tippy"],[1,"id"],[1,"icon"]],template:function(i,n){i&1&&U(0,fe,5,2,"div",0),i&2&&k(n.id?0:-1)},dependencies:[$,A,b,w,M],styles:[`.id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}
/*# sourceMappingURL=views-usage-id-VJASHM5A.css.map */`]})}}return e})();var me=(()=>{class e{constructor(){this.isVisible="",this.isDeleted=""}agInit(t){this.filterParams=t}isFilterActive(){return this.isVisible!==""||this.isDeleted!==""}doesFilterPass(t){let i=!1,n=!1,d={api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,context:this.filterParams.context,data:t.node.data,getValue:v=>t.node.data[v],node:t.node},r=this.filterParams.valueGetter(d);return r==null?!1:(this.isVisible!==""?i=r.IsVisible==null?!1:r.IsVisible.toString()===this.isVisible:i=!0,this.isDeleted!==""?n=r.IsDeleted==null?!1:r.IsDeleted.toString()===this.isDeleted:n=!0,i&&n)}getModel(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}}setModel(t){this.isVisible=t?t.isVisible:"",this.isDeleted=t?t.isDeleted:""}afterGuiAttached(t){}filterChanged(){this.filterParams.filterChangedCallback()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-views-usage-status-filter"]],decls:18,vars:2,consts:[[1,"title"],[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(i,n){i&1&&(o(0,"div",0),a(1,"Visible"),s(),o(2,"mat-radio-group",1),S("ngModelChange",function(r){return D(n.isVisible,r)||(n.isVisible=r),r}),c("ngModelChange",function(){return n.filterChanged()}),o(3,"mat-radio-button",2),a(4,"All"),s(),o(5,"mat-radio-button",3),a(6,"Visible"),s(),o(7,"mat-radio-button",4),a(8,"Hidden"),s()(),o(9,"div",0),a(10,"Deleted"),s(),o(11,"mat-radio-group",1),S("ngModelChange",function(r){return D(n.isDeleted,r)||(n.isDeleted=r),r}),c("ngModelChange",function(){return n.filterChanged()}),o(12,"mat-radio-button",2),a(13,"All"),s(),o(14,"mat-radio-button",3),a(15,"Is deleted"),s(),o(16,"mat-radio-button",4),a(17,"Is not deleted"),s()()),i&2&&(u(2),V("ngModel",n.isVisible),u(9),V("ngModel",n.isDeleted))},dependencies:[Y,K,X,q,J,Q],styles:[`.title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}
/*# sourceMappingURL=views-usage-status-filter-WURCVSJE.css.map */`]})}}return e})();function ce(e){let l=[];for(let t of e.Blocks){t.Modules.length===0&&l.push({Block:{Id:t.Id,Guid:t.Guid}});for(let i of t.Modules)l.push({Block:{Id:t.Id,Guid:t.Guid},Module:i,PageId:i.Page.Id,Name:i.Page.Name,Url:i.Page.Url,Language:i.Page.CultureCode,Status:{IsVisible:i.Page.Visible,IsDeleted:i.IsDeleted}})}return l}var Ye=(()=>{class e{constructor(t,i){this.dialog=t,this.route=i,this.gridOptions=this.buildGridOptions(),this.viewsService=C(ie),this.viewGuid=this.route.snapshot.paramMap.get("guid"),this.#e=this.viewsService.getUsage(this.viewGuid).value,this.view=E(()=>{let n=this.#e();if(n!==void 0)return{viewUsageName:n[0]?.Name,viewTooltip:`ID: ${n[0].Id}
GUID: ${n[0].Guid}`,data:ce(n[0])}})}#e;closeDialog(){this.dialog.close()}buildGridOptions(){return m(p({},Z),{columnDefs:[m(p({},f.Id),{field:"Block",valueGetter:ne,cellRenderer:_}),m(p({},f.Number),{field:"Module",width:80,valueGetter:oe,cellClass:le,cellRenderer:_}),m(p({},f.Number),{field:"Page",valueGetter:ae,cellClass:se,cellRenderer:_}),m(p({},f.TextWide),{field:"Name",sort:"asc",cellClass:re,onCellClicked:de}),m(p({},f.ItemsText),{field:"Language",width:90}),{field:"Status",width:80,cellClass:"icon no-outline".split(" "),filter:me,cellRenderer:ue}]})}static{this.\u0275fac=function(i){return new(i||e)(x(L),x(F))}}static{this.\u0275cmp=g({type:e,selectors:[["app-views-usage"]],decls:20,vars:4,consts:[[1,"nav-component-wrapper"],["mat-mdc-dialog-title",""],[1,"dialog-title-box"],[3,"tippy"],["mat-icon-button","","tippy","Close dialog",3,"click"],[2,"overflow","hidden","color","black"],[1,"dialog-description"],["href","https://go.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"]],template:function(i,n){if(i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a(4),s(),o(5,"button",4),c("click",function(){return n.closeDialog()}),o(6,"mat-icon"),a(7,"close"),s()()()(),o(8,"mat-dialog-content",5)(9,"p",6),a(10," This shows where this view is being used. Read about the "),o(11,"a",7),a(12,"connections between DNN and 2sxc Views"),s(),a(13," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),o(14,"em"),a(15,"Before you get confused about some things you see here, do read the FAQ on that page."),s()(),I(16,"router-outlet"),o(17,"div",8),I(18,"ag-grid-angular",9)(19,"div",10),s()()()),i&2){let d,r,v;u(3),h("tippy",(d=n.view())==null?null:d.viewTooltip),u(),O("View: ",(r=n.view())==null?null:r.viewUsageName),u(14),h("rowData",(v=n.view())==null?null:v.data)("gridOptions",n.gridOptions)}},dependencies:[W,B,b,w,N,te,ee,M,H,j],encapsulation:2})}}return e})();export{Ye as ViewsUsageComponent};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/views-usage-MTEBDLRC.js.map
