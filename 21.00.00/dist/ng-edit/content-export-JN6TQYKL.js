import{a as me}from"./chunk-FIBQFWU3.js";import{b as se}from"./chunk-DDUEZMYJ.js";import{a as ie,b as ae,c as re}from"./chunk-56YE37V6.js";import{a as G}from"./chunk-V5UC4TMG.js";import"./chunk-U657U553.js";import"./chunk-QFYVXC4V.js";import"./chunk-JNRBLGLU.js";import{c as le}from"./chunk-SCB2MVKQ.js";import"./chunk-WAPW5AUJ.js";import"./chunk-ENHI5GWA.js";import{a as oe,c as ne}from"./chunk-DAEXUMJT.js";import"./chunk-IGMB27B5.js";import{e as ee,h as te}from"./chunk-ME7PJXWA.js";import"./chunk-GL2SUH6T.js";import"./chunk-3M22BTAM.js";import"./chunk-HCPBPEHV.js";import{f as $,h as K,l as H}from"./chunk-QVLOO535.js";import"./chunk-RPJBZPSB.js";import{f as z,g as J,i as Q,k as Y,l as q,v as Z}from"./chunk-UMOPET3G.js";import{b as A,i as O,j}from"./chunk-4LV77BQU.js";import{b as W,c as D}from"./chunk-23CS2WID.js";import{a as x}from"./chunk-OIHIMR2W.js";import"./chunk-BDMUNOAA.js";import{c as P}from"./chunk-OYQCZWOE.js";import{b as U,g as X}from"./chunk-G33ZJSCE.js";import"./chunk-DX662RXJ.js";import"./chunk-N5GZ74QQ.js";import"./chunk-XASILSQS.js";import{$b as k,A as b,Ab as I,Ac as w,Bb as L,Cb as c,Db as o,Eb as i,Nb as R,Ob as B,Pb as M,Rb as m,Sa as s,Za as _,db as V,ec as r,fc as N,g as C,gc as E,id as F,lc as g,mc as u,nc as f,oa as d,pa as p,wb as v,yb as y,zb as T,zc as S}from"./chunk-46QINP2S.js";import"./chunk-BDOJB7O2.js";function de(l,h){if(l&1&&(o(0,"mat-option",11),r(1),i()),l&2){let n=h.$implicit;c("value",n.NameId),s(),N(n.NameId)}}function pe(l,h){if(l&1&&(o(0,"mat-radio-button",16),r(1),i()),l&2){let n=m(2);s(),E(" Export selected ",n.itemIds.length," items ")}}function ce(l,h){if(l&1){let n=R();o(0,"form",null,0)(2,"div",5)(3,"p"),r(4," This will generate an XML file which you can edit in Excel. If you just want to import new data, use this to export the schema that you can then fill in using Excel. Please visit "),o(5,"a",6),r(6,"https://2sxc.org/help"),i(),r(7," for more instructions. "),i(),o(8,"div",7)(9,"div")(10,"mat-form-field",8)(11,"mat-label"),r(12,"Languages"),i(),o(13,"mat-select",9),f("ngModelChange",function(e){d(n);let a=m();return u(a.formValues.language,e)||(a.formValues.language=e),p(e)}),o(14,"mat-option",10),r(15,"All"),i(),I(16,de,2,2,"mat-option",11,T),i()()(),o(18,"div")(19,"p",12),r(20,"Export data"),i(),o(21,"mat-radio-group",13),f("ngModelChange",function(e){d(n);let a=m();return u(a.formValues.recordExport,e)||(a.formValues.recordExport=e),p(e)}),o(22,"mat-radio-button",14),r(23,"No, just export blank data schema (for new data import) "),i(),o(24,"mat-radio-button",15),r(25,"Yes, export all content-items"),i(),v(26,pe,2,1,"mat-radio-button",16),i()(),o(27,"div")(28,"p",12),r(29,"Value references to other languages"),i(),o(30,"mat-radio-group",17),f("ngModelChange",function(e){d(n);let a=m();return u(a.formValues.languageReferences,e)||(a.formValues.languageReferences=e),p(e)}),o(31,"mat-radio-button",18),r(32,"Keep references to other languages (for re-import) "),i(),o(33,"mat-radio-button",19),r(34,"Replace references with values"),i()()(),o(35,"div")(36,"p",12),r(37,"File / page references"),i(),o(38,"mat-radio-group",20),f("ngModelChange",function(e){d(n);let a=m();return u(a.formValues.resourcesReferences,e)||(a.formValues.resourcesReferences=e),p(e)}),o(39,"mat-radio-button",18),r(40,"Keep references (for re-import, for example Page:4711) "),i(),o(41,"mat-radio-button",19),r(42,"Replace references with real URLs (for example /Portals/0...) "),i()()()()(),o(43,"mat-dialog-actions",21)(44,"button",22),M("click",function(){d(n);let e=m();return p(e.exportContent())}),r(45," Export Data "),i()()()}if(l&2){let n=k(1),t=m();s(13),g("ngModel",t.formValues.language),s(3),L(t.languages),s(5),g("ngModel",t.formValues.recordExport),s(5),y(t.hasIdList?26:-1),s(4),g("ngModel",t.formValues.languageReferences),c("disabled",t.formValues.recordExport==="Blank"),s(8),g("ngModel",t.formValues.resourcesReferences),c("disabled",t.formValues.recordExport==="Blank"),s(6),c("disabled",!n.form.valid)}}var De=(()=>{class l{constructor(n,t){this.dialog=n,this.route=t,this.hostClass="dialog-component",this.contentExportService=x(me),this.contentTypesService=x(se),this.dialogConfigSvc=x(G),this.hasIdList=!1,this.loading$=new C(!1),this.contentType$=new C(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName");let e=this.route.snapshot.paramMap.get("selectedIds");this.hasIdList=!!e,this.hasIdList&&(this.itemIds=e.split(",").map(a=>parseInt(a,10)))}ngOnInit(){this.#e(),this.loading$.next(!0);let n=this.contentTypesService.retrieveContentType(this.contentTypeStaticName),t=this.dialogConfigSvc.getCurrent$();b([n,t]).subscribe(([e,a])=>{this.contentType$.next(e),this.languages=a.Context.Language.List,this.formValues={defaultLanguage:a.Context.Language.Primary,contentTypeStaticName:this.contentTypeStaticName,language:"",recordExport:this.hasIdList?"Selection":"All",languageReferences:"Link",resourcesReferences:"Link"},this.loading$.next(!1)})}ngOnDestroy(){this.contentType$.complete(),this.loading$.complete()}closeDialog(){this.dialog.close()}exportContent(){this.contentExportService.exportContent(this.formValues,this.hasIdList&&this.formValues.recordExport==="Selection"?this.itemIds:null)}#e(){this.dialog.keydownEvents().subscribe(n=>{le(n)&&(n.preventDefault(),this.exportContent())})}static{this.\u0275fac=function(t){return new(t||l)(_(U),_(P))}}static{this.\u0275cmp=V({type:l,selectors:[["app-content-export"]],hostVars:1,hostBindings:function(t,e){t&2&&B("className",e.hostClass)},decls:10,vars:6,consts:[["ngForm","ngForm"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],["href","https://2sxc.org/help","target","_blank"],[1,"dialog-form-content","fancy-scrollbar-light"],["color","accent",1,"eav-mat-form-field"],["name","Language",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"eav-radio-group-label"],["name","RecordExport",1,"eav-radio-group",3,"ngModelChange","ngModel"],["value","Blank"],["value","All"],["value","Selection"],["name","LanguageReferences",1,"eav-radio-group",3,"ngModelChange","ngModel","disabled"],["value","Link"],["value","Resolve"],["name","ResourcesReferences",1,"eav-radio-group",3,"ngModelChange","ngModel","disabled"],["align","end"],["mat-raised-button","",1,"eav-action-button",3,"click","disabled"]],template:function(t,e){if(t&1&&(o(0,"div",1)(1,"div",2)(2,"div",3),r(3),S(4,"async"),i(),o(5,"button",4),M("click",function(){return e.closeDialog()}),o(6,"mat-icon"),r(7,"close"),i()()(),v(8,ce,46,8,"form"),S(9,"async"),i()),t&2){let a;s(3),E(" Export ",(a=w(4,2,e.contentType$))==null?null:a.Name," "),s(5),y(w(9,4,e.loading$)===!1?8:-1)}},dependencies:[Z,q,z,J,Y,Q,j,O,A,D,W,ne,oe,ee,te,re,ie,ae,X,H,K,$,F],styles:[`.eav-radio-group-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.eav-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}
/*# sourceMappingURL=content-export-EHK67QFX.css.map */`]})}}return l})();export{De as ContentExportComponent};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/content-export-JN6TQYKL.js.map
