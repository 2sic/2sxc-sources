{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/app-administration/services/views.service.ts"],
  "sourcesContent": ["import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { ViewUsage } from '../models/view-usage.model';\r\nimport { View } from '../models/view.model';\r\n\r\nconst webApiViews = 'admin/view/all';\r\nconst webApiViewDelete = 'admin/view/delete';\r\nconst webApiViewImport = 'admin/view/import';\r\nconst webApiViewPolymorph = 'admin/view/polymorphism';\r\nconst webApiViewUsage = 'admin/view/usage';\r\nconst webApiJson = 'admin/view/json';\r\n\r\n@Injectable()\r\nexport class ViewsService extends HttpServiceBaseSignal {\r\n\r\n  getAllOnce() {\r\n    return httpResource<View[]>(() => {\r\n      return ({\r\n        url: this.apiUrl(webApiViews),\r\n        params: { appId: this.appId }\r\n      });\r\n    });\r\n  }\r\n\r\n  getAllLive(refresh: Signal<unknown>) {\r\n    return httpResource<View[]>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiViews),\r\n        params: { appId: this.appId }\r\n      });\r\n    });\r\n  }\r\n\r\n  async delete(id: number): Promise<number> {\r\n    return this.getStatusPromise(webApiViewDelete, {\r\n      params: { appId: this.appId, Id: id.toString() },\r\n    });\r\n  }\r\n\r\n  import(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<FileUploadResult>(this.apiUrl(webApiViewImport), formData, {\r\n      params: { appId: this.appId, zoneId: this.zoneId }\r\n    });\r\n  }\r\n\r\n  export(id: number) {\r\n    const url = this.apiUrl(webApiJson)\r\n      + '?appId=' + this.appId\r\n      + '&viewId=' + id;\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  getPolymorphismLive(refresh: Signal<unknown>) {\r\n    return httpResource<Polymorphism>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiViewPolymorph),\r\n        params: { appId: this.appId }\r\n      });\r\n    });\r\n  }\r\n  getUsage(guid: string) {\r\n    return this.newHttpResource<ViewUsage[]>(() => ({\r\n      url: this.apiUrl(webApiViewUsage),\r\n      params: { appId: this.appId, guid: guid }\r\n    }));\r\n  }\r\n}\r\n"],
  "mappings": "yIAQA,IAAMA,EAAc,iBACdC,EAAmB,oBACnBC,EAAmB,oBACnBC,EAAsB,0BACtBC,EAAkB,mBAClBC,EAAa,kBAGNC,GAAa,IAAA,CAApB,MAAOA,UAAqBC,CAAqB,CAErDC,YAAU,CACR,OAAOC,EAAqB,KAClB,CACNC,IAAK,KAAKC,OAAOX,CAAW,EAC5BY,OAAQ,CAAEC,MAAO,KAAKA,KAAK,GAE9B,CACH,CAEAC,WAAWC,EAAwB,CACjC,OAAON,EAAqB,KAC1BM,EAAO,EACC,CACNL,IAAK,KAAKC,OAAOX,CAAW,EAC5BY,OAAQ,CAAEC,MAAO,KAAKA,KAAK,GAE9B,CACH,CAEMG,OAAOC,EAAU,QAAAC,EAAA,sBACrB,OAAO,KAAKC,iBAAiBlB,EAAkB,CAC7CW,OAAQ,CAAEC,MAAO,KAAKA,MAAOO,GAAIH,EAAGI,SAAQ,CAAE,EAC/C,CACH,GAEAC,OAAOC,EAAU,CACf,IAAMC,EAAW,IAAIC,SACrBD,OAAAA,EAASE,OAAO,OAAQH,CAAI,EACrB,KAAKI,KAAKC,KAAuB,KAAKjB,OAAOT,CAAgB,EAAGsB,EAAU,CAC/EZ,OAAQ,CAAEC,MAAO,KAAKA,MAAOgB,OAAQ,KAAKA,MAAM,EACjD,CACH,CAEAC,OAAOb,EAAU,CACf,IAAMP,EAAM,KAAKC,OAAON,CAAU,EAC9B,UAAY,KAAKQ,MACjB,WAAaI,EACjBc,OAAOC,KAAKtB,EAAK,SAAU,EAAE,CAC/B,CAEAuB,oBAAoBlB,EAAwB,CAC1C,OAAON,EAA2B,KAChCM,EAAO,EACC,CACNL,IAAK,KAAKC,OAAOR,CAAmB,EACpCS,OAAQ,CAAEC,MAAO,KAAKA,KAAK,GAE9B,CACH,CACAqB,SAASC,EAAY,CACnB,OAAO,KAAKC,gBAA6B,KAAO,CAC9C1B,IAAK,KAAKC,OAAOP,CAAe,EAChCQ,OAAQ,CAAEC,MAAO,KAAKA,MAAOsB,KAAMA,CAAI,GACvC,CACJ,qEAxDW7B,CAAY,IAAA+B,GAAZ/B,CAAY,CAAA,CAAA,GAAA,CAAA,iCAAZA,EAAYgC,QAAZhC,EAAYiC,SAAA,CAAA,CAAA,SAAZjC,CAAa,GAAA",
  "names": ["webApiViews", "webApiViewDelete", "webApiViewImport", "webApiViewPolymorph", "webApiViewUsage", "webApiJson", "ViewsService", "HttpServiceBaseSignal", "getAllOnce", "httpResource", "url", "apiUrl", "params", "appId", "getAllLive", "refresh", "delete", "id", "__async", "getStatusPromise", "Id", "toString", "import", "file", "formData", "FormData", "append", "http", "post", "zoneId", "export", "window", "open", "getPolymorphismLive", "getUsage", "guid", "newHttpResource", "__ngFactoryType__", "factory", "\u0275fac"]
}
