{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/app-administration/web-api-rest-api/web-api-rest-api.ts", "projects/eav-ui/src/app/app-administration/web-api-rest-api/web-api-rest-api.html"],
  "sourcesContent": ["import { Component, computed, effect, inject, signal } from '@angular/core';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from '../../../../../core';\r\nimport { SourceService } from '../../code-editor/services/source.service';\r\nimport { RestApiHelpTextComponent } from '../../shared/components/rest-api-help-text/rest-api-help-text';\r\nimport { classLog } from '../../shared/logging';\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  webApisTypes: true,\r\n  syncUrl: true,\r\n};\r\n\r\n@Component({\r\n  selector: 'app-web-api-rest-api',\r\n  imports: [\r\n    MatSelectModule,\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatIconModule,\r\n    ReactiveFormsModule,\r\n    RouterOutlet,\r\n    SxcGridModule,\r\n    RestApiHelpTextComponent\r\n  ],\r\n  templateUrl: './web-api-rest-api.html'\r\n})\r\nexport class WebApiRestApiComponent {\r\n  log = classLog({ WebApiRestApiComponent }, logSpecs);\r\n  #sourceSvc = transient(SourceService);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  #formBuilder = inject(FormBuilder);\r\n\r\n  constructor() {\r\n    // Update form if the url changes and the item is found\r\n    effect(() => {\r\n      const l = this.log.fnIf('syncUrl');\r\n      const webApis = this.webApisTypes();\r\n      if (webApis.length === 0)\r\n        return l.end();\r\n      const urlPath = this.#dialogRouter.urlSegments.at(-1);\r\n\r\n      var encodedUrlPath = urlPath.replace(/%252F/g, \"/\");\r\n\r\n      const webApi = webApis.find(w => w.path === encodedUrlPath);\r\n      l.a('status:', { webApis, webApi, urlPath, encodedUrlPath });\r\n      if (webApi)\r\n        this.webApiTypeForm.get('webApiType').setValue(webApi.path);\r\n      l.end();\r\n    });\r\n  }\r\n\r\n  #refresh = signal(0);\r\n  #getAllWebApis = this.#sourceSvc.getWebApisLive(this.#refresh)\r\n\r\n  webApisTypes = computed(() => {\r\n    const webApis = this.#getAllWebApis();\r\n    return webApis;\r\n  });\r\n\r\n  webApiTypeForm: FormGroup = this.#formBuilder.group({\r\n    webApiType: ['']\r\n  });\r\n\r\n  openRestApi(apiRoute: string): void {\r\n    if (!apiRoute) return;\r\n    this.#dialogRouter.navRelative([encodeURIComponent(apiRoute)]);\r\n  }\r\n}\r\n", "<form [formGroup]=\"webApiTypeForm\">\r\n  <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n    <mat-label>Endpoint</mat-label>\r\n    <mat-select formControlName=\"webApiType\" (valueChange)=\"openRestApi($event)\">\r\n      @if (webApisTypes()) {\r\n        @for (endpoint of webApisTypes().sort(); track endpoint) {\r\n          <mat-option [value]=\"endpoint.path\">\r\n            {{ endpoint.name }}\r\n          </mat-option>\r\n        }\r\n      }\r\n    </mat-select>\r\n  </mat-form-field>\r\n</form>\r\n\r\n@if(!webApiTypeForm.get('webApiType')?.value) {\r\n  <app-rest-api-help-text [apiTitle]=\"'Web Api'\"></app-rest-api-help-text>\r\n}\r\n\r\n<router-outlet></router-outlet>\r\n"],
  "mappings": "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",
  "names": ["\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275elementEnd", "\u0275\u0275property", "endpoint_r1", "path", "\u0275\u0275advance", "\u0275\u0275textInterpolate1", "name", "\u0275\u0275repeaterCreate", "WebApiRestApiComponent_Conditional_5_For_1_Template", "\u0275\u0275repeaterTrackByIdentity", "\u0275\u0275repeater", "ctx_r1", "webApisTypes", "sort", "\u0275\u0275element", "logSpecs", "all", "syncUrl", "WebApiRestApiComponent", "#sourceSvc", "#dialogRouter", "#formBuilder", "constructor", "log", "classLog", "transient", "SourceService", "DialogRoutingService", "inject", "FormBuilder", "#refresh", "signal", "#getAllWebApis", "getWebApisLive", "computed", "webApiTypeForm", "group", "webApiType", "effect", "l", "fnIf", "webApis", "length", "end", "urlPath", "urlSegments", "at", "encodedUrlPath", "replace", "webApi", "find", "w", "a", "get", "setValue", "openRestApi", "apiRoute", "navRelative", "encodeURIComponent", "selectors", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275listener", "$event", "\u0275\u0275conditionalCreate", "WebApiRestApiComponent_Conditional_5_Template", "WebApiRestApiComponent_Conditional_6_Template", "\u0275\u0275conditional", "tmp_2_0", "value", "MatSelectModule", "MatFormField", "MatLabel", "MatSelect", "MatOption", "MatButtonModule", "MatCardModule", "MatIconModule", "ReactiveFormsModule", "\u0275NgNoValidate", "NgControlStatus", "NgControlStatusGroup", "FormGroupDirective", "FormControlName", "RouterOutlet", "SxcGridModule", "RestApiHelpTextComponent", "encapsulation"]
}
