{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/features/shared/base-feature.ts"],
  "sourcesContent": ["import { ChangeDetectorRef, Directive, ViewContainerRef, inject, input } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { FeatureInfoDialogComponent } from '../feature-info-dialog/feature-info-dialog';\r\nimport { FeaturesService } from '../features.service';\r\n\r\n/**\r\n * Base component for various UI components which inform that a feature is not enabled.\r\n * It's meant to show the indicator/warning, and open a dialog with more information about the feature.\r\n */\r\n@Directive()\r\nexport class FeatureComponentBase {\r\n\r\n  /** Feature NameId to check */\r\n  featureNameId = input.required<string>();\r\n\r\n  /** When to show it - typically when it is _not_ enabled (default) */\r\n  showIf = input<boolean>(false);\r\n\r\n  #matDialog = inject(MatDialog);\r\n  #viewContainerRef = inject(ViewContainerRef);\r\n  #changeDetectorRef = inject(ChangeDetectorRef);\r\n  #featuresService = inject(FeaturesService);\r\n\r\n  constructor() { }\r\n\r\n  feature = computedObj('feature', () => this.#featuresService.getCurrent(this.featureNameId()));\r\n\r\n  show = computedObj('show', () => {\r\n    const feat = this.feature();\r\n    if (feat == null) return false;\r\n    return this.showIf() == (feat?.isEnabled ?? false);\r\n  })\r\n\r\n  openDialog() {\r\n    openFeatureDialog(this.#matDialog, this.featureNameId(), this.#viewContainerRef, this.#changeDetectorRef);\r\n  }\r\n}\r\n\r\nexport function openFeatureDialog(dialog: MatDialog, featureId: string, viewContainerRef: ViewContainerRef, changeDetectorRef: ChangeDetectorRef) {\r\n  dialog.open(FeatureInfoDialogComponent, {\r\n    autoFocus: false,\r\n    data: featureId,\r\n    viewContainerRef: viewContainerRef,\r\n    width: '400px',\r\n  });\r\n\r\n  changeDetectorRef?.markForCheck();\r\n}\r\n"],
  "mappings": "yOAWA,IAAaA,GAAoB,IAAA,CAA3B,MAAOA,CAAoB,CAQ/BC,GACAC,GACAC,GACAC,GAEAC,aAAA,CAVA,KAAAC,cAAgBC,EAAMC,SAAQ,EAG9B,KAAAC,OAASF,EAAe,EAAK,EAE7B,KAAAN,GAAaS,EAAOC,CAAS,EAC7B,KAAAT,GAAoBQ,EAAOE,CAAgB,EAC3C,KAAAT,GAAqBO,EAAOG,CAAiB,EAC7C,KAAAT,GAAmBM,EAAOI,CAAe,EAIzC,KAAAC,QAAUC,EAAY,UAAW,IAAM,KAAKZ,GAAiBa,WAAW,KAAKX,cAAa,CAAE,CAAC,EAE7F,KAAAY,KAAOF,EAAY,OAAQ,IAAK,CAC9B,IAAMG,EAAO,KAAKJ,QAAO,EACzB,OAAII,GAAQ,KAAa,GAClB,KAAKV,OAAM,IAAOU,GAAMC,WAAa,GAC9C,CAAC,CARe,CAUhBC,YAAU,CACRC,EAAkB,KAAKrB,GAAY,KAAKK,cAAa,EAAI,KAAKJ,GAAmB,KAAKC,EAAkB,CAC1G,iDAzBWH,EAAoB,CAAA,+BAApBA,EAAoBuB,OAAA,CAAAjB,cAAA,CAAA,EAAA,eAAA,EAAAG,OAAA,CAAA,EAAA,QAAA,CAAA,CAAA,CAAA,CAAA,SAApBT,CAAoB,GAAA,EA4B3B,SAAUsB,EAAkBE,EAAmBC,EAAmBC,EAAoCC,EAAoC,CAC9IH,EAAOI,KAAKC,EAA4B,CACtCC,UAAW,GACXC,KAAMN,EACNC,iBAAkBA,EAClBM,MAAO,QACR,EAEDL,GAAmBM,aAAY,CACjC",
  "names": ["FeatureComponentBase", "#matDialog", "#viewContainerRef", "#changeDetectorRef", "#featuresService", "constructor", "featureNameId", "input", "required", "showIf", "inject", "MatDialog", "ViewContainerRef", "ChangeDetectorRef", "FeaturesService", "feature", "computedObj", "getCurrent", "show", "feat", "isEnabled", "openDialog", "openFeatureDialog", "inputs", "dialog", "featureId", "viewContainerRef", "changeDetectorRef", "open", "FeatureInfoDialogComponent", "autoFocus", "data", "width", "markForCheck"]
}
