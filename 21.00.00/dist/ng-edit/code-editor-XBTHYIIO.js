import{a as Ct}from"./chunk-LV5G4DZL.js";import"./chunk-HGGQ62BE.js";import{c as ft}from"./chunk-ZRGOAEF3.js";import"./chunk-Q5UOKVIL.js";import"./chunk-VSMYOUA2.js";import"./chunk-O3YSC345.js";import"./chunk-LTBMRGUR.js";import"./chunk-Q7SYXYTY.js";import"./chunk-HW433KCS.js";import"./chunk-GLFISIX2.js";import"./chunk-MBSXBYF5.js";import"./chunk-AAMPB3UT.js";import"./chunk-DDUEZMYJ.js";import{b as gt}from"./chunk-YGNCQ4Q2.js";import"./chunk-R4Z5GU7S.js";import{a as ut}from"./chunk-6N3NJCWN.js";import{a as mt}from"./chunk-CZKIDW24.js";import"./chunk-R2RL2BBG.js";import{a as rt}from"./chunk-XJQCOIGF.js";import{a as Q}from"./chunk-WCNLNRUK.js";import"./chunk-LOXR3JJX.js";import"./chunk-NIPOW2E2.js";import"./chunk-56YE37V6.js";import"./chunk-U657U553.js";import"./chunk-QFYVXC4V.js";import{a as Ne,b as Le}from"./chunk-T7AKPKMZ.js";import{a as it}from"./chunk-JNRBLGLU.js";import{a as st}from"./chunk-4YE3E6NH.js";import"./chunk-ZBQC6E3M.js";import"./chunk-AO43RQAG.js";import{b as _t}from"./chunk-SCB2MVKQ.js";import{a as ot}from"./chunk-4SMJHLGZ.js";import{a as se}from"./chunk-XIWBIG4D.js";import{a as b}from"./chunk-JOP3FE6V.js";import"./chunk-MQM7DF2M.js";import{a as pt,c as lt,d as ct,e as dt}from"./chunk-TH3YUOZ2.js";import{a as at}from"./chunk-QUYVM733.js";import"./chunk-JEQANFI7.js";import"./chunk-VT6LNH6I.js";import{a as L}from"./chunk-Z7VBWKZ3.js";import"./chunk-NVCP7HH3.js";import"./chunk-YHKI2L7W.js";import"./chunk-ODL7UGWI.js";import"./chunk-R3Y7P2GW.js";import"./chunk-LPOE4446.js";import"./chunk-QOHQY66K.js";import"./chunk-37NMTDTM.js";import"./chunk-WAPW5AUJ.js";import"./chunk-ENHI5GWA.js";import"./chunk-DAEXUMJT.js";import"./chunk-IGMB27B5.js";import"./chunk-ME7PJXWA.js";import"./chunk-GL2SUH6T.js";import"./chunk-3M22BTAM.js";import{a as Xe,b as et,c as tt}from"./chunk-HCPBPEHV.js";import{c as Qe,f as Ge,g as Je,h as Ye,i as Ze,l as U}from"./chunk-QVLOO535.js";import{c as K}from"./chunk-XREQECMQ.js";import"./chunk-RPJBZPSB.js";import"./chunk-UMOPET3G.js";import"./chunk-4LV77BQU.js";import"./chunk-RGKBOUPL.js";import{a as Ue,b as re,c as Ke,d as ae}from"./chunk-EZZQWHAZ.js";import{b as W,c as q}from"./chunk-23CS2WID.js";import{a as oe}from"./chunk-OIHIMR2W.js";import"./chunk-BDMUNOAA.js";import{c as He}from"./chunk-OYQCZWOE.js";import{d as nt}from"./chunk-G33ZJSCE.js";import{ca as qe,i as ze,o as We}from"./chunk-DX662RXJ.js";import"./chunk-N5GZ74QQ.js";import"./chunk-XASILSQS.js";import{$a as Te,$b as ie,A as le,Aa as G,Ab as E,Ac as I,B as ce,Ba as me,Bb as O,Bc as he,Bd as je,Cb as g,Cd as $e,Da as ke,Db as p,Dc as De,Eb as c,Fb as N,Gc as J,Kc as Y,Lb as fe,Lc as Z,Nb as M,Oa as _e,Pa as ue,Pb as C,Rb as m,Sa as s,U as we,Vb as Pe,Wb as Ee,Xb as Oe,Y as de,Za as P,cc as ge,db as $,ea as Se,ec as u,fc as R,fd as ne,gb as z,gc as D,hc as Ce,hd as Ae,ia as be,ib as Fe,jb as te,md as Be,oa as y,p as ve,pa as w,rc as Ie,tc as j,u as ye,vc as Ve,wb as h,xa as Me,xd as Re,yb as x,zb as B,zc as F}from"./chunk-46QINP2S.js";import{a as T,b as ee}from"./chunk-BDOJB7O2.js";function Bt(n,a){if(n&1&&(p(0,"div"),u(1),c(),N(2,"br")),n&2){let e=m();s(),Ce('"',e.snackBarData.fileName,'" also has a code-behind file "',e.snackBarData.codeFile,'".')}}function Rt(n,a){if(n&1&&u(0),n&2){let e=m(2);D(' You are editing "',e.snackBarData.edition,'" edition. ')}}function jt(n,a){n&1&&u(0," You may be editing an edition which is not the one you see. ")}function $t(n,a){if(n&1&&(p(0,"div"),h(1,Rt,1,1),u(2),h(3,jt,1,0),u(4," See "),p(5,"a",3),u(6,"docs"),c(),u(7,". "),c()),n&2){let e=m();s(),x(e.snackBarData.edition?1:-1),s(),Ce(" There are ",e.snackBarData.otherEditions,' other editions of "',e.snackBarData.fileName,'". '),s(),x(e.snackBarData.edition?-1:3)}}function Nt(n,a){if(n&1){let e=M();p(0,"button",4),C("click",function(){y(e);let t=m();return w(t.openCodeBehind())}),u(1," Open code-behind file "),c()}}var xt=(()=>{class n{constructor(e,i){this.snackRef=e,this.snackBarData=i}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}static{this.\u0275fac=function(i){return new(i||n)(P(Xe),P(et))}}static{this.\u0275cmp=$({type:n,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[1,"actions"],["mat-button","","color","primary"],["href","https://go.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(i,t){i&1&&(p(0,"div",0),h(1,Bt,3,2),h(2,$t,8,4,"div"),c(),p(3,"div",1),h(4,Nt,2,0,"button",2),c()),i&2&&(s(),x(t.snackBarData.codeFile?1:-1),s(),x(t.snackBarData.otherEditions?2:-1),s(2),x(t.snackBarData.codeFile?4:-1))},dependencies:[U,Ye],styles:[`.messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}
/*# sourceMappingURL=code-and-edition-warnings-NDSU7NNM.css.map */`]})}}return n})();function vt(n){return new gt(n,"./i18n/code-editor.",`.js?${window.sxcVersion}`)}var X=class{static updateSingleViewInfo(a,e,i={}){let t=a.findIndex(r=>b.objectsEqual(r.viewKey,e));if(t<0)return[...a,T({viewKey:e},i)];let o=T(T({},a[t]),i);return[...a.slice(0,t),o,...a.slice(t+1)]}static processLoadedView(a,e,i,t,o,r,l){let d=this.updateSingleViewInfo(a,e,{view:i,explorerSnipps:t.sets,editorSnipps:t.list,tooltips:o,savedCode:i.Code});return r(e,i,l),d}};var xe={Templates:"Templates",Snippets:"Snippets"};var yt=(()=>{class n{transform(e){if(e!=null)return Array.isArray(e)?e:Object.values(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=z({name:"objectToArray",type:n,pure:!0})}}return n})();function Ht(n,a){if(n&1){let e=M();p(0,"mat-icon",9),C("click",function(){y(e);let t=m().$implicit,o=m(5);return w(o.toggleMore(t.key))}),u(1),c()}if(n&2){let e=m().$implicit,i=m(5);s(),D(" ",i.toggledMores.includes(e.key)?"more_vert":"more_horiz"," ")}}function zt(n,a){if(n&1&&(p(0,"div")(1,"a",11),u(2),c()()),n&2){let e=a.$implicit;s(),g("href",e.url,ue),s(),R(e.name)}}function Wt(n,a){if(n&1&&(p(0,"div",8),N(1,"div",10),F(2,"safeHtml"),E(3,zt,3,2,"div",null,B),c()),n&2){let e=m().$implicit;s(),g("innerHTML",I(2,1,e.help),_e),s(2),O(e.links)}}function qt(n,a){if(n&1&&(p(0,"div")(1,"a",11),u(2),c()()),n&2){let e=a.$implicit;s(),g("href",e.url,ue),s(),R(e.name)}}function Ut(n,a){if(n&1&&(p(0,"div",13),N(1,"div",10),F(2,"safeHtml"),E(3,qt,3,2,"div",null,B),c()),n&2){let e=m().$implicit;s(),g("innerHTML",I(2,1,e.help),_e),s(2),O(e.links)}}function Kt(n,a){if(n&1){let e=M();p(0,"div")(1,"div",4)(2,"div",12),C("click",function(){let t=y(e).$implicit,o=m(7);return w(o.addSnippet(t.snip))}),u(3),c(),p(4,"mat-icon",7),C("click",function(){let t=y(e).$implicit,o=m(7);return w(o.toggleInfo(t.key))}),u(5,"info"),c()(),h(6,Ut,5,3,"div",13),c()}if(n&2){let e=a.$implicit,i=m(7);s(2),g("tippy",e.snip),s(),D(" ",e.label," "),s(3),x(i.toggledInfos.includes(e.key)?6:-1)}}function Qt(n,a){if(n&1&&(E(0,Kt,7,3,"div",null,B),F(2,"objectToArray")),n&2){let e=m().$implicit;O(I(2,0,e.more))}}function Gt(n,a){if(n&1){let e=M();p(0,"div",3)(1,"div",4)(2,"div",5),C("click",function(){let t=y(e).$implicit,o=m(5);return w(o.addSnippet(t.snip))}),u(3),c(),h(4,Ht,2,1,"mat-icon",6),p(5,"mat-icon",7),C("click",function(){let t=y(e).$implicit,o=m(5);return w(o.toggleInfo(t.key))}),u(6,"info"),c()(),h(7,Wt,5,3,"div",8),h(8,Qt,3,2),c()}if(n&2){let e=a.$implicit,i=m(5);s(2),g("tippy",e.snip),s(),D(" ",e.label," "),s(),x(e.more?4:-1),s(3),x(i.toggledInfos.includes(e.key)?7:-1),s(),x(i.toggledMores.includes(e.key)?8:-1)}}function Jt(n,a){if(n&1&&(E(0,Gt,9,5,"div",3,B),F(2,"objectToArray")),n&2){let e=m().$implicit;O(I(2,0,e.value))}}function Yt(n,a){if(n&1){let e=M();p(0,"div")(1,"div",2),C("click",function(){let t=y(e).$implicit,o=m(3);return w(o.toggleFolder(t.key))}),p(2,"mat-icon"),u(3),c(),p(4,"span"),u(5),F(6,"translate"),c()(),h(7,Jt,3,2),c()}if(n&2){let e=a.$implicit,i=m(2).$implicit,t=m();s(),g("tippyTranslate","SourceEditorSnippets."+i.key+"."+e.key+".Help"),s(2),D(" ",t.toggledFolders.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),s(2),R(I(6,4,"SourceEditorSnippets."+i.key+"."+e.key+".Title")),s(2),x(t.toggledFolders.includes(e.key)?7:-1)}}function Zt(n,a){if(n&1&&(E(0,Yt,8,6,"div",null,B),F(2,"keyvalue")),n&2){let e=m().$implicit;O(I(2,0,e.value))}}function Xt(n,a){if(n&1){let e=M();p(0,"div")(1,"div",1),C("click",function(){let t=y(e).$implicit,o=m();return w(o.toggleSection(t.key))}),p(2,"mat-icon"),u(3),c(),p(4,"span"),u(5),F(6,"translate"),c()(),h(7,Zt,3,2),c()}if(n&2){let e=a.$implicit,i=m();s(),g("tippyTranslate","SourceEditorSnippets."+e.key+".Help"),s(2),D(" ",i.toggledSections.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),s(2),R(I(6,4,"SourceEditorSnippets."+e.key+".Title")),s(2),x(i.toggledSections.includes(e.key)?7:-1)}}var St=(()=>{class n{constructor(){this.snippets=Z(),this.insertSnippet=Y(),this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){L.toggleInArray(e,this.toggledSections)}toggleFolder(e){L.toggleInArray(e,this.toggledFolders)}toggleInfo(e){L.toggleInArray(e,this.toggledInfos)}toggleMore(e){L.toggleInArray(e,this.toggledMores)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$({type:n,selectors:[["app-code-snippets"]],inputs:{snippets:[1,"snippets"]},outputs:{insertSnippet:"insertSnippet"},decls:4,vars:2,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],["tippyShowDelay","750",1,"collapsible-header","section",3,"click","tippyTranslate"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"click","tippyTranslate"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"click","tippy"],["tippy","Show More","tippyShowDelay","750"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],[1,"snippet-help"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"click","tippy"],[1,"snippet-help","snippet-help-more"]],template:function(i,t){i&1&&(p(0,"div",0),E(1,Xt,8,6,"div",null,B),F(3,"keyvalue"),c()),i&2&&(s(),O(I(3,0,t.snippets())))},dependencies:[q,W,Je,Qe,ae,Q,K,Be,Ke,yt,st],styles:[`.collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}
/*# sourceMappingURL=code-snippets-3RA22HKE.css.map */`]})}}return n})();function Mt(n){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:bt(n.filter(e=>!e.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:bt(n.filter(e=>e.Shared))}]}function bt(n){if(!n)return[];let a=[];for(let e of n){let i=a,t=e.Path.split("/"),o=t[t.length-1],r="";for(let l=0;l<t.length;l++){let d=t[l];r+=l?`/${d}`:d;let f=i.find(_=>_.name===d);if(f)i=f.children;else{let _=T({depth:l,name:d,pathFromRoot:r,isShared:e.Shared,isFolder:d!==o},d!==o&&{children:[]});i.push(_),i=_.children}}}return a}var kt=(()=>{class n{constructor(e){this.sanitizer=e}transform(e,i){let t;return i?t=e*8:t=e===0?8:e*8+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${t}px;`)}static{this.\u0275fac=function(i){return new(i||n)(P($e,16))}}static{this.\u0275pipe=z({name:"depthPadding",type:n,pure:!0})}}return n})();var Tt=(()=>{class n{transform(e){return e==null||e.sort((i,t)=>i.isFolder<t.isFolder?1:i.isFolder>t.isFolder?-1:0),e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=z({name:"sortItems",type:n,pure:!0})}}return n})();var Ft=n=>({item:n}),ei=n=>({active:n}),ti=n=>({"app-shared-root":n}),ii=(n,a)=>a.name;function ni(n,a){n&1&&fe(0)}function oi(n,a){if(n&1&&te(0,ni,1,0,"ng-container",6),n&2){let e=a.$implicit;m();let i=ie(6);g("ngTemplateOutlet",i)("ngTemplateOutletContext",j(2,Ft,e))}}function ri(n,a){if(n&1){let e=M();p(0,"div",8),F(1,"depthPadding"),C("click",function(){y(e);let t=m().item,o=m();return w(o.openTemplate(t.pathFromRoot,t.isShared))}),u(2),c()}if(n&2){let e=m().item,i=m();ge(he(1,5,e.depth,e.isFolder)),g("ngClass",j(8,ei,i.isToggled(e.pathFromRoot,e.isShared)))("tippy",e.name),s(2),D(" ",e.name," ")}}function ai(n,a){n&1&&fe(0)}function si(n,a){if(n&1&&te(0,ai,1,0,"ng-container",6),n&2){let e=a.$implicit;m(4);let i=ie(6);g("ngTemplateOutlet",i)("ngTemplateOutletContext",j(2,Ft,e))}}function pi(n,a){if(n&1&&(E(0,si,1,4,"ng-container",null,B),F(2,"sortItems")),n&2){let e=m(2).item;O(I(2,0,e.children))}}function li(n,a){if(n&1){let e=M();p(0,"div")(1,"div",9),F(2,"depthPadding"),C("click",function(){y(e);let t=m().item,o=m();return w(o.toggleItem(t.pathFromRoot,t.isShared))}),p(3,"div",10)(4,"mat-icon"),u(5),c(),p(6,"span"),u(7),c()(),p(8,"div",11),C("click",function(){y(e);let t=m().item,o=m();return w(o.addFile(t.pathFromRoot,t.isShared))}),p(9,"mat-icon"),u(10,"add"),c()()(),h(11,pi,3,2),c()}if(n&2){let e=m().item,i=m();s(),ge(he(2,7,e.depth+1,e.isFolder)),g("ngClass",j(10,ti,e.depth<0)),s(2),g("tippy",e.name),s(2),D(" ",i.isToggled(e.pathFromRoot,e.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),s(2),R(e.name),s(4),x(i.isToggled(e.pathFromRoot,e.isShared)?11:-1)}}function ci(n,a){if(n&1&&(h(0,ri,3,10,"div",7),h(1,li,12,12,"div")),n&2){let e=a.item;x(e.isFolder?-1:0),s(),x(e.isFolder?1:-1)}}var Pt=(()=>{class n{constructor(){this.view=Z(),this.templates=Z(),this.openView=Y(),this.createTemplate=Y(),this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){if(e.templates!=null&&(this.tree=Mt(this.templates())),e.view!=null){let i=e.view?.previousValue;i&&this.toggleItem(i.FileName,i.IsShared),this.view()&&this.showFileInTree(this.view().FileName,this.view().IsShared)}}isToggled(e,i){return(i?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,i){let t={key:e,shared:i};this.openView.emit(t)}toggleItem(e,i){let t=i?this.toggledItemsShared:this.toggledItemsApp;L.toggleInArray(e,t)}addFile(e,i){let t={folder:e,isShared:i};this.createTemplate.emit(t)}showFileInTree(e,i){if(e==null)return;let t=i?this.toggledItemsShared:this.toggledItemsApp;if(t.includes(e))return;let o=["",...e.split("/")],r="";for(let l of o)r=r?`${r}/${l}`:l,!t.includes(r)&&this.toggleItem(r,i)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$({type:n,selectors:[["app-code-templates"]],inputs:{view:[1,"view"],templates:[1,"templates"]},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[ke],decls:19,vars:3,consts:[["fileOrFolder",""],["menu","matMenu"],[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file","tippyPlacement","left",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tippyShowDelay","750",1,"file",3,"style","ngClass","tippy"],["tippyShowDelay","750",1,"file",3,"click","ngClass","tippy"],[1,"folder-name-wrapper",3,"click","ngClass"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(i,t){if(i&1){let o=M();p(0,"div",2)(1,"div"),E(2,oi,1,4,"ng-container",null,ii),F(4,"sortItems"),te(5,ci,2,2,"ng-template",null,0,De),c(),p(7,"div",3)(8,"button",4)(9,"mat-icon"),u(10,"add"),c()(),p(11,"mat-menu",null,1)(13,"button",5),C("click",function(){return y(o),w(t.addFile("",!1))}),p(14,"span"),u(15,"App"),c()(),p(16,"button",5),C("click",function(){return y(o),w(t.addFile("",!0))}),p(17,"span"),u(18,"Shared (global)"),c()()()()()}if(i&2){let o=ie(12);s(2),O(I(4,1,t.tree)),s(6),g("matMenuTriggerFor",o)}},dependencies:[Ae,ne,q,W,U,Ge,dt,lt,pt,ct,Q,K,kt,Tt],styles:[`.explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}
/*# sourceMappingURL=code-templates-ONDUKRC5.css.map */`]})}}return n})();var di="admin/Code/InlineHelp",Et=(()=>{class n extends it{constructor(e){super(),this.translate=e}getTooltips(e){return this.getHttpApiUrl(di,{params:{language:e}})}getSnippets(e){return this.getHttpApiUrl("../ng-assets/snippets.json.js").pipe(ye(i=>{let t=this.#i(i.snippets,e),o=this.#r(t),r=this.#t(o.standardArray,e,o.inputTypeSnippets);return{list:o.standardArray,sets:r}}))}#i(e,i){let t=["@","["],o=l=>l.Type.indexOf("Razor")>-1?0:1,r=[];for(let l of e){let d=t.indexOf(l.set[0]);(d===-1||d===o(i))&&(d===o(i)&&(l.set=l.set.substring(1)),r.push(l))}return r}#r(e){let i=[],t=[];for(let l of e)l.set[0]==="\\"?(l.set=l.set.substring(1),t.push(l)):i.push(l);let o=this.#a(t);return{standardArray:i,inputTypeSnippets:o}}#a(e){let i={};for(let t of e)i[t.subset]===void 0&&(i[t.subset]=[]),i[t.subset].push(t);return i}#t(e,i,t){let o=this.#e(e);return o.Content=Object.assign({},o.Content,{Fields:{},PresentationFields:{}}),i.TypeContent&&this.#n(o.Content.Fields,i.TypeContent,"Content",i,t),i.TypeContentPresentation&&this.#n(o.Content.PresentationFields,i.TypeContentPresentation,"Content.Presentation",i,t),i.HasList?(o.List=Object.assign({},o.List,{Fields:{},PresentationFields:{}}),i.TypeList&&this.#n(o.List.Fields,i.TypeList,"Header",i,t),i.TypeListPresentation&&this.#n(o.List.PresentationFields,i.TypeListPresentation,"Header.Presentation",i,t)):delete o.List,i.HasApp&&(o.App.Resources={},o.App.Settings={},this.#n(o.App.Resources,"App-Resources","App.Resources",i,t),this.#n(o.App.Settings,"App-Settings","App.Settings",i,t)),o}#e(e){let i={};for(let t of e){i[t.set]===void 0&&(i[t.set]={}),i[t.set][t.subset]===void 0&&(i[t.set][t.subset]=[]);let o={key:t.name,label:this.#o(t.set,t.subset,t.name),snip:t.content,help:t.help||this.#p(t.set,t.subset,t.name),links:this.#c(t.links)};i[t.set][t.subset].push(o)}return i}#o(e,i,t){let o=this.#s(e,i,t,".Key"),r=this.translate.instant(o);return r===o&&(r=t),r}#s(e,i,t,o){return"SourceEditorSnippets."+e+"."+i+"."+t+o}#p(e,i,t){let o=this.#s(e,i,t,".Help"),r=this.translate.instant(o);return r===o&&(r=""),r}#c(e){if(!e)return null;let i=[],t=e.split(`
`);for(let o of t){let r=o.split(":");if(r.length===3){let l={name:r[0].trim(),url:r[1].trim()+":"+r[2].trim()};i.push(l)}}return i.length===0?null:i}#n(e,i,t,o,r){this.#d(o.AppId,i).then(l=>{for(let d of l){let f=d.StaticName;e[f]={key:f,label:f,snip:this.#l(t,f,o),help:d.Metadata.merged.Notes||" ("+d.Type.toLowerCase()+") "};let _=Ct(e[f]);this.#m(e,t,f,d.InputType,_,r)}if(l.length){let d=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let f=0;f<d.length;f++)e[d[f]]={key:d[f],label:d[f],snip:this.#l(t,d[f],o),help:this.translate.instant("SourceEditorSnippets.StandardFields."+d[f]+".Help")}}})}#l(e,i,t){return t.Type.indexOf("Razor")>-1?"@"+e+"."+i:"["+e.replace(".",":")+":"+i+"]"}#d(e,i){return this.fetchPromise(ft,{params:{appid:e.toString(),staticName:i}}).then(t=>{t=t.filter(o=>o.Type!==at.Empty);for(let o of t){if(!o.Metadata)continue;let r=o.Metadata,l=r.All,d=r[o.Type],f=r[o.InputType];r.merged=T(T(T({},l),d),f)}return t})}#m(e,i,t,o,r,l){let d=l[o];if(o.indexOf("-")){let _=o.substring(0,o.indexOf("-"));if(_){let S=l[_];S&&(d=d?d.concat(S):S)}}if(!d)return;e[t].more===void 0&&(e[t].more={});let f=e[t].more;for(let _=0;_<d.length;_++)try{f[t+"-"+d[_].name]=Object.assign({},r,{key:t+" - "+d[_].name,label:d[_].name,snip:this.#_(d[_].content,i,t),collapse:!0})}finally{}}#_(e,i,t){return e=e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+i+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+t+"$2"),e}static{this.\u0275fac=function(i){return new(i||n)(be(re))}}static{this.\u0275prov=Se({token:n,factory:n.\u0275fac})}}return n})();var mi=n=>({"sxc-dark":n}),Ot=n=>({active:n}),_i=(n,a,e)=>({active:n,modified:a,loading:e}),ui=(n,a)=>a.viewKey;function fi(n,a){n&1&&(p(0,"mat-icon",13),u(1,"share"),c())}function gi(n,a){n&1&&(p(0,"mat-icon",16),u(1,"circle"),c())}function Ci(n,a){n&1&&N(0,"mat-spinner",17)}function hi(n,a){if(n&1){let e=M();p(0,"div",11),C("click",function(){let t=y(e).$implicit,o=m(2);return w(o.openView(t.viewKey))}),p(1,"div",12),h(2,fi,2,0,"mat-icon",13),p(3,"span",14),u(4),c()(),p(5,"div",15),h(6,gi,2,0,"mat-icon",16),h(7,Ci,1,0,"mat-spinner",17),p(8,"mat-icon",18),C("click",function(){let t=y(e).$implicit,o=m(2);return w(o.closeEditor(t.viewKey))}),u(9,"close"),c()()()}if(n&2){let e=a.$implicit;g("ngClass",Ve(6,_i,e.isActive,e.isModified,e.isLoading)),s(),g("tippy",e.label),s(),x(e.viewKey.shared?2:-1),s(2),R(e.label),s(2),x(e.isModified?6:-1),s(),x(e.isLoading?7:-1)}}function xi(n,a){if(n&1&&(p(0,"div",7),E(1,hi,10,10,"div",10,ui),c()),n&2){let e=m();s(),O(e.tabs())}}function vi(n,a){if(n&1){let e=M();p(0,"app-monaco-editor",19),C("valueChanged",function(t){let o;y(e);let r=m();return w(r.codeChanged(t,(o=r.active())==null?null:o.viewKey))}),c()}if(n&2){let e,i,t,o,r=m();g("filename",(e=r.active())==null?null:e.view.FileName)("value",(i=r.active())==null?null:i.view.Code)("options",r.monacoOptions)("snippets",(t=r.active())==null?null:t.editorSnipps)("tooltips",(o=r.active())==null?null:o.tooltips)("autoFocus",!0)}}function yi(n,a){if(n&1){let e=M();p(0,"button",20),C("click",function(){y(e);let t=m();return w(t.save())}),p(1,"mat-icon"),u(2,"done"),c()()}}var lo=(()=>{class n extends ot{#i;#r;#a;#t;#e;#o;#s;#p;#c(e){let i=this.#i.get(e.key,e.shared,this.#o).pipe(we()),t=i.pipe(de(r=>this.#r.getSnippets(r))),o=i.pipe(de(r=>this.#r.getTooltips(r.Extension.substring(1))));return le([ve(e),i,t,o])}constructor(e,i,t,o,r,l){super(),this.context=e,this.route=i,this.snackBar=t,this.zone=o,this.matDialog=r,this.viewContainerRef=l,this.Explorers=xe,this.activeExplorer=xe.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2,fixedOverflowWidgets:!0},this.#i=oe(mt),this.#r=oe(Et),this.#a=oe(je),this.templates=G([]),this.activeView=G(void 0),this.#t=G([]),this.#e=G([]),this.active=J(()=>{let _=this.activeView();return this.#e().find(S=>b.objectsEqual(S.viewKey,_))}),this.tabs=J(()=>{let _=this.#t(),S=this.activeView(),k=this.#e();return _.map(v=>{let V=k.find(A=>b.objectsEqual(A.viewKey,v));return{viewKey:v,label:V?.view?.FileName??v.key,isActive:b.objectsEqual(v,S),isModified:V?.view?.Code!==V?.savedCode,isLoading:V?.view==null}})}),this.#s=J(()=>{let _=this.activeView(),k=(this.#e()||[]).find(v=>b.objectsEqual(v.viewKey,_));return k?.view?.FileName?`${k.view.FileName} - Code Editor`:"Code Editor"}),this.#p=J(()=>{let _=this.#t(),S=this.#e();return _.filter(k=>!S.some(v=>b.objectsEqual(v.viewKey,k)))}),this.context.init(this.route);let d=JSON.parse(sessionStorage.getItem(ze)),f=(sessionStorage.getItem(We)??"false")==="true";d.forEach(_=>{_.Path.startsWith("/")&&(_.Path=_.Path.substring(1)),_.IsShared??=f}),this.#o=d,me(()=>{let _=this.templates();if(_.length===0)return;let S=this.#p();if(S.length===0)return;let k=this.#e();S.forEach(v=>{k=X.updateSingleViewInfo(k,v)}),this.#e.set(k),le(S.map(v=>this.#c(v))).subscribe(v=>{let V=this.#e();v.forEach(([A,It,Vt,Dt])=>{V=X.processLoadedView(V,A,It,Vt,Dt,this.#n.bind(this),_)}),this.#e.set(V)}),this.#e.set(k)}),me(()=>{let _=this.#s();this.#a.getTitle()!==_&&this.#a.setTitle(_)})}ngOnInit(){let e=this.#o.map(i=>({key:i.EntityId?.toString()??i.Path,shared:i.IsShared}));this.activeView.set(e[0]),this.#t.set(e),this.#l(),this.#i.getAllPromise().then(i=>{this.templates.set(i)})}ngOnDestroy(){super.ngOnDestroy()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){let i={folder:e.folder,global:e.isShared,purpose:e.folder==="api"||e.folder?.startsWith("api/")?"Api":void 0};this.matDialog.open(ut,{autoFocus:!1,data:i,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(o=>{o&&this.#i.create(o.name,e.isShared,o.templateKey).subscribe(()=>{this.#i.getAllPromise().then(r=>{this.templates.set(r)})})})}insertSnippet(e){this.monacoEditorRef?.insertSnippet(e)}codeChanged(e,i){let t=this.#e(),o=t.findIndex(d=>b.objectsEqual(d.viewKey,i)),r=t[o],l=ee(T({},r),{view:ee(T({},r.view),{Code:e})});t=[...t.slice(0,o),l,...t.slice(o+1)],this.#e.set(t)}openView(e){e=this.#e().find(o=>!b.objectsEqual(o.viewKey,e)&&o.view?.FileName===e.key&&o.view?.IsShared===e.shared)?.viewKey??e;let i=this.activeView();b.objectsEqual(i,e)||this.activeView.set(e);let t=this.#t();if(!t.some(o=>b.objectsEqual(o,e))){let o=[...t,e];this.#t.set(o)}}closeEditor(e){let i=this.#t(),t=i.filter(r=>!b.objectsEqual(r,e)),o=this.activeView();if(b.objectsEqual(o,e)){let r=i[i.findIndex(l=>b.objectsEqual(l,o))-1]??t[0];this.activeView.set(r)}this.#t.set(t)}save(e){e??=this.activeView();let i=this.#e().find(o=>b.objectsEqual(o.viewKey,e));if(i?.view==null)return;this.snackBar.open("Saving...");let t=i.view.Code;this.#i.save(e.key,e.shared,i.view,this.#o).subscribe({next:o=>{if(!o){this.snackBar.open("Failed",null,{duration:2e3});return}let r=[...this.#e()],l=r.findIndex(_=>b.objectsEqual(_.viewKey,e));if(l<0)return;let d=r[l],f=ee(T({},d),{savedCode:t});r=[...r.slice(0,l),f,...r.slice(l+1)],this.#e.set(r),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>this.snackBar.open("Failed",null,{duration:2e3})})}#n(e,i,t){let o=i.FileName,r=o.indexOf("/")>-1?o.lastIndexOf("/")+1:0,l=r===0?"":o.substring(0,r),d=o.substring(r),_=d.substring(0,d.length-i.Extension.length)+".code"+i.Extension,S=t.find(v=>v.Path===l+_&&v.Shared===i.IsShared),k=t.filter(v=>v.Path.endsWith(d)&&v.Shared===i.IsShared).length-1;if(S||k){let v={fileName:d,codeFile:S?.Path,edition:this.#o.find(A=>A.EntityId?.toString()===e.key&&A.IsShared===i.IsShared&&A.Path===i.FileName)?.Edition,otherEditions:k,openCodeBehind:!1},V=this.snackBar.openFromComponent(xt,{data:v,duration:1e4});V.onAction().subscribe(()=>{if(V.containerInstance.snackBarConfig.data.openCodeBehind){let A={key:S?.Path,shared:S?.Shared};this.openView(A)}})}}#l(){this.zone.runOutsideAngular(()=>{this.subscriptions.add(ce(window,"beforeunload").subscribe(e=>{this.#e().some(t=>t.view!=null&&t.view.Code!==t.savedCode)&&(e.preventDefault(),e.returnValue="")})),this.subscriptions.add(ce(window,"keydown").subscribe(e=>{_t(e)&&(e.preventDefault(),this.zone.run(()=>this.save()))}))})}static{this.\u0275fac=function(i){return new(i||n)(P(qe),P(He),P(tt),P(Me),P(nt),P(Te))}}static{this.\u0275cmp=$({type:n,selectors:[["app-code-editor"]],viewQuery:function(i,t){if(i&1&&Pe(se,5),i&2){let o;Ee(o=Oe())&&(t.monacoEditorRef=o.first)}},features:[Ie([{provide:Ue,useFactory:vt,deps:[Re]},re]),Fe],decls:14,vars:17,consts:[["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"click","ngClass"],["tippy","Snippets",1,"button",3,"click","ngClass"],[3,"openView","createTemplate","hidden","view","templates"],[3,"insertSnippet","hidden","snippets"],[1,"editor-group"],[1,"tabs-container","fancy-scrollbar-dark"],[3,"filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",1,"eav-action-button"],[1,"tab",3,"ngClass"],[1,"tab",3,"click","ngClass"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],[1,"icon-shared"],[1,"tab-label"],[1,"tab-actions-container"],[1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[3,"valueChanged","filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",1,"eav-action-button",3,"click"]],template:function(i,t){if(i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),C("click",function(){return t.toggleExplorer(t.Explorers.Templates)}),p(3,"mat-icon"),u(4,"file_copy"),c()(),p(5,"div",3),C("click",function(){return t.toggleExplorer(t.Explorers.Snippets)}),p(6,"mat-icon"),u(7,"code"),c()()(),p(8,"app-code-templates",4),C("openView",function(r){return t.openView(r)})("createTemplate",function(r){return t.createTemplate(r)}),c(),p(9,"app-code-snippets",5),C("insertSnippet",function(r){return t.insertSnippet(r)}),c(),p(10,"div",6),h(11,xi,3,0,"div",7),h(12,vi,1,6,"app-monaco-editor",8),c(),h(13,yi,3,0,"button",9),c()),i&2){let o,r,l;g("ngClass",j(11,mi,t.monacoOptions.theme==="2sxc-dark")),s(2),g("ngClass",j(13,Ot,t.activeExplorer===t.Explorers.Templates)),s(3),g("ngClass",j(15,Ot,t.activeExplorer===t.Explorers.Snippets)),s(3),g("hidden",t.activeExplorer!==t.Explorers.Templates)("view",(o=t.active())==null?null:o.view)("templates",t.templates()),s(),g("hidden",t.activeExplorer!==t.Explorers.Snippets)("snippets",(r=t.active())==null?null:r.explorerSnipps),s(2),x(t.tabs().length>0?11:-1),s(),x((l=t.active())!=null&&l.view?12:-1),s(),x(t.activeView()?13:-1)}},dependencies:[ne,q,W,Pt,St,Le,Ne,se,U,Ze,Q,K,rt,ae],styles:[`.sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid rgb(37,37,38);background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-mdc-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}
/*# sourceMappingURL=code-editor-TMRPCHH5.css.map */`]})}}return n})();export{lo as CodeEditorComponent};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/code-editor-XBTHYIIO.js.map
