import{b as Z,j as ee}from"./chunk-OPPDVHDF.js";import{a as J}from"./chunk-BTK5NHS7.js";import{a as W,b as Y,c as z,d as Q,e as K,f as X}from"./chunk-HYUOS4CI.js";import{c as j}from"./chunk-HCPBPEHV.js";import{f as V,h as L,l as q}from"./chunk-QVLOO535.js";import{c as G}from"./chunk-XREQECMQ.js";import{b as v,c as T}from"./chunk-23CS2WID.js";import{a as N}from"./chunk-OIHIMR2W.js";import{Ab as C,Bb as S,Cb as b,Db as n,Eb as t,Fb as _,Gb as s,Hb as m,Lc as f,Nb as D,Oa as O,Pa as R,Pb as A,Rb as p,Sa as a,Sb as U,Tb as H,Za as k,db as h,dc as B,ec as e,fc as d,gc as E,oa as I,pa as P,pc as F,wb as x,xd as $,yb as u,zb as g}from"./chunk-46QINP2S.js";var ne=["*"],y=(()=>{class i{constructor(){this.type=f()}getIcon(){return Z[this.type()]}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=h({type:i,selectors:[["app-info-box"]],inputs:{type:[1,"type"]},ngContentSelectors:ne,decls:4,vars:4,template:function(r,l){r&1&&(U(),n(0,"p")(1,"mat-icon"),e(2),t(),H(3),t()),r&2&&(B(F("icon-box ",l.type())),a(2),d(l.getIcon()))},dependencies:[T,v],styles:[`p.warning[_ngcontent-%COMP%]{background-color:#f08080}p.alert[_ngcontent-%COMP%]{background-color:#ffffe0}p.tip[_ngcontent-%COMP%]{background-color:#aadaf8}p.info[_ngcontent-%COMP%]{background-color:#90ee90}p.icon-box[_ngcontent-%COMP%]{padding:5px 5px 5px 60px;margin:5px}p.icon-box[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:-40px}
/*# sourceMappingURL=info-box-7PEJNJ3U.css.map */`]})}}return i})();function ie(i,c){i&1&&(n(0,"span"),e(1," (for the demo to work it will add context parameters) "),t())}function oe(i,c){if(i&1&&(e(0," \xA0 "),n(1,"a",4),e(2,"Open in Browser"),t(),x(3,ie,2,0,"span")),i&2){let o=p(2).$implicit,r=p();a(),b("href",o.browseUrl,R),a(2),u(r.data().scenario.useVirtual?3:-1)}}function ae(i,c){if(i&1){let o=D();n(0,"p")(1,"button",3),A("click",function(){I(o);let l=p().$implicit,M=p();return P(M.callApiGet(l.url))}),e(2,"Call and Output to Console"),t(),x(3,oe,4,2),t()}if(i&2){let o=p().$implicit;a(3),u(o.browseUrl?3:-1)}}function re(i,c){if(i&1&&(n(0,"app-info-box",8),_(1,"span",9),t()),i&2){let o=c.$implicit;b("type",o.type),a(),b("innerHtml",o.message,O)}}function le(i,c){if(i&1){let o=D();n(0,"h4"),e(1),t(),n(2,"p"),e(3),t(),n(4,"div",5)(5,"pre",6),e(6),t(),n(7,"button",7),A("click",function(){let l=I(o).$implicit,M=p(2);return P(M.clipboard.copyToClipboard(l.code))}),n(8,"mat-icon"),e(9,"content_copy"),t()()(),C(10,re,2,2,"app-info-box",8,g)}if(i&2){let o=c.$implicit;a(),d(o.title),a(2),d(o.description),a(3),d(o.code),a(4),S(o.hints)}}function de(i,c){if(i&1&&(n(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"div",1)(4,"code"),e(5),t(),e(6,": "),n(7,"code"),e(8),t(),n(9,"span"),e(10),t()()()(),n(11,"mat-panel-description",2)(12,"h4"),e(13),t(),n(14,"p"),e(15," HTTP Verb: "),n(16,"code"),e(17),t(),_(18,"br"),e(19),n(20,"code"),e(21),t()(),x(22,ae,4,1,"p"),C(23,le,12,3,null,null,g),t()()),i&2){let o=c.$implicit,r=p();a(5),d(o.verb),a(3),d(o.url),a(2),E("\xA0to ",o.teaser),a(3),d(o.instructions),a(4),d(o.verb),a(2),E(" ",r.data().scenario.useVirtual?"Virtual":"Absolute"," Url: "),a(2),d(o.url),a(),u(o.enableButton?22:-1),a(),S(o.code)}}var Oe=(()=>{class i{constructor(o,r){this.snackBar=o,this.http=r,this.data=f(),this.clipboard=N(J)}callApiGet(o){this.http.get(o).subscribe(r=>{console.log(`Called ${o} and got this:`,r),this.openSnackBar(`Called ${o}. You can see the full result in the F12 console`,"API call returned")}),this.openSnackBar(`Calling ${o}. You can see the full result in the F12 console`,"API call sent")}openSnackBar(o,r){this.snackBar.open(o,r,{duration:2e3})}static{this.\u0275fac=function(r){return new(r||i)(k(j),k($))}}static{this.\u0275cmp=h({type:i,selectors:[["app-dev-rest-urls-and-code"]],inputs:{data:[1,"data"]},decls:3,vars:0,consts:[["multi","",1,"rest-urls-accordion"],[1,"rest-urls-title"],[2,"display","block"],["mat-raised-button","",3,"click"],["target","_blank",3,"href"],[1,"code-example"],[1,"code-example__text"],["mat-icon-button","","tippy","Copy to clipboard",1,"code-example__copy",3,"click"],[3,"type"],[3,"innerHtml"]],template:function(r,l){r&1&&(n(0,"mat-accordion",0),C(1,de,25,8,"mat-expansion-panel",null,g),t()),r&2&&(a(),S(l.data().apiCalls))},dependencies:[X,K,W,Y,Q,z,q,L,V,G,T,v,y],styles:[`[_nghost-%COMP%]     code, code[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{padding-left:2px;padding-right:2px;background-color:#eee}pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:keep-all}.rest-urls-accordion[_ngcontent-%COMP%]{display:block;margin:8px}.rest-urls-title[_ngcontent-%COMP%]{display:flex;align-items:center}.code-example[_ngcontent-%COMP%]{position:relative}.code-example__text[_ngcontent-%COMP%]{min-height:40px}.code-example__copy[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.params-form[_ngcontent-%COMP%]{display:flex;max-width:600px}.params-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]:not(:first-of-type){margin-left:8px}.form-with-textarea[_ngcontent-%COMP%]{max-width:600px}
/*# sourceMappingURL=dev-rest-urls-and-code-6HF3R5HF.css.map */`]})}}return i})();function se(i,c){i&1&&(n(0,"app-info-box",0),e(1," Virtual REST URLs are short. They will be resolved internally to the full length (based on the dnn-version, current portal, etc.) thanks to $2sxc JS API. This happens when you use the "),n(2,"a",3),e(3," $2sxc("),n(4,"em"),e(5,"id-or-htmlnode"),t(),e(6,").webApi.get(...) "),t(),e(7," or if you use "),n(8,"a",4),e(9," sxc-angular (npm package) "),t(),e(10," (which also passes url-resolving through $2sxc). "),t())}function me(i,c){i&1&&(n(0,"app-info-box",1),e(1," To use the REST API from external, you usually will want to set some permissions for "),n(2,"code"),e(3,"Anonymous"),t(),e(4,". As of now, no such permissions are configured. "),t())}function ce(i,c){i&1&&(n(0,"app-info-box",2),e(1," It seems that you have some permissions configured for "),n(2,"code"),e(3,"Anonymous"),t(),e(4,". This is correct if you plan on using the REST endpoints from externally. Please make sure that they are the ones you need, and that you don't accidentally open up too much. "),t())}function pe(i,c){if(i&1&&(e(0," The code also looked up an item of this type and will use it's ID "),n(1,"code"),e(2),t(),e(3," in the examples. ")),i&2){let o=p();a(2),d(o.data().itemId)}}var Fe=(()=>{class i{constructor(){this.data=f()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=h({type:i,selectors:[["app-dev-rest-tab-examples-intro"]],inputs:{data:[1,"data"]},decls:15,vars:7,consts:[["type","info"],["type","warning"],["type","alert"],["href","https://docs.2sxc.org/js-code/2sxc-api/basics/how-it-works.html","target","_blank"],["href","https://go.2sxc.org/js-angular","target","_blank"]],template:function(r,l){r&1&&(x(0,se,11,0,"app-info-box",0),x(1,me,5,0,"app-info-box",1),x(2,ce,5,0,"app-info-box",2),n(3,"p"),e(4," The examples below use real values to make it easier to get started. The values used are the current content-type "),n(5,"code"),e(6),t(),e(7,", the current Module ID "),n(8,"code"),e(9),t(),e(10," and the folder of the current App folder "),n(11,"code"),e(12),t(),e(13," (where needed). "),x(14,pe,4,1),t()),r&2&&(u(l.data().scenario.useVirtual?0:-1),a(),u(l.data().scenario.needsAnonymous&&!l.data().permissionsHasAnonymous?1:-1),a(),u(l.data().scenario.needsAnonymous&&l.data().permissionsHasAnonymous?2:-1),a(4),d(l.data().name),a(3),d(l.data().moduleId),a(3),d(l.data().folder),a(2),u(l.data().itemId?14:-1))},dependencies:[y],styles:[`[_nghost-%COMP%]     code, code[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{padding-left:2px;padding-right:2px;background-color:#eee}pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:keep-all}.rest-urls-accordion[_ngcontent-%COMP%]{display:block;margin:8px}.rest-urls-title[_ngcontent-%COMP%]{display:flex;align-items:center}.code-example[_ngcontent-%COMP%]{position:relative}.code-example__text[_ngcontent-%COMP%]{min-height:40px}.code-example__copy[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.params-form[_ngcontent-%COMP%]{display:flex;max-width:600px}.params-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]:not(:first-of-type){margin-left:8px}.form-with-textarea[_ngcontent-%COMP%]{max-width:600px}
/*# sourceMappingURL=tab-examples-LNG2VBDV.css.map */`]})}}return i})();var qe=(()=>{class i{constructor(){this.data=f()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=h({type:i,selectors:[["app-dev-rest-tab-headers"]],inputs:{data:[1,"data"]},decls:182,vars:1,consts:[["type","tip"],["type","info","title","Site & Language are <em>not</em> part of the Context."]],template:function(r,l){r&1&&(n(0,"h2"),e(1,"HTTP Headers, Security and Context"),t(),n(2,"p"),e(3," HTTP headers and url-parameters are used for "),n(4,"strong"),e(5,"Security"),t(),e(6," and "),n(7,"strong"),e(8,"Context"),t(),e(9,". We'll explain the "),n(10,"em"),e(11,"Security"),t(),e(12," part further below, and start with "),n(13,"em"),e(14,"Context"),t(),e(15,`. When you work with WebApi endpoints, there are two distinct scenarios:
`),t(),n(16,"h3"),e(17,"Using WebApi with Context"),t(),n(18,"p"),e(19," In this case the endpoint knows what "),n(20,"strong"),e(21,"Page"),t(),e(22," and what "),n(23,"strong"),e(24,"module"),t(),e(25," the request is for. This "),n(26,"strong"),e(27,"Context"),t(),e(28," is then used to "),n(29,"em"),e(30,"auto-detect"),t(),e(31," the app (so you can use "),n(32,"code"),e(33,"/auto/"),t(),e(34," in the url). "),_(35,"br"),e(36," It can also be used for for security checks - so you can set "),n(37,"strong"),e(38,"Permissions"),t(),e(39," like "),n(40,"code"),e(41,"Allow READ If the user may see the module"),t(),e(42,`.
`),t(),n(43,"app-info-box",0),e(44," TIP: In the case of "),n(45,"strong"),e(46,"Queries"),t(),e(47," the "),n(48,"strong"),e(49,"Context"),t(),e(50,` can also provide parameters which were configured in the module.
`),t(),n(51,"h3"),e(52,"Using WebApi without Context"),t(),n(53,"p"),e(54," If the "),n(55,"strong"),e(56,"Context"),t(),e(57," is not known, the endpoint cannot "),n(58,"em"),e(59,"auto-detect"),t(),e(60," the the app, so instead of "),n(61,"code"),e(62,"/auto/"),t(),e(63," you must supply the correct app-name in the url, in this case "),n(64,"code"),e(65),t(),e(66,". "),_(67,"br"),e(68," You also must specify more specific "),n(69,"strong"),e(70,"Permissions"),t(),e(71," like "),n(72,"code"),e(73,"Allow READ if user is in group Members"),t(),e(74," or "),n(75,"code"),e(76,"Allow READ for all ANONYMOUS users"),t(),e(77,`.
`),t(),n(78,"app-info-box",1),e(79," Technically the context needs more information than we just talked about, like what "),n(80,"strong"),e(81,"Site"),t(),e(82," are we on and what "),n(83,"strong"),e(84,"Language"),t(),e(85," is being used. This information is already in the URL. So the root (before any "),n(86,"code"),e(87,"/api/"),t(),e(88,`) paths already contains that information.
`),t(),n(89,"h2"),e(90,"How to get the Context"),t(),n(91,"h3"),e(92,"How the Context is Defined"),t(),n(93,"p"),e(94," The context always requires a "),n(95,"code"),e(96,"PageId"),t(),e(97," (in DNN it is hisorically called the "),n(98,"code"),e(99,"TabId"),t(),e(100,") and the "),n(101,"code"),e(102,"ModuleId"),t(),e(103,`. This lets the system look up the configuration for this module and figure out everything else.
`),t(),n(104,"h3"),e(105,"Supplying Context in HTTP Headers (default)"),t(),n(106,"p"),e(107," The standard behavior is to include the Context information in hidden "),n(108,"strong"),e(109,"HTTP headers"),t(),e(110,". This requires a bit more JavaScript code to attach the headers, but most of the APIs like the "),n(111,"code"),e(112,"$2sxc"),t(),e(113,` will do this automatically when used from within a 2sxc-App. These are the context headers provided by $2sxc:
`),t(),n(114,"ul")(115,"li")(116,"code"),e(117,"PageId"),t(),e(118," - this is the page we're on (number). "),n(119,"em"),e(120,"this header is new in v11.11"),t()(),n(121,"li")(122,"s")(123,"code"),e(124,"TabId"),t()(),e(125," - "),n(126,"em"),e(127,"obsolete"),t(),e(128," this is also the page id (number). "),n(129,"em"),e(130,"just but for backward compatibility"),t()(),n(131,"li")(132,"code"),e(133,"ModuleId"),t(),e(134," - this is the module id (number) "),t(),n(135,"li")(136,"code"),e(137,"ContentBlockId"),t(),e(138," - this in an internal ID for working in inner-content (number). You will usually not care about this. "),t()(),n(139,"h3"),e(140,"Supplying Context as URL Parameters "),n(141,"code"),e(142,"?PageId=..."),t()(),n(143,"p"),e(144," The headers above ("),n(145,"code"),e(146,"PageId"),t(),e(147,", "),n(148,"code"),e(149,"ModuleId"),t(),e(150,`) can also be added to the URL and will have the same effect.
`),t(),n(151,"h2"),e(152,"Security Headers"),t(),n(153,"p"),e(154," In addition to context headers, a request can also include "),n(155,"strong"),e(156,"Security"),t(),e(157,` headers:
`),t(),n(158,"ol")(159,"li")(160,"code"),e(161,"RequestVerificationToken"),t(),e(162," - this is a crypto key to prove that the request originated from the same site. It's only included in POST/PUT/DELETE but not GET requests. "),t()(),n(163,"p"),e(164," These are only used on "),n(165,"code"),e(166,"PUT"),t(),e(167,", "),n(168,"code"),e(169,"POST"),t(),e(170,", "),n(171,"code"),e(172,"DELETE"),t(),e(173," etc. but not on "),n(174,"code"),e(175,"GET"),t(),e(176,` requests.
`),t(),n(177,"app-info-box",0),e(178," This header is only usefull to verify that the request came from a real DNN page. The 2sxc-api "),n(179,"code"),e(180,"$2sxc"),t(),e(181,` will add this automatically for you, so you don't need to do anything if you use that.
`),t()),r&2&&(a(65),d(l.data().folder))},dependencies:[y],encapsulation:2})}}return i})();function xe(i,c){if(i&1&&(s(0,"p")(1,"em"),e(2),m()()),i&2){let o=p().$implicit;a(2),E(" ",o.notes," ")}}function ue(i,c){if(i&1&&(s(0,"h4"),e(1),m(),s(2,"p"),e(3),m(),x(4,xe,3,1,"p")),i&2){let o=c.$implicit;a(),E("Scenario: ",o.name),a(2),E(" ",o.description," "),a(),u(o.notes?4:-1)}}var Ye=(()=>{class i{constructor(){this.data=f(),this.scenarios=ee}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=h({type:i,selectors:[["app-dev-rest-tab-introduction"]],inputs:{data:[1,"data"]},decls:32,vars:1,consts:[["href","https://docs.2sxc.org/web-api/index.html","target","_blank"],["href","https://docs.2sxc.org/web-api/headless/index.html","target","_blank"]],template:function(r,l){r&1&&(s(0,"p"),e(1," All data can be used in JavaScript, SPAs or anywhere with the REST API (see "),s(2,"a",0),e(3,"docs"),m(),e(4,`). Use this for things like:
`),m(),s(5,"ul")(6,"li")(7,"a",0),e(8,"WebAPI in 2sxc"),m()(),s(9,"li")(10,"a",1),e(11,"Using DNN/2sxc as a headless CMS"),m()(),s(12,"li"),e(13,"Create SPAs in DNN/2sxc"),m(),s(14,"li"),e(15,"Get data for mobile apps"),m(),s(16,"li"),e(17,"Share data to other platforms"),m()(),s(18,"p"),e(19," Just set off HTTP "),s(20,"code"),e(21,"GET"),m(),e(22," requests or similar to the endpoint like "),s(23,"code"),e(24),m(),e(25,`. You can find the full list with example code in the next tabs. Make sure you also read about permissions and HTTP headers.
`),m(),s(26,"h3"),e(27,"Scenarios Explained (dropdown on top)"),m(),s(28,"p"),e(29,` The examples / code / permission infos will change based on the scenario you choose.
`),m(),C(30,ue,5,3,null,null,g)),r&2&&(a(24),d(l.data().root),a(6),S(l.scenarios))},encapsulation:2})}}return i})();export{Oe as a,Fe as b,qe as c,Ye as d};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/chunk-MVZE4EY4.js.map
