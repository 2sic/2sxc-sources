import{a as fe,b as V,c as X}from"./chunk-GRN4HH73.js";import{a as Le}from"./chunk-ZBQC6E3M.js";import"./chunk-AO43RQAG.js";import{c as _e}from"./chunk-SCB2MVKQ.js";import"./chunk-4SMJHLGZ.js";import{g as ve,h as Se}from"./chunk-VT6LNH6I.js";import"./chunk-Z7VBWKZ3.js";import"./chunk-NVCP7HH3.js";import"./chunk-YHKI2L7W.js";import"./chunk-ODL7UGWI.js";import"./chunk-R3Y7P2GW.js";import"./chunk-LPOE4446.js";import"./chunk-QOHQY66K.js";import"./chunk-37NMTDTM.js";import"./chunk-WAPW5AUJ.js";import{a as j,c as H}from"./chunk-DAEXUMJT.js";import"./chunk-IGMB27B5.js";import{e as N}from"./chunk-ME7PJXWA.js";import"./chunk-GL2SUH6T.js";import"./chunk-3M22BTAM.js";import{c as he}from"./chunk-HCPBPEHV.js";import{f as ce,h as de,l as C}from"./chunk-QVLOO535.js";import{c as y}from"./chunk-XREQECMQ.js";import"./chunk-RPJBZPSB.js";import"./chunk-UMOPET3G.js";import{b as F,i as R,j as Z}from"./chunk-4LV77BQU.js";import"./chunk-RGKBOUPL.js";import{b as pe,c as L,d as w}from"./chunk-EZZQWHAZ.js";import{b as k,c as P}from"./chunk-23CS2WID.js";import{a as O}from"./chunk-OIHIMR2W.js";import"./chunk-BDMUNOAA.js";import{b as ge,d as ue,g as me,h as A}from"./chunk-G33ZJSCE.js";import{aa as le}from"./chunk-DX662RXJ.js";import"./chunk-N5GZ74QQ.js";import"./chunk-XASILSQS.js";import{$a as ne,Ab as D,Ac as h,Bb as T,Cb as p,Db as s,Eb as l,Fb as B,Gc as re,Lc as se,Nb as J,Pb as f,Rb as g,Sa as r,Vb as oe,Wb as E,Xb as I,Za as m,db as S,ec as c,fc as _,gc as v,hc as ae,ja as q,oa as b,pa as M,wb as K,xa as ie,yb as G,zb as x,zc as d}from"./chunk-46QINP2S.js";import{a as ee,b as te}from"./chunk-BDOJB7O2.js";function U(n){let o=[],e={};return n.forEach(i=>{let t=we(i.Culture);e[t]?e[t]++:e[t]=1}),n.forEach(i=>{let t=we(i.Culture);o.push(te(ee({},i),{label:e[t]>1?`${t} (${i.NameId})`:t}))}),o}function we(n){return n.substring(0,n.includes("(")?n.indexOf("(")-1:100).toLocaleUpperCase()}function Be(n,o){if(n&1&&(s(0,"mat-option",3),c(1),l()),n&2){let e=o.$implicit;p("value",e.Code.toLocaleLowerCase()),r(),_(e.label)}}var be=(()=>{class n{constructor(){}get selectedValue(){return this.userLanguageSvc.isForced(this.optionType)?this.userLanguageSvc.value(this.optionType):this.userLanguageSvc.stored(this.optionType)}onSelectionChange(e){this.userLanguageSvc.save(this.optionType,e.value)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=S({type:n,selectors:[["app-language-dropdown"]],inputs:{label:"label",tooltip:"tooltip",optionType:"optionType",options:"options",userLanguageSvc:"userLanguageSvc"},decls:11,vars:12,consts:[["appearance","fill","color","accent",3,"tippy"],[3,"selectionChange","value","disabled"],["value",""],[3,"value"]],template:function(i,t){i&1&&(s(0,"mat-form-field",0),d(1,"translate"),s(2,"mat-label"),c(3),d(4,"translate"),l(),s(5,"mat-select",1),f("selectionChange",function(u){return t.onSelectionChange(u)}),s(6,"mat-option",2),c(7),d(8,"translate"),l(),D(9,Be,2,2,"mat-option",3,x),l()()),i&2&&(p("tippy",h(1,6,t.tooltip)),r(3),ae(" ",h(4,8,t.label)," ",t.userLanguageSvc.isForced(t.optionType)?"(disabled)":""," "),r(2),p("value",t.selectedValue)("disabled",t.userLanguageSvc.isForced(t.optionType)),r(2),v(" ",h(8,10,"LanguageSettings.UseCurrentLanguage")," "),r(2),T(t.options))},dependencies:[Z,R,F,A,P,C,y,H,j,N,w,L],encapsulation:2})}}return n})();var Me=(()=>{class n{#e;constructor(){this.#e=q(X),this.LanguagePart=fe,this.userLanguageSvc=O(V),this.dialog=q(ge),this.options=U(this.#e.getAll())}ngOnInit(){this.#t()}get selectedValue(){return!!this.userLanguageSvc.primaryTranslatableEnabled()}onSelectionChange(e){this.userLanguageSvc.savePrimaryTranslatable(!!e.value)}closeDialog(){this.dialog.close()}#t(){this.dialog.keydownEvents().subscribe(e=>{_e(e)&&(e.preventDefault(),this.closeDialog())})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=S({type:n,selectors:[["app-separate-languages-header"]],decls:32,vars:34,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],[1,"language-dropdowns"],[3,"label","tooltip","optionType","options","userLanguageSvc"],["appearance","fill","color","accent",3,"tippy"],[3,"selectionChange","value"],[3,"value"],["align","end"],[3,"action"]],template:function(i,t){i&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),c(3),d(4,"translate"),l(),s(5,"button",3),f("click",function(){return t.closeDialog()}),s(6,"mat-icon"),c(7,"close"),l()()(),s(8,"div",4)(9,"p"),c(10),d(11,"translate"),l(),s(12,"h3"),c(13),d(14,"translate"),l(),s(15,"div",5),B(16,"app-language-dropdown",6)(17,"app-language-dropdown",6),l(),s(18,"mat-form-field",7),d(19,"translate"),s(20,"mat-label"),c(21),d(22,"translate"),l(),s(23,"mat-select",8),f("selectionChange",function(u){return t.onSelectionChange(u)}),s(24,"mat-option",9),c(25),d(26,"translate"),l(),s(27,"mat-option",9),c(28),d(29,"translate"),l()()()(),s(30,"mat-dialog-actions",10)(31,"app-save-close-button-fab",11),f("action",function(){return t.closeDialog()}),l()()()),i&2&&(r(3),_(h(4,20,"LanguageSettings.Title")),r(7),_(h(11,22,"LanguageSettings.Intro")),r(3),_(h(14,24,"LanguageSettings.Subtitle")),r(3),p("label","LanguageSettings.LabelsAndTextsOptionLabel")("tooltip","LanguageSettings.LabelsAndTextsTooltip")("optionType",t.LanguagePart.Form)("options",t.options)("userLanguageSvc",t.userLanguageSvc),r(),p("label","LanguageSettings.ButtonsAndControlsOptionLabel")("tooltip","LanguageSettings.ButtonsAndControlsTooltip")("optionType",t.LanguagePart.UI)("options",t.options)("userLanguageSvc",t.userLanguageSvc),r(),p("tippy",h(19,26,"LanguageSettings.TranslatePrimaryTooltip")),r(3),v(" ",h(22,28,"LanguageSettings.TranslatePrimaryOptionLabel")," "),r(2),p("value",t.selectedValue),r(),p("value",!1),r(),v(" ",h(26,30,"LanguageSettings.DeactivatedOption")," "),r(2),p("value",!0),r(),v(" ",h(29,32,"LanguageSettings.ActivatedOption")," "))},dependencies:[A,me,P,k,C,ce,y,Z,R,F,H,j,N,be,w,Le,L],styles:[`mat-form-field[_ngcontent-%COMP%]{width:50%}.language-dropdowns[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;gap:1rem;margin-bottom:1rem}
/*# sourceMappingURL=language-settings-dialog-NZGNELGP.css.map */`]})}}return n})();var Q=class{constructor(o,e){this.ngZone=o,this.header=e,this.moveThreshold=2,this.stopClick=!1,this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{let i=t=>{this.checkIfMouseMoved(t)};document.addEventListener("mouseup",i,{passive:!0}),this.eventListeners.push({element:document,type:"mouseup",listener:i})})}lngButtonDown(o){this.ngZone.runOutsideAngular(()=>{this.saveInitialPosition(o)})}lngButtonClick(o){this.ngZone.runOutsideAngular(()=>{this.doMove(o)})}stopClickIfMouseMoved(){return this.stopClick}destroy(){this.ngZone.runOutsideAngular(()=>{this.eventListeners.forEach(({element:o,type:e,listener:i})=>{o.removeEventListener(e,i)}),this.eventListeners=null})}saveInitialPosition(o){this.stopClick=!1,this.positionX=o.pageX,this.positionY=o.pageY}checkIfMouseMoved(o){if(!this.positionX||!this.positionY){this.stopClick=!1;return}let e=o.pageX,i=o.pageY,t=e+i,a=this.positionX+this.positionY;this.stopClick=Math.abs(a-t)>this.moveThreshold,this.positionX=null,this.positionY=null}doMove(o){if(this.stopClick)return;let e=o.target,i=e.getBoundingClientRect().left,t=e.getBoundingClientRect().width,a=this.header.getBoundingClientRect().left,u=this.header.getBoundingClientRect().width,z=i+t/2,W=a+u/2;this.header.scrollLeft+=z-W}};var Y=class{constructor(o,e,i){this.ngZone=o,this.header=e,this.areButtonsDisabled=i,this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{let t=this.registerScroll.bind(this);this.header.addEventListener("pointerdown",t,{passive:!0}),this.headerDownListener={element:this.header,type:"pointerdown",listener:t}})}destroy(){this.ngZone.runOutsideAngular(()=>{this.headerDownListener.element.removeEventListener(this.headerDownListener.type,this.headerDownListener.listener),this.headerDownListener=null,this.eventListeners.forEach(({element:o,type:e,listener:i})=>{o.removeEventListener(e,i)}),this.eventListeners=null}),this.ngZone=null,this.header=null,this.areButtonsDisabled=null}registerScroll(o){if(this.areButtonsDisabled()||o.button!==0)return;window.getSelection().removeAllRanges(),this.oldScrollBehavior=getComputedStyle(this.header).getPropertyValue("scroll-behavior"),this.header.style.scrollBehavior="auto",this.positionX=o.pageX;let i=a=>{this.doScroll(a)},t=()=>{this.removeScroll()};document.addEventListener("pointermove",i,{passive:!0}),document.addEventListener("pointerup",t,{passive:!0}),document.addEventListener("pointerleave",t,{passive:!0}),this.eventListeners.push({element:document,type:"pointermove",listener:i},{element:document,type:"pointerup",listener:t},{element:document,type:"pointerleave",listener:t})}removeScroll(){this.header.style.scrollBehavior=this.oldScrollBehavior,this.eventListeners.forEach(({element:o,type:e,listener:i})=>{o.removeEventListener(e,i)}),this.eventListeners.splice(0,this.eventListeners.length)}doScroll(o){let e=o.pageX;e<this.positionX?this.header.scrollLeft+=this.positionX-e:e>this.positionX&&(this.header.scrollLeft+=-(e-this.positionX)),this.positionX=e}};var $=class{constructor(o,e,i,t){this.ngZone=o,this.header=e,this.leftShadow=i,this.rightShadow=t,this.hidden="hidden",this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{this.calculateShadows();let a=()=>{this.calculateShadows()};this.header.addEventListener("scroll",a,{passive:!0}),window.addEventListener("resize",a,{passive:!0}),this.eventListeners.push({element:this.header,type:"scroll",listener:a},{element:window,type:"resize",listener:a})})}destroy(){this.ngZone.runOutsideAngular(()=>{this.eventListeners.forEach(({element:o,type:e,listener:i})=>{o.removeEventListener(e,i)}),this.eventListeners=null}),this.ngZone=null,this.header=null,this.leftShadow=null,this.rightShadow=null}calculateShadows(){this.maxScrollLeft=this.header.scrollWidth-this.header.clientWidth,this.maxScrollLeft===0?this.hideBoth():this.header.scrollLeft===0?this.hideLeft():this.header.scrollLeft===this.maxScrollLeft?this.hideRight():this.showBoth()}hideBoth(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.add(this.hidden)}hideLeft(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.remove(this.hidden)}hideRight(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.add(this.hidden)}showBoth(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.remove(this.hidden)}};var Oe=["scrollable"],ke=["leftShadow"],Pe=["rightShadow"];function Fe(n,o){if(n&1){let e=J();s(0,"mat-icon",10),d(1,"translate"),f("click",function(){b(e);let t=g(3);return M(t.languageSettings())}),c(2,"settings"),l()}n&2&&p("tippy",h(1,1,"LanguageSettings.Title"))}function Re(n,o){if(n&1&&(s(0,"button",7),c(1),K(2,Fe,3,3,"mat-icon",9),l()),n&2){let e=g().$implicit,i=g();p("tippy",e.Culture)("tippyDisabled",i.disabled()),r(),v(" ",e.label," "),r(),G(i.userLanguageSvc.userConfigurable()?2:-1)}}function Ze(n,o){if(n&1){let e=J();s(0,"button",11),f("mousedown",function(t){b(e);let a=g(2);return M(a.lngButtonMouseDown(t))})("click",function(t){b(e);let a=g().$implicit,u=g();return M(u.lngButtonClick(t,a))}),c(1),l()}if(n&2){let e=g().$implicit,i=g();p("tippy",e.Culture)("tippyDisabled",i.disabled()),r(),v(" ",e.label," ")}}function Ae(n,o){if(n&1&&K(0,Re,3,4,"button",7)(1,Ze,2,3,"button",8),n&2){let e=o.$implicit,i=g();G(i.current()===e.NameId?0:1)}}var qt=(()=>{class n{constructor(e,i,t,a,u,z,W,xe){this.languageService=e,this.languageInstanceService=i,this.ngZone=t,this.formConfig=a,this.snackBar=u,this.translate=z,this.matDialog=W,this.viewContainerRef=xe,this.log=le({LanguageSwitcherComponent:n}),this.disabled=se(),this.current=re(()=>this.formConfig.language().current),this.buttons=U(this.languageService.getAll()),this.userLanguageSvc=O(V)}ngAfterViewInit(){this.showShadowsHelper=new $(this.ngZone,this.headerRef.nativeElement,this.leftShadowRef.nativeElement,this.rightShadowRef.nativeElement),this.mouseScrollHelper=new Y(this.ngZone,this.headerRef.nativeElement,()=>this.disabled()),this.centerSelectedHelper=new Q(this.ngZone,this.headerRef.nativeElement)}ngOnDestroy(){this.centerSelectedHelper?.destroy(),this.mouseScrollHelper?.destroy(),this.showShadowsHelper?.destroy()}lngButtonMouseDown(e){this.centerSelectedHelper.lngButtonDown(e)}lngButtonClick(e,i){let t=this.log.fn("lngButtonClick");if(this.disabled())return this.snackBar.open(this.translate.instant("Message.CantSwitchLanguage"),null,{duration:3e3,verticalPosition:"top"}),t.end("disabled");if(this.centerSelectedHelper.lngButtonClick(e),!this.centerSelectedHelper.stopClickIfMouseMoved()){this.languageInstanceService.setCurrent(this.formConfig.config.formId,i.NameId);let a=this.userLanguageSvc.uiCode(i.NameId);this.translate.use(a)}}languageSettings(){this.matDialog.open(Me,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"750px",position:{top:"50px"}})}static{this.\u0275fac=function(i){return new(i||n)(m(X),m(ve),m(ie),m(Se),m(he),m(pe),m(ue),m(ne))}}static{this.\u0275cmp=S({type:n,selectors:[["app-language-switcher"]],viewQuery:function(i,t){if(i&1&&oe(Oe,5)(ke,5)(Pe,5),i&2){let a;E(a=I())&&(t.headerRef=a.first),E(a=I())&&(t.leftShadowRef=a.first),E(a=I())&&(t.rightShadowRef=a.first)}},inputs:{disabled:[1,"disabled"]},decls:9,vars:1,consts:[["leftShadow",""],["rightShadow",""],["scrollable",""],[1,"scrollable__overlay"],[1,"scrollable__overlay--left-shadow"],[1,"scrollable__overlay--right-shadow"],["tippyTranslate","Message.CantSwitchLanguage",1,"scrollable","lang-switch",3,"tippyDisabled"],["mat-flat-button","","color","accent",1,"lang-switch__button","hover-area",3,"tippy","tippyDisabled"],["mat-flat-button","","color","white",1,"lang-switch__button",3,"tippy","tippyDisabled"],["iconPositionEnd","",1,"hover-only",3,"tippy"],["iconPositionEnd","",1,"hover-only",3,"click","tippy"],["mat-flat-button","","color","white",1,"lang-switch__button",3,"mousedown","click","tippy","tippyDisabled"]],template:function(i,t){i&1&&(s(0,"div",3),B(1,"div",4,0)(3,"div",5,1),s(5,"div",6,2),D(7,Ae,2,1,null,null,x),l()()),i&2&&(r(5),p("tippyDisabled",!t.disabled()),r(2),T(t.buttons))},dependencies:[C,de,k,y,w,L],styles:[`.scrollable__overlay[_ngcontent-%COMP%]{position:relative;height:100%}.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{content:"";position:absolute;top:0;display:block;z-index:1;pointer-events:none;height:100%;width:80px;background-image:linear-gradient(90deg,#fff 8px,#fff0)}@media(max-width:600px){.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{width:24px}}.scrollable__overlay--right-shadow[_ngcontent-%COMP%]{right:0;background-image:linear-gradient(270deg,#fff 8px,#fff0)}.scrollable[_ngcontent-%COMP%]{overflow:hidden;scroll-behavior:smooth;height:100%;touch-action:none}.lang-switch[_ngcontent-%COMP%]{display:flex}.lang-switch__button[_ngcontent-%COMP%]{height:100%;flex-shrink:0;border-radius:0;margin-left:0!important;color:#0006;border-bottom:none;font-size:12px;line-height:54px;padding:0 6px;background-color:#fff!important}.lang-switch__button.mat-accent[_ngcontent-%COMP%]{color:#85283b;border-bottom:2px solid #85283B;background-color:inherit}.hidden[_ngcontent-%COMP%]{visibility:hidden}.hover-area[_ngcontent-%COMP%]   .hover-only[_ngcontent-%COMP%]{display:none}.hover-area[_ngcontent-%COMP%]:hover   .hover-only[_ngcontent-%COMP%]{display:block}
/*# sourceMappingURL=language-switcher-A3KKFQNC.css.map */`]})}}return n})();export{qt as LanguageSwitcherComponent};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/language-switcher-SP6DY73Q.js.map
