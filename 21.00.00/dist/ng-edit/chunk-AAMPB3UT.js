import{a as y}from"./chunk-NIPOW2E2.js";import{c as D}from"./chunk-HCPBPEHV.js";import{Aa as c,B as n,Ga as m,Kc as g,Lc as p,Pb as f,Za as l,fb as h,ib as u,xa as d}from"./chunk-46QINP2S.js";var I=(()=>{class r extends y{constructor(e,t,s){super(),this.zone=t,this.snackBar=s,this.markStyle=p("outline"),this.allowedFileTypes=p(""),this.filesDropped=g(),this.dropAreaClass="eav-droparea",this.markStyleClass=c(""),this.dragClass="eav-dragover",this.timeouts=[],this.element=e.nativeElement}ngOnInit(){this.markStyleClass.set(`eav-droparea-${this.markStyle()}`),this.element.classList.add(this.dropAreaClass,this.markStyleClass()),this.zone.runOutsideAngular(()=>{this.subscriptions.add(n(this.element,"dragover").subscribe(e=>{e.preventDefault(),e.stopPropagation(),this.clearTimeouts(),this.element.classList.add(this.dragClass)})),this.subscriptions.add(n(this.element,"dragleave").subscribe(e=>{e.preventDefault(),e.stopPropagation(),this.timeouts.push(window.setTimeout(()=>{this.element.classList.remove(this.dragClass)},50))}))})}ngOnDestroy(){this.clearTimeouts(),this.element.classList.remove(this.dropAreaClass,this.markStyleClass(),this.dragClass),super.ngOnDestroy()}onDrop(e){e.preventDefault(),e.stopPropagation(),this.clearTimeouts(),this.element.classList.remove(this.dragClass);let t=e.dataTransfer.files,s=Array.from(t);s=this.filterTypes(s,this.allowedFileTypes()),s.length>0&&this.filesDropped.emit(s)}clearTimeouts(){for(let e of this.timeouts)clearTimeout(e);this.timeouts=[]}filterTypes(e,t){if(t==="")return e;let s=t.split(",").map(i=>i.toLocaleLowerCase()),a=e.filter(i=>{let o=i.name.lastIndexOf(".");if(o<=0)return!1;let v=i.name.substring(o+1).toLocaleLowerCase();return s.includes(v)});if(e.length!==a.length){let i=this.allowedFileTypes().replace(/\,/g,", "),o=a.length?"Some files were filtered out. This drop location only accepts file types: "+i:"This drop location only accepts file types: "+i;this.snackBar.open(o,null,{duration:5e3})}return a}static{this.\u0275fac=function(t){return new(t||r)(l(m),l(d),l(D))}}static{this.\u0275dir=h({type:r,selectors:[["","appDragAndDrop",""]],hostBindings:function(t,s){t&1&&f("drop",function(i){return s.onDrop(i)})},inputs:{markStyle:[1,"markStyle"],allowedFileTypes:[1,"allowedFileTypes"]},outputs:{filesDropped:"filesDropped"},features:[u]})}}return r})();export{I as a};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/chunk-AAMPB3UT.js.map
