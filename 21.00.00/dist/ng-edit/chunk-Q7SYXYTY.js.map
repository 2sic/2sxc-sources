{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/import-app/services/import-app.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { Observable, of, switchMap } from 'rxjs';\r\nimport { FileUploadMessageTypes, FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\n\r\nexport const webApiAppRoot = 'admin/app/';\r\n\r\n@Injectable()\r\nexport class ImportAppService extends HttpServiceBaseSignal {\r\n\r\n  importApp(file: File, changedName: string, retryOnDuplicate = false): Observable<FileUploadResult> {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    formData.append('Name', changedName ?? '');\r\n    return this.http.post<FileUploadResult>(this.apiUrl(webApiAppRoot + 'Import'), formData, {\r\n      params: { zoneId: this.zoneId }\r\n    }).pipe(\r\n      switchMap(result => {\r\n        if (retryOnDuplicate && result.Messages[0]?.MessageType === FileUploadMessageTypes.Warning) {\r\n          const folderName = prompt(result.Messages[0].Text + ' Would you like to install it using another folder name?');\r\n          if (folderName) {\r\n            return this.importApp(file, folderName, true);\r\n          }\r\n        }\r\n        return of(result);\r\n      }),\r\n    );\r\n  }\r\n}\r\n"],
  "mappings": "+IAKO,IAAMA,EAAgB,aAGhBC,GAAiB,IAAA,CAAxB,MAAOA,UAAyBC,CAAqB,CAEzDC,UAAUC,EAAYC,EAAqBC,EAAmB,GAAK,CACjE,IAAMC,EAAW,IAAIC,SACrBD,OAAAA,EAASE,OAAO,OAAQL,CAAI,EAC5BG,EAASE,OAAO,OAAQJ,GAAe,EAAE,EAClC,KAAKK,KAAKC,KAAuB,KAAKC,OAAOZ,EAAgB,QAAQ,EAAGO,EAAU,CACvFM,OAAQ,CAAEC,OAAQ,KAAKA,MAAM,EAC9B,EAAEC,KACDC,EAAUC,GAAS,CACjB,GAAIX,GAAoBW,EAAOC,SAAS,CAAC,GAAGC,cAAgBC,EAAuBC,QAAS,CAC1F,IAAMC,EAAaC,OAAON,EAAOC,SAAS,CAAC,EAAEM,KAAO,0DAA0D,EAC9G,GAAIF,EACF,OAAO,KAAKnB,UAAUC,EAAMkB,EAAY,EAAI,CAEhD,CACA,OAAOG,EAAGR,CAAM,CAClB,CAAC,CAAC,CAEN,qEAnBWhB,CAAgB,IAAAyB,GAAhBzB,CAAgB,CAAA,CAAA,GAAA,CAAA,iCAAhBA,EAAgB0B,QAAhB1B,EAAgB2B,SAAA,CAAA,CAAA,SAAhB3B,CAAiB,GAAA",
  "names": ["webApiAppRoot", "ImportAppService", "HttpServiceBaseSignal", "importApp", "file", "changedName", "retryOnDuplicate", "formData", "FormData", "append", "http", "post", "apiUrl", "params", "zoneId", "pipe", "switchMap", "result", "Messages", "MessageType", "FileUploadMessageTypes", "Warning", "folderName", "prompt", "Text", "of", "__ngFactoryType__", "factory", "\u0275fac"]
}
