import{a as u,b as h}from"./chunk-VHSKZVJN.js";import{_ as c,aa as f}from"./chunk-DX662RXJ.js";var b={all:!0,constructor:!1,markTouched:!1,set:!1,disable:!1,getErrors:!0,fields:[...h,"*"]},m="ValidationMessage.",l=class i{constructor(t,r="unknown",e=!1){this.control=t,this.name=r,this.moreDisabled=e,this.log=f({UiControl:i},b),this.#r={jsonWarning:`${m}JsonWarning`,formulaWarning:`${m}NotValid`},this.control??={dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1},this.log.extendName(`[${r}]`),this.log.aIfInList("fields",this.name,{moreDisabled:e},"constructor")}static emptyControl(){return new i({dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1})}get dirty(){return this.control.dirty}get invalid(){return this.control.invalid}get touched(){return this.control.touched}get disabled(){return this.control.disabled||this.moreDisabled}get touchedAndInvalid(){return this.control.touched&&this.control.invalid}markTouched(){this.log.aIfInList("fields",this.name,null,"markTouched"),i.markTouched(this.control)}setIfChanged(t){let r=this.control.value;this.log.aIfInList("fields",this.name,{before:r,newValue:t},"setIfChanged"),!c(t,this.control.value)&&this.#t(t)}#t(t){let r=this.control,e=r.value;this.log.aIfInList("fields",this.name,{before:e,newValue:t},"set"),r.touched||r.markAsTouched(),!r.dirty&&!u.fieldValuesAreEqual(e,t)&&r.markAsDirty(),r.patchValue(t)}disable(t){this.log.aIfInList("fields",this.name,null,`disable: ${t}`),i.disable(this.control,t)}static markTouched(t){t.touched||(t.markAsTouched(),t.updateValueAndValidity())}static disable(t,r){t.disabled!==r&&(r?t.disable():t.enable())}getErrors(){let t=this.control,r=t.errors,e=this.log.fnIfInList("getErrors","fields",this.name,{control:t,name:this.name});if(!t.invalid)return e.r("","valid");if(!t.dirty&&!t.touched)return e.r("","not dirty or touched");for(let n of Object.keys(r)){let a=n==="formulaError"?t.errors.formulaMessage??d.messages[n]?.(!0):d.messages[n]?.(!0);if(a)return e.r(a,"error found")}return e.r("","no error")}#r;getWarnings(){let t=this.control;if(t._warning==null||!t.dirty&&!t.touched)return"";let r="";for(let e of Object.keys(t._warning))if(r=e==="formulaWarning"?t._warning.formulaMessage??this.#r[e]:this.#r[e],r)break;return r}};var s="ValidationMessage.",o="ValidationMessage.NotValid",d=(()=>{class i{static{this.messages={required:r=>r?`${s}Required`:`${s}RequiredShort`,min:r=>r?`${s}Min`:o,max:r=>r?`${s}Max`:o,minNoItems:r=>r?`${s}MinNoItems`:o,maxNoItems:r=>r?`${s}MaxNoItems`:o,pattern:r=>r?`${s}Pattern`:o,decimals:r=>r?`${s}Decimals`:o,jsonError:r=>r?`${s}JsonError`:o,formulaError:r=>o}}static validateForm(r){let e={};for(let[n,a]of Object.entries(r.controls))if(l.markTouched(a),!!a.invalid){for(let g of Object.keys(a.errors))if(e[n]=this.messages[g]?.(!1),e[n])break}return e}}return i})();export{d as a,l as b};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/chunk-VUGKCDVT.js.map
