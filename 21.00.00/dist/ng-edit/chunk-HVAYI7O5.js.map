{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/manage-content-list/services/content-group.service.ts"],
  "sourcesContent": ["import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { ReplaceConfig } from '../../replace-content/replace-config.model';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { ContentGroup, ContentGroupAdd } from '../models/content-group.model';\r\nimport { GroupHeader } from '../models/group-header.model';\r\n\r\nconst webApiContentGroup = 'cms/contentgroup/';\r\nconst webApiContentGroupReplace = webApiContentGroup + 'replace';\r\nconst webApiContentGroupItemlist = webApiContentGroup + 'itemlist';\r\nconst webApiContentGroupHeader = webApiContentGroup + 'header';\r\nconst removeItem = 'cms/list/delete';\r\n\r\n@Injectable()\r\nexport class ContentGroupService extends HttpServiceBaseSignal {\r\n\r\n  getItemsPromise(item: ContentGroup): Promise<ReplaceConfig> {\r\n    return this.fetchPromise<ReplaceConfig>(webApiContentGroupReplace, {\r\n      params: { appId: this.appId, guid: item.guid, part: item.part, index: item.index.toString() }\r\n    });\r\n  }\r\n\r\n  saveItem(item: ContentGroupAdd) {\r\n    return this.http.post<null>(this.apiUrl(webApiContentGroupReplace), {}, {\r\n      params: { guid: item.guid, part: item.part, index: item.index.toString(), entityId: item.id.toString(), add: `${item.add}` }\r\n    });\r\n  }\r\n\r\n  removeItem(contentGroup: ContentGroup, index: number) {\r\n    // note: the server checks if the part == 'content' and will automatically treat it as a pair with presentation\r\n    return this.http.delete<null>(this.apiUrl(removeItem), {\r\n      params: { index: index, parent: contentGroup.guid, fields: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  getListPromise(contentGroup: ContentGroup): Promise<GroupHeader[]> {\r\n    return this.fetchPromise<GroupHeader[]>(webApiContentGroupItemlist, {\r\n      params: { appId: this.appId, guid: contentGroup.guid, part: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  saveList(contentGroup: ContentGroup, resortedList: GroupHeader[]) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiContentGroupItemlist), resortedList, {\r\n      params: { appId: this.appId, guid: contentGroup.guid, part: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  getAllLive(contentGroup: ContentGroup, refresh: Signal<unknown>) {\r\n    return httpResource<GroupHeader>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiContentGroupHeader),\r\n        params: { appId: this.appId, guid: contentGroup.guid }\r\n      });\r\n    });\r\n  }\r\n}\r\n"],
  "mappings": "4FAOA,IAAMA,EAAqB,oBACrBC,EAA4BD,EAAqB,UACjDE,EAA6BF,EAAqB,WAClDG,EAA2BH,EAAqB,SAChDI,EAAa,kBAGNC,GAAoB,IAAA,CAA3B,MAAOA,UAA4BC,CAAqB,CAE5DC,gBAAgBC,EAAkB,CAChC,OAAO,KAAKC,aAA4BR,EAA2B,CACjES,OAAQ,CAAEC,MAAO,KAAKA,MAAOC,KAAMJ,EAAKI,KAAMC,KAAML,EAAKK,KAAMC,MAAON,EAAKM,MAAMC,SAAQ,CAAE,EAC5F,CACH,CAEAC,SAASR,EAAqB,CAC5B,OAAO,KAAKS,KAAKC,KAAW,KAAKC,OAAOlB,CAAyB,EAAG,CAAA,EAAI,CACtES,OAAQ,CAAEE,KAAMJ,EAAKI,KAAMC,KAAML,EAAKK,KAAMC,MAAON,EAAKM,MAAMC,SAAQ,EAAIK,SAAUZ,EAAKa,GAAGN,SAAQ,EAAIO,IAAK,GAAGd,EAAKc,GAAG,EAAE,EAC3H,CACH,CAEAlB,WAAWmB,EAA4BT,EAAa,CAElD,OAAO,KAAKG,KAAKO,OAAa,KAAKL,OAAOf,CAAU,EAAG,CACrDM,OAAQ,CAAEI,MAAOA,EAAOW,OAAQF,EAAaX,KAAMc,OAAQH,EAAaV,IAAI,EAC7E,CACH,CAEAc,eAAeJ,EAA0B,CACvC,OAAO,KAAKd,aAA4BP,EAA4B,CAClEQ,OAAQ,CAAEC,MAAO,KAAKA,MAAOC,KAAMW,EAAaX,KAAMC,KAAMU,EAAaV,IAAI,EAC9E,CACH,CAEAe,SAASL,EAA4BM,EAA2B,CAC9D,OAAO,KAAKZ,KAAKC,KAAc,KAAKC,OAAOjB,CAA0B,EAAG2B,EAAc,CACpFnB,OAAQ,CAAEC,MAAO,KAAKA,MAAOC,KAAMW,EAAaX,KAAMC,KAAMU,EAAaV,IAAI,EAC9E,CACH,CAEAiB,WAAWP,EAA4BQ,EAAwB,CAC7D,OAAOC,EAA0B,KAC/BD,EAAO,EACC,CACNE,IAAK,KAAKd,OAAOhB,CAAwB,EACzCO,OAAQ,CAAEC,MAAO,KAAKA,MAAOC,KAAMW,EAAaX,IAAI,GAEvD,CACH,qEAzCWP,CAAmB,IAAA6B,GAAnB7B,CAAmB,CAAA,CAAA,GAAA,CAAA,iCAAnBA,EAAmB8B,QAAnB9B,EAAmB+B,SAAA,CAAA,CAAA,SAAnB/B,CAAoB,GAAA",
  "names": ["webApiContentGroup", "webApiContentGroupReplace", "webApiContentGroupItemlist", "webApiContentGroupHeader", "removeItem", "ContentGroupService", "HttpServiceBaseSignal", "getItemsPromise", "item", "fetchPromise", "params", "appId", "guid", "part", "index", "toString", "saveItem", "http", "post", "apiUrl", "entityId", "id", "add", "contentGroup", "delete", "parent", "fields", "getListPromise", "saveList", "resortedList", "getAllLive", "refresh", "httpResource", "url", "__ngFactoryType__", "factory", "\u0275fac"]
}
