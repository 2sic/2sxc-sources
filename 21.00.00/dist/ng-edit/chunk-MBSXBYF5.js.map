{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/apps-management/services/apps-list.service.ts"],
  "sourcesContent": ["import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { App, PendingApp } from '../models/app.model';\r\n\r\nconst webApiAppRootList = 'admin/app/list';\r\nconst webApiAppRootInheritableApps = 'admin/app/InheritableApps';\r\nconst webApiAppRootPendingApps = 'admin/app/GetPendingApps';\r\nconst webApiAppRootApp = 'admin/app/app';\r\nconst webApiAppRootInstallPendingApps = 'admin/app/InstallPendingApps';\r\nconst webApiAppRootFlushcache = 'admin/app/flushcache';\r\n\r\n@Injectable()\r\nexport class AppsListService extends HttpServiceBaseSignal {\r\n\r\n  // clean way to create a new resource every time if refresh change\r\n  getAllLive(refresh: Signal<unknown>) {\r\n    return httpResource<App[]>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiAppRootList),\r\n        params: { zoneId: this.zoneId }\r\n      });\r\n    });\r\n  }\r\n\r\n  getInheritable() {\r\n    return httpResource<App[]>(() => ({\r\n      url: this.apiUrl(webApiAppRootInheritableApps),\r\n      params: { zoneId: this.zoneId }\r\n    }));\r\n  }\r\n\r\n  getPendingApps() {\r\n    return httpResource<PendingApp[]>(() => ({\r\n      url: this.apiUrl(webApiAppRootPendingApps),\r\n      params: { zoneId: this.zoneId },\r\n    }));\r\n  }\r\n\r\n  create(name: string, inheritAppId?: number, templateId?: number) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRootApp), {}, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n        name,\r\n        ...(inheritAppId != null && { inheritAppId }),\r\n        ...(templateId != null && { templateId }),\r\n      },\r\n    });\r\n  }\r\n\r\n  createTemplate(url: string, newName: string) {\r\n    const encodedName = encodeURIComponent(newName);\r\n    return <Observable<any>>this.http.post(`sys/install/RemotePackage?packageUrl=${url}&newName=${encodedName}`, {});\r\n  }\r\n\r\n  installPendingApps(pendingApps: PendingApp[]) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRootInstallPendingApps), pendingApps, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(appId: number) {\r\n    return this.http.delete<null>(this.apiUrl(webApiAppRootApp), {\r\n      params: { zoneId: this.zoneId, appId: appId.toString() },\r\n    });\r\n  }\r\n\r\n  async flushCache(appId: number): Promise<number> {\r\n    return this.getStatusPromise(webApiAppRootFlushcache, {\r\n      params: { zoneId: this.zoneId, appId: appId.toString() },\r\n    });\r\n  }\r\n\r\n}\r\n"],
  "mappings": "gJAMA,IAAMA,EAAoB,iBACpBC,EAA+B,4BAC/BC,EAA2B,2BAC3BC,EAAmB,gBACnBC,EAAkC,+BAClCC,EAA0B,uBAGnBC,GAAgB,IAAA,CAAvB,MAAOA,UAAwBC,CAAqB,CAGxDC,WAAWC,EAAwB,CACjC,OAAOC,EAAoB,KACzBD,EAAO,EACC,CACNE,IAAK,KAAKC,OAAOZ,CAAiB,EAClCa,OAAQ,CAAEC,OAAQ,KAAKA,MAAM,GAEhC,CACH,CAEAC,gBAAc,CACZ,OAAOL,EAAoB,KAAO,CAChCC,IAAK,KAAKC,OAAOX,CAA4B,EAC7CY,OAAQ,CAAEC,OAAQ,KAAKA,MAAM,GAC7B,CACJ,CAEAE,gBAAc,CACZ,OAAON,EAA2B,KAAO,CACvCC,IAAK,KAAKC,OAAOV,CAAwB,EACzCW,OAAQ,CAAEC,OAAQ,KAAKA,MAAM,GAC7B,CACJ,CAEAG,OAAOC,EAAcC,EAAuBC,EAAmB,CAC7D,OAAO,KAAKC,KAAKC,KAAW,KAAKV,OAAOT,CAAgB,EAAG,CAAA,EAAI,CAC7DU,OAAQU,IAAA,CACNT,OAAQ,KAAKA,OACbI,KAAAA,GACIC,GAAgB,MAAQ,CAAEA,aAAAA,CAAY,GACtCC,GAAc,MAAQ,CAAEA,WAAAA,CAAU,GAEzC,CACH,CAEAI,eAAeb,EAAac,EAAe,CACzC,IAAMC,EAAcC,mBAAmBF,CAAO,EAC9C,OAAwB,KAAKJ,KAAKC,KAAK,wCAAwCX,CAAG,YAAYe,CAAW,GAAI,CAAA,CAAE,CACjH,CAEAE,mBAAmBC,EAAyB,CAC1C,OAAO,KAAKR,KAAKC,KAAW,KAAKV,OAAOR,CAA+B,EAAGyB,EAAa,CACrFhB,OAAQ,CACNC,OAAQ,KAAKA,QAEhB,CACH,CAEAgB,OAAOC,EAAa,CAClB,OAAO,KAAKV,KAAKS,OAAa,KAAKlB,OAAOT,CAAgB,EAAG,CAC3DU,OAAQ,CAAEC,OAAQ,KAAKA,OAAQiB,MAAOA,EAAMC,SAAQ,CAAE,EACvD,CACH,CAEMC,WAAWF,EAAa,QAAAG,EAAA,sBAC5B,OAAO,KAAKC,iBAAiB9B,EAAyB,CACpDQ,OAAQ,CAAEC,OAAQ,KAAKA,OAAQiB,MAAOA,EAAMC,SAAQ,CAAE,EACvD,CACH,uEA7DW1B,CAAe,IAAA8B,GAAf9B,CAAe,CAAA,CAAA,GAAA,CAAA,iCAAfA,EAAe+B,QAAf/B,EAAegC,SAAA,CAAA,CAAA,SAAfhC,CAAgB,GAAA",
  "names": ["webApiAppRootList", "webApiAppRootInheritableApps", "webApiAppRootPendingApps", "webApiAppRootApp", "webApiAppRootInstallPendingApps", "webApiAppRootFlushcache", "AppsListService", "HttpServiceBaseSignal", "getAllLive", "refresh", "httpResource", "url", "apiUrl", "params", "zoneId", "getInheritable", "getPendingApps", "create", "name", "inheritAppId", "templateId", "http", "post", "__spreadValues", "createTemplate", "newName", "encodedName", "encodeURIComponent", "installPendingApps", "pendingApps", "delete", "appId", "toString", "flushCache", "__async", "getStatusPromise", "__ngFactoryType__", "factory", "\u0275fac"]
}
