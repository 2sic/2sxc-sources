{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/shared/helpers/param-encoder.ts", "projects/eav-ui/src/app/shared/helpers/url-prep.helper.ts"],
  "sourcesContent": ["/**\r\n * @internal\r\n */\r\nexport class ParamEncoder {\r\n  /** Encodes characters in URL parameter to not mess up routing. Don't forget to decode it! :) */\r\n  static encode(text: string) {\r\n    return (text ?? '')\r\n      .replace(/\\//g, '%2F')\r\n      .replace(/\\:/g, '%3A')\r\n      .replace(/\\&/g, '%26')\r\n      .replace(/\\~/g, '%7E')\r\n      .replace(/\\,/g, '%2C');\r\n  }\r\n\r\n  static decode(text: string) {\r\n    return (text ?? '')\r\n      .replace(/%2F/g, '/')\r\n      .replace(/%3A/g, ':')\r\n      .replace(/%26/g, '&')\r\n      .replace(/%7E/g, '~')\r\n      .replace(/%2C/g, ',');\r\n  }\r\n}\r\n", "import { EavFor } from '../../edit/shared/models/eav';\r\nimport { eavConstants } from '../constants/eav.constants';\r\nimport { classLog } from '../logging';\r\nimport { EditForm, EditPrep, ItemAddIdentifier, ItemEditIdentifier, ItemIdentifierInbound, ItemIdentifierShared, ItemInListIdentifier } from '../models/edit-form.model';\r\nimport { ParamEncoder } from './param-encoder';\r\n\r\n// Note: everything in here is a bit magical - and probably not ideal\r\n// It basically prepares a very compact url representation of an EditForm\r\n// so it can be passed in urls\r\n// The format is not documented anywhere - so changing it will likely break things\r\n// so be careful!\r\n// In some cases, order matters, in others there are prefixes to identify parts\r\n\r\nconst log = classLog(\"UrlPrepHelper\")\r\n\r\nconst PREFILL_PREFIX = 'prefill:';\r\nconst GROUP_PREFIX = 'group:';\r\nconst UIFIELDS_PREFIX = 'uifields:';\r\nconst PARAM_PREFIX = 'parameters:';\r\nconst ITEM_SEPARATOR = ',';\r\nconst VAL_SEPARATOR = '&';\r\nconst LIST_SEPARATOR = ':';\r\nconst METADATA_SEPARATOR = '~';\r\n\r\nfunction toOrderedParams(values: unknown[]): string {\r\n  return values.join(LIST_SEPARATOR);\r\n}\r\n\r\nexport function convertFormToUrl(form: EditForm) {\r\n  const l = log.fn('convertFormToUrl', { form });\r\n  let formUrl = '';\r\n\r\n  for (const item of form.items) {\r\n    // If we already have one, the next must be separated\r\n    if (formUrl) formUrl += ITEM_SEPARATOR;\r\n\r\n    const asGroup = item as ItemInListIdentifier;\r\n    const asItem = item as ItemEditIdentifier;\r\n    const asInboundParams = item as ItemIdentifierInbound;\r\n    // Fields/Parameters can come from two places\r\n    // When a link is inbound from the page, it will use UiFields/Parameters\r\n    // If it's from the Admin-UI itself, it should use the newer / deeper ClientData\r\n    const fields = asInboundParams.UiFields ?? item.ClientData?.fields;\r\n    const parameters = asInboundParams.Parameters ?? item.ClientData?.parameters;\r\n    // Group- or Inner-Item\r\n    if (asGroup.Parent) {\r\n      l.a(\"asGroup having parent\", {asGroup});\r\n      formUrl += GROUP_PREFIX + toOrderedParams([\r\n        asGroup.Parent,\r\n        asGroup.Field,\r\n        asGroup.Index,\r\n        asGroup.Add,\r\n        asGroup.EntityId\r\n      ]);\r\n      formUrl += addTypicalUrlGroups(asGroup, fields, parameters,\r\n        { prefill: true, fields: true, params: true, duplicate: true }\r\n      );\r\n\r\n    } else if (asItem.EntityId) {\r\n      l.a(\"asItem having entity id\", {asItem});\r\n      // Edit Item\r\n      formUrl += asItem.EntityId;\r\n\r\n      // New: fields\r\n      formUrl += addTypicalUrlGroups(asItem, fields, parameters,\r\n        { fields: true, params: true }\r\n      );\r\n\r\n      // 2023-05-11 in edit-id mode, prefill isn't supported, but we want the fields\r\n      // I actually think that prefill should be supported, because it can also transport more parameters\r\n      // formUrl += prefill2UrlParams(groupItem.Prefill, fields);\r\n\r\n      // 2024-05-30 2dm reactivating prefill on edit, for scenarios where new fields were added\r\n      // and for ephemeral control fields\r\n      // 2024-06-01 2dm re-disabled, since this also affects links coming in from the page\r\n      // so this could be an unexpected breaking change...\r\n      // formUrl += prefill2UrlParams(asItem.Prefill);\r\n\r\n    \r\n    }\r\n    // Add item, optionally with For-Metadata\r\n    else if ((item as ItemAddIdentifier).ContentTypeName) {\r\n      l.a(\"asItem having content type name\", {item});\r\n      // Add Item\r\n      const addItem = item as ItemAddIdentifier;\r\n      formUrl += 'new:' + addItem.ContentTypeName;\r\n\r\n      formUrl += addTypicalUrlGroups(addItem, fields, parameters,\r\n        { metadata: true, prefill: true, fields: true, params: true, duplicate: true }\r\n      );\r\n    }\r\n  }\r\n  return l.r(formUrl);\r\n}\r\n\r\nfunction addTypicalUrlGroups(\r\n  item: ItemAddIdentifier | ItemEditIdentifier | ItemInListIdentifier,\r\n  fields: string | undefined,\r\n  parameters: Record<string, unknown> | undefined,\r\n  parts: { metadata?: boolean, prefill?: boolean, fields?: boolean, params?: boolean, duplicate?: boolean }\r\n): string {\r\n  const addItem = item as ItemAddIdentifier;\r\n  const result = ''\r\n    + (parts.metadata ? getParamForMetadata(addItem) : '')\r\n    + (parts.prefill ? prefill2UrlParams(item.Prefill) : '')\r\n    + (parts.fields ? fields2UrlParams(fields) : '')\r\n    + (parts.params ? obj2UrlParams(parameters, PARAM_PREFIX) : '')\r\n    + (parts.duplicate && addItem.DuplicateEntity ? `${VAL_SEPARATOR}copy:` + addItem.DuplicateEntity : '');\r\n  return result;\r\n}\r\n\r\nfunction getParamForMetadata(addItem: ItemAddIdentifier) {\r\n  const l = log.fn(\"getParamForMetadata\", {addItem});\r\n\r\n  // helper function\r\n  const buildForSuffix = (itemFor: EavFor) => toOrderedParams([\r\n    '', // empty string to ensure it will start with a \":\"\r\n    itemFor.Target,\r\n    itemFor.TargetType,\r\n    (itemFor.Singleton ? itemFor.Singleton.toString() : '')\r\n  ]);\r\n\r\n  if (addItem.For != null) {\r\n    const prefix = `${VAL_SEPARATOR}for:`;\r\n    const forSuffix = buildForSuffix(addItem.For);\r\n    if (addItem.For?.String)\r\n      return l.r(`${prefix}s~${ParamEncoder.encode(addItem.For.String)}${forSuffix}`, \"for string\");\r\n    if (addItem.For?.Number)\r\n      return l.r(`${prefix}n~${addItem.For.Number}${forSuffix}`, \"for number\");\r\n    if (addItem.For?.Guid)\r\n      return l.r(`${prefix}g~${addItem.For.Guid}${forSuffix}`, \"for guid\");\r\n  }\r\n  if (addItem.Metadata)\r\n    return l.r(getParamForOldMetadata(addItem), \"metadata\");\r\n  return l.r('', \"other\");\r\n}\r\n\r\nfunction getParamForOldMetadata(addItem: ItemAddIdentifier) {\r\n  const l = log.fn(\"getParamForOldMetadata\", {addItem});\r\n  let keyType: string;\r\n  switch (addItem.Metadata.keyType.toLocaleLowerCase()) {\r\n    case eavConstants.keyTypes.string:\r\n      keyType = 's';\r\n      break;\r\n    case eavConstants.keyTypes.number:\r\n      keyType = 'n';\r\n      break;\r\n    case eavConstants.keyTypes.guid:\r\n      keyType = 'g';\r\n      break;\r\n  }\r\n  const target = Object.values(eavConstants.metadata)\r\n    .find(m => m.targetType === addItem.Metadata.targetType)?.target;\r\n  const result = `${VAL_SEPARATOR}for:` + keyType + METADATA_SEPARATOR + toOrderedParams([\r\n    ParamEncoder.encode(addItem.Metadata.key),\r\n    target,\r\n    addItem.Metadata.targetType\r\n  ]);\r\n  return l.r(result, result);\r\n}\r\n\r\nfunction prefill2UrlParams(prefill: Record<string, unknown>) {\r\n  return obj2UrlParams(prefill, PREFILL_PREFIX);\r\n}\r\n\r\nfunction obj2UrlParams(obj: Record<string, unknown>, prefix: string) {\r\n  let result = '';\r\n  if (!obj) return result;\r\n  for (const [key, value] of Object.entries(obj)) {\r\n    if (value == null) continue;\r\n    result += `${VAL_SEPARATOR}${prefix}${key}~${ParamEncoder.encode(value.toString())}`;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction prefillFromUrlParams(url: string, addTo: Record<string, unknown>): Record<string, unknown> {\r\n  const result = addTo ?? {} as Record<string, string>;\r\n  if (url == null) return result;\r\n  const prefillParams = url.split(LIST_SEPARATOR);\r\n  const [key, value] = prefillParams[1].split(METADATA_SEPARATOR);\r\n  const decodedValue = ParamEncoder.decode(value);\r\n  result[key] = decodedValue;\r\n  return result;\r\n}\r\n\r\nfunction fields2UrlParams(fields: string) {\r\n  return fields ? `${VAL_SEPARATOR}${UIFIELDS_PREFIX}${ParamEncoder.encode(fields)}` : '';\r\n}\r\n\r\nfunction isNumber(maybeNumber: string): boolean {\r\n  // The regex must be re-created for each test\r\n  return /^-?[0-9]*$/g.test(maybeNumber);\r\n}\r\n\r\nexport function convertUrlToForm(formUrl: string) {\r\n  const l = log.fn(\"convertUrlToForm\", { formUrl });\r\n  const form: EditForm = { items: [] };\r\n  const items = formUrl.split(ITEM_SEPARATOR);\r\n\r\n  for (const item of items) {\r\n    l.a(\"item\", {item});\r\n    // Handle group:\r\n    if (item.startsWith(GROUP_PREFIX)) {\r\n      // Inner Item / Group Item\r\n      let innerItem = {} as ItemInListIdentifier;\r\n      const options = item.split(VAL_SEPARATOR);\r\n\r\n      for (const option of options) {\r\n        if (option.startsWith(GROUP_PREFIX)) {\r\n          const params = option.split(LIST_SEPARATOR);\r\n          const hasParam5Id = params.length > 4 && params[5] && isNumber(params[5]);\r\n          innerItem = {\r\n            ...innerItem,\r\n            Parent: params[1],\r\n            Field: params[2],\r\n            Index: parseInt(params[3], 10),\r\n            Add: params[4] === 'true',\r\n            ...(hasParam5Id && { EntityId: parseInt(params[5], 10) })\r\n          }\r\n          // innerItem.Parent = params[1];\r\n          // innerItem.Field = params[2];\r\n          // innerItem.Index = parseInt(params[3], 10);\r\n          // innerItem.Add = params[4] === 'true';\r\n          // if (hasParam5Id)\r\n          //   innerItem.EntityId = parseInt(params[5], 10);\r\n        } else if (option.startsWith('copy:')) {\r\n          // Add Item Copy\r\n          innerItem = {\r\n            ...innerItem,\r\n            DuplicateEntity: parseInt(option.split(LIST_SEPARATOR)[1], 10)\r\n          };\r\n          // innerItem.DuplicateEntity = parseInt(copyParams[1], 10);\r\n        } else {\r\n          innerItem = addParamToItemIdentifier(innerItem, option);\r\n        }\r\n      }\r\n      form.items.push(innerItem);\r\n    } else if (isNumber((item ?? '').split(VAL_SEPARATOR)[0])) {\r\n      // Edit Item\r\n      const parts = item.split(VAL_SEPARATOR);\r\n      let editItem: ItemEditIdentifier = EditPrep.editId(parseInt(parts[0], 10));\r\n      for (const part of parts)\r\n        editItem = addParamToItemIdentifier(editItem, part);\r\n      form.items.push(editItem);\r\n    } else if (item.startsWith('new:')) {\r\n      // Add Item\r\n      let addItem = {} as ItemAddIdentifier;\r\n      const options = item.split(VAL_SEPARATOR);\r\n\r\n      for (const option of options) {\r\n        if (option.startsWith('new:')) {\r\n          // Add Item ContentType\r\n          const newParams = option.split(LIST_SEPARATOR);\r\n          addItem.ContentTypeName = newParams[1];\r\n        } else if (option.startsWith('for:')) {\r\n          // Add Item For\r\n          const forParams = option.split(LIST_SEPARATOR);\r\n          const [forKeyType, forKey] = forParams[1].split(METADATA_SEPARATOR);\r\n          // const forTarget = forParams[2];\r\n          // const forTargetType = parseInt(forParams[3], 10);\r\n          const forSingleton = forParams[4] != null ? forParams[4] === 'true' : undefined;\r\n          addItem.For = {\r\n            Target: forParams[2],\r\n            TargetType: parseInt(forParams[3], 10),\r\n            ...(forKeyType === 'g' && { Guid: forKey }),\r\n            ...(forKeyType === 'n' && { Number: parseInt(forKey, 10) }),\r\n            ...(forKeyType === 's' && { String: ParamEncoder.decode(forKey) }),\r\n            ...(forSingleton != null && { Singleton: forSingleton }),\r\n          };\r\n        } else if (option.startsWith('copy:')) {\r\n          // Add Item Copy\r\n          // const copyParams = option.split(LIST_SEPARATOR);\r\n          // addItem.DuplicateEntity = parseInt(copyParams[1], 10);\r\n          addItem = {\r\n            ...addItem,\r\n            DuplicateEntity: parseInt(option.split(LIST_SEPARATOR)[1], 10)\r\n          };\r\n\r\n        } else\r\n          addItem = addParamToItemIdentifier(addItem, option);\r\n      }\r\n      form.items.push(addItem);\r\n    }\r\n  }\r\n  return l.r(form);\r\n}\r\n\r\n/** add prefill and filter to url parameters */\r\nfunction addParamToItemIdentifier<T extends ItemIdentifierShared>(item: T, part: string): T {\r\n  const l = log.fn(\"addParamToItemIdentifier\", {item, part});\r\n  if (part.startsWith(UIFIELDS_PREFIX)) {\r\n    const fields = ParamEncoder.decode(part.split(LIST_SEPARATOR)[1]);\r\n    item.ClientData = { ...item.ClientData, fields };\r\n    return l.rSilent(item);\r\n  }\r\n  // Add Item Prefill\r\n  if (part.startsWith(PREFILL_PREFIX)) {\r\n    item.Prefill = prefillFromUrlParams(part, item.Prefill);\r\n    return l.rSilent(item);\r\n  }\r\n  // Add Item Form\r\n  if (part.startsWith(PARAM_PREFIX)) {\r\n    const formParams = prefillFromUrlParams(part, item.ClientData?.parameters);\r\n    item.ClientData = { ...item.ClientData, parameters: formParams };\r\n    return l.rSilent(item);\r\n  }\r\n  return l.rSilent(item, 'no match');\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": ["ParamEncoder", "encode", "text", "replace", "decode", "log", "classLog", "PREFILL_PREFIX", "GROUP_PREFIX", "UIFIELDS_PREFIX", "PARAM_PREFIX", "ITEM_SEPARATOR", "VAL_SEPARATOR", "LIST_SEPARATOR", "METADATA_SEPARATOR", "toOrderedParams", "values", "join", "convertFormToUrl", "form", "l", "fn", "formUrl", "item", "items", "asGroup", "asItem", "asInboundParams", "fields", "UiFields", "ClientData", "parameters", "Parameters", "Parent", "a", "Field", "Index", "Add", "EntityId", "addTypicalUrlGroups", "prefill", "params", "duplicate", "ContentTypeName", "addItem", "metadata", "r", "parts", "getParamForMetadata", "prefill2UrlParams", "Prefill", "fields2UrlParams", "obj2UrlParams", "DuplicateEntity", "buildForSuffix", "itemFor", "Target", "TargetType", "Singleton", "toString", "For", "prefix", "forSuffix", "String", "ParamEncoder", "encode", "Number", "Guid", "Metadata", "getParamForOldMetadata", "keyType", "toLocaleLowerCase", "eavConstants", "keyTypes", "string", "number", "guid", "target", "Object", "find", "m", "targetType", "result", "key", "obj", "value", "entries", "prefillFromUrlParams", "url", "addTo", "prefillParams", "split", "decodedValue", "decode", "isNumber", "maybeNumber", "test", "convertUrlToForm", "startsWith", "innerItem", "options", "option", "hasParam5Id", "length", "__spreadValues", "__spreadProps", "parseInt", "addParamToItemIdentifier", "push", "editItem", "EditPrep", "editId", "part", "newParams", "forParams", "forKeyType", "forKey", "forSingleton", "undefined", "rSilent", "formParams"]
}
