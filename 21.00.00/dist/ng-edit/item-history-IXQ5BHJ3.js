import{a as Dt,b as kt,c as Lt,d as Ft,e as Bt,f as Vt}from"./chunk-HYUOS4CI.js";import{a as Et}from"./chunk-KQFNIPKB.js";import{d as Pt}from"./chunk-ENHI5GWA.js";import{a as J,c as W}from"./chunk-DAEXUMJT.js";import"./chunk-IGMB27B5.js";import{e as U,h as Ot}from"./chunk-ME7PJXWA.js";import"./chunk-GL2SUH6T.js";import"./chunk-3M22BTAM.js";import{c as It}from"./chunk-HCPBPEHV.js";import{f as $,h as Ct,l as G}from"./chunk-QVLOO535.js";import{c as wt}from"./chunk-XREQECMQ.js";import"./chunk-RPJBZPSB.js";import"./chunk-UMOPET3G.js";import{i as R,j as bt}from"./chunk-4LV77BQU.js";import{a as Mt,b as Tt}from"./chunk-RGKBOUPL.js";import"./chunk-EZZQWHAZ.js";import{b as ht,c as ft}from"./chunk-23CS2WID.js";import{a as ut}from"./chunk-OIHIMR2W.js";import"./chunk-BDMUNOAA.js";import{c as _t}from"./chunk-OYQCZWOE.js";import{b as zt}from"./chunk-G33ZJSCE.js";import"./chunk-DX662RXJ.js";import{E as St,r as yt}from"./chunk-N5GZ74QQ.js";import{C as vt,D as xt,i as gt}from"./chunk-XASILSQS.js";import{$b as lt,Aa as Y,Ab as M,Bb as T,Bc as pt,Cb as h,Cc as dt,Db as o,Ea as ot,Eb as s,Fb as E,Nb as b,Ob as st,Pb as u,Rb as p,Sa as r,Tc as mt,Wc as j,Xc as F,Za as A,db as H,dc as D,ea as B,eb as N,ec as d,f as tt,fa as V,fc as k,gc as f,h as et,ha as it,ja as w,kd as ct,oa as v,pa as x,pc as L,qa as O,ra as at,tb as rt,ub as I,wa as nt,wb as c,yb as g,zb as P,zc as K}from"./chunk-46QINP2S.js";import{a as q,b as Q}from"./chunk-BDOJB7O2.js";var At=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=N({type:e});static \u0275inj=V({imports:[vt,St,gt,yt]})}return e})();function Gt(e,n){if(e&1&&(o(0,"mat-option",17),d(1),s()),e&2){let t=n.$implicit;h("value",t),r(),f(" ",t," ")}}function Ut(e,n){if(e&1){let t=b();o(0,"mat-form-field",14)(1,"mat-select",16,0),u("selectionChange",function(i){v(t);let l=p(2);return x(l._changePageSize(i.value))}),M(3,Gt,2,2,"mat-option",17,P),s(),o(5,"div",18),u("click",function(){v(t);let i=lt(2);return x(i.open())}),s()()}if(e&2){let t=p(2);h("appearance",t._formFieldAppearance)("color",t.color),r(),h("value",t.pageSize)("disabled",t.disabled),rt("aria-labelledby",t._pageSizeLabelId),h("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering),r(2),T(t._displayedPageSizeOptions)}}function Jt(e,n){if(e&1&&(o(0,"div",15),d(1),s()),e&2){let t=p(2);r(),k(t.pageSize)}}function Wt(e,n){if(e&1&&(o(0,"div",3)(1,"div",13),d(2),s(),c(3,Ut,6,7,"mat-form-field",14),c(4,Jt,2,1,"div",15),s()),e&2){let t=p();r(),I("id",t._pageSizeLabelId),r(),f(" ",t._intl.itemsPerPageLabel," "),r(),g(t._displayedPageSizeOptions.length>1?3:-1),r(),g(t._displayedPageSizeOptions.length<=1?4:-1)}}function Yt(e,n){if(e&1){let t=b();o(0,"button",19),u("click",function(){v(t);let i=p();return x(i._buttonClicked(0,i._previousButtonsDisabled()))}),O(),o(1,"svg",8),E(2,"path",20),s()()}if(e&2){let t=p();h("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("disabled",t._previousButtonsDisabled())("tabindex",t._previousButtonsDisabled()?-1:null),I("aria-label",t._intl.firstPageLabel)}}function Kt(e,n){if(e&1){let t=b();o(0,"button",21),u("click",function(){v(t);let i=p();return x(i._buttonClicked(i.getNumberOfPages()-1,i._nextButtonsDisabled()))}),O(),o(1,"svg",8),E(2,"path",22),s()()}if(e&2){let t=p();h("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("disabled",t._nextButtonsDisabled())("tabindex",t._nextButtonsDisabled()?-1:null),I("aria-label",t._intl.lastPageLabel)}}var Xt=(()=>{class e{changes=new tt;itemsPerPageLabel="Items per page:";nextPageLabel="Next page";previousPageLabel="Previous page";firstPageLabel="First page";lastPageLabel="Last page";getRangeLabel=(t,a,i)=>{if(i==0||a==0)return`0 of ${i}`;i=Math.max(i,0);let l=t*a,m=l<i?Math.min(l+a,i):l+a;return`${l+1} \u2013 ${m} of ${i}`};static \u0275fac=function(a){return new(a||e)};static \u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zt=50;var qt=new it("MAT_PAGINATOR_DEFAULT_OPTIONS"),Z=(()=>{class e{_intl=w(Xt);_changeDetectorRef=w(mt);_formFieldAppearance;_pageSizeLabelId=w(xt).getId("mat-paginator-page-size-label-");_intlChanges;_isInitialized=!1;_initializedStream=new et(1);color;get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(t||0,0),this._changeDetectorRef.markForCheck()}_pageIndex=0;get length(){return this._length}set length(t){this._length=t||0,this._changeDetectorRef.markForCheck()}_length=0;get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(t||0,0),this._updateDisplayedPageSizeOptions()}_pageSize;get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(a=>F(a,0)),this._updateDisplayedPageSizeOptions()}_pageSizeOptions=[];hidePageSize=!1;showFirstLastButtons=!1;selectConfig={};disabled=!1;page=new nt;_displayedPageSizeOptions;initialized=this._initializedStream;constructor(){let t=this._intl,a=w(qt,{optional:!0});if(this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),a){let{pageSize:i,pageSizeOptions:l,hidePageSize:m,showFirstLastButtons:y}=a;i!=null&&(this._pageSize=i),l!=null&&(this._pageSizeOptions=l),m!=null&&(this.hidePageSize=m),y!=null&&(this.showFirstLastButtons=y)}this._formFieldAppearance=a?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){this.hasNextPage()&&this._navigate(this.pageIndex+1)}previousPage(){this.hasPreviousPage()&&this._navigate(this.pageIndex-1)}firstPage(){this.hasPreviousPage()&&this._navigate(0)}lastPage(){this.hasNextPage()&&this._navigate(this.getNumberOfPages()-1)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let t=this.getNumberOfPages()-1;return this.pageIndex<t&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){let a=this.pageIndex*this.pageSize,i=this.pageIndex;this.pageIndex=Math.floor(a/t)||0,this.pageSize=t,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:Zt),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,a)=>t-a),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}_navigate(t){let a=this.pageIndex;t!==a&&(this.pageIndex=t,this._emitPageEvent(a))}_buttonClicked(t,a){a||this._navigate(t)}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=H({type:e,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",F],length:[2,"length","length",F],pageSize:[2,"pageSize","pageSize",F],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",j],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",j],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",j]},outputs:{page:"page"},exportAs:["matPaginator"],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-atomic","true","aria-live","polite","role","status",1,"mat-mdc-paginator-range-label"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],["aria-hidden","true",1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(a,i){a&1&&(o(0,"div",1)(1,"div",2),c(2,Wt,5,4,"div",3),o(3,"div",4)(4,"div",5),d(5),s(),c(6,Yt,3,5,"button",6),o(7,"button",7),u("click",function(){return i._buttonClicked(i.pageIndex-1,i._previousButtonsDisabled())}),O(),o(8,"svg",8),E(9,"path",9),s()(),at(),o(10,"button",10),u("click",function(){return i._buttonClicked(i.pageIndex+1,i._nextButtonsDisabled())}),O(),o(11,"svg",8),E(12,"path",11),s()(),c(13,Kt,3,5,"button",12),s()()()),a&2&&(r(2),g(i.hidePageSize?-1:2),r(3),f(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),r(),g(i.showFirstLastButtons?6:-1),r(),h("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("disabled",i._previousButtonsDisabled())("tabindex",i._previousButtonsDisabled()?-1:null),I("aria-label",i._intl.previousPageLabel),r(3),h("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("disabled",i._nextButtonsDisabled())("tabindex",i._nextButtonsDisabled()?-1:null),I("aria-label",i._intl.nextPageLabel),r(3),g(i.showFirstLastButtons?13:-1))},dependencies:[R,J,U,$,Et],styles:[`.mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-sys-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-sys-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-sys-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-sys-body-small-tracking));--mat-form-field-container-height: var(--mat-paginator-form-field-container-height, 40px);--mat-form-field-container-vertical-padding: var(--mat-paginator-form-field-container-vertical-padding, 8px)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-sys-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size, 56px)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:var(--mat-paginator-page-size-select-width, 84px)}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}@media(forced-colors: active){.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon,.mat-mdc-paginator-icon{fill:currentColor}.mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-range-actions .mat-mdc-icon-button[aria-disabled]{color:GrayText}}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display, block);position:absolute;top:50%;left:50%;width:var(--mat-paginator-page-size-select-width, 84px);height:var(--mat-paginator-page-size-select-touch-target-height, 48px);background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}
`],encapsulation:2,changeDetection:0})}return e})(),Ht=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=N({type:e});static \u0275inj=V({imports:[G,W,At,Z]})}return e})();function jt(e,n,t,a){if(e==null||n==null||t==null||a==null)return null;let i=e.slice((n-1)*t,n*t);return te(i,e,a)}function te(e,n,t){return e.map(a=>({changeSetId:a.ChangeSetId,attributes:ee(a,n,t),historyId:a.HistoryId,timeStamp:a.TimeStamp,user:a.User,versionNumber:a.VersionNumber,isLastVersion:!n.some(i=>i.VersionNumber===a.VersionNumber+1)}))}function ee(e,n,t){let a=JSON.parse(e.Json).Entity.Attributes,i=t==="live"?ie(n):n.find(_=>_.VersionNumber===e.VersionNumber-1),l=i?JSON.parse(i.Json).Entity.Attributes:null,m=[];return a!=null&&Object.entries(a).forEach(([_,S])=>{Object.keys(S).forEach(C=>{m.find(z=>z.name===C&&z.dataType===_)==null&&m.push({name:C,dataType:_})})}),l!=null&&Object.entries(l).forEach(([_,S])=>{Object.keys(S).forEach(C=>{m.find(z=>z.name===C&&z.dataType===_)==null&&m.push({name:C,dataType:_})})}),m.map(_=>{let S=a?.[_.dataType]?.[_.name],C=l?.[_.dataType]?.[_.name];return{name:_.name,dataType:_.dataType,change:Rt(S,C,!0),values:ae(S,C)}})}function ie(e){let n=e[0];for(let t of e)t.VersionNumber<=n.VersionNumber||(n=t);return n}function ae(e,n){let t=[];return e!=null&&Object.keys(e).forEach(i=>{t.includes(i)||t.push(i)}),n!=null&&Object.keys(n).forEach(i=>{t.includes(i)||t.push(i)}),t.map(i=>{let l=e?.[i],m=n?.[i];return{langKey:i,value:l,oldValue:m,change:Rt(l,m)}})}function Rt(e,n,t=!1){let a;return t&&(typeof e=="object"&&(e=Nt(e)),typeof n=="object"&&(n=Nt(n))),a=e!=null&&n!=null?JSON.stringify(e)!==JSON.stringify(n)?"changed":"none":e!=null?"new":"deleted",a}function Nt(e){return typeof e!="object"?e:Object.keys(e).sort().reduce((n,t)=>Q(q({},n),{[t]:e[t]}),{})}var ne="cms/history/get",oe="cms/history/restore",$t=(()=>{class e extends Pt{fetchVersions(t,a=null){return this.postSignal(ne,{entityId:t},{params:{appId:this.appId}},a)}restore(t,a){return this.http.post(this.apiUrl(oe),{entityId:t},{params:{appId:this.appId,changeId:a.toString()}})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ot(e)))(i||e)}})()}static{this.\u0275prov=B({token:e,factory:e.\u0275fac})}}return e})();function re(e,n){if(e&1){let t=b();o(0,"div",5)(1,"mat-form-field",8)(2,"mat-select",9),u("selectionChange",function(i){v(t);let l=p();return x(l.compareChange(i.value))}),o(3,"mat-option",10),d(4,"Compare with: Previous"),s(),o(5,"mat-option",11),d(6,"Compare with: Live"),s()()()()}if(e&2){let t=p();r(2),h("value",t.compareWith())}}function se(e,n){e&1&&(o(0,"div"),d(1,"Loading..."),s())}function le(e,n){e&1&&(o(0,"div"),d(1,"No previous versions of this item found"),s())}function pe(e,n){if(e&1&&d(0),e&2){let t=p().$implicit;f(" ",t.values[0]==null?null:t.values[0].value," ")}}function de(e,n){if(e&1&&(o(0,"div"),d(1),s()),e&2){let t=p().$implicit;D(L("eav-history-",t.change)),r(),f(" ",t.change==="deleted"?t.oldValue:t.value," ")}}function me(e,n){if(e&1&&(o(0,"div",23),d(1),s(),o(2,"div",24),d(3),s()),e&2){let t=p().$implicit;r(),k(t.value),r(2),k(t.oldValue)}}function ce(e,n){if(e&1&&(o(0,"div",20)(1,"div"),d(2),s(),o(3,"div",21),c(4,de,2,4,"div",22),c(5,me,4,2),s()()),e&2){let t=n.$implicit;r(),D(L("eav-detail-row__label eav-history-",t.change)),r(),f("",t.langKey,":"),r(2),g(t.change!=="changed"?4:-1),r(),g(t.change==="changed"?5:-1)}}function ge(e,n){if(e&1&&(o(0,"div",19),M(1,ce,6,6,"div",20,P),s()),e&2){let t=p().$implicit;r(),T(t.values)}}function _e(e,n){if(e&1){let t=b();o(0,"div",14)(1,"div",17),u("click",function(){let i=v(t).$implicit,l=p(2).$implicit,m=p(2);return x(m.attributeExpandedToggle(l.versionNumber,i.name))}),o(2,"div"),d(3),s(),o(4,"div"),c(5,pe,1,1),s(),o(6,"div",18)(7,"i"),d(8),s()()(),c(9,ge,3,0,"div",19),s()}if(e&2){let t=n.$implicit,a=p(2).$implicit,i=p(2);r(2),D(L("eav-row-main__label eav-history-",t.change)),r(),f(" ",t.name," "),r(),D(L("eav-row-main__value eav-history-",t.change)),r(),g(i.expandedAttributes[a.versionNumber+t.name]?-1:5),r(3),f("[",t.dataType,"]"),r(),g(i.expandedAttributes[a.versionNumber+t.name]?9:-1)}}function ue(e,n){if(e&1){let t=b();o(0,"button",25),u("click",function(){v(t);let i=p(2).$implicit,l=p(2);return x(l.restore(i.changeSetId))}),d(1," Restore "),s()}}function he(e,n){if(e&1&&(M(0,_e,10,10,"div",14,P),o(2,"div",15),c(3,ue,2,0,"button",16),s()),e&2){let t=p().$implicit;T(t.attributes),r(3),g(t.isLastVersion?-1:3)}}function fe(e,n){if(e&1){let t=b();o(0,"mat-expansion-panel",13),u("expandedChange",function(i){let l=v(t).$implicit,m=p(2);return x(m.panelExpandedChange(i,l.versionNumber))}),o(1,"mat-expansion-panel-header")(2,"mat-panel-title"),d(3),s(),o(4,"mat-panel-description"),d(5),K(6,"date"),o(7,"small"),d(8),K(9,"date"),s()()(),c(10,he,4,1),s()}if(e&2){let t=n.$implicit,a=p(2);h("expanded",a.expandedPanels[t.versionNumber]),r(3),f("Version ",t.versionNumber),r(2),f(" ",pt(6,5,a.getLocalDate(t.timeStamp),"yyyy-MM-dd HH:mm")," \xA0 "),r(3),f("(",dt(9,8,a.getLocalDate(t.timeStamp),"yyyy-MM-dd HH:mm","UTC")," UTC)"),r(2),g(a.expandedPanels[t.versionNumber]?10:-1)}}function ve(e,n){if(e&1&&(o(0,"mat-accordion",6),M(1,fe,11,12,"mat-expansion-panel",12,P),s()),e&2){let t=p();r(),T(t.historyItems())}}function xe(e,n){if(e&1){let t=b();o(0,"mat-paginator",26),u("page",function(i){v(t);let l=p();return x(l.pageChange(i))}),s()}if(e&2){let t=p();h("length",t.version().length)("pageSize",t.pageSize())("pageSizeOptions",t.pageSizeOptions)}}var hi=(()=>{class e{#e;constructor(t,a,i){this.dialog=t,this.route=a,this.snackBar=i,this.hostClass="dialog-component",this.#e=ut($t),this.#i=parseInt(this.route.snapshot.paramMap.get("itemId"),10),this.version=this.#e.fetchVersions(this.#i),this.pageSizeOptions=[10,20,50],this.expandedPanels={},this.expandedAttributes={},this.#t=Y(1),this.pageSize=Mt("pageSize",this.pageSizeOptions[0]),this.compareWith=Y("live"),this.historyItems=Tt("historyItems",()=>jt(this.version(),this.#t(),this.pageSize(),this.compareWith()))}#i;#t;compareChange(t){this.compareWith.set(t)}panelExpandedChange(t,a){this.expandedPanels[a]=t}attributeExpandedToggle(t,a){this.expandedAttributes[t+a]=!this.expandedAttributes[t+a]}getLocalDate(t){return new Date(t)}pageChange(t){let a=t.pageIndex+1;a!==this.#t()&&(this.expandedPanels={},this.expandedAttributes={},this.#t.set(a)),this.pageSize.set(t.pageSize)}restore(t){this.snackBar.open("Restoring previous version..."),this.#e.restore(this.#i,t).subscribe(a=>{this.snackBar.open("Previous version restored. Will reload edit dialog",null,{duration:3e3}),this.dialog.close({refreshEdit:!0})})}static{this.\u0275fac=function(a){return new(a||e)(A(zt),A(_t),A(It))}}static{this.\u0275cmp=H({type:e,selectors:[["app-item-history"]],hostVars:1,hostBindings:function(a,i){a&2&&st("className",i.hostClass)},decls:16,vars:5,consts:[[1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],[1,"eav-compare-box"],["multi","",1,"eav-history-tables"],["color","accent","showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions"],["color","accent",1,"eav-mat-form-field","eav-compare-box__dropdown"],["name","Scope",3,"selectionChange","value"],["value","previous"],["value","live"],[3,"expanded"],[3,"expandedChange","expanded"],[1,"eav-table-row"],[1,"eav-row-actions"],["mat-raised-button","",1,"eav-action-button"],[1,"eav-table-row__main","eav-row-main",3,"click"],[1,"eav-row-main__type"],[1,"eav-table-row__details"],[1,"eav-detail-row"],[1,"eav-detail-row__value"],[3,"class"],[1,"eav-history-new"],[1,"eav-history-deleted","eav-history-deleted__value"],["mat-raised-button","",1,"eav-action-button",3,"click"],["color","accent","showFirstLastButtons","true",3,"page","length","pageSize","pageSizeOptions"]],template:function(a,i){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),d(3,"Item History"),s(),o(4,"button",3),u("click",function(){return i.dialog.close()}),o(5,"mat-icon"),d(6,"close"),s()()(),o(7,"div",4)(8,"p"),d(9,"Check version history for this item and restore the version you need."),s(),c(10,re,7,1,"div",5),o(11,"div"),c(12,se,2,0,"div"),c(13,le,2,0,"div"),c(14,ve,3,0,"mat-accordion",6),s(),c(15,xe,1,3,"mat-paginator",7),s()()),a&2){let l,m,y,_;r(10),g(((l=i.historyItems())==null?null:l.length)>0?10:-1),r(2),g(i.historyItems()===null?12:-1),r(),g(((m=i.historyItems())==null?null:m.length)===0?13:-1),r(),g(((y=i.historyItems())==null?null:y.length)>0?14:-1),r(),g(((_=i.historyItems())==null?null:_.length)>0?15:-1)}},dependencies:[G,Ct,$,ft,ht,bt,R,W,J,U,Ot,Vt,Bt,Dt,kt,Ft,Lt,Ht,Z,wt,ct],styles:[`.eav-compare-box[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:flex-end;height:40px}.eav-compare-box__dropdown[_ngcontent-%COMP%]{width:220px;margin-top:-14px;font-size:14px;height:auto}.eav-accordion[_ngcontent-%COMP%]{display:block;padding:4px 0}.eav-expansion-panel-header[_ngcontent-%COMP%], .eav-table-row[_ngcontent-%COMP%]{font-size:14px}.eav-table-row__main[_ngcontent-%COMP%]{display:flex}.eav-table-row__details[_ngcontent-%COMP%]{display:block}.eav-row-main[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0}.eav-row-main__label[_ngcontent-%COMP%]{width:160px;flex:0 0 auto}.eav-row-main__value[_ngcontent-%COMP%]{flex:1 1 auto}.eav-row-main__type[_ngcontent-%COMP%]{flex:0 0 auto;font-size:12px}.eav-row-main__type[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:not(:last-of-type){margin-right:2px}.eav-detail-row[_ngcontent-%COMP%]{display:flex;padding-bottom:4px;cursor:default}.eav-detail-row__label[_ngcontent-%COMP%]{width:160px;flex:0 0 auto}.eav-detail-row__value[_ngcontent-%COMP%]{flex:1 1 auto}.eav-row-actions[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:flex-end}
/*# sourceMappingURL=item-history-Y4YX5OPK.css.map */`]})}}return e})();export{hi as ItemHistoryComponent};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/item-history-IXQ5BHJ3.js.map
