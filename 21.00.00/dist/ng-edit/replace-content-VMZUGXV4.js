import{a as ut}from"./chunk-HVAYI7O5.js";import{a as st,b as pt,c as mt}from"./chunk-IQWS6VUA.js";import{a as lt}from"./chunk-ORK43FFD.js";import{a as X}from"./chunk-L77E4UL2.js";import{a as dt}from"./chunk-ZBQC6E3M.js";import"./chunk-AO43RQAG.js";import{c as ct}from"./chunk-SCB2MVKQ.js";import"./chunk-4SMJHLGZ.js";import{a as J}from"./chunk-564RKXG7.js";import"./chunk-HJXR3IL7.js";import{b as it,c as ot}from"./chunk-ODL7UGWI.js";import"./chunk-R3Y7P2GW.js";import"./chunk-ENHI5GWA.js";import"./chunk-DAEXUMJT.js";import"./chunk-IGMB27B5.js";import{e as at,h as rt}from"./chunk-ME7PJXWA.js";import"./chunk-GL2SUH6T.js";import"./chunk-3M22BTAM.js";import{c as $}from"./chunk-HCPBPEHV.js";import{f as U,l as W}from"./chunk-QVLOO535.js";import{c as nt}from"./chunk-XREQECMQ.js";import"./chunk-RPJBZPSB.js";import{b as Y,f as Z,k as tt,v as et}from"./chunk-UMOPET3G.js";import{b as L,i as N,j}from"./chunk-4LV77BQU.js";import{a as S,b as M}from"./chunk-RGKBOUPL.js";import"./chunk-EZZQWHAZ.js";import{b as P,c as G}from"./chunk-23CS2WID.js";import{a as C,b as E}from"./chunk-OIHIMR2W.js";import"./chunk-BDMUNOAA.js";import{d as O}from"./chunk-OYQCZWOE.js";import{b as K,g as q}from"./chunk-G33ZJSCE.js";import"./chunk-DX662RXJ.js";import{l as z,p as H,q as Q}from"./chunk-N5GZ74QQ.js";import"./chunk-XASILSQS.js";import{$b as k,Cb as p,Db as n,Eb as l,Fb as w,Nb as x,Ob as I,Pb as f,Qc as F,Sa as r,Za as g,ac as V,db as y,ec as m,fc as A,gc as v,jb as T,lc as R,mc as B,nc as D,oa as d,pa as u}from"./chunk-46QINP2S.js";import{a as _,b}from"./chunk-BDOJB7O2.js";function gt(s,ft){if(s&1&&(n(0,"mat-option",15),m(1),l()),s&2){let e=ft.$implicit;p("value",e.label),r(),A(e.label)}}var Jt=(()=>{class s{#i;#t;constructor(e,i){this.dialog=e,this.snackBar=i,this.hostClass="dialog-component",this.#i=C(ut),this.#t=C(lt),this.#n=E(this.#t.getParams(["guid","part","index"]),t=>({guid:t.guid,part:t.part,index:parseInt(t.index,10)})),this.isAddMode=S("isAddMode",!!this.#t.getQueryParam("add")),this.filterText=F(""),this.#e=S("options",[]),this.options=M("filteredOptions",()=>{let t=this.filterText().toLocaleLowerCase();return this.#e().filter(o=>o.label.toLocaleLowerCase().includes(t))}),this.canSave=M("isMatch",()=>this.options().map(t=>t.label).includes(this.filterText()))}#n;#a;#e;ngOnInit(){this.#l(),this.#r(!1,null),this.#t.doOnDialogClosed(()=>{let i=this.#t.router.getCurrentNavigation().extras?.state,t=i?.[Object.keys(i)[0]];this.#r(!0,t)})}closeDialog(){this.dialog.close()}select(e){this.filterText.set(e.option.value)}copySelected(){let e=this.#o(),i={items:[J.copy(this.#a,e.id)]},t=X(i);this.#t.navRelative([`edit/${t}`])}#r(e,i){let t=this.#o();this.#i.getItemsPromise(t).then(o=>{let c=Object.entries(o.Items).map(([a,h])=>({id:parseInt(a,10),label:`${h} (${a})`}));if(this.#e.set(c),!t.add&&!e||i!=null){let a=e?i:o.SelectedId,h=this.#e().find(ht=>ht.id===a)?.label||"";this.filterText.set(h)}this.#a=o.ContentTypeName})}#o(){let e=this.filterText(),i=this.#e().find(o=>o.label===e)?.id??null;return b(_({id:i},this.#n),{add:this.isAddMode()})}saveAndClose(){this.snackBar.open("Saving...");let e=this.#o();this.#i.saveItem(e).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}#l(){this.dialog.keydownEvents().subscribe(e=>{ct(e)&&this.canSave()&&(e.preventDefault(),this.saveAndClose())})}static{this.\u0275fac=function(i){return new(i||s)(g(K),g($))}}static{this.\u0275cmp=y({type:s,selectors:[["app-replace-content"]],hostVars:1,hostBindings:function(i,t){i&2&&I("className",t.hostClass)},inputs:{filterText:[1,"filterText"]},outputs:{filterText:"filterTextChange"},decls:25,vars:11,consts:[["auto","matAutocomplete"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],[1,"eav-options-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","matAutocomplete","ngModel"],[3,"optionSelected","hideSingleSelectionIndicator"],["itemSize","48","minBufferPx","500","maxBufferPx","1000"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","","tippy","Create a Copy","tippyPlacement","top",3,"click","disabled"],["align","end"],[3,"action","ngClass","disabled"],[3,"value"]],template:function(i,t){if(i&1){let o=x();n(0,"div",1)(1,"div",2)(2,"div",3),m(3),l(),n(4,"button",4),f("click",function(){return d(o),u(t.closeDialog())}),n(5,"mat-icon"),m(6,"close"),l()()(),n(7,"div",5),w(8,"router-outlet"),n(9,"p"),m(10),l(),n(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),m(14,"Choose item"),l(),n(15,"input",8),D("ngModelChange",function(a){return d(o),B(t.filterText,a)||(t.filterText=a),u(a)}),l(),n(16,"mat-autocomplete",9,0),f("optionSelected",function(a){return d(o),u(t.select(a))}),n(18,"cdk-virtual-scroll-viewport",10),T(19,gt,2,2,"mat-option",11),l()()(),n(20,"button",12),f("click",function(){return d(o),u(t.copySelected())}),n(21,"mat-icon"),m(22,"file_copy"),l()()()(),n(23,"mat-dialog-actions",13)(24,"app-save-close-button-fab",14),f("action",function(){return d(o),u(t.saveAndClose())}),l()()()}if(i&2){let o=k(17);r(3),v(" ",t.isAddMode()?"Add Existing Item":"Replace Content Item"," "),r(7),v("",t.isAddMode()?"Select a content-item to add to this list.":"By replacing a content-item you can make other content appear in the slot of the original content."," "),r(5),p("matAutocomplete",o),R("ngModel",t.filterText),r(),p("hideSingleSelectionIndicator",!0),r(2),V("height",t.options().length<6?t.options().length*48:240,"px"),r(),p("cdkVirtualForOf",t.options()),r(),p("disabled",!t.canSave()),r(4),p("ngClass",t.canSave()?"":"disabled")("disabled",!t.canSave())}},dependencies:[O,j,N,L,ot,it,mt,st,at,pt,et,Y,Z,tt,H,z,Q,rt,W,U,G,P,q,nt,dt],styles:[`.eav-options-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end}
/*# sourceMappingURL=replace-content-LPLQIGA3.css.map */`]})}}return s})();export{Jt as ReplaceContentComponent};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/replace-content-VMZUGXV4.js.map
