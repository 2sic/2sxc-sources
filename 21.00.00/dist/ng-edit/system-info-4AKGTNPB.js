import{a as Le}from"./chunk-XVKX7JBO.js";import{a as Fe}from"./chunk-KQM4ITOM.js";import{a as Ve}from"./chunk-VKUKRE22.js";import"./chunk-T2Q2H5HY.js";import{a as Te}from"./chunk-H6SOZQOZ.js";import{a as w}from"./chunk-LKTKDGC2.js";import"./chunk-OI3ZGSUF.js";import{a as Me}from"./chunk-LOXR3JJX.js";import{a as ve}from"./chunk-ORK43FFD.js";import{a as ne}from"./chunk-OYXWEFHA.js";import{a as ie}from"./chunk-V5UC4TMG.js";import"./chunk-U657U553.js";import"./chunk-QFYVXC4V.js";import"./chunk-JNRBLGLU.js";import"./chunk-MWYLUFVP.js";import"./chunk-FYQJ654R.js";import"./chunk-ZKDKEYV7.js";import"./chunk-4YE3E6NH.js";import{a as he,b as ye,c as xe,d as Ce,e as be,f as Ie,g as ke,h as we}from"./chunk-MQM7DF2M.js";import"./chunk-564RKXG7.js";import"./chunk-HJXR3IL7.js";import{a as Ee}from"./chunk-BTK5NHS7.js";import"./chunk-K5FCDENP.js";import{b as fe,c as _e}from"./chunk-ODL7UGWI.js";import"./chunk-R3Y7P2GW.js";import"./chunk-37NMTDTM.js";import"./chunk-WAPW5AUJ.js";import{d as te}from"./chunk-ENHI5GWA.js";import{c as ee}from"./chunk-HCPBPEHV.js";import{h as X,l as Y}from"./chunk-QVLOO535.js";import{c as Se}from"./chunk-XREQECMQ.js";import"./chunk-RPJBZPSB.js";import{b as ae,f as oe,g as re,i as le,k as se,l as me,m as ce,q as de,r as pe,s as ue,v as ge}from"./chunk-UMOPET3G.js";import{b as J,i as K,j as Q}from"./chunk-4LV77BQU.js";import"./chunk-RGKBOUPL.js";import"./chunk-EZZQWHAZ.js";import{b as z,c as q}from"./chunk-23CS2WID.js";import{a as C}from"./chunk-OIHIMR2W.js";import"./chunk-BDMUNOAA.js";import{d as G,f as j}from"./chunk-OYQCZWOE.js";import"./chunk-G33ZJSCE.js";import"./chunk-DX662RXJ.js";import"./chunk-N5GZ74QQ.js";import"./chunk-XASILSQS.js";import{$b as I,Aa as F,Ab as M,Bb as T,Cb as m,Db as t,Ea as W,Eb as i,Fb as c,Gc as k,M as N,Nb as h,Pa as V,Pb as S,Rb as p,Sa as l,Za as B,db as R,ea as O,ec as n,fc as y,gc as x,ja as A,lc as U,mc as H,nc as Z,oa as f,pa as _,sc as L,t as $,u as D,wb as u,yb as g,zb as E}from"./chunk-46QINP2S.js";import{g as P}from"./chunk-BDOJB7O2.js";var Oe="sys/log/",Pe=(()=>{class a extends te{activatePageLog(e){return $(this.http.get(this.apiUrl(Oe+"EnableDebug"),{params:{duration:e?.toString()},responseType:"text"}))}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=W(a)))(r||a)}})()}static{this.\u0275prov=O({token:a,factory:a.\u0275fac})}}return a})();var $e=()=>["/"];function Ae(a,d){if(a&1){let e=h();t(0,"a",24),S("click",function(){f(e);let r=p().$implicit,s=p();return _(s.openSideNavPath(r.link.url))}),n(1),i()}if(a&2){let e=p().$implicit;m("routerLink",L(2,$e)),l(),x(" ",e.link.label," ")}}function We(a,d){if(a&1){let e=h();t(0,"div",6)(1,"div",20),n(2),i(),t(3,"div",21)(4,"span",22),S("click",function(){let r=f(e).$implicit,s=p();return _(s.clipboard.copyToClipboard(r.value))}),n(5),i(),u(6,Ae,2,3,"a",23),i()()}if(a&2){let e=d.$implicit;l(2),x("",e.label,":"),l(2),m("tippy",e.value),l(),y(e.value),l(),g(e.link?6:-1)}}function Be(a,d){if(a&1){let e=h();t(0,"a",24),S("click",function(){f(e);let r=p(2).$implicit,s=p();return _(s.openSideNavPath(r.link.url))}),n(1),i()}if(a&2){let e=p(2).$implicit;m("routerLink",L(2,$e)),l(),x(" ",e.link.label," ")}}function Re(a,d){if(a&1&&(t(0,"a",26),n(1),i()),a&2){let e=p(2).$implicit;m("href",e.link.url,V)("target",e.link.target),l(),y(e.link.label)}}function Ue(a,d){if(a&1&&(u(0,Be,2,3,"a",23),u(1,Re,2,3,"a",26)),a&2){let e=p().$implicit;g(e.link.target==="angular"?0:-1),l(),g(e.link.target!=="angular"?1:-1)}}function He(a,d){if(a&1){let e=h();t(0,"div",6)(1,"div",20),n(2),i(),t(3,"div",21)(4,"span",25),S("click",function(){let r=f(e).$implicit,s=p();return _(s.clipboard.copyToClipboard(r.value))}),n(5),i(),u(6,Ue,2,2),i()()}if(a&2){let e=d.$implicit;l(2),x("",e.label,":"),l(2),m("tippy",e.value),l(),y(e.value),l(),g(e.link?6:-1)}}function Ze(a,d){a&1&&(t(0,"div"),n(1,"LightSpeed is enabled. Configure it in each site/app as you need."),i())}function Ge(a,d){a&1&&(t(0,"div"),n(1,"ContentSecurityPolicy is enabled. Configure it in each site/app as you need."),i())}function je(a,d){a&1&&(t(0,"app-field-hint",27),n(1," Only positive whole numbers "),i()),a&2&&m("isError",!0)}function ze(a,d){if(a&1&&u(0,je,2,1,"app-field-hint",27),a&2){p();let e=I(118);g(e.errors.pattern?0:-1)}}function qe(a,d){if(a&1&&(t(0,"a",23),n(1),i()),a&2){let e=p(2).$implicit;m("routerLink",e.link.url),l(),x(" ",e.link.label)}}function Je(a,d){if(a&1&&(t(0,"a",26),n(1),i()),a&2){let e=p(2).$implicit;m("href",e.link.url,V)("target",e.link.target),l(),y(e.link.label)}}function Ke(a,d){if(a&1&&(u(0,qe,2,2,"a",23),u(1,Je,2,3,"a",26)),a&2){let e=p().$implicit;g(e.link.target==="angular"?0:-1),l(),g(e.link.target!=="angular"?1:-1)}}function Qe(a,d){if(a&1){let e=h();t(0,"div",6)(1,"div",28),n(2),i(),t(3,"div",21)(4,"span",25),S("click",function(){let r=f(e).$implicit,s=p();return _(s.clipboard.copyToClipboard(r.value))}),n(5),i(),u(6,Ke,2,2),i()()}if(a&2){let e=d.$implicit;l(2),x("",e.label,":"),l(2),m("tippy",e.value),l(),y(e.value),l(),g(e.link?6:-1)}}var Vt=(()=>{class a{#a;#o;#n;#r;#t;#i;#l;#e;constructor(e){this.snackBar=e,this.features=A(ne),this.#a=C(ie),this.#o=C(Pe),this.#n=C(Ve),this.#r=C(Le),this.#t=C(ve),this.positiveWholeNumber=/^[1-9][0-9]*$/,this.LightSpeedOutputCache=w.LightSpeed,this.ContentSecurityPolicy=w.ContentSecurityPolicy,this.loading=F(!1),this.#i=F(0),this.#l=this.#n.getLanguageLive(this.#i).value,this.#e=this.#n.getSystemInfoLive(this.#i).value,this.systemInfos=k(()=>{let o=this.#e();if(o==null)return;let r=this.#t.router.url+"/registration";return[{label:"CMS",value:`2sxc v.${o.System.EavVersion}`},{label:"Platform",value:`${o.System.Platform} v.${o.System.PlatformVersion}`},{label:"Zones",value:o.System.Zones.toString()},{label:"Fingerprint",value:o.System.Fingerprint},{label:"Registered to",value:o.License.Owner||"(unregistered)",link:o.License.Owner?{url:r,label:"manage",target:"angular"}:{url:r,label:"register",target:"angular"}}]}),this.siteInfos=k(()=>{let o=this.#e(),r=this.#l();if(o==null||r==null)return;let s=r.length,v=r.filter(De=>De.IsEnabled).length;return[{label:"Zone",value:o.Site.ZoneId.toString()},{label:"Site",value:o.Site.SiteId.toString()},{label:"Languages",value:`${v}/${s}`,link:{url:"languages",label:"manage",target:"angular"}},{label:"Apps",value:o.Site.Apps.toString(),link:{url:"list",label:"manage",target:"angular"}}]}),this.warningIcon=k(()=>{let o=this.#e();if(o!=null)return o.Messages.WarningsObsolete||o.Messages.WarningsOther?"warning":"check"}),this.warningInfos=k(()=>{let o=this.#e();return o==null?void 0:[{label:"Warnings Obsolete",value:o.Messages.WarningsObsolete.toString(),link:o.Messages.WarningsObsolete?{url:window.$2sxc.http.apiUrl("sys/insights/logs?key=warnings-obsolete"),label:"review",target:"_blank"}:void 0},{label:"Warnings Other",value:o.Messages.WarningsOther.toString(),link:o.Messages.WarningsOther?{url:window.$2sxc.http.apiUrl("sys/insights/logs"),label:"review",target:"_blank"}:void 0}]}),this.lsEnabled=this.features.isEnabled[w.LightSpeed],this.cspEnabled=this.features.isEnabled[w.ContentSecurityPolicy],this.clipboard=C(Ee)}ngOnInit(){this.#t.doOnDialogClosed(()=>{this.#i.update(e=>++e)})}openSiteSettings(){this.openParentAppSettings("Site")}openGlobalSettings(){this.openParentAppSettings("System")}openParentAppSettings(e){this.#a.getCurrent$().pipe(D(o=>o?.Context[e].PrimaryApp),N(1)).subscribe(o=>{this.#r.openAppAdministration(o.ZoneId,o.AppId,"app")})}openInsights(){window.open(window.$2sxc.http.apiUrl("sys/insights/help"),"_blank")}openSideNavPath(e){e.includes("registration")&&(e="registration");let o=this.#t.router;o.navigate([o.url.replace("system","")+e])}activatePageLog(e){return P(this,null,function*(){this.loading.set(!0),this.snackBar.open("Activating...");try{let o=yield this.#o.activatePageLog(this.pageLogDuration);this.snackBar.open(o,null,{duration:4e3}),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),e.resetForm()}catch(o){console.error("Error activating page log:",o),this.snackBar.open("Failed to activate page log",null,{duration:4e3})}finally{this.loading.set(!1)}})}static{this.\u0275fac=function(o){return new(o||a)(B(ee))}}static{this.\u0275cmp=R({type:a,selectors:[["app-system-info"]],decls:138,vars:17,consts:[["activateLogForm","ngForm"],["duration","ngModel"],[1,"eav-cards-box"],[1,"eav-card"],["mat-card-avatar",""],[1,"eav-card-header-avatar-icon"],[1,"eav-info-row"],[1,"eav-card-space-div"],["align","start"],[3,"link","label","icon"],["mat-button","",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],[1,"card-content-separator"],[3,"featureNameId","asInfo"],["href","https://2sxc.org/en/blog/post/using-2sxc-insights","target","_blank"],[1,"activate-log-form"],["color","accent",1,"eav-mat-form-field"],["matInput","","type","number","min","0","required","","name","Duration",3,"ngModelChange","pattern","ngModel","disabled"],["align","end"],["mat-raised-button","",1,"eav-action-button",3,"click","disabled"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],[1,"eav-info-row__value__span","eav-click",3,"click","tippy"],[1,"eav-info-row__link",3,"routerLink"],[1,"eav-info-row__link",3,"click","routerLink"],[3,"click","tippy"],[1,"eav-info-row__link",3,"href","target"],[3,"isError"],[1,"eav-info-row__label","eav-long"]],template:function(o,r){if(o&1){let s=h();t(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"div",4)(4,"mat-icon",5),n(5,"settings_applications"),i()(),t(6,"mat-card-title"),n(7,"Platform"),i(),t(8,"mat-card-subtitle"),n(9,"What you are running"),i()(),t(10,"mat-card-content"),M(11,We,7,4,"div",6,E),t(13,"h4"),n(14,"Global Settings"),i(),t(15,"p"),n(16,"This includes both pre-defined SystemSettings as well as custom Settings. It will affect the entire Installation."),i()(),c(17,"div",7),t(18,"mat-card-actions",8),c(19,"app-docs-link-helper",9),t(20,"button",10),S("click",function(){return f(s),_(r.openGlobalSettings())}),t(21,"mat-icon",11),n(22,"open_in_new"),i(),t(23,"span"),n(24,"Open Global Settings"),i()()()(),t(25,"mat-card",3)(26,"mat-card-header")(27,"div",4)(28,"mat-icon",5),n(29,"public"),i()(),t(30,"mat-card-title"),n(31,"This Site"),i(),t(32,"mat-card-subtitle"),n(33,"The current Site you're on"),i()(),t(34,"mat-card-content"),M(35,He,7,4,"div",6,E),c(37,"div",12),t(38,"h4"),n(39,"Site Settings"),i(),t(40,"p"),n(41,"This includes both pre-defined SystemSettings as well as custom Settings. It will affect the entire Site / Portal."),i()(),c(42,"div",7),t(43,"mat-card-actions",8),c(44,"app-docs-link-helper",9),t(45,"button",10),S("click",function(){return f(s),_(r.openSiteSettings())}),t(46,"mat-icon",11),n(47,"open_in_new"),i(),t(48,"span"),n(49,"Open Site Settings"),i()()()(),t(50,"mat-card",3)(51,"mat-card-header")(52,"div",4)(53,"mat-icon",5),n(54,"bolt"),i()(),t(55,"mat-card-title"),n(56,"Performance"),i(),t(57,"mat-card-subtitle"),n(58,"Performance Enhancements and Caching"),i()(),t(59,"mat-card-content"),c(60,"app-feature-text-info",13),u(61,Ze,2,0,"div"),i(),c(62,"div",7),t(63,"mat-card-actions",8),c(64,"app-docs-link-helper",9),i()(),t(65,"mat-card",3)(66,"mat-card-header")(67,"div",4)(68,"mat-icon",5),n(69,"local_police"),i()(),t(70,"mat-card-title"),n(71,"Security"),i(),t(72,"mat-card-subtitle"),n(73,"System Security Features"),i()(),t(74,"mat-card-content"),c(75,"app-feature-text-info",13),u(76,Ge,2,0,"div"),i(),c(77,"div",7),t(78,"mat-card-actions",8),c(79,"app-docs-link-helper",9),i()(),t(80,"mat-card",3)(81,"mat-card-header")(82,"div",4)(83,"mat-icon",5),n(84,"speed"),i()(),t(85,"mat-card-title"),n(86,"2sxc Insights"),i(),t(87,"mat-card-subtitle"),n(88,"See what's happening under the hood"),i()(),t(89,"mat-card-content")(90,"h4"),n(91,"2sxc Insights for Super Users"),i(),t(92,"p"),n(93," This is to access a special section to see what is really in the server memory. It's intended for extensive debugging - see also "),t(94,"a",14),n(95,"this blog post"),i(),n(96,". "),i(),t(97,"div",8),c(98,"app-docs-link-helper",9),t(99,"button",10),S("click",function(){return f(s),_(r.openInsights())}),t(100,"mat-icon",11),n(101,"open_in_new"),i(),t(102,"span"),n(103,"Open 2sxc Insights"),i()()(),c(104,"div",12),t(105,"h4"),n(106,"Activate Page Level Logging"),i(),t(107,"form",15,0)(109,"div"),n(110," This will place insights-logs in the HTML of the user output for users with "),t(111,"code"),n(112,"?debug=true"),i(),n(113," in the url. It can only be activated for short periods of time. "),i(),t(114,"mat-form-field",16)(115,"mat-label"),n(116,"Duration in Minutes"),i(),t(117,"input",17,1),Z("ngModelChange",function(b){return f(s),H(r.pageLogDuration,b)||(r.pageLogDuration=b),_(b)}),i()(),u(119,ze,1,1),i()(),c(120,"div",7),t(121,"mat-card-actions",18)(122,"button",19),S("click",function(){f(s);let b=I(108);return _(r.activatePageLog(b))}),n(123," Activate "),i()()(),t(124,"mat-card",3)(125,"mat-card-header")(126,"div",4)(127,"mat-icon",5),n(128),i()(),t(129,"mat-card-title"),n(130,"Warnings"),i(),t(131,"mat-card-subtitle"),n(132,"System and Code Warnings"),i()(),t(133,"mat-card-content"),M(134,Qe,7,4,"div",6,E),i(),c(136,"div",7),i()(),c(137,"router-outlet")}if(o&2){let s=I(108),v=I(118);l(11),T(r.systemInfos()),l(8),m("link","https://go.2sxc.org/settings"),l(16),T(r.siteInfos()),l(9),m("link","https://go.2sxc.org/settings"),l(16),m("featureNameId",r.LightSpeedOutputCache)("asInfo",!0),l(),g(r.lsEnabled()?61:-1),l(3),m("link","https://go.2sxc.org/lightspeed"),l(11),m("featureNameId",r.ContentSecurityPolicy)("asInfo",!0),l(),g(r.cspEnabled()?76:-1),l(3),m("link","https://go.2sxc.org/csp"),l(19),m("link","https://go.2sxc.org/insights"),l(19),m("pattern",r.positiveWholeNumber),U("ngModel",r.pageLogDuration),m("disabled",r.loading()),l(2),g(v.touched&&v.errors?119:-1),l(3),m("disabled",!s.valid),l(6),y(r.warningIcon()),l(6),T(r.warningInfos())}},dependencies:[we,he,be,ke,xe,Ie,Ce,ye,q,z,j,Y,X,ge,me,ae,ce,oe,re,pe,ue,de,se,le,Q,K,J,_e,fe,G,Te,Me,Se,Fe],encapsulation:2})}}return a})();export{Vt as SystemInfoComponent};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/system-info-4AKGTNPB.js.map
