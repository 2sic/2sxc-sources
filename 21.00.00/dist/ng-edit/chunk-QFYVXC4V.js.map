{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/shared/services/global-config.service.ts"],
  "sourcesContent": ["import { Injectable, computed, signal } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { toObservable } from '@angular/core/rxjs-interop';\r\nimport { keyDebug } from '../constants/session.constants';\r\n\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class GlobalConfigService {\r\n\r\n  private debugState = signal<GlobalConfig>(null);\r\n\r\n  isDebug = computed(() => !!this.debugState()?.allowDebugMode && !!this.debugState()?.debugEnabled);\r\n\r\n  /** This observable is a left-over, try to remove once more is refactored */\r\n  debugEnabled$ = toObservable(this.isDebug);\r\n\r\n  constructor(private snackBar: MatSnackBar) {\r\n    const initial: GlobalConfig = {\r\n      id: 0,\r\n      debugEnabled: sessionStorage.getItem(keyDebug) === 'true',\r\n      allowDebugMode: false,\r\n    };\r\n    this.debugState.set(initial);\r\n  }\r\n\r\n  allowDebug(allow: boolean): void {\r\n    const oldConfig = this.debugState();\r\n    if (oldConfig.allowDebugMode === allow)\r\n      return;\r\n\r\n    const newConfig: GlobalConfig = {\r\n      ...oldConfig,\r\n      allowDebugMode: allow,\r\n    };\r\n    this.debugState.set(newConfig);\r\n  }\r\n\r\n  toggleDebugEnabled(): void {\r\n    const oldConfig = this.debugState();\r\n    if (!oldConfig.allowDebugMode) {\r\n      this.snackBar.open('You do not have permissions to enter developer mode', null, { duration: 3000 });\r\n      return;\r\n    }\r\n\r\n    const newConfig: GlobalConfig = {\r\n      ...oldConfig,\r\n      debugEnabled: !oldConfig.debugEnabled,\r\n    };\r\n    this.debugState.set(newConfig);\r\n    this.snackBar.open(newConfig.debugEnabled ? 'developer mode on' : 'developer mode off', null, { duration: 3000 });\r\n  }\r\n}\r\n\r\ninterface GlobalConfig {\r\n  id: 0;\r\n  debugEnabled: boolean;\r\n  allowDebugMode: boolean;\r\n}\r\n"],
  "mappings": "mOAOA,IAAaA,GAAmB,IAAA,CAA1B,MAAOA,CAAmB,CAS9BC,YAAoBC,EAAqB,CAArB,KAAAA,SAAAA,EAPZ,KAAAC,WAAaC,EAAqB,IAAI,EAE9C,KAAAC,QAAUC,EAAS,IAAM,CAAC,CAAC,KAAKH,WAAU,GAAII,gBAAkB,CAAC,CAAC,KAAKJ,WAAU,GAAIK,YAAY,EAGjG,KAAAC,cAAgBC,EAAa,KAAKL,OAAO,EAGvC,IAAMM,EAAwB,CAC5BC,GAAI,EACJJ,aAAcK,eAAeC,QAAQC,CAAQ,IAAM,OACnDR,eAAgB,IAElB,KAAKJ,WAAWa,IAAIL,CAAO,CAC7B,CAEAM,WAAWC,EAAc,CACvB,IAAMC,EAAY,KAAKhB,WAAU,EACjC,GAAIgB,EAAUZ,iBAAmBW,EAC/B,OAEF,IAAME,EAA0BC,EAAAC,EAAA,GAC3BH,GAD2B,CAE9BZ,eAAgBW,IAElB,KAAKf,WAAWa,IAAII,CAAS,CAC/B,CAEAG,oBAAkB,CAChB,IAAMJ,EAAY,KAAKhB,WAAU,EACjC,GAAI,CAACgB,EAAUZ,eAAgB,CAC7B,KAAKL,SAASsB,KAAK,sDAAuD,KAAM,CAAEC,SAAU,GAAI,CAAE,EAClG,MACF,CAEA,IAAML,EAA0BC,EAAAC,EAAA,GAC3BH,GAD2B,CAE9BX,aAAc,CAACW,EAAUX,eAE3B,KAAKL,WAAWa,IAAII,CAAS,EAC7B,KAAKlB,SAASsB,KAAKJ,EAAUZ,aAAe,oBAAsB,qBAAsB,KAAM,CAAEiB,SAAU,GAAI,CAAE,CAClH,iDA3CWzB,GAAmB0B,EAAAC,CAAA,CAAA,CAAA,CAAA,iCAAnB3B,EAAmB4B,QAAnB5B,EAAmB6B,UAAAC,WADN,MAAM,CAAA,CAAA,SACnB9B,CAAmB,GAAA",
  "names": ["GlobalConfigService", "constructor", "snackBar", "debugState", "signal", "isDebug", "computed", "allowDebugMode", "debugEnabled", "debugEnabled$", "toObservable", "initial", "id", "sessionStorage", "getItem", "keyDebug", "set", "allowDebug", "allow", "oldConfig", "newConfig", "__spreadProps", "__spreadValues", "toggleDebugEnabled", "open", "duration", "\u0275\u0275inject", "MatSnackBar", "factory", "\u0275fac", "providedIn"]
}
