import{Da as x,Ib as A,Kc as j,Lc as l,Vb as N,Wb as L,Xb as R,db as E}from"./chunk-46QINP2S.js";import{a as m,b as D}from"./chunk-BDOJB7O2.js";function te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J(Object(n),!0).forEach(function(r){te(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function F(t,e){if(t==null)return{};var n=ne(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function z(t,e){return re(t)||ie(t,e)||oe(t,e)||se()}function re(t){if(Array.isArray(t))return t}function ie(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),c;!(r=(c=s.next()).done)&&(n.push(c.value),!(e&&n.length===e));r=!0);}catch(a){i=!0,o=a}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function oe(t,e){if(t){if(typeof t=="string")return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}}function V(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W(Object(n),!0).forEach(function(r){ae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ce(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,o){return o(i)},r)}}function g(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,c=new Array(s),a=0;a<s;a++)c[a]=arguments[a];return e.apply(n,[].concat(i,c))}}}function w(t){return{}.toString.call(t).includes("Object")}function ue(t){return!Object.keys(t).length}function h(t){return typeof t=="function"}function le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function de(t,e){return w(e)||f("changeType"),Object.keys(e).some(function(n){return!le(t,n)})&&f("changeField"),e}function fe(t){h(t)||f("selectorType")}function pe(t){h(t)||w(t)||f("handlerType"),w(t)&&Object.values(t).some(function(e){return!h(e)})&&f("handlersType")}function me(t){t||f("initialIsRequired"),w(t)||f("initialType"),ue(t)&&f("initialContent")}function ge(t,e){throw new Error(t[e]||t.default)}var he={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},f=g(ge)(he),O={changes:de,selector:fe,handler:pe,initial:me};function ve(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};O.initial(t),O.handler(e);var n={current:t},r=g(je)(n,e),i=g(ye)(n),o=g(O.changes)(t),s=g(be)(n);function c(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(b){return b};return O.selector(u),u(n.current)}function a(u){ce(r,i,o,s)(u)}return[c,a]}function be(t,e){return h(e)?e(t.current):e}function ye(t,e){return t.current=$($({},t.current),e),e}function je(t,e,n){return h(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var Oe={create:ve},q=Oe;var we={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},H=we;function Ce(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,c=new Array(s),a=0;a<s;a++)c[a]=arguments[a];return e.apply(n,[].concat(i,c))}}}var U=Ce;function Ie(t){return{}.toString.call(t).includes("Object")}var _=Ie;function Se(t){return t||k("configIsRequired"),_(t)||k("configType"),t.urls?(De(),{paths:{vs:t.urls.monacoBase}}):t}function De(){console.warn(Q.deprecation)}function Te(t,e){throw new Error(t[e]||t.default)}var Q={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},k=U(Te)(Q),Pe={config:Se},B=Pe;var Me=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(o,s){return s(o)},i)}},K=Me;function G(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],G(t[n],e[n]))}),T(T({},t),e)}var Z=G;var xe={type:"cancelation",msg:"operation is manually canceled"};function Ee(t){var e=!1,n=new Promise(function(r,i){t.then(function(o){return e?i(xe):r(o)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var C=Ee;var Ae=q.create({config:H,isInitialized:!1,resolve:null,reject:null,monaco:null}),Y=z(Ae,2),v=Y[0],I=Y[1];function Ne(t){var e=B.config(t),n=e.monaco,r=F(e,["monaco"]);I(function(i){return{config:Z(i.config,r),monaco:n}})}function Le(){var t=v(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if(I({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),C(P);if(window.monaco&&window.monaco.editor)return X(window.monaco),t.resolve(window.monaco),C(P);K(Re,Ve)(Fe)}return C(P)}function Re(t){return document.body.appendChild(t)}function Je(t){var e=document.createElement("script");return t&&(e.src=t),e}function Ve(t){var e=v(function(r){var i=r.config,o=r.reject;return{config:i,reject:o}}),n=Je("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function Fe(){var t=v(function(n){var r=n.config,i=n.resolve,o=n.reject;return{config:r,resolve:i,reject:o}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){X(n),t.resolve(n)},function(n){t.reject(n)})}function X(t){v().monaco||I({monaco:t})}function ze(){return v(function(t){var e=t.monaco;return e})}var P=new Promise(function(t,e){return I({resolve:t,reject:e})}),We={config:Ne,init:Le,__getMonacoInstance:ze},M=We;var d=t=>t;var $e="area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr".split(",").map(t=>t.trim().toLocaleLowerCase()),S=class{constructor(e,n,r,i,o,s,c){this.monaco=e,this.filename=n,this.snippets=s,this.tooltips=c,this.globalCache=this.createGlobalCache(e),this.defineThemes(this.globalCache,this.monaco),this.cachedValue=r,this.editorInstance=this.createInstance(this.monaco,n,r,i,o),this.completionItemProviders=this.addSnippets(this.monaco,this.editorInstance),this.resizeObserver=this.createResizeObserver(i,this.editorInstance),this.restoreState(this.globalCache,this.editorInstance),this.addEvents(this.editorInstance)}destroy(){this.saveState(this.globalCache,this.editorInstance),this.resizeObserver.disconnect(),this.completionItemProviders.forEach(e=>e.dispose()),this.jsTypingsLib?.dispose(),this.editorInstance.getModel().dispose(),this.editorInstance.dispose()}updateValue(e){this.cachedValue!==e&&(this.cachedValue=e,this.editorInstance.getModel().setValue(e))}focus(){this.editorInstance.focus()}onValueChange(e){this.valueChangedCallback=e}onFocus(e){this.focusedCallback=e}onBlur(e){this.blurredCallback=e}insertSnippet(e){this.editorInstance.getContribution("snippetController2").insert(e)}setSnippets(e){this.snippets=e}setTooltips(e){this.tooltips=e}setJsonSchema(e){let n=this.editorInstance.getModel().uri.toString(),r=this.monaco.languages.json.jsonDefaults.diagnosticsOptions,i=r.schemas?.some(c=>c.fileMatch[0]===n)??!1,o=e?.type==="link"?{uri:e.value,fileMatch:[n]}:e?.type==="raw"?{uri:n,fileMatch:[n],schema:JSON.parse(e.value)}:void 0;if(!i&&!o)return;let s=D(m({},r),{enableSchemaRequest:!0,schemas:i&&!o?r.schemas.filter(c=>c.fileMatch[0]!==n):i?r.schemas.map(c=>c.fileMatch[0]===n?o:c):[...r.schemas??[],o]});this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(s)}setJsonComments(e){if(!e)return;let n=D(m({},this.monaco.languages.json.jsonDefaults.diagnosticsOptions),{comments:e});this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(n)}setJsDiagnostics(e){if(!e)return;let n=m(m({},this.monaco.languages.typescript.javascriptDefaults.getDiagnosticsOptions()),e);this.monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions(n)}setJsTypings(e){if(!e){this.jsTypingsLib?.dispose();return}this.jsTypingsLib=this.monaco.languages.typescript.javascriptDefaults.addExtraLib(e,`js-typings-${this.filename}`)}createGlobalCache(e){if(e._2sxc==null){let n={themesAreDefined:!1,savedStates:{}};e._2sxc=n}return e._2sxc}defineThemes(e,n){e.themesAreDefined||(e.themesAreDefined=!0,n.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}],colors:{}}))}createInstance(e,n,r,i,o){let s=e.editor.create(i,o),c=e.Uri.file(n),a=e.editor.createModel(r,void 0,c);return s.setModel(a),s}saveState(e,n){let r=n.getModel().uri.toString(),i=JSON.stringify(n.saveViewState());e.savedStates[r]==null?e.savedStates[r]={viewState:i}:e.savedStates[r].viewState=i}restoreState(e,n){let r=n.getModel().uri.toString(),i=e.savedStates[r];if(i==null)return;let o=JSON.parse(i.viewState);n.restoreViewState(o)}addSnippets(e,n){return[e.languages.registerCompletionItemProvider(n.getModel().getLanguageId(),{triggerCharacters:[">"],provideCompletionItems:(i,o)=>{if(n.getModel()!==i)return{suggestions:[]};let s=i.getValueInRange({startLineNumber:o.lineNumber,startColumn:1,endLineNumber:o.lineNumber,endColumn:o.column});if(s[s.length-1]!==">")return{suggestions:[]};let a=s.lastIndexOf("<");if(a===-1)return{suggestions:[]};let u=s.substring(a),b=0;if(Array.from(u).forEach(ee=>{ee==='"'&&b++}),b%2!==0)return{suggestions:[]};if(u.startsWith("</"))return{suggestions:[]};if(u.indexOf(">")!==u.length-1)return{suggestions:[]};let y=u.indexOf(" ");if(y===-1&&(y=u.indexOf(">")),y===-1)return{suggestions:[]};let p=u.substring(1,y);return p?$e.includes(p.toLocaleLowerCase())?{suggestions:[]}:/[a-zA-Z0-9_-]/.test(p)?{suggestions:[{label:`</${p}>`,kind:e.languages.CompletionItemKind.Snippet,insertText:`$0</${p}>`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:o.lineNumber,endLineNumber:o.lineNumber,startColumn:o.column,endColumn:o.column}}]}:{suggestions:[]}:{suggestions:[]}}}),e.languages.registerCompletionItemProvider(n.getModel().getLanguageId(),{provideCompletionItems:(i,o)=>{if(this.snippets==null||n.getModel()!==i)return{suggestions:[]};let s=i.getWordUntilPosition(o);return{suggestions:this.snippets.map(a=>a.content?{label:a.name,kind:e.languages.CompletionItemKind.Snippet,documentation:`${a.title??""}
${a.help??""}
${a.links??""}`,insertText:a.content,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:o.lineNumber,endLineNumber:o.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn}}:void 0).filter(a=>!!a)}}}),e.languages.registerHoverProvider(n.getModel().getLanguageId(),{provideHover:(i,o)=>{if(this.tooltips==null||n.getModel()!==i)return;let s=i.getWordAtPosition(o);if(!s)return;let c=this.tooltips.find(a=>a.Term===s.word);if(c)return{contents:c.Help.map(a=>({value:a})),range:{startLineNumber:o.lineNumber,endLineNumber:o.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn}}}})]}createResizeObserver(e,n){let r=new ResizeObserver(()=>{n.layout()});return r.observe(e),r}addEvents(e){e.getModel().onDidChangeContent(()=>{let n=e.getModel().getValue();n!==this.cachedValue&&(this.cachedValue=n,this.valueChangedCallback?.(n))}),e.onDidFocusEditorWidget(()=>{this.focusedCallback?.()}),e.onDidBlurEditorWidget(()=>{this.blurredCallback?.()})}};var qe=["editor"],Tt=(()=>{class t{constructor(){this.filename=l(),this.value=l(),this.tooltips=l(),this.snippets=l(),this.options=l(),this.jsonSchema=l(),this.jsonComments=l(),this.jsTypings=l(),this.jsDiagnostics=l(),this.autoFocus=l(!1),this.valueChanged=j(),this.focused=j(),this.blurred=j()}ngAfterViewInit(){M.init().then(n=>{this.monaco=n,this.createEditor(this.autoFocus())})}ngOnChanges(n){n[d("filename")]!=null&&this.monacoInstance!=null&&(this.monacoInstance.destroy(),this.createEditor(!0)),n[d("value")]!=null&&this.monacoInstance?.updateValue(this.value()),n[d("jsonSchema")]!=null&&this.monacoInstance?.setJsonSchema(this.jsonSchema()),n[d("jsonComments")]!=null&&this.monacoInstance?.setJsonComments(this.jsonComments()),n[d("snippets")]!=null&&this.monacoInstance?.setSnippets(this.snippets()),n[d("tooltips")]!=null&&this.monacoInstance?.setTooltips(this.tooltips()),n[d("jsTypings")]!=null&&this.monacoInstance?.setJsTypings(this.jsTypings()),n[d("jsDiagnostics")]!=null&&this.monacoInstance?.setJsDiagnostics(this.jsDiagnostics())}insertSnippet(n){this.monacoInstance?.insertSnippet(n),this.monacoInstance?.focus()}ngOnDestroy(){this.monacoInstance?.destroy()}createEditor(n){this.monacoInstance=new S(this.monaco,this.filename(),this.value(),this.editorRef.nativeElement,this.options(),this.snippets(),this.tooltips()),this.monacoInstance.setJsonSchema(this.jsonSchema()),this.monacoInstance.setJsonComments(this.jsonComments()),this.monacoInstance.setJsTypings(this.jsTypings()),this.monacoInstance.setJsDiagnostics(this.jsDiagnostics()),this.monacoInstance.onValueChange(r=>{this.valueChanged.emit(r)}),this.monacoInstance.onFocus(()=>{this.focused.emit()}),this.monacoInstance.onBlur(()=>{this.blurred.emit()}),n&&this.monacoInstance.focus()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=E({type:t,selectors:[["app-monaco-editor"]],viewQuery:function(r,i){if(r&1&&N(qe,5),r&2){let o;L(o=R())&&(i.editorRef=o.first)}},inputs:{filename:[1,"filename"],value:[1,"value"],tooltips:[1,"tooltips"],snippets:[1,"snippets"],options:[1,"options"],jsonSchema:[1,"jsonSchema"],jsonComments:[1,"jsonComments"],jsTypings:[1,"jsTypings"],jsDiagnostics:[1,"jsDiagnostics"],autoFocus:[1,"autoFocus"]},outputs:{valueChanged:"valueChanged",focused:"focused",blurred:"blurred"},features:[x],decls:2,vars:0,consts:[["editor",""],[1,"editor"]],template:function(r,i){r&1&&A(0,"div",1,0)},styles:[`[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}.editor[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}
/*# sourceMappingURL=monaco-editor-SQQHKZUC.css.map */`]})}}return t})();export{Tt as a};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/chunk-XIWBIG4D.js.map
