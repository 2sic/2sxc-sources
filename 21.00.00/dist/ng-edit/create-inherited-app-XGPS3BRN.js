import{a as W}from"./chunk-MBSXBYF5.js";import{a as Q}from"./chunk-LOXR3JJX.js";import"./chunk-ENHI5GWA.js";import{a as J,c as K}from"./chunk-DAEXUMJT.js";import"./chunk-IGMB27B5.js";import{e as x,h as z}from"./chunk-ME7PJXWA.js";import"./chunk-GL2SUH6T.js";import"./chunk-3M22BTAM.js";import{c as w}from"./chunk-HCPBPEHV.js";import{f as E,h as N,l as D}from"./chunk-QVLOO535.js";import"./chunk-RPJBZPSB.js";import{d as G,f as R,g as q,h as O,j as H,l as V,n as j,o as P,v as U,w as $}from"./chunk-UMOPET3G.js";import{b as k,i as F,j as B}from"./chunk-4LV77BQU.js";import{b as S,c as _}from"./chunk-23CS2WID.js";import{a as A}from"./chunk-OIHIMR2W.js";import"./chunk-BDMUNOAA.js";import{d as y}from"./chunk-OYQCZWOE.js";import{b as L,g as T}from"./chunk-G33ZJSCE.js";import"./chunk-DX662RXJ.js";import"./chunk-N5GZ74QQ.js";import"./chunk-XASILSQS.js";import{Aa as c,Ab as v,Bb as C,Cb as p,Db as i,Eb as n,Fb as b,Ob as M,Pb as s,Sa as a,Za as d,db as h,ec as l,gc as I,wb as f,yb as u,zb as g}from"./chunk-46QINP2S.js";import"./chunk-BDOJB7O2.js";function Y(o,m){if(o&1&&(i(0,"mat-option",8),l(1),n()),o&2){let t=m.$implicit;p("value",t.Id),a(),I(" ",t.Name," ")}}function Z(o,m){o&1&&(i(0,"app-field-hint",9),l(1," Required "),n()),o&2&&p("isError",!0)}var Ae=(()=>{class o{constructor(t,r){this.dialog=t,this.snackBar=r,this.hostClass="dialog-component",this.appsListService=A(W),this.loading=c(!1),this.inheritableApps=this.appsListService.getInheritable().value,this.form=this.buildForm()}closeDialog(){this.dialog.close()}create(){this.form.disable(),this.loading.set(!0);let t=this.form.controls.inheritId.value,r=this.inheritableApps().find(e=>e.Id===t).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(r,t).subscribe({error:()=>{this.form.enable(),this.loading.set(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new O({inheritId:new H(null,[G.required])})}static{this.\u0275fac=function(r){return new(r||o)(d(L),d(w))}}static{this.\u0275cmp=h({type:o,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(r,e){r&2&&M("className",e.hostClass)},decls:22,vars:5,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click","disabled"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","inheritId",3,"placeholder"],[3,"value"],[3,"isError"],["align","end"],["type","button","mat-raised-button","",1,"eav-action-button",3,"click","disabled"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),l(3,"Create inherited App"),n(),i(4,"button",3),s("click",function(){return e.closeDialog()}),i(5,"mat-icon"),l(6,"close"),n()()(),i(7,"div",4),b(8,"router-outlet"),i(9,"p"),l(10," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),n(),i(11,"form",5)(12,"mat-form-field",6)(13,"mat-label"),l(14,"Inherit App"),n(),i(15,"mat-select",7),v(16,Y,2,2,"mat-option",8,g),n()(),f(18,Z,2,1,"app-field-hint",9),n()(),i(19,"mat-dialog-actions",10)(20,"button",11),s("click",function(){return e.create()}),l(21," Create "),n()()()),r&2&&(a(4),p("disabled",e.loading()),a(7),p("formGroup",e.form),a(4),p("placeholder",e.inheritableApps()===void 0?"Loading...":e.inheritableApps()===null||e.inheritableApps().length===0?"No inheritable apps found":""),a(),C(e.inheritableApps()),a(2),u(e.form.controls.inheritId.touched&&(e.form.controls.inheritId.errors!=null&&e.form.controls.inheritId.errors.required)?18:-1),a(2),p("disabled",e.loading()||!e.form.valid))},dependencies:[y,U,V,R,q,$,P,j,B,F,k,K,J,x,z,T,D,N,E,_,S,Q],encapsulation:2})}}return o})();export{Ae as CreateInheritedAppComponent};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/create-inherited-app-XGPS3BRN.js.map
