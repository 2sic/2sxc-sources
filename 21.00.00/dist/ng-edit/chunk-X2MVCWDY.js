import{e as m}from"./chunk-RAUQWANF.js";import{a as O}from"./chunk-3S44UA6M.js";import{b as B,d as R}from"./chunk-S7Y6G6OZ.js";import{a as k}from"./chunk-JZD2T5W2.js";import{a as M,b as _}from"./chunk-NKT65OQW.js";import{a as P}from"./chunk-ORK43FFD.js";import{f as C,l as E}from"./chunk-QVLOO535.js";import{c as I}from"./chunk-XREQECMQ.js";import{b as D,c as N}from"./chunk-23CS2WID.js";import{a as T}from"./chunk-OIHIMR2W.js";import{Cb as u,Db as t,Eb as i,Fb as y,Lc as b,Pb as v,Rb as S,Sa as s,ac as w,db as g,ec as e,fc as x,gc as h,wb as p,yb as c}from"./chunk-46QINP2S.js";import{a,b as r}from"./chunk-BDOJB7O2.js";function A(n,f){if(n&1&&(t(0,"mat-icon",1),e(1," person "),i()),n&2){let l=S();u("matBadge",l.data().permissions.length)}}function G(n,f){n&1&&(t(0,"mat-icon"),e(1,"person"),i())}function H(n,f){n&1&&(t(0,"p",2)(1,"mat-icon"),e(2,"warning"),i(),e(3," Warning: you don't have any permissions configured. So only Super-Users (Host) will be able to use the API endpoints. "),i())}var ne=(()=>{class n{constructor(){this.data=b(),this.#e=T(P),this.gridOptions=this.buildGridOptions()}#e;openPermissions(){this.#e.navRelative([k.getUrlContentType(this.data().permissionTarget)])}buildGridOptions(){return r(a({},O),{columnDefs:[a({},m.Id),r(a({},m.TextWide),{headerName:"Name",field:"Title"}),r(a({},m.TextWide),{field:"Identity"}),r(a({},m.TextWide),{field:"Condition"}),{field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline"}]})}static{this.\u0275fac=function(d){return new(d||n)}}static{this.\u0275cmp=g({type:n,selectors:[["app-dev-rest-tab-permissions"]],inputs:{data:[1,"data"]},decls:37,vars:10,consts:[["mat-icon-button","","tippy","Open permissions",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge"],[1,"warning","info-box"],[1,"ag-theme-material",3,"rowData","gridOptions"]],template:function(d,o){d&1&&(t(0,"h3"),e(1),i(),t(2,"p"),e(3," This target "),t(4,"code"),e(5),i(),e(6),t(7,"button",0),v("click",function(){return o.openPermissions()}),p(8,A,2,1,"mat-icon",1),p(9,G,2,0,"mat-icon"),i()(),p(10,H,4,0,"p",2),y(11,"ag-grid-angular",3),t(12,"h4"),e(13,"Super-Users (Host) can use all Endpoints"),i(),t(14,"p"),e(15,` As a super-user you can always access these REST endpoints, so this will make development easy. Just remember to change the content-type permissions when you publish your work to public pages.
`),i(),t(16,"h4"),e(17,"Set permissions for visitors to use this"),i(),t(18,"p"),e(19," To let JavaScript access the REST endpoints for normal users, you must set the permissions of the content-type. Usually you will just want to set it like "),t(20,"em"),e(21,"if user has view-permissions, let him read this content-type"),i(),e(22,". In rare cases (eg. JS based forms) you may also want to give it some write permissions. Just be careful. If you give write permissions, you will usually "),t(23,"em"),e(24,"only"),i(),e(25,` want to give create, but not edit.
`),i(),t(26,"h4"),e(27,"Setting permissions for use outside of DNN"),i(),t(28,"p"),e(29," When calling API endpoints from a DNN page you will usually use the "),t(30,"code"),e(31,"$2sxc"),i(),e(32,` or the DNN Services-Framework. These automatically add some HTTP-Headers (see tab about HTTP Headers) which let DNN determine that the API-Call was made on a specific page/module - and DNN uses this to check the permissions.
`),i(),t(33,"p"),e(34,` IF you are calling the endpoint from outside of DNN then these headers will be missing. Because of this, permissions saying "If has VIEW permissions, allow read" will fail - because DNN cannot determine if the user has view permissions.
`),i(),t(35,"p"),e(36,` So to enable use from external, the condition must be "If has ANONYMOUS permissions, allow ...". Because the ANONYMOUS check passes even if DNN doesn't know what page the module is on.
`),i()),d&2&&(s(),h("Permissions (",o.data().permissions.length,")"),s(4),x(o.data().name),s(),h(" has ",o.data().permissions.length," permissions configured. "),s(2),c(o.data().permissions.length?8:-1),s(),c(o.data().permissions.length?-1:9),s(),c(o.data().permissions.length?-1:10),s(),w("height",33+o.data().permissions.length*48+"px"),u("rowData",o.data().permissions)("gridOptions",o.gridOptions))},dependencies:[E,C,I,N,D,_,M,R,B],encapsulation:2})}}return n})();export{ne as a};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/chunk-X2MVCWDY.js.map
