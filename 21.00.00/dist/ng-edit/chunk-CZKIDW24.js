import{a as I}from"./chunk-JNRBLGLU.js";import{Ad as u,Ea as m,Gc as l,ea as c,u as o}from"./chunk-46QINP2S.js";import{a as r}from"./chunk-BDOJB7O2.js";var x="admin/AppFiles/AppFiles",A="admin/AppFiles/asset",F="admin/AppFiles/create",P="admin/ApiExplorer/inspect",g="admin/ApiExplorer/AppApiFiles",b="admin/AppFiles/GetTemplates",E="admin/AppFiles/preview",L=(()=>{class i extends I{get(t,e,p){return this.getHttpApiUrl(A,{params:r({appId:this.appId,global:e},this.templateIdOrPath(t,e,p))}).pipe(o(s=>{if(s.Type.toLocaleLowerCase()==="auto")switch(s.Extension.toLocaleLowerCase()){case".cs":case".cshtml":s.Type="Razor";break;case".html":case".css":case".js":s.Type="Token";break}return s}))}save(t,e,p,s){return this.http.post(this.apiUrl(A),p,{params:r({appId:this.appId,global:e},this.templateIdOrPath(t,e,s))})}getAllPromise(t){return this.fetchPromise(x,{params:r({appId:this.appId},t&&{mask:t})}).then(({Files:e})=>(e.forEach(p=>{p.Shared??=!1}),e))}getWebApis(){return this.getHttpApiUrl(g,{params:{appId:this.appId}}).pipe(o(({files:t})=>(t.forEach(e=>{e.isShared??=!1,e.isCompiled??=!1}),t))).pipe(o(t=>t.map(p=>{let s=p.path.lastIndexOf("/"),a=p.path.lastIndexOf("."),n=p.path.substring(0,s),d=p.path.substring(s+1,a);return{path:p.path,folder:n,name:d,isShared:p.isShared,endpointPath:p.endpointPath,isCompiled:p.isCompiled,edition:p.edition}})))}getWebApisLive(t){let e=u(()=>(t(),{url:this.apiUrl(g),params:{appId:this.appId}}));return l(()=>{let s=e.value()?.files;return s?(s.forEach(a=>{a.isShared??=!1,a.isCompiled??=!1}),s.map(a=>{let n=a.path.lastIndexOf("/"),d=a.path.lastIndexOf("."),h=a.path.substring(0,n),f=a.path.substring(n+1,d);return{path:a.path,folder:h,name:f,isShared:a.isShared,endpointPath:a.endpointPath,isCompiled:a.isCompiled,edition:a.edition}})):[]})}getWebApiDetails(t){return this.getHttpApiUrl(P,{params:{appId:this.appId,zoneId:this.zoneId,path:t}})}getPredefinedTemplates(t,e){return this.fetchPromise(b,{params:r(r({},t&&{purpose:t}),e&&{type:e})})}getPreview(t,e,p){return this.getHttpApiUrl(E,{params:{appId:this.appId,path:t,templateKey:p,global:e}})}create(t,e,p){return this.http.post(this.apiUrl(F),{},{params:{appId:this.appId,global:e,purpose:"auto",path:t,templateKey:p}})}templateIdOrPath(t,e,p){if(/^[0-9]*$/g.test(t)){let s=p.find(a=>a.EntityId?.toString()===t&&a.IsShared===e)?.Path;return r({templateId:t},s!=null&&{path:s})}else return{path:t}}static{this.\u0275fac=(()=>{let t;return function(p){return(t||(t=m(i)))(p||i)}})()}static{this.\u0275prov=c({token:i,factory:i.\u0275fac})}}return i})();export{L as a};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/chunk-CZKIDW24.js.map
