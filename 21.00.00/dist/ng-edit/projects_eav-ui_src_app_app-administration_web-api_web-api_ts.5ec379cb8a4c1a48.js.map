{"version":3,"file":"projects_eav-ui_src_app_app-administration_web-api_web-api_ts.5ec379cb8a4c1a48.js","mappings":"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","names":["GridWithHelpComponent","constructor","this","gridWrapper","viewChild","read","ElementRef","agGrid","contentChild","AgGridAngular","dialogAction","MatDialogActions","helpText","input","required","refresh","rowLength","DEFAULT_ROW_HEIGHT","GRID_HEADER_HEIGHT","HELP_CARD_BUFFER","effect","gridWrapperEl","nativeElement","untracked","#updateLayout","agGridEl","dialogActionEl","helpCard","querySelector","setTimeout","classList","toggle","style","flex","dimensions","#calculateDimensions","rowHeight","agGridHeight","sideNavEl","document","dialogEl","maxHeight","clientHeight","dialogHeaderHeight","dialogActionHeight","shouldHideHelp","helpCardHeight","wrapperHeight","offsetHeight","selectors","contentQueries","rf","ctx","dirIndex","i0","description","hint","_r1","ctx_r1","openCode","_r3","openRestApi","WebApiActionsComponent","router","route","agInit","params","enableCode","enableCodeGetter","onOpenCode","data","api","urlSegments","url","split","length","GoToDevRest","routeWebApi","push","encodeURIComponent","path","apiUrl","join","navigate","i1","decls","vars","consts","template","WebApiActionsComponent_Conditional_1_Template","WebApiActionsComponent_Conditional_2_Template","WebApiActionsComponent_ng_template_8_Template","menu_r4","MatRippleModule","i2","MatIconModule","i3","MatMenuModule","i4","TippyDirective","encapsulation","WebApiComponent","#dialogInNewWindowSvc","#sourceSvc","#helpTextConst","snackBar","matDialog","viewContainerRef","transient","DialogInNewWindowService","SourceService","signal","webApis","getWebApisLive","gridOptions","buildGridOptions","dialogConfigSvc","DialogConfigAppService","empty","content","uxHelpText","computed","ngOnInit","getCurrent$","subscribe","settings","Context","Enable","CodeEditor","createController","global","open","CreateFileDialogComponent","autoFocus","folder","purpose","width","afterClosed","result","name","endsWith","fileName","substring","lastIndexOf","test","duration","create","templateKey","update","v","openCodeFile","isShared","defaultGridOptions","columnDefs","ColumnDefinitions","ItemsText","headerName","field","minWidth","TextWideMin100","sort","TextWide","Boolean2","cellRenderer","TrueFalseComponent","ActionsPinnedRight6","cellRendererParams","tmp_3_0","menu_r2","SxcGridModule","MatButtonModule","i5","i6","RouterOutlet"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.html","./projects/eav-ui/src/app/app-administration/web-api/web-api-actions/web-api-actions.html","./projects/eav-ui/src/app/app-administration/web-api/web-api-actions/web-api-actions.ts","./projects/eav-ui/src/app/app-administration/web-api/web-api.ts","./projects/eav-ui/src/app/app-administration/web-api/web-api.html"],"sourcesContent":["import { AgGridAngular } from '@ag-grid-community/angular';\r\nimport { Component, contentChild, effect, ElementRef, input, untracked, viewChild } from '@angular/core';\r\nimport { MatDialogActions } from '@angular/material/dialog';\r\n\r\nexport interface HelpTextConst {\r\n  empty: GridWithHelpInput;\r\n  content: GridWithHelpInput;\r\n}\r\n\r\nexport interface GridWithHelpInput {\r\n  description: string;\r\n  hint: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-grid-with-help',\r\n  imports: [],\r\n  templateUrl: './grid-with-help.html',\r\n  styleUrl: './grid-with-help.scss'\r\n})\r\nexport class GridWithHelpComponent {\r\n  // ViewChild and ContentChild references - Access to DOM elements\r\n  gridWrapper = viewChild(\"gridWrapper\", { read: ElementRef });\r\n  agGrid = contentChild(AgGridAngular, { read: ElementRef });\r\n  dialogAction = contentChild(MatDialogActions, { read: ElementRef });\r\n\r\n  // Input properties - Required data from parent component\r\n  readonly helpText = input.required<GridWithHelpInput>({});\r\n  readonly refresh = input.required<number>();\r\n  readonly rowLength = input.required<number>();\r\n\r\n  // Constants - Fixed values for layout calculations\r\n  readonly DEFAULT_ROW_HEIGHT = 47; // Default height for AG Grid rows in pixels\r\n  readonly GRID_HEADER_HEIGHT = 64; // Height of AG Grid header in pixels\r\n  readonly HELP_CARD_BUFFER = 12;   // Additional buffer space for help card in pixels\r\n\r\n\r\n  // ag-row-even\r\n\r\n  constructor() {\r\n    // Effect that reacts to changes in refresh and rowLength signals\r\n    effect(() => {\r\n      const refresh = this.refresh();\r\n      const rowLength = this.rowLength();\r\n      const gridWrapperEl = this.gridWrapper()?.nativeElement;\r\n\r\n      // Early return if grid wrapper element is not available\r\n      if (!gridWrapperEl) return;\r\n\r\n      // Untracked execution to prevent unnecessary effect re-runs during layout updates\r\n      untracked(() => this.#updateLayout(gridWrapperEl, rowLength));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main layout update method - Handles the dynamic sizing and positioning of grid and help card\r\n   * @param gridWrapperEl - The main container element\r\n   * @param rowLength - Number of rows in the grid\r\n   */\r\n  #updateLayout(gridWrapperEl: HTMLElement, rowLength: number): void {\r\n    // Get references to essential DOM elements\r\n    const agGridEl = this.agGrid()?.nativeElement;\r\n    const dialogActionEl = this.dialogAction()?.nativeElement;\r\n    const helpCard = gridWrapperEl.querySelector('.help-info-card') as HTMLElement;\r\n\r\n    setTimeout(() => {\r\n      helpCard.classList.toggle('center-center', rowLength === 0);\r\n\r\n      // Early return if critical elements are missing\r\n      if (!agGridEl || !dialogActionEl) return;\r\n\r\n      helpCard.style.flex = \"\";\r\n\r\n      // Calculate all necessary dimensions for layout\r\n      const dimensions = this.#calculateDimensions(gridWrapperEl, agGridEl, dialogActionEl, helpCard, rowLength);\r\n\r\n      // Set AG Grid height based on row count and maximum height to prevent overflow\r\n      agGridEl.style.flex = dimensions.rowHeight ? `0 0 ${dimensions.agGridHeight}px` : '0px';\r\n\r\n      // Outer Container for max Size\r\n      const sideNavEl = document.querySelector<HTMLElement>('.mat-sidenav-content'); // with SideNav (settings)\r\n      const dialogEl = document.querySelector<HTMLElement>('.mat-mdc-dialog-container'); // only Dialog (Content)\r\n\r\n      const hasNavComponentWrapper = !!document.querySelector<HTMLElement>('.nav-component-wrapper'); // Check, if sideNav Dialog or Single Dialog \r\n      const outerContainer = hasNavComponentWrapper ? dialogEl : sideNavEl;\r\n\r\n      const maxHeight = outerContainer.clientHeight - dimensions.dialogHeaderHeight - dimensions.dialogActionHeight - 2;\r\n\r\n      agGridEl.style.maxHeight = `${maxHeight}px`;\r\n\r\n      // Determine if help card should be hidden when content exceeds available space\r\n      const shouldHideHelp = dimensions.helpCardHeight + dimensions.agGridHeight + dimensions.dialogActionHeight + dimensions.dialogHeaderHeight > dimensions.wrapperHeight;\r\n\r\n      helpCard.style.flex = \"1 1 auto\";\r\n      // Remove Help card from layout if it should be hidden\r\n      helpCard?.classList.toggle('hidden-help-info-card', shouldHideHelp);\r\n    }, 0);\r\n\r\n  }\r\n\r\n  // Calculate dimensions for AG Grid and help card based on current layout\r\n  #calculateDimensions(gridWrapperEl: HTMLElement, agGridEl: HTMLElement, dialogActionEl: HTMLElement, helpCard: HTMLElement, rowLength: number) {\r\n    const rowHeight = agGridEl.querySelector('.ag-row')?.clientHeight ?? this.DEFAULT_ROW_HEIGHT;\r\n    const agGridHeight = this.GRID_HEADER_HEIGHT + (rowLength * rowHeight);\r\n    const helpCardHeight = helpCard.clientHeight + this.HELP_CARD_BUFFER;\r\n    const dialogActionHeight = dialogActionEl.offsetHeight;\r\n    const dialogHeaderHeight = gridWrapperEl.querySelector('.eav-dialog-header')?.clientHeight ?? 0;\r\n    // Get total available wrapper height\r\n    const wrapperHeight = gridWrapperEl.offsetHeight;\r\n    return {\r\n      rowHeight,\r\n      agGridHeight,\r\n      helpCardHeight,\r\n      dialogActionHeight,\r\n      dialogHeaderHeight,\r\n      wrapperHeight\r\n    };\r\n  }\r\n}\r\n","<div class=\"grid-wrapper-dynamic\" #gridWrapper>\r\n  <ng-content select=\"[eav-dialog-header]\"></ng-content>\r\n  <ng-content select=\"[eav-dialog-content]\"> </ng-content>\r\n  <ng-content select=\"ag-grid-angular\"></ng-content>\r\n  <div class=\"help-info-card\">\r\n    <div class=\"help-info-card-text\">\r\n      <span [innerHTML]=\"helpText().description\"></span>\r\n      <span [innerHTML]=\"helpText().hint\"></span>\r\n    </div>\r\n  </div>\r\n  <ng-content select=\"mat-dialog-actions\"></ng-content>\r\n</div>\r\n","<div class=\"actions-component\">\r\n  @if (enableCode) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Code\" (click)=\"openCode()\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  }\r\n  @if (!enableCode) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  }\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"openRestApi()\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { GoToDevRest } from '../../../dev-rest/go-to-dev-rest';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { WebApi } from '../../models/web-api.model';\r\nimport { WebApiActionsParams } from './web-api-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-web-api-actions',\r\n    templateUrl: './web-api-actions.html',\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        MatMenuModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class WebApiActionsComponent implements ICellRendererAngularComp {\r\n  enableCode: boolean;\r\n  private params: ICellRendererParams & WebApiActionsParams;\r\n\r\n  constructor(private router: Router, private route: ActivatedRoute) { }\r\n\r\n\r\n  agInit(params: ICellRendererParams & WebApiActionsParams): void {\r\n    this.params = params;\r\n    this.enableCode = this.params.enableCodeGetter();\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode(): void {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenCode(api);\r\n  }\r\n\r\n  openRestApi(): void {\r\n    const api: WebApi = this.params.data;\r\n    // Get the current URL and split it into segments\r\n    const urlSegments = this.router.url.split('/');\r\n    // Replace the last segment with the GoToDevRest.routeWebApi (restapiwebapi)\r\n    urlSegments[urlSegments.length - 1] = GoToDevRest.routeWebApi;\r\n    // Add the path of the api to the url segments\r\n    urlSegments.push(encodeURIComponent(api.path));\r\n    // Join the segments back together to form the new URL\r\n    const apiUrl = urlSegments.join('/');\r\n\r\n    this.router.navigate([apiUrl]);\r\n\r\n    // this.params.onOpenRestApi(api);\r\n  }\r\n}\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog, MatDialogActions } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from '../../../../../core';\r\nimport { SourceService } from '../../code-editor/services/source.service';\r\nimport { CreateFileDialogComponent, CreateFileDialogData, CreateFileDialogResult } from '../../create-file-dialog';\r\nimport { TrueFalseComponent } from '../../dev-rest/api/true-false/true-false';\r\nimport { ColumnDefinitions } from '../../shared/ag-grid/column-definitions';\r\nimport { GridWithHelpComponent, HelpTextConst } from '../../shared/ag-grid/grid-with-help/grid-with-help';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogInNewWindowService } from '../../shared/routing/dialog-in-new-window.service';\r\nimport { WebApi } from '../models/web-api.model';\r\nimport { DialogConfigAppService } from '../services/dialog-config-app.service';\r\nimport { WebApiActionsComponent } from './web-api-actions/web-api-actions';\r\nimport { WebApiActionsParams } from './web-api-actions/web-api-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-web-api',\r\n  templateUrl: './web-api.html',\r\n  imports: [\r\n    SxcGridModule,\r\n    MatDialogActions,\r\n    MatButtonModule,\r\n    MatMenuModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    GridWithHelpComponent,\r\n  ]\r\n})\r\nexport class WebApiComponent implements OnInit {\r\n\r\n  #dialogInNewWindowSvc = transient(DialogInNewWindowService);\r\n  #sourceSvc = transient(SourceService);\r\n\r\n  enableCode!: boolean;\r\n  refresh = signal(0);\r\n  webApis = this.#sourceSvc.getWebApisLive(this.refresh)\r\n\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private dialogConfigSvc = transient(DialogConfigAppService);\r\n\r\n  // UI Help Text for the UX Help Info Card\r\n  #helpTextConst: HelpTextConst = {\r\n    empty: {\r\n      description: '<p><b>This is where you manage Web APIs</b><br>They are custom C# code which do anything you want.</p>',\r\n      hint: \"<p>WebApi Controllers are listed automatically. <br>Click the (+) in the bottom right corner to create your first Web API from a template file.</p>\"\r\n    },\r\n    content: {\r\n      description: '<p><b>This is where you manage Web APIs</b><br>They are custom C# code which do anything you want.</p>',\r\n      hint: ''\r\n    }\r\n  };\r\n\r\n  uxHelpText = computed(() => {\r\n    const data = this.webApis();\r\n    return data?.length === 0 ? this.#helpTextConst.empty : this.#helpTextConst.content;\r\n  })\r\n\r\n  constructor(\r\n    private snackBar: MatSnackBar,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.dialogConfigSvc.getCurrent$().subscribe(settings => {\r\n      this.enableCode = settings.Context.Enable.CodeEditor;\r\n    });\r\n\r\n  }\r\n\r\n  createController(global?: boolean): void {\r\n    // This FileLocationDialogComponent dialog is currently never going to be opened because it has been replaced by mat-menu\r\n    // in the web-api.component.html template. If you want to use the dialog instead of the menu, you need to remove the\r\n    // mat-menu and replace it with a button that opens the dialog with empty parameters.\r\n    // Dialog has been replaced by menu because from update to Angular 16 CreateFileDialogComponent wasn't opening anymore if\r\n    // FileLocationDialogComponent dialog was used.\r\n    // if (global == null) {\r\n    //   const fileLocationDialogRef = this.dialog.open(FileLocationDialogComponent, {\r\n    //     autoFocus: false,\r\n    //     viewContainerRef: this.viewContainerRef,\r\n    //     width: '650px',\r\n    //   });\r\n    //   fileLocationDialogRef.afterClosed().subscribe((isShared?: boolean) => {\r\n    //     if (isShared == null) return;\r\n    //     this.createController(isShared);\r\n    //   });\r\n    //   return;\r\n    // }\r\n\r\n    const createFileDialogData: CreateFileDialogData = {\r\n      folder: 'api',\r\n      global,\r\n      purpose: 'Api',\r\n    };\r\n    const createFileDialogRef = this.matDialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data: createFileDialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    createFileDialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) return;\r\n\r\n      if (result.name.endsWith('Controller.cs')) {\r\n        const fileName = result.name.substring(result.name.lastIndexOf('/') + 1);\r\n        if (!/^[A-Z][a-zA-Z0-9]*Controller\\.cs$/g.test(fileName)) {\r\n          const message = `\"${fileName}\" is invalid controller name. Should be something like \"MyController.cs\"`;\r\n          this.snackBar.open(message, null, { duration: 5000 });\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.snackBar.open('Saving...');\r\n      this.#sourceSvc.create(result.name, global, result.templateKey).subscribe(() => {\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n        this.refresh.update(v => ++v);\r\n      });\r\n    });\r\n  }\r\n\r\n  private enableCodeGetter() {\r\n    return this.enableCode;\r\n  }\r\n\r\n  private openCode(api: WebApi) {\r\n    this.#dialogInNewWindowSvc.openCodeFile(api.path, api.isShared);\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.ItemsText,\r\n          headerName: 'Endpoint',\r\n          field: 'endpointPath',\r\n          flex: 2,\r\n          minWidth: 250,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWideMin100,\r\n          headerName: 'Edition',\r\n          field: 'edition',\r\n          sort: 'asc',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWideMin100,\r\n          headerName: 'Folder',\r\n          field: 'folder',\r\n          sort: 'asc',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Name',\r\n          field: 'name',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.Boolean2,\r\n          headerName: 'Compiled',\r\n          field: 'isCompiled',\r\n          cellRenderer: TrueFalseComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight6,\r\n          cellRenderer: WebApiActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: WebApiActionsParams = {\r\n              enableCodeGetter: () => this.enableCodeGetter(),\r\n              onOpenCode: (api) => this.openCode(api),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<app-grid-with-help [helpText]=\"uxHelpText()\" [refresh]=\"refresh()\" [rowLength]=\"webApis()?.length\">\r\n  <ag-grid-angular\r\n    class=\"ag-theme-material\"\r\n    [rowData]=\"webApis()\"\r\n    [gridOptions]=\"gridOptions\"\r\n  ></ag-grid-angular>\r\n  <mat-dialog-actions align=\"end\">\r\n    <button mat-fab mat-elevation-z24 [matMenuTriggerFor]=\"menu\" class=\"grid-fab\" tippy=\"Create a new controller\" tippyPlacement=\"left\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <button mat-menu-item (click)=\"createController(false)\">\r\n        <span>App</span>\r\n      </button>\r\n      <button mat-menu-item (click)=\"createController(true)\">\r\n        <span>Shared (global)</span>\r\n      </button>\r\n    </mat-menu>\r\n  </mat-dialog-actions>\r\n</app-grid-with-help>\r\n<router-outlet></router-outlet>\r\n"],"x_google_ignoreList":[]}