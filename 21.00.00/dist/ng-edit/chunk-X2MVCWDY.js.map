{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/dev-rest/tab-permissions/tab-permissions.ts", "projects/eav-ui/src/app/dev-rest/tab-permissions/tab-permissions.html"],
  "sourcesContent": ["import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, input } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { DevRestBaseModel } from '..';\r\nimport { transient } from '../../../../../core';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { ColumnDefinitions } from '../../shared/ag-grid/column-definitions';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\n\r\n@Component({\r\n    selector: 'app-dev-rest-tab-permissions',\r\n    templateUrl: './tab-permissions.html',\r\n    imports: [\r\n        MatButtonModule,\r\n        TippyDirective,\r\n        MatIconModule,\r\n        MatBadgeModule,\r\n        SxcGridModule,\r\n    ]\r\n})\r\nexport class DevRestTabPermissionsComponent {\r\n  data = input<DevRestBaseModel>();\r\n\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  openPermissions() {\r\n    this.#dialogRouter.navRelative([GoToPermissions.getUrlContentType(this.data().permissionTarget)]);\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.Id\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Name',\r\n          field: 'Title',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Identity',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Condition',\r\n        },\r\n        {\r\n          field: 'Grant',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-outline',\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n", "<h3>Permissions ({{ data().permissions.length }})</h3>\r\n<p>\r\n  This target <code>{{ data().name }}</code> has {{ data().permissions.length }} permissions\r\n  configured.\r\n  <button mat-icon-button tippy=\"Open permissions\" (click)=\"openPermissions()\">\r\n    @if (data().permissions.length) {\r\n      <mat-icon [matBadge]=\"data().permissions.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n        matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        person\r\n      </mat-icon>\r\n    }\r\n    @if (!data().permissions.length) {\r\n      <mat-icon>person</mat-icon>\r\n    }\r\n  </button>\r\n</p>\r\n@if (!data().permissions.length) {\r\n  <p class=\"warning info-box\">\r\n    <mat-icon>warning</mat-icon>\r\n    Warning: you don't have any permissions configured. So only Super-Users (Host) will be able to use the API\r\n    endpoints.\r\n  </p>\r\n}\r\n\r\n<ag-grid-angular class=\"ag-theme-material\" [rowData]=\"data().permissions\" [gridOptions]=\"gridOptions\"\r\n  [style.height]=\"(33 + data().permissions.length * 48) + 'px'\">\r\n</ag-grid-angular>\r\n\r\n<h4>Super-Users (Host) can use all Endpoints</h4>\r\n<p>\r\n  As a super-user you can always access these REST endpoints, so this will make development easy.\r\n  Just remember to change the content-type permissions when you publish your work to public pages.\r\n</p>\r\n\r\n<h4>Set permissions for visitors to use this</h4>\r\n<p>\r\n  To let JavaScript access the REST endpoints for normal users, you must set the permissions of the\r\n  content-type.\r\n  Usually you will just want to set it like <em>if user has view-permissions, let him read this\r\n    content-type</em>.\r\n  In rare cases (eg. JS based forms) you may also want to give it some write permissions. Just be careful.\r\n  If you give write permissions, you will usually <em>only</em> want to give create, but not edit.\r\n</p>\r\n\r\n<h4>Setting permissions for use outside of DNN</h4>\r\n<p>\r\n  When calling API endpoints from a DNN page you will usually use the <code>$2sxc</code> or the DNN\r\n  Services-Framework.\r\n  These automatically add some HTTP-Headers (see tab about HTTP Headers) which let DNN determine that the\r\n  API-Call\r\n  was made on a specific page/module - and DNN uses this to check the permissions.\r\n</p>\r\n<p>\r\n  IF you are calling the endpoint from outside of DNN then these headers will be missing.\r\n  Because of this, permissions saying \"If has VIEW permissions, allow read\" will fail - because DNN cannot\r\n  determine\r\n  if the user has view permissions.\r\n</p>\r\n<p>\r\n  So to enable use from external, the condition must be \"If has ANONYMOUS permissions, allow ...\".\r\n  Because the ANONYMOUS check passes even if DNN doesn't know what page the module is on.\r\n</p>\r\n"],
  "mappings": "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",
  "names": ["\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275elementEnd", "\u0275\u0275property", "ctx_r0", "data", "permissions", "length", "DevRestTabPermissionsComponent", "constructor", "input", "#dialogRouter", "transient", "DialogRoutingService", "gridOptions", "buildGridOptions", "openPermissions", "navRelative", "GoToPermissions", "getUrlContentType", "permissionTarget", "__spreadProps", "__spreadValues", "defaultGridOptions", "columnDefs", "ColumnDefinitions", "Id", "TextWide", "headerName", "field", "width", "headerClass", "cellClass", "selectors", "inputs", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275listener", "\u0275\u0275conditionalCreate", "DevRestTabPermissionsComponent_Conditional_8_Template", "DevRestTabPermissionsComponent_Conditional_9_Template", "DevRestTabPermissionsComponent_Conditional_10_Template", "\u0275\u0275element", "\u0275\u0275advance", "\u0275\u0275textInterpolate1", "\u0275\u0275textInterpolate", "name", "\u0275\u0275conditional", "\u0275\u0275styleProp", "MatButtonModule", "MatIconButton", "TippyDirective", "MatIconModule", "MatIcon", "MatBadgeModule", "MatBadge", "SxcGridModule", "AgGridAngular", "encapsulation"]
}
