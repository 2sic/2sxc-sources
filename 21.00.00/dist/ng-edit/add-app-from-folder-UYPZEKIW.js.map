{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/apps-management/add-app-from-folder/app-name-show/app-name-show.ts", "projects/eav-ui/src/app/apps-management/add-app-from-folder/app-name-show/app-name-show.html", "projects/eav-ui/src/app/apps-management/add-app-from-folder/checkbox-cell/checkbox-cell.ts", "projects/eav-ui/src/app/apps-management/add-app-from-folder/checkbox-cell/checkbox-cell.html", "projects/eav-ui/src/app/apps-management/add-app-from-folder/add-app-from-folder.ts", "projects/eav-ui/src/app/apps-management/add-app-from-folder/add-app-from-folder.html"],
  "sourcesContent": ["import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { IdFieldParams } from '../../../shared/components/id-field/id-field.models';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n    selector: 'app-app-name-show',\r\n    templateUrl: './app-name-show.html',\r\n    styleUrls: ['./app-name-show.scss'],\r\n    imports: [MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class AppNameShowComponent implements ICellRendererAngularComp {\r\n  name: string;\r\n  tooltip: string;\r\n\r\n  agInit(params: ICellRendererParams & IdFieldParams): void {\r\n    this.name = params.value;\r\n    this.tooltip = params.tooltipGetter(params.data);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n", "<div class=\"name-box\">\r\n  <span>{{ name }}</span>\r\n  <mat-icon class=\"info-icon\" [tippy]=\"tooltip\">info</mat-icon>\r\n</div>", "import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { CheckboxCellParams } from './checkbox-cell.model';\r\n\r\n@Component({\r\n  selector: 'app-checkbox-cell',\r\n  templateUrl: './checkbox-cell.html',\r\n  styleUrls: ['./checkbox-cell.scss'],\r\n})\r\nexport class CheckboxCellComponent implements ICellRendererAngularComp {\r\n  params: ICellRendererParams & CheckboxCellParams;\r\n\r\n  agInit(params: ICellRendererParams & CheckboxCellParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  public onChange(event: any) {\r\n    this.params.onChange(this.params.data, event.currentTarget.checked);\r\n  }\r\n}\r\n", "<div class=\"checkbox-box\">\r\n  <input class=\"checkbox-input\" type=\"checkbox\" [disabled]=\"params.isDisabled\" [checked]=\"params.value\" (change)=\"onChange($event)\">\r\n</div>\r\n", "import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, HostBinding, WritableSignal, inject } from \"@angular/core\";\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialogActions, MatDialogRef } from \"@angular/material/dialog\";\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { transient } from '../../../../../core';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { FeatureTextInfoComponent } from '../../features/feature-text-info/feature-text-info';\r\nimport { FeaturesService } from '../../features/features.service';\r\nimport { ColumnDefinitions } from '../../shared/ag-grid/column-definitions';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from \"../../shared/constants/default-grid-options.constants\";\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { PendingApp } from \"../models/app.model\";\r\nimport { AppsListService } from \"../services/apps-list.service\";\r\nimport { AppNameShowComponent } from './app-name-show/app-name-show';\r\nimport { CheckboxCellComponent } from './checkbox-cell/checkbox-cell';\r\nimport { CheckboxCellParams } from './checkbox-cell/checkbox-cell.model';\r\n\r\n@Component({\r\n  selector: 'app-add-app-from-folder',\r\n  templateUrl: './add-app-from-folder.html',\r\n  styleUrls: ['./add-app-from-folder.scss'],\r\n  imports: [\r\n    MatDialogActions,\r\n    MatButtonModule,\r\n    FeatureTextInfoComponent,\r\n    SxcGridModule,\r\n  ]\r\n})\r\nexport class AddAppFromFolderComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  gridOptions = this.buildGridOptions();\r\n  installing: boolean = false;\r\n\r\n  public features = inject(FeaturesService);\r\n  #isAddFromFolderEnabled = this.features.isEnabled[FeatureNames.AppSyncWithSiteFiles];\r\n  #appsListService = transient(AppsListService);\r\n\r\n  AppSyncWithSiteFiles = FeatureNames.AppSyncWithSiteFiles;\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<AddAppFromFolderComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) { }\r\n\r\n  pendingApps = this.#appsListService.getPendingApps().value as WritableSignal<PendingApp[]>;\r\n\r\n  closeDialog(): void {\r\n    this.dialog.close();\r\n  }\r\n\r\n  onChange(app: PendingApp, enabled: boolean) {\r\n    const pendingAppsTemp = this.pendingApps();\r\n\r\n    if (enabled)\r\n      pendingAppsTemp.push(app);\r\n    else\r\n      pendingAppsTemp.splice(pendingAppsTemp.indexOf(app), 1);\r\n\r\n    this.pendingApps.set(pendingAppsTemp);\r\n  }\r\n\r\n  install(): void {\r\n    this.installing = true;\r\n    this.snackBar.open('Installing', undefined, { duration: 2000 });\r\n    this.#appsListService.installPendingApps(this.pendingApps()).subscribe({\r\n      error: () => {\r\n        this.installing = false;\r\n        this.snackBar.open('Failed to install app. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.installing = false;\r\n        this.snackBar.open('Installed app', undefined, { duration: 2000 });\r\n        this.closeDialog();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          field: '',\r\n          width: 40,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          cellRenderer: CheckboxCellComponent,\r\n          cellRendererParams: (() => {\r\n            const params: CheckboxCellParams = {\r\n              isDisabled: !this.#isAddFromFolderEnabled(),\r\n              onChange: (app, enabled) => this.onChange(app, enabled),\r\n            };\r\n            return params;\r\n          }),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ItemsText,\r\n          field: 'Name',\r\n          flex: 1,\r\n          sort: 'asc',\r\n          cellRenderer: AppNameShowComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<PendingApp> = {\r\n              tooltipGetter: (pendingApp) => `Server folder: ${pendingApp.ServerFolder}\\nFolder: ${pendingApp.Folder}\\nVersion: ${pendingApp.Version}\\nDescription: ${pendingApp.Description}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ]\r\n    }\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\n", "<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Add App from Folder</div>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <app-feature-text-info [featureNameId]=\"AppSyncWithSiteFiles\"></app-feature-text-info>\r\n    <p>\r\n      Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet.\r\n    </p>\r\n    @if (pendingApps()?.length == 0) {\r\n    <p>\r\n      Nothing to show. All apps in the 2sxc folder are already installed.\r\n    </p>\r\n    }\r\n    @if (pendingApps()?.length > 0) {\r\n    <div>\r\n      <ag-grid-angular class=\"ag-theme-material eav-grid\" [rowData]=\"pendingApps()\" [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    </div>\r\n    }\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    <button type=\"button\" mat-raised-button (click)=\"closeDialog()\">\r\n      Cancel\r\n    </button>\r\n    <button type=\"button\" mat-raised-button class=\"eav-action-button\" [disabled]=\"pendingApps().length === 0 || installing\"\r\n      (click)=\"install()\">\r\n      Install\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>\r\n"],
  "mappings": "g8CAeA,IAAaA,GAAoB,IAAA,CAA3B,MAAOA,CAAoB,CAI/BC,OAAOC,EAA2C,CAChD,KAAKC,KAAOD,EAAOE,MACnB,KAAKC,QAAUH,EAAOI,cAAcJ,EAAOK,IAAI,CACjD,CAEAC,QAAQN,EAAY,CAClB,MAAO,EACT,iDAXWF,EAAoB,CAAA,+BAApBA,EAAoBS,UAAA,CAAA,CAAA,mBAAA,CAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,EAAA,UAAA,EAAA,CAAA,EAAA,YAAA,EAAA,OAAA,CAAA,EAAAC,SAAA,SAAAC,EAAAC,EAAA,CAAAD,EAAA,ICfjCE,EAAA,EAAA,MAAA,CAAA,EAAsB,EAAA,MAAA,EACdC,EAAA,CAAA,EAAUC,EAAA,EAChBF,EAAA,EAAA,WAAA,CAAA,EAA8CC,EAAA,EAAA,MAAA,EAAIC,EAAA,EAAW,SADvDC,EAAA,CAAA,EAAAC,EAAAL,EAAAZ,IAAA,EACsBgB,EAAA,EAAAE,EAAA,QAAAN,EAAAV,OAAA,kBDShBiB,EAAaC,EACnBC,CAAc,EAAAC,OAAA,CAAA;uDAAA,CAAA,CAAA,CAAA,SAGTzB,CAAoB,GAAA,EELjC,IAAa0B,GAAqB,IAAA,CAA5B,MAAOA,CAAqB,CAGhCC,OAAOC,EAAgD,CACrD,KAAKA,OAASA,CAChB,CAEAC,QAAQD,EAAY,CAClB,MAAO,EACT,CAEOE,SAASC,EAAU,CACxB,KAAKH,OAAOE,SAAS,KAAKF,OAAOI,KAAMD,EAAME,cAAcC,OAAO,CACpE,iDAbWR,EAAqB,CAAA,+BAArBA,EAAqBS,UAAA,CAAA,CAAA,mBAAA,CAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,EAAA,cAAA,EAAA,CAAA,OAAA,WAAA,EAAA,iBAAA,EAAA,SAAA,WAAA,SAAA,CAAA,EAAAC,SAAA,SAAAC,EAAAC,EAAA,CAAAD,EAAA,ICVlCE,EAAA,EAAA,MAAA,CAAA,EAA0B,EAAA,QAAA,CAAA,EAC8EC,EAAA,SAAA,SAAAC,EAAA,CAAA,OAAUH,EAAAX,SAAAc,CAAA,CAAgB,CAAA,EAAhIC,EAAA,EAAkI,SAApFC,EAAA,EAAAC,EAAA,WAAAN,EAAAb,OAAAoB,UAAA,EAA8B,UAAAP,EAAAb,OAAAqB,KAAA;mEDSjEvB,CAAqB,GAAA,wBGA9BwB,EAAA,EAAA,GAAA,EACEC,EAAA,EAAA,uEAAA,EACFC,EAAA,4BAGAF,EAAA,EAAA,KAAA,EACEG,EAAA,EAAA,kBAAA,CAAA,EAEFD,EAAA,kBAFsDE,EAAA,EAAAC,EAAA,UAAAC,EAAAC,YAAA,CAAA,EAAyB,cAAAD,EAAAE,WAAA,GDcnF,IAAaC,IAAyB,IAAA,CAAhC,MAAOA,CAAyB,CAOpCC,GACAC,GAIAC,YACUC,EACAC,EAAqB,CADrB,KAAAD,OAAAA,EACA,KAAAC,SAAAA,EAbgB,KAAAC,UAAY,mBAEtC,KAAAP,YAAc,KAAKQ,iBAAgB,EACnC,KAAAC,WAAsB,GAEf,KAAAC,SAAWC,EAAOC,CAAe,EACxC,KAAAV,GAA0B,KAAKQ,SAASG,UAAUC,EAAaC,oBAAoB,EACnF,KAAAZ,GAAmBa,EAAUC,CAAe,EAE5C,KAAAF,qBAAuBD,EAAaC,qBAOpC,KAAAhB,YAAc,KAAKI,GAAiBe,eAAc,EAAGC,KAFjD,CAIJC,aAAW,CACT,KAAKf,OAAOgB,MAAK,CACnB,CAEAC,SAASC,EAAiBC,EAAgB,CACxC,IAAMC,EAAkB,KAAK1B,YAAW,EAEpCyB,EACFC,EAAgBC,KAAKH,CAAG,EAExBE,EAAgBE,OAAOF,EAAgBG,QAAQL,CAAG,EAAG,CAAC,EAExD,KAAKxB,YAAY8B,IAAIJ,CAAe,CACtC,CAEAK,SAAO,CACL,KAAKrB,WAAa,GAClB,KAAKH,SAASyB,KAAK,aAAcC,OAAW,CAAEC,SAAU,GAAI,CAAE,EAC9D,KAAK9B,GAAiB+B,mBAAmB,KAAKnC,YAAW,CAAE,EAAEoC,UAAU,CACrEC,MAAOA,IAAK,CACV,KAAK3B,WAAa,GAClB,KAAKH,SAASyB,KAAK,mEAAoEC,OAAW,CAAEC,SAAU,GAAI,CAAE,CACtH,EACAI,KAAMA,IAAK,CACT,KAAK5B,WAAa,GAClB,KAAKH,SAASyB,KAAK,gBAAiBC,OAAW,CAAEC,SAAU,GAAI,CAAE,EACjE,KAAKb,YAAW,CAClB,EACD,CACH,CAEQZ,kBAAgB,CAiCtB,OAhCiC8B,EAAAC,EAAA,GAC5BC,GAD4B,CAE/BC,WAAY,CACV,CACEC,MAAO,GACPC,MAAO,GACPC,UAAW,aACXC,SAAU,GACVC,aAAcC,EACdC,mBAAqBA,KACgB,CACjCC,WAAY,CAAC,KAAK/C,GAAuB,EACzCoB,SAAUA,CAACC,EAAKC,IAAY,KAAKF,SAASC,EAAKC,CAAO,KAK5Dc,EAAAC,EAAA,GACKW,EAAkBC,WADvB,CAEET,MAAO,OACPU,KAAM,EACNC,KAAM,MACNP,aAAcQ,EACdN,mBAC4C,CACxCO,cAAgBC,GAAe,kBAAkBA,EAAWC,YAAY;UAAaD,EAAWE,MAAM;WAAcF,EAAWG,OAAO;eAAkBH,EAAWI,WAAW,KAInL,GAIP,iDApFW3D,GAAyB4D,EAAAC,CAAA,EAAAD,EAAAE,CAAA,CAAA,CAAA,CAAA,+BAAzB9D,EAAyB+D,UAAA,CAAA,CAAA,yBAAA,CAAA,EAAAC,SAAA,EAAAC,aAAA,SAAAC,EAAAC,EAAA,CAAAD,EAAA,GAAzBE,EAAA,YAAAD,EAAA7D,SAAA,qYC9Bbf,EAAA,EAAA,MAAA,CAAA,EAAwB,EAAA,MAAA,CAAA,EACS,EAAA,MAAA,CAAA,EACSC,EAAA,EAAA,qBAAA,EAAmBC,EAAA,EAAM,EAEjEF,EAAA,EAAA,MAAA,CAAA,EACEG,EAAA,EAAA,wBAAA,CAAA,EACAH,EAAA,EAAA,GAAA,EACEC,EAAA,EAAA,yGAAA,EACFC,EAAA,EACA4E,EAAA,EAAAC,EAAA,EAAA,EAAA,GAAA,EAKAD,EAAA,EAAAE,EAAA,EAAA,EAAA,KAAA,EAMF9E,EAAA,EACAF,EAAA,GAAA,qBAAA,CAAA,EAAgC,GAAA,SAAA,CAAA,EACUiF,EAAA,QAAA,UAAA,CAAA,OAASL,EAAAhD,YAAA,CAAa,CAAA,EAC5D3B,EAAA,GAAA,UAAA,EACFC,EAAA,EACAF,EAAA,GAAA,SAAA,CAAA,EACEiF,EAAA,QAAA,UAAA,CAAA,OAASL,EAAAtC,QAAA,CAAS,CAAA,EAClBrC,EAAA,GAAA,WAAA,EACFC,EAAA,EAAS,EACU,gBAxBIE,EAAA,CAAA,EAAAC,EAAA,gBAAAuE,EAAArD,oBAAA,EAIvBnB,EAAA,CAAA,EAAA8E,IAAAC,EAAAP,EAAArE,YAAA,IAAA,KAAA,KAAA4E,EAAAC,SAAA,EAAA,EAAA,EAAA,EAKAhF,EAAA,EAAA8E,IAAAG,EAAAT,EAAArE,YAAA,IAAA,KAAA,KAAA8E,EAAAD,QAAA,EAAA,EAAA,EAAA,EAWkEhF,EAAA,CAAA,EAAAC,EAAA,WAAAuE,EAAArE,YAAA,EAAA6E,SAAA,GAAAR,EAAA3D,UAAA,kBDDlEqE,EACAC,EAAeC,EACfC,EACAC,EAAaC,CAAA,EAAAC,OAAA,CAAA;6DAAA,CAAA,CAAA,CAAA,SAGJnF,CAAyB,GAAA",
  "names": ["AppNameShowComponent", "agInit", "params", "name", "value", "tooltip", "tooltipGetter", "data", "refresh", "selectors", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275elementEnd", "\u0275\u0275advance", "\u0275\u0275textInterpolate", "\u0275\u0275property", "MatIconModule", "MatIcon", "TippyDirective", "styles", "CheckboxCellComponent", "agInit", "params", "refresh", "onChange", "event", "data", "currentTarget", "checked", "selectors", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275domElementStart", "\u0275\u0275domListener", "$event", "\u0275\u0275domElementEnd", "\u0275\u0275advance", "\u0275\u0275domProperty", "isDisabled", "value", "\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275elementEnd", "\u0275\u0275element", "\u0275\u0275advance", "\u0275\u0275property", "ctx_r0", "pendingApps", "gridOptions", "AddAppFromFolderComponent", "#isAddFromFolderEnabled", "#appsListService", "constructor", "dialog", "snackBar", "hostClass", "buildGridOptions", "installing", "features", "inject", "FeaturesService", "isEnabled", "FeatureNames", "AppSyncWithSiteFiles", "transient", "AppsListService", "getPendingApps", "value", "closeDialog", "close", "onChange", "app", "enabled", "pendingAppsTemp", "push", "splice", "indexOf", "set", "install", "open", "undefined", "duration", "installPendingApps", "subscribe", "error", "next", "__spreadProps", "__spreadValues", "defaultGridOptions", "columnDefs", "field", "width", "cellClass", "sortable", "cellRenderer", "CheckboxCellComponent", "cellRendererParams", "isDisabled", "ColumnDefinitions", "ItemsText", "flex", "sort", "AppNameShowComponent", "tooltipGetter", "pendingApp", "ServerFolder", "Folder", "Version", "Description", "\u0275\u0275directiveInject", "MatDialogRef", "MatSnackBar", "selectors", "hostVars", "hostBindings", "rf", "ctx", "\u0275\u0275domProperty", "\u0275\u0275conditionalCreate", "AddAppFromFolderComponent_Conditional_8_Template", "AddAppFromFolderComponent_Conditional_9_Template", "\u0275\u0275listener", "\u0275\u0275conditional", "tmp_1_0", "length", "tmp_2_0", "MatDialogActions", "MatButtonModule", "MatButton", "FeatureTextInfoComponent", "SxcGridModule", "AgGridAngular", "styles"]
}
