import{a as I}from"./chunk-DDUEZMYJ.js";import{a as r}from"./chunk-QUYVM733.js";import{d as y}from"./chunk-ENHI5GWA.js";import{Ea as h,Gc as c,ea as u}from"./chunk-46QINP2S.js";import{a as p}from"./chunk-BDOJB7O2.js";function f(s){return{[r.Boolean]:"toggle_on",[r.Custom]:"extension",[r.DateTime]:"today",[r.Empty]:"crop_free",[r.Entity]:"share",[r.Hyperlink]:"link",[r.Number]:"dialpad",[r.String]:"text_fields"}[s]??"device_unknown"}function n(s){return{[r.Boolean]:"Boolean (yes/no)",[r.Custom]:"Custom - ui-tools or custom types",[r.DateTime]:"Date and/or time",[r.Empty]:"Empty - for form-titles etc.",[r.Entity]:"Entity (other content-items)",[r.Hyperlink]:"Link / file reference",[r.Number]:"Number",[r.String]:"Text / string"}[s]??"device_unknown"}var b={Boolean:{label:n(r.Boolean),description:"Yes/no or true/false values"},Custom:{label:n(r.Custom),description:"Use for things like gps-pickers (which writes into multiple fields) or for custom-data which serializes something exotic into the db like an array, a custom json or anything"},DateTime:{label:n(r.DateTime),description:"For date, time or combined values"},Empty:{label:n(r.Empty),description:"Use to structure your form"},Entity:{label:n(r.Entity),description:"One or more other content-items"},Hyperlink:{label:n(r.Hyperlink),description:"Hyperlink or reference to a picture / file"},Number:{label:n(r.Number),description:"Any kind of number"},String:{label:n(r.String),description:"Any kind of text"}};function T(s){let m=[];for(let t of s)m.push({name:t,label:b[t].label,icon:f(t),description:b[t].description});return m}var g="admin/field/all",M="admin/field/DataTypes",v="admin/field/ReservedNames",R="admin/field/AddInheritedField",k="admin/field/InputTypes",N="admin/field/InputType",U="admin/field/Share",x="admin/field/Inherit",F="admin/field/Sort",E=I+"SetTitle",L="admin/field/Rename",O="admin/field/Delete",C="admin/field/Add",A="admin/field/GetSharedFields",H="admin/field/GetAncestors",B="admin/field/GetDescendants",W=(()=>{class s extends y{paramsAppId(t={}){return{params:p({appid:this.appId},t)}}dataTypes(){let t=this.newHttpResource(()=>({url:this.apiUrl(M),params:this.paramsAppId().params}));return{value:c(()=>{let i=t.value();return i?T(i):[]}),loading:t.isLoading,error:t.error}}getInputTypes(){let t=this.newHttpResource(()=>({url:this.apiUrl(k),params:this.paramsAppId().params})),e=a=>({dataType:a.Type.substring(0,a.Type.indexOf("-")),inputType:a.Type,label:a.Label,description:a.Description,isDefault:a.IsDefault,isObsolete:a.IsObsolete,isRecommended:a.IsRecommended,obsoleteMessage:a.ObsoleteMessage,icon:a.IsDefault?"stars":a.IsRecommended?"star":null,sort:(a.IsObsolete?"z":a.IsDefault?"a":a.IsRecommended?"b":"c")+a.Label});return{value:c(()=>t.value()?.map(e).sort((a,o)=>a.sort.localeCompare(o.sort))||[]),loading:t.isLoading,error:t.error}}getReservedNames(){return this.newHttpResource(()=>({url:this.apiUrl(v)}))}getFieldsLive(t,e){let i=this.newHttpResource(()=>(t(),{url:this.apiUrl(g),params:this.paramsAppId({staticName:e}).params})).value;return c(()=>{let o=i()||[];for(let d of o){if(!d.Metadata)continue;let l=d.Metadata,S=l.All,D=l[d.Type],w=l[d.InputType];l.merged=p(p(p({},S),D),w)}return o})}getFieldsPromise(t){return this.fetchPromise(g,this.paramsAppId({staticName:t})).then(e=>{if(e)for(let i of e){if(!i.Metadata)continue;let a=i.Metadata,o=a.All,d=a[i.Type],l=a[i.InputType];a.merged=p(p(p({},o),d),l)}return e})}getShareableFieldsPromise(){return this.fetchPromise(A,{params:this.paramsAppId().params})}getShareableFieldsFor(t){return this.#t(A,t)}getAncestors(t){return this.#t(H,t)}getDescendants(t){return this.#t(B,t)}#t(t,e){return this.fetchPromise(t,{params:this.paramsAppId({attributeId:e}).params})}addInheritedField(t,e,i,a){return this.http.post(this.apiUrl(R),null,this.paramsAppId({contentTypeId:t.toString(),sourceType:e,sourceField:i,name:a}))}share(t,e=!0){return this.http.post(this.apiUrl(U),null,{params:{appid:this.appId,attributeId:t.toString(),share:e}})}inherit(t,e){return this.http.post(this.apiUrl(x),null,{params:{appid:this.appId,attributeId:t.toString(),inheritMetadataOf:e}})}reOrder(t,e){return this.http.post(this.apiUrl(F),null,{params:{appid:this.appId,contentTypeId:e.Id.toString(),order:JSON.stringify(t)}})}setTitle(t,e){return this.http.post(this.apiUrl(E),null,{params:{appid:this.appId,contentTypeId:e.Id.toString(),attributeId:t.Id.toString()}})}rename(t,e,i){return this.http.post(this.apiUrl(L),null,{params:{appid:this.appId,contentTypeId:e.toString(),attributeId:t.toString(),newName:i}})}delete(t,e){if(t.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(O),{params:{appid:this.appId,contentTypeId:e.Id.toString(),attributeId:t.Id.toString()}})}add(t,e){return this.http.post(this.apiUrl(C),null,{params:{AppId:this.appId,ContentTypeId:e.toString(),Id:t.Id.toString(),Type:t.Type,InputType:t.InputType,StaticName:t.StaticName,IsTitle:t.IsTitle.toString(),Index:t.SortOrder.toString()}})}updateInputType(t,e,i){return this.http.post(this.apiUrl(N),null,{params:{appId:this.appId,attributeId:t,field:e,inputType:i}})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=h(s)))(i||s)}})()}static{this.\u0275prov=u({token:s,factory:s.\u0275fac})}}return s})();export{f as a,n as b,g as c,W as d};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/chunk-ZRGOAEF3.js.map
