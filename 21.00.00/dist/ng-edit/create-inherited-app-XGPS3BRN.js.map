{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/apps-management/create-inherited-app/create-inherited-app.ts", "projects/eav-ui/src/app/apps-management/create-inherited-app/create-inherited-app.html"],
  "sourcesContent": ["import { Component, HostBinding, signal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from '../../../../../core';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint';\r\nimport { AppsListService } from '../services/apps-list.service';\r\n\r\n@Component({\r\n  selector: 'app-create-inherited-app',\r\n  templateUrl: './create-inherited-app.html',\r\n  imports: [\r\n    RouterOutlet,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatDialogActions,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    FieldHintComponent\r\n  ]\r\n})\r\nexport class CreateInheritedAppComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n\r\n  private appsListService = transient(AppsListService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<CreateInheritedAppComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.form = this.buildForm();\r\n  }\r\n\r\n  loading = signal<boolean>(false);\r\n  inheritableApps = this.appsListService.getInheritable().value;\r\n\r\n  closeDialog(): void {\r\n    this.dialog.close();\r\n  }\r\n\r\n  create(): void {\r\n    this.form.disable();\r\n    this.loading.set(true);\r\n    const inheritId = this.form.controls.inheritId.value;\r\n    // TODO:: remove after test\r\n    // const name = this.inheritableApps$.value.find(app => app.Id === inheritId).Name;\r\n    const name = this.inheritableApps().find(app => app.Id === inheritId).Name;\r\n    this.snackBar.open('Creating inherited app...');\r\n    this.appsListService.create(name, inheritId).subscribe({\r\n      error: () => {\r\n        this.form.enable();\r\n        this.loading.set(false);\r\n\r\n        this.snackBar.open('Failed to create inherited app. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.form.enable();\r\n        this.snackBar.open('Created inherited app', undefined, { duration: 2000 });\r\n        this.closeDialog();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildForm(): UntypedFormGroup {\r\n    const form = new UntypedFormGroup({\r\n      inheritId: new UntypedFormControl(null, [Validators.required]),\r\n    });\r\n    return form;\r\n  }\r\n}\r\n", "<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Create inherited App</div>\r\n    <button\r\n      mat-icon-button\r\n      tippy=\"Close dialog\"\r\n      [disabled]=\"loading()\"\r\n      (click)=\"closeDialog()\"\r\n    >\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <router-outlet></router-outlet>\r\n    <p>\r\n      Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were\r\n      specifically\r\n      marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the\r\n      App you expect, make sure that has happened.\r\n    </p>\r\n    <form [formGroup]=\"form\">\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Inherit App</mat-label>\r\n        <mat-select formControlName=\"inheritId\"\r\n          [placeholder]=\"inheritableApps() === undefined ? 'Loading...' : inheritableApps() === null || inheritableApps().length === 0 ? 'No inheritable apps found' : ''\">\r\n          @for (app of inheritableApps(); track app) {\r\n          <mat-option [value]=\"app.Id\">\r\n            {{ app.Name }}\r\n          </mat-option>\r\n          }\r\n        </mat-select>\r\n      </mat-form-field>\r\n      @if (form.controls.inheritId.touched && form.controls.inheritId.errors?.required) {\r\n      <app-field-hint [isError]=\"true\">\r\n        Required\r\n      </app-field-hint>\r\n      }\r\n    </form>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    <button type=\"button\"\r\n      mat-raised-button\r\n      class=\"eav-action-button\"\r\n      [disabled]=\"loading() || !form.valid\" (click)=\"create()\"\r\n    >\r\n      Create\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>\r\n"],
  "mappings": "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",
  "names": ["\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275elementEnd", "\u0275\u0275property", "app_r1", "Id", "\u0275\u0275advance", "\u0275\u0275textInterpolate1", "Name", "CreateInheritedAppComponent", "constructor", "dialog", "snackBar", "hostClass", "appsListService", "transient", "AppsListService", "loading", "signal", "inheritableApps", "getInheritable", "value", "form", "buildForm", "closeDialog", "close", "create", "disable", "set", "inheritId", "controls", "name", "find", "app", "open", "subscribe", "error", "enable", "undefined", "duration", "next", "UntypedFormGroup", "UntypedFormControl", "Validators", "required", "\u0275\u0275directiveInject", "MatDialogRef", "MatSnackBar", "selectors", "hostVars", "hostBindings", "rf", "ctx", "\u0275\u0275domProperty", "\u0275\u0275listener", "\u0275\u0275element", "\u0275\u0275repeaterCreate", "CreateInheritedAppComponent_For_17_Template", "\u0275\u0275repeaterTrackByIdentity", "\u0275\u0275conditionalCreate", "CreateInheritedAppComponent_Conditional_18_Template", "length", "\u0275\u0275repeater", "\u0275\u0275conditional", "touched", "errors", "valid", "RouterOutlet", "FormsModule", "\u0275NgNoValidate", "NgControlStatus", "NgControlStatusGroup", "ReactiveFormsModule", "FormGroupDirective", "FormControlName", "MatFormFieldModule", "MatFormField", "MatLabel", "MatSelectModule", "MatSelect", "MatOption", "MatOptionModule", "MatDialogActions", "MatButtonModule", "MatButton", "MatIconButton", "MatIconModule", "MatIcon", "FieldHintComponent", "encapsulation"]
}
