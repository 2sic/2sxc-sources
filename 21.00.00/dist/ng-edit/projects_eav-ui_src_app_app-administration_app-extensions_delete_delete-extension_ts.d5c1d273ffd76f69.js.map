{"version":3,"file":"projects_eav-ui_src_app_app-administration_app-extensions_delete_delete-extension_ts.d5c1d273ffd76f69.js","mappings":"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","names":["i0","$event","_r1","ctx_r1","withData","totalLocalEntities","_r3","forceDelete","DeleteExtensionComponent","#snackBar","#extensionsSvc","constructor","route","dialogData","dialog","this","inject","MatSnackBar","transient","AppExtensionsService","extensionFolder","snapshot","paramMap","get","edition","queryParamMap","preflightResult","preflightExtension","value","computed","result","data","contentTypes","map","ct","localEntities","reduce","sum","n","mustForceDelete","inspect","fileSummary","summary","filesChanged","changed","added","missing","files","some","f","path","endsWith","status","foundLock","askForce","showError","ngOnInit","#watchKeyboardShortcuts","keydownEvents","subscribe","event","isCtrlEnter","preventDefault","deleteAndClose","closeDialog","confirm","dismiss","close","executeDelete","message","open","duration","force","deleteExtension","next","error","err","exceptionMessage","msg","i1","MAT_DIALOG_DATA","i2","selectors","decls","vars","consts","template","rf","ctx","DeleteExtensionComponent_Conditional_14_Template","DeleteExtensionComponent_Conditional_15_Template","MatButtonModule","i3","MatIconModule","i4","MatDialogActions","SaveCloseButtonFabComponent","MatSlideToggleModule","i5","FormsModule","i6","MatExpansionModule","i7","InspectExtensionComponent","TippyDirective","styles","HttpServiceBase","log","classLog","getAllLive","refresh","newHttpResource","url","apiUrl","params","appId","method","getAll","http","updateConfiguration","name","config","configJson","JSON","parse","post","zoneId","downloadExtension","folder","URLSearchParams","toString","window","installRemoteExtension","editions","overwrite","body","installPreflightExtensionFromUrl","uploadExtensions","file","formData","FormData","append","pipe","success","Success","Messages","MessageType","Text","installPreflightExtension","forEach","delete","__ngFactoryType__","factory","ɵfac"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/app-extensions/delete/delete-extension.html","./projects/eav-ui/src/app/app-administration/app-extensions/delete/delete-extension.ts","./projects/eav-ui/src/app/app-administration/app-extensions/app-extensions.service.ts"],"sourcesContent":["<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Delete {{ extensionFolder }}</div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"eav-dialog-content\">\r\n    <!-- Show Details / Stats etc. -->\r\n    <mat-accordion>\r\n      <mat-expansion-panel [expanded]=\"true\">\r\n        <mat-expansion-panel-header>\r\n          <mat-panel-title>Extension Details</mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <app-inspect-extension [data]=\"preflightResult()\" />\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n\r\n    <!-- Show special warnings if necessary -->\r\n    @if (totalLocalEntities() > 0) {\r\n      <p>\r\n        Caution: This app has {{ totalLocalEntities() }} local entities\r\n        which were created using content-types of this extension.\r\n        You may want to also delete these entities.\r\n      </p>\r\n      <p>\r\n        <mat-slide-toggle [(ngModel)]=\"withData\">\r\n          With Data\r\n        </mat-slide-toggle>\r\n      </p>\r\n    }\r\n    @if (mustForceDelete()) {\r\n      <mat-slide-toggle [(ngModel)]=\"forceDelete\">\r\n        Force Delete\r\n      </mat-slide-toggle>\r\n    }\r\n  </div>\r\n\r\n  <mat-dialog-actions align=\"end\">\r\n    <app-save-close-button-fab\r\n      icon=\"delete\"\r\n      [label]=\"'Delete and close (ctrl + enter)'\"\r\n      (action)=\"deleteAndClose()\"\r\n    />\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { Component, computed, inject, Inject, OnInit } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MAT_DIALOG_DATA, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { transient } from 'projects/core';\r\nimport { isCtrlEnter } from '../../../edit/dialog/main/keyboard-shortcuts';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { SaveCloseButtonFabComponent } from '../../../shared/modules/save-close-button-fab/save-close-button-fab';\r\nimport { ConfirmDeleteDialogComponent } from '../../sub-dialogs/confirm-delete-dialog/confirm-delete-dialog';\r\nimport { ConfirmDeleteDialogData } from '../../sub-dialogs/confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { AppExtensionsService } from '../app-extensions.service';\r\nimport { InspectExtensionComponent } from '../inspect/inspect-extension-content';\r\n\r\n@Component({\r\n  templateUrl: './delete-extension.html',\r\n  styleUrls: ['./delete-extension.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatDialogActions,\r\n    SaveCloseButtonFabComponent,\r\n    MatSlideToggleModule,\r\n    FormsModule,\r\n    MatExpansionModule,\r\n    InspectExtensionComponent,\r\n    TippyDirective,\r\n  ]\r\n})\r\nexport class DeleteExtensionComponent implements OnInit {\r\n  #snackBar = inject(MatSnackBar);\r\n  #extensionsSvc = transient(AppExtensionsService);\r\n\r\n  extensionFolder = this.route.snapshot.paramMap.get('extension') as 'extension';\r\n  edition = this.route.snapshot.queryParamMap.get('edition') || '';\r\n  withData = false;\r\n  forceDelete = false;\r\n\r\n  preflightResult = this.#extensionsSvc.preflightExtension(this.extensionFolder, this.edition).value;\r\n  totalLocalEntities = computed(() => {\r\n    const result = this.preflightResult();\r\n    if (!result?.data?.contentTypes) return 0;\r\n\r\n    return result.data.contentTypes\r\n      .map(ct => ct.localEntities)\r\n      .reduce((sum, n) => sum + n, 0);\r\n  });\r\n\r\n  mustForceDelete = computed((): boolean => {\r\n    const inspect = this.preflightResult()\r\n    if (!inspect) return false;\r\n\r\n    const fileSummary = inspect.summary;\r\n    const filesChanged = fileSummary.changed + fileSummary.added + fileSummary.missing;\r\n\r\n    // 1) Installed?\r\n    const isInstalled = inspect.files.some(f =>\r\n      f.path.endsWith('App_Data/extension.json') && f.status !== 'missing'\r\n    );\r\n\r\n    // If not installed → auto-force-delete\r\n    if (!isInstalled) {\r\n      return true;\r\n    }\r\n\r\n    // 2) Lock file must exist\r\n    if (!inspect.foundLock) {\r\n      this.showError('Missing extension.lock.json. Deletion not allowed.');\r\n      return true;\r\n    }\r\n\r\n    // 3) Changed / added / missing files?\r\n    if (filesChanged > 0) {\r\n      this.askForce(`The extension has file changes (${filesChanged}).`);\r\n      return true;\r\n    }\r\n\r\n    // 4) Existing local entities?\r\n    if (this.totalLocalEntities() > 0) {\r\n      this.askForce(`The extension has ${this.totalLocalEntities()} local entities.`);\r\n      return true;\r\n    }\r\n\r\n    // 5) All good → normal delete\r\n    return false;\r\n  });\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: ConfirmDeleteDialogData,\r\n    public dialog: MatDialogRef<ConfirmDeleteDialogComponent>,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.#watchKeyboardShortcuts();\r\n  }\r\n\r\n  #watchKeyboardShortcuts(): void {\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlEnter(event)) {\r\n        event.preventDefault();\r\n        this.deleteAndClose();\r\n      }\r\n    });\r\n  }\r\n\r\n  closeDialog(confirm?: boolean) {\r\n    this.#snackBar.dismiss();\r\n    confirm\r\n      ? this.dialog.close(confirm)\r\n      : this.dialog.close();\r\n  }\r\n\r\n  deleteAndClose() {\r\n    if (this.mustForceDelete() && !this.forceDelete) {\r\n      this.showError('Deletion requires force. Please enable \"Force Delete\" and try again.');\r\n      return;\r\n    }\r\n    this.executeDelete(this.forceDelete);\r\n  }\r\n\r\n  private askForce(message: string) {\r\n    this.#snackBar.open(\r\n      `${message}`,\r\n      '',\r\n      { duration: 10000 }\r\n    );\r\n  }\r\n\r\n  private executeDelete(force: boolean) {\r\n    this.#extensionsSvc\r\n      .deleteExtension(this.extensionFolder, this.edition, force, this.withData)\r\n      .subscribe({\r\n        next: () => {\r\n          this.#snackBar.open('Extension deleted successfully', 'OK', { duration: 3000 });\r\n          this.dialog.close(true);\r\n        },\r\n        error: err => {\r\n          const msg = err?.error?.exceptionMessage ?? 'Delete failed.';\r\n          this.showError(msg);\r\n        }\r\n      });\r\n  }\r\n\r\n  private showError(msg: string) {\r\n    this.#snackBar.open(msg, 'OK', { duration: 8000 });\r\n  }\r\n}\r\n","import { Injectable, Signal } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog/file-upload-dialog.models';\r\nimport { classLog } from '../../shared/logging';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { Extension, ExtensionInspectResult, ExtensionPreflightItem } from './extension.model';\r\n\r\n@Injectable()\r\nexport class AppExtensionsService extends HttpServiceBase {\r\n  log = classLog({ AppExtensionsService });\r\n\r\n  /** Get all extensions with live refresh capability */\r\n  getAllLive(refresh: Signal<unknown>) {\r\n    return this.newHttpResource<{ extensions: Extension[] }>(() => {\r\n      // Watch the refresh signal to trigger reloads\r\n      refresh();\r\n\r\n      return {\r\n        url: this.apiUrl('admin/appExtensions/extensions'),\r\n        params: { appId: this.appId },\r\n        method: 'GET',\r\n      };\r\n    });\r\n  }\r\n\r\n  getAll() {\r\n    return this.http.get<{ extensions: Extension[] }>(this.apiUrl('admin/appExtensions/extensions'), {\r\n      params: { appId: this.appId },\r\n    });\r\n  }\r\n\r\n  /** Update config (mutations still best done via HttpClient per Angular docs) */\r\n  updateConfiguration(name: string, config: string) {\r\n    // Parse the config to JsonElement format that the API expects\r\n    const configJson = JSON.parse(config);\r\n\r\n    return this.http.post<boolean>(this.apiUrl('admin/appExtensions/configuration'), configJson, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n        appId: this.appId,\r\n        name\r\n      },\r\n    });\r\n  }\r\n\r\n  /** Open download link for an extension */\r\n  downloadExtension(folder: string) {\r\n    const params = new URLSearchParams({\r\n      appId: this.appId,\r\n      zoneId: this.zoneId,\r\n      name: folder,\r\n    });\r\n    const url = `${this.apiUrl('admin/appExtensions/download')}?${params.toString()}`;\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  /** Install a remote extension by URL - v2: POST to .InstallFrom with url(s) in body */\r\n  installRemoteExtension(url: string, editions?: string, overwrite?: boolean) {\r\n    // Always use array of string (even if only one for now)\r\n    const body = [url];\r\n\r\n    const params: any = {\r\n      appId: this.appId,\r\n      zoneId: this.zoneId,\r\n      ...(editions ? { editions } : {}),\r\n      ...(overwrite ? { overwrite } : {})\r\n    };\r\n\r\n    return this.http.post<boolean>(\r\n      this.apiUrl('admin/appExtensions/InstallFrom'),\r\n      body,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  /** Preflight a remote extension by URL - v2: POST to .InstallPreflightFrom with url(s) in body */\r\n  installPreflightExtensionFromUrl(url: string, editions?: string) {\r\n    const body = [url];\r\n\r\n    const params: any = {\r\n      appId: this.appId,\r\n      ...(editions ? { editions } : {})\r\n    };\r\n\r\n    return this.http.post<{ extensions: ExtensionPreflightItem[] }>(\r\n      this.apiUrl('admin/appExtensions/InstallPreflightFrom'),\r\n      body,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  /** Uploads extension files (no change, still uses FormData) */\r\n  uploadExtensions(file: File, editions?: string, overwrite?: boolean) {\r\n    const formData = new FormData();\r\n    formData.append('files', file);\r\n\r\n    const params = {\r\n      appId: this.appId,\r\n      zoneId: this.zoneId,\r\n      ...(editions ? { editions } : {}),\r\n      ...(overwrite ? { overwrite } : {})\r\n    };\r\n\r\n    return this.http.post<boolean>(this.apiUrl('admin/appExtensions/install'), formData, {\r\n      params,\r\n    }).pipe(\r\n      map((success: boolean): FileUploadResult => ({\r\n        Success: success,\r\n        Messages: success\r\n          ? [{ MessageType: 1, Text: 'Extension uploaded successfully' }]\r\n          : [{ MessageType: 2, Text: 'Extension upload failed' }]\r\n      }))\r\n    );\r\n  }\r\n\r\n  /** Preflight file upload (no change, still uses FormData) */\r\n  installPreflightExtension(files: File[]) {\r\n    const formData = new FormData();\r\n    files.forEach(file => formData.append('files', file));\r\n\r\n    return this.http.post<{ extensions: ExtensionPreflightItem[] }>(\r\n      this.apiUrl('admin/appExtensions/installPreflight'),\r\n      formData,\r\n      {\r\n        params: {\r\n          appId: this.appId,\r\n          zoneId: this.zoneId\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  preflightExtension(name: string, edition?: string) {\r\n    const params: { appId: string, name: string, edition?: string } = {\r\n      appId: this.appId,\r\n      name,\r\n    };\r\n    if (edition) params.edition = edition;\r\n\r\n    return this.newHttpResource<ExtensionInspectResult>(() => ({\r\n      url: this.apiUrl('admin/appExtensions/inspect'),\r\n      params,\r\n      method: 'GET',\r\n    }));\r\n  }\r\n\r\n  deleteExtension(name: string, edition?: string, force = false, withData = false) {\r\n    const params = {\r\n      appId: this.appId,\r\n      name,\r\n      force,\r\n      withData,\r\n      ...(edition ? { edition: edition } : {})\r\n    };\r\n\r\n    return this.http.delete<boolean>(\r\n      this.apiUrl('admin/appExtensions/delete'),\r\n      { params }\r\n    );\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}