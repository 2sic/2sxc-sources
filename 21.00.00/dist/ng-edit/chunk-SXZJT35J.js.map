{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.ts", "projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.html"],
  "sourcesContent": ["import { AgGridAngular } from '@ag-grid-community/angular';\r\nimport { Component, contentChild, effect, ElementRef, input, untracked, viewChild } from '@angular/core';\r\nimport { MatDialogActions } from '@angular/material/dialog';\r\n\r\nexport interface HelpTextConst {\r\n  empty: GridWithHelpInput;\r\n  content: GridWithHelpInput;\r\n}\r\n\r\nexport interface GridWithHelpInput {\r\n  description: string;\r\n  hint: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-grid-with-help',\r\n  imports: [],\r\n  templateUrl: './grid-with-help.html',\r\n  styleUrl: './grid-with-help.scss'\r\n})\r\nexport class GridWithHelpComponent {\r\n  // ViewChild and ContentChild references - Access to DOM elements\r\n  gridWrapper = viewChild(\"gridWrapper\", { read: ElementRef });\r\n  agGrid = contentChild(AgGridAngular, { read: ElementRef });\r\n  dialogAction = contentChild(MatDialogActions, { read: ElementRef });\r\n\r\n  // Input properties - Required data from parent component\r\n  readonly helpText = input.required<GridWithHelpInput>({});\r\n  readonly refresh = input.required<number>();\r\n  readonly rowLength = input.required<number>();\r\n\r\n  // Constants - Fixed values for layout calculations\r\n  readonly DEFAULT_ROW_HEIGHT = 47; // Default height for AG Grid rows in pixels\r\n  readonly GRID_HEADER_HEIGHT = 64; // Height of AG Grid header in pixels\r\n  readonly HELP_CARD_BUFFER = 12;   // Additional buffer space for help card in pixels\r\n\r\n\r\n  // ag-row-even\r\n\r\n  constructor() {\r\n    // Effect that reacts to changes in refresh and rowLength signals\r\n    effect(() => {\r\n      const refresh = this.refresh();\r\n      const rowLength = this.rowLength();\r\n      const gridWrapperEl = this.gridWrapper()?.nativeElement;\r\n\r\n      // Early return if grid wrapper element is not available\r\n      if (!gridWrapperEl) return;\r\n\r\n      // Untracked execution to prevent unnecessary effect re-runs during layout updates\r\n      untracked(() => this.#updateLayout(gridWrapperEl, rowLength));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main layout update method - Handles the dynamic sizing and positioning of grid and help card\r\n   * @param gridWrapperEl - The main container element\r\n   * @param rowLength - Number of rows in the grid\r\n   */\r\n  #updateLayout(gridWrapperEl: HTMLElement, rowLength: number): void {\r\n    // Get references to essential DOM elements\r\n    const agGridEl = this.agGrid()?.nativeElement;\r\n    const dialogActionEl = this.dialogAction()?.nativeElement;\r\n    const helpCard = gridWrapperEl.querySelector('.help-info-card') as HTMLElement;\r\n\r\n    setTimeout(() => {\r\n      helpCard.classList.toggle('center-center', rowLength === 0);\r\n\r\n      // Early return if critical elements are missing\r\n      if (!agGridEl || !dialogActionEl) return;\r\n\r\n      helpCard.style.flex = \"\";\r\n\r\n      // Calculate all necessary dimensions for layout\r\n      const dimensions = this.#calculateDimensions(gridWrapperEl, agGridEl, dialogActionEl, helpCard, rowLength);\r\n\r\n      // Set AG Grid height based on row count and maximum height to prevent overflow\r\n      agGridEl.style.flex = dimensions.rowHeight ? `0 0 ${dimensions.agGridHeight}px` : '0px';\r\n\r\n      // Outer Container for max Size\r\n      const sideNavEl = document.querySelector<HTMLElement>('.mat-sidenav-content'); // with SideNav (settings)\r\n      const dialogEl = document.querySelector<HTMLElement>('.mat-mdc-dialog-container'); // only Dialog (Content)\r\n\r\n      const hasNavComponentWrapper = !!document.querySelector<HTMLElement>('.nav-component-wrapper'); // Check, if sideNav Dialog or Single Dialog \r\n      const outerContainer = hasNavComponentWrapper ? dialogEl : sideNavEl;\r\n\r\n      const maxHeight = outerContainer.clientHeight - dimensions.dialogHeaderHeight - dimensions.dialogActionHeight - 2;\r\n\r\n      agGridEl.style.maxHeight = `${maxHeight}px`;\r\n\r\n      // Determine if help card should be hidden when content exceeds available space\r\n      const shouldHideHelp = dimensions.helpCardHeight + dimensions.agGridHeight + dimensions.dialogActionHeight + dimensions.dialogHeaderHeight > dimensions.wrapperHeight;\r\n\r\n      helpCard.style.flex = \"1 1 auto\";\r\n      // Remove Help card from layout if it should be hidden\r\n      helpCard?.classList.toggle('hidden-help-info-card', shouldHideHelp);\r\n    }, 0);\r\n\r\n  }\r\n\r\n  // Calculate dimensions for AG Grid and help card based on current layout\r\n  #calculateDimensions(gridWrapperEl: HTMLElement, agGridEl: HTMLElement, dialogActionEl: HTMLElement, helpCard: HTMLElement, rowLength: number) {\r\n    const rowHeight = agGridEl.querySelector('.ag-row')?.clientHeight ?? this.DEFAULT_ROW_HEIGHT;\r\n    const agGridHeight = this.GRID_HEADER_HEIGHT + (rowLength * rowHeight);\r\n    const helpCardHeight = helpCard.clientHeight + this.HELP_CARD_BUFFER;\r\n    const dialogActionHeight = dialogActionEl.offsetHeight;\r\n    const dialogHeaderHeight = gridWrapperEl.querySelector('.eav-dialog-header')?.clientHeight ?? 0;\r\n    // Get total available wrapper height\r\n    const wrapperHeight = gridWrapperEl.offsetHeight;\r\n    return {\r\n      rowHeight,\r\n      agGridHeight,\r\n      helpCardHeight,\r\n      dialogActionHeight,\r\n      dialogHeaderHeight,\r\n      wrapperHeight\r\n    };\r\n  }\r\n}\r\n", "<div class=\"grid-wrapper-dynamic\" #gridWrapper>\r\n  <ng-content select=\"[eav-dialog-header]\"></ng-content>\r\n  <ng-content select=\"[eav-dialog-content]\"> </ng-content>\r\n  <ng-content select=\"ag-grid-angular\"></ng-content>\r\n  <div class=\"help-info-card\">\r\n    <div class=\"help-info-card-text\">\r\n      <span [innerHTML]=\"helpText().description\"></span>\r\n      <span [innerHTML]=\"helpText().hint\"></span>\r\n    </div>\r\n  </div>\r\n  <ng-content select=\"mat-dialog-actions\"></ng-content>\r\n</div>\r\n"],
  "mappings": "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",
  "names": ["GridWithHelpComponent", "constructor", "gridWrapper", "viewChild", "read", "ElementRef", "agGrid", "contentChild", "AgGridAngular", "dialogAction", "MatDialogActions", "helpText", "input", "required", "refresh", "rowLength", "DEFAULT_ROW_HEIGHT", "GRID_HEADER_HEIGHT", "HELP_CARD_BUFFER", "effect", "gridWrapperEl", "nativeElement", "untracked", "#updateLayout", "agGridEl", "dialogActionEl", "helpCard", "querySelector", "setTimeout", "classList", "toggle", "style", "flex", "dimensions", "#calculateDimensions", "rowHeight", "agGridHeight", "sideNavEl", "document", "dialogEl", "maxHeight", "clientHeight", "dialogHeaderHeight", "dialogActionHeight", "shouldHideHelp", "helpCardHeight", "wrapperHeight", "offsetHeight", "selectors", "contentQueries", "rf", "ctx", "dirIndex", "\u0275\u0275domElementStart", "\u0275\u0275projection", "\u0275\u0275domElement", "\u0275\u0275domElementEnd", "\u0275\u0275advance", "\u0275\u0275domProperty", "description", "\u0275\u0275sanitizeHtml", "hint"]
}
