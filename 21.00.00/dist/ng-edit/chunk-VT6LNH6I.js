import{a as He}from"./chunk-Z7VBWKZ3.js";import{a as x}from"./chunk-NVCP7HH3.js";import{a as J}from"./chunk-YHKI2L7W.js";import{b as je,c as qe}from"./chunk-ODL7UGWI.js";import{a as Ae}from"./chunk-R3Y7P2GW.js";import{a as Ue}from"./chunk-LPOE4446.js";import{a as $}from"./chunk-37NMTDTM.js";import{a as ne}from"./chunk-WAPW5AUJ.js";import{c as Be}from"./chunk-XREQECMQ.js";import{b as Le,f as Re,k as $e,v as Ve}from"./chunk-UMOPET3G.js";import{b as we,i as ke,j as Oe}from"./chunk-4LV77BQU.js";import{a as Q,b as P}from"./chunk-RGKBOUPL.js";import{b as Me,c as Fe,d as Te}from"./chunk-EZZQWHAZ.js";import{b as be,c as Se}from"./chunk-23CS2WID.js";import{a as xe}from"./chunk-OIHIMR2W.js";import{b as Ee,c as De,g as Ne}from"./chunk-G33ZJSCE.js";import{aa as d,ca as Ie,j as ie,k as ve,q as ye,r as Pe}from"./chunk-DX662RXJ.js";import{$b as z,Aa as C,Ab as H,Ac as he,Ba as V,Bb as U,Cb as y,Db as s,Dc as fe,Eb as g,Fb as b,Gc as R,Lb as Y,M as ce,Nb as A,Pb as L,Rb as p,Sa as c,V as ue,Za as j,db as de,ea as M,ec as _,fc as W,fd as _e,gc as ee,hd as Ce,ia as ge,ja as F,jb as q,oa as D,pa as N,sa as pe,tc as te,u as le,wb as h,yb as f,zb as B,zc as me}from"./chunk-46QINP2S.js";import{a as m,b as O,c as oe,d as se}from"./chunk-BDOJB7O2.js";var G=class{constructor(t,e,i,r,a,u,l,o,v,I,ae,w){this.name=t,this.config=e,this.group=i,this.settings=r,this.basics=a,this.ui=u,this.uiValue=l,this.translationState=o,this.isOpen=v,this.#t=Q("requiredFeatures",[]),this.#i=this.setting("requiredFeatures"),this.requiredFeatures=P("requiredFeatures",()=>{let k=[...this.#t(),...this.#i()??[]];return Array.from(new Set(k))}),this.#e=I,V(()=>{let k=this.requiredFeatures();if(k.length!=0)for(let it of k)ae.requireFeature(it,`Used in field ${this.name}`)},{injector:w})}get pickerData(){if(this.#e)return this.#e;throw new Error(`PickerData was not initialized for the field: ${this.name}`)}#e;setting(t){return P(t,()=>this.settings()[t])}settingExt(t){return P(t,()=>this.settings()[t])}#t;#i;requireFeature(t){let e=this.#t();e.includes(t)||this.#t.set([...e,t])}isNotExpectedType(t){return P("isFallbackForField",()=>{let e=this.settings().InputType;return t.includes(e)?null:e||null})}};var Qe=(()=>{class n{constructor(){this.log=d({FormConfigService:n}),this.configSignal=C(null),this.context=F(Ie),this.languageService=F(We)}initFormConfig(e,i,r,a,u,l,o,v){this.settings=v,this.languages={initial:e.Language.Current,primary:e.Language.Primary,list:e.Language.List};let I=sessionStorage.getItem(Pe),w=(I?JSON.parse(I):null)?.save,k=w==null?{mode:!0}:w==="false"||w===!1?{mode:!1}:{mode:!0,path:w};this.config={zoneId:this.context.zoneId,appId:this.context.appId,appRoot:e.App.Url,appSharedRoot:e.App.SharedUrl,moduleId:this.context.moduleId?.toString(),partOfPage:sessionStorage.getItem(ie)??ye,portalRoot:e.Site.Url,tabId:this.context.tabId?.toString(),systemRoot:window.location.pathname.split("/dist/")[0]+"/",versioningOptions:this.getVersioningOptions(sessionStorage.getItem(ie)==="true",sessionStorage.getItem(ve)),formId:i,isParentDialog:r,itemGuids:a,createMode:u,isCopy:l,enableHistory:o,enableFormulaSave:e.Enable.FormulaSave??!1,removeEditRestrictions:e.Enable.OverrideEditRestrictions??!1,dialogContext:e,settings:v,save:k},this.configSignal.set(this.config),this.language=this.languageService.getSignal(this.config.formId)}getVersioningOptions(e,i){let r={show:!0,hide:!0,branch:!0};if(!e)return r;let a=i||"";switch(a){case"":case"DraftOptional":return r;case"DraftRequired":return{branch:!0,hide:!0};case"DraftForbidden":return{show:!0};default:return console.error(`Invalid versioning requirements: ${a}`),{}}}get language$(){return this._language$??=this.languageService.getLanguage$(this.config.formId)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})();var nt={all:!1,initSignal:!1,watchAllFields:!0};var rt=/\[.*?\]/ig;var at=/[\[\]]/ig,Ut=(()=>{class n extends Ae{#e;#t;constructor(e){super(),this.injector=e,this.log=d({FieldMask:n},nt),this.#e=F(G),this.#t=F(Qe),this.result=C(""),this.#i=this.#e.group.controls,this.#n=this.#e.config,this.#r=!1,this.#o=C(C("")),this.#a=R(()=>this.#o()()),this.#s=R(()=>this.#g(this.#a())),this.log.a("constructor")}#i;#n;#r;#o;#a;#s;initPreClean(e){return this.log.a("initPreClean"),this.preClean=e,this}init(e,i,r=!1){return this.initSignal(e,C(i))}initSignal(e,i){this.log.extendName(`-${e}`);let r=this.log.fnIf("initSignal",{name:e,mask:i});return this.#o.set(i),this.#c(),r.r(this,"first result:"+this.result())}logChanges(){let e=this.log.enabled?this.log:d({FieldMask:n});return V(()=>e.a(`Mask '${this.#a()}' value changed to: ${this.result()}`),{injector:this.injector}),this}#c(){this.#p(),this.#l()}#u(){if(!Je(this.#a()))return this.#a();let e=ot(this.#a());this.#t!=null&&(e=e.replace("[app:appid]",this.#t.config.appId.toString()).replace("[app:zoneid]",this.#t.config.zoneId.toString())),this.#n!=null&&(e=e.replace("[guid]",this.#n.entityGuid).replace("[data:guid]",this.#n.entityGuid).replace("[id]",this.#n.entityId.toString()).replace("[data:id]",this.#n.entityId.toString()));let i=this.#s().data;return i&&i.forEach((r,a)=>{let u=this.#i?.[r]?.value??"",l=this.preClean(r,u);e=e.replace("[data:"+r.toLowerCase()+"]",l),e=e.replace("["+r.toLowerCase()+"]",l)}),e}#g(e){if(!e||!Je(e))return{};let i=e.match(rt);return i?{data:i.map(a=>a.replace(at,""))}:{}}preClean(e,i){return i}#l(){let e=this.#u();this.result.set(e)}#p(){let e=this.log.fnIf("watchAllFields"),i=this.#s().data;if(!i)return e.end("no data placeholders");let r=i.map(a=>this.#i[a]).filter(a=>a!=null);if(r.length==0)return e.end("no fields to watch");r.forEach(a=>this.subscriptions.add(a.valueChanges.subscribe(u=>this.#l()))),e.end()}static{this.\u0275fac=function(i){return new(i||n)(ge(pe))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})();function Je(n){return(n??"").includes("[")}function ot(n){return n.replace(/\[([^\]]+)\]/g,(t,e)=>`[${e.toLowerCase()}]`)}var S=class{static bothPrimary(t){return{current:t.primary,primary:t.primary}}static diffCurrent(t,e){return{current:e,primary:t.primary}}static empty(){return{current:"",primary:"",initial:""}}};var T=class{constructor(t,e){this.dimensions=t,this.language=e}get hasCurrentWrite(){return!!this.dimensions.find(e=>e.dimCode===this.language.current||this.language.current===this.language.primary&&e.dimCode==="*")}get hasCurrentReadOnly(){let t=`~${this.language.current}`;return this.dimensions.find(e=>e.dimCode===t)!==void 0}get hasCurrent(){return!!this.dimensions.find(e=>e.dimCode===this.language.current||e.dimCode===`~${this.language.current}`||this.language.current===this.language.primary&&e.dimCode==="*")}};var st={all:!1,constructor:!1},E=class n{constructor(t,e){this.log=d({FieldReader:n},st),this.#e=!0,this.log.fnIf("constructor",{field:t,language:e}),this.#t=t,this.#n=typeof e=="string"?{current:e,primary:e}:e,this.#i=t?.Values??[],this.#e=!t||!t.Values||t.Values.length===0}#e;#t;#i;#n;get current(){return this.ofLanguage(this.#n)}get currentOrDefault(){return this.#e?null:this.current??this.ofLanguage(S.bothPrimary(this.#n))}get currentOrDefaultOrAny(){return this.#e?null:this.currentOrDefault??this.#i[0]??null}ofLanguage(t){return this.#e?null:this.#i.filter(e=>new T(e.dimensions,t).hasCurrent)[0]??null}get hasPrimary(){if(this.#e)return!1;let t=this.#n.primary;return this.#i.filter(e=>e.dimensions.find(i=>i.dimCode===t||i.dimCode==="*")).length>0}get hasCurrentReadonly(){return this.#e?!1:this.#i.filter(t=>new T(t.dimensions,this.#n).hasCurrentReadOnly).length>0}get hasEditableValues(){return this.#e?!1:this.#r().length>0}countEditable(){return this.#r().length}countEditableWithContents(){return this.#r().filter(t=>t.value!=""&&t.value!=null)?.length}#r(t){return this.#e?[]:(t??=this.#n,this.#i.filter(e=>new T(e.dimensions,t).hasCurrentWrite))}get currentEditable(){if(this.#e)return null;let t=this.#n.current;return this.#i.find(e=>e.dimensions.find(i=>i.dimCode===t))??null}isEditableOrReadonlyTranslationExist(){return this.#e?!1:this.#r().length>0}};var Ge=class{static getDefaultSettings(t,e,i){let r=t.flatten(e.Metadata),a=m({},r);return a.Description??="",a.EditInstructions??="",a.Features??="",a.Label??="",a.ListInstructions??="",a.Notes??="",a.Icon??="",a.Link??="",a._itemTitle=this.getTitle(e,t),a._slotCanBeEmpty=i.IsEmptyAllowed??!1,a._slotIsEmpty=i.IsEmpty??!1,a}static getTitle(t,e){try{let i=t.Metadata.find(a=>a.Type.Name==="ContentType"||a.Type.Name==="xx ContentType"),r=i?new E(i.Attributes.Label,e).currentOrDefault?.value:null;return r=r||t.Name,r}catch{return t.Name}}};var lt={all:!1,constructor:!1},K=class n{constructor(t,e){this.log=d({EntityReader:n},lt),this.log.fnIf("constructor",{current:t,primary:e}),typeof t=="string"?(this.current=t,this.primary=e):(this.current=t.current,this.primary=t.primary)}getBestValue(t,e=null){return new E(t,this).currentOrDefaultOrAny?.value??e}flatten(t){if(t==null)return{};let e=Array.isArray(t)?t:[t];if(e.length===0||e[0]==null)return{};let i={};for(let r of e)if(r.Type.Id!=="@All")for(let[a,u]of Object.entries(r.Attributes)){let l=this.getBestValue(u);i[a]=l}for(let r of e)if(r.Type.Id==="@All")for(let[a,u]of Object.entries(r.Attributes)){let l=this.getBestValue(u),o=i[a]!=null,v=l==null||l==="";o&&v||(i[a]=l)}return i}currentValues(t){return Object.entries(t).reduce((i,[r,a])=>(i[r]=this.getBestValue(a),i),{})}};var ri=(()=>{class n{static{this.defaultIcon="file"}static{this.customExtensions={doc:"file-word",docx:"file-word",xls:"file-excel",xlsx:"file-excel",ppt:"file-powerpoint",pptx:"file-powerpoint",pdf:"file-pdf",mp3:"file-audio",avi:"file-video",mpg:"file-video",mpeg:"file-video",mov:"file-video",mp4:"file-video",zip:"file-archive",rar:"file-archive",txt:"file-text",html:"file-code",css:"file-code",xml:"file-code",xsl:"file-code"}}static{this.matExtensions={vcf:"person"}}static getExtension(e){return e.substring(e.lastIndexOf(".")+1).toLocaleLowerCase()}static getIconClass(e){let i=this.getExtension(e);return this.matExtensions[i]||this.customExtensions[i]||this.defaultIcon}static isKnownType(e){return this.matExtensions[this.getExtension(e)]!=null}static isImage(e){return this.isImgRegex().test(e)}static isImgRegex(){return/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:jpg|jpeg|gif|png|webp))(?:\?([^#]*))?(?:#(.*))?/i}}return n})();var Ke=class n{constructor(t,e,i,r){this.name=t,this.inputType=e,this.settings=i,this.itemHeader=r,this.log=d({FieldDefaults:n})}getDefaultOrPrefillValue(t){let e=this.inputType,i=this.name,r=this.settings,a=this.itemHeader,u=this.log.fn("parseDefaultValue",{name:i,inputType:e,settings:r,itemHeader:a,onlyPrefill:t}),l=a?.Prefill?.[i];if(t&&l===void 0)return u.rNull("only prefill, but no prefill data found");let o=l?.toString()??r.DefaultValue;switch(u.values({defaultValue:o}),e){case x.BooleanDefault:return o?.toLowerCase()==="true";case x.BooleanTristate:return o!=null&&o!==""?o.toLowerCase()==="true":null;case x.DateTimeDefault:return o!=null&&o!==""?new Date(o).toJSON():null;case x.NumberDefault:case x.NumberDropdown:case x.NumberPicker:return o!=null&&o!==""?isNaN(Number(o))?null:Number(o):null;case x.EntityDefault:case x.EntityQuery:case x.EntityContentBlocks:case x.EntityPicker:if(o==null||o==="")return[];if(o.includes("{")&&(o=o.replace(/[\{\}]/g,'"')),o.includes(",")&&!o.includes("[")){let v=o.split(",").map(I=>I.trim());o=JSON.stringify(v)}return o.startsWith("[")?JSON.parse(o):[o.replace(/"/g,"")];default:return o??""}}};function Ze(n){return n?n.map(e=>{let i=e.Path.trim().replace(/\\/g,"/").replace(/\/\//g,"/");return i.startsWith("/")&&(i=i.substring(1)),i=i.split("/").slice(0,-1).join(" > "),{id:e.Id,name:e.Name,path:i,isNavigation:e.IsNavigation,isClickable:e.IsClickable}}):[]}function Xe(n){if(!n)return[];let t=n.map(i=>({children:[],id:i.Id,name:i.Name,parentId:i.ParentId,isNavigation:i.IsNavigation,isClickable:i.IsClickable})),e=[];for(let i of t){if(i.parentId===-1){e.push(i);continue}let r=t.find(a=>a.id===i.parentId);r?r.children.push(i):e.push(i)}return e}var Ye=n=>({page:n});function ct(n,t){n&1&&Y(0)}function ut(n,t){if(n&1&&q(0,ct,1,0,"ng-container",9),n&2){let e=t.$implicit;p(2);let i=z(15);y("ngTemplateOutlet",i)("ngTemplateOutletContext",te(2,Ye,e))}}function gt(n,t){if(n&1&&(s(0,"ul"),H(1,ut,1,4,"ng-container",null,B),g()),n&2){let e=p();c(),U(e.tree())}}function pt(n,t){n&1&&(s(0,"li")(1,"div",10),b(2,"div",11),s(3,"div"),_(4,"No results"),g()()())}function dt(n,t){if(n&1&&(s(0,"span",15),_(1),g()),n&2){let e=p().$implicit;y("tippy",e.path),c(),ee("",e.path,"\xA0>\xA0")}}function mt(n,t){n&1&&(s(0,"mat-icon",18),_(1,"visibility_off"),g())}function ht(n,t){n&1&&(s(0,"mat-icon",18),_(1,"cancel"),g())}function ft(n,t){if(n&1){let e=A();s(0,"li")(1,"div",10),b(2,"div",11),s(3,"div",12),L("click",function(){let r=D(e).$implicit,a=p(2);return N(a.select(r))}),s(4,"div",13),b(5,"mat-icon",14),h(6,dt,2,2,"span",15),s(7,"span",16),_(8),g()(),s(9,"div",17),h(10,mt,2,0,"mat-icon",18),h(11,ht,2,0,"mat-icon",18),g()()()()}if(n&2){let e=t.$implicit,i=p(2);c(3),y("ngClass",e.id===i.selected?"selected":""),c(3),f(e.path?6:-1),c(),y("tippy",e.name),c(),W(e.name),c(2),f(e.isNavigation?-1:10),c(),f(e.isClickable?-1:11)}}function _t(n,t){if(n&1&&(s(0,"ul"),h(1,pt,5,0,"li"),H(2,ft,12,6,"li",null,B),g()),n&2){let e=p();c(),f(e.filteredSearch().length===0?1:-1),c(),U(e.filteredSearch())}}function Ct(n,t){n&1&&b(0,"div",11)}function xt(n,t){if(n&1){let e=A();s(0,"mat-icon",20),L("click",function(){D(e);let r=p().page,a=p();return N(a.toggle(r.id))}),_(1),g()}if(n&2){let e=p().page,i=p();c(),ee(" ",i.toggled.includes(e.id)?"keyboard_arrow_down":"keyboard_arrow_right"," ")}}function vt(n,t){n&1&&(s(0,"mat-icon",18),_(1,"visibility_off"),g())}function yt(n,t){n&1&&(s(0,"mat-icon",18),_(1,"cancel"),g())}function Pt(n,t){n&1&&Y(0)}function bt(n,t){if(n&1&&q(0,Pt,1,0,"ng-container",9),n&2){let e=t.$implicit;p(3);let i=z(15);y("ngTemplateOutlet",i)("ngTemplateOutletContext",te(2,Ye,e))}}function St(n,t){if(n&1&&(s(0,"ul"),H(1,bt,1,4,"ng-container",null,B),g()),n&2){let e=p().page;c(),U(e.children)}}function It(n,t){if(n&1){let e=A();s(0,"li")(1,"div",10),h(2,Ct,1,0,"div",11),h(3,xt,2,1,"mat-icon",19),s(4,"div",12),L("click",function(){let r=D(e).page,a=p();return N(a.select(r))}),s(5,"div",13),b(6,"mat-icon",14),s(7,"span"),_(8),g()(),s(9,"div",17),h(10,vt,2,0,"mat-icon",18),h(11,yt,2,0,"mat-icon",18),g()()(),h(12,St,3,0,"ul"),g()}if(n&2){let e=t.page,i=p();c(2),f(e.children.length===0?2:-1),c(),f(e.children.length>0?3:-1),c(),y("ngClass",e.id===i.selected?"selected":""),c(4),W(e.name),c(2),f(e.isVisible?-1:10),c(),f(e.isClickable?-1:11),c(),f(e.children.length>0&&i.toggled.includes(e.id)?12:-1)}}var ze=(()=>{class n{constructor(e,i,r){this.dialogData=e,this.dialog=i,this.translate=r,this.filterText=C(""),this.searchItems=C([]),this.tree=C([]),this.filteredSearch=R(()=>{let a=this.filterText();return this.searchItems().filter(l=>l.name.toLocaleLowerCase().includes(a.toLocaleLowerCase()))}),this.queryService=xe(Ue)}ngOnInit(){this.selected=this.parseSelectedPageId(),this.toggled=[],this.fetchPages()}setFilter(e){this.filterText.set(e)}select(e){e.id!=null&&((!e.isClickable||!e.isNavigation)&&!window.confirm(this.translate.instant("Fields.Hyperlink.PagePicker.HiddenOrSystemPageWarning"))||this.closeDialog(e.id))}toggle(e){He.toggleInArray(e,this.toggled)}closeDialog(e){if(e==null){this.dialog.close();return}let i=this.searchItems().find(a=>a.id===e),r={id:i.id.toString(),name:i.name};this.dialog.close(r)}fetchPages(){let e="Default";this.queryService.getFromQuery("System.Pages/Default","includehidden=true",null).subscribe({next:r=>{if(!r){console.error(this.translate.instant("Fields.Picker.QueryErrorNoData"));return}if(!r[e]){console.error(this.translate.instant("Fields.Picker.QueryStreamNotFound")+" "+e);return}let a=r[e],u=Ze(a);this.searchItems.set(u);let l=Xe(a);this.tree.set(l)},error:r=>{console.error(r),console.error(`${this.translate.instant("Fields.Picker.QueryError")} - ${r.data}`)}})}parseSelectedPageId(){let e="page:",i=this.dialogData.group.controls[this.dialogData.config.fieldName].value;if(typeof i=="string"&&(i=i.trim().toLocaleLowerCase(),!!i.startsWith(e)))try{return parseInt(i.split(e)[1],10)}catch{return}}static{this.\u0275fac=function(i){return new(i||n)(j(De),j(Ee),j(Me))}}static{this.\u0275cmp=de({type:n,selectors:[["app-page-picker"]],decls:17,vars:6,consts:[["pageAndChildren",""],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"page-search-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","ngModel"],[1,"page-tree-box"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"page-row"],[1,"no-toggle"],[1,"page-label",3,"click","ngClass"],[1,"page-icon-and-text"],["svgIcon","file",1,"page-icon"],[1,"page-path",3,"tippy"],[1,"page-name",3,"tippy"],[1,"page-icons"],[1,"page-visible-clickable-icon"],[1,"page-toggle"],[1,"page-toggle",3,"click"]],template:function(i,r){if(i&1){let a=A();s(0,"div",1)(1,"div",2)(2,"div",3),_(3),me(4,"translate"),g()(),s(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),_(9,"Search"),g(),s(10,"input",7),L("ngModelChange",function(l){return D(a),N(r.setFilter(l))}),g()()(),s(11,"div",8),h(12,gt,3,0,"ul"),h(13,_t,4,1,"ul"),g(),q(14,It,13,7,"ng-template",null,0,fe),g(),b(16,"mat-dialog-actions"),g()}i&2&&(c(3),W(he(4,4,"Fields.Hyperlink.PagePicker.Title")),c(7),y("ngModel",r.filterText()),c(2),f(r.filterText()?-1:12),c(),f(r.filterText()?13:-1))},dependencies:[Oe,ke,we,qe,je,Ve,Le,Re,$e,Ce,_e,Se,be,Ne,Te,Be,Fe],styles:[`.page-picker-title[_ngcontent-%COMP%]{margin:0}.page-search-box[_ngcontent-%COMP%]{margin-bottom:16px;width:40%}.page-tree-box[_ngcontent-%COMP%]{height:82%;max-width:100%;overflow:auto}.page-tree-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:8px;margin:0}.page-tree-box[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding-left:0}.page-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.page-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px}.no-toggle[_ngcontent-%COMP%]{width:20px;height:20px;display:inline-block;flex-shrink:0}.page-toggle[_ngcontent-%COMP%]{cursor:pointer;flex-shrink:0}.page-icon[_ngcontent-%COMP%]{margin-right:4px;flex-shrink:0}.page-visible-clickable-icon[_ngcontent-%COMP%]{margin-left:4px;flex-shrink:0}.page-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:space-between;padding:4px 4px 4px 2px;border-radius:4px;width:100%}.page-label[_ngcontent-%COMP%]   .page-icon-and-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.page-label[_ngcontent-%COMP%]   .page-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.page-label[_ngcontent-%COMP%]   .page-path[_ngcontent-%COMP%]{color:#a2a7b1;text-overflow:ellipsis;max-width:270px;white-space:nowrap;overflow:hidden;padding-right:.5em}.page-label[_ngcontent-%COMP%]   .page-name[_ngcontent-%COMP%]{text-overflow:ellipsis;max-width:225px;white-space:nowrap;overflow:hidden}.page-label[_ngcontent-%COMP%]:hover{background-color:#06599a;color:#fff}.page-label[_ngcontent-%COMP%]:hover   .page-path[_ngcontent-%COMP%]{color:#c7cad0}.page-label.selected[_ngcontent-%COMP%]{background-color:#002753;color:#fff}.page-label.selected[_ngcontent-%COMP%]   .page-path[_ngcontent-%COMP%]{color:#c7cad0}
/*# sourceMappingURL=page-picker-MDUCCLIU.css.map */`]})}}return n})();var et=class{static open(t,e,i,r,a,u){let l={config:t,group:e};i.open(ze,{autoFocus:!1,data:l,viewContainerRef:r,height:"80%",width:"650px"}).afterClosed().pipe(ce(1)).subscribe(v=>{u(v)}),a.markForCheck()}};var tt=class{static removeFromStart(t,e){if(!t)return t;for(;t.substring(0,1)===e;)t=t.substring(1);return t}static removeFromEnd(t,e){if(!t)return t;for(;t.substring(t.length-1,t.length)===e;)t=t.substring(0,t.length-1);return t}static cleanBadPath(t){if(!t)return t;let e="_",i=/[\?<>\\:\*\|":]/g,r=/[\x00-\x1f\x80-\x9f]/g,a=/^\.+$/,u=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,l=/[\. ]+$/;return t.replace(i,e).replace(r,e).replace(a,e).replace(u,e).replace(l,e)}static sanitizePath(t){return t&&(t=this.removeFromStart(t,"/"),t=this.removeFromEnd(t,"/"),t=this.removeFromStart(t,"\\"),t=this.removeFromEnd(t,"\\"),t=this.cleanBadPath(t),t)}static sanitizeName(t){if(!t)return t;let e="_",i=/\//g;return this.sanitizePath(t).replace(i,e)}};var Z=class n{constructor(t){this.#e=Q("cache",{}),this.#t=P("list",()=>Object.values(this.#e())),this.getId=e=>e.id,this.sanitizeAdd=e=>e,this.#i=new $("item"),this.log=t??d({SignalStoreBase:n}),this.log.a("SignalStoreBase created"),this.name=this.log.name}#e;#t;get cache(){return this.#e}get list(){return this.#t}add(t){let e=this.log.fn("add",{item:t});if(!t)return e.end("item is null");this.#e.set(O(m({},this.#e()),{[this.getId(t)]:this.sanitizeAdd(t)})),e.end("added")}addMany(t){var e=this.log.fn("addMany",{items:t});if(!t||t.length==0)return e.end("items is null or empty");let i=t.reduce((r,a)=>O(m({},r),{[this.getId(a)]:this.sanitizeAdd(a)}),m({},this.#e()));this.#e.set(i),e.end("added")}update(t,e){let i=this.log.fn("update",{id:t,item:e});if(!t||!e)return i.end("id or item is null");let r=this.get(t);if(!r)return i.end(`Item with id ${t} not found in store`);let a=m(m({},r),e);this.#e.set(O(m({},this.#e()),{[t]:a})),i.end("updated")}remove(t){let e=this.log.fn("remove",{id:t}),a=this.#e(),{[t]:i}=a,r=se(a,[oe(t)]);this.#e.set(r),e.end("removed")}clearCache(){let t=this.log.fn("clearCache");this.#e.set({}),t.end("cleared")}get(t){let e=this.#e()[t];return this.log.a(`get(${t}) - `+(e==null?"not":"")+"found"),e}getAll(){let t=this.#t();return this.log.a(`getAll() - found ${t.length} items`),t}getMany(t){let e=this.log.fn("getMany",{ids:t}),i=t.map(r=>this.#e()[r]).filter(r=>r!=null);return e.r(i,`found ${i.length} items`)}getSignal(t){let e=this.#i.getOrCreateWithInfo(t,()=>this.get(t));return this.log.a(`getSignal(${t})`,{isNew:e.isNew}),e.signal}#i;getManySignal(t){let e=P("getMany",()=>t.map(i=>this.get(i)).filter(i=>i!=null));return this.log.a("getManySignal()",{ids:t}),e}getAllSignal(){let t=this.#t;return this.log.a(`getAllSignal() - found ${t().length} items`),t}};var X=class extends Z{#e=ne(this.cache);#t=ne(this.list);get cache$(){return this.#e}get list$(){return this.#t}getList$(){return this.list$}getMany$(t){return this.cache$.pipe(J(e=>t.map(i=>e[i]).filter(i=>i!=null)))}};var wt={getReader:!1,getLanguage:!1,getReaderSignal:!1},We=(()=>{class n extends X{constructor(){super(d({FormLanguageService:n},wt)),this.getId=e=>e.formId,this.sanitizeAdd=e=>m(O(m({},S.empty),{initial:e.current}),e),this.#e=new $("entityReader"),this.#t=new $("hideHeader")}addForm(e,i,r,a){this.add({formId:e,current:r,initial:r,primary:i,hideHeader:a})}setCurrent(e,i){this.update(e,{current:i})}getEntityReader(e){let i=this.log.fnIf("getReader",{formId:e}),r=this.#e.getOrCreateWithInfo(e,()=>{let a=this.getSignal(e)()??S.empty(),u=this.log.fnIf("getReaderSignal",{language:a});return new K(a)});return i.rSilent(r.signal,`isNew: ${r.isNew}`)}#e;getLanguage$(e){return this.cache$.pipe(le(i=>i[e]),J(i=>i),ue(1))}getHideHeaderSignal(e){return this.#t.getOrCreate(e,()=>this.cache()[e]?.hideHeader??!1)}#t;updateHideHeader(e,i){this.update(e,{hideHeader:i})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{Z as a,X as b,S as c,T as d,E as e,G as f,We as g,Qe as h,Ut as i,Ge as j,K as k,ri as l,Ke as m,et as n,tt as o};
//# sourceMappingURL=https://sources.2sxc.org/21.00.00/dist/ng-edit/chunk-VT6LNH6I.js.map
