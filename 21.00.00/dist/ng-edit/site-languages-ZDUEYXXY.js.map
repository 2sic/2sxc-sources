{
  "version": 3,
  "sources": ["projects/eav-ui/src/app/apps-management/site-languages/site-languages-status/site-languages-status.ts", "projects/eav-ui/src/app/apps-management/site-languages/site-languages-status/site-languages-status.html", "projects/eav-ui/src/app/apps-management/site-languages/site-languages.ts", "projects/eav-ui/src/app/apps-management/site-languages/site-languages.html"],
  "sourcesContent": ["import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { SiteLanguage } from '../../models/site-language.model';\r\nimport { SiteLanguagesStatusParams } from './site-languages-status.models';\r\n\r\n@Component({\r\n    selector: 'app-site-languages-status',\r\n    templateUrl: './site-languages-status.html',\r\n    styleUrls: ['./site-languages-status.scss'],\r\n    imports: [MatSlideToggleModule]\r\n})\r\nexport class SiteLanguagesStatusComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  private params: ICellRendererParams & SiteLanguagesStatusParams;\r\n\r\n  agInit(params: ICellRendererParams & SiteLanguagesStatusParams): void {\r\n    this.params = params;\r\n    this.value = this.params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  toggleLanguage(event: MatSlideToggleChange): void {\r\n    const language: SiteLanguage = this.params.data;\r\n    this.params.onToggleLanguage(language, event.checked);\r\n  }\r\n}\r\n", "<mat-slide-toggle [checked]=\"value\" (change)=\"toggleLanguage($event)\"></mat-slide-toggle>\r\n", "import { ClientSideRowModelModule } from '@ag-grid-community/client-side-row-model';\r\nimport { GridOptions, ModuleRegistry } from '@ag-grid-community/core';\r\nimport { Component, signal } from '@angular/core';\r\nimport { transient } from '../../../../../core';\r\nimport { ColumnDefinitions } from '../../shared/ag-grid/column-definitions';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { SiteLanguage } from '../models/site-language.model';\r\nimport { ZoneService } from '../services/zone.service';\r\nimport { SiteLanguagesStatusComponent } from './site-languages-status/site-languages-status';\r\nimport { SiteLanguagesStatusParams } from './site-languages-status/site-languages-status.models';\r\n\r\n@Component({\r\n  selector: 'app-site-languages',\r\n  templateUrl: './site-languages.html',\r\n  styleUrls: ['./site-languages.scss'],\r\n  imports: [\r\n    SxcGridModule,\r\n  ]\r\n})\r\nexport class SiteLanguagesComponent {\r\n  gridOptions = this.#buildGridOptions();\r\n\r\n  #zoneSvc = transient(ZoneService);\r\n  constructor() {\r\n    ModuleRegistry.registerModules([ClientSideRowModelModule]);\r\n  }\r\n\r\n  #refreshLanguagesSig = signal(0);\r\n\r\n  languages = this.#zoneSvc.getLanguageLive(this.#refreshLanguagesSig).value;\r\n\r\n  async #toggleLanguage(language: SiteLanguage, enable: boolean) {\r\n    try {\r\n      // Wait for the API call to complete and get the status code\r\n      const status = await this.#zoneSvc.toggleLanguage(language.Code, enable);\r\n      if (status >= 200 && status < 300) {\r\n        this.#refreshLanguagesSig.set(this.#refreshLanguagesSig() + 1);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling language:', error);\r\n    }\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          field: 'Code',\r\n          filter: 'agTextColumnFilter',\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<SiteLanguage> = {\r\n              tooltipGetter: (language: SiteLanguage) => `ID: ${language.Code}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Name',\r\n          field: 'Culture',\r\n          sort: 'asc',\r\n          onCellClicked: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            this.#toggleLanguage(language, !language.IsEnabled);\r\n          },\r\n        },\r\n        {\r\n          field: 'Status',\r\n          width: 72,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (p: { data: SiteLanguage }) => p.data.IsEnabled,\r\n          cellRenderer: SiteLanguagesStatusComponent,\r\n          cellRendererParams: (() => {\r\n            const params: SiteLanguagesStatusParams = {\r\n              onToggleLanguage: (language, enable) => this.#toggleLanguage(language, enable),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n", "@if (languages(); as languages) {\r\n  <div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n    <ag-grid-angular\r\n      class=\"ag-theme-material\"\r\n      [rowData]=\"languages\"\r\n      [gridOptions]=\"gridOptions\"\r\n    ></ag-grid-angular>\r\n  </div>\r\n}\r\n"],
  "mappings": "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",
  "names": ["SiteLanguagesStatusComponent", "agInit", "params", "value", "refresh", "toggleLanguage", "event", "language", "data", "onToggleLanguage", "checked", "selectors", "decls", "vars", "consts", "template", "rf", "ctx", "\u0275\u0275elementStart", "\u0275\u0275listener", "$event", "\u0275\u0275elementEnd", "\u0275\u0275property", "MatSlideToggleModule", "MatSlideToggle", "styles", "\u0275\u0275elementStart", "\u0275\u0275element", "\u0275\u0275elementEnd", "\u0275\u0275advance", "\u0275\u0275property", "ctx", "ctx_r0", "gridOptions", "SiteLanguagesComponent", "#zoneSvc", "constructor", "#buildGridOptions", "transient", "ZoneService", "#refreshLanguagesSig", "signal", "languages", "getLanguageLive", "value", "ModuleRegistry", "registerModules", "ClientSideRowModelModule", "#toggleLanguage", "language", "enable", "__async", "status", "toggleLanguage", "Code", "set", "error", "console", "__spreadProps", "__spreadValues", "defaultGridOptions", "columnDefs", "ColumnDefinitions", "IdWithDefaultRenderer", "field", "filter", "cellRendererParams", "tooltipGetter", "TextWide", "headerName", "sort", "onCellClicked", "params", "data", "IsEnabled", "width", "headerClass", "cellClass", "split", "sortable", "BooleanFilterComponent", "valueGetter", "p", "cellRenderer", "SiteLanguagesStatusComponent", "onToggleLanguage", "selectors", "decls", "vars", "consts", "template", "rf", "\u0275\u0275conditionalCreate", "SiteLanguagesComponent_Conditional_0_Template", "\u0275\u0275conditional", "tmp_0_0", "SxcGridModule", "AgGridAngular", "styles"]
}
