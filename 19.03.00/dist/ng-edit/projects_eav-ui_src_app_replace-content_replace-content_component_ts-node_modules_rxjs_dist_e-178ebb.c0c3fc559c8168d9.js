"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_replace-content_replace-content_component_ts-node_modules_rxjs_dist_e-178ebb"],{3620:(D,p,e)=>{function _(l,i){return i(l)}function t(l,i){return i(l)}e.d(p,{C:()=>_,z:()=>t})},4513:(D,p,e)=>{e.r(p),e.d(p,{ReplaceContentComponent:()=>j});var _=e(2275),t=e(7580),l=e(4456),i=e(9771),v=e(4175),C=e(4646),E=e(7941),g=e(4950),f=e(3840),O=e(7984),h=e(2159),T=e(2938),o=e(3620),s=e(9669),c=e(3216),d=e(334),I=e(8471),R=e(7993),A=e(3347);function U(M,L){if(1&M&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&M){const a=L.$implicit;t.Y8G("value",a.label),t.R7$(),t.JRh(a.label)}}let j=(()=>{class M{#n;#t;constructor(a,r){this.dialog=a,this.snackBar=r,this.hostClass="dialog-component",this.#n=(0,T.d)(s.y),this.#t=(0,T.d)(I.c),this.#s=(0,o.C)(this.#t.getParams(["guid","part","index"]),n=>({guid:n.guid,part:n.part,index:parseInt(n.index,10)})),this.isAddMode=(0,R.KX)("isAddMode",!!this.#t.getQueryParam("add")),this.filterText=(0,t.geq)(""),this.#e=(0,R.KX)("options",[]),this.options=(0,R.bo)("filteredOptions",()=>{const n=this.filterText().toLocaleLowerCase();return this.#e().filter(u=>u.label.toLocaleLowerCase().includes(n))}),this.hasSelection=(0,R.bo)("isMatch",()=>this.options().map(n=>n.label).includes(this.filterText()))}#s;#a;#e;ngOnInit(){this.#i(!1,null),this.#t.doOnDialogClosed(()=>{const r=this.#t.router.getCurrentNavigation().extras?.state,n=r?.[Object.keys(r)[0]];this.#i(!0,n)})}closeDialog(){this.dialog.close()}select(a){this.filterText.set(a.option.value)}copySelected(){const a=this.#o(),r={items:[d.c.copy(this.#a,a.id)]},n=(0,c.s)(r);this.#t.navRelative([`edit/${n}`])}save(){this.snackBar.open("Saving...");const a=this.#o();this.#n.saveItem(a).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}#i(a,r){const n=this.#o();this.#n.getItems(n).subscribe(u=>{const P=Object.entries(u.Items).map(([m,B])=>({id:parseInt(m,10),label:`${B} (${m})`}));if(this.#e.set(P),!n.add&&!a||null!=r){const m=a?r:u.SelectedId,B=this.#e().find(K=>K.id===m)?.label||"";this.filterText.set(B)}this.#a=u.ContentTypeName})}#o(){const a=this.filterText();return{id:this.#e().find(u=>u.label===a)?.id??null,...this.#s,add:this.isAddMode()}}static{this.\u0275fac=function(r){return new(r||M)(t.rXU(E.CP),t.rXU(A.UG))}}static{this.\u0275cmp=t.VBU({type:M,selectors:[["app-replace-content"]],hostVars:1,hostBindings:function(r,n){2&r&&t.Mr5("className",n.hostClass)},inputs:{filterText:[1,"filterText"]},outputs:{filterText:"filterTextChange"},decls:25,vars:10,consts:[["auto","matAutocomplete"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"eav-options-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","matAutocomplete","ngModel"],[3,"optionSelected","hideSingleSelectionIndicator"],["itemSize","48","minBufferPx","500","maxBufferPx","1000"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","","tippy","Copy",3,"click","disabled"],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click","disabled"],[3,"value"]],template:function(r,n){if(1&r){const u=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3),t.k0s()(),t.j41(4,"div",4),t.nrm(5,"router-outlet"),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),t.EFF(11,"Choose item"),t.k0s(),t.j41(12,"input",7),t.mxI("ngModelChange",function(m){return t.eBV(u),t.DH7(n.filterText,m)||(n.filterText=m),t.Njj(m)}),t.k0s(),t.j41(13,"mat-autocomplete",8,0),t.bIt("optionSelected",function(m){return t.eBV(u),t.Njj(n.select(m))}),t.j41(15,"cdk-virtual-scroll-viewport",9),t.DNE(16,U,2,2,"mat-option",10),t.k0s()()(),t.j41(17,"button",11),t.bIt("click",function(){return t.eBV(u),t.Njj(n.copySelected())}),t.j41(18,"mat-icon"),t.EFF(19,"file_copy"),t.k0s()()()(),t.j41(20,"mat-dialog-actions",12)(21,"button",13),t.bIt("click",function(){return t.eBV(u),t.Njj(n.closeDialog())}),t.EFF(22,"Cancel"),t.k0s(),t.j41(23,"button",14),t.bIt("click",function(){return t.eBV(u),t.Njj(n.save())}),t.EFF(24,"Save"),t.k0s()()()}if(2&r){const u=t.sdS(14);t.R7$(3),t.JRh(n.isAddMode()?"Add Existing Item":"Replace Content Item"),t.R7$(4),t.SpI("",n.isAddMode()?"Select a content-item to add to this list.":"By replacing a content-item you can make other content appear in the slot of the original content."," "),t.R7$(5),t.Y8G("matAutocomplete",u),t.R50("ngModel",n.filterText),t.R7$(),t.Y8G("hideSingleSelectionIndicator",!0),t.R7$(2),t.xc7("height",n.options().length<6?48*n.options().length:240,"px"),t.R7$(),t.Y8G("cdkVirtualForOf",n.options()),t.R7$(),t.Y8G("disabled",!n.hasSelection()),t.R7$(6),t.Y8G("disabled",!n.hasSelection())}},dependencies:[h.n3,g.RG,g.rl,g.nJ,O.fS,O.fg,i.jL,i.$3,C.wT,i.pN,l.YN,l.me,l.BC,l.vS,_.d6,_.yg,_.E$,C.Sy,v.Hl,v.$z,v.iY,f.m_,f.An,E.E7],styles:[".eav-options-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]})}}return M})()},8471:(D,p,e)=>{e.d(p,{c:()=>O});var _=e(2159),t=e(1567),l=e(3037),i=e(271),v=e(5057),C=e(4435),E=e(4979),g=e(7580);const f={doOnDialogClosed:!0};let O=(()=>{class h extends E.V{constructor(o,s){super(),this.router=o,this.route=s,this.log=(0,C.Tq)({DialogRoutingService:h},f)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(o){return this.route.snapshot.paramMap.get(o)}getParams(o){const s=this.route.snapshot.paramMap;return o.reduce((c,d)=>(c[d]=s.get(d),c),{})}getQueryParam(o){return this.route.snapshot.queryParamMap.get(o)}getQueryParams(o){const s=this.route.snapshot.queryParamMap;return o.reduce((c,d)=>(c[d]=s.get(d),c),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(o){const s=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>o())),s.end()}urlSubRoute(o){const s=this.router.createUrlTree([o],{relativeTo:this.route});return this.router.serializeUrl(s)}navPath(o,s){return this.router.navigate([o],s)}navRelative(o,s){return this.router.navigate(o,{...s,relativeTo:this.route})}childDialogClosed$(){return this.router.events.pipe((0,t.p)(o=>o instanceof _.wF),(0,l.Z)(!!this.route.snapshot.firstChild),(0,i.T)(()=>!!this.route.snapshot.firstChild),(0,v.J)(),(0,t.p)(([o,s])=>o&&!s))}static{this.\u0275fac=function(s){return new(s||h)(g.KVO(_.Ix),g.KVO(_.nX))}}static{this.\u0275prov=g.jDH({token:h,factory:h.\u0275fac})}}return h})()},4979:(D,p,e)=>{e.d(p,{V:()=>l});var _=e(7092),t=e(7580);let l=(()=>{class i{constructor(){this.subscriptions=new _.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(E){return new(E||i)}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}}return i})()},591:(D,p,e)=>{e.d(p,{c:()=>o});var _=e(8473),t=e(3513),l=e(4334),i=e(819),v=e(1687),C=e(4318),g=e(7378),f=e(1365),O=e(2645);function h(s,c){return c?d=>(0,t.x)(c.pipe((0,l.s)(1),function E(){return(0,i.N)((s,c)=>{s.subscribe((0,v._)(c,C.l))})}()),d.pipe(h(s))):(0,f.Z)((d,I)=>(0,O.Tg)(s(d,I)).pipe((0,l.s)(1),(0,g.u)(d)))}var T=e(4581);function o(s,c=_.E){const d=(0,T.O)(s,c);return h(()=>d)}}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.00/dist/ng-edit/projects_eav-ui_src_app_replace-content_replace-content_component_ts-node_modules_rxjs_dist_e-178ebb.c0c3fc559c8168d9.js.map