"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"],{7693:(f,_,t)=>{t.d(_,{X:()=>p,g:()=>m});var i=t(7580),h=t(271),n=t(6474);const p="admin/type/",u="admin/type/get",s="admin/type/list",d="admin/type/scopes";let m=(()=>{class g extends n.D{retrieveContentType(l){return this.getHttpApiUrl(u,{params:{appId:this.appId,contentTypeId:l}})}retrieveContentTypeSig(l,I){return this.getSignal(u,{params:{appId:this.appId,contentTypeId:l}},I)}retrieveContentTypes(l){return this.getHttpApiUrl(s,{params:{appId:this.appId,scope:l}})}retrieveContentTypesSig(l,I){return this.getSignal(s,{params:{appId:this.appId,scope:l}},I)}getScopes(){return this.getHttpApiUrl(d,{params:{appId:this.appId}}).pipe((0,h.T)(l=>{const I=l.old;return Object.keys(I).map(T=>({name:I[T],value:T}))}))}getScopesSig(l){const I=this.getSignal(d,{params:{appId:this.appId}},l);return(0,i.EWP)(()=>{const T=I();if(!T||!T.old)return[];const D=T.old;return Object.keys(D).map(O=>({name:D[O],value:O}))})}getScopesV2(){return this.getHttpApiUrl(d,{params:{appId:this.appId}}).pipe((0,h.T)(l=>l.scopes))}save(l){return this.http.post(this.apiUrl("admin/type/save"),l,{params:{appid:this.appId}})}delete(l){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:l.NameId}})}import(l){const I=new FormData;for(const E of l)I.append("File",E);return this.http.post(this.apiUrl("admin/type/import"),I,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(l){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceNameId:l}})}static{this.\u0275fac=(()=>{let l;return function(E){return(l||(l=i.xGo(g)))(E||g)}})()}static{this.\u0275prov=i.jDH({token:g,factory:g.\u0275fac})}}return g})()},1475:(f,_,t)=>{t.d(_,{j:()=>u});var i=t(6474),h=t(8624),n=t(7580);let u=(()=>{class s extends i.D{getContentInfo(c,o){return this.getSignal("admin/appParts/get",{params:{appid:this.appId,zoneId:this.zoneId,scope:c}},o)}exportParts(c,o,r){const y=this.apiUrl(h.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+c.join(";")+"&entityIdsString="+o.join(";")+"&templateIdsString="+r.join(";");window.open(y,"_blank","")}static{this.\u0275fac=(()=>{let c;return function(r){return(c||(c=n.xGo(s)))(r||s)}})()}static{this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac})}}return s})()},320:(f,_,t)=>{t.d(_,{t:()=>s});var i=t(1772),h=t(6474),n=t(7580);let s=(()=>{class d extends h.D{getAppInfo(o){return this.getSignal("admin/app/Statistics",{params:{appid:this.appId,zoneId:this.zoneId}},o)}exportAppUrl(){return`${this.apiUrl(`${i.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl({includeContentGroups:o,resetAppGuid:r,withFiles:y}){return this.getHttpApiUrl("admin/app/SaveData",{params:{appid:this.appId,zoneId:this.zoneId,includeContentGroups:o.toString(),resetAppGuid:r.toString(),withPortalFiles:y.toString()}})}static{this.\u0275fac=(()=>{let o;return function(y){return(o||(o=n.xGo(d)))(y||d)}})()}static{this.\u0275prov=n.jDH({token:d,factory:d.\u0275fac})}}return d})()},8624:(f,_,t)=>{t.d(_,{Q:()=>p,S:()=>u});var i=t(1772),h=t(6474),n=t(7580);const p="admin/appParts/";let u=(()=>{class s extends h.D{importAppParts(c){const o=new FormData;return o.append("File",c),this.http.post(this.apiUrl(p+"Import"),o,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(c){return this.http.post(this.apiUrl(i.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:c.toString()}})}static{this.\u0275fac=(()=>{let c;return function(r){return(c||(c=n.xGo(s)))(r||s)}})()}static{this.\u0275prov=n.jDH({token:s,factory:s.\u0275fac})}}return s})()},5445:(f,_,t)=>{t.d(_,{Cu:()=>s.Cu,JL:()=>s.JL,Mk:()=>s.Mk,X6:()=>h.X,ei:()=>s.ei,gs:()=>h.g,tr:()=>i.t,vN:()=>s.vN,xR:()=>s.xR,y0:()=>d.y});var i=t(1479),h=t(7693),s=(t(1475),t(320),t(8624),t(6460)),d=t(2570)},6460:(f,_,t)=>{t.d(_,{Cu:()=>g,JL:()=>A,Mk:()=>y,ei:()=>m,vN:()=>l,xR:()=>I});var i=t(4600),h=t(6647),n=t(271),p=t(693),u=t(9234),s=t(6474),d=t(7580);const y="admin/query/Run",m="admin/query/DebugStream",g="admin/query/Save",A="admin/query/Get",l="admin/query/DataSources";let I=(()=>{class E extends s.D{getAll(D){return this.getHttpApiUrl(u.Gg,{params:{appId:this.appId,contentType:D}})}getAllSig(D,O){return this.getSignal(u.Gg,{params:{appId:this.appId,contentType:D}},O)}importQuery(D){return(0,i.H)((0,p.n)(D)).pipe((0,h.n)(O=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:O})),(0,n.T)(O=>({Success:O,Messages:[]})))}clonePipeline(D){return this.getHttpApiUrl("admin/query/Clone",{params:{Id:D.toString(),appId:this.appId}})}delete(D){return this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:D.toString()}})}static{this.\u0275fac=(()=>{let D;return function(S){return(D||(D=d.xGo(E)))(S||E)}})()}static{this.\u0275prov=d.jDH({token:E,factory:E.\u0275fac})}}return E})()},2570:(f,_,t)=>{t.d(_,{y:()=>o});var i=t(6474),h=t(7580);let o=(()=>{class r extends i.D{getAll(){return this.getSignal("admin/view/all",{params:{appId:this.appId}})}delete(m){return this.getHttpApiUrl("admin/view/delete",{params:{appId:this.appId,Id:m.toString()}})}import(m){const g=new FormData;return g.append("File",m),this.http.post(this.apiUrl("admin/view/import"),g,{params:{appId:this.appId,zoneId:this.zoneId}})}export(m){const g=this.apiUrl("admin/view/json")+"?appId="+this.appId+"&viewId="+m;window.open(g,"_blank","")}getPolymorphism(){return this.getSignal("admin/view/polymorphism",{params:{appId:this.appId}})}getUsage(m){return this.getSignal("admin/view/usage",{params:{appId:this.appId,guid:m}})}static{this.\u0275fac=(()=>{let m;return function(A){return(m||(m=h.xGo(r)))(A||r)}})()}static{this.\u0275prov=h.jDH({token:r,factory:r.\u0275fac})}}return r})()},4007:(f,_,t)=>{t.d(_,{D:()=>n,y:()=>h});var i=t(1726);function h(p){return{[i.O.Boolean]:"toggle_on",[i.O.Custom]:"extension",[i.O.DateTime]:"today",[i.O.Empty]:"crop_free",[i.O.Entity]:"share",[i.O.Hyperlink]:"link",[i.O.Number]:"dialpad",[i.O.String]:"text_fields"}[p]??"device_unknown"}function n(p){return{[i.O.Boolean]:"Boolean (yes/no)",[i.O.Custom]:"Custom - ui-tools or custom types",[i.O.DateTime]:"Date and/or time",[i.O.Empty]:"Empty - for form-titles etc.",[i.O.Entity]:"Entity (other content-items)",[i.O.Hyperlink]:"Link / file reference",[i.O.Number]:"Number",[i.O.String]:"Text / string"}[p]??"device_unknown"}},1772:(f,_,t)=>{t.d(_,{I:()=>d,u:()=>s});var i=t(6647),h=t(9452),n=t(3550),p=t(6474),u=t(7580);const s="admin/app/";let d=(()=>{class c extends p.D{importApp(r,y,m=!1){const g=new FormData;return g.append("File",r),g.append("Name",y??""),this.http.post(this.apiUrl(s+"Import"),g,{params:{zoneId:this.zoneId}}).pipe((0,i.n)(A=>{if(m&&A.Messages[0]?.MessageType===n.G1.Warning){const l=prompt(A.Messages[0].Text+" Would you like to install it using another folder name?");if(l)return this.importApp(r,l,!0)}return(0,h.of)(A)}))}static{this.\u0275fac=(()=>{let r;return function(m){return(r||(r=u.xGo(c)))(m||c)}})()}static{this.\u0275prov=u.jDH({token:c,factory:c.\u0275fac})}}return c})()},8742:(f,_,t)=>{t.d(_,{h:()=>W,z:()=>o});var i=t(271),h=t(5445),n=t(1726),p=t(4007);const u={Boolean:{label:(0,p.D)(n.O.Boolean),description:"Yes/no or true/false values"},Custom:{label:(0,p.D)(n.O.Custom),description:"Use for things like gps-pickers (which writes into multiple fields) or for custom-data which serializes something exotic into the db like an array, a custom json or anything"},DateTime:{label:(0,p.D)(n.O.DateTime),description:"For date, time or combined values"},Empty:{label:(0,p.D)(n.O.Empty),description:"Use to structure your form"},Entity:{label:(0,p.D)(n.O.Entity),description:"One or more other content-items"},Hyperlink:{label:(0,p.D)(n.O.Hyperlink),description:"Hyperlink or reference to a picture / file"},Number:{label:(0,p.D)(n.O.Number),description:"Any kind of number"},String:{label:(0,p.D)(n.O.String),description:"Any kind of text"}};var d=t(6474),c=t(7580);const o="admin/field/all",y="admin/field/ReservedNames",T=h.X6+"SetTitle",R="admin/field/GetSharedFields";let W=(()=>{class P extends d.D{paramsAppId(e={}){return{params:{appid:this.appId,...e}}}dataTypes(){return this.getSignal("admin/field/DataTypes",this.paramsAppId(),[],e=>function s(P){const B=[];for(const e of P)B.push({name:e,label:u[e].label,icon:(0,p.y)(e),description:u[e].description});return B}(e))}getInputTypes(){return this.getSignal("admin/field/InputTypes",this.paramsAppId(),[],e=>e.map(a=>({dataType:a.Type.substring(0,a.Type.indexOf("-")),inputType:a.Type,label:a.Label,description:a.Description,isDefault:a.IsDefault,isObsolete:a.IsObsolete,isRecommended:a.IsRecommended,obsoleteMessage:a.ObsoleteMessage,icon:a.IsDefault?"stars":a.IsRecommended?"star":null,sort:(a.IsObsolete?"z":a.IsDefault?"a":a.IsRecommended?"b":"c")+a.Label})).sort((a,v)=>a.sort.localeCompare(v.sort)))}getReservedNames(){return this.getHttpApiUrl(y)}reservedNames(){return this.getSignal(y,null,{})}getFields(e){return this.getHttpApiUrl(o,this.paramsAppId({staticName:e})).pipe((0,i.T)(a=>{if(a)for(const v of a){if(!v.Metadata)continue;const M=v.Metadata;M.merged={...M.All,...M[v.Type],...M[v.InputType]}}return a}))}getFieldsSig(e){return this.getSignal(o,this.paramsAppId({staticName:e}),[],a=>{if(a)for(const v of a){if(!v.Metadata)continue;const M=v.Metadata;M.merged={...M.All,...M[v.Type],...M[v.InputType]}}return a})}getShareableFields(){return this.getHttpApiUrl(R,this.paramsAppId())}getShareableFieldsFor(e){return this.#t(R,e)}getAncestors(e){return this.#t("admin/field/GetAncestors",e)}getDescendants(e){return this.#t("admin/field/GetDescendants",e)}#t(e,a){return this.getHttpApiUrl(e,this.paramsAppId({attributeId:a}))}addInheritedField(e,a,v,M){return this.http.post(this.apiUrl("admin/field/AddInheritedField"),null,this.paramsAppId({contentTypeId:e.toString(),sourceType:a,sourceField:v,name:M}))}share(e,a=!0){return this.http.post(this.apiUrl("admin/field/Share"),null,{params:{appid:this.appId,attributeId:e.toString(),share:a}})}inherit(e,a){return this.http.post(this.apiUrl("admin/field/Inherit"),null,{params:{appid:this.appId,attributeId:e.toString(),inheritMetadataOf:a}})}reOrder(e,a){return this.http.post(this.apiUrl("admin/field/Sort"),null,{params:{appid:this.appId,contentTypeId:a.Id.toString(),order:JSON.stringify(e)}})}setTitle(e,a){return this.http.post(this.apiUrl(T),null,{params:{appid:this.appId,contentTypeId:a.Id.toString(),attributeId:e.Id.toString()}})}rename(e,a,v){return this.http.post(this.apiUrl("admin/field/Rename"),null,{params:{appid:this.appId,contentTypeId:a.toString(),attributeId:e.toString(),newName:v}})}delete(e,a){if(e.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl("admin/field/Delete"),{params:{appid:this.appId,contentTypeId:a.Id.toString(),attributeId:e.Id.toString()}})}add(e,a){return this.http.post(this.apiUrl("admin/field/Add"),null,{params:{AppId:this.appId,ContentTypeId:a.toString(),Id:e.Id.toString(),Type:e.Type,InputType:e.InputType,StaticName:e.StaticName,IsTitle:e.IsTitle.toString(),Index:e.SortOrder.toString()}})}updateInputType(e,a,v){return this.http.post(this.apiUrl("admin/field/InputType"),null,{params:{appId:this.appId,attributeId:e,field:a,inputType:v}})}static{this.\u0275fac=(()=>{let e;return function(v){return(e||(e=c.xGo(P)))(v||P)}})()}static{this.\u0275prov=c.jDH({token:P,factory:P.\u0275fac})}}return P})()},1726:(f,_,t)=>{t.d(_,{O:()=>i});const i={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},693:(f,_,t)=>{function i(n){return new Promise((p,u)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>{p(s.result.split(",")[1])},s.onerror=d=>{u(d)}})}function h(n){return new Promise((p,u)=>{const s=new FileReader;s.readAsText(n),s.onload=()=>{p(s.result)},s.onerror=d=>{u(d)}})}t.d(_,{d:()=>h,n:()=>i})},9234:(f,_,t)=>{t.d(_,{Gg:()=>m,Tr:()=>g,gb:()=>y});var i=t(1567),h=t(6647),n=t(6301),p=t(271),u=t(2938),s=t(4435),d=t(6474),c=t(4839),o=t(7580);const r={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},y="admin/entity/",m="admin/entity/list";let g=(()=>{class A extends d.D{constructor(){super(...arguments),this.log=(0,s.Tq)({EntityService:A},r),this.queryService=(0,u.d)(c.c)}getEntities$(I){return this.log.fnIf("getEntities"),I.pipe((0,i.p)(E=>null!=E),(0,h.n)(E=>this.getAvailableEntities(E.contentTypeName).pipe((0,n.t)(1))))}getAvailableEntities(I,E){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[I],itemIds:E,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,p.T)(D=>D.Default))}delete(I,E,T,D,O,S){return this.log.fnIf("delete",{appId:I,contentType:E,entityId:T,force:D,parentId:O,parent}),this.http.delete(this.apiUrl(y+"delete"),{params:{contentType:E,id:T.toString(),appId:I,force:D.toString(),...O&&{parentId:O.toString()},...O&&S&&{parentField:S}}})}static{this.\u0275fac=(()=>{let I;return function(T){return(I||(I=o.xGo(A)))(T||A)}})()}static{this.\u0275prov=o.jDH({token:A,factory:A.\u0275fac})}}return A})()},4839:(f,_,t)=>{t.d(_,{c:()=>s});var i=t(4435),h=t(8873),n=t(7580),p=t(6443);const u={all:!1,getAvailableEntities:!1,getEntities:!1};let s=(()=>{class d{constructor(o,r){this.http=o,this.context=r,this.log=(0,i.Tq)({QueryService:d},u)}getFromQuery(o,r,y,m){this.log.fnIf("getAvailableEntities",{queryUrl:o,params:r,fields:y,entitiesFilter:m});const g=!!r,E=(((r?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(g?`&${r}`:"")+"&$select="+(y??"")).substring(1);return this.http.post(`app/auto/query/${o}?${E}`,{Guids:m})}getEntities({contentTypes:o,itemIds:r,fields:y,log:m}){this.log.fnIf("getEntities",{log:m,contentTypes:o,itemIds:r,fields:y});const A=("&typeNames="+(o?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(r?.join(",")??"")+"&$select="+(y??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${A}`,{})}static{this.\u0275fac=function(r){return new(r||d)(n.KVO(p.Qq),n.KVO(h.o))}}static{this.\u0275prov=n.jDH({token:d,factory:d.\u0275fac})}}return d})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.00/dist/ng-edit/default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts.90acbc1624400b44.js.map