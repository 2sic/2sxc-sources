(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{vpZa:function(e,t,n){"use strict";n.r(t),n.d(t,"ContentExportComponent",function(){return y});var o=n("mrSG"),a=n("2Vo4"),r=n("cp0P"),c=n("fXoL"),i=n("0IaG"),s=n("tyNb"),l=n("VNq2"),b=n("r3uf"),u=n("uwFg"),g=n("ofXK"),d=n("3Pt+"),p=n("kmnG"),f=n("d3UM"),m=n("FKr1"),h=n("QibW"),V=n("bTqV");function v(e,t){if(1&e&&(c.Vb(0,"mat-option",24),c.Mc(1),c.Ub()),2&e){var n=t.$implicit;c.nc("value",n.key),c.Db(1),c.Nc(n.key)}}function M(e,t){if(1&e&&(c.Vb(0,"mat-radio-button",25),c.Mc(1),c.Ub()),2&e){var n=c.hc(2);c.Db(1),c.Oc(" Export selected ",n.itemIds.length," items ")}}function x(e,t){if(1&e){var n=c.Wb();c.Vb(0,"form",5,6),c.Vb(2,"div",7),c.Vb(3,"div"),c.Vb(4,"mat-form-field",8),c.Vb(5,"mat-label"),c.Mc(6,"Languages"),c.Ub(),c.Vb(7,"mat-select",9),c.dc("ngModelChange",function(e){return c.Ac(n),c.hc().formValues.language=e}),c.Vb(8,"mat-option",10),c.Mc(9,"All"),c.Ub(),c.Kc(10,v,2,2,"mat-option",11),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"div"),c.Vb(12,"p",12),c.Mc(13,"Export data"),c.Ub(),c.Vb(14,"mat-radio-group",13),c.dc("ngModelChange",function(e){return c.Ac(n),c.hc().formValues.recordExport=e}),c.Vb(15,"mat-radio-button",14),c.Mc(16,"No, just export blank data schema (for new data import) "),c.Ub(),c.Vb(17,"mat-radio-button",15),c.Mc(18,"Yes, export all content-items"),c.Ub(),c.Kc(19,M,2,1,"mat-radio-button",16),c.Ub(),c.Ub(),c.Vb(20,"div"),c.Vb(21,"p",12),c.Mc(22,"Value references to other languages"),c.Ub(),c.Vb(23,"mat-radio-group",17),c.dc("ngModelChange",function(e){return c.Ac(n),c.hc().formValues.languageReferences=e}),c.Vb(24,"mat-radio-button",18),c.Mc(25,"Keep references to other languages (for re-import) "),c.Ub(),c.Vb(26,"mat-radio-button",19),c.Mc(27,"Replace references with values"),c.Ub(),c.Ub(),c.Ub(),c.Vb(28,"div"),c.Vb(29,"p",12),c.Mc(30,"File / page references"),c.Ub(),c.Vb(31,"mat-radio-group",20),c.dc("ngModelChange",function(e){return c.Ac(n),c.hc().formValues.resourcesReferences=e}),c.Vb(32,"mat-radio-button",18),c.Mc(33,"Keep references (for re-import, for example Page:4711) "),c.Ub(),c.Vb(34,"mat-radio-button",19),c.Mc(35,"Replace references with real URLs (for example /Portals/0...) "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(36,"div",21),c.Vb(37,"button",22),c.dc("click",function(){return c.Ac(n),c.hc().closeDialog()}),c.Mc(38,"Cancel"),c.Ub(),c.Vb(39,"button",23),c.dc("click",function(){return c.Ac(n),c.hc().exportContent()}),c.Mc(40," Export Data "),c.Ub(),c.Ub(),c.Ub()}if(2&e){var o=c.yc(1),a=c.hc();c.Db(7),c.nc("ngModel",a.formValues.language),c.Db(3),c.nc("ngForOf",a.languages),c.Db(4),c.nc("ngModel",a.formValues.recordExport),c.Db(5),c.nc("ngIf",a.hasIdList),c.Db(4),c.nc("ngModel",a.formValues.languageReferences)("disabled","Blank"===a.formValues.recordExport),c.Db(8),c.nc("ngModel",a.formValues.resourcesReferences)("disabled","Blank"===a.formValues.recordExport),c.Db(8),c.nc("disabled",!o.form.valid)}}var y=function(){function e(e,t,n,o,r){this.dialogRef=e,this.route=t,this.contentExportService=n,this.appDialogConfigService=o,this.contentTypesService=r,this.hostClass="dialog-component",this.hasIdList=!1,this.loading$=new a.a(!1),this.contentType$=new a.a(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName");var c=this.route.snapshot.paramMap.get("selectedIds");this.hasIdList=!!c,this.hasIdList&&(this.itemIds=c.split(",").map(function(e){return parseInt(e,10)}))}return e.prototype.ngOnInit=function(){var e=this;this.loading$.next(!0);var t=this.contentTypesService.retrieveContentType(this.contentTypeStaticName),n=this.appDialogConfigService.getDialogSettings();Object(r.a)([t,n]).subscribe(function(t){var n=Object(o.g)(t,2),a=n[1];e.contentType$.next(n[0]);var r=a.Context.Language.All;e.languages=Object.keys(r).map(function(e){return{key:e,name:r[e]}}),e.formValues={defaultLanguage:a.Context.Language.Primary,contentTypeStaticName:e.contentTypeStaticName,language:"",recordExport:e.hasIdList?"Selection":"All",languageReferences:"Link",resourcesReferences:"Link"},e.loading$.next(!1)})},e.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.loading$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.exportContent=function(){this.contentExportService.exportContent(this.formValues,this.hasIdList&&"Selection"===this.formValues.recordExport?this.itemIds:null)},e.\u0275fac=function(t){return new(t||e)(c.Pb(i.f),c.Pb(s.a),c.Pb(l.a),c.Pb(b.a),c.Pb(u.a))},e.\u0275cmp=c.Jb({type:e,selectors:[["app-content-export"]],hostVars:1,hostBindings:function(e,t){2&e&&c.Yb("className",t.hostClass)},decls:11,vars:6,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/help","target","_blank"],["class","dialog-form",4,"ngIf"],[1,"dialog-form"],["ngForm","ngForm"],[1,"dialog-form-content","fancy-scrollbar-light"],["appearance","standard","color","accent"],["name","Language",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"field-label"],["name","RecordExport",3,"ngModel","ngModelChange"],["value","Blank"],["value","All"],["value","Selection",4,"ngIf"],["name","LanguageReferences",3,"ngModel","disabled","ngModelChange"],["value","Link"],["value","Resolve"],["name","ResourcesReferences",3,"ngModel","disabled","ngModelChange"],[1,"dialog-form-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["value","Selection"]],template:function(e,t){var n;1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Mc(2),c.ic(3,"async"),c.Ub(),c.Ub(),c.Vb(4,"p",2),c.Mc(5," This will generate an XML file which you can edit in Excel. If you just want to import new data, use this to export the schema that you can then fill in using Excel. Please visit "),c.Vb(6,"a",3),c.Mc(7,"https://2sxc.org/help"),c.Ub(),c.Mc(8," for more instructions.\n"),c.Ub(),c.Kc(9,x,41,9,"form",4),c.ic(10,"async")),2&e&&(c.Db(2),c.Oc("Export ",null==(n=c.jc(3,2,t.contentType$))?null:n.Name,""),c.Db(7),c.nc("ngIf",!1===c.jc(10,4,t.loading$)))},directives:[i.g,g.n,d.v,d.n,d.o,p.c,p.g,f.a,d.m,d.p,m.k,g.m,h.b,h.a,V.a],pipes:[g.b],styles:[".field-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px;font-size:14px}"]}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.03.00/ng-edit/content-export-component.ea937d4463b17402e1a1.js.map