{"version":3,"file":"projects_eav-ui_src_app_apps-management_apps-management_module_ts.2578766f26281a98.js","mappings":"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","names":["addAppFromFolderDialog","name","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","AddAppFromFolderComponent","__webpack_require__","e","then","bind","appsManagementDialog","AppsManagementNavComponent","Promise","all","createAppDialog","CreateAppComponent","createInheritedAppDialog","CreateInheritedAppComponent","SxcInsightsService","constructor","http","dnnContext","this","activatePageLog","duration","get","$2sxc","apiUrl","webApiLogRoot","params","toString","static","t","i0","i1","i2","fesm2022_core","wxM","factory","Éµfac","_r25","info_r17","$implicit","ctx_r23","openSideNavPath","link","url","_c0","label","_r28","ctx_r27","copyToClipboard","value","SystemInfoComponent_Conditional_0_For_12_Conditional_6_Template","_r39","info_r29","ctx_r37","target","SystemInfoComponent_Conditional_0_For_36_Conditional_6_Conditional_0_Template","SystemInfoComponent_Conditional_0_For_36_Conditional_6_Conditional_1_Template","_r44","ctx_r43","SystemInfoComponent_Conditional_0_For_36_Conditional_6_Template","SystemInfoComponent_Conditional_0_Conditional_119_Conditional_0_Template","_r14","errors","pattern","info_r46","SystemInfoComponent_Conditional_0_For_135_Conditional_6_Conditional_0_Template","SystemInfoComponent_Conditional_0_For_135_Conditional_6_Conditional_1_Template","_r58","ctx_r57","SystemInfoComponent_Conditional_0_For_135_Conditional_6_Template","SystemInfoComponent_Conditional_0_For_12_Template","SystemInfoComponent_Conditional_0_ng_container_19_Template","_r60","ctx_r59","openGlobalSettings","SystemInfoComponent_Conditional_0_For_36_Template","SystemInfoComponent_Conditional_0_ng_container_44_Template","ctx_r61","openSiteSettings","SystemInfoComponent_Conditional_0_Conditional_61_Template","SystemInfoComponent_Conditional_0_ng_container_64_Template","SystemInfoComponent_Conditional_0_Conditional_76_Template","SystemInfoComponent_Conditional_0_ng_container_79_Template","SystemInfoComponent_Conditional_0_ng_container_98_Template","ctx_r62","openInsights","_r13","ctx_r63","$event","ctx_r64","pageLogDuration","SystemInfoComponent_Conditional_0_Conditional_119_Template","SystemInfoComponent_Conditional_0_For_135_Template","ctx","systemInfos","_r2","_c1","siteInfos","lsEnabled","_c2","cspEnabled","_c3","_c4","ctx_r0","positiveWholeNumber","loading","touched","valid","warningIcon","warningInfos","tmp_2_0","icon_r65","undefined","label_r66","SystemInfoComponent","BaseComponent","router","route","zoneService","snackBar","dialogService","sxcInsightsService","featuresService","super","ngOnInit","systemInfoSet$","BehaviorSubject","languages$","loading$","buildViewModel","getSystemInfo","getLanguages","subscription","add","refreshOnChildClosedShallow","subscribe","ngOnDestroy","complete","text","open","getSitePrimaryApp$","sitePrimaryApp","openAppAdministration","ZoneId","AppId","getGlobalPrimaryApp$","globalPrimaryApp","window","sideNavPath","includes","navigate","replace","form","next","res","document","activeElement","HTMLElement","blur","resetForm","error","systemInfoSet","languages","systemInfos$","pipe","map","System","EavVersion","Platform","PlatformVersion","Zones","Fingerprint","License","Owner","siteInfos$","combineLatest","allLanguages","length","activeLanguages","filter","l","IsEnabled","Site","SiteId","Apps","warningIcon$","Messages","WarningsObsolete","WarningsOther","warningInfos$","lsEnabled$","isEnabled$","FeatureNames","LightSpeed","cspEnabled$","ContentSecurityPolicy","viewModel$","i3","i4","i5","i6","In1","selectors","features","decls","vars","consts","template","rf","SystemInfoComponent_Conditional_0_Template","SystemInfoComponent_ng_template_2_Template","SystemInfoComponent_contFlowTmp","_r7","ctx_r6","openLightspeedFeatureInfo","_r11","ctx_r10","openLightspeed","AppsListActionsComponent_Conditional_5_Conditional_1_Template","AppsListActionsComponent_Conditional_5_Conditional_2_Template","ctx_r3","appHasLightSpeed","app","Lightspeed","Title","appLightSpeedEnabled","ctx_r12","flushCache","ctx_r14","deleteApp","ctx_r5","IsApp","AppsListActionsComponent","agInit","data","lightspeedEnabled","Id","refresh","onOpenLightspeed","onFlush","onDelete","AppsListActionsComponent_Conditional_2_Template","AppsListActionsComponent_Conditional_3_Template","AppsListActionsComponent_Conditional_4_Template","AppsListActionsComponent_Conditional_5_Template","AppsListActionsComponent_ng_template_11_Template","IsGlobal","IsInherited","_r4","AppListShowIcons","states","true","tooltip","icon","false","AppListCodeErrorIcons","clickable","getUrl","AgBoolCellIconsDefault","AgBoolIconRenderer_Conditional_1_ng_container_1_Template","_r3","ctx_r1","ctx_r2","AgBoolIconRenderer","allSettings","settings","d","AgBoolIconRenderer_Conditional_1_Template","AgBoolIconRenderer_Conditional_2_Template","AgBoolIconRenderer_ng_template_3_Template","importApp","ctx_r4","openChange","browseCatalog","createInheritedApp","ctx_r7","addFromFolder","ctx_r8","ctx_r9","createApp","apps","gridOptions","fabOpen","isAddFromFolderEnabled","AppsListComponent","appsListService","context","dialog","viewContainerRef","changeDetectorRef","fabOpen$","buildGridOptions","lightspeedEnabled$","refreshApps$","Subject","log","EavLogger","appsLog","rxTap","apps$","startWith","switchMap","getAll","catchError","of","shareReplay","isAddFromFolderEnabledLog","isAddFromFolderEnabled$","AppSyncWithSiteFiles","relativeTo","parent","firstChild","files","state","result","prompt","Name","delete","alert","flushApp","confirm","openLightSpeed","formUrl","convertFormToUrl","AppAdminHelpers","getLightSpeedEditParams","zoneId","openApp","openLightSpeedFeatInfo","FeatureComponentBase","openDialog","defaultGridOptions","columnDefs","headerName","field","width","headerClass","cellClass","split","sortable","valueGetter","cellRenderer","IdFieldComponent","cellRendererParams","tooltipGetter","Guid","BooleanFilterComponent","IsHidden","flex","minWidth","sort","onCellClicked","Thumbnail","Folder","Version","Items","pinned","AppsListComponent_Conditional_0_Template","AppsListComponent_contFlowTmp","SiteLanguagesStatusComponent","toggleLanguage","event","onToggleLanguage","checked","SiteLanguagesComponent","refreshLanguages$","share","language","enable","Code","Culture","SiteLanguagesComponent_Conditional_0_Template","SiteLanguagesComponent_contFlowTmp","webApiLicense","FeaturesConfigService","saveFeatures","featuresStates","post","webApiFeatures","getLicenses","uploadLicense","file","formData","FormData","append","info","Success","MessageType","FileUploadMessageTypes","Error","Text","Message","retrieveLicense","id_r4","_r6","guid_r7","_r9","link_r11","findOutMore","FeatureDetailsDialogComponent","dialogData","dialogRef","closeDialog","close","MAT_DIALOG_DATA","FeatureDetailsDialogComponent_Conditional_7_Template","FeatureDetailsDialogComponent_Conditional_8_Template","FeatureDetailsDialogComponent_Conditional_9_Template","FeatureDetailsDialogComponent_Conditional_11_Template","feature","Description","FeatureDetailsDialogComponent_contFlowTmp","NameId","Security","Impact","Link","FeaturesListEnabledReasonComponent","EnabledReasonDetailed","FeaturesListEnabledComponent","FeaturesStatusComponent","disabled","isDisabled","toggle","nextValue","onToggle","ExpirationExtension","expandFeature","getExpiration","Expiration","expandLicense","license","lowestExpiration","Features","f","dateString","ExpMessage","ExpIcon","ExpWarningIcon","expires","startsWith","expDate","Date","toDateString","setDate","getDate","endsWith","AgGridHeightDirective","elementRef","itemsCount","headerHeight","rowHeight","maxRows","extraHeight","element","nativeElement","ngOnChanges","changes","style","height","Sc5","inputs","LicensesOrderPipe","transform","licenses","Array","isArray","a","b","Priority","UTH","pure","ActiveFeaturesCountPipe","license_r3","LicenseInfoComponent_Conditional_0_For_2_Conditional_17_Template","_r8","expanded","LicenseInfoComponent_Conditional_0_For_2_Template","trackLicenses","LicenseInfoComponent","featuresConfigService","disabled$","refreshLicenses$","tap","index","openRegistration","showFeatureDetails","autoFocus","markForCheck","toggleFeature","enabled","forkJoin","FeatureGuid","Enabled","timer","cellDefaults","cellDefaultsTextFilter","tooltipValueGetter","IsConfigurable","viewQuery","AgGridAngular","LicenseInfoComponent_Conditional_0_Template","LicenseInfoComponent_contFlowTmp","vm_r1","_r10","openLicenseRegistration","RegistrationComponent_Conditional_0_Conditional_22_Template","RegistrationComponent_Conditional_0_Conditional_37_Template","_r12","ctx_r11","ctx_r13","registerManually","openLicenseUpload","logo","appsManagementRoutes","path","component","DialogEntryComponent","children","redirectTo","pathMatch","title","breadcrumb","RegistrationComponent","globalConfigService","hostClass","debugEnabled$","getDebugEnabled$","refreshSystemInfoSet$","FileUploadDialogComponent","description","allowedFileTypes","upload$","afterClosed","hostVars","hostBindings","RegistrationComponent_Conditional_0_Template","RegistrationComponent_contFlowTmp","loadChildren","m","ImportAppModule","AppAdministrationModule","matcher","editRoot","EditModule","refreshEditRoot","RefreshEditModule","AppsManagementRoutingModule","a4G","s3X","RouterModule","forChild","AppsManagementModule","Context","AppsListService","ZoneService","DialogService","AppDialogConfigService","provide","MAT_SELECT_CONFIG","useValue","hideSingleSelectionIndicator","MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS","hideIcon","imports","SharedComponentsModule","MatDialogModule","CommonModule","SxcGridModule","MatButtonModule","MatIconModule","MatSlideToggleModule","MatTabsModule","MatRippleModule","EcoFabSpeedDialModule","MatCardModule","FormsModule","MatInputModule","MatMenuModule","ReactiveFormsModule","MatSelectModule","MatSnackBarModule","MatExpansionModule","MatBadgeModule","FeaturesModule","MatToolbarModule","MatSidenavModule","MatListModule","webApiAppRoot","getInheritable","getPendingApps","create","inheritAppId","templateId","installPendingApps","pendingApps","appId","_angular_core__WEBPACK_IMPORTED_MODULE_2__"],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/apps-management/add-app-from-folder/add-app-from-folder-dialog.config.ts","./projects/eav-ui/src/app/apps-management/apps-management-nav/apps-management-dialog.config.ts","./projects/eav-ui/src/app/apps-management/create-app/create-app-dialog.config.ts","./projects/eav-ui/src/app/apps-management/create-inherited-app/create-inherited-app-dialog.config.ts","./projects/eav-ui/src/app/apps-management/services/sxc-insights.service.ts","./projects/eav-ui/src/app/apps-management/system-info/system-info.component.html","./projects/eav-ui/src/app/apps-management/system-info/system-info.component.ts","./projects/eav-ui/src/app/apps-management/apps-list/apps-list-actions/apps-list-actions.component.html","./projects/eav-ui/src/app/apps-management/apps-list/apps-list-actions/apps-list-actions.component.ts","./projects/eav-ui/src/app/apps-management/apps-list/app-list-grid-config.ts","./projects/eav-ui/src/app/shared/ag-grid/apps-list-show/ag-bool-icon-params.ts","./projects/eav-ui/src/app/shared/ag-grid/apps-list-show/ag-bool-icon-renderer.html","./projects/eav-ui/src/app/shared/ag-grid/apps-list-show/ag-bool-icon-renderer.component.ts","./projects/eav-ui/src/app/apps-management/apps-list/apps-list.component.html","./projects/eav-ui/src/app/apps-management/apps-list/apps-list.component.ts","./projects/eav-ui/src/app/apps-management/site-languages/site-languages-status/site-languages-status.component.ts","./projects/eav-ui/src/app/apps-management/site-languages/site-languages-status/site-languages-status.component.html","./projects/eav-ui/src/app/apps-management/site-languages/site-languages.component.html","./projects/eav-ui/src/app/apps-management/site-languages/site-languages.component.ts","./projects/eav-ui/src/app/apps-management/services/features-config.service.ts","./projects/eav-ui/src/app/apps-management/licence-info/feature-details-dialog/feature-details-dialog.component.html","./projects/eav-ui/src/app/apps-management/licence-info/feature-details-dialog/feature-details-dialog.component.ts","./projects/eav-ui/src/app/apps-management/licence-info/features-list-enabled-reason/features-list-enabled-reason.component.ts","./projects/eav-ui/src/app/apps-management/licence-info/features-list-enabled-reason/features-list-enabled-reason.component.html","./projects/eav-ui/src/app/apps-management/licence-info/features-list-enabled/features-list-enabled.component.ts","./projects/eav-ui/src/app/apps-management/licence-info/features-list-enabled/features-list-enabled.component.html","./projects/eav-ui/src/app/apps-management/licence-info/features-status/features-status.component.ts","./projects/eav-ui/src/app/apps-management/licence-info/features-status/features-status.component.html","./projects/eav-ui/src/app/features/expiration-extension.ts","./projects/eav-ui/src/app/apps-management/licence-info/ag-grid-height.directive.ts","./projects/eav-ui/src/app/apps-management/licence-info/licenses-order.pipe.ts","./projects/eav-ui/src/app/apps-management/licence-info/active-features-count.pipe.ts","./projects/eav-ui/src/app/apps-management/licence-info/license-info.component.html","./projects/eav-ui/src/app/apps-management/licence-info/license-info.component.ts","./projects/eav-ui/src/app/apps-management/sub-dialogs/registration/registration.component.html","./projects/eav-ui/src/app/apps-management/apps-management-routing.module.ts","./projects/eav-ui/src/app/apps-management/sub-dialogs/registration/registration.component.ts","./projects/eav-ui/src/app/apps-management/sub-dialogs/registration/assets/2sxc-patrons.svg","./projects/eav-ui/src/app/apps-management/apps-management.module.ts","./projects/eav-ui/src/app/apps-management/services/apps-list.service.ts"],"sourcesContent":["import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const addAppFromFolderDialog: DialogConfig = {\r\n  name: 'ADD_FROM_FOLDER_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'small',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { AddAppFromFolderComponent } = await import('./add-app-from-folder.component');\r\n    return AddAppFromFolderComponent;\r\n  }\r\n};\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const appsManagementDialog: DialogConfig = {\r\n  name: 'APPS_MANAGEMENT_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { AppsManagementNavComponent } = await import('./apps-management-nav.component');\r\n    return AppsManagementNavComponent;\r\n  }\r\n};\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const createAppDialog: DialogConfig = {\r\n  name: 'CREATE_APP_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'small',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { CreateAppComponent } = await import('./create-app.component');\r\n    return CreateAppComponent;\r\n  }\r\n};\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const createInheritedAppDialog: DialogConfig = {\r\n  name: 'CREATE_INHERITED_APP_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'small',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { CreateInheritedAppComponent } = await import('./create-inherited-app.component');\r\n    return CreateInheritedAppComponent;\r\n  }\r\n};\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\nconst webApiLogRoot = 'sys/log/';\r\n\r\n@Injectable()\r\nexport class SxcInsightsService {\r\n  constructor(private http: HttpClient, private dnnContext: DnnContext) { }\r\n\r\n  activatePageLog(duration: number) {\r\n    return this.http.get<string>(this.dnnContext.$2sxc.http.apiUrl(webApiLogRoot + 'EnableDebug'), {\r\n      params: { duration: duration.toString() }\r\n    });\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"eav-cards-box\">\r\n    <!-- Platform Info -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header>\r\n        <div mat-card-avatar>\r\n          <mat-icon class=\"eav-card-header-avatar-icon\">settings_applications</mat-icon>\r\n        </div>\r\n        <mat-card-title>Platform</mat-card-title>\r\n        <mat-card-subtitle>What you are running</mat-card-subtitle>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        @for (info of vm.systemInfos; track info) {\r\n          <div class=\"eav-info-row\">\r\n            <div class=\"eav-info-row__label\">{{ info.label }}:</div>\r\n            <div class=\"eav-info-row__value\">\r\n              <span class=\"eav-info-row__value__span eav-click\" [tippy]=\"info.value\"\r\n                (click)=\"copyToClipboard(info.value)\">{{ info.value }}</span>\r\n              @if (info.link) {\r\n                <a class=\"eav-info-row__link\" [routerLink]=\"['/']\" (click)=\"openSideNavPath(info.link.url)\">\r\n                  {{ info.link.label }}\r\n                </a>\r\n              }\r\n            </div>\r\n          </div>\r\n        }\r\n        <h4>Global Settings</h4>\r\n        <p>\r\n          This includes both pre-defined SystemSettings as well as custom Settings.\r\n          It will affect the entire Installation.\r\n        </p>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/settings' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"openGlobalSettings()\">\r\n          <mat-icon class=\"eav-icon\">open_in_new</mat-icon>\r\n          <span>Open Global Settings</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Site Info -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header>\r\n        <div mat-card-avatar>\r\n          <mat-icon class=\"eav-card-header-avatar-icon\">public</mat-icon>\r\n        </div>\r\n        <mat-card-title>This Site</mat-card-title>\r\n        <mat-card-subtitle>The current Site you're on</mat-card-subtitle>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        @for (info of vm.siteInfos; track info) {\r\n          <div class=\"eav-info-row\">\r\n            <div class=\"eav-info-row__label\">{{ info.label }}:</div>\r\n            <div class=\"eav-info-row__value\">\r\n              <span [tippy]=\"info.value\" (click)=\"copyToClipboard(info.value)\">{{ info.value }}</span>\r\n              @if (info.link) {\r\n                @if (info.link.target === 'angular') {\r\n                  <a [routerLink]=\"['/']\" class=\"eav-info-row__link\" (click)=\"openSideNavPath(info.link.url)\" >\r\n                  {{info.link.label }}\r\n                  </a>\r\n                }\r\n                @if (info.link.target !== 'angular') {\r\n                  <a class=\"eav-info-row__link\" [href]=\"info.link.url\" [target]=\"info.link.target\">{{ info.link.label }}</a>\r\n                }\r\n              }\r\n            </div>\r\n          </div>\r\n        }\r\n        <div class=\"card-content-separator\"></div>\r\n        <h4>Site Settings</h4>\r\n        <p>\r\n          This includes both pre-defined SystemSettings as well as custom Settings.\r\n          It will affect the entire Site / Portal.\r\n        </p>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/settings' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"openSiteSettings()\">\r\n          <mat-icon class=\"eav-icon\">open_in_new</mat-icon>\r\n          <span>Open Site Settings</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Performance / Lightspeed -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header>\r\n        <div mat-card-avatar>\r\n          <mat-icon class=\"eav-card-header-avatar-icon\">bolt</mat-icon>\r\n        </div>\r\n        <mat-card-title>Performance</mat-card-title>\r\n        <mat-card-subtitle>Performance Enhancements and Caching</mat-card-subtitle>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <app-feature-text-info [featureNameId]=\"'LightSpeedOutputCache'\" [asInfo]=\"true\"></app-feature-text-info>\r\n        @if (vm.lsEnabled) {\r\n          <div>\r\n            LightSpeed is enabled.\r\n            Configure it in each site/app as you need.\r\n          </div>\r\n        }\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/lightspeed' }\"></ng-container>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Security -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header>\r\n        <div mat-card-avatar>\r\n          <mat-icon class=\"eav-card-header-avatar-icon\">local_police</mat-icon>\r\n        </div>\r\n        <mat-card-title>Security</mat-card-title>\r\n        <mat-card-subtitle>System Security Features</mat-card-subtitle>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <app-feature-text-info [featureNameId]=\"'ContentSecurityPolicy'\" [asInfo]=\"true\"></app-feature-text-info>\r\n        @if (vm.cspEnabled) {\r\n          <div>\r\n            ContentSecurityPolicy is enabled.\r\n            Configure it in each site/app as you need.\r\n          </div>\r\n        }\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/csp' }\"></ng-container>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Insights -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header>\r\n        <div mat-card-avatar>\r\n          <mat-icon class=\"eav-card-header-avatar-icon\">speed</mat-icon>\r\n        </div>\r\n        <mat-card-title>2sxc Insights</mat-card-title>\r\n        <mat-card-subtitle>See what's happening under the hood</mat-card-subtitle>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <h4>2sxc Insights for Super Users</h4>\r\n        <p>\r\n          This is to access a special section to see what is really in the server memory.\r\n          It's intended for extensive debugging - see also\r\n          <a href=\"https://2sxc.org/en/blog/post/using-2sxc-insights\" target=\"_blank\">this blog post</a>.\r\n        </p>\r\n        <div align=\"start\">\r\n          <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/insights' }\"></ng-container>\r\n          <button mat-button class=\"eav-button__with-icon\" (click)=\"openInsights()\">\r\n            <mat-icon class=\"eav-icon\">open_in_new</mat-icon>\r\n            <span>Open 2sxc Insights</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"card-content-separator\"></div>\r\n        <h4>Activate Page Level Logging</h4>\r\n        <form #activateLogForm=\"ngForm\" class=\"activate-log-form\" (ngSubmit)=\"activatePageLog(activateLogForm)\">\r\n          <div>\r\n            This will place insights-logs in the HTML of the user output for users with <code>?debug=true</code> in the\r\n            url.\r\n            It can only be activated for short periods of time.\r\n          </div>\r\n          <mat-form-field color=\"accent\" class=\"eav-form-field\">\r\n            <mat-label>Duration in Minutes</mat-label>\r\n            <input matInput type=\"number\" min=\"0\" required [pattern]=\"positiveWholeNumber\" [(ngModel)]=\"pageLogDuration\"\r\n              name=\"Duration\" #duration=\"ngModel\" [disabled]=\"vm.loading\">\r\n          </mat-form-field>\r\n          @if (duration.touched && duration.errors) {\r\n            @if (duration.errors.pattern) {\r\n              <app-field-hint [isError]=\"true\">\r\n                Only positive whole numbers\r\n              </app-field-hint>\r\n            }\r\n          }\r\n        </form>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"end\">\r\n        <button mat-raised-button type=\"submit\" color=\"accent\" [disabled]=\"!activateLogForm.valid || vm.loading\">\r\n          Activate\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Warnings -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header>\r\n        <div mat-card-avatar>\r\n          <mat-icon class=\"eav-card-header-avatar-icon\">{{ vm.warningIcon }}</mat-icon>\r\n        </div>\r\n        <mat-card-title>Warnings</mat-card-title>\r\n        <mat-card-subtitle>System and Code Warnings</mat-card-subtitle>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        @for (info of vm.warningInfos; track info) {\r\n          <div class=\"eav-info-row\">\r\n            <div class=\"eav-info-row__label eav-long\">{{ info.label }}:</div>\r\n            <div class=\"eav-info-row__value\">\r\n              <span [tippy]=\"info.value\" (click)=\"copyToClipboard(info.value)\">{{ info.value }}</span>\r\n              @if (info.link) {\r\n                @if (info.link.target === 'angular') {\r\n                  <a class=\"eav-info-row__link\" [routerLink]=\"info.link.url\">\r\n                    {{info.link.label}}</a>\r\n                }\r\n                @if (info.link.target !== 'angular') {\r\n                  <a class=\"eav-info-row__link\" [href]=\"info.link.url\" [target]=\"info.link.target\">{{ info.link.label }}</a>\r\n                }\r\n              }\r\n            </div>\r\n          </div>\r\n        }\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n    </mat-card>\r\n  </div>\r\n}\r\n\r\n\r\n<ng-template #docsLink let-icon let-label let-link=\"link\">\r\n  <a mat-button class=\"eav-button__with-icon\" href=\"{{link}}\" target=\"_blank\" [tippy]=\"'online documentation'\">\r\n    <mat-icon class=\"eav-icon\">{{ icon ?? \"menu_book\" }}</mat-icon>\r\n    <span>{{ label }}</span>\r\n  </a>\r\n</ng-template>\r\n\r\n<router-outlet></router-outlet>\r\n","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, map, Observable } from 'rxjs';\r\nimport { DialogSettings } from '../../app-administration/models';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { copyToClipboard } from '../../shared/helpers/copy-to-clipboard.helper';\r\nimport { EavWindow } from '../../shared/models/eav-window.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { FeaturesService } from '../../shared/services/features.service';\r\nimport { SiteLanguage } from '../models/site-language.model';\r\nimport { SystemInfoSet } from '../models/system-info.model';\r\nimport { SxcInsightsService } from '../services/sxc-insights.service';\r\nimport { ZoneService } from '../services/zone.service';\r\nimport { InfoTemplate, SystemInfoViewModel } from './system-info.models';\r\nimport { AppDialogConfigService } from '../../app-administration/services';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n@Component({\r\n  selector: 'app-system-info',\r\n  templateUrl: './system-info.component.html',\r\n  styleUrls: ['./system-info.component.scss'],\r\n})\r\nexport class SystemInfoComponent extends BaseComponent implements OnInit, OnDestroy {\r\n\r\n  pageLogDuration: number;\r\n  positiveWholeNumber = /^[1-9][0-9]*$/;\r\n  viewModel$: Observable<SystemInfoViewModel>;\r\n\r\n  private systemInfoSet$: BehaviorSubject<SystemInfoSet | undefined>;\r\n  private languages$: BehaviorSubject<SiteLanguage[] | undefined>;\r\n  private loading$: BehaviorSubject<boolean>;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private zoneService: ZoneService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n    private sxcInsightsService: SxcInsightsService,\r\n    private featuresService: FeaturesService,\r\n  ) {\r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.systemInfoSet$ = new BehaviorSubject<SystemInfoSet | undefined>(undefined);\r\n    this.languages$ = new BehaviorSubject<SiteLanguage[] | undefined>(undefined);\r\n    this.loading$ = new BehaviorSubject<boolean>(false);\r\n    this.buildViewModel();\r\n    this.getSystemInfo();\r\n    this.getLanguages();\r\n    this.subscription.add(this.refreshOnChildClosedShallow().subscribe(() => {\r\n      this.buildViewModel();\r\n      this.getSystemInfo();\r\n      this.getLanguages();\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.systemInfoSet$.complete();\r\n    this.languages$.complete();\r\n    this.loading$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n\r\n  openSiteSettings(): void {\r\n    this.featuresService.getSitePrimaryApp$().subscribe(sitePrimaryApp => {\r\n      this.dialogService.openAppAdministration(sitePrimaryApp.ZoneId, sitePrimaryApp.AppId, 'app');\r\n    })\r\n  }\r\n\r\n  openGlobalSettings(): void {\r\n    this.featuresService.getGlobalPrimaryApp$().subscribe(globalPrimaryApp => {\r\n      this.dialogService.openAppAdministration(globalPrimaryApp.ZoneId, globalPrimaryApp.AppId, 'app');\r\n    })\r\n  }\r\n\r\n  openInsights() {\r\n    window.open(window.$2sxc.http.apiUrl('sys/insights/help'), '_blank');\r\n  }\r\n\r\n\r\n  openSideNavPath(sideNavPath: string): void {\r\n\r\n    // Url are /2/apps/system/registration, sideNavPath are only the last part of the url\r\n    if (sideNavPath.includes('registration'))\r\n    sideNavPath = 'registration';\r\n\r\n    this.router.navigate([this.router.url.replace('system', '') + sideNavPath]);\r\n  }\r\n\r\n  activatePageLog(form: NgForm) {\r\n    this.loading$.next(true);\r\n    this.snackBar.open('Activating...');\r\n    this.sxcInsightsService.activatePageLog(this.pageLogDuration).subscribe(res => {\r\n      this.loading$.next(false);\r\n      this.snackBar.open(res, null, { duration: 4000 });\r\n    });\r\n    if (document.activeElement instanceof HTMLElement) {\r\n      document.activeElement.blur();\r\n    }\r\n    form.resetForm();\r\n  }\r\n\r\n  private getSystemInfo(): void {\r\n    this.zoneService.getSystemInfo().subscribe({\r\n      error: () => {\r\n        this.systemInfoSet$.next(undefined);\r\n      },\r\n      next: (systemInfoSet) => {\r\n        this.systemInfoSet$.next(systemInfoSet);\r\n      },\r\n    });\r\n  }\r\n\r\n  private getLanguages(): void {\r\n    this.zoneService.getLanguages().subscribe({\r\n      error: () => {\r\n        this.languages$.next(undefined);\r\n      },\r\n      next: (languages) => {\r\n        this.languages$.next(languages);\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildViewModel(): void {\r\n    const systemInfos$ = this.systemInfoSet$.pipe(\r\n      map(systemInfoSet => {\r\n        if (systemInfoSet == null) { return; }\r\n        const info: InfoTemplate[] = [\r\n          { label: 'CMS', value: `2sxc v.${systemInfoSet.System.EavVersion}` },\r\n          { label: 'Platform', value: `${systemInfoSet.System.Platform} v.${systemInfoSet.System.PlatformVersion}` },\r\n          { label: 'Zones', value: systemInfoSet.System.Zones.toString() },\r\n          { label: 'Fingerprint', value: systemInfoSet.System.Fingerprint },\r\n          {\r\n            label: 'Registered to',\r\n            value: systemInfoSet.License.Owner || '(unregistered)',\r\n            link: systemInfoSet.License.Owner\r\n              ? {\r\n                url: this.router.url + '/' + \"registration\",\r\n                label: 'manage',\r\n                target: 'angular',\r\n              }\r\n              : {\r\n                url: this.router.url + '/' + \"registration\",\r\n                label: 'register',\r\n                target: 'angular',\r\n              },\r\n          },\r\n        ];\r\n        return info;\r\n      })\r\n    );\r\n    const siteInfos$ = combineLatest([this.systemInfoSet$, this.languages$]).pipe(\r\n      map(([systemInfoSet, languages]) => {\r\n        if (systemInfoSet == null || languages == null) { return; }\r\n        const allLanguages = languages.length;\r\n        const activeLanguages = languages.filter(l => l.IsEnabled).length;\r\n        const info: InfoTemplate[] = [\r\n          { label: 'Zone', value: systemInfoSet.Site.ZoneId.toString() },\r\n          { label: 'Site', value: systemInfoSet.Site.SiteId.toString() },\r\n          {\r\n            label: 'Languages',\r\n            value: `${activeLanguages}/${allLanguages}`,\r\n            link: {\r\n              url: 'languages',\r\n              label: 'manage',\r\n              target: 'angular',\r\n            },\r\n          },\r\n          {\r\n            label: 'Apps',\r\n            value: systemInfoSet.Site.Apps.toString(),\r\n            link: {\r\n              url: 'list',\r\n              label: 'manage',\r\n              target: 'angular',\r\n            },\r\n          },\r\n        ];\r\n        return info;\r\n      })\r\n    );\r\n    const warningIcon$ = this.systemInfoSet$.pipe(\r\n      map(systemInfoSet => {\r\n        if (systemInfoSet == null) { return; }\r\n        if (systemInfoSet.Messages.WarningsObsolete || systemInfoSet.Messages.WarningsOther) {\r\n          return 'warning';\r\n        }\r\n        return 'check';\r\n      }),\r\n    );\r\n    const warningInfos$ = this.systemInfoSet$.pipe(\r\n      map(systemInfoSet => {\r\n        if (systemInfoSet == null) { return; }\r\n        const info: InfoTemplate[] = [\r\n          {\r\n            label: 'Warnings Obsolete',\r\n            value: systemInfoSet.Messages.WarningsObsolete.toString(),\r\n            link: !systemInfoSet.Messages.WarningsObsolete\r\n              ? undefined\r\n              : {\r\n                url: window.$2sxc.http.apiUrl('sys/insights/logs?key=warnings-obsolete'),\r\n                label: 'review',\r\n                target: '_blank',\r\n              },\r\n          },\r\n          {\r\n            label: 'Warnings Other',\r\n            value: systemInfoSet.Messages.WarningsOther.toString(),\r\n            link: !systemInfoSet.Messages.WarningsOther\r\n              ? undefined\r\n              : {\r\n                url: window.$2sxc.http.apiUrl('sys/insights/logs'),\r\n                label: 'review',\r\n                target: '_blank',\r\n              },\r\n          },\r\n        ];\r\n        return info;\r\n      }),\r\n    );\r\n    const lsEnabled$ = this.featuresService.isEnabled$(FeatureNames.LightSpeed);\r\n    const cspEnabled$ = this.featuresService.isEnabled$(FeatureNames.ContentSecurityPolicy);\r\n    this.viewModel$ = combineLatest([systemInfos$, siteInfos$, this.loading$, warningIcon$, warningInfos$, lsEnabled$, cspEnabled$]).pipe(\r\n      map(([systemInfos, siteInfos, loading, warningIcon, warningInfos, lsEnabled, cspEnabled]) => {\r\n        const viewModel: SystemInfoViewModel = {\r\n          systemInfos,\r\n          siteInfos,\r\n          loading,\r\n          warningIcon,\r\n          warningInfos,\r\n          lsEnabled,\r\n          cspEnabled\r\n        };\r\n        // console.log('2dm VM', viewModel);\r\n        return viewModel;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button icon\"\r\n    [tippy]=\"app.IsGlobal ? 'This app is global' : app.IsInherited ? 'This app is inherited' : ''\"\r\n    [tippyDisabled]=\"!app.IsGlobal && !app.IsInherited\">\r\n    @if (app.IsGlobal) {\r\n      <mat-icon>foundation</mat-icon>\r\n    }\r\n    @if (app.IsInherited) {\r\n      <mat-icon>holiday_village</mat-icon>\r\n    }\r\n  </div>\r\n  @if (!lightspeedEnabled) {\r\n    <div class=\"eav-grid-action-button disabled\" tippy=\"Lightspeed is disabled\"\r\n      (click)=\"openLightspeedFeatureInfo()\">\r\n      <mat-icon matBadgeSize=\"small\" matBadge=\"ð\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        bolt\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n\r\n  @if (lightspeedEnabled) {\r\n    <div class=\"eav-grid-action-button {{ appHasLightSpeed ? '' : 'disabled'}}\" matRipple\r\n      [tippy]=\"appHasLightSpeed ? app.Lightspeed.Title : 'App not yet configured for LightSpeed'\"\r\n      (click)=\"openLightspeed()\">\r\n      @if (appLightSpeedEnabled) {\r\n        <mat-icon matBadgeSize=\"small\" matBadge=\"â\" matBadgePosition=\"below after\"\r\n          aria-hidden=\"false\">\r\n          bolt\r\n        </mat-icon>\r\n      }\r\n      @if (!appLightSpeedEnabled) {\r\n        <mat-icon matBadgeSize=\"small\" matBadge=\"â\" matBadgePosition=\"below after\"\r\n          aria-hidden=\"false\">\r\n          bolt\r\n        </mat-icon>\r\n      }\r\n    </div>\r\n  }\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"flushCache()\">\r\n      <mat-icon>cached</mat-icon>\r\n      <span>Flush cache</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"!app.IsApp\" (click)=\"deleteApp()\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { App } from '../../models/app.model';\r\nimport { AppsListActionsParams } from './apps-list-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-apps-list-actions',\r\n  templateUrl: './apps-list-actions.component.html',\r\n  styleUrls: ['./apps-list-actions.component.scss'],\r\n})\r\nexport class AppsListActionsComponent implements ICellRendererAngularComp {\r\n  app: App;\r\n\r\n  public params: ICellRendererParams & AppsListActionsParams;\r\n  public lightspeedEnabled: boolean;\r\n  public appHasLightSpeed: boolean;\r\n  public appLightSpeedEnabled: boolean;\r\n\r\n  agInit(params: ICellRendererParams & AppsListActionsParams): void {\r\n    this.params = params;\r\n    this.app = this.params.data;\r\n    this.lightspeedEnabled = this.params.lightspeedEnabled();\r\n    this.appHasLightSpeed = this.app.Lightspeed?.Id != null; //.IsEnabled == true;\r\n    this.appLightSpeedEnabled = this.app.Lightspeed?.IsEnabled == true;\r\n  }\r\n\r\n//   appLightSpeedExits(): boolean {\r\n// console.log('2dm app ls check', this.app.Lightspeed);\r\n//     return this.app.Lightspeed?.IsEnabled == true;\r\n//   }\r\n\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openLightspeed(): void {\r\n    this.params.onOpenLightspeed(this.app);\r\n  }\r\n\r\n  openLightspeedFeatureInfo(): void {\r\n    this.params.openLightspeedFeatureInfo();\r\n  }\r\n\r\n  flushCache(): void {\r\n    this.params.onFlush(this.app);\r\n  }\r\n\r\n  deleteApp(): void {\r\n    this.params.onDelete(this.app);\r\n  }\r\n}\r\n","import { AgBoolCellIconSettings } from '../../shared/ag-grid/apps-list-show/ag-bool-icon-params';\r\nimport { EavWindow } from '../../shared/models/eav-window.model';\r\nimport { App } from '../models/app.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport const AppListShowIcons: AgBoolCellIconSettings = {\r\n  states: {\r\n    true: {\r\n      tooltip: 'Show this app to users',\r\n      icon: 'visibility',\r\n    },\r\n    false: {\r\n      tooltip: 'Hide this app from users',\r\n      icon: 'visibility_off',\r\n    }\r\n  }\r\n};\r\n\r\nexport const AppListCodeErrorIcons: AgBoolCellIconSettings = {\r\n  states: {\r\n    true: {\r\n      clickable: true,\r\n      tooltip: 'This App uses obsolete code which will cause problems on future upgrades. Click to see details.',\r\n      icon: 'bug_report',\r\n      getUrl: (data: App) => window.$2sxc.http.apiUrl('sys/insights/logs?key=warnings-obsolete&filter=AppId=' + data.Id),\r\n    },\r\n    false: {\r\n      tooltip: 'Hide this app from users',\r\n      icon: '',\r\n    }\r\n  }\r\n};\r\n","export interface AgBoolCellIconSetting {\r\n  clickable?: boolean;\r\n  tooltip: string;\r\n  icon: string;\r\n  url?: string;\r\n  getUrl?: (data: any) => string;\r\n}\r\n\r\nexport interface AgBoolCellIconSettings {\r\n  states: Record<'true' | 'false' | string, AgBoolCellIconSetting>;\r\n}\r\n\r\nexport interface AgBoolCellIconsParams<T = any> {\r\n  settings(data: T): AgBoolCellIconSettings;\r\n}\r\n\r\nexport const AgBoolCellIconsDefault: AgBoolCellIconSettings = {\r\n  states: {\r\n    true: {\r\n      tooltip: 'true/on',\r\n      icon: 'radio_button_checked',\r\n    },\r\n    false: {\r\n      tooltip: 'false/off',\r\n      icon: 'radio_button_unchecked',\r\n    }\r\n  }\r\n};","<div class=\"icon-container\">\r\n  @if (data.url) {\r\n    <a [href]=\"data.url\" target=\"_blank\">\r\n      <ng-container *ngTemplateOutlet=\"showIcon\"></ng-container>\r\n    </a>\r\n  } @else {\r\n    <div class=\"icon-cell icon\" [ngClass]=\"{'clickable': data.clickable }\" [tippy]=\"data.tooltip\">\r\n      <mat-icon>{{ data.icon }}</mat-icon>\r\n    </div>\r\n  }\r\n</div>\r\n\r\n<ng-template #showIcon>\r\n  <div class=\"icon-cell icon\" [ngClass]=\"{'clickable': data.clickable }\" [tippy]=\"data.tooltip\">\r\n    <mat-icon>{{ data.icon }}</mat-icon>\r\n  </div>\r\n</ng-template>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { AgBoolCellIconSetting, AgBoolCellIconSettings, AgBoolCellIconsDefault, AgBoolCellIconsParams } from './ag-bool-icon-params';\r\n\r\n@Component({\r\n  selector: 'app-ag-bool-icon-renderer',\r\n  templateUrl: './ag-bool-icon-renderer.html',\r\n})\r\nexport class AgBoolIconRenderer implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  private allSettings: AgBoolCellIconSettings;\r\n\r\n  data: AgBoolCellIconSetting; // | { link: boolean  };\r\n\r\n  agInit(params: ICellRendererParams & AgBoolCellIconsParams): void {\r\n    this.value = params.value;\r\n\r\n    this.allSettings = params.settings?.(params.data) ?? AgBoolCellIconsDefault;\r\n    const d = this.allSettings.states[this.value ? 'true' : 'false'];\r\n    this.data = { \r\n      ...d,\r\n      url: d.url ?? d.getUrl?.(params.data),\r\n      // link: !!(d.url || d.getUrl),\r\n    };\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.apps\" [gridOptions]=\"gridOptions\" appDragAndDrop\r\n      [allowedFileTypes]=\"'zip'\" (filesDropped)=\"importApp($event)\">\r\n    </ag-grid-angular>\r\n    <mat-dialog-actions align=\"end\">\r\n      <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': vm.fabOpen }\" (openChange)=\"openChange($event)\">\r\n        <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n          <button mat-fab>\r\n            <mat-icon class=\"spin180\">{{ vm.fabOpen ? 'close' : 'add' }}</mat-icon>\r\n          </button>\r\n        </eco-fab-speed-dial-trigger>\r\n        <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n          <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Find more apps\" (click)=\"browseCatalog()\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Create inherited app\" (click)=\"createInheritedApp()\">\r\n            <mat-icon>holiday_village</mat-icon>\r\n          </button>\r\n          <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Add from folder\" (click)=\"addFromFolder()\">\r\n            <mat-icon [matBadgeHidden]=\"vm.isAddFromFolderEnabled\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadge=\"ð\"\r\n              matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n              add\r\n            </mat-icon>\r\n          </button>\r\n          <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Import app\" (click)=\"importApp()\">\r\n            <mat-icon>cloud_upload</mat-icon>\r\n          </button>\r\n          <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Create app\" (click)=\"createApp()\">\r\n            <mat-icon>add</mat-icon>\r\n          </button>\r\n        </eco-fab-speed-dial-actions>\r\n      </eco-fab-speed-dial>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}\r\n\r\n<router-outlet></router-outlet>\r\n","import { GridOptions, ICellRendererParams } from '@ag-grid-community/core';\r\nimport { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, catchError, combineLatest, map, Observable, of, share, shareReplay, startWith, Subject, switchMap } from 'rxjs';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { Context } from '../../shared/services/context';\r\nimport { FeaturesService } from '../../shared/services/features.service';\r\nimport { App } from '../models/app.model';\r\nimport { AppsListService } from '../services/apps-list.service';\r\nimport { AppsListActionsComponent } from './apps-list-actions/apps-list-actions.component';\r\nimport { AppsListActionsParams } from './apps-list-actions/apps-list-actions.models';\r\nimport { FeatureComponentBase } from '../../features/shared/base-feature.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { AppAdminHelpers } from '../../app-administration/app-admin-helpers';\r\nimport { AppListCodeErrorIcons, AppListShowIcons } from './app-list-grid-config';\r\nimport { AgBoolIconRenderer } from '../../shared/ag-grid/apps-list-show/ag-bool-icon-renderer.component';\r\nimport { AgBoolCellIconsParams } from '../../shared/ag-grid/apps-list-show/ag-bool-icon-params';\r\nimport { EavLogger } from '../../shared/logging/eav-logger';\r\n\r\nconst logThis = false;\r\n\r\n@Component({\r\n  selector: 'app-apps-list',\r\n  templateUrl: './apps-list.component.html',\r\n  styleUrls: ['./apps-list.component.scss'],\r\n})\r\nexport class AppsListComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  apps$: Observable<App[]>;\r\n  fabOpen$ = new BehaviorSubject(false);\r\n  gridOptions = this.buildGridOptions();\r\n  isAddFromFolderEnabled$: Observable<boolean>;\r\n  lightspeedEnabled$ = new BehaviorSubject<boolean>(false);\r\n\r\n  private refreshApps$ = new Subject<void>();\r\n\r\n  viewModel$: Observable<AppsListViewModel>;\r\n\r\n  private log = new EavLogger('AppsListComponent', logThis);\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private appsListService: AppsListService,\r\n    private snackBar: MatSnackBar,\r\n    private context: Context,\r\n    // Services for showing features in the menu\r\n    private featuresService: FeaturesService,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef\r\n  ) {\r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const appsLog = this.log.rxTap('apps$');\r\n    this.apps$ = this.refreshApps$.pipe(\r\n      appsLog.pipe(),\r\n      startWith(undefined),\r\n      switchMap(() => this.appsListService.getAll().pipe(catchError(() => of(undefined)))),\r\n      shareReplay(1),\r\n      appsLog.shareReplay(),\r\n    );\r\n\r\n    this.subscription.add(this.refreshOnChildClosedShallow().subscribe(() => { this.refreshApps$.next(); }));\r\n\r\n    const isAddFromFolderEnabledLog = this.log.rxTap('isAddFromFolderEnabled$');\r\n    this.isAddFromFolderEnabled$ = this.featuresService\r\n      .isEnabled$(FeatureNames.AppSyncWithSiteFiles)\r\n      .pipe(isAddFromFolderEnabledLog.pipe(), isAddFromFolderEnabledLog.shareReplay());\r\n    this.subscription.add(this.featuresService.isEnabled$(FeatureNames.LightSpeed).subscribe(this.lightspeedEnabled$));\r\n    this.viewModel$ = combineLatest([this.apps$, this.fabOpen$, this.isAddFromFolderEnabled$]).pipe(\r\n      map(([apps, fabOpen, isAddFromFolderEnabled]) => {\r\n        return { apps, fabOpen, isAddFromFolderEnabled};\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.fabOpen$.complete();\r\n    this.refreshApps$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  openChange(open: boolean): void {\r\n    this.fabOpen$.next(open);\r\n  }\r\n\r\n  browseCatalog(): void {\r\n    window.open('https://2sxc.org/apps', '_blank');\r\n  }\r\n\r\n  createApp(): void {\r\n    this.router.navigate(['create'], { relativeTo: this.route.parent.firstChild });\r\n  }\r\n\r\n  createInheritedApp(): void {\r\n    this.router.navigate(['create-inherited'], { relativeTo: this.route.parent.firstChild });\r\n  }\r\n\r\n  addFromFolder(): void {\r\n    this.router.navigate(['add-app-from-folder'], { relativeTo: this.route.parent.firstChild });\r\n  }\r\n\r\n  importApp(files?: File[]): void {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.parent.firstChild, state: dialogData });\r\n  }\r\n\r\n  private deleteApp(app: App): void {\r\n    const result = prompt(`This cannot be undone. To really delete this app, type 'yes!' or type/paste the app-name here. Are you sure want to delete '${app.Name}' (${app.Id})?`);\r\n    if (result === null) { return; }\r\n    if (result === app.Name || result === 'yes!') {\r\n      this.snackBar.open('Deleting...');\r\n      this.appsListService.delete(app.Id).subscribe({\r\n        error: () => {\r\n          this.snackBar.open('Delete failed. Please check console for more information', undefined, { duration: 3000 });\r\n          this.refreshApps$.next();\r\n        },\r\n        next: () => {\r\n          this.snackBar.open('Deleted', undefined, { duration: 2000 });\r\n          this.refreshApps$.next();\r\n        },\r\n      });\r\n    } else {\r\n      alert('Input did not match - will not delete');\r\n    }\r\n  }\r\n\r\n  private flushApp(app: App): void {\r\n    if (!confirm(`Flush the App Cache for ${app.Name} (${app.Id})?`)) { return; }\r\n    this.snackBar.open('Flushing cache...');\r\n    this.appsListService.flushCache(app.Id).subscribe({\r\n      error: () => {\r\n        this.snackBar.open('Cache flush failed. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.snackBar.open('Cache flushed', undefined, { duration: 2000 });\r\n      },\r\n    });\r\n  }\r\n\r\n  private openLightSpeed(app: App): void {\r\n    const formUrl = convertFormToUrl(AppAdminHelpers.getLightSpeedEditParams(app.Id));\r\n    this.router.navigate([`${this.context.zoneId}/${app.Id}/edit/${formUrl}`], { relativeTo: this.route.parent.firstChild });\r\n  }\r\n\r\n  private openApp(app: App): void {\r\n    this.router.navigate([app.Id.toString()], { relativeTo: this.route.parent.firstChild });\r\n  }\r\n\r\n  openLightSpeedFeatInfo() {\r\n    FeatureComponentBase.openDialog(this.dialog, FeatureNames.LightSpeed, this.viewContainerRef, this.changeDetectorRef);\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'id-action no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<App> = {\r\n              tooltipGetter: (app) => `ID: ${app.Id}\\nGUID: ${app.Guid}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Show',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'icons no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return !app.IsHidden;\r\n          },\r\n          cellRenderer: AgBoolIconRenderer,\r\n          cellRendererParams: (() => ({ settings: () => AppListShowIcons }))(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'apps-list-primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Name;\r\n          },\r\n          onCellClicked: (params) => {\r\n            const app: App = params.data;\r\n            this.openApp(app);\r\n          },\r\n          cellRenderer: (params: ICellRendererParams) => {\r\n            const app: App = params.data;\r\n            return `\r\n            <div class=\"container\">\r\n              ${app.Thumbnail\r\n                ? `<img class=\"image logo\" src=\"${app.Thumbnail}?w=40&h=40&mode=crop\"></img>`\r\n                : `<div class=\"image logo\"><span class=\"material-icons-outlined\">star_border</span></div>`\r\n              }\r\n              <div class=\"text\">${params.value}</div>\r\n            </div>\r\n            `;\r\n          },\r\n        },\r\n        {\r\n          field: 'Folder',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Folder;\r\n          },\r\n        },\r\n        {\r\n          field: 'Version',\r\n          width: 78,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Version;\r\n          },\r\n        },\r\n        {\r\n          field: 'Items',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'number-cell no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Items;\r\n          },\r\n        },\r\n        {\r\n          field: 'HasCodeWarnings',\r\n          headerName: 'Code',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'icons no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          cellRenderer: AgBoolIconRenderer,\r\n          cellRendererParams: (() => ({ settings: (app) => AppListCodeErrorIcons } as AgBoolCellIconsParams<App>))(),\r\n        },\r\n        {\r\n          width: 122,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: AppsListActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: AppsListActionsParams = {\r\n              onDelete: (app) => this.deleteApp(app),\r\n              onFlush: (app) => this.flushApp(app),\r\n              onOpenLightspeed: (app) => this.openLightSpeed(app),\r\n              lightspeedEnabled: () => this.lightspeedEnabled$.value,\r\n              openLightspeedFeatureInfo: () => this.openLightSpeedFeatInfo(),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\ninterface AppsListViewModel {\r\n  apps: App[];\r\n  fabOpen: any;\r\n  isAddFromFolderEnabled: boolean;\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatSlideToggleChange } from '@angular/material/slide-toggle';\r\nimport { SiteLanguage } from '../../models/site-language.model';\r\nimport { SiteLanguagesStatusParams } from './site-languages-status.models';\r\n\r\n@Component({\r\n  selector: 'app-site-languages-status',\r\n  templateUrl: './site-languages-status.component.html',\r\n  styleUrls: ['./site-languages-status.component.scss'],\r\n})\r\nexport class SiteLanguagesStatusComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  private params: ICellRendererParams & SiteLanguagesStatusParams;\r\n\r\n  agInit(params: ICellRendererParams & SiteLanguagesStatusParams): void {\r\n    this.params = params;\r\n    this.value = this.params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  toggleLanguage(event: MatSlideToggleChange): void {\r\n    const language: SiteLanguage = this.params.data;\r\n    this.params.onToggleLanguage(language, event.checked);\r\n  }\r\n}\r\n","<mat-slide-toggle [checked]=\"value\" (change)=\"toggleLanguage($event)\"></mat-slide-toggle>\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.languages\" [gridOptions]=\"gridOptions\">\r\n    </ag-grid-angular>\r\n    <mat-dialog-actions align=\"end\"></mat-dialog-actions>\r\n  </div>\r\n}\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { catchError, combineLatest, map, Observable, of, share, startWith, Subject, switchMap } from 'rxjs';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { SiteLanguage } from '../models/site-language.model';\r\nimport { ZoneService } from '../services/zone.service';\r\nimport { SiteLanguagesStatusComponent } from './site-languages-status/site-languages-status.component';\r\nimport { SiteLanguagesStatusParams } from './site-languages-status/site-languages-status.models';\r\n\r\n@Component({\r\n  selector: 'app-site-languages',\r\n  templateUrl: './site-languages.component.html',\r\n  styleUrls: ['./site-languages.component.scss'],\r\n})\r\nexport class SiteLanguagesComponent implements OnInit, OnDestroy {\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private refreshLanguages$ = new Subject<void>();\r\n\r\n  viewModel$: Observable<SiteLanguagesViewModel>;\r\n\r\n  constructor(private zoneService: ZoneService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.viewModel$ = combineLatest([\r\n      this.refreshLanguages$.pipe(\r\n        startWith(undefined),\r\n        switchMap(() => this.zoneService.getLanguages().pipe(catchError(() => of(undefined)))),\r\n        share(),\r\n      )\r\n    ]).pipe(\r\n      map(([languages]) => {\r\n        return { languages };\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.refreshLanguages$.complete();\r\n  }\r\n\r\n  private toggleLanguage(language: SiteLanguage, enable: boolean): void {\r\n    this.zoneService.toggleLanguage(language.Code, enable).subscribe({\r\n      error: () => {\r\n        this.refreshLanguages$.next();\r\n      },\r\n      next: () => {\r\n        this.refreshLanguages$.next();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'id-action no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            return language.Code;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<SiteLanguage> = {\r\n              tooltipGetter: (language: SiteLanguage) => `ID: ${language.Code}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight no-outline'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            return language.Culture;\r\n          },\r\n          onCellClicked: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            this.toggleLanguage(language, !language.IsEnabled);\r\n          },\r\n        },\r\n        {\r\n          field: 'Status',\r\n          width: 72,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            return language.IsEnabled;\r\n          },\r\n          cellRenderer: SiteLanguagesStatusComponent,\r\n          cellRendererParams: (() => {\r\n            const params: SiteLanguagesStatusParams = {\r\n              onToggleLanguage: (language, enable) => this.toggleLanguage(language, enable),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\ninterface SiteLanguagesViewModel {\r\n  languages: SiteLanguage[];\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { FeatureState } from '../../features/models';\r\nimport { FileUploadMessageTypes, FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { License, LicenseDownloadInfo, LicenseUploadInfo } from '../models/license.model';\r\n\r\nconst webApiFeatures = 'admin/feature/';\r\nconst webApiLicense = 'sys/license/';\r\n\r\n@Injectable()\r\nexport class FeaturesConfigService {\r\n  constructor(private http: HttpClient, private dnnContext: DnnContext) { }\r\n\r\n  saveFeatures(featuresStates: FeatureState[]): Observable<null> {\r\n    return this.http.post<null>(this.dnnContext.$2sxc.http.apiUrl(webApiFeatures + 'SaveNew'), featuresStates);\r\n  }\r\n\r\n  getLicenses(): Observable<License[]> {\r\n    return this.http.get<License[]>(this.dnnContext.$2sxc.http.apiUrl(webApiLicense + 'Summary'));\r\n  }\r\n\r\n  uploadLicense(file: File): Observable<FileUploadResult> {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<LicenseUploadInfo>(this.dnnContext.$2sxc.http.apiUrl(webApiLicense + 'Upload'), formData).pipe(\r\n      map(info => {\r\n        const result: FileUploadResult = {\r\n          Success: info.Success,\r\n          Messages: [{\r\n            MessageType: info.Success ? FileUploadMessageTypes.Success : FileUploadMessageTypes.Error,\r\n            Text: `License ${info.Success ? 'uploaded' : 'upload failed'}: ${info.Message}`,\r\n          }],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n\r\n  retrieveLicense(): Observable<LicenseDownloadInfo> {\r\n    return this.http.get<LicenseDownloadInfo>(this.dnnContext.$2sxc.http.apiUrl(webApiLicense + 'Retrieve'));\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>{{ dialogData.feature.Name }}</mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <p [innerHtml]=\"dialogData.feature.Description | safeHtml\"></p>\r\n    @if (dialogData.feature.NameId; as id) {\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">ID:</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <span [tippy]=\"id\" (click)=\"copyToClipboard(id)\">{{ id }}</span>\r\n        </div>\r\n      </div>\r\n    }\r\n    @if (dialogData.feature.Guid; as guid) {\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">GUID:</div>\r\n        <div class=\"eav-info-row__value eav_click\">\r\n          <span [tippy]=\"guid\" (click)=\"copyToClipboard(guid)\">{{ guid }}</span>\r\n        </div>\r\n      </div>\r\n    }\r\n    @if ((dialogData.feature.Security.Impact + ': ' + dialogData.feature.Security.Message); as security) {\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">Security Rating:</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <span>{{ security }}</span>\r\n        </div>\r\n      </div>\r\n    }\r\n  </mat-card-content>\r\n  <mat-card-actions align=\"end\">\r\n    @if (dialogData.feature.Link; as link) {\r\n      <button mat-raised-button class=\"eav-card-action-button\" color=\"accent\"\r\n        (click)=\"findOutMore(link)\">\r\n        <mat-icon>open_in_new</mat-icon>\r\n        Find out more\r\n      </button>\r\n    }\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">\r\n      Close\r\n    </button>\r\n  </mat-card-actions>\r\n</mat-card>","import { Component, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { copyToClipboard } from '../../../shared/helpers/copy-to-clipboard.helper';\r\nimport { FeatureDetailsDialogData } from './feature-details-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-feature-details-dialog',\r\n  templateUrl: './feature-details-dialog.component.html',\r\n  styleUrls: ['./feature-details-dialog.component.scss']\r\n})\r\nexport class FeatureDetailsDialogComponent {\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: FeatureDetailsDialogData,\r\n    private dialogRef: MatDialogRef<FeatureDetailsDialogComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) { }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  findOutMore(link: string): void {\r\n    window.open(link, '_blank');\r\n  }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { Feature } from '../../../features/models/feature.model';\r\n\r\n@Component({\r\n  selector: 'app-features-list-enabled-reason',\r\n  templateUrl: './features-list-enabled-reason.component.html',\r\n  styleUrls: ['./features-list-enabled-reason.component.scss'],\r\n})\r\nexport class FeaturesListEnabledReasonComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n  feature: Feature;\r\n\r\n  agInit(params: ICellRendererParams): void {\r\n    this.value = params.value;\r\n    this.feature = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div [tippy]=\"feature.EnabledReasonDetailed\">{{ value }}</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-features-list-enabled',\r\n  templateUrl: './features-list-enabled.component.html',\r\n  styleUrls: ['./features-list-enabled.component.scss'],\r\n})\r\nexport class FeaturesListEnabledComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams): void {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <mat-icon>{{ value ? 'check_box' : 'check_box_outline_blank' }}</mat-icon>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { Feature } from '../../../features/models/feature.model';\r\nimport { FeaturesStatusParams } from './features-status.models';\r\nimport { IdFieldParams } from '../../../shared/components/id-field/id-field.models';\r\n\r\n@Component({\r\n  selector: 'app-features-status',\r\n  templateUrl: './features-status.component.html',\r\n  styleUrls: ['./features-status.component.scss'],\r\n})\r\nexport class FeaturesStatusComponent implements ICellRendererAngularComp {\r\n  value: boolean | null;\r\n  disabled: boolean;\r\n  tooltip: string;\r\n\r\n  private params: ICellRendererParams & FeaturesStatusParams;\r\n\r\n  agInit(params: ICellRendererParams & FeaturesStatusParams & IdFieldParams<Feature>): void {\r\n    this.params = params;\r\n    this.value = params.value;\r\n    this.disabled = params.isDisabled(params.data);\r\n    this.tooltip = params.tooltipGetter(params.data);\r\n  }\r\n\r\n  refresh(params: ICellRendererParams & FeaturesStatusParams): boolean {\r\n    this.disabled = this.params.isDisabled(this.params.data);\r\n    return true;\r\n  }\r\n\r\n  toggle(): void {\r\n    const feature: Feature = this.params.data;\r\n    let nextValue: boolean;\r\n    switch (this.value) {\r\n      case false:\r\n        nextValue = null;\r\n        break;\r\n      case null:\r\n        nextValue = true;\r\n        break;\r\n      case true:\r\n        nextValue = false;\r\n        break;\r\n    }\r\n    this.value = nextValue;\r\n    this.params.onToggle(feature, nextValue);\r\n  }\r\n}\r\n","<mat-slide-toggle [checked]=\"value\" [tippy]=\"tooltip\" [disabled]=\"disabled\" (change)=\"toggle()\" [ngClass]=\"{\r\n  'toggle-false': value === false,\r\n  'toggle-null': value === null\r\n  }\">\r\n</mat-slide-toggle>\r\n","import { License } from '../apps-management/models/license.model';\r\nimport { Feature } from './models';\r\n\r\n/**\r\n * Helper class used in union with other classes to add expiration hints to features.\r\n * It's implemented as a class, so it's easier to bundle static functions.\r\n */\r\nexport class ExpirationExtension {\r\n\r\n  /** The expiration date as a human readable string. Not from the server; generated on the client */\r\n  ExpMessage?: string;\r\n  ExpIcon?: string;\r\n\r\n  ExpWarningIcon?: string;\r\n\r\n  static expandFeature(feature: Feature): Feature & ExpirationExtension {\r\n    return {\r\n      ...feature,\r\n      ...ExpirationExtension.getExpiration(feature?.Expiration)\r\n    };\r\n  }\r\n\r\n  static expandLicense(license: License): License & ExpirationExtension {\r\n    // Wrap in Try-Catch to avoid errors in the UI\r\n    try {\r\n      // find the lowest expiration date on the features\r\n      const lowestExpiration = license?.Features?.map(f => f.Expiration).sort()[0];\r\n      // if there is no lowest expiration date, skip the rest\r\n      if (lowestExpiration == null) return license;\r\n\r\n      // debugger;\r\n      const withState = {\r\n        ...license,\r\n        ...ExpirationExtension.getExpiration(lowestExpiration),\r\n      };\r\n\r\n      return withState;\r\n    } catch (error) {\r\n      return license;\r\n    }\r\n  }\r\n\r\n  private static getExpiration(dateString: string): ExpirationExtension {\r\n    // Inner helper to create the final result\r\n    const result = (icon: string, text: string) => ({\r\n      ExpMessage: (icon != null ? icon + ' ' : '') + text,\r\n      ExpIcon: icon,\r\n      ExpWarningIcon: icon != 'â' ? icon : null,\r\n    })\r\n    const expires = dateString?.split('T')[0];\r\n    // no valid expiration date\r\n    if (expires == null) return result(null, null);\r\n    // never expires\r\n    if (expires.startsWith('9999')) return result('â', 'never');\r\n    const expDate = new Date(expires);\r\n    // show \"expired\" if it's over-due\r\n    if (expDate < new Date()) return result('ð', 'expired');\r\n    // return \"today\" if it's today\r\n    if (expDate.toDateString() === new Date().toDateString()) return result('â ï¸', 'today');\r\n    // return \"tomorrow\" if it's tomorrow\r\n    if (expDate.toDateString() === new Date(new Date().setDate(new Date().getDate() + 1)).toDateString()) return result('â ï¸', 'tomorrow');\r\n    // Warn if it's within 30 days\r\n    if (expDate < new Date(new Date().setDate(new Date().getDate() + 30))) return result('â ï¸', expires);\r\n    // Show special EOY if it's at the end of the year - the most common expiration\r\n    if (expires.endsWith('12-31')) return result('â', `EOY ${expires.split('-')[0]}`);\r\n    // otherwise: just show the date\r\n    return result('â', expires);\r\n  }\r\n\r\n}","import { Directive, ElementRef, Input, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\n@Directive({ selector: '[appAgGridHeight]' })\r\nexport class AgGridHeightDirective implements OnChanges {\r\n  @Input() itemsCount = 0;\r\n  @Input() headerHeight = 32;\r\n  @Input() rowHeight = 48;\r\n  @Input() maxRows = 100;\r\n\r\n  /** Fixes a bug where scrollbar appears when then is no overflow */\r\n  private extraHeight = 2;\r\n\r\n  private element: HTMLElement;\r\n\r\n  constructor(elementRef: ElementRef) {\r\n    this.element = elementRef.nativeElement;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.itemsCount != null) {\r\n      const rows = this.itemsCount === 0 ? 2 : this.itemsCount > this.maxRows ? this.maxRows : this.itemsCount;\r\n      this.element.style.height = `${this.headerHeight + rows * this.rowHeight + this.extraHeight}px`;\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { License } from '../models/license.model';\r\n\r\n@Pipe({ name: 'licensesOrder' })\r\nexport class LicensesOrderPipe implements PipeTransform {\r\n\r\n  transform(licenses: License[]): any {\r\n    if (!Array.isArray(licenses)) { return licenses; }\r\n\r\n    const sorted = [...licenses].sort((a: License, b: License) => {\r\n      if (a.Priority < b.Priority) {\r\n        return -1;\r\n      } else if (a.Priority > b.Priority) {\r\n        return 1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n    return sorted;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { License } from '../models/license.model';\r\n\r\n@Pipe({ name: 'activeFeaturesCount' })\r\nexport class ActiveFeaturesCountPipe implements PipeTransform {\r\n\r\n  transform(license: License) {\r\n    return `${license.Features.filter(f => f.IsEnabled).length}/${license.Features.length}`;\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <mat-accordion multi>\r\n    @for (license of vm.licenses | licensesOrder; track trackLicenses($index, license)) {\r\n      <mat-expansion-panel #panel>\r\n        <mat-expansion-panel-header>\r\n          <mat-panel-title>\r\n            <mat-icon class=\"panel-icon\" [tippy]=\"license.IsEnabled ? 'License is active' : 'License is not active'\">{{\r\n            license.IsEnabled ? 'check_circle_outline' : 'cancel' }}</mat-icon>\r\n            <div>\r\n              <div class=\"panel-title\">\r\n                <span>{{ license.Name }}</span>\r\n                <span class=\"active-features-count\">{{ license | activeFeaturesCount }}</span>\r\n                <span> {{ license.ExpWarningIcon }}</span>\r\n              </div>\r\n              <div class=\"panel-description\" [ngClass]=\"{ 'expanded': panel.expanded }\">\r\n                {{ license.Description }}\r\n              </div>\r\n            </div>\r\n          </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        @if (panel.expanded) {\r\n          <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"license.Features\" [gridOptions]=\"gridOptions\"\r\n            appAgGridHeight [itemsCount]=\"license.Features?.length\">\r\n          </ag-grid-angular>\r\n        }\r\n      </mat-expansion-panel>\r\n    }\r\n  </mat-accordion>\r\n}\r\n\r\n<mat-dialog-actions align=\"start\">\r\n  <button mat-button class=\"eav-button__with-icon\" tippy=\"Registration\" (click)=\"openRegistration()\">\r\n    <mat-icon class=\"eav-icon\">app_registration</mat-icon>\r\n    <span>Registration</span>\r\n  </button>\r\n</mat-dialog-actions>\r\n\r\n<router-outlet></router-outlet>\r\n","import { AgGridAngular } from '@ag-grid-community/angular';\r\nimport { GridOptions } from '@ag-grid-community/core';\r\nimport { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\n// tslint:disable-next-line:max-line-length\r\nimport { BehaviorSubject, catchError, forkJoin, map, Observable, of, share, startWith, Subject, switchMap, tap, timer } from 'rxjs';\r\nimport { FeatureState } from '../../features/models';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { Feature } from '../../features/models/feature.model';\r\nimport { License } from '../models/license.model';\r\nimport { FeaturesConfigService } from '../services/features-config.service';\r\nimport { GoToRegistration } from '../sub-dialogs/registration/go-to-registration';\r\nimport { FeatureDetailsDialogComponent } from './feature-details-dialog/feature-details-dialog.component';\r\nimport { FeatureDetailsDialogData } from './feature-details-dialog/feature-details-dialog.models';\r\nimport { FeaturesListEnabledReasonComponent } from './features-list-enabled-reason/features-list-enabled-reason.component';\r\nimport { FeaturesListEnabledComponent } from './features-list-enabled/features-list-enabled.component';\r\nimport { FeaturesStatusComponent } from './features-status/features-status.component';\r\nimport { FeaturesStatusParams } from './features-status/features-status.models';\r\nimport { ExpirationExtension } from '../../features/expiration-extension';\r\n\r\n@Component({\r\n  selector: 'app-license-info',\r\n  templateUrl: './license-info.component.html',\r\n  styleUrls: ['./license-info.component.scss'],\r\n})\r\nexport class LicenseInfoComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @ViewChild(AgGridAngular) private gridRef?: AgGridAngular;\r\n\r\n  disabled$ = new BehaviorSubject(false);\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private refreshLicenses$ = new Subject<void>();\r\n\r\n  viewModel$: Observable<LicenseInfoViewModel>;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private featuresConfigService: FeaturesConfigService,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef\r\n  ) {\r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.subscription.add(this.refreshOnChildClosedShallow().subscribe(() => { this.refreshLicenses$.next(); }));\r\n    this.viewModel$ = //combineLatest([\r\n      this.refreshLicenses$.pipe(\r\n        startWith(undefined),\r\n        switchMap(() => this.featuresConfigService.getLicenses().pipe(catchError(() => of(undefined)))),\r\n        tap(() => this.disabled$.next(false)),\r\n\r\n        // Fiddle with the data for development tests\r\n        // 2023-11-16 2dm disabled - causes trouble in production\r\n        // @STV - do you still need this? or is this a forgotten debug code?\r\n        // map(licenses => {\r\n        //   var licTesting = licenses[licenses.length - 2];\r\n        //   licTesting.Features[licTesting.Features.length - 1].Expiration = \"2023-08-25\";\r\n        //   return licenses;\r\n        // }),\r\n\r\n        // Expand the data to have pre-calculated texts/states\r\n        map(licenses => licenses.map(l => {\r\n          // const expandedFeatures = l.Features.map(f => ExpirationExtension.expandFeature(f));\r\n          return ({\r\n            ...ExpirationExtension.expandLicense(l),\r\n            Features: l.Features.map(f => ExpirationExtension.expandFeature(f)),\r\n          });\r\n        })),\r\n\r\n        // Share the resulting stream with all subscribers\r\n        share(),\r\n      )\r\n    //])\r\n    .pipe(\r\n      map((licenses) => ({ licenses })),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.disabled$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  trackLicenses(index: number, license: License): string {\r\n    return license.Guid;\r\n  }\r\n\r\n\r\n  openRegistration(): void {\r\n    this.router.navigate([this.router.url.replace('license', '') + \"/registration\"]);\r\n  }\r\n\r\n  private showFeatureDetails(feature: Feature): void {\r\n    const data: FeatureDetailsDialogData = {\r\n      feature,\r\n    };\r\n    this.dialog.open(FeatureDetailsDialogComponent, {\r\n      autoFocus: false,\r\n      data,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '600px',\r\n    });\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private toggleFeature(feature: Feature, enabled: boolean): void {\r\n    this.disabled$.next(true);\r\n    const state: FeatureState = {\r\n      FeatureGuid: feature.Guid,\r\n      Enabled: enabled,\r\n    };\r\n    forkJoin([this.featuresConfigService.saveFeatures([state]), timer(100)]).subscribe({\r\n      error: () => {\r\n        this.refreshLicenses$.next();\r\n      },\r\n      next: () => {\r\n        this.refreshLicenses$.next();\r\n      },\r\n    });\r\n  }\r\n\r\n  // Note: @SDV\r\n  // I think this should serve as a good example of how to use the grid\r\n  // 1. eg. with cellDefaults and similar initial objects containing most commonly used options here\r\n  // 2. Also we should probably never add a valueGetter for the simple properties\r\n  // ...not sure why it's even in here, my guess is copy-paste of code which wasn't understood properly\r\n  // 3. I think the header-name should always be the first line, then the field\r\n  private buildGridOptions(): GridOptions {\r\n    const cellDefaults = {\r\n      cellClass: 'no-outline',\r\n      sortable: true,\r\n    };\r\n    const cellDefaultsTextFilter = {\r\n      ...cellDefaults,\r\n      filter: 'agTextColumnFilter',\r\n    };\r\n\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'NameId',\r\n          ...cellDefaultsTextFilter,\r\n          width: 200,\r\n          headerClass: 'dense',\r\n          cellClass: 'id-action no-padding no-outline'.split(' '),\r\n          // TODO: @SDV - most of these columns had a valueGetter that was 3 lines long\r\n          // it was easy to reduce to 1 - but actually it is not needed!\r\n          // Original - too long\r\n          // valueGetter: (params) => {\r\n          //   const feature: Feature = params.data;\r\n          //   return feature.NameId;\r\n          // },\r\n          // Optimized - 1 line - but actually not needed\r\n          // valueGetter: (params) => (params.data as Feature).NameId,\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<Feature> = {\r\n              tooltipGetter: (feature: Feature) => feature.NameId,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          ...cellDefaultsTextFilter,\r\n          flex: 3,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          onCellClicked: (params) => {\r\n            this.showFeatureDetails(params.data as Feature);\r\n          },\r\n          // valueGetter: (params) => (params.data as Feature).Name,\r\n        },\r\n        {\r\n          field: 'IsEnabled',\r\n          headerName: 'Enabled',\r\n          ...cellDefaults,\r\n          width: 80,\r\n          headerClass: 'dense',\r\n          filter: BooleanFilterComponent,\r\n          cellRenderer: FeaturesListEnabledComponent,\r\n          // valueGetter: (params) => (params.data as Feature).Enabled,\r\n        },\r\n        {\r\n          headerName: 'Reason',\r\n          field: 'EnabledReason',\r\n          ...cellDefaultsTextFilter,\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellRenderer: FeaturesListEnabledReasonComponent,\r\n          // valueGetter: (params) => (params.data as Feature).EnabledReason,\r\n        },\r\n        {\r\n          headerName: 'Expiration',\r\n          field: 'ExpMessage',\r\n          ...cellDefaultsTextFilter,\r\n          width: 120,\r\n          // valueGetter: (params) => (params.data as FeatureWithUi)?.ExpirationText,\r\n          tooltipValueGetter: (params) => (params.data as Feature & ExpirationExtension)?.Expiration,\r\n        },\r\n        {\r\n          headerName: '',\r\n          field: 'EnabledInConfiguration',\r\n          width: 62,\r\n          cellClass: 'secondary-action no-outline no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: FeaturesStatusComponent,\r\n          // valueGetter: (params) => (params.data as Feature).EnabledInConfiguration,\r\n          cellRendererParams: (() => {\r\n            const params: FeaturesStatusParams & IdFieldParams<Feature> = {\r\n              isDisabled: (feature) => !feature.IsConfigurable || this.disabled$.value,\r\n              onToggle: (feature, enabled) => this.toggleFeature(feature, enabled),\r\n              tooltipGetter: (feature: Feature) => feature.IsConfigurable ? \"Toggle off | default | on\" : \"This feature can't be configured\",\r\n            };\r\n            return params;\r\n          }),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\n\r\ninterface LicenseInfoViewModel {\r\n  licenses: (License & ExpirationExtension)[];\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"eav-dialog\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">Register this System on 2sxc Patrons</div>\r\n    </div>\r\n    <div class=\"eav-dialog-content\">\r\n      <h2>Basic Mode: Free Registration with Goodies</h2>\r\n      <p>\r\n        You can just register for free to unlock some features.\r\n        They are mainly enhancements for which we wish to contact you in case of critical security issues.\r\n      </p>\r\n      <a [innerHtml]=\"logo | safeHtml\" href=\"https://patrons.2sxc.org/\" target=\"_blank\"\r\n        style=\"width: 50%; float: right;\"></a>\r\n      <h2>Hero Mode: Support 2sxc, get Awesome Stuff</h2>\r\n      <p>\r\n        If you want to become a champion and pay a monthly contribution\r\n        to support the open-source development of 2sxc, you will get some\r\n        <a href=\"https://go.2sxc.org/bundles\" target=\"_blank\">really nice features</a> as well ð.\r\n      </p>\r\n      <p>\r\n        Thanks for loving and supporting 2sxc ð\r\n      </p>\r\n      <h2>System Specs</h2>\r\n      @if (vm.systemInfoSet) {\r\n        <p>\r\n          <b>Status:</b> {{ vm.systemInfoSet.License.Owner ? \"this system is registered to \" +\r\n          vm.systemInfoSet.License.Owner : \"this system is not yet registered\" }}\r\n          <br>\r\n          <b>Fingerprint:</b> <span [tippy]=\"'Click to copy to clipboard'\"\r\n            (click)=\"copyToClipboard(vm.systemInfoSet.System.Fingerprint)\"> {{ vm.systemInfoSet.System.Fingerprint\r\n            }}</span>\r\n          <br>\r\n          <br>\r\n        </p>\r\n      }\r\n      <div class=\"eav-registration-cards\">\r\n        <mat-card class=\"eav-registration-cards__left\">\r\n          <mat-card-header>\r\n            <div mat-card-avatar>\r\n              <mat-icon class=\"eav-card-header-avatar-icon\">settings_applications</mat-icon>\r\n            </div>\r\n            <mat-card-title>Automatic Registration</mat-card-title>\r\n            <mat-card-subtitle>The simple way</mat-card-subtitle>\r\n          </mat-card-header>\r\n          <mat-card-content>\r\n            <p>\r\n              This will open 2sxc Patrons and give it the system fingerprint,\r\n              so you can then log in and assign it a name and features you want to activate.\r\n            </p>\r\n          </mat-card-content>\r\n          <mat-card-actions align=\"start\">\r\n            @if (vm.systemInfoSet) {\r\n              <button mat-button class=\"eav-button__with-icon\" tippy=\"Register\"\r\n                (click)=\"openLicenseRegistration(vm.systemInfoSet)\">\r\n                <mat-icon class=\"eav-icon\">app_registration</mat-icon>\r\n                <span>Register</span>\r\n              </button>\r\n            }\r\n            <button mat-button class=\"eav-button__with-icon\" tippy=\"Retrieve license\" (click)=\"retrieveLicense()\">\r\n              <mat-icon class=\"eav-icon\">download_for_offline</mat-icon>\r\n              <span>Retrieve license</span>\r\n            </button>\r\n          </mat-card-actions>\r\n        </mat-card>\r\n        <mat-card class=\"eav-registration-cards__right\">\r\n          <mat-card-header>\r\n            <div mat-card-avatar>\r\n              <mat-icon class=\"eav-card-header-avatar-icon\">waving_hand</mat-icon>\r\n            </div>\r\n            <mat-card-title>Manual Registration</mat-card-title>\r\n            <mat-card-subtitle>Offline or special scenarios</mat-card-subtitle>\r\n          </mat-card-header>\r\n          <mat-card-content>\r\n            <p>\r\n              For offline or special scenarios you can just go to 2sxc Patrons and copy/paste the fingerprint yourself.\r\n              <br>\r\n              Click on the fingerprint above to copy it to your clipboard.\r\n            </p>\r\n            <div class=\"card-actions\">\r\n              <button mat-button class=\"eav-button__with-icon\" tippy=\"Register\" (click)=\"registerManually()\">\r\n                <mat-icon class=\"eav-icon\">app_registration</mat-icon>\r\n                <span>Register Manually</span>\r\n              </button>\r\n              <button mat-button class=\"eav-button__with-icon\" tippy=\"Upload license\" (click)=\"openLicenseUpload()\">\r\n                <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n                <span>Upload license</span>\r\n              </button>\r\n            </div>\r\n          </mat-card-content>\r\n        </mat-card>\r\n      </div>\r\n    </div>\r\n    <!-- <mat-dialog-actions align=\"end\">\r\n      <button mat-raised-button (click)=\"closeDialog()\">\r\n        Close\r\n      </button>\r\n    </mat-dialog-actions> -->\r\n  </div>\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { editRoot, refreshEditRoot } from '../edit/edit.matcher';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { addAppFromFolderDialog } from './add-app-from-folder/add-app-from-folder-dialog.config';\r\nimport { appsManagementDialog } from './apps-management-nav/apps-management-dialog.config';\r\nimport { createAppDialog } from './create-app/create-app-dialog.config';\r\nimport { createInheritedAppDialog } from './create-inherited-app/create-inherited-app-dialog.config';\r\nimport { SystemInfoComponent } from './system-info/system-info.component';\r\nimport { AppsListComponent } from './apps-list/apps-list.component';\r\nimport { SiteLanguagesComponent } from './site-languages/site-languages.component';\r\nimport { LicenseInfoComponent } from './licence-info/license-info.component';\r\nimport { RegistrationComponent } from './sub-dialogs/registration/registration.component';\r\n\r\nconst appsManagementRoutes: Routes = [\r\n  {\r\n    path: '', component: DialogEntryComponent, data: { dialog: appsManagementDialog }, children: [\r\n      { path: '', redirectTo: 'system', pathMatch: 'full' },\r\n      {\r\n        path: 'system', component: SystemInfoComponent, data: { title: 'System Info' , breadcrumb: 'System Info'},\r\n        // @2dg is no longer needed as Register is a separate SideNav and no longer a dialog\r\n        //  children: [\r\n        //     GoToRegistration.getRoute()\r\n        // ]\r\n      },\r\n      { path: 'registration', component: RegistrationComponent, data: {\r\n          title: 'Registration', breadcrumb: 'Register'\r\n        }\r\n      },\r\n      {\r\n        path: 'list', component: AppsListComponent, children: [\r\n          {\r\n            path: 'import',\r\n            loadChildren: () => import('../import-app/import-app.module').then(m => m.ImportAppModule)\r\n          },\r\n          { path: 'create', component: DialogEntryComponent, data: { dialog: createAppDialog } },\r\n          { path: 'create-inherited', component: DialogEntryComponent, data: { dialog: createInheritedAppDialog } },\r\n          { path: 'add-app-from-folder', component: DialogEntryComponent, data: { dialog: addAppFromFolderDialog } },\r\n          {\r\n            path: ':appId',\r\n            loadChildren: () => import('../app-administration/app-administration.module').then(m => m.AppAdministrationModule)\r\n          },\r\n          {\r\n            matcher: editRoot,\r\n            loadChildren: () => import('../edit/edit.module').then(m => m.EditModule),\r\n          },\r\n          {\r\n            matcher: refreshEditRoot,\r\n            loadChildren: () => import('../edit/refresh-edit.module').then(m => m.RefreshEditModule)\r\n          },\r\n        ],\r\n        data: { title: 'Apps in this Zone' , breadcrumb: 'Apps' },\r\n      },\r\n      { path: 'languages', component: SiteLanguagesComponent, data: { title: 'Zone Languages' , breadcrumb: 'Languages' } },\r\n      {\r\n        path: 'license', component: LicenseInfoComponent, data: { title: 'Extensions / Features' , breadcrumb: 'Extensions and Features' },\r\n         // @2dg is no longer needed as Register is a separate SideNav and no longer a dialog\r\n        //  children: [\r\n        //   GoToRegistration.getRoute()\r\n        // ]\r\n      },\r\n    ]\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(appsManagementRoutes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppsManagementRoutingModule { }\r\n","import { Component, HostBinding, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { catchError, combineLatest, map, Observable, of, share, startWith, Subject, Subscription, switchMap} from 'rxjs';\r\nimport { GlobalConfigService } from '../../../edit/shared/store/ngrx-data/global-config.service';\r\nimport { FileUploadDialogComponent, FileUploadDialogData } from '../../../shared/components/file-upload-dialog';\r\nimport { copyToClipboard } from '../../../shared/helpers/copy-to-clipboard.helper';\r\nimport { SystemInfoSet } from '../../models/system-info.model';\r\nimport { FeaturesConfigService } from '../../services/features-config.service';\r\nimport { ZoneService } from '../../services/zone.service';\r\n\r\n// Images/Icons\r\nimport patronsLogo from '!raw-loader!./assets/2sxc-patrons.svg';\r\n\r\n@Component({\r\n  selector: 'app-registration',\r\n  templateUrl: './registration.component.html',\r\n  styleUrls: ['./registration.component.scss']\r\n})\r\nexport class RegistrationComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  debugEnabled$ = this.globalConfigService.getDebugEnabled$();\r\n\r\n  private refreshSystemInfoSet$ = new Subject<void>();\r\n\r\n  viewModel$: Observable<RegistrationViewModel>;\r\n\r\n  // patrons logo\r\n  logo = patronsLogo;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<RegistrationComponent>,\r\n    private globalConfigService: GlobalConfigService,\r\n    private zoneService: ZoneService,\r\n    private featuresConfigService: FeaturesConfigService,\r\n    private snackBar: MatSnackBar,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.viewModel$ = combineLatest([\r\n      this.refreshSystemInfoSet$.pipe(\r\n        startWith(undefined),\r\n        switchMap(() => this.zoneService.getSystemInfo().pipe(catchError(() => of(undefined)))),\r\n        share(),\r\n      )\r\n    ]).pipe(\r\n      map(([systemInfoSet]) => {\r\n        return { systemInfoSet };\r\n      }),\r\n    );\r\n  }\r\n\r\n  // closeDialog() {\r\n  //   this.dialogRef.close();\r\n  // }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n\r\n  openLicenseRegistration(systemInfoSet: SystemInfoSet): void {\r\n    window.open(`https://patrons.2sxc.org/register?fingerprint=${systemInfoSet.System.Fingerprint}`, '_blank');\r\n  }\r\n\r\n  retrieveLicense(): void {\r\n    this.featuresConfigService.retrieveLicense().subscribe({\r\n      error: () => {\r\n        this.snackBar.open('Failed to retrieve license. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: (info) => {\r\n        const message = `License ${info.Success ? 'Info' : 'Error'}: ${info.Message}`;\r\n        const duration = info.Success ? 3000 : 100000;\r\n        const panelClass = info.Success ? undefined : 'snackbar-error';\r\n        this.snackBar.open(message, undefined, { duration, panelClass });\r\n        this.refreshSystemInfoSet$.next();\r\n      },\r\n    });\r\n  }\r\n\r\n  registerManually(): void {\r\n    window.open(`https://patrons.2sxc.org/`, '_blank');\r\n  }\r\n\r\n  openLicenseUpload(): void {\r\n    const data: FileUploadDialogData = {\r\n      title: 'Upload license',\r\n      description: '',\r\n      allowedFileTypes: 'json',\r\n      upload$: (files) => this.featuresConfigService.uploadLicense(files[0]),\r\n    };\r\n    const dialogRef = this.dialog.open(FileUploadDialogComponent, {\r\n      data,\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    dialogRef.afterClosed().subscribe((refresh?: boolean) => {\r\n      if (refresh) {\r\n        this.refreshSystemInfoSet$.next();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\ninterface RegistrationViewModel {\r\n  systemInfoSet: SystemInfoSet;\r\n}\r\n","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\r\\n<!-- Generator: Adobe Illustrator 26.5.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\r\\n<svg version=\\\"1.1\\\" id=\\\"Ebene_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\r\\n\\t viewBox=\\\"0 0 1218.9 250\\\" style=\\\"enable-background:new 0 0 1218.9 250;\\\" xml:space=\\\"preserve\\\">\\r\\n<style type=\\\"text/css\\\">\\r\\n\\t.st0{fill:#00003E;}\\r\\n\\t.st1{enable-background:new    ;}\\r\\n\\t.st2{fill:#FFFFFF;}\\r\\n\\t.st3{fill:#323035;}\\r\\n\\t.st4{fill:#00CCFF;}\\r\\n</style>\\r\\n<path class=\\\"st0\\\" d=\\\"M164.4,250H0V85.6C0,38.4,38.4,0,85.6,0H250v164.4C250,211.6,211.6,250,164.4,250z\\\"/>\\r\\n<g class=\\\"st1\\\">\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M373.4,82.3c-8.2,1.3-13.6,4.4-19.6,10.4c-1.8,1.8-2.7,1.4-4.3-0.3l-6.1-6.5c-1.4-1.7-1.8-2.6-0.3-4.3\\r\\n\\t\\tc8.7-8.2,17.6-13.1,30.2-14.3V82.3z M380.5,67.1c27.8,2,38.5,26.7,23,45.4l-44.2,55.8h-15.5c-1,0-1.3-0.3-1.3-1.3v-1.7\\r\\n\\t\\tc0-1,0.3-1.3,1.3-2.6l45.9-56.9c8.7-10.6,3-22.2-9.2-23.6V67.1z M380.1,153.7h28.7c2.3,0,3,0.6,3,3v8.7c0,2.3-0.7,3-3,3h-40.3\\r\\n\\t\\tL380.1,153.7z\\\"/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M448.8,169.6c-7.4-1.1-15.2-2.8-24.1-8.8c-2-1.4-1.7-2.3-0.7-4.3l3.1-5.4c1-2,1.7-3,4-1.3\\r\\n\\t\\tc4.8,3.3,10.2,6,17.7,7.1V169.6z M455.9,157.2c8.7-0.7,12.8-4.5,12.8-9.7c0-4.7-6.2-7-17-8.4c-14.8-2-27.7-6.5-27.7-21.7\\r\\n\\t\\tc0-13.3,10.5-22.6,28.1-23v12.6c-9.2,0.6-12.8,4.1-12.8,9.5c0,5.5,6.1,7,17,8.5c14.8,1.8,27.7,6.5,27.7,21.6\\r\\n\\t\\tc0,13.3-10.9,22.4-28.1,23.1V157.2z M459.2,94.9c6.2,1.1,12.2,2.6,20.9,7.5c2.3,1.4,1.7,2.4,0.9,4.4l-3.1,5.3c-1,2-1.8,2.8-4,1.4\\r\\n\\t\\tc-5.3-3.3-9.1-5.1-14.6-6V94.9z\\\"/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M561.7,165.3c1.6,2.3,0.9,3-1.4,3h-12.6c-2,0-2.8-0.6-4.4-3L494.5,99c-1.4-2.3-0.7-3,1.4-3h12.8\\r\\n\\t\\tc2.1,0,3,0.6,4.4,3L561.7,165.3z M523.2,150.3l-10.1,15.1c-1.4,2.4-2.3,3-4.4,3H496c-2.1,0-2.8-0.7-1.4-3l19.3-27.7L523.2,150.3z\\r\\n\\t\\t M533.2,114.1L543.2,99c1.6-2.6,2.4-3,4.4-3h12.6c2.3,0,3,0.7,1.4,3l-19.2,27.8L533.2,114.1z\\\"/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M604.4,109.3c-9.8,1.7-18,10.6-18,23c0,12.1,7.8,21.2,18,22.9v14.6c-19.7-1.8-34.1-18.5-34.1-37.5\\r\\n\\t\\tc0-19.2,14.3-35.8,34.1-37.6V109.3z M611.4,94.6c8.4,0.9,16,4,22.7,10.5c1.3,1.3,1,2-0.4,3.7l-5.3,5.7c-1.6,1.7-2.6,2.1-4.3,0.6\\r\\n\\t\\tc-4.3-4-8.7-5.3-12.8-6V94.6z M611.4,155.3c5.1-0.9,8.8-2.4,12.8-6c1.8-1.6,2.7-1.1,4.3,0.6l5.3,5.7c1.4,1.7,1.7,2.4,0.4,3.7\\r\\n\\t\\tc-6.8,6.5-13.9,9.5-22.7,10.5V155.3z\\\"/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M705.4,165.3c-0.1,2.3-0.7,3-3,3h-11.2c-2.4,0-3-0.7-3-3V71.9c0-2.4,0.7-3,3-3h14.2V165.3z M712.6,114.6H725\\r\\n\\t\\tc14.8,0,19.6-7,19.6-15.9c0-8.7-4.8-15.5-19.6-15.5h-12.4V68.9h13.1c16.6,0,35.5,6.8,35.5,29.8S742.3,129,725.7,129h-13.1V114.6z\\\"\\r\\n\\t\\t/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M810.3,166.1c-5.5,2.8-9.7,3.8-16.5,3.8c-12.8,0-24.8-7.8-24.8-23.7c0-15.5,12.2-22.9,27.5-22.9\\r\\n\\t\\tc4.4,0,8,0.6,13.8,1.7v11.2c-4.3-1.1-6.8-1.4-9.9-1.4c-10.8,0-15.3,4.8-15.3,11.4c0,5.5,4.1,11.4,13.9,11.4c4.3,0,7.7-1.4,11.4-3.7\\r\\n\\t\\tV166.1z M817.4,127c0-13.3-3.4-18.6-16.5-18.6c-8.1,0-15.6,1.1-20.9,2.1c-2.3,0.3-2.8-0.6-3.4-2.8l-1.7-6.8\\r\\n\\t\\tc-0.6-2.3-0.3-3.1,1.8-3.7c1.7-0.4,14.3-2.7,24.8-2.7c27.1,0,31.9,11.9,31.9,34.4v36.5c0,2.3-0.6,3-3,3H822c-2,0-3.1-1-4.5-3V127z\\\"\\r\\n\\t\\t/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M851.9,109c-2.3,0-3-0.7-3-3v-7c0-2.3,0.7-3,3-3h5.3V82.1c0-2.3,0.6-3,3-3h10.1c2.3,0,3,0.7,3,3V96h21.9\\r\\n\\t\\tc2.3,0,3,0.7,3,3.1v6.8c0,2.3-0.7,3-3,3H851.9z M873.2,116.2v21.3c0,12.8,4.4,17.9,13.1,17.9c3.1,0,5.5-0.3,8.5-1.7\\r\\n\\t\\tc2.7-1.4,3.3-1.3,3.8,1.7l1.3,7.1c0.4,2.1,0.3,2.8-1.6,3.8c-5.7,3.5-11.9,3.5-13.8,3.5c-18.7,0-27.4-11.8-27.4-31.4v-22.3H873.2z\\\"\\r\\n\\t\\t/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M934.2,165.3c-0.1,2.3-0.7,3-3,3H921c-2.3,0-3-0.7-3-3V99c0-2.3,0.7-3,3-3h5.1c4.4,0,5,0.9,8.1,4.4V165.3z\\r\\n\\t\\t M941.3,99.6c3.8-2.7,8.9-5.1,18.6-5.1c2.8,0,3.1,0.9,2.8,2.8l-1.6,10.4c-0.4,2.3-1.1,2.8-3.4,2.8c-7,0-12.1,1.8-16.5,5.5V99.6z\\\"/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M1003.7,169.7c-18.7-1.8-33.9-17.8-33.9-37.5c0-19.9,15.3-35.9,33.9-37.6v14.8c-10.2,1.8-17.9,11.1-17.9,22.9\\r\\n\\t\\tc0,12.2,8.1,21.3,17.9,23V169.7z M1010.8,155.3c10.2-1.7,18-11.1,18-23c0-11.9-8-21.3-18-22.9V94.6c19.2,2,34.1,18,34.1,37.6\\r\\n\\t\\tc0,19.5-14.8,35.6-34.1,37.5V155.3z\\\"/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M1079.6,165.3c0,2.3-0.7,3-3,3h-10.2c-2.3,0-3-0.7-3-3V99c0-2.3,0.7-3,3-3h5.1c2.7,0,4.4,0.4,5.5,1.7l2.6,4\\r\\n\\t\\tV165.3z M1086.7,98.3c3.4-2.6,7.7-3.8,12.9-3.8c15.6,0,27.5,8.4,27.5,32.8v38.1c0,2.3-0.7,3-3,3h-10.2c-2.3,0-3-0.7-3-3v-34.5\\r\\n\\t\\tc0-15.1-5.5-21.9-15.5-21.9c-4.1,0-6.7,1.4-8.8,3.3V98.3z\\\"/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M1168.2,169.6c-7.4-1.1-15.2-2.8-24.1-8.8c-2-1.4-1.7-2.3-0.7-4.3l3.1-5.4c1-2,1.7-3,4-1.3\\r\\n\\t\\tc4.8,3.3,10.2,6,17.7,7.1V169.6z M1175.3,157.2c8.7-0.7,12.8-4.5,12.8-9.7c0-4.7-6.2-7-17-8.4c-14.8-2-27.7-6.5-27.7-21.7\\r\\n\\t\\tc0-13.3,10.5-22.6,28.1-23v12.6c-9.2,0.6-12.8,4.1-12.8,9.5c0,5.5,6.1,7,17,8.5c14.8,1.8,27.7,6.5,27.7,21.6\\r\\n\\t\\tc0,13.3-10.9,22.4-28.1,23.1V157.2z M1178.5,94.9c6.2,1.1,12.2,2.6,20.9,7.5c2.3,1.4,1.7,2.4,0.9,4.4l-3.1,5.3c-1,2-1.8,2.8-4,1.4\\r\\n\\t\\tc-5.3-3.3-9.1-5.1-14.6-6V94.9z\\\"/>\\r\\n</g>\\r\\n<path class=\\\"st2\\\" d=\\\"M160.7,88.1c-2.4,0-4.8-0.5-7-1.5c-8.6-3.9-12.5-14-8.7-22.6c1.9-4.2,5.2-7.4,9.5-9c4.3-1.6,8.9-1.5,13.1,0.4\\r\\n\\tc4.2,1.8,7.4,5.1,9,9.4c1.7,4.3,1.5,9-0.3,13.2c-1.9,4.2-5.2,7.4-9.5,9C164.9,87.8,162.8,88.1,160.7,88.1z M160.7,58.1\\r\\n\\tc-1.5,0-3.1,0.3-4.6,0.9c-3.2,1.2-5.7,3.7-7.2,6.8c-2.9,6.5,0,14.1,6.5,17c3.2,1.4,6.7,1.5,9.9,0.3c3.2-1.2,5.7-3.7,7.2-6.8\\r\\n\\tc1.4-3.2,1.5-6.7,0.3-9.9c-1.2-3.2-3.6-5.7-6.8-7.1C164.3,58.5,162.5,58.1,160.7,58.1z\\\"/>\\r\\n<path class=\\\"st2\\\" d=\\\"M168,112.9c-0.8,0-1.5-0.4-1.9-1.2c-0.5-1-0.1-2.3,0.9-2.8l33.8-17.2c0.2-0.1,0.4-0.4,0.4-0.6\\r\\n\\tc0-0.2,0.1-0.5-0.1-0.8c-0.3-0.4-0.8-0.5-1.2-0.3c-0.2,0.1-0.3,0.1-0.5,0.1l-26.6,4.6c-1.1,0.2-2.2-0.6-2.4-1.7s0.6-2.2,1.7-2.4\\r\\n\\tl26.4-4.6c2.3-0.8,4.8,0,6.1,2c0.8,1.2,1.1,2.6,0.7,4c-0.3,1.4-1.2,2.6-2.4,3.3c0,0-0.1,0-0.1,0.1L169,112.7\\r\\n\\tC168.6,112.8,168.3,112.9,168,112.9z\\\"/>\\r\\n<path class=\\\"st3\\\" d=\\\"M163.4,100.9c-0.5,0-1-0.2-1.3-0.6l-2.2-2.8c-0.6-0.7-0.4-1.8,0.3-2.4c0.7-0.6,1.8-0.4,2.4,0.3l2.2,2.8\\r\\n\\tc0.6,0.7,0.4,1.8-0.3,2.4C164.1,100.8,163.8,100.9,163.4,100.9z\\\"/>\\r\\n<path class=\\\"st2\\\" d=\\\"M91.9,191.2c-0.8,0-1.7-0.2-2.4-0.5c-0.2,0-0.3-0.1-0.5-0.2c-1.5-0.8-2.5-2.1-3-3.7c-0.5-1.6-0.3-3.3,0.5-4.8\\r\\n\\tl41.2-69.2c0.6-1,1.9-1.3,2.9-0.7c1,0.6,1.3,1.9,0.7,2.9l-41.2,69.1c-0.5,0.8-0.2,1.9,0.7,2.5c0.1,0,0.2,0.1,0.3,0.1\\r\\n\\tc0.7,0.4,1.5,0.2,2.2-0.3l48.6-47.3l10.7-21.4l-1.3-24l-3.9-2.1c-0.1,0-0.2-0.1-0.2-0.1c-2.8-2.1-6.4-2.7-9.8-1.7l-25.1,8.7\\r\\n\\tl-13.3,24.1c-0.2,0.3-0.1,0.7,0.2,0.9c0.3,0.2,0.8,0.1,1-0.2l14.8-18.7c0.3-0.4,0.7-0.6,1.1-0.7l24.1-6c1.1-0.3,2.3,0.4,2.6,1.5\\r\\n\\tc0.3,1.1-0.4,2.3-1.5,2.6l-23.4,5.8L103.5,126c-1.6,2-4.5,2.4-6.6,1c-2.1-1.4-2.8-4.2-1.6-6.5L109,95.8c0.3-0.5,0.7-0.8,1.2-1\\r\\n\\tl25.9-9c4.7-1.4,9.6-0.6,13.5,2.2l4.8,2.6c0.6,0.4,1,1,1.1,1.7l1.4,25.7c0,0.4-0.1,0.7-0.2,1.1l-11.1,22.2c-0.1,0.2-0.2,0.4-0.4,0.6\\r\\n\\tl-48.9,47.6c0,0-0.1,0.1-0.1,0.1C94.9,190.6,93.4,191.2,91.9,191.2z\\\"/>\\r\\n<path class=\\\"st2\\\" d=\\\"M135.9,186.4c-1.5,0-3-0.6-4.1-1.7c-1.9-2.1-2.1-5.2-0.4-7.5l10.8-13.9l-6.3-6.4c-0.8-0.8-0.8-2.2,0-3\\r\\n\\tc0.8-0.8,2.2-0.8,3,0l7.6,7.7c0.7,0.8,0.8,1.9,0.2,2.8l-11.9,15.3c-0.5,0.6-0.4,1.5,0.1,2.1c0.6,0.6,1.5,0.6,2.2,0l23.5-20.8\\r\\n\\tl-14.2-15.3c-0.8-0.9-0.7-2.2,0.1-3c0.9-0.8,2.2-0.7,3,0.1l15.7,16.9c0.4,0.4,0.6,1,0.6,1.5c0,0.6-0.3,1.1-0.7,1.5L139.7,185\\r\\n\\tC138.6,185.9,137.2,186.4,135.9,186.4z\\\"/>\\r\\n<g>\\r\\n\\t<path class=\\\"st4\\\" d=\\\"M116.8,87.4l-62.5,10c-0.7,0.1-1,0.9-0.7,1.5c2.3,4,9.2,17.2,6.1,28.1c-3.6,12.9-10,42.1,20.7,53\\r\\n\\t\\tc0.4,0.2,1,0,1.2-0.4l39.3-65.2c0.5-0.8-0.2-1.7-1.1-1.5l-1.3,0.4c-0.2,0.1-0.4,0.2-0.5,0.3l-12.5,15.7c0,0.1-0.1,0.1-0.2,0.2\\r\\n\\t\\tc-3.1,2.6-7.7,2.5-10.7-0.1l-0.1-0.1c-2.8-2.5-3.7-6.5-2-9.9l13.8-26.5c0.1-0.2,0.3-0.4,0.5-0.5l10.7-3.3\\r\\n\\t\\tC118.4,88.7,117.9,87.2,116.8,87.4z\\\"/>\\r\\n\\t<path class=\\\"st0\\\" d=\\\"M80.8,182.1c-0.4,0-0.8-0.1-1.1-0.2c-22.5-8-29.9-26.7-21.9-55.4c2.9-10.1-3.8-22.9-5.9-26.6\\r\\n\\t\\tc0,0,0-0.1-0.1-0.1c-0.4-0.9-0.4-1.9,0-2.8c0.4-0.8,1.2-1.4,2.2-1.5l62.5-10c1.5-0.3,2.9,0.6,3.4,2.1c0.4,1.4-0.2,2.8-1.5,3.4\\r\\n\\t\\tc-0.1,0-0.1,0.1-0.2,0.1l-10.2,3.1l-13.6,26.2c-1.3,2.5-0.6,5.5,1.6,7.5c0,0,0.1,0.1,0.1,0.1l0,0c2.3,1.9,5.7,2,8,0.1c0,0,0,0,0,0\\r\\n\\t\\tl12.5-15.6c0-0.1,0.1-0.1,0.2-0.2c0.3-0.3,0.7-0.5,1-0.7c0.1,0,0.2-0.1,0.3-0.1l1.3-0.4c0.1,0,0.1,0,0.2,0c1.2-0.3,2.5,0.2,3.2,1.2\\r\\n\\t\\tc0.7,1,0.7,2.3,0.1,3.3l-39.3,65.1c-0.3,0.6-0.9,1.1-1.6,1.3C81.4,182,81.1,182.1,80.8,182.1z M56,99.1c3.2,5.8,8.6,17.9,5.6,28.4\\r\\n\\t\\tc-7.4,26.4-1.3,42.9,18.7,50.3l34-56.4l-7.1,8.9c-0.1,0.2-0.4,0.5-0.7,0.7c-3.8,3.2-9.5,3.1-13.3-0.1c0,0-0.1-0.1-0.1-0.1l-0.1-0.1\\r\\n\\t\\tc-3.5-3.2-4.5-8.1-2.4-12.2L104.5,92c0.1-0.2,0.3-0.5,0.5-0.7L56,99.1z M106.7,130.9C106.7,130.9,106.7,130.9,106.7,130.9\\r\\n\\t\\tC106.7,130.9,106.7,130.9,106.7,130.9z M103.5,129.3C103.5,129.3,103.5,129.3,103.5,129.3C103.5,129.3,103.5,129.3,103.5,129.3z\\r\\n\\t\\t M103.5,129.3C103.5,129.3,103.5,129.3,103.5,129.3C103.5,129.3,103.5,129.3,103.5,129.3z M103.5,129.3L103.5,129.3L103.5,129.3z\\r\\n\\t\\t M119.2,113.4C119.2,113.4,119.2,113.4,119.2,113.4L119.2,113.4z M54.6,99.4L54.6,99.4C54.6,99.4,54.6,99.4,54.6,99.4z M108.1,93.8\\r\\n\\t\\tL108.1,93.8C108.1,93.8,108.1,93.8,108.1,93.8z M117.2,89.4C117.2,89.4,117.2,89.4,117.2,89.4C117.2,89.4,117.2,89.4,117.2,89.4z\\\"\\r\\n\\t\\t/>\\r\\n</g>\\r\\n</svg>\\r\\n\";","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MAT_SELECT_CONFIG, MatSelectModule } from '@angular/material/select';\r\nimport { MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { EcoFabSpeedDialModule } from '@ecodev/fab-speed-dial';\r\nimport { AppDialogConfigService } from '../app-administration/services';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { Context } from '../shared/services/context';\r\nimport { DialogService } from '../shared/services/dialog.service';\r\nimport { SharedComponentsModule } from '../shared/shared-components.module';\r\nimport { AppsListActionsComponent } from './apps-list/apps-list-actions/apps-list-actions.component';\r\nimport { AppsListComponent } from './apps-list/apps-list.component';\r\nimport { AppsManagementNavComponent } from './apps-management-nav/apps-management-nav.component';\r\nimport { AppsManagementRoutingModule } from './apps-management-routing.module';\r\nimport { CreateAppComponent } from './create-app/create-app.component';\r\nimport { CreateInheritedAppComponent } from './create-inherited-app/create-inherited-app.component';\r\nimport { AddAppFromFolderComponent } from './add-app-from-folder/add-app-from-folder.component';\r\nimport { ActiveFeaturesCountPipe } from './licence-info/active-features-count.pipe';\r\nimport { AgGridHeightDirective } from './licence-info/ag-grid-height.directive';\r\nimport { FeatureDetailsDialogComponent } from './licence-info/feature-details-dialog/feature-details-dialog.component';\r\nimport { FeaturesListEnabledReasonComponent } from './licence-info/features-list-enabled-reason/features-list-enabled-reason.component';\r\nimport { FeaturesListEnabledComponent } from './licence-info/features-list-enabled/features-list-enabled.component';\r\nimport { FeaturesStatusComponent } from './licence-info/features-status/features-status.component';\r\nimport { LicenseInfoComponent } from './licence-info/license-info.component';\r\nimport { LicensesOrderPipe } from './licence-info/licenses-order.pipe';\r\nimport { AppsListService } from './services/apps-list.service';\r\nimport { FeaturesConfigService } from './services/features-config.service';\r\nimport { SxcInsightsService } from './services/sxc-insights.service';\r\nimport { ZoneService } from './services/zone.service';\r\nimport { SiteLanguagesStatusComponent } from './site-languages/site-languages-status/site-languages-status.component';\r\nimport { SiteLanguagesComponent } from './site-languages/site-languages.component';\r\nimport { RegistrationComponent } from './sub-dialogs/registration/registration.component';\r\nimport { SystemInfoComponent } from './system-info/system-info.component';\r\nimport { AppNameShowComponent } from './add-app-from-folder/app-name-show/app-name-show.component';\r\nimport { CheckboxCellComponent } from './add-app-from-folder/checkbox-cell/checkbox-cell.component';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { FeaturesModule } from '../features/features.module';\r\nimport {MatToolbarModule} from '@angular/material/toolbar';\r\nimport {MatSidenavModule} from '@angular/material/sidenav';\r\nimport {MatListModule} from '@angular/material/list';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppNameShowComponent,\r\n    AppsManagementNavComponent,\r\n    AppsListComponent,\r\n    // AppsListShowComponent,\r\n    AppsListActionsComponent,\r\n    CheckboxCellComponent,\r\n    FeaturesListEnabledComponent,\r\n    SiteLanguagesComponent,\r\n    SiteLanguagesStatusComponent,\r\n    CreateAppComponent,\r\n    CreateInheritedAppComponent,\r\n    AddAppFromFolderComponent,\r\n    SystemInfoComponent,\r\n    FeaturesListEnabledReasonComponent,\r\n    FeaturesStatusComponent,\r\n    LicenseInfoComponent,\r\n    LicensesOrderPipe,\r\n    AgGridHeightDirective,\r\n    ActiveFeaturesCountPipe,\r\n    FeatureDetailsDialogComponent,\r\n    RegistrationComponent,\r\n  ],\r\n  imports: [\r\n    AppsManagementRoutingModule,\r\n    SharedComponentsModule,\r\n    MatDialogModule,\r\n    CommonModule,\r\n    SxcGridModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatSlideToggleModule,\r\n    MatTabsModule,\r\n    MatRippleModule,\r\n    EcoFabSpeedDialModule,\r\n    MatCardModule,\r\n    FormsModule,\r\n    MatInputModule,\r\n    MatMenuModule,\r\n    ReactiveFormsModule,\r\n    MatSelectModule,\r\n    MatSnackBarModule,\r\n    MatExpansionModule,\r\n    MatBadgeModule,\r\n    FeaturesModule,\r\n    MatToolbarModule,\r\n    MatSidenavModule,\r\n    MatListModule\r\n  ],\r\n  providers: [\r\n    Context,\r\n    AppsListService,\r\n    ZoneService,\r\n    FeaturesConfigService,\r\n    SxcInsightsService,\r\n    DialogService,\r\n    AppDialogConfigService,\r\n    { provide: MAT_SELECT_CONFIG, useValue: { hideSingleSelectionIndicator: true } },\r\n    { provide: MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS, useValue: { hideIcon: true } }\r\n  ],\r\n})\r\nexport class AppsManagementModule { }\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { Context } from '../../shared/services/context';\r\nimport { App, PendingApp } from '../models/app.model';\r\n\r\n@Injectable()\r\nexport class AppsListService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  private apiUrl(name: string) {\r\n    return this.dnnContext.$2sxc.http.apiUrl(name);\r\n  }\r\n\r\n  getAll() {\r\n    return this.http.get<App[]>(this.apiUrl(webApiAppRoot + 'list'), {\r\n      params: { zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  getInheritable() {\r\n    return this.http.get<App[]>(this.apiUrl(webApiAppRoot + 'InheritableApps'), {\r\n      params: { zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  getPendingApps() {\r\n    return this.http.get<PendingApp[]>(this.apiUrl(webApiAppRoot + 'GetPendingApps'), {\r\n      params: { zoneId: this.context.zoneId.toString() },\r\n    });\r\n  }\r\n\r\n  create(name: string, inheritAppId?: number, templateId?: number) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRoot + 'app'), {}, {\r\n      params: {\r\n        zoneId: this.context.zoneId.toString(),\r\n        name,\r\n        ...(inheritAppId != null && { inheritAppId }),\r\n        ...(templateId != null && { templateId }),\r\n      },\r\n    });\r\n  }\r\n\r\n  installPendingApps(pendingApps: PendingApp[]) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRoot + 'InstallPendingApps'), pendingApps, {\r\n      params: {\r\n        zoneId: this.context.zoneId.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(appId: number) {\r\n    return this.http.delete<null>(this.apiUrl(webApiAppRoot + 'app'), {\r\n      params: { zoneId: this.context.zoneId.toString(), appId: appId.toString() },\r\n    });\r\n  }\r\n\r\n  flushCache(appId: number) {\r\n    return this.http.get<null>(this.apiUrl(webApiAppRoot + 'flushcache'), {\r\n      params: { zoneId: this.context.zoneId.toString(), appId: appId.toString() },\r\n    });\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}