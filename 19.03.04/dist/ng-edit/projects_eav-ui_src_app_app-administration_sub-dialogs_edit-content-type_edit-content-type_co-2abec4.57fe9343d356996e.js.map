{"version":3,"file":"projects_eav-ui_src_app_app-administration_sub-dialogs_edit-content-type_edit-content-type_co-2abec4.57fe9343d356996e.js","mappings":"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","names":["typeNameRegExCleaned","toString","contentTypeNamePattern","substring","length","i0","ctx_r1","contentTypeNameError","EditContentTypeComponent_Conditional_4_Conditional_10_Conditional_0_Template","EditContentTypeComponent_Conditional_4_Conditional_10_Conditional_1_Template","name_r3","errors","required","pattern","scopeOption_r4","value","name","contentType","SharedDefId","_r1","save","$event","changeContentTypeName","EditContentTypeComponent_Conditional_4_Conditional_10_Template","changeScope","EditContentTypeComponent_Conditional_4_For_24_Template","unlockScope","EditContentTypeComponent_Conditional_4_Conditional_39_Template","closeDialog","Name","touched","disableAnimation","Scope","lockScope","scopeOptions","dropdownInsertValue","NameId","ngForm_r5","form","valid","loading","EditContentTypeComponent","#contentTypeSvc","#scope","#typeNameId","constructor","dialog","route","snackBar","this","log","classLog","hostClass","transient","ContentTypesService","snapshot","parent","paramMap","get","modeIsEdit","signalObj","StaticName","Description","ChangeNameId","NewNameId","#scopeOptionsHttp","getScopesSig","undefined","#scopeOptionsManual","computedObj","fromHttp","manual","concat","#convertScopeOptions","a","#loadContentTypeOnEdit","retrieveContentType","subscribe","set","newScopes","forEach","scopeOption","some","scope","push","ngAfterViewInit","setTimeout","close","newName","newScope","prompt","eavConstants","scopes","default","o","open","result","duration","document","activeElement","HTMLElement","blur","i1","i2","i3","selectors","hostVars","hostBindings","rf","ctx","EditContentTypeComponent_Conditional_4_Template","FormsModule","i4","MatFormFieldModule","i5","MatInputModule","i6","MatExpansionModule","i7","MatSelectModule","i8","i9","MatOptionModule","MatButtonModule","i10","MatIconModule","i11","MatDialogActions","FieldHintComponent","ClickStopPropagationDirective","TippyDirective","styles"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/constants/content-type.patterns.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/edit-content-type/edit-content-type.component.html","./projects/eav-ui/src/app/app-administration/sub-dialogs/edit-content-type/edit-content-type.component.ts"],"sourcesContent":["/**\r\n * This is for the angular UI.\r\n * Note that since ca. 2023 the last \"-\" literal character must be escaped using \"\\-\"\r\n * because of changes in how browsers handle regular expressions, aka the /v flag.\r\n */\r\nconst contentTypeNameRegEx = /(^[A-Za-z][A-Za-z0-9]*$)|(^@[A-Za-z][A-Za-z0-9\\-]*$)/;\r\nconst typeNameRegExCleaned = contentTypeNameRegEx.toString();\r\nconst removeSlashAtStartAndEnd = typeNameRegExCleaned.substring(1, typeNameRegExCleaned.toString().length - 1);\r\n\r\n/**\r\n * The pattern determines what content-type names are allowed.\r\n * Basically it's A-Z and numbers after the first digit.\r\n * But there are two exceptions:\r\n *  - types describing an input-type begin with an `@` and can also contain `-` chars\r\n *  - types beginning with an `|` are very old type names for data-sources, they can contain anything!\r\n */\r\nexport const contentTypeNamePattern = removeSlashAtStartAndEnd;\r\nexport const contentTypeNameError = 'Standard letters and numbers are allowed. Must start with a letter.';\r\n\r\n// 2020-04-29 2dm - temporarily used this pattern while renaming unique named types containing '|' chars\r\n// export const contentTypeNamePattern = /(^[A-Za-z][A-Za-z0-9]+$)|(^@[A-Za-z][A-Za-z0-9-]*$)|(^\\|.*$)/;\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">{{ modeIsEdit ? 'Edit Content Type' : 'New Content Type' }}</div>\r\n  </div>\r\n  @if (contentType()) {\r\n    <form #ngForm=\"ngForm\" (ngSubmit)=\"save()\">\r\n      <div class=\"eav-dialog-content\">\r\n        <div>\r\n          <div class=\"eav-edit-input\">\r\n            <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n              <mat-label>Name</mat-label>\r\n              <input\r\n                matInput\r\n                type=\"text\"\r\n                required\r\n                [pattern]=\"contentTypeNamePattern\"\r\n                [ngModel]=\"contentType().Name\"\r\n                (ngModelChange)=\"changeContentTypeName($event)\"\r\n                name=\"Name\"\r\n                #name=\"ngModel\"\r\n              />\r\n            </mat-form-field>\r\n            @if (name.touched && name.errors) {\r\n              @if (name.errors.required) {\r\n                <app-field-hint [isError]=\"true\">This field is required</app-field-hint>\r\n              }\r\n              @if (name.errors.pattern) {\r\n                <app-field-hint [isError]=\"true\">{{ contentTypeNameError }}</app-field-hint>\r\n              }\r\n            }\r\n          </div>\r\n          <mat-accordion [@.disabled]=\"disableAnimation()\">\r\n            <mat-expansion-panel>\r\n              <mat-expansion-panel-header>\r\n                <mat-panel-title>Advanced</mat-panel-title>\r\n                <mat-panel-description></mat-panel-description>\r\n              </mat-expansion-panel-header>\r\n              <div class=\"eav-edit-input\">\r\n                <div class=\"eav-form-and-button\">\r\n                  <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n                    <mat-label>Scope</mat-label>\r\n                    <mat-select [ngModel]=\"contentType().Scope\" name=\"Scope\" (ngModelChange)=\"changeScope($event)\" [disabled]=\"lockScope()\">\r\n                      @for (scopeOption of scopeOptions(); track scopeOption) {\r\n                        <mat-option [value]=\"scopeOption.value\">\r\n                          {{ scopeOption.name }}\r\n                        </mat-option>\r\n                      }\r\n                      <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n                    </mat-select>\r\n                  </mat-form-field>\r\n                  <button\r\n                    mat-icon-button\r\n                    type=\"button\"\r\n                    matTextSuffix\r\n                    [tippy]=\"lockScope() ? 'Unlock' : 'Lock'\"\r\n                    class=\"eav-scope-button\"\r\n                    (click)=\"unlockScope()\"\r\n                  >\r\n                    <mat-icon>\r\n                      {{ lockScope() ? 'lock' : 'lock_open' }}\r\n                    </mat-icon>\r\n                  </button>\r\n                </div>\r\n                <app-field-hint>\r\n                  The scope should almost never be changed -\r\n                  <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n                </app-field-hint>\r\n              </div>\r\n              <div class=\"eav-edit-input\">\r\n                <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n                  <mat-label>Static Name</mat-label>\r\n                  <input matInput type=\"text\" [ngModel]=\"contentType().NameId\" name=\"StaticName\" disabled />\r\n                </mat-form-field>\r\n              </div>\r\n              @if (contentType().SharedDefId) {\r\n                <div class=\"eav-edit-input\">\r\n                  <h3>Shared Content Type (Ghost)</h3>\r\n                  <p>Note: this can't be edited in the UI, for now if you really know what you're doing, do it in the DB</p>\r\n                  <p>Uses Type Definition of: {{ contentType().SharedDefId }}</p>\r\n                </div>\r\n              }\r\n            </mat-expansion-panel>\r\n          </mat-accordion>\r\n        </div>\r\n      </div>\r\n      <mat-dialog-actions align=\"end\">\r\n        <button mat-raised-button type=\"button\" (click)=\"closeDialog()\">Cancel</button>\r\n        <button mat-raised-button type=\"submit\" color=\"accent\" [disabled]=\"!ngForm.form.valid || loading()\">Save</button>\r\n      </mat-dialog-actions>\r\n    </form>\r\n  }\r\n</div>\r\n","import { AfterViewInit, Component, HostBinding } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { transient } from '../../../../../../core';\r\nimport { FieldHintComponent } from '../../../shared/components/field-hint/field-hint.component';\r\nimport { dropdownInsertValue } from '../../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../../shared/constants/eav.constants';\r\nimport { ClickStopPropagationDirective } from '../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { contentTypeNameError, contentTypeNamePattern } from '../../constants/content-type.patterns';\r\nimport { ContentTypeEdit } from '../../models/content-type.model';\r\nimport { ContentTypesService } from '../../services/content-types.service';\r\n\r\n@Component({\r\n    selector: 'app-edit-content-type',\r\n    templateUrl: './edit-content-type.component.html',\r\n    styleUrls: ['./edit-content-type.component.scss'],\r\n    imports: [\r\n        FormsModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatExpansionModule,\r\n        MatSelectModule,\r\n        MatOptionModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        MatDialogActions,\r\n        FieldHintComponent,\r\n        ClickStopPropagationDirective,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class EditContentTypeComponent implements AfterViewInit {\r\n\r\n  log = classLog({ EditContentTypeComponent });\r\n\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  #contentTypeSvc = transient(ContentTypesService);\r\n\r\n  /** Parameters in case of rename; scope should always be set as we want to always create in that scope*/\r\n  #scope = this.route.snapshot.parent.paramMap.get('scope');\r\n  #typeNameId = this.route.snapshot.paramMap.get('contentTypeStaticName');\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<EditContentTypeComponent>,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.log.a('constructor');\r\n    this.#loadContentTypeOnEdit();\r\n  }\r\n\r\n  #loadContentTypeOnEdit(): void {\r\n    // If we're in new mode, just keep empty values\r\n    if (!this.modeIsEdit)\r\n      return;\r\n\r\n    // Preload infos about the current content type if we're in edit mode (not new)\r\n    this.#contentTypeSvc.retrieveContentType(this.#typeNameId).subscribe(fromHttp => {\r\n      this.contentType.set({\r\n        ...fromHttp,\r\n        ChangeNameId: false,\r\n        NewNameId: fromHttp.NameId,\r\n      } satisfies ContentTypeEdit);\r\n    });\r\n  }\r\n\r\n\r\n  /** RegEx property to use in HTML */\r\n  protected contentTypeNamePattern = contentTypeNamePattern;\r\n  protected contentTypeNameError = contentTypeNameError;\r\n  protected dropdownInsertValue = dropdownInsertValue;\r\n\r\n  protected modeIsEdit = !!this.#typeNameId;\r\n\r\n  protected lockScope = signalObj<boolean>('lockScope', true);\r\n  protected disableAnimation = signalObj<boolean>('disableAnimation', true);\r\n  protected loading = signalObj<boolean>('loading', false);\r\n  protected contentType = signalObj<ContentTypeEdit>('contentType', {\r\n    StaticName: '',\r\n    // TODO: @2pp - use NameId: '', instead of StaticName\r\n    Name: '',\r\n    Description: '',\r\n    Scope: this.#scope,\r\n    ChangeNameId: false,\r\n    NewNameId: '',\r\n  } as ContentTypeEdit);\r\n\r\n  // TODO: @2dg this is a suggestion how to handle http requests in a more signal-like way\r\n  // @2dg note that doing this in the constructor would often be better, but I wanted to prove this way work.\r\n  // Scope Options Http will fire once when data arrives\r\n\r\n  #scopeOptionsHttp = this.#contentTypeSvc.getScopesSig(undefined);\r\n  #scopeOptionsManual = signalObj<ScopeOption[]>('scopeOptionsManual', []);\r\n  protected scopeOptions = computedObj<ScopeOption[]>('scopeOptions', () => {\r\n    const fromHttp = this.#scopeOptionsHttp();\r\n    const manual = this.#scopeOptionsManual();\r\n    return (fromHttp) ? manual.concat(this.#convertScopeOptions(fromHttp)) : manual;\r\n  });\r\n\r\n  #convertScopeOptions(scopeOptions: ScopeOption[]) {\r\n    const newScopes: ScopeOption[] = [];\r\n    scopeOptions.forEach(scopeOption => {\r\n      if (!newScopes.some(scope => scope.value === scopeOption.value))\r\n        newScopes.push(scopeOption);\r\n    });\r\n    if (!newScopes.some(scope => scope.value === this.#scope))\r\n      newScopes.push({\r\n        name: this.#scope,\r\n        value: this.#scope,\r\n      } satisfies ScopeOption);\r\n    return newScopes;\r\n  }\r\n\r\n  // workaround for angular component issue #13870\r\n  ngAfterViewInit() {\r\n    // timeout required to avoid ExpressionChangedAfterItHasBeenCheckedError\r\n    setTimeout(() => this.disableAnimation.set(false));\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  changeContentTypeName(newName: string) {\r\n    this.contentType.set({ ...this.contentType(), Name: newName });\r\n  }\r\n\r\n  changeScope(newScope: string) {\r\n    if (newScope === dropdownInsertValue) {\r\n      newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n      if (!this.scopeOptions().some(o => o.value === newScope)) {\r\n        this.#scopeOptionsManual.set([\r\n          {\r\n            name: newScope,\r\n            value: newScope,\r\n          } satisfies ScopeOption,\r\n          ...this.scopeOptions()\r\n        ]);\r\n      }\r\n    }\r\n    this.contentType.set({ ...this.contentType(), Scope: newScope });\r\n  }\r\n\r\n  unlockScope() {\r\n    this.lockScope.set(!this.lockScope());\r\n    if (this.lockScope())\r\n      this.contentType.set({ ...this.contentType(), Scope: this.#scope });\r\n  }\r\n\r\n  save() {\r\n    this.loading.set(true);\r\n    this.snackBar.open('Saving...');\r\n    this.#contentTypeSvc.save(this.contentType()).subscribe(result => {\r\n      this.loading.set(false);\r\n      this.snackBar.open('Saved', null, { duration: 2000 });\r\n      this.closeDialog();\r\n    });\r\n    if (document.activeElement instanceof HTMLElement) {\r\n      document.activeElement.blur();\r\n    }\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}