"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_replace-content_replace-content_component_ts"],{3620:(R,d,e)=>{function c(_,r){return r(_)}function t(_,r){return r(_)}e.d(d,{C:()=>c,z:()=>t})},4513:(R,d,e)=>{e.r(d),e.d(d,{ReplaceContentComponent:()=>L});var c=e(4344),t=e(1659),_=e(4456),r=e(9771),M=e(4175),f=e(4646),C=e(7941),m=e(4950),O=e(3840),P=e(7984),h=e(2159),I=e(2938),o=e(3620),s=e(9669),p=e(3216),g=e(334),B=e(8471),D=e(7993),A=e(3347);function U(E,j){if(1&E&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&E){const a=j.$implicit;t.Y8G("value",a.label),t.R7$(),t.JRh(a.label)}}let L=(()=>{class E{#n;#t;constructor(a,i){this.dialog=a,this.snackBar=i,this.hostClass="dialog-component",this.#n=(0,I.d)(s.y),this.#t=(0,I.d)(B.c),this.#s=(0,o.C)(this.#t.getParams(["guid","part","index"]),n=>({guid:n.guid,part:n.part,index:parseInt(n.index,10)})),this.isAddMode=(0,D.KX)("isAddMode",!!this.#t.getQueryParam("add")),this.filterText=(0,t.geq)(""),this.#e=(0,D.KX)("options",[]),this.options=(0,D.bo)("filteredOptions",()=>{const n=this.filterText().toLocaleLowerCase();return this.#e().filter(l=>l.label.toLocaleLowerCase().includes(n))}),this.hasSelection=(0,D.bo)("isMatch",()=>this.options().map(n=>n.label).includes(this.filterText()))}#s;#a;#e;ngOnInit(){this.#i(!1,null),this.#t.doOnDialogClosed(()=>{const i=this.#t.router.getCurrentNavigation().extras?.state,n=i?.[Object.keys(i)[0]];this.#i(!0,n)})}closeDialog(){this.dialog.close()}select(a){this.filterText.set(a.option.value)}copySelected(){const a=this.#o(),i={items:[g.c.copy(this.#a,a.id)]},n=(0,p.s)(i);this.#t.navRelative([`edit/${n}`])}save(){this.snackBar.open("Saving...");const a=this.#o();this.#n.saveItem(a).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}#i(a,i){const n=this.#o();this.#n.getItems(n).subscribe(l=>{const v=Object.entries(l.Items).map(([u,T])=>({id:parseInt(u,10),label:`${T} (${u})`}));if(this.#e.set(v),!n.add&&!a||null!=i){const u=a?i:l.SelectedId,T=this.#e().find(K=>K.id===u)?.label||"";this.filterText.set(T)}this.#a=l.ContentTypeName})}#o(){const a=this.filterText();return{id:this.#e().find(l=>l.label===a)?.id??null,...this.#s,add:this.isAddMode()}}static{this.\u0275fac=function(i){return new(i||E)(t.rXU(C.CP),t.rXU(A.UG))}}static{this.\u0275cmp=t.VBU({type:E,selectors:[["app-replace-content"]],hostVars:1,hostBindings:function(i,n){2&i&&t.Mr5("className",n.hostClass)},inputs:{filterText:[1,"filterText"]},outputs:{filterText:"filterTextChange"},decls:25,vars:10,consts:[["auto","matAutocomplete"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"eav-options-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","matAutocomplete","ngModel"],[3,"optionSelected","hideSingleSelectionIndicator"],["itemSize","48","minBufferPx","500","maxBufferPx","1000"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","","tippy","Copy",3,"click","disabled"],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click","disabled"],[3,"value"]],template:function(i,n){if(1&i){const l=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3),t.k0s()(),t.j41(4,"div",4),t.nrm(5,"router-outlet"),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),t.EFF(11,"Choose item"),t.k0s(),t.j41(12,"input",7),t.mxI("ngModelChange",function(u){return t.eBV(l),t.DH7(n.filterText,u)||(n.filterText=u),t.Njj(u)}),t.k0s(),t.j41(13,"mat-autocomplete",8,0),t.bIt("optionSelected",function(u){return t.eBV(l),t.Njj(n.select(u))}),t.j41(15,"cdk-virtual-scroll-viewport",9),t.DNE(16,U,2,2,"mat-option",10),t.k0s()()(),t.j41(17,"button",11),t.bIt("click",function(){return t.eBV(l),t.Njj(n.copySelected())}),t.j41(18,"mat-icon"),t.EFF(19,"file_copy"),t.k0s()()()(),t.j41(20,"mat-dialog-actions",12)(21,"button",13),t.bIt("click",function(){return t.eBV(l),t.Njj(n.closeDialog())}),t.EFF(22,"Cancel"),t.k0s(),t.j41(23,"button",14),t.bIt("click",function(){return t.eBV(l),t.Njj(n.save())}),t.EFF(24,"Save"),t.k0s()()()}if(2&i){const l=t.sdS(14);t.R7$(3),t.JRh(n.isAddMode()?"Add Existing Item":"Replace Content Item"),t.R7$(4),t.SpI("",n.isAddMode()?"Select a content-item to add to this list.":"By replacing a content-item you can make other content appear in the slot of the original content."," "),t.R7$(5),t.Y8G("matAutocomplete",l),t.R50("ngModel",n.filterText),t.R7$(),t.Y8G("hideSingleSelectionIndicator",!0),t.R7$(2),t.xc7("height",n.options().length<6?48*n.options().length:240,"px"),t.R7$(),t.Y8G("cdkVirtualForOf",n.options()),t.R7$(),t.Y8G("disabled",!n.hasSelection()),t.R7$(6),t.Y8G("disabled",!n.hasSelection())}},dependencies:[h.n3,m.RG,m.rl,m.nJ,P.fS,P.fg,r.jL,r.$3,f.wT,r.pN,_.YN,_.me,_.BC,_.vS,c.d6,c.yg,c.E$,f.Sy,M.Hl,M.$z,M.iY,O.m_,O.An,C.E7],styles:[".eav-options-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]})}}return E})()},4979:(R,d,e)=>{e.d(d,{V:()=>_});var c=e(7092),t=e(1659);let _=(()=>{class r{constructor(){this.subscriptions=new c.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(C){return new(C||r)}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac})}}return r})()},8471:(R,d,e)=>{e.d(d,{c:()=>P});var c=e(2159),t=e(1567),_=e(3037),r=e(271),M=e(5057),f=e(4435),C=e(4979),m=e(1659);const O={doOnDialogClosed:!0};let P=(()=>{class h extends C.V{constructor(o,s){super(),this.router=o,this.route=s,this.log=(0,f.Tq)({DialogRoutingService:h},O)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}get urlSegments(){return this.router.url.split("/")}getParam(o){return this.route.snapshot.paramMap.get(o)}getParams(o){const s=this.route.snapshot.paramMap;return o.reduce((p,g)=>(p[g]=s.get(g),p),{})}getQueryParam(o){return this.route.snapshot.queryParamMap.get(o)}getQueryParams(o){const s=this.route.snapshot.queryParamMap;return o.reduce((p,g)=>(p[g]=s.get(g),p),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(o){const s=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>o())),s.end()}urlSubRoute(o){const s=this.router.createUrlTree([o],{relativeTo:this.route});return this.router.serializeUrl(s)}navPath(o,s){return this.router.navigate([o],s)}navRelative(o,s){return this.router.navigate(o,{...s,relativeTo:this.route})}childDialogClosed$(){return this.router.events.pipe((0,t.p)(o=>o instanceof c.wF),(0,_.Z)(!!this.route.snapshot.firstChild),(0,r.T)(()=>!!this.route.snapshot.firstChild),(0,M.J)(),(0,t.p)(([o,s])=>o&&!s))}static{this.\u0275fac=function(s){return new(s||h)(m.KVO(c.Ix),m.KVO(c.nX))}}static{this.\u0275prov=m.jDH({token:h,factory:h.\u0275fac})}}return h})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.04/dist/ng-edit/projects_eav-ui_src_app_replace-content_replace-content_component_ts.c0a5b61233f0f825.js.map