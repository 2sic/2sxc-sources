"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_shared_c-cc3950"],{533:(M,D,s)=>{s.d(D,{m:()=>P});var d=s(604),l=s(7488),u=s(8600),f=s(6698),y=s(6028),h=s(9244),p=s(316),S=s(6936),v=s(4896),_=s(1332);let P=(()=>{class g extends p.o{constructor(E,T,R,t){super(new S.W("AppDialogConfigService",!1)),this.http=E,this.context=T,this.globalConfigService=R,this.dialogSettings$={},this.log.add("using context #",this.context.log.svcId),t.loadFromService(this)}ngOnDestroy(){super.destroy()}getCurrent$(){const E=this.context.appId;return this.log.add("getCurrent$","appId",E),this.getShared$(E)}getSitePrimaryApp$(){return this.getCurrent$().pipe((0,d.k)(E=>E?.Context.Site.PrimaryApp))}getGlobalPrimaryApp$(){return this.getCurrent$().pipe((0,d.k)(E=>E?.Context.System.PrimaryApp))}getShared$(E){return this.log.add("getShared$","appId",E),this.dialogSettings$[E]??=this.getDialogSettings(E,"getShared$").pipe((0,l.C)({refCount:!1})),this.dialogSettings$[E]}getDialogSettings(E,T){return this.log.add("getDialogSettings","appId",E,"reqBy",T),this.http.get("admin/dialog/settings",{params:{appId:E??this.context.appId.toString()}}).pipe((0,d.k)(R=>(R.Context.Language.List=R.Context.Language.List.filter(t=>t.IsEnabled),R)),(0,u.y)(R=>{this.globalConfigService.allowDebug(R.Context.Enable.DebugMode)}))}static#t=this.\u0275fac=function(T){return new(T||g)(v.CoB(_.KK),v.CoB(y.e),v.CoB(f.Sq),v.CoB(h.E))};static#e=this.\u0275prov=v.wxM({token:g,factory:g.\u0275fac})}return g})()},6964:(M,D,s)=>{s.d(D,{M:()=>h});var d=s(6028),l=s(9644),u=s(4896),f=s(1332),y=s(3392);let h=(()=>{class p{constructor(v,_,I){this.http=v,this.context=_,this.dnnContext=I}getContentInfo(v){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(l._+"Get"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),scope:v}})}exportParts(v,_,I){const m=this.dnnContext.$2sxc.http.apiUrl(l._+"Export")+"?appId="+this.context.appId.toString()+"&zoneId="+this.context.zoneId.toString()+"&contentTypeIdsString="+v.join(";")+"&entityIdsString="+_.join(";")+"&templateIdsString="+I.join(";");window.open(m,"_blank","")}static#t=this.\u0275fac=function(_){return new(_||p)(u.CoB(f.KK),u.CoB(d.e),u.CoB(y.es))};static#e=this.\u0275prov=u.wxM({token:p,factory:p.\u0275fac})}return p})()},6503:(M,D,s)=>{s.d(D,{S:()=>h});var d=s(5343),l=s(6028),u=s(4896),f=s(1332),y=s(3392);let h=(()=>{class p{constructor(v,_,I){this.http=v,this.context=_,this.dnnContext=I}getAppInfo(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(d.i+"Statistics"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}exportApp(v,_){const I=this.dnnContext.$2sxc.http.apiUrl(d.i+"Export")+"?appId="+this.context.appId+"&zoneId="+this.context.zoneId+"&includeContentGroups="+v+"&resetAppGuid="+_;window.open(I,"_blank","")}exportForVersionControl({includeContentGroups:v,resetAppGuid:_,withFiles:I}){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(d.i+"SaveData"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),includeContentGroups:v.toString(),resetAppGuid:_.toString(),withPortalFiles:I.toString()}})}static#t=this.\u0275fac=function(_){return new(_||p)(u.CoB(f.KK),u.CoB(l.e),u.CoB(y.es))};static#e=this.\u0275prov=u.wxM({token:p,factory:p.\u0275fac})}return p})()},9644:(M,D,s)=>{s.d(D,{M:()=>p,_:()=>h});var d=s(5343),l=s(6028),u=s(4896),f=s(1332),y=s(3392);const h="admin/appParts/";let p=(()=>{class S{constructor(_,I,m){this.http=_,this.context=I,this.dnnContext=m}importAppParts(_){const I=new FormData;return I.append("File",_),this.http.post(this.dnnContext.$2sxc.http.apiUrl(h+"Import"),I,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}resetApp(_){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(d.i+"Reset"),{},{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),withPortalFiles:_.toString()}})}static#t=this.\u0275fac=function(I){return new(I||S)(u.CoB(f.KK),u.CoB(l.e),u.CoB(y.es))};static#e=this.\u0275prov=u.wxM({token:S,factory:S.\u0275fac})}return S})()},8112:(M,D,s)=>{s.d(D,{K0:()=>h.K0,Xi:()=>l.X,cV:()=>h.cV,fn:()=>h.fn,kN:()=>h.kN,kX:()=>h.kX,mK:()=>d.m,ot:()=>h.ot,sj:()=>p.s});var d=s(533),l=s(692),h=(s(6964),s(6503),s(9644),s(900)),p=s(7184)},900:(M,D,s)=>{s.d(D,{K0:()=>T,cV:()=>g,fn:()=>O,kN:()=>E,kX:()=>R,ot:()=>P});var d=s(9616),l=s(9432),u=s(604),f=s(4172),y=s(616),h=s(6028),p=s(4896),S=s(1332),v=s(3392);const P="admin/query/Run",g="admin/query/DebugStream",O="admin/query/Save",E="admin/query/Get",T="admin/query/DataSources";let R=(()=>{class t{constructor($,k,A){this.http=$,this.context=k,this.dnnContext=A}getAll($){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(f.U1),{params:{appId:this.context.appId.toString(),contentType:$}})}importQuery($){return(0,d.Q)((0,y.S)($)).pipe((0,l.G)(k=>this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:this.context.appId.toString(),ContentBase64:k})),(0,u.k)(k=>({Success:k,Messages:[]})))}clonePipeline($){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:$.toString(),appId:this.context.appId.toString()}})}delete($){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:$.toString()}})}static#t=this.\u0275fac=function(k){return new(k||t)(p.CoB(S.KK),p.CoB(h.e),p.CoB(v.es))};static#e=this.\u0275prov=p.wxM({token:t,factory:t.\u0275fac})}return t})()},7184:(M,D,s)=>{s.d(D,{s:()=>I});var d=s(6028),l=s(4896),u=s(1332),f=s(3392);const y="admin/view/",h=y+"all",p=y+"delete",S=y+"import",v=y+"polymorphism",_=y+"usage";let I=(()=>{class m{constructor(g,O,E){this.http=g,this.context=O,this.dnnContext=E}getAll(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(h),{params:{appId:this.context.appId.toString()}})}delete(g){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(p),{params:{appId:this.context.appId.toString(),Id:g.toString()}})}import(g){const O=new FormData;return O.append("File",g),this.http.post(this.dnnContext.$2sxc.http.apiUrl(S),O,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}export(g){const O=this.dnnContext.$2sxc.http.apiUrl(y+"json")+"?appId="+this.context.appId+"&viewId="+g;window.open(O,"_blank","")}getPolymorphism(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(v),{params:{appId:this.context.appId.toString()}})}getUsage(g){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(_),{params:{appId:this.context.appId.toString(),guid:g}})}static#t=this.\u0275fac=function(O){return new(O||m)(l.CoB(u.KK),l.CoB(d.e),l.CoB(f.es))};static#e=this.\u0275prov=l.wxM({token:m,factory:m.\u0275fac})}return m})()},5343:(M,D,s)=>{s.d(D,{i:()=>S,t:()=>v});var d=s(9432),l=s(8916),u=s(8288),f=s(6028),y=s(4896),h=s(1332),p=s(3392);const S="admin/app/";let v=(()=>{class _{constructor(m,P,g){this.http=m,this.context=P,this.dnnContext=g}importApp(m,P,g=!1){const O=new FormData;return O.append("File",m),O.append("Name",P??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(S+"Import"),O,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,d.G)(E=>{if(g&&E.Messages[0]?.MessageType===u.cB.Warning){const T=prompt(E.Messages[0].Text+" Would you like to install it using another folder name?");if(T)return this.importApp(m,T,!0)}return(0,l.of)(E)}))}static#t=this.\u0275fac=function(P){return new(P||_)(y.CoB(h.KK),y.CoB(f.e),y.CoB(p.es))};static#e=this.\u0275prov=y.wxM({token:_,factory:_.\u0275fac})}return _})()},1584:(M,D,s)=>{s.d(D,{e:()=>I});const d={states:{true:{tooltip:"true/on",icon:"radio_button_checked"},false:{tooltip:"false/off",icon:"radio_button_unchecked"}}};var l=s(4896),u=s(5056),f=s(2328),y=s(8200);function h(m,P){1&m&&l.C_f(0)}function p(m,P){if(1&m&&(l.I0R(0,"a",1),l.yuY(1,h,1,0,"ng-container",3),l.C$Y()),2&m){const g=l.GaO(),O=l.Gew(4);l.E7m("href",g.data.url,l.K6U),l.yG2(1),l.E7m("ngTemplateOutlet",O)}}const S=m=>({clickable:m});function v(m,P){if(1&m&&(l.I0R(0,"div",4)(1,"mat-icon"),l.OEk(2),l.C$Y()()),2&m){const g=l.GaO();l.E7m("ngClass",l.S45(3,S,g.data.clickable))("tippy",g.data.tooltip),l.yG2(2),l.cNF(g.data.icon)}}function _(m,P){if(1&m&&(l.I0R(0,"div",4)(1,"mat-icon"),l.OEk(2),l.C$Y()()),2&m){const g=l.GaO();l.E7m("ngClass",l.S45(3,S,g.data.clickable))("tippy",g.data.tooltip),l.yG2(2),l.cNF(g.data.icon)}}let I=(()=>{class m{agInit(g){this.value=g.value,this.allSettings=g.settings?.(g.data)??d;const O=this.allSettings.states[this.value?"true":"false"];this.data={...O,url:O.url??O.getUrl?.(g.data)}}refresh(g){return!0}static#t=this.\u0275fac=function(O){return new(O||m)};static#e=this.\u0275cmp=l.In1({type:m,selectors:[["app-ag-bool-icon-renderer"]],decls:5,vars:1,consts:[[1,"icon-container"],["target","_blank",3,"href"],["showIcon",""],[4,"ngTemplateOutlet"],[1,"icon-cell","icon",3,"ngClass","tippy"]],template:function(O,E){1&O&&(l.I0R(0,"div",0),l.yuY(1,p,2,2,"a",1)(2,v,3,5),l.C$Y(),l.yuY(3,_,3,5,"ng-template",null,2,l.gJz)),2&O&&(l.yG2(1),l.C0Y(1,E.data.url?1:2))},dependencies:[u.QF,u.XV,f.qL,y.Y],encapsulation:2})}return m})()},9972:(M,D,s)=>{s.d(D,{y:()=>u});var d=s(5960),l=s(1584);class u{static#t=this.ActionsPinnedRight1={width:42,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#e=this.ActionsPinnedRight3={width:122,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#n=this.ActionsPinnedRight4={width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#i=this.ActionsPinnedRight5={width:202,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#o=this.IconShow={headerName:"Show",width:70,headerClass:"dense",cellClass:"icons no-outline".split(" "),sortable:!0,filter:d.s,valueGetter:y=>!y.data.IsHidden,cellRenderer:l.e};static#a=this.Character={width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#s=this.Id={headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#r=this.Number={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#l=this.TextWide={flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#c=this.TextNarrow={flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"}}},2816:(M,D,s)=>{s.d(D,{K:()=>v});var d=s(5204),l=s(6560),u=s(1792),f=s(604),y=s(6536),h=s(6884),p=s(6936),S=s(4896);let v=(()=>{class _ extends h.C{constructor(m,P,g){super(),this.router=m,this.route=P,this.log=g,this.log??=new p.W("BaseComponent",!1)}ngOnDestroy(){super.ngOnDestroy()}refreshOnChildClosedShallow(){return this.router.events.pipe((0,l.I)(m=>m instanceof d.cf),(0,u.W)(!!this.route.snapshot.firstChild),(0,f.k)(()=>!!this.route.snapshot.firstChild),(0,y.c)(),(0,l.I)(([m,P])=>m&&!P))}static#t=this.\u0275fac=function(P){return new(P||_)(S.GI1(d.E5),S.GI1(d.gV),S.GI1(p.W))};static#e=this.\u0275dir=S.Sc5({type:_,features:[S.eg9]})}return _})()},5960:(M,D,s)=>{s.d(D,{s:()=>f});var d=s(4896),l=s(1904),u=s(1232);let f=(()=>{class y{constructor(){this.filter=""}agInit(p){this.filterParams=p}isFilterActive(){return""!==this.filter}doesFilterPass(p){const v=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:p.node.data,getValue:_=>p.node.data[_],node:p.node});return null!=v&&v.toString()===this.filter}getModel(){if(this.isFilterActive())return{filterType:"boolean",filter:this.filter}}setModel(p){this.filter=p?p.filter:""}afterGuiAttached(p){}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(S){return new(S||y)};static#e=this.\u0275cmp=d.In1({type:y,selectors:[["app-boolean-filter"]],decls:7,vars:1,consts:[[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(S,v){1&S&&(d.I0R(0,"mat-radio-group",0),d.qCj("ngModelChange",function(I){return v.filter=I})("ngModelChange",function(){return v.filterChanged()}),d.I0R(1,"mat-radio-button",1),d.OEk(2,"All"),d.C$Y(),d.I0R(3,"mat-radio-button",2),d.OEk(4,"True"),d.C$Y(),d.I0R(5,"mat-radio-button",3),d.OEk(6,"False"),d.C$Y()()),2&S&&d.E7m("ngModel",v.filter)},dependencies:[l.ue,l._G,u.cv,u.cT],styles:[".mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return y})()},5760:(M,D,s)=>{s.d(D,{q:()=>v});var d=s(2556),l=s(4896),u=s(4648),f=s(5056),y=s(6176),h=s(2328),p=s(8200);const S=(_,I)=>({"align-start":_,"align-end":I});let v=(()=>{class _{constructor(m){this.snackBar=m}agInit(m){this.id=m.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=m.tooltipGetter(m.data)}refresh(m){return!0}copy(){(0,d.y)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(P){return new(P||_)(l.GI1(u.yS))};static#e=this.\u0275cmp=l.In1({type:_,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(P,g){1&P&&(l.I0R(0,"div",0),l.qCj("click",function(){return g.copy()}),l.I0R(1,"span",1),l.OEk(2),l.C$Y(),l.I0R(3,"mat-icon",2),l.OEk(4,"file_copy"),l.C$Y()()),2&P&&(l.E7m("tippy",g.tooltip)("ngClass",l.IBC(3,S,"start"===g.align,"end"===g.align)),l.yG2(2),l.cNF(g.id))},dependencies:[f.QF,y.UZ,h.qL,p.Y],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}return _})()},1743:(M,D,s)=>{s.d(D,{A:()=>d});const d={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},760:(M,D,s)=>{s.d(D,{q:()=>u});var d=s(5924),l=s(4896);let u=(()=>{class f{constructor(h){this.elementRef=h}ngOnChanges(h){if(null==this.tooltip&&(this.tooltip=(0,d.cp)(this.elementRef.nativeElement,{animation:"scale-subtle",arrow:!!this.tippyArrow,duration:[100,50],placement:"bottom",theme:"2sxc",allowHTML:!!this.tippyAllowHtml})),null!=h.tippy&&this.tooltip.setContent(this.tippy),null!=h.tippyDisabled&&(this.tippyDisabled?this.tooltip.disable():this.tooltip.enable()),null!=h.tippyPlacement&&this.tooltip.setProps({placement:this.tippyPlacement}),null!=h.tippyShowDelay){const p="number"==typeof this.tippyShowDelay?this.tippyShowDelay:parseInt(this.tippyShowDelay,10);this.tooltip.setProps({delay:[p,null]})}}ngOnDestroy(){this.tooltip?.destroy()}static#t=this.\u0275fac=function(p){return new(p||f)(l.GI1(l.GMv))};static#e=this.\u0275dir=l.Sc5({type:f,selectors:[["","tippy",""]],inputs:{tippy:"tippy",tippyDisabled:"tippyDisabled",tippyPlacement:"tippyPlacement",tippyShowDelay:"tippyShowDelay",tippyAllowHtml:"tippyAllowHtml",tippyArrow:"tippyArrow"},standalone:!0,features:[l.SYr]})}return f})()},2556:(M,D,s)=>{function d(l){const u=document.createElement("textarea");u.value=l,u.setAttribute("readonly",""),u.style.position="absolute",u.style.left="-9999px",document.body.appendChild(u);const f=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);u.select(),document.execCommand("copy"),document.body.removeChild(u),f&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(f))}s.d(D,{y:()=>d})},616:(M,D,s)=>{function d(u){return new Promise((f,y)=>{const h=new FileReader;h.readAsDataURL(u),h.onload=()=>{f(h.result.split(",")[1])},h.onerror=p=>{y(p)}})}function l(u){return new Promise((f,y)=>{const h=new FileReader;h.readAsText(u),h.onload=()=>{f(h.result)},h.onerror=p=>{y(p)}})}s.d(D,{M:()=>l,S:()=>d})},2064:(M,D,s)=>{s.r(D),s.d(D,{VisualQueryModule:()=>xe});var d=s(5056),l=s(1904),u=s(4672),f=s(600),y=s(244),h=s(2328),p=s(2536),S=s(7872),v=s(3424),_=s(4648),I=s(8268),m=s(692),P=s(7368),g=s(6028),O=s(988),E=s(604),T=s(8112),R=s(9224),t=s(4896),nt=s(1332),$=s(3392);let k=(()=>{class o{constructor(e,n,i){this.http=e,this.context=n,this.dnnContext=i}fetchPipeline(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(T.kN),{params:{appId:this.context.appId.toString(),id:e.toString()}}).pipe((0,E.k)(i=>(i.DataSources.length||this.buildDefaultModel(i,n),this.fixPipelineDataSources(i.DataSources),i)))}buildDefaultModel(e,n){const i=R._K.pipelineDesigner.defaultPipeline.dataSources;for(const a of i){const c=n.find(x=>x.PartAssemblyAndType===a.PartAssemblyAndType);e.DataSources.push({Description:"",EntityGuid:a.EntityGuid,EntityId:void 0,Name:c.Name,PartAssemblyAndType:a.PartAssemblyAndType,VisualDesignerData:a.VisualDesignerData})}e.Pipeline.StreamWiring=R._K.pipelineDesigner.defaultPipeline.streamWiring}fixPipelineDataSources(e){if(!e.some(i=>i.EntityGuid===R._K.pipelineDesigner.outDataSource.EntityGuid)){const i=R._K.pipelineDesigner.outDataSource;e.push({Description:i.Description,EntityGuid:i.EntityGuid,EntityId:void 0,Name:i.Name,PartAssemblyAndType:i.PartAssemblyAndType,VisualDesignerData:i.VisualDesignerData})}for(const i of e)i.VisualDesignerData??={Top:50,Left:50}}fetchDataSources(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(T.K0),{params:{appid:this.context.appId,zoneId:this.context.zoneId}}).pipe((0,E.k)(e=>{const n=R._K.pipelineDesigner.outDataSource;return e.push({ContentType:void 0,Difficulty:R._K.pipelineDesigner.dataSourceDifficulties.default,DynamicIn:!0,DynamicOut:!1,EnableConfig:void 0,HelpLink:void 0,Icon:void 0,In:n.In,Name:n.Name,Out:void 0,PartAssemblyAndType:n.PartAssemblyAndType,PrimaryType:n.PrimaryType,TypeNameForUi:void 0,UiHint:void 0}),e}))}typeNameFilter(e,n){const i=e.split(", ");switch(n){case"classFullName":return i[0];case"className":const c=i[0].split(".");return c[c.length-1];default:return e}}savePipeline(e){const n=e.Pipeline,i=e.DataSources;return this.http.post(this.dnnContext.$2sxc.http.apiUrl(T.fn),{pipeline:n,dataSources:i},{params:{appId:this.context.appId.toString(),Id:n.EntityId.toString()}}).pipe((0,E.k)(a=>(this.fixPipelineDataSources(a.DataSources),a)))}runPipeline(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(T.ot),{params:{appId:this.context.appId.toString(),id:e.toString(),top:n.toString()}})}debugStream(e,n,i,a){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(T.cV),{params:{appId:this.context.appId.toString(),id:e.toString(),from:n,out:i,top:a.toString()}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.CoB(nt.KK),t.CoB(g.e),t.CoB($.es))};static#e=this.\u0275prov=t.wxM({token:o,factory:o.\u0275fac})}return o})();var A=s(5204),H=s(4020),it=s(404),Q=s(4844),z=s(1484),N=s(5876),W=s(8928),J=s(6884),ot=s(4464),Y=s(4192),at=s(1616),st=s(3244),X=s(6560),rt=s(2816),V=s(5396),F=s(8200);function lt(o,r){if(1&o&&t.OEk(0),2&o){const e=t.GaO();t.CAO(' for Stream: "',e.debugStream.name,'" on Source: "',e.debugStream.sourceName,'" ')}}function ct(o,r){1&o&&(t.I0R(0,"div",10)(1,"span"),t.OEk(2,"Results"),t.C$Y()())}function dt(o,r){1&o&&t.OEk(0," Showing All results ")}function ut(o,r){if(1&o&&t.OEk(0),2&o){const e=t.GaO();t.oRS(" Showing top ",e.top," results ")}}function pt(o,r){1&o&&t.OEk(0," All ")}function mt(o,r){if(1&o&&t.OEk(0),2&o){const e=t.GaO().$implicit;t.oRS(" ",e," ")}}function ht(o,r){if(1&o){const e=t.KQA();t.I0R(0,"button",11),t.qCj("click",function(){const a=t.usT(e).$implicit,c=t.GaO();return t.CGJ(c.show(a))}),t.OEk(1," Show "),t.yuY(2,pt,1,0)(3,mt,1,1),t.C$Y()}if(2&o){const e=r.$implicit;t.yG2(2),t.C0Y(2,0===e?2:-1),t.yG2(1),t.C0Y(3,0!==e?3:-1)}}function _t(o,r){1&o&&(t.I0R(0,"div",13)(1,"span"),t.OEk(2,"Parameters"),t.C$Y()())}function gt(o,r){if(1&o&&(t.I0R(0,"li"),t.OEk(1),t.C$Y()),2&o){const e=r.$implicit;t.yG2(1),t.cNF(e)}}function Ct(o,r){if(1&o&&(t.I0R(0,"mat-tab"),t.yuY(1,_t,3,0,"div",12),t.wR5(2,"br"),t.I0R(3,"ul"),t.c53(4,gt,2,1,"li",null,t.oxv),t.C$Y()()),2&o){const e=t.GaO();t.yG2(4),t.oho(e.parameters)}}function ft(o,r){1&o&&(t.I0R(0,"div",14)(1,"span"),t.OEk(2,"Sources"),t.C$Y()())}function yt(o,r){if(1&o&&(t.I0R(0,"div"),t.OEk(1),t.C$Y()),2&o){const e=t.GaO().$implicit;t.yG2(1),t.cNF(null==e.value.Definition?null:e.value.Definition.Name)}}function vt(o,r){if(1&o&&(t.I0R(0,"li")(1,"b"),t.OEk(2),t.C$Y(),t.OEk(3,"="),t.I0R(4,"em"),t.OEk(5),t.C$Y()()),2&o){const e=r.$implicit;t.yG2(2),t.cNF(e.key),t.yG2(3),t.cNF(e.value)}}function Et(o,r){if(1&o&&(t.I0R(0,"tr")(1,"td"),t.yuY(2,yt,2,1,"div"),t.I0R(3,"pre"),t.OEk(4),t.C$Y()(),t.I0R(5,"td"),t.OEk(6),t.C$Y(),t.I0R(7,"td")(8,"ol"),t.c53(9,vt,6,2,"li",null,t.oxv),t.wVc(11,"keyvalue"),t.C$Y()(),t.I0R(12,"td"),t.OEk(13),t.C$Y()()),2&o){const e=r.$implicit;t.yG2(2),t.C0Y(2,null!=e.value.Definition&&e.value.Definition.Name?2:-1),t.yG2(2),t.cNF(e.value.Guid),t.yG2(2),t.cNF(e.value.Type),t.yG2(3),t.oho(t.kDX(11,4,e.value.Configuration)),t.yG2(4),t.cNF(e.value.Error)}}function Dt(o,r){1&o&&(t.I0R(0,"div",15)(1,"span"),t.OEk(2,"Streams"),t.C$Y()())}function St(o,r){if(1&o&&(t.I0R(0,"tr")(1,"td")(2,"pre"),t.OEk(3),t.C$Y()(),t.I0R(4,"td")(5,"pre"),t.OEk(6),t.C$Y()(),t.I0R(7,"td"),t.OEk(8),t.C$Y(),t.I0R(9,"td"),t.OEk(10),t.C$Y()()),2&o){const e=r.$implicit;t.yG2(3),t.cNF(e.Source+":"+e.SourceOut),t.yG2(3),t.cNF(e.Target+":"+e.TargetIn),t.yG2(2),t.cNF(e.Count),t.yG2(2),t.cNF(e.Error)}}let It=(()=>{class o{constructor(e,n,i){this.dialogData=e,this.dialogRef=n,this.visualQueryService=i}ngOnInit(){const e=this.visualQueryService.pipelineModel$.value.Pipeline,n=(e.Params?.split("\n")??[]).filter(a=>!!a),i=(e.TestParameters?.split("\n")??[]).filter(a=>!!a);this.parameters=[].concat(n,i),this.timeUsed=this.dialogData.result.QueryTimer.Milliseconds,this.ticksUsed=this.dialogData.result.QueryTimer.Ticks,this.top=this.dialogData.top,this.optionsForTop=[25,100,1e3,0],this.result=this.dialogData.result.Query,this.debugStream=this.dialogData.debugStream,this.sources=this.dialogData.result.Sources,this.streams=this.dialogData.result.Streams}closeDialog(){this.dialogRef.close()}show(e){e!==this.top&&(this.debugStream?this.visualQueryService.debugStream(this.debugStream.original,e):this.visualQueryService.runPipeline(e),this.closeDialog())}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(f.sR),t.GI1(f.yI),t.GI1(B))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-query-result"]],decls:54,vars:11,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],["dynamicHeight","","color","accent",1,"eav-tab-group"],["class","mat-tab-label-box","tippy","Results",4,"matTabLabel"],[1,"eav-tab-description"],["class","mat-tab-label-box","tippy","Sources",4,"matTabLabel"],["class","mat-tab-label-box","tippy","Streams",4,"matTabLabel"],["tippy","Results",1,"mat-tab-label-box"],["mat-button","",3,"click"],["class","mat-tab-label-box","tippy","Parameters",4,"matTabLabel"],["tippy","Parameters",1,"mat-tab-label-box"],["tippy","Sources",1,"mat-tab-label-box"],["tippy","Streams",1,"mat-tab-label-box"],["mat-button",""]],template:function(n,i){1&n&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2),t.OEk(3," Query Results "),t.yuY(4,lt,1,2),t.C$Y(),t.I0R(5,"button",3),t.qCj("click",function(){return i.closeDialog()}),t.I0R(6,"mat-icon"),t.OEk(7,"close"),t.C$Y()()(),t.I0R(8,"div",4)(9,"p"),t.OEk(10),t.C$Y(),t.I0R(11,"mat-tab-group",5)(12,"mat-tab"),t.yuY(13,ct,3,0,"div",6),t.I0R(14,"p",7),t.yuY(15,dt,1,0)(16,ut,1,1),t.c53(17,ht,4,2,"button",16,t.oxv),t.C$Y(),t.I0R(19,"pre"),t.OEk(20),t.wVc(21,"json"),t.C$Y()(),t.yuY(22,Ct,6,0,"mat-tab"),t.I0R(23,"mat-tab"),t.yuY(24,ft,3,0,"div",8),t.wR5(25,"br"),t.I0R(26,"table")(27,"tr")(28,"th"),t.OEk(29,"Name and Guid"),t.C$Y(),t.I0R(30,"th"),t.OEk(31,"Type"),t.C$Y(),t.I0R(32,"th"),t.OEk(33,"Configuration"),t.C$Y(),t.I0R(34,"th"),t.OEk(35,"Error"),t.C$Y()(),t.c53(36,Et,14,6,"tr",null,t.oxv),t.wVc(38,"keyvalue"),t.C$Y()(),t.I0R(39,"mat-tab"),t.yuY(40,Dt,3,0,"div",9),t.wR5(41,"br"),t.I0R(42,"table")(43,"tr")(44,"th"),t.OEk(45,"Source"),t.C$Y(),t.I0R(46,"th"),t.OEk(47,"Target"),t.C$Y(),t.I0R(48,"th"),t.OEk(49,"Items"),t.C$Y(),t.I0R(50,"th"),t.OEk(51,"Error"),t.C$Y()(),t.c53(52,St,11,4,"tr",null,t.oxv),t.C$Y()()()()()),2&n&&(t.yG2(4),t.C0Y(4,i.debugStream?4:-1),t.yG2(6),t.CAO(" The Full result was logged to the Browser Console. Further down you'll find more debug-infos. Executed in ",i.timeUsed,"ms (",i.ticksUsed," ticks) "),t.yG2(5),t.C0Y(15,0===i.top?15:-1),t.yG2(1),t.C0Y(16,0!==i.top?16:-1),t.yG2(1),t.oho(i.optionsForTop),t.yG2(3),t.cNF(t.kDX(21,7,i.result)),t.yG2(2),t.C0Y(22,null!=i.parameters&&i.parameters.length?22:-1),t.yG2(14),t.oho(t.kDX(38,9,i.sources)),t.yG2(16),t.oho(i.streams))},dependencies:[F.Y,h.qL,u.Gw,u.um,I.i0,I.aJ,I._q,d.ED,d.uq],styles:[".eav-tab-group[_ngcontent-%COMP%]{padding:0}.eav-tab-description[_ngcontent-%COMP%]{display:flex;align-items:baseline}pre[_ngcontent-%COMP%]{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px;overflow-x:auto}th[_ngcontent-%COMP%]{text-align:left}td[_ngcontent-%COMP%]{vertical-align:baseline}"]})}return o})(),Ot=(()=>{class o{constructor(e,n){this.dialogData=e,this.dialogRef=n}ngOnInit(){this.errorData=this.dialogData.errorData}closeDialog(){this.dialogRef.close()}openInsights(){window.open(window.$2sxc.http.apiUrl("sys/insights/logs?key=web-api-query"),"_blank")}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(f.sR),t.GI1(f.yI))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-stream-error-result"]],decls:17,vars:3,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],["align","end"],["mat-button","","tippy","Open 2sxc Insights",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"]],template:function(n,i){1&n&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2),t.OEk(3,"Stream Error Results"),t.C$Y(),t.I0R(4,"button",3),t.qCj("click",function(){return i.closeDialog()}),t.I0R(5,"mat-icon"),t.OEk(6,"close"),t.C$Y()()(),t.I0R(7,"div",4)(8,"pre"),t.OEk(9),t.wVc(10,"json"),t.C$Y()(),t.I0R(11,"mat-dialog-actions",5)(12,"button",6),t.qCj("click",function(){return i.openInsights()}),t.I0R(13,"mat-icon",7),t.OEk(14,"speed"),t.C$Y(),t.I0R(15,"span"),t.OEk(16,"Insights"),t.C$Y()()()()),2&n&&(t.yG2(9),t.cNF(t.kDX(10,1,i.errorData)))},dependencies:[F.Y,h.qL,u.Gw,u.um,f.Yp,d.ED],styles:[".description[_ngcontent-%COMP%]{font-size:14px}pre[_ngcontent-%COMP%]{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px;overflow-x:auto}.mat-icon[_ngcontent-%COMP%]{margin-right:4px}"]})}return o})();var Pt=s(168);let B=(()=>{class o extends rt.K{constructor(e,n,i,a,c,C,x,b,w,U,K){super(e,n),this.router=e,this.route=n,this.queryDefinitionService=i,this.titleService=a,this.snackBar=c,this.dialog=C,this.viewContainerRef=x,this.zone=b,this.metadataService=w,this.contentTypesService=U,this.changeDetectorRef=K,this.pipelineModel$=new Q.g(null),this.dataSources$=new Q.g(null),this.putEntityCountOnConnections$=new at.E,this.dataSourceConfigs$=new Q.g({}),this.pipelineId=parseInt(this.route.snapshot.paramMap.get("pipelineId"),10),this.refreshPipeline=!1,this.refreshDataSourceConfigs=!1}ngOnDestroy(){this.pipelineModel$.complete(),this.dataSources$.complete(),this.putEntityCountOnConnections$.complete(),super.ngOnDestroy()}init(){this.fetchDataSources(()=>this.fetchPipeline(!0,!0,!1)),this.attachKeyboardSave(),this.subscription.add(this.refreshOnChildClosedShallow().subscribe(()=>{(this.refreshPipeline||this.refreshDataSourceConfigs)&&this.fetchPipeline(this.refreshPipeline,this.refreshDataSourceConfigs,this.refreshPipeline),this.refreshPipeline=!1,this.refreshDataSourceConfigs=!1}))}editPipelineEntity(){this.savePipeline(()=>{const n=(0,V.K)({items:[{EntityId:this.pipelineModel$.value.Pipeline.EntityId}]});this.router.navigate([`edit/${n}`],{relativeTo:this.route}),this.refreshPipeline=!0})}saveAndRun(e,n){e&&n?this.savePipeline(()=>{this.runPipeline()}):e?this.savePipeline():n&&this.runPipeline()}showDataSourceDetails(e){const n=(0,Y.c)(this.pipelineModel$.value),i=W.Co.tryParse(n.Pipeline.VisualDesignerData)??{};i.ShowDataSourceDetails=e,n.Pipeline.VisualDesignerData=JSON.stringify(i),this.pipelineModel$.next(n)}addDataSource(e){const n=(0,Y.c)(this.pipelineModel$.value);n.DataSources.push({Description:"",EntityGuid:"unsaved"+(n.DataSources.length+1),EntityId:void 0,Name:e.Name,PartAssemblyAndType:e.PartAssemblyAndType,VisualDesignerData:{Top:100,Left:100}}),this.pipelineModel$.next(n),this.savePipeline()}removeDataSource(e,n,i){const a=(0,Y.c)(this.pipelineModel$.value);a.DataSources=a.DataSources.filter(c=>c.EntityGuid!==e),a.Pipeline.StreamWiring=n,a.Pipeline.StreamsOut=i,this.pipelineModel$.next(a)}renameDataSource(e,n){const i=(0,Y.c)(this.pipelineModel$.value);i.DataSources.find(c=>c.EntityGuid===e).Name=n,this.pipelineModel$.next(i)}changeDataSourceDescription(e,n){const i=(0,Y.c)(this.pipelineModel$.value);i.DataSources.find(c=>c.EntityGuid===e).Description=n,this.pipelineModel$.next(i)}changeConnections(e,n){const i=(0,Y.c)(this.pipelineModel$.value);i.Pipeline.StreamWiring=e,i.Pipeline.StreamsOut=n,this.pipelineModel$.next(i)}changeDataSourcePosition(e,n){const i=(0,Y.c)(this.pipelineModel$.value),a=i.DataSources.find(c=>c.EntityGuid===e);a&&(a.VisualDesignerData={...a.VisualDesignerData,...n},this.pipelineModel$.next(i))}calculateDataSourceConfigs(e){const n={};e.forEach(i=>{null!=i.EntityId&&(n[i.EntityId]=[],i.Metadata?.forEach(a=>{Object.entries(a).forEach(([c,C])=>{null==C||""===C||["Created","Guid","Id","Modified","Title","_Type"].includes(c)||(Array.isArray(C)&&null!=C[0]?.Title&&null!=C[0]?.Id&&(C=`${C[0].Title} (${C[0].Id})`),n[i.EntityId].push({name:c,value:C}))})}))}),this.dataSourceConfigs$.next(n)}editDataSource(e){const i=this.dataSources$.value.find(x=>x.PartAssemblyAndType===e.PartAssemblyAndType).ContentType,C=e.EntityGuid;this.metadataService.getMetadata(R._K.metadata.entity.targetType,R._K.metadata.entity.keyType,C,i).subscribe(x=>{if(x.Items.length){const w=(0,V.K)({items:[{EntityId:x.Items[0].Id}]});return this.router.navigate([`edit/${w}`],{relativeTo:this.route}),void(this.refreshDataSourceConfigs=!0)}this.contentTypesService.retrieveContentType(i).subscribe({next:b=>{if(null==b)return void this.snackBar.open("DataSource doesn't have any configuration",void 0,{duration:3e3});const U=(0,V.K)({items:[{ContentTypeName:i,For:{Target:R._K.metadata.entity.target,TargetType:R._K.metadata.entity.targetType,Guid:C}}]});this.router.navigate([`edit/${U}`],{relativeTo:this.route}),this.refreshDataSourceConfigs=!0},error:b=>{this.snackBar.open("Server reports error - this usually means that this DataSource doesn't have any configuration",void 0,{duration:3e3})}})})}savePipeline(e){this.snackBar.open("Saving..."),this.queryDefinitionService.savePipeline(this.pipelineModel$.value).subscribe({next:n=>{this.snackBar.open("Saved",null,{duration:2e3}),this.pipelineModel$.next(n),e?.()},error:n=>{this.snackBar.open("Save Pipeline failed",null,{duration:2e3})}})}runPipeline(e=25){this.snackBar.open("Running query..."),this.queryDefinitionService.runPipeline(this.pipelineModel$.value.Pipeline.EntityId,e).subscribe({next:n=>{this.snackBar.open("Query worked",null,{duration:2e3}),this.pipelineResult=n,this.showQueryResult(n,e),console.warn(n),this.pipelineModel$.next((0,Y.c)(this.pipelineModel$.value)),setTimeout(()=>{this.putEntityCountOnConnections$.next(n)})},error:n=>{this.snackBar.open("Query failed",null,{duration:2e3})}})}debugStream(e,n=25){e.Error?this.showStreamErrorResult(e):0!==e.Count&&(this.snackBar.open("Running stream..."),this.queryDefinitionService.debugStream(this.pipelineModel$.value.Pipeline.EntityId,e.Source,e.SourceOut,n).subscribe({next:a=>{this.snackBar.open("Stream worked",null,{duration:2e3});const c=this.pipelineModel$.value.DataSources.find(x=>x.EntityGuid===e.Source);this.showQueryResult(a,n,{name:e.SourceOut,source:e.Source,sourceName:c.Name,original:e}),console.warn(a)},error:a=>{this.snackBar.open("Stream failed",null,{duration:2e3})}}))}fetchPipeline(e,n,i){i&&this.snackBar.open("Reloading query, please wait..."),this.queryDefinitionService.fetchPipeline(this.pipelineId,this.dataSources$.value).subscribe(a=>{i&&this.snackBar.open("Query reloaded",null,{duration:2e3}),this.titleService.setTitle(`${a.Pipeline.Name} - Visual Query`),e&&this.pipelineModel$.next(a),n&&this.calculateDataSourceConfigs(a.DataSources)})}showQueryResult(e,n,i){this.dialog.open(It,{autoFocus:!1,backdropClass:"dialog-backdrop",closeOnNavigation:!1,data:{result:e,debugStream:i,top:n},panelClass:["dialog-panel","dialog-panel-medium","no-scrollbar"],position:{top:"0"},viewContainerRef:this.viewContainerRef}),this.changeDetectorRef.markForCheck()}showStreamErrorResult(e){this.dialog.open(Ot,{autoFocus:!1,backdropClass:"dialog-backdrop",closeOnNavigation:!1,data:{errorData:e.ErrorData},panelClass:["dialog-panel","dialog-panel-medium","no-scrollbar"],position:{top:"0"},viewContainerRef:this.viewContainerRef}),this.changeDetectorRef.markForCheck()}fetchDataSources(e){this.queryDefinitionService.fetchDataSources().subscribe(n=>{this.dataSources$.next(n),e()})}attachKeyboardSave(){this.zone.runOutsideAngular(()=>{this.subscription.add((0,st.w)(window,"keydown").pipe((0,X.I)(()=>!this.route.snapshot.firstChild),(0,X.I)(e=>(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&83===e.keyCode)).subscribe(e=>{e.preventDefault(),this.zone.run(()=>{this.savePipeline()})}))})}static#t=this.\u0275fac=function(n){return new(n||o)(t.CoB(A.E5),t.CoB(A.gV),t.CoB(k),t.CoB(Pt.OY),t.CoB(_.yS),t.CoB(f.qW),t.CoB(t.y8U),t.CoB(t.WW2),t.CoB(P.y),t.CoB(m.X),t.CoB(t.kD9))};static#e=this.\u0275prov=t.wxM({token:o,factory:o.\u0275fac})}return o})();const j={App:{Name:"App",Label:"App DataSources",Icon:"star",UiHint:"DataSources from the current App"},Cache:{Name:"Cache",Icon:"history",UiHint:"Caching of data"},Filter:{Name:"Filter",Icon:"filter_list",UiHint:"Filter data - usually returning less items than came in"},Logic:{Name:"Logic",Icon:"share",UiHint:"Logic operations - usually choosing between different streams"},Lookup:{Name:"Lookup",Icon:"search",UiHint:"Lookup operation - usually looking for other data based on a criteria"},Modify:{Name:"Modify",Icon:"edit_attributes",UiHint:"Modify data - usually changing, adding or removing values"},Security:{Name:"Security",Icon:"account_circle",UiHint:"Security - usually limit what the user sees based on his identity"},Sort:{Name:"Sort",Icon:"sort",UiHint:"Sort the items"},Source:{Name:"Source",Icon:"cloud_upload",UiHint:"Source of new data - usually SQL, CSV or similar"},Target:{Name:"Target",Icon:"adjust",UiHint:"Target - usually just a destination of data"},Unknown:{Name:"Unknown",Icon:"fiber_manual_record",UiHint:"Unknown type"},Debug:{Name:"Debug",Icon:"bug_report",UiHint:"Debugging Tools"},System:{Name:"System",Icon:"military_tech",UiHint:"System Data"}};function xt(o,r){const e={};for(const n of o){let i;const a=r.find(c=>c.PartAssemblyAndType===n.PartAssemblyAndType);a&&(i={...a.PrimaryType?j[a.PrimaryType]:j.Unknown},null!=a.Icon&&(i.Icon=a.Icon),null!=a.DynamicIn&&(i.DynamicIn=a.DynamicIn),null!=a.DynamicOut&&(i.DynamicOut=a.DynamicOut),null!=a.HelpLink&&(i.HelpLink=a.HelpLink),null!=a.EnableConfig&&(i.EnableConfig=a.EnableConfig),null!=a.UiHint&&(i.UiHint=a.UiHint)),i||(i={...j.Unknown}),e[n.EntityGuid]=i}return e}var Rt=s(1792),bt=s(9084),Mt=s(504),Tt=s(6176);function Gt(o,r){1&o&&(t.I0R(0,"app-field-hint"),t.OEk(1," You will get suggestions for out-streams after you run query "),t.C$Y())}function $t(o,r){1&o&&(t.I0R(0,"app-field-hint",12),t.OEk(1," This field is required "),t.C$Y()),2&o&&t.E7m("isError",!0)}function kt(o,r){if(1&o&&(t.I0R(0,"mat-form-field",10)(1,"mat-label"),t.OEk(2,"Label"),t.C$Y(),t.wR5(3,"input",11),t.C$Y(),t.yuY(4,Gt,2,0,"app-field-hint")(5,$t,2,1,"app-field-hint",12)),2&o){const e=t.GaO();t.yG2(4),t.C0Y(4,e.isSource&&!e.pipelineResultExists?4:-1),t.yG2(1),t.C0Y(5,e.controls.label.touched&&null!=e.controls.label.errors&&e.controls.label.errors.required?5:-1)}}function At(o,r){if(1&o&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&o){const e=r.$implicit;t.E7m("value",e.value),t.yG2(1),t.oRS(" ",e.name," ")}}function wt(o,r){if(1&o&&(t.I0R(0,"mat-form-field",10)(1,"mat-label"),t.OEk(2,"Scope"),t.C$Y(),t.I0R(3,"mat-select",18),t.c53(4,At,2,2,"mat-option",20,t.oxv),t.C$Y()(),t.I0R(6,"app-field-hint"),t.OEk(7," The scope should almost never be changed - "),t.I0R(8,"a",19),t.OEk(9,"see help"),t.C$Y()()),2&o){const e=t.GaO(2);t.yG2(3),t.E7m("placeholder",e.scopeOptions.length?"":"No items found"),t.yG2(1),t.oho(e.scopeOptions)}}function Yt(o,r){if(1&o&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&o){const e=r.$implicit;t.E7m("value",e),t.yG2(1),t.oRS(" ",e," ")}}function Lt(o,r){if(1&o&&(t.I0R(0,"mat-select",13),t.c53(1,Yt,2,2,"mat-option",20,t.oxv),t.C$Y()),2&o){const e=t.GaO(2);t.E7m("placeholder",e.labelOptions.length?"":"No items found"),t.yG2(1),t.oho(e.labelOptions)}}function Ut(o,r){1&o&&t.wR5(0,"input",11)}function Bt(o,r){1&o&&(t.I0R(0,"app-field-hint",12),t.OEk(1," This field is required "),t.C$Y()),2&o&&t.E7m("isError",!0)}const Z=o=>({active:o});function Ft(o,r){if(1&o){const e=t.KQA();t.yuY(0,wt,10,1),t.I0R(1,"mat-form-field",10)(2,"mat-label"),t.OEk(3,"Label"),t.C$Y(),t.yuY(4,Lt,3,1,"mat-select",13)(5,Ut,1,0,"input",11),t.I0R(6,"div",14)(7,"button",15),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.toggleGuidedLabel(!0))}),t.I0R(8,"mat-icon",16),t.OEk(9,"search"),t.C$Y()(),t.I0R(10,"button",17),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.toggleGuidedLabel(!1))}),t.I0R(11,"mat-icon",16),t.OEk(12,"text_fields"),t.C$Y()()()(),t.yuY(13,Bt,2,1,"app-field-hint",12)}if(2&o){const e=t.GaO();t.C0Y(0,e.advancedMode&&e.guidedLabel?0:-1),t.yG2(4),t.C0Y(4,e.guidedLabel?4:-1),t.yG2(1),t.C0Y(5,e.guidedLabel?-1:5),t.yG2(2),t.E7m("ngClass",t.S45(6,Z,e.guidedLabel)),t.yG2(3),t.E7m("ngClass",t.S45(8,Z,!e.guidedLabel)),t.yG2(3),t.C0Y(13,e.controls.label.touched&&null!=e.controls.label.errors&&e.controls.label.errors.required?13:-1)}}function Kt(o,r){if(1&o){const e=t.KQA();t.I0R(0,"mat-slide-toggle",21),t.qCj("change",function(i){t.usT(e);const a=t.GaO();return t.CGJ(a.toggleAdvancedMode(i))}),t.OEk(1),t.C$Y()}if(2&o){const e=t.GaO();t.E7m("checked",e.advancedMode),t.yG2(1),t.oRS(" ",e.advancedMode?"Advanced":"Simple"," ")}}let Qt=(()=>{class o extends J.C{constructor(e,n,i,a,c){super(),this.dialogData=e,this.dialogRef=n,this.visualQueryService=i,this.contentTypesService=a,this.changeDetectorRef=c,this.hostClass="dialog-component",this.isSource=this.dialogData.isSource,this.pipelineResultExists=null!=this.visualQueryService.pipelineResult,this.scopeOptions=[],this.labelOptions=[],this.guidedLabel=!0,this.advancedMode=!1}ngOnInit(){this.buildForm()}ngOnDestroy(){super.ngOnDestroy()}closeDialog(e){this.dialogRef.close(e)}toggleGuidedLabel(e){this.guidedLabel=e}toggleAdvancedMode(e){this.advancedMode=e.checked}rename(){const e=this.form.getRawValue();this.closeDialog(e.label)}buildForm(){this.form=new l.k1({label:new l.yM(this.dialogData.label,l.AQ.required),scope:new l.yM(R._K.scopes.default.value)}),this.controls=this.form.controls,this.isSource&&this.pipelineResultExists&&(this.subscription.add(this.controls.scope.valueChanges.pipe((0,Rt.W)(this.controls.scope.value),(0,z.a)()).subscribe(e=>{this.labelOptions=Object.values(this.visualQueryService.pipelineResult.Sources).find(n=>n.Guid===this.dialogData.pipelineDataSourceGuid).Out.filter(n=>n.Scope===e).map(n=>n.Name),!this.labelOptions.includes(this.controls.label.value)&&null!=this.controls.label.value&&this.controls.label.patchValue(null)})),this.contentTypesService.getScopes().subscribe(e=>{const n=Object.values(this.visualQueryService.pipelineResult.Sources).find(a=>a.Guid===this.dialogData.pipelineDataSourceGuid).Out,i=e.filter(a=>n.some(c=>c.Scope===a.value));this.scopeOptions=i,this.changeDetectorRef.markForCheck()}))}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(f.sR),t.GI1(f.yI),t.GI1(B),t.GI1(T.Xi),t.GI1(t.kD9))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-rename-stream"]],hostVars:1,hostBindings:function(n,i){2&n&&t.SoX("className",i.hostClass)},features:[t.eg9],decls:19,vars:5,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],[3,"formGroup"],[1,"eav-dialog-actions"],["color","accent",3,"checked"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["color","accent",1,"eav-form-field"],["matInput","","type","text","formControlName","label","required",""],[3,"isError"],["formControlName","label","required","",3,"placeholder"],["matTextSuffix","",1,"eav-selection-suffix"],["mat-icon-button","","type","button","tippy","Pick existing value",1,"eav-selection-suffix-button",3,"ngClass","click"],[1,"eav-icon"],["mat-icon-button","","type","button","tippy","Manual entry",1,"eav-selection-suffix-button",3,"ngClass","click"],["formControlName","scope",3,"placeholder"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],[3,"value"],["color","accent",3,"checked","change"]],template:function(n,i){1&n&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2),t.OEk(3,"Rename stream"),t.C$Y(),t.I0R(4,"button",3),t.qCj("click",function(){return i.closeDialog()}),t.I0R(5,"mat-icon"),t.OEk(6,"close"),t.C$Y()()(),t.I0R(7,"div",4)(8,"form",5),t.yuY(9,kt,6,2)(10,Ft,14,10),t.C$Y()(),t.I0R(11,"mat-dialog-actions",6)(12,"div"),t.yuY(13,Kt,2,2,"mat-slide-toggle",7),t.C$Y(),t.I0R(14,"div")(15,"button",8),t.qCj("click",function(){return i.closeDialog()}),t.OEk(16,"Cancel"),t.C$Y(),t.I0R(17,"button",9),t.qCj("click",function(){return i.rename()}),t.OEk(18," Rename "),t.C$Y()()()()),2&n&&(t.yG2(8),t.E7m("formGroup",i.form),t.yG2(1),t.C0Y(9,i.isSource&&i.pipelineResultExists?-1:9),t.yG2(1),t.C0Y(10,i.isSource&&i.pipelineResultExists?10:-1),t.yG2(3),t.C0Y(13,i.isSource&&i.pipelineResultExists?13:-1),t.yG2(4),t.E7m("disabled",!i.form.valid))},dependencies:[d.QF,bt.o,Mt.c,F.Y,h.qL,u.Gw,u.um,v.cP,f.Yp,y.Up,y.w5,y.Gm,l.sz,l.ot,l.ue,l.u,l.eJ,l.uW,l.Wo,S.kX,Tt.I5,p.yi]})}return o})();const G="dataSource_";class Wt{constructor(r,e,n,i,a,c,C,x,b){this.jsPlumbRoot=r,this.pipelineModel=e,this.dataSources=n,this.onConnectionsChanged=i,this.onDragend=a,this.onDebugStream=c,this.dialog=C,this.viewContainerRef=x,this.changeDetectorRef=b,this.lineCount=0,this.linePaintDefault={stroke:"#61B7CF",strokeWidth:4,outlineStroke:"white",outlineWidth:2},this.lineColors=["#009688","#00bcd4","#3f51b5","#9c27b0","#e91e63","#db4437","#ff9800","#60a917","#60a917","#008a00","#00aba9","#1ba1e2","#0050ef","#6a00ff","#aa00ff","#f472d0","#d80073","#a20025","#e51400","#fa6800","#f0a30a","#e3c800","#825a2c","#6d8764","#647687","#76608a","#a0522d"],this.maxCols=this.lineColors.length-1,this.uuidColorMap={},this.bulkDelete=!1,this.instance=window.jsPlumb.getInstance(this.getInstanceDefaults(this.jsPlumbRoot)),this.instance.batch(()=>{this.initDomDataSources(),this.initWirings(),this.bindEvents()}),this.instance.repaintEverything()}destroy(){this.dialogRef?.close(),this.instance.reset(),this.instance.unbindContainer()}removeEndpointsOnDataSource(r){const e=G+r;this.bulkDelete=!0,this.instance.batch(()=>{this.instance.selectEndpoints({element:e}).delete()}),this.bulkDelete=!1}getAllConnections(){return this.instance.getAllConnections().map(e=>({From:e.sourceId.replace(G,""),Out:e.endpoints[0].getOverlay("endpointLabel").label,To:e.targetId.replace(G,""),In:e.endpoints[1].getOverlay("endpointLabel").label}))}getStreamsOut(){const r=[];return this.instance.selectEndpoints({target:G+"Out"}).each(n=>{r.push(n.getOverlay("endpointLabel").label)}),r.join(",")}putEntityCountOnConnections(r){r.Streams?.forEach(e=>{const n=G+e.Source,a=["00000000-0000-0000-0000-000000000000",this.pipelineModel.Pipeline.EntityGuid].includes(e.Target)?G+"Out":G+e.Target,c=n+"_out_"+e.SourceOut,C=a+"_in_"+e.TargetIn;this.instance.getEndpoint(c)?.connections?.filter(b=>b.endpoints[1].getUuid()===C)?.forEach(b=>{const w=e.Error?"":e.Count.toString();b.setLabel({label:w,cssClass:"streamEntitiesCount "+(e.Error?"streamEntitiesError":""),events:{click:K=>{this.pipelineModel.Pipeline.AllowEdit&&this.onDebugStream(e)}}})})})}nextLinePaintStyle(r){return this.uuidColorMap[r]||(this.uuidColorMap[r]=Object.assign({},this.linePaintDefault,{stroke:this.lineColors[this.lineCount++%this.maxCols]}))}getInstanceDefaults(r){return{Container:r,Connector:["Bezier",{curviness:70}],PaintStyle:this.nextLinePaintStyle("dummy"),HoverPaintStyle:{stroke:"#216477",strokeWidth:4,outlineStroke:"white",outlineWidth:2}}}initDomDataSources(){for(const r of this.pipelineModel.DataSources){const e=this.jsPlumbRoot.querySelector("#"+G+r.EntityGuid);if(!e)continue;const n=this.dataSources.find(i=>i.PartAssemblyAndType===r.PartAssemblyAndType);if(n){if(this.pipelineModel.Pipeline.AllowEdit&&this.instance.draggable(e,{grid:[20,20],stop:i=>{const c=i.el.id.replace(G,""),C={Top:i.finalPos[1],Left:i.finalPos[0]};setTimeout(()=>{this.onDragend(c,C)})}}),n.Out?.forEach(i=>{this.addEndpoint(e,i,!1,r)}),n.In?.forEach(i=>{this.addEndpoint(e,i,!0,r)}),n.In){const i=this.buildTargetEndpoint(r.EntityGuid);i.maxConnections=-1,this.instance.makeTarget(e,i)}n.DynamicOut&&this.instance.makeSource(e,this.buildSourceEndpoint(r.EntityGuid),{filter:".add-endpoint"})}}}initWirings(){this.pipelineModel.Pipeline.StreamWiring?.forEach(r=>{const e=G+r.From,n=e+"_out_"+r.Out,i=G+r.To,a=i+"_in_"+r.In;if(!this.instance.getEndpoint(n)){const c=this.jsPlumbRoot.querySelector("#"+e);if(!c)return;const C=c.id.replace(G,""),x=this.pipelineModel.DataSources.find(b=>b.EntityGuid===C);this.addEndpoint(c,r.Out,!1,x)}if(!this.instance.getEndpoint(a)){const c=this.jsPlumbRoot.querySelector("#"+i);if(!c)return;const C=c.id.replace(G,""),x=this.pipelineModel.DataSources.find(b=>b.EntityGuid===C);this.addEndpoint(c,r.In,!0,x)}try{this.instance.connect({uuids:[n,a],paintStyle:this.nextLinePaintStyle(n)})}catch{console.error({message:"Connection failed",from:n,to:a})}})}addEndpoint(r,e,n,i){const a=this.dataSources.find(L=>L.PartAssemblyAndType===i.PartAssemblyAndType),c=n?!a.In?.some(L=>this.getEndpointInfo(L,!1)):!a.Out?.some(L=>this.getEndpointInfo(L,!1)),C=this.getEndpointInfo(e,c);let x;x=c?"dynamic":C.required?this.pipelineModel.Pipeline.StreamWiring?.some(et=>G+et.To===r.id&&et.In===C.name)?"":"required":"";const b=r.id+(n?"_in_":"_out_")+C.name,w=n?this.buildTargetEndpoint(i.EntityGuid,x):this.buildSourceEndpoint(i.EntityGuid,x);this.instance.addEndpoint(r,w,{uuid:b,enabled:this.pipelineModel.Pipeline.AllowEdit||i.EntityGuid===R._K.pipelineDesigner.outDataSource.EntityGuid}).getOverlay("endpointLabel").setLabel(C.name)}buildSourceEndpoint(r,e){return{paintStyle:{fill:"transparent",radius:10},cssClass:"sourceEndpoint "+e,maxConnections:-1,isSource:!0,anchor:["Continuous",{faces:["top"]}],overlays:this.getEndpointOverlays(!0),events:{click:a=>{this.onChangeLabel(a,!0,r)}}}}buildTargetEndpoint(r,e){return{paintStyle:{fill:"transparent",radius:10},cssClass:"targetEndpoint "+e,maxConnections:1,isTarget:!0,anchor:["Continuous",{faces:["bottom"]}],overlays:this.getEndpointOverlays(!1),dropOptions:{hoverClass:"hover",activeClass:"active"},events:{click:a=>{this.onChangeLabel(a,!1,r)}}}}getEndpointOverlays(r){return[["Label",{id:"endpointLabel",location:[.5,r?0:1],label:"Default",cssClass:r?"endpointSourceLabel":"endpointTargetLabel"}]]}onChangeLabel(r,e,n){if(!this.pipelineModel.Pipeline.AllowEdit)return;const i=r.getOverlay?r.getOverlay("endpointLabel"):r;this.dialogRef=this.dialog.open(Qt,{autoFocus:!1,data:{pipelineDataSourceGuid:n,isSource:e,label:i.label},viewContainerRef:this.viewContainerRef,width:"650px"}),this.dialogRef.afterClosed().subscribe(c=>{c&&(i.setLabel(c),setTimeout(()=>{this.onConnectionsChanged()}))}),this.changeDetectorRef.markForCheck()}bindEvents(){this.instance.bind("connectionDetached",r=>{if(this.bulkDelete)return;const e=r.target,n=this.pipelineModel.DataSources.find(C=>C.EntityGuid===e.id.replace(G,"")),i=this.dataSources.find(C=>C.PartAssemblyAndType===n.PartAssemblyAndType),a=r.targetEndpoint.getOverlay("endpointLabel").label;i.In.some(C=>this.getEndpointInfo(C,!1).name===a)||this.instance.deleteEndpoint(r.targetEndpoint),setTimeout(()=>{this.onConnectionsChanged()})}),this.instance.bind("connection",r=>{if(r.sourceId===r.targetId)return void setTimeout(()=>{this.instance.deleteConnection(r.connection,{fireEvent:!1}),setTimeout(()=>{this.onConnectionsChanged()})});const e=r.targetEndpoint.getOverlay("endpointLabel"),n=e.getLabel();this.instance.getEndpoints(r.target.id).some(c=>c.getOverlay("endpointLabel").getLabel()===n&&r.targetEndpoint.id!==c.id&&c.canvas.classList.contains("targetEndpoint"))&&e.setLabel(`PleaseRename${Math.floor(99999*Math.random())}`),setTimeout(()=>{this.onConnectionsChanged()})})}getEndpointInfo(r,e){let n,i;if(e)n=r,i=!1;else{const c=r.trim();i=c.endsWith("*"),n=i?c.substring(0,c.length-1):c}return{name:n,required:i}}}var Nt=s(5952);const jt=["domRoot"],Vt=["domDataSource"];function Ht(o,r){if(1&o){const e=t.KQA();t.I0R(0,"mat-icon",16),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,a=t.GaO(3);return t.CGJ(a.configureDataSource(i))}),t.OEk(1," settings "),t.C$Y()}}function zt(o,r){if(1&o){const e=t.KQA();t.I0R(0,"mat-icon",17),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,a=t.GaO(2),c=t.GaO();return t.CGJ(c.openHelp(a.typeInfos[i.EntityGuid].HelpLink))}),t.OEk(1," help_outline "),t.C$Y()}}function Jt(o,r){if(1&o){const e=t.KQA();t.I0R(0,"mat-icon",18),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,a=t.GaO(3);return t.CGJ(a.remove(i))}),t.OEk(1," delete "),t.C$Y()}}function Xt(o,r){if(1&o&&(t.I0R(0,"tr",21)(1,"td",22),t.OEk(2),t.C$Y(),t.I0R(3,"td",23),t.OEk(4),t.C$Y()()),2&o){const e=r.$implicit;t.yG2(1),t.E7m("title",e.name),t.yG2(1),t.cNF(e.name),t.yG2(1),t.E7m("title",e.value),t.yG2(1),t.cNF(e.value)}}function Zt(o,r){if(1&o&&(t.wR5(0,"hr",19),t.I0R(1,"table",20),t.c53(2,Xt,5,4,"tr",24,t.oxv),t.C$Y()),2&o){const e=t.GaO().$implicit,n=t.GaO(2);t.yG2(2),t.oho(n.dataSourceConfigs[e.EntityId])}}function qt(o,r){1&o&&t.wR5(0,"div",25)}function te(o,r){1&o&&t.wR5(0,"div",26)}const ee=(o,r,e)=>({top:o,left:r,"min-width":e}),ne=o=>({"show-details":o});function ie(o,r){if(1&o){const e=t.KQA();t.I0R(0,"div",2,3)(2,"div",4)(3,"mat-icon",5),t.OEk(4),t.C$Y(),t.yuY(5,Ht,2,0,"mat-icon",6)(6,zt,2,0,"mat-icon",7),t.C$Y(),t.I0R(7,"div",8),t.yuY(8,Jt,2,0,"mat-icon",9),t.C$Y(),t.I0R(9,"div",10),t.qCj("click",function(){const a=t.usT(e).$implicit,c=t.GaO(2),C=t.GaO();return t.CGJ(c.allowEdit&&C.editName(a))}),t.I0R(10,"span"),t.OEk(11),t.C$Y(),t.I0R(12,"mat-icon",11),t.OEk(13,"edit"),t.C$Y()(),t.wR5(14,"br"),t.I0R(15,"div",12),t.qCj("click",function(){const a=t.usT(e).$implicit,c=t.GaO(2),C=t.GaO();return t.CGJ(c.allowEdit&&C.editDescription(a))}),t.I0R(16,"span"),t.OEk(17),t.C$Y(),t.I0R(18,"mat-icon",11),t.OEk(19,"edit"),t.C$Y()(),t.wR5(20,"br"),t.yuY(21,Zt,4,0),t.I0R(22,"div",13),t.OEk(23),t.C$Y(),t.yuY(24,qt,1,0,"div",14)(25,te,1,0,"div",15),t.C$Y()}if(2&o){const e=r.$implicit,n=t.GaO(2),i=t.GaO();t.E7m("id",i.dataSrcIdPrefix+e.EntityGuid)("ngStyle",t.uAc(15,ee,e.VisualDesignerData.Top+"px",e.VisualDesignerData.Left+"px",e.VisualDesignerData.Width?e.VisualDesignerData.Width+"px":null))("ngClass",t.S45(19,ne,n.showDataSourceDetails&&(null==n.dataSourceConfigs[e.EntityId]?null:n.dataSourceConfigs[e.EntityId].length))),t.yG2(3),t.E7m("title",n.typeInfos[e.EntityGuid].UiHint),t.yG2(1),t.oRS(" ",n.typeInfos[e.EntityGuid].Icon," "),t.yG2(1),t.C0Y(5,n.allowEdit&&n.typeInfos[e.EntityGuid].EnableConfig?5:-1),t.yG2(1),t.C0Y(6,n.typeInfos[e.EntityGuid].HelpLink?6:-1),t.yG2(2),t.C0Y(8,n.allowEdit&&!i.isOutDataSource(e)?8:-1),t.yG2(3),t.cNF(e.Name||"(no name)"),t.yG2(6),t.cNF(e.Description),t.yG2(4),t.C0Y(21,n.showDataSourceDetails&&null!=n.dataSourceConfigs[e.EntityId]&&n.dataSourceConfigs[e.EntityId].length?21:-1),t.yG2(1),t.E7m("title",e.PartAssemblyAndType),t.yG2(1),t.oRS(" Type: ",i.getTypeName(e.PartAssemblyAndType)," "),t.yG2(1),t.C0Y(24,n.allowEdit&&n.typeInfos[e.EntityGuid].DynamicOut?24:-1),t.yG2(1),t.C0Y(25,n.allowEdit&&n.typeInfos[e.EntityGuid].DynamicIn?25:-1)}}function oe(o,r){if(1&o&&t.c53(0,ie,26,21,"div",27,t.oxv),2&o){const e=t.GaO();t.oho(e.pipelineDataSources)}}function ae(o,r){if(1&o&&(t.I0R(0,"div",0,1),t.yuY(2,oe,2,0),t.C$Y()),2&o){const e=t.GaO();t.yG2(2),t.C0Y(2,e.hardReset?-1:2)}}let q=(()=>{class o extends J.C{constructor(e,n,i,a,c){super(),this.visualQueryService=e,this.queryDefinitionService=n,this.changeDetectorRef=i,this.dialog=a,this.viewContainerRef=c,this.dataSrcIdPrefix=G,this.hardReset=!1,this.scriptLoaded$=new Q.g(!1)}ngOnInit(){(0,ot.i)([{test:"jsPlumb",src:"https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.14.5/js/jsplumb.min.js"}],()=>{this.scriptLoaded$.next(!0)}),this.subscription.add(this.visualQueryService.putEntityCountOnConnections$.subscribe(n=>{this.plumber.putEntityCountOnConnections(n)}));const e=this.visualQueryService.pipelineModel$.pipe((0,E.k)(n=>W.Co.tryParse(n?.Pipeline.VisualDesignerData)??{}),(0,z.a)(W.Co.objectsEqual));this.viewModel$=(0,N.E)([this.visualQueryService.pipelineModel$,this.visualQueryService.dataSources$,e,this.visualQueryService.dataSourceConfigs$]).pipe((0,E.k)(([n,i,a,c])=>null==n||null==i?void 0:(this.hardReset=!0,this.changeDetectorRef.detectChanges(),this.hardReset=!1,{pipelineDataSources:n.DataSources,typeInfos:xt(n.DataSources,i),allowEdit:n.Pipeline.AllowEdit,showDataSourceDetails:a.ShowDataSourceDetails??!1,dataSourceConfigs:c})))}ngAfterViewInit(){const e=this.domDataSourcesRef.changes.pipe((0,E.k)(()=>!0));this.subscription.add((0,N.E)([this.scriptLoaded$,e]).subscribe(([n,i])=>{!n||!i||(this.plumber?.destroy(),this.plumber=new Wt(this.domRootRef.nativeElement,this.visualQueryService.pipelineModel$.value,this.visualQueryService.dataSources$.value,this.onConnectionsChanged.bind(this),this.onDragend.bind(this),this.onDebugStream.bind(this),this.dialog,this.viewContainerRef,this.changeDetectorRef))}))}ngOnDestroy(){this.plumber?.destroy(),this.scriptLoaded$.complete(),super.ngOnDestroy()}onConnectionsChanged(){const e=this.plumber.getAllConnections(),n=this.plumber.getStreamsOut();this.visualQueryService.changeConnections(e,n)}onDragend(e,n){this.visualQueryService.changeDataSourcePosition(e,n)}onDebugStream(e){this.visualQueryService.debugStream(e)}configureDataSource(e){e.EntityGuid.includes("unsaved")?this.visualQueryService.saveAndRun(!0,!1):this.visualQueryService.editDataSource(e)}getTypeName(e){const n=this.visualQueryService.dataSources$.value.find(i=>i.PartAssemblyAndType===e);return this.queryDefinitionService.typeNameFilter(n?.TypeNameForUi||e,"className")}isOutDataSource(e){return e.PartAssemblyAndType===R._K.pipelineDesigner.outDataSource.PartAssemblyAndType}remove(e){if(!confirm(`Delete ${e.Name} data source?`))return;this.plumber.removeEndpointsOnDataSource(e.EntityGuid);const n=this.plumber.getAllConnections(),i=this.plumber.getStreamsOut();this.visualQueryService.removeDataSource(e.EntityGuid,n,i)}openHelp(e){window.open(e,"_blank")}editName(e){const n=prompt("Rename data source",e.Name)?.trim();null==n||""===n||this.visualQueryService.renameDataSource(e.EntityGuid,n)}editDescription(e){const n=prompt("Edit description",e.Description)?.trim();null!=n&&this.visualQueryService.changeDataSourceDescription(e.EntityGuid,n)}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(B),t.GI1(k),t.GI1(t.kD9),t.GI1(f.qW),t.GI1(t.y8U))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-plumb-editor"]],viewQuery:function(n,i){if(1&n&&(t.CC$(jt,5),t.CC$(Vt,5)),2&n){let a;t.wto(a=t.Gqi())&&(i.domRootRef=a.first),t.wto(a=t.Gqi())&&(i.domDataSourcesRef=a)}},features:[t.eg9],decls:2,vars:3,consts:[["id","pipeline-root"],["domRoot",""],[1,"dataSource",3,"id","ngStyle","ngClass"],["domDataSource",""],[1,"actions","left"],[1,"type-info",3,"title"],["class","configure","title","Configure data source","appMousedownStopPropagation",""],["class","help","title","Help for this data source","appMousedownStopPropagation",""],[1,"actions","right"],["class","delete","title","Delete","appMousedownStopPropagation",""],["title","Click to edit name","appMousedownStopPropagation","",1,"name",3,"click"],[1,"show-hover-inline"],["title","Click to edit description","appMousedownStopPropagation","",1,"description",3,"click"],[1,"typename",3,"title"],["class","add-endpoint sourceEndpoint dynamic","title","Drag a new Out-Connection"],["class","many-in targetEndpoint dynamic","title","This data source supports multiple In-Connections"],["title","Configure data source","appMousedownStopPropagation","",1,"configure",3,"click"],["title","Help for this data source","appMousedownStopPropagation","",1,"help",3,"click"],["title","Delete","appMousedownStopPropagation","",1,"delete",3,"click"],[2,"margin","0"],[1,"configs"],[1,"config"],[1,"config-name",3,"title"],[1,"config-value",3,"title"],["class","config"],["title","Drag a new Out-Connection",1,"add-endpoint","sourceEndpoint","dynamic"],["title","This data source supports multiple In-Connections",1,"many-in","targetEndpoint","dynamic"],["class","dataSource",3,"id","ngStyle","ngClass"]],template:function(n,i){if(1&n&&(t.yuY(0,ae,3,1,"div",0),t.wVc(1,"async")),2&n){let a;t.C0Y(0,(a=t.kDX(1,1,i.viewModel$))?0:-1,a)}},dependencies:[d.QF,d.Qt,Nt.E,h.qL,d.a],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}\n\n/*# sourceMappingURL=https://sources.2sxc.org/17.10.00/dist/ng-edit/C:/Projects/2sxc/eav-ui/projects/eav-ui/src/app/visual-query/plumb-editor/plumb-editor.component.ts-angular-inline--1.css.map*/"]})}return o})();function le(o,r){if(1&o&&(t.I0R(0,"li"),t.OEk(1),t.C$Y()),2&o){const e=r.$implicit;t.yG2(1),t.oRS(" ",e," ")}}function ce(o,r){if(1&o&&(t.I0R(0,"ul",14),t.c53(1,le,2,1,"li",null,t.oxv),t.C$Y()),2&o){const e=t.GaO();t.yG2(1),t.oho(null==e.Pipeline.Params?null:e.Pipeline.Params.split("\n"))}}function de(o,r){if(1&o&&(t.I0R(0,"li"),t.OEk(1),t.C$Y()),2&o){const e=r.$implicit;t.yG2(1),t.oRS(" ",e," ")}}function ue(o,r){if(1&o&&(t.I0R(0,"ul",14),t.c53(1,de,2,1,"li",null,t.oxv),t.C$Y()),2&o){const e=t.GaO();t.yG2(1),t.oho(null==e.Pipeline.TestParameters?null:e.Pipeline.TestParameters.split("\n"))}}function pe(o,r){if(1&o){const e=t.KQA();t.I0R(0,"div",6)(1,"span",15),t.OEk(2,"Show DataSource Params"),t.C$Y(),t.I0R(3,"mat-slide-toggle",16),t.qCj("change",function(i){t.usT(e);const a=t.GaO(2);return t.CGJ(a.showDataSourceDetails(i))}),t.C$Y()()}2&o&&(t.yG2(3),t.E7m("checked",r.ShowDataSourceDetails))}function me(o,r){1&o&&t.wR5(0,"li",20),2&o&&t.E7m("innerHTML",r.$implicit,t.E3n)}function he(o,r){if(1&o&&(t.I0R(0,"div",18)(1,"div",7)(2,"span"),t.OEk(3,"Warnings"),t.C$Y(),t.I0R(4,"mat-icon",19),t.OEk(5,"warning"),t.C$Y()(),t.I0R(6,"ol",14),t.c53(7,me,1,1,"li",20,t.oxv),t.C$Y()()),2&o){const e=t.GaO();t.yG2(7),t.oho(e)}}function _e(o,r){1&o&&t.yuY(0,he,9,0,"div",17),2&o&&t.C0Y(0,r.length?0:-1)}function ge(o,r){if(1&o&&(t.I0R(0,"div",21)(1,"div",7),t.OEk(2,"Query Description"),t.C$Y(),t.I0R(3,"div"),t.OEk(4),t.C$Y()()),2&o){const e=t.GaO();t.yG2(4),t.cNF(e.Pipeline.Description)}}function Ce(o,r){if(1&o){const e=t.KQA();t.I0R(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.saveAndRunQuery(!0,!0))}),t.OEk(4," Save and run "),t.C$Y(),t.I0R(5,"button",5),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.saveAndRunQuery(!1,!0))}),t.OEk(6," Run "),t.C$Y(),t.I0R(7,"button",5),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.saveAndRunQuery(!0,!1))}),t.OEk(8," Save "),t.C$Y()(),t.I0R(9,"div",6)(10,"div",7)(11,"div"),t.OEk(12,"Query Parameters"),t.C$Y(),t.I0R(13,"div")(14,"button",8),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.editPipeline())}),t.I0R(15,"mat-icon"),t.OEk(16,"edit"),t.C$Y()(),t.I0R(17,"button",9),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.openParamsHelp())}),t.I0R(18,"mat-icon"),t.OEk(19,"info"),t.C$Y()()()(),t.yuY(20,ce,3,0,"ul",10),t.C$Y(),t.I0R(21,"div",6)(22,"div",7),t.OEk(23,"Test Parameters"),t.C$Y(),t.yuY(24,ue,3,0,"ul",10),t.C$Y(),t.yuY(25,pe,4,1,"div",11),t.wVc(26,"async"),t.yuY(27,_e,1,1),t.wVc(28,"async"),t.yuY(29,ge,5,1,"div",12),t.I0R(30,"div",13)(31,"button",5),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.openRestApi())}),t.I0R(32,"span"),t.OEk(33,"Use in JSON / REST API"),t.C$Y(),t.I0R(34,"mat-icon"),t.OEk(35,"code_curly"),t.C$Y()()()()()}if(2&o){const e=t.GaO();let n;t.yG2(20),t.C0Y(20,null!=r.Pipeline.Params&&r.Pipeline.Params.length?20:-1),t.yG2(4),t.C0Y(24,null!=r.Pipeline.TestParameters&&r.Pipeline.TestParameters.length?24:-1),t.yG2(1),t.C0Y(25,(n=t.kDX(26,5,e.visualDesignerData$))?25:-1,n),t.yG2(2),t.C0Y(27,(n=t.kDX(28,7,e.warnings$))?27:-1,n),t.yG2(2),t.C0Y(29,r.Pipeline.Description?29:-1)}}let fe=(()=>{class o{constructor(e,n,i,a){this.router=e,this.route=n,this.context=i,this.visualQueryService=a}ngOnInit(){this.pipelineModel$=this.visualQueryService.pipelineModel$.asObservable(),this.warnings$=this.visualQueryService.pipelineModel$.pipe((0,E.k)(e=>function re(o,r){const e=[];try{const n=o.Pipeline.Params?.split(/\r?\n/)||[],i=o.Pipeline.TestParameters?.split(/\r?\n/)||[];n.forEach(a=>{a=a?.trim(),a&&(/^[a-zA-Z0-9]+=(.*)$/gim.test(a)||e.push(`\n          A <em>Query Parameter</em> seems wrong: <br>\n          <code>${a}</code> <br>\n          It should use the syntax: <br>\n          <code>key=value</code> <br>\n          or resolve to a token like: <br>\n          <code>key=[source:key]</code>\n        `))}),i.forEach(a=>{if(a=a?.trim(),!a)return;/^\[[a-zA-Z]+:[a-zA-Z0-9]+\]=(.*)$/gim.test(a)||e.push(`\n          A <em>Test Parameter</em> seems wrong: <br>\n          <code>${a}</code> <br>\n          It should use the syntax: <br>\n          <code>[source:key]=value</code>\n        `);const b=/^\[module:id\]=([0-9]*)$/gim.exec(a);if(b){const K=b[1],L=r.moduleId?.toString();K!==L&&e.push(`\n            Your test ModuleId (${K}) is different from the current ModuleId (${L}).<br>\n            Note that 2sxc automatically provides the ModuleId - so you usually do not need to set it\n          `)}/^\[module:moduleid\]=([0-9]*)$/gim.exec(a)&&e.push("\n          You are using deprecated [Module:ModuleId] test parameter.<br>\n          Please use [Module:Id]\n        ")})}catch(n){console.error("Something went wrong in calculateWarnings for params",n)}return e}(e,this.context))),this.visualDesignerData$=this.visualQueryService.pipelineModel$.pipe((0,E.k)(e=>W.Co.tryParse(e.Pipeline.VisualDesignerData)??{}))}editPipeline(){this.visualQueryService.editPipelineEntity()}openParamsHelp(){window.open("https://go.2sxc.org/QueryParams","_blank")}saveAndRunQuery(e,n){this.visualQueryService.saveAndRun(e,n)}showDataSourceDetails(e){this.visualQueryService.showDataSourceDetails(e.checked)}openRestApi(){this.router.navigate([H.eI.getUrlQueryDialog(this.visualQueryService.pipelineModel$.value.Pipeline.EntityGuid)],{relativeTo:this.route})}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(A.E5),t.GI1(A.gV),t.GI1(g.e),t.GI1(B))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-run-explorer"]],decls:2,vars:3,consts:[["class","editor-active-explorer fancy-scrollbar-dark"],[1,"editor-active-explorer","fancy-scrollbar-dark"],[1,"wrapper"],[1,"actions"],["mat-raised-button","","color","accent",1,"action",3,"click"],["mat-raised-button","",1,"action",3,"click"],[1,"parameters"],[1,"title"],["mat-icon-button","","tippy","Edit parameters",3,"click"],["mat-icon-button","","tippy","Query Params Docs",3,"click"],["class","values"],["class","parameters"],["class","description"],[1,"footer-actions"],[1,"values"],[1,"eav-slide-toggle-label"],["color","primary",3,"checked","change"],["class","warnings"],[1,"warnings"],[2,"color","red"],[3,"innerHTML"],[1,"description"]],template:function(n,i){if(1&n&&(t.yuY(0,Ce,36,9,"div",0),t.wVc(1,"async")),2&n){let a;t.C0Y(0,(a=t.kDX(1,1,i.pipelineModel$))?0:-1,a)}},dependencies:[F.Y,h.qL,u.Gw,u.um,v.cP,d.a],styles:[".wrapper[_ngcontent-%COMP%]{padding:24px}.actions[_ngcontent-%COMP%], .footer-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:32px}.actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:not(:last-of-type), .footer-actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:8px}.parameters[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{margin:16px 0}.parameters[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;justify-content:space-between;font-size:14px}.parameters[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.parameters[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]{margin:0;padding-left:16px}.parameters[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .warnings[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px 0}.eav-slide-toggle-label[_ngcontent-%COMP%]{margin-right:4px;font-size:14px}"]})}return o})();function ve(o,r){if(1&o){const e=t.KQA();t.I0R(0,"div",8),t.qCj("click",function(){const a=t.usT(e).$implicit,c=t.GaO(4);return t.CGJ(c.addDataSource(a))}),t.I0R(1,"mat-icon"),t.OEk(2),t.C$Y(),t.I0R(3,"span"),t.OEk(4),t.C$Y()()}if(2&o){const e=r.$implicit,n=t.GaO(4);t.E7m("tippy",e.UiHint||e.Name),t.yG2(2),t.cNF(e.Icon||n.guiTypes.Unknown.Icon),t.yG2(2),t.cNF(e.Name)}}function Ee(o,r){if(1&o&&(t.I0R(0,"div",7),t.c53(1,ve,5,3,"div",9,t.mgi().trackDataSources),t.C$Y()),2&o){const e=t.GaO().$implicit;t.yG2(1),t.oho(e.value)}}function De(o,r){if(1&o){const e=t.KQA();t.I0R(0,"div",5),t.qCj("click",function(){const a=t.usT(e).$implicit,c=t.GaO(2);return t.CGJ(c.toggleItem(a.key))}),t.I0R(1,"mat-icon"),t.OEk(2),t.C$Y(),t.I0R(3,"span"),t.OEk(4),t.C$Y()(),t.yuY(5,Ee,3,0,"div",6)}if(2&o){const e=r.$implicit,n=t.GaO(2);let i;t.E7m("tippy",n.guiTypes[e.key].UiHint||e.key),t.yG2(2),t.cNF(n.guiTypes[e.key].Icon||n.guiTypes.Unknown.Icon),t.yG2(2),t.cNF(null!==(i=null!==(i=n.guiTypes[e.key].Label)&&void 0!==i?i:n.guiTypes[e.key].Name)&&void 0!==i?i:e.key),t.yG2(1),t.C0Y(5,n.toggledItems.includes(e.key)?5:-1)}}function Se(o,r){if(1&o){const e=t.KQA();t.I0R(0,"div",1)(1,"div",2)(2,"span",3),t.OEk(3,"Show Advanced"),t.C$Y(),t.I0R(4,"mat-slide-toggle",4),t.qCj("change",function(i){t.usT(e);const a=t.GaO();return t.CGJ(a.toggleDifficulty(i))}),t.C$Y()(),t.c53(5,De,6,4,null,null,t.mgi().trackGroups),t.wVc(7,"keyvalue"),t.C$Y()}2&o&&(t.yG2(5),t.oho(t.kDX(7,0,r.sorted)))}let Ie=(()=>{class o{constructor(e){this.visualQueryService=e,this.toggledItems=[],this.guiTypes=j,this.difficulties=R._K.pipelineDesigner.dataSourceDifficulties,this.difficulty$=new Q.g(this.difficulties.default)}ngOnInit(){this.viewModel$=(0,N.E)([(0,N.E)([this.visualQueryService.dataSources$,this.difficulty$]).pipe((0,E.k)(([e,n])=>function ye(o,r){if(!o)return;const n=(0,Y.c)(o).filter(a=>a.Difficulty<=r&&a.PartAssemblyAndType!==R._K.pipelineDesigner.outDataSource.PartAssemblyAndType);n.sort((a,c)=>a.Name.toLocaleLowerCase().localeCompare(c.Name.toLocaleLowerCase()));const i={};for(const a of n){const c=a.PrimaryType;i[c]?i[c].push(a):i[c]=[a]}return i}(e,n)))]).pipe((0,E.k)(([e])=>({sorted:e})))}ngOnDestroy(){this.difficulty$.complete()}toggleDifficulty(e){this.difficulty$.next(e.checked?this.difficulties.advanced:this.difficulties.default)}addDataSource(e){this.visualQueryService.addDataSource(e)}toggleItem(e){W.Co.toggleInArray(e,this.toggledItems)}trackGroups(e,n){return n.key}trackDataSources(e,n){return n.PartAssemblyAndType}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(B))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-add-explorer"]],decls:2,vars:3,consts:[["class","editor-active-explorer fancy-scrollbar-dark"],[1,"editor-active-explorer","fancy-scrollbar-dark"],[1,"eav-show-advanced"],[1,"eav-slide-toggle-label"],["color","primary",3,"change"],["tippyShowDelay","750",1,"collapsible",3,"tippy","click"],["class","list"],[1,"list"],["tippyShowDelay","750",1,"list-item",3,"tippy","click"],["class","list-item","tippyShowDelay","750",3,"tippy"]],template:function(n,i){if(1&n&&(t.yuY(0,Se,8,2,"div",0),t.wVc(1,"async")),2&n){let a;t.C0Y(0,(a=t.kDX(1,1,i.viewModel$))?0:-1,a)}},dependencies:[F.Y,h.qL,v.cP,d.a,d.uq],styles:[".mat-mdc-slide-toggle[_ngcontent-%COMP%]{margin:6px;-webkit-user-select:none;user-select:none}.collapsible[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px;margin-left:8px;margin-right:4px}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;padding:4px 0 4px 24px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px;margin-left:6px;margin-right:4px}.eav-show-advanced[_ngcontent-%COMP%]{margin-left:8px}"]})}return o})();const tt=o=>({active:o}),Oe=[{path:"",component:(()=>{class o{constructor(e,n,i){this.context=e,this.route=n,this.visualQueryService=i,this.explorer={run:"run",add:"add"},this.activeExplorer=this.explorer.run,this.context.init(this.route)}ngOnInit(){this.visualQueryService.init()}toggleExplorer(e){this.activeExplorer=this.activeExplorer===e?null:e}openHelp(){window.open("https://go.2sxc.org/visual-query","_blank")}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(g.e),t.GI1(A.gV),t.GI1(B))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-visual-query"]],viewQuery:function(n,i){if(1&n&&t.CC$(q,5),2&n){let a;t.wto(a=t.Gqi())&&(i.plumbEditor=a.first)}},features:[t.M5G([B])],decls:16,vars:8,consts:[[1,"editor-root"],[1,"editor-side-toolbar"],["tippy","Run",1,"button",3,"ngClass","click"],["tippy","Add",1,"button",3,"ngClass","click"],[1,"spacer"],["tippy","Help",1,"button",3,"click"],[3,"hidden"]],template:function(n,i){1&n&&(t.wR5(0,"router-outlet"),t.I0R(1,"div",0)(2,"div",1)(3,"div",2),t.qCj("click",function(){return i.toggleExplorer(i.explorer.run)}),t.I0R(4,"mat-icon"),t.OEk(5,"play_arrow"),t.C$Y()(),t.I0R(6,"div",3),t.qCj("click",function(){return i.toggleExplorer(i.explorer.add)}),t.I0R(7,"mat-icon"),t.OEk(8,"add"),t.C$Y()(),t.wR5(9,"div",4),t.I0R(10,"div",5),t.qCj("click",function(){return i.openHelp()}),t.I0R(11,"mat-icon"),t.OEk(12,"help_outline"),t.C$Y()()(),t.wR5(13,"app-run-explorer",6)(14,"app-add-explorer",6)(15,"app-plumb-editor"),t.C$Y()),2&n&&(t.yG2(3),t.E7m("ngClass",t.S45(4,tt,i.activeExplorer===i.explorer.run)),t.yG2(3),t.E7m("ngClass",t.S45(6,tt,i.activeExplorer===i.explorer.add)),t.yG2(7),t.E7m("hidden",i.activeExplorer!==i.explorer.run),t.yG2(1),t.E7m("hidden",i.activeExplorer!==i.explorer.add))},dependencies:[d.QF,F.Y,A.cP,h.qL,fe,Ie,q],styles:[".editor-side-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})}return o})(),children:[H.eI.route,{matcher:it.aM,loadChildren:()=>Promise.all([s.e("default-projects_eav-ui_src_app_create-file-dialog_index_ts"),s.e("default-node_modules_angular_material_fesm2022_autocomplete_mjs"),s.e("default-node_modules_angular_material_fesm2022_card_mjs"),s.e("default-projects_eav-ui_src_app_edit_edit_module_ts"),s.e("default-node_modules_angular_cdk_fesm2022_drag-drop_mjs"),s.e("default-node_modules_angular_material_fesm2022_menu_mjs"),s.e("projects_eav-ui_src_app_features_feature-names_ts-projects_eav-ui_src_app_features_feature-te-e1a60e")]).then(s.bind(s,9948)).then(o=>o.EditModule),data:{history:!1}}]}];let Pe=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.a4G({type:o});static#n=this.\u0275inj=t.s3X({imports:[A.qQ.forChild(Oe),A.qQ]})}return o})(),xe=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.a4G({type:o});static#n=this.\u0275inj=t.s3X({providers:[g.e,k,P.y,m.X,{provide:y.uY,useValue:{subscriptSizing:"dynamic"}},{provide:S.kF,useValue:{hideSingleSelectionIndicator:!0}},{provide:v.QL,useValue:{hideIcon:!0}}],imports:[d.MD,O.q,Pe,h.oB,u.oJ,v.GE,_.uE,f.sr,I.WG,y.wb,l.sl,S.d5,p.cN]})}return o})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.10.00/dist/ng-edit/projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_shared_c-cc3950.207b66c24cbc426b.js.map