{"version":3,"sources":["./projects/edit/assets/icons/font-awesome/file-code.svg","./projects/edit/shared/constants/features-guids.constants.ts","./projects/edit/shared/store/ngrx-data/entity-metadata.ts","./projects/ng-dialogs/src/app/shared/services/context.ts","./projects/edit/shared/store/ngrx-data/link-cache.service.ts","./projects/ng-dialogs/src/app/content-type-fields/constants/input-type.constants.ts","./projects/edit/shared/store/reducers/index.ts","./projects/edit/eav-material-controls/validators/validation-helper.ts","./projects/edit/shared/constants/wrappers.constants.ts","./projects/ng-dialogs/src/app/app.component.scss","./projects/edit/shared/models/formula.models.ts","./projects/edit/shared/services/entity.service.ts","./projects/edit/shared/services/index.ts","./projects/edit/field-logic/field-logic-manager.ts","./projects/edit/eav-material-controls/page-picker/page-picker.component.ts","./projects/edit/shared/services/fields-settings.service.ts","./projects/edit/shared/constants/localization.constants.ts","./projects/edit/shared/models/eav/eav-item.ts","./projects/edit/shared/helpers/index.ts","./projects/edit/assets/icons/font-awesome/file.svg","./projects/edit/shared/store/ngrx-data/string-query-cache.service.ts","./projects/edit/shared/store/ngrx-data/feature.service.ts","./projects/edit/eav-material-controls/localization/translate-menu/translate-menu.helpers.ts","./projects/ng-dialogs/src/app/app.component.ts","./projects/edit/shared/store/ngrx-data/item.service.ts","./projects/edit/edit.matcher.ts","./projects/ng-dialogs/src/environments/environment.ts","./projects/edit/eav-material-controls/page-picker/page-picker.helpers.ts","./projects/edit/assets/icons/font-awesome/file-image.svg","./projects/edit/shared/models/index.ts","./projects/edit/shared/models/eav/eav-entity-attributes.ts","./projects/edit/shared/models/publish-mode.models.ts","./projects/edit/shared/services/logging.service.ts","./projects/edit/shared/services/query.service.ts","./projects/edit/shared/helpers/field-mask.helper.ts","./projects/ng-dialogs/src/app/app.module.ts","./projects/ng-dialogs/src/app/shared/helpers/update-env-vars-from-dialog-settings.helper.ts","./projects/edit/assets/icons/font-awesome/draft-branch.svg","./projects/edit/shared/services/formula-designer.service.ts","./projects/edit/shared/store/ngrx-data/publish-status.service.ts","./projects/edit/shared/services/forms-state.service.ts","./projects/edit/shared/store/ngrx-data/entity-cache.service.ts","./projects/edit/eav-material-controls/page-picker/page-picker.component.scss","./projects/edit/shared/helpers/localization.helpers.ts","./projects/ng-dialogs/src/app/params-init.factory.ts","./projects/edit/shared/models/eav/eav-content-type.ts","./projects/edit/shared/store/ngrx-data/input-type.service.ts","./projects/edit/shared/store/ngrx-data/language-instance.service.ts","./projects/edit/shared/services/edit-routing.service.ts","./projects/edit/assets/icons/font-awesome/file-video.svg","./projects/ng-dialogs/src/app/assets/icons/code-curly.svg","./projects/edit/shared/models/eav/eav-entity.ts","./projects/edit/assets/icons/font-awesome/folder.svg","./projects/edit/shared/services/load-icons.service.ts","./projects/edit/shared/store/ngrx-data/global-config.service.ts","./projects/edit/assets/icons/font-awesome/folder-plus.svg","./projects/edit/shared/models/eav/index.ts","./projects/ng-dialogs/src/app/shared/interceptors/handle-errors.interceptor.ts","./projects/edit/shared/models/log-entry.model.ts","./projects/ng-dialogs/src/app/shared/helpers/url-prep.helper.ts","./projects/edit/shared/store/ngrx-data/index.ts","./projects/edit/eav-item-dialog/multi-item-edit-form/multi-item-edit-form.helpers.ts","./projects/edit/assets/icons/font-awesome/file-audio.svg","./projects/edit/shared/services/assets.service.ts","./projects/edit/shared/helpers/fields-settings.helpers.ts","./projects/edit/eav-material-controls/page-picker/page-picker.component.html","./projects/ng-dialogs/src/app/assets/icons/star-24px.svg","./projects/ng-dialogs/src/app/shared/constants/session.constants.ts","./projects/edit/shared/store/ngrx-data/base-data.service.ts","./projects/edit/shared/services/fields-translate.service.ts","./projects/edit/shared/constants/translation-link.constants.ts","./projects/edit/assets/icons/font-awesome/file-powerpoint.svg","./projects/edit/shared/helpers/dropzone-dragging.helper.ts","./projects/ng-dialogs/src/app/shared/helpers/console-log-angular.helper.ts","./projects/edit/assets/icons/font-awesome/file-text.svg","./projects/edit/shared/services/scripts-loader.service.ts","./projects/edit/assets/icons/2sxc/Material-Icon-Adam-48-filled.svg","./projects/edit/shared/models/eav/eav-dimension.ts","./projects/edit/shared/models/eav/eav-content-type-attribute.ts","./projects/edit/shared/store/ngrx-data/language.service.ts","./projects/edit/shared/constants/index.ts","./projects/ng-dialogs/src/app/app.component.html","./projects/edit/shared/services/eav.service.ts","./projects/edit/assets/icons/font-awesome/file-excel.svg","./projects/edit/shared/helpers/url.helpers.ts","./projects/edit/shared/helpers/general.helpers.ts","./projects/ng-dialogs/src/app/shared/constants/eav.constants.ts","./projects/ng-dialogs/src/app/app-routing.module.ts","./projects/edit/shared/models/eav/eav-value.ts","./projects/edit/shared/helpers/input-field.helpers.ts","./projects/edit/assets/icons/font-awesome/sitemap.svg","./projects/ng-dialogs/src/app/shared/interceptors/set-headers.interceptor.ts","./projects/edit/shared/store/ngrx-data/content-type.service.ts","./projects/edit/shared/models/eav/eav-values.ts","./projects/edit/shared/store/ngrx-data/content-type-item.service.ts","./projects/edit/shared/store/index.ts","./projects/edit/assets/icons/2sxc/Material-Icon-Adam-48.svg","./projects/ng-dialogs/src/app/shared/constants/dialog-types.constants.ts","./projects/edit/assets/icons/font-awesome/file-word.svg","./projects/edit/shared/helpers/page-picker.helper.ts","./projects/edit/assets/icons/font-awesome/file-pdf.svg","./projects/edit/shared/constants/component-metadata.constants.ts","./projects/edit/shared/helpers/formula.helpers.ts","./projects/ng-dialogs/src/main.ts","./projects/edit/shared/services/file-type.service.ts","./projects/edit/shared/store/ngrx-data/adam-cache.service.ts","./projects/edit/shared/services/edit-initializer.service.ts","./projects/edit/assets/icons/font-awesome/file-archive.svg","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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AE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YACtF,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI;YAC1F,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YACnF,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YACtF,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI;YACxF,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI;YAChG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAChG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI;YACjG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAChG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YACtB,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI;YAC9F,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAChG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YACjG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAChG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAChG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC9F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAChG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;YAC/F,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,G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","file":"main.js","sourcesContent":["export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.941 97.941l-83.882-83.882A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zm-22.627 22.628a15.89 15.89 0 0 1 4.195 7.431H256V32.491a15.88 15.88 0 0 1 7.431 4.195l83.883 83.883zM336 480H48c-8.837 0-16-7.163-16-16V48c0-8.837 7.163-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304c0 8.837-7.163 16-16 16zm-161.471-67.404l-25.928-7.527a5.1 5.1 0 0 1-3.476-6.32l58.027-199.869a5.1 5.1 0 0 1 6.32-3.476l25.927 7.527a5.1 5.1 0 0 1 3.476 6.32L180.849 409.12a5.1 5.1 0 0 1-6.32 3.476zm-48.446-47.674l18.492-19.724a5.101 5.101 0 0 0-.351-7.317L105.725 304l38.498-33.881a5.1 5.1 0 0 0 .351-7.317l-18.492-19.724a5.1 5.1 0 0 0-7.209-.233L57.61 300.279a5.1 5.1 0 0 0 0 7.441l61.263 57.434a5.1 5.1 0 0 0 7.21-.232zm139.043.232l61.262-57.434a5.1 5.1 0 0 0 0-7.441l-61.262-57.434a5.1 5.1 0 0 0-7.209.233l-18.492 19.724a5.101 5.101 0 0 0 .351 7.317L278.275 304l-38.499 33.881a5.1 5.1 0 0 0-.351 7.317l18.492 19.724a5.1 5.1 0 0 0 7.209.232z\\\"/></svg>\";","export enum FeaturesConstants {\r\n  PasteWithFormatting = '1b13e0e6-a346-4454-a1e6-2fb18c047d20',\r\n  PasteImageFromClipboard = 'f6b8d6da-4744-453b-9543-0de499aa2352',\r\n}\r\n","import { EntityMetadataMap } from '@ngrx/data';\r\nimport { EntityInfo } from '../../../../edit-types';\r\nimport { InputType } from '../../../../ng-dialogs/src/app/content-type-fields/models/input-type.model';\r\nimport { Prefetch } from '../../../eav-item-dialog/multi-item-edit-form/multi-item-edit-form.models';\r\nimport { QueryEntity } from '../../../eav-material-controls/input-types/entity/entity-query/entity-query.models';\r\nimport { AdamSnapshot, Language, LanguageInstance, LinkCache, PublishStatus } from '../../models';\r\nimport { EavContentType, EavEntity, EavItem } from '../../models/eav';\r\n\r\nexport const entityMetadata: EntityMetadataMap = {\r\n  GlobalConfig: {},\r\n  Item: {\r\n    selectId: itemSelectId,\r\n  },\r\n  Feature: {},\r\n  Language: {\r\n    selectId: languageSelectId,\r\n  },\r\n  LanguageInstance: {\r\n    selectId: languageInstanceSelectId,\r\n  },\r\n  ContentType: {\r\n    selectId: contentTypeSelectId,\r\n  },\r\n  ContentTypeItem: {\r\n    selectId: contentTypeItemSelectId,\r\n  },\r\n  InputType: {\r\n    selectId: inputTypeSelectId,\r\n  },\r\n  PublishStatus: {\r\n    selectId: publishStatusSelectId,\r\n  },\r\n  Prefetch: {\r\n    selectId: prefetchSelectId,\r\n  },\r\n  EntityCache: {\r\n    selectId: entityCacheSelectId,\r\n  },\r\n  AdamCache: {\r\n    selectId: adamCacheSelectId,\r\n  },\r\n  LinkCache: {\r\n    selectId: linkCacheSelectId,\r\n  },\r\n  StringQueryCache: {\r\n    selectId: stringQueryCacheSelectId,\r\n  },\r\n};\r\n\r\nexport const pluralNames = {\r\n  Feature: 'Features', // example\r\n  PublishStatus: 'PublishStatuses',\r\n};\r\n\r\nexport const entityConfig = {\r\n  entityMetadata,\r\n  pluralNames,\r\n};\r\n\r\nexport function itemSelectId(item: EavItem): string {\r\n  return item?.Entity?.Guid;\r\n}\r\n\r\nexport function languageSelectId(language: Language): string {\r\n  return language?.key;\r\n}\r\n\r\nexport function languageInstanceSelectId(languageInstance: LanguageInstance): number {\r\n  return languageInstance?.formId;\r\n}\r\n\r\nexport function contentTypeSelectId(contentType: EavContentType): string {\r\n  return contentType?.Id;\r\n}\r\n\r\nexport function contentTypeItemSelectId(contentTypeItem: EavEntity): string {\r\n  return contentTypeItem?.Guid;\r\n}\r\n\r\nexport function inputTypeSelectId(inputType: InputType): string {\r\n  return inputType?.Type;\r\n}\r\n\r\nexport function publishStatusSelectId(publishStatus: PublishStatus): number {\r\n  return publishStatus?.formId;\r\n}\r\n\r\nexport function prefetchSelectId(entity: Prefetch): string {\r\n  return entity?._guid;\r\n}\r\n\r\nexport function entityCacheSelectId(entity: EntityInfo): number {\r\n  return entity?.Id;\r\n}\r\n\r\nexport function adamCacheSelectId(adamSnapshot: AdamSnapshot): string {\r\n  return adamSnapshot?.Guid;\r\n}\r\n\r\nexport function linkCacheSelectId(link: LinkCache): string {\r\n  return link?.key;\r\n}\r\n\r\nexport function stringQueryCacheSelectId(entity: QueryEntity): string {\r\n  return entity?.Guid;\r\n}\r\n","import { Injectable, Optional, SkipSelf } from '@angular/core';\r\nimport { ActivatedRoute, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { keyAppId, keyContentBlockId, keyModuleId, keyRequestToken, keyTabId, keyZoneId, prefix } from '../constants/session.constants';\r\nimport { consoleLogAngular } from '../helpers/console-log-angular.helper';\r\nimport { EavWindow } from '../models/eav-window.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n/** The context provides information */\r\n@Injectable()\r\nexport class Context {\r\n\r\n  /** Id of current context */\r\n  public id: number;\r\n\r\n  /** Determines if the context is ready to use, and everything is initialized */\r\n  public ready = false;\r\n\r\n  /** The parent, for hierarchical lookup */\r\n  private parent: Context;\r\n\r\n  private routeSnapshot: ActivatedRouteSnapshot;\r\n\r\n  /** The current Zone ID */\r\n  get zoneId(): number {\r\n    return this._zoneId || (this._zoneId = this.routeNum(keyZoneId) || this.parent.zoneId);\r\n  }\r\n  private _zoneId: number;\r\n\r\n  /** The current App ID */\r\n  get appId(): number {\r\n    return (this._appId != null) ? this._appId : (this._appId = this.routeNum(keyAppId) || this.parent.appId);\r\n  }\r\n  private _appId: number;\r\n\r\n  /**\r\n   * The request verification token for http requests.\r\n   * It's only loaded from the root, never from sub-contexts\r\n   */\r\n  get requestToken(): string { return this._rvt || (this._rvt = this.parent.requestToken); }\r\n  private _rvt: string;\r\n\r\n  /** Tab Id is global */\r\n  get tabId(): number {\r\n    return this._tabId || (this._tabId = this.routeNum(keyTabId) || this.parent.tabId);\r\n  }\r\n  private _tabId: number;\r\n\r\n  /** Content Block Id is global */\r\n  get contentBlockId(): number {\r\n    return this._contentBlockId || (this._contentBlockId = this.routeNum(keyContentBlockId) || this.parent.contentBlockId);\r\n  }\r\n  private _contentBlockId: number;\r\n\r\n  /** Module Id is global */\r\n  get moduleId(): number {\r\n    return this._moduleId || (this._moduleId = this.routeNum(keyModuleId) || this.parent.moduleId);\r\n  }\r\n  private _moduleId: number;\r\n\r\n  constructor(@Optional() @SkipSelf() parentContext: Context) {\r\n    this.parent = parentContext;\r\n\r\n    // spm NOTE: I've given id to every context to make it easier to follow how things work\r\n    if (!window.contextId) { window.contextId = 0; }\r\n    this.id = window.contextId++;\r\n    consoleLogAngular('Context.constructor', this);\r\n  }\r\n\r\n  /**\r\n   * This is the initializer at entry-componets of modules.\r\n   * It ensures that within that module, the context has the values given by the route\r\n   */\r\n  init(route: ActivatedRoute) {\r\n    this.routeSnapshot = route && route.snapshot;\r\n    this.clearCachedValues();\r\n    this.ready = route != null;\r\n    consoleLogAngular('Context.init', this, route);\r\n  }\r\n\r\n  initRoot() {\r\n    // required, global things\r\n    this._rvt = sessionStorage.getItem(keyRequestToken);\r\n    this._zoneId = this.sessionNumber(keyZoneId);\r\n    this._tabId = this.sessionNumber(keyTabId);\r\n    this._contentBlockId = this.sessionNumber(keyContentBlockId);\r\n    this._moduleId = this.sessionNumber(keyModuleId);\r\n\r\n    if (!this._rvt || !this._zoneId || !this._tabId || !this._contentBlockId || !this._moduleId) {\r\n      throw new Error('Context is missing some of the required parameters');\r\n    }\r\n\r\n    // optional global things\r\n    this._appId = this.sessionNumber(keyAppId);\r\n\r\n    this.ready = true;\r\n    consoleLogAngular('Context.initRoot', this);\r\n  }\r\n\r\n  private sessionNumber(name: string): number {\r\n    const result = sessionStorage.getItem(name);\r\n    if (result !== null) {\r\n      const num = parseInt(result, 10);\r\n      return isNaN(num) ? null : num;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get a number from the route, or optionally its parents.\r\n   * Returns value in route or null\r\n   */\r\n  private routeNum(name: string): number {\r\n    // catch case where state is null, like when the recursive parent is in use\r\n    if (this.routeSnapshot == null) { return null; }\r\n\r\n    const paramName = name.substring(prefix.length);\r\n    const result = this.routeSnapshot.paramMap.get(paramName);\r\n    if (result !== null) {\r\n      const num = parseInt(result, 10);\r\n      return isNaN(num) ? null : num;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clears cached values. Required when one module instance is opened multiple times,\r\n   * e.g. Apps Management -> App Admin for appId 2 -> back -> App Admin for appId 17.\r\n   * Module is reused, and so is context and it contains values for previous appId.\r\n   */\r\n  private clearCachedValues() {\r\n    this._zoneId = null;\r\n    this._appId = null;\r\n    this._rvt = null;\r\n    this._tabId = null;\r\n    this._contentBlockId = null;\r\n    this._moduleId = null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { AdamItem } from '../../../../edit-types';\r\nimport { PrefetchAdams, PrefetchLinks } from '../../../eav-item-dialog/multi-item-edit-form/multi-item-edit-form.models';\r\nimport { LinkCache, LinkInfo } from '../../models';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LinkCacheService extends BaseDataService<LinkCache> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('LinkCache', serviceElementsFactory);\r\n  }\r\n\r\n  loadPrefetch(prefetchLinks: PrefetchLinks, prefetchAdam: PrefetchAdams): void {\r\n    const links: LinkCache[] = [];\r\n\r\n    if (prefetchLinks != null) {\r\n      for (const [key, linkInfo] of Object.entries(prefetchLinks)) {\r\n        const link: LinkCache = {\r\n          key,\r\n          linkInfo,\r\n        };\r\n        links.push(link);\r\n      }\r\n    }\r\n\r\n    if (prefetchAdam != null) {\r\n      for (const [entityGuid, prefetchFields] of Object.entries(prefetchAdam)) {\r\n        for (const [fieldName, items] of Object.entries(prefetchFields)) {\r\n          const adamLinks = this.adamToLinks(items);\r\n          links.push(...adamLinks);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.upsertManyInCache(links);\r\n  }\r\n\r\n  loadAdam(items: AdamItem[]): void {\r\n    const adamLinks = this.adamToLinks(items);\r\n    this.upsertManyInCache(adamLinks);\r\n  }\r\n\r\n  loadLink(key: string, linkInfo: LinkInfo): void {\r\n    key = key.trim().toLocaleLowerCase();\r\n    const link: LinkCache = {\r\n      key,\r\n      linkInfo: {\r\n        ...linkInfo,\r\n        Adam: {\r\n          ...linkInfo.Adam,\r\n        },\r\n      },\r\n    };\r\n    this.upsertOneInCache(link);\r\n  }\r\n\r\n  getLinkInfo(key: string): LinkInfo {\r\n    key = key.trim().toLocaleLowerCase();\r\n    return this.cache$.value.find(linkCache => linkCache.key.trim().toLocaleLowerCase() === key)?.linkInfo;\r\n  }\r\n\r\n  private adamToLinks(items: AdamItem[]): LinkCache[] {\r\n    const links: LinkCache[] = [];\r\n\r\n    for (const item of items) {\r\n      if (item.IsFolder) { continue; }\r\n\r\n      const link: LinkCache = {\r\n        key: item.ReferenceId,\r\n        linkInfo: {\r\n          Adam: { ...item },\r\n          Value: item.Url,\r\n        },\r\n      };\r\n      links.push(link);\r\n    }\r\n\r\n    return links;\r\n  }\r\n}\r\n","export class InputTypeConstants {\r\n    // String\r\n    public static readonly StringDefault = 'string-default';\r\n    public static readonly StringUrlPath = 'string-url-path';\r\n    public static readonly StringDropdown = 'string-dropdown';\r\n    public static readonly StringDropdownQuery = 'string-dropdown-query';\r\n    public static readonly StringFontIconPicker = 'string-font-icon-picker';\r\n    public static readonly StringTemplatePicker = 'string-template-picker';\r\n    public static readonly StringWysiwyg = 'string-wysiwyg';\r\n    // Boolean\r\n    public static readonly BooleanDefault = 'boolean-default';\r\n    public static readonly BooleanTristate = 'boolean-tristate';\r\n    // DateTime\r\n    public static readonly DatetimeDefault = 'datetime-default';\r\n    // Empty\r\n    public static readonly EmptyDefault = 'empty-default';\r\n    public static readonly EmptyEnd = 'empty-end';\r\n    // Number\r\n    public static readonly NumberDefault = 'number-default';\r\n    // Entity\r\n    public static readonly EntityDefault = 'entity-default';\r\n    public static readonly EntityQuery = 'entity-query';\r\n    public static readonly EntityContentBlocks = 'entity-content-blocks';\r\n    // Hyperlink\r\n    public static readonly HyperlinkDefault = 'hyperlink-default';\r\n    public static readonly HyperlinkLibrary = 'hyperlink-library';\r\n    // Custom\r\n    public static readonly ExternalWebComponent = 'external-web-component';\r\n    public static readonly CustomGPS = 'custom-gps';\r\n    public static readonly CustomJsonEditor = 'custom-json-editor';\r\n    public static readonly CustomDefault = 'custom-default';\r\n    // Old\r\n    public static readonly OldTypeDropdown = 'dropdown';\r\n    public static readonly OldTypeWysiwyg = 'wysiwyg';\r\n    public static readonly OldTypeDefault = 'default';\r\n    public static readonly StringWysiwygTinymce = 'string-wysiwyg-tinymce';\r\n    public static readonly StringWysiwygAdv = 'string-wysiwyg-adv';\r\n    public static readonly StringWysiwygDnn = 'string-wysiwyg-dnn';\r\n    // Default\r\n    public static readonly DefaultSuffix = '-default';\r\n}\r\n","import { Action, ActionReducer, ActionReducerMap, MetaReducer, } from '@ngrx/store';\r\nimport { consoleLogAngular } from '../../../../ng-dialogs/src/app/shared/helpers/console-log-angular.helper';\r\nimport { environment } from '../../../../ng-dialogs/src/environments/environment';\r\n\r\n// tslint:disable-next-line:no-empty-interface\r\nexport interface EavState {\r\n}\r\n\r\n/** Console log all actions */\r\nexport function logger(reducer: ActionReducer<EavState>): ActionReducer<EavState> {\r\n  return (state: EavState, action: Action): EavState => {\r\n    consoleLogAngular('[STORE] state:', state, 'action:', action);\r\n    return reducer(state, action);\r\n  };\r\n}\r\n\r\n/**\r\n * By default, @ngrx/store uses combineReducers with the reducer map to compose\r\n * the root meta-reducer. To add more meta-reducers, provide an array of meta-reducers\r\n * that will be composed to form the root meta-reducer.\r\n */\r\nexport const metaReducers: MetaReducer[] = !environment.production\r\n  ? [logger]\r\n  : [];\r\n\r\nexport const reducers: ActionReducerMap<EavState> = {\r\n};\r\n","import { AbstractControl, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { FieldSettings } from '../../../edit-types';\r\nimport { InputTypeConstants } from '../../../ng-dialogs/src/app/content-type-fields/constants/input-type.constants';\r\nimport { FieldsSettingsService } from '../../shared/services';\r\nimport { AdamControl } from '../input-types/hyperlink/hyperlink-library/hyperlink-library.models';\r\n\r\n/** Validators here are copied from https://github.com/angular/angular/blob/master/packages/forms/src/validators.ts */\r\nexport class ValidationHelper {\r\n\r\n  static isRequired(settings: FieldSettings): boolean {\r\n    // hidden field can't be required\r\n    return settings.Visible ? settings.Required : false;\r\n  }\r\n\r\n  static getValidators(fieldName: string, inputType: string, fieldsSettingsService: FieldsSettingsService): ValidatorFn[] {\r\n    // TODO: merge all validators in a single function? Should be faster\r\n    const validators: ValidatorFn[] = [\r\n      inputType !== InputTypeConstants.HyperlinkLibrary\r\n        ? this.required(fieldName, fieldsSettingsService)\r\n        : this.requiredAdam(fieldName, fieldsSettingsService),\r\n      this.pattern(fieldName, fieldsSettingsService),\r\n      this.decimals(fieldName, fieldsSettingsService),\r\n      this.max(fieldName, fieldsSettingsService),\r\n      this.min(fieldName, fieldsSettingsService),\r\n    ];\r\n    return validators;\r\n  }\r\n\r\n  private static required(fieldName: string, fieldsSettingsService: FieldsSettingsService): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const settings = fieldsSettingsService.getFieldSettings(fieldName);\r\n      if (this.ignoreValidators(settings)) { return null; }\r\n      if (!settings.Required) { return null; }\r\n\r\n      return Validators.required(control);\r\n    };\r\n  }\r\n\r\n  private static requiredAdam(fieldName: string, fieldsSettingsService: FieldsSettingsService): ValidatorFn {\r\n    return (control: AdamControl): ValidationErrors | null => {\r\n      const settings = fieldsSettingsService.getFieldSettings(fieldName);\r\n      if (this.ignoreValidators(settings)) { return null; }\r\n      if (!settings.Required) { return null; }\r\n\r\n      return control.adamItems === 0 ? { required: true } : null;\r\n    };\r\n  }\r\n\r\n  private static pattern(fieldName: string, fieldsSettingsService: FieldsSettingsService): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const settings = fieldsSettingsService.getFieldSettings(fieldName);\r\n      if (this.ignoreValidators(settings)) { return null; }\r\n      if (!settings.ValidationRegExJavaScript) { return null; }\r\n\r\n      return Validators.pattern(settings.ValidationRegExJavaScript)(control);\r\n    };\r\n  }\r\n\r\n  private static decimals(fieldName: string, fieldsSettingsService: FieldsSettingsService): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const settings = fieldsSettingsService.getFieldSettings(fieldName);\r\n      if (this.ignoreValidators(settings)) { return null; }\r\n      if (settings.Decimals == null || settings.Decimals < 0) { return null; }\r\n      if (control.value == null) { return null; }\r\n\r\n      const matchString = settings.Decimals === 0 ? `^-?[0-9]+$` : `^-?[0-9]+(\\.[0-9]{1,${settings.Decimals}})?$`;\r\n      const matches = (control.value as number).toString().match(matchString);\r\n      return !matches ? { decimals: true } : null;\r\n    };\r\n  }\r\n\r\n  private static max(fieldName: string, fieldsSettingsService: FieldsSettingsService): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const settings = fieldsSettingsService.getFieldSettings(fieldName);\r\n      if (this.ignoreValidators(settings)) { return null; }\r\n      if (settings.Max == null) { return null; }\r\n\r\n      return Validators.max(settings.Max)(control);\r\n    };\r\n  }\r\n\r\n  private static min(fieldName: string, fieldsSettingsService: FieldsSettingsService): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const settings = fieldsSettingsService.getFieldSettings(fieldName);\r\n      if (this.ignoreValidators(settings)) { return null; }\r\n      if (settings.Min == null) { return null; }\r\n\r\n      return Validators.min(settings.Min)(control);\r\n    };\r\n  }\r\n\r\n  /** Hidden fields can't have validators */\r\n  private static ignoreValidators(settings: FieldSettings): boolean {\r\n    return !settings.Visible;\r\n  }\r\n}\r\n","export enum WrappersConstants {\r\n  // Empty specific\r\n  CollapsibleWrapper = 'app-collapsible-wrapper',\r\n  // Default wrappers\r\n  HiddenWrapper = 'app-hidden-wrapper',\r\n  DropzoneWrapper = 'app-dropzone-wrapper',\r\n  LocalizationWrapper = 'app-localization-wrapper',\r\n  ExpandableWrapper = 'app-expandable-wrapper',\r\n  AdamAttachWrapper = 'app-adam-attach-wrapper',\r\n  // Entity specific\r\n  EntityExpandableWrapper = 'app-entity-expandable-wrapper',\r\n  // Hyperlink specific\r\n  HyperlinkDefaultExpandableWrapper = 'app-hyperlink-default-expandable-wrapper',\r\n  HyperlinkLibraryExpandableWrapper = 'app-hyperlink-library-expandable-wrapper',\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\";","import { FieldSettings, FieldValue } from '../../../edit-types';\r\nimport { FormValues } from '../../eav-item-dialog/item-edit-form/item-edit-form.models';\r\nimport { EavType } from './eav';\r\n\r\nexport interface FormulaCacheItem {\r\n  cache: Record<string, any>;\r\n  entityGuid: string;\r\n  fieldName: string;\r\n  /** Function built when formula is saved */\r\n  fn: FormulaFunction;\r\n  /** Is formula currently being edited (not yet saved) */\r\n  isDraft: boolean;\r\n  /** Current formula string */\r\n  source: string;\r\n  /** Formula string in field settings */\r\n  sourceFromSettings: string;\r\n  sourceGuid: string;\r\n  target: FormulaTarget;\r\n  version: FormulaVersion;\r\n}\r\n\r\nexport type FormulaFunction = FormulaFunctionDefault | FormulaFunctionV1;\r\n\r\nexport type FormulaFunctionDefault = () => FieldValue;\r\n\r\nexport type FormulaFunctionV1 = (data: FormulaV1Data, context: FormulaV1Context, experimental: FormulaV1Experimental) => FieldValue;\r\n\r\nexport const FormulaVersions = {\r\n  V1: 'v1',\r\n} as const;\r\n\r\nexport type FormulaVersion = typeof FormulaVersions[keyof typeof FormulaVersions];\r\n\r\nexport const FormulaTargets = {\r\n  Disabled: 'Field.Settings.Disabled',\r\n  Name: 'Field.Settings.Name',\r\n  Required: 'Field.Settings.Required',\r\n  Value: 'Field.Value',\r\n  Visible: 'Field.Settings.Visible',\r\n} as const;\r\n\r\nexport const SettingsFormulaPrefix = FormulaTargets.Disabled.substring(0, FormulaTargets.Disabled.lastIndexOf('.') + 1);\r\n\r\nexport type FormulaTarget = typeof FormulaTargets[keyof typeof FormulaTargets];\r\n\r\nexport type FormulaProps = FormulaPropsV1;\r\n\r\nexport interface FormulaPropsV1 {\r\n  data: FormulaV1Data;\r\n  context: FormulaV1Context;\r\n  experimental: FormulaV1Experimental;\r\n}\r\n\r\nexport interface FormulaV1Data {\r\n  default: FieldValue;\r\n  initial: FieldValue;\r\n  prefill: FieldValue;\r\n  value: FieldValue;\r\n  [fieldName: string]: FieldValue;\r\n}\r\n\r\nexport interface FormulaV1Context {\r\n  cache: Record<string, any>;\r\n  culture: FormulaV1CtxCulture;\r\n  debug: boolean;\r\n  target: FormulaV1CtxTarget;\r\n}\r\n\r\nexport interface FormulaV1CtxCulture {\r\n  code: string;\r\n  name: string;\r\n}\r\n\r\nexport interface FormulaV1CtxTarget {\r\n  entity: FormulaV1CtxTargetEntity;\r\n  name: string;\r\n  type: string;\r\n}\r\n\r\nexport interface FormulaV1CtxTargetEntity {\r\n  guid: string;\r\n  id: number;\r\n}\r\n\r\nexport interface FormulaV1Experimental {\r\n  getEntities(): FormulaV1ExperimentalEntity[];\r\n  getSettings(fieldName: string): FieldSettings;\r\n  getValues(entityGuid: string): FormValues;\r\n}\r\n\r\nexport interface FormulaV1ExperimentalEntity {\r\n  guid: string;\r\n  id: number;\r\n  type: EavType;\r\n}\r\n\r\nexport interface RunFormulasResult {\r\n  settings: FieldSettings;\r\n  value: FieldValue;\r\n}\r\n\r\nexport interface FormulaResult {\r\n  entityGuid: string;\r\n  fieldName: string;\r\n  target: FormulaTarget;\r\n  value: FieldValue;\r\n  isError: boolean;\r\n}\r\n\r\nexport interface DesignerState {\r\n  editMode: boolean;\r\n  entityGuid: string;\r\n  fieldName: string;\r\n  isOpen: boolean;\r\n  target: FormulaTarget;\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Context } from 'projects/ng-dialogs/src/app/shared/services/context';\r\nimport { Observable } from 'rxjs';\r\nimport { filter, share, switchMap } from 'rxjs/operators';\r\nimport { EavService, webApiEditRoot } from '.';\r\nimport { EntityInfo } from '../../../edit-types';\r\n\r\nexport const webApiEntityRoot = 'admin/entity/';\r\nexport const webApiEntityList = 'admin/entity/list';\r\n\r\n@Injectable()\r\nexport class EntityService {\r\n  constructor(private http: HttpClient, private eavService: EavService, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAvailableEntities(contentTypeName: string, entitiesFilter?: string[]): Observable<EntityInfo[]> {\r\n    // eavConfig for edit ui and context for other calls\r\n    const context = this.eavService.eavConfig ?? this.context;\r\n    return this.http.post<EntityInfo[]>(this.dnnContext.$2sxc.http.apiUrl(webApiEditRoot + 'EntityPicker'), entitiesFilter, {\r\n      params: { contentTypeName, appId: context.appId.toString() },\r\n    });\r\n  }\r\n\r\n  // Experimental 2dm\r\n  reactiveEntities(params: Observable<{ contentTypeName: string }>): Observable<EntityInfo[]> {\r\n    return params.pipe(\r\n      filter(p => p != null),\r\n      switchMap(p => this.getAvailableEntities(p.contentTypeName).pipe(share())),\r\n    );\r\n  }\r\n\r\n  delete(contentType: string, entityId: number, force: boolean): Observable<null> {\r\n    return this.http.delete<null>(this.dnnContext.$2sxc.http.apiUrl(webApiEntityRoot + 'delete'), {\r\n      params: { contentType, id: entityId.toString(), appId: this.eavService.eavConfig.appId, force: force.toString() },\r\n    });\r\n  }\r\n}\r\n","export * from './assets.service';\r\nexport * from './eav.service';\r\nexport * from './edit-initializer.service';\r\nexport * from './edit-routing.service';\r\nexport * from './entity.service';\r\nexport * from './fields-settings.service';\r\nexport * from './fields-translate.service';\r\nexport * from './file-type.service';\r\nexport * from './forms-state.service';\r\nexport * from './formula-designer.service';\r\nexport * from './logging.service';\r\nexport * from './load-icons.service';\r\nexport * from './query.service';\r\nexport * from './scripts-loader.service';\r\n","import { Dictionary } from '../../ng-dialogs/src/app/shared/models/dictionary.model';\r\nimport { EavWindow } from '../../ng-dialogs/src/app/shared/models/eav-window.model';\r\nimport { FieldLogicBase } from './field-logic-base';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport class FieldLogicManager {\r\n  private logics: Dictionary<FieldLogicBase> = {};\r\n\r\n  private constructor() { }\r\n\r\n  static singleton(): FieldLogicManager {\r\n    if (window.eavFieldLogicManager == null) {\r\n      window.eavFieldLogicManager = new FieldLogicManager();\r\n    }\r\n    return window.eavFieldLogicManager;\r\n  }\r\n\r\n  /** Add settings logic */\r\n  add(logic: FieldLogicBase): void {\r\n    this.logics[logic.name] = logic;\r\n  }\r\n\r\n  /** Get settings logic for input type */\r\n  get(inputTypeName: string): FieldLogicBase {\r\n    return this.logics[inputTypeName] ?? null;\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, combineLatest, Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { FieldValue, PagePickerResult } from '../../../edit-types';\r\nimport { GeneralHelpers } from '../../shared/helpers';\r\nimport { QueryService } from '../../shared/services';\r\nimport { buildPageSearch, buildPageTree } from './page-picker.helpers';\r\nimport { PageEntity, PagePickerDialogData, PagePickerTemplateVars, PageSearchItem, PageTreeItem } from './page-picker.models';\r\n\r\n@Component({\r\n  selector: 'app-page-picker',\r\n  templateUrl: './page-picker.component.html',\r\n  styleUrls: ['./page-picker.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class PagePickerComponent implements OnInit, OnDestroy {\r\n  selected: number;\r\n  toggled: number[];\r\n  templateVars$: Observable<PagePickerTemplateVars>;\r\n\r\n  private filterText$: BehaviorSubject<string>;\r\n  private searchItems$: BehaviorSubject<PageSearchItem[]>;\r\n  private tree$: BehaviorSubject<PageTreeItem[]>;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) private dialogData: PagePickerDialogData,\r\n    private dialogRef: MatDialogRef<PagePickerComponent>,\r\n    private queryService: QueryService,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.selected = this.parseSelectedPageId();\r\n    this.toggled = [];\r\n    this.filterText$ = new BehaviorSubject('');\r\n    this.searchItems$ = new BehaviorSubject([]);\r\n    this.tree$ = new BehaviorSubject([]);\r\n\r\n    const filteredSearch$ = combineLatest([this.filterText$, this.searchItems$]).pipe(\r\n      map(([filterText, searchItems]) =>\r\n        searchItems.filter(item => item.name.toLocaleLowerCase().includes(filterText.toLocaleLowerCase()))\r\n      ),\r\n    );\r\n    this.templateVars$ = combineLatest([this.filterText$, filteredSearch$, this.tree$]).pipe(\r\n      map(([filterText, filteredSearch, tree]) => {\r\n        const templateVars: PagePickerTemplateVars = {\r\n          filterText,\r\n          filteredSearch,\r\n          tree,\r\n        };\r\n        return templateVars;\r\n      }),\r\n    );\r\n\r\n    this.fetchPages();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.filterText$.complete();\r\n    this.searchItems$.complete();\r\n    this.tree$.complete();\r\n  }\r\n\r\n  setFilter(filterText: string): void {\r\n    this.filterText$.next(filterText);\r\n  }\r\n\r\n  select(pageId: number): void {\r\n    // filters out pages without parent (broken)\r\n    if (pageId == null) { return; }\r\n    this.closeDialog(pageId);\r\n  }\r\n\r\n  toggle(pageId: number): void {\r\n    GeneralHelpers.toggleInArray(pageId, this.toggled);\r\n  }\r\n\r\n  private closeDialog(pageId?: number): void {\r\n    if (pageId == null) {\r\n      this.dialogRef.close();\r\n      return;\r\n    }\r\n\r\n    const page = this.searchItems$.value.find(i => i.id === pageId);\r\n    const result: PagePickerResult = {\r\n      id: page.id.toString(),\r\n      name: page.name,\r\n    };\r\n    this.dialogRef.close(result);\r\n  }\r\n\r\n  private fetchPages(): void {\r\n    const query = 'Eav.Queries.Global.Pages';\r\n    const stream = 'Default';\r\n    this.queryService.getAvailableEntities(`${query}/${stream}`, true, null, null).subscribe({\r\n      next: (data) => {\r\n        if (!data) {\r\n          console.error(this.translate.instant('Fields.EntityQuery.QueryError'));\r\n          return;\r\n        }\r\n        if (!data[stream]) {\r\n          console.error(this.translate.instant('Fields.EntityQuery.QueryStreamNotFound') + stream);\r\n          return;\r\n        }\r\n        const pages = data[stream] as PageEntity[];\r\n        const searchItems = buildPageSearch(pages);\r\n        this.searchItems$.next(searchItems);\r\n        const tree = buildPageTree(pages);\r\n        this.tree$.next(tree);\r\n      },\r\n      error: (error) => {\r\n        console.error(error);\r\n        console.error(`${this.translate.instant('Fields.EntityQuery.QueryError')} - ${error.data}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  private parseSelectedPageId(): number {\r\n    const prefix = 'page:';\r\n    let fieldValue: FieldValue = this.dialogData.group.controls[this.dialogData.config.fieldName].value;\r\n    if (typeof fieldValue !== 'string') { return; }\r\n\r\n    fieldValue = fieldValue.trim().toLocaleLowerCase();\r\n    if (!fieldValue.startsWith(prefix)) { return; }\r\n\r\n    try {\r\n      const id = parseInt(fieldValue.split(prefix)[1], 10);\r\n      return id;\r\n    } catch {\r\n      return;\r\n    }\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, combineLatest, Observable, Subscription } from 'rxjs';\r\nimport { distinctUntilChanged, filter, map } from 'rxjs/operators';\r\nimport { EavService, EditInitializerService, LoggingService } from '.';\r\nimport { FieldSettings, FieldValue } from '../../../edit-types';\r\nimport { InputType } from '../../../ng-dialogs/src/app/content-type-fields/models/input-type.model';\r\nimport { FormValues } from '../../eav-item-dialog/item-edit-form/item-edit-form.models';\r\nimport { ValidationHelper } from '../../eav-material-controls/validators/validation-helper';\r\nimport { FieldLogicManager } from '../../field-logic/field-logic-manager';\r\nimport { FieldsSettingsHelpers, FormulaHelpers, GeneralHelpers, InputFieldHelpers, LocalizationHelpers } from '../helpers';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ContentTypeSettings, FieldsProps, FormulaCacheItem, FormulaFunctionDefault, FormulaTargets, FormulaVersions, LogSeverities, RunFormulasResult, SettingsFormulaPrefix, TranslationState } from '../models';\r\nimport { EavHeader } from '../models/eav';\r\nimport { ContentTypeService, GlobalConfigService, InputTypeService, ItemService, LanguageInstanceService, LanguageService } from '../store/ngrx-data';\r\nimport { FormulaDesignerService } from './formula-designer.service';\r\n\r\n@Injectable()\r\nexport class FieldsSettingsService implements OnDestroy {\r\n  private contentTypeSettings$: BehaviorSubject<ContentTypeSettings>;\r\n  private fieldsProps$: BehaviorSubject<FieldsProps>;\r\n  private forceSettings$: BehaviorSubject<void>;\r\n  private subscription: Subscription;\r\n  private valueFormulaCounter = 0;\r\n  private maxValueFormulaCycles = 5;\r\n  private formulaSettingsCache: Record<string, FieldSettings> = {};\r\n\r\n  constructor(\r\n    private contentTypeService: ContentTypeService,\r\n    private languageInstanceService: LanguageInstanceService,\r\n    private eavService: EavService,\r\n    private itemService: ItemService,\r\n    private inputTypeService: InputTypeService,\r\n    private languageService: LanguageService,\r\n    private formulaDesignerService: FormulaDesignerService,\r\n    private loggingService: LoggingService,\r\n    private translate: TranslateService,\r\n    private globalConfigService: GlobalConfigService,\r\n    private editInitializerService: EditInitializerService,\r\n  ) { }\r\n\r\n  ngOnDestroy(): void {\r\n    this.contentTypeSettings$?.complete();\r\n    this.fieldsProps$?.complete();\r\n    this.forceSettings$?.complete();\r\n    this.subscription?.unsubscribe();\r\n  }\r\n\r\n  init(entityGuid: string): void {\r\n    this.subscription = new Subscription();\r\n    this.contentTypeSettings$ = new BehaviorSubject(null);\r\n    this.fieldsProps$ = new BehaviorSubject(null);\r\n    this.forceSettings$ = new BehaviorSubject(null);\r\n\r\n    const item = this.itemService.getItem(entityGuid);\r\n    const entityId = item.Entity.Id;\r\n    const contentTypeId = InputFieldHelpers.getContentTypeId(item);\r\n    const contentType$ = this.contentTypeService.getContentType$(contentTypeId);\r\n    const itemHeader$ = this.itemService.getItemHeader$(entityGuid);\r\n    const currentLanguage$ = this.languageInstanceService.getCurrentLanguage$(this.eavService.eavConfig.formId);\r\n    const defaultLanguage$ = this.languageInstanceService.getDefaultLanguage$(this.eavService.eavConfig.formId);\r\n\r\n    this.subscription.add(\r\n      combineLatest([contentType$, itemHeader$, currentLanguage$, defaultLanguage$]).pipe(\r\n        map(([contentType, itemHeader, currentLanguage, defaultLanguage]) => {\r\n          const ctSettings = FieldsSettingsHelpers.setDefaultContentTypeSettings(\r\n            FieldsSettingsHelpers.mergeSettings<ContentTypeSettings>(contentType.Metadata, currentLanguage, defaultLanguage),\r\n            contentType,\r\n            currentLanguage,\r\n            defaultLanguage,\r\n            itemHeader,\r\n          );\r\n          return ctSettings;\r\n        }),\r\n      ).subscribe(ctSettings => {\r\n        this.contentTypeSettings$.next(ctSettings);\r\n      })\r\n    );\r\n\r\n    const itemAttributes$ = this.itemService.getItemAttributes$(entityGuid);\r\n    const inputTypes$ = this.inputTypeService.getInputTypes$();\r\n    this.subscription.add(\r\n      combineLatest([\r\n        combineLatest([contentType$, currentLanguage$, defaultLanguage$, itemAttributes$, itemHeader$, inputTypes$]),\r\n        combineLatest([this.forceSettings$]),\r\n      ]).pipe(\r\n        map(([\r\n          [contentType, currentLanguage, defaultLanguage, itemAttributes, itemHeader, inputTypes],\r\n          [forceSettings],\r\n        ]) => {\r\n          const formValues: FormValues = {};\r\n          for (const [fieldName, fieldValues] of Object.entries(itemAttributes)) {\r\n            formValues[fieldName] = LocalizationHelpers.translate(currentLanguage, defaultLanguage, fieldValues, null);\r\n          }\r\n\r\n          const fieldsProps: FieldsProps = {};\r\n          const formulaUpdates: FormValues = {};\r\n          for (const attribute of contentType.Attributes) {\r\n            const attributeValues = itemAttributes[attribute.Name];\r\n            // empty-default has no value\r\n            const value = formValues[attribute.Name];\r\n            // custom-default has no inputType\r\n            const inputType = inputTypes.find(i => i.Type === attribute.InputType);\r\n\r\n            const merged = FieldsSettingsHelpers.setDefaultFieldSettings(\r\n              FieldsSettingsHelpers.mergeSettings<FieldSettings>(attribute.Metadata, defaultLanguage, defaultLanguage),\r\n            );\r\n\r\n            // run formulas\r\n            const formulaResult = this.runFormulas(entityGuid, entityId, attribute.Name, formValues, inputType, merged, itemHeader);\r\n            const calculated = formulaResult.settings;\r\n            const formulaValue = formulaResult.value;\r\n\r\n            // special fixes\r\n            calculated.Name = calculated.Name || attribute.Name;\r\n            calculated.Required = ValidationHelper.isRequired(calculated);\r\n            calculated.DisableTranslation = FieldsSettingsHelpers.findDisableTranslation(\r\n              inputType, attributeValues, defaultLanguage, attribute.Metadata,\r\n            );\r\n            const slotIsEmpty = itemHeader.Group?.SlotCanBeEmpty && itemHeader.Group?.SlotIsEmpty;\r\n            calculated.DisableTranslation = slotIsEmpty || calculated.DisableTranslation;\r\n            calculated.Disabled = slotIsEmpty || calculated.Disabled;\r\n            const disabledBecauseTranslations = FieldsSettingsHelpers.getDisabledBecauseTranslations(\r\n              attributeValues, calculated.DisableTranslation, currentLanguage, defaultLanguage,\r\n            );\r\n            calculated.Disabled = disabledBecauseTranslations || calculated.Disabled;\r\n            // update settings with respective FieldLogics\r\n            const logic = FieldLogicManager.singleton().get(attribute.InputType);\r\n            const fixed = logic?.update(calculated, value) ?? calculated;\r\n\r\n            // important to compare with undefined because null is allowed value\r\n            if (!slotIsEmpty && !disabledBecauseTranslations && value !== undefined && formulaValue !== undefined) {\r\n              let valuesNotEqual = value !== formulaValue;\r\n              // do a more in depth comparisson in case of calculated entity fields\r\n              if (valuesNotEqual && Array.isArray(value) && Array.isArray(formulaValue)) {\r\n                valuesNotEqual = !GeneralHelpers.arraysEqual(value as string[], formulaValue as string[]);\r\n              }\r\n              if (valuesNotEqual) {\r\n                formulaUpdates[attribute.Name] = formulaValue;\r\n              }\r\n            }\r\n\r\n            const calculatedInputType = InputFieldHelpers.calculateInputType(attribute, inputTypes);\r\n            const wrappers = InputFieldHelpers.getWrappers(fixed, calculatedInputType);\r\n            const initialSettings = FieldsSettingsHelpers.setDefaultFieldSettings(\r\n              FieldsSettingsHelpers.mergeSettings<FieldSettings>(attribute.Metadata, this.eavService.eavConfig.lang, defaultLanguage),\r\n            );\r\n            const initialDisabled = initialSettings.Disabled ?? false;\r\n            const fieldTranslation = FieldsSettingsHelpers.getTranslationState(\r\n              attributeValues, fixed.DisableTranslation, currentLanguage, defaultLanguage,\r\n            );\r\n\r\n            fieldsProps[attribute.Name] = {\r\n              calculatedInputType,\r\n              constants: {\r\n                angularAssets: inputType?.AngularAssets,\r\n                contentTypeId,\r\n                entityGuid,\r\n                fieldName: attribute.Name,\r\n                index: contentType.Attributes.indexOf(attribute),\r\n                initialDisabled,\r\n                inputType: calculatedInputType.inputType,\r\n                isExternal: calculatedInputType.isExternal,\r\n                isLastInGroup: FieldsSettingsHelpers.findIsLastInGroup(contentType, attribute),\r\n                type: attribute.Type,\r\n              },\r\n              settings: fixed,\r\n              translationState: fieldTranslation,\r\n              value,\r\n              wrappers,\r\n            };\r\n          }\r\n\r\n          if (Object.keys(formulaUpdates).length > 0 && this.maxValueFormulaCycles > this.valueFormulaCounter) {\r\n            this.valueFormulaCounter++;\r\n            this.itemService.updateItemAttributesValues(entityGuid, formulaUpdates, currentLanguage, defaultLanguage);\r\n            return;\r\n          }\r\n          this.valueFormulaCounter = 0;\r\n          return fieldsProps;\r\n        }),\r\n        filter(fieldsProps => !!fieldsProps),\r\n      ).subscribe(fieldsProps => {\r\n        this.fieldsProps$.next(fieldsProps);\r\n      })\r\n    );\r\n  }\r\n\r\n  getContentTypeSettings(): ContentTypeSettings {\r\n    return this.contentTypeSettings$.value;\r\n  }\r\n\r\n  getContentTypeSettings$(): Observable<ContentTypeSettings> {\r\n    return this.contentTypeSettings$.asObservable();\r\n  }\r\n\r\n  getFieldsProps(): FieldsProps {\r\n    return this.fieldsProps$.value;\r\n  }\r\n\r\n  getFieldsProps$(): Observable<FieldsProps> {\r\n    return this.fieldsProps$.asObservable();\r\n  }\r\n\r\n  getFieldSettings(fieldName: string): FieldSettings {\r\n    return this.fieldsProps$.value[fieldName].settings;\r\n  }\r\n\r\n  getFieldSettings$(fieldName: string): Observable<FieldSettings> {\r\n    return this.fieldsProps$.pipe(\r\n      map(fieldsSettings => fieldsSettings[fieldName].settings),\r\n      distinctUntilChanged(GeneralHelpers.objectsEqual),\r\n    );\r\n  }\r\n\r\n  getTranslationState$(fieldName: string): Observable<TranslationState> {\r\n    return this.fieldsProps$.pipe(\r\n      map(fieldsSettings => fieldsSettings[fieldName].translationState),\r\n      distinctUntilChanged(GeneralHelpers.objectsEqual),\r\n    );\r\n  }\r\n\r\n  forceSettings(): void {\r\n    this.forceSettings$.next();\r\n  }\r\n\r\n  private runFormulas(\r\n    entityGuid: string,\r\n    entityId: number,\r\n    fieldName: string,\r\n    formValues: FormValues,\r\n    inputType: InputType,\r\n    settings: FieldSettings,\r\n    itemHeader: EavHeader,\r\n  ): RunFormulasResult {\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n\r\n    const previousSettings: FieldSettings = {\r\n      ...settings,\r\n      ...this.formulaSettingsCache[this.getFormulaSettingsKey(fieldName, currentLanguage, defaultLanguage)],\r\n    };\r\n\r\n    const formulas = this.formulaDesignerService.getFormulas(entityGuid, fieldName, null, false);\r\n    let formulaValue: FieldValue;\r\n    const formulaSettings: Record<string, any> = {};\r\n    for (const formula of formulas) {\r\n      const runResult = this.runFormula(formula, entityId, formValues, inputType, settings, previousSettings, itemHeader);\r\n      if (runResult === undefined) { continue; }\r\n\r\n      if (formula.target === FormulaTargets.Value) {\r\n        formulaValue = runResult;\r\n        continue;\r\n      }\r\n\r\n      if (formula.target.startsWith(SettingsFormulaPrefix)) {\r\n        const settingName = formula.target.substring(SettingsFormulaPrefix.length);\r\n        const defaultSetting = (settings as Record<string, any>)[settingName];\r\n\r\n        if (defaultSetting == null || runResult == null) {\r\n          // can't check types, hope for the best\r\n          formulaSettings[settingName] = runResult;\r\n          continue;\r\n        }\r\n\r\n        if (Array.isArray(defaultSetting) && Array.isArray(runResult)) {\r\n          // can't check types of items in array, hope for the best\r\n          formulaSettings[settingName] = runResult;\r\n          continue;\r\n        }\r\n\r\n        if (typeof defaultSetting === typeof runResult) {\r\n          // maybe typesafe\r\n          formulaSettings[settingName] = runResult;\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n\r\n    // save settings for the next cycle\r\n    this.formulaSettingsCache[this.getFormulaSettingsKey(fieldName, currentLanguage, defaultLanguage)] = formulaSettings as FieldSettings;\r\n\r\n    const formulaResult: RunFormulasResult = {\r\n      settings: {\r\n        ...settings,\r\n        ...formulaSettings,\r\n      },\r\n      value: formulaValue,\r\n    };\r\n    return formulaResult;\r\n  }\r\n\r\n  private getFormulaSettingsKey(fieldName: string, currentLanguage: string, defaultLanguage: string): string {\r\n    return `fieldName:${fieldName}:currentLanguage:${currentLanguage}:defaultLanguage:${defaultLanguage}`;\r\n  }\r\n\r\n  private runFormula(\r\n    formula: FormulaCacheItem,\r\n    entityId: number,\r\n    formValues: FormValues,\r\n    inputType: InputType,\r\n    settings: FieldSettings,\r\n    previousSettings: FieldSettings,\r\n    itemHeader: EavHeader,\r\n  ): FieldValue {\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n    const languages = this.languageService.getLanguages();\r\n    const debugEnabled = this.globalConfigService.getDebugEnabled();\r\n    const initialFormValues = this.editInitializerService.getInitialValues(formula.entityGuid, currentLanguage);\r\n    const formulaProps = FormulaHelpers.buildFormulaProps(\r\n      formula,\r\n      entityId,\r\n      inputType,\r\n      settings,\r\n      previousSettings,\r\n      formValues,\r\n      initialFormValues,\r\n      currentLanguage,\r\n      defaultLanguage,\r\n      languages,\r\n      itemHeader,\r\n      debugEnabled,\r\n      this.itemService,\r\n      this.eavService,\r\n      this,\r\n    );\r\n    const designerState = this.formulaDesignerService.getDesignerState();\r\n    const isOpenInDesigner = designerState.isOpen\r\n      && designerState.entityGuid === formula.entityGuid\r\n      && designerState.fieldName === formula.fieldName\r\n      && designerState.target === formula.target;\r\n    const ctSettings = this.getContentTypeSettings();\r\n    try {\r\n      switch (formula.version) {\r\n        case FormulaVersions.V1:\r\n          if (isOpenInDesigner) {\r\n            console.log(`Running formula${FormulaVersions.V1.toLocaleUpperCase()} for Entity: \"${ctSettings._itemTitle}\", Field: \"${formula.fieldName}\", Target: \"${formula.target}\" with following arguments:`, formulaProps);\r\n          }\r\n          const valueV1 = formula.fn(formulaProps.data, formulaProps.context, formulaProps.experimental);\r\n          this.formulaDesignerService.upsertFormulaResult(formula.entityGuid, formula.fieldName, formula.target, valueV1, false);\r\n          if (isOpenInDesigner) {\r\n            console.log('Formula result:', valueV1);\r\n          }\r\n          return valueV1;\r\n        default:\r\n          if (isOpenInDesigner) {\r\n            console.log(`Running formula for Entity: \"${ctSettings._itemTitle}\", Field: \"${formula.fieldName}\", Target: \"${formula.target}\" with following arguments:`, undefined);\r\n          }\r\n          const valueDefault = (formula.fn as FormulaFunctionDefault)();\r\n          this.formulaDesignerService.upsertFormulaResult(formula.entityGuid, formula.fieldName, formula.target, valueDefault, false);\r\n          if (isOpenInDesigner) {\r\n            console.log('Formula result:', valueDefault);\r\n          }\r\n          return valueDefault;\r\n      }\r\n    } catch (error) {\r\n      const errorLabel = `Error in formula calculation for Entity: \"${ctSettings._itemTitle}\", Field: \"${formula.fieldName}\", Target: \"${formula.target}\"`;\r\n      this.formulaDesignerService.upsertFormulaResult(formula.entityGuid, formula.fieldName, formula.target, undefined, true);\r\n      this.loggingService.addLog(LogSeverities.Error, errorLabel, error);\r\n      if (isOpenInDesigner) {\r\n        console.error(errorLabel, error);\r\n      } else {\r\n        this.loggingService.showMessage(this.translate.instant('Errors.FormulaCalculation'), 2000);\r\n      }\r\n    }\r\n  }\r\n}\r\n","export enum BestValueModes {\r\n  Default = 'Default',\r\n  Strict = 'Strict',\r\n}\r\n\r\nexport type BestValueMode = keyof typeof BestValueModes;\r\n","import { EavEntity, EavHeader } from '.';\r\nimport { Item1 } from '../json-format-v1';\r\n\r\nexport class EavItem {\r\n  Entity: EavEntity;\r\n  Header: EavHeader;\r\n\r\n  static convert(item1: Item1): EavItem {\r\n    const entity = EavEntity.convertOne(item1.Entity);\r\n\r\n    const item: EavItem = {\r\n      Entity: entity,\r\n      Header: item1.Header,\r\n    };\r\n    return item;\r\n  }\r\n}\r\n","export * from './dropzone-dragging.helper';\r\nexport * from './field-mask.helper';\r\nexport * from './fields-settings.helpers';\r\nexport * from './formula.helpers';\r\nexport * from './general.helpers';\r\nexport * from './input-field.helpers';\r\nexport * from './localization.helpers';\r\nexport * from './page-picker.helper';\r\nexport * from './url.helpers';\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16z\\\"/></svg>\";","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport { QueryEntity } from '../../../eav-material-controls/input-types/entity/entity-query/entity-query.models';\r\nimport { GeneralHelpers } from '../../helpers';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class StringQueryCacheService extends BaseDataService<QueryEntity> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('StringQueryCache', serviceElementsFactory);\r\n  }\r\n\r\n  loadEntities(entities: QueryEntity[]): void {\r\n    if (entities == null) { return; }\r\n    this.upsertManyInCache(entities);\r\n  }\r\n\r\n  getEntities$(guids?: string[]): Observable<QueryEntity[]> {\r\n    if (guids == null) {\r\n      return this.cache$.asObservable();\r\n    }\r\n\r\n    return this.cache$.pipe(\r\n      map(entities => entities.filter(entity => guids.includes(entity.Guid))),\r\n      distinctUntilChanged(GeneralHelpers.arraysEqual),\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { BaseDataService } from '.';\r\nimport { Feature } from '../../../../ng-dialogs/src/app/apps-management/models/feature.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class FeatureService extends BaseDataService<Feature> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('Feature', serviceElementsFactory);\r\n  }\r\n\r\n  loadFeatures(features: Feature[]): void {\r\n    this.addAllToCache(features);\r\n  }\r\n\r\n  isFeatureEnabled(guid: string): boolean {\r\n    return this.cache$.value.find(feature => feature.id === guid)?.enabled ?? false;\r\n  }\r\n}\r\n","import { Dictionary } from '../../../../ng-dialogs/src/app/shared/models/dictionary.model';\r\nimport { TranslationLinkConstants } from '../../../shared/constants';\r\n\r\nexport class TranslateMenuHelpers {\r\n\r\n  static getTranslationStateClass(linkType: string) {\r\n    switch (linkType) {\r\n      case TranslationLinkConstants.MissingDefaultLangValue:\r\n        return 'localization-missing-default-lang-value';\r\n      case TranslationLinkConstants.Translate:\r\n      case TranslationLinkConstants.LinkCopyFrom:\r\n        return 'localization-translate';\r\n      case TranslationLinkConstants.DontTranslate:\r\n        return '';\r\n      case TranslationLinkConstants.LinkReadOnly:\r\n        return 'localization-link-read-only';\r\n      case TranslationLinkConstants.LinkReadWrite:\r\n        return 'localization-link-read-write';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  static calculateSharedInfoMessage(dimensions: string[], currentLanguage: string): string {\r\n    dimensions = TranslateMenuHelpers.calculateShortDimensions(dimensions, currentLanguage);\r\n    const result = TranslateMenuHelpers.calculateEditAndReadDimensions(dimensions);\r\n    const editableDimensions = result.editableDimensions;\r\n    const readOnlyDimensions = result.readOnlyDimensions;\r\n    let infoMessage = '';\r\n\r\n    const editableExist = editableDimensions.length > 0;\r\n    const readOnlyExist = readOnlyDimensions.length > 0;\r\n    if (editableExist && readOnlyExist) {\r\n      infoMessage = `${editableDimensions.join(', ')}, (${readOnlyDimensions.join(', ')})`;\r\n    } else if (editableExist) {\r\n      infoMessage = editableDimensions.join(', ');\r\n    } else if (readOnlyExist) {\r\n      infoMessage = `(${readOnlyDimensions.join(', ')})`;\r\n    }\r\n\r\n    return infoMessage;\r\n  }\r\n\r\n  private static calculateShortDimensions(dimensions: string[], currentLanguage: string): string[] {\r\n    const dimensionsMap: Dictionary<string[]> = {};\r\n    const shortCurrentLanguage = currentLanguage.slice(0, currentLanguage.indexOf('-'));\r\n\r\n    dimensionsMap[shortCurrentLanguage] = [];\r\n    dimensionsMap[shortCurrentLanguage].push(shortCurrentLanguage);\r\n\r\n    dimensions.forEach(dimension => {\r\n      const shortDimension = dimension.slice(0, dimension.indexOf('-'));\r\n      const shortNoReadOnly = shortDimension.replace('~', '');\r\n\r\n      if (!dimensionsMap[shortNoReadOnly]) {\r\n        dimensionsMap[shortNoReadOnly] = [];\r\n        dimensionsMap[shortNoReadOnly].push(dimension);\r\n      } else {\r\n        dimensionsMap[shortNoReadOnly].push(dimension);\r\n      }\r\n    });\r\n\r\n    dimensions = dimensions.map(dimension => {\r\n      const shortDimension = dimension.slice(0, dimension.indexOf('-'));\r\n      const shortNoReadOnly = shortDimension.replace('~', '');\r\n\r\n      if (dimensionsMap[shortNoReadOnly].length > 1) {\r\n        return dimension;\r\n      } else {\r\n        return shortDimension;\r\n      }\r\n    });\r\n\r\n    return dimensions;\r\n  }\r\n\r\n  private static calculateEditAndReadDimensions(dimensions: string[]) {\r\n    const editableDimensions: string[] = [];\r\n    const readOnlyDimensions: string[] = [];\r\n\r\n    dimensions.forEach(dimension => {\r\n      if (!dimension.includes('~')) {\r\n        editableDimensions.push(dimension);\r\n      } else {\r\n        readOnlyDimensions.push(dimension.replace('~', ''));\r\n      }\r\n    });\r\n\r\n    return {\r\n      editableDimensions,\r\n      readOnlyDimensions\r\n    };\r\n  }\r\n}\r\n","import codeCurly from '!raw-loader!./assets/icons/code-curly.svg';\r\nimport star from '!raw-loader!./assets/icons/star-24px.svg';\r\nimport { Context as DnnContext, DnnAppComponent } from '@2sic.com/dnn-sxc-angular';\r\nimport { ChangeDetectionStrategy, Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatIconRegistry } from '@angular/material/icon';\r\nimport { DomSanitizer, Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter, map } from 'rxjs/operators';\r\nimport { keyContentBlockId, keyModuleId } from './shared/constants/session.constants';\r\nimport { Dictionary } from './shared/models/dictionary.model';\r\nimport { Context } from './shared/services/context';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class AppComponent extends DnnAppComponent implements OnInit, OnDestroy {\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    el: ElementRef,\r\n    dnnContext: DnnContext,\r\n    private context: Context,\r\n    private titleService: Title,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute,\r\n    private matIconRegistry: MatIconRegistry,\r\n    private domSanitizer: DomSanitizer,\r\n  ) {\r\n    super(\r\n      el,\r\n      dnnContext.preConfigure({\r\n        moduleId: parseInt(sessionStorage.getItem(keyModuleId), 10),\r\n        contentBlockId: parseInt(sessionStorage.getItem(keyContentBlockId), 10),\r\n      }),\r\n    );\r\n    this.context.initRoot();\r\n    this.loadFonts();\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Mostly copied from https://blog.bitsrc.io/dynamic-page-titles-in-angular-98ce20b5c334\r\n    // Routes need a data: { title: '...' } for this to work\r\n    const appTitle = this.titleService.getTitle(); // initial title when loading the page\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        map(() => {\r\n          let child = this.activatedRoute.firstChild;\r\n          while (child.firstChild) {\r\n            child = child.firstChild;\r\n          }\r\n          if (child.snapshot.data['title']) {\r\n            return child.snapshot.data['title'];\r\n          }\r\n          return appTitle;\r\n        }),\r\n      ).subscribe((title: string) => {\r\n        this.titleService.setTitle(title);\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  private loadFonts() {\r\n    this.matIconRegistry.setDefaultFontSetClass('material-icons-outlined');\r\n\r\n    const icons: Dictionary<string> = {\r\n      star,\r\n      'code-curly': codeCurly,\r\n    };\r\n    Object.entries(icons).forEach(([name, svg]) => {\r\n      this.matIconRegistry.addSvgIconLiteral(name, this.domSanitizer.bypassSecurityTrustHtml(svg));\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport { FieldSettings, FieldValue } from '../../../../edit-types';\r\nimport { InputType } from '../../../../ng-dialogs/src/app/content-type-fields/models/input-type.model';\r\nimport { FormValues } from '../../../eav-item-dialog/item-edit-form/item-edit-form.models';\r\nimport { BestValueModes } from '../../constants/localization.constants';\r\nimport { GeneralHelpers, InputFieldHelpers, LocalizationHelpers } from '../../helpers';\r\nimport { Language, SaveResult } from '../../models';\r\nimport { EavContentTypeAttribute, EavDimension, EavEntityAttributes, EavHeader, EavItem, EavValue } from '../../models/eav';\r\nimport { Item1 } from '../../models/json-format-v1';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ItemService extends BaseDataService<EavItem> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('Item', serviceElementsFactory);\r\n  }\r\n\r\n  loadItems(items1: Item1[]): void {\r\n    const items = items1.map(item1 => EavItem.convert(item1));\r\n    this.upsertManyInCache(items);\r\n  }\r\n\r\n  updateItemId(itemData: SaveResult): void {\r\n    const entityGuid = Object.keys(itemData)[0];\r\n    const entityId = itemData[entityGuid];\r\n    const oldItem = this.cache$.value.find(item => item.Entity.Guid === entityGuid);\r\n    if (!oldItem || (oldItem.Header.EntityId !== 0 && oldItem.Entity.Id !== 0)) { return; }\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Header: {\r\n        ...oldItem.Header,\r\n        EntityId: entityId,\r\n      },\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Id: entityId,\r\n      }\r\n    };\r\n    this.updateOneInCache(newItem);\r\n  }\r\n\r\n  addItemAttributeValue(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    newValue: FieldValue,\r\n    currentLanguage: string,\r\n    isReadOnly: boolean,\r\n    attributeType: string,\r\n    isTransaction = false,\r\n    transactionItem?: EavItem,\r\n  ): EavItem {\r\n    const newValueDimension = isReadOnly ? `~${currentLanguage}` : currentLanguage;\r\n    const newEavValue = EavValue.create(newValue, [EavDimension.create(newValueDimension)]);\r\n    const oldItem = transactionItem ?? this.cache$.value.find(item => item.Entity.Guid === entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: LocalizationHelpers.addAttributeValue(oldItem.Entity.Attributes, newEavValue, attributeKey, attributeType),\r\n      }\r\n    };\r\n\r\n    if (!isTransaction) { this.updateOneInCache(newItem); }\r\n    return newItem;\r\n  }\r\n\r\n  updateItemAttributeValue(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    newValue: FieldValue,\r\n    currentLanguage: string,\r\n    defaultLanguage: string,\r\n    isReadOnly: boolean,\r\n  ): void {\r\n    const oldItem = this.cache$.value.find(item => item.Entity.Guid === entityGuid);\r\n    if (!oldItem) { return; }\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: LocalizationHelpers.updateAttributeValue(\r\n          oldItem.Entity.Attributes, attributeKey, newValue, currentLanguage, defaultLanguage, isReadOnly,\r\n        ),\r\n      }\r\n    };\r\n    this.updateOneInCache(newItem);\r\n  }\r\n\r\n  updateItemAttributesValues(entityGuid: string, newValues: FormValues, currentLanguage: string, defaultLanguage: string): void {\r\n    const oldItem = this.cache$.value.find(item => item.Entity.Guid === entityGuid);\r\n    if (!oldItem) { return; }\r\n\r\n    const oldValues: FormValues = {};\r\n    for (const [name, values] of Object.entries(oldItem.Entity.Attributes)) {\r\n      if (!newValues.hasOwnProperty(name)) { continue; }\r\n      oldValues[name] = LocalizationHelpers.translate(currentLanguage, defaultLanguage, values, null);\r\n    }\r\n    const changes = GeneralHelpers.getFormChanges(oldValues, newValues);\r\n    if (changes == null) { return; }\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: LocalizationHelpers.updateAttributesValues(oldItem.Entity.Attributes, changes, currentLanguage, defaultLanguage),\r\n      }\r\n    };\r\n    this.updateOneInCache(newItem);\r\n  }\r\n\r\n  /**\r\n   * Update entity attribute dimension. Add readonly languageKey to existing useFromLanguageKey.\r\n   * Example to useFrom en-us add fr-fr = \"en-us,-fr-fr\"\r\n   */\r\n  addItemAttributeDimension(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    currentLanguage: string,\r\n    shareWithLanguage: string,\r\n    defaultLanguage: string,\r\n    isReadOnly: boolean,\r\n    transactionItem?: EavItem,\r\n  ): void {\r\n    const oldItem = transactionItem ?? this.cache$.value.find(item => item.Entity.Guid === entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: LocalizationHelpers.addAttributeDimension(\r\n          oldItem.Entity.Attributes, attributeKey, currentLanguage, shareWithLanguage, defaultLanguage, isReadOnly,\r\n        ),\r\n      }\r\n    };\r\n    this.updateOneInCache(newItem);\r\n  }\r\n\r\n  removeItemAttributeDimension(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    currentLanguage: string,\r\n    isTransaction = false,\r\n    transactionItem?: EavItem,\r\n  ): EavItem {\r\n    const oldItem = transactionItem ?? this.cache$.value.find(item => item.Entity.Guid === entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: LocalizationHelpers.removeAttributeDimension(oldItem.Entity.Attributes, attributeKey, currentLanguage),\r\n      }\r\n    };\r\n\r\n    if (!isTransaction) { this.updateOneInCache(newItem); }\r\n    return newItem;\r\n  }\r\n\r\n  updateItemHeader(entityGuid: string, header: EavHeader): void {\r\n    const oldItem = this.cache$.value.find(item => item.Entity.Guid === entityGuid);\r\n    if (!oldItem) { return; }\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Header: {\r\n        ...header\r\n      }\r\n    };\r\n    this.updateOneInCache(newItem);\r\n  }\r\n\r\n  getItemAttributes(entityGuid: string): EavEntityAttributes {\r\n    return this.cache$.value.find(item => item.Entity.Guid === entityGuid)?.Entity.Attributes;\r\n  }\r\n\r\n  getItemAttributes$(entityGuid: string): Observable<EavEntityAttributes> {\r\n    return this.cache$.pipe(\r\n      map(items => items.find(item => item.Entity.Guid === entityGuid)?.Entity.Attributes),\r\n      distinctUntilChanged(),\r\n    );\r\n  }\r\n\r\n  getItem(entityGuid: string): EavItem {\r\n    return this.cache$.value.find(item => item.Entity.Guid === entityGuid);\r\n  }\r\n\r\n  getItem$(entityGuid: string): Observable<EavItem> {\r\n    return this.cache$.pipe(\r\n      map(items => items.find(item => item.Entity.Guid === entityGuid)),\r\n      distinctUntilChanged(),\r\n    );\r\n  }\r\n\r\n  getItemHeader$(entityGuid: string): Observable<EavHeader> {\r\n    return this.cache$.pipe(\r\n      map(items => items.find(item => item.Entity.Guid === entityGuid)?.Header),\r\n      distinctUntilChanged(),\r\n    );\r\n  }\r\n\r\n  getItems(entityGuids?: string[]): EavItem[] {\r\n    if (entityGuids == null) { return this.cache$.value; }\r\n\r\n    return this.cache$.value.filter(item => entityGuids.includes(item.Entity.Guid));\r\n  }\r\n\r\n  getItems$(entityGuids?: string[]): Observable<EavItem[]> {\r\n    if (entityGuids == null) { return this.cache$.asObservable(); }\r\n\r\n    return this.cache$.pipe(\r\n      map(items => items.filter(item => entityGuids.includes(item.Entity.Guid))),\r\n      distinctUntilChanged(GeneralHelpers.arraysEqual),\r\n    );\r\n  }\r\n\r\n  setDefaultValue(\r\n    item: EavItem,\r\n    ctAttribute: EavContentTypeAttribute,\r\n    inputType: InputType,\r\n    settings: FieldSettings,\r\n    languages: Language[],\r\n    defaultLanguage: string,\r\n  ): void {\r\n    const defaultValue = InputFieldHelpers.parseDefaultValue(ctAttribute.Name, inputType, settings, item.Header);\r\n\r\n    const defaultLanguageValue = LocalizationHelpers.getBestValue(\r\n      item.Entity.Attributes[ctAttribute.Name],\r\n      defaultLanguage,\r\n      defaultLanguage,\r\n      BestValueModes.Strict,\r\n    );\r\n    if (defaultLanguageValue === undefined) {\r\n      if (languages.length === 0 || inputType?.DisableI18n) {\r\n        this.addItemAttributeValue(item.Entity.Guid, ctAttribute.Name, defaultValue, '*', false, ctAttribute.Type);\r\n      } else {\r\n        this.addItemAttributeValue(item.Entity.Guid, ctAttribute.Name, defaultValue, defaultLanguage, false, ctAttribute.Type);\r\n      }\r\n    } else {\r\n      // most likely used only for entity fields because we can never know if they were cleaned out or brand new\r\n      if (languages.length === 0 || inputType?.DisableI18n) {\r\n        this.updateItemAttributeValue(item.Entity.Guid, ctAttribute.Name, defaultValue, '*', defaultLanguage, false);\r\n      } else {\r\n        this.updateItemAttributeValue(item.Entity.Guid, ctAttribute.Name, defaultValue, defaultLanguage, defaultLanguage, false);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { UrlMatchResult, UrlSegment } from '@angular/router';\r\nimport { EditPosParams } from './edit-matcher.models';\r\n\r\n/**\r\n * ':zoneId/:appId/edit/:items'\r\n * ':zoneId/:appId/edit/:items/details/:detailsEntityGuid/:detailsFieldId'\r\n * ':zoneId/:appId/edit/:items/update/:updateEntityGuid/:updateFieldId'\r\n */\r\nexport function editRoot(url: UrlSegment[]): UrlMatchResult {\r\n  if (url.length < 4) { return null; }\r\n  if (url[2].path !== 'edit') { return null; }\r\n  const hasDetails = url[4] != null && url[4].path === 'details' && url[5] != null && url[6] != null;\r\n  const hasUpdate = url[4] != null && url[4].path === 'update' && url[5] != null && url[6] != null;\r\n  const posParams: EditPosParams = {\r\n    zoneId: url[0],\r\n    appId: url[1],\r\n    items: url[3],\r\n    ...(hasDetails && { detailsEntityGuid: url[5], detailsFieldId: url[6] }),\r\n    ...(hasUpdate && { updateEntityGuid: url[5], updateFieldId: url[6] }),\r\n  };\r\n  const match: UrlMatchResult = {\r\n    consumed: url.slice(0, (hasDetails || hasUpdate) ? 7 : 4),\r\n    posParams: posParams as any,\r\n  };\r\n  return match;\r\n}\r\n\r\n/** ':zoneId/:appId/edit/refresh/:items' */\r\nexport function refreshEditRoot(url: UrlSegment[]): UrlMatchResult {\r\n  if (url.length < 5) { return null; }\r\n  if (url[2].path !== 'edit' || url[3].path !== 'refresh') { return null; }\r\n  const posParams: EditPosParams = {\r\n    zoneId: url[0],\r\n    appId: url[1],\r\n    items: url[4],\r\n  };\r\n  const match: UrlMatchResult = {\r\n    consumed: url.slice(0, 5),\r\n    posParams: posParams as any,\r\n  };\r\n  return match;\r\n}\r\n\r\n/**\r\n * 'edit/:items'\r\n * 'edit/:items/details/:detailsEntityGuid/:detailsFieldId'\r\n * 'edit/:items/update/:updateEntityGuid/:updateFieldId'\r\n */\r\nexport function edit(url: UrlSegment[]): UrlMatchResult {\r\n  if (url.length < 2) { return null; }\r\n  if (url[0].path !== 'edit') { return null; }\r\n  const hasDetails = url[2] != null && url[2].path === 'details' && url[3] != null && url[4] != null;\r\n  const hasUpdate = url[2] != null && url[2].path === 'update' && url[3] != null && url[4] != null;\r\n  const posParams: EditPosParams = {\r\n    items: url[1],\r\n    ...(hasDetails && { detailsEntityGuid: url[3], detailsFieldId: url[4] }),\r\n    ...(hasUpdate && { updateEntityGuid: url[3], updateFieldId: url[4] }),\r\n  };\r\n  const match: UrlMatchResult = {\r\n    consumed: url.slice(0, (hasDetails || hasUpdate) ? 5 : 2),\r\n    posParams: posParams as any,\r\n  };\r\n  return match;\r\n}\r\n\r\n/** 'edit/refresh/:items' */\r\nexport function refreshEdit(url: UrlSegment[]): UrlMatchResult {\r\n  if (url.length < 3) { return null; }\r\n  if (url[0].path !== 'edit' || url[1].path !== 'refresh') { return null; }\r\n  const posParams: EditPosParams = {\r\n    items: url[2],\r\n  };\r\n  const match: UrlMatchResult = {\r\n    consumed: url.slice(0, 3),\r\n    posParams: posParams as any,\r\n  };\r\n  return match;\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { PageEntity, PageSearchItem, PageTreeItem } from './page-picker.models';\r\n\r\nexport function buildPageSearch(pages: PageEntity[]): PageSearchItem[] {\r\n  if (!pages) { return []; }\r\n\r\n  const items = pages.map(page => {\r\n    let path = page.Path.trim().replace(/\\\\/g, '/').replace(/\\/\\//g, '/');\r\n    if (path.startsWith('/')) {\r\n      path = path.substring(1);\r\n    }\r\n    path = path.split('/').slice(0, -1).join(' > ');\r\n\r\n    const item: PageSearchItem = {\r\n      id: page.Id,\r\n      name: page.Name,\r\n      path,\r\n    };\r\n    return item;\r\n  });\r\n\r\n  return items;\r\n}\r\n\r\nexport function buildPageTree(pages: PageEntity[]): PageTreeItem[] {\r\n  if (!pages) { return []; }\r\n\r\n  const items = pages.map(page => {\r\n    const item: PageTreeItem = {\r\n      children: [],\r\n      id: page.Id,\r\n      name: page.Name,\r\n      parentId: page.ParentId,\r\n    };\r\n    return item;\r\n  });\r\n\r\n  const tree: PageTreeItem[] = [];\r\n  const broken: PageTreeItem[] = [];\r\n  for (const item of items) {\r\n    if (item.parentId === -1) {\r\n      tree.push(item);\r\n      continue;\r\n    }\r\n\r\n    const parent = items.find(i => i.id === item.parentId);\r\n    if (!parent) {\r\n      broken.push(item);\r\n    } else {\r\n      parent.children.push(item);\r\n    }\r\n  }\r\n\r\n  if (broken.length > 0) {\r\n    /** Fake entry to place all pages which are missing parent */\r\n    const item: PageTreeItem = {\r\n      children: broken,\r\n      id: null,\r\n      name: 'Missing Parent',\r\n      parentId: null,\r\n    };\r\n    tree.push(item);\r\n  }\r\n\r\n  return tree;\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M159 336l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0l-39 39L63 448h256V304l-55.5-55.5c-4.7-4.7-12.3-4.7-17 0L159 336zm96-50.7l32 32V416H95.1l.3-67.2 15.6-15.6 48 48c20.3-20.3 77.7-77.6 96-95.9zM127 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm0-96c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm242.9-62.1L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304z\\\"/></svg>\";","export * from './adam-snapshot.model';\r\nexport * from './calculated-input-type.model';\r\nexport * from './component-metadata.model';\r\nexport * from './content-type-settings.model';\r\nexport * from './eav-config.model';\r\nexport * from './edit-routing.models';\r\nexport * from './element-event-listener.model';\r\nexport * from './field-error-message.model';\r\nexport * from './fields-configs.model';\r\nexport * from './formula.models';\r\nexport * from './global-config.model';\r\nexport * from './language-instance.model';\r\nexport * from './language.model';\r\nexport * from './link-cache.model';\r\nexport * from './link-info.model';\r\nexport * from './log-entry.model';\r\nexport * from './paste-clipboard-image.models';\r\nexport * from './publish-mode.models';\r\nexport * from './publish-status.model';\r\nexport * from './save-result.model';\r\nexport * from './versioning-options.model';\r\n","import { EavEntity, EavValues } from '.';\r\nimport { EntityAttributes1 } from '../json-format-v1';\r\n\r\nexport class EavEntityAttributes {\r\n  [attributeName: string]: EavValues<any>;\r\n\r\n  static convert(attributes1: EntityAttributes1): EavEntityAttributes {\r\n    const atributes: EavEntityAttributes = {};\r\n\r\n    // loop attribute types - String, Boolean, ...\r\n    for (const [type1, attribute1] of Object.entries(attributes1)) {\r\n      // loop attribute names - Description, Name, ...\r\n      for (const [name1, value1] of Object.entries(attribute1)) {\r\n        atributes[name1] = EavValues.convert(value1, type1);\r\n      }\r\n    }\r\n    return atributes;\r\n  }\r\n\r\n  static mergeSettings(metadataItems: EavEntity[]): EavEntityAttributes {\r\n    if (metadataItems == null) { return {}; }\r\n\r\n    const merged: EavEntityAttributes = {};\r\n    // copy metadata settings which are not @All\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id === '@All') { continue; }\r\n\r\n      for (const [name, value] of Object.entries(item.Attributes)) {\r\n        const copy: EavValues<any> = { ...value };\r\n        merged[name] = copy;\r\n      }\r\n    }\r\n\r\n    // copy @All metadata settings, overwriting previous settings\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id !== '@All') { continue; }\r\n\r\n      for (const [name, value] of Object.entries(item.Attributes)) {\r\n        // do not overwrite previous settings if @All is empty\r\n        const exists = merged[name] != null;\r\n        const emptyAll = value.Values[0].Value === '';\r\n        if (exists && emptyAll) { continue; }\r\n\r\n        const copy: EavValues<any> = { ...value };\r\n        merged[name] = copy;\r\n      }\r\n    }\r\n    return merged;\r\n  }\r\n}\r\n","/** PublishMode is short version of PublishStatus */\r\nexport type PublishMode = 'branch' | 'show' | 'hide';\r\n\r\n/** PublishMode is short version of PublishStatus */\r\nexport enum PublishModeConstants {\r\n  Show = 'show',\r\n  Hide = 'hide',\r\n  Branch = 'branch',\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { LogEntry, LogSeverity } from '../models';\r\n\r\n@Injectable()\r\nexport class LoggingService implements OnDestroy {\r\n  private logs$ = new BehaviorSubject<LogEntry[]>([]);\r\n  private logLimit = 50;\r\n  private lastSnackBarTime = 0;\r\n  private snackBarDebounce = 10000;\r\n\r\n  constructor(private snackBar: MatSnackBar) { }\r\n\r\n  ngOnDestroy(): void {\r\n    this.logs$.complete();\r\n  }\r\n\r\n  addLog(severity: LogSeverity, label: string, error: any): void {\r\n    const newLogEntry: LogEntry = {\r\n      error,\r\n      label,\r\n      severity,\r\n      time: Date.now(),\r\n    };\r\n    const oldLogs = this.logs$.value;\r\n    const newLogs = [newLogEntry, ...oldLogs.slice(0, this.logLimit - 2)];\r\n    this.logs$.next(newLogs);\r\n  }\r\n\r\n  /** Show snackBar to the user. By default snackBars have debounce timer, but you can force snackBar to show instantly */\r\n  showMessage(message: string, duration: number, force?: boolean): void {\r\n    const nowTime = Date.now();\r\n    if (!force && (nowTime - this.lastSnackBarTime) <= this.snackBarDebounce) {\r\n      return;\r\n    }\r\n\r\n    if (duration != null && duration > 0) {\r\n      this.snackBar.open(message, null, { duration });\r\n    } else {\r\n      this.snackBar.open(message);\r\n    }\r\n    this.lastSnackBarTime = nowTime;\r\n  }\r\n\r\n  getLogs$(): Observable<LogEntry[]> {\r\n    return this.logs$.asObservable();\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Context } from '../../../ng-dialogs/src/app/shared/services/context';\r\nimport { QueryStreams } from '../../eav-material-controls/input-types/entity/entity-query/entity-query.models';\r\n\r\n@Injectable()\r\nexport class QueryService {\r\n  constructor(private http: HttpClient, private dnnContext: DnnContext, private context: Context) { }\r\n\r\n  getAvailableEntities(queryUrl: string, includeGuid: boolean, params: string, entitiesFilter?: string[]): Observable<QueryStreams> {\r\n    // Check if any params we should auto-add are already set (like in a query which has these params set in the configuration)\r\n    const hasParams = !!params;\r\n    const paramsLower = params?.toLocaleLowerCase() ?? '';\r\n    const hasAppId = paramsLower.includes('appid=') ?? false;\r\n    const hasGuid = paramsLower.includes('includeguid=') ?? false;\r\n    const allParams =\r\n      (hasGuid ? '' : `&includeGuid=${includeGuid}`)\r\n      + (hasAppId ? '' : `&appId=${this.context.appId}`)\r\n      + (hasParams ? `&${params}` : '');\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(\r\n      this.dnnContext.$2sxc.http.apiUrl(`app/auto/query/${queryUrl}?${urlParams}`),\r\n      { Guids: entitiesFilter },\r\n    );\r\n  }\r\n}\r\n","import { AbstractControl } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { Dictionary } from '../../../ng-dialogs/src/app/shared/models/dictionary.model';\r\nimport { EavConfig } from '../models';\r\n\r\n/**\r\n * Create a new FieldMask instance and access result with resolve\r\n * @example\r\n * const mask = new FieldMask(\"[FirstName]\", formGroup.controls);\r\n * const maskValue = mask.resolve();\r\n *\r\n * @param mask a string like \"[FirstName] [LastName]\"\r\n * @param model usually FormGroup controls, passed into here\r\n * @param overloadPreCleanValues a function which will \"scrub\" the found field-values\r\n */\r\nexport class FieldMask {\r\n  private mask: string;\r\n  private model: Dictionary<AbstractControl>;\r\n  private fields: string[] = [];\r\n  private value: string;\r\n  private findFields = /\\[.*?\\]/ig;\r\n  private unwrapField = /[\\[\\]]/ig;\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  constructor(\r\n    mask: string,\r\n    model: Dictionary<AbstractControl>,\r\n    private changeEvent: (newValue: string) => void,\r\n    overloadPreCleanValues: (key: string, value: string) => string,\r\n    private eavConfig?: EavConfig,\r\n  ) {\r\n    this.mask = mask;\r\n    this.model = model;\r\n    this.fields = this.fieldList();\r\n\r\n    if (overloadPreCleanValues) {\r\n      this.preClean = overloadPreCleanValues;\r\n    }\r\n\r\n    // bind auto-watch only if needed...\r\n    if (model && changeEvent) {\r\n      this.watchAllFields();\r\n    }\r\n  }\r\n\r\n  /** Resolves a mask to the final value */\r\n  resolve(): string {\r\n    let value = this.mask;\r\n    if (this.eavConfig != null && value != null) {\r\n      value = value.replace('[App:AppId]', this.eavConfig.appId);\r\n      value = value.replace('[App:ZoneId]', this.eavConfig.zoneId);\r\n    }\r\n    this.fields.forEach((e, i) => {\r\n      const replaceValue = this.model.hasOwnProperty(e) && this.model[e] && this.model[e].value ? this.model[e].value : '';\r\n      const cleaned = this.preClean(e, replaceValue);\r\n      value = value.replace('[' + e + ']', cleaned);\r\n    });\r\n\r\n    return value;\r\n  }\r\n\r\n  /** Retrieves a list of all fields used in the mask */\r\n  fieldList(): string[] {\r\n    const result: string[] = [];\r\n    if (!this.mask) { return result; }\r\n    const matches = this.mask.match(this.findFields);\r\n    if (matches) {\r\n      matches.forEach((e, i) => {\r\n        const staticName = e.replace(this.unwrapField, '');\r\n        result.push(staticName);\r\n      });\r\n    } else { // TODO: ask is this good\r\n      result.push(this.mask);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /** Default preClean function */\r\n  private preClean(key: string, value: string): string {\r\n    return value;\r\n  }\r\n\r\n  /** Change-event - will only fire if it really changes */\r\n  private onChange() {\r\n    const maybeNew = this.resolve();\r\n    if (this.value !== maybeNew) {\r\n      this.changeEvent(maybeNew);\r\n    }\r\n    this.value = maybeNew;\r\n  }\r\n\r\n  /** Add watcher and execute onChange */\r\n  private watchAllFields() {\r\n    // add a watch for each field in the field-mask\r\n    this.fields.forEach(field => {\r\n      if (!this.model[field]) { return; }\r\n      const valueSub = this.model[field].valueChanges.subscribe(value => this.onChange());\r\n      this.subscriptions.push(valueSub);\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this.subscriptions.forEach(subscription => { subscription.unsubscribe(); });\r\n  }\r\n}\r\n","import { DnnInterceptor } from '@2sic.com/dnn-sxc-angular';\r\nimport { HashLocationStrategy, LocationStrategy } from '@angular/common';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { APP_INITIALIZER, Injector, NgModule } from '@angular/core';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { BrowserModule, Title } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { EntityDataModule } from '@ngrx/data';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { metaReducers, reducers } from '../../../edit/shared/store';\r\nimport { entityConfig } from '../../../edit/shared/store/ngrx-data';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { paramsInitFactory } from './params-init.factory';\r\nimport { HandleErrorsInterceptor } from './shared/interceptors/handle-errors.interceptor';\r\nimport { SetHeadersInterceptor } from './shared/interceptors/set-headers.interceptor';\r\nimport { Context } from './shared/services/context';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n  ],\r\n  entryComponents: [\r\n  ],\r\n  imports: [\r\n    AppRoutingModule,\r\n    BrowserModule,\r\n    HttpClientModule,\r\n    BrowserAnimationsModule,\r\n    StoreModule.forRoot(reducers, { metaReducers, runtimeChecks: { strictStateImmutability: true, strictActionImmutability: true } }),\r\n    EffectsModule.forRoot([]),\r\n    StoreDevtoolsModule.instrument({ maxAge: 25 }),\r\n    EntityDataModule.forRoot(entityConfig),\r\n    TranslateModule.forRoot(),\r\n    MatSnackBarModule,\r\n  ],\r\n  providers: [\r\n    { provide: APP_INITIALIZER, useFactory: paramsInitFactory, deps: [Injector], multi: true },\r\n    { provide: LocationStrategy, useClass: HashLocationStrategy },\r\n    DnnInterceptor,\r\n    { provide: HTTP_INTERCEPTORS, useClass: SetHeadersInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: HandleErrorsInterceptor, multi: true },\r\n    Context,\r\n    Title\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { JsInfo } from '@2sic.com/2sxc-typings';\r\nimport { DialogContextApp } from '../models/dialog-context.models';\r\nimport { EavWindow } from '../models/eav-window.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n/**\r\n * This ensures that $2sxc is fully initialized with parameters which are provided later on\r\n * The appApi is being added in v12\r\n * It's important because in Oqtane the app-api root is different in from the normal admin-apis\r\n */\r\nexport function UpdateEnvVarsFromDialogSettings(appContext: DialogContextApp): void {\r\n  try {\r\n    const includedApiRoot = appContext?.Api;\r\n    if (!includedApiRoot) { return; }\r\n\r\n    const old2sxcHeader = (window.$2sxc.env as any).header as JsInfo;\r\n    const new2sxcHeader = { ...old2sxcHeader, appApi: includedApiRoot } as JsInfo;\r\n    window.$2sxc.env.load(new2sxcHeader);\r\n  } catch { /* ignore */ }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 39.2 28.2 71.8 65.5 78.7-.8 17.2-5 30.4-12.7 40-17.5 21.8-53.1 25.2-90.7 28.7-28.2 2.6-57.4 5.4-80.4 16.9-3.4 1.7-6.7 3.6-9.7 5.7V158.4c36.5-7.4 64-39.7 64-78.4 0-44.2-35.8-80-80-80S0 35.8 0 80c0 38.7 27.5 71 64 78.4v195.2C27.5 361 0 393.3 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-36.9-24.9-67.9-58.9-77.2 5-9.6 12.3-14.6 19-18 17.5-8.8 42.5-11.2 68.9-13.7 42.6-4 86.7-8.1 112.7-40.5 12.4-15.5 19-35.5 19.8-60.7C357.3 214 384 182.1 384 144zM32 80c0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48-48-21.5-48-48zm96 352c0 26.5-21.5 48-48 48s-48-21.5-48-48c0-26.4 21.4-47.9 47.8-48h.6c26.3.2 47.6 21.7 47.6 48zm187.8-241.5L304 192c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48c0 22.4-15.4 41.2-36.2 46.5z\\\"/></svg>\";","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport { EavService, LoggingService } from '.';\r\nimport { FieldSettings, FieldValue } from '../../../edit-types';\r\nimport { FieldsSettingsHelpers, FormulaHelpers, GeneralHelpers, InputFieldHelpers, LocalizationHelpers } from '../helpers';\r\nimport { DesignerState, FormulaCacheItem, FormulaFunction, FormulaResult, FormulaTarget, LogSeverities } from '../models';\r\nimport { ContentTypeItemService, ContentTypeService, ItemService, LanguageInstanceService } from '../store/ngrx-data';\r\n\r\n@Injectable()\r\nexport class FormulaDesignerService implements OnDestroy {\r\n  private formulaCache$: BehaviorSubject<FormulaCacheItem[]>;\r\n  private formulaResults$: BehaviorSubject<FormulaResult[]>;\r\n  private designerState$: BehaviorSubject<DesignerState>;\r\n\r\n  constructor(\r\n    private eavService: EavService,\r\n    private itemService: ItemService,\r\n    private contentTypeService: ContentTypeService,\r\n    private languageInstanceService: LanguageInstanceService,\r\n    private contentTypeItemService: ContentTypeItemService,\r\n    private loggingService: LoggingService,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  ngOnDestroy(): void {\r\n    this.formulaCache$?.complete();\r\n    this.formulaResults$?.complete();\r\n    this.designerState$?.complete();\r\n  }\r\n\r\n  init(): void {\r\n    this.formulaResults$ = new BehaviorSubject([]);\r\n    const initialDesignerState: DesignerState = {\r\n      editMode: false,\r\n      entityGuid: undefined,\r\n      fieldName: undefined,\r\n      isOpen: false,\r\n      target: undefined,\r\n    };\r\n    this.designerState$ = new BehaviorSubject(initialDesignerState);\r\n    const formulaCache = this.buildFormulaCache();\r\n    this.formulaCache$ = new BehaviorSubject(formulaCache);\r\n  }\r\n\r\n  getFormula(entityGuid: string, fieldName: string, target: FormulaTarget, allowDraft: boolean): FormulaCacheItem {\r\n    return this.formulaCache$.value.find(\r\n      f =>\r\n        f.entityGuid === entityGuid\r\n        && f.fieldName === fieldName\r\n        && f.target === target\r\n        && (allowDraft ? true : !f.isDraft)\r\n    );\r\n  }\r\n\r\n  getFormula$(entityGuid: string, fieldName: string, target: FormulaTarget, allowDraft: boolean): Observable<FormulaCacheItem> {\r\n    const isDraft = allowDraft ? [true, false] : [false];\r\n    return this.formulaCache$.pipe(\r\n      map(formulas => formulas.find(\r\n        f => f.entityGuid === entityGuid && f.fieldName === fieldName && f.target === target && isDraft.includes(f.isDraft))\r\n      ),\r\n      distinctUntilChanged(GeneralHelpers.objectsEqual),\r\n    );\r\n  }\r\n\r\n  getFormulas(entityGuid?: string, fieldName?: string, target?: FormulaTarget, allowDraft?: boolean): FormulaCacheItem[] {\r\n    return this.formulaCache$.value.filter(\r\n      f =>\r\n        (entityGuid ? f.entityGuid === entityGuid : true)\r\n        && (fieldName ? f.fieldName === fieldName : true)\r\n        && (target ? f.target === target : true)\r\n        && (allowDraft ? true : !f.isDraft)\r\n    );\r\n  }\r\n\r\n  getFormulas$(): Observable<FormulaCacheItem[]> {\r\n    return this.formulaCache$.asObservable();\r\n  }\r\n\r\n  upsertFormula(entityGuid: string, fieldName: string, target: FormulaTarget, formula: string, run: boolean): void {\r\n    let formulaFunction: FormulaFunction;\r\n    if (run) {\r\n      try {\r\n        formulaFunction = FormulaHelpers.buildFormulaFunction(formula);\r\n      } catch (error) {\r\n        this.upsertFormulaResult(entityGuid, fieldName, target, undefined, true);\r\n        const item = this.itemService.getItem(entityGuid);\r\n        const contentTypeId = InputFieldHelpers.getContentTypeId(item);\r\n        const contentType = this.contentTypeService.getContentType(contentTypeId);\r\n        const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n        const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n        const itemTitle = FieldsSettingsHelpers.getContentTypeTitle(contentType, currentLanguage, defaultLanguage);\r\n        const errorLabel = `Error building formula for Entity: \"${itemTitle}\", Field: \"${fieldName}\", Target: \"${target}\"`;\r\n        this.loggingService.addLog(LogSeverities.Error, errorLabel, error);\r\n        const designerState = this.getDesignerState();\r\n        const isOpenInDesigner = designerState.isOpen\r\n          && designerState.entityGuid === entityGuid\r\n          && designerState.fieldName === fieldName\r\n          && designerState.target === target;\r\n        if (isOpenInDesigner) {\r\n          console.error(errorLabel, error);\r\n        }\r\n      }\r\n    }\r\n\r\n    const oldFormulaCache = this.formulaCache$.value;\r\n    const oldFormulaIndex = oldFormulaCache.findIndex(f => f.entityGuid === entityGuid && f.fieldName === fieldName && f.target === target);\r\n    const oldFormulaItem = oldFormulaCache[oldFormulaIndex];\r\n\r\n    const newFormulaItem: FormulaCacheItem = {\r\n      cache: oldFormulaItem?.cache ?? {},\r\n      entityGuid,\r\n      fieldName,\r\n      fn: formulaFunction?.bind({}),\r\n      isDraft: run ? formulaFunction == null : true,\r\n      source: formula,\r\n      sourceFromSettings: oldFormulaItem?.sourceFromSettings,\r\n      sourceGuid: oldFormulaItem?.sourceGuid,\r\n      target,\r\n      version: FormulaHelpers.findFormulaVersion(formula),\r\n    };\r\n\r\n    const newCache = oldFormulaIndex >= 0\r\n      ? [...oldFormulaCache.slice(0, oldFormulaIndex), newFormulaItem, ...oldFormulaCache.slice(oldFormulaIndex + 1)]\r\n      : [newFormulaItem, ...oldFormulaCache];\r\n    this.formulaCache$.next(newCache);\r\n  }\r\n\r\n  updateSaved(entityGuid: string, fieldName: string, target: FormulaTarget, formula: string): void {\r\n    const oldFormulaCache = this.formulaCache$.value;\r\n    const oldFormulaIndex = oldFormulaCache.findIndex(f => f.entityGuid === entityGuid && f.fieldName === fieldName && f.target === target);\r\n    const oldFormulaItem = oldFormulaCache[oldFormulaIndex];\r\n    if (oldFormulaItem == null) { return; }\r\n\r\n    const newFormulaItem: FormulaCacheItem = {\r\n      ...oldFormulaItem,\r\n      sourceFromSettings: formula,\r\n    };\r\n\r\n    const newCache = [...oldFormulaCache.slice(0, oldFormulaIndex), newFormulaItem, ...oldFormulaCache.slice(oldFormulaIndex + 1)];\r\n    this.formulaCache$.next(newCache);\r\n  }\r\n\r\n  resetFormula(entityGuid: string, fieldName: string, target: FormulaTarget): void {\r\n    const oldResults = this.formulaResults$.value;\r\n    const oldResultIndex = oldResults.findIndex(r => r.entityGuid === entityGuid && r.fieldName === fieldName && r.target === target);\r\n    if (oldResultIndex >= 0) {\r\n      const newResults = [...oldResults.slice(0, oldResultIndex), ...oldResults.slice(oldResultIndex + 1)];\r\n      this.formulaResults$.next(newResults);\r\n    }\r\n\r\n    const oldFormulaCache = this.formulaCache$.value;\r\n    const oldFormulaIndex = oldFormulaCache.findIndex(f => f.entityGuid === entityGuid && f.fieldName === fieldName && f.target === target);\r\n    const oldFormulaItem = oldFormulaCache[oldFormulaIndex];\r\n\r\n    if (oldFormulaItem?.sourceFromSettings != null) {\r\n      this.upsertFormula(entityGuid, fieldName, target, oldFormulaItem.sourceFromSettings, true);\r\n    } else if (oldFormulaIndex >= 0) {\r\n      const newCache = [...oldFormulaCache.slice(0, oldFormulaIndex), ...oldFormulaCache.slice(oldFormulaIndex + 1)];\r\n      this.formulaCache$.next(newCache);\r\n    }\r\n  }\r\n\r\n  upsertFormulaResult(entityGuid: string, fieldName: string, target: FormulaTarget, value: FieldValue, isError: boolean): void {\r\n    const newResult: FormulaResult = {\r\n      entityGuid,\r\n      fieldName,\r\n      target,\r\n      value,\r\n      isError,\r\n    };\r\n\r\n    const oldResults = this.formulaResults$.value;\r\n    const oldResultIndex = oldResults.findIndex(r => r.entityGuid === entityGuid && r.fieldName === fieldName && r.target === target);\r\n    const newResults = oldResultIndex >= 0\r\n      ? [...oldResults.slice(0, oldResultIndex), newResult, ...oldResults.slice(oldResultIndex + 1)]\r\n      : [newResult, ...oldResults];\r\n    this.formulaResults$.next(newResults);\r\n  }\r\n\r\n  getFormulaResult$(entityGuid: string, fieldName: string, target: FormulaTarget): Observable<FormulaResult> {\r\n    return this.formulaResults$.pipe(\r\n      map(results => results.find(r => r.entityGuid === entityGuid && r.fieldName === fieldName && r.target === target)),\r\n      distinctUntilChanged(GeneralHelpers.objectsEqual),\r\n    );\r\n  }\r\n\r\n  setDesignerOpen(isOpen: boolean): void {\r\n    const newState: DesignerState = {\r\n      ...this.getDesignerState(),\r\n      isOpen,\r\n    };\r\n    this.setDesignerState(newState);\r\n  }\r\n\r\n  setDesignerState(activeDesigner: DesignerState): void {\r\n    this.designerState$.next(activeDesigner);\r\n  }\r\n\r\n  getDesignerState(): DesignerState {\r\n    return this.designerState$.value;\r\n  }\r\n\r\n  getDesignerState$(): Observable<DesignerState> {\r\n    return this.designerState$.pipe(distinctUntilChanged(GeneralHelpers.objectsEqual));\r\n  }\r\n\r\n  private buildFormulaCache(): FormulaCacheItem[] {\r\n    const formulaCache: FormulaCacheItem[] = [];\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n\r\n    for (const entityGuid of this.eavService.eavConfig.itemGuids) {\r\n      const item = this.itemService.getItem(entityGuid);\r\n      const contentTypeId = InputFieldHelpers.getContentTypeId(item);\r\n      const contentType = this.contentTypeService.getContentType(contentTypeId);\r\n      for (const attribute of contentType.Attributes) {\r\n        const settings = FieldsSettingsHelpers.setDefaultFieldSettings(\r\n          FieldsSettingsHelpers.mergeSettings<FieldSettings>(attribute.Metadata, defaultLanguage, defaultLanguage),\r\n        );\r\n        const formulaItems = this.contentTypeItemService.getContentTypeItems(settings.Formulas).filter(formulaItem => {\r\n          const enabled: boolean = LocalizationHelpers.translate(currentLanguage, defaultLanguage, formulaItem.Attributes.Enabled, null);\r\n          return enabled;\r\n        });\r\n        for (const formulaItem of formulaItems) {\r\n          const formula: string = LocalizationHelpers.translate(currentLanguage, defaultLanguage, formulaItem.Attributes.Formula, null);\r\n          if (formula == null) { continue; }\r\n\r\n          const target: FormulaTarget = LocalizationHelpers.translate(\r\n            currentLanguage, defaultLanguage, formulaItem.Attributes.Target, null\r\n          );\r\n\r\n          let formulaFunction: FormulaFunction;\r\n          try {\r\n            formulaFunction = FormulaHelpers.buildFormulaFunction(formula);\r\n          } catch (error) {\r\n            this.upsertFormulaResult(entityGuid, attribute.Name, target, undefined, true);\r\n            const itemTitle = FieldsSettingsHelpers.getContentTypeTitle(contentType, currentLanguage, defaultLanguage);\r\n            this.loggingService.addLog(LogSeverities.Error, `Error building formula for Entity: \"${itemTitle}\", Field: \"${attribute.Name}\", Target: \"${target}\"`, error);\r\n            this.loggingService.showMessage(this.translate.instant('Errors.FormulaConfiguration'), 2000);\r\n          }\r\n\r\n          const formulaCacheItem: FormulaCacheItem = {\r\n            cache: {},\r\n            entityGuid,\r\n            fieldName: attribute.Name,\r\n            fn: formulaFunction?.bind({}),\r\n            isDraft: formulaFunction == null,\r\n            source: formula,\r\n            sourceFromSettings: formula,\r\n            sourceGuid: formulaItem.Guid,\r\n            target,\r\n            version: FormulaHelpers.findFormulaVersion(formula),\r\n          };\r\n\r\n          formulaCache.push(formulaCacheItem);\r\n        }\r\n      }\r\n    }\r\n\r\n    return formulaCache;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport { PublishMode, PublishModeConstants, PublishStatus } from '../../models';\r\nimport { EavService } from '../../services';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class PublishStatusService extends BaseDataService<PublishStatus> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('PublishStatus', serviceElementsFactory);\r\n  }\r\n\r\n  setPublishStatus(publishStatus: PublishStatus): void {\r\n    this.upsertOneInCache(publishStatus);\r\n  }\r\n\r\n  removePublishStatus(formId: number): void {\r\n    this.removeOneFromCache(formId);\r\n  }\r\n\r\n  getPublishStatus(formId: number): PublishStatus {\r\n    return this.cache$.value.find(publishStatus => publishStatus.formId === formId);\r\n  }\r\n\r\n  private getPublishStatus$(formId: number): Observable<PublishStatus> {\r\n    return this.cache$.pipe(\r\n      map(publishStatuses => publishStatuses.find(publishStatus => publishStatus.formId === formId)),\r\n      distinctUntilChanged(),\r\n    );\r\n  }\r\n\r\n  setPublishMode(publishMode: PublishMode, formId: number, eavService: EavService): void {\r\n    // if publish mode is prohibited, set default\r\n    if (eavService.eavConfig.versioningOptions[publishMode] == null) {\r\n      publishMode = Object.keys(eavService.eavConfig.versioningOptions)[0] as PublishMode;\r\n    }\r\n    const publishStatus: PublishStatus = {\r\n      formId,\r\n      DraftShouldBranch: publishMode === PublishModeConstants.Branch,\r\n      IsPublished: publishMode === PublishModeConstants.Show,\r\n    };\r\n    this.setPublishStatus(publishStatus);\r\n  }\r\n\r\n  getPublishMode$(formId: number): Observable<PublishMode> {\r\n    return this.getPublishStatus$(formId).pipe(\r\n      map(publishStatus => {\r\n        const publishMode: PublishMode = publishStatus.DraftShouldBranch\r\n          ? PublishModeConstants.Branch\r\n          : publishStatus.IsPublished ? PublishModeConstants.Show : PublishModeConstants.Hide;\r\n        return publishMode;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { EavService } from '.';\r\nimport { Dictionary } from '../../../ng-dialogs/src/app/shared/models/dictionary.model';\r\n\r\n@Injectable()\r\nexport class FormsStateService implements OnDestroy {\r\n  formsValid$: BehaviorSubject<boolean>;\r\n  formsDirty$: BehaviorSubject<boolean>;\r\n\r\n  private formsValid: Dictionary<boolean>;\r\n  private formsDirty: Dictionary<boolean>;\r\n\r\n  constructor(private eavService: EavService) { }\r\n\r\n  ngOnDestroy() {\r\n    this.formsValid$?.complete();\r\n    this.formsDirty$?.complete();\r\n  }\r\n\r\n  init() {\r\n    this.formsValid$ = new BehaviorSubject(false);\r\n    this.formsDirty$ = new BehaviorSubject(false);\r\n    this.formsValid = {};\r\n    this.formsDirty = {};\r\n    for (const entityGuid of this.eavService.eavConfig.itemGuids) {\r\n      this.formsValid[entityGuid] = false;\r\n      this.formsDirty[entityGuid] = false;\r\n    }\r\n  }\r\n\r\n  getFormValid(entityGuid: string) {\r\n    return this.formsValid[entityGuid];\r\n  }\r\n\r\n  setFormValid(entityGuid: string, isValid: boolean) {\r\n    this.formsValid[entityGuid] = isValid;\r\n\r\n    const allValid = !Object.values(this.formsValid).some(valid => valid === false);\r\n    if (allValid !== this.formsValid$.value) {\r\n      this.formsValid$.next(allValid);\r\n    }\r\n  }\r\n\r\n  setFormDirty(entityGuid: string, isDirty: boolean) {\r\n    this.formsDirty[entityGuid] = isDirty;\r\n\r\n    const anyDirty = Object.values(this.formsDirty).some(dirty => dirty === true);\r\n    if (anyDirty !== this.formsDirty$.value) {\r\n      this.formsDirty$.next(anyDirty);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport { EntityInfo } from '../../../../edit-types';\r\nimport { GeneralHelpers } from '../../helpers';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class EntityCacheService extends BaseDataService<EntityInfo> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('EntityCache', serviceElementsFactory);\r\n  }\r\n\r\n  loadEntities(entities: EntityInfo[]): void {\r\n    if (entities == null) { return; }\r\n    this.upsertManyInCache(entities);\r\n  }\r\n\r\n  getEntities$(guids?: string[]): Observable<EntityInfo[]> {\r\n    if (guids == null) {\r\n      return this.cache$.asObservable();\r\n    }\r\n\r\n    return this.cache$.pipe(\r\n      map(entities => entities.filter(entity => guids.includes(entity.Value))),\r\n      distinctUntilChanged(GeneralHelpers.arraysEqual),\r\n    );\r\n  }\r\n\r\n  getEntities(guids?: string[]): EntityInfo[] {\r\n    if (guids == null) {\r\n      return this.cache$.value;\r\n    }\r\n\r\n    return this.cache$.value.filter(entity => guids.includes(entity.Value));\r\n  }\r\n\r\n  getEntity(guid: string): EntityInfo {\r\n    return this.cache$.value.find(entity => entity.Value === guid);\r\n  }\r\n}\r\n","export default \".page-picker-title {\\n  margin: 0;\\n}\\n\\n.page-search-box {\\n  margin-bottom: 16px;\\n}\\n\\n.page-tree-box {\\n  height: 300px;\\n  max-width: 100%;\\n  overflow: auto;\\n}\\n\\n.page-tree-box ul {\\n  list-style-type: none;\\n  padding-left: 8px;\\n  margin: 0;\\n}\\n\\n.page-tree-box > ul {\\n  padding-left: 0;\\n}\\n\\n.page-row {\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n}\\n\\n.page-row mat-icon {\\n  width: 20px;\\n  height: 20px;\\n  font-size: 20px;\\n}\\n\\n.no-toggle {\\n  width: 20px;\\n  height: 20px;\\n  display: inline-block;\\n  flex-shrink: 0;\\n}\\n\\n.page-toggle {\\n  cursor: pointer;\\n  flex-shrink: 0;\\n}\\n\\n.page-icon {\\n  margin-right: 4px;\\n  flex-shrink: 0;\\n}\\n\\n.page-label {\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  padding: 4px;\\n  padding-left: 2px;\\n  border-radius: 4px;\\n}\\n\\n.page-label .page-path {\\n  color: #a2a7b1;\\n}\\n\\n.page-label:hover {\\n  background-color: #06599a;\\n  color: #fff;\\n}\\n\\n.page-label:hover .page-path {\\n  color: #c7cad0;\\n}\\n\\n.page-label.selected {\\n  background-color: #002753;\\n  color: #fff;\\n}\\n\\n.page-label.selected .page-path {\\n  color: #c7cad0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFxwYWdlLXBpY2tlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQTtFQUNFLFNBQUE7QUFIRjs7QUFNQTtFQUNFLG1CQUFBO0FBSEY7O0FBTUE7RUFDRSxhQUFBO0VBQ0EsZUFBQTtFQUNBLGNBQUE7QUFIRjs7QUFLRTtFQUNFLHFCQUFBO0VBQ0EsaUJBQUE7RUFDQSxTQUFBO0FBSEo7O0FBTUU7RUFDRSxlQUFBO0FBSko7O0FBUUE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSwyQkFBQTtBQUxGOztBQU9FO0VBQ0UsV0FoQ1E7RUFpQ1IsWUFqQ1E7RUFrQ1IsZUFsQ1E7QUE2Qlo7O0FBU0E7RUFDRSxXQXZDVTtFQXdDVixZQXhDVTtFQXlDVixxQkFBQTtFQUNBLGNBQUE7QUFORjs7QUFTQTtFQUNFLGVBQUE7RUFDQSxjQUFBO0FBTkY7O0FBU0E7RUFDRSxpQkFBQTtFQUNBLGNBQUE7QUFORjs7QUFTQTtFQUNFLGVBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSwyQkFBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0FBTkY7O0FBUUU7RUFDRSxjQUFBO0FBTko7O0FBU0U7RUFDRSx5QkFBQTtFQUNBLFdBQUE7QUFQSjs7QUFTSTtFQUNFLGNBQUE7QUFQTjs7QUFXRTtFQUNFLHlCQUFBO0VBQ0EsV0FBQTtBQVRKOztBQVdJO0VBQ0UsY0FBQTtBQVROIiwiZmlsZSI6InBhZ2UtcGlja2VyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIi4uLy4uL2Fzc2V0cy9zdHlsZXMvdGhlbWUvbWF0ZXJpYWwtY29sb3JzXCI7XHJcblxyXG4kaWNvbi1zaXplOiAyMHB4O1xyXG5cclxuLnBhZ2UtcGlja2VyLXRpdGxlIHtcclxuICBtYXJnaW46IDA7XHJcbn1cclxuXHJcbi5wYWdlLXNlYXJjaC1ib3gge1xyXG4gIG1hcmdpbi1ib3R0b206IDE2cHg7XHJcbn1cclxuXHJcbi5wYWdlLXRyZWUtYm94IHtcclxuICBoZWlnaHQ6IDMwMHB4O1xyXG4gIG1heC13aWR0aDogMTAwJTtcclxuICBvdmVyZmxvdzogYXV0bztcclxuXHJcbiAgdWwge1xyXG4gICAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xyXG4gICAgcGFkZGluZy1sZWZ0OiA4cHg7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgfVxyXG5cclxuICA+dWwge1xyXG4gICAgcGFkZGluZy1sZWZ0OiAwO1xyXG4gIH1cclxufVxyXG5cclxuLnBhZ2Utcm93IHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG5cclxuICBtYXQtaWNvbiB7XHJcbiAgICB3aWR0aDogJGljb24tc2l6ZTtcclxuICAgIGhlaWdodDogJGljb24tc2l6ZTtcclxuICAgIGZvbnQtc2l6ZTogJGljb24tc2l6ZTtcclxuICB9XHJcbn1cclxuXHJcbi5uby10b2dnbGUge1xyXG4gIHdpZHRoOiAkaWNvbi1zaXplO1xyXG4gIGhlaWdodDogJGljb24tc2l6ZTtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgZmxleC1zaHJpbms6IDA7XHJcbn1cclxuXHJcbi5wYWdlLXRvZ2dsZSB7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGZsZXgtc2hyaW5rOiAwO1xyXG59XHJcblxyXG4ucGFnZS1pY29uIHtcclxuICBtYXJnaW4tcmlnaHQ6IDRweDtcclxuICBmbGV4LXNocmluazogMDtcclxufVxyXG5cclxuLnBhZ2UtbGFiZWwge1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG4gIHBhZGRpbmc6IDRweDtcclxuICBwYWRkaW5nLWxlZnQ6IDJweDtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcblxyXG4gIC5wYWdlLXBhdGgge1xyXG4gICAgY29sb3I6IG1hcF9nZXQoJG1hdC1lYXYtaXRlbS1kaWFsb2ctYmFja2dyb3VuZCwgMjAwKTtcclxuICB9XHJcblxyXG4gICY6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWFwX2dldCgkbWF0LWVhdi1pdGVtLWRpYWxvZy1zZWNvbmRhcnksIDMwMCk7XHJcbiAgICBjb2xvcjogI2ZmZjtcclxuXHJcbiAgICAucGFnZS1wYXRoIHtcclxuICAgICAgY29sb3I6IG1hcF9nZXQoJG1hdC1lYXYtaXRlbS1kaWFsb2ctYmFja2dyb3VuZCwgMTAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gICYuc2VsZWN0ZWQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWFwX2dldCgkbWF0LWVhdi1pdGVtLWRpYWxvZy1zZWNvbmRhcnksIDUwMCk7XHJcbiAgICBjb2xvcjogI2ZmZjtcclxuXHJcbiAgICAucGFnZS1wYXRoIHtcclxuICAgICAgY29sb3I6IG1hcF9nZXQoJG1hdC1lYXYtaXRlbS1kaWFsb2ctYmFja2dyb3VuZCwgMTAwKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19 */\";","import { FieldValue } from '../../../edit-types';\r\nimport { consoleLogAngular } from '../../../ng-dialogs/src/app/shared/helpers/console-log-angular.helper';\r\nimport { FormValues } from '../../eav-item-dialog/item-edit-form/item-edit-form.models';\r\nimport { BestValueMode, BestValueModes } from '../constants/localization.constants';\r\nimport { EavDimension, EavEntityAttributes, EavValue, EavValues } from '../models/eav';\r\n\r\nexport class LocalizationHelpers {\r\n  /**\r\n   * Get translated value for currentLanguage,\r\n   * if not exist return default language translation,\r\n   * if default language also not exist return first value\r\n   */\r\n  static translate(currentLanguage: string, defaultLanguage: string, attributeValues: EavValues<any>, defaultValue: any): any {\r\n    if (!attributeValues) { return defaultValue; }\r\n\r\n    const translation: EavValue<any> = this.getValueTranslation(attributeValues, currentLanguage, defaultLanguage);\r\n    if (translation) { return translation.Value; }\r\n\r\n    const translationDefault: EavValue<any> = this.getValueTranslation(attributeValues, defaultLanguage, defaultLanguage);\r\n    if (translationDefault) { return translationDefault.Value; }\r\n\r\n    // TODO: maybe return value with *\r\n    return attributeValues.Values[0]?.Value ?? null;\r\n  }\r\n\r\n  static getValueOrDefault(allAttributesValues: EavValues<any>, languageKey: string, defaultLanguage: string): EavValue<any> {\r\n    let translation = LocalizationHelpers.getValueTranslation(allAttributesValues, languageKey, defaultLanguage);\r\n    if (translation == null) {\r\n      translation = LocalizationHelpers.getValueTranslation(allAttributesValues, defaultLanguage, defaultLanguage);\r\n    }\r\n    return translation;\r\n  }\r\n\r\n  static getValueTranslation(allAttributesValues: EavValues<any>, languageKey: string, defaultLanguage: string): EavValue<any> {\r\n    return allAttributesValues.Values.find(eavValue =>\r\n      eavValue.Dimensions.find(d => d.Value === languageKey\r\n        || d.Value === `~${languageKey}`\r\n        || (languageKey === defaultLanguage && d.Value === '*')) !== undefined);\r\n  }\r\n\r\n  static isEditableOrReadonlyTranslationExist(allAttributesValues: EavValues<any>, languageKey: string, defaultLanguage: string): boolean {\r\n    return allAttributesValues ? allAttributesValues.Values.filter(c =>\r\n      c.Dimensions.find(d =>\r\n        d.Value === languageKey\r\n        || d.Value === `~${languageKey}`\r\n        || (languageKey === defaultLanguage && d.Value === '*'))).length > 0 : false;\r\n  }\r\n\r\n  /** Language is editable if langageKey exist or on default language * exist */\r\n  static isEditableTranslationExist(allAttributesValues: EavValues<any>, languageKey: string, defaultLanguage: string): boolean {\r\n    return allAttributesValues ? allAttributesValues.Values.filter(eavValue =>\r\n      eavValue.Dimensions.find(d => (d.Value === languageKey)\r\n        || (languageKey === defaultLanguage && d.Value === '*'))).length > 0 : false;\r\n  }\r\n\r\n  static isReadonlyTranslationExist(allAttributesValues: EavValues<any>, languageKey: string): boolean {\r\n    return allAttributesValues ? allAttributesValues.Values.filter(eavValue =>\r\n      eavValue.Dimensions.find(d => d.Value === `~${languageKey}`)).length > 0 : false;\r\n  }\r\n\r\n  static translationExistsInDefault(allAttributesValues: EavValues<any>, defaultLanguage: string): boolean {\r\n    return allAttributesValues ? allAttributesValues.Values.filter(eavValue =>\r\n      eavValue.Dimensions.find(d => d.Value === defaultLanguage || d.Value === '*')).length > 0 : false;\r\n  }\r\n\r\n  /** Copy attributes from item */\r\n  private static updateAttribute(\r\n    oldAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    attribute: EavValues<any>,\r\n  ): EavEntityAttributes {\r\n    const newAttributes: EavEntityAttributes = {};\r\n    if (Object.keys(oldAttributes).length === 0) {\r\n      const attributeCopy: EavValues<any> = { ...attribute };\r\n      newAttributes[attributeKey] = attributeCopy;\r\n      return newAttributes;\r\n    }\r\n\r\n    for (const key of Object.keys(oldAttributes)) {\r\n      if (key === attributeKey) {\r\n        const attributeCopy: EavValues<any> = { ...attribute };\r\n        newAttributes[key] = attributeCopy;\r\n      } else {\r\n        const attributeCopy: EavValues<any> = { ...oldAttributes[key] };\r\n        newAttributes[key] = attributeCopy;\r\n      }\r\n    }\r\n\r\n    if (oldAttributes[attributeKey] == null) {\r\n      const attributeCopy: EavValues<any> = { ...attribute };\r\n      newAttributes[attributeKey] = attributeCopy;\r\n    }\r\n    return newAttributes;\r\n  }\r\n\r\n  /** Update values for languageKey */\r\n  static updateAttributesValues(\r\n    allAttributes: EavEntityAttributes,\r\n    updateValues: FormValues,\r\n    languageKey: string,\r\n    defaultLanguage: string,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    const eavAttributes: EavEntityAttributes = {};\r\n    Object.keys(allAttributes).forEach(attributeKey => {\r\n      const newItemValue = updateValues[attributeKey];\r\n      // if new value exist update attribute for languageKey\r\n      // if (newItemValue !== null && newItemValue !== undefined) {\r\n      if (newItemValue !== undefined) {\r\n        const valueWithLanguageExist = this.isEditableOrReadonlyTranslationExist(\r\n          allAttributes[attributeKey], languageKey, defaultLanguage);\r\n\r\n        // if valueWithLanguageExist update value for languageKey\r\n        if (valueWithLanguageExist) {\r\n          const newValues: EavValues<any> = {\r\n            ...allAttributes[attributeKey], Values: allAttributes[attributeKey].Values.map(eavValue => {\r\n              const newValue: EavValue<any> = eavValue.Dimensions.find(d => d.Value === languageKey\r\n                || d.Value === `~${languageKey}`\r\n                || (languageKey === defaultLanguage && d.Value === '*'))\r\n                // Update value for languageKey\r\n                ? {\r\n                  ...eavValue,\r\n                  Value: newItemValue,\r\n                }\r\n                : eavValue;\r\n              return newValue;\r\n            })\r\n          };\r\n          eavAttributes[attributeKey] = newValues;\r\n        } else { // else add new value with dimension languageKey\r\n          consoleLogAngular('saveAttributeValues add values ', newItemValue);\r\n          const newEavValue = EavValue.create(newItemValue, [EavDimension.create(languageKey)]);\r\n          const newAttribute: EavValues<any> = {\r\n            ...allAttributes[attributeKey],\r\n            Values: [...allAttributes[attributeKey].Values, newEavValue]\r\n          };\r\n          eavAttributes[attributeKey] = newAttribute;\r\n        }\r\n      } else { // else copy item attributes\r\n        const attributeCopy: EavValues<any> = { ...allAttributes[attributeKey] };\r\n        eavAttributes[attributeKey] = attributeCopy;\r\n      }\r\n    });\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** update attribute value, and change language readonly state if needed */\r\n  static updateAttributeValue(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    updateValue: FieldValue,\r\n    existingLanguageKey: string,\r\n    defaultLanguage: string,\r\n    isReadOnly: boolean,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    let newLanguageValue = existingLanguageKey;\r\n\r\n    if (isReadOnly) {\r\n      newLanguageValue = `~${existingLanguageKey}`;\r\n    }\r\n\r\n    const attribute: EavValues<any> = {\r\n      ...allAttributes[attributeKey], Values: allAttributes[attributeKey].Values.map(eavValue => {\r\n        const newValue: EavValue<any> = eavValue.Dimensions.find(d => d.Value === existingLanguageKey\r\n          || d.Value === `~${existingLanguageKey}`\r\n          || (existingLanguageKey === defaultLanguage && d.Value === '*')\r\n        )\r\n          // Update value and dimension\r\n          ? {\r\n            ...eavValue,\r\n            // update value\r\n            Value: updateValue,\r\n            // update languageKey with newLanguageValue\r\n            Dimensions: eavValue.Dimensions.map(dimension => {\r\n              const newDimensions: EavDimension = (dimension.Value === existingLanguageKey\r\n                || dimension.Value === `~${existingLanguageKey}`\r\n                || (existingLanguageKey === defaultLanguage && dimension.Value === '*'))\r\n                ? { Value: newLanguageValue }\r\n                : dimension;\r\n              return newDimensions;\r\n            })\r\n          }\r\n          : eavValue;\r\n        return newValue;\r\n      })\r\n    };\r\n    eavAttributes = this.updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  static addAttributeValue(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeValue: EavValue<any>,\r\n    attributeKey: string,\r\n    attributeType: string,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    const attribute: EavValues<any> =\r\n      Object.keys(allAttributes).length === 0\r\n        || !allAttributes[attributeKey] ?\r\n        {\r\n          // Add attribute\r\n          ...allAttributes[attributeKey], Values: [attributeValue], Type: attributeType\r\n        }\r\n        : {\r\n          // Add attribute\r\n          ...allAttributes[attributeKey], Values: [...allAttributes[attributeKey].Values, attributeValue], Type: attributeType\r\n        };\r\n    eavAttributes = this.updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** Add dimension to value with existing dimension */\r\n  static addAttributeDimension(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    newDimensionValue: string,\r\n    existingDimensionValue: string,\r\n    defaultLanguage: string,\r\n    isReadOnly: boolean,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    let newLanguageValue = newDimensionValue;\r\n\r\n    if (isReadOnly) {\r\n      newLanguageValue = `~${newDimensionValue}`;\r\n    }\r\n\r\n    const attribute: EavValues<any> = {\r\n      ...allAttributes[attributeKey], Values: allAttributes[attributeKey].Values.map(eavValue => {\r\n        const newValue: EavValue<any> = eavValue.Dimensions.find(d => d.Value === existingDimensionValue\r\n          || (existingDimensionValue === defaultLanguage && d.Value === '*'))\r\n          // Update dimension for current language\r\n          ? {\r\n            ...eavValue,\r\n            // if languageKey already exist\r\n            Dimensions: eavValue.Dimensions.concat({ Value: newLanguageValue })\r\n          }\r\n          : eavValue;\r\n        return newValue;\r\n      })\r\n    };\r\n    eavAttributes = this.updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** Removes dimension (language) from attribute. If multiple dimensions exist, delete only dimension, else delete value and dimension */\r\n  static removeAttributeDimension(attributes: EavEntityAttributes, attributeKey: string, language: string): EavEntityAttributes {\r\n    const oldAttributes = attributes;\r\n    const validDimensions = [language, `~${language}`];\r\n\r\n    const value = oldAttributes[attributeKey].Values.find(eavValue => {\r\n      const dimensionExists = eavValue.Dimensions.some(dimension => validDimensions.includes(dimension.Value));\r\n      return dimensionExists;\r\n    });\r\n\r\n    // given dimension doesn't exist for this attribute so no change is needed\r\n    if (!value) {\r\n      const attributesCopy: EavEntityAttributes = { ...oldAttributes };\r\n      return attributesCopy;\r\n    }\r\n\r\n    let newAttribute: EavValues<any>;\r\n    if (value.Dimensions.length > 1) {\r\n      // if multiple dimensions exist delete only dimension\r\n      newAttribute = {\r\n        ...oldAttributes[attributeKey],\r\n        Values: oldAttributes[attributeKey].Values.map(eavValue => {\r\n          const dimensionExists = eavValue.Dimensions.some(dimension => validDimensions.includes(dimension.Value));\r\n          if (!dimensionExists) { return eavValue; }\r\n\r\n          const newValue: EavValue<any> = {\r\n            ...eavValue,\r\n            Dimensions: eavValue.Dimensions.filter(dimension => !validDimensions.includes(dimension.Value)),\r\n          };\r\n          return newValue;\r\n        })\r\n      };\r\n    } else if (value.Dimensions.length === 1) {\r\n      // if only one dimension exists delete value and dimension\r\n      newAttribute = {\r\n        ...oldAttributes[attributeKey],\r\n        Values: oldAttributes[attributeKey].Values.filter(eavValue => {\r\n          const dimensionExists = eavValue.Dimensions.some(dimension => validDimensions.includes(dimension.Value));\r\n          return !dimensionExists;\r\n        })\r\n      };\r\n    }\r\n\r\n    const newAttributes = this.updateAttribute(oldAttributes, attributeKey, newAttribute);\r\n    return newAttributes;\r\n  }\r\n\r\n  /**\r\n   * Default mode priority:\r\n   * 1. value for current language\r\n   * 2. value for all languages\r\n   * 3. value for default language\r\n   * 4. first value\r\n   *\r\n   * Strict mode priority:\r\n   * 1. value for current language\r\n   * 2. value for all languages\r\n   * 3. value for default language\r\n   *\r\n   * Very strict mode priority:\r\n   * 1. value for current language\r\n   * 2. value for all languages\r\n   */\r\n  static getBestValue(eavValues: EavValues<any>, currentLanguage: string, defaultLanguage: string, mode: BestValueMode): FieldValue {\r\n    if (eavValues == null) { return; }\r\n\r\n    let bestDimensions = [currentLanguage, `~${currentLanguage}`];\r\n    let bestValue = this.findValueForDimensions(eavValues, bestDimensions);\r\n    if (bestValue !== undefined) { return bestValue; }\r\n\r\n    bestDimensions = ['*'];\r\n    bestValue = this.findValueForDimensions(eavValues, bestDimensions);\r\n    if (bestValue !== undefined) { return bestValue; }\r\n\r\n    if (mode === BestValueModes.Strict) { return; }\r\n\r\n    bestDimensions = [defaultLanguage, `~${defaultLanguage}`];\r\n    bestValue = this.findValueForDimensions(eavValues, bestDimensions);\r\n    if (bestValue !== undefined) { return bestValue; }\r\n\r\n    bestValue = eavValues.Values[0]?.Value;\r\n    return bestValue;\r\n  }\r\n\r\n  private static findValueForDimensions(eavValues: EavValues<any>, dimensions: string[]): FieldValue {\r\n    const value = eavValues.Values.find(\r\n      eavValue => !!eavValue.Dimensions.find(dimension => dimensions.includes(dimension.Value)),\r\n    )?.Value;\r\n    return value;\r\n  }\r\n}\r\n","import { JsInfo } from '@2sic.com/2sxc-typings';\r\nimport { Injector } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { UrlHelpers } from '../../../edit/shared/helpers/url.helpers';\r\nimport { DialogTypeConstants } from './shared/constants/dialog-types.constants';\r\n// tslint:disable-next-line:max-line-length\r\nimport { keyApi, keyAppId, keyContentType, keyDialog, keyItems, keyPipelineId, keyRequestToken, keyTabId, keyUrl, keyZoneId, prefix } from './shared/constants/session.constants';\r\nimport { convertFormToUrl } from './shared/helpers/url-prep.helper';\r\nimport { EavWindow } from './shared/models/eav-window.model';\r\nimport { EditForm, EditItem, GroupItem } from './shared/models/edit-form.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport function paramsInitFactory(injector: Injector): () => void {\r\n  return () => {\r\n    console.log('Setting parameters config and clearing route');\r\n    const eavKeys = Object.keys(sessionStorage).filter(key => key.startsWith(prefix));\r\n    const isParamsRoute = !window.location.hash.startsWith('#/');\r\n    if (isParamsRoute) {\r\n      console.log('Initial route:', window.location.href);\r\n      // clear our part of the session\r\n      for (const key of eavKeys) {\r\n        sessionStorage.removeItem(key);\r\n      }\r\n      sessionStorage.setItem(keyUrl, window.location.href); // save url which opened the dialog\r\n      sessionStorage.setItem(keyDialog, DialogTypeConstants.Edit); // set edit dialog as the default\r\n\r\n      // save params\r\n      const urlHash = window.location.hash.substring(1); // substring removes first # char\r\n      const queryParametersFromUrl = UrlHelpers.readQueryStringParameters(urlHash);\r\n\r\n      for (const [paramKey, paramValue] of Object.entries(queryParametersFromUrl)) {\r\n        if (paramValue == null) { continue; }\r\n        sessionStorage.setItem(prefix + paramKey, paramValue);\r\n      }\r\n\r\n      // redirect\r\n      const router = injector.get(Router);\r\n      const zoneId = sessionStorage.getItem(keyZoneId);\r\n      const appId = sessionStorage.getItem(keyAppId);\r\n      const dialog = sessionStorage.getItem(keyDialog);\r\n      const contentType = sessionStorage.getItem(keyContentType);\r\n      const items = sessionStorage.getItem(keyItems);\r\n      switch (dialog) {\r\n        case DialogTypeConstants.Zone:\r\n          router.navigate([`${zoneId}/apps`]);\r\n          break;\r\n        case DialogTypeConstants.AppImport:\r\n          router.navigate([`${zoneId}/import`]);\r\n          break;\r\n        case DialogTypeConstants.App:\r\n          router.navigate([`${zoneId}/${appId}/app`]);\r\n          break;\r\n        case DialogTypeConstants.ContentType:\r\n          router.navigate([`${zoneId}/${appId}/fields/${contentType}`]);\r\n          break;\r\n        case DialogTypeConstants.ContentItems:\r\n          router.navigate([`${zoneId}/${appId}/items/${contentType}`]);\r\n          break;\r\n        case DialogTypeConstants.Edit:\r\n          const editItems: EditItem[] = JSON.parse(items);\r\n          const form: EditForm = { items: editItems };\r\n          const formUrl = convertFormToUrl(form);\r\n          router.navigate([`${zoneId}/${appId}/edit/${formUrl}`]);\r\n          break;\r\n        case DialogTypeConstants.ItemHistory:\r\n          const historyItems: EditItem[] = JSON.parse(items);\r\n          router.navigate([`${zoneId}/${appId}/versions/${historyItems[0].EntityId}`]);\r\n          break;\r\n        case DialogTypeConstants.Develop:\r\n          router.navigate([`${zoneId}/${appId}/code`]);\r\n          break;\r\n        case DialogTypeConstants.PipelineDesigner:\r\n          const pipelineId = sessionStorage.getItem(keyPipelineId);\r\n          router.navigate([`${zoneId}/${appId}/query/${pipelineId}`]);\r\n          break;\r\n        case DialogTypeConstants.Replace:\r\n          const replaceItems: GroupItem[] = JSON.parse(items);\r\n          const rGuid = replaceItems[0].Group.Guid;\r\n          const rPart = replaceItems[0].Group.Part;\r\n          const rIndex = replaceItems[0].Group.Index;\r\n          const add = replaceItems[0].Group.Add;\r\n          const queryParams = add ? { add: true } : {};\r\n          router.navigate([`${zoneId}/${appId}/${rGuid}/${rPart}/${rIndex}/replace`], { queryParams });\r\n          break;\r\n        case DialogTypeConstants.InstanceList:\r\n          const groupItems: GroupItem[] = JSON.parse(items);\r\n          const gGuid = groupItems[0].Group.Guid;\r\n          const gPart = groupItems[0].Group.Part;\r\n          const gIndex = groupItems[0].Group.Index;\r\n          router.navigate([`${zoneId}/${appId}/${gGuid}/${gPart}/${gIndex}/reorder`]);\r\n          break;\r\n        default:\r\n          alert(`Cannot open unknown dialog \"${dialog}\"`);\r\n          try {\r\n            window.parent.$2sxc.totalPopup.close();\r\n          } catch (error) { }\r\n      }\r\n    } else if (eavKeys.length === 0) {\r\n      // if not params route and no params are saved, e.g. browser was reopened, throw error\r\n      alert('Missing required url parameters. Please reopen dialog.');\r\n      throw new Error('Missing required url parameters. Please reopen dialog.');\r\n    } else {\r\n      console.log('Initial route:', sessionStorage.getItem(keyUrl));\r\n    }\r\n\r\n    loadEnvironment();\r\n  };\r\n}\r\n\r\nfunction loadEnvironment() {\r\n  const jsInfo: Partial<JsInfo> = {\r\n    page: parseInt(sessionStorage.getItem(keyTabId), 10),\r\n    rvt: sessionStorage.getItem(keyRequestToken),\r\n    api: sessionStorage.getItem(keyApi),\r\n  };\r\n  window.$2sxc.env.load(jsInfo as JsInfo);\r\n}\r\n","import { EavContentTypeAttribute, EavEntity, EavEntityAttributes } from '.';\r\nimport { ContentType1 } from '../json-format-v1';\r\n\r\nexport class EavContentType {\r\n  Attributes: EavContentTypeAttribute[];\r\n  Description: string;\r\n  Id: string;\r\n  Metadata: EavEntity[];\r\n  Name: string;\r\n  Scope: string;\r\n  Settings: EavEntityAttributes;\r\n\r\n  static convert(contentType1: ContentType1): EavContentType {\r\n    const attributes = EavContentTypeAttribute.convertMany(contentType1.Attributes);\r\n    const metadata = EavEntity.convertMany(contentType1.Metadata);\r\n    const settings = EavEntityAttributes.mergeSettings(metadata);\r\n\r\n    const contentType: EavContentType = {\r\n      Attributes: attributes,\r\n      Description: contentType1.Description,\r\n      Id: contentType1.Id,\r\n      Metadata: metadata,\r\n      Name: contentType1.Name,\r\n      Scope: contentType1.Scope,\r\n      Settings: settings,\r\n    };\r\n    return contentType;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { InputType } from '../../../../ng-dialogs/src/app/content-type-fields/models/input-type.model';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class InputTypeService extends BaseDataService<InputType> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('InputType', serviceElementsFactory);\r\n  }\r\n\r\n  addInputTypes(inputTypes: InputType[]): void {\r\n    this.addManyToCache(inputTypes);\r\n  }\r\n\r\n  getInputType(type: string): InputType {\r\n    return this.cache$.value.find(inputType => inputType.Type === type);\r\n  }\r\n\r\n  getInputTypes(): InputType[] {\r\n    return this.cache$.value;\r\n  }\r\n\r\n  getInputTypes$(): Observable<InputType[]> {\r\n    return this.cache$.asObservable();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport { LanguageInstance } from '../../models';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LanguageInstanceService extends BaseDataService<LanguageInstance> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('LanguageInstance', serviceElementsFactory);\r\n  }\r\n\r\n  addLanguageInstance(formId: number, currentLanguage: string, defaultLanguage: string, uiLanguage: string, hideHeader: boolean): void {\r\n    const languageInstance: LanguageInstance = { formId, currentLanguage, defaultLanguage, uiLanguage, hideHeader };\r\n    this.addOneToCache(languageInstance);\r\n  }\r\n\r\n  removeLanguageInstance(formId: number): void {\r\n    this.removeOneFromCache(formId);\r\n  }\r\n\r\n  setCurrentLanguage(formId: number, newLanguage: string): void {\r\n    const languageInstance: Partial<LanguageInstance> = { formId, currentLanguage: newLanguage };\r\n    this.updateOneInCache(languageInstance);\r\n  }\r\n\r\n  getCurrentLanguage(formId: number): string {\r\n    return this.cache$.value.find(languageInstance => languageInstance.formId === formId)?.currentLanguage;\r\n  }\r\n\r\n  getCurrentLanguage$(formId: number): Observable<string> {\r\n    return this.cache$.pipe(\r\n      map(languageInstances => languageInstances.find(languageInstance => languageInstance.formId === formId)?.currentLanguage),\r\n      distinctUntilChanged(),\r\n    );\r\n  }\r\n\r\n  getDefaultLanguage(formId: number): string {\r\n    return this.cache$.value.find(languageInstance => languageInstance.formId === formId)?.defaultLanguage;\r\n  }\r\n\r\n  getDefaultLanguage$(formId: number): Observable<string> {\r\n    return this.cache$.pipe(\r\n      map(languageInstances => languageInstances.find(languageInstance => languageInstance.formId === formId)?.defaultLanguage),\r\n      distinctUntilChanged(),\r\n    );\r\n  }\r\n\r\n  /** Get hideHeader for the form. Fix for safari and mobile browsers */\r\n  getHideHeader$(formId: number): Observable<boolean> {\r\n    return this.cache$.pipe(\r\n      map(languageInstances => languageInstances.find(languageInstance => languageInstance.formId === formId)?.hideHeader),\r\n      distinctUntilChanged(),\r\n    );\r\n  }\r\n\r\n  /** Update hideHeader for the form. Fix for safari and mobile browsers */\r\n  updateHideHeader(formId: number, hideHeader: boolean): void {\r\n    const languageInstance: Partial<LanguageInstance> = { formId, hideHeader };\r\n    this.updateOneInCache(languageInstance);\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { distinctUntilChanged, filter, map, pairwise, startWith } from 'rxjs/operators';\r\nimport { EavService } from '.';\r\nimport { ItemHistoryResult } from '../../../ng-dialogs/src/app/item-history/models/item-history-result.model';\r\nimport { convertFormToUrl } from '../../../ng-dialogs/src/app/shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../../ng-dialogs/src/app/shared/models/edit-form.model';\r\nimport { EditEntryComponent } from '../../edit-entry/edit-entry.component';\r\nimport { EditParams } from '../../edit-matcher.models';\r\nimport { UrlHelpers } from '../helpers';\r\nimport { ChildFormResult, NavigateFormResult } from '../models';\r\nimport { LanguageInstanceService } from '../store/ngrx-data';\r\n\r\n@Injectable()\r\nexport class EditRoutingService implements OnDestroy {\r\n  private subscription: Subscription;\r\n  private childFormResult$: Subject<ChildFormResult>;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<EditEntryComponent>,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private languageInstanceService: LanguageInstanceService,\r\n    private eavService: EavService,\r\n  ) { }\r\n\r\n  ngOnDestroy() {\r\n    this.childFormResult$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  init() {\r\n    this.subscription = new Subscription();\r\n    this.childFormResult$ = new Subject<ChildFormResult>();\r\n    this.initHideHeader();\r\n    this.initChildFormResult();\r\n    this.refreshOnChildVersionsClosed();\r\n  }\r\n\r\n  /** Tells if field with this index should be expanded */\r\n  isExpanded(fieldId: number, entityGuid: string) {\r\n    const fieldIndex = fieldId.toString();\r\n    const params = this.route.snapshot.params as EditParams;\r\n    const isExpanded = params.detailsEntityGuid === entityGuid && params.detailsFieldId === fieldIndex;\r\n    return isExpanded;\r\n  }\r\n\r\n  /** Tells if field with this index should be expanded */\r\n  isExpanded$(fieldId: number, entityGuid: string) {\r\n    const fieldIndex = fieldId.toString();\r\n    return this.route.params.pipe(\r\n      map((params: EditParams) => params.detailsEntityGuid === entityGuid && params.detailsFieldId === fieldIndex),\r\n      distinctUntilChanged()\r\n    );\r\n  }\r\n\r\n  /** Fires when child form is closed and has a result, new entity was added */\r\n  childFormResult(fieldId: number, entityGuid: string) {\r\n    return this.childFormResult$.pipe(\r\n      filter(\r\n        childResult => childResult.updateEntityGuid === entityGuid && childResult.updateFieldId === fieldId && childResult.result != null\r\n      ),\r\n      map(childResult => childResult.result)\r\n    );\r\n  }\r\n\r\n  /** Fires when child form is closed */\r\n  childFormClosed() {\r\n    return this.childFormResult$.pipe(map(childResult => null));\r\n  }\r\n\r\n  expand(expand: boolean, fieldId: number, entityGuid: string, componentTag?: string) {\r\n    const params = this.route.snapshot.params as EditParams;\r\n    const oldHasDetails = params.detailsEntityGuid != null && params.detailsFieldId != null;\r\n    const oldEditUrl = `edit/${params.items}` + (oldHasDetails ? `/details/${params.detailsEntityGuid}/${params.detailsFieldId}` : '');\r\n    const newEditUrl = `edit/${params.items}` + (expand ? `/details/${entityGuid}/${fieldId}` : '');\r\n\r\n    const currentUrl = UrlHelpers.calculatePathFromRoot(this.route);\r\n    const lastIndex = currentUrl.lastIndexOf(oldEditUrl);\r\n    if (lastIndex <= 0) { return; }\r\n    const newUrl = currentUrl.substring(0, lastIndex) + currentUrl.substring(lastIndex).replace(oldEditUrl, newEditUrl);\r\n    this.router.navigate([newUrl], { state: componentTag && { componentTag } });\r\n  }\r\n\r\n  /** Opens child dialog and stores update entityGuid and fieldId in the url, if field is not expanded already */\r\n  open(fieldId: number, entityGuid: string, form: EditForm) {\r\n    const formUrl = convertFormToUrl(form);\r\n    const params = this.route.snapshot.params as EditParams;\r\n    const hasDetails = params.detailsEntityGuid != null && params.detailsFieldId != null;\r\n    // if field is expanded, just open child because that info will be used for field update\r\n    if (hasDetails) {\r\n      this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n      return;\r\n    }\r\n\r\n    // otherwise add /update/:entityGuid/:fieldId to the url\r\n    const oldEditUrl = `edit/${params.items}`;\r\n    const newEditUrl = `edit/${params.items}/update/${entityGuid}/${fieldId}/edit/${formUrl}`;\r\n\r\n    const currentUrl = UrlHelpers.calculatePathFromRoot(this.route);\r\n    const lastIndex = currentUrl.lastIndexOf(oldEditUrl);\r\n    if (lastIndex <= 0) { return; }\r\n    const newUrl = currentUrl.substring(0, lastIndex) + currentUrl.substring(lastIndex).replace(oldEditUrl, newEditUrl);\r\n    this.router.navigate([newUrl]);\r\n  }\r\n\r\n  /** Update hideHeader for the form. Fix for safari and mobile browsers */\r\n  private initHideHeader() {\r\n    this.subscription.add(\r\n      this.route.params\r\n        .pipe(\r\n          map((params: EditParams) => params.detailsEntityGuid != null && params.detailsFieldId != null),\r\n          distinctUntilChanged(),\r\n        )\r\n        .subscribe(hasDetails => {\r\n          this.languageInstanceService.updateHideHeader(this.eavService.eavConfig.formId, hasDetails);\r\n        })\r\n    );\r\n  }\r\n\r\n  private initChildFormResult() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n        map(() => {\r\n          const params = this.route.snapshot.params as EditParams;\r\n          const hasDetails = params.detailsEntityGuid != null && params.detailsFieldId != null;\r\n          const updateEntityGuid = hasDetails ? params.detailsEntityGuid : params.updateEntityGuid;\r\n          const updateFieldId = hasDetails ? params.detailsFieldId : params.updateFieldId;\r\n          const navigation = this.router.getCurrentNavigation();\r\n          const editResult = navigation.extras?.state;\r\n          const formResult: ChildFormResult = {\r\n            updateEntityGuid,\r\n            updateFieldId: parseInt(updateFieldId, 10),\r\n            result: editResult,\r\n          };\r\n          return formResult;\r\n        }),\r\n      ).subscribe(formResult => {\r\n        // alert subscribers that child form closed\r\n        this.childFormResult$.next(formResult);\r\n\r\n        // clear update ids from url (leave expanded/details)\r\n        const params = this.route.snapshot.params as EditParams;\r\n        const hasUpdate = params.updateEntityGuid != null && params.updateFieldId != null;\r\n        if (!hasUpdate) { return; }\r\n\r\n        const oldEditUrl = `edit/${params.items}/update/${params.updateEntityGuid}/${params.updateFieldId}`;\r\n        const newEditUrl = `edit/${params.items}`;\r\n\r\n        const currentUrl = UrlHelpers.calculatePathFromRoot(this.route);\r\n        const lastIndex = currentUrl.lastIndexOf(oldEditUrl);\r\n        if (lastIndex <= 0) { return; }\r\n        const newUrl = currentUrl.substring(0, lastIndex) + currentUrl.substring(lastIndex).replace(oldEditUrl, newEditUrl);\r\n        this.router.navigate([newUrl]);\r\n      })\r\n    );\r\n  }\r\n\r\n  private refreshOnChildVersionsClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n        map(() => {\r\n          const navigation = this.router.getCurrentNavigation();\r\n          const versionsResult = navigation.extras?.state as ItemHistoryResult;\r\n          return versionsResult;\r\n        }),\r\n        filter(versionsResult => versionsResult?.refreshEdit != null),\r\n      ).subscribe(result => {\r\n        if (!result.refreshEdit) { return; }\r\n        const params = this.route.snapshot.params as EditParams;\r\n        const oldEditUrl = `edit/${params.items}`;\r\n        const newEditUrl = `edit/refresh/${params.items}`;\r\n\r\n        const currentUrl = UrlHelpers.calculatePathFromRoot(this.route);\r\n        const lastIndex = currentUrl.lastIndexOf(oldEditUrl);\r\n        if (lastIndex <= 0) { return; }\r\n        const newUrl = currentUrl.substring(0, lastIndex) + currentUrl.substring(lastIndex).replace(oldEditUrl, newEditUrl);\r\n        const navRes: NavigateFormResult = {\r\n          navigateUrl: newUrl,\r\n        };\r\n        this.dialogRef.close(navRes);\r\n      })\r\n    );\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M224 280.593C224 267.01 212.989 256 199.407 256H88.593C75.011 256 64 267.01 64 280.593v110.815C64 404.99 75.011 416 88.593 416h110.814C212.989 416 224 404.99 224 391.407V381l27.971 27.971a23.998 23.998 0 0 0 16.97 7.029H296c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-27.059a24.003 24.003 0 0 0-16.97 7.029L224 291v-10.407zM192 384H96v-96h96v96zm80.255-96H288v96h-15.745L224 342.826v-13.652L272.255 288zm97.686-190.059l-83.883-83.882A47.996 47.996 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zM256 32.491a15.888 15.888 0 0 1 7.432 4.195l83.882 83.882a15.882 15.882 0 0 1 4.195 7.431H256V32.491zM352 464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V48c0-8.837 7.164-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304z\\\"/></svg>\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M2.98187 13.2188C3.38292 13.2083 3.70844 13.1016 3.95844 12.8984C4.21365 12.6901 4.38292 12.4062 4.46625 12.0469C4.54958 11.6875 4.59385 11.0729 4.59906 10.2031C4.60427 9.33333 4.6199 8.76042 4.64594 8.48438C4.69281 8.04688 4.77875 7.69531 4.90375 7.42969C5.03396 7.16406 5.19281 6.95312 5.38031 6.79688C5.56781 6.63542 5.8074 6.51302 6.09906 6.42969C6.29698 6.3776 6.6199 6.35156 7.06781 6.35156H7.50531V7.57812H7.26312C6.72146 7.57812 6.36208 7.67708 6.185 7.875C6.00792 8.06771 5.91937 8.5026 5.91937 9.17969C5.91937 10.5443 5.89073 11.4062 5.83344 11.7656C5.73969 12.3229 5.57823 12.7526 5.34906 13.0547C5.1251 13.3568 4.77094 13.625 4.28656 13.8594C4.85948 14.099 5.27354 14.4661 5.52875 14.9609C5.78917 15.4505 5.91937 16.2552 5.91937 17.375C5.91937 18.3906 5.92979 18.9948 5.95062 19.1875C5.99229 19.5417 6.09646 19.7891 6.26312 19.9297C6.435 20.0703 6.76833 20.1406 7.26312 20.1406H7.50531V21.3672H7.06781C6.5574 21.3672 6.1876 21.3255 5.95844 21.2422C5.6251 21.1224 5.34906 20.9271 5.13031 20.6562C4.91156 20.3906 4.76833 20.0521 4.70062 19.6406C4.63812 19.2292 4.60427 18.5547 4.59906 17.6172C4.59385 16.6797 4.54958 16.0312 4.46625 15.6719C4.38292 15.3125 4.21365 15.0286 3.95844 14.8203C3.70844 14.612 3.38292 14.5026 2.98187 14.4922V13.2188ZM8.05344 18V16.3984H9.655V18H8.05344ZM11.2266 18V16.3984H12.8281V18H11.2266ZM14.3997 18V16.3984H16.0012V18H14.3997ZM21.0103 13.2188V14.4922C20.6093 14.5026 20.2811 14.612 20.0259 14.8203C19.7759 15.0286 19.6093 15.3125 19.5259 15.6719C19.4426 16.026 19.3983 16.638 19.3931 17.5078C19.3879 18.3776 19.3723 18.9505 19.3462 19.2266C19.2994 19.6693 19.2108 20.0208 19.0806 20.2812C18.9556 20.5469 18.7994 20.7578 18.6119 20.9141C18.4244 21.0755 18.1848 21.1979 17.8931 21.2812C17.6952 21.3385 17.3723 21.3672 16.9244 21.3672H16.4869V20.1406H16.7291C17.2707 20.1406 17.6301 20.0417 17.8072 19.8438C17.9843 19.651 18.0728 19.2135 18.0728 18.5312C18.0728 17.2292 18.0962 16.4036 18.1431 16.0547C18.2265 15.4766 18.3931 15.0156 18.6431 14.6719C18.8931 14.3229 19.2473 14.0521 19.7056 13.8594C19.1067 13.5729 18.6848 13.1953 18.44 12.7266C18.1952 12.2526 18.0728 11.4557 18.0728 10.3359C18.0728 9.32031 18.0598 8.71354 18.0337 8.51562C17.9973 8.16667 17.8931 7.92448 17.7212 7.78906C17.5546 7.64844 17.2239 7.57812 16.7291 7.57812H16.4869V6.35156H16.9244C17.4348 6.35156 17.8046 6.39323 18.0337 6.47656C18.3671 6.59115 18.6431 6.78385 18.8619 7.05469C19.0806 7.32552 19.2212 7.66667 19.2837 8.07812C19.3515 8.48958 19.3879 9.16406 19.3931 10.1016C19.3983 11.0391 19.4426 11.6875 19.5259 12.0469C19.6093 12.401 19.7759 12.6823 20.0259 12.8906C20.2811 13.099 20.6093 13.2083 21.0103 13.2188Z\\\"/>\\r\\n</svg>\\r\\n\";","import { EavEntityAttributes, EavFor, EavType } from '.';\r\nimport { Entity1 } from '../json-format-v1';\r\n\r\nexport class EavEntity {\r\n  Attributes: EavEntityAttributes;\r\n  Guid: string;\r\n  Id: number;\r\n  Owner: string;\r\n  Type: EavType;\r\n  Version: number;\r\n  For?: EavFor;\r\n  Metadata?: EavEntity[];\r\n\r\n  static convertOne(entity1: Entity1): EavEntity {\r\n    // spm 2021.01.26. is empty entity ever used?\r\n    if (entity1 == null) {\r\n      const defaultEntity: EavEntity = {\r\n        Attributes: {},\r\n        Guid: '00000000-0000-0000-0000-000000000000',\r\n        Id: 0,\r\n        Owner: '',\r\n        Type: null,\r\n        Version: 1,\r\n        For: null,\r\n        Metadata: null,\r\n      };\r\n      return defaultEntity;\r\n    }\r\n\r\n    const attributes = EavEntityAttributes.convert(entity1.Attributes);\r\n    const metadata = this.convertMany(entity1.Metadata);\r\n\r\n    const entity: EavEntity = {\r\n      Attributes: attributes,\r\n      Guid: entity1.Guid,\r\n      Id: entity1.Id,\r\n      Owner: entity1.Owner,\r\n      Type: entity1.Type,\r\n      Version: entity1.Version,\r\n      For: entity1.For,\r\n      Metadata: metadata,\r\n    };\r\n    return entity;\r\n  }\r\n\r\n  static convertMany(entities1: Entity1[]): EavEntity[] {\r\n    if (entities1 == null) { return null; }\r\n\r\n    const entities = entities1.map(entity1 => EavEntity.convertOne(entity1));\r\n    return entities;\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path d=\\\"M194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z\\\"/></svg>\";","import appleFilled from '!raw-loader!../../assets/icons/2sxc/Material-Icon-Adam-48-filled.svg';\r\nimport apple from '!raw-loader!../../assets/icons/2sxc/Material-Icon-Adam-48.svg';\r\nimport draftBranch from '!raw-loader!../../assets/icons/font-awesome/draft-branch.svg';\r\nimport fileArchive from '!raw-loader!../../assets/icons/font-awesome/file-archive.svg';\r\nimport fileAudio from '!raw-loader!../../assets/icons/font-awesome/file-audio.svg';\r\nimport fileCode from '!raw-loader!../../assets/icons/font-awesome/file-code.svg';\r\nimport fileExcel from '!raw-loader!../../assets/icons/font-awesome/file-excel.svg';\r\nimport fileImage from '!raw-loader!../../assets/icons/font-awesome/file-image.svg';\r\nimport filePdf from '!raw-loader!../../assets/icons/font-awesome/file-pdf.svg';\r\nimport filePowerpoint from '!raw-loader!../../assets/icons/font-awesome/file-powerpoint.svg';\r\nimport fileText from '!raw-loader!../../assets/icons/font-awesome/file-text.svg';\r\nimport fileVideo from '!raw-loader!../../assets/icons/font-awesome/file-video.svg';\r\nimport fileWord from '!raw-loader!../../assets/icons/font-awesome/file-word.svg';\r\nimport file from '!raw-loader!../../assets/icons/font-awesome/file.svg';\r\nimport folderPlus from '!raw-loader!../../assets/icons/font-awesome/folder-plus.svg';\r\nimport folder from '!raw-loader!../../assets/icons/font-awesome/folder.svg';\r\nimport sitemap from '!raw-loader!../../assets/icons/font-awesome/sitemap.svg';\r\nimport { Injectable } from '@angular/core';\r\nimport { MatIconRegistry } from '@angular/material/icon';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Dictionary } from '../../../ng-dialogs/src/app/shared/models/dictionary.model';\r\n\r\n@Injectable()\r\nexport class LoadIconsService {\r\n  private icons: Dictionary<string> = {\r\n    apple,\r\n    appleFilled,\r\n    'draft-branch': draftBranch,\r\n    file,\r\n    'file-archive': fileArchive,\r\n    'file-audio': fileAudio,\r\n    'file-code': fileCode,\r\n    'file-excel': fileExcel,\r\n    'file-image': fileImage,\r\n    'file-pdf': filePdf,\r\n    'file-powerpoint': filePowerpoint,\r\n    'file-text': fileText,\r\n    'file-video': fileVideo,\r\n    'file-word': fileWord,\r\n    folder,\r\n    'folder-plus': folderPlus,\r\n    sitemap,\r\n  };\r\n\r\n  constructor(private matIconRegistry: MatIconRegistry, private domSanitizer: DomSanitizer) { }\r\n\r\n  load() {\r\n    Object.entries(this.icons).forEach(([name, svg]) => {\r\n      this.matIconRegistry.addSvgIconLiteral(name, this.domSanitizer.bypassSecurityTrustHtml(svg));\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { keyDebug } from '../../../../ng-dialogs/src/app/shared/constants/session.constants';\r\nimport { GlobalConfig } from '../../models';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class GlobalConfigService extends BaseDataService<GlobalConfig> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory, private snackBar: MatSnackBar) {\r\n    super('GlobalConfig', serviceElementsFactory);\r\n\r\n    const initial: GlobalConfig = {\r\n      id: 0,\r\n      debugEnabled: sessionStorage.getItem(keyDebug) === 'true',\r\n    };\r\n    this.addOneToCache(initial);\r\n  }\r\n\r\n  getDebugEnabled(): boolean {\r\n    return this.cache$.value[0].debugEnabled;\r\n  }\r\n\r\n  getDebugEnabled$(): Observable<boolean> {\r\n    return this.cache$.pipe(map(configs => configs[0].debugEnabled));\r\n  }\r\n\r\n  toggleDebugEnabled(): void {\r\n    const oldConfig = this.cache$.value[0];\r\n    const newConfig: GlobalConfig = {\r\n      ...oldConfig,\r\n      debugEnabled: !oldConfig.debugEnabled,\r\n    };\r\n    this.updateOneInCache(newConfig);\r\n\r\n    if (newConfig.debugEnabled) {\r\n      this.snackBar.open('debug mode enabled', null, { duration: 3000 });\r\n    } else {\r\n      this.snackBar.open('debug mode disabled', null, { duration: 3000 });\r\n    }\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path d=\\\"M344 272h-72v-72c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v72h-72c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h72v72c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-72h72c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z\\\"/></svg>\";","export * from './eav-content-type-attribute';\r\nexport * from './eav-content-type';\r\nexport * from './eav-dimension';\r\nexport * from './eav-entity-attributes';\r\nexport * from './eav-entity';\r\nexport * from './eav-for';\r\nexport * from './eav-group-assignment';\r\nexport * from './eav-header';\r\nexport * from './eav-item';\r\nexport * from './eav-type';\r\nexport * from './eav-value';\r\nexport * from './eav-values';\r\n","import { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class HandleErrorsInterceptor implements HttpInterceptor {\r\n  /** URLs excluded from detailed error alert  */\r\n  private excludedUrls = [\r\n    'dist/ng-edit/i18n',\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    return next.handle(req).pipe(\r\n      catchError((error: HttpErrorResponse) => {\r\n        if (!this.checkIfExcluded(error.url)) {\r\n          this.showDetailedHttpError(error);\r\n        }\r\n        return throwError(error);\r\n      })\r\n    );\r\n  }\r\n\r\n  private checkIfExcluded(url: string) {\r\n    for (const excludedUrl of this.excludedUrls) {\r\n      if (url.includes(excludedUrl)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private showDetailedHttpError(error: HttpErrorResponse) {\r\n    let infoText = 'Had an error talking to the server (status ' + error.status + ').';\r\n    const srvResp = error.error;\r\n    if (srvResp) {\r\n      const msg = srvResp.Message;\r\n      if (msg) { infoText += '\\nMessage: ' + msg; }\r\n      const msgDet = srvResp.MessageDetail || srvResp.ExceptionMessage;\r\n      if (msgDet) { infoText += '\\nDetail: ' + msgDet; }\r\n\r\n      if (msgDet && msgDet.indexOf('No action was found') === 0) {\r\n        if (msgDet.indexOf('that matches the name') > 0) {\r\n          infoText += '\\n\\nTip from 2sxc: you probably got the action-name wrong in your JS.';\r\n        } else if (msgDet.indexOf('that matches the request.') > 0) {\r\n          infoText += '\\n\\nTip from 2sxc: Seems like the parameters are the wrong amount or type.';\r\n        }\r\n      }\r\n\r\n      if (msg && msg.indexOf('Controller') === 0 && msg.indexOf('not found') > 0) {\r\n        infoText += '\\n\\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word \\'controller\\' from the call in JS. To call a controller called \\'DemoController\\' only use \\'Demo\\'.';\r\n      }\r\n      infoText += '\\n\\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug';\r\n    }\r\n\r\n    alert(infoText);\r\n  }\r\n}\r\n","export interface LogEntry {\r\n  error: any;\r\n  label: string;\r\n  severity: LogSeverity;\r\n  time: number;\r\n}\r\n\r\nexport const LogSeverities = {\r\n  Error: 'error',\r\n  Log: 'log',\r\n  Warn: 'warn',\r\n} as const;\r\n\r\nexport type LogSeverity = typeof LogSeverities[keyof typeof LogSeverities];\r\n","import { EavFor } from '../../../../../edit/shared/models/eav';\r\nimport { eavConstants } from '../constants/eav.constants';\r\nimport { AddItem, EditForm, EditItem, GroupItem, InnerItem } from '../models/edit-form.model';\r\n\r\nexport function convertFormToUrl(form: EditForm) {\r\n  let formUrl = '';\r\n\r\n  for (const item of form.items) {\r\n    if (formUrl) { formUrl += ','; }\r\n\r\n    if ((item as InnerItem).Parent) {\r\n      // Inner Item\r\n      const innerItem = item as InnerItem;\r\n      formUrl += 'inner:' + innerItem.EntityId + ':' + innerItem.Field\r\n        + ':' + innerItem.Parent + ':' + innerItem.Add + ':' + innerItem.Index;\r\n      if (innerItem.Prefill) {\r\n        for (const [key, prefill] of Object.entries(innerItem.Prefill)) {\r\n          formUrl += '&prefill:' + key + '~' + paramEncode(prefill.toString());\r\n        }\r\n      }\r\n    } else if ((item as EditItem).EntityId) {\r\n      // Edit Item\r\n      const editItem = item as EditItem;\r\n      formUrl += editItem.EntityId;\r\n    } else if ((item as AddItem).ContentTypeName) {\r\n      // Add Item\r\n      const addItem = item as AddItem;\r\n      formUrl += 'new:' + addItem.ContentTypeName;\r\n\r\n      // new v11.11 - support Singleton\r\n      const createForSuffix = (mdFor: EavFor) => ':' + mdFor.Target\r\n        + (mdFor.Singleton ? ':' + mdFor.Singleton.toString().toLowerCase() : '');\r\n\r\n      if (addItem.For?.String) {\r\n        formUrl += '&for:s~' + paramEncode(addItem.For.String) + createForSuffix(addItem.For);\r\n      } else if (addItem.For?.Number) {\r\n        formUrl += '&for:n~' + addItem.For.Number + createForSuffix(addItem.For);\r\n      } else if (addItem.For?.Guid) {\r\n        formUrl += '&for:g~' + addItem.For.Guid + createForSuffix(addItem.For);\r\n      } else if (addItem.Metadata) {\r\n        let keyType: string;\r\n        switch (addItem.Metadata.keyType.toLocaleLowerCase()) {\r\n          case eavConstants.keyTypes.string:\r\n            keyType = 's';\r\n            break;\r\n          case eavConstants.keyTypes.number:\r\n            keyType = 'n';\r\n            break;\r\n          case eavConstants.keyTypes.guid:\r\n            keyType = 'g';\r\n            break;\r\n        }\r\n        const target = Object.values(eavConstants.metadata).find(metaValue => metaValue.type === addItem.Metadata.targetType)?.target;\r\n        formUrl += '&for:' + keyType + '~' + paramEncode(addItem.Metadata.key) + ':' + target;\r\n      }\r\n\r\n      if (addItem.Prefill) {\r\n        for (const [key, prefill] of Object.entries(addItem.Prefill)) {\r\n          formUrl += '&prefill:' + key + '~' + paramEncode(prefill.toString());\r\n        }\r\n      }\r\n\r\n      if (addItem.DuplicateEntity) {\r\n        formUrl += '&copy:' + addItem.DuplicateEntity;\r\n      }\r\n    } else if ((item as GroupItem).Group) {\r\n      // Group Item\r\n      const groupItem = item as GroupItem;\r\n      formUrl += 'group:' + groupItem.Group.Guid + ':' + groupItem.Group.Index + ':' + groupItem.Group.Part + ':' + groupItem.Group.Add;\r\n      if (groupItem.Prefill) {\r\n        for (const [key, prefill] of Object.entries(groupItem.Prefill)) {\r\n          formUrl += '&prefill:' + key + '~' + paramEncode(prefill.toString());\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return formUrl;\r\n}\r\n\r\nexport function convertUrlToForm(formUrl: string) {\r\n  const form: EditForm = { items: [] };\r\n  const items = formUrl.split(',');\r\n\r\n  for (const item of items) {\r\n    const isNumber = /^[0-9]*$/g;\r\n    if (item.startsWith('inner:')) {\r\n      // Inner Item\r\n      const innerItem = {} as InnerItem;\r\n      const options = item.split('&');\r\n\r\n      for (const option of options) {\r\n        if (option.startsWith('inner:')) {\r\n          const innerItemParams = item.split(':');\r\n          innerItem.EntityId = parseInt(innerItemParams[1], 10);\r\n          innerItem.Field = innerItemParams[2];\r\n          innerItem.Parent = innerItemParams[3];\r\n          innerItem.Add = innerItemParams[4] === 'true';\r\n          innerItem.Index = parseInt(innerItemParams[5], 10);\r\n        } else if (option.startsWith('prefill:')) {\r\n          if (innerItem.Prefill == null) {\r\n            innerItem.Prefill = {};\r\n          }\r\n          const prefillParams = option.split(':');\r\n          const key = prefillParams[1].split('~')[0];\r\n          const value = paramDecode(prefillParams[1].split('~')[1]);\r\n          innerItem.Prefill[key] = value;\r\n        }\r\n      }\r\n      form.items.push(innerItem);\r\n    } else if (isNumber.test(item)) {\r\n      // Edit Item\r\n      const editItem: EditItem = { EntityId: parseInt(item, 10) };\r\n      form.items.push(editItem);\r\n    } else if (item.startsWith('new:')) {\r\n      // Add Item\r\n      const addItem = {} as AddItem;\r\n      const options = item.split('&');\r\n\r\n      for (const option of options) {\r\n        if (option.startsWith('new:')) {\r\n          // Add Item ContentType\r\n          const newParams = option.split(':');\r\n          addItem.ContentTypeName = newParams[1];\r\n        } else if (option.startsWith('for:')) {\r\n          // Add Item For\r\n          addItem.For = {} as EavFor;\r\n          const forParams = option.split(':');\r\n          const forIntro = forParams[1].split('~');\r\n          const forType = forIntro[0];\r\n          const forValue = forIntro[1];\r\n          const forTarget = forParams[2];\r\n\r\n          switch (forType) {\r\n            case 's':\r\n              addItem.For.String = paramDecode(forValue);\r\n              break;\r\n            case 'n':\r\n              addItem.For.Number = parseInt(forValue, 10);\r\n              break;\r\n            case 'g':\r\n              addItem.For.Guid = forValue;\r\n              break;\r\n          }\r\n          // new v11.11 - Singleton Metadata\r\n          if (forParams.length > 3) {\r\n            addItem.For.Singleton = forParams[3] === 'true';\r\n          }\r\n          addItem.For.Target = forTarget;\r\n        } else if (option.startsWith('prefill:')) {\r\n          // Add Item Prefill\r\n          if (addItem.Prefill == null) {\r\n            addItem.Prefill = {};\r\n          }\r\n          const prefillParams = option.split(':');\r\n          const key = prefillParams[1].split('~')[0];\r\n          const value = paramDecode(prefillParams[1].split('~')[1]);\r\n          addItem.Prefill[key] = value;\r\n        } else if (option.startsWith('copy:')) {\r\n          // Add Item Copy\r\n          const copyParams = option.split(':');\r\n          addItem.DuplicateEntity = parseInt(copyParams[1], 10);\r\n        }\r\n      }\r\n      form.items.push(addItem);\r\n    } else if (item.startsWith('group:')) {\r\n      // Group Item\r\n      const groupItem = {} as GroupItem;\r\n      const options = item.split('&');\r\n\r\n      for (const option of options) {\r\n        if (option.startsWith('group:')) {\r\n          // Group Item Group\r\n          const groupParams = option.split(':');\r\n          groupItem.Group = {\r\n            Guid: groupParams[1],\r\n            Index: parseInt(groupParams[2], 10),\r\n            Part: groupParams[3],\r\n            Add: groupParams[4] === 'true',\r\n          };\r\n        } else if (option.startsWith('prefill:')) {\r\n          // Group Item Prefill\r\n          if (groupItem.Prefill == null) {\r\n            groupItem.Prefill = {};\r\n          }\r\n          const prefillParams = option.split(':');\r\n          const key = prefillParams[1].split('~')[0];\r\n          const value = paramDecode(prefillParams[1].split('~')[1]);\r\n          groupItem.Prefill[key] = value;\r\n        }\r\n      }\r\n      form.items.push(groupItem);\r\n    }\r\n  }\r\n\r\n  return form;\r\n}\r\n\r\n/** Encodes characters in URL parameter to not mess up routing. Don't forget to decode it! :) */\r\nfunction paramEncode(text: string) {\r\n  text = text.replace(/\\//g, '%2F');\r\n  text = text.replace(/\\:/g, '%3A');\r\n  text = text.replace(/\\&/g, '%26');\r\n  text = text.replace(/\\~/g, '%7E');\r\n  text = text.replace(/\\,/g, '%2C');\r\n  return text;\r\n}\r\n\r\n/** Decodes characters in URL parameter */\r\nfunction paramDecode(text: string) {\r\n  text = text.replace(/%2F/g, '/');\r\n  text = text.replace(/%3A/g, ':');\r\n  text = text.replace(/%26/g, '&');\r\n  text = text.replace(/%7E/g, '~');\r\n  text = text.replace(/%2C/g, ',');\r\n  return text;\r\n}\r\n","export * from './adam-cache.service';\r\nexport * from './base-data.service';\r\nexport * from './content-type-item.service';\r\nexport * from './content-type.service';\r\nexport * from './entity-cache.service';\r\nexport * from './entity-metadata';\r\nexport * from './feature.service';\r\nexport * from './global-config.service';\r\nexport * from './input-type.service';\r\nexport * from './item.service';\r\nexport * from './language-instance.service';\r\nexport * from './language.service';\r\nexport * from './link-cache.service';\r\nexport * from './publish-status.service';\r\nexport * from './string-query-cache.service';\r\n","import { ActivatedRoute } from '@angular/router';\r\nimport { Language } from '../../shared/models';\r\n\r\nexport function calculateIsParentDialog(route: ActivatedRoute) {\r\n  let editDialogCount = 0;\r\n  for (const path of route.snapshot.pathFromRoot) {\r\n    if (path.url.length <= 0) { continue; }\r\n    for (const urlSegment of path.url) {\r\n      if (urlSegment.path !== 'edit') { continue; }\r\n      editDialogCount++;\r\n    }\r\n  }\r\n  return editDialogCount === 1;\r\n}\r\n\r\nexport function sortLanguages(primaryLangKey: string, languages: Language[]) {\r\n  if (languages.length === 0) { return languages; }\r\n\r\n  let primaryLang: Language;\r\n  const sameLangs: Language[] = [];\r\n  const otherLangs: Language[] = [];\r\n  for (const language of languages) {\r\n    if (language.key === primaryLangKey) {\r\n      primaryLang = language;\r\n    } else if (language.key.startsWith(primaryLangKey.split('-')[0])) {\r\n      sameLangs.push(language);\r\n    } else {\r\n      otherLangs.push(language);\r\n    }\r\n  }\r\n  sameLangs.sort(alphabetCompare);\r\n  otherLangs.sort(alphabetCompare);\r\n\r\n  const allLangsSorted: Language[] = !primaryLang ? [...sameLangs, ...otherLangs] : [primaryLang, ...sameLangs, ...otherLangs];\r\n  return allLangsSorted;\r\n}\r\n\r\nfunction alphabetCompare(a: Language, b: Language) {\r\n  if (a.key < b.key) { return -1; }\r\n  if (a.key > b.key) { return 1; }\r\n  return 0;\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-77.6-66.6c38.5-26 61.6-69.3 61.6-115.7 0-24.7-6.5-48.9-18.9-70.1-12-20.6-29.1-37.8-49.6-50-7.1-4.2-16.3-1.9-20.6 5.2-4.2 7.1-1.9 16.3 5.2 20.6 33.1 19.7 53.7 55.8 53.7 94.3 0 36.5-18.1 70.4-48.3 90.9-6.9 4.6-8.7 14-4 20.8 2.9 4.3 7.6 6.6 12.4 6.6 3.1 0 6-.8 8.5-2.6zm-26.6-38.3c26-17.3 41.5-46.2 41.5-77.4 0-32.9-17.7-63.7-46.2-80.3-7.2-4.2-16.3-1.7-20.5 5.4-4.2 7.2-1.7 16.3 5.4 20.5 19.3 11.2 31.3 32 31.3 54.3 0 21.1-10.5 40.7-28.1 52.4-6.9 4.6-8.8 13.9-4.2 20.8 2.9 4.4 7.7 6.7 12.5 6.7 2.8.1 5.7-.7 8.3-2.4zm-27-38.2c13.7-8.5 21.8-23.1 21.8-39.2 0-17-9.3-32.5-24.2-40.6-7.3-3.9-16.4-1.2-20.3 6.1-3.9 7.3-1.2 16.4 6.1 20.3 5.2 2.8 8.5 8.3 8.5 14.2 0 5.6-2.9 10.8-7.6 13.7-7 4.4-9.2 13.6-4.8 20.7 2.8 4.6 7.7 7.1 12.8 7.1 2.5 0 5.2-.7 7.7-2.3zM138 266.7v74.7L112 322H94v-36h18l26-19.3m17.9-50.7c-2.9 0-6 1.1-8.4 3.5L104 256H76c-6.6 0-12 5.4-12 12v72c0 6.6 5.4 12 12 12h28l43.5 36.5c2.4 2.4 5.4 3.5 8.4 3.5 6.2 0 12.1-4.8 12.1-12V228c0-7.2-5.9-12-12.1-12z\\\"/></svg>\";","import { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { EavService } from '.';\r\n\r\nexport const webApiAppFilesAll = 'admin/appfiles/all';\r\nexport const webApiAppFile = 'admin/appfiles/asset';\r\nexport const webApiAppFileCreate = 'admin/appfiles/create';\r\nexport const webApiExplorer = 'admin/ApiExplorer/inspect'\r\n@Injectable()\r\nexport class AssetsService {\r\n  constructor(private http: HttpClient, private eavService: EavService, private dnnContext: DnnContext) { }\r\n\r\n  getAll(global: boolean) {\r\n    return this.http.get<string[]>(this.dnnContext.$2sxc.http.apiUrl(webApiAppFilesAll), {\r\n      params: { appId: this.eavService.eavConfig.appId, global: global.toString(), withSubfolders: 'true' },\r\n    });\r\n  }\r\n\r\n  create(path: string, global: boolean, purpose: string) {\r\n    return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiAppFileCreate), {}, {\r\n      params: { appId: this.eavService.eavConfig.appId, global: global.toString(), purpose, path }\r\n    });\r\n  }\r\n}\r\n","import { LocalizationHelpers } from '.';\r\nimport { FieldSettings } from '../../../edit-types';\r\nimport { InputTypeConstants } from '../../../ng-dialogs/src/app/content-type-fields/constants/input-type.constants';\r\nimport { InputType } from '../../../ng-dialogs/src/app/content-type-fields/models/input-type.model';\r\nimport { Dictionary } from '../../../ng-dialogs/src/app/shared/models/dictionary.model';\r\nimport { TranslateMenuHelpers } from '../../eav-material-controls/localization/translate-menu/translate-menu.helpers';\r\nimport { TranslationStateCore } from '../../eav-material-controls/localization/translate-menu/translate-menu.models';\r\nimport { TranslationLinkConstants } from '../constants';\r\nimport { ContentTypeSettings, TranslationState } from '../models';\r\nimport { EavContentType, EavContentTypeAttribute, EavEntity, EavHeader, EavValues } from '../models/eav';\r\n\r\nexport class FieldsSettingsHelpers {\r\n\r\n  static mergeSettings<T>(metadataItems: EavEntity[], currentLanguage: string, defaultLanguage: string): T {\r\n    if (metadataItems == null) { return {} as T; }\r\n\r\n    const merged: Dictionary = {};\r\n    // copy metadata settings which are not @All\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id === '@All') { continue; }\r\n\r\n      for (const [name, values] of Object.entries(item.Attributes)) {\r\n        const value = LocalizationHelpers.translate(currentLanguage, defaultLanguage, values, null);\r\n        merged[name] = value;\r\n      }\r\n    }\r\n\r\n    // copy @All metadata settings, overwriting previous settings\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id !== '@All') { continue; }\r\n\r\n      for (const [name, values] of Object.entries(item.Attributes)) {\r\n        const value = LocalizationHelpers.translate(currentLanguage, defaultLanguage, values, null);\r\n        // do not overwrite previous settings if @All is empty\r\n        const exists = merged[name] != null;\r\n        const emptyAll = value == null || value === '';\r\n        if (exists && emptyAll) { continue; }\r\n\r\n        merged[name] = value;\r\n      }\r\n    }\r\n\r\n    return merged as T;\r\n  }\r\n\r\n  static setDefaultContentTypeSettings(\r\n    settings: ContentTypeSettings,\r\n    contentType: EavContentType,\r\n    currentLanguage: string,\r\n    defaultLanguage: string,\r\n    itemHeader: EavHeader,\r\n  ): ContentTypeSettings {\r\n    const defaultSettings = { ...settings };\r\n    defaultSettings.Description ??= '';\r\n    defaultSettings.EditInstructions ??= '';\r\n    defaultSettings.Label ??= '';\r\n    defaultSettings.ListInstructions ??= '';\r\n    defaultSettings.Notes ??= '';\r\n    defaultSettings.Icon ??= '';\r\n    defaultSettings.Link ??= '';\r\n    defaultSettings._itemTitle = FieldsSettingsHelpers.getContentTypeTitle(contentType, currentLanguage, defaultLanguage);\r\n    defaultSettings._slotCanBeEmpty = itemHeader.Group?.SlotCanBeEmpty ?? false;\r\n    defaultSettings._slotIsEmpty = itemHeader.Group?.SlotIsEmpty ?? false;\r\n    return defaultSettings;\r\n  }\r\n\r\n  static setDefaultFieldSettings(settings: FieldSettings): FieldSettings {\r\n    const defaultSettings = { ...settings };\r\n    // update @All settings\r\n    defaultSettings.Name ??= '';\r\n    defaultSettings.Placeholder ??= '';\r\n    defaultSettings.Notes ??= '';\r\n    defaultSettings.VisibleInEditUI ??= true;\r\n    defaultSettings.Required ??= false;\r\n    defaultSettings.Disabled ??= false;\r\n    defaultSettings.DisableTranslation ??= false;\r\n    defaultSettings.Visible = defaultSettings.VisibleInEditUI;\r\n    delete defaultSettings.VisibleInEditUI;\r\n    if (defaultSettings.DefaultCollapsed != null) {\r\n      defaultSettings.Collapsed = defaultSettings.DefaultCollapsed;\r\n      delete defaultSettings.DefaultCollapsed;\r\n    }\r\n    defaultSettings.Formulas ??= [];\r\n    return defaultSettings;\r\n  }\r\n\r\n  /** Find if DisableTranslation is true in any setting and in any language */\r\n  static findDisableTranslation(\r\n    inputType: InputType,\r\n    attributeValues: EavValues<any>,\r\n    defaultLanguage: string,\r\n    metadataItems: EavEntity[],\r\n  ): boolean {\r\n    if (inputType?.DisableI18n) { return true; }\r\n    if (!LocalizationHelpers.translationExistsInDefault(attributeValues, defaultLanguage)) { return true; }\r\n    if (metadataItems == null) { return false; }\r\n\r\n    // find DisableTranslation in @All, @String, @string-default, etc...\r\n    for (const item of metadataItems) {\r\n      const eavValues = item.Attributes['DisableTranslation'];\r\n      if (eavValues == null) { continue; }\r\n\r\n      // if true in any language, it is true for all cases\r\n      for (const eavValue of eavValues.Values) {\r\n        if (eavValue.Value === true) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  static getContentTypeTitle(contentType: EavContentType, currentLanguage: string, defaultLanguage: string): string {\r\n    let label: string;\r\n    try {\r\n      // xx ContentType is a historic bug and should be fixed when JSONs are rechecked\r\n      const type = contentType.Metadata.find(metadata => metadata.Type.Name === 'ContentType' || metadata.Type.Name === 'xx ContentType');\r\n      if (type) {\r\n        label = LocalizationHelpers.getValueOrDefault(type.Attributes.Label, currentLanguage, defaultLanguage)?.Value;\r\n      }\r\n      label = label || contentType.Name;\r\n    } catch (error) {\r\n      label = contentType.Name;\r\n    }\r\n    return label;\r\n  }\r\n\r\n  static findIsLastInGroup(contentType: EavContentType, attribute: EavContentTypeAttribute): boolean {\r\n    const index = contentType.Attributes.indexOf(attribute);\r\n    if (contentType.Attributes[index + 1] == null) { return true; }\r\n\r\n    const indexOfFirstEmpty = contentType.Attributes.findIndex(a => a.InputType === InputTypeConstants.EmptyDefault);\r\n    if (index < indexOfFirstEmpty) { return false; }\r\n\r\n    if (attribute.InputType === InputTypeConstants.EmptyEnd) { return true; }\r\n\r\n    const empties = [InputTypeConstants.EmptyDefault, InputTypeConstants.EmptyEnd];\r\n    if (empties.includes(contentType.Attributes[index + 1].InputType)) { return true; }\r\n\r\n    return false;\r\n  }\r\n\r\n  static getDisabledBecauseTranslations(\r\n    attributeValues: EavValues<any>,\r\n    disableTranslation: boolean,\r\n    currentLanguage: string,\r\n    defaultLanguage: string,\r\n  ): boolean {\r\n    if (currentLanguage === defaultLanguage) { return false; }\r\n    if (!LocalizationHelpers.translationExistsInDefault(attributeValues, defaultLanguage)) { return true; }\r\n    if (disableTranslation) { return true; }\r\n    if (LocalizationHelpers.isEditableTranslationExist(attributeValues, currentLanguage, defaultLanguage)) { return false; }\r\n    if (LocalizationHelpers.isReadonlyTranslationExist(attributeValues, currentLanguage)) { return true; }\r\n    return true;\r\n  }\r\n\r\n  static getTranslationState(\r\n    attributeValues: EavValues<any>,\r\n    disableTranslation: boolean,\r\n    currentLanguage: string,\r\n    defaultLanguage: string,\r\n  ): TranslationState {\r\n    let infoLabel: string;\r\n    let infoMessage: string;\r\n\r\n    if (disableTranslation) {\r\n      infoLabel = 'LangMenu.InAllLanguages';\r\n      infoMessage = '';\r\n    } else if (!LocalizationHelpers.translationExistsInDefault(attributeValues, defaultLanguage)) {\r\n      infoLabel = 'LangMenu.MissingDefaultLangValue';\r\n      infoMessage = defaultLanguage;\r\n    } else {\r\n      const editableTranslationExists = LocalizationHelpers.isEditableTranslationExist(attributeValues, currentLanguage, defaultLanguage);\r\n      const readonlyTranslationExists = LocalizationHelpers.isReadonlyTranslationExist(attributeValues, currentLanguage);\r\n\r\n      if (editableTranslationExists || readonlyTranslationExists) {\r\n        const dimensions = LocalizationHelpers.getValueTranslation(attributeValues, currentLanguage, defaultLanguage)\r\n          .Dimensions.map(dimension => dimension.Value)\r\n          .filter(dimension => !dimension.includes(currentLanguage));\r\n\r\n        const isShared = dimensions.length > 0;\r\n        if (isShared) {\r\n          if (editableTranslationExists) {\r\n            infoLabel = 'LangMenu.In';\r\n          } else if (readonlyTranslationExists) {\r\n            infoLabel = 'LangMenu.From';\r\n          }\r\n          infoMessage = TranslateMenuHelpers.calculateSharedInfoMessage(dimensions, currentLanguage);\r\n        } else {\r\n          infoLabel = '';\r\n          infoMessage = '';\r\n        }\r\n      } else {\r\n        infoLabel = 'LangMenu.UseDefault';\r\n        infoMessage = '';\r\n      }\r\n    }\r\n    const state = this.getTranslationStateCore(attributeValues, disableTranslation, currentLanguage, defaultLanguage);\r\n    const translationState: TranslationState = {\r\n      infoLabel,\r\n      infoMessage,\r\n      language: state.language,\r\n      linkType: state.linkType,\r\n    };\r\n    return translationState;\r\n  }\r\n\r\n  private static getTranslationStateCore(\r\n    attributeValues: EavValues<any>,\r\n    disableTranslation: boolean,\r\n    currentLanguage: string,\r\n    defaultLanguage: string,\r\n  ): TranslationStateCore {\r\n    let language: string;\r\n    let linkType: string;\r\n\r\n    // Determine is control disabled or enabled and info message\r\n    if (!LocalizationHelpers.translationExistsInDefault(attributeValues, defaultLanguage)) {\r\n      language = '';\r\n      linkType = TranslationLinkConstants.MissingDefaultLangValue;\r\n    } else if (disableTranslation) {\r\n      language = '';\r\n      linkType = TranslationLinkConstants.DontTranslate;\r\n    } else if (LocalizationHelpers.isEditableTranslationExist(attributeValues, currentLanguage, defaultLanguage)) {\r\n      const editableElements = LocalizationHelpers.getValueTranslation(attributeValues, currentLanguage, defaultLanguage)\r\n        .Dimensions.filter(dimension => dimension.Value !== currentLanguage);\r\n\r\n      if (editableElements.length > 0) {\r\n        language = editableElements[0].Value;\r\n        linkType = TranslationLinkConstants.LinkReadWrite;\r\n      } else {\r\n        language = '';\r\n        linkType = TranslationLinkConstants.Translate;\r\n      }\r\n    } else if (LocalizationHelpers.isReadonlyTranslationExist(attributeValues, currentLanguage)) {\r\n      const readOnlyElements = LocalizationHelpers.getValueTranslation(attributeValues, currentLanguage, defaultLanguage)\r\n        .Dimensions.filter(dimension => dimension.Value !== currentLanguage);\r\n\r\n      language = readOnlyElements[0].Value;\r\n      linkType = TranslationLinkConstants.LinkReadOnly;\r\n    } else {\r\n      language = '';\r\n      linkType = TranslationLinkConstants.DontTranslate;\r\n    }\r\n\r\n    const translationState: TranslationStateCore = {\r\n      language,\r\n      linkType,\r\n    };\r\n    return translationState;\r\n  }\r\n}\r\n","export default \"<ng-container *ngIf=\\\"templateVars$ | async as data\\\">\\r\\n\\r\\n  <h3 class=\\\"page-picker-title\\\">\\r\\n    {{ 'Fields.Hyperlink.PagePicker.Title' | translate }}\\r\\n  </h3>\\r\\n\\r\\n  <div class=\\\"page-search-box\\\">\\r\\n    <mat-form-field appearance=\\\"standard\\\" color=\\\"accent\\\">\\r\\n      <mat-label>Search</mat-label>\\r\\n      <input matInput [ngModel]=\\\"data.filterText\\\" (ngModelChange)=\\\"setFilter($event)\\\">\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"page-tree-box\\\">\\r\\n    <ul *ngIf=\\\"!data.filterText\\\">\\r\\n      <ng-container *ngFor=\\\"let page of data.tree\\\">\\r\\n        <ng-container *ngTemplateOutlet=\\\"pageAndChildren; context: {page: page}\\\"></ng-container>\\r\\n      </ng-container>\\r\\n    </ul>\\r\\n\\r\\n    <ul *ngIf=\\\"data.filterText\\\">\\r\\n      <li *ngIf=\\\"data.filteredSearch.length === 0\\\">\\r\\n        <div class=\\\"page-row\\\">\\r\\n          <div class=\\\"no-toggle\\\"></div>\\r\\n          <div>No results</div>\\r\\n        </div>\\r\\n      </li>\\r\\n      <li *ngFor=\\\"let page of data.filteredSearch\\\">\\r\\n        <div class=\\\"page-row\\\">\\r\\n          <div class=\\\"no-toggle\\\"></div>\\r\\n          <div class=\\\"page-label\\\" [ngClass]=\\\"page.id === selected ? 'selected' : ''\\\" (click)=\\\"select(page.id)\\\">\\r\\n            <mat-icon svgIcon=\\\"file\\\" class=\\\"page-icon\\\"></mat-icon>\\r\\n            <span class=\\\"page-path\\\" *ngIf=\\\"page.path\\\">{{ page.path }}&nbsp;>&nbsp;</span>\\r\\n            <span>{{ page.name }}</span>\\r\\n          </div>\\r\\n        </div>\\r\\n      </li>\\r\\n    </ul>\\r\\n  </div>\\r\\n\\r\\n  <ng-template #pageAndChildren let-page=\\\"page\\\">\\r\\n    <li>\\r\\n      <div class=\\\"page-row\\\">\\r\\n        <div class=\\\"no-toggle\\\" *ngIf=\\\"page.children.length === 0\\\"></div>\\r\\n        <mat-icon class=\\\"page-toggle\\\" *ngIf=\\\"page.children.length > 0\\\" (click)=\\\"toggle(page.id)\\\">\\r\\n          {{ toggled.includes(page.id) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\\r\\n        </mat-icon>\\r\\n        <div class=\\\"page-label\\\" [ngClass]=\\\"page.id === selected ? 'selected' : ''\\\" (click)=\\\"select(page.id)\\\">\\r\\n          <mat-icon svgIcon=\\\"file\\\" class=\\\"page-icon\\\"></mat-icon>\\r\\n          <span>{{ page.name }}</span>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <ul *ngIf=\\\"page.children.length > 0 && toggled.includes(page.id)\\\">\\r\\n        <ng-container *ngFor=\\\"let child of page.children\\\">\\r\\n          <ng-container *ngTemplateOutlet=\\\"pageAndChildren; context: {page: child}\\\"></ng-container>\\r\\n        </ng-container>\\r\\n      </ul>\\r\\n    </li>\\r\\n  </ng-template>\\r\\n</ng-container>\\r\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"24\\\"><path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/><path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/><path d=\\\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\\\"/></svg>\";","export const prefix = 'eav-';\r\nexport const keyZoneId = prefix + 'zoneId';\r\nexport const keyRequestToken = prefix + 'rvt';\r\nexport const keyTabId = prefix + 'tid';\r\nexport const keyContentBlockId = prefix + 'cbid';\r\nexport const keyModuleId = prefix + 'mid';\r\nexport const keyAppId = prefix + 'appId';\r\nexport const keyDebug = prefix + 'debug';\r\nexport const keyDialog = prefix + 'dialog';\r\nexport const keyContentType = prefix + 'contentType';\r\nexport const keyItems = prefix + 'items';\r\nexport const keyPartOfPage = prefix + 'partOfPage';\r\n// 2020-12-01 2dm - not in url any more in 2sxc 11.10.02+, remove this\r\n// Keep in this comment in till January 2021 in case something breaks\r\n// the commit where this was added contains all the changes related to this\r\n// export const keyPortalRoot = prefix + 'portalroot';\r\nexport const keyPublishing = prefix + 'publishing';\r\nexport const keyFilters = prefix + 'filters';\r\nexport const keyPipelineId = prefix + 'pipelineId';\r\nexport const keyApi = prefix + 'api';\r\n\r\n/** Url which opened the dialog. Used for debugging */\r\nexport const keyUrl = prefix + 'url';\r\n\r\n/** This is used by file editor to determine if it's editing shared files or of that portal only */\r\nexport const keyIsShared = prefix + 'isshared';\r\n","import { EntityCollectionServiceBase, EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n/**\r\n * Creates BehaviorSubject for cached data to be accessible in both synchronous and asynchronous manner with cache$.\r\n * WARNING! Do not use entities$\r\n */\r\nexport class BaseDataService<T> extends EntityCollectionServiceBase<T> {\r\n  cache$: BehaviorSubject<T[]>;\r\n\r\n  constructor(cacheName: string, serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super(cacheName, serviceElementsFactory);\r\n\r\n    this.cache$ = new BehaviorSubject<T[]>([]);\r\n    // doesn't need to be completed because store services are singletons that live as long as the browser tab is open\r\n    this.entities$.subscribe(items => {\r\n      this.cache$.next(items);\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EavService, FieldsSettingsService } from '.';\r\nimport { consoleLogAngular } from '../../../ng-dialogs/src/app/shared/helpers/console-log-angular.helper';\r\nimport { InputFieldHelpers, LocalizationHelpers } from '../helpers';\r\nimport { EavItem } from '../models/eav';\r\nimport { ContentTypeService, ItemService, LanguageInstanceService } from '../store/ngrx-data';\r\n\r\n@Injectable()\r\nexport class FieldsTranslateService {\r\n  private entityGuid: string;\r\n  private contentTypeId: string;\r\n\r\n  constructor(\r\n    private itemService: ItemService,\r\n    private languageInstanceService: LanguageInstanceService,\r\n    private eavService: EavService,\r\n    private contentTypeService: ContentTypeService,\r\n    private fieldsSettingsService: FieldsSettingsService,\r\n  ) { }\r\n\r\n  init(entityGuid: string): void {\r\n    this.entityGuid = entityGuid;\r\n    const item = this.itemService.getItem(entityGuid);\r\n    this.contentTypeId = InputFieldHelpers.getContentTypeId(item);\r\n  }\r\n\r\n  translate(fieldName: string, isTransaction = false, transactionItem?: EavItem): EavItem {\r\n    if (this.isTranslationDisabled(fieldName)) { return; }\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n\r\n    transactionItem = this.itemService.removeItemAttributeDimension(this.entityGuid, fieldName, currentLanguage, true, transactionItem);\r\n\r\n    const attributes = this.itemService.getItemAttributes(this.entityGuid);\r\n    const values = attributes[fieldName];\r\n    const defaultValue = LocalizationHelpers.getValueTranslation(values, defaultLanguage, defaultLanguage);\r\n    const contentType = this.contentTypeService.getContentType(this.contentTypeId);\r\n    const ctAttribute = contentType.Attributes.find(a => a.Name === fieldName);\r\n    transactionItem = this.itemService.addItemAttributeValue(\r\n      this.entityGuid, fieldName, defaultValue.Value, currentLanguage, false, ctAttribute.Type, isTransaction, transactionItem,\r\n    );\r\n    return transactionItem;\r\n  }\r\n\r\n  dontTranslate(fieldName: string, isTransaction = false, transactionItem?: EavItem): EavItem {\r\n    if (this.isTranslationDisabled(fieldName)) { return; }\r\n\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    transactionItem = this.itemService.removeItemAttributeDimension(\r\n      this.entityGuid, fieldName, currentLanguage, isTransaction, transactionItem,\r\n    );\r\n    return transactionItem;\r\n  }\r\n\r\n  copyFrom(fieldName: string, copyFromLanguageKey: string): void {\r\n    if (this.isTranslationDisabled(fieldName)) { return; }\r\n\r\n    const attributes = this.itemService.getItemAttributes(this.entityGuid);\r\n    const values = attributes[fieldName];\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n    const attributeValueTranslation = LocalizationHelpers.getValueTranslation(values, copyFromLanguageKey, defaultLanguage);\r\n    if (attributeValueTranslation) {\r\n      const valueAlreadyExists = values\r\n        ? LocalizationHelpers.isEditableOrReadonlyTranslationExist(values, currentLanguage, defaultLanguage)\r\n        : false;\r\n\r\n      if (valueAlreadyExists) {\r\n        // Copy attribute value where language is languageKey to value where language is current language\r\n        this.itemService.updateItemAttributeValue(\r\n          this.entityGuid, fieldName, attributeValueTranslation.Value, currentLanguage, defaultLanguage, false,\r\n        );\r\n      } else {\r\n        // Copy attribute value where language is languageKey to new attribute with current language\r\n        const contentType = this.contentTypeService.getContentType(this.contentTypeId);\r\n        const ctAttribute = contentType.Attributes.find(a => a.Name === fieldName);\r\n        this.itemService.addItemAttributeValue(\r\n          this.entityGuid, fieldName, attributeValueTranslation.Value, currentLanguage, false, ctAttribute.Type,\r\n        );\r\n      }\r\n    } else {\r\n      consoleLogAngular(`${currentLanguage}: Cant copy value from ${copyFromLanguageKey} because that value does not exist.`);\r\n    }\r\n  }\r\n\r\n  linkReadOnly(fieldName: string, linkWithLanguageKey: string): void {\r\n    if (this.isTranslationDisabled(fieldName)) { return; }\r\n\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n    const transactionItem = this.itemService.removeItemAttributeDimension(this.entityGuid, fieldName, currentLanguage, true);\r\n    this.itemService.addItemAttributeDimension(\r\n      this.entityGuid, fieldName, currentLanguage, linkWithLanguageKey, defaultLanguage, true, transactionItem,\r\n    );\r\n  }\r\n\r\n  linkReadWrite(fieldName: string, linkWithLanguageKey: string): void {\r\n    if (this.isTranslationDisabled(fieldName)) { return; }\r\n\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n    const transactionItem = this.itemService.removeItemAttributeDimension(this.entityGuid, fieldName, currentLanguage, true);\r\n    this.itemService.addItemAttributeDimension(\r\n      this.entityGuid, fieldName, currentLanguage, linkWithLanguageKey, defaultLanguage, false, transactionItem,\r\n    );\r\n  }\r\n\r\n  translateMany(): void {\r\n    const attributes = this.itemService.getItemAttributes(this.entityGuid);\r\n    const translateable = Object.keys(attributes).filter(fieldName => !this.isTranslationDisabled(fieldName));\r\n\r\n    let transactionItem: EavItem;\r\n    for (const fieldName of translateable) {\r\n      // will finish the transaction when last field is being translated\r\n      const isTransaction = fieldName !== translateable[translateable.length - 1];\r\n      transactionItem = this.translate(fieldName, isTransaction, transactionItem);\r\n    }\r\n  }\r\n\r\n  dontTranslateMany(): void {\r\n    const attributes = this.itemService.getItemAttributes(this.entityGuid);\r\n    const translateable = Object.keys(attributes).filter(fieldName => !this.isTranslationDisabled(fieldName));\r\n\r\n    let transactionItem: EavItem;\r\n    for (const fieldName of translateable) {\r\n      // will finish the transaction when last field is being translated\r\n      const isTransaction = fieldName !== translateable[translateable.length - 1];\r\n      transactionItem = this.dontTranslate(fieldName, isTransaction, transactionItem);\r\n    }\r\n  }\r\n\r\n  private isTranslationDisabled(fieldName: string) {\r\n    const fieldsProps = this.fieldsSettingsService.getFieldsProps();\r\n    return fieldsProps[fieldName].settings.DisableTranslation;\r\n  }\r\n}\r\n","export enum TranslationLinkConstants {\r\n  Translate = 'Translate',\r\n  DontTranslate = 'DontTranslate',\r\n  MissingDefaultLangValue = 'MissingDefaultLangValue',\r\n  LinkReadOnly = 'LinkReadOnly',\r\n  LinkReadWrite = 'LinkReadWrite',\r\n  LinkCopyFrom = 'LinkCopyFrom',\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM204.3 208H140c-6.6 0-12 5.4-12 12v184c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12v-60.4h44.3c38.7 0 67.7-27.3 67.7-69 0-38.6-23.8-66.6-67.7-66.6zm26 97.7c-7.5 7.6-17.8 11.4-31 11.4H160V233h39.7c12.9 0 23.1 3.7 30.6 11.1 15.3 15.1 15 46.5 0 61.6z\\\"/></svg>\";","import { NgZone } from '@angular/core';\r\nimport { EavWindow } from '../../../ng-dialogs/src/app/shared/models/eav-window.model';\r\nimport { ElementEventListener } from '../models';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport class DropzoneDraggingHelper {\r\n  private eventListeners: ElementEventListener[] = [];\r\n\r\n  constructor(private zone: NgZone) { }\r\n\r\n  /** Starts listening for dragover and drop events on a given element */\r\n  attach(htmlEl: HTMLElement) {\r\n    this.zone.runOutsideAngular(() => {\r\n      htmlEl.addEventListener('dragover', dragoverListener, { passive: true });\r\n      htmlEl.addEventListener('drop', dropListener, { passive: true });\r\n\r\n      this.eventListeners.push(\r\n        { element: htmlEl, type: 'dragover', listener: dragoverListener },\r\n        { element: htmlEl, type: 'drop', listener: dropListener },\r\n      );\r\n\r\n      function dragoverListener() {\r\n        clearTimeouts(window.windowBodyTimeouts); // clear timeouts from global array of timeouts which clear draggingClass from body\r\n        document.body.classList.add(window.draggingClass);\r\n      }\r\n      function dropListener() {\r\n        document.body.classList.remove(window.draggingClass);\r\n      }\r\n      function clearTimeouts(timeoutsArray: number[]) {\r\n        for (const timeout of timeoutsArray) {\r\n          clearTimeout(timeout);\r\n        }\r\n        timeoutsArray.splice(0, timeoutsArray.length);\r\n      }\r\n    });\r\n  }\r\n\r\n  /** Removes event listeners from registered elements */\r\n  detach() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.eventListeners.forEach(({ element, type, listener }) => {\r\n        element.removeEventListener(type, listener);\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { environment } from '../../../environments/environment';\r\n\r\n/** Console log that doesn't show in Angular production mode */\r\nexport function consoleLogAngular(message?: any, ...optionalParams: any[]) {\r\n  if (environment.production) { return; }\r\n\r\n  console.groupCollapsed(message, ...optionalParams);\r\n  // tslint:disable-next-line:no-console\r\n  console.trace();\r\n  console.groupEnd();\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-48-244v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12z\\\"/></svg>\";","import { Injectable } from '@angular/core';\r\nimport { EavService } from '.';\r\nimport { EavWindow } from '../../../ng-dialogs/src/app/shared/models/eav-window.model';\r\nimport { UrlHelpers } from '../helpers';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport enum FileTypeConstants {\r\n  CSS = '.css',\r\n  JS = '.js',\r\n}\r\n\r\nexport interface LoadFile {\r\n  path: string;\r\n  type: string;\r\n  loaded: boolean;\r\n  domEl: HTMLLinkElement | HTMLScriptElement;\r\n}\r\n\r\n@Injectable()\r\nexport class ScriptsLoaderService {\r\n  private loadedFiles: LoadFile[] = [];\r\n\r\n  constructor(private eavService: EavService) { }\r\n\r\n  /** Loads CSS and JS files in order (CSS first) and calls callback function when finished */\r\n  load(scripts: string[], callback: () => void) {\r\n    const sortedFiles = this.sortByType(scripts);\r\n    this.insertToDom(sortedFiles, callback, 0); // async, called again and again after each script is loaded\r\n  }\r\n\r\n  private sortByType(scripts: string[]): LoadFile[] {\r\n    const cssFiles: LoadFile[] = [];\r\n    const jsFiles: LoadFile[] = [];\r\n    scripts.forEach(script => {\r\n      const file: LoadFile = {\r\n        path: this.resolveSpecialPaths(script),\r\n        type: null,\r\n        loaded: false,\r\n        domEl: null\r\n      };\r\n      if (file.path.endsWith(FileTypeConstants.CSS)) {\r\n        file.type = FileTypeConstants.CSS;\r\n        cssFiles.push(file);\r\n      } else if (file.path.endsWith(FileTypeConstants.JS)) {\r\n        file.type = FileTypeConstants.JS;\r\n        jsFiles.push(file);\r\n      }\r\n    });\r\n    return cssFiles.concat(jsFiles);\r\n  }\r\n\r\n  private insertToDom(files: LoadFile[], callback: () => void, increment: number) {\r\n    const file = files[increment];\r\n    increment++;\r\n    if (!file) {\r\n      callback();\r\n      return;\r\n    }\r\n    file.path = file.path + '?sxcver=' + window.sxcVersion; // break cache\r\n\r\n    const existing = this.loadedFiles.find(loadedFile => loadedFile.path === file.path);\r\n    if (existing) {\r\n      if (existing.loaded) {\r\n        this.insertToDom(files, callback, increment);\r\n      } else {\r\n        const _listener = () => {\r\n          file.loaded = true;\r\n          this.insertToDom(files, callback, increment);\r\n          existing.domEl.removeEventListener('load', _listener);\r\n          existing.domEl.removeEventListener('error', _listener);\r\n        };\r\n        existing.domEl.addEventListener('load', _listener);\r\n        existing.domEl.addEventListener('error', _listener);\r\n      }\r\n    } else {\r\n      if (file.type === FileTypeConstants.CSS) {\r\n        file.domEl = document.createElement('link');\r\n        file.domEl.rel = 'stylesheet';\r\n        file.domEl.href = file.path;\r\n      } else if (file.type === FileTypeConstants.JS) {\r\n        file.domEl = document.createElement('script');\r\n        file.domEl.type = 'module';\r\n        file.domEl.src = file.path;\r\n      }\r\n\r\n      const _listener = () => {\r\n        file.loaded = true;\r\n        this.insertToDom(files, callback, increment);\r\n        file.domEl.removeEventListener('load', _listener);\r\n        file.domEl.removeEventListener('error', _listener);\r\n      };\r\n      file.domEl.addEventListener('load', _listener);\r\n      file.domEl.addEventListener('error', _listener);\r\n\r\n      document.querySelector('head').appendChild(file.domEl);\r\n      this.loadedFiles.push(file);\r\n    }\r\n  }\r\n\r\n  private resolveSpecialPaths(url: string) {\r\n    return url.replace(/\\[System:Path\\]/i, UrlHelpers.getUrlPrefix('system', this.eavService.eavConfig))\r\n      .replace(/\\[Zone:Path\\]/i, UrlHelpers.getUrlPrefix('zone', this.eavService.eavConfig))\r\n      .replace(/\\[App:Path\\]/i, UrlHelpers.getUrlPrefix('app', this.eavService.eavConfig));\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 48 48\\\">\\r\\n<style type=\\\"text/css\\\">\\r\\n\\t.st0{display:none;}\\r\\n\\t.st1{display:inline;}\\r\\n</style>\\r\\n<g id=\\\"Layer_1\\\">\\r\\n\\t<path d=\\\"M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z\\\"/>\\r\\n</g>\\r\\n<g id=\\\"Layer_3\\\" class=\\\"st0\\\">\\r\\n</g>\\r\\n<g id=\\\"Icon\\\">\\r\\n\\t<path d=\\\"M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44c2,0,4-1.85,6-1.85S28,44,30,44\\r\\n\\t\\tc6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z\\\"/>\\r\\n</g>\\r\\n</svg>\\r\\n\";","export class EavDimension {\r\n  Value: string;\r\n\r\n  static create(value: string): EavDimension {\r\n    const dimension: EavDimension = {\r\n      Value: value,\r\n    };\r\n    return dimension;\r\n  }\r\n}\r\n","import { EavEntity, EavEntityAttributes } from '.';\r\nimport { ContentTypeAttribute1 } from '../json-format-v1';\r\n\r\nexport class EavContentTypeAttribute {\r\n  InputType: string;\r\n  IsTitle: boolean;\r\n  Metadata: EavEntity[];\r\n  Name: string;\r\n  Settings: EavEntityAttributes;\r\n  Type: string;\r\n\r\n  private static convertOne(attribute1: ContentTypeAttribute1): EavContentTypeAttribute {\r\n    const metadata = EavEntity.convertMany(attribute1.Metadata);\r\n    const settings = EavEntityAttributes.mergeSettings(metadata);\r\n\r\n    const attribute: EavContentTypeAttribute = {\r\n      InputType: attribute1.InputType,\r\n      IsTitle: attribute1.IsTitle,\r\n      Metadata: metadata,\r\n      Name: attribute1.Name,\r\n      Settings: settings,\r\n      Type: attribute1.Type,\r\n    };\r\n    return attribute;\r\n  }\r\n\r\n  static convertMany(attributes1: ContentTypeAttribute1[]): EavContentTypeAttribute[] {\r\n    if (attributes1 == null) { return []; }\r\n\r\n    const attributes = attributes1.map(attribute1 => EavContentTypeAttribute.convertOne(attribute1));\r\n    return attributes;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { BaseDataService } from '.';\r\nimport { Language } from '../../models';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LanguageService extends BaseDataService<Language> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('Language', serviceElementsFactory);\r\n  }\r\n\r\n  loadLanguages(languages: Language[]): void {\r\n    this.addAllToCache(languages);\r\n  }\r\n\r\n  getLanguages(): Language[] {\r\n    return this.cache$.value;\r\n  }\r\n\r\n  getLanguages$(): Observable<Language[]> {\r\n    return this.cache$.asObservable();\r\n  }\r\n}\r\n","export * from './component-metadata.constants';\r\nexport * from './features-guids.constants';\r\nexport * from './translation-link.constants';\r\nexport * from './wrappers.constants';\r\n","export default \"<router-outlet></router-outlet>\\r\\n\";","import { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { keyPartOfPage, keyPublishing } from '../../../ng-dialogs/src/app/shared/constants/session.constants';\r\nimport { Context } from '../../../ng-dialogs/src/app/shared/services/context';\r\nimport { EavFormData, EditDialogContext, SaveEavFormData } from '../../eav-item-dialog/multi-item-edit-form/multi-item-edit-form.models';\r\nimport { EavConfig, SaveResult, VersioningOptions } from '../models';\r\n\r\nexport const webApiEditRoot = 'cms/edit/';\r\n\r\n@Injectable()\r\nexport class EavService {\r\n  /** WARNING! These are constants that form was loaded with. They do not change while form is running */\r\n  eavConfig: EavConfig;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private dnnContext: DnnContext,\r\n    /** Used to fetch form data and fill up eavConfig. Do not use anywhere else */\r\n    private context: Context,\r\n  ) { }\r\n\r\n  /** Create EavConfiguration from sessionStorage */\r\n  setEavConfig(\r\n    editDialogContext: EditDialogContext,\r\n    formId: number,\r\n    isParentDialog: boolean,\r\n    itemGuids: string[],\r\n    createMode: boolean,\r\n    isCopy: boolean,\r\n    enableHistory: boolean,\r\n  ) {\r\n    this.eavConfig = {\r\n      zoneId: this.context.zoneId.toString(),\r\n      appId: this.context.appId.toString(),\r\n      appRoot: editDialogContext.App.Url,\r\n      lang: editDialogContext.Language.Current,\r\n      langPri: editDialogContext.Language.Primary,\r\n      langs: editDialogContext.Language.All,\r\n      moduleId: this.context.moduleId.toString(),\r\n      partOfPage: sessionStorage.getItem(keyPartOfPage),\r\n      portalRoot: editDialogContext.Site.Url,\r\n      tabId: this.context.tabId.toString(),\r\n      systemRoot: window.location.pathname.split('/dist/')[0] + '/',\r\n      versioningOptions: this.getVersioningOptions(\r\n        sessionStorage.getItem(keyPartOfPage) === 'true',\r\n        sessionStorage.getItem(keyPublishing),\r\n      ),\r\n      formId,\r\n      isParentDialog,\r\n      itemGuids,\r\n      createMode,\r\n      isCopy,\r\n      enableHistory,\r\n      enableFormulaSave: editDialogContext.Enable.FormulaSave ?? false,\r\n    };\r\n  }\r\n\r\n  fetchFormData(items: string) {\r\n    return this.http.post<EavFormData>(this.dnnContext.$2sxc.http.apiUrl(webApiEditRoot + 'load'), items, {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  saveFormData(result: SaveEavFormData, partOfPage: string) {\r\n    return this.http.post<SaveResult>(this.dnnContext.$2sxc.http.apiUrl(webApiEditRoot + 'save'), result, {\r\n      params: { appId: this.eavConfig.appId, partOfPage }\r\n    });\r\n  }\r\n\r\n  private getVersioningOptions(partOfPage: boolean, publishing: string): VersioningOptions {\r\n    if (!partOfPage) {\r\n      return { show: true, hide: true, branch: true };\r\n    }\r\n\r\n    const publish = publishing || '';\r\n    switch (publish) {\r\n      case '':\r\n      case 'DraftOptional':\r\n        return { show: true, hide: true, branch: true };\r\n      case 'DraftRequired':\r\n        return { branch: true, hide: true };\r\n      default: {\r\n        console.error('invalid versioning requiremenets: ' + publish);\r\n        return {};\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM211.7 308l50.5-81.8c4.8-8-.9-18.2-10.3-18.2h-4.1c-4.1 0-7.9 2.1-10.1 5.5-31 48.5-36.4 53.5-45.7 74.5-17.2-32.2-8.4-16-45.8-74.5-2.2-3.4-6-5.5-10.1-5.5H132c-9.4 0-15.1 10.3-10.2 18.2L173 308l-59.1 89.5c-5.1 8 .6 18.5 10.1 18.5h3.5c4.1 0 7.9-2.1 10.1-5.5 37.2-58 45.3-62.5 54.4-82.5 31.5 56.7 44.3 67.2 54.4 82.6 2.2 3.4 6 5.4 10 5.4h3.6c9.5 0 15.2-10.4 10.1-18.4L211.7 308z\\\"/></svg>\";","import { ActivatedRoute } from '@angular/router';\r\nimport { Dictionary } from '../../../ng-dialogs/src/app/shared/models/dictionary.model';\r\nimport { EavConfig } from '../models';\r\n\r\nexport class UrlHelpers {\r\n\r\n  static stripNonUrlCharacters(controlValue: string, allowPath: boolean, trimEnd: boolean) {\r\n    if (!controlValue) { return ''; }\r\n\r\n    const rexSeparators = allowPath ? /[^a-z0-9-_/]+/gi : /[^a-z0-9-_]+/gi;\r\n    const latinized = this.latinizeText(controlValue.toLowerCase());\r\n    const cleanInputValue = latinized\r\n      .replace(`'s `, 's ') // neutralize it's, daniel's etc. but only if followed by a space, to ensure we don't kill quotes\r\n      .replace('\\\\', '/') // neutralize slash representation\r\n      .replace(rexSeparators, '-') // replace everything we don't want with a -\r\n      .replace(/-+/gi, '-') // reduce multiple '-'\r\n      .replace(/\\/+/gi, '/') // reduce multiple slashes\r\n      .replace(/-*\\/-*/gi, '/') // reduce '-/' or '/-' combinations to a simple '/'\r\n      .replace(trimEnd ? /^-|-+$/gi : /^-/gi, ''); // trim front and maybe end '-'\r\n    return cleanInputValue;\r\n  }\r\n\r\n  static latinizeText(input: string) {\r\n    const latinMap: Dictionary<string> = {\r\n      Á: 'A', Ă: 'A', Ắ: 'A', Ặ: 'A', Ằ: 'A', Ẳ: 'A', Ẵ: 'A', Ǎ: 'A', Â: 'A', Ấ: 'A', Ậ: 'A',\r\n      Ầ: 'A', Ẩ: 'A', Ẫ: 'A', Ä: 'Ae', Ǟ: 'A', Ȧ: 'A', Ǡ: 'A', Ạ: 'A', Ȁ: 'A', À: 'A', Ả: 'A', Ȃ: 'A',\r\n      Ā: 'A', Ą: 'A', Å: 'A', Ǻ: 'A', Ḁ: 'A', Ⱥ: 'A', Ã: 'A', Ꜳ: 'AA', Æ: 'AE', Ǽ: 'AE', Ǣ: 'AE',\r\n      Ꜵ: 'AO', Ꜷ: 'AU', Ꜹ: 'AV', Ꜻ: 'AV', Ꜽ: 'AY', Ḃ: 'B', Ḅ: 'B', Ɓ: 'B', Ḇ: 'B', Ƀ: 'B',\r\n      Ƃ: 'B', Ć: 'C', Č: 'C', Ç: 'C', Ḉ: 'C', Ĉ: 'C', Ċ: 'C', Ƈ: 'C', Ȼ: 'C', Ď: 'D', Ḑ: 'D',\r\n      Ḓ: 'D', Ḋ: 'D', Ḍ: 'D', Ɗ: 'D', Ḏ: 'D', ǲ: 'D', ǅ: 'D', Đ: 'D', Ƌ: 'D', Ǳ: 'DZ', Ǆ: 'DZ',\r\n      É: 'E', Ĕ: 'E', Ě: 'E', Ȩ: 'E', Ḝ: 'E', Ê: 'E', Ế: 'E', Ệ: 'E', Ề: 'E', Ể: 'E', Ễ: 'E', Ḙ: 'E',\r\n      Ë: 'E', Ė: 'E', Ẹ: 'E', Ȅ: 'E', È: 'E', Ẻ: 'E', Ȇ: 'E', Ē: 'E', Ḗ: 'E', Ḕ: 'E', Ę: 'E', Ɇ: 'E',\r\n      Ẽ: 'E', Ḛ: 'E', Ꝫ: 'ET', Ḟ: 'F', Ƒ: 'F', Ǵ: 'G', Ğ: 'G', Ǧ: 'G', Ģ: 'G', Ĝ: 'G', Ġ: 'G', Ɠ: 'G',\r\n      Ḡ: 'G', Ǥ: 'G', Ḫ: 'H', Ȟ: 'H', Ḩ: 'H', Ĥ: 'H', Ⱨ: 'H', Ḧ: 'H', Ḣ: 'H', Ḥ: 'H', Ħ: 'H', Í: 'I',\r\n      Ĭ: 'I', Ǐ: 'I', Î: 'I', Ï: 'I', Ḯ: 'I', İ: 'I', Ị: 'I', Ȉ: 'I', Ì: 'I', Ỉ: 'I', Ȋ: 'I', Ī: 'I',\r\n      Į: 'I', Ɨ: 'I', Ĩ: 'I', Ḭ: 'I', Ꝺ: 'D', Ꝼ: 'F', Ᵹ: 'G', Ꞃ: 'R', Ꞅ: 'S', Ꞇ: 'T', Ꝭ: 'IS', Ĵ: 'J',\r\n      Ɉ: 'J', Ḱ: 'K', Ǩ: 'K', Ķ: 'K', Ⱪ: 'K', Ꝃ: 'K', Ḳ: 'K', Ƙ: 'K', Ḵ: 'K', Ꝁ: 'K', Ꝅ: 'K', Ĺ: 'L',\r\n      Ƚ: 'L', Ľ: 'L', Ļ: 'L', Ḽ: 'L', Ḷ: 'L', Ḹ: 'L', Ⱡ: 'L', Ꝉ: 'L', Ḻ: 'L', Ŀ: 'L', Ɫ: 'L', ǈ: 'L',\r\n      Ł: 'L', Ǉ: 'LJ', Ḿ: 'M', Ṁ: 'M', Ṃ: 'M', Ɱ: 'M', Ń: 'N', Ň: 'N', Ņ: 'N', Ṋ: 'N', Ṅ: 'N', Ṇ: 'N',\r\n      Ǹ: 'N', Ɲ: 'N', Ṉ: 'N', Ƞ: 'N', ǋ: 'N', Ñ: 'N', Ǌ: 'NJ', Ó: 'O', Ŏ: 'O', Ǒ: 'O', Ô: 'O', Ố: 'O',\r\n      Ộ: 'O', Ồ: 'O', Ổ: 'O', Ỗ: 'O', Öe: 'O', Ȫ: 'O', Ȯ: 'O', Ȱ: 'O', Ọ: 'O', Ő: 'O', Ȍ: 'O', Ò: 'O',\r\n      Ỏ: 'O', Ơ: 'O', Ớ: 'O', Ợ: 'O', Ờ: 'O', Ở: 'O', Ỡ: 'O', Ȏ: 'O', Ꝋ: 'O', Ꝍ: 'O', Ō: 'O', Ṓ: 'O',\r\n      Ṑ: 'O', Ɵ: 'O', Ǫ: 'O', Ǭ: 'O', Ø: 'O', Ǿ: 'O', Õ: 'O', Ṍ: 'O', Ṏ: 'O', Ȭ: 'O', Ƣ: 'OI', Ꝏ: 'OO',\r\n      Ɛ: 'E', Ɔ: 'O', Ȣ: 'OU', Ṕ: 'P', Ṗ: 'P', Ꝓ: 'P', Ƥ: 'P', Ꝕ: 'P', Ᵽ: 'P', Ꝑ: 'P', Ꝙ: 'Q', Ꝗ: 'Q',\r\n      Ŕ: 'R', Ř: 'R', Ŗ: 'R', Ṙ: 'R', Ṛ: 'R', Ṝ: 'R', Ȑ: 'R', Ȓ: 'R', Ṟ: 'R', Ɍ: 'R', Ɽ: 'R', Ꜿ: 'C',\r\n      Ǝ: 'E', Ś: 'S', Ṥ: 'S', Š: 'S', Ṧ: 'S', Ş: 'S', Ŝ: 'S', Ș: 'S', Ṡ: 'S', Ṣ: 'S', Ṩ: 'S', Ť: 'T',\r\n      Ţ: 'T', Ṱ: 'T', Ț: 'T', Ⱦ: 'T', Ṫ: 'T', Ṭ: 'T', Ƭ: 'T', Ṯ: 'T', Ʈ: 'T', Ŧ: 'T', Ɐ: 'A', Ꞁ: 'L',\r\n      Ɯ: 'M', Ʌ: 'V', Ꜩ: 'TZ', Ú: 'U', Ŭ: 'U', Ǔ: 'U', Û: 'U', Ṷ: 'U', Ü: 'Ue', Ǘ: 'U', Ǚ: 'U', Ǜ: 'U',\r\n      Ǖ: 'U', Ṳ: 'U', Ụ: 'U', Ű: 'U', Ȕ: 'U', Ù: 'U', Ủ: 'U', Ư: 'U', Ứ: 'U', Ự: 'U', Ừ: 'U', Ử: 'U',\r\n      Ữ: 'U', Ȗ: 'U', Ū: 'U', Ṻ: 'U', Ų: 'U', Ů: 'U', Ũ: 'U', Ṹ: 'U', Ṵ: 'U', Ꝟ: 'V', Ṿ: 'V', Ʋ: 'V',\r\n      Ṽ: 'V', Ꝡ: 'VY', Ẃ: 'W', Ŵ: 'W', Ẅ: 'W', Ẇ: 'W', Ẉ: 'W', Ẁ: 'W', Ⱳ: 'W', Ẍ: 'X', Ẋ: 'X', Ý: 'Y',\r\n      Ŷ: 'Y', Ÿ: 'Y', Ẏ: 'Y', Ỵ: 'Y', Ỳ: 'Y', Ƴ: 'Y', Ỷ: 'Y', Ỿ: 'Y', Ȳ: 'Y', Ɏ: 'Y', Ỹ: 'Y', Ź: 'Z',\r\n      Ž: 'Z', Ẑ: 'Z', Ⱬ: 'Z', Ż: 'Z', Ẓ: 'Z', Ȥ: 'Z', Ẕ: 'Z', Ƶ: 'Z', Ĳ: 'IJ', Œ: 'OE', ᴀ: 'A', ᴁ: 'AE',\r\n      ʙ: 'B', ᴃ: 'B', ᴄ: 'C', ᴅ: 'D', ᴇ: 'E', ꜰ: 'F', ɢ: 'G', ʛ: 'G', ʜ: 'H', ɪ: 'I', ʁ: 'R', ᴊ: 'J',\r\n      ᴋ: 'K', ʟ: 'L', ᴌ: 'L', ᴍ: 'M', ɴ: 'N', ᴏ: 'O', ɶ: 'OE', ᴐ: 'O', ᴕ: 'OU', ᴘ: 'P', ʀ: 'R', ᴎ: 'N',\r\n      ᴙ: 'R', ꜱ: 'S', ᴛ: 'T', ⱻ: 'E', ᴚ: 'R', ᴜ: 'U', ᴠ: 'V', ᴡ: 'W', ʏ: 'Y', ᴢ: 'Z', á: 'a', ă: 'a',\r\n      ắ: 'a', ặ: 'a', ằ: 'a', ẳ: 'a', ẵ: 'a', ǎ: 'a', â: 'a', ấ: 'a', ậ: 'a', ầ: 'a', ẩ: 'a', ẫ: 'a',\r\n      ä: 'ae', ǟ: 'a', ȧ: 'a', ǡ: 'a', ạ: 'a', ȁ: 'a', à: 'a', ả: 'a', ȃ: 'a', ā: 'a', ą: 'a', ᶏ: 'a',\r\n      ẚ: 'a', å: 'a', ǻ: 'a',\r\n      ḁ: 'a', ⱥ: 'a', ã: 'a', ꜳ: 'aa', æ: 'ae', ǽ: 'ae', ǣ: 'ae', ꜵ: 'ao', ꜷ: 'au', ꜹ: 'av', ꜻ: 'av',\r\n      ꜽ: 'ay', ḃ: 'b', ḅ: 'b', ɓ: 'b', ḇ: 'b', ᵬ: 'b', ᶀ: 'b', ƀ: 'b', ƃ: 'b', ɵ: 'o', ć: 'c', č: 'c',\r\n      ç: 'c', ḉ: 'c', ĉ: 'c', ɕ: 'c', ċ: 'c', ƈ: 'c', ȼ: 'c', ď: 'd', ḑ: 'd', ḓ: 'd', ȡ: 'd', ḋ: 'd',\r\n      ḍ: 'd', ɗ: 'd', ᶑ: 'd', ḏ: 'd', ᵭ: 'd', ᶁ: 'd', đ: 'd', ɖ: 'd', ƌ: 'd', ı: 'i', ȷ: 'j', ɟ: 'j',\r\n      ʄ: 'j', ǳ: 'dz', ǆ: 'dz', é: 'e', ĕ: 'e', ě: 'e', ȩ: 'e', ḝ: 'e', ê: 'e', ế: 'e', ệ: 'e', ề: 'e',\r\n      ể: 'e', ễ: 'e', ḙ: 'e', ë: 'e', ė: 'e', ẹ: 'e', ȅ: 'e', è: 'e', ẻ: 'e', ȇ: 'e', ē: 'e', ḗ: 'e',\r\n      ḕ: 'e', ⱸ: 'e', ę: 'e', ᶒ: 'e', ɇ: 'e', ẽ: 'e', ḛ: 'e', ꝫ: 'et', ḟ: 'f', ƒ: 'f', ᵮ: 'f', ᶂ: 'f',\r\n      ǵ: 'g', ğ: 'g', ǧ: 'g', ģ: 'g', ĝ: 'g', ġ: 'g', ɠ: 'g', ḡ: 'g', ᶃ: 'g', ǥ: 'g', ḫ: 'h', ȟ: 'h',\r\n      ḩ: 'h', ĥ: 'h', ⱨ: 'h', ḧ: 'h', ḣ: 'h', ḥ: 'h', ɦ: 'h', ẖ: 'h', ħ: 'h', ƕ: 'hv', í: 'i', ĭ: 'i',\r\n      ǐ: 'i', î: 'i', ï: 'i', ḯ: 'i', ị: 'i', ȉ: 'i', ì: 'i', ỉ: 'i', ȋ: 'i', ī: 'i', į: 'i', ᶖ: 'i',\r\n      ɨ: 'i', ĩ: 'i', ḭ: 'i', ꝺ: 'd', ꝼ: 'f', ᵹ: 'g', ꞃ: 'r', ꞅ: 's', ꞇ: 't', ꝭ: 'is', ǰ: 'j', ĵ: 'j',\r\n      ʝ: 'j', ɉ: 'j', ḱ: 'k', ǩ: 'k', ķ: 'k', ⱪ: 'k', ꝃ: 'k', ḳ: 'k', ƙ: 'k', ḵ: 'k', ᶄ: 'k', ꝁ: 'k',\r\n      ꝅ: 'k', ĺ: 'l', ƚ: 'l', ɬ: 'l', ľ: 'l', ļ: 'l', ḽ: 'l', ȴ: 'l', ḷ: 'l', ḹ: 'l', ⱡ: 'l', ꝉ: 'l',\r\n      ḻ: 'l', ŀ: 'l', ɫ: 'l', ᶅ: 'l', ɭ: 'l', ł: 'l', ǉ: 'lj', ſ: 's', ẜ: 's', ẛ: 's', ẝ: 's', ḿ: 'm',\r\n      ṁ: 'm', ṃ: 'm', ɱ: 'm', ᵯ: 'm', ᶆ: 'm', ń: 'n', ň: 'n', ņ: 'n', ṋ: 'n', ȵ: 'n', ṅ: 'n', ṇ: 'n',\r\n      ǹ: 'n', ɲ: 'n', ṉ: 'n', ƞ: 'n', ᵰ: 'n', ᶇ: 'n', ɳ: 'n', ñ: 'n', ǌ: 'nj', ó: 'o', ŏ: 'o', ǒ: 'o',\r\n      ô: 'o', ố: 'o', ộ: 'o', ồ: 'o', ổ: 'o', ỗ: 'o', ö: 'oe', ȫ: 'o', ȯ: 'o', ȱ: 'o', ọ: 'o', ő: 'o',\r\n      ȍ: 'o', ò: 'o', ỏ: 'o', ơ: 'o', ớ: 'o', ợ: 'o', ờ: 'o', ở: 'o', ỡ: 'o', ȏ: 'o', ꝋ: 'o', ꝍ: 'o',\r\n      ⱺ: 'o', ō: 'o', ṓ: 'o', ṑ: 'o', ǫ: 'o', ǭ: 'o', ø: 'o', ǿ: 'o', õ: 'o', ṍ: 'o', ṏ: 'o', ȭ: 'o',\r\n      ƣ: 'oi', ꝏ: 'oo', ɛ: 'e', ᶓ: 'e', ɔ: 'o', ᶗ: 'o', ȣ: 'ou', ṕ: 'p', ṗ: 'p', ꝓ: 'p', ƥ: 'p', ᵱ: 'p',\r\n      ᶈ: 'p', ꝕ: 'p', ᵽ: 'p', ꝑ: 'p', ꝙ: 'q', ʠ: 'q', ɋ: 'q', ꝗ: 'q', ŕ: 'r', ř: 'r', ŗ: 'r', ṙ: 'r',\r\n      ṛ: 'r', ṝ: 'r', ȑ: 'r', ɾ: 'r', ᵳ: 'r', ȓ: 'r', ṟ: 'r', ɼ: 'r', ᵲ: 'r', ᶉ: 'r', ɍ: 'r', ɽ: 'r',\r\n      ↄ: 'c', ꜿ: 'c', ɘ: 'e', ɿ: 'r', ß: 'ss', ś: 's', ṥ: 's', š: 's', ṧ: 's', ş: 's', ŝ: 's', ș: 's',\r\n      ṡ: 's', ṣ: 's', ṩ: 's', ʂ: 's', ᵴ: 's', ᶊ: 's', ȿ: 's', ɡ: 'g', ᴑ: 'o', ᴓ: 'o', ᴝ: 'u', ť: 't',\r\n      ţ: 't', ṱ: 't', ț: 't', ȶ: 't', ẗ: 't', ⱦ: 't', ṫ: 't', ṭ: 't', ƭ: 't', ṯ: 't', ᵵ: 't', ƫ: 't',\r\n      ʈ: 't', ŧ: 't', ᵺ: 'th', ɐ: 'a', ᴂ: 'ae', ǝ: 'e', ᵷ: 'g', ɥ: 'h', ʮ: 'h', ʯ: 'h', ᴉ: 'i', ʞ: 'k',\r\n      ꞁ: 'l', ɯ: 'm', ɰ: 'm', ᴔ: 'oe', ɹ: 'r', ɻ: 'r', ɺ: 'r', ⱹ: 'r', ʇ: 't', ʌ: 'v', ʍ: 'w', ʎ: 'y',\r\n      ꜩ: 'tz', ú: 'u', ŭ: 'u', ǔ: 'u', û: 'u', ṷ: 'u', ü: 'ue', ǘ: 'u', ǚ: 'u', ǜ: 'u', ǖ: 'u', ṳ: 'u',\r\n      ụ: 'u', ű: 'u', ȕ: 'u', ù: 'u', ủ: 'u', ư: 'u', ứ: 'u', ự: 'u', ừ: 'u', ử: 'u', ữ: 'u', ȗ: 'u',\r\n      ū: 'u', ṻ: 'u', ų: 'u', ᶙ: 'u', ů: 'u', ũ: 'u', ṹ: 'u', ṵ: 'u', ᵫ: 'ue', ꝸ: 'um', ⱴ: 'v', ꝟ: 'v',\r\n      ṿ: 'v', ʋ: 'v', ᶌ: 'v', ⱱ: 'v', ṽ: 'v', ꝡ: 'vy', ẃ: 'w', ŵ: 'w', ẅ: 'w', ẇ: 'w', ẉ: 'w', ẁ: 'w',\r\n      ⱳ: 'w', ẘ: 'w', ẍ: 'x', ẋ: 'x', ᶍ: 'x', ý: 'y', ŷ: 'y', ÿ: 'y', ẏ: 'y', ỵ: 'y', ỳ: 'y', ƴ: 'y',\r\n      ỷ: 'y', ỿ: 'y', ȳ: 'y', ẙ: 'y', ɏ: 'y', ỹ: 'y', ź: 'z', ž: 'z', ẑ: 'z', ʑ: 'z', ⱬ: 'z', ż: 'z',\r\n      ẓ: 'z', ȥ: 'z', ẕ: 'z', ᵶ: 'z', ᶎ: 'z', ʐ: 'z', ƶ: 'z', ɀ: 'z', ﬀ: 'ff', ﬃ: 'ffi', ﬄ: 'ffl', ﬁ: 'fi',\r\n      ﬂ: 'fl', ĳ: 'ij', œ: 'oe', ﬆ: 'st', ₐ: 'a', ₑ: 'e', ᵢ: 'i', ⱼ: 'j', ₒ: 'o', ᵣ: 'r', ᵤ: 'u', ᵥ: 'v',\r\n      ₓ: 'x',\r\n    };\r\n    return input.replace(/[^A-Za-z0-9\\[\\] ]/g, (a) => (latinMap[a] || a));\r\n  }\r\n\r\n  static readQueryStringParameters(url: string): Dictionary<string> {\r\n    const queryParams: Dictionary<string> = {};\r\n    url.split('&').forEach(f => {\r\n      if (f.split('=').length === 2) {\r\n        queryParams[f.split('=')[0]] = decodeURIComponent(f.split('=')[1].replace(/\\+/g, ' '));\r\n      }\r\n    });\r\n    return queryParams;\r\n  }\r\n\r\n  /** https://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters/1099670#1099670 */\r\n  static getUrlParams(qs: string) {\r\n    qs = qs.split('+').join(' ');\r\n\r\n    const params: Dictionary<string> = {};\r\n    let tokens;\r\n    const re = /[?&]?([^=]+)=([^&]*)/g;\r\n\r\n    // tslint:disable-next-line:no-conditional-assignment\r\n    while (tokens = re.exec(qs)) {\r\n      params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\r\n    }\r\n\r\n    return params;\r\n  }\r\n\r\n  static replaceUrlParam(url: string, paramName: string, paramValue: string) {\r\n    if (paramValue === null) { paramValue = ''; }\r\n\r\n    const pattern = new RegExp('\\\\b(' + paramName + '=).*?(&|#|$)');\r\n    if (url.search(pattern) >= 0) { return url.replace(pattern, '$1' + paramValue + '$2'); }\r\n\r\n    url = url.replace(/[?#]$/, '');\r\n    return url + (url.indexOf('?') > 0 ? '&' : '?') + paramName + '=' + paramValue;\r\n  }\r\n\r\n  static getUrlPrefix(area: 'system' | 'zone' | 'app', eavConfig: EavConfig) {\r\n    let result = '';\r\n\r\n    if (area === 'system') { result = eavConfig.systemRoot; } // used to link to JS-stuff and similar\r\n    if (area === 'zone') { result = eavConfig.portalRoot; } // used to link to the site-root (like an image)\r\n    if (area === 'app') { result = eavConfig.appRoot; } // used to find the app-root of something inside an app\r\n    if (result.endsWith('/')) { result = result.substring(0, result.length - 1); }\r\n\r\n    return result;\r\n  }\r\n\r\n  static calculatePathFromRoot(route: ActivatedRoute) {\r\n    let lastChild = route;\r\n    while (lastChild.firstChild) {\r\n      lastChild = lastChild.firstChild;\r\n    }\r\n    let pathFromRoot = '';\r\n    for (const path of lastChild.snapshot.pathFromRoot) {\r\n      if (path.url.length <= 0) { continue; }\r\n      for (const urlSegment of path.url) {\r\n        if (!urlSegment.path) { continue; }\r\n        pathFromRoot += '/' + urlSegment.path;\r\n      }\r\n    }\r\n    return pathFromRoot;\r\n  }\r\n}\r\n","import { Dictionary } from '../../../ng-dialogs/src/app/shared/models/dictionary.model';\r\nimport { FormValues } from '../../eav-item-dialog/item-edit-form/item-edit-form.models';\r\n\r\nexport class GeneralHelpers {\r\n\r\n  static objectsEqual<T>(x: T, y: T): boolean {\r\n    if (x == null || y == null) { return x === y; }\r\n\r\n    const obj1 = x as Dictionary;\r\n    const obj2 = y as Dictionary;\r\n\r\n    const keys1 = Object.keys(obj1);\r\n    const keys2 = Object.keys(obj2);\r\n    if (keys1.length !== keys2.length) { return false; }\r\n\r\n    const equal = keys1.every(key1 => {\r\n      if (!obj2.hasOwnProperty(key1)) { return false; }\r\n\r\n      return obj1[key1] === obj2[key1];\r\n    });\r\n\r\n    return equal;\r\n  }\r\n\r\n  static arraysEqual<T>(x: T[], y: T[]): boolean {\r\n    if (x == null || y == null) { return x === y; }\r\n\r\n    if (x.length !== y.length) { return false; }\r\n\r\n    const equal = x.every((item, index) => {\r\n      return x[index] === y[index];\r\n    });\r\n\r\n    return equal;\r\n  }\r\n\r\n  /** Searches where newValues has values different from oldValues */\r\n  static getFormChanges(oldValues: FormValues, newValues: FormValues): FormValues {\r\n    const changes: FormValues = {};\r\n    for (const key of Object.keys(newValues)) {\r\n      const newValue = newValues[key];\r\n      const oldValue = oldValues[key];\r\n      if (newValue === oldValue) { continue; }\r\n      if (typeof newValue === 'number' && typeof oldValue === 'number' && isNaN(newValue) && isNaN(oldValue)) { continue; }\r\n      if (Array.isArray(newValue) && Array.isArray(oldValue) && GeneralHelpers.arraysEqual(newValue, oldValue)) { continue; }\r\n\r\n      changes[key] = newValue;\r\n    }\r\n    return Object.keys(changes).length === 0 ? undefined : changes;\r\n  }\r\n\r\n  static toggleInArray<T>(item: T, array: T[]): void {\r\n    const index = array.indexOf(item);\r\n    if (index === -1) {\r\n      array.push(item);\r\n    } else {\r\n      array.splice(index, 1);\r\n    }\r\n  }\r\n}\r\n","export type EavMetadataKey = 'attribute' | 'app' | 'entity' | 'contentType' | 'zone' | 'cmsObject';\r\nexport type EavKeyTypeKey = 'guid' | 'string' | 'number';\r\nexport interface EavScopeOption { name: string; value: string; }\r\n\r\nexport const eavConstants = {\r\n  metadata: {\r\n    /** metadataOfAttribute */\r\n    attribute: { type: 2, target: 'EAV Field Properties' },\r\n    /** metadataOfApp */\r\n    app: { type: 3, target: 'App' },\r\n    /** metadataOfEntity */\r\n    entity: { type: 4, target: 'Entity' },\r\n    /** metadataOfContentType */\r\n    contentType: { type: 5, target: 'ContentType' },\r\n    /** metadataOfZone */\r\n    zone: { type: 6, target: 'Zone' },\r\n    /** metadataOfCmsObject */\r\n    cmsObject: { type: 10, target: 'CmsObject' },\r\n  },\r\n\r\n  /** Loopup type for the metadata, e.g. key=80adb152-efad-4aa4-855e-74c5ef230e1f is keyType=guid */\r\n  keyTypes: {\r\n    guid: 'guid',\r\n    string: 'string',\r\n    number: 'number',\r\n  },\r\n\r\n  /** Scopes */\r\n  scopes: {\r\n    /** This is the main schema and the data you usually see is from here */\r\n    default: { name: 'Default', value: '2SexyContent' },\r\n    /** This contains content-types for configuration, settings and resources of the app */\r\n    app: { name: 'System: App', value: '2SexyContent-App' },\r\n  },\r\n\r\n  /** Content types where templates, permissions, etc. are stored */\r\n  contentTypes: {\r\n    /** Content type containing app templates (views) */\r\n    template: '2SexyContent-Template',\r\n    /** Content type containing permissions */\r\n    permissions: 'PermissionConfiguration',\r\n    /** Content type containing queries */\r\n    query: 'DataPipeline',\r\n    /** Content type containing content type metadata (app administration > data > metadata) */\r\n    contentType: 'ContentType',\r\n    /** Content type containing app settings */\r\n    settings: 'App-Settings',\r\n    /** Content type containing app resources */\r\n    resources: 'App-Resources',\r\n  },\r\n\r\n  pipelineDesigner: {\r\n    dataSourceDifficulties: {\r\n      default: 100,\r\n      advanced: 200,\r\n    },\r\n    outDataSource: {\r\n      Description: 'The template/script which will show this data',\r\n      EntityGuid: 'Out',\r\n      In: ['Default', 'Header'],\r\n      Name: '2sxc Target (View or API)',\r\n      PartAssemblyAndType: 'SexyContentTemplate',\r\n      PrimaryType: 'Target',\r\n      VisualDesignerData: { Top: 20, Left: 200, Width: 700 },\r\n    },\r\n    defaultPipeline: {\r\n      dataSources: [\r\n        // disable for https://github.com/2sic/2sxc/issues/2388 - remove in a few iterations ca. 2021-05\r\n        // {\r\n        //   EntityGuid: 'unsaved3',\r\n        //   PartAssemblyAndType: 'ToSic.Eav.DataSources.IAppRoot, ToSic.Eav.DataSources',\r\n        //   VisualDesignerData: { Top: 440, Left: 440 },\r\n        // }, {\r\n        //   EntityGuid: 'unsaved2',\r\n        //   PartAssemblyAndType: 'ToSic.Eav.DataSources.PublishingFilter, ToSic.Eav.DataSources',\r\n        //   VisualDesignerData: { Top: 300, Left: 440 },\r\n        // },\r\n        {\r\n          EntityGuid: 'unsaved1',\r\n          PartAssemblyAndType: 'ToSic.Sxc.DataSources.CmsBlock, ToSic.Sxc',\r\n          VisualDesignerData: { Top: 170, Left: 440 },\r\n        }\r\n      ],\r\n      streamWiring: [\r\n        // disable for https://github.com/2sic/2sxc/issues/2388 - remove in a few iterations ca. 2021-05\r\n        // { From: 'unsaved3', Out: 'Default', To: 'unsaved2', In: 'Default' },\r\n        // { From: 'unsaved3', Out: 'Drafts', To: 'unsaved2', In: 'Drafts' },\r\n        // { From: 'unsaved3', Out: 'Published', To: 'unsaved2', In: 'Published' },\r\n        // { From: 'unsaved2', Out: 'Default', To: 'unsaved1', In: 'Default' },\r\n        { From: 'unsaved1', Out: 'Header', To: 'Out', In: 'Header' },\r\n        { From: 'unsaved1', Out: 'Default', To: 'Out', In: 'Default' },\r\n      ],\r\n    },\r\n    testParameters: '[Demo:Demo]=true',\r\n  },\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { editRoot, refreshEditRoot } from '../../../edit/edit.matcher';\r\n\r\nconst appRoutes: Routes = [\r\n  {\r\n    path: ':zoneId/apps',\r\n    loadChildren: () => import('./apps-management/apps-management.module').then(m => m.AppsManagementModule),\r\n    data: { title: 'Apps' },\r\n  },\r\n  {\r\n    path: ':zoneId/import',\r\n    loadChildren: () => import('./import-app/import-app.module').then(m => m.ImportAppModule),\r\n    data: { title: 'Import App' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/app',\r\n    loadChildren: () => import('./app-administration/app-administration.module').then(m => m.AppAdministrationModule),\r\n    data: { title: 'App' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/code',\r\n    loadChildren: () => import('./code-editor/code-editor.module').then(m => m.CodeEditorModule),\r\n    data: { title: 'Code Editor' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/query/:pipelineId',\r\n    loadChildren: () => import('./visual-query/visual-query.module').then(m => m.VisualQueryModule),\r\n    data: { title: 'Visual Query' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/:guid/:part/:index/replace',\r\n    loadChildren: () => import('./replace-content/replace-content.module').then(m => m.ReplaceContentModule),\r\n    data: { title: 'Apps' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/:guid/:part/:index/reorder',\r\n    loadChildren: () => import('./manage-content-list/manage-content-list.module').then(m => m.ManageContentListModule),\r\n    data: { title: 'Reorder Items' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/items/:contentTypeStaticName',\r\n    loadChildren: () => import('./content-items/content-items.module').then(m => m.ContentItemsModule),\r\n    data: { title: 'Items' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/fields/:contentTypeStaticName',\r\n    loadChildren: () => import('./content-type-fields/content-type-fields.module').then(m => m.ContentTypeFieldsModule),\r\n    data: { title: 'Fields' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/versions/:itemId',\r\n    loadChildren: () => import('./item-history/item-history.module').then(m => m.ItemHistoryModule),\r\n  },\r\n  {\r\n    matcher: editRoot,\r\n    loadChildren: () => import('../../../edit/edit.module').then(m => m.EditModule),\r\n    data: { title: 'Edit Item' },\r\n  },\r\n  {\r\n    matcher: refreshEditRoot,\r\n    loadChildren: () => import('../../../edit/refresh-edit.module').then(m => m.RefreshEditModule)\r\n  },\r\n  // routes below are not linked directly from the initializer and are used for testing\r\n  // to make sure each module contains enough data to be self sustainable\r\n  {\r\n    path: ':zoneId/:appId/export/:contentTypeStaticName',\r\n    loadChildren: () => import('./content-export/content-export.module').then(m => m.ContentExportModule),\r\n    data: { title: 'Export Items' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/export/:contentTypeStaticName/:selectedIds',\r\n    loadChildren: () => import('./content-export/content-export.module').then(m => m.ContentExportModule),\r\n    data: { title: 'Export Items' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/import/:contentTypeStaticName',\r\n    loadChildren: () => import('./content-import/content-import.module').then(m => m.ContentImportModule),\r\n    data: { title: 'Import Items' },\r\n  },\r\n  {\r\n    path: ':zoneId/:appId/permissions/:type/:keyType/:key',\r\n    loadChildren: () => import('./permissions/permissions.module').then(m => m.PermissionsModule),\r\n    data: { title: 'Permissions' },\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(appRoutes, { relativeLinkResolution: 'legacy' })],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { EavDimension } from '.';\r\nimport { Value1 } from '../json-format-v1';\r\n\r\nexport class EavValue<T> {\r\n  Value: T;\r\n  Dimensions: EavDimension[];\r\n\r\n  static create<T>(value: T, dimensions: EavDimension[]): EavValue<T> {\r\n    const eavValue: EavValue<T> = {\r\n      Value: value,\r\n      Dimensions: dimensions,\r\n    };\r\n    return eavValue;\r\n  }\r\n\r\n  static convert<T>(value1: Value1<T>): EavValue<T>[] {\r\n    const values = Object.entries(value1).map(([langs, value]) => {\r\n      const dimensions = langs.split(',').map(lang => EavDimension.create(lang));\r\n      return this.create(value, dimensions);\r\n    });\r\n    return values;\r\n  }\r\n}\r\n","import { FieldSettings, FieldValue, InputTypeName } from '../../../edit-types';\r\nimport { InputTypeConstants } from '../../../ng-dialogs/src/app/content-type-fields/constants/input-type.constants';\r\nimport { InputType } from '../../../ng-dialogs/src/app/content-type-fields/models/input-type.model';\r\nimport { WrappersConstants } from '../constants/wrappers.constants';\r\nimport { CalculatedInputType } from '../models';\r\nimport { EavContentTypeAttribute, EavHeader, EavItem } from '../models/eav';\r\nimport { EavService } from '../services';\r\n\r\nexport class InputFieldHelpers {\r\n\r\n  static getContentTypeId(item: EavItem): string {\r\n    return item.Entity.Type?.Id ?? item.Header.ContentTypeName;\r\n  }\r\n\r\n  static getInputTypeNames(attributes: EavContentTypeAttribute[], inputTypes: InputType[]): InputTypeName[] {\r\n    return attributes.map(attribute => {\r\n      const calculatedInputType = this.calculateInputType(attribute, inputTypes);\r\n      const inputTypeName: InputTypeName = {\r\n        name: attribute.Name,\r\n        inputType: calculatedInputType.inputType,\r\n      };\r\n      return inputTypeName;\r\n    });\r\n  }\r\n\r\n  static calculateInputType(attribute: EavContentTypeAttribute, inputTypes: InputType[]): CalculatedInputType {\r\n    const inputType = inputTypes.find(i => i.Type === attribute.InputType);\r\n    const calculated: CalculatedInputType = {\r\n      inputType: attribute.InputType,\r\n      isExternal: inputType ? !!inputType.AngularAssets : false,\r\n    };\r\n    return calculated;\r\n  }\r\n\r\n  static getWrappers(settings: FieldSettings, calculatedInputType: CalculatedInputType) {\r\n    const inputType = calculatedInputType.inputType;\r\n    const isExternal = calculatedInputType.isExternal;\r\n\r\n    // empty inputtype wrappers\r\n    if (inputType === InputTypeConstants.EmptyDefault) { return [WrappersConstants.CollapsibleWrapper]; }\r\n\r\n    // default wrappers\r\n    const wrappers = [WrappersConstants.HiddenWrapper];\r\n\r\n    // entity-default wrappers\r\n    const isEntityType = (inputType === InputTypeConstants.EntityDefault)\r\n      || (inputType === InputTypeConstants.StringDropdownQuery)\r\n      || (inputType === InputTypeConstants.EntityQuery)\r\n      || (inputType === InputTypeConstants.EntityContentBlocks);\r\n\r\n    if (isEntityType) {\r\n      wrappers.push(WrappersConstants.LocalizationWrapper);\r\n      const allowMultiValue = settings.AllowMultiValue ?? false;\r\n      if (allowMultiValue || inputType === InputTypeConstants.EntityContentBlocks) {\r\n        wrappers.push(WrappersConstants.EntityExpandableWrapper);\r\n      }\r\n    }\r\n\r\n    if (isExternal) {\r\n      wrappers.push(\r\n        WrappersConstants.DropzoneWrapper,\r\n        WrappersConstants.LocalizationWrapper,\r\n        WrappersConstants.ExpandableWrapper,\r\n        WrappersConstants.AdamAttachWrapper,\r\n      );\r\n    }\r\n\r\n    return wrappers;\r\n  }\r\n\r\n  /** Include itemHeader if you need data from prefill, and set onlyPrefill if you only need parsed prefill */\r\n  static parseDefaultValue(\r\n    attributeKey: string,\r\n    inputType: InputType,\r\n    settings: FieldSettings,\r\n    itemHeader?: EavHeader,\r\n    onlyPrefill?: boolean,\r\n  ): FieldValue {\r\n    if (onlyPrefill && itemHeader?.Prefill?.[attributeKey] === undefined) { return; }\r\n\r\n    let defaultValue = settings.DefaultValue;\r\n\r\n    if (itemHeader?.Prefill?.[attributeKey]) {\r\n      defaultValue = itemHeader.Prefill[attributeKey];\r\n    }\r\n\r\n    switch (inputType?.Type) {\r\n      case InputTypeConstants.BooleanDefault:\r\n        return defaultValue != null\r\n          ? defaultValue.toLowerCase() === 'true'\r\n          : false;\r\n      case InputTypeConstants.BooleanTristate:\r\n        return defaultValue != null && defaultValue !== ''\r\n          ? defaultValue.toLowerCase() === 'true'\r\n          : null;\r\n      case InputTypeConstants.DatetimeDefault:\r\n        return defaultValue != null && defaultValue !== ''\r\n          ? new Date(defaultValue).toJSON()\r\n          : null;\r\n      case InputTypeConstants.NumberDefault:\r\n        return defaultValue != null && defaultValue !== ''\r\n          ? !isNaN(Number(defaultValue)) ? Number(defaultValue) : null\r\n          : null;\r\n      case InputTypeConstants.EntityDefault:\r\n      case InputTypeConstants.EntityQuery:\r\n      case InputTypeConstants.EntityContentBlocks:\r\n        if (defaultValue == null || defaultValue === '') { return []; }\r\n        // string has { } characters, we must switch them to quotes\r\n        if (defaultValue.includes('{')) {\r\n          defaultValue = defaultValue.replace(/[\\{\\}]/g, '\\\"');\r\n        }\r\n        // list but no array, add brackets\r\n        if (defaultValue.includes(',') && !defaultValue.includes('[')) {\r\n          const guids = defaultValue.split(',').map(guid => guid.trim());\r\n          defaultValue = JSON.stringify(guids);\r\n        }\r\n        return defaultValue.startsWith('[') // an array with guid strings\r\n          ? JSON.parse(defaultValue) // if it's a string containing an array\r\n          : [defaultValue.replace(/\"/g, '')]; // just a guid string, but might have quotes\r\n      default:\r\n        return defaultValue ?? '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Entity fields for empty items are prefilled on the backend with []\r\n   * so I can never know if entity field is brand new, or just emptied out by the user\r\n   */\r\n  static isValueEmpty(value: FieldValue, eavService: EavService) {\r\n    const emptyEntityField = Array.isArray(value) && value.length === 0 && eavService.eavConfig.createMode;\r\n    return value === undefined || emptyEntityField;\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 640 512\\\"><path d=\\\"M608 352h-32v-97.59c0-16.77-13.62-30.41-30.41-30.41H336v-64h48c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h48v64H94.41C77.62 224 64 237.64 64 254.41V352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32H96v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32h-32v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-480 32v96H32v-96h96zm240 0v96h-96v-96h96zM256 128V32h128v96H256zm352 352h-96v-96h96v96z\\\"/></svg>\";","import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class SetHeadersInterceptor implements HttpInterceptor {\r\n\r\n  constructor() { }\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    let modified: HttpRequest<any>;\r\n    if (req.body instanceof FormData) {\r\n      // sending files. Do not set content type so browser can add delimiter boundary automatically\r\n      return next.handle(req);\r\n    } else {\r\n      modified = req.clone({\r\n        setHeaders: {\r\n          'Content-Type': 'application/json;charset=UTF-8',\r\n        }\r\n      });\r\n      return next.handle(modified);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { Observable } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport { EavContentType } from '../../models/eav';\r\nimport { ContentType1 } from '../../models/json-format-v1';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ContentTypeService extends BaseDataService<EavContentType> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('ContentType', serviceElementsFactory);\r\n  }\r\n\r\n  addContentTypes(contentTypes1: ContentType1[]): void {\r\n    const contentTypes = contentTypes1.map(contentType1 => EavContentType.convert(contentType1));\r\n    this.addManyToCache(contentTypes);\r\n  }\r\n\r\n  getContentType(id: string): EavContentType {\r\n    return this.cache$.value.find(contentType => contentType.Id === id);\r\n  }\r\n\r\n  getContentType$(id: string): Observable<EavContentType> {\r\n    return this.cache$.pipe(\r\n      map(contentTypes => contentTypes.find(contentType => contentType.Id === id)),\r\n      distinctUntilChanged(),\r\n    );\r\n  }\r\n}\r\n","import { EavValue } from '.';\r\nimport { Value1 } from '../json-format-v1';\r\n\r\nexport class EavValues<T> {\r\n  Values: EavValue<T>[];\r\n  Type: string;\r\n\r\n  static convert<T>(value1: Value1<T>, type: string): EavValues<T> {\r\n    const values = EavValue.convert(value1);\r\n\r\n    const eavValues: EavValues<T> = {\r\n      Values: values,\r\n      Type: type,\r\n    };\r\n    return eavValues;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { EavEntity } from '../../models/eav';\r\nimport { Entity1 } from '../../models/json-format-v1';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ContentTypeItemService extends BaseDataService<EavEntity> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('ContentTypeItem', serviceElementsFactory);\r\n  }\r\n\r\n  addContentTypeItems(contentTypeItems1: Entity1[]): void {\r\n    const contentTypeItems = EavEntity.convertMany(contentTypeItems1);\r\n    this.upsertManyInCache(contentTypeItems);\r\n  }\r\n\r\n  getContentTypeItem(guid: string): EavEntity {\r\n    return this.cache$.value.find(contentTypeItem => contentTypeItem.Guid === guid);\r\n  }\r\n\r\n  getContentTypeItems(guids: string[]): EavEntity[] {\r\n    return this.cache$.value.filter(contentTypeItem => guids.includes(contentTypeItem.Guid));\r\n  }\r\n}\r\n","export * from './reducers';\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 48 48\\\">\\r\\n<style type=\\\"text/css\\\">\\r\\n\\t.st0{display:none;}\\r\\n\\t.st1{display:inline;}\\r\\n</style>\\r\\n<g id=\\\"Layer_1\\\">\\r\\n\\t<path d=\\\"M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z\\\"/>\\r\\n</g>\\r\\n<g id=\\\"Layer_3\\\" class=\\\"st0\\\">\\r\\n</g>\\r\\n<g id=\\\"Icon\\\">\\r\\n\\t<path d=\\\"M32,20c3.7,0,6,2.1,6,5.47C38,33.21,33.01,40,30.06,40c-0.25-0.04-0.93-0.35-1.38-0.56c-1.25-0.58-2.8-1.3-4.68-1.3\\r\\n\\t\\ts-3.43,0.72-4.68,1.3C18.87,39.65,18.19,39.97,18,40c-3.01,0-8-6.79-8-14.53C10,22.1,12.3,20,16,20c2.44,0,5.29,1.17,6.17,1.62\\r\\n\\t\\tL24,22.56l1.83-0.94C26.64,21.2,29.53,20,32,20 M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44\\r\\n\\t\\tc2,0,4-1.85,6-1.85S28,44,30,44c6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z\\\"/>\\r\\n</g>\\r\\n</svg>\\r\\n\";","export class DialogTypeConstants {\r\n  public static readonly Zone = 'zone';\r\n  public static readonly AppImport = 'app-import';\r\n  public static readonly App = 'app';\r\n  public static readonly ContentType = 'contenttype';\r\n  public static readonly ContentItems = 'contentitems';\r\n  public static readonly Edit = 'edit';\r\n  public static readonly ItemHistory = 'item-history';\r\n  public static readonly Develop = 'develop';\r\n  public static readonly PipelineDesigner = 'pipeline-designer';\r\n  public static readonly Replace = 'replace';\r\n  public static readonly InstanceList = 'instance-list';\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-53.6-246.5c-6.8 32.8-32.5 139.7-33.4 150.3-5.8-29.1-.7 1.6-41.8-150.9-1.4-5.2-6.2-8.9-11.6-8.9h-6.4c-5.4 0-10.2 3.6-11.6 8.9-38.3 142.3-37.4 140.6-39.4 154.7-4.1-23.9 2.1-2.9-34.4-154.4-1.3-5.4-6.1-9.2-11.7-9.2h-7.2c-7.8 0-13.5 7.3-11.6 14.9 9.5 38 34.5 137.4 42.2 168 1.3 5.3 6.1 9.1 11.6 9.1h17c5.4 0 10.2-3.7 11.6-8.9 34.2-127.7 33.5-123.4 36.7-142.9 6.5 31.1.2 7 36.7 142.9 1.4 5.2 6.2 8.9 11.6 8.9h14c5.5 0 13.7-3.7 15.1-9l42.8-168c1.9-7.6-3.8-15-11.6-15h-6.8c-5.7 0-10.6 4-11.8 9.5z\\\"/></svg>\";","import { ChangeDetectorRef, ViewContainerRef } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { take } from 'rxjs/operators';\r\nimport { PagePickerResult } from '../../../edit-types';\r\nimport { FieldConfigSet } from '../../eav-dynamic-form/model/field-config';\r\nimport { PagePickerComponent } from '../../eav-material-controls/page-picker/page-picker.component';\r\nimport { PagePickerDialogData } from '../../eav-material-controls/page-picker/page-picker.models';\r\n\r\nexport class PagePicker {\r\n  static open(\r\n    config: FieldConfigSet,\r\n    group: FormGroup,\r\n    dialog: MatDialog,\r\n    viewContainerRef: ViewContainerRef,\r\n    changeDetectorRef: ChangeDetectorRef,\r\n    callback: (value: PagePickerResult) => void,\r\n  ): void {\r\n    const data: PagePickerDialogData = {\r\n      config,\r\n      group,\r\n    };\r\n    const dialogRef = dialog.open(PagePickerComponent, {\r\n      autoFocus: false,\r\n      data,\r\n      viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    dialogRef.afterClosed().pipe(take(1)).subscribe((value: PagePickerResult) => {\r\n      callback(value);\r\n    });\r\n\r\n    changeDetectorRef.markForCheck();\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-22-171.2c-13.5-13.3-55-9.2-73.7-6.7-21.2-12.8-35.2-30.4-45.1-56.6 4.3-18 12-47.2 6.4-64.9-4.4-28.1-39.7-24.7-44.6-6.8-5 18.3-.3 44.4 8.4 77.8-11.9 28.4-29.7 66.9-42.1 88.6-20.8 10.7-54.1 29.3-58.8 52.4-3.5 16.8 22.9 39.4 53.1 6.4 9.1-9.9 19.3-24.8 31.3-45.5 26.7-8.8 56.1-19.8 82-24 21.9 12 47.6 19.9 64.6 19.9 27.7.1 28.9-30.2 18.5-40.6zm-229.2 89c5.9-15.9 28.6-34.4 35.5-40.8-22.1 35.3-35.5 41.5-35.5 40.8zM180 175.5c8.7 0 7.8 37.5 2.1 47.6-5.2-16.3-5-47.6-2.1-47.6zm-28.4 159.3c11.3-19.8 21-43.2 28.8-63.7 9.7 17.7 22.1 31.7 35.1 41.5-24.3 4.7-45.4 15.1-63.9 22.2zm153.4-5.9s-5.8 7-43.5-9.1c41-3 47.7 6.4 43.5 9.1z\\\"/></svg>\";","export const componentMetadataKey = 'componentMetadata';\r\n","import { InputFieldHelpers, LocalizationHelpers } from '.';\r\nimport { FieldSettings, FieldValue } from '../../../edit-types';\r\nimport { InputType } from '../../../ng-dialogs/src/app/content-type-fields/models/input-type.model';\r\nimport { FormValues } from '../../eav-item-dialog/item-edit-form/item-edit-form.models';\r\nimport { DesignerSnippet, FieldOption } from '../../eav-item-dialog/multi-item-edit-form-debug/formula-designer/formula-designer.models';\r\n// tslint:disable-next-line:max-line-length\r\nimport { FormulaCacheItem, FormulaFunction, FormulaProps, FormulaPropsV1, FormulaTargets, FormulaV1Data, FormulaV1ExperimentalEntity, FormulaVersion, FormulaVersions, Language, SettingsFormulaPrefix } from '../models';\r\nimport { EavHeader } from '../models/eav';\r\nimport { EavService, FieldsSettingsService } from '../services';\r\nimport { ItemService } from '../store/ngrx-data';\r\n\r\nexport class FormulaHelpers {\r\n\r\n  static findFormulaVersion(formula: string): FormulaVersion {\r\n    const cleanFormula = formula.trim();\r\n    const typePart = cleanFormula.substring(0, cleanFormula.indexOf('(')).trim();\r\n\r\n    switch (typePart) {\r\n      case FormulaVersions.V1:\r\n        return FormulaVersions.V1;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  static buildFormulaFunction(formula: string): FormulaFunction {\r\n    const version = this.findFormulaVersion(formula);\r\n    let cleanFormula = formula.trim();\r\n\r\n    switch (version) {\r\n      case FormulaVersions.V1:\r\n        cleanFormula = `function ${cleanFormula.substring(FormulaVersions.V1.length).trim()}`;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    const fn: FormulaFunction = new Function(`return ${cleanFormula}`)();\r\n    return fn;\r\n  }\r\n\r\n  static buildFormulaProps(\r\n    formula: FormulaCacheItem,\r\n    entityId: number,\r\n    inputType: InputType,\r\n    settings: FieldSettings,\r\n    previousSettings: FieldSettings,\r\n    formValues: FormValues,\r\n    initialFormValues: FormValues,\r\n    currentLanguage: string,\r\n    defaultLanguage: string,\r\n    languages: Language[],\r\n    itemHeader: EavHeader,\r\n    debugEnabled: boolean,\r\n    itemService: ItemService,\r\n    eavService: EavService,\r\n    fieldsSettingsService: FieldsSettingsService,\r\n  ): FormulaProps {\r\n\r\n    switch (formula.version) {\r\n      case FormulaVersions.V1:\r\n        const data: FormulaV1Data = {\r\n          ...formValues,\r\n          get default() { return undefined as FieldValue; },\r\n          get initial() { return undefined as FieldValue; },\r\n          get prefill() { return undefined as FieldValue; },\r\n          get value() { return undefined as FieldValue; },\r\n        };\r\n        Object.defineProperties(data, {\r\n          default: {\r\n            get(): FieldValue {\r\n              if (formula.target === FormulaTargets.Value) {\r\n                return InputFieldHelpers.parseDefaultValue(formula.fieldName, inputType, settings);\r\n              }\r\n              if (formula.target.startsWith(SettingsFormulaPrefix)) {\r\n                const settingName = formula.target.substring(SettingsFormulaPrefix.length);\r\n                return (settings as Record<string, any>)[settingName];\r\n              }\r\n            },\r\n          },\r\n          initial: {\r\n            get(): FieldValue {\r\n              if (formula.target !== FormulaTargets.Value) { return; }\r\n              return initialFormValues[formula.fieldName];\r\n            },\r\n          },\r\n          prefill: {\r\n            get(): FieldValue {\r\n              if (formula.target !== FormulaTargets.Value) { return; }\r\n              return InputFieldHelpers.parseDefaultValue(formula.fieldName, inputType, settings, itemHeader, true);\r\n            },\r\n          },\r\n          value: {\r\n            get(): FieldValue {\r\n              if (formula.target === FormulaTargets.Value) {\r\n                return formValues[formula.fieldName];\r\n              }\r\n              if (formula.target.startsWith(SettingsFormulaPrefix)) {\r\n                const settingName = formula.target.substring(SettingsFormulaPrefix.length);\r\n                return (previousSettings as Record<string, any>)[settingName];\r\n              }\r\n            },\r\n          },\r\n        });\r\n        const propsV1: FormulaPropsV1 = {\r\n          data,\r\n          context: {\r\n            cache: formula.cache,\r\n            culture: {\r\n              code: currentLanguage,\r\n              name: languages.find(l => l.key === currentLanguage)?.name,\r\n            },\r\n            debug: debugEnabled,\r\n            target: {\r\n              entity: {\r\n                guid: formula.entityGuid,\r\n                id: entityId,\r\n              },\r\n              name: formula.target === FormulaTargets.Value\r\n                ? formula.fieldName\r\n                : formula.target.substring(formula.target.lastIndexOf('.') + 1),\r\n              type: formula.target === FormulaTargets.Value\r\n                ? formula.target\r\n                : formula.target.substring(0, formula.target.lastIndexOf('.')),\r\n            },\r\n          },\r\n          experimental: {\r\n            getEntities(): FormulaV1ExperimentalEntity[] {\r\n              const v1Entities = itemService.getItems(eavService.eavConfig.itemGuids).map(item => {\r\n                const v1Entity: FormulaV1ExperimentalEntity = {\r\n                  guid: item.Entity.Guid,\r\n                  id: item.Entity.Id,\r\n                  type: item.Entity.Type,\r\n                };\r\n                return v1Entity;\r\n              });\r\n              return v1Entities;\r\n            },\r\n            getSettings(fieldName: string): FieldSettings {\r\n              return fieldsSettingsService.getFieldSettings(fieldName);\r\n            },\r\n            getValues(entityGuid: string): FormValues {\r\n              const item = itemService.getItem(entityGuid);\r\n              const values: FormValues = {};\r\n              for (const [fieldName, fieldValues] of Object.entries(item.Entity.Attributes)) {\r\n                values[fieldName] = LocalizationHelpers.translate(currentLanguage, defaultLanguage, fieldValues, null);\r\n              }\r\n              return values;\r\n            },\r\n          }\r\n        };\r\n        return propsV1;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  static buildDesignerSnippets(formula: FormulaCacheItem, fieldOptions: FieldOption[]): DesignerSnippet[] {\r\n    switch (formula.version) {\r\n      case FormulaVersions.V1:\r\n        const valueSnippet: DesignerSnippet = {\r\n          code: 'data.value',\r\n          label: 'data.value',\r\n        };\r\n\r\n        const defaultSnippet: DesignerSnippet = {\r\n          code: 'data.default',\r\n          label: 'data.default',\r\n        };\r\n\r\n        const prefillSnippet: DesignerSnippet = {\r\n          code: 'data.prefill',\r\n          label: 'data.prefill',\r\n        };\r\n\r\n        const fieldSnippets = fieldOptions.map(field => {\r\n          const code = `data.${field.fieldName}`;\r\n          const fieldSnippet: DesignerSnippet = {\r\n            code,\r\n            label: code,\r\n          };\r\n          return fieldSnippet;\r\n        });\r\n\r\n        return [valueSnippet, defaultSnippet, prefillSnippet, ...fieldSnippets];\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n}\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","import { Injectable } from '@angular/core';\r\nimport { Dictionary } from '../../../ng-dialogs/src/app/shared/models/dictionary.model';\r\n\r\n@Injectable()\r\nexport class FileTypeService {\r\n  private defaultIcon = 'file';\r\n  private checkImgRegEx = /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:jpg|jpeg|gif|png))(?:\\?([^#]*))?(?:#(.*))?/i;\r\n  private customExtensions: Dictionary<string> = {\r\n    doc: 'file-word',\r\n    docx: 'file-word',\r\n    xls: 'file-excel',\r\n    xlsx: 'file-excel',\r\n    ppt: 'file-powerpoint',\r\n    pptx: 'file-powerpoint',\r\n    pdf: 'file-pdf',\r\n    mp3: 'file-audio',\r\n    avi: 'file-video',\r\n    mpg: 'file-video',\r\n    mpeg: 'file-video',\r\n    mov: 'file-video',\r\n    mp4: 'file-video',\r\n    zip: 'file-archive',\r\n    rar: 'file-archive',\r\n    txt: 'file-text',\r\n    html: 'file-code',\r\n    css: 'file-code',\r\n    xml: 'file-code',\r\n    xsl: 'file-code',\r\n  };\r\n\r\n  private matExtensions: Dictionary<string> = {\r\n    vcf: 'person',\r\n  };\r\n\r\n  constructor() { }\r\n\r\n  getExtension(filename: string) {\r\n    return filename.substring(filename.lastIndexOf('.') + 1).toLocaleLowerCase();\r\n  }\r\n\r\n  getIconClass(filename: string) {\r\n    const ext = this.getExtension(filename);\r\n    return this.matExtensions[ext] || this.customExtensions[ext] || this.defaultIcon;\r\n  }\r\n\r\n  isKnownType(filename: string) {\r\n    return this.matExtensions[this.getExtension(filename)] != null;\r\n  }\r\n\r\n  isImage(filename: string) {\r\n    return this.checkImgRegEx.test(filename);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityCollectionServiceElementsFactory } from '@ngrx/data';\r\nimport { AdamItem } from '../../../../edit-types';\r\nimport { PrefetchAdams } from '../../../eav-item-dialog/multi-item-edit-form/multi-item-edit-form.models';\r\nimport { AdamSnapshot } from '../../models';\r\nimport { BaseDataService } from './base-data.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AdamCacheService extends BaseDataService<AdamSnapshot> {\r\n  constructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\r\n    super('AdamCache', serviceElementsFactory);\r\n  }\r\n\r\n  loadPrefetch(prefetchAdams: PrefetchAdams): void {\r\n    if (prefetchAdams == null) { return; }\r\n\r\n    const snapshots = Object.entries(prefetchAdams).map(([entityGuid, attributes]) => {\r\n      const snapshot: AdamSnapshot = {\r\n        Guid: entityGuid,\r\n        Attributes: attributes,\r\n      };\r\n      return snapshot;\r\n    });\r\n    this.upsertManyInCache(snapshots);\r\n  }\r\n\r\n  getAdamSnapshot(entityGuid: string, fieldName: string): AdamItem[] {\r\n    return this.cache$.value.find(adamSnapshot => adamSnapshot.Guid === entityGuid)?.Attributes[fieldName];\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { EavService } from '.';\r\nimport { FieldSettings } from '../../../edit-types';\r\nimport { InputTypeConstants } from '../../../ng-dialogs/src/app/content-type-fields/constants/input-type.constants';\r\nimport { UpdateEnvVarsFromDialogSettings } from '../../../ng-dialogs/src/app/shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { convertUrlToForm } from '../../../ng-dialogs/src/app/shared/helpers/url-prep.helper';\r\nimport { FormValues } from '../../eav-item-dialog/item-edit-form/item-edit-form.models';\r\nimport { calculateIsParentDialog, sortLanguages } from '../../eav-item-dialog/multi-item-edit-form/multi-item-edit-form.helpers';\r\nimport { EavFormData } from '../../eav-item-dialog/multi-item-edit-form/multi-item-edit-form.models';\r\nimport { EditParams } from '../../edit-matcher.models';\r\nimport { BestValueModes } from '../constants/localization.constants';\r\nimport { FieldsSettingsHelpers, InputFieldHelpers, LocalizationHelpers } from '../helpers';\r\nimport { Language, PublishStatus } from '../models';\r\n// tslint:disable-next-line:max-line-length\r\nimport { AdamCacheService, ContentTypeItemService, ContentTypeService, EntityCacheService, FeatureService, InputTypeService, ItemService, LanguageInstanceService, LanguageService, LinkCacheService, PublishStatusService } from '../store/ngrx-data';\r\n\r\n@Injectable()\r\nexport class EditInitializerService implements OnDestroy {\r\n  loaded$ = new BehaviorSubject(false);\r\n\r\n  private initialFormValues: Record<string, FormValues> = {};\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private eavService: EavService,\r\n    private itemService: ItemService,\r\n    private inputTypeService: InputTypeService,\r\n    private contentTypeItemService: ContentTypeItemService,\r\n    private contentTypeService: ContentTypeService,\r\n    private featureService: FeatureService,\r\n    private publishStatusService: PublishStatusService,\r\n    private translate: TranslateService,\r\n    private languageService: LanguageService,\r\n    private languageInstanceService: LanguageInstanceService,\r\n    private snackBar: MatSnackBar,\r\n    private entityCacheService: EntityCacheService,\r\n    private adamCacheService: AdamCacheService,\r\n    private linkCacheService: LinkCacheService,\r\n  ) { }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loaded$.complete();\r\n  }\r\n\r\n  fetchFormData(): void {\r\n    const form = convertUrlToForm((this.route.snapshot.params as EditParams).items);\r\n    const editItems = JSON.stringify(form.items);\r\n    this.eavService.fetchFormData(editItems).subscribe(formData => {\r\n      UpdateEnvVarsFromDialogSettings(formData.Context.App);\r\n      this.saveFormData(formData);\r\n      this.keepInitialValues();\r\n      this.setMissingValues();\r\n\r\n      this.loaded$.next(true);\r\n    });\r\n  }\r\n\r\n  private saveFormData(formData: EavFormData): void {\r\n    const formId = Math.floor(Math.random() * 99999);\r\n    const isParentDialog = calculateIsParentDialog(this.route);\r\n    const itemGuids = formData.Items.map(item => item.Entity.Guid);\r\n\r\n    this.itemService.loadItems(formData.Items);\r\n    // we assume that input type and content type data won't change between loading parent and child forms\r\n    this.inputTypeService.addInputTypes(formData.InputTypes);\r\n    this.contentTypeItemService.addContentTypeItems(formData.ContentTypeItems);\r\n    this.contentTypeService.addContentTypes(formData.ContentTypes);\r\n    this.featureService.loadFeatures(formData.Features);\r\n    this.adamCacheService.loadPrefetch(formData.Prefetch?.Adam);\r\n    this.entityCacheService.loadEntities(formData.Prefetch?.Entities);\r\n    this.linkCacheService.loadPrefetch(formData.Prefetch?.Links, formData.Prefetch?.Adam);\r\n\r\n    const items = this.itemService.getItems(itemGuids);\r\n    const createMode = items[0].Entity.Id === 0;\r\n    const isCopy = items[0].Header.DuplicateEntity != null;\r\n    const enableHistory = !createMode && this.route.snapshot.data.history !== false;\r\n    this.eavService.setEavConfig(formData.Context, formId, isParentDialog, itemGuids, createMode, isCopy, enableHistory);\r\n\r\n    const currentLanguage = this.eavService.eavConfig.lang;\r\n    const defaultLanguage = this.eavService.eavConfig.langPri;\r\n    const languages = this.eavService.eavConfig.langs;\r\n    // WARNING! TranslateService is a new instance for every form and language must be set for every one of them\r\n    const isoLangCode = currentLanguage.split('-')[0];\r\n    this.translate.use(isoLangCode);\r\n\r\n    // load language data only for parent dialog to not overwrite languages when opening child dialogs\r\n    if (isParentDialog) {\r\n      const eavLangs: Language[] = Object.entries(languages).map(([key, name]) => ({ key, name }));\r\n      const sortedLanguages = sortLanguages(defaultLanguage, eavLangs);\r\n      this.languageService.loadLanguages(sortedLanguages);\r\n    }\r\n    this.languageInstanceService.addLanguageInstance(formId, currentLanguage, defaultLanguage, currentLanguage, false);\r\n\r\n    const publishStatus: PublishStatus = {\r\n      formId,\r\n      DraftShouldBranch: formData.DraftShouldBranch,\r\n      IsPublished: formData.IsPublished,\r\n    };\r\n    this.publishStatusService.setPublishStatus(publishStatus);\r\n  }\r\n\r\n  private keepInitialValues(): void {\r\n    const items = this.itemService.getItems(this.eavService.eavConfig.itemGuids);\r\n    const languages = this.languageService.getLanguages().map(language => language.key);\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n    if (!languages.includes(currentLanguage)) {\r\n      languages.push(currentLanguage);\r\n    }\r\n    if (!languages.includes(defaultLanguage)) {\r\n      languages.push(defaultLanguage);\r\n    }\r\n\r\n    for (const item of items) {\r\n      for (const language of languages) {\r\n        const formValues: FormValues = {};\r\n        for (const [fieldName, fieldValues] of Object.entries(item.Entity.Attributes)) {\r\n          formValues[fieldName] = LocalizationHelpers.translate(language, defaultLanguage, fieldValues, null);\r\n        }\r\n        this.initialFormValues[this.getInitialValuesKey(item.Entity.Guid, language)] = formValues;\r\n      }\r\n    }\r\n  }\r\n\r\n  private getInitialValuesKey(entityGuid: string, language: string): string {\r\n    return `entityGuid:${entityGuid}:language:${language}`;\r\n  }\r\n\r\n  getInitialValues(entityGuid: string, language: string): FormValues {\r\n    return this.initialFormValues[this.getInitialValuesKey(entityGuid, language)];\r\n  }\r\n\r\n  private setMissingValues(): void {\r\n    const items = this.itemService.getItems(this.eavService.eavConfig.itemGuids);\r\n    const inputTypes = this.inputTypeService.getInputTypes();\r\n    const languages = this.languageService.getLanguages();\r\n    const defaultLanguage = this.languageInstanceService.getDefaultLanguage(this.eavService.eavConfig.formId);\r\n    let switchToDefault = false;\r\n\r\n    for (const item of items) {\r\n      const contentTypeId = InputFieldHelpers.getContentTypeId(item);\r\n      const contentType = this.contentTypeService.getContentType(contentTypeId);\r\n\r\n      for (const ctAttribute of contentType.Attributes) {\r\n        const inputType = inputTypes.find(i => i.Type === ctAttribute.InputType);\r\n        // 'custom-default' doesn't have inputType and 'empty-default' and 'empty-end' don't save value\r\n        const empties = [InputTypeConstants.EmptyDefault, InputTypeConstants.EmptyEnd];\r\n        if (empties.includes(inputType?.Type)) { continue; }\r\n\r\n        const attributeValues = item.Entity.Attributes[ctAttribute.Name];\r\n        const fieldSettings = FieldsSettingsHelpers.setDefaultFieldSettings(\r\n          FieldsSettingsHelpers.mergeSettings<FieldSettings>(ctAttribute.Metadata, defaultLanguage, defaultLanguage),\r\n        );\r\n\r\n        if (languages.length === 0) {\r\n          const firstValue = LocalizationHelpers.getBestValue(attributeValues, '*', '*', BestValueModes.Default);\r\n          if (InputFieldHelpers.isValueEmpty(firstValue, this.eavService)) {\r\n            this.itemService.setDefaultValue(item, ctAttribute, inputType, fieldSettings, languages, defaultLanguage);\r\n          }\r\n        } else {\r\n          const noLanguageValue = LocalizationHelpers.getBestValue(attributeValues, '*', '*', BestValueModes.Strict);\r\n          if (!inputType?.DisableI18n && noLanguageValue !== undefined) {\r\n            // move * value to defaultLanguage\r\n            const transactionItem = this.itemService.removeItemAttributeDimension(item.Entity.Guid, ctAttribute.Name, '*', true);\r\n            this.itemService.addItemAttributeValue(\r\n              item.Entity.Guid,\r\n              ctAttribute.Name,\r\n              noLanguageValue,\r\n              defaultLanguage,\r\n              false,\r\n              ctAttribute.Type,\r\n              false,\r\n              transactionItem,\r\n            );\r\n            continue;\r\n          }\r\n\r\n          const defaultLanguageValue = LocalizationHelpers.getBestValue(\r\n            attributeValues,\r\n            defaultLanguage,\r\n            defaultLanguage,\r\n            BestValueModes.Strict,\r\n          );\r\n          if (InputFieldHelpers.isValueEmpty(defaultLanguageValue, this.eavService)) {\r\n            this.itemService.setDefaultValue(item, ctAttribute, inputType, fieldSettings, languages, defaultLanguage);\r\n            switchToDefault = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const currentLanguage = this.languageInstanceService.getCurrentLanguage(this.eavService.eavConfig.formId);\r\n    if (switchToDefault && currentLanguage !== defaultLanguage) {\r\n      this.languageInstanceService.setCurrentLanguage(this.eavService.eavConfig.formId, defaultLanguage);\r\n      const message = this.translate.instant('Message.SwitchedLanguageToDefault', { language: defaultLanguage });\r\n      this.snackBar.open(message, null, { duration: 5000 });\r\n    }\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M128 96v32h32V96zm65.9 169.6c-1.1-5.6-6-9.6-11.8-9.6H160v-32h-32v32l-19.4 97.2c-6.5 32.5 18.3 62.8 51.4 62.8s57.9-30.3 51.4-62.8zm-33.6 124.5c-17.9 0-32.4-12.1-32.4-27s14.5-27 32.4-27 32.4 12.1 32.4 27-14.5 27-32.4 27zM128 160v32h32v-32zm64-96h-32v32h32zm177.9 33.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.4 2.1 7.4 4.2l83.9 83.9c2 2 3.5 4.6 4.2 7.4H256zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h79.7v32h32V32H224v104c0 13.3 10.7 24 24 24h104zM192 192h-32v32h32zm0-64h-32v32h32z\\\"/></svg>\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}