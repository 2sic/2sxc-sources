{"version":3,"sources":["./projects/ng-dialogs/src/app/code-editor/code-editor.module.ts","./projects/ng-dialogs/src/app/code-editor/code-editor.component.scss","./projects/ng-dialogs/src/app/code-editor/services/snippets.service.ts","./projects/ng-dialogs/src/app/code-editor/models/source-view.model.ts","./projects/ng-dialogs/src/app/code-editor/code-templates/code-templates.helpers.ts","./projects/ng-dialogs/src/app/code-editor/code-templates/depth-padding.pipe.ts","./projects/ng-dialogs/src/app/code-editor/code-snippets/object-to-array.pipe.ts","./projects/ng-dialogs/src/app/code-editor/code-templates/code-templates.component.scss","./projects/ng-dialogs/src/app/code-editor/ace-editor/ace-editor.component.ts","./projects/ng-dialogs/src/app/shared/constants/file-names.constants.ts","./projects/ng-dialogs/src/app/code-editor/code-editor.component.ts","./projects/ng-dialogs/src/app/code-editor/code-snippets/code-snippets.component.ts","./projects/ng-dialogs/src/app/code-editor/ace-editor/ace-options.ts","./projects/ng-dialogs/src/app/code-editor/code-templates/code-templates.component.ts","./projects/ng-dialogs/src/app/code-editor/code-templates/order-items.pipe.ts","./projects/ng-dialogs/src/app/code-editor/code-snippets/code-snippets.component.html","./projects/ng-dialogs/src/app/code-editor/code-templates/code-templates.component.html","./projects/ng-dialogs/src/app/code-editor/code-snippets/code-snippets.component.scss","./projects/edit/eav-material-controls/adam/sanitize.helper.ts","./projects/ng-dialogs/src/app/code-editor/code-editor.component.html","./projects/ng-dialogs/src/app/code-editor/services/source.service.ts","./projects/ng-dialogs/src/app/shared/services/snack-bar-stack.service.ts","./projects/ng-dialogs/src/app/code-editor/code-editor-routing.module.ts"],"names":[],"mappings":"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","file":"code-editor-code-editor-module.js","sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { EavWindow } from '../shared/models/eav-window.model';\r\nimport { Context } from '../shared/services/context';\r\nimport { DialogService } from '../shared/services/dialog.service';\r\nimport { SharedComponentsModule } from '../shared/shared-components.module';\r\nimport { buildTranslateConfiguration, TranslateLoaderWithErrorHandling } from '../shared/translation';\r\nimport { AceEditorComponent } from './ace-editor/ace-editor.component';\r\nimport { CodeEditorRoutingModule } from './code-editor-routing.module';\r\nimport { CodeEditorComponent } from './code-editor.component';\r\nimport { CodeSnippetsComponent } from './code-snippets/code-snippets.component';\r\nimport { ObjectToArrayPipe } from './code-snippets/object-to-array.pipe';\r\nimport { CodeTemplatesComponent } from './code-templates/code-templates.component';\r\nimport { DepthPaddingPipe } from './code-templates/depth-padding.pipe';\r\nimport { SortItemsPipe } from './code-templates/order-items.pipe';\r\nimport { SnippetsService } from './services/snippets.service';\r\nimport { SourceService } from './services/source.service';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n// AoT requires an exported function for factories\r\n// at least according to https://github.com/ngx-translate/http-loader\r\nexport function translateLoaderFactoryCode(http: HttpClient) {\r\n  return new TranslateLoaderWithErrorHandling(http, './i18n/code-editor.', `.js?${window.sxcVersion}`);\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CodeEditorComponent,\r\n    CodeSnippetsComponent,\r\n    ObjectToArrayPipe,\r\n    CodeTemplatesComponent,\r\n    AceEditorComponent,\r\n    DepthPaddingPipe,\r\n    SortItemsPipe,\r\n  ],\r\n  entryComponents: [\r\n    CodeEditorComponent,\r\n    CodeSnippetsComponent,\r\n    CodeTemplatesComponent,\r\n    AceEditorComponent,\r\n  ],\r\n  imports: [\r\n    CodeEditorRoutingModule,\r\n    SharedComponentsModule,\r\n    CommonModule,\r\n    MatDialogModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatTooltipModule,\r\n    MatSnackBarModule,\r\n    FormsModule,\r\n    MatSelectModule,\r\n    MatRippleModule,\r\n    TranslateModule.forChild(buildTranslateConfiguration(translateLoaderFactoryCode)),\r\n  ],\r\n  providers: [\r\n    Context,\r\n    SourceService,\r\n    DialogService,\r\n    SnippetsService,\r\n    TranslateService,\r\n  ]\r\n})\r\nexport class CodeEditorModule { }\r\n","export default \".mat-fab {\\n  position: absolute;\\n  right: 48px;\\n  bottom: 32px;\\n  z-index: 10;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcY29kZS1lZGl0b3IuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBQUNGIiwiZmlsZSI6ImNvZGUtZWRpdG9yLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1hdC1mYWIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICByaWdodDogNDhweDtcclxuICBib3R0b206IDMycHg7XHJcbiAgei1pbmRleDogMTA7XHJcbn1cclxuIl19 */\";","import { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport cloneDeep from 'lodash-es/cloneDeep';\r\nimport { DataTypeConstants } from '../../content-type-fields/constants/data-type.constants';\r\nimport { Field } from '../../content-type-fields/models/field.model';\r\nimport { webApiFieldsAll } from '../../content-type-fields/services/content-types-fields.service';\r\nimport { Snippet } from '../models/snippet.model';\r\nimport { SourceView } from '../models/source-view.model';\r\n\r\n@Injectable()\r\nexport class SnippetsService {\r\n  private keyPrefixes = ['@', '['];\r\n  private keyPrefixIndex = (view: SourceView) => (view.Type.indexOf('Razor') > -1) ? 0 : 1;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private dnnContext: DnnContext,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  async getSnippets(view: SourceView) {\r\n    const res: any = await this.http.get('../ng-assets/snippets.json.js').toPromise();\r\n    const snippets: Snippet[] = res.snippets;\r\n    const relevant = this.filterAwayNotNeededSnippetsList(snippets, view);\r\n    const standAndInputSnips = this.extractInputTypeSnippets(relevant);\r\n    const sets = this.initSnippetsWithConfig(standAndInputSnips.standardArray, view, standAndInputSnips.inputTypeSnippets);\r\n    return { sets, list: standAndInputSnips.standardArray };\r\n  }\r\n\r\n  // scan the list for sets starting with @ or [ and filter if not needed right now\r\n  private filterAwayNotNeededSnippetsList(list: Snippet[], view: SourceView) {\r\n    const newList = [];\r\n    for (const itm of list) {\r\n      const setHasPrefix = this.keyPrefixes.indexOf(itm.set[0]);\r\n      if (setHasPrefix === -1 || (setHasPrefix === this.keyPrefixIndex(view))) {\r\n        // if necessary, remove first char\r\n        if (setHasPrefix === this.keyPrefixIndex(view)) {\r\n          itm.set = itm.set.substr(1);\r\n        }\r\n        newList.push(itm);\r\n      }\r\n    }\r\n    return newList;\r\n  }\r\n\r\n  private extractInputTypeSnippets(list: Snippet[]) {\r\n    const standardArray: Snippet[] = [];\r\n    const inputTypeArray: Snippet[] = [];\r\n\r\n    for (const itm of list) {\r\n      const systemSnippet = itm.set[0] === '\\\\';\r\n      if (!systemSnippet) {\r\n        standardArray.push(itm);\r\n      } else {\r\n        itm.set = itm.set.substr(1);\r\n        inputTypeArray.push(itm);\r\n      }\r\n    }\r\n    const inputTypeSnippets = this.catalogInputTypeSnippets(inputTypeArray);\r\n    return {\r\n      standardArray,\r\n      inputTypeSnippets,\r\n    };\r\n  }\r\n\r\n  private catalogInputTypeSnippets(list: Snippet[]) {\r\n    const inputTypeList: any = {};\r\n    for (const itm of list) {\r\n      if (inputTypeList[itm.subset] === undefined) {\r\n        inputTypeList[itm.subset] = [];\r\n      }\r\n      inputTypeList[itm.subset].push(itm);\r\n    }\r\n    return inputTypeList;\r\n  }\r\n\r\n  private initSnippetsWithConfig(sets: any, templateConfiguration: SourceView, inputTypeSnippets: any) {\r\n    sets = this.makeTree(sets);\r\n\r\n    // retrieve all relevant content-types and infos\r\n    sets.Content = Object.assign({}, sets.Content, { Fields: {}, PresentationFields: {} });\r\n    if (templateConfiguration.TypeContent) {\r\n      this.loadContentType(sets.Content.Fields, templateConfiguration.TypeContent, 'Content', templateConfiguration, inputTypeSnippets);\r\n    }\r\n    if (templateConfiguration.TypeContentPresentation) {\r\n      this.loadContentType(\r\n        sets.Content.PresentationFields, templateConfiguration.TypeContentPresentation,\r\n        'Content.Presentation', templateConfiguration, inputTypeSnippets,\r\n      );\r\n    }\r\n\r\n    if (templateConfiguration.HasList) {\r\n      sets.List = Object.assign({}, sets.List, { Fields: {}, PresentationFields: {} });\r\n      if (templateConfiguration.TypeList) {\r\n        this.loadContentType(sets.List.Fields, templateConfiguration.TypeList, 'Header', templateConfiguration, inputTypeSnippets);\r\n      }\r\n      if (templateConfiguration.TypeListPresentation) {\r\n        this.loadContentType(\r\n          sets.List.PresentationFields, templateConfiguration.TypeListPresentation,\r\n          'Header.Presentation', templateConfiguration, inputTypeSnippets,\r\n        );\r\n      }\r\n    } else {\r\n      delete sets.List;\r\n    }\r\n\r\n    // maybe App-infos\r\n    if (templateConfiguration.HasApp) {\r\n      sets.App.Resources = {};\r\n      sets.App.Settings = {};\r\n      this.loadContentType(sets.App.Resources, 'App-Resources', 'App.Resources', templateConfiguration, inputTypeSnippets);\r\n      this.loadContentType(sets.App.Settings, 'App-Settings', 'App.Settings', templateConfiguration, inputTypeSnippets);\r\n    }\r\n\r\n    return sets;\r\n  }\r\n\r\n  // Convert the list into a tree with set/subset/item\r\n  private makeTree(list: Snippet[]) {\r\n    const tree: any = {};\r\n    for (const o of list) {\r\n      if (tree[o.set] === undefined) {\r\n        tree[o.set] = {};\r\n      }\r\n      if (tree[o.set][o.subset] === undefined) {\r\n        tree[o.set][o.subset] = [];\r\n      }\r\n      const reformatted = {\r\n        key: o.name,\r\n        label: this.label(o.set, o.subset, o.name),\r\n        snip: o.content,\r\n        help: o.help || this.help(o.set, o.subset, o.name),\r\n        links: this.linksList(o.links)\r\n      };\r\n\r\n      tree[o.set][o.subset].push(reformatted);\r\n    }\r\n    return tree;\r\n  }\r\n\r\n  private label(set: any, subset: any, snip: any) {\r\n    const key = this.getHelpKey(set, subset, snip, '.Key');\r\n\r\n    let result = this.translate.instant(key);\r\n    if (result === key) {\r\n      result = snip;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private getHelpKey(set: any, subset: any, snip: any, addition: any) {\r\n    return 'SourceEditorSnippets' + '.' + set + '.' + subset + '.' + snip + addition;\r\n  }\r\n\r\n  private help(set: any, subset: any, snip: any) {\r\n    const key = this.getHelpKey(set, subset, snip, '.Help');\r\n\r\n    let result = this.translate.instant(key);\r\n    if (result === key) {\r\n      result = '';\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private linksList(linksString: any) {\r\n    if (!linksString) {\r\n      return null;\r\n    }\r\n    const links = [];\r\n    const llist = linksString.split('\\n');\r\n    for (const l of llist) {\r\n      const pair = l.split(':');\r\n      if (pair.length === 3) {\r\n        links.push({ name: pair[0].trim(), url: pair[1].trim() + ':' + pair[2].trim() });\r\n      }\r\n    }\r\n    if (links.length === 0) { return null; }\r\n    return links;\r\n  }\r\n\r\n  // get fields in content types\r\n  private loadContentType(target: any, type: any, prefix: any, templateConfiguration: SourceView, inputTypeSnippets: any) {\r\n    this.getFields(templateConfiguration.AppId, type)\r\n      .then(fields => {\r\n        // first add common items if the content-type actually exists\r\n        for (const value of fields) {\r\n          const fieldname = value.StaticName;\r\n          target[fieldname] = {\r\n            key: fieldname,\r\n            label: fieldname,\r\n            snip: this.valuePlaceholder(prefix, fieldname, templateConfiguration),\r\n            help: value.Metadata.merged.Notes || '' + ' (' + value.Type.toLowerCase() + ') '\r\n          };\r\n          // try to add generic snippets specific to this input-type\r\n          const snipDefaults = cloneDeep(target[fieldname]); // must be a copy, because target[fieldname] will grow\r\n\r\n          this.attachSnippets(target, prefix, fieldname, value.InputType, snipDefaults, inputTypeSnippets);\r\n        }\r\n\r\n        const std = ['EntityId', 'EntityTitle', 'EntityGuid', 'EntityType', 'IsPublished', 'Modified'];\r\n        if (fields.length) {\r\n          // tslint:disable-next-line:prefer-for-of\r\n          for (let i = 0; i < std.length; i++) {\r\n            target[std[i]] = {\r\n              key: std[i],\r\n              label: std[i],\r\n              snip: this.valuePlaceholder(prefix, std[i], templateConfiguration),\r\n              help: this.translate.instant('SourceEditorSnippets.StandardFields.' + std[i] + '.Help'),\r\n            };\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  private valuePlaceholder(obj: any, val: any, templateConfiguration: any) {\r\n    return (templateConfiguration.Type.indexOf('Razor') > -1)\r\n      ? '@' + obj + '.' + val\r\n      : '[' + obj.replace('.', ':') + ':' + val + ']';\r\n  }\r\n\r\n  private getFields(appId: number, staticName: string) {\r\n    return this.http.get(this.dnnContext.$2sxc.http.apiUrl(webApiFieldsAll), {\r\n      params: { appid: appId.toString(), staticName },\r\n    })\r\n      .toPromise()\r\n      .then((fields: Field[]) => {\r\n        fields = fields.filter(field => field.Type !== DataTypeConstants.Empty);\r\n        if (fields) {\r\n          for (const fld of fields) {\r\n            if (!fld.Metadata) { continue; }\r\n            const md = fld.Metadata;\r\n            const allMd = md.All;\r\n            const typeMd = md[fld.Type];\r\n            const inputMd = md[fld.InputType];\r\n            md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n          }\r\n        }\r\n        return fields;\r\n      });\r\n  }\r\n\r\n  private attachSnippets(target: any, prefix: any, fieldname: any, inputType: any, snipDefaults: any, inputTypeSnippets: any) {\r\n    let genericSnippet = inputTypeSnippets[inputType];\r\n    if (inputType.indexOf('-')) {   // if it's a sub-type, let's also get the master-type\r\n      const fieldType = inputType.substr(0, inputType.indexOf('-'));\r\n      if (fieldType) {\r\n        const typeSnips = inputTypeSnippets[fieldType];\r\n        if (typeSnips) {\r\n          genericSnippet = genericSnippet ? genericSnippet.concat(typeSnips) : typeSnips;\r\n        }\r\n      }\r\n    }\r\n    if (!genericSnippet) {\r\n      return;\r\n    }\r\n\r\n    if (target[fieldname].more === undefined) {\r\n      target[fieldname].more = [];\r\n    }\r\n    const fieldSnips = target[fieldname].more;\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let g = 0; g < genericSnippet.length; g++) {\r\n      try {\r\n        fieldSnips[fieldname + '-' + genericSnippet[g].name] = Object.assign({}, snipDefaults, {\r\n          key: fieldname + ' - ' + genericSnippet[g].name,\r\n          label: genericSnippet[g].name,\r\n          snip: this.localizeGenericSnippet(genericSnippet[g].content, prefix, fieldname),\r\n          collapse: true\r\n        });\r\n      } finally { }\r\n    }\r\n  }\r\n\r\n  private localizeGenericSnippet(snip: any, objName: any, fieldName: any) {\r\n    snip = snip.replace(/(\\$\\{[0-9]+\\:)var(\\})/gi, '$1' + objName + '$2')\r\n      .replace(/(\\$\\{[0-9]+\\:)prop(\\})/gi, '$1' + fieldName + '$2');\r\n    return snip;\r\n  }\r\n}\r\n","import { Dictionary } from '../../shared/models/dictionary.model';\r\n\r\nexport class SourceView {\r\n  AppId: number;\r\n  Code: string;\r\n  Extension: string;\r\n  FileName: string;\r\n  HasApp: boolean;\r\n  HasList: boolean;\r\n  IsSafe: boolean;\r\n  LocationScope: string;\r\n  Name: string;\r\n  Streams: Dictionary;\r\n  Type: string;\r\n  TypeContent: string;\r\n  TypeContentPresentation: string;\r\n  TypeList: string;\r\n  TypeListPresentation: string;\r\n}\r\n","import { TreeItem } from '../models/tree-item.model';\r\n\r\nexport function calculateTree(templates: string[]): TreeItem[] {\r\n  if (!templates) { return []; }\r\n\r\n  const tree: TreeItem[] = [];\r\n  for (const template of templates) {\r\n    let parent: TreeItem[] = tree;\r\n    const paths = template.split('/');\r\n    const last = paths[paths.length - 1];\r\n    let pathFromRoot = '';\r\n    for (let i = 0; i < paths.length; i++) {\r\n      const path = paths[i];\r\n      pathFromRoot += i ? `/${path}` : path;\r\n      const existing = parent.find(item => item.name === path);\r\n      if (existing) {\r\n        parent = existing.children;\r\n      } else {\r\n        const item: TreeItem = {\r\n          depth: i,\r\n          name: path,\r\n          pathFromRoot,\r\n          isFolder: path !== last,\r\n          ...(path !== last && { children: [] }),\r\n        };\r\n        parent.push(item);\r\n        parent = item.children;\r\n      }\r\n    }\r\n  }\r\n\r\n  return tree;\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({ name: 'depthPadding' })\r\nexport class DepthPaddingPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(depth: number, isFolder: boolean) {\r\n    let padding: number;\r\n    if (isFolder) {\r\n      padding = depth * 8;\r\n    } else {\r\n      padding = (depth === 0) ? 8 : (depth * 8 + 16);\r\n    }\r\n    return this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${padding}px;`);\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { Dictionary } from '../../shared/models/dictionary.model';\r\n\r\n@Pipe({ name: 'objectToArray' })\r\nexport class ObjectToArrayPipe implements PipeTransform {\r\n  transform(obj: Dictionary | Dictionary[]): Dictionary[] {\r\n\r\n    if (Array.isArray(obj)) { return obj; }\r\n\r\n    return Object.values(obj);\r\n  }\r\n}\r\n","export default \".explorer-wrapper {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n}\\n\\n.create-button-wrapper {\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n\\n.file {\\n  cursor: pointer;\\n  padding: 4px 0 4px 8px;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n          user-select: none;\\n}\\n\\n.file:hover {\\n  background-color: #2a2d2e;\\n}\\n\\n.file.active {\\n  background-color: #37373d;\\n}\\n\\n.folder-name-wrapper {\\n  display: flex;\\n  cursor: pointer;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n          user-select: none;\\n  align-items: center;\\n}\\n\\n.folder-name-wrapper .mat-icon {\\n  width: 18px;\\n  height: 18px;\\n  font-size: 18px;\\n}\\n\\n.folder-name-wrapper .folder-name {\\n  display: flex;\\n  align-items: center;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  padding: 3px 0;\\n  flex: 1 1 auto;\\n}\\n\\n.folder-name-wrapper .add-item {\\n  margin-right: 4px;\\n  display: none;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 3px;\\n}\\n\\n.folder-name-wrapper:hover {\\n  background-color: #2a2d2e;\\n}\\n\\n.folder-name-wrapper:hover .add-item {\\n  display: flex;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXGNvZGUtdGVtcGxhdGVzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsOEJBQUE7QUFDRjs7QUFFQTtFQUNFLGFBQUE7RUFDQSx5QkFBQTtBQUNGOztBQUVBO0VBQ0UsZUFBQTtFQUNBLHNCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7S0FBQSxzQkFBQTtVQUFBLGlCQUFBO0FBQ0Y7O0FBQ0U7RUFDRSx5QkFBQTtBQUNKOztBQUVFO0VBQ0UseUJBQUE7QUFBSjs7QUFJQTtFQUNFLGFBQUE7RUFDQSxlQUFBO0VBQ0EseUJBQUE7S0FBQSxzQkFBQTtVQUFBLGlCQUFBO0VBQ0EsbUJBQUE7QUFERjs7QUFHRTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtBQURKOztBQUlFO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLGNBQUE7RUFDQSxjQUFBO0FBRko7O0FBS0U7RUFDRSxpQkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsWUFBQTtBQUhKOztBQU1FO0VBQ0UseUJBQUE7QUFKSjs7QUFNSTtFQUNFLGFBQUE7QUFKTiIsImZpbGUiOiJjb2RlLXRlbXBsYXRlcy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5leHBsb3Jlci13cmFwcGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG59XHJcblxyXG4uY3JlYXRlLWJ1dHRvbi13cmFwcGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XHJcbn1cclxuXHJcbi5maWxlIHtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgcGFkZGluZzogNHB4IDAgNHB4IDhweDtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcblxyXG4gICY6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDQyLCA0NSwgNDYpO1xyXG4gIH1cclxuXHJcbiAgJi5hY3RpdmUge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDU1LCA1NSwgNjEpO1xyXG4gIH1cclxufVxyXG5cclxuLmZvbGRlci1uYW1lLXdyYXBwZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gIC5tYXQtaWNvbiB7XHJcbiAgICB3aWR0aDogMThweDtcclxuICAgIGhlaWdodDogMThweDtcclxuICAgIGZvbnQtc2l6ZTogMThweDtcclxuICB9XHJcblxyXG4gIC5mb2xkZXItbmFtZSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgcGFkZGluZzogM3B4IDA7XHJcbiAgICBmbGV4OiAxIDEgYXV0bztcclxuICB9XHJcblxyXG4gIC5hZGQtaXRlbSB7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDRweDtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbiAgfVxyXG5cclxuICAmOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYig0MiwgNDUsIDQ2KTtcclxuXHJcbiAgICAuYWRkLWl0ZW0ge1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0= */\";","// tslint:disable-next-line:max-line-length\r\nimport { ChangeDetectionStrategy, Component, ElementRef, forwardRef, Input, NgZone, OnChanges, OnDestroy, OnInit, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { loadScripts } from '../../shared/helpers/load-scripts.helper';\r\nimport { EavWindow } from '../../shared/models/eav-window.model';\r\nimport { aceOptions } from './ace-options';\r\nimport { Editor } from './ace.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n@Component({\r\n  selector: 'app-ace-editor',\r\n  template: `<div style=\"width: 100%; height: 100%;\" #editor></div>`,\r\n  styles: [':host {display: block; width: 100%; height: 100%}'],\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => AceEditorComponent),\r\n    multi: true\r\n  }],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class AceEditorComponent implements OnInit, OnChanges, OnDestroy {\r\n  @ViewChild('editor') editorRef: ElementRef;\r\n  @Input() filename: string;\r\n  @Input() snippets: any[];\r\n  /** If value changes editor will be resized */\r\n  @Input() toggleResize: boolean;\r\n\r\n  private value = '';\r\n  private editor: Editor & { $blockScrolling?: number; };\r\n\r\n  propagateChange: (_: any) => void = () => { };\r\n  propagateTouched: (_: any) => void = () => { };\r\n\r\n  constructor(private zone: NgZone) { }\r\n\r\n  ngOnInit() {\r\n    loadScripts(\r\n      [\r\n        { test: 'ace', src: 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.min.js' },\r\n        { test: null, src: 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-modelist.min.js' },\r\n        { test: null, src: 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-language_tools.min.js' },\r\n      ],\r\n      this.aceLoaded.bind(this)\r\n    );\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const filename = changes.filename?.currentValue;\r\n    const snippets = changes.snippets?.currentValue;\r\n    this.updateValues(filename, snippets);\r\n\r\n    if (!this.editor) { return; }\r\n    const resize = changes.toggleResize?.currentValue !== changes.toggleResize?.previousValue;\r\n    if (resize) {\r\n      this.zone.runOutsideAngular(() => {\r\n        // wait for Angular to update DOM to be able to get proper size of the container\r\n        setTimeout(() => { this.editor.resize(); }, 50);\r\n      });\r\n    }\r\n  }\r\n\r\n  insertSnippet(snippet: any) {\r\n    this.zone.runOutsideAngular(() => {\r\n      const snippetManager = window.ace.require('ace/snippets').snippetManager;\r\n      snippetManager.insertSnippet(this.editor, snippet);\r\n      this.editor.focus();\r\n    });\r\n  }\r\n\r\n  writeValue(value: string) {\r\n    this.value = value || '';\r\n    if (!this.editor) { return; }\r\n    this.zone.runOutsideAngular(() => {\r\n      const p = this.editor.getCursorPosition();\r\n      this.editor.setValue(this.value, -1);\r\n      this.editor.moveCursorToPosition(p);\r\n    });\r\n  }\r\n\r\n  registerOnChange(fn: (_: any) => void) {\r\n    this.propagateChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: (_: any) => void) {\r\n    this.propagateTouched = fn;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.editor.destroy();\r\n      this.editor.container.remove();\r\n      this.editor = null;\r\n    });\r\n  }\r\n\r\n  private aceLoaded() {\r\n    this.zone.runOutsideAngular(() => {\r\n      window.ace.config.set('basePath', 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11');\r\n      this.editor = window.ace.edit(this.editorRef.nativeElement, aceOptions);\r\n      this.editor.$blockScrolling = Infinity;\r\n      this.editor.session.setValue(this.value); // set value and reset undo history\r\n      this.updateValues(this.filename, this.snippets);\r\n      this.editor.on('change', this.onEditorValueChange.bind(this));\r\n      this.editor.on('blur', this.onEditorBlurred.bind(this));\r\n      this.editor.focus();\r\n    });\r\n  }\r\n\r\n  private onEditorValueChange() {\r\n    this.zone.run(() => {\r\n      this.propagateChange(this.editor.getValue());\r\n    });\r\n  }\r\n\r\n  private onEditorBlurred() {\r\n    this.zone.run(() => {\r\n      this.propagateTouched(this.editor.getValue());\r\n    });\r\n  }\r\n\r\n  private updateValues(filename: string, snippets: any[]) {\r\n    if (!this.editor) { return; }\r\n    this.zone.runOutsideAngular(() => {\r\n      if (filename) {\r\n        const modelist = window.ace.require('ace/ext/modelist');\r\n        const mode = modelist.getModeForPath(filename).mode;\r\n        this.editor.session.setMode(mode);\r\n      }\r\n      if (snippets) {\r\n        const snippetManager = window.ace.require('ace/snippets').snippetManager;\r\n        snippetManager.register(this.snippets);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","export const defaultControllerName = 'MyController.cs';\r\nexport const defaultTemplateName = '_MyFile.cshtml';\r\nexport const defaultTokenName = 'MyFile.html';\r\n","import { ChangeDetectionStrategy, Component, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, forkJoin, fromEvent, Subscription } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { SanitizeHelper } from '../../../../edit/eav-material-controls/adam/sanitize.helper';\r\nimport { defaultControllerName, defaultTemplateName } from '../shared/constants/file-names.constants';\r\nimport { keyItems } from '../shared/constants/session.constants';\r\nimport { EditItem, SourceItem, } from '../shared/models/edit-form.model';\r\nimport { Context } from '../shared/services/context';\r\nimport { DialogService } from '../shared/services/dialog.service';\r\nimport { SnackBarStackService } from '../shared/services/snack-bar-stack.service';\r\nimport { AceEditorComponent } from './ace-editor/ace-editor.component';\r\nimport { SourceView } from './models/source-view.model';\r\nimport { SnippetsService } from './services/snippets.service';\r\nimport { SourceService } from './services/source.service';\r\n\r\n@Component({\r\n  selector: 'app-code-editor',\r\n  templateUrl: './code-editor.component.html',\r\n  styleUrls: ['./code-editor.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CodeEditorComponent implements OnInit, OnDestroy {\r\n  @ViewChild(AceEditorComponent) private aceEditorRef: AceEditorComponent;\r\n\r\n  explorer = {\r\n    templates: 'templates',\r\n    snippets: 'snippets'\r\n  };\r\n  activeExplorer = this.explorer.templates;\r\n  private view$ = new BehaviorSubject<SourceView>(null);\r\n  private templates$ = new BehaviorSubject<string[]>(null);\r\n  private explorerSnipps$ = new BehaviorSubject<any>(null);\r\n  private editorSnipps$ = new BehaviorSubject<any>(null);\r\n  templateVars$ = combineLatest([this.view$, this.templates$, this.explorerSnipps$, this.editorSnipps$]).pipe(\r\n    map(([view, templates, explorerSnipps, editorSnipps]) => ({ view, templates, explorerSnipps, editorSnipps })),\r\n  );\r\n\r\n  private viewKey: number | string; // templateId or path\r\n  private savedCode: string;\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private context: Context,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n    private snackBarStack: SnackBarStackService,\r\n    private sourceService: SourceService,\r\n    private snippetsService: SnippetsService,\r\n    private zone: NgZone,\r\n    private titleService: Title,\r\n    private dialogService: DialogService,\r\n  ) {\r\n    this.context.init(this.route);\r\n    this.calculateViewKey();\r\n    this.attachListeners();\r\n  }\r\n\r\n  ngOnInit() {\r\n    const view$ = this.sourceService.get(this.viewKey);\r\n    const templates$ = this.sourceService.getTemplates();\r\n    forkJoin([view$, templates$]).subscribe(([view, templates]) => {\r\n      this.view$.next(view);\r\n      this.savedCode = this.view$.value.Code;\r\n      this.titleService.setTitle(`${this.view$.value.FileName} - Code Editor`);\r\n      this.templates$.next(templates);\r\n      this.showCodeAndEditionWarnings(view, templates);\r\n\r\n      this.snippetsService.getSnippets(this.view$.value).then(res => {\r\n        this.explorerSnipps$.next(res.sets);\r\n        this.editorSnipps$.next(res.list);\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.view$.complete();\r\n    this.templates$.complete();\r\n    this.explorerSnipps$.complete();\r\n    this.editorSnipps$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  toggleExplorer(explorer: string) {\r\n    if (this.activeExplorer === explorer) {\r\n      this.activeExplorer = null;\r\n    } else {\r\n      this.activeExplorer = explorer;\r\n    }\r\n  }\r\n\r\n  createTemplate(folder?: string) {\r\n    let question = 'File name:';\r\n    let suggestion = defaultTemplateName;\r\n    if (folder === 'api' || folder?.startsWith('api/')) {\r\n      question = 'Controller name:';\r\n      suggestion = defaultControllerName;\r\n    }\r\n    let name = prompt(question, suggestion);\r\n    if (name === null || name.length === 0) { return; }\r\n\r\n    name = SanitizeHelper.sanitizePath(name);\r\n    if (folder != null) {\r\n      name = `${folder}/${name}`;\r\n    }\r\n    this.sourceService.createTemplate(name).subscribe(res => {\r\n      this.sourceService.getTemplates().subscribe(files => {\r\n        this.templates$.next(files);\r\n      });\r\n    });\r\n  }\r\n\r\n  changeInsertSnipp(snippet: any) {\r\n    this.aceEditorRef.insertSnippet(snippet);\r\n  }\r\n\r\n  codeChanged(code: string) {\r\n    this.view$.next({ ...this.view$.value, Code: code });\r\n  }\r\n\r\n  save() {\r\n    this.snackBar.open('Saving...');\r\n    let codeToSave = this.view$.value.Code;\r\n    this.sourceService.save(this.viewKey, this.view$.value).subscribe({\r\n      next: res => {\r\n        if (!res) {\r\n          this.snackBar.open('Failed', null, { duration: 2000 });\r\n          return;\r\n        }\r\n        this.savedCode = codeToSave;\r\n        codeToSave = null;\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Failed', null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  private calculateViewKey() {\r\n    // spm TODO: Move items for code-editor to the url?\r\n    const itemsRaw = sessionStorage.getItem(keyItems);\r\n    const editItems: EditItem[] | SourceItem[] = JSON.parse(itemsRaw);\r\n    const item = editItems[0];\r\n    this.viewKey = (item as EditItem).EntityId || (item as SourceItem).Path;\r\n  }\r\n\r\n  /** Show info about editions if other files with the same name exist */\r\n  private showCodeAndEditionWarnings(view: SourceView, files: string[]) {\r\n    const pathAndName = view.FileName;\r\n    const pathSeparator = pathAndName.indexOf('/') > -1 ? pathAndName.lastIndexOf('/') + 1 : 0;\r\n    const pathWithSlash = pathSeparator === 0 ? '' : pathAndName.substring(0, pathSeparator);\r\n    const fullName = pathAndName.substring(pathSeparator);\r\n    const name = fullName.substring(0, fullName.length - view.Extension.length);\r\n    const nameCode = name + '.code' + view.Extension;\r\n    // find out if we also have a code file\r\n    const codeFile = files.find(file => file === pathWithSlash + nameCode);\r\n    const otherEditions = files.filter(file => file.endsWith(fullName)).length - 1;\r\n\r\n    if (codeFile) {\r\n      this.snackBarStack\r\n        .add(`This template also has a code-behind file '${codeFile}'.`, 'Open')\r\n        .subscribe(() => {\r\n          this.dialogService.openCodeFile(codeFile);\r\n        });\r\n    }\r\n    if (otherEditions) {\r\n      this.snackBarStack\r\n        .add(`There are ${otherEditions} other editions of this. You may be editing an edition which is not the one you see.`, 'Help')\r\n        .subscribe(() => {\r\n          window.open('https://r.2sxc.org/polymorphism', '_blank');\r\n        });\r\n    }\r\n  }\r\n\r\n  private attachListeners() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.subscription.add(\r\n        fromEvent(window, 'beforeunload').subscribe((event: BeforeUnloadEvent) => {\r\n          if (this.savedCode === this.view$.value.Code) { return; }\r\n          event.preventDefault();\r\n          event.returnValue = ''; // fix for Chrome\r\n        })\r\n      );\r\n      this.subscription.add(\r\n        fromEvent(window, 'keydown').subscribe((event: KeyboardEvent) => {\r\n          const CTRL_S = event.keyCode === 83 && (navigator.platform.match('Mac') ? event.metaKey : event.ctrlKey);\r\n          if (!CTRL_S) { return; }\r\n          event.preventDefault();\r\n          this.zone.run(() => { this.save(); });\r\n        })\r\n      );\r\n    });\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { GeneralHelpers } from '../../../../../edit/shared/helpers';\r\n\r\n@Component({\r\n  selector: 'app-code-snippets',\r\n  templateUrl: './code-snippets.component.html',\r\n  styleUrls: ['./code-snippets.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CodeSnippetsComponent implements OnInit {\r\n  @Input() snippets: any;\r\n  @Output() insertSnippet: EventEmitter<any> = new EventEmitter();\r\n  toggledSections: any[] = [];\r\n  toggledFolders: any[] = [];\r\n  toggledInfos: any[] = [];\r\n  toggledMores: any[] = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  addSnippet(snippet: string) {\r\n    this.insertSnippet.emit(snippet);\r\n  }\r\n\r\n  toggleSection(set: any) {\r\n    GeneralHelpers.toggleInArray(set, this.toggledSections);\r\n  }\r\n\r\n  toggleFolder(item: any) {\r\n    GeneralHelpers.toggleInArray(item, this.toggledFolders);\r\n  }\r\n\r\n  toggleInfo(info: any) {\r\n    GeneralHelpers.toggleInArray(info, this.toggledInfos);\r\n  }\r\n\r\n  toggleMore(more: any) {\r\n    GeneralHelpers.toggleInArray(more, this.toggledMores);\r\n  }\r\n\r\n}\r\n","import { EditorOptions } from './ace.model';\r\n\r\nexport const aceOptions: Partial<EditorOptions> & EditorPluginsOptions = {\r\n  mode: 'ace/mode/razor',\r\n  wrap: true,\r\n  useSoftTabs: true,\r\n  theme: 'ace/theme/sqlserver',\r\n  fontSize: 14,\r\n  fontFamily: 'Consolas, Courier New, monospace',\r\n  showGutter: true,\r\n  enableBasicAutocompletion: true,\r\n  enableLiveAutocompletion: true,\r\n  enableSnippets: true,\r\n};\r\n\r\ninterface EditorPluginsOptions {\r\n  enableBasicAutocompletion: boolean;\r\n  enableLiveAutocompletion: boolean;\r\n  enableSnippets: boolean;\r\n}\r\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { GeneralHelpers } from '../../../../../edit/shared/helpers';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { TreeItem } from '../models/tree-item.model';\r\nimport { calculateTree } from './code-templates.helpers';\r\n\r\n@Component({\r\n  selector: 'app-code-templates',\r\n  templateUrl: './code-templates.component.html',\r\n  styleUrls: ['./code-templates.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CodeTemplatesComponent implements OnInit, OnChanges {\r\n  @Input() view: SourceView;\r\n  @Input() templates: string[];\r\n  @Output() createTemplate: EventEmitter<string> = new EventEmitter();\r\n  tree: TreeItem[];\r\n  toggledItems: string[] = [];\r\n\r\n  constructor(private dialogService: DialogService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.templates?.currentValue) {\r\n      this.tree = calculateTree(this.templates);\r\n    }\r\n    if (changes.view?.currentValue) {\r\n      this.showFileInTree(this.view.FileName);\r\n    }\r\n  }\r\n\r\n  openTemplate(path: string) {\r\n    this.dialogService.openCodeFile(path);\r\n  }\r\n\r\n  toggleItem(path: string) {\r\n    GeneralHelpers.toggleInArray(path, this.toggledItems);\r\n  }\r\n\r\n  addFile(folder?: string) {\r\n    this.createTemplate.emit(folder);\r\n  }\r\n\r\n  private showFileInTree(file: string) {\r\n    if (file == null) { return; }\r\n    if (this.toggledItems.includes(file)) { return; }\r\n\r\n    const paths = file.split('/');\r\n    let pathFromRoot = '';\r\n    for (const path of paths) {\r\n      pathFromRoot = !pathFromRoot ? path : `${pathFromRoot}/${path}`;\r\n      if (this.toggledItems.includes(pathFromRoot)) { continue; }\r\n      this.toggleItem(pathFromRoot);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TreeItem } from '../models/tree-item.model';\r\n\r\n/** Sorts folders before files */\r\n@Pipe({ name: 'sortItems' })\r\nexport class SortItemsPipe implements PipeTransform {\r\n\r\n  transform(items: TreeItem[]) {\r\n    if (items == null) { return items; }\r\n\r\n    items.sort((item1, item2) => {\r\n      if (item1.isFolder < item2.isFolder) {\r\n        return 1;\r\n      } else if (item1.isFolder > item2.isFolder) {\r\n        return -1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n    return items;\r\n  }\r\n}\r\n","export default \"<div class=\\\"editor-active-explorer fancy-scrollbar-dark\\\">\\r\\n  <div *ngFor=\\\"let section of snippets | keyvalue\\\">\\r\\n\\r\\n    <div class=\\\"collapsible-header section\\\" [matTooltip]=\\\"'SourceEditorSnippets.' + section.key + '.Help' | translate\\\"\\r\\n      matTooltipShowDelay=\\\"750\\\" (click)=\\\"toggleSection(section)\\\">\\r\\n      <mat-icon>{{ toggledSections.includes(section) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}</mat-icon>\\r\\n      <span>{{ 'SourceEditorSnippets.' + section.key + '.Title' | translate }}</span>\\r\\n    </div>\\r\\n\\r\\n    <ng-container *ngIf=\\\"toggledSections.includes(section)\\\">\\r\\n      <div *ngFor=\\\"let folder of section.value | keyvalue\\\">\\r\\n\\r\\n        <div class=\\\"collapsible-header folder\\\"\\r\\n          [matTooltip]=\\\"'SourceEditorSnippets.' + section.key + '.' + folder.key + '.Help' | translate\\\"\\r\\n          matTooltipShowDelay=\\\"750\\\" (click)=\\\"toggleFolder(folder)\\\">\\r\\n          <mat-icon>{{ toggledFolders.includes(folder) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}</mat-icon>\\r\\n          <span>{{ 'SourceEditorSnippets.' + section.key + '.' + folder.key + '.Title' | translate }}</span>\\r\\n        </div>\\r\\n\\r\\n        <ng-container *ngIf=\\\"toggledFolders.includes(folder)\\\">\\r\\n          <div class=\\\"snippet\\\" *ngFor=\\\"let snippet of (folder.value | objectToArray)\\\">\\r\\n\\r\\n            <div class=\\\"snippet-label\\\">\\r\\n              <div matRipple class=\\\"text\\\" [matTooltip]=\\\"snippet.snip\\\" matTooltipShowDelay=\\\"750\\\"\\r\\n                (click)=\\\"addSnippet(snippet.snip)\\\">\\r\\n                {{ snippet.label }}\\r\\n              </div>\\r\\n              <mat-icon *ngIf=\\\"snippet.more\\\" matTooltip=\\\"Show More\\\" matTooltipShowDelay=\\\"750\\\"\\r\\n                (click)=\\\"toggleMore(snippet)\\\">\\r\\n                {{ toggledMores.includes(snippet) ? 'more_vert' : 'more_horiz' }}\\r\\n              </mat-icon>\\r\\n              <mat-icon matTooltip=\\\"Show Help\\\" matTooltipShowDelay=\\\"750\\\" appClickStopPropagation\\r\\n                (click)=\\\"toggleInfo(snippet)\\\">\\r\\n                info\\r\\n              </mat-icon>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"snippet-help\\\" *ngIf=\\\"toggledInfos.includes(snippet)\\\">\\r\\n              <div class=\\\"text\\\" [innerHTML]=\\\"snippet.help | safeHtml\\\"></div>\\r\\n              <div *ngFor=\\\"let link of snippet.links\\\">\\r\\n                <a [href]=\\\"link.url\\\" target=\\\"_blank\\\">{{ link.name }}</a>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <ng-container *ngIf=\\\"toggledMores.includes(snippet)\\\">\\r\\n              <div *ngFor=\\\"let more of (snippet.more | objectToArray)\\\">\\r\\n\\r\\n                <div class=\\\"snippet-label\\\">\\r\\n                  <div matRipple class=\\\"text text-more\\\" [matTooltip]=\\\"more.snip\\\" matTooltipShowDelay=\\\"750\\\"\\r\\n                    (click)=\\\"addSnippet(more.snip)\\\">\\r\\n                    {{ more.label }}\\r\\n                  </div>\\r\\n                  <mat-icon matTooltip=\\\"Show Help\\\" matTooltipShowDelay=\\\"750\\\" appClickStopPropagation\\r\\n                    (click)=\\\"toggleInfo(more)\\\">\\r\\n                    info\\r\\n                  </mat-icon>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"snippet-help snippet-help-more\\\" *ngIf=\\\"toggledInfos.includes(more)\\\">\\r\\n                  <div class=\\\"text\\\" [innerHTML]=\\\"more.help | safeHtml\\\"></div>\\r\\n                  <div *ngFor=\\\"let link of more.links\\\">\\r\\n                    <a [href]=\\\"link.url\\\" target=\\\"_blank\\\">{{ link.name }}</a>\\r\\n                  </div>\\r\\n                </div>\\r\\n\\r\\n              </div>\\r\\n            </ng-container>\\r\\n\\r\\n          </div>\\r\\n        </ng-container>\\r\\n\\r\\n      </div>\\r\\n    </ng-container>\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n\";","export default \"<div class=\\\"editor-active-explorer fancy-scrollbar-dark explorer-wrapper\\\">\\r\\n\\r\\n  <div>\\r\\n    <ng-container *ngFor=\\\"let item of (tree | sortItems)\\\">\\r\\n      <ng-container *ngTemplateOutlet=\\\"fileOrFolder; context: {item: item}\\\"></ng-container>\\r\\n    </ng-container>\\r\\n\\r\\n    <ng-template #fileOrFolder let-item=\\\"item\\\">\\r\\n\\r\\n      <div class=\\\"file\\\" *ngIf=\\\"!item.isFolder\\\" [style]=\\\"item.depth | depthPadding: item.isFolder\\\"\\r\\n        [ngClass]=\\\"{'active': toggledItems.includes(item.pathFromRoot) }\\\" matTooltipShowDelay=\\\"750\\\"\\r\\n        [matTooltip]=\\\"item.name\\\" (click)=\\\"openTemplate(item.pathFromRoot)\\\">\\r\\n        {{ item.name }}\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"item.isFolder\\\">\\r\\n        <div class=\\\"folder-name-wrapper\\\" [style]=\\\"item.depth | depthPadding: item.isFolder\\\"\\r\\n          (click)=\\\"toggleItem(item.pathFromRoot)\\\">\\r\\n          <div class=\\\"folder-name\\\" matTooltipShowDelay=\\\"750\\\" [matTooltip]=\\\"item.name\\\">\\r\\n            <mat-icon>\\r\\n              {{ toggledItems.includes(item.pathFromRoot) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\\r\\n            </mat-icon>\\r\\n            <span>{{ item.name }}</span>\\r\\n          </div>\\r\\n          <div class=\\\"add-item\\\" matTooltipShowDelay=\\\"750\\\" matTooltip=\\\"Create file in this folder\\\"\\r\\n            appClickStopPropagation (click)=\\\"addFile(item.pathFromRoot)\\\">\\r\\n            <mat-icon>add</mat-icon>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <ng-container *ngIf=\\\"toggledItems.includes(item.pathFromRoot)\\\">\\r\\n          <ng-container *ngFor=\\\"let item1 of (item.children | sortItems)\\\">\\r\\n            <ng-container *ngTemplateOutlet=\\\"fileOrFolder; context: {item: item1}\\\"></ng-container>\\r\\n          </ng-container>\\r\\n        </ng-container>\\r\\n      </div>\\r\\n\\r\\n    </ng-template>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"create-button-wrapper\\\">\\r\\n    <button mat-icon-button matTooltip=\\\"Create file\\\" (click)=\\\"addFile()\\\">\\r\\n      <mat-icon>add</mat-icon>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\";","export default \".collapsible-header {\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n          user-select: none;\\n  padding: 3px 0;\\n}\\n.collapsible-header.section {\\n  background-color: #383838;\\n  font-weight: 500;\\n}\\n.collapsible-header.folder {\\n  padding-left: 8px;\\n}\\n.collapsible-header.folder:hover {\\n  background-color: #2a2d2e;\\n}\\n.collapsible-header .mat-icon {\\n  width: 18px;\\n  height: 18px;\\n  font-size: 18px;\\n}\\n.snippet {\\n  padding-right: 8px;\\n}\\n.snippet:hover {\\n  background-color: #2a2d2e;\\n}\\n.snippet-label {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n          user-select: none;\\n}\\n.snippet-label .text {\\n  cursor: pointer;\\n  padding: 3px 0 3px 32px;\\n  flex: 1 1 auto;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n.snippet-label .text-more {\\n  padding-left: 40px;\\n}\\n.snippet-label .mat-icon {\\n  cursor: pointer;\\n  width: 18px;\\n  height: 18px;\\n  font-size: 18px;\\n}\\n.snippet-help {\\n  padding: 3px 18px 3px 32px;\\n}\\n.snippet-help-more {\\n  padding-left: 40px;\\n}\\n.snippet-help .text {\\n  font-size: 12px;\\n  font-style: oblique;\\n  word-break: break-word;\\n}\\n.snippet-help .text ::ng-deep p {\\n  margin: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXGNvZGUtc25pcHBldHMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0tBQUEsc0JBQUE7VUFBQSxpQkFBQTtFQUNBLGNBQUE7QUFDRjtBQUNFO0VBQ0UseUJBQUE7RUFDQSxnQkFBQTtBQUNKO0FBRUU7RUFDRSxpQkFBQTtBQUFKO0FBRUk7RUFDRSx5QkFBQTtBQUFOO0FBSUU7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7QUFGSjtBQU1BO0VBQ0Usa0JBQUE7QUFIRjtBQUtFO0VBQ0UseUJBQUE7QUFISjtBQU1FO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsOEJBQUE7RUFDQSx5QkFBQTtLQUFBLHNCQUFBO1VBQUEsaUJBQUE7QUFKSjtBQU1JO0VBQ0UsZUFBQTtFQUNBLHVCQUFBO0VBQ0EsY0FBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtBQUpOO0FBTU07RUFDRSxrQkFBQTtBQUpSO0FBUUk7RUFDRSxlQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0FBTk47QUFVRTtFQUNFLDBCQUFBO0FBUko7QUFVSTtFQUNFLGtCQUFBO0FBUk47QUFXSTtFQUNFLGVBQUE7RUFDQSxtQkFBQTtFQUNBLHNCQUFBO0FBVE47QUFXTTtFQUNFLFNBQUE7QUFUUiIsImZpbGUiOiJjb2RlLXNuaXBwZXRzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbGxhcHNpYmxlLWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgcGFkZGluZzogM3B4IDA7XHJcblxyXG4gICYuc2VjdGlvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNTYsIDU2LCA1Nik7XHJcbiAgICBmb250LXdlaWdodDogNTAwO1xyXG4gIH1cclxuXHJcbiAgJi5mb2xkZXIge1xyXG4gICAgcGFkZGluZy1sZWZ0OiA4cHg7XHJcblxyXG4gICAgJjpob3ZlciB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYig0MiwgNDUsIDQ2KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5tYXQtaWNvbiB7XHJcbiAgICB3aWR0aDogMThweDtcclxuICAgIGhlaWdodDogMThweDtcclxuICAgIGZvbnQtc2l6ZTogMThweDtcclxuICB9XHJcbn1cclxuXHJcbi5zbmlwcGV0IHtcclxuICBwYWRkaW5nLXJpZ2h0OiA4cHg7XHJcblxyXG4gICY6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDQyLCA0NSwgNDYpO1xyXG4gIH1cclxuXHJcbiAgJi1sYWJlbCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG5cclxuICAgIC50ZXh0IHtcclxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICBwYWRkaW5nOiAzcHggMCAzcHggMzJweDtcclxuICAgICAgZmxleDogMSAxIGF1dG87XHJcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG5cclxuICAgICAgJi1tb3JlIHtcclxuICAgICAgICBwYWRkaW5nLWxlZnQ6IDQwcHg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAubWF0LWljb24ge1xyXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgIHdpZHRoOiAxOHB4O1xyXG4gICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gICYtaGVscCB7XHJcbiAgICBwYWRkaW5nOiAzcHggMThweCAzcHggMzJweDtcclxuXHJcbiAgICAmLW1vcmUge1xyXG4gICAgICBwYWRkaW5nLWxlZnQ6IDQwcHg7XHJcbiAgICB9XHJcblxyXG4gICAgLnRleHQge1xyXG4gICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgIGZvbnQtc3R5bGU6IG9ibGlxdWU7XHJcbiAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcblxyXG4gICAgICA6Om5nLWRlZXAgcCB7XHJcbiAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ== */\";","export class SanitizeHelper {\r\n\r\n  private static removeFromStart(sanitized: string, charToRemove: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    while (sanitized.substring(0, 1) === charToRemove) {\r\n      sanitized = sanitized.substring(1);\r\n    }\r\n    return sanitized;\r\n  }\r\n\r\n  private static removeFromEnd(sanitized: string, charToRemove: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    while (sanitized.substring(sanitized.length - 1, sanitized.length) === charToRemove) {\r\n      sanitized = sanitized.substring(0, sanitized.length - 1);\r\n    }\r\n    return sanitized;\r\n  }\r\n\r\n  private static cleanBadPath(sanitized: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    const goodChar = '_';\r\n    const illegalRe = /[\\?<>\\\\:\\*\\|\":]/g;\r\n    const controlRe = /[\\x00-\\x1f\\x80-\\x9f]/g;\r\n    const reservedRe = /^\\.+$/;\r\n    const windowsReservedRe = /^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\\..*)?$/i;\r\n    const windowsTrailingRe = /[\\. ]+$/;\r\n    return sanitized\r\n      .replace(illegalRe, goodChar)\r\n      .replace(controlRe, goodChar)\r\n      .replace(reservedRe, goodChar)\r\n      .replace(windowsReservedRe, goodChar)\r\n      .replace(windowsTrailingRe, goodChar);\r\n  }\r\n\r\n  // sanitize path\r\n  static sanitizePath(sanitized: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    // remove slashes form start of path\r\n    sanitized = this.removeFromStart(sanitized, '\\/');\r\n\r\n    // remove slashed form end of path\r\n    sanitized = this.removeFromEnd(sanitized, '\\/');\r\n\r\n    // remove backslashes form start of path\r\n    sanitized = this.removeFromStart(sanitized, '\\\\');\r\n\r\n    // remove backslashes form end of path\r\n    sanitized = this.removeFromEnd(sanitized, '\\\\');\r\n\r\n    // replace bad\r\n    sanitized = this.cleanBadPath(sanitized);\r\n\r\n    return sanitized;\r\n  }\r\n\r\n  // sanitize file or folder name\r\n  static sanitizeName(sanitized: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    // in addition to all path validation rules\r\n    // slashes are not valid in file or folder name\r\n    const replacement = '_';\r\n    const illegalRe = /\\//g;\r\n    return this.sanitizePath(sanitized).replace(illegalRe, replacement);\r\n  }\r\n}\r\n","export default \"<div class=\\\"editor-root\\\" *ngIf=\\\"(templateVars$ | async) as data\\\">\\r\\n  <div class=\\\"editor-side-toolbar\\\">\\r\\n    <div class=\\\"button\\\" [ngClass]=\\\"{ 'active': activeExplorer === explorer.templates }\\\" matTooltip=\\\"Templates\\\"\\r\\n      (click)=\\\"toggleExplorer(explorer.templates)\\\">\\r\\n      <mat-icon>file_copy</mat-icon>\\r\\n    </div>\\r\\n    <div class=\\\"button\\\" [ngClass]=\\\"{ 'active': activeExplorer === explorer.snippets }\\\" matTooltip=\\\"Snippets\\\"\\r\\n      (click)=\\\"toggleExplorer(explorer.snippets)\\\">\\r\\n      <mat-icon>code</mat-icon>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <app-code-templates [hidden]=\\\"activeExplorer !== explorer.templates\\\" [view]=\\\"data.view\\\" [templates]=\\\"data.templates\\\"\\r\\n    (createTemplate)=\\\"createTemplate($event)\\\">\\r\\n  </app-code-templates>\\r\\n  <app-code-snippets [hidden]=\\\"activeExplorer !== explorer.snippets\\\" [snippets]=\\\"data.explorerSnipps\\\"\\r\\n    (insertSnippet)=\\\"changeInsertSnipp($event)\\\">\\r\\n  </app-code-snippets>\\r\\n\\r\\n  <app-ace-editor *ngIf=\\\"data.view\\\" [filename]=\\\"data.view.FileName\\\" [ngModel]=\\\"data.view.Code\\\"\\r\\n    (ngModelChange)=\\\"codeChanged($event)\\\" [snippets]=\\\"data.editorSnipps\\\" [toggleResize]=\\\"!this.activeExplorer\\\">\\r\\n  </app-ace-editor>\\r\\n\\r\\n  <button mat-fab mat-elevation-z24 matTooltip=\\\"Click to save or CTRL + S\\\" (click)=\\\"save()\\\">\\r\\n    <mat-icon>done</mat-icon>\\r\\n  </button>\\r\\n</div>\\r\\n\";","import { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs/operators';\r\nimport { webApiAppFile, webApiAppFileCreate, webApiAppFilesAll } from '../../../../../edit/shared/services';\r\nimport { keyIsShared } from '../../shared/constants/session.constants';\r\nimport { Context } from '../../shared/services/context';\r\nimport { SourceView } from '../models/source-view.model';\r\n\r\n@Injectable()\r\nexport class SourceService {\r\n  private isShared = sessionStorage.getItem(keyIsShared) ?? false.toString();\r\n\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  /** Key is templateId or path */\r\n  get(key: number | string) {\r\n    return this.http.get<SourceView>(this.dnnContext.$2sxc.http.apiUrl(webApiAppFile), {\r\n      params: { appId: this.context.appId.toString(), global: this.isShared, ...this.templateIdOrPath(key) }\r\n    }).pipe(\r\n      map(view => {\r\n        if (view.Type.toLowerCase() === 'auto') {\r\n          switch (view.Extension.toLowerCase()) {\r\n            case '.cs':\r\n            case '.cshtml':\r\n              view.Type = 'Razor';\r\n              break;\r\n            case '.html':\r\n            case '.css':\r\n            case '.js':\r\n              view.Type = 'Token';\r\n              break;\r\n          }\r\n        }\r\n        return view;\r\n      })\r\n    );\r\n  }\r\n\r\n  /** Key is templateId or path */\r\n  save(key: number | string, view: SourceView) {\r\n    return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiAppFile), view, {\r\n      params: { appId: this.context.appId.toString(), global: this.isShared, ...this.templateIdOrPath(key) },\r\n    });\r\n  }\r\n\r\n  getTemplates() {\r\n    return this.http.get<string[]>(this.dnnContext.$2sxc.http.apiUrl(webApiAppFilesAll), {\r\n      params: { appId: this.context.appId.toString(), global: this.isShared, withSubfolders: 'true' },\r\n    });\r\n  }\r\n\r\n  createTemplate(name: string) {\r\n    return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiAppFileCreate), {}, {\r\n      params: { appId: this.context.appId.toString(), global: this.isShared, purpose: 'auto', path: name },\r\n    });\r\n  }\r\n\r\n  private templateIdOrPath(key: number | string) {\r\n    if (typeof key === typeof 0) {\r\n      return { templateId: key.toString() };\r\n    } else {\r\n      return { path: key as string };\r\n    }\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { MatSnackBar, MatSnackBarConfig } from '@angular/material/snack-bar';\r\nimport { Subject } from 'rxjs';\r\n\r\n/** This service ensures that multiple SnackBars are shown one after another. */\r\n@Injectable({ providedIn: 'root' })\r\nexport class SnackBarStackService implements OnDestroy {\r\n  private defaultDuration = 3000;\r\n  private processingMessage = false;\r\n  private messageQueue: SnackBarData[] = [];\r\n\r\n  constructor(private snackBar: MatSnackBar) { }\r\n\r\n  /**\r\n   * Add a message to the stack queue.\r\n   * @returns observable that fires if the action is triggered.\r\n   * Service will complete the observable\r\n   */\r\n  add(message: string, action?: string, config: MatSnackBarConfig = { duration: this.defaultDuration }) {\r\n    const triggered$ = new Subject<void>();\r\n    this.messageQueue.push({ message, action, config, triggered$ });\r\n    if (!this.processingMessage) {\r\n      this.showSnackBar();\r\n    }\r\n    return triggered$.asObservable();\r\n  }\r\n\r\n  private showSnackBar() {\r\n    const nextMsg = this.messageQueue.shift();\r\n\r\n    if (nextMsg == null) {\r\n      this.processingMessage = false;\r\n      return;\r\n    }\r\n\r\n    this.processingMessage = true;\r\n\r\n    const snackBarRef = this.snackBar.open(nextMsg.message, nextMsg.action, nextMsg.config);\r\n    snackBarRef.afterDismissed().subscribe(() => {\r\n      nextMsg.triggered$.complete();\r\n      this.showSnackBar();\r\n    });\r\n    snackBarRef.onAction().subscribe(() => {\r\n      nextMsg.triggered$.next();\r\n    });\r\n  }\r\n\r\n  // spm TODO: ngOnDestroy only fires in services provided in component\r\n  ngOnDestroy() {\r\n    for (const message of this.messageQueue) {\r\n      message.triggered$.complete();\r\n    }\r\n    this.messageQueue = null;\r\n  }\r\n}\r\n\r\nclass SnackBarData {\r\n  message: string;\r\n  action: string;\r\n  config: MatSnackBarConfig;\r\n  triggered$: Subject<void>;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CodeEditorComponent } from './code-editor.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: CodeEditorComponent },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class CodeEditorRoutingModule { }\r\n"],"sourceRoot":"webpack:///"}