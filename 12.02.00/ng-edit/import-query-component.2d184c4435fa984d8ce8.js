(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{ntpo:function(e,t,i){"use strict";i.r(t),i.d(t,"ImportQueryComponent",function(){return R});var n=i("mrSG"),o=i("0IaG"),s=i("2Vo4"),c=i("itXk"),r=i("lJxs"),l=i("fXoL"),a=i("eues"),p=i("dNgK"),m=i("ofXK"),u=i("pXf0"),f=i("bTqV"),b=i("Qu3c"),g=i("Xa2L");function d(e,t){1&e&&l.Qb(0,"mat-spinner",12)}function h(e,t){1&e&&(l.Vb(0,"div",17),l.Mc(1," The import has been done. See the messages below for more information. "),l.Ub())}function I(e,t){1&e&&(l.Vb(0,"div",18),l.Mc(1," The import failed. See the messages below for more information. "),l.Ub())}var v=function(e,t,i){return{"sxc-message-warning":e,"sxc-message-success":t,"sxc-message-error":i}};function x(e,t){if(1&e&&(l.Vb(0,"div",19),l.Mc(1),l.Ub()),2&e){var i=t.$implicit;l.nc("ngClass",l.tc(2,v,0===i.MessageType,1===i.MessageType,2===i.MessageType)),l.Db(1),l.Oc(" ",i.Text," ")}}function y(e,t){if(1&e&&(l.Vb(0,"div",13),l.Kc(1,h,2,0,"div",14),l.Kc(2,I,2,0,"div",15),l.Kc(3,x,2,6,"div",16),l.Ub()),2&e){var i=l.hc().ngIf;l.Db(1),l.nc("ngIf",i.importResult.Success),l.Db(1),l.nc("ngIf",!i.importResult.Success),l.Db(1),l.nc("ngForOf",i.importResult.Messages)}}function D(e,t){if(1&e){var i=l.Wb();l.Tb(0),l.Vb(1,"button",20),l.dc("click",function(){return l.Ac(i),l.hc(2).closeDialog()}),l.Mc(2,"Cancel"),l.Ub(),l.Vb(3,"button",21),l.dc("click",function(){return l.Ac(i),l.hc(2).importQuery()}),l.Mc(4," Import "),l.Ub(),l.Sb()}if(2&e){var n=l.hc().ngIf;l.Db(3),l.nc("disabled",!n.importFile||n.isImporting||!!n.importResult)}}function $(e,t){if(1&e){var i=l.Wb();l.Tb(0),l.Vb(1,"button",22),l.dc("click",function(){return l.Ac(i),l.hc(2).closeDialog()}),l.Mc(2,"Close"),l.Ub(),l.Sb()}}function V(e,t){if(1&e){var i=l.Wb();l.Vb(0,"div",1),l.dc("filesDropped",function(e){return l.Ac(i),l.hc().filesDropped(e)}),l.Vb(1,"div",2),l.Vb(2,"div",3),l.Mc(3,"Import Query"),l.Ub(),l.Ub(),l.Kc(4,d,1,0,"mat-spinner",4),l.Vb(5,"p",5),l.Mc(6,"Select a query file (json) from your computer to import."),l.Ub(),l.Vb(7,"div"),l.Vb(8,"button",6),l.dc("click",function(){return l.Ac(i),l.yc(12).click()}),l.Vb(9,"span"),l.Mc(10),l.Ub(),l.Ub(),l.Vb(11,"input",7,8),l.dc("change",function(e){return l.Ac(i),l.hc().fileChange(e)}),l.Ub(),l.Ub(),l.Kc(13,y,4,3,"div",9),l.Vb(14,"div",10),l.Kc(15,D,5,1,"ng-container",11),l.Kc(16,$,3,0,"ng-container",11),l.Ub(),l.Ub()}if(2&e){var n=t.ngIf;l.nc("allowedFileTypes","json"),l.Db(4),l.nc("ngIf",n.isImporting),l.Db(4),l.nc("disabled",n.isImporting),l.Db(2),l.Nc(n.importFile?n.importFile.name:"Select or drop file"),l.Db(3),l.nc("ngIf",n.importResult),l.Db(2),l.nc("ngIf",!(null!=n.importResult&&n.importResult.Success)),l.Db(1),l.nc("ngIf",null==n.importResult?null:n.importResult.Success)}}var R=function(){function e(e,t,i,o){this.dialogData=e,this.dialogRef=t,this.pipelinesService=i,this.snackBar=o,this.hostClass="dialog-component",this.isImporting$=new s.a(!1),this.importFile$=new s.a(null),this.importResult$=new s.a(null),this.templateVars$=Object(c.a)([this.isImporting$,this.importFile$,this.importResult$]).pipe(Object(r.a)(function(e){var t=Object(n.g)(e,3);return{isImporting:t[0],importFile:t[1],importResult:t[2]}}))}return e.prototype.ngOnInit=function(){null!=this.dialogData.files&&(this.importFile$.next(this.dialogData.files[0]),this.importQuery())},e.prototype.ngOnDestroy=function(){this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.filesDropped=function(e){this.importFile$.next(e[0]),this.importResult$.next(null),this.importQuery()},e.prototype.fileChange=function(e){this.importFile$.next(e.target.files[0]),this.importResult$.next(null)},e.prototype.importQuery=function(){var e=this;this.isImporting$.next(!0),this.pipelinesService.importQuery(this.importFile$.value).subscribe({next:function(t){e.isImporting$.next(!1),e.importResult$.next({Success:!0,Messages:[]})},error:function(t){e.isImporting$.next(!1),e.importResult$.next(null),e.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})},e.\u0275fac=function(t){return new(t||e)(l.Pb(o.a),l.Pb(o.f),l.Pb(a.a),l.Pb(p.b))},e.\u0275cmp=l.Jb({type:e,selectors:[["app-import-query"]],hostVars:1,hostBindings:function(e,t){2&e&&l.Yb("className",t.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["mat-raised-button","","matTooltip","Open file browser",3,"disabled","click"],["type","file",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(l.Kc(0,V,17,7,"div",0),l.ic(1,"async")),2&e&&l.nc("ngIf",l.jc(1,1,t.templateVars$))},directives:[m.n,u.a,o.g,f.a,b.a,g.b,m.m,m.l],pipes:[m.b],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.01.01/ng-edit/import-query-component.2d184c4435fa984d8ce8.js.map