(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{BM85:function(e,t,i){"use strict";i.r(t),i.d(t,"ImportAppComponent",(function(){return $}));var n=i("D57K"),o=i("LiEJ"),s=i("3riI"),c=i("Jg5f"),r=i("1C3z"),a=i("BLjT"),p=i("ZEis"),l=i("8AiQ"),m=i("nYrE"),b=i("9HSk"),g=i("Qc/f");function u(e,t){1&e&&r.Qb(0,"mat-spinner",4)}function f(e,t){1&e&&(r.Vb(0,"span"),r.Oc(1,"Select file"),r.Ub())}function d(e,t){if(1&e&&(r.Vb(0,"span"),r.Oc(1),r.Ub()),2&e){var i=r.hc(2).ngIf;r.Bb(1),r.Pc(i.importFile.name)}}function h(e,t){if(1&e){var i=r.Wb();r.Vb(0,"div"),r.Vb(1,"p",5),r.Oc(2," Select an app package (zip) from your computer to import an app. New apps can be downloaded on "),r.Vb(3,"a",6),r.Oc(4,"http://2sxc.org/apps"),r.Ub(),r.Oc(5,". For further help visit "),r.Vb(6,"a",7),r.Oc(7,"2sxc Help"),r.Ub(),r.Oc(8,". "),r.Ub(),r.Vb(9,"div"),r.Vb(10,"button",8),r.dc("click",(function(){return r.Dc(i),r.Bc(14).click()})),r.Mc(11,f,2,0,"span",2),r.Mc(12,d,2,1,"span",2),r.Ub(),r.Vb(13,"input",9,10),r.dc("change",(function(e){return r.Dc(i),r.hc(2).fileChange(e)})),r.Ub(),r.Ub(),r.Vb(15,"div",11),r.Vb(16,"button",12),r.dc("click",(function(){return r.Dc(i),r.hc(2).closeDialog()})),r.Oc(17,"Cancel"),r.Ub(),r.Vb(18,"button",13),r.dc("click",(function(){return r.Dc(i),r.hc(2).importApp()})),r.Oc(19,"Import"),r.Ub(),r.Ub(),r.Ub()}if(2&e){var n=r.hc().ngIf;r.Bb(11),r.nc("ngIf",!n.importFile),r.Bb(1),r.nc("ngIf",n.importFile),r.Bb(6),r.nc("disabled",!n.importFile||n.isImporting)}}function v(e,t){1&e&&(r.Vb(0,"div",19),r.Oc(1," The import has been done. See the messages below for more information. "),r.Ub())}function I(e,t){1&e&&(r.Vb(0,"div",20),r.Oc(1," The import failed. See the messages below for more information. "),r.Ub())}var x=function(e,t,i){return{"sxc-message-warning":e,"sxc-message-success":t,"sxc-message-error":i}};function V(e,t){if(1&e&&(r.Vb(0,"div",21),r.Oc(1),r.Ub()),2&e){var i=t.$implicit;r.nc("ngClass",r.tc(2,x,0==i.MessageType,1==i.MessageType,2==i.MessageType)),r.Bb(1),r.Qc(" ",i.Text," ")}}function O(e,t){if(1&e){var i=r.Wb();r.Tb(0),r.Vb(1,"div",14),r.Mc(2,v,2,0,"div",15),r.Mc(3,I,2,0,"div",16),r.Mc(4,V,2,6,"div",17),r.Ub(),r.Vb(5,"div",11),r.Vb(6,"button",18),r.dc("click",(function(){return r.Dc(i),r.hc(2).closeDialog()})),r.Oc(7,"Close"),r.Ub(),r.Ub(),r.Sb()}if(2&e){var n=r.hc().ngIf;r.Bb(2),r.nc("ngIf",n.importResult.Succeeded),r.Bb(1),r.nc("ngIf",!n.importResult.Succeeded),r.Bb(1),r.nc("ngForOf",n.importResult.Messages)}}function U(e,t){if(1&e&&(r.Tb(0),r.Mc(1,u,1,0,"mat-spinner",3),r.Mc(2,h,20,3,"div",2),r.Mc(3,O,8,3,"ng-container",2),r.Sb()),2&e){var i=t.ngIf;r.Bb(1),r.nc("ngIf",i.isImporting),r.Bb(1),r.nc("ngIf",!i.importResult||i.importResult&&!i.importResult.Messages),r.Bb(1),r.nc("ngIf",i.importResult&&i.importResult.Messages&&!i.isImporting)}}var $=function(){function e(e,t){this.dialogRef=e,this.importAppService=t,this.hostClass="dialog-component",this.isImporting$=new o.a(!1),this.importFile$=new o.a(null),this.importResult$=new o.a(null),this.templateVars$=Object(s.a)([this.isImporting$,this.importFile$,this.importResult$]).pipe(Object(c.a)((function(e){var t=Object(n.f)(e,3);return{isImporting:t[0],importFile:t[1],importResult:t[2]}})))}return e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()},e.prototype.importApp=function(e){var t=this;this.isImporting$.next(!0),this.importAppService.importApp(this.importFile$.value,e).subscribe({next:function(e){var i,n,o;if(t.isImporting$.next(!1),t.importResult$.next(e),0===(null===(o=null===(n=null===(i=t.importResult$.value)||void 0===i?void 0:i.Messages)||void 0===n?void 0:n[0])||void 0===o?void 0:o.MessageType)){var s=prompt(t.importResult$.value.Messages[0].Text+" Would you like to install it using another folder name?");s&&t.importApp(s)}},error:function(e){t.isImporting$.next(!1)}})},e.prototype.fileChange=function(e){this.importFile$.next(e.target.files[0])},e.prototype.closeDialog=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(r.Pb(a.g),r.Pb(p.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-import-app"]],hostVars:1,hostBindings:function(e,t){2&e&&r.Yb("className",t.hostClass)},decls:5,vars:3,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-description"],["href","http://2sxc.org/apps"],["href","http://2sxc.org/en/help?tag=import-app","target","_blank"],["mat-raised-button","","matTooltip","Open file browser",3,"click"],["type","file",1,"hide",3,"change"],["fileInput",""],[1,"dialog-component-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"dialog-component-content","fancy-scrollbar-light"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",3,"click"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Oc(2,"Import App"),r.Ub(),r.Ub(),r.Mc(3,U,4,3,"ng-container",2),r.ic(4,"async")),2&e&&(r.Bb(3),r.nc("ngIf",r.jc(4,1,t.templateVars$)))},directives:[a.h,l.m,m.b,b.a,g.a,l.l,l.k],pipes:[l.b],styles:[""],changeDetection:0}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.06.00/ng-edit/import-app-component.461d4b2aba8b8555ca02.js.map