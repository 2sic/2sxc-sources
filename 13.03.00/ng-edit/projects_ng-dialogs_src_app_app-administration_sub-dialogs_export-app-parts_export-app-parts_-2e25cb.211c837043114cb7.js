"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_-2e25cb","projects_ng-dialogs_src_app_shared_directives_click-stop-propagation_directive_ts"],{1882:function(Z,d,_){_.r(d),_.d(d,{ExportAppPartsComponent:function(){return j}});var f=_(5106),v=_(2090),m=_(8069),x=_(8047),c=_(6317),l=_(6562),g=_(635),u=_(9670),h=_(1825),E=_(5005),M=_(1025),t=_(7133),P=_(5758),C=_(6362),T=_(4770),O=_(1434),A=_(587),D=_(1130),I=_(7317),y=_(785),U=_(5590),k=_(491),b=_(3135),S=_(1534);function B(o,s){if(1&o&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&o){var e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function W(o,s){if(1&o){var e=t.EpF();t.TgZ(0,"li",20),t.TgZ(1,"div",21),t.TgZ(2,"mat-checkbox",22),t.NdJ("ngModelChange",function(p){return t.CHM(e).$implicit._export=p}),t.TgZ(3,"span",23),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){var n=s.$implicit;t.xp6(2),t.Q6J("ngModel",n._export),t.xp6(2),t.AsE("",n.Name," (",n.Id,")")}}function J(o,s){if(1&o&&(t.TgZ(0,"ul",25),t.TgZ(1,"p",26),t._uU(2,"Templates"),t.qZA(),t.YNc(3,W,5,3,"li",19),t.qZA()),2&o){var e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngForOf",e.Templates)}}function R(o,s){if(1&o){var e=t.EpF();t.TgZ(0,"li",20),t.TgZ(1,"div",21),t.TgZ(2,"mat-checkbox",22),t.NdJ("ngModelChange",function(p){return t.CHM(e).$implicit._export=p}),t.TgZ(3,"span",23),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){var n=s.$implicit;t.xp6(2),t.Q6J("ngModel",n._export),t.xp6(2),t.AsE("",n.Title," (",n.Id,")")}}function L(o,s){if(1&o&&(t.TgZ(0,"ul",25),t.TgZ(1,"p",26),t._uU(2,"Entities"),t.qZA(),t.YNc(3,R,5,3,"li",19),t.qZA()),2&o){var e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngForOf",e.Entities)}}function K(o,s){if(1&o){var e=t.EpF();t.TgZ(0,"li",20),t.TgZ(1,"div",21),t.TgZ(2,"mat-checkbox",22),t.NdJ("ngModelChange",function(p){return t.CHM(e).$implicit._export=p}),t.TgZ(3,"span",23),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.YNc(5,J,4,1,"ul",24),t.YNc(6,L,4,1,"ul",24),t.qZA()}if(2&o){var n=s.$implicit;t.xp6(2),t.Q6J("ngModel",n._export),t.xp6(2),t.AsE("",n.Name," (",n.Id,")"),t.xp6(1),t.Q6J("ngIf",n.Templates.length>0),t.xp6(1),t.Q6J("ngIf",n.Entities.length>0)}}function $(o,s){if(1&o){var e=t.EpF();t.TgZ(0,"li",20),t.TgZ(1,"div",21),t.TgZ(2,"mat-checkbox",22),t.NdJ("ngModelChange",function(p){return t.CHM(e).$implicit._export=p}),t.TgZ(3,"span",23),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){var n=s.$implicit;t.xp6(2),t.Q6J("ngModel",n._export),t.xp6(2),t.AsE("",n.Name," (",n.Id,")")}}function N(o,s){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"ul",17),t.TgZ(2,"p",18),t._uU(3,"Content Types"),t.qZA(),t.YNc(4,K,7,5,"li",19),t.qZA(),t.TgZ(5,"ul",17),t.TgZ(6,"p",18),t._uU(7,"Templates Without Content Types"),t.qZA(),t.YNc(8,$,5,3,"li",19),t.qZA(),t.qZA()),2&o){var e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.contentInfo.ContentTypes),t.xp6(4),t.Q6J("ngForOf",e.contentInfo.TemplatesWithoutContentTypes)}}function Q(o,s){if(1&o){var e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3,"Export Content and Templates from this App"),t.qZA(),t.qZA(),t.TgZ(4,"p",3),t._uU(5," This is an advanced feature to export parts of the app. The export will create an xml file which can be imported into another site or app. To export the entire content of the app (for example when duplicating the entire site), go to the app export. For further help visit "),t.TgZ(6,"a",4),t._uU(7,"2sxc Help"),t.qZA(),t._uU(8,". "),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"mat-form-field",7),t.TgZ(12,"mat-label"),t._uU(13,"Scope"),t.qZA(),t.TgZ(14,"mat-select",8),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().changeScope(a)}),t.YNc(15,B,2,2,"mat-option",9),t.TgZ(16,"mat-option",10),t._uU(17,"Other..."),t.qZA(),t.qZA(),t.TgZ(18,"button",11),t.TgZ(19,"mat-icon",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().unlockScope()}),t._uU(20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"app-field-hint"),t._uU(22," The scope should almost never be changed - "),t.TgZ(23,"a",13),t._uU(24,"see help"),t.qZA(),t.qZA(),t.qZA(),t.YNc(25,N,9,2,"div",0),t.qZA(),t.TgZ(26,"div",14),t.TgZ(27,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDialog()}),t._uU(28," Cancel "),t.qZA(),t.TgZ(29,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportAppParts()}),t._uU(30," Export "),t.qZA(),t.qZA(),t.BQk()}if(2&o){var n=s.ngIf,i=t.oxw();t.xp6(14),t.Q6J("ngModel",i.exportScope)("disabled",i.lockScope),t.xp6(1),t.Q6J("ngForOf",i.scopeOptions),t.xp6(1),t.Q6J("value",i.dropdownInsertValue),t.xp6(2),t.Q6J("tippy",i.lockScope?"Unlock":"Lock"),t.xp6(2),t.hij(" ",i.lockScope?"lock":"lock_open"," "),t.xp6(5),t.Q6J("ngIf",i.contentInfo),t.xp6(2),t.Q6J("disabled",n.loading||n.isExporting),t.xp6(2),t.Q6J("disabled",n.loading||n.isExporting)}}var j=function(){var o=function(){function s(e,n,i){(0,m.Z)(this,s),this.dialogRef=e,this.exportAppPartsService=n,this.contentTypesService=i,this.hostClass="dialog-component",this.exportScope=h.Z.scopes.default.value,this.lockScope=!0,this.dropdownInsertValue=u.G,this.loading$=new c.X(!1),this.isExporting$=new c.X(!1),this.templateVars$=(0,l.a)([this.loading$,this.isExporting$]).pipe((0,g.U)(function(p){var a=(0,v.Z)(p,2);return{loading:a[0],isExporting:a[1]}}))}return(0,x.Z)(s,[{key:"ngOnInit",value:function(){this.fetchScopes(),this.fetchContentInfo()}},{key:"ngOnDestroy",value:function(){this.loading$.complete(),this.isExporting$.complete()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"exportAppParts",value:function(){this.isExporting$.next(!0);var n=this.selectedContentTypes().map(function(a){return a.Id}),i=this.selectedTemplates().map(function(a){return a.Id}),p=this.selectedEntities().map(function(a){return a.Id});p=p.concat(i),this.exportAppPartsService.exportParts(n,p,i),this.isExporting$.next(!1)}},{key:"changeScope",value:function(n){n!==u.G||(n=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||h.Z.scopes.default.value,this.scopeOptions.find(function(p){return p.value===n}))||this.scopeOptions.unshift({name:n,value:n}),this.exportScope=n,this.fetchContentInfo()}},{key:"unlockScope",value:function(){this.lockScope=!this.lockScope,this.lockScope&&(this.exportScope=h.Z.scopes.default.value,this.fetchContentInfo())}},{key:"fetchScopes",value:function(){var n=this;this.loading$.next(!0),this.contentTypesService.getScopes().subscribe(function(i){n.scopeOptions=i,n.loading$.next(!1)})}},{key:"fetchContentInfo",value:function(){var n=this;this.loading$.next(!0),this.exportAppPartsService.getContentInfo(this.exportScope).subscribe(function(i){n.contentInfo=i,n.loading$.next(!1)})}},{key:"selectedContentTypes",value:function(){return this.contentInfo.ContentTypes.filter(function(n){return n._export})}},{key:"selectedEntities",value:function(){var p,n=[],i=(0,f.Z)(this.contentInfo.ContentTypes);try{for(i.s();!(p=i.n()).done;)n=n.concat(p.value.Entities.filter(function(r){return r._export}))}catch(r){i.e(r)}finally{i.f()}return n}},{key:"selectedTemplates",value:function(){var p,n=[],i=(0,f.Z)(this.contentInfo.ContentTypes);try{for(i.s();!(p=i.n()).done;)n=n.concat(p.value.Templates.filter(function(r){return r._export}))}catch(r){i.e(r)}finally{i.f()}return n.concat(this.contentInfo.TemplatesWithoutContentTypes.filter(function(r){return r._export}))}}]),s}();return o.\u0275fac=function(e){return new(e||o)(t.Y36(P.so),t.Y36(M.T),t.Y36(E.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-export-app-parts"]],hostVars:1,hostBindings:function(e,n){2&e&&t.Ikx("className",n.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/en/help?tag=export","target","_blank"],[1,"dialog-component-content","fancy-scrollbar-light"],[1,"edit-input"],["appearance","standard","color","accent"],["name","Scope",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","","type","button","matSuffix","",3,"tippy"],["appClickStopPropagation","",3,"click"],["appClickStopPropagation","","href","https://2sxc.org/help?tag=scope","target","_blank"],[1,"dialog-component-actions"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"content-info__list","content-info__base"],[1,"content-info__title"],["class","content-info__item",4,"ngFor","ngForOf"],[1,"content-info__item"],[1,"option-box"],[3,"ngModel","ngModelChange"],[1,"option-box__text"],["class","content-info__list",4,"ngIf"],[1,"content-info__list"],[1,"content-info__subtitle"]],template:function(e,n){1&e&&(t.YNc(0,Q,31,9,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.templateVars$))},directives:[C.O5,P.uh,T.KE,T.hX,O.gD,A.JJ,A.On,C.sg,D.ey,I.lW,T.R9,y.$,U.Hw,k.E,b.Y,S.oG],pipes:[C.Ov],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}.content-info__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.content-info__subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.content-info__list[_ngcontent-%COMP%]{font-size:14px;list-style-type:none}.content-info__base[_ngcontent-%COMP%]{padding:0}.content-info__item[_ngcontent-%COMP%]{border-top:1px solid #DDD;padding:2px}.option-box[_ngcontent-%COMP%]{margin:8px 0}.option-box__text[_ngcontent-%COMP%]{white-space:normal;font-size:14px}"]}),o}()},491:function(Z,d,_){_.d(d,{E:function(){return x}});var f=_(8069),v=_(8047),m=_(7133),x=function(){var c=function(){function l(){(0,f.Z)(this,l)}return(0,v.Z)(l,[{key:"onClick",value:function(u){u.stopPropagation()}}]),l}();return c.\u0275fac=function(g){return new(g||c)},c.\u0275dir=m.lG2({type:c,selectors:[["","appClickStopPropagation",""]],hostBindings:function(g,u){1&g&&m.NdJ("click",function(E){return u.onClick(E)})}}),c}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.03.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_-2e25cb.211c837043114cb7.js.map