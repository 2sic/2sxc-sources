"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_metadata_metadata_module_ts","projects_ng-dialogs_src_app_permissions_permissions_module_ts","projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{8130:function(D,v,t){t.d(v,{g:function(){return m}});var p=t(8069),h=t(8047),i=t(7368),n=t(8598),P=t(7133),u=t(8784),c=t(2425),m=function(){var r=function(){function s(l,d,_){(0,p.Z)(this,s),this.http=l,this.context=d,this.dnnContext=_}return(0,h.Z)(s,[{key:"create",value:function(d,_){return this.http.post("app/auto/data/".concat(d),_,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}},{key:"update",value:function(d,_,f){return this.http.post("app/auto/data/".concat(d,"/").concat(_),f,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}},{key:"delete",value:function(d,_,f){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(i.Uo+"delete"),{params:{contentType:d,id:_.toString(),appId:this.context.appId.toString(),force:f.toString()}})}}]),s}();return r.\u0275fac=function(l){return new(l||r)(P.LFG(u.eN),P.LFG(n._),P.LFG(c._y))},r.\u0275prov=P.Yz7({token:r,factory:r.\u0275fac}),r}()},2913:function(D,v,t){t.r(v),t.d(v,{MetadataModule:function(){return y}});var p=t(8047),h=t(8069),i=t(1350),n=t(6362),P=t(587),u=t(7317),c=t(1130),m=t(5758),r=t(4770),s=t(5590),l=t(4683),d=t(1434),_=t(6623),f=t(2528),g=t(5718),R=t(8130),e=t(6307),A=t(8598),j=t(8450),B=t(2977),Z=t(8327),x=t(5487),W=t(9016),K=t.n(W),S=t(4929),F={name:"METADATA_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:function(){return(0,S.mG)(this,void 0,void 0,K().mark(function o(){return K().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Promise.all([t.e("common"),t.e("projects_ng-dialogs_src_app_metadata_metadata_component_ts")]).then(t.bind(t,969));case 2:return M.abrupt("return",M.sent.MetadataComponent);case 5:case"end":return M.stop()}},o)}))}},L=t(7133),G=[{path:"",component:x.r,data:{dialog:F},children:[{matcher:Z.eP,loadChildren:function(){return Promise.all([t.e("default-node_modules_angular_material_fesm2015_progress-spinner_mjs"),t.e("default-projects_ng-dialogs_src_app_create-file-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2015_list_mjs"),t.e("default-projects_ng-dialogs_src_app_monaco-editor_index_ts-projects_ng-dialogs_src_app_shared-7048b1"),t.e("default-projects_edit_edit_module_ts"),t.e("default-node_modules_angular_cdk_fesm2015_drag-drop_mjs"),t.e("default-node_modules_angular_material_fesm2015_autocomplete_mjs"),t.e("common"),t.e("projects_ng-dialogs_src_app_shared_components_field-hint_field-hint_component_ts-projects_ng--6652ec")]).then(t.bind(t,8985)).then(function(o){return o.EditModule})}},{matcher:Z.lZ,loadChildren:function(){return t.e("projects_edit_refresh-edit_module_ts").then(t.bind(t,3804)).then(function(o){return o.RefreshEditModule})}}]}],O=function(){var a=(0,p.Z)(function o(){(0,h.Z)(this,o)});return a.\u0275fac=function(C){return new(C||a)},a.\u0275mod=L.oAB({type:a}),a.\u0275inj=L.cJS({imports:[[B.Bz.forChild(G)],B.Bz]}),a}(),y=function(){var a=(0,p.Z)(function o(){(0,h.Z)(this,o)});return a.\u0275fac=function(C){return new(C||a)},a.\u0275mod=L.oAB({type:a}),a.\u0275inj=L.cJS({providers:[A._,e.Do,R.g],imports:[[n.ez,O,j.q,m.Is,u.ot,s.Ps,i.sF.withComponents([]),c.si,f.ZX,P.UX,r.lN,d.LD,l.c,_.rP,g.jb]]}),a}()},7297:function(D,v,t){t.d(v,{i:function(){return n}});var p=t(8069),h=t(8047),i=t(1825),n=function(){var P=function(){function u(){(0,p.Z)(this,u)}return(0,h.Z)(u,null,[{key:"getUrl",value:function(m,r,s){return"permissions/".concat(m,"/").concat(r,"/").concat(s)}},{key:"getUrlApp",value:function(m){return this.getUrl(i.Z.metadata.app.targetType,i.Z.metadata.app.keyType,m.toString())}},{key:"getUrlAttribute",value:function(m){return this.getUrl(i.Z.metadata.attribute.targetType,i.Z.metadata.attribute.keyType,m.toString())}},{key:"getUrlContentType",value:function(m){return this.getUrlEntity(m)}},{key:"getUrlEntity",value:function(m){return this.getUrl(i.Z.metadata.entity.targetType,i.Z.metadata.entity.keyType,m)}},{key:"getUrlLanguage",value:function(m){return this.getUrl(i.Z.metadata.language.targetType,i.Z.metadata.language.keyType,m)}}]),u}();return P.route={path:"permissions/:targetType/:keyType/:key",loadChildren:function(){return t.e("projects_ng-dialogs_src_app_permissions_permissions_module_ts").then(t.bind(t,4484)).then(function(c){return c.PermissionsModule})},data:{title:"Permissions"}},P}()},6307:function(D,v,t){t.d(v,{iK:function(){return p.i},Do:function(){return u.D},qQ:function(){return c.q}});var p=t(7297),u=(t(1157),t(7725),t(5620),t(4484),t(4753)),c=t(7170)},1157:function(D,v,t){t.d(v,{g:function(){return n}});var p=t(9016),h=t.n(p),i=t(4929),n={name:"SET_PERMISSIONS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:function(){return(0,i.mG)(this,void 0,void 0,h().mark(function u(){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Promise.all([t.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),t.e("default-projects_ng-dialogs_src_app_shared_constants_default-grid-options_constants_ts-node_m-d43c44"),t.e("projects_ng-dialogs_src_app_permissions_permissions_component_ts")]).then(t.bind(t,5620));case 2:return s.abrupt("return",s.sent.PermissionsComponent);case 5:case"end":return s.stop()}},u)}))}}},7725:function(D,v,t){t.d(v,{T:function(){return r}});var p=t(8047),h=t(8069),i=t(2977),n=t(8327),P=t(5487),u=t(1157),c=t(7133),m=[{path:"",component:P.r,data:{dialog:u.g},children:[{matcher:n.eP,loadChildren:function(){return Promise.all([t.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),t.e("default-projects_ng-dialogs_src_app_shared_constants_default-grid-options_constants_ts-node_m-d43c44"),t.e("default-node_modules_angular_material_fesm2015_progress-spinner_mjs"),t.e("default-projects_ng-dialogs_src_app_create-file-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2015_slide-toggle_mjs"),t.e("default-node_modules_angular_material_fesm2015_list_mjs"),t.e("default-projects_ng-dialogs_src_app_monaco-editor_index_ts-projects_ng-dialogs_src_app_shared-7048b1"),t.e("default-projects_edit_edit_module_ts"),t.e("default-node_modules_angular_cdk_fesm2015_drag-drop_mjs"),t.e("default-node_modules_angular_material_fesm2015_menu_mjs"),t.e("default-node_modules_angular_material_fesm2015_autocomplete_mjs"),t.e("common"),t.e("projects_ng-dialogs_src_app_permissions_index_ts-projects_ng-dialogs_src_app_shared_component-959d225")]).then(t.bind(t,8985)).then(function(l){return l.EditModule})}},{matcher:n.lZ,loadChildren:function(){return t.e("projects_edit_refresh-edit_module_ts").then(t.bind(t,3804)).then(function(l){return l.RefreshEditModule})}}]}],r=function(){var s=(0,p.Z)(function l(){(0,h.Z)(this,l)});return s.\u0275fac=function(d){return new(d||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[[i.Bz.forChild(m)],i.Bz]}),s}()},5620:function(D,v,t){t.r(v),t.d(v,{PermissionsComponent:function(){return G}});var p=t(2090),h=t(7797),i=t(8069),n=t(8047),P=t(1276),u=t(2977),c=t(6317),m=t(7714),r=t(116),s=t(4874),l=t(635),d=t(679),_=t(5578),f=t(9119),g=t(1825),R=t(5137),e=t(7133),A=t(1130),j=t(785),B=t(5590),Z=function(){var O=function(){function y(){(0,i.Z)(this,y)}return(0,n.Z)(y,[{key:"agInit",value:function(o){this.params=o}},{key:"refresh",value:function(o){return!0}},{key:"deletePermission",value:function(){this.params.onDelete(this.params.data)}}]),y}();return O.\u0275fac=function(a){return new(a||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(){return o.deletePermission()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA(),e.qZA(),e.qZA())},directives:[A.wG,j.$,B.Hw],styles:[""]}),O}(),x=t(7170),W=t(5758),K=t(2528),S=t(7317),F=t(1350),L=t(6362),G=function(){var O=function(){function y(a,o,C,T,U){var M=this;(0,i.Z)(this,y),this.dialogRef=a,this.router=o,this.route=C,this.permissionsService=T,this.snackBar=U,this.permissions$=new c.X(null),this.modules=P.F$,this.gridOptions=Object.assign(Object.assign({},f.f),{frameworkComponents:{idFieldComponent:_.m,permissionsActionsComponent:Z},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agNumberColumnFilter",valueGetter:function(E){return E.data.Id},cellRendererParams:{tooltipGetter:function(E){return"ID: ".concat(E.Id,"\nGUID: ").concat(E.Guid)}}},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:function(E){return M.editPermission(E.data)},valueGetter:function(E){return E.data.Title}},{field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(E){return E.data.Identity}},{field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(E){return E.data.Condition}},{field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(E){return E.data.Grant}},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:function(E){return M.deletePermission(E)}}}]}),this.subscription=new m.w0,this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills=(0,h.Z)({},g.Z.metadata.language.targetType,{PermissionType:"language"})}return(0,n.Z)(y,[{key:"ngOnInit",value:function(){this.fetchPermissions(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.permissions$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"fetchPermissions",value:function(){var o=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(C){o.permissions$.next(C)})}},{key:"editPermission",value:function(o){var T,U,M,C=this;M=null==o?{items:[Object.assign({ContentTypeName:g.Z.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:null!==(U=null===(T=Object.values(g.Z.metadata).find(function(E){return E.targetType===C.targetType}))||void 0===T?void 0:T.target)&&void 0!==U?U:this.targetType.toString(),TargetType:this.targetType},this.keyType===g.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===g.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===g.Z.keyTypes.string&&{String:this.key})},this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]})]}:{items:[{EntityId:o.Id}]};var I=(0,R.f)(M);this.router.navigate(["edit/".concat(I)],{relativeTo:this.route})}},{key:"deletePermission",value:function(o){var C=this;!confirm("Delete '".concat(o.Title,"' (").concat(o.Id,")?"))||(this.snackBar.open("Deleting..."),this.permissionsService.delete(o.Id).subscribe(function(){C.snackBar.open("Deleted",null,{duration:2e3}),C.fetchPermissions()}))}},{key:"refreshOnChildClosed",value:function(){var o=this;this.subscription.add(this.router.events.pipe((0,r.h)(function(C){return C instanceof u.m2}),(0,s.O)(!!this.route.snapshot.firstChild),(0,l.U)(function(){return!!o.route.snapshot.firstChild}),(0,d.G)(),(0,r.h)(function(C){var T=(0,p.Z)(C,2);return T[0]&&!T[1]})).subscribe(function(){o.fetchPermissions()}))}}]),y}();return O.\u0275fac=function(a){return new(a||O)(e.Y36(W.so),e.Y36(u.F0),e.Y36(u.gz),e.Y36(x.q),e.Y36(K.ux))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e._uU(4,"Permissions"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return o.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"router-outlet"),e.TgZ(9,"div",4),e._UZ(10,"ag-grid-angular",5),e.ALo(11,"async"),e._UZ(12,"div",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return o.editPermission(null)}),e.TgZ(14,"mat-icon"),e._uU(15,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(10),e.Q6J("rowData",e.lcZ(11,3,o.permissions$))("modules",o.modules)("gridOptions",o.gridOptions))},directives:[W.uh,S.lW,j.$,B.Hw,u.lC,F.N8],pipes:[L.Ov],styles:[""]}),O}()},4484:function(D,v,t){t.r(v),t.d(v,{PermissionsModule:function(){return e}});var p=t(8047),h=t(8069),i=t(1350),n=t(6362),P=t(7317),u=t(1130),c=t(5758),m=t(5590),r=t(2528),s=t(8130),l=t(8598),d=t(8450),_=t(7725),f=t(4753),g=t(7170),R=t(7133),e=function(){var A=(0,p.Z)(function j(){(0,h.Z)(this,j)});return A.\u0275fac=function(B){return new(B||A)},A.\u0275mod=R.oAB({type:A}),A.\u0275inj=R.cJS({providers:[l._,g.q,f.D,s.g],imports:[[n.ez,_.T,d.q,c.Is,P.ot,m.Ps,i.sF.withComponents([]),u.si,r.ZX]]}),A}()},4753:function(D,v,t){t.d(v,{D:function(){return m}});var p=t(8069),h=t(8047),i=t(8598),n=t(7133),P=t(8784),u=t(2425),m=function(){var r=function(){function s(l,d,_){(0,p.Z)(this,s),this.http=l,this.context=d,this.dnnContext=_}return(0,h.Z)(s,[{key:"getMetadata",value:function(d,_,f,g){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:Object.assign({appId:this.context.appId.toString(),targetType:d.toString(),keyType:_,key:f.toString()},g&&{contentType:g})})}}]),s}();return r.\u0275fac=function(l){return new(l||r)(n.LFG(P.eN),n.LFG(i._),n.LFG(u._y))},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac}),r}()},7170:function(D,v,t){t.d(v,{q:function(){return m}});var p=t(8069),h=t(8047),i=t(635),n=t(8130),P=t(1825),u=t(4753),c=t(7133),m=function(){var r=function(){function s(l,d){(0,p.Z)(this,s),this.metadataService=l,this.entitiesService=d}return(0,h.Z)(s,[{key:"getAll",value:function(d,_,f){return this.metadataService.getMetadata(d,_,f,P.Z.contentTypes.permissions).pipe((0,i.U)(function(g){return g.Items}))}},{key:"delete",value:function(d){return this.entitiesService.delete(P.Z.contentTypes.permissions,d,!1)}}]),s}();return r.\u0275fac=function(l){return new(l||r)(c.LFG(u.D),c.LFG(n.g))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r}()},5578:function(D,v,t){t.d(v,{m:function(){return l}});var p=t(8069),h=t(8047),i=t(5388),n=t(7133),P=t(2528),u=t(1130),c=t(785),m=t(6362),r=t(5590),s=function(_,f){return{"align-start":_,"align-end":f}},l=function(){var d=function(){function _(f){(0,p.Z)(this,_),this.snackBar=f}return(0,h.Z)(_,[{key:"agInit",value:function(g){this.id=g.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=g.tooltipGetter(g.data)}},{key:"refresh",value:function(g){return!0}},{key:"copy",value:function(){(0,i.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),_}();return d.\u0275fac=function(f){return new(f||d)(n.Y36(P.ux))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(f,g){1&f&&(n.TgZ(0,"div",0),n.NdJ("click",function(){return g.copy()}),n.TgZ(1,"span",1),n._uU(2),n.qZA(),n.TgZ(3,"mat-icon",2),n._uU(4,"file_copy"),n.qZA(),n.qZA()),2&f&&(n.Q6J("tippy",g.tooltip)("ngClass",n.WLB(3,s,"start"===g.align,"end"===g.align)),n.xp6(2),n.Oqu(g.id))},directives:[u.wG,c.$,m.mk,r.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),d}()},5388:function(D,v,t){function p(h){var i=document.createElement("textarea");i.value=h,i.setAttribute("readonly",""),i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);i.select(),document.execCommand("copy"),document.body.removeChild(i),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}t.d(v,{v:function(){return p}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.03.00/ng-edit/projects_ng-dialogs_src_app_metadata_metadata_module_ts.de39b42af89d9800.js.map