{"version":3,"mappings":"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","names":["i0","ctx_r5","ctx_r7","ContentTypeFieldsActionsComponent","params","this","field","data","metadataCount","Metadata","Object","keys","filter","key","length","enablePermissions","InputType","InputTypeConstants","Type","DataTypeConstants","onOpenMetadata","onRename","onOpenPermissions","onDelete","a","selectors","ctx","ctx_r2","ContentTypeFieldsInputTypeComponent","value","onChangeInputType","ContentTypeFieldsSpecialComponent","hasFormulas","HasFormulas","isEphemeral","IsEphemeral","ctx_r4","ContentTypeFieldsTitleComponent","isTitle","onSetTitle","ContentTypeFieldsTypeComponent","icon","calculateTypeIcon","ContentTypeFieldsComponent","dialogRef","route","router","contentTypesService","contentTypesFieldsService","snackBar","BehaviorSubject","AllCommunityModules","defaultGridOptions","getRowClass","rowClass","EditInfo","ReadOnly","push","join","frameworkComponents","contentTypeFieldsTitleComponent","contentTypeFieldsTypeComponent","contentTypeFieldsInputTypeComponent","contentTypeFieldsSpecialComponent","contentTypeFieldsActionsComponent","columnDefs","rowDrag","width","cellClass","cellRenderer","valueGetter","IsTitle","cellRendererParams","d","setTitle","flex","minWidth","sortable","onCellClicked","editFieldMetadata","nameCellRenderer","StaticName","headerClass","headerName","inputTypeValueGetter","changeInputType","m","c","_a","All","_b","Name","Notes","pinned","rename","delete","openPermissions","openMetadata","snapshot","paramMap","get","Subscription","fetchFields","refreshOnChildClosed","contentType$","complete","fields$","subscription","unsubscribe","close","gridApi","api","columnApi","event","setEnableCellTextSelection","setSuppressRowDrag","idArray","map","Id","reOrder","subscribe","o","movingNode","node","overNode","movingData","overData","newFields","fromIndex","indexOf","toIndex","moveInArray","next","clearFocusedCell","arr","element","splice","columnStates","getColumnState","sortApplied","some","state","sort","suppressRowDrag","filterModel","getFilterModel","fieldsFiltered","filterApplied","shouldSuppress","rowDragSuppressed","navigate","contentTypeStaticName","relativeTo","currentField","includes","isGroupOpen","f","r","substring","callback","retrieveContentType","of","getFields","forkJoin","fields","form","items","createItemDefinition","formUrl","convertFormToUrl","metadataType","EntityId","ContentTypeName","For","Target","eavConstants","TargetType","Number","Prefill","open","duration","confirm","GoToPermissions","url","GoToMetadata","add","events","pipe","NavigationEnd","startWith","firstChild","t","pairwise"],"sources":["./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-actions/content-type-fields-actions.component.html","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-actions/content-type-fields-actions.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-input-type/content-type-fields-input-type.component.html","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-input-type/content-type-fields-input-type.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-special/content-type-fields-special.component.html","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-special/content-type-fields-special.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-title/content-type-fields-title.component.html","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-title/content-type-fields-title.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-type/content-type-fields-type.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-type/content-type-fields-type.component.html","./projects/ng-dialogs/src/app/content-type-fields/content-type-fields.component.html","./projects/ng-dialogs/src/app/content-type-fields/content-type-fields.component.ts"],"sourcesContent":["<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"!field.EditInfo.ReadOnly\" tippy=\"Metadata\"\r\n    (click)=\"openMetadata()\">\r\n    <mat-icon [matBadge]=\"metadataCount\" matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadgeHidden]=\"!metadataCount\">\r\n      local_offer\r\n    </mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"field.EditInfo.ReadOnly\">\r\n    <mat-icon [matBadge]=\"metadataCount\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n      [matBadgeHidden]=\"!metadataCount\">\r\n      local_offer\r\n    </mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple tippy=\"Permissions\" *ngIf=\"!field.EditInfo.ReadOnly && enablePermissions\"\r\n    (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"field.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!field.Permissions.Count\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"field.EditInfo.ReadOnly || !enablePermissions\">\r\n    <mat-icon [matBadge]=\"field.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n      [matBadgeHidden]=\"!field.Permissions.Count\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <button mat-menu-item [disabled]=\"field.EditInfo.ReadOnly\" (click)=\"rename()\">\r\n    <mat-icon>text_fields</mat-icon>\r\n    <span>Rename</span>\r\n  </button>\r\n\r\n  <button mat-menu-item [disabled]=\"field.EditInfo.ReadOnly || field.IsTitle\" (click)=\"deleteField()\">\r\n    <mat-icon>delete</mat-icon>\r\n    <span>Delete</span>\r\n  </button>\r\n</mat-menu>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { DataTypeConstants } from '../../constants/data-type.constants';\r\nimport { InputTypeConstants } from '../../constants/input-type.constants';\r\nimport { Field } from '../../models/field.model';\r\nimport { ContentTypeFieldsActionsParams } from './content-type-fields-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-actions',\r\n  templateUrl: './content-type-fields-actions.component.html',\r\n  styleUrls: ['./content-type-fields-actions.component.scss'],\r\n})\r\nexport class ContentTypeFieldsActionsComponent implements ICellRendererAngularComp {\r\n  field: Field;\r\n  metadataCount: number;\r\n  enablePermissions: boolean;\r\n  private params: ContentTypeFieldsActionsParams;\r\n\r\n  constructor() { }\r\n\r\n  agInit(params: ContentTypeFieldsActionsParams) {\r\n    this.params = params;\r\n    this.field = this.params.data;\r\n    this.metadataCount = this.field.Metadata ? Object.keys(this.field.Metadata).filter(key => key !== 'merged').length : 0;\r\n    this.enablePermissions = this.field.InputType === InputTypeConstants.StringWysiwyg || this.field.Type === DataTypeConstants.Hyperlink;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openMetadata() {\r\n    this.params.onOpenMetadata(this.field);\r\n  }\r\n\r\n  rename() {\r\n    this.params.onRename(this.field);\r\n  }\r\n\r\n  openPermissions() {\r\n    this.params.onOpenPermissions(this.field);\r\n  }\r\n\r\n  deleteField() {\r\n    this.params.onDelete(this.field);\r\n  }\r\n}\r\n","<div matRipple class=\"input-component highlight\" *ngIf=\"!field.EditInfo.ReadOnly\" (click)=\"changeInputType()\">\r\n  <div class=\"text\">{{ value }}</div>\r\n  <div class=\"like-button\">\r\n    <mat-icon>arrow_drop_down</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"input-component disabled\" *ngIf=\"field.EditInfo.ReadOnly\">\r\n  <div class=\"text disabled\">{{ value }}</div>\r\n  <div class=\"like-button disabled\">\r\n    <mat-icon>arrow_drop_down</mat-icon>\r\n  </div>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { Field } from '../../models/field.model';\r\nimport { ContentTypeFieldsInputTypeParams } from './content-type-fields-input-type.models';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-input-type',\r\n  templateUrl: './content-type-fields-input-type.component.html',\r\n  styleUrls: ['./content-type-fields-input-type.component.scss'],\r\n})\r\nexport class ContentTypeFieldsInputTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  field: Field;\r\n\r\n  private params: ContentTypeFieldsInputTypeParams;\r\n\r\n  agInit(params: ContentTypeFieldsInputTypeParams) {\r\n    this.params = params;\r\n    this.value = params.value;\r\n    this.field = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  changeInputType(): void {\r\n    this.params.onChangeInputType(this.field);\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <mat-icon *ngIf=\"hasFormulas\" tippy=\"Has Formulas\">functions</mat-icon>\r\n  <mat-icon *ngIf=\"isEphemeral\" tippy=\"Ephemeral / Temporary, won't save\">mobiledata_off</mat-icon>\r\n</div>\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { Field } from '../../models/field.model';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-special',\r\n  templateUrl: './content-type-fields-special.component.html',\r\n  styleUrls: ['./content-type-fields-special.component.scss'],\r\n})\r\nexport class ContentTypeFieldsSpecialComponent implements ICellRendererAngularComp {\r\n  hasFormulas: boolean;\r\n  isEphemeral: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    const field: Field = params.data;\r\n    this.hasFormulas = field.HasFormulas;\r\n    this.isEphemeral = field.IsEphemeral;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"!field.EditInfo.ReadOnly\" tippy=\"Use as title field\"\r\n    (click)=\"setTitle()\">\r\n    <mat-icon *ngIf=\"isTitle\" svgIcon=\"star\"></mat-icon>\r\n    <mat-icon *ngIf=\"!isTitle\">star_outline</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"field.EditInfo.ReadOnly\">\r\n    <mat-icon *ngIf=\"isTitle\" svgIcon=\"star\"></mat-icon>\r\n    <mat-icon *ngIf=\"!isTitle\">star_outline</mat-icon>\r\n  </div>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { Field } from '../../models/field.model';\r\nimport { ContentTypeFieldsTitleParams } from './content-type-fields-title.models';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-title',\r\n  templateUrl: './content-type-fields-title.component.html',\r\n  styleUrls: ['./content-type-fields-title.component.scss'],\r\n})\r\nexport class ContentTypeFieldsTitleComponent implements ICellRendererAngularComp {\r\n  isTitle: boolean;\r\n  field: Field;\r\n\r\n  private params: ContentTypeFieldsTitleParams;\r\n\r\n  agInit(params: ContentTypeFieldsTitleParams) {\r\n    this.params = params;\r\n    this.isTitle = params.value;\r\n    this.field = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  setTitle(): void {\r\n    this.params.onSetTitle(this.field);\r\n  }\r\n}\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { calculateTypeIcon } from '../../content-type-fields.helpers';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-type',\r\n  templateUrl: './content-type-fields-type.component.html',\r\n  styleUrls: ['./content-type-fields-type.component.scss'],\r\n})\r\nexport class ContentTypeFieldsTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  icon: string;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.icon = calculateTypeIcon(this.value);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\" [tippy]=\"value\">\r\n  <mat-icon>{{ icon }}</mat-icon>\r\n</div>\r\n","<div class=\"nav-component-wrapper\">\r\n  <div mat-dialog-title>\r\n    <div class=\"dialog-title-box\">\r\n      <div>\r\n        <ng-container *ngIf=\"contentType$ | async as contentType\">\r\n          {{ contentType.Label || contentType.Name }}\r\n        </ng-container>\r\n        Fields\r\n      </div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <div class=\"grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"fields$ | async\" [modules]=\"modules\"\r\n      [gridOptions]=\"gridOptions\" (rowDragEnter)=\"onRowDragEnter($event)\" (rowDragEnd)=\"onRowDragEnd($event)\"\r\n      (rowDragMove)=\"onRowDragMove($event)\" (gridReady)=\"onGridReady($event)\" (sortChanged)=\"onSortChanged($event)\"\r\n      (filterChanged)=\"onFilterChanged($event)\" [ngClass]=\"{\r\n        'grid-sorted': sortApplied,\r\n        'grid-filtered': filterApplied\r\n      }\">\r\n    </ag-grid-angular>\r\n\r\n    <div class=\"grid-more-actions-box\"></div>\r\n\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Add fields\"\r\n      [disabled]=\"(contentType$ | async) == null || (contentType$ | async).EditInfo.ReadOnly\" (click)=\"add()\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n  </div>\r\n</div>\r\n","// tslint:disable-next-line:max-line-length\r\nimport { AllCommunityModules, ColumnApi, FilterChangedEvent, GridApi, GridOptions, GridReadyEvent, ICellRendererParams, RowClassParams, RowDragEvent, SortChangedEvent } from '@ag-grid-community/all-modules';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, forkJoin, of, Subscription } from 'rxjs';\r\nimport { filter, map, pairwise, startWith } from 'rxjs/operators';\r\nimport { ContentType } from '../app-administration/models/content-type.model';\r\nimport { ContentTypesService } from '../app-administration/services/content-types.service';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { GoToPermissions } from '../permissions/go-to-permissions';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { AddItem, EditForm, EditItem } from '../shared/models/edit-form.model';\r\nimport { ContentTypeFieldsActionsComponent } from './ag-grid-components/content-type-fields-actions/content-type-fields-actions.component';\r\nimport { ContentTypeFieldsActionsParams } from './ag-grid-components/content-type-fields-actions/content-type-fields-actions.models';\r\nimport { ContentTypeFieldsInputTypeComponent } from './ag-grid-components/content-type-fields-input-type/content-type-fields-input-type.component';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ContentTypeFieldsInputTypeParams } from './ag-grid-components/content-type-fields-input-type/content-type-fields-input-type.models';\r\nimport { ContentTypeFieldsSpecialComponent } from './ag-grid-components/content-type-fields-special/content-type-fields-special.component';\r\nimport { ContentTypeFieldsTitleComponent } from './ag-grid-components/content-type-fields-title/content-type-fields-title.component';\r\nimport { ContentTypeFieldsTitleParams } from './ag-grid-components/content-type-fields-title/content-type-fields-title.models';\r\nimport { ContentTypeFieldsTypeComponent } from './ag-grid-components/content-type-fields-type/content-type-fields-type.component';\r\nimport { InputTypeConstants } from './constants/input-type.constants';\r\nimport { Field } from './models/field.model';\r\nimport { ContentTypesFieldsService } from './services/content-types-fields.service';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields',\r\n  templateUrl: './content-type-fields.component.html',\r\n  styleUrls: ['./content-type-fields.component.scss'],\r\n})\r\nexport class ContentTypeFieldsComponent implements OnInit, OnDestroy {\r\n  contentType$ = new BehaviorSubject<ContentType>(null);\r\n  fields$ = new BehaviorSubject<Field[]>(null);\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    getRowClass(params: RowClassParams) {\r\n      const field: Field = params.data;\r\n      const rowClass: string[] = [];\r\n      if (field.EditInfo.ReadOnly) { rowClass.push('disable-row-drag'); }\r\n      if (field.InputType === InputTypeConstants.EmptyDefault) { rowClass.push('group-start-row'); }\r\n      if (field.InputType === InputTypeConstants.EmptyEnd) { rowClass.push('group-end-row'); }\r\n      return rowClass.join(' ');\r\n    },\r\n    frameworkComponents: {\r\n      contentTypeFieldsTitleComponent: ContentTypeFieldsTitleComponent,\r\n      contentTypeFieldsTypeComponent: ContentTypeFieldsTypeComponent,\r\n      contentTypeFieldsInputTypeComponent: ContentTypeFieldsInputTypeComponent,\r\n      contentTypeFieldsSpecialComponent: ContentTypeFieldsSpecialComponent,\r\n      contentTypeFieldsActionsComponent: ContentTypeFieldsActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      { rowDrag: true, width: 18, cellClass: 'no-select no-padding no-outline' },\r\n      {\r\n        field: 'Title', width: 42, cellClass: 'secondary-action no-padding no-outline',\r\n        cellRenderer: 'contentTypeFieldsTitleComponent', valueGetter: (params) => (params.data as Field).IsTitle,\r\n        cellRendererParams: {\r\n          onSetTitle: (field) => this.setTitle(field),\r\n        } as ContentTypeFieldsTitleParams,\r\n      },\r\n      {\r\n        field: 'Name', flex: 2, minWidth: 250, cellClass: 'primary-action highlight',\r\n        sortable: true, filter: 'agTextColumnFilter', onCellClicked: (params) => this.editFieldMetadata(params.data as Field),\r\n        cellRenderer: (params: ICellRendererParams) => this.nameCellRenderer(params),\r\n        valueGetter: (params) => (params.data as Field).StaticName,\r\n      },\r\n      {\r\n        field: 'Type', width: 70, headerClass: 'dense', cellClass: 'no-outline', sortable: true,\r\n        filter: 'agTextColumnFilter', cellRenderer: 'contentTypeFieldsTypeComponent',\r\n        valueGetter: (params) => (params.data as Field).Type,\r\n      },\r\n      {\r\n        headerName: 'Input', field: 'InputType', width: 160,\r\n        cellClass: (params) => (params.data as Field).EditInfo.ReadOnly ? 'no-outline no-padding' : 'secondary-action no-padding',\r\n        sortable: true, filter: 'agTextColumnFilter', cellRenderer: 'contentTypeFieldsInputTypeComponent',\r\n        valueGetter: (params) => this.inputTypeValueGetter(params.data as Field),\r\n        cellRendererParams: {\r\n          onChangeInputType: (field) => this.changeInputType(field),\r\n        } as ContentTypeFieldsInputTypeParams,\r\n      },\r\n      {\r\n        field: 'Label', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: (params) => (params.data as Field).Metadata?.All?.Name,\r\n      },\r\n      {\r\n        field: 'Special', width: 66, headerClass: 'dense', cellClass: 'no-outline', cellRenderer: 'contentTypeFieldsSpecialComponent',\r\n      },\r\n      {\r\n        field: 'Notes', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: (params) => (params.data as Field).Metadata?.All?.Notes,\r\n      },\r\n      {\r\n        width: 122, cellClass: 'secondary-action no-padding', cellRenderer: 'contentTypeFieldsActionsComponent', pinned: 'right',\r\n        cellRendererParams: {\r\n          onRename: (field) => this.rename(field),\r\n          onDelete: (field) => this.delete(field),\r\n          onOpenPermissions: (field) => this.openPermissions(field),\r\n          onOpenMetadata: (field) => this.openMetadata(field),\r\n        } as ContentTypeFieldsActionsParams,\r\n      },\r\n    ],\r\n  };\r\n\r\n  sortApplied = false;\r\n  filterApplied = false;\r\n  private gridApi: GridApi;\r\n  private columnApi: ColumnApi;\r\n  private rowDragSuppressed = false;\r\n  private contentTypeStaticName = this.route.snapshot.paramMap.get('contentTypeStaticName');\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ContentTypeFieldsComponent>,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private contentTypesService: ContentTypesService,\r\n    private contentTypesFieldsService: ContentTypesFieldsService,\r\n    private snackBar: MatSnackBar,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchFields();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.contentType$.complete();\r\n    this.fields$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  onGridReady(params: GridReadyEvent) {\r\n    this.gridApi = params.api;\r\n    this.columnApi = params.columnApi;\r\n  }\r\n\r\n  onRowDragEnter(event: RowDragEvent) {\r\n    this.gridApi.setEnableCellTextSelection(false);\r\n  }\r\n\r\n  onRowDragEnd(event: RowDragEvent) {\r\n    this.gridApi.setSuppressRowDrag(true);\r\n    const idArray = this.fields$.value.map(field => field.Id);\r\n    this.contentTypesFieldsService.reOrder(idArray, this.contentType$.value).subscribe(res => {\r\n      this.fetchFields(() => {\r\n        this.gridApi.setEnableCellTextSelection(true);\r\n        this.gridApi.setSuppressRowDrag(false);\r\n      });\r\n    });\r\n  }\r\n\r\n  onRowDragMove(event: RowDragEvent) {\r\n    const movingNode = event.node;\r\n    const overNode = event.overNode;\r\n    if (!overNode) { return; }\r\n    const rowNeedsToMove = movingNode !== overNode;\r\n    if (rowNeedsToMove) {\r\n      const movingData: Field = movingNode.data;\r\n      const overData: Field = overNode.data;\r\n      const newFields = [...this.fields$.value];\r\n      const fromIndex = newFields.indexOf(movingData);\r\n      const toIndex = newFields.indexOf(overData);\r\n      this.moveInArray(newFields, fromIndex, toIndex);\r\n      this.fields$.next(newFields);\r\n      this.gridApi.clearFocusedCell();\r\n    }\r\n  }\r\n\r\n  private moveInArray(arr: Field[], fromIndex: number, toIndex: number) {\r\n    const element = arr[fromIndex];\r\n    arr.splice(fromIndex, 1);\r\n    arr.splice(toIndex, 0, element);\r\n  }\r\n\r\n  onSortChanged(params: SortChangedEvent) {\r\n    const columnStates = this.columnApi.getColumnState();\r\n    this.sortApplied = columnStates.some(state => state.sort != null);\r\n    this.suppressRowDrag();\r\n  }\r\n\r\n  onFilterChanged(params: FilterChangedEvent) {\r\n    const filterModel = this.gridApi.getFilterModel();\r\n    const fieldsFiltered = Object.keys(filterModel);\r\n    this.filterApplied = fieldsFiltered.length > 0;\r\n    this.suppressRowDrag();\r\n  }\r\n\r\n  private suppressRowDrag() {\r\n    const shouldSuppress = this.sortApplied || this.filterApplied;\r\n    if (shouldSuppress && !this.rowDragSuppressed) {\r\n      this.rowDragSuppressed = true;\r\n      this.gridApi.setSuppressRowDrag(true);\r\n    } else if (!shouldSuppress && this.rowDragSuppressed) {\r\n      this.rowDragSuppressed = false;\r\n      this.gridApi.setSuppressRowDrag(false);\r\n    }\r\n  }\r\n\r\n  add() {\r\n    this.router.navigate([`add/${this.contentTypeStaticName}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private nameCellRenderer(params: ICellRendererParams) {\r\n    const currentField: Field = params.data;\r\n    const empties: string[] = [InputTypeConstants.EmptyDefault, InputTypeConstants.EmptyEnd];\r\n    if (empties.includes(currentField.InputType)) {\r\n      return params.value;\r\n    }\r\n\r\n    let isGroupOpen = false;\r\n    for (const field of this.fields$.value) {\r\n      if (field.InputType === InputTypeConstants.EmptyDefault) {\r\n        isGroupOpen = true;\r\n        continue;\r\n      }\r\n      if (field.InputType === InputTypeConstants.EmptyEnd) {\r\n        isGroupOpen = false;\r\n        continue;\r\n      }\r\n      if (field.StaticName === currentField.StaticName) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isGroupOpen ? `<span class=\"is-in-group\">${params.value}</span>` : params.value;\r\n  }\r\n\r\n  private inputTypeValueGetter(field: Field) {\r\n    const inputType = field.InputType.substring(field.InputType.indexOf('-') + 1);\r\n    return inputType;\r\n  }\r\n\r\n  private fetchFields(callback?: () => void) {\r\n    const contentType$ = this.contentType$.value == null\r\n      ? this.contentTypesService.retrieveContentType(this.contentTypeStaticName)\r\n      : of(this.contentType$.value);\r\n    const fields$ = this.contentTypesFieldsService.getFields(this.contentTypeStaticName);\r\n    forkJoin([contentType$, fields$]).subscribe(([contentType, fields]) => {\r\n      this.contentType$.next(contentType);\r\n      this.fields$.next(fields);\r\n      if (callback != null) { callback(); }\r\n    });\r\n  }\r\n\r\n  private editFieldMetadata(field: Field) {\r\n    const form: EditForm = {\r\n      items: [\r\n        this.createItemDefinition(field, 'All'),\r\n        this.createItemDefinition(field, field.Type),\r\n        this.createItemDefinition(field, field.InputType),\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private createItemDefinition(field: Field, metadataType: string): AddItem | EditItem {\r\n    return field.Metadata[metadataType] != null\r\n      ? { EntityId: field.Metadata[metadataType].Id } // if defined, return the entity-number to edit\r\n      : {\r\n        ContentTypeName: '@' + metadataType, // otherwise the content type for new-assignment\r\n        For: {\r\n          Target: eavConstants.metadata.attribute.target,\r\n          TargetType: eavConstants.metadata.attribute.targetType,\r\n          Number: field.Id,\r\n        },\r\n        Prefill: { Name: field.StaticName },\r\n      };\r\n  }\r\n\r\n  private setTitle(field: Field) {\r\n    this.snackBar.open('Setting title...');\r\n    this.contentTypesFieldsService.setTitle(field, this.contentType$.value).subscribe(() => {\r\n      this.snackBar.open('Title set', null, { duration: 2000 });\r\n      this.fetchFields();\r\n    });\r\n  }\r\n\r\n  private changeInputType(field: Field) {\r\n    this.router.navigate([`update/${this.contentTypeStaticName}/${field.Id}/inputType`], { relativeTo: this.route });\r\n  }\r\n\r\n  private rename(field: Field) {\r\n    this.router.navigate([`update/${this.contentTypeStaticName}/${field.Id}/name`], { relativeTo: this.route });\r\n  }\r\n\r\n  private delete(field: Field) {\r\n    if (!confirm(`Are you sure you want to delete '${field.StaticName}' (${field.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.contentTypesFieldsService.delete(field, this.contentType$.value).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchFields();\r\n    });\r\n  }\r\n\r\n  private openPermissions(field: Field) {\r\n    this.router.navigate([GoToPermissions.getUrlAttribute(field.Id)], { relativeTo: this.route });\r\n  }\r\n\r\n  private openMetadata(field: Field) {\r\n    const url = GoToMetadata.getUrlAttribute(\r\n      field.Id,\r\n      `Metadata for Field: ${field.StaticName} (${field.Id})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.fetchFields();\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"projects_ng-dialogs_src_app_content-type-fields_content-type-fields_component_ts.202a90146a85ee93.js"}