"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{5620:function(b,y,e){e.r(y),e.d(y,{PermissionsComponent:function(){return L}});var P=e(2090),T=e(7797),c=e(8069),i=e(8047),Z=e(1276),C=e(2977),A=e(6317),D=e(7714),O=e(116),I=e(4874),M=e(635),g=e(679),m=e(5578),l=e(9119),r=e(1825),E=e(5137),t=e(7133),U=e(1130),x=e(785),k=e(5590),R=function(){var d=function(){function u(){(0,c.Z)(this,u)}return(0,i.Z)(u,[{key:"agInit",value:function(n){this.params=n}},{key:"refresh",value:function(n){return!0}},{key:"deletePermission",value:function(){this.params.onDelete(this.params.data)}}]),u}();return d.\u0275fac=function(s){return new(s||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.NdJ("click",function(){return n.deletePermission()}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA(),t.qZA(),t.qZA())},directives:[U.wG,x.$,k.Hw],styles:[""]}),d}(),F=e(7170),G=e(5758),_=e(2528),B=e(7317),j=e(1350),W=e(6362),L=function(){var d=function(){function u(s,n,a,h,v){var f=this;(0,c.Z)(this,u),this.dialogRef=s,this.router=n,this.route=a,this.permissionsService=h,this.snackBar=v,this.permissions$=new A.X(null),this.modules=Z.F$,this.gridOptions=Object.assign(Object.assign({},l.f),{frameworkComponents:{idFieldComponent:m.m,permissionsActionsComponent:R},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agNumberColumnFilter",valueGetter:function(o){return o.data.Id},cellRendererParams:{tooltipGetter:function(o){return"ID: ".concat(o.Id,"\nGUID: ").concat(o.Guid)}}},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:function(o){return f.editPermission(o.data)},valueGetter:function(o){return o.data.Title}},{field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(o){return o.data.Identity}},{field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(o){return o.data.Condition}},{field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(o){return o.data.Grant}},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:function(o){return f.deletePermission(o)}}}]}),this.subscription=new D.w0,this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills=(0,T.Z)({},r.Z.metadata.language.targetType,{PermissionType:"language"})}return(0,i.Z)(u,[{key:"ngOnInit",value:function(){this.fetchPermissions(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.permissions$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"fetchPermissions",value:function(){var n=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(a){n.permissions$.next(a)})}},{key:"editPermission",value:function(n){var h,v,f,a=this;f=null==n?{items:[Object.assign({ContentTypeName:r.Z.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:null!==(v=null===(h=Object.values(r.Z.metadata).find(function(o){return o.targetType===a.targetType}))||void 0===h?void 0:h.target)&&void 0!==v?v:this.targetType.toString(),TargetType:this.targetType},this.keyType===r.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===r.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===r.Z.keyTypes.string&&{String:this.key})},this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]})]}:{items:[{EntityId:n.Id}]};var p=(0,E.f)(f);this.router.navigate(["edit/".concat(p)],{relativeTo:this.route})}},{key:"deletePermission",value:function(n){var a=this;!confirm("Delete '".concat(n.Title,"' (").concat(n.Id,")?"))||(this.snackBar.open("Deleting..."),this.permissionsService.delete(n.Id).subscribe(function(){a.snackBar.open("Deleted",null,{duration:2e3}),a.fetchPermissions()}))}},{key:"refreshOnChildClosed",value:function(){var n=this;this.subscription.add(this.router.events.pipe((0,O.h)(function(a){return a instanceof C.m2}),(0,I.O)(!!this.route.snapshot.firstChild),(0,M.U)(function(){return!!n.route.snapshot.firstChild}),(0,g.G)(),(0,O.h)(function(a){var h=(0,P.Z)(a,2);return h[0]&&!h[1]})).subscribe(function(){n.fetchPermissions()}))}}]),u}();return d.\u0275fac=function(s){return new(s||d)(t.Y36(G.so),t.Y36(C.F0),t.Y36(C.gz),t.Y36(F.q),t.Y36(_.ux))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div"),t._uU(4,"Permissions"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(8,"router-outlet"),t.TgZ(9,"div",4),t._UZ(10,"ag-grid-angular",5),t.ALo(11,"async"),t._UZ(12,"div",6),t.TgZ(13,"button",7),t.NdJ("click",function(){return n.editPermission(null)}),t.TgZ(14,"mat-icon"),t._uU(15,"add"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(10),t.Q6J("rowData",t.lcZ(11,3,n.permissions$))("modules",n.modules)("gridOptions",n.gridOptions))},directives:[G.uh,B.lW,x.$,k.Hw,C.lC,j.N8],pipes:[W.Ov],styles:[""]}),d}()},5578:function(b,y,e){e.d(y,{m:function(){return M}});var P=e(8069),T=e(8047),c=e(5388),i=e(7133),Z=e(2528),C=e(1130),A=e(785),D=e(6362),O=e(5590),I=function(m,l){return{"align-start":m,"align-end":l}},M=function(){var g=function(){function m(l){(0,P.Z)(this,m),this.snackBar=l}return(0,T.Z)(m,[{key:"agInit",value:function(r){this.id=r.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=r.tooltipGetter(r.data)}},{key:"refresh",value:function(r){return!0}},{key:"copy",value:function(){(0,c.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),m}();return g.\u0275fac=function(l){return new(l||g)(i.Y36(Z.ux))},g.\u0275cmp=i.Xpm({type:g,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(l,r){1&l&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return r.copy()}),i.TgZ(1,"span",1),i._uU(2),i.qZA(),i.TgZ(3,"mat-icon",2),i._uU(4,"file_copy"),i.qZA(),i.qZA()),2&l&&(i.Q6J("tippy",r.tooltip)("ngClass",i.WLB(3,I,"start"===r.align,"end"===r.align)),i.xp6(2),i.Oqu(r.id))},directives:[C.wG,A.$,D.mk,O.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),g}()},5388:function(b,y,e){function P(T){var c=document.createElement("textarea");c.value=T,c.setAttribute("readonly",""),c.style.position="absolute",c.style.left="-9999px",document.body.appendChild(c);var i=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);c.select(),document.execCommand("copy"),document.body.removeChild(c),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))}e.d(y,{v:function(){return P}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.03.00/ng-edit/projects_ng-dialogs_src_app_permissions_permissions_component_ts.a934e20ea1cc89e5.js.map