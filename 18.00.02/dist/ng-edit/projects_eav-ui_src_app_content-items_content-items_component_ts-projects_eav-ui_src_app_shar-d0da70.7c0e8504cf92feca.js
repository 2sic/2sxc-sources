"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_content-items_component_ts-projects_eav-ui_src_app_shar-d0da70","projects_eav-ui_src_app_app-administration_services_content-types_service_ts-projects_eav-ui_-bcb93a"],{7693:(x,T,n)=>{n.d(T,{X:()=>p,g:()=>m});var t=n(271),C=n(8873),s=n(7580),g=n(6443),l=n(4821);const p="admin/type/",f="admin/type/scopes";let m=(()=>{class d{constructor(M,O,F){this.http=M,this.context=O,this.dnnContext=F}apiUrl(M){return this.dnnContext.$2sxc.http.apiUrl(M)}retrieveContentType(M){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:M}})}retrieveContentTypes(M){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:M}})}getScopes(){return this.http.get(this.apiUrl(f),{params:{appId:this.context.appId.toString()}}).pipe((0,t.T)(M=>{const O=M.old;return Object.keys(O).map(K=>({name:O[K],value:K}))}))}getScopesV2(){return this.http.get(this.apiUrl(f),{params:{appId:this.context.appId.toString()}}).pipe((0,t.T)(M=>M.scopes))}save(M){return this.http.post(this.apiUrl("admin/type/save"),M,{params:{appid:this.context.appId.toString()}})}delete(M){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:M.StaticName}})}import(M){const O=new FormData;for(const F of M)O.append("File",F);return this.http.post(this.apiUrl("admin/type/import"),O,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(M){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:M}})}static#e=this.\u0275fac=function(O){return new(O||d)(s.KVO(g.Qq),s.KVO(C.o),s.KVO(l.ob))};static#t=this.\u0275prov=s.jDH({token:d,factory:d.\u0275fac})}return d})()},1475:(x,T,n)=>{n.d(T,{j:()=>p});var t=n(8873),C=n(8624),s=n(7580),g=n(6443),l=n(4821);let p=(()=>{class r{constructor(f,h,v){this.http=f,this.context=h,this.dnnContext=v}getContentInfo(f){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(C.Q+"Get"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),scope:f}})}exportParts(f,h,v){const _=this.dnnContext.$2sxc.http.apiUrl(C.Q+"Export")+"?appId="+this.context.appId.toString()+"&zoneId="+this.context.zoneId.toString()+"&contentTypeIdsString="+f.join(";")+"&entityIdsString="+h.join(";")+"&templateIdsString="+v.join(";");window.open(_,"_blank","")}static#e=this.\u0275fac=function(h){return new(h||r)(s.KVO(g.Qq),s.KVO(t.o),s.KVO(l.ob))};static#t=this.\u0275prov=s.jDH({token:r,factory:r.\u0275fac})}return r})()},320:(x,T,n)=>{n.d(T,{t:()=>p});var t=n(1772),C=n(8873),s=n(7580),g=n(6443),l=n(4821);let p=(()=>{class r{constructor(f,h,v){this.http=f,this.context=h,this.dnnContext=v}getAppInfo(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(t.u+"Statistics"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}exportAppUrl(){return`${this.dnnContext.$2sxc.http.apiUrl(`${t.u}Export`)}?appId=${this.context.appId}&zoneId=${this.context.zoneId}`}exportForVersionControl({includeContentGroups:f,resetAppGuid:h,withFiles:v}){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(t.u+"SaveData"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),includeContentGroups:f.toString(),resetAppGuid:h.toString(),withPortalFiles:v.toString()}})}static#e=this.\u0275fac=function(h){return new(h||r)(s.KVO(g.Qq),s.KVO(C.o),s.KVO(l.ob))};static#t=this.\u0275prov=s.jDH({token:r,factory:r.\u0275fac})}return r})()},6163:(x,T,n)=>{n.d(T,{t:()=>_});var t=n(6301),C=n(271),s=n(8764),g=n(8873),l=n(5506),p=n(9431),r=n(7580),y=n(6443);let _=(()=>{class u{constructor(d,b,M){this.http=d,this.context=b,this.globalConfigService=M,this.log=new l.B("GlobalDialogConfigService",!1),this.dialogSettings$={},this.log.a(`using context #${this.context.log.svcId}`)}getShared$(d){return this.log.a("getShared$ appId: "+d),this.dialogSettings$[d]??=this.getDialogSettings(d,"getShared$").pipe((0,t.t)({refCount:!1})),this.dialogSettings$[d]}getDialogSettings(d,b){return this.log.a("getDialogSettings",{appId:d,reqBy:b}),this.http.get("admin/dialog/settings",{params:{appId:d??this.context.appId.toString()}}).pipe((0,C.T)(M=>(M.Context.Language.List=M.Context.Language.List.filter(O=>O.IsEnabled),M)),(0,s.M)(M=>{this.globalConfigService.allowDebug(M.Context.Enable.DebugMode)}))}static#e=this.\u0275fac=function(b){return new(b||u)(r.KVO(y.Qq),r.KVO(g.o),r.KVO(p.B))};static#t=this.\u0275prov=r.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},8624:(x,T,n)=>{n.d(T,{Q:()=>p,S:()=>r});var t=n(1772),C=n(8873),s=n(7580),g=n(6443),l=n(4821);const p="admin/appParts/";let r=(()=>{class y{constructor(h,v,_){this.http=h,this.context=v,this.dnnContext=_}importAppParts(h){const v=new FormData;return v.append("File",h),this.http.post(this.dnnContext.$2sxc.http.apiUrl(p+"Import"),v,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}resetApp(h){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(t.u+"Reset"),{},{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),withPortalFiles:h.toString()}})}static#e=this.\u0275fac=function(v){return new(v||y)(s.KVO(g.Qq),s.KVO(C.o),s.KVO(l.ob))};static#t=this.\u0275prov=s.jDH({token:y,factory:y.\u0275fac})}return y})()},5445:(x,T,n)=>{n.d(T,{Cu:()=>p.Cu,JL:()=>p.JL,Mk:()=>p.Mk,ei:()=>p.ei,gs:()=>C.g,tn:()=>t.t,vN:()=>p.vN,xR:()=>p.xR,y0:()=>r.y});var t=n(6163),C=n(7693),p=(n(1475),n(320),n(8624),n(6460)),r=n(2570)},6460:(x,T,n)=>{n.d(T,{Cu:()=>d,JL:()=>b,Mk:()=>u,ei:()=>m,vN:()=>M,xR:()=>O});var t=n(4600),C=n(6647),s=n(271),g=n(693),l=n(8873),p=n(9234),r=n(7580),y=n(6443),f=n(4821);const u="admin/query/Run",m="admin/query/DebugStream",d="admin/query/Save",b="admin/query/Get",M="admin/query/DataSources";let O=(()=>{class F{constructor(A,S,$){this.http=A,this.context=S,this.dnnContext=$}getAll(A){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(p.Gg),{params:{appId:this.context.appId.toString(),contentType:A}})}importQuery(A){return(0,t.H)((0,g.n)(A)).pipe((0,C.n)(S=>this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:this.context.appId.toString(),ContentBase64:S})),(0,s.T)(S=>({Success:S,Messages:[]})))}clonePipeline(A){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:A.toString(),appId:this.context.appId.toString()}})}delete(A){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:A.toString()}})}static#e=this.\u0275fac=function(S){return new(S||F)(r.KVO(y.Qq),r.KVO(l.o),r.KVO(f.ob))};static#t=this.\u0275prov=r.jDH({token:F,factory:F.\u0275fac})}return F})()},2570:(x,T,n)=>{n.d(T,{y:()=>v});var t=n(8873),C=n(7580),s=n(6443),g=n(4821);const l="admin/view/",p=l+"all",r=l+"delete",y=l+"import",f=l+"polymorphism",h=l+"usage";let v=(()=>{class _{constructor(m,d,b){this.http=m,this.context=d,this.dnnContext=b}getAll(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(p),{params:{appId:this.context.appId.toString()}})}delete(m){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(r),{params:{appId:this.context.appId.toString(),Id:m.toString()}})}import(m){const d=new FormData;return d.append("File",m),this.http.post(this.dnnContext.$2sxc.http.apiUrl(y),d,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}export(m){const d=this.dnnContext.$2sxc.http.apiUrl(l+"json")+"?appId="+this.context.appId+"&viewId="+m;window.open(d,"_blank","")}getPolymorphism(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(f),{params:{appId:this.context.appId.toString()}})}getUsage(m){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(h),{params:{appId:this.context.appId.toString(),guid:m}})}static#e=this.\u0275fac=function(d){return new(d||_)(C.KVO(s.Qq),C.KVO(t.o),C.KVO(g.ob))};static#t=this.\u0275prov=C.jDH({token:_,factory:_.\u0275fac})}return _})()},7730:(x,T,n)=>{n.r(T),n.d(T,{ContentItemsComponent:()=>Te});var t=n(7580),C=n(7941),s=n(2159),g=n(4205),l=n(5797),p=n(9999),r=n(271),y=n(1567),f=n(4334),h=n(7693),v=n(6360),_=n(1726),u=n(3454),m=n(1960),d=n(4456),b=n(3804),M=n(5944),O=n(7984);const F=["valueInput"];let K=(()=>{class i{constructor(){this.filter="",this.idFilterString="",this.idFilter=[]}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.filter||this.idFilter.length>0}doesFilterPass(e){if(""!==this.filter){const a=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:c=>e.node.data[c],node:e.node});if(null==a||!a.some(c=>!!c&&c.includes(this.filter)))return!1}if(this.idFilter.length>0){const o=e.data[this.filterParams.colDef.headerName];if(null==o||!this.idFilter.some(a=>o.some(c=>c.Id===a)))return!1}return!0}getModel(){return this.isFilterActive()?{filterType:"entity",filter:this.filter,idFilter:this.idFilter}:void 0}setModel(e){this.filter=e?.filter??"",this.idFilter=e?.idFilter??[],this.idFilterString=e?.idFilter?.join(",")??""}afterGuiAttached(e){this.valueInputRef.nativeElement.focus()}updateIdFilter(){this.idFilter=this.idFilterString.split(",").map(e=>parseInt(e,10)).filter(e=>!isNaN(e))}filterChanged(){this.filterParams.filterChangedCallback()}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=t.VBU({type:i,selectors:[["app-entity-filter"]],viewQuery:function(o,a){if(1&o&&t.GBs(F,5),2&o){let c;t.mGM(c=t.lsd())&&(a.valueInputRef=c.first)}},standalone:!0,features:[t.aNF],decls:9,vars:2,consts:[["valueInput",""],["color","accent",1,"eav-mat-form-field"],["matInput","","type","text",3,"ngModelChange","ngModel"]],template:function(o,a){if(1&o){const c=t.RV6();t.j41(0,"mat-form-field",1)(1,"mat-label"),t.EFF(2,"Value"),t.k0s(),t.j41(3,"input",2,0),t.mxI("ngModelChange",function(D){return t.eBV(c),t.DH7(a.filter,D)||(a.filter=D),t.Njj(D)}),t.bIt("ngModelChange",function(){return t.eBV(c),t.Njj(a.filterChanged())}),t.k0s()(),t.j41(5,"mat-form-field",1)(6,"mat-label"),t.EFF(7,"IDs (comma separated)"),t.k0s(),t.j41(8,"input",2),t.mxI("ngModelChange",function(D){return t.eBV(c),t.DH7(a.idFilterString,D)||(a.idFilterString=D),t.Njj(D)}),t.bIt("ngModelChange",function(){return t.eBV(c),a.updateIdFilter(),t.Njj(a.filterChanged())}),t.k0s()()}2&o&&(t.R7$(3),t.R50("ngModel",a.filter),t.R7$(5),t.R50("ngModel",a.idFilterString))},dependencies:[d.YN,d.me,d.BC,d.vS,b.Wk,M.RG,M.rl,M.nJ,O.fS,O.fg],styles:["[_nghost-%COMP%]{display:block;padding:16px 12px 2px}.mat-mdc-form-field[_ngcontent-%COMP%]{display:block;width:175px}"]})}return i})();var A=n(251),S=n(8172),$=n(3216),W=n(334),G=n(1034),j=n(3840),k=n(5060);function ot(i,E){if(1&i){const e=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.do("delete"))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Delete"),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("disabled",e.item._EditInfo.DisableDelete)}}let it=(()=>{class i{agInit(e){this.params=e,this.item=e.data}refresh(e){return!0}do(e){this.params.do(e,this.item)}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=t.VBU({type:i,selectors:[["app-content-items-actions"]],standalone:!0,features:[t.aNF],decls:13,vars:1,consts:[["menu","matMenu"],[1,"actions-component"],["matRipple","","tippy","Copy",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","Export",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["matMenuContent",""],["mat-menu-item","",3,"click","disabled"]],template:function(o,a){if(1&o){const c=t.RV6();t.j41(0,"div",1)(1,"div",2),t.bIt("click",function(){return t.eBV(c),t.Njj(a.do("clone"))}),t.j41(2,"mat-icon"),t.EFF(3,"file_copy"),t.k0s()(),t.j41(4,"div",3),t.bIt("click",function(){return t.eBV(c),t.Njj(a.do("export"))}),t.j41(5,"mat-icon"),t.EFF(6,"cloud_download"),t.k0s()(),t.j41(7,"div",4)(8,"mat-icon"),t.EFF(9,"more_horiz"),t.k0s()()(),t.j41(10,"mat-menu",5,0),t.DNE(12,ot,5,1,"ng-template",6),t.k0s()}if(2&o){const c=t.sdS(11);t.R7$(7),t.Y8G("matMenuTriggerFor",c)}},dependencies:[k.pZ,k.r6,j.m_,j.An,G.Cn,G.kk,G.fb,G.z8,G.Cp]})}return i})();var N=n(7896);function at(i,E){if(1&i&&(t.j41(0,"span",1),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.JRh(e.entities)}}let st=(()=>{class i{agInit(e){Array.isArray(e.value)&&(this.encodedValue=this.htmlEncode(e.value.join(", ")),e.colDef.allowMultiValue&&(this.entities=e.value.length))}refresh(e){return!0}htmlEncode(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=t.VBU({type:i,selectors:[["app-content-items-entity"]],standalone:!0,features:[t.aNF],decls:3,vars:3,consts:[[3,"tippy"],[1,"more-entities"]],template:function(o,a){1&o&&(t.j41(0,"div",0),t.DNE(1,at,2,1,"span",1),t.EFF(2),t.k0s()),2&o&&(t.Y8G("tippy",a.encodedValue),t.R7$(),t.vxM(1,a.entities?1:-1),t.R7$(),t.SpI(" ",a.encodedValue,"\n"))},dependencies:[N.e],styles:[".more-entities[_ngcontent-%COMP%]{padding:0 8px;border-radius:10px;border:1px solid rgba(29,39,61,.44);-webkit-user-select:none;user-select:none}"]})}return i})();var z=n(6256),L=n(316);const rt=i=>({"hide-until-row-hover":i});function lt(i,E){if(1&i){const e=t.RV6();t.j41(0,"div",4),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.openMetadata())}),t.j41(1,"mat-icon",5),t.EFF(2),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("ngClass",t.eq3(5,rt,!e.metadataCount&&!e.value.metadata))("tippy",e.metadataTooltip),t.R7$(),t.Y8G("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.R7$(),t.SpI("",e.value.metadata?"loyalty":"local_offer"," ")}}function dt(i,E){if(1&i&&(t.j41(0,"div",3)(1,"mat-icon",6),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(),t.Y8G("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.R7$(),t.SpI("",e.value.metadata?"loyalty":"local_offer"," ")}}let ct=(()=>{class i{agInit(e){this.value=e.value,this.params=e,this.item=e.data,this.disableMetadata=this.item._EditInfo.DisableMetadata,this.metadataCount=this.item.Metadata?.length??0;const o=this.item.For;this.metadataTooltip=o?`This item is metadata for:\nTarget: ${o.Target}\nTargetType: ${o.TargetType}`+(o.KeyNumber?`\nNumber: ${o.KeyNumber}`:"")+(o.KeyString?`\nString: ${o.KeyString}`:"")+(o.KeyGuid?`\nGuid: ${o.KeyGuid}`:"")+(o.Title?`\nTitle: ${o.Title}`:""):"This item is not metadata.",this.metadataTooltip+=`\n\nThis item has ${this.metadataCount>0?this.metadataCount:"no"} other metadata ${1===this.metadataCount?"item":"items"} attached to it.`}refresh(e){return!0}openMetadata(){this.params.onOpenMetadata(this.item)}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=t.VBU({type:i,selectors:[["app-content-items-status"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[[1,"actions-component"],[1,"eav-grid-action-button","icon",3,"tippy"],["matRipple","",1,"eav-grid-action-button","highlight",3,"ngClass","tippy"],[1,"eav-grid-action-button","disabled"],["matRipple","",1,"eav-grid-action-button","highlight",3,"click","ngClass","tippy"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"mat-icon"),t.EFF(3),t.k0s()(),t.DNE(4,lt,3,7,"div",2)(5,dt,3,3,"div",3),t.k0s()),2&o&&(t.R7$(),t.Y8G("tippy",a.value.published?"Published":"Not published"),t.R7$(2),t.JRh(a.value.published?"visibility":"visibility_off"),t.R7$(),t.vxM(4,a.disableMetadata?-1:4),t.R7$(),t.vxM(5,a.disableMetadata&&(a.metadataCount||a.value.metadata)?5:-1))},dependencies:[j.m_,j.An,k.pZ,k.r6,L.YU,z.Y,z.k,N.e],styles:[".hide-until-row-hover[_ngcontent-%COMP%]{visibility:hidden}  .ag-row-hover .hide-until-row-hover{visibility:visible}"]})}return i})();var pt=n(4038),Q=n(8827),w=n(3037),V=n(1817),mt=n(3617),ht=n(5445),_t=n(3176),J=n(5858),P=n(52),gt=n(8873),Z=n(336),ft=n(9417);function Ct(i){return E=>{if(!E.value)return null;const e=i.controls.keyType.value,o=E.value.toString();switch(e){case P.YX.keyTypes.number:return/^[0-9]+$/.test(o)?null:{patternWholeNumber:!0};case P.YX.keyTypes.guid:const c=["{","}"].some(R=>o.includes(R)),I=o.substring(c?1:0,c?o.length-1:o.length);return(0,ft.L)().test(I)?null:{patternGuid:!0};default:return null}}}var B=n(4175),q=n(5175),vt=n(3758),yt=n(9333),tt=n(8745),Tt=n(3826),Et=n(8021),U=n(5437);const et=i=>({active:i});function Mt(i,E){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=E.$implicit;t.Y8G("value",e.targetType),t.R7$(),t.SpI(" ",e.label," ")}}function It(i,E){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.Y8G("value",e.formValues.targetType),t.R7$(),t.SpI(" ",e.formValues.targetType," ")}}function Dt(i,E){if(1&i&&(t.j41(0,"mat-select",8),t.Z7z(1,Mt,2,2,"mat-option",12,t.fX1),t.DNE(3,It,2,2,"mat-option",12),t.k0s()),2&i){const e=t.XpG(),o=t.XpG();t.R7$(),t.Dyx(o.targetTypeOptions),t.R7$(2),t.vxM(3,e.unknownTargetType?3:-1)}}function bt(i,E){1&i&&t.nrm(0,"input",9)}function xt(i,E){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," Warning: you entered an unknown target type. This may work or may not. Please be sure you know what you're doing "),t.k0s()),2&i&&t.Y8G("isError",!1)}function Ot(i,E){if(1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.Y8G("isError",!1),t.R7$(),t.JRh(e.targetTypeHint)}}function Pt(i,E){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&i&&t.Y8G("isError",!0)}function Ft(i,E){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a whole number "),t.k0s()),2&i&&t.Y8G("isError",!0)}function Rt(i,E){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=E.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function At(i,E){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&i&&t.Y8G("isError",!0)}function St(i,E){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=E.$implicit;t.Y8G("value",e.StaticName),t.R7$(),t.SpI(" ",e.Label," ")}}function jt(i,E){if(1&i&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"Content Type"),t.k0s(),t.j41(3,"mat-select",19),t.Z7z(4,St,2,2,"mat-option",12,t.fX1),t.k0s()()),2&i){const e=t.XpG();t.R7$(3),t.Y8G("placeholder",e.contentTypes.length?"":"No items found"),t.R7$(),t.Dyx(e.contentTypes)}}function Bt(i,E){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=E.$implicit;t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function Ut(i,E){if(1&i&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"Scope"),t.k0s(),t.j41(3,"mat-select",20),t.Z7z(4,Bt,2,2,"mat-option",12,t.fX1),t.j41(6,"mat-option",12),t.EFF(7,"Other..."),t.k0s()()()),2&i){const e=t.XpG(),o=t.XpG();t.R7$(3),t.Y8G("placeholder",e.scopeOptions.length?"":"No items found"),t.R7$(),t.Dyx(e.scopeOptions),t.R7$(2),t.Y8G("value",o.dropdownInsertValue)}}function $t(i,E){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=E.$implicit;t.Y8G("value",e.Guid),t.R7$(),t.Lme(" ",e.Title," (",e.Id,") ")}}function kt(i,E){if(1&i&&(t.j41(0,"mat-select",21),t.Z7z(1,$t,2,3,"mat-option",12,t.fX1),t.k0s()),2&i){const e=t.XpG(3);t.Y8G("placeholder",e.contentItems.length?"":"No items found"),t.R7$(),t.Dyx(e.contentItems)}}function Kt(i,E){1&i&&t.nrm(0,"input",22)}function Gt(i,E){if(1&i&&t.DNE(0,kt,3,1,"mat-select",21)(1,Kt,1,0,"input",22),2&i){const e=t.XpG(2);t.vxM(0,e.guidedKey?0:-1),t.R7$(),t.vxM(1,e.guidedKey?-1:1)}}function Lt(i,E){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=E.$implicit;t.Y8G("value",e.StaticName),t.R7$(),t.SpI(" ",e.Label," ")}}function Wt(i,E){if(1&i&&(t.j41(0,"mat-select",21),t.Z7z(1,Lt,2,2,"mat-option",12,t.fX1),t.k0s()),2&i){const e=t.XpG(3);t.Y8G("placeholder",e.contentTypes.length?"":"No items found"),t.R7$(),t.Dyx(e.contentTypes)}}function Vt(i,E){1&i&&t.nrm(0,"input",22)}function Nt(i,E){if(1&i&&t.DNE(0,Wt,3,1,"mat-select",21)(1,Vt,1,0,"input",22),2&i){const e=t.XpG(2);t.vxM(0,e.guidedKey?0:-1),t.R7$(),t.vxM(1,e.guidedKey?-1:1)}}function wt(i,E){1&i&&t.eu8(0)}function Xt(i,E){if(1&i&&t.DNE(0,wt,1,0,"ng-container",23),2&i){t.XpG(2);const e=t.sdS(39);t.Y8G("ngTemplateOutlet",e)}}function Yt(i,E){if(1&i&&t.DNE(0,Gt,2,2)(1,Nt,2,2)(2,Xt,1,1),2&i){let e;const o=t.XpG(),a=t.XpG();t.vxM(0,(e=o.formValues.targetType)===a.eavConstants.metadata.entity.targetType?0:e===a.eavConstants.metadata.contentType.targetType?1:2)}}function Ht(i,E){1&i&&t.nrm(0,"input",22)}function zt(i,E){1&i&&t.nrm(0,"input",24)}function Qt(i,E){if(1&i&&t.DNE(0,Ht,1,0,"input",22)(1,zt,1,0,"input",24),2&i){const e=t.XpG(),o=t.XpG();t.vxM(0,e.formValues.keyType!==o.eavConstants.keyTypes.number?0:-1),t.R7$(),t.vxM(1,e.formValues.keyType===o.eavConstants.keyTypes.number?1:-1)}}function Jt(i,E){1&i&&t.nrm(0,"input",22)}function Zt(i,E){1&i&&t.nrm(0,"input",24)}function qt(i,E){if(1&i&&t.DNE(0,Jt,1,0,"input",22)(1,Zt,1,0,"input",24),2&i){const e=t.XpG(),o=t.XpG();t.vxM(0,e.formValues.keyType!==o.eavConstants.keyTypes.number?0:-1),t.R7$(),t.vxM(1,e.formValues.keyType===o.eavConstants.keyTypes.number?1:-1)}}function te(i,E){if(1&i){const e=t.RV6();t.j41(0,"div",14)(1,"button",25),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.toggleGuidedKey(!0))}),t.j41(2,"mat-icon",26),t.EFF(3,"search"),t.k0s()(),t.j41(4,"button",27),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.toggleGuidedKey(!1))}),t.j41(5,"mat-icon",26),t.EFF(6,"text_fields"),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(2,et,e.guidedKey)),t.R7$(3),t.Y8G("ngClass",t.eq3(4,et,!e.guidedKey))}}function ee(i,E){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&i&&t.Y8G("isError",!0)}function ne(i,E){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a whole number "),t.k0s()),2&i&&t.Y8G("isError",!0)}function oe(i,E){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a valid GUID "),t.k0s()),2&i&&t.Y8G("isError",!0)}function ie(i,E){if(1&i){const e=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3,"Create Metadata"),t.k0s()(),t.j41(4,"div",4)(5,"p"),t.EFF(6," This is a special operation to add an item which is metadata for another item, see "),t.j41(7,"a",5),t.EFF(8,"docs"),t.k0s(),t.EFF(9,". "),t.k0s(),t.j41(10,"form",6)(11,"mat-form-field",7)(12,"mat-label"),t.EFF(13,"Target"),t.k0s(),t.DNE(14,Dt,4,1,"mat-select",8)(15,bt,1,0,"input",9),t.k0s(),t.DNE(16,xt,2,1,"app-field-hint",10)(17,Ot,2,2,"app-field-hint",10)(18,Pt,2,1,"app-field-hint",10)(19,Ft,2,1,"app-field-hint",10),t.j41(20,"mat-form-field",7)(21,"mat-label"),t.EFF(22,"Key type"),t.k0s(),t.j41(23,"mat-select",11),t.Z7z(24,Rt,2,2,"mat-option",12,t.fX1),t.k0s()(),t.DNE(26,At,2,1,"app-field-hint",10)(27,jt,6,1,"mat-form-field",7)(28,Ut,8,2,"mat-form-field",7),t.j41(29,"app-field-hint"),t.EFF(30," The scope should almost never be changed - "),t.j41(31,"a",13),t.EFF(32,"see help"),t.k0s()(),t.j41(33,"mat-form-field",7)(34,"mat-label"),t.EFF(35,"Key"),t.k0s(),t.DNE(36,Yt,3,1)(37,Qt,2,2)(38,qt,2,2,"ng-template",null,0,t.C5r)(40,te,7,6,"div",14),t.k0s(),t.DNE(41,ee,2,1,"app-field-hint",10)(42,ne,2,1,"app-field-hint",10)(43,oe,2,1,"app-field-hint",10),t.k0s()(),t.j41(44,"mat-dialog-actions",15)(45,"mat-slide-toggle",16),t.bIt("change",function(a){t.eBV(e);const c=t.XpG();return t.Njj(c.toggleGuidedMode(a))}),t.EFF(46),t.k0s(),t.j41(47,"div")(48,"button",17),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.closeDialog())}),t.EFF(49,"Cancel"),t.k0s(),t.j41(50,"button",18),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.confirm())}),t.EFF(51," Confirm "),t.k0s()()()()}if(2&i){const e=E,o=t.XpG();t.R7$(10),t.Y8G("formGroup",o.form),t.R7$(4),t.vxM(14,e.guidedMode?14:-1),t.R7$(),t.vxM(15,e.guidedMode?-1:15),t.R7$(),t.vxM(16,o.form.controls.targetType.touched&&!o.form.controls.targetType.invalid&&e.unknownTargetType?16:-1),t.R7$(),t.vxM(17,e.targetTypeHint?17:-1),t.R7$(),t.vxM(18,o.form.controls.targetType.touched&&null!=o.form.controls.targetType.errors&&o.form.controls.targetType.errors.required?18:-1),t.R7$(),t.vxM(19,o.form.controls.targetType.touched&&null!=o.form.controls.targetType.errors&&o.form.controls.targetType.errors.pattern?19:-1),t.R7$(5),t.Dyx(e.keyTypeOptions),t.R7$(2),t.vxM(26,o.form.controls.keyType.touched&&null!=o.form.controls.keyType.errors&&o.form.controls.keyType.errors.required?26:-1),t.R7$(),t.vxM(27,e.guidedMode&&e.formValues.targetType===o.eavConstants.metadata.entity.targetType?27:-1),t.R7$(),t.vxM(28,!e.guidedMode||e.formValues.targetType!==o.eavConstants.metadata.entity.targetType&&e.formValues.targetType!==o.eavConstants.metadata.contentType.targetType?-1:28),t.R7$(8),t.vxM(36,e.guidedMode?36:37),t.R7$(4),t.vxM(40,e.guidedMode&&e.guidedKeyExists?40:-1),t.R7$(),t.vxM(41,o.form.controls.key.touched&&null!=o.form.controls.key.errors&&o.form.controls.key.errors.required?41:-1),t.R7$(),t.vxM(42,o.form.controls.key.touched&&null!=o.form.controls.key.errors&&o.form.controls.key.errors.patternWholeNumber?42:-1),t.R7$(),t.vxM(43,o.form.controls.key.touched&&null!=o.form.controls.key.errors&&o.form.controls.key.errors.patternGuid?43:-1),t.R7$(2),t.Y8G("tippy",e.guidedMode?"Guided mode helps you select options that work":"Manual mode is for advanced uses and allows you to insert any values")("checked",e.guidedMode),t.R7$(),t.SpI(" ",e.guidedMode?"Guided":"Manual"," "),t.R7$(4),t.Y8G("disabled",!o.form.valid)}}let ae=(()=>{class i extends _t.${constructor(e,o){super(),this.dialogRef=e,this.context=o,this.hostClass="dialog-component",this.eavConstants=P.YX,this.dropdownInsertValue=J.O,this.contentItemsService=(0,U.d)(Z.F),this.contentTypesService=(0,U.d)(ht.gs)}ngOnInit(){this.targetTypeOptions=Object.values(P.YX.metadata).map(o=>({...o})),this.keyTypeOptions=Object.values(P.YX.keyTypes),this.keyTypeOptions$=new l.t([]),this.scopeOptions$=new l.t([]),this.guidedMode$=new l.t(!0),this.contentItems$=new l.t([]),this.contentTypes$=new l.t([]),this.guidedKey$=new l.t(!0),this.fetchScopes(),this.form=new d.J3({}),this.form.addControl("targetType",new d.hs(P.YX.metadata.entity.targetType,[d.k0.required,d.k0.pattern(/^[0-9]+$/)])),this.form.addControl("keyType",new d.hs(P.YX.metadata.entity.keyType,[d.k0.required])),this.form.addControl("contentTypeForContentItems",new d.hs(null)),this.form.addControl("scopeForContentTypes",new d.hs(P.YX.scopes.default.value)),this.form.addControl("key",new d.hs(null,[d.k0.required,Ct(this.form)])),this.subscriptions.add(this.form.controls.scopeForContentTypes.valueChanges.pipe((0,w.Z)(this.form.controls.scopeForContentTypes.value),(0,V.F)()).subscribe(o=>{null!=this.form.controls.contentTypeForContentItems.value&&this.form.controls.contentTypeForContentItems.patchValue(null),o===J.O?(o=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||P.YX.scopes.default.value,this.scopeOptions$.value.some(a=>a.value===o)||this.scopeOptions$.next([{name:o,value:o},...this.scopeOptions$.value]),this.form.controls.scopeForContentTypes.patchValue(o)):this.fetchContentTypes(o)})),this.subscriptions.add((0,mt.h)(this.form.controls.targetType.valueChanges.pipe((0,V.F)()),this.form.controls.keyType.valueChanges.pipe((0,V.F)())).subscribe(()=>{this.guidedKey$.next(!0),null!=this.form.getRawValue().key&&this.form.patchValue({key:null})})),this.subscriptions.add(this.form.controls.contentTypeForContentItems.valueChanges.pipe((0,w.Z)(this.form.controls.contentTypeForContentItems.value),(0,V.F)()).subscribe(o=>{const a=this.form.getRawValue();a.targetType===P.YX.metadata.entity.targetType&&null!=a.key&&this.form.patchValue({key:null}),this.contentItemsService.getAll(o).subscribe(c=>{this.contentItems$.next(c)})}));const e=this.form.valueChanges.pipe((0,w.Z)(this.form.getRawValue()),(0,r.T)(()=>this.form.getRawValue()),(0,Et.A)(o=>o));this.subscriptions.add((0,p.z)([e,this.guidedMode$]).subscribe(([o,a])=>{const c=this.targetTypeOptions.find(nt=>nt.targetType===o.targetType),I=a&&c?[c.keyType]:[...this.keyTypeOptions];Tt.a.arraysEqual(I,this.keyTypeOptions$.value)||this.keyTypeOptions$.next(I);const D={};this.keyTypeOptions$.value.includes(o.keyType)||(D.keyType=this.keyTypeOptions$.value[0]);const R=a&&o.targetType===P.YX.metadata.app.targetType;R&&o.key!==this.context.appId&&(D.key=this.context.appId),Object.keys(D).length&&this.form.patchValue(D),tt.D.disableControl(this.form.controls.keyType,a&&this.keyTypeOptions$.value.length<=1),tt.D.disableControl(this.form.controls.key,R)})),this.viewModel$=(0,p.z)([(0,p.z)([this.guidedMode$,this.keyTypeOptions$,this.scopeOptions$,this.contentItems$,this.contentTypes$]),(0,p.z)([e,this.guidedKey$])]).pipe((0,r.T)(([[o,a,c,I,D],[R,Y]])=>({guidedMode:o,unknownTargetType:!this.targetTypeOptions.some(H=>H.targetType===R.targetType),targetTypeHint:o&&this.targetTypeOptions.find(H=>H.targetType===R.targetType)?.hint,keyTypeOptions:a,scopeOptions:c,guidedKey:Y,guidedKeyExists:[P.YX.metadata.entity.targetType,P.YX.metadata.contentType.targetType].includes(R.targetType),formValues:R,contentItems:I,contentTypes:D})))}ngOnDestroy(){this.guidedMode$.complete(),this.keyTypeOptions$.complete(),this.contentItems$.complete(),this.contentTypes$.complete(),this.guidedKey$.complete(),super.ngOnDestroy()}closeDialog(e){this.dialogRef.close(e)}toggleGuidedKey(e){this.guidedKey$.next(e)}toggleGuidedMode(e){this.guidedMode$.next(e.checked)}confirm(){const e=this.form.getRawValue(),o={target:this.targetTypeOptions.find(a=>a.targetType===e.targetType)?.target,targetType:e.targetType,keyType:e.keyType,key:e.keyType===P.YX.keyTypes.guid?e.key.replace(/{|}/g,""):e.key.toString()};this.closeDialog(o)}fetchContentTypes(e){this.contentTypesService.retrieveContentTypes(e).subscribe(o=>{this.contentTypes$.next(o)})}fetchScopes(){this.contentTypesService.getScopes().subscribe(e=>{this.scopeOptions$.next(e)})}static#e=this.\u0275fac=function(o){return new(o||i)(t.rXU(C.CP),t.rXU(gt.o))};static#t=this.\u0275cmp=t.VBU({type:i,selectors:[["app-create-metadata-dialog"]],hostVars:1,hostBindings:function(o,a){2&o&&t.Mr5("className",a.hostClass)},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[["defaultKeyInput",""],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],["href","https://go.2sxc.org/metadata","target","_blank"],[3,"formGroup"],["color","accent",2,"width","100%","margin-bottom","8px"],["formControlName","targetType","required",""],["matInput","","type","number","min","0","formControlName","targetType","required",""],[3,"isError"],["formControlName","keyType","required",""],[3,"value"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matTextSuffix","",1,"eav-selection-suffix"],[1,"eav-dialog-actions"],["color","accent",3,"change","tippy","checked"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click","disabled"],["formControlName","contentTypeForContentItems",3,"placeholder"],["formControlName","scopeForContentTypes",3,"placeholder"],["formControlName","key","required","",3,"placeholder"],["matInput","","type","text","formControlName","key","required",""],[4,"ngTemplateOutlet"],["matInput","","type","number","formControlName","key","required",""],["mat-icon-button","","type","button","tippy","Pick existing value",1,"eav-selection-suffix-button",3,"click","ngClass"],[1,"eav-icon"],["mat-icon-button","","type","button","tippy","Manual entry",1,"eav-selection-suffix-button",3,"click","ngClass"]],template:function(o,a){if(1&o&&(t.DNE(0,ie,52,19,"div",1),t.nI1(1,"async")),2&o){let c;t.vxM(0,(c=t.bMT(1,1,a.viewModel$))?0:-1,c)}},dependencies:[d.YN,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.VZ,d.X1,d.j4,d.JD,M.RG,M.rl,M.nJ,M.yw,q.Ve,q.VO,k.wT,k.Sy,O.fS,O.fg,L.T3,B.Hl,B.$z,B.iY,L.YU,j.m_,j.An,C.E7,Q.mV,Q.sG,L.Jj,vt.F,yt.c,N.e]})}return i})(),se=(()=>{class i{constructor(){this.published="",this.metadata="",this.hasMetadata=""}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.published||""!==this.metadata||""!==this.hasMetadata}doesFilterPass(e){let o=!1,a=!1,c=!1;const D=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:R=>e.node.data[R],node:e.node});return o=""===this.published||null!=D.published&&D.published.toString()===this.published,a=""===this.metadata||null!=D.metadata&&D.metadata.toString()===this.metadata,c=""===this.hasMetadata||null!=D.hasMetadata&&D.hasMetadata.toString()===this.hasMetadata,o&&a&&c}getModel(){return this.isFilterActive()?{filterType:"pub-meta",published:this.published,metadata:this.metadata,hasMetadata:this.hasMetadata}:void 0}setModel(e){this.published=e?e.published:"",this.metadata=e?e.metadata:"",this.hasMetadata=e?e.hasMetadata:""}afterGuiAttached(e){}filterChanged(){this.filterParams.filterChangedCallback()}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=t.VBU({type:i,selectors:[["app-pub-meta-filter"]],standalone:!0,features:[t.aNF],decls:27,vars:3,consts:[[1,"title"],[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(o,a){1&o&&(t.j41(0,"div",0),t.EFF(1,"Published"),t.k0s(),t.j41(2,"mat-radio-group",1),t.mxI("ngModelChange",function(I){return t.DH7(a.published,I)||(a.published=I),I}),t.bIt("ngModelChange",function(){return a.filterChanged()}),t.j41(3,"mat-radio-button",2),t.EFF(4,"All"),t.k0s(),t.j41(5,"mat-radio-button",3),t.EFF(6,"Published"),t.k0s(),t.j41(7,"mat-radio-button",4),t.EFF(8,"Not published"),t.k0s()(),t.j41(9,"div",0),t.EFF(10,"Is Metadata"),t.k0s(),t.j41(11,"mat-radio-group",1),t.mxI("ngModelChange",function(I){return t.DH7(a.metadata,I)||(a.metadata=I),I}),t.bIt("ngModelChange",function(){return a.filterChanged()}),t.j41(12,"mat-radio-button",2),t.EFF(13,"All"),t.k0s(),t.j41(14,"mat-radio-button",3),t.EFF(15,"Is metadata"),t.k0s(),t.j41(16,"mat-radio-button",4),t.EFF(17,"Is not metadata"),t.k0s()(),t.j41(18,"div",0),t.EFF(19,"Has Metadata"),t.k0s(),t.j41(20,"mat-radio-group",1),t.mxI("ngModelChange",function(I){return t.DH7(a.hasMetadata,I)||(a.hasMetadata=I),I}),t.bIt("ngModelChange",function(){return a.filterChanged()}),t.j41(21,"mat-radio-button",2),t.EFF(22,"All"),t.k0s(),t.j41(23,"mat-radio-button",3),t.EFF(24,"Has metadata"),t.k0s(),t.j41(25,"mat-radio-button",4),t.EFF(26,"Has no metadata"),t.k0s()()),2&o&&(t.R7$(2),t.R50("ngModel",a.published),t.R7$(9),t.R50("ngModel",a.metadata),t.R7$(9),t.R50("ngModel",a.hasMetadata))},dependencies:[b.Wk,b.VT,b._g,d.YN,d.BC,d.vS],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return i})();var re=n(6817),X=n(1828),le=n(9914),de=n(4575),ce=n(7037),pe=n(5699),ue=n(5506),me=n(9431),he=n(8471),_e=n(3347),ge=n(9841);function fe(i,E){1&i&&(t.nrm(0,"div",5),t.nI1(1,"safeHtml")),2&i&&t.Y8G("innerHTML",t.bMT(1,1,E),t.npT)}function Ce(i,E){if(1&i){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.debugFilter())}),t.j41(1,"mat-icon",11),t.EFF(2,"filter_list"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Filter"),t.k0s()()}}function ve(i,E){if(1&i){const e=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.closeDialog())}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",4),t.nrm(8,"router-outlet"),t.DNE(9,fe,2,3,"div",5),t.j41(10,"div",6)(11,"ag-grid-angular",7),t.bIt("gridReady",function(a){t.eBV(e);const c=t.XpG();return t.Njj(c.onGridReady(a))})("filesDropped",function(a){t.eBV(e);const c=t.XpG();return t.Njj(c.filesDropped(a))}),t.k0s()()(),t.j41(12,"mat-dialog-actions",8)(13,"div",9)(14,"button",10),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.exportContent())}),t.j41(15,"mat-icon",11),t.EFF(16,"cloud_download"),t.k0s(),t.j41(17,"span"),t.EFF(18,"Data"),t.k0s()(),t.j41(19,"button",12),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.importContent())}),t.j41(20,"mat-icon",11),t.EFF(21,"cloud_upload"),t.k0s(),t.j41(22,"span"),t.EFF(23,"Data"),t.k0s()(),t.j41(24,"button",13),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.importItem())}),t.j41(25,"mat-icon",11),t.EFF(26,"cloud_upload"),t.k0s(),t.j41(27,"span"),t.EFF(28,"Item"),t.k0s()(),t.j41(29,"button",14),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.createMetadata())}),t.j41(30,"mat-icon",11),t.EFF(31,"local_offer"),t.k0s(),t.j41(32,"span"),t.EFF(33,"Create Metadata"),t.k0s()(),t.DNE(34,Ce,5,0,"button",15),t.k0s(),t.j41(35,"button",16),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.editItem(null))}),t.j41(36,"mat-icon"),t.EFF(37,"add"),t.k0s()()()()}if(2&i){let e;const o=E,a=t.XpG();t.R7$(3),t.SpI(" ",o.contentType.Label||o.contentType.Name," Data "),t.R7$(6),t.vxM(9,(e=null==o.contentType||null==o.contentType.Properties?null:o.contentType.Properties.ListInstructions)?9:-1,e),t.R7$(2),t.Y8G("rowData",o.items)("gridOptions",a.gridOptions)("allowedFileTypes","xml,json"),t.R7$(23),t.vxM(34,a.isDebug()?34:-1)}}const ye={enabled:!1,name:"ContentItemsComponent"};let Te=(()=>{class i{#e;#t;constructor(e,o,a,c,I){this.dialogRef=e,this.snackBar=o,this.dialog=a,this.viewContainerRef=c,this.changeDetectorRef=I,this.contentType$=new g.B,this.items$=new l.t(void 0),this.gridOptions={...A.C},this.isDebug=(0,t.WQX)(me.B).isDebug,this.entitiesService=(0,U.d)(re.R),this.contentExportService=(0,U.d)(v.D),this.contentItemsService=(0,U.d)(Z.F),this.contentTypesService=(0,U.d)(h.g),this.#e=(0,U.d)(he.c),this.gridApi$=new l.t(null),this.#t=this.#e.snapshot.paramMap.get("contentTypeStaticName"),this.log=new ue.B(ye)}ngOnInit(){this.fetchContentType(),this.fetchItems(),this.fetchColumns(),this.#e.doOnDialogClosed(()=>this.fetchItems()),this.viewModel$=(0,p.z)([this.contentType$,this.items$]).pipe((0,r.T)(([e,o])=>({contentType:e,items:o})))}ngOnDestroy(){this.contentType$.complete(),this.items$.complete(),this.gridApi$.complete()}closeDialog(){this.dialogRef.close()}onGridReady(e){this.gridApi$.next(e.api)}fetchContentType(){this.contentTypesService.retrieveContentType(this.#t).subscribe(e=>{this.contentType$.next(e)})}fetchItems(){this.contentItemsService.getAll(this.#t).subscribe(e=>{this.items$.next(e)})}fetchColumns(){this.contentItemsService.getColumns(this.#t).subscribe(e=>{const o=e.filter(I=>!I.IsEphemeral),a=this.buildColumnDefs(o),c=function ut(i,E){if(!i)return;let e;"="===i.charAt(i.length-1)&&(i=atob(i));try{e=JSON.parse(i)}catch{console.error("Can't parse JSON with filters from url:",i)}if(!e)return;const o={};return(e.IsPublished||e.IsMetadata)&&(o.Status={filterType:"pub-meta",published:e.IsPublished??"",metadata:e.IsMetadata??"",hasMetadata:""}),Object.entries(e).filter(([a,c])=>"IsPublished"!==a&&"IsMetadata"!==a).forEach(([a,c])=>{if(E.find(D=>D.headerName===a)?.filter!==K){if("string"==typeof c)o[a]={filterType:"text",type:"equals",filter:c};else if("number"==typeof c)o[a]={filterType:"number",type:"equals",filter:c,filterTo:null};else if("boolean"==typeof c){const D={filterType:"boolean",filter:c.toString()};o[a]=D}}else{const D={filterType:"entity",filter:"string"==typeof(c=pt.i.tryParse(c)??c)?c:void 0,idFilter:"number"==typeof c?[c]:Array.isArray(c)?c.filter(R=>"number"==typeof R):void 0};o[a]=D}}),o}(sessionStorage.getItem(S.bo),a);this.gridApi$.value?this.setColumnDefs(a,c):this.gridApi$.pipe((0,y.p)(I=>null!=I),(0,f.s)(1)).subscribe(I=>{this.setColumnDefs(a,c)})})}setColumnDefs(e,o){this.gridApi$.value.setColumnDefs(e),o&&(this.log.a("Will try to apply filter:",o),this.gridApi$.value.setFilterModel(o))}openMetadata(e){const o=u.H.getUrlEntity(e.Guid,`Metadata for Entity: ${e._Title} (${e.Id})`,this.#t);this.#e.navRelative([o])}editItem(e){const o={items:[null==e?W.c.newFromType(this.#t):W.c.editId(e.Id)]},a=(0,$.s)(o);this.#e.navRelative([`edit/${a}`])}exportContent(){const e=this.gridApi$.value.getFilterModel(),o=Object.keys(e).length>0,a=[];o&&this.gridApi$.value.forEachNodeAfterFilterAndSort(c=>{a.push(c.data.Id)}),this.#e.navRelative([`export/${this.#t}${a.length>0?`/${a}`:""}`])}filesDropped(e){const o=e[0];switch(o.name.substring(o.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":this.importContent(e);break;case"json":this.importItem(e)}}importContent(e){this.#e.navRelative([`${this.#t}/import`],{state:{files:e}})}importItem(e){this.#e.navRelative(["import"],{state:{files:e}})}createMetadata(){this.dialog.open(ae,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(o=>{if(null==o)return;const a={items:[W.c.newMetadataFromInfo(this.#t,o)]},c=(0,$.s)(a);this.#e.navRelative([`edit/${c}`]),this.changeDetectorRef.markForCheck()})}debugFilter(){console.warn("Current filter:",this.gridApi$.value.getFilterModel()),this.snackBar.open("Check console for filter information",void 0,{duration:3e3})}buildColumnDefs(e){const o=[{...X.r.IdWithDefaultRenderer,cellClass:a=>("id-action no-padding no-outline "+(a.data._EditInfo.ReadOnly?"disabled":"")).split(" "),cellRendererParams:X.r.idFieldParamsTooltipGetter()},{field:"Status",width:82,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),filter:se,valueGetter:a=>{const c=a.data;return{published:c.IsPublished,metadata:!!c.For,hasMetadata:!!c.Metadata&&c.Metadata.length>0}},cellRenderer:ct,cellRendererParams:{onOpenMetadata:c=>this.openMetadata(c)}},{headerName:"Item (Entity)",field:"_Title",flex:2,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agTextColumnFilter",onCellClicked:a=>{this.editItem(a.data)}},{headerName:"Stats",headerTooltip:"Used by others / uses others",field:"_Used",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:a=>{const c=a.data;return`${c._Used} / ${c._Uses}`}},{...X.r.ActionsPinnedRight3,cellRenderer:it,cellRendererParams:{do:(c,I)=>{switch(c){case"clone":this.clone(I);break;case"export":this.export(I);break;case"delete":this.delete(I)}}}}];for(const a of e){const c={headerName:a.StaticName,field:a.StaticName,flex:2,minWidth:250,cellClass:"no-outline",sortable:!0};switch(a.Type){case _.O.Entity:c.allowMultiValue=a.Metadata?.Entity?.AllowMultiValue??!0,c.cellRenderer=st,c.valueGetter=this.valueGetterEntityField,c.filter=K;break;case _.O.DateTime:c.useTimePicker=a.Metadata?.DateTime?.UseTimePicker??!1,c.valueGetter=this.valueGetterDateTime,c.filter="agTextColumnFilter";break;case _.O.Boolean:c.valueGetter=this.valueGetterBoolean,c.filter=m.y;break;case _.O.Number:c.filter="agNumberColumnFilter";break;default:c.filter="agTextColumnFilter"}o.push(c)}return o}clone(e){const o={items:[W.c.copy(this.#t,e.Id)]},a=(0,$.s)(o);this.#e.navRelative([`edit/${a}`])}export(e){this.contentExportService.exportEntity(e.Id,this.#t,!0)}delete(e){confirm(`Delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.entitiesService.delete(this.#t,e._RepositoryId,!1).subscribe({next:()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()},error:o=>{this.snackBar.dismiss(),confirm(`${o.error.ExceptionMessage}\n\nDo you want to force delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.entitiesService.delete(this.#t,e._RepositoryId,!0).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()}))}}))}valueGetterEntityField(e){const o=e.data[e.colDef.field];return 0===o.length?null:o.map(a=>a.Title)}valueGetterDateTime(e){const o=e.data[e.colDef.field];return o?e.colDef.useTimePicker?o.replace("T"," ").replace("Z",""):o.split("T")[0]:null}valueGetterBoolean(e){const o=e.data[e.colDef.field];return"boolean"!=typeof o?null:o.toString()}static#n=this.\u0275fac=function(o){return new(o||i)(t.rXU(C.CP),t.rXU(_e.UG),t.rXU(C.bZ),t.rXU(t.c1b),t.rXU(t.gRc))};static#o=this.\u0275cmp=t.VBU({type:i,selectors:[["app-content-items"]],standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[["appToggleDebug","",1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[3,"innerHTML"],[1,"grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"gridReady","filesDropped","rowData","gridOptions","allowedFileTypes"],[1,"eav-dialog-actions"],[1,"eav-dialog-actions-div"],["mat-button","","tippy","Export xml list",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["mat-button","","tippy","Import xml list",1,"eav-button__with-icon",3,"click"],["mat-button","","tippy","Import single json item",1,"eav-button__with-icon",3,"click"],["mat-button","","tippy","Create metadata",1,"eav-button__with-icon",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",1,"eav-button__with-icon"],["mat-fab","","mat-elevation-z24","","tippy","Add item",1,"grid-fab",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",1,"eav-button__with-icon",3,"click"]],template:function(o,a){if(1&o&&(t.DNE(0,ve,38,6,"div",0),t.nI1(1,"async")),2&o){let c;t.vxM(0,(c=t.bMT(1,1,a.viewModel$))?0:-1,c)}},dependencies:[B.Hl,B.$z,B.iY,B.Sr,j.m_,j.An,s.n3,C.E7,L.Jj,le.$,de.S,pe.V,ce.p,ge.xs]})}return i})()},2871:(x,T,n)=>{n.d(T,{J:()=>s});var t=n(3840),C=n(7580);let s=(()=>{class g{constructor(){this.trueIcon="check_circle",this.falseIcon="circle"}agInit(p){let r=p.value;p.reverse&&(r=!r),p.trueIcon&&(this.trueIcon=p.trueIcon),p.falseIcon&&(this.falseIcon=p.falseIcon),this.icon=r?this.trueIcon:this.falseIcon}refresh(p){return!0}static#e=this.\u0275fac=function(r){return new(r||g)};static#t=this.\u0275cmp=C.VBU({type:g,selectors:[["app-rest-api-true-false"]],standalone:!0,features:[C.aNF],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(r,y){1&r&&(C.j41(0,"div",0)(1,"mat-icon"),C.EFF(2),C.k0s()()),2&r&&(C.R7$(2),C.JRh(y.icon))},dependencies:[t.m_,t.An],encapsulation:2})}return g})()},1772:(x,T,n)=>{n.d(T,{I:()=>f,u:()=>y});var t=n(6647),C=n(9452),s=n(3550),g=n(8873),l=n(7580),p=n(6443),r=n(4821);const y="admin/app/";let f=(()=>{class h{constructor(_,u,m){this.http=_,this.context=u,this.dnnContext=m}importApp(_,u,m=!1){const d=new FormData;return d.append("File",_),d.append("Name",u??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(y+"Import"),d,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(b=>{if(m&&b.Messages[0]?.MessageType===s.G1.Warning){const M=prompt(b.Messages[0].Text+" Would you like to install it using another folder name?");if(M)return this.importApp(_,M,!0)}return(0,C.of)(b)}))}static#e=this.\u0275fac=function(u){return new(u||h)(l.KVO(p.Qq),l.KVO(g.o),l.KVO(r.ob))};static#t=this.\u0275prov=l.jDH({token:h,factory:h.\u0275fac})}return h})()},8991:(x,T,n)=>{n.d(T,{N:()=>v});const t={states:{true:{tooltip:"true/on",icon:"radio_button_checked"},false:{tooltip:"false/off",icon:"radio_button_unchecked"}}};var C=n(7896),s=n(3840),g=n(316),l=n(7580);const p=_=>({clickable:_});function r(_,u){1&_&&l.eu8(0)}function y(_,u){if(1&_&&(l.j41(0,"a",2),l.DNE(1,r,1,0,"ng-container",3),l.k0s()),2&_){const m=l.XpG(),d=l.sdS(4);l.Y8G("href",m.data.url,l.B4B),l.R7$(),l.Y8G("ngTemplateOutlet",d)}}function f(_,u){if(1&_&&(l.j41(0,"div",4)(1,"mat-icon"),l.EFF(2),l.k0s()()),2&_){const m=l.XpG();l.Y8G("ngClass",l.eq3(3,p,m.data.clickable))("tippy",m.data.tooltip),l.R7$(2),l.JRh(m.data.icon)}}function h(_,u){if(1&_&&(l.j41(0,"div",4)(1,"mat-icon"),l.EFF(2),l.k0s()()),2&_){const m=l.XpG();l.Y8G("ngClass",l.eq3(3,p,m.data.clickable))("tippy",m.data.tooltip),l.R7$(2),l.JRh(m.data.icon)}}let v=(()=>{class _{agInit(m){this.value=m.value,this.allSettings=m.settings?.(m.data)??t;const d=this.allSettings.states[this.value?"true":"false"];this.data={...d,url:d.url??d.getUrl?.(m.data)}}refresh(m){return!0}static#e=this.\u0275fac=function(d){return new(d||_)};static#t=this.\u0275cmp=l.VBU({type:_,selectors:[["app-ag-bool-icon-renderer"]],standalone:!0,features:[l.aNF],decls:5,vars:1,consts:[["showIcon",""],[1,"icon-container"],["target","_blank",3,"href"],[4,"ngTemplateOutlet"],[1,"icon-cell","icon",3,"ngClass","tippy"]],template:function(d,b){1&d&&(l.j41(0,"div",1),l.DNE(1,y,2,2,"a",2)(2,f,3,5),l.k0s(),l.DNE(3,h,3,5,"ng-template",null,0,l.C5r)),2&d&&(l.R7$(),l.vxM(1,b.data.url?1:2))},dependencies:[C.e,s.m_,s.An,g.YU],encapsulation:2})}return _})()},1828:(x,T,n)=>{n.d(T,{r:()=>y});var t=n(1960),C=n(8991),s=n(2871),g=n(6378);const l="secondary-action no-padding".split(" "),p={cellClass:l,pinned:"right"},r={sortable:!0,filter:"agTextColumnFilter"};class y{static#e=this.ActionsPinnedRight1={width:42,...p};static#t=this.ActionsPinnedRight3={width:122,...p};static#n=this.ActionsPinnedRight4={width:162,...p};static#o=this.ActionsPinnedRight5={width:202,...p};static#i=this.ActionsPinnedRight6={width:82,...p};static#a=this.ActionsPinnedRight7={width:62,cellClass:l+" no-outline",pinned:"right"};static#s=this.IconShow={headerName:"Show",width:70,headerClass:"dense",cellClass:"icons no-outline".split(" "),sortable:!0,filter:t.y,valueGetter:h=>!h.data.IsHidden,cellRenderer:C.N};static#r=this.Items={width:102,headerClass:"dense",cellClass:l,sortable:!0,filter:"agNumberColumnFilter"};static#l=this.Fields={width:94,headerClass:"dense",cellClass:l,sortable:!0,filter:"agNumberColumnFilter"};static#d=this.Character={width:70,headerClass:"dense",cellClass:"no-outline",...r};static#c=this.Id={headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#p=this.IdWithDefaultRenderer={...y.Id,cellRenderer:g.L};static#u=this.Boolean={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0};static#m=this.Boolean2={width:100,sortable:!0,cellClass:"no-outline",filter:t.y};static#h=this.Boolean3={headerClass:"dense",width:80,cellClass:"no-outline",cellRenderer:s.J,cellRendererParams:{reverse:!1}};static#_=this.Number={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),...r};static#g=this.TextWideType={flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),...r};static#f=this.TextWide={flex:2,minWidth:250,cellClass:"no-outline",...r};static#C=this.TextWideMin100={flex:1,minWidth:100,...r};static#v=this.TextWideFlex3={flex:3,minWidth:250,cellClass:"no-outline",...r};static#y=this.TextNarrow={flex:1,minWidth:150,cellClass:"no-outline",...r};static#T=this.TextWideActionClass={flex:2,minWidth:250,cellClass:"primary-action no-padding no-outline".split(" "),...r};static idFieldParamsTooltipGetter(h){return{tooltipGetter:_=>`ID: ${_.Id}\nGUID: ${_[h||"Guid"]}`}}}},1960:(x,T,n)=>{n.d(T,{y:()=>g});var t=n(4456),C=n(3804),s=n(7580);let g=(()=>{class l{constructor(){this.filter=""}agInit(r){this.filterParams=r}isFilterActive(){return""!==this.filter}doesFilterPass(r){const f=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:r.node.data,getValue:h=>r.node.data[h],node:r.node});return null!=f&&f.toString()===this.filter}getModel(){if(this.isFilterActive())return{filterType:"boolean",filter:this.filter}}setModel(r){this.filter=r?r.filter:""}afterGuiAttached(r){}filterChanged(){this.filterParams.filterChangedCallback()}static#e=this.\u0275fac=function(y){return new(y||l)};static#t=this.\u0275cmp=s.VBU({type:l,selectors:[["app-boolean-filter"]],standalone:!0,features:[s.aNF],decls:7,vars:1,consts:[[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(y,f){1&y&&(s.j41(0,"mat-radio-group",0),s.mxI("ngModelChange",function(v){return s.DH7(f.filter,v)||(f.filter=v),v}),s.bIt("ngModelChange",function(){return f.filterChanged()}),s.j41(1,"mat-radio-button",1),s.EFF(2,"All"),s.k0s(),s.j41(3,"mat-radio-button",2),s.EFF(4,"True"),s.k0s(),s.j41(5,"mat-radio-button",3),s.EFF(6,"False"),s.k0s()()),2&y&&s.R50("ngModel",f.filter)},dependencies:[t.YN,t.BC,t.vS,C.Wk,C.VT,C._g],styles:[".mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return l})()},3758:(x,T,n)=>{n.d(T,{F:()=>v});var t=n(316),C=n(5944),s=n(7580);const g=["*"],l=_=>({"hint-box__short":_});function p(_,u){1&_&&s.eu8(0)}function r(_,u){if(1&_&&(s.j41(0,"mat-hint"),s.DNE(1,p,1,0,"ng-container",2),s.k0s()),2&_){s.XpG();const m=s.sdS(4);s.R7$(),s.Y8G("ngTemplateOutlet",m)}}function y(_,u){1&_&&s.eu8(0)}function f(_,u){if(1&_&&(s.j41(0,"mat-error"),s.DNE(1,y,1,0,"ng-container",2),s.k0s()),2&_){s.XpG();const m=s.sdS(4);s.R7$(),s.Y8G("ngTemplateOutlet",m)}}function h(_,u){1&_&&s.SdG(0)}let v=(()=>{class _{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#e=this.\u0275fac=function(d){return new(d||_)};static#t=this.\u0275cmp=s.VBU({type:_,selectors:[["app-field-hint"]],inputs:{isError:"isError"},standalone:!0,features:[s.aNF],ngContentSelectors:g,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(d,b){if(1&d){const M=s.RV6();s.NAR(),s.j41(0,"div",1),s.bIt("click",function(){return s.eBV(M),s.Njj(b.toggleIsShort())}),s.DNE(1,r,2,1)(2,f,2,1),s.k0s(),s.DNE(3,h,1,0,"ng-template",null,0,s.C5r)}if(2&d){let M;s.Y8G("ngClass",s.eq3(2,l,b.isShort)),s.R7$(),s.vxM(1,!1===(M=b.isError)?1:!0===M?2:-1)}},dependencies:[C.RG,C.MV,C.TL,t.YU,t.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return _})()},6378:(x,T,n)=>{n.d(T,{L:()=>y});var t=n(519),C=n(316),s=n(3840),g=n(7896),l=n(7580),p=n(3347);const r=(f,h)=>({"align-start":f,"align-end":h});let y=(()=>{class f{constructor(v){this.snackBar=v}agInit(v){this.id=v.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=v.tooltipGetter(v.data)}refresh(v){return!0}copy(){(0,t.l)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#e=this.\u0275fac=function(_){return new(_||f)(l.rXU(p.UG))};static#t=this.\u0275cmp=l.VBU({type:f,selectors:[["app-id-field"]],standalone:!0,features:[l.aNF],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"click","tippy","ngClass"],[1,"id"],[1,"icon"]],template:function(_,u){1&_&&(l.j41(0,"div",0),l.bIt("click",function(){return u.copy()}),l.j41(1,"span",1),l.EFF(2),l.k0s(),l.j41(3,"mat-icon",2),l.EFF(4,"file_copy"),l.k0s()()),2&_&&(l.Y8G("tippy",u.tooltip)("ngClass",l.l_i(3,r,"start"===u.align,"end"===u.align)),l.R7$(2),l.JRh(u.id))},dependencies:[C.YU,s.m_,s.An,g.e],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}return f})()},5858:(x,T,n)=>{n.d(T,{O:()=>t});const t="DROPDOWN_INSERT_VALUE"},9333:(x,T,n)=>{n.d(T,{c:()=>s});var t=n(7580);let s=(()=>{class g{constructor(){}onClick(p){p.stopPropagation()}static#e=this.\u0275fac=function(r){return new(r||g)};static#t=this.\u0275dir=t.FsC({type:g,selectors:[["","appClickStopPropagation",""]],hostBindings:function(r,y){1&r&&t.bIt("click",function(h){return y.onClick(h)})},standalone:!0})}return g})()},5699:(x,T,n)=>{n.d(T,{V:()=>s});var t=n(9431),C=n(7580);let s=(()=>{class g{constructor(p){this.globalConfigService=p}onClick(p){(navigator.platform.match("Mac")?p.metaKey:p.ctrlKey)&&p.shiftKey&&p.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static#e=this.\u0275fac=function(r){return new(r||g)(C.rXU(t.B))};static#t=this.\u0275dir=C.FsC({type:g,selectors:[["","appToggleDebug",""]],hostBindings:function(r,y){1&r&&C.bIt("click",function(h){return y.onClick(h)})},standalone:!0})}return g})()},5959:(x,T,n)=>{n.d(T,{h6:()=>h,zZ:()=>y});var t=n(271),C=n(7693),s=n(8873),g=n(7580),l=n(6443),p=n(4821);const r="admin/field/",y="admin/field/all",f="admin/field/GetSharedFields";let h=(()=>{class v{constructor(u,m,d){this.http=u,this.context=m,this.dnnContext=d}apiUrl(u){return this.dnnContext.$2sxc.http.apiUrl(u)}typeListRetrieve(){return this.http.get(this.apiUrl(r+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(r+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,t.T)(u=>u.map(d=>({dataType:d.Type.substring(0,d.Type.indexOf("-")),inputType:d.Type,label:d.Label,description:d.Description,isDefault:d.IsDefault,isObsolete:d.IsObsolete,isRecommended:d.IsRecommended,obsoleteMessage:d.ObsoleteMessage,icon:d.IsDefault?"star":d.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(r+"ReservedNames"))}getFields(u){return this.http.get(this.apiUrl(y),{params:{appid:this.context.appId.toString(),staticName:u}}).pipe((0,t.T)(m=>{if(m)for(const d of m){if(!d.Metadata)continue;const b=d.Metadata;b.merged={...b.All,...b[d.Type],...b[d.InputType]}}return m}))}getShareableFields(){return this.http.get(this.apiUrl(f),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(u){return this.http.get(this.apiUrl(f),{params:{appid:this.context.appId.toString(),attributeId:u.toString()}})}addInheritedField(u,m,d,b){return this.http.post(this.apiUrl(r+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:u.toString(),SourceType:m,SourceField:d,name:b}})}share(u,m=!0){return this.http.post(this.apiUrl(r+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:u.toString(),share:m}})}inherit(u,m){return this.http.post(this.apiUrl(r+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:u.toString(),inheritMetadataOf:m}})}reOrder(u,m){return this.http.post(this.apiUrl(r+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:m.Id.toString(),order:JSON.stringify(u)}})}setTitle(u,m){return this.http.post(this.apiUrl(C.X+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:m.Id.toString(),attributeId:u.Id.toString()}})}rename(u,m,d){return this.http.post(this.apiUrl(r+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:m.toString(),attributeId:u.toString(),newName:d}})}delete(u,m){if(u.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(r+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:m.Id.toString(),attributeId:u.Id.toString()}})}add(u,m){return this.http.post(this.apiUrl(r+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:m.toString(),Id:u.Id.toString(),Type:u.Type,InputType:u.InputType,StaticName:u.StaticName,IsTitle:u.IsTitle.toString(),Index:u.SortOrder.toString()}})}updateInputType(u,m,d){return this.http.post(this.apiUrl(r+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:u.toString(),field:m,inputType:d}})}static#e=this.\u0275fac=function(m){return new(m||v)(g.KVO(l.Qq),g.KVO(s.o),g.KVO(p.ob))};static#t=this.\u0275prov=g.jDH({token:v,factory:v.\u0275fac})}return v})()},1726:(x,T,n)=>{n.d(T,{O:()=>t});const t={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},693:(x,T,n)=>{function t(s){return new Promise((g,l)=>{const p=new FileReader;p.readAsDataURL(s),p.onload=()=>{g(p.result.split(",")[1])},p.onerror=r=>{l(r)}})}function C(s){return new Promise((g,l)=>{const p=new FileReader;p.readAsText(s),p.onload=()=>{g(p.result)},p.onerror=r=>{l(r)}})}n.d(T,{d:()=>C,n:()=>t})},8471:(x,T,n)=>{n.d(T,{c:()=>h});var t=n(2159),C=n(1567),s=n(3037),g=n(271),l=n(5057),p=n(5506),r=n(4979),y=n(7580);const f={enabled:!1,name:"DialogRoutingService",specs:{doOnDialogClosed:!0}};let h=(()=>{class v extends r.V{constructor(u,m){super(),this.router=u,this.route=m,this.log=new p.B(f)}ngOnDestroy(){super.destroy()}get snapshot(){return this.route.snapshot}get url(){return this.router.url}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(u){const m=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>{u()})),m.end()}navPath(u,m){return this.router.navigate([u],m)}navRelative(u,m){return this.router.navigate(u,{...m,relativeTo:this.route})}navParentFirstChild(u,m){return this.router.navigate(u,{...m,relativeTo:this.route.parent.firstChild})}childDialogClosed$(){return this.router.events.pipe((0,C.p)(u=>u instanceof t.wF),(0,s.Z)(!!this.route.snapshot.firstChild),(0,g.T)(()=>!!this.route.snapshot.firstChild),(0,l.J)(),(0,C.p)(([u,m])=>u&&!m))}static#e=this.\u0275fac=function(m){return new(m||v)(y.KVO(t.Ix),y.KVO(t.nX))};static#t=this.\u0275prov=y.jDH({token:v,factory:v.\u0275fac})}return v})()},8021:(x,T,n)=>{n.d(T,{A:()=>p,J:()=>l});var t=n(5682),C=n(1817),s=n(271),g=n(2434);function l(r){return(0,t.F)((0,C.F)(),(0,s.T)(r),(0,C.F)())}function p(r){return(0,t.F)((0,C.F)(),(0,s.T)(r),(0,C.F)(g.A))}},3826:(x,T,n)=>{n.d(T,{a:()=>t});class t{static boolEquals(s,g){return s===g}static stringEquals(s,g){return s===g}static valueEquals(s,g){return s===g}static objectsEqual(s,g){if(null==s||null==g)return s===g;const l=s,p=g,r=Object.keys(l),y=Object.keys(p);return r.length===y.length&&r.every(h=>!!p.hasOwnProperty(h)&&l[h]===p[h])}static arraysEqual(s,g){return null==s||null==g?s===g:s.length===g.length&&s.every((p,r)=>s[r]===g[r])}static distinct(s,g,l){return l.indexOf(s)===g}}},9431:(x,T,n)=>{n.d(T,{B:()=>l});var t=n(7580),C=n(9074),s=n(8172),g=n(3347);let l=(()=>{class p{constructor(y){this.snackBar=y,this.debugState=(0,t.vPA)(null),this.isDebug=(0,t.EWP)(()=>!!this.debugState()?.allowDebugMode&&!!this.debugState()?.debugEnabled),this.debugEnabled$=(0,C.br)(this.isDebug);const f={id:0,debugEnabled:"true"===sessionStorage.getItem(s.tn),allowDebugMode:!1};this.debugState.set(f)}allowDebug(y){const f=this.debugState();if(f.allowDebugMode===y)return;const h={...f,allowDebugMode:y};this.debugState.set(h)}toggleDebugEnabled(){const y=this.debugState();if(!y.allowDebugMode)return void this.snackBar.open("You do not have permissions to enter developer mode",null,{duration:3e3});const f={...y,debugEnabled:!y.debugEnabled};this.debugState.set(f),this.snackBar.open(f.debugEnabled?"developer mode on":"developer mode off",null,{duration:3e3})}static#e=this.\u0275fac=function(f){return new(f||p)(t.KVO(g.UG))};static#t=this.\u0275prov=t.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},4839:(x,T,n)=>{n.d(T,{c:()=>p});var t=n(5506),C=n(8873),s=n(7580),g=n(6443);const l={enabled:!1,name:"QueryService",specs:{all:!1,getAvailableEntities:!1,getEntities:!1}};let p=(()=>{class r{constructor(f,h){this.http=f,this.context=h,this.log=new t.B(l)}getAvailableEntities(f,h,v,_){this.log.fnIf("getAvailableEntities",{queryUrl:f,params:h,fields:v,entitiesFilter:_});const u=!!h,M=(((h?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(u?`&${h}`:"")+"&$select="+(v??"")).substring(1);return this.http.post(`app/auto/query/${f}?${M}`,{Guids:_})}getEntities({contentTypes:f,itemIds:h,fields:v,log:_}){this.log.fnIf("getEntities",{log:_,contentTypes:f,itemIds:h,fields:v});const m=("&typeNames="+(f?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(h?.join(",")??"")+"&$select="+(v??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${m}`,{})}static#e=this.\u0275fac=function(h){return new(h||r)(s.KVO(g.Qq),s.KVO(C.o))};static#t=this.\u0275prov=s.jDH({token:r,factory:r.\u0275fac})}return r})()},4979:(x,T,n)=>{n.d(T,{V:()=>s});var t=n(7092),C=n(7580);let s=(()=>{class g{constructor(){this.subscriptions=new t.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||g)};static#t=this.\u0275prov=C.jDH({token:g,factory:g.\u0275fac})}return g})()},9074:(x,T,n)=>{n.d(T,{br:()=>r,ot:()=>y});var t=n(7580),C=n(6042);function r(f,h){!h?.injector&&(0,t.Af3)(r);const v=h?.injector??(0,t.WQX)(t.zZn),_=new C.m(1),u=(0,t.QZP)(()=>{let m;try{m=f()}catch(d){return void(0,t.O8t)(()=>_.error(d))}(0,t.O8t)(()=>_.next(m))},{injector:v,manualCleanup:!0});return v.get(t.abz).onDestroy(()=>{u.destroy(),_.complete()}),_.asObservable()}function y(f,h){const v=!h?.manualCleanup;v&&!h?.injector&&(0,t.Af3)(y);const _=v?h?.injector?.get(t.abz)??(0,t.WQX)(t.abz):null;let u;u=(0,t.vPA)(h?.requireSync?{kind:0}:{kind:1,value:h?.initialValue});const m=f.subscribe({next:d=>u.set({kind:1,value:d}),error:d=>{if(h?.rejectErrors)throw d;u.set({kind:2,error:d})}});return _?.onDestroy(m.unsubscribe.bind(m)),(0,t.EWP)(()=>{const d=u();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new t.wOt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_content-items_content-items_component_ts-projects_eav-ui_src_app_shar-d0da70.7c0e8504cf92feca.js.map