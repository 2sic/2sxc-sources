"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts","projects_eav-ui_src_app_app-administration_services_content-types_service_ts-projects_eav-ui_-bcb93a"],{7693:(M,g,t)=>{t.d(g,{X:()=>c,g:()=>u});var n=t(271),h=t(6474),r=t(7580);const c="admin/type/",a="admin/type/scopes";let u=(()=>{class i extends h.D{retrieveContentType(s){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.appId,contentTypeId:s}})}retrieveContentTypes(s){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.appId,scope:s}})}getScopes(){return this.http.get(this.apiUrl(a),{params:{appId:this.appId}}).pipe((0,n.T)(s=>{const E=s.old;return Object.keys(E).map(O=>({name:E[O],value:O}))}))}getScopesV2(){return this.http.get(this.apiUrl(a),{params:{appId:this.appId}}).pipe((0,n.T)(s=>s.scopes))}save(s){return this.http.post(this.apiUrl("admin/type/save"),s,{params:{appid:this.appId}})}delete(s){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:s.StaticName}})}import(s){const E=new FormData;for(const v of s)E.append("File",v);return this.http.post(this.apiUrl("admin/type/import"),E,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(s){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceStaticName:s}})}static#t=this.\u0275fac=(()=>{let s;return function(v){return(s||(s=r.xGo(i)))(v||i)}})();static#n=this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}return i})()},1475:(M,g,t)=>{t.d(g,{j:()=>o});var n=t(8873),h=t(8624),r=t(7580),c=t(6443),d=t(4821);let o=(()=>{class a{constructor(_,e,l){this.http=_,this.context=e,this.dnnContext=l}getContentInfo(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(h.Q+"Get"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),scope:_}})}exportParts(_,e,l){const u=this.dnnContext.$2sxc.http.apiUrl(h.Q+"Export")+"?appId="+this.context.appId.toString()+"&zoneId="+this.context.zoneId.toString()+"&contentTypeIdsString="+_.join(";")+"&entityIdsString="+e.join(";")+"&templateIdsString="+l.join(";");window.open(u,"_blank","")}static#t=this.\u0275fac=function(e){return new(e||a)(r.KVO(c.Qq),r.KVO(n.o),r.KVO(d.ob))};static#n=this.\u0275prov=r.jDH({token:a,factory:a.\u0275fac})}return a})()},320:(M,g,t)=>{t.d(g,{t:()=>o});var n=t(1772),h=t(8873),r=t(7580),c=t(6443),d=t(4821);let o=(()=>{class a{constructor(_,e,l){this.http=_,this.context=e,this.dnnContext=l}getAppInfo(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(n.u+"Statistics"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}exportAppUrl(){return`${this.dnnContext.$2sxc.http.apiUrl(`${n.u}Export`)}?appId=${this.context.appId}&zoneId=${this.context.zoneId}`}exportForVersionControl({includeContentGroups:_,resetAppGuid:e,withFiles:l}){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(n.u+"SaveData"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),includeContentGroups:_.toString(),resetAppGuid:e.toString(),withPortalFiles:l.toString()}})}static#t=this.\u0275fac=function(e){return new(e||a)(r.KVO(c.Qq),r.KVO(h.o),r.KVO(d.ob))};static#n=this.\u0275prov=r.jDH({token:a,factory:a.\u0275fac})}return a})()},8624:(M,g,t)=>{t.d(g,{Q:()=>o,S:()=>a});var n=t(1772),h=t(8873),r=t(7580),c=t(6443),d=t(4821);const o="admin/appParts/";let a=(()=>{class m{constructor(e,l,u){this.http=e,this.context=l,this.dnnContext=u}importAppParts(e){const l=new FormData;return l.append("File",e),this.http.post(this.dnnContext.$2sxc.http.apiUrl(o+"Import"),l,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}resetApp(e){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(n.u+"Reset"),{},{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),withPortalFiles:e.toString()}})}static#t=this.\u0275fac=function(l){return new(l||m)(r.KVO(c.Qq),r.KVO(h.o),r.KVO(d.ob))};static#n=this.\u0275prov=r.jDH({token:m,factory:m.\u0275fac})}return m})()},5445:(M,g,t)=>{t.d(g,{Cu:()=>o.Cu,JL:()=>o.JL,Mk:()=>o.Mk,ei:()=>o.ei,gs:()=>h.g,tr:()=>n.t,vN:()=>o.vN,xR:()=>o.xR,y0:()=>a.y});var n=t(1479),h=t(7693),o=(t(1475),t(320),t(8624),t(6460)),a=t(2570)},6460:(M,g,t)=>{t.d(g,{Cu:()=>s,JL:()=>E,Mk:()=>i,ei:()=>p,vN:()=>v,xR:()=>O});var n=t(4600),h=t(6647),r=t(271),c=t(693),d=t(8873),o=t(9234),a=t(7580),m=t(6443),_=t(4821);const i="admin/query/Run",p="admin/query/DebugStream",s="admin/query/Save",E="admin/query/Get",v="admin/query/DataSources";let O=(()=>{class C{constructor(D,x,K){this.http=D,this.context=x,this.dnnContext=K}getAll(D){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(o.Gg),{params:{appId:this.context.appId.toString(),contentType:D}})}importQuery(D){return(0,n.H)((0,c.n)(D)).pipe((0,h.n)(x=>this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:this.context.appId.toString(),ContentBase64:x})),(0,r.T)(x=>({Success:x,Messages:[]})))}clonePipeline(D){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:D.toString(),appId:this.context.appId.toString()}})}delete(D){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:D.toString()}})}static#t=this.\u0275fac=function(x){return new(x||C)(a.KVO(m.Qq),a.KVO(d.o),a.KVO(_.ob))};static#n=this.\u0275prov=a.jDH({token:C,factory:C.\u0275fac})}return C})()},2570:(M,g,t)=>{t.d(g,{y:()=>l});var n=t(8873),h=t(7580),r=t(6443),c=t(4821);const d="admin/view/",o=d+"all",a=d+"delete",m=d+"import",_=d+"polymorphism",e=d+"usage";let l=(()=>{class u{constructor(p,s,E){this.http=p,this.context=s,this.dnnContext=E}getAll(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(o),{params:{appId:this.context.appId.toString()}})}delete(p){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(a),{params:{appId:this.context.appId.toString(),Id:p.toString()}})}import(p){const s=new FormData;return s.append("File",p),this.http.post(this.dnnContext.$2sxc.http.apiUrl(m),s,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}export(p){const s=this.dnnContext.$2sxc.http.apiUrl(d+"json")+"?appId="+this.context.appId+"&viewId="+p;window.open(s,"_blank","")}getPolymorphism(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(_),{params:{appId:this.context.appId.toString()}})}getUsage(p){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(e),{params:{appId:this.context.appId.toString(),guid:p}})}static#t=this.\u0275fac=function(s){return new(s||u)(h.KVO(r.Qq),h.KVO(n.o),h.KVO(c.ob))};static#n=this.\u0275prov=h.jDH({token:u,factory:u.\u0275fac})}return u})()},7756:(M,g,t)=>{t.r(g),t.d(g,{AppsManagementNavComponent:()=>K});var n=t(7580),h=t(2159),r=t(8873),c=t(7049),d=t(5445);const o=[{name:"System",path:"system",icon:"settings",svgIcon:!1,tippy:"System Info",child:[{name:"Register",path:"registration",icon:"how_to_reg",svgIcon:!1,tippy:"Register this System on 2sxc Patrons"}]},{name:"Apps",path:"list",icon:"star_border",svgIcon:!1,tippy:"Apps"},{name:"Languages",path:"languages",icon:"translate",svgIcon:!1,tippy:"Languages"},{name:"Extensions / Features",path:"license",icon:"tune",svgIcon:!1,tippy:"Extensions and Features"}];var a=t(4175),m=t(3011),_=t(3840),e=t(9552),l=t(1808),u=t(5699),i=t(5437),p=t(8471),s=t(7941),E=t(7912);const v=["sidenav"],O=(P,y)=>y.path;function C(P,y){if(1&P&&(n.j41(0,"mat-icon",13),n.EFF(1,"chevron_right"),n.k0s(),n.EFF(2)),2&P){const I=n.XpG().$implicit;n.R7$(2),n.SpI(" ",I," ")}}function U(P,y){if(1&P&&(n.qex(0),n.DNE(1,C,3,1),n.bVm()),2&P){const I=y.last;n.R7$(),n.vxM(1,I?1:-1)}}function D(P,y){}function x(P,y){1&P&&n.nrm(0,"app-nav-item-list",10),2&P&&n.Y8G("navItem",y.$implicit)}let K=(()=>{class P{#t;#n;constructor(I,f,A){this.dialogRef=I,this.context=f,this.media=A,this.#t=(0,n.WQX)(d.tr),this.zoneId=this.context.zoneId,this.smallScreen=this.media.matchMedia("(max-width: 1000px)"),this.sideNavOpened=!this.smallScreen.matches,this.navItems=o,this.#n=(0,i.d)(p.c)}ngOnInit(){this.fetchDialogSettings(),this.#n.doOnDialogClosed(()=>this.fetchDialogSettings()),this.smallScreen.addEventListener("change",I=>(this.sidenav.opened=!I.matches,this.sidenav.mode=I.matches?"over":"side"))}closeDialog(){this.dialogRef.close()}fetchDialogSettings(){this.#t.getShared$(0).subscribe()}static#e=this.\u0275fac=function(f){return new(f||P)(n.rXU(s.CP),n.rXU(r.o),n.rXU(E.DY))};static#s=this.\u0275cmp=n.VBU({type:P,selectors:[["app-apps-management-nav"]],viewQuery:function(f,A){if(1&f&&n.GBs(v,5),2&f){let T;n.mGM(T=n.lsd())&&(A.sidenav=T.first)}},standalone:!0,features:[n.aNF],decls:26,vars:4,consts:[["emptyTemplate",""],["sidenav",""],["appToggleDebug",""],[1,"toolbar-container"],[1,"menu-container",3,"click"],[3,"separator"],[4,"xngBreadcrumbItem"],[1,"toolbar-spacer"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"mode","opened"],[3,"navItem"],[1,"sideNav-bottom-info"],[1,"container-content"],[1,"breadcrumb-icon"]],template:function(f,A){if(1&f){const T=n.RV6();n.j41(0,"mat-toolbar",2)(1,"div",3)(2,"mat-icon",4),n.bIt("click",function(){n.eBV(T);const R=n.sdS(17);return n.Njj(R.opened=!R.opened)}),n.EFF(3,"menu"),n.k0s(),n.j41(4,"div")(5,"span"),n.EFF(6),n.k0s()(),n.j41(7,"xng-breadcrumb",5),n.DNE(8,U,2,1,"ng-container",6),n.k0s(),n.DNE(9,D,0,0,"ng-template",null,0,n.C5r),n.k0s(),n.nrm(11,"span",7),n.j41(12,"button",8),n.bIt("click",function(){return n.eBV(T),n.Njj(A.closeDialog())}),n.j41(13,"mat-icon"),n.EFF(14,"close"),n.k0s()()(),n.j41(15,"mat-sidenav-container",2)(16,"mat-sidenav",9,1),n.Z7z(18,x,1,1,"app-nav-item-list",10,O),n.j41(20,"div",11)(21,"p"),n.EFF(22,"use Burger icon to show/hide menu"),n.k0s()()(),n.j41(23,"mat-sidenav-content")(24,"div",12),n.nrm(25,"router-outlet"),n.k0s()()()}if(2&f){const T=n.sdS(10);n.R7$(6),n.SpI(" Manage Zone ",A.zoneId," "),n.R7$(),n.Y8G("separator",T),n.R7$(9),n.Y8G("mode",A.smallScreen.matches?"over":"side")("opened",A.sideNavOpened),n.R7$(2),n.Dyx(A.navItems)}},dependencies:[e.s5,e.KQ,_.m_,_.An,m._S,m.Dg,m._Y,a.Hl,a.iY,c.vg,c.LG,c.US,c.El,h.n3,l.a,u.V],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid rgba(0,0,0,.1);position:sticky;top:0;z-index:10;flex:1 0 74px}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{margin-right:16px;cursor:pointer}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid rgba(0,0,0,.2);border-radius:16px 0;margin-right:16px;-webkit-user-select:none;user-select:none;text-shadow:none;cursor:pointer;display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]   .mat-icon-admin[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:295px;border-right:1px solid rgba(0,0,0,.1)}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]   .sideNav-bottom-info[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;font-size:12px}.container-content[_ngcontent-%COMP%]{height:100%}.active[_ngcontent-%COMP%]{background-color:#8080801a}  .xng-breadcrumb-separator{margin-left:0!important;margin-right:0!important}  .mat-drawer-container{background-color:transparent!important}"]})}return P})()},1772:(M,g,t)=>{t.d(g,{I:()=>_,u:()=>m});var n=t(6647),h=t(9452),r=t(3550),c=t(8873),d=t(7580),o=t(6443),a=t(4821);const m="admin/app/";let _=(()=>{class e{constructor(u,i,p){this.http=u,this.context=i,this.dnnContext=p}importApp(u,i,p=!1){const s=new FormData;return s.append("File",u),s.append("Name",i??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(m+"Import"),s,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,n.n)(E=>{if(p&&E.Messages[0]?.MessageType===r.G1.Warning){const v=prompt(E.Messages[0].Text+" Would you like to install it using another folder name?");if(v)return this.importApp(u,v,!0)}return(0,h.of)(E)}))}static#t=this.\u0275fac=function(i){return new(i||e)(d.KVO(o.Qq),d.KVO(c.o),d.KVO(a.ob))};static#n=this.\u0275prov=d.jDH({token:e,factory:e.\u0275fac})}return e})()},693:(M,g,t)=>{function n(r){return new Promise((c,d)=>{const o=new FileReader;o.readAsDataURL(r),o.onload=()=>{c(o.result.split(",")[1])},o.onerror=a=>{d(a)}})}function h(r){return new Promise((c,d)=>{const o=new FileReader;o.readAsText(r),o.onload=()=>{c(o.result)},o.onerror=a=>{d(a)}})}t.d(g,{d:()=>h,n:()=>n})},8471:(M,g,t)=>{t.d(g,{c:()=>e});var n=t(2159),h=t(1567),r=t(3037),c=t(271),d=t(5057),o=t(4979),a=t(4435),m=t(7580);const _={doOnDialogClosed:!0};let e=(()=>{class l extends o.V{constructor(i,p){super(),this.router=i,this.route=p,this.log=(0,a.T)({DialogRoutingService:l},_)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(i){return this.route.snapshot.paramMap.get(i)}getParams(i){const p=this.route.snapshot.paramMap;return i.reduce((s,E)=>(s[E]=p.get(E),s),{})}getQueryParam(i){return this.route.snapshot.queryParamMap.get(i)}getQueryParams(i){const p=this.route.snapshot.queryParamMap;return i.reduce((s,E)=>(s[E]=p.get(E),s),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(i){const p=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>i())),p.end()}navPath(i,p){return this.router.navigate([i],p)}navRelative(i,p){return this.router.navigate(i,{...p,relativeTo:this.route})}navParentFirstChild(i,p){return this.router.navigate(i,{...p,relativeTo:this.route.parent.firstChild})}childDialogClosed$(){return this.router.events.pipe((0,h.p)(i=>i instanceof n.wF),(0,r.Z)(!!this.route.snapshot.firstChild),(0,c.T)(()=>!!this.route.snapshot.firstChild),(0,d.J)(),(0,h.p)(([i,p])=>i&&!p))}static#t=this.\u0275fac=function(p){return new(p||l)(m.KVO(n.Ix),m.KVO(n.nX))};static#n=this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}return l})()},9234:(M,g,t)=>{t.d(g,{Gg:()=>i,Tr:()=>p,gb:()=>u});var n=t(1567),h=t(6647),r=t(6301),c=t(271),d=t(4435),o=t(4839),a=t(5437),m=t(7580),_=t(6443),e=t(4821);const l={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},u="admin/entity/",i="admin/entity/list";let p=(()=>{class s{constructor(v,O){this.http=v,this.dnnContext=O,this.log=(0,d.T)({EntityService:s},l),this.queryService=(0,a.d)(o.c)}getEntities$(v){return this.log.fnIf("getEntities"),v.pipe((0,n.p)(O=>null!=O),(0,h.n)(O=>this.getAvailableEntities(O.contentTypeName).pipe((0,r.t)(1))))}getAvailableEntities(v,O){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[v],itemIds:O,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,c.T)(U=>U.Default))}delete(v,O,C,U,D,x){return this.log.fnIf("delete",{appId:v,contentType:O,entityId:C,force:U,parentId:D,parent}),this.http.delete(this.dnnContext.$2sxc.http.apiUrl(u+"delete"),{params:{contentType:O,id:C.toString(),appId:v,force:U.toString(),...D&&{parentId:D.toString()},...D&&x&&{parentField:x}}})}static#t=this.\u0275fac=function(O){return new(O||s)(m.KVO(_.Qq),m.KVO(e.ob))};static#n=this.\u0275prov=m.jDH({token:s,factory:s.\u0275fac})}return s})()},6474:(M,g,t)=>{t.d(g,{D:()=>d});var n=t(7580),h=t(4821),r=t(8873),c=t(6443);let d=(()=>{class o{constructor(){this.dnnContext=(0,n.WQX)(h.ob),this.http=(0,n.WQX)(c.Qq),this.context=(0,n.WQX)(r.o)}apiUrl(m){return this.dnnContext.$2sxc.http.apiUrl(m)}get appId(){return this.context.appId.toString()}get zoneId(){return this.context.zoneId.toString()}static#t=this.\u0275fac=function(_){return new(_||o)};static#n=this.\u0275prov=n.jDH({token:o,factory:o.\u0275fac})}return o})()},4839:(M,g,t)=>{t.d(g,{c:()=>o});var n=t(8873),h=t(4435),r=t(7580),c=t(6443);const d={all:!1,getAvailableEntities:!1,getEntities:!1};let o=(()=>{class a{constructor(_,e){this.http=_,this.context=e,this.log=(0,h.T)({QueryService:a},d)}getAvailableEntities(_,e,l,u){this.log.fnIf("getAvailableEntities",{queryUrl:_,params:e,fields:l,entitiesFilter:u});const i=!!e,v=(((e?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(i?`&${e}`:"")+"&$select="+(l??"")).substring(1);return this.http.post(`app/auto/query/${_}?${v}`,{Guids:u})}getEntities({contentTypes:_,itemIds:e,fields:l,log:u}){this.log.fnIf("getEntities",{log:u,contentTypes:_,itemIds:e,fields:l});const p=("&typeNames="+(_?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(e?.join(",")??"")+"&$select="+(l??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${p}`,{})}static#t=this.\u0275fac=function(e){return new(e||a)(r.KVO(c.Qq),r.KVO(n.o))};static#n=this.\u0275prov=r.jDH({token:a,factory:a.\u0275fac})}return a})()},4979:(M,g,t)=>{t.d(g,{V:()=>r});var n=t(7092),h=t(7580);let r=(()=>{class c{constructor(){this.subscriptions=new n.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(a){return new(a||c)};static#n=this.\u0275prov=h.jDH({token:c,factory:c.\u0275fac})}return c})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts.eed502719ad3b8e8.js.map