"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_content-items_component_ts-projects_eav-ui_src_app_shar-d0da70","projects_eav-ui_src_app_app-administration_services_content-types_service_ts-projects_eav-ui_-bcb93a"],{7693:(F,v,n)=>{n.d(v,{X:()=>u,g:()=>r});var t=n(271),f=n(6474),s=n(7580);const u="admin/type/",p="admin/type/scopes";let r=(()=>{class h extends f.D{retrieveContentType(y){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.appId,contentTypeId:y}})}retrieveContentTypes(y){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.appId,scope:y}})}getScopes(){return this.http.get(this.apiUrl(p),{params:{appId:this.appId}}).pipe((0,t.T)(y=>{const D=y.old;return Object.keys(D).map(j=>({name:D[j],value:j}))}))}getScopesV2(){return this.http.get(this.apiUrl(p),{params:{appId:this.appId}}).pipe((0,t.T)(y=>y.scopes))}save(y){return this.http.post(this.apiUrl("admin/type/save"),y,{params:{appid:this.appId}})}delete(y){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:y.StaticName}})}import(y){const D=new FormData;for(const P of y)D.append("File",P);return this.http.post(this.apiUrl("admin/type/import"),D,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(y){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceStaticName:y}})}static#t=this.\u0275fac=(()=>{let y;return function(P){return(y||(y=s.xGo(h)))(P||h)}})();static#e=this.\u0275prov=s.jDH({token:h,factory:h.\u0275fac})}return h})()},1475:(F,v,n)=>{n.d(v,{j:()=>c});var t=n(8873),f=n(8624),s=n(7580),u=n(6443),l=n(4821);let c=(()=>{class p{constructor(C,g,m){this.http=C,this.context=g,this.dnnContext=m}getContentInfo(C){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(f.Q+"Get"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),scope:C}})}exportParts(C,g,m){const r=this.dnnContext.$2sxc.http.apiUrl(f.Q+"Export")+"?appId="+this.context.appId.toString()+"&zoneId="+this.context.zoneId.toString()+"&contentTypeIdsString="+C.join(";")+"&entityIdsString="+g.join(";")+"&templateIdsString="+m.join(";");window.open(r,"_blank","")}static#t=this.\u0275fac=function(g){return new(g||p)(s.KVO(u.Qq),s.KVO(t.o),s.KVO(l.ob))};static#e=this.\u0275prov=s.jDH({token:p,factory:p.\u0275fac})}return p})()},320:(F,v,n)=>{n.d(v,{t:()=>c});var t=n(1772),f=n(8873),s=n(7580),u=n(6443),l=n(4821);let c=(()=>{class p{constructor(C,g,m){this.http=C,this.context=g,this.dnnContext=m}getAppInfo(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(t.u+"Statistics"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}exportAppUrl(){return`${this.dnnContext.$2sxc.http.apiUrl(`${t.u}Export`)}?appId=${this.context.appId}&zoneId=${this.context.zoneId}`}exportForVersionControl({includeContentGroups:C,resetAppGuid:g,withFiles:m}){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(t.u+"SaveData"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),includeContentGroups:C.toString(),resetAppGuid:g.toString(),withPortalFiles:m.toString()}})}static#t=this.\u0275fac=function(g){return new(g||p)(s.KVO(u.Qq),s.KVO(f.o),s.KVO(l.ob))};static#e=this.\u0275prov=s.jDH({token:p,factory:p.\u0275fac})}return p})()},8624:(F,v,n)=>{n.d(v,{Q:()=>c,S:()=>p});var t=n(1772),f=n(8873),s=n(7580),u=n(6443),l=n(4821);const c="admin/appParts/";let p=(()=>{class I{constructor(g,m,r){this.http=g,this.context=m,this.dnnContext=r}importAppParts(g){const m=new FormData;return m.append("File",g),this.http.post(this.dnnContext.$2sxc.http.apiUrl(c+"Import"),m,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}resetApp(g){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(t.u+"Reset"),{},{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),withPortalFiles:g.toString()}})}static#t=this.\u0275fac=function(m){return new(m||I)(s.KVO(u.Qq),s.KVO(f.o),s.KVO(l.ob))};static#e=this.\u0275prov=s.jDH({token:I,factory:I.\u0275fac})}return I})()},5445:(F,v,n)=>{n.d(v,{Cu:()=>c.Cu,JL:()=>c.JL,Mk:()=>c.Mk,ei:()=>c.ei,gs:()=>f.g,tr:()=>t.t,vN:()=>c.vN,xR:()=>c.xR,y0:()=>p.y});var t=n(1479),f=n(7693),c=(n(1475),n(320),n(8624),n(6460)),p=n(2570)},6460:(F,v,n)=>{n.d(v,{Cu:()=>y,JL:()=>D,Mk:()=>h,ei:()=>_,vN:()=>P,xR:()=>j});var t=n(4600),f=n(6647),s=n(271),u=n(693),l=n(8873),c=n(9234),p=n(7580),I=n(6443),C=n(4821);const h="admin/query/Run",_="admin/query/DebugStream",y="admin/query/Save",D="admin/query/Get",P="admin/query/DataSources";let j=(()=>{class B{constructor(O,b,A){this.http=O,this.context=b,this.dnnContext=A}getAll(O){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(c.Gg),{params:{appId:this.context.appId.toString(),contentType:O}})}importQuery(O){return(0,t.H)((0,u.n)(O)).pipe((0,f.n)(b=>this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:this.context.appId.toString(),ContentBase64:b})),(0,s.T)(b=>({Success:b,Messages:[]})))}clonePipeline(O){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:O.toString(),appId:this.context.appId.toString()}})}delete(O){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:O.toString()}})}static#t=this.\u0275fac=function(b){return new(b||B)(p.KVO(I.Qq),p.KVO(l.o),p.KVO(C.ob))};static#e=this.\u0275prov=p.jDH({token:B,factory:B.\u0275fac})}return B})()},2570:(F,v,n)=>{n.d(v,{y:()=>m});var t=n(8873),f=n(7580),s=n(6443),u=n(4821);const l="admin/view/",c=l+"all",p=l+"delete",I=l+"import",C=l+"polymorphism",g=l+"usage";let m=(()=>{class r{constructor(_,y,D){this.http=_,this.context=y,this.dnnContext=D}getAll(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(c),{params:{appId:this.context.appId.toString()}})}delete(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(p),{params:{appId:this.context.appId.toString(),Id:_.toString()}})}import(_){const y=new FormData;return y.append("File",_),this.http.post(this.dnnContext.$2sxc.http.apiUrl(I),y,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}export(_){const y=this.dnnContext.$2sxc.http.apiUrl(l+"json")+"?appId="+this.context.appId+"&viewId="+_;window.open(y,"_blank","")}getPolymorphism(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(C),{params:{appId:this.context.appId.toString()}})}getUsage(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(g),{params:{appId:this.context.appId.toString(),guid:_}})}static#t=this.\u0275fac=function(y){return new(y||r)(f.KVO(s.Qq),f.KVO(t.o),f.KVO(u.ob))};static#e=this.\u0275prov=f.jDH({token:r,factory:r.\u0275fac})}return r})()},7730:(F,v,n)=>{n.r(v),n.d(v,{ContentItemsComponent:()=>Ce});var t=n(7580),f=n(7941),s=n(2159),u=n(5797),l=n(1567),c=n(4334),p=n(7693),I=n(6360),C=n(1726),g=n(3454),m=n(1960),r=n(4456),h=n(3804),_=n(5944),y=n(7984);const D=["valueInput"];let P=(()=>{class i{constructor(){this.filter="",this.idFilterString="",this.idFilter=[]}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.filter||this.idFilter.length>0}doesFilterPass(e){if(""!==this.filter){const o=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:d=>e.node.data[d],node:e.node});if(null==o||!o.some(d=>!!d&&d.includes(this.filter)))return!1}if(this.idFilter.length>0){const a=e.data[this.filterParams.colDef.headerName];if(null==a||!this.idFilter.some(o=>a.some(d=>d.Id===o)))return!1}return!0}getModel(){return this.isFilterActive()?{filterType:"entity",filter:this.filter,idFilter:this.idFilter}:void 0}setModel(e){this.filter=e?.filter??"",this.idFilter=e?.idFilter??[],this.idFilterString=e?.idFilter?.join(",")??""}afterGuiAttached(e){this.valueInputRef.nativeElement.focus()}updateIdFilter(){this.idFilter=this.idFilterString.split(",").map(e=>parseInt(e,10)).filter(e=>!isNaN(e))}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-entity-filter"]],viewQuery:function(a,o){if(1&a&&t.GBs(D,5),2&a){let d;t.mGM(d=t.lsd())&&(o.valueInputRef=d.first)}},standalone:!0,features:[t.aNF],decls:9,vars:2,consts:[["valueInput",""],["color","accent",1,"eav-mat-form-field"],["matInput","","type","text",3,"ngModelChange","ngModel"]],template:function(a,o){if(1&a){const d=t.RV6();t.j41(0,"mat-form-field",1)(1,"mat-label"),t.EFF(2,"Value"),t.k0s(),t.j41(3,"input",2,0),t.mxI("ngModelChange",function(M){return t.eBV(d),t.DH7(o.filter,M)||(o.filter=M),t.Njj(M)}),t.bIt("ngModelChange",function(){return t.eBV(d),t.Njj(o.filterChanged())}),t.k0s()(),t.j41(5,"mat-form-field",1)(6,"mat-label"),t.EFF(7,"IDs (comma separated)"),t.k0s(),t.j41(8,"input",2),t.mxI("ngModelChange",function(M){return t.eBV(d),t.DH7(o.idFilterString,M)||(o.idFilterString=M),t.Njj(M)}),t.bIt("ngModelChange",function(){return t.eBV(d),o.updateIdFilter(),t.Njj(o.filterChanged())}),t.k0s()()}2&a&&(t.R7$(3),t.R50("ngModel",o.filter),t.R7$(5),t.R50("ngModel",o.idFilterString))},dependencies:[r.YN,r.me,r.BC,r.vS,h.Wk,_.RG,_.rl,_.nJ,y.fS,y.fg],styles:["[_nghost-%COMP%]{display:block;padding:16px 12px 2px}.mat-mdc-form-field[_ngcontent-%COMP%]{display:block;width:175px}"]})}return i})();var j=n(251),B=n(8172),N=n(3216),O=n(334),b=n(1034),A=n(3840),S=n(5060);function nt(i,T){if(1&i){const e=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.do("delete"))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Delete"),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("disabled",e.item._EditInfo.DisableDelete)}}let at=(()=>{class i{agInit(e){this.params=e,this.item=e.data}refresh(e){return!0}do(e){this.params.do(e,this.item)}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-content-items-actions"]],standalone:!0,features:[t.aNF],decls:13,vars:1,consts:[["menu","matMenu"],[1,"actions-component"],["matRipple","","tippy","Copy",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","Export",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["matMenuContent",""],["mat-menu-item","",3,"click","disabled"]],template:function(a,o){if(1&a){const d=t.RV6();t.j41(0,"div",1)(1,"div",2),t.bIt("click",function(){return t.eBV(d),t.Njj(o.do("clone"))}),t.j41(2,"mat-icon"),t.EFF(3,"file_copy"),t.k0s()(),t.j41(4,"div",3),t.bIt("click",function(){return t.eBV(d),t.Njj(o.do("export"))}),t.j41(5,"mat-icon"),t.EFF(6,"cloud_download"),t.k0s()(),t.j41(7,"div",4)(8,"mat-icon"),t.EFF(9,"more_horiz"),t.k0s()()(),t.j41(10,"mat-menu",5,0),t.DNE(12,nt,5,1,"ng-template",6),t.k0s()}if(2&a){const d=t.sdS(11);t.R7$(7),t.Y8G("matMenuTriggerFor",d)}},dependencies:[S.pZ,S.r6,A.m_,A.An,b.Cn,b.kk,b.fb,b.z8,b.Cp]})}return i})();var L=n(7896);function it(i,T){if(1&i&&(t.j41(0,"span",1),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.JRh(e.entities)}}let ot=(()=>{class i{agInit(e){Array.isArray(e.value)&&(this.encodedValue=this.htmlEncode(e.value.join(", ")),e.colDef.allowMultiValue&&(this.entities=e.value.length))}refresh(e){return!0}htmlEncode(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-content-items-entity"]],standalone:!0,features:[t.aNF],decls:3,vars:3,consts:[[3,"tippy"],[1,"more-entities"]],template:function(a,o){1&a&&(t.j41(0,"div",0),t.DNE(1,it,2,1,"span",1),t.EFF(2),t.k0s()),2&a&&(t.Y8G("tippy",o.encodedValue),t.R7$(),t.vxM(1,o.entities?1:-1),t.R7$(),t.SpI(" ",o.encodedValue,"\n"))},dependencies:[L.e],styles:[".more-entities[_ngcontent-%COMP%]{padding:0 8px;border-radius:10px;border:1px solid rgba(29,39,61,.44);-webkit-user-select:none;user-select:none}"]})}return i})();var w=n(6256),$=n(316);const st=i=>({"hide-until-row-hover":i});function rt(i,T){if(1&i){const e=t.RV6();t.j41(0,"div",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.openMetadata())}),t.j41(1,"mat-icon",5),t.EFF(2),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("ngClass",t.eq3(5,st,!e.metadataCount&&!e.value.metadata))("tippy",e.metadataTooltip),t.R7$(),t.Y8G("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.R7$(),t.SpI("",e.value.metadata?"loyalty":"local_offer"," ")}}function lt(i,T){if(1&i&&(t.j41(0,"div",3)(1,"mat-icon",6),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(),t.Y8G("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.R7$(),t.SpI("",e.value.metadata?"loyalty":"local_offer"," ")}}let dt=(()=>{class i{agInit(e){this.value=e.value,this.params=e,this.item=e.data,this.disableMetadata=this.item._EditInfo.DisableMetadata,this.metadataCount=this.item.Metadata?.length??0;const a=this.item.For;this.metadataTooltip=a?`This item is metadata for:\nTarget: ${a.Target}\nTargetType: ${a.TargetType}`+(a.KeyNumber?`\nNumber: ${a.KeyNumber}`:"")+(a.KeyString?`\nString: ${a.KeyString}`:"")+(a.KeyGuid?`\nGuid: ${a.KeyGuid}`:"")+(a.Title?`\nTitle: ${a.Title}`:""):"This item is not metadata.",this.metadataTooltip+=`\n\nThis item has ${this.metadataCount>0?this.metadataCount:"no"} other metadata ${1===this.metadataCount?"item":"items"} attached to it.`}refresh(e){return!0}openMetadata(){this.params.onOpenMetadata(this.item)}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-content-items-status"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[[1,"actions-component"],[1,"eav-grid-action-button","icon",3,"tippy"],["matRipple","",1,"eav-grid-action-button","highlight",3,"ngClass","tippy"],[1,"eav-grid-action-button","disabled"],["matRipple","",1,"eav-grid-action-button","highlight",3,"click","ngClass","tippy"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"]],template:function(a,o){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"mat-icon"),t.EFF(3),t.k0s()(),t.DNE(4,rt,3,7,"div",2)(5,lt,3,3,"div",3),t.k0s()),2&a&&(t.R7$(),t.Y8G("tippy",o.value.published?"Published":"Not published"),t.R7$(2),t.JRh(o.value.published?"visibility":"visibility_off"),t.R7$(),t.vxM(4,o.disableMetadata?-1:4),t.R7$(),t.vxM(5,o.disableMetadata&&(o.metadataCount||o.value.metadata)?5:-1))},dependencies:[A.m_,A.An,S.pZ,S.r6,$.YU,w.Y,w.k,L.e],styles:[".hide-until-row-hover[_ngcontent-%COMP%]{visibility:hidden}  .ag-row-hover .hide-until-row-hover{visibility:visible}"]})}return i})();var pt=n(4038),H=n(8827),V=n(3037),G=n(1817),ut=n(3617),z=n(271),K=n(9999),mt=n(5445),ht=n(3176),Q=n(5858),x=n(52),_t=n(8873),J=n(336),ft=n(9417);function gt(i){return T=>{if(!T.value)return null;const e=i.controls.keyType.value,a=T.value.toString();switch(e){case x.YX.keyTypes.number:return/^[0-9]+$/.test(a)?null:{patternWholeNumber:!0};case x.YX.keyTypes.guid:const d=["{","}"].some(R=>a.includes(R)),E=a.substring(d?1:0,d?a.length-1:a.length);return(0,ft.L)().test(E)?null:{patternGuid:!0};default:return null}}}var U=n(4175),Z=n(5175),Ct=n(3758),yt=n(9333),vt=n(3826),Tt=n(8021),k=n(5437),q=n(8857);const tt=i=>({active:i});function Et(i,T){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=T.$implicit;t.Y8G("value",e.targetType),t.R7$(),t.SpI(" ",e.label," ")}}function It(i,T){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.Y8G("value",e.formValues.targetType),t.R7$(),t.SpI(" ",e.formValues.targetType," ")}}function Mt(i,T){if(1&i&&(t.j41(0,"mat-select",8),t.Z7z(1,Et,2,2,"mat-option",12,t.fX1),t.DNE(3,It,2,2,"mat-option",12),t.k0s()),2&i){const e=t.XpG(),a=t.XpG();t.R7$(),t.Dyx(a.targetTypeOptions),t.R7$(2),t.vxM(3,e.unknownTargetType?3:-1)}}function Dt(i,T){1&i&&t.nrm(0,"input",9)}function Ft(i,T){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," Warning: you entered an unknown target type. This may work or may not. Please be sure you know what you're doing "),t.k0s()),2&i&&t.Y8G("isError",!1)}function Pt(i,T){if(1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.Y8G("isError",!1),t.R7$(),t.JRh(e.targetTypeHint)}}function Ot(i,T){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&i&&t.Y8G("isError",!0)}function xt(i,T){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a whole number "),t.k0s()),2&i&&t.Y8G("isError",!0)}function bt(i,T){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=T.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function Rt(i,T){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&i&&t.Y8G("isError",!0)}function At(i,T){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=T.$implicit;t.Y8G("value",e.StaticName),t.R7$(),t.SpI(" ",e.Label," ")}}function jt(i,T){if(1&i&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"Content Type"),t.k0s(),t.j41(3,"mat-select",19),t.Z7z(4,At,2,2,"mat-option",12,t.fX1),t.k0s()()),2&i){const e=t.XpG();t.R7$(3),t.Y8G("placeholder",e.contentTypes.length?"":"No items found"),t.R7$(),t.Dyx(e.contentTypes)}}function Bt(i,T){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=T.$implicit;t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function Ut(i,T){if(1&i&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"Scope"),t.k0s(),t.j41(3,"mat-select",20),t.Z7z(4,Bt,2,2,"mat-option",12,t.fX1),t.j41(6,"mat-option",12),t.EFF(7,"Other..."),t.k0s()()()),2&i){const e=t.XpG(),a=t.XpG();t.R7$(3),t.Y8G("placeholder",e.scopeOptions.length?"":"No items found"),t.R7$(),t.Dyx(e.scopeOptions),t.R7$(2),t.Y8G("value",a.dropdownInsertValue)}}function kt(i,T){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=T.$implicit;t.Y8G("value",e.Guid),t.R7$(),t.Lme(" ",e.Title," (",e.Id,") ")}}function St(i,T){if(1&i&&(t.j41(0,"mat-select",21),t.Z7z(1,kt,2,3,"mat-option",12,t.fX1),t.k0s()),2&i){const e=t.XpG(3);t.Y8G("placeholder",e.contentItems.length?"":"No items found"),t.R7$(),t.Dyx(e.contentItems)}}function $t(i,T){1&i&&t.nrm(0,"input",22)}function Gt(i,T){if(1&i&&t.DNE(0,St,3,1,"mat-select",21)(1,$t,1,0),2&i){const e=t.XpG(2);t.vxM(0,e.guidedKey?0:1)}}function Kt(i,T){if(1&i&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&i){const e=T.$implicit;t.Y8G("value",e.StaticName),t.R7$(),t.SpI(" ",e.Label," ")}}function Wt(i,T){if(1&i&&(t.j41(0,"mat-select",21),t.Z7z(1,Kt,2,2,"mat-option",12,t.fX1),t.k0s()),2&i){const e=t.XpG(3);t.Y8G("placeholder",e.contentTypes.length?"":"No items found"),t.R7$(),t.Dyx(e.contentTypes)}}function Nt(i,T){1&i&&t.nrm(0,"input",22)}function Lt(i,T){if(1&i&&t.DNE(0,Wt,3,1,"mat-select",21)(1,Nt,1,0),2&i){const e=t.XpG(2);t.vxM(0,e.guidedKey?0:1)}}function Vt(i,T){1&i&&t.eu8(0)}function Xt(i,T){if(1&i&&t.DNE(0,Vt,1,0,"ng-container",23),2&i){t.XpG(2);const e=t.sdS(39);t.Y8G("ngTemplateOutlet",e)}}function Yt(i,T){if(1&i&&t.DNE(0,Gt,2,1)(1,Lt,2,1)(2,Xt,1,1),2&i){let e;const a=t.XpG(),o=t.XpG();t.vxM(0,(e=a.formValues.targetType)===o.eavConstants.metadata.entity.targetType?0:e===o.eavConstants.metadata.contentType.targetType?1:2)}}function wt(i,T){1&i&&t.nrm(0,"input",22)}function Ht(i,T){1&i&&t.nrm(0,"input",24)}function zt(i,T){if(1&i&&t.DNE(0,wt,1,0,"input",22)(1,Ht,1,0,"input",24),2&i){const e=t.XpG(),a=t.XpG();t.vxM(0,e.formValues.keyType!==a.eavConstants.keyTypes.number?0:-1),t.R7$(),t.vxM(1,e.formValues.keyType===a.eavConstants.keyTypes.number?1:-1)}}function Qt(i,T){1&i&&t.nrm(0,"input",22)}function Jt(i,T){1&i&&t.nrm(0,"input",24)}function Zt(i,T){if(1&i&&t.DNE(0,Qt,1,0,"input",22)(1,Jt,1,0,"input",24),2&i){const e=t.XpG(),a=t.XpG();t.vxM(0,e.formValues.keyType!==a.eavConstants.keyTypes.number?0:-1),t.R7$(),t.vxM(1,e.formValues.keyType===a.eavConstants.keyTypes.number?1:-1)}}function qt(i,T){if(1&i){const e=t.RV6();t.j41(0,"div",14)(1,"button",25),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.toggleGuidedKey(!0))}),t.j41(2,"mat-icon",26),t.EFF(3,"search"),t.k0s()(),t.j41(4,"button",27),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.toggleGuidedKey(!1))}),t.j41(5,"mat-icon",26),t.EFF(6,"text_fields"),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(2,tt,e.guidedKey)),t.R7$(3),t.Y8G("ngClass",t.eq3(4,tt,!e.guidedKey))}}function te(i,T){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&i&&t.Y8G("isError",!0)}function ee(i,T){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a whole number "),t.k0s()),2&i&&t.Y8G("isError",!0)}function ne(i,T){1&i&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a valid GUID "),t.k0s()),2&i&&t.Y8G("isError",!0)}function ae(i,T){if(1&i){const e=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3,"Create Metadata"),t.k0s()(),t.j41(4,"div",4)(5,"p"),t.EFF(6," This is a special operation to add an item which is metadata for another item, see "),t.j41(7,"a",5),t.EFF(8,"docs"),t.k0s(),t.EFF(9,". "),t.k0s(),t.j41(10,"form",6)(11,"mat-form-field",7)(12,"mat-label"),t.EFF(13,"Target"),t.k0s(),t.DNE(14,Mt,4,1,"mat-select",8)(15,Dt,1,0,"input",9),t.k0s(),t.DNE(16,Ft,2,1,"app-field-hint",10)(17,Pt,2,2,"app-field-hint",10)(18,Ot,2,1,"app-field-hint",10)(19,xt,2,1,"app-field-hint",10),t.j41(20,"mat-form-field",7)(21,"mat-label"),t.EFF(22,"Key type"),t.k0s(),t.j41(23,"mat-select",11),t.Z7z(24,bt,2,2,"mat-option",12,t.fX1),t.k0s()(),t.DNE(26,Rt,2,1,"app-field-hint",10)(27,jt,6,1,"mat-form-field",7)(28,Ut,8,2,"mat-form-field",7),t.j41(29,"app-field-hint"),t.EFF(30," The scope should almost never be changed - "),t.j41(31,"a",13),t.EFF(32,"see help"),t.k0s()(),t.j41(33,"mat-form-field",7)(34,"mat-label"),t.EFF(35,"Key"),t.k0s(),t.DNE(36,Yt,3,1)(37,zt,2,2)(38,Zt,2,2,"ng-template",null,0,t.C5r)(40,qt,7,6,"div",14),t.k0s(),t.DNE(41,te,2,1,"app-field-hint",10)(42,ee,2,1,"app-field-hint",10)(43,ne,2,1,"app-field-hint",10),t.k0s()(),t.j41(44,"mat-dialog-actions",15)(45,"mat-slide-toggle",16),t.bIt("change",function(o){t.eBV(e);const d=t.XpG();return t.Njj(d.toggleGuidedMode(o))}),t.EFF(46),t.k0s(),t.j41(47,"div")(48,"button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeDialog())}),t.EFF(49,"Cancel"),t.k0s(),t.j41(50,"button",18),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.confirm())}),t.EFF(51," Confirm "),t.k0s()()()()}if(2&i){const e=T,a=t.XpG();t.R7$(10),t.Y8G("formGroup",a.form),t.R7$(4),t.vxM(14,e.guidedMode?14:-1),t.R7$(),t.vxM(15,e.guidedMode?-1:15),t.R7$(),t.vxM(16,a.form.controls.targetType.touched&&!a.form.controls.targetType.invalid&&e.unknownTargetType?16:-1),t.R7$(),t.vxM(17,e.targetTypeHint?17:-1),t.R7$(),t.vxM(18,a.form.controls.targetType.touched&&null!=a.form.controls.targetType.errors&&a.form.controls.targetType.errors.required?18:-1),t.R7$(),t.vxM(19,a.form.controls.targetType.touched&&null!=a.form.controls.targetType.errors&&a.form.controls.targetType.errors.pattern?19:-1),t.R7$(5),t.Dyx(e.keyTypeOptions),t.R7$(2),t.vxM(26,a.form.controls.keyType.touched&&null!=a.form.controls.keyType.errors&&a.form.controls.keyType.errors.required?26:-1),t.R7$(),t.vxM(27,e.guidedMode&&e.formValues.targetType===a.eavConstants.metadata.entity.targetType?27:-1),t.R7$(),t.vxM(28,!e.guidedMode||e.formValues.targetType!==a.eavConstants.metadata.entity.targetType&&e.formValues.targetType!==a.eavConstants.metadata.contentType.targetType?-1:28),t.R7$(8),t.vxM(36,e.guidedMode?36:37),t.R7$(4),t.vxM(40,e.guidedMode&&e.guidedKeyExists?40:-1),t.R7$(),t.vxM(41,a.form.controls.key.touched&&null!=a.form.controls.key.errors&&a.form.controls.key.errors.required?41:-1),t.R7$(),t.vxM(42,a.form.controls.key.touched&&null!=a.form.controls.key.errors&&a.form.controls.key.errors.patternWholeNumber?42:-1),t.R7$(),t.vxM(43,a.form.controls.key.touched&&null!=a.form.controls.key.errors&&a.form.controls.key.errors.patternGuid?43:-1),t.R7$(2),t.Y8G("tippy",e.guidedMode?"Guided mode helps you select options that work":"Manual mode is for advanced uses and allows you to insert any values")("checked",e.guidedMode),t.R7$(),t.SpI(" ",e.guidedMode?"Guided":"Manual"," "),t.R7$(4),t.Y8G("disabled",!a.form.valid)}}let ie=(()=>{class i extends ht.${constructor(e,a){super(),this.dialogRef=e,this.context=a,this.hostClass="dialog-component",this.eavConstants=x.YX,this.dropdownInsertValue=Q.O,this.contentItemsService=(0,k.d)(J.F),this.contentTypesService=(0,k.d)(mt.gs)}ngOnInit(){this.targetTypeOptions=Object.values(x.YX.metadata).map(a=>({...a})),this.keyTypeOptions=Object.values(x.YX.keyTypes),this.keyTypeOptions$=new u.t([]),this.scopeOptions$=new u.t([]),this.guidedMode$=new u.t(!0),this.contentItems$=new u.t([]),this.contentTypes$=new u.t([]),this.guidedKey$=new u.t(!0),this.fetchScopes(),this.form=new r.J3({}),this.form.addControl("targetType",new r.hs(x.YX.metadata.entity.targetType,[r.k0.required,r.k0.pattern(/^[0-9]+$/)])),this.form.addControl("keyType",new r.hs(x.YX.metadata.entity.keyType,[r.k0.required])),this.form.addControl("contentTypeForContentItems",new r.hs(null)),this.form.addControl("scopeForContentTypes",new r.hs(x.YX.scopes.default.value)),this.form.addControl("key",new r.hs(null,[r.k0.required,gt(this.form)])),this.subscriptions.add(this.form.controls.scopeForContentTypes.valueChanges.pipe((0,V.Z)(this.form.controls.scopeForContentTypes.value),(0,G.F)()).subscribe(a=>{null!=this.form.controls.contentTypeForContentItems.value&&this.form.controls.contentTypeForContentItems.patchValue(null),a===Q.O?(a=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||x.YX.scopes.default.value,this.scopeOptions$.value.some(o=>o.value===a)||this.scopeOptions$.next([{name:a,value:a},...this.scopeOptions$.value]),this.form.controls.scopeForContentTypes.patchValue(a)):this.fetchContentTypes(a)})),this.subscriptions.add((0,ut.h)(this.form.controls.targetType.valueChanges.pipe((0,G.F)()),this.form.controls.keyType.valueChanges.pipe((0,G.F)())).subscribe(()=>{this.guidedKey$.next(!0),null!=this.form.getRawValue().key&&this.form.patchValue({key:null})})),this.subscriptions.add(this.form.controls.contentTypeForContentItems.valueChanges.pipe((0,V.Z)(this.form.controls.contentTypeForContentItems.value),(0,G.F)()).subscribe(a=>{const o=this.form.getRawValue();o.targetType===x.YX.metadata.entity.targetType&&null!=o.key&&this.form.patchValue({key:null}),this.contentItemsService.getAll(a).subscribe(d=>{this.contentItems$.next(d)})}));const e=this.form.valueChanges.pipe((0,V.Z)(this.form.getRawValue()),(0,z.T)(()=>this.form.getRawValue()),(0,Tt.A)(a=>a));this.subscriptions.add((0,K.z)([e,this.guidedMode$]).subscribe(([a,o])=>{const d=this.targetTypeOptions.find(et=>et.targetType===a.targetType),E=o&&d?[d.keyType]:[...this.keyTypeOptions];vt.a.arraysEqual(E,this.keyTypeOptions$.value)||this.keyTypeOptions$.next(E);const M={};this.keyTypeOptions$.value.includes(a.keyType)||(M.keyType=this.keyTypeOptions$.value[0]);const R=o&&a.targetType===x.YX.metadata.app.targetType;R&&a.key!==this.context.appId&&(M.key=this.context.appId),Object.keys(M).length&&this.form.patchValue(M),q.a.disable(this.form.controls.keyType,o&&this.keyTypeOptions$.value.length<=1),q.a.disable(this.form.controls.key,R)})),this.viewModel$=(0,K.z)([(0,K.z)([this.guidedMode$,this.keyTypeOptions$,this.scopeOptions$,this.contentItems$,this.contentTypes$]),(0,K.z)([e,this.guidedKey$])]).pipe((0,z.T)(([[a,o,d,E,M],[R,X]])=>({guidedMode:a,unknownTargetType:!this.targetTypeOptions.some(Y=>Y.targetType===R.targetType),targetTypeHint:a&&this.targetTypeOptions.find(Y=>Y.targetType===R.targetType)?.hint,keyTypeOptions:o,scopeOptions:d,guidedKey:X,guidedKeyExists:[x.YX.metadata.entity.targetType,x.YX.metadata.contentType.targetType].includes(R.targetType),formValues:R,contentItems:E,contentTypes:M})))}ngOnDestroy(){this.guidedMode$.complete(),this.keyTypeOptions$.complete(),this.contentItems$.complete(),this.contentTypes$.complete(),this.guidedKey$.complete(),super.ngOnDestroy()}closeDialog(e){this.dialogRef.close(e)}toggleGuidedKey(e){this.guidedKey$.next(e)}toggleGuidedMode(e){this.guidedMode$.next(e.checked)}confirm(){const e=this.form.getRawValue(),a={target:this.targetTypeOptions.find(o=>o.targetType===e.targetType)?.target,targetType:e.targetType,keyType:e.keyType,key:e.keyType===x.YX.keyTypes.guid?e.key.replace(/{|}/g,""):e.key.toString()};this.closeDialog(a)}fetchContentTypes(e){this.contentTypesService.retrieveContentTypes(e).subscribe(a=>{this.contentTypes$.next(a)})}fetchScopes(){this.contentTypesService.getScopes().subscribe(e=>{this.scopeOptions$.next(e)})}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(f.CP),t.rXU(_t.o))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-create-metadata-dialog"]],hostVars:1,hostBindings:function(a,o){2&a&&t.Mr5("className",o.hostClass)},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[["defaultKeyInput",""],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],["href","https://go.2sxc.org/metadata","target","_blank"],[3,"formGroup"],["color","accent",2,"width","100%","margin-bottom","8px"],["formControlName","targetType","required",""],["matInput","","type","number","min","0","formControlName","targetType","required",""],[3,"isError"],["formControlName","keyType","required",""],[3,"value"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matTextSuffix","",1,"eav-selection-suffix"],[1,"eav-dialog-actions"],["color","accent",3,"change","tippy","checked"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click","disabled"],["formControlName","contentTypeForContentItems",3,"placeholder"],["formControlName","scopeForContentTypes",3,"placeholder"],["formControlName","key","required","",3,"placeholder"],["matInput","","type","text","formControlName","key","required",""],[4,"ngTemplateOutlet"],["matInput","","type","number","formControlName","key","required",""],["mat-icon-button","","type","button","tippy","Pick existing value",1,"eav-selection-suffix-button",3,"click","ngClass"],[1,"eav-icon"],["mat-icon-button","","type","button","tippy","Manual entry",1,"eav-selection-suffix-button",3,"click","ngClass"]],template:function(a,o){if(1&a&&(t.DNE(0,ae,52,19,"div",1),t.nI1(1,"async")),2&a){let d;t.vxM(0,(d=t.bMT(1,1,o.viewModel$))?0:-1,d)}},dependencies:[r.YN,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.VZ,r.X1,r.j4,r.JD,_.RG,_.rl,_.nJ,_.yw,Z.Ve,Z.VO,S.wT,S.Sy,y.fS,y.fg,$.T3,U.Hl,U.$z,U.iY,$.YU,A.m_,A.An,f.E7,H.mV,H.sG,$.Jj,Ct.F,yt.c,L.e]})}return i})(),oe=(()=>{class i{constructor(){this.published="",this.metadata="",this.hasMetadata=""}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.published||""!==this.metadata||""!==this.hasMetadata}doesFilterPass(e){let a=!1,o=!1,d=!1;const M=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:R=>e.node.data[R],node:e.node});return a=""===this.published||null!=M.published&&M.published.toString()===this.published,o=""===this.metadata||null!=M.metadata&&M.metadata.toString()===this.metadata,d=""===this.hasMetadata||null!=M.hasMetadata&&M.hasMetadata.toString()===this.hasMetadata,a&&o&&d}getModel(){return this.isFilterActive()?{filterType:"pub-meta",published:this.published,metadata:this.metadata,hasMetadata:this.hasMetadata}:void 0}setModel(e){this.published=e?e.published:"",this.metadata=e?e.metadata:"",this.hasMetadata=e?e.hasMetadata:""}afterGuiAttached(e){}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-pub-meta-filter"]],standalone:!0,features:[t.aNF],decls:27,vars:3,consts:[[1,"title"],[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(a,o){1&a&&(t.j41(0,"div",0),t.EFF(1,"Published"),t.k0s(),t.j41(2,"mat-radio-group",1),t.mxI("ngModelChange",function(E){return t.DH7(o.published,E)||(o.published=E),E}),t.bIt("ngModelChange",function(){return o.filterChanged()}),t.j41(3,"mat-radio-button",2),t.EFF(4,"All"),t.k0s(),t.j41(5,"mat-radio-button",3),t.EFF(6,"Published"),t.k0s(),t.j41(7,"mat-radio-button",4),t.EFF(8,"Not published"),t.k0s()(),t.j41(9,"div",0),t.EFF(10,"Is Metadata"),t.k0s(),t.j41(11,"mat-radio-group",1),t.mxI("ngModelChange",function(E){return t.DH7(o.metadata,E)||(o.metadata=E),E}),t.bIt("ngModelChange",function(){return o.filterChanged()}),t.j41(12,"mat-radio-button",2),t.EFF(13,"All"),t.k0s(),t.j41(14,"mat-radio-button",3),t.EFF(15,"Is metadata"),t.k0s(),t.j41(16,"mat-radio-button",4),t.EFF(17,"Is not metadata"),t.k0s()(),t.j41(18,"div",0),t.EFF(19,"Has Metadata"),t.k0s(),t.j41(20,"mat-radio-group",1),t.mxI("ngModelChange",function(E){return t.DH7(o.hasMetadata,E)||(o.hasMetadata=E),E}),t.bIt("ngModelChange",function(){return o.filterChanged()}),t.j41(21,"mat-radio-button",2),t.EFF(22,"All"),t.k0s(),t.j41(23,"mat-radio-button",3),t.EFF(24,"Has metadata"),t.k0s(),t.j41(25,"mat-radio-button",4),t.EFF(26,"Has no metadata"),t.k0s()()),2&a&&(t.R7$(2),t.R50("ngModel",o.published),t.R7$(9),t.R50("ngModel",o.metadata),t.R7$(9),t.R50("ngModel",o.hasMetadata))},dependencies:[h.Wk,h.VT,h._g,r.YN,r.BC,r.vS],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return i})();var se=n(6817),W=n(1828),re=n(9914),le=n(4575),de=n(7037),pe=n(5699),ce=n(9431),ue=n(8471),me=n(4435),he=n(3347),_e=n(9841);function fe(i,T){1&i&&(t.nrm(0,"div",5),t.nI1(1,"safeHtml")),2&i&&t.Y8G("innerHTML",t.bMT(1,1,T),t.npT)}function ge(i,T){if(1&i){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.debugFilter())}),t.j41(1,"mat-icon",11),t.EFF(2,"filter_list"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Filter"),t.k0s()()}}let Ce=(()=>{class i{#t;#e;#o;#s;#a;constructor(e,a,o,d,E){this.dialogRef=e,this.snackBar=a,this.dialog=o,this.viewContainerRef=d,this.changeDetectorRef=E,this.log=(0,me.T)({ContentItemsComponent:i}),this.isDebug=(0,t.WQX)(ce.B).isDebug,this.#t=(0,k.d)(se.R),this.#e=(0,k.d)(I.D),this.#o=(0,k.d)(J.F),this.#s=(0,k.d)(p.g),this.#a=(0,k.d)(ue.c),this.contentType=(0,t.vPA)(void 0),this.items=(0,t.vPA)(void 0),this.gridOptions={...j.C},this.#i=new u.t(null),this.#n=this.#a.getParam("contentTypeStaticName")}#i;#n;ngOnInit(){this.fetchContentType(),this.fetchItems(),this.fetchColumns(),this.#a.doOnDialogClosed(()=>this.fetchItems())}ngOnDestroy(){this.#i.complete()}closeDialog(){this.dialogRef.close()}onGridReady(e){this.#i.next(e.api)}fetchContentType(){this.#s.retrieveContentType(this.#n).subscribe(e=>{this.contentType.set(e)})}fetchItems(){this.#o.getAll(this.#n).subscribe(e=>{this.items.set(e)})}fetchColumns(){this.#o.getColumns(this.#n).subscribe(e=>{const a=e.filter(E=>!E.IsEphemeral),o=this.buildColumnDefs(a),d=function ct(i,T){if(!i)return;let e;"="===i.charAt(i.length-1)&&(i=atob(i));try{e=JSON.parse(i)}catch{console.error("Can't parse JSON with filters from url:",i)}if(!e)return;const a={};return(e.IsPublished||e.IsMetadata)&&(a.Status={filterType:"pub-meta",published:e.IsPublished??"",metadata:e.IsMetadata??"",hasMetadata:""}),Object.entries(e).filter(([o,d])=>"IsPublished"!==o&&"IsMetadata"!==o).forEach(([o,d])=>{if(T.find(M=>M.headerName===o)?.filter!==P){if("string"==typeof d)a[o]={filterType:"text",type:"equals",filter:d};else if("number"==typeof d)a[o]={filterType:"number",type:"equals",filter:d,filterTo:null};else if("boolean"==typeof d){const M={filterType:"boolean",filter:d.toString()};a[o]=M}}else{const M={filterType:"entity",filter:"string"==typeof(d=pt.i.tryParse(d)??d)?d:void 0,idFilter:"number"==typeof d?[d]:Array.isArray(d)?d.filter(R=>"number"==typeof R):void 0};a[o]=M}}),a}(sessionStorage.getItem(B.bo),o);this.#i.value?this.setColumnDefs(o,d):this.#i.pipe((0,l.p)(E=>null!=E),(0,c.s)(1)).subscribe(E=>{this.setColumnDefs(o,d)})})}setColumnDefs(e,a){this.#i.value.setColumnDefs(e),a&&(this.log.a("Will try to apply filter:",a),this.#i.value.setFilterModel(a))}openMetadata(e){const a=g.H.getUrlEntity(e.Guid,`Metadata for Entity: ${e._Title} (${e.Id})`,this.#n);this.#a.navRelative([a])}editItem(e){const a={items:[null==e?O.c.newFromType(this.#n):O.c.editId(e.Id)]},o=(0,N.s)(a);this.#a.navRelative([`edit/${o}`])}exportContent(){const e=this.#i.value.getFilterModel(),a=Object.keys(e).length>0,o=[];a&&this.#i.value.forEachNodeAfterFilterAndSort(d=>{o.push(d.data.Id)}),this.#a.navRelative([`export/${this.#n}${o.length>0?`/${o}`:""}`])}filesDropped(e){const a=e[0];switch(a.name.substring(a.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":this.importContent(e);break;case"json":this.importItem(e)}}importContent(e){this.#a.navRelative([`${this.#n}/import`],{state:{files:e}})}importItem(e){this.#a.navRelative(["import"],{state:{files:e}})}createMetadata(){this.dialog.open(ie,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(a=>{if(null==a)return;const o={items:[O.c.newMetadataFromInfo(this.#n,a)]},d=(0,N.s)(o);this.#a.navRelative([`edit/${d}`]),this.changeDetectorRef.markForCheck()})}debugFilter(){console.warn("Current filter:",this.#i.value.getFilterModel()),this.snackBar.open("Check console for filter information",void 0,{duration:3e3})}buildColumnDefs(e){const a=[{...W.r.IdWithDefaultRenderer,cellClass:o=>("id-action no-padding no-outline "+(o.data._EditInfo.ReadOnly?"disabled":"")).split(" "),cellRendererParams:W.r.idFieldParamsTooltipGetter()},{field:"Status",width:82,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),filter:oe,valueGetter:o=>{const d=o.data;return{published:d.IsPublished,metadata:!!d.For,hasMetadata:!!d.Metadata&&d.Metadata.length>0}},cellRenderer:dt,cellRendererParams:{onOpenMetadata:d=>this.openMetadata(d)}},{...W.r.TextWidePrimary,headerName:"Item (Entity)",field:"_Title",flex:2,onCellClicked:o=>this.editItem(o.data)},{headerName:"Stats",headerTooltip:"Used by others / uses others",field:"_Used",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:o=>`${o.data._Used} / ${o.data._Uses}`},{...W.r.ActionsPinnedRight3,cellRenderer:at,cellRendererParams:{do:(d,E)=>{switch(d){case"clone":this.clone(E);break;case"export":this.export(E);break;case"delete":this.delete(E)}}}}];for(const o of e){const d={headerName:o.StaticName,field:o.StaticName,flex:2,minWidth:250,cellClass:"no-outline",sortable:!0};switch(o.Type){case C.O.Entity:d.allowMultiValue=o.Metadata?.Entity?.AllowMultiValue??!0,d.cellRenderer=ot,d.valueGetter=this.valueGetterEntityField,d.filter=P;break;case C.O.DateTime:d.useTimePicker=o.Metadata?.DateTime?.UseTimePicker??!1,d.valueGetter=this.valueGetterDateTime,d.filter="agTextColumnFilter";break;case C.O.Boolean:d.valueGetter=this.valueGetterBoolean,d.filter=m.y;break;case C.O.Number:d.filter="agNumberColumnFilter";break;default:d.filter="agTextColumnFilter"}a.push(d)}return a}clone(e){const a={items:[O.c.copy(this.#n,e.Id)]},o=(0,N.s)(a);this.#a.navRelative([`edit/${o}`])}export(e){this.#e.exportEntity(e.Id,this.#n,!0)}delete(e){confirm(`Delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.#t.delete(this.#n,e._RepositoryId,!1).subscribe({next:()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()},error:a=>{this.snackBar.dismiss(),confirm(`${a.error.ExceptionMessage}\n\nDo you want to force delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.#t.delete(this.#n,e._RepositoryId,!0).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()}))}}))}valueGetterEntityField(e){const a=e.data[e.colDef.field];return 0===a.length?null:a.map(o=>o.Title)}valueGetterDateTime(e){const a=e.data[e.colDef.field];return a?e.colDef.useTimePicker?a.replace("T"," ").replace("Z",""):a.split("T")[0]:null}valueGetterBoolean(e){const a=e.data[e.colDef.field];return"boolean"!=typeof a?null:a.toString()}static#r=this.\u0275fac=function(a){return new(a||i)(t.rXU(f.CP),t.rXU(he.UG),t.rXU(f.bZ),t.rXU(t.c1b),t.rXU(t.gRc))};static#l=this.\u0275cmp=t.VBU({type:i,selectors:[["app-content-items"]],standalone:!0,features:[t.aNF],decls:38,vars:6,consts:[["appToggleDebug","",1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[3,"innerHTML"],[1,"grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"gridReady","filesDropped","rowData","gridOptions","allowedFileTypes"],[1,"eav-dialog-actions"],[1,"eav-dialog-actions-div"],["mat-button","","tippy","Export xml list",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["mat-button","","tippy","Import xml list",1,"eav-button__with-icon",3,"click"],["mat-button","","tippy","Import single json item",1,"eav-button__with-icon",3,"click"],["mat-button","","tippy","Create metadata",1,"eav-button__with-icon",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",1,"eav-button__with-icon"],["mat-fab","","mat-elevation-z24","","tippy","Add item",1,"grid-fab",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",1,"eav-button__with-icon",3,"click"]],template:function(a,o){if(1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return o.closeDialog()}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",4),t.nrm(8,"router-outlet"),t.DNE(9,fe,2,3,"div",5),t.j41(10,"div",6)(11,"ag-grid-angular",7),t.bIt("gridReady",function(E){return o.onGridReady(E)})("filesDropped",function(E){return o.filesDropped(E)}),t.k0s()()(),t.j41(12,"mat-dialog-actions",8)(13,"div",9)(14,"button",10),t.bIt("click",function(){return o.exportContent()}),t.j41(15,"mat-icon",11),t.EFF(16,"cloud_download"),t.k0s(),t.j41(17,"span"),t.EFF(18,"Data"),t.k0s()(),t.j41(19,"button",12),t.bIt("click",function(){return o.importContent()}),t.j41(20,"mat-icon",11),t.EFF(21,"cloud_upload"),t.k0s(),t.j41(22,"span"),t.EFF(23,"Data"),t.k0s()(),t.j41(24,"button",13),t.bIt("click",function(){return o.importItem()}),t.j41(25,"mat-icon",11),t.EFF(26,"cloud_upload"),t.k0s(),t.j41(27,"span"),t.EFF(28,"Item"),t.k0s()(),t.j41(29,"button",14),t.bIt("click",function(){return o.createMetadata()}),t.j41(30,"mat-icon",11),t.EFF(31,"local_offer"),t.k0s(),t.j41(32,"span"),t.EFF(33,"Create Metadata"),t.k0s()(),t.DNE(34,ge,5,0,"button",15),t.k0s(),t.j41(35,"button",16),t.bIt("click",function(){return o.editItem(null)}),t.j41(36,"mat-icon"),t.EFF(37,"add"),t.k0s()()()()),2&a){let d,E;t.R7$(3),t.SpI(" ",(null==(d=o.contentType())?null:d.Label)||(null==(d=o.contentType())?null:d.Name)," Data "),t.R7$(6),t.vxM(9,(E=null==(E=o.contentType())||null==E.Properties?null:E.Properties.ListInstructions)?9:-1,E),t.R7$(2),t.Y8G("rowData",o.items())("gridOptions",o.gridOptions)("allowedFileTypes","xml,json"),t.R7$(23),t.vxM(34,o.isDebug()?34:-1)}},dependencies:[U.Hl,U.$z,U.iY,U.Sr,A.m_,A.An,s.n3,f.E7,re.$,le.S,pe.V,de.p,_e.xs],encapsulation:2})}return i})()},2871:(F,v,n)=>{n.d(v,{J:()=>s});var t=n(3840),f=n(7580);let s=(()=>{class u{constructor(){this.trueIcon="check_circle",this.falseIcon="circle"}agInit(c){let p=c.value;c.reverse&&(p=!p),c.trueIcon&&(this.trueIcon=c.trueIcon),c.falseIcon&&(this.falseIcon=c.falseIcon),this.icon=p?this.trueIcon:this.falseIcon}refresh(c){return!0}static#t=this.\u0275fac=function(p){return new(p||u)};static#e=this.\u0275cmp=f.VBU({type:u,selectors:[["app-rest-api-true-false"]],standalone:!0,features:[f.aNF],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(p,I){1&p&&(f.j41(0,"div",0)(1,"mat-icon"),f.EFF(2),f.k0s()()),2&p&&(f.R7$(2),f.JRh(I.icon))},dependencies:[t.m_,t.An],encapsulation:2})}return u})()},1772:(F,v,n)=>{n.d(v,{I:()=>C,u:()=>I});var t=n(6647),f=n(9452),s=n(3550),u=n(8873),l=n(7580),c=n(6443),p=n(4821);const I="admin/app/";let C=(()=>{class g{constructor(r,h,_){this.http=r,this.context=h,this.dnnContext=_}importApp(r,h,_=!1){const y=new FormData;return y.append("File",r),y.append("Name",h??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(I+"Import"),y,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(D=>{if(_&&D.Messages[0]?.MessageType===s.G1.Warning){const P=prompt(D.Messages[0].Text+" Would you like to install it using another folder name?");if(P)return this.importApp(r,P,!0)}return(0,f.of)(D)}))}static#t=this.\u0275fac=function(h){return new(h||g)(l.KVO(c.Qq),l.KVO(u.o),l.KVO(p.ob))};static#e=this.\u0275prov=l.jDH({token:g,factory:g.\u0275fac})}return g})()},8991:(F,v,n)=>{n.d(v,{N:()=>m});const t={states:{true:{tooltip:"true/on",icon:"radio_button_checked"},false:{tooltip:"false/off",icon:"radio_button_unchecked"}}};var f=n(7896),s=n(3840),u=n(316),l=n(7580);const c=r=>({clickable:r});function p(r,h){1&r&&l.eu8(0)}function I(r,h){if(1&r&&(l.j41(0,"a",2),l.DNE(1,p,1,0,"ng-container",3),l.k0s()),2&r){const _=l.XpG(),y=l.sdS(4);l.Y8G("href",_.data.url,l.B4B),l.R7$(),l.Y8G("ngTemplateOutlet",y)}}function C(r,h){if(1&r&&(l.j41(0,"div",4)(1,"mat-icon"),l.EFF(2),l.k0s()()),2&r){const _=l.XpG();l.Y8G("ngClass",l.eq3(3,c,_.data.clickable))("tippy",_.data.tooltip),l.R7$(2),l.JRh(_.data.icon)}}function g(r,h){if(1&r&&(l.j41(0,"div",4)(1,"mat-icon"),l.EFF(2),l.k0s()()),2&r){const _=l.XpG();l.Y8G("ngClass",l.eq3(3,c,_.data.clickable))("tippy",_.data.tooltip),l.R7$(2),l.JRh(_.data.icon)}}let m=(()=>{class r{agInit(_){this.value=_.value,this.allSettings=_.settings?.(_.data)??t;const y=this.allSettings.states[this.value?"true":"false"];this.data={...y,url:y.url??y.getUrl?.(_.data)}}refresh(_){return!0}static#t=this.\u0275fac=function(y){return new(y||r)};static#e=this.\u0275cmp=l.VBU({type:r,selectors:[["app-ag-bool-icon-renderer"]],standalone:!0,features:[l.aNF],decls:5,vars:1,consts:[["showIcon",""],[1,"icon-container"],["target","_blank",3,"href"],[4,"ngTemplateOutlet"],[1,"icon-cell","icon",3,"ngClass","tippy"]],template:function(y,D){1&y&&(l.j41(0,"div",1),l.DNE(1,I,2,2,"a",2)(2,C,3,5),l.k0s(),l.DNE(3,g,3,5,"ng-template",null,0,l.C5r)),2&y&&(l.R7$(),l.vxM(1,D.data.url?1:2))},dependencies:[f.e,s.m_,s.An,u.YU],encapsulation:2})}return r})()},1828:(F,v,n)=>{n.d(v,{r:()=>I});var t=n(1960),f=n(8991),s=n(2871),u=n(6378);const l="secondary-action no-padding".split(" "),c={cellClass:l,pinned:"right"},p={sortable:!0,filter:"agTextColumnFilter"};class I{static#t=this.ActionsPinnedRight1={width:42,...c};static#e=this.ActionsPinnedRight3={width:122,...c};static#o=this.ActionsPinnedRight4={width:162,...c};static#s=this.ActionsPinnedRight5={width:202,...c};static#a=this.ActionsPinnedRight6={width:82,...c};static#i=this.ActionsPinnedRight7={width:62,cellClass:l+" no-outline",pinned:"right"};static#n=this.IconShow={headerName:"Show",width:70,headerClass:"dense",cellClass:"icons no-outline".split(" "),sortable:!0,filter:t.y,valueGetter:g=>!g.data.IsHidden,cellRenderer:f.N};static#r=this.Items={width:102,headerClass:"dense",cellClass:l,sortable:!0,filter:"agNumberColumnFilter"};static#l=this.Fields={width:94,headerClass:"dense",cellClass:l,sortable:!0,filter:"agNumberColumnFilter"};static#d=this.Character={width:70,headerClass:"dense",cellClass:"no-outline",...p};static#p=this.Id={headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#c=this.IdWithDefaultRenderer={...I.Id,cellRenderer:u.L};static#u=this.Boolean={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0};static#m=this.Boolean2={width:100,sortable:!0,cellClass:"no-outline",filter:t.y};static#h=this.Boolean3={headerClass:"dense",width:80,cellClass:"no-outline",cellRenderer:s.J,cellRendererParams:{reverse:!1}};static#_=this.Number={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),...p};static#f=this.TextWidePrimary={flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),...p};static#g=this.TextWide={flex:2,minWidth:250,cellClass:"no-outline",...p};static#C=this.TextWideMin100={flex:1,minWidth:100,...p};static#y=this.TextWideFlex3={flex:3,minWidth:250,cellClass:"no-outline",...p};static#v=this.TextNarrow={flex:1,minWidth:150,cellClass:"no-outline",...p};static#T=this.TextWideActionClass={flex:2,minWidth:250,cellClass:"primary-action no-padding no-outline".split(" "),...p};static idFieldParamsTooltipGetter(g){return{tooltipGetter:r=>`ID: ${r.Id}\nGUID: ${r[g||"Guid"]}`}}}},1960:(F,v,n)=>{n.d(v,{y:()=>u});var t=n(4456),f=n(3804),s=n(7580);let u=(()=>{class l{constructor(){this.filter=""}agInit(p){this.filterParams=p}isFilterActive(){return""!==this.filter}doesFilterPass(p){const C=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:p.node.data,getValue:g=>p.node.data[g],node:p.node});return null!=C&&C.toString()===this.filter}getModel(){if(this.isFilterActive())return{filterType:"boolean",filter:this.filter}}setModel(p){this.filter=p?p.filter:""}afterGuiAttached(p){}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(I){return new(I||l)};static#e=this.\u0275cmp=s.VBU({type:l,selectors:[["app-boolean-filter"]],standalone:!0,features:[s.aNF],decls:7,vars:1,consts:[[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(I,C){1&I&&(s.j41(0,"mat-radio-group",0),s.mxI("ngModelChange",function(m){return s.DH7(C.filter,m)||(C.filter=m),m}),s.bIt("ngModelChange",function(){return C.filterChanged()}),s.j41(1,"mat-radio-button",1),s.EFF(2,"All"),s.k0s(),s.j41(3,"mat-radio-button",2),s.EFF(4,"True"),s.k0s(),s.j41(5,"mat-radio-button",3),s.EFF(6,"False"),s.k0s()()),2&I&&s.R50("ngModel",C.filter)},dependencies:[t.YN,t.BC,t.vS,f.Wk,f.VT,f._g],styles:[".mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return l})()},3758:(F,v,n)=>{n.d(v,{F:()=>m});var t=n(316),f=n(5944),s=n(7580);const u=["*"],l=r=>({"hint-box__short":r});function c(r,h){1&r&&s.eu8(0)}function p(r,h){if(1&r&&(s.j41(0,"mat-hint"),s.DNE(1,c,1,0,"ng-container",2),s.k0s()),2&r){s.XpG();const _=s.sdS(4);s.R7$(),s.Y8G("ngTemplateOutlet",_)}}function I(r,h){1&r&&s.eu8(0)}function C(r,h){if(1&r&&(s.j41(0,"mat-error"),s.DNE(1,I,1,0,"ng-container",2),s.k0s()),2&r){s.XpG();const _=s.sdS(4);s.R7$(),s.Y8G("ngTemplateOutlet",_)}}function g(r,h){1&r&&s.SdG(0)}let m=(()=>{class r{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(y){return new(y||r)};static#e=this.\u0275cmp=s.VBU({type:r,selectors:[["app-field-hint"]],inputs:{isError:"isError"},standalone:!0,features:[s.aNF],ngContentSelectors:u,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(y,D){if(1&y){const P=s.RV6();s.NAR(),s.j41(0,"div",1),s.bIt("click",function(){return s.eBV(P),s.Njj(D.toggleIsShort())}),s.DNE(1,p,2,1)(2,C,2,1),s.k0s(),s.DNE(3,g,1,0,"ng-template",null,0,s.C5r)}if(2&y){let P;s.Y8G("ngClass",s.eq3(2,l,D.isShort)),s.R7$(),s.vxM(1,!1===(P=D.isError)?1:!0===P?2:-1)}},dependencies:[f.RG,f.MV,f.TL,t.YU,t.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return r})()},6378:(F,v,n)=>{n.d(v,{L:()=>I});var t=n(519),f=n(316),s=n(3840),u=n(7896),l=n(7580),c=n(3347);const p=(C,g)=>({"align-start":C,"align-end":g});let I=(()=>{class C{constructor(m){this.snackBar=m}agInit(m){this.id=m.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=m.tooltipGetter(m.data)}refresh(m){return!0}copy(){(0,t.l)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(r){return new(r||C)(l.rXU(c.UG))};static#e=this.\u0275cmp=l.VBU({type:C,selectors:[["app-id-field"]],standalone:!0,features:[l.aNF],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"click","tippy","ngClass"],[1,"id"],[1,"icon"]],template:function(r,h){1&r&&(l.j41(0,"div",0),l.bIt("click",function(){return h.copy()}),l.j41(1,"span",1),l.EFF(2),l.k0s(),l.j41(3,"mat-icon",2),l.EFF(4,"file_copy"),l.k0s()()),2&r&&(l.Y8G("tippy",h.tooltip)("ngClass",l.l_i(3,p,"start"===h.align,"end"===h.align)),l.R7$(2),l.JRh(h.id))},dependencies:[f.YU,s.m_,s.An,u.e],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}return C})()},5858:(F,v,n)=>{n.d(v,{O:()=>t});const t="DROPDOWN_INSERT_VALUE"},9333:(F,v,n)=>{n.d(v,{c:()=>s});var t=n(4435),f=n(7580);let s=(()=>{class u{constructor(){this.log=(0,t.T)({ClickStopPropagationDirective:u}),this.log.a("constructor")}onClick(c){this.log.a("onClick",{event:c}),c.stopPropagation(),c.preventDefault()}static#t=this.\u0275fac=function(p){return new(p||u)};static#e=this.\u0275dir=f.FsC({type:u,selectors:[["","appClickStopPropagation",""]],hostBindings:function(p,I){1&p&&f.bIt("click",function(g){return I.onClick(g)})},standalone:!0})}return u})()},5699:(F,v,n)=>{n.d(v,{V:()=>s});var t=n(9431),f=n(7580);let s=(()=>{class u{constructor(c){this.globalConfigService=c}onClick(c){(navigator.platform.match("Mac")?c.metaKey:c.ctrlKey)&&c.shiftKey&&c.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static#t=this.\u0275fac=function(p){return new(p||u)(f.rXU(t.B))};static#e=this.\u0275dir=f.FsC({type:u,selectors:[["","appToggleDebug",""]],hostBindings:function(p,I){1&p&&f.bIt("click",function(g){return I.onClick(g)})},standalone:!0})}return u})()},5959:(F,v,n)=>{n.d(v,{h6:()=>I,zZ:()=>c});var t=n(271),f=n(7693),s=n(6474),u=n(7580);const l="admin/field/",c="admin/field/all",p="admin/field/GetSharedFields";let I=(()=>{class C extends s.D{typeListRetrieve(){return this.http.get(this.apiUrl(l+"DataTypes"),{params:{appid:this.appId}})}getInputTypesList(){return this.http.get(this.apiUrl(l+"InputTypes"),{params:{appid:this.appId}}).pipe((0,t.T)(m=>m.map(h=>({dataType:h.Type.substring(0,h.Type.indexOf("-")),inputType:h.Type,label:h.Label,description:h.Description,isDefault:h.IsDefault,isObsolete:h.IsObsolete,isRecommended:h.IsRecommended,obsoleteMessage:h.ObsoleteMessage,icon:h.IsDefault?"star":h.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(l+"ReservedNames"))}getFields(m){return this.http.get(this.apiUrl(c),{params:{appid:this.appId,staticName:m}}).pipe((0,t.T)(r=>{if(r)for(const h of r){if(!h.Metadata)continue;const _=h.Metadata;_.merged={..._.All,..._[h.Type],..._[h.InputType]}}return r}))}getShareableFields(){return this.http.get(this.apiUrl(p),{params:{appid:this.appId}})}getShareableFieldsFor(m){return this.http.get(this.apiUrl(p),{params:{appid:this.appId,attributeId:m.toString()}})}addInheritedField(m,r,h,_){return this.http.post(this.apiUrl(l+"AddInheritedField"),null,{params:{AppId:this.appId,ContentTypeId:m.toString(),SourceType:r,SourceField:h,name:_}})}share(m,r=!0){return this.http.post(this.apiUrl(l+"Share"),null,{params:{appid:this.appId,attributeId:m.toString(),share:r}})}inherit(m,r){return this.http.post(this.apiUrl(l+"Inherit"),null,{params:{appid:this.appId,attributeId:m.toString(),inheritMetadataOf:r}})}reOrder(m,r){return this.http.post(this.apiUrl(l+"Sort"),null,{params:{appid:this.appId,contentTypeId:r.Id.toString(),order:JSON.stringify(m)}})}setTitle(m,r){return this.http.post(this.apiUrl(f.X+"SetTitle"),null,{params:{appid:this.appId,contentTypeId:r.Id.toString(),attributeId:m.Id.toString()}})}rename(m,r,h){return this.http.post(this.apiUrl(l+"Rename"),null,{params:{appid:this.appId,contentTypeId:r.toString(),attributeId:m.toString(),newName:h}})}delete(m,r){if(m.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(l+"Delete"),{params:{appid:this.appId,contentTypeId:r.Id.toString(),attributeId:m.Id.toString()}})}add(m,r){return this.http.post(this.apiUrl(l+"Add"),null,{params:{AppId:this.appId,ContentTypeId:r.toString(),Id:m.Id.toString(),Type:m.Type,InputType:m.InputType,StaticName:m.StaticName,IsTitle:m.IsTitle.toString(),Index:m.SortOrder.toString()}})}updateInputType(m,r,h){return this.http.post(this.apiUrl(l+"InputType"),null,{params:{appId:this.appId,attributeId:m.toString(),field:r,inputType:h}})}static#t=this.\u0275fac=(()=>{let m;return function(h){return(m||(m=u.xGo(C)))(h||C)}})();static#e=this.\u0275prov=u.jDH({token:C,factory:C.\u0275fac})}return C})()},1726:(F,v,n)=>{n.d(v,{O:()=>t});const t={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},693:(F,v,n)=>{function t(s){return new Promise((u,l)=>{const c=new FileReader;c.readAsDataURL(s),c.onload=()=>{u(c.result.split(",")[1])},c.onerror=p=>{l(p)}})}function f(s){return new Promise((u,l)=>{const c=new FileReader;c.readAsText(s),c.onload=()=>{u(c.result)},c.onerror=p=>{l(p)}})}n.d(v,{d:()=>f,n:()=>t})},8471:(F,v,n)=>{n.d(v,{c:()=>g});var t=n(2159),f=n(1567),s=n(3037),u=n(271),l=n(5057),c=n(4979),p=n(4435),I=n(7580);const C={doOnDialogClosed:!0};let g=(()=>{class m extends c.V{constructor(h,_){super(),this.router=h,this.route=_,this.log=(0,p.T)({DialogRoutingService:m},C)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(h){return this.route.snapshot.paramMap.get(h)}getParams(h){const _=this.route.snapshot.paramMap;return h.reduce((y,D)=>(y[D]=_.get(D),y),{})}getQueryParam(h){return this.route.snapshot.queryParamMap.get(h)}getQueryParams(h){const _=this.route.snapshot.queryParamMap;return h.reduce((y,D)=>(y[D]=_.get(D),y),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(h){const _=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>h())),_.end()}navPath(h,_){return this.router.navigate([h],_)}navRelative(h,_){return this.router.navigate(h,{..._,relativeTo:this.route})}navParentFirstChild(h,_){return this.router.navigate(h,{..._,relativeTo:this.route.parent.firstChild})}childDialogClosed$(){return this.router.events.pipe((0,f.p)(h=>h instanceof t.wF),(0,s.Z)(!!this.route.snapshot.firstChild),(0,u.T)(()=>!!this.route.snapshot.firstChild),(0,l.J)(),(0,f.p)(([h,_])=>h&&!_))}static#t=this.\u0275fac=function(_){return new(_||m)(I.KVO(t.Ix),I.KVO(t.nX))};static#e=this.\u0275prov=I.jDH({token:m,factory:m.\u0275fac})}return m})()},8021:(F,v,n)=>{n.d(v,{A:()=>c,J:()=>l});var t=n(5682),f=n(1817),s=n(271),u=n(2434);function l(p){return(0,t.F)((0,f.F)(),(0,s.T)(p),(0,f.F)())}function c(p){return(0,t.F)((0,f.F)(u.A),(0,s.T)(p),(0,f.F)(u.A))}},3826:(F,v,n)=>{n.d(v,{a:()=>t});class t{static boolEquals(s,u){return s===u}static stringEquals(s,u){return s===u}static valueEquals(s,u){return s===u}static objectsEqual(s,u){if(null==s||null==u)return s===u;const l=s,c=u,p=Object.keys(l),I=Object.keys(c);return p.length===I.length&&p.every(g=>!!c.hasOwnProperty(g)&&l[g]===c[g])}static arraysEqual(s,u){return null==s||null==u?s===u:s.length===u.length&&s.every((c,p)=>s[p]===u[p])}static distinct(s,u,l){return l.indexOf(s)===u}}},6474:(F,v,n)=>{n.d(v,{D:()=>l});var t=n(7580),f=n(4821),s=n(8873),u=n(6443);let l=(()=>{class c{constructor(){this.dnnContext=(0,t.WQX)(f.ob),this.http=(0,t.WQX)(u.Qq),this.context=(0,t.WQX)(s.o)}apiUrl(I){return this.dnnContext.$2sxc.http.apiUrl(I)}get appId(){return this.context.appId.toString()}get zoneId(){return this.context.zoneId.toString()}static#t=this.\u0275fac=function(C){return new(C||c)};static#e=this.\u0275prov=t.jDH({token:c,factory:c.\u0275fac})}return c})()},4839:(F,v,n)=>{n.d(v,{c:()=>c});var t=n(8873),f=n(4435),s=n(7580),u=n(6443);const l={all:!1,getAvailableEntities:!1,getEntities:!1};let c=(()=>{class p{constructor(C,g){this.http=C,this.context=g,this.log=(0,f.T)({QueryService:p},l)}getAvailableEntities(C,g,m,r){this.log.fnIf("getAvailableEntities",{queryUrl:C,params:g,fields:m,entitiesFilter:r});const h=!!g,P=(((g?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(h?`&${g}`:"")+"&$select="+(m??"")).substring(1);return this.http.post(`app/auto/query/${C}?${P}`,{Guids:r})}getEntities({contentTypes:C,itemIds:g,fields:m,log:r}){this.log.fnIf("getEntities",{log:r,contentTypes:C,itemIds:g,fields:m});const _=("&typeNames="+(C?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(g?.join(",")??"")+"&$select="+(m??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${_}`,{})}static#t=this.\u0275fac=function(g){return new(g||p)(s.KVO(u.Qq),s.KVO(t.o))};static#e=this.\u0275prov=s.jDH({token:p,factory:p.\u0275fac})}return p})()},4979:(F,v,n)=>{n.d(v,{V:()=>s});var t=n(7092),f=n(7580);let s=(()=>{class u{constructor(){this.subscriptions=new t.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(p){return new(p||u)};static#e=this.\u0275prov=f.jDH({token:u,factory:u.\u0275fac})}return u})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_content-items_content-items_component_ts-projects_eav-ui_src_app_shar-d0da70.1d62b988dbf635d8.js.map