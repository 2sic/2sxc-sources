"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_permissions_permissions_component_ts"],{1897:(O,g,t)=>{function n(i,_){return _(i)}function h(i,_){return _(i)}t.d(g,{C:()=>n,z:()=>h})},2871:(O,g,t)=>{t.d(g,{J:()=>i});var n=t(3840),h=t(7580);let i=(()=>{class _{constructor(){this.trueIcon="check_circle",this.falseIcon="circle"}agInit(u){let s=u.value;u.reverse&&(s=!s),u.trueIcon&&(this.trueIcon=u.trueIcon),u.falseIcon&&(this.falseIcon=u.falseIcon),this.icon=s?this.trueIcon:this.falseIcon}refresh(u){return!0}static#e=this.\u0275fac=function(s){return new(s||_)};static#t=this.\u0275cmp=h.VBU({type:_,selectors:[["app-rest-api-true-false"]],standalone:!0,features:[h.aNF],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(s,p){1&s&&(h.j41(0,"div",0)(1,"mat-icon"),h.EFF(2),h.k0s()()),2&s&&(h.R7$(2),h.JRh(p.icon))},dependencies:[n.m_,n.An],encapsulation:2})}return _})()},2458:(O,g,t)=>{t.r(g),t.d(g,{PermissionsComponent:()=>I});var n=t(7580),h=t(7941),i=t(2159),_=t(251),e=t(52),u=t(3216),s=t(334),p=t(3840),r=t(5060);let a=(()=>{class C{agInit(f){this.params=f}refresh(f){return!0}deletePermission(){this.params.onDelete(this.params.data)}static#e=this.\u0275fac=function(E){return new(E||C)};static#t=this.\u0275cmp=n.VBU({type:C,selectors:[["app-permissions-actions"]],standalone:!0,features:[n.aNF],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"eav-grid-action-button","highlight",3,"click"]],template:function(E,v){1&E&&(n.j41(0,"div",0)(1,"div",1),n.bIt("click",function(){return v.deletePermission()}),n.j41(2,"mat-icon"),n.EFF(3,"delete"),n.k0s()()())},dependencies:[r.pZ,r.r6,p.m_,p.An]})}return C})();var o=t(4900),l=t(1828),c=t(4175),d=t(7037),m=t(5437),M=t(1897),D=t(8471),P=t(3347),T=t(9841);let I=(()=>{class C{#e;#t;#n;#s;constructor(f,E){this.dialogRef=f,this.snackBar=E,this.gridOptions=this.buildGridOptions(),this.permissions=(0,n.vPA)([]),this.#e=(0,m.d)(o.K),this.#t=(0,m.d)(D.c),this.#n=(0,M.C)(this.#t.getParams(["targetType","keyType","key"]),v=>({targetType:parseInt(v.targetType,10),keyType:v.keyType,key:v.key})),this.#s={[e.YX.metadata.language.targetType]:{PermissionType:"language"}}}ngOnInit(){this.#i(),this.#t.doOnDialogClosed(()=>this.#i())}closeDialog(){this.dialogRef.close()}#i(){this.#e.getAll(this.#n.targetType,this.#n.keyType,this.#n.key).subscribe(f=>{this.permissions.set(f)})}editPermission(f){let E;E=null==f?{items:[{...s.c.newMetadataFromInfo(e.YX.contentTypes.permissions,s.c.constructMetadataInfo(this.#n.targetType,this.#n.keyType,this.#n.key)),...this.#s[this.#n.targetType]&&{Prefill:this.#s[this.#n.targetType]}}]}:{items:[s.c.editId(f.Id)]};const v=(0,u.s)(E);this.#t.navRelative([`edit/${v}`])}deletePermission(f){confirm(`Delete '${f.Title}' (${f.Id})?`)&&(this.snackBar.open("Deleting..."),this.#e.delete(f.Id).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.#i()}))}buildGridOptions(){return{..._.C,columnDefs:[{...l.r.Id,cellRendererParams:l.r.idFieldParamsTooltipGetter()},{...l.r.TextWide,headerName:"Name",field:"Title",sort:"asc",onCellClicked:E=>{this.editPermission(E.data)}},{...l.r.TextWide,field:"Identity"},{...l.r.TextWide,field:"Condition"},{...l.r.Character,field:"Grant"},{...l.r.ActionsPinnedRight1,cellRenderer:a,cellRendererParams:{onDelete:v=>this.deletePermission(v)}}]}}static#a=this.\u0275fac=function(E){return new(E||C)(n.rXU(h.CP),n.rXU(P.UG))};static#o=this.\u0275cmp=n.VBU({type:C,selectors:[["app-permissions"]],standalone:!0,features:[n.aNF],decls:15,vars:2,consts:[[1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(E,v){1&E&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2),n.EFF(3,"Permissions"),n.k0s(),n.j41(4,"button",3),n.bIt("click",function(){return v.closeDialog()}),n.j41(5,"mat-icon"),n.EFF(6,"close"),n.k0s()()(),n.j41(7,"div",4),n.nrm(8,"router-outlet"),n.j41(9,"div",5),n.nrm(10,"ag-grid-angular",6),n.k0s(),n.j41(11,"mat-dialog-actions",7)(12,"button",8),n.bIt("click",function(){return v.editPermission(null)}),n.j41(13,"mat-icon"),n.EFF(14,"add"),n.k0s()()()()()),2&E&&(n.R7$(10),n.Y8G("rowData",v.permissions())("gridOptions",v.gridOptions))},dependencies:[c.Hl,c.iY,c.Sr,p.m_,p.An,i.n3,h.E7,d.p,T.xs]})}return C})()},401:(O,g,t)=>{t.d(g,{T:()=>u});var n=t(8873),h=t(7580),i=t(6443),_=t(4821);let u=(()=>{class s{constructor(r,a,o){this.http=r,this.context=a,this.dnnContext=o}getMetadata(r,a,o,l){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:{appId:this.context.appId.toString(),targetType:r.toString(),keyType:a,key:o.toString(),...l&&{contentType:l}}})}static#e=this.\u0275fac=function(a){return new(a||s)(h.KVO(i.Qq),h.KVO(n.o),h.KVO(_.ob))};static#t=this.\u0275prov=h.jDH({token:s,factory:s.\u0275fac})}return s})()},4900:(O,g,t)=>{t.d(g,{K:()=>s});var n=t(271),h=t(6817),i=t(52),_=t(401),e=t(5437),u=t(7580);let s=(()=>{class p{constructor(){this.metadataService=(0,e.d)(_.T),this.entitiesService=(0,e.d)(h.R)}getAll(a,o,l){return this.metadataService.getMetadata(a,o,l,i.YX.contentTypes.permissions).pipe((0,n.T)(c=>c.Items))}delete(a){return this.entitiesService.delete(i.YX.contentTypes.permissions,a,!1)}static#e=this.\u0275fac=function(o){return new(o||p)};static#t=this.\u0275prov=u.jDH({token:p,factory:p.\u0275fac})}return p})()},8991:(O,g,t)=>{t.d(g,{N:()=>o});const n={states:{true:{tooltip:"true/on",icon:"radio_button_checked"},false:{tooltip:"false/off",icon:"radio_button_unchecked"}}};var h=t(7896),i=t(3840),_=t(316),e=t(7580);const u=l=>({clickable:l});function s(l,c){1&l&&e.eu8(0)}function p(l,c){if(1&l&&(e.j41(0,"a",2),e.DNE(1,s,1,0,"ng-container",3),e.k0s()),2&l){const d=e.XpG(),m=e.sdS(4);e.Y8G("href",d.data.url,e.B4B),e.R7$(),e.Y8G("ngTemplateOutlet",m)}}function r(l,c){if(1&l&&(e.j41(0,"div",4)(1,"mat-icon"),e.EFF(2),e.k0s()()),2&l){const d=e.XpG();e.Y8G("ngClass",e.eq3(3,u,d.data.clickable))("tippy",d.data.tooltip),e.R7$(2),e.JRh(d.data.icon)}}function a(l,c){if(1&l&&(e.j41(0,"div",4)(1,"mat-icon"),e.EFF(2),e.k0s()()),2&l){const d=e.XpG();e.Y8G("ngClass",e.eq3(3,u,d.data.clickable))("tippy",d.data.tooltip),e.R7$(2),e.JRh(d.data.icon)}}let o=(()=>{class l{agInit(d){this.value=d.value,this.allSettings=d.settings?.(d.data)??n;const m=this.allSettings.states[this.value?"true":"false"];this.data={...m,url:m.url??m.getUrl?.(d.data)}}refresh(d){return!0}static#e=this.\u0275fac=function(m){return new(m||l)};static#t=this.\u0275cmp=e.VBU({type:l,selectors:[["app-ag-bool-icon-renderer"]],standalone:!0,features:[e.aNF],decls:5,vars:1,consts:[["showIcon",""],[1,"icon-container"],["target","_blank",3,"href"],[4,"ngTemplateOutlet"],[1,"icon-cell","icon",3,"ngClass","tippy"]],template:function(m,M){1&m&&(e.j41(0,"div",1),e.DNE(1,p,2,2,"a",2)(2,r,3,5),e.k0s(),e.DNE(3,a,3,5,"ng-template",null,0,e.C5r)),2&m&&(e.R7$(),e.vxM(1,M.data.url?1:2))},dependencies:[h.e,i.m_,i.An,_.YU],encapsulation:2})}return l})()},1828:(O,g,t)=>{t.d(g,{r:()=>p});var n=t(1960),h=t(8991),i=t(2871),_=t(6378);const e="secondary-action no-padding".split(" "),u={cellClass:e,pinned:"right"},s={sortable:!0,filter:"agTextColumnFilter"};class p{static#e=this.ActionsPinnedRight1={width:42,...u};static#t=this.ActionsPinnedRight3={width:122,...u};static#n=this.ActionsPinnedRight4={width:162,...u};static#s=this.ActionsPinnedRight5={width:202,...u};static#i=this.ActionsPinnedRight6={width:82,...u};static#a=this.ActionsPinnedRight7={width:62,cellClass:e+" no-outline",pinned:"right"};static#o=this.IconShow={headerName:"Show",width:70,headerClass:"dense",cellClass:"icons no-outline".split(" "),sortable:!0,filter:n.y,valueGetter:a=>!a.data.IsHidden,cellRenderer:h.N};static#r=this.Items={width:102,headerClass:"dense",cellClass:e,sortable:!0,filter:"agNumberColumnFilter"};static#l=this.Fields={width:94,headerClass:"dense",cellClass:e,sortable:!0,filter:"agNumberColumnFilter"};static#c=this.Character={width:70,headerClass:"dense",cellClass:"no-outline",...s};static#d=this.Id={headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#h=this.IdWithDefaultRenderer={...p.Id,cellRenderer:_.L};static#_=this.Boolean={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0};static#u=this.Boolean2={width:100,sortable:!0,cellClass:"no-outline",filter:n.y};static#p=this.Boolean3={headerClass:"dense",width:80,cellClass:"no-outline",cellRenderer:i.J,cellRendererParams:{reverse:!1}};static#g=this.Number={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),...s};static#m=this.TextWidePrimary={flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),...s};static#f=this.TextWide={flex:2,minWidth:250,cellClass:"no-outline",...s};static#E=this.TextWideMin100={flex:1,minWidth:100,...s};static#v=this.TextWideFlex3={flex:3,minWidth:250,cellClass:"no-outline",...s};static#P=this.TextNarrow={flex:1,minWidth:150,cellClass:"no-outline",...s};static#C=this.TextWideActionClass={flex:2,minWidth:250,cellClass:"primary-action no-padding no-outline".split(" "),...s};static idFieldParamsTooltipGetter(a){return{tooltipGetter:l=>`ID: ${l.Id}\nGUID: ${l[a||"Guid"]}`}}}},1960:(O,g,t)=>{t.d(g,{y:()=>_});var n=t(4456),h=t(3804),i=t(7580);let _=(()=>{class e{constructor(){this.filter=""}agInit(s){this.filterParams=s}isFilterActive(){return""!==this.filter}doesFilterPass(s){const r=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:s.node.data,getValue:a=>s.node.data[a],node:s.node});return null!=r&&r.toString()===this.filter}getModel(){if(this.isFilterActive())return{filterType:"boolean",filter:this.filter}}setModel(s){this.filter=s?s.filter:""}afterGuiAttached(s){}filterChanged(){this.filterParams.filterChangedCallback()}static#e=this.\u0275fac=function(p){return new(p||e)};static#t=this.\u0275cmp=i.VBU({type:e,selectors:[["app-boolean-filter"]],standalone:!0,features:[i.aNF],decls:7,vars:1,consts:[[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(p,r){1&p&&(i.j41(0,"mat-radio-group",0),i.mxI("ngModelChange",function(o){return i.DH7(r.filter,o)||(r.filter=o),o}),i.bIt("ngModelChange",function(){return r.filterChanged()}),i.j41(1,"mat-radio-button",1),i.EFF(2,"All"),i.k0s(),i.j41(3,"mat-radio-button",2),i.EFF(4,"True"),i.k0s(),i.j41(5,"mat-radio-button",3),i.EFF(6,"False"),i.k0s()()),2&p&&i.R50("ngModel",r.filter)},dependencies:[n.YN,n.BC,n.vS,h.Wk,h.VT,h._g],styles:[".mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return e})()},6378:(O,g,t)=>{t.d(g,{L:()=>p});var n=t(519),h=t(316),i=t(3840),_=t(7896),e=t(7580),u=t(3347);const s=(r,a)=>({"align-start":r,"align-end":a});let p=(()=>{class r{constructor(o){this.snackBar=o}agInit(o){this.id=o.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=o.tooltipGetter(o.data)}refresh(o){return!0}copy(){(0,n.l)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#e=this.\u0275fac=function(l){return new(l||r)(e.rXU(u.UG))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-id-field"]],standalone:!0,features:[e.aNF],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"click","tippy","ngClass"],[1,"id"],[1,"icon"]],template:function(l,c){1&l&&(e.j41(0,"div",0),e.bIt("click",function(){return c.copy()}),e.j41(1,"span",1),e.EFF(2),e.k0s(),e.j41(3,"mat-icon",2),e.EFF(4,"file_copy"),e.k0s()()),2&l&&(e.Y8G("tippy",c.tooltip)("ngClass",e.l_i(3,s,"start"===c.align,"end"===c.align)),e.R7$(2),e.JRh(c.id))},dependencies:[h.YU,i.m_,i.An,_.e],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}return r})()},8471:(O,g,t)=>{t.d(g,{c:()=>a});var n=t(2159),h=t(1567),i=t(3037),_=t(271),e=t(5057),u=t(4979),s=t(4435),p=t(7580);const r={doOnDialogClosed:!0};let a=(()=>{class o extends u.V{constructor(c,d){super(),this.router=c,this.route=d,this.log=(0,s.T)({DialogRoutingService:o},r)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(c){return this.route.snapshot.paramMap.get(c)}getParams(c){const d=this.route.snapshot.paramMap;return c.reduce((m,M)=>(m[M]=d.get(M),m),{})}getQueryParam(c){return this.route.snapshot.queryParamMap.get(c)}getQueryParams(c){const d=this.route.snapshot.queryParamMap;return c.reduce((m,M)=>(m[M]=d.get(M),m),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(c){const d=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>c())),d.end()}navPath(c,d){return this.router.navigate([c],d)}navRelative(c,d){return this.router.navigate(c,{...d,relativeTo:this.route})}navParentFirstChild(c,d){return this.router.navigate(c,{...d,relativeTo:this.route.parent.firstChild})}childDialogClosed$(){return this.router.events.pipe((0,h.p)(c=>c instanceof n.wF),(0,i.Z)(!!this.route.snapshot.firstChild),(0,_.T)(()=>!!this.route.snapshot.firstChild),(0,e.J)(),(0,h.p)(([c,d])=>c&&!d))}static#e=this.\u0275fac=function(d){return new(d||o)(p.KVO(n.Ix),p.KVO(n.nX))};static#t=this.\u0275prov=p.jDH({token:o,factory:o.\u0275fac})}return o})()},6817:(O,g,t)=>{t.d(g,{R:()=>u});var n=t(8873),h=t(9234),i=t(7580),_=t(6443),e=t(4821);let u=(()=>{class s{constructor(r,a,o){this.http=r,this.context=a,this.dnnContext=o}create(r,a){return this.http.post(`app/auto/data/${r}`,a,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}update(r,a,o){return this.http.post(`app/auto/data/${r}/${a}`,o,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}delete(r,a,o){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(h.gb+"delete"),{params:{contentType:r,id:a.toString(),appId:this.context.appId.toString(),force:o.toString()}})}static#e=this.\u0275fac=function(a){return new(a||s)(i.KVO(_.Qq),i.KVO(n.o),i.KVO(e.ob))};static#t=this.\u0275prov=i.jDH({token:s,factory:s.\u0275fac})}return s})()},9234:(O,g,t)=>{t.d(g,{Gg:()=>c,Tr:()=>d,gb:()=>l});var n=t(1567),h=t(6647),i=t(6301),_=t(271),e=t(4435),u=t(4839),s=t(5437),p=t(7580),r=t(6443),a=t(4821);const o={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},l="admin/entity/",c="admin/entity/list";let d=(()=>{class m{constructor(D,P){this.http=D,this.dnnContext=P,this.log=(0,e.T)({EntityService:m},o),this.queryService=(0,s.d)(u.c)}getEntities$(D){return this.log.fnIf("getEntities"),D.pipe((0,n.p)(P=>null!=P),(0,h.n)(P=>this.getAvailableEntities(P.contentTypeName).pipe((0,i.t)(1))))}getAvailableEntities(D,P){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[D],itemIds:P,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,_.T)(I=>I.Default))}delete(D,P,T,I,C,y){return this.log.fnIf("delete",{appId:D,contentType:P,entityId:T,force:I,parentId:C,parent}),this.http.delete(this.dnnContext.$2sxc.http.apiUrl(l+"delete"),{params:{contentType:P,id:T.toString(),appId:D,force:I.toString(),...C&&{parentId:C.toString()},...C&&y&&{parentField:y}}})}static#e=this.\u0275fac=function(P){return new(P||m)(p.KVO(r.Qq),p.KVO(a.ob))};static#t=this.\u0275prov=p.jDH({token:m,factory:m.\u0275fac})}return m})()},4839:(O,g,t)=>{t.d(g,{c:()=>u});var n=t(8873),h=t(4435),i=t(7580),_=t(6443);const e={all:!1,getAvailableEntities:!1,getEntities:!1};let u=(()=>{class s{constructor(r,a){this.http=r,this.context=a,this.log=(0,h.T)({QueryService:s},e)}getAvailableEntities(r,a,o,l){this.log.fnIf("getAvailableEntities",{queryUrl:r,params:a,fields:o,entitiesFilter:l});const c=!!a,D=(((a?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(c?`&${a}`:"")+"&$select="+(o??"")).substring(1);return this.http.post(`app/auto/query/${r}?${D}`,{Guids:l})}getEntities({contentTypes:r,itemIds:a,fields:o,log:l}){this.log.fnIf("getEntities",{log:l,contentTypes:r,itemIds:a,fields:o});const d=("&typeNames="+(r?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(a?.join(",")??"")+"&$select="+(o??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${d}`,{})}static#e=this.\u0275fac=function(a){return new(a||s)(i.KVO(_.Qq),i.KVO(n.o))};static#t=this.\u0275prov=i.jDH({token:s,factory:s.\u0275fac})}return s})()},4979:(O,g,t)=>{t.d(g,{V:()=>i});var n=t(7092),h=t(7580);let i=(()=>{class _{constructor(){this.subscriptions=new n.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||_)};static#t=this.\u0275prov=h.jDH({token:_,factory:_.\u0275fac})}return _})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/default-projects_eav-ui_src_app_permissions_permissions_component_ts.65d641c823d04374.js.map