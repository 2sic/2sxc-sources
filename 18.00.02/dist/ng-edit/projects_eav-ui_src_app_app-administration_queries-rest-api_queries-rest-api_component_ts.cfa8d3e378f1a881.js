"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_queries-rest-api_queries-rest-api_component_ts"],{3960:(g,p,t)=>{t.r(p),t.d(p,{QueriesRestApiComponent:()=>m});var E=t(316),r=t(4456),l=t(4175),u=t(3777),o=t(3840),n=t(5175),a=t(5445),M=t(5797),P=t(52),v=t(2159),D=t(5437),h=t(7037),A=t(8471),e=t(7580),i=t(5944),C=t(5060);function R(c,_){if(1&c&&(e.j41(0,"mat-option",3),e.EFF(1),e.k0s()),2&c){const s=_.$implicit;e.Y8G("value",s.Guid),e.R7$(),e.SpI(" ",s.Name," ")}}function T(c,_){1&c&&e.Z7z(0,R,2,2,"mat-option",3,e.fX1),2&c&&e.Dyx(_.sort())}let m=(()=>{class c{#e;#t;constructor(s){this.fb=s,this.#e=(0,D.d)(a.xR),this.#t=(0,D.d)(A.c),this.queryTypes$=new M.t(void 0)}ngOnInit(){this.fetchQueries(),this.queryTypeForm=this.fb.group({queryType:[""]})}fetchQueries(){this.#e.getAll(P.YX.contentTypes.query).subscribe(s=>{this.queryTypes$.next(s);const d=this.#t.url.split("/"),I=d[d.length-1],O=s.find(y=>y.Guid===I);O&&this.queryTypeForm.get("queryType").setValue(O.Guid)})}openRestApi(s){s&&this.#t.navParentFirstChild([`${s}`])}static#n=this.\u0275fac=function(d){return new(d||c)(e.rXU(r.ok))};static#s=this.\u0275cmp=e.VBU({type:c,selectors:[["app-web-api-rest-api"]],standalone:!0,features:[e.aNF],decls:8,vars:4,consts:[[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","queryType",3,"valueChange"],[3,"value"]],template:function(d,I){if(1&d&&(e.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),e.EFF(3,"Query"),e.k0s(),e.j41(4,"mat-select",2),e.bIt("valueChange",function(y){return I.openRestApi(y)}),e.DNE(5,T,2,0),e.nI1(6,"async"),e.k0s()()(),e.nrm(7,"router-outlet")),2&d){let O;e.Y8G("formGroup",I.queryTypeForm),e.R7$(5),e.vxM(5,(O=e.bMT(6,2,I.queryTypes$))?5:-1,O)}},dependencies:[n.Ve,i.rl,i.nJ,n.VO,C.wT,l.Hl,u.Hu,o.m_,r.X1,r.qT,r.BC,r.cb,r.j4,r.JD,E.Jj,v.n3,h.p]})}return c})()},5445:(g,p,t)=>{t.d(p,{Cu:()=>n.Cu,JL:()=>n.JL,Mk:()=>n.Mk,ei:()=>n.ei,gs:()=>r.g,tn:()=>E.t,vN:()=>n.vN,xR:()=>n.xR,y0:()=>a.y});var E=t(6163),r=t(7693),n=(t(1475),t(320),t(8624),t(6460)),a=t(2570)},6460:(g,p,t)=>{t.d(p,{Cu:()=>i,JL:()=>C,Mk:()=>A,ei:()=>e,vN:()=>R,xR:()=>T});var E=t(4600),r=t(6647),l=t(271),u=t(693),o=t(8873),n=t(9234),a=t(7580),M=t(6443),P=t(4821);const A="admin/query/Run",e="admin/query/DebugStream",i="admin/query/Save",C="admin/query/Get",R="admin/query/DataSources";let T=(()=>{class m{constructor(_,s,d){this.http=_,this.context=s,this.dnnContext=d}getAll(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(n.Gg),{params:{appId:this.context.appId.toString(),contentType:_}})}importQuery(_){return(0,E.H)((0,u.n)(_)).pipe((0,r.n)(s=>this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:this.context.appId.toString(),ContentBase64:s})),(0,l.T)(s=>({Success:s,Messages:[]})))}clonePipeline(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:_.toString(),appId:this.context.appId.toString()}})}delete(_){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:_.toString()}})}static#e=this.\u0275fac=function(s){return new(s||m)(a.KVO(M.Qq),a.KVO(o.o),a.KVO(P.ob))};static#t=this.\u0275prov=a.jDH({token:m,factory:m.\u0275fac})}return m})()},2570:(g,p,t)=>{t.d(p,{y:()=>D});var E=t(8873),r=t(7580),l=t(6443),u=t(4821);const o="admin/view/",n=o+"all",a=o+"delete",M=o+"import",P=o+"polymorphism",v=o+"usage";let D=(()=>{class h{constructor(e,i,C){this.http=e,this.context=i,this.dnnContext=C}getAll(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(n),{params:{appId:this.context.appId.toString()}})}delete(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(a),{params:{appId:this.context.appId.toString(),Id:e.toString()}})}import(e){const i=new FormData;return i.append("File",e),this.http.post(this.dnnContext.$2sxc.http.apiUrl(M),i,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}export(e){const i=this.dnnContext.$2sxc.http.apiUrl(o+"json")+"?appId="+this.context.appId+"&viewId="+e;window.open(i,"_blank","")}getPolymorphism(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(P),{params:{appId:this.context.appId.toString()}})}getUsage(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(v),{params:{appId:this.context.appId.toString(),guid:e}})}static#e=this.\u0275fac=function(i){return new(i||h)(r.KVO(l.Qq),r.KVO(E.o),r.KVO(u.ob))};static#t=this.\u0275prov=r.jDH({token:h,factory:h.\u0275fac})}return h})()},693:(g,p,t)=>{function E(l){return new Promise((u,o)=>{const n=new FileReader;n.readAsDataURL(l),n.onload=()=>{u(n.result.split(",")[1])},n.onerror=a=>{o(a)}})}function r(l){return new Promise((u,o)=>{const n=new FileReader;n.readAsText(l),n.onload=()=>{u(n.result)},n.onerror=a=>{o(a)}})}t.d(p,{d:()=>r,n:()=>E})}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_app-administration_queries-rest-api_queries-rest-api_component_ts.cfa8d3e378f1a881.js.map