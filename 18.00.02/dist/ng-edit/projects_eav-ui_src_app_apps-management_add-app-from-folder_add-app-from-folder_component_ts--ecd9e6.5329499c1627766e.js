"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--ecd9e6"],{8242:(P,u,n)=>{n.r(u),n.d(u,{AddAppFromFolderComponent:()=>$});var t=n(7580),x=n(7941),_=n(4205),E=n(3037),d=n(6647),A=n(1318),C=n(9452),F=n(1870),e=n(271),c=n(8136),T=n(251),m=n(9001),f=n(3583),g=n(3840),r=n(7896);let p=(()=>{class a{agInit(o){this.name=o.value,this.tooltip=o.tooltipGetter(o.data)}refresh(o){return!0}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-app-name-show"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"mat-icon",1),t.EFF(4,"info"),t.k0s()()),2&i&&(t.R7$(2),t.JRh(s.name),t.R7$(),t.Y8G("tippy",s.tooltip))},dependencies:[g.m_,g.An,r.e],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}return a})(),l=(()=>{class a{agInit(o){this.params=o}refresh(o){return!0}onChange(o){this.params.onChange(this.params.data,o.currentTarget.checked)}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-checkbox-cell"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"change","disabled","checked"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"input",1),t.bIt("change",function(W){return s.onChange(W)}),t.k0s()()),2&i&&(t.R7$(),t.Y8G("disabled",s.params.isDisabled)("checked",s.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}return a})();var h=n(316),v=n(4175),O=n(5469),D=n(7037),I=n(5437),R=n(3347),j=n(9841);function B(a,y){1&a&&(t.j41(0,"p"),t.EFF(1," Nothing to show. All apps in the 2sxc folder are already installed. "),t.k0s())}function S(a,y){if(1&a&&(t.j41(0,"div"),t.nrm(1,"ag-grid-angular",8),t.k0s()),2&a){const o=t.XpG(),i=t.XpG();t.R7$(),t.Y8G("rowData",o.pendingApps)("gridOptions",i.gridOptions)}}function U(a,y){if(1&a){const o=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Add App from Folder"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"app-feature-text-info",4),t.j41(6,"p"),t.EFF(7," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),t.k0s(),t.DNE(8,B,2,0,"p")(9,S,2,2,"div"),t.k0s(),t.j41(10,"mat-dialog-actions",5)(11,"button",6),t.bIt("click",function(){t.eBV(o);const s=t.XpG();return t.Njj(s.closeDialog())}),t.EFF(12," Cancel "),t.k0s(),t.j41(13,"button",7),t.bIt("click",function(){t.eBV(o);const s=t.XpG();return t.Njj(s.install())}),t.EFF(14," Install "),t.k0s()()()}if(2&a){const o=y,i=t.XpG();t.R7$(5),t.Y8G("featureNameId","AppSyncWithSiteFiles"),t.R7$(3),t.vxM(8,0==(null==o.pendingApps?null:o.pendingApps.length)?8:-1),t.R7$(),t.vxM(9,(null==o.pendingApps?null:o.pendingApps.length)>0?9:-1),t.R7$(4),t.Y8G("disabled",0===i.pendingApps.length||i.installing)}}let $=(()=>{class a{constructor(o,i){this.dialogRef=o,this.snackBar=i,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.pendingApps=[],this.installing=!1,this.refreshApps$=new _.B,this.features=(0,t.WQX)(m.D),this.isAddFromFolderEnabled=this.features.isEnabled(c.T.AppSyncWithSiteFiles),this.appsListService=(0,I.d)(f.U)}ngOnInit(){this.viewModel$=this.refreshApps$.pipe((0,E.Z)(void 0),(0,d.n)(()=>this.appsListService.getPendingApps().pipe((0,A.W)(()=>(0,C.of)(void 0)))),(0,F.u)(),(0,e.T)(o=>({pendingApps:o})))}ngOnDestroy(){this.refreshApps$.complete()}closeDialog(){this.dialogRef.close()}onChange(o,i){i?this.pendingApps.push(o):this.pendingApps.splice(this.pendingApps.indexOf(o),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...T.C,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:l,cellRendererParams:()=>({isDisabled:!this.isAddFromFolderEnabled,onChange:(s,M)=>this.onChange(s,M)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:p,cellRendererParams:{tooltipGetter:s=>`Server folder: ${s.ServerFolder}\nFolder: ${s.Folder}\nVersion: ${s.Version}\nDescription: ${s.Description}`}}]}}static#t=this.\u0275fac=function(i){return new(i||a)(t.rXU(x.CP),t.rXU(R.UG))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(i,s){2&i&&t.Mr5("className",s.hostClass)},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(i,s){if(1&i&&(t.DNE(0,U,15,4,"div",0),t.nI1(1,"async")),2&i){let M;t.vxM(0,(M=t.bMT(1,1,s.viewModel$))?0:-1,M)}},dependencies:[x.E7,v.Hl,v.$z,h.Jj,O.L,D.p,j.xs],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}return a})()},8136:(P,u,n)=>{n.d(u,{T:()=>t});const t={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement",AppExportAssetsAdvanced:"AppExportAssetsAdvanced"}},5469:(P,u,n)=>{n.d(u,{L:()=>g});var t=n(5541),x=n(5797),_=n(9999),E=n(271),d=n(852),A=n(316),C=n(3840),F=n(7896),e=n(7580);function c(r,p){if(1&r){const l=e.RV6();e.j41(0,"div",2),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(l);const v=e.XpG(2);return e.Njj(v.openDialog())}),e.j41(2,"mat-icon"),e.EFF(3),e.k0s(),e.j41(4,"div",3)(5,"div",4),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"div",5),e.EFF(9),e.nI1(10,"translate"),e.k0s()()()}if(2&r){const l=e.XpG();e.Y8G("tippy",e.i5U(1,7,"Features.Tooltip",l.feature)),e.R7$(2),e.ZvI("icon icon-",l.icon,""),e.R7$(),e.JRh(l.icon),e.R7$(3),e.JRh(e.bMT(7,10,"Features.FeatureNotActivated")),e.R7$(3),e.JRh(e.bMT(10,12,"Features.ClickToFindOutMore"))}}function T(r,p){1&r&&e.DNE(0,c,11,14,"div",1),2&r&&e.vxM(0,p.show?0:-1)}function m(r,p){1&r&&(e.j41(0,"div"),e.EFF(1,"loading..."),e.k0s())}function f(r,p){1&r&&(e.j41(0,"div"),e.EFF(1,"loading..."),e.k0s())}let g=(()=>{class r extends t.x{set asInfo(l){this.asInfo$.next(l)}constructor(){super(),this.asInfo$=new x.t(!1),this.viewModel$=(0,_.z)([this.feature$,this.asInfo$,this.show$]).pipe((0,E.T)(([l,h,v])=>({feature:l,icon:h?"info":"warning",show:v})))}static#t=this.\u0275fac=function(h){return new(h||r)};static#e=this.\u0275cmp=e.VBU({type:r,selectors:[["app-feature-text-info"]],inputs:{asInfo:"asInfo"},standalone:!0,features:[e.Vt3,e.aNF],decls:5,vars:3,consts:[["loading",""],[1,"feature-text-info",3,"tippy"],[1,"feature-text-info",3,"click","tippy"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(h,v){if(1&h&&(e.DNE(0,T,1,1),e.nI1(1,"async"),e.DNE(2,m,2,0)(3,f,2,0,"ng-template",null,0,e.C5r)),2&h){let O;e.vxM(0,(O=e.bMT(1,1,v.viewModel$))?0:2,O)}},dependencies:[C.m_,C.An,A.Jj,d.h,d.D9,F.e],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]})}return r})()},1772:(P,u,n)=>{n.d(u,{I:()=>e,u:()=>F});var t=n(6647),x=n(9452),_=n(3550),E=n(8873),d=n(7580),A=n(6443),C=n(4821);const F="admin/app/";let e=(()=>{class c{constructor(m,f,g){this.http=m,this.context=f,this.dnnContext=g}importApp(m,f,g=!1){const r=new FormData;return r.append("File",m),r.append("Name",f??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(F+"Import"),r,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(p=>{if(g&&p.Messages[0]?.MessageType===_.G1.Warning){const l=prompt(p.Messages[0].Text+" Would you like to install it using another folder name?");if(l)return this.importApp(m,l,!0)}return(0,x.of)(p)}))}static#t=this.\u0275fac=function(f){return new(f||c)(d.KVO(A.Qq),d.KVO(E.o),d.KVO(C.ob))};static#e=this.\u0275prov=d.jDH({token:c,factory:c.\u0275fac})}return c})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--ecd9e6.5329499c1627766e.js.map