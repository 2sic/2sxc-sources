"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_edit_dialog_header_language-switcher_language-switcher_component_ts"],{7913:(x,c,l)=>{l.r(c),l.d(c,{LanguageSwitcherComponent:()=>O});var e=l(7580);class p{constructor(n,t){this.ngZone=n,this.header=t,this.moveThreshold=2,this.stopClick=!1,this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{const s=i=>{this.checkIfMouseMoved(i)};document.addEventListener("mouseup",s,{passive:!0}),this.eventListeners.push({element:document,type:"mouseup",listener:s})})}lngButtonDown(n){this.ngZone.runOutsideAngular(()=>{this.saveInitialPosition(n)})}lngButtonClick(n){this.ngZone.runOutsideAngular(()=>{this.doMove(n)})}stopClickIfMouseMoved(){return this.stopClick}destroy(){this.ngZone.runOutsideAngular(()=>{this.eventListeners.forEach(({element:n,type:t,listener:s})=>{n.removeEventListener(t,s)}),this.eventListeners=null})}saveInitialPosition(n){this.stopClick=!1,this.positionX=n.pageX,this.positionY=n.pageY}checkIfMouseMoved(n){this.positionX&&this.positionY?(this.stopClick=Math.abs(this.positionX+this.positionY-(n.pageX+n.pageY))>this.moveThreshold,this.positionX=null,this.positionY=null):this.stopClick=!1}doMove(n){if(this.stopClick)return;const t=n.target,s=t.getBoundingClientRect().left,i=t.getBoundingClientRect().width,o=this.header.getBoundingClientRect().left,h=this.header.getBoundingClientRect().width;this.header.scrollLeft+=s+i/2-(o+h/2)}}function u(r){return r.substring(0,r.includes("(")?r.indexOf("(")-1:100).toLocaleUpperCase()}class v{constructor(n,t,s){this.ngZone=n,this.header=t,this.areButtonsDisabled=s,this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{const i=this.registerScroll.bind(this);this.header.addEventListener("pointerdown",i,{passive:!0}),this.headerDownListener={element:this.header,type:"pointerdown",listener:i}})}destroy(){this.ngZone.runOutsideAngular(()=>{this.headerDownListener.element.removeEventListener(this.headerDownListener.type,this.headerDownListener.listener),this.headerDownListener=null,this.eventListeners.forEach(({element:n,type:t,listener:s})=>{n.removeEventListener(t,s)}),this.eventListeners=null}),this.ngZone=null,this.header=null,this.areButtonsDisabled=null}registerScroll(n){if(this.areButtonsDisabled()||0!==n.button)return;window.getSelection().removeAllRanges(),this.oldScrollBehavior=getComputedStyle(this.header).getPropertyValue("scroll-behavior"),this.header.style.scrollBehavior="auto",this.positionX=n.pageX;const s=o=>{this.doScroll(o)},i=()=>{this.removeScroll()};document.addEventListener("pointermove",s,{passive:!0}),document.addEventListener("pointerup",i,{passive:!0}),document.addEventListener("pointerleave",i,{passive:!0}),this.eventListeners.push({element:document,type:"pointermove",listener:s},{element:document,type:"pointerup",listener:i},{element:document,type:"pointerleave",listener:i})}removeScroll(){this.header.style.scrollBehavior=this.oldScrollBehavior,this.eventListeners.forEach(({element:n,type:t,listener:s})=>{n.removeEventListener(t,s)}),this.eventListeners.splice(0,this.eventListeners.length)}doScroll(n){const t=n.pageX;t<this.positionX?this.header.scrollLeft+=this.positionX-t:t>this.positionX&&(this.header.scrollLeft+=-(t-this.positionX)),this.positionX=t}}class m{constructor(n,t,s,i){this.ngZone=n,this.header=t,this.leftShadow=s,this.rightShadow=i,this.hidden="hidden",this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{this.calculateShadows();const o=()=>{this.calculateShadows()};this.header.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),this.eventListeners.push({element:this.header,type:"scroll",listener:o},{element:window,type:"resize",listener:o})})}destroy(){this.ngZone.runOutsideAngular(()=>{this.eventListeners.forEach(({element:n,type:t,listener:s})=>{n.removeEventListener(t,s)}),this.eventListeners=null}),this.ngZone=null,this.header=null,this.leftShadow=null,this.rightShadow=null}calculateShadows(){this.maxScrollLeft=this.header.scrollWidth-this.header.clientWidth,0===this.maxScrollLeft?this.hideBoth():0===this.header.scrollLeft?this.hideLeft():this.header.scrollLeft===this.maxScrollLeft?this.hideRight():this.showBoth()}hideBoth(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.add(this.hidden)}hideLeft(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.remove(this.hidden)}hideRight(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.add(this.hidden)}showBoth(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.remove(this.hidden)}}var a=l(852),g=l(4175),w=l(7896),S=l(5506),b=l(8265),L=l(2093),C=l(9977),y=l(3347);const B=["scrollable"],_=["leftShadow"],M=["rightShadow"];function X(r,n){if(1&r){const t=e.RV6();e.j41(0,"button",8),e.bIt("mousedown",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.lngButtonMouseDown(i))})("click",function(i){const o=e.eBV(t).$implicit,h=e.XpG();return e.Njj(h.lngButtonClick(i,o))}),e.EFF(1),e.k0s()}if(2&r){const t=n.$implicit,s=e.XpG();e.Y8G("color",s.current()===t.NameId?"accent":"white")("tippy",t.Culture)("tippyDisabled",s.disabled),e.R7$(),e.SpI(" ",t.buttonText," ")}}let O=(()=>{class r{constructor(t,s,i,o,h,d){this.languageService=t,this.languageInstanceService=s,this.ngZone=i,this.formConfig=o,this.snackBar=h,this.translate=d,this.log=new S.B("LanguageSwitcherComponent",!1),this.current=(0,e.EWP)(()=>this.formConfig.language().current),this.buttons=function f(r){const n=[],t={};return r.forEach(s=>{const i=u(s.Culture);t[i]?t[i]++:t[i]=1}),r.forEach(s=>{const i=u(s.Culture);n.push({...s,buttonText:t[i]>1?`${i} (${s.NameId})`:i})}),n}(this.languageService.getAll())}ngAfterViewInit(){this.showShadowsHelper=new m(this.ngZone,this.headerRef.nativeElement,this.leftShadowRef.nativeElement,this.rightShadowRef.nativeElement),this.mouseScrollHelper=new v(this.ngZone,this.headerRef.nativeElement,this.areButtonsDisabled.bind(this)),this.centerSelectedHelper=new p(this.ngZone,this.headerRef.nativeElement)}ngOnDestroy(){this.centerSelectedHelper.destroy(),this.mouseScrollHelper.destroy(),this.showShadowsHelper.destroy()}lngButtonMouseDown(t){this.centerSelectedHelper.lngButtonDown(t)}lngButtonClick(t,s){const i=this.log.fn("lngButtonClick");if(this.disabled)return this.snackBar.open(this.translate.instant("Message.CantSwitchLanguage"),null,{duration:3e3,verticalPosition:"top"}),i.end("disabled");this.centerSelectedHelper.lngButtonClick(t),this.centerSelectedHelper.stopClickIfMouseMoved()||this.languageInstanceService.setCurrent(this.formConfig.config.formId,s.NameId)}areButtonsDisabled(){return this.disabled}static#e=this.\u0275fac=function(s){return new(s||r)(e.rXU(C.g),e.rXU(L.A),e.rXU(e.SKi),e.rXU(b.S),e.rXU(y.UG),e.rXU(a.c$))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-language-switcher"]],viewQuery:function(s,i){if(1&s&&(e.GBs(B,5),e.GBs(_,5),e.GBs(M,5)),2&s){let o;e.mGM(o=e.lsd())&&(i.headerRef=o.first),e.mGM(o=e.lsd())&&(i.leftShadowRef=o.first),e.mGM(o=e.lsd())&&(i.rightShadowRef=o.first)}},inputs:{disabled:"disabled"},standalone:!0,features:[e.aNF],decls:10,vars:4,consts:[["leftShadow",""],["rightShadow",""],["scrollable",""],[1,"scrollable__overlay"],[1,"scrollable__overlay--left-shadow"],[1,"scrollable__overlay--right-shadow"],[1,"scrollable","lang-switch",3,"tippy","tippyDisabled"],["mat-flat-button","",1,"lang-switch__button",3,"color","tippy","tippyDisabled"],["mat-flat-button","",1,"lang-switch__button",3,"mousedown","click","color","tippy","tippyDisabled"]],template:function(s,i){1&s&&(e.j41(0,"div",3),e.nrm(1,"div",4,0)(3,"div",5,1),e.j41(5,"div",6,2),e.nI1(7,"translate"),e.Z7z(8,X,2,4,"button",7,e.fX1),e.k0s()()),2&s&&(e.R7$(5),e.Y8G("tippy",e.bMT(7,2,"Message.CantSwitchLanguage"))("tippyDisabled",!i.disabled),e.R7$(3),e.Dyx(i.buttons))},dependencies:[g.Hl,g.$z,a.h,a.D9,w.e],styles:['.scrollable__overlay[_ngcontent-%COMP%]{position:relative;height:100%}.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{content:"";position:absolute;top:0;display:block;z-index:1;pointer-events:none;height:100%;width:80px;background-image:linear-gradient(90deg,#fff 8px,#fff0)}@media (max-width: 600px){.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{width:24px}}.scrollable__overlay--right-shadow[_ngcontent-%COMP%]{right:0;background-image:linear-gradient(270deg,#fff 8px,#fff0)}.scrollable[_ngcontent-%COMP%]{overflow:hidden;scroll-behavior:smooth;height:100%;touch-action:none}.lang-switch[_ngcontent-%COMP%]{display:flex}.lang-switch__button[_ngcontent-%COMP%]{height:100%;flex-shrink:0;border-radius:0;margin-left:0!important;color:#0006;border-bottom:none;font-size:12px;line-height:54px;padding:0 6px;background-color:#fff!important}.lang-switch__button.mat-accent[_ngcontent-%COMP%]{color:#002753;border-bottom:2px solid #002753;background-color:inherit}.hidden[_ngcontent-%COMP%]{visibility:hidden}']})}return r})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_edit_dialog_header_language-switcher_language-switcher_component_ts.b0afb41f036b673c.js.map