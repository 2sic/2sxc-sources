"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_t-13e0b6"],{7574:(M,E,n)=>{n.r(E),n.d(E,{CreateInheritedAppComponent:()=>h});var t=n(7580),i=n(4456),e=n(7941),C=n(3583),p=n(4175),l=n(5060),O=n(5175),c=n(5944),g=n(2159),f=n(3758),D=n(5437),o=n(3347);function _(a,m){if(1&a&&(t.j41(0,"mat-option",7),t.EFF(1),t.k0s()),2&a){const s=m.$implicit;t.Y8G("value",s.Id),t.R7$(),t.SpI(" ",s.Name," ")}}function d(a,m){1&a&&(t.j41(0,"app-field-hint",8),t.EFF(1," Required "),t.k0s()),2&a&&t.Y8G("isError",!0)}let h=(()=>{class a{constructor(s,u){this.dialogRef=s,this.snackBar=u,this.hostClass="dialog-component",this.loading=(0,t.vPA)(!1),this.inheritableApps=(0,t.vPA)(void 0),this.appsListService=(0,D.d)(C.U),this.form=this.buildForm()}ngOnInit(){this.fetchInheritedApps()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading.set(!0);const s=this.form.controls.inheritId.value,u=this.inheritableApps().find(r=>r.Id===s).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(u,s).subscribe({error:()=>{this.form.enable(),this.loading.set(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}fetchInheritedApps(){this.appsListService.getInheritable().subscribe({error:()=>{this.inheritableApps.set(null)},next:s=>{this.inheritableApps.set(s)}})}buildForm(){return new i.J3({inheritId:new i.hs(null,[i.k0.required])})}static#t=this.\u0275fac=function(u){return new(u||a)(t.rXU(e.CP),t.rXU(o.UG))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(u,r){2&u&&t.Mr5("className",r.hostClass)},standalone:!0,features:[t.aNF],decls:21,vars:5,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","inheritId",3,"placeholder"],[3,"value"],[3,"isError"],["align","end"],["type","button","mat-raised-button","",3,"click","disabled"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"]],template:function(u,r){1&u&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Create inherited App"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"router-outlet"),t.j41(6,"p"),t.EFF(7," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),t.k0s(),t.j41(8,"form",4)(9,"mat-form-field",5)(10,"mat-label"),t.EFF(11,"Inherit App"),t.k0s(),t.j41(12,"mat-select",6),t.Z7z(13,_,2,2,"mat-option",7,t.fX1),t.k0s()(),t.DNE(15,d,2,1,"app-field-hint",8),t.k0s()(),t.j41(16,"mat-dialog-actions",9)(17,"button",10),t.bIt("click",function(){return r.closeDialog()}),t.EFF(18," Cancel "),t.k0s(),t.j41(19,"button",11),t.bIt("click",function(){return r.create()}),t.EFF(20," Create "),t.k0s()()()),2&u&&(t.R7$(8),t.Y8G("formGroup",r.form),t.R7$(4),t.Y8G("placeholder",void 0===r.inheritableApps()?"Loading...":null===r.inheritableApps()||0===r.inheritableApps().length?"No inheritable apps found":""),t.R7$(),t.Dyx(r.inheritableApps()),t.R7$(2),t.vxM(15,r.form.controls.inheritId.touched&&null!=r.form.controls.inheritId.errors&&r.form.controls.inheritId.errors.required?15:-1),t.R7$(2),t.Y8G("disabled",r.loading()),t.R7$(2),t.Y8G("disabled",r.loading()||!r.form.valid))},dependencies:[g.n3,i.YN,i.qT,i.BC,i.cb,i.X1,i.j4,i.JD,c.RG,c.rl,c.nJ,O.Ve,O.VO,l.wT,l.Sy,e.E7,p.Hl,p.$z,f.F]})}return a})()},1772:(M,E,n)=>{n.d(E,{I:()=>g,u:()=>c});var t=n(6647),i=n(9452),e=n(3550),C=n(8873),p=n(7580),l=n(6443),O=n(4821);const c="admin/app/";let g=(()=>{class f{constructor(o,_,d){this.http=o,this.context=_,this.dnnContext=d}importApp(o,_,d=!1){const h=new FormData;return h.append("File",o),h.append("Name",_??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(c+"Import"),h,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(a=>{if(d&&a.Messages[0]?.MessageType===e.G1.Warning){const m=prompt(a.Messages[0].Text+" Would you like to install it using another folder name?");if(m)return this.importApp(o,m,!0)}return(0,i.of)(a)}))}static#t=this.\u0275fac=function(_){return new(_||f)(p.KVO(l.Qq),p.KVO(C.o),p.KVO(O.ob))};static#e=this.\u0275prov=p.jDH({token:f,factory:f.\u0275fac})}return f})()},3758:(M,E,n)=>{n.d(E,{F:()=>D});var t=n(316),i=n(5944),e=n(7580);const C=["*"],p=o=>({"hint-box__short":o});function l(o,_){1&o&&e.eu8(0)}function O(o,_){if(1&o&&(e.j41(0,"mat-hint"),e.DNE(1,l,1,0,"ng-container",2),e.k0s()),2&o){e.XpG();const d=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",d)}}function c(o,_){1&o&&e.eu8(0)}function g(o,_){if(1&o&&(e.j41(0,"mat-error"),e.DNE(1,c,1,0,"ng-container",2),e.k0s()),2&o){e.XpG();const d=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",d)}}function f(o,_){1&o&&e.SdG(0)}let D=(()=>{class o{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(h){return new(h||o)};static#e=this.\u0275cmp=e.VBU({type:o,selectors:[["app-field-hint"]],inputs:{isError:"isError"},standalone:!0,features:[e.aNF],ngContentSelectors:C,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(h,a){if(1&h){const m=e.RV6();e.NAR(),e.j41(0,"div",1),e.bIt("click",function(){return e.eBV(m),e.Njj(a.toggleIsShort())}),e.DNE(1,O,2,1)(2,g,2,1),e.k0s(),e.DNE(3,f,1,0,"ng-template",null,0,e.C5r)}if(2&h){let m;e.Y8G("ngClass",e.eq3(2,p,a.isShort)),e.R7$(),e.vxM(1,!1===(m=a.isError)?1:!0===m?2:-1)}},dependencies:[i.RG,i.MV,i.TL,t.YU,t.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return o})()},6474:(M,E,n)=>{n.d(E,{D:()=>p});var t=n(7580),i=n(4821),e=n(8873),C=n(6443);let p=(()=>{class l{constructor(){this.dnnContext=(0,t.WQX)(i.ob),this.http=(0,t.WQX)(C.Qq),this.context=(0,t.WQX)(e.o)}apiUrl(c){return this.dnnContext.$2sxc.http.apiUrl(c)}get appId(){return this.context.appId.toString()}get zoneId(){return this.context.zoneId.toString()}static#t=this.\u0275fac=function(g){return new(g||l)};static#e=this.\u0275prov=t.jDH({token:l,factory:l.\u0275fac})}return l})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_t-13e0b6.9924618ef8b7d276.js.map