"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_web-api_web-api_component_ts"],{7592:(X,u,i)=>{i.r(u),i.d(u,{WebApiComponent:()=>I});var h=i(7941),p=i(2159),C=i(5797),b=i(271),A=i(9996),F=i(6068),j=i(251),R=i(2785),W=i(261),r=i(1034),c=i(3840),g=i(5060),e=i(7580);function x(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.openCode())}),e.j41(1,"mat-icon"),e.EFF(2,"code"),e.k0s()()}}function T(a,d){1&a&&(e.j41(0,"div",3)(1,"mat-icon"),e.EFF(2,"code"),e.k0s()())}function S(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.openRestApi())}),e.nrm(1,"mat-icon",9),e.j41(2,"span"),e.EFF(3,"REST API"),e.k0s()()}}let M=(()=>{class a{constructor(t,n){this.router=t,this.route=n}agInit(t){this.params=t,this.enableCode=this.params.enableCodeGetter()}refresh(t){return!0}openCode(){this.params.onOpenCode(this.params.data)}openRestApi(){const t=this.params.data,n=this.router.url.split("/");n[n.length-1]=W.N.routeWebApi,n.push(encodeURIComponent(t.path));const o=n.join("/");this.router.navigate([o])}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(p.Ix),e.rXU(p.nX))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-web-api-actions"]],standalone:!0,features:[e.aNF],decls:9,vars:3,consts:[["menu","matMenu"],[1,"actions-component"],["matRipple","","tippy","Code",1,"eav-grid-action-button","highlight"],[1,"eav-grid-action-button","disabled"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["matMenuContent",""],["matRipple","","tippy","Code",1,"eav-grid-action-button","highlight",3,"click"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"]],template:function(n,o){if(1&n&&(e.j41(0,"div",1),e.DNE(1,x,3,0,"div",2)(2,T,3,0,"div",3),e.j41(3,"div",4)(4,"mat-icon"),e.EFF(5,"more_horiz"),e.k0s()()(),e.j41(6,"mat-menu",5,0),e.DNE(8,S,4,0,"ng-template",6),e.k0s()),2&n){const s=e.sdS(7);e.R7$(),e.vxM(1,o.enableCode?1:-1),e.R7$(),e.vxM(2,o.enableCode?-1:2),e.R7$(),e.Y8G("matMenuTriggerFor",s)}},dependencies:[g.pZ,g.r6,c.m_,c.An,r.Cn,r.kk,r.fb,r.z8,r.Cp]})}return a})();var N=i(2871),E=i(316),f=i(4175),y=i(7037),l=i(1828),m=i(5437),G=i(2743),$=i(3347),O=i(9841);function B(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",1),e.nrm(1,"ag-grid-angular",2),e.j41(2,"mat-dialog-actions",3)(3,"button",4)(4,"mat-icon"),e.EFF(5,"add"),e.k0s()(),e.j41(6,"mat-menu",null,0)(8,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.createController(!1))}),e.j41(9,"span"),e.EFF(10,"App"),e.k0s()(),e.j41(11,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.createController(!0))}),e.j41(12,"span"),e.EFF(13,"Shared (global)"),e.k0s()()()()()}if(2&a){const t=e.sdS(7),n=e.XpG();e.R7$(),e.Y8G("rowData",d.webApis)("gridOptions",n.gridOptions),e.R7$(2),e.Y8G("matMenuTriggerFor",t)}}let I=(()=>{class a{constructor(t,n,o){this.snackBar=t,this.dialog=n,this.viewContainerRef=o,this.dialogService=(0,m.d)(R.o),this.sourceService=(0,m.d)(A.F),this.webApis$=new C.t(void 0),this.gridOptions=this.buildGridOptions(),this.dialogConfigSvc=(0,m.d)(G.b)}ngOnInit(){this.fetchWebApis(),this.viewModel$=this.webApis$.pipe((0,b.T)(t=>({webApis:t}))),this.dialogConfigSvc.getCurrent$().subscribe(t=>{this.enableCode=t.Context.Enable.CodeEditor})}ngOnDestroy(){this.webApis$.complete()}createController(t){this.dialog.open(F.g,{autoFocus:!1,data:{folder:"api",global:t,purpose:"Api"},viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{if(s){if(s.name.endsWith("Controller.cs")){const v=s.name.substring(s.name.lastIndexOf("/")+1);if(!/^[A-Z][a-zA-Z0-9]*Controller\.cs$/g.test(v))return void this.snackBar.open(`"${v}" is invalid controller name. Should be something like "MyController.cs"`,null,{duration:5e3})}this.snackBar.open("Saving..."),this.sourceService.create(s.name,t,s.templateKey).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.fetchWebApis()})}})}fetchWebApis(){this.sourceService.getWebApis().subscribe(t=>{this.webApis$.next(t)})}enableCodeGetter(){return this.enableCode}openCode(t){this.dialogService.openCodeFile(t.path,t.isShared)}buildGridOptions(){return{...j.C,columnDefs:[{headerName:"Endpoint",field:"endpointPath",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{...l.r.TextWideMin100,headerName:"Edition",field:"edition",sort:"asc"},{...l.r.TextWideMin100,headerName:"Forder2",field:"folder",sort:"asc"},{...l.r.TextWide,headerName:"Name",field:"name"},{headerName:"Compiled",field:"isCompiled",...l.r.Boolean2,cellRenderer:N.J},{...l.r.ActionsPinnedRight6,cellRenderer:M,cellRendererParams:{enableCodeGetter:()=>this.enableCodeGetter(),onOpenCode:o=>this.openCode(o)}}]}}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU($.UG),e.rXU(h.bZ),e.rXU(e.c1b))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-web-api"]],standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[["menu","matMenu"],[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Create a new controller","tippyPlacement","left",1,"grid-fab",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(n,o){if(1&n&&(e.DNE(0,B,14,3,"div",1),e.nI1(1,"async"),e.nrm(2,"router-outlet")),2&n){let s;e.vxM(0,(s=e.bMT(1,1,o.viewModel$))?0:-1,s)}},dependencies:[y.p,O.xs,h.E7,f.Hl,f.Sr,r.Cn,r.kk,r.fb,r.Cp,c.m_,c.An,p.n3,E.Jj]})}return a})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_app-administration_web-api_web-api_component_ts.48167bccfa526540.js.map