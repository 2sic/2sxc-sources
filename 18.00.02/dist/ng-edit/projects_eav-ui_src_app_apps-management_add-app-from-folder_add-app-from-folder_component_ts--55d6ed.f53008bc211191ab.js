"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--55d6ed"],{8242:(P,m,e)=>{e.r(m),e.d(m,{AddAppFromFolderComponent:()=>A});var t=e(7580),u=e(7941),_=e(4205),M=e(3037),h=e(6647),f=e(1318),D=e(9452),C=e(1870),n=e(271),F=e(8136),T=e(251),g=e(4824),p=e(3583),E=e(3840),l=e(7896);let v=(()=>{class o{agInit(a){this.name=a.value,this.tooltip=a.tooltipGetter(a.data)}refresh(a){return!0}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-app-name-show"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(i,c){1&i&&(t.j41(0,"div",0)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"mat-icon",1),t.EFF(4,"info"),t.k0s()()),2&i&&(t.R7$(2),t.JRh(c.name),t.R7$(),t.Y8G("tippy",c.tooltip))},dependencies:[E.m_,E.An,l.e],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}return o})(),d=(()=>{class o{agInit(a){this.params=a}refresh(a){return!0}onChange(a){this.params.onChange(this.params.data,a.currentTarget.checked)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-checkbox-cell"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"change","disabled","checked"]],template:function(i,c){1&i&&(t.j41(0,"div",0)(1,"input",1),t.bIt("change",function(N){return c.onChange(N)}),t.k0s()()),2&i&&(t.R7$(),t.Y8G("disabled",c.params.isDisabled)("checked",c.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}return o})();var x=e(316),I=e(4175),O=e(5469),R=e(7037),j=e(5437),U=e(3347),B=e(9841);function S(o,s){1&o&&(t.j41(0,"p"),t.EFF(1," Nothing to show. All apps in the 2sxc folder are already installed. "),t.k0s())}function $(o,s){if(1&o&&(t.j41(0,"div"),t.nrm(1,"ag-grid-angular",8),t.k0s()),2&o){const a=t.XpG(),i=t.XpG();t.R7$(),t.Y8G("rowData",a.pendingApps)("gridOptions",i.gridOptions)}}function r(o,s){if(1&o){const a=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Add App from Folder"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"app-feature-text-info",4),t.j41(6,"p"),t.EFF(7," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),t.k0s(),t.DNE(8,S,2,0,"p")(9,$,2,2,"div"),t.k0s(),t.j41(10,"mat-dialog-actions",5)(11,"button",6),t.bIt("click",function(){t.eBV(a);const c=t.XpG();return t.Njj(c.closeDialog())}),t.EFF(12," Cancel "),t.k0s(),t.j41(13,"button",7),t.bIt("click",function(){t.eBV(a);const c=t.XpG();return t.Njj(c.install())}),t.EFF(14," Install "),t.k0s()()()}if(2&o){const a=s,i=t.XpG();t.R7$(5),t.Y8G("featureNameId","AppSyncWithSiteFiles"),t.R7$(3),t.vxM(8,0==(null==a.pendingApps?null:a.pendingApps.length)?8:-1),t.R7$(),t.vxM(9,(null==a.pendingApps?null:a.pendingApps.length)>0?9:-1),t.R7$(4),t.Y8G("disabled",0===i.pendingApps.length||i.installing)}}let A=(()=>{class o{constructor(a,i){this.dialogRef=a,this.snackBar=i,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.pendingApps=[],this.installing=!1,this.refreshApps$=new _.B,this.features=(0,t.WQX)(g.t),this.isAddFromFolderEnabled=this.features.isEnabled(F.T.AppSyncWithSiteFiles),this.appsListService=(0,j.d)(p.U)}ngOnInit(){this.viewModel$=this.refreshApps$.pipe((0,M.Z)(void 0),(0,h.n)(()=>this.appsListService.getPendingApps().pipe((0,f.W)(()=>(0,D.of)(void 0)))),(0,C.u)(),(0,n.T)(a=>({pendingApps:a})))}ngOnDestroy(){this.refreshApps$.complete()}closeDialog(){this.dialogRef.close()}onChange(a,i){i?this.pendingApps.push(a):this.pendingApps.splice(this.pendingApps.indexOf(a),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...T.C,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:d,cellRendererParams:()=>({isDisabled:!this.isAddFromFolderEnabled,onChange:(c,y)=>this.onChange(c,y)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:v,cellRendererParams:{tooltipGetter:c=>`Server folder: ${c.ServerFolder}\nFolder: ${c.Folder}\nVersion: ${c.Version}\nDescription: ${c.Description}`}}]}}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(u.CP),t.rXU(U.UG))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(i,c){2&i&&t.Mr5("className",c.hostClass)},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(i,c){if(1&i&&(t.DNE(0,r,15,4,"div",0),t.nI1(1,"async")),2&i){let y;t.vxM(0,(y=t.bMT(1,1,c.viewModel$))?0:-1,y)}},dependencies:[u.E7,I.Hl,I.$z,x.Jj,O.L,R.p,B.xs],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}return o})()},8136:(P,m,e)=>{e.d(m,{T:()=>t});const t={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement",AppExportAssetsAdvanced:"AppExportAssetsAdvanced",PickerUiCheckbox:"PickerUiCheckbox",PickerUiRadio:"PickerUiRadio",PickerSourceCsv:"PickerSourceCsv"}},5469:(P,m,e)=>{e.d(m,{L:()=>E});var t=e(5541),u=e(5797),_=e(9999),M=e(271),h=e(852),f=e(316),D=e(3840),C=e(7896),n=e(7580);function F(l,v){if(1&l){const d=n.RV6();n.j41(0,"div",2),n.nI1(1,"translate"),n.bIt("click",function(){n.eBV(d);const I=n.XpG(2);return n.Njj(I.openDialog())}),n.j41(2,"mat-icon"),n.EFF(3),n.k0s(),n.j41(4,"div",3)(5,"div",4),n.EFF(6),n.nI1(7,"translate"),n.k0s(),n.j41(8,"div",5),n.EFF(9),n.nI1(10,"translate"),n.k0s()()()}if(2&l){const d=n.XpG();n.Y8G("tippy",n.i5U(1,7,"Features.Tooltip",d.feature)),n.R7$(2),n.ZvI("icon icon-",d.icon,""),n.R7$(),n.JRh(d.icon),n.R7$(3),n.JRh(n.bMT(7,10,"Features.FeatureNotActivated")),n.R7$(3),n.JRh(n.bMT(10,12,"Features.ClickToFindOutMore"))}}function T(l,v){1&l&&n.DNE(0,F,11,14,"div",1),2&l&&n.vxM(0,v.show?0:-1)}function g(l,v){1&l&&(n.j41(0,"div"),n.EFF(1,"loading..."),n.k0s())}function p(l,v){1&l&&(n.j41(0,"div"),n.EFF(1,"loading..."),n.k0s())}let E=(()=>{class l extends t.x{set asInfo(d){this.asInfo$.next(d)}constructor(){super(),this.asInfo$=new u.t(!1),this.viewModel$=(0,_.z)([this.feature$,this.asInfo$,this.show$]).pipe((0,M.T)(([d,x,I])=>({feature:d,icon:x?"info":"warning",show:I})))}static#t=this.\u0275fac=function(x){return new(x||l)};static#e=this.\u0275cmp=n.VBU({type:l,selectors:[["app-feature-text-info"]],inputs:{asInfo:"asInfo"},standalone:!0,features:[n.Vt3,n.aNF],decls:5,vars:3,consts:[["loading",""],[1,"feature-text-info",3,"tippy"],[1,"feature-text-info",3,"click","tippy"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(x,I){if(1&x&&(n.DNE(0,T,1,1),n.nI1(1,"async"),n.DNE(2,g,2,0)(3,p,2,0,"ng-template",null,0,n.C5r)),2&x){let O;n.vxM(0,(O=n.bMT(1,1,I.viewModel$))?0:2,O)}},dependencies:[D.m_,D.An,f.Jj,h.h,h.D9,C.e],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]})}return l})()},5541:(P,m,e)=>{e.d(m,{x:()=>S,j:()=>$});var t=e(7580),u=e(7941),_=e(4824),M=e(519),h=e(6443),f=e(4821);let C=(()=>{class r{constructor(o,s){this.http=o,this.dnnContext=s}getFeatureDetails(o){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/feature/details"),{params:{nameId:o}})}static#t=this.\u0275fac=function(s){return new(s||r)(t.KVO(h.Qq),t.KVO(f.ob))};static#e=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac})}return r})();var n=e(852),F=e(316),T=e(3840),g=e(4175),p=e(3777),E=e(7896),l=e(9914),v=e(5437),d=e(3347);function x(r,A){if(1&r){const o=t.RV6();t.j41(0,"div",1)(1,"div",2),t.EFF(2,"ID:"),t.k0s(),t.j41(3,"div",7)(4,"span",8),t.bIt("click",function(){const a=t.eBV(o),i=t.XpG(2);return t.Njj(i.copyToClipboard(a))}),t.EFF(5),t.k0s()()()}if(2&r){const o=A;t.R7$(4),t.Y8G("tippy",o),t.R7$(),t.JRh(o)}}function I(r,A){if(1&r){const o=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.j41(4,"mat-card-content"),t.nrm(5,"p",0),t.nI1(6,"safeHtml"),t.j41(7,"div",1)(8,"div",2),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"div",3)(12,"span"),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.DNE(15,x,6,2,"div",1),t.k0s(),t.j41(16,"mat-card-actions",4)(17,"button",5),t.bIt("click",function(){const a=t.eBV(o),i=t.XpG();return t.Njj(i.findOutMore(a.link))}),t.j41(18,"mat-icon"),t.EFF(19,"open_in_new"),t.k0s(),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"button",6),t.bIt("click",function(){t.eBV(o);const a=t.XpG();return t.Njj(a.closeDialog())}),t.EFF(23),t.nI1(24,"translate"),t.k0s()()()}if(2&r){let o;const s=A;t.R7$(3),t.JRh(s.name),t.R7$(2),t.Y8G("innerHtml",t.bMT(6,7,s.description),t.npT),t.R7$(4),t.SpI("",t.bMT(10,9,"Features.Status"),":"),t.R7$(4),t.JRh(t.bMT(14,11,s.isEnabled?"Features.Active":"Features.NotActive")),t.R7$(2),t.vxM(15,(o=s.nameId)?15:-1,o),t.R7$(5),t.SpI(" ",t.bMT(21,13,"Features.FindOutMore")," "),t.R7$(3),t.SpI(" ",t.bMT(24,15,"Features.Close")," ")}}let O=(()=>{class r{constructor(o,s,a){this.dialogData=o,this.dialogRef=s,this.snackBar=a,this.featureDetailService=(0,v.d)(C)}ngOnInit(){this.viewModel$=this.featureDetailService.getFeatureDetails(this.dialogData)}copyToClipboard(o){(0,M.l)(o),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(o){window.open(o,"_blank")}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(s){return new(s||r)(t.rXU(u.Vh),t.rXU(u.CP),t.rXU(d.UG))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-feature-info-dialog"]],standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["align","end"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"click","tippy"]],template:function(s,a){if(1&s&&(t.DNE(0,I,25,17,"mat-card"),t.nI1(1,"async")),2&s){let i;t.vxM(0,(i=t.bMT(1,1,a.viewModel$))?0:-1,i)}},dependencies:[p.Hu,p.RN,p.YY,p.m2,p.MM,p.dh,g.Hl,g.$z,T.m_,T.An,F.Jj,n.h,n.D9,E.e,l.$]})}return r})();var R=e(5797),j=e(6647),U=e(9999),B=e(271);let S=(()=>{class r{set featureNameId(o){this.featureNameId$.next(o)}set showIf(o){this.showIf$.next(1==o)}#t;#e;#n;#o;constructor(){this.featureNameId$=new R.t(null),this.showIf$=new R.t(!1),this.#t=(0,t.WQX)(u.bZ),this.#e=(0,t.WQX)(t.c1b),this.#n=(0,t.WQX)(t.gRc),this.#o=(0,t.WQX)(_.t),this.feature$=this.featureNameId$.pipe((0,j.n)(o=>this.#o.get$(o))),this.show$=(0,U.z)([this.feature$,this.showIf$]).pipe((0,B.T)(([o,s])=>s==(o?.isEnabled??!1)))}openDialog(){$(this.#t,this.featureNameId$.value,this.#e,this.#n)}static#a=this.\u0275fac=function(s){return new(s||r)};static#i=this.\u0275dir=t.FsC({type:r,inputs:{featureNameId:"featureNameId",showIf:"showIf"}})}return r})();function $(r,A,o,s){r.open(O,{autoFocus:!1,data:A,viewContainerRef:o,width:"400px"}),s.markForCheck()}},1772:(P,m,e)=>{e.d(m,{I:()=>n,u:()=>C});var t=e(6647),u=e(9452),_=e(3550),M=e(8873),h=e(7580),f=e(6443),D=e(4821);const C="admin/app/";let n=(()=>{class F{constructor(g,p,E){this.http=g,this.context=p,this.dnnContext=E}importApp(g,p,E=!1){const l=new FormData;return l.append("File",g),l.append("Name",p??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(C+"Import"),l,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(v=>{if(E&&v.Messages[0]?.MessageType===_.G1.Warning){const d=prompt(v.Messages[0].Text+" Would you like to install it using another folder name?");if(d)return this.importApp(g,d,!0)}return(0,u.of)(v)}))}static#t=this.\u0275fac=function(p){return new(p||F)(h.KVO(f.Qq),h.KVO(M.o),h.KVO(D.ob))};static#e=this.\u0275prov=h.jDH({token:F,factory:F.\u0275fac})}return F})()},6474:(P,m,e)=>{e.d(m,{D:()=>h});var t=e(7580),u=e(4821),_=e(8873),M=e(6443);let h=(()=>{class f{constructor(){this.dnnContext=(0,t.WQX)(u.ob),this.http=(0,t.WQX)(M.Qq),this.context=(0,t.WQX)(_.o)}apiUrl(C){return this.dnnContext.$2sxc.http.apiUrl(C)}get appId(){return this.context.appId.toString()}get zoneId(){return this.context.zoneId.toString()}static#t=this.\u0275fac=function(n){return new(n||f)};static#e=this.\u0275prov=t.jDH({token:f,factory:f.\u0275fac})}return f})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--55d6ed.f53008bc211191ab.js.map