{"version":3,"file":"default-projects_eav-ui_src_app_edit_form_form-config_service_ts-projects_eav-ui_src_app_edit-b26668.9f7f37c45c00634c.js","mappings":"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","names":["FieldState","constructor","name","config","group","control","settings","basics","controlStatus","uiValue","translationState","pickerData","this","#pickerData","Error","i0","PagePickerComponent_Conditional_0_Conditional_12_For_2_ng_container_0_Template","pageAndChildren_r4","_c0","page_r3","PagePickerComponent_Conditional_0_Conditional_12_For_2_Template","vm_r5","tree","page_r7","path","_r6","$implicit","ctx_r1","select","PagePickerComponent_Conditional_0_Conditional_13_For_3_Conditional_6_Template","PagePickerComponent_Conditional_0_Conditional_13_For_3_Conditional_10_Template","PagePickerComponent_Conditional_0_Conditional_13_For_3_Conditional_11_Template","id","selected","isVisible","isClickable","PagePickerComponent_Conditional_0_Conditional_13_Conditional_1_Template","PagePickerComponent_Conditional_0_Conditional_13_For_3_Template","filteredSearch","length","_r9","page_r10","page","toggle","toggled","includes","PagePickerComponent_Conditional_0_ng_template_14_Conditional_12_For_2_ng_container_0_Template","child_r11","PagePickerComponent_Conditional_0_ng_template_14_Conditional_12_For_2_Template","children","PagePickerComponent_Conditional_0_ng_template_14_Conditional_2_Template","PagePickerComponent_Conditional_0_ng_template_14_Conditional_3_Template","_r8","PagePickerComponent_Conditional_0_ng_template_14_Conditional_10_Template","PagePickerComponent_Conditional_0_ng_template_14_Conditional_11_Template","PagePickerComponent_Conditional_0_ng_template_14_Conditional_12_Template","$event","_r1","setFilter","PagePickerComponent_Conditional_0_Conditional_12_Template","PagePickerComponent_Conditional_0_Conditional_13_Template","PagePickerComponent_Conditional_0_ng_template_14_Template","filterText","PagePickerComponent","dialogData","dialogRef","translate","queryService","transient","QueryService","ngOnInit","parseSelectedPageId","filterText$","BehaviorSubject","searchItems$","tree$","filteredSearch$","combineLatest","pipe","map","searchItems","filter","item","toLocaleLowerCase","viewModel$","fetchPages","ngOnDestroy","complete","next","window","confirm","instant","closeDialog","pageId","ArrayHelpers","toggleInArray","close","value","find","i","result","toString","stream","getAvailableEntities","subscribe","data","console","error","pages","buildPageSearch","Path","trim","replace","startsWith","substring","split","slice","join","Id","Name","Visible","Clickable","buildPageTree","items","parentId","ParentId","push","parent","prefix","fieldValue","controls","fieldName","parseInt","static","t","MAT_DIALOG_DATA","i1","i2","core","VBU","selectors","standalone","features","decls","vars","consts","template","rf","ctx","PagePickerComponent_Conditional_0_Template","tmp_0_0","MatFormFieldModule","i3","MatInputModule","i4","FormsModule","i5","NgTemplateOutlet","NgClass","ExtendedModule","i6","MatIconModule","i7","MatDialogActions","AsyncPipe","TranslateModule","TippyDirective","styles","PagePicker","open","dialog","viewContainerRef","changeDetectorRef","callback","autoFocus","height","width","afterClosed","take","markForCheck","FormConfigService","log","EavLogger","configSignal","signal","context","inject","Context","languageService","FormLanguageService","initFormConfig","dialogContext","formId","isParentDialog","itemGuids","createMode","isCopy","enableHistory","languages","initial","Language","Current","primary","Primary","list","List","zoneId","appId","appRoot","App","Url","appSharedRoot","SharedUrl","moduleId","partOfPage","sessionStorage","getItem","keyPartOfPage","partOfPageDefault","portalRoot","Site","tabId","systemRoot","location","pathname","versioningOptions","getVersioningOptions","keyPublishing","enableFormulaSave","Enable","FormulaSave","overrideEditRestrictions","OverrideEditRestrictions","set","language","getSignal","publishing","allowAll","show","hide","branch","publish","language$","_language$","getLanguage$","_angular_core__WEBPACK_IMPORTED_MODULE_4__","jDH","factory","fac","logSpecs","enabled","specs","getReader","getReaderSignal","SignalStoreObservableBase","super","getId","sanitizeAdd","FormLanguage","empty","current","#entityReaderCache","ComputedCacheHelper","#signalsHideHeaderCache","addForm","hideHeader","add","setCurrent","newLanguage","update","getEntityReader","l","fnIf","sig","getOrCreateWithInfo","EntityReader","rSilent","isNew","cache$","languageInstances","mapUntilChanged","m","shareReplay","getHideHeaderSignal","getOrCreate","cache","updateHideHeader","_angular_core__WEBPACK_IMPORTED_MODULE_7__","providedIn","bothPrimary","original","diffCurrent","DimensionReader","dimensions","hasCurrentWrite","d","Value","hasCurrentReadOnly","currentRO","undefined","hasCurrent","all","FieldReader","field","#noData","#field","#language","#values","Values","ofLanguage","currentOrDefault","currentOrDefaultOrAny","val","Dimensions","hasPrimary","hasCurrentReadonly","hasEditableValues","#valuesEditableOf","countEditable","countEditableWithContents","v","currentEditable","dimension","x","isEditableOrReadonlyTranslationExist","getBestValue","attributeValues","defaultValue","flatten","metadataItem","flattenAll","metadataItems","merged","Type","values","Object","entries","Attributes","currentValues","itemAttributes","reduce","acc","FieldsFind","FieldUnwrap","FieldMask","ServiceBase","#fieldState","#formConfig","injector","#controls","#fieldConfig","#maskSignal","#mask","computed","#fieldsUsedInMask","#extractFieldNames","a","destroy","initPreClean","overloadPreCleanValues","preClean","init","mask","initSignal","extendName","fn","#updateMaskFinal","r","logChanges","effect","#watchAllFields","#onChange","#process","hasPlaceholders","lowercaseInsideSquareBrackets","_","toLowerCase","entityGuid","entityId","forEach","e","replaceValue","cleaned","matches","match","token","key","maybeNew","valueSub","valueChanges","subscriptions","_angular_core__WEBPACK_IMPORTED_MODULE_3__","ContentTypeSettingsHelpers","getDefaultSettings","reader","contentType","itemHeader","defaultSettings","Metadata","Description","EditInstructions","Features","Label","ListInstructions","Notes","Icon","Link","_itemTitle","getTitle","_slotCanBeEmpty","IsEmptyAllowed","_slotIsEmpty","IsEmpty","type","metadata","label","FileTypeHelpers","defaultIcon","customExtensions","doc","docx","xls","xlsx","ppt","pptx","pdf","mp3","avi","mpg","mpeg","mov","mp4","zip","rar","txt","html","css","xml","xsl","matExtensions","vcf","getExtension","filename","lastIndexOf","getIconClass","ext","isKnownType","isImage","isImgRegex","test","FieldHelper","getDefaultOrPrefillValue","inputType","onlyPrefill","prefillRaw","Prefill","rNull","DefaultValue","InputTypeCatalog","BooleanDefault","BooleanTristate","DateTimeDefault","Date","toJSON","NumberDefault","NumberDropdown","NumberPicker","isNaN","Number","EntityDefault","EntityQuery","EntityContentBlocks","EntityPicker","guids","guid","JSON","stringify","parse","SanitizeHelper","removeFromStart","sanitized","charToRemove","removeFromEnd","cleanBadPath","goodChar","sanitizePath","sanitizeName","SignalStoreBase","#cache","#list","#itemSignalsCache","options","end","addMany","before","get","newItem","f","remove","updatedStore","clearCache","getAll","getMany","ids","getManySignal","equal","isEqual","getAllSignal","#cache$","toObservable","#list$","list$","getList$","getMany$","obj","CustomDefault","CustomGps","CustomJsonEditor","DefaultSuffix","EmptyDefault","EmptyEnd","EmptyMessage","ExternalWebComponent","HyperlinkDefault","HyperlinkLibrary","StringDefault","StringDropdown","StringDropdownQuery","StringFontIconPicker","StringJson","StringTemplatePicker","StringUrlPath","StringWysiwyg","StringPicker","Unknown","array","index","indexOf","splice","distinctUntilChanged","mapUntilObjChanged","proxy","buildProxy","named","#proxy","Proxy","final","delete","clear","keys","signalObj","initialValue","computedObj","computation","comp","awaitHttp","httpRequest","asReadonly","sigAny","debugName","SIGNAL","computedWithPrev","previous","newValue","applyCssPrefixes","target","display","order","INLINE","LAYOUT_VALUES","buildLayoutCSS","direction","wrap","isInline","validateValue","buildCSS","inline","validateWrapValue","isFlowHorizontal","flow","extendObject","dest","sources","TypeError","source","hasOwnProperty","BROWSER_PROVIDER","provide","APP_BOOTSTRAP_LISTENER","useFactory","removeStyles","_document","platformId","isPlatformBrowser","elements","Array","from","querySelectorAll","CLASS_NAME","classRegex","el","classList","contains","parentNode","removeChild","className","deps","DOCUMENT","PLATFORM_ID","multi","CoreModule","mod","inj","providers","MediaChange","mediaQuery","mqAlias","suffix","priority","property","clone","StylesheetMap","stylesheet","Map","addStyleToElement","element","style","clearStyles","getStyleForElement","styleName","prov","DEFAULT_CONFIG","addFlexToParent","addOrientationBps","disableDefaultBps","disableVendorPrefixes","serverLoaded","useColumnBasisZero","printWithBreakpoints","mediaTriggerAutoRestore","ssrObserveBreakpoints","multiplier","defaultUnit","detectLayoutDisplay","LAYOUT_CONFIG","InjectionToken","SERVER_TOKEN","BREAKPOINT","mergeAlias","alias","StyleBuilder","shouldCache","sideEffect","_input","_styles","_parent","StyleUtils","_serverStylesheet","_serverModuleLoaded","_platformId","layoutConfig","applyStyleToElement","_applyMultiValueStyleToElement","applyStyleToElements","getFlowDirection","query","lookupStyle","lookupInlineStyle","isPlatformServer","hasWrap","lookupAttributeValue","attribute","getAttribute","getPropertyValue","getServerStyle","readStyleAttribute","inlineOnly","getComputedStyle","sort","isArray","setProperty","setServerStyle","styleValue","styleMap","writeStyleAttribute","styleAttrValue","setAttribute","styleAttribute","styleList","colonIndex","substr","sortDescendingPriority","b","sortAscendingPriority","MatchMedia","_zone","registry","pendingRemoveListenerFns","_observable$","asObservable","activations","results","mql","isActive","registerQuery","some","observe","mqList","filterOthers","matchMedia$","change","registration$","Observable","observer","lastChange","pop","merge","buildQueryCss","mediaQueries","it","ALL_STYLES","styleEl","createElement","styleSheet","appendChild","createTextNode","head","mq","onMQLEvent","run","buildMQL","addListener","removeListener","constructMql","isBrowser","matchMedia","buildMockMql","et","EventTarget","media","addEventListener","dispatchEvent","onchange","DEFAULT_BREAKPOINTS","overlapping","HANDSET_PORTRAIT","HANDSET_LANDSCAPE","TABLET_PORTRAIT","TABLET_LANDSCAPE","WEB_PORTRAIT","WEB_LANDSCAPE","ScreenTypes","HANDSET","TABLET","WEB","ORIENTATION_BREAKPOINTS","ALIAS_DELIMITERS","firstUpperCase","part","first","charAt","remainder","toUpperCase","BREAKPOINTS","breakpoints","bpFlattenArray","concat","apply","mergeByAlias","defaults","custom","dict","bp","validateSuffixes","camelCase","k","BreakPointRegistry","findByMap","findByAlias","findWithPredicate","findByQuery","overlappings","aliases","suffixes","searchFn","response","PRINT","BREAKPOINT_PRINT","PrintHook","registeredBeforeAfterPrintHooks","isPrintingBeforeAfterEvent","beforePrintEventListeners","afterPrintEventListeners","formerActivations","isPrinting","queue","PrintQueue","deactivations","withPrintQuery","queries","isPrintEvent","printAlias","printBreakPoints","getEventBreakpoints","updateEvent","event","registerBeforeAfterPrintHooks","defaultView","beforePrintListener","startPrinting","updateStyles","afterPrintListener","stopPrinting","interceptEvents","collectActivations","blockPropagation","bpList","activatedBreakpoints","addPrintBreakpoints","hasFormerBp","wasActivated","removeEventListener","printBreakpoints","addBreakpoint","isPrintBreakPoint","MediaMarshaller","hook","_useFallbacks","_activatedBreakpoints","elementMap","elementKeyMap","WeakMap","watcherMap","updateMap","clearMap","subject","Subject","observeActivations","activatedAlias","bps","useFallbacks","onMediaChange","mc","bpIndex","updateFn","clearFn","extraTriggers","initBuilderMap","buildElementKeyMap","watchExtraTriggers","getValue","bpMap","getActivatedValues","hasValue","setValue","updateElement","trackValue","keyMap","Set","valueMap","clearElement","builders","releaseElement","s","unsubscribe","triggerUpdate","triggers","watchers","newSubscription","currentValue","has","lastHope","tap","bind","input","oldMap","BaseDirective2","elementRef","styleBuilder","styler","marshal","DIRECTIVE_KEY","inputs","mru","destroySubject","styleCache","parentElement","nativeElement","activatedValue","ngOnChanges","changes","updateWithValue","addStyles","builder","useCache","genStyles","buildStyles","getFlexFlowDirection","addIfMissing","hasInlineValue","dir","validateBasis","basis","grow","shrink","parts","j","_validateCalcValue","calc","MULTIPLIER_SUFFIX","multiply","transformValue","possibleValue","numberValue","endsWith","unit","ClassDirective","iterableDiffers","keyValueDiffers","renderer2","ngClassInstance","klass","ngClass","ngDoCheck","None","inputs$2","DefaultClassDirective","arguments","DefaultClassDirective_BaseFactory","ShowHideStyleBuilder","isServer","ShowHideStyleBuilder_BaseFactory","ShowHideDirective","serverModuleLoaded","hasLayout","hasFlexChild","ngAfterViewInit","trackExtraTriggers","DISPLAY_MAP","getDisplayStyle","inputKey","inputValue","shouldShow","coerceBooleanProperty","takeUntil","inputs$1","DefaultShowHideDirective","DefaultShowHideDirective_BaseFactory","fxShow","fxHide","NgStyleKeyValue","noQuotes","getType","what","stringToKeyValue","vals","keyValuesToMap","entry","StyleDirective","sanitizer","differs","ngStyleInstance","NgStyle","fallbackStyles","buildStyleMap","ngStyle","sanitize","SecurityContext","STYLE","buildMapFromList","buildRawList","delimiter","String","buildMapFromSet","buildMapFromList$1","i2$1","DefaultStyleDirective","DefaultStyleDirective_BaseFactory","imports"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/edit/fields/field-state.ts","./projects/eav-ui/src/app/edit/fields/page-picker/page-picker.component.html","./projects/eav-ui/src/app/edit/fields/page-picker/page-picker.component.ts","./projects/eav-ui/src/app/edit/fields/page-picker/page-picker.helpers.ts","./projects/eav-ui/src/app/edit/fields/page-picker/page-picker.helper.ts","./projects/eav-ui/src/app/edit/form/form-config.service.ts","./projects/eav-ui/src/app/edit/form/form-language.service.ts","./projects/eav-ui/src/app/edit/form/form-languages.model.ts","./projects/eav-ui/src/app/edit/localization/dimension-reader.ts","./projects/eav-ui/src/app/edit/localization/field-reader.ts","./projects/eav-ui/src/app/edit/shared/helpers/entity-reader.ts","./projects/eav-ui/src/app/edit/shared/helpers/field-mask.helper.ts","./projects/eav-ui/src/app/edit/state/fields-settings.helpers.ts","./projects/eav-ui/src/app/edit/shared/adam/file-type.helpers.ts","./projects/eav-ui/src/app/edit/shared/input-types/input-field.helpers.ts","./projects/eav-ui/src/app/edit/shared/helpers/sanitize.helper.ts","./projects/eav-ui/src/app/edit/shared/store/signal-store-base.ts","./projects/eav-ui/src/app/edit/shared/store/signal-store-observable-base.ts","./projects/eav-ui/src/app/shared/fields/input-type-catalog.ts","./projects/eav-ui/src/app/shared/helpers/array.helpers.ts","./projects/eav-ui/src/app/shared/rxJs/mapUntilChanged.ts","./projects/eav-ui/src/app/shared/signals/computed-cache.ts","./projects/eav-ui/src/app/shared/signals/signal.utilities.ts","./node_modules/@angular/flex-layout/fesm2020/angular-flex-layout-_private-utils.mjs","./node_modules/@angular/flex-layout/fesm2020/angular-flex-layout-core.mjs","./node_modules/@angular/flex-layout/fesm2020/angular-flex-layout-extended.mjs"],"sourcesContent":["import { FieldSettings, FieldValue } from '../../../../../edit-types';\r\nimport { AbstractControl, UntypedFormGroup } from '@angular/forms';\r\nimport { Signal } from '@angular/core';\r\nimport { FieldConfigSet } from './field-config-set.model';\r\nimport { BasicControlSettings } from '../../../../../edit-types/src/BasicControlSettings';\r\nimport { ControlStatus } from '../shared/controls/control-status.model';\r\nimport { PickerData } from './picker/picker-data';\r\nimport { TranslationState } from '../localization/translate-state.model';\r\n\r\n/**\r\n * This is provided / injected at the fields-builder for every single field.\r\n * So any control or service within that field, which requests this service, will get one containing exactly that fields.\r\n */\r\nexport class FieldState<T extends FieldValue> {\r\n  constructor(\r\n    /** The fields technical name to access settings etc. */\r\n    public name: string,\r\n\r\n    /** Field configuration, incl. a lot of unchanging values and access to adam, dropzone etc. */\r\n    public config: FieldConfigSet,\r\n\r\n    /** The form group containing the field - rarely relevant, as you should use the control in most cases */\r\n    public group: UntypedFormGroup,\r\n\r\n    /** The control of the field in the form group */\r\n    public control: AbstractControl,\r\n\r\n    // /** The settings as an observable - where possible, try to use the signal instead */\r\n    // public settings$: Observable<FieldSettings>,\r\n\r\n    /** The settings as a signal - use this for most cases */\r\n    public settings: Signal<FieldSettings>,\r\n\r\n    /** The basic settings - use this for most cases as it will change less than the settings signal */\r\n    public basics: Signal<BasicControlSettings>,\r\n\r\n    /**\r\n     * Note: e just introduced uiValue below, which should be used in most cases\r\n     */\r\n    public controlStatus: Signal<ControlStatus<T>>,\r\n\r\n    /** The value of the field in the UI control as a signal */\r\n    public uiValue: Signal<T>,\r\n\r\n    public translationState: Signal<TranslationState>,\r\n\r\n    pickerData: PickerData,\r\n  ) {\r\n    this.#pickerData = pickerData;\r\n  }\r\n\r\n  get pickerData(): PickerData {\r\n    if (this.#pickerData)\r\n      return this.#pickerData;\r\n    throw new Error(`PickerData was not initialized for the field: ${this.name}`);\r\n  }\r\n  #pickerData: PickerData;\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"eav-dialog\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">{{ 'Fields.Hyperlink.PagePicker.Title' | translate }}</div>\r\n    </div>\r\n    <div class=\"eav-dialog-content\">\r\n      <div class=\"page-search-box\">\r\n        <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n          <mat-label>Search</mat-label>\r\n          <input matInput [ngModel]=\"vm.filterText\" (ngModelChange)=\"setFilter($event)\">\r\n        </mat-form-field>\r\n      </div>\r\n      <div class=\"page-tree-box\">\r\n        @if (!vm.filterText) {\r\n          <ul>\r\n            @for (page of vm.tree; track page) {\r\n              <ng-container *ngTemplateOutlet=\"pageAndChildren; context: {page: page}\"></ng-container>\r\n            }\r\n          </ul>\r\n        }\r\n        @if (vm.filterText) {\r\n          <ul>\r\n            @if (vm.filteredSearch.length === 0) {\r\n              <li>\r\n                <div class=\"page-row\">\r\n                  <div class=\"no-toggle\"></div>\r\n                  <div>No results</div>\r\n                </div>\r\n              </li>\r\n            }\r\n            @for (page of vm.filteredSearch; track page) {\r\n              <li>\r\n                <div class=\"page-row\">\r\n                  <div class=\"no-toggle\"></div>\r\n                  <div class=\"page-label\" [ngClass]=\"page.id === selected ? 'selected' : ''\" (click)=\"select(page)\">\r\n                    <div class=\"page-icon-and-text\">\r\n                      <mat-icon class=\"page-icon\" svgIcon=\"file\"></mat-icon>\r\n                      @if (page.path) {\r\n                        <span class=\"page-path\" [tippy]=\"page.path\">{{ page.path }}&nbsp;>&nbsp;</span>\r\n                      }\r\n                      <span class=\"page-name\" [tippy]=\"page.name\">{{ page.name }}</span>\r\n                    </div>\r\n                    <div class=\"page-icons\">\r\n                      @if (!page.isVisible) {\r\n                        <mat-icon class=\"page-visible-clickable-icon\">visibility_off</mat-icon>\r\n                      }\r\n                      @if (!page.isClickable) {\r\n                        <mat-icon class=\"page-visible-clickable-icon\">cancel</mat-icon>\r\n                      }\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            }\r\n          </ul>\r\n        }\r\n      </div>\r\n      <ng-template #pageAndChildren let-page=\"page\">\r\n        <li>\r\n          <div class=\"page-row\">\r\n            @if (page.children.length === 0) {\r\n              <div class=\"no-toggle\"></div>\r\n            }\r\n            @if (page.children.length > 0) {\r\n              <mat-icon class=\"page-toggle\" (click)=\"toggle(page.id)\">\r\n                {{ toggled.includes(page.id) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\r\n              </mat-icon>\r\n            }\r\n            <div class=\"page-label\" [ngClass]=\"page.id === selected ? 'selected' : ''\" (click)=\"select(page)\">\r\n              <div class=\"page-icon-and-text\">\r\n                <mat-icon class=\"page-icon\" svgIcon=\"file\"></mat-icon>\r\n                <span>{{ page.name }}</span>\r\n              </div>\r\n              <div class=\"page-icons\">\r\n                @if (!page.isVisible) {\r\n                  <mat-icon class=\"page-visible-clickable-icon\">visibility_off</mat-icon>\r\n                }\r\n                @if (!page.isClickable) {\r\n                  <mat-icon class=\"page-visible-clickable-icon\">cancel</mat-icon>\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n          @if (page.children.length > 0 && toggled.includes(page.id)) {\r\n            <ul>\r\n              @for (child of page.children; track child) {\r\n                <ng-container *ngTemplateOutlet=\"pageAndChildren; context: {page: child}\"></ng-container>\r\n              }\r\n            </ul>\r\n          }\r\n        </li>\r\n      </ng-template>\r\n    </div>\r\n    <mat-dialog-actions>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}\r\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialogActions } from '@angular/material/dialog';\r\nimport { TranslateService, TranslateModule } from '@ngx-translate/core';\r\nimport { BehaviorSubject, combineLatest, map, Observable } from 'rxjs';\r\nimport { FieldValue, PagePickerResult } from '../../../../../../edit-types';\r\nimport { buildPageSearch, buildPageTree } from './page-picker.helpers';\r\nimport { PageEntity, PagePickerDialogData, PagePickerViewModel, PageSearchItem, PageTreeItem } from './page-picker.models';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ExtendedModule } from '@angular/flex-layout/extended';\r\nimport { NgTemplateOutlet, NgClass, AsyncPipe } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { ArrayHelpers } from '../../../shared/helpers/array.helpers';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { transient } from '../../../core';\r\nimport { QueryService } from '../../../shared/services/query.service';\r\n\r\n@Component({\r\n  selector: 'app-page-picker',\r\n  templateUrl: './page-picker.component.html',\r\n  styleUrls: ['./page-picker.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    FormsModule,\r\n    NgTemplateOutlet,\r\n    NgClass,\r\n    ExtendedModule,\r\n    MatIconModule,\r\n    MatDialogActions,\r\n    AsyncPipe,\r\n    TranslateModule,\r\n    TippyDirective,\r\n  ],\r\n})\r\nexport class PagePickerComponent implements OnInit, OnDestroy {\r\n  selected: number;\r\n  toggled: number[];\r\n  viewModel$: Observable<PagePickerViewModel>;\r\n\r\n  private filterText$: BehaviorSubject<string>;\r\n  private searchItems$: BehaviorSubject<PageSearchItem[]>;\r\n  private tree$: BehaviorSubject<PageTreeItem[]>;\r\n\r\n  private queryService = transient(QueryService);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) private dialogData: PagePickerDialogData,\r\n    private dialogRef: MatDialogRef<PagePickerComponent>,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.selected = this.parseSelectedPageId();\r\n    this.toggled = [];\r\n    this.filterText$ = new BehaviorSubject('');\r\n    this.searchItems$ = new BehaviorSubject([]);\r\n    this.tree$ = new BehaviorSubject([]);\r\n\r\n    // TODO: @2dg - this should be easy to get rid of #remove-observables\r\n    const filteredSearch$ = combineLatest([this.filterText$, this.searchItems$]).pipe(\r\n      map(([filterText, searchItems]) =>\r\n        searchItems.filter(item => item.name.toLocaleLowerCase().includes(filterText.toLocaleLowerCase()))\r\n      ),\r\n    );\r\n    this.viewModel$ = combineLatest([this.filterText$, filteredSearch$, this.tree$]).pipe(\r\n      map(([filterText, filteredSearch, tree]) => {\r\n        const viewModel: PagePickerViewModel = {\r\n          filterText,\r\n          filteredSearch,\r\n          tree,\r\n        };\r\n        return viewModel;\r\n      }),\r\n    );\r\n\r\n    this.fetchPages();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.filterText$.complete();\r\n    this.searchItems$.complete();\r\n    this.tree$.complete();\r\n  }\r\n\r\n  setFilter(filterText: string): void {\r\n    this.filterText$.next(filterText);\r\n  }\r\n\r\n  select(page: PageTreeItem | PageSearchItem): void {\r\n    // filters out pages without parent (broken)\r\n    if (page.id == null) return;\r\n    if (!page.isClickable || !page.isVisible) {\r\n      const ok = window.confirm(this.translate.instant('Fields.Hyperlink.PagePicker.HiddenOrSystemPageWarning'));\r\n      if (!ok) return;\r\n    }\r\n    this.closeDialog(page.id);\r\n  }\r\n\r\n  toggle(pageId: number): void {\r\n    ArrayHelpers.toggleInArray(pageId, this.toggled);\r\n  }\r\n\r\n  private closeDialog(pageId?: number): void {\r\n    if (pageId == null) {\r\n      this.dialogRef.close();\r\n      return;\r\n    }\r\n\r\n    const page = this.searchItems$.value.find(i => i.id === pageId);\r\n    const result: PagePickerResult = {\r\n      id: page.id.toString(),\r\n      name: page.name,\r\n    };\r\n    this.dialogRef.close(result);\r\n  }\r\n\r\n  private fetchPages(): void {\r\n    const stream = 'Default';\r\n    const params = 'includehidden=true';\r\n    this.queryService.getAvailableEntities(`System.Pages/Default`, params, null).subscribe({\r\n      next: (data) => {\r\n        if (!data) {\r\n          console.error(this.translate.instant('Fields.Picker.QueryErrorNoData'));\r\n          return;\r\n        }\r\n        if (!data[stream]) {\r\n          console.error(this.translate.instant('Fields.Picker.QueryStreamNotFound') + ' ' + stream);\r\n          return;\r\n        }\r\n        const pages = data[stream] as PageEntity[];\r\n        const searchItems = buildPageSearch(pages);\r\n        this.searchItems$.next(searchItems);\r\n        const tree = buildPageTree(pages);\r\n        this.tree$.next(tree);\r\n      },\r\n      error: (error) => {\r\n        console.error(error);\r\n        console.error(`${this.translate.instant('Fields.Picker.QueryError')} - ${error.data}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  private parseSelectedPageId(): number {\r\n    const prefix = 'page:';\r\n    let fieldValue: FieldValue = this.dialogData.group.controls[this.dialogData.config.fieldName].value;\r\n    if (typeof fieldValue !== 'string') return;\r\n\r\n    fieldValue = fieldValue.trim().toLocaleLowerCase();\r\n    if (!fieldValue.startsWith(prefix)) return;\r\n\r\n    try {\r\n      const id = parseInt(fieldValue.split(prefix)[1], 10);\r\n      return id;\r\n    } catch {\r\n      return;\r\n    }\r\n  }\r\n}\r\n","import { PageEntity, PageSearchItem, PageTreeItem } from './page-picker.models';\r\n\r\nexport function buildPageSearch(pages: PageEntity[]): PageSearchItem[] {\r\n  if (!pages) { return []; }\r\n\r\n  const items = pages.map(page => {\r\n    let path = page.Path.trim().replace(/\\\\/g, '/').replace(/\\/\\//g, '/');\r\n    if (path.startsWith('/')) {\r\n      path = path.substring(1);\r\n    }\r\n    path = path.split('/').slice(0, -1).join(' > ');\r\n\r\n    const item: PageSearchItem = {\r\n      id: page.Id,\r\n      name: page.Name,\r\n      path,\r\n      isVisible: page.Visible,\r\n      isClickable: page.Clickable,\r\n    };\r\n    return item;\r\n  });\r\n\r\n  return items;\r\n}\r\n\r\nexport function buildPageTree(pages: PageEntity[]): PageTreeItem[] {\r\n  if (!pages) { return []; }\r\n\r\n  const items = pages.map(page => {\r\n    const item: PageTreeItem = {\r\n      children: [],\r\n      id: page.Id,\r\n      name: page.Name,\r\n      parentId: page.ParentId,\r\n      isVisible: page.Visible,\r\n      isClickable: page.Clickable,\r\n    };\r\n    return item;\r\n  });\r\n\r\n  const tree: PageTreeItem[] = [];\r\n  for (const item of items) {\r\n    if (item.parentId === -1) {\r\n      tree.push(item);\r\n      continue;\r\n    }\r\n\r\n    const parent = items.find(i => i.id === item.parentId);\r\n    if (!parent) {\r\n      tree.push(item);\r\n    } else {\r\n      parent.children.push(item);\r\n    }\r\n  }\r\n\r\n  return tree;\r\n}\r\n","import { ChangeDetectorRef, ViewContainerRef } from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { take } from 'rxjs';\r\nimport { PagePickerResult } from '../../../../../../edit-types';\r\nimport { PagePickerComponent } from './page-picker.component';\r\nimport { PagePickerDialogData } from './page-picker.models';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\n\r\nexport class PagePicker {\r\n  static open(\r\n    config: FieldConfigSet,\r\n    group: UntypedFormGroup,\r\n    dialog: MatDialog,\r\n    viewContainerRef: ViewContainerRef,\r\n    changeDetectorRef: ChangeDetectorRef,\r\n    callback: (value: PagePickerResult) => void,\r\n  ): void {\r\n    const dialogData: PagePickerDialogData = {\r\n      config,\r\n      group,\r\n    };\r\n    const dialogRef = dialog.open(PagePickerComponent, {\r\n      autoFocus: false,\r\n      data: dialogData,\r\n      viewContainerRef,\r\n      height: '80%',\r\n      width: '650px',\r\n    });\r\n\r\n    dialogRef.afterClosed().pipe(take(1)).subscribe((value: PagePickerResult) => {\r\n      callback(value);\r\n    });\r\n\r\n    changeDetectorRef.markForCheck();\r\n  }\r\n}\r\n","import { Injectable, Signal, inject, signal } from '@angular/core';\r\nimport { DialogContext } from '../../app-administration/models';\r\nimport { keyPartOfPage, keyPublishing, partOfPageDefault } from '../../shared/constants/session.constants';\r\nimport { Context } from '../../shared/services/context';\r\nimport { EditSettings } from '../dialog/main/edit-dialog-main.models';\r\nimport { Observable } from 'rxjs';\r\nimport { FormLanguageService } from './form-language.service';\r\nimport { EavLogger } from '../../shared/logging/eav-logger';\r\nimport { FormLanguageComplete, FormLanguagesConfig } from './form-languages.model';\r\nimport { FormConfiguration, VersioningOptions } from './form-configuration.model';\r\n\r\nconst logThis = false;\r\nconst nameOfThis = 'FormConfigService';\r\n\r\nexport const webApiEditRoot = 'cms/edit/';\r\n\r\n/**\r\n * Service which tell us about a single edit-form configuration.\r\n * It contains multiple entities.\r\n *\r\n * Things such as language, IDs shown on it, edit-settings etc.\r\n */\r\n@Injectable()\r\nexport class FormConfigService {\r\n  /** no constructor */\r\n  constructor() { }\r\n\r\n  log = new EavLogger(nameOfThis, logThis);\r\n\r\n  /**\r\n   * Important! These are constants that form was loaded with.\r\n   * They are initialized in the main edit-form.\r\n   * They do not change while form is running\r\n   */\r\n  config: FormConfiguration;\r\n\r\n  // WIP, null at first\r\n  configSignal = signal<FormConfiguration>(null);\r\n\r\n  /**\r\n   * Current form language information\r\n   */\r\n  language: Signal<FormLanguageComplete>;\r\n\r\n  /**\r\n   * Current edit settings\r\n   * Note: Clean use - only used by classes that inject this themselves\r\n   */\r\n  settings: EditSettings;\r\n\r\n  /**\r\n   * Form language configuration, not meant to change during runtime...\r\n   */\r\n  languages: FormLanguagesConfig;\r\n\r\n  /** Used to fetch form data and fill up eavConfig. Do not use anywhere else */\r\n  private context = inject(Context);\r\n  private languageService = inject(FormLanguageService);\r\n\r\n  /** Create EavConfiguration from sessionStorage */\r\n  initFormConfig(\r\n    dialogContext: DialogContext,\r\n    formId: number,\r\n    isParentDialog: boolean,\r\n    itemGuids: string[],\r\n    createMode: boolean,\r\n    isCopy: boolean,\r\n    enableHistory: boolean,\r\n    settings: EditSettings\r\n  ) {\r\n    this.settings = settings;\r\n    this.languages = {\r\n      initial: dialogContext.Language.Current,\r\n      primary: dialogContext.Language.Primary,\r\n      list: dialogContext.Language.List,\r\n    };\r\n    this.config = {\r\n      zoneId: this.context.zoneId,\r\n      appId: this.context.appId,\r\n      appRoot: dialogContext.App.Url,\r\n      appSharedRoot: dialogContext.App.SharedUrl,\r\n      moduleId: this.context.moduleId?.toString(),\r\n      partOfPage: sessionStorage.getItem(keyPartOfPage) ?? partOfPageDefault,\r\n      portalRoot: dialogContext.Site.Url,\r\n      tabId: this.context.tabId?.toString(),\r\n      systemRoot: window.location.pathname.split('/dist/')[0] + '/',\r\n      versioningOptions: this.getVersioningOptions(\r\n        sessionStorage.getItem(keyPartOfPage) === 'true',\r\n        sessionStorage.getItem(keyPublishing)\r\n      ),\r\n      formId,\r\n      isParentDialog,\r\n      itemGuids,\r\n      createMode,\r\n      isCopy,\r\n      enableHistory,\r\n      enableFormulaSave: dialogContext.Enable.FormulaSave ?? false,\r\n      overrideEditRestrictions: dialogContext.Enable.OverrideEditRestrictions ?? false,\r\n      dialogContext,\r\n      settings,\r\n    };\r\n    this.configSignal.set(this.config);\r\n    this.language = this.languageService.getSignal(this.config.formId);\r\n  }\r\n\r\n  private getVersioningOptions(\r\n    partOfPage: boolean,\r\n    publishing: string\r\n  ): VersioningOptions {\r\n\r\n    const allowAll: VersioningOptions = { show: true, hide: true, branch: true };\r\n\r\n    if (!partOfPage)\r\n      return allowAll;\r\n\r\n    const publish = publishing || '';\r\n    switch (publish) {\r\n      case '':\r\n      case 'DraftOptional':\r\n        return allowAll;\r\n      case 'DraftRequired':\r\n        // Note: the key 'show' should not be added, as the code later picks the first property to set the default\r\n        // Branch should also be first, as it's the preferred option\r\n        return { branch: true, hide: true };\r\n      case 'DraftForbidden':\r\n        return { show: true };\r\n      default: {\r\n        console.error(`Invalid versioning requirements: ${publish}`);\r\n        return {};\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the language observable for the form - it will keep track of the current language as it changes.\r\n   * TODO: try to use the signal as much as possible\r\n    // TODO:: @2dg Question Languages as Signal\r\n   */\r\n  get language$(): Observable<FormLanguageComplete> {\r\n    return this._language$ ??= this.languageService.getLanguage$(this.config.formId);\r\n  }\r\n  private _language$: Observable<FormLanguageComplete>;\r\n\r\n}\r\n","import { Injectable, Signal } from '@angular/core';\r\nimport { map, Observable, shareReplay } from 'rxjs';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { mapUntilChanged } from '../../shared/rxJs/mapUntilChanged';\r\nimport { FormLanguage, FormLanguageComplete } from './form-languages.model';\r\nimport { SignalStoreObservableBase } from '../shared/store/signal-store-observable-base';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { EavLogger } from '../../shared/logging/eav-logger';\r\n\r\nconst logSpecs = {\r\n  enabled: false,\r\n  name: 'FormLanguageService',\r\n  specs: {\r\n    getReader: false,\r\n    getReaderSignal: false,\r\n  }\r\n};\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class FormLanguageService extends SignalStoreObservableBase<number, FormLanguageInStore> {\r\n\r\n  log: EavLogger<typeof logSpecs.specs>;\r\n  constructor() {\r\n    super(logSpecs);\r\n  }\r\n\r\n  protected override getId = (item: FormLanguageInStore) => item.formId;\r\n\r\n  protected override sanitizeAdd = (item: FormLanguageInStore) => ({\r\n    ...FormLanguage.empty,\r\n    initial: item.current,\r\n    ...item\r\n  });\r\n\r\n  addForm(formId: number, primary: string, current: string, hideHeader: boolean): void {\r\n    this.add({\r\n      formId,\r\n      current,\r\n      initial: current,\r\n      primary,\r\n      hideHeader,\r\n    } satisfies FormLanguageInStore);\r\n  }\r\n\r\n  setCurrent(formId: number, newLanguage: string): void {\r\n    this.update(formId, { current: newLanguage } satisfies Partial<FormLanguageInStore>);\r\n  }\r\n\r\n  /**\r\n   * Get an EntityReader for the current form.\r\n   * ATM used in fields settings service.\r\n   * \r\n   * If the form doesn't exist, the reader returned will not have the correct languages specified.\r\n   * This is to avoid errors when the form is not yet loaded or is being unloaded.\r\n   */\r\n  getEntityReader(formId: number): Signal<EntityReader> {\r\n    const l = this.log.fnIf('getReader', { formId });\r\n    // Place creation of the language signal here to avoid creating it multiple times\r\n    const sig = this.#entityReaderCache.getOrCreateWithInfo(formId, () => {\r\n      const language = this.getSignal(formId)() ?? FormLanguage.empty();\r\n      const l2 = this.log.fnIf('getReaderSignal', { language });\r\n      return new EntityReader(language);\r\n    });\r\n    return l.rSilent(sig.signal, `isNew: ${sig.isNew}`);\r\n  }\r\n  #entityReaderCache = new ComputedCacheHelper<number, EntityReader>('entityReader');\r\n\r\n  // use in form config service for language$()\r\n  getLanguage$(formId: number): Observable<FormLanguageComplete> {\r\n    return this.cache$.pipe(\r\n      map(languageInstances => languageInstances[formId]),\r\n      mapUntilChanged(m => m),\r\n      shareReplay(1)\r\n    );\r\n  }\r\n\r\n  /** Get hideHeader for the form. Fix for safari and mobile browsers */\r\n  getHideHeaderSignal(formId: number): Signal<boolean> {\r\n    return this.#signalsHideHeaderCache.getOrCreate(formId, () => this.cache()[formId]?.hideHeader ?? false);\r\n  }\r\n  #signalsHideHeaderCache = new ComputedCacheHelper<number, boolean>('hideHeader');\r\n\r\n\r\n  /** Update hideHeader for the form. Fix for safari and mobile browsers */\r\n  updateHideHeader(formId: number, hideHeader: boolean): void {\r\n    this.update(formId, { hideHeader } satisfies Partial<FormLanguageInStore>);\r\n  }\r\n}\r\n\r\nexport interface FormLanguageInStore extends FormLanguageComplete {\r\n  formId: number;\r\n  hideHeader: boolean;\r\n}\r\n","import { Language } from '../../shared/models/language.model';\r\n\r\nexport { Language } from '../../shared/models/language.model';\r\n\r\nexport class FormLanguage\r\n{\r\n  /** The current language of the system / UI. */\r\n  current: string;\r\n\r\n  /** The primary language of the system.\r\n   * Important, because the primary language must be filled in before all other languages.\r\n   */\r\n  primary: string;\r\n\r\n  /**\r\n   * In some cases we want both to be primary, but it's not clear why.\r\n   * I think it's just because we want certain tests to only use one value, but the test is meant for 2 values.\r\n   */\r\n  static bothPrimary(original: FormLanguage): FormLanguage {\r\n    return {\r\n      current: original.primary,\r\n      primary: original.primary\r\n    };\r\n  }\r\n\r\n  static diffCurrent(original: FormLanguage, current: string): FormLanguage {\r\n    return {\r\n      current: current,\r\n      primary: original.primary\r\n    };\r\n  }\r\n\r\n  static empty(): FormLanguageComplete {\r\n    return {\r\n      current: '',\r\n      primary: '',\r\n      initial: '',\r\n    };\r\n  }\r\n}\r\n\r\nexport class FormLanguageComplete extends FormLanguage {\r\n  /** initial language of the UI */\r\n  initial: string;\r\n}\r\n\r\nexport interface FormLanguagesConfig\r\n{\r\n  initial: string;\r\n  primary: string;\r\n  list: Language[];\r\n}\r\n\r\n","import { FormLanguage } from '../form/form-languages.model';\r\nimport { EavDimension } from '../shared/models/eav';\r\n\r\n\r\nexport class DimensionReader {\r\n  constructor(private dimensions: EavDimension[], private language: FormLanguage) { }\r\n\r\n  get hasCurrentWrite(): boolean {\r\n    const match = this.dimensions.find(d => d.Value === this.language.current\r\n      || (this.language.current === this.language.primary && d.Value === '*'));\r\n    return !!match;\r\n  }\r\n\r\n  get hasCurrentReadOnly(): boolean {\r\n    const currentRO = `~${this.language.current}`;\r\n    return this.dimensions.find(d => d.Value === currentRO) !== undefined;\r\n  }\r\n\r\n  get hasCurrent(): boolean {\r\n    const match = this.dimensions.find(d => d.Value === this.language.current\r\n      || d.Value === `~${this.language.current}`\r\n      || (this.language.current === this.language.primary && d.Value === '*'));\r\n    return !!match;\r\n  }\r\n}\r\n","import { EavLogger } from '../../shared/logging/eav-logger';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { EavField, EavValue } from '../shared/models/eav';\r\nimport { DimensionReader } from './dimension-reader';\r\n\r\nconst logSpecs = {\r\n  enabled: false,\r\n  name: 'FieldReader',\r\n  specs: {\r\n    all: false,\r\n    constructor: false,\r\n  }\r\n};\r\n\r\nexport class FieldReader<T = any> {\r\n  log = new EavLogger(logSpecs);\r\n\r\n  constructor(field: EavField<T>, language: string);\r\n  constructor(field: EavField<T>, language: FormLanguage);\r\n  constructor(field: EavField<T>, language: FormLanguage | string) {\r\n    this.log.fnIf('constructor', { field, language });\r\n    this.#field = field;\r\n    this.#language = typeof language === 'string' ? { current: language, primary: language } : language;\r\n    this.#values = field?.Values ?? [];\r\n    this.#noData = !field || !field.Values || field.Values.length === 0;\r\n  }\r\n\r\n  #noData = true;\r\n\r\n  #field: EavField<T>;\r\n  /** Values - never empty for read-safety */\r\n  #values: EavValue<T>[];\r\n  #language: FormLanguage;\r\n\r\n  get current(): EavValue<T> | null {\r\n    return this.ofLanguage(this.#language); // first match if any is the one we're looking for\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Priority:\r\n   * 1. value for current language\r\n   * 2. value for all languages\r\n   * 3. value for default language\r\n   *\r\n   * @readonly\r\n   * @type {EavValue<T>}\r\n   * @memberof FieldReader\r\n   */\r\n  get currentOrDefault(): EavValue<T> {\r\n    if (this.#noData) return null;\r\n    return this.current\r\n      // note that having both languages primary will also result in checking the '*' dimension\r\n      ?? this.ofLanguage(FormLanguage.bothPrimary(this.#language));\r\n  }\r\n\r\n  /**\r\n   * Priority:\r\n   * 1. value for current language\r\n   * 2. value for all languages\r\n   * 3. value for default language\r\n   * 4. first/any value in the system\r\n   */\r\n  get currentOrDefaultOrAny(): EavValue<T> | null {\r\n    if (this.#noData) return null;\r\n    return this.currentOrDefault ?? this.#values[0] ?? null;\r\n  }\r\n\r\n\r\n  ofLanguage(language: FormLanguage): EavValue<T> | null {\r\n    if (this.#noData) return null;\r\n    return this.#values.filter(val => new DimensionReader(val.Dimensions, language).hasCurrent)[0] ?? null;\r\n  }\r\n\r\n  /** Check if there is a value on the specified primary language or on the '*' dimension */\r\n  get hasPrimary(): boolean {\r\n    if (this.#noData) return false;\r\n    const primary = this.#language.primary;\r\n    return this.#values.filter(val => val.Dimensions.find(d => d.Value === primary || d.Value === '*')).length > 0;\r\n  }\r\n\r\n  get hasCurrentReadonly(): boolean {\r\n    if (this.#noData) return false;\r\n    return this.#values.filter(val => new DimensionReader(val.Dimensions, this.#language).hasCurrentReadOnly).length > 0;\r\n  }\r\n\r\n  /** A value in specified Language is editable, if assigned to current language or to '*' (but only when on default-language) */\r\n  get hasEditableValues(): boolean {\r\n    if (this.#noData) return false;\r\n    return this.#valuesEditableOf().length > 0;\r\n  }\r\n\r\n  /** Number of editable translatable fields that */\r\n  countEditable(): number {\r\n    return this.#valuesEditableOf().length;\r\n  }\r\n\r\n  /** Number of editable translatable fields that have some content (not empty/null) */\r\n  countEditableWithContents(): number {\r\n    return this.#valuesEditableOf().filter(v => v.Value != \"\" && v.Value != null)?.length;\r\n  }\r\n\r\n  /**\r\n   * Values of a field are for the current language,\r\n   * if they are assigned to the current language or to '*' (but only when the current-language is also the primary-language)\r\n   */\r\n  #valuesEditableOf(language?: FormLanguage): EavValue<T>[] {\r\n    if (this.#noData) return [];\r\n    language ??= this.#language;\r\n    return this.#values.filter(val => new DimensionReader(val.Dimensions, language).hasCurrentWrite);\r\n  }\r\n\r\n  /** Value of current language which is editable. `null` if not found. */\r\n  get currentEditable(): EavValue<T> {\r\n    if (this.#noData) return null;\r\n    const dimension = this.#language.current;\r\n    return this.#values.find(v => v.Dimensions.find(x => x.Value === dimension)) ?? null;\r\n  }\r\n\r\n  isEditableOrReadonlyTranslationExist(): boolean {\r\n    if (this.#noData) return false;\r\n    return this.#valuesEditableOf().length > 0;\r\n  }\r\n\r\n}\r\n","import { EavEntity, EavEntityAttributes, EavField } from '../models/eav';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\nimport { FormLanguage } from '../../form/form-languages.model';\r\nimport { EavLogger } from '../../../shared/logging/eav-logger';\r\nimport { FieldReader } from '../../localization/field-reader';\r\n\r\nconst logSpecs = {\r\n  enabled: false,\r\n  name: 'EntityReader',\r\n  specs: {\r\n    all: false,\r\n    constructor: false,\r\n  }\r\n};\r\n\r\nexport class EntityReader implements FormLanguage {\r\n\r\n  /** @inheritdoc */\r\n  public current: string;\r\n  /** @inheritdoc */\r\n  public primary: string;\r\n\r\n  log = new EavLogger(logSpecs);\r\n\r\n  constructor(formLanguage: FormLanguage);\r\n  constructor(current: string, primary: string);\r\n  constructor(current: FormLanguage | string, primary?: string) {\r\n    this.log.fnIf('constructor', { current, primary });\r\n    if (typeof current === 'string') {\r\n      this.current = current;\r\n      this.primary = primary;\r\n    } else {\r\n      this.current = current.current;\r\n      this.primary = current.primary;\r\n    }\r\n  }\r\n\r\n  // WIP - to make code clearer, this is what should be used from now on\r\n  // But we'll probably end up calling this from the EntityReader only, so it should be straight forward\r\n  getBestValue<T>(attributeValues: EavField<T>, defaultValue: T = null): T {\r\n    const fieldReader = new FieldReader<T>(attributeValues, this);\r\n    return fieldReader.currentOrDefaultOrAny?.Value ?? defaultValue;\r\n    // return LocalizationHelpers.translate<T>(this, attributeValues as EavField<T>, defaultValue);\r\n  }\r\n\r\n  public flatten<T>(metadataItem: EavEntity): T {\r\n    return this.flattenAll<T>([metadataItem]);\r\n  }\r\n\r\n  public flattenAll<T>(metadataItems: EavEntity[]): T {\r\n    if (metadataItems == null || metadataItems.length === 0 || metadataItems[0] == null)\r\n      return {} as T;\r\n\r\n    const merged: Record<string, any> = {};\r\n    // copy metadata settings which are not @All\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id === '@All') continue;\r\n\r\n      for (const [name, values] of Object.entries(item.Attributes)) {\r\n        const value = this.getBestValue(values);\r\n        merged[name] = value;\r\n      }\r\n    }\r\n\r\n    // copy @All metadata settings, overwriting previous settings\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id !== '@All') continue;\r\n\r\n      for (const [name, values] of Object.entries(item.Attributes)) {\r\n        const value = this.getBestValue(values);\r\n        // do not overwrite previous settings if @All is empty\r\n        const exists = merged[name] != null;\r\n        const emptyAll = value == null || value === '';\r\n        if (exists && emptyAll) continue;\r\n\r\n        merged[name] = value;\r\n      }\r\n    }\r\n\r\n    return merged as T;\r\n  }\r\n\r\n  currentValues(itemAttributes: EavEntityAttributes): ItemValuesOfLanguage {\r\n\r\n    const formValues: ItemValuesOfLanguage = Object.entries(itemAttributes)\r\n      .reduce((acc, [name, values]) => {\r\n        acc[name] = this.getBestValue(values);\r\n        return acc;\r\n      }, {} as ItemValuesOfLanguage);\r\n\r\n    return formValues;\r\n  }\r\n\r\n}\r\n","import { ServiceBase } from '../../../shared/services/service-base';\r\nimport { EavLogger } from '../../../shared/logging/eav-logger';\r\nimport { Injectable, inject, signal, Injector, OnDestroy, effect, computed, Signal } from '@angular/core';\r\nimport { FieldState } from '../../fields/field-state';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\n\r\nconst logSpecs = {\r\n  enabled: false,\r\n  name: 'FieldMask',\r\n};\r\n\r\nconst FieldsFind = /\\[.*?\\]/ig;\r\nconst FieldUnwrap = /[\\[\\]]/ig;\r\n/**\r\n * Create a new FieldMask instance and access result with resolve\r\n * @example\r\n * const mask = new FieldMask(\"[FirstName]\", formGroup.controls);\r\n * const maskValue = mask.resolve();\r\n *\r\n * @param mask a string like \"[FirstName] [LastName]\"\r\n * @param model usually FormGroup controls, passed into here\r\n * @param overloadPreCleanValues a function which will \"scrub\" the found field-values\r\n */\r\n@Injectable()\r\nexport class FieldMask extends ServiceBase /* for field-change subscription */ implements OnDestroy {\r\n\r\n  #fieldState = inject(FieldState);\r\n  #formConfig = inject(FormConfigService);\r\n\r\n  log = new EavLogger(logSpecs);\r\n  constructor(private injector: Injector) {\r\n    super();\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy();\r\n  }\r\n\r\n  /**\r\n   * The result of the mask as a signal, for external use/subscribing.\r\n   */\r\n  public result = signal<string>('');\r\n\r\n  #controls = this.#fieldState.group.controls;\r\n  #fieldConfig = this.#fieldState.config;\r\n\r\n  /**\r\n   * The mask as a signal.\r\n   * This allows us to use a simple value or a possibly runtime-changing mask. \r\n   */\r\n  #maskSignal = signal<Signal<string>>(signal<string>(''));\r\n\r\n  /**\r\n   * The final mask to use - either picking the signal or the text\r\n   * TODO: we should be able to simplify this to just use a signal\r\n   */\r\n  #mask = computed(() => this.#maskSignal()());\r\n\r\n  /** Fields used in the mask */\r\n  #fieldsUsedInMask = computed(() => this.#extractFieldNames(this.#mask()));\r\n\r\n  // #fieldValuesSignals = inject(FieldsSettingsService).fieldValues;\r\n\r\n  // // TODO create a multi-field signal?\r\n\r\n  // public result2 = computed(() => {\r\n  //   // listen to all the fields for changes\r\n  //   this.#fieldsUsedInMask().forEach(field => {\r\n\r\n  //   });\r\n  // });\r\n\r\n\r\n  /**\r\n   * Attach any processing events before the mask is resolved the first time\r\n   */\r\n  public initPreClean(overloadPreCleanValues: (key: string, value: string) => string): this {\r\n    this.log.a('initPreClean');\r\n    this.preClean = overloadPreCleanValues;\r\n    return this;\r\n  }\r\n\r\n  public init(name: string, mask: string): this {\r\n    return this.initSignal(name, signal(mask));\r\n  }\r\n\r\n  public initSignal(name: string, mask: Signal<string>): this {\r\n    this.log.extendName(`-${name}`);\r\n    const l = this.log.fn('init', { name, mask });\r\n    this.#maskSignal.set(mask);\r\n    this.#updateMaskFinal();\r\n    return l.r(this, 'first result:' + this.result());\r\n  }\r\n\r\n  /**\r\n   * Activate an aggressive change logger to debug what's happening.\r\n   * Should only be used in development, as it will log a lot of data to the console.\r\n   */\r\n  public logChanges(): this {\r\n    // use logger, but if not enabled, create new just for this\r\n    const l = this.log.enabled ? this.log : new EavLogger(logSpecs);\r\n    effect(() => l.a(`Mask '${this.#mask()}' value changed to: ${this.result()}`), { injector: this.injector });\r\n    return this;\r\n  }\r\n\r\n  #updateMaskFinal() {\r\n    // bind auto-watch only if needed...\r\n    // otherwise it's just on-demand\r\n    this.#watchAllFields();\r\n    this.#onChange();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Process a mask to the get the final value\r\n   */\r\n  #process(): string {\r\n\r\n    // if no mask, exit early\r\n    if (!hasPlaceholders(this.#mask()))\r\n      return this.#mask();\r\n\r\n    let value = lowercaseInsideSquareBrackets(this.#mask());\r\n\r\n    if (this.#formConfig != null)\r\n      value = value\r\n        .replace('[app:appid]', this.#formConfig.config.appId.toString())\r\n        .replace('[app:zoneid]', this.#formConfig.config.zoneId.toString());\r\n\r\n    if (this.#fieldConfig != null)\r\n      value = value\r\n        .replace('[guid]', this.#fieldConfig.entityGuid)\r\n        .replace('[id]', this.#fieldConfig.entityId.toString());\r\n\r\n    this.#fieldsUsedInMask().forEach((e, i) => {\r\n      const replaceValue = this.#controls?.[e]?.value ?? '';\r\n      const cleaned = this.preClean(e, replaceValue);\r\n      value = value.replace('[' + e.toLowerCase() + ']', cleaned);\r\n    });\r\n    return value;\r\n  }\r\n\r\n  /** Retrieves a list of all fields used in the mask */\r\n  #extractFieldNames(mask: string): string[] {\r\n    // exit early if mask very simple or not a mask\r\n    if (!mask || !hasPlaceholders(mask))\r\n      return [];\r\n\r\n    const matches = mask.match(FieldsFind);\r\n    \r\n    // TODO: ask is this good\r\n    if (!matches)\r\n      return [mask];\r\n    \r\n    const fields: string[] = matches.map(token => token.replace(FieldUnwrap, ''));\r\n    return fields;\r\n  }\r\n\r\n  /**\r\n   * Default preClean function, if no other function was specified for this\r\n   * Will be replaced if need be.\r\n   */\r\n  private preClean(key: string, value: string): string { return value; }\r\n\r\n  /** Change-event - will only fire if it really changes */\r\n  #onChange() {\r\n    const maybeNew = this.#process();\r\n    this.result.set(maybeNew);\r\n  }\r\n\r\n  /**\r\n   * Add watcher and execute onChange.\r\n   * Uses observables, since that's what angular provides on valueChanges.\r\n   */\r\n  #watchAllFields() {\r\n    // add a watch for each field in the field-mask\r\n    this.#fieldsUsedInMask().forEach(field => {\r\n      const control = this.#controls[field];\r\n      if (!control) return;\r\n      const valueSub = control.valueChanges.subscribe(_ => this.#onChange());\r\n      this.subscriptions.add(valueSub);\r\n    });\r\n  }\r\n}\r\n\r\n\r\nfunction hasPlaceholders(mask: string): boolean {\r\n  return (mask ?? '').includes('[');\r\n}\r\n\r\n/** used for query parameters */\r\nfunction lowercaseInsideSquareBrackets(value: string) {\r\n  return value.replace(/\\[([^\\]]+)\\]/g, (_, group) => `[${group.toLowerCase()}]`);\r\n}\r\n","import { EntityReader } from '../shared/helpers';\r\nimport { ItemIdentifierEditConfig } from '../../shared/models/edit-form.model';\r\nimport { EavContentType } from '../shared/models/eav';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { ContentTypeSettings } from './content-type-settings.model';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\n\r\nexport class ContentTypeSettingsHelpers {\r\n\r\n  /**\r\n   * Initialize the default settings of a ContentType to ensure everything is set or empty-string etc.\r\n   * @returns \r\n   */\r\n  static getDefaultSettings(reader: EntityReader, contentType: EavContentType, itemHeader: ItemIdentifierEditConfig): ContentTypeSettings {\r\n    const metadata = reader.flattenAll<ContentTypeSettings>(contentType.Metadata);\r\n    const defaultSettings = { ...metadata };\r\n    defaultSettings.Description ??= '';\r\n    defaultSettings.EditInstructions ??= '';\r\n    defaultSettings.Features ??= '';\r\n    defaultSettings.Label ??= '';\r\n    defaultSettings.ListInstructions ??= '';\r\n    defaultSettings.Notes ??= '';\r\n    defaultSettings.Icon ??= '';\r\n    defaultSettings.Link ??= '';\r\n    defaultSettings._itemTitle = this.getTitle(contentType, reader);\r\n    defaultSettings._slotCanBeEmpty = itemHeader.IsEmptyAllowed ?? false;\r\n    defaultSettings._slotIsEmpty = itemHeader.IsEmpty ?? false;\r\n    return defaultSettings;\r\n  }\r\n\r\n  static getTitle(contentType: EavContentType, language: FormLanguage): string {\r\n    try {\r\n      // xx ContentType is a historic bug and should be fixed when JSONs are rechecked\r\n      const type = contentType.Metadata.find(metadata => metadata.Type.Name === 'ContentType' || metadata.Type.Name === 'xx ContentType');\r\n      let label = (type)\r\n        ? new FieldReader(type.Attributes.Label, language).currentOrDefault?.Value\r\n        : null;\r\n      label = label || contentType.Name;\r\n      return label;\r\n    } catch (error) {\r\n      return contentType.Name;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n","export class FileTypeHelpers {\r\n  private static defaultIcon = 'file';\r\n  private static customExtensions: Record<string, string> = {\r\n    doc: 'file-word',\r\n    docx: 'file-word',\r\n    xls: 'file-excel',\r\n    xlsx: 'file-excel',\r\n    ppt: 'file-powerpoint',\r\n    pptx: 'file-powerpoint',\r\n    pdf: 'file-pdf',\r\n    mp3: 'file-audio',\r\n    avi: 'file-video',\r\n    mpg: 'file-video',\r\n    mpeg: 'file-video',\r\n    mov: 'file-video',\r\n    mp4: 'file-video',\r\n    zip: 'file-archive',\r\n    rar: 'file-archive',\r\n    txt: 'file-text',\r\n    html: 'file-code',\r\n    css: 'file-code',\r\n    xml: 'file-code',\r\n    xsl: 'file-code',\r\n  };\r\n  private static matExtensions: Record<string, string> = {\r\n    vcf: 'person',\r\n  };\r\n\r\n  static getExtension(filename: string) {\r\n    return filename.substring(filename.lastIndexOf('.') + 1).toLocaleLowerCase();\r\n  }\r\n\r\n  static getIconClass(filename: string) {\r\n    const ext = this.getExtension(filename);\r\n    return this.matExtensions[ext] || this.customExtensions[ext] || this.defaultIcon;\r\n  }\r\n\r\n  static isKnownType(filename: string) {\r\n    return this.matExtensions[this.getExtension(filename)] != null;\r\n  }\r\n\r\n  static isImage(filename: string) {\r\n    return this.isImgRegex().test(filename);\r\n  }\r\n\r\n  private static isImgRegex() {\r\n    return /(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*\\.(?:jpg|jpeg|gif|png|webp))(?:\\?([^#]*))?(?:#(.*))?/i;\r\n  }\r\n}\r\n","import { FieldSettings, FieldValue } from '../../../../../../edit-types';\r\nimport { InputTypeStrict, InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { EavLogger } from '../../../shared/logging/eav-logger';\r\nimport { ItemIdentifierShared } from '../../../shared/models/edit-form.model';\r\n\r\nconst logThis = false;\r\n\r\nexport class FieldHelper {\r\n\r\n  /** Include itemHeader if you need data from prefill, and set onlyPrefill if you only need parsed prefill */\r\n  static getDefaultOrPrefillValue(\r\n    name: string,\r\n    inputType: InputTypeStrict,\r\n    settings: FieldSettings,\r\n    itemHeader?: Pick<ItemIdentifierShared, \"Prefill\">,\r\n    onlyPrefill?: boolean,\r\n  ): FieldValue {\r\n    const log = new EavLogger('InputFieldHelpers', logThis);\r\n    const l = log.fn('parseDefaultValue', { name, inputType, settings, itemHeader, onlyPrefill });\r\n\r\n    const prefillRaw = itemHeader?.Prefill?.[name];\r\n    if (onlyPrefill && prefillRaw === undefined)\r\n      return l.rNull('only prefill, but no prefill data found');\r\n\r\n    let defaultValue = prefillRaw?.toString() ?? settings.DefaultValue;\r\n\r\n    l.values({ defaultValue });\r\n\r\n    switch (inputType) {\r\n      case InputTypeCatalog.BooleanDefault:\r\n        return defaultValue?.toLowerCase() === 'true';\r\n      case InputTypeCatalog.BooleanTristate:\r\n        return defaultValue != null && defaultValue !== ''\r\n          ? defaultValue.toLowerCase() === 'true'\r\n          : null;\r\n      case InputTypeCatalog.DateTimeDefault:\r\n        return defaultValue != null && defaultValue !== ''\r\n          ? new Date(defaultValue).toJSON()\r\n          : null;\r\n      case InputTypeCatalog.NumberDefault:\r\n      case InputTypeCatalog.NumberDropdown:\r\n      case InputTypeCatalog.NumberPicker:\r\n        return defaultValue != null && defaultValue !== ''\r\n          ? !isNaN(Number(defaultValue)) ? Number(defaultValue) : null\r\n          : null;\r\n      case InputTypeCatalog.EntityDefault:\r\n      case InputTypeCatalog.EntityQuery:\r\n      case InputTypeCatalog.EntityContentBlocks:\r\n      case InputTypeCatalog.EntityPicker:\r\n        // Empty - return []\r\n        if (defaultValue == null || defaultValue === '')\r\n          return [];\r\n\r\n        // string has { } characters, we must switch them to quotes for parsing below\r\n        // 2024-06-01 2dm not sure why this is an option..., maybe some interim encoding?\r\n        if (defaultValue.includes('{'))\r\n          defaultValue = defaultValue.replace(/[\\{\\}]/g, '\\\"');\r\n\r\n        // list but no array, add brackets\r\n        if (defaultValue.includes(',') && !defaultValue.includes('[')) {\r\n          const guids = defaultValue.split(',').map(guid => guid.trim());\r\n          defaultValue = JSON.stringify(guids);\r\n        }\r\n\r\n        // Finally parse\r\n        return defaultValue.startsWith('[') // an array with guid strings\r\n          ? JSON.parse(defaultValue) // if it's a string containing an array\r\n          : [defaultValue.replace(/\"/g, '')]; // just a guid string, but might have quotes\r\n      default:\r\n        return defaultValue ?? '';\r\n    }\r\n  }\r\n}\r\n","export class SanitizeHelper {\r\n\r\n  private static removeFromStart(sanitized: string, charToRemove: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    while (sanitized.substring(0, 1) === charToRemove) {\r\n      sanitized = sanitized.substring(1);\r\n    }\r\n    return sanitized;\r\n  }\r\n\r\n  private static removeFromEnd(sanitized: string, charToRemove: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    while (sanitized.substring(sanitized.length - 1, sanitized.length) === charToRemove) {\r\n      sanitized = sanitized.substring(0, sanitized.length - 1);\r\n    }\r\n    return sanitized;\r\n  }\r\n\r\n  private static cleanBadPath(sanitized: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    const goodChar = '_';\r\n    const illegalRe = /[\\?<>\\\\:\\*\\|\":]/g;\r\n    const controlRe = /[\\x00-\\x1f\\x80-\\x9f]/g;\r\n    const reservedRe = /^\\.+$/;\r\n    const windowsReservedRe = /^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\\..*)?$/i;\r\n    const windowsTrailingRe = /[\\. ]+$/;\r\n    return sanitized\r\n      .replace(illegalRe, goodChar)\r\n      .replace(controlRe, goodChar)\r\n      .replace(reservedRe, goodChar)\r\n      .replace(windowsReservedRe, goodChar)\r\n      .replace(windowsTrailingRe, goodChar);\r\n  }\r\n\r\n  // sanitize path\r\n  static sanitizePath(sanitized: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    // remove slashes form start of path\r\n    sanitized = this.removeFromStart(sanitized, '\\/');\r\n\r\n    // remove slashed form end of path\r\n    sanitized = this.removeFromEnd(sanitized, '\\/');\r\n\r\n    // remove backslashes form start of path\r\n    sanitized = this.removeFromStart(sanitized, '\\\\');\r\n\r\n    // remove backslashes form end of path\r\n    sanitized = this.removeFromEnd(sanitized, '\\\\');\r\n\r\n    // replace bad\r\n    sanitized = this.cleanBadPath(sanitized);\r\n\r\n    return sanitized;\r\n  }\r\n\r\n  // sanitize file or folder name\r\n  static sanitizeName(sanitized: string): string {\r\n    // check for undefined\r\n    if (!sanitized) { return sanitized; }\r\n\r\n    // in addition to all path validation rules\r\n    // slashes are not valid in file or folder name\r\n    const replacement = '_';\r\n    const illegalRe = /\\//g;\r\n    return this.sanitizePath(sanitized).replace(illegalRe, replacement);\r\n  }\r\n}\r\n","import { computed, Signal, signal } from '@angular/core';\r\nimport { EavLogger } from '../../../shared/logging/eav-logger';\r\nimport { ComputedCacheHelper } from '../../../shared/signals/computed-cache';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { LogSpecs } from '../../../shared/logging/log-specs';\r\n\r\nconst logThisUndefined = true;\r\nconst nameOfThis = 'SignalStoreBase';\r\n\r\n/**\r\n * Signal based store for any kind of data which is accessed by a key.\r\n * - The data type is generic.\r\n * - The key type can be customized.\r\n * - Standard get/add/remove methods exist, and can be augmented by the inheriting store.\r\n */\r\nexport class SignalStoreBase<TKey extends string | number, TValue> {\r\n  /** Main Cache */\r\n  #cache = signal<Record<TKey, TValue>>({} as Record<TKey, TValue>);\r\n\r\n  /** Cached version of the list, with the latest object-values */\r\n  #list = computed(() => Object.values(this.#cache()) as TValue[]);\r\n\r\n  /** Cache for the inheriting classes, but as read-only */\r\n  protected get cache(): Signal<Record<TKey, TValue>> {\r\n    return this.#cache;\r\n  }\r\n\r\n  /** List for the inheriting classes, but as read-only */\r\n  protected get list(): Signal<TValue[]> {\r\n    return this.#list;\r\n  }\r\n\r\n  /**\r\n   * Function to get the key / id for storing in the cache.\r\n   * Default is to get the 'id' property of the item.\r\n   * This should be overriden in the inheriting class.\r\n   */\r\n  protected getId: (item: TValue) => TKey = (item) => (item as any).id as TKey;\r\n\r\n  protected sanitizeAdd: (item: TValue) => TValue = (item) => item;\r\n\r\n  name: string;\r\n\r\n  protected log: EavLogger;\r\n\r\n  constructor(logSpecs: LogSpecs) {\r\n    this.log = new EavLogger({ name: nameOfThis, enabled: logThisUndefined, ...logSpecs });\r\n    this.log.a('SignalStoreBase created', { options: logSpecs });\r\n    this.name = logSpecs.name;\r\n  }\r\n\r\n  //#region Add / Update / Remove / Clear Cache\r\n\r\n  add(item: TValue): void {\r\n    const l = this.log.fn('add', { item });\r\n    if (!item)\r\n      return l.end('item is null');\r\n\r\n    // add to signal\r\n    this.#cache.set({\r\n      ...this.#cache(),\r\n      [this.getId(item)]: this.sanitizeAdd(item)\r\n    });\r\n    l.end('added');\r\n  }\r\n\r\n  addMany(items: TValue[]): void {\r\n    var l = this.log.fn('addMany', { items });\r\n    if (!items || items.length == 0)\r\n      return l.end('items is null or empty');\r\n\r\n    // also add to signal, but in one go\r\n    const result = items.reduce((acc, item) => ({\r\n      ...acc,\r\n      [this.getId(item)]: this.sanitizeAdd(item)\r\n    }), { ...this.#cache() });\r\n    \r\n    this.#cache.set(result);\r\n    l.end('added');\r\n  }\r\n\r\n  update(id: TKey, item: Partial<TValue>): void {\r\n    const l = this.log.fn('update', { id, item });\r\n    if (!id || !item)\r\n      return l.end('id or item is null');\r\n\r\n    const before = this.get(id);\r\n    if (!before)\r\n      return l.end(`Item with id ${id} not found in store`);\r\n\r\n    // merge\r\n    const newItem = { ...before, ...item };\r\n\r\n    // add to signal\r\n    this.#cache.set({\r\n      ...this.#cache(),\r\n      [id]: newItem\r\n    });\r\n    l.end('updated');\r\n  }\r\n\r\n  remove(id: TKey): void {\r\n    const l = this.log.fn('remove', { id });\r\n    const { [id]: _, ...updatedStore } = this.#cache();\r\n    this.#cache.set(updatedStore as Record<TKey, TValue>);\r\n    l.end('removed');\r\n  }\r\n\r\n  clearCache(): void {\r\n    const l = this.log.fn('clearCache');\r\n    this.#cache.set({} as Record<TKey, TValue>);\r\n    l.end('cleared');\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Now-Getters\r\n\r\n  get(id: TKey): TValue {\r\n    const result = this.#cache()[id];\r\n    this.log.a(`get(${id}) - ` + (result == null ? 'not' : '') + 'found');\r\n    return result;\r\n  }\r\n\r\n  getAll(): TValue[] {\r\n    const result = this.#list();\r\n    this.log.a('getAll() - ' + `found ${result.length} items`);\r\n    return result;\r\n  }\r\n\r\n  getMany(ids: TKey[]): TValue[] {\r\n    const l = this.log.fn('getMany', { ids });\r\n    const result = ids\r\n      .map(id => this.#cache()[id])\r\n      .filter(item => item != null);\r\n    return l.r(result, `found ${result.length} items`);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Signal Getters\r\n\r\n  getSignal(id: TKey): Signal<TValue> {\r\n    const result = this.#itemSignalsCache.getOrCreateWithInfo(id, () => this.get(id));\r\n    this.log.a(`getSignal(${id})`, { isNew: result.isNew });\r\n    return result.signal;\r\n  }\r\n  #itemSignalsCache = new ComputedCacheHelper<TKey, TValue>('item');\r\n\r\n\r\n  getManySignal(ids: TKey[]): Signal<TValue[]> {\r\n    const sig = computed(\r\n      () => ids.map(id => this.get(id)).filter(item => item != null),\r\n      { equal: isEqual }\r\n    );\r\n    this.log.a('getManySignal()', { ids });\r\n    return sig;\r\n  }\r\n\r\n  getAllSignal(): Signal<TValue[]> {\r\n    const list = this.#list;\r\n    this.log.a(`getAllSignal() - found ${list().length} items`);\r\n    return list;\r\n  }\r\n\r\n  //#endregion\r\n\r\n}\r\n","import { toObservable } from '@angular/core/rxjs-interop';\r\nimport { SignalStoreBase } from './signal-store-base';\r\nimport { Observable } from 'rxjs';\r\nimport { mapUntilChanged } from '../../../shared/rxJs/mapUntilChanged';\r\nimport { LogSpecs } from '../../../shared/logging/log-specs';\r\n\r\nexport abstract class SignalStoreObservableBase<TKey extends string | number, TValue> extends SignalStoreBase<TKey, TValue> {\r\n\r\n  /** Old / existing functionality with observables */\r\n  #cache$ = toObservable(this.cache);\r\n\r\n  #list$ = toObservable(this.list);\r\n\r\n  // publish only as a read-only signal\r\n  protected get cache$(): Observable<Record<TKey, TValue>> {\r\n    return this.#cache$;\r\n  }\r\n\r\n  protected get list$(): Observable<TValue[]> {\r\n    return this.#list$;\r\n  }\r\n\r\n  getList$(): Observable<TValue[]> {\r\n    return this.list$;\r\n  }\r\n\r\n  getMany$(ids?: TKey[]): Observable<TValue[]> {\r\n    return this.cache$.pipe(\r\n      mapUntilChanged(obj => ids.map(id => obj[id]).filter(m => m != null)),\r\n    );\r\n  }\r\n\r\n}","export const InputTypeCatalog = {\r\n  // Boolean\r\n  BooleanDefault: 'boolean-default',\r\n  BooleanTristate: 'boolean-tristate',\r\n\r\n  // Custom\r\n  CustomDefault: 'custom-default',\r\n  CustomGps: 'custom-gps',\r\n  CustomJsonEditor: 'custom-json-editor',\r\n\r\n  // Date / Time\r\n  DateTimeDefault: 'datetime-default',\r\n\r\n  DefaultSuffix: '-default',\r\n\r\n  // Empty\r\n  EmptyDefault: 'empty-default',\r\n  EmptyEnd: 'empty-end',\r\n  EmptyMessage: 'empty-message',\r\n\r\n  // Entity - all pickers\r\n  EntityContentBlocks: 'entity-content-blocks',\r\n  EntityDefault: 'entity-default',\r\n  EntityQuery: 'entity-query',\r\n\r\n  // External\r\n  ExternalWebComponent: 'external-web-component',\r\n\r\n  // Hyperlink / File\r\n  HyperlinkDefault: 'hyperlink-default',\r\n  HyperlinkLibrary: 'hyperlink-library',\r\n\r\n  // Numbers\r\n  NumberDefault: 'number-default',\r\n  NumberDropdown: 'number-dropdown', // picker\r\n\r\n  // String\r\n  StringDefault: 'string-default',\r\n  StringDropdown: 'string-dropdown', // picker\r\n  StringDropdownQuery: 'string-dropdown-query', // picker\r\n  StringFontIconPicker: 'string-font-icon-picker',\r\n  StringJson: 'string-json',\r\n  StringTemplatePicker: 'string-template-picker', // picker\r\n  StringUrlPath: 'string-url-path',\r\n  StringWysiwyg: 'string-wysiwyg',\r\n\r\n  /** New Pickers v17.x */\r\n  EntityPicker: 'entity-picker',\r\n  StringPicker: 'string-picker',\r\n  NumberPicker: 'number-picker',\r\n\r\n  /** for all situations where we need a fallback; new v16.04 */\r\n  Unknown: 'unknown',\r\n} as const;\r\n\r\nexport type InputTypeStrict = typeof InputTypeCatalog[keyof typeof InputTypeCatalog];\r\n","export class ArrayHelpers {\r\n  /**\r\n   * Toggles an item in an array. If the item is not in the array, it is added. If it is in the array, it is removed.\r\n   * @param item The item to toggle\r\n   * @param array The array to toggle the item in\r\n   */\r\n  static toggleInArray<T>(item: T, array: T[]): void {\r\n    const index = array.indexOf(item);\r\n    if (index === -1) {\r\n      array.push(item);\r\n    } else {\r\n      array.splice(index, 1);\r\n    }\r\n  }\r\n}\r\n","import { Observable, pipe, UnaryFunction } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport isEqual from 'lodash-es/isEqual';\r\n\r\n/**\r\n * Combine map and distinctUntilChanged, as this is a very common pattern.\r\n * @param fn the mapping function\r\n * @returns\r\n */\r\nexport function mapUntilChanged<T, R>(\r\n  fn: (state: T) => R\r\n): UnaryFunction<Observable<T>, Observable<R>> {\r\n  return pipe(\r\n    distinctUntilChanged(),\r\n    map(fn),\r\n    distinctUntilChanged(),\r\n  );\r\n}\r\n\r\nexport function mapUntilObjChanged<T, R>(\r\n  fn: (state: T) => R\r\n): UnaryFunction<Observable<T>, Observable<R>> {\r\n  return pipe(\r\n    distinctUntilChanged(),\r\n    map(fn),\r\n    distinctUntilChanged(isEqual),\r\n  );\r\n}\r\n","import { computed, Signal, CreateComputedOptions } from '@angular/core';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { named } from './signal.utilities';\r\n\r\nexport type ComputedCache<TKey extends string, TValue> = Record<TKey, Signal<TValue>>;\r\n\r\n/**\r\n * Special helper with Signals to cache computed signals.\r\n */\r\nexport class ComputedCacheHelper<TKey extends string | number, TValue> {\r\n\r\n  static proxy<TKey extends string | number, TValue>(\r\n    name: string = 'cache-name?',\r\n    factory: (name: string) => () => TValue, options: CreateComputedOptions<TValue> = null,\r\n  ) : Record<TKey, Signal<TValue>> {\r\n    const cch =  new ComputedCacheHelper<TKey, TValue>(name);\r\n    const proxy = cch.buildProxy(factory, options);\r\n    return proxy;\r\n  }\r\n\r\n  constructor(private name: string = 'cache-name?', private named: boolean = true) {\r\n  }\r\n\r\n  private cache: Record<TKey, Signal<TValue>> = {} as Record<TKey, Signal<TValue>>;\r\n\r\n  get(key: TKey): Signal<TValue> {\r\n    return this.cache[key];\r\n  }\r\n\r\n  buildProxy(factory: (name: string) => () => TValue, options: CreateComputedOptions<TValue> = null) {\r\n    if (this.#proxy) throw new Error(`Proxy already built; it can't be again, as the factory could be unexpectedly different.`);\r\n    this.#proxy = new Proxy(this.cache, {\r\n      get: (_, fieldName) => {\r\n        if (typeof fieldName === 'string')\r\n          return this.getOrCreate(fieldName as TKey, factory(fieldName), options);\r\n        throw new Error(`Invalid name: '${fieldName?.toString()}'`);\r\n      }\r\n    });\r\n    return this.#proxy;\r\n  }\r\n  #proxy: Record<TKey, Signal<TValue>>;\r\n\r\n  getOrCreate(key: TKey, factory: () => TValue, options: CreateComputedOptions<TValue> = null): Signal<TValue> {\r\n    return this.getOrCreateWithInfo(key, factory, options).signal;\r\n  }\r\n\r\n  getOrCreateWithInfo(key: TKey, factory: () => TValue, options: CreateComputedOptions<TValue> = null): { signal: Signal<TValue>, isNew: boolean } {\r\n    if (this.cache[key])\r\n      return { signal: this.cache[key], isNew: false };\r\n    const sig = computed(() => factory(), options ?? { equal: isEqual });\r\n    const final = this.named\r\n      ? named(`${this.name}-${key}`, sig)\r\n      : sig;\r\n    return { signal: this.set(key, final), isNew: true };\r\n  }\r\n\r\n\r\n  set(key: TKey, value: Signal<TValue>): Signal<TValue> {\r\n    this.cache[key] = value;\r\n    return value;\r\n  }\r\n\r\n  delete(key: TKey): void {\r\n    delete this.cache[key];\r\n  }\r\n\r\n  clear(): void {\r\n    Object.keys(this.cache).forEach((key) => {\r\n      delete this.cache[key as TKey];\r\n    });\r\n  }\r\n}","import { computed, signal, Signal, WritableSignal } from '@angular/core';\r\nimport { SIGNAL } from '@angular/core/primitives/signals';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { Observable, take } from 'rxjs';\r\n\r\n\r\n/**\r\n * Named signal with object equality check\r\n * @param name name for debugging\r\n * @param initialValue initial value to start the signal\r\n * @returns \r\n */\r\nexport function signalObj<T>(name: string, initialValue: T): WritableSignal<T> {\r\n  const sig = signal(initialValue, { equal: isEqual }) as WritableSignal<T>;\r\n  return named(name, sig);\r\n}\r\n\r\nexport function computedObj<T>(name: string, computation: () => T): Signal<T> {\r\n  const comp =  computed(computation, { equal: isEqual }) as Signal<T>; // needs recast, because isEqual changes it to Signal<any>\r\n  return named(name, comp);\r\n}\r\n\r\n// TODO: 2dg use this for most http signals\r\n// Either in the place where it is called, or if the service is only used in one place, in the service itself to return a signal instead\r\n/**\r\n * Convert a single http get into a simple signal.\r\n * It will initialize with the optional initialValue and then update with the httpGet result.\r\n * As such, it has a first value, and will only update once.\r\n * @param name name of the signal for debugging\r\n * @param httpRequest the http request\r\n * @param initialValue optional initial value\r\n * @returns \r\n */\r\nexport function awaitHttp<T>(name: string, httpRequest: Observable<T>, initialValue: T = null): Signal<T> {\r\n  const sig = signal(initialValue, { equal: isEqual }) as WritableSignal<T>;\r\n  // take(1) to only get the first value, and close the subscription right afterwards - which is what happens to all normal http requests\r\n  httpRequest.pipe(take(1)).subscribe(value => sig.set(value));\r\n  return named(name, sig.asReadonly());\r\n}\r\n\r\n\r\nexport function named<TSig, TVal extends Signal<TVal> | WritableSignal<TVal>>(name: string, signal: TSig): TSig {\r\n  if (!signal) return signal;\r\n  const sigAny = signal as any;\r\n  sigAny.debugName = name;\r\n  if (!sigAny[SIGNAL]) return signal;\r\n  (sigAny[SIGNAL]).debugName = name;\r\n  return signal;\r\n}\r\n\r\n\r\n\r\n// wip atm unused\r\n/** Slightly unclean signal with previous value */\r\n// https://github.com/angular/angular/issues/54339\r\nexport function computedWithPrev<T>(computation: (prev: T | undefined) => T, initial?: T): Signal<T> {\r\n\tlet previous = initial;\r\n\treturn computed(() => {\r\n\t\tconst newValue = computation(previous);\r\n\t\tprevious = newValue;\r\n\t\treturn newValue;\r\n\t}, { equal: isEqual });\r\n}","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Applies CSS prefixes to appropriate style keys.\n *\n * Note: `-ms-`, `-moz` and `-webkit-box` are no longer supported. e.g.\n *    {\n *      display: -webkit-flex;     NEW - Safari 6.1+. iOS 7.1+, BB10\n *      display: flex;             NEW, Spec - Firefox, Chrome, Opera\n *      // display: -webkit-box;   OLD - iOS 6-, Safari 3.1-6, BB7\n *      // display: -ms-flexbox;   TWEENER - IE 10\n *      // display: -moz-flexbox;  OLD - Firefox\n *    }\n */\nfunction applyCssPrefixes(target) {\n    for (let key in target) {\n        let value = target[key] ?? '';\n        switch (key) {\n            case 'display':\n                if (value === 'flex') {\n                    target['display'] = [\n                        '-webkit-flex',\n                        'flex'\n                    ];\n                }\n                else if (value === 'inline-flex') {\n                    target['display'] = [\n                        '-webkit-inline-flex',\n                        'inline-flex'\n                    ];\n                }\n                else {\n                    target['display'] = value;\n                }\n                break;\n            case 'align-items':\n            case 'align-self':\n            case 'align-content':\n            case 'flex':\n            case 'flex-basis':\n            case 'flex-flow':\n            case 'flex-grow':\n            case 'flex-shrink':\n            case 'flex-wrap':\n            case 'justify-content':\n                target['-webkit-' + key] = value;\n                break;\n            case 'flex-direction':\n                target['-webkit-flex-direction'] = value;\n                target['flex-direction'] = value;\n                break;\n            case 'order':\n                target['order'] = target['-webkit-' + key] = isNaN(+value) ? '0' : value;\n                break;\n        }\n    }\n    return target;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst INLINE = 'inline';\nconst LAYOUT_VALUES = ['row', 'column', 'row-reverse', 'column-reverse'];\n/**\n * Validate the direction|'direction wrap' value and then update the host's inline flexbox styles\n */\nfunction buildLayoutCSS(value) {\n    let [direction, wrap, isInline] = validateValue(value);\n    return buildCSS(direction, wrap, isInline);\n}\n/**\n  * Validate the value to be one of the acceptable value options\n  * Use default fallback of 'row'\n  */\nfunction validateValue(value) {\n    value = value?.toLowerCase() ?? '';\n    let [direction, wrap, inline] = value.split(' ');\n    // First value must be the `flex-direction`\n    if (!LAYOUT_VALUES.find(x => x === direction)) {\n        direction = LAYOUT_VALUES[0];\n    }\n    if (wrap === INLINE) {\n        wrap = (inline !== INLINE) ? inline : '';\n        inline = INLINE;\n    }\n    return [direction, validateWrapValue(wrap), !!inline];\n}\n/**\n * Determine if the validated, flex-direction value specifies\n * a horizontal/row flow.\n */\nfunction isFlowHorizontal(value) {\n    let [flow,] = validateValue(value);\n    return flow.indexOf('row') > -1;\n}\n/**\n * Convert layout-wrap='<value>' to expected flex-wrap style\n */\nfunction validateWrapValue(value) {\n    if (!!value) {\n        switch (value.toLowerCase()) {\n            case 'reverse':\n            case 'wrap-reverse':\n            case 'reverse-wrap':\n                value = 'wrap-reverse';\n                break;\n            case 'no':\n            case 'none':\n            case 'nowrap':\n                value = 'nowrap';\n                break;\n            // All other values fallback to 'wrap'\n            default:\n                value = 'wrap';\n                break;\n        }\n    }\n    return value;\n}\n/**\n * Build the CSS that should be assigned to the element instance\n * BUG:\n *   1) min-height on a column flex container wont apply to its flex item children in IE 10-11.\n *      Use height instead if possible; height : <xxx>vh;\n *\n *  This way any padding or border specified on the child elements are\n *  laid out and drawn inside that element's specified width and height.\n */\nfunction buildCSS(direction, wrap = null, inline = false) {\n    return {\n        display: inline ? 'inline-flex' : 'flex',\n        'box-sizing': 'border-box',\n        'flex-direction': direction,\n        'flex-wrap': wrap || null,\n    };\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Extends an object with the *enumerable* and *own* properties of one or more source objects,\n * similar to Object.assign.\n *\n * @param dest The object which will have properties copied to it.\n * @param sources The source objects from which properties will be copied.\n */\nfunction extendObject(dest, ...sources) {\n    if (dest == null) {\n        throw TypeError('Cannot convert undefined or null to object');\n    }\n    for (let source of sources) {\n        if (source != null) {\n            for (let key in source) {\n                if (source.hasOwnProperty(key)) {\n                    dest[key] = source[key];\n                }\n            }\n        }\n    }\n    return dest;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { INLINE, LAYOUT_VALUES, applyCssPrefixes, buildLayoutCSS, extendObject, isFlowHorizontal, validateValue, validateWrapValue };\n","import * as i0 from '@angular/core';\nimport { APP_BOOTSTRAP_LISTENER, PLATFORM_ID, NgModule, Injectable, InjectionToken, Inject, inject, Directive } from '@angular/core';\nimport { isPlatformBrowser, DOCUMENT, isPlatformServer } from '@angular/common';\nimport { BehaviorSubject, Observable, merge, Subject, asapScheduler, of, fromEvent } from 'rxjs';\nimport { applyCssPrefixes, extendObject, buildLayoutCSS } from '@angular/flex-layout/_private-utils';\nimport { filter, tap, debounceTime, switchMap, map, distinctUntilChanged, takeUntil, take } from 'rxjs/operators';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Find all of the server-generated stylings, if any, and remove them\n * This will be in the form of inline classes and the style block in the\n * head of the DOM\n */\nfunction removeStyles(_document, platformId) {\n    return () => {\n        if (isPlatformBrowser(platformId)) {\n            const elements = Array.from(_document.querySelectorAll(`[class*=${CLASS_NAME}]`));\n            // RegExp constructor should only be used if passing a variable to the constructor.\n            // When using static regular expression it is more performant to use reg exp literal.\n            // This is also needed to provide Safari 9 compatibility, please see\n            // https://stackoverflow.com/questions/37919802 for more discussion.\n            const classRegex = /\\bflex-layout-.+?\\b/g;\n            elements.forEach(el => {\n                el.classList.contains(`${CLASS_NAME}ssr`) && el.parentNode ?\n                    el.parentNode.removeChild(el) : el.className.replace(classRegex, '');\n            });\n        }\n    };\n}\n/**\n *  Provider to remove SSR styles on the browser\n */\nconst BROWSER_PROVIDER = {\n    provide: APP_BOOTSTRAP_LISTENER,\n    useFactory: removeStyles,\n    deps: [DOCUMENT, PLATFORM_ID],\n    multi: true\n};\nconst CLASS_NAME = 'flex-layout-';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * *****************************************************************\n * Define module for common Angular Layout utilities\n * *****************************************************************\n */\nclass CoreModule {\n}\nCoreModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: CoreModule, deps: [], target: i0.FactoryTarget.NgModule });\nCoreModule.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.0.2\", ngImport: i0, type: CoreModule });\nCoreModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: CoreModule, providers: [BROWSER_PROVIDER] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: CoreModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [BROWSER_PROVIDER]\n                }]\n        }] });\n\n/**\n * Class instances emitted [to observers] for each mql notification\n */\nclass MediaChange {\n    /**\n     * @param matches whether the mediaQuery is currently activated\n     * @param mediaQuery e.g. (min-width: 600px) and (max-width: 959px)\n     * @param mqAlias e.g. gt-sm, md, gt-lg\n     * @param suffix e.g. GtSM, Md, GtLg\n     * @param priority the priority of activation for the given breakpoint\n     */\n    constructor(matches = false, mediaQuery = 'all', mqAlias = '', suffix = '', priority = 0) {\n        this.matches = matches;\n        this.mediaQuery = mediaQuery;\n        this.mqAlias = mqAlias;\n        this.suffix = suffix;\n        this.priority = priority;\n        this.property = '';\n    }\n    /** Create an exact copy of the MediaChange */\n    clone() {\n        return new MediaChange(this.matches, this.mediaQuery, this.mqAlias, this.suffix);\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Utility to emulate a CSS stylesheet\n *\n * This utility class stores all of the styles for a given HTML element\n * as a readonly `stylesheet` map.\n */\nclass StylesheetMap {\n    constructor() {\n        this.stylesheet = new Map();\n    }\n    /**\n     * Add an individual style to an HTML element\n     */\n    addStyleToElement(element, style, value) {\n        const stylesheet = this.stylesheet.get(element);\n        if (stylesheet) {\n            stylesheet.set(style, value);\n        }\n        else {\n            this.stylesheet.set(element, new Map([[style, value]]));\n        }\n    }\n    /**\n     * Clear the virtual stylesheet\n     */\n    clearStyles() {\n        this.stylesheet.clear();\n    }\n    /**\n     * Retrieve a given style for an HTML element\n     */\n    getStyleForElement(el, styleName) {\n        const styles = this.stylesheet.get(el);\n        let value = '';\n        if (styles) {\n            const style = styles.get(styleName);\n            if (typeof style === 'number' || typeof style === 'string') {\n                value = style + '';\n            }\n        }\n        return value;\n    }\n}\nStylesheetMap.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: StylesheetMap, deps: [], target: i0.FactoryTarget.Injectable });\nStylesheetMap.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: StylesheetMap, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: StylesheetMap, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst DEFAULT_CONFIG = {\n    addFlexToParent: true,\n    addOrientationBps: false,\n    disableDefaultBps: false,\n    disableVendorPrefixes: false,\n    serverLoaded: false,\n    useColumnBasisZero: true,\n    printWithBreakpoints: [],\n    mediaTriggerAutoRestore: true,\n    ssrObserveBreakpoints: [],\n    // This is disabled by default because otherwise the multiplier would\n    // run for all users, regardless of whether they're using this feature.\n    // Instead, we disable it by default, which requires this ugly cast.\n    multiplier: undefined,\n    defaultUnit: 'px',\n    detectLayoutDisplay: false,\n};\nconst LAYOUT_CONFIG = new InjectionToken('Flex Layout token, config options for the library', {\n    providedIn: 'root',\n    factory: () => DEFAULT_CONFIG\n});\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Token that is provided to tell whether the FlexLayoutServerModule\n * has been included in the bundle\n *\n * NOTE: This can be manually provided to disable styles when using SSR\n */\nconst SERVER_TOKEN = new InjectionToken('FlexLayoutServerLoaded', {\n    providedIn: 'root',\n    factory: () => false\n});\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst BREAKPOINT = new InjectionToken('Flex Layout token, collect all breakpoints into one provider', {\n    providedIn: 'root',\n    factory: () => null\n});\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * For the specified MediaChange, make sure it contains the breakpoint alias\n * and suffix (if available).\n */\nfunction mergeAlias(dest, source) {\n    dest = dest?.clone() ?? new MediaChange();\n    if (source) {\n        dest.mqAlias = source.alias;\n        dest.mediaQuery = source.mediaQuery;\n        dest.suffix = source.suffix;\n        dest.priority = source.priority;\n    }\n    return dest;\n}\n\n/** A class that encapsulates CSS style generation for common directives */\nclass StyleBuilder {\n    constructor() {\n        /** Whether to cache the generated output styles */\n        this.shouldCache = true;\n    }\n    /**\n     * Run a side effect computation given the input string and the computed styles\n     * from the build task and the host configuration object\n     * NOTE: This should be a no-op unless an algorithm is provided in a subclass\n     */\n    sideEffect(_input, _styles, _parent) {\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass StyleUtils {\n    constructor(_serverStylesheet, _serverModuleLoaded, _platformId, layoutConfig) {\n        this._serverStylesheet = _serverStylesheet;\n        this._serverModuleLoaded = _serverModuleLoaded;\n        this._platformId = _platformId;\n        this.layoutConfig = layoutConfig;\n    }\n    /**\n     * Applies styles given via string pair or object map to the directive element\n     */\n    applyStyleToElement(element, style, value = null) {\n        let styles = {};\n        if (typeof style === 'string') {\n            styles[style] = value;\n            style = styles;\n        }\n        styles = this.layoutConfig.disableVendorPrefixes ? style : applyCssPrefixes(style);\n        this._applyMultiValueStyleToElement(styles, element);\n    }\n    /**\n     * Applies styles given via string pair or object map to the directive's element\n     */\n    applyStyleToElements(style, elements = []) {\n        const styles = this.layoutConfig.disableVendorPrefixes ? style : applyCssPrefixes(style);\n        elements.forEach(el => {\n            this._applyMultiValueStyleToElement(styles, el);\n        });\n    }\n    /**\n     * Determine the DOM element's Flexbox flow (flex-direction)\n     *\n     * Check inline style first then check computed (stylesheet) style\n     */\n    getFlowDirection(target) {\n        const query = 'flex-direction';\n        let value = this.lookupStyle(target, query);\n        const hasInlineValue = this.lookupInlineStyle(target, query) ||\n            (isPlatformServer(this._platformId) && this._serverModuleLoaded) ? value : '';\n        return [value || 'row', hasInlineValue];\n    }\n    hasWrap(target) {\n        const query = 'flex-wrap';\n        return this.lookupStyle(target, query) === 'wrap';\n    }\n    /**\n     * Find the DOM element's raw attribute value (if any)\n     */\n    lookupAttributeValue(element, attribute) {\n        return element.getAttribute(attribute) ?? '';\n    }\n    /**\n     * Find the DOM element's inline style value (if any)\n     */\n    lookupInlineStyle(element, styleName) {\n        return isPlatformBrowser(this._platformId) ?\n            element.style.getPropertyValue(styleName) : getServerStyle(element, styleName);\n    }\n    /**\n     * Determine the inline or inherited CSS style\n     * NOTE: platform-server has no implementation for getComputedStyle\n     */\n    lookupStyle(element, styleName, inlineOnly = false) {\n        let value = '';\n        if (element) {\n            let immediateValue = value = this.lookupInlineStyle(element, styleName);\n            if (!immediateValue) {\n                if (isPlatformBrowser(this._platformId)) {\n                    if (!inlineOnly) {\n                        value = getComputedStyle(element).getPropertyValue(styleName);\n                    }\n                }\n                else {\n                    if (this._serverModuleLoaded) {\n                        value = this._serverStylesheet.getStyleForElement(element, styleName);\n                    }\n                }\n            }\n        }\n        // Note: 'inline' is the default of all elements, unless UA stylesheet overrides;\n        //       in which case getComputedStyle() should determine a valid value.\n        return value ? value.trim() : '';\n    }\n    /**\n     * Applies the styles to the element. The styles object map may contain an array of values\n     * Each value will be added as element style\n     * Keys are sorted to add prefixed styles (like -webkit-x) first, before the standard ones\n     */\n    _applyMultiValueStyleToElement(styles, element) {\n        Object.keys(styles).sort().forEach(key => {\n            const el = styles[key];\n            const values = Array.isArray(el) ? el : [el];\n            values.sort();\n            for (let value of values) {\n                value = value ? value + '' : '';\n                if (isPlatformBrowser(this._platformId) || !this._serverModuleLoaded) {\n                    isPlatformBrowser(this._platformId) ?\n                        element.style.setProperty(key, value) : setServerStyle(element, key, value);\n                }\n                else {\n                    this._serverStylesheet.addStyleToElement(element, key, value);\n                }\n            }\n        });\n    }\n}\nStyleUtils.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: StyleUtils, deps: [{ token: StylesheetMap }, { token: SERVER_TOKEN }, { token: PLATFORM_ID }, { token: LAYOUT_CONFIG }], target: i0.FactoryTarget.Injectable });\nStyleUtils.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: StyleUtils, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: StyleUtils, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: StylesheetMap }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [SERVER_TOKEN]\n                }] }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [LAYOUT_CONFIG]\n                }] }]; } });\nfunction getServerStyle(element, styleName) {\n    const styleMap = readStyleAttribute(element);\n    return styleMap[styleName] ?? '';\n}\nfunction setServerStyle(element, styleName, styleValue) {\n    styleName = styleName.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    const styleMap = readStyleAttribute(element);\n    styleMap[styleName] = styleValue ?? '';\n    writeStyleAttribute(element, styleMap);\n}\nfunction writeStyleAttribute(element, styleMap) {\n    let styleAttrValue = '';\n    for (const key in styleMap) {\n        const newValue = styleMap[key];\n        if (newValue) {\n            styleAttrValue += `${key}:${styleMap[key]};`;\n        }\n    }\n    element.setAttribute('style', styleAttrValue);\n}\nfunction readStyleAttribute(element) {\n    const styleMap = {};\n    const styleAttribute = element.getAttribute('style');\n    if (styleAttribute) {\n        const styleList = styleAttribute.split(/;+/g);\n        for (let i = 0; i < styleList.length; i++) {\n            const style = styleList[i].trim();\n            if (style.length > 0) {\n                const colonIndex = style.indexOf(':');\n                if (colonIndex === -1) {\n                    throw new Error(`Invalid CSS style: ${style}`);\n                }\n                const name = style.substr(0, colonIndex).trim();\n                styleMap[name] = style.substr(colonIndex + 1).trim();\n            }\n        }\n    }\n    return styleMap;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** HOF to sort the breakpoints by descending priority */\nfunction sortDescendingPriority(a, b) {\n    const priorityA = a ? a.priority || 0 : 0;\n    const priorityB = b ? b.priority || 0 : 0;\n    return priorityB - priorityA;\n}\n/** HOF to sort the breakpoints by ascending priority */\nfunction sortAscendingPriority(a, b) {\n    const pA = a.priority || 0;\n    const pB = b.priority || 0;\n    return pA - pB;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * MediaMonitor configures listeners to mediaQuery changes and publishes an Observable facade to\n * convert mediaQuery change callbacks to subscriber notifications. These notifications will be\n * performed within the ng Zone to trigger change detections and component updates.\n *\n * NOTE: both mediaQuery activations and de-activations are announced in notifications\n */\nclass MatchMedia {\n    constructor(_zone, _platformId, _document) {\n        this._zone = _zone;\n        this._platformId = _platformId;\n        this._document = _document;\n        /** Initialize source with 'all' so all non-responsive APIs trigger style updates */\n        this.source = new BehaviorSubject(new MediaChange(true));\n        this.registry = new Map();\n        this.pendingRemoveListenerFns = [];\n        this._observable$ = this.source.asObservable();\n    }\n    /**\n     * Publish list of all current activations\n     */\n    get activations() {\n        const results = [];\n        this.registry.forEach((mql, key) => {\n            if (mql.matches) {\n                results.push(key);\n            }\n        });\n        return results;\n    }\n    /**\n     * For the specified mediaQuery?\n     */\n    isActive(mediaQuery) {\n        const mql = this.registry.get(mediaQuery);\n        return mql?.matches ?? this.registerQuery(mediaQuery).some(m => m.matches);\n    }\n    /**\n     * External observers can watch for all (or a specific) mql changes.\n     * Typically used by the MediaQueryAdaptor; optionally available to components\n     * who wish to use the MediaMonitor as mediaMonitor$ observable service.\n     *\n     * Use deferred registration process to register breakpoints only on subscription\n     * This logic also enforces logic to register all mediaQueries BEFORE notify\n     * subscribers of notifications.\n     */\n    observe(mqList, filterOthers = false) {\n        if (mqList && mqList.length) {\n            const matchMedia$ = this._observable$.pipe(filter((change) => !filterOthers ? true : (mqList.indexOf(change.mediaQuery) > -1)));\n            const registration$ = new Observable((observer) => {\n                const matches = this.registerQuery(mqList);\n                if (matches.length) {\n                    const lastChange = matches.pop();\n                    matches.forEach((e) => {\n                        observer.next(e);\n                    });\n                    this.source.next(lastChange); // last match is cached\n                }\n                observer.complete();\n            });\n            return merge(registration$, matchMedia$);\n        }\n        return this._observable$;\n    }\n    /**\n     * Based on the BreakPointRegistry provider, register internal listeners for each unique\n     * mediaQuery. Each listener emits specific MediaChange data to observers\n     */\n    registerQuery(mediaQuery) {\n        const list = Array.isArray(mediaQuery) ? mediaQuery : [mediaQuery];\n        const matches = [];\n        buildQueryCss(list, this._document);\n        list.forEach((query) => {\n            const onMQLEvent = (e) => {\n                this._zone.run(() => this.source.next(new MediaChange(e.matches, query)));\n            };\n            let mql = this.registry.get(query);\n            if (!mql) {\n                mql = this.buildMQL(query);\n                mql.addListener(onMQLEvent);\n                this.pendingRemoveListenerFns.push(() => mql.removeListener(onMQLEvent));\n                this.registry.set(query, mql);\n            }\n            if (mql.matches) {\n                matches.push(new MediaChange(true, query));\n            }\n        });\n        return matches;\n    }\n    ngOnDestroy() {\n        let fn;\n        while (fn = this.pendingRemoveListenerFns.pop()) {\n            fn();\n        }\n    }\n    /**\n     * Call window.matchMedia() to build a MediaQueryList; which\n     * supports 0..n listeners for activation/deactivation\n     */\n    buildMQL(query) {\n        return constructMql(query, isPlatformBrowser(this._platformId));\n    }\n}\nMatchMedia.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MatchMedia, deps: [{ token: i0.NgZone }, { token: PLATFORM_ID }, { token: DOCUMENT }], target: i0.FactoryTarget.Injectable });\nMatchMedia.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MatchMedia, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MatchMedia, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }]; } });\n/**\n * Private global registry for all dynamically-created, injected style tags\n * @see prepare(query)\n */\nconst ALL_STYLES = {};\n/**\n * For Webkit engines that only trigger the MediaQueryList Listener\n * when there is at least one CSS selector for the respective media query.\n *\n * @param mediaQueries\n * @param _document\n */\nfunction buildQueryCss(mediaQueries, _document) {\n    const list = mediaQueries.filter(it => !ALL_STYLES[it]);\n    if (list.length > 0) {\n        const query = list.join(', ');\n        try {\n            const styleEl = _document.createElement('style');\n            styleEl.setAttribute('type', 'text/css');\n            if (!styleEl.styleSheet) {\n                const cssText = `\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${query} {.fx-query-test{ }}\n`;\n                styleEl.appendChild(_document.createTextNode(cssText));\n            }\n            _document.head.appendChild(styleEl);\n            // Store in private global registry\n            list.forEach(mq => ALL_STYLES[mq] = styleEl);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n}\nfunction buildMockMql(query) {\n    const et = new EventTarget();\n    et.matches = query === 'all' || query === '';\n    et.media = query;\n    et.addListener = () => { };\n    et.removeListener = () => { };\n    et.addEventListener = () => { };\n    et.dispatchEvent = () => false;\n    et.onchange = null;\n    return et;\n}\nfunction constructMql(query, isBrowser) {\n    const canListen = isBrowser && !!window.matchMedia('all').addListener;\n    return canListen ? window.matchMedia(query) : buildMockMql(query);\n}\n\n/**\n * NOTE: Smaller ranges have HIGHER priority since the match is more specific\n */\nconst DEFAULT_BREAKPOINTS = [\n    {\n        alias: 'xs',\n        mediaQuery: 'screen and (min-width: 0px) and (max-width: 599.98px)',\n        priority: 1000,\n    },\n    {\n        alias: 'sm',\n        mediaQuery: 'screen and (min-width: 600px) and (max-width: 959.98px)',\n        priority: 900,\n    },\n    {\n        alias: 'md',\n        mediaQuery: 'screen and (min-width: 960px) and (max-width: 1279.98px)',\n        priority: 800,\n    },\n    {\n        alias: 'lg',\n        mediaQuery: 'screen and (min-width: 1280px) and (max-width: 1919.98px)',\n        priority: 700,\n    },\n    {\n        alias: 'xl',\n        mediaQuery: 'screen and (min-width: 1920px) and (max-width: 4999.98px)',\n        priority: 600,\n    },\n    {\n        alias: 'lt-sm',\n        overlapping: true,\n        mediaQuery: 'screen and (max-width: 599.98px)',\n        priority: 950,\n    },\n    {\n        alias: 'lt-md',\n        overlapping: true,\n        mediaQuery: 'screen and (max-width: 959.98px)',\n        priority: 850,\n    },\n    {\n        alias: 'lt-lg',\n        overlapping: true,\n        mediaQuery: 'screen and (max-width: 1279.98px)',\n        priority: 750,\n    },\n    {\n        alias: 'lt-xl',\n        overlapping: true,\n        priority: 650,\n        mediaQuery: 'screen and (max-width: 1919.98px)',\n    },\n    {\n        alias: 'gt-xs',\n        overlapping: true,\n        mediaQuery: 'screen and (min-width: 600px)',\n        priority: -950,\n    },\n    {\n        alias: 'gt-sm',\n        overlapping: true,\n        mediaQuery: 'screen and (min-width: 960px)',\n        priority: -850,\n    }, {\n        alias: 'gt-md',\n        overlapping: true,\n        mediaQuery: 'screen and (min-width: 1280px)',\n        priority: -750,\n    },\n    {\n        alias: 'gt-lg',\n        overlapping: true,\n        mediaQuery: 'screen and (min-width: 1920px)',\n        priority: -650,\n    }\n];\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/* tslint:disable */\nconst HANDSET_PORTRAIT = '(orientation: portrait) and (max-width: 599.98px)';\nconst HANDSET_LANDSCAPE = '(orientation: landscape) and (max-width: 959.98px)';\nconst TABLET_PORTRAIT = '(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)';\nconst TABLET_LANDSCAPE = '(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)';\nconst WEB_PORTRAIT = '(orientation: portrait) and (min-width: 840px)';\nconst WEB_LANDSCAPE = '(orientation: landscape) and (min-width: 1280px)';\nconst ScreenTypes = {\n    'HANDSET': `${HANDSET_PORTRAIT}, ${HANDSET_LANDSCAPE}`,\n    'TABLET': `${TABLET_PORTRAIT} , ${TABLET_LANDSCAPE}`,\n    'WEB': `${WEB_PORTRAIT}, ${WEB_LANDSCAPE} `,\n    'HANDSET_PORTRAIT': `${HANDSET_PORTRAIT}`,\n    'TABLET_PORTRAIT': `${TABLET_PORTRAIT} `,\n    'WEB_PORTRAIT': `${WEB_PORTRAIT}`,\n    'HANDSET_LANDSCAPE': `${HANDSET_LANDSCAPE}`,\n    'TABLET_LANDSCAPE': `${TABLET_LANDSCAPE}`,\n    'WEB_LANDSCAPE': `${WEB_LANDSCAPE}`\n};\n/**\n * Extended Breakpoints for handset/tablets with landscape or portrait orientations\n */\nconst ORIENTATION_BREAKPOINTS = [\n    { 'alias': 'handset', priority: 2000, 'mediaQuery': ScreenTypes.HANDSET },\n    { 'alias': 'handset.landscape', priority: 2000, 'mediaQuery': ScreenTypes.HANDSET_LANDSCAPE },\n    { 'alias': 'handset.portrait', priority: 2000, 'mediaQuery': ScreenTypes.HANDSET_PORTRAIT },\n    { 'alias': 'tablet', priority: 2100, 'mediaQuery': ScreenTypes.TABLET },\n    { 'alias': 'tablet.landscape', priority: 2100, 'mediaQuery': ScreenTypes.TABLET_LANDSCAPE },\n    { 'alias': 'tablet.portrait', priority: 2100, 'mediaQuery': ScreenTypes.TABLET_PORTRAIT },\n    { 'alias': 'web', priority: 2200, 'mediaQuery': ScreenTypes.WEB, overlapping: true },\n    { 'alias': 'web.landscape', priority: 2200, 'mediaQuery': ScreenTypes.WEB_LANDSCAPE, overlapping: true },\n    { 'alias': 'web.portrait', priority: 2200, 'mediaQuery': ScreenTypes.WEB_PORTRAIT, overlapping: true }\n];\n\nconst ALIAS_DELIMITERS = /(\\.|-|_)/g;\nfunction firstUpperCase(part) {\n    let first = part.length > 0 ? part.charAt(0) : '';\n    let remainder = (part.length > 1) ? part.slice(1) : '';\n    return first.toUpperCase() + remainder;\n}\n/**\n * Converts snake-case to SnakeCase.\n * @param name Text to UpperCamelCase\n */\nfunction camelCase(name) {\n    return name\n        .replace(ALIAS_DELIMITERS, '|')\n        .split('|')\n        .map(firstUpperCase)\n        .join('');\n}\n/**\n * For each breakpoint, ensure that a Suffix is defined;\n * fallback to UpperCamelCase the unique Alias value\n */\nfunction validateSuffixes(list) {\n    list.forEach((bp) => {\n        if (!bp.suffix) {\n            bp.suffix = camelCase(bp.alias); // create Suffix value based on alias\n            bp.overlapping = !!bp.overlapping; // ensure default value\n        }\n    });\n    return list;\n}\n/**\n * Merge a custom breakpoint list with the default list based on unique alias values\n *  - Items are added if the alias is not in the default list\n *  - Items are merged with the custom override if the alias exists in the default list\n */\nfunction mergeByAlias(defaults, custom = []) {\n    const dict = {};\n    defaults.forEach(bp => {\n        dict[bp.alias] = bp;\n    });\n    // Merge custom breakpoints\n    custom.forEach((bp) => {\n        if (dict[bp.alias]) {\n            extendObject(dict[bp.alias], bp);\n        }\n        else {\n            dict[bp.alias] = bp;\n        }\n    });\n    return validateSuffixes(Object.keys(dict).map(k => dict[k]));\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *  Injection token unique to the flex-layout library.\n *  Use this token when build a custom provider (see below).\n */\nconst BREAKPOINTS = new InjectionToken('Token (@angular/flex-layout) Breakpoints', {\n    providedIn: 'root',\n    factory: () => {\n        const breakpoints = inject(BREAKPOINT);\n        const layoutConfig = inject(LAYOUT_CONFIG);\n        const bpFlattenArray = [].concat.apply([], (breakpoints || [])\n            .map((v) => Array.isArray(v) ? v : [v]));\n        const builtIns = (layoutConfig.disableDefaultBps ? [] : DEFAULT_BREAKPOINTS)\n            .concat(layoutConfig.addOrientationBps ? ORIENTATION_BREAKPOINTS : []);\n        return mergeByAlias(builtIns, bpFlattenArray);\n    }\n});\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Registry of 1..n MediaQuery breakpoint ranges\n * This is published as a provider and may be overridden from custom, application-specific ranges\n *\n */\nclass BreakPointRegistry {\n    constructor(list) {\n        /**\n         * Memoized BreakPoint Lookups\n         */\n        this.findByMap = new Map();\n        this.items = [...list].sort(sortAscendingPriority);\n    }\n    /**\n     * Search breakpoints by alias (e.g. gt-xs)\n     */\n    findByAlias(alias) {\n        return !alias ? null : this.findWithPredicate(alias, (bp) => bp.alias === alias);\n    }\n    findByQuery(query) {\n        return this.findWithPredicate(query, (bp) => bp.mediaQuery === query);\n    }\n    /**\n     * Get all the breakpoints whose ranges could overlapping `normal` ranges;\n     * e.g. gt-sm overlaps md, lg, and xl\n     */\n    get overlappings() {\n        return this.items.filter(it => it.overlapping);\n    }\n    /**\n     * Get list of all registered (non-empty) breakpoint aliases\n     */\n    get aliases() {\n        return this.items.map(it => it.alias);\n    }\n    /**\n     * Aliases are mapped to properties using suffixes\n     * e.g.  'gt-sm' for property 'layout'  uses suffix 'GtSm'\n     * for property layoutGtSM.\n     */\n    get suffixes() {\n        return this.items.map(it => it?.suffix ?? '');\n    }\n    /**\n     * Memoized lookup using custom predicate function\n     */\n    findWithPredicate(key, searchFn) {\n        let response = this.findByMap.get(key);\n        if (!response) {\n            response = this.items.find(searchFn) ?? null;\n            this.findByMap.set(key, response);\n        }\n        return response ?? null;\n    }\n}\nBreakPointRegistry.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: BreakPointRegistry, deps: [{ token: BREAKPOINTS }], target: i0.FactoryTarget.Injectable });\nBreakPointRegistry.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: BreakPointRegistry, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: BreakPointRegistry, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\n                    type: Inject,\n                    args: [BREAKPOINTS]\n                }] }]; } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst PRINT = 'print';\nconst BREAKPOINT_PRINT = {\n    alias: PRINT,\n    mediaQuery: PRINT,\n    priority: 1000\n};\n/**\n * PrintHook - Use to intercept print MediaQuery activations and force\n *             layouts to render with the specified print alias/breakpoint\n *\n * Used in MediaMarshaller and MediaObserver\n */\nclass PrintHook {\n    constructor(breakpoints, layoutConfig, _document) {\n        this.breakpoints = breakpoints;\n        this.layoutConfig = layoutConfig;\n        this._document = _document;\n        // registeredBeforeAfterPrintHooks tracks if we registered the `beforeprint`\n        //  and `afterprint` event listeners.\n        this.registeredBeforeAfterPrintHooks = false;\n        // isPrintingBeforeAfterEvent is used to track if we are printing from within\n        // a `beforeprint` event handler. This prevents the typical `stopPrinting`\n        // form `interceptEvents` so that printing is not stopped while the dialog\n        // is still open. This is an extension of the `isPrinting` property on\n        // browsers which support `beforeprint` and `afterprint` events.\n        this.isPrintingBeforeAfterEvent = false;\n        this.beforePrintEventListeners = [];\n        this.afterPrintEventListeners = [];\n        this.formerActivations = null;\n        // Is this service currently in print mode\n        this.isPrinting = false;\n        this.queue = new PrintQueue();\n        this.deactivations = [];\n    }\n    /** Add 'print' mediaQuery: to listen for matchMedia activations */\n    withPrintQuery(queries) {\n        return [...queries, PRINT];\n    }\n    /** Is the MediaChange event for any 'print' @media */\n    isPrintEvent(e) {\n        return e.mediaQuery.startsWith(PRINT);\n    }\n    /** What is the desired mqAlias to use while printing? */\n    get printAlias() {\n        return [...(this.layoutConfig.printWithBreakpoints ?? [])];\n    }\n    /** Lookup breakpoints associated with print aliases. */\n    get printBreakPoints() {\n        return this.printAlias\n            .map(alias => this.breakpoints.findByAlias(alias))\n            .filter(bp => bp !== null);\n    }\n    /** Lookup breakpoint associated with mediaQuery */\n    getEventBreakpoints({ mediaQuery }) {\n        const bp = this.breakpoints.findByQuery(mediaQuery);\n        const list = bp ? [...this.printBreakPoints, bp] : this.printBreakPoints;\n        return list.sort(sortDescendingPriority);\n    }\n    /** Update event with printAlias mediaQuery information */\n    updateEvent(event) {\n        let bp = this.breakpoints.findByQuery(event.mediaQuery);\n        if (this.isPrintEvent(event)) {\n            // Reset from 'print' to first (highest priority) print breakpoint\n            bp = this.getEventBreakpoints(event)[0];\n            event.mediaQuery = bp?.mediaQuery ?? '';\n        }\n        return mergeAlias(event, bp);\n    }\n    // registerBeforeAfterPrintHooks registers a `beforeprint` event hook so we can\n    // trigger print styles synchronously and apply proper layout styles.\n    // It is a noop if the hooks have already been registered or if the document's\n    // `defaultView` is not available.\n    registerBeforeAfterPrintHooks(target) {\n        // `defaultView` may be null when rendering on the server or in other contexts.\n        if (!this._document.defaultView || this.registeredBeforeAfterPrintHooks) {\n            return;\n        }\n        this.registeredBeforeAfterPrintHooks = true;\n        const beforePrintListener = () => {\n            // If we aren't already printing, start printing and update the styles as\n            // if there was a regular print `MediaChange`(from matchMedia).\n            if (!this.isPrinting) {\n                this.isPrintingBeforeAfterEvent = true;\n                this.startPrinting(target, this.getEventBreakpoints(new MediaChange(true, PRINT)));\n                target.updateStyles();\n            }\n        };\n        const afterPrintListener = () => {\n            // If we aren't already printing, start printing and update the styles as\n            // if there was a regular print `MediaChange`(from matchMedia).\n            this.isPrintingBeforeAfterEvent = false;\n            if (this.isPrinting) {\n                this.stopPrinting(target);\n                target.updateStyles();\n            }\n        };\n        // Could we have teardown logic to remove if there are no print listeners being used?\n        this._document.defaultView.addEventListener('beforeprint', beforePrintListener);\n        this._document.defaultView.addEventListener('afterprint', afterPrintListener);\n        this.beforePrintEventListeners.push(beforePrintListener);\n        this.afterPrintEventListeners.push(afterPrintListener);\n    }\n    /**\n     * Prepare RxJS tap operator with partial application\n     * @return pipeable tap predicate\n     */\n    interceptEvents(target) {\n        return (event) => {\n            if (this.isPrintEvent(event)) {\n                if (event.matches && !this.isPrinting) {\n                    this.startPrinting(target, this.getEventBreakpoints(event));\n                    target.updateStyles();\n                }\n                else if (!event.matches && this.isPrinting && !this.isPrintingBeforeAfterEvent) {\n                    this.stopPrinting(target);\n                    target.updateStyles();\n                }\n                return;\n            }\n            this.collectActivations(target, event);\n        };\n    }\n    /** Stop mediaChange event propagation in event streams */\n    blockPropagation() {\n        return (event) => {\n            return !(this.isPrinting || this.isPrintEvent(event));\n        };\n    }\n    /**\n     * Save current activateBreakpoints (for later restore)\n     * and substitute only the printAlias breakpoint\n     */\n    startPrinting(target, bpList) {\n        this.isPrinting = true;\n        this.formerActivations = target.activatedBreakpoints;\n        target.activatedBreakpoints = this.queue.addPrintBreakpoints(bpList);\n    }\n    /** For any print de-activations, reset the entire print queue */\n    stopPrinting(target) {\n        target.activatedBreakpoints = this.deactivations;\n        this.deactivations = [];\n        this.formerActivations = null;\n        this.queue.clear();\n        this.isPrinting = false;\n    }\n    /**\n     * To restore pre-Print Activations, we must capture the proper\n     * list of breakpoint activations BEFORE print starts. OnBeforePrint()\n     * is supported; so 'print' mediaQuery activations are used as a fallback\n     * in browsers without `beforeprint` support.\n     *\n     * >  But activated breakpoints are deactivated BEFORE 'print' activation.\n     *\n     * Let's capture all de-activations using the following logic:\n     *\n     *  When not printing:\n     *    - clear cache when activating non-print breakpoint\n     *    - update cache (and sort) when deactivating\n     *\n     *  When printing:\n     *    - sort and save when starting print\n     *    - restore as activatedTargets and clear when stop printing\n     */\n    collectActivations(target, event) {\n        if (!this.isPrinting || this.isPrintingBeforeAfterEvent) {\n            if (!this.isPrintingBeforeAfterEvent) {\n                // Only clear deactivations if we aren't printing from a `beforeprint` event.\n                // Otherwise, this will clear before `stopPrinting()` is called to restore\n                // the pre-Print Activations.\n                this.deactivations = [];\n                return;\n            }\n            if (!event.matches) {\n                const bp = this.breakpoints.findByQuery(event.mediaQuery);\n                // Deactivating a breakpoint\n                if (bp) {\n                    const hasFormerBp = this.formerActivations && this.formerActivations.includes(bp);\n                    const wasActivated = !this.formerActivations && target.activatedBreakpoints.includes(bp);\n                    const shouldDeactivate = hasFormerBp || wasActivated;\n                    if (shouldDeactivate) {\n                        this.deactivations.push(bp);\n                        this.deactivations.sort(sortDescendingPriority);\n                    }\n                }\n            }\n        }\n    }\n    /** Teardown logic for the service. */\n    ngOnDestroy() {\n        if (this._document.defaultView) {\n            this.beforePrintEventListeners.forEach(l => this._document.defaultView.removeEventListener('beforeprint', l));\n            this.afterPrintEventListeners.forEach(l => this._document.defaultView.removeEventListener('afterprint', l));\n        }\n    }\n}\nPrintHook.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: PrintHook, deps: [{ token: BreakPointRegistry }, { token: LAYOUT_CONFIG }, { token: DOCUMENT }], target: i0.FactoryTarget.Injectable });\nPrintHook.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: PrintHook, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: PrintHook, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: BreakPointRegistry }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [LAYOUT_CONFIG]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }]; } });\n// ************************************************************************\n// Internal Utility class 'PrintQueue'\n// ************************************************************************\n/**\n * Utility class to manage print breakpoints + activatedBreakpoints\n * with correct sorting WHILE printing\n */\nclass PrintQueue {\n    constructor() {\n        /** Sorted queue with prioritized print breakpoints */\n        this.printBreakpoints = [];\n    }\n    addPrintBreakpoints(bpList) {\n        bpList.push(BREAKPOINT_PRINT);\n        bpList.sort(sortDescendingPriority);\n        bpList.forEach(bp => this.addBreakpoint(bp));\n        return this.printBreakpoints;\n    }\n    /** Add Print breakpoint to queue */\n    addBreakpoint(bp) {\n        if (!!bp) {\n            const bpInList = this.printBreakpoints.find(it => it.mediaQuery === bp.mediaQuery);\n            if (bpInList === undefined) {\n                // If this is a `printAlias` breakpoint, then append. If a true 'print' breakpoint,\n                // register as highest priority in the queue\n                this.printBreakpoints = isPrintBreakPoint(bp) ? [bp, ...this.printBreakpoints]\n                    : [...this.printBreakpoints, bp];\n            }\n        }\n    }\n    /** Restore original activated breakpoints and clear internal caches */\n    clear() {\n        this.printBreakpoints = [];\n    }\n}\n// ************************************************************************\n// Internal Utility methods\n// ************************************************************************\n/** Only support intercept queueing if the Breakpoint is a print @media query */\nfunction isPrintBreakPoint(bp) {\n    return bp?.mediaQuery.startsWith(PRINT) ?? false;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * MediaMarshaller - register responsive values from directives and\n *                   trigger them based on media query events\n */\nclass MediaMarshaller {\n    constructor(matchMedia, breakpoints, hook) {\n        this.matchMedia = matchMedia;\n        this.breakpoints = breakpoints;\n        this.hook = hook;\n        this._useFallbacks = true;\n        this._activatedBreakpoints = [];\n        this.elementMap = new Map();\n        this.elementKeyMap = new WeakMap();\n        this.watcherMap = new WeakMap(); // special triggers to update elements\n        this.updateMap = new WeakMap(); // callback functions to update styles\n        this.clearMap = new WeakMap(); // callback functions to clear styles\n        this.subject = new Subject();\n        this.observeActivations();\n    }\n    get activatedAlias() {\n        return this.activatedBreakpoints[0]?.alias ?? '';\n    }\n    set activatedBreakpoints(bps) {\n        this._activatedBreakpoints = [...bps];\n    }\n    get activatedBreakpoints() {\n        return [...this._activatedBreakpoints];\n    }\n    set useFallbacks(value) {\n        this._useFallbacks = value;\n    }\n    /**\n     * Update styles on breakpoint activates or deactivates\n     * @param mc\n     */\n    onMediaChange(mc) {\n        const bp = this.findByQuery(mc.mediaQuery);\n        if (bp) {\n            mc = mergeAlias(mc, bp);\n            const bpIndex = this.activatedBreakpoints.indexOf(bp);\n            if (mc.matches && bpIndex === -1) {\n                this._activatedBreakpoints.push(bp);\n                this._activatedBreakpoints.sort(sortDescendingPriority);\n                this.updateStyles();\n            }\n            else if (!mc.matches && bpIndex !== -1) {\n                // Remove the breakpoint when it's deactivated\n                this._activatedBreakpoints.splice(bpIndex, 1);\n                this._activatedBreakpoints.sort(sortDescendingPriority);\n                this.updateStyles();\n            }\n        }\n    }\n    /**\n     * initialize the marshaller with necessary elements for delegation on an element\n     * @param element\n     * @param key\n     * @param updateFn optional callback so that custom bp directives don't have to re-provide this\n     * @param clearFn optional callback so that custom bp directives don't have to re-provide this\n     * @param extraTriggers other triggers to force style updates (e.g. layout, directionality, etc)\n     */\n    init(element, key, updateFn, clearFn, extraTriggers = []) {\n        initBuilderMap(this.updateMap, element, key, updateFn);\n        initBuilderMap(this.clearMap, element, key, clearFn);\n        this.buildElementKeyMap(element, key);\n        this.watchExtraTriggers(element, key, extraTriggers);\n    }\n    /**\n     * get the value for an element and key and optionally a given breakpoint\n     * @param element\n     * @param key\n     * @param bp\n     */\n    getValue(element, key, bp) {\n        const bpMap = this.elementMap.get(element);\n        if (bpMap) {\n            const values = bp !== undefined ? bpMap.get(bp) : this.getActivatedValues(bpMap, key);\n            if (values) {\n                return values.get(key);\n            }\n        }\n        return undefined;\n    }\n    /**\n     * whether the element has values for a given key\n     * @param element\n     * @param key\n     */\n    hasValue(element, key) {\n        const bpMap = this.elementMap.get(element);\n        if (bpMap) {\n            const values = this.getActivatedValues(bpMap, key);\n            if (values) {\n                return values.get(key) !== undefined || false;\n            }\n        }\n        return false;\n    }\n    /**\n     * Set the value for an input on a directive\n     * @param element the element in question\n     * @param key the type of the directive (e.g. flex, layout-gap, etc)\n     * @param bp the breakpoint suffix (empty string = default)\n     * @param val the value for the breakpoint\n     */\n    setValue(element, key, val, bp) {\n        let bpMap = this.elementMap.get(element);\n        if (!bpMap) {\n            bpMap = new Map().set(bp, new Map().set(key, val));\n            this.elementMap.set(element, bpMap);\n        }\n        else {\n            const values = (bpMap.get(bp) ?? new Map()).set(key, val);\n            bpMap.set(bp, values);\n            this.elementMap.set(element, bpMap);\n        }\n        const value = this.getValue(element, key);\n        if (value !== undefined) {\n            this.updateElement(element, key, value);\n        }\n    }\n    /** Track element value changes for a specific key */\n    trackValue(element, key) {\n        return this.subject\n            .asObservable()\n            .pipe(filter(v => v.element === element && v.key === key));\n    }\n    /** update all styles for all elements on the current breakpoint */\n    updateStyles() {\n        this.elementMap.forEach((bpMap, el) => {\n            const keyMap = new Set(this.elementKeyMap.get(el));\n            let valueMap = this.getActivatedValues(bpMap);\n            if (valueMap) {\n                valueMap.forEach((v, k) => {\n                    this.updateElement(el, k, v);\n                    keyMap.delete(k);\n                });\n            }\n            keyMap.forEach(k => {\n                valueMap = this.getActivatedValues(bpMap, k);\n                if (valueMap) {\n                    const value = valueMap.get(k);\n                    this.updateElement(el, k, value);\n                }\n                else {\n                    this.clearElement(el, k);\n                }\n            });\n        });\n    }\n    /**\n     * clear the styles for a given element\n     * @param element\n     * @param key\n     */\n    clearElement(element, key) {\n        const builders = this.clearMap.get(element);\n        if (builders) {\n            const clearFn = builders.get(key);\n            if (!!clearFn) {\n                clearFn();\n                this.subject.next({ element, key, value: '' });\n            }\n        }\n    }\n    /**\n     * update a given element with the activated values for a given key\n     * @param element\n     * @param key\n     * @param value\n     */\n    updateElement(element, key, value) {\n        const builders = this.updateMap.get(element);\n        if (builders) {\n            const updateFn = builders.get(key);\n            if (!!updateFn) {\n                updateFn(value);\n                this.subject.next({ element, key, value });\n            }\n        }\n    }\n    /**\n     * release all references to a given element\n     * @param element\n     */\n    releaseElement(element) {\n        const watcherMap = this.watcherMap.get(element);\n        if (watcherMap) {\n            watcherMap.forEach(s => s.unsubscribe());\n            this.watcherMap.delete(element);\n        }\n        const elementMap = this.elementMap.get(element);\n        if (elementMap) {\n            elementMap.forEach((_, s) => elementMap.delete(s));\n            this.elementMap.delete(element);\n        }\n    }\n    /**\n     * trigger an update for a given element and key (e.g. layout)\n     * @param element\n     * @param key\n     */\n    triggerUpdate(element, key) {\n        const bpMap = this.elementMap.get(element);\n        if (bpMap) {\n            const valueMap = this.getActivatedValues(bpMap, key);\n            if (valueMap) {\n                if (key) {\n                    this.updateElement(element, key, valueMap.get(key));\n                }\n                else {\n                    valueMap.forEach((v, k) => this.updateElement(element, k, v));\n                }\n            }\n        }\n    }\n    /** Cross-reference for HTMLElement with directive key */\n    buildElementKeyMap(element, key) {\n        let keyMap = this.elementKeyMap.get(element);\n        if (!keyMap) {\n            keyMap = new Set();\n            this.elementKeyMap.set(element, keyMap);\n        }\n        keyMap.add(key);\n    }\n    /**\n     * Other triggers that should force style updates:\n     * - directionality\n     * - layout changes\n     * - mutationobserver updates\n     */\n    watchExtraTriggers(element, key, triggers) {\n        if (triggers && triggers.length) {\n            let watchers = this.watcherMap.get(element);\n            if (!watchers) {\n                watchers = new Map();\n                this.watcherMap.set(element, watchers);\n            }\n            const subscription = watchers.get(key);\n            if (!subscription) {\n                const newSubscription = merge(...triggers).subscribe(() => {\n                    const currentValue = this.getValue(element, key);\n                    this.updateElement(element, key, currentValue);\n                });\n                watchers.set(key, newSubscription);\n            }\n        }\n    }\n    /** Breakpoint locator by mediaQuery */\n    findByQuery(query) {\n        return this.breakpoints.findByQuery(query);\n    }\n    /**\n     * get the fallback breakpoint for a given element, starting with the current breakpoint\n     * @param bpMap\n     * @param key\n     */\n    getActivatedValues(bpMap, key) {\n        for (let i = 0; i < this.activatedBreakpoints.length; i++) {\n            const activatedBp = this.activatedBreakpoints[i];\n            const valueMap = bpMap.get(activatedBp.alias);\n            if (valueMap) {\n                if (key === undefined || (valueMap.has(key) && valueMap.get(key) != null)) {\n                    return valueMap;\n                }\n            }\n        }\n        // On the server, we explicitly have an \"all\" section filled in to begin with.\n        // So we don't need to aggressively find a fallback if no explicit value exists.\n        if (!this._useFallbacks) {\n            return undefined;\n        }\n        const lastHope = bpMap.get('');\n        return (key === undefined || lastHope && lastHope.has(key)) ? lastHope : undefined;\n    }\n    /**\n     * Watch for mediaQuery breakpoint activations\n     */\n    observeActivations() {\n        const queries = this.breakpoints.items.map(bp => bp.mediaQuery);\n        this.hook.registerBeforeAfterPrintHooks(this);\n        this.matchMedia\n            .observe(this.hook.withPrintQuery(queries))\n            .pipe(tap(this.hook.interceptEvents(this)), filter(this.hook.blockPropagation()))\n            .subscribe(this.onMediaChange.bind(this));\n    }\n}\nMediaMarshaller.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaMarshaller, deps: [{ token: MatchMedia }, { token: BreakPointRegistry }, { token: PrintHook }], target: i0.FactoryTarget.Injectable });\nMediaMarshaller.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaMarshaller, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaMarshaller, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: MatchMedia }, { type: BreakPointRegistry }, { type: PrintHook }]; } });\nfunction initBuilderMap(map, element, key, input) {\n    if (input !== undefined) {\n        const oldMap = map.get(element) ?? new Map();\n        oldMap.set(key, input);\n        map.set(element, oldMap);\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass BaseDirective2 {\n    constructor(elementRef, styleBuilder, styler, marshal) {\n        this.elementRef = elementRef;\n        this.styleBuilder = styleBuilder;\n        this.styler = styler;\n        this.marshal = marshal;\n        this.DIRECTIVE_KEY = '';\n        this.inputs = [];\n        /** The most recently used styles for the builder */\n        this.mru = {};\n        this.destroySubject = new Subject();\n        /** Cache map for style computation */\n        this.styleCache = new Map();\n    }\n    /** Access to host element's parent DOM node */\n    get parentElement() {\n        return this.elementRef.nativeElement.parentElement;\n    }\n    /** Access to the HTMLElement for the directive */\n    get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n    /** Access to the activated value for the directive */\n    get activatedValue() {\n        return this.marshal.getValue(this.nativeElement, this.DIRECTIVE_KEY);\n    }\n    set activatedValue(value) {\n        this.marshal.setValue(this.nativeElement, this.DIRECTIVE_KEY, value, this.marshal.activatedAlias);\n    }\n    /** For @Input changes */\n    ngOnChanges(changes) {\n        Object.keys(changes).forEach(key => {\n            if (this.inputs.indexOf(key) !== -1) {\n                const bp = key.split('.').slice(1).join('.');\n                const val = changes[key].currentValue;\n                this.setValue(val, bp);\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.destroySubject.next();\n        this.destroySubject.complete();\n        this.marshal.releaseElement(this.nativeElement);\n    }\n    /** Register with central marshaller service */\n    init(extraTriggers = []) {\n        this.marshal.init(this.elementRef.nativeElement, this.DIRECTIVE_KEY, this.updateWithValue.bind(this), this.clearStyles.bind(this), extraTriggers);\n    }\n    /** Add styles to the element using predefined style builder */\n    addStyles(input, parent) {\n        const builder = this.styleBuilder;\n        const useCache = builder.shouldCache;\n        let genStyles = this.styleCache.get(input);\n        if (!genStyles || !useCache) {\n            genStyles = builder.buildStyles(input, parent);\n            if (useCache) {\n                this.styleCache.set(input, genStyles);\n            }\n        }\n        this.mru = { ...genStyles };\n        this.applyStyleToElement(genStyles);\n        builder.sideEffect(input, genStyles, parent);\n    }\n    /** Remove generated styles from an element using predefined style builder */\n    clearStyles() {\n        Object.keys(this.mru).forEach(k => {\n            this.mru[k] = '';\n        });\n        this.applyStyleToElement(this.mru);\n        this.mru = {};\n        this.currentValue = undefined;\n    }\n    /** Force trigger style updates on DOM element */\n    triggerUpdate() {\n        this.marshal.triggerUpdate(this.nativeElement, this.DIRECTIVE_KEY);\n    }\n    /**\n     * Determine the DOM element's Flexbox flow (flex-direction).\n     *\n     * Check inline style first then check computed (stylesheet) style.\n     * And optionally add the flow value to element's inline style.\n     */\n    getFlexFlowDirection(target, addIfMissing = false) {\n        if (target) {\n            const [value, hasInlineValue] = this.styler.getFlowDirection(target);\n            if (!hasInlineValue && addIfMissing) {\n                const style = buildLayoutCSS(value);\n                const elements = [target];\n                this.styler.applyStyleToElements(style, elements);\n            }\n            return value.trim();\n        }\n        return 'row';\n    }\n    hasWrap(target) {\n        return this.styler.hasWrap(target);\n    }\n    /** Applies styles given via string pair or object map to the directive element */\n    applyStyleToElement(style, value, element = this.nativeElement) {\n        this.styler.applyStyleToElement(element, style, value);\n    }\n    setValue(val, bp) {\n        this.marshal.setValue(this.nativeElement, this.DIRECTIVE_KEY, val, bp);\n    }\n    updateWithValue(input) {\n        if (this.currentValue !== input) {\n            this.addStyles(input);\n            this.currentValue = input;\n        }\n    }\n}\nBaseDirective2.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: BaseDirective2, deps: [{ token: i0.ElementRef }, { token: StyleBuilder }, { token: StyleUtils }, { token: MediaMarshaller }], target: i0.FactoryTarget.Directive });\nBaseDirective2.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: BaseDirective2, usesOnChanges: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: BaseDirective2, decorators: [{\n            type: Directive\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: StyleBuilder }, { type: StyleUtils }, { type: MediaMarshaller }]; } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * MockMatchMedia mocks calls to the Window API matchMedia with a build of a simulated\n * MockMediaQueryListener. Methods are available to simulate an activation of a mediaQuery\n * range and to clearAll mediaQuery listeners.\n */\nclass MockMatchMedia extends MatchMedia {\n    constructor(_zone, _platformId, _document, _breakpoints) {\n        super(_zone, _platformId, _document);\n        this._breakpoints = _breakpoints;\n        this.autoRegisterQueries = true; // Used for testing BreakPoint registrations\n        this.useOverlaps = false; // Allow fallback to overlapping mediaQueries\n    }\n    /** Easy method to clear all listeners for all mediaQueries */\n    clearAll() {\n        this.registry.forEach((mql) => {\n            mql.destroy();\n        });\n        this.registry.clear();\n        this.useOverlaps = false;\n    }\n    /** Feature to support manual, simulated activation of a mediaQuery. */\n    activate(mediaQuery, useOverlaps = this.useOverlaps) {\n        mediaQuery = this._validateQuery(mediaQuery);\n        if (useOverlaps || !this.isActive(mediaQuery)) {\n            this._deactivateAll();\n            this._registerMediaQuery(mediaQuery);\n            this._activateWithOverlaps(mediaQuery, useOverlaps);\n        }\n        return this.hasActivated;\n    }\n    /** Converts an optional mediaQuery alias to a specific, valid mediaQuery */\n    _validateQuery(queryOrAlias) {\n        const bp = this._breakpoints.findByAlias(queryOrAlias);\n        return bp?.mediaQuery ?? queryOrAlias;\n    }\n    /**\n     * Manually onMediaChange any overlapping mediaQueries to simulate\n     * similar functionality in the window.matchMedia()\n     */\n    _activateWithOverlaps(mediaQuery, useOverlaps) {\n        if (useOverlaps) {\n            const bp = this._breakpoints.findByQuery(mediaQuery);\n            const alias = bp?.alias ?? 'unknown';\n            // Simulate activation of overlapping lt-<XXX> ranges\n            switch (alias) {\n                case 'lg':\n                    this._activateByAlias(['lt-xl']);\n                    break;\n                case 'md':\n                    this._activateByAlias(['lt-xl', 'lt-lg']);\n                    break;\n                case 'sm':\n                    this._activateByAlias(['lt-xl', 'lt-lg', 'lt-md']);\n                    break;\n                case 'xs':\n                    this._activateByAlias(['lt-xl', 'lt-lg', 'lt-md', 'lt-sm']);\n                    break;\n            }\n            // Simulate activation of overlapping gt-<xxxx> mediaQuery ranges\n            switch (alias) {\n                case 'xl':\n                    this._activateByAlias(['gt-lg', 'gt-md', 'gt-sm', 'gt-xs']);\n                    break;\n                case 'lg':\n                    this._activateByAlias(['gt-md', 'gt-sm', 'gt-xs']);\n                    break;\n                case 'md':\n                    this._activateByAlias(['gt-sm', 'gt-xs']);\n                    break;\n                case 'sm':\n                    this._activateByAlias(['gt-xs']);\n                    break;\n            }\n        }\n        // Activate last since the responsiveActivation is watching *this* mediaQuery\n        return this._activateByQuery(mediaQuery);\n    }\n    /**\n     *\n     */\n    _activateByAlias(aliases) {\n        const activate = (alias) => {\n            const bp = this._breakpoints.findByAlias(alias);\n            this._activateByQuery(bp?.mediaQuery ?? alias);\n        };\n        aliases.forEach(activate);\n    }\n    /**\n     *\n     */\n    _activateByQuery(mediaQuery) {\n        if (!this.registry.has(mediaQuery) && this.autoRegisterQueries) {\n            this._registerMediaQuery(mediaQuery);\n        }\n        const mql = this.registry.get(mediaQuery);\n        if (mql && !this.isActive(mediaQuery)) {\n            this.registry.set(mediaQuery, mql.activate());\n        }\n        return this.hasActivated;\n    }\n    /** Deactivate all current MQLs and reset the buffer */\n    _deactivateAll() {\n        this.registry.forEach((it) => {\n            it.deactivate();\n        });\n        return this;\n    }\n    /** Insure the mediaQuery is registered with MatchMedia */\n    _registerMediaQuery(mediaQuery) {\n        if (!this.registry.has(mediaQuery) && this.autoRegisterQueries) {\n            this.registerQuery(mediaQuery);\n        }\n    }\n    /**\n     * Call window.matchMedia() to build a MediaQueryList; which\n     * supports 0..n listeners for activation/deactivation\n     */\n    buildMQL(query) {\n        return new MockMediaQueryList(query);\n    }\n    get hasActivated() {\n        return this.activations.length > 0;\n    }\n}\nMockMatchMedia.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MockMatchMedia, deps: [{ token: i0.NgZone }, { token: PLATFORM_ID }, { token: DOCUMENT }, { token: BreakPointRegistry }], target: i0.FactoryTarget.Injectable });\nMockMatchMedia.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MockMatchMedia });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MockMatchMedia, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: BreakPointRegistry }]; } });\n/**\n * Special internal class to simulate a MediaQueryList and\n * - supports manual activation to simulate mediaQuery matching\n * - manages listeners\n */\nclass MockMediaQueryList extends EventTarget {\n    constructor(_mediaQuery) {\n        super();\n        this._mediaQuery = _mediaQuery;\n        this._isActive = false;\n        this._listeners = [];\n        this.onchange = null;\n    }\n    get matches() {\n        return this._isActive;\n    }\n    get media() {\n        return this._mediaQuery;\n    }\n    /**\n     * Destroy the current list by deactivating the\n     * listeners and clearing the internal list\n     */\n    destroy() {\n        this.deactivate();\n        this._listeners = [];\n    }\n    /** Notify all listeners that 'matches === TRUE' */\n    activate() {\n        if (!this._isActive) {\n            this._isActive = true;\n            this._listeners.forEach((callback) => {\n                const cb = callback;\n                cb.call(this, { matches: this.matches, media: this.media });\n            });\n        }\n        return this;\n    }\n    /** Notify all listeners that 'matches === false' */\n    deactivate() {\n        if (this._isActive) {\n            this._isActive = false;\n            this._listeners.forEach((callback) => {\n                const cb = callback;\n                cb.call(this, { matches: this.matches, media: this.media });\n            });\n        }\n        return this;\n    }\n    /** Add a listener to our internal list to activate later */\n    addListener(listener) {\n        if (this._listeners.indexOf(listener) === -1) {\n            this._listeners.push(listener);\n        }\n        if (this._isActive) {\n            const cb = listener;\n            cb.call(this, { matches: this.matches, media: this.media });\n        }\n    }\n    /** Don't need to remove listeners in the testing environment */\n    removeListener(_) {\n    }\n    dispatchEvent(_) {\n        return false;\n    }\n}\n/**\n * Pre-configured provider for MockMatchMedia\n */\nconst MockMatchMediaProvider = {\n    provide: MatchMedia,\n    useClass: MockMatchMedia\n};\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Wraps the provided value in an array, unless the provided value is an array. */\nfunction coerceArray(value) {\n    return Array.isArray(value) ? value : [value];\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * MediaObserver enables applications to listen for 1..n mediaQuery activations and to determine\n * if a mediaQuery is currently activated.\n *\n * Since a breakpoint change will first deactivate 1...n mediaQueries and then possibly activate\n * 1..n mediaQueries, the MediaObserver will debounce notifications and report ALL *activations*\n * in 1 event notification. The reported activations will be sorted in descending priority order.\n *\n * This class uses the BreakPoint Registry to inject alias information into the raw MediaChange\n * notification. For custom mediaQuery notifications, alias information will not be injected and\n * those fields will be ''.\n *\n * Note: Developers should note that only mediaChange activations (not de-activations)\n *       are announced by the MediaObserver.\n *\n *  @usage\n *\n *  // RxJS\n *  import { filter } from 'rxjs/operators';\n *  import { MediaObserver } from '@angular/flex-layout';\n *\n *  @Component({ ... })\n *  export class AppComponent {\n *    status: string = '';\n *\n *    constructor(mediaObserver: MediaObserver) {\n *      const media$ = mediaObserver.asObservable().pipe(\n *        filter((changes: MediaChange[]) => true)   // silly noop filter\n *      );\n *\n *      media$.subscribe((changes: MediaChange[]) => {\n *        let status = '';\n *        changes.forEach( change => {\n *          status += `'${change.mqAlias}' = (${change.mediaQuery}) <br/>` ;\n *        });\n *        this.status = status;\n *     });\n *\n *    }\n *  }\n */\nclass MediaObserver {\n    constructor(breakpoints, matchMedia, hook) {\n        this.breakpoints = breakpoints;\n        this.matchMedia = matchMedia;\n        this.hook = hook;\n        /** Filter MediaChange notifications for overlapping breakpoints */\n        this.filterOverlaps = false;\n        this.destroyed$ = new Subject();\n        this._media$ = this.watchActivations();\n    }\n    /**\n     * Completes the active subject, signalling to all complete for all\n     * MediaObserver subscribers\n     */\n    ngOnDestroy() {\n        this.destroyed$.next();\n        this.destroyed$.complete();\n    }\n    // ************************************************\n    // Public Methods\n    // ************************************************\n    /**\n     * Observe changes to current activation 'list'\n     */\n    asObservable() {\n        return this._media$;\n    }\n    /**\n     * Allow programmatic query to determine if one or more media query/alias match\n     * the current viewport size.\n     * @param value One or more media queries (or aliases) to check.\n     * @returns Whether any of the media queries match.\n     */\n    isActive(value) {\n        const aliases = splitQueries(coerceArray(value));\n        return aliases.some(alias => {\n            const query = toMediaQuery(alias, this.breakpoints);\n            return query !== null && this.matchMedia.isActive(query);\n        });\n    }\n    // ************************************************\n    // Internal Methods\n    // ************************************************\n    /**\n     * Register all the mediaQueries registered in the BreakPointRegistry\n     * This is needed so subscribers can be auto-notified of all standard, registered\n     * mediaQuery activations\n     */\n    watchActivations() {\n        const queries = this.breakpoints.items.map(bp => bp.mediaQuery);\n        return this.buildObservable(queries);\n    }\n    /**\n     * Only pass/announce activations (not de-activations)\n     *\n     * Since multiple-mediaQueries can be activation in a cycle,\n     * gather all current activations into a single list of changes to observers\n     *\n     * Inject associated (if any) alias information into the MediaChange event\n     * - Exclude mediaQuery activations for overlapping mQs. List bounded mQ ranges only\n     * - Exclude print activations that do not have an associated mediaQuery\n     *\n     * NOTE: the raw MediaChange events [from MatchMedia] do not\n     *       contain important alias information; as such this info\n     *       must be injected into the MediaChange\n     */\n    buildObservable(mqList) {\n        const hasChanges = (changes) => {\n            const isValidQuery = (change) => (change.mediaQuery.length > 0);\n            return (changes.filter(isValidQuery).length > 0);\n        };\n        const excludeOverlaps = (changes) => {\n            return !this.filterOverlaps ? changes : changes.filter(change => {\n                const bp = this.breakpoints.findByQuery(change.mediaQuery);\n                return bp?.overlapping ?? true;\n            });\n        };\n        const ignoreDuplicates = (previous, current) => {\n            if (previous.length !== current.length) {\n                return false;\n            }\n            const previousMqs = previous.map(mc => mc.mediaQuery);\n            const currentMqs = new Set(current.map(mc => mc.mediaQuery));\n            const difference = new Set(previousMqs.filter(mq => !currentMqs.has(mq)));\n            return difference.size === 0;\n        };\n        /**\n         */\n        return this.matchMedia\n            .observe(this.hook.withPrintQuery(mqList))\n            .pipe(filter((change) => change.matches), debounceTime(0, asapScheduler), switchMap(_ => of(this.findAllActivations())), map(excludeOverlaps), filter(hasChanges), distinctUntilChanged(ignoreDuplicates), takeUntil(this.destroyed$));\n    }\n    /**\n     * Find all current activations and prepare single list of activations\n     * sorted by descending priority.\n     */\n    findAllActivations() {\n        const mergeMQAlias = (change) => {\n            const bp = this.breakpoints.findByQuery(change.mediaQuery);\n            return mergeAlias(change, bp);\n        };\n        const replaceWithPrintAlias = (change) => this.hook.isPrintEvent(change) ? this.hook.updateEvent(change) : change;\n        return this.matchMedia\n            .activations\n            .map(query => new MediaChange(true, query))\n            .map(replaceWithPrintAlias)\n            .map(mergeMQAlias)\n            .sort(sortDescendingPriority);\n    }\n}\nMediaObserver.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaObserver, deps: [{ token: BreakPointRegistry }, { token: MatchMedia }, { token: PrintHook }], target: i0.FactoryTarget.Injectable });\nMediaObserver.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaObserver, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaObserver, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: BreakPointRegistry }, { type: MatchMedia }, { type: PrintHook }]; } });\n/**\n * Find associated breakpoint (if any)\n */\nfunction toMediaQuery(query, locator) {\n    const bp = locator.findByAlias(query) ?? locator.findByQuery(query);\n    return bp?.mediaQuery ?? null;\n}\n/**\n * Split each query string into separate query strings if two queries are provided as comma\n * separated.\n */\nfunction splitQueries(queries) {\n    return queries.flatMap(query => query.split(','))\n        .map(query => query.trim());\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Class\n */\nclass MediaTrigger {\n    constructor(breakpoints, matchMedia, layoutConfig, _platformId, _document) {\n        this.breakpoints = breakpoints;\n        this.matchMedia = matchMedia;\n        this.layoutConfig = layoutConfig;\n        this._platformId = _platformId;\n        this._document = _document;\n        this.hasCachedRegistryMatches = false;\n        this.originalActivations = [];\n        this.originalRegistry = new Map();\n    }\n    /**\n     * Manually activate range of breakpoints\n     * @param list array of mediaQuery or alias strings\n     */\n    activate(list) {\n        list = list.map(it => it.trim()); // trim queries\n        this.saveActivations();\n        this.deactivateAll();\n        this.setActivations(list);\n        this.prepareAutoRestore();\n    }\n    /**\n     * Restore original, 'real' breakpoints and emit events\n     * to trigger stream notification\n     */\n    restore() {\n        if (this.hasCachedRegistryMatches) {\n            const extractQuery = (change) => change.mediaQuery;\n            const list = this.originalActivations.map(extractQuery);\n            try {\n                this.deactivateAll();\n                this.restoreRegistryMatches();\n                this.setActivations(list);\n            }\n            finally {\n                this.originalActivations = [];\n                if (this.resizeSubscription) {\n                    this.resizeSubscription.unsubscribe();\n                }\n            }\n        }\n    }\n    // ************************************************\n    // Internal Methods\n    // ************************************************\n    /**\n     * Whenever window resizes, immediately auto-restore original\n     * activations (if we are simulating activations)\n     */\n    prepareAutoRestore() {\n        const isBrowser = isPlatformBrowser(this._platformId) && this._document;\n        const enableAutoRestore = isBrowser && this.layoutConfig.mediaTriggerAutoRestore;\n        if (enableAutoRestore) {\n            const resize$ = fromEvent(window, 'resize').pipe(take(1));\n            this.resizeSubscription = resize$.subscribe(this.restore.bind(this));\n        }\n    }\n    /**\n     * Notify all matchMedia subscribers of de-activations\n     *\n     * Note: we must force 'matches' updates for\n     *       future matchMedia::activation lookups\n     */\n    deactivateAll() {\n        const list = this.currentActivations;\n        this.forceRegistryMatches(list, false);\n        this.simulateMediaChanges(list, false);\n    }\n    /**\n     * Cache current activations as sorted, prioritized list of MediaChanges\n     */\n    saveActivations() {\n        if (!this.hasCachedRegistryMatches) {\n            const toMediaChange = (query) => new MediaChange(true, query);\n            const mergeMQAlias = (change) => {\n                const bp = this.breakpoints.findByQuery(change.mediaQuery);\n                return mergeAlias(change, bp);\n            };\n            this.originalActivations = this.currentActivations\n                .map(toMediaChange)\n                .map(mergeMQAlias)\n                .sort(sortDescendingPriority);\n            this.cacheRegistryMatches();\n        }\n    }\n    /**\n     * Force set manual activations for specified mediaQuery list\n     */\n    setActivations(list) {\n        if (!!this.originalRegistry) {\n            this.forceRegistryMatches(list, true);\n        }\n        this.simulateMediaChanges(list);\n    }\n    /**\n     * For specified mediaQuery list manually simulate activations or deactivations\n     */\n    simulateMediaChanges(queries, matches = true) {\n        const toMediaQuery = (query) => {\n            const locator = this.breakpoints;\n            const bp = locator.findByAlias(query) || locator.findByQuery(query);\n            return bp ? bp.mediaQuery : query;\n        };\n        const emitChangeEvent = (query) => this.emitChangeEvent(matches, query);\n        queries.map(toMediaQuery).forEach(emitChangeEvent);\n    }\n    /**\n     * Replace current registry with simulated registry...\n     * Note: this is required since MediaQueryList::matches is 'readOnly'\n     */\n    forceRegistryMatches(queries, matches) {\n        const registry = new Map();\n        queries.forEach(query => {\n            registry.set(query, { matches });\n        });\n        this.matchMedia.registry = registry;\n    }\n    /**\n     * Save current MatchMedia::registry items.\n     */\n    cacheRegistryMatches() {\n        const target = this.originalRegistry;\n        target.clear();\n        this.matchMedia.registry.forEach((value, key) => {\n            target.set(key, value);\n        });\n        this.hasCachedRegistryMatches = true;\n    }\n    /**\n     * Restore original, 'true' registry\n     */\n    restoreRegistryMatches() {\n        const target = this.matchMedia.registry;\n        target.clear();\n        this.originalRegistry.forEach((value, key) => {\n            target.set(key, value);\n        });\n        this.originalRegistry.clear();\n        this.hasCachedRegistryMatches = false;\n    }\n    /**\n     * Manually emit a MediaChange event via the MatchMedia to MediaMarshaller and MediaObserver\n     */\n    emitChangeEvent(matches, query) {\n        this.matchMedia.source.next(new MediaChange(matches, query));\n    }\n    get currentActivations() {\n        return this.matchMedia.activations;\n    }\n}\nMediaTrigger.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaTrigger, deps: [{ token: BreakPointRegistry }, { token: MatchMedia }, { token: LAYOUT_CONFIG }, { token: PLATFORM_ID }, { token: DOCUMENT }], target: i0.FactoryTarget.Injectable });\nMediaTrigger.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaTrigger, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: MediaTrigger, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: BreakPointRegistry }, { type: MatchMedia }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [LAYOUT_CONFIG]\n                }] }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }]; } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n* The flex API permits 3 or 1 parts of the value:\n*    - `flex-grow flex-shrink flex-basis`, or\n*    - `flex-basis`\n*/\nfunction validateBasis(basis, grow = '1', shrink = '1') {\n    let parts = [grow, shrink, basis];\n    let j = basis.indexOf('calc');\n    if (j > 0) {\n        parts[2] = _validateCalcValue(basis.substring(j).trim());\n        let matches = basis.substr(0, j).trim().split(' ');\n        if (matches.length == 2) {\n            parts[0] = matches[0];\n            parts[1] = matches[1];\n        }\n    }\n    else if (j == 0) {\n        parts[2] = _validateCalcValue(basis.trim());\n    }\n    else {\n        let matches = basis.split(' ');\n        parts = (matches.length === 3) ? matches : [\n            grow, shrink, basis\n        ];\n    }\n    return parts;\n}\n/**\n * Calc expressions require whitespace before & after any expression operators\n * This is a simple, crude whitespace padding solution.\n *   - '3 3 calc(15em + 20px)'\n *   - calc(100% / 7 * 2)\n *   - 'calc(15em + 20px)'\n *   - 'calc(15em+20px)'\n *   - '37px'\n *   = '43%'\n */\nfunction _validateCalcValue(calc) {\n    return calc.replace(/[\\s]/g, '').replace(/[\\/\\*\\+\\-]/g, ' $& ');\n}\n\nconst MULTIPLIER_SUFFIX = 'x';\nfunction multiply(value, multiplier) {\n    if (multiplier === undefined) {\n        return value;\n    }\n    const transformValue = (possibleValue) => {\n        const numberValue = +(possibleValue.slice(0, -MULTIPLIER_SUFFIX.length));\n        if (value.endsWith(MULTIPLIER_SUFFIX) && !isNaN(numberValue)) {\n            return `${numberValue * multiplier.value}${multiplier.unit}`;\n        }\n        return value;\n    };\n    return value.includes(' ') ?\n        value.split(' ').map(transformValue).join(' ') : transformValue(value);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BREAKPOINT, BREAKPOINTS, BREAKPOINT_PRINT, BROWSER_PROVIDER, BaseDirective2, BreakPointRegistry, CLASS_NAME, CoreModule, DEFAULT_BREAKPOINTS, DEFAULT_CONFIG, LAYOUT_CONFIG, MediaChange, MediaMarshaller, MediaObserver, MediaTrigger, ORIENTATION_BREAKPOINTS, PrintHook, SERVER_TOKEN, ScreenTypes, StyleBuilder, StyleUtils, StylesheetMap, coerceArray, mergeAlias, removeStyles, sortAscendingPriority, sortDescendingPriority, validateBasis, MatchMedia as MatchMedia, MockMatchMedia as MockMatchMedia, MockMatchMediaProvider as MockMatchMediaProvider, multiply as multiply };\n","import * as i0 from '@angular/core';\nimport { Injectable, PLATFORM_ID, Directive, Inject, Input, Optional, Self, SecurityContext, NgModule } from '@angular/core';\nimport * as i1 from '@angular/flex-layout/core';\nimport { StyleBuilder, BaseDirective2, SERVER_TOKEN, LAYOUT_CONFIG, CoreModule } from '@angular/flex-layout/core';\nimport * as i2 from '@angular/common';\nimport { isPlatformServer, NgClass, NgStyle } from '@angular/common';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { takeUntil } from 'rxjs/operators';\nimport * as i2$1 from '@angular/platform-browser';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass ImgSrcStyleBuilder extends StyleBuilder {\n    buildStyles(url) {\n        return { 'content': url ? `url(${url})` : '' };\n    }\n}\nImgSrcStyleBuilder.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ImgSrcStyleBuilder, deps: null, target: i0.FactoryTarget.Injectable });\nImgSrcStyleBuilder.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ImgSrcStyleBuilder, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ImgSrcStyleBuilder, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\nclass ImgSrcDirective extends BaseDirective2 {\n    constructor(elementRef, styleBuilder, styler, marshal, platformId, serverModuleLoaded) {\n        super(elementRef, styleBuilder, styler, marshal);\n        this.platformId = platformId;\n        this.serverModuleLoaded = serverModuleLoaded;\n        this.DIRECTIVE_KEY = 'img-src';\n        this.defaultSrc = '';\n        this.styleCache = imgSrcCache;\n        this.init();\n        this.setValue(this.nativeElement.getAttribute('src') || '', '');\n        if (isPlatformServer(this.platformId) && this.serverModuleLoaded) {\n            this.nativeElement.setAttribute('src', '');\n        }\n    }\n    set src(val) {\n        this.defaultSrc = val;\n        this.setValue(this.defaultSrc, '');\n    }\n    /**\n     * Use the [responsively] activated input value to update\n     * the host img src attribute or assign a default `img.src=''`\n     * if the src has not been defined.\n     *\n     * Do nothing to standard `<img src=\"\">` usages, only when responsive\n     * keys are present do we actually call `setAttribute()`\n     */\n    updateWithValue(value) {\n        const url = value || this.defaultSrc;\n        if (isPlatformServer(this.platformId) && this.serverModuleLoaded) {\n            this.addStyles(url);\n        }\n        else {\n            this.nativeElement.setAttribute('src', url);\n        }\n    }\n}\nImgSrcDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ImgSrcDirective, deps: [{ token: i0.ElementRef }, { token: ImgSrcStyleBuilder }, { token: i1.StyleUtils }, { token: i1.MediaMarshaller }, { token: PLATFORM_ID }, { token: SERVER_TOKEN }], target: i0.FactoryTarget.Directive });\nImgSrcDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: ImgSrcDirective, inputs: { src: \"src\" }, usesInheritance: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ImgSrcDirective, decorators: [{\n            type: Directive\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: ImgSrcStyleBuilder }, { type: i1.StyleUtils }, { type: i1.MediaMarshaller }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [SERVER_TOKEN]\n                }] }]; }, propDecorators: { src: [{\n                type: Input,\n                args: ['src']\n            }] } });\nconst imgSrcCache = new Map();\nconst inputs$3 = [\n    'src.xs', 'src.sm', 'src.md', 'src.lg', 'src.xl',\n    'src.lt-sm', 'src.lt-md', 'src.lt-lg', 'src.lt-xl',\n    'src.gt-xs', 'src.gt-sm', 'src.gt-md', 'src.gt-lg'\n];\nconst selector$3 = `\n  img[src.xs],    img[src.sm],    img[src.md],    img[src.lg],   img[src.xl],\n  img[src.lt-sm], img[src.lt-md], img[src.lt-lg], img[src.lt-xl],\n  img[src.gt-xs], img[src.gt-sm], img[src.gt-md], img[src.gt-lg]\n`;\n/**\n * This directive provides a responsive API for the HTML <img> 'src' attribute\n * and will update the img.src property upon each responsive activation.\n *\n * e.g.\n *      <img src=\"defaultScene.jpg\" src.xs=\"mobileScene.jpg\"></img>\n *\n * @see https://css-tricks.com/responsive-images-youre-just-changing-resolutions-use-src/\n */\nclass DefaultImgSrcDirective extends ImgSrcDirective {\n    constructor() {\n        super(...arguments);\n        this.inputs = inputs$3;\n    }\n}\nDefaultImgSrcDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: DefaultImgSrcDirective, deps: null, target: i0.FactoryTarget.Directive });\nDefaultImgSrcDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: DefaultImgSrcDirective, selector: \"\\n  img[src.xs],    img[src.sm],    img[src.md],    img[src.lg],   img[src.xl],\\n  img[src.lt-sm], img[src.lt-md], img[src.lt-lg], img[src.lt-xl],\\n  img[src.gt-xs], img[src.gt-sm], img[src.gt-md], img[src.gt-lg]\\n\", inputs: { \"src.xs\": \"src.xs\", \"src.sm\": \"src.sm\", \"src.md\": \"src.md\", \"src.lg\": \"src.lg\", \"src.xl\": \"src.xl\", \"src.lt-sm\": \"src.lt-sm\", \"src.lt-md\": \"src.lt-md\", \"src.lt-lg\": \"src.lt-lg\", \"src.lt-xl\": \"src.lt-xl\", \"src.gt-xs\": \"src.gt-xs\", \"src.gt-sm\": \"src.gt-sm\", \"src.gt-md\": \"src.gt-md\", \"src.gt-lg\": \"src.gt-lg\" }, usesInheritance: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: DefaultImgSrcDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: selector$3, inputs: inputs$3 }]\n        }] });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass ClassDirective extends BaseDirective2 {\n    constructor(elementRef, styler, marshal, iterableDiffers, keyValueDiffers, renderer2, ngClassInstance) {\n        super(elementRef, null, styler, marshal);\n        this.ngClassInstance = ngClassInstance;\n        this.DIRECTIVE_KEY = 'ngClass';\n        if (!this.ngClassInstance) {\n            // Create an instance NgClass Directive instance only if `ngClass=\"\"` has NOT been defined on\n            // the same host element; since the responsive variations may be defined...\n            this.ngClassInstance = new NgClass(iterableDiffers, keyValueDiffers, elementRef, renderer2);\n        }\n        this.init();\n        this.setValue('', '');\n    }\n    /**\n     * Capture class assignments so we cache the default classes\n     * which are merged with activated styles and used as fallbacks.\n     */\n    set klass(val) {\n        this.ngClassInstance.klass = val;\n        this.setValue(val, '');\n    }\n    updateWithValue(value) {\n        this.ngClassInstance.ngClass = value;\n        this.ngClassInstance.ngDoCheck();\n    }\n    // ******************************************************************\n    // Lifecycle Hooks\n    // ******************************************************************\n    /**\n     * For ChangeDetectionStrategy.onPush and ngOnChanges() updates\n     */\n    ngDoCheck() {\n        this.ngClassInstance.ngDoCheck();\n    }\n}\nClassDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ClassDirective, deps: [{ token: i0.ElementRef }, { token: i1.StyleUtils }, { token: i1.MediaMarshaller }, { token: i0.IterableDiffers }, { token: i0.KeyValueDiffers }, { token: i0.Renderer2 }, { token: i2.NgClass, optional: true, self: true }], target: i0.FactoryTarget.Directive });\nClassDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: ClassDirective, inputs: { klass: [\"class\", \"klass\"] }, usesInheritance: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ClassDirective, decorators: [{\n            type: Directive\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i1.StyleUtils }, { type: i1.MediaMarshaller }, { type: i0.IterableDiffers }, { type: i0.KeyValueDiffers }, { type: i0.Renderer2 }, { type: i2.NgClass, decorators: [{\n                    type: Optional\n                }, {\n                    type: Self\n                }] }]; }, propDecorators: { klass: [{\n                type: Input,\n                args: ['class']\n            }] } });\nconst inputs$2 = [\n    'ngClass', 'ngClass.xs', 'ngClass.sm', 'ngClass.md', 'ngClass.lg', 'ngClass.xl',\n    'ngClass.lt-sm', 'ngClass.lt-md', 'ngClass.lt-lg', 'ngClass.lt-xl',\n    'ngClass.gt-xs', 'ngClass.gt-sm', 'ngClass.gt-md', 'ngClass.gt-lg'\n];\nconst selector$2 = `\n  [ngClass], [ngClass.xs], [ngClass.sm], [ngClass.md], [ngClass.lg], [ngClass.xl],\n  [ngClass.lt-sm], [ngClass.lt-md], [ngClass.lt-lg], [ngClass.lt-xl],\n  [ngClass.gt-xs], [ngClass.gt-sm], [ngClass.gt-md], [ngClass.gt-lg]\n`;\n/**\n * Directive to add responsive support for ngClass.\n * This maintains the core functionality of 'ngClass' and adds responsive API\n * Note: this class is a no-op when rendered on the server\n */\nclass DefaultClassDirective extends ClassDirective {\n    constructor() {\n        super(...arguments);\n        this.inputs = inputs$2;\n    }\n}\nDefaultClassDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: DefaultClassDirective, deps: null, target: i0.FactoryTarget.Directive });\nDefaultClassDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: DefaultClassDirective, selector: \"\\n  [ngClass], [ngClass.xs], [ngClass.sm], [ngClass.md], [ngClass.lg], [ngClass.xl],\\n  [ngClass.lt-sm], [ngClass.lt-md], [ngClass.lt-lg], [ngClass.lt-xl],\\n  [ngClass.gt-xs], [ngClass.gt-sm], [ngClass.gt-md], [ngClass.gt-lg]\\n\", inputs: { ngClass: \"ngClass\", \"ngClass.xs\": \"ngClass.xs\", \"ngClass.sm\": \"ngClass.sm\", \"ngClass.md\": \"ngClass.md\", \"ngClass.lg\": \"ngClass.lg\", \"ngClass.xl\": \"ngClass.xl\", \"ngClass.lt-sm\": \"ngClass.lt-sm\", \"ngClass.lt-md\": \"ngClass.lt-md\", \"ngClass.lt-lg\": \"ngClass.lt-lg\", \"ngClass.lt-xl\": \"ngClass.lt-xl\", \"ngClass.gt-xs\": \"ngClass.gt-xs\", \"ngClass.gt-sm\": \"ngClass.gt-sm\", \"ngClass.gt-md\": \"ngClass.gt-md\", \"ngClass.gt-lg\": \"ngClass.gt-lg\" }, usesInheritance: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: DefaultClassDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: selector$2, inputs: inputs$2 }]\n        }] });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass ShowHideStyleBuilder extends StyleBuilder {\n    buildStyles(show, parent) {\n        const shouldShow = show === 'true';\n        return { 'display': shouldShow ? parent.display || (parent.isServer ? 'initial' : '') : 'none' };\n    }\n}\nShowHideStyleBuilder.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ShowHideStyleBuilder, deps: null, target: i0.FactoryTarget.Injectable });\nShowHideStyleBuilder.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ShowHideStyleBuilder, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ShowHideStyleBuilder, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\nclass ShowHideDirective extends BaseDirective2 {\n    constructor(elementRef, styleBuilder, styler, marshal, layoutConfig, platformId, serverModuleLoaded) {\n        super(elementRef, styleBuilder, styler, marshal);\n        this.layoutConfig = layoutConfig;\n        this.platformId = platformId;\n        this.serverModuleLoaded = serverModuleLoaded;\n        this.DIRECTIVE_KEY = 'show-hide';\n        /** Original DOM Element CSS display style */\n        this.display = '';\n        this.hasLayout = false;\n        this.hasFlexChild = false;\n    }\n    // *********************************************\n    // Lifecycle Methods\n    // *********************************************\n    ngAfterViewInit() {\n        this.trackExtraTriggers();\n        const children = Array.from(this.nativeElement.children);\n        for (let i = 0; i < children.length; i++) {\n            if (this.marshal.hasValue(children[i], 'flex')) {\n                this.hasFlexChild = true;\n                break;\n            }\n        }\n        if (DISPLAY_MAP.has(this.nativeElement)) {\n            this.display = DISPLAY_MAP.get(this.nativeElement);\n        }\n        else {\n            this.display = this.getDisplayStyle();\n            DISPLAY_MAP.set(this.nativeElement, this.display);\n        }\n        this.init();\n        // set the default to show unless explicitly overridden\n        const defaultValue = this.marshal.getValue(this.nativeElement, this.DIRECTIVE_KEY, '');\n        if (defaultValue === undefined || defaultValue === '') {\n            this.setValue(true, '');\n        }\n        else {\n            this.triggerUpdate();\n        }\n    }\n    /**\n     * On changes to any @Input properties...\n     * Default to use the non-responsive Input value ('fxShow')\n     * Then conditionally override with the mq-activated Input's current value\n     */\n    ngOnChanges(changes) {\n        Object.keys(changes).forEach(key => {\n            if (this.inputs.indexOf(key) !== -1) {\n                const inputKey = key.split('.');\n                const bp = inputKey.slice(1).join('.');\n                const inputValue = changes[key].currentValue;\n                let shouldShow = inputValue !== '' ?\n                    inputValue !== 0 ? coerceBooleanProperty(inputValue) : false\n                    : true;\n                if (inputKey[0] === 'fxHide') {\n                    shouldShow = !shouldShow;\n                }\n                this.setValue(shouldShow, bp);\n            }\n        });\n    }\n    // *********************************************\n    // Protected methods\n    // *********************************************\n    /**\n     *  Watch for these extra triggers to update fxShow, fxHide stylings\n     */\n    trackExtraTriggers() {\n        this.hasLayout = this.marshal.hasValue(this.nativeElement, 'layout');\n        ['layout', 'layout-align'].forEach(key => {\n            this.marshal\n                .trackValue(this.nativeElement, key)\n                .pipe(takeUntil(this.destroySubject))\n                .subscribe(this.triggerUpdate.bind(this));\n        });\n    }\n    /**\n     * Override accessor to the current HTMLElement's `display` style\n     * Note: Show/Hide will not change the display to 'flex' but will set it to 'block'\n     * unless it was already explicitly specified inline or in a CSS stylesheet.\n     */\n    getDisplayStyle() {\n        return (this.hasLayout || (this.hasFlexChild && this.layoutConfig.addFlexToParent)) ?\n            'flex' : this.styler.lookupStyle(this.nativeElement, 'display', true);\n    }\n    /** Validate the visibility value and then update the host's inline display style */\n    updateWithValue(value = true) {\n        if (value === '') {\n            return;\n        }\n        const isServer = isPlatformServer(this.platformId);\n        this.addStyles(value ? 'true' : 'false', { display: this.display, isServer });\n        if (isServer && this.serverModuleLoaded) {\n            this.nativeElement.style.setProperty('display', '');\n        }\n        this.marshal.triggerUpdate(this.parentElement, 'layout-gap');\n    }\n}\nShowHideDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ShowHideDirective, deps: [{ token: i0.ElementRef }, { token: ShowHideStyleBuilder }, { token: i1.StyleUtils }, { token: i1.MediaMarshaller }, { token: LAYOUT_CONFIG }, { token: PLATFORM_ID }, { token: SERVER_TOKEN }], target: i0.FactoryTarget.Directive });\nShowHideDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: ShowHideDirective, usesInheritance: true, usesOnChanges: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ShowHideDirective, decorators: [{\n            type: Directive\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: ShowHideStyleBuilder }, { type: i1.StyleUtils }, { type: i1.MediaMarshaller }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [LAYOUT_CONFIG]\n                }] }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [SERVER_TOKEN]\n                }] }]; } });\nconst DISPLAY_MAP = new WeakMap();\nconst inputs$1 = [\n    'fxShow', 'fxShow.print',\n    'fxShow.xs', 'fxShow.sm', 'fxShow.md', 'fxShow.lg', 'fxShow.xl',\n    'fxShow.lt-sm', 'fxShow.lt-md', 'fxShow.lt-lg', 'fxShow.lt-xl',\n    'fxShow.gt-xs', 'fxShow.gt-sm', 'fxShow.gt-md', 'fxShow.gt-lg',\n    'fxHide', 'fxHide.print',\n    'fxHide.xs', 'fxHide.sm', 'fxHide.md', 'fxHide.lg', 'fxHide.xl',\n    'fxHide.lt-sm', 'fxHide.lt-md', 'fxHide.lt-lg', 'fxHide.lt-xl',\n    'fxHide.gt-xs', 'fxHide.gt-sm', 'fxHide.gt-md', 'fxHide.gt-lg'\n];\nconst selector$1 = `\n  [fxShow], [fxShow.print],\n  [fxShow.xs], [fxShow.sm], [fxShow.md], [fxShow.lg], [fxShow.xl],\n  [fxShow.lt-sm], [fxShow.lt-md], [fxShow.lt-lg], [fxShow.lt-xl],\n  [fxShow.gt-xs], [fxShow.gt-sm], [fxShow.gt-md], [fxShow.gt-lg],\n  [fxHide], [fxHide.print],\n  [fxHide.xs], [fxHide.sm], [fxHide.md], [fxHide.lg], [fxHide.xl],\n  [fxHide.lt-sm], [fxHide.lt-md], [fxHide.lt-lg], [fxHide.lt-xl],\n  [fxHide.gt-xs], [fxHide.gt-sm], [fxHide.gt-md], [fxHide.gt-lg]\n`;\n/**\n * 'show' Layout API directive\n */\nclass DefaultShowHideDirective extends ShowHideDirective {\n    constructor() {\n        super(...arguments);\n        this.inputs = inputs$1;\n    }\n}\nDefaultShowHideDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: DefaultShowHideDirective, deps: null, target: i0.FactoryTarget.Directive });\nDefaultShowHideDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: DefaultShowHideDirective, selector: \"\\n  [fxShow], [fxShow.print],\\n  [fxShow.xs], [fxShow.sm], [fxShow.md], [fxShow.lg], [fxShow.xl],\\n  [fxShow.lt-sm], [fxShow.lt-md], [fxShow.lt-lg], [fxShow.lt-xl],\\n  [fxShow.gt-xs], [fxShow.gt-sm], [fxShow.gt-md], [fxShow.gt-lg],\\n  [fxHide], [fxHide.print],\\n  [fxHide.xs], [fxHide.sm], [fxHide.md], [fxHide.lg], [fxHide.xl],\\n  [fxHide.lt-sm], [fxHide.lt-md], [fxHide.lt-lg], [fxHide.lt-xl],\\n  [fxHide.gt-xs], [fxHide.gt-sm], [fxHide.gt-md], [fxHide.gt-lg]\\n\", inputs: { fxShow: \"fxShow\", \"fxShow.print\": \"fxShow.print\", \"fxShow.xs\": \"fxShow.xs\", \"fxShow.sm\": \"fxShow.sm\", \"fxShow.md\": \"fxShow.md\", \"fxShow.lg\": \"fxShow.lg\", \"fxShow.xl\": \"fxShow.xl\", \"fxShow.lt-sm\": \"fxShow.lt-sm\", \"fxShow.lt-md\": \"fxShow.lt-md\", \"fxShow.lt-lg\": \"fxShow.lt-lg\", \"fxShow.lt-xl\": \"fxShow.lt-xl\", \"fxShow.gt-xs\": \"fxShow.gt-xs\", \"fxShow.gt-sm\": \"fxShow.gt-sm\", \"fxShow.gt-md\": \"fxShow.gt-md\", \"fxShow.gt-lg\": \"fxShow.gt-lg\", fxHide: \"fxHide\", \"fxHide.print\": \"fxHide.print\", \"fxHide.xs\": \"fxHide.xs\", \"fxHide.sm\": \"fxHide.sm\", \"fxHide.md\": \"fxHide.md\", \"fxHide.lg\": \"fxHide.lg\", \"fxHide.xl\": \"fxHide.xl\", \"fxHide.lt-sm\": \"fxHide.lt-sm\", \"fxHide.lt-md\": \"fxHide.lt-md\", \"fxHide.lt-lg\": \"fxHide.lt-lg\", \"fxHide.lt-xl\": \"fxHide.lt-xl\", \"fxHide.gt-xs\": \"fxHide.gt-xs\", \"fxHide.gt-sm\": \"fxHide.gt-sm\", \"fxHide.gt-md\": \"fxHide.gt-md\", \"fxHide.gt-lg\": \"fxHide.gt-lg\" }, usesInheritance: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: DefaultShowHideDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: selector$1, inputs: inputs$1 }]\n        }] });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** NgStyle allowed inputs */\nclass NgStyleKeyValue {\n    constructor(key, value, noQuotes = true) {\n        this.key = key;\n        this.value = value;\n        this.key = noQuotes ? key.replace(/['\"]/g, '').trim() : key.trim();\n        this.value = noQuotes ? value.replace(/['\"]/g, '').trim() : value.trim();\n        this.value = this.value.replace(/;/, '');\n    }\n}\nfunction getType(target) {\n    let what = typeof target;\n    if (what === 'object') {\n        return (target.constructor === Array) ? 'array' :\n            (target.constructor === Set) ? 'set' : 'object';\n    }\n    return what;\n}\n/**\n * Split string of key:value pairs into Array of k-v pairs\n * e.g.  'key:value; key:value; key:value;' -> ['key:value',...]\n */\nfunction buildRawList(source, delimiter = ';') {\n    return String(source)\n        .trim()\n        .split(delimiter)\n        .map((val) => val.trim())\n        .filter(val => val !== '');\n}\n/** Convert array of key:value strings to a iterable map object */\nfunction buildMapFromList$1(styles, sanitize) {\n    const sanitizeValue = (it) => {\n        if (sanitize) {\n            it.value = sanitize(it.value);\n        }\n        return it;\n    };\n    return styles\n        .map(stringToKeyValue)\n        .filter(entry => !!entry)\n        .map(sanitizeValue)\n        .reduce(keyValuesToMap, {});\n}\n/** Convert Set<string> or raw Object to an iterable NgStyleMap */\nfunction buildMapFromSet(source, sanitize) {\n    let list = [];\n    if (getType(source) === 'set') {\n        source.forEach(entry => list.push(entry));\n    }\n    else {\n        Object.keys(source).forEach((key) => {\n            list.push(`${key}:${source[key]}`);\n        });\n    }\n    return buildMapFromList$1(list, sanitize);\n}\n/** Convert 'key:value' -> [key, value] */\nfunction stringToKeyValue(it) {\n    const [key, ...vals] = it.split(':');\n    return new NgStyleKeyValue(key, vals.join(':'));\n}\n/** Convert [ [key,value] ] -> { key : value } */\nfunction keyValuesToMap(map, entry) {\n    if (!!entry.key) {\n        map[entry.key] = entry.value;\n    }\n    return map;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass StyleDirective extends BaseDirective2 {\n    constructor(elementRef, styler, marshal, sanitizer, differs, renderer2, ngStyleInstance, serverLoaded, platformId) {\n        super(elementRef, null, styler, marshal);\n        this.sanitizer = sanitizer;\n        this.ngStyleInstance = ngStyleInstance;\n        this.DIRECTIVE_KEY = 'ngStyle';\n        if (!this.ngStyleInstance) {\n            // Create an instance NgStyle Directive instance only if `ngStyle=\"\"` has NOT been\n            // defined on the same host element; since the responsive variations may be defined...\n            this.ngStyleInstance = new NgStyle(elementRef, differs, renderer2);\n        }\n        this.init();\n        const styles = this.nativeElement.getAttribute('style') ?? '';\n        this.fallbackStyles = this.buildStyleMap(styles);\n        this.isServer = serverLoaded && isPlatformServer(platformId);\n    }\n    /** Add generated styles */\n    updateWithValue(value) {\n        const styles = this.buildStyleMap(value);\n        this.ngStyleInstance.ngStyle = { ...this.fallbackStyles, ...styles };\n        if (this.isServer) {\n            this.applyStyleToElement(styles);\n        }\n        this.ngStyleInstance.ngDoCheck();\n    }\n    /** Remove generated styles */\n    clearStyles() {\n        this.ngStyleInstance.ngStyle = this.fallbackStyles;\n        this.ngStyleInstance.ngDoCheck();\n    }\n    /**\n     * Convert raw strings to ngStyleMap; which is required by ngStyle\n     * NOTE: Raw string key-value pairs MUST be delimited by `;`\n     *       Comma-delimiters are not supported due to complexities of\n     *       possible style values such as `rgba(x,x,x,x)` and others\n     */\n    buildStyleMap(styles) {\n        // Always safe-guard (aka sanitize) style property values\n        const sanitizer = (val) => this.sanitizer.sanitize(SecurityContext.STYLE, val) ?? '';\n        if (styles) {\n            switch (getType(styles)) {\n                case 'string': return buildMapFromList(buildRawList(styles), sanitizer);\n                case 'array': return buildMapFromList(styles, sanitizer);\n                case 'set': return buildMapFromSet(styles, sanitizer);\n                default: return buildMapFromSet(styles, sanitizer);\n            }\n        }\n        return {};\n    }\n    // ******************************************************************\n    // Lifecycle Hooks\n    // ******************************************************************\n    /** For ChangeDetectionStrategy.onPush and ngOnChanges() updates */\n    ngDoCheck() {\n        this.ngStyleInstance.ngDoCheck();\n    }\n}\nStyleDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: StyleDirective, deps: [{ token: i0.ElementRef }, { token: i1.StyleUtils }, { token: i1.MediaMarshaller }, { token: i2$1.DomSanitizer }, { token: i0.KeyValueDiffers }, { token: i0.Renderer2 }, { token: i2.NgStyle, optional: true, self: true }, { token: SERVER_TOKEN }, { token: PLATFORM_ID }], target: i0.FactoryTarget.Directive });\nStyleDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: StyleDirective, usesInheritance: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: StyleDirective, decorators: [{\n            type: Directive\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i1.StyleUtils }, { type: i1.MediaMarshaller }, { type: i2$1.DomSanitizer }, { type: i0.KeyValueDiffers }, { type: i0.Renderer2 }, { type: i2.NgStyle, decorators: [{\n                    type: Optional\n                }, {\n                    type: Self\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [SERVER_TOKEN]\n                }] }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; } });\nconst inputs = [\n    'ngStyle',\n    'ngStyle.xs', 'ngStyle.sm', 'ngStyle.md', 'ngStyle.lg', 'ngStyle.xl',\n    'ngStyle.lt-sm', 'ngStyle.lt-md', 'ngStyle.lt-lg', 'ngStyle.lt-xl',\n    'ngStyle.gt-xs', 'ngStyle.gt-sm', 'ngStyle.gt-md', 'ngStyle.gt-lg'\n];\nconst selector = `\n  [ngStyle],\n  [ngStyle.xs], [ngStyle.sm], [ngStyle.md], [ngStyle.lg], [ngStyle.xl],\n  [ngStyle.lt-sm], [ngStyle.lt-md], [ngStyle.lt-lg], [ngStyle.lt-xl],\n  [ngStyle.gt-xs], [ngStyle.gt-sm], [ngStyle.gt-md], [ngStyle.gt-lg]\n`;\n/**\n * Directive to add responsive support for ngStyle.\n *\n */\nclass DefaultStyleDirective extends StyleDirective {\n    constructor() {\n        super(...arguments);\n        this.inputs = inputs;\n    }\n}\nDefaultStyleDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: DefaultStyleDirective, deps: null, target: i0.FactoryTarget.Directive });\nDefaultStyleDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.0.2\", type: DefaultStyleDirective, selector: \"\\n  [ngStyle],\\n  [ngStyle.xs], [ngStyle.sm], [ngStyle.md], [ngStyle.lg], [ngStyle.xl],\\n  [ngStyle.lt-sm], [ngStyle.lt-md], [ngStyle.lt-lg], [ngStyle.lt-xl],\\n  [ngStyle.gt-xs], [ngStyle.gt-sm], [ngStyle.gt-md], [ngStyle.gt-lg]\\n\", inputs: { ngStyle: \"ngStyle\", \"ngStyle.xs\": \"ngStyle.xs\", \"ngStyle.sm\": \"ngStyle.sm\", \"ngStyle.md\": \"ngStyle.md\", \"ngStyle.lg\": \"ngStyle.lg\", \"ngStyle.xl\": \"ngStyle.xl\", \"ngStyle.lt-sm\": \"ngStyle.lt-sm\", \"ngStyle.lt-md\": \"ngStyle.lt-md\", \"ngStyle.lt-lg\": \"ngStyle.lt-lg\", \"ngStyle.lt-xl\": \"ngStyle.lt-xl\", \"ngStyle.gt-xs\": \"ngStyle.gt-xs\", \"ngStyle.gt-sm\": \"ngStyle.gt-sm\", \"ngStyle.gt-md\": \"ngStyle.gt-md\", \"ngStyle.gt-lg\": \"ngStyle.gt-lg\" }, usesInheritance: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: DefaultStyleDirective, decorators: [{\n            type: Directive,\n            args: [{ selector, inputs }]\n        }] });\n/** Build a styles map from a list of styles, while sanitizing bad values first */\nfunction buildMapFromList(styles, sanitize) {\n    const sanitizeValue = (it) => {\n        if (sanitize) {\n            it.value = sanitize(it.value);\n        }\n        return it;\n    };\n    return styles\n        .map(stringToKeyValue)\n        .filter(entry => !!entry)\n        .map(sanitizeValue)\n        .reduce(keyValuesToMap, {});\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst ALL_DIRECTIVES = [\n    DefaultShowHideDirective,\n    DefaultClassDirective,\n    DefaultStyleDirective,\n    DefaultImgSrcDirective,\n];\n/**\n * *****************************************************************\n * Define module for the Extended API\n * *****************************************************************\n */\nclass ExtendedModule {\n}\nExtendedModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ExtendedModule, deps: [], target: i0.FactoryTarget.NgModule });\nExtendedModule.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.0.2\", ngImport: i0, type: ExtendedModule, declarations: [DefaultShowHideDirective,\n        DefaultClassDirective,\n        DefaultStyleDirective,\n        DefaultImgSrcDirective], imports: [CoreModule], exports: [DefaultShowHideDirective,\n        DefaultClassDirective,\n        DefaultStyleDirective,\n        DefaultImgSrcDirective] });\nExtendedModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ExtendedModule, imports: [CoreModule] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.2\", ngImport: i0, type: ExtendedModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CoreModule],\n                    declarations: [...ALL_DIRECTIVES],\n                    exports: [...ALL_DIRECTIVES]\n                }]\n        }] });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ClassDirective, DefaultClassDirective, DefaultImgSrcDirective, DefaultShowHideDirective, DefaultStyleDirective, ExtendedModule, ImgSrcDirective, ImgSrcStyleBuilder, ShowHideDirective, ShowHideStyleBuilder, StyleDirective };\n"],"x_google_ignoreList":[23,24,25]}