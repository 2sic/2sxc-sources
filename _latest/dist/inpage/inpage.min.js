/*! For license information please see inpage.min.js.LICENSE.txt */
var $2sxcInpage;(()=>{var t,e,o={"./node_modules/@popperjs/core/lib/createPopper.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{createPopper:()=>w,detectOverflow:()=>f.default,popperGenerator:()=>x});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),a=o("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),l=o("./node_modules/@popperjs/core/lib/utils/orderModifiers.js"),c=o("./node_modules/@popperjs/core/lib/utils/debounce.js"),d=o("./node_modules/@popperjs/core/lib/utils/validateModifiers.js"),u=o("./node_modules/@popperjs/core/lib/utils/uniqueBy.js"),p=o("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),m=o("./node_modules/@popperjs/core/lib/utils/mergeByName.js"),f=o("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),g=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),h=o("./node_modules/@popperjs/core/lib/enums.js"),b="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",y={placement:"bottom",modifiers:[],strategy:"absolute"};function v(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function x(t){void 0===t&&(t={});var e=t,o=e.defaultModifiers,f=void 0===o?[]:o,x=e.defaultOptions,w=void 0===x?y:x;return function(t,e,o){void 0===o&&(o=w);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},y,w),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},C=[],k=!1,O={state:x,setOptions:function(o){var n="function"==typeof o?o(x.options):o;T(),x.options=Object.assign({},w,x.options,n),x.scrollParents={reference:(0,g.isElement)(t)?(0,r.default)(t):t.contextElement?(0,r.default)(t.contextElement):[],popper:(0,r.default)(e)};var s=(0,l.default)((0,m.default)([].concat(f,x.options.modifiers)));x.orderedModifiers=s.filter((function(t){return t.enabled}));var i=(0,u.default)([].concat(s,x.options.modifiers),(function(t){return t.name}));(0,d.default)(i),(0,p.default)(x.options.placement)===h.auto&&(x.orderedModifiers.find((function(t){return"flip"===t.name}))||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" ")));var c=(0,a.default)(e);return[c.marginTop,c.marginRight,c.marginBottom,c.marginLeft].some((function(t){return parseFloat(t)}))&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" ")),x.orderedModifiers.forEach((function(t){var e=t.name,o=t.options,n=void 0===o?{}:o,s=t.effect;if("function"==typeof s){var r=s({state:x,name:e,instance:O,options:n});C.push(r||function(){})}})),O.update()},forceUpdate:function(){if(!k){var t=x.elements,e=t.reference,o=t.popper;if(v(e,o)){x.rects={reference:(0,n.default)(e,(0,i.default)(o),"fixed"===x.options.strategy),popper:(0,s.default)(o)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach((function(t){return x.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0,a=0;a<x.orderedModifiers.length;a++){if((r+=1)>100){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}if(!0!==x.reset){var l=x.orderedModifiers[a],c=l.fn,d=l.options,u=void 0===d?{}:d,p=l.name;"function"==typeof c&&(x=c({state:x,options:u,name:p,instance:O})||x)}else x.reset=!1,a=-1}}else console.error(b)}},update:(0,c.default)((function(){return new Promise((function(t){O.forceUpdate(),t(x)}))})),destroy:function(){T(),k=!0}};if(!v(t,e))return console.error(b),O;function T(){C.forEach((function(t){return t()})),C=[]}return O.setOptions(o).then((function(t){!k&&o.onFirstUpdate&&o.onFirstUpdate(t)})),O}}var w=x()},"./node_modules/@popperjs/core/lib/dom-utils/contains.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function s(t,e){var o=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(o&&(0,n.isShadowRoot)(o)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}},"./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),s=o("./node_modules/@popperjs/core/lib/utils/math.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js");function a(t,e,o){void 0===e&&(e=!1),void 0===o&&(o=!1);var a=t.getBoundingClientRect(),l=1,c=1;e&&(0,n.isHTMLElement)(t)&&(l=t.offsetWidth>0&&(0,s.round)(a.width)/t.offsetWidth||1,c=t.offsetHeight>0&&(0,s.round)(a.height)/t.offsetHeight||1);var d=((0,n.isElement)(t)?(0,r.default)(t):window).visualViewport,u=!(0,i.default)()&&o,p=(a.left+(u&&d?d.offsetLeft:0))/l,m=(a.top+(u&&d?d.offsetTop:0))/c,f=a.width/l,g=a.height/c;return{width:f,height:g,top:m,right:p+f,bottom:m+g,left:p,x:p,y:m}}},"./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>y});var n=o("./node_modules/@popperjs/core/lib/enums.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js"),a=o("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),l=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),c=o("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),d=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),u=o("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),p=o("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),m=o("./node_modules/@popperjs/core/lib/dom-utils/contains.js"),f=o("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),g=o("./node_modules/@popperjs/core/lib/utils/rectToClientRect.js"),h=o("./node_modules/@popperjs/core/lib/utils/math.js");function b(t,e,o){return e===n.viewport?(0,g.default)((0,s.default)(t,o)):(0,d.isElement)(e)?function(t,e){var o=(0,u.default)(t,!1,"fixed"===e);return o.top=o.top+t.clientTop,o.left=o.left+t.clientLeft,o.bottom=o.top+t.clientHeight,o.right=o.left+t.clientWidth,o.width=t.clientWidth,o.height=t.clientHeight,o.x=o.left,o.y=o.top,o}(e,o):(0,g.default)((0,r.default)((0,l.default)(t)))}function y(t,e,o,n){var s="clippingParents"===e?function(t){var e=(0,i.default)((0,p.default)(t)),o=["absolute","fixed"].indexOf((0,c.default)(t).position)>=0&&(0,d.isHTMLElement)(t)?(0,a.default)(t):t;return(0,d.isElement)(o)?e.filter((function(t){return(0,d.isElement)(t)&&(0,m.default)(t,o)&&"body"!==(0,f.default)(t)})):[]}(t):[].concat(e),r=[].concat(s,[o]),l=r[0],u=r.reduce((function(e,o){var s=b(t,o,n);return e.top=(0,h.max)(s.top,e.top),e.right=(0,h.min)(s.right,e.right),e.bottom=(0,h.min)(s.bottom,e.bottom),e.left=(0,h.max)(s.left,e.left),e}),b(t,l,n));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}},"./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>u});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),a=o("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),l=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),c=o("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js"),d=o("./node_modules/@popperjs/core/lib/utils/math.js");function u(t,e,o){void 0===o&&(o=!1);var u=(0,i.isHTMLElement)(e),p=(0,i.isHTMLElement)(e)&&function(t){var e=t.getBoundingClientRect(),o=(0,d.round)(e.width)/t.offsetWidth||1,n=(0,d.round)(e.height)/t.offsetHeight||1;return 1!==o||1!==n}(e),m=(0,l.default)(e),f=(0,n.default)(t,p,o),g={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(u||!u&&!o)&&(("body"!==(0,r.default)(e)||(0,c.default)(m))&&(g=(0,s.default)(e)),(0,i.isHTMLElement)(e)?((h=(0,n.default)(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):m&&(h.x=(0,a.default)(m))),{x:f.left+g.scrollLeft-h.x,y:f.top+g.scrollTop-h.y,width:f.width,height:f.height}}},"./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function s(t){return(0,n.default)(t).getComputedStyle(t)}},"./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function s(t){return(((0,n.isElement)(t)?t.ownerDocument:t.document)||window.document).documentElement}},"./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>l});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js"),a=o("./node_modules/@popperjs/core/lib/utils/math.js");function l(t){var e,o=(0,n.default)(t),l=(0,i.default)(t),c=null==(e=t.ownerDocument)?void 0:e.body,d=(0,a.max)(o.scrollWidth,o.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),u=(0,a.max)(o.scrollHeight,o.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),p=-l.scrollLeft+(0,r.default)(t),m=-l.scrollTop;return"rtl"===(0,s.default)(c||o).direction&&(p+=(0,a.max)(o.clientWidth,c?c.clientWidth:0)-d),{width:d,height:u,x:p,y:m}}},"./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js":(t,e,o)=>{"use strict";function n(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js");function s(t){var e=(0,n.default)(t),o=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:o,height:s}}},"./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js":(t,e,o)=>{"use strict";function n(t){return t?(t.nodeName||"").toLowerCase():null}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js");function a(t){return t!==(0,s.default)(t)&&(0,r.isHTMLElement)(t)?(0,i.default)(t):(0,n.default)(t)}},"./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>u});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),a=o("./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js"),l=o("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),c=o("./node_modules/@popperjs/core/lib/utils/userAgent.js");function d(t){return(0,i.isHTMLElement)(t)&&"fixed"!==(0,r.default)(t).position?t.offsetParent:null}function u(t){for(var e=(0,n.default)(t),o=d(t);o&&(0,a.default)(o)&&"static"===(0,r.default)(o).position;)o=d(o);return o&&("html"===(0,s.default)(o)||"body"===(0,s.default)(o)&&"static"===(0,r.default)(o).position)?e:o||function(t){var e=/firefox/i.test((0,c.default)());if(/Trident/i.test((0,c.default)())&&(0,i.isHTMLElement)(t)&&"fixed"===(0,r.default)(t).position)return null;var o=(0,l.default)(t);for((0,i.isShadowRoot)(o)&&(o=o.host);(0,i.isHTMLElement)(o)&&["html","body"].indexOf((0,s.default)(o))<0;){var n=(0,r.default)(o);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||e&&"filter"===n.willChange||e&&n.filter&&"none"!==n.filter)return o;o=o.parentNode}return null}(t)||e}},"./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>i});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function i(t){return"html"===(0,n.default)(t)?t:t.assignedSlot||t.parentNode||((0,r.isShadowRoot)(t)?t.host:null)||(0,s.default)(t)}},"./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");function a(t){return["html","body","#document"].indexOf((0,r.default)(t))>=0?t.ownerDocument.body:(0,i.isHTMLElement)(t)&&(0,s.default)(t)?t:a((0,n.default)(t))}},"./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js");function a(t,e){var o=(0,n.default)(t),a=(0,s.default)(t),l=o.visualViewport,c=a.clientWidth,d=a.clientHeight,u=0,p=0;if(l){c=l.width,d=l.height;var m=(0,i.default)();(m||!m&&"fixed"===e)&&(u=l.offsetLeft,p=l.offsetTop)}return{width:c,height:d,x:u+(0,r.default)(t),y:p}}},"./node_modules/@popperjs/core/lib/dom-utils/getWindow.js":(t,e,o)=>{"use strict";function n(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function s(t){var e=(0,n.default)(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}},"./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>i});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js");function i(t){return(0,n.default)((0,s.default)(t)).left+(0,r.default)(t).scrollLeft}},"./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{isElement:()=>s,isHTMLElement:()=>r,isShadowRoot:()=>i});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js");function s(t){return t instanceof(0,n.default)(t).Element||t instanceof Element}function r(t){return t instanceof(0,n.default)(t).HTMLElement||t instanceof HTMLElement}function i(t){return"undefined"!=typeof ShadowRoot&&(t instanceof(0,n.default)(t).ShadowRoot||t instanceof ShadowRoot)}},"./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/utils/userAgent.js");function s(){return!/^((?!chrome|android).)*safari/i.test((0,n.default)())}},"./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js");function s(t){var e=(0,n.default)(t),o=e.overflow,s=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+r+s)}},"./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js");function s(t){return["table","td","th"].indexOf((0,n.default)(t))>=0}},"./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js");function a(t,e){var o;void 0===e&&(e=[]);var l=(0,n.default)(t),c=l===(null==(o=t.ownerDocument)?void 0:o.body),d=(0,r.default)(l),u=c?[d].concat(d.visualViewport||[],(0,i.default)(l)?l:[]):l,p=e.concat(u);return c?p:p.concat(a((0,s.default)(u)))}},"./node_modules/@popperjs/core/lib/enums.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{afterMain:()=>C,afterRead:()=>v,afterWrite:()=>T,auto:()=>a,basePlacements:()=>l,beforeMain:()=>x,beforeRead:()=>b,beforeWrite:()=>k,bottom:()=>s,clippingParents:()=>u,end:()=>d,left:()=>i,main:()=>w,modifierPhases:()=>S,placements:()=>h,popper:()=>m,read:()=>y,reference:()=>f,right:()=>r,start:()=>c,top:()=>n,variationPlacements:()=>g,viewport:()=>p,write:()=>O});var n="top",s="bottom",r="right",i="left",a="auto",l=[n,s,r,i],c="start",d="end",u="clippingParents",p="viewport",m="popper",f="reference",g=l.reduce((function(t,e){return t.concat([e+"-"+c,e+"-"+d])}),[]),h=[].concat(l,[a]).reduce((function(t,e){return t.concat([e,e+"-"+c,e+"-"+d])}),[]),b="beforeRead",y="read",v="afterRead",x="beforeMain",w="main",C="afterMain",k="beforeWrite",O="write",T="afterWrite",S=[b,y,v,x,w,C,k,O,T]},"./node_modules/@popperjs/core/lib/modifiers/applyStyles.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>r});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");const r={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var o=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];(0,s.isHTMLElement)(i)&&(0,n.default)(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:o[t]).reduce((function(t,e){return t[e]="",t}),{});(0,s.isHTMLElement)(r)&&(0,n.default)(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]}},"./node_modules/@popperjs/core/lib/modifiers/arrow.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>m});var n=o("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/contains.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),a=o("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),l=o("./node_modules/@popperjs/core/lib/utils/within.js"),c=o("./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js"),d=o("./node_modules/@popperjs/core/lib/utils/expandToHashMap.js"),u=o("./node_modules/@popperjs/core/lib/enums.js"),p=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js");const m={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,o=t.state,r=t.name,p=t.options,m=o.elements.arrow,f=o.modifiersData.popperOffsets,g=(0,n.default)(o.placement),h=(0,a.default)(g),b=[u.left,u.right].indexOf(g)>=0?"height":"width";if(m&&f){var y=function(t,e){return t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,(0,c.default)("number"!=typeof t?t:(0,d.default)(t,u.basePlacements))}(p.padding,o),v=(0,s.default)(m),x="y"===h?u.top:u.left,w="y"===h?u.bottom:u.right,C=o.rects.reference[b]+o.rects.reference[h]-f[h]-o.rects.popper[b],k=f[h]-o.rects.reference[h],O=(0,i.default)(m),T=O?"y"===h?O.clientHeight||0:O.clientWidth||0:0,S=C/2-k/2,j=y[x],A=T-v[b]-y[w],L=T/2-v[b]/2+S,E=(0,l.within)(j,L,A),I=h;o.modifiersData[r]=((e={})[I]=E,e.centerOffset=E-L,e)}},effect:function(t){var e=t.state,o=t.options.element,n=void 0===o?"[data-popper-arrow]":o;null!=n&&("string"!=typeof n||(n=e.elements.popper.querySelector(n)))&&((0,p.isHTMLElement)(n)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),(0,r.default)(e.elements.popper,n)?e.elements.arrow=n:console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" ")))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},"./node_modules/@popperjs/core/lib/modifiers/computeStyles.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>m,mapToStyles:()=>p});var n=o("./node_modules/@popperjs/core/lib/enums.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),i=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),a=o("./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js"),l=o("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),c=o("./node_modules/@popperjs/core/lib/utils/getVariation.js"),d=o("./node_modules/@popperjs/core/lib/utils/math.js"),u={top:"auto",right:"auto",bottom:"auto",left:"auto"};function p(t){var e,o=t.popper,l=t.popperRect,c=t.placement,p=t.variation,m=t.offsets,f=t.position,g=t.gpuAcceleration,h=t.adaptive,b=t.roundOffsets,y=t.isFixed,v=m.x,x=void 0===v?0:v,w=m.y,C=void 0===w?0:w,k="function"==typeof b?b({x,y:C}):{x,y:C};x=k.x,C=k.y;var O=m.hasOwnProperty("x"),T=m.hasOwnProperty("y"),S=n.left,j=n.top,A=window;if(h){var L=(0,s.default)(o),E="clientHeight",I="clientWidth";L===(0,r.default)(o)&&(L=(0,i.default)(o),"static"!==(0,a.default)(L).position&&"absolute"===f&&(E="scrollHeight",I="scrollWidth")),(c===n.top||(c===n.left||c===n.right)&&p===n.end)&&(j=n.bottom,C-=(y&&L===A&&A.visualViewport?A.visualViewport.height:L[E])-l.height,C*=g?1:-1),c!==n.left&&(c!==n.top&&c!==n.bottom||p!==n.end)||(S=n.right,x-=(y&&L===A&&A.visualViewport?A.visualViewport.width:L[I])-l.width,x*=g?1:-1)}var P,_=Object.assign({position:f},h&&u),M=!0===b?function(t){var e=t.x,o=t.y,n=window.devicePixelRatio||1;return{x:(0,d.round)(e*n)/n||0,y:(0,d.round)(o*n)/n||0}}({x,y:C}):{x,y:C};return x=M.x,C=M.y,g?Object.assign({},_,((P={})[j]=T?"0":"",P[S]=O?"0":"",P.transform=(A.devicePixelRatio||1)<=1?"translate("+x+"px, "+C+"px)":"translate3d("+x+"px, "+C+"px, 0)",P)):Object.assign({},_,((e={})[j]=T?C+"px":"",e[S]=O?x+"px":"",e.transform="",e))}const m={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,o=t.options,n=o.gpuAcceleration,s=void 0===n||n,r=o.adaptive,i=void 0===r||r,d=o.roundOffsets,u=void 0===d||d,m=(0,a.default)(e.elements.popper).transitionProperty||"";i&&["transform","top","right","bottom","left"].some((function(t){return m.indexOf(t)>=0}))&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "));var f={placement:(0,l.default)(e.placement),variation:(0,c.default)(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,p(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,p(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/eventListeners.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>r});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getWindow.js"),s={passive:!0};const r={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,o=t.instance,r=t.options,i=r.scroll,a=void 0===i||i,l=r.resize,c=void 0===l||l,d=(0,n.default)(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach((function(t){t.addEventListener("scroll",o.update,s)})),c&&d.addEventListener("resize",o.update,s),function(){a&&u.forEach((function(t){t.removeEventListener("scroll",o.update,s)})),c&&d.removeEventListener("resize",o.update,s)}},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/flip.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>d});var n=o("./node_modules/@popperjs/core/lib/utils/getOppositePlacement.js"),s=o("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),r=o("./node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js"),i=o("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),a=o("./node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js"),l=o("./node_modules/@popperjs/core/lib/enums.js"),c=o("./node_modules/@popperjs/core/lib/utils/getVariation.js");const d={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,o=t.options,d=t.name;if(!e.modifiersData[d]._skip){for(var u=o.mainAxis,p=void 0===u||u,m=o.altAxis,f=void 0===m||m,g=o.fallbackPlacements,h=o.padding,b=o.boundary,y=o.rootBoundary,v=o.altBoundary,x=o.flipVariations,w=void 0===x||x,C=o.allowedAutoPlacements,k=e.options.placement,O=(0,s.default)(k),T=g||(O!==k&&w?function(t){if((0,s.default)(t)===l.auto)return[];var e=(0,n.default)(t);return[(0,r.default)(t),e,(0,r.default)(e)]}(k):[(0,n.default)(k)]),S=[k].concat(T).reduce((function(t,o){return t.concat((0,s.default)(o)===l.auto?(0,a.default)(e,{placement:o,boundary:b,rootBoundary:y,padding:h,flipVariations:w,allowedAutoPlacements:C}):o)}),[]),j=e.rects.reference,A=e.rects.popper,L=new Map,E=!0,I=S[0],P=0;P<S.length;P++){var _=S[P],M=(0,s.default)(_),B=(0,c.default)(_)===l.start,D=[l.top,l.bottom].indexOf(M)>=0,R=D?"width":"height",N=(0,i.default)(e,{placement:_,boundary:b,rootBoundary:y,altBoundary:v,padding:h}),$=D?B?l.right:l.left:B?l.bottom:l.top;j[R]>A[R]&&($=(0,n.default)($));var H=(0,n.default)($),q=[];if(p&&q.push(N[M]<=0),f&&q.push(N[$]<=0,N[H]<=0),q.every((function(t){return t}))){I=_,E=!1;break}L.set(_,q)}if(E)for(var F=function(t){var e=S.find((function(e){var o=L.get(e);if(o)return o.slice(0,t).every((function(t){return t}))}));if(e)return I=e,"break"},U=w?3:1;U>0&&"break"!==F(U);U--);e.placement!==I&&(e.modifiersData[d]._skip=!0,e.placement=I,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}}},"./node_modules/@popperjs/core/lib/modifiers/hide.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/enums.js"),s=o("./node_modules/@popperjs/core/lib/utils/detectOverflow.js");function r(t,e,o){return void 0===o&&(o={x:0,y:0}),{top:t.top-e.height-o.y,right:t.right-e.width+o.x,bottom:t.bottom-e.height+o.y,left:t.left-e.width-o.x}}function i(t){return[n.top,n.right,n.bottom,n.left].some((function(e){return t[e]>=0}))}const a={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,o=t.name,n=e.rects.reference,a=e.rects.popper,l=e.modifiersData.preventOverflow,c=(0,s.default)(e,{elementContext:"reference"}),d=(0,s.default)(e,{altBoundary:!0}),u=r(c,n),p=r(d,a,l),m=i(u),f=i(p);e.modifiersData[o]={referenceClippingOffsets:u,popperEscapeOffsets:p,isReferenceHidden:m,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":f})}}},"./node_modules/@popperjs/core/lib/modifiers/index.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{applyStyles:()=>n.default,arrow:()=>s.default,computeStyles:()=>r.default,eventListeners:()=>i.default,flip:()=>a.default,hide:()=>l.default,offset:()=>c.default,popperOffsets:()=>d.default,preventOverflow:()=>u.default});var n=o("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),s=o("./node_modules/@popperjs/core/lib/modifiers/arrow.js"),r=o("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),i=o("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),a=o("./node_modules/@popperjs/core/lib/modifiers/flip.js"),l=o("./node_modules/@popperjs/core/lib/modifiers/hide.js"),c=o("./node_modules/@popperjs/core/lib/modifiers/offset.js"),d=o("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),u=o("./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js")},"./node_modules/@popperjs/core/lib/modifiers/offset.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>i,distanceAndSkiddingToXY:()=>r});var n=o("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),s=o("./node_modules/@popperjs/core/lib/enums.js");function r(t,e,o){var r=(0,n.default)(t),i=[s.left,s.top].indexOf(r)>=0?-1:1,a="function"==typeof o?o(Object.assign({},e,{placement:t})):o,l=a[0],c=a[1];return l=l||0,c=(c||0)*i,[s.left,s.right].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}}const i={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,o=t.options,n=t.name,i=o.offset,a=void 0===i?[0,0]:i,l=s.placements.reduce((function(t,o){return t[o]=r(o,e.rects,a),t}),{}),c=l[e.placement],d=c.x,u=c.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=l}}},"./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/utils/computeOffsets.js");const s={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,o=t.name;e.modifiersData[o]=(0,n.default)({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}}},"./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>f});var n=o("./node_modules/@popperjs/core/lib/enums.js"),s=o("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),r=o("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),i=o("./node_modules/@popperjs/core/lib/utils/getAltAxis.js"),a=o("./node_modules/@popperjs/core/lib/utils/within.js"),l=o("./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js"),c=o("./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js"),d=o("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),u=o("./node_modules/@popperjs/core/lib/utils/getVariation.js"),p=o("./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js"),m=o("./node_modules/@popperjs/core/lib/utils/math.js");const f={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,o=t.options,f=t.name,g=o.mainAxis,h=void 0===g||g,b=o.altAxis,y=void 0!==b&&b,v=o.boundary,x=o.rootBoundary,w=o.altBoundary,C=o.padding,k=o.tether,O=void 0===k||k,T=o.tetherOffset,S=void 0===T?0:T,j=(0,d.default)(e,{boundary:v,rootBoundary:x,padding:C,altBoundary:w}),A=(0,s.default)(e.placement),L=(0,u.default)(e.placement),E=!L,I=(0,r.default)(A),P=(0,i.default)(I),_=e.modifiersData.popperOffsets,M=e.rects.reference,B=e.rects.popper,D="function"==typeof S?S(Object.assign({},e.rects,{placement:e.placement})):S,R="number"==typeof D?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(_){if(h){var H,q="y"===I?n.top:n.left,F="y"===I?n.bottom:n.right,U="y"===I?"height":"width",W=_[I],V=W+j[q],Q=W-j[F],J=O?-B[U]/2:0,G=L===n.start?M[U]:B[U],z=L===n.start?-B[U]:-M[U],K=e.elements.arrow,X=O&&K?(0,l.default)(K):{width:0,height:0},Y=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:(0,p.default)(),Z=Y[q],tt=Y[F],et=(0,a.within)(0,M[U],X[U]),ot=E?M[U]/2-J-et-Z-R.mainAxis:G-et-Z-R.mainAxis,nt=E?-M[U]/2+J+et+tt+R.mainAxis:z+et+tt+R.mainAxis,st=e.elements.arrow&&(0,c.default)(e.elements.arrow),rt=st?"y"===I?st.clientTop||0:st.clientLeft||0:0,it=null!=(H=null==N?void 0:N[I])?H:0,at=W+ot-it-rt,lt=W+nt-it,ct=(0,a.within)(O?(0,m.min)(V,at):V,W,O?(0,m.max)(Q,lt):Q);_[I]=ct,$[I]=ct-W}if(y){var dt,ut="x"===I?n.top:n.left,pt="x"===I?n.bottom:n.right,mt=_[P],ft="y"===P?"height":"width",gt=mt+j[ut],ht=mt-j[pt],bt=-1!==[n.top,n.left].indexOf(A),yt=null!=(dt=null==N?void 0:N[P])?dt:0,vt=bt?gt:mt-M[ft]-B[ft]-yt+R.altAxis,xt=bt?mt+M[ft]+B[ft]-yt-R.altAxis:ht,wt=O&&bt?(0,a.withinMaxClamp)(vt,mt,xt):(0,a.within)(O?vt:gt,mt,O?xt:ht);_[P]=wt,$[P]=wt-mt}e.modifiersData[f]=$}},requiresIfExists:["offset"]}},"./node_modules/@popperjs/core/lib/popper-lite.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{createPopper:()=>d,defaultModifiers:()=>c,detectOverflow:()=>s.default,popperGenerator:()=>n.popperGenerator});var n=o("./node_modules/@popperjs/core/lib/createPopper.js"),s=o("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),r=o("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),i=o("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),a=o("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),l=o("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),c=[r.default,i.default,a.default,l.default],d=(0,n.popperGenerator)({defaultModifiers:c})},"./node_modules/@popperjs/core/lib/popper.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{applyStyles:()=>g.applyStyles,arrow:()=>g.arrow,computeStyles:()=>g.computeStyles,createPopper:()=>b,createPopperLite:()=>f.createPopper,defaultModifiers:()=>h,detectOverflow:()=>s.default,eventListeners:()=>g.eventListeners,flip:()=>g.flip,hide:()=>g.hide,offset:()=>g.offset,popperGenerator:()=>n.popperGenerator,popperOffsets:()=>g.popperOffsets,preventOverflow:()=>g.preventOverflow});var n=o("./node_modules/@popperjs/core/lib/createPopper.js"),s=o("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),r=o("./node_modules/@popperjs/core/lib/modifiers/eventListeners.js"),i=o("./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js"),a=o("./node_modules/@popperjs/core/lib/modifiers/computeStyles.js"),l=o("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),c=o("./node_modules/@popperjs/core/lib/modifiers/offset.js"),d=o("./node_modules/@popperjs/core/lib/modifiers/flip.js"),u=o("./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js"),p=o("./node_modules/@popperjs/core/lib/modifiers/arrow.js"),m=o("./node_modules/@popperjs/core/lib/modifiers/hide.js"),f=o("./node_modules/@popperjs/core/lib/popper-lite.js"),g=o("./node_modules/@popperjs/core/lib/modifiers/index.js"),h=[r.default,i.default,a.default,l.default,c.default,d.default,u.default,p.default,m.default],b=(0,n.popperGenerator)({defaultModifiers:h})},"./node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/utils/getVariation.js"),s=o("./node_modules/@popperjs/core/lib/enums.js"),r=o("./node_modules/@popperjs/core/lib/utils/detectOverflow.js"),i=o("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js");function a(t,e){void 0===e&&(e={});var o=e,a=o.placement,l=o.boundary,c=o.rootBoundary,d=o.padding,u=o.flipVariations,p=o.allowedAutoPlacements,m=void 0===p?s.placements:p,f=(0,n.default)(a),g=f?u?s.variationPlacements:s.variationPlacements.filter((function(t){return(0,n.default)(t)===f})):s.basePlacements,h=g.filter((function(t){return m.indexOf(t)>=0}));0===h.length&&(h=g,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var b=h.reduce((function(e,o){return e[o]=(0,r.default)(t,{placement:o,boundary:l,rootBoundary:c,padding:d})[(0,i.default)(o)],e}),{});return Object.keys(b).sort((function(t,e){return b[t]-b[e]}))}},"./node_modules/@popperjs/core/lib/utils/computeOffsets.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/utils/getBasePlacement.js"),s=o("./node_modules/@popperjs/core/lib/utils/getVariation.js"),r=o("./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js"),i=o("./node_modules/@popperjs/core/lib/enums.js");function a(t){var e,o=t.reference,a=t.element,l=t.placement,c=l?(0,n.default)(l):null,d=l?(0,s.default)(l):null,u=o.x+o.width/2-a.width/2,p=o.y+o.height/2-a.height/2;switch(c){case i.top:e={x:u,y:o.y-a.height};break;case i.bottom:e={x:u,y:o.y+o.height};break;case i.right:e={x:o.x+o.width,y:p};break;case i.left:e={x:o.x-a.width,y:p};break;default:e={x:o.x,y:o.y}}var m=c?(0,r.default)(c):null;if(null!=m){var f="y"===m?"height":"width";switch(d){case i.start:e[m]=e[m]-(o[f]/2-a[f]/2);break;case i.end:e[m]=e[m]+(o[f]/2-a[f]/2)}}return e}},"./node_modules/@popperjs/core/lib/utils/debounce.js":(t,e,o)=>{"use strict";function n(t){var e;return function(){return e||(e=new Promise((function(o){Promise.resolve().then((function(){e=void 0,o(t())}))}))),e}}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/detectOverflow.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>p});var n=o("./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js"),s=o("./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js"),r=o("./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js"),i=o("./node_modules/@popperjs/core/lib/utils/computeOffsets.js"),a=o("./node_modules/@popperjs/core/lib/utils/rectToClientRect.js"),l=o("./node_modules/@popperjs/core/lib/enums.js"),c=o("./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js"),d=o("./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js"),u=o("./node_modules/@popperjs/core/lib/utils/expandToHashMap.js");function p(t,e){void 0===e&&(e={});var o=e,p=o.placement,m=void 0===p?t.placement:p,f=o.strategy,g=void 0===f?t.strategy:f,h=o.boundary,b=void 0===h?l.clippingParents:h,y=o.rootBoundary,v=void 0===y?l.viewport:y,x=o.elementContext,w=void 0===x?l.popper:x,C=o.altBoundary,k=void 0!==C&&C,O=o.padding,T=void 0===O?0:O,S=(0,d.default)("number"!=typeof T?T:(0,u.default)(T,l.basePlacements)),j=w===l.popper?l.reference:l.popper,A=t.rects.popper,L=t.elements[k?j:w],E=(0,n.default)((0,c.isElement)(L)?L:L.contextElement||(0,s.default)(t.elements.popper),b,v,g),I=(0,r.default)(t.elements.reference),P=(0,i.default)({reference:I,element:A,strategy:"absolute",placement:m}),_=(0,a.default)(Object.assign({},A,P)),M=w===l.popper?_:I,B={top:E.top-M.top+S.top,bottom:M.bottom-E.bottom+S.bottom,left:E.left-M.left+S.left,right:M.right-E.right+S.right},D=t.modifiersData.offset;if(w===l.popper&&D){var R=D[m];Object.keys(B).forEach((function(t){var e=[l.right,l.bottom].indexOf(t)>=0?1:-1,o=[l.top,l.bottom].indexOf(t)>=0?"y":"x";B[t]+=R[o]*e}))}return B}},"./node_modules/@popperjs/core/lib/utils/expandToHashMap.js":(t,e,o)=>{"use strict";function n(t,e){return e.reduce((function(e,o){return e[o]=t,e}),{})}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/format.js":(t,e,o)=>{"use strict";function n(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),n=1;n<e;n++)o[n-1]=arguments[n];return[].concat(o).reduce((function(t,e){return t.replace(/%s/,e)}),t)}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/getAltAxis.js":(t,e,o)=>{"use strict";function n(t){return"x"===t?"y":"x"}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/getBasePlacement.js":(t,e,o)=>{"use strict";function n(t){return t.split("-")[0]}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js":(t,e,o)=>{"use strict";function n(){return{top:0,right:0,bottom:0,left:0}}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js":(t,e,o)=>{"use strict";function n(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/getOppositePlacement.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n={left:"right",right:"left",bottom:"top",top:"bottom"};function s(t){return t.replace(/left|right|bottom|top/g,(function(t){return n[t]}))}},"./node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n={start:"end",end:"start"};function s(t){return t.replace(/start|end/g,(function(t){return n[t]}))}},"./node_modules/@popperjs/core/lib/utils/getVariation.js":(t,e,o)=>{"use strict";function n(t){return t.split("-")[1]}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/math.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{max:()=>n,min:()=>s,round:()=>r});var n=Math.max,s=Math.min,r=Math.round},"./node_modules/@popperjs/core/lib/utils/mergeByName.js":(t,e,o)=>{"use strict";function n(t){var e=t.reduce((function(t,e){var o=t[e.name];return t[e.name]=o?Object.assign({},o,e,{options:Object.assign({},o.options,e.options),data:Object.assign({},o.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js");function s(t){return Object.assign({},(0,n.default)(),t)}},"./node_modules/@popperjs/core/lib/utils/orderModifiers.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>r});var n=o("./node_modules/@popperjs/core/lib/enums.js");function s(t){var e=new Map,o=new Set,n=[];function s(t){o.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!o.has(t)){var n=e.get(t);n&&s(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){o.has(t.name)||s(t)})),n}function r(t){var e=s(t);return n.modifierPhases.reduce((function(t,o){return t.concat(e.filter((function(t){return t.phase===o})))}),[])}},"./node_modules/@popperjs/core/lib/utils/rectToClientRect.js":(t,e,o)=>{"use strict";function n(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/uniqueBy.js":(t,e,o)=>{"use strict";function n(t,e){var o=new Set;return t.filter((function(t){var n=e(t);if(!o.has(n))return o.add(n),!0}))}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/userAgent.js":(t,e,o)=>{"use strict";function n(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@popperjs/core/lib/utils/validateModifiers.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@popperjs/core/lib/utils/format.js"),s=o("./node_modules/@popperjs/core/lib/enums.js"),r='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',i=["name","enabled","phase","fn","effect","requires","options"];function a(t){t.forEach((function(e){[].concat(Object.keys(e),i).filter((function(t,e,o){return o.indexOf(t)===e})).forEach((function(o){switch(o){case"name":"string"!=typeof e.name&&console.error((0,n.default)(r,String(e.name),'"name"','"string"','"'+String(e.name)+'"'));break;case"enabled":"boolean"!=typeof e.enabled&&console.error((0,n.default)(r,e.name,'"enabled"','"boolean"','"'+String(e.enabled)+'"'));break;case"phase":s.modifierPhases.indexOf(e.phase)<0&&console.error((0,n.default)(r,e.name,'"phase"',"either "+s.modifierPhases.join(", "),'"'+String(e.phase)+'"'));break;case"fn":"function"!=typeof e.fn&&console.error((0,n.default)(r,e.name,'"fn"','"function"','"'+String(e.fn)+'"'));break;case"effect":null!=e.effect&&"function"!=typeof e.effect&&console.error((0,n.default)(r,e.name,'"effect"','"function"','"'+String(e.fn)+'"'));break;case"requires":null==e.requires||Array.isArray(e.requires)||console.error((0,n.default)(r,e.name,'"requires"','"array"','"'+String(e.requires)+'"'));break;case"requiresIfExists":Array.isArray(e.requiresIfExists)||console.error((0,n.default)(r,e.name,'"requiresIfExists"','"array"','"'+String(e.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+e.name+'" modifier, valid properties are '+i.map((function(t){return'"'+t+'"'})).join(", ")+'; but "'+o+'" was provided.')}e.requires&&e.requires.forEach((function(o){null==t.find((function(t){return t.name===o}))&&console.error((0,n.default)('Popper: modifier "%s" requires "%s", but "%s" modifier is not available',String(e.name),o,o))}))}))}))}},"./node_modules/@popperjs/core/lib/utils/within.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{within:()=>s,withinMaxClamp:()=>r});var n=o("./node_modules/@popperjs/core/lib/utils/math.js");function s(t,e,o){return(0,n.max)(t,(0,n.min)(e,o))}function r(t,e,o){var n=s(t,e,o);return n>o?o:n}},"./node_modules/cross-fetch/dist/browser-ponyfill.js":function(t,e){var o="undefined"!=typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=o.DOMException}return t.prototype=o,new t}();!function(t){!function(e){var o="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function d(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function m(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}}))}function g(t){var e=new FileReader,o=f(e);return e.readAsArrayBuffer(t),o}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:s&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():i&&s&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=h(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=m(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,o,n=m(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,o=f(e=new FileReader),e.readAsText(t),o;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),o=new Array(e.length),n=0;n<e.length;n++)o[n]=String.fromCharCode(e[n]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=c(t),e=d(e);var o=this.map[t];this.map[t]=o?o+", "+e:e},p.prototype.delete=function(t){delete this.map[c(t)]},p.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},p.prototype.set=function(t,e){this.map[c(t)]=d(e)},p.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,o){t.push(o)})),u(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,o){t.push([o,e])})),u(t)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var o,n,s=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,s||null==t._bodyInit||(s=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(n=(o=e.method||this.method||"GET").toUpperCase(),y.indexOf(n)>-1?n:o),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function x(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var o=t.split("="),n=o.shift().replace(/\+/g," "),s=o.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(s))}})),e}function w(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},b.call(v.prototype),b.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var C=[301,302,303,307,308];w.redirect=function(t,e){if(-1===C.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var o=Error(t);this.stack=o.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(t,o){return new Promise((function(n,r){var i=new v(t,o);if(i.signal&&i.signal.aborted)return r(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var t,e,o={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var o=t.split(":"),n=o.shift().trim();if(n){var s=o.join(":").trim();e.append(n,s)}})),e)};o.url="responseURL"in a?a.responseURL:o.headers.get("X-Request-URL");var s="response"in a?a.response:a.responseText;n(new w(s,o))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.onabort=function(){r(new e.DOMException("Aborted","AbortError"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&s&&(a.responseType="blob"),i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),i.signal&&(i.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",l)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}k.polyfill=!0,t.fetch||(t.fetch=k,t.Headers=p,t.Request=v,t.Response=w),e.Headers=p,e.Request=v,e.Response=w,e.fetch=k,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;(e=s.fetch).default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e},"./node_modules/loc-i18next/dist/commonjs/main.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},n={selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0,document};e.default={init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=o({},n,e);var s=function(t,n){return e.parseDefaultValueFromContent?o({},t,{defaultValue:n}):t};function r(e,o,n){var r="text";if(0==o.indexOf("[")){var i=o.split("]");o=i[1],r=i[0].substr(1,i[0].length-1)}if(o=o.indexOf(";")==o.length-1?o.substr(0,o.length-2):o,"html"===r)e.innerHTML=t.t(o,s(n,e.innerHTML));else if("text"===r)e.textContent=t.t(o,s(n,e.textContent));else if("prepend"===r){var a=e.innerHTML.indexOf("<loc-i18n>"),l=e.innerHTML.indexOf("</loc-i18n>")+11;a>-1&&l>6&&(e.innerHTML=[e.innerHTML.substring(0,a),e.innerHTML.slice(l)].join("")),e.innerHTML=["<loc-i18n>",t.t(o,s(n,e.innerHTML)),"</loc-i18n>",e.innerHTML].join("")}else if("append"===r){var c=e.innerHTML.indexOf("<loc-i18n>"),d=e.innerHTML.indexOf("</loc-i18n>")+11;c>-1&&d>6&&(e.innerHTML=[e.innerHTML.substring(0,c),e.innerHTML.slice(d)].join("")),e.innerHTML=[e.innerHTML,"<loc-i18n>",t.t(o,s(n,e.innerHTML),"</loc-i18n>")].join("")}else if(0===r.indexOf("data-")){var u=r.substr("data-".length),p=t.t(o,s(n,e.getAttribute(u)));e.setAttribute(u,p),e.setAttribute(r,p)}else e.setAttribute(r,t.t(o,s(n,e.getAttribute(r))))}function i(t){return JSON.parse(t.replace(/:\s*"([^"]*)"/g,(function(t,e){return': "'+e.replace(/:/g,"@colon@")+'"'})).replace(/:\s*'([^']*)'/g,(function(t,e){return': "'+e.replace(/:/g,"@colon@")+'"'})).replace(/(['"])?([a-z0-9A-Z_]+)(['"])?\s*:/g,'"$2": ').replace(/@colon@/g,":"))}function a(t,n){var s=t.getAttribute(e.selectorAttr);if(s){var a=t,l=t.getAttribute(e.targetAttr);if(null!=l&&(a=t.querySelector(l)||t),n||!0!==e.useOptionsAttr||(n=i(t.getAttribute(e.optionsAttr)||"{}")),n=n||{},s.indexOf(";")>=0)for(var c=s.split(";"),d=0,u=c.length;d<u;d++)""!=c[d]&&r(a,c[d],n);else r(a,s,n);if(!0===e.useOptionsAttr){var p={};delete(p=o({clone:p},n)).lng,t.setAttribute(e.optionsAttr,JSON.stringify(p))}}}function l(t,o){for(var n=e.document.querySelectorAll(t),s=0;s<n.length;s++){for(var r=n[s],i=r.querySelectorAll("["+e.selectorAttr+"]"),l=i.length-1;l>-1;l--)a(i[l],o);a(r,o)}}return l}}},"./node_modules/loc-i18next/index.js":(t,e,o)=>{t.exports=o("./node_modules/loc-i18next/dist/commonjs/main.js").default},"./src/quick-edit/quickE.scss":(t,e,o)=>{"use strict";o.r(e)},"./src/styles/index.scss":(t,e,o)=>{"use strict";o.r(e)},"./src/quick-dialog/quick-dialog.css":(t,e,o)=>{"use strict";o.r(e)},"./node_modules/shake.js/shake.js":function(t,e,o){var n;!function(s,r){void 0===(n=function(){return function(t,e){"use strict";function o(o){if(this.hasDeviceMotion="ondevicemotion"in t,this.options={threshold:15,timeout:1e3},"object"==typeof o)for(var n in o)o.hasOwnProperty(n)&&(this.options[n]=o[n]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof e.CustomEvent)this.event=new e.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof e.createEvent)return!1;this.event=e.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return o.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},o.prototype.start=function(){this.reset(),this.hasDeviceMotion&&t.addEventListener("devicemotion",this,!1)},o.prototype.stop=function(){this.hasDeviceMotion&&t.removeEventListener("devicemotion",this,!1),this.reset()},o.prototype.devicemotion=function(e){var o,n,s,r=e.accelerationIncludingGravity;if(null===this.lastX&&null===this.lastY&&null===this.lastZ)return this.lastX=r.x,this.lastY=r.y,void(this.lastZ=r.z);o=Math.abs(this.lastX-r.x),n=Math.abs(this.lastY-r.y),s=Math.abs(this.lastZ-r.z),(o>this.options.threshold&&n>this.options.threshold||o>this.options.threshold&&s>this.options.threshold||n>this.options.threshold&&s>this.options.threshold)&&(new Date).getTime()-this.lastTime.getTime()>this.options.timeout&&(t.dispatchEvent(this.event),this.lastTime=new Date),this.lastX=r.x,this.lastY=r.y,this.lastZ=r.z},o.prototype.handleEvent=function(t){if("function"==typeof this[t.type])return this[t.type](t)},o}(s,s.document)}.call(e,o,e,t))||(t.exports=n)}("undefined"!=typeof window?window:this)},"./node_modules/tippy.js/dist/tippy.esm.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{animateFill:()=>ut,createSingleton:()=>lt,default:()=>vt,delegate:()=>dt,followCursor:()=>gt,hideAll:()=>it,inlinePositioning:()=>ht,roundArrow:()=>r,sticky:()=>bt});var n=o("./node_modules/@popperjs/core/lib/popper.js"),s=o("./node_modules/@popperjs/core/lib/modifiers/applyStyles.js"),r='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',i="tippy-content",a="tippy-backdrop",l="tippy-arrow",c="tippy-svg-arrow",d={passive:!0,capture:!0},u=function(){return document.body};function p(t,e,o){if(Array.isArray(t)){var n=t[e];return null==n?Array.isArray(o)?o[e]:o:n}return t}function m(t,e){var o={}.toString.call(t);return 0===o.indexOf("[object")&&o.indexOf(e+"]")>-1}function f(t,e){return"function"==typeof t?t.apply(void 0,e):t}function g(t,e){return 0===e?t:function(n){clearTimeout(o),o=setTimeout((function(){t(n)}),e)};var o}function h(t,e){var o=Object.assign({},t);return e.forEach((function(t){delete o[t]})),o}function b(t){return[].concat(t)}function y(t,e){-1===t.indexOf(e)&&t.push(e)}function v(t){return t.split("-")[0]}function x(t){return[].slice.call(t)}function w(t){return Object.keys(t).reduce((function(e,o){return void 0!==t[o]&&(e[o]=t[o]),e}),{})}function C(){return document.createElement("div")}function k(t){return["Element","Fragment"].some((function(e){return m(t,e)}))}function O(t){return m(t,"MouseEvent")}function T(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function S(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function j(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function A(t){var e,o=b(t)[0];return null!=o&&null!=(e=o.ownerDocument)&&e.body?o.ownerDocument:document}function L(t,e,o){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[n](e,o)}))}function E(t,e){for(var o=e;o;){var n;if(t.contains(o))return!0;o=null==o.getRootNode||null==(n=o.getRootNode())?void 0:n.host}return!1}var I={isTouch:!1},P=0;function _(){I.isTouch||(I.isTouch=!0,window.performance&&document.addEventListener("mousemove",M))}function M(){var t=performance.now();t-P<20&&(I.isTouch=!1,document.removeEventListener("mousemove",M)),P=t}function B(){var t=document.activeElement;if(T(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var D,R=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto);function N(t){return[t+"() was called on a"+("destroy"===t?"n already-":" ")+"destroyed instance. This is a no-op but","indicates a potential memory leak."].join(" ")}function $(t){return t.replace(/[ \t]{2,}/g," ").replace(/^[ \t]*/gm,"").trim()}function H(t){return $("\n  %ctippy.js\n\n  %c"+$(t)+"\n\n  %c👷‍ This is a development-only message. It will be removed in production.\n  ")}function q(t){return[H(t),"color: #00C584; font-size: 1.3em; font-weight: bold;","line-height: 1.5","color: #a6a095;"]}function F(t,e){var o;t&&!D.has(e)&&(D.add(e),(o=console).warn.apply(o,q(e)))}function U(t,e){var o;t&&!D.has(e)&&(D.add(e),(o=console).error.apply(o,q(e)))}D=new Set;var W={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},V=Object.assign({appendTo:u,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},W,{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Q=Object.keys(V);function J(t){var e=(t.plugins||[]).reduce((function(e,o){var n,s=o.name,r=o.defaultValue;return s&&(e[s]=void 0!==t[s]?t[s]:null!=(n=V[s])?n:r),e}),{});return Object.assign({},t,e)}function G(t,e){var o=Object.assign({},e,{content:f(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(J(Object.assign({},V,{plugins:e}))):Q).reduce((function(e,o){var n=(t.getAttribute("data-tippy-"+o)||"").trim();if(!n)return e;if("content"===o)e[o]=n;else try{e[o]=JSON.parse(n)}catch(t){e[o]=n}return e}),{})}(t,e.plugins));return o.aria=Object.assign({},V.aria,o.aria),o.aria={expanded:"auto"===o.aria.expanded?e.interactive:o.aria.expanded,content:"auto"===o.aria.content?e.interactive?null:"describedby":o.aria.content},o}function z(t,e){void 0===t&&(t={}),void 0===e&&(e=[]),Object.keys(t).forEach((function(t){var o,n,s=(o=h(V,Object.keys(W)),n=t,!{}.hasOwnProperty.call(o,n));s&&(s=0===e.filter((function(e){return e.name===t})).length),F(s,["`"+t+"`","is not a valid prop. You may have spelled it incorrectly, or if it's","a plugin, forgot to pass it in an array as props.plugins.","\n\n","All props: https://atomiks.github.io/tippyjs/v6/all-props/\n","Plugins: https://atomiks.github.io/tippyjs/v6/plugins/"].join(" "))}))}function K(t,e){t.innerHTML=e}function X(t){var e=C();return!0===t?e.className=l:(e.className=c,k(t)?e.appendChild(t):K(e,t)),e}function Y(t,e){k(e.content)?(K(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?K(t,e.content):t.textContent=e.content)}function Z(t){var e=t.firstElementChild,o=x(e.children);return{box:e,content:o.find((function(t){return t.classList.contains(i)})),arrow:o.find((function(t){return t.classList.contains(l)||t.classList.contains(c)})),backdrop:o.find((function(t){return t.classList.contains(a)}))}}function tt(t){var e=C(),o=C();o.className="tippy-box",o.setAttribute("data-state","hidden"),o.setAttribute("tabindex","-1");var n=C();function s(o,n){var s=Z(e),r=s.box,i=s.content,a=s.arrow;n.theme?r.setAttribute("data-theme",n.theme):r.removeAttribute("data-theme"),"string"==typeof n.animation?r.setAttribute("data-animation",n.animation):r.removeAttribute("data-animation"),n.inertia?r.setAttribute("data-inertia",""):r.removeAttribute("data-inertia"),r.style.maxWidth="number"==typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?r.setAttribute("role",n.role):r.removeAttribute("role"),o.content===n.content&&o.allowHTML===n.allowHTML||Y(i,t.props),n.arrow?a?o.arrow!==n.arrow&&(r.removeChild(a),r.appendChild(X(n.arrow))):r.appendChild(X(n.arrow)):a&&r.removeChild(a)}return n.className=i,n.setAttribute("data-state","hidden"),Y(n,t.props),e.appendChild(o),o.appendChild(n),s(t.props,t.props),{popper:e,onUpdate:s}}tt.$$tippy=!0;var et=1,ot=[],nt=[];function st(t,e){var o,s,r,i,a,l,c,m,h=G(t,Object.assign({},V,J(w(e)))),k=!1,T=!1,P=!1,_=!1,M=[],B=g(kt,h.interactiveDebounce),D=et++,$=(m=h.plugins).filter((function(t,e){return m.indexOf(t)===e})),H={id:D,reference:t,popper:C(),popperInstance:null,props:h,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:$,clearDelayTimeouts:function(){clearTimeout(o),clearTimeout(s),cancelAnimationFrame(r)},setProps:function(e){if(F(H.state.isDestroyed,N("setProps")),!H.state.isDestroyed){ct("onBeforeUpdate",[H,e]),wt();var o=H.props,n=G(t,Object.assign({},o,w(e),{ignoreAttributes:!0}));H.props=n,xt(),o.interactiveDebounce!==n.interactiveDebounce&&(pt(),B=g(kt,n.interactiveDebounce)),o.triggerTarget&&!n.triggerTarget?b(o.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):n.triggerTarget&&t.removeAttribute("aria-expanded"),ut(),lt(),Q&&Q(o,n),H.popperInstance&&(jt(),Lt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),ct("onAfterUpdate",[H,e])}},setContent:function(t){H.setProps({content:t})},show:function(){F(H.state.isDestroyed,N("show"));var t=H.state.isVisible,e=H.state.isDestroyed,o=!H.state.isEnabled,n=I.isTouch&&!H.props.touch,s=p(H.props.duration,0,V.duration);if(!(t||e||o||n||st().hasAttribute("disabled")||(ct("onShow",[H],!1),!1===H.props.onShow(H)))){if(H.state.isVisible=!0,tt()&&(W.style.visibility="visible"),lt(),ht(),H.state.isMounted||(W.style.transition="none"),tt()){var r=it();S([r.box,r.content],0)}var i,a,c;l=function(){var t;if(H.state.isVisible&&!_){if(_=!0,W.offsetHeight,W.style.transition=H.props.moveTransition,tt()&&H.props.animation){var e=it(),o=e.box,n=e.content;S([o,n],s),j([o,n],"visible")}dt(),ut(),y(nt,H),null==(t=H.popperInstance)||t.forceUpdate(),ct("onMount",[H]),H.props.animation&&tt()&&function(t,e){yt(t,(function(){H.state.isShown=!0,ct("onShown",[H])}))}(s)}},a=H.props.appendTo,c=st(),(i=H.props.interactive&&a===u||"parent"===a?c.parentNode:f(a,[c])).contains(W)||i.appendChild(W),H.state.isMounted=!0,jt(),F(H.props.interactive&&a===V.appendTo&&c.nextElementSibling!==W,["Interactive tippy element may not be accessible via keyboard","navigation because it is not directly after the reference element","in the DOM source order.","\n\n","Using a wrapper <div> or <span> tag around the reference element","solves this by creating a new parentNode context.","\n\n","Specifying `appendTo: document.body` silences this warning, but it","assumes you are using a focus management solution to handle","keyboard navigation.","\n\n","See: https://atomiks.github.io/tippyjs/v6/accessibility/#interactivity"].join(" "))}},hide:function(){F(H.state.isDestroyed,N("hide"));var t=!H.state.isVisible,e=H.state.isDestroyed,o=!H.state.isEnabled,n=p(H.props.duration,1,V.duration);if(!(t||e||o)&&(ct("onHide",[H],!1),!1!==H.props.onHide(H))){if(H.state.isVisible=!1,H.state.isShown=!1,_=!1,k=!1,tt()&&(W.style.visibility="hidden"),pt(),bt(),lt(!0),tt()){var s=it(),r=s.box,i=s.content;H.props.animation&&(S([r,i],n),j([r,i],"hidden"))}dt(),ut(),H.props.animation?tt()&&function(t,e){yt(t,(function(){!H.state.isVisible&&W.parentNode&&W.parentNode.contains(W)&&e()}))}(n,H.unmount):H.unmount()}},hideWithInteractivity:function(t){F(H.state.isDestroyed,N("hideWithInteractivity")),rt().addEventListener("mousemove",B),y(ot,B),B(t)},enable:function(){H.state.isEnabled=!0},disable:function(){H.hide(),H.state.isEnabled=!1},unmount:function(){F(H.state.isDestroyed,N("unmount")),H.state.isVisible&&H.hide(),H.state.isMounted&&(At(),Lt().forEach((function(t){t._tippy.unmount()})),W.parentNode&&W.parentNode.removeChild(W),nt=nt.filter((function(t){return t!==H})),H.state.isMounted=!1,ct("onHidden",[H]))},destroy:function(){F(H.state.isDestroyed,N("destroy")),H.state.isDestroyed||(H.clearDelayTimeouts(),H.unmount(),wt(),delete t._tippy,H.state.isDestroyed=!0,ct("onDestroy",[H]))}};if(!h.render)return U(!0,"render() function has not been supplied."),H;var q=h.render(H),W=q.popper,Q=q.onUpdate;W.setAttribute("data-tippy-root",""),W.id="tippy-"+H.id,H.popper=W,t._tippy=H,W._tippy=H;var z=$.map((function(t){return t.fn(H)})),K=t.hasAttribute("aria-expanded");return xt(),ut(),lt(),ct("onCreate",[H]),h.showOnCreate&&Et(),W.addEventListener("mouseenter",(function(){H.props.interactive&&H.state.isVisible&&H.clearDelayTimeouts()})),W.addEventListener("mouseleave",(function(){H.props.interactive&&H.props.trigger.indexOf("mouseenter")>=0&&rt().addEventListener("mousemove",B)})),H;function X(){var t=H.props.touch;return Array.isArray(t)?t:[t,0]}function Y(){return"hold"===X()[0]}function tt(){var t;return!(null==(t=H.props.render)||!t.$$tippy)}function st(){return c||t}function rt(){var t=st().parentNode;return t?A(t):document}function it(){return Z(W)}function at(t){return H.state.isMounted&&!H.state.isVisible||I.isTouch||i&&"focus"===i.type?0:p(H.props.delay,t?0:1,V.delay)}function lt(t){void 0===t&&(t=!1),W.style.pointerEvents=H.props.interactive&&!t?"":"none",W.style.zIndex=""+H.props.zIndex}function ct(t,e,o){var n;void 0===o&&(o=!0),z.forEach((function(o){o[t]&&o[t].apply(o,e)})),o&&(n=H.props)[t].apply(n,e)}function dt(){var e=H.props.aria;if(e.content){var o="aria-"+e.content,n=W.id;b(H.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(o);if(H.state.isVisible)t.setAttribute(o,e?e+" "+n:n);else{var s=e&&e.replace(n,"").trim();s?t.setAttribute(o,s):t.removeAttribute(o)}}))}}function ut(){!K&&H.props.aria.expanded&&b(H.props.triggerTarget||t).forEach((function(t){H.props.interactive?t.setAttribute("aria-expanded",H.state.isVisible&&t===st()?"true":"false"):t.removeAttribute("aria-expanded")}))}function pt(){rt().removeEventListener("mousemove",B),ot=ot.filter((function(t){return t!==B}))}function mt(e){if(!I.isTouch||!P&&"mousedown"!==e.type){var o=e.composedPath&&e.composedPath()[0]||e.target;if(!H.props.interactive||!E(W,o)){if(b(H.props.triggerTarget||t).some((function(t){return E(t,o)}))){if(I.isTouch)return;if(H.state.isVisible&&H.props.trigger.indexOf("click")>=0)return}else ct("onClickOutside",[H,e]);!0===H.props.hideOnClick&&(H.clearDelayTimeouts(),H.hide(),T=!0,setTimeout((function(){T=!1})),H.state.isMounted||bt())}}}function ft(){P=!0}function gt(){P=!1}function ht(){var t=rt();t.addEventListener("mousedown",mt,!0),t.addEventListener("touchend",mt,d),t.addEventListener("touchstart",gt,d),t.addEventListener("touchmove",ft,d)}function bt(){var t=rt();t.removeEventListener("mousedown",mt,!0),t.removeEventListener("touchend",mt,d),t.removeEventListener("touchstart",gt,d),t.removeEventListener("touchmove",ft,d)}function yt(t,e){var o=it().box;function n(t){t.target===o&&(L(o,"remove",n),e())}if(0===t)return e();L(o,"remove",a),L(o,"add",n),a=n}function vt(e,o,n){void 0===n&&(n=!1),b(H.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,o,n),M.push({node:t,eventType:e,handler:o,options:n})}))}function xt(){var t;Y()&&(vt("touchstart",Ct,{passive:!0}),vt("touchend",Ot,{passive:!0})),(t=H.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(vt(t,Ct),t){case"mouseenter":vt("mouseleave",Ot);break;case"focus":vt(R?"focusout":"blur",Tt);break;case"focusin":vt("focusout",Tt)}}))}function wt(){M.forEach((function(t){var e=t.node,o=t.eventType,n=t.handler,s=t.options;e.removeEventListener(o,n,s)})),M=[]}function Ct(t){var e,o=!1;if(H.state.isEnabled&&!St(t)&&!T){var n="focus"===(null==(e=i)?void 0:e.type);i=t,c=t.currentTarget,ut(),!H.state.isVisible&&O(t)&&ot.forEach((function(e){return e(t)})),"click"===t.type&&(H.props.trigger.indexOf("mouseenter")<0||k)&&!1!==H.props.hideOnClick&&H.state.isVisible?o=!0:Et(t),"click"===t.type&&(k=!o),o&&!n&&It(t)}}function kt(t){var e=t.target,o=st().contains(e)||W.contains(e);if("mousemove"!==t.type||!o){var n=Lt().concat(W).map((function(t){var e,o=null==(e=t._tippy.popperInstance)?void 0:e.state;return o?{popperRect:t.getBoundingClientRect(),popperState:o,props:h}:null})).filter(Boolean);(function(t,e){var o=e.clientX,n=e.clientY;return t.every((function(t){var e=t.popperRect,s=t.popperState,r=t.props.interactiveBorder,i=v(s.placement),a=s.modifiersData.offset;if(!a)return!0;var l="bottom"===i?a.top.y:0,c="top"===i?a.bottom.y:0,d="right"===i?a.left.x:0,u="left"===i?a.right.x:0,p=e.top-n+l>r,m=n-e.bottom-c>r,f=e.left-o+d>r,g=o-e.right-u>r;return p||m||f||g}))})(n,t)&&(pt(),It(t))}}function Ot(t){St(t)||H.props.trigger.indexOf("click")>=0&&k||(H.props.interactive?H.hideWithInteractivity(t):It(t))}function Tt(t){H.props.trigger.indexOf("focusin")<0&&t.target!==st()||H.props.interactive&&t.relatedTarget&&W.contains(t.relatedTarget)||It(t)}function St(t){return!!I.isTouch&&Y()!==t.type.indexOf("touch")>=0}function jt(){At();var e=H.props,o=e.popperOptions,s=e.placement,r=e.offset,i=e.getReferenceClientRect,a=e.moveTransition,c=tt()?Z(W).arrow:null,d=i?{getBoundingClientRect:i,contextElement:i.contextElement||st()}:t,u=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(tt()){var o=it().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?o.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?o.setAttribute("data-"+t,""):o.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];tt()&&c&&u.push({name:"arrow",options:{element:c,padding:3}}),u.push.apply(u,(null==o?void 0:o.modifiers)||[]),H.popperInstance=(0,n.createPopper)(d,W,Object.assign({},o,{placement:s,onFirstUpdate:l,modifiers:u}))}function At(){H.popperInstance&&(H.popperInstance.destroy(),H.popperInstance=null)}function Lt(){return x(W.querySelectorAll("[data-tippy-root]"))}function Et(t){H.clearDelayTimeouts(),t&&ct("onTrigger",[H,t]),ht();var e=at(!0),n=X(),s=n[0],r=n[1];I.isTouch&&"hold"===s&&r&&(e=r),e?o=setTimeout((function(){H.show()}),e):H.show()}function It(t){if(H.clearDelayTimeouts(),ct("onUntrigger",[H,t]),H.state.isVisible){if(!(H.props.trigger.indexOf("mouseenter")>=0&&H.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&k)){var e=at(!1);e?s=setTimeout((function(){H.state.isVisible&&H.hide()}),e):r=requestAnimationFrame((function(){H.hide()}))}}else bt()}}function rt(t,e){void 0===e&&(e={});var o=V.plugins.concat(e.plugins||[]);!function(t){var e=!t,o="[object Object]"===Object.prototype.toString.call(t)&&!t.addEventListener;U(e,["tippy() was passed","`"+String(t)+"`","as its targets (first) argument. Valid types are: String, Element,","Element[], or NodeList."].join(" ")),U(o,["tippy() was passed a plain object which is not supported as an argument","for virtual positioning. Use props.getReferenceClientRect instead."].join(" "))}(t),z(e,o),document.addEventListener("touchstart",_,d),window.addEventListener("blur",B);var n,s=Object.assign({},e,{plugins:o}),r=k(n=t)?[n]:function(t){return m(t,"NodeList")}(n)?x(n):Array.isArray(n)?n:x(document.querySelectorAll(n)),i=k(s.content),a=r.length>1;F(i&&a,["tippy() was passed an Element as the `content` prop, but more than","one tippy instance was created by this invocation. This means the","content element will only be appended to the last tippy instance.","\n\n","Instead, pass the .innerHTML of the element, or use a function that","returns a cloned version of the element instead.","\n\n","1) content: element.innerHTML\n","2) content: () => element.cloneNode(true)"].join(" "));var l=r.reduce((function(t,e){var o=e&&st(e,s);return o&&t.push(o),t}),[]);return k(t)?l[0]:l}rt.defaultProps=V,rt.setDefaultProps=function(t){z(t,[]),Object.keys(t).forEach((function(e){V[e]=t[e]}))},rt.currentInput=I;var it=function(t){var e=void 0===t?{}:t,o=e.exclude,n=e.duration;nt.forEach((function(t){var e=!1;if(o&&(e=T(o)?t.reference===o:t.popper===o.popper),!e){var s=t.props.duration;t.setProps({duration:n}),t.hide(),t.state.isDestroyed||t.setProps({duration:s})}}))},at=Object.assign({},s.default,{effect:function(t){var e=t.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow)}}),lt=function(t,e){var o;void 0===e&&(e={}),U(!Array.isArray(t),["The first argument passed to createSingleton() must be an array of","tippy instances. The passed value was",String(t)].join(" "));var n,s=t,r=[],i=[],a=e.overrides,l=[],c=!1;function d(){i=s.map((function(t){return b(t.props.triggerTarget||t.reference)})).reduce((function(t,e){return t.concat(e)}),[])}function u(){r=s.map((function(t){return t.reference}))}function p(t){s.forEach((function(e){t?e.enable():e.disable()}))}function m(t){return s.map((function(e){var o=e.setProps;return e.setProps=function(s){o(s),e.reference===n&&t.setProps(s)},function(){e.setProps=o}}))}function f(t,e){var o=i.indexOf(e);if(e!==n){n=e;var l=(a||[]).concat("content").reduce((function(t,e){return t[e]=s[o].props[e],t}),{});t.setProps(Object.assign({},l,{getReferenceClientRect:"function"==typeof l.getReferenceClientRect?l.getReferenceClientRect:function(){var t;return null==(t=r[o])?void 0:t.getBoundingClientRect()}}))}}p(!1),u(),d();var g={fn:function(){return{onDestroy:function(){p(!0)},onHidden:function(){n=null},onClickOutside:function(t){t.props.showOnCreate&&!c&&(c=!0,n=null)},onShow:function(t){t.props.showOnCreate&&!c&&(c=!0,f(t,r[0]))},onTrigger:function(t,e){f(t,e.currentTarget)}}}},y=rt(C(),Object.assign({},h(e,["overrides"]),{plugins:[g].concat(e.plugins||[]),triggerTarget:i,popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((null==(o=e.popperOptions)?void 0:o.modifiers)||[],[at])})})),v=y.show;y.show=function(t){if(v(),!n&&null==t)return f(y,r[0]);if(!n||null!=t){if("number"==typeof t)return r[t]&&f(y,r[t]);if(s.indexOf(t)>=0){var e=t.reference;return f(y,e)}return r.indexOf(t)>=0?f(y,t):void 0}},y.showNext=function(){var t=r[0];if(!n)return y.show(0);var e=r.indexOf(n);y.show(r[e+1]||t)},y.showPrevious=function(){var t=r[r.length-1];if(!n)return y.show(t);var e=r.indexOf(n),o=r[e-1]||t;y.show(o)};var x=y.setProps;return y.setProps=function(t){a=t.overrides||a,x(t)},y.setInstances=function(t){p(!0),l.forEach((function(t){return t()})),s=t,p(!1),u(),d(),l=m(y),y.setProps({triggerTarget:i})},l=m(y),y},ct={mouseover:"mouseenter",focusin:"focus",click:"click"};function dt(t,e){U(!(e&&e.target),["You must specity a `target` prop indicating a CSS selector string matching","the target elements that should receive a tippy."].join(" "));var o=[],n=[],s=!1,r=e.target,i=h(e,["target"]),a=Object.assign({},i,{trigger:"manual",touch:!1}),l=Object.assign({touch:V.touch},i,{showOnCreate:!0}),c=rt(t,a);function u(t){if(t.target&&!s){var o=t.target.closest(r);if(o){var i=o.getAttribute("data-tippy-trigger")||e.trigger||V.trigger;if(!o._tippy&&!("touchstart"===t.type&&"boolean"==typeof l.touch||"touchstart"!==t.type&&i.indexOf(ct[t.type])<0)){var a=rt(o,l);a&&(n=n.concat(a))}}}}function p(t,e,n,s){void 0===s&&(s=!1),t.addEventListener(e,n,s),o.push({node:t,eventType:e,handler:n,options:s})}return b(c).forEach((function(t){var e=t.destroy,r=t.enable,i=t.disable;t.destroy=function(t){void 0===t&&(t=!0),t&&n.forEach((function(t){t.destroy()})),n=[],o.forEach((function(t){var e=t.node,o=t.eventType,n=t.handler,s=t.options;e.removeEventListener(o,n,s)})),o=[],e()},t.enable=function(){r(),n.forEach((function(t){return t.enable()})),s=!1},t.disable=function(){i(),n.forEach((function(t){return t.disable()})),s=!0},function(t){var e=t.reference;p(e,"touchstart",u,d),p(e,"mouseover",u),p(e,"focusin",u),p(e,"click",u)}(t)})),c}var ut={name:"animateFill",defaultValue:!1,fn:function(t){var e;if(null==(e=t.props.render)||!e.$$tippy)return U(t.props.animateFill,"The `animateFill` plugin requires the default render function."),{};var o=Z(t.popper),n=o.box,s=o.content,r=t.props.animateFill?function(){var t=C();return t.className=a,j([t],"hidden"),t}():null;return{onCreate:function(){r&&(n.insertBefore(r,n.firstElementChild),n.setAttribute("data-animatefill",""),n.style.overflow="hidden",t.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(r){var t=n.style.transitionDuration,e=Number(t.replace("ms",""));s.style.transitionDelay=Math.round(e/10)+"ms",r.style.transitionDuration=t,j([r],"visible")}},onShow:function(){r&&(r.style.transitionDuration="0ms")},onHide:function(){r&&j([r],"hidden")}}}},pt={clientX:0,clientY:0},mt=[];function ft(t){var e=t.clientX,o=t.clientY;pt={clientX:e,clientY:o}}var gt={name:"followCursor",defaultValue:!1,fn:function(t){var e=t.reference,o=A(t.props.triggerTarget||e),n=!1,s=!1,r=!0,i=t.props;function a(){return"initial"===t.props.followCursor&&t.state.isVisible}function l(){o.addEventListener("mousemove",u)}function c(){o.removeEventListener("mousemove",u)}function d(){n=!0,t.setProps({getReferenceClientRect:null}),n=!1}function u(o){var n=!o.target||e.contains(o.target),s=t.props.followCursor,r=o.clientX,i=o.clientY,a=e.getBoundingClientRect(),l=r-a.left,c=i-a.top;!n&&t.props.interactive||t.setProps({getReferenceClientRect:function(){var t=e.getBoundingClientRect(),o=r,n=i;"initial"===s&&(o=t.left+l,n=t.top+c);var a="horizontal"===s?t.top:n,d="vertical"===s?t.right:o,u="horizontal"===s?t.bottom:n,p="vertical"===s?t.left:o;return{width:d-p,height:u-a,top:a,right:d,bottom:u,left:p}}})}function p(){t.props.followCursor&&(mt.push({instance:t,doc:o}),function(t){t.addEventListener("mousemove",ft)}(o))}function m(){0===(mt=mt.filter((function(e){return e.instance!==t}))).filter((function(t){return t.doc===o})).length&&function(t){t.removeEventListener("mousemove",ft)}(o)}return{onCreate:p,onDestroy:m,onBeforeUpdate:function(){i=t.props},onAfterUpdate:function(e,o){var r=o.followCursor;n||void 0!==r&&i.followCursor!==r&&(m(),r?(p(),!t.state.isMounted||s||a()||l()):(c(),d()))},onMount:function(){t.props.followCursor&&!s&&(r&&(u(pt),r=!1),a()||l())},onTrigger:function(t,e){O(e)&&(pt={clientX:e.clientX,clientY:e.clientY}),s="focus"===e.type},onHidden:function(){t.props.followCursor&&(d(),c(),r=!0)}}}},ht={name:"inlinePositioning",defaultValue:!1,fn:function(t){var e,o=t.reference,n=-1,s=!1,r=[],i={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(s){var i=s.state;t.props.inlinePositioning&&(-1!==r.indexOf(i.placement)&&(r=[]),e!==i.placement&&-1===r.indexOf(i.placement)&&(r.push(i.placement),t.setProps({getReferenceClientRect:function(){return function(t){return function(t,e,o,n){if(o.length<2||null===t)return e;if(2===o.length&&n>=0&&o[0].left>o[1].right)return o[n]||e;switch(t){case"top":case"bottom":var s=o[0],r=o[o.length-1],i="top"===t,a=s.top,l=r.bottom,c=i?s.left:r.left,d=i?s.right:r.right;return{top:a,bottom:l,left:c,right:d,width:d-c,height:l-a};case"left":case"right":var u=Math.min.apply(Math,o.map((function(t){return t.left}))),p=Math.max.apply(Math,o.map((function(t){return t.right}))),m=o.filter((function(e){return"left"===t?e.left===u:e.right===p})),f=m[0].top,g=m[m.length-1].bottom;return{top:f,bottom:g,left:u,right:p,width:p-u,height:g-f};default:return e}}(v(t),o.getBoundingClientRect(),x(o.getClientRects()),n)}(i.placement)}})),e=i.placement)}};function a(){var e;s||(e=function(t,e){var o;return{popperOptions:Object.assign({},t.popperOptions,{modifiers:[].concat(((null==(o=t.popperOptions)?void 0:o.modifiers)||[]).filter((function(t){return t.name!==e.name})),[e])})}}(t.props,i),s=!0,t.setProps(e),s=!1)}return{onCreate:a,onAfterUpdate:a,onTrigger:function(e,o){if(O(o)){var s=x(t.reference.getClientRects()),r=s.find((function(t){return t.left-2<=o.clientX&&t.right+2>=o.clientX&&t.top-2<=o.clientY&&t.bottom+2>=o.clientY})),i=s.indexOf(r);n=i>-1?i:n}},onHidden:function(){n=-1}}}},bt={name:"sticky",defaultValue:!1,fn:function(t){var e=t.reference,o=t.popper;function n(e){return!0===t.props.sticky||t.props.sticky===e}var s=null,r=null;function i(){var a=n("reference")?(t.popperInstance?t.popperInstance.state.elements.reference:e).getBoundingClientRect():null,l=n("popper")?o.getBoundingClientRect():null;(a&&yt(s,a)||l&&yt(r,l))&&t.popperInstance&&t.popperInstance.update(),s=a,r=l,t.state.isMounted&&requestAnimationFrame(i)}return{onMount:function(){t.props.sticky&&i()}}}};function yt(t,e){return!t||!e||t.top!==e.top||t.right!==e.right||t.bottom!==e.bottom||t.left!==e.left}rt.setDefaultProps({render:tt});const vt=rt},"../$2sxc/src/cms/command-names.ts":(t,e,o)=>{"use strict";o.r(e)},"../$2sxc/src/cms/command-params.ts":(t,e,o)=>{"use strict";o.r(e)},"../$2sxc/src/constants/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AntiForgeryTokenHeaderNameDnn:()=>l,ApiExtensionPlaceholder:()=>n,DnnUiRoot:()=>r,MetaHeaderJsApi:()=>s,PlatformDnn:()=>a,PlatformOqtane:()=>i});const n="e.x.t",s="_jsApi",r="/desktopmodules/tosic_sexycontent/",i="oqtane",a="dnn",l="RequestVerificationToken"},"../$2sxc/src/data/target-types.ts":(t,e,o)=>{"use strict";var n;o.r(e),o.d(e,{MetadataTargetTypes:()=>n}),function(t){t[t.Undefined=0]="Undefined",t[t.None=1]="None",t[t.Attribute=2]="Attribute",t[t.App=3]="App",t[t.Entity=4]="Entity",t[t.ContentType=5]="ContentType",t[t.Zone=6]="Zone",t[t.CmsItem=10]="CmsItem",t[t.System=11]="System",t[t.Site=12]="Site",t[t.SiteVariant=13]="SiteVariant",t[t.Page=14]="Page",t[t.PageVariant=15]="PageVariant",t[t.Module=16]="Module",t[t.ModuleVariant=17]="ModuleVariant",t[t.User=18]="User",t[t.Custom=90]="Custom",t[t.Custom1=91]="Custom1",t[t.Custom2=92]="Custom2",t[t.Custom3=93]="Custom3",t[t.Custom4=94]="Custom4",t[t.Custom5=95]="Custom5",t[t.Custom6=96]="Custom6",t[t.Custom7=97]="Custom7",t[t.Custom8=98]="Custom8",t[t.Custom9=99]="Custom9"}(n||(n={}))},"../$2sxc/src/dom/dom-tools.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{DomTools:()=>s});var n=o("../core/constants/index.ts");class s{static getContext(t,e){const o=e?s.getContainerTag(e):s.getTag(t);return s.getContextOfTag(o)}static getContextOfTag(t){const e=t?.getAttribute(n.C.Attributes.Context);return JSON.parse(e||"{ }")}static getContainerTag(t){return t.closest(n.C.Sel.SxcDivs)}static getTag(t){return document.querySelector(`div[${n.C.Attributes.ContentBlockId}='${t.cbid}']`)}}},"../$2sxc/src/environment/env-loader-dnn-sf.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{EnvironmentDnnSfLoader:()=>i});var n=o("../core/index.ts"),s=o("../$2sxc/src/constants/index.ts");const r="You must inject the jsApi parameters to prevent auto-detection.";class i extends n.HasLog{env;constructor(t){super("Env.DnnLdr",t.log),this.env=t}dnnSfFallback(){const t=this.log.call("dnnSfFallback");n.NoJQ.ready((()=>this.dnnSfLoadWhenDocumentReady())),t.done("started dom-ready watcher")}dnnSfLoadWhenDocumentReady(){const t=this.log.call("dnnSfLoadWhenDocumentReady");if(void 0===window.$)throw t.done("error"),`Can't load pageid, moduleid, etc. and $ is not available. \n ${r}`;const e=window.$.ServicesFramework;if(void 0===e)throw t.done("error"),`Can't load pageid, moduleid etc. and DNN SF is not available. \n ${r}`;const o=e(0);var n=o.getServiceRoot("2sxc"),i={page:o.getTabId(),root:"unknown",api:n,appApi:n,rvtHeader:s.AntiForgeryTokenHeaderNameDnn,rvt:o.getAntiForgeryValue(),uiRoot:s.DnnUiRoot,platform:s.PlatformDnn};this.env.load(i,"dnn SF"),t.done()}}},"../$2sxc/src/environment/env-loader-dynamic.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{EnvironmentLoaderDynamic:()=>r});var n=o("../core/index.ts");const s="input[name=__RequestVerificationToken]";class r{mainLoader;log;constructor(t){this.mainLoader=t,this.log=new n.Log("ldr.dynmic",t.log)}startMetaTagObserver(t){this.observer||(this.observer=new MutationObserver((e=>{for(const o of e)"attributes"===o.type&&o.attributeName===t&&this.mainLoader.updateEnv(JSON.parse(this.mainLoader.getMetaContent()))})),this.log.add("start observing meta tag"),this.observer.observe(this.mainLoader.getJsApiMetaTag(),{attributes:!0,childList:!1,subtree:!1}))}observer;startInputRvtObserver(){if(this.inputRvtObserver)return;this.inputRvtObserver=new MutationObserver((t=>{for(const e of t)"attributes"===e.type&&"value"===e.attributeName&&this.loadRvtFromHiddenInput(e.target)})),this.log.add("start observing Rvt Input");const t=document.querySelector(s);null!=t?(this.loadRvtFromHiddenInput(t),this.inputRvtObserver.observe(t,{attributes:!0,childList:!1,subtree:!1})):console.log(`Can't find Oqtane RVT field with selector ${s}\nSo we cannot watch it for changes.\nThis will probably cause the $2sxc to fail.`)}inputRvtObserver;loadRvtFromHiddenInput(t){this.log.add("Input Rvt updated"),t&&t.value&&this.mainLoader.env.updateRvt(t.value)}}},"../$2sxc/src/environment/env-loader-meta.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{EnvironmentMetaLoader:()=>l});var n=o("../$2sxc/src/environment/env-loader-dnn-sf.ts"),s=o("../$2sxc/src/constants/index.ts"),r=o("../core/index.ts"),i=o("../$2sxc/src/environment/env-loader-dynamic.ts");const a="content";class l extends r.HasLog{env;retries=0;dynamicPageHelper;constructor(t){super("Env.MetaLd",t.log),this.env=t,this.dynamicPageHelper=new i.EnvironmentLoaderDynamic(this)}loadMetaFromHeader(t=!1){const e=this.log.call("loadMetaFromHeader",`${t}`);if(this.env.ready)return e.done("loadMeta - ready");this.log.add("loadMetaFromHeader: start, retry:"+this.retries+", force fallback: "+t);const o=this.getMetaContent();if(!o)return this.retries++,t||this.retries>=100?(new n.EnvironmentDnnSfLoader(this.env).dnnSfFallback(),e.done()):(setTimeout((()=>{this.loadMetaFromHeader()}),10),e.done("will retry"));this.updateEnv(JSON.parse(o)),this.dynamicPageHelper.startMetaTagObserver(a),e.done()}updateEnv(t){this.log.add("meta env info updated"),this.env.load(t,"meta header"),t.platform===s.PlatformOqtane&&this.dynamicPageHelper.startInputRvtObserver()}getMetaContent(){const t=this.getJsApiMetaTag();return t?t.getAttribute(a):null}getJsApiMetaTag(){return document.querySelector(`meta[name=${s.MetaHeaderJsApi}]`)}startMetaTagObserver(){this.observer||(this.observer=new MutationObserver((t=>{for(const e of t)"attributes"===e.type&&e.attributeName===a&&this.updateEnv(JSON.parse(this.getMetaContent()))})),this.log.add("start observing meta tag"),this.observer.observe(this.getJsApiMetaTag(),{attributes:!0,childList:!1,subtree:!1}))}observer}},"../$2sxc/src/environment/sxc-global-environment.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcGlobalEnvironment:()=>i});var n=o("../$2sxc/src/environment/env-loader-meta.ts"),s=o("../core/index.ts"),r=o("../$2sxc/src/constants/index.ts");class i extends s.HasLog{header;ready=!1;source="";metaLoader;constructor(){super("Environment",null,"starting"),this.log.keepData=!0,s.Insights.add("system","environment",this.log),this.metaLoader=new n.EnvironmentMetaLoader(this),"undefined"!=typeof _jsApi?(this.log.add("found _jsApi, will use"),this.load(_jsApi,"global variable _jsApi")):(this.log.add("will start initializing"),this.metaLoader.loadMetaFromHeader())}load(t,e){const o=this.log.call("load");if(t.root&&!t.api){o.add("root provided, api missing, will auto-complete");const e=t.root.endsWith("/")?"":"/";t.api=`${t.root}${e}${s.SxcApiUrlRoot}`}this.header=t,this.replacedRvt&&(this.header.rvt=this.replacedRvt),this.ready=!0,this.source=e||"external/unknown"+(this.replacedRvt?"+rvt":""),o.return(t,"loaded from "+this.source)}replacedRvt;updateRvt(t){t&&(this.replacedRvt=t,this.header.rvt=t)}api(){return this.ensureReadyOrThrow("api"),this.header.api}appApi(){return this.ensureReadyOrThrow("appApi"),this.header.appApi}page(){return this.ensureReadyOrThrow("page"),this.header.page}rvtHeader(){return this.ensureReadyOrThrow("rvtHeader"),this.header.rvtHeader||r.AntiForgeryTokenHeaderNameDnn}rvt(){return this.ensureReadyOrThrow("rvt"),this.header.rvt}uiRoot(){return this.ensureReadyOrThrow("uiRoot"),this.header.uiRoot||r.DnnUiRoot}platform(){return this.ensureReadyOrThrow("platform"),this.header.platform||r.PlatformDnn}dialogQuery(){return this.header.dialogQuery??null}publicKey(){return this.header.publicKey??null}ensureReadyOrThrow(t){if(!this.ready&&(this.log.add("ensureReady - force last attempt to load MetaHeader for "+t),this.metaLoader.loadMetaFromHeader(!0),!this.ready))throw`Can't find ${t} - something went wrong, pls contact 2sxc.org`}}},"../$2sxc/src/sxc-global/context-identifier.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextIdentifier:()=>n});class n{zoneId;appId;pageId;moduleId;_noContextInHttpHeaders;_autoAppIdsInUrl;complete;blockId;static is(t){const e=t;return void 0!==e.zoneId&&void 0!==e.appId}static ensureCompleteOrThrow(t){if(t.zoneId&&t.appId)return t;const e="It looks like the id given is a ContextIdentifier, but it's missing either zoneId or appId.";throw console.error(e,t),e}static toCacheKey(t){return this.ensureCompleteOrThrow(t),`${t.zoneId}/${t.appId}/${t.pageId}/${t.moduleId}/${t.blockId}`}}},"../$2sxc/src/sxc-global/sxc-global-http.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcGlobalHttp:()=>r});var n=o("../$2sxc/src/constants/index.ts"),s=o("../core/index.ts");class r extends s.HasLog{env;constructor(t){super("Sxc.Http"),this.env=t}headers(t,e,o){const n=this.log.call("headers",`${t}, ${e}`),r={},i=(o?.pageId??this.env.page()).toString();return t=o?.moduleId??t,e=o?.blockId??e,o?._noContextInHttpHeaders||(t&&(r[s.HeaderNames.ModuleId]=t.toString()),e&&(r[s.HeaderNames.ContentBlockId]=e.toString()),r[s.HeaderNames.TabId]=i,r[s.HeaderNames.PageId]=i),r[this.env.rvtHeader()]=this.env.rvt(),n.return(r,`headers(id:${t}, cbid:${e})`)}apiRoot(t){const e=this.log.call("apiRoot");var o=this.env.api().replace(n.ApiExtensionPlaceholder,t);return e.return(o,`apiRoot('${t}')`)}appApiRoot(){const t=this.log.call("appApiRoot");var e=this.env.appApi()??this.apiRoot(s.ToSxcName);return t.return(e,"appApiRoot()")}apiUrl(t,e){const o=this.log.call("apiUrl");if(this.log.add(`apiUrl(url:'${t}', endpointName:'${e}')`),null==t)return t;if(!t||0==t.indexOf("http:")||0==t.indexOf("https:")||0==t.indexOf("//"))return o.return(t);if(!e&&(0==t.indexOf("/")||0==t.indexOf(".")))return o.return(t);var n=t.toLocaleLowerCase().startsWith(s.AppApiMarker)?this.appApiRoot():this.apiRoot(e||s.ToSxcName);return"/"!=n[n.length-1]&&(n+="/"),"/"==t[0]&&(t=t.slice(1)),o.return(n+t)}}},"../$2sxc/src/sxc/data/sxc-data-service-base.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcDataServiceBase:()=>s});var n=o("../$2sxc/src/sxc/sxc-part.ts");class s extends n.SxcPart{name;webApi;constructor(t,e,o){if(super(t,"data"),this.name=e,this.webApi=t.webApi,o+=" name ",null==e)throw o+"is empty";if(-1!=e.indexOf("/")||-1!=e.indexOf("\\"))throw o+"has slashes - not allowed";if(-1!=e.indexOf("?"))throw o+'has "?" - not allowed'}}},"../$2sxc/src/sxc/data/sxc-data.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcData:()=>r});var n=o("../$2sxc/src/data/target-types.ts"),s=o("../$2sxc/src/sxc/data/sxc-data-service-base.ts");class r extends s.SxcDataServiceBase{name;constructor(t,e){super(t,e,"ContentType"),this.name=e}getAll(){return this.getInternal()}getOne(t){return this.getInternal(t)}getMany(t,e){throw"not implemented - probably v13.5 or something"}getInternal(t,e){let o=`app/auto/data/${this.name}`;return!t||"string"!=typeof t&&"number"!=typeof t||(o+="/"+t),this.webApi.fetchJson(this.webApi.url(o,e))}create(t,e){const o=`app/auto/data/${this.name}`;if(null!=e){"string"==typeof e&&(e={Target:n.MetadataTargetTypes.Entity,Guid:e});try{t.For=e}catch{}}return this.webApi.fetchJson(this.webApi.url(o),t,"POST")}update(t,e){const o=`app/auto/data/${this.name}/${t}`;return this.webApi.fetchJson(this.webApi.url(o),e,"POST")}delete(t){const e=`app/auto/data/${this.name}/${t}`;return this.webApi.fetchRaw(this.webApi.url(e),void 0,"DELETE").then((t=>null))}}},"../$2sxc/src/sxc/data/sxc-query.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcQuery:()=>s});var n=o("../$2sxc/src/sxc/data/sxc-data-service-base.ts");class s extends n.SxcDataServiceBase{name;constructor(t,e){super(t,e,"Query"),this.name=e}getAll(t,e){return this.getInternal(void 0,t,e)}getStream(t,e,o){if(-1!==t.indexOf(","))throw"parameter 'stream' can only contain one stream name for 'getStream'";return this.getInternal(t,e,o).then((e=>null!=e&&e.hasOwnProperty(t)?e[t]:[]))}getStreams(t,e,o){return this.getInternal(t,e,o)}getInternal(t,e,o){let n="app/auto/query/"+this.name;return t&&"string"==typeof t&&(n+="?stream="+t),this.webApi.fetchJson(this.webApi.url(n,e),o)}}},"../$2sxc/src/sxc/sxc-cms.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcCms:()=>s});var n=o("../$2sxc/src/sxc/sxc-part.ts");class s extends n.SxcPart{constructor(t){super(t,"cms")}run(t){throw'cms.run() requires editing to be on, or page-feature "2sxc.JsCms" to be enabled to work'}}},"../$2sxc/src/sxc/sxc-part.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcPart:()=>n});class n{sxc;partName;constructor(t,e){this.sxc=t,this.partName=e}}},"../$2sxc/src/sxc/sxc.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Sxc:()=>u});var n=o("../$2sxc/src/environment/sxc-global-environment.ts"),s=o("../$2sxc/src/sxc/web-api/sxc-web-api.ts"),r=o("../core/index.ts"),i=o("../$2sxc/src/sxc/data/sxc-data.ts"),a=o("../$2sxc/src/sxc/data/sxc-query.ts"),l=o("../$2sxc/src/sxc/sxc-cms.ts"),c=o("../$2sxc/src/sxc-global/sxc-global-http.ts"),d=o("../$2sxc/src/dom/dom-tools.ts");class u extends r.HasLog{id;cbid;cacheKey;root;ctx;_isSxcInstance=!0;webApi;manage=null;cms=new l.SxcCms(this);constructor(t,e,o,n,r){super("SxcInstance",null,"Generating for "+t+":"+e),this.id=t,this.cbid=e,this.cacheKey=o,this.root=n,this.ctx=r;try{n._manage&&n._manage.initInstance(this)}catch(t){console.error("error in 2sxc - will only log but not throw",t)}const i=this.loadEnv(n);var a;this.env=i.env,this.http=i.http,this.webApi=new s.SxcWebApi(this),(a=this.data).on||(a.on=()=>{throw p},Object.defineProperty(a,"sourceUrl",{get:function(){throw p}})),n._translateInit&&this.manage?.context?.app?.currentLanguage&&n._translateInit(this.manage)}loadEnv(t){let e=this.manage?.editContext?.jsApi??d.DomTools.getContext(this)?.jsApi;if(!e)return{env:t.env,http:t.http};const o=t.env.headers,s=e?{...o,...e}:o,r=new n.SxcGlobalEnvironment;return r.load(s,"sxc-instance"),{env:r,http:new c.SxcGlobalHttp(r)}}env;http;static is(t){return t._isSxcInstance}data(t){return new i.SxcData(this,t)}query(t){return new a.SxcQuery(this,t)}resolveServiceUrl(t){const e=t.split("/")[0].toLowerCase();return-1===r.ApiUrlRoots.indexOf(e)?t:this.http.apiRoot(r.ToSxcName)+e+"/"+t.substring(t.indexOf("/")+1)}showDetailedHttpError(t){if(window.console&&console.log(t),404===t.status&&t.config&&t.config.url&&t.config.url.indexOf("/dist/i18n/")>-1)return window.console&&console.log("just fyi: failed to load language resource; will have to use default"),t;if(0===t.status||-1===t.status)return t;let e="Had an error talking to the server (status "+t.status+").";const o=t.responseText?JSON.parse(t.responseText):t.data;if(o){const t=o.Message;t&&(e+="\nMessage: "+t);const n=o.MessageDetail||o.ExceptionMessage;n&&(e+="\nDetail: "+n),n&&0===n.indexOf("No action was found")&&(n.indexOf("that matches the name")>0?e+="\n\nTip from 2sxc: you probably got the action-name wrong in your JS.":n.indexOf("that matches the request.")>0&&(e+="\n\nTip from 2sxc: Seems like the parameters are the wrong amount or type.")),t&&0===t.indexOf("Controller")&&t.indexOf("not found")>0&&(e+="\n\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.")}return e+="\n\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug",alert(e),t}isEditMode(){return!0===this.manage?._isEditMode()}recreate(t){return t&&delete this.root._controllers[this.cacheKey],this.root(this.id,this.cbid)}}const p='Warning Obsolete Feature on 2sxc JS: the .data has been obsolete for a long time and is repurposed. \nIf you are calling ".data.on(...)" or ".data.sourceUrl" you are running very old code. \nGuidance to fix this: https://go.2sxc.org/brc-13-id.'},"../$2sxc/src/sxc/web-api/ajax-promise.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AjaxPromise:()=>s});var n=o("../core/index.ts");class s{api;sxc;constructor(t,e){this.api=t,this.sxc=e}makePromise(t){var e=this.api.headers();if(null==window.$)throw new Error("JQuery is now removed from 2sxc installation. Please use newer api like fetch or include JQuery in your project");const o=window.$.ajax({async:!0,dataType:t.dataType||"json",data:JSON.stringify(t.data),contentType:"application/json",type:t.method,url:this.getActionUrl(t),beforeSend(t){for(var o in e)e.hasOwnProperty(o)&&t.setRequestHeader(o,e[o])}});return t.preventAutoFail||o.fail(this.sxc.showDetailedHttpError),o}getActionUrl(t){var e=t.url||"app/auto/api/"+t.controller+"/"+t.action;return this.sxc.http.apiUrl(e,t.endpoint)+(t.params?"?"+n.NoJQ.param(t.params):"")}}},"../$2sxc/src/sxc/web-api/encrypted-data.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{EncryptedData:()=>n});class n{version;data;key;iv;constructor(t,e,o){this.version=1,this.data=t,this.key=e,this.iv=o}}},"../$2sxc/src/sxc/web-api/secure-endpoint.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SecureEndpoint:()=>s});var n=o("../$2sxc/src/sxc/web-api/encrypted-data.ts");class s{sxc;encryptBody;encryptShowErrorToUser;throwIfFails;constructor(t,e){this.sxc=t,this.encryptBody=e.encryptBody??e.encrypt??"auto",this.throwIfFails=1==e.encryptBody||"force"==e.encryptBody,this.encryptShowErrorToUser=e.encryptShowErrorToUser??!1}async encryptData(t){if(!1===this.encryptBody)return t;const e=this.sxc.env.publicKey();if(!e)return this.handleOrThrowError("Encryption is not available. Public key is missing."),t;if(!window.crypto.subtle)return this.handleOrThrowError("Encryption is not available because 'window.crypto.subtle' is unavailable. Check if page is on HTTPS."),t;const o=await this.importPublicKey(e),s=await window.crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"]),r=await window.crypto.subtle.exportKey("raw",s),i=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},o,r),a=window.crypto.getRandomValues(new Uint8Array(16)),l=new TextEncoder,c=JSON.stringify(t??""),d=l.encode(c),u=await window.crypto.subtle.encrypt({name:"AES-CBC",iv:a},s,d),p=this.arrayBufferToBase64(i),m=this.arrayBufferToBase64(u),f=this.arrayBufferToBase64(a.buffer);return new n.EncryptedData(m,p,f)}handleOrThrowError(t){if(this.encryptShowErrorToUser&&alert(t),this.throwIfFails)throw new Error(t);console.warn(t+"\nReturning unencrypted data.")}getSpkiDer(t){const e=window.atob(t);return this.str2ab(e)}async importPublicKey(t){return await window.crypto.subtle.importKey("spki",this.getSpkiDer(t),{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])}str2ab(t){const e=new ArrayBuffer(t.length),o=new Uint8Array(e);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return e}arrayBufferToBase64(t){const e=new Uint8Array(t);let o="";for(let t=0;t<e.byteLength;t++)o+=String.fromCharCode(e[t]);return window.btoa(o)}}},"../$2sxc/src/sxc/web-api/sxc-web-api.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcWebApi:()=>i});var n=o("../$2sxc/src/sxc/web-api/ajax-promise.ts"),s=o("../core/index.ts"),r=o("../$2sxc/src/sxc/web-api/secure-endpoint.ts");class i{sxc;constructor(t){this.sxc=t}get(t,e,o,n){return this.request(t,e,o,n,"GET")}post(t,e,o,n){return this.request(t,e,o,n,"POST")}delete(t,e,o,n){return this.request(t,e,o,n,"DELETE")}put(t,e,o,n){return this.request(t,e,o,n,"PUT")}request(t,e,o,s,r){if("object"!=typeof e&&void 0!==e&&(e={id:e}),"string"==typeof t){const n=t.split("/"),r=n[0],i=n[1];""!==r&&""!==i||console.warn("Error: controller or action not defined. Will continue with likely errors."),t={controller:r,action:i,params:e,data:o,url:n.length>2?t:null,preventAutoFail:s}}const i={method:null===r?"POST":r,params:null,preventAutoFail:!1};var a=new n.AjaxPromise(this,this.sxc);return t=Object.assign({},i,t),a.makePromise(t)}async fetchRaw(t,e,o){const n={},s=this.sxc.ctx,i=t.toLocaleLowerCase();s?._autoAppIdsInUrl&&i.includes("app/auto/")&&(s.appId&&!i.includes("appid=")&&(n.appId=s.appId),s.zoneId&&!i.includes("zoneid=")&&(n.zoneId=s.zoneId)),t=this.url(t,n);const a=this.prepareOptions(o,e),l=this.headers(a.method);if("POST"==a.method&&(e=await new r.SecureEndpoint(this.sxc,a).encryptData(e)),e)try{JSON.parse(e)}catch{e=JSON.stringify(e)}return fetch(t,{headers:l,method:a.method,...e&&{body:e}})}prepareOptions(t,e){const o={method:e?"POST":"GET",encrypt:"auto",encryptBody:"auto"};return"string"==typeof t?{...o,method:t}:"object"==typeof t?{...t,method:t.method||o.method,encrypt:t.encrypt??o.encrypt,encryptBody:t.encryptBody??t.encrypt??o.encryptBody}:o}async fetch(t,e,o){return console.warn("You are calling 'fetch' on the sxc.webApi. This is deprecated will stop in 2sxc v15, please use fetchRaw(...) or fetchJson(...) instead."),this.fetchJson(t,e,o)}async fetchJson(t,e,o){return this.fetchRaw(t,e,o).then((t=>t.json()))}headers(t){const e=this.sxc.http.headers(this.sxc.id,this.sxc.cbid,this.sxc.ctx);return t?("GET"===t.toLocaleUpperCase()?e.Accept="application/json":(e.Accept="application/json",e["Content-Type"]="application/json"),e):e}url(t,e){if(null==t)return t;const o=t.split("#")[0].split("?"),n=(t=o[0]).split("/");return 2===n.length&&n[0]&&n[1]&&(t=`app/auto/api/${n[0]}/${n[1]}`),[t=this.sxc.http.apiUrl(t),e=`${o[1]||""}&${e?"string"==typeof e?e:s.NoJQ.param(e):""}`.split("&").filter((t=>!!t)).join("&")].filter((t=>!!t)).join("?")}}},"../connect-parts/inpage-quick-dialog/idialog-frame-element.ts":(t,e,o)=>{"use strict";o.r(e)},"../connect-parts/inpage-quick-dialog/iiframe-bridge.ts":(t,e,o)=>{"use strict";o.r(e)},"../connect-parts/inpage-quick-dialog/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{urlParams:()=>n.urlParams}),o("../connect-parts/inpage-quick-dialog/iiframe-bridge.ts");var n=o("../connect-parts/inpage-quick-dialog/quick-dialog-params.ts");o("../connect-parts/inpage-quick-dialog/idialog-frame-element.ts"),o("../connect-parts/inpage-quick-dialog/iquick-dialog-config.ts")},"../connect-parts/inpage-quick-dialog/iquick-dialog-config.ts":(t,e,o)=>{"use strict";o.r(e)},"../connect-parts/inpage-quick-dialog/quick-dialog-params.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{urlParams:()=>n});const n={pageId:"tid",requestVerificationTokenHeader:"rvth",requestVerificationToken:"rvt",api:"api",appId:"appId",apps:"apps",moduleId:"mid",contentBlockId:"cbid"}},"../core/constants/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ApiUrlRoots:()=>a,AppApiMap:()=>c,AppApiMarker:()=>l,Attributes:()=>u,C:()=>p,HeaderNames:()=>i,NumberNotDefinedHuge:()=>d,SxcApiUrlRoot:()=>r,SxcVersion:()=>s,ToSxcName:()=>n});const n="2sxc",s="18.06.01",r="desktopmodules/2sxc/api/",i={ContentBlockId:"ContentBlockId",ModuleId:"ModuleId",TabId:"TabId",PageId:"PageId"},a=["app","app-sys","app-api","app-query","app-content","eav","view","dnn"],l="app",c={"app-api":"app/[name]/api","app-query":"app/[name]/query","app-content":"app/[name]/content"},d=2742e8,u={InstanceId:"data-cb-instance",Context:"data-edit-context",ContentBlockId:"data-cb-id"},p={Attributes:u,Sel:{SxcDivs:`div[${u.Context}]`}}},"../core/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ApiUrlRoots:()=>n.ApiUrlRoots,AppApiMap:()=>n.AppApiMap,AppApiMarker:()=>n.AppApiMarker,Attributes:()=>n.Attributes,C:()=>n.C,HasLog:()=>s.HasLog,HeaderNames:()=>n.HeaderNames,Insights:()=>s.Insights,Log:()=>s.Log,LogCall:()=>s.LogCall,LogEntry:()=>s.LogEntry,LogEntryOptions:()=>s.LogEntryOptions,NoJQ:()=>r.NoJQ,NumberNotDefinedHuge:()=>n.NumberNotDefinedHuge,Obj:()=>r.Obj,SxcApiUrlRoot:()=>n.SxcApiUrlRoot,SxcVersion:()=>n.SxcVersion,ToSxcName:()=>n.ToSxcName,flattenSlashes:()=>r.flattenSlashes});var n=o("../core/constants/index.ts"),s=o("../core/logging/index.ts"),r=o("../core/plumbing/index.ts")},"../core/logging/Log.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Log:()=>i});var n=o("../core/logging/index.ts"),s=o("./src/constants/debug.ts");const r=-1!==location.search.indexOf("debug=true");class i{entries=new Array;depth=0;callDepths=[];startTime;maxEntries=1e3;constructor(t,e,o){if(this.rename(t),this.linkLog(e),s.Debug.isDevBuild){const e=s.Debug.parts[t];null!=e&&(this.liveDump=e,this.keepData=e)}this.startTime=(new Date).getTime(),null!=o&&this.add(o)}liveDump=!1;_parentHasLiveDump=!1;keepData=r;_parentHasKeepData=!1;fullIdentifier=()=>`${this.parent?this.parent.fullIdentifier():""}${this.identifier()}`;rename(t){try{const e=t.indexOf(".");this.scope=e>0?t.substr(0,Math.min(e,3))+".":"";const o=e>0?t.substr(e+1):t;this.name=o.substr(0,Math.min(o.length,6)),this.name=this.name.substr(0,Math.min(this.name.length,6))}catch(t){}}linkLog=t=>{this.parent=t||this.parent,this.parent&&(this._parentHasLiveDump=this.parent.liveDump||this.parent._parentHasLiveDump,this._parentHasKeepData=this.parent.keepData||this.parent._parentHasKeepData)};add(t,e){if(this.entries.length>this.maxEntries)return this._prepareMessage(t);this.entries.length===this.maxEntries&&this._addEntry(this._prepareEntry("Maximum amount of entries added to log, will stop adding more"));const o=this._prepareEntry(t,e);return this._addEntry(o),o.message}addData(t,e){this.logData()&&this.add(t,e)}logData(){return this.keepData||this._parentHasKeepData}_prepareEntry(t,e){const o=this._prepareMessage(t),s=(new Date).getTime()-this.startTime;return new n.LogEntry(this,o,this.depth,s,e)}_prepareMessage(t){if(t instanceof Function)try{return t()}catch(t){return"err: message undefined"}return t.toString()}call(t,e,o,s){return new n.LogCall(this,t,e,o,s)}_callDepthAdd(t){this.depth++,this.callDepths.push(t)}_callDepthRemove(t){this.depth--;const e=this.callDepths.pop();e!==t&&console.warn(`log: call depth reduced by '${t}' but last was '${e}'`)}dump(t=null,e=" - "){t?this.dumpOne(0,t,e):this.dumpList()}dumpList(t=0,e){let o=t;this.entries.slice(t,e?t+e:void 0).forEach((t=>this.dumpOne(o++,t)))}dumpOne(t,e,o=" - "){const n=e.result?" ="+e.result:"",s=("0000"+t).slice(-4)+" "+e.source()+o+"..".repeat(e.depth)+e.message+n;e.data?console.log(s,e.data):console.log(s)}_addEntry(t){this.liveDump&&this.dump(t),this.entries.push(t),this.parent&&this.parent._addEntry(t)}randomString(t){const e="0123456789abcdefghiklmnopqrstuvwxyz";let o="";for(let n=0;n<t;n++){const t=Math.floor(Math.random()*e.length);o+=e.substring(t,t+1)}return o}parent;scope="tdo";name="unknwn";id=()=>this.idCache||(this.idCache=this.randomString(2));idCache;identifier=()=>`${this.scope}${this.name}(${this.id()})`}},"../core/logging/entry.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{LogEntry:()=>s});var n=o("../core/plumbing/index.ts");class s{log;message;depth;time;result;get data(){return this._data}set data(t){void 0!==t&&this.log.logData()&&(this._data=n.Obj.DeepClone(t,!0))}_data;source=()=>this.log.fullIdentifier();constructor(t,e,o,n,s){this.log=t,this.message=e,this.depth=o,this.time=n,s&&(this.data=s)}}},"../core/logging/has-log.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{HasLog:()=>s});var n=o("../core/logging/index.ts");class s{log;constructor(t,e,o){this.initLogInternal(t,e,o)}initLog=(t,e,o)=>this.initLogInternal(t,e,o);initLogInternal(t,e,o){null!=this.log?(this.log.rename(t),this.log.linkLog(e),null!=o&&this.log.add(o)):this.log=new n.Log(t,e,o)}}},"../core/logging/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{HasLog:()=>s.HasLog,Insights:()=>l.Insights,Log:()=>r.Log,LogCall:()=>i.LogCall,LogEntry:()=>a.LogEntry,LogEntryOptions:()=>n.LogEntryOptions});var n=o("../core/logging/log-entry-options.ts"),s=o("../core/logging/has-log.ts"),r=o("../core/logging/Log.ts"),i=o("../core/logging/log-call.ts"),a=o("../core/logging/entry.ts"),l=o("../core/logging/insights.ts")},"../core/logging/insights.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Insights:()=>i});var n=o("../core/logging/index.ts");class s extends n.HasLog{constructor(){super("Sys.Insght"),this.add("system","insights",this.log),this.log.add("this log is usually empty, as it's just a helper tool")}history={};add(t,e,o){t in this.history||(this.history[t]=new r(t)),this.history[t].logs.push({key:e,log:o})}show(t,e,o,n){if(!t){const t=Object.keys(this.history);return void console.log(`This is the $2sxc JS Insights - see https://go.2sxc.org/insights \nAdd ?debug=true to the url to log more data. \nCopy/paste code lines below to see details. \n----------------------------------------------------------------------\n${t.length} insights-sections found: \n`+t.map((t=>`$2sxc.insights('${t}');`)).join("\n"))}const s=this.history[t];if(!s)return void console.error(`part '${t}' not found`);if(void 0===e){let e=0;const o=s.logs.map((o=>`$2sxc.insights('${t}', ${e++}); - will show for '${o.key}'`)).join("\n");return void console.log(`'${t}' contains ${s.logs.length} entries. Copy/paste the code to to see the logs: \n`+o)}const r=s.logs.length>=e&&s.logs[e];if(!r)return void console.error(`index ${e} not found in part '${t}'`);if(!r.log)return void console.error(`found index ${e} on part '${t}' but it has no logs`);console.log(`Will dump the log for ${t}[${e}] '${r.key}'`);let i=!1;void 0===o&&(i=!0,o=0,n=25),r.log.dumpList(o||0,n),i&&r.log.entries.length>n&&console.warn(`Only showing ${n} of ${r.log.entries.length} logs. To show all, add start param '..., 0)' or start/length '..., 0, 100)'`)}}class r{name;logs=[];constructor(t){this.name=t}}const i=window.$2sxc&&window.$2sxc._insights||new s},"../core/logging/log-call.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{LogCall:()=>s});var n=o("../core/logging/index.ts");class s{log;name;initialEntry;constructor(t,e,o,n,s){if(this.log=t,this.name=e,this.initialEntry=this.log._prepareEntry(e+"("+(o||"")+")"),this.log._callDepthAdd(e),this.log._addEntry(this.initialEntry),"string"==typeof n&&this.add(n),s)for(let t in s)this.data("initial:"+t,s[t])}lastMessage;add(t,e,o){this.lastMessage=t,this.log.add(t,e),o&&this.processExtraBehavior(o,t,e)}onlyAddIfNew(t,e){this.lastMessage!==t&&this.add(t),e&&this.processExtraBehavior(e,t,void 0)}data(t,e){this.log.addData(t,e)}done(t,e){this.return(null,t||"👍",e)}return(t,e,o){return e=e||"👍",this.initialEntry.result=e,this.log._callDepthRemove(this.name),this.initialEntry.data=t,(this.log.liveDump||this.log._parentHasLiveDump)&&this.add(this.name+" = "+e,t),o&&this.processExtraBehavior(o,e,t),t}processExtraBehavior(t,e,o){if(t===n.LogEntryOptions.log&&console.log(e,o),t===n.LogEntryOptions.warn&&console.warn(e,o),t!==n.LogEntryOptions.error&&t!==n.LogEntryOptions.throw||console.error(e,o),t===n.LogEntryOptions.throw)throw e}}},"../core/logging/log-entry-options.ts":(t,e,o)=>{"use strict";var n;o.r(e),o.d(e,{LogEntryOptions:()=>n}),function(t){t.log="log",t.warn="warn",t.error="error",t.throw="throw"}(n||(n={}))},"../core/plumbing/assets-loader.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AssetsLoader:()=>n});class n{static runScripts(t,e){const o=t[0],n=t.slice(1);if(null==o)return void e?.();const s=document.createElement("script");if(Array.from(o.attributes).forEach((t=>{s.setAttribute(t.nodeName,t.nodeValue)})),s.textContent=o.textContent,s.type&&s.src){const t=()=>{s.onload=null,s.onerror=null,document.head.removeChild(s),this.runScripts(n,e)};return s.onload=t,s.onerror=t,void document.head.appendChild(s)}setTimeout((()=>{document.head.appendChild(s),document.head.removeChild(s),this.runScripts(n,e)}))}}},"../core/plumbing/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{NoJQ:()=>r.NoJQ,Obj:()=>n.Obj,flattenSlashes:()=>s.flattenSlashes});var n=o("../core/plumbing/obj.ts"),s=(o("../core/plumbing/type-value.ts"),o("../core/plumbing/url.ts")),r=o("../core/plumbing/no-jquery.ts")},"../core/plumbing/no-jquery.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{NoJQ:()=>s});var n=o("../core/plumbing/assets-loader.ts");class s{static ready(t){"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",(()=>t()),{once:!0})}static param(t){return Object.entries(t).map((([t,e])=>`${encodeURIComponent(t)}=${null==e?"":"string"==typeof e?encodeURIComponent(e):encodeURIComponent(JSON.stringify(e))}`)).join("&")}static domFromString(t){const e=document.createElement("div");e.insertAdjacentHTML("afterbegin",t),Array.from(e.querySelectorAll("script")).forEach((t=>{const e=document.createElement("script");Array.from(t.attributes).forEach((t=>{e.setAttribute(t.nodeName,t.nodeValue)})),e.textContent=t.textContent,s.replaceWith(t,e,!1)}));const o=Array.from(e.children);return o.forEach((t=>{e.removeChild(t)})),o}static offset(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}}static width(t){const e=getComputedStyle(t);return 0===t.offsetWidth?0:t.offsetWidth-(parseInt(e.getPropertyValue("border-left-width"),10)+parseInt(e.getPropertyValue("border-right-width"),10))-(parseInt(e.getPropertyValue("padding-left"),10)+parseInt(e.getPropertyValue("padding-right"),10))}static height(t){const e=getComputedStyle(t);return 0===t.offsetHeight?0:t.offsetHeight-(parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("border-bottom-width"),10))-(parseInt(e.getPropertyValue("padding-top"),10)+parseInt(e.getPropertyValue("padding-bottom"),10))}static empty(t){Array.from(t.childNodes).forEach((e=>{t.removeChild(e)}))}static replaceWith(t,e,o){const s=t.parentElement,r=Array.from(e.querySelectorAll("script")),i=[];r.forEach((t=>{i.push({script:t,type:t.type}),t.type=null})),s.replaceChild(e,t),i.forEach((t=>{t.script.type=t.type})),o&&n.AssetsLoader.runScripts(r,void 0)}static append(t,e,o){const s=[];e.forEach((e=>{if("script"===e.tagName.toLocaleLowerCase()){const o=e,n=o.type;o.type=null,t.appendChild(o),o.type=n,s.push(o)}else t.appendChild(e)})),o&&s.length>0&&n.AssetsLoader.runScripts(s,void 0)}}},"../core/plumbing/obj.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Obj:()=>n});class n{static TypeSafeAssign(...t){t.reduce(((t,e)=>Object.keys(e).reduce(((t,o)=>(t[o]=e[o],t)),t)),t[0])}static DeepClone(t,e=!1){if(null==t)return t;const o=e?JSON.stringify(t,s):JSON.stringify(t);return null==o?t:JSON.parse(o)}}const s=()=>{const t=new WeakSet;return(e,o)=>{if("object"==typeof o&&null!==o){if(t.has(o))return;t.add(o)}return o}}},"../core/plumbing/type-value.ts":(t,e,o)=>{"use strict";o.r(e)},"../core/plumbing/url.ts":(t,e,o)=>{"use strict";function n(t){return t.replace(/(\/+)/g,"/")}o.r(e),o.d(e,{flattenSlashes:()=>n})},"./src/bootstrap/bootstrap.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{BootstrapInPage:()=>f});var n=o("./src/commands/index.ts"),s=o("./src/constants/index.ts"),r=o("./src/core/index.ts"),i=o("./src/plumbing/index.ts"),a=o("./src/quick-dialog/index.ts"),l=o("./src/quick-dialog/state.ts"),c=o("./src/toolbar/index.ts"),d=o("./src/toolbar/render/svg-icons.ts"),u=o("./src/toolbar/tag-toolbars/tag-toolbar-manager.ts"),p=o("./src/toolbar/toolbar-manager.ts"),m=o("../$2sxc/src/dom/dom-tools.ts");class f extends r.HasLog{constructor(){super("Sys.Bootst",null,"Building Bootstrapper"),r.Insights.add("system","bootstrap",this.log)}initializedInstances=[];openedTemplatePickerOnce=!1;diagCancelStateOnStart=l.cancelled.get();initialize(){const t=this.log.call("initialize");this.diagCancelStateOnStart&&l.cancelled.remove(),this.initAllInstances(!0),this.watchDomChanges(),(0,d.monitorSvgIconsInToolbar)(),t.return("done")}initAllInstances(t){const e=this.log.call("initAllInstances"),o=Array.from(document.querySelectorAll(c.toolbarSelector)).filter((t=>!t.closest(s.C.Sel.SxcDivs)));this.log.add(`Found ${o.length} toolbars outside of 2sxc modules`),o.forEach((t=>{p.ToolbarManager.singleton().build(t)}));const n=document.querySelectorAll(s.C.Sel.SxcDivs);this.log.add(`Found ${n.length} toolbars inside 2sxc modules`),n.forEach((e=>{this.initInstance(e,t)})),t&&this.tryShowTemplatePicker(),e.return("initAllInstances done")}watchDomChanges(){const t=this.log.call("watchDomChanges");new MutationObserver((t=>{window.$2sxc.stats.watchDomChanges++;let e=0;t.forEach((t=>{t.addedNodes.forEach((t=>{if(null==t.matches)return;const o=t;o.matches(s.C.IDs.cls.scMenu)||(e++,o.matches(s.C.Sel.SxcDivs)?(this.initInstance(o,!1),a.QuickDialog.singleton().isVisible()||this.tryShowTemplatePicker()):o.matches(":not(.active-module)")&&o.querySelectorAll(s.C.Sel.SxcDivs).length>0?o.querySelectorAll(s.C.Sel.SxcDivs).forEach((t=>{this.initInstance(t,!1)})):p.ToolbarManager.singleton().build(o))}))})),e&&u.TagToolbarManager.cleanupOrphanedToolbars()})).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),t.return("watchDomChanges done")}tryShowTemplatePicker(){const t=this.log.call("tryShowTemplatePicker");let e;const o=l.cbId.get();if(o){const t=document.querySelectorAll(`[${s.C.AttrNames.ContentBlockId}="${o}"]`);if(t.length)if(o<0){const n=Number(t[0].attributes.getNamedItem(s.C.AttrNames.InstanceId).value);e=window.$2sxc(n,o)}else e=window.$2sxc(o)}if(!e){const o=document.querySelectorAll(`.${s.C.ClsNames.UnInitialized}`);if(this.diagCancelStateOnStart||this.openedTemplatePickerOnce)return t.return(!1,"cancelled");if(a.QuickDialog.singleton().isVisible())return t.return(!1,"should be invisible");if(1!==o.length)return t.return(!1,"has un-init modules");const n=Array.from(o).find((t=>t.parentElement.matches(s.C.Sel.SxcDivs)))?.parentElement;e=window.$2sxc(n)}return e&&(e.manage.run("layout"),this.openedTemplatePickerOnce=!0),t.return(!0,"tryShowTemplatePicker() done")}initInstance(t,e){const o=this.log.call("initInstance",`isFirstRun: ${e}) initialized: ${this.initializedInstances} module: obj`,null,{module:t});if(this.initializedInstances.find((e=>e===t)))return;this.initializedInstances.push(t);let n=window.$2sxc(t);e||(n=n.recreate(!0));const s=this.showGlassesButtonIfUninitialized(n);!e&&s||(new r.Log("Bts.Module"),p.ToolbarManager.singleton().buildModule(t)),o.done()}showGlassesButtonIfUninitialized(t){const e=this.log.call("showGlassesButtonIfUninitialized","sxci:",null,{sxci:t});if(this.isInitialized(t))return e.return(!1,"is initialized");const o=m.DomTools.getTag(t);if(0!==o.querySelectorAll(`.${s.C.ClsNames.UnInitialized}`).length)return e.return(!1,"already has button");const r=i.NoJQ.domFromString(`<div class="${s.C.ClsNames.UnInitialized}" onmouseover="this.title = $2sxc.translate(this.title)" title="InPage.NewElement"><div class="${n.iconPrefix}glasses"></div></div>`)[0];return r.addEventListener("click",(()=>t.manage.run("layout"))),o.append(r),e.return(!0,"ok")}isInitialized(t){const e=t?.manage,o=e?.editContext,n=o?.contentBlock,s=!n&&null!=o?.jsApi;return n&&0!==n.TemplateId||s}}},"./src/cms/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{RunParamsHelpers:()=>n.RunParamsHelpers,SxcGlobalCms:()=>s.SxcGlobalCms});var n=o("./src/cms/run-params-helpers.ts"),s=(o("./src/cms/run-params-with-workflows.ts"),o("./src/cms/sxc-global-cms.ts"))},"./src/cms/run-params-helpers.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{RunParamsHelpers:()=>a});var n=o("../$2sxc/src/sxc/sxc.ts"),s=o("../$2sxc/src/sxc-global/context-identifier.ts"),r=o("./src/commands/index.ts"),i=o("./src/core/index.ts");class a extends i.HasLog{constructor(t){super("Cmd.RunPrm",t,"start")}getParamsFromNameOrParams(t){const e=this.log.call("getParamsFromNameOrParams",`${t}`),o="string"==typeof t;e.add(`adapting settings; name string: ${o}; name = ${t}`);const n=o?{action:t}:t;return e.return(n)}expandParamsWithDefaults(t){const e=this.log.call("expandParamsWithDefaults"),o=t.action;e.add(`will add defaults for ${o} from buttonConfig`);const n=r.Commands.singleton().get(o).buttonDefaults;return e.data("defaults to merge",n),e.return({...n,...t})}static is$sxcRunParams(t){const e=t;return(null!=e.tag||null!=e.context&&(s.ContextIdentifier.is(e.context)||n.Sxc.is(e.context)))&&a.isRunParamsInstance(e)}static isRunParamsInstance(t){const e=t;return null!=e.action||null!=e.params}static ensureRunParamsInstanceOrError(t){if(!a.isRunParamsInstance(t))throw`${c} with at least ${l}`;if(t.context)throw`${c} without 'context' since it already provides the context`}}const l="'action' and/or 'params'",c="sxc instance run() expects runParams"},"./src/cms/run-params-with-workflows.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/cms/sxc-global-cms.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcGlobalCms:()=>p});var n=o("../$2sxc/src/sxc/sxc.ts"),s=o("../$2sxc/src/sxc-global/context-identifier.ts"),r=o("./src/commands/index.ts"),i=o("./src/constants/index.ts"),a=o("./src/context/bundles/context-bundle-button.ts"),l=o("./src/context/bundles/context-bundle-instance.ts"),c=o("./src/core/index.ts"),d=o("./src/cms/run-params-helpers.ts");const u="Cms.Api";class p extends c.HasLog{autoDump=i.C.Debug.cms.autoDump;constructor(){super(u,null)}resetLog(){this.log=new c.Log(u,null,"log was reset"),c.Insights.add("cms","run",this.log)}run(t,e,o,n){return this.runInternal(t,e,o,n,"sxcGlobalCms.run")}runInternal(t,e,o,i,c){const u=this.log.call("run<T>2",`triggeredBy: ${c}`),p=new r.CmsEngine(this.log);let m;if(d.RunParamsHelpers.is$sxcRunParams(t)){const e=s.ContextIdentifier.is(t.context)||n.Sxc.is(t.context)?window.$2sxc(t.context):t.tag,o=a.ContextComplete.findContext(e);t.params={action:t.action,...t.params},m=()=>p.run(o,t.params,t.event,t,"sxcGlobalCms.runInternal")}else{const n=l.ContextBundleInstance.is(t)?t:a.ContextComplete.findContext(t);m=()=>p.detectParamsAndRun(n,e,o,i)}const f=this.do(m);return u.return(f,"ok")}do(t){const e=this.log.call("do");this.resetLog();const o=t();return this.autoDump&&this.log.dump(),e.return(o)}}},"./src/commands/cmd-par-hlp.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{CmdParHlp:()=>s});var n=o("./src/context/bundles/context-bundle-button.ts");class s{static getIndex(t){const e=n.ContextComplete.is(t)?t.button.command.params:t;return e.index??e.sortOrder}}},"./src/commands/command-code.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/commands/command-link-generator.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{CommandLinkGenerator:()=>c});var n=o("./src/commands/index.ts"),s=o("./src/constants/index.ts"),r=o("./src/core/index.ts"),i=o("./src/manage/dialog-core-params.ts"),a=o("./src/plumbing/index.ts"),l=o("./src/toolbar/config/index.ts");class c extends r.HasLog{buttonSafe;context;items;constructor(t,e,o){super("Cmd.LnkGen",o),this.buttonSafe=t,this.context=e;const n=this.log.call("constructor"),s=t.action();this.items=s.params.items||[],n.data("items",this.items),this.#t(t),e.button.configureLinkGenerator&&e.button.configureLinkGenerator(e,this),n.done()}#e(){const t=this.log.call("constructor"),e=this.buttonSafe.dialog(),{items:o,...n}=this.buttonSafe.parameters(),s={dialog:e||this.buttonSafe.action().name,...n};return t.data("urlParams",s),s}#t(t){t.action().params.useModuleList?this.#o(!0):t.action().params.parent?this.#n():this.#s()}getLink(){const t=this.context,e=new l.ButtonSafe(t.button,t),o=e.action().params,n=t.button.tweakGeneratedUrlParameters?t.button.tweakGeneratedUrlParameters(t,this.#e()):this.#e();if(o.prefill)for(let t=0;t<this.items.length;t++)this.#r(this.items[t],o);delete n.prefill,e.noItems()||(n.items=JSON.stringify(this.items));const s=e.partOfPage(),r=new i.DialogCoreParams(t,s),c=this.#i(t),d=window.$2sxc.urlParams.get("debug")?"&debug=true":"";return`${c}#${a.NoJQ.param(r).replace(/%2F/g,"/")}&${a.NoJQ.param(n)}${d}`}#i(t){const e=t.sxc?.env??window.$2sxc.env;let o=e.dialogQuery();return o&&!o.startsWith("&")&&(o="&"+o),`${(0,a.flattenSlashes)(`${e.uiRoot()}${s.C.DialogPaths.eavUi}`)}?pageId=${e.page()}&wpk=${this.#a(e)}&sxcver=${t.instance.sxcVersion}${o}`}#a(t){return null!==t.publicKey()}#s(){const t={},e=this.context.button.command.params,o=e.contentType||e.attributeSetName;e.entityId&&(t.EntityId=e.entityId),o&&(t.ContentTypeName=o),(t.EntityId||t.ContentTypeName)&&this.items.push(this.#r(t,e))}#r(t,e){if(null==e)return t;const o=t;return e.prefill&&(o.Prefill=e.prefill),e.uifields&&(o.UiFields=e.uifields),e.form&&(o.Parameters=e.form),t}#o(t){const e=this.log.call("addContentGroupItems",`${t}`),o=n.CmdParHlp.getIndex(this.context),s=-1!==o?o:0,r="new"===this.context.button.command.name,i=this.context.contentBlock.contentGroupId,a=this.context.button.command.params,l=[this.#l(!0)];t&&l.push(this.#l(!1)),l.map((t=>this.#c(i,s,t,r,a))),e.done()}#c(t,e,o,n,s){const r=this.log.call("addContentGroupItem",`${t}, ${e}, ${o}, ${n}`),i={Add:n,Index:e,Parent:t,Field:o.toLocaleLowerCase()};this.items.push(this.#r(i,s)),r.done()}#n(){const t=this.context.button.command.params,e=n.CmdParHlp.getIndex(t),o="new"===this.context.button.command.name,s=t.parent;t.fields&&t.fields.split(",").map((n=>{const r={EntityId:o?0:t.entityId,Field:n,Parent:s,Add:o,Index:e};this.items.push(this.#r(r,t))}))}#l(t){return(-1!==n.CmdParHlp.getIndex(this.context)?"":"List")+(t?"Content":"Presentation")}}},"./src/commands/command.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Command:()=>c,iconPrefix:()=>i,tlbI18nPrefix:()=>a});var n=o("./node_modules/tippy.js/dist/tippy.esm.js"),s=o("./src/context/bundles/context-bundle-button.ts"),r=o("./src/constants/debug.ts");const i="icon-sxc-",a="Toolbar.",l=r.Debug.parts.CommandTippy;class c{name;constructor(t){this.name=t}buttonDefaults;mergeDefaults(t,e,o,r,c){if("boolean"!=typeof r)throw"partOfPage in commands not provided, order will be wrong!";this.buttonDefaults={icon:()=>`${i}${e}`,title:()=>`${a}${t}`,uiActionOnly:()=>o,partOfPage:()=>r,color:()=>{},tippy:(t,e)=>{const o=s.ContextComplete.getRule(t)?.ui;let r=o?.note;if(!r&&c.notes){var i=c.notes(t);i&&i.length>0&&(r=i[0])}if(!r?.note)return;const a=r?.asHtml??!1;let d={content:r.note,theme:"light",arrow:!0,delay:[r.delay,r.linger],allowHTML:a,onMount:t=>{const e=t.popper.querySelector(".tippy-content");r.isSystem&&(e.style.background="#DFC2F2"),r?.background&&(e.style.background=r.background)}};r.interactive&&(d=this.tippyMakeInteractive(d)),d=this.tippyAddLinks(d,r),l&&console.log("Command-Tippy",r,d),(0,n.default)(e,d),r.delay>100&&(e.classList.add("note-delayed"),r.isSystem&&e.classList.add("note-system"))},...c}}tippyAddLinks(t,e){if(!e.links||0===e.links.length)return t;const o=e.links.map((t=>`<a class="tippy-button ${t.primary?"tippy-button-primary":""}" href="${t.url}" target="_blank">${t.label??"🔗 more"}</a>`));return{...this.tippyMakeInteractive(t),allowHTML:!0,content:`<div>${e.note}<div>\n      <br>\n      <div class="tippy-buttons">${o}</div>`}}tippyMakeInteractive(t){return{...t,interactive:!0,appendTo:()=>document.body}}static build(t,e,o,n,s,r){const i=new c(t);return i.mergeDefaults(e,o,n,s,r),i}static clone(t,e){const o=new c(e);return o.buttonDefaults=t.buttonDefaults,o}}},"./src/commands/command/command-add-existing.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/command/shared-logic.ts");n.Commands.add("add-existing","AddExisting","add-existing",!1,!0,{dialog:t=>"replace",showCondition:t=>s.SharedLogic.isList(t),configureLinkGenerator:(t,e)=>{if(s.SharedLogic.isFieldList(t)){const o=t.button.command.params;e.items=[{Add:!0,Index:n.CmdParHlp.getIndex(o)+1,Parent:o.parent,Field:o.fields}]}else if(s.SharedLogic.isPartOfBlockList(t)){const t=e.items[0];t.Add=!0,t.Index++,e.items=[t]}}})},"./src/commands/command/command-add.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/command/content-list-actions.ts"),r=o("./src/commands/command/shared-logic.ts"),i=o("./src/commands/cmd-par-hlp.ts");n.Commands.add("add","AddDemo","plus-circled",!1,!0,{showCondition:t=>r.SharedLogic.isList(t),code:t=>s.Actions.addItem(t,i.CmdParHlp.getIndex(t)+1)})},"./src/commands/command/command-app-import.ts":(t,e,o)=>{"use strict";o.r(e),o("./src/commands/index.ts").Commands.add("app-import","Dashboard","",!0,!1,{noItems:!0})},"./src/commands/command/command-app-resources.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts");n.Commands.add("app-resources","AppResources","translate",!0,!1,{dialog:t=>"edit",disabled:t=>null===t.app.resourcesId,title:t=>`${n.tlbI18nPrefix}AppResources${null===t.app.resourcesId?"Disabled":""}`,showCondition:t=>!!t.user.CanAdmin,configureLinkGenerator:(t,e)=>{e.items=[{EntityId:t.app.resourcesId}]},dynamicClasses:t=>null!==t.app.resourcesId?"":"empty",noItems:!1})},"./src/commands/command/command-app-settings.ts":(t,e,o)=>{"use strict";o.r(e),o("./src/commands/index.ts").Commands.add("app-settings","AppSettings","sliders",!0,!1,{dialog:()=>"edit",disabled:t=>null===t.app.settingsId,title:t=>"Toolbar.AppSettings"+(null===t.app.settingsId?"Disabled":""),showCondition:t=>t.user.CanAdmin,configureLinkGenerator:(t,e)=>{e.items=[{EntityId:t.app.settingsId}]},dynamicClasses:t=>null!==t.app.settingsId?"":"empty",noItems:!1})},"./src/commands/command/command-app.ts":(t,e,o)=>{"use strict";o.r(e),o("./src/commands/index.ts").Commands.add("app","App","settings",!0,!1,{showCondition:t=>t.user.CanAdmin,noItems:!0})},"./src/commands/command/command-apps.ts":(t,e,o)=>{"use strict";o.r(e),o("./src/commands/index.ts").Commands.add("apps","Zone","manage",!0,!1,{showCondition:t=>!!t.user.CanAdmin,noItems:!0})},"./src/commands/command/command-code.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts");const s="Running 'code' command, ",r=`${s}but no 'call' found to run - see console for debug info.`,i=`${s}but 'call' doesn't seem to be a string.`,a=n.Command.build("code","Custom","bomb",!0,!1,{code:(t,e)=>new Promise(((o,n)=>{const a=t.button.command.params;function l(t){console.warn(t,a),alert(t+"\n See console for details."),o()}let c=a.call;if(!c)return l(r);if("string"!=typeof c)return l(i);if(-1!==c.indexOf("(")||-1!==c.indexOf(" "))return l(`${s}but 'call' contained '(' or ' ' characters - not allowed.`);c+="(params, context, event)";const d={};Object.entries(a).forEach((([t,e])=>{"function"!=typeof e&&(d[t]=e)}));const{action:u,call:p,...m}=d;try{const n=new Function("params","context","event",c);o(n(m,t,e))}catch(t){console.error("error in custom button-code: ",a),n(t)}}))});n.Commands.addCommand(a)},"./src/commands/command/command-content-type.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{createContentTypeParams:()=>r});var n=o("./src/commands/index.ts");const s=n.Command.build("fields","ContentType","fields",!0,!1,{dialog:t=>"contenttype",parameters:r,showCondition:t=>!!t.user.CanDevelop&&!!r(t).contentType,noItems:!0});function r(t){return{contentType:t.button.command.params.contentType||t.contentBlock.contentTypeId}}n.Commands.addCommand(s),n.Commands.addCommand(n.Command.clone(s,"contenttype"))},"./src/commands/command/command-copy.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/command/command-content-type.ts");n.Commands.add("copy","Copy","copy",!1,!0,{dialog:t=>"edit",showCondition:t=>!!t.button.command.params.entityId,configureLinkGenerator:(t,e)=>{const o=t.button.command.params.entityId,n=(0,s.createContentTypeParams)(t).contentType;if(!n)throw new Error("can't copy: missing contentType");e.items=[{DuplicateEntity:o,ContentTypeName:n}]}})},"./src/commands/command/command-data.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/command/command-content-type.ts");const r=n.Command.build("data","ContentItems","table",!0,!1,{dialog:t=>"contentitems",parameters:s.createContentTypeParams,showCondition:t=>!!t.user.CanAdmin&&!!(0,s.createContentTypeParams)(t).contentType,tweakGeneratedUrlParameters:(t,e)=>{const o=t.button.command.params.filters;if(!o)return e;let n=JSON.stringify(o);return n.indexOf("+")>-1&&(n=btoa(n)),{...e,filters:n}},noItems:!0});n.Commands.addCommand(r),n.Commands.addCommand(n.Command.clone(r,"contentitems"))},"./src/commands/command/command-delete.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/entity-manipulation/item-commands.ts");n.Commands.add("delete","Delete","cancel",!0,!1,{showCondition(t){const e=t.button.command.params;return!(e.useModuleList||!e.entityId||!e.entityGuid||!e.entityTitle)},code(t){const e=t.button.command.params,o=e.title||e.entityTitle;return s.contentItems.delete(t,e.entityId,e.entityGuid,o)}})},"./src/commands/command/command-edit.ts":(t,e,o)=>{"use strict";o.r(e),o("./src/commands/index.ts").Commands.add("edit","Edit","pencil",!1,!0,{parameters:t=>({mode:"edit"}),showCondition(t){const e=t.button.command.params;return!!e.entityId||!!e.useModuleList}})},"./src/commands/command/command-edition.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{editionInNote:()=>i});var n=o("./src/commands/index.ts"),s=o("./src/constants/debug.ts"),r=o("./src/toolbar/config/Note.ts");function i(t,e){const o=t.contentBlock.edition;return e||t.user.CanDevelop||t.user.canSwitchEdition?`<button onclick="$2sxc(${t.sxc.id,t.sxc.id}).cms.run({ action: 'edition', params: { ask: true, edition: '${o}', editions: 'live,staging' } })">${o}</button>`:o}n.Commands.add("edition","Edition","edition",!0,!1,{code(t,e){const o=t.app.id,n=`app-${o}-edition`,r=t.button.command.params,i=r.edition;if(r.reset)return u();const a=r.editions??t.contentBlock.editions??"",l=a.split(",").join(", "),c=`To switch to another edition on App ${o}, enter the edition:\n${a?`Known Editions (from app.json): ${l}\n`:""}\nRemember to reload the page afterwards to see the changes.`,d=r.ask||!i?prompt(c,i??""):i;return s.Debug.log("command: app id",o),s.Debug.log("command: log (message/context)",d),s.Debug.log("command: edition (edition)",r.edition,t),d?(console.log(`Will set cookie ${n}=${d}`),document.cookie=`${n}=${d}; path=/;`,new Promise(((t,e)=>{}))):u();function u(){return console.log(`Will unset cookie ${n}`),document.cookie=`${n}=flush; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`,new Promise(((t,e)=>{}))}},notes(t){const e=t.contentBlock,o=e.edition,n=i(t,!0),s=`<strong>View / Edition</strong> <br>\n    \n    View: <strong>${e.viewName}</strong> - ${o?"edition: "+n:""}<br>\n    `;return[new r.Note({type:"info",note:s,asHtml:!0,delay:0,interactive:!0,isSystem:!0})]},noItems:!0})},"./src/commands/command/command-info.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/context/index.ts"),r=o("./src/commands/command.ts");const i=o("./src/constants/debug.ts").Debug.parts.commandInfo,a={info:"Info",warning:"Warning",error:"Error",help:"Help",link:"Link"},l={info:"info",warning:"warning",error:"warning",help:"Help",link:"Link"},c={info:"gray",warning:"orange",error:"red"};function d(t){i&&console.log("2dm - note: ctx-ui",t?.ui);const e=s.ContextComplete.getRule(t)?.ui?.note??{};return e.type=e.type??"info",i&&console.log("2dm - note",e),e}n.Commands.add("info","Info","info",!0,!1,{icon:t=>r.iconPrefix+(l[d(t).type]??"info"),title:t=>r.tlbI18nPrefix+(a[d(t).type]??"Info"),color:t=>c[d(t)?.type??"info"],code(t,e){i&&console.log("2dm - info-button code",t);const o=t.button.command.params,s=o?.link,r=o?.target;return i&&console.log("2dm - info-button code - link",s),s?(n.CmsEngine.applyLinkToButton(e,s,r)||window.open(s,r??"_blank"),Promise.resolve()):(console.log("info-button clicked, but nothing will happen, because no link was specified in the params. This may be expected/ok."),Promise.resolve())},noItems:!0})},"./src/commands/command/command-insights.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{insightsUrl:()=>s});var n=o("./src/commands/index.ts");function s(t){return window.$2sxc.http.apiUrl(`sys/insights/${t}`)}const r=n.Command.build("insights","Insights","speed",!0,!1,{dialog:t=>"insights-server",showCondition:t=>t.user.CanDevelop,code(t,e){const o=s(t.button.command.params?.part??"logs");return new Promise((t=>(window.open(o,"_blank"),t())))},noItems:!0});n.Commands.addCommand(r),n.Commands.addCommand(n.Command.clone(r,"insights-server"))},"./src/commands/command/command-layout.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/quick-edit/index.ts"),r=o("./src/quick-edit/context-for-lists.ts"),i=o("./src/toolbar/config/Note.ts"),a=o("../$2sxc/src/dom/dom-tools.ts"),l=o("./src/commands/command/command-edition.ts");const c="ChangeLayout";n.Commands.add("layout",c,"glasses",!0,!0,{inlineWindow:t=>!0,code(t,e){const o="["+s.QeSelectors.blocks.cb.context+"]",i=a.DomTools.getTag(t.sxc).closest(o);if(i){const e=r.ContextForLists.getFromDom(i);t.button.command.params.apps=e.apps}return n.CmsEngine.openDialog(t,e,"commandLayout.add")},disabled:t=>!!t.contentBlock.viewSwitchDisabled,title:t=>n.tlbI18nPrefix+c+(t.contentBlock.viewSwitchDisabled?"Disabled":""),notes(t){const e=t.app,o=t.contentBlock,n=o.edition,s='<a href="https://go.2sxc.org/lightspeed" target="_blank">⚡ LightSpeed Cache</a>',r=o.renderLightspeed?`<strike>${o.renderMs}ms</strike> 0ms using ${s}`:`${o.renderMs}ms (no ${s})`,a=o.queryName?`Query: ${o.queryName} <br>${o.queryInfo}<br>`:"",c=(0,l.editionInNote)(t,!1),d=`<strong>Layout</strong> <br>\n    \n    App: <strong>${e.appName}</strong> <br>\n    View: <strong>${o.viewName}</strong> - ${n?"edition: "+c:""}<br>\n    ${a}\n    Page: ${t.page.id}, Module: ${t.instance.id} <br>\n    ⌛ ${r} <br>\n    `;return[new i.Note({type:"info",note:d,asHtml:!0,delay:500,interactive:!0,isSystem:!0})]},noItems:!0})},"./src/commands/command/command-list.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/cmd-par-hlp.ts");const r=n.Command.build("list","Sort","list-numbered",!1,!0,{dialog:t=>"instance-list",showCondition:t=>n.SharedLogic.isList(t),configureLinkGenerator:(t,e)=>{if(!n.SharedLogic.isFieldList(t))return;const o=t.button.command.params;e.items=[{Add:!1,Index:s.CmdParHlp.getIndex(o),Parent:o.parent,Field:o.fields}]},noItems:!1});n.Commands.addCommand(r),n.Commands.addCommand(n.Command.clone(r,"instance-list"))},"./src/commands/command/command-log.ts":(t,e,o)=>{"use strict";o.r(e),o("./src/commands/index.ts").Commands.add("log","Log","bomb",!0,!1,{code:(t,e)=>(console.log("command: log (message/context)",t.button.command.params.message,t),new Promise(((t,e)=>{}))),noItems:!0})},"./src/commands/command/command-metadata.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ImageMetadataCommand:()=>r,MetadataCommand:()=>s});var n=o("./src/commands/index.ts");const s=n.Command.build("metadata","Metadata","tag",!1,!1,{parameters:t=>({mode:"new"}),dialog:t=>"edit",dynamicClasses:t=>t.button.command.params.entityId?"":"empty",showCondition:t=>!!t.button.command.params.metadata,configureLinkGenerator(t,e){const o={Metadata:{keyType:"string",targetType:10,...e.context.button.command.params.metadata}};e.items[0]={...e.items[0],...o}},noItems:!1}),r=n.Command.build("image","Image","focus",!1,!1,{parameters:s.buttonDefaults.parameters,dialog:s.buttonDefaults.dialog,classes:"single-field",dynamicClasses:s.buttonDefaults.dynamicClasses,showCondition:s.buttonDefaults.showCondition,configureLinkGenerator:s.buttonDefaults.configureLinkGenerator});n.Commands.addCommand(s),n.Commands.addCommand(r)},"./src/commands/command/command-more.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/constants/index.ts"),r=o("./src/constants/ids.ts");n.Commands.add("more","MoreActions","options btn-mode",!0,!1,{code:(t,e)=>new Promise(((t,o)=>{const n=e.target.closest(r.IDs.sel.tagScMenu),i=Number(n.getAttribute("data-state")||0),a=(i+1)%Number(n.getAttribute("group-count"));n.classList.remove(`group-${i}`),n.classList.add(`group-${a}`),n.setAttribute("data-state",String(a)),e.preventDefault();const l=n.closest("."+s.C.Toolbar.classes.oldHover);l&&"true"!==n.getAttribute("listener")&&(l.addEventListener("mouseenter",(function(t){n.style.opacity="1"})),l.addEventListener("mouseleave",(function(t){0!==t.screenX&&0!==t.screenY?n.style.opacity="0":(n.style.opacity="1",console.warn("workaround for toolbar hide onmouseleave issue",t.screenX,t.screenY,t.target))})),n.setAttribute("listener","true")),t()}))})},"./src/commands/command/command-movedown.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/command/content-list-actions.ts");n.Commands.add("movedown","MoveDown","move-down",!1,!0,{showCondition:t=>n.SharedLogic.isList(t),code(t){const e=n.CmdParHlp.getIndex(t);return s.Actions.changeOrder(t,e,e+1)}})},"./src/commands/command/command-moveup.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/command/content-list-actions.ts"),r=o("./src/commands/command/shared-logic.ts");n.Commands.add("moveup","MoveUp","move-up",!1,!0,{showCondition:t=>!(!r.SharedLogic.isList(t)||0===n.CmdParHlp.getIndex(t)),code(t){const e=n.CmdParHlp.getIndex(t);return s.Actions.changeOrder(t,e,Math.max(e-1,0))}})},"./src/commands/command/command-new.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/command/shared-logic.ts"),r=o("./src/commands/cmd-par-hlp.ts");n.Commands.add("new","New","plus",!1,!0,{parameters:t=>({mode:"new"}),dialog:t=>"edit",showCondition:t=>!!t.button.command.params.contentType||s.SharedLogic.isList(t),code(t,e){const o=t.button.command.params;return o.index=r.CmdParHlp.getIndex(o)+1,o.entityId&&0!==o.entityId&&(delete o.entityId,delete o.entityGuid),o.useModuleList&&o.contentType&&delete o.useModuleList,n.CmsEngine.openDialog(t,e,"commandNew.add")}})},"./src/commands/command/command-params-all.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/commands/command/command-params-entity.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/commands/command/command-publish.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/i18n/index.ts"),r=o("./src/commands/command/content-list-actions.ts");n.Commands.add("publish","Unpublished","eye-off",!1,!1,{showCondition:t=>!1===t.button.command.params.isPublished,disabled:t=>!t.instance.allowPublish||!1!==t.button.command.params.isPublished,code(t,e){const o=t.button.command.params;return new Promise(((e,i)=>{if(o.isPublished)return alert((0,s.translate)("Toolbar.AlreadyPublished")),e();if(o.entityId)return r.Actions.publishId(t,o.entityId);const a=n.CmdParHlp.getIndex(t),l=-1===a?"listcontent":"content",c=-1===a?0:a;return r.Actions.publish(t,l,c)}))}})},"./src/commands/command/command-query.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts");const s=n.Command.build("query","QueryEdit","filter",!0,!1,{dialog:t=>"pipeline-designer",parameters:t=>({pipelineId:t.contentBlock.queryId}),newWindow:t=>!0,disabled:t=>null===t.app.settingsId||!t.contentBlock.queryId,title:t=>`${n.tlbI18nPrefix}QueryEdit${null===t.contentBlock.queryId?"Disabled":""}`,showCondition:t=>!!t.user.CanDevelop&&!t.app.isContent,dynamicClasses:t=>t.contentBlock.queryId?"":"empty",noItems:!0});n.Commands.addCommand(s),n.Commands.addCommand(n.Command.clone(s,"template-query"))},"./src/commands/command/command-remove.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/i18n/index.ts"),r=o("./src/commands/command/content-list-actions.ts");n.Commands.add("remove","Remove","minus-circled",!1,!0,{showCondition:t=>n.SharedLogic.isList(t),code:t=>new Promise(((e,o)=>confirm((0,s.translate)("Toolbar.ConfirmRemove"))?r.Actions.removeFromList(t):e()))})},"./src/commands/command/command-replace.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts"),s=o("./src/commands/command/shared-logic.ts");n.Commands.add("replace","Replace","replace",!1,!0,{showCondition:t=>s.SharedLogic.isReferencedItem(t),configureLinkGenerator:(t,e)=>{if(!s.SharedLogic.isFieldList(t))return;const o=t.button.command.params;e.items=[{Add:!1,Index:n.CmdParHlp.getIndex(o),Parent:o.parent,Field:o.fields}]}})},"./src/commands/command/command-system.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts");const s=n.Command.build("system","Zone","manage",!0,!1,{dialog:t=>"zone",showCondition:t=>!!t.user.CanAdmin,noItems:!0});n.Commands.addCommand(s),n.Commands.addCommand(n.Command.clone(s,"zone"))},"./src/commands/command/command-template.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts");const s=n.Command.build("template","Develop","code",!0,!1,{newWindow:t=>!0,dialog:t=>"develop",showCondition:t=>!!t.user.CanDevelop,configureLinkGenerator:(t,e)=>{const o=t.contentBlock,n={EntityId:o.templateId};o.templatePath&&(n.Path=o.templatePath),o.edition&&(n.Edition=o.edition),e.items=[n]},parameters:t=>({isshared:t.contentBlock.templateIsShared}),noItems:!1});n.Commands.addCommand(s),n.Commands.addCommand(n.Command.clone(s,"template-develop"))},"./src/commands/command/command-view.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts");const s=n.Command.build("view","TemplateSettings","sliders",!0,!1,{dialog:t=>"edit",showCondition:t=>!!t.user.CanDevelop&&!t.app.isContent,configureLinkGenerator:(t,e)=>{e.items=[{EntityId:t.contentBlock.templateId}]},noItems:!1});n.Commands.addCommand(s),n.Commands.addCommand(n.Command.clone(s,"template-settings"))},"./src/commands/command/content-list-action-params.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContentListActionParams:()=>n});class n{id;part;parent;fields;index;toIndex}},"./src/commands/command/content-list-actions.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Actions:()=>r});var n=o("./src/commands/index.ts"),s=o("./src/contentBlock/render.ts");const r=new class{addItem(t,e){return i(t,"cms/block/item",{index:e},"post")}removeFromList(t){const e=t.button.command.params;return i(t,"cms/list/delete",{index:n.CmdParHlp.getIndex(e),parent:e.parent,fields:e.fields},"delete")}changeOrder(t,e,o){const n=t.button.command.params;return i(t,"cms/list/move",{parent:n.parent,fields:n.fields,index:e,toIndex:o},"post")}publish(t,e,o){return i(t,"cms/block/publish",{part:e,index:o},"post")}publishId(t,e){return i(t,"cms/edit/publish",{id:e},"post")}};function i(t,e,o,n="get"){return("post"===n?t.sxc.webApi.fetchRaw(t.sxc.webApi.url(e,o),null,"POST"):"delete"===n?t.sxc.webApi.fetchRaw(t.sxc.webApi.url(e,o),void 0,"DELETE"):t.sxc.webApi.fetchJson(t.sxc.webApi.url(e,o))).then((()=>{s.renderer.reloadAndReInitialize(t,"doAndReload")}))}},"./src/commands/command/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Actions:()=>r.Actions,ContentListActionParams:()=>s.ContentListActionParams,SharedLogic:()=>n.SharedLogic,WorkflowCommands:()=>i.WorkflowCommands});var n=o("./src/commands/command/shared-logic.ts"),s=(o("./src/commands/command/command-add.ts"),o("./src/commands/command/command-add-existing.ts"),o("./src/commands/command/command-app.ts"),o("./src/commands/command/command-app-import.ts"),o("./src/commands/command/command-app-resources.ts"),o("./src/commands/command/command-app-settings.ts"),o("./src/commands/command/command-apps.ts"),o("./src/commands/command/command-data.ts"),o("./src/commands/command/command-content-type.ts"),o("./src/commands/command/command-copy.ts"),o("./src/commands/command/command-code.ts"),o("./src/commands/command/old-command-custom.ts"),o("./src/commands/command/command-delete.ts"),o("./src/commands/command/command-edit.ts"),o("./src/commands/command/command-edition.ts"),o("./src/commands/command/command-info.ts"),o("./src/commands/command/command-insights.ts"),o("./src/commands/command/command-list.ts"),o("./src/commands/command/command-layout.ts"),o("./src/commands/command/command-log.ts"),o("./src/commands/command/command-metadata.ts"),o("./src/commands/command/command-more.ts"),o("./src/commands/command/command-movedown.ts"),o("./src/commands/command/command-moveup.ts"),o("./src/commands/command/command-new.ts"),o("./src/commands/command/command-publish.ts"),o("./src/commands/command/command-remove.ts"),o("./src/commands/command/command-replace.ts"),o("./src/commands/command/command-template.ts"),o("./src/commands/command/command-query.ts"),o("./src/commands/command/command-view.ts"),o("./src/commands/command/command-system.ts"),o("./src/commands/command/command-params-entity.ts"),o("./src/commands/command/content-list-action-params.ts")),r=o("./src/commands/command/content-list-actions.ts"),i=o("./src/commands/command/workflow-commands.ts");o("./src/commands/command/command-params-all.ts")},"./src/commands/command/old-command-custom.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/commands/index.ts");const s="Trying to run Custom-Code action, but no 'call' (v10+, recommended) or 'customCode' (v9, old) found to run - see console for debug info.";n.Commands.add("custom","Custom","bomb",!0,!1,{code:(t,e)=>new Promise(((o,n)=>{const r=t.button.command.params;let i=r.customCode;i||(i=r.call,"string"==typeof i&&-1===i.indexOf(" ")&&-1===i.indexOf("(")&&(i+="(context, event)")),i||(console.warn(s,r),alert(s),o());try{o(new Function("context","event",i)(t,e))}catch(t){console.error("error in custom button-code: ",r),n(t)}}))})},"./src/commands/command/shared-logic.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SharedLogic:()=>s});var n=o("./src/commands/index.ts");class s{static isPartOfBlockList(t){return!(!t.contentBlock.isList||!t.button.command.params.useModuleList||-1===n.CmdParHlp.getIndex(t))}static isBlockReference(t){return!!t.button.command.params.useModuleList}static isFieldList(t){const e=t.button?.command.params;return!(!e?.fields||!e?.parent)}static isList(t){return this.isPartOfBlockList(t)||this.isFieldList(t)}static isReferencedItem(t){return this.isBlockReference(t)||this.isFieldList(t)}}},"./src/commands/command/workflow-commands.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{WorkflowCommands:()=>n});const n={all:"all",refresh:"refresh"}},"./src/commands/commands.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Commands:()=>r});var n=o("./src/core/index.ts"),s=o("./src/commands/command.ts");class r extends n.HasLog{static singleton(){return this.#d??(this.#d=new r)}static#d;static add(t,e,o,n,s,r){return this.singleton().add(t,e,o,n,s,r)}static addCommand(t){return this.singleton().addCommand(t)}#u=[];list={};constructor(){super("Cmd.Catlog"),n.Insights.add("system","command-catalog",this.log)}get=t=>this.list[t];add(t,e,o,n,r,i){const a=this.#p(s.Command.build(t,e,o,n,r,i));return this.log.add(`add command '${t}'`,a),a}addCommand(t){const e=this.#p(t);this.log.add(`add command '${e.name}'`,e)}#p(t){return this.list[t.name]?this.list[t.name]!==t&&(this.list[t.name]=t):(this.#u.push(t),this.list[t.name]=t),t}}},"./src/commands/engine/cms-engine.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{CmsEngine:()=>m});var n=o("./src/cms/run-params-helpers.ts"),s=o("./src/contentBlock/content-block-editor.ts"),r=o("./src/contentBlock/render.ts"),i=o("./src/core/index.ts"),a=o("./src/quick-dialog/quick-dialog.ts"),l=o("./src/toolbar/config/index.ts"),c=o("./src/toolbar/config-loaders/config-formats/in-page-button.ts"),d=o("./src/workflow/index.ts"),u=o("./src/workflow/toolbar-workflow-manager.ts"),p=o("./src/commands/command-link-generator.ts");class m extends i.HasLog{runParamsHelper;constructor(t){super("Cmd.Exec",t,"start"),this.runParamsHelper=new n.RunParamsHelpers(this.log)}detectParamsAndRun(t,e,o,n){const s=this.log.call("detectParamsAndRun",`${arguments.length} params`);let r;const i=!n&&o&&void 0!==o.altKey;s.add(`might cycle parameters. third is event=${i}`),i?(s.add("cycling params; event missing & eventOrSettings seems to be an event; settings assumed empty"),n=o,r=this.runParamsHelper.getParamsFromNameOrParams(e)):r={...o||{},...this.runParamsHelper.getParamsFromNameOrParams(e)},n=n||window.event;const a=this.run(t,r,n,void 0,"sxcGlobalCms.detectParamsAndRun");return s.return(a)}run(t,e,o,n,r){const i=this.log.call("run<T>",`triggeredBy: ${r}`,void 0,{context:t});let a=this.runParamsHelper.getParamsFromNameOrParams(e);a=this.runParamsHelper.expandParamsWithDefaults(a);const p=o,f=a.action;i.add(`run command '${f}'`);const g=new l.ButtonCommand(f,a),h={...new l.Button(g,g.name),...c.InPageButtonJson.toButton(a)};let b;t.button=h,i.data("button",t.button),n?.workflows?(b=new u.ToolbarWorkflowManager(this.log),b.add(n.workflows)):b=d.WorkflowHelper.getWorkflow(p?.target),t.commandWorkflow=b;const y=b.run(new d.WorkflowStepCodeArguments(f,d.WorkflowPhases.before,t));let v,x=h.code;x||(i.add("button, no code - generating code to open standard dialog"),x=m.openDialog),new l.ButtonSafe(h,t).uiActionOnly()?(i.add("UI command, no pre-flight to ensure content-block"),v=y.then((e=>d.WorkflowHelper.isCancelled(e)?Promise.resolve(null):x(t,p,"cmsEngine.run#UI command")))):(i.add("command might change data, wrap in pre-flight to ensure content-block"),v=y.then((e=>d.WorkflowHelper.isCancelled(e)?Promise.resolve(null):s.ContentBlockEditor.singleton().prepareToAddContent(t,a.useModuleList).then((()=>x(t,p,"cmsEngine.run#non UI command"))))));const w=v.then((t=>b.run(new d.WorkflowStepCodeArguments(f,d.WorkflowPhases.after,null,t)).then((()=>t))));return i.return(w)}static openDialog(t,e,o){const n=new i.Log("Cms.OpnDlg",null,`triggeredBy: ${o}`);i.Insights.add("cms","open-dialog",n);const s=new l.ButtonSafe(t.button,t),c=new p.CommandLinkGenerator(s,t,n).getLink(),d=e||window.event;return new Promise((e=>{const o=()=>{e(t),r.renderer.reloadAndReInitialize(t,"cmsEngine.openDialog")};if(s.inlineWindow())return void a.QuickDialog.singleton().showOrToggleFromToolbar(t,c,s.fullScreen(),s.dialog()).then((t=>{t&&o()}));const n=s.newWindow();if(n||d?.ctrlKey||d?.shiftKey)return e(t),m.applyLinkToButton(d,c,n?"_blank":null)?void 0:void window.open(c);window.$2sxc.totalPopup.open(c,o)}))}static applyLinkToButton(t,e,o){let n=t?.target;for(;null!=n&&"A"!==n.tagName;)n=n.parentElement;if(null==n)return!1;const s=n,r=s.href,i=s.target;return s.href=e,o&&(s.target=o),setTimeout((()=>{r?s.href=r:s.removeAttribute("href"),i?s.target=i:s.removeAttribute("target")}),100),!0}}},"./src/commands/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Actions:()=>r.Actions,CmdParHlp:()=>a.CmdParHlp,CmsEngine:()=>i.CmsEngine,Command:()=>n.Command,Commands:()=>s.Commands,ContentListActionParams:()=>r.ContentListActionParams,SharedLogic:()=>r.SharedLogic,WorkflowCommands:()=>r.WorkflowCommands,iconPrefix:()=>n.iconPrefix,tlbI18nPrefix:()=>n.tlbI18nPrefix}),o("../$2sxc/src/cms/command-names.ts"),o("./src/commands/command-code.ts");var n=o("./src/commands/command.ts"),s=o("./src/commands/commands.ts"),r=o("./src/commands/command/index.ts"),i=(o("../$2sxc/src/cms/command-params.ts"),o("./src/commands/engine/cms-engine.ts")),a=o("./src/commands/cmd-par-hlp.ts")},"./src/constants/content-block.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContentBlock:()=>n,ContentBlockIds:()=>s});class n{static cViewWithoutContent="_LayoutElement";static UseExistingTemplate=-1}const s={classes:{name:"sc-content-block"},selectors:{ofName:".sc-content-block"}}},"./src/constants/debug.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Debug:()=>s,QuickEClipboardLogId:()=>n});const n="Q-E.Clpbrd",s={isDevBuild:!0,cms:{autoDump:!1,run:!0},log(...t){console.log(...t)},parts:{commandInfo:!1,ToolbarConfigLoaderV10:!1,RuleManager:!1,CommandTippy:!1,[n]:!1,"Rnd.Rndrer":!1,"QDl.IfBrig":!1,"Cmd.Exec":!1,"Cms.Api":!1,"Q-E.Main":!1,debugObservables:!1,"Sys.Bootst":!1,"Bts.Module":!1}}},"./src/constants/dialog-paths.ts":(t,e,o)=>{"use strict";var n;o.r(e),o.d(e,{DialogPaths:()=>n}),function(t){t.quickDialog="dist/quick-dialog/",t.eavUi="dist/ng-edit/"}(n||(n={}))},"./src/constants/ids.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{IDs:()=>n});const n={cls:{scMenu:"sc-menu"},attr:{toolbar:"toolbar",toolbarData:"data-toolbar",settings:"settings",settingsData:"data-settings"},publishAllowed:"DraftOptional",sel:{scMenu:".sc-menu",tagScMenu:"ul.sc-menu"}}},"./src/constants/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{C:()=>c});var n=o("./src/constants/content-block.ts"),s=o("./src/constants/debug.ts"),r=o("./src/constants/dialog-paths.ts"),i=o("./src/constants/ids.ts"),a=o("./src/constants/toolbar.ts");const l={InstanceId:"data-cb-instance",Context:"data-edit-context",ContentBlockId:"data-cb-id"},c={ContentBlock:n.ContentBlock,DialogPaths:r.DialogPaths,IDs:i.IDs,AttrNames:l,ClsNames:{UnInitialized:"sc-uninitialized",UnAvailable:"sc-unavailable"},Toolbar:a.ToolbarConstants,Cb:n.ContentBlockIds,Debug:s.Debug,Sel:{SxcDivs:`div[${l.Context}]`}}},"./src/constants/rules.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{prefixBase64:()=>n,prefixJson64:()=>s});const n="base64:",s="json64:"},"./src/constants/toolbar.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarConstants:()=>n});const n={attrToMarkInitalized:"2sxc-tagtoolbar",attr:{full:"sxc-toolbar",hover:"sxc-toolbar-hover",disable:"data-disable-toolbar"},classes:{oldHover:"sc-element"},selectors:{ofOldHover:".sc-element"},eventNames:{onInit:"toolbar-init"}}},"./src/contentBlock/content-block-editor.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContentBlockEditor:()=>a});var n=o("./src/constants/index.ts"),s=o("./src/html/dom-tools.ts"),r=o("./src/core/index.ts"),i=o("./src/contentBlock/render.ts");class a extends r.HasLog{static singleton(){return this._singleton??(this._singleton=new a)}static _singleton;constructor(){super("Sys.CbEdit"),r.Insights.add("system","cb-editor-api",this.log)}prepareToAddContent(t,e){const o=this.log.call("prepareToAddContent");if(t.contentBlock.isCreated||!e)return o.return(Promise.resolve());const n=this.updateTemplate(t,t.contentBlock.templateId,!0);return o.return(n,"ok")}updateTemplateFromDia(t,e){const o=this.log.call("updateTemplateFromDia",`..., ${e}`),n=s.HtmlTools.isDisabled(t.sxc);o.add(`wasShowingPreview: ${n}`);const r=this.updateTemplate(t,e,!1).then((()=>{n&&i.renderer.reloadAndReInitialize(t,"contentBlockEditor.updateTemplateFromDia")}));return o.return(r)}getPreviewWithTemplate(t,e){const o=this.log.call("getPreviewWithTemplate",`..., ${e}`),s={templateId:e=e||n.C.ContentBlock.UseExistingTemplate,lang:t.app.currentLanguage,cbid:t.contentBlockReference.id,originalparameters:JSON.stringify(t.instance.parameters),edition:t.contentBlock.edition};o.data("params",s);const r=t.sxc.webApi.fetchRaw(t.sxc.webApi.url("cms/block/render",s)).then((t=>t.text()));return o.return(r)}updateTemplate(t,e,o){const n=this.log.call("updateTemplate"),s=this.saveTemplate(t,e,o).then((e=>{if(!e)return null;const o=e.replace(/[\",\']/g,"");return console&&console.log(`created content group {${o}}`),t.contentBlock.contentGroupId=o})).catch((()=>alert("error - result not ok, was not able to create ContentGroup")));return n.return(s)}saveTemplate(t,e,o){const n=this.log.call("saveTemplate"),s={templateId:e,forceCreateContentGroup:o,newTemplateChooserState:!1};n.data("params",s);const r=t.sxc.webApi.fetchJson(t.sxc.webApi.url("cms/block/template",s),void 0,"POST");return n.return(r)}}},"./src/contentBlock/render.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{renderer:()=>m});var n=o("./src/commands/index.ts"),s=o("./src/constants/index.ts"),r=o("./src/html/dom-tools.ts"),i=o("./src/core/index.ts"),a=o("./src/quick-edit/quick-e.ts"),l=o("./src/workflow/index.ts"),c=o("./src/contentBlock/content-block-editor.ts"),d=o("../$2sxc/src/dom/dom-tools.ts"),u=o("../core/plumbing/assets-loader.ts");class p extends i.HasLog{constructor(){super("Rnd.Rndrer"),i.Insights.add("system","renderer",this.log),this.log.add("constructor")}showMessage(t,e){d.DomTools.getTag(t.sxc).innerHTML=e}reloadAndReInitialize(t,e,o,r){const i=this.log.call("reloadAndReInitialize",`..., triggeredBy: ${e}, forceAjax: ${o}, preview: ${r}`,null,{context:t});return(t.commandWorkflow??l.WorkflowHelper.getDummyManager()).run(new l.WorkflowStepCodeArguments(n.WorkflowCommands.refresh,l.WorkflowPhases.before,t)).then((e=>{if(l.WorkflowHelper.isCancelled(e))return i.add("Workflow return false, will cancel and not refresh."),Promise.resolve();var n=!1;const a=window;return a.ToSic?.Sxc?.Oqtane&&a.ToSic.Sxc.Oqtane.reloadModule(t.sxc.id).then((t=>(n=t,t?i.add("Oqtane Interactive, use full page reload"):i.add("Oqtane Static, use ajaxLoad"),Promise.resolve()))).catch((t=>{console.error("Error in Oqtane.reloadModule:",t)})),!o&&!t.app.supportsAjax||n?(i.done("not ajax - reloading page"),window.location.reload(),Promise.resolve()):(i.add("is ajax, calling ajaxReload"),this.ajaxLoad(t,s.C.ContentBlock.UseExistingTemplate,r,"render.reloadAndReInitialize").then((t=>{if(window.dnn_tabVersioningEnabled){i.add("system is using tabVersioning - will inform DNN");try{window.dnn.ContentEditorManager.triggerChangeOnPageContentEvent()}catch(t){}}return i.return(t)})).catch((t=>console.log("Error in reloadAndReInitialize",t))))}))}ajaxLoad(t,e,o,n){const s=this.log.call("ajaxLoad",`triggeredBy: ${n}`);return s.add("starting promise chain"),c.ContentBlockEditor.singleton().getPreviewWithTemplate(t,e).then((e=>{s.add("get preview done, let's replace the content"),this.replaceContentBlock(t,e,o)})).then((()=>{s.add("replace done, resetting quickE"),a.QuickE.singleton().reset(),s.done()}))}replaceContentBlock(t,e,o){const n=this.log.call("replaceContentBlock");try{try{const n=JSON.parse(e),s=n.Resources.map((t=>"js"===t.Type?`<script type="text/javascript" src="${t.Url}"><\/script>`:"css"===t.Type?`<link rel="stylesheet" href="${t.Url}">`:void 0)).filter((t=>null!=t)).join("\n"),a=i.NoJQ.domFromString(s),l=i.NoJQ.domFromString(n.Html)[0];i.NoJQ.append(document.head,a,!1),o&&r.HtmlTools.disable(l),i.NoJQ.replaceWith(d.DomTools.getTag(t.sxc),l,!1);const c=[...a.filter((t=>"script"===t.tagName.toLocaleLowerCase())),...Array.from(l.querySelectorAll("script"))];u.AssetsLoader.runScripts(c,void 0)}catch{const n=i.NoJQ.domFromString(e)[0];o&&r.HtmlTools.disable(n),i.NoJQ.replaceWith(d.DomTools.getTag(t.sxc),n,!0)}t.sxc.recreate(!0)}catch(t){console.log("Error while rendering template:",t)}n.done()}}const m=new p},"./src/context/bundles/context-bundle-button.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextComplete:()=>l});var n=o("../$2sxc/src/sxc/sxc.ts"),s=o("./src/plumbing/index.ts"),r=o("./src/sxc/sxc-tools.ts"),i=o("./src/context/bundles/context-bundle-toolbar.ts"),a=o("../$2sxc/src/dom/dom-tools.ts");class l extends i.ContextBundleToolbar{_isCtxComplete=!0;button;static getRule(t){return t.toolbar?.settings?._rules?.find(t.button.id)}commandWorkflow;constructor(t,e){super(t,e)}static findContext(t,e){let o,s=null;n.Sxc.is(t)?o=t:"number"==typeof t?o=window.$2sxc(t,e):(o=window.$2sxc(t),s=a.DomTools.getContainerTag(t));const r=l.getContextInstance(o,s);return r.sxc=o,r}static contextCopy(t,e){const o=l.findContext(t,e);o.sxc=null;const n=s.Obj.DeepClone(o);return o.sxc=window.$2sxc(t),n}static getContextInstance(t,e){const o=r.SxcTools.getEditContext(t,e);return new l(o,t)}static is(t){return t._isCtxComplete}}},"./src/context/bundles/context-bundle-content.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextBundleContent:()=>r});var n=o("./src/context/index.ts"),s=o("./src/context/html-attribute/parts/content-block.ts");class r extends n.ContextBundleInstance{item;contentBlockReference;contentBlock;constructor(t,e){super(t,e),this.item=new n.ContextOfItem(t),this.contentBlockReference=new s.ContentBlockReference(t.contentBlockReference),this.contentBlock=new n.ContextOfContentBlock(t)}}},"./src/context/bundles/context-bundle-instance.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextBundleInstance:()=>i});var n=o("./src/context/parts/index.ts"),s=o("./src/context/parts/context-app.ts"),r=o("./src/context/parts/context-ui.ts");class i{sxc;instance;app;ui;page;system;tenant;user;_isContext=!0;constructor(t,e){this.app=new s.ContextOfApp(t,e),this.instance=new n.ContextOfInstance(t,e),this.user=new n.ContextOfUser(t),this.page=new n.ContextOfPage(t,e),this.system=new n.ContextOfSystem(t),this.tenant=new n.ContextOfTenant(t),this.ui=new r.ContextOfUi(t)}static is(t){const e=t;return void 0!==e.sxc&&void 0!==e.instance}}},"./src/context/bundles/context-bundle-toolbar.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextBundleToolbar:()=>s});var n=o("./src/context/bundles/index.ts");class s extends n.ContextBundleContent{toolbar;constructor(t,e){super(t,e)}forButton(t){const e={...this};return e.button=t,e}}},"./src/context/bundles/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextBundleContent:()=>r.ContextBundleContent,ContextBundleInstance:()=>s.ContextBundleInstance,ContextBundleToolbar:()=>i.ContextBundleToolbar,ContextComplete:()=>n.ContextComplete});var n=o("./src/context/bundles/context-bundle-button.ts"),s=o("./src/context/bundles/context-bundle-instance.ts"),r=o("./src/context/bundles/context-bundle-content.ts"),i=o("./src/context/bundles/context-bundle-toolbar.ts")},"./src/context/html-attribute/edit-context-root.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AttrJsonEditContext:()=>n});class n{Environment;User;Language;contentBlockReference;contentBlock;error;Ui;jsApi}},"./src/context/html-attribute/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AttrJsonEditContext:()=>s.AttrJsonEditContext,AttrJsonEntity:()=>l.AttrJsonEntity,AttrJsonEnvironment:()=>r.AttrJsonEnvironment,AttrJsonLanguage:()=>a.AttrJsonLanguage,AttrJsonUi:()=>c.AttrJsonUi,AttrJsonUser:()=>d.AttrJsonUser,ContentBlockReference:()=>n.ContentBlockReference,ContextErrorJsonAndObj:()=>i.ContextErrorJsonAndObj,ContextProblems:()=>i.ContextProblems});var n=o("./src/context/html-attribute/parts/content-block.ts"),s=(o("./src/context/html-attribute/parts/content-group.ts"),o("./src/context/html-attribute/edit-context-root.ts")),r=o("./src/context/html-attribute/parts/environment.ts"),i=o("./src/context/html-attribute/parts/error.ts"),a=o("./src/context/html-attribute/parts/language.ts"),l=o("./src/context/html-attribute/parts/parameters-entity.ts"),c=o("./src/context/html-attribute/parts/ui.ts"),d=o("./src/context/html-attribute/parts/user.ts")},"./src/context/html-attribute/parts/content-block.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContentBlockReference:()=>r});var n=o("../core/index.ts"),s=o("./src/constants/ids.ts");class r{publishingMode=s.IDs.publishAllowed;id=n.NumberNotDefinedHuge;parentGuid=null;parentField=null;parentIndex=0;partOfPage=!1;constructor(t){Object.assign(this,t)}}},"./src/context/html-attribute/parts/content-group.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/context/html-attribute/parts/environment.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AttrJsonEnvironment:()=>n});class n{WebsiteId;WebsiteUrl;PageId;PageUrl;parameters;InstanceId;SxcVersion;SxcRootUrl;IsEditable}},"./src/context/html-attribute/parts/error.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextErrorJsonAndObj:()=>n,ContextProblems:()=>s});class n{type;problems}class s{severity;scope;code;message;link}},"./src/context/html-attribute/parts/language.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AttrJsonLanguage:()=>n});class n{Current;Primary;All}},"./src/context/html-attribute/parts/parameters-entity.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AttrJsonEntity:()=>n});class n{Key;Value}},"./src/context/html-attribute/parts/ui.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AttrJsonUi:()=>n});class n{AutoToolbar;Form}},"./src/context/html-attribute/parts/user.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{AttrJsonUser:()=>n});class n{CanDevelop;CanAdmin;canSwitchEdition}},"./src/context/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContentAppUnifiedInCtxAndAttr:()=>n.ContentAppUnifiedInCtxAndAttr,ContentBlockUnifiedInCtxAndAttr:()=>r.ContentBlockUnifiedInCtxAndAttr,ContextBundleContent:()=>g.ContextBundleContent,ContextBundleInstance:()=>f.ContextBundleInstance,ContextBundleToolbar:()=>u.ContextBundleToolbar,ContextComplete:()=>s.ContextComplete,ContextOfApp:()=>n.ContextOfApp,ContextOfContentBlock:()=>r.ContextOfContentBlock,ContextOfInstance:()=>i.ContextOfInstance,ContextOfItem:()=>a.ContextOfItem,ContextOfPage:()=>l.ContextOfPage,ContextOfSystem:()=>c.ContextOfSystem,ContextOfTenant:()=>d.ContextOfTenant,ContextOfUi:()=>p.ContextOfUi,ContextOfUser:()=>m.ContextOfUser});var n=o("./src/context/parts/context-app.ts"),s=o("./src/context/bundles/context-bundle-button.ts"),r=o("./src/context/parts/context-content-block.ts"),i=o("./src/context/parts/context-instance.ts"),a=o("./src/context/parts/context-item.ts"),l=o("./src/context/parts/context-page.ts"),c=o("./src/context/parts/context-system.ts"),d=o("./src/context/parts/context-tenant.ts"),u=o("./src/context/bundles/context-bundle-toolbar.ts"),p=o("./src/context/parts/context-ui.ts"),m=o("./src/context/parts/context-user.ts"),f=o("./src/context/bundles/context-bundle-instance.ts"),g=o("./src/context/bundles/context-bundle-content.ts")},"./src/context/parts/context-app.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContentAppUnifiedInCtxAndAttr:()=>n,ContextOfApp:()=>s});class n{appName}class s extends n{isContent=!0;settingsId=null;resourcesId=null;appPath;hasContent;supportsAjax=!1;zoneId;id;currentLanguage;primaryLanguage;allLanguages;constructor(t,e){if(super(),t.contentBlock){const e=t.contentBlock;this.id=e.AppId,this.isContent=e.IsContent??!0,this.resourcesId=e.AppResourcesId??null,this.settingsId=e.AppSettingsId??null,this.appPath=e.AppUrl,this.hasContent=e.HasContent,this.supportsAjax=e.SupportsAjax??!1,this.zoneId=e.ZoneId,this.appName=e.appName}e&&e.ctx&&(this.id=this.id??e.ctx.appId,this.zoneId=this.id??e.ctx.zoneId),t.Language&&(this.currentLanguage=t.Language.Current,this.primaryLanguage=t.Language.Primary,this.allLanguages=t.Language.All)}}},"./src/context/parts/context-content-block.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContentBlockUnifiedInCtxAndAttr:()=>n,ContextOfContentBlock:()=>s});class n{templateIsShared;viewName;renderMs;renderLightspeed;viewSwitchDisabled}class s extends n{isCreated;isList;queryId;queryName;queryInfo;templateId;contentTypeId;contentGroupId;templatePath;edition;editions;constructor(t){super();const e=t.contentBlock;e&&(this.isCreated=e.IsCreated,this.isList=e.IsList,this.queryId=e.QueryId,this.queryName=e.queryName,this.queryInfo=e.queryInfo,this.templateId=e.TemplateId,this.templatePath=e.TemplatePath,this.templateIsShared=e.templateIsShared,this.edition=e.Edition??null,this.editions=e.editions??null,this.contentTypeId=e.ContentTypeName,this.contentGroupId=e.Guid,this.viewName=e.viewName,this.renderMs=e.renderMs,this.renderLightspeed=e.renderLightspeed,this.viewSwitchDisabled=e.viewSwitchDisabled)}}},"./src/context/parts/context-instance.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextOfInstance:()=>r});var n=o("../core/index.ts"),s=o("./src/constants/index.ts");class r{id;isEditable=!1;allowPublish=!0;sxcVersion=n.SxcVersion;parameters=null;sxcRootUrl="";constructor(t,e){t.Environment&&(this.id=t.Environment.InstanceId,this.isEditable=t.Environment.IsEditable??!1,this.sxcVersion=t.Environment.SxcVersion??n.SxcVersion,this.parameters=t.Environment.parameters,this.sxcRootUrl=t.Environment.SxcRootUrl??""),this.id||(this.id=e?.ctx?.moduleId??-2742),t.contentBlockReference&&(this.allowPublish=t.contentBlockReference.publishingMode===s.C.IDs.publishAllowed)}}},"./src/context/parts/context-item.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextOfItem:()=>n});class n{constructor(t){}}},"./src/context/parts/context-page.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextOfPage:()=>n});class n{id;constructor(t,e){t.Environment&&(this.id=t.Environment.PageId),this.id=this.id??e?.ctx?.pageId??window.$2sxc.env.page()??-2742}}},"./src/context/parts/context-system.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextOfSystem:()=>n});class n{error;problems;constructor(t){this.problems=t.error?.problems,t.error&&(this.error=t.error.type)}}},"./src/context/parts/context-tenant.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextOfTenant:()=>n});class n{constructor(t){t.Environment}}},"./src/context/parts/context-ui.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextOfUi:()=>n});class n{autoToolbar;constructor(t){t.Ui&&(this.autoToolbar=t.Ui.AutoToolbar)}}},"./src/context/parts/context-user.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextOfUser:()=>s});var n=o("./src/context/html-attribute/index.ts");class s extends n.AttrJsonUser{constructor(t){super(),t&&t.User&&(this.CanDevelop=t.User.CanDevelop,this.CanAdmin=t.User.CanAdmin,this.canSwitchEdition=t.User.canSwitchEdition)}}},"./src/context/parts/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContentAppUnifiedInCtxAndAttr:()=>n.ContentAppUnifiedInCtxAndAttr,ContentBlockUnifiedInCtxAndAttr:()=>s.ContentBlockUnifiedInCtxAndAttr,ContextOfApp:()=>n.ContextOfApp,ContextOfContentBlock:()=>s.ContextOfContentBlock,ContextOfInstance:()=>r.ContextOfInstance,ContextOfItem:()=>i.ContextOfItem,ContextOfPage:()=>a.ContextOfPage,ContextOfSystem:()=>l.ContextOfSystem,ContextOfTenant:()=>c.ContextOfTenant,ContextOfUi:()=>d.ContextOfUi,ContextOfUser:()=>u.ContextOfUser});var n=o("./src/context/parts/context-app.ts"),s=o("./src/context/parts/context-content-block.ts"),r=o("./src/context/parts/context-instance.ts"),i=o("./src/context/parts/context-item.ts"),a=o("./src/context/parts/context-page.ts"),l=o("./src/context/parts/context-system.ts"),c=o("./src/context/parts/context-tenant.ts"),d=o("./src/context/parts/context-ui.ts"),u=o("./src/context/parts/context-user.ts")},"./src/core/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ApiUrlRoots:()=>n.ApiUrlRoots,AppApiMap:()=>n.AppApiMap,AppApiMarker:()=>n.AppApiMarker,Attributes:()=>n.Attributes,C:()=>n.C,HasLog:()=>n.HasLog,HeaderNames:()=>n.HeaderNames,Insights:()=>n.Insights,Log:()=>n.Log,LogCall:()=>n.LogCall,LogEntry:()=>n.LogEntry,LogEntryOptions:()=>n.LogEntryOptions,NoJQ:()=>n.NoJQ,NumberNotDefinedHuge:()=>n.NumberNotDefinedHuge,Obj:()=>n.Obj,SxcApiUrlRoot:()=>n.SxcApiUrlRoot,SxcVersion:()=>n.SxcVersion,ToSxcName:()=>n.ToSxcName,flattenSlashes:()=>n.flattenSlashes});var n=o("../core/index.ts")},"./src/dnn/dnn-08.00.04.ts":()=>{"use strict";(()=>{if(null==window.$)return;const t=window.$.fn.attr;window.$.fn.attr=function(){const e=t.apply(this,arguments);return"class"!==arguments[0]||"string"!=typeof e||-1===e.search("DnnModule-2sxc ")?e:e.replace("DnnModule-2sxc ","")+" DnnModule-2sxc"}})()},"./src/dnn/index.ts":(t,e,o)=>{"use strict";o.r(e),o("./src/dnn/dnn-08.00.04.ts")},"./src/entity-manipulation/item-commands.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{contentItems:()=>s});var n=o("./src/i18n/index.ts");let s={delete:(t,e,o,s)=>{if(!confirm((0,n.translate)("Delete.Confirm").replace("{id}",String(e)).replace("{title}",s)))return Promise.resolve();const r={zoneId:t.app.zoneId,appId:t.app.id};return t.sxc.webApi.fetchRaw(t.sxc.webApi.url(`app/auto/content/any/${o}`,r),void 0,"DELETE").then((t=>{if(t.status>=200&&t.status<300)location.reload();else if(t.status>=400&&t.status<500){const e=(0,n.translate)("Delete.ErrCheckConsole");401===t.status&&alert((0,n.translate)("Delete.ErrPermission")+e),400===t.status&&alert((0,n.translate)("Delete.ErrInUse")+e)}})).catch((t=>{console.log(t)}))}}},"./src/html/dom-tools.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{HtmlTools:()=>r});var n=o("./src/constants/index.ts"),s=o("../$2sxc/src/dom/dom-tools.ts");class r{static disable(t){t.setAttribute(n.C.Toolbar.attr.disable,"true")}static isDisabled(t){return!!s.DomTools.getTag(t).getAttribute(n.C.Toolbar.attr.disable)}static getFirstAttribute(t,e,o){return r.tryGetAttrText(t,e)||r.tryGetAttrText(t,o)||"{}"}static tryGetAttrText(t,e){const o=t.attributes.getNamedItem(e);return o&&o.textContent}static addClasses(t,e){if(!e)return;e.indexOf(",")&&(e=e.replace(","," "));const o=e.split(" ");for(let e=0;e<o.length;e++)o[e]&&t.classList.add(o[e])}}},"./src/i18n/2sxc.translate.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{translate:()=>s});var n=o("./src/i18n/index.ts");function s(t){return n.Translator.translate(t)}},"./src/i18n/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Translator:()=>n.Translator,primaryLanguage:()=>r,translate:()=>s.translate,translations:()=>i,translationsPath:()=>a});var n=o("./src/i18n/translator.ts"),s=o("./src/i18n/2sxc.translate.ts");const r="en",i=["en","de","fr","fa","it","uk","nl"],a="dist/inpage/i18n/{{lng}}.js"},"./src/i18n/translator.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Translator:()=>f});var n=o("./node_modules/i18next/dist/esm/i18next.js"),s=o("./node_modules/i18next-http-backend/esm/index.js"),r=o("./node_modules/loc-i18next/index.js"),i=o.n(r),a=o("./src/i18n/index.ts"),l=o("./src/constants/ids.ts"),c=o("./src/context/bundles/index.ts"),d=o("./src/core/index.ts"),u=o("./src/sxc/sxc-tools.ts");let p;class m extends d.HasLog{i18n;locReady=!1;initialized=!1;constructor(){super("Sys.Trnslt"),d.Insights.add("system","translator",this.log),this.i18n=n.default}translate(t){return this.initialized&&this.i18n.isInitialized&&this.i18n.t(t)||t}initManager(t){const e=this.log.call("initManager");if(this.initialized)return e.done("already initialized");const o=t.context||this.tryToFindAContext();e.add("will initialize");const n=window.$2sxc.env.uiRoot();this.i18n.use(s.default).init({lng:o.app.currentLanguage.substr(0,2),fallbackLng:a.primaryLanguage,preload:[a.primaryLanguage],backend:{loadPath:(0,d.flattenSlashes)(n+a.translationsPath)}},(()=>this.initLoc())),this.initialized=!0,e.done()}tryToFindAContext(){const t=this.log.call("tryToFindAContext");t.add("no context found, will seek");const e=document.querySelector("div[data-cb-id]");this.initialized=!0;const o=window.$2sxc(e);this.initialized=!1;const n=u.SxcTools.getEditContext(o),s=new c.ContextComplete(n,o);return s.sxc=o,t.return(s)}initLoc(){const t=this.log.call("initLoc");p=i().init(n.default),this.locReady=!0,this.autoTranslateMenus(),t.done()}autoTranslateMenus(){const t=this.log.call("autoTranslateMenus");if(!this.locReady)return t.done("loc not ready");const e=document.querySelectorAll(l.IDs.sel.tagScMenu);p(l.IDs.sel.tagScMenu);const o=document.querySelectorAll(".sc-i18n");p(".sc-i18n"),t.add(`found ${e.length} menus and ${o.length} buttons`),t.done()}}const f=new m},"./src/manage/dialog-core-params.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{DialogCoreParams:()=>n});class n{zoneId;appId;mid;cbid;partOfPage;publishing;apps;dialogSettings;constructor(t,e){const o=t.sxc?.ctx;if(!0===o?.complete){this.zoneId=o.zoneId,this.appId=o.appId,null!=o.moduleId&&(this.mid=o.moduleId);const t=o?.blockId??this.mid;t&&(this.cbid=t)}else this.zoneId=o?.zoneId??t.app.zoneId,this.appId=o?.appId??t.app.id,this.mid=o?.moduleId??t.instance.id,this.cbid=o?.blockId??t.contentBlockReference.id;this.partOfPage=e,e&&(this.publishing=t.contentBlockReference.publishingMode),t.button?.command?.params?.apps&&(this.apps=t.button.command.params.apps),this.dialogSettings=t.button?.command?.params?.dialogSettings,this.dialogSettings||delete this.dialogSettings}}},"./src/manage/edit-manager.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{EditManager:()=>l});var n=o("./src/cms/sxc-global-cms.ts"),s=o("./src/context/bundles/context-bundle-button.ts"),r=o("./src/plumbing/index.ts"),i=o("./src/toolbar/index.ts"),a=o("./src/toolbar/render/toolbar-renderer.ts");class l extends r.HasLog{editContext;context;constructor(t,e,o){super("Edit.Mng",o,"start"),this.editContext=t,this.context=e}run(t,e,o,r){const i=this.log.call("run<T>",`triggeredBy: ${r}`);if(t.context||t.workflows)throw"You are calling '.manage.run(...)' with a parameter 'context' or workflows. You should probably be calling the new '.cms.run(...)' instead.";const a=s.ContextComplete.findContext(this.context.sxc);return i.done(),(new n.SxcGlobalCms).runInternal(a,t,e,o,"editManager.run")}getButton(t,e){return this.context.button=i.ToolbarManager.singleton().getLoader("getButton").groups.convertToButton(t,{},{},{}),new a.ToolbarRenderer(this.context).button.render(this.context,e).outerHTML}getToolbar(t,e){const o=Array.isArray(t)?t:{...t},n={settings:{...t.settings,...e},toolbar:o},s=i.ToolbarManager.singleton().loadConfig(this.context,n);return this.context.toolbar=s,new a.ToolbarRenderer(this.context).render()}_isEditMode=()=>this.editContext.Environment.IsEditable??!1;_updateContentGroupGuid(t,e){t.contentBlock.contentGroupId=e,this.editContext.contentBlock.Guid=e}}},"./src/manage/session-state-handler.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SessionStateHandler:()=>s});var n=o("./src/core/index.ts");class s extends n.HasLog{key;constructor(t){super("Ses.State"),this.key=t,n.Insights.add("system","session-state "+t,this.log)}set(t){this.log.add(`state '${this.key}' set(${t})`);try{sessionStorage.setItem(this.key,t)}catch{}}remove(){this.log.add(`state '${this.key}' remove()`);try{sessionStorage.removeItem(this.key)}catch{}}get(){const t=function(t){try{const e=sessionStorage.getItem(t);return JSON.parse(e)}catch{return null}}(this.key);this.log.add(`state '${this.key}' get() = '${t}'`);try{return t}catch{}}}},"./src/manage/sxc-global-manage.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcGlobalManage:()=>l});var n=o("./src/context/index.ts"),s=o("./src/sxc/sxc-cms-real.ts"),r=o("./src/sxc/sxc-tools.ts"),i=o("./src/toolbar/index.ts"),a=o("./src/manage/edit-manager.ts");class l{initInstance(t){try{const e=n.ContextComplete.findContext(t),o=r.SxcTools.getEditContext(t);t.manage=new a.EditManager(o,e),t.cms=new s.SxcCmsReal(t)}catch(t){console.error("error in 2sxc - will log but not throw",t)}}_toolbarManager=i.ToolbarManager.singleton()}},"./src/plumbing/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ApiUrlRoots:()=>n.ApiUrlRoots,AppApiMap:()=>n.AppApiMap,AppApiMarker:()=>n.AppApiMarker,Attributes:()=>n.Attributes,C:()=>n.C,HasLog:()=>n.HasLog,HeaderNames:()=>n.HeaderNames,Insights:()=>n.Insights,Log:()=>n.Log,LogCall:()=>n.LogCall,LogEntry:()=>n.LogEntry,LogEntryOptions:()=>n.LogEntryOptions,NoJQ:()=>n.NoJQ,NumberNotDefinedHuge:()=>n.NumberNotDefinedHuge,Obj:()=>n.Obj,SxcApiUrlRoot:()=>n.SxcApiUrlRoot,SxcVersion:()=>n.SxcVersion,ToSxcName:()=>n.ToSxcName,flattenSlashes:()=>n.flattenSlashes});var n=o("../core/index.ts")},"./src/quick-dialog/iframe-bridge.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{IFrameBridge:()=>d});var n=o("./src/contentBlock/content-block-editor.ts"),s=o("./src/contentBlock/render.ts"),r=o("./src/context/bundles/context-bundle-button.ts"),i=o("./src/core/index.ts"),a=o("./src/quick-dialog/quick-dialog.ts"),l=o("./src/quick-dialog/quick-dialog-config.ts"),c=o("../$2sxc/src/dom/dom-tools.ts");class d extends i.HasLog{constructor(t){super("QDl.IfBrig",t.log)}sxcCacheKey;dialogName;instanceSxc;tagModule;uncachedSxc(){if(!this.instanceSxc)throw"can't find sxc-instance of IFrame, probably it wasn't initialized yet";return this.instanceSxc.recreate(!0)}getContext(){return this.log.call("getContext").return(r.ContextComplete.findContext(this.uncachedSxc()))}getAdditionalDashboardConfig(){return this.log.call("getAdditionalDashboardConfig").return(l.QuickDialogConfig.fromContext(this.getContext()))}hide(){a.QuickDialog.singleton().setVisible(!1)}run(t){this.uncachedSxc().manage.run(t,void 0,void 0,"iframeBridge.run")}cancel(){a.QuickDialog.singleton().cancel(this)}showMessage(t){const e=this.log.call("showMessage");s.renderer.showMessage(this.getContext(),`<p class="no-live-preview-available">${t}</p>`),this.scrollToTarget(this.tagModule),e.done()}reloadAndReInit(){const t=this.log.call("reloadAndReInit");return this.changed=!1,t.done(),s.renderer.reloadAndReInitialize(this.getContext(),"iframeBridge.reloadAndReInit",!0,!0).then((()=>(t.add("scrollToTarget"),this.scrollToTarget(this.tagModule)))).then((()=>(t.add("getAdditionalDashboardConfig"),Promise.resolve(this.getAdditionalDashboardConfig()))))}setTemplate(t,e,o){const r=this.log.call("setTemplate",`tid: ${t}, tname: ${e}, final: ${o}`);this.changed=!0;const i=this.getAdditionalDashboardConfig(),l=this.getContext(),c=i.isContent||i.supportsAjax;c||this.showMessage(`refreshing <b>${e}</b>...`);let d=o||!c?n.ContentBlockEditor.singleton().updateTemplateFromDia(l,t):s.renderer.ajaxLoad(l,t,!0,"iframeBridge.setTemplate");return o&&(d=d.then((()=>a.QuickDialog.singleton().setVisible(!1)))),d=c?d.then((()=>this.scrollToTarget(this.tagModule))):d.then((()=>window.parent.location.reload())),r.return(d.then((()=>c)))}changed=!1;setup(t,e){const o=this.log.call("setup");o.data("rewire with sxc: ",t),o.data("dialogName: ",e),this.changed=!1,this.instanceSxc=t;const n=c.DomTools.getTag(t);o.data("tag: ",n),this.tagModule=n?.parentElement,this.sxcCacheKey=t.cacheKey,e&&(this.dialogName=e),o.done()}isConfiguredFor(t,e){const o=this.log.call("isConfiguredFor",`id:${t}, dialog:${e}`),n=this.sxcCacheKey===t&&this.dialogName===e;return o.return(n)}scrollToTarget(t){const e=this.log.call("scrollToTarget");i.NoJQ.offset(t).top,e.done()}}},"./src/quick-dialog/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{IFrameBridge:()=>s.IFrameBridge,QuickDialog:()=>r.QuickDialog,QuickDialogConfig:()=>i.QuickDialogConfig,QuickDialogContainer:()=>a.QuickDialogContainer,cancelled:()=>l.cancelled,cbId:()=>l.cbId,urlParams:()=>n.urlParams});var n=o("../connect-parts/inpage-quick-dialog/index.ts"),s=o("./src/quick-dialog/iframe-bridge.ts"),r=o("./src/quick-dialog/quick-dialog.ts"),i=o("./src/quick-dialog/quick-dialog-config.ts"),a=o("./src/quick-dialog/quick-dialog-container.ts"),l=o("./src/quick-dialog/state.ts");o("./src/quick-dialog/quick-dialog.css")},"./src/quick-dialog/quick-dialog-config.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{QuickDialogConfig:()=>n});class n{appId;isContent;isInnerContent;hasContent;isList;templateId;contentTypeId;supportsAjax;debug;static fromContext(t){const e=new n;return e.appId=t.app.id,e.isContent=t.app.isContent,e.isInnerContent=t.instance.id!==t.contentBlockReference.id,e.hasContent=t.app.hasContent,e.isList=t.contentBlock.isList,e.templateId=t.contentBlock.templateId,e.contentTypeId=t.contentBlock.contentTypeId,e.supportsAjax=t.app.supportsAjax,e.debug=window.$2sxc.debug.load,e}}},"./src/quick-dialog/quick-dialog-container.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{QuickDialogContainer:()=>l});var n=o("./src/quick-dialog/index.ts"),s=o("./src/core/index.ts");const r="inpage-frame-wrapper",i="iframe",a=`<div class="${r}"><div class="inpage-frame"></div></div>`;class l extends s.HasLog{constructor(t){super("QDl.Contnr",t.log)}isFullscreen=!1;resizeWatcher=null;getOrCreate(){return document.querySelector(`.${r}`)??this.buildContainerAndIFrame()}buildContainerAndIFrame(){const t=this.log.call("buildContainerAndIFrame"),e=s.NoJQ.domFromString(a)[0];document.querySelectorAll("#personaBar-iframe").length>0&&e.classList.add("persona-bar-visible");const o=document.createElement(i);o.style.cssText="color-scheme: auto;";const r=function(t,e){const o=e.log.call("build");o.data("prototype",n.IFrameBridge.prototype);const s=t;return s.bridge=new n.IFrameBridge(e),o.data("extensions",s.bridge),o.return(s)}(o,this);return e.querySelector(".inpage-frame").append(r),document.body.append(e),this.watchForResize(e),t.return(e,"ok")}getIFrame(t){return t||(t=this.getOrCreate()),t.querySelector(i)}setSize(t){const e=this.log.call("setSize");this.getOrCreate().style.minHeight=t?"100%":"225px",this.isFullscreen=t,e.done()}watchForResize(t){if(this.resizeWatcher)return;const e=this.log.call("watchForResize");this.resizeWatcher=window.setInterval((()=>{try{const o=this.getIFrame(t);if(!o)return void e.onlyAddIfNew("no iframe");const n=o.contentDocument.body.offsetHeight;if(o.previousHeight===n)return void e.onlyAddIfNew("no height change");o.style.minHeight=t.style.minHeight,o.style.height=n+"px",o.previousHeight=n,this.isFullscreen&&(o.style.height="100%",o.style.position="absolute"),e.onlyAddIfNew("changed to "+n)}catch(t){e.add("error",t)}}),200),e.return(null,"watcher added")}}},"./src/quick-dialog/quick-dialog.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{QuickDialog:()=>l});var n=o("./src/constants/index.ts"),s=o("./src/core/index.ts"),r=o("./src/quick-dialog/quick-dialog-container.ts"),i=o("./src/quick-dialog/state.ts");let a=null;class l extends s.HasLog{static singleton(){return this._singleton??(this._singleton=new l)}static _singleton;container;constructor(){super("Qdl.Managr"),s.Insights.add("quick-dialog","manager",this.log),this.container=new r.QuickDialogContainer(this)}isVisible(){return null!=a}setVisible(t){const e=this.log.call("setVisible"),o=this.container.getOrCreate();o.classList.toggle("dia-select",t),this.rememberDialogState(this.container.getIFrame(o),t),a=t?this.container.getIFrame():null,e.done()}showOrToggleFromToolbar(t,e,o,n){const s=this.log.call("showOrToggleFromToolbar",`ctx, url: '${e}', isFullScreen:${o}, name:'${n}'`);this.container.setSize(o);const r=this.container.getIFrame();if(this.isVisible()){s.add("is already visible");const e=n&&a&&a.bridge.isConfiguredFor(t.sxc.cacheKey,n)?this.promise:null;if(this.cancel(a.bridge),e)return s.return(e,"just toggle off")}const i=this.setUrlToQuickDialog(e);return r.bridge.setup(t.sxc,n),r.setAttribute("src",i),r.contentWindow&&r.contentWindow.reboot&&r.contentWindow.reboot(),this.setVisible(!0),s.return(this.promiseRestart(),"restart")}cancel(t){const e=this.log.call("cancel");this.setVisible(!1),i.cancelled.set("true"),this.resolvePromise(t.changed),e.done()}rememberDialogState(t,e){const o=this.log.call("rememberDialogState");if(o.add(`qDialog persistDia(..., ${e})`),e){const e=t.bridge.getContext().contentBlockReference.id.toString();return o.add(`contentBlockId: ${e})`),o.return(i.cbId.set(e))}return o.return(i.cbId.remove(),"remove")}promise;resolvePromise;promiseRestart(){return this.promise=new Promise((t=>this.resolvePromise=t)),this.promise}setUrlToQuickDialog(t){const e=this.log.call("setUrlToQuickDialog",t);return t=t.replace(n.C.DialogPaths.eavUi,n.C.DialogPaths.quickDialog),e.return(t)}}},"./src/quick-dialog/state.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{cancelled:()=>r,cbId:()=>s});var n=o("./src/manage/session-state-handler.ts");let s=new n.SessionStateHandler("dia-cbid"),r=new n.SessionStateHandler("cancelled-dialog")},"./src/quick-edit/context-for-lists.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ContextForLists:()=>s});var n=o("./src/quick-edit/index.ts");class s{parent;parentGuid;field;type;guid;apps;max;appList;static getFromDom(t){const e=JSON.parse(t.getAttribute(n.QeSelectors.blocks.cb.context)||null)||{};return e.appList=[],null!=e&&"string"==typeof e.apps&&e.apps.length>1&&(e.appList=e.apps.split(",").map((t=>t.trim())).filter((t=>!!t))),e}}},"./src/quick-edit/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ModifierBase:()=>s.ModifierBase,ModifierContentBlock:()=>a.ModifierContentBlock,ModifierDnnModule:()=>c.ModifierDnnModule,ModifierDnnModuleInternal:()=>d.ModifierDnnModuleInternal,PositionCoordinates:()=>l.PositionCoordinates,Positioning:()=>u.Positioning,QeSelectors:()=>f.QeSelectors,QuickE:()=>p.QuickE,QuickEClipboard:()=>m.QuickEClipboard,QuickEditConfig:()=>i.QuickEditConfig,QuickEditConfigButtons:()=>i.QuickEditConfigButtons,QuickEditConfigEnableAuto:()=>i.QuickEditConfigEnableAuto,QuickEditConfigRoot:()=>i.QuickEditConfigRoot,QuickEditOverlay:()=>r.QuickEditOverlay,Selection:()=>n.Selection});var n=o("./src/quick-edit/selection.ts"),s=o("./src/quick-edit/modifier-base.ts"),r=o("./src/quick-edit/quick-e-overlays.ts"),i=o("./src/quick-edit/quick-e-configuration.ts"),a=o("./src/quick-edit/modifier-content-block.ts"),l=o("./src/quick-edit/position-coordinates.ts"),c=o("./src/quick-edit/modifier-dnn-module.ts"),d=o("./src/quick-edit/modifier-dnn-module-internal.ts"),u=o("./src/quick-edit/positioning.ts"),p=o("./src/quick-edit/quick-e.ts"),m=o("./src/quick-edit/quick-e-clipboard.ts"),f=o("./src/quick-edit/selectors-instance.ts");o("./src/quick-edit/quickE.scss")},"./src/quick-edit/modifier-base.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ModifierBase:()=>s});var n=o("./src/core/index.ts");class s extends n.HasLog{constructor(t){super(t)}}},"./src/quick-edit/modifier-content-block-internal.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ModifierContentBlockInstance:()=>i});var n=o("./src/core/index.ts"),s=o("./src/toolbar/toolbar-manager.ts"),r=o("./src/i18n/index.ts");class i extends n.HasLog{sxcInstance;constructor(t,e){super("QE.MdCbIn",t.log),this.sxcInstance=e}create(t,e,o,r,i,a){if(!i)return alert("can't add content-block as we couldn't find the list"),Promise.resolve();const l=i.querySelectorAll("div.sc-content-block");o>l.length&&(o=l.length);const c={parentId:t,field:e,index:o,app:r,guid:a},d=this.sxcInstance.webApi.fetchJson(this.sxcInstance.webApi.url("cms/block/block",c),void 0,"POST").then((t=>{const e=n.NoJQ.domFromString(t)[0];l.length>0&&o>0?l[l.length>o-1?o-1:l.length-1].after(e):i.prepend(e),window.$2sxc(e),s.ToolbarManager.singleton().buildModule(e)}));return Promise.resolve(d)}move(t,e,o,n){const s={parent:t,fields:e,index:o,toIndex:n},r=this.sxcInstance.webApi.fetchRaw(this.sxcInstance.webApi.url("cms/list/move",s),void 0,"POST").then((()=>{console.log("done moving!"),window.location.reload()}));return Promise.resolve(r)}delete(t){if(!confirm((0,r.translate)("QuickInsertMenu.ConfirmDelete")))return null;const e={parent:t.parentGuid,fields:t.field,index:t.index},o=this.sxcInstance.webApi.fetchRaw(this.sxcInstance.webApi.url("cms/list/Delete",e),void 0,"DELETE").then((()=>{console.log("done deleting!"),window.location.reload()}));return Promise.resolve(o)}}},"./src/quick-edit/modifier-content-block.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ModifierContentBlock:()=>a});var n=o("./src/quick-edit/index.ts"),s=o("./src/quick-edit/context-for-lists.ts"),r=o("./src/quick-edit/modifier-content-block-internal.ts"),i=o("../$2sxc/src/dom/dom-tools.ts");class a extends n.ModifierBase{constructor(){super("QE.CntBlk")}getInstanceModifier(t){const e=window.$2sxc(t);return new r.ModifierContentBlockInstance(this,e)}delete(t){return this.getInstanceModifier(t.list).delete(t)}create(t,e,o,n,s,r){return this.getInstanceModifier(s).create(t,e,o,n,s,r)}move(t,e){const o=this.findClipListIndex(t),n=this.findClipListIndex(e);this.getInstanceModifier(t.list).move(e.parentGuid,e.field,o,n)}isRealMove(t,e){return this.findClipListIndex(t)+1!==this.findClipListIndex(e)}findClipListIndex(t){return this.findListIndex(t.item,t.index)}findListIndex(t,e){return i.DomTools.getContextOfTag(t)?.contentBlockReference?.parentIndex??e}static onCbButtonClick(){const t=n.QuickE.singleton().main.activeContentBlock,e=n.QeSelectors.blocks.cb.findClosestList(t),o=e.querySelectorAll(n.QeSelectors.blocks.cb.selector),r=s.ContextForLists.getFromDom(e),i=r.guid||null,a=t.classList.contains(n.QeSelectors.blocks.cb.class)?Array.from(o).indexOf(t)+1:0,l=this.getAttribute("data-action");if(l)return n.QuickEClipboard.singleton().do(l,e,a,n.QeSelectors.blocks.cb.id);const c=n.QuickEClipboard.singleton().modCb.findListIndex(t,a-1)+1,d=this.getAttribute("data-type");return n.QuickEClipboard.singleton().modCb.create(r.parent,r.field,c,d,e,i)}}},"./src/quick-edit/modifier-dnn-module-internal.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ModifierDnnModuleInternal:()=>i});var n=o("./src/quick-edit/index.ts"),s=o("./src/core/index.ts");const r=t=>window.$.dnnSF(t);class i extends s.HasLog{constructor(t){super("QE.ModMng",t.log)}delete(t){const e=r(t).getTabId();return a({modId:t,url:r().getServiceRoot("2sxc")+"dnn/module/delete",method:"GET",data:{tabId:e,modId:t},success:()=>window.location.reload()})}create(t,e,o){return a({modId:null,url:r().getServiceRoot("internalservices")+"controlbar/GetPortalDesktopModules",method:"GET",data:"category=All&loadingStartIndex=0&loadingPageSize=100&searchTerm=",success:n=>{const s="Default"===o?" Content":" App";let i=null;return n.forEach(((t,e)=>{t.ModuleName===s&&(i=t)})),i?function(t,e,o){const n={Module:o,Page:"",Pane:t,Position:-1,Sort:e,Visibility:0,AddExistingModule:!1,CopyModule:!1};return a({modId:null,url:r().getServiceRoot("internalservices")+"controlbar/AddModule",method:"POST",data:n,success:()=>window.location.reload()})}(t,e,i.ModuleID):alert(s+" module not found.")}})}move(t,e,o){const n={TabId:r(t).getTabId(),ModuleId:t,Pane:e,ModuleOrder:2*o+0};a({modId:t,url:r(t).getServiceRoot("internalservices")+"ModuleService/MoveModule",method:"POST",data:n,success:()=>window.location.reload()})}getPaneName(t){return t.getAttribute("id").replace("dnn_","")}getModuleId(t){const e=t.match(/DnnModule-([0-9]+)(?:\W|$)/);return e&&2===e.length?Number(e[1]):null}getMoveButtons(t){const e=n.QuickE.singleton().cachedPanes,o=s.NoJQ.domFromString("<div></div>")[0];for(let n=0;n<e.length;n++){const r=this.getPaneName(e[n]);if(""==(t===r?" selected ":"")){const t=s.NoJQ.domFromString(`<a data='${r}'>${r}</a>`)[0];o.append(t)}}const r=this;return o.querySelectorAll("a").forEach((t=>{t.addEventListener("click",(function(){const t=n.QuickEClipboard.singleton().clipboard,e=r.getModuleId(t.item.className),o=this.getAttribute("data");r.move(e,o,0)}))})),o}}function a(t){const e={},o={setRequestHeader(t,o){e[t]=o}};r(t.modId).setModuleHeaders(o);const n={headers:{"X-Requested-With":"XMLHttpRequest",...e},method:t.method};let i=t.url;if(t.data)switch(t.method){case"GET":i+="string"==typeof t.data?`?${t.data}`:`?${s.NoJQ.param(t.data)}`;break;case"POST":n.body=new URLSearchParams(s.NoJQ.param(t.data)),n.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"}const a=t.success;return fetch(i,n).then((t=>{if(t.status>=200&&t.status<300)return t.text();throw new Error(t.statusText)})).then((t=>{let e;try{e=JSON.parse(t)}catch{e=t}return a?.(e),e})).catch((t=>{alert(`Error while talking to server: ${t.message}`)}))}},"./src/quick-edit/modifier-dnn-module.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ModifierDnnModule:()=>r});var n=o("./src/quick-edit/index.ts"),s=o("./src/plumbing/index.ts");class r extends n.ModifierBase{modInternal;constructor(){super("QE.DnnMod"),this.modInternal=new n.ModifierDnnModuleInternal(this)}delete(t){if(!confirm("are you sure?"))return;const e=this.modInternal.getModuleId(t.item.className);this.modInternal.delete(e)}move(t,e){t.index;const o=e.index,n=this.modInternal.getModuleId(t.item.className),s=this.modInternal.getPaneName(e.list);this.modInternal.move(n,s,o)}isRealMove(t,e){return this.modInternal.getPaneName(t.list)!==this.modInternal.getPaneName(e.list)||t.index!==e.index}showSendToPane(){const t=n.QuickE.singleton(),e=n.QeSelectors.blocks.mod.findClosestList(t.main.activeModule);if(!e)return;const o=t.selected.querySelector("#paneList");o.matches(":empty")||s.NoJQ.empty(o),o.append(this.modInternal.getMoveButtons(this.modInternal.getPaneName(e)))}static onModuleButtonClick(){const t=this.getAttribute("data-type"),e=n.QuickE.singleton().main.activeModule,o=n.QeSelectors.blocks.mod.findClosestList(e);let s=0;e.classList.contains("DnnModule")&&(s=Array.from(o.querySelectorAll(".DnnModule")).indexOf(e)+1);const r=this.getAttribute("data-action");if(r)return n.QuickEClipboard.singleton().do(r,o,s,n.QeSelectors.blocks.mod.id);const i=n.QuickEClipboard.singleton().modDnn.modInternal;return i.create(i.getPaneName(o),s,t)}}},"./src/quick-edit/position-coordinates.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{PositionCoordinates:()=>n});class n{x;y;w;yh;element;constructor(t,e){this.x=t,this.y=e}}},"./src/quick-edit/positioning.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Positioning:()=>i});var n=o("./src/quick-edit/index.ts"),s=o("./src/plumbing/index.ts"),r=o("./src/quick-edit/context-for-lists.ts");class i{static positionAndAlign=l;static refresh=c;static get(t){return{element:t,x:s.NoJQ.offset(t).left,w:s.NoJQ.width(t),y:s.NoJQ.offset(t).top,yh:s.NoJQ.offset(t).top+(t.matches(n.QeSelectors.eitherCbOrMod)?s.NoJQ.height(t):0)}}static getBodyPosition(){const t=document.body.style.position,e=n.QuickE.singleton();return"relative"===t||"absolute"===t?new n.PositionCoordinates(s.NoJQ.offset(e.body).left,s.NoJQ.offset(e.body).top):new n.PositionCoordinates(0,0)}}let a;function l(t,e){const o=n.QuickE.singleton();return t.style.left=e.x-o.bodyOffset.x+"px",t.style.top=e.yh-o.bodyOffset.y+"px",t.style.width=`${s.NoJQ.width(e.element)}px`,t.style.display="inline-flex",t}function c(t){const e="sc-cb-highlight-for-insert",o=new Date;(!a||o.getTime()-a.getTime()>1e3)&&(a=o,function(){const t=n.QuickE.singleton();if(t.bodyOffset=i.getBodyPosition(),t.config.innerBlocks.enable){const e=n.QeSelectors.blocks.cb.findAllLists().filter((t=>t.matches(`:not(.${n.QeSelectors.blocks.cb.singleItem}), :empty`))),o=[];e.forEach((t=>{o.push(...Array.from(t.querySelectorAll(n.QeSelectors.blocks.cb.selector)))})),t.contentBlocks=[...e,...o]}if(t.config.modules.enable){const e=t.cachedPanes,o=[];e.forEach((t=>{o.push(...Array.from(t.querySelectorAll(n.QeSelectors.blocks.mod.selector)))})),t.modules=[...e,...o]}}());const s=new n.PositionCoordinates(t.clientX,t.clientY),c=n.QuickE.singleton();c.config.innerBlocks.enable&&c.contentBlocks&&(c.nearestCb=d(c.contentBlocks,s)),c.config.modules.enable&&c.modules&&(c.nearestMod=d(c.modules,s)),c.modActions.forEach((t=>{t.classList.toggle("sc-invisible",null===c.nearestMod)})),c.cbActions.forEach((t=>{t.classList.toggle("sc-invisible",null===c.nearestCb)}));const u=c.main._parentNode;if(null!==c.nearestCb||null!==c.nearestMod){const t=c.nearestCb||c.nearestMod,o=n.QeSelectors.blocks.mod.findClosestList(t.element),s=n.QeSelectors.blocks.cb.findClosestList(t.element)??o;if(function(t){const e=r.ContextForLists.getFromDom(t);let o=!0,s=!0;e.appList.length>0&&(o=e.appList.indexOf("Content")>-1,s=e.appList.length-(o?1:0)>0),n.QuickE.singleton().cbActions.forEach((t=>{t.classList.toggle("hide-content",!o),t.classList.toggle("hide-app",!s)}))}(s),o){let t=o.getAttribute("id")||"";t.length>4&&(t=t.substr(4)),c.modActions.filter((t=>t.matches("[titleTemplate]"))).forEach((e=>{e.setAttribute("title",e.getAttribute("titleTemplate").replace("{0}",t))}))}l(c.main,t),c.main.activeContentBlock=c.nearestCb?c.nearestCb.element:null,c.main.activeModule=c.nearestMod?c.nearestMod.element:null,c.main._parentNode=s,s.classList.add(e)}else c.main._parentNode=null,c.main.style.display="none";u&&u!==c.main._parentNode&&u.classList.remove(e)}function d(t,e){let o=null,n=30;const s=e.x+window.scrollX,r=e.y+window.scrollY;return t.forEach((t=>{const e=i.get(t);if(s<e.x||s>e.x+e.w)return;const a=Math.abs(r-e.yh);a<30&&a<n&&(o=e,n=a)})),o}},"./src/quick-edit/quick-e-clipboard.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{QuickEClipboard:()=>c});var n=o("./src/quick-edit/index.ts"),s=o("./src/constants/index.ts"),r=o("./src/constants/debug.ts"),i=o("./src/core/index.ts"),a=o("./src/quick-edit/context-for-lists.ts"),l=o("./src/quick-edit/modifier-content-block.ts");class c extends i.HasLog{static singleton(){return this._singleton??(this._singleton=new c)}static _singleton;clipboard=new n.Selection;mods={};modDnn;modCb;constructor(){super(r.QuickEClipboardLogId),i.Insights.add("Q-E","clipboard",this.log),this.mods.cb=this.modCb=new l.ModifierContentBlock,this.mods.mod=this.modDnn=new n.ModifierDnnModule,i.NoJQ.ready((()=>this.initializeSecondaryButtons()))}initializeSecondaryButtons(){const t=this.log.call("initializeSecondaryButtons"),e=this;n.QuickE.singleton().selected.querySelectorAll("a").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-action");switch(t){case"delete":return e.mods[e.clipboard.type].delete(e.clipboard);case"sendToPane":return e.modDnn.showSendToPane();default:throw new Error(`unexpected action: ${t}`)}}))})),t.done()}do(t,e,o,s){const r=this.log.call("do",`${t}, domIndex: ${o}, typed: ${s}`),i=this.createSpecs(s,e,o);switch(t){case"select":this.mark(i);break;case"paste":const t=this.clipboard.index,e=i.index;if(this.clipboard.type!==i.type)return alert("can't move module-to-block; move only works from module-to-module or block-to-block");if(isNaN(t)||isNaN(e))return this.clearUi();const o=i.type===n.QeSelectors.blocks.cb.id?this.modCb:this.modDnn;if(!o.isRealMove(this.clipboard,i))return this.clearUi();o.move(this.clipboard,i),this.clearUi()}return r.return(null)}mark(t){const e=this.log.call("mark");if(e.data("specs",t),t){if(this.clipboard&&this.clipboard.item===t.item)return e.return(this.clearUi());this.clipboard=t}if(this.removeSelectionMarker(),!this.clipboard.item)return e.done();const o=this.clipboard.item;o.classList.add(n.QeSelectors.selected),o.previousElementSibling?.matches("iframe")&&o.previousElementSibling.classList.add(n.QeSelectors.selected),this.setSecondaryActionsState(!0);const s=n.QuickE.singleton(),r=this.clipboard?.type===n.QeSelectors.blocks.cb.id?s.config.innerBlocks.buttons:s.config.modules.buttons;s.selected.toggleOverlay(o,r),e.done()}clearUi(){const t=this.log.call("clearUi");this.removeSelectionMarker(),this.clipboard=null,this.setSecondaryActionsState(!1),n.QuickE.singleton().selected.toggleOverlay(!1),t.done()}removeSelectionMarker(){document.querySelectorAll(`.${n.QeSelectors.selected}`).forEach((t=>t.classList.remove(n.QeSelectors.selected)))}setSecondaryActionsState(t){const e=this.log.call("setSecondaryActionsState");let o=Array.from(document.querySelectorAll("a.sc-content-block-menu-btn"));o=o.filter((t=>t.classList.contains("icon-sxc-paste"))),o.forEach((e=>e.classList.toggle(s.C.ClsNames.UnAvailable,!t))),e.done()}createSpecs(t,e,o){const s=this.log.call("createSpecs",`${t}, ..., ${o}`),r=e.querySelectorAll(n.QeSelectors.blocks[t].selector),i=o>=r.length?r[r.length-1]:r[o],l=a.ContextForLists.getFromDom(e)||{parent:"dnn",field:e.id,parentGuid:null};return s.return({parent:l.parent,parentGuid:l.parentGuid,field:l.field,list:e,item:i,index:o,type:t})}}},"./src/quick-edit/quick-e-configuration.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{QuickEditConfig:()=>r,QuickEditConfigButtons:()=>s,QuickEditConfigEnableAuto:()=>n,QuickEditConfigRoot:()=>i});const n="auto";class s{addContent=!0;addApp=!0;select=!0;paste=!0;delete=!0;move=!0}class r{enable="auto";buttons}class i extends r{innerBlocks;modules;static getDefault(){return{enable:!0,buttons:new s,innerBlocks:{enable:n},modules:{enable:n}}}}},"./src/quick-edit/quick-e-overlays.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{QuickEditOverlay:()=>l});var n=o("./src/quick-edit/index.ts"),s=o("./src/commands/index.ts"),r=o("./src/constants/index.ts"),i=o("./src/plumbing/index.ts");const a=s.iconPrefix;var l;!function(t){t.setButtonActivationClasses=function(t,e){for(const[t,o]of Object.entries(new n.QuickEditConfigButtons))e.forEach((e=>{e.classList.remove(`enable-${t}`,`disable-${t}`)}));for(const[o,n]of Object.entries(t))e.forEach((t=>{t.classList.add(`${n?"enable":"disable"}-${o}`)}))},t.btn=function(t,e,o,n,s,i){return`<a class='sc-content-block-menu-btn sc-cb-action ${a}${e} ${n?" sc-invisible ":""}${s?` ${r.C.ClsNames.UnAvailable} `:""}${i}' data-action='${t}' data-i18n='[title]QuickInsertMenu.${o}'></a>`},t.selectedOverlay=i.NoJQ.domFromString('<div class="sc-content-block-menu sc-content-block-selected-menu sc-i18n"></div>').map((e=>(e.append(i.NoJQ.domFromString(t.btn("delete","trash-empty","Delete"))[0],i.NoJQ.domFromString(t.btn("sendToPane","move","Move",null,null,"sc-cb-mod-only"))[0],i.NoJQ.domFromString('<div id="paneList"></div>')[0]),e)))[0]}(l||(l={})),l.selectedOverlay.toggleOverlay=(t,e)=>{if(t){const o=n.Positioning.get(t);o.yh=o.y+20,n.Positioning.positionAndAlign(l.selectedOverlay,o),l.selectedOverlay.target=t,l.setButtonActivationClasses(e,Array.from(l.selectedOverlay.querySelectorAll("a")))}else l.selectedOverlay.style.display="none"}},"./src/quick-edit/quick-e.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{QuickE:()=>a});var n=o("./src/quick-edit/index.ts"),s=o("./src/core/index.ts"),r=o("./src/quick-edit/quick-e-configuration.ts");const i="quick-edit-config";class a extends s.HasLog{static singleton(){return this._singleton??=window.$quickE??new a}static _singleton;body=document.body;main=s.NoJQ.domFromString('<div class="sc-content-block-menu sc-content-block-quick-insert sc-i18n"></div>')[0];template=`<a class='sc-content-block-menu-addcontent sc-invisible' data-type='Default' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockContent'>&nbsp;</a><a class='sc-content-block-menu-addapp sc-invisible' data-type='' data-i18n='[titleTemplate]QuickInsertMenu.AddBlockApp'>&nbsp;</a>${n.QuickEditOverlay.btn("select","ok","Select",!0)}${n.QuickEditOverlay.btn("paste","paste","Paste",!0,!0)}`;selected=n.QuickEditOverlay.selectedOverlay;contentBlocks=null;cachedPanes=null;modules=null;nearestCb=null;nearestMod=null;cbActions=s.NoJQ.domFromString(this.template);modActions=s.NoJQ.domFromString(this.template.replace(/QuickInsertMenu.AddBlock/g,"QuickInsertMenu.AddModule")).map((t=>(t.setAttribute("data-context","module"),t.classList.add("sc-content-block-menu-module"),t)));config=r.QuickEditConfigRoot.getDefault();bodyOffset;constructor(){super("Q-E.Main"),s.Insights.add("Q-E","manager",this.log),this.modActions.forEach((t=>{t.addEventListener("click",n.ModifierDnnModule.onModuleButtonClick)})),this.cbActions.forEach((t=>{t.addEventListener("click",n.ModifierContentBlock.onCbButtonClick)}))}start(){const t=this.log.call("start");try{this.loadPageConfig(),this.body&&this.config.enable&&(this.bodyOffset=n.Positioning.getBodyPosition(),this.enable(),this.initWatchMouse())}catch(t){console.error("couldn't start quick-edit",t)}t.done()}reset(){const t=this.log.call("reset");this.loadPageConfig(),t.done()}loadPageConfig(){const t=this.log.call("loadPageConfig",null,null,{config:this.config});this.logConfig();const e=document.querySelectorAll(`[${i}]`);let o;if(e?.length>0){t.add("found configs",e);let n={};for(let s=e.length;s>=0;s--){o=e[0].getAttribute(i);try{const e=JSON.parse(o);t.data("additional config",e),n={...n,...e},t.data("merged config",n)}catch(e){t.add("had trouble with json"),console.warn("had trouble with json",e)}}const s=r.QuickEditConfigRoot.getDefault();this.config={...s,...n,buttons:{...s.buttons,...n.buttons}}}else t.add("no configs found, will use exiting");this.config.innerBlocks.buttons={...this.config?.buttons,...this.config?.innerBlocks?.buttons},this.config.modules.buttons={...this.config?.buttons,...this.config?.modules?.buttons},this.logConfig(),this.detectWhichMenusToActivate(),t.done()}detectWhichMenusToActivate(){const t=this.config,e=this.log.call("detectWhichMenusToActivate"),o=n.QeSelectors.blocks.cb.findAllLists(),s=o.length>0;e.add(`has Content Blocks: ${s}`,o),null!==t.modules.enable&&t.modules.enable!==r.QuickEditConfigEnableAuto||(t.modules.enable=!s),null!==t.innerBlocks.enable&&t.innerBlocks.enable!==r.QuickEditConfigEnableAuto||(t.innerBlocks.enable=s),e.add(`module.enable: ${t.modules.enable}`),e.add(`innerBlocks.enable: ${t.innerBlocks.enable}`),e.done()}enable(){const t=this.log.call("enable");this.prepareToolbarInDom(),this.initPanes(),t.done()}prepareToolbarInDom(){const t=this.log.call("prepareToolbarInDom");this.body.append(this.main),this.body.append(this.selected),this.cbActions.forEach((t=>this.main.append(t))),this.modActions.forEach((t=>this.main.append(t))),n.QuickEditOverlay.setButtonActivationClasses(this.config.innerBlocks.buttons,this.cbActions),n.QuickEditOverlay.setButtonActivationClasses(this.config.modules.buttons,this.modActions),t.done()}initPanes(){const t=this.log.call("initPanes");this.cachedPanes=n.QeSelectors.blocks.mod.findAllLists(),this.cachedPanes.forEach((t=>{t.classList.add("sc-cb-pane-glow")})),t.done()}initWatchMouse(){const t=this.log.call("initWatchMouse");let e=null;document.body.addEventListener("mousemove",(t=>{null===e&&(e=window.setTimeout((()=>{requestAnimationFrame((()=>{n.Positioning.refresh(t),e=null}))}),20))})),t.done()}logConfig(){this.log.add(`config enabled: ${this.config.enable}, mod: ${this.config.modules.enable}, cb: ${this.config.innerBlocks.enable}. ${JSON.stringify(this.config)})`)}}},"./src/quick-edit/selection.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Selection:()=>n});class n{parent;parentGuid;field;list;item;index;type}},"./src/quick-edit/selectors-instance.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{QeSelectors:()=>s});const n={cb:{id:"cb",class:"sc-content-block",selector:".sc-content-block",findAllLists:()=>Array.from(document.querySelectorAll(".sc-content-block-list")),findClosestList:t=>t.closest(".sc-content-block-list"),context:"data-list-context",singleItem:"single-item"},mod:{id:"mod",class:"DnnModule",selector:".DnnModule",findAllLists:()=>{const t=[],e=document.querySelectorAll("*");for(let o=0;o<e.length;o++){const n=e[o];if(n.matches(".DNNEmptyPane, .dnnDropEmptyPanes")){t.push(n);continue}const s=n.children;for(let e=0;e<s.length;e++)if(s[e].matches(".DnnModule")){t.push(n);break}}return t},findClosestList:t=>{if(!t)return null;if(t.matches(".DNNEmptyPane, .dnnDropEmptyPanes"))return t;for(let e=0;e<t.children.length;e++)if(t.children[e].matches(".DnnModule"))return t;return n.mod.findClosestList(t.parentElement)},context:null}},s={blocks:n,eitherCbOrMod:".DnnModule, .sc-content-block",selected:"sc-cb-is-selected"}},"./src/sxc/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcCmsReal:()=>n.SxcCmsReal,SxcTools:()=>s.SxcTools});var n=o("./src/sxc/sxc-cms-real.ts"),s=(o("./src/sxc/sxc-global-with-cms.ts"),o("./src/sxc/sxc-tools.ts"))},"./src/sxc/sxc-cms-real.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcCmsReal:()=>i});var n=o("../$2sxc/src/sxc/sxc-cms.ts"),s=o("./src/cms/run-params-helpers.ts"),r=o("./src/cms/sxc-global-cms.ts");class i extends n.SxcCms{constructor(t){super(t)}run(t){return s.RunParamsHelpers.ensureRunParamsInstanceOrError(t),(new r.SxcGlobalCms).runInternal({...t,context:this.sxc,triggeredBy:"sxcCmsReal.run"})}}},"./src/sxc/sxc-global-with-cms.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/sxc/sxc-tools.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SxcTools:()=>s});var n=o("../$2sxc/src/dom/dom-tools.ts");class s{static getEditContext(t,e){return n.DomTools.getContext(t,e)}}},"./src/system/2sxc.system.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SystemUpgrader:()=>n});class n{finishUpgrade(t){window.$2sxc(t).webApi.fetchRaw("sys/install/resume").then((()=>{alert("Upgrade ok, restarting the CMS and reloading..."),location.reload()})),alert("starting upgrade. This could take a few minutes. You'll see an 'ok' when it's done. Please wait...")}}},"./src/system/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{SystemUpgrader:()=>n.SystemUpgrader});var n=o("./src/system/2sxc.system.ts")},"./src/toolbar/config-loaders/button-config-loader.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ButtonConfigLoader:()=>a});var n=o("./src/toolbar/config-loaders/index.ts"),s=o("./src/core/index.ts"),r=o("./src/toolbar/config/index.ts"),i=o("./src/toolbar/config/button-safe.ts");class a extends s.HasLog{toolbar;constructor(t){super("Tlb.BtCfBl",t.log),this.toolbar=t}normalize(t){const e=this.log.call("normalize");e.data("initial",t);const o=t;if(o._expanded||o.command)return e.return(o,"already expanded, won't modify");if("string"==typeof t)return e.return(this.btnConfigStructure(t,{}),"found name, use that");if(n.InPageCommandJson.hasActions(t))return e.add("action found, will move down to .command",t),t.action&&(t.action=t.action.trim()),e.return({command:t,_expanded:!0},"had actions, convert to commands");throw"can't expand InPageButtonConfiguration - unexpected type signature encountered"}btnConfigStructure(t,e){return this.log.call("getFromName",t).return({command:{action:t.trim(),params:e},_expanded:!0},`name "${t}" found, will re-map to .command.action`)}removeDisableButtons(t,e){const o=this.log.call("removeDisableButtons",`length of groups: ${e.groups.length}`),n=e.groups;for(let e=0;e<n.length;e++){const s=n[e].buttons;this.removeUnfitButtons(t,s),o.add("will disable appropriate buttons"),(0===s.length||1===s.length&&"more"===s[0].command.name)&&(o.add('found no more buttons except for the "more" - will remove that group'),n.splice(e--,1))}o.return(null)}addDefaultBtnSettings(t,e,o,n){const s=this.log.call("addDefaultBtnSettings","",`for ${()=>t.command.name}`);for(let s=0;s<l.length;s++)c(t,e,o,n,l[s]);s.return(null)}removeUnfitButtons(t,e){const o=this.log.call("removeUnfitButtons");let n="";for(let a=0;a<e.length;a++){const l=e[a];if(l.command){t.button=l;const c=this.toolbar.toolbarV10.rules.find(l.id||l.command.name);let d=c?.overrideShow();if(null==d){var s=new i.ButtonSafe(l,t);r.ButtonCommand.mergeAdditionalParams(s.action(),c?.params),d=s.showCondition()}!1===d&&(n+=`#${a} "${l.command.name}"; `,e.splice(a--,1)),o.add(`btn '${l.command.name}' show ${d}`)}}n&&o.add(`removed buttons: ${n}`),o.return(null)}}const l=["classes","icon","title","dynamicClasses","showCondition","disabled"];function c(t,e,o,n,s){const r=t;if(!r[s]){if(e&&e[s])return r[s]=e[s];if(o&&o[s])return r[s]=o[s];if(t.command&&t.command.name){const e=n.get(t.command.name);if(e&&e.buttonDefaults){const t=e.buttonDefaults;if(t[s])return r[s]=t[s]}}}}},"./src/toolbar/config-loaders/command-config-loader.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{CommandConfigLoader:()=>s});var n=o("./src/core/index.ts");class s extends n.HasLog{toolbar;constructor(t){super("Tlb.CmdLdr",t.log),this.toolbar=t}updateToV9(t){if(!t.entity||!t.entity._2sxcEditInformation)return t;const e=t.entity._2sxcEditInformation;return void 0!==e.sortOrder&&(t.useModuleList=!0),void 0!==e.sortOrder&&(t.sortOrder=e.sortOrder),void 0!==t.entity.EntityId&&(t.entityId=t.entity.EntityId),delete t.entity,t}}},"./src/toolbar/config-loaders/config-formats/in-page-button-group.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{InPageButtonGroupJson:()=>n});class n{buttons}},"./src/toolbar/config-loaders/config-formats/in-page-button.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{InPageButtonJson:()=>n});class n{command;title;icon;classes;disabled;partOfPage;uiActionOnly;dialog;newWindow;inlineWindow;fullScreen;_expanded;static is(t){return void 0!==t.command||void 0!==t.action}static isArray(t){return t.length>0&&n.is(t[0])}static toButton(t){const e={};return t.classes&&(e.classes=t.classes),t.dialog&&(e.dialog=t.dialog),t.disabled&&(e.disabled=t.disabled),t.icon&&(e.icon=t.icon),t.fullScreen&&(e.fullScreen=s(t.fullScreen)),t.icon&&(e.icon=s(t.icon)),t.inlineWindow&&(e.inlineWindow=s(t.inlineWindow)),t.newWindow&&(e.newWindow=s(t.newWindow)),t.partOfPage&&(e.partOfPage=s(t.partOfPage)),t.title&&(e.title=s(t.title)),e}}function s(t){return null==t?null:"function"==typeof t?t:()=>t}},"./src/toolbar/config-loaders/config-formats/in-page-command.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{InPageCommandJson:()=>n});class n{action;entityId;contentType;useModuleList;sortOrder;modify;parent;fields;static hasActions(t){return"string"==typeof t.action}static hasModify(t){return!!t.modify}static noAction(t){return delete t.action,t}}},"./src/toolbar/config-loaders/config-formats/toolbar-wip.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/toolbar/config-loaders/group-config-loader.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ButtonGroupConfigLoader:()=>c});var n=o("./src/toolbar/config-loaders/index.ts"),s=o("./src/commands/index.ts"),r=o("./src/core/index.ts"),i=o("./src/toolbar/config/index.ts"),a=o("./src/toolbar/templates/constants.ts"),l=o("./src/toolbar/config/toolbar-settings.ts");class c extends r.HasLog{toolbar;constructor(t){super("Tlb.GrpCnf",t.log),this.toolbar=t}expandButtonGroups(t){const e=this.log.call("expandButtonGroups");e.add(`will expand groups - found ${t.groups.length} items`);for(let o=0;o<t.groups.length;o++){const n=t.groups[o],s=n.defaults,r=this.expandButtonList(n,t.settings),i=[];if(Array.isArray(r)){e.add(`will process ${r.length} buttons`);for(let e=0;e<r.length;e++)i.push(this.convertToButton(r[e],t.params,t.defaults,s))}else e.add("no button array found, won't do a.nything");n.buttons=i}const o=t;return this.dropMoreIfOnlyOneGroup(o),e.return(o)}convertToButton(t,e,o,r){let a=t.command;const l=a.action,c=i.Button.splitName(l).name;s.Commands.singleton().get(c)||(this.log.add(`couldn't find action ${c} - show warning`),console.warn("warning: toolbar-button with unknown action-name:",c));const d=a.params||n.InPageCommandJson.noAction(a);a=this.toolbar.command.updateToV9(a);const u={...d,...e},p=new i.ButtonCommand(c,u);let m=new i.Button(p,l);return m={...m,...n.InPageButtonJson.toButton(t)},this.toolbar.button.addDefaultBtnSettings(m,r,o,s.Commands.singleton()),m}expandButtonList(t,e){const o=this.log.call("expandButtonList");o.add("initial",t);const n=t.buttons;let s=[];if(Array.isArray(n)){o.add(`detected array of btns (${n.length}), will ensure it's an object`);for(let t=0;t<n.length;t++){const e=n[t],r=e.action;o.add(`will process actions: '${r}' for `,e),"string"==typeof r&&r.indexOf(",")>-1?(o.add(`actionNames has mult values: '${r}'`),this.expandButtonAndAddToList(s,e,r)):(o.add("actionNames has 1 value",e),s.push(e))}}else"string"==typeof n?(o.add(`detected that it is a string "${n}", will split by "," and ...`),this.expandButtonAndAddToList(s,{},n)):(o.add("no special case detected, will use the buttons-object as is"),s=n);o.add(`after check, found ${s.length} buttons`,s),this.addMoreButton(e,s);const r=s.map((t=>this.toolbar.button.normalize(t)));return o.return(r,"done")}expandButtonAndAddToList(t,e,o){const n=this.log.call("expandButtonAndAddToList",`..., ..., '${o}'`,`button def "${e} is string of mult names, will expand into array with action-properties"`),s=o.length?o.split(a.TemplateConstants.ButtonSeparator):[],r={...e};delete r.action;for(let e=0;e<s.length;e++){const o=this.toolbar.button.btnConfigStructure(s[e],r);n.data("commandPart",o),t.push(o)}n.return(t)}addMoreButton(t,e){const o=this.log.call("addMoreButtons"),n=i.ToolbarSettings.bestAddMorePos(t);if(n&&n!==l.TLB_MORE_NEVER){this.log.add(`will add a more "..." button to ${n}`);const t=this.toolbar.button.btnConfigStructure("more",{});n===l.TLB_MORE_END?e.push(t):e.unshift(t)}else this.log.add('will not add more "..." button');o.return(e)}dropMoreIfOnlyOneGroup(t){const e=this.log.call("dropMoreIfOnlyOneGroup");if(1!==t.groups.length)return e.done("not just 1 group");e.add("exactly one group found, will remove more");const o=t.groups[0].buttons,n=o.findIndex((t=>"more"===t.command?.name));if(-1===n)return e.done("no 'more' button found");o.splice(n,1),e.done("more removed")}}},"./src/toolbar/config-loaders/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ButtonConfigLoader:()=>i.ButtonConfigLoader,ButtonGroupConfigLoader:()=>l.ButtonGroupConfigLoader,CommandConfigLoader:()=>a.CommandConfigLoader,InPageButtonGroupJson:()=>r.InPageButtonGroupJson,InPageButtonJson:()=>n.InPageButtonJson,InPageCommandJson:()=>s.InPageCommandJson,ToolbarConfigLoader:()=>u.ToolbarConfigLoader,ToolbarConfigLoaderV09:()=>c.ToolbarConfigLoaderV09,ToolbarConfigLoaderV10:()=>d.ToolbarConfigLoaderV10});var n=o("./src/toolbar/config-loaders/config-formats/in-page-button.ts"),s=o("./src/toolbar/config-loaders/config-formats/in-page-command.ts"),r=o("./src/toolbar/config-loaders/config-formats/in-page-button-group.ts"),i=o("./src/toolbar/config-loaders/button-config-loader.ts"),a=o("./src/toolbar/config-loaders/command-config-loader.ts"),l=o("./src/toolbar/config-loaders/group-config-loader.ts"),c=o("./src/toolbar/config-loaders/toolbar-config-loader-v09.ts"),d=o("./src/toolbar/config-loaders/toolbar-config-loader-v10.ts"),u=o("./src/toolbar/config-loaders/toolbar-config-loader.ts");o("./src/toolbar/config-loaders/config-formats/toolbar-wip.ts")},"./src/toolbar/config-loaders/toolbar-config-loader-v09.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarConfigLoaderV09:()=>l});var n=o("./src/toolbar/config-loaders/index.ts"),s=o("./src/core/index.ts"),r=o("./src/toolbar/config/index.ts"),i=o("./src/toolbar/rules/index.ts"),a=o("./src/toolbar/templates/index.ts");class l extends s.HasLog{configLoader;rules;constructor(t){super("Tlb.TlbV09",t.log),this.configLoader=t,this.rules=new i.RuleManager(t)}loadV9(t,e){const o=this.log.call("loadV9");let n=e.settings;Object.keys(e.toolbar).length>0&&n==={}&&(o.add("no data or settings, will use default settings for empty"),n=r.ToolbarSettings.getForEmpty());const s=this.getTemplateIfNoButtonsSpecified(t,e.toolbar);o.data("after template check",s);const i=this.buildFullDefinition(t,s,n);return o.return(i,"ok")}getTemplateIfNoButtonsSpecified(t,e){const o=this.log.call("getTemplateIfNoButtonsSpecified");if(o.add("initial",e),n.InPageCommandJson.hasActions(e))return o.return(e,"has actions, keep raw");if(a.ToolbarTemplate.hasGroups(e))return o.return(e,"has groups, keep raw");if(a.ToolbarTemplateGroup.is(e))return o.return(e,"is group, keep raw");if(Array.isArray(e))return o.return(e,"is array, keep raw");o.add("no toolbar structure specified, will use standard toolbar template");const s=e.fields?a.ToolbarTemplateSublist.name:a.ToolbarTemplateDefault.name,r=this.configLoader.templates.copy(s);r.params=Array.isArray(e)&&e[0]||e,this.rules.addDeveloperInfos(t);const i=this.rules.getAdd();return this.configLoader.templateEditor.add(r,i),o.return(r,"use template")}buildFullDefinition(t,e,o){const n=this.log.call("buildFullDefinition"),s=this.ensureDefinitionTree(e,o);a.ToolbarTemplate.is(e)&&e.debug&&console.log("toolbar: detailed debug on; start build full Def");const r=this.configLoader.buildTreeAndModifyAccordingToRules(t,s);return r.settings._rules=this.rules,n.return(r)}ensureDefinitionTree(t,e){const o=this.log.call("ensureDefinitionTree");if(!t)throw`preparing toolbar, with nothing to work on: ${t}`;const n=new r.Toolbar;n.groups=this.findGroups(t);const s=t;return n.params=s.params||{},n.settings={...r.ToolbarSettings.getDefaults(),...s.settings,...r.ToolbarSettings.dropEmptyProperties(e)},n.debug=s.debug||!1,n.defaults=s.defaults||{},o.return(n)}findGroups(t){const e=this.log.call("findGroups");return e.data("initial",t),t&&0!==Object.getOwnPropertyNames(t).length?(e.add("will detect what initial structure was given"),Array.isArray(t)?(e.add("Case 2: is array"),0===t.length?e.return([],"2a: empty array"):r.Button.isArray(t)?e.return([{buttons:t}],"2b: array of groups"):n.InPageButtonJson.is(t[0])?e.return([{buttons:t}],"2b: is list of buttons, return 1 group"):(console.warn("error detecting groups in this toolbar"),e.return([],"2x: error, it's array but can't detect type, use []"))):(e.add("Case 3: not array"),n.InPageButtonJson.is(t)?e.return([{buttons:[t]}],"Case 3a: not array, but has action/buttons properties, will wrap config into array"):(e.add('Case 3: not array and no "action", will return it or blank'),a.ToolbarTemplate.hasGroups(t)?e.return(t.groups,"4: found groups"):(e.add("can't detect what this is - show warning"),console.warn("toolbar tried to build toolbar but couldn't detect type of this:",[]),e.return([],"warning"))))):e.return([],"case 0: empty object, use []")}}},"./src/toolbar/config-loaders/toolbar-config-loader-v10.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarConfigLoaderV10:()=>l});var n=o("./src/constants/debug.ts"),s=o("./src/core/index.ts"),r=o("./src/toolbar/config/index.ts"),i=o("./src/toolbar/rules/index.ts"),a=o("./src/toolbar/templates/index.ts");n.Debug.parts.ToolbarConfigLoaderV10;class l extends s.HasLog{configLoader;rules;constructor(t){super("Tlb.TlbV10",t.log,"constructor"),this.configLoader=t,this.rules=new i.RuleManager(t)}loadV10(t,e,o){const n=this.log.call("loadV10");this.rules.load(o);const s=this.rules.getSettings();let i=s?.ui;0===Object.keys(i||{}).length&&(i=s?.params);const l=new r.ToolbarSettings(i),c=this.rules.getToolbar(),d=this.rules.getParams(),u=e.toolbar.fields||d?.params?.fields?a.ToolbarTemplateSublist.name:a.ToolbarTemplateDefault.name,p=c?.name??u;let m=this.configLoader.templates.copy(p);m.settings=l,d&&(m.params=d.params),this.rules.getRemoveGroups().forEach((t=>this.configLoader.templateEditor.removeGroup(m,t.name))),this.rules.addDeveloperInfos(t);const f=this.rules.getAdd();this.configLoader.templateEditor.add(m,f);const g=this.configLoader.buildTreeAndModifyAccordingToRules(t,m);return g.identifier||(g.identifier=r.Toolbar.createIdentifier()),g.settings._rules=this.rules,n.return(g,"ok")}}},"./src/toolbar/config-loaders/toolbar-config-loader.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarConfigLoader:()=>i});var n=o("./src/toolbar/config-loaders/index.ts"),s=o("./src/core/index.ts"),r=o("./src/toolbar/templates/index.ts");class i extends s.HasLog{toolbarV09;toolbarV10;groups;button;command;templates=r.ToolbarTemplateManager.singleton();templateEditor;logs;constructor(t){super("Tlb.TlbCnf")}setLoggingAndCreateHelpers(t){let e=t&&t.debug;void 0===e&&Array.isArray(t)&&t.length&&(e=t[0].debug),e=e||!1,e&&(this.log.keepData=!0,"live"===e.toString()&&(this.log.liveDump=!0),this.log.add(`found debug=${e}, will enable intense logging`)),this.toolbarV09=new n.ToolbarConfigLoaderV09(this),this.toolbarV10=new n.ToolbarConfigLoaderV10(this),this.groups=new n.ButtonGroupConfigLoader(this),this.button=new n.ButtonConfigLoader(this),this.command=new n.CommandConfigLoader(this),this.templateEditor=new r.TemplateEditor(this)}load(t,e){const o=this.log.call("load","","expand start",{context:t,config:e}),n=e.toolbar=e.toolbar||{};return this.setLoggingAndCreateHelpers(n),Array.isArray(n)&&n.length>=0&&"string"==typeof n[0]?o.return(this.toolbarV10.loadV10(t,e,n),"v10 done"):o.return(this.toolbarV09.loadV9(t,e),"V9 done")}buildTreeAndModifyAccordingToRules(t,e){const o=this.log.call("buildFullDefinition"),n=this.groups.expandButtonGroups(e);return this.button.removeDisableButtons(t,n),o.return(n)}}},"./src/toolbar/config/Note.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Note:()=>s});var n=o("./src/constants/rules.ts");class s{constructor(t){t&&Object.assign(this,t)}note;type;links;background;asHtml;interactive;delay;linger;isSystem;static toJson64String(t){return`${n.prefixJson64}${window.btoa(JSON.stringify(t))}`}}},"./src/toolbar/config/button-command.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ButtonCommand:()=>s});var n=o("./src/commands/index.ts");class s{name;params;command;constructor(t,e){this.name=t,this.params=e,e||(this.params={}),this.command=n.Commands.singleton().get(t)}static mergeAdditionalParams(t,e){let o={};return t&&(t.name&&(o.action=t.name),t.params&&(o={...o,...t.params,...e})),t.params=o,o}}},"./src/toolbar/config/button-group.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ButtonGroup:()=>n});class n{buttons;name;defaults={};constructor(t){this.buttons=t,this.buttons=t||[]}static is(t){return void 0!==t.buttons}static isArray(t){return t.length&&void 0!==t[0].buttons}}},"./src/toolbar/config/button-safe.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ButtonSafe:()=>s});var n=o("./src/toolbar/config/index.ts");class s{button;context;constructor(t,e){this.button=t,this.context=e}action=()=>this.button.command;classes=()=>this.button.classes||"";color=()=>r(this.button.color,this.context,void 0);dialog=()=>r(this.button.dialog,this.context,this.button.command.name);disabled=()=>r(this.button.disabled,this.context,!1);dynamicClasses=()=>r(this.button.dynamicClasses,this.context,"");fullScreen=()=>r(this.button.fullScreen,this.context,!1);icon=()=>r(this.button.icon,this.context,"");inlineWindow=()=>r(this.button.inlineWindow,this.context,!1);newWindow=()=>r(this.button.newWindow,this.context,!1);parameters=()=>r(this.button.parameters,this.context,{});partOfPage=()=>r(this.button.partOfPage,this.context,!1);showCondition=()=>r(this.button.showCondition,this.context,!0);tippy=(t,e)=>this.button.tippy?.(t,e);title=()=>r(this.button.title,this.context,"unknown-title");uiActionOnly=()=>r(this.button.uiActionOnly,this.context,!0);noItems=()=>r(this.button.noItems,this.context,!1)}function r(t,e,o){if(null==t)return o;const s=n.Button.isPropGen(t)?t(e):t;return void 0===s?o:s}},"./src/toolbar/config/button.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Button:()=>s});var n=o("./src/plumbing/index.ts");class s{id;command;classes="";constructor(t,e){this.command=t;const o=s.splitName(e);this.id=o.id,t?.command?.buttonDefaults&&n.Obj.TypeSafeAssign(this,t.command.buttonDefaults)}static splitName(t){const e=t.split("=");return{id:e[0],name:e[1]||t}}configureLinkGenerator;tweakGeneratedUrlParameters;dialog;fullScreen;disabled;dynamicClasses;icon;inlineWindow=()=>!1;newWindow;showCondition;title;partOfPage;code;color;tippy;parameters;uiActionOnly;notes;noItems;static is(t){return void 0!==t.command}static isArray(t){return t.length&&s.is(t[0])}static isPropGen(t){return"function"==typeof t}}},"./src/toolbar/config/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Button:()=>s.Button,ButtonCommand:()=>n.ButtonCommand,ButtonGroup:()=>i.ButtonGroup,ButtonSafe:()=>r.ButtonSafe,TLB_FOLLOW_ALWAYS:()=>l.TLB_FOLLOW_ALWAYS,TLB_FOLLOW_INITIAL:()=>l.TLB_FOLLOW_INITIAL,TLB_FOLLOW_SCROLL:()=>l.TLB_FOLLOW_SCROLL,TLB_HOV_BOT:()=>l.TLB_HOV_BOT,TLB_HOV_LEFT:()=>l.TLB_HOV_LEFT,TLB_HOV_MID:()=>l.TLB_HOV_MID,TLB_HOV_NONE:()=>l.TLB_HOV_NONE,TLB_HOV_RIGHT:()=>l.TLB_HOV_RIGHT,TLB_HOV_TOP:()=>l.TLB_HOV_TOP,TLB_MORE_AUTO:()=>l.TLB_MORE_AUTO,TLB_MORE_END:()=>l.TLB_MORE_END,TLB_MORE_NEVER:()=>l.TLB_MORE_NEVER,TLB_MORE_START:()=>l.TLB_MORE_START,TLB_SHOW_ALWAYS:()=>l.TLB_SHOW_ALWAYS,TLB_SHOW_HOVER:()=>l.TLB_SHOW_HOVER,TlbHoverPrefix:()=>l.TlbHoverPrefix,TlbShowPrefix:()=>l.TlbShowPrefix,Toolbar:()=>a.Toolbar,ToolbarSettings:()=>l.ToolbarSettings});var n=o("./src/toolbar/config/button-command.ts"),s=o("./src/toolbar/config/button.ts"),r=o("./src/toolbar/config/button-safe.ts"),i=o("./src/toolbar/config/button-group.ts"),a=o("./src/toolbar/config/toolbar.ts"),l=o("./src/toolbar/config/toolbar-settings.ts");o("./src/toolbar/config/toolbar-button-settings.ts")},"./src/toolbar/config/toolbar-button-settings.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/toolbar/config/toolbar-settings.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{TLB_FOLLOW_ALWAYS:()=>v,TLB_FOLLOW_INITIAL:()=>y,TLB_FOLLOW_SCROLL:()=>x,TLB_HOV_BOT:()=>f,TLB_HOV_LEFT:()=>d,TLB_HOV_MID:()=>m,TLB_HOV_NONE:()=>u,TLB_HOV_RIGHT:()=>c,TLB_HOV_TOP:()=>p,TLB_MORE_AUTO:()=>a,TLB_MORE_END:()=>r,TLB_MORE_NEVER:()=>l,TLB_MORE_START:()=>i,TLB_SHOW_ALWAYS:()=>g,TLB_SHOW_HOVER:()=>h,TlbHoverPrefix:()=>n,TlbShowPrefix:()=>s,ToolbarSettings:()=>w});const n="sc-tb-hover-",s="sc-tb-show-",r="end",i="start",a="auto",l="never",c="right",d="left",u="none",p="top",m="middle",f="bottom",g="always",h="hover",b="default",y="initial",v="always",x="scroll";class w{autoAddMore=a;hover=c;show=h;delayShow=0;follow=b;classes="";class="";color="";_rules;constructor(t){null!=t&&Object.keys(this).forEach((e=>{let o=e;t[o]&&(this[e]=t[o])})),this.follow===b&&(this.follow="none")}static dropEmptyProperties(t){const e={...t};return e.autoAddMore||delete e.autoAddMore,e.classes||delete e.classes,e}static getDefaults=()=>new w({autoAddMore:a,hover:c,show:h,follow:b});static getForEmpty=()=>new w({autoAddMore:a,hover:d,show:h,follow:b});static getForEmptyAsRule=()=>`settings&autoAddMore=${a}&hover=${d}&show=${h}&follow=default`;static bestAddMorePos(t){const e=t?.autoAddMore??a;return e===a?t?.hover?.startsWith(d)?i:r:e===r||e===i||e===l?e:"right"===e||!0===e?r:e}}},"./src/toolbar/config/toolbar.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{Toolbar:()=>n});class n{identifier;groups=[];settings;params;debug=!1;defaults;constructor(){this.identifier=n.createIdentifier()}static createIdentifier(){return"Toolbar"+Math.floor(99999*Math.random())}}},"./src/toolbar/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{TagToolbar:()=>s.TagToolbar,TagToolbarManager:()=>r.TagToolbarManager,ToolbarConfigFinderAndInitializer:()=>l.ToolbarConfigFinderAndInitializer,ToolbarInitConfig:()=>a.ToolbarInitConfig,ToolbarManager:()=>n.ToolbarManager,ToolbarRenderer:()=>i.ToolbarRenderer,toolbarSelector:()=>l.toolbarSelector});var n=o("./src/toolbar/toolbar-manager.ts"),s=o("./src/toolbar/tag-toolbars/tag-toolbar.ts"),r=o("./src/toolbar/tag-toolbars/tag-toolbar-manager.ts"),i=o("./src/toolbar/render/toolbar-renderer.ts"),a=o("./src/toolbar/initialize/toolbar-init-config.ts"),l=o("./src/toolbar/initialize/toolbar-finder-and-initializer.ts");o("./src/toolbar/toolbar-event-arguments.ts")},"./src/toolbar/initialize/toolbar-finder-and-initializer.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarConfigFinderAndInitializer:()=>m,toolbarSelector:()=>p});var n=o("./src/constants/index.ts"),s=o("./src/context/bundles/context-bundle-button.ts"),r=o("./src/i18n/translator.ts"),i=o("./src/core/index.ts"),a=o("./src/toolbar/render/toolbar-renderer.ts"),l=o("./src/toolbar/tag-toolbars/tag-toolbar.ts"),c=o("./src/toolbar/toolbar-lifecycle.ts"),d=o("./src/toolbar/initialize/toolbar-init-config.ts"),u=o("./src/toolbar/templates/toolbar-when-no-toolbar-provided.ts");const p=`.sc-menu[toolbar],.sc-menu[data-toolbar],[${n.C.Toolbar.attr.full}]`;class m extends i.HasLog{tlbManager;constructor(t){super("Tlb.Buildr",t.log),this.tlbManager=t}buildDnnModule(t){const e=this.log.call("buildDnnModule");if(t.getAttribute(n.C.Toolbar.attr.disable))return e.done("disabled");let o=this.findChildTagsWithConfig(t);if(0===o.length&&(o=function(t){const e=t.classList.contains(n.C.Cb.classes.name)?t:t.querySelector(`div${n.C.Cb.selectors.ofName}`);return!1===s.ContextComplete.findContext(e).ui.autoToolbar?null:(e.setAttribute(n.C.Toolbar.attr.full,JSON.stringify((0,u.getToolbarWhenNoneProvided)())),[e])}(t),null==o))return e.done("toolbars=null");o.forEach((t=>this.loadConfigAndInitialize(t))),r.Translator.autoTranslateMenus(),e.done()}build(t){!t.matches(p)||t.closest(n.C.Sel.SxcDivs)?null!=t.closest(n.C.Cb.selectors.ofName)&&(t.matches(p)&&this.loadConfigAndInitialize(t),t.querySelectorAll(p).forEach((t=>this.loadConfigAndInitialize(t)))):this.loadConfigAndInitialize(t)}findChildTagsWithConfig(t){return Array.from(t.querySelectorAll(p)).filter((e=>e.closest(n.C.Cb.selectors.ofName)===t))}loadConfigAndInitialize(t){const e=this.log.call("loadConfigAndInitialize");if(t.getAttribute(`data-${n.C.Toolbar.attrToMarkInitalized}`))return e.done("already initialized");const o=d.ToolbarInitConfig.loadFromTag(t);if(null!=o)try{this.convertConfigToToolbars(t,o)}catch(t){console.error("error creating toolbar - will skip this one",t)}e.done()}convertConfigToToolbars(t,e){const o=this.log.call("convertConfigToToolbars");o.data("tag",t),o.data("config",e);const i=s.ContextComplete.findContext(t);if(i.toolbar=this.tlbManager.loadConfig(i,e),t.getAttribute(n.C.Toolbar.attr.full)){o.add("V2 TagToolbar detected");const e=new l.TagToolbar(t,i,r.Translator);return t.setAttribute(`data-${n.C.Toolbar.attrToMarkInitalized}`,`${null!=e}`),this.addHoverAttributeToTag(t),o.done()}const d=new a.ToolbarRenderer(i).generate(),u=t.closest(n.C.Toolbar.selectors.ofOldHover);o.data("parentTag",u),t.replaceWith(d),u&&(o.add("V1 hover-toolbar and parents found - will add attribute"),this.addHoverAttributeToTag(u)),c.ToolbarLifecycle.raiseToolbarInitEvent(d,d,i),o.done()}addHoverAttributeToTag(t){const e=this.log.call("addHoverAttributeToTag");if(!t)return e.done("no tag found");t.hasAttribute(n.C.Toolbar.attr.hover)||(e.add("will add attribute "+n.C.Toolbar.attr.hover),t.setAttribute(n.C.Toolbar.attr.hover,"")),e.done()}}},"./src/toolbar/initialize/toolbar-init-config.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarInitConfig:()=>r});var n=o("./src/constants/index.ts"),s=o("./src/html/dom-tools.ts");class r{toolbar;settings;static loadFromTag(t){try{const e=s.HtmlTools.tryGetAttrText(t,n.C.Toolbar.attr.full);if(e){const t=JSON.parse(e);return Array.isArray(t)?{toolbar:t}:t}{const e=n.C.IDs.attr,o=s.HtmlTools.getFirstAttribute(t,e.toolbar,e.toolbarData),r=s.HtmlTools.getFirstAttribute(t,e.settings,e.settingsData);return{toolbar:JSON.parse(o),settings:JSON.parse(r)}}}catch(e){return console.error('error in settings JSON - probably invalid - make sure you quote properties like "name": ...',t,e),null}}}},"./src/toolbar/render/render-button.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{RenderButton:()=>a});var n=o("./src/context/bundles/context-bundle-button.ts"),s=o("./src/html/dom-tools.ts"),r=o("./src/toolbar/config/index.ts"),i=o("./src/toolbar/render/render-part-base.ts");class a extends i.RenderPart{constructor(t){super(t,"Rnd.Button")}render(t,e){const o=this.log.call("render",`context: obj, group: ${e}, btn: ${t.button.id}/${t.button.command?.name}`),i=new r.ButtonSafe(t.button,t),a=n.ContextComplete.getRule(t);a&&o.data("rule found, will try to merge params",a);const l=r.ButtonCommand.mergeAdditionalParams(i.action(),a?.params),c=t.toolbar?.groups?.[e],d=c?.name,u=document.createElement("a"),p=i.disabled();p||u.setAttribute("onclick",this.generateRunJs(a,t,l));const m=(p?" disabled":"")+(i.action()?` sc-${i.action().name}`:"")+` in-group-${e}`+(d?` in-group-${d}`:"")+" "+(a?.ui.class??"")+" "+(a?.ui.classes??"")+" "+i.classes()+" "+i.dynamicClasses();o.add("classes: "+m),s.HtmlTools.addClasses(u,m),this.setTitle(a,u,i);const f=document.createElement("div");return f.appendChild(this.iconTag(i,a)),u.appendChild(f),this.processColorRules(i,a,t,f),i.tippy(t,u),o.return(u)}setTitle(t,e,o){const n=this.log.call("setTitles"),s=t?.ui?.title;if(s)if(0===s.indexOf("i18n:")){const t=s.substring(5);n.add(`i18nTitle: ${t}`),e.setAttribute("data-i18n",`[title]${t}`)}else n.add(`uiTitle: ${s}`),e.setAttribute("title",s);else{const t=o.title();n.add(`i18nTitle: ${t}`),t&&e.setAttribute("data-i18n",`[title]${t}`)}n.done()}processColorRules(t,e,o,n){const s=this.log.call("processColorRules");let r=e?.ui?.color??t.color()??o.toolbar.settings.color;if(r&&"number"==typeof r&&(r=r.toString()),r&&"string"==typeof r){const t=r.split(",");t[0]&&(n.style.background=l(t[0])),t[1]&&(n.style.color=l(t[1]))}return s.done(r??"no color")}generateRunJs(t,e,o){let n=t?.context;n=n&&0!==Object.keys(n).length?{...n,complete:!0}:void 0;const s=n?JSON.stringify(n):`${e.instance.id}, ${e.contentBlockReference.id}`;if("code"===o?.action){const{action:t,...e}=o,n={action:o.action,params:e};return`$2sxc(${s}).cms.run(${JSON.stringify(n)}, event);`}return`$2sxc(${s}).manage.run(${JSON.stringify(o)}, event);`}iconTag(t,e){const o=this.log.call("iconTag"),n=e?.ui?.icon||t.icon();if(n.indexOf("<svg")>-1){const t=document.createElement("template");return t.innerHTML=n,o.return(t.content.firstChild,n)}{const t=document.createElement("i");return s.HtmlTools.addClasses(t,n),t.setAttribute("aria-hidden","true"),o.return(t,n)}}}function l(t){return t&&t.match("^([A-Fa-f0-9]{6,8})$")?"#"+t:t}},"./src/toolbar/render/render-groups.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{RenderButtonGroups:()=>s});var n=o("./src/toolbar/render/render-part-base.ts");class s extends n.RenderPart{constructor(t){super(t,"Rnd.Groups")}generate(t){const e=this.log.call("generate");let o=[];const n=t.toolbar.groups;for(let e=0;e<n.length;e++)o=o.concat(this.generateGroup(n[e],t,e));return e.return(o,`total tags: ${o.length}`)}generateGroup(t,e,o){const n=this.log.call("generateGroup",`group #${o}`),s=[],r=t.buttons;for(let t=0;t<r.length;t++){const n=e.forButton(r[t]),i=this.parent.button.render(n,o),a=document.createElement("li");a.appendChild(i),s.push(a)}return n.return(s,`tags: ${s.length}`)}}},"./src/toolbar/render/render-part-base.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{RenderPart:()=>s});var n=o("./src/core/index.ts");class s extends n.HasLog{parent;constructor(t,e){super(e,t.log),this.parent=t}}},"./src/toolbar/render/svg-icons.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{monitorSvgIconsInToolbar:()=>r});var n=o("./src/constants/ids.ts");const s="viewBox";function r(){new MutationObserver((t=>{document.querySelectorAll(`${n.IDs.sel.scMenu} svg:not([viewBox])`).forEach((t=>{!function(t){if(t.getAttribute(s))return;const{xMin:e,xMax:o,yMin:n,yMax:r}=[...t.children].reduce(((t,e)=>{const{x:o,y:n,width:s,height:r}=e.getBBox();return(!t.xMin||o<t.xMin)&&(t.xMin=o),(!t.xMax||o+s>t.xMax)&&(t.xMax=o+s),(!t.yMin||n<t.yMin)&&(t.yMin=n),(!t.yMax||n+r>t.yMax)&&(t.yMax=n+r),t}),{}),i=`${e} ${n} ${o-e} ${r-n}`;t.setAttribute(s,i)}(t)}))})).observe(document.body,{attributes:!1,childList:!0,subtree:!0})}},"./src/toolbar/render/toolbar-renderer.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarRenderer:()=>u});var n=o("./src/toolbar/config/toolbar-settings.ts"),s=o("./src/commands/cmd-par-hlp.ts"),r=o("./src/constants/ids.ts"),i=o("./src/core/index.ts"),a=o("./src/html/dom-tools.ts"),l=o("./src/toolbar/config/index.ts"),c=o("./src/toolbar/render/render-button.ts"),d=o("./src/toolbar/render/render-groups.ts");class u extends i.HasLog{context;groups;button;constructor(t){super("Rnd.Toolbr"),this.context=t,i.Insights.add("toolbar-render",t.toolbar?.identifier||"",this.log),this.groups=new d.RenderButtonGroups(this),this.button=new c.RenderButton(this)}render(){return this.log.call("render").return(this.generate().outerHTML)}generate(){const t=this.log.call("generate"),e=this.context;t.data("toolbar config",e.toolbar);const o=this.groups.generate(e),i=document.createElement("ul");i.setAttribute("toolbar-identifier",e.toolbar?.identifier),i.classList.add(r.IDs.cls.scMenu),i.classList.add("group-0");const c=e.toolbar.settings,d=c.hover?.split("-");d?.forEach((t=>i.classList.add(`${l.TlbHoverPrefix}${t}`))),i.classList.add(`${n.TlbShowPrefix}${c.show}`),-1===s.CmdParHlp.getIndex(e.toolbar.params)&&i.classList.add("listContent"),e.toolbar.params.fields&&i.classList.add("sc-sublist"),a.HtmlTools.addClasses(i,c.class||c.classes),i.setAttribute("group-count",e.toolbar.groups.length.toString());for(let t=0;t<o.length;t++)i.appendChild(o[t]);return t.return(i,"done")}}},"./src/toolbar/rules/build-steps.ts":(t,e,o)=>{"use strict";var n;o.r(e),o.d(e,{BuildSteps:()=>n}),function(t){t.toolbar="toolbar",t.group="group",t.button="button",t.params="params",t.settings="settings"}(n||(n={}))},"./src/toolbar/rules/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{BuildRule:()=>a.BuildRule,BuildSteps:()=>r.BuildSteps,Operations:()=>s.Operations,RuleConstants:()=>n.RuleConstants,RuleManager:()=>l.RuleManager,RuleParamsHelper:()=>i.RuleParamsHelper});var n=o("./src/toolbar/rules/rule-constants.ts"),s=o("./src/toolbar/rules/rule-operators.ts"),r=o("./src/toolbar/rules/build-steps.ts"),i=(o("./src/toolbar/rules/rule-params.ts"),o("./src/toolbar/rules/rule-params-helper.ts")),a=o("./src/toolbar/rules/rule.ts"),l=o("./src/toolbar/rules/rule-manager.ts")},"./src/toolbar/rules/rule-constants.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{RuleConstants:()=>n});const n={Keys:{None:"none"}}},"./src/toolbar/rules/rule-manager.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{RuleManager:()=>d});var n=o("./src/toolbar/rules/index.ts"),s=o("./src/constants/debug.ts"),r=o("./src/core/index.ts"),i=o("./src/toolbar/config/Note.ts"),a=o("./src/toolbar/rules/build-steps.ts"),l=o("./src/toolbar/rules/rules-obsolete-code.ts");const c=s.Debug.parts.RuleManager;class d extends r.HasLog{rules=[];ruleManagerId=Math.floor(99999*Math.random());constructor(t){super("Tlb.RlMngr",t.log,"constructor"),this.log.add("tempId:"+this.ruleManagerId)}load(t){const e=this.log.call("load",`${()=>t.length}`);return Array.isArray(t)?(t.forEach((t=>{if("string"==typeof t)try{this.rules.push(new n.BuildRule(t,this.log))}catch(t){throw t}else console.error("tried to parse a toolbar rule and expected a string, but got something else")})),e.return(this.rules,"final rules")):e.return([],"raw is empty")}addDeveloperInfos(t){if(this.debugAdded)return;if(t.system.error){const t=new i.Note({note:"<strong>Server Insights Logs</strong> can help <br> you debug server errors.",asHtml:!0});this.rules.push(n.BuildRule.Create({name:"insights",ui:{note:t,color:"red"},pos:10,log:this.log}))}let e=t.system.problems;if(!(e?.length>0))return;const[o,s]=(0,l.addStandardObsoleteButtons)(this.log,e,t.app.id);e=o,s.forEach((t=>this.rules.push(t))),c&&console.log("2dm - has problems",e);const r=e.map(((t,e)=>{const o=new i.Note({type:t.severity,note:t.message?.replace("\n","<br>"),asHtml:!0,interactive:!0});return t.link&&(o.links=[{url:t.link,label:"see docs",primary:!0}]),n.BuildRule.Create({name:"info",ui:{note:o},params:{link:t.link},pos:20+e,log:this.log})}));c&&console.log("2dm - rules",r),r.forEach((t=>this.rules.push(t)))}debugAdded=!1;find(t){return this.rules.find((e=>e.id===t))}filter(t){return this.rules.filter(t)}getSettings(){const t=this.getSystemRuleS(a.BuildSteps.settings)||[],e=Object.assign({},...t.slice(0,1).map((t=>t?.params))),o=this.getToolbar();return o&&t.unshift(o),{ui:Object.assign({},...t.map((t=>t?.ui))),params:e}}getParams=()=>this.getSystemRule(a.BuildSteps.params)||this.getToolbar();getToolbar=()=>this.getSystemRule(a.BuildSteps.toolbar);getAdd=()=>this.filter((t=>t.operator===n.Operations.add||t.operator===n.Operations.addAuto));getRemoveGroups=()=>this.filter((t=>t.operator===n.Operations.remove&&t.step===a.BuildSteps.group));getSystemRule(t){return this.rules.find((e=>e.operator===n.Operations.system&&e.step===t))}getSystemRuleS(t){return this.rules.filter((e=>e.operator===n.Operations.system&&e.step===t))}}},"./src/toolbar/rules/rule-operators.ts":(t,e,o)=>{"use strict";var n;o.r(e),o.d(e,{Operations:()=>n}),function(t){t.add="+",t.addAuto="±",t.remove="-",t.system="$",t.modify="%"}(n||(n={}))},"./src/toolbar/rules/rule-params-helper.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{RuleParamsHelper:()=>i});var n=o("./src/core/index.ts");const s="prefill:",r="filter:";class i{static processParams(t,e){const o=e.call("processParams"),a=i.extractSubKeys(t,s,e);a&&(t.prefill=a);const l=i.extractSubKeys(t,r,e);l&&(t.filters=l);const c=i.extractSubKeys(t,"form:",e);c&&(t.form=c);const d=i.extractSubKeys(t,"dialogSettings:",e);d&&(t.dialogSettings=d);const u=i.extractSubKeys(t,"context:",e);return t.metadata&&(delete t.metadata,o.add("params had additional metadata - invalid, will remove. Use 'for' instead",null,n.LogEntryOptions.error)),t.for&&(t.metadata=i.processMetadata(t,e)),o.return({params:t,context:u})}static processMetadata(t,e){const o=e.call("processMetadata"),s=t.for;if(!s)return o.return(void 0,"no metadata");if(delete t.for,-1===s.indexOf(","))return o.return({key:s},"only has key");const r=s.split(",").map((t=>t.trim()));if(3!==r.length)return o.return(void 0,`error: metadata-for parts count expected 3: ${r.length}`,n.LogEntryOptions.error);const i=+r[0];if(isNaN(i))return o.return(void 0,`error: first key part is not number - got ${i}`,n.LogEntryOptions.error);const a=r[1];if("string"!==a&&"guid"!==a&&"number"!==a)return o.return(void 0,`error: key is not known type, should be string, guid or number, but got ${a}`,n.LogEntryOptions.error);const l=r[2];return null==l||""===l?o.return(void 0,`error: key strange value: '${l}'`,n.LogEntryOptions.error):t.contentType&&null!=t.entityId?o.return({key:l,targetType:i,keyType:a}):o.return(void 0,"error: contentType and entityId missing",n.LogEntryOptions.error)}static extractSubKeys(t,e,o){const n=o.call("processSubMultiKeys");if(!t)return n.return(void 0,"no params");const a=Object.keys(t).filter((t=>0===t.indexOf(e)));if(!a||0===a.length)return n.return(void 0,`no speciall '${e}' keys`);const l=e.length,c={};return a.forEach((o=>{let n=t[o];!0===n||!1===n?n=n.toString():e===r?n=i.filterValues(n):e===s&&(n=i.prefillValues(n)),c[o.substring(l)]=n,delete t[o]})),n.return(c,"got list of multi-keys")}static filterValues(t){if("string"==typeof t&&t.length>0&&"["===t[0]&&"]"===t[t.length-1])try{return JSON.parse(t)}catch{console.warn(`filter:[] value is not a valid JSON array: ${t}`)}return t}static prefillValues(t){if(!t||"string"!=typeof t)return t;if(-1===t.indexOf(","))return t;if(t.indexOf('"')>=0||t.indexOf("'")>=0)return t;const e=t.split(",").map((t=>t.trim())),o=e.filter((t=>null!==t.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i)));return o&&o.length===e.length?e:t}}},"./src/toolbar/rules/rule-params.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/toolbar/rules/rule.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{BuildRule:()=>l});var n=o("./src/toolbar/rules/index.ts"),s=o("./src/constants/rules.ts"),r=o("./src/core/index.ts"),i=o("./src/toolbar/templates/index.ts"),a=o("./src/toolbar/rules/build-steps.ts");class l extends r.HasLog{ruleString;id;name;step;operator;group=i.TemplateConstants.NameDefault;pos=0;params={};ui={};context={};constructor(t,e){super("Tlb.BdRule",e),this.ruleString=t,t?this.load():this.log.add("rule is empty")}static Create({name:t,ui:e,params:o,pos:s,log:r}){var i=new l("",r);return i.name=t,i.ui=e??{},i.operator=n.Operations.add,i.setIdBasedOnOperation(i.name),i.params=o??{},s&&(i.pos=s),i}overrideShow(){return this.operator!==n.Operations.remove&&(this.operator===n.Operations.add||(this.operator!==n.Operations.addAuto&&this.operator===n.Operations.modify?this.ui?.show:void 0))}load(){const t=this.log.call("load",this.ruleString),e=function(t){const e=/^([^\/?#]*)?([^?#]*)(\?([^#]*))?(#(.*))?/i.exec(t);return e&&null!==e?{key:e[1],params:e[4],button:e[6]}:void 0}(this.ruleString);if(!e.key)return t.done("no key, won't load");if(this.loadHeader(e.key),e.params){const t=this.loadParamsAndPrefill(e.params);this.params=t.params,this.context=t.context}return t.done()}loadHeader(t){const e=this.log.call("loadHeader",t),o=this.splitParamsArray(t);let s=o?.[0]?.[0]||n.RuleConstants.Keys.None,r=s[0];const i=Object.values(n.Operations).includes(r);i||(r=s===a.BuildSteps.params||s===a.BuildSteps.settings||s===a.BuildSteps.toolbar?n.Operations.system:n.Operations.add),this.operator=r,e.add(`name part '${s}', firstChar '${r}'`),s=i?s.substring(1):s;const l=Object.values(a.BuildSteps).includes(s);return this.step=l?s:a.BuildSteps.button,this.setIdBasedOnOperation(s),this.name=o?.[0]?.[1]||s,o.length>1&&this.leadHeaderAndUi(s,o.slice(1)),e.done()}setIdBasedOnOperation(t){this.id=this.operator===n.Operations.add||this.operator===n.Operations.addAuto?"rndId"+Math.floor(99999*Math.random()):t}leadHeaderAndUi(t,e){const o=this.log.call("loadHeaderParts");if(!e.length)return o.done("nothing to load");const n=this.dicToArray(e);return n.id&&(this.id=n.id),n.name&&(this.name=n.name),"string"==typeof n.group&&(this.group=n.group,delete n.group),null!=n.pos&&(this.pos=Number(n.pos),Object.is(this.pos,-0)&&(this.pos=-1)),t!==a.BuildSteps.settings&&t!==a.BuildSteps.toolbar&&"string"==typeof n.show&&(n.show="true"===n.show),this.ui=n,o.return(this.ui,"button rules")}loadParamsAndPrefill(t){const e=this.log.call("loadParams",t),o=this.splitParamsDic(t);e.data("params",o);const s=n.RuleParamsHelper.processParams(o,this.log);return e.return(s)}dicToArray(t){return t.reduce(((t,e)=>(t[e[0]]=e[1],t)),{})}splitParamsDic(t){return this.dicToArray(this.splitParamsArray(t))}splitParamsArray(t){return t?t.split("&").map((t=>{let e=t.indexOf("=");e<0&&(e=t.length);const o=[t.slice(0,e),t.slice(e+1)],n=o[0];let r=o[1];if(r?.indexOf("%")>-1&&(r=decodeURIComponent(r)),"True"===r||"true"===r)return[n,!0];if("False"===r||"false"===r)return[n,!1];if(!isNaN(+r))return[n,Number(r)];if("string"==typeof r&&r.startsWith(s.prefixBase64)){const t=r.split(s.prefixBase64)[1];return[n,window.atob(t)]}if("string"==typeof r&&r.startsWith(s.prefixJson64)){const t=r.split(s.prefixJson64)[1];return[n,JSON.parse(window.atob(t))]}return[n,r]})):[]}}},"./src/toolbar/rules/rules-obsolete-code.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{addStandardObsoleteButtons:()=>l});var n=o("./src/commands/command/command-insights.ts"),s=o("./src/toolbar/rules/rule.ts");const r={color:"orange",icon:'<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path d="M480-120q-65 0-121-31t-83-89H160v-60h92q-7-26-7-52.5V-406h-86v-60h86q0-29 .5-57.5T254-580h-94v-60h120q14-28 37-49t51-35l-77-76 40-40 94 94q28-10 56.5-10t56.5 10l94-94 40 40-76 76q28 14 49.5 35.5T683-640h118v60h-95q9 28 8.5 56.5T714-466h87v60h-87q0 27 .5 53.5T708-300h93v60H685q-26 59-82.5 89.5T480-120Zm0-60q72 0 123-50.5T654-353v-167q0-72-51-122.5T480-693q-72 0-123 50.5T306-520v167q0 72 51 122.5T480-180Zm-80-140h160v-60H400v60Zm0-173h160v-60H400v60Zm80 57h.5-.5.5-.5.5-.5.5-.5Z"/></svg>',note:{note:"<strong>Obsolete Code detected in this thing-to-replace</strong>\n    <br>\n    This uses obsolete code which will be removed soon. You should fix the code so it won't break on a future update.",allowHtml:!0}},i="obsolete",a="obsolete-app";function l(t,e,o){var n=[];return void 0!==e.find((t=>t.code===i))?n.push(c(t,o,"Razor","red")):void 0!==e.find((t=>t.code===a))&&n.push(c(t,o,"App",null)),[e.filter((t=>t.code!==i&&t.code!=a)),n]}function c(t,e,o,i){return s.BuildRule.Create({name:"insights",ui:{...r,color:i??r.color,note:{...r.note,links:[{url:(0,n.insightsUrl)(`logs?key=warnings-obsolete&filter=AppId=${e}`),label:"Obsolete this App",primary:!0},{url:(0,n.insightsUrl)("logs?key=warnings-obsolete"),label:"all obsolete",primary:!1}],note:r.note.note.replace("thing-to-replace",o)}},params:{part:"Logs?&key=warnings-obsolete"},pos:11,log:t})}},"./src/toolbar/tag-toolbars/tag-toolbar-manager.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{TagToolbarManager:()=>s});var n=o("./src/plumbing/index.ts");class s{static TagToolbarAttr="data-tagtoolbar";static TagToolbarForAttr="data-tagtoolbar-for";static mousePosition={x:0,y:0};static getNextToolbarId(){return s.lastMenuId++}static lastMenuId=0;static getBodyScrollOffset(){const t=document.body.style.position,e=document.body;if("relative"===t||"absolute"===t){const t=n.NoJQ.offset(e);return{top:t.top,left:t.left}}return{top:0,left:0}}static cleanupOrphanedToolbars(){document.querySelectorAll(`[${s.TagToolbarForAttr}]`).forEach((t=>{const e=t.getAttribute(s.TagToolbarForAttr);document.querySelectorAll(`[${s.TagToolbarAttr}="${e}"]`).length||t.remove()}))}}window.addEventListener("mousemove",(t=>{s.mousePosition.x=t.clientX,s.mousePosition.y=t.clientY}))},"./src/toolbar/tag-toolbars/tag-toolbar.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{TagToolbar:()=>a});var n=o("./src/toolbar/index.ts"),s=o("./src/plumbing/index.ts"),r=o("./src/toolbar/config/toolbar-settings.ts"),i=o("./src/toolbar/toolbar-lifecycle.ts");class a{hoverTag;context;translator;toolbarElement=null;initialized=!1;follow;alwaysShow=!1;delayShow=0;constructor(t,e,o){this.hoverTag=t,this.context=e,this.translator=o;const n=e.toolbar.settings;this.follow=n.follow,this.alwaysShow=n.show===r.TLB_SHOW_ALWAYS,this.delayShow=n.delayShow??0,this.addMouseEvents(t),this.alwaysShow&&this.showPermanently()}addMouseEvents(t){t.addEventListener("mouseenter",(()=>{0==this.delayShow?this.show():this.delayShowTimeout=setTimeout((()=>{this.show()}),this.delayShow)})),this.alwaysShow||t.addEventListener("mouseleave",(t=>{this.delayShowTimeout&&clearTimeout(this.delayShowTimeout),this.initializeIfNecessary();const e=t.relatedTarget;this.toolbarElement.contains(e)||this.toolbarElement===e||this.hide()}))}delayShowTimeout=null;initializeIfNecessary(){if(this.initialized)return;const t=n.TagToolbarManager.getNextToolbarId(),e=`${this.context.instance.id}-${this.context.contentBlockReference.id}-${t}`;this.toolbarElement=new n.ToolbarRenderer(this.context).generate(),this.alwaysShow||this.toolbarElement.addEventListener("mouseleave",(t=>{const e=t.relatedTarget;this.hoverTag.contains(e)||this.hoverTag===e||this.hide()})),document.body.append(this.toolbarElement),this.toolbarElement.setAttribute(n.TagToolbarManager.TagToolbarForAttr,e),this.hoverTag.setAttribute(n.TagToolbarManager.TagToolbarAttr,e);const o=this.toolbarElement.style;o.position="absolute",this.alwaysShow||(o.display="none",o.transition="top 0.5s ease-out"),this.translator?.autoTranslateMenus(),this.initialized=!0,i.ToolbarLifecycle.raiseToolbarInitEvent(this.toolbarElement,this.hoverTag,this.context)}updatePosition(t){const e={top:"auto",left:"auto",right:"auto",viewportOffset:this.hoverTag.getBoundingClientRect().top,bodyOffset:n.TagToolbarManager.getBodyScrollOffset(),tagScrollOffset:0,tagOffset:s.NoJQ.offset(this.hoverTag),tagWidth:this.hoverTag.offsetWidth,tagHeight:this.hoverTag.offsetHeight,mousePos:n.TagToolbarManager.mousePosition,win:{scrollY:window.scrollY,width:document.documentElement.clientWidth},padding:4};e.tagScrollOffset=Math.min(e.viewportOffset-e.bodyOffset.top,0),e.top=e.tagOffset.top+4-e.bodyOffset.top;const o=this.follow===r.TLB_FOLLOW_ALWAYS||this.follow===r.TLB_FOLLOW_INITIAL&&t||this.follow===r.TLB_FOLLOW_SCROLL&&0!==e.tagScrollOffset,i=this.toolbarElement.classList;o?e.top=e.mousePos.y+e.win.scrollY-e.bodyOffset.top-10:i.contains(r.TlbHoverPrefix+r.TLB_HOV_MID)&&(e.top=e.top+e.tagHeight/2-20),i.contains(r.TlbHoverPrefix+r.TLB_HOV_RIGHT)?e.right=e.win.width-e.tagOffset.left-e.tagWidth+0-e.bodyOffset.left:e.left=e.tagOffset.left+4+e.bodyOffset.left;const a=this.toolbarElement.style;a.top="number"==typeof e.top?`${e.top}px`:e.top,a.left="number"==typeof e.left?`${e.left}px`:e.left,a.right="number"==typeof e.right?`${e.right}px`:e.right}hide(){this.alwaysShow||(this.toolbarElement.style.display="none",this.disableScrollWatcher())}show(){this.initializeIfNecessary(),this.toolbarElement.style.display="inline-flex",this.updatePosition(!0),this.activateScrollWatcher()}showPermanently(){this.show(),window.addEventListener("load",this.updateFn),document.addEventListener("readystatechange",this.updateFn),window.addEventListener("resize",this.updateFn)}watcherActive=!1;updateFn=()=>this.updatePosition(!1);activateScrollWatcher(){this.watcherActive||(this.follow===r.TLB_FOLLOW_SCROLL||this.follow===r.TLB_FOLLOW_ALWAYS)&&(window.addEventListener("scroll",this.updateFn),this.follow===r.TLB_FOLLOW_ALWAYS&&window.addEventListener("mousemove",this.updateFn),this.watcherActive=!0)}disableScrollWatcher(){this.watcherActive&&(window.removeEventListener("scroll",this.updateFn),window.removeEventListener("mousemove",this.updateFn),this.watcherActive=!1)}}},"./src/toolbar/templates/constants.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{TemplateConstants:()=>n});const n={NameDefault:"default",NameEmpty:"empty",GroupDefault:"default",GroupList:"list",GroupEditAdvanced:"edit-advanced",GroupView:"view",GroupApp:"app",GroupUnknown:"unknown",ButtonSeparator:","}},"./src/toolbar/templates/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{TemplateConstants:()=>n.TemplateConstants,TemplateEditor:()=>d.TemplateEditor,ToolbarTemplate:()=>l.ToolbarTemplate,ToolbarTemplateDefault:()=>r.ToolbarTemplateDefault,ToolbarTemplateEmpty:()=>s.ToolbarTemplateEmpty,ToolbarTemplateGroup:()=>c.ToolbarTemplateGroup,ToolbarTemplateManager:()=>a.ToolbarTemplateManager,ToolbarTemplateSublist:()=>i.ToolbarTemplateSublist});var n=o("./src/toolbar/templates/constants.ts"),s=(o("./src/toolbar/templates/list-with-cursor.ts"),o("./src/toolbar/templates/template-empty.ts")),r=o("./src/toolbar/templates/template-default.ts"),i=o("./src/toolbar/templates/template-sublist.ts"),a=o("./src/toolbar/templates/toolbar-template-manager.ts"),l=o("./src/toolbar/templates/toolbar-template.ts"),c=o("./src/toolbar/templates/toolbar-template-group.ts"),d=o("./src/toolbar/templates/template-editor.ts")},"./src/toolbar/templates/list-with-cursor.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/toolbar/templates/template-default.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarTemplateDefault:()=>s});var n=o("./src/toolbar/templates/index.ts");const s={name:n.TemplateConstants.NameDefault,groups:[{name:n.TemplateConstants.GroupDefault,buttons:["edit","new","metadata","publish","layout"].join(",")},{name:n.TemplateConstants.GroupList,buttons:["add","add-existing","replace","remove","moveup","movedown","list"].join(",")},{name:n.TemplateConstants.GroupEditAdvanced,buttons:["delete"].join(",")},{name:n.TemplateConstants.GroupView,buttons:["template","view","data","query","fields"].join(","),defaults:{classes:"group-pro"}},{name:n.TemplateConstants.GroupApp,buttons:["app","app-settings","app-resources","system","insights"].join(","),defaults:{classes:"group-pro"}}],defaults:{},params:{},settings:{},_isToolbarTemplate:!0}},"./src/toolbar/templates/template-editor.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{TemplateEditor:()=>a});var n=o("./src/toolbar/templates/index.ts"),s=o("./src/core/index.ts"),r=o("./src/toolbar/rules/index.ts"),i=o("./src/toolbar/templates/constants.ts");class a extends s.HasLog{toolbar;constructor(t){super("Tlb.TplEdt",t.log),this.toolbar=t}addButton(t,e,o,n,s){const r=s>=0;s=Math.abs(s)-(r?0:1);const a=this.log.call("addButton",`..., ${e}, ${o}, ${n}, ${r?"+":"-"}${s}, ${r}`);if(!t)return a.done("no template");let l=this.findGroupOrDefault(t,e);l||(l=this.addGroup(t,e,1e3));const c=l.buttons?.split(i.TemplateConstants.ButtonSeparator)??[],d=o===n?n:`${o}=${n}`,u=this.correctPosStartEnd(c,s,r),p=r?this.findInsertPosition(l,u):u;a.add(`pos: ${s}, startEnd: ${u}, insert:${p}`),c.splice(p,0,d),l.buttons=c.filter((t=>t.length)).join(i.TemplateConstants.ButtonSeparator),a.done()}findInsertPosition(t,e){return t._insertCursor=t._insertCursor||0,0===e&&(e=t._insertCursor++),e}correctPosStartEnd(t,e,o){return o||(e=t.length-e)>=0?e:t.length}add(t,e){e.forEach((e=>{e.step===r.BuildSteps.group?this.addGroup(t,e.name,e.pos):this.addButton(t,e.group,e.id,e.name,e.pos)}))}addGroup(t,e,o){const s=o>=0;o=Math.abs(o)-(s?0:1);const r=this.log.call("addGroup",`..., ${e}, ${s?"+":"-"}${o}`);this.ensureGroups(t);const i=this.findGroup(t,e);if(i)return r.return(i,"already exists");const a=new n.ToolbarTemplateGroup;a.name=e;const l=this.correctPosStartEnd(t.groups,o,s),c=s?this.findInsertPosition(t,l):l;return t.groups.splice(c,0,a),r.return(a,"created")}removeGroup(t,e){const o=this.findGroup(t,e);if(!o)return;const n=t.groups.indexOf(o);n<0||t.groups.splice(n,1)}ensureGroups=t=>{t.groups||(t.groups=[])};findGroup=(t,e)=>t.groups.find((t=>t.name===e));findGroupOrDefault(t,e){const o=this.log.call("findGroup",e);if(this.ensureGroups(t),0===t.groups.length)return o.return(null,"no groups");const n=this.findGroup(t,e);return n?o.return(n,"found"):o.return(t.groups[0],"not found, return first)")}}},"./src/toolbar/templates/template-empty.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarTemplateEmpty:()=>s});var n=o("./src/toolbar/templates/index.ts");const s={name:n.TemplateConstants.NameEmpty,groups:[{name:n.TemplateConstants.GroupDefault,buttons:""}],defaults:{},params:{},settings:{},_isToolbarTemplate:!0}},"./src/toolbar/templates/template-sublist.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarTemplateSublist:()=>s});var n=o("./src/toolbar/templates/index.ts");const s={name:"sublist",groups:[{name:n.TemplateConstants.GroupDefault,buttons:"edit,new,publish",defaults:{classes:"group-inlist"}},{name:n.TemplateConstants.GroupList,buttons:"add-existing,replace,remove,moveup,movedown,instance-list",defaults:{classes:"group-inlist"}},{name:n.TemplateConstants.GroupEditAdvanced,buttons:"delete",defaults:{classes:"group-inlist"}}],defaults:{},params:{},settings:{},_isToolbarTemplate:!0}},"./src/toolbar/templates/toolbar-template-group.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarTemplateGroup:()=>s});var n=o("./src/toolbar/templates/index.ts");class s{name=n.TemplateConstants.GroupUnknown;buttons="";defaults={};_insertCursor;static is(t){return void 0!==t.buttons}}},"./src/toolbar/templates/toolbar-template-manager.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarTemplateManager:()=>i});var n=o("./src/toolbar/templates/index.ts"),s=o("./src/core/index.ts"),r=o("./src/plumbing/index.ts");class i extends s.HasLog{static singleton(){return this._singleton??(this._singleton=new i)}static _singleton;configTemplateList=[];list={};constructor(){super("Tlb.TmpMan",null,"build"),s.Insights.add("system","toolbar-template-manager",this.log),this.add(n.ToolbarTemplateEmpty),this.add(n.ToolbarTemplateDefault),this.add(n.ToolbarTemplateSublist)}copy(t){return r.Obj.DeepClone(this.findOrShowError(t))}findOrShowError(t){const e=this.list[t];if(e)return e;throw`try to find toolbar template '${t}' but not found`}add(t){this.list[t.name]=t}}},"./src/toolbar/templates/toolbar-template.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarTemplate:()=>n});class n{name;groups=[];defaults={};params={};settings={};debug;_isToolbarTemplate;_insertCursor;static is(t){return t._isToolbarTemplate}static hasGroups(t){return Array.isArray(t.groups)}}},"./src/toolbar/templates/toolbar-when-no-toolbar-provided.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{getToolbarWhenNoneProvided:()=>s});var n=o("./src/toolbar/config/toolbar-settings.ts");function s(){return{toolbar:[n.ToolbarSettings.getForEmptyAsRule()]}}},"./src/toolbar/toolbar-event-arguments.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/toolbar/toolbar-global-enable-shake.ts":(t,e,o)=>{"use strict";o.r(e);var n=o("./src/plumbing/index.ts"),s=o("./src/toolbar/config/index.ts");const r=o("./node_modules/shake.js/shake.js");n.NoJQ.ready((()=>{new r({callback:function(){document.body.classList.toggle(`${s.TlbShowPrefix}all`)}}).start()}))},"./src/toolbar/toolbar-lifecycle.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarLifecycle:()=>r});var n=o("./src/constants/index.ts"),s=o("./src/workflow/index.ts");class r{static raiseToolbarInitEvent(t,e,o){const r=new s.ToolbarWorkflowManager(null);r.attach(t,o);const i=new CustomEvent(n.C.Toolbar.eventNames.onInit,{bubbles:!0,detail:{element:t,identifier:o.toolbar?.identifier,workflow:r}});e?.dispatchEvent(i)}}},"./src/toolbar/toolbar-manager.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarManager:()=>i});var n=o("./src/toolbar/index.ts"),s=o("./src/core/index.ts"),r=o("./src/toolbar/config-loaders/toolbar-config-loader.ts");class i extends s.HasLog{static singleton(){return this._singleton??(this._singleton=new i)}static _singleton;toolbarFinder;constructor(){super("Tlb.Mngr",null,"init"),s.Insights.add("system","toolbar-manager",this.log),this.toolbarFinder=new n.ToolbarConfigFinderAndInitializer(this)}buildModule(t){this.toolbarFinder.buildDnnModule(t)}build(t){this.toolbarFinder.build(t)}loadConfig(t,e){return this.getLoader(JSON.stringify(e.toolbar||"")).load(t,e)}getLoader(t){const e=new r.ToolbarConfigLoader(this);return s.Insights.add("toolbar",t,e.log),e}}},"./src/workflow/index.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarWorkflowManager:()=>n.ToolbarWorkflowManager,WorkflowHelper:()=>i.WorkflowHelper,WorkflowPhases:()=>r.WorkflowPhases,WorkflowStepCodeArguments:()=>s.WorkflowStepCodeArguments,WorkflowStepHelper:()=>a.WorkflowStepHelper});var n=o("./src/workflow/toolbar-workflow-manager.ts"),s=o("./src/workflow/workflow-step-code-arguments.ts"),r=o("./src/workflow/workflow-phases.ts"),i=(o("./src/workflow/workflow-step.ts"),o("./src/workflow/workflow.ts"),o("./src/workflow/workflow-helper.ts")),a=(o("./src/workflow/toolbar-with-workflow.ts"),o("./src/workflow/workflow-step-helper.ts"))},"./src/workflow/toolbar-with-workflow.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/workflow/toolbar-workflow-manager.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{ToolbarWorkflowManager:()=>a});var n=o("./src/workflow/index.ts"),s=o("./src/commands/index.ts"),r=o("./src/core/index.ts"),i=o("./src/workflow/workflow-helper.ts");class a extends r.HasLog{isDummy;steps=[];constructor(t,e=!1){super("Cmd.Wrkflw",t,"constructor"),this.isDummy=e}add(t){t&&(Array.isArray(t)?t.forEach((t=>this.addOne(t))):this.addOne(t))}addOne(t){t=n.WorkflowStepHelper.initDefaults(t);const e=this.log.call("add",`'${t.name}' for '${t.command}'-'${t.phase}'`);if(!t){const t="Trying to add workflow step but didn't get anything";throw e.add(t),t}this.steps.push(t),e.done()}run(t){const e=this.log.call("run",`'${t.command}' for '${t.phase}'`);if(this.isDummy)return e.done("Dummy workflow, nothing to run, will return a resolved promise"),l(t);const o=this.steps.filter((e=>e.command===t.command||e.command===s.WorkflowCommands.all)).filter((e=>e.phase===t.phase||e.phase===n.WorkflowPhases.all)).filter((t=>t.code)).sort((t=>t.priority));return 0===o.length?(e.done("no steps found for this command / phase, will return a resolved promise"),l(t)):new Promise(((e,n)=>{let s=Promise.resolve(t);for(let e=0;e<o.length;e++){const n=o[e];s=s.then((e=>this.runNextPromiseIfNotCancelled(e,t,n.code)))}s.then((t=>{e(t)})),s.catch(n)}))}attach(t,e){const o=this.log.call("attach");t&&(t.commandWorkflow=this,r.Insights.add("workflow",e.toolbar?.identifier,this.log),o.done())}runNextPromiseIfNotCancelled(t,e,o){const n=i.WorkflowHelper.isCancelled(t);return(t=t&&"boolean"!=typeof t?t:{...e}).cancel=n,n?l(t):o(t)}}function l(t){return Promise.resolve(t)}},"./src/workflow/workflow-helper.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{WorkflowHelper:()=>r});var n=o("./src/workflow/index.ts");let s;class r{static getWorkflow(t){if(!t)return r.getDummyManager();let e=0,o=t;for(;o&&e++<100;){const t=o.commandWorkflow;if(t)return t;o=o.parentElement}return r.getDummyManager()}static getDummyManager(){return s||(s=new n.ToolbarWorkflowManager(null,!0)),s}static isCancelled(t){return this._isCancelled(t)}static _isCancelled(t){return null!=t&&(!1===t||!0===t.cancel)}}},"./src/workflow/workflow-phases.ts":(t,e,o)=>{"use strict";var n;o.r(e),o.d(e,{WorkflowPhases:()=>n}),function(t){t.all="all",t.before="before",t.after="after"}(n||(n={}))},"./src/workflow/workflow-step-code-arguments.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{WorkflowStepCodeArguments:()=>n});class n{command;phase;context;result;constructor(t,e,o,n=null){this.command=t,this.phase=e,this.context=o,this.result=n}cancel=!1}},"./src/workflow/workflow-step-helper.ts":(t,e,o)=>{"use strict";o.r(e),o.d(e,{WorkflowStepHelper:()=>r});var n=o("./src/workflow/index.ts"),s=o("./src/commands/index.ts");class r{static initDefaults(t){if(t.name=t.name??"",t.command=t.command??s.WorkflowCommands.all,t.phase=t.phase??n.WorkflowPhases.before,t.priority=t.priority??1,!t.code||"function"!=typeof t.code)throw"Tried preparing a workflow step, but the promise either doesn't exist or is not a promise factory";return t}}},"./src/workflow/workflow-step.ts":(t,e,o)=>{"use strict";o.r(e)},"./src/workflow/workflow.ts":(t,e,o)=>{"use strict";o.r(e)},"./node_modules/i18next-http-backend/esm/getFetch.cjs":(t,e,o)=>{var n;if("function"==typeof fetch&&(void 0!==o.g&&o.g.fetch?n=o.g.fetch:"undefined"!=typeof window&&window.fetch&&(n=window.fetch)),"undefined"==typeof window||void 0===window.document){var s=n||o("./node_modules/cross-fetch/dist/browser-ponyfill.js");s.default&&(s=s.default),e.default=s,t.exports=e.default}},"./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":(t,e,o)=>{"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":(t,e,o)=>{"use strict";function n(t){if(Array.isArray(t))return t}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":(t,e,o)=>{"use strict";function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js":(t,e,o)=>{"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/createClass.js":(t,e,o)=>{"use strict";function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}o.r(e),o.d(e,{default:()=>s})},"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(t,e,o)=>{"use strict";function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js":(t,e,o)=>{"use strict";function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/inherits.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,n.default)(t,e)}},"./node_modules/@babel/runtime/helpers/esm/iterableToArray.js":(t,e,o)=>{"use strict";function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":(t,e,o)=>{"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>r});var n=o("./node_modules/@babel/runtime/helpers/esm/typeof.js"),s=o("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");function r(t,e){if(e&&("object"===(0,n.default)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,s.default)(t)}},"./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":(t,e,o)=>{"use strict";function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/toArray.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var n=o("./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js"),s=o("./node_modules/@babel/runtime/helpers/esm/iterableToArray.js"),r=o("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"),i=o("./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");function a(t){return(0,n.default)(t)||(0,s.default)(t)||(0,r.default)(t)||(0,i.default)()}},"./node_modules/@babel/runtime/helpers/esm/typeof.js":(t,e,o)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}o.r(e),o.d(e,{default:()=>n})},"./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>s});var n=o("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");function s(t,e){if(t){if("string"==typeof t)return(0,n.default)(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?(0,n.default)(t,e):void 0}}},"./node_modules/i18next-http-backend/esm/index.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var n=o("./node_modules/i18next-http-backend/esm/utils.js"),s=o("./node_modules/i18next-http-backend/esm/request.js");function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,e,o){return function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}({},e,o||"")},request:s.default,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},l=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.services=e,this.options=o,this.allOptions=n,this.type="backend",this.init(e,o,n)}var e,o;return e=t,o=[{key:"init",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=(0,n.defaults)(o,this.options||{},a()),this.allOptions=s,this.services&&this.options.reloadInterval&&setInterval((function(){return e.reload()}),this.options.reloadInterval)}},{key:"readMulti",value:function(t,e,o){this._readAny(t,t,e,e,o)}},{key:"read",value:function(t,e,o){this._readAny([t],t,[e],e,o)}},{key:"_readAny",value:function(t,e,o,s,r){var i=this,a=this.options.loadPath;"function"==typeof this.options.loadPath&&(a=this.options.loadPath(t,o)),(a=(0,n.makePromise)(a)).then((function(n){if(!n)return r(null,{});var a=i.services.interpolator.interpolate(n,{lng:t.join("+"),ns:o.join("+")});i.loadUrl(a,r,e,s)}))}},{key:"loadUrl",value:function(t,e,o,n){var s=this;this.options.request(this.options,t,void 0,(function(r,i){if(i&&(i.status>=500&&i.status<600||!i.status))return e("failed loading "+t+"; status code: "+i.status,!0);if(i&&i.status>=400&&i.status<500)return e("failed loading "+t+"; status code: "+i.status,!1);if(!i&&r&&r.message&&r.message.indexOf("Failed to fetch")>-1)return e("failed loading "+t+": "+r.message,!0);if(r)return e(r,!1);var a,l;try{a="string"==typeof i.data?s.options.parse(i.data,o,n):i.data}catch(e){l="failed parsing "+t+" to json"}if(l)return e(l,!1);e(null,a)}))}},{key:"create",value:function(t,e,o,n,s){var r=this;if(this.options.addPath){"string"==typeof t&&(t=[t]);var i=this.options.parsePayload(e,o,n),a=0,l=[],c=[];t.forEach((function(o){var n=r.options.addPath;"function"==typeof r.options.addPath&&(n=r.options.addPath(o,e));var d=r.services.interpolator.interpolate(n,{lng:o,ns:e});r.options.request(r.options,d,i,(function(e,o){a+=1,l.push(e),c.push(o),a===t.length&&s&&s(l,c)}))}))}}},{key:"reload",value:function(){var t=this,e=this.services,o=e.backendConnector,n=e.languageUtils,s=e.logger,r=o.language;if(!r||"cimode"!==r.toLowerCase()){var i=[],a=function(t){n.toResolveHierarchy(t).forEach((function(t){i.indexOf(t)<0&&i.push(t)}))};a(r),this.allOptions.preload&&this.allOptions.preload.forEach((function(t){return a(t)})),i.forEach((function(e){t.allOptions.ns.forEach((function(t){o.read(e,t,"read",null,null,(function(n,r){n&&s.warn("loading namespace ".concat(t," for language ").concat(e," failed"),n),!n&&r&&s.log("loaded namespace ".concat(t," for language ").concat(e),r),o.loaded("".concat(e,"|").concat(t),n,r)}))}))}))}}}],o&&i(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();l.type="backend";const c=l},"./node_modules/i18next-http-backend/esm/request.js":(t,e,o)=>{"use strict";var n;o.r(e),o.d(e,{default:()=>u});var s,r,i,a=o("./node_modules/i18next-http-backend/esm/utils.js"),l=o("./node_modules/i18next-http-backend/esm/getFetch.cjs");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}"function"==typeof fetch&&("undefined"!=typeof global&&global.fetch?s=global.fetch:"undefined"!=typeof window&&window.fetch&&(s=window.fetch)),(0,a.hasXMLHttpRequest)()&&("undefined"!=typeof global&&global.XMLHttpRequest?r=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(r=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?i=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(i=window.ActiveXObject)),s||!n&&!(n=o.t(l,2))||r||i||(s=l||n||(n=o.t(l,2))),"function"!=typeof s&&(s=void 0);var d=function(t,e){if(e&&"object"===c(e)){var o="";for(var n in e)o+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e[n]);if(!o)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+o.slice(1)}return t};const u=function(t,e,o,n){return"function"==typeof o&&(n=o,o=void 0),n=n||function(){},s?function(t,e,o,n){t.queryStringParams&&(e=d(e,t.queryStringParams));var r=(0,a.defaults)({},"function"==typeof t.customHeaders?t.customHeaders():t.customHeaders);o&&(r["Content-Type"]="application/json"),s(e,(0,a.defaults)({method:o?"POST":"GET",body:o?t.stringify(o):void 0,headers:r},"function"==typeof t.requestOptions?t.requestOptions(o):t.requestOptions)).then((function(t){if(!t.ok)return n(t.statusText||"Error",{status:t.status});t.text().then((function(e){n(null,{status:t.status,data:e})})).catch(n)})).catch(n)}(t,e,o,n):(0,a.hasXMLHttpRequest)()||"function"==typeof ActiveXObject?function(t,e,o,n){o&&"object"===c(o)&&(o=d("",o).slice(1)),t.queryStringParams&&(e=d(e,t.queryStringParams));try{var s;(s=r?new r:new i("MSXML2.XMLHTTP.3.0")).open(o?"POST":"GET",e,1),t.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!t.withCredentials,o&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var a=t.customHeaders;if(a="function"==typeof a?a():a)for(var l in a)s.setRequestHeader(l,a[l]);s.onreadystatechange=function(){s.readyState>3&&n(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(o)}catch(t){console&&console.log(t)}}(t,e,o,n):void 0}},"./node_modules/i18next-http-backend/esm/utils.js":(t,e,o)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}o.r(e),o.d(e,{defaults:()=>a,hasXMLHttpRequest:()=>l,makePromise:()=>c});var s=[],r=s.forEach,i=s.slice;function a(t){return r.call(i.call(arguments,1),(function(e){if(e)for(var o in e)void 0===t[o]&&(t[o]=e[o])})),t}function l(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":n(XMLHttpRequest))}function c(t){return function(t){return!!t&&"function"==typeof t.then}(t)?t:Promise.resolve(t)}},"./node_modules/i18next/dist/esm/i18next.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{changeLanguage:()=>gt,createInstance:()=>dt,default:()=>kt,exists:()=>yt,getFixedT:()=>ht,hasLoadedNamespace:()=>xt,init:()=>ut,loadLanguages:()=>Ct,loadNamespaces:()=>wt,loadResources:()=>pt,reloadResources:()=>mt,setDefaultNamespace:()=>vt,t:()=>bt,use:()=>ft});var n=o("./node_modules/@babel/runtime/helpers/esm/typeof.js"),s=o("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=o("./node_modules/@babel/runtime/helpers/esm/createClass.js"),i=o("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=o("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=o("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=o("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=o("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=o("./node_modules/@babel/runtime/helpers/esm/toArray.js");function p(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function m(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(Object(o),!0).forEach((function(e){(0,d.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var f={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},g=new(function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t),this.init(e,o)}return(0,r.default)(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||f,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,o,n){return n&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(o).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,m(m({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}}]),t}()),h=function(){function t(){(0,s.default)(this,t),this.observers={}}return(0,r.default)(t,[{key:"on",value:function(t,e){var o=this;return t.split(" ").forEach((function(t){o.observers[t]=o.observers[t]||[],o.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),n=1;n<e;n++)o[n-1]=arguments[n];if(this.observers[t]){var s=[].concat(this.observers[t]);s.forEach((function(t){t.apply(void 0,o)}))}if(this.observers["*"]){var r=[].concat(this.observers["*"]);r.forEach((function(e){e.apply(e,[t].concat(o))}))}}}]),t}();function b(){var t,e,o=new Promise((function(o,n){t=o,e=n}));return o.resolve=t,o.reject=e,o}function y(t){return null==t?"":""+t}function v(t,e,o){t.forEach((function(t){e[t]&&(o[t]=e[t])}))}function x(t,e,o){function n(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function s(){return!t||"string"==typeof t}for(var r="string"!=typeof e?[].concat(e):e.split(".");r.length>1;){if(s())return{};var i=n(r.shift());!t[i]&&o&&(t[i]=new o),t=Object.prototype.hasOwnProperty.call(t,i)?t[i]:{}}return s()?{}:{obj:t,k:n(r.shift())}}function w(t,e,o){var n=x(t,e,Object);n.obj[n.k]=o}function C(t,e){var o=x(t,e),n=o.obj,s=o.k;if(n)return n[s]}function k(t,e,o){var n=C(t,o);return void 0!==n?n:C(e,o)}function O(t,e,o){for(var n in e)"__proto__"!==n&&"constructor"!==n&&(n in t?"string"==typeof t[n]||t[n]instanceof String||"string"==typeof e[n]||e[n]instanceof String?o&&(t[n]=e[n]):O(t[n],e[n],o):t[n]=e[n]);return t}function T(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function j(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return S[t]})):t}var A="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,L=[" ",",","?","!",";"];function E(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function I(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?E(Object(o),!0).forEach((function(e){(0,d.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):E(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function P(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(t){if(t[e])return t[e];for(var n=e.split(o),s=t,r=0;r<n.length;++r){if(!s)return;if("string"==typeof s[n[r]]&&r+1<n.length)return;if(void 0===s[n[r]]){for(var i=2,a=n.slice(r,r+i).join(o),l=s[a];void 0===l&&n.length>r+i;)i++,l=s[a=n.slice(r,r+i).join(o)];if(void 0===l)return;if(null===l)return null;if(e.endsWith(a)){if("string"==typeof l)return l;if(a&&"string"==typeof l[a])return l[a]}var c=n.slice(r+i).join(o);return c?P(l,c,o):void 0}s=s[n[r]]}return s}}var _=function(t){(0,a.default)(d,t);var e,o,n=(e=d,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.default)(e);if(o){var s=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return(0,l.default)(this,t)});function d(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,s.default)(this,d),e=n.call(this),A&&h.call((0,i.default)(e)),e.data=t||{},e.options=o,void 0===e.options.keySeparator&&(e.options.keySeparator="."),void 0===e.options.ignoreJSONStructure&&(e.options.ignoreJSONStructure=!0),e}return(0,r.default)(d,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,r=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure,i=[t,e];o&&"string"!=typeof o&&(i=i.concat(o)),o&&"string"==typeof o&&(i=i.concat(s?o.split(s):o)),t.indexOf(".")>-1&&(i=t.split("."));var a=C(this.data,i);return a||!r||"string"!=typeof o?a:P(this.data&&this.data[t]&&this.data[t][e],o,s)}},{key:"addResource",value:function(t,e,o,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},r=this.options.keySeparator;void 0===r&&(r=".");var i=[t,e];o&&(i=i.concat(r?o.split(r):o)),t.indexOf(".")>-1&&(n=e,e=(i=t.split("."))[1]),this.addNamespaces(e),w(this.data,i,n),s.silent||this.emit("added",t,e,o,n)}},{key:"addResources",value:function(t,e,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var s in o)"string"!=typeof o[s]&&"[object Array]"!==Object.prototype.toString.apply(o[s])||this.addResource(t,e,s,o[s],{silent:!0});n.silent||this.emit("added",t,e,o)}},{key:"addResourceBundle",value:function(t,e,o,n,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},i=[t,e];t.indexOf(".")>-1&&(n=o,o=e,e=(i=t.split("."))[1]),this.addNamespaces(e);var a=C(this.data,i)||{};n?O(a,o,s):a=I(I({},a),o),w(this.data,i,a),r.silent||this.emit("added",t,e,o)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?I(I({},{}),this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"hasLanguageSomeTranslations",value:function(t){var e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find((function(t){return e[t]&&Object.keys(e[t]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),d}(h),M={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,o,n,s){var r=this;return t.forEach((function(t){r.processors[t]&&(e=r.processors[t].process(e,o,n,s))})),e}};function B(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function D(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?B(Object(o),!0).forEach((function(e){(0,d.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var R={},N=function(t){(0,a.default)(u,t);var e,o,d=(e=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.default)(e);if(o){var s=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return(0,l.default)(this,t)});function u(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,u),e=d.call(this),A&&h.call((0,i.default)(e)),v(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,(0,i.default)(e)),e.options=o,void 0===e.options.keySeparator&&(e.options.keySeparator="."),e.logger=g.create("translator"),e}return(0,r.default)(u,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==t)return!1;var o=this.resolve(t,e);return o&&void 0!==o.res}},{key:"extractFromKey",value:function(t,e){var o=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===o&&(o=":");var n=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,s=e.ns||this.options.defaultNS||[],r=o&&t.indexOf(o)>-1,i=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||function(t,e,o){e=e||"",o=o||"";var n=L.filter((function(t){return e.indexOf(t)<0&&o.indexOf(t)<0}));if(0===n.length)return!0;var s=new RegExp("(".concat(n.map((function(t){return"?"===t?"\\?":t})).join("|"),")")),r=!s.test(t);if(!r){var i=t.indexOf(o);i>0&&!s.test(t.substring(0,i))&&(r=!0)}return r}(t,o,n));if(r&&!i){var a=t.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:t,namespaces:s};var l=t.split(o);(o!==n||o===n&&this.options.ns.indexOf(l[0])>-1)&&(s=l.shift()),t=l.join(n)}return"string"==typeof s&&(s=[s]),{key:t,namespaces:s}}},{key:"translate",value:function(t,e,o){var s=this;if("object"!==(0,n.default)(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var r=void 0!==e.returnDetails?e.returnDetails:this.options.returnDetails,i=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,a=this.extractFromKey(t[t.length-1],e),l=a.key,c=a.namespaces,d=c[c.length-1],p=e.lng||this.language,m=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&"cimode"===p.toLowerCase()){if(m){var f=e.nsSeparator||this.options.nsSeparator;return r?(g.res="".concat(d).concat(f).concat(l),g):"".concat(d).concat(f).concat(l)}return r?(g.res=l,g):l}var g=this.resolve(t,e),h=g&&g.res,b=g&&g.usedKey||l,y=g&&g.exactUsedKey||l,v=Object.prototype.toString.apply(h),x=["[object Number]","[object Function]","[object RegExp]"],w=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,k="string"!=typeof h&&"boolean"!=typeof h&&"number"!=typeof h;if(C&&h&&k&&x.indexOf(v)<0&&("string"!=typeof w||"[object Array]"!==v)){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,h,D(D({},e),{},{ns:c})):"key '".concat(l," (").concat(this.language,")' returned an object instead of string.");return r?(g.res=O,g):O}if(i){var T="[object Array]"===v,S=T?[]:{},j=T?y:b;for(var A in h)if(Object.prototype.hasOwnProperty.call(h,A)){var L="".concat(j).concat(i).concat(A);S[A]=this.translate(L,D(D({},e),{joinArrays:!1,ns:c})),S[A]===L&&(S[A]=h[A])}h=S}}else if(C&&"string"==typeof w&&"[object Array]"===v)(h=h.join(w))&&(h=this.extendTranslation(h,t,e,o));else{var E=!1,I=!1,P=void 0!==e.count&&"string"!=typeof e.count,_=u.hasDefaultValue(e),M=P?this.pluralResolver.getSuffix(p,e.count,e):"",B=e["defaultValue".concat(M)]||e.defaultValue;!this.isValidLookup(h)&&_&&(E=!0,h=B),this.isValidLookup(h)||(I=!0,h=l);var R=e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,N=R&&I?void 0:h,$=_&&B!==h&&this.options.updateMissing;if(I||E||$){if(this.logger.log($?"updateKey":"missingKey",p,d,l,$?B:h),i){var H=this.resolve(l,D(D({},e),{},{keySeparator:!1}));H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var q=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var U=0;U<F.length;U++)q.push(F[U]);else"all"===this.options.saveMissingTo?q=this.languageUtils.toResolveHierarchy(e.lng||this.language):q.push(e.lng||this.language);var W=function(t,o,n){var r=_&&n!==h?n:N;s.options.missingKeyHandler?s.options.missingKeyHandler(t,d,o,r,$,e):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(t,d,o,r,$,e),s.emit("missingKey",t,d,o,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?q.forEach((function(t){s.pluralResolver.getSuffixes(t,e).forEach((function(o){W([t],l+o,e["defaultValue".concat(o)]||B)}))})):W(q,l,B))}h=this.extendTranslation(h,t,e,g,o),I&&h===l&&this.options.appendNamespaceToMissingKey&&(h="".concat(d,":").concat(l)),(I||E)&&this.options.parseMissingKeyHandler&&(h="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(l):l,E?h:void 0):this.options.parseMissingKeyHandler(h))}return r?(g.res=h,g):h}},{key:"extendTranslation",value:function(t,e,o,n,s){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,D(D({},this.options.interpolation.defaultVariables),o),n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(D(D({},o),{interpolation:D(D({},this.options.interpolation),o.interpolation)}));var i,a="string"==typeof t&&(o&&o.interpolation&&void 0!==o.interpolation.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(a){var l=t.match(this.interpolator.nestingRegexp);i=l&&l.length}var c=o.replace&&"string"!=typeof o.replace?o.replace:o;if(this.options.interpolation.defaultVariables&&(c=D(D({},this.options.interpolation.defaultVariables),c)),t=this.interpolator.interpolate(t,c,o.lng||this.language,o),a){var d=t.match(this.interpolator.nestingRegexp);i<(d&&d.length)&&(o.nest=!1)}!1!==o.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return s&&s[0]===n[0]&&!o.context?(r.logger.warn("It seems you are nesting recursively key: ".concat(n[0]," in key: ").concat(e[0])),null):r.translate.apply(r,n.concat([e]))}),o)),o.interpolation&&this.interpolator.reset()}var u=o.postProcess||this.options.postProcess,p="string"==typeof u?[u]:u;return null!=t&&p&&p.length&&!1!==o.applyPostProcessor&&(t=M.handle(p,t,e,this.options&&this.options.postProcessPassResolved?D({i18nResolved:n},o):o,this)),t}},{key:"resolve",value:function(t){var e,o,n,s,r,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!i.isValidLookup(e)){var l=i.extractFromKey(t,a),c=l.key;o=c;var d=l.namespaces;i.options.fallbackNS&&(d=d.concat(i.options.fallbackNS));var u=void 0!==a.count&&"string"!=typeof a.count,p=u&&!a.ordinal&&0===a.count&&i.pluralResolver.shouldUseIntlApi(),m=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:i.languageUtils.toResolveHierarchy(a.lng||i.language,a.fallbackLng);d.forEach((function(t){i.isValidLookup(e)||(r=t,!R["".concat(f[0],"-").concat(t)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(r)&&(R["".concat(f[0],"-").concat(t)]=!0,i.logger.warn('key "'.concat(o,'" for languages "').concat(f.join(", "),'" won\'t get resolved as namespace "').concat(r,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((function(o){if(!i.isValidLookup(e)){s=o;var r,l=[c];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(l,c,o,t,a);else{var d;u&&(d=i.pluralResolver.getSuffix(o,a.count,a));var f="".concat(i.options.pluralSeparator,"zero");if(u&&(l.push(c+d),p&&l.push(c+f)),m){var g="".concat(c).concat(i.options.contextSeparator).concat(a.context);l.push(g),u&&(l.push(g+d),p&&l.push(g+f))}}for(;r=l.pop();)i.isValidLookup(e)||(n=r,e=i.getResource(o,t,r,a))}})))}))}})),{res:e,usedKey:o,exactUsedKey:n,usedLng:s,usedNS:r}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,o,n):this.resourceStore.getResource(t,e,o,n)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e===o.substring(0,e.length)&&void 0!==t[o])return!0;return!1}}]),u}(h);function $(t){return t.charAt(0).toUpperCase()+t.slice(1)}var H=function(){function t(e){(0,s.default)(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=g.create("languageUtils")}return(0,r.default)(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],o=t.split("-");return this.options.lowerCaseLng?o=o.map((function(t){return t.toLowerCase()})):2===o.length?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),e.indexOf(o[1].toLowerCase())>-1&&(o[1]=$(o[1].toLowerCase()))):3===o.length&&(o[0]=o[0].toLowerCase(),2===o[1].length&&(o[1]=o[1].toUpperCase()),"sgn"!==o[0]&&2===o[2].length&&(o[2]=o[2].toUpperCase()),e.indexOf(o[1].toLowerCase())>-1&&(o[1]=$(o[1].toLowerCase())),e.indexOf(o[2].toLowerCase())>-1&&(o[2]=$(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,o=this;return t?(t.forEach((function(t){if(!e){var n=o.formatLanguageCode(t);o.options.supportedLngs&&!o.isSupportedCode(n)||(e=n)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var n=o.getLanguagePartFromCode(t);if(o.isSupportedCode(n))return e=n;e=o.options.supportedLngs.find((function(t){if(0===t.indexOf(n))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var o=t[e];return o||(o=t[this.getScriptPartFromCode(e)]),o||(o=t[this.formatLanguageCode(e)]),o||(o=t[this.getLanguagePartFromCode(e)]),o||(o=t.default),o||[]}},{key:"toResolveHierarchy",value:function(t,e){var o=this,n=this.getFallbackCodes(e||this.options.fallbackLng||[],t),s=[],r=function(t){t&&(o.isSupportedCode(t)?s.push(t):o.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(t))):"string"==typeof t&&r(this.formatLanguageCode(t)),n.forEach((function(t){s.indexOf(t)<0&&r(o.formatLanguageCode(t))})),s}}]),t}(),q=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],F={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}},U=["v1","v2","v3"],W={zero:0,one:1,two:2,few:3,many:4,other:5};function V(){var t={};return q.forEach((function(e){e.lngs.forEach((function(o){t[o]={numbers:e.nr,plurals:F[e.fc]}}))})),t}var Q=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t),this.languageUtils=e,this.options=o,this.logger=g.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=V()}return(0,r.default)(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:e.ordinal?"ordinal":"cardinal"})}catch(t){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.getRule(t,e);return this.shouldUseIntlApi()?o&&o.resolvedOptions().pluralCategories.length>1:o&&o.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(t,o).map((function(t){return"".concat(e).concat(t)}))}},{key:"getSuffixes",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(t,o);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((function(t,e){return W[t]-W[e]})).map((function(t){return"".concat(e.options.prepend).concat(t)})):n.numbers.map((function(n){return e.getSuffix(t,n,o)})):[]}},{key:"getSuffix",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getRule(t,o);return n?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.select(e)):this.getSuffixRetroCompatible(n,e):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,e){var o=this,n=t.noAbs?t.plurals(e):t.plurals(Math.abs(e)),s=t.numbers[n];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===s?s="plural":1===s&&(s=""));var r=function(){return o.options.prepend&&s.toString()?o.options.prepend+s.toString():s.toString()};return"v1"===this.options.compatibilityJSON?1===s?"":"number"==typeof s?"_plural_".concat(s.toString()):r():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?r():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}},{key:"shouldUseIntlApi",value:function(){return!U.includes(this.options.compatibilityJSON)}}]),t}();function J(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function G(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?J(Object(o),!0).forEach((function(e){(0,d.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):J(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t),this.logger=g.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return(0,r.default)(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:j,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?T(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?T(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?T(e.nestingPrefix):e.nestingPrefixEscaped||T("$t("),this.nestingSuffix=e.nestingSuffix?T(e.nestingSuffix):e.nestingSuffixEscaped||T(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var o="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(o,"g")}},{key:"interpolate",value:function(t,e,o,n){var s,r,i,a=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(t){return t.replace(/\$/g,"$$$$")}var d=function(t){if(t.indexOf(a.formatSeparator)<0){var s=k(e,l,t);return a.alwaysFormat?a.format(s,void 0,o,G(G(G({},n),e),{},{interpolationkey:t})):s}var r=t.split(a.formatSeparator),i=r.shift().trim(),c=r.join(a.formatSeparator).trim();return a.format(k(e,l,i),c,o,G(G(G({},n),e),{},{interpolationkey:i}))};this.resetRegExp();var u=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,p=n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return c(t)}},{regex:this.regexp,safeValue:function(t){return a.escapeValue?c(a.escape(t)):c(t)}}].forEach((function(e){for(i=0;s=e.regex.exec(t);){var o=s[1].trim();if(void 0===(r=d(o)))if("function"==typeof u){var l=u(t,s,n);r="string"==typeof l?l:""}else if(n&&n.hasOwnProperty(o))r="";else{if(p){r=s[0];continue}a.logger.warn("missed to pass in variable ".concat(o," for interpolating ").concat(t)),r=""}else"string"==typeof r||a.useRawValueToEscape||(r=y(r));var c=e.safeValue(r);if(t=t.replace(s[0],c),p?(e.regex.lastIndex+=r.length,e.regex.lastIndex-=s[0].length):e.regex.lastIndex=0,++i>=a.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var o,n,s=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=G({},r);function a(t,e){var o=this.nestingOptionsSeparator;if(t.indexOf(o)<0)return t;var n=t.split(new RegExp("".concat(o,"[ ]*{"))),s="{".concat(n[1]);t=n[0],s=(s=this.interpolate(s,i)).replace(/'/g,'"');try{i=JSON.parse(s),e&&(i=G(G({},e),i))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(o).concat(s)}return delete i.defaultValue,t}for(i.applyPostProcessor=!1,delete i.defaultValue;o=this.nestingRegexp.exec(t);){var l=[],c=!1;if(-1!==o[0].indexOf(this.formatSeparator)&&!/{.*}/.test(o[1])){var d=o[1].split(this.formatSeparator).map((function(t){return t.trim()}));o[1]=d.shift(),l=d,c=!0}if((n=e(a.call(this,o[1].trim(),i),i))&&o[0]===t&&"string"!=typeof n)return n;"string"!=typeof n&&(n=y(n)),n||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),n=""),c&&(n=l.reduce((function(t,e){return s.format(t,e,r.lng,G(G({},r),{},{interpolationkey:o[1].trim()}))}),n.trim())),t=t.replace(o[0],n),this.regexp.lastIndex=0}return t}}]),t}();function K(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function X(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?K(Object(o),!0).forEach((function(e){(0,d.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):K(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var Y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t),this.logger=g.create("formatter"),this.options=e,this.formats={number:function(t,e,o){return new Intl.NumberFormat(e,o).format(t)},currency:function(t,e,o){return new Intl.NumberFormat(e,X(X({},o),{},{style:"currency"})).format(t)},datetime:function(t,e,o){return new Intl.DateTimeFormat(e,X({},o)).format(t)},relativetime:function(t,e,o){return new Intl.RelativeTimeFormat(e,X({},o)).format(t,o.range||"day")},list:function(t,e,o){return new Intl.ListFormat(e,X({},o)).format(t)}},this.init(e)}return(0,r.default)(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},o=e.interpolation;this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||","}},{key:"add",value:function(t,e){this.formats[t.toLowerCase().trim()]=e}},{key:"format",value:function(t,e,o,n){var s=this;return e.split(this.formatSeparator).reduce((function(t,e){var r=function(t){var e=t.toLowerCase().trim(),o={};if(t.indexOf("(")>-1){var n=t.split("(");e=n[0].toLowerCase().trim();var s=n[1].substring(0,n[1].length-1);"currency"===e&&s.indexOf(":")<0?o.currency||(o.currency=s.trim()):"relativetime"===e&&s.indexOf(":")<0?o.range||(o.range=s.trim()):s.split(";").forEach((function(t){if(t){var e=t.split(":"),n=(0,u.default)(e),s=n[0],r=n.slice(1).join(":").trim().replace(/^'+|'+$/g,"");o[s.trim()]||(o[s.trim()]=r),"false"===r&&(o[s.trim()]=!1),"true"===r&&(o[s.trim()]=!0),isNaN(r)||(o[s.trim()]=parseInt(r,10))}}))}return{formatName:e,formatOptions:o}}(e),i=r.formatName,a=r.formatOptions;if(s.formats[i]){var l=t;try{var c=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},d=c.locale||c.lng||n.locale||n.lng||o;l=s.formats[i](t,d,X(X(X({},a),n),c))}catch(t){s.logger.warn(t)}return l}return s.logger.warn("there was no format function for ".concat(i)),t}),t)}}]),t}();function Z(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function tt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(o),!0).forEach((function(e){(0,d.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Z(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var et=function(t){(0,a.default)(d,t);var e,o,n=(e=d,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.default)(e);if(o){var s=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return(0,l.default)(this,t)});function d(t,e,o){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,s.default)(this,d),r=n.call(this),A&&h.call((0,i.default)(r)),r.backend=t,r.store=e,r.services=o,r.languageUtils=o.languageUtils,r.options=a,r.logger=g.create("backendConnector"),r.waitingReads=[],r.maxParallelReads=a.maxParallelReads||10,r.readingCalls=0,r.maxRetries=a.maxRetries>=0?a.maxRetries:5,r.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(o,a.backend,a),r}return(0,r.default)(d,[{key:"queueLoad",value:function(t,e,o,n){var s=this,r={},i={},a={},l={};return t.forEach((function(t){var n=!0;e.forEach((function(e){var a="".concat(t,"|").concat(e);!o.reload&&s.store.hasResourceBundle(t,e)?s.state[a]=2:s.state[a]<0||(1===s.state[a]?void 0===i[a]&&(i[a]=!0):(s.state[a]=1,n=!1,void 0===i[a]&&(i[a]=!0),void 0===r[a]&&(r[a]=!0),void 0===l[e]&&(l[e]=!0)))})),n||(a[t]=!0)})),(Object.keys(r).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(r),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}},{key:"loaded",value:function(t,e,o){var n=t.split("|"),s=n[0],r=n[1];e&&this.emit("failedLoading",s,r,e),o&&this.store.addResourceBundle(s,r,o),this.state[t]=e?-1:2;var i={};this.queue.forEach((function(o){var n,a,l,c,d;n=o.loaded,a=r,(c=(l=x(n,[s],Object)).obj)[d=l.k]=c[d]||[],c[d].push(a),function(t,e){void 0!==t.pending[e]&&(delete t.pending[e],t.pendingCount--)}(o,t),e&&o.errors.push(e),0!==o.pendingCount||o.done||(Object.keys(o.loaded).forEach((function(t){i[t]||(i[t]={});var e=o.loaded[t];e.length&&e.forEach((function(e){void 0===i[t][e]&&(i[t][e]=!0)}))})),o.done=!0,o.errors.length?o.callback(o.errors):o.callback())})),this.emit("loaded",i),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,o){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;return t.length?this.readingCalls>=this.maxParallelReads?void this.waitingReads.push({lng:t,ns:e,fcName:o,tried:s,wait:r,callback:i}):(this.readingCalls++,this.backend[o](t,e,(function(a,l){if(n.readingCalls--,n.waitingReads.length>0){var c=n.waitingReads.shift();n.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}a&&l&&s<n.maxRetries?setTimeout((function(){n.read.call(n,t,e,o,s+1,2*r,i)}),r):i(a,l)}))):i(null,{})}},{key:"prepareLoading",value:function(t,e){var o=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var r=this.queueLoad(t,e,n,s);if(!r.toLoad.length)return r.pending.length||s(),null;r.toLoad.forEach((function(t){o.loadOne(t)}))}},{key:"load",value:function(t,e,o){this.prepareLoading(t,e,{},o)}},{key:"reload",value:function(t,e,o){this.prepareLoading(t,e,{reload:!0},o)}},{key:"loadOne",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.split("|"),s=n[0],r=n[1];this.read(s,r,"read",void 0,void 0,(function(n,i){n&&e.logger.warn("".concat(o,"loading namespace ").concat(r," for language ").concat(s," failed"),n),!n&&i&&e.logger.log("".concat(o,"loaded namespace ").concat(r," for language ").concat(s),i),e.loaded(t,n,i)}))}},{key:"saveMissing",value:function(t,e,o,n,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=o&&""!==o&&(this.backend&&this.backend.create&&this.backend.create(t,e,o,n,null,tt(tt({},r),{},{isUpdate:s})),t&&t[0]&&this.store.addResource(t[0],e,o,n))}}]),d}(h);function ot(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===(0,n.default)(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===(0,n.default)(t[2])||"object"===(0,n.default)(t[3])){var o=t[3]||t[2];Object.keys(o).forEach((function(t){e[t]=o[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,o,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function nt(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function st(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function rt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?st(Object(o),!0).forEach((function(e){(0,d.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):st(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function it(){}function at(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach((function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))}))}var lt=function(t){(0,a.default)(u,t);var e,o,d=(e=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.default)(e);if(o){var s=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return(0,l.default)(this,t)});function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if((0,s.default)(this,u),t=d.call(this),A&&h.call((0,i.default)(t)),t.options=nt(e),t.services={},t.logger=g,t.modules={external:[]},at((0,i.default)(t)),o&&!t.isInitialized&&!e.isClone){if(!t.options.initImmediate)return t.init(e,o),(0,l.default)(t,(0,i.default)(t));setTimeout((function(){t.init(e,o)}),0)}return t}return(0,r.default)(u,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;"function"==typeof e&&(o=e,e={}),!e.defaultNS&&!1!==e.defaultNS&&e.ns&&("string"==typeof e.ns?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var n=ot();function s(t){return t?"function"==typeof t?new t:t:null}if(this.options=rt(rt(rt({},n),this.options),nt(e)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=rt(rt({},n.interpolation),this.options.interpolation)),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator),!this.options.isClone){var r;this.modules.logger?g.init(s(this.modules.logger),this.options):g.init(null,this.options),this.modules.formatter?r=this.modules.formatter:"undefined"!=typeof Intl&&(r=Y);var i=new H(this.options);this.store=new _(this.options.resources,this.options);var a=this.services;a.logger=g,a.resourceStore=this.store,a.languageUtils=i,a.pluralResolver=new Q(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!r||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(a.formatter=s(r),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new z(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new et(s(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(e){for(var o=arguments.length,n=new Array(o>1?o-1:0),s=1;s<o;s++)n[s-1]=arguments[s];t.emit.apply(t,[e].concat(n))})),this.modules.languageDetector&&(a.languageDetector=s(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=s(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new N(this.services,this.options),this.translator.on("*",(function(e){for(var o=arguments.length,n=new Array(o>1?o-1:0),s=1;s<o;s++)n[s-1]=arguments[s];t.emit.apply(t,[e].concat(n))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}if(this.format=this.options.interpolation.format,o||(o=it),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach((function(e){t[e]=function(){var o;return(o=t.store)[e].apply(o,arguments)}}));var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach((function(e){t[e]=function(){var o;return(o=t.store)[e].apply(o,arguments),t}}));var u=b(),p=function(){var e=function(e,n){t.isInitialized&&!t.initializedStoreOnce&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),u.resolve(n),o(e,n)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?p():setTimeout(p,0),u}},{key:"loadResources",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,n=o,s="string"==typeof t?t:this.language;if("function"==typeof t&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(s&&"cimode"===s.toLowerCase())return n();var r=[],i=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){r.indexOf(t)<0&&r.push(t)}))};if(s)i(s);else{var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach((function(t){return i(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return i(t)})),this.services.backendConnector.load(r,this.options.ns,(function(t){t||e.resolvedLanguage||!e.language||e.setResolvedLanguage(e.language),n(t)}))}else n(null)}},{key:"reloadResources",value:function(t,e,o){var n=b();return t||(t=this.languages),e||(e=this.options.ns),o||(o=it),this.services.backendConnector.reload(t,e,(function(t){n.resolve(),o(t)})),n}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&M.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"setResolvedLanguage",value:function(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(var e=0;e<this.languages.length;e++){var o=this.languages[e];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(t,e){var o=this;this.isLanguageChangingTo=t;var n=b();this.emit("languageChanging",t);var s=function(t){o.language=t,o.languages=o.services.languageUtils.toResolveHierarchy(t),o.resolvedLanguage=void 0,o.setResolvedLanguage(t)},r=function(r){t||r||!o.services.languageDetector||(r=[]);var i="string"==typeof r?r:o.services.languageUtils.getBestMatchFromCodes(r);i&&(o.language||s(i),o.translator.language||o.translator.changeLanguage(i),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(i)),o.loadResources(i,(function(t){!function(t,r){r?(s(r),o.translator.changeLanguage(r),o.isLanguageChangingTo=void 0,o.emit("languageChanged",r),o.logger.log("languageChanged",r)):o.isLanguageChangingTo=void 0,n.resolve((function(){return o.t.apply(o,arguments)})),e&&e(t,(function(){return o.t.apply(o,arguments)}))}(t,i)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(t):r(this.services.languageDetector.detect()),n}},{key:"getFixedT",value:function(t,e,o){var s=this,r=function t(e,r){var i;if("object"!==(0,n.default)(r)){for(var a=arguments.length,l=new Array(a>2?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];i=s.options.overloadTranslationOptionHandler([e,r].concat(l))}else i=rt({},r);i.lng=i.lng||t.lng,i.lngs=i.lngs||t.lngs,i.ns=i.ns||t.ns,i.keyPrefix=i.keyPrefix||o||t.keyPrefix;var d=s.options.keySeparator||".",u=i.keyPrefix?"".concat(i.keyPrefix).concat(d).concat(e):e;return s.t(u,i)};return"string"==typeof t?r.lng=t:r.lngs=t,r.ns=e,r.keyPrefix=o,r}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var n=this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;var i=function(t,o){var n=e.services.backendConnector.state["".concat(t,"|").concat(o)];return-1===n||2===n};if(o.precheck){var a=o.precheck(this,i);if(void 0!==a)return a}return!(!this.hasResourceBundle(n,t)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!i(n,t)||s&&!i(r,t)))}},{key:"loadNamespaces",value:function(t,e){var o=this,n=b();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){o.options.ns.indexOf(t)<0&&o.options.ns.push(t)})),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var o=b();"string"==typeof t&&(t=[t]);var n=this.options.preload||[],s=t.filter((function(t){return n.indexOf(t)<0}));return s.length?(this.options.preload=n.concat(s),this.loadResources((function(t){o.resolve(),e&&e(t)})),o):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr":"rtl"}},{key:"cloneInstance",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,n=rt(rt(rt({},this.options),e),{isClone:!0}),s=new u(n),r=["store","services","language"];return r.forEach((function(e){s[e]=t[e]})),s.services=rt({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new N(s.services,s.options),s.translator.on("*",(function(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),n=1;n<e;n++)o[n-1]=arguments[n];s.emit.apply(s,[t].concat(o))})),s.init(n,o),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),u}(h);(0,d.default)(lt,"createInstance",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new lt(t,e)}));var ct=lt.createInstance();ct.createInstance=lt.createInstance;var dt=ct.createInstance,ut=ct.init,pt=ct.loadResources,mt=ct.reloadResources,ft=ct.use,gt=ct.changeLanguage,ht=ct.getFixedT,bt=ct.t,yt=ct.exists,vt=ct.setDefaultNamespace,xt=ct.hasLoadedNamespace,wt=ct.loadNamespaces,Ct=ct.loadLanguages;const kt=ct}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;var r=n[t]={exports:{}};return o[t].call(r.exports,r,r.exports,s),r.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,s.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if("object"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&"function"==typeof o.then)return o}var r=Object.create(null);s.r(r);var i={};t=t||[null,e({}),e([]),e(e)];for(var a=2&n&&o;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>o[t]));return i.default=()=>o,s.d(r,i),r},s.d=(t,e)=>{for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";s.r(r),s.d(r,{Actions:()=>d.Actions,CmdParHlp:()=>d.CmdParHlp,CmsEngine:()=>d.CmsEngine,Command:()=>d.Command,Commands:()=>d.Commands,ContentListActionParams:()=>d.ContentListActionParams,ModifierBase:()=>p.ModifierBase,ModifierContentBlock:()=>p.ModifierContentBlock,ModifierDnnModule:()=>p.ModifierDnnModule,ModifierDnnModuleInternal:()=>p.ModifierDnnModuleInternal,PositionCoordinates:()=>p.PositionCoordinates,Positioning:()=>p.Positioning,QeSelectors:()=>p.QeSelectors,QuickE:()=>p.QuickE,QuickEClipboard:()=>p.QuickEClipboard,QuickEditConfig:()=>p.QuickEditConfig,QuickEditConfigButtons:()=>p.QuickEditConfigButtons,QuickEditConfigEnableAuto:()=>p.QuickEditConfigEnableAuto,QuickEditConfigRoot:()=>p.QuickEditConfigRoot,QuickEditOverlay:()=>p.QuickEditOverlay,RunParamsHelpers:()=>u.RunParamsHelpers,Selection:()=>p.Selection,SharedLogic:()=>d.SharedLogic,SxcCmsReal:()=>m.SxcCmsReal,SxcGlobalCms:()=>u.SxcGlobalCms,SxcTools:()=>m.SxcTools,ToolbarWorkflowManager:()=>f.ToolbarWorkflowManager,WorkflowCommands:()=>d.WorkflowCommands,WorkflowHelper:()=>f.WorkflowHelper,WorkflowPhases:()=>f.WorkflowPhases,WorkflowStepCodeArguments:()=>f.WorkflowStepCodeArguments,WorkflowStepHelper:()=>f.WorkflowStepHelper,iconPrefix:()=>d.iconPrefix,tlbI18nPrefix:()=>d.tlbI18nPrefix});var t=s("./src/bootstrap/bootstrap.ts"),e=s("./src/cms/sxc-global-cms.ts"),o=s("./src/context/bundles/context-bundle-button.ts"),n=s("./src/i18n/index.ts"),i=s("./src/manage/sxc-global-manage.ts"),a=s("./src/plumbing/index.ts"),l=s("./src/quick-edit/quick-e.ts"),c=s("./src/system/index.ts"),d=s("./src/commands/index.ts"),u=s("./src/cms/index.ts"),p=s("./src/quick-edit/index.ts"),m=s("./src/sxc/index.ts"),f=s("./src/workflow/index.ts");s("./src/toolbar/toolbar-global-enable-shake.ts"),s("./src/dnn/index.ts"),s("./src/styles/index.scss");const g=window.$2sxc,h=!!g._manage;g.context??=o.ContextComplete.findContext,g._translateInit??=t=>n.Translator.initManager(t),g.translate??=n.translate,g._manage??=new i.SxcGlobalManage,g.cms??=new e.SxcGlobalCms,g.system??=new c.SystemUpgrader,window.$quickE??=l.QuickE.singleton(),h?a.NoJQ.ready((()=>window.$quickE.start())):a.NoJQ.ready((function(){(new t.BootstrapInPage).initialize(),l.QuickE.singleton().start()}))})(),$2sxcInpage=r})();
//# sourceMappingURL=inpage.min.js.map