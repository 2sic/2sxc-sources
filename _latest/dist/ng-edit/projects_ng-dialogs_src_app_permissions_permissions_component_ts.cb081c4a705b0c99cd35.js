(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{398:function(e,t,i){"use strict";i.r(t),i.d(t,{PermissionsComponent:function(){return P}});var n=i(4762),o=i(9206),s=i(1282),r=i(8512),a=i(7570),l=i(3835),c=i(6238),p=i(9996),d=i(2855),u=i(6085),m=i(8579),h=i(5803),f=i(2420),g=i(1785),y=i(7064),v=i(7512),C=i(7307),b=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(e){return!0},e.prototype.deletePermission=function(){this.params.onDelete(this.params.data)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.NdJ("click",function(){return t.deletePermission()}),g.TgZ(2,"mat-icon"),g._uU(3,"delete"),g.qZA(),g.qZA(),g.qZA())},directives:[y.wG,v.$,C.Hw],styles:[""]}),e}(),Z=i(2935),T=i(4943),k=i(3589),x=i(4369),_=i(9825),w=i(1116),P=function(){function e(e,t,i,s,l){this.dialogRef=e,this.router=t,this.route=i,this.permissionsService=s,this.snackBar=l,this.permissions$=new r.X(null),this.modules=o.F$,this.gridOptions=(0,n.pi)((0,n.pi)({},m.f),{frameworkComponents:{idFieldComponent:u.m,permissionsActionsComponent:b},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(e){return"ID: "+e.Id+"\nGUID: "+e.Guid}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new a.w,this.targetType=parseInt(this.route.snapshot.paramMap.get("type"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key")}return e.prototype.ngOnInit=function(){this.fetchPermissions(),this.refreshOnChildClosed()},e.prototype.ngOnDestroy=function(){this.permissions$.complete(),this.subscription.unsubscribe()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.fetchPermissions=function(){var e=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(t){e.permissions$.next(t)})},e.prototype.editPermission=function(e){var t,i,o=this;if(null==e){var s=null===(t=Object.values(h.Z.metadata).find(function(e){return e.type===o.targetType}))||void 0===t?void 0:t.target;i={items:[{ContentTypeName:h.Z.contentTypes.permissions,For:(0,n.pi)((0,n.pi)((0,n.pi)({Target:s},this.keyType===h.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===h.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===h.Z.keyTypes.string&&{String:this.key})}]}}else i={items:[{EntityId:e.data.Id}]};var r=(0,f.f)(i);this.router.navigate(["edit/"+r],{relativeTo:this.route})},e.prototype.deletePermission=function(e){var t=this;confirm("Delete '"+e.Title+"' ("+e.Id+")?")&&(this.snackBar.open("Deleting..."),this.permissionsService.delete(e.Id).subscribe(function(){t.snackBar.open("Deleted",null,{duration:2e3}),t.fetchPermissions()}))},e.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.router.events.pipe((0,l.h)(function(e){return e instanceof s.m2}),(0,c.O)(!!this.route.snapshot.firstChild),(0,p.U)(function(){return!!e.route.snapshot.firstChild}),(0,d.G)(),(0,l.h)(function(e){var t=(0,n.CR)(e,2);return t[0]&&!t[1]})).subscribe(function(){e.fetchPermissions()}))},e.\u0275fac=function(t){return new(t||e)(g.Y36(Z.so),g.Y36(s.F0),g.Y36(s.gz),g.Y36(T.q),g.Y36(k.ux))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div"),g._uU(4,"Permissions"),g.qZA(),g.TgZ(5,"button",3),g.NdJ("click",function(){return t.closeDialog()}),g.TgZ(6,"mat-icon"),g._uU(7,"close"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(8,"router-outlet"),g.TgZ(9,"div",4),g._UZ(10,"ag-grid-angular",5),g.ALo(11,"async"),g._UZ(12,"div",6),g.TgZ(13,"button",7),g.NdJ("click",function(){return t.editPermission(null)}),g.TgZ(14,"mat-icon"),g._uU(15,"add"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(10),g.Q6J("rowData",g.lcZ(11,3,t.permissions$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[Z.uh,x.lW,v.$,C.Hw,s.lC,_.N8],pipes:[w.Ov],styles:[""]}),e}()},6085:function(e,t,i){"use strict";i.d(t,{m:function(){return c}});var n=i(8838),o=i(1785),s=i(3589),r=i(7064),a=i(7512),l=i(7307),c=function(){function e(e){this.snackBar=e}return e.prototype.agInit=function(e){this.id=e.value,this.tooltip=e.tooltipGetter(e.data)},e.prototype.refresh=function(e){return!0},e.prototype.copy=function(){(0,n.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(o.Y36(s.ux))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return t.copy()}),o.TgZ(1,"span",1),o._uU(2),o.qZA(),o.TgZ(3,"mat-icon",2),o._uU(4,"file_copy"),o.qZA(),o.qZA()),2&e&&(o.Q6J("tippy",t.tooltip),o.xp6(2),o.Oqu(t.id))},directives:[r.wG,a.$,l.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),e}()},8838:function(e,t,i){"use strict";function n(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var i=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))}i.d(t,{v:function(){return n}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/projects_ng-dialogs_src_app_permissions_permissions_component_ts.cb081c4a705b0c99cd35.js.map