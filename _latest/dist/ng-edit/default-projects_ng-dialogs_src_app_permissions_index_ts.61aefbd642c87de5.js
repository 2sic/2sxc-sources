"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["default-projects_ng-dialogs_src_app_permissions_index_ts","projects_ng-dialogs_src_app_permissions_go-to-permissions_ts","projects_ng-dialogs_src_app_permissions_permissions_module_ts","projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{8130:function(y,p,t){t.d(p,{g:function(){return d}});var h=t(8069),f=t(8047),o=t(7368),n=t(8598),g=t(7133),c=t(8784),l=t(2425),d=function(){var i=function(){function s(a,r,u){(0,h.Z)(this,s),this.http=a,this.context=r,this.dnnContext=u}return(0,f.Z)(s,[{key:"create",value:function(r,u){return this.http.post("app/auto/data/".concat(r),u,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}},{key:"update",value:function(r,u,v){return this.http.post("app/auto/data/".concat(r,"/").concat(u),v,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}},{key:"delete",value:function(r,u,v){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(o.Uo+"delete"),{params:{contentType:r,id:u.toString(),appId:this.context.appId.toString(),force:v.toString()}})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(g.LFG(c.eN),g.LFG(n._),g.LFG(l._y))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i}()},7297:function(y,p,t){t.d(p,{i:function(){return n}});var h=t(8069),f=t(8047),o=t(1825),n=function(){var g=function(){function c(){(0,h.Z)(this,c)}return(0,f.Z)(c,null,[{key:"getUrl",value:function(d,i,s){return"permissions/".concat(d,"/").concat(i,"/").concat(s)}},{key:"getUrlApp",value:function(d){return this.getUrl(o.Z.metadata.app.targetType,o.Z.metadata.app.keyType,d.toString())}},{key:"getUrlAttribute",value:function(d){return this.getUrl(o.Z.metadata.attribute.targetType,o.Z.metadata.attribute.keyType,d.toString())}},{key:"getUrlContentType",value:function(d){return this.getUrlEntity(d)}},{key:"getUrlEntity",value:function(d){return this.getUrl(o.Z.metadata.entity.targetType,o.Z.metadata.entity.keyType,d)}},{key:"getUrlLanguage",value:function(d){return this.getUrl(o.Z.metadata.language.targetType,o.Z.metadata.language.keyType,d)}}]),c}();return g.route={path:"permissions/:targetType/:keyType/:key",loadChildren:function(){return t.e("projects_ng-dialogs_src_app_permissions_permissions_module_ts").then(t.bind(t,4484)).then(function(l){return l.PermissionsModule})},data:{title:"Permissions"}},g}()},6307:function(y,p,t){t.d(p,{iK:function(){return h.i},Do:function(){return c.D},qQ:function(){return l.q}});var h=t(7297),c=(t(1157),t(7725),t(5620),t(4484),t(4753)),l=t(7170)},1157:function(y,p,t){t.d(p,{g:function(){return n}});var h=t(9016),f=t.n(h),o=t(4929),n={name:"SET_PERMISSIONS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:function(){return(0,o.mG)(this,void 0,void 0,f().mark(function c(){return f().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Promise.all([t.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),t.e("default-projects_ng-dialogs_src_app_shared_constants_default-grid-options_constants_ts-node_m-d43c44"),t.e("projects_ng-dialogs_src_app_permissions_permissions_component_ts")]).then(t.bind(t,5620));case 2:return s.abrupt("return",s.sent.PermissionsComponent);case 5:case"end":return s.stop()}},c)}))}}},7725:function(y,p,t){t.d(p,{T:function(){return i}});var h=t(8047),f=t(8069),o=t(2977),n=t(8327),g=t(5487),c=t(1157),l=t(7133),d=[{path:"",component:g.r,data:{dialog:c.g},children:[{matcher:n.eP,loadChildren:function(){return Promise.all([t.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2015_progress-spinner_mjs"),t.e("default-projects_ng-dialogs_src_app_create-file-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2015_slide-toggle_mjs"),t.e("default-node_modules_angular_material_fesm2015_list_mjs"),t.e("default-projects_ng-dialogs_src_app_monaco-editor_index_ts-projects_ng-dialogs_src_app_shared-7048b1"),t.e("default-projects_edit_edit_module_ts"),t.e("default-node_modules_angular_cdk_fesm2015_drag-drop_mjs"),t.e("default-node_modules_angular_material_fesm2015_menu_mjs"),t.e("default-node_modules_angular_material_fesm2015_autocomplete_mjs"),t.e("common"),t.e("projects_ng-dialogs_src_app_shared_components_field-hint_field-hint_component_ts-projects_ng--d12a670")]).then(t.bind(t,8985)).then(function(a){return a.EditModule})}},{matcher:n.lZ,loadChildren:function(){return t.e("projects_edit_refresh-edit_module_ts").then(t.bind(t,3804)).then(function(a){return a.RefreshEditModule})}}]}],i=function(){var s=(0,h.Z)(function a(){(0,f.Z)(this,a)});return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[[o.Bz.forChild(d)],o.Bz]}),s}()},5620:function(y,p,t){t.r(p),t.d(p,{PermissionsComponent:function(){return F}});var h=t(2090),f=t(7797),o=t(8069),n=t(8047),g=t(1276),c=t(2977),l=t(6317),d=t(7714),i=t(116),s=t(4874),a=t(635),r=t(679),u=t(5578),v=t(9119),m=t(1825),R=t(5137),e=t(7133),T=t(1130),L=t(785),B=t(5590),W=function(){var O=function(){function M(){(0,o.Z)(this,M)}return(0,n.Z)(M,[{key:"agInit",value:function(_){this.params=_}},{key:"refresh",value:function(_){return!0}},{key:"deletePermission",value:function(){this.params.onDelete(this.params.data)}}]),M}();return O.\u0275fac=function(P){return new(P||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(P,_){1&P&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(){return _.deletePermission()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA(),e.qZA(),e.qZA())},directives:[T.wG,L.$,B.Hw],styles:[""]}),O}(),j=t(7170),Z=t(5758),K=t(2528),x=t(7317),S=t(1350),G=t(6362),F=function(){var O=function(){function M(P,_,C,I,U){var A=this;(0,o.Z)(this,M),this.dialogRef=P,this.router=_,this.route=C,this.permissionsService=I,this.snackBar=U,this.permissions$=new l.X(null),this.modules=g.F$,this.gridOptions=Object.assign(Object.assign({},v.f),{frameworkComponents:{idFieldComponent:u.m,permissionsActionsComponent:W},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agNumberColumnFilter",valueGetter:function(E){return E.data.Id},cellRendererParams:{tooltipGetter:function(E){return"ID: ".concat(E.Id,"\nGUID: ").concat(E.Guid)}}},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:function(E){return A.editPermission(E.data)},valueGetter:function(E){return E.data.Title}},{field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(E){return E.data.Identity}},{field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(E){return E.data.Condition}},{field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(E){return E.data.Grant}},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:function(E){return A.deletePermission(E)}}}]}),this.subscription=new d.w0,this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills=(0,f.Z)({},m.Z.metadata.language.targetType,{PermissionType:"language"})}return(0,n.Z)(M,[{key:"ngOnInit",value:function(){this.fetchPermissions(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.permissions$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"fetchPermissions",value:function(){var _=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(C){_.permissions$.next(C)})}},{key:"editPermission",value:function(_){var I,U,A,C=this;A=null==_?{items:[Object.assign({ContentTypeName:m.Z.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:null!==(U=null===(I=Object.values(m.Z.metadata).find(function(E){return E.targetType===C.targetType}))||void 0===I?void 0:I.target)&&void 0!==U?U:this.targetType.toString(),TargetType:this.targetType},this.keyType===m.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===m.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===m.Z.keyTypes.string&&{String:this.key})},this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]})]}:{items:[{EntityId:_.Id}]};var D=(0,R.f)(A);this.router.navigate(["edit/".concat(D)],{relativeTo:this.route})}},{key:"deletePermission",value:function(_){var C=this;!confirm("Delete '".concat(_.Title,"' (").concat(_.Id,")?"))||(this.snackBar.open("Deleting..."),this.permissionsService.delete(_.Id).subscribe(function(){C.snackBar.open("Deleted",null,{duration:2e3}),C.fetchPermissions()}))}},{key:"refreshOnChildClosed",value:function(){var _=this;this.subscription.add(this.router.events.pipe((0,i.h)(function(C){return C instanceof c.m2}),(0,s.O)(!!this.route.snapshot.firstChild),(0,a.U)(function(){return!!_.route.snapshot.firstChild}),(0,r.G)(),(0,i.h)(function(C){var I=(0,h.Z)(C,2);return I[0]&&!I[1]})).subscribe(function(){_.fetchPermissions()}))}}]),M}();return O.\u0275fac=function(P){return new(P||O)(e.Y36(Z.so),e.Y36(c.F0),e.Y36(c.gz),e.Y36(j.q),e.Y36(K.ux))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(P,_){1&P&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e._uU(4,"Permissions"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return _.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"router-outlet"),e.TgZ(9,"div",4),e._UZ(10,"ag-grid-angular",5),e.ALo(11,"async"),e._UZ(12,"div",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return _.editPermission(null)}),e.TgZ(14,"mat-icon"),e._uU(15,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&P&&(e.xp6(10),e.Q6J("rowData",e.lcZ(11,3,_.permissions$))("modules",_.modules)("gridOptions",_.gridOptions))},directives:[Z.uh,x.lW,L.$,B.Hw,c.lC,S.N8],pipes:[G.Ov],styles:[""]}),O}()},4484:function(y,p,t){t.r(p),t.d(p,{PermissionsModule:function(){return e}});var h=t(8047),f=t(8069),o=t(1350),n=t(6362),g=t(7317),c=t(1130),l=t(5758),d=t(5590),i=t(2528),s=t(8130),a=t(8598),r=t(8450),u=t(7725),v=t(4753),m=t(7170),R=t(7133),e=function(){var T=(0,h.Z)(function L(){(0,f.Z)(this,L)});return T.\u0275fac=function(B){return new(B||T)},T.\u0275mod=R.oAB({type:T}),T.\u0275inj=R.cJS({providers:[a._,m.q,v.D,s.g],imports:[[n.ez,u.T,r.q,l.Is,g.ot,d.Ps,o.sF.withComponents([]),c.si,i.ZX]]}),T}()},4753:function(y,p,t){t.d(p,{D:function(){return d}});var h=t(8069),f=t(8047),o=t(8598),n=t(7133),g=t(8784),c=t(2425),d=function(){var i=function(){function s(a,r,u){(0,h.Z)(this,s),this.http=a,this.context=r,this.dnnContext=u}return(0,f.Z)(s,[{key:"getMetadata",value:function(r,u,v,m){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:Object.assign({appId:this.context.appId.toString(),targetType:r.toString(),keyType:u,key:v.toString()},m&&{contentType:m})})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(n.LFG(g.eN),n.LFG(o._),n.LFG(c._y))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac}),i}()},7170:function(y,p,t){t.d(p,{q:function(){return d}});var h=t(8069),f=t(8047),o=t(635),n=t(8130),g=t(1825),c=t(4753),l=t(7133),d=function(){var i=function(){function s(a,r){(0,h.Z)(this,s),this.metadataService=a,this.entitiesService=r}return(0,f.Z)(s,[{key:"getAll",value:function(r,u,v){return this.metadataService.getMetadata(r,u,v,g.Z.contentTypes.permissions).pipe((0,o.U)(function(m){return m.Items}))}},{key:"delete",value:function(r){return this.entitiesService.delete(g.Z.contentTypes.permissions,r,!1)}}]),s}();return i.\u0275fac=function(a){return new(a||i)(l.LFG(c.D),l.LFG(n.g))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i}()},5578:function(y,p,t){t.d(p,{m:function(){return a}});var h=t(8069),f=t(8047),o=t(5388),n=t(7133),g=t(2528),c=t(1130),l=t(785),d=t(6362),i=t(5590),s=function(u,v){return{"align-start":u,"align-end":v}},a=function(){var r=function(){function u(v){(0,h.Z)(this,u),this.snackBar=v}return(0,f.Z)(u,[{key:"agInit",value:function(m){this.id=m.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=m.tooltipGetter(m.data)}},{key:"refresh",value:function(m){return!0}},{key:"copy",value:function(){(0,o.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),u}();return r.\u0275fac=function(v){return new(v||r)(n.Y36(g.ux))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(v,m){1&v&&(n.TgZ(0,"div",0),n.NdJ("click",function(){return m.copy()}),n.TgZ(1,"span",1),n._uU(2),n.qZA(),n.TgZ(3,"mat-icon",2),n._uU(4,"file_copy"),n.qZA(),n.qZA()),2&v&&(n.Q6J("tippy",m.tooltip)("ngClass",n.WLB(3,s,"start"===m.align,"end"===m.align)),n.xp6(2),n.Oqu(m.id))},directives:[c.wG,l.$,d.mk,i.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),r}()},5388:function(y,p,t){function h(f){var o=document.createElement("textarea");o.value=f,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);o.select(),document.execCommand("copy"),document.body.removeChild(o),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}t.d(p,{v:function(){return h}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.03.00/ng-edit/default-projects_ng-dialogs_src_app_permissions_index_ts.61aefbd642c87de5.js.map