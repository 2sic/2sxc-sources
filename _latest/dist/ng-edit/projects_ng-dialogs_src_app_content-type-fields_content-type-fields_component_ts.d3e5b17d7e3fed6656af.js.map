{"version":3,"sources":["./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-actions/content-type-fields-actions.component.html","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-actions/content-type-fields-actions.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-input-type/content-type-fields-input-type.component.html","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-input-type/content-type-fields-input-type.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-special/content-type-fields-special.component.html","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-special/content-type-fields-special.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-title/content-type-fields-title.component.html","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-title/content-type-fields-title.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-type/content-type-fields-type.component.ts","./projects/ng-dialogs/src/app/content-type-fields/ag-grid-components/content-type-fields-type/content-type-fields-type.component.html","./projects/ng-dialogs/src/app/content-type-fields/content-type-fields.component.ts","./projects/ng-dialogs/src/app/content-type-fields/content-type-fields.component.html"],"names":["agInit","params","this","field","data","metadataCount","Metadata","Object","keys","filter","key","length","enablePermissions","InputType","Type","refresh","openMetadata","onOpenMetadata","rename","onRename","openPermissions","onOpenPermissions","deleteField","onDelete","ContentTypeFieldsActionsComponent","value","changeInputType","onChangeInputType","ContentTypeFieldsInputTypeComponent","hasFormulas","HasFormulas","isEphemeral","IsEphemeral","ContentTypeFieldsSpecialComponent","isTitle","setTitle","onSetTitle","ContentTypeFieldsTitleComponent","icon","ContentTypeFieldsTypeComponent","dialogRef","route","router","contentTypesService","contentTypesFieldsService","snackBar","contentType$","BehaviorSubject","fields$","modules","gridOptions","getRowClass","rowClass","EditInfo","ReadOnly","push","join","frameworkComponents","contentTypeFieldsTitleComponent","contentTypeFieldsTypeComponent","contentTypeFieldsInputTypeComponent","contentTypeFieldsSpecialComponent","contentTypeFieldsActionsComponent","columnDefs","rowDrag","width","cellClass","headerName","cellRenderer","cellRendererParams","flex","minWidth","sortable","onCellClicked","editFieldMetadata","nameCellRenderer","headerClass","valueGetter","inputTypeValueGetter","pinned","delete","sortApplied","filterApplied","rowDragSuppressed","contentTypeStaticName","snapshot","paramMap","get","subscription","Subscription","ngOnInit","fetchFields","refreshOnChildClosed","ngOnDestroy","complete","unsubscribe","closeDialog","close","onGridReady","gridApi","api","onRowDragEnter","event","setEnableCellTextSelection","onRowDragEnd","setSuppressRowDrag","idArray","map","Id","reOrder","subscribe","res","onRowDragMove","movingNode","node","overNode","movingData","overData","newFields","fromIndex","indexOf","toIndex","moveInArray","next","clearFocusedCell","arr","element","splice","onSortChanged","sortModel","getSortModel","suppressRowDrag","onFilterChanged","filterModel","getFilterModel","fieldsFiltered","shouldSuppress","add","navigate","relativeTo","currentField","includes","isGroupOpen","StaticName","substring","callback","retrieveContentType","of","getFields","forkJoin","fields","form","items","createItemDefinition","formUrl","metadataType","EntityId","ContentTypeName","For","Target","Number","Prefill","Name","open","duration","confirm","url","events","pipe","startWith","firstChild","pairwise","ContentTypeFieldsComponent"],"mappings":"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","file":"projects_ng-dialogs_src_app_content-type-fields_content-type-fields_component_ts.d3e5b17d7e3fed6656af.js","sourcesContent":["<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple tippy=\"Metadata\" (click)=\"openMetadata()\">\r\n    <mat-icon [matBadge]=\"metadataCount\" matBadgeColor=\"accent\" matBadgeSize=\"small\" *ngIf=\"metadataCount\">\r\n      local_offer\r\n    </mat-icon>\r\n    <mat-icon *ngIf=\"!metadataCount\">local_offer</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple tippy=\"Permissions\" *ngIf=\"enablePermissions\"\r\n    (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"field.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      *ngIf=\"field.Permissions.Count\">\r\n      person\r\n    </mat-icon>\r\n    <mat-icon *ngIf=\"!field.Permissions.Count\">person</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"!enablePermissions\">\r\n    <mat-icon>person</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <button mat-menu-item [disabled]=\"field.EditInfo.ReadOnly\" (click)=\"rename()\">\r\n    <mat-icon>text_fields</mat-icon>\r\n    <span>Rename</span>\r\n  </button>\r\n\r\n  <button mat-menu-item [disabled]=\"field.EditInfo.ReadOnly || field.IsTitle\" (click)=\"deleteField()\">\r\n    <mat-icon>delete</mat-icon>\r\n    <span>Delete</span>\r\n  </button>\r\n</mat-menu>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { DataTypeConstants } from '../../constants/data-type.constants';\r\nimport { InputTypeConstants } from '../../constants/input-type.constants';\r\nimport { Field } from '../../models/field.model';\r\nimport { ContentTypeFieldsActionsParams } from './content-type-fields-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-actions',\r\n  templateUrl: './content-type-fields-actions.component.html',\r\n  styleUrls: ['./content-type-fields-actions.component.scss'],\r\n})\r\nexport class ContentTypeFieldsActionsComponent implements ICellRendererAngularComp {\r\n  field: Field;\r\n  metadataCount: number;\r\n  enablePermissions: boolean;\r\n  private params: ContentTypeFieldsActionsParams;\r\n\r\n  constructor() { }\r\n\r\n  agInit(params: ContentTypeFieldsActionsParams) {\r\n    this.params = params;\r\n    this.field = this.params.data;\r\n    this.metadataCount = this.field.Metadata ? Object.keys(this.field.Metadata).filter(key => key !== 'merged').length : 0;\r\n    this.enablePermissions = this.field.InputType === InputTypeConstants.StringWysiwyg || this.field.Type === DataTypeConstants.Hyperlink;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openMetadata() {\r\n    this.params.onOpenMetadata(this.field);\r\n  }\r\n\r\n  rename() {\r\n    this.params.onRename(this.field);\r\n  }\r\n\r\n  openPermissions() {\r\n    this.params.onOpenPermissions(this.field);\r\n  }\r\n\r\n  deleteField() {\r\n    this.params.onDelete(this.field);\r\n  }\r\n}\r\n","<div matRipple class=\"input-component highlight\" *ngIf=\"!field.EditInfo.ReadOnly\" (click)=\"changeInputType()\">\r\n  <div class=\"text\">{{ value }}</div>\r\n  <div class=\"like-button\">\r\n    <mat-icon>arrow_drop_down</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"input-component disabled\" *ngIf=\"field.EditInfo.ReadOnly\">\r\n  <div class=\"text disabled\">{{ value }}</div>\r\n  <div class=\"like-button disabled\">\r\n    <mat-icon>arrow_drop_down</mat-icon>\r\n  </div>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { Field } from '../../models/field.model';\r\nimport { ContentTypeFieldsInputTypeParams } from './content-type-fields-input-type.models';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-input-type',\r\n  templateUrl: './content-type-fields-input-type.component.html',\r\n  styleUrls: ['./content-type-fields-input-type.component.scss'],\r\n})\r\nexport class ContentTypeFieldsInputTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  field: Field;\r\n\r\n  private params: ContentTypeFieldsInputTypeParams;\r\n\r\n  agInit(params: ContentTypeFieldsInputTypeParams) {\r\n    this.params = params;\r\n    this.value = params.value;\r\n    this.field = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  changeInputType(): void {\r\n    this.params.onChangeInputType(this.field);\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <mat-icon *ngIf=\"hasFormulas\" tippy=\"Has Formulas\">functions</mat-icon>\r\n  <mat-icon *ngIf=\"isEphemeral\" tippy=\"Ephemeral / Temporary, won't save\">mobiledata_off</mat-icon>\r\n</div>\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { Field } from '../../models/field.model';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-special',\r\n  templateUrl: './content-type-fields-special.component.html',\r\n  styleUrls: ['./content-type-fields-special.component.scss'],\r\n})\r\nexport class ContentTypeFieldsSpecialComponent implements ICellRendererAngularComp {\r\n  hasFormulas: boolean;\r\n  isEphemeral: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    const field: Field = params.data;\r\n    this.hasFormulas = field.HasFormulas;\r\n    this.isEphemeral = field.IsEphemeral;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"!field.EditInfo.ReadOnly\" tippy=\"Use as title field\"\r\n    (click)=\"setTitle()\">\r\n    <mat-icon *ngIf=\"isTitle\" svgIcon=\"star\"></mat-icon>\r\n    <mat-icon *ngIf=\"!isTitle\">star_outline</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"field.EditInfo.ReadOnly\">\r\n    <mat-icon *ngIf=\"isTitle\" svgIcon=\"star\"></mat-icon>\r\n    <mat-icon *ngIf=\"!isTitle\">star_outline</mat-icon>\r\n  </div>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { Field } from '../../models/field.model';\r\nimport { ContentTypeFieldsTitleParams } from './content-type-fields-title.models';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-title',\r\n  templateUrl: './content-type-fields-title.component.html',\r\n  styleUrls: ['./content-type-fields-title.component.scss'],\r\n})\r\nexport class ContentTypeFieldsTitleComponent implements ICellRendererAngularComp {\r\n  isTitle: boolean;\r\n  field: Field;\r\n\r\n  private params: ContentTypeFieldsTitleParams;\r\n\r\n  agInit(params: ContentTypeFieldsTitleParams) {\r\n    this.params = params;\r\n    this.isTitle = params.value;\r\n    this.field = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  setTitle(): void {\r\n    this.params.onSetTitle(this.field);\r\n  }\r\n}\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { calculateTypeIcon } from '../../content-type-fields.helpers';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-type',\r\n  templateUrl: './content-type-fields-type.component.html',\r\n  styleUrls: ['./content-type-fields-type.component.scss'],\r\n})\r\nexport class ContentTypeFieldsTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  icon: string;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.icon = calculateTypeIcon(this.value);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\" [tippy]=\"value\">\r\n  <mat-icon>{{ icon }}</mat-icon>\r\n</div>\r\n","// tslint:disable-next-line:max-line-length\r\nimport { AllCommunityModules, FilterChangedEvent, GridApi, GridOptions, GridReadyEvent, ICellRendererParams, RowClassParams, RowDragEvent, SortChangedEvent, ValueGetterParams } from '@ag-grid-community/all-modules';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, forkJoin, of, Subscription } from 'rxjs';\r\nimport { filter, map, pairwise, startWith } from 'rxjs/operators';\r\nimport { ContentType } from '../app-administration/models/content-type.model';\r\nimport { ContentTypesService } from '../app-administration/services/content-types.service';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { GoToPermissions } from '../permissions/go-to-permissions';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { AddItem, EditForm, EditItem } from '../shared/models/edit-form.model';\r\nimport { ContentTypeFieldsActionsComponent } from './ag-grid-components/content-type-fields-actions/content-type-fields-actions.component';\r\nimport { ContentTypeFieldsActionsParams } from './ag-grid-components/content-type-fields-actions/content-type-fields-actions.models';\r\nimport { ContentTypeFieldsInputTypeComponent } from './ag-grid-components/content-type-fields-input-type/content-type-fields-input-type.component';\r\n// tslint:disable-next-line:max-line-length\r\nimport { ContentTypeFieldsInputTypeParams } from './ag-grid-components/content-type-fields-input-type/content-type-fields-input-type.models';\r\nimport { ContentTypeFieldsSpecialComponent } from './ag-grid-components/content-type-fields-special/content-type-fields-special.component';\r\nimport { ContentTypeFieldsTitleComponent } from './ag-grid-components/content-type-fields-title/content-type-fields-title.component';\r\nimport { ContentTypeFieldsTitleParams } from './ag-grid-components/content-type-fields-title/content-type-fields-title.models';\r\nimport { ContentTypeFieldsTypeComponent } from './ag-grid-components/content-type-fields-type/content-type-fields-type.component';\r\nimport { InputTypeConstants } from './constants/input-type.constants';\r\nimport { Field } from './models/field.model';\r\nimport { ContentTypesFieldsService } from './services/content-types-fields.service';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields',\r\n  templateUrl: './content-type-fields.component.html',\r\n  styleUrls: ['./content-type-fields.component.scss'],\r\n})\r\nexport class ContentTypeFieldsComponent implements OnInit, OnDestroy {\r\n  contentType$ = new BehaviorSubject<ContentType>(null);\r\n  fields$ = new BehaviorSubject<Field[]>(null);\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    getRowClass(params: RowClassParams) {\r\n      const field: Field = params.data;\r\n      const rowClass: string[] = [];\r\n      if (field.EditInfo.ReadOnly) { rowClass.push('disable-row-drag'); }\r\n      if (field.InputType === InputTypeConstants.EmptyDefault) { rowClass.push('group-start-row'); }\r\n      if (field.InputType === InputTypeConstants.EmptyEnd) { rowClass.push('group-end-row'); }\r\n      return rowClass.join(' ');\r\n    },\r\n    frameworkComponents: {\r\n      contentTypeFieldsTitleComponent: ContentTypeFieldsTitleComponent,\r\n      contentTypeFieldsTypeComponent: ContentTypeFieldsTypeComponent,\r\n      contentTypeFieldsInputTypeComponent: ContentTypeFieldsInputTypeComponent,\r\n      contentTypeFieldsSpecialComponent: ContentTypeFieldsSpecialComponent,\r\n      contentTypeFieldsActionsComponent: ContentTypeFieldsActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      { rowDrag: true, width: 18, cellClass: 'no-select no-padding no-outline' },\r\n      {\r\n        headerName: 'Title', field: 'IsTitle', width: 42, cellClass: 'secondary-action no-padding no-outline',\r\n        cellRenderer: 'contentTypeFieldsTitleComponent',\r\n        cellRendererParams: {\r\n          onSetTitle: (field) => { this.setTitle(field); },\r\n        } as ContentTypeFieldsTitleParams,\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'StaticName', flex: 2, minWidth: 250, cellClass: 'primary-action highlight',\r\n        sortable: true, filter: 'agTextColumnFilter', onCellClicked: (params) => { this.editFieldMetadata(params.data); },\r\n        cellRenderer: (params: ICellRendererParams) => this.nameCellRenderer(params),\r\n      },\r\n      {\r\n        headerName: 'Type', field: 'Type', width: 70, headerClass: 'dense', cellClass: 'no-outline', sortable: true,\r\n        filter: 'agTextColumnFilter', cellRenderer: 'contentTypeFieldsTypeComponent',\r\n      },\r\n      {\r\n        headerName: 'Input', field: 'InputType', width: 160, cellClass: 'secondary-action no-padding',\r\n        sortable: true, filter: 'agTextColumnFilter', cellRenderer: 'contentTypeFieldsInputTypeComponent',\r\n        valueGetter: (params) => this.inputTypeValueGetter(params),\r\n        cellRendererParams: {\r\n          onChangeInputType: (field) => { this.changeInputType(field); },\r\n        } as ContentTypeFieldsInputTypeParams,\r\n      },\r\n      {\r\n        headerName: 'Label', field: 'Metadata.All.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Special', width: 66, headerClass: 'dense', cellClass: 'no-outline',\r\n        cellRenderer: 'contentTypeFieldsSpecialComponent',\r\n      },\r\n      {\r\n        headerName: 'Notes', field: 'Metadata.All.Notes', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        width: 122, cellClass: 'secondary-action no-padding', cellRenderer: 'contentTypeFieldsActionsComponent', pinned: 'right',\r\n        cellRendererParams: {\r\n          onRename: (field) => { this.rename(field); },\r\n          onDelete: (field) => { this.delete(field); },\r\n          onOpenPermissions: (field) => { this.openPermissions(field); },\r\n          onOpenMetadata: (field) => { this.openMetadata(field); },\r\n        } as ContentTypeFieldsActionsParams,\r\n      },\r\n    ],\r\n  };\r\n\r\n  sortApplied = false;\r\n  filterApplied = false;\r\n  private gridApi: GridApi;\r\n  private rowDragSuppressed = false;\r\n  private contentTypeStaticName = this.route.snapshot.paramMap.get('contentTypeStaticName');\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ContentTypeFieldsComponent>,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private contentTypesService: ContentTypesService,\r\n    private contentTypesFieldsService: ContentTypesFieldsService,\r\n    private snackBar: MatSnackBar,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchFields();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.contentType$.complete();\r\n    this.fields$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  onGridReady(params: GridReadyEvent) {\r\n    this.gridApi = params.api;\r\n  }\r\n\r\n  onRowDragEnter(event: RowDragEvent) {\r\n    this.gridApi.setEnableCellTextSelection(false);\r\n  }\r\n\r\n  onRowDragEnd(event: RowDragEvent) {\r\n    this.gridApi.setSuppressRowDrag(true);\r\n    const idArray = this.fields$.value.map(field => field.Id);\r\n    this.contentTypesFieldsService.reOrder(idArray, this.contentType$.value).subscribe(res => {\r\n      this.fetchFields(() => {\r\n        this.gridApi.setEnableCellTextSelection(true);\r\n        this.gridApi.setSuppressRowDrag(false);\r\n      });\r\n    });\r\n  }\r\n\r\n  onRowDragMove(event: RowDragEvent) {\r\n    const movingNode = event.node;\r\n    const overNode = event.overNode;\r\n    if (!overNode) { return; }\r\n    const rowNeedsToMove = movingNode !== overNode;\r\n    if (rowNeedsToMove) {\r\n      const movingData: Field = movingNode.data;\r\n      const overData: Field = overNode.data;\r\n      const newFields = [...this.fields$.value];\r\n      const fromIndex = newFields.indexOf(movingData);\r\n      const toIndex = newFields.indexOf(overData);\r\n      this.moveInArray(newFields, fromIndex, toIndex);\r\n      this.fields$.next(newFields);\r\n      this.gridApi.clearFocusedCell();\r\n    }\r\n  }\r\n\r\n  private moveInArray(arr: Field[], fromIndex: number, toIndex: number) {\r\n    const element = arr[fromIndex];\r\n    arr.splice(fromIndex, 1);\r\n    arr.splice(toIndex, 0, element);\r\n  }\r\n\r\n  onSortChanged(params: SortChangedEvent) {\r\n    const sortModel = this.gridApi.getSortModel();\r\n    this.sortApplied = sortModel.length > 0;\r\n    this.suppressRowDrag();\r\n  }\r\n\r\n  onFilterChanged(params: FilterChangedEvent) {\r\n    const filterModel = this.gridApi.getFilterModel();\r\n    const fieldsFiltered = Object.keys(filterModel);\r\n    this.filterApplied = fieldsFiltered.length > 0;\r\n    this.suppressRowDrag();\r\n  }\r\n\r\n  private suppressRowDrag() {\r\n    const shouldSuppress = this.sortApplied || this.filterApplied;\r\n    if (shouldSuppress && !this.rowDragSuppressed) {\r\n      this.rowDragSuppressed = true;\r\n      this.gridApi.setSuppressRowDrag(true);\r\n    } else if (!shouldSuppress && this.rowDragSuppressed) {\r\n      this.rowDragSuppressed = false;\r\n      this.gridApi.setSuppressRowDrag(false);\r\n    }\r\n  }\r\n\r\n  add() {\r\n    this.router.navigate([`add/${this.contentTypeStaticName}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private nameCellRenderer(params: ICellRendererParams) {\r\n    const currentField: Field = params.data;\r\n    const empties: string[] = [InputTypeConstants.EmptyDefault, InputTypeConstants.EmptyEnd];\r\n    if (empties.includes(currentField.InputType)) {\r\n      return params.value;\r\n    }\r\n\r\n    let isGroupOpen = false;\r\n    for (const field of this.fields$.value) {\r\n      if (field.InputType === InputTypeConstants.EmptyDefault) {\r\n        isGroupOpen = true;\r\n        continue;\r\n      }\r\n      if (field.InputType === InputTypeConstants.EmptyEnd) {\r\n        isGroupOpen = false;\r\n        continue;\r\n      }\r\n      if (field.StaticName === currentField.StaticName) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isGroupOpen ? `<span class=\"is-in-group\">${params.value}</span>` : params.value;\r\n  }\r\n\r\n  private inputTypeValueGetter(params: ValueGetterParams) {\r\n    const field: Field = params.data;\r\n    const inputType = field.InputType.substring(field.InputType.indexOf('-') + 1);\r\n    return inputType;\r\n  }\r\n\r\n  private fetchFields(callback?: () => void) {\r\n    const contentType$ = this.contentType$.value == null\r\n      ? this.contentTypesService.retrieveContentType(this.contentTypeStaticName)\r\n      : of(this.contentType$.value);\r\n    const fields$ = this.contentTypesFieldsService.getFields(this.contentTypeStaticName);\r\n    forkJoin([contentType$, fields$]).subscribe(([contentType, fields]) => {\r\n      this.contentType$.next(contentType);\r\n      this.fields$.next(fields);\r\n      if (callback != null) { callback(); }\r\n    });\r\n  }\r\n\r\n  private editFieldMetadata(field: Field) {\r\n    const form: EditForm = {\r\n      items: [\r\n        this.createItemDefinition(field, 'All'),\r\n        this.createItemDefinition(field, field.Type),\r\n        this.createItemDefinition(field, field.InputType),\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private createItemDefinition(field: Field, metadataType: string): AddItem | EditItem {\r\n    return field.Metadata[metadataType] != null\r\n      ? { EntityId: field.Metadata[metadataType].Id } // if defined, return the entity-number to edit\r\n      : {\r\n        ContentTypeName: '@' + metadataType, // otherwise the content type for new-assignment\r\n        For: {\r\n          Target: eavConstants.metadata.attribute.target,\r\n          Number: field.Id,\r\n        },\r\n        Prefill: { Name: field.StaticName },\r\n      };\r\n  }\r\n\r\n  private setTitle(field: Field) {\r\n    this.snackBar.open('Setting title...');\r\n    this.contentTypesFieldsService.setTitle(field, this.contentType$.value).subscribe(() => {\r\n      this.snackBar.open('Title set', null, { duration: 2000 });\r\n      this.fetchFields();\r\n    });\r\n  }\r\n\r\n  private changeInputType(field: Field) {\r\n    this.router.navigate([`update/${this.contentTypeStaticName}/${field.Id}/inputType`], { relativeTo: this.route });\r\n  }\r\n\r\n  private rename(field: Field) {\r\n    this.router.navigate([`update/${this.contentTypeStaticName}/${field.Id}/name`], { relativeTo: this.route });\r\n  }\r\n\r\n  private delete(field: Field) {\r\n    if (!confirm(`Are you sure you want to delete '${field.StaticName}' (${field.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.contentTypesFieldsService.delete(field, this.contentType$.value).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchFields();\r\n    });\r\n  }\r\n\r\n  private openPermissions(field: Field) {\r\n    this.router.navigate([GoToPermissions.getUrlAttribute(field.Id)], { relativeTo: this.route });\r\n  }\r\n\r\n  private openMetadata(field: Field) {\r\n    const url = GoToMetadata.getUrlAttribute(\r\n      field.Id,\r\n      `Metadata for Field: ${field.StaticName} (${field.Id})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.fetchFields();\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","<div class=\"nav-component-wrapper\">\r\n  <div mat-dialog-title>\r\n    <div class=\"dialog-title-box\">\r\n      <div>{{ (contentType$ | async)?.Name }} Fields</div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <div class=\"grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"fields$ | async\" [modules]=\"modules\"\r\n      [gridOptions]=\"gridOptions\" (rowDragEnter)=\"onRowDragEnter($event)\" (rowDragEnd)=\"onRowDragEnd($event)\"\r\n      (rowDragMove)=\"onRowDragMove($event)\" (gridReady)=\"onGridReady($event)\" (sortChanged)=\"onSortChanged($event)\"\r\n      (filterChanged)=\"onFilterChanged($event)\" [ngClass]=\"{\r\n        'grid-sorted': sortApplied,\r\n        'grid-filtered': filterApplied\r\n      }\">\r\n    </ag-grid-angular>\r\n\r\n    <div class=\"grid-more-actions-box\"></div>\r\n\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Add fields\"\r\n      [disabled]=\"(contentType$ | async) == null || (contentType$ | async).EditInfo.ReadOnly\" (click)=\"add()\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n  </div>\r\n</div>\r\n"],"sourceRoot":"webpack:///"}