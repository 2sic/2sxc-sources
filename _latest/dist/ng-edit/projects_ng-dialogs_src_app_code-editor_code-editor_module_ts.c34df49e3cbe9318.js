"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_code-editor_code-editor_module_ts"],{5005:function(q,R,d){d.d(R,{_:function(){return k},s:function(){return E}});var M=d(5106),P=d(8069),u=d(8047),b=d(635),L=d(8598),U=d(7133),D=d(8784),$=d(2425),k="admin/type/",E=function(){var F=function(){function N(O,h,C){(0,P.Z)(this,N),this.http=O,this.context=h,this.dnnContext=C}return(0,u.Z)(N,[{key:"apiUrl",value:function(h){return this.dnnContext.$2sxc.http.apiUrl(h)}},{key:"retrieveContentType",value:function(h){return this.http.get(this.apiUrl(k+"get"),{params:{appId:this.context.appId.toString(),contentTypeId:h}})}},{key:"retrieveContentTypes",value:function(h){return this.http.get(this.apiUrl(k+"list"),{params:{appId:this.context.appId.toString(),scope:h}})}},{key:"getScopes",value:function(){return this.http.get(this.apiUrl(k+"scopes"),{params:{appId:this.context.appId.toString()}}).pipe((0,b.U)(function(h){return Object.keys(h).map(function(f){return{name:h[f],value:f}})}))}},{key:"save",value:function(h){return this.http.post(this.apiUrl(k+"save"),h,{params:{appid:this.context.appId.toString()}})}},{key:"delete",value:function(h){return this.http.delete(this.apiUrl(k+"delete"),{params:{appid:this.context.appId.toString(),staticName:h.StaticName}})}},{key:"import",value:function(h){var x,C=new FormData,f=(0,M.Z)(h);try{for(f.s();!(x=f.n()).done;)C.append("File",x.value)}catch(Q){f.e(Q)}finally{f.f()}return this.http.post(this.apiUrl(k+"import"),C,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}},{key:"createGhost",value:function(h){return this.http.post(this.apiUrl(k+"addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:h}})}}]),N}();return F.\u0275fac=function(O){return new(O||F)(U.LFG(D.eN),U.LFG(L._),U.LFG($._y))},F.\u0275prov=U.Yz7({token:F,factory:F.\u0275fac}),F}()},4250:function(q,R,d){d.r(R),d.d(R,{CodeEditorModule:function(){return yt},translateLoaderFactoryCode:function(){return ve}});var M=d(8047),P=d(8069),u=d(6362),b=d(587),L=d(7317),U=d(1130),D=d(5758),$=d(4770),k=d(5590),E=d(4742),F=d(1434),N=d(2528),O=d(7514),h=d(4909),C=d(7200),f=d(8598),x=d(8450),I=d(8865),Q=d(162),V=d(2977),A=d(6170),Y=d(2090),K=d(7714),H=d(6317),W=d(6562),ne=d(1640),_e=d(745),ie=d(3280),ge=d(1203),fe=d(9525),z=d(635),w=d(5656),oe=d(7472),ae=d(8254),e=d(7133);function he(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.BQk()),2&i){var n=e.oxw();e.xp6(2),e.AsE('"',n.snackBarData.fileName,'" also has a code-behind file "',n.snackBarData.codeFile,'".')}}function me(i,l){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){var n=e.oxw(2);e.xp6(1),e.hij(' You are editing "',n.snackBarData.edition,'" edition. ')}}function Ce(i,l){1&i&&(e.ynx(0),e._uU(1," You may be editing an edition which is not the one you see. "),e.BQk())}function ye(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,me,2,1,"ng-container",1),e._uU(2),e.YNc(3,Ce,2,0,"ng-container",1),e._uU(4," See "),e.TgZ(5,"a",4),e._uU(6,"docs"),e.qZA(),e._uU(7,". "),e.qZA()),2&i){var n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.snackBarData.edition),e.xp6(1),e.AsE(" There are ",n.snackBarData.otherEditions,' other editions of "',n.snackBarData.fileName,'". '),e.xp6(1),e.Q6J("ngIf",!n.snackBarData.edition)}}function xe(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().openCodeBehind()}),e._uU(1," Open code-behind file "),e.qZA()}}var Te=function(){var i=function(){function l(n,t){(0,P.Z)(this,l),this.snackRef=n,this.snackBarData=t}return(0,M.Z)(l,[{key:"openCodeBehind",value:function(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}}]),l}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(N.OX),e.Y36(N.qD))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[4,"ngIf"],[1,"actions"],["mat-button","","color","primary",3,"click",4,"ngIf"],["href","http://r.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,he,4,2,"ng-container",1),e.YNc(2,ye,8,4,"div",1),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,xe,2,0,"button",3),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.snackBarData.codeFile),e.xp6(1),e.Q6J("ngIf",t.snackBarData.otherEditions),e.xp6(2),e.Q6J("ngIf",t.snackBarData.codeFile))},directives:[u.O5,L.lW],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]}),i}(),re={Templates:"Templates",Snippets:"Snippets"},Se=d(3135);function Oe(i,l){1&i&&(e.TgZ(0,"app-field-hint",11),e._uU(1," This field is required "),e.qZA()),2&i&&e.Q6J("isError",!0)}var Ie=function(){var i=function(){function l(n){(0,P.Z)(this,l),this.dialogRef=n,this.hostClass="dialog-component"}return(0,M.Z)(l,[{key:"ngOnInit",value:function(){this.form=new b.cw({isShared:new b.NI(null,b.kI.required)})}},{key:"closeDialog",value:function(t){this.dialogRef.close(t)}},{key:"confirm",value:function(){var t=this.form.getRawValue();this.closeDialog(t.isShared)}}]),l}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(D.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-file-location-dialog"]],hostVars:1,hostBindings:function(n,t){2&n&&e.Ikx("className",t.hostClass)},decls:19,vars:5,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-form",3,"formGroup"],[1,"dialog-form-content","fancy-scrollbar-light"],["appearance","standard","color","accent"],["formControlName","isShared"],[3,"value"],[3,"isError",4,"ngIf"],[1,"dialog-form-actions"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"isError"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2,"New file location"),e.qZA(),e.qZA(),e.TgZ(3,"form",2),e.TgZ(4,"div",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7,"Location"),e.qZA(),e.TgZ(8,"mat-select",5),e.TgZ(9,"mat-option",6),e._uU(10,"App"),e.qZA(),e.TgZ(11,"mat-option",6),e._uU(12,"Shared (global)"),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,Oe,2,1,"app-field-hint",7),e.TgZ(14,"div",8),e.TgZ(15,"button",9),e.NdJ("click",function(){return t.closeDialog()}),e._uU(16,"Cancel"),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){return t.confirm()}),e._uU(18," Confirm "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("value",!1),e.xp6(2),e.Q6J("value",!0),e.xp6(2),e.Q6J("ngIf",t.form.controls.isShared.touched&&(null==t.form.controls.isShared.errors?null:t.form.controls.isShared.errors.required)),e.xp6(4),e.Q6J("disabled",!t.form.valid))},directives:[D.uh,b._Y,b.JL,b.sg,$.KE,$.hX,F.gD,b.JJ,b.u,U.ey,u.O5,L.lW,Se.Y],styles:[""]}),i}(),j=d(5106),we=d(2215),be=d(9702),Ze=d(4722),Me=d(8784),Pe=d(2425),se=function(){var i=function(){function l(n,t,o){(0,P.Z)(this,l),this.http=n,this.dnnContext=t,this.translate=o}return(0,M.Z)(l,[{key:"getSnippets",value:function(t){var o=this;return this.http.get("../ng-assets/snippets.json.js").pipe((0,z.U)(function(a){var r=o.filterAwayNotNeededSnippetsList(a.snippets,t),s=o.extractInputTypeSnippets(r),c=o.initSnippetsWithConfig(s.standardArray,t,s.inputTypeSnippets);return{list:s.standardArray,sets:c}}))}},{key:"filterAwayNotNeededSnippetsList",value:function(t,o){var p,a=["@","["],r=function(m){return m.Type.indexOf("Razor")>-1?0:1},s=[],c=(0,j.Z)(t);try{for(c.s();!(p=c.n()).done;){var g=p.value,v=a.indexOf(g.set[0]);(-1===v||v===r(o))&&(v===r(o)&&(g.set=g.set.substr(1)),s.push(g))}}catch(_){c.e(_)}finally{c.f()}return s}},{key:"extractInputTypeSnippets",value:function(t){var s,o=[],a=[],r=(0,j.Z)(t);try{for(r.s();!(s=r.n()).done;){var c=s.value;"\\"===c.set[0]?(c.set=c.set.substr(1),a.push(c)):o.push(c)}}catch(_){r.e(_)}finally{r.f()}return{standardArray:o,inputTypeSnippets:this.catalogInputTypeSnippets(a)}}},{key:"catalogInputTypeSnippets",value:function(t){var r,o={},a=(0,j.Z)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;void 0===o[s.subset]&&(o[s.subset]=[]),o[s.subset].push(s)}}catch(c){a.e(c)}finally{a.f()}return o}},{key:"initSnippetsWithConfig",value:function(t,o,a){var r=this.makeTree(t);return r.Content=Object.assign({},r.Content,{Fields:{},PresentationFields:{}}),o.TypeContent&&this.loadContentType(r.Content.Fields,o.TypeContent,"Content",o,a),o.TypeContentPresentation&&this.loadContentType(r.Content.PresentationFields,o.TypeContentPresentation,"Content.Presentation",o,a),o.HasList?(r.List=Object.assign({},r.List,{Fields:{},PresentationFields:{}}),o.TypeList&&this.loadContentType(r.List.Fields,o.TypeList,"Header",o,a),o.TypeListPresentation&&this.loadContentType(r.List.PresentationFields,o.TypeListPresentation,"Header.Presentation",o,a)):delete r.List,o.HasApp&&(r.App.Resources={},r.App.Settings={},this.loadContentType(r.App.Resources,"App-Resources","App.Resources",o,a),this.loadContentType(r.App.Settings,"App-Settings","App.Settings",o,a)),r}},{key:"makeTree",value:function(t){var r,o={},a=(0,j.Z)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;void 0===o[s.set]&&(o[s.set]={}),void 0===o[s.set][s.subset]&&(o[s.set][s.subset]=[]);var c={key:s.name,label:this.label(s.set,s.subset,s.name),snip:s.content,help:s.help||this.help(s.set,s.subset,s.name),links:this.linksList(s.links)};o[s.set][s.subset].push(c)}}catch(p){a.e(p)}finally{a.f()}return o}},{key:"label",value:function(t,o,a){var r=this.getHelpKey(t,o,a,".Key"),s=this.translate.instant(r);return s===r&&(s=a),s}},{key:"getHelpKey",value:function(t,o,a,r){return"SourceEditorSnippets."+t+"."+o+"."+a+r}},{key:"help",value:function(t,o,a){var r=this.getHelpKey(t,o,a,".Help"),s=this.translate.instant(r);return s===r&&(s=""),s}},{key:"linksList",value:function(t){if(!t)return null;var s,o=[],a=t.split("\n"),r=(0,j.Z)(a);try{for(r.s();!(s=r.n()).done;){var p=s.value.split(":");if(3===p.length){var g={name:p[0].trim(),url:p[1].trim()+":"+p[2].trim()};o.push(g)}}}catch(v){r.e(v)}finally{r.f()}return 0===o.length?null:o}},{key:"loadContentType",value:function(t,o,a,r,s){var c=this;this.getFields(r.AppId,o).subscribe(function(p){var v,g=(0,j.Z)(p);try{for(g.s();!(v=g.n()).done;){var _=v.value,m=_.StaticName;t[m]={key:m,label:m,snip:c.valuePlaceholder(a,m,r),help:_.Metadata.merged.Notes||" ("+_.Type.toLowerCase()+") "};var y=(0,we.Z)(t[m]);c.attachSnippets(t,a,m,_.InputType,y,s)}}catch(J){g.e(J)}finally{g.f()}if(p.length)for(var S=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"],Z=0;Z<S.length;Z++)t[S[Z]]={key:S[Z],label:S[Z],snip:c.valuePlaceholder(a,S[Z],r),help:c.translate.instant("SourceEditorSnippets.StandardFields."+S[Z]+".Help")}})}},{key:"valuePlaceholder",value:function(t,o,a){return a.Type.indexOf("Razor")>-1?"@"+t+"."+o:"["+t.replace(".",":")+":"+o+"]"}},{key:"getFields",value:function(t,o){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(Ze.jt),{params:{appid:t.toString(),staticName:o}}).pipe((0,z.U)(function(a){a=a.filter(function(m){return m.Type!==be.Q.Empty});var s,r=(0,j.Z)(a);try{for(r.s();!(s=r.n()).done;){var c=s.value;if(c.Metadata){var p=c.Metadata,v=p[c.Type],_=p[c.InputType];p.merged=Object.assign(Object.assign(Object.assign({},p.All),v),_)}}}catch(m){r.e(m)}finally{r.f()}return a}))}},{key:"attachSnippets",value:function(t,o,a,r,s,c){var p=c[r];if(r.indexOf("-")){var g=r.substr(0,r.indexOf("-"));if(g){var v=c[g];v&&(p=p?p.concat(v):v)}}if(p){void 0===t[a].more&&(t[a].more={});for(var _=t[a].more,m=0;m<p.length;m++)try{_[a+"-"+p[m].name]=Object.assign({},s,{key:a+" - "+p[m].name,label:p[m].name,snip:this.localizeGenericSnippet(p[m].content,o,a),collapse:!0})}finally{}}}},{key:"localizeGenericSnippet",value:function(t,o,a){return t.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+o+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+a+"$2")}}]),l}();return i.\u0275fac=function(n){return new(n||i)(e.LFG(Me.eN),e.LFG(Pe._y),e.LFG(O.sK))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i}(),le=d(1183),pe=d(318),ke=d(5469),X=d(785),G="";function ce(i){if(!i)return[];var t,l=[],n=(0,j.Z)(i);try{for(n.s();!(t=n.n()).done;)for(var o=t.value,a=l,r=o.Path.split("/"),s=r[r.length-1],c="",p=function(_){var m=r[_];c+=_?"/".concat(m):m;var y=a.find(function(Z){return Z.name===m});if(y)a=y.children;else{var S=Object.assign({depth:_,name:m,pathFromRoot:c,isShared:o.Shared,isFolder:m!==s},m!==s&&{children:[]});a.push(S),a=S.children}},g=0;g<r.length;g++)p(g)}catch(v){n.e(v)}finally{n.f()}return l}var ee=d(491),Ae=function(){var i=function(){function l(){(0,P.Z)(this,l)}return(0,M.Z)(l,[{key:"transform",value:function(t){return null==t||t.sort(function(o,a){return o.isFolder<a.isFolder?1:o.isFolder>a.isFolder?-1:0}),t}}]),l}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=e.Yjl({name:"sortItems",type:i,pure:!0}),i}(),Fe=function(){var i=function(){function l(n){(0,P.Z)(this,l),this.sanitizer=n}return(0,M.Z)(l,[{key:"transform",value:function(t,o){return this.sanitizer.bypassSecurityTrustStyle("padding-left: ".concat(o?8*t:0===t?8:8*t+16,"px;"))}}]),l}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(pe.H7,16))},i.\u0275pipe=e.Yjl({name:"depthPadding",type:i,pure:!0}),i}();function De(i,l){1&i&&e.GkF(0)}var de=function(l){return{item:l}};function Ne(i,l){if(1&i&&(e.ynx(0),e.YNc(1,De,1,0,"ng-container",5),e.BQk()),2&i){var n=l.$implicit;e.oxw();var t=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,de,n))}}var Le=function(l){return{active:l}};function Ue(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){e.CHM(n);var r=e.oxw().item;return e.oxw().openTemplate(r.pathFromRoot,r.isShared)}),e.ALo(1,"depthPadding"),e._uU(2),e.qZA()}if(2&i){var t=e.oxw().item,o=e.oxw();e.Akn(e.xi3(1,5,t.depth,t.isFolder)),e.Q6J("ngClass",e.VKq(8,Le,o.isToggled(t.pathFromRoot,t.isShared)))("tippy",t.name),e.xp6(2),e.hij(" ",t.name," ")}}function Je(i,l){1&i&&e.GkF(0)}function $e(i,l){if(1&i&&(e.ynx(0),e.YNc(1,Je,1,0,"ng-container",5),e.BQk()),2&i){var n=l.$implicit;e.oxw(4);var t=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,de,n))}}function je(i,l){if(1&i&&(e.ynx(0),e.YNc(1,$e,2,4,"ng-container",1),e.ALo(2,"sortItems"),e.BQk()),2&i){var n=e.oxw(2).item;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.children))}}var Re=function(l){return{"app-shared-root":l}};function Qe(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",9),e.NdJ("click",function(){e.CHM(n);var r=e.oxw().item;return e.oxw().toggleItem(r.pathFromRoot,r.isShared)}),e.ALo(2,"depthPadding"),e.TgZ(3,"div",10),e.TgZ(4,"mat-icon"),e._uU(5),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",11),e.NdJ("click",function(){e.CHM(n);var r=e.oxw().item;return e.oxw().addFile(r.pathFromRoot,r.isShared)}),e.TgZ(9,"mat-icon"),e._uU(10,"add"),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,je,3,3,"ng-container",7),e.qZA()}if(2&i){var t=e.oxw().item,o=e.oxw();e.xp6(1),e.Akn(e.xi3(2,7,t.depth+1,t.isFolder)),e.Q6J("ngClass",e.VKq(10,Re,t.depth<0)),e.xp6(2),e.Q6J("tippy",t.name),e.xp6(2),e.hij(" ",o.isToggled(t.pathFromRoot,t.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),e.xp6(2),e.Oqu(t.name),e.xp6(4),e.Q6J("ngIf",o.isToggled(t.pathFromRoot,t.isShared))}}function Ve(i,l){if(1&i&&(e.YNc(0,Ue,3,10,"div",6),e.YNc(1,Qe,12,12,"div",7)),2&i){var n=l.item;e.Q6J("ngIf",!n.isFolder),e.xp6(1),e.Q6J("ngIf",n.isFolder)}}var Be=function(){var i=function(){function l(){(0,P.Z)(this,l),this.openView=new e.vpe,this.createTemplate=new e.vpe,this.toggledItemsApp=[],this.toggledItemsShared=[]}return(0,M.Z)(l,[{key:"ngOnChanges",value:function(t){var o;if(null!=t.templates&&(this.tree=function Ee(i){return[{depth:-1,name:"App Files",pathFromRoot:G,isShared:!1,isFolder:!0,children:ce(i.filter(function(n){return!n.Shared}))},{depth:-1,name:"Shared App Files",pathFromRoot:G,isShared:!0,isFolder:!0,children:ce(i.filter(function(n){return n.Shared}))}]}(this.templates)),null!=t.view){var a=null===(o=t.view)||void 0===o?void 0:o.previousValue;a&&this.toggleItem(a.FileName,a.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}},{key:"isToggled",value:function(t,o){return(o?this.toggledItemsShared:this.toggledItemsApp).includes(t)}},{key:"openTemplate",value:function(t,o){this.openView.emit({key:t,shared:o})}},{key:"toggleItem",value:function(t,o){w.iX.toggleInArray(t,o?this.toggledItemsShared:this.toggledItemsApp)}},{key:"addFile",value:function(t,o){this.createTemplate.emit({folder:t,isShared:o})}},{key:"showFileInTree",value:function(t,o){if(null!=t){var a=o?this.toggledItemsShared:this.toggledItemsApp;if(!a.includes(t)){var p,r=[G].concat((0,A.Z)(t.split("/"))),s="",c=(0,j.Z)(r);try{for(c.s();!(p=c.n()).done;){var g=p.value;s=s?"".concat(s,"/").concat(g):g,!a.includes(s)&&this.toggleItem(s,o)}}catch(v){c.e(v)}finally{c.f()}}}}}]),l}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[e.TTD],decls:10,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[4,"ngFor","ngForOf"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy","click",4,"ngIf"],[4,"ngIf"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"ngClass","click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e.YNc(2,Ne,2,4,"ng-container",1),e.ALo(3,"sortItems"),e.YNc(4,Ve,2,2,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"button",4),e.NdJ("click",function(){return t.addFile()}),e.TgZ(8,"mat-icon"),e._uU(9,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,t.tree)))},directives:[u.sg,L.lW,X.$,k.Hw,u.tP,u.O5,u.mk,ee.E],pipes:[Ae,Fe],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]}),i}(),Ye=function(){var i=function(){function l(){(0,P.Z)(this,l)}return(0,M.Z)(l,[{key:"transform",value:function(t){if(null!=t)return Array.isArray(t)?t:Object.values(t)}}]),l}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=e.Yjl({name:"objectToArray",type:i,pure:!0}),i}(),He=d(845);function We(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"mat-icon",12),e.NdJ("click",function(){e.CHM(n);var r=e.oxw().$implicit;return e.oxw(5).toggleMore(r.key)}),e._uU(1),e.qZA()}if(2&i){var t=e.oxw().$implicit,o=e.oxw(5);e.xp6(1),e.hij(" ",o.toggledMores.includes(t.key)?"more_vert":"more_horiz"," ")}}function qe(i,l){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"a",15),e._uU(2),e.qZA(),e.qZA()),2&i){var n=l.$implicit;e.xp6(1),e.Q6J("href",n.url,e.LSH),e.xp6(1),e.Oqu(n.name)}}function Ke(i,l){if(1&i&&(e.TgZ(0,"div",13),e._UZ(1,"div",14),e.ALo(2,"safeHtml"),e.YNc(3,qe,3,2,"div",1),e.qZA()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,n.help),e.oJD),e.xp6(2),e.Q6J("ngForOf",n.links)}}function ze(i,l){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"a",15),e._uU(2),e.qZA(),e.qZA()),2&i){var n=l.$implicit;e.xp6(1),e.Q6J("href",n.url,e.LSH),e.xp6(1),e.Oqu(n.name)}}function Xe(i,l){if(1&i&&(e.TgZ(0,"div",18),e._UZ(1,"div",14),e.ALo(2,"safeHtml"),e.YNc(3,ze,3,2,"div",1),e.qZA()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,n.help),e.oJD),e.xp6(2),e.Q6J("ngForOf",n.links)}}function Ge(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",7),e.TgZ(2,"div",16),e.NdJ("click",function(){var s=e.CHM(n).$implicit;return e.oxw(7).addSnippet(s.snip)}),e._uU(3),e.qZA(),e.TgZ(4,"mat-icon",10),e.NdJ("click",function(){var s=e.CHM(n).$implicit;return e.oxw(7).toggleInfo(s.key)}),e._uU(5," info "),e.qZA(),e.qZA(),e.YNc(6,Xe,4,4,"div",17),e.qZA()}if(2&i){var t=l.$implicit,o=e.oxw(7);e.xp6(2),e.Q6J("tippy",t.snip),e.xp6(1),e.hij(" ",t.label," "),e.xp6(3),e.Q6J("ngIf",o.toggledInfos.includes(t.key))}}function et(i,l){if(1&i&&(e.ynx(0),e.YNc(1,Ge,7,3,"div",1),e.ALo(2,"objectToArray"),e.BQk()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.more))}}function tt(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"div",8),e.NdJ("click",function(){var s=e.CHM(n).$implicit;return e.oxw(5).addSnippet(s.snip)}),e._uU(3),e.qZA(),e.YNc(4,We,2,1,"mat-icon",9),e.TgZ(5,"mat-icon",10),e.NdJ("click",function(){var s=e.CHM(n).$implicit;return e.oxw(5).toggleInfo(s.key)}),e._uU(6," info "),e.qZA(),e.qZA(),e.YNc(7,Ke,4,4,"div",11),e.YNc(8,et,3,3,"ng-container",3),e.qZA()}if(2&i){var t=l.$implicit,o=e.oxw(5);e.xp6(2),e.Q6J("tippy",t.snip),e.xp6(1),e.hij(" ",t.label," "),e.xp6(1),e.Q6J("ngIf",t.more),e.xp6(3),e.Q6J("ngIf",o.toggledInfos.includes(t.key)),e.xp6(1),e.Q6J("ngIf",o.toggledMores.includes(t.key))}}function nt(i,l){if(1&i&&(e.ynx(0),e.YNc(1,tt,9,5,"div",5),e.ALo(2,"objectToArray"),e.BQk()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.value))}}function it(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",4),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(3).toggleFolder(c.key)}),e.ALo(2,"translate"),e.TgZ(3,"mat-icon"),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.YNc(8,nt,3,3,"ng-container",3),e.qZA()}if(2&i){var t=l.$implicit,o=e.oxw(2).$implicit,a=e.oxw();e.xp6(1),e.Q6J("tippy",e.lcZ(2,4,"SourceEditorSnippets."+o.key+"."+t.key+".Help")),e.xp6(3),e.hij(" ",a.toggledFolders.includes(t.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),e.xp6(2),e.Oqu(e.lcZ(7,6,"SourceEditorSnippets."+o.key+"."+t.key+".Title")),e.xp6(2),e.Q6J("ngIf",a.toggledFolders.includes(t.key))}}function ot(i,l){if(1&i&&(e.ynx(0),e.YNc(1,it,9,8,"div",1),e.ALo(2,"keyvalue"),e.BQk()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.value))}}function at(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",2),e.NdJ("click",function(){var s=e.CHM(n).$implicit;return e.oxw().toggleSection(s.key)}),e.ALo(2,"translate"),e.TgZ(3,"mat-icon"),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.YNc(8,ot,3,3,"ng-container",3),e.qZA()}if(2&i){var t=l.$implicit,o=e.oxw();e.xp6(1),e.Q6J("tippy",e.lcZ(2,4,"SourceEditorSnippets."+t.key+".Help")),e.xp6(3),e.hij(" ",o.toggledSections.includes(t.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),e.xp6(2),e.Oqu(e.lcZ(7,6,"SourceEditorSnippets."+t.key+".Title")),e.xp6(2),e.Q6J("ngIf",o.toggledSections.includes(t.key))}}var rt=function(){var i=function(){function l(){(0,P.Z)(this,l),this.insertSnippet=new e.vpe,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}return(0,M.Z)(l,[{key:"addSnippet",value:function(t){this.insertSnippet.emit(t)}},{key:"toggleSection",value:function(t){w.iX.toggleInArray(t,this.toggledSections)}},{key:"toggleFolder",value:function(t){w.iX.toggleInArray(t,this.toggledFolders)}},{key:"toggleInfo",value:function(t){w.iX.toggleInArray(t,this.toggledInfos)}},{key:"toggleMore",value:function(t){w.iX.toggleInArray(t,this.toggledMores)}}]),l}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:3,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],[4,"ngFor","ngForOf"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],[4,"ngIf"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],["class","snippet",4,"ngFor","ngForOf"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750",3,"click",4,"ngIf"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help",4,"ngIf"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more",4,"ngIf"],[1,"snippet-help","snippet-help-more"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,at,9,8,"div",1),e.ALo(2,"keyvalue"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.snippets)))},directives:[u.sg,X.$,k.Hw,u.O5,U.wG,ee.E],pipes:[u.Nd,O.X$,Ye,He.z],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]}),i}();function st(i,l){1&i&&(e.TgZ(0,"mat-icon",21),e._uU(1,"share"),e.qZA())}function lt(i,l){1&i&&e._UZ(0,"mat-icon",22)}function pt(i,l){1&i&&e._UZ(0,"mat-spinner",23)}var ct=function(l,n,t){return{active:l,modified:n,loading:t}};function dt(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){var r=e.CHM(n).$implicit;return e.oxw(3).openView(r.viewKey)}),e.TgZ(1,"div",14),e.YNc(2,st,2,0,"mat-icon",15),e.TgZ(3,"span",16),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",17),e.YNc(6,lt,1,0,"mat-icon",18),e.YNc(7,pt,1,0,"mat-spinner",19),e.TgZ(8,"mat-icon",20),e.NdJ("click",function(){var r=e.CHM(n).$implicit;return e.oxw(3).closeEditor(r.viewKey)}),e._uU(9," close "),e.qZA(),e.qZA(),e.qZA()}if(2&i){var t=l.$implicit;e.Q6J("ngClass",e.kEZ(6,ct,t.isActive,t.isModified,t.isLoading)),e.xp6(1),e.Q6J("tippy",t.label),e.xp6(1),e.Q6J("ngIf",t.viewKey.shared),e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Q6J("ngIf",t.isModified),e.xp6(1),e.Q6J("ngIf",t.isLoading)}}function ut(i,l){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,dt,10,10,"div",12),e.qZA()),2&i){var n=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",n.tabs)}}function vt(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"app-monaco-editor",24),e.NdJ("valueChanged",function(r){e.CHM(n);var s=e.oxw().ngIf;return e.oxw().codeChanged(r,s.viewKey)}),e.qZA()}if(2&i){var t=e.oxw().ngIf,o=e.oxw();e.Q6J("filename",t.view.FileName)("value",t.view.Code)("options",o.monacoOptions)("snippets",t.editorSnipps)("autoFocus",!0)}}function _t(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).save()}),e.TgZ(1,"mat-icon"),e._uU(2,"done"),e.qZA(),e.qZA()}}var gt=function(l){return{"sxc-dark":l}},ue=function(l){return{active:l}};function ft(i,l){if(1&i){var n=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.NdJ("click",function(){e.CHM(n);var r=e.oxw();return r.toggleExplorer(r.Explorers.Templates)}),e.TgZ(3,"mat-icon"),e._uU(4,"file_copy"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.NdJ("click",function(){e.CHM(n);var r=e.oxw();return r.toggleExplorer(r.Explorers.Snippets)}),e.TgZ(6,"mat-icon"),e._uU(7,"code"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"app-code-templates",5),e.NdJ("openView",function(r){return e.CHM(n),e.oxw().openView(r)})("createTemplate",function(r){return e.CHM(n),e.oxw().createTemplate(r)}),e.qZA(),e.TgZ(9,"app-code-snippets",6),e.NdJ("insertSnippet",function(r){return e.CHM(n),e.oxw().insertSnippet(r)}),e.qZA(),e.TgZ(10,"div",7),e.YNc(11,ut,2,1,"div",8),e.YNc(12,vt,1,5,"app-monaco-editor",9),e.qZA(),e.YNc(13,_t,3,0,"button",10),e.qZA()}if(2&i){var t=l.ngIf,o=e.oxw();e.Q6J("ngClass",e.VKq(11,gt,"2sxc-dark"===o.monacoOptions.theme)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,ue,o.activeExplorer===o.Explorers.Templates)),e.xp6(3),e.Q6J("ngClass",e.VKq(15,ue,o.activeExplorer===o.Explorers.Snippets)),e.xp6(3),e.Q6J("hidden",o.activeExplorer!==o.Explorers.Templates)("view",t.view)("templates",t.templates),e.xp6(1),e.Q6J("hidden",o.activeExplorer!==o.Explorers.Snippets)("snippets",t.explorerSnipps),e.xp6(2),e.Q6J("ngIf",t.tabs.length>0),e.xp6(1),e.Q6J("ngIf",t.view),e.xp6(1),e.Q6J("ngIf",t.activeView)}}var mt=[{path:"",component:function(){var i=function(){function l(n,t,o,a,r,s,c,p,g){var v;(0,P.Z)(this,l),this.context=n,this.route=t,this.snackBar=o,this.sourceService=a,this.snippetsService=r,this.zone=s,this.titleService=c,this.dialog=p,this.viewContainerRef=g,this.Explorers=re,this.activeExplorer=re.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2},this.context.init(this.route);var _=JSON.parse(sessionStorage.getItem(ae.kF)),m=null!==(v="true"===sessionStorage.getItem(ae.PH))&&void 0!==v&&v;_.forEach(function(y){var S;y.Path.startsWith("/")&&(y.Path=y.Path.substring(1)),null!==(S=y.IsShared)&&void 0!==S||(y.IsShared=m)}),this.urlItems=_}return(0,M.Z)(l,[{key:"ngOnInit",value:function(){var t=this;this.subscription=new K.w0,this.templates$=new H.X([]);var o=this.urlItems.map(function(a){var r,s;return{key:null!==(s=null===(r=a.EntityId)||void 0===r?void 0:r.toString())&&void 0!==s?s:a.Path,shared:a.IsShared}});this.activeView$=new H.X(o[0]),this.openViews$=new H.X(o),this.viewInfos$=new H.X([]),this.attachListeners(),this.sourceService.getAllNew().subscribe(function(a){t.templates$.next(a)}),this.subscription.add((0,W.a)([this.templates$,this.openViews$]).subscribe(function(a){var r=(0,Y.Z)(a,2),s=r[0];if(0!==s.length){var p=t.viewInfos$.value,g=r[1].filter(function(v){return!p.some(function(_){return w.iX.objectsEqual(_.viewKey,v)})});0!==g.length&&((0,ne.D)(g.map(function(v){var _={viewKey:v};p=[].concat((0,A.Z)(p),[_]);var m=t.sourceService.get(v.key,v.shared,t.urlItems).pipe((0,ge.B)()),y=m.pipe((0,fe.z)(function(S){return t.snippetsService.getSnippets(S)}));return(0,ne.D)([(0,_e.of)(v),m,y])})).subscribe(function(v){var _=t.viewInfos$.value;v.forEach(function(m){var y=(0,Y.Z)(m,3),S=y[0],Z=y[1],J=y[2],T=_.findIndex(function(te){return w.iX.objectsEqual(te.viewKey,S)});if(!(T<0)){var B={viewKey:S,view:Z,explorerSnipps:J.sets,editorSnipps:J.list,savedCode:Z.Code};_=[].concat((0,A.Z)(_.slice(0,T)),[B],(0,A.Z)(_.slice(T+1))),t.showCodeAndEditionWarnings(S,Z,s)}}),t.viewInfos$.next(_)}),t.viewInfos$.next(p))}})),this.subscription.add((0,W.a)([this.activeView$,this.viewInfos$]).subscribe(function(a){var p,r=(0,Y.Z)(a,2),s=r[0],g=r[1].find(function(y){return w.iX.objectsEqual(y.viewKey,s)}),v="Code Editor",_=null==g?v:"".concat(null===(p=g.view)||void 0===p?void 0:p.FileName," - ").concat(v);_!==t.titleService.getTitle()&&t.titleService.setTitle(_)})),this.templateVars$=(0,W.a)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,z.U)(function(a){var r=(0,Y.Z)(a,4),s=r[0],c=r[1],g=r[3],v=r[2].map(function(y){var S,Z,J,T=g.find(function(te){return w.iX.objectsEqual(te.viewKey,y)});return{viewKey:y,label:null!==(Z=null===(S=null==T?void 0:T.view)||void 0===S?void 0:S.FileName)&&void 0!==Z?Z:y.key,isActive:w.iX.objectsEqual(y,c),isModified:(null===(J=null==T?void 0:T.view)||void 0===J?void 0:J.Code)!==(null==T?void 0:T.savedCode),isLoading:null==(null==T?void 0:T.view)}}),_=g.find(function(y){return w.iX.objectsEqual(y.viewKey,c)});return{activeView:c,tabs:v,viewKey:null==_?void 0:_.viewKey,view:null==_?void 0:_.view,templates:s,explorerSnipps:null==_?void 0:_.explorerSnipps,editorSnipps:null==_?void 0:_.editorSnipps}}))}},{key:"ngOnDestroy",value:function(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),this.subscription.unsubscribe()}},{key:"toggleExplorer",value:function(t){this.activeExplorer=this.activeExplorer!==t?t:null}},{key:"createTemplate",value:function(t){var a,o=this;if(null!=t.isShared){var s={folder:t.folder,global:t.isShared,purpose:"api"===t.folder||(null===(a=t.folder)||void 0===a?void 0:a.startsWith("api/"))?"Api":void 0};this.dialog.open(h.U,{autoFocus:!1,data:s,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(function(p){!p||o.sourceService.create(p.name,t.isShared,p.templateKey).subscribe(function(){o.sourceService.getAllNew().subscribe(function(g){o.templates$.next(g)})})})}else this.dialog.open(Ie,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(function(p){null!=p&&(t.isShared=p,o.createTemplate(t))})}},{key:"insertSnippet",value:function(t){var o;null===(o=this.monacoEditorRef)||void 0===o||o.insertSnippet(t)}},{key:"codeChanged",value:function(t,o){var a=this.viewInfos$.value,r=a.findIndex(function(p){return w.iX.objectsEqual(p.viewKey,o)}),s=a[r],c=Object.assign(Object.assign({},s),{view:Object.assign(Object.assign({},s.view),{Code:t})});a=[].concat((0,A.Z)(a.slice(0,r)),[c],(0,A.Z)(a.slice(r+1))),this.viewInfos$.next(a)}},{key:"openView",value:function(t){var o,a;t=null!==(a=null===(o=this.viewInfos$.value.find(function(p){var g,v;return!w.iX.objectsEqual(p.viewKey,t)&&(null===(g=p.view)||void 0===g?void 0:g.FileName)===t.key&&(null===(v=p.view)||void 0===v?void 0:v.IsShared)===t.shared}))||void 0===o?void 0:o.viewKey)&&void 0!==a?a:t,w.iX.objectsEqual(this.activeView$.value,t)||this.activeView$.next(t);var s=this.openViews$.value;if(!s.some(function(p){return w.iX.objectsEqual(p,t)})){var c=[].concat((0,A.Z)(s),[t]);this.openViews$.next(c)}}},{key:"closeEditor",value:function(t){var o,a=this.openViews$.value,r=a.filter(function(p){return!w.iX.objectsEqual(p,t)}),s=this.activeView$.value;if(w.iX.objectsEqual(s,t)){var c=null!==(o=a[a.findIndex(function(p){return w.iX.objectsEqual(p,s)})-1])&&void 0!==o?o:r[0];this.activeView$.next(c)}this.openViews$.next(r)}},{key:"save",value:function(t){var o=this;null!=t||(t=this.activeView$.value);var a=this.viewInfos$.value.find(function(s){return w.iX.objectsEqual(s.viewKey,t)});if(null!=(null==a?void 0:a.view)){this.snackBar.open("Saving...");var r=a.view.Code;this.sourceService.save(t.key,t.shared,a.view,this.urlItems).subscribe({next:function(c){if(c){var p=(0,A.Z)(o.viewInfos$.value),g=p.findIndex(function(m){return w.iX.objectsEqual(m.viewKey,t)});if(!(g<0)){var _=Object.assign(Object.assign({},p[g]),{savedCode:r});p=[].concat((0,A.Z)(p.slice(0,g)),[_],(0,A.Z)(p.slice(g+1))),o.viewInfos$.next(p),o.snackBar.open("Saved",null,{duration:2e3})}}else o.snackBar.open("Failed",null,{duration:2e3})},error:function(){o.snackBar.open("Failed",null,{duration:2e3})}})}}},{key:"showCodeAndEditionWarnings",value:function(t,o,a){var s,r=this,c=o.FileName,p=c.indexOf("/")>-1?c.lastIndexOf("/")+1:0,g=0===p?"":c.substring(0,p),v=c.substring(p),m=v.substring(0,v.length-o.Extension.length)+".code"+o.Extension,y=a.find(function(T){return T.Path===g+m&&T.Shared===o.IsShared}),S=a.filter(function(T){return T.Path.endsWith(v)&&T.Shared===o.IsShared}).length-1;if(y||S){var Z={fileName:v,codeFile:null==y?void 0:y.Path,edition:null===(s=this.urlItems.find(function(T){var B;return(null===(B=T.EntityId)||void 0===B?void 0:B.toString())===t.key&&T.IsShared===o.IsShared&&T.Path===o.FileName}))||void 0===s?void 0:s.Edition,otherEditions:S,openCodeBehind:!1},J=this.snackBar.openFromComponent(Te,{data:Z,duration:1e4});J.onAction().subscribe(function(){J.containerInstance.snackBarConfig.data.openCodeBehind&&r.openView({key:null==y?void 0:y.Path,shared:null==y?void 0:y.Shared})})}}},{key:"attachListeners",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.subscription.add((0,ie.R)(window,"beforeunload").subscribe(function(o){!t.viewInfos$.value.some(function(r){return null!=r.view&&r.view.Code!==r.savedCode})||(o.preventDefault(),o.returnValue="")})),t.subscription.add((0,ie.R)(window,"keydown").subscribe(function(o){83!==o.keyCode||!(navigator.platform.match("Mac")?o.metaKey:o.ctrlKey)||(o.preventDefault(),t.zone.run(function(){t.save()}))}))})}}]),l}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(f._),e.Y36(V.gz),e.Y36(N.ux),e.Y36(le.t),e.Y36(se),e.Y36(e.R0b),e.Y36(pe.Dx),e.Y36(D.uw),e.Y36(e.s_b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-code-editor"]],viewQuery:function(n,t){var o;1&n&&e.Gf(oe.T,5),2&n&&e.iGM(o=e.CRH())&&(t.monacoEditorRef=o.first)},decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",3,"ngClass",4,"ngIf"],["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates","openView","createTemplate"],[3,"hidden","snippets","insertSnippet"],[1,"editor-group"],["class","tabs-container fancy-scrollbar-dark",4,"ngIf"],[3,"filename","value","options","snippets","autoFocus","valueChanged",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click",4,"ngIf"],[1,"tabs-container","fancy-scrollbar-dark"],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tab",3,"ngClass","click"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],["class","icon-shared",4,"ngIf"],[1,"tab-label"],[1,"tab-actions-container"],["class","tab-action icon-modified","svgIcon","circle",4,"ngIf"],["class","spinner","mode","indeterminate","diameter","14","color","white",4,"ngIf"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[1,"icon-shared"],["svgIcon","circle",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],[3,"filename","value","options","snippets","autoFocus","valueChanged"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(n,t){1&n&&(e.YNc(0,ft,14,17,"div",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,t.templateVars$))},directives:[u.O5,ke.D,u.mk,X.$,k.Hw,Be,rt,u.sg,ee.E,E.$g,oe.T,L.lW],pipes:[u.Ov],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid #252526;background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),i}()}],Ct=function(){var i=(0,M.Z)(function l(){(0,P.Z)(this,l)});return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[V.Bz.forChild(mt)],V.Bz]}),i}();function ve(i){return new I.M(i,"./i18n/code-editor.",".js?".concat(window.sxcVersion))}var yt=function(){var i=(0,M.Z)(function l(){(0,P.Z)(this,l)});return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[f._,le.t,se,O.sK],imports:[[Ct,x.q,u.ez,D.Is,L.ot,k.Ps,N.ZX,U.si,O.aw.forChild((0,Q.f)(ve)),C.n,E.Cq,h.q,b.UX,$.lN,F.LD]]}),i}()},4722:function(q,R,d){d.d(R,{jt:function(){return F},Mr:function(){return N}});var M=d(5106),P=d(8069),u=d(8047),b=d(635),L=d(5005),U=d(8598),D=d(7133),$=d(8784),k=d(2425),E="admin/field/",F=E+"all",N=function(){var O=function(){function h(C,f,x){(0,P.Z)(this,h),this.http=C,this.context=f,this.dnnContext=x}return(0,u.Z)(h,[{key:"apiUrl",value:function(f){return this.dnnContext.$2sxc.http.apiUrl(f)}},{key:"typeListRetrieve",value:function(){return this.http.get(this.apiUrl(E+"DataTypes"),{params:{appid:this.context.appId.toString()}})}},{key:"getInputTypesList",value:function(){return this.http.get(this.apiUrl(E+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,b.U)(function(f){return f.map(function(I){return{dataType:I.Type.substring(0,I.Type.indexOf("-")),inputType:I.Type,label:I.Label,description:I.Description,isDefault:I.IsDefault,isObsolete:I.IsObsolete,isRecommended:I.IsRecommended,obsoleteMessage:I.ObsoleteMessage,icon:I.IsDefault?"star":I.IsRecommended?"star_outlined":null}})}))}},{key:"getReservedNames",value:function(){return this.http.get(this.apiUrl(E+"ReservedNames"))}},{key:"getFields",value:function(f){return this.http.get(this.apiUrl(F),{params:{appid:this.context.appId.toString(),staticName:f}}).pipe((0,b.U)(function(x){if(x){var Q,I=(0,M.Z)(x);try{for(I.s();!(Q=I.n()).done;){var V=Q.value;if(V.Metadata){var A=V.Metadata,K=A[V.Type],H=A[V.InputType];A.merged=Object.assign(Object.assign(Object.assign({},A.All),K),H)}}}catch(W){I.e(W)}finally{I.f()}}return x}))}},{key:"reOrder",value:function(f,x){return this.http.post(this.apiUrl(E+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:x.Id.toString(),order:JSON.stringify(f)}})}},{key:"setTitle",value:function(f,x){return this.http.post(this.apiUrl(L._+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:x.Id.toString(),attributeId:f.Id.toString()}})}},{key:"rename",value:function(f,x,I){return this.http.post(this.apiUrl(E+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:x.toString(),attributeId:f.toString(),newName:I}})}},{key:"delete",value:function(f,x){if(f.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(E+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:x.Id.toString(),attributeId:f.Id.toString()}})}},{key:"add",value:function(f,x){return this.http.post(this.apiUrl(E+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:x.toString(),Id:f.Id.toString(),Type:f.Type,InputType:f.InputType,StaticName:f.StaticName,IsTitle:f.IsTitle.toString(),Index:f.SortOrder.toString()}})}},{key:"updateInputType",value:function(f,x,I){return this.http.post(this.apiUrl(E+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:f.toString(),field:x,inputType:I}})}}]),h}();return O.\u0275fac=function(C){return new(C||O)(D.LFG($.eN),D.LFG(U._),D.LFG(k._y))},O.\u0275prov=D.Yz7({token:O,factory:O.\u0275fac}),O}()},3135:function(q,R,d){d.d(R,{Y:function(){return O}});var M=d(8069),P=d(8047),u=d(7133),b=d(6362),L=d(4770);function U(h,C){1&h&&u.GkF(0)}function D(h,C){if(1&h&&(u.TgZ(0,"mat-hint"),u.YNc(1,U,1,0,"ng-container",3),u.qZA()),2&h){u.oxw();var f=u.MAs(4);u.xp6(1),u.Q6J("ngTemplateOutlet",f)}}function $(h,C){1&h&&u.GkF(0)}function k(h,C){if(1&h&&(u.TgZ(0,"mat-error"),u.YNc(1,$,1,0,"ng-container",3),u.qZA()),2&h){u.oxw();var f=u.MAs(4);u.xp6(1),u.Q6J("ngTemplateOutlet",f)}}function E(h,C){1&h&&u.Hsn(0)}var F=function(C){return{"hint-box__short":C}},N=["*"],O=function(){var h=function(){function C(){(0,M.Z)(this,C),this.isError=!1,this.isShort=!0}return(0,P.Z)(C,[{key:"toggleIsShort",value:function(){this.isShort=!this.isShort}}]),C}();return h.\u0275fac=function(f){return new(f||h)},h.\u0275cmp=u.Xpm({type:h,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:N,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(f,x){1&f&&(u.F$t(),u.TgZ(0,"div",0),u.NdJ("click",function(){return x.toggleIsShort()}),u.YNc(1,D,2,1,"mat-hint",1),u.YNc(2,k,2,1,"mat-error",1),u.qZA(),u.YNc(3,E,1,0,"ng-template",null,2,u.W1O)),2&f&&(u.Q6J("ngClass",u.VKq(4,F,x.isShort))("ngSwitch",x.isError),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0))},directives:[b.mk,b.RF,b.n9,L.bx,b.tP,L.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),h}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.02.00/ng-edit/projects_ng-dialogs_src_app_code-editor_code-editor_module_ts.c34df49e3cbe9318.js.map