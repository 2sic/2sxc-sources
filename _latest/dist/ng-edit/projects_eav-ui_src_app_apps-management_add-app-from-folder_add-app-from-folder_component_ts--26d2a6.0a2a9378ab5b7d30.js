"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--26d2a6"],{8242:(O,c,e)=>{e.r(c),e.d(c,{AddAppFromFolderComponent:()=>W});var t=e(8559),p=e(7941),g=e(4205),v=e(9999),h=e(3037),u=e(6647),R=e(1318),m=e(9452),d=e(1870),I=e(271),b=e(8136),D=e(3176),F=e(251),A=e(4858),x=e(3583),E=e(3840),M=e(4601);let S=(()=>{class s{agInit(n){this.name=n.value,this.tooltip=n.tooltipGetter(n.data)}refresh(n){return!0}static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-app-name-show"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"mat-icon",1),t.EFF(4,"info"),t.k0s()()),2&o&&(t.R7$(2),t.JRh(r.name),t.R7$(),t.Y8G("tippy",r.tooltip))},dependencies:[E.m_,E.An,M.e],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}return s})(),j=(()=>{class s{agInit(n){this.params=n}refresh(n){return!0}onChange(n){this.params.onChange(this.params.data,n.currentTarget.checked)}static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-checkbox-cell"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"change","disabled","checked"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"input",1),t.bIt("change",function(G){return r.onChange(G)}),t.k0s()()),2&o&&(t.R7$(),t.Y8G("disabled",r.params.isDisabled)("checked",r.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}return s})();var N=e(316),$=e(4175),B=e(7850),P=e(7037),l=e(5437),y=e(3347),a=e(9841);function i(s,U){1&s&&(t.j41(0,"p"),t.EFF(1," Nothing to show. All apps in the 2sxc folder are already installed. "),t.k0s())}function f(s,U){if(1&s&&(t.j41(0,"div"),t.nrm(1,"ag-grid-angular",8),t.k0s()),2&s){const n=t.XpG(),o=t.XpG();t.R7$(),t.Y8G("rowData",n.pendingApps)("gridOptions",o.gridOptions)}}function C(s,U){if(1&s){const n=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Add App from Folder"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"app-feature-text-info",4),t.j41(6,"p"),t.EFF(7," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),t.k0s(),t.DNE(8,i,2,0,"p")(9,f,2,2,"div"),t.k0s(),t.j41(10,"mat-dialog-actions",5)(11,"button",6),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.closeDialog())}),t.EFF(12," Cancel "),t.k0s(),t.j41(13,"button",7),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.install())}),t.EFF(14," Install "),t.k0s()()()}if(2&s){const n=U,o=t.XpG();t.R7$(5),t.Y8G("featureNameId","AppSyncWithSiteFiles"),t.R7$(3),t.vxM(8,0==(null==n.pendingApps?null:n.pendingApps.length)?8:-1),t.R7$(),t.vxM(9,(null==n.pendingApps?null:n.pendingApps.length)>0?9:-1),t.R7$(4),t.Y8G("disabled",0===o.pendingApps.length||o.installing)}}let W=(()=>{class s extends D.${constructor(n,o){super(),this.dialogRef=n,this.snackBar=o,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.pendingApps=[],this.installing=!1,this.refreshApps$=new g.B,this.features=(0,t.WQX)(A.D),this.isAddFromFolderEnabled=this.features.isEnabled(b.T.AppSyncWithSiteFiles),this.appsListService=(0,l.d)(x.U)}ngOnInit(){this.viewModel$=(0,v.z)([this.refreshApps$.pipe((0,h.Z)(void 0),(0,u.n)(()=>this.appsListService.getPendingApps().pipe((0,R.W)(()=>(0,m.of)(void 0)))),(0,d.u)())]).pipe((0,I.T)(([n])=>({pendingApps:n})))}ngOnDestroy(){this.refreshApps$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onChange(n,o){o?this.pendingApps.push(n):this.pendingApps.splice(this.pendingApps.indexOf(n),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...F.C,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:j,cellRendererParams:()=>({isDisabled:!this.isAddFromFolderEnabled,onChange:(r,T)=>this.onChange(r,T)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:S,cellRendererParams:{tooltipGetter:r=>`Server folder: ${r.ServerFolder}\nFolder: ${r.Folder}\nVersion: ${r.Version}\nDescription: ${r.Description}`}}]}}static#t=this.\u0275fac=function(o){return new(o||s)(t.rXU(p.CP),t.rXU(y.UG))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(o,r){2&o&&t.Mr5("className",r.hostClass)},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(o,r){if(1&o&&(t.DNE(0,C,15,4,"div",0),t.nI1(1,"async")),2&o){let T;t.vxM(0,(T=t.bMT(1,1,r.viewModel$))?0:-1,T)}},dependencies:[p.E7,$.Hl,$.$z,N.Jj,B.L,P.p,a.xs],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}return s})()},5437:(O,c,e)=>{e.d(c,{d:()=>p});var t=e(8559);function p(g,v){return v??=(0,t.WQX)(t.zZn),t.zZn.create({providers:[g],parent:v}).get(g,void 0,{self:!0})}},8136:(O,c,e)=>{e.d(c,{T:()=>t});const t={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement"}},5943:(O,c,e)=>{e.d(c,{N:()=>h});var t=e(8559),p=e(6443),g=e(4821);let h=(()=>{class u{constructor(m,d){this.http=m,this.dnnContext=d}getFeatureDetails(m){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/feature/details"),{params:{nameId:m}})}static#t=this.\u0275fac=function(d){return new(d||u)(t.KVO(p.Qq),t.KVO(g.ob))};static#e=this.\u0275prov=t.jDH({token:u,factory:u.\u0275fac})}return u})()},6838:(O,c,e)=>{e.d(c,{xG:()=>B,IM:()=>$,jr:()=>P});var t=e(8559),p=e(7941),g=e(4858),v=e(519),h=e(852),u=e(316),R=e(3840),m=e(4175),d=e(3777),I=e(4601),b=e(9914),D=e(3347),F=e(5943);function A(l,y){if(1&l){const a=t.RV6();t.j41(0,"div",1)(1,"div",2),t.EFF(2,"ID:"),t.k0s(),t.j41(3,"div",7)(4,"span",8),t.bIt("click",function(){const f=t.eBV(a),C=t.XpG(2);return t.Njj(C.copyToClipboard(f))}),t.EFF(5),t.k0s()()()}if(2&l){const a=y;t.R7$(4),t.Y8G("tippy",a),t.R7$(),t.JRh(a)}}function x(l,y){if(1&l){const a=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.j41(4,"mat-card-content"),t.nrm(5,"p",0),t.nI1(6,"safeHtml"),t.j41(7,"div",1)(8,"div",2),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"div",3)(12,"span"),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.DNE(15,A,6,2,"div",1),t.k0s(),t.j41(16,"mat-card-actions",4)(17,"button",5),t.bIt("click",function(){const f=t.eBV(a),C=t.XpG();return t.Njj(C.findOutMore(f.link))}),t.j41(18,"mat-icon"),t.EFF(19,"open_in_new"),t.k0s(),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"button",6),t.bIt("click",function(){t.eBV(a);const f=t.XpG();return t.Njj(f.closeDialog())}),t.EFF(23),t.nI1(24,"translate"),t.k0s()()()}if(2&l){let a;const i=y;t.R7$(3),t.JRh(i.name),t.R7$(2),t.Y8G("innerHtml",t.bMT(6,7,i.description),t.npT),t.R7$(4),t.SpI("",t.bMT(10,9,"Features.Status"),":"),t.R7$(4),t.JRh(t.bMT(14,11,i.isEnabled?"Features.Active":"Features.NotActive")),t.R7$(2),t.vxM(15,(a=i.nameId)?15:-1,a),t.R7$(5),t.SpI(" ",t.bMT(21,13,"Features.FindOutMore")," "),t.R7$(3),t.SpI(" ",t.bMT(24,15,"Features.Close")," ")}}let E=(()=>{class l{constructor(a,i,f,C){this.dialogData=a,this.dialogRef=i,this.snackBar=f,this.featureDetailService=C}ngOnInit(){this.viewModel$=this.featureDetailService.getFeatureDetails(this.dialogData)}copyToClipboard(a){(0,v.l)(a),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(a){window.open(a,"_blank")}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||l)(t.rXU(p.Vh),t.rXU(p.CP),t.rXU(D.UG),t.rXU(F.N))};static#e=this.\u0275cmp=t.VBU({type:l,selectors:[["app-feature-info-dialog"]],standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["align","end"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"click","tippy"]],template:function(i,f){if(1&i&&(t.DNE(0,x,25,17,"mat-card"),t.nI1(1,"async")),2&i){let C;t.vxM(0,(C=t.bMT(1,1,f.viewModel$))?0:-1,C)}},dependencies:[d.Hu,d.RN,d.YY,d.m2,d.MM,d.dh,m.Hl,m.$z,R.m_,R.An,u.Jj,h.h,h.D9,I.e,b.$]})}return l})();var M=e(5797),S=e(6647),j=e(9999),N=e(271);const $=[F.N];let B=(()=>{class l{set featureNameId(a){this.featureNameId$.next(a)}set showIf(a){this.showIf$.next(1==a)}constructor(){this.featureNameId$=new M.t(null),this.showIf$=new M.t(!1),this.dialog=(0,t.WQX)(p.bZ),this.viewContainerRef=(0,t.WQX)(t.c1b),this.changeDetectorRef=(0,t.WQX)(t.gRc),this.featuresService=(0,t.WQX)(g.D),this.feature$=this.featureNameId$.pipe((0,S.n)(a=>this.featuresService.get$(a))),this.show$=(0,j.z)([this.feature$,this.showIf$]).pipe((0,N.T)(([a,i])=>i==(a?.isEnabled??!1)))}openDialog(){P(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275dir=t.FsC({type:l,inputs:{featureNameId:"featureNameId",showIf:"showIf"}})}return l})();function P(l,y,a,i){l.open(E,{autoFocus:!1,data:y,viewContainerRef:a,width:"400px"}),i.markForCheck()}},1772:(O,c,e)=>{e.d(c,{I:()=>d,u:()=>m});var t=e(6647),p=e(9452),g=e(3550),v=e(8873),h=e(8559),u=e(6443),R=e(4821);const m="admin/app/";let d=(()=>{class I{constructor(D,F,A){this.http=D,this.context=F,this.dnnContext=A}importApp(D,F,A=!1){const x=new FormData;return x.append("File",D),x.append("Name",F??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(m+"Import"),x,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(E=>{if(A&&E.Messages[0]?.MessageType===g.G1.Warning){const M=prompt(E.Messages[0].Text+" Would you like to install it using another folder name?");if(M)return this.importApp(D,M,!0)}return(0,p.of)(E)}))}static#t=this.\u0275fac=function(F){return new(F||I)(h.KVO(u.Qq),h.KVO(v.o),h.KVO(R.ob))};static#e=this.\u0275prov=h.jDH({token:I,factory:I.\u0275fac})}return I})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--26d2a6.0a2a9378ab5b7d30.js.map