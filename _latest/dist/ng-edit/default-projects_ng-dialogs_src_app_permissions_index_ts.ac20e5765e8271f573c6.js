(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_ng-dialogs_src_app_permissions_index_ts","projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{241:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var i=n(5803),o={go:function(e,t,n){return"permissions/"+e+"/"+t+"/"+n},goEntity:function(e){return this.go(i.Z.metadata.entity.type,i.Z.keyTypes.guid,e)},goContentType:function(e){return this.goEntity(e)},goAttribute:function(e){return this.go(i.Z.metadata.attribute.type,i.Z.keyTypes.number,e)},goApp:function(e){return this.go(i.Z.metadata.app.type,i.Z.keyTypes.number,e)},route:{path:"permissions/:type/:keyType/:key",loadChildren:function(){return n.e("projects_ng-dialogs_src_app_permissions_permissions_module_ts-_9f4a1").then(n.bind(n,8600)).then(function(e){return e.PermissionsModule})},data:{title:"Permissions"}}}},4380:function(e,t,n){"use strict";n.d(t,{Do:function(){return i.D},qQ:function(){return o.q}}),n(241),n(8796),n(6475),n(398),n(8600);var i=n(3584),o=n(4943)},8796:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(4762),o={name:"SET_PERMISSIONS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:function(){return(0,i.mG)(this,void 0,void 0,function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([n.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),n.e("default-node_modules_ag-grid-community_all-modules_dist_es6_main_js-projects_ng-dialogs_src_a-6105fe"),n.e("projects_ng-dialogs_src_app_permissions_permissions_component_ts")]).then(n.bind(n,398))];case 1:return[2,e.sent().PermissionsComponent]}})})}}},6475:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var i=n(1282),o=n(5788),s=n(9350),r=n(8796),a=n(1785),c=[{path:"",component:s.r,data:{dialog:r.g},children:[{matcher:o.eP,loadChildren:function(){return Promise.all([n.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_select_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_slide-toggle_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_progress-spinner_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_list_js"),n.e("default-projects_ng-dialogs_src_app_monaco-editor_monaco-editor_component_ts-projects_ng-dial-aabff0"),n.e("default-projects_edit_edit_module_ts"),n.e("default-node_modules_angular_cdk___ivy_ngcc___fesm2015_drag-drop_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_menu_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_autocomplete_js"),n.e("common"),n.e("node_modules_angular_material___ivy_ngcc___fesm2015_card_js-projects_ng-dialogs_src_app_share-36d8910")]).then(n.bind(n,99)).then(function(e){return e.EditModule})}},{matcher:o.lZ,loadChildren:function(){return n.e("projects_edit_refresh-edit_module_ts").then(n.bind(n,6411)).then(function(e){return e.RefreshEditModule})}}]}],l=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.Bz.forChild(c)],i.Bz]}),e}()},398:function(e,t,n){"use strict";n.r(t),n.d(t,{PermissionsComponent:function(){return w}});var i=n(4762),o=n(9206),s=n(1282),r=n(8512),a=n(7570),c=n(3835),l=n(6238),u=n(9996),d=n(2855),p=n(6085),_=n(8579),m=n(5803),f=n(2420),g=n(1785),h=n(7064),y=n(7512),v=n(7307),C=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(e){return!0},e.prototype.deletePermission=function(){this.params.onDelete(this.params.data)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.NdJ("click",function(){return t.deletePermission()}),g.TgZ(2,"mat-icon"),g._uU(3,"delete"),g.qZA(),g.qZA(),g.qZA())},directives:[h.wG,y.$,v.Hw],styles:[""]}),e}(),b=n(2935),T=n(4943),Z=n(3589),k=n(4369),x=n(9825),P=n(1116),w=function(){function e(e,t,n,s,c){this.dialogRef=e,this.router=t,this.route=n,this.permissionsService=s,this.snackBar=c,this.permissions$=new r.X(null),this.modules=o.F$,this.gridOptions=(0,i.pi)((0,i.pi)({},_.f),{frameworkComponents:{idFieldComponent:p.m,permissionsActionsComponent:C},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(e){return"ID: "+e.Id+"\nGUID: "+e.Guid}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:40,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new a.w,this.targetType=parseInt(this.route.snapshot.paramMap.get("type"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key")}return e.prototype.ngOnInit=function(){this.fetchPermissions(),this.refreshOnChildClosed()},e.prototype.ngOnDestroy=function(){this.permissions$.complete(),this.subscription.unsubscribe()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.fetchPermissions=function(){var e=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(t){e.permissions$.next(t)})},e.prototype.editPermission=function(e){var t,n,o=this;if(null==e){var s=null===(t=Object.values(m.Z.metadata).find(function(e){return e.type===o.targetType}))||void 0===t?void 0:t.target;n={items:[{ContentTypeName:m.Z.contentTypes.permissions,For:(0,i.pi)((0,i.pi)((0,i.pi)({Target:s},this.keyType===m.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===m.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===m.Z.keyTypes.string&&{String:this.key})}]}}else n={items:[{EntityId:e.data.Id}]};var r=(0,f.f)(n);this.router.navigate(["edit/"+r],{relativeTo:this.route})},e.prototype.deletePermission=function(e){var t=this;confirm("Delete '"+e.Title+"' ("+e.Id+")?")&&(this.snackBar.open("Deleting..."),this.permissionsService.delete(e.Id).subscribe(function(){t.snackBar.open("Deleted",null,{duration:2e3}),t.fetchPermissions()}))},e.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.router.events.pipe((0,c.h)(function(e){return e instanceof s.m2}),(0,l.O)(!!this.route.snapshot.firstChild),(0,u.U)(function(){return!!e.route.snapshot.firstChild}),(0,d.G)(),(0,c.h)(function(e){var t=(0,i.CR)(e,2);return t[0]&&!t[1]})).subscribe(function(){e.fetchPermissions()}))},e.\u0275fac=function(t){return new(t||e)(g.Y36(b.so),g.Y36(s.F0),g.Y36(s.gz),g.Y36(T.q),g.Y36(Z.ux))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div"),g._uU(4,"Permissions"),g.qZA(),g.TgZ(5,"button",3),g.NdJ("click",function(){return t.closeDialog()}),g.TgZ(6,"mat-icon"),g._uU(7,"close"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(8,"router-outlet"),g.TgZ(9,"div",4),g._UZ(10,"ag-grid-angular",5),g.ALo(11,"async"),g._UZ(12,"div",6),g.TgZ(13,"button",7),g.NdJ("click",function(){return t.editPermission(null)}),g.TgZ(14,"mat-icon"),g._uU(15,"add"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(10),g.Q6J("rowData",g.lcZ(11,3,t.permissions$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[b.uh,k.lW,y.$,v.Hw,s.lC,x.N8],pipes:[P.Ov],styles:[""]}),e}()},8600:function(e,t,n){"use strict";n.r(t),n.d(t,{PermissionsModule:function(){return h}});var i=n(9825),o=n(1116),s=n(4369),r=n(7064),a=n(2935),c=n(7307),l=n(3589),u=n(7553),d=n(3582),p=n(2677),_=n(6475),m=n(3584),f=n(4943),g=n(1785),h=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({providers:[d._,f.q,m.D,u.g],imports:[[o.ez,_.T,p.q,a.Is,s.ot,c.Ps,i.sF.withComponents([]),r.si,l.ZX]]}),e}()},3584:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var i=n(4762),o=n(1785),s=n(2693),r=n(3582),a=n(2837),c=function(){function e(e,t,n){this.http=e,this.context=t,this.dnnContext=n}return e.prototype.getMetadata=function(e,t,n,o){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:(0,i.pi)({appId:this.context.appId.toString(),targetType:e.toString(),keyType:t,key:n},o&&{contentType:o})})},e.\u0275fac=function(t){return new(t||e)(o.LFG(s.eN),o.LFG(r._),o.LFG(a._y))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e}()},4943:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var i=n(5803),o=n(1785),s=n(3584),r=n(7553),a=function(){function e(e,t){this.metadataService=e,this.entitiesService=t}return e.prototype.getAll=function(e,t,n){return this.metadataService.getMetadata(e,t,n,i.Z.contentTypes.permissions)},e.prototype.delete=function(e){return this.entitiesService.delete(i.Z.contentTypes.permissions,e,!1)},e.\u0275fac=function(t){return new(t||e)(o.LFG(s.D),o.LFG(r.g))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e}()},6085:function(e,t,n){"use strict";n.d(t,{m:function(){return l}});var i=n(8838),o=n(1785),s=n(3589),r=n(7064),a=n(7512),c=n(7307),l=function(){function e(e){this.snackBar=e}return e.prototype.agInit=function(e){this.id=e.value,this.tooltip=e.tooltipGetter(e.data)},e.prototype.refresh=function(e){return!0},e.prototype.copy=function(){(0,i.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(o.Y36(s.ux))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return t.copy()}),o.TgZ(1,"span",1),o._uU(2),o.qZA(),o.TgZ(3,"mat-icon",2),o._uU(4,"file_copy"),o.qZA(),o.qZA()),2&e&&(o.Q6J("tippy",t.tooltip),o.xp6(2),o.Oqu(t.id))},directives:[r.wG,a.$,c.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),e}()},8838:function(e,t,n){"use strict";function i(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}n.d(t,{v:function(){return i}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.07.00/ng-edit/default-projects_ng-dialogs_src_app_permissions_index_ts.ac20e5765e8271f573c6.js.map