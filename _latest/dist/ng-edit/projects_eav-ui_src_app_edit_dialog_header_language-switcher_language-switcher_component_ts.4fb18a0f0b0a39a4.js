"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_edit_dialog_header_language-switcher_language-switcher_component_ts"],{7913:(k,a,l)=>{l.r(a),l.d(a,{LanguageSwitcherComponent:()=>E});var s=l(8559),p=l(4522),d=l(4902);class f{constructor(n,e){this.ngZone=n,this.header=e,this.moveThreshold=2,this.stopClick=!1,this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{const t=i=>{this.checkIfMouseMoved(i)};document.addEventListener("mouseup",t,{passive:!0}),this.eventListeners.push({element:document,type:"mouseup",listener:t})})}lngButtonDown(n){this.ngZone.runOutsideAngular(()=>{this.saveInitialPosition(n)})}lngButtonClick(n){this.ngZone.runOutsideAngular(()=>{this.doMove(n)})}stopClickIfMouseMoved(){return this.stopClick}destroy(){this.ngZone.runOutsideAngular(()=>{this.eventListeners.forEach(({element:n,type:e,listener:t})=>{n.removeEventListener(e,t)}),this.eventListeners=null})}saveInitialPosition(n){this.stopClick=!1,this.positionX=n.pageX,this.positionY=n.pageY}checkIfMouseMoved(n){this.positionX&&this.positionY?(this.stopClick=Math.abs(this.positionX+this.positionY-(n.pageX+n.pageY))>this.moveThreshold,this.positionX=null,this.positionY=null):this.stopClick=!1}doMove(n){if(this.stopClick)return;const e=n.target,t=e.getBoundingClientRect().left,i=e.getBoundingClientRect().width,o=this.header.getBoundingClientRect().left,h=this.header.getBoundingClientRect().width;this.header.scrollLeft+=t+i/2-(o+h/2)}}function c(r){return r.substring(0,r.includes("(")?r.indexOf("(")-1:100).toLocaleUpperCase()}class m{constructor(n,e,t){this.ngZone=n,this.header=e,this.areButtonsDisabled=t,this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{const i=this.registerScroll.bind(this);this.header.addEventListener("pointerdown",i,{passive:!0}),this.headerDownListener={element:this.header,type:"pointerdown",listener:i}})}destroy(){this.ngZone.runOutsideAngular(()=>{this.headerDownListener.element.removeEventListener(this.headerDownListener.type,this.headerDownListener.listener),this.headerDownListener=null,this.eventListeners.forEach(({element:n,type:e,listener:t})=>{n.removeEventListener(e,t)}),this.eventListeners=null}),this.ngZone=null,this.header=null,this.areButtonsDisabled=null}registerScroll(n){if(this.areButtonsDisabled()||0!==n.button)return;window.getSelection().removeAllRanges(),this.oldScrollBehavior=getComputedStyle(this.header).getPropertyValue("scroll-behavior"),this.header.style.scrollBehavior="auto",this.positionX=n.pageX;const t=o=>{this.doScroll(o)},i=()=>{this.removeScroll()};document.addEventListener("pointermove",t,{passive:!0}),document.addEventListener("pointerup",i,{passive:!0}),document.addEventListener("pointerleave",i,{passive:!0}),this.eventListeners.push({element:document,type:"pointermove",listener:t},{element:document,type:"pointerup",listener:i},{element:document,type:"pointerleave",listener:i})}removeScroll(){this.header.style.scrollBehavior=this.oldScrollBehavior,this.eventListeners.forEach(({element:n,type:e,listener:t})=>{n.removeEventListener(e,t)}),this.eventListeners.splice(0,this.eventListeners.length)}doScroll(n){const e=n.pageX;e<this.positionX?this.header.scrollLeft+=this.positionX-e:e>this.positionX&&(this.header.scrollLeft+=-(e-this.positionX)),this.positionX=e}}class w{constructor(n,e,t,i){this.ngZone=n,this.header=e,this.leftShadow=t,this.rightShadow=i,this.hidden="hidden",this.eventListeners=[],this.ngZone.runOutsideAngular(()=>{this.calculateShadows();const o=()=>{this.calculateShadows()};this.header.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),this.eventListeners.push({element:this.header,type:"scroll",listener:o},{element:window,type:"resize",listener:o})})}destroy(){this.ngZone.runOutsideAngular(()=>{this.eventListeners.forEach(({element:n,type:e,listener:t})=>{n.removeEventListener(e,t)}),this.eventListeners=null}),this.ngZone=null,this.header=null,this.leftShadow=null,this.rightShadow=null}calculateShadows(){this.maxScrollLeft=this.header.scrollWidth-this.header.clientWidth,0===this.maxScrollLeft?this.hideBoth():0===this.header.scrollLeft?this.hideLeft():this.header.scrollLeft===this.maxScrollLeft?this.hideRight():this.showBoth()}hideBoth(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.add(this.hidden)}hideLeft(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.remove(this.hidden)}hideRight(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.add(this.hidden)}showBoth(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.remove(this.hidden)}}var u=l(852),g=l(4175),S=l(3472),b=l(4601);const L=["scrollable"],C=["leftShadow"],y=["rightShadow"];function _(r,n){if(1&r){const e=s.RV6();s.j41(0,"button",8),s.bIt("mousedown",function(i){s.eBV(e);const o=s.XpG();return s.Njj(o.lngButtonMouseDown(i))})("click",function(i){const o=s.eBV(e).$implicit,h=s.XpG();return s.Njj(h.lngButtonClick(i,o))}),s.EFF(1),s.k0s()}if(2&r){const e=n.$implicit,t=s.XpG();s.Y8G("disabled",t.disabled&&t.current()!==e.NameId)("color",t.current()===e.NameId?"accent":"white")("tippy",e.Culture)("tippyDisabled",t.disabled),s.R7$(),s.SpI(" ",e.buttonText," ")}}let E=(()=>{class r{constructor(e,t,i,o){this.languageService=e,this.languageInstanceService=t,this.ngZone=i,this.formConfig=o,this.log=new S.B("LanguageSwitcherComponent",!1),this.current=(0,s.EWP)(()=>this.formConfig.language().current),this.buttons=function v(r){const n=[],e={};return r.forEach(t=>{const i=c(t.Culture);e[i]?e[i]++:e[i]=1}),r.forEach(t=>{const i=c(t.Culture);n.push({...t,buttonText:e[i]>1?`${i} (${t.NameId})`:i})}),n}(this.languageService.getLanguages())}ngAfterViewInit(){this.showShadowsHelper=new w(this.ngZone,this.headerRef.nativeElement,this.leftShadowRef.nativeElement,this.rightShadowRef.nativeElement),this.mouseScrollHelper=new m(this.ngZone,this.headerRef.nativeElement,this.areButtonsDisabled.bind(this)),this.centerSelectedHelper=new f(this.ngZone,this.headerRef.nativeElement)}ngOnDestroy(){this.centerSelectedHelper.destroy(),this.mouseScrollHelper.destroy(),this.showShadowsHelper.destroy()}lngButtonMouseDown(e){this.centerSelectedHelper.lngButtonDown(e)}lngButtonClick(e,t){this.disabled||(this.centerSelectedHelper.lngButtonClick(e),this.centerSelectedHelper.stopClickIfMouseMoved()||this.languageInstanceService.setCurrent(this.formConfig.config.formId,t.NameId))}areButtonsDisabled(){return this.disabled}static#e=this.\u0275fac=function(t){return new(t||r)(s.rXU(d.gw),s.rXU(d.Tw),s.rXU(s.SKi),s.rXU(p.Sy))};static#t=this.\u0275cmp=s.VBU({type:r,selectors:[["app-language-switcher"]],viewQuery:function(t,i){if(1&t&&(s.GBs(L,5),s.GBs(C,5),s.GBs(y,5)),2&t){let o;s.mGM(o=s.lsd())&&(i.headerRef=o.first),s.mGM(o=s.lsd())&&(i.leftShadowRef=o.first),s.mGM(o=s.lsd())&&(i.rightShadowRef=o.first)}},inputs:{disabled:"disabled"},standalone:!0,features:[s.aNF],decls:10,vars:4,consts:[["leftShadow",""],["rightShadow",""],["scrollable",""],[1,"scrollable__overlay"],[1,"scrollable__overlay--left-shadow"],[1,"scrollable__overlay--right-shadow"],[1,"scrollable","lang-switch",3,"tippy","tippyDisabled"],["mat-flat-button","",1,"lang-switch__button",3,"disabled","color","tippy","tippyDisabled"],["mat-flat-button","",1,"lang-switch__button",3,"mousedown","click","disabled","color","tippy","tippyDisabled"]],template:function(t,i){1&t&&(s.j41(0,"div",3),s.nrm(1,"div",4,0)(3,"div",5,1),s.j41(5,"div",6,2),s.nI1(7,"translate"),s.Z7z(8,_,2,5,"button",7,s.fX1),s.k0s()()),2&t&&(s.R7$(5),s.Y8G("tippy",s.bMT(7,2,"Message.CantSwitchLanguage"))("tippyDisabled",!i.disabled),s.R7$(3),s.Dyx(i.buttons))},dependencies:[g.Hl,g.$z,u.h,u.D9,b.e],styles:['.scrollable__overlay[_ngcontent-%COMP%]{position:relative;height:100%}.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{content:"";position:absolute;top:0;display:block;z-index:1;pointer-events:none;height:100%;width:80px;background-image:linear-gradient(90deg,#fff 8px,#fff0)}@media (max-width: 600px){.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{width:24px}}.scrollable__overlay--right-shadow[_ngcontent-%COMP%]{right:0;background-image:linear-gradient(270deg,#fff 8px,#fff0)}.scrollable[_ngcontent-%COMP%]{overflow:hidden;scroll-behavior:smooth;height:100%;touch-action:none}.lang-switch[_ngcontent-%COMP%]{display:flex}.lang-switch__button[_ngcontent-%COMP%]{height:100%;flex-shrink:0;border-radius:0;margin-left:0!important;color:#0006;border-bottom:none;font-size:12px;line-height:54px;padding:0 6px;background-color:#fff!important}.lang-switch__button.mat-accent[_ngcontent-%COMP%]{color:#002753;border-bottom:2px solid #002753;background-color:inherit}.hidden[_ngcontent-%COMP%]{visibility:hidden}']})}return r})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.00/dist/ng-edit/projects_eav-ui_src_app_edit_dialog_header_language-switcher_language-switcher_component_ts.4fb18a0f0b0a39a4.js.map