"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_web-api_web-api_component_ts"],{27592:(V,h,n)=>{n.r(h),n.d(h,{WebApiComponent:()=>k});var r=n(44444),g=n(84175),C=n(81863),p=n(93840),l=n(31034),m=n(29658),u=n(12938),f=n(79996),b=n(76068),A=n(72871),d=n(11828),F=n(60251),R=n(67037),j=n(71693),T=n(64699),W=n(89061),y=n(10261),M=n(34601),t=n(99293),N=n(29968);function x(a,v){if(1&a){const e=t.RV6();t.j41(0,"div",7),t.bIt("click",function(){r.eBV(e);const o=t.XpG();return r.Njj(o.openCode())}),t.j41(1,"mat-icon"),t.EFF(2,"code"),t.k0s()()}}function O(a,v){1&a&&(t.j41(0,"div",3)(1,"mat-icon"),t.EFF(2,"code"),t.k0s()())}function S(a,v){if(1&a){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){r.eBV(e);const o=t.XpG();return r.Njj(o.openRestApi())}),t.nrm(1,"mat-icon",9),t.j41(2,"span"),t.EFF(3,"REST API"),t.k0s()()}}let B=(()=>{class a{constructor(e,i){this.router=e,this.route=i}agInit(e){this.params=e,this.enableCode=this.params.enableCodeGetter()}refresh(e){return!0}openCode(){this.params.onOpenCode(this.params.data)}openRestApi(){const e=this.params.data,i=this.router.url.split("/");i[i.length-1]=y.N.routeWebApi,i.push(encodeURIComponent(e.path));const o=i.join("/");this.router.navigate([o])}static#e=this.\u0275fac=function(i){return new(i||a)(t.rXU(m.Ix),t.rXU(m.nX))};static#t=this.\u0275cmp=t.VBU({type:a,selectors:[["app-web-api-actions"]],decls:9,vars:3,consts:[["menu","matMenu"],[1,"actions-component"],["matRipple","","tippy","Code",1,"eav-grid-action-button","highlight"],[1,"eav-grid-action-button","disabled"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["matMenuContent",""],["matRipple","","tippy","Code",1,"eav-grid-action-button","highlight",3,"click"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"]],template:function(i,o){if(1&i&&(t.j41(0,"div",1),t.nVh(1,x,3,0,"div",2),t.nVh(2,O,3,0,"div",3),t.j41(3,"div",4)(4,"mat-icon"),t.EFF(5,"more_horiz"),t.k0s()()(),t.j41(6,"mat-menu",5,0),t.DNE(8,S,4,0,"ng-template",6),t.k0s()),2&i){const s=t.sdS(7);t.R7$(),t.vxM(o.enableCode?1:-1),t.R7$(),t.vxM(o.enableCode?-1:2),t.R7$(),t.Y8G("matMenuTriggerFor",s)}},dependencies:[W.M,N.M,p.m_,p.An,l.Cn,l.kk,l.fb,l.z8,l.Cp,M.e],encapsulation:2})}return a})();var E=n(3347),I=n(29841);let k=(()=>{class a{#e;#t;#n;constructor(e,i,o){this.snackBar=e,this.matDialog=i,this.viewContainerRef=o,this.#e=(0,u.d)(j.d),this.#t=(0,u.d)(f.F),this.#n=(0,r.vPA)(0),this.webApis=this.#t.getWebApisLive(this.#n),this.gridOptions=this.buildGridOptions(),this.dialogConfigSvc=(0,u.d)(T.L)}ngOnInit(){this.dialogConfigSvc.getCurrent$().subscribe(e=>{this.enableCode=e.Context.Enable.CodeEditor})}createController(e){this.matDialog.open(b.g,{autoFocus:!1,data:{folder:"api",global:e,purpose:"Api"},viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{if(s){if(s.name.endsWith("Controller.cs")){const c=s.name.substring(s.name.lastIndexOf("/")+1);if(!/^[A-Z][a-zA-Z0-9]*Controller\.cs$/g.test(c))return void this.snackBar.open(`"${c}" is invalid controller name. Should be something like "MyController.cs"`,null,{duration:5e3})}this.snackBar.open("Saving..."),this.#t.create(s.name,e,s.templateKey).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.#n.update(c=>++c)})}})}enableCodeGetter(){return this.enableCode}openCode(e){this.#e.openCodeFile(e.path,e.isShared)}buildGridOptions(){return{...F.C,columnDefs:[{...d.r.ItemsText,headerName:"Endpoint",field:"endpointPath",flex:2,minWidth:250},{...d.r.TextWideMin100,headerName:"Edition",field:"edition",sort:"asc"},{...d.r.TextWideMin100,headerName:"Forder2",field:"folder",sort:"asc"},{...d.r.TextWide,headerName:"Name",field:"name"},{...d.r.Boolean2,headerName:"Compiled",field:"isCompiled",cellRenderer:A.J},{...d.r.ActionsPinnedRight6,cellRenderer:B,cellRendererParams:{enableCodeGetter:()=>this.enableCodeGetter(),onOpenCode:o=>this.openCode(o)}}]}}static#i=this.\u0275fac=function(i){return new(i||a)(t.rXU(E.UG),t.rXU(C.h),t.rXU(t.c1b))};static#o=this.\u0275cmp=t.VBU({type:a,selectors:[["app-web-api"]],decls:15,vars:3,consts:[["menu","matMenu"],[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Create a new controller","tippyPlacement","left",1,"grid-fab",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(i,o){if(1&i){const s=t.RV6();t.j41(0,"div",1),t.nrm(1,"ag-grid-angular",2),t.j41(2,"mat-dialog-actions",3)(3,"button",4)(4,"mat-icon"),t.EFF(5,"add"),t.k0s()(),t.j41(6,"mat-menu",null,0)(8,"button",5),t.bIt("click",function(){return r.eBV(s),r.Njj(o.createController(!1))}),t.j41(9,"span"),t.EFF(10,"App"),t.k0s()(),t.j41(11,"button",5),t.bIt("click",function(){return r.eBV(s),r.Njj(o.createController(!0))}),t.j41(12,"span"),t.EFF(13,"Shared (global)"),t.k0s()()()()(),t.nrm(14,"router-outlet")}if(2&i){const s=t.sdS(7);t.R7$(),t.Y8G("rowData",o.webApis())("gridOptions",o.gridOptions),t.R7$(2),t.Y8G("matMenuTriggerFor",s)}},dependencies:[R.p,I.xs,C.M,g.Hl,g.Sr,l.Cn,l.kk,l.fb,l.Cp,p.m_,p.An,m.n3],encapsulation:2})}return a})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_web-api_web-api_component_ts.9eb68b330748f9fb.js.map