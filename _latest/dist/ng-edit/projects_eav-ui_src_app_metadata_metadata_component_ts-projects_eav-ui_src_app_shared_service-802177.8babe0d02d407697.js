"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_metadata_metadata_component_ts-projects_eav-ui_src_app_shared_service-802177"],{336:(O,C,a)=>{a.d(C,{F:()=>F});var f=a(4600),t=a(6647),v=a(271),l=a(8742),y=a(693),d=a(4435),u=a(9234),M=a(6474),D=a(1659);const E={getAll:!0,getAllSig:!0};let F=(()=>{class s extends M.D{constructor(){super(...arguments),this.log=(0,d.Tq)({ContentItemsService:s},E)}getAll(r){return this.log.fnIf("getAll",{contentTypeStaticName:r}),this.getHttpApiUrl(u.Gg,{params:{appId:this.appId,contentType:r}})}getAllSig(r,m){return this.log.fnIf("getAllSig",{contentTypeStaticName:r,initial:m}),this.getSignal(u.Gg,{params:{appId:this.appId,contentType:r}},m)}getColumns(r){return this.getHttpApiUrl(l.z,{params:{appId:this.appId,staticName:r}})}importItem(r){return(0,f.H)((0,y.n)(r)).pipe((0,t.n)(m=>this.http.post(this.apiUrl(u.gb+"upload"),{AppId:this.appId,ContentBase64:m})),(0,v.T)(m=>({Success:m,Messages:[]})))}static{this.\u0275fac=(()=>{let r;return function(_){return(r||(r=D.xGo(s)))(_||s)}})()}static{this.\u0275prov=D.jDH({token:s,factory:s.\u0275fac})}}return s})()},3758:(O,C,a)=>{a.d(C,{F:()=>F});var f=a(316),t=a(1659),v=a(4950);const l=["*"],y=s=>({"hint-box__short":s});function d(s,R){1&s&&t.eu8(0)}function u(s,R){if(1&s&&(t.j41(0,"mat-hint"),t.DNE(1,d,1,0,"ng-container",2),t.k0s()),2&s){t.XpG();const r=t.sdS(4);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function M(s,R){1&s&&t.eu8(0)}function D(s,R){if(1&s&&(t.j41(0,"mat-error"),t.DNE(1,M,1,0,"ng-container",2),t.k0s()),2&s){t.XpG();const r=t.sdS(4);t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function E(s,R){1&s&&t.SdG(0)}let F=(()=>{class s{constructor(){this.isError=(0,t.hFB)(!1),this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-field-hint"]],inputs:{isError:[1,"isError"]},ngContentSelectors:l,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(m,_){if(1&m){const b=t.RV6();t.NAR(),t.j41(0,"div",1),t.bIt("click",function(){return t.eBV(b),t.Njj(_.toggleIsShort())}),t.DNE(1,u,2,1,"mat-hint")(2,D,2,1,"mat-error"),t.k0s(),t.DNE(3,E,1,0,"ng-template",null,0,t.C5r)}if(2&m){let b;t.Y8G("ngClass",t.eq3(2,y,_.isShort)),t.R7$(),t.vxM(!1===(b=_.isError())?1:!0===b?2:-1)}},dependencies:[v.RG,v.MV,v.TL,f.YU,f.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return s})()},4979:(O,C,a)=>{a.d(C,{V:()=>v});var f=a(7092),t=a(1659);let v=(()=>{class l{constructor(){this.subscriptions=new f.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(u){return new(u||l)}}static{this.\u0275prov=t.jDH({token:l,factory:l.\u0275fac})}}return l})()},5858:(O,C,a)=>{a.d(C,{O:()=>f});const f="DROPDOWN_INSERT_VALUE"},6686:(O,C,a)=>{a.r(C),a.d(C,{MetadataComponent:()=>Ft});var f=a(316),t=a(1659),v=a(6256),l=a(4175),y=a(7941),d=a(3840),u=a(2159),M=a(3183),D=a(4334),E=a(271),F=a(2938),s=a(3620),R=a(336),r=a(9006),m=a(4096),_=a(1828),b=a(251),S=a(3216),V=a(4435),$=a(334),X=a(7037),x=a(9914),W=a(8471),K=a(6817),h=a(3777);function L(n,c){if(1&n&&(t.nrm(0,"mat-card-subtitle",0),t.nI1(1,"safeHtml")),2&n){const e=t.XpG();t.Y8G("innerHtml",t.bMT(1,1,e.dialogData.message),t.npT)}}let z=(()=>{class n{constructor(e,i){this.dialogData=e,this.dialog=i,this.hostClass="dialog-component"}closeDialog(e){this.dialog.close(e)}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(y.Vh),t.rXU(y.CP))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-confirm-delete-dialog"]],hostVars:1,hostBindings:function(i,o){2&i&&t.Mr5("className",o.hostClass)},decls:10,vars:3,consts:[[3,"innerHtml"],["align","end"],["mat-raised-button","",1,"eav-card-action-button",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s(),t.DNE(4,L,2,3,"mat-card-subtitle",0),t.k0s(),t.j41(5,"mat-card-actions",1)(6,"button",2),t.bIt("click",function(){return o.closeDialog()}),t.EFF(7,"Cancel"),t.k0s(),t.j41(8,"button",2),t.bIt("click",function(){return o.closeDialog(!0)}),t.EFF(9,"Delete"),t.k0s()()()),2&i&&(t.R7$(3),t.Lme("Delete ",o.dialogData.entityTitle," (",o.dialogData.entityId,")?"),t.R7$(),t.vxM(o.dialogData.message?4:-1))},dependencies:[h.Hu,h.RN,h.YY,h.MM,h.Lc,h.dh,l.Hl,l.$z,x.$],styles:[".eav-card-action-button[_ngcontent-%COMP%]{margin-left:8px}"]})}}return n})();var P=a(4646),B=a(4601);let Z=(()=>{class n{agInit(e){this.params=e}refresh(e){return!0}deleteMetadata(){this.params.onDelete(this.params.data)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-metadata-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"eav-grid-action-button","highlight",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1),t.bIt("click",function(){return o.deleteMetadata()}),t.j41(2,"mat-icon"),t.EFF(3,"delete"),t.k0s()()())},dependencies:[P.pZ,P.r6,d.m_,d.An,B.e],encapsulation:2})}}return n})(),J=(()=>{class n{agInit(e){this.value=e.value,this.metadata=e.data}refresh(e){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-metadata-content-type"]],decls:2,vars:2,consts:[[1,"container",3,"tippy"]],template:function(i,o){1&i&&(t.j41(0,"div",0),t.EFF(1),t.k0s()),2&i&&(t.Y8G("tippy",o.metadata._Type.Description),t.R7$(),t.SpI(" ",o.value,"\n"))},dependencies:[B.e],styles:[".container[_ngcontent-%COMP%]{width:fit-content}"]})}}return n})();var g=a(4456),k=a(4950),N=a(7984),U=a(5175),A=a(8827),Q=a(3037),w=a(1817),q=a(5445),tt=a(3758),Y=a(5858),G=a(52),et=a(9333);const H=n=>({active:n});function nt(n,c){if(1&n&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&n){const e=c.$implicit;t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function at(n,c){if(1&n&&(t.j41(0,"mat-form-field",2)(1,"mat-label"),t.EFF(2,"Scope"),t.k0s(),t.j41(3,"mat-select",13),t.Z7z(4,nt,2,2,"mat-option",14,t.fX1),t.j41(6,"mat-option",14),t.EFF(7,"Other..."),t.k0s()()(),t.j41(8,"app-field-hint"),t.EFF(9," The scope should almost never be changed - "),t.j41(10,"a",15),t.EFF(11,"see help"),t.k0s()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("placeholder",e.scopeOptions().length?"":"No items found"),t.R7$(),t.Dyx(e.scopeOptions()),t.R7$(2),t.Y8G("value",e.dropdownInsertValue)}}function ot(n,c){if(1&n&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&n){const e=c.$implicit;t.Y8G("value",e.NameId),t.R7$(),t.SpI(" ",e.Label," ")}}function it(n,c){if(1&n&&(t.j41(0,"mat-select",3),t.Z7z(1,ot,2,2,"mat-option",14,t.fX1),t.k0s()),2&n){let e;const i=t.XpG();t.Y8G("placeholder",null!=(e=i.contentTypes()())&&e.length?"":"No items found"),t.R7$(),t.Dyx(i.contentTypes()())}}function st(n,c){1&n&&t.nrm(0,"input",4)}function lt(n,c){1&n&&(t.j41(0,"app-field-hint",8),t.EFF(1," This field is required "),t.k0s()),2&n&&t.Y8G("isError",!0)}let rt=(()=>{class n{#e;constructor(e){this.dialog=e,this.hostClass="dialog-component",this.dropdownInsertValue=Y.O,this.guidedContentType=!0,this.advancedMode=!1,this.#e=(0,F.d)(q.gs),this.scope=(0,t.vPA)(G.YX.scopes.default.value),this.scopeOptions=this.#e.getScopesSig(void 0),this.contentTypes=(0,t.EWP)(()=>{const i=this.scope();return this.#e.getTypesSig(i,void 0)})}ngOnInit(){this.buildForm()}closeDialog(e){this.dialog.close(e)}toggleGuidedContentType(e){this.guidedContentType=e}toggleAdvancedMode(e){this.advancedMode=e.checked}confirm(){const e=this.form.getRawValue();this.closeDialog(e.contentType)}buildForm(){this.form=new g.J3({}),this.form.addControl("contentType",new g.hs(null,[g.k0.required])),this.form.addControl("scope",new g.hs(G.YX.scopes.default.value)),this.form.controls.scope.valueChanges.pipe((0,Q.Z)(this.form.controls.scope.value),(0,w.F)()).subscribe(e=>{null!=this.form.controls.contentType.value&&this.form.controls.contentType.patchValue(null),e===Y.O?(e=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||G.YX.scopes.default.value,this.scopeOptions().some(i=>i.value===e)||this.scopeOptions.set([{name:e,value:e},...this.scopeOptions()]),this.form.controls.scope.patchValue(e)):this.scope.set(e)})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(y.CP))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-metadata-save-dialog"]],hostVars:1,hostBindings:function(i,o){2&i&&t.Mr5("className",o.hostClass)},decls:33,vars:14,consts:[["href","https://go.2sxc.org/metadata","target","_blank"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","contentType","required","",3,"placeholder"],["matInput","","type","text","formControlName","contentType","required",""],["matTextSuffix",""],["mat-icon-button","","type","button","tippy","Pick existing value",3,"click","ngClass"],["mat-icon-button","","type","button","tippy","Manual entry",3,"click","ngClass"],[3,"isError"],[1,"eav-card-actions"],["color","accent",3,"change","checked"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click","disabled"],["formControlName","scope",3,"placeholder"],[3,"value"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""]],template:function(i,o){1&i&&(t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Create Metadata"),t.k0s(),t.j41(4,"mat-card-subtitle"),t.EFF(5," This is a special operation to add an item which is metadata for another item, see "),t.j41(6,"a",0),t.EFF(7,"docs"),t.k0s(),t.EFF(8,". "),t.k0s()(),t.j41(9,"mat-card-content")(10,"form",1),t.DNE(11,at,12,2),t.j41(12,"mat-form-field",2)(13,"mat-label"),t.EFF(14,"Content Type"),t.k0s(),t.DNE(15,it,3,1,"mat-select",3)(16,st,1,0,"input",4),t.j41(17,"div",5)(18,"button",6),t.bIt("click",function(){return o.toggleGuidedContentType(!0)}),t.j41(19,"mat-icon"),t.EFF(20,"search"),t.k0s()(),t.j41(21,"button",7),t.bIt("click",function(){return o.toggleGuidedContentType(!1)}),t.j41(22,"mat-icon"),t.EFF(23,"text_fields"),t.k0s()()()(),t.DNE(24,lt,2,1,"app-field-hint",8),t.k0s()(),t.j41(25,"mat-card-actions",9)(26,"mat-slide-toggle",10),t.bIt("change",function(I){return o.toggleAdvancedMode(I)}),t.EFF(27),t.k0s(),t.j41(28,"div")(29,"button",11),t.bIt("click",function(){return o.closeDialog()}),t.EFF(30,"Cancel"),t.k0s(),t.j41(31,"button",12),t.bIt("click",function(){return o.confirm()}),t.EFF(32," Confirm "),t.k0s()()()()),2&i&&(t.R7$(10),t.Y8G("formGroup",o.form),t.R7$(),t.vxM(o.advancedMode&&o.guidedContentType?11:-1),t.R7$(4),t.vxM(o.guidedContentType?15:-1),t.R7$(),t.vxM(o.guidedContentType?-1:16),t.R7$(2),t.Y8G("ngClass",t.eq3(10,H,o.guidedContentType)),t.R7$(3),t.Y8G("ngClass",t.eq3(12,H,!o.guidedContentType)),t.R7$(3),t.vxM(o.form.controls.contentType.touched&&null!=o.form.controls.contentType.errors&&o.form.controls.contentType.errors.required?24:-1),t.R7$(2),t.Y8G("checked",o.advancedMode),t.R7$(),t.SpI(" ",o.advancedMode?"Advanced":"Simple"," "),t.R7$(4),t.Y8G("disabled",!o.form.valid))},dependencies:[h.Hu,h.RN,h.YY,h.m2,h.MM,h.Lc,h.dh,g.YN,g.qT,g.me,g.BC,g.cb,g.YS,g.X1,g.j4,g.JD,k.RG,k.rl,k.nJ,k.yw,U.Ve,U.VO,P.wT,P.Sy,N.fS,N.fg,l.Hl,l.$z,l.iY,f.YU,d.m_,d.An,A.mV,A.sG,tt.F,et.c],styles:[".eav-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.eav-card-action-button[_ngcontent-%COMP%]{margin-left:8px}"]})}}return n})();var ct=a(3347),dt=a(9841);const pt=n=>({"fab-opened":n});function mt(n,c){1&n&&t.EFF(0," This item is not metadata for anything else. ")}function ft(n,c){if(1&n&&(t.nrm(0,"br"),t.EFF(1)),2&n){const e=t.XpG(2);t.R7$(),t.SpI("Key Number: ",e.itemFor().KeyNumber," ")}}function ut(n,c){if(1&n&&(t.nrm(0,"br"),t.EFF(1)),2&n){const e=t.XpG(2);t.R7$(),t.SpI("Key Guid: ",e.itemFor().KeyGuid," ")}}function ht(n,c){if(1&n&&(t.nrm(0,"br"),t.EFF(1)),2&n){const e=t.XpG(2);t.R7$(),t.SpI("Key String: ",e.itemFor().KeyString," ")}}function gt(n,c){if(1&n&&(t.nrm(0,"br"),t.EFF(1)),2&n){const e=t.XpG(2);t.R7$(),t.SpI("Title: ",e.itemFor().Title," ")}}function Ct(n,c){if(1&n&&(t.EFF(0," This item is metadata for: "),t.nrm(1,"br"),t.EFF(2),t.nrm(3,"br"),t.EFF(4),t.DNE(5,ft,2,1)(6,ut,2,1)(7,ht,2,1)(8,gt,2,1)),2&n){const e=t.XpG();t.R7$(2),t.SpI("Target: ",e.itemFor().Target," "),t.R7$(2),t.SpI("TargetType: ",e.itemFor().TargetType," "),t.R7$(),t.vxM(e.itemFor().KeyNumber?5:-1),t.R7$(),t.vxM(e.itemFor().KeyGuid?6:-1),t.R7$(),t.vxM(e.itemFor().KeyString?7:-1),t.R7$(),t.vxM(e.itemFor().Title?8:-1)}}function vt(n,c){if(1&n){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.createMetadata())}),t.j41(1,"mat-icon"),t.EFF(2,"add"),t.k0s()()}}function _t(n,c){if(1&n&&(t.nrm(0,"div",19),t.nI1(1,"safeHtml")),2&n){const e=t.XpG().$implicit;t.Y8G("innerHTML",t.bMT(1,2,e.Icon),t.npT)("matBadgeHidden",e.Enabled)}}function Tt(n,c){1&n&&(t.j41(0,"mat-icon"),t.EFF(1,"add"),t.k0s())}function yt(n,c){if(1&n){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,p=t.XpG(2);return t.Njj(p.createMetadata(o))}),t.DNE(1,_t,2,4,"div",19)(2,Tt,2,0,"mat-icon"),t.k0s()}if(2&n){const e=c.$implicit;t.BMQ("label",e.Title),t.R7$(),t.vxM(e.Icon?1:2)}}function Mt(n,c){if(1&n){const e=t.RV6();t.j41(0,"eco-fab-speed-dial",11),t.bIt("openChange",function(o){t.eBV(e);const p=t.XpG();return t.Njj(p.openChange(o))}),t.j41(1,"eco-fab-speed-dial-trigger",12)(2,"button",13)(3,"mat-icon",14),t.EFF(4),t.k0s()()(),t.j41(5,"eco-fab-speed-dial-actions",15)(6,"button",16),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.createMetadata())}),t.j41(7,"mat-icon"),t.EFF(8,"search"),t.k0s()(),t.Z7z(9,yt,3,2,"button",17,t.fX1),t.k0s()()}if(2&n){const e=t.XpG();t.Y8G("ngClass",t.eq3(3,pt,e.fabOpen())),t.R7$(),t.Y8G("spin",!0),t.R7$(3),t.JRh(e.fabOpen()?"close":"add"),t.R7$(5),t.Dyx(e.recommendations())}}let Ft=(()=>{class n{#e;#o;#i;#n;constructor(e,i,o,p,I){this.dialog=e,this.snackBar=i,this.matDialog=o,this.viewContainerRef=p,this.changeDetectorRef=I,this.log=(0,V.Tq)({MetadataComponent:n}),this.#e=(0,F.d)(K.R),this.#o=(0,F.d)(m.TI),this.#i=(0,F.d)(R.F),this.#n=(0,F.d)(W.c),this.gridOptions=this.#c(),this.fabOpen=(0,t.vPA)(!1),this.#t=(0,s.C)(this.#n.getParams(["targetType","keyType","key","title","contentTypeStaticName"]),T=>({targetType:parseInt(T.targetType,10),keyType:T.keyType,key:T.key,contentTypeStaticName:T.contentTypeStaticName})),this.#s=this.#i.getAllSig(this.#t.contentTypeStaticName,null),this.itemFor=(0,t.EWP)(()=>{const T=this.#s()?.find(j=>j.Guid===this.#t.key);return T?.For?T.For:void 0}),this.metadataSet=(0,t.vPA)({Items:[],Recommendations:[]}),this.recommendations=(0,t.EWP)(()=>{const T=this.metadataSet();return T.Recommendations.filter(j=>T.Items.filter(Dt=>Dt._Type.Id===j.Id).length<j.Count)}),this.title=(()=>{try{return decodeURIComponent(this.#n.getParam("title")??"")}catch{return console.error("Couldn't properly decode title"),this.#n.getParam("title")??""}})()}#t;#s;ngOnInit(){this.#a(),this.#n.doOnDialogClosed(()=>this.#a())}closeDialog(){this.dialog.close()}openChange(e){this.fabOpen.set(e)}createMetadata(e){if(e)return e.Enabled?void(e.CreateEmpty?(this.snackBar.open(`Creating ${e.Name}...`),this.#e.create(e.Id,{For:this.calculateItemFor("dummy").For}).subscribe({error:()=>{this.snackBar.open(`Creating ${e.Name} failed. Please check console for more info`,void 0,{duration:3e3}),this.#a()},next:()=>{this.snackBar.open(`Created ${e.Name}`,void 0,{duration:3e3}),this.#a()}})):this.createMetadataForm(e.Id)):void(0,r.j)(this.matDialog,e.MissingFeature,this.viewContainerRef,this.changeDetectorRef);this.matDialog.open(rt,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(o=>{null!=o&&this.createMetadataForm(o)})}createMetadataForm(e){const i={items:[this.calculateItemFor(e)]},o=(0,S.s)(i);this.#n.navRelative([`edit/${o}`]),this.changeDetectorRef.markForCheck()}calculateItemFor(e){const i=$.c.constructMetadataInfo(this.#t.targetType,this.#t.keyType,this.#t.key);return $.c.newMetadataFromInfo(e,i)}#a(){const e=this.log.rxTap("getMetadata");this.#o.getMetadata(this.#t.targetType,this.#t.keyType,this.#t.key).pipe(e.pipe(),(0,D.s)(1),(0,E.T)(i=>(i.Recommendations.forEach(o=>{o.Icon?.startsWith("base64:")&&(o.Icon=o.Icon.replace("base64:",""),o.Icon=window.atob(o.Icon),o.Icon=o.Icon.replace('fill="#000000"','fill="#ffffff"'))}),i)),e.map()).subscribe(i=>{this.metadataSet.set(i)})}#r(e){const i={items:[$.c.editId(e.Id)]},o=(0,S.s)(i);this.#n.navRelative([`edit/${o}`])}#l(e,i=!1){if(i)this.snackBar.open("Deleting..."),this.#e.delete(e._Type.Id,e.Id,!1).subscribe({next:()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.#a()},error:()=>{this.snackBar.open("Delete failed. Please check console for more information",null,{duration:3e3})}});else{const o={entityId:e.Id,entityTitle:e.Title,message:this.metadataSet().Recommendations.find(I=>I.Id===e._Type.Id)?.DeleteWarning};this.matDialog.open(z,{autoFocus:!1,data:o,viewContainerRef:this.viewContainerRef,width:"400px"}).afterClosed().subscribe(I=>{I&&this.#l(e,!0)})}}#c(){return{...b.C,columnDefs:[{..._.r.IdWithDefaultRenderer,cellRendererParams:_.r.idFieldParamsTooltipGetter()},{..._.r.TextWide,field:"Title",onCellClicked:i=>this.#r(i.data)},{..._.r.TextWide,headerName:"Content Type",field:"ContentType",valueGetter:i=>`${i.data._Type.Name}${i.data._Type.Title!==i.data._Type.Name?` (${i.data._Type.Title})`:""}`,cellRenderer:J},{..._.r.ActionsPinnedRight1,cellRenderer:Z,cellRendererParams:{onDelete:i=>this.#l(i)}}]}}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(y.CP),t.rXU(ct.UG),t.rXU(y.bZ),t.rXU(t.c1b),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-metadata"]],decls:17,vars:6,consts:[[1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Create a new metadata for this item",1,"grid-fab"],[1,"eav-eco-fab-speed-dial",3,"ngClass"],["mat-fab","","mat-elevation-z24","","tippy","Create a new metadata for this item",1,"grid-fab",3,"click"],[1,"eav-eco-fab-speed-dial",3,"openChange","ngClass"],[3,"spin"],["mat-fab",""],[1,"spin180"],[1,"eav-eco-fab-speed-dial-actions"],["mat-mini-fab","","label","Other Content Type",1,"eav-eco-fab-speed-dial-action-button",3,"click"],["mat-mini-fab","",1,"eav-eco-fab-speed-dial-action-button"],["mat-mini-fab","",1,"eav-eco-fab-speed-dial-action-button",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadge","\u{1f48e}","matBadgePosition","below after","aria-hidden","false",2,"color","white","fill","white",3,"innerHTML","matBadgeHidden"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return o.closeDialog()}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",4)(8,"p"),t.DNE(9,mt,1,0)(10,Ct,9,6),t.k0s(),t.nrm(11,"router-outlet"),t.j41(12,"div",5),t.nrm(13,"ag-grid-angular",6),t.k0s()(),t.j41(14,"mat-dialog-actions",7),t.DNE(15,vt,3,0,"button",8)(16,Mt,11,5,"eco-fab-speed-dial",9),t.k0s()()),2&i&&(t.R7$(3),t.SpI(" ",o.title||"Metadata"," "),t.R7$(6),t.vxM(o.itemFor()?10:9),t.R7$(4),t.Y8G("rowData",o.metadataSet().Items)("gridOptions",o.gridOptions),t.R7$(2),t.vxM(0===o.recommendations().length?15:-1),t.R7$(),t.vxM(o.recommendations().length>0?16:-1))},dependencies:[l.Hl,l.iY,l.$0,l.Sr,d.m_,d.An,u.n3,X.p,dt.xs,y.E7,M.TE,f.YU,M.p1,M.yf,v.Y,v.k,x.$],styles:["[_nghost-%COMP%]     .mat-button-wrapper div svg *:not([fill]){fill:#fff}"]})}}return n})()},9333:(O,C,a)=>{a.d(C,{c:()=>v});var f=a(4435),t=a(1659);let v=(()=>{class l{constructor(){this.log=(0,f.Tq)({ClickStopPropagationDirective:l}),this.log.a("constructor")}onClick(d){this.log.a("onClick",{event:d}),d.stopPropagation()}static{this.\u0275fac=function(u){return new(u||l)}}static{this.\u0275dir=t.FsC({type:l,selectors:[["","appClickStopPropagation",""]],hostBindings:function(u,M){1&u&&t.bIt("click",function(E){return M.onClick(E)})}})}}return l})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.03/dist/ng-edit/projects_eav-ui_src_app_metadata_metadata_component_ts-projects_eav-ui_src_app_shared_service-802177.8babe0d02d407697.js.map