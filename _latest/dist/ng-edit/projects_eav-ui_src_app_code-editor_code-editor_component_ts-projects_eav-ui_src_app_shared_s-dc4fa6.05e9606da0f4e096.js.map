{"version":3,"file":"projects_eav-ui_src_app_code-editor_code-editor_component_ts-projects_eav-ui_src_app_shared_s-dc4fa6.05e9606da0f4e096.js","mappings":"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","names":["i0","ctx_r0","snackBarData","fileName","codeFile","edition","CodeAndEditionWarningsComponent_Conditional_2_Conditional_1_Template","CodeAndEditionWarningsComponent_Conditional_2_Conditional_3_Template","otherEditions","_r2","openCodeBehind","CodeAndEditionWarningsComponent","constructor","snackRef","this","dismissWithAction","static","t","i1","MAT_SNACK_BAR_DATA","core","VBU","selectors","standalone","features","decls","vars","consts","template","rf","ctx","CodeAndEditionWarningsComponent_Conditional_1_Template","CodeAndEditionWarningsComponent_Conditional_2_Template","CodeAndEditionWarningsComponent_Conditional_4_Template","MatButtonModule","i2","styles","Explorers","Templates","Snippets","SnippetsService","http","dnnContext","translate","getTooltips","language","get","$2sxc","apiUrl","params","getSnippets","view","pipe","map","res","relevant","filterAwayNotNeededSnippetsList","snippets","standardAndInputSnips","extractInputTypeSnippets","sets","initSnippetsWithConfig","standardArray","inputTypeSnippets","list","keyPrefixes","keyPrefixIndex","v","Type","indexOf","newList","itm","setHasPrefix","set","substring","push","inputTypeArray","catalogInputTypeSnippets","inputTypeList","undefined","subset","templateConfiguration","makeTree","Content","Object","assign","Fields","PresentationFields","TypeContent","loadContentType","TypeContentPresentation","HasList","List","TypeList","TypeListPresentation","HasApp","App","Resources","Settings","tree","o","reformatted","key","name","label","snip","content","help","links","linksList","getHelpKey","result","instant","addition","linksString","llist","split","l","pair","length","link","trim","url","target","type","prefix","getFields","AppId","subscribe","fields","field","fieldname","StaticName","valuePlaceholder","Metadata","merged","Notes","toLowerCase","snipDefaults","cloneDeep","attachSnippets","InputType","std","i","obj","val","replace","appId","staticName","webApiFieldsAll","appid","toString","filter","DataTypeCatalog","Empty","fld","md","All","inputType","genericSnippet","fieldType","typeSnips","concat","more","fieldSnips","g","localizeGenericSnippet","collapse","objName","fieldName","i3","jDH","factory","ɵfac","ObjectToArrayPipe","transform","Array","isArray","values","EJ8","pure","_r8","snippet_r7","$implicit","ctx_r2","toggleMore","toggledMores","includes","link_r9","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_7_For_4_Template","link_r12","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_For_1_Conditional_6_For_4_Template","more_r11","_r10","addSnippet","toggleInfo","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_For_1_Conditional_6_Template","toggledInfos","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_For_1_Template","_r6","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_4_Template","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_7_Template","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_Template","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Template","folder_r5","value","_r4","toggleFolder","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_Template","section_r2","toggledFolders","CodeSnippetsComponent_For_2_Conditional_8_For_1_Template","_r1","toggleSection","CodeSnippetsComponent_For_2_Conditional_8_Template","toggledSections","CodeSnippetsComponent","insertSnippet","EventEmitter","snippet","emit","ArrayHelpers","toggleInArray","inputs","outputs","CodeSnippetsComponent_For_2_Template","MatIconModule","MatRippleModule","KeyValuePipe","TranslateModule","ClickStopPropagationDirective","TippyDirective","SafeHtmlPipe","calculateTree","templates","parent","paths","Path","last","pathFromRoot","path","existing","find","item","children","depth","isShared","Shared","isFolder","SortItemsPipe","items","sort","item1","item2","DepthPaddingPipe","sanitizer","padding","bypassSecurityTrustStyle","CodeTemplatesComponent_For_3_ng_container_0_Template","fileOrFolder_r3","_c0","item_r2","item_r5","ctx_r5","openTemplate","_c1","isToggled","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_For_1_ng_container_0_Template","item1_r8","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_For_1_Template","_r7","toggleItem","addFile","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_Template","_c2","CodeTemplatesComponent_ng_template_5_Conditional_0_Template","CodeTemplatesComponent_ng_template_5_Conditional_1_Template","CodeTemplatesComponent","openView","createTemplate","toggledItemsApp","toggledItemsShared","ngOnChanges","changes","calculateTreeAppShared","f","previousView","previousValue","FileName","IsShared","showFileInTree","shared","folder","file","toggledItems","CodeTemplatesComponent_For_3_Template","CodeTemplatesComponent_ng_template_5_Template","menu_r9","NgTemplateOutlet","NgClass","MatMenuModule","tab_r4","_r3","ctx_r1","viewKey","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Conditional_2_Template","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Conditional_6_Template","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Conditional_7_Template","closeEditor","isActive","isModified","isLoading","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Template","vm_r5","tabs","$event","codeChanged","Code","monacoOptions","editorSnipps","tooltips","save","toggleExplorer","CodeEditorComponent_Conditional_0_Conditional_11_Template","CodeEditorComponent_Conditional_0_Conditional_12_Template","CodeEditorComponent_Conditional_0_Conditional_13_Template","theme","activeExplorer","explorerSnipps","activeView","CodeEditorComponent","BaseComponent","context","route","snackBar","zone","dialog","viewContainerRef","super","tabSize","fixedOverflowWidgets","sourceService","transient","SourceService","snippetsService","titleService","Title","init","codeItems","JSON","parse","sessionStorage","getItem","keyItems","keyIsShared","forEach","codeItem","startsWith","urlItems","ngOnInit","templates$","BehaviorSubject","initialViews","EntityId","activeView$","openViews$","viewInfos$","attachListeners","getAll","next","subscriptions","add","combineLatest","openViews","viewInfos","notLoaded","some","RxHelpers","objectsEqual","forkJoin","newViewInfo","view$","share","snippets$","switchMap","tooltips$","Extension","of","results","viewInfos1","selectedIndex","findIndex","savedCode","slice","showCodeAndEditionWarnings","active","defaultTitle","newTitle","getTitle","setTitle","viewModel$","viewInfo","activeViewInfo","ngOnDestroy","complete","explorer","createFileDialogData","global","purpose","open","CreateFileDialogComponent","autoFocus","data","width","afterClosed","create","templateKey","files","monacoEditorRef","code","selectedViewInfo","oldOpenViews","newOpenViews","oldActiveView","newActiveView","codeToSave","duration","newViewInfos","error","pathAndName","pathSeparator","lastIndexOf","pathWithSlash","fullName","nameCode","endsWith","Edition","snackBarRef","openFromComponent","onAction","containerInstance","snackBarConfig","runOutsideAngular","fromEvent","window","event","preventDefault","returnValue","keyCode","navigator","platform","match","metaKey","ctrlKey","run","i4","viewQuery","MonacoEditorComponent","CodeEditorComponent_Conditional_0_Template","tmp_0_0","i5","MatProgressSpinnerModule","i6","MonacoEditorComponent_1","i7","AsyncPipe","ToggleDebugDirective","webApiFieldsRoot","webApiFieldsGetShared","ContentTypesFieldsService","typeListRetrieve","getInputTypesList","inputConfigs","config","dataType","Label","description","Description","isDefault","IsDefault","isObsolete","IsObsolete","isRecommended","IsRecommended","obsoleteMessage","ObsoleteMessage","icon","getReservedNames","contentTypeStaticName","getShareableFields","getShareableFieldsFor","attributeId","addInheritedField","targetContentTypeId","sourceContentTypeStaticName","sourceFieldGuid","newName","post","ContentTypeId","SourceType","SourceField","inherit","inheritMetadataOf","reOrder","idArray","contentType","contentTypeId","Id","order","stringify","webApiTypeRoot","rename","fieldId","delete","IsTitle","Error","newField","Index","SortOrder","updateInputType","id","_angular_core__WEBPACK_IMPORTED_MODULE_3__","boolEquals","x","y","stringEquals","valueEquals","manyEquals","typeOfX","arraysEqual","obj1","obj2","keys1","keys","keys2","every","key1","hasOwnProperty","index","distinct","array","GlobalConfigService","debugState","signal","isDebug","computed","allowDebugMode","debugEnabled","debugEnabled$","toObservable","initial","keyDebug","allowDebug","allow","oldConfig","newConfig","toggleDebugEnabled","_angular_core__WEBPACK_IMPORTED_MODULE_1__","providedIn","source","options","injector","assertInInjectionContext","inject","Injector","subject","ReplaySubject","watcher","effect","err","untracked","manualCleanup","DestroyRef","onDestroy","destroy","asObservable","toSignal","requiresCleanup","cleanupRef","state","requireSync","kind","initialValue","sub","rejectErrors","unsubscribe","bind","current","ɵRuntimeError"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/code-editor/code-and-edition-warnings/code-and-edition-warnings.component.html","./projects/eav-ui/src/app/code-editor/code-and-edition-warnings/code-and-edition-warnings.component.ts","./projects/eav-ui/src/app/code-editor/code-editor.models.ts","./projects/eav-ui/src/app/code-editor/services/snippets.service.ts","./projects/eav-ui/src/app/code-editor/code-snippets/object-to-array.pipe.ts","./projects/eav-ui/src/app/code-editor/code-snippets/code-snippets.component.html","./projects/eav-ui/src/app/code-editor/code-snippets/code-snippets.component.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.helpers.ts","./projects/eav-ui/src/app/code-editor/code-templates/order-items.pipe.ts","./projects/eav-ui/src/app/code-editor/code-templates/depth-padding.pipe.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.component.html","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.component.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.models.ts","./projects/eav-ui/src/app/code-editor/code-editor.component.html","./projects/eav-ui/src/app/code-editor/code-editor.component.ts","./projects/eav-ui/src/app/shared/fields/content-types-fields.service.ts","./projects/eav-ui/src/app/shared/rxJs/rx.helpers.ts","./projects/eav-ui/src/app/shared/services/global-config.service.ts","./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"],"sourcesContent":["<div class=\"messages\">\r\n  @if (snackBarData.codeFile) {\r\n  <div>\"{{ snackBarData.fileName }}\" also has a code-behind file \"{{ snackBarData.codeFile }}\".</div>\r\n  <br>\r\n  }\r\n\r\n  @if (snackBarData.otherEditions) {\r\n  <div>\r\n    @if (snackBarData.edition) {\r\n    You are editing \"{{ snackBarData.edition }}\" edition.\r\n    }\r\n    There are {{ snackBarData.otherEditions }} other editions of \"{{ snackBarData.fileName }}\".\r\n    @if (!snackBarData.edition) {\r\n    You may be editing an edition which is not the one you see.\r\n    }\r\n    See <a href=\"https://go.2sxc.org/polymorphism\" target=\"_blank\">docs</a>.\r\n  </div>\r\n  }\r\n</div>\r\n\r\n<div class=\"actions\">\r\n  @if (snackBarData.codeFile) {\r\n  <button mat-button color=\"primary\" (click)=\"openCodeBehind()\">\r\n    Open code-behind file\r\n  </button>\r\n  }\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MatSnackBarRef, MAT_SNACK_BAR_DATA } from '@angular/material/snack-bar';\r\nimport { CodeAndEditionWarningsSnackBarData } from './code-and-edition-warnings.models';\r\nimport { MatButtonModule } from '@angular/material/button';\r\n\r\n@Component({\r\n  selector: 'app-code-and-edition-warnings',\r\n  templateUrl: './code-and-edition-warnings.component.html',\r\n  styleUrls: ['./code-and-edition-warnings.component.scss'],\r\n  standalone: true,\r\n  imports: [MatButtonModule],\r\n})\r\nexport class CodeAndEditionWarningsComponent {\r\n  constructor(\r\n    private snackRef: MatSnackBarRef<CodeAndEditionWarningsComponent>,\r\n    @Inject(MAT_SNACK_BAR_DATA) public snackBarData: CodeAndEditionWarningsSnackBarData,\r\n  ) { }\r\n\r\n  openCodeBehind(): void {\r\n    this.snackBarData.openCodeBehind = true;\r\n    this.snackRef.dismissWithAction();\r\n  }\r\n}\r\n","import { FileAsset } from './models/file-asset.model';\r\nimport { Snippet, SnippetsSets } from './models/snippet.model';\r\nimport { SourceView } from './models/source-view.model';\r\nimport { Tooltip } from './models/tooltip.model';\r\n\r\nexport interface Tab {\r\n  viewKey: ViewKey;\r\n  label: string;\r\n  isActive: boolean;\r\n  isModified: boolean;\r\n  isLoading: boolean;\r\n}\r\n\r\nexport interface CodeEditorViewModel {\r\n  activeView: ViewKey;\r\n  tabs: Tab[];\r\n  viewKey: ViewKey;\r\n  view?: SourceView;\r\n  templates: FileAsset[];\r\n  explorerSnipps: SnippetsSets;\r\n  editorSnipps: Snippet[];\r\n  tooltips?: Tooltip[];\r\n}\r\n\r\nexport const Explorers = {\r\n  Templates: 'Templates',\r\n  Snippets: 'Snippets',\r\n} as const;\r\n\r\nexport type ExplorerOption = typeof Explorers[keyof typeof Explorers];\r\n\r\nexport interface ViewInfo {\r\n  viewKey: ViewKey;\r\n  view?: SourceView;\r\n  explorerSnipps?: SnippetsSets;\r\n  editorSnipps?: Snippet[];\r\n  tooltips?: Tooltip[];\r\n  savedCode?: string;\r\n}\r\n\r\nexport interface ViewKey {\r\n  /** ViewKey is templateId or path */\r\n  key: string;\r\n  shared: boolean;\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport cloneDeep from 'lodash-es/cloneDeep';\r\nimport { map, Observable } from 'rxjs';\r\nimport { DataTypeCatalog } from '../../shared/fields/data-type-catalog';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { webApiFieldsAll } from '../../shared/fields/content-types-fields.service';\r\nimport { MoreSnippet, SetSnippet, SetSnippetLink, Snippet, SnippetsSets, SnippetsSubSubSets } from '../models/snippet.model';\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { Tooltip } from '../models/tooltip.model';\r\nimport { InputTypeStrict } from '../../shared/fields/input-type-catalog';\r\n\r\nexport const inlineHelp = 'admin/Code/InlineHelp';\r\n\r\n@Injectable()\r\nexport class SnippetsService {\r\n\r\n  constructor(private http: HttpClient, private dnnContext: DnnContext, private translate: TranslateService) { }\r\n\r\n  getTooltips(language: string): Observable<Tooltip[]> {\r\n    return this.http.get<Tooltip[]>(this.dnnContext.$2sxc.http.apiUrl(inlineHelp), {\r\n      params: {\r\n        language,\r\n      },\r\n    });\r\n  }\r\n\r\n  getSnippets(view: SourceView): Observable<{ list: Snippet[]; sets: SnippetsSets; }> {\r\n    return this.http.get<{ snippets: Snippet[] }>('../ng-assets/snippets.json.js').pipe(\r\n      map(res => {\r\n        const relevant = this.filterAwayNotNeededSnippetsList(res.snippets, view);\r\n        const standardAndInputSnips = this.extractInputTypeSnippets(relevant);\r\n        const sets = this.initSnippetsWithConfig(standardAndInputSnips.standardArray, view, standardAndInputSnips.inputTypeSnippets);\r\n        const sorted: { list: Snippet[]; sets: SnippetsSets; } = {\r\n          list: standardAndInputSnips.standardArray,\r\n          sets\r\n        };\r\n        return sorted;\r\n      }),\r\n    );\r\n  }\r\n\r\n  /** Scan the list for sets starting with @ or [ and filter if not needed right now */\r\n  private filterAwayNotNeededSnippetsList(list: Snippet[], view: SourceView): Snippet[] {\r\n    const keyPrefixes = ['@', '['];\r\n    const keyPrefixIndex = (v: SourceView) => (v.Type.indexOf('Razor') > -1) ? 0 : 1;\r\n\r\n    const newList: Snippet[] = [];\r\n    for (const itm of list) {\r\n      const setHasPrefix = keyPrefixes.indexOf(itm.set[0]);\r\n      if (setHasPrefix === -1 || (setHasPrefix === keyPrefixIndex(view))) {\r\n        // if necessary, remove first char\r\n        if (setHasPrefix === keyPrefixIndex(view)) {\r\n          itm.set = itm.set.substring(1);\r\n        }\r\n        newList.push(itm);\r\n      }\r\n    }\r\n    return newList;\r\n  }\r\n\r\n  private extractInputTypeSnippets(list: Snippet[]): { standardArray: Snippet[]; inputTypeSnippets: Record<string, Snippet[]>; } {\r\n    const standardArray: Snippet[] = [];\r\n    const inputTypeArray: Snippet[] = [];\r\n\r\n    for (const itm of list) {\r\n      const systemSnippet = itm.set[0] === '\\\\';\r\n      if (!systemSnippet) {\r\n        standardArray.push(itm);\r\n      } else {\r\n        itm.set = itm.set.substring(1);\r\n        inputTypeArray.push(itm);\r\n      }\r\n    }\r\n    const inputTypeSnippets = this.catalogInputTypeSnippets(inputTypeArray);\r\n    const extracted: { standardArray: Snippet[]; inputTypeSnippets: Record<string, Snippet[]>; } = {\r\n      standardArray,\r\n      inputTypeSnippets,\r\n    };\r\n    return extracted;\r\n  }\r\n\r\n  private catalogInputTypeSnippets(list: Snippet[]): Record<string, Snippet[]> {\r\n    const inputTypeList: Record<string, Snippet[]> = {};\r\n    for (const itm of list) {\r\n      if (inputTypeList[itm.subset] === undefined) {\r\n        inputTypeList[itm.subset] = [];\r\n      }\r\n      inputTypeList[itm.subset].push(itm);\r\n    }\r\n    return inputTypeList;\r\n  }\r\n\r\n  private initSnippetsWithConfig(\r\n    standardArray: Snippet[],\r\n    templateConfiguration: SourceView,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): SnippetsSets {\r\n    const sets = this.makeTree(standardArray);\r\n\r\n    // retrieve all relevant content-types and infos\r\n    sets.Content = Object.assign({}, sets.Content, { Fields: {}, PresentationFields: {} });\r\n    if (templateConfiguration.TypeContent) {\r\n      this.loadContentType(\r\n        sets.Content.Fields as SnippetsSubSubSets,\r\n        templateConfiguration.TypeContent,\r\n        'Content',\r\n        templateConfiguration,\r\n        inputTypeSnippets,\r\n      );\r\n    }\r\n    if (templateConfiguration.TypeContentPresentation) {\r\n      this.loadContentType(\r\n        sets.Content.PresentationFields as SnippetsSubSubSets,\r\n        templateConfiguration.TypeContentPresentation,\r\n        'Content.Presentation',\r\n        templateConfiguration,\r\n        inputTypeSnippets,\r\n      );\r\n    }\r\n\r\n    if (templateConfiguration.HasList) {\r\n      sets.List = Object.assign({}, sets.List, { Fields: {}, PresentationFields: {} });\r\n      if (templateConfiguration.TypeList) {\r\n        this.loadContentType(\r\n          sets.List.Fields as SnippetsSubSubSets,\r\n          templateConfiguration.TypeList,\r\n          'Header',\r\n          templateConfiguration,\r\n          inputTypeSnippets,\r\n        );\r\n      }\r\n      if (templateConfiguration.TypeListPresentation) {\r\n        this.loadContentType(\r\n          sets.List.PresentationFields as SnippetsSubSubSets,\r\n          templateConfiguration.TypeListPresentation,\r\n          'Header.Presentation',\r\n          templateConfiguration,\r\n          inputTypeSnippets,\r\n        );\r\n      }\r\n    } else {\r\n      delete sets.List;\r\n    }\r\n\r\n    // maybe App-infos\r\n    if (templateConfiguration.HasApp) {\r\n      sets.App.Resources = {};\r\n      sets.App.Settings = {};\r\n      this.loadContentType(sets.App.Resources, 'App-Resources', 'App.Resources', templateConfiguration, inputTypeSnippets);\r\n      this.loadContentType(sets.App.Settings, 'App-Settings', 'App.Settings', templateConfiguration, inputTypeSnippets);\r\n    }\r\n\r\n    return sets;\r\n  }\r\n\r\n  /** Convert the list into a tree with set/subset/item */\r\n  private makeTree(list: Snippet[]): SnippetsSets {\r\n    const tree: SnippetsSets = {};\r\n    for (const o of list) {\r\n      if (tree[o.set] === undefined) {\r\n        tree[o.set] = {};\r\n      }\r\n      if (tree[o.set][o.subset] === undefined) {\r\n        tree[o.set][o.subset] = [];\r\n      }\r\n      const reformatted: SetSnippet = {\r\n        key: o.name,\r\n        label: this.label(o.set, o.subset, o.name),\r\n        snip: o.content,\r\n        help: o.help || this.help(o.set, o.subset, o.name),\r\n        links: this.linksList(o.links)\r\n      };\r\n\r\n      (tree[o.set][o.subset] as SetSnippet[]).push(reformatted);\r\n    }\r\n    return tree;\r\n  }\r\n\r\n  private label(set: string, subset: string, snip: string): string {\r\n    const key = this.getHelpKey(set, subset, snip, '.Key');\r\n\r\n    let result: string = this.translate.instant(key);\r\n    if (result === key) {\r\n      result = snip;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private getHelpKey(set: string, subset: string, snip: string, addition: string): string {\r\n    return 'SourceEditorSnippets' + '.' + set + '.' + subset + '.' + snip + addition;\r\n  }\r\n\r\n  private help(set: string, subset: string, snip: string): string {\r\n    const key = this.getHelpKey(set, subset, snip, '.Help');\r\n\r\n    let result: string = this.translate.instant(key);\r\n    if (result === key) {\r\n      result = '';\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private linksList(linksString: string): SetSnippetLink[] {\r\n    if (!linksString) { return null; }\r\n\r\n    const links: SetSnippetLink[] = [];\r\n    const llist = linksString.split('\\n');\r\n    for (const l of llist) {\r\n      const pair = l.split(':');\r\n      if (pair.length === 3) {\r\n        const link: SetSnippetLink = {\r\n          name: pair[0].trim(),\r\n          url: pair[1].trim() + ':' + pair[2].trim(),\r\n        };\r\n        links.push(link);\r\n      }\r\n    }\r\n    if (links.length === 0) { return null; }\r\n    return links;\r\n  }\r\n\r\n  /** spm TODO: this happens after snippets are calculated for the first time. Needs to be fixed */\r\n  private loadContentType(\r\n    target: SnippetsSubSubSets,\r\n    type: string,\r\n    prefix: string,\r\n    templateConfiguration: SourceView,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): void {\r\n    this.getFields(templateConfiguration.AppId, type).subscribe(fields => {\r\n      // first add common items if the content-type actually exists\r\n      for (const field of fields) {\r\n        const fieldname = field.StaticName;\r\n        target[fieldname] = {\r\n          key: fieldname,\r\n          label: fieldname,\r\n          snip: this.valuePlaceholder(prefix, fieldname, templateConfiguration),\r\n          help: field.Metadata.merged.Notes || ' (' + field.Type.toLowerCase() + ') '\r\n        };\r\n        // try to add generic snippets specific to this input-type\r\n        const snipDefaults = cloneDeep(target[fieldname]); // must be a copy, because target[fieldname] will grow\r\n        this.attachSnippets(target, prefix, fieldname, field.InputType, snipDefaults, inputTypeSnippets);\r\n      }\r\n\r\n      if (fields.length) {\r\n        const std = ['EntityId', 'EntityTitle', 'EntityGuid', 'EntityType', 'IsPublished', 'Modified'];\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i = 0; i < std.length; i++) {\r\n          target[std[i]] = {\r\n            key: std[i],\r\n            label: std[i],\r\n            snip: this.valuePlaceholder(prefix, std[i], templateConfiguration),\r\n            help: this.translate.instant('SourceEditorSnippets.StandardFields.' + std[i] + '.Help'),\r\n          };\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private valuePlaceholder(obj: string, val: string, templateConfiguration: SourceView): string {\r\n    return (templateConfiguration.Type.indexOf('Razor') > -1)\r\n      ? '@' + obj + '.' + val\r\n      : '[' + obj.replace('.', ':') + ':' + val + ']';\r\n  }\r\n\r\n  private getFields(appId: number, staticName: string): Observable<Field[]> {\r\n    return this.http.get<Field[]>(this.dnnContext.$2sxc.http.apiUrl(webApiFieldsAll), {\r\n      params: { appid: appId.toString(), staticName },\r\n    }).pipe(\r\n      map(fields => {\r\n        fields = fields.filter(field => field.Type !== DataTypeCatalog.Empty);\r\n        for (const fld of fields) {\r\n          if (!fld.Metadata) { continue; }\r\n          const md = fld.Metadata;\r\n          const allMd = md.All;\r\n          const typeMd = md[fld.Type];\r\n          const inputMd = md[fld.InputType];\r\n          md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n        }\r\n        return fields;\r\n      }),\r\n    );\r\n  }\r\n\r\n  private attachSnippets(\r\n    target: SnippetsSubSubSets,\r\n    prefix: string,\r\n    fieldname: string,\r\n    inputType: InputTypeStrict,\r\n    snipDefaults: SetSnippet,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): void {\r\n    let genericSnippet = inputTypeSnippets[inputType];\r\n    if (inputType.indexOf('-')) { // if it's a sub-type, let's also get the master-type\r\n      const fieldType = inputType.substring(0, inputType.indexOf('-'));\r\n      if (fieldType) {\r\n        const typeSnips = inputTypeSnippets[fieldType];\r\n        if (typeSnips) {\r\n          genericSnippet = genericSnippet ? genericSnippet.concat(typeSnips) : typeSnips;\r\n        }\r\n      }\r\n    }\r\n    if (!genericSnippet) { return; }\r\n\r\n    if (target[fieldname].more === undefined) {\r\n      target[fieldname].more = {};\r\n    }\r\n    const fieldSnips = target[fieldname].more;\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let g = 0; g < genericSnippet.length; g++) {\r\n      try {\r\n        fieldSnips[fieldname + '-' + genericSnippet[g].name] = Object.assign({}, snipDefaults, {\r\n          key: fieldname + ' - ' + genericSnippet[g].name,\r\n          label: genericSnippet[g].name,\r\n          snip: this.localizeGenericSnippet(genericSnippet[g].content, prefix, fieldname),\r\n          collapse: true,\r\n        } as MoreSnippet);\r\n      } finally { }\r\n    }\r\n  }\r\n\r\n  private localizeGenericSnippet(snip: string, objName: string, fieldName: string): string {\r\n    snip = snip\r\n      .replace(/(\\$\\{[0-9]+\\:)var(\\})/gi, '$1' + objName + '$2')\r\n      .replace(/(\\$\\{[0-9]+\\:)prop(\\})/gi, '$1' + fieldName + '$2');\r\n    return snip;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'objectToArray',\r\n    standalone: true\r\n})\r\nexport class ObjectToArrayPipe implements PipeTransform {\r\n  transform(obj: Record<string, any> | Record<string, any>[]): Record<string, any>[] {\r\n    if (obj == null) { return; }\r\n\r\n    if (Array.isArray(obj)) { return obj; }\r\n\r\n    return Object.values(obj);\r\n  }\r\n}\r\n","<div class=\"editor-active-explorer fancy-scrollbar-dark\">\r\n  @for (section of snippets | keyvalue; track section) {\r\n  <div>\r\n    <div class=\"collapsible-header section\" [tippy]=\"'SourceEditorSnippets.' + section.key + '.Help' | translate\"\r\n      tippyShowDelay=\"750\" (click)=\"toggleSection(section.key)\">\r\n      <mat-icon>\r\n        {{ toggledSections.includes(section.key) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\r\n      </mat-icon>\r\n      <span>{{ 'SourceEditorSnippets.' + section.key + '.Title' | translate }}</span>\r\n    </div>\r\n    @if (toggledSections.includes(section.key)) {\r\n    @for (folder of section.value | keyvalue; track folder) {\r\n    <div>\r\n      <div class=\"collapsible-header folder\"\r\n        [tippy]=\"'SourceEditorSnippets.' + section.key + '.' + folder.key + '.Help' | translate\" tippyShowDelay=\"750\"\r\n        (click)=\"toggleFolder(folder.key)\">\r\n        <mat-icon>\r\n          {{ toggledFolders.includes(folder.key) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\r\n        </mat-icon>\r\n        <span>{{ 'SourceEditorSnippets.' + section.key + '.' + folder.key + '.Title' | translate }}</span>\r\n      </div>\r\n      @if (toggledFolders.includes(folder.key)) {\r\n      @for (snippet of (folder.value | objectToArray); track snippet) {\r\n      <div class=\"snippet\">\r\n        <div class=\"snippet-label\">\r\n          <div matRipple class=\"text\" [tippy]=\"snippet.snip\" tippyShowDelay=\"750\" (click)=\"addSnippet(snippet.snip)\">\r\n            {{ snippet.label }}\r\n          </div>\r\n          @if (snippet.more) {\r\n          <mat-icon tippy=\"Show More\" tippyShowDelay=\"750\" (click)=\"toggleMore(snippet.key)\">\r\n            {{ toggledMores.includes(snippet.key) ? 'more_vert' : 'more_horiz' }}\r\n          </mat-icon>\r\n          }\r\n          <mat-icon tippy=\"Show Help\" tippyShowDelay=\"750\" appClickStopPropagation\r\n            (click)=\"toggleInfo(snippet.key)\">info</mat-icon>\r\n        </div>\r\n        @if (toggledInfos.includes(snippet.key)) {\r\n        <div class=\"snippet-help\">\r\n          <div class=\"text\" [innerHTML]=\"snippet.help | safeHtml\"></div>\r\n          @for (link of snippet.links; track link) {\r\n          <div>\r\n            <a [href]=\"link.url\" target=\"_blank\">{{ link.name }}</a>\r\n          </div>\r\n          }\r\n        </div>\r\n        }\r\n        @if (toggledMores.includes(snippet.key)) {\r\n        @for (more of (snippet.more | objectToArray); track more) {\r\n        <div>\r\n          <div class=\"snippet-label\">\r\n            <div matRipple class=\"text text-more\" [tippy]=\"more.snip\" tippyShowDelay=\"750\"\r\n              (click)=\"addSnippet(more.snip)\">\r\n              {{ more.label }}\r\n            </div>\r\n            <mat-icon tippy=\"Show Help\" tippyShowDelay=\"750\" appClickStopPropagation\r\n              (click)=\"toggleInfo(more.key)\">info</mat-icon>\r\n          </div>\r\n          @if (toggledInfos.includes(more.key)) {\r\n          <div class=\"snippet-help snippet-help-more\">\r\n            <div class=\"text\" [innerHTML]=\"more.help | safeHtml\"></div>\r\n            @for (link of more.links; track link) {\r\n            <div>\r\n              <a [href]=\"link.url\" target=\"_blank\">{{ link.name }}</a>\r\n            </div>\r\n            }\r\n          </div>\r\n          }\r\n        </div>\r\n        }\r\n        }\r\n      </div>\r\n      }\r\n      }\r\n    </div>\r\n    }\r\n    }\r\n  </div>\r\n  }\r\n</div>\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { SnippetsSets } from '../models/snippet.model';\r\nimport { ObjectToArrayPipe } from './object-to-array.pipe';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { KeyValuePipe } from '@angular/common';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { ArrayHelpers } from '../../shared/helpers/array.helpers';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { SafeHtmlPipe } from '../../shared/pipes/safe-html.pipe';\r\n\r\n@Component({\r\n  selector: 'app-code-snippets',\r\n  templateUrl: './code-snippets.component.html',\r\n  styleUrls: ['./code-snippets.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatIconModule,\r\n    MatRippleModule,\r\n    KeyValuePipe,\r\n    TranslateModule,\r\n    ObjectToArrayPipe,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class CodeSnippetsComponent {\r\n  @Input() snippets: SnippetsSets;\r\n  @Output() insertSnippet: EventEmitter<string> = new EventEmitter();\r\n  toggledSections: string[] = [];\r\n  toggledFolders: string[] = [];\r\n  toggledInfos: string[] = [];\r\n  toggledMores: string[] = [];\r\n\r\n  constructor() { }\r\n\r\n  addSnippet(snippet: string): void {\r\n    this.insertSnippet.emit(snippet);\r\n  }\r\n\r\n  toggleSection(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledSections);\r\n  }\r\n\r\n  toggleFolder(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledFolders);\r\n  }\r\n\r\n  toggleInfo(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledInfos);\r\n  }\r\n\r\n  toggleMore(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledMores);\r\n  }\r\n}\r\n","import { FileAsset } from '../models/file-asset.model';\r\nimport { TreeItem } from '../models/tree-item.model';\r\nimport { appSharedRoot } from './code-templates.models';\r\n\r\nexport function calculateTreeAppShared(templates: FileAsset[]): TreeItem[] {\r\n  const tree: TreeItem[] = [\r\n    {\r\n      depth: -1,\r\n      name: 'App Files',\r\n      pathFromRoot: appSharedRoot,\r\n      isShared: false,\r\n      isFolder: true,\r\n      children: calculateTree(templates.filter(f => !f.Shared)),\r\n    },\r\n    {\r\n      depth: -1,\r\n      name: 'Shared App Files',\r\n      pathFromRoot: appSharedRoot,\r\n      isShared: true,\r\n      isFolder: true,\r\n      children: calculateTree(templates.filter(f => f.Shared)),\r\n    },\r\n  ];\r\n  return tree;\r\n}\r\n\r\nfunction calculateTree(templates: FileAsset[]): TreeItem[] {\r\n  if (!templates) { return []; }\r\n\r\n  const tree: TreeItem[] = [];\r\n  for (const template of templates) {\r\n    let parent: TreeItem[] = tree;\r\n    const paths = template.Path.split('/');\r\n    const last = paths[paths.length - 1];\r\n    let pathFromRoot = '';\r\n    for (let i = 0; i < paths.length; i++) {\r\n      const path = paths[i];\r\n      pathFromRoot += i ? `/${path}` : path;\r\n      const existing = parent.find(item => item.name === path);\r\n      if (existing) {\r\n        parent = existing.children;\r\n      } else {\r\n        const item: TreeItem = {\r\n          depth: i,\r\n          name: path,\r\n          pathFromRoot,\r\n          isShared: template.Shared,\r\n          isFolder: path !== last,\r\n          ...(path !== last && { children: [] }),\r\n        };\r\n        parent.push(item);\r\n        parent = item.children;\r\n      }\r\n    }\r\n  }\r\n\r\n  return tree;\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TreeItem } from '../models/tree-item.model';\r\n\r\n/** Sorts folders before files */\r\n@Pipe({\r\n  name: 'sortItems',\r\n  standalone: true\r\n})\r\nexport class SortItemsPipe implements PipeTransform {\r\n\r\n  transform(items: TreeItem[]) {\r\n    if (items == null) { return items; }\r\n\r\n    items.sort((item1, item2) => {\r\n      if (item1.isFolder < item2.isFolder) {\r\n        return 1;\r\n      } else if (item1.isFolder > item2.isFolder) {\r\n        return -1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n    return items;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n  name: 'depthPadding',\r\n  standalone: true\r\n})\r\nexport class DepthPaddingPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(depth: number, isFolder: boolean): SafeStyle {\r\n    let padding: number;\r\n    if (isFolder) {\r\n      padding = depth * 8;\r\n    } else {\r\n      padding = (depth === 0) ? 8 : (depth * 8 + 16);\r\n    }\r\n    return this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${padding}px;`);\r\n  }\r\n}\r\n","<div class=\"editor-active-explorer fancy-scrollbar-dark explorer-wrapper\">\r\n\r\n  <div>\r\n    @for (item of (tree | sortItems); track item) {\r\n    <ng-container *ngTemplateOutlet=\"fileOrFolder; context: {item: item}\"></ng-container>\r\n    }\r\n\r\n    <ng-template #fileOrFolder let-item=\"item\">\r\n\r\n      @if (!item.isFolder) {\r\n      <div class=\"file\" [style]=\"item.depth | depthPadding: item.isFolder\"\r\n        [ngClass]=\"{'active': isToggled(item.pathFromRoot, item.isShared) }\" [tippy]=\"item.name\" tippyShowDelay=\"750\"\r\n        (click)=\"openTemplate(item.pathFromRoot, item.isShared)\">\r\n        {{ item.name }}\r\n      </div>\r\n      }\r\n\r\n      @if (item.isFolder) {\r\n      <div>\r\n        <div class=\"folder-name-wrapper\" [ngClass]=\"{'app-shared-root': item.depth < 0}\"\r\n          [style]=\"item.depth + 1 | depthPadding: item.isFolder\" (click)=\"toggleItem(item.pathFromRoot, item.isShared)\">\r\n          <div class=\"folder-name\" [tippy]=\"item.name\" tippyShowDelay=\"750\">\r\n            <mat-icon> {{ isToggled(item.pathFromRoot, item.isShared) ? 'keyboard_arrow_down' : 'keyboard_arrow_right'\r\n              }}\r\n            </mat-icon>\r\n            <span>{{ item.name }}</span>\r\n          </div>\r\n          <div class=\"add-item\" tippy=\"Create file in this folder\" tippyShowDelay=\"750\" appClickStopPropagation\r\n            (click)=\"addFile(item.pathFromRoot, item.isShared)\">\r\n            <mat-icon>add</mat-icon>\r\n          </div>\r\n        </div>\r\n        @if (isToggled(item.pathFromRoot, item.isShared)) {\r\n        @for (item1 of (item.children | sortItems); track item1) {\r\n        <ng-container *ngTemplateOutlet=\"fileOrFolder; context: {item: item1}\"></ng-container>\r\n        }\r\n        }\r\n      </div>\r\n      }\r\n\r\n    </ng-template>\r\n  </div>\r\n\r\n  <div class=\"create-button-wrapper\">\r\n    <button mat-icon-button [matMenuTriggerFor]=\"menu\" tippy=\"Create file\" tippyPlacement=\"left\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <button mat-menu-item (click)=\"addFile('', false)\">\r\n        <span>App</span>\r\n      </button>\r\n      <button mat-menu-item (click)=\"addFile('', true)\">\r\n        <span>Shared (global)</span>\r\n      </button>\r\n    </mat-menu>\r\n  </div>\r\n</div>\r\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\r\nimport { ViewKey } from '../code-editor.models';\r\nimport { FileAsset } from '../models/file-asset.model';\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { TreeItem } from '../models/tree-item.model';\r\nimport { calculateTreeAppShared } from './code-templates.helpers';\r\nimport { appSharedRoot, CreateTemplateParams } from './code-templates.models';\r\nimport { SortItemsPipe } from './order-items.pipe';\r\nimport { DepthPaddingPipe } from './depth-padding.pipe';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgTemplateOutlet, NgClass } from '@angular/common';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { ArrayHelpers } from '../../shared/helpers/array.helpers';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n  selector: 'app-code-templates',\r\n  templateUrl: './code-templates.component.html',\r\n  styleUrls: ['./code-templates.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    NgTemplateOutlet,\r\n    NgClass,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatMenuModule,\r\n    DepthPaddingPipe,\r\n    SortItemsPipe,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n  ],\r\n})\r\nexport class CodeTemplatesComponent implements OnChanges {\r\n  @Input() view?: SourceView;\r\n  @Input() templates: FileAsset[];\r\n  @Output() openView: EventEmitter<ViewKey> = new EventEmitter();\r\n  @Output() createTemplate: EventEmitter<CreateTemplateParams> = new EventEmitter();\r\n  tree: TreeItem[];\r\n  toggledItemsApp: string[] = [];\r\n  toggledItemsShared: string[] = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.templates != null) {\r\n      this.tree = calculateTreeAppShared(this.templates);\r\n    }\r\n    if (changes.view != null) {\r\n      const previousView: SourceView = changes.view?.previousValue;\r\n      if (previousView) {\r\n        this.toggleItem(previousView.FileName, previousView.IsShared);\r\n      }\r\n      if (this.view) {\r\n        this.showFileInTree(this.view.FileName, this.view.IsShared);\r\n      }\r\n    }\r\n  }\r\n\r\n  isToggled(path: string, isShared: boolean): boolean {\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    return toggledItems.includes(path);\r\n  }\r\n\r\n  openTemplate(path: string, isShared: boolean): void {\r\n    const viewKey: ViewKey = { key: path, shared: isShared };\r\n    this.openView.emit(viewKey);\r\n  }\r\n\r\n  toggleItem(path: string, isShared: boolean): void {\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    ArrayHelpers.toggleInArray(path, toggledItems);\r\n  }\r\n\r\n  addFile(folder?: string, isShared?: boolean): void {\r\n    const params: CreateTemplateParams = { folder, isShared };\r\n    this.createTemplate.emit(params);\r\n  }\r\n\r\n  private showFileInTree(file: string, isShared: boolean): void {\r\n    if (file == null) { return; }\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    if (toggledItems.includes(file)) { return; }\r\n\r\n    const paths = [appSharedRoot, ...file.split('/')];\r\n    let pathFromRoot = '';\r\n    for (const path of paths) {\r\n      pathFromRoot = !pathFromRoot ? path : `${pathFromRoot}/${path}`;\r\n      if (toggledItems.includes(pathFromRoot)) { continue; }\r\n      this.toggleItem(pathFromRoot, isShared);\r\n    }\r\n  }\r\n}\r\n","export const appSharedRoot = '' as const;\r\n\r\nexport interface CreateTemplateParams {\r\n  folder?: string;\r\n  isShared?: boolean;\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n<div class=\"editor-root\" appToggleDebug [ngClass]=\"{ 'sxc-dark': monacoOptions.theme === '2sxc-dark' }\">\r\n  <div class=\"editor-side-toolbar\">\r\n    <div class=\"button\" [ngClass]=\"{ 'active': activeExplorer === Explorers.Templates }\" tippy=\"Templates\"\r\n      (click)=\"toggleExplorer(Explorers.Templates)\">\r\n      <mat-icon>file_copy</mat-icon>\r\n    </div>\r\n    <div class=\" button\" [ngClass]=\"{ 'active': activeExplorer === Explorers.Snippets }\" tippy=\"Snippets\"\r\n      (click)=\"toggleExplorer(Explorers.Snippets)\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  </div>\r\n  <app-code-templates [hidden]=\"activeExplorer !== Explorers.Templates\" [view]=\"vm.view\" [templates]=\"vm.templates\"\r\n    (openView)=\"openView($event)\" (createTemplate)=\"createTemplate($event)\">\r\n  </app-code-templates>\r\n  <app-code-snippets [hidden]=\"activeExplorer !== Explorers.Snippets\" [snippets]=\"vm.explorerSnipps\"\r\n    (insertSnippet)=\"insertSnippet($event)\">\r\n  </app-code-snippets>\r\n  <div class=\"editor-group\">\r\n    @if (vm.tabs.length > 0) {\r\n    <div class=\"tabs-container fancy-scrollbar-dark\">\r\n      @for (tab of vm.tabs; track tab) {\r\n      <div class=\"tab\" [ngClass]=\"{\r\n              'active': tab.isActive,\r\n              'modified': tab.isModified,\r\n              'loading': tab.isLoading\r\n              }\" (click)=\"openView(tab.viewKey)\">\r\n        <div class=\"tab-label-container\" [tippy]=\"tab.label\" tippyShowDelay=\"750\">\r\n          @if (tab.viewKey.shared) {\r\n          <mat-icon class=\"icon-shared\">share</mat-icon>\r\n          }\r\n          <span class=\"tab-label\">{{ tab.label }}</span>\r\n        </div>\r\n        <div class=\"tab-actions-container\">\r\n          @if (tab.isModified) {\r\n          <mat-icon class=\"tab-action icon-modified\" fontSet=\"material-icons\">circle</mat-icon>\r\n          }\r\n          @if (tab.isLoading) {\r\n          <mat-spinner class=\"spinner\" mode=\"indeterminate\" diameter=\"14\" color=\"white\">\r\n          </mat-spinner>\r\n          }\r\n          <mat-icon class=\"tab-action icon-close\" tippy=\"Close\" appClickStopPropagation\r\n            (click)=\"closeEditor(tab.viewKey)\">close</mat-icon>\r\n        </div>\r\n      </div>\r\n      }\r\n    </div>\r\n    }\r\n    @if (vm.view) {\r\n    <app-monaco-editor [filename]=\"vm.view.FileName\" [value]=\"vm.view.Code\"\r\n      (valueChanged)=\"codeChanged($event, vm.viewKey)\" [options]=\"monacoOptions\" [snippets]=\"vm.editorSnipps\"\r\n      [tooltips]=\"vm.tooltips\" [autoFocus]=\"true\">\r\n    </app-monaco-editor>\r\n    }\r\n  </div>\r\n  @if (vm.activeView) {\r\n  <button mat-fab mat-elevation-z24 tippy=\"Click to save or CTRL + S\" (click)=\"save()\">\r\n    <mat-icon>done</mat-icon>\r\n  </button>\r\n  }\r\n</div>\r\n}\r\n","import { Component, NgZone, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport type * as Monaco from 'monaco-editor';\r\nimport { BehaviorSubject, combineLatest, forkJoin, fromEvent, map, Observable, of, share, switchMap } from 'rxjs';\r\n// tslint:disable-next-line:max-line-length\r\nimport { CreateFileDialogComponent, CreateFileDialogData, CreateFileDialogResult } from '../create-file-dialog';\r\nimport { MonacoEditorComponent } from '../monaco-editor';\r\nimport { BaseComponent } from '../shared/components/base.component';\r\nimport { keyIsShared, keyItems } from '../shared/constants/session.constants';\r\nimport { ViewOrFileIdentifier } from '../shared/models/edit-form.model';\r\nimport { Context } from '../shared/services/context';\r\nimport { CodeAndEditionWarningsComponent } from './code-and-edition-warnings/code-and-edition-warnings.component';\r\nimport { CodeAndEditionWarningsSnackBarData } from './code-and-edition-warnings/code-and-edition-warnings.models';\r\nimport { CodeEditorViewModel, ExplorerOption, Explorers, Tab, ViewInfo, ViewKey } from './code-editor.models';\r\nimport { CreateTemplateParams } from './code-templates/code-templates.models';\r\nimport { FileAsset } from './models/file-asset.model';\r\nimport { SourceView } from './models/source-view.model';\r\nimport { SnippetsService } from './services/snippets.service';\r\nimport { SourceService } from './services/source.service';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MonacoEditorComponent as MonacoEditorComponent_1 } from '../monaco-editor/monaco-editor.component';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { CodeSnippetsComponent } from './code-snippets/code-snippets.component';\r\nimport { CodeTemplatesComponent } from './code-templates/code-templates.component';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgClass, AsyncPipe } from '@angular/common';\r\nimport { ClickStopPropagationDirective } from '../shared/directives/click-stop-propagation.directive';\r\nimport { RxHelpers } from '../shared/rxJs/rx.helpers';\r\nimport { TippyDirective } from '../shared/directives/tippy.directive';\r\nimport { ToggleDebugDirective } from '../shared/directives/toggle-debug.directive';\r\nimport { transient } from '../core';\r\n\r\n@Component({\r\n  selector: 'app-code-editor',\r\n  templateUrl: './code-editor.component.html',\r\n  styleUrls: ['./code-editor.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    NgClass,\r\n    MatIconModule,\r\n    CodeTemplatesComponent,\r\n    CodeSnippetsComponent,\r\n    MatProgressSpinnerModule,\r\n    MonacoEditorComponent_1,\r\n    MatButtonModule,\r\n    AsyncPipe,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n    ToggleDebugDirective,\r\n  ],\r\n})\r\nexport class CodeEditorComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @ViewChild(MonacoEditorComponent) private monacoEditorRef: MonacoEditorComponent;\r\n\r\n  Explorers = Explorers;\r\n  activeExplorer: ExplorerOption = Explorers.Templates;\r\n  monacoOptions: Monaco.editor.IStandaloneEditorConstructionOptions = {\r\n    theme: '2sxc-dark',\r\n    tabSize: 2,\r\n    fixedOverflowWidgets: true,\r\n  };\r\n\r\n  private sourceService = transient(SourceService);\r\n  private snippetsService = transient(SnippetsService);\r\n\r\n  viewModel$: Observable<CodeEditorViewModel>;\r\n\r\n  private templates$: BehaviorSubject<FileAsset[]>;\r\n  private activeView$: BehaviorSubject<ViewKey>;\r\n  private openViews$: BehaviorSubject<ViewKey[]>;\r\n  private viewInfos$: BehaviorSubject<ViewInfo[]>;\r\n  private urlItems: ViewOrFileIdentifier[];\r\n\r\n  private titleService = transient(Title);\r\n\r\n  constructor(\r\n    private context: Context,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n    private zone: NgZone,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) {\r\n    super();\r\n    this.context.init(this.route);\r\n    const codeItems: ViewOrFileIdentifier[] = JSON.parse(sessionStorage.getItem(keyItems));\r\n    const isShared = sessionStorage.getItem(keyIsShared) === 'true' ?? false;\r\n    codeItems.forEach(codeItem => {\r\n      // remove leading \"/\" from path\r\n      if (codeItem.Path.startsWith('/')) {\r\n        codeItem.Path = codeItem.Path.substring(1);\r\n      }\r\n      codeItem.IsShared ??= isShared;\r\n    });\r\n    this.urlItems = codeItems;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.templates$ = new BehaviorSubject<FileAsset[]>([]);\r\n    const initialViews = this.urlItems.map(item => {\r\n      const viewKey: ViewKey = { key: item.EntityId?.toString() ?? item.Path, shared: item.IsShared };\r\n      return viewKey;\r\n    });\r\n    this.activeView$ = new BehaviorSubject<ViewKey>(initialViews[0]);\r\n    this.openViews$ = new BehaviorSubject<ViewKey[]>(initialViews);\r\n    this.viewInfos$ = new BehaviorSubject<ViewInfo[]>([]);\r\n\r\n    this.attachListeners();\r\n\r\n    this.sourceService.getAll().subscribe(templates => {\r\n      this.templates$.next(templates);\r\n    });\r\n\r\n    this.subscriptions.add(\r\n      combineLatest([this.templates$, this.openViews$]).subscribe(([templates, openViews]) => {\r\n        if (templates.length === 0) return;\r\n\r\n        let viewInfos = this.viewInfos$.value;\r\n        const notLoaded = openViews.filter(viewKey => !viewInfos.some(v => RxHelpers.objectsEqual(v.viewKey, viewKey)));\r\n        if (notLoaded.length === 0) return;\r\n\r\n        forkJoin(\r\n          notLoaded.map(viewKey => {\r\n            // set viewKey in viewInfos to mark that view is being fetched\r\n            const newViewInfo: ViewInfo = {\r\n              viewKey,\r\n            };\r\n            viewInfos = [...viewInfos, newViewInfo];\r\n\r\n            const view$ = this.sourceService.get(viewKey.key, viewKey.shared, this.urlItems).pipe(share());\r\n            const snippets$ = view$.pipe(switchMap(view => this.snippetsService.getSnippets(view)));\r\n            const tooltips$ = view$.pipe(switchMap(view => this.snippetsService.getTooltips(view.Extension.substring(1))));\r\n            return forkJoin([of(viewKey), view$, snippets$, tooltips$]);\r\n          })\r\n        ).subscribe(results => {\r\n          let viewInfos1 = this.viewInfos$.value;\r\n\r\n          results.forEach(([viewKey, view, snippets, tooltips]) => {\r\n            const selectedIndex = viewInfos1.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n            if (selectedIndex < 0) return;\r\n\r\n            const newViewInfo: ViewInfo = {\r\n              viewKey,\r\n              view,\r\n              explorerSnipps: snippets.sets,\r\n              editorSnipps: snippets.list,\r\n              tooltips,\r\n              savedCode: view.Code,\r\n            };\r\n            viewInfos1 = [...viewInfos1.slice(0, selectedIndex), newViewInfo, ...viewInfos1.slice(selectedIndex + 1)];\r\n            this.showCodeAndEditionWarnings(viewKey, view, templates);\r\n          });\r\n\r\n          this.viewInfos$.next(viewInfos1);\r\n        });\r\n\r\n        this.viewInfos$.next(viewInfos);\r\n      })\r\n    );\r\n\r\n    this.subscriptions.add(\r\n      combineLatest([this.activeView$, this.viewInfos$]).subscribe(([activeView, viewInfos]) => {\r\n        const active = viewInfos.find(v => RxHelpers.objectsEqual(v.viewKey, activeView));\r\n        const defaultTitle = 'Code Editor';\r\n        const newTitle = active == null ? defaultTitle : `${active.view?.FileName} - ${defaultTitle}`;\r\n        const oldTitle = this.titleService.getTitle();\r\n        if (newTitle !== oldTitle) {\r\n          this.titleService.setTitle(newTitle);\r\n        }\r\n      })\r\n    );\r\n\r\n    this.viewModel$ = combineLatest([this.templates$, this.activeView$, this.openViews$, this.viewInfos$]).pipe(\r\n      map(([templates, activeView, openViews, viewInfos]) => {\r\n        const tabs = openViews.map(viewKey => {\r\n          const viewInfo = viewInfos.find(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n          const label: Tab = {\r\n            viewKey,\r\n            label: viewInfo?.view?.FileName ?? viewKey.key,\r\n            isActive: RxHelpers.objectsEqual(viewKey, activeView),\r\n            isModified: viewInfo?.view?.Code !== viewInfo?.savedCode,\r\n            isLoading: viewInfo?.view == null,\r\n          };\r\n          return label;\r\n        });\r\n        const activeViewInfo = viewInfos.find(v => RxHelpers.objectsEqual(v.viewKey, activeView));\r\n\r\n        const viewModel: CodeEditorViewModel = {\r\n          activeView,\r\n          tabs,\r\n          viewKey: activeViewInfo?.viewKey,\r\n          view: activeViewInfo?.view,\r\n          templates,\r\n          explorerSnipps: activeViewInfo?.explorerSnipps,\r\n          editorSnipps: activeViewInfo?.editorSnipps,\r\n          tooltips: activeViewInfo?.tooltips,\r\n        };\r\n        return viewModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.templates$.complete();\r\n    this.activeView$.complete();\r\n    this.openViews$.complete();\r\n    this.viewInfos$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  toggleExplorer(explorer: ExplorerOption): void {\r\n    this.activeExplorer = (this.activeExplorer !== explorer) ? explorer : null;\r\n  }\r\n\r\n  createTemplate(params: CreateTemplateParams): void {\r\n    // This FileLocationDialogComponent dialog is currently never going to be opened because it has been replaced by mat-menu\r\n    // in the code-templates.component.html template. If you want to use the dialog instead of the menu, you need to remove the\r\n    // mat-menu and replace it with a button that opens the dialog with empty parameters.\r\n    // Dialog has been replaced by menu because from update to Angular 16 CreateFileDialogComponent wasn't opening anymore if\r\n    // FileLocationDialogComponent dialog was used.\r\n    // if (params.isShared == null) {\r\n    //   const fileLocationDialogRef = this.dialog.open(FileLocationDialogComponent, {\r\n    //     autoFocus: false,\r\n    //     viewContainerRef: this.viewContainerRef,\r\n    //     width: '650px',\r\n    //   });\r\n    //   fileLocationDialogRef.afterClosed().subscribe((isShared?: boolean) => {\r\n    //     if (isShared == null) return;\r\n    //     params.isShared = isShared;\r\n    //     this.createTemplate(params);\r\n    //   });\r\n    //   return;\r\n    // }\r\n\r\n    const createFileDialogData: CreateFileDialogData = {\r\n      folder: params.folder,\r\n      global: params.isShared,\r\n      purpose: params.folder === 'api' || params.folder?.startsWith('api/') ? 'Api' : undefined,\r\n    };\r\n    const createFileDialogRef = this.dialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data: createFileDialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    createFileDialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) return;\r\n\r\n      this.sourceService.create(result.name, params.isShared, result.templateKey).subscribe(() => {\r\n        this.sourceService.getAll().subscribe(files => {\r\n          this.templates$.next(files);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  insertSnippet(snippet: string): void {\r\n    this.monacoEditorRef?.insertSnippet(snippet);\r\n  }\r\n\r\n  codeChanged(code: string, viewKey: ViewKey): void {\r\n    let viewInfos = this.viewInfos$.value;\r\n    const selectedIndex = viewInfos.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n    const selectedViewInfo = viewInfos[selectedIndex];\r\n    const newViewInfo: ViewInfo = {\r\n      ...selectedViewInfo,\r\n      view: {\r\n        ...selectedViewInfo.view,\r\n        Code: code,\r\n      },\r\n    };\r\n    viewInfos = [...viewInfos.slice(0, selectedIndex), newViewInfo, ...viewInfos.slice(selectedIndex + 1)];\r\n    this.viewInfos$.next(viewInfos);\r\n  }\r\n\r\n  openView(viewKey: ViewKey): void {\r\n    // fix viewKey because it can be a templateId or a path, and file might already be open\r\n    viewKey = this.viewInfos$.value.find(\r\n      v => !RxHelpers.objectsEqual(v.viewKey, viewKey) && v.view?.FileName === viewKey.key && v.view?.IsShared === viewKey.shared\r\n    )?.viewKey ?? viewKey;\r\n\r\n    const oldActiveView = this.activeView$.value;\r\n    if (!RxHelpers.objectsEqual(oldActiveView, viewKey)) {\r\n      this.activeView$.next(viewKey);\r\n    }\r\n    const oldOpenViews = this.openViews$.value;\r\n    if (!oldOpenViews.some(v => RxHelpers.objectsEqual(v, viewKey))) {\r\n      const newOpenViews = [...oldOpenViews, viewKey];\r\n      this.openViews$.next(newOpenViews);\r\n    }\r\n  }\r\n\r\n  closeEditor(viewKey: ViewKey): void {\r\n    const oldOpenViews = this.openViews$.value;\r\n    const newOpenViews = oldOpenViews.filter(key => !RxHelpers.objectsEqual(key, viewKey));\r\n\r\n    const oldActiveView = this.activeView$.value;\r\n    if (RxHelpers.objectsEqual(oldActiveView, viewKey)) {\r\n      const newActiveView = oldOpenViews[oldOpenViews.findIndex(v => RxHelpers.objectsEqual(v, oldActiveView)) - 1] ?? newOpenViews[0];\r\n      this.activeView$.next(newActiveView);\r\n    }\r\n\r\n    this.openViews$.next(newOpenViews);\r\n  }\r\n\r\n  save(viewKey?: ViewKey): void {\r\n    viewKey ??= this.activeView$.value;\r\n    const viewInfo = this.viewInfos$.value.find(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n    if (viewInfo?.view == null) return;\r\n\r\n    this.snackBar.open('Saving...');\r\n    const codeToSave = viewInfo.view.Code;\r\n    this.sourceService.save(viewKey.key, viewKey.shared, viewInfo.view, this.urlItems).subscribe({\r\n      next: res => {\r\n        if (!res) {\r\n          this.snackBar.open('Failed', null, { duration: 2000 });\r\n          return;\r\n        }\r\n\r\n        let newViewInfos = [...this.viewInfos$.value];\r\n        const selectedIndex = newViewInfos.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n        if (selectedIndex < 0) return;\r\n\r\n        const selectedViewInfo = newViewInfos[selectedIndex];\r\n        const newViewInfo: ViewInfo = {\r\n          ...selectedViewInfo,\r\n          savedCode: codeToSave,\r\n        };\r\n        newViewInfos = [...newViewInfos.slice(0, selectedIndex), newViewInfo, ...newViewInfos.slice(selectedIndex + 1)];\r\n        this.viewInfos$.next(newViewInfos);\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n      },\r\n      error: () => this.snackBar.open('Failed', null, { duration: 2000 }),\r\n    });\r\n  }\r\n\r\n  /** Show info about editions if other files with the same name exist */\r\n  private showCodeAndEditionWarnings(viewKey: ViewKey, view: SourceView, files: FileAsset[]): void {\r\n    const pathAndName = view.FileName;\r\n    const pathSeparator = pathAndName.indexOf('/') > -1 ? pathAndName.lastIndexOf('/') + 1 : 0;\r\n    const pathWithSlash = pathSeparator === 0 ? '' : pathAndName.substring(0, pathSeparator);\r\n    const fullName = pathAndName.substring(pathSeparator);\r\n    const name = fullName.substring(0, fullName.length - view.Extension.length);\r\n    const nameCode = name + '.code' + view.Extension;\r\n    // find out if we also have a code file\r\n    const codeFile = files.find(file => file.Path === pathWithSlash + nameCode && file.Shared === view.IsShared);\r\n    const otherEditions = files.filter(file => file.Path.endsWith(fullName) && file.Shared === view.IsShared).length - 1;\r\n\r\n    if (codeFile || otherEditions) {\r\n      const snackBarData: CodeAndEditionWarningsSnackBarData = {\r\n        fileName: fullName,\r\n        codeFile: codeFile?.Path,\r\n        edition: this.urlItems\r\n          .find(i => i.EntityId?.toString() === viewKey.key && i.IsShared === view.IsShared && i.Path === view.FileName)?.Edition,\r\n        otherEditions,\r\n        openCodeBehind: false,\r\n      };\r\n      const snackBarRef = this.snackBar.openFromComponent(CodeAndEditionWarningsComponent, {\r\n        data: snackBarData,\r\n        duration: 10000,\r\n      });\r\n\r\n      snackBarRef.onAction().subscribe(() => {\r\n        if ((snackBarRef.containerInstance.snackBarConfig.data as CodeAndEditionWarningsSnackBarData).openCodeBehind) {\r\n          const openViewKey: ViewKey = { key: codeFile?.Path, shared: codeFile?.Shared };\r\n          this.openView(openViewKey);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private attachListeners(): void {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.subscriptions.add(\r\n        fromEvent<BeforeUnloadEvent>(window, 'beforeunload')\r\n          .subscribe(event => {\r\n            const allSaved = !this.viewInfos$.value.some(v => v.view != null && v.view.Code !== v.savedCode);\r\n            if (allSaved) return;\r\n            event.preventDefault();\r\n            event.returnValue = ''; // fix for Chrome\r\n          })\r\n      );\r\n      this.subscriptions.add(\r\n        fromEvent<KeyboardEvent>(window, 'keydown')\r\n          .subscribe(event => {\r\n            const CTRL_S = event.keyCode === 83 && (navigator.platform.match('Mac') ? event.metaKey : event.ctrlKey);\r\n            if (!CTRL_S) return;\r\n            event.preventDefault();\r\n            this.zone.run(() => { this.save(); });\r\n          })\r\n      );\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { ContentType } from '../../app-administration/models/content-type.model';\r\nimport { webApiTypeRoot } from '../../app-administration/services/content-types.service';\r\nimport { Context } from '../services/context';\r\nimport { Field, FieldInputTypeOption } from './field.model';\r\nimport { InputTypeMetadata } from './input-type-metadata.model';\r\nimport { InputTypeStrict } from './input-type-catalog';\r\n\r\nexport const webApiFieldsRoot = 'admin/field/';\r\nexport const webApiFieldsAll = 'admin/field/all';\r\nexport const webApiFieldsGetShared = 'admin/field/GetSharedFields';\r\n\r\n@Injectable()\r\nexport class ContentTypesFieldsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  private apiUrl(name: string) {\r\n    return this.dnnContext.$2sxc.http.apiUrl(name);\r\n  }\r\n\r\n  typeListRetrieve() {\r\n    return this.http.get<string[]>(this.apiUrl(webApiFieldsRoot + 'DataTypes'), {\r\n      params: { appid: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  getInputTypesList() {\r\n    return this.http\r\n      .get<InputTypeMetadata[]>(this.apiUrl(webApiFieldsRoot + 'InputTypes'), { params: { appid: this.context.appId.toString() } })\r\n      .pipe(\r\n        map(inputConfigs => {\r\n          const inputTypeOptions = inputConfigs.map(config => {\r\n            const option: FieldInputTypeOption = {\r\n              dataType: config.Type.substring(0, config.Type.indexOf('-')),\r\n              inputType: config.Type,\r\n              label: config.Label,\r\n              description: config.Description,\r\n              isDefault: config.IsDefault,\r\n              isObsolete: config.IsObsolete,\r\n              isRecommended: config.IsRecommended,\r\n              obsoleteMessage: config.ObsoleteMessage,\r\n              icon: config.IsDefault ? 'star' : config.IsRecommended ? 'star_outline' : null,\r\n            };\r\n            return option;\r\n          });\r\n          return inputTypeOptions;\r\n        }),\r\n      );\r\n  }\r\n\r\n  getReservedNames() {\r\n    return this.http.get<Record<string, string>>(this.apiUrl(webApiFieldsRoot + 'ReservedNames'));\r\n  }\r\n\r\n  /** Get all fields for some content type */\r\n  getFields(contentTypeStaticName: string) {\r\n    return this.http\r\n      .get<Field[]>(this.apiUrl(webApiFieldsAll), {\r\n        params: { appid: this.context.appId.toString(), staticName: contentTypeStaticName },\r\n      })\r\n      .pipe(\r\n        map(fields => {\r\n          if (fields) {\r\n            for (const fld of fields) {\r\n              if (!fld.Metadata) { continue; }\r\n              const md = fld.Metadata;\r\n              const allMd = md.All;\r\n              const typeMd = md[fld.Type];\r\n              const inputMd = md[fld.InputType];\r\n              md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n            }\r\n          }\r\n          return fields;\r\n        }),\r\n      );\r\n  }\r\n\r\n  /** Get all possible sharable fields for a new sharing */\r\n  getShareableFields() {\r\n    return this.http.get<Field[]>(this.apiUrl(webApiFieldsGetShared), {\r\n        params: { appid: this.context.appId.toString() },\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Get sharable fields which are possible for this attribute.\r\n   * \r\n   * Reason is that eg. a bool-attribute can only receive metadata from a bool attribute, etc.\r\n   * \r\n   * @param attributeId the existing attributeId which will receive the new metadata\r\n   */\r\n  getShareableFieldsFor(attributeId: number) {\r\n    // TODO: @SDV - do the same as in getShareableFields()\r\n    // but add parameter attributeId to the webapi call\r\n    // I'll create the backend afterwards\r\n    return this.http\r\n      .get<Field[]>(this.apiUrl(webApiFieldsGetShared), {\r\n        params: { appid: this.context.appId.toString(), attributeId: attributeId.toString() },\r\n      });\r\n  }\r\n\r\n  addInheritedField(targetContentTypeId: number, sourceContentTypeStaticName: string, sourceFieldGuid: string, newName: string) {\r\n    return this.http.post<number>(this.apiUrl(webApiFieldsRoot + 'AddInheritedField'), null, {\r\n      params: {\r\n        AppId: this.context.appId.toString(),\r\n        ContentTypeId: targetContentTypeId.toString(),\r\n        SourceType: sourceContentTypeStaticName,\r\n        SourceField: sourceFieldGuid,\r\n        name: newName,\r\n      }\r\n    });\r\n  }\r\n\r\n  share(attributeId: number, share: boolean = true) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Share'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        attributeId: attributeId.toString(),\r\n        share,\r\n      },\r\n    });\r\n  }\r\n\r\n  inherit(attributeId: number, sourceFieldGuid: string) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Inherit'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        attributeId: attributeId.toString(),\r\n        inheritMetadataOf: sourceFieldGuid,\r\n      },\r\n    });\r\n  }\r\n\r\n  reOrder(idArray: number[], contentType: ContentType) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiFieldsRoot + 'Sort'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        order: JSON.stringify(idArray),\r\n      },\r\n    });\r\n  }\r\n\r\n  setTitle(item: Field, contentType: ContentType) {\r\n    return this.http.post<null>(this.apiUrl(webApiTypeRoot + 'SetTitle'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        attributeId: item.Id.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  rename(fieldId: number, contentTypeId: number, newName: string) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Rename'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentTypeId.toString(),\r\n        attributeId: fieldId.toString(),\r\n        newName,\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(item: Field, contentType: ContentType) {\r\n    if (item.IsTitle) {\r\n      throw new Error('Can\\'t delete Title');\r\n    }\r\n\r\n    return this.http.delete<boolean>(this.apiUrl(webApiFieldsRoot + 'Delete'), {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        attributeId: item.Id.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  add(newField: Partial<Field>, contentTypeId: number) {\r\n    return this.http.post<number>(this.apiUrl(webApiFieldsRoot + 'Add'), null, {\r\n      params: {\r\n        AppId: this.context.appId.toString(),\r\n        ContentTypeId: contentTypeId.toString(),\r\n        Id: newField.Id.toString(),\r\n        Type: newField.Type,\r\n        InputType: newField.InputType,\r\n        StaticName: newField.StaticName,\r\n        IsTitle: newField.IsTitle.toString(),\r\n        Index: newField.SortOrder.toString(),\r\n      }\r\n    });\r\n  }\r\n\r\n  updateInputType(id: number, staticName: string, inputType: InputTypeStrict) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiFieldsRoot + 'InputType'), null, {\r\n      params: { appId: this.context.appId.toString(), attributeId: id.toString(), field: staticName, inputType }\r\n    });\r\n  }\r\n}\r\n","import isEqual from 'lodash-es/isEqual';\r\n\r\nexport class RxHelpers {\r\n\r\n  static boolEquals(x: boolean, y: boolean): boolean {\r\n    return x === y;\r\n  }\r\n\r\n  static stringEquals(x: string, y: string): boolean {\r\n    return x === y;\r\n  }\r\n\r\n  static valueEquals<T>(x: T, y: T): boolean {\r\n    return x === y;\r\n  }\r\n\r\n  static manyEquals<T>(x: T, y: T): boolean {\r\n    if (x == null || y == null) return x === y;\r\n    const typeOfX = typeof x;\r\n    if (typeOfX !== typeof y) return false;\r\n    if (typeOfX === 'string' || typeOfX === 'number' || typeOfX === 'boolean')\r\n      return x === y;\r\n\r\n    if (Array.isArray(x)) return RxHelpers.arraysEqual(x, y as []);\r\n\r\n    return RxHelpers.objectsEqual(x, y);\r\n  }\r\n\r\n  static objectsEqual<T>(x: T, y: T): boolean {\r\n    if (x == null || y == null) return x === y;\r\n\r\n    const obj1 = x as Record<string, any>;\r\n    const obj2 = y as Record<string, any>;\r\n\r\n    const keys1 = Object.keys(obj1);\r\n    const keys2 = Object.keys(obj2);\r\n    if (keys1.length !== keys2.length) return false;\r\n\r\n    const equal = keys1.every(key1 => {\r\n      if (!obj2.hasOwnProperty(key1)) return false;\r\n\r\n      return obj1[key1] === obj2[key1];\r\n    });\r\n\r\n    return equal;\r\n  }\r\n\r\n  static arraysEqual<T>(x: T[], y: T[]): boolean {\r\n    if (x == null || y == null) return x === y;\r\n\r\n    if (x.length !== y.length) return false;\r\n\r\n    const equal = x.every((item, index) => {\r\n      return x[index] === y[index];\r\n    });\r\n\r\n    return equal;\r\n  }\r\n\r\n  /** used as .filter(distinct), filters array to only have distinct values */\r\n  static distinct<T>(value: T, index: number, array: T[]): boolean {\r\n    return array.indexOf(value) === index;\r\n  }\r\n\r\n}\r\n","import { Injectable, computed, signal } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { toObservable } from '@angular/core/rxjs-interop';\r\nimport { keyDebug } from '../constants/session.constants';\r\n\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class GlobalConfigService {\r\n\r\n  private debugState = signal<GlobalConfig>(null);\r\n\r\n  isDebug = computed(() => !!this.debugState()?.allowDebugMode && !!this.debugState()?.debugEnabled);\r\n\r\n  /** This observable is a left-over, try to remove once more is refactored */\r\n  debugEnabled$ = toObservable(this.isDebug);\r\n\r\n  constructor(private snackBar: MatSnackBar) {\r\n    const initial: GlobalConfig = {\r\n      id: 0,\r\n      debugEnabled: sessionStorage.getItem(keyDebug) === 'true',\r\n      allowDebugMode: false,\r\n    };\r\n    this.debugState.set(initial);\r\n  }\r\n\r\n  allowDebug(allow: boolean): void {\r\n    const oldConfig = this.debugState();\r\n    if (oldConfig.allowDebugMode === allow)\r\n      return;\r\n\r\n    const newConfig: GlobalConfig = {\r\n      ...oldConfig,\r\n      allowDebugMode: allow,\r\n    };\r\n    this.debugState.set(newConfig);\r\n  }\r\n\r\n  toggleDebugEnabled(): void {\r\n    const oldConfig = this.debugState();\r\n    if (!oldConfig.allowDebugMode) {\r\n      this.snackBar.open('You do not have permissions to enter developer mode', null, { duration: 3000 });\r\n      return;\r\n    }\r\n\r\n    const newConfig: GlobalConfig = {\r\n      ...oldConfig,\r\n      debugEnabled: !oldConfig.debugEnabled,\r\n    };\r\n    this.debugState.set(newConfig);\r\n    this.snackBar.open(newConfig.debugEnabled ? 'developer mode on' : 'developer mode off', null, { duration: 3000 });\r\n  }\r\n}\r\n\r\ninterface GlobalConfig {\r\n  id: 0;\r\n  debugEnabled: boolean;\r\n  allowDebugMode: boolean;\r\n}\r\n","/**\n * @license Angular v17.3.11\n * (c) 2010-2024 Google LLC. https://angular.io/\n * License: MIT\n */\n\nimport { assertInInjectionContext, inject, DestroyRef, ɵRuntimeError, ɵgetOutputDestroyRef, Injector, effect, untracked, assertNotInReactiveContext, signal, computed } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\n/**\n * Operator which completes the Observable when the calling context (component, directive, service,\n * etc) is destroyed.\n *\n * @param destroyRef optionally, the `DestroyRef` representing the current context. This can be\n *     passed explicitly to use `takeUntilDestroyed` outside of an [injection\n * context](guide/dependency-injection-context). Otherwise, the current `DestroyRef` is injected.\n *\n * @developerPreview\n */\nfunction takeUntilDestroyed(destroyRef) {\n    if (!destroyRef) {\n        assertInInjectionContext(takeUntilDestroyed);\n        destroyRef = inject(DestroyRef);\n    }\n    const destroyed$ = new Observable(observer => {\n        const unregisterFn = destroyRef.onDestroy(observer.next.bind(observer));\n        return unregisterFn;\n    });\n    return (source) => {\n        return source.pipe(takeUntil(destroyed$));\n    };\n}\n\n/**\n * Implementation of `OutputRef` that emits values from\n * an RxJS observable source.\n *\n * @internal\n */\nclass OutputFromObservableRef {\n    constructor(source) {\n        this.source = source;\n        this.destroyed = false;\n        this.destroyRef = inject(DestroyRef);\n        this.destroyRef.onDestroy(() => {\n            this.destroyed = true;\n        });\n    }\n    subscribe(callbackFn) {\n        if (this.destroyed) {\n            throw new ɵRuntimeError(953 /* ɵRuntimeErrorCode.OUTPUT_REF_DESTROYED */, ngDevMode &&\n                'Unexpected subscription to destroyed `OutputRef`. ' +\n                    'The owning directive/component is destroyed.');\n        }\n        // Stop yielding more values when the directive/component is already destroyed.\n        const subscription = this.source.pipe(takeUntilDestroyed(this.destroyRef)).subscribe({\n            next: value => callbackFn(value),\n        });\n        return {\n            unsubscribe: () => subscription.unsubscribe(),\n        };\n    }\n}\n/**\n * Declares an Angular output that is using an RxJS observable as a source\n * for events dispatched to parent subscribers.\n *\n * The behavior for an observable as source is defined as followed:\n *    1. New values are forwarded to the Angular output (next notifications).\n *    2. Errors notifications are not handled by Angular. You need to handle these manually.\n *       For example by using `catchError`.\n *    3. Completion notifications stop the output from emitting new values.\n *\n * @usageNotes\n * Initialize an output in your directive by declaring a\n * class field and initializing it with the `outputFromObservable()` function.\n *\n * ```ts\n * @Directive({..})\n * export class MyDir {\n *   nameChange$ = <some-observable>;\n *   nameChange = outputFromObservable(this.nameChange$);\n * }\n * ```\n *\n * @developerPreview\n */\nfunction outputFromObservable(observable, opts) {\n    ngDevMode && assertInInjectionContext(outputFromObservable);\n    return new OutputFromObservableRef(observable);\n}\n\n/**\n * Converts an Angular output declared via `output()` or `outputFromObservable()`\n * to an observable.\n *\n * You can subscribe to the output via `Observable.subscribe` then.\n *\n * @developerPreview\n */\nfunction outputToObservable(ref) {\n    const destroyRef = ɵgetOutputDestroyRef(ref);\n    return new Observable(observer => {\n        // Complete the observable upon directive/component destroy.\n        // Note: May be `undefined` if an `EventEmitter` is declared outside\n        // of an injection context.\n        destroyRef?.onDestroy(() => observer.complete());\n        const subscription = ref.subscribe(v => observer.next(v));\n        return () => subscription.unsubscribe();\n    });\n}\n\n/**\n * Exposes the value of an Angular `Signal` as an RxJS `Observable`.\n *\n * The signal's value will be propagated into the `Observable`'s subscribers using an `effect`.\n *\n * `toObservable` must be called in an injection context unless an injector is provided via options.\n *\n * @developerPreview\n */\nfunction toObservable(source, options) {\n    !options?.injector && assertInInjectionContext(toObservable);\n    const injector = options?.injector ?? inject(Injector);\n    const subject = new ReplaySubject(1);\n    const watcher = effect(() => {\n        let value;\n        try {\n            value = source();\n        }\n        catch (err) {\n            untracked(() => subject.error(err));\n            return;\n        }\n        untracked(() => subject.next(value));\n    }, { injector, manualCleanup: true });\n    injector.get(DestroyRef).onDestroy(() => {\n        watcher.destroy();\n        subject.complete();\n    });\n    return subject.asObservable();\n}\n\n/**\n * Get the current value of an `Observable` as a reactive `Signal`.\n *\n * `toSignal` returns a `Signal` which provides synchronous reactive access to values produced\n * by the given `Observable`, by subscribing to that `Observable`. The returned `Signal` will always\n * have the most recent value emitted by the subscription, and will throw an error if the\n * `Observable` errors.\n *\n * With `requireSync` set to `true`, `toSignal` will assert that the `Observable` produces a value\n * immediately upon subscription. No `initialValue` is needed in this case, and the returned signal\n * does not include an `undefined` type.\n *\n * By default, the subscription will be automatically cleaned up when the current [injection\n * context](/guide/dependency-injection-context) is destroyed. For example, when `toSignal` is\n * called during the construction of a component, the subscription will be cleaned up when the\n * component is destroyed. If an injection context is not available, an explicit `Injector` can be\n * passed instead.\n *\n * If the subscription should persist until the `Observable` itself completes, the `manualCleanup`\n * option can be specified instead, which disables the automatic subscription teardown. No injection\n * context is needed in this configuration as well.\n *\n * @developerPreview\n */\nfunction toSignal(source, options) {\n    ngDevMode &&\n        assertNotInReactiveContext(toSignal, 'Invoking `toSignal` causes new subscriptions every time. ' +\n            'Consider moving `toSignal` outside of the reactive context and read the signal value where needed.');\n    const requiresCleanup = !options?.manualCleanup;\n    requiresCleanup && !options?.injector && assertInInjectionContext(toSignal);\n    const cleanupRef = requiresCleanup ? options?.injector?.get(DestroyRef) ?? inject(DestroyRef) : null;\n    // Note: T is the Observable value type, and U is the initial value type. They don't have to be\n    // the same - the returned signal gives values of type `T`.\n    let state;\n    if (options?.requireSync) {\n        // Initially the signal is in a `NoValue` state.\n        state = signal({ kind: 0 /* StateKind.NoValue */ });\n    }\n    else {\n        // If an initial value was passed, use it. Otherwise, use `undefined` as the initial value.\n        state = signal({ kind: 1 /* StateKind.Value */, value: options?.initialValue });\n    }\n    // Note: This code cannot run inside a reactive context (see assertion above). If we'd support\n    // this, we would subscribe to the observable outside of the current reactive context, avoiding\n    // that side-effect signal reads/writes are attribute to the current consumer. The current\n    // consumer only needs to be notified when the `state` signal changes through the observable\n    // subscription. Additional context (related to async pipe):\n    // https://github.com/angular/angular/pull/50522.\n    const sub = source.subscribe({\n        next: value => state.set({ kind: 1 /* StateKind.Value */, value }),\n        error: error => {\n            if (options?.rejectErrors) {\n                // Kick the error back to RxJS. It will be caught and rethrown in a macrotask, which causes\n                // the error to end up as an uncaught exception.\n                throw error;\n            }\n            state.set({ kind: 2 /* StateKind.Error */, error });\n        },\n        // Completion of the Observable is meaningless to the signal. Signals don't have a concept of\n        // \"complete\".\n    });\n    if (ngDevMode && options?.requireSync && state().kind === 0 /* StateKind.NoValue */) {\n        throw new ɵRuntimeError(601 /* ɵRuntimeErrorCode.REQUIRE_SYNC_WITHOUT_SYNC_EMIT */, '`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.');\n    }\n    // Unsubscribe when the current context is destroyed, if requested.\n    cleanupRef?.onDestroy(sub.unsubscribe.bind(sub));\n    // The actual returned signal is a `computed` of the `State` signal, which maps the various states\n    // to either values or errors.\n    return computed(() => {\n        const current = state();\n        switch (current.kind) {\n            case 1 /* StateKind.Value */:\n                return current.value;\n            case 2 /* StateKind.Error */:\n                throw current.error;\n            case 0 /* StateKind.NoValue */:\n                // This shouldn't really happen because the error is thrown on creation.\n                // TODO(alxhub): use a RuntimeError when we finalize the error semantics\n                throw new ɵRuntimeError(601 /* ɵRuntimeErrorCode.REQUIRE_SYNC_WITHOUT_SYNC_EMIT */, '`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.');\n        }\n    });\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { outputFromObservable, outputToObservable, takeUntilDestroyed, toObservable, toSignal };\n"],"x_google_ignoreList":[18]}