"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_code-editor_code-editor_component_ts-projects_eav-ui_src_app_shared_s-88dd92"],{2934:($,k,a)=>{a.r(k),a.d(k,{CodeEditorComponent:()=>ee});var f=a(436),O=a(5797),C=a(9999),m=a(1873),P=a(1870),F=a(6647),y=a(9452),S=a(271),b=a(8537),v=a(6068),x=a(8801),I=a(3176),d=a(8172),g=a(8873),u=a(3347),E=a(4175),t=a(7580);function X(i,c){if(1&i&&(t.j41(0,"div"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&i){const e=t.XpG();t.R7$(),t.Lme('"',e.snackBarData.fileName,'" also has a code-behind file "',e.snackBarData.codeFile,'".')}}function N(i,c){if(1&i&&t.EFF(0),2&i){const e=t.XpG(2);t.SpI(' You are editing "',e.snackBarData.edition,'" edition. ')}}function tt(i,c){1&i&&t.EFF(0," You may be editing an edition which is not the one you see. ")}function et(i,c){if(1&i&&(t.j41(0,"div"),t.DNE(1,N,1,1),t.EFF(2),t.DNE(3,tt,1,0),t.EFF(4," See "),t.j41(5,"a",3),t.EFF(6,"docs"),t.k0s(),t.EFF(7,". "),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.vxM(1,e.snackBarData.edition?1:-1),t.R7$(),t.Lme(" There are ",e.snackBarData.otherEditions,' other editions of "',e.snackBarData.fileName,'". '),t.R7$(),t.vxM(3,e.snackBarData.edition?-1:3)}}function nt(i,c){if(1&i){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.openCodeBehind())}),t.EFF(1," Open code-behind file "),t.k0s()}}let ot=(()=>{class i{constructor(e,n){this.snackRef=e,this.snackBarData=n}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(u.TQ),t.rXU(u.ht))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-code-and-edition-warnings"]],standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[[1,"messages"],[1,"actions"],["mat-button","","color","primary"],["href","https://go.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"div",0),t.DNE(1,X,3,2)(2,et,8,4,"div"),t.k0s(),t.j41(3,"div",1),t.DNE(4,nt,2,0,"button",2),t.k0s()),2&n&&(t.R7$(),t.vxM(1,o.snackBarData.codeFile?1:-1),t.R7$(),t.vxM(2,o.snackBarData.otherEditions?2:-1),t.R7$(2),t.vxM(4,o.snackBarData.codeFile?4:-1))},dependencies:[E.Hl,E.$z],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]})}return i})();const H={Templates:"Templates",Snippets:"Snippets"};var it=a(2585),st=a(1726),rt=a(5959),at=a(6443),lt=a(4821),U=a(852);let ct=(()=>{class i{constructor(e,n,o){this.http=e,this.dnnContext=n,this.translate=o}getTooltips(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/Code/InlineHelp"),{params:{language:e}})}getSnippets(e){return this.http.get("../ng-assets/snippets.json.js").pipe((0,S.T)(n=>{const o=this.filterAwayNotNeededSnippetsList(n.snippets,e),s=this.extractInputTypeSnippets(o),r=this.initSnippetsWithConfig(s.standardArray,e,s.inputTypeSnippets);return{list:s.standardArray,sets:r}}))}filterAwayNotNeededSnippetsList(e,n){const o=["@","["],s=p=>p.Type.indexOf("Razor")>-1?0:1,r=[];for(const p of e){const l=o.indexOf(p.set[0]);(-1===l||l===s(n))&&(l===s(n)&&(p.set=p.set.substring(1)),r.push(p))}return r}extractInputTypeSnippets(e){const n=[],o=[];for(const p of e)"\\"===p.set[0]?(p.set=p.set.substring(1),o.push(p)):n.push(p);return{standardArray:n,inputTypeSnippets:this.catalogInputTypeSnippets(o)}}catalogInputTypeSnippets(e){const n={};for(const o of e)void 0===n[o.subset]&&(n[o.subset]=[]),n[o.subset].push(o);return n}initSnippetsWithConfig(e,n,o){const s=this.makeTree(e);return s.Content=Object.assign({},s.Content,{Fields:{},PresentationFields:{}}),n.TypeContent&&this.loadContentType(s.Content.Fields,n.TypeContent,"Content",n,o),n.TypeContentPresentation&&this.loadContentType(s.Content.PresentationFields,n.TypeContentPresentation,"Content.Presentation",n,o),n.HasList?(s.List=Object.assign({},s.List,{Fields:{},PresentationFields:{}}),n.TypeList&&this.loadContentType(s.List.Fields,n.TypeList,"Header",n,o),n.TypeListPresentation&&this.loadContentType(s.List.PresentationFields,n.TypeListPresentation,"Header.Presentation",n,o)):delete s.List,n.HasApp&&(s.App.Resources={},s.App.Settings={},this.loadContentType(s.App.Resources,"App-Resources","App.Resources",n,o),this.loadContentType(s.App.Settings,"App-Settings","App.Settings",n,o)),s}makeTree(e){const n={};for(const o of e){void 0===n[o.set]&&(n[o.set]={}),void 0===n[o.set][o.subset]&&(n[o.set][o.subset]=[]);const s={key:o.name,label:this.label(o.set,o.subset,o.name),snip:o.content,help:o.help||this.help(o.set,o.subset,o.name),links:this.linksList(o.links)};n[o.set][o.subset].push(s)}return n}label(e,n,o){const s=this.getHelpKey(e,n,o,".Key");let r=this.translate.instant(s);return r===s&&(r=o),r}getHelpKey(e,n,o,s){return"SourceEditorSnippets."+e+"."+n+"."+o+s}help(e,n,o){const s=this.getHelpKey(e,n,o,".Help");let r=this.translate.instant(s);return r===s&&(r=""),r}linksList(e){if(!e)return null;const n=[],o=e.split("\n");for(const s of o){const r=s.split(":");if(3===r.length){const p={name:r[0].trim(),url:r[1].trim()+":"+r[2].trim()};n.push(p)}}return 0===n.length?null:n}loadContentType(e,n,o,s,r){this.getFields(s.AppId,n).subscribe(p=>{for(const l of p){const _=l.StaticName;e[_]={key:_,label:_,snip:this.valuePlaceholder(o,_,s),help:l.Metadata.merged.Notes||" ("+l.Type.toLowerCase()+") "};const h=(0,it.A)(e[_]);this.attachSnippets(e,o,_,l.InputType,h,r)}if(p.length){const l=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let _=0;_<l.length;_++)e[l[_]]={key:l[_],label:l[_],snip:this.valuePlaceholder(o,l[_],s),help:this.translate.instant("SourceEditorSnippets.StandardFields."+l[_]+".Help")}}})}valuePlaceholder(e,n,o){return o.Type.indexOf("Razor")>-1?"@"+e+"."+n:"["+e.replace(".",":")+":"+n+"]"}getFields(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(rt.zZ),{params:{appid:e.toString(),staticName:n}}).pipe((0,S.T)(o=>{o=o.filter(s=>s.Type!==st.O.Empty);for(const s of o){if(!s.Metadata)continue;const r=s.Metadata;r.merged={...r.All,...r[s.Type],...r[s.InputType]}}return o}))}attachSnippets(e,n,o,s,r,p){let l=p[s];if(s.indexOf("-")){const h=s.substring(0,s.indexOf("-"));if(h){const M=p[h];M&&(l=l?l.concat(M):M)}}if(!l)return;void 0===e[o].more&&(e[o].more={});const _=e[o].more;for(let h=0;h<l.length;h++)try{_[o+"-"+l[h].name]=Object.assign({},r,{key:o+" - "+l[h].name,label:l[h].name,snip:this.localizeGenericSnippet(l[h].content,n,o),collapse:!0})}finally{}}localizeGenericSnippet(e,n,o){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+n+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+o+"$2")}static#t=this.\u0275fac=function(n){return new(n||i)(t.KVO(at.Qq),t.KVO(lt.ob),t.KVO(U.c$))};static#n=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}return i})();var dt=a(9996),Y=a(1134);let _t=(()=>{class i{transform(e){if(null!=e)return Array.isArray(e)?e:Object.values(e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#n=this.\u0275pipe=t.EJ8({name:"objectToArray",type:i,pure:!0,standalone:!0})}return i})();var A=a(316),Z=a(5060),D=a(3840),L=a(9333),G=a(4981),z=a(7896),ut=a(9914);function ht(i,c){if(1&i){const e=t.RV6();t.j41(0,"mat-icon",9),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,s=t.XpG(5);return t.Njj(s.toggleMore(o.key))}),t.EFF(1),t.k0s()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(5);t.R7$(),t.SpI(" ",n.toggledMores.includes(e.key)?"more_vert":"more_horiz"," ")}}function mt(i,c){if(1&i&&(t.j41(0,"div")(1,"a",11),t.EFF(2),t.k0s()()),2&i){const e=c.$implicit;t.R7$(),t.Y8G("href",e.url,t.B4B),t.R7$(),t.JRh(e.name)}}function gt(i,c){if(1&i&&(t.j41(0,"div",8),t.nrm(1,"div",10),t.nI1(2,"safeHtml"),t.Z7z(3,mt,3,2,"div",null,t.fX1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("innerHTML",t.bMT(2,1,e.help),t.npT),t.R7$(2),t.Dyx(e.links)}}function ft(i,c){if(1&i&&(t.j41(0,"div")(1,"a",11),t.EFF(2),t.k0s()()),2&i){const e=c.$implicit;t.R7$(),t.Y8G("href",e.url,t.B4B),t.R7$(),t.JRh(e.name)}}function Ct(i,c){if(1&i&&(t.j41(0,"div",13),t.nrm(1,"div",10),t.nI1(2,"safeHtml"),t.Z7z(3,ft,3,2,"div",null,t.fX1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("innerHTML",t.bMT(2,1,e.help),t.npT),t.R7$(2),t.Dyx(e.links)}}function bt(i,c){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",4)(2,"div",12),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(7);return t.Njj(s.addSnippet(o.snip))}),t.EFF(3),t.k0s(),t.j41(4,"mat-icon",7),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(7);return t.Njj(s.toggleInfo(o.key))}),t.EFF(5,"info"),t.k0s()(),t.DNE(6,Ct,5,3,"div",13),t.k0s()}if(2&i){const e=c.$implicit,n=t.XpG(7);t.R7$(2),t.Y8G("tippy",e.snip),t.R7$(),t.SpI(" ",e.label," "),t.R7$(3),t.vxM(6,n.toggledInfos.includes(e.key)?6:-1)}}function vt(i,c){if(1&i&&(t.Z7z(0,bt,7,3,"div",null,t.fX1),t.nI1(2,"objectToArray")),2&i){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.more))}}function yt(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(5);return t.Njj(s.addSnippet(o.snip))}),t.EFF(3),t.k0s(),t.DNE(4,ht,2,1,"mat-icon",6),t.j41(5,"mat-icon",7),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(5);return t.Njj(s.toggleInfo(o.key))}),t.EFF(6,"info"),t.k0s()(),t.DNE(7,gt,5,3,"div",8)(8,vt,3,2),t.k0s()}if(2&i){const e=c.$implicit,n=t.XpG(5);t.R7$(2),t.Y8G("tippy",e.snip),t.R7$(),t.SpI(" ",e.label," "),t.R7$(),t.vxM(4,e.more?4:-1),t.R7$(3),t.vxM(7,n.toggledInfos.includes(e.key)?7:-1),t.R7$(),t.vxM(8,n.toggledMores.includes(e.key)?8:-1)}}function xt(i,c){if(1&i&&(t.Z7z(0,yt,9,5,"div",3,t.fX1),t.nI1(2,"objectToArray")),2&i){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.value))}}function St(i,c){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",2),t.nI1(2,"translate"),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.toggleFolder(o.key))}),t.j41(3,"mat-icon"),t.EFF(4),t.k0s(),t.j41(5,"span"),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.DNE(8,xt,3,2),t.k0s()}if(2&i){const e=c.$implicit,n=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.Y8G("tippy",t.bMT(2,4,"SourceEditorSnippets."+n.key+"."+e.key+".Help")),t.R7$(3),t.SpI(" ",o.toggledFolders.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(t.bMT(7,6,"SourceEditorSnippets."+n.key+"."+e.key+".Title")),t.R7$(2),t.vxM(8,o.toggledFolders.includes(e.key)?8:-1)}}function Ft(i,c){if(1&i&&(t.Z7z(0,St,9,8,"div",null,t.fX1),t.nI1(2,"keyvalue")),2&i){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.value))}}function Tt(i,c){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",1),t.nI1(2,"translate"),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.toggleSection(o.key))}),t.j41(3,"mat-icon"),t.EFF(4),t.k0s(),t.j41(5,"span"),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.DNE(8,Ft,3,2),t.k0s()}if(2&i){const e=c.$implicit,n=t.XpG();t.R7$(),t.Y8G("tippy",t.bMT(2,4,"SourceEditorSnippets."+e.key+".Help")),t.R7$(3),t.SpI(" ",n.toggledSections.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(t.bMT(7,6,"SourceEditorSnippets."+e.key+".Title")),t.R7$(2),t.vxM(8,n.toggledSections.includes(e.key)?8:-1)}}let Et=(()=>{class i{constructor(){this.insertSnippet=new t.bkB,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){G.f.toggleInArray(e,this.toggledSections)}toggleFolder(e){G.f.toggleInArray(e,this.toggledFolders)}toggleInfo(e){G.f.toggleInArray(e,this.toggledInfos)}toggleMore(e){G.f.toggleInArray(e,this.toggledMores)}static#t=this.\u0275fac=function(n){return new(n||i)};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},standalone:!0,features:[t.aNF],decls:4,vars:2,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],["tippyShowDelay","750",1,"collapsible-header","section",3,"click","tippy"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"click","tippy"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"click","tippy"],["tippy","Show More","tippyShowDelay","750"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],[1,"snippet-help"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"click","tippy"],[1,"snippet-help","snippet-help-more"]],template:function(n,o){1&n&&(t.j41(0,"div",0),t.Z7z(1,Tt,9,8,"div",null,t.fX1),t.nI1(3,"keyvalue"),t.k0s()),2&n&&(t.R7$(),t.Dyx(t.bMT(3,0,o.snippets)))},dependencies:[D.m_,D.An,Z.pZ,Z.r6,A.lG,U.h,U.D9,_t,L.c,z.e,ut.$],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]})}return i})();function J(i){if(!i)return[];const c=[];for(const e of i){let n=c;const o=e.Path.split("/"),s=o[o.length-1];let r="";for(let p=0;p<o.length;p++){const l=o[p];r+=p?`/${l}`:l;const _=n.find(h=>h.name===l);if(_)n=_.children;else{const h={depth:p,name:l,pathFromRoot:r,isShared:e.Shared,isFolder:l!==s,...l!==s&&{children:[]}};n.push(h),n=h.children}}}return c}let Ot=(()=>{class i{transform(e){return null==e||e.sort((n,o)=>n.isFolder<o.isFolder?1:n.isFolder>o.isFolder?-1:0),e}static#t=this.\u0275fac=function(n){return new(n||i)};static#n=this.\u0275pipe=t.EJ8({name:"sortItems",type:i,pure:!0,standalone:!0})}return i})(),It=(()=>{class i{constructor(e){this.sanitizer=e}transform(e,n){let o;return o=n?8*e:0===e?8:8*e+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${o}px;`)}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(f.up,16))};static#n=this.\u0275pipe=t.EJ8({name:"depthPadding",type:i,pure:!0,standalone:!0})}return i})();var V=a(1034);const Q=i=>({item:i}),kt=i=>({active:i}),Pt=i=>({"app-shared-root":i});function wt(i,c){1&i&&t.eu8(0)}function jt(i,c){if(1&i&&t.DNE(0,wt,1,0,"ng-container",6),2&i){const e=c.$implicit;t.XpG();const n=t.sdS(6);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,Q,e))}}function Rt(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",8),t.nI1(1,"depthPadding"),t.bIt("click",function(){t.eBV(e);const o=t.XpG().item,s=t.XpG();return t.Njj(s.openTemplate(o.pathFromRoot,o.isShared))}),t.EFF(2),t.k0s()}if(2&i){const e=t.XpG().item,n=t.XpG();t.Aen(t.i5U(1,5,e.depth,e.isFolder)),t.Y8G("ngClass",t.eq3(8,kt,n.isToggled(e.pathFromRoot,e.isShared)))("tippy",e.name),t.R7$(2),t.SpI(" ",e.name," ")}}function Dt(i,c){1&i&&t.eu8(0)}function $t(i,c){if(1&i&&t.DNE(0,Dt,1,0,"ng-container",6),2&i){const e=c.$implicit;t.XpG(4);const n=t.sdS(6);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,Q,e))}}function At(i,c){if(1&i&&(t.Z7z(0,$t,1,4,"ng-container",null,t.fX1),t.nI1(2,"sortItems")),2&i){const e=t.XpG(2).item;t.Dyx(t.bMT(2,0,e.children))}}function Gt(i,c){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",9),t.nI1(2,"depthPadding"),t.bIt("click",function(){t.eBV(e);const o=t.XpG().item,s=t.XpG();return t.Njj(s.toggleItem(o.pathFromRoot,o.isShared))}),t.j41(3,"div",10)(4,"mat-icon"),t.EFF(5),t.k0s(),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"div",11),t.bIt("click",function(){t.eBV(e);const o=t.XpG().item,s=t.XpG();return t.Njj(s.addFile(o.pathFromRoot,o.isShared))}),t.j41(9,"mat-icon"),t.EFF(10,"add"),t.k0s()()(),t.DNE(11,At,3,2),t.k0s()}if(2&i){const e=t.XpG().item,n=t.XpG();t.R7$(),t.Aen(t.i5U(2,7,e.depth+1,e.isFolder)),t.Y8G("ngClass",t.eq3(10,Pt,e.depth<0)),t.R7$(2),t.Y8G("tippy",e.name),t.R7$(2),t.SpI(" ",n.isToggled(e.pathFromRoot,e.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(e.name),t.R7$(4),t.vxM(11,n.isToggled(e.pathFromRoot,e.isShared)?11:-1)}}function Vt(i,c){if(1&i&&t.DNE(0,Rt,3,10,"div",7)(1,Gt,12,12,"div"),2&i){const e=c.item;t.vxM(0,e.isFolder?-1:0),t.R7$(),t.vxM(1,e.isFolder?1:-1)}}let Bt=(()=>{class i{constructor(){this.openView=new t.bkB,this.createTemplate=new t.bkB,this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){if(null!=e.templates&&(this.tree=function Mt(i){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:J(i.filter(e=>!e.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:J(i.filter(e=>e.Shared))}]}(this.templates)),null!=e.view){const n=e.view?.previousValue;n&&this.toggleItem(n.FileName,n.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}isToggled(e,n){return(n?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,n){this.openView.emit({key:e,shared:n})}toggleItem(e,n){G.f.toggleInArray(e,n?this.toggledItemsShared:this.toggledItemsApp)}addFile(e,n){this.createTemplate.emit({folder:e,isShared:n})}showFileInTree(e,n){if(null==e)return;const o=n?this.toggledItemsShared:this.toggledItemsApp;if(o.includes(e))return;const s=["",...e.split("/")];let r="";for(const p of s)r=r?`${r}/${p}`:p,!o.includes(r)&&this.toggleItem(r,n)}static#t=this.\u0275fac=function(n){return new(n||i)};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},standalone:!0,features:[t.OA$,t.aNF],decls:19,vars:3,consts:[["fileOrFolder",""],["menu","matMenu"],[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file","tippyPlacement","left",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tippyShowDelay","750",1,"file",3,"style","ngClass","tippy"],["tippyShowDelay","750",1,"file",3,"click","ngClass","tippy"],[1,"folder-name-wrapper",3,"click","ngClass"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",2)(1,"div"),t.Z7z(2,jt,1,4,"ng-container",null,t.fX1),t.nI1(4,"sortItems"),t.DNE(5,Vt,2,2,"ng-template",null,0,t.C5r),t.k0s(),t.j41(7,"div",3)(8,"button",4)(9,"mat-icon"),t.EFF(10,"add"),t.k0s()(),t.j41(11,"mat-menu",null,1)(13,"button",5),t.bIt("click",function(){return t.eBV(s),t.Njj(o.addFile("",!1))}),t.j41(14,"span"),t.EFF(15,"App"),t.k0s()(),t.j41(16,"button",5),t.bIt("click",function(){return t.eBV(s),t.Njj(o.addFile("",!0))}),t.j41(17,"span"),t.EFF(18,"Shared (global)"),t.k0s()()()()()}if(2&n){const s=t.sdS(12);t.R7$(2),t.Dyx(t.bMT(4,1,o.tree)),t.R7$(6),t.Y8G("matMenuTriggerFor",s)}},dependencies:[A.T3,A.YU,D.m_,D.An,E.Hl,E.iY,V.Cn,V.kk,V.fb,V.Cp,It,Ot,L.c,z.e],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]})}return i})();var T=a(3826),Xt=a(5699),K=a(5437),Nt=a(2760),Ut=a(2159),Lt=a(7941);const zt=i=>({"sxc-dark":i}),q=i=>({active:i}),Wt=(i,c,e)=>({active:i,modified:c,loading:e});function Kt(i,c){1&i&&(t.j41(0,"mat-icon",13),t.EFF(1,"share"),t.k0s())}function Ht(i,c){1&i&&(t.j41(0,"mat-icon",16),t.EFF(1,"circle"),t.k0s())}function Yt(i,c){1&i&&t.nrm(0,"mat-spinner",17)}function Zt(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",11),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.openView(o.viewKey))}),t.j41(1,"div",12),t.DNE(2,Kt,2,0,"mat-icon",13),t.j41(3,"span",14),t.EFF(4),t.k0s()(),t.j41(5,"div",15),t.DNE(6,Ht,2,0,"mat-icon",16)(7,Yt,1,0,"mat-spinner",17),t.j41(8,"mat-icon",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.closeEditor(o.viewKey))}),t.EFF(9,"close"),t.k0s()()()}if(2&i){const e=c.$implicit;t.Y8G("ngClass",t.sMw(6,Wt,e.isActive,e.isModified,e.isLoading)),t.R7$(),t.Y8G("tippy",e.label),t.R7$(),t.vxM(2,e.viewKey.shared?2:-1),t.R7$(2),t.JRh(e.label),t.R7$(2),t.vxM(6,e.isModified?6:-1),t.R7$(),t.vxM(7,e.isLoading?7:-1)}}function Jt(i,c){if(1&i&&(t.j41(0,"div",7),t.Z7z(1,Zt,10,10,"div",10,t.fX1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Dyx(e.tabs)}}function Qt(i,c){if(1&i){const e=t.RV6();t.j41(0,"app-monaco-editor",19),t.bIt("valueChanged",function(o){t.eBV(e);const s=t.XpG(),r=t.XpG();return t.Njj(r.codeChanged(o,s.viewKey))}),t.k0s()}if(2&i){const e=t.XpG(),n=t.XpG();t.Y8G("filename",e.view.FileName)("value",e.view.Code)("options",n.monacoOptions)("snippets",e.editorSnipps)("tooltips",e.tooltips)("autoFocus",!0)}}function qt(i,c){if(1&i){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.save())}),t.j41(1,"mat-icon"),t.EFF(2,"done"),t.k0s()()}}function te(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleExplorer(o.Explorers.Templates))}),t.j41(3,"mat-icon"),t.EFF(4,"file_copy"),t.k0s()(),t.j41(5,"div",3),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleExplorer(o.Explorers.Snippets))}),t.j41(6,"mat-icon"),t.EFF(7,"code"),t.k0s()()(),t.j41(8,"app-code-templates",4),t.bIt("openView",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.openView(o))})("createTemplate",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.createTemplate(o))}),t.k0s(),t.j41(9,"app-code-snippets",5),t.bIt("insertSnippet",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.insertSnippet(o))}),t.k0s(),t.j41(10,"div",6),t.DNE(11,Jt,3,0,"div",7)(12,Qt,1,6,"app-monaco-editor",8),t.k0s(),t.DNE(13,qt,3,0,"button",9),t.k0s()}if(2&i){const e=c,n=t.XpG();t.Y8G("ngClass",t.eq3(11,zt,"2sxc-dark"===n.monacoOptions.theme)),t.R7$(2),t.Y8G("ngClass",t.eq3(13,q,n.activeExplorer===n.Explorers.Templates)),t.R7$(3),t.Y8G("ngClass",t.eq3(15,q,n.activeExplorer===n.Explorers.Snippets)),t.R7$(3),t.Y8G("hidden",n.activeExplorer!==n.Explorers.Templates)("view",e.view)("templates",e.templates),t.R7$(),t.Y8G("hidden",n.activeExplorer!==n.Explorers.Snippets)("snippets",e.explorerSnipps),t.R7$(2),t.vxM(11,e.tabs.length>0?11:-1),t.R7$(),t.vxM(12,e.view?12:-1),t.R7$(),t.vxM(13,e.activeView?13:-1)}}let ee=(()=>{class i extends I.${#t;#n;#a;#s;#o;#i;#e;#r;constructor(e,n,o,s,r,p){super(),this.context=e,this.route=n,this.snackBar=o,this.zone=s,this.dialog=r,this.viewContainerRef=p,this.Explorers=H,this.activeExplorer=H.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2,fixedOverflowWidgets:!0},this.#t=(0,K.d)(dt.F),this.#n=(0,K.d)(ct),this.#a=(0,K.d)(f.hE),this.#s=new O.t([]),this.#e=new O.t([]),this.context.init(this.route);const l=JSON.parse(sessionStorage.getItem(d.Ul)),_="true"===sessionStorage.getItem(d.P3);l.forEach(h=>{h.Path.startsWith("/")&&(h.Path=h.Path.substring(1)),h.IsShared??=_}),this.#r=l}ngOnInit(){const e=this.#r.map(n=>({key:n.EntityId?.toString()??n.Path,shared:n.IsShared}));this.#i=new O.t(e),this.#o=new O.t(e[0]),this.#p(),this.#t.getAll().subscribe(n=>this.#s.next(n)),this.subscriptions.add((0,C.z)([this.#s,this.#i]).subscribe(([n,o])=>{if(0===n.length)return;let s=this.#e.value;const r=o.filter(p=>!s.some(l=>T.a.objectsEqual(l.viewKey,p)));0!==r.length&&((0,m.p)(r.map(p=>{const l={viewKey:p};s=[...s,l];const _=this.#t.get(p.key,p.shared,this.#r).pipe((0,P.u)()),h=_.pipe((0,F.n)(j=>this.#n.getSnippets(j))),M=_.pipe((0,F.n)(j=>this.#n.getTooltips(j.Extension.substring(1))));return(0,m.p)([(0,y.of)(p),_,h,M])})).subscribe(p=>{let l=this.#e.value;p.forEach(([_,h,M,j])=>{const w=l.findIndex(R=>T.a.objectsEqual(R.viewKey,_));if(w<0)return;const B={viewKey:_,view:h,explorerSnipps:M.sets,editorSnipps:M.list,tooltips:j,savedCode:h.Code};l=[...l.slice(0,w),B,...l.slice(w+1)],this.#l(_,h,n)}),this.#e.next(l)}),this.#e.next(s))})),this.subscriptions.add((0,C.z)([this.#o,this.#e]).subscribe(([n,o])=>{const s=o.find(_=>T.a.objectsEqual(_.viewKey,n)),r="Code Editor",p=null==s?r:`${s.view?.FileName} - ${r}`;p!==this.#a.getTitle()&&this.#a.setTitle(p)})),this.viewModel$=(0,C.z)([this.#s,this.#o,this.#i,this.#e]).pipe((0,S.T)(([n,o,s,r])=>{const p=s.map(_=>{const h=r.find(j=>T.a.objectsEqual(j.viewKey,_));return{viewKey:_,label:h?.view?.FileName??_.key,isActive:T.a.objectsEqual(_,o),isModified:h?.view?.Code!==h?.savedCode,isLoading:null==h?.view}}),l=r.find(_=>T.a.objectsEqual(_.viewKey,o));return{activeView:o,tabs:p,viewKey:l?.viewKey,view:l?.view,templates:n,explorerSnipps:l?.explorerSnipps,editorSnipps:l?.editorSnipps,tooltips:l?.tooltips}}))}ngOnDestroy(){this.#s.complete(),this.#o.complete(),this.#i.complete(),this.#e.complete(),super.ngOnDestroy()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){const n={folder:e.folder,global:e.isShared,purpose:"api"===e.folder||e.folder?.startsWith("api/")?"Api":void 0};this.dialog.open(v.g,{autoFocus:!1,data:n,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{s&&this.#t.create(s.name,e.isShared,s.templateKey).subscribe(()=>{this.#t.getAll().subscribe(r=>{this.#s.next(r)})})})}insertSnippet(e){this.monacoEditorRef?.insertSnippet(e)}codeChanged(e,n){let o=this.#e.value;const s=o.findIndex(l=>T.a.objectsEqual(l.viewKey,n)),r=o[s],p={...r,view:{...r.view,Code:e}};o=[...o.slice(0,s),p,...o.slice(s+1)],this.#e.next(o)}openView(e){e=this.#e.value.find(s=>!T.a.objectsEqual(s.viewKey,e)&&s.view?.FileName===e.key&&s.view?.IsShared===e.shared)?.viewKey??e;const n=this.#o.value;T.a.objectsEqual(n,e)||this.#o.next(e);const o=this.#i.value;if(!o.some(s=>T.a.objectsEqual(s,e))){const s=[...o,e];this.#i.next(s)}}closeEditor(e){const n=this.#i.value,o=n.filter(r=>!T.a.objectsEqual(r,e)),s=this.#o.value;if(T.a.objectsEqual(s,e)){const r=n[n.findIndex(p=>T.a.objectsEqual(p,s))-1]??o[0];this.#o.next(r)}this.#i.next(o)}save(e){e??=this.#o.value;const n=this.#e.value.find(s=>T.a.objectsEqual(s.viewKey,e));if(null==n?.view)return;this.snackBar.open("Saving...");const o=n.view.Code;this.#t.save(e.key,e.shared,n.view,this.#r).subscribe({next:s=>{if(!s)return void this.snackBar.open("Failed",null,{duration:2e3});let r=[...this.#e.value];const p=r.findIndex(h=>T.a.objectsEqual(h.viewKey,e));if(p<0)return;const _={...r[p],savedCode:o};r=[...r.slice(0,p),_,...r.slice(p+1)],this.#e.next(r),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>this.snackBar.open("Failed",null,{duration:2e3})})}#l(e,n,o){const s=n.FileName,r=s.indexOf("/")>-1?s.lastIndexOf("/")+1:0,p=0===r?"":s.substring(0,r),l=s.substring(r),h=l.substring(0,l.length-n.Extension.length)+".code"+n.Extension,M=o.find(w=>w.Path===p+h&&w.Shared===n.IsShared),j=o.filter(w=>w.Path.endsWith(l)&&w.Shared===n.IsShared).length-1;if(M||j){const w={fileName:l,codeFile:M?.Path,edition:this.#r.find(R=>R.EntityId?.toString()===e.key&&R.IsShared===n.IsShared&&R.Path===n.FileName)?.Edition,otherEditions:j,openCodeBehind:!1},B=this.snackBar.openFromComponent(ot,{data:w,duration:1e4});B.onAction().subscribe(()=>{B.containerInstance.snackBarConfig.data.openCodeBehind&&this.openView({key:M?.Path,shared:M?.Shared})})}}#p(){this.zone.runOutsideAngular(()=>{this.subscriptions.add((0,b.R)(window,"beforeunload").subscribe(e=>{this.#e.value.some(o=>null!=o.view&&o.view.Code!==o.savedCode)&&(e.preventDefault(),e.returnValue="")})),this.subscriptions.add((0,b.R)(window,"keydown").subscribe(e=>{(0,Nt.J)(e)&&(e.preventDefault(),this.zone.run(()=>this.save()))}))})}static#c=this.\u0275fac=function(n){return new(n||i)(t.rXU(g.o),t.rXU(Ut.nX),t.rXU(u.UG),t.rXU(t.SKi),t.rXU(Lt.bZ),t.rXU(t.c1b))};static#d=this.\u0275cmp=t.VBU({type:i,selectors:[["app-code-editor"]],viewQuery:function(n,o){if(1&n&&t.GBs(x.K,5),2&n){let s;t.mGM(s=t.lsd())&&(o.monacoEditorRef=s.first)}},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"click","ngClass"],["tippy","Snippets",1,"button",3,"click","ngClass"],[3,"openView","createTemplate","hidden","view","templates"],[3,"insertSnippet","hidden","snippets"],[1,"editor-group"],[1,"tabs-container","fancy-scrollbar-dark"],[3,"filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S"],[1,"tab",3,"ngClass"],[1,"tab",3,"click","ngClass"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],[1,"icon-shared"],[1,"tab-label"],[1,"tab-actions-container"],["fontSet","material-icons",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[3,"valueChanged","filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(n,o){if(1&n&&(t.DNE(0,te,14,17,"div",0),t.nI1(1,"async")),2&n){let s;t.vxM(0,(s=t.bMT(1,1,o.viewModel$))?0:-1,s)}},dependencies:[A.YU,D.m_,D.An,Bt,Et,Y.D6,Y.LG,x.K,E.Hl,E.Sr,A.Jj,L.c,z.e,Xt.V],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid rgb(37,37,38);background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-mdc-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]})}return i})()},5959:($,k,a)=>{a.d(k,{h6:()=>v,zZ:()=>S});var f=a(271),O=a(7693),C=a(8873),m=a(7580),P=a(6443),F=a(4821);const y="admin/field/",S="admin/field/all",b="admin/field/GetSharedFields";let v=(()=>{class x{constructor(d,g,u){this.http=d,this.context=g,this.dnnContext=u}apiUrl(d){return this.dnnContext.$2sxc.http.apiUrl(d)}typeListRetrieve(){return this.http.get(this.apiUrl(y+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(y+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,f.T)(d=>d.map(u=>({dataType:u.Type.substring(0,u.Type.indexOf("-")),inputType:u.Type,label:u.Label,description:u.Description,isDefault:u.IsDefault,isObsolete:u.IsObsolete,isRecommended:u.IsRecommended,obsoleteMessage:u.ObsoleteMessage,icon:u.IsDefault?"star":u.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(y+"ReservedNames"))}getFields(d){return this.http.get(this.apiUrl(S),{params:{appid:this.context.appId.toString(),staticName:d}}).pipe((0,f.T)(g=>{if(g)for(const u of g){if(!u.Metadata)continue;const E=u.Metadata;E.merged={...E.All,...E[u.Type],...E[u.InputType]}}return g}))}getShareableFields(){return this.http.get(this.apiUrl(b),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(d){return this.http.get(this.apiUrl(b),{params:{appid:this.context.appId.toString(),attributeId:d.toString()}})}addInheritedField(d,g,u,E){return this.http.post(this.apiUrl(y+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:d.toString(),SourceType:g,SourceField:u,name:E}})}share(d,g=!0){return this.http.post(this.apiUrl(y+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:d.toString(),share:g}})}inherit(d,g){return this.http.post(this.apiUrl(y+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:d.toString(),inheritMetadataOf:g}})}reOrder(d,g){return this.http.post(this.apiUrl(y+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:g.Id.toString(),order:JSON.stringify(d)}})}setTitle(d,g){return this.http.post(this.apiUrl(O.X+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:g.Id.toString(),attributeId:d.Id.toString()}})}rename(d,g,u){return this.http.post(this.apiUrl(y+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:g.toString(),attributeId:d.toString(),newName:u}})}delete(d,g){if(d.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(y+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:g.Id.toString(),attributeId:d.Id.toString()}})}add(d,g){return this.http.post(this.apiUrl(y+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:g.toString(),Id:d.Id.toString(),Type:d.Type,InputType:d.InputType,StaticName:d.StaticName,IsTitle:d.IsTitle.toString(),Index:d.SortOrder.toString()}})}updateInputType(d,g,u){return this.http.post(this.apiUrl(y+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:d.toString(),field:g,inputType:u}})}static#t=this.\u0275fac=function(g){return new(g||x)(m.KVO(P.Qq),m.KVO(C.o),m.KVO(F.ob))};static#n=this.\u0275prov=m.jDH({token:x,factory:x.\u0275fac})}return x})()},3826:($,k,a)=>{a.d(k,{a:()=>f});class f{static boolEquals(C,m){return C===m}static stringEquals(C,m){return C===m}static valueEquals(C,m){return C===m}static objectsEqual(C,m){if(null==C||null==m)return C===m;const P=C,F=m,y=Object.keys(P),S=Object.keys(F);return y.length===S.length&&y.every(v=>!!F.hasOwnProperty(v)&&P[v]===F[v])}static arraysEqual(C,m){return null==C||null==m?C===m:C.length===m.length&&C.every((F,y)=>C[y]===m[y])}static distinct(C,m,P){return P.indexOf(C)===m}}},9431:($,k,a)=>{a.d(k,{B:()=>P});var f=a(7580),O=a(9074),C=a(8172),m=a(3347);let P=(()=>{class F{constructor(S){this.snackBar=S,this.debugState=(0,f.vPA)(null),this.isDebug=(0,f.EWP)(()=>!!this.debugState()?.allowDebugMode&&!!this.debugState()?.debugEnabled),this.debugEnabled$=(0,O.br)(this.isDebug);const b={id:0,debugEnabled:"true"===sessionStorage.getItem(C.tn),allowDebugMode:!1};this.debugState.set(b)}allowDebug(S){const b=this.debugState();if(b.allowDebugMode===S)return;const v={...b,allowDebugMode:S};this.debugState.set(v)}toggleDebugEnabled(){const S=this.debugState();if(!S.allowDebugMode)return void this.snackBar.open("You do not have permissions to enter developer mode",null,{duration:3e3});const b={...S,debugEnabled:!S.debugEnabled};this.debugState.set(b),this.snackBar.open(b.debugEnabled?"developer mode on":"developer mode off",null,{duration:3e3})}static#t=this.\u0275fac=function(b){return new(b||F)(f.KVO(m.UG))};static#n=this.\u0275prov=f.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}return F})()},4979:($,k,a)=>{a.d(k,{V:()=>C});var f=a(7092),O=a(7580);let C=(()=>{class m{constructor(){this.subscriptions=new f.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(y){return new(y||m)};static#n=this.\u0275prov=O.jDH({token:m,factory:m.\u0275fac})}return m})()},9074:($,k,a)=>{a.d(k,{br:()=>y,ot:()=>S});var f=a(7580),O=a(6042);function y(b,v){!v?.injector&&(0,f.Af3)(y);const x=v?.injector??(0,f.WQX)(f.zZn),I=new O.m(1),d=(0,f.QZP)(()=>{let g;try{g=b()}catch(u){return void(0,f.O8t)(()=>I.error(u))}(0,f.O8t)(()=>I.next(g))},{injector:x,manualCleanup:!0});return x.get(f.abz).onDestroy(()=>{d.destroy(),I.complete()}),I.asObservable()}function S(b,v){const x=!v?.manualCleanup;x&&!v?.injector&&(0,f.Af3)(S);const I=x?v?.injector?.get(f.abz)??(0,f.WQX)(f.abz):null;let d;d=(0,f.vPA)(v?.requireSync?{kind:0}:{kind:1,value:v?.initialValue});const g=b.subscribe({next:u=>d.set({kind:1,value:u}),error:u=>{if(v?.rejectErrors)throw u;d.set({kind:2,error:u})}});return I?.onDestroy(g.unsubscribe.bind(g)),(0,f.EWP)(()=>{const u=d();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new f.wOt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_code-editor_code-editor_component_ts-projects_eav-ui_src_app_shared_s-88dd92.09a3172062269a2a.js.map