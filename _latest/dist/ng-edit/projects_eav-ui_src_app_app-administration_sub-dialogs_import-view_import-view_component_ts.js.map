{"version":3,"file":"projects_eav-ui_src_app_app-administration_sub-dialogs_import-view_import-view_component_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/app-administration/services/views.service.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/import-view/import-view.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/import-view/import-view.component.html"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { ViewUsage } from '../models/view-usage.model';\r\nimport { View } from '../models/view.model';\r\n\r\nconst webApiViewRoot = 'admin/view/';\r\nconst webApiViews = webApiViewRoot + 'all';\r\nconst webApiViewDelete = webApiViewRoot + 'delete';\r\nconst webApiViewImport = webApiViewRoot + 'import';\r\nconst webApiViewPolymorph = webApiViewRoot + 'polymorphism';\r\nconst webApiViewUsage = webApiViewRoot + 'usage';\r\n\r\n@Injectable()\r\nexport class ViewsService extends HttpServiceBase {\r\n\r\n  getAll() {\r\n    return this.getHttpApiUrl<View[]>(webApiViews, {\r\n      params: { appId: this.appId }\r\n    });\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.getHttpApiUrl<boolean>(webApiViewDelete, {\r\n      params: { appId: this.appId, Id: id.toString() },\r\n    });\r\n  }\r\n\r\n  import(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<FileUploadResult>(this.apiUrl(webApiViewImport), formData, {\r\n      params: { appId: this.appId, zoneId: this.zoneId }\r\n    });\r\n  }\r\n\r\n  export(id: number) {\r\n    const url = this.apiUrl(webApiViewRoot + 'json')\r\n      + '?appId=' + this.appId\r\n      + '&viewId=' + id;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  getPolymorphism() {\r\n    return this.getHttpApiUrl<Polymorphism>(webApiViewPolymorph, {\r\n      params: { appId: this.appId }\r\n    });\r\n  }\r\n\r\n  getUsage(guid: string) {\r\n    return this.getHttpApiUrl<ViewUsage[]>(webApiViewUsage, {\r\n      params: { appId: this.appId, guid }\r\n    });\r\n  }\r\n}\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { transient } from '../../../../../../core';\r\nimport { FileUploadDialogComponent, FileUploadDialogData, UploadTypes } from '../../../shared/components/file-upload-dialog';\r\nimport { ViewsService } from '../../services/views.service';\r\n\r\n@Component({\r\n  selector: 'app-import-view',\r\n  templateUrl: './import-view.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    FileUploadDialogComponent,\r\n  ],\r\n})\r\nexport class ImportViewComponent {\r\n\r\n  uploadType = UploadTypes.View;\r\n\r\n  private viewsService = transient(ViewsService);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) dialogData: FileUploadDialogData,\r\n  ) {\r\n    dialogData.title ??= `Import View`;\r\n    dialogData.description ??= `Select a View file (json) from your computer to import.`;\r\n    dialogData.allowedFileTypes ??= 'json';\r\n    dialogData.upload$ ??= (files) => this.viewsService.import(files[0]);\r\n  }\r\n\r\n}\r\n","<app-file-upload-dialog [uploadType]=\"uploadType\"></app-file-upload-dialog>"],"names":["HttpServiceBase","webApiViewRoot","webApiViews","webApiViewDelete","webApiViewImport","webApiViewPolymorph","webApiViewUsage","ViewsService","getAll","getHttpApiUrl","params","appId","delete","id","Id","toString","import","file","formData","FormData","append","http","post","apiUrl","zoneId","export","url","window","open","getPolymorphism","getUsage","guid","__ngFactoryType__","factory","ɵfac","MAT_DIALOG_DATA","transient","FileUploadDialogComponent","UploadTypes","ImportViewComponent","constructor","dialogData","uploadType","View","viewsService","title","description","allowedFileTypes","upload$","files","i0","ɵɵdirectiveInject","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ImportViewComponent_Template","rf","ctx","ɵɵelement","ɵɵproperty","encapsulation"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}