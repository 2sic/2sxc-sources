{"version":3,"file":"projects_eav-ui_src_app_app-administration_app-administration-nav_app-administration-nav_comp-1b3e30.163a168818305ea3.js","mappings":"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","names":["AppScopes","App","Site","Global","SafeResourceUrlPipe","constructor","sanitizer","this","transform","resourceUrl","bypassSecurityTrustResourceUrl","static","t","i0","i1","core","Yjl","pure","GettingStartedComponent","ngOnInit","Xpm","selectors","inputs","gettingStartedUrl","decls","vars","consts","template","rf","ctx","_r9","ctx_r8","createOrEditMetadata","_r11","ctx_r10","openMetadata","ctx_r2","contentType","Metadata","length","ctx_r3","_r13","ctx_r12","openPermissions","ctx_r4","Permissions","Count","ctx_r5","_r15","ctx_r14","editContentType","ctx_r16","openRestApi","ctx_r17","exportType","ctx_r18","openDataExport","ctx_r19","openDataImport","ctx_r20","deleteContentType","ctx_r7","EditInfo","DisableRename","DisableDelete","DataActionsComponent","agInit","params","data","enablePermissions","enablePermissionsGetter","guidRegex","test","StaticName","refresh","onCreateOrEditMetadata","onOpenPermissions","onEdit","onOpenMetadata","onOpenRestApi","onTypeExport","onOpenDataExport","onOpenDataImport","onDelete","DataActionsComponent_Conditional_1_Template","DataActionsComponent_Conditional_2_Template","DataActionsComponent_Conditional_3_Template","DataActionsComponent_Conditional_4_Template","DataActionsComponent_Conditional_5_Template","DataActionsComponent_Conditional_6_Template","DataActionsComponent_ng_template_12_Template","DisableEdit","Properties","DisableMetadata","_r6","DataFieldsComponent","value","tooltip","ReadOnly","ReadOnlyMessage","SharedDefId","icon","editFields","onEditFields","DataItemsComponent","showItems","onShowItems","addItem","onAddItem","scopeOption_r4","name","_r10","ctx_r9","createGhost","$event","_r12","ctx_r11","filesDropped","ctx_r13","changeScope","DataComponent_Conditional_0_For_7_Template","importType","DataComponent_Conditional_0_Conditional_15_Template","ctx_r15","contentTypes","ctx_r0","gridOptions","scope","scopeOptions","dropdownInsertValue","debugEnabled","DataComponent","BaseComponent","router","route","contentTypesService","globalConfigService","snackBar","contentExportService","super","contentTypes$","BehaviorSubject","undefined","scope$","scopeOptions$","buildGridOptions","viewModel$","combineLatest","getDebugEnabled$","pipe","map","fetchScopes","refreshScopeOnRouteChange","subscription","add","refreshOnChildClosedDeep","subscribe","fetchContentTypes","ngOnDestroy","complete","files","importFile","substring","lastIndexOf","toLocaleLowerCase","from","toString","take","fileString","contentTypeName","split","find","ct","Name","open","duration","navigate","relativeTo","firstChild","state","showContentItems","retrieveContentTypes","_compareLabel","Label","replace","RegExp","next","eavConstants","scopes","default","getScopes","newScopes","forEach","scopeOption","existing","push","sourceName","window","prompt","res","newScope","formUrl","convertFormToUrl","items","ContentTypeName","EntityId","Id","For","Target","metadata","target","TargetType","targetType","String","Prefill","Description","url","GoToMetadata","getUrlContentType","GoToDevRest","getUrlData","exportJson","GoToPermissions","confirm","delete","result","events","filter","event","NavigationEnd","snapshot","paramMap","get","startWith","distinctUntilChanged","option","includes","defaultGridOptions","columnDefs","headerName","field","width","headerClass","sortable","cellClass","valueGetter","cellRenderer","IdFieldComponent","cellRendererParams","tooltipGetter","flex","minWidth","sort","onCellClicked","comparator","valueA","valueB","nodeA","nodeB","isInverted","localeCompare","Items","Fields","pinned","i2","i3","i4","i5","features","DataComponent_Conditional_0_Template","DataComponent_contFlowTmp","QueryActions","Edit","Rest","Clone","Export","Delete","AgActionsComponent","item","_r7","ctx_r6","do","actions","ctx_r1","_Permissions","_EditInfo","QueriesActionsComponent","getEnablePermissions","QueriesActionsComponent_Conditional_4_Template","QueriesActionsComponent_Conditional_5_Template","QueriesActionsComponent_Conditional_6_Template","QueriesActionsComponent_Conditional_7_Template","QueriesActionsComponent_ng_template_13_Template","_r4","_r3","importQuery","editQuery","queries","QueriesComponent","pipelinesService","dialogService","queries$","fetchQueries","getAll","query","doMenuAction","action","getUrlQuery","Guid","cloneQuery","exportQuery","deleteQuery","TestParameters","pipelineDesigner","testParameters","openVisualQueryDesigner","openQueryDesigner","getUrlEntity","clonePipeline","exportEntity","QueriesComponent_Conditional_0_Template","QueriesComponent_contFlowTmp","openCode","view","cloneView","exportView","deleteView","ViewsActionsComponent","enableCode","enableCodeGetter","onOpenCode","onClone","onExport","ViewsActionsComponent_Conditional_1_Template","ViewsActionsComponent_Conditional_2_Template","ViewsActionsComponent_Conditional_3_Template","ViewsActionsComponent_Conditional_4_Template","ViewsActionsComponent_Conditional_5_Template","ViewsActionsComponent_Conditional_6_Template","ViewsActionsComponent_ng_template_12_Template","ViewsShowComponent","calculateViewType","HasQuery","List","ContentType","ViewsTypeComponent","type","isShared","IsShared","ViewsTypeComponent_Conditional_4_Template","importView","editPolymorphisms","editView","views","appIsInherited","polymorphLogo","polymorphStatus","ViewsComponent","viewsService","views$","polymorphStatus$","fetchTemplates","fetchPolymorphism","getPolymorphism","polymorphism","Resolver","form","appIsGlobal","Location","TypeName","openUsage","openCodeFile","TemplatePath","DuplicateEntity","export","BooleanFilterComponent","IsHidden","Used","ViewNameInUrl","DemoId","DemoTitle","PresentationType","ListContentType","ListPresentationType","ViewsComponent_Conditional_0_Template","ViewsComponent_contFlowTmp","_r5","WebApiActionsComponent","WebApiActionsComponent_Conditional_1_Template","WebApiActionsComponent_Conditional_2_Template","WebApiActionsComponent_ng_template_8_Template","_r2","WebApiTypeComponent","WebApiTypeComponent_Conditional_1_Template","createController","webApis","WebApiComponent","sourceService","dialog","viewContainerRef","webApis$","fetchWebApis","global","CreateFileDialogComponent","autoFocus","folder","purpose","afterClosed","endsWith","fileName","create","templateKey","getWebApis","api","path","getUrlWebApi","WebApiComponent_Conditional_0_Template","WebApiComponent_contFlowTmp","AnalyzeParts","Settings","Resources","vm_r3","copyToClipboard","displayName","version","toSxc","dnn","oqt","AppConfigurationCardComponent_Conditional_0_ng_container_44_Template","edit","_c1","appConfigurationsCount","appMetadataCount","tmp_2_0","icon_r14","label_r15","AppConfigurationCardComponent","contentItemsService","context","appInternalsService","appSettingsInternal$","Subject","appConfiguration","settings","contentItems","contentItem","EntityLists","ToSxcContentApp","MetadataList","DisplayName","Folder","Version","RequiredVersion","RequiredDnnVersion","RequiredOqtaneVersion","fetchSettings","dismiss","text","staticName","Error","getUrlApp","appId","dialogSettings","Context","getAppInternals","app","keyType","x","AppConfigurationCardComponent_Conditional_0_Template","AppConfigurationCardComponent_ng_template_2_Template","AppConfigurationCardComponent_contFlowTmp","AppConfigurationComponent_Conditional_0_Conditional_0_Conditional_1_Template","AppConfigurationComponent_Conditional_0_Conditional_0_Conditional_2_Template","isGlobal","isPrimary","_r25","ctx_r24","systemSettings","SystemSettingsScopes","ctx_r26","fixContentType","customSettings","ctx_r27","systemSettingsCount","customSettingsCount","customSettingsFieldsCount","_r31","ctx_r30","ctx_r32","ctx_r33","AppConfigurationComponent_Conditional_0_Conditional_23_ng_container_14_Template","_r14","_r38","ctx_r37","ctx_r39","ctx_r40","config","AppConfigurationComponent_Conditional_0_Conditional_24_ng_container_14_Template","AppConfigurationComponent_Conditional_0_Conditional_24_ng_container_15_Template","_r16","_r43","ctx_r42","systemResources","ctx_r44","customResources","ctx_r45","systemResourcesCount","customResourcesCount","customResourcesFieldsCount","_r49","ctx_r48","ctx_r50","ctx_r51","AppConfigurationComponent_Conditional_0_Conditional_54_ng_container_14_Template","_r56","ctx_r55","ctx_r57","resources","ctx_r58","AppConfigurationComponent_Conditional_0_Conditional_55_ng_container_14_Template","AppConfigurationComponent_Conditional_0_Conditional_55_ng_container_15_Template","_r61","ctx_r60","openGlobalSettings","_r63","ctx_r62","openSiteSettings","AppConfigurationComponent_Conditional_0_Conditional_118_Conditional_0_Template","AppConfigurationComponent_Conditional_0_Conditional_118_Conditional_1_Template","isApp","AppConfigurationComponent_Conditional_0_Conditional_0_Template","AppConfigurationComponent_Conditional_0_Conditional_22_Template","AppConfigurationComponent_Conditional_0_Conditional_23_Template","AppConfigurationComponent_Conditional_0_Conditional_24_Template","AppConfigurationComponent_Conditional_0_ng_container_27_Template","_r67","ctx_r66","analyze","AppConfigurationComponent_Conditional_0_Conditional_53_Template","AppConfigurationComponent_Conditional_0_Conditional_54_Template","AppConfigurationComponent_Conditional_0_Conditional_55_Template","AppConfigurationComponent_Conditional_0_ng_container_58_Template","ctx_r68","AppConfigurationComponent_Conditional_0_ng_template_64_Template","AppConfigurationComponent_Conditional_0_ng_template_66_Template","AppConfigurationComponent_Conditional_0_ng_container_82_Template","ctx_r69","openLightSpeed","AppConfigurationComponent_Conditional_0_ng_container_100_Template","AppConfigurationComponent_Conditional_0_ng_container_112_Template","ctx_r70","AppConfigurationComponent_Conditional_0_Conditional_118_Template","AppConfigurationComponent_Conditional_0_ng_container_119_Template","ctx_r71","openLanguagePermissions","langPermsEnabled","_c0","lightSpeedEnabled","appLightSpeedCount","_c2","_c3","Enable","AppPermissions","_c5","icon_r72","label_r73","AppConfigurationComponent","importAppPartsService","appDialogConfigService","changeDetectorRef","debugEnabled$","appStateAdvanced","FeaturesService","loadFromService","isEnabled$","FeatureNames","LightSpeed","ContentSecurityPolicy","PermissionsByLanguage","cspEnabled","i","_Type","appMetadata","SettingsSystem","SettingsEntityScope","AppSettings","FieldAll","ResourcesSystem","AppResources","ngOnChanges","changes","appScope","SettingsScope","systemSettingsScope","systemSettingsEntities","systemSettingsEntity","customSettingsEntity","AppAdminHelpers","getLightSpeedEditParams","sitePrimaryApp","PrimaryApp","openAppAdministration","ZoneId","AppId","globalPrimaryApp","System","enabled","FeatureComponentBase","openDialog","part","configuration","some","save","Scope","ChangeStaticName","NewStaticName","success","i6","i7","i8","i9","i10","AppConfigurationComponent_Conditional_0_Template","AppConfigurationComponent_ng_template_2_Template","AppConfigurationComponent_contFlowTmp","exportAppXml","resetApp","_r8","SyncConfigurationComponent","exportAppService","exportApp","exportParts","importParts","withFiles","exportForVersionControl","includeContentGroups","resetAppGuid","error","SyncConfigurationComponent_Conditional_67_Template","SyncConfigurationComponent_Conditional_68_Template","SyncConfigurationComponent_Conditional_71_Template","SyncConfigurationComponent_Conditional_72_Template","_r19","opened","vm_r1","Icon","_r22","breadcrumb_r24","AppAdministrationNavComponent_Conditional_0_ng_container_10_Conditional_1_Template","last_r26","item_r29","_r35","$implicit","ctx_r34","changeUrl","tippy","GettingStartedUrl","CodeEditor","IsInherited","AppAdministrationNavComponent_Conditional_0_Conditional_2_Template","AppAdministrationNavComponent_Conditional_0_Conditional_3_Template","AppAdministrationNavComponent_Conditional_0_Conditional_5_Template","AppAdministrationNavComponent_Conditional_0_Conditional_6_Template","AppAdministrationNavComponent_Conditional_0_ng_container_10_Template","AppAdministrationNavComponent_Conditional_0_ng_template_11_Template","_r44","ctx_r43","closeDialog","AppAdministrationNavComponent_Conditional_0_For_21_Template","_forTrack1","AppAdministrationNavComponent_Conditional_0_Conditional_28_Template","AppAdministrationNavComponent_Conditional_0_Conditional_29_Template","AppAdministrationNavComponent_Conditional_0_Conditional_30_Template","AppAdministrationNavComponent_Conditional_0_Conditional_31_Template","AppAdministrationNavComponent_Conditional_0_Conditional_32_Template","AppAdministrationNavComponent_Conditional_0_Conditional_33_Template","AppAdministrationNavComponent_Conditional_0_Conditional_34_Template","smallScreen","matches","sideNavOpened","navItems","currentPath","AppAdministrationNavComponent","dialogRef","media","dialogSettings$","pathsArray$","currentPath$","paths","matchMedia","fetchDialogSettings","addEventListener","c","sidenav","close","getShared$","UpdateEnvVarsFromDialogSettings","Query","viewQuery","AppAdministrationNavComponent_Conditional_0_Template","AppAdministrationNavComponent_contFlowTmp","AppSyncWithSiteFiles","WysiwygPasteFormatted","PasteImageFromClipboard","EditUiShowNotes","EditUiShowMetadataFor","NoSponsoredByToSic","EditUiTranslateWithGoogle","FieldShareConfigManagement","vm_r4","feature","FeatureTextInfoComponent_Conditional_0_Conditional_0_Template","show","FeatureTextInfoComponent","asInfo","asInfo$","featuresService","feature$","show$","_angular_core__WEBPACK_IMPORTED_MODULE_0__","FeatureTextInfoComponent_Conditional_0_Template","FeatureTextInfoComponent_Conditional_2_Template","FeatureTextInfoComponent_ng_template_3_Template","FeatureTextInfoComponent_contFlowTmp","id_r4","link_r7","findOutMore","FeatureInfoDialogComponent_Conditional_0_Conditional_15_Template","FeatureInfoDialogComponent_Conditional_0_Conditional_17_Template","IsEnabled","FeatureInfoDialogComponent_Conditional_0_contFlowTmp","NameId","Link","FeatureInfoDialogComponent","dialogData","featureDetailService","getFeatureDetails","link","MAT_DIALOG_DATA","FeatureInfoDialogComponent_Conditional_0_Template","FeatureInfoDialogComponent_contFlowTmp","featureNameId","featureNameId$","showIf","showIf$","switchMap","featName","get$","feat","featureId","markForCheck","lG2"],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/models/dialog-context.models.ts","./projects/eav-ui/src/app/shared/pipes/safe-resource-url.ts","./projects/eav-ui/src/app/app-administration/getting-started/getting-started.component.ts","./projects/eav-ui/src/app/app-administration/getting-started/getting-started.component.html","./projects/eav-ui/src/app/app-administration/data/data-actions/data-actions.component.html","./projects/eav-ui/src/app/app-administration/data/data-actions/data-actions.component.ts","./projects/eav-ui/src/app/app-administration/data/data-fields/data-fields.component.ts","./projects/eav-ui/src/app/app-administration/data/data-fields/data-fields.component.html","./projects/eav-ui/src/app/app-administration/data/data-items/data-items.component.ts","./projects/eav-ui/src/app/app-administration/data/data-items/data-items.component.html","./projects/eav-ui/src/app/app-administration/data/data.component.html","./projects/eav-ui/src/app/app-administration/data/data.component.ts","./projects/eav-ui/src/app/app-administration/queries/queries-actions/queries-actions.ts","./projects/eav-ui/src/app/app-administration/queries/ag-actions/ag-actions-component.ts","./projects/eav-ui/src/app/app-administration/queries/queries-actions/queries-actions.component.html","./projects/eav-ui/src/app/app-administration/queries/queries-actions/queries-actions.component.ts","./projects/eav-ui/src/app/app-administration/queries/queries.component.html","./projects/eav-ui/src/app/app-administration/queries/queries.component.ts","./projects/eav-ui/src/app/app-administration/views/views-actions/views-actions.component.html","./projects/eav-ui/src/app/app-administration/views/views-actions/views-actions.component.ts","./projects/eav-ui/src/app/app-administration/views/views-show/views-show.component.ts","./projects/eav-ui/src/app/app-administration/views/views-show/views-show.component.html","./projects/eav-ui/src/app/app-administration/views/views.helpers.ts","./projects/eav-ui/src/app/app-administration/views/views-type/views-type.component.html","./projects/eav-ui/src/app/app-administration/views/views-type/views-type.component.ts","./projects/eav-ui/src/app/app-administration/views/views.component.html","./projects/eav-ui/src/app/app-administration/views/views.component.ts","./projects/eav-ui/src/app/app-administration/views/polymorph-logo.png","./projects/eav-ui/src/app/app-administration/web-api/web-api-actions/web-api-actions.component.html","./projects/eav-ui/src/app/app-administration/web-api/web-api-actions/web-api-actions.component.ts","./projects/eav-ui/src/app/app-administration/web-api/web-api-type/web-api-type.component.html","./projects/eav-ui/src/app/app-administration/web-api/web-api-type/web-api-type.component.ts","./projects/eav-ui/src/app/app-administration/web-api/web-api.component.html","./projects/eav-ui/src/app/app-administration/web-api/web-api.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/analyze-settings/analyze-settings.models.ts","./projects/eav-ui/src/app/app-administration/app-configuration/app-configuration-card/app-configuration-card.component.html","./projects/eav-ui/src/app/app-administration/app-configuration/app-configuration-card/app-configuration-card.component.ts","./projects/eav-ui/src/app/app-administration/app-configuration/app-configuration.component.html","./projects/eav-ui/src/app/app-administration/app-configuration/app-configuration.component.ts","./projects/eav-ui/src/app/app-administration/sync-configuration/sync-configuration.component.html","./projects/eav-ui/src/app/app-administration/sync-configuration/sync-configuration.component.ts","./projects/eav-ui/src/app/app-administration/app-administration-nav/app-administration-nav.component.html","./projects/eav-ui/src/app/app-administration/app-administration-nav/app-administration-nav.component.ts","./projects/eav-ui/src/app/features/feature-names.ts","./projects/eav-ui/src/app/features/feature-text-info/feature-text-info.component.html","./projects/eav-ui/src/app/features/feature-text-info/feature-text-info.component.ts","./projects/eav-ui/src/app/features/feature-info-dialog/feature-info-dialog.component.html","./projects/eav-ui/src/app/features/feature-info-dialog/feature-info-dialog.component.ts","./projects/eav-ui/src/app/features/shared/base-feature.component.ts"],"sourcesContent":["import { PermissionsCount } from '../../app-administration/models/permissions-count.model';\r\nimport { Language } from '../../edit/shared/models';\r\n\r\nexport interface DialogContextApp {\r\n  /** Root for app APIs and content/query */\r\n  Api: string;\r\n  Folder: string;\r\n  GettingStartedUrl: string;\r\n  Id: number;\r\n  Identifier: string;\r\n  IsContentApp: boolean;\r\n  IsGlobalApp: boolean;\r\n  IsInherited: boolean;\r\n  IsShared: boolean;\r\n  IsSiteApp: boolean;\r\n  Name: string;\r\n  Permissions: PermissionsCount;\r\n  SettingsScope: AppScope;\r\n  Url: string;\r\n  SharedUrl: string;\r\n\r\n  /** New app icon */\r\n  Icon: string;\r\n}\r\n\r\nexport interface ApiKeySpecs {\r\n  NameId: string;\r\n  ApiKey: string;\r\n  IsDemo: boolean;\r\n}\r\n\r\nexport const AppScopes = {\r\n  App: 'App',\r\n  Site: 'Site',\r\n  Global: 'Global',\r\n} as const;\r\nexport type AppScope = typeof AppScopes[keyof typeof AppScopes];\r\n\r\nexport interface DialogContextEnable {\r\n  /** Determines if app admin should show app-permissions (true for Apps, false for Content and Global) */\r\n  AppPermissions?: boolean;\r\n  /** Determines if Code editing should be enabled (true for super-users) */\r\n  CodeEditor?: boolean;\r\n  DebugMode: boolean;\r\n  /** True if saving of formulas should be enabled (for edit-ui) */\r\n  FormulaSave?: boolean;\r\n  /** While debug is enabled, this allows some Edit Ui actions even when they are disabled in fields settings */\r\n  OverrideEditRestrictions?: boolean;\r\n  /** Determines if Queries should be enabled (true for Apps) */\r\n  Query?: boolean;\r\n}\r\n\r\nexport interface DialogContextLanguage {\r\n  Current: string;\r\n  List: Language[];\r\n  Primary: string;\r\n}\r\n\r\nexport interface DialogContextPage {\r\n  Id: number;\r\n}\r\n\r\nexport interface DialogContextSite {\r\n  DefaultApp: DialogContextSiteApp;\r\n  Id: number;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSystem {\r\n  DefaultApp: DialogContextSiteApp;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSiteApp {\r\n  ZoneId: number;\r\n  AppId: number;\r\n}\r\n\r\nexport interface DialogContextUser {\r\n  Email: string;\r\n  Id: number;\r\n  Guid: string;\r\n  IsAnonymous: boolean;\r\n  IsSiteAdmin: boolean;\r\n  IsContentAdmin: boolean;\r\n  IsSystemAdmin: boolean;\r\n  Name: string;\r\n  Username: string;\r\n}\r\n\r\n// export interface DialogContextFeature {\r\n//   NameId: string;\r\n//   Enabled: boolean;\r\n// }\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({ name: 'safeResourceUrl' })\r\nexport class SafeResourceUrlPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(resourceUrl: string) {\r\n    return this.sanitizer.bypassSecurityTrustResourceUrl(resourceUrl);\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-getting-started',\r\n  templateUrl: './getting-started.component.html',\r\n  styleUrls: ['./getting-started.component.scss'],\r\n})\r\nexport class GettingStartedComponent implements OnInit {\r\n  @Input() gettingStartedUrl: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<iframe class=\"iframe\" [src]=\"gettingStartedUrl | safeResourceUrl\"></iframe>\r\n","<div class=\"actions-component\">\r\n  @if (!contentType.EditInfo.DisableEdit || contentType.Properties) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple\r\n      tippy=\"Description and more\"\r\n      (click)=\"createOrEditMetadata()\">\r\n      <mat-icon>edit</mat-icon>\r\n    </div>\r\n  }\r\n  @if (contentType.EditInfo.DisableEdit && !contentType.Properties) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon>edit</mat-icon>\r\n    </div>\r\n  }\r\n\r\n  @if (!contentType.EditInfo.DisableMetadata) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Metadata\"\r\n      (click)=\"openMetadata()\">\r\n      <mat-icon [matBadge]=\"contentType.Metadata.length\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\" [matBadgeHidden]=\"!contentType.Metadata.length\" aria-hidden=\"false\">\r\n        local_offer\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n  @if (contentType.EditInfo.DisableMetadata) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon [matBadge]=\"contentType.Metadata.length\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\" matBadgeDisabled=\"true\" [matBadgeHidden]=\"!contentType.Metadata.length\" aria-hidden=\"false\">\r\n        local_offer\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n\r\n  @if (!contentType.EditInfo.DisableEdit && enablePermissions) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple\r\n      tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n      <mat-icon [matBadge]=\"contentType.Permissions.Count\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\" [matBadgeHidden]=\"!contentType.Permissions.Count\" aria-hidden=\"false\">\r\n      person</mat-icon>\r\n    </div>\r\n  }\r\n  @if (contentType.EditInfo.DisableEdit || !enablePermissions) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon [matBadge]=\"contentType.Permissions.Count\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\" matBadgeDisabled=\"true\" [matBadgeHidden]=\"!contentType.Permissions.Count\"\r\n        aria-hidden=\"false\">\r\n      person</mat-icon>\r\n    </div>\r\n  }\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item [disabled]=\"contentType.EditInfo.DisableRename\" (click)=\"editContentType()\">\r\n      <mat-icon>settings</mat-icon>\r\n      <span>Rename</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"openRestApi()\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"exportType()\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export content type</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"openDataExport()\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export data</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"openDataImport()\">\r\n      <mat-icon>cloud_upload</mat-icon>\r\n      <span>Import data</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"contentType.EditInfo.DisableDelete\" (click)=\"deleteContentType()\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { guidRegex } from '../../../shared/constants/guid.constants';\r\nimport { ContentType } from '../../models/content-type.model';\r\nimport { DataActionsParams } from './data-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-data-actions',\r\n  templateUrl: './data-actions.component.html',\r\n  styleUrls: ['./data-actions.component.scss'],\r\n})\r\nexport class DataActionsComponent implements ICellRendererAngularComp {\r\n  contentType: ContentType;\r\n  enablePermissions: boolean;\r\n  private params: ICellRendererParams & DataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & DataActionsParams): void {\r\n    this.params = params;\r\n    this.contentType = this.params.data;\r\n    const enablePermissions = this.params.enablePermissionsGetter();\r\n    this.enablePermissions = enablePermissions && guidRegex().test(this.contentType.StaticName);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  createOrEditMetadata(): void {\r\n    this.params.onCreateOrEditMetadata(this.contentType);\r\n  }\r\n\r\n  openPermissions(): void {\r\n    this.params.onOpenPermissions(this.contentType);\r\n  }\r\n\r\n  editContentType(): void {\r\n    this.params.onEdit(this.contentType);\r\n  }\r\n\r\n  openMetadata(): void {\r\n    this.params.onOpenMetadata(this.contentType);\r\n  }\r\n\r\n  openRestApi(): void {\r\n    this.params.onOpenRestApi(this.contentType);\r\n  }\r\n\r\n  exportType(): void {\r\n    this.params.onTypeExport(this.contentType);\r\n  }\r\n\r\n  openDataExport(): void {\r\n    this.params.onOpenDataExport(this.contentType);\r\n  }\r\n\r\n  openDataImport(): void {\r\n    this.params.onOpenDataImport(this.contentType);\r\n  }\r\n\r\n  deleteContentType(): void {\r\n    this.params.onDelete(this.contentType);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { ContentType } from '../../models/content-type.model';\r\nimport { DataFieldsParams } from './data-fields.models';\r\n\r\n@Component({\r\n  selector: 'app-data-fields',\r\n  templateUrl: './data-fields.component.html',\r\n  styleUrls: ['./data-fields.component.scss'],\r\n})\r\nexport class DataFieldsComponent implements ICellRendererAngularComp {\r\n  value: number;\r\n  tooltip: string;\r\n  icon: string;\r\n\r\n  private params: ICellRendererParams & DataFieldsParams;\r\n  private contentType: ContentType;\r\n\r\n  agInit(params: ICellRendererParams & DataFieldsParams): void {\r\n    this.params = params;\r\n    this.contentType = params.data;\r\n    this.value = params.value;\r\n    this.tooltip = !this.contentType.EditInfo.ReadOnly\r\n      ? 'Edit fields'\r\n      : `${this.contentType.EditInfo.ReadOnlyMessage ? `${this.contentType.EditInfo.ReadOnlyMessage}\\n\\n` : ''}This ContentType shares the definition of #${this.contentType.SharedDefId} so you can't edit it here. Read 2sxc.org/help?tag=shared-types`;\r\n    this.icon = !this.contentType.EditInfo.ReadOnly ? 'dns' : 'share';\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  editFields(): void {\r\n    this.params.onEditFields(this.contentType);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple [tippy]=\"tooltip\" (click)=\"editFields()\">\r\n    <mat-icon [matBadge]=\"value\" matBadgePosition=\"below after\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!value\" aria-hidden=\"false\">\r\n      {{icon}}\r\n    </mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { ContentType } from '../../models';\r\nimport { DataItemsParams } from './data-items.models';\r\n\r\n@Component({\r\n  selector: 'app-data-items',\r\n  templateUrl: './data-items.component.html',\r\n  styleUrls: ['./data-items.component.scss'],\r\n})\r\nexport class DataItemsComponent implements ICellRendererAngularComp {\r\n  value: number;\r\n  private params: DataItemsParams;\r\n  private contentType: ContentType;\r\n\r\n  agInit(params: ICellRendererParams & DataItemsParams): void {\r\n    this.params = params;\r\n    this.contentType = params.data;\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  showItems(): void {\r\n    this.params.onShowItems(this.contentType);\r\n  }\r\n\r\n  addItem(): void {\r\n    this.params.onAddItem(this.contentType);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"{{ value }} items\" (click)=\"showItems()\">\r\n    <div class=\"text-icon\">{{ value }}</div>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Add item\" (click)=\"addItem()\">\r\n    <mat-icon>add</mat-icon>\r\n  </div>\r\n</div>","@if (viewModel$ | async; as vm) {\r\n  <div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.contentTypes\" [gridOptions]=\"gridOptions\"\r\n      appDragAndDrop [allowedFileTypes]=\"'xml,json'\" (filesDropped)=\"filesDropped($event)\">\r\n    </ag-grid-angular>\r\n    <mat-dialog-actions class=\"eav-dialog-actions\">\r\n      <div class=\"eav-dialog-actions-div\">\r\n        <mat-form-field color=\"accent\" class=\"eav-form-field eav-scope-dropdown\">\r\n          <mat-select [ngModel]=\"vm.scope\" name=\"Scope\" (ngModelChange)=\"changeScope($event)\">\r\n            @for (scopeOption of (vm.scopeOptions); track scopeOption) {\r\n              <mat-option [value]=\"scopeOption.value\">\r\n                {{ 'Scope: ' + scopeOption.name }}\r\n              </mat-option>\r\n            }\r\n            <mat-option [value]=\"dropdownInsertValue\">Scope: Other...</mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n        <button mat-button class=\"eav-button__with-icon\" tippy=\"Import content type\" (click)=\"importType()\">\r\n          <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n          <span>Content Type</span>\r\n        </button>\r\n        @if (vm.debugEnabled) {\r\n          <button mat-button class=\"eav-button__with-icon\" color=\"accent\" tippy=\"Create a ghost content type\" (click)=\"createGhost()\">\r\n            <mat-icon class=\"eav-icon\">share</mat-icon>\r\n            <span>Ghost</span>\r\n          </button>\r\n        }\r\n      </div>\r\n      <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new content type\" (click)=\"editContentType(null)\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, distinctUntilChanged, filter, from, map, startWith, take } from 'rxjs';\r\nimport { ContentExportService } from '../../content-export/services/content-export.service';\r\nimport { ContentImportDialogData } from '../../content-import/content-import-dialog.config';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { GlobalConfigService } from '../../edit/shared/store/ngrx-data';\r\nimport { GoToMetadata } from '../../metadata';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { toString } from '../../shared/helpers/file-to-base64.helper';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { ContentType } from '../models/content-type.model';\r\nimport { ContentTypesService } from '../services/content-types.service';\r\nimport { DataActionsComponent } from './data-actions/data-actions.component';\r\nimport { DataActionsParams } from './data-actions/data-actions.models';\r\nimport { DataFieldsComponent } from './data-fields/data-fields.component';\r\nimport { DataFieldsParams } from './data-fields/data-fields.models';\r\nimport { DataItemsComponent } from './data-items/data-items.component';\r\nimport { DataItemsParams } from './data-items/data-items.models';\r\n\r\n@Component({\r\n  selector: 'app-data',\r\n  templateUrl: './data.component.html',\r\n  styleUrls: ['./data.component.scss'],\r\n})\r\nexport class DataComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() enablePermissions: boolean;\r\n\r\n  contentTypes$ = new BehaviorSubject<ContentType[]>(undefined);\r\n  scope$ = new BehaviorSubject<string>(undefined);\r\n  scopeOptions$ = new BehaviorSubject<ScopeOption[]>([]);\r\n  gridOptions = this.buildGridOptions();\r\n  dropdownInsertValue = dropdownInsertValue;\r\n\r\n  viewModel$ = combineLatest([this.contentTypes$, this.scope$, this.scopeOptions$, this.globalConfigService.getDebugEnabled$()]).pipe(\r\n    map(([contentTypes, scope, scopeOptions, debugEnabled]) =>\r\n      ({ contentTypes, scope, scopeOptions, debugEnabled })),\r\n  );\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private contentTypesService: ContentTypesService,\r\n    private globalConfigService: GlobalConfigService,\r\n    private snackBar: MatSnackBar,\r\n    private contentExportService: ContentExportService,\r\n  ) { \r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchScopes();\r\n    this.refreshScopeOnRouteChange();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchContentTypes(); }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.contentTypes$.complete();\r\n    this.scope$.complete();\r\n    this.scopeOptions$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  filesDropped(files: File[]) {\r\n    const importFile = files[0];\r\n    const ext = importFile.name.substring(importFile.name.lastIndexOf('.') + 1).toLocaleLowerCase();\r\n    switch (ext) {\r\n      case 'xml':\r\n        from(toString(files[0])).pipe(take(1)).subscribe(fileString => {\r\n          const contentTypeName = fileString.split('<Entity Type=\"')[1]?.split('\"')[0];\r\n          const contentType = this.contentTypes$.value.find(ct => ct.Name === contentTypeName);\r\n          if (contentType == null) {\r\n            const message = `Cannot find Content Type named '${contentTypeName}'. Please open Content Type Import dialog manually.`;\r\n            this.snackBar.open(message, null, { duration: 5000 });\r\n            return;\r\n          }\r\n          this.openDataImport(contentType, files);\r\n        });\r\n        break;\r\n      case 'json':\r\n        this.importType(files);\r\n        break;\r\n    }\r\n  }\r\n\r\n  importType(files?: File[]) {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: dialogData });\r\n  }\r\n\r\n  private showContentItems(contentType: ContentType) {\r\n    this.router.navigate([`items/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editContentType(contentType: ContentType) {\r\n    if (!contentType) {\r\n      this.router.navigate(['add'], { relativeTo: this.route.firstChild });\r\n    } else {\r\n      if (contentType.EditInfo.ReadOnly) { return; }\r\n      this.router.navigate([`${contentType.StaticName}/edit`], { relativeTo: this.route.firstChild });\r\n    }\r\n  }\r\n\r\n  private fetchContentTypes() {\r\n    this.contentTypesService.retrieveContentTypes(this.scope$.value).subscribe(contentTypes => {\r\n      for (const contentType of contentTypes) {\r\n        contentType._compareLabel = contentType.Label.replace(/\\p{Emoji}/gu, 'ž');\r\n      }\r\n      this.contentTypes$.next(contentTypes);\r\n      if (this.scope$.value !== eavConstants.scopes.default.value) {\r\n        const message = 'Warning! You are in a special scope. Changing things here could easily break functionality';\r\n        this.snackBar.open(message, null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  private fetchScopes() {\r\n    this.contentTypesService.getScopes().subscribe(scopeOptions => {\r\n      const newScopes = [...this.scopeOptions$.value];\r\n      scopeOptions.forEach(scopeOption => {\r\n        const existing = newScopes.find(scope => scope.value === scopeOption.value);\r\n        if (existing) {\r\n          existing.name = scopeOption.name;\r\n        } else {\r\n          newScopes.push(scopeOption);\r\n        }\r\n      });\r\n      this.scopeOptions$.next(newScopes);\r\n    });\r\n  }\r\n\r\n  createGhost() {\r\n    const sourceName = window.prompt('To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost');\r\n    if (!sourceName) { return; }\r\n    this.snackBar.open('Saving...');\r\n    this.contentTypesService.createGhost(sourceName).subscribe(res => {\r\n      this.snackBar.open('Saved', null, { duration: 2000 });\r\n      this.fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  changeScope(newScope: string) {\r\n    if (newScope === dropdownInsertValue) {\r\n      newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n    }\r\n    this.router.navigate([`data/${newScope}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private addItem(contentType: ContentType) {\r\n    const form: EditForm = {\r\n      items: [{ ContentTypeName: contentType.StaticName }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private editFields(contentType: ContentType) {\r\n    this.router.navigate([`fields/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private createOrEditMetadata(contentType: ContentType) {\r\n    const form: EditForm = {\r\n      items: [\r\n        !contentType.Properties\r\n          ? {\r\n            ContentTypeName: eavConstants.contentTypes.contentType,\r\n            For: {\r\n              Target: eavConstants.metadata.contentType.target,\r\n              TargetType: eavConstants.metadata.contentType.targetType,\r\n              String: contentType.StaticName,\r\n            },\r\n            Prefill: { Label: contentType.Name, Description: contentType.Description },\r\n          }\r\n          : { EntityId: contentType.Properties.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openMetadata(contentType: ContentType) {\r\n    const url = GoToMetadata.getUrlContentType(\r\n      contentType.StaticName,\r\n      `Metadata for Content Type: ${contentType.Name} (${contentType.Id})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openRestApi(contentType: ContentType) {\r\n    this.router.navigate([GoToDevRest.getUrlData(contentType)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportType(contentType: ContentType) {\r\n    this.contentExportService.exportJson(contentType.StaticName);\r\n  }\r\n\r\n  private openDataExport(contentType: ContentType) {\r\n    this.router.navigate([`export/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openDataImport(contentType: ContentType, files?: File[]) {\r\n    const contentImportData: ContentImportDialogData = { files };\r\n    this.router.navigate([`${contentType.StaticName}/import`], { relativeTo: this.route.firstChild, state: contentImportData });\r\n  }\r\n\r\n  private openPermissions(contentType: ContentType) {\r\n    this.router.navigate([GoToPermissions.getUrlContentType(contentType.StaticName)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private deleteContentType(contentType: ContentType) {\r\n    if (!confirm(`Are you sure you want to delete '${contentType.Name}' (${contentType.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.contentTypesService.delete(contentType).subscribe(result => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  private refreshScopeOnRouteChange() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        map(() => this.route.snapshot.firstChild.paramMap.get('scope')),\r\n        startWith(this.route.snapshot.firstChild.paramMap.get('scope')),\r\n        filter(scope => !!scope),\r\n        distinctUntilChanged(),\r\n      ).subscribe(scope => {\r\n        this.scope$.next(scope);\r\n        if (!this.scopeOptions$.value.map(option => option.value).includes(scope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: scope,\r\n            value: scope,\r\n          };\r\n          this.scopeOptions$.next([...this.scopeOptions$.value, newScopeOption]);\r\n        }\r\n        this.fetchContentTypes();\r\n      })\r\n    );\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          cellClass: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return `id-action no-padding no-outline ${contentType.EditInfo.ReadOnly ? 'disabled' : ''}`.split(' ');\r\n          },\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<ContentType> = {\r\n              tooltipGetter: (contentType) => `ID: ${contentType.Id}\\nGUID: ${contentType.StaticName}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          flex: 3,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          onCellClicked: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            this.showContentItems(contentType);\r\n          },\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Label;\r\n          },\r\n          comparator: (valueA, valueB, nodeA, nodeB, isInverted) => {\r\n            const contentTypeA: ContentType = nodeA.data;\r\n            const contentTypeB: ContentType = nodeB.data;\r\n            return contentTypeA._compareLabel.localeCompare(contentTypeB._compareLabel);\r\n          },\r\n        },\r\n        {\r\n          field: 'Items',\r\n          width: 102,\r\n          headerClass: 'dense',\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Items;\r\n          },\r\n          cellRenderer: DataItemsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: DataItemsParams = {\r\n              onShowItems: (contentType) => this.showContentItems(contentType),\r\n              onAddItem: (contentType) => this.addItem(contentType),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Fields',\r\n          width: 94,\r\n          headerClass: 'dense',\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Fields;\r\n          },\r\n          cellRenderer: DataFieldsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: DataFieldsParams = {\r\n              onEditFields: (contentType) => this.editFields(contentType),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 1,\r\n          minWidth: 100,\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          cellClass: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return `${contentType.EditInfo.DisableEdit ? 'no-outline' : 'primary-action highlight'}`.split(' ');\r\n          },\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Name;\r\n          },\r\n          onCellClicked: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            this.editContentType(contentType);\r\n          },\r\n        },\r\n        {\r\n          field: 'Description',\r\n          flex: 3,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            return contentType.Properties?.Description;\r\n          },\r\n        },\r\n        {\r\n          width: 162,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: DataActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: DataActionsParams = {\r\n              enablePermissionsGetter: () => this.enablePermissionsGetter(),\r\n              onCreateOrEditMetadata: (contentType) => this.createOrEditMetadata(contentType),\r\n              onOpenPermissions: (contentType) => this.openPermissions(contentType),\r\n              onEdit: (contentType) => this.editContentType(contentType),\r\n              onOpenRestApi: (contentType) => this.openRestApi(contentType),\r\n              onOpenMetadata: (contentType) => this.openMetadata(contentType),\r\n              onTypeExport: (contentType) => this.exportType(contentType),\r\n              onOpenDataExport: (contentType) => this.openDataExport(contentType),\r\n              onOpenDataImport: (contentType) => this.openDataImport(contentType),\r\n              onDelete: (contentType) => this.deleteContentType(contentType),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","import { Query } from '../../models/query.model';\r\nimport { IAgActions } from '../ag-actions';\r\n\r\n// Test 2dm 2020-11-20 - I believe the current model has way too much ceremony\r\n// I need to change ca. 10 places just to get one more action to work\r\n// that's not great\r\nexport enum QueryActions {\r\n  Edit,\r\n  Metadata,\r\n  Rest,\r\n  Clone,\r\n  Permissions,\r\n  Export,\r\n  Delete,\r\n}\r\n\r\nexport interface QueriesActionsParams extends IAgActions<QueryActions, Query> {\r\n  getEnablePermissions(): boolean;\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\n\r\nexport class AgActionsComponent<TParams extends ICellRendererParams, TData> implements ICellRendererAngularComp {\r\n  item: TData;\r\n  params: TParams;\r\n\r\n  agInit(params: TParams): void {\r\n    this.params = params;\r\n    this.item = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Edit\" (click)=\"params.do(actions.Edit, item)\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n\r\n  @if (!item._EditInfo.DisableMetadata) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Metadata\"\r\n      (click)=\"params.do(actions.Metadata, item)\">\r\n      <mat-icon [matBadge]=\"item.Metadata?.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n        [matBadgeHidden]=\"!item.Metadata?.length\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        local_offer\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n  @if (item._EditInfo.DisableMetadata) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon [matBadge]=\"item.Metadata?.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n        [matBadgeHidden]=\"!item.Metadata?.length\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        local_offer\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n\r\n  @if (!item._EditInfo.DisableEdit && enablePermissions) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple\r\n      tippy=\"Permissions\" (click)=\"params.do(actions.Permissions, item)\">\r\n      <mat-icon [matBadge]=\"item._Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n        [matBadgeHidden]=\"!item._Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        person\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n  @if (item._EditInfo.DisableEdit || !enablePermissions) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon [matBadge]=\"item._Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n        [matBadgeHidden]=\"!item._Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        person\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"params.do(actions.Rest, item)\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"params.do(actions.Clone, item)\">\r\n      <mat-icon>file_copy</mat-icon>\r\n      <span>Copy</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\" params.do(actions.Export, item)\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"item._EditInfo.DisableDelete\" (click)=\"params.do(actions.Delete, item)\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { Query } from '../../models/query.model';\r\nimport { AgActionsComponent } from '../ag-actions';\r\nimport { QueriesActionsParams, QueryActions } from './queries-actions';\r\n\r\n@Component({\r\n  selector: 'app-queries-actions',\r\n  templateUrl: './queries-actions.component.html',\r\n})\r\nexport class QueriesActionsComponent extends AgActionsComponent<ICellRendererParams & QueriesActionsParams, Query> {\r\n  enablePermissions: boolean;\r\n  actions = QueryActions;\r\n\r\n  agInit(params: ICellRendererParams & QueriesActionsParams): void {\r\n    super.agInit(params);\r\n    this.enablePermissions = this.params.getEnablePermissions();\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.queries\" [gridOptions]=\"gridOptions\" appDragAndDrop\r\n      [allowedFileTypes]=\"'json'\" (filesDropped)=\"importQuery($event)\">\r\n    </ag-grid-angular>\r\n    <mat-dialog-actions class=\"eav-dialog-actions\">\r\n      <button mat-button class=\"eav-button__with-icon\" tippy=\"Import query\" (click)=\"importQuery()\">\r\n        <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n        <span>Query</span>\r\n      </button>\r\n      <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new query\" (click)=\"editQuery(null)\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, map } from 'rxjs';\r\nimport { ContentExportService } from '../../content-export/services/content-export.service';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { GoToMetadata } from '../../metadata';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { Query } from '../models/query.model';\r\nimport { PipelinesService } from '../services/pipelines.service';\r\nimport { QueriesActionsParams, QueryActions } from './queries-actions/queries-actions';\r\nimport { QueriesActionsComponent } from './queries-actions/queries-actions.component';\r\n\r\n@Component({\r\n  selector: 'app-queries',\r\n  templateUrl: './queries.component.html',\r\n  styleUrls: ['./queries.component.scss'],\r\n})\r\nexport class QueriesComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() enablePermissions: boolean;\r\n\r\n  queries$ = new BehaviorSubject<Query[]>(undefined);\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  viewModel$ = combineLatest([this.queries$]).pipe(\r\n    map(([queries]) => ({ queries }))\r\n  );\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private pipelinesService: PipelinesService,\r\n    private contentExportService: ContentExportService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) {\r\n    super(router, route);\r\n   }\r\n\r\n  ngOnInit() {\r\n    this.fetchQueries();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchQueries(); }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.queries$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  private fetchQueries() {\r\n    this.pipelinesService.getAll(eavConstants.contentTypes.query).subscribe((queries: Query[]) => {\r\n      this.queries$.next(queries);\r\n    });\r\n  }\r\n\r\n  importQuery(files?: File[]) {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: dialogData });\r\n  }\r\n\r\n  /**\r\n   * Experiment by 2dm 2020-11-20 - trying to reduce the ceremony around menus\r\n   * Once this works, we would then remove all the 3-line functions below, as they\r\n   * would just be added here (if that's the only place they are used)\r\n   */\r\n  private doMenuAction(action: QueryActions, query: Query) {\r\n    switch (action) {\r\n      case QueryActions.Edit:\r\n        return this.editQuery(query);\r\n      case QueryActions.Metadata:\r\n        return this.openMetadata(query);\r\n      case QueryActions.Rest:\r\n        return this.router.navigate([GoToDevRest.getUrlQuery(query.Guid)], { relativeTo: this.route.firstChild });\r\n      case QueryActions.Clone:\r\n        return this.cloneQuery(query);\r\n      case QueryActions.Permissions:\r\n        return this.openPermissions(query);\r\n      case QueryActions.Export:\r\n        return this.exportQuery(query);\r\n      case QueryActions.Delete:\r\n        return this.deleteQuery(query);\r\n    }\r\n  }\r\n\r\n  editQuery(query: Query) {\r\n    const form: EditForm = {\r\n      items: [\r\n        query == null\r\n          ? {\r\n            ContentTypeName: eavConstants.contentTypes.query,\r\n            Prefill: { TestParameters: eavConstants.pipelineDesigner.testParameters }\r\n          }\r\n          : { EntityId: query.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private openVisualQueryDesigner(query: Query) {\r\n    if (query._EditInfo.ReadOnly) { return; }\r\n    this.dialogService.openQueryDesigner(query.Id);\r\n  }\r\n\r\n  private openMetadata(query: Query) {\r\n    const url = GoToMetadata.getUrlEntity(\r\n      query.Guid,\r\n      `Metadata for Query: ${query.Name} (${query.Id})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private cloneQuery(query: Query) {\r\n    this.snackBar.open('Copying...');\r\n    this.pipelinesService.clonePipeline(query.Id).subscribe(() => {\r\n      this.snackBar.open('Copied', null, { duration: 2000 });\r\n      this.fetchQueries();\r\n    });\r\n  }\r\n\r\n  private openPermissions(query: Query) {\r\n    this.router.navigate([GoToPermissions.getUrlEntity(query.Guid)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportQuery(query: Query) {\r\n    this.contentExportService.exportEntity(query.Id, 'Query', true);\r\n  }\r\n\r\n  private deleteQuery(query: Query) {\r\n    if (!confirm(`Delete Pipeline '${query.Name}' (${query.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.pipelinesService.delete(query.Id).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchQueries();\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          cellClass: (params) => {\r\n            const query: Query = params.data;\r\n            return `id-action no-padding no-outline ${query._EditInfo.ReadOnly ? 'disabled' : ''}`.split(' ');\r\n          },\r\n          valueGetter: (params) => {\r\n            const query: Query = params.data;\r\n            return query.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<Query> = {\r\n              tooltipGetter: (query) => `ID: ${query.Id}\\nGUID: ${query.Guid}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          cellClass: (params) => {\r\n            const query: Query = params.data;\r\n            return `${query._EditInfo.DisableEdit ? 'no-outline' : 'primary-action highlight'}`.split(' ');\r\n          },\r\n          onCellClicked: (params) => {\r\n            const query: Query = params.data;\r\n            this.openVisualQueryDesigner(query);\r\n          },\r\n          valueGetter: (params) => {\r\n            const query: Query = params.data;\r\n            return query.Name;\r\n          },\r\n        },\r\n        {\r\n          field: 'Description',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const query: Query = params.data;\r\n            return query.Description;\r\n          },\r\n        },\r\n        {\r\n          width: 162,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: QueriesActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: QueriesActionsParams = {\r\n              getEnablePermissions: () => this.enablePermissionsGetter(),\r\n              do: (action, query) => this.doMenuAction(action, query),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  @if (!view.EditInfo.DisableEdit && enableCode) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Code\"\r\n      (click)=\"openCode()\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  }\r\n  @if (view.EditInfo.DisableEdit || !enableCode) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  }\r\n\r\n  @if (!view.EditInfo.DisableMetadata) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Metadata\"\r\n      (click)=\"openMetadata()\">\r\n      <mat-icon [matBadge]=\"view.Metadata.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n        [matBadgeHidden]=\"!view.Metadata.length\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        local_offer\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n  @if (view.EditInfo.DisableMetadata) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon [matBadge]=\"view.Metadata.length\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n        [matBadgeHidden]=\"!view.Metadata.length\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        local_offer\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n\r\n  @if (!view.EditInfo.DisableEdit && enablePermissions) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple\r\n      tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n      <mat-icon [matBadge]=\"view.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n        [matBadgeHidden]=\"!view.Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        person\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n  @if (view.EditInfo.DisableEdit || !enablePermissions) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon [matBadge]=\"view.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgeDisabled=\"true\"\r\n        [matBadgeHidden]=\"!view.Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n        person\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"cloneView()\">\r\n      <mat-icon>file_copy</mat-icon>\r\n      <span>Copy</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\" exportView()\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"view.EditInfo.DisableDelete\" (click)=\"deleteView()\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { View } from '../../models/view.model';\r\nimport { ViewActionsParams } from './views-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-views-actions',\r\n  templateUrl: './views-actions.component.html',\r\n  styleUrls: ['./views-actions.component.scss'],\r\n})\r\nexport class ViewsActionsComponent implements ICellRendererAngularComp {\r\n  view: View;\r\n  enableCode: boolean;\r\n  enablePermissions: boolean;\r\n  private params: ICellRendererParams & ViewActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & ViewActionsParams): void {\r\n    this.params = params;\r\n    this.view = this.params.data;\r\n    this.enableCode = this.params.enableCodeGetter();\r\n    this.enablePermissions = this.params.enablePermissionsGetter();\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode(): void {\r\n    this.params.onOpenCode(this.view);\r\n  }\r\n\r\n  openPermissions(): void {\r\n    this.params.onOpenPermissions(this.view);\r\n  }\r\n\r\n  openMetadata(): void {\r\n    this.params.onOpenMetadata(this.view);\r\n  }\r\n\r\n  cloneView(): void {\r\n    this.params.onClone(this.view);\r\n  }\r\n\r\n  exportView(): void {\r\n    this.params.onExport(this.view);\r\n  }\r\n\r\n  deleteView(): void {\r\n    this.params.onDelete(this.view);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-views-show',\r\n  templateUrl: './views-show.component.html',\r\n  styleUrls: ['./views-show.component.scss'],\r\n})\r\nexport class ViewsShowComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <mat-icon>{{ value ? 'visibility' : 'visibility_off' }}</mat-icon>\r\n</div>\r\n","import { View } from '../models/view.model';\r\n\r\nexport function calculateViewType(view: View) {\r\n  let value = '';\r\n  let icon = '';\r\n  if (view.HasQuery) {\r\n    value = 'Data (from query)';\r\n    icon = 'filter_list';\r\n  } else if (view.List) {\r\n    value = 'Items (list)';\r\n    icon = 'format_list_numbered';\r\n  } else if (!view.ContentType && !view.HasQuery) {\r\n    value = 'Code';\r\n    icon = 'check_box_outline_blank';\r\n  } else if (!view.List) {\r\n    value = 'Item (one)';\r\n    icon = 'looks_one';\r\n  }\r\n  return { value, icon };\r\n}\r\n","<div class=\"icon-container\">\r\n  <div class=\"eav-grid-action-button icon\" [tippy]=\"value\">\r\n    <mat-icon>{{ icon }}</mat-icon>\r\n  </div>\r\n  @if (isShared) {\r\n    <div class=\"eav-grid-action-button icon\" tippy=\"View is shared\">\r\n      <mat-icon>share</mat-icon>\r\n    </div>\r\n  }\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { View } from '../../models';\r\nimport { calculateViewType } from '../views.helpers';\r\n\r\n@Component({\r\n  selector: 'app-views-type',\r\n  templateUrl: './views-type.component.html',\r\n  styleUrls: ['./views-type.component.scss'],\r\n})\r\nexport class ViewsTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  icon: string;\r\n  isShared: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    const view: View = params.data;\r\n    const type = calculateViewType(view);\r\n    this.icon = type.icon;\r\n    this.isShared = view.IsShared;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.views\" [gridOptions]=\"gridOptions\" appDragAndDrop\r\n      [allowedFileTypes]=\"'json'\" (filesDropped)=\"importView($event)\">\r\n    </ag-grid-angular>\r\n    <mat-dialog-actions class=\"eav-dialog-actions\">\r\n      <div class=\"eav-dialog-actions-div\">\r\n        <button mat-button class=\"eav-polymorph-button\" tippy=\"Configure polymorphism\" [disabled]=\"appIsInherited\"\r\n          (click)=\"editPolymorphisms()\">\r\n          <span class=\"eav-polymorph-button-span\">\r\n            <img class=\"eav-polymorph-logo\" [src]=\"polymorphLogo\">\r\n            <span>Polymorphism {{ vm.polymorphStatus }}</span>\r\n          </span>\r\n        </button>\r\n        <button mat-button class=\"eav-button__with-icon\" tippy=\"Import view\" (click)=\"importView()\">\r\n          <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n          <span>View</span>\r\n        </button>\r\n      </div>\r\n      <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new view\" (click)=\"editView(null)\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}","import polymorphLogo from '!url-loader!./polymorph-logo.png';\r\nimport { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Observable, combineLatest, map } from 'rxjs';\r\nimport { GoToMetadata } from '../../metadata';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { View } from '../models/view.model';\r\nimport { ViewsService } from '../services/views.service';\r\nimport { ViewsActionsComponent } from './views-actions/views-actions.component';\r\nimport { ViewActionsParams } from './views-actions/views-actions.models';\r\nimport { ViewsShowComponent } from './views-show/views-show.component';\r\nimport { ViewsTypeComponent } from './views-type/views-type.component';\r\nimport { calculateViewType } from './views.helpers';\r\n\r\n@Component({\r\n  selector: 'app-views',\r\n  templateUrl: './views.component.html',\r\n  styleUrls: ['./views.component.scss'],\r\n})\r\nexport class ViewsComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() enableCode: boolean;\r\n  @Input() enablePermissions: boolean;\r\n  @Input() appIsGlobal: boolean;\r\n  @Input() appIsInherited: boolean;\r\n\r\n  views$ = new BehaviorSubject<View[]>(undefined);\r\n  polymorphStatus$ = new BehaviorSubject(undefined);\r\n  polymorphLogo = polymorphLogo;\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private polymorphism: Polymorphism;\r\n  \r\n  viewModel$: Observable<ViewsViewModel>;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private viewsService: ViewsService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) {\r\n    super(router, route);\r\n   }\r\n\r\n  ngOnInit() {\r\n    this.fetchTemplates();\r\n    this.fetchPolymorphism();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { \r\n      this.fetchTemplates();\r\n      this.fetchPolymorphism();\r\n    }));\r\n    this.viewModel$ = combineLatest([this.views$, this.polymorphStatus$]).pipe(\r\n      map(([views, polymorphStatus]) => ({ views, polymorphStatus }))\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.views$.complete();\r\n    this.polymorphStatus$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  importView(files?: File[]) {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: dialogData });\r\n  }\r\n\r\n  private fetchTemplates() {\r\n    this.viewsService.getAll().subscribe(views => {\r\n      this.views$.next(views);\r\n    });\r\n  }\r\n\r\n  private fetchPolymorphism() {\r\n    this.viewsService.getPolymorphism().subscribe(polymorphism => {\r\n      this.polymorphism = polymorphism;\r\n      const polymorphStatus = (polymorphism.Id === null)\r\n        ? 'not configured'\r\n        : (polymorphism.Resolver === null ? 'disabled' : 'using ' + polymorphism.Resolver);\r\n      this.polymorphStatus$.next(polymorphStatus);\r\n    });\r\n  }\r\n\r\n  editView(view?: View) {\r\n    const form: EditForm = {\r\n      items: [\r\n        view == null\r\n          ? {\r\n            ContentTypeName: eavConstants.contentTypes.template,\r\n            Prefill: {\r\n              ...(this.appIsGlobal && { Location: 'Global' }),\r\n            },\r\n          }\r\n          : { EntityId: view.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editPolymorphisms() {\r\n    if (!this.polymorphism) { return; }\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        !this.polymorphism.Id\r\n          ? { ContentTypeName: this.polymorphism.TypeName }\r\n          : { EntityId: this.polymorphism.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private enableCodeGetter() {\r\n    return this.enableCode;\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private openUsage(view: View) {\r\n    this.router.navigate([`usage/${view.Guid}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openCode(view: View) {\r\n    this.dialogService.openCodeFile(view.TemplatePath, view.IsShared, view.Id);\r\n  }\r\n\r\n  private openPermissions(view: View) {\r\n    this.router.navigate([GoToPermissions.getUrlEntity(view.Guid)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openMetadata(view: View) {\r\n    const url = GoToMetadata.getUrlEntity(\r\n      view.Guid,\r\n      `Metadata for View: ${view.Name} (${view.Id})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private cloneView(view: View) {\r\n    const form: EditForm = {\r\n      items: [{ ContentTypeName: eavConstants.contentTypes.template, DuplicateEntity: view.Id }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportView(view: View) {\r\n    this.viewsService.export(view.Id);\r\n  }\r\n\r\n  private deleteView(view: View) {\r\n    if (!confirm(`Delete '${view.Name}' (${view.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.viewsService.delete(view.Id).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchTemplates();\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          cellClass: (params) => {\r\n            const view: View = params.data;\r\n            return `id-action no-padding no-outline ${view.EditInfo.ReadOnly ? 'disabled' : ''}`.split(' ');\r\n          },\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<View> = {\r\n              tooltipGetter: (view) => `ID: ${view.Id}\\nGUID: ${view.Guid}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Show',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return !view.IsHidden;\r\n          },\r\n          cellRenderer: ViewsShowComponent,\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          onCellClicked: (params) => {\r\n            const view: View = params.data;\r\n            this.editView(view);\r\n          },\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.Name;\r\n          },\r\n        },\r\n        {\r\n          field: 'Type',\r\n          width: 82,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            const type = calculateViewType(view);\r\n            return type.value;\r\n          },\r\n          cellRenderer: ViewsTypeComponent,\r\n        },\r\n        {\r\n          field: 'Used',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          onCellClicked: (params) => {\r\n            const view: View = params.data;\r\n            this.openUsage(view);\r\n          },\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.Used;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Url Key',\r\n          field: 'UrlKey',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.ViewNameInUrl;\r\n          },\r\n        },\r\n        {\r\n          field: 'Path',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.TemplatePath;\r\n          },\r\n        },\r\n        {\r\n          field: 'Content',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.ContentType.Name;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Default',\r\n          field: 'ContentDemo',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return `${view.ContentType.DemoId} ${view.ContentType.DemoTitle}`;\r\n          },\r\n        },\r\n        {\r\n          field: 'Presentation',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.PresentationType.Name;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Default',\r\n          field: 'PresentationDemo',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return `${view.PresentationType.DemoId} ${view.PresentationType.DemoTitle}`;\r\n          },\r\n        },\r\n        {\r\n          field: 'Header',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.ListContentType.Name;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Default',\r\n          field: 'HeaderDemo',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return `${view.ListContentType.DemoId} ${view.ListContentType.DemoTitle}`;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Header Presentation',\r\n          field: 'HeaderPresentation',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return view.ListPresentationType.Name;\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Default',\r\n          field: 'HeaderPresentationDemo',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const view: View = params.data;\r\n            return `${view.ListPresentationType.DemoId} ${view.ListPresentationType.DemoTitle}`;\r\n          },\r\n        },\r\n        {\r\n          width: 162,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: ViewsActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: ViewActionsParams = {\r\n              enableCodeGetter: () => this.enableCodeGetter(),\r\n              enablePermissionsGetter: () => this.enablePermissionsGetter(),\r\n              onOpenCode: (view) => this.openCode(view),\r\n              onOpenPermissions: (view) => this.openPermissions(view),\r\n              onOpenMetadata: (view) => this.openMetadata(view),\r\n              onClone: (view) => this.cloneView(view),\r\n              onExport: (view) => this.exportView(view),\r\n              onDelete: (view) => this.deleteView(view),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\ninterface ViewsViewModel {\r\n  views: View[];\r\n  polymorphStatus: any;\r\n}\r\n","export default \"data:image/png;base64,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\"","<div class=\"actions-component\">\r\n  @if (enableCode) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Code\" (click)=\"openCode()\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  }\r\n  @if (!enableCode) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  }\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"openRestApi()\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { WebApi } from '../../models/web-api.model';\r\nimport { WebApiActionsParams } from './web-api-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-web-api-actions',\r\n  templateUrl: './web-api-actions.component.html',\r\n  styleUrls: ['./web-api-actions.component.scss'],\r\n})\r\nexport class WebApiActionsComponent implements ICellRendererAngularComp {\r\n  enableCode: boolean;\r\n  private params: ICellRendererParams & WebApiActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & WebApiActionsParams): void {\r\n    this.params = params;\r\n    this.enableCode = this.params.enableCodeGetter();\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode(): void {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenCode(api);\r\n  }\r\n\r\n  openRestApi(): void {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenRestApi(api);\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  @if (value) {\r\n    <div class=\"eav-grid-action-button icon\" tippy=\"WebApi is shared\">\r\n      <mat-icon>share</mat-icon>\r\n    </div>\r\n  }\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-web-api-type',\r\n  templateUrl: './web-api-type.component.html',\r\n  styleUrls: ['./web-api-type.component.scss'],\r\n})\r\nexport class WebApiTypeComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"grid-wrapper mat-tab-grid-wrapper\" >\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.webApis\" [gridOptions]=\"gridOptions\">\r\n    </ag-grid-angular>\r\n    <mat-dialog-actions align=\"end\">\r\n      <button mat-fab mat-elevation-z24 [matMenuTriggerFor]=\"menu\" class=\"grid-fab\" tippy=\"Create a new controller\" tippyPlacement=\"left\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n      <mat-menu #menu=\"matMenu\">\r\n        <button mat-menu-item (click)=\"createController(false)\">\r\n          <span>App</span>\r\n        </button>\r\n        <button mat-menu-item (click)=\"createController(true)\">\r\n          <span>Shared (global)</span>\r\n        </button>\r\n      </mat-menu>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, Input, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Observable, combineLatest, map } from 'rxjs';\r\nimport { SourceService } from '../../code-editor/services/source.service';\r\nimport { CreateFileDialogComponent, CreateFileDialogData, CreateFileDialogResult, FileLocationDialogComponent } from '../../create-file-dialog';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { WebApi } from '../models/web-api.model';\r\nimport { WebApiActionsComponent } from './web-api-actions/web-api-actions.component';\r\nimport { WebApiActionsParams } from './web-api-actions/web-api-actions.models';\r\nimport { WebApiTypeComponent } from './web-api-type/web-api-type.component';\r\n\r\n@Component({\r\n  selector: 'app-web-api',\r\n  templateUrl: './web-api.component.html',\r\n  styleUrls: ['./web-api.component.scss'],\r\n})\r\nexport class WebApiComponent implements OnInit, OnDestroy {\r\n  @Input() enableCode: boolean;\r\n\r\n  webApis$ = new BehaviorSubject<WebApi[]>(undefined);\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  viewModel$: Observable<WebApiViewModel>;\r\n\r\n  constructor(\r\n    private sourceService: SourceService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchWebApis();\r\n    this.viewModel$ = combineLatest([this.webApis$]).pipe(\r\n      map(([webApis]) => ({ webApis }))\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.webApis$.complete();\r\n  }\r\n\r\n  createController(global?: boolean): void {\r\n    // This FileLocationDialogComponent dialog is currently never going to be opened because it has been replaced by mat-menu\r\n    // in the web-api.component.html template. If you want to use the dialog instead of the menu, you need to remove the\r\n    // mat-menu and replace it with a button that opens the dialog with empty parameters.\r\n    // Dialog has been replaced by menu because from update to Angular 16 CreateFileDialogComponent wasn't opening anymore if \r\n    // FileLocationDialogComponent dialog was used.\r\n    // if (global == null) {\r\n    //   const fileLocationDialogRef = this.dialog.open(FileLocationDialogComponent, {\r\n    //     autoFocus: false,\r\n    //     viewContainerRef: this.viewContainerRef,\r\n    //     width: '650px',\r\n    //   });\r\n    //   fileLocationDialogRef.afterClosed().subscribe((isShared?: boolean) => {\r\n    //     if (isShared == null) { return; }\r\n    //     this.createController(isShared);\r\n    //   });\r\n    //   return;\r\n    // }\r\n\r\n    const createFileDialogData: CreateFileDialogData = {\r\n      folder: 'api',\r\n      global,\r\n      purpose: 'Api',\r\n    };\r\n    const createFileDialogRef = this.dialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data: createFileDialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    createFileDialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) { return; }\r\n\r\n      if (result.name.endsWith('Controller.cs')) {\r\n        const fileName = result.name.substring(result.name.lastIndexOf('/') + 1);\r\n        if (!/^[A-Z][a-zA-Z0-9]*Controller\\.cs$/g.test(fileName)) {\r\n          const message = `\"${fileName}\" is invalid controller name. Should be something like \"MyController.cs\"`;\r\n          this.snackBar.open(message, null, { duration: 5000 });\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.snackBar.open('Saving...');\r\n      this.sourceService.create(result.name, global, result.templateKey).subscribe(() => {\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n        this.fetchWebApis();\r\n      });\r\n    });\r\n  }\r\n\r\n  private fetchWebApis() {\r\n    this.sourceService.getWebApis().subscribe(webApis => {\r\n      this.webApis$.next(webApis);\r\n    });\r\n  }\r\n\r\n  private enableCodeGetter() {\r\n    return this.enableCode;\r\n  }\r\n\r\n  private openCode(api: WebApi) {\r\n    this.dialogService.openCodeFile(api.path, api.isShared);\r\n  }\r\n\r\n  private openRestApi(api: WebApi) {\r\n    this.router.navigate([GoToDevRest.getUrlWebApi(api)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          field: 'Folder',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const api: WebApi = params.data;\r\n            return api.folder;\r\n          },\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const api: WebApi = params.data;\r\n            return api.name;\r\n          },\r\n        },\r\n        {\r\n          field: 'Type',\r\n          flex: 1,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (params) => {\r\n            const api: WebApi = params.data;\r\n            return api.isShared;\r\n          },\r\n          cellRenderer: WebApiTypeComponent,\r\n        },\r\n        {\r\n          width: 82,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: WebApiActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: WebApiActionsParams = {\r\n              enableCodeGetter: () => this.enableCodeGetter(),\r\n              onOpenCode: (api) => this.openCode(api),\r\n              onOpenRestApi: (api) => this.openRestApi(api),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\ninterface WebApiViewModel { \r\n  webApis: WebApi[];\r\n}\r\n","import { View } from '../../models';\r\n\r\nexport const AnalyzeParts = {\r\n  Settings: 'Settings',\r\n  Resources: 'Resources',\r\n} as const;\r\nexport type AnalyzePart = typeof AnalyzeParts[keyof typeof AnalyzeParts];\r\n\r\nexport interface AnalyzeSettingsViewModel {\r\n  views: View[];\r\n  selectedView: string;\r\n  stack: SettingsStackItem[];\r\n}\r\n\r\nexport interface SettingsStackItem {\r\n  Path: string;\r\n  Priority: number;\r\n  Source: string;\r\n  TotalResults: number;\r\n  Type: string;\r\n  Value: string;\r\n  _value: string;\r\n}\r\n","<!-- App Config -->\r\n@if (viewModel$ | async; as vm) {\r\n  <mat-card class=\"eav-card\">\r\n    <mat-card-header class=\"eav-card-header\">\r\n      <mat-card-title>Configuration</mat-card-title>\r\n      <mat-icon>redeem</mat-icon>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <p>\r\n        <div class=\"eav-info-row\">\r\n          <div class=\"eav-info-row__label\">Name:</div>\r\n          <div class=\"eav-info-row__value\">\r\n            <span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.displayName)\">{{vm.displayName}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"eav-info-row\">\r\n          <div class=\"eav-info-row__label\">Folder:</div>\r\n          <div class=\"eav-info-row__value\">\r\n            <span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.folder)\">{{vm.folder}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"eav-info-row\">\r\n          <div class=\"eav-info-row__label\">Version:</div>\r\n          <div class=\"eav-info-row__value\">\r\n            <span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.version)\">{{vm.version}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"eav-info-row\">\r\n          <div class=\"eav-info-row__label\">For</div>\r\n          <div class=\"eav-info-row__value\">\r\n            <b>2sxc: </b><span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.toSxc)\"> {{vm.toSxc}} </span>\r\n            <b> DNN: </b><span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.dnn)\"> {{vm.dnn}} </span>\r\n            <b> Oqt: </b><span [tippy]=\"'Click to copy to clipboard'\" (click)=\"copyToClipboard(vm.oqt)\"> {{vm.oqt}} </span>\r\n          </div>\r\n        </div>\r\n      <!-- </p> -->\r\n    </mat-card-content>\r\n    <div class=\"eav-card-space-div\"></div>\r\n    <mat-card-actions align=\"start\">\r\n      <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://docs.2sxc.org/basics/app/configuration.html' }\"></ng-container>\r\n      <button mat-button class=\"eav-button__with-icon\" (click)=\"edit()\">\r\n        <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.appConfigurationsCount || null\"\r\n        matBadgePosition=\"below after\" aria-hidden=\"false\" class=\"eav-icon\">edit</mat-icon>\r\n        <span>Edit</span>\r\n      </button>\r\n      <button mat-button class=\"eav-button__with-icon\" (click)=\"openMetadata()\">\r\n        <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.appMetadataCount || null\"\r\n        matBadgePosition=\"below after\" aria-hidden=\"false\" class=\"eav-icon\">local_offer</mat-icon>\r\n        <span>Metadata</span>\r\n      </button>\r\n    </mat-card-actions>\r\n  </mat-card>\r\n}\r\n\r\n<ng-template #docsLink let-icon let-label let-link=\"link\">\r\n  <a mat-button class=\"eav-button__with-icon\" href=\"{{link}}\" target=\"_blank\" [tippy]=\"'online documentation'\">\r\n    <mat-icon class=\"eav-icon\">{{ icon ?? \"menu_book\" }}</mat-icon>\r\n    <span>{{ label }}</span>\r\n  </a>\r\n</ng-template>","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ContentItemsService } from '../../../content-items/services/content-items.service';\r\nimport { GoToMetadata } from '../../../metadata';\r\nimport { BaseComponent } from '../../../shared/components/base-component/base.component';\r\nimport { eavConstants } from '../../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../../shared/helpers/url-prep.helper';\r\nimport { DialogSettings } from '../../../shared/models/dialog-settings.model';\r\nimport { EditForm } from '../../../shared/models/edit-form.model';\r\nimport { Context } from '../../../shared/services/context';\r\nimport { AppInternalsService } from '../../services/app-internals.service';\r\nimport { Subject, Observable, combineLatest, map } from 'rxjs';\r\nimport { AppInternals } from '../../models/app-internals.model';\r\nimport { copyToClipboard } from '../../../shared/helpers/copy-to-clipboard.helper';\r\n\r\n@Component({\r\n  selector: 'app-app-configuration-card',\r\n  templateUrl: './app-configuration-card.component.html',\r\n  styleUrls: ['./app-configuration-card.component.scss'],\r\n})\r\nexport class AppConfigurationCardComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() dialogSettings: DialogSettings;\r\n\r\n  // More proper ViewModel\r\n  appSettingsInternal$ = new Subject<AppInternals>();\r\n  viewModel$: Observable<ViewModel>;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private contentItemsService: ContentItemsService,\r\n    private context: Context,\r\n    private snackBar: MatSnackBar,\r\n    private appInternalsService: AppInternalsService) {\r\n    super(router, route);\r\n\r\n    // New with proper ViewModel\r\n    this.viewModel$ = combineLatest([\r\n      this.appSettingsInternal$,\r\n      this.contentItemsService.getAll(eavConstants.contentTypes.appConfiguration),\r\n    ]).pipe(map(([settings, contentItems]) => {\r\n      const contentItem = contentItems[0];\r\n      const result: ViewModel = {\r\n        appConfigurationsCount: settings.EntityLists.ToSxcContentApp.length,\r\n        appMetadataCount: settings.MetadataList.Items.length,\r\n        displayName: contentItem?.DisplayName ?? '-',\r\n        folder: contentItem?.Folder ?? '-',\r\n        version: contentItem?.Version ?? '-',\r\n        toSxc: contentItem?.RequiredVersion ?? '-',\r\n        dnn: contentItem?.RequiredDnnVersion ?? '-',\r\n        oqt: contentItem?.RequiredOqtaneVersion ?? '-',\r\n      }\r\n      return result;\r\n    }));\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchSettings();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchSettings(); }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.snackBar.dismiss();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n\r\n  edit() {\r\n    const staticName = eavConstants.contentTypes.appConfiguration;\r\n    this.contentItemsService.getAll(staticName).subscribe(contentItems => {\r\n      let form: EditForm;\r\n      \r\n      if (contentItems.length < 1) throw new Error(`Found no settings for type ${staticName}`);\r\n      if (contentItems.length > 1) throw new Error(`Found too many settings for type ${staticName}`);\r\n      form = {\r\n        items: [{ EntityId: contentItems[0].Id }],\r\n      };\r\n\r\n      const formUrl = convertFormToUrl(form);\r\n      this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n    });\r\n  }\r\n\r\n  openMetadata() {\r\n    const url = GoToMetadata.getUrlApp(\r\n      this.context.appId,\r\n      `Metadata for App: ${this.dialogSettings.Context.App.Name} (${this.context.appId})`,\r\n    );\r\n    this.router.navigate([url], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private fetchSettings() {\r\n    const getObservable = this.appInternalsService.getAppInternals(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, this.context.appId);\r\n    getObservable.subscribe(x => {\r\n      // 2dm - New mode for Reactive UI\r\n      this.appSettingsInternal$.next(x);\r\n      });\r\n  }\r\n}\r\n\r\nclass ViewModel {\r\n  appConfigurationsCount: number;\r\n  appMetadataCount: number;\r\n  displayName: string;\r\n  folder: string;\r\n  version: string;\r\n  toSxc: string;\r\n  dnn: string;\r\n  oqt: string;\r\n}","@if (viewModel$ | async; as vm) {\r\n  @if (isGlobal || isPrimary) {\r\n    <div class=\"alert alert-info scope-info\">\r\n      @if (isGlobal) {\r\n        This is the Global App. Anything configured here will affect all Sites and Apps in this installation.\r\n      }\r\n      @if (isPrimary) {\r\n        This is the Primary App of this Site. You can also configure sitewide settings and resources here.\r\n      }\r\n      See <a href=\"https://go.2sxc.org/settings\" target=\"_blank\">docs</a>.\r\n    </div>\r\n  }\r\n  <div class=\"eav-cards-box\">\r\n    <!-- Settings -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Settings</mat-card-title>\r\n        <mat-icon>settings</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Settings are things like SQL-connection strings, default \"items-to-show\" numbers and similar.\r\n          If necessary, settings like a link to an RSS-Feed could be different in each language.\r\n          <a href=\"https://go.2sxc.org/settings\" target=\"_blank\">docs</a>\r\n        </p>\r\n        <table class=\"eav-settings-and-resources-table\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>System Settings</th>\r\n              <th>Custom Settings</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- Settings for Global App -->\r\n            @if (isGlobal) {\r\n              <tr>\r\n                <th>Global</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemSettings, SystemSettingsScopes.App)\"\r\n                    tippy=\"Edit global system settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemSettingsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customSettings, 'edit')\"\r\n                    tippy=\"Edit custom global settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customSettings, 'config')\"\r\n                    tippy=\"Configure fields of the custom global settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsFieldsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            }\r\n            <!-- Settings for Primary App -->\r\n            @if (isPrimary) {\r\n              <tr>\r\n                <th>Site</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemSettings, SystemSettingsScopes.Site)\"\r\n                    tippy=\"Edit site system settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemSettingsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customSettings, 'edit')\"\r\n                    tippy=\"Edit custom site settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customSettings, 'config')\"\r\n                    tippy=\"Configure fields of the custom site settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsFieldsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngTemplateOutlet=\"goToGlobal\"></ng-container>\r\n            }\r\n            <!-- Settings for App and Content -->\r\n            @if (isApp) {\r\n              <tr>\r\n                <th>{{ dialogSettings.Context.App.Name }}</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemSettings, SystemSettingsScopes.App)\"\r\n                    tippy=\"Edit app system settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemSettingsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.settings)\" tippy=\"Edit custom app settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"config(eavConstants.contentTypes.settings)\"\r\n                    tippy=\"Configure fields of the custom app settings\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customSettingsFieldsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngTemplateOutlet=\"goToSite\"></ng-container>\r\n              <ng-container *ngTemplateOutlet=\"goToGlobal\"></ng-container>\r\n            }\r\n          </tbody>\r\n        </table>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/settings' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"analyze(AnalyzeParts.Settings)\" tippy=\"See the result of combining all settings\">\r\n          <mat-icon class=\"eav-icon\">manage_search</mat-icon>\r\n          <span>Analyze Combined Settings</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Resources -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Language Resources (i18n)</mat-card-title>\r\n        <mat-icon>translate</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Resources are used for labels and things like that in the App.\r\n          They are usually needed to create multi-lingual views and such, and should not be used for App-Settings.\r\n          <a href=\"https://go.2sxc.org/settings\" target=\"_blank\">docs</a>\r\n        </p>\r\n        <table class=\"eav-settings-and-resources-table\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>System Resources</th>\r\n              <th>Custom Resources</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <!-- Resources for Global App -->\r\n            @if (isGlobal) {\r\n              <tr>\r\n                <th>Global</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemResources, SystemSettingsScopes.App)\"\r\n                    tippy=\"Edit global system resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemResourcesCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customResources, 'edit')\"\r\n                    tippy=\"Edit custom global resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customResources, 'config')\"\r\n                    tippy=\"Configure fields of the custom global resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesFieldsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            }\r\n            <!-- Resources for Primary App -->\r\n            @if (isPrimary) {\r\n              <tr>\r\n                <th>Site</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemResources, SystemSettingsScopes.Site)\"\r\n                    tippy=\"Edit site system resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemResourcesCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customResources, 'edit')\"\r\n                    tippy=\"Edit custom site resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"fixContentType(eavConstants.contentTypes.customResources, 'config')\"\r\n                    tippy=\"Configure fields of the custom site resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesFieldsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngTemplateOutlet=\"goToGlobal\"></ng-container>\r\n            }\r\n            <!-- Resources for App and Content -->\r\n            @if (isApp) {\r\n              <tr>\r\n                <th>{{ dialogSettings.Context.App.Name }}</th>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.systemResources, SystemSettingsScopes.App)\"\r\n                    tippy=\"Edit app system resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.systemResourcesCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  <button mat-icon-button (click)=\"edit(eavConstants.contentTypes.resources)\"\r\n                    tippy=\"Edit custom app resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">edit</mat-icon>\r\n                  </button>\r\n                  <button mat-icon-button (click)=\"config(eavConstants.contentTypes.resources)\"\r\n                    tippy=\"Configure fields of the custom app resources\">\r\n                    <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.customResourcesFieldsCount || null\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\">dns</mat-icon>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <ng-container *ngTemplateOutlet=\"goToSite\"></ng-container>\r\n              <ng-container *ngTemplateOutlet=\"goToGlobal\"></ng-container>\r\n            }\r\n          </tbody>\r\n        </table>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/settings' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"analyze(AnalyzeParts.Resources)\" tippy=\"See the result of combining all resources\">\r\n          <mat-icon class=\"eav-icon\">manage_search</mat-icon>\r\n          <span>Analyze Combined Resources</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Templates which are re-used in the table above -->\r\n    <ng-template #goToGlobal>\r\n      <tr>\r\n        <th>Global</th>\r\n        <td>\r\n          <button mat-icon-button (click)=\"openGlobalSettings()\" tippy=\"Go to global\">\r\n            <mat-icon>open_in_new</mat-icon>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template #goToSite>\r\n      <tr>\r\n        <th>Site</th>\r\n        <td>\r\n          <button mat-icon-button (click)=\"openSiteSettings()\" tippy=\"Go to site\">\r\n            <mat-icon>open_in_new</mat-icon>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </div>\r\n  <div class=\"eav-cards-box\">\r\n    <app-app-configuration-card [dialogSettings]=\"dialogSettings\">\r\n    </app-app-configuration-card>\r\n    <!-- LightSpeed -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Performance</mat-card-title>\r\n        <mat-icon>bolt</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          LightSpeed Output Cache to speed up page by 50-90%\r\n        </p>\r\n        <app-feature-text-info [featureNameId]=\"'LightSpeedOutputCache'\" [asInfo]=\"true\"></app-feature-text-info>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/lightspeed' }\"></ng-container>\r\n        <button mat-button  class=\"eav-button__with-icon\" (click)=\"openLightSpeed()\" disabled=\"{{!vm.lightSpeedEnabled}}\">\r\n          <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadge]=\"vm.appLightSpeedCount || null\"\r\n          matBadgePosition=\"below after\" aria-hidden=\"false\" class=\"eav-icon\">bolt</mat-icon>\r\n          <span>Edit LightSpeed</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Security / CSP -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Security</mat-card-title>\r\n        <mat-icon>local_police</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          ContentSecurityPolicy (CSP) features in this App - for maximum control.\r\n        </p>\r\n        <app-feature-text-info [featureNameId]=\"'ContentSecurityPolicy'\" [asInfo]=\"true\"></app-feature-text-info>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://go.2sxc.org/csp' }\"></ng-container>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n    <!-- Permissions -->\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Permissions</mat-card-title>\r\n        <mat-icon>person</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Give access to the entire app (all data). Use with care.\r\n        </p>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://docs.2sxc.org/basics/app/permissions.html' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" [disabled]=\"!dialogSettings.Context.Enable.AppPermissions\" (click)=\"openPermissions()\">\r\n          <mat-icon matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadgePosition=\"below after\"\r\n          [matBadge]=\"dialogSettings.Context.App.Permissions.Count || null\" aria-hidden=\"false\" class=\"eav-icon\">person</mat-icon>\r\n          <span>\r\n            Edit Permissions\r\n            @if (!dialogSettings.Context.Enable.AppPermissions) {\r\n              @if (isGlobal) {\r\n                (not on Global App)\r\n              }\r\n              @if (isApp) {\r\n                (not on Content)\r\n              }\r\n            }\r\n          </span>\r\n        </button>\r\n        <ng-container *ngTemplateOutlet=\"docsLink; context: { link: 'https://patrons.2sxc.org/features/feat/PermissionsByLanguage' }\"></ng-container>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"openLanguagePermissions(vm.langPermsEnabled)\">\r\n          <mat-icon [matBadgeHidden]=\"vm.langPermsEnabled\" matBadgeSize=\"small\" matBadge=\"💎\"\r\n            matBadgePosition=\"below after\" aria-hidden=\"false\" class=\"eav-icon\">\r\n            person\r\n          </mat-icon>\r\n          <span>Language Permissions</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </div>\r\n}\r\n\r\n<ng-template #docsLink let-icon let-label let-link=\"link\">\r\n  <a mat-button class=\"eav-button__with-icon\" href=\"{{link}}\" target=\"_blank\" [tippy]=\"'online documentation'\">\r\n    <mat-icon class=\"eav-icon\">{{ icon ?? \"menu_book\" }}</mat-icon>\r\n    <span>{{ label }}</span>\r\n  </a>\r\n</ng-template>","import { ChangeDetectorRef, Component, Input, OnChanges, OnDestroy, OnInit, SimpleChanges, ViewContainerRef } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ContentItemsService } from '../../content-items/services/content-items.service';\r\nimport { GlobalConfigService } from '../../edit/shared/store/ngrx-data';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { eavConstants, SystemSettingsScope, SystemSettingsScopes } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { AppScopes } from '../../shared/models/dialog-context.models';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { Context } from '../../shared/services/context';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { FeaturesService } from '../../shared/services/features.service';\r\nimport { AppAdminHelpers } from '../app-admin-helpers';\r\nimport { ContentTypeEdit } from '../models';\r\nimport { AppDialogConfigService, ContentTypesService } from '../services';\r\nimport { AppInternalsService } from '../services/app-internals.service';\r\nimport { ImportAppPartsService } from '../services/import-app-parts.service';\r\nimport { AnalyzePart, AnalyzeParts } from '../sub-dialogs/analyze-settings/analyze-settings.models';\r\nimport { Subject, Observable, combineLatest, map } from 'rxjs';\r\nimport { AppInternals } from '../models/app-internals.model';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { FeatureComponentBase } from '../../features/shared/base-feature.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-app-configuration',\r\n  templateUrl: './app-configuration.component.html',\r\n  styleUrls: ['./app-configuration.component.scss'],\r\n})\r\nexport class AppConfigurationComponent extends BaseComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() dialogSettings: DialogSettings;\r\n\r\n  eavConstants = eavConstants;\r\n  AnalyzeParts = AnalyzeParts;\r\n  SystemSettingsScopes = SystemSettingsScopes;\r\n  AppScopes = AppScopes;\r\n  isGlobal: boolean;\r\n  isPrimary: boolean;\r\n  isApp: boolean;\r\n  debugEnabled$ = this.globalConfigService.getDebugEnabled$();\r\n\r\n  // More proper ViewModel\r\n  appSettingsInternal$ = new Subject<AppInternals>();\r\n  viewModel$: Observable<AppConfigurationViewModel>;\r\n\r\n  public appStateAdvanced = false;\r\n\r\n  public features: FeaturesService = new FeaturesService();\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private contentItemsService: ContentItemsService,\r\n    private context: Context,\r\n    private importAppPartsService: ImportAppPartsService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n    private appInternalsService: AppInternalsService,\r\n    private contentTypesService: ContentTypesService,\r\n    private globalConfigService: GlobalConfigService,\r\n    appDialogConfigService: AppDialogConfigService,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef\r\n  ) {\r\n    super(router, route);\r\n    this.features.loadFromService(appDialogConfigService);\r\n\r\n    // New with proper ViewModel\r\n    this.viewModel$ = combineLatest([\r\n      this.appSettingsInternal$,\r\n      this.features.isEnabled$(FeatureNames.LightSpeed),\r\n      this.features.isEnabled$(FeatureNames.ContentSecurityPolicy),\r\n      this.features.isEnabled$(FeatureNames.PermissionsByLanguage),\r\n    ]).pipe(map(([settings, lightSpeedEnabled, cspEnabled, langPermsEnabled]) => {\r\n      const result: AppConfigurationViewModel = {\r\n        lightSpeedEnabled,\r\n        cspEnabled,\r\n        langPermsEnabled,\r\n        appLightSpeedCount: settings.MetadataList.Items.filter(i => i._Type.Name == eavConstants.appMetadata.LightSpeed.ContentTypeName).length,\r\n        systemSettingsCount: this.isPrimary\r\n          ? settings.EntityLists.SettingsSystem.filter(i => i.SettingsEntityScope === SystemSettingsScopes.Site).length\r\n          : settings.EntityLists.SettingsSystem.filter(i => !i.SettingsEntityScope).length,\r\n        customSettingsCount: settings.EntityLists.AppSettings?.length,\r\n        customSettingsFieldsCount: settings.FieldAll.AppSettings?.length,\r\n        systemResourcesCount: this.isPrimary\r\n          ? settings.EntityLists.ResourcesSystem.filter(i => i.SettingsEntityScope === SystemSettingsScopes.Site).length\r\n          : settings.EntityLists.ResourcesSystem.filter(i => !i.SettingsEntityScope).length,\r\n        customResourcesCount: settings.EntityLists.AppResources?.length,\r\n        customResourcesFieldsCount: settings.FieldAll.AppResources?.length,\r\n      }\r\n      return result;\r\n    }));\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    this.fetchSettings();\r\n    this.subscription.add(this.refreshOnChildClosedDeep().subscribe(() => { this.fetchSettings(); }));\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.dialogSettings != null) {\r\n      const appScope = this.dialogSettings.Context.App.SettingsScope;\r\n      this.isGlobal = appScope === AppScopes.Global;\r\n      this.isPrimary = appScope === AppScopes.Site;\r\n      this.isApp = appScope === AppScopes.App;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.snackBar.dismiss();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  edit(staticName: string, systemSettingsScope?: SystemSettingsScope) {\r\n    this.contentItemsService.getAll(staticName).subscribe(contentItems => {\r\n      let form: EditForm;\r\n\r\n      switch (staticName) {\r\n        case eavConstants.contentTypes.systemSettings:\r\n        case eavConstants.contentTypes.systemResources:\r\n          const systemSettingsEntities = contentItems.filter(i => systemSettingsScope === SystemSettingsScopes.App\r\n            ? !i.SettingsEntityScope\r\n            : i.SettingsEntityScope === SystemSettingsScopes.Site);\r\n          if (systemSettingsEntities.length > 1) {\r\n            throw new Error(`Found too many settings for type ${staticName}`);\r\n          }\r\n          const systemSettingsEntity = systemSettingsEntities[0];\r\n          form = {\r\n            items: [\r\n              systemSettingsEntity == null\r\n                ? {\r\n                  ContentTypeName: staticName,\r\n                  Prefill: {\r\n                    ...(systemSettingsScope === SystemSettingsScopes.Site && { SettingsEntityScope: SystemSettingsScopes.Site }),\r\n                  }\r\n                }\r\n                : { EntityId: systemSettingsEntity.Id }\r\n            ],\r\n          };\r\n          break;\r\n        case eavConstants.contentTypes.customSettings:\r\n        case eavConstants.contentTypes.customResources:\r\n          if (contentItems.length > 1) {\r\n            throw new Error(`Found too many settings for type ${staticName}`);\r\n          }\r\n          const customSettingsEntity = contentItems[0];\r\n          form = {\r\n            items: [\r\n              customSettingsEntity == null\r\n                ? { ContentTypeName: staticName }\r\n                : { EntityId: customSettingsEntity.Id }\r\n            ],\r\n          };\r\n          break;\r\n        default:\r\n          if (contentItems.length < 1) throw new Error(`Found no settings for type ${staticName}`);\r\n          if (contentItems.length > 1) throw new Error(`Found too many settings for type ${staticName}`);\r\n          form = {\r\n            items: [{ EntityId: contentItems[0].Id }],\r\n          };\r\n      }\r\n\r\n      const formUrl = convertFormToUrl(form);\r\n      this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n    });\r\n  }\r\n\r\n  openLightSpeed() {\r\n    const form = AppAdminHelpers.getLightSpeedEditParams(this.context.appId);\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  openSiteSettings() {\r\n    const sitePrimaryApp = this.dialogSettings.Context.Site.PrimaryApp;\r\n    this.dialogService.openAppAdministration(sitePrimaryApp.ZoneId, sitePrimaryApp.AppId, 'app');\r\n  }\r\n\r\n  openGlobalSettings() {\r\n    const globalPrimaryApp = this.dialogSettings.Context.System.PrimaryApp;\r\n    this.dialogService.openAppAdministration(globalPrimaryApp.ZoneId, globalPrimaryApp.AppId, 'app');\r\n  }\r\n\r\n  config(staticName: string) {\r\n    this.router.navigate([`fields/${staticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  openPermissions() {\r\n    this.router.navigate([GoToPermissions.getUrlApp(this.context.appId)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  openLanguagePermissions(enabled: boolean) {\r\n    if (enabled)\r\n      this.router.navigate(['language-permissions'], { relativeTo: this.route.firstChild });\r\n    else\r\n      FeatureComponentBase.openDialog(this.dialog, FeatureNames.PermissionsByLanguage, this.viewContainerRef, this.changeDetectorRef);\r\n  }\r\n\r\n  analyze(part: AnalyzePart) {\r\n    this.router.navigate([`analyze/${part}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private fetchSettings() {\r\n    const getObservable = this.appInternalsService.getAppInternals(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, this.context.appId);\r\n    getObservable.subscribe(x => {\r\n      // 2dm - New mode for Reactive UI\r\n      this.appSettingsInternal$.next(x);\r\n      });\r\n  }\r\n\r\n  fixContentType(staticName: string, action: 'edit' | 'config') {\r\n    this.contentTypesService.retrieveContentTypes(eavConstants.scopes.configuration.value).subscribe(contentTypes => {\r\n      const contentTypeExists = contentTypes.some(ct => ct.Name === staticName);\r\n      if (contentTypeExists) {\r\n        if (action === 'edit') {\r\n          this.edit(staticName);\r\n        } else if (action === 'config') {\r\n          this.config(staticName);\r\n        }\r\n      } else {\r\n        const newContentType = {\r\n          StaticName: '',\r\n          Name: staticName,\r\n          Description: '',\r\n          Scope: eavConstants.scopes.configuration.value,\r\n          ChangeStaticName: false,\r\n          NewStaticName: '',\r\n        } as ContentTypeEdit;\r\n        this.contentTypesService.save(newContentType).subscribe(success => {\r\n          if (!success) { return; }\r\n\r\n          if (action === 'edit') {\r\n            this.edit(staticName);\r\n          } else if (action === 'config') {\r\n            this.config(staticName);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nclass AppConfigurationViewModel {\r\n  // Lightspeed\r\n  lightSpeedEnabled: boolean;\r\n  appLightSpeedCount: number;\r\n\r\n  // CSP\r\n  cspEnabled: boolean;\r\n\r\n  // Language Permissions\r\n  langPermsEnabled: boolean;\r\n\r\n  systemSettingsCount: number;\r\n  customSettingsCount: number;\r\n  customSettingsFieldsCount: number;\r\n  systemResourcesCount: number;\r\n  customResourcesCount: number;\r\n  customResourcesFieldsCount: number;\r\n}","<ng-container>\r\n  <div class=\"eav-cards-box\">\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Instructions for Sync or Export/Import</mat-card-title>\r\n        <mat-icon>info</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          This section is for export/import of the entire App,\r\n          for synchronizing with the file storage (eg. for Git)\r\n          or to export parts of the App for re-import in another App.\r\n        </p>\r\n        <p>\r\n          To export/import Content-Types, Queries, Views or Data, use the respective tabs.\r\n        </p>\r\n      </mat-card-content>\r\n    </mat-card>\r\n  </div>\r\n\r\n  <div class=\"eav-cards-box\">\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Export this entire App</mat-card-title>\r\n        <mat-icon>cloud_download</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Create an package (zip) which can be installed in another site.\r\n        </p>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"exportApp()\">\r\n          <mat-icon class=\"eav-icon\">cloud_download</mat-icon>\r\n          <span>Export App</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <mat-card-title>Export or Import parts of this App</mat-card-title>\r\n        <mat-icon>import_export</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          Create an xml containing parts of the app, e.g. content and templates.\r\n          Import parts from such an xml into this app.\r\n        </p>\r\n      </mat-card-content>\r\n      <div class=\"eav-card-space-div\"></div>\r\n      <mat-card-actions align=\"start\">\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"exportParts()\">\r\n          <mat-icon class=\"eav-icon\">cloud_download</mat-icon>\r\n          <span>Export Parts</span>\r\n        </button>\r\n        <button mat-button class=\"eav-button__with-icon\" (click)=\"importParts()\">\r\n          <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n          <span>Import Parts</span>\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </div>\r\n\r\n  <div class=\"eav-cards-box\">\r\n    <mat-card class=\"eav-card\">\r\n      <mat-card-header class=\"eav-card-header\">\r\n        <div class=\"eav-card-header-title-toggle\">\r\n          <mat-card-title>App-State Versioning</mat-card-title>\r\n          <mat-slide-toggle class=\"eav-card-header-toggle\" [(ngModel)]=\"appStateAdvanced\">{{ appStateAdvanced ? \"advanced\" : \"basic\" }}</mat-slide-toggle>\r\n        </div>\r\n        <mat-icon>history_toggle_off</mat-icon>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <p>\r\n          You can save / restore the app with data and configuration in <code>.data/app.xml</code>.\r\n          This file can then also be versioned using git.\r\n        </p>\r\n        @if (appStateAdvanced) {\r\n          <p>\r\n            <br>\r\n              In Advanced mode you can also sync all the site files used by this app.\r\n              They will be placed in a folder inside <code>App_Data</code> and allow sync/restore with git or another server.\r\n            </p>\r\n          }\r\n        </mat-card-content>\r\n        @if (appStateAdvanced) {\r\n          <app-feature-text-info [featureNameId]=\"'AppSyncWithSiteFiles'\"></app-feature-text-info>\r\n        }\r\n        <div class=\"eav-card-space-div\"></div>\r\n        <mat-card-actions align=\"start\">\r\n          @if (!appStateAdvanced) {\r\n            <button mat-button class=\"eav-button__with-icon\" (click)=\"exportAppXml(false)\">\r\n              <mat-icon class=\"eav-icon\">more_time</mat-icon>\r\n              <span>Save state</span>\r\n            </button>\r\n            <button mat-button class=\"eav-button__with-icon\" (click)=\"resetApp(false)\">\r\n              <mat-icon class=\"eav-icon\">restore</mat-icon>\r\n              <span>Restore state</span>\r\n            </button>\r\n          }\r\n          @if (appStateAdvanced) {\r\n            <button mat-button class=\"eav-button__with-icon\" (click)=\"exportAppXml(true)\">\r\n              <mat-icon class=\"eav-icon\">more_time</mat-icon>\r\n              <span>Save with Assets</span>\r\n            </button>\r\n            <button mat-button class=\"eav-button__with-icon\" (click)=\"resetApp(true)\">\r\n              <mat-icon class=\"eav-icon\">restore</mat-icon>\r\n              <span>Restore with Assets</span>\r\n            </button>\r\n          }\r\n        </mat-card-actions>\r\n      </mat-card>\r\n    </div>\r\n  </ng-container>\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { ExportAppService } from '../services/export-app.service';\r\nimport { ImportAppPartsService } from '../services/import-app-parts.service';\r\n\r\n@Component({\r\n  selector: 'app-sync-configuration',\r\n  templateUrl: './sync-configuration.component.html',\r\n  styleUrls: ['./sync-configuration.component.scss'],\r\n})\r\nexport class SyncConfigurationComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @Input() dialogSettings: DialogSettings;\r\n\r\n  public appStateAdvanced = false;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private exportAppService: ExportAppService,\r\n    private importAppPartsService: ImportAppPartsService,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ngOnDestroy() {\r\n    this.snackBar.dismiss();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  exportApp() {\r\n    this.router.navigate([`export`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  exportParts() {\r\n    this.router.navigate([`export/parts`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  importParts() {\r\n    this.router.navigate([`import/parts`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  exportAppXml(withFiles: boolean) {\r\n    this.snackBar.open('Exporting...');\r\n    this.exportAppService.exportForVersionControl({ includeContentGroups: true, resetAppGuid: false, withFiles }).subscribe({\r\n      next: result => {\r\n        this.snackBar.open('Export completed into the \\'App_Data\\' folder.', null, { duration: 3000 });\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Export failed. Please check console for more information', null, { duration: 3000 });\r\n      },\r\n    });\r\n  }\r\n\r\n  resetApp(withFiles: boolean) {\r\n    if (!confirm('Are you sure? All changes since last xml export will be lost')) { return; }\r\n    this.snackBar.open('Resetting...');\r\n    this.importAppPartsService.resetApp(withFiles).subscribe({\r\n      next: result => {\r\n        this.snackBar.open(\r\n          'Reset worked! Since this is a complex operation, please restart the Website to ensure all caches are correct',\r\n          null,\r\n          { duration: 30000 },\r\n        );\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Reset failed. Please check console for more information', null, { duration: 3000 });\r\n      },\r\n    });\r\n  }\r\n}","@if (viewModel$ | async; as vm) {\r\n<mat-toolbar>\r\n  <div class=\"toolbar-container\">\r\n    <!-- App Logo -->\r\n    @if (vm.dialogSettings?.Context.App.Icon) {\r\n    <img (click)=\"sidenav.opened = !sidenav.opened\"\r\n      [src]=\"vm.dialogSettings?.Context.App.Icon + '?w=40&h=40&mode=crop'\" />\r\n    } @else {\r\n      <mat-icon class=\"menu-container\" (click)=\"sidenav.opened = !sidenav.opened\">menu</mat-icon>\r\n    }\r\n    <!-- App Name -->\r\n    <div>\r\n      @if (vm.dialogSettings?.Context.App.SettingsScope === AppScopes.Global) {\r\n      Global\r\n      }\r\n      @if (vm.dialogSettings?.Context.App.SettingsScope !== AppScopes.Global) {\r\n      {{ vm.dialogSettings?.Context.App.Name }}\r\n      }\r\n      <span>\r\n        Admin\r\n      </span>\r\n    </div>\r\n    <!-- Breadcrum in the Toolbar after show Img and Aoo Name -->\r\n    <xng-breadcrumb [separator]=\"emptyTemplate\">\r\n      <ng-container *xngBreadcrumbItem=\"let breadcrumb; let info = info; let last = last\">\r\n        @if (last) {\r\n          <mat-icon class=\"breadcrumb-icon\">chevron_right</mat-icon>\r\n       {{ breadcrumb }}\r\n        }\r\n      </ng-container>\r\n    </xng-breadcrumb>\r\n    <ng-template #emptyTemplate></ng-template>\r\n  </div>\r\n  <span class=\"toolbar-spacer\"></span>\r\n  <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n    <mat-icon>close</mat-icon>\r\n  </button>\r\n</mat-toolbar>\r\n<mat-sidenav-container>\r\n\r\n  <mat-sidenav #sidenav [mode]=\"smallScreen.matches ? 'over' : 'side'\" [opened]=\"sideNavOpened\">\r\n    <!-- Sho Sidenav for each Item form navItems (filterd by dialogSettings in Ts) -->\r\n    @for (item of navItems; track item.path) {\r\n    <a (click)=\"changeUrl(item.path)\" [routerLink]=\"item.path\" routerLinkActive=\"active\" matRipple\r\n      class=\"app-menu-container\" [tippy]=\"item.tippy\">\r\n      <mat-icon>{{ item.icon }}</mat-icon>\r\n      <div class=\"link-text\">{{ item.name }}</div>\r\n    </a>\r\n    }\r\n    <div class=\"sideNav-bottom-info\">\r\n      <p>use App logo to show/hide menu</p>\r\n    </div>\r\n  </mat-sidenav>\r\n\r\n  <mat-sidenav-content>\r\n    <router-outlet></router-outlet>\r\n    <!-- Show each Componenten by Path name -->\r\n    <div class=\"container-content\">\r\n\r\n      @if (vm.currentPath === 'home') {\r\n      <app-getting-started [gettingStartedUrl]=\"vm.dialogSettings.Context.App.GettingStartedUrl\">\r\n      </app-getting-started>\r\n      }\r\n\r\n      @if (vm.currentPath === 'data') {\r\n      <app-data [enablePermissions]=\"vm.dialogSettings.Context.Enable.AppPermissions\">\r\n      </app-data>\r\n      }\r\n\r\n      @if (vm.currentPath === 'queries') {\r\n      <app-queries [enablePermissions]=\"vm.dialogSettings.Context.Enable.AppPermissions\">\r\n      </app-queries>\r\n      }\r\n\r\n      @if (vm.currentPath === 'views') {\r\n      <app-views [enableCode]=\"vm.dialogSettings.Context.Enable.CodeEditor\"\r\n        [enablePermissions]=\"vm.dialogSettings.Context.Enable.AppPermissions\"\r\n        [appIsGlobal]=\"vm.dialogSettings.Context.App.IsShared\"\r\n        [appIsInherited]=\"vm.dialogSettings.Context.App.IsInherited\">\r\n      </app-views>\r\n      }\r\n\r\n      @if (vm.currentPath === 'web-api') {\r\n      <app-web-api [enableCode]=\"vm.dialogSettings.Context.Enable.CodeEditor\">\r\n      </app-web-api>\r\n      }\r\n\r\n      @if (vm.currentPath === 'app') {\r\n      <app-app-configuration [dialogSettings]=\"vm.dialogSettings\">\r\n      </app-app-configuration>\r\n      }\r\n\r\n      @if (vm.currentPath === 'sync') {\r\n      <app-sync-configuration [dialogSettings]=\"vm.dialogSettings\">\r\n      </app-sync-configuration>\r\n      }\r\n\r\n    </div>\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n}\r\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, filter, map, startWith } from 'rxjs';\r\nimport { BaseComponent } from '../../shared/components/base-component/base.component';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { UpdateEnvVarsFromDialogSettings } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { AppScopes } from '../../shared/models/dialog-context.models';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { AppDialogConfigService } from '../services/app-dialog-config.service';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { MediaMatcher } from '@angular/cdk/layout';\r\n\r\n/** Interface to store navigation object to configure menus */\r\ninterface NavItem {\r\n  name: string;\r\n  path: string;\r\n  icon: string;\r\n  tippy: string;\r\n}\r\n\r\nconst navItems: NavItem[] = [\r\n  { name: 'Info', path: 'home', icon: 'info', tippy: 'App Info' },\r\n  { name: 'Data', path: 'data', icon: 'menu', tippy: 'Data / Content' },\r\n  {\r\n    name: 'Queries',\r\n    path: 'queries',\r\n    icon: 'filter_list',\r\n    tippy: 'Queries / Visual Query Designer',\r\n  },\r\n  {\r\n    name: 'Views',\r\n    path: 'views',\r\n    icon: 'layers',\r\n    tippy: 'Views / Templates',\r\n  },\r\n  { name: 'Web API', path: 'web-api', icon: 'offline_bolt', tippy: 'WebApi' },\r\n  {\r\n    name: 'App',\r\n    path: 'app',\r\n    icon: 'settings_applications',\r\n    tippy: 'App Settings',\r\n  },\r\n  { name: 'Sync', path: 'sync', icon: 'sync', tippy: 'App Export / Import' },\r\n];\r\n\r\n@Component({\r\n  selector: 'app-app-administration-nav',\r\n  templateUrl: './app-administration-nav.component.html',\r\n  styleUrls: ['./app-administration-nav.component.scss'],\r\n})\r\nexport class AppAdministrationNavComponent\r\n  extends BaseComponent\r\n  implements OnInit, OnDestroy\r\n{\r\n  AppScopes = AppScopes;\r\n\r\n  private dialogSettings$ = new BehaviorSubject<DialogSettings>(undefined);\r\n  private pathsArray$ = new BehaviorSubject<string[]>(undefined);\r\n  private currentPath$ = combineLatest([\r\n    this.pathsArray$,\r\n    this.router.events.pipe(\r\n      filter((event) => event instanceof NavigationEnd),\r\n      map(() => this.route.snapshot.firstChild.url[0].path),\r\n      startWith(this.route.snapshot.firstChild.url[0].path)\r\n    ),\r\n  ]).pipe(\r\n    map(([paths, currentPath]) => {\r\n      if (paths == null) return;\r\n      return currentPath;\r\n    })\r\n  );\r\n\r\n  // Generate View Model\r\n  viewModel$ = combineLatest([this.dialogSettings$, this.currentPath$]).pipe(\r\n    map(([dialogSettings, currentPath]) => {\r\n      return {\r\n        dialogSettings,\r\n        currentPath,\r\n      };\r\n    })\r\n  );\r\n\r\n  smallScreen: MediaQueryList = this.media.matchMedia('(max-width: 1000px)');\r\n  @ViewChild('sidenav') sidenav!: MatSidenav;\r\n  sideNavOpened = !this.smallScreen.matches;\r\n\r\n  /** Navigation menu buttons - prefilled; may be modified after settings are loaded */\r\n  navItems = navItems;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private dialogRef: MatDialogRef<AppAdministrationNavComponent>,\r\n    private appDialogConfigService: AppDialogConfigService,\r\n    private media: MediaMatcher\r\n  ) {\r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchDialogSettings();\r\n    this.subscription.add(\r\n      this.refreshOnChildClosedDeep().subscribe(() => {\r\n        this.fetchDialogSettings();\r\n      })\r\n    );\r\n\r\n    this.smallScreen.addEventListener(\r\n      'change',\r\n      (c) => (this.sidenav.opened = !c.matches)\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dialogSettings$.complete();\r\n    this.pathsArray$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  changeUrl(path: string) {\r\n    if (path === 'data') path = `data/${eavConstants.scopes.default.value}`;\r\n    this.router.navigate([path], { relativeTo: this.route });\r\n  }\r\n\r\n  private fetchDialogSettings() {\r\n    this.appDialogConfigService.getShared$().subscribe((dialogSettings) => {\r\n      UpdateEnvVarsFromDialogSettings(dialogSettings.Context.App);\r\n      this.dialogSettings$.next(dialogSettings);\r\n\r\n      if (!dialogSettings.Context.Enable.Query)\r\n        this.navItems = this.navItems.filter(\r\n          (item) => item.name !== 'Queries' && item.name !== 'Web API'\r\n        );\r\n\r\n      this.pathsArray$.next(this.navItems.map((item) => item.path));\r\n    });\r\n  }\r\n}\r\n","// This will make it easier for us to see where certain feature names are in use\r\n\r\nexport const FeatureNames = {\r\n  AppSyncWithSiteFiles: 'AppSyncWithSiteFiles',\r\n  WysiwygPasteFormatted: 'WysiwygPasteFormatted',\r\n  PasteImageFromClipboard: 'PasteImageFromClipboard',\r\n  EditUiShowNotes: 'EditUiShowNotes',\r\n  EditUiShowMetadataFor: 'EditUiShowMetadataFor',\r\n  NoSponsoredByToSic: 'NoSponsoredByToSic',\r\n  EditUiTranslateWithGoogle: 'EditUiTranslateWithGoogle',\r\n  LightSpeed: 'LightSpeedOutputCache',\r\n  ContentSecurityPolicy: 'ContentSecurityPolicy',\r\n  PermissionsByLanguage: 'PermissionsByLanguage',\r\n  FieldShareConfigManagement: 'FieldShareConfigManagement',\r\n};\r\n","@if (viewModel$ | async; as vm) {\r\n  @if (vm.show) {\r\n    <div class=\"feature-text-info\" (click)=\"openDialog()\" [tippy]=\"'Features.Tooltip' | translate: vm.feature\">\r\n      <mat-icon class=\"icon icon-{{vm.icon}}\">{{ vm.icon }}</mat-icon>\r\n      <div class=\"feature-text-info-content\">\r\n        <div class=\"feature-text-info-title\">{{ 'Features.FeatureNotActivated' | translate }}</div>\r\n        <div class=\"feature-text-info-subtitle\">{{ 'Features.ClickToFindOutMore' | translate }}</div>\r\n      </div>\r\n    </div>\r\n  }\r\n} @else {\r\n  <div>loading...</div>\r\n}\r\n<ng-template #loading>\r\n  <div>loading...</div>\r\n</ng-template>","import { ChangeDetectorRef, Component, Input, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { FeaturesService } from '../../shared/services/features.service';\r\nimport { FeatureSummary } from '../models';\r\nimport { FeatureComponentBase } from '../shared/base-feature.component';\r\nimport { BehaviorSubject, map, Observable, combineLatest, switchMap } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-feature-text-info',\r\n  templateUrl: './feature-text-info.component.html',\r\n  styleUrls: ['./feature-text-info.component.scss']\r\n})\r\nexport class FeatureTextInfoComponent extends FeatureComponentBase {\r\n  @Input()\r\n  public set asInfo(value: boolean) { this.asInfo$.next(value); }\r\n  asInfo$ = new BehaviorSubject<boolean>(false);\r\n\r\n  viewModel$: Observable<FeatureTextInfoViewModel>;\r\n\r\n  constructor(\r\n    dialog: MatDialog,\r\n    viewContainerRef: ViewContainerRef,\r\n    featuresService: FeaturesService,\r\n    changeDetectorRef: ChangeDetectorRef\r\n  ) {\r\n    super(dialog, viewContainerRef, changeDetectorRef , featuresService);\r\n    this.viewModel$ = combineLatest([this.feature$, this.asInfo$, this.show$]).pipe(map(([feature, asInfo, show]) => \r\n      ({\r\n        feature,\r\n        icon: asInfo ? 'info' : 'warning',\r\n        show\r\n      })));\r\n  }\r\n\r\n}\r\n\r\ninterface FeatureTextInfoViewModel {\r\n  feature: FeatureSummary;\r\n  icon: string;\r\n  show: boolean;\r\n}","@if (viewModel$ | async; as vm) {\r\n  <mat-card>\r\n    <mat-card-header>\r\n      <mat-card-title>{{ vm.feature.Name }}</mat-card-title>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <p [innerHtml]=\"vm.feature.Description | safeHtml\"></p>\r\n      <div class=\"eav-info-row\">\r\n        <div class=\"eav-info-row__label\">{{ \"Features.Status\" | translate }}:</div>\r\n        <div class=\"eav-info-row__value\">\r\n          <span>{{ (vm.feature.IsEnabled ? \"Features.Active\" : \"Features.NotActive\") | translate }}</span>\r\n        </div>\r\n      </div>\r\n      @if (vm.feature.NameId; as id) {\r\n        <div class=\"eav-info-row\">\r\n          <div class=\"eav-info-row__label\">ID:</div>\r\n          <div class=\"eav-info-row__value eav_click\">\r\n            <span [tippy]=\"id\" (click)=\"copyToClipboard(id)\">{{ id }}</span>\r\n          </div>\r\n        </div>\r\n      }\r\n    </mat-card-content>\r\n    <mat-card-actions align=\"end\">\r\n      @if (vm.feature.Link; as link) {\r\n        <button mat-raised-button color=\"accent\"\r\n          class=\"eav-card-action-button\" (click)=\"findOutMore(link)\">\r\n          <mat-icon>open_in_new</mat-icon>\r\n          {{ \"Features.FindOutMore\" | translate }}\r\n        </button>\r\n      }\r\n      <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">\r\n        {{ \"Features.Close\" | translate }}\r\n      </button>\r\n    </mat-card-actions>\r\n  </mat-card>\r\n}","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Observable, combineLatest, map } from 'rxjs';\r\nimport { copyToClipboard } from '../../shared/helpers/copy-to-clipboard.helper';\r\nimport { Feature } from '../models';\r\nimport { FeatureDetailService } from '../services/feature-detail.service';\r\n\r\n@Component({\r\n  selector: 'app-feature-info-dialog',\r\n  templateUrl: './feature-info-dialog.component.html',\r\n  styleUrls: ['./feature-info-dialog.component.scss']\r\n})\r\nexport class FeatureInfoDialogComponent implements OnInit {\r\n  viewModel$: Observable<FeatureInfoViewModel>;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: string,\r\n    private dialogRef: MatDialogRef<FeatureInfoDialogComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private featureDetailService: FeatureDetailService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.viewModel$ = combineLatest([\r\n      this.featureDetailService.getFeatureDetails(this.dialogData)\r\n    ]).pipe(map(([feature]) => ({ feature })));\r\n  }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n\r\n  findOutMore(link: string): void { \r\n    window.open(link, '_blank');\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n\r\ninterface FeatureInfoViewModel {\r\n  feature: Feature;\r\n}","import { ChangeDetectorRef, Directive, Input, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { FeaturesService } from '../../shared/services/features.service';\r\nimport { FeatureInfoDialogComponent } from '../feature-info-dialog/feature-info-dialog.component';\r\nimport { BehaviorSubject, switchMap, Observable, map, combineLatest } from 'rxjs';\r\nimport { FeatureSummary } from '../models';\r\n\r\n@Directive()\r\nexport class FeatureComponentBase {\r\n  /** Feature NameId to check */\r\n  @Input()\r\n  public set featureNameId(value: string) { this.featureNameId$.next(value); }\r\n  protected featureNameId$ = new BehaviorSubject<string>(null);\r\n\r\n  /** By default, it will show if it's false - here we can change it to show if true */\r\n  @Input()\r\n  public set showIf(value: boolean) { this.showIf$.next(value == true); }\r\n  protected showIf$ = new BehaviorSubject<boolean>(false);\r\n\r\n  // TODO: @SDV - MAKE REACTIVE - SEE text-info-component example\r\n  // featureOn: boolean = true;\r\n  feature$: Observable<FeatureSummary>;\r\n  show$: Observable<boolean>;\r\n\r\n  constructor(\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    protected featuresService: FeaturesService\r\n  ) {\r\n    this.feature$ = this.featureNameId$.pipe(\r\n      switchMap(featName => this.featuresService.get$(featName)\r\n    ));\r\n    this.show$ = combineLatest([this.feature$, this.showIf$]).pipe(\r\n      // tap(data => console.log('2dm - show$', data)),\r\n      map(([feat,showIf]) => showIf == (feat?.IsEnabled ?? false))\r\n    );\r\n  }\r\n\r\n  openDialog() {\r\n    FeatureComponentBase.openDialog(this.dialog, this.featureNameId$.value, this.viewContainerRef, this.changeDetectorRef);\r\n  }\r\n\r\n  /** Public/Static so it can be called from elsewhere */\r\n  public static openDialog(dialog: MatDialog, featureId: string, viewContainerRef: ViewContainerRef, changeDetectorRef: ChangeDetectorRef) {\r\n    dialog.open(FeatureInfoDialogComponent, {\r\n      autoFocus: false,\r\n      data: featureId,\r\n      viewContainerRef: viewContainerRef,\r\n      width: '400px',\r\n    });\r\n\r\n    changeDetectorRef.markForCheck();\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}