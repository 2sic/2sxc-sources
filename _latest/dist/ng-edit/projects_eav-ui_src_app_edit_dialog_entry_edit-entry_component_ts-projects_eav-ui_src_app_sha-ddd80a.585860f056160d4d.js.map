{"version":3,"file":"projects_eav-ui_src_app_edit_dialog_entry_edit-entry_component_ts-projects_eav-ui_src_app_sha-ddd80a.585860f056160d4d.js","mappings":"6XAOO,IAAMA,GAAiB,MAAxB,MAAOA,UAAyBC,IAEpCC,cACEC,OAAA,EAAMC,MAAS,CAACJ,sBAGTK,KAAAC,MAASC,GAAuBA,EAAKC,IAF9C,CAIAC,aAAaC,GACX,GAAqB,MAAjBA,EACF,OAEF,MAAMC,EAAYC,OAAOC,QAAQH,GAC9BI,IAAI,EAAEC,EAAYC,MAAU,CAC3BR,KAAMO,EACNE,WAAYD,KAEhBX,KAAKa,QAAQP,EACf,CAEAQ,gBAAgBJ,EAAoBK,GAClC,OAAOf,KAAKgB,QAAQN,IAAaE,WAAWG,EAC9C,iDAtBWpB,EAAgB,sCAAhBA,EAAgBsB,QAAhBtB,EAAgBuB,UAAAC,WADH,QAAM,SACnBxB,CAAiB,KCIjByB,GAAiB,MAAxB,MAAOA,UAAyBxB,IAEpCC,cACEC,OAAA,EAAMC,MAAS,CAACqB,sBAGTpB,KAAAC,MAASC,GAAoBA,EAAKmB,IAAIC,OAAOC,mBAFtD,CAIAC,YAAYC,EAA8BC,GAGxC,MAAMC,EAAqBF,EACvBlB,OAAOC,QAAQiB,GACZhB,IAAI,EAAEY,EAAKO,MAAQ,CAASP,SAAQO,KACvC,GAIEC,EAA4C,MAAhBH,EAC9BnB,OAAOC,QAAQkB,GACZI,QAAQ,EAAEC,EAAGC,KAAoBzB,OAAOC,QAAQwB,GAC9CF,QAAQ,EAAEG,EAAIC,KAAWlC,KAAKmC,YAAYD,KAE/C,GAEJlC,KAAKa,QAAQ,IAAKc,KAAUE,GAC9B,CAGAO,QAAQF,GACNlC,KAAKa,QAAQb,KAAKmC,YAAYD,GAChC,CAGAG,QAAQhB,EAAaO,GAEnB,MAAMU,EAAkB,CACtBjB,IAFFA,EAAMA,EAAIC,OAAOC,uBAGZK,EACHW,KAAM,IACDX,EAASW,OAIhBvC,KAAKwC,IAAIF,EACX,CAIQH,YAAYD,GAClB,OAAOA,EACJO,OAAOvC,IAASA,EAAKwC,UACrBjC,IAAIP,KACHmB,IAAKnB,EAAKyC,YACVJ,KAAM,IAAKrC,GACX0C,MAAO1C,EAAK2C,MAElB,iDAzDWzB,EAAgB,sCAAhBA,EAAgBH,QAAhBG,EAAgBF,UAAAC,WADH,QAAM,SACnBC,CAAiB,2ICF9B,MAAM0B,EAAW,CACfC,KAAK,EACLC,eAAe,EACfC,cAAc,GAOT,IAAMC,EAAgB,MAAvB,MAAOA,UAAwBC,IAInCtD,YACUuD,GAERtD,QAFQE,KAAAoD,sBAHVpD,KAAAqD,OAAMtD,MAAS,CAACmD,mBAAkBJ,EAMlC,CAEAE,cAAcd,GACZ,OAAAlC,KAAKqD,IAAIC,KAAK,gBAAiB,CAAEpB,QAAOqB,QAASvD,KAAKuD,UAC/CvD,KAAKwD,KAAKC,KAAqBzD,KAAK0D,OAhB5B,iBAgBgDxB,EAAO,CACpEyB,OAAQ,CAAEC,MAAO5D,KAAK4D,SACrBC,QACDpD,KAAIqD,IACFA,EAASC,QAAQC,SAASC,KAAOH,EAASC,QAAQC,SAASC,KAAKxB,OAAOyB,GAAYA,EAASC,WACrFL,KACR,EACDM,KAAIN,IACF9D,KAAKoD,oBAAoBiB,WAAWP,EAASC,QAAQO,OAAOC,UAAS,GAG3E,CAEAtB,aAAauB,EAAyBC,GACpC,OAAAzE,KAAKqD,IAAIC,KAAK,eAAgB,CAAEkB,SAAQC,eACjCzE,KAAKwD,KAAKC,KAAiBzD,KAAK0D,OA9BxB,iBA8B4Cc,EAAQ,CACjEb,OAAQ,CAAEC,MAAO5D,KAAK4D,MAAOa,eAEjC,iDA9BWvB,GAAewB,MAAAC,KAAA,sCAAfzB,EAAejC,QAAfiC,EAAehC,WAAA,SAAfgC,CAAgB,6BCDtB,MAAM0B,GAAe,CAC1BC,KAAM,OACNC,KAAM,OACNC,OAAQ,UCZH,IAAMC,EAAsB,MAA7B,MAAOA,UAA8BpF,IAEzCC,cACEC,OAAA,EAAMC,MAAS,CAACiF,2BAGThF,KAAAC,MAASC,GAAwBA,EAAK+E,OAkB/CjF,MAAAkF,EAA2B,IAAIC,IAAqD,cApBpF,CAIAC,eAAeC,EAAsCJ,EAAgBK,GAEX,MAApDA,EAAWC,OAAOC,kBAAkBH,KACtCA,EAAc9E,OAAOkF,KAAKH,EAAWC,OAAOC,mBAAmB,IAOjExF,KAAKwC,IALgC,CACnCyC,SACAS,kBAAmBL,IAAgBT,GAAaG,OAChDY,YAAaN,IAAgBT,GAAaC,MAG9C,CAEAe,eAAeX,GACb,OAAOjF,MAAKkF,EAAyBW,YAAYZ,EAAQ,IAAMjF,KAAK8F,cAAc9F,KAAK+F,IAAId,IAC7F,CACAC,GAIOY,cAAcE,GAMnB,OAL6CA,EAAcN,kBACvDd,GAAaG,OACbiB,EAAcL,YACZf,GAAaC,KACbD,GAAaE,IAErB,iDAnCWE,EAAqB,sCAArBA,EAAqB/D,QAArB+D,EAAqB9D,UAAAC,WADR,QAAM,SACnB6D,CAAsB,4BCyBnC,MAAMlC,EAAW,CACfC,KAAK,EACLlD,aAAa,EACbmD,eAAe,EACfiD,kBAAkB,EAClBC,mBAAmB,EACnBC,mBAAmB,GAUd,IAAMC,GAAsB,MAA7B,MAAOA,EAMXC,GAEAC,GAEAC,GAEA1G,YACU2G,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GACAC,GACAC,IAbArH,KAAAwG,QACAxG,KAAAyG,aACAzG,KAAA0G,cACA1G,KAAA2G,mBACA3G,KAAA4G,yBACA5G,KAAA6G,qBACA7G,KAAA8G,uBACA9G,KAAA+G,YACA/G,KAAAgH,kBACAhH,KAAAiH,gBACAjH,KAAAkH,WACAlH,KAAAmH,oBACAnH,KAAAoH,oBACApH,KAAAqH,mBAxBVrH,KAAAqD,OAAMtD,MAAS,CAACqG,0BAAyBtD,GAElC9C,KAAAsH,UAASC,QAAO,GAEvBvH,MAAAqG,KAAmBmB,KAAUtE,GAE7BlD,MAAAsG,KAAmBkB,KAAUC,KAE7BzH,MAAAuG,EAA2D,GAkBzDvG,KAAKqD,IAAIqE,IAAI,cAAe,KAAM,cACpC,CAEA1E,gBACE,MAAM2E,EAAI3H,KAAKqD,IAAIC,KAAK,iBAClBsE,KAAUC,KAAkB7H,KAAKwG,MAAMsB,SAASnE,OAAyBzB,OAEzE6F,EAAO,IACRH,EACH1F,MAAO0F,EAAQ1F,MAAMzB,IAAI,CAACP,EAAM8H,SAEzB9H,EACH+H,SAAUD,MAIhBL,EAAEO,EAAE,gBAAiBH,GAErB,MAAMI,EAAYC,KAAKC,UAAUN,EAAK7F,OACtClC,MAAKqG,EAAiBrD,cAAcmF,GAAWG,UAAUC,IAGvD,MAAMzE,EAA2B,IAC5ByE,EACHC,MAAOD,EAAgBC,MAAM/H,IAAIP,IAE/B,MAAMuI,EAAeV,EAAK7F,MAAMwG,KAAKC,GAAKA,EAAEV,WAAa/H,EAAK0I,OAAOX,UACrEN,SAAEO,EAAE,wBAAyB,CAAChI,OAAMuI,iBAEb,MAAhBA,EACHvI,EACA,IACKA,EACH0I,OAAQ,IACH1I,EAAK0I,OACRC,QAASJ,EAAaI,QACtBC,WAAYL,EAAaK,gBAKrCnB,EAAEO,EAAE,8BAA+B,CAACpE,aAIpC9D,KAAKqH,gBAAgB0B,KAAKjF,EAASC,QAASD,IAAQ,EACpDkF,KAAgClF,EAASC,QAAQkF,KACjDjJ,MAAKkJ,EAAkBpF,GACvB9D,MAAKmJ,IACLnJ,MAAKoJ,IAELpJ,KAAKsH,OAAO+B,KAAI,EAAI,EAExB,CAEAH,GAAkBI,GACNtJ,KAAKqD,IAAIC,KAAK,oBAAxB,MACM2B,EAASsE,KAAKC,MAAsB,MAAhBD,KAAKE,UACzBC,ECrIJ,SAAUC,EAAwBnD,GACtC,IAAIoD,EAAkB,EACtB,UAAWC,KAAQrD,EAAMsB,SAASgC,aAChC,KAAID,EAAKE,IAAIC,QAAU,GACvB,UAAWC,KAAcJ,EAAKE,IACJ,SAApBE,EAAWJ,MACfD,IAGJ,OAA2B,IAApBA,CACT,CD2H2BD,CAAwB3J,KAAKwG,OAC9C0D,EAAYZ,EAAQd,MAAM/H,IAAIP,IAAQA,GAAKiK,OAAOhK,MAExDH,KAAK0G,YAAY0D,UAAUd,EAAQd,OAEnCxI,KAAK2G,iBAAiB9F,QAAQyI,EAAQe,YACtCrK,KAAK4G,uBAAuB0D,oBAAoBhB,EAAQiB,kBACxDvK,KAAK6G,mBAAmB2D,gBAAgBlB,EAAQmB,cAChDzK,KAAKmH,iBAAiB/G,aAAakJ,EAAQoB,UAAUnI,MACrDvC,KAAKoH,iBAAiB5F,YAAY8H,EAAQoB,UAAUC,MAAOrB,EAAQoB,UAAUnI,MAE7E,MAAML,EAAQlC,KAAK0G,YAAYkE,QAAQV,GACjCW,EAAoC,IAAvB3I,EAAM,GAAGiI,OAAOW,GAC7BC,EAAmE,MAAzD7I,EAAM,GAAG0G,OAA6BoC,gBAChDC,GAAiBJ,IAAmD,IAArC7K,KAAKwG,MAAMsB,SAASoD,KAAKC,QACxDC,EAAgB,IACjB9B,EAAQ+B,SACXC,SAAUC,KAAUC,YAAYlC,EAAQ+B,SAASC,UACjDb,aAAcgB,KAAeD,YAAYlC,EAAQ+B,SAASZ,eAE5DzK,KAAKyG,WAAWiF,eAAepC,EAAQvF,QAASkB,EAAQyE,EAAgBQ,EAAWW,EAAYE,EAAQE,EAAeG,GAEtH,IAAIO,EAAQrC,EAAQvF,QAAQC,SAE5B,MAAM4H,GAAe5L,MAAKsG,EAAiBuF,OAAOF,EAAMG,SAIxD,GAHA9L,KAAK+G,UAAUgF,IAAIH,IAGflC,EAAgB,CAClB,MAAMsC,GCtJN,SAAUC,EAAcC,EAAwBC,GACpD,GAAyB,IAArBA,EAAUnC,OAAgB,OAAOmC,EAErC,IAAIC,EACJ,MAAMC,EAAwB,GACxBC,EAAyB,GAC/B,UAAWpI,KAAYiI,EACjBjI,EAASqI,SAAWL,EACtBE,EAAclI,EACLA,EAASqI,OAAOC,WAAWN,EAAeO,MAAM,KAAK,IAC9DJ,EAAUK,KAAKxI,GAEfoI,EAAWI,KAAKxI,GAGpBmI,SAAUM,KAAK,CAACzE,EAAG0E,IAAM1E,EAAEqE,OAAOM,cAAcD,EAAEL,SAClDD,EAAWK,KAAK,CAACzE,EAAG0E,IAAM1E,EAAEqE,OAAOM,cAAcD,EAAEL,SAEfH,EAA8C,CAACA,KAAgBC,KAAcC,GAA/D,IAAID,KAAcC,EAEtE,CDkI8BL,CAAcN,EAAMmB,QAASnB,EAAM1H,MAC3DjE,KAAKgH,gBAAgBnG,QAAQmL,GAC/B,CACAhM,KAAKiH,cAAc8F,QAAQ9H,EAAQ0G,EAAMmB,QAASnB,EAAMG,SAAS,GAGjE,MAAMzG,GAAcrF,KAAK8G,qBAAqBhB,cAAcwD,GAC5DtJ,KAAK8G,qBAAqB1B,eAAeC,GAAaJ,EAAQjF,KAAKyG,WACrE,CAOA0C,KACYnJ,KAAKqD,IAAIC,KAAK,qBAAxB,MACMpB,EAAQlC,KAAK0G,YAAYkE,QAAQ5K,KAAKyG,WAAWlB,OAAO2E,WACxD8C,EAAWhN,KAAKgH,gBAAgBiG,SAASxM,IAAIyD,GAAYA,EAASqI,QAClErI,EAAWlE,KAAKyG,WAAWvC,WAC5B8I,EAASE,SAAShJ,EAASiJ,UAAUH,EAASN,KAAKxI,EAASiJ,SAC5DH,EAASE,SAAShJ,EAASkJ,UAAUJ,EAASN,KAAKxI,EAASkJ,SAEjE,UAAWlN,KAAQgC,EACjB,UAAWmL,KAAeL,EAAU,CAClC,MAAMM,EAAa,IAAIC,KAAaF,EAAanJ,EAASkJ,SAASI,cAActN,EAAKiK,OAAOvJ,YAC7FZ,MAAKuG,EAAmBvG,MAAKyN,EAAuBvN,EAAKiK,OAAOhK,KAAMkN,IAAgBC,CACxF,CACJ,CAEAG,GAAuB/M,EAAoBwD,GACzC,MAAO,cAAcxD,cAAuBwD,GAC9C,CAEAwJ,iBAAiBhN,EAAoBwD,GACnC,OAAOlE,MAAKuG,EAAmBvG,MAAKyN,EAAuB/M,EAAYwD,GACzE,CAGAkF,KACE,MAAMzB,EAAI3H,KAAKqD,IAAIC,KAAK,qBAElBqK,EAAU3N,KAAK0G,YAAYiH,QAC3BC,EAAY5N,KAAKyG,WAAWlB,OAC5BN,EAAS2I,EAAU3I,OACnB/C,EAAQlC,KAAK0G,YAAYkE,QAAQgD,EAAU1D,WAC3C2D,EAAa7N,KAAK2G,iBAAiBsG,SACnCd,EAAYnM,KAAKgH,gBAAgBiG,SACjC/I,EAAWlE,KAAKyG,WAAWvC,WAEjC,IAAI4J,GAAkB,EACtB,MAAMC,EAAeH,EAAU/C,WAEzBmD,EAAM,IAAIC,IAAsB,0BAEtC,UAAW/N,MAAQgC,EAAO,CACxB,MAAMgM,GAAclO,KAAK6G,mBAAmBsH,qBAAqBjO,IAEjE,UAAWkO,MAAeF,GAAYtN,WAAY,CAChD,MAAMyN,GAAcD,GAAYE,KAC1BC,GAAYV,EAAWnF,KAAKC,IAAKA,GAAE6F,OAASJ,GAAYK,WACxDC,GAAcC,IAAiBC,QAAQL,IAAWC,MAGxD,GAFA7G,EAAEO,EAAE,eAAemG,mBAA4BE,IAAWC,uBAAuBE,OAE7EA,GACF,SAEF,MAAMG,GAAQC,IAAkBC,YAAYC,aAAaT,IAAWC,MAE9DS,GAAkB/O,GAAKiK,OAAOvJ,WAAWwN,GAAYE,MACrDY,GAAgBlB,EAAImB,mBACxB,IAAI5B,KAAarJ,EAASkJ,QAASlJ,EAASkJ,SAASgC,QAAQhB,GAAYiB,WAG3E,GAAyB,IAArBlD,EAAUnC,OAAc,CAC1BrC,EAAEO,EAAE,GAAGmG,kCACP,MAAMiB,GAAa,IAAIC,IAAYN,GAAiB,KAAKO,uBAAuB5M,MAC5EiM,GAAMY,aAAaH,GAAYvB,IACjCJ,EAAQ+B,gBAAgBxP,GAAMkO,GAAaG,GAAWW,GAAe/C,EAAWjI,EAASkJ,QAC7F,KAAO,CACLzF,EAAEO,EAAE,GAAGmG,mCAGP,MAAMsB,GAAcpB,IAAWqB,YACzBC,GAAkB,IAAIN,IAAYN,GAAiB,KAAKa,kBAAkBlN,MAEhF,GADA+E,EAAEO,EAAEmG,GAAa,CAAEsB,eAAaE,sBAC3BF,SAAmCI,IAApBF,GAA+B,CAEjD,MAAMG,GAAkBrC,EAAQsC,6BAA6B/P,GAAKiK,OAAOhK,KAAMiO,GAAYE,KAAM,KAAK,GACtGX,EAAQuC,sBACNhQ,GAAKiK,OAAOhK,KACZiO,GAAYE,KACZuB,GACA3L,EAASkJ,SACT,EACAgB,GAAYI,MACZ,EACAwB,IAEFrI,EAAEO,EAAE,GAAGmG,WACP,QACF,CAEA,MAAM8B,GAAuB,IAAIZ,IAAYN,GAAiB/K,EAASkJ,SAAS0C,kBAAkBlN,MAE5FwN,GAAevB,GAAMY,aAAaU,GAAsBpC,GAC9DpG,EAAEO,EAAEmG,GAAa,CAAEA,eAAa+B,gBAAcD,wBAAsBpC,iBAChEqC,IAWa,MAVCzC,EAAQ+B,gBAAgBxP,GAAMkO,GAAaG,GAAWW,GAAe/C,EAAWjI,EAASkJ,WAUjF8B,GAAcmB,cACpCvC,GAAkB,EAExB,CACF,CACF,CAEA,GAAIA,GAAmB5J,EAASiJ,UAAYjJ,EAASkJ,QAAS,CAC5DpN,KAAKiH,cAAcqJ,WAAWrL,EAAQf,EAASkJ,SAC/C,MAAMmD,GAAUvQ,KAAK+G,UAAUyJ,QAAQ,oCAAqC,CAAEtM,SAAUA,EAASkJ,UACjGpN,KAAKkH,SAASuJ,KAAKF,GAAS,KAAM,CAAEG,SAAU,KAChD,CACF,iDArPWtK,GAAsB1B,MAAAC,MAAAD,MAAAiM,KAAAjM,MAAAkM,KAAAlM,MAAAmM,KAAAnM,MAAAoM,KAAApM,MAAAqM,KAAArM,MAAAsM,GAAAtM,MAAAuM,MAAAvM,MAAAwM,MAAAxM,MAAAyM,KAAAzM,MAAA0M,MAAA1M,MAAA2M,IAAA3M,MAAA4M,IAAA5M,MAAA6M,KAAA,sCAAtBnL,EAAsBnF,QAAtBmF,EAAsBlF,WAAA,SAAtBkF,CAAsB,uBE3CnC,MAAMtD,GAAW,CACfC,KAAK,EACLgG,MAAM,EACNyI,YAAY,EACZC,aAAa,GAuBR,IAAMC,GAAoB,MAA3B,MAAOA,EAIXC,GAEA9R,YAAoB4G,GAAAzG,KAAAyG,aAJpBzG,KAAAqD,OAAMtD,MAAS,CAAC2R,wBAAuB5O,IAEvC9C,MAAA2R,EAA2B,EAE0B,CAGrD5I,KAAK6I,EAAmBC,GACtB7R,KAAKqD,IAAIC,KAAK,OAAQ,CAACsO,YACvB,MAAME,EAAc9R,MAAK+R,EAAYH,GACrC5R,MAAKgS,EAAaF,EAAaD,EAAU,EAC3C,CAEAE,GAAYH,GACV5R,KAAKqD,IAAIC,KAAK,aAAc,CAACsO,YAC7B,MAAMK,EAAuB,GACvBC,EAAsB,GAC5BN,SAAQO,QAAQC,IACd,MAAMC,EAAiB,CACrBxI,KAAMyI,GAAqBC,iBAAiBH,EAAQpS,KAAKyG,WAAWlB,QACpEiN,KAAM,KACNlL,QAAQ,EACRmL,MAAO,MAELJ,EAAKxI,KAAK6I,SA3Cb,SA4CCL,EAAKG,KA5CN,OA6CCP,EAASvF,KAAK2F,IACLA,EAAKxI,KAAK6I,SA7CrB,SA8CEL,EAAKG,KA9CP,MA+CEN,EAAQxF,KAAK2F,GAAI,GAGdJ,EAASU,OAAOT,EACzB,CAEAF,GAAaY,EAAmBf,EAAsBgB,GACpD7S,KAAKqD,IAAIC,KAAK,cAAe,CAACsP,QAAOC,cACrC,MAAMR,EAAOO,EAAMC,GAEnB,GADAA,KACKR,EAEH,YADAR,IAGFQ,EAAKxI,KAAOwI,EAAKxI,KAAO,WAAaiJ,OAAOC,WAE5C,MAAMC,EAAWhT,MAAK2R,EAAajJ,KAAKuK,GAAcA,EAAWpJ,OAASwI,EAAKxI,MAC/E,GAAImJ,EACF,GAAIA,EAAS1L,OACXtH,MAAKgS,EAAaY,EAAOf,EAAUgB,OAC9B,CACL,MAAMK,EAAYA,KAChBb,EAAK/K,QAAS,EACdtH,MAAKgS,EAAaY,EAAOf,EAAUgB,GACnCG,EAASP,MAAMU,oBAAoB,OAAQD,GAC3CF,EAASP,MAAMU,oBAAoB,QAASD,EAAS,EAEvDF,EAASP,MAAMW,iBAAiB,OAAQF,GACxCF,EAASP,MAAMW,iBAAiB,QAASF,EAC3C,KACK,CA9EJ,SA+EGb,EAAKG,MACPH,EAAKI,MAAQY,SAASC,cAAc,QACpCjB,EAAKI,MAAMc,IAAM,aACjBlB,EAAKI,MAAMe,KAAOnB,EAAKxI,MAjFzB,QAkFWwI,EAAKG,OACdH,EAAKI,MAAQY,SAASC,cAAc,UACpCjB,EAAKI,MAAMD,KAAO,SAClBH,EAAKI,MAAMgB,IAAMpB,EAAKxI,MAGxB,MAAMqJ,EAAYA,KAChBb,EAAK/K,QAAS,EACdtH,MAAKgS,EAAaY,EAAOf,EAAUgB,GACnCR,EAAKI,MAAMU,oBAAoB,OAAQD,GACvCb,EAAKI,MAAMU,oBAAoB,QAASD,EAAS,EAEnDb,EAAKI,MAAMW,iBAAiB,OAAQF,GACpCb,EAAKI,MAAMW,iBAAiB,QAASF,GAErCG,SAASK,cAAc,QAAQC,YAAYtB,EAAKI,OAChDzS,MAAK2R,EAAajF,KAAK2F,EACzB,CACF,CAEO,uBAAOE,CAAiBxI,EAAatD,GAC1C,OAAOsD,EAAI6J,QAAQ,mBAAoBC,IAAWC,aAAa,SAAUrN,IACtEmN,QAAQ,iBAAkBC,IAAWC,aAAa,OAAQrN,IAC1DmN,QAAQ,gBAAiBC,IAAWC,aAAa,MAAOrN,IACxDmN,QAAQ,sBAAuBC,IAAWC,aAAa,YAAarN,GACzE,iDA3FWiL,GAAoBhN,MAAAC,KAAA,sCAApB+M,EAAoBzQ,QAApByQ,EAAoBxQ,WAAA,SAApBwQ,CAAoB,iLCZ1B,IAAMqC,GAAgB,MAAvB,MAAOA,EAqBXlU,YAAoBmU,EAA0CC,GAA1CjU,KAAAgU,kBAA0ChU,KAAAiU,eApBtDjU,KAAAkU,MAAgC,CACtC,eCxBW,qfDyBX,iBEzBW,4xBF0BX,eG1BW,q0BH2BX7B,KI3BW,6ZJ4BX,eK5BW,6rBL6BX,aM7BW,41CN8BX,YO9BW,ukCP+BX,aQ/BW,kxBRgCX,aShCW,iuBTiCX,WUjCW,wgCVkCX,kBWlCW,+oBXmCX,YYnCW,gsBZoCX,aapCW,i4BbqCX,YcrCW,u4BdsCX8B,OetCW,4YfuCX,cgBvCW,ilBhBwCXC,QiBxCW,6tBjB2C+E,CAE5FrL,OACExI,OAAOC,QAAQR,KAAKkU,OAAO/B,QAAQ,EAAEkC,EAAMC,MACzCtU,KAAKgU,gBAAgBO,kBAAkBF,EAAMrU,KAAKiU,aAAaO,wBAAwBF,GAAI,EAE/F,iDA3BWP,GAAgBrP,MAAAC,OAAAD,MAAAiM,OAAA,sCAAhBoD,EAAgB9S,QAAhB8S,EAAgB7S,WAAA,SAAhB6S,CAAgB,gEkBnBvB,MAAOU,GACX5U,YAAoB6U,GAAA1U,KAAA0U,UACpB,CAEAC,kBAGE,OAFiB3U,KAAK0U,SACAE,MAExB,CAEAC,eAEE,OADkB7U,KAAK2U,kBAAkBG,YAE3C,CAEAC,oBAGE,OAFa/U,KAAK2U,kBACKG,YAEzB,CAEAE,kBAAkBC,GAAqB,GACrC,OAAOjV,MAAKkV,EAAelV,KAAK2U,kBAAmBM,EACrD,CAEAC,GAAeC,EAAwBC,GACrC,OAAOpV,MAAKqV,EAAiBF,EAASL,aAAcK,EAASG,wBAAyBF,EACxF,CAGAC,GAAiBE,EAA8BC,EAA4BJ,GACzE,IAAKG,EAAc,MAAO,GAE1B,IAAIE,EAAWF,EACZ9U,IAAI,CAAC0U,EAAUO,KACd,MAAMC,EAAWR,EAASS,MACpBC,EAASL,EAAiBE,GAC1BI,EAASX,EAASY,QAClBC,EAAWH,EAASC,EACpBL,EAAWzV,MAAKkV,EAAeC,EAAUC,GACzCa,EAAWR,EAASS,KAAKC,IAAKA,GAAEP,OAChCA,GAAQD,GAAYK,GAAYC,EAChCG,GAAaX,EAAS/M,KAAKyN,IAAKA,GAAEP,QAAQQ,WAAa,IAAMR,GAAQ,EAAI,GAC/E,MAAO,CACLvB,KAAOc,GAAkBkB,WAAa,UACtCX,MACAE,SACAQ,cACAT,WACAK,WACAC,WACAJ,SACAC,SACAX,WACAM,cAIN,OAAIL,IACFK,EAAWA,EAAShT,OAAO0T,GAAKA,EAAEP,QAC7BH,CACT,iDCtDK,IAAMa,GAAsB,MAA7B,MAAOA,EAIXzW,cAFAG,KAAAqD,OAAMtD,MAAS,CAACuW,2BAMhBtW,KAAAuW,mBAAkBhP,QAAO,GAEzBvH,KAAAwW,YAAWjP,QAAO,GAGFvH,KAAAyW,UAAY,IAAIC,MAAiB,GARjD,iDALWJ,EAAsB,sCAAtBA,EAAsBrV,QAAtBqV,EAAsBpV,WAAA,SAAtBoV,CAAsB,qDCKnC,MAAMxT,GAAW,CACfC,KAAK,EACL4T,iBAAiB,EACjBC,QAAQ,EACRnG,MAAM,EACNoG,gCAAgC,GAY3B,IAAMC,GAAmB,MAA1B,MAAOA,UAA2BC,KAItCC,GACAC,GACAC,GAEArX,YACUsX,EACA1Q,GAER3G,QAHQE,KAAAmX,kBACAnX,KAAAyG,aARVzG,KAAAqD,OAAMtD,MAAS,CAAC+W,sBAAqBhU,IAErC9C,MAAAgX,KAAgBxP,KAAU4P,MAC1BpX,MAAAiX,EAASjX,MAAKgX,EAAcxQ,MAC5BxG,MAAAkX,EAAUlX,MAAKgX,EAAcK,OAoB7BrX,MAAAsX,EAAoB,IAAIC,KA0CxBvX,MAAAwX,EAAyD,GAvDvDxX,KAAKqD,IAAI6E,EAAE,cACb,CAEAuP,cACEzX,MAAKsX,EAAkBI,WACvB5X,MAAM2X,aACR,CAEAE,OACE3X,MAAK4X,IACL5X,MAAK6X,GACP,CAEAP,GAEAQ,KAAe,OAAO9X,MAAKiX,EAAOnP,SAASnE,MAAyB,CAEpEoU,KACE,MAAMC,EAAIhY,MAAK8X,IACTG,EAAoC,MAAvBD,EAAEE,mBAAiD,MAApBF,EAAEG,eACpD,MAAO,CACLxU,OAAQqU,EACRC,aACAG,UAAiC,MAAtBJ,EAAEK,kBAA+C,MAAnBL,EAAEM,cAC3CC,KAAMN,EAAaD,EAAEE,kBAAoBF,EAAEK,iBAC3CG,QAASP,EAAaD,EAAEG,eAAiBH,EAAEM,cAE/C,CAGAG,WAAWD,EAAiB9X,GAC1B,MAAMgY,EAAaF,EAAQG,WACrBhV,EAAS3D,MAAK8X,IAEpB,OADmBnU,EAAOuU,oBAAsBxX,GAAciD,EAAOwU,iBAAmBO,CAE1F,CAGAE,YAAYJ,EAAiB9X,GAC3B,MAAMgY,EAAaF,EAAQG,WAC3B,OAAO3Y,MAAKiX,EAAOtT,OAAOE,QACxBgV,MAAiBb,GAAqBA,EAAEE,oBAAsBxX,GAAcsX,EAAEG,iBAAmBO,GAErG,CAEOI,iBAAiBN,EAAiB9X,EAAoBqY,GAE3D,MAAM1X,EAAM,GAAGmX,KAAW9X,IACpBsY,EAAShZ,MAAKwX,EAAsBnW,GAC1C,GAAI2X,EAAQ,OAAOA,EAGnB,MAAMC,EAAMjZ,KAAK4Y,YAAYJ,EAAS9X,GACtC,OAAOV,MAAKwX,EAAsBnW,IAAG,EAAI6X,OAASD,EAAK,CAAEF,YAC3D,CACAvB,GAGAb,gBAAgB6B,EAAiB9X,GAC/B,MAAMiH,EAAI3H,KAAKqD,IAAIC,KAAK,kBAAmB,CAAEkV,UAAS9X,eAChDuY,EAAMjZ,MAAKsX,EAAkBzT,QACjCpB,MAAO0W,GAAMA,EAAGd,mBAAqB3X,GAAcyY,EAAGb,gBAAkBE,GAAwB,MAAbW,EAAG3U,SAAc,EACpG/D,KAAI0Y,GAAMA,EAAG3U,SAEf,OAAOmD,EAAEyR,QAAQH,EACnB,CAGAI,kBACE,OAAOrZ,MAAKsX,EAAkBzT,QAAKpD,KAAIsB,GAAK,MAC9C,CAEA6U,OAAOA,EAAiB4B,EAAiB9X,EAAoB4Y,GAC3D,MAAM3R,EAAI3H,KAAKqD,IAAIC,KAAK,SAAU,CAAEsT,SAAQ4B,UAAS9X,aAAY4Y,iBAC3DC,EAAQvZ,MAAK+X,IACbC,EAAIuB,EAAM5V,OAGVoG,EAAM8J,IAAW2F,8BAA8BxZ,MAAKiX,EAFvC,QAAQe,EAAE9V,SAAWqX,EAAMtB,WAAa,YAAYsB,EAAMhB,QAAQgB,EAAMf,UAAY,IACpF,QAAQR,EAAE9V,SAAW0U,EAAS,YAAYlW,KAAc8X,IAAY,KAEvF,GAAW,MAAPzO,EAAa,OAAOpC,EAAE8R,IAAI,aAC9BzZ,MAAKkX,EAAQwC,SAAS,CAAC3P,GAAM,CAAE4P,MAAOL,GAAgB,CAAEA,kBACxD3R,EAAE8R,IAAI,kBAAmB,CAAE1P,OAC7B,CAGA0G,KAAK+H,EAAiB9X,EAAoBqH,GACxC,MAAMJ,EAAI3H,KAAKqD,IAAIC,KAAK,OAAQ,CAAEkV,UAAS9X,aAAYqH,SACjD6R,KAAUC,KAAiB9R,GAC3BwR,EAAQvZ,MAAK+X,IAEnB,GAAIwB,EAAMtB,WACR,OAAAjY,MAAKkX,EAAQwC,SAAS,CAAC,QAAQE,KAAY,CAAEE,WAAY9Z,MAAKiX,IACvDtP,EAAE8R,IAAI,6BAIf,MAEM1P,EAAM8J,IAAW2F,8BAA8BxZ,MAAKiX,EAFvC,QAAQsC,EAAM5V,OAAOzB,QACrB,QAAQqX,EAAM5V,OAAOzB,gBAAgBxB,KAAc8X,UAAgBoB,KAEtF,GAAW,MAAP7P,EAAa,OAAOpC,EAAE8R,IAAI,aAC9BzZ,MAAKkX,EAAQwC,SAAS,CAAC3P,IACvBpC,EAAE8R,IAAI,kBAAmB,CAAE1P,OAC7B,CAGA6N,KACE5X,KAAK+Z,cAAcvX,IACjBxC,MAAKiX,EAAOtT,OACTE,QACCgV,MAAiBb,GAA4C,MAAvBA,EAAEE,mBAAiD,MAApBF,EAAEG,iBAExE7P,UAAU2P,GAAcjY,KAAKmX,gBAAgB6C,iBAAiBha,KAAKyG,WAAWlB,OAAON,OAAQgT,IAEpG,CAEAJ,KACE7X,KAAK+Z,cAAcvX,IACjBxC,MAAKgX,EAAciD,qBAAqBpW,QACtCpD,KAAI,KACF,MAAM8Y,EAAQvZ,MAAK+X,IACnB,MAAO,CACLwB,QACA/U,OAAQ,CACN6T,iBAAkBkB,EAAMhB,KACxBD,cAAe4B,SAASX,EAAMf,QAAS,IACvChU,OAAQxE,MAAKkX,EAAQiD,uBAAuBC,QAAQT,WAI1DrR,UAAU,EAAGiR,QAAO/U,aAKpB,GAHAxE,MAAKsX,EAAkB+C,KAAK7V,IAGvB+U,EAAMnB,UAAW,OAEtB,MAAMJ,EAAIuB,EAAM5V,OACVoG,EAAM8J,IAAW2F,8BAA8BxZ,MAAKiX,EAAQ,QAAQe,EAAE9V,gBAAgB8V,EAAEK,oBAAoBL,EAAEM,gBAAiB,QAAQN,EAAE9V,SACpI,MAAP6H,GACJ/J,MAAKkX,EAAQwC,SAAS,CAAC3P,GAAI,GAGjC,iDA3JW+M,GAAkBpS,MAAAC,KAAAD,MAAAiM,KAAA,sCAAlBmG,EAAkB7V,QAAlB6V,EAAkB5V,WAAA,SAAlB4V,CAAmB,oBCmE1B,MAAOwD,GAGX,kBAAOC,CAAYxT,EAA6ByT,EAAmBC,GACjE,MAAO,CACLC,MAAO3T,EAAUyJ,QAAQgK,IAAcC,GAAU,IACjDE,MAAO,KACPC,UAAU,EACVC,WAAW,EACXC,UAAU,EACVC,QAAQ,EAEZ,CAGA,cAAOxK,CAAQxJ,EAA6ByT,EAAmB7W,GAC7D,MAAO,CACL+W,MAAO3T,EAAUyJ,QAAQgK,EAAW7W,GACpCgX,MAAO,KACPC,UAAU,EACVC,WAAW,EACXC,UAAU,EACVC,QAAQ,EAEZ,ECjHI,MAAgBC,UAGbhb,KAAA8C,SAAW,CAChBC,KAAK,EACLkY,YAAY,EACZC,cAAc,EACdC,cAAc,EACdC,YAAY,EACZvb,aAAa,EACbwb,OAAQ,IAAIC,KAAa,cACzB,CAIFzb,cAMOG,KAAAub,cAAaC,OAA0B,aAAc,MAOrDxb,KAAAyb,kBAAuCC,OAAY,iBAAkB,IAAM1b,KAAKub,aAAarQ,QAAU,GAb9F,CAqBTgQ,aAAavB,GAClB,MAAMhS,EAAI3H,KAAKqD,IAAIC,KAAK,gBAExB,OAAAtD,KAAKub,WAAWlS,IAAIrJ,KAAK2b,cAAcC,SAEvC5b,KAAK6b,eAAiB7D,GAAK2B,EAAMmC,cAAc9D,GACxCrQ,EAAEyR,QAAQpZ,KACnB,EC7BK,MAAM+b,GAAgC,IACxCf,GAAgBlY,SACnBkZ,UAAU,EACVC,YAAY,GAGR,MAAgBC,WAA8BlB,GAOlDmB,GAEAC,GAGAC,GAEAxc,cAAgBC,QARNE,KAAAyG,cAAa6V,OAAOC,KAC9Bvc,MAAAmc,KAAsBG,OAAOxF,IACnB9W,KAAA+G,aAAYuV,OAAOE,MAC7Bxc,MAAAoc,KAAYE,OAAOG,MACTzc,KAAA0c,cAAaJ,OAAOK,MACpB3c,KAAA4c,SAAQN,OAAOhG,IAAwBG,UACjDzW,MAAAqc,KAAiB7U,KAAUqV,OAIjB7c,KAAAqU,KAAOrU,KAAK0c,WAAWrI,KASjCrU,MAAA8c,KAAkBtV,KAAUuV,MAAWC,WAAW,0BAA2Bhd,KAAK0c,WAAWO,WAAW,eAE9Fjd,KAAAkO,eAAcwN,OAAY,cAAe,IAAM1b,MAAK8c,GAAiBtY,UAAY,IAE3FxE,MAAAkd,KAAqBxB,OAAY,oBAAqB,IAAM1b,KAAK0c,WAAWS,WAAWC,aAahFpd,KAAAqd,cAAa3B,OAAqC,WAAY,MAG1D4B,UADctd,KAAKkO,gBAAkBlO,MAAKkd,QAKrDld,MAAAud,KAAqB/B,OAAoB,oBAAqB,IAGpDxb,KAAAwd,gBAAehC,OAAwB,eAAgB,MAGxDxb,KAAAyb,kBAAiBC,OAAY,iBAAkB,KACtD,MAAM+B,EAASzd,KAAKwd,eACpB,GAAIC,EAAQ,OAAOA,EACnB,MAAMC,EAAK1d,KAAKub,aACVoC,EAAU3d,MAAKud,IACfrb,EAAQwb,EAAGxS,OAAOzI,OAAOvC,IAASyd,EAAQzH,KAAKqC,GAAQA,IAASrY,EAAKya,QAC3E,OAAO+C,EAAGE,UACN,CAACtD,GAAkB/J,QAAQvQ,KAAK+G,UAAW,4BAA6B7E,GACxEA,IAmGNlC,MAAA6d,KAAWrW,KAAUuV,MAAWC,WAAW,UAAWhd,KAAK0c,WAAWO,WAAW,kBACjFjd,MAAA8d,KAAgBtW,KAAUuV,MAAWC,WAAW,eAAgBhd,KAAK0c,WAAWO,WAAW,qBAC3Fjd,MAAA+d,KAAcvW,KAAUuV,MAAWC,WAAW,eAAgBhd,KAAK0c,WAAWO,WAAW,kBAtJhE,CAWzBH,GAIAI,GAMAc,aAAqB,CAErBC,kBACEje,KAAKge,YACP,CAUAT,GAiBApC,aAAa+C,GACXle,KAAKge,aACLhe,KAAKqD,IAAI8a,WAAW,eAAgB,SAAUne,KAAKqU,KAAM,CAAE6J,kBAC1Dle,KAAKub,aAAsCJ,eAAe+C,EAC7D,CAEAE,gBAAgBC,GACd,MAAM1W,EAAI3H,KAAKqD,IAAIib,GAAG,kBAAmB,CAAED,gBAC3Cre,KAAKub,aAAagD,aAAaF,GAC/B1W,EAAE8R,KACJ,CAMAuC,SAASwC,EAAsDC,GAC7D,MAAM9W,EAAI3H,KAAKqD,IAAIC,KAAK,WAAY,CAAEkb,eAChCE,EAAWF,GAAY9d,WACvBie,EAAa3e,MAAK4e,EAAyB,MAAZF,EAAmB1e,MAAK8d,EAActZ,SAAWxE,MAAK+d,EAAYvZ,UACjGuD,EAAiB,CACrB7F,MAAO,CACL,IACkB,MAAZwc,EACAG,KAASC,YAAYL,GAAcze,KAAKkO,cAAelO,MAAK4e,EAAa5e,MAAK6d,EAASrZ,WACvFqa,KAASE,OAAO/e,KAAKyb,iBAAiB/S,KAAKxI,GAAQA,EAAKya,QAAU+D,IAAWM,IAAMR,EAAWS,aAC7FN,EAAa,CAAE7V,WAAY,CAAEoW,WAAYP,IAAiB,MAIrEhX,EAAEO,EAAE,OAAQ,CAAEH,SACd,MAAMxC,EAASvF,KAAK0c,WAAWnX,OAG/BvF,MAAKmc,EAAoB1L,KAAKlL,EAAOyC,MAAOzC,EAAO7E,WAAYqH,GAG/D/H,MAAKmc,EAAoB9C,kBACtBxV,QAAKsb,MAAK,IACV7W,UAAU4C,IACT,MAAMkU,EAAKpf,KAAKqD,IAAIib,GAAG,kBAAmB,CAAEI,WAAUxT,SACtD,GAAIwT,EACF,OAAA1e,KAAKoe,gBAAgB,CAACM,IACfU,EAAG3F,IAAI,kBAAmB,CAAEiF,aAErCU,EAAG3F,IAAI,6BAA4B,GAEvC9R,EAAE8R,KACJ,CAEA4F,WAAWC,GACTtf,KAAKqD,IAAI6E,EAAE,aAAc,CAAEoX,UAC3B,MAAMC,EAASvf,KAAKyb,iBAAiB/S,KAAKxI,GAAQA,EAAKya,QAAU2E,EAAM5e,YACjEse,EAAKO,EAAOP,GACZQ,EAAQD,EAAO7E,MACfxM,EAAclO,KAAKkO,cACnB3I,EAASvF,KAAK0c,WAAWnX,OACzBka,EAAWla,EAAO0Z,SAClBS,EAAcna,EAAOxE,UAET4e,QAAQ3f,KAAK+G,UAAUyJ,QAAQ,uBAAwB,CAAEgP,QAAOR,UAGlFhf,MAAKoc,EAAU3L,KAAKzQ,KAAK+G,UAAUyJ,QAAQ,qBAC3CxQ,MAAKqc,EAAeuD,OAAO5f,KAAKyG,WAAWlB,OAAO3B,MAAOsK,EAAa8Q,GAAI,EAAOS,EAAUC,GAAapX,UAAU,CAChH+R,KAAMA,KACJra,MAAKoc,EAAU3L,KAAKzQ,KAAK+G,UAAUyJ,QAAQ,mBAAoB,KAAM,CAAEE,SAAU,MACjF1Q,KAAK6b,eAAeyD,GACpBtf,MAAKud,EAAmBsC,OAAO7H,GAAK,IAAIA,EAAGsH,EAAM5e,YAAW,EAE9Dof,MAAQ/d,IACN/B,MAAKoc,EAAU2D,UACVJ,QAAQ3f,KAAK+G,UAAUyJ,QAAQ,uBAAwB,CAAEgP,QAAOR,UACrEhf,MAAKoc,EAAU3L,KAAKzQ,KAAK+G,UAAUyJ,QAAQ,qBAC3CxQ,MAAKqc,EAAeuD,OAAO5f,KAAKyG,WAAWlB,OAAO3B,MAAOsK,EAAa8Q,GAAI,EAAMS,EAAUC,GAAapX,UAAU,CAC/G+R,KAAMA,KACJra,MAAKoc,EAAU3L,KAAKzQ,KAAK+G,UAAUyJ,QAAQ,mBAAoB,KAAM,CAAEE,SAAU,MACjF1Q,KAAK6b,eAAeyD,GACpBtf,MAAKud,EAAmBsC,OAAO7H,GAAK,IAAIA,EAAGsH,EAAM5e,YAAW,EAE9Dof,MAAQ/d,IACN/B,MAAKoc,EAAU3L,KAAKzQ,KAAK+G,UAAUyJ,QAAQ,uBAAwB,KAAM,CAAEE,SAAU,KAAM,IAE9F,IAGP,CAUAmN,GACAC,GACAC,GASAa,GAAaoB,GACX,MAAMrY,EAAI3H,KAAKqD,IAAIC,KAAK,aAAc,CAAE0c,YACxC,IAAKA,IAAYA,EAAQ1e,OACvB,OAAOqG,EAAEsY,EAAE,KAAM,SAInB,MAAMzb,EAASjE,OAAO2f,YACpBF,EAAQvT,MAAM,KACXhM,IAAI0f,GAAQA,EAAK1T,MAAM,MACvBhK,OAAO2d,GAA0B,IAAjBA,EAAMpW,QAAgBoW,EAAM,IAAMA,EAAM,KAG7D,OAAOzY,EAAEsY,EAAEzb,EAEb,EC9KF,SAAS6b,GAAKnV,EAA+BoV,GAC3C,MAAO,CACLhD,OAAQpS,EAAKoS,QAAUgD,EACvBC,UAAWrV,EAAKqV,WAAaD,EAC7BE,WAAYtV,EAAKsV,YAAcF,EAE/BG,KAAMvV,EAAKuV,MAAQH,EACnBI,OAAQxV,EAAKwV,QAAUJ,EACvBV,OAAQ1U,EAAK0U,QAAUU,EAE3B,CAEM,SAAUK,GAAoBC,EAAgCC,GAClED,SAAQP,GAAKO,GAAO,GACpBC,EAASR,GAAKQ,GAAQ,GACf,CACLvD,OAAQsD,EAAMtD,QAAUuD,EAAOvD,OAC/BiD,UAAWK,EAAML,WAAaM,EAAON,UACrCC,WAAYI,EAAMJ,YAAcK,EAAOL,WAEvCC,KAAMG,EAAMH,MAAQI,EAAOJ,KAC3BC,OAAQE,EAAMF,QAAUG,EAAOH,OAC/Bd,OAAQgB,EAAMhB,QAAUiB,EAAOjB,OAEnC,CC1CM,SAAUkB,GAAqBnG,EAA0BoG,GAC7D,OAAKpG,EAEDqG,MAAMC,QAAQtG,GACTA,EAAMuG,KAAKH,GACbpG,EAHE,EAIX,CChBA,MAAM7X,GAAW,CACfC,KAAK,EACL6Y,OAAO,EACPuF,yBAAyB,EACzBC,oBAAoB,EACpBC,aAAa,EACbC,kBAAkB,EAClBC,eAAe,EACfC,UAAU,EACVC,YAAY,EACZpG,OAAQ,IAAIC,KAAa,MASpB,IAAMoG,GAAU,MAAjB,MAAOA,EAMXC,GAIA9hB,cANAG,KAAAqD,OAAMtD,MAAS,CAAC2hB,cAAa5e,IAE7B9C,MAAA2hB,KAAarF,OAAOE,MA8Dbxc,KAAA4hB,yBAA0B,EAQ1B5hB,KAAA6hB,SAAQrG,OAAU,iBAAiB,GAGnCxb,KAAA8hB,cAAapG,OAAY,gBAAiB,KAAO1b,KAAK6hB,QAAU7hB,KAAK+hB,OAAOtG,iBAAmB,OAAS,IAGxGzb,KAAAgiB,mBAAkBxG,OAAwB,kBAAmB,MAG7Dxb,KAAAiiB,cAAavG,OAAY,eAAgB,OAAMwG,MAAQliB,KAAKgiB,kBAAmBG,GAAKA,GAAQniB,KAAK8hB,eAGjG9hB,KAAAoiB,sBAAqB1G,OAAY,qBAAsB,IDvH1D,SAAU2G,GAAuBC,GACrC,OAAOA,GAAiBpM,KAAKiM,GAAgB,IAAXA,EAAExH,MACtC,CCqHsE0H,CAAuBriB,KAAKiiB,eAOzFjiB,KAAAqhB,eAAc3F,OAA0B,gBAAiB,KAC9D,MAAM/T,EAAI3H,KAAKqD,IAAI8a,WAAW,cAAe,SAAUne,KAAKqU,MAC5D,OAAQrU,KAAK6hB,QAETla,EAAEsY,EAAEjgB,MAAKuiB,EAAsBviB,KAAK2Z,MAAM6I,gBAAiBxiB,KAAKiiB,cAAe,SAD/Eta,EAAEsY,EAAE,GAAI,YAAW,GAKlBjgB,KAAAshB,oBAAmB9F,OAAwB,mBAAoB,MAG/Dxb,KAAAyiB,eAAc/G,OAAY,cAAe,OAAMwG,MAAQliB,KAAKshB,mBAAoBa,GAAKA,GAAQniB,KAAKqhB,gBAGlGrhB,KAAA0iB,eAAchH,OAAY,cAAe,IAAM1b,KAAKyiB,cAAc,IAAM,MAWxEziB,KAAAohB,sBAAqB1F,OAAY,qBAAsB,KAC5D,MAAM/T,EAAI3H,KAAKqD,IAAIC,KAAK,sBAClBqf,EAAW3iB,KAAKyiB,cAChBG,EAAU5iB,KAAKiiB,aACfY,EAAUF,EAASlgB,OAAOqgB,IAAMF,EAAQla,KAAKyZ,GAAKA,EAAExH,QAAUmI,EAAEnI,QACtE,GAAuB,IAAnBkI,EAAQ7Y,OAAc,OAAO4Y,EAEjC,MAAMpe,EAASoe,EAAQjQ,OAAOkQ,GAC9B,OAAOlb,EAAEsY,EAAEzb,EAAM,GAKnBxE,MAAA+iB,KAAgBvH,OAA6D,eAAgB,MAE7Fxb,MAAAgjB,KAAwBtH,OAAY,uBAAwB,KAC1D,MAAMoH,EAAI9iB,MAAK+iB,GAAL/iB,GACV,MAAO,CACLugB,UAAWuC,EAAEG,gBACbzC,WAAYsC,EAAEI,gBACd5F,OAAQwF,EAAEK,gBAAkBL,EAAE1F,YAC9BsD,OAAQoC,EAAEM,aACVxD,OAAQkD,EAAEO,gBAKPrjB,KAAAwhB,YAAW9F,OAAsC,WAAY,KAClE,MAAM4H,EAAsB3C,GAAoB3gB,KAAK+hB,OAAO1E,aAAcrd,KAAK2Z,MAAM0D,cAC/EkG,EAAgB5C,GAAoB2C,EAAqBtjB,MAAKgjB,KAMpE,MALmB,IACdO,EACHC,yBAA0BD,EAAc/C,WACxCiD,iBAAkBF,EAAcjG,UAiC7Btd,KAAA0jB,oBAAmBlI,OAAU,oBAAoB,GA9KlDxb,KAAKqD,IAAIsgB,SAAW3jB,KAAKqD,IAAIugB,MAAMnC,eACrCoC,OAAO,KACL,MAAMhC,EAAQ7hB,KAAK6hB,QACbiC,EAAM9jB,KAAK8hB,aACXiC,EAAW/jB,KAAKgiB,kBAChBgC,EAAQhkB,KAAKiiB,aACnBjiB,KAAKqD,IAAI6E,EAAE,UAAW,CAAE2Z,QAAOiC,MAAKC,WAAUC,SAAO,EAG3D,CAGOpI,MAAMvH,EAAc8I,EAAiCxD,EAAqBoI,GAC/E,MAAMpa,EAAI3H,KAAKqD,IAAI8a,WAAW,QAAS,SAAU9J,EAAM,CAAEA,OAAMsF,QAAOoI,WAGtE/hB,KAAKqU,KAAOA,EACZrU,MAAK+iB,EAAc1Z,IAAI8T,GACvBnd,KAAK2Z,MAAQA,EACb3Z,KAAK+hB,OAASA,EAGdpI,EAAM6H,SAAWxhB,KAAKwhB,SACtB7H,EAAMsK,gBAAgB5a,IAAIrJ,KAAKoiB,oBAK/B,MAAM8B,EAASvK,EAAMuK,SACrBvc,EAAEO,EAAE,QAAS,CAAEic,kBAAmBD,IACjCnC,GAAoD5G,eAAe+I,GAGpElkB,KAAK6hB,MAAMxY,KAAI,GAEf1B,EAAE8R,IAAI,OACR,CAgEO2K,aAAaC,GAClB,OAAOA,EAAS5jB,IAAIP,QAAcA,IACpC,CAmBA6iB,GAEAC,GAuBOsB,oBAAoB9f,GACzB,MAAM+f,EAAchkB,OAAOkF,KAAKjB,GAAQ,GAClCmD,EAAI3H,KAAKqD,IAAIib,GAAG,sBAAuB,CAAE9Z,SAAQ+f,gBAClDvkB,KAAK2Z,MAAMuK,SAAShX,SAASqX,KAChCvkB,KAAK2Z,MAAMnX,IAAI+hB,GACdvkB,KAAK+hB,QAAoD3D,kBAAkB,CAACmG,KAE/E5c,EAAE8R,KACJ,CAEA8I,GAAsBI,EAAoB6B,GACxC,MAAM7c,EAAI3H,KAAKqD,IAAI8a,WAAW,0BAA2B,SAAUne,KAAKqU,KAAM,CAAEsO,WAAU6B,SAEpFhgB,EAASme,EAASliB,IAAIP,IAE1B,MAAMmkB,EAAWG,EAAK9b,KAAK+b,GAAKA,EAAE9J,QAAUza,GAE5C,OAAOmkB,EA0Cb,SAASK,GAAyBL,EAAsB3J,GACtD,MAAO,CACLsE,GAAIqF,EAASrF,GACbrE,MAAO0J,EAAS1J,MAChBD,QACAiK,QAASN,EAASM,SAAW,GAAGjK,MAAU2J,EAAS1J,SACnDiK,KAAMP,EAASO,MAAQ,KACvBtiB,KAAM+hB,EAAS/hB,MAAQ,KACvByY,QAA4B,IAApBsJ,EAAStJ,OACjBD,UAAgC,IAAtBuJ,EAASvJ,SACnBF,UAAU,EAEd,CApDU8J,CAAyBL,EAAUA,EAAS3J,OAAS1a,MAAK2hB,EAAWnR,QAAQ,iCAE7ExQ,MAAK6kB,EAA2B3kB,EAAI,GAE1C,OAAOyH,EAAEsY,EAAEzb,EACb,CAMAsgB,qBACE9kB,KAAK0jB,iBAAiB7D,OAAO7H,IAAMA,EACrC,CAIA6M,GAA2BlK,GACzBA,EAAQA,GAAOhC,YAAc,GAE7B,MAAMoM,EAAoB/kB,KAAK+hB,kBAAkB7F,GAEjD,MAAO,CAGLnB,QAAQ,EACRD,UAAU,EAEVkE,GAAI,KACJtE,MAAOC,GAASoK,EAAoB,gBAAO,IAC3CJ,QAAShK,GAASoK,EAAoB,iBAAO/kB,MAAK2hB,EAAWnR,QAAQ,0DAA4D,mBACjImK,QAEJ,iDAlNW+G,EAAU,sCAAVA,EAAUzgB,QAAVygB,EAAUxgB,WAAA,SAAVwgB,CAAU,KCpBVsD,GAAiB,MAAxB,MAAOA,EAIXnlB,YAAoBkZ,EAA4BkM,GAA5BjlB,KAAA+Y,WAA4B/Y,KAAAilB,eAFhDjlB,KAAAqD,OAAMtD,MAAS,CAACilB,qBAEkE,CAElFE,2BAA2BvkB,GACzB,MAAM0a,EAAS1a,EAAWF,IAAIyH,KAAQmM,KAAMnM,EAAEoG,KAAMC,UAAWvO,KAAKilB,aAAaE,SAASjd,MAC1F,OAAOlI,MAAKolB,EAAmB/J,EACjC,CAGA+J,GAAmB/J,GAKjB,OAJcA,EACX5a,IAAI4kB,KAAShR,KAAMgR,EAAGhR,KAAMiR,OAAQtlB,MAAKulB,EAAWF,EAAG9W,cACvD9L,OAAO4iB,GAAoB,OAAdA,EAAGC,QAENE,OAAO,CAACC,EAAKJ,KACxBI,EAAIJ,EAAGhR,MAAQgR,EAAGC,OACXG,GACN,GACL,CAEAF,GAAWhX,GACT,OAAQI,IAAiB+W,YAAYnX,EAAUA,YAAS,EACpD/G,KAAUka,GAAY1hB,KAAK+Y,UAC3B,IACN,iDA3BWiM,GAAiBtgB,mBAAAC,KAAA,sCAAjBqgB,EAAiB/jB,QAAjB+jB,EAAiB9jB,WAAA,SAAjB8jB,CAAiB,oBCXxB,MAAOW,UAEJ3lB,KAAA4lB,KAAuC,CAC5CC,MAAOC,KAAUC,YACjB,QAGK/lB,KAAAgmB,OAAwC,CAC7CH,MAAOC,KAAUC,YACjB,QAGK/lB,KAAAimB,OAAwC,CAC7CJ,MAAOC,KAAUC,YACjB,QAaK/lB,KAAAkmB,IAAM,EAAK,EClBb,IAAMC,GAAiB,MAAxB,MAAOA,EASXC,GACAC,GA0BAxmB,YACU4G,EACAC,EACAM,GAFAhH,KAAAyG,aACAzG,KAAA0G,cACA1G,KAAAgH,kBArCVhH,KAAAqD,OAAMtD,MAAS,CAAComB,sBAGTnmB,KAAAsmB,+BAA8B/e,OAAO,CAAEgf,WAAW,EAAOC,OAAO,GAASb,GAAaO,KACtFlmB,KAAAymB,iBAAgBlf,QAAO,GACvBvH,KAAA0mB,iBAAgBnf,QAAO,GAE9BvH,MAAAomB,EAAuC,GACvCpmB,MAAAqmB,EAAuC,GAEvCrmB,KAAA2mB,eACE,MAAMC,KAAcrf,OAAOvH,KAAKyG,WAAWlB,OAAO2E,UAC/CzJ,IAAI8X,GAAQvY,KAAK0G,YAAYmgB,oBAAoBtO,KAE9CrU,EAAWlE,KAAKgH,gBAAgB8f,eAatC,SAXiBpL,OAAY,WAAY,KACvC,MAAMqL,EAAgBH,IAAc1Q,KAAK8Q,GAAcA,IAAaC,UAAUC,WAAY,GACpFC,EAAkBjjB,IAAWwE,KAAKf,GAAKA,EAAE4E,SAAWvM,KAAKyG,WAAWvC,WAAWiJ,UAAUia,YAAa,EAI5G,MAAO,CACLC,WAJiBN,IAAkBI,EAKnCG,OAJaP,EAAgB,OAAUI,OAA+BpX,EAAb,aAQ/D,EAlBA4W,GAqBA3mB,KAAAunB,kBAAiBhgB,QAAgB,GACjCvH,KAAAwnB,sBAAqB9L,OAAY,qBAAsB,IAAM1b,KAAK2mB,WAAWU,aAAernB,KAAKunB,kBAQ/F,UAAW7mB,KAAcV,KAAKyG,WAAWlB,OAAO2E,UAC9ClK,MAAKomB,EAAY1lB,IAAc,EAC/BV,MAAKqmB,EAAY3lB,IAAc,CAEnC,CAEA+mB,aAAa/mB,GACX,OAAOV,MAAKomB,EAAY1lB,EAC1B,CAEAgnB,aAAahnB,EAAoBinB,GAC/B3nB,MAAKomB,EAAY1lB,GAAcinB,EAE/B,MAAMC,GAAYrnB,OAAO2jB,OAAOlkB,MAAKomB,GAAalQ,KAAK2R,IAAmB,IAAVA,GAC5DD,IAAa5nB,KAAKunB,mBACpBvnB,KAAKunB,eAAele,IAAIue,GACxB5nB,KAAKymB,cAAcpd,IAAIue,GAE3B,CAEAE,aAAapnB,EAAoBqnB,GAC/B/nB,MAAKqmB,EAAY3lB,GAAcqnB,EAE/B,MAAMC,EAAWznB,OAAO2jB,OAAOlkB,MAAKqmB,GAAanQ,KAAKN,IAAmB,IAAVA,GAC3DoS,IAAahoB,KAAK0mB,iBACpB1mB,KAAK0mB,cAAcrd,IAAI2e,EAC3B,CAEAC,YAAYzB,GACVxmB,KAAKsmB,4BAA4Bjd,IAAI,CAAEkd,WAAW,EAAMC,SAC1D,iDAxEWL,GAAiBzhB,MAAAC,KAAAD,MAAAiM,KAAAjM,MAAAkM,MAAA,sCAAjBuV,EAAiBllB,QAAjBklB,EAAiBjlB,WAAA,SAAjBilB,CAAiB,oBCIvB,IAAM+B,GAA4B,MAAnC,MAAOA,EAEXC,MAAY7L,OAAO8L,KAAiBnb,SAEpCpN,YACU4G,EACAC,EACA2hB,EACAC,EACAC,GAJAvoB,KAAAyG,aACAzG,KAAA0G,cACA1G,KAAAqoB,cACAroB,KAAAsoB,kBACAtoB,KAAAuoB,oBACN,CAEJ5Q,KAAK6Q,EAAoC9nB,EAAoB+nB,GAC3DzoB,MAAK0oB,EAAchoB,EACnBV,MAAK2oB,EAAeH,EACpBxoB,MAAK4oB,EAAcH,CACrB,CAGAC,GACAC,GACAC,GAEAC,GAA6C,GAO7CC,iBACE,MAAM5kB,EAAWlE,KAAKyG,WAAWvC,WAC3BiI,EAAYnM,KAAKqoB,YAAYpb,SAC7B8b,EAAe/oB,KAAKsoB,gBAAgBU,UAG1C,MAAO,CACLC,kBAHwBjpB,KAAKuoB,mBAAmB7a,iBAAiB1N,MAAK0oB,EAAaxkB,EAASiJ,SAI5FjJ,WACAiI,YACA4c,eACAriB,YAAa1G,KAAK0G,YAClBD,WAAYzG,KAAKyG,WACjByiB,kBAAmBlpB,MAAK2oB,EACxBnH,SAAUxhB,MAAKmoB,EACfjJ,WAAY,IAAIiK,KAAuBnpB,MAAK4oB,EAAY9f,YAAYoW,YAAc,IAClFkK,iBAAkBppB,MAAK6oB,EAE3B,iDAhDWX,GAA4BxjB,MAAAC,KAAAD,MAAAiM,KAAAjM,MAAAkM,MAAAlM,MAAAmM,KAAAnM,MAAAoM,IAAA,sCAA5BoX,EAA4BjnB,QAA5BinB,EAA4BhnB,WAAA,SAA5BgnB,CAA4B,+BCFnC,MAAOmB,6BCNb,MAAMvmB,GAAW,CACfC,KAAK,EACLumB,gBAAgB,EAChBC,gCAAgC,EAChClO,OAAQ,IAAIC,OAGR,MAAOkO,GAIX3pB,YAAoBkB,EAA2B0oB,EAAkDC,GAA7E1pB,KAAAe,YAA2Bf,KAAAypB,iBAAkDzpB,KAAA0pB,cAFjG1pB,KAAAqD,OAAMtD,MAAS,CAACypB,6BAA2B1mB,IAGzC9C,KAAK2pB,gBAAkBF,EAAeG,eAAeC,WACvD,CAIA,SAAIC,GAAU,OAAO9pB,MAAK+pB,IAAW/pB,MAAKgqB,EAAUhqB,KAAKe,UAAWf,KAAKypB,eAAgBzpB,KAAK0pB,YAAc,CAC5GK,GASOR,+BAA+BU,GACpC,MAAMtiB,EAAI3H,KAAKqD,IAAI8a,WAAW,iCAAkC,SAAUne,KAAKe,UAAW,CAAEkpB,WACtFC,EAAQlqB,KAAK8pB,MAEbjI,EAAQ7hB,KAAK2pB,kBAAoBO,EAAMrI,MACzCoI,EAAOxnB,OAAO0nB,IAAMA,EAAEC,sBACtBH,EAGEI,EAAWxI,EAAMpf,OAAO0nB,IAAMA,EAAEC,sBAAyBpqB,KAAK2pB,kBAAoBQ,EAAEG,OAASJ,EAAMK,SAGzG,OAAO5iB,EAAEyR,QAAQiR,EADL,8BAAgBJ,EAAOjgB,kBAAkB6X,EAAM7X,oBAAoBqgB,EAASrgB,0BAA0BkgB,EAAMK,kBAAkBL,EAAMtH,QAAQ2H,WAAWL,EAAMtH,QAAQ4H,aAAaN,EAAMvH,SAAS4H,WAAWL,EAAMvH,SAAS6H,MAEzO,CAEAR,GAAUjpB,EAAmB0oB,EAA0CC,GACrE,MAAM/hB,EAAI3H,KAAKqD,IAAI8a,WAAW,iBAAkB,SAAUpd,GAEpDukB,EAASmE,EAAegB,aAC9B,GAAuB,GAAnBnF,GAAQzD,QAAiB,CAC3B,MAAM6I,EAAQ,CAAEC,KAAM,GAAIC,QAAS,GAAIJ,IAAK,KAAMK,UAAW,KAAMN,SAAS,GAC5E,MAAO,CAAE1I,OAAO,EAAOiJ,OAAQ,KAAMxF,SAAQ1C,QAAS8H,EAAO/H,SAAU+H,EAAOH,SAAS,EACzF,CAEA,SAASpF,EAASnkB,EAAiCgjB,EAAiC6G,GAClF,MAAMD,GAAU5pB,IACVwpB,MAAMO,OAAW/pB,GACvB,MAAO,CAAE2pB,KAAM3G,IAAS4G,WAASJ,OAAKK,YAAWN,QAASC,KAAQK,EACpE,CACA,MAAMjI,EAAUuC,EAASG,EAAOxD,WAAYwD,EAAOrD,WAAYyH,EAAYlF,MAAMgG,KAC3E7H,EAAWwC,EAASG,EAAOjE,YAAaiE,EAAO7C,YAAaiH,EAAYsB,KAAKR,KAUnF,OAAO7iB,EAAEsY,EARyB,CAChC4B,OAAO,EACPiJ,OAAQxF,EAAO3L,MAAMmR,OACrBxF,SACA1C,UACAD,WACA4H,QAAS5H,EAAS4H,SAAW3H,EAAQ2H,SAGzC,CASOU,mBAAmBC,EAA2BpH,EAA6Bnc,GAChFujB,EAAQZ,MAAQxG,EAAIwG,UAAUa,MAA8Bje,SAASge,EAAQE,SAAiBF,EAAQZ,OACtG3iB,EAAEO,EAAE,uCAAsBgjB,EAAQE,0BAA0BF,EAAQZ,qBAAqBxG,EAAIwG,QAC/F,CAKOe,wBAAwBH,EAA2BI,EAAyCxH,EAA6Bnc,GAG9H,OAAImc,EAAIlB,UACN0I,EAAI1I,QAAU,CAAE+H,KAAM7G,EAAIlB,QAAS4H,IAAKxqB,KAAK8pB,MAAMlH,QAAQ4H,KAC3D7iB,EAAEO,EAAE,gDAAmCojB,EAAI1I,UAGzCkB,EAAInB,WACN2I,EAAI3I,SAAW,CAAEgI,KAAM7G,EAAInB,SAAU6H,IAAKxqB,KAAK8pB,MAAMnH,SAAS6H,KAC9D7iB,EAAEO,EAAE,iDAAoCojB,EAAI3I,WAGvC2I,CACT,iBCpGI,MAAOC,GAUX,0BAAOC,CACLJ,EACAjO,EACAsO,EACAC,GAEA,OAAOH,GAAsBI,6BAA6BP,EAAQjO,EAAUsO,EAAUC,GAAaA,WACrG,CAEA,mCAAOC,CACLP,EACAjO,EACAsO,EACAC,GAGA,MAAME,EAAcR,EAAOS,UAAUC,MAAsB9hB,QACrD+hB,EAAc5O,EAASyO,GAE7B,SAAII,MAAQD,EAAaN,GAChB,CAAEC,cAAaO,YAAY,GAEZjL,MAAMC,QAAQ8K,IAAgB/K,MAAMC,QAAQwK,WACvDM,UAAuBN,GAKnCC,EAAiDE,GAAeH,EAC1D,CAAEC,cAAaO,YAAY,IAHzB,CAAEP,cAAaO,YAAY,EAItC,ECzBF,MAAMnpB,GAAW,CACfC,KAAK,EACLmpB,YAAY,EACZC,eAAe,EACfC,mBAAmB,EACnB9C,gBAAgB,EAChBjO,OAAQ,IAAIC,OAOR,MAAO+Q,GAIXxsB,YACUysB,EACAC,EACA7rB,EACA8rB,GAHAxsB,KAAAssB,iBACAtsB,KAAAusB,cACAvsB,KAAAU,aACAV,KAAAwsB,eANVxsB,KAAAqD,OAAMtD,MAAS,CAACssB,oBAAkBvpB,GAO9B,CAMJspB,kBACE5e,EACAzM,EACA0oB,EACAgD,EACAzF,EACA0F,EACAhD,EACAiD,EACAC,GAEA,MAAMjlB,EAAI3H,KAAKqD,IAAI8a,WAAW,oBAAqB,SAAUpd,EAAW,CAAEA,cAGpE8rB,EAAW,IAAIrD,GAAyBzoB,EAAW0oB,EAAgBC,GAInEoD,KAAOC,OAAU,IAAM/sB,KAAKusB,YAAYvrB,MAAMgsB,UAAUhtB,KAAKU,WAAYK,EAAW8rB,EAASlD,kBAC7FsD,MAAWC,MAAQJ,EAAM3C,IAAKA,GAAEgD,SAAW,WAAa,WAC1DF,GAASE,UACXntB,MAAKotB,EAA8BH,GAASE,UAE9C,MAAMxJ,GAAUsJ,GAAStJ,SAAW,GAE9B0J,GAAiBrtB,KAAKssB,eAAegB,eAAevsB,EAAW4iB,IAG/D0G,GAAWwC,EAAStD,+BAA+B8D,IAKzD,GAHA1lB,EAAEO,EAAE,+BAAiByb,GAAQ3Z,4BAA4BqjB,GAAerjB,qBAAqBqgB,GAASrgB,UAG/E,GAAnBqgB,GAASrgB,OACX,OAAOujB,GAAS,GAAIb,EAAa,CAC/B/R,MAAO+R,EAAac,WAAY,KAAMnS,OAAQ,GAAI8B,SAAU,GAC5DyF,QAAS,IAAIyG,GAAoB1G,SAAU,IAAI0G,KAInD,MAOMvF,GAAM9jB,MAAKytB,EAP8C,CAC7DjgB,gBACAkgB,gBAAiBjE,EAAeiE,gBAChCjB,kBACAkB,aAAcd,EACde,mBAAoBA,IAAM,IAAIC,KAAc9sB,EAAW0oB,EAAeG,eAAerb,UAAWkb,EAAeiE,gBAAiB1G,IAEjFqD,GAAUsC,GAE3D,OAAOY,GAASzJ,GAAI3G,SAAU2G,GAAInJ,MAAOmJ,IAGzC,SAASyJ,GAASO,GAAwCnT,GAAmBmJ,IAI3E,MAAM3G,GAAWyP,EAAamB,4BAA4B,IAAKtB,KAAoBqB,IAAkBnT,IAAS+R,GAG9G,OAAII,EAAK9iB,OAAS,GAAK6iB,EAASlD,kBAC9BxM,GAAS6Q,iBAAmB,IAAK7Q,GAAS6Q,kBAAoB,GAAIC,KAAaC,iBAC1EvmB,EAAEsY,EAAE,IAAK6D,GAAK3G,aACvB,CACF,CAEAiQ,GAA8BD,GAC5B,UAAWjC,KAAWiC,EACpBgB,QAAQC,KAAK,qBAAqBlD,EAAQnqB,2BAA2BmqB,EAAQE,gCAAgCF,EAAQmD,iBACzH,CAEAZ,GACEa,EACAjE,EACAkE,GAEA,MAAM5mB,EAAI3H,KAAKqD,IAAI8a,WAAW,gBAAiB,SAAUkM,EAAS,GAAGtpB,UAAW,CAAEutB,YAAWjE,aAG7F,IAAIiB,EAA0C,CAC5C3Q,WAAO5K,EACPyd,gBAAYzd,EACZsL,OAAQ,GACRuH,QAAS,IAAIyG,GACb1G,SAAU,IAAI0G,GACdlM,SAAU,IAGZ,MAAMqR,EAAQC,YAAYC,MAC1B,UAAWxD,KAAWb,EAAU,CAE9B,MAAMsE,EAAmD,CACvDC,cAAe,CAAE1D,aAAYoD,MAC1BC,GAGCzK,EAAM9jB,MAAK6uB,EAAYF,GAoB7B,GAnBAhnB,EAAEO,EAAE,iBAAkB,CAAEgjB,UAASpH,QAGjCwK,EAAUX,aAAa1C,mBAAmBC,EAASpH,EAAKnc,GAGxD3H,KAAKssB,eAAewC,WAAW5D,EAASpH,GAGxC9jB,KAAKssB,eAAeyC,qBAAqB7D,EAASpH,GAGlDwH,EAAMgD,EAAUX,aAAatC,wBAAwBH,EAASI,EAAKxH,EAAKnc,GAGpEmc,EAAIzI,QACNiQ,EAAIjQ,OAAO3O,QAAQoX,EAAIzI,aAGPtL,IAAd+T,EAAInJ,MAIR,QAAQ,GAEN,KAAKuQ,EAAQ8D,QACX1D,EAAI3Q,MAAQmJ,EAAInJ,MAChB,MAGF,KAAKuQ,EAAQ+D,aACX3D,EAAIkC,WAAa1J,EAAInJ,MACrB,MAGF,KAAKuQ,EAAQgE,UACX5D,EAAInO,SAAWoO,GAAsBC,oBAAoBN,EAAQE,OAAQkD,EAAU7B,gBAAiB3I,EAAInJ,MAAO2Q,EAAInO,UAGzH,CACA,MAAMgS,EAAWV,YAAYC,MAE7B,OAAO/mB,EAAEsY,EAAEqL,EAAK,wBAAwB6D,EAAWX,MACrD,CAaAK,GAAYO,GAEV,MAAQlE,UAASnqB,YAAW4C,SAAQ6b,QAAO6P,YAAWC,aAActvB,KAAKwsB,aAAa+C,YAAYH,GAE5FznB,EAAI3H,KAAKqD,IAAI8a,WAAW,aAAc,SAAUpd,EAAW,CAAEA,cAEnE4G,EAAEO,EAAE,oBAAoBgjB,EAAQnV,oBAAoByJ,aAAiBze,cAAsBmqB,EAAQE,SAAU,CAACF,YAC9G,IAGE,OAFAmE,EAAUG,YAEFtE,EAAQnV,SAEd,KAAK0Z,MAAgBC,GACnB,MAAMC,EAASzE,EAAQ5M,GAAyB3a,EAAOuH,KAAMvH,EAAOJ,QAASI,EAAOisB,eAC5EC,KAAIC,SAAUC,GAAYT,EAAUU,GAAGL,GAC/C,OAAIE,GACFloB,EAAEO,EAAE,4BAA6B,CAAEynB,QAAOI,YAC1CV,EAAUY,WAAWF,EAAQpV,OAAO,GAAO,GACpCoV,IAETpoB,EAAEO,EAAE,gCAAiC,CAAEynB,UACvCxB,QAAQrO,MAAM,yHACPwP,EAAUY,qBAAgBngB,IAGnC,KAAK0f,MAAgBU,GAEnB,MAAMC,EAASlF,EAAQ5M,GAAyB3a,EAAOuH,KAAMvH,EAAOJ,QAASI,EAAOisB,cAC9ES,GAAUf,EAAUgB,GAAGF,GAC7Bf,SAAUY,WAAWI,GAAQzN,SAAkByN,GAAQ1V,OAAO,IAAS0V,GAAQE,SACxEF,GAET,QAIE,MAAM,IAAIG,MAAM,yCAMtB,OAAS1Q,GACPuP,SAAUoB,UAAU3Q,GACbwP,EAAUY,qBAAgBngB,EACnC,CACF,ECpOF,MAAMjN,GAAW,CACfC,KAAK,EACL2tB,aAAa,EACbC,cAAc,EACdzE,YAAY,EACZ0E,2BAA2B,EAC3BvV,OAAQ,IAAIC,OASP,IAAMuV,GAAa,MAApB,MAAOA,EAIXC,GAEAjxB,YACU0sB,EACAwE,EACAhqB,GAFA/G,KAAAusB,cACAvsB,KAAA+wB,SACA/wB,KAAA+G,YAPV/G,KAAAqD,OAAMtD,MAAS,CAAC8wB,iBAAgB/tB,IAEhC9C,MAAA8wB,KAA2BtpB,KAAU0gB,GAMjC,CAEJvQ,KACEjX,EACA+nB,EACAD,EACA8D,EACApe,EACA8iB,GAEAhxB,MAAK0oB,EAAchoB,EACnBV,MAAKixB,EAAkB3E,EACvBtsB,MAAKkxB,EAAchjB,EAAYtN,WAC/BZ,MAAKmxB,EAAoBH,EACzBhxB,MAAK8wB,EAAyBnZ,KAAK6Q,EAAa9nB,EAAY+nB,EAC9D,CAGAC,GACAyI,GACAF,GACAC,GAEAP,aAAaS,EAAgCC,GAC3C,MAAMC,EAA0C,GAC1CC,EAAqC,GACrCC,EAAgC,GAKhC7E,EAAiB3sB,MAAK8wB,EAAyBhI,iBAE/C9a,EAAM,IAAIC,IAAsBjO,KAAKqD,IAAIgR,MAE/C,UAAWod,KAAQzxB,MAAKkxB,EAAa,CACnC,MAAMQ,EAAQ1xB,KAAKqD,IAAI8a,WAAW,eAAgB,SAAUsT,EAAKnjB,KAAM,CAAEvN,UAAW0wB,EAAKnjB,OACnF4V,EAASmN,EAAMM,cAAcF,EAAKnjB,MAClCoe,EAAc2E,EAAMnN,OAAOuN,EAAKnjB,MAEhCmb,GAAiB4H,EAAMO,kBAAkBH,EAAKnjB,MAC9CujB,GAAiBR,EAAMS,wBAAwBrI,IAC/CsI,GAAuBV,EAAMW,aAAa1U,OAAOmU,EAAKnjB,KAAMmjB,EAAMhI,GAAgBvF,GAElFwF,GAAc2H,EAAMY,WAAWR,EAAKnjB,OAAS,GAG7Cke,GAAe,IAAI0F,KAA4BlyB,KAAKusB,YAAavsB,KAAK+G,UAAW/G,KAAK+wB,OAAQ/wB,MAAKmxB,GAEnGgB,GADS,IAAI9F,GAAgBrsB,MAAKixB,EAAiBjxB,KAAKusB,YAAavsB,MAAK0oB,EAAa8D,IACnEJ,kBACxBiF,EAAMnN,OACNuN,EAAKnjB,KACLmb,GACAoI,GACAT,EAAYlxB,KAAK0I,OACjB8jB,EACAhD,GACAiD,EACAoF,IAGIK,GAAQD,GAAWhV,SAGzBoU,EAAaE,EAAKnjB,MAAQ6jB,GAAWxX,MAGjCwX,GAAW9W,QACbmW,EAAa9kB,QAAQylB,GAAW9W,QAElC,MACMgX,GAAmBrkB,EAAIskB,oBAAoBpO,EAAQkO,GAAMG,mBAAoBnB,EAAYjlB,UAD1EulB,EAAM/N,SAGvBwO,GAAWvP,QAAQ+H,MACrB+G,EAAMxpB,EAAE,iBAAkB,CAAE0a,QAASuP,GAAWvP,QAAQ+H,KAAM5U,QAASoc,GAAWvP,QAAQ4H,MACxF2H,GAAWxP,SAASgI,MACtB+G,EAAMxpB,EAAE,kBAAmB,CAAEya,SAAUwP,GAAWxP,SAASgI,KAAM5U,QAASoc,GAAWvP,QAAQ4H,MAE/F8G,EAAYG,EAAKnjB,MAAQ,IACpBob,GACHxlB,SAAUulB,GAAevlB,SACzBsuB,UAAW/I,GACXtM,SAAUiV,GACVC,oBACA1X,MAAO+R,EACP+F,cAAe,KACfC,kBAAmBP,GAAW3E,WAE9BhJ,KAAM,IAAKkF,GAAYlF,QAAS2N,GAAWvP,SAC3CoI,IAAK,IAAKtB,GAAYsB,OAAQmH,GAAWxP,UAE7C,CACA,MAAO,CAAE2O,cAAaC,eAAcC,eACtC,iDAvGWX,GAAansB,MAAAC,MAAAD,MAAAiM,MAAAjM,MAAAkM,MAAA,sCAAbigB,EAAa5vB,QAAb4vB,EAAa3vB,WAAA,SAAb2vB,CAAa,oBC7BpB,MAAO8B,GACX9yB,YAAmBa,GAAAV,KAAAU,aAEZV,KAAAkL,KAAkD,EAFhB,ECU3C,MAAMpI,GAAW,CACfC,KAAK,EACL6vB,mBAAmB,EACnB9D,YAAY,EACZ+D,gCAAgC,EAChCC,kBAAkB,EAClBC,iBAAiB,EACjBzF,gBAAgB,EAChBjS,OAAQ,IAAIC,OASP,IAAM0X,GAAqB,MAA5B,MAAOA,EAIXnzB,YAAoB6G,GAAA1G,KAAA0G,cAFpB1G,KAAAqD,OAAMtD,MAAS,CAACizB,yBAAwBlwB,IAIxC9C,MAAAizB,EAA0D,GAa1DjzB,MAAAkzB,EAAgD,IAfA,CAEhDD,GAEAtb,KAAKjX,EACHwN,EACAilB,EACAC,GAEApzB,MAAK0oB,EAAchoB,EACnBV,MAAKkzB,EAAyBC,EAC9BnzB,MAAKqzB,EAAenlB,EACpBlO,MAAKszB,EAAmBF,CAC1B,CAEAF,GACAxK,GACA2K,GACAC,GAEOxE,WAAW5D,EAA2BpH,GAC3C,MAAMnc,EAAI3H,KAAKqD,IAAI8a,WAAW,aAAc,SAAU+M,EAAQnqB,UAAW,CAAEwyB,cAAezP,EAAKoH,WAAWA,EAAQE,QAE5GoI,EAAa1P,EAAIyM,mBAAmBkD,QAKpCC,EAAU5P,EAAI6P,SAASH,GAAoBtI,EAAQyI,MACnDC,EAAM,uCAAsB1I,EAAQyI,mBAAmB7P,EAAI6P,qBAAqBH,eAAwBE,IAC9GxI,SAAQyI,KAAOD,EACR/rB,EAAE8R,IAAIma,EACf,CAQO7E,qBAAqB7D,EAA2BpH,GACrD,MAAMnc,EAAI3H,KAAKqD,IAAI8a,WAAW,oBAAqB,SAAU+M,EAAQnqB,UAAW,CAAEwyB,cAAezP,EAAKoH,WAAWA,EAAQE,QAGzH,KAAMtH,EAAIyM,mBAAmBkD,SAC3B,OAAO9rB,EAAE8R,IAAI,cAIXqK,EAAI+P,gBAA+B,OAAb/P,EAAI6P,MAC5BxF,QAAQ9qB,IAAI,qJAId,MAAMinB,EAAQxG,EAAIwG,QAAS,EAI3BY,SAAQ4I,UAAUzZ,KAAK,CAAEkW,QAASzM,EAAIyM,QAASjG,QAAOyJ,WAAW,IACjE/zB,MAAKg0B,EAAgC9I,GAE9BvjB,EAAE8R,IAAI,yBAAyB6Q,IACxC,CAUOgD,eAAevsB,EAAmBkpB,GACvC,MAAMtiB,EAAI3H,KAAKqD,IAAI8a,WAAW,iBAAkB,SAAUpd,EAAW,CAAE4iB,QAASsG,IAC1EI,EAAWJ,EAAOxnB,OAAO0nB,IAC7B,MAAMoG,EAAUpG,EAAE2J,UAAUnZ,MAC5BhT,SAAEO,EAAE,iBAAiBqoB,iBAAuBA,GAASwD,qBAAqBxD,GAASjG,UAC3EiG,GAAYA,EAAQwD,YAAcxD,EAAQjG,QAGpD,OAAO3iB,EAAEyR,QAAQiR,EADL,oCAAsBJ,EAAOjgB,qBAAqBqgB,EAASrgB,WAEzE,CASAgqB,GAAgC9I,GAC9B,MAAMxqB,EAAaV,MAAK0oB,EAClBuL,EAAMj0B,KAAKqD,IAAI8a,WAAW,iCAAkC,SAAU+M,EAAQnqB,UAAW,CAAEmqB,UAASxqB,cAAcwqB,EAAQE,QAChI,GAAIF,EAAQgJ,gBAAgBvZ,MAC1B,OAAOsZ,EAAIxa,IAAI,4BAEjByR,EAAQgJ,gBAAgB7Z,KAAM7V,GAAkCxE,MAAKm0B,EAAiBjJ,EAAS1mB,GACjG,CAEA2vB,GAAiBjJ,EAA2B1mB,GAC1C,MAAM9D,EAAaV,MAAK0oB,EAClB/gB,EAAI3H,KAAKqD,IAAI8a,WAAW,kBAAmB,SAAU+M,EAAQnqB,UAAW,CAAEyD,SAAQ0mB,UAASxqB,cAAcwqB,EAAQE,QACjHrqB,EAAYmqB,EAAQnqB,UACpB+iB,EAAM,IAAIsQ,KAAwBrzB,EAAWmqB,EAAQ8D,QAAS9D,EAAQ3c,WAAW,GAAO+hB,GAAG9rB,GAG3F6vB,EAAQr0B,MAAKizB,EACbqB,EAAYD,EAAM3zB,KAAgB,IAAIiyB,GAAqBjyB,GAC3D6zB,EAAaD,EAAUppB,KAAKnK,KAAe,CAC/CsT,KAAMtT,EACN4Z,MAAOuQ,EAAQ8D,QAAUlL,EAAInJ,WAAQ5K,EACrCsL,OAAQ,GACR8B,SAAU,IAGR+N,EAAQgE,YAEVvnB,EAAEO,EAAE,4BACJqsB,EAAWpX,WAAa,GACxBoX,EAAWpX,SAAS+N,EAAQU,aAAe9H,EAAInJ,OAG7CmJ,EAAIzI,SACN1T,EAAEO,EAAE,0BACJqsB,EAAWlZ,OAAO3O,QAAQoX,EAAIzI,SAIhC6P,EAAQyI,KAAO7P,EAAI6P,MAAQzI,EAAQyI,KACnCzI,EAAQsJ,kBAAmB,EAC3B7sB,EAAE8R,IAAI,2CAA4C8a,GAClDv0B,MAAKkzB,EAAuBuB,kBAAkB,UAChD,CAMO3B,iBAAiBzB,GAEtB,MAAMqD,EAAY10B,MAAKizB,EAAkBjzB,MAAK0oB,GAI9C,GAHA1oB,MAAKizB,EAAkBjzB,MAAK0oB,GAAe,KAG1B,MAAbgM,GAAuC,MAAlBA,EAAUxpB,MAAuD,IAAvC3K,OAAOkF,KAAKivB,EAAUxpB,MAAMlB,OAC7E,MAAO,CAAE2qB,aAAc,GAAIC,cAAe,MAG5C,MAAMC,EAAct0B,OAAOC,QAAQk0B,EAAUxpB,MAEvCgZ,EADc2Q,EAAYp0B,IAAI,EAAE4T,EAAMygB,OAAK,CAASzgB,OAAMsG,MAAOma,GAAMna,SAClD6K,OAAO,CAACC,GAAOpR,QAAMsG,aAC9C8K,EAAIpR,IAAQsG,GACL8K,GACN,IAEGpK,EAASwZ,EACZpyB,OAAO,EAAEV,EAAG+yB,MAAWA,GAAMzZ,OAAOrR,OAAS,GAC7CvJ,IAAI,EAAEsB,EAAG+yB,MAAWA,GAAMzZ,QAC1B0Z,OAEG5X,EAAW0X,EACdpyB,OAAO,EAAEV,EAAG+yB,MAAWv0B,OAAOkF,KAAKqvB,GAAM3X,UAAUnT,OAAS,GAC5DvJ,IAAI,EAAE4T,EAAMygB,OAAK,CAAS/zB,UAAWsT,EAAM8I,SAAU2X,GAAM3X,YAGxD6X,EAAiD,IAA/Bz0B,OAAOkF,KAAKye,GAAQla,QAAkC,IAAlBqR,EAAOrR,OAC/DhK,MAAKszB,EAAiB2B,gBAAgB5D,EAAOhW,EAAQ6I,GACrD,GAGEhW,EAAclO,MAAKqzB,IACzB,IAAIuB,EAA4C,KAChD,GAAIzX,EAASnT,OAAQ,CACnB4qB,EAAgB,IAAKvD,EAAMY,YAC3B,MAAMiD,EAAiBl1B,KAAK0G,YAAYyuB,kBAAkBn1B,MAAK0oB,GAC/DnoB,OAAO2jB,OAAO/G,GAAUhL,QAAQijB,KAC9B,MAAMr0B,GAAYq0B,GAAQr0B,UACpB0rB,GAAkB4E,EAAMY,WAAWlxB,KAAYoc,SAErD,IAAIuO,GAAsC,GAC1CnrB,OAAOC,QAAQ40B,GAAQjY,UAAUhL,QAAQ,EAAEkC,GAAMsG,OAE/C+Q,GAAcH,GAAsBC,oBADrBM,MAAwBzX,GACyBoY,GAAiB9R,GAAO+Q,IAExF,MAAM2J,GAAoBhE,EAAMO,kBAAkB7wB,IAC5Cu0B,GAAYpnB,EAAYtN,WAAW8H,KAAKR,IAAKA,GAAEoG,OAASvN,IAGxD6rB,GAAeyE,EAAMW,aAAa1U,OAAOvc,GAAWu0B,GAAWD,GAAmBH,EAAen0B,KAEjGw0B,GAAiB,IAAK9I,MAAoBf,IAC1C8J,GAAkB5I,GAAamB,4BAA4BwH,GAAgBlE,EAAMnN,OAAOnjB,KAE9F6zB,EAAc7zB,IAAa,IAAK6zB,EAAc7zB,IAAYoc,SAAUqY,GAAe,EACpF,EAGL,CAEA,MAAO,CAAEb,aAAcK,EAAgBJ,gBACzC,iDA5MW5B,GAAqBtuB,MAAAC,KAAA,sCAArBquB,EAAqB/xB,QAArB+xB,EAAqB9xB,WAAA,SAArB8xB,CAAqB,oBCxB3B,MAAMyC,eACE,mBADFA,sBAES,0BAFTA,mBAGM,uBAHNA,2BAIc,gCAJdA,qBAMQ,yBANRA,iBAOI,qBAPJA,yBAQY,4BARZA,qCASwB,2CATxBA,qCAUwB,2CAVxBA,uBAYU,2BAGVC,GAA+C,CAC1DC,SAAU,CAJW,6BCbjB,MAAOC,GAEX,kBAAOC,CAAY1Y,EAAyByM,GAC1C,MAAMrb,EAAYqb,EAAerb,UAEjC,GAAII,IAAiBkM,UAAUtM,GAC7B,MAAO,GAGT,GAAII,IAAiBmnB,aAAavnB,GAChC,MAAO,CDPS,2BCUlB,MAAMonB,EAAyC,CDLlC,sBCwBb,MAd+C,CAC7CI,KAAiBC,cACjBD,KAAiBE,oBACjBF,KAAiBG,YACjBH,KAAiBI,oBACjBJ,KAAiBK,eACjBL,KAAiBM,aACjBN,KAAiBO,aACjBP,KAAiBQ,cAI+CrpB,SAASqB,KAIzEonB,EAASjpB,KDzBU,6BC2BnBipB,EAASjpB,KDvBQ,8BCwBQyQ,EAAuD+F,kBAAmB,IAC5E3U,IAAcwnB,KAAiBI,sBACpDR,EAASjpB,KDlCU,kCCsCnBkd,EAAe4M,YACjBb,EAASjpB,KDxCI,uBASI,2BANF,yBALN,oBCiDJipB,CACT,ECpDF,MAAM7yB,GAAW,CACfC,KAAK,EACL0zB,2BAA2B,EAC3BC,4BAA4B,GAkBxB,MAAOC,GAGX92B,YACU+2B,EAESC,EAEV5E,EACAN,EACAK,EACCvI,GAPAzpB,KAAA42B,SAES52B,KAAA62B,gBAEV72B,KAAAiyB,aACAjyB,KAAA2xB,gBACA3xB,KAAAgyB,eACChyB,KAAAypB,iBAVFzpB,KAAAqD,OAAMtD,MAAS,CAAC42B,2BAAyB7zB,IAY/C9C,KAAKkkB,OAAS,IAAK2S,EACrB,CAEOjF,kBAAkBvd,GACvB,OAAOrU,KAAKypB,eAAe/gB,KAAKyhB,GAAKA,EAAEppB,YAAcsT,EACvD,CAOOoiB,4BACL,MAAM9uB,EAAI3H,KAAKqD,IAAIC,KAAK,6BAExB,QAASqF,EAAI,EAAGA,EA3CI,EA2CiBA,IAAK,CACxC,MAAM0oB,EAAQrxB,MAAK82B,EAA4BnuB,GACzCouB,EAAe,IAAK/2B,KAAKkkB,UAAWmN,EAAMsD,cAGhD,MAAI3I,MAAQhsB,KAAKiyB,WAAYZ,EAAM/R,SAAK,EAAK0M,MAAQhsB,KAAKkkB,OAAQ6S,GAAe,CAC/EpvB,EAAEO,EAAE,iCACJ,KACF,CAGAlI,KAAKiyB,WAAaZ,EAAM/R,MACxBtf,KAAKkkB,OAAS6S,CAChB,CAKA,MAAO,CAAEpC,aAFY30B,KAAK42B,OAAOxD,gBAAgB6B,gBAAgBj1B,KAAM,GAAIA,KAAKkkB,OAAQlkB,KAAK62B,eAExDvX,MAAOtf,KAAKiyB,WACnD,CAEA6E,GAA4BE,GAC1B,MAAMrvB,EAAI3H,KAAKqD,IAAIC,KAAK,6BAA8B,CAAE0zB,cAGlDC,EAAuD,IAAxC12B,OAAOkF,KAAKzF,KAAKiyB,YAAYjoB,OAIlD,GAAKitB,EAgBHtvB,EAAEO,EAAE,wCAhBa,CACjB,MAAQysB,eAAcC,iBAAkB50B,KAAK42B,OAAOM,gBAAgBpE,iBAAiB9yB,MAGjF40B,IACFjtB,EAAEO,EAAE,6BAA8B,CAAE0sB,kBACpC50B,KAAKiyB,WAAa2C,GAKhBr0B,OAAOkF,KAAKkvB,GAAc3qB,OAAS,IACrCrC,EAAEO,EAAE,2BAA4B,CAAEysB,iBAClC30B,KAAKkkB,OAAS,IAAKlkB,KAAKkkB,UAAWyQ,GAEvC,CAMA,MAAQrD,YAAahS,EAAOiS,eAAcC,gBAAiBxxB,KAAK42B,OAAOO,cAAcxG,aAAa3wB,KAAK42B,OAAQ52B,MAG/G,UAAYqB,EAAKsZ,KAAUpa,OAAOC,QAAQ8e,GACxC3E,EAAM8X,cAAgBwE,EAClBrB,GAAcC,YAAYlb,EAAMwC,SAAUxC,EAAM6X,UAAU5I,gBAC1D5pB,KAAKiyB,WAAW5wB,IAAMoxB,cAK5B,MAAO,CAAEkC,aAFc30B,KAAK42B,OAAOxD,gBAAgB6B,gBAAgBj1B,KAAMwxB,EAAcD,GAEhDjS,MAAOA,EAChD,CAOAwS,wBAAwBsF,GACtB,MAAMpe,EAAShZ,KAAKiyB,WAAWmF,EAAer2B,WAM9C,OAJyBq2B,EAAelzB,UAAY8U,GAAQ9U,SAExD8U,GAAQmE,UAAY,IAAKia,EAAe1J,iBACxC,IAAK0J,EAAe1J,gBAE1B,EC7HI,MAAO2J,GAMXx3B,YAAYy3B,GALJt3B,KAAAu3B,eAAgB,EAChBv3B,KAAAqb,OAAkC,KAElCrb,KAAAqD,OAAMtD,MAAS,CAACs3B,yBAGtB,MAAM1vB,EAAI3H,KAAKqD,IAAIib,GAAG,OAAQ,CAAEgZ,eAChC,IAAIjc,EAASic,EAAWxuB,YAAYuS,OACpC,GAAc,MAAVA,GAA4B,IAAVA,EAEpB,YADA1T,EAAE8R,IAAI,uBAKRzZ,KAAKu3B,cAA8B,KAAblc,EAAO,GACzBrb,KAAKu3B,gBACPlc,EAASA,EAAOwQ,UAAU,IAC5B,MAAM2L,GAAcx3B,KAAKu3B,cAEzBv3B,KAAKqb,OAASA,EAAOoc,cAAchrB,MAAM,KACtC+Y,OAAO,CAACkS,EAAMvN,KACbuN,EAAKvN,GAAKqN,EACHE,GACN,IACL/vB,EAAE8R,IAAI,GAAI,CAAE4B,OAAQrb,KAAKqb,OAAQkc,cAAev3B,KAAKu3B,eACvD,CAEAI,WACE,OAAsB,MAAf33B,KAAKqb,MACd,CAEAuc,kBAAkB72B,GAChB,MAAM4G,EAAI3H,KAAKqD,IAAIib,GAAG,oBAAqB,CAAEvd,cAG7C,IAAKf,KAAK23B,WACR,OAAOhwB,EAAEsY,GAAE,EAAO,YAEpB,MAAM8D,EAAW/jB,KAAKqb,OAAOta,EAAU02B,eAEvC,OAAO9vB,EAAEsY,IAAI8D,GAAY/jB,KAAKu3B,eAChC,CAEA,oBAAOM,CAAc1a,GACnB,OAAOA,EAAS2a,UAAY3a,EAAS4a,eACvC,CAGAC,wBAAwBC,GACtB,MAAMtwB,EAAI3H,KAAKqD,IAAIib,GAAG,0BAA2B,CAAE2Z,uBAEnD,IAAKj4B,KAAK23B,WACR,OAAOhwB,EAAEsY,EAAEgY,EAAoB,wBAGjC,IACEA,EAAmB9lB,QAAQ,CAAC+lB,EAAYlwB,KAEtC,GAAK2G,IAAiBmnB,aAAaoC,EAAWtO,eAAerb,YAIX,GAA9C2pB,EAAWxK,gBAAgBqK,gBAI/B,QAASpvB,EAAIX,EAAQ,EAAGW,EAAIsvB,EAAmBjuB,OAAQrB,IAAK,CAC1D,MAAMwvB,EAAaF,EAAmBtvB,GAGtC,GAAIgG,IAAiBypB,kBAAkBD,EAAWvO,eAAerb,WAC/D,OAEF,GAAkD,GAA9C4pB,EAAWzK,gBAAgBqK,gBAG7B,OAFApwB,EAAEO,EAAE,iBAAkB,CAAEnH,UAAWm3B,EAAWn3B,UAAWumB,OAAQ6Q,EAAWp3B,iBAC5Em3B,EAAWxK,gBAAgBqK,iBAAkB,EAGjD,GAEJ,OAAStT,GACP0J,QAAQrO,MAAM,4CAA6C2E,EAC7D,CAEA,OAAOwT,CACT,EClFF,MAAMn1B,GAAW,CACfC,KAAK,EACLs1B,uBAAuB,EACvBC,mBAAmB,EACnBC,sBAAsB,EACtBC,oBAAoB,EACpBC,oBAAoB,EACpBpd,OAAQ,IAAIC,OAOP,IAAMod,GAA8B,MAArC,MAAOA,EAIX74B,YACU4G,EACAwe,GADAjlB,KAAAyG,aACAzG,KAAAilB,eAJVjlB,KAAAqD,OAAMtD,MAAS,CAAC24B,kCAAiC51B,IAOjD9C,MAAA24B,EAAuB,IAAI1qB,IAAsBjO,KAAKqD,IAAIgR,KAFtD,CAEJskB,GAEAhhB,KACEihB,EACA1qB,EACA2qB,EACAC,EACA5P,GAEA,OAAAlpB,MAAK+4B,EAAQH,EACb54B,MAAKqzB,EAAenlB,EACpBlO,MAAKg5B,EAAuB,IAAI3B,GAAoBuB,EAAWhwB,QAC/D5I,MAAKi5B,EAAuBJ,EAC5B74B,MAAKk5B,EAAsBJ,EAC3B94B,MAAKm5B,EAAoBjQ,EAClBlpB,IACT,CAEA+4B,GACAC,GACAC,GACAC,GACA7F,GACA8F,GAEOC,uBACL,MAAM7gB,EAAOvY,MAAK+4B,EAAM5uB,OAAOhK,KACzB6e,EAAKhf,MAAK+4B,EAAM5uB,OAAOW,GACvBuuB,EAAar5B,MAAKqzB,EAAavoB,GAC/BwuB,EAAat5B,MAAKu5B,EAAsBhhB,EAAMyG,EAAIqa,GAExD,SAAO3d,OAAY,uBACjB,IAAM1b,MAAKw5B,EAAuBx5B,MAAKi5B,IAAwBj5B,MAAKk5B,IAAuBI,GAE/F,CAEAE,GAAuBC,EAAsBC,EAA2BjQ,GACtE,MAAMvb,EAAclO,MAAKqzB,EACnB1rB,EAAI3H,KAAKqD,IAAIC,KAAK,wBAAyB,CAAE4K,cAAayrB,aAAcF,IAExEG,EAAsB1rB,EAAYtN,WAAWH,IAAIgxB,IACrD,MAAM1wB,EAAY0wB,EAAKnjB,KACjBurB,EAAS75B,KAAKqD,IAAI8a,WAAW,oBAAqB,SAAUpd,EAAW,CAAEA,cAGzEwN,EAAYvO,KAAKilB,aAAalf,IAAI0rB,EAAKhjB,WAIvCqrB,GAASL,EAAOrqB,QAAuBqiB,EAAKpiB,UAGlD,GAAIqqB,EAAYvsB,UAAYssB,EAAOtsB,QAAS,CAC1C,MAAM4sB,GAAcL,EAAYtqB,QAAuBqiB,EAAKpiB,UAC5DyqB,GAAOxrB,KAAOyrB,GAAYzrB,MAAQwrB,GAAOxrB,KACzCwrB,GAAOE,YAAcD,GAAYC,aAAeF,GAAOE,YACvDF,GAAOG,MAAQF,GAAYE,OAASH,GAAOG,KAC7C,CAGA,MAAMC,GAAcl6B,MAAK24B,EAAqBwB,qBAAqBp5B,EAAW+4B,IAG9EI,GAAYzrB,UAAYgjB,EAAKhjB,UAC7ByrB,GAAYnC,gBAAkB/3B,MAAKg5B,EAAqBpB,kBAAkBnG,EAAKnjB,MAC/E,MAAMof,GAAkB1tB,MAAK24B,EAAqBxpB,mBAAmB+qB,IAC/D1B,GAA+C,IAChD/O,EAAe/gB,KAAK0xB,IAAKA,GAAEr5B,YAAc0wB,EAAKnjB,MACjDof,mBACA2M,uBAAwB9rB,EACxBrK,SAAUu1B,EAAOtsB,SAGnB,OAAO0sB,EAAO5Z,EAAEuY,GAAkB,GAG9B8B,EAAgCt6B,MAAKg5B,EAAqBhB,wBAAwB4B,GAExF,OAAOjyB,EAAEsY,EAAEqa,EACb,CAEAf,GAAsB74B,EAAoBue,EAAkBsb,GAC1D,MAAMrsB,EAAclO,MAAKqzB,EACnB1rB,EAAI3H,KAAKqD,IAAIC,KAAK,uBAAwB,CAAE5C,aAAYue,WAAUsb,sBAElEr2B,EAAWlE,KAAKyG,WAAWvC,WAI3Bs2B,EAAW,IAAIjtB,KAAarJ,EAASu2B,QAASv2B,EAASkJ,SAEvDstB,EAAa16B,MAAKm5B,EAAkB1O,WACpC7c,EAAY5N,KAAKyG,WAAWlB,OAElCoC,EAAEO,EAAE,uBAAwB,CAAExH,aAAYue,WAAUsb,oBAAmBr2B,WAAUw2B,eAEjF,MAAMC,EAAkBzsB,EAAYtN,WAAWH,IAAI,CAACgxB,EAAMzpB,MACxD,MAAMjH,GAAY0wB,EAAKnjB,KACjBurB,GAAS75B,KAAKqD,IAAI8a,WAAW,qBAAsB,SAAUpd,GAAW,CAAEA,aAAWiH,WAErF4yB,GAAWJ,EAASprB,QAAuBqiB,EAAKpiB,UAChDwrB,GAAkB76B,MAAK24B,EAAqBxpB,mBAAmByrB,IAC/DE,GAAkBD,GAAgBE,WAAY,EAE9CnR,GAAiB5pB,KAAKilB,aAAaE,SAASsM,GAElDoI,GAAO3xB,EAAE,UAAW,CAAEnH,aAAWmN,cAAahK,WAAUutB,OAAMoJ,mBAAiBjR,oBAE/E,MAAM/a,GAAQC,IAAkBC,YAAYhJ,IAAI0rB,EAAKhjB,WAG/C+jB,GAA4B,CAChC9xB,aACAue,WACAsb,oBACAx5B,aACAiH,SACAgzB,sBAAuB,qBAAqBptB,EAAU3I,UAAU+C,KAChE8yB,mBACAlR,kBACAqR,cAAej7B,MAAK24B,EAAqBsC,cAAc/sB,EAAaujB,GACpEjf,KAAMif,EAAKjjB,KACXK,SACA4b,WAAYA,IAAMiQ,EAAW35B,KAAc,MAG7C,OAAO84B,GAAO5Z,EAAEuS,GAAS,GAE3B,OAAO7qB,EAAEsY,EAAE0a,EACb,iDA1IWjC,GAA8Bh0B,MAAAC,KAAAD,MAAAiM,KAAA,sCAA9B+nB,EAA8Bz3B,QAA9By3B,EAA8Bx3B,WAAA,SAA9Bw3B,CAA8B,KCJrC,MAAOwC,GAEX,iBAAOC,CAAWhe,GAEhB,OAAOnd,MAAKo7B,EAAwBje,IAAoBA,EAASke,QACnE,CAEO,oBAAOC,CAAc1X,EAA8BrV,GAExD,MAAMgtB,EAA4B,CAChChtB,IAAcwnB,KAAiByF,iBAC3Bx7B,MAAKy7B,EAAU7X,GACf5jB,MAAK07B,EAAc9X,GACvB5jB,MAAK27B,EAAO/X,GACZ5jB,MAAK47B,EAAUhY,GACf5jB,MAAK67B,EAAWjY,GAChB5jB,MAAK87B,EAAWlY,GAChB5jB,MAAK+7B,EAASnY,GACd5jB,MAAKg8B,EAASpY,GACd5jB,MAAKi8B,EAAiBrY,IAExB,OAAIrV,IAAcwnB,KAAiBmG,kBACjCX,EAAW7uB,KAAK1M,MAAKm8B,EAAevY,IAC/B2X,CACT,CAEA,QAAOa,CAAwCC,EAA0BzY,GACvE,MAAMzG,EAAWyG,EAAMzG,WACvB,OAAInd,MAAKo7B,EAAwBje,GAAkB,KAC5CA,CACT,CAEA,QAAOse,CAAU7X,GACf,OAAQyY,IACN,MAAMvZ,EAAI9iB,MAAKo8B,EAAwCC,EAASzY,GAGhE,OAAS,MAALd,GAAcA,EAAEwZ,cACbC,MAAWC,SAASH,GADe,IACR,CAEtC,CAEA,QAAOX,CAAc9X,GACnB,OAAQyY,IACN,MAAMvZ,EAAI9iB,MAAKo8B,EAAwCC,EAASzY,GAChE,OAAS,MAALd,GAAcA,EAAEwZ,eAE0B,IAAtCD,EAAwBI,UAAkB,CAAED,UAAU,GAFpB,IAE6B,CAE3E,CAEA,QAAOb,CAAO/X,GACZ,OAAQyY,IACN,MAAMvZ,EAAI9iB,MAAKo8B,EAAwCC,EAASzY,GAChE,OAAS,MAALd,GAAcA,EAAE4Z,0BAEbH,MAAWI,QAAQ7Z,EAAE4Z,0BAArBH,CAAgDF,GAFD,IAEQ,CAElE,CAEA,QAAOT,CAAUhY,GACf,OAAQyY,IACN,MAAMvZ,EAAI9iB,MAAKo8B,EAAwCC,EAASzY,GAEhE,GADmB,MAAfd,GAAG8Z,UAAoB9Z,EAAE8Z,SAAW,GACnB,MAAjBP,EAAQ1hB,MAAe,OAAO,KAElC,MAAMkiB,EAA6B,IAAf/Z,EAAE8Z,SAAiB,aAAe,sBAAuB9Z,EAAE8Z,eAE/E,OADiBP,EAAQ1hB,MAAiBhC,WAAWmkB,MAAMD,GACpB,KAArB,CAAEE,UAAU,EAAI,CAEtC,CAEA,QAAOlB,CAAWjY,GAChB,OAAQyY,IACN,MAAMvZ,EAAI9iB,MAAKo8B,EAAwCC,EAASzY,GAChE,OAAc,MAAVd,GAAGka,IAAoB,KAEpBT,MAAWU,IAAIna,EAAEka,IAAjBT,CAAsBF,EAAO,CAExC,CAEA,QAAOP,CAAWlY,GAChB,OAAQyY,IACN,MAAMvZ,EAAI9iB,MAAKo8B,EAAwCC,EAASzY,GAChE,OAAc,MAAVd,GAAGoa,IAAoB,KAEpBX,MAAWY,IAAIra,EAAEoa,IAAjBX,CAAsBF,EAAO,CAExC,CAEA,QAAON,CAASnY,GACd,OAAQyY,IACN,MAAMvZ,EAAI9iB,MAAKo8B,EAAwCC,EAASzY,GAChE,OAAS,MAALd,GAAgC,GAAnBA,EAAEsa,eAAyCrtB,MAAnB+S,EAAEsa,cAAmC,KACvEC,GAAYhB,EAASzY,EAAOd,GAAKA,EAAEsa,cAAgB,CAAEE,WAAYxa,EAAEsa,eAAkB,KAEhG,CAEA,QAAOpB,CAASpY,GACd,OAAQyY,IACN,MAAMvZ,EAAI9iB,MAAKo8B,EAAwCC,EAASzY,GAChE,OAAS,MAALd,GAAgC,GAAnBA,EAAEya,eAAyCxtB,MAAnB+S,EAAEya,cAAmC,KACvEF,GAAYhB,EAASzY,EAAOd,GAAKA,EAAEya,cAAgB,CAAEC,WAAY1a,EAAEya,eAAkB,KAEhG,CAEA,QAAOpB,CAAevY,GACpB,OAAQyY,IACN,MAAMlf,EAAWyG,EAAMzG,WACvB,IAAI2C,EACA2d,EACJ,MAAMC,EAAYvgB,EAA8CwgB,eAEhE,GAAI39B,MAAKo7B,EAAwBje,IAA0B,SAAbugB,IAAwBrB,EAAQ1hB,MAC5EmF,GAAQ,EACR2d,GAAU,OAEV,IACEr1B,KAAKw1B,MAAMvB,EAAQ1hB,OACnBmF,GAAQ,EACR2d,GAAU,CACZ,OACmB,WAAbC,GACF5d,GAAQ,EACR2d,GAAU,GACY,UAAbC,IACT5d,GAAQ,EACR2d,GAAU,EAEd,CAGFpB,SAAQwB,SAAWJ,EAAU,CAAEK,aAAa,GAAS,KAC9Che,EAAQ,CAAEie,WAAW,GAAS,KAEzC,CAEA,QAAO9B,CAAiBrY,GACtB,OAAQyY,IACN,MAAM3J,EAAoB9O,EAAMtE,QAAQoT,mBAEhC5S,QAAO2d,WACTz9B,MAAKo7B,EAAwBxX,EAAMzG,aAAoC,MAArBuV,EAC7C,CAAE5S,OAAO,EAAO2d,SAAS,GACC,UAA/B/K,EAAkBsL,SACb,CAAEle,OAAO,EAAM2d,SAAS,GACE,YAA/B/K,EAAkBsL,SACb,CAAEle,OAAO,EAAO2d,SAAS,GAC3B,CAAE3d,OAAO,EAAO2d,SAAS,GAGlCpB,SAAQwB,SAAWJ,EAAU,CAAEQ,gBAAgB,EAAMC,eAAgBxL,EAAkBniB,SAAY,KAC5FuP,EAAQ,CAAEqe,cAAc,EAAMD,eAAgBxL,EAAkBniB,SAAY,KAEvF,CAGA,QAAO6qB,CAAwBje,GAC7B,OAAQka,GAAoBQ,cAAc1a,EAC5C,EAGF,SAASkgB,GAAYhB,EAA0BzY,EAA8Bd,GAE3E,GAAI9B,MAAMC,QAAQob,EAAQ1hB,OACxB,OAAO0hB,EAAQ1hB,MAAM3Q,OAGvB,MAAMo0B,EAAKxa,EAAM6G,WACjB,OAAU,MAAN2T,ElBzLA,SAAUC,GAAoB1jB,EAA0BoG,EAAmBud,GAK/E,MAAa,IAAT3jB,GAAe2jB,EACV,CAAC,IAEG,IAAT3jB,GAAgBA,EAGZqG,MAAMC,QAAQtG,GAClBA,EACAA,EAAMlO,MAAMsU,GAJP,EAKX,CkB4KWsd,CAAoBhC,EAAQ1hB,MAAOmI,EAAEyb,WAAW,GAAOv0B,OAGzDo0B,EAAG3b,cAAczY,MAC1B,CAGM,MAAOw0B,GACX3+B,YAESkB,EAEAwN,EAEP4O,EAEOmC,EAECmf,GARDz+B,KAAAe,YAEAf,KAAAuO,YAIAvO,KAAAsf,QAECtf,KAAAy+B,aAERz+B,KAAKmd,SAAWA,CAClB,CAMA,cAAIsN,GACF,OAAOzqB,KAAKy+B,eAAez+B,KAAKe,YAAc,IAChD,EChOK,MCaD+B,GAAW,CACfC,KAAK,EACLgrB,6BAA6B,EAC7B2Q,2BAA2B,EAC3BC,gCAAgC,EAChCtjB,OAAQ,IAAIC,OAGR,MAAOsjB,GAEX/+B,YAEUg/B,EACA36B,EAEA46B,EAEAC,EACAC,GANAh/B,KAAA6+B,sBACA7+B,KAAAkE,WAEAlE,KAAA8+B,kBAEA9+B,KAAA++B,eACA/+B,KAAAg/B,cATVh/B,KAAAqD,OAAMtD,MAAS,CAAC6+B,qCAUZ,CAEJthB,OACEvc,EACAu0B,EACAD,EACApmB,GAEA,OAAO,IAAIgwB,GACTl+B,EACAf,KAAK6+B,oBACL7+B,KAAKkE,SACLlE,KAAK8+B,gBACL9+B,KAAK++B,aACL/+B,KAAKg/B,YACL1J,EACAD,EACApmB,EAEJ,EAUI,MAAOgwB,GAIXp/B,YACUkB,EAEA89B,EACA36B,EAEA46B,EAEAC,EACAG,EAGA5J,EACAD,EACApmB,GAbAjP,KAAAe,YAEAf,KAAA6+B,sBACA7+B,KAAAkE,WAEAlE,KAAA8+B,kBAEA9+B,KAAA++B,eACA/+B,KAAAk/B,kBAGAl/B,KAAAs1B,YACAt1B,KAAAq1B,oBACAr1B,KAAAiP,kBAhBVjP,KAAAqD,OAAMtD,MAAS,CAACk/B,8BAA4Bn8B,GAiBxC,CAQJirB,4BAA4B5Q,EAAyBgiB,GACnD,MAAMx3B,EAAI3H,KAAKqD,IAAI8a,WAAW,8BAA+B,SAAUne,KAAKe,UAAW,MAASoc,WAAUgiB,gBAEpG9J,EAAoBr1B,KAAKq1B,kBACzB2J,EAAch/B,KAAKk/B,kBAGzB/hB,EAAS7O,KAAO6O,EAAS7O,MAAQtO,KAAKs1B,UAAUhnB,KAEhD6O,EAASmf,cAAgBpB,GAAkBC,WAAWhe,GACtD,MAAMiiB,EAAqBp/B,MAAKq/B,IAEhCliB,EAASoV,mBAAqByM,GAAeI,EAC7CjiB,EAASmiB,yBAA2Bt/B,MAAKu/B,EAAgCpiB,EAASoV,oBAElFpV,EAASqiB,iBAAmBR,GAAe7hB,EAASmiB,0BAA4Bt/B,KAAK++B,aAErF5hB,EAASsiB,WAAatiB,EAASqiB,kBAAoBriB,EAAS4d,SAE5D5d,EAASuiB,uBAAyBrK,EAAkB3H,gBAAgBgS,wBAC/DviB,EAASoV,mBAGd,MAAMH,EAAQiD,EAAkBxmB,OAAOgR,OAAO,CAAE9e,UAAWf,KAAKe,UAAWoc,SAAUA,EAAUxC,MAAOwkB,EAAYQ,MAAO3/B,KAAK8+B,mBAAsB3hB,EAEpJ,OAAOxV,EAAEsY,EAAEmS,EACb,CAIAiN,KACYr/B,KAAKqD,IAAI8a,WAAW,4BAA6B,SAAUne,KAAKe,WAA1E,MACM89B,EAAsB7+B,KAAK6+B,oBAC3BtwB,EAAYvO,KAAKq1B,kBAAkBgF,uBACnCprB,EAAkBjP,KAAKiP,gBACvB2wB,EAAoB5/B,KAAKs1B,UAAUjmB,SAazC,GAT2BwvB,EAAoBn2B,KAAKm3B,GD9HlC,uBC8HuCA,EAAErxB,KAAKF,OACxC1N,WAAWk/B,SAASC,OAAO7pB,KAAK8pB,IAAiB,IAAZA,EAAEp9B,QAI3D2L,GAAWqB,cAIV,IAAIL,IAAYN,EAAiBjP,KAAKkE,UAAU+7B,WACnD,OAAO,EAIT,UAAWC,KAAUN,GAAqB,GACxC,GAAIM,EAAOt/B,WAAW2xB,oBAAoBwN,OAAO7pB,KAAK8pB,IAAiB,IAAZA,EAAEp9B,OAC3D,OAAO,EAEX,OAAO,CACT,CAEA28B,GAAgCH,GAC9B,MAAMz3B,EAAI3H,KAAKqD,IAAI8a,WAAW,iCAAkC,SAAUne,KAAKe,WACzEkO,EAAkBjP,KAAKiP,gBACvB/K,EAAWlE,KAAKkE,SAGtB,GAAIA,EAASiJ,UAAYjJ,EAASkJ,QAChC,OAAOzF,EAAEsY,GAAE,EAAO,6BAEpB,MAAMkgB,EAAc,IAAI5wB,IAAYN,EAAiB/K,GAGrD,OAAIk7B,EACKz3B,EAAEsY,GAAE,EAAM,gCAEdkgB,EAAYF,WAEbE,EAAYC,kBACPz4B,EAAEsY,GAAE,EAAO,gCAEXtY,EAAEsY,GAAE,EADTkgB,EAAYE,mBACG,8BACF,4BALR14B,EAAEsY,GAAE,EAAM,gCAMrB,iBCjKI,MAAOqgB,GAGXzgC,YACUqO,EACA8wB,GADAh/B,KAAAkO,cACAlO,KAAAg/B,cAJFh/B,KAAAqD,OAAMtD,MAAS,CAACugC,+BAKpB,CAIJrL,gBACE5D,EACAkP,EACAhP,EACAiP,GAEA,MAAMtyB,EAAclO,KAAKkO,cACnB8wB,EAAch/B,KAAKg/B,cAEzBwB,IAAmBnP,EAAMnN,OACzB,MAAMoN,EAAcD,EAAMY,WACpBtqB,EAAI3H,KAAKqD,IAAIib,GAAG,kBAAmB,CAAEpQ,cAAasyB,iBAAgBlP,cAAaC,eAAcgP,8BAA6BvB,gBAEhI,GAAIA,EACF,OAAOr3B,EAAEsY,EAAE,GAAI,6BAiBjB,MAAMwgB,EAfOvyB,EAAYtN,WACtBH,IAAIgxB,KACHpd,KAAMod,EAAKnjB,KACX+V,SAAUmc,EAAe/O,EAAKnjB,SAG/B7L,OAAOuV,QAAoBjI,IAAfiI,EAAEqM,WAA2BiN,EAAYtZ,EAAE3D,OAAO8I,SAASqiB,kBACvE/+B,IAAIuX,QACAA,EACH2C,MAAO3a,MAAK0gC,EAAe1oB,EAAE3D,KAAMksB,EAA6BhP,MAEjE9uB,OAAOuV,QAAiBjI,IAAZiI,EAAE2C,QAAwBgmB,KAAkBC,oBAAoB5oB,EAAEqM,SAAUrM,EAAE2C,QAIxE6K,OAAO,CAACC,EAAKzN,KAAQyN,EAAIzN,EAAE3D,MAAQ2D,EAAE2C,MAAc8K,GAAQ,IAChF,OAAO9d,EAAEyR,QAAQqnB,EACnB,CAEAC,GAAe3/B,EAAmB8/B,EAAgCtP,GAKhE,MAAMuP,EAAcD,EAAcp+B,OAAO0nB,GAAKA,EAAE9V,OAAStT,GACnDggC,EAAgBD,EAAYA,EAAY92B,OAAS,IAAI2Q,MAC3D,OAAIomB,GAIGxP,EAAaxwB,EACtB,ECxCF,MAAM+B,GAAW,CACfC,KAAK,EACL4U,MAAM,EACNqpB,YAAY,GAOP,IAAMC,GAAiB,MAAxB,MAAOA,EAIXC,GACAC,GACAC,GACAC,GACAC,GAGAC,GACAC,GAQAC,GAEA5hC,cArBQG,KAAAqD,OAAMtD,MAAS,CAACkhC,qBAAoBn+B,IAG5C9C,MAAAkhC,KAAc5kB,OAAOC,KACrBvc,MAAAmhC,KAAuB7kB,OAAOolB,KAC9B1hC,MAAAohC,KAAqB9kB,OAAO6J,IAC5BnmB,MAAAqhC,KAA0B/kB,OAAOqlB,KACjC3hC,MAAAshC,KAAehlB,OAAOslB,KAGtB5hC,MAAAuhC,KAAoB/5B,KAAUkxB,IAC9B14B,MAAAwhC,KAAah6B,KAAUwd,IAChBhlB,KAAAm3B,iBAAgB3vB,KAAUqpB,IAC1B7wB,KAAAk3B,mBAAkB1vB,KAAUwrB,GAQnB,CAGhBrb,KACE3J,EACAtN,EACAR,EACAgO,EACAurB,EACAC,EACAmI,EACAC,EAA6B,MAE7B9hC,KAAKqD,IAAI0+B,WAAW,IAAIrhC,EAAWmrB,UAAU,EAAG,OAChD,MAAMlkB,EAAI3H,KAAKqD,IAAIC,KAAK,OAAQ,CAAE5C,aAAYR,OAAMgO,cAAaurB,SAAQqI,eACvD,MAAdA,GAAoB9hC,KAAKqD,IAAI2+B,YAAYF,GAE7C9hC,KAAKE,KAAOA,EACZF,KAAKmM,UAAYstB,IACjBz5B,MAAKyhC,EAAgBI,EAErB,MAAM7C,EAAch/B,MAAKshC,EAAatC,YAAYt+B,GAC5CuhC,EAAK/zB,IAEX,OAAAlO,KAAKyqB,WAAazqB,MAAKwhC,EAAWtc,2BAA2B+c,EAAGrhC,YAChE+G,EAAEO,EAAE,kBAAmBlI,KAAKyqB,YAI5BzqB,MAAKkiC,EAAsBliC,MAAKuhC,EAC7B5pB,KAAKzX,EAAM+hC,EAAIxI,EAAQC,EAAa1rB,GACpCorB,uBAEHp5B,MAAKmiC,EAAgBniC,MAAKoiC,EAAkB3I,EAAQwI,EAAIjD,GAExDh/B,KAAKozB,gBAAkB,IAAIkN,GAA2BpyB,EAAa8wB,GACnEh/B,KAAKk3B,gBAAgBvf,KAAKjX,EAAYwN,EAAaF,EAAKhO,KAAKozB,iBAC7DpzB,KAAKm3B,cAAcxf,KAAKjX,EAAYR,EAAK0I,OAAQoF,EAAKhO,KAAKk3B,gBAAiB+K,EAAIj0B,EAAIq0B,sBAAsBC,YAE1GtiC,MAAKuiC,EAAkBviC,MAAKshC,EAAakB,qBAAqB9hC,GACvDV,IACT,CAEAmiC,GAMAD,GAEAK,GAuBO7L,2BAA2BzE,GACtBjyB,KAAKqD,IAAIib,GAAG,8BAAtB,MAEMuY,EAAgB72B,MAAKyhC,EAAcvd,SAEzClkB,KAAKmM,UAAYnM,MAAKkhC,EAAYh9B,WAIlC,MAAMvD,EAAaX,MAAKuiC,IAClBvQ,EAAehyB,MAAKmiC,IACpBM,EAAqBziC,MAAKkiC,IAEhC,OAAAliC,KAAKqxB,MAAQ,IAAIsF,GAAuB32B,KAAM62B,EAAe5E,EAAYtxB,EAAYqxB,EAAcyQ,GAC/EziC,KAAKqxB,MAAMoF,4BAKZnX,KACrB,CAKA8iB,GAAkBM,EAAiCx0B,EAA6B8wB,GAyB9E,SAvBiBtjB,OAAY,iBAAkB,KAC7C,MAAM+d,EAASiJ,IACTv2B,EAAYstB,EACZzQ,EAAUhpB,MAAKmhC,EAAqBnY,UACpC3B,EAAarnB,MAAKohC,EAAmBza,WAGnCgc,EAA8B,CAClC/0B,UAAW5N,MAAKkhC,EAAY37B,OAC5Bk0B,OAAQA,EACRmJ,MAAO5Z,EACP6Z,mBAAoB7iC,MAAKqhC,GAU3B,OAPyB,IAAIzC,GAC3B1wB,EAAYmB,SACZlD,EACAw2B,EACAtb,EAAWA,WACX2X,EAAW,EAKnB,iDAnJWiC,EAAiB,sCAAjBA,EAAiBhgC,QAAjBggC,EAAiB//B,WAAA,SAAjB+/B,CAAiB,KC3BxB,MAAO6B,GAIXjjC,YAAoBa,GAAAV,KAAAU,aAFpBV,KAAAqD,OAAMtD,MAAS,CAAC+iC,6BAMhB9iC,KAAA+iC,iBAA2D,GAHzD/iC,KAAKqD,IAAI0+B,WAAW,IAAIrhC,EAAWmrB,UAAU,EAAG,MAClD,CAIAmX,aACE,OAAOziC,OAAOkF,KAAKzF,KAAK+iC,kBAAkB/4B,OAAS,CACrD,CAMAi5B,cAAcliC,EAAmB8e,EAAgCkC,EAAgBuP,GAC/E,MAAM4R,EAA8D,IAA9C3iC,OAAOkF,KAAKzF,KAAK+iC,kBAAkB/4B,OACnDrC,EAAI3H,KAAKqD,IAAIib,GAAG,gBAAiB,CAAEyD,SAAQhhB,YAAW8e,SAAQqjB,kBAE9DjZ,EAASqH,IAAcvwB,GAAWoc,SAClCgmB,EAAQ,IAAKlZ,KAAWpK,GAC9B,MAAImM,MAAQ/B,EAAQkZ,GAClB,OAAOx7B,EAAE8R,IAAI,0BAA0BzZ,KAAKU,0BAA0BK,KAGxEf,KAAK+iC,iBAAiBhiC,GAAa,IADtBf,KAAK+iC,iBAAiBhiC,IAAc,MACA8e,GAEjDlY,EAAE8R,IAAI,iBAAkB,CAAEwQ,SAAQkZ,QAAOtjB,UAC3C,CAEAujB,YAAYnZ,GACV,MAAMtiB,EAAI3H,KAAKqD,IAAIib,GAAG,cAAe,CAAE2L,SAAQoZ,OAAQrjC,KAAK+iC,mBACtDM,EAASrjC,KAAK+iC,iBACpB,GAAmC,IAA/BxiC,OAAOkF,KAAK49B,GAAQr5B,OACtB,OAAOigB,EAET,MAAMjG,EAAQzjB,OAAOkF,KAAK49B,GAAQ7d,OAAO,CAACC,EAAKpkB,KAC7C,MAAMiiC,EAAU7d,EAAIpkB,GACdwe,EAASwjB,EAAOhiC,GACtB,MAAO,IACFokB,EACHtD,CAAC9gB,GAAM,IACFiiC,EACHnmB,SAAU,IAAKmmB,EAAQnmB,YAAa0C,MAGvCoK,GAEH,OAAAjqB,KAAK+iC,iBAAmB,GACjBp7B,EAAEsY,EAAE+D,EAAO,SACpB,ECvDF,MAAMlhB,GAAW,CACfC,KAAK,EACLwgC,WAAW,EACXC,gBAAgB,EAChBC,oBAAoB,GAMhB,MAAOC,GAIX7jC,cAFAG,KAAAqD,OAAMtD,MAAS,CAAC2jC,+BAA6B5gC,GAE9B,CAEfygC,UAAUxhB,GACR,MAAMpa,EAAI3H,KAAKqD,IAAIC,KAAK,YAAa,CAAEye,WAGjC4hB,KAAWjoB,OAAY,WAAY,IAAO1b,MAAK4jC,EAAgB7hB,IAAU,SAGzE8hB,KAAUnoB,OAAY,UAAW,IAAM1b,MAAK4jC,EAAgB7hB,IAAU,SAG5E8B,SAAO,IAAM7jB,MAAK8jC,EAAoBH,IAAY,UAAO,EAGzD9f,OAAO,IAAM7jB,MAAK8jC,EAAoBD,IAAW,QAEjDl8B,EAAE8R,KACJ,CAEAmqB,GAAgB/jB,EAAoCkkB,GAElD,IAAKlkB,EAAQ,MAAO,GAIpB,MAAMmkB,EAAazjC,OAAOC,QAAQqf,GAC/Bpd,OAAO,EAAEV,EAAGi+B,KAAOA,EAAE+D,IAAOpZ,MAC5BlqB,IAAI,EAAEq0B,EAAOkL,MAAC,CACblL,QACAnK,KAAMqV,EAAE+D,GAAMpZ,KACdF,WAAYuV,EAAExN,UAAU/H,cAI5B,OADUzqB,KAAKqD,IAAIC,KAAK,iBAAkB,CAAE2gC,MAAOD,EAAWh6B,OAAQg6B,cAAcD,GAC3E3qB,QAAQ4qB,EACnB,CAGAF,GAAoBjkB,EAA0BkkB,GAC5C,IAAKlkB,EAAO7V,OAAQ,OACpB,MAAMrC,EAAI3H,KAAKqD,IAAIC,KAAK,qBAAsB,CAAE2gC,MAAOpkB,EAAO7V,OAAQg6B,WAAYnkB,GAAU,qBAAOkkB,KAEnG,UAAajP,QAAOnK,OAAMF,gBAAgB5K,EAAQ,CAChDlY,EAAEO,EAAE,WAAY,CAAE4sB,QAAOnK,SACzB,MAAMyT,EAAK3T,KACY,QAARsZ,EAAiB3F,EAAGpc,gBAAkBoc,EAAG9c,kBACjDjY,IAAIshB,EACb,CACF,oHCNF,MCtDM7nB,GAAW,CACfohC,YAAY,GAIP,IAAMC,GAAmB,MAA1B,MAAOA,EAIXtkC,YAAoBukC,GAClB,GADkBpkC,KAAAokC,UAFpBpkC,KAAAqD,OAAMtD,MAAS,CAACokC,uBAAsBrhC,IAmBtC9C,MAAAqkC,KAAY7oB,OAAkB,WAAY,MAc1Cxb,MAAAskC,KAAkB9oB,OAAuC,iBAAkB,MA9BrExb,KAAKqD,IAAIugB,MAAMsgB,WAAY,CAC7B,MAAMK,KAAUxkC,MAAS,eACzBwkC,EAAQr8B,EAAE,0BACV,IAAI+hB,EAAqC,IACzCpG,SAAO,KACL,MAAMtL,EAAOvY,MAAKqkC,IAClB,IAAK9rB,EAAM,OAAOgsB,EAAQr8B,EAAE,WAC5B,MAAMnF,EAAM/C,KAAKkkB,SACXuc,ECfR,SAAU+D,GAAWC,EAAaC,GAQtC,OAPA,SAASjE,EAAQgE,EAAaC,GAC5B,OF0BJ,SAASC,GAAUF,EAAQG,EAAUC,GACnC,IAAIC,KAAQ7jB,MAAQwjB,GAChBM,EAAYD,MAASE,MAASP,KAAM,EAAKQ,MAAaR,GAG1D,GADAG,KAAWM,MAAaN,EAAU,GACf,MAAfC,EAAqB,CACvB,IAAIM,EAAOV,GAAUA,EAAO5kC,YAE1BglC,EADEE,EACYD,EAAQ,IAAIK,EAAO,MAE1BC,MAASX,KAChBI,EAAcQ,MAAWF,IAAI,EAAIG,SAAWC,MAAad,IAG3C,CAAC,CAEnB,CACA,OAACM,EAAYS,KAAYC,MAAYhB,EAAQ,SAAS9pB,EAAO3S,EAAOy8B,GAClE,OAAOG,EAASC,EAAalqB,EAAO3S,EAAOy8B,EAC7C,GACOI,CACT,CE/CWF,CAAUF,EAAQ,SAAUjgC,EAA6BmW,EAAOtZ,IACrE,EAAK2qB,MAAQrR,EAAO+pB,EAAKrjC,MACvBmD,EAAOnD,IAAG,EAAK+jC,MAASzqB,KAAK,EAAKyqB,MAASV,EAAKrjC,IAASo/B,EAAQ9lB,EAAO+pB,EAAKrjC,IAAQsZ,EAEzF,EACF,CACO8lB,CAAQgE,EAAQC,EACzB,CDMwBF,CAAWzhC,EAAKknB,GAChCA,EAASlnB,EACTwhC,EAAQr8B,EAAE,oBAAoBqQ,IAAQkoB,EAAO,EAEjD,CACF,CAEAiF,GACArB,GAEA1sB,KAAKguB,EAAkBlM,GACrBz5B,MAAKqkC,EAAUh7B,IAAIs8B,GACnB3lC,MAAK4lC,EAAsB,IAAIzgC,IAAoBwgC,GACnD3lC,MAAK0lC,EAAUjM,EACf,MAAM94B,EAAaX,KAAKokC,QAAQ5B,qBAAqBmD,GACrD,OAAkB,MAAdhlC,GACFwtB,QAAQrO,MAAM,kCAEhB9f,MAAKskC,EAAgBj7B,IAAI1I,GAClBX,IACT,CAEAskC,GAEA,UAAIpgB,GACF,MAAM2hB,EAAO7lC,KAAKqD,IAAIib,GAAG,aAAc,CAAEqnB,SAAU3lC,MAAKqkC,IACxD,GAAoB,MAAhBrkC,MAAK8lC,EACP,OAAOD,EAAKzsB,QAAQpZ,MAAK8lC,EAAS,UAEpC,MAAMC,EAAM/lC,MAAKgmC,IACjB,OAAAhmC,MAAK8lC,EAAUC,EACRF,EAAKzsB,QAAQpZ,MAAK8lC,EAAS,YACpC,CACAA,GAEAE,KAkBE,SAjBYtqB,OAAY,GAAG1b,MAAKqkC,IAAYxY,UAAU,EAAG,SAAU,KACjE,MAAMlkB,EAAI3H,KAAKqD,IAAIib,GAAG,UAGhBmb,EAASz5B,MAAK0lC,IACdO,EAAUjmC,MAAKskC,IAErB,GAAe,MAAX2B,EACF,OAAOt+B,EAAEsY,EAAE,GAAI,sBAEjB,MAAMtf,EAAaslC,IACnB,OAAKtlC,GAAgD,GAAlCJ,OAAOkF,KAAK9E,GAAYqJ,OAG5ByvB,EAAOjsB,cAAc7M,GAF3BgH,EAAEsY,EAAE,GAAI,sBAE6B,EAIlD,CAGAla,IAAI+uB,GACF,MAAMntB,EAAI3H,KAAKqD,IAAIib,GAAG,MAAO,CAAEwW,UACzBiR,EAAM/lC,MAAKkmC,EAAwBpR,GACzC,OAAOntB,EAAEyR,QAAQ2sB,EACnB,CAEAH,GAEAM,GAAwBnlC,GAGtB,MAAM4G,EAAI3H,KAAKqD,IAAIib,GAAG,0BAA2B,CAAEvd,cAC7CglC,EAAM/lC,MAAK4lC,EAAoBO,oBAAoBplC,EAAW,KAElE,MAAMklC,EAAUjmC,MAAKskC,IACrB,GAAe,MAAX2B,EACF,OAAO,KAET,MAAMtlC,EAAaslC,IACnB,IAAKtlC,GAAgD,GAAlCJ,OAAOkF,KAAK9E,GAAYqJ,OACzC,OAAO,KAET,MAAMsrB,EAAY30B,EAAWI,GACvBmjB,EAASoR,GAAWyK,OAC1B,OAAc,MAAV7b,GAAmC,GAAjBA,EAAOla,OACpB,KAEKhK,MAAK0lC,IAAUU,aAAa9Q,EAAS,GAGrD,OAAO3tB,EAAEyR,QAAQ2sB,EAAIx+B,OAAQ,UAAUw+B,EAAIM,QAC7C,iDArGWlC,GAAmBz/B,MAAAC,KAAA,sCAAnBw/B,EAAmBljC,QAAnBkjC,EAAmBjjC,WAAA,SAAnBijC,CAAmB,KEOhC,MAAMrhC,GAAW,CACfwjC,0BAA0B,EAC1BC,iBAAiB,EAEjB/zB,KAAM,GACNg0B,kBAAkB,GAab,IAAMC,GAAqB,MAA5B,MAAOA,EAKXC,GACAxF,GACAyF,GACAC,GACAC,GAGAC,GAEAC,GAEAlnC,cAdAG,KAAAqD,OAAMtD,MAAS,CAAC0mC,yBAAwB3jC,IAGxC9C,MAAA0mC,KAAepqB,OAAO0qB,KACtBhnC,MAAAkhC,KAAc5kB,OAAOC,KACrBvc,MAAA2mC,KAAkBrqB,OAAO2qB,KACzBjnC,MAAA4mC,KAAWtqB,OAAOslB,KAClB5hC,MAAA6mC,KAAcr/B,KAAUC,KAGxBzH,MAAA8mC,KAAet/B,KAAUy5B,IAEzBjhC,MAAA+mC,EAAc,IAAIrD,GA+BX1jC,KAAAknC,YAAW1rB,OAAsC,WAAY,IACpExb,MAAAmnC,KAAa5/B,QAAO,GAIpBvH,MAAAonC,KAAgB5rB,OAAU,eAAgB,GAG1Cxb,MAAAqnC,KAAY7rB,OAAU,YAAY,GAIlCxb,MAAA0lC,EAAU1lC,MAAK0mC,EAAaY,gBAAgBtnC,MAAKkhC,EAAY37B,OAAON,QACpEjF,MAAAunC,KAAe7rB,OAAY,cAAe,KAExC,MAAM+d,EAASz5B,MAAK0lC,IAGd8B,EAAUxnC,MAAK6mC,EAAYlsB,MAAM,QACvC,OAAK6sB,EAIc,IAAIj6B,KADL,CAAEJ,QAASq6B,EAASp6B,QAASqsB,EAAOrsB,UAF7CqsB,CAGoC,GAO/Cz5B,MAAA+4B,KAAQxxB,OAAgB,MAExBvH,MAAAqzB,KAAe3e,OAAS,IAAQ1U,MAAK+4B,IAAkB/4B,MAAK2mC,EAAgBx4B,qBAAqBnO,MAAK+4B,KAAtD,MAGzC/4B,KAAAqiC,uBAAsB3tB,OAAS,IAAO1U,MAAK+4B,IAE9C0O,KAA2Bt4B,mBAAmBnP,MAAKunC,IAAgBvnC,MAAKqzB,IAAgBrzB,MAAK+4B,IAAQnwB,QADrG,MAOJ5I,MAAA0nC,KAAelgC,KAAU28B,IA2GzBnkC,MAAA2nC,EAAmB,IAAIxiC,IAAwC,eACxDnF,KAAAiyB,WAAajyB,MAAK2nC,EAAiBC,WAAWzd,GAAK,IAAMnqB,KAAKknC,WAAW/c,IAEhFnqB,MAAA6nC,EAAqB,IAAI1iC,IAA2C,UAM7DnF,KAAAmd,SAAWnd,MAAK6nC,EAAmBD,WAAWzd,GAAK,IAAMnqB,KAAKknC,WAAW/c,GAAGhN,UAOnFnd,KAAAqyB,iBAAmBltB,IAAoB2iC,MAAgC,eAAgB3d,GAAK,IAAMnqB,KAAKknC,WAAW/c,GAAGkI,kBAhMnH,MAAM0V,KAAiBrsB,OAA+C,iBAAkB,IAAM1b,MAAKmnC,KAAgBnnC,MAAKgoC,MAGxHnkB,SAAO,KACL,MAAMhE,EAASkoB,IACVloB,GACL7f,KAAKknC,SAAS79B,IAAIwW,EAAM,GAI1B7f,MAAK+mC,EAAYxD,UAAUwE,EAC7B,CAIAE,oBACEjoC,KAAKqD,IAAIib,GAAG,WACZte,MAAKqnC,EAAUh+B,KAAI,EACrB,CASA89B,GACAa,GAGAZ,GAGAC,GAEAa,GAEAxC,GACA6B,GAiBAxO,GAEA1F,GAWAqU,GAGA/vB,KAAKjX,GAEH,MAAMR,EAAOF,MAAK4mC,EAAS7gC,IAAIrF,GAC/BV,MAAK+4B,EAAM1vB,IAAInJ,GACfF,MAAKkoC,EAAqB,IAAIpF,GAAwBpiC,GAGtD,MAAMuhC,EAAKjiC,MAAKqzB,IACV8U,EAAcnoC,KAAKqD,IAAIugB,MAAMpR,KAC7BsvB,EAA6B,OAAhBqG,EAAuB,KAAOlG,EAAGn3B,KAAOq9B,EACxC,OAAfrG,IACF9hC,KAAKqD,IAAI6E,EAAE,+BAA+B+5B,EAAGn3B,UAAUg3B,qBAA8BqG,KACrFnoC,KAAKqD,IAAI2+B,YAAYF,IAGvB,MAAM9C,EAAch/B,MAAK4mC,EAAS5H,YAAYt+B,GAC9CV,MAAK0nC,EAAa/vB,KAAKjX,EAAYV,MAAK0lC,GACxC1lC,MAAK8mC,EAAanvB,KAAK3X,KAAMU,EAAYR,EAAMF,MAAKqzB,EAAcrzB,MAAK0lC,EAAS1lC,MAAKunC,EAAcvnC,MAAK0nC,EAAc5F,GAItH,MAAMsG,EAAa,CACjBC,MAAO,eAAe3nC,qBAA8BuhC,EAAGn3B,MACvDumB,MAAO,EACPiX,SAAU,KACVnb,SAAUntB,MAAKqnC,EACfrI,cACAuJ,cAAc,EACdC,aAAcxoC,MAAKonC,EACnBqB,gBAAclhC,OAAO,GACrBmhC,eAAgB,GAChBC,YAAY,GAIdC,YAAY,KAENR,EAAK/W,MAxIU,IAyIjBwX,WAAW,KACT7oC,KAAKqD,IAAI6E,EAAE,8BAA8BkgC,EAAK/W,UAAU+W,EAAKC,SACtDD,EAAKK,aAAa5oB,OAAOmgB,GAAKA,EAAI,IA5ItB,KA+IvBoI,EAAK/W,MAAQ,GAhJC,KAoJhBrxB,MAAKgoC,KAAYtsB,OAAY,gBAAiB,IAAM1b,MAAK8oC,EAAiBV,IAGtEpoC,KAAKqD,IAAIugB,MAAM4iB,mBACjB4B,EAAKE,SAAW,IAAI7zB,GAAiBzU,MAAKgoC,IAE5ChoC,MAAKmnC,EAAW99B,KAAI,EACtB,CAEAy/B,GAAiBV,GACXA,EAAKE,UACPna,QAAQ9qB,IAAI,WAAY,CAAE4uB,WAAYjyB,KAAKknC,UAAYkB,EAAKE,SAAStzB,mBAAkB,IAEzF,MAAMrN,EAAI3H,KAAKqD,IAAIC,KAAK,kBAAmB,CAAE+tB,MAAO+W,EAAK/W,MAAO/R,MAAOtf,KAAKknC,UAAYkB,EAAKC,OAIvFrJ,EAAcoJ,EAAKpJ,cAEzB,IADkBh/B,MAAKqnC,KAAgBrI,GAAeA,GAAeoJ,EAAKG,eACzDH,EAAKO,WACpB,OAAOhhC,EAAEsY,EAAEmoB,EAAKM,eAAgB,2BAUlC,GAREN,EAAKO,YAAa,EAClBP,EAAKG,aAAevJ,EAItBh/B,MAAKonC,IAGDgB,EAAK/W,QAhLY,GAgLgB,CACnC,MAAMuC,EAAM,wDAA+BwU,EAAK/W,UAAU+W,EAAKC,SAC/Dla,eAAQC,KAAKwF,GACbwU,EAAKK,eACE9gC,EAAEsY,EAAEmoB,EAAKM,eAAgB9U,EAClC,CAEA,MAAMmV,EAAmB/oC,MAAKkoC,EAAmBlF,aAC7ChjC,MAAKkoC,EAAmB9E,YAAYgF,EAAKM,gBACzCN,EAAKM,eAIHppB,EAAQtf,MAAK8mC,EAAapQ,2BAA2BqS,GAC3DX,SAAKM,eAAiBppB,EAEf3X,EAAEyR,QAAQkG,EAAO,gBAQ1B,CAGAqoB,GAGAE,GAkBApT,kBAAkB1S,GAChB/hB,KAAKqD,IAAIib,GAAG,oBAAqB,CAAEyD,WACnC/hB,MAAKonC,EAAcvnB,OAAOmgB,GAAKA,EAAI,EACrC,CAQAiD,cAAuCliC,EAAmB8e,EAAoBkC,GAC5E/hB,MAAKkoC,EAAmBjF,cAAcliC,EAAW8e,EAAQkC,EAAQ/hB,KAAKknC,UAItE2B,WAAW,IAAM7oC,KAAKy0B,kBAAkB,iBAAkB,GAC5D,CAUA,cAAWhK,GAA2C,OAAOzqB,MAAK8mC,EAAarc,UAAY,iDAnPhFgc,EAAqB,sCAArBA,EAAqBxlC,QAArBwlC,EAAqBvlC,WAAA,SAArBulC,CAAqB,wCCnC5B,MAAOuC,GAIXnpC,YAAoBopC,GAAAjpC,KAAAipC,iBAFpBjpC,KAAAqD,OAAMtD,MAAS,CAACipC,yBAEwC,CAExD,KAAIE,GAA6B,OAAOlpC,MAAKmpC,IAAenpC,KAAKipC,iBAAiB9rB,QAAU,CAC5FgsB,GAEA,sBAAIC,GAAgC,OAAQppC,KAAKuyB,qBAAuBvyB,KAAK0/B,sBAAwB,CAErG,oCAAI2J,GAA8C,OAAQrpC,KAAKuyB,oBAAsBvyB,KAAKspC,6CAA+C,CAEzI,sBAAI/W,GAAgC,OAAOvyB,MAAKkpC,EAAU3W,kBAAoB,CAE9E,0BAAImN,GAAoC,OAAO1/B,MAAKkpC,EAAUxJ,sBAAwB,CAOtF4J,8CAGE,OAAItpC,KAAK0/B,yBACK5wB,IAAkBC,YAAYhJ,IAAI/F,KAAKipC,iBAAiBzW,UAAU5I,eAAerb,WACjFg7B,gBAChB,iBChBF,MAEMzmC,GAAW,CACfC,KAAK,EACLlD,aAAa,EACb8X,MAAM,EACN6xB,QAAQ,EACRC,MAAM,EACNC,SAAS,EACTC,eAAe,EACfC,4BAA4B,EAC5BC,6BAA6B,GAQxB,IAAMC,GAAsB,MAA7B,MAAOA,EAGXvH,GAEA1iC,YACU2D,EACAkD,EACAD,EACAI,EACAssB,EACAjsB,EACAH,GANA/G,KAAAwD,OACAxD,KAAA0G,cACA1G,KAAAyG,aACAzG,KAAA6G,qBACA7G,KAAAmzB,wBACAnzB,KAAAkH,WACAlH,KAAA+G,YAXV/G,KAAAqD,OAAMtD,MAAS,CAAC+pC,0BAAyBhnC,IAgBzC9C,KAAA2N,QAAU3N,KAAK0G,YAAYiH,QAHzB3N,KAAKqD,IAAIC,KAAK,cAChB,CAIAqU,KAAKjX,GACH,MAAMiH,EAAI3H,KAAKqD,IAAIC,KAAK,QACxBtD,MAAK0oB,EAAchoB,EACnB,MAAMR,EAAOF,KAAK0G,YAAYX,IAAIrF,GAClCV,MAAK+pC,EAAiBC,KAAWC,qBAAqB/pC,GACtDF,MAAKuiC,EAAkBviC,KAAK0G,YAAY87B,qBAAqB9hC,GAC7DiH,EAAE8R,IAAI,GAAI,CAAE/Y,aAAYwpC,cAAelqC,MAAK+pC,GAC9C,CAEArhB,GACAqhB,GAKAP,OAAOzoC,EAAmBopC,GAAgB,EAAOn6B,GAC/C,MAAMrI,EAAI3H,KAAKqD,IAAIC,KAAK,SAAU,CAAEvC,YAAWopC,gBAAen6B,oBAE9D,GAAIhQ,MAAKoqC,EAASrpC,GAAWwxB,mBAC3B,OAAO5qB,EAAE0iC,MAAM,2CAEjB,MAAMnmC,EAAWlE,KAAKyG,WAAWvC,WACjC8L,EAAkBhQ,KAAK2N,QAAQsC,6BAA6BjQ,MAAK0oB,EAAa3nB,EAAWmD,EAASiJ,QAASg9B,EAAen6B,GAE1H,MAAMkU,EAASlkB,MAAKuiC,IAAkBxhC,GAChCupC,EAAsF,MAArD,IAAI/6B,IAAY2U,EAAQhgB,GAAUqmC,gBAEnEC,EADyB,IAAIj7B,IAAY2U,EAAQumB,KAAaC,YAAYxmC,IACpCiJ,QAC5C,OAAKm9B,EAGI3iC,EAAE0iC,QAFF1iC,EAAEsY,EAAEjgB,MAAK2qC,EAA6B5pC,EAAWypC,EAAa5nC,MAAOsB,EAASiJ,SAAS,GAGlG,CAEAs8B,KAAK1oC,EAAmBopC,GAAgB,EAAOn6B,GAC7C,MAAMrI,EAAI3H,KAAKqD,IAAIC,KAAK,OAAQ,CAAEvC,YAAWopC,gBAAen6B,oBAC5D,GAAIhQ,MAAKoqC,EAASrpC,GAAWwxB,mBAC3B,OAAO5qB,EAAE0iC,MAAM,2CAEjB,MAAMnmC,EAAWlE,KAAKyG,WAAWvC,WACjC8L,OAAkBhQ,KAAK2N,QAAQsC,6BAA6BjQ,MAAK0oB,EAAa3nB,EAAWmD,EAASiJ,QAASg9B,EAAen6B,EAE5H,CAGA46B,kBAAkBC,GAChB,MAAMC,EAAe9qC,KAAK+qC,yBAC1B,GAA4B,IAAxBD,EAAa9gC,OACf,OAAOhK,KAAKgrC,iCAAgC,GAE9C,IAAIh7B,EACJ,UAAWjP,KAAa+pC,EAAc,CAEpC,MAAMX,EAAgBppC,IAAc+pC,EAAaA,EAAa9gC,OAAS,GACvEgG,EAAkB66B,EACd7qC,KAAKwpC,OAAOzoC,EAAWopC,EAAen6B,GACtChQ,KAAKypC,KAAK1oC,EAAWopC,EAAen6B,EAC1C,CACF,CAIAg7B,gCAAgCC,GAC9B,MAAMrX,EAAM5zB,KAAK+G,UAAUyJ,QAAQ,yCAAyCoD,QAAQ,OAAQq3B,EAAmB,OAAS,KACxHjrC,KAAKkH,SAASuJ,KAAKmjB,EAAK,KAAM,CAAEljB,SAAU,KAC5C,CAMAi5B,cAAcuB,EAAsBC,EAA2BC,GAAkB,EAAOC,GAA6B,GACzGrrC,KAAKqD,IAAIC,KAAK,gBAAiB,CAAE4nC,aAAYI,yBAA0BH,EAAmBC,SAAQC,sBAA5G,MAEME,EAAavrC,KAAKyG,WAAW0W,SAAS4iB,OAAOyL,MAAgBC,iBAC/DF,EAAWG,QACbC,MAlHwB,0GAoH1B,MAAMznC,EAAWlE,KAAKyG,WAAWvC,WAC3BvD,EAAaX,MAAKuiC,IAIlBqJ,GADNV,EAAaA,EAAWzoC,OAAO0nB,IAAMnqB,MAAKoqC,EAASjgB,GAAGoI,qBACf9xB,IAAI0pB,GAAK,IAAI5a,IAAY5O,EAAWwpB,GAAIghB,GAAmBZ,gBAAgB3nC,OAE7GyoC,GACHH,EAAW/4B,QAAQ,CAAC2iB,EAAOnsB,MACzB,MAAMkjC,GAAcD,EAAoBjjC,IAClCmjC,GAAkD9rC,MAAKoqC,EAAStV,GAAOwU,+CAC1D,MAAfuC,IAAuC,KAAhBA,IAAsBC,KAC/C9rC,KAAKwpC,OAAO1U,EAAK,GAQvB90B,KAAKwD,KAAKC,KAAK,gEAAgE8nC,EAAWQ,SALlE,CACtBC,EAAGJ,EACHxgB,OAAQlnB,EAASiJ,QACjB4U,OAAQopB,IAGP7iC,UAAW2jC,IACV,MAAMC,GAAyBhB,EAAWzqC,IAAI0pB,IAAiE,MAA5D,IAAI5a,IAAY5O,EAAWwpB,IAAIjmB,GAAUqmC,iBAC5F0B,EAAS/gC,KAAKihC,aAAah6B,QAAQ,CAACi6B,GAAkBzjC,MACpD,MAAM0jC,GAAOh5B,SAASC,cAAc,YACpC+4B,GAAKC,UAAYF,GAAYG,eAC7B,MAAMC,GAA4BN,GAAuBvjC,KACpDyiC,GAAUoB,GACbxsC,KAAK2N,QAAQ8+B,yBAAyBzsC,MAAK0oB,EAAawiB,EAAWviC,IAAI0jC,GAAK1xB,MAAOzW,GAAU,GACnFsoC,IACVxsC,MAAK2qC,EAA6BO,EAAWviC,IAAI0jC,GAAK1xB,MAAOzW,EAASiJ,SAAS,EAAK,EAEvF,EAEP,CAEAu/B,SAAS3rC,EAAmB4rC,GAC1B,GAAI3sC,MAAKoqC,EAASrpC,GAAWwxB,mBAAoB,OAGjD,MAAMrO,EADalkB,MAAKuiC,IACExhC,GACpBmD,EAAWlE,KAAKyG,WAAWvC,WAC3Bi8B,EAAc,IAAI5wB,IAAY2U,EAAQhgB,GACtC0oC,EAAmBzM,EAAY0M,WAAWpC,KAAaqC,YAAY5oC,EAAUyoC,IAC/EC,EACyB1oB,GACvBic,EAAY4M,uCAKd/sC,KAAK2N,QAAQ8+B,yBACXzsC,MAAK0oB,EAAa3nB,EAAW6rC,EAAiBhqC,MAAOsB,GAAU,GAIjElE,MAAK2qC,EAA6B5pC,EAAW6rC,EAAiBhqC,MAAOsB,EAASiJ,SAAS,GAEzFnN,KAAKqD,IAAI6E,EAAE,GAAGhE,EAASiJ,iCAAiCw/B,uCAC5D,CAEAK,aAAajsC,EAAmBksC,GAC9BjtC,KAAKktC,iBAAiBnsC,EAAWksC,GAAqB,EACxD,CAEAE,cAAcpsC,EAAmBksC,GAC/B,OAAOjtC,KAAKktC,iBAAiBnsC,EAAWksC,GAAqB,EAC/D,CAEQC,iBAAiBnsC,EAAmBksC,EAA6B5lB,GACvE,GAAIrnB,MAAKoqC,EAASrpC,GAAWwxB,mBAAoB,OAEjD,MAAMruB,EAAWlE,KAAKyG,WAAWvC,WAC3B8L,EAAkBhQ,KAAK2N,QAAQsC,6BAA6BjQ,MAAK0oB,EAAa3nB,EAAWmD,EAASiJ,SAAS,GACjHnN,KAAK2N,QAAQy/B,0BACXptC,MAAK0oB,EAAa3nB,EAAWmD,EAASiJ,QAAS8/B,EAAqB/oC,EAASkJ,QAASia,EAAYrX,EAEtG,CAMAq9B,kBAAkBlC,GAChB,MAAMxqC,EAAaX,MAAKuiC,IAElB+K,EAAyB,GAEzBC,EAAkCvtC,KAAKwtC,iEAEfxtC,KAAK4pC,6BAA6BnnC,OAAOgrC,IAAMF,EAAsBrgC,SAASugC,IAEtFt7B,QAAQpR,IAC5B,MAAM4Z,EAAQ,IAAIpL,IAAY5O,EAAWI,GAAYoqC,GAAmBZ,iBAAiB3nC,MAC3E,KAAV+X,GAAyB,MAATA,QAA2B5K,IAAV4K,GACnC2yB,EAAa5gC,KAAK3L,EAAS,GAM/Bf,KAAK2pC,cAAc2D,EAAcnC,GAAmB,GAAM,GAG1DoC,EAAsBp7B,QAAQpR,IAC5Bf,KAAKwpC,OAAOzoC,GAAW,OAHrBiP,EAG2C,EAEjD,CAKA+6B,yBACE,MAAMpqC,EAAaX,MAAKuiC,IACxB,OAAOhiC,OAAOkF,KAAK9E,GAAY8B,OAAO1B,IAAcf,MAAKoqC,EAASrpC,GAAWwxB,mBAC/E,CAKAqX,6BACE,MAAMjpC,EAAaX,MAAKuiC,IAClB/9B,EAASjE,OAAOkF,KAAK9E,GAAY8B,OAAO1B,GAAaf,MAAKoqC,EAASrpC,GAAWqoC,oBACpF,OAAAppC,KAAKqD,IAAIC,KAAK,6BAA8B,CAAE3C,aAAY6D,WACnDA,CACT,CAEA4lC,GAASrpC,GACP,MAAM2sC,EAAK,IAAI1E,GAAqB,IAAMhpC,KAAKmzB,sBAAsBlB,WAAWlxB,MAChF,OAAAf,KAAKqD,IAAIC,KAAK,UAAW,CAAEvC,YAAW2sC,OAC/BA,CACT,CAKAF,iEACE,MAAM7sC,EAAaX,MAAKuiC,IACxB,OAAOhiC,OAAOkF,KAAK9E,GAAY8B,OAAO1B,GAAaf,MAAKoqC,EAASrpC,GAAWsoC,iCAC9E,CAEAsB,GAA6B5pC,EAAmB4Z,EAAYgzB,EAAyBtmB,GACnF,MAAM1f,EAAI3H,KAAKqD,IAAIC,KAAK,8BAA+B,CAAEvC,YAAW4Z,QAAOgzB,kBAAiBtmB,eACtFjZ,EAAcpO,KAAK6G,mBAAmB+mC,aAAa5tC,MAAK+pC,EAAgBhpC,GACxEyD,EAASxE,KAAK2N,QAAQuC,sBAC1BlQ,MAAK0oB,EAAa3nB,EAAW4Z,EAAOgzB,EAAiBtmB,EAAYjZ,EAAYI,MAE/E,OAAO7G,EAAEsY,EAAEzb,EACb,iDArPWslC,GAAsBplC,MAAAC,OAAAD,MAAAiM,KAAAjM,MAAAkM,KAAAlM,MAAAmM,KAAAnM,MAAAoM,IAAApM,MAAAqM,MAAArM,MAAAsM,MAAA,sCAAtB84B,EAAsB7oC,QAAtB6oC,EAAsB5oC,WAAA,SAAtB4oC,CAAsB,wKCnCjCplC,MAAA,gBAAyFA,MAAA,aAAOA,8BAA/CA,MAAA,YAAAA,MAAA,EAAAmpC,GAAAC,EAAAC,mBCY5C,IAAMC,GAA8B,MAArC,MAAOA,UAAsCC,6EAAtCD,KAA6BE,GAA7BF,EAA6B,wCAA7BA,EAA6BG,UAAA,iCAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,2DAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDb1C9pC,MAAA,EAAAgqC,GAAA,uBAAAhqC,MAAA+pC,EAAAE,OAAA,qBCSQC,MAAajqC,MACbkqC,MAAcC,cAAA,YAGTd,CAA8B,4BCPrCtpC,MAAA,uBACEA,MAAA,wBACFA,eADEA,cAAA,IAAAA,MAAA,6EAIFA,MAAA,uBACEA,MAAA,wBACFA,eADEA,cAAA,IAAAA,MAAA,4DCGD,IAAMqqC,GAAkC,MAAzC,MAAOA,EACXlvC,YACUmvC,EACwBC,GADxBjvC,KAAAgvC,SACwBhvC,KAAAivC,YAC9B,CAEJC,WAAmB,CAEnBC,cACEnvC,KAAKgvC,OAAOxoB,OACd,iDAVWuoB,GAAkCrqC,MAAAC,OAAAD,MAGnC0qC,OAAe,oCAHdL,EAAkCZ,UAAA,iDAAAC,MAAA,GAAAC,KAAA,EAAAC,OAAA,+DAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDb3C9pC,MAFJ,aAEIA,CAFM,oBAENA,CADe,oBAEbA,MAAA,wBACFA,QAMAA,MALA,EAAA2qC,GAAA,wBAKA3qC,CALqC,EAAA4qC,GAAA,yBAUvC5qC,QAEEA,MADF,uBACEA,CAD4B,cACMA,MAAA,0BAAS+pC,EAAAU,aAAa,GAAEzqC,MAAA,yBAE9DA,mBAhBMA,MAAA,GAAAA,MAAA,IAAAA,MAAA,8CAEFA,MAAA,GAAAA,MAAA+pC,EAAAQ,WAAAM,mBAAA,MAKA7qC,cAAA+pC,EAAAQ,WAAAM,oBAAA,KAO0D7qC,MAAA,GAAAA,YAAA,wCCPtD8qC,MAAa7+B,8BACb8+B,MAAe7+B,MACf8+B,IAAe7+B,MAAAi+B,cAAA,YAGVC,CAAkC,2ECZU,IAEnDY,GAAU,MAAhB,MAAMA,EAEF,YAAIC,GACA,OAAO5vC,KAAK6vC,SAChB,CACA,YAAID,CAASj1B,GACT3a,KAAK6vC,aAAYC,OAAsBn1B,EAC3C,CACAk1B,WAAY,EAEZ,SAAIE,GACA,OAAO/vC,KAAKgwC,MAChB,CACA,SAAID,CAAMp1B,GACN3a,KAAKgwC,UAASF,OAAsBn1B,EACxC,CACAq1B,QAAS,EACTC,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFyB,EAAU,EAC7GM,iBADyFvrC,MAAE,CAAA8N,KACJm9B,EAAUxB,UAAA,kBAAA+B,UAAA,QAA+H,YAAW,iBAAAC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,IADlJ9pC,MAAE,mBAAA+pC,EAAAmB,SACO,WAAa,cADtBlrC,MAAE,uBAAA+pC,EAAAmB,SAAFlrC,CACQ,0BAAA+pC,EAAAmB,SADRlrC,CACQ,oBAAA+pC,EAAAsB,OAAA,EAAAM,OAAA,CAAAT,SAAA,WAAAG,MAAA,SAAA3B,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAA6B,OAAA,0eAAAxB,cAAA,EAAAyB,gBAAA,IACpG,OAnBKZ,CAAU,KAoCVa,GAAgB,MAAtB,MAAMA,EACFP,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFsC,EAAgB,EACnHP,iBArByFvrC,KAAE,CAAA8N,KAqBSg+B,IACpGP,iBAtByFvrC,MAAE,CAAA+rC,QAAA,CAsBqCC,MAAiBA,SACpJ,OAJKF,CAAgB,qDCzBtB,MAAA3C,GAAA,MAAA8C,GAAA,6kjBAAAC,GAAA,oBAAAC,GAAA,SAAAC,GAAA,qKAAAC,GAAA,yHAMMC,GAAc,IAAIC,MAAe,cAEvC,IAMMC,GAAgB,MAAtB,MAAMA,EACFC,eAAc70B,OAAO80B,OACrBvxC,cAAgB,CAChBowC,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFgD,EAAgB,EACnHjB,iBADyFvrC,MAAE,CAAA8N,KACJ0+B,EAAgB/C,UAAA,6BAAA+B,UAAA,8DAC1G,OALKgB,CAAgB,KAmBhBG,GAAe,MAArB,MAAMA,EACFF,eAAc70B,OAAO80B,OACrBvxC,cAAgB,CAChBowC,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFmD,EAAe,EAClHpB,iBApByFvrC,MAAE,CAAA8N,KAoBJ6+B,EAAelD,UAAA,4BAAA+B,UAAA,+DACzG,OALKmB,CAAe,KAmBfC,GAAe,MAArB,MAAMA,EACFrB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFoD,EAAe,EAClHrB,iBArCyFvrC,MAAE,CAAA8N,KAqCJ8+B,EAAenD,UAAA,4BAAA+B,UAAA,oDACzG,OAHKoB,CAAe,KAmBfC,GAAuB,MAA7B,MAAMA,EACFC,eAAcl1B,OAAO00B,GAAa,CAAES,UAAU,IAC9C5xC,cAAgB,CAChB6xC,oBAGI,OAAQ1xC,KAAKwxC,aAA0D,UAA3CxxC,KAAKwxC,aAAaG,oBAClD,CACA1B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFqD,EAAuB,EAC1HtB,iBA/DyFvrC,MAAE,CAAA8N,KA+DJ++B,EAAuBpB,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GA/DrB9pC,MAAE,uBA+DJ+pC,EAAAiD,oBA/DEhtC,CA+DqB,sBAAtB+pC,EAAAiD,oBAAsB,IACjH,OAVKH,CAAuB,KA6BvBK,GAAiB,MAAvB,MAAMA,UAA0BL,GAC5BtB,iBAAW,UAAA4B,EAAA,gBAAA3D,GAAA,OAAA2D,MApF8EntC,MAoFUktC,KAAiB1D,GAAjB0D,EAAiB,GAAzG,GACX3B,iBArFyFvrC,MAAE,CAAA8N,KAqFJo/B,EAAiBzD,UAAA,8BAAA+B,UAAA,+BAAA1uB,SAAA,CArFf9c,SAsF5F,OAHKktC,CAAiB,KAgBjBE,GAAe,MAArB,MAAMA,UAAwBP,GAC1BtB,iBAAW,UAAA8B,EAAA,gBAAA7D,GAAA,OAAA6D,MApG8ErtC,MAoGUotC,KAAe5D,GAAf4D,EAAe,GAAvG,GACX7B,iBArGyFvrC,MAAE,CAAA8N,KAqGJs/B,EAAe3D,UAAA,4BAAA+B,UAAA,6BAAA1uB,SAAA,CArGb9c,SAsG5F,OAHKotC,CAAe,KAarB,MAAME,GAAkB,IAAIf,MAAe,mBAE3C,IACMgB,GAAW,MAAjB,MAAMA,EACFC,mBAAoB,EAEpB,iBAAIC,GACA,OAAOnyC,KAAKoyC,cAChB,CACA,iBAAID,CAAcx3B,GACd3a,KAAKoyC,kBAAiBtC,OAAsBn1B,EAChD,CACAy3B,gBAAiB,EAKjB,YAAIjlB,GACA,OAAOntB,KAAKqyC,SAChB,CACA,YAAIllB,CAASxS,GACT3a,KAAKqyC,aAAYvC,OAAsBn1B,EAC3C,CACA03B,WAAY,EACZC,mBAAkBh2B,OAAO01B,GAAiB,CAAEP,UAAU,IACtDxB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF+D,EAAW,EAC9GhC,iBA1IyFvrC,MAAE,CAAA8N,KA0IJy/B,EAAW9B,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GA1IT9pC,MAAE,gBAAA+pC,EAAAthB,SAAA,EAAAkjB,OAAA,CAAA8B,cAAA,gBAAAhlB,SAAA,cA2I9F,OAxBK8kB,CAAW,KAsCXM,GAAe,MAArB,MAAMA,EACFpB,eAAc70B,OAAO80B,OACrBoB,WAAUl2B,OAAOm2B,OACjBC,aAAYp2B,OAAO21B,GAAa,CAAER,UAAU,IAC5CkB,aAAYr2B,OAAOs2B,OAEnBC,aAEAC,iBAEAC,gBACAC,SACAC,OAWA,SAAIC,CAAMA,GACNlzC,KAAKmzC,kBAAiBC,OAAqBF,EAAO,MAClDlzC,KAAKqzC,kBAAiB,EAC1B,CACAF,eAAiB,KAEjB,iBAAIhB,GACA,OAAQnyC,KAAKmtB,UACTntB,KAAKoyC,gBACLpyC,KAAK+yC,mBACH/yC,KAAK0yC,WAAWP,aAC1B,CACA,iBAAIA,CAAcx3B,GACd3a,KAAKoyC,kBAAiBtC,OAAsBn1B,EAChD,CACAy3B,gBAAiB,EAEjB,YAAIjlB,GACA,OAAOntB,KAAKqyC,aAAeryC,KAAK0yC,WAAWvlB,QAC/C,CACA,YAAIA,CAASxS,GACT3a,KAAKqyC,aAAYvC,OAAsBn1B,EAC3C,CACA03B,WAAY,EACZiB,eAAiB,IAAIC,MACrBC,gBAAkB,KAElBC,yBAA0B,EAK1BC,aAKA,kBAAIC,GACA,OAAO3zC,KAAKmyC,iBAAmBnyC,KAAK0zC,aAAavmB,QACrD,CACAttB,eACIyc,SAAOs3B,MAAwB7qC,KAAK8qC,OACpC,MAAMC,KAAsBx3B,OAAOy3B,MAA2B,CAC1DtC,UAAU,IAERuC,KAAgB13B,OAAO23B,MAAuB,CAAExC,UAAU,IAChEzxC,KAAK0zC,aAAeI,GAAuB,CAAC,EAC5C9zC,KAAK6yC,aAAe7yC,KAAKmxC,YAAY+C,cACrCl0C,KAAK8yC,iBAAgE,WAA7C9yC,KAAK6yC,aAAasB,SAAS1c,cACnDz3B,KAAK+yC,gBAAoC,mBAAlBiB,EACnBh0C,KAAK0yC,YAAc1yC,KAAK0yC,UAAUR,mBAClClyC,KAAKo0C,2BAKLp0C,KAAK8yC,mBAAqB9yC,KAAK6yC,aAAawB,aAAa,SACzDr0C,KAAK6yC,aAAayB,aAAa,OAAQ,SAE/C,CACAC,kBACIv0C,KAAKw0C,iCACLx0C,KAAKqzC,kBAAiB,EAC1B,CACA57B,cACIzX,KAAKszC,eAAemB,cACS,OAAzBz0C,KAAKwzC,iBACLxzC,KAAKwzC,gBAAgBkB,sBAE7B,CAEAC,mBACI,SAAU30C,KAAKgzC,SAAShpC,SAAUhK,KAAKizC,OAAOjpC,OAClD,CACAoqC,2BACIp0C,KAAK6yC,aAAa+B,UAAUpyC,IAAI,iCAChCxC,KAAKwzC,gBAAkB,IAAIqB,MAAe70C,KAAMA,KAAKwyC,QAASxyC,KAAK6yC,aAAc7yC,KAAK2yC,aAAWr2B,OAAOw4B,QACxG90C,KAAKwzC,gBAAgBuB,mBAAmB/0C,KAAK6yC,aACjD,CAKA2B,iCACIx0C,KAAKwyC,QAAQwC,kBAAkB,KAC3Bh1C,KAAKszC,eAAe9wC,OAAIyyC,MAAMj1C,KAAKk1C,OAAOzU,QAASzgC,KAAKm1C,QAAQ1U,SAASn4B,UAAU,IAAMtI,KAAKqzC,kBAAiB,IAAO,EAE9H,CAYAA,iBAAiB+B,GAGb,IAAKp1C,KAAKk1C,SAAWl1C,KAAKm1C,UAAYn1C,KAAKq1C,iBACvC,OAKAD,GACAp1C,KAAKs1C,kCAOT,MAAMC,EAAgBv1C,KAAKmzC,gBAAkBnzC,KAAKw1C,yBAC5CC,EAAoBz1C,KAAKq1C,iBAAiBnB,cAQhD,GANAl0C,KAAK6yC,aAAa+B,UAAUc,OAAO,gCAAiCH,GAAiB,GACrFv1C,KAAK6yC,aAAa+B,UAAUc,OAAO,+BAAgCH,GAAiB,GACpFv1C,KAAK6yC,aAAa+B,UAAUc,OAAO,gCAAmD,IAAlBH,GACpEv1C,KAAK6yC,aAAa+B,UAAUc,OAAO,kCAAqD,IAAlBH,GAGlEv1C,KAAKyzC,wBAAyB,CAC9B,MAAMkC,EAAuC,IAAxB31C,KAAKm1C,QAAQnrC,QAAkC,IAAlBurC,EAClDE,EAAkBb,UAAUc,OAAO,8BAA+BC,GAClEF,EAAkBb,UAAUc,OAAO,iCAAkCC,EACzE,MAEIF,EAAkBb,UAAUl0B,OAAO,+BACnC+0B,EAAkBb,UAAUl0B,OAAO,gCAE3C,CASA80B,yBACI,IAAII,EAAa51C,KAAKm1C,QAAQnrC,OAAShK,KAAKk1C,OAAOlrC,OACnD,OAAIhK,KAAKyzC,0BACLmC,GAAc,GAEXA,CACX,CAEAN,kCACIt1C,KAAKyzC,wBAA0BzyB,MAAM60B,KAAK71C,KAAKq1C,iBAAiBnB,cAAc4B,YACzErzC,OAAOszC,GAAQA,EAAKC,WAAaD,EAAKE,cACtC//B,KAAK6/B,MAAWA,EAAKG,cAAeH,EAAKG,YAAY50C,QAC9D,CACA2uC,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFqE,EAAe,EAClHtC,iBA7UyFvrC,MAAE,CAAA8N,KA6UJ+/B,EAAe4D,eAAA,SAAA3H,EAAAC,EAAA2H,GAAsY,GAAtY,EAAA5H,IA7Ub9pC,MAAE0xC,EA6UwUxE,GAAiB,GA7U3VltC,MAAE0xC,EA6UkYtE,GAAe,MAAAtD,EAAA,KAAA6H,EA7UnZ3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAuE,SAAAqD,GAAF3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAwE,OAAAoD,EAAA,GAAAlG,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,IAAF9pC,MAAE,gBAAA+pC,EAAAthB,SAAFzoB,CAAE,WAAA+pC,EAAAqE,kBAAArE,EAAAthB,UA6U8B,MA7UhCzoB,MAAE,0BAAA+pC,EAAAthB,UA6UW,EAAAkjB,OAAA,CAAA6C,MAAA,QAAAf,cAAA,gBAAAhlB,SAAA,cACzG,OArLKolB,CAAe,KAuOf+D,GAAa,MAAnB,MAAMA,UAAsBrE,GAMxBC,mBAAoB,EACpBjC,iBAAW,UAAAsG,EAAA,gBAAArI,GAAA,OAAAqI,MAvY8E7xC,MAuYU4xC,KAAapI,GAAboI,EAAa,GAArG,GACXrG,iBAxYyFvrC,MAAE,CAAA8N,KAwYJ8jC,EAAanI,UAAA,sBAAA+B,UAAA,QAAiF,QAAO,wDAAAsG,SAAA,kBAAAh1B,SAAA,CAxYnG9c,MAwYsL,CAAC,CAAE+xC,QAASxE,GAAayE,YAAaJ,KAxY5N5xC,OAAEiyC,mBAAA9I,GAAAO,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAAF9pC,cAAE,GAwYkV,EAAA4rC,OAAA,+kjBAAAxB,cAAA,EAAAyB,gBAAA,IAChb,OATK+F,CAAa,KAwBbM,GAAO,MAAb,MAAMA,UAAgB3E,GAClBhC,iBAAW,UAAA4G,EAAA,gBAAA3I,GAAA,OAAA2I,MAzZ8EnyC,MAyZUkyC,KAAO1I,GAAP0I,EAAO,GAA/F,GACX3G,iBA1ZyFvrC,MAAE,CAAA8N,KA0ZJokC,EAAOzI,UAAA,eAAA+B,UAAA,kDAAAsG,SAAA,YAAAh1B,SAAA,CA1ZL9c,MA0ZiI,CAAC,CAAE+xC,QAASxE,GAAayE,YAAaE,KA1ZvKlyC,OAAEiyC,mBAAA9I,GAAAO,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAAF9pC,cAAE,GA0ZiR,EAAA4rC,OAAA,CAAAK,IAAA7B,cAAA,EAAAyB,gBAAA,IAC/W,OAHKqG,CAAO,KAUPE,GAAW,MAAjB,MAAMA,UAAoBvE,GACtB2C,OACAC,QACA4B,MACA1B,iBACA2B,UAEA,aAAIC,GACA,OAAOj3C,KAAKk3C,UAChB,CACA,aAAID,CAAUA,GACVj3C,KAAKk3C,cAAapH,OAAsBmH,EAC5C,CACAC,YAAa,EAKbC,kBACI,MAAsC,MAA/Bn3C,KAAK6yC,aAAasB,UAAoBn0C,KAAKk3C,WAAa,OAAS,IAC5E,CACAE,6BACI,OAA6B,IAAtBp3C,KAAK+2C,MAAM/sC,SAA0C,IAAzBhK,KAAKgzC,SAAShpC,QAAuC,IAAvBhK,KAAKizC,OAAOjpC,OACjF,CACAimC,iBAAW,UAAAoH,EAAA,gBAAAnJ,GAAA,OAAAmJ,MA1b8E3yC,MA0bUoyC,KAAW5I,GAAX4I,EAAW,GAAnG,GACX7G,iBA3byFvrC,MAAE,CAAA8N,KA2bJskC,EAAW3I,UAAA,2EAAAgI,eAAA,SAAA3H,EAAAC,EAAA2H,GAAy0B,GAAz0B,EAAA5H,IA3bT9pC,MAAE0xC,EA2b0qB/E,GAAe,GA3b3rB3sC,MAAE0xC,EA2bsvBlF,GAAgB,GA3bxwBxsC,MAAE0xC,EA2bi0B9E,GAAe,MAAA9C,EAAA,KAAA6H,EA3bl1B3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAyG,OAAAmB,GAAF3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAA0G,QAAAkB,GAAF3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAsI,MAAAV,EAAA,GAAAiB,UAAA,SAAA9I,EAAAC,GAAA,KAAAD,IAAF9pC,MAAEksC,GAAA,GAAFlsC,MAAEmsC,GAAA,MAAArC,EAAA,KAAA6H,EAAF3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAA4G,iBAAAgB,EAAAz1B,OAAFlc,MAAE2xC,EAAF3xC,WAAE+pC,EAAAuI,UAAAX,EAAAz1B,MAAA,GAAAsvB,UAAA,wCAAAC,SAAA,GAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,IAAF9pC,MAAE,eA2bJ+pC,EAAA0I,mBA3bEzyC,MAAE,2BAAA+pC,EAAAwI,UAAFvyC,CA2bS,qCAAS,IAAT+pC,EAAAuE,SAAAhpC,OA3bTtF,CA2bS,mCAAO,IAAP+pC,EAAAwE,OAAAjpC,OA3bTtF,CA2bS,oCAAM,IAAN+pC,EAAAsI,MAAA/sC,OA3bTtF,CA2bS,8CAAX+pC,EAAA2I,6BA3bE1yC,CA2bS,0BAAA+pC,EAAAsE,iBAAA,EAAA1C,OAAA,CAAA4G,UAAA,aAAAT,SAAA,gBAAAh1B,SAAA,CA3bT9c,OAAEiyC,mBAAA5F,GAAA3C,MAAA,GAAAC,KAAA,EAAAC,OAAA,+IAAAC,SAAA,SAAAC,EAAAC,GAAA,KAAAD,EAAA,OAAA+I,EAAF7yC,cAAEosC,IAAFpsC,MAAE,GAAFA,MAAE,YAAFA,MAAE,KAAFA,MAAE,KAAFA,MAAE,cAAFA,MAAE,+BAAFA,aAAE6yC,GAAF7yC,MA2b+8C+pC,EAAA4E,kBAAiB,GAAK,GA3br+C3uC,MAAE,KAAFA,gBAAE,KAAFA,MAAE,KAAFA,MAAE,UA2bu1D,GAAA8yC,aAAA,CAA+CC,OAAiB3I,cAAA,EAAAyB,gBAAA,IACr/D,OA1BKuG,CAAW,KA8VXY,GAAU,MAAhB,MAAMA,UAAmBzF,GAMrBC,mBAAoB,EACpBjC,iBAAW,UAAA0H,EAAA,gBAAAzJ,GAAA,OAAAyJ,MAvwB8EjzC,MAuwBUgzC,KAAUxJ,GAAVwJ,EAAU,GAAlG,GACXzH,iBAxwByFvrC,MAAE,CAAA8N,KAwwBJklC,EAAUvJ,UAAA,mBAAA+B,UAAA,QAA8E,aAAY,qDAAAsG,SAAA,eAAAh1B,SAAA,CAxwBlG9c,MAwwBkL,CAAC,CAAE+xC,QAASxE,GAAayE,YAAagB,KAxwBxNhzC,OAAEiyC,mBAAA9I,GAAAO,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAAF9pC,cAAE,GAwwBwU,EAAA4rC,OAAA,CAAAK,IAAA7B,cAAA,EAAAyB,gBAAA,IACta,OATKmH,CAAU,KA8YVE,GAAa,MAAnB,MAAMA,EACF3H,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF0J,EAAa,EAChH3H,iBAhpCyFvrC,KAAE,CAAA8N,KAgpCSolC,IA4BpG3H,iBA5qCyFvrC,MAAE,CAAA+rC,QAAA,CA4qCkCoH,MACrHnH,MACAoH,MACAC,MAAyBvH,MACpC,OAlCKoH,CAAa,oBC/qCZ,MAAMI,GAAW,CACtBC,YAAa,cACbC,YAAa,cACbC,UAAW,YACXC,aAAc,eACdC,WAAY,6BCGR,SAAUC,GACd/yC,EACArB,EACAiI,EACAxL,EACA43C,GAcA,OAZ0BpsC,EACvB1J,OAAO+1C,GAAQA,EAAKjsC,SAAWrI,EAASiJ,SACxC1M,IAAI+3C,IACH,MACMrrB,EAAYorB,IAAaE,KAAiBC,gBAAkBF,EAAKpxB,YACjE,IAAI7X,IAFK5O,EAAW4E,EAAOxE,WAEH0pC,KAAaqC,YAAY5oC,EAAUs0C,EAAKjsC,SAAS6zB,kBAK/E,MAJ8D,CAC5D/+B,IAAKm3C,EAAKjsC,OACV4gB,aAKR,CAmCM,SAAUwrB,GAAYC,GAC1B,OAAQA,GACN,KAAKH,KAAiBI,UACpB,OAAOb,GAASE,YAClB,KAAKO,KAAiBK,cACpB,OAAOd,GAASC,YAClB,KAAKQ,KAAiBL,aACpB,OAAOJ,GAASI,aAClB,KAAKK,KAAiBC,cACpB,OAAOV,GAASK,WAClB,KAAKI,KAAiBM,aACpB,OAAOf,GAASG,UAEtB,CCrDO,IAAea,GAAwB,MAAxC,MAAgBA,EAEpBC,GACA3X,GAGAzhC,YAA4CovC,GAAAjvC,KAAAivC,aAJ5CjvC,MAAAi5C,KAAmB38B,OAAO48B,MAC1Bl5C,MAAAshC,KAAehlB,OAAOslB,KACf5hC,KAAAyG,cAAa6V,OAAOC,KAI3Bvc,KAAAy4C,iBAAmBA,KACnBz4C,KAAAg4C,SAAWA,GAIDh4C,KAAAkE,SAAWlE,KAAKyG,WAAWvC,SAC9BlE,KAAAm5C,0BAAyB5xC,OAA6BvH,KAAKivC,WAAW5c,kBAEnEryB,KAAAo5C,mBAAkB19B,OAA6B,kBAAmB,KAC1E,MAAM2W,EAAmBryB,KAAKm5C,yBAC9B,OAAAn5C,KAAKq5C,mBAAqB,CAACZ,KAAiBI,UAAWJ,KAAiBK,eACjE,CACLQ,uBAAwBt5C,KAAKq5C,mBAAmBnsC,SAASmlB,EAAiBkmB,UAC1EgB,SAAU,mBAAmBZ,GAAYtmB,EAAiBkmB,YAC1DiB,eAA8C,KAA9BnnB,EAAiBnuB,WAAoBlE,KAAKq5C,mBAAmBnsC,SAASmlB,EAAiBkmB,aAIjGv4C,KAAAmM,UAAYnM,MAAKi5C,EAAiBnyB,eAClC9mB,KAAAk1B,eAAiBl1B,MAAKshC,EAAakB,qBAAqBxiC,KAAKivC,WAAW1pC,OAAO7E,WArBP,iDAN9Ds4C,GAAwBt0C,MAMxB0qC,OAAe,oCANf4J,EAAwB7K,UAAA,0CAAAC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,YAAxBkK,CAAwB,oBCVvC,IAAMS,GAA4B,MAAnC,MAAOA,EACX55C,cAAgB,iDADL45C,EAA4B,oCAA5BA,EAA4BtL,UAAA,iCAAAC,MAAA,EAAAC,KAAA,GAAAC,OAAA,6EAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICbzC9pC,MAAA,mDACAA,MAAA,yDADIA,MAAA,YAAAA,MAAA,IAAAA,MAAA,gCAAAA,OACDA,MAAA,GAAAA,MAAA,YAAAA,MAAA,IAAAA,MAAA,+BAAAA,uBDQKgrC,IAAe/qC,KACf+0C,MAAYpJ,OAAA,8FAGPmJ,CAA4B,wIES7B/0C,MAAA,UAAMA,MAAA,wBAENA,eAFMA,cAAA,IAAAA,MAAA,gFASFA,MAAA,UAAMA,MAAA,wBAENA,eAFMA,cAAA,IAAAA,MAAA,+FAKNA,MAAA,UAAMA,MAAA,6CAINA,mDAJMA,cAAA,IAAAA,MAAA,mEAAAi1C,EAAA1K,WAAA2K,mBAAA5vC,OAAA6vC,EAAAC,oCAAA,IAAAp1C,MAAA,+EAPRA,MAAA,UAMEA,MALA,EAAAq1C,GAAA,WAKAr1C,CALgG,EAAAs1C,GAAA,YAYlGt1C,mDAZEA,cAAAi1C,EAAA1K,WAAA2K,mBAAA5vC,OAAA6vC,EAAAC,qCAAA,QAKAp1C,cAAAi1C,EAAA1K,WAAA2K,mBAAA5vC,OAAA6vC,EAAAC,qCAAA,mCAYAp1C,MAAA,UAAMA,MAAA,6CAINA,mDAJMA,cAAA,IAAAm1C,EAAAI,qBAAA,IAAAv1C,MAAA,+CAAAi1C,EAAA1K,WAAA2K,mBAAA5vC,OAAA,IAAAtF,MAAA,4FAONA,MAAA,UAAMA,MAAA,kEAMNA,mDANMA,cAAA,IAAAm1C,EAAAI,qBAAA,IAAAv1C,MAAA,+CAAAi1C,EAAA1K,WAAA2K,mBAAA5vC,OAAA,IAAAtF,MAAA,iEAAAi1C,EAAA1K,WAAA2K,mBAAA5vC,OAAA6vC,EAAAC,oCAAA,IAAAp1C,MAAA,gFATRA,MAAA,UAQEA,MAPA,EAAAw1C,GAAA,WAOAx1C,CAPgG,EAAAy1C,GAAA,aAgBlGz1C,mDAhBEA,cAAAi1C,EAAA1K,WAAA2K,mBAAA5vC,OAAA6vC,EAAAC,qCAAA,QAOAp1C,cAAAi1C,EAAA1K,WAAA2K,mBAAA5vC,OAAA6vC,EAAAC,qCAAA,mCA1BJp1C,MAAA,UAiBEA,MAhBA,EAAA01C,GAAA,WAgBA11C,CAhB6E,EAAA21C,GAAA,YAoC/E31C,mDApCEA,cAAAm1C,EAAAI,sBAAAN,EAAA1K,WAAA2K,mBAAA5vC,OAAA,MAgBAtF,cAAAm1C,EAAAI,sBAAAN,EAAA1K,WAAA2K,mBAAA5vC,OAAA,iCAxBJtF,MAAA,UAMEA,MALA,EAAA41C,GAAA,WAKA51C,CAL0C,EAAA61C,GAAA,YA6C5C71C,wCA7CEA,cAAA,GAAAm1C,EAAAI,qBAAA,MAKAv1C,cAAA,GAAAm1C,EAAAI,qBAAA,gDAdNv1C,MAAA,qBAAeA,MAAA,yBAAAm1C,EAAAn1C,MAAA6yC,GAAAiD,UAAAb,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAAc,YAAAZ,EAAAx4C,KAAyB,GAK/CqD,MAAA,gBAAwFA,MAAA,cAAQA,QAChGA,MAAA,YAAuBA,MAAA,GACrBA,MAAA,EAAAg2C,GAAA,YAkDJh2C,gDAxD2EA,MAAzE,WAAAm1C,EAAA1sB,WAAAwsB,EAAAgB,sCAAyEj2C,CAAD,UAAAA,MAAA,EAAAmpC,GAAA8L,EAAAR,yBAAAj1C,WAAA21C,EAAAx4C,IAAAw4C,EAAA1sB,WAAAwsB,EAAAgB,wCAI9Cj2C,cAAA,UAAAA,MAAA,EAAAisC,GAAAkJ,EAAA1sB,WACHzoB,MAAA,GAAAA,MAAA,GAAAm1C,EAAAx4C,IAAA,KACrBqD,cAAAi1C,EAAA1K,WAAA2L,gBAAA,OCiBH,IAAMC,GAAiC,MAAxC,MAAOA,UAAyC7B,GAgBpDn5C,YACUmvC,EACwBC,EACxB6L,EACA5zC,GAERpH,MAAMmvC,GALEjvC,KAAAgvC,SACwBhvC,KAAAivC,aACxBjvC,KAAA86C,yBACA96C,KAAAkH,WAlBHlH,KAAAwhB,YAAWlF,OAAO8L,KAClBpoB,KAAA26C,oCAAsC36C,KAAKwhB,SAASu5B,UAAU9sB,KAAa+sB,2BAExEh7C,KAAAi7C,gBAAevmC,OAAS,KAChC,MAAMvI,EAAYnM,KAAKmM,YACjBjI,EAAWlE,KAAKkE,WAChBvD,EAAaX,KAAKk1B,iBAClB7C,EAAmBryB,KAAKm5C,yBAE9B,OAAOn5C,KAAKivC,WAAW2L,gBLjBrB,SAAUM,GACdh3C,EACAiI,EACAxL,EACA43C,EACAqB,GAyBA,OAvB0BztC,EACvB1J,OAAO+1C,GAAQA,EAAKjsC,SAAWrI,EAASiJ,SACxC1M,IAAI+3C,IACH,IAAI2C,EAAkC,EAClCC,EAA6C,EAC7CC,GAAsB,EAC1B,MAAMC,EAAe7Q,KAAaqC,YAAY5oC,EAAUs0C,EAAKjsC,QAC7DqtC,SAAmBznC,QAAQ2iB,IACzB,MACMqL,GAAc,IAAI5wB,IADT5O,EAAWm0B,GACkBwmB,GAC5CH,GAA2Bhb,GAAYob,gBACvCH,GAAsCjb,GAAYqb,4BAClDH,EAAc9C,IAAaE,KAAiBC,gBAAkBF,EAAKpxB,WACnC,GAA3B+zB,CAA2B,GAE4B,CAC5D95C,IAAKm3C,EAAKjsC,OACV4gB,SAAUkuB,EACVpB,qBAAsBkB,EACtBrB,oCAAqCsB,IAK7C,CKbQF,CAAgCh3C,EAAUiI,EAAWxL,EAAY0xB,EAAiBkmB,SAAUv4C,KAAKivC,WAAW2K,oBAC5GtB,GAAqBt4C,KAAKivC,WAAW1pC,OAAQrB,EAAUiI,EAAWxL,EAAY0xB,EAAiBkmB,SAAQ,GAU3Gv4C,KAAKgvC,OAAOyM,gBAAgBnzC,UAAUozC,KACpC,EAAIC,MAAQD,IACVA,EAAME,gBAAc,EAE1B,CAEA1M,WAGMlvC,KAAK26C,uCACP36C,KAAKgvC,OAAO6M,cAAcvzC,UAAU,IAAMtI,KAAKkH,SAAS6Y,WAGvC/f,KAAKyG,WAAW0W,SAAS4iB,OAAOyL,MAAgBC,iBACpDC,QACb1rC,KAAKkH,SAAS40C,kBAAkBrC,GACpC,CAEAgB,YAAYv2C,GACV,MAAM63C,EAA4C,IAAK/7C,KAAKm5C,yBAA0Bj1C,YACtFlE,KAAKm5C,uBAAuB9vC,IAAI0yC,GAEf/7C,KAAKivC,WAAW5c,iBACRnuB,WAAa63C,EAAoB73C,UAM1DlE,KAAKivC,WAAW2L,gBACZ56C,KAAK86C,uBAAuBzN,kBAAkB0O,EAAoB73C,UAClElE,KAAK86C,uBAAuBnR,cAAc,CAAC3pC,KAAKivC,WAAW1pC,OAAOxE,WAAYg7C,EAAoB73C,UAEtGlE,KAAKmvC,eARHnvC,KAAKmvC,aAST,CAEQA,cACNnvC,KAAKgvC,OAAOxoB,OACd,iDA7DWq0B,GAAgCn2C,MAAAC,OAAAD,MAkBjC0qC,OAAe1qC,MAAAiM,IAAAjM,MAAAkM,MAAA,oCAlBdiqC,EAAgC1M,UAAA,qCAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,GAAAC,KAAA,EAAAC,OAAA,uPAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDlCzC9pC,MAFJ,eAEIA,CAF+D,oBAE/DA,CADe,oBAEbA,MAAA,wBACFA,QAEAA,MADA,4BACAA,CAD6F,kEAG/FA,QAEEA,MADF,uBACEA,CADqD,sBAEnDA,MAAA,GAAAs3C,GAAA,uBAAAt3C,OA8DNA,mBAtEMA,MAAA,GAAAA,MAAA,IAAAA,MAAA,mDAEqBA,MAAA,GAAAA,MAAA,6CACJA,cAAA,YAAAA,MAAA,IAAAA,MAAA,8CAAAA,OAKjBA,MAAA,GAAAA,MAAA+pC,EAAAwM,gCCgBFzL,MAAa3+B,8BACborC,KACArE,GAAa9mC,YACborC,MACAtN,MAAa79B,MACb2+B,IAAe1+B,KACf0oC,MAAYpJ,OAAA,m5BAGHuK,CAAiC,kOCyBhCn2C,MAAA,sBAAeA,MAAA,yBAAAm1C,EAAAn1C,MAAA6yC,GAAAiD,UAAAb,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAAc,YAAAZ,EAAAx4C,KAAyB,GAK/CqD,MAAA,iBAAwFA,MAAA,cAAQA,QAChGA,MAAA,YAAuBA,MAAA,GACzBA,iDANiCA,MAA/B,WAAAm1C,EAAA1sB,SAA+BzoB,CAAD,UAAAA,MAAA,EAAAmsC,GAAA8I,EAAAR,yBAAAj1C,WAAA21C,EAAAx4C,IAAAw4C,EAAA1sB,WAIJzoB,cAAA,UAAAA,MAAA,EAAAosC,GAAA+I,EAAA1sB,WACHzoB,MAAA,GAAAA,MAAAm1C,EAAAx4C,gCAf3BqD,MAFJ,QAEIA,CAFC,oBAEDA,CADe,oBAEbA,MAAA,wBACFA,QACAA,MAAA,uBACEA,MAAA,wBAEJA,UACAA,MAAA,qBACEA,MAAA,EAAAy3C,GAAA,uBAAAz3C,OAWJA,gCAlBMA,MAAA,GAAAA,MAAA,IAAAA,MAAA,IAAAi1C,EAAAP,kBAAAG,SAAA,kBAGA70C,MAAA,GAAAA,MAAA,IAAAA,MAAA,8CAIFA,MAAA,GAAAA,MAAAi1C,EAAAsB,iBC9BL,IAAMmB,GAA6B,MAApC,MAAOA,UAAqCpD,GAWhDn5C,YACUmvC,EACwBC,EACzB6L,GAEPh7C,MAAMmvC,GAJEjvC,KAAAgvC,SACwBhvC,KAAAivC,aACzBjvC,KAAA86C,yBAZC96C,KAAAi7C,gBAAevmC,OAAS,KAChC,MAAMvI,EAAYnM,KAAKmM,YACjBjI,EAAWlE,KAAKkE,WAChBvD,EAAaX,KAAKk1B,iBAClB7C,EAAmBryB,KAAKm5C,yBAE9B,OAAOb,GAAqBt4C,KAAKivC,WAAW1pC,OAAQrB,EAAUiI,EAAWxL,EAAY0xB,EAAiBkmB,SAAQ,GAS9Gv4C,KAAKgvC,OAAOyM,gBAAgBnzC,UAAUozC,KACpC,EAAIC,MAAQD,IACVA,EAAME,gBAAc,EAE1B,CAEAS,YAAY9D,GACV,MAAMwD,EAA4C,CAChDxD,WACAr0C,SAAUlE,KAAKq5C,mBAAmBnsC,SAASqrC,GAAY,GAAKv4C,KAAKm5C,yBAAyBj1C,UAE5FlE,KAAKm5C,uBAAuB9vC,IAAI0yC,EAClC,CAEAtB,YAAYv2C,GACV,MAAM63C,EAA4C,IAAK/7C,KAAKm5C,yBAA0Bj1C,YACtFlE,KAAKm5C,uBAAuB9vC,IAAI0yC,EAClC,CAEAO,MACE,MAAMC,EAAWv8C,KAAKm5C,yBAChBqD,EAAWx8C,KAAKivC,WAAW5c,iBAGjC,GADiBmqB,EAASjE,WAAagE,EAAShE,UAAYiE,EAASt4C,WAAaq4C,EAASr4C,SAEzF,OAAOlE,KAAKmvC,cAEd,OAAQoN,EAAShE,UACf,KAAKE,KAAiBI,UACpB74C,KAAK86C,uBAAuBtR,OAAOxpC,KAAKivC,WAAW1pC,OAAOxE,WAC1D,MACF,KAAK03C,KAAiBK,cACpB94C,KAAK86C,uBAAuBrR,KAAKzpC,KAAKivC,WAAW1pC,OAAOxE,WACxD,MACF,KAAK03C,KAAiBL,aACpBp4C,KAAK86C,uBAAuB9N,aAAahtC,KAAKivC,WAAW1pC,OAAOxE,UAAWw7C,EAASr4C,UACpF,MACF,KAAKu0C,KAAiBC,cACpB14C,KAAK86C,uBAAuB3N,cAAcntC,KAAKivC,WAAW1pC,OAAOxE,UAAWw7C,EAASr4C,UACrF,MACF,KAAKu0C,KAAiBM,aACpB/4C,KAAK86C,uBAAuBpO,SAAS1sC,KAAKivC,WAAW1pC,OAAOxE,UAAWw7C,EAASr4C,UAKpFlE,KAAKmvC,aACP,CAEQA,cACNnvC,KAAKgvC,OAAOxoB,OACd,iDApEW41B,GAA4B13C,MAAAC,OAAAD,MAa7B0qC,OAAe1qC,MAAAiM,IAAA,oCAbdyrC,EAA4BjO,UAAA,gCAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,GAAAC,KAAA,GAAAC,OAAA,saAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ID5BnC9pC,MAFJ,eAEIA,CAF0D,oBAE1DA,CADe,oBAEbA,MAAA,wBACFA,QACAA,MAAA,uBACEA,MAAA,wBAEJA,UAGIA,MAFJ,uBAEIA,CAFmD,mBAEnDA,CADyB,sBAGvBA,MAAA,0BAAS+pC,EAAA4N,YAAA5N,EAAAgK,iBAAAK,cAA2C,GACpDp0C,MAAA,iBAAyCA,MAAA,WAAIA,QAC7CA,MAAA,aAAuBA,MAAA,0BAA0GA,QACjIA,MAAA,aAAsBA,MAAA,0BACxBA,UACAA,MAAA,sBAEEA,MAAA,0BAAS+pC,EAAA4N,YAAA5N,EAAAgK,iBAAAI,UAAuC,GAChDn0C,MAAA,iBAAyCA,MAAA,gBAASA,QAClDA,MAAA,aAAuBA,MAAA,0BAA0GA,QACjIA,MAAA,WAAMA,MAAA,0BACRA,UACAA,MAAA,sBAEEA,MAAA,0BAAS+pC,EAAA4N,YAAA5N,EAAAgK,iBAAAM,aAA0C,GACnDr0C,MAAA,iBAAyCA,MAAA,gBAASA,QAClDA,MAAA,aAAuBA,MAAA,0BAAwGA,QAC/HA,MAAA,WAAMA,MAAA,0BAERA,UACAA,MAAA,sBAEEA,MAAA,0BAAS+pC,EAAA4N,YAAA5N,EAAAgK,iBAAAL,aAA0C,GACnD1zC,MAAA,iBAAyCA,MAAA,WAAIA,QAC7CA,MAAA,aAAuBA,MAAA,0BAA2GA,QAClIA,MAAA,aAAsBA,MAAA,0BACxBA,UACAA,MAAA,sBAEEA,MAAA,0BAAS+pC,EAAA4N,YAAA5N,EAAAgK,iBAAAC,cAA2C,GACpDh0C,MAAA,iBAAyCA,MAAA,YAAKA,QAC9CA,MAAA,aAAuBA,MAAA,0BAAyGA,QAChIA,MAAA,WAAMA,MAAA,0BAGVA,YACAA,MAAA,GAAA+3C,GAAA,YAwBF/3C,QAEEA,MADF,wBACEA,CAD4B,eACoDA,MAAA,0BAAS+pC,EAAA6N,KAAK,GAAE53C,MAAA,SAEpGA,mBA1EMA,MAAA,GAAAA,MAAA,IAAAA,MAAA,6BAAAA,MAAA,GAAAmpC,GAAAY,EAAAQ,WAAA1pC,OAAAxE,YAAA,KAGA2D,MAAA,GAAAA,MAAA,IAAAA,MAAA,mCAMEA,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAisC,GAAAlC,EAAA0K,yBAAAZ,WAAA9J,EAAAgK,iBAAAK,gBAGuBp0C,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAC,YAAA,SAAAvzC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WACD1I,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAC,YAAA,QAAAvzC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WAGtB1I,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAisC,GAAAlC,EAAA0K,yBAAAZ,WAAA9J,EAAAgK,iBAAAI,YAGuBn0C,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAE,YAAA,SAAAxzC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WACjB1I,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAE,YAAA,QAAAxzC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WAGN1I,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAisC,GAAAlC,EAAA0K,yBAAAZ,WAAA9J,EAAAgK,iBAAAM,eAGuBr0C,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAG,UAAA,SAAAzzC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WACjB1I,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAG,UAAA,QAAAzzC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WAIN1I,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAisC,GAAAlC,EAAA0K,yBAAAZ,WAAA9J,EAAAgK,iBAAAL,eAGuB1zC,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAI,aAAA,SAAA1zC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WACD1I,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAI,aAAA,QAAA1zC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WAGtB1I,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAisC,GAAAlC,EAAA0K,yBAAAZ,WAAA9J,EAAAgK,iBAAAC,gBAGuBh0C,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAK,WAAA,SAAA3zC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WACjB1I,MAAA,GAAAA,YAAA,yBAAA+pC,EAAAuJ,SAAAK,WAAA,QAAA3zC,MAAA,GAAAksC,GAAAnC,EAAAvqC,WAAAkJ,WAIV1I,MAAA,GAAAA,MAAA+pC,EAAA2K,kBAAAE,sBAAA,OA0BkC50C,MAAA,GAAAA,MAAA,WAAA+pC,EAAA2K,kBAAAI,gCCrDpChK,MAAa5+B,oCACbgnC,GAAa/mC,kBACbqrC,MACAtN,MAAa99B,MACb2+B,MAAe1+B,MACf2+B,IAAe1+B,MAAAs/B,OAAA,q3BAGN8L,CAA6B,8LCXlC13C,MAAA,cAAsBA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA31C,YAAW,GAExCrC,MAAA,wBACFA,QACAA,MAAA,cAAsBA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAC,4BAA4BD,EAAArqB,oBAAmB,GAE5E3tB,MAAA,wBACAA,MAAA,kCACFA,QACAA,MAAA,cAAsBA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAE,gBAAe,GAE5Cl4C,MAAA,wBACFA,QACAA,MAAA,eAAsBA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAG,wBAAwBH,EAAArqB,oBAAmB,GAExE3tB,MAAA,0BACFA,iCAfEA,MAAA,UAAAA,MAAA,GAAAmsC,GAAA6L,EAAArqB,mBAAAkmB,WAAAmE,EAAAjE,iBAAAI,YACAn0C,cAAA,IAAAA,MAAA,+BAGAA,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAmsC,GAAA6L,EAAArqB,mBAAAkmB,WAAAmE,EAAAjE,iBAAAI,YACAn0C,cAAA,IAAAA,MAAA,oCAC4BA,MAAA,GAAAA,MAAA,6CAG5BA,cAAA,UAAAA,MAAA,GAAAmsC,GAAA6L,EAAArqB,mBAAAkmB,WAAAmE,EAAAjE,iBAAAK,gBACAp0C,cAAA,IAAAA,MAAA,kCAGAA,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAmsC,GAAA,KAAA6L,EAAArqB,mBAAAnuB,WACAQ,cAAA,IAAAA,MAAA,uDA5BJA,MAFJ,UAEIA,CAFsB,UAEtBA,CAD6F,WAE3FA,MAAA,wBAEFA,QAIIA,MAHJ,UAGIA,CAHkH,aAGlHA,CAD4F,gBACvDA,MAAA,eAG3CA,cACAA,MAAA,qBACEA,MAAA,GAAAo4C,GAAA,uBAoBJp4C,4CAjC6DA,cAAA,UAAAg4C,EAAAK,yBACXr4C,cAAA,UAAAA,MAAA,GAAAmpC,GAAA6O,EAAAvvB,aAC5CzoB,cAAA,IAAAg4C,EAAArqB,mBAAA2qB,UAAAt4C,MAAA,IAAAg4C,EAAArqB,mBAAA2qB,UAAAt4C,MAAA,GAAAisC,GAAA+L,EAAArqB,mBAAA4qB,cAAA,QAG6Cv4C,MAAA,GAAAA,MAAA,iBAAAg4C,EAAAQ,gCACax4C,QACZA,MADY,oBAAAy4C,EACZz4C,CADsC,WAAAg4C,EAAAQ,+BACtCx4C,CAAD,UAAAA,MAAA,GAAAksC,GAAA8L,EAAAU,yBCwB9C,IAAMC,GAAsB,MAA7B,MAAOA,EAGXC,GACAlc,GAeAvhC,YACU09C,EACAC,EACA/2C,EACAg3C,GAHAz9C,KAAAu9C,YACAv9C,KAAAw9C,mBACAx9C,KAAAyG,aACAzG,KAAAy9C,kBAtBVz9C,KAAAo9C,uBAAsBM,SAEtB19C,MAAAs9C,KAAchhC,OAAOK,MACrB3c,MAAAohC,KAAqB9kB,OAAO6J,IAE5BnmB,KAAAy4C,iBAAmBA,KAETz4C,KAAAqyB,iBAAmBryB,MAAKs9C,EAAYjrB,iBACpCryB,KAAAkE,SAAWlE,KAAKyG,WAAWvC,SAE3BlE,KAAAmtB,YAAWzR,OAAY,WAAY,IAAM1b,MAAKs9C,EAAYK,KAAKxwB,UAEzEntB,KAAA+8C,yBAAwBrhC,OAAY,wBAAyB,IAAMkiC,KAAqBC,yBAAyB79C,KAAKqyB,mBAAmBkmB,WAEzIv4C,KAAAk9C,gCAA+BxhC,OAAY,+BACzC,IAAM1b,MAAKohC,EAAmBza,WAAWU,YAAcrnB,MAAKs9C,EAAYngC,WAAWoV,mBAQjF,CAEJxrB,YACE/G,KAAKy9C,gBAAgBjU,OAAOxpC,MAAKs9C,EAAYjpC,KAC/C,CAEAuoC,gBACE58C,KAAKy9C,gBAAgBhU,KAAKzpC,MAAKs9C,EAAYjpC,KAC7C,CAEAwoC,wBAAwBxqB,GACtBryB,MAAK89C,EAAYzrB,EAAkB+pB,GACrC,CAEAO,4BAA4BtqB,GACtBryB,MAAKs9C,EAAYngC,WAAWuiB,uBAC9B1/B,KAAKu9C,UAAU9sC,KAAKs+B,GAAoC,CACtDgP,WAAW,EACX7yC,KAAM,CAAEqkC,oBAAoB,GAC5BiO,iBAAkBx9C,KAAKw9C,iBACvBQ,MAAO,UAGTh+C,MAAK89C,EAAYzrB,EAAkBwoB,GAGvC,CAEAiD,GAAYzrB,EAAoC4rB,GAC9C,MAAMhP,EAAsC,CAC1C1pC,OAAQvF,MAAKs9C,EAAY/3C,OACzB8sB,iBAAkB,CAChBnuB,SAAUmuB,EAAiBnuB,SAC3Bq0C,SAAUlmB,EAAiBkmB,WAG/Bv4C,KAAKu9C,UAAU9sC,KAAKwtC,EAAW,CAC7BF,WAAW,EACX7yC,KAAM+jC,EACNuO,iBAAkBx9C,KAAKw9C,iBACvBQ,MAAO,SAEX,iDAlEWX,GAAsB34C,MAAAC,OAAAD,mBAAAiM,KAAAjM,MAAAkM,IAAA,oCAAtBysC,EAAsBlP,UAAA,yBAAAkC,OAAA,CAAA+M,oBAAA,2BAAAhP,MAAA,EAAAC,KAAA,EAAAC,OAAA,kcAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDlCnC9pC,MAAA,EAAAw5C,GAAA,oBAAAx5C,MAAA+pC,EAAAvqC,WAAAiJ,UAAAshC,EAAAvqC,WAAAkJ,QAAA,qBCyBQ8uC,MACAzM,MAAe5+B,MACfstC,MAAartC,wBACb89B,MAAa79B,MACbi9B,GACA0B,IAAe1+B,KACf69B,MAAcyB,OAAA,i7BAGT+M,CAAsB,yHClB5B,IAAMe,GAA4B,MAAnC,MAAOA,EAIXld,GACAoc,GAKAz9C,YACUw+C,EACAC,GADAt+C,KAAAq+C,qBACAr+C,KAAAs+C,oBARVt+C,MAAAkhC,KAAc5kB,OAAOC,KACrBvc,MAAAs9C,KAAchhC,OAAOK,MAErB3c,KAAAkE,SAAWlE,MAAKkhC,EAAYh9B,SAC5BlE,KAAAo9C,qBAA+B,CAK3B,CAEJr2C,YACE,GAAI/G,KAAKs+C,kBAAkB33B,WAAWU,WAAY,OAClD,MAAMnjB,EAAWlE,MAAKkhC,EAAYh9B,WAElC,GADIA,EAASiJ,UAAYjJ,EAASkJ,UAC7BpN,MAAKs9C,EAAYK,KAAKxwB,SAAU,OACrC,MAAM5nB,EAASvF,MAAKs9C,EAAY/3C,OACbvF,KAAKq+C,mBAAmB5lC,WAAWlT,EAAOyC,MAAOzC,EAAO7E,aAG3EV,KAAKu+C,cAAcx3C,WACrB,CAEAy3C,gCAAgCC,GAC9Bz+C,KAAKo9C,oBAAsBqB,CAC7B,iDA7BWL,GAA4B15C,MAAAC,IAAAD,MAAAiM,IAAA,oCAA5BytC,EAA4BjQ,UAAA,+BAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,eACYkQ,aACxCrB,GAAsB,0WCnBnC34C,MAAA,WACEA,MADyB,wBAAAA,aAAA6yC,GAAA7yC,MAAc+pC,EAAA+P,iCAAgC,GAAM,EAC7E95C,CAD8E,wBAAAA,aAAA6yC,GAAA7yC,MAChE+pC,EAAA+P,iCAAgC,GAAK,GACnD95C,MAAA,WAC4FA,MAAA,sBAAAA,aAAA6yC,GAAA7yC,MAAY+pC,EAAA1nC,YAAW,GAEjHrC,MAAA,UAEFA,QAEAA,MAAA,0BAGFA,wBATIA,cAAA,UAAAA,MAAA,EAAAisC,IAAA,OAAAgO,EAAAlQ,EAAAvqC,YAAA,KAAAy6C,EAAAxxC,YAAA,OAAAwxC,EAAAlQ,EAAAvqC,YAAA,KAAAy6C,EAAAvxC,WAMmD1I,MAAA,GACnDA,MADmD,sBAAA+pC,EAAA2O,oBACnD14C,CAD8F,UAAAA,MAAA,EAAAksC,IAAA,OAAAgO,EAAAnQ,EAAAvqC,YAAA,KAAA06C,EAAAzxC,YAAA,OAAAyxC,EAAAnQ,EAAAvqC,YAAA,KAAA06C,EAAAxxC,2BDI1F8uC,MACAmB,IAAsB/M,OAAA,iXAGjB8N,CAA4B,4BEflC,MAAMS,GAAmB,gBAO1B,SAAUC,GAAclkB,GAC5B,OAAQqjB,IACNc,QAAQC,eAAeH,GAAkBjkB,EAAUqjB,EAAS,CAEhE,gBCNO,IAAMgB,GAA2B,MAAlC,MAAOA,EACXC,GAAU,SACVC,GACAC,GAEAv/C,YAAYw/C,EAAgCC,GAAAt/C,KAAAs/C,OAC1Ct/C,MAAKm/C,EAAWE,EAAWnL,aAC7B,CAEAhF,WACElvC,KAAKs/C,KAAKtK,kBAAkB,KAC1Bh1C,MAAKu/C,IACLv/C,MAAKo/C,EAAY,IAAII,iBAAkBz9C,IACrC/B,MAAKu/C,GAAiB,GAExBv/C,MAAKo/C,EAAUK,QAAQz/C,MAAKm/C,EAAU,CAAEx+C,YAAY,EAAM++C,WAAW,EAAMC,SAAS,GAAM,EAE9F,CAEAloC,cACEzX,KAAKs/C,KAAKtK,kBAAkB,IAAMh1C,MAAKo/C,EAAUQ,aACnD,CAEAL,KACE,GAAmD,MAA/Cv/C,MAAKm/C,EAAShL,SAAS5yC,oBAA6B,CACtD,MAAMs+C,EAAS7/C,MAAKm/C,EAChBU,EAAOz0B,SAAWprB,MAAKk/C,IACzBW,EAAOz0B,OAASprB,MAAKk/C,EACzB,CACA,MAAMY,EAAe9/C,MAAKm/C,EAASY,qBAAqB,KACxD,UAAWF,KAAU7+B,MAAM60B,KAAKiK,GAC1BD,EAAOz0B,SAAWprB,MAAKk/C,IACzBW,EAAOz0B,OAASprB,MAAKk/C,EAC3B,iDAjCWD,GAA2Bv6C,0BAAA,oCAA3Bu6C,EAA2B9Q,UAAA,4CAA3B8Q,CAA2B,sJCAlCv6C,MAAA,gBAA2BA,MAAA,iBAAAs7C,GAAAt7C,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAuD,WAAAD,GAAkB,GACpDt7C,MAAA,+BAGFA,iCAJwDA,MAAA,UAAAA,MAAA,EAAAisC,GAAA+L,EAAAvvB,aACtBzoB,QAC9BA,MAD8B,UAAAg4C,EAAAwD,WAAA,gBAC9Bx7C,CADuE,YAAAA,MAAA,IAAAg4C,EAAAyD,SAAAz7C,kCAM3EA,MAAA,iBAAoBA,MAAA,wBAAmCA,+BAAnCA,oBAAA,IAAA+pC,EAAAiO,EAAAv/B,qCAGpBzY,MAAA,iBAA2BA,MAAA,wBAAyBA,eAAzBA,oBAAA,IAAA+pC,+BAjB/B/pC,MAAA,WAgBEA,MAVA,EAAA07C,GAAA,iBAUA17C,CAVe,EAAA27C,GAAA,kBAUf37C,CAHgD,EAAA47C,GAAA,mBAMlD57C,sCAnBqBA,MAAA,UAAAA,MAAA,EAAAmpC,GAAA6O,EAAAhgC,WAAAnX,OAAA01B,cAAAyhB,EAAA6D,6BAAA7D,EAAAhgC,WAAAnX,OAAA01B,cAAAyhB,EAAA8D,aAMnB97C,cAAAg4C,EAAAyD,QAAA,MAOAz7C,eAAAk6C,EAAAlC,EAAA+D,cAAA/D,EAAAgE,gBAAA,KAAA9B,GAGAl6C,eAAAi8C,GAAAjE,EAAAkE,gBAAAlE,EAAAmE,kBAAA,KAAAF,ICIG,IAAMG,GAAwB,MAA/B,MAAOA,EAWXjhD,cAVAG,KAAA4gD,gBAAelD,QAAe,GAC9B19C,KAAAugD,8BAA6B7C,QAAe,GAG5C19C,KAAA+gD,eAAcrD,QAAe,GAE7B19C,KAAAwgD,YAAW9C,QAAe,GAEhB19C,KAAA0c,cAAaJ,OAAOK,MAUpB3c,KAAAmd,SAAWnd,KAAK0c,WAAWS,SAErCnd,MAAAghD,KAAWtlC,OAAY,UAAW,IAAM1b,KAAK0c,WAAWihC,KAAKsD,SAC7DjhD,KAAAmtB,YAAWzR,OAAY,WAAY,IAAM1b,KAAK0c,WAAWihC,KAAKxwB,UAE9DntB,KAAAygD,cAAa/kC,OAAY,aAAc,IAAM1b,MAAKghD,MAAehhD,KAAK4gD,gBAMtE5gD,KAAAmgD,SAAQzkC,OAAY,QAAS,KACjB1b,KAAKmd,WAAW8c,OAAS,IAC1BrmB,QAAQ,OAAQ,oBAAoB5T,KAAKkhD,iBAGpDlhD,KAAA4O,WAAU8M,OAAY,UAAW,KAAO1b,KAAKmgD,UAAYngD,KAAKygD,cAE9DzgD,KAAA0gD,gBAAehlC,OAAY,eAAgB,KAE/B1b,KAAK0c,WAAWykC,UAEnBnhD,KAAK0c,WAAWihC,KAAKyD,cAG9BphD,KAAA6gD,kBAAiBnlC,OAAY,iBAAkB,IAAM1b,KAAK0c,WAAWihC,KAAK0D,eAQ1ErhD,KAAA2uC,QAAOjzB,OAAY,OAAQ,KAAO1b,KAAK4O,WAAa5O,KAAK6gD,mBAAqB7gD,KAAK+gD,eAEnF/gD,KAAAkgD,YAAa,EAxCXlgD,KAAKkhD,YAAelhD,KAAKH,YAAwD,UAAQmf,EAC3F,CAMAgiC,GAoCAf,WAAWvE,GACT,IAAItwB,EAASswB,EAAMtwB,OAEnB,GAA4C,MAAxCA,EAAO+oB,SAAS5yC,oBACpB,MAAO6pB,GAAUA,EAAOwpB,YAAcxpB,EAAOwpB,UAAU0M,SAAS,uBAG9D,GAFAl2B,EAASA,EAAOm2B,YACXn2B,GACuC,MAAxCA,EAAO+oB,SAAS5yC,oBAA6B,OAGnDvB,KAAKkgD,YAAclgD,KAAKkgD,WAC1B,iDApEWY,EAAwB,oCAAxBA,EAAwB3S,UAAA,4BAAAkC,OAAA,CAAAuQ,aAAA,mBAAAL,2BAAA,iCAAAQ,YAAA,kBAAAP,SAAA,gBAAApS,MAAA,EAAAC,KAAA,EAAAC,OAAA,2LAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDrBrC9pC,MAAA,EAAA88C,GAAA,kBAAA98C,MAAA+pC,EAAAE,OAAA,qBCcQuN,MACAuF,MAAkB98C,YAClBs6C,GACAvP,IAAe/+B,KACf+oC,MAAYpJ,OAAA,87BAGPwQ,CAAwB,KCXfY,GAAoB,MAApC,MAAgBA,EALtB7hD,cAOEG,KAAA0c,cAAaJ,OAAOK,MAEpB3c,KAAA4c,MAAQ5c,KAAK0c,WAAWE,MACxB5c,KAAA29C,GAAK39C,KAAK0c,WAAWihC,GACrB39C,KAAAmhD,QAAUnhD,KAAK0c,WAAWykC,QAE1BnhD,KAAAmd,SAAWnd,KAAK0c,WAAWS,SAC3Bnd,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAGzB3hD,KAAA4hD,aAAe5hD,KAAK0c,WAAWO,WAAW,0DAZtBykC,EAAoB,oCAApBA,EAAoBvT,UAAA,uBAAAC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,YAApB4S,CAAoB,oBCLpC,MAAOG,WAA4BC,KAGvCjiD,cAAgBC,MAAM,CAAE+hD,yBAFxB7hD,KAAAqU,KAAO0hB,KAAiBgsB,cAEwB,CAEhDliC,QAAS1C,WAAUxC,UACjB,MAAMqnC,EAAgB,IAAK7kC,GAC3B6kC,SAAcC,iBAAkB,EAChCD,EAAcE,OAASliD,MAAKmiD,EAAgBxnC,EAAOqnC,GAE5CA,CACT,CAEAG,GAAgBxnC,EAAgBwC,GAC9B,OAAc,IAAVxC,GAAkBwC,EAASilC,UACtBjlC,EAASilC,WACJ,IAAVznC,GAAmBwC,EAASklC,WACvBllC,EAASklC,WACXllC,EAAS7O,IAClB,EAGFwzC,KAAet/C,IAAIq/C,ICFZ,IAAMS,GAAN,MAAMA,WAAgCZ,GAE3C7hD,cACEC,QAIFE,KAAAuiD,gBAAe7mC,OAAY,eAAgB,KACzC,MAAMf,EAAQ3a,KAAKmhD,UAEnB,OADsBnhD,KAAKmd,WAAW8kC,eACdtnC,EAAQA,IANhCknC,GAAoBW,UACtB,CAQAC,cACMziD,KAAK29C,KAAKxwB,UACdntB,KAAK0c,WAAWihC,KAAK+E,cAAc1iD,KAAKmhD,UAC1C,iDAhBWmB,GAAuB,oCAAvBA,GAAuBnU,UAAA,sBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,mJAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,ICxBlC9pC,MADF,UACEA,CADuB,WACQA,MAAA,0BAAS+pC,EAAAgU,aAAa,GACnD/9C,MAAA,wBAIAA,MAAA,YACEA,MAAA,GAEJA,UACAA,MAAA,6BACFA,oBAXKA,MAAA,YAAA+pC,EAAA7xB,OAGClY,MAAA,GAEAA,MAFA,UAAA+pC,EAAA8T,eAEA79C,CAF0B,WAAA+pC,EAAAkP,KAAAxwB,SAE1BzoB,CAD0B,UAAA+pC,EAAA0S,UAAA,wCAEtBz8C,cAAA,UAAA+pC,EAAA0S,UAAA,uBACJz8C,cAAA,YAAAi+C,EAAAlU,EAAAmT,sBAAA7xC,IAAA4yC,IAAAlU,EAAAkT,SAAAjnC,MAAA,KAGmBhW,cAAA,mCDOjBk+C,MAAWj+C,MACXk+C,MAAmBl+C,MACnBm+C,MAAoBnyC,MACpBurC,MACA4E,IAAwBxQ,OAAA,65BAInBgS,MAAuBS,OAAA,CADnCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,yBAClCX,IEpBP,MAAOY,WAA6BpB,KAGxCjiD,cAAgBC,MAAM,CAAEojD,0BAFxBljD,KAAAqU,KAAO0hB,KAAiBotB,eAEyB,CAEjDtjC,QAAS1C,WAAUxC,UACjB,MAAMqnC,EAAgB,IAAK7kC,GAC3B6kC,SAAcC,iBAAkB,EAChCD,EAAcE,OAASliD,MAAKmiD,EAAgBxnC,EAAOqnC,GAE5CA,CACT,CAEAG,GAAgBxnC,EAAqBwC,GACnC,OAAc,IAAVxC,GAAkBwC,EAASilC,UACtBjlC,EAASilC,WACJ,IAAVznC,GAAmBwC,EAASklC,WACvBllC,EAASklC,YACb1nC,GAAyBwC,EAASimC,mBAC9BjmC,EAASimC,mBACXjmC,EAAS7O,IAClB,EAGFwzC,KAAet/C,IAAI0gD,4HCHZ,IAAMG,GAAN,MAAMA,WAAiC3B,GAI5C7hD,cACEC,QAHFE,KAAAsjD,GAAKtjD,KAAK0c,WAOV1c,KAAAuiD,gBAAe7mC,OAAY,eAAgB,KACzC,MAAMf,EAAQ3a,KAAKsjD,GAAGnC,UAEtB,OADsBnhD,KAAKmd,WAAW8kC,eAEvB,IAAVtnC,KAAmC,IAAVA,GAAyBA,GACxC,KAAVA,EAAe,KAAOA,IAG7B3a,KAAAujD,aAAY7nC,OAAY,YAAa,KACnC,MAAMf,EAAQ3a,KAAKuiD,eACbplC,EAAWnd,KAAKmd,WACtB,OAAc,IAAVxC,GAAkBwC,EAASilC,UAA4BjlC,EAASilC,WACtD,IAAVznC,GAAmBwC,EAASklC,WAA2BllC,EAASklC,WACtD,OAAV1nC,GAAkBwC,EAASimC,mBAA4BjmC,EAASimC,mBAC7DjmC,EAAS7O,OAjBhB40C,GAAqBV,UACvB,CAmBAC,YAAYt1B,GACNA,GACJntB,KAAK0c,WAAWihC,KAAK+E,aAAa1iD,MAAKwjD,IACzC,CAEAA,KACE,MAAMr2C,EAAUnN,KAAKsjD,GAAGnC,UAClBsC,EAAWzjD,KAAKmd,WAAW8kC,cAEjC,OAAQ90C,GACN,KAAK,EAAO,QAAOs2C,GAAkB,KACrC,KAAK,EAAM,QAAOA,GAAW,KAC7B,IAAK,GACL,KAAK,KAAM,OAAOA,EAEtB,iDAzCWJ,GAAwB,oCAAxBA,GAAwBlV,UAAA,uBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,GAAAC,OAAA,mJAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,ICxBnC9pC,MADF,UACEA,CADuB,WACQA,MAAA,0BAAS+pC,EAAAgU,YAAYhU,EAAAkP,KAAIxwB,SAAU,GAChEzoB,MAAA,wBASAA,MAAA,YACEA,MAAA,GAEJA,UACAA,MAAA,6BACFA,oBAhBKA,MAAA,YAAA+pC,EAAA7xB,OAGDlY,MAAA,GAEAA,MAFA,UAAA+pC,EAAA8T,eAEA79C,CAF0B,WAAA+pC,EAAAkP,KAAAxwB,SAE1BzoB,CAD0B,UAAAA,MAAA,EAAAmpC,IAAA,IAAAY,EAAA8T,gBAAA,IAAA9T,EAAA8T,eAAA,OAAA9T,EAAA8T,eAAA9T,EAAAmT,iBAAAnT,EAAAkT,SAAAjnC,QAOpBhW,cAAA,UAAA+pC,EAAA8T,eAAA,uBACJ79C,cAAA,YAAAi+C,EAAAlU,EAAAmT,sBAAA7xC,IAAA4yC,IAAAlU,EAAAkT,SAAAjnC,MAAA,KAGmBhW,cAAA,mCDEjBk+C,MAAWj+C,MACXk+C,MAAmBl+C,MACnBm+C,MAAoBnyC,MACpBurC,MACA4E,IAAwBxQ,OAAA,+/CAInB+S,MAAwBN,OAAA,CADpCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,yBAClCI,IEdN,IAAMK,GAAN,MAAMA,GAKX7jD,cAHUG,KAAA0c,cAAaJ,OAAOK,MACpB3c,KAAAuF,OAASvF,KAAK0c,WAAWnX,MAGnC,iDANWm+C,GAAsB,oCAAtBA,GAAsBvV,UAAA,qBAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,gBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICZnC9pC,MAAA,WAAqBA,MAAA,GAA8EA,eAA9EA,cAAA,GAAA+pC,EAAAlpC,OAAAxE,UAAA,uHDYR2iD,MAAsBX,OAAA,CADlCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,yBAClCS,mBEPP,MAAOC,WAA8B7B,KAGzCjiD,cAAgBC,MAAM,CAAE6jD,2BAFxB3jD,KAAAqU,KAAO0hB,KAAiBmG,gBAE0B,CAElDrc,QAAS1C,aACP,MAAM6kC,EAAgB,IAAK7kC,GAC3B6kC,SAAc4B,OAAS,EACvB5B,EAAcrkB,iBAAmB,SACjCqkB,EAAc6B,iBAAmB,OACjC7B,EAAc8B,mBAAqB,OACnC9B,EAAc+B,gBAAkB,GAChC/B,EAAcgC,gBAAkB,GAChChC,EAAciC,uBAAwB,EAC/BjC,CACT,EAGFF,KAAet/C,IAAImhD,IAEb,MAAOO,WAAwBP,GAArC9jD,kCACEG,KAAAqU,KAAO0hB,KAAiBouB,UAC1B,EAEArC,KAAet/C,IAAI0hD,mGCXfx/C,MAAA,kCAAqDA,MAAA,cAAAopC,EAAA6T,SAAApnC,cCWlD,IAAM6pC,GAAN,MAAMA,GACX9G,GACA+G,GAKAnb,GAEAob,GAqCAzkD,YAAoB4G,GAAAzG,KAAAyG,aA7CpBzG,MAAAs9C,KAAchhC,OAAOK,MACrB3c,MAAAqkD,EAAUrkD,MAAKs9C,EAAY/3C,OAEjBvF,KAAA29C,GAAK39C,MAAKs9C,EAAYK,GACtB39C,KAAAmhD,QAAUnhD,MAAKs9C,EAAY6D,QAC3BnhD,KAAA2hD,OAAS3hD,MAAKs9C,EAAYqE,OACpC3hD,MAAAkpC,EAAYlpC,MAAKs9C,EAAYngC,SAE7Bnd,MAAAskD,EAAQtkD,MAAKs9C,EAAYrgC,WAAW,QAC1Bjd,KAAAukD,WAAU7vC,OAAS,IAAM1U,MAAKqkD,EAAQG,UAEtCxkD,KAAAykD,gBAAe/vC,OAAS,IACzB1U,MAAKskD,IAAUtkD,KAAK0kD,cAAcC,WAAa,MAG9C3kD,KAAA4kD,cAAalwC,OAAS,KAC9B,MAAMyI,EAAWnd,MAAKkpC,IACtB,MAAgC,SAA5B/rB,EAAS0mC,oBAA2B,EACT,CAC7BrxC,KAAM2K,EAAS2mC,iBACfnpC,MAAqC,SAA9BwC,EAAS2mC,iBAA8B3mC,EAAS4mC,cAAgB5mC,EAAS6mC,iBAK1EhkD,KAAA6kD,gBAAenwC,OAAS,IACf1U,MAAKkpC,IAC6C+a,oBAAsB,SAAW,SAK5FjkD,KAAA0kD,cAAoE,CAC5EI,QAAS,CACPnhC,SAAS,GAEXghC,WAAY,GACZI,YAAa,MACbC,qBAAsB,EACtBC,SAAS,EACTC,sBAAsB,EACtBC,QAAS,EACTC,sBAAsB,GAItBzB,GAAsBnB,WACtB0B,GAAgB1B,UAClB,CAEAtT,WACElvC,KAAKqlD,SAAW,GAAGrlD,MAAKqkD,EAAQtjD,aAAaf,MAAKqkD,EAAQ3jD,cAAcV,KAAKyG,WAAWlB,OAAON,aACjG,CAEAqgD,YAAYC,GACVvlD,KAAK29C,KAAK+E,aAAa6C,EACzB,CAEAC,YACExlD,MAAKqkD,EAAQG,SAASnqC,MAAK,EAC7B,CAEAorC,YACEzlD,KAAK29C,KAAK+H,cACV1lD,MAAKqkD,EAAQG,SAASnqC,MAAK,EAC7B,iDAlEW+pC,IAAyB1/C,MAAAC,KAAA,oCAAzBy/C,GAAyBjW,UAAA,yBAAAC,MAAA,EAAAC,KAAA,GAAAC,OAAA,8NAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDxBpC9pC,MALF,UAKEA,CADG,iBACsBA,MAAA,GAAuDA,QAChFA,MAAA,yBASEA,MAFA,wBAAAs7C,GAAA,OAAgBvR,EAAA6W,YAAAtF,EAAmB,EAEnCt7C,CAFoC,4BACzB+pC,EAAA+W,WAAW,EACtB9gD,CADuB,4BACZ+pC,EAAAgX,WAAW,GACxB/gD,QACAA,MAAA,EAAAihD,GAAA,eAGFjhD,QACAA,MAAA,kCArBwBA,MAAA,UAAAA,MAAA,GAAAmpC,GAAAY,EAAAkP,KAAAxwB,SAAAshB,EAAA8V,UAAA5pC,MAAA8zB,EAAAkP,KAAAiI,oBAKGlhD,MAAA,GAAAA,MAAA,GAAA+pC,EAAAkT,SAAAjnC,MAAA,IAAA+zB,EAAAkT,SAAAnlB,SAAA,WAEvB93B,QAKAA,MALA,WAAA+pC,EAAA4W,SAKA3gD,CALqB,UAAAA,MAAA,GAAAisC,GAAAlC,EAAAgW,gBAKrB//C,CAJwC,QAAA+pC,EAAA0S,UAIxCz8C,CAHmB,UAAA+pC,EAAAiW,cAGnBhgD,CAFyB,aAAA+pC,EAAAmW,aAEzBlgD,CAD2B,eAAA+pC,EAAAoW,gBAM7BngD,eAAA+pC,EAAA0S,WAAA1S,EAAAkT,SAAApnC,YAAA,sBCIM2hC,MACAuF,MAAkB9wC,MAClBk1C,KACAC,MACAhF,IAAwBxQ,OAAA,miDAInB8T,MAAyBrB,OAAA,CADrCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,qBA+Cb1mC,OA9CrB6nC,+DCPb,MAAAvW,GAAA,kCAAAkY,GAAAC,EAAAC,GAAA,OAkhBw/CjmD,KAAAkmD,UAAAD,EAAc,OAAAE,IAAAH,EAAAC,MAAAjnC,GAAA,SAAAonC,GAAA5X,EAAAC,GAAxG,GAAwG,EAAAD,IAtdz6C9pC,MAAE,SAAFA,CAsd+mC,UAtd/mCA,MAAE,GAAFA,WAsdi0C,EAAA8pC,EAAA,OAAAV,EAtdj0CppC,sBAAE,cAAAopC,EAAAuY,aAAF3hD,CAsd2uC,iBAAAopC,EAAAuY,cAtd3uC3hD,MAAE,UAAAopC,EAAAwY,SAAF5hD,cAAE,IAAAopC,EAAApzB,MAAA,IAsdizC,WAAA6rC,GAAA/X,EAAAC,GAA46B,GAA56B,EAAAD,IAtdnzC9pC,MAAE,UAAFA,MAAE,GAAFA,SAsd+tE,EAAA8pC,EAAA,OAAAV,EAtd/tEppC,MAAE,GAAFA,MAAE,cAAAopC,EAAAuY,aAAF3hD,CAsd8lE,iBAAAopC,EAAAuY,cAtd9lE3hD,MAAE,UAAAopC,EAAA0Y,iBAAF9hD,cAAE,IAAAopC,EAAA0Y,iBAAA1Y,EAAA2Y,sBAAA3Y,EAAApzB,MAAA,OAsdwtE,WAAAgsC,GAAAlY,EAAAC,GAAA,KAAAD,EAAA,OAAAmY,EAtd1tEjiD,cAAE,SAAFA,CAsd40F,cAtd50FA,MAAE,iBAAAs7C,GAAA,MAAA4G,EAAFliD,MAAEiiD,GAAAnM,UAAA1M,EAAFppC,MAAE,UAAFA,MAsd6kJopC,EAAA+Y,aAAAD,EAAA5G,GAA0B,EAtdvmJt7C,CAsdymJ,iBAAAs7C,GAAA,MAAA4G,EAtdzmJliD,MAAEiiD,GAAAnM,UAAA1M,EAAFppC,MAAE,UAAFA,MAsdioJopC,EAAAgZ,sBAAAF,EAAA5G,GAAmC,GAtdpqJt7C,MAAE,YAAFA,MAAE,GAAFA,cAAE,YAAFA,SAsdgsK,MAAA8pC,EAAA,OAAAoY,EAAAnY,EAAA+L,UAAAuM,EAAAtY,EAAAuX,OAAAgB,EAtdhsKtiD,QAAEshD,OAAAlY,EAAFppC,cAAE,QAAAopC,EAAAmZ,WAAFviD,CAsdkpF,cAAAopC,EAAAuY,aAtdlpF3hD,CAsd+rF,iBAAAopC,EAAAuY,cAtd/rF3hD,MAAE,eAAAsiD,EAAFtiD,CAAE,eAAAqiD,GAAFriD,cAAE,8BAAAkiD,EAAAjjC,QAAFjf,CAsd4lG,2BAAAopC,EAAAoZ,cAAAF,EAAAD,GAtd5lGriD,CAsdgrG,gCAAAopC,EAAAqZ,cAAAP,EAAAQ,cAtdhrG1iD,CAsdwwG,8BAAAopC,EAAAuZ,YAAAT,EAAAQ,cAtdxwG1iD,CAsd41G,6BAAAopC,EAAAwZ,WAAAV,EAAAQ,cAtd51G1iD,CAsd86G,4CAAAopC,EAAAyZ,yBAAAX,EAAAQ,aAAAJ,EAAAD,GAtd96GriD,CAsdijH,0CAAAopC,EAAA0Z,uBAAAZ,EAAAQ,aAAAJ,EAAAD,GAtdjjHriD,CAsdgrH,qCAAAopC,EAAA2Z,mBAAAb,EAAAQ,cAtdhrH1iD,CAsdkxH,mCAAAopC,EAAA4Z,iBAAAd,EAAAQ,cAtdlxH1iD,CAsdg3H,wCAAAopC,EAAA6Z,qBAAAf,EAAAQ,cAtdh3H1iD,CAsdu9H,kCAAAopC,EAAA8Z,gBAAAhB,EAAAQ,cAtdv9H1iD,CAsdmjI,gCAAAopC,EAAA+Z,cAAAjB,EAAAQ,cAtdnjI1iD,CAsd2oI,+BAAAopC,EAAAga,aAAAlB,EAAAQ,eAtd3oI1iD,MAAE,UAAAkiD,EAAAmB,WAAFrjD,CAsdm9F,WAAAopC,EAAAoZ,cAAAF,EAAAD,GAAA,MAtdn9FriD,MAAE,aAAAkiD,EAAAoB,UAAFtjD,CAAE,iBAAAkiD,EAAAjjC,SAAA,KAAFjf,CAAE,eAAAopC,EAAAma,YAAArB,EAAAQ,cAAF1iD,CAAE,eAAAopC,EAAAoa,aAAAtB,EAAAQ,aAAA,YAAF1iD,CAAE,mBAAAopC,EAAAqa,gBAAAvB,EAAAQ,eAAF1iD,cAAE,6BAAAopC,EAAAma,YAAArB,EAAAQ,cAAF1iD,CAsd40J,yCAAAopC,EAAAsa,uBAAAxB,EAAAQ,cAtd50J1iD,CAsdw7J,0BAAAopC,EAAAoa,aAAAtB,EAAAQ,cAtdx7J1iD,cAAE,IAAAkiD,EAAAyB,aAAA,IAsd8jK,WAAAC,GAAA9Z,EAAAC,GAAgJ,GAAhJ,EAAAD,IAtdhkK9pC,MAAE,UAAFA,MAAE,EAAA6hD,GAAA,YAAF7hD,MAAE,EAAAgiD,GAAA,YAAAP,IAAFzhD,SAsdgtK,EAAA8pC,EAAA,OAAA+Z,EAAA9Z,EAAA+L,UAAAwM,EAAAvY,EAAAuX,OAAAlY,EAtdhtKppC,sBAAE,IAAAsiD,GAAAlZ,EAAA0Y,gBAAA,MAAF9hD,cAAE6jD,EAsdqsK,WAAAC,GAAAha,EAAAC,GA8xBzoI,GA9xByoI,EAAAD,IAtdvsK9pC,MAAE,SAAFA,CAovCg7B,YApvCh7BA,MAAE,GAAFA,cAAE,YAAFA,MAAE,GAAFA,WAovC8jC,EAAA8pC,EAAA,OAAAia,EAAAha,EAAA+L,UApvC9jC91C,MAAE,GAAFA,MAAE+jD,EAAAC,MAAFhkD,MAAE,GAAFA,MAAE+jD,EAAAE,OAovCsiC,QAAAhY,GAAA,eAAAiY,GAAApa,EAAAC,GAAA,UAAAoa,GAAAra,EAAAC,GAAA,KAAAD,EAAA,OAAA+I,EApvCxiC7yC,cAAE,sBAAFA,MAAE,4BAAAs7C,GAAFt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,qBAAEg4C,EAAAoM,WAAA9I,KAAAtD,EAAAoM,WAAA9I,GAAFt7C,MAAEs7C,EAAA,GAAFt7C,MAAE,0BAAAs7C,GAAFt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA4wE2wDg4C,EAAAqM,cAAA/I,GAAqB,EA5wEhyDt7C,CA4wEkyD,uBAAAs7C,GA5wElyDt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA4wEg0Dg4C,EAAAsM,aAAAhJ,GAAoB,EA5wEp1Dt7C,CA4wEs1D,qBAAAs7C,GA5wEt1Dt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA4wEk3Dg4C,EAAAuM,WAAAjJ,GAAkB,GA5wEp4Dt7C,OA4wEk8D,MAAA8pC,EAAA,OAAAkO,EA5wEl8Dh4C,cAAE,aAAAg4C,EAAAoM,YAAFpkD,MAAE,WAAAg4C,EAAA/5B,SAAFje,CA4wEg3C,aAAAg4C,EAAAwM,WA5wEh3CxkD,CA4wEy5C,UAAAg4C,EAAAyM,QA5wEz5CzkD,CA4wE47C,UAAAg4C,EAAA0M,QA5wE57C1kD,CA4wE+9C,YAAAg4C,EAAA2M,UA5wE/9C3kD,CA4wEsgD,kBAAAg4C,EAAA4M,gBA5wEtgD5kD,CA4wEyjD,gBAAAg4C,EAAA6M,cA5wEzjD7kD,CA4wEwmD,0BAAAg4C,EAAA8M,wBA5wExmD9kD,CA4wE2qD,wBAAAg4C,EAAA+M,sBA5wE3qD/kD,CA4wE0uD,aAAAg4C,EAAAgN,YAAsM,WAAAC,GAAAnb,EAAAC,GAAA,KAAAD,EAAA,OAAAob,EA5wEh7DllD,cAAE,qBAAFA,MAAE,4BAAAs7C,GAAFt7C,MAAEklD,GAAA,MAAAlN,EAAFh4C,qBAAEg4C,EAAAoM,WAAA9I,KAAAtD,EAAAoM,WAAA9I,GAAFt7C,MAAEs7C,EAAA,GAAFt7C,MAAE,yBAAAs7C,GAAFt7C,MAAEklD,GAAA,MAAAlN,EAAFh4C,QAAE,OAAFA,MA4wE+vEg4C,EAAAmN,yBAAA7J,GAAgC,EA5wE/xEt7C,CA4wEiyE,0BAAAs7C,GA5wEjyEt7C,MAAEklD,GAAA,MAAAlN,EAAFh4C,QAAE,OAAFA,MA4wEk0Eg4C,EAAAoN,gBAAA9J,EAAwB,SAAQ,GA5wEl2Et7C,OA4wEq3E,MAAA8pC,EAAA,OAAAkO,EA5wEr3Eh4C,cAAE,aAAAg4C,EAAAoM,YAAFpkD,MAAE,WAAAg4C,EAAA/5B,SAAFje,CA4wEykE,aAAAg4C,EAAAwM,WA5wEzkExkD,CA4wEknE,UAAAg4C,EAAAyM,QA5wElnEzkD,CA4wEqpE,UAAAg4C,EAAA0M,QA5wErpE1kD,CA4wEwrE,YAAAg4C,EAAA2M,UAAuC,WAAAU,GAAAvb,EAAAC,GAAA,KAAAD,EAAA,OAAAwb,EA5wE/tEtlD,cAAE,2BAAFA,MAAE,4BAAAs7C,GAAFt7C,MAAEslD,GAAA,MAAAtN,EAAFh4C,qBAAEg4C,EAAAoM,WAAA9I,KAAAtD,EAAAoM,WAAA9I,GAAFt7C,MAAEs7C,EAAA,GAAFt7C,MAAE,wBAAAs7C,GAAFt7C,MAAEslD,GAAA,MAAAtN,EAAFh4C,QAAE,OAAFA,MA4wE6rFg4C,EAAAuN,6BAAAjK,GAAoC,EA5wEjuFt7C,CA4wEmuF,0BAAAs7C,GA5wEnuFt7C,MAAEslD,GAAA,MAAAtN,EAAFh4C,QAAE,OAAFA,MA4wEowFg4C,EAAAoN,gBAAA9J,EAAwB,QAAO,GA5wEnyFt7C,OA4wE4zF,MAAA8pC,EAAA,OAAAkO,EA5wE5zFh4C,cAAE,aAAAg4C,EAAAoM,YAAFpkD,MAAE,WAAAg4C,EAAA/5B,SAAFje,CA4wEwgF,aAAAg4C,EAAAwM,WA5wExgFxkD,CA4wEijF,UAAAg4C,EAAAyM,QA5wEjjFzkD,CA4wEolF,UAAAg4C,EAAA0M,QA5wEplF1kD,CA4wEunF,YAAAg4C,EAAA2M,UAAuC,WAAAa,GAAA1b,EAAAC,GAAA,OAAAmC,GAAA,WAAAC,GAAA,sCAAAC,GAAA,uCAAAqZ,GAAA3b,EAAAC,GAAA,EAAAD,IA5wE9pF9pC,cAAE,WAAFA,MAAE,YAAFA,QAqgHgoD,CA1jH7tD,IACM0lD,GAAiB,MAAvB,MAAMA,EAKF3pB,QAAU,IAAIlpB,KAEd8yC,cAAgB,WAEhBC,kBAAoB,gBAEpBC,mBAAqB,iBAErBC,eAAiB,iBAEjBC,eAAiB,aAEjBC,cAAgB,gBAEhBC,cAAgB,YAEhBC,mBAAqB,oBAErBC,mBAAqB,gBAErBC,uBAAyB,cAEzBC,2BAA6B,wBAM7BC,eAAiB,aAMjBC,aAAe,WAIfC,oBAAsB,mBAEtBC,gBAAgB38B,EAAO/U,GACnB,MAAO,GAAG+U,YAAgB/U,GAC9B,CAEA2xC,qBAAqB58B,EAAO/U,GACxB,MAAO,GAAG+U,QAAY/U,GAC1B,CACAw2B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFkc,EAAiB,EACpHna,kBADyFvrC,MAAE,CAAA2mD,MACYjB,EAAiBnpD,QAAjBmpD,EAAiBlpD,UAAAC,WAAc,SACzI,OAtDKipD,CAAiB,KA4DnBkB,GAAoB,EAKxB,MAAMC,GACF5wC,MACA0tC,aACAL,UACArkC,QACAokC,WACAX,aACAoE,SACAxsC,GAAKssC,KACLzrD,YAAY8a,EAAO0tC,EAAcL,EAAWrkC,EAASokC,EAAa,CAAC,EAAGX,EAAezsC,EAAO6wC,GACxFxrD,KAAK2a,MAAQA,EACb3a,KAAKqoD,aAAeA,EACpBroD,KAAKgoD,UAAYA,EACjBhoD,KAAK2jB,QAAUA,EACf3jB,KAAK+nD,WAAaA,EAClB/nD,KAAKonD,aAAeA,EACpBpnD,KAAKwrD,SAAWA,CACpB,EAGJ,MAAMC,IAA8BC,SAAgC,CAChEC,SAAS,EACTC,SAAS,IAGPC,IAA+BH,SAAgC,CACjEC,SAAS,EACTC,SAAS,IAGPE,IAAsBJ,SAAgC,CAAEC,SAAS,IACvE,IAIMI,GAAe,MAArB,MAAMA,EACF5a,eAAc70B,OAAO80B,OACrBoB,WAAUl2B,OAAOm2B,OACjBE,aAAYr2B,OAAOs2B,OACnBoZ,SAAQ1vC,OAAO8tC,IAKf6B,eAIAC,kCAAmC,EAEnCxxC,MAEAyxC,KAEAjE,WAEAkE,WAEAC,SAEA5F,sBAEAH,QAAU,EAEVgG,WAAa,EACbC,qBACQvsD,KAAKksD,mCACLlsD,KAAKwsD,mBACLxsD,KAAKksD,kCAAmC,EAEhD,CAEAO,SAAU,EAKVC,gBAAkB,EAElBpD,gBAEAC,cAEAoD,aAAe,KAEfC,WAAa,KAEbpD,wBAEAC,sBAEAoD,oBAAsB,IAAIC,MAE1BC,cAAgB,IAAID,MACpBE,iBAAmB,IAAIF,MAEvBG,YAAc,IAAIH,MAElBI,UAAY,IAAIJ,MAEhBtG,gBAEAH,aAEAY,WAEAkG,kBAEAC,gBAEAC,4BAEAC,0BACAC,wBAAyB,EACzBC,aAAYlxC,OAAOw4B,OACnB2Y,6BAA+BztD,KAAKgsD,MAAMd,oBAM1ChF,UAAawH,GAAQA,EACrB7tD,cACI,MAAM8tD,KAAcrxC,OAAOsxC,OAC3B5tD,KAAKmtD,kBAAoBQ,EAAY1tD,MAAM,4BAC3CD,KAAKotD,gBAAkBO,EAAY1tD,MAAM,0BACzCD,KAAKqtD,4BAA8BM,EAAY1tD,MAAM,uCACrDD,KAAKstD,0BAA4BK,EAAY1tD,MAAM,sCAAmC,EACtFqc,OAAOs3B,MAAwB7qC,KAAK8qC,OACpC7zC,KAAKwyC,QAAQwC,kBAAkB,KAC3B,MAAM6Y,EAAU7tD,KAAKmxC,YAAY+C,cAEjC2Z,EAAQz6C,iBAAiB,YAAapT,KAAK8tD,kBAAmBrC,IAC9DoC,EAAQz6C,iBAAiB,aAAcpT,KAAK+tD,cAAelC,IAC3DgC,EAAQz6C,iBAAiB,QAASpT,KAAK+tD,cAAelC,IACtDgC,EAAQz6C,iBAAiB,aAAcpT,KAAKguD,cAAenC,IAC3DgC,EAAQz6C,iBAAiB,OAAQpT,KAAKguD,cAAenC,IACrDgC,EAAQz6C,iBAAiB,YAAapT,KAAKiuD,kBAAmBnC,IAC9D+B,EAAQz6C,iBAAiB,aAAcpT,KAAKiuD,kBAAmBnC,IAC3D9rD,KAAK2yC,UAAUub,YACfp7C,OAAOM,iBAAiB,UAAWpT,KAAKmuD,iBACxCr7C,OAAOM,iBAAiB,WAAYpT,KAAKouD,kBAAgB,EAGrE,CAEAvH,aAAawH,EAAM3S,GAGX17C,KAAKutD,wBAGLc,EAAK1qC,SACL3jB,KAAK6sD,oBAAoByB,KAAK,CAAE3zC,MAAO0zC,EAAK1zC,MAAO+gC,SAE3D,CACAoL,sBAAsBuH,EAAM3S,GACpB2S,EAAK1qC,SACL3jB,KAAKgtD,iBAAiBsB,KAAK,CAAE3zC,MAAO0zC,EAAK1zC,MAAO+gC,SAExD,CAEAuM,YAAYttC,GACR,OAAO3a,KAAKosD,aAAezxC,GAAS3a,KAAKqsD,WAAa1xC,CAC1D,CACA4zC,YAAY9tB,GACR,MAAM+tB,EAAgB/tB,EAAQ6lB,SACtB6F,OAAM7F,WAAYtmD,MACtBygC,EAAQ0rB,MAAWqC,KACnBxuD,KAAKwmD,gBAAkB2F,GAAQA,EAAKniD,QAAUmiD,EAAK,GAAGniD,OAASs8C,EAAU6F,EAAK,GAAGniD,OAAS,IAE1Fy2B,EAAQisB,iBAAsB8B,IAAkBxuD,KAAKqmD,gBACrDrmD,KAAKqmD,aAAmB,GAAKrmD,KAAK0sD,gBAAmBpG,EAAjC,MAEpBkI,IAAkBxuD,KAAKinD,cACvBjnD,KAAKinD,WAAgB,IAAMX,EAAT,IAE1B,CACA7uC,cACI,MAAMo2C,EAAU7tD,KAAKmxC,YAAY+C,cACjC2Z,EAAQ16C,oBAAoB,YAAanT,KAAK8tD,kBAAmBrC,IACjEoC,EAAQ16C,oBAAoB,aAAcnT,KAAK+tD,cAAelC,IAC9DgC,EAAQ16C,oBAAoB,QAASnT,KAAK+tD,cAAelC,IACzDgC,EAAQ16C,oBAAoB,aAAcnT,KAAKguD,cAAenC,IAC9DgC,EAAQ16C,oBAAoB,OAAQnT,KAAKguD,cAAenC,IACxDgC,EAAQ16C,oBAAoB,YAAanT,KAAKiuD,kBAAmBnC,IACjE+B,EAAQ16C,oBAAoB,aAAcnT,KAAKiuD,kBAAmBnC,IAC9D9rD,KAAK2yC,UAAUub,YACfp7C,OAAOK,oBAAoB,UAAWnT,KAAKmuD,iBAC3Cr7C,OAAOK,oBAAoB,WAAYnT,KAAKouD,kBAEpD,CAEAlH,cAAcuH,EAAUC,GACpB,IAAIC,EAAaF,EAAWzuD,KAAKsmD,QAAUoI,EAE3C,OAAID,IACAE,GAAc3uD,KAAKwmD,iBAEhBmI,GAAc3uD,KAAKssD,UAC9B,CAuBAE,iBAAiBoC,GAAc,IAC3BC,SAAgB,KACZhmB,WAAW,KACP,MAAMyjB,EAAatsD,KAAKmxC,YAAY+C,cAAcxgC,cAAc,6BAC5D44C,IACKsC,IACD5uD,KAAKisD,gBAAiB,GAE1BK,EAAWwC,QAAM,EAExB,EACF,CAAE/1C,SAAU/Y,KAAKwtD,WACxB,CAEAuB,2CACI/uD,KAAKksD,kCAAmC,CAC5C,CAEA/E,cAAcxsC,GACV,OAAOq0C,GAAQr0C,EAAO3a,KAAKosD,WAAYpsD,KAAKqsD,SAChD,CAEAhF,YAAY1sC,GACR,OAAOs0C,GAAMt0C,EAAO3a,KAAKosD,WAAYpsD,KAAKqsD,SAC9C,CAEA/E,WAAW3sC,GACP,OAAOu0C,GAAUv0C,EAAO3a,KAAKosD,WAAYpsD,KAAKqsD,SAAUrsD,KAAKysD,QACjE,CAEAhF,mBAAmB9sC,GACf,OAAOq0C,GAAQr0C,EAAO3a,KAAKspD,gBAAiBtpD,KAAKupD,cACrD,CAEAhC,yBAAyB5sC,EAAO8zC,EAAUC,GACtC,IAAK1uD,KAAKynD,mBAAmB9sC,IAAU3a,KAAKmnD,cAAcxsC,KAAW3a,KAAKsnD,WAAW3sC,GACjF,OAAO,EAEX,IAAIw0C,EAAenvD,KAAKmsD,KAAKsC,GAAUC,EAAW,GAClD,IAAKS,EAAc,CACf,MAAMC,EAAcpvD,KAAKmsD,KAAKsC,EAAW,GACzCU,EAAeC,GAAeA,EAAYA,EAAYplD,OAAS,EACnE,CACA,OAAOmlD,IAAiBnvD,KAAKqnD,YAAY8H,EAAa/H,aAC1D,CAEAI,uBAAuB7sC,EAAO8zC,EAAUC,GACpC,IAAK1uD,KAAK0nD,iBAAiB/sC,IAAU3a,KAAKqnD,YAAY1sC,KAAW3a,KAAKsnD,WAAW3sC,GAC7E,OAAO,EAEX,IAAI00C,EAAWrvD,KAAKmsD,KAAKsC,GAAUC,EAAW,GAC9C,IAAKW,EAAU,CACX,MAAMC,EAAUtvD,KAAKmsD,KAAKsC,EAAW,GACrCY,EAAWC,GAAWA,EAAQ,EAClC,CACA,OAAOD,IAAarvD,KAAKmnD,cAAckI,EAASjI,aACpD,CAEAM,iBAAiB/sC,GACb,OAAOs0C,GAAMt0C,EAAO3a,KAAKspD,gBAAiBtpD,KAAKupD,cACnD,CAEA5B,qBAAqBhtC,GACjB,OAAOu0C,GAAUv0C,EAAO3a,KAAKspD,gBAAiBtpD,KAAKupD,cAAevpD,KAAKysD,QAC3E,CAWArE,uBAAuBztC,GAGnB,OAAO3a,KAAKspD,kBAAoBtpD,KAAKupD,eAAiB5uC,IAAU3a,KAAKspD,eACzE,CAEA1B,gBAAgBjtC,GACZ,OAAOq0C,GAAQr0C,EAAO3a,KAAK2sD,aAAc3sD,KAAK4sD,WAClD,CAEA/E,cAAcltC,GACV,OAAOs0C,GAAMt0C,EAAO3a,KAAK2sD,aAAc3sD,KAAK4sD,WAChD,CAEA9E,aAAantC,GACT,OAAOu0C,GAAUv0C,EAAO3a,KAAK2sD,aAAc3sD,KAAK4sD,WAAY5sD,KAAKysD,QACrE,CAEAtE,gBAAgBxtC,GACZ,IAAK3a,KAAKysD,QACN,OAAO,KAEX,GAAIzsD,KAAKosD,aAAezxC,GAAS3a,KAAKqsD,WAAa1xC,EAC/C,MAAO,GAAG3a,KAAKmtD,qBAAqBntD,KAAKotD,kBAExC,GAAIptD,KAAKosD,aAAezxC,EACzB,OAAO3a,KAAKmtD,kBAEX,GAAIntD,KAAKqsD,WAAa1xC,EACvB,OAAO3a,KAAKotD,gBAEhB,GAA6B,OAAzBptD,KAAKspD,iBAAmD,OAAvBtpD,KAAKupD,cAAwB,CAC9D,GAAI5uC,IAAU3a,KAAKspD,iBAAmB3uC,IAAU3a,KAAKupD,cACjD,MAAO,GAAGvpD,KAAKqtD,+BAA+BrtD,KAAKstD,4BAElD,GAAI3yC,IAAU3a,KAAKspD,gBACpB,OAAOtpD,KAAKqtD,4BAEX,GAAI1yC,IAAU3a,KAAKupD,cACpB,OAAOvpD,KAAKstD,yBAEpB,CACA,OAAO,IACX,CAKAS,cAAiBrS,IACb,GAAI17C,KAAKisD,gBAAiC,UAAfvQ,EAAMlpC,KAC7BxS,KAAKisD,gBAAiB,OAI1B,GAAIvQ,EAAMtwB,QAAUprB,KAAKysD,QAAS,CAC9B,MAAM4B,EAAOruD,KAAKuvD,oBAAoB7T,EAAMtwB,QACxCijC,GACAruD,KAAKwyC,QAAQ8J,IAAI,IAAMt8C,KAAK+sD,cAAcuB,KAAK,CAAE3zC,MAAO0zC,EAAK1qC,QAAU0qC,EAAO,KAAM3S,UAE5F,GAEJoS,kBAAqBpS,IACjB,IAAK17C,KAAKysD,QACN,OACJ,MAAMrhC,EAASokC,GAAqB9T,GAC9B2S,EAAOjjC,EAASprB,KAAKuvD,oBAAoBnkC,GAAU,KACrDA,IAAWswB,EAAMtwB,SACjBprB,KAAKutD,wBAAyB,GAI9BkC,GAAe/T,EAAMtwB,SACrBswB,EAAME,iBAEV57C,KAAKwyC,QAAQ8J,IAAI,IAAMt8C,KAAK+sD,cAAcuB,KAAK,CAAE3zC,MAAO0zC,GAAM1qC,QAAU0qC,EAAO,KAAM3S,UAAQ,EAMjGsS,cAAiBtS,IAEW,OAApB17C,KAAK4sD,YAAuB5sD,KAAKysD,UACd,SAAf/Q,EAAMlpC,OACNxS,KAAKutD,wBAAyB,GAK9B7R,EAAMtwB,QACNprB,KAAKuvD,oBAAoB7T,EAAMtwB,WAC7BswB,EAAMgU,gBACJ1vD,KAAKuvD,oBAAoB7T,EAAMgU,iBACnC1vD,KAAKwyC,QAAQ8J,IAAI,IAAMt8C,KAAK+sD,cAAcuB,KAAK,CAAE3zC,MAAO,KAAM+gC,WAAQ,EAQlFuS,kBAAqBvS,IACjB,IAAK17C,KAAKysD,QACN,OACJzsD,KAAKutD,wBAAyB,EAE9B,MAAMc,EAAO3S,EAAMtwB,QAAUprB,KAAKuvD,oBAAoB7T,EAAMtwB,SACvDijC,IAASruD,KAAKsnD,WAAW+G,EAAKjH,eAGnCpnD,KAAKwyC,QAAQ8J,IAAI,KACbt8C,KAAKitD,YAAYqB,KAAK,CAClB3zC,MAAO0zC,EAAK7C,SACZ9P,SACH,EACJ,EAGLyS,gBAAmBzS,IACf,IAAK17C,KAAKysD,QACN,OACJ,MAAMkD,EAAcF,GAAe/T,EAAMtwB,QACpCukC,EAODA,EAAYC,QAAQ,wBAA0B5vD,KAAKmxC,YAAY+C,eAKnEl0C,KAAKwyC,QAAQ8J,IAAI,KACb,MAAM+R,EAAOruD,KAAKuvD,oBAAoBI,GACtC3vD,KAAKktD,UAAUoB,KAAK,CAAE3zC,MAAO0zC,GAAM7C,UAAY,KAAM9P,SAAO,GAZ5D17C,KAAKwyC,QAAQ8J,IAAI,KACbt8C,KAAKktD,UAAUoB,KAAK,CAAE3zC,MAAO,KAAM+gC,SAAO,EAYjD,EAGL0S,iBAAoB1S,IAChB,MAAMtwB,EAASokC,GAAqB9T,GAChCtwB,GACAprB,KAAKmuD,gBAAgB,CAAE/iC,UAAQ,EAIvCmkC,oBAAoB1B,GAChB,MAAMQ,EAAOoB,GAAe5B,GAC5B,GAAIQ,EAAM,CACN,MAAMX,EAAMW,EAAKzgB,aAAa,gBACxBiiB,EAAMxB,EAAKzgB,aAAa,gBAC9B,GAAI8f,GAAOmC,EACP,OAAO7vD,KAAKmsD,KAAKjyC,SAASwzC,IAAMxzC,SAAS21C,GAEjD,CACA,OAAO,IACX,CACA5f,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF6d,EAAe,EAClH9b,iBAtdyFvrC,MAAE,CAAA8N,KAsdJu5C,EAAe5d,UAAA,8BAAA+B,UAAA,wBAAAG,OAAA,CAAA31B,MAAA,QAAAyxC,KAAA,OAAAjE,WAAA,aAAAkE,WAAA,aAAAC,SAAA,WAAA5F,sBAAA,wBAAAH,QAAA,UAAAgG,WAAA,aAAAG,QAAA,UAAAC,gBAAA,kBAAApD,gBAAA,kBAAAC,cAAA,gBAAAoD,aAAA,eAAAC,WAAA,aAAApD,wBAAA,0BAAAC,sBAAA,yBAAAqG,QAAA,CAAAjD,oBAAA,sBAAAE,cAAA,gBAAAC,iBAAA,mBAAAC,YAAA,cAAAC,UAAA,aAAA1W,SAAA,oBAAAh1B,SAAA,CAtdb9c,OAAEqrD,MAAAliB,GAAAO,MAAA,GAAAC,KAAA,GAAAC,OAAA,ihBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAAF9pC,MAAE,EAAA0hD,GAAA,YAAF1hD,MAAE,EAAA4jD,GAAA,WAAAvC,IAAA,GAAFrhD,MAAE,YAAFA,MAAE,GAAFA,cAAE,YAAFA,MAAE,GAAFA,cAAE,YAAFA,MAAE,GAAFA,cAAE,YAAFA,MAAE,IAAFA,SAsdmvL,EAAA8pC,IAtdnvL9pC,MAAE+pC,EAAA+X,gBAAA/X,EAAAgY,sBAAA,MAAF/hD,cAAE+pC,EAAA0d,MAAFznD,MAAE,GAAFA,MAAE,KAAA+pC,EAAA0e,mBAAFzoD,cAAE,IAAA+pC,EAAA+a,wBAAA,MAAF9kD,cAAE,KAAA+pC,EAAA2e,iBAAF1oD,cAAE,IAAA+pC,EAAAgb,sBAAA,MAAF/kD,cAAE,KAAA+pC,EAAA4e,6BAAF3oD,cAAE,IAAA+pC,EAAAgf,6BAAA,IAAAhf,EAAA+a,wBAAA,MAAF9kD,cAAE,KAAA+pC,EAAA6e,2BAAF5oD,cAAE,IAAA+pC,EAAAgf,6BAAA,IAAAhf,EAAAgb,sBAAA,MAsd0uL,EAAAjS,aAAA,CAA06T0E,OAAO5L,OAAA,y2TAAAxB,cAAA,EAAAyB,gBAAA,IACzvf,OAvaKwb,CAAe,KAydrB,SAASiE,GAAYja,GACjB,MAA0B,OAAnBA,GAAM5B,QACjB,CAKA,SAASsb,GAAe5B,GACpB,IAAIQ,EACJ,OAAI2B,GAAYnC,GACZQ,EAAOR,EAEFmC,GAAYnC,EAAQtM,YACzB8M,EAAOR,EAAQtM,WAEVyO,GAAYnC,EAAQtM,YAAYA,cACrC8M,EAAOR,EAAQtM,WAAWA,YAEe,MAAtC8M,GAAMzgB,aAAa,gBAA0BygB,EAAO,IAC/D,CAEA,SAASW,GAAQr0C,EAAO6T,EAAO/U,GAC3B,OAAe,OAARA,GAAgB+U,IAAU/U,GAAOkB,EAAQlB,GAAOkB,IAAU6T,CACrE,CAEA,SAASygC,GAAMt0C,EAAO6T,EAAO/U,GACzB,OAAiB,OAAV+U,GAAkBA,IAAU/U,GAAOkB,GAAS6T,GAAS7T,IAAUlB,CAC1E,CAEA,SAASy1C,GAAUv0C,EAAO6T,EAAO/U,EAAKw2C,GAClC,OAAQA,GACM,OAAVzhC,GACQ,OAAR/U,GACA+U,IAAU/U,GACVkB,GAAS6T,GACT7T,GAASlB,CACjB,CAKA,SAAS+1C,GAAqB9T,GAC1B,MAAMwU,EAAgBxU,EAAMyU,eAAe,GAC3C,OAAO98C,SAAS+8C,iBAAiBF,EAAcG,QAASH,EAAcI,QAC1E,CAGA,MAAMC,GACF/hC,MACA/U,IAMA+2C,8BACA3wD,YAEA2uB,EAEA/U,GACIzZ,KAAKwuB,MAAQA,EACbxuB,KAAKyZ,IAAMA,CACf,EAEJ,IAIMg3C,GAAqB,MAA3B,MAAMA,EACFC,UACAC,SACAC,kBAAoB,IAAIr5C,KAExBs5C,iBAAmB7wD,KAAK4wD,kBACxB/wD,YAEA6wD,EAAWC,GACP3wD,KAAK0wD,UAAYA,EACjB1wD,KAAK2wD,SAAWA,EAChB3wD,KAAK0wD,UAAYA,CACrB,CAMAI,gBAAgBn2C,EAAOoH,GACnB,MAAMgvC,EAAW/wD,KAAK0wD,UACtB1wD,KAAK0wD,UAAY/1C,EACjB3a,KAAK4wD,kBAAkBv2C,KAAK,CAAEq2C,UAAW/1C,EAAOoH,SAAQgvC,YAC5D,CACAt5C,cACIzX,KAAK4wD,kBAAkBl5C,UAC3B,CACAs5C,qBAAqBC,GACjB,OAAOjxD,KAAK2wD,SAASO,eAAeD,IAASjxD,KAAK2wD,SAAShpC,QAAQspC,EACvE,CACAhhB,iBAAW,SAAA/B,GA3mB8ExpC,OAAE,EA4mB3FurC,kBA5mByFvrC,MAAE,CAAA2mD,MA4mBYoF,EAAqBxvD,QAArBwvD,EAAqBvvD,YAC/H,OA/BKuvD,CAAqB,KAuCrBU,GAA2B,MAAjC,MAAMA,UAAoCV,GACtC5wD,YAAYuxD,GACRtxD,MAAM,KAAMsxD,EAChB,CAKA5uD,IAAIyuD,GACAnxD,MAAMgxD,gBAAgBG,EAAMjxD,KAChC,CAEA2nB,UACI,OAAyB,MAAlB3nB,KAAK0wD,WAAqB1wD,KAAKgxD,qBAAqBhxD,KAAK0wD,UACpE,CAKAW,aACI,OAAyB,MAAlBrxD,KAAK0wD,SAChB,CAEAY,QACI,MAAMA,EAAQ,IAAIH,EAA4BnxD,KAAK2wD,UACnDW,SAAMR,gBAAgB9wD,KAAK0wD,UAAW1wD,MAC/BsxD,CACX,CACArhB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFijB,GAjpBVzsD,MAipBuDC,OAAc,EAC9JsrC,kBAlpByFvrC,MAAE,CAAA2mD,MAkpBY8F,EAA2BlwD,QAA3BkwD,EAA2BjwD,YACrI,OA9BKiwD,CAA2B,KAyGjC,MAAMI,GAA2C,CAC7C9a,QAASga,GACTroB,KAAM,CAAC,CAAC,IAAIopB,MAAY,IAAIC,MAAYhB,IAAwBiB,OAChEC,WAVJ,SAASC,GAAwCC,EAAQT,GACrD,OAAOS,GAAU,IAAIV,GAA4BC,EACrD,GAyBMU,GAAoC,IAAI7gB,MAAe,qCAsF7D,IAAI8gB,GAAkB,EAKhBC,GAAY,MAAlB,MAAMA,EACFC,sBAAqB31C,OAAO41C,OAC5BC,gBAAe71C,OAAO81C,MAAkB,CAAE3gB,UAAU,IACpD4gB,gBAAe/1C,OAAOo1C,MAAa,CAAEjgB,UAAU,IAC/C6gB,QAAOh2C,OAAOi2C,MAAgB,CAAE9gB,UAAU,IAC1C+gB,kBAAiBl2C,OAAOw1C,GAAmC,CAAErgB,UAAU,IACvEghB,sBAAwBlf,MAAamf,MAErCC,qBAIA,cAAI7J,GACA,OAAO9oD,KAAK4yD,WAChB,CACA,cAAI9J,CAAWnuC,GACX,MAAMk4C,EAAgB7yD,KAAK4yD,YACrBE,EAAY9yD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,KACjF3a,KAAKqyD,aAAaY,QACtBjzD,KAAK4yD,YAAc5yD,KAAKqyD,aAAaa,UAAUJ,EAAW9yD,KAAKopD,QAASppD,KAAKmpD,SACxEnpD,KAAKmzD,qBAAqBN,EAAe7yD,KAAK4yD,cAC/C5yD,KAAKozD,OAEb,CACAR,YAEA,YAAIjwC,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GAEL3a,KAAKqzD,UADL14C,aAAiB41C,GACA51C,EAGA3a,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,IAExF3a,KAAKszD,WAAWtzD,KAAKqzD,UACzB,CACAA,UAEA,WAAIjK,GACA,OAAOppD,KAAKuzD,QAChB,CACA,WAAInK,CAAQzuC,GACR3a,KAAKuzD,SAAWvzD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA44C,SAEA,WAAIpK,GACA,OAAOnpD,KAAKwzD,QAChB,CACA,WAAIrK,CAAQxuC,GACR3a,KAAKwzD,SAAWxzD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA64C,SAEAtK,WAEAG,UAEAC,gBAEAC,cAEAC,wBAEAC,sBAEAgK,WAAa,KAEbC,eAAiB,IAAI5G,MAErB6G,eAAiB,IAAI7G,MAErBG,YAAc,IAAIH,MAKlBI,UAAY,IAAIJ,MAEhBE,iBAAmB,IAAIF,MAEvB8G,iBAEAC,YAEAC,OAEAC,iBAEAC,YAEAC,UAEAC,sBAEAC,oBAEAC,cAEAC,YAEAC,SAEAC,WAEAC,UACA30D,eACIyc,SAAOs3B,MAAwB7qC,KAAK0rD,MASpCz0D,KAAK4yD,YAAc5yD,KAAKqyD,aAAaY,OACzC,CACAyB,qBACI10D,KAAKyyD,sBAAwBzyD,KAAKqyD,aAAasC,cAC1C9wD,QAAK+wD,MAAU,OACftsD,UAAU,IAAMtI,KAAKozD,QAC9B,CACA7E,YAAY9tB,GACR,MAAMo0B,EAAmBp0B,EAAQ6oB,iBAAsB7oB,EAAQ8oB,cAC3DsL,IAAqBA,EAAiBC,aACtC90D,KAAKszD,WAAWtzD,KAAK2iB,UAErB8d,EAAQgzB,aAAkBzzD,KAAKyzD,YAC/BzzD,KAAK+0D,eAEb,CACAt9C,cACIzX,KAAKyyD,sBAAsBhe,aAC/B,CAEAsU,cAAcrN,GACV,MAAMuV,EAAOvV,EAAM/gC,MACbq6C,EAAeh1D,KAAKi1D,uBAAuBhE,GACjD,IAAIiE,EACAC,EACAn1D,KAAKqzD,qBAAqB9C,IAC1B2E,EAAiBl1D,KAAKo1D,uBAAuBp1D,KAAKqzD,UAAU7kC,OAC5D2mC,EAAen1D,KAAKo1D,uBAAuBp1D,KAAKqzD,UAAU55C,MAG1Dy7C,EAAiBC,EAAen1D,KAAKo1D,uBAAuBp1D,KAAKqzD,YAEjE6B,IAAmBjE,GAAQkE,IAAiBlE,IAC5CjxD,KAAK0zD,eAAepF,KAAK0G,GAE7Bh1D,KAAK2zD,eAAerF,KAAK,CAAE3zC,MAAOq6C,EAActZ,MAAOA,EAAMA,QAC7D17C,KAAK+0D,gBACL/0D,KAAKiyD,mBAAmBoD,cAC5B,CAWAC,kBAAkB5Z,GACd,MACMmX,EAAgB7yD,KAAK4yD,YAC3B5yD,KAAK8oD,WAAa9oD,KAAKi1D,uBAFTvZ,EAAM/gC,OAGhB3a,KAAKqyD,aAAakD,YAAY1C,EAAe7yD,KAAK8oD,aAClD9oD,KAAKgtD,iBAAiBsB,KAAKtuD,KAAK4yD,YAExC,CAEA4C,2BAA2B9Z,GAIvB,MAAMmX,EAAgB7yD,KAAK4yD,YACrB6C,EAAQz1D,KAAK01D,SACnB,OAAQha,EAAMia,SACV,KAAKC,MACD51D,KAAK8oD,WAAa9oD,KAAKqyD,aAAawD,gBAAgB71D,KAAK4yD,YAAa6C,EAAQ,GAAI,GAClF,MACJ,KAAKK,MACD91D,KAAK8oD,WAAa9oD,KAAKqyD,aAAawD,gBAAgB71D,KAAK4yD,YAAa6C,GAAQ,EAAK,GACnF,MACJ,KAAKM,MACD/1D,KAAK8oD,WAAa9oD,KAAKqyD,aAAawD,gBAAgB71D,KAAK4yD,aAAa,GACtE,MACJ,KAAKoD,MACDh2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAawD,gBAAgB71D,KAAK4yD,YAAa,GACtE,MACJ,KAAKqD,MACDj2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAawD,gBAAgB71D,KAAK4yD,YAAa,EAAI5yD,KAAKqyD,aAAa6D,QAAQl2D,KAAK4yD,cACzG,MACJ,KAAKuD,MACDn2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAawD,gBAAgB71D,KAAK4yD,YAAa5yD,KAAKqyD,aAAa+D,kBAAkBp2D,KAAK4yD,aAC3G5yD,KAAKqyD,aAAa6D,QAAQl2D,KAAK4yD,cACnC,MACJ,KAAKyD,MACDr2D,KAAK8oD,WAAapN,EAAM4a,OAClBt2D,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,aAAa,GACrD5yD,KAAKqyD,aAAamE,kBAAkBx2D,KAAK4yD,aAAa,GAC5D,MACJ,KAAK6D,MACDz2D,KAAK8oD,WAAapN,EAAM4a,OAClBt2D,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YAAa,GACrD5yD,KAAKqyD,aAAamE,kBAAkBx2D,KAAK4yD,YAAa,GAC5D,MACJ,KAAK8D,MACL,KAAKC,MAUD,OATA32D,KAAK2yD,sBAAuB,OACxB3yD,KAAK42D,WAAW52D,KAAK4yD,cAMrBlX,EAAME,kBAGd,KAAKib,MAgBD,YAdwB,MAApB72D,KAAKq0D,eAAuB,EAACyC,OAAepb,KAC5C17C,KAAK+0D,gBAGD/0D,KAAKyzD,WACLzzD,KAAKktD,UAAUoB,KAAK,CAAE3zC,MAAO,KAAM+gC,WAGnC17C,KAAK0zD,eAAepF,KAAK,MACzBtuD,KAAK2zD,eAAerF,KAAK,CAAE3zC,MAAO,KAAM+gC,WAE5CA,EAAME,iBACNF,EAAMqb,oBAGd,QAEI,OAEJ/2D,KAAKqyD,aAAakD,YAAY1C,EAAe7yD,KAAK8oD,cAClD9oD,KAAKgtD,iBAAiBsB,KAAKtuD,KAAK8oD,YAChC9oD,KAAKksD,oCAGTxQ,EAAME,gBACV,CAEAob,yBAAyBtb,IACjBA,EAAMia,UAAYgB,OAASjb,EAAMia,UAAYe,SACzC12D,KAAK2yD,sBAAwB3yD,KAAK42D,WAAW52D,KAAK4yD,cAClD5yD,KAAK+oD,cAAc,CAAEpuC,MAAO3a,KAAKqyD,aAAa6D,QAAQl2D,KAAK4yD,aAAclX,UAE7E17C,KAAK2yD,sBAAuB,EAEpC,CAEAS,QACIpzD,KAAKszD,WAAWtzD,KAAK2iB,UACrB3iB,KAAKu0D,WAAav0D,KAAKi3D,qBAAqBj3D,KAAKqyD,aAAaY,SAC9DjzD,KAAK6zD,YAAc7zD,KAAKmyD,aAAa+E,QAAQC,WACvCn3D,KAAKqyD,aAAa+E,OAAOp3D,KAAK8oD,WAAY9oD,KAAKmyD,aAAa+E,QAAQC,YACpEn3D,KAAKqyD,aACFgF,cAAc,SAASr3D,KAAKqyD,aAAaiF,SAASt3D,KAAK8oD,aAAayO,oBAC7E,IAAIC,EAAex3D,KAAKqyD,aAAaoF,WAAWz3D,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAAa9oD,KAAKqyD,aAAaiF,SAASt3D,KAAK8oD,YAAa,GACzI9oD,KAAK+zD,kBApRS,EAsRN/zD,KAAKqyD,aAAasF,aAAaH,GAC/Bx3D,KAAKqyD,aAAauF,qBAvRZ,EAyRd53D,KAAK63D,gBACL73D,KAAK83D,mBACL93D,KAAKiyD,mBAAmBoD,cAC5B,CAEA7I,iBAAiBoC,GACb5uD,KAAK4zD,iBAAiBpH,iBAAiBoC,EAC3C,CAEA1C,mCACIlsD,KAAK4zD,iBAAiB7E,0CAC1B,CAEAgJ,iBAAkBrc,QAAO/gC,MAAO0zC,IAC5B,GAAIruD,KAAKwyD,eAAgB,CAGrB,MAAM73C,EAAQ0zC,EAAOA,EAAK7C,SAAW,KAC/BwM,EAAeh4D,KAAKwyD,eAAeyF,cAAct9C,EAAO3a,KAAK2iB,SAAU+4B,GAG7E,GAFA17C,KAAKo0D,cAAgBp0D,KAAKi3D,qBAAqBe,EAAaxpC,OAC5DxuB,KAAKq0D,YAAcr0D,KAAKi3D,qBAAqBe,EAAav+C,KACtDzZ,KAAKyzD,YAAc94C,EAAO,CAC1B,MAAMu9C,EAAYl4D,KAAKwyD,eAAe2F,aAAan4D,KAAKyzD,WAAW94C,MAAO3a,KAAK2iB,SAAUhI,EAAO+gC,GAC5Fwc,IACAl4D,KAAKo0D,cAAgBp0D,KAAKi3D,qBAAqBiB,EAAU1pC,OACzDxuB,KAAKq0D,YAAcr0D,KAAKi3D,qBAAqBiB,EAAUz+C,KAE/D,CAKAzZ,KAAKiyD,mBAAmBmG,eAC5B,CACJ,CAKAnP,WAAWvN,GACP,GAAK17C,KAAKyzD,WAEV,GAAI/X,EAAM/gC,MAAO,CAEb,MAAM09C,EAAiBr4D,KAAKwyD,gBAAgB2F,aAAan4D,KAAKyzD,WAAW94C,MAAO3a,KAAK2iB,SAAU+4B,EAAM/gC,MAAO+gC,EAAMA,OAClH17C,KAAKktD,UAAUoB,KAAK,CAAE3zC,MAAO09C,GAAkB,KAAM3c,MAAOA,EAAMA,OACtE,MAEI17C,KAAKktD,UAAUoB,KAAK,CAAE3zC,MAAO,KAAM+gC,MAAOA,EAAMA,OAExD,CAKAuZ,uBAAuBqD,GACnB,OAAOt4D,KAAKqyD,aAAaoF,WAAWz3D,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAAa9oD,KAAKqyD,aAAaiF,SAASt3D,KAAK8oD,YAAawP,EACjI,CAEAT,gBACI,MAAMU,EAAiBv4D,KAAKqyD,aAAauF,oBACnCY,EAAiBx4D,KAAKqyD,aAAaoG,kBAAkB,UAG3D,IAAIC,EAFiB14D,KAAKqyD,aAAaoG,kBAAkB,QAE7Bh4D,IAAI,CAACioD,EAAM//C,MAC1B+/C,OAAMC,OAAQ6P,EAAe7vD,GAAIqW,GAAI+yC,QAElD/xD,KAAKw0D,UAAYkE,EAASC,MAAMJ,GAAgB5lD,OAAO+lD,EAASC,MAAM,EAAGJ,GAC7E,CAEAT,mBACI,MAAMc,EAAc54D,KAAKqyD,aAAa+D,kBAAkBp2D,KAAK8oD,YACvD+P,EAAY74D,KAAKqyD,aAAayG,eACpC94D,KAAK8zD,OAAS,CAAC,IACf,QAASnrD,EAAI,EAAG0lD,EAAOruD,KAAK+zD,iBAAkBprD,EAAIiwD,EAAajwD,IAAK0lD,IAAQ,CAnW9D,GAoWNA,IACAruD,KAAK8zD,OAAOpnD,KAAK,IACjB2hD,EAAO,GAEX,MAAM4C,EAAOjxD,KAAKqyD,aAAaoF,WAAWz3D,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAAa9oD,KAAKqyD,aAAaiF,SAASt3D,KAAK8oD,YAAangD,EAAI,GACjIgb,EAAU3jB,KAAK+4D,kBAAkB9H,GACjCjJ,EAAYhoD,KAAKqyD,aAAa+E,OAAOnG,EAAMjxD,KAAKmyD,aAAa+E,QAAQ8B,eACrEC,EAAcj5D,KAAKqpD,UAAYrpD,KAAKqpD,UAAU4H,EAAM,cAAWlhD,EACrE/P,KAAK8zD,OAAO9zD,KAAK8zD,OAAO9pD,OAAS,GAAG0C,KAAK,IAAI6+C,GAAgB5iD,EAAI,EAAGkwD,EAAUlwD,GAAIq/C,EAAWrkC,EAASs1C,EAAaj5D,KAAKi3D,qBAAqBhG,GAAOA,GACxJ,CACJ,CAEA8H,kBAAkB9H,GACd,QAAUA,KACJjxD,KAAKopD,SAAWppD,KAAKqyD,aAAakD,YAAYtE,EAAMjxD,KAAKopD,UAAY,MACrEppD,KAAKmpD,SAAWnpD,KAAKqyD,aAAakD,YAAYtE,EAAMjxD,KAAKmpD,UAAY,MACrEnpD,KAAKkpD,YAAclpD,KAAKkpD,WAAW+H,GAC7C,CAKAmE,uBAAuBnE,GACnB,OAAOA,GAAQjxD,KAAKmzD,qBAAqBlC,EAAMjxD,KAAK8oD,YAC9C9oD,KAAKqyD,aAAa6D,QAAQjF,GAC1B,IACV,CAEAkC,qBAAqB+F,EAAIC,GACrB,SAAUD,IACNC,GACAn5D,KAAKqyD,aAAaiF,SAAS4B,IAAOl5D,KAAKqyD,aAAaiF,SAAS6B,IAC7Dn5D,KAAKqyD,aAAaqF,QAAQwB,IAAOl5D,KAAKqyD,aAAaqF,QAAQyB,GACnE,CAEAlC,qBAAqBhG,GACjB,GAAIA,EAAM,CAGN,MAAMmI,EAAOp5D,KAAKqyD,aAAaqF,QAAQzG,GACjCoI,EAAQr5D,KAAKqyD,aAAaiF,SAASrG,GACnCqI,EAAMt5D,KAAKqyD,aAAa6D,QAAQjF,GACtC,OAAO,IAAIsI,KAAKH,EAAMC,EAAOC,GAAKE,SACtC,CACA,OAAO,IACX,CAEA9D,SACI,OAAO11D,KAAKsyD,MAA4B,QAApBtyD,KAAKsyD,KAAK33C,KAClC,CAEA24C,WAAWmG,GACHA,aAAyBlJ,IACzBvwD,KAAKg0D,YAAch0D,KAAKi3D,qBAAqBwC,EAAcjrC,OAC3DxuB,KAAKi0D,UAAYj0D,KAAKi3D,qBAAqBwC,EAAchgD,KACzDzZ,KAAKs0D,UAAW,IAGhBt0D,KAAKg0D,YAAch0D,KAAKi0D,UAAYj0D,KAAKi3D,qBAAqBwC,GAC9Dz5D,KAAKs0D,UAAW,GAEpBt0D,KAAKk0D,sBAAwBl0D,KAAKi3D,qBAAqBj3D,KAAKspD,iBAC5DtpD,KAAKm0D,oBAAsBn0D,KAAKi3D,qBAAqBj3D,KAAKupD,cAC9D,CAEAqN,WAAW3F,GACP,OAAQjxD,KAAKkpD,YAAclpD,KAAKkpD,WAAW+H,EAC/C,CAEA8D,gBACI/0D,KAAKo0D,cAAgBp0D,KAAKq0D,YAAc,IAC5C,CACApkB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF8jB,EAAY,EAC/G/hB,iBApvCyFvrC,MAAE,CAAA8N,KAovCJw/C,EAAY7jB,UAAA,qBAAAmJ,UAAA,SAAA9I,EAAAC,GAA8oB,GAA9oB,EAAAD,GApvCV9pC,MAovCyoBqnD,GAAe,KAAAvd,EAAA,KAAA6H,EApvCxpB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAmlB,iBAAAvd,EAAAz1B,MAAA,GAAAyvB,OAAA,CAAAyY,WAAA,aAAAnmC,SAAA,WAAAymC,QAAA,UAAAD,QAAA,UAAAD,WAAA,aAAAG,UAAA,YAAAC,gBAAA,kBAAAC,cAAA,gBAAAC,wBAAA,0BAAAC,sBAAA,wBAAAgK,WAAA,cAAA3D,QAAA,CAAA4D,eAAA,iBAAAC,eAAA,iBAAA1G,YAAA,cAAAC,UAAA,YAAAF,iBAAA,oBAAAxW,SAAA,iBAAAh1B,SAAA,CAAF9c,OAAE0pC,MAAA,EAAAC,KAAA,GAAAC,OAAA,mhBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAAF9pC,MAAE,YAAFA,CAovC4yB,YApvC5yBA,CAovC21B,QApvC31BA,MAAE,EAAA8jD,GAAA,WAAArC,IAAFzhD,cAAE,UAAFA,MAAE,UAAFA,gBAAE,aAAFA,MAAE,+BAAAs7C,GAAA,OAovCk3DvR,EAAAsa,cAAA/I,EAAqB,EApvCz4Dt7C,CAovC24D,4BAAAs7C,GAAA,OAAgCvR,EAAA6mB,kBAAAtV,EAAyB,EApvCp8Dt7C,CAovCs8D,yBAAAs7C,GAAA,OAA6BvR,EAAAspB,gBAAA/X,EAAuB,EApvC1/Dt7C,CAovC4/D,uBAAAs7C,GAAA,OAA2BvR,EAAAwe,YAAAqB,KAAAtO,EAAwB,EApvC/iEt7C,CAovCijE,qBAAAs7C,GAAA,OAAyBvR,EAAAwa,WAAAjJ,EAAkB,EApvC5lEt7C,CAovC8lE,iBAAAs7C,GAAA,OAAqBvR,EAAAuoB,yBAAAhX,EAAgC,EApvCnpEt7C,CAovCqpE,mBAAAs7C,GAAA,OAAuBvR,EAAA+mB,2BAAAxV,EAAkC,GApvC9sEt7C,WAovCuuE,EAAA8pC,IApvCvuE9pC,MAAE,GAAFA,MAAE+pC,EAAA+lB,WAAF9vD,MAAE,GAAFA,MAAE,QAAA+pC,EAAAolB,YAAFnvD,CAovCmwC,OAAA+pC,EAAAqlB,OApvCnwCpvD,CAovC+xC,aAAA+pC,EAAA8lB,WApvC/xC7vD,CAovCs0C,aAAA+pC,EAAAulB,YApvCt0CtvD,CAovC82C,WAAA+pC,EAAAwlB,UApvC92CvvD,CAovCk5C,kBAAA+pC,EAAAylB,sBApvCl5CxvD,CAovCw8C,gBAAA+pC,EAAA0lB,oBApvCx8CzvD,CAovC0/C,eAAA+pC,EAAA2lB,cApvC1/C1vD,CAovCqiD,aAAA+pC,EAAA4lB,YApvCriD3vD,CAovC4kD,UAAA+pC,EAAA6lB,SApvC5kD5vD,CAovC6mD,0BApvC7mDA,CAovCqpD,aAAA+pC,EAAA4jB,aAAA6D,QAAAznB,EAAAqa,YAAA,EApvCrpDpkD,CAovCqtD,0BAAA+pC,EAAA+a,wBApvCrtD9kD,CAovCqxD,wBAAA+pC,EAAAgb,uBAA4D,EAAAjS,aAAA,CAAqcuU,IAAejd,cAAA,EAAAyB,gBAAA,IACj4E,OAxaKyhB,CAAY,KAudZ0H,GAAgB,MAAtB,MAAMA,EACFzH,sBAAqB31C,OAAO41C,OAC5BG,gBAAe/1C,OAAOo1C,MAAa,CAAEjgB,UAAU,IAC/C6gB,QAAOh2C,OAAOi2C,MAAgB,CAAE9gB,UAAU,IAC1CghB,sBAAwBlf,MAAamf,MAErCC,qBAEA,cAAI7J,GACA,OAAO9oD,KAAK4yD,WAChB,CACA,cAAI9J,CAAWnuC,GACX,IAAIk4C,EAAgB7yD,KAAK4yD,YACzB,MAAME,EAAY9yD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,KACjF3a,KAAKqyD,aAAaY,QACtBjzD,KAAK4yD,YAAc5yD,KAAKqyD,aAAaa,UAAUJ,EAAW9yD,KAAKopD,QAASppD,KAAKmpD,SACxEwQ,GAAoB35D,KAAKqyD,aAAcQ,EAAe7yD,KAAK4yD,YAAa5yD,KAAKopD,QAASppD,KAAKmpD,UAC5FnpD,KAAKozD,OAEb,CACAR,YAEA,YAAIjwC,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GAEL3a,KAAKqzD,UADL14C,aAAiB41C,GACA51C,EAGA3a,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,IAExF3a,KAAK45D,iBAAiBj/C,EAC1B,CACA04C,UAEA,WAAIjK,GACA,OAAOppD,KAAKuzD,QAChB,CACA,WAAInK,CAAQzuC,GACR3a,KAAKuzD,SAAWvzD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA44C,SAEA,WAAIpK,GACA,OAAOnpD,KAAKwzD,QAChB,CACA,WAAIrK,CAAQxuC,GACR3a,KAAKwzD,SAAWxzD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA64C,SAEAtK,WAEAG,UAEAqK,eAAiB,IAAI5G,MAErB+M,aAAe,IAAI/M,MAEnBE,iBAAmB,IAAIF,MAEvB8G,iBAEAkG,OAEAC,WAEAC,cACAn6D,cAIIG,KAAK4yD,YAAc5yD,KAAKqyD,aAAaY,OACzC,CACAyB,qBACI10D,KAAKyyD,sBAAwBzyD,KAAKqyD,aAAasC,cAC1C9wD,QAAK+wD,MAAU,OACftsD,UAAU,IAAMtI,KAAKozD,QAC9B,CACA37C,cACIzX,KAAKyyD,sBAAsBhe,aAC/B,CAEA2e,QACIpzD,KAAK+5D,WAAa/5D,KAAKqyD,aAAaqF,QAAQ13D,KAAKqyD,aAAaY,SAO9D,MAAMgH,EADaj6D,KAAKqyD,aAAaqF,QAAQ13D,KAAK4yD,aACfsH,GAAgBl6D,KAAKqyD,aAAcryD,KAAK8oD,WAAY9oD,KAAKopD,QAASppD,KAAKmpD,SAC1GnpD,KAAK85D,OAAS,GACd,QAASnxD,EAAI,EAAG+kD,EAAM,GAAI/kD,EApGb,GAoG+BA,IACxC+kD,EAAIhhD,KAAKutD,EAAgBtxD,GApGjB,GAqGJ+kD,EAAI1jD,SACJhK,KAAK85D,OAAOptD,KAAKghD,EAAIjtD,IAAI24D,GAAQp5D,KAAKm6D,mBAAmBf,KACzD1L,EAAM,IAGd1tD,KAAKiyD,mBAAmBoD,cAC5B,CAEA+E,cAAc1e,GACV,MAAM0d,EAAO1d,EAAM/gC,MACb0/C,EAAer6D,KAAKqyD,aAAaoF,WAAW2B,EAAM,EAAG,GACrDpE,EAAeh1D,KAAKs6D,iBAAiBlB,GAC3Cp5D,KAAK65D,aAAavL,KAAK+L,GACvBr6D,KAAK0zD,eAAepF,KAAK0G,EAC7B,CAWAM,kBAAkB5Z,GACd,MACMmX,EAAgB7yD,KAAK4yD,YAC3B5yD,KAAK8oD,WAAa9oD,KAAKs6D,iBAFV5e,EAAM/gC,OAGf3a,KAAKqyD,aAAakD,YAAY1C,EAAe7yD,KAAK8oD,aAClD9oD,KAAKgtD,iBAAiBsB,KAAKtuD,KAAK8oD,WAExC,CAEA0M,2BAA2B9Z,GACvB,MAAMmX,EAAgB7yD,KAAK4yD,YACrB6C,EAAQz1D,KAAK01D,SACnB,OAAQha,EAAMia,SACV,KAAKC,MACD51D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YAAa6C,EAAQ,GAAI,GACnF,MACJ,KAAKK,MACD91D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YAAa6C,GAAQ,EAAK,GACpF,MACJ,KAAKM,MACD/1D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,aAlJtD,GAmJJ,MACJ,KAAKoD,MACDh2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YArJtD,GAsJJ,MACJ,KAAKqD,MACDj2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,aAAcsH,GAAgBl6D,KAAKqyD,aAAcryD,KAAK8oD,WAAY9oD,KAAKopD,QAASppD,KAAKmpD,UAC/I,MACJ,KAAKgN,MACDn2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YA5JrD,GA6JDsH,GAAgBl6D,KAAKqyD,aAAcryD,KAAK8oD,WAAY9oD,KAAKopD,QAASppD,KAAKmpD,SACvE,GACJ,MACJ,KAAKkN,MACDr2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YAAalX,EAAM4a,QAAS,KAjKjF,IAkKL,MACJ,KAAKG,MACDz2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YAAalX,EAAM4a,OAASiE,IApKjF,IAqKL,MACJ,KAAK7D,MACL,KAAKC,MAKD32D,KAAK2yD,sBAAuB,EAC5B,MACJ,QAEI,OAEJ3yD,KAAKqyD,aAAakD,YAAY1C,EAAe7yD,KAAK8oD,aAClD9oD,KAAKgtD,iBAAiBsB,KAAKtuD,KAAK8oD,YAEpC9oD,KAAKksD,mCAELxQ,EAAME,gBACV,CAEAob,yBAAyBtb,IACjBA,EAAMia,UAAYgB,OAASjb,EAAMia,UAAYe,SACzC12D,KAAK2yD,sBACL3yD,KAAKo6D,cAAc,CAAEz/C,MAAO3a,KAAKqyD,aAAaqF,QAAQ13D,KAAK4yD,aAAclX,UAE7E17C,KAAK2yD,sBAAuB,EAEpC,CACA6H,iBACI,OAAON,GAAgBl6D,KAAKqyD,aAAcryD,KAAK8oD,WAAY9oD,KAAKopD,QAASppD,KAAKmpD,QAClF,CAEAqD,mBACIxsD,KAAK4zD,iBAAiBpH,kBAC1B,CAEAN,mCACIlsD,KAAK4zD,iBAAiB7E,0CAC1B,CAKAuL,iBAAiBlB,GACb,MAAMqB,EAAcz6D,KAAKqyD,aAAaiF,SAASt3D,KAAK8oD,YAC9C8P,EAAc54D,KAAKqyD,aAAa+D,kBAAkBp2D,KAAKqyD,aAAaoF,WAAW2B,EAAMqB,EAAa,IAExG,OADuBz6D,KAAKqyD,aAAaoF,WAAW2B,EAAMqB,EAAalxD,KAAK0zB,IAAIj9B,KAAKqyD,aAAa6D,QAAQl2D,KAAK8oD,YAAa8P,GAEhI,CAEAuB,mBAAmBf,GACf,MAAMnI,EAAOjxD,KAAKqyD,aAAaoF,WAAW2B,EAAM,EAAG,GAC7CsB,EAAW16D,KAAKqyD,aAAasI,YAAY1J,GACzCgI,EAAcj5D,KAAKqpD,UAAYrpD,KAAKqpD,UAAU4H,EAAM,mBAAgBlhD,EAC1E,OAAO,IAAIw7C,GAAgB6N,EAAMsB,EAAUA,EAAU16D,KAAK46D,kBAAkBxB,GAAOH,EACvF,CAEA2B,kBAAkBxB,GAEd,GACa,MAATA,GACCp5D,KAAKmpD,SAAWiQ,EAAOp5D,KAAKqyD,aAAaqF,QAAQ13D,KAAKmpD,UACtDnpD,KAAKopD,SAAWgQ,EAAOp5D,KAAKqyD,aAAaqF,QAAQ13D,KAAKopD,SACvD,OAAO,EAGX,IAAKppD,KAAKkpD,WACN,OAAO,EAIX,QAAS+H,EAFWjxD,KAAKqyD,aAAaoF,WAAW2B,EAAM,EAAG,GAE7Bp5D,KAAKqyD,aAAaqF,QAAQzG,IAASmI,EAAMnI,EAAOjxD,KAAKqyD,aAAawD,gBAAgB5E,EAAM,GACjH,GAAIjxD,KAAKkpD,WAAW+H,GAChB,OAAO,EAGf,OAAO,CACX,CAEAyE,SACI,OAAO11D,KAAKsyD,MAA4B,QAApBtyD,KAAKsyD,KAAK33C,KAClC,CAEAi/C,iBAAiBj/C,GAEb,GADA3a,KAAKg6D,cAAgB,KACjBr/C,aAAiB41C,GAAW,CAC5B,MAAMlI,EAAe1tC,EAAM6T,OAAS7T,EAAMlB,IACtC4uC,IACAroD,KAAKg6D,cAAgBh6D,KAAKqyD,aAAaqF,QAAQrP,GAEvD,MACS1tC,IACL3a,KAAKg6D,cAAgBh6D,KAAKqyD,aAAaqF,QAAQ/8C,GAEvD,CACAs1B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFwrB,EAAgB,EACnHzpB,iBApiDyFvrC,MAAE,CAAA8N,KAoiDJknD,EAAgBvrB,UAAA,0BAAAmJ,UAAA,SAAA9I,EAAAC,GAAyZ,GAAzZ,EAAAD,GApiDd9pC,MAoiDwZqnD,GAAe,KAAAvd,EAAA,KAAA6H,EApiDva3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAmlB,iBAAAvd,EAAAz1B,MAAA,GAAAyvB,OAAA,CAAAyY,WAAA,aAAAnmC,SAAA,WAAAymC,QAAA,UAAAD,QAAA,UAAAD,WAAA,aAAAG,UAAA,aAAAyG,QAAA,CAAA4D,eAAA,iBAAAmG,aAAA,eAAA7M,iBAAA,oBAAAxW,SAAA,qBAAApI,MAAA,EAAAC,KAAA,EAAAC,OAAA,+TAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAAF9pC,MAAE,YAAFA,CAoiD0iB,YApiD1iBA,CAoiD8mB,QApiD9mBA,MAAE,UAAFA,gBAAE,aAAFA,MAAE,+BAAAs7C,GAAA,OAoiDygCvR,EAAA2rB,cAAApa,EAAqB,EApiDhiCt7C,CAoiDkiC,4BAAAs7C,GAAA,OAAgCvR,EAAA6mB,kBAAAtV,EAAyB,EApiD3lCt7C,CAoiD6lC,iBAAAs7C,GAAA,OAAqBvR,EAAAuoB,yBAAAhX,EAAgC,EApiDlpCt7C,CAoiDopC,mBAAAs7C,GAAA,OAAuBvR,EAAA+mB,2BAAAxV,EAAkC,GApiD7sCt7C,WAoiDsuC,EAAA8pC,IApiDtuC9pC,MAAE,GAAFA,MAAE,OAAA+pC,EAAAqrB,OAAFp1D,CAoiDowB,aAAA+pC,EAAAsrB,WApiDpwBr1D,CAoiD0yB,aAAA+pC,EAAAurB,cApiD1yBt1D,CAoiDo1B,WAAA+pC,EAAAurB,cApiDp1Bt1D,CAoiD43B,YApiD53BA,CAoiDs5B,sBApiDt5BA,CAoiD47B,aAAA+pC,EAAA+rB,kBAA4C,EAAAhjB,aAAA,CAA6SuU,IAAejd,cAAA,EAAAyB,gBAAA,IACh4C,OAjQKmpB,CAAgB,KA2RtB,SAASC,GAAoBkB,EAAaC,EAAOC,EAAO3R,EAASD,GAC7D,MAAM6R,EAAQH,EAAYnD,QAAQoD,GAC5BG,EAAQJ,EAAYnD,QAAQqD,GAC5BG,EAAeC,GAAgBN,EAAazR,EAASD,GAC3D,OAAQ5/C,KAAKC,OAAOwxD,EAAQE,GArSX,MAsSb3xD,KAAKC,OAAOyxD,EAAQC,GAtSP,GAuSrB,CAMA,SAAShB,GAAgBW,EAAa/R,EAAYM,EAASD,GAEvD,OAkBJ,SAASiS,GAAgBlzD,EAAG0E,GACxB,OAAS1E,EAAI0E,EAAKA,GAAKA,CAC3B,CApBWwuD,CADYP,EAAYnD,QAAQ5O,GACHqS,GAAgBN,EAAazR,EAASD,GA/SzD,GAgTrB,CAKA,SAASgS,GAAgBN,EAAazR,EAASD,GAC3C,IAAI+R,EAAe,EACnB,OAAI/R,EAEA+R,EADgBL,EAAYnD,QAAQvO,GAxTvB,GAyT2B,EAEnCC,IACL8R,EAAeL,EAAYnD,QAAQtO,IAEhC8R,CACX,CAMA,IAIMG,GAAW,MAAjB,MAAMA,EACFpJ,sBAAqB31C,OAAO41C,OAC5BC,gBAAe71C,OAAO81C,MAAkB,CAAE3gB,UAAU,IACpD4gB,gBAAe/1C,OAAOo1C,MAAa,CAAEjgB,UAAU,IAC/C6gB,QAAOh2C,OAAOi2C,MAAgB,CAAE9gB,UAAU,IAC1CghB,sBAAwBlf,MAAamf,MAErCC,qBAEA,cAAI7J,GACA,OAAO9oD,KAAK4yD,WAChB,CACA,cAAI9J,CAAWnuC,GACX,IAAIk4C,EAAgB7yD,KAAK4yD,YACzB,MAAME,EAAY9yD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,KACjF3a,KAAKqyD,aAAaY,QACtBjzD,KAAK4yD,YAAc5yD,KAAKqyD,aAAaa,UAAUJ,EAAW9yD,KAAKopD,QAASppD,KAAKmpD,SACzEnpD,KAAKqyD,aAAaqF,QAAQ7E,KAAmB7yD,KAAKqyD,aAAaqF,QAAQ13D,KAAK4yD,cAC5E5yD,KAAKozD,OAEb,CACAR,YAEA,YAAIjwC,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GAEL3a,KAAKqzD,UADL14C,aAAiB41C,GACA51C,EAGA3a,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,IAExF3a,KAAKs7D,kBAAkB3gD,EAC3B,CACA04C,UAEA,WAAIjK,GACA,OAAOppD,KAAKuzD,QAChB,CACA,WAAInK,CAAQzuC,GACR3a,KAAKuzD,SAAWvzD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA44C,SAEA,WAAIpK,GACA,OAAOnpD,KAAKwzD,QAChB,CACA,WAAIrK,CAAQxuC,GACR3a,KAAKwzD,SAAWxzD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA64C,SAEAtK,WAEAG,UAEAqK,eAAiB,IAAI5G,MAErByO,cAAgB,IAAIzO,MAEpBE,iBAAmB,IAAIF,MAEvB8G,iBAEA4H,QAEAC,WAEAC,YAKAC,eACA97D,cASIG,KAAK4yD,YAAc5yD,KAAKqyD,aAAaY,OACzC,CACAyB,qBACI10D,KAAKyyD,sBAAwBzyD,KAAKqyD,aAAasC,cAC1C9wD,QAAK+wD,MAAU,OACftsD,UAAU,IAAMtI,KAAKozD,QAC9B,CACA37C,cACIzX,KAAKyyD,sBAAsBhe,aAC/B,CAEAmnB,eAAelgB,GACX,MAAM2d,EAAQ3d,EAAM/gC,MACdkhD,EAAgB77D,KAAKqyD,aAAaoF,WAAWz3D,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAAauQ,EAAO,GACtGr5D,KAAKu7D,cAAcjN,KAAKuN,GACxB,MAAM7G,EAAeh1D,KAAK87D,kBAAkBzC,GAC5Cr5D,KAAK0zD,eAAepF,KAAK0G,EAC7B,CAWAM,kBAAkB5Z,GACd,MACMmX,EAAgB7yD,KAAK4yD,YAC3B5yD,KAAK8oD,WAAa9oD,KAAK87D,kBAFTpgB,EAAM/gC,OAGhB3a,KAAKqyD,aAAakD,YAAY1C,EAAe7yD,KAAK8oD,aAClD9oD,KAAKgtD,iBAAiBsB,KAAKtuD,KAAK8oD,WAExC,CAEA0M,2BAA2B9Z,GAIvB,MAAMmX,EAAgB7yD,KAAK4yD,YACrB6C,EAAQz1D,KAAK01D,SACnB,OAAQha,EAAMia,SACV,KAAKC,MACD51D,KAAK8oD,WAAa9oD,KAAKqyD,aAAamE,kBAAkBx2D,KAAK4yD,YAAa6C,EAAQ,GAAI,GACpF,MACJ,KAAKK,MACD91D,KAAK8oD,WAAa9oD,KAAKqyD,aAAamE,kBAAkBx2D,KAAK4yD,YAAa6C,GAAQ,EAAK,GACrF,MACJ,KAAKM,MACD/1D,KAAK8oD,WAAa9oD,KAAKqyD,aAAamE,kBAAkBx2D,KAAK4yD,aAAa,GACxE,MACJ,KAAKoD,MACDh2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAamE,kBAAkBx2D,KAAK4yD,YAAa,GACxE,MACJ,KAAKqD,MACDj2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAamE,kBAAkBx2D,KAAK4yD,aAAc5yD,KAAKqyD,aAAaiF,SAASt3D,KAAK4yD,cACzG,MACJ,KAAKuD,MACDn2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAamE,kBAAkBx2D,KAAK4yD,YAAa,GAAK5yD,KAAKqyD,aAAaiF,SAASt3D,KAAK4yD,cAC7G,MACJ,KAAKyD,MACDr2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YAAalX,EAAM4a,QAAS,IAAM,GAC5F,MACJ,KAAKG,MACDz2D,KAAK8oD,WAAa9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK4yD,YAAalX,EAAM4a,OAAS,GAAK,GAC3F,MACJ,KAAKI,MACL,KAAKC,MAKD32D,KAAK2yD,sBAAuB,EAC5B,MACJ,QAEI,OAEJ3yD,KAAKqyD,aAAakD,YAAY1C,EAAe7yD,KAAK8oD,cAClD9oD,KAAKgtD,iBAAiBsB,KAAKtuD,KAAK8oD,YAChC9oD,KAAKksD,oCAGTxQ,EAAME,gBACV,CAEAob,yBAAyBtb,IACjBA,EAAMia,UAAYgB,OAASjb,EAAMia,UAAYe,SACzC12D,KAAK2yD,sBACL3yD,KAAK47D,eAAe,CAAEjhD,MAAO3a,KAAKqyD,aAAaiF,SAASt3D,KAAK4yD,aAAclX,UAE/E17C,KAAK2yD,sBAAuB,EAEpC,CAEAS,QACIpzD,KAAKs7D,kBAAkBt7D,KAAK2iB,UAC5B3iB,KAAK07D,YAAc17D,KAAK+7D,uBAAuB/7D,KAAKqyD,aAAaY,SACjEjzD,KAAKy7D,WAAaz7D,KAAKqyD,aAAasI,YAAY36D,KAAK8oD,YACrD,IAAIkT,EAAah8D,KAAKqyD,aAAagF,cAAc,SAEjDr3D,KAAKw7D,QAAU,CACX,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,GAAI,KACb/6D,IAAIitD,GAAOA,EAAIjtD,IAAI44D,GAASr5D,KAAKi8D,oBAAoB5C,EAAO2C,EAAW3C,MACzEr5D,KAAKiyD,mBAAmBoD,cAC5B,CAEA7I,mBACIxsD,KAAK4zD,iBAAiBpH,kBAC1B,CAEAN,mCACIlsD,KAAK4zD,iBAAiB7E,0CAC1B,CAKAgN,uBAAuB9K,GACnB,OAAOA,GAAQjxD,KAAKqyD,aAAaqF,QAAQzG,IAASjxD,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAC3E9oD,KAAKqyD,aAAaiF,SAASrG,GAC3B,IACV,CAKA6K,kBAAkBzC,GACd,MAAM6C,EAAiBl8D,KAAKqyD,aAAaoF,WAAWz3D,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAAauQ,EAAO,GACjGT,EAAc54D,KAAKqyD,aAAa+D,kBAAkB8F,GACxD,OAAOl8D,KAAKqyD,aAAaoF,WAAWz3D,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAAauQ,EAAO9vD,KAAK0zB,IAAIj9B,KAAKqyD,aAAa6D,QAAQl2D,KAAK8oD,YAAa8P,GAChJ,CAEAqD,oBAAoB5C,EAAO8C,GACvB,MAAMlL,EAAOjxD,KAAKqyD,aAAaoF,WAAWz3D,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAAauQ,EAAO,GACvFrR,EAAYhoD,KAAKqyD,aAAa+E,OAAOnG,EAAMjxD,KAAKmyD,aAAa+E,QAAQkF,oBACrEnD,EAAcj5D,KAAKqpD,UAAYrpD,KAAKqpD,UAAU4H,EAAM,aAAUlhD,EACpE,OAAO,IAAIw7C,GAAgB8N,EAAO8C,EAAU5E,oBAAqBvP,EAAWhoD,KAAKq8D,mBAAmBhD,GAAQJ,EAChH,CAEAoD,mBAAmBhD,GACf,MAAMiD,EAAat8D,KAAKqyD,aAAaqF,QAAQ13D,KAAK8oD,YAClD,GACc,MAAVuQ,GACAr5D,KAAKu8D,4BAA4BD,EAAYjD,IAC7Cr5D,KAAKw8D,6BAA6BF,EAAYjD,GAC9C,OAAO,EAEX,IAAKr5D,KAAKkpD,WACN,OAAO,EAIX,QAAS+H,EAFYjxD,KAAKqyD,aAAaoF,WAAW6E,EAAYjD,EAAO,GAEvCr5D,KAAKqyD,aAAaiF,SAASrG,IAASoI,EAAOpI,EAAOjxD,KAAKqyD,aAAawD,gBAAgB5E,EAAM,GACpH,GAAIjxD,KAAKkpD,WAAW+H,GAChB,OAAO,EAGf,OAAO,CACX,CAKAsL,4BAA4BnD,EAAMC,GAC9B,GAAIr5D,KAAKmpD,QAAS,CACd,MAAMsT,EAAUz8D,KAAKqyD,aAAaqF,QAAQ13D,KAAKmpD,SACzCuT,EAAW18D,KAAKqyD,aAAaiF,SAASt3D,KAAKmpD,SACjD,OAAOiQ,EAAOqD,GAAYrD,IAASqD,GAAWpD,EAAQqD,CAC1D,CACA,OAAO,CACX,CAKAF,6BAA6BpD,EAAMC,GAC/B,GAAIr5D,KAAKopD,QAAS,CACd,MAAMuT,EAAU38D,KAAKqyD,aAAaqF,QAAQ13D,KAAKopD,SACzCwT,EAAW58D,KAAKqyD,aAAaiF,SAASt3D,KAAKopD,SACjD,OAAOgQ,EAAOuD,GAAYvD,IAASuD,GAAWtD,EAAQuD,CAC1D,CACA,OAAO,CACX,CAEAlH,SACI,OAAO11D,KAAKsyD,MAA4B,QAApBtyD,KAAKsyD,KAAK33C,KAClC,CAEA2gD,kBAAkB3gD,GAEV3a,KAAK27D,eADLhhD,aAAiB41C,GAEbvwD,KAAK+7D,uBAAuBphD,EAAM6T,QAAUxuB,KAAK+7D,uBAAuBphD,EAAMlB,KAG5DzZ,KAAK+7D,uBAAuBphD,EAE1D,CACAs1B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFmtB,EAAW,EAC9GprB,iBAt4DyFvrC,MAAE,CAAA8N,KAs4DJ6oD,EAAWltB,UAAA,oBAAAmJ,UAAA,SAAA9I,EAAAC,GAAqZ,GAArZ,EAAAD,GAt4DT9pC,MAs4D+YqnD,GAAe,KAAAvd,EAAA,KAAA6H,EAt4D9Z3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAmlB,iBAAAvd,EAAAz1B,MAAA,GAAAyvB,OAAA,CAAAyY,WAAA,aAAAnmC,SAAA,WAAAymC,QAAA,UAAAD,QAAA,UAAAD,WAAA,aAAAG,UAAA,aAAAyG,QAAA,CAAA4D,eAAA,iBAAA6H,cAAA,gBAAAvO,iBAAA,oBAAAxW,SAAA,gBAAApI,MAAA,EAAAC,KAAA,EAAAC,OAAA,+VAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAAF9pC,MAAE,YAAFA,CAs4D4hB,YAt4D5hBA,CAs4DgmB,QAt4DhmBA,MAAE,UAAFA,gBAAE,aAAFA,MAAE,+BAAAs7C,GAAA,OAs4D0lCvR,EAAAmtB,eAAA5b,EAAsB,EAt4DlnCt7C,CAs4DonC,4BAAAs7C,GAAA,OAAgCvR,EAAA6mB,kBAAAtV,EAAyB,EAt4D7qCt7C,CAs4D+qC,iBAAAs7C,GAAA,OAAqBvR,EAAAuoB,yBAAAhX,EAAgC,EAt4DpuCt7C,CAs4DsuC,mBAAAs7C,GAAA,OAAuBvR,EAAA+mB,2BAAAxV,EAAkC,GAt4D/xCt7C,WAs4DwzC,EAAA8pC,IAt4DxzC9pC,MAAE,GAAFA,MAAE,QAAA+pC,EAAAgtB,WAAF/2D,CAs4D2vB,OAAA+pC,EAAA+sB,QAt4D3vB92D,CAs4DwxB,aAAA+pC,EAAAitB,YAt4DxxBh3D,CAs4Dg0B,aAAA+pC,EAAAktB,eAt4Dh0Bj3D,CAs4D22B,WAAA+pC,EAAAktB,eAt4D32Bj3D,CAs4Do5B,0BAt4Dp5BA,CAs4D47B,YAt4D57BA,CAs4Ds9B,sBAt4Dt9BA,CAs4D4/B,aAAA+pC,EAAA4jB,aAAAiF,SAAA7oB,EAAAqa,aAA6D,EAAAtR,aAAA,CAA8SuU,IAAejd,cAAA,EAAAyB,gBAAA,IACl9C,OAhSK8qB,CAAW,KA4TXwB,GAAiB,MAAvB,MAAMA,EACF7Q,SAAQ1vC,OAAO8tC,IACf0S,YAAWxgD,OAAOygD,IAClB1K,gBAAe/1C,OAAOo1C,MAAa,CAAEjgB,UAAU,IAC/C0gB,gBAAe71C,OAAO81C,MAAkB,CAAE3gB,UAAU,IACpD5xC,eACIyc,SAAOs3B,MAAwB7qC,KAAK0rD,MACpC,MAAMuI,KAAoB1gD,OAAO41C,OACjClyD,KAAK88D,SAASG,aAAa30D,UAAU,IAAM00D,EAAkB3H,eACjE,CAEA,oBAAI6H,GACA,MAAiC,SAA7Bl9D,KAAK88D,SAASK,YACPn9D,KAAKqyD,aACP+E,OAAOp3D,KAAK88D,SAAShU,WAAY9oD,KAAKmyD,aAAa+E,QAAQkG,gBAC3D7F,oBAEwB,QAA7Bv3D,KAAK88D,SAASK,YACPn9D,KAAKqyD,aAAasI,YAAY36D,KAAK88D,SAAShU,YAEhD9oD,KAAKgsD,MAAMb,mBAAmBnrD,KAAKq9D,6BAC9C,CAEA,2BAAIC,GACA,MAAiC,SAA7Bt9D,KAAK88D,SAASK,YACPn9D,KAAKqyD,aACP+E,OAAOp3D,KAAK88D,SAAShU,WAAY9oD,KAAKmyD,aAAa+E,QAAQkG,gBAC3D7F,oBAEwB,QAA7Bv3D,KAAK88D,SAASK,YACPn9D,KAAKqyD,aAAasI,YAAY36D,KAAK88D,SAAShU,YAIhD9oD,KAAKgsD,MAAMZ,wBAAwBprD,KAAKq9D,6BACnD,CAEA,qBAAIE,GACA,MAAoC,SAA7Bv9D,KAAK88D,SAASK,YACfn9D,KAAKgsD,MAAMjB,2BACX/qD,KAAKgsD,MAAMlB,sBACrB,CAEA,mBAAI0S,GACA,MAAO,CACHnE,MAASr5D,KAAKgsD,MAAMxB,eACpB4O,KAAQp5D,KAAKgsD,MAAMtB,cACnB,aAAc1qD,KAAKgsD,MAAMpB,oBAC3B5qD,KAAK88D,SAASK,YACpB,CAEA,mBAAIM,GACA,MAAO,CACHpE,MAASr5D,KAAKgsD,MAAMvB,eACpB2O,KAAQp5D,KAAKgsD,MAAMrB,cACnB,aAAc3qD,KAAKgsD,MAAMnB,oBAC3B7qD,KAAK88D,SAASK,YACpB,CAEAO,uBACI19D,KAAK88D,SAASK,YAA2C,SAA7Bn9D,KAAK88D,SAASK,YAAyB,aAAe,OACtF,CAEAQ,kBACI39D,KAAK88D,SAAShU,WACmB,SAA7B9oD,KAAK88D,SAASK,YACRn9D,KAAKqyD,aAAamE,kBAAkBx2D,KAAK88D,SAAShU,YAAY,GAC9D9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK88D,SAAShU,WAAyC,QAA7B9oD,KAAK88D,SAASK,aAAwB,GAxsBhG,GAysBjB,CAEAS,cACI59D,KAAK88D,SAAShU,WACmB,SAA7B9oD,KAAK88D,SAASK,YACRn9D,KAAKqyD,aAAamE,kBAAkBx2D,KAAK88D,SAAShU,WAAY,GAC9D9oD,KAAKqyD,aAAakE,iBAAiBv2D,KAAK88D,SAAShU,WAAyC,QAA7B9oD,KAAK88D,SAASK,YAAwB,EA/sBhG,GAgtBjB,CAEAU,kBACI,OAAK79D,KAAK88D,SAAS1T,UAGVppD,KAAK88D,SAAS1T,UAAYppD,KAAK89D,YAAY99D,KAAK88D,SAAShU,WAAY9oD,KAAK88D,SAAS1T,QAChG,CAEA2U,cACI,OAAS/9D,KAAK88D,SAAS3T,UAAYnpD,KAAK89D,YAAY99D,KAAK88D,SAAShU,WAAY9oD,KAAK88D,SAAS3T,QAChG,CAEA2U,YAAYhD,EAAOC,GACf,MAAiC,SAA7B/6D,KAAK88D,SAASK,YACNn9D,KAAKqyD,aAAaqF,QAAQoD,IAAU96D,KAAKqyD,aAAaqF,QAAQqD,IAClE/6D,KAAKqyD,aAAaiF,SAASwD,IAAU96D,KAAKqyD,aAAaiF,SAASyD,GAEvC,QAA7B/6D,KAAK88D,SAASK,YACPn9D,KAAKqyD,aAAaqF,QAAQoD,IAAU96D,KAAKqyD,aAAaqF,QAAQqD,GAGlEpB,GAAoB35D,KAAKqyD,aAAcyI,EAAOC,EAAO/6D,KAAK88D,SAAS1T,QAASppD,KAAK88D,SAAS3T,QACrG,CAMAkU,6BAKI,MAAMpD,EADaj6D,KAAKqyD,aAAaqF,QAAQ13D,KAAK88D,SAAShU,YAEvDoR,GAAgBl6D,KAAKqyD,aAAcryD,KAAK88D,SAAShU,WAAY9oD,KAAK88D,SAAS1T,QAASppD,KAAK88D,SAAS3T,SAChG6U,EAAgB/D,EApvBT,GAovBwC,EAGrD,MAAO,CAFcj6D,KAAKqyD,aAAasI,YAAY36D,KAAKqyD,aAAaoF,WAAWwC,EAAe,EAAG,IAC7Ej6D,KAAKqyD,aAAasI,YAAY36D,KAAKqyD,aAAaoF,WAAWuG,EAAe,EAAG,IAEtG,CACAC,wBAAuB3hD,OAAOsxC,OAAc3tD,MAAM,8BAClDgwC,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF2uB,EAAiB,EACpH5sB,iBAzhEyFvrC,MAAE,CAAA8N,KAyhEJqqD,EAAiB1uB,UAAA,0BAAAqI,SAAA,sBAAAG,mBAAAhG,GAAAvC,MAAA,GAAAC,KAAA,GAAAC,OAAA,+rBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAzhEf9pC,cAAE,UAAFA,CAyhEmK,UAzhEnKA,CAyhE4M,YAzhE5MA,MAAE,GAAFA,cAAE,cAAFA,MAAE,0BAyhEyqB+pC,EAAAivB,sBAAsB,GAzhEjsBh5D,MAAE,YAAFA,MAAE,GAAFA,sBAAE,WAAFA,MAAE,eAAFA,wBAAE,WAAFA,MAAE,IAAFA,MAAE,eAAFA,MAAE,0BAyhEy0C+pC,EAAAkvB,iBAAiB,GAzhE51Cj5D,cAAE,YAAFA,MAAE,cAAFA,wBAAE,gBAAFA,MAAE,0BAyhEusD+pC,EAAAmvB,aAAa,GAzhEttDl5D,cAAE,YAAFA,MAAE,cAAFA,eAyhE68D,EAAA8pC,IAzhE78D9pC,MAAE,GAAFA,MAAE,KAAA+pC,EAAAwvB,sBAAFv5D,cAAE+pC,EAAA6uB,yBAAF54D,cAAE,aAAA+pC,EAAA8uB,kBAAF74D,CAAE,mBAAA+pC,EAAAwvB,sBAAFv5D,MAAE,GAAFA,MAAE+pC,EAAAyuB,kBAAFx4D,cAAE,gCAAA+pC,EAAAquB,SAAAK,aAAFz4D,MAAE,GAAFA,MAAE,YAAA+pC,EAAAovB,mBAAFn5D,MAAE,aAAA+pC,EAAA+uB,iBAAF94D,MAAE,GAAFA,MAAE,YAAA+pC,EAAAsvB,eAAFr5D,MAAE,aAAA+pC,EAAAgvB,iBAAA,EAAAjmB,aAAA,CAyhE0/D0mB,MAA0LC,OAAarvB,cAAA,EAAAyB,gBAAA,IAC/xE,OAvHKssB,CAAiB,KA6HjBE,GAAW,MAAjB,MAAMA,EACF1K,gBAAe/1C,OAAOo1C,MAAa,CAAEjgB,UAAU,IAC/C0gB,gBAAe71C,OAAO81C,MAAkB,CAAE3gB,UAAU,IACpDwgB,sBAAqB31C,OAAO41C,OAE5BkM,gBAEAC,sBACAC,aAMAC,sBAAuB,EAEvB,WAAIC,GACA,OAAOx+D,KAAKy+D,QAChB,CACA,WAAID,CAAQ7jD,GACR3a,KAAKy+D,SAAWz+D,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA8jD,SAEAC,UAAY,QAEZ,YAAI/7C,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GAEL3a,KAAKqzD,UADL14C,aAAiB41C,GACA51C,EAGA3a,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GAE5F,CACA04C,UAEA,WAAIjK,GACA,OAAOppD,KAAKuzD,QAChB,CACA,WAAInK,CAAQzuC,GACR3a,KAAKuzD,SAAWvzD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA44C,SAEA,WAAIpK,GACA,OAAOnpD,KAAKwzD,QAChB,CACA,WAAIrK,CAAQxuC,GACR3a,KAAKwzD,SAAWxzD,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA64C,SAEAtK,WAEAG,UAEAC,gBAEAC,cAEAC,wBAEAC,sBAEAiK,eAAiB,IAAI5G,MAKrB+M,aAAe,IAAI/M,MAKnByO,cAAgB,IAAIzO,MAIpB6R,YAAc,IAAI7R,OAAa,GAE/B6G,eAAiB,IAAI7G,MAErB8R,cAAgB,IAAI9R,MAEpB+R,UAEAC,SAEAC,cAKA,cAAIjW,GACA,OAAO9oD,KAAKg/D,kBAChB,CACA,cAAIlW,CAAWnuC,GACX3a,KAAKg/D,mBAAqBh/D,KAAKqyD,aAAaa,UAAUv4C,EAAO3a,KAAKopD,QAASppD,KAAKmpD,SAChFnpD,KAAKi9D,aAAa5iD,OAClBra,KAAKiyD,mBAAmBoD,cAC5B,CACA2J,mBAEA,eAAI7B,GACA,OAAOn9D,KAAKi/D,YAChB,CACA,eAAI9B,CAAYxiD,GACZ,MAAMukD,EAAoBl/D,KAAKi/D,eAAiBtkD,EAAQA,EAAQ,KAChE3a,KAAKi/D,aAAetkD,EACpB3a,KAAKu+D,sBAAuB,EAC5Bv+D,KAAKiyD,mBAAmBoD,eACpB6J,GACAl/D,KAAK2+D,YAAYrQ,KAAK4Q,EAE9B,CACAD,aAEAvV,YAAc,KAIduT,aAAe,IAAI1lD,KACnB1X,cASIG,KAAKs+D,gBAAehiD,OAAO8tC,IAAmB3pB,QAAQn4B,UAAU,KAC5DtI,KAAKiyD,mBAAmBoD,eACxBr1D,KAAKi9D,aAAa5iD,MAAK,EAE/B,CACAq6C,qBACI10D,KAAKq+D,sBAAwB,IAAIc,MAAgBn/D,KAAKo+D,iBAAmBvB,IACzE78D,KAAK8oD,WAAa9oD,KAAKw+D,SAAWx+D,KAAKqyD,aAAaY,QAEpDjzD,KAAKi/D,aAAej/D,KAAK0+D,SAC7B,CACAnS,qBACQvsD,KAAKu+D,uBACLv+D,KAAKu+D,sBAAuB,EAC5Bv+D,KAAKo/D,kBAEb,CACA3nD,cACIzX,KAAKs+D,aAAa7pB,cAClBz0C,KAAKi9D,aAAavlD,UACtB,CACA62C,YAAY9tB,GAIR,MAAM4+B,EAAgB5+B,EAAQ2oB,UACzBppD,KAAKqyD,aAAaiN,SAAS7+B,EAAQ2oB,QAAWmW,cAAe9+B,EAAQ2oB,QAAWoW,cAC/E/+B,EAAQ2oB,aACRr5C,EACA0vD,EAAgBh/B,EAAQ0oB,UACzBnpD,KAAKqyD,aAAaiN,SAAS7+B,EAAQ0oB,QAAWoW,cAAe9+B,EAAQ0oB,QAAWqW,cAC/E/+B,EAAQ0oB,aACRp5C,EACA2vD,EAA0BL,GAAiBI,GAAiBh/B,EAAQyoB,WAC1E,GAAIwW,IAA4BA,EAAwB5K,YAAa,CACjE,MAAM6K,EAAO3/D,KAAK4/D,2BACdD,IAGA3/D,KAAKu+D,sBAAuB,EAG5Bv+D,KAAKiyD,mBAAmBmG,gBACxBuH,EAAKvM,QAEb,CACApzD,KAAKi9D,aAAa5iD,MACtB,CAEA+kD,kBACIp/D,KAAK4/D,2BAA2BpT,kBAAiB,EACrD,CAEAqT,mBACI7/D,KAAK4/D,2BAA2BxM,OACpC,CAEArK,cAAcrN,GACV,MAAMuV,EAAOvV,EAAM/gC,OACf3a,KAAK2iB,oBAAoB4tC,IACxBU,IAASjxD,KAAKqyD,aAAaiN,SAASrO,EAAMjxD,KAAK2iB,YAChD3iB,KAAK0zD,eAAepF,KAAK2C,GAE7BjxD,KAAK2zD,eAAerF,KAAK5S,EAC7B,CAEAuO,6BAA6B6V,GACzB9/D,KAAK65D,aAAavL,KAAKwR,EAC3B,CAEAjW,yBAAyBkW,GACrB//D,KAAKu7D,cAAcjN,KAAKyR,EAC5B,CAEAjW,gBAAgBmH,EAAM0O,GAClB3/D,KAAK8oD,WAAamI,EAClBjxD,KAAKm9D,YAAcwC,CACvB,CAEA3W,aAAatN,GACT17C,KAAK0pD,YAAchO,CACvB,CAKAuN,WAAWvN,GACF17C,KAAK0pD,cAENhO,EAAM/gC,OACN3a,KAAK4+D,cAActQ,KAAK5S,GAE5B17C,KAAK0pD,YAAc,KACvB,CAEAkW,2BAII,OAAO5/D,KAAK6+D,WAAa7+D,KAAK8+D,UAAY9+D,KAAK++D,aACnD,CACA9uB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF6uB,EAAW,EAC9G9sB,iBA5wEyFvrC,MAAE,CAAA8N,KA4wEJuqD,EAAW5uB,UAAA,mBAAAmJ,UAAA,SAAA9I,EAAAC,GAAq9B,GAAr9B,EAAAD,IA5wET9pC,MA4wE4xBstD,GAAY,GA5wExyBttD,MA4wEm3B22D,GAAW,GA5wE93B32D,MA4wE88Bg1D,GAAgB,MAAAlrB,EAAA,KAAA6H,EA5wE99B3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAowB,UAAAxoB,EAAAz1B,OAAFlc,MAAE2xC,EAAF3xC,WAAE+pC,EAAAqwB,SAAAzoB,EAAAz1B,OAAFlc,MAAE2xC,EAAF3xC,WAAE+pC,EAAAswB,cAAA1oB,EAAAz1B,MAAA,GAAAsvB,UAAA,mBAAAG,OAAA,CAAA+tB,gBAAA,kBAAAI,QAAA,UAAAE,UAAA,YAAA/7C,SAAA,WAAAymC,QAAA,UAAAD,QAAA,UAAAD,WAAA,aAAAG,UAAA,YAAAC,gBAAA,kBAAAC,cAAA,gBAAAC,wBAAA,0BAAAC,sBAAA,yBAAAqG,QAAA,CAAA4D,eAAA,iBAAAmG,aAAA,eAAA0B,cAAA,gBAAAoD,YAAA,cAAAhL,eAAA,iBAAAiL,cAAA,iBAAApoB,SAAA,gBAAAh1B,SAAA,CAAF9c,MA4wE6qB,CAAC6sD,KA5wE9qB7sD,OAAE0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,mzBAAAC,SAAA,SAAAC,EAAAC,GA4wE80F,GA5wE90F,EAAAD,IAAF9pC,MAAE,EAAAkkD,GAAA,qBAAFlkD,MAAE,WAAFA,MAAE,EAAAmkD,GAAA,wBAAFnkD,CA4wEuwC,EAAAilD,GAAA,sBA5wEvwCjlD,CA4wEi+D,EAAAqlD,GAAA,6BA5wEj+DrlD,SA4wEg1F,EAAA8pC,EAAA,KAAAmQ,EA5wEh1Fj6C,MAAE,kBAAA+pC,EAAA4vB,uBAAF35D,MAAE,GAAFA,MA4wEytC,WA5wEvtCi6C,EAAAlQ,EAAA0uB,aA4wE8tC,EAAP,SAAOxe,EAAD,EAAN,eAAMA,EAAM,KAAmmD,GAAAnH,aAAA,CAA07EwoB,MAAgKC,MAA0KjO,GAA6XqJ,GAAuP3B,IAAgBppB,OAAA,s3EAAAxB,cAAA,EAAAyB,gBAAA,IAC5yM,OA7OKwsB,CAAW,KAsSjB,MAAMmD,GAA0B,CAE5BC,gBAAgBC,SAAQ,iBAAkB,EACtCC,SAAW,0BAA0BC,SAAQ,oCAAoCC,SAAU,EACvFC,SAAM,CAAEC,QAAS,EAAG97B,UAAW,mBAC/B67B,SAAM,CAAEC,QAAS,EAAG97B,UAAW,qBAEnC07B,SAAW,wBAAwBC,SAAQ,oCAAoCC,SAAU,EACrFC,SAAM,CAAEC,QAAS,EAAG97B,UAAW,gBAC/B67B,SAAM,CAAE77B,UAAW,OAAQ87B,QAAS,SAExCJ,SAAW,aAAaC,SAAQ,gBAAgBE,SAAM,CAAEC,QAAS,QAGrEC,gBAAgBN,SAAQ,iBAAkB,EACtCzmD,SAAM,QAAQ6mD,SAAM,CAAEC,QAAS,MAC/B9mD,SAAM,SAAS6mD,SAAM,CAAEC,QAAS,MAGhCJ,SAAW,aAAaC,SAAQ,oDAKlCK,GAAiC,IAAI1vB,MAAe,iCAAkC,CACxF9vC,WAAY,OACZF,QAASA,KACL,MAAM2/D,KAAUtkD,OAAOukD,OACvB,MAAO,IAAMD,EAAQE,iBAAiBC,YAAW,IAQnDC,GAAkD,CACpDvqB,QAASkqB,GACTv4B,KAAM,CAACy4B,OACPlP,WAPJ,SAASsP,GAAuCL,GAC5C,MAAO,IAAMA,EAAQE,iBAAiBC,YAC1C,GAOA,IAOMG,GAAoB,MAA1B,MAAMA,EACF/vB,eAAc70B,OAAO80B,OACrB6gB,sBAAqB31C,OAAO41C,OAC5BiP,gBAAe7kD,OAAOm0C,IACtB4B,gBAAe/1C,OAAOo1C,OACtB0P,2BAA0B9kD,OAAOw1C,GAAmC,CAAErgB,UAAU,IAChF6B,eAAiB,IAAIC,MACrB8tB,OAEAC,UAQAC,MAEAC,WAEAlY,gBAEAC,cAEAC,wBAEAC,sBAEAgY,SAEAC,gBAEAC,eAAiB,IAAIpqD,KAErBqqD,cAAe,EAEfC,iBAEAC,oBAEAC,eAAiB,KAEjBC,eACAniE,eACIyc,SAAOs3B,MAAwB7qC,KAAK0rD,MACpC,MAAMwN,KAAO3lD,OAAO8tC,IACpBpqD,KAAK6hE,iBAAmBI,EAAK1X,kBACjC,CACArb,WACIlvC,KAAK0hE,gBAAkB1hE,KAAKwhE,WAAWU,QAAU,eAAiB,gBACtE,CACA3tB,kBACIv0C,KAAKszC,eAAe9wC,IAAIxC,KAAKwhE,WAAWvE,aAAa30D,UAAU,KAC3DtI,KAAKiyD,mBAAmBoD,cAAa,IAEzCr1D,KAAKshE,UAAUlC,iBACnB,CACA3nD,cACIzX,KAAKszC,eAAemB,cACpBz0C,KAAK2hE,eAAejqD,UACxB,CACAyqD,qBAAqBzmB,GACjB,MAAMgV,EAAY1wD,KAAKqhE,OAAO3Q,UACxB/1C,EAAQ+gC,EAAM/gC,MACd8xC,EAAUiE,aAAqBH,GAMrC,GAAI9D,GAAWzsD,KAAKohE,wBAAyB,CACzC,MAAMgB,EAAepiE,KAAKohE,wBAAwBiB,kBAAkB1nD,EAAO+1C,EAAWhV,EAAMA,OAC5F17C,KAAKqhE,OAAOvQ,gBAAgBsR,EAAcpiE,KAC9C,MACS2a,IACJ8xC,IAAYzsD,KAAKqyD,aAAaiN,SAAS3kD,EAAO+1C,KAC/C1wD,KAAKqhE,OAAO7+D,IAAImY,KAGd3a,KAAKqhE,QAAUrhE,KAAKqhE,OAAOhQ,gBAAkBrxD,KAAK+hE,gBACpD/hE,KAAKwhE,WAAWh7C,OAExB,CACA87C,oBAAoB5mB,GAChB17C,KAAKqhE,OAAOvQ,gBAAgBpV,EAAM/gC,MAAO3a,KAC7C,CACAuiE,sBACIviE,KAAK0hE,gBAAkB,OACvB1hE,KAAKiyD,mBAAmBoD,cAC5B,CACAmN,sBAAsB9mB,GAClB17C,KAAK4hE,aAAmC,UAApBlmB,EAAM+mB,UACrBziE,KAAK4hE,cACN5hE,KAAK2hE,eAAetnD,MAE5B,CACAqoD,eACI,OAAO1iE,KAAKqhE,OAAO3Q,SACvB,CAEAiS,yBACQ3iE,KAAKqhE,SAAWrhE,KAAKmhE,cACrBnhE,KAAKmhE,aAAarQ,gBAAgB9wD,KAAKqhE,OAAO3Q,UAAW1wD,KAEjE,CAQA4iE,eAAeC,EAAQC,GAInB9iE,KAAKqhE,OAASwB,EAAS7iE,KAAKmhE,aAAa7P,QAAUtxD,KAAKmhE,aACxDnhE,KAAK+hE,eAAiBc,EAClBC,GACA9iE,KAAKiyD,mBAAmBmG,eAEhC,CACAnoB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFgzB,EAAoB,EACvHjxB,iBAl/EyFvrC,MAAE,CAAA8N,KAk/EJ0uD,EAAoB/yB,UAAA,6BAAAmJ,UAAA,SAAA9I,EAAAC,GAAwf,GAAxf,EAAAD,GAl/ElB9pC,MAk/E+fq4D,GAAW,KAAAvuB,EAAA,KAAA6H,EAl/E1gB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAA6yB,UAAAjrB,EAAAz1B,MAAA,GAAAsvB,UAAA,6BAAAC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,iCAAAs7C,GAAA,OAk/EJvR,EAAA+zB,sBAAAxiB,EAA6B,EAl/E3Bt7C,CAk/EkB,gCAAAs7C,GAAA,OAApBvR,EAAA+zB,sBAAAxiB,EAA6B,GAAT,EAAAxR,IAl/ElB9pC,MAAE,kBAAA+pC,EAAAizB,iBAAFh9D,MAAE+pC,EAAA8yB,MAk/EI,OAAM9yB,EAAA8yB,MAAW,IAl/EvB78D,MAAE,+BAAA+pC,EAAA+yB,WAAAU,SAk/EgB,EAAA7xB,OAAA,CAAAkxB,MAAA,SAAA/qB,SAAA,yBAAApI,MAAA,EAAAC,KAAA,GAAAC,OAAA,sdAAAC,SAAA,SAAAC,EAAAC,GAAw1E,GAAx1E,EAAAD,IAl/ElB9pC,MAAE,UAAFA,CAk/E+7B,oBAl/E/7BA,MAAE,wBAAAs7C,GAAA,OAk/EonDvR,EAAA+yB,WAAAuB,YAAA/iB,EAA8B,EAl/EppDt7C,CAk/EspD,yBAAAs7C,GAAA,OAAwBvR,EAAA+yB,WAAAwB,aAAAhjB,EAA+B,EAl/E7sDt7C,CAk/E+sD,uBAAAs7C,GAAA,OAAsBvR,EAAA+yB,WAAAyB,aAAAjjB,EAA+B,EAl/EpwDt7C,CAk/EswD,0BAAAs7C,GAAA,OAAyBvR,EAAA0zB,qBAAAniB,EAA4B,EAl/E3zDt7C,CAk/E6zD,yBAAAs7C,GAAA,OAAwBvR,EAAA6zB,oBAAAtiB,EAA2B,GAl/Eh3Dt7C,cAAE,EAAAwlD,GAAA,qBAAFxlD,MAAE,cAAFA,MAAE,0BAAA+pC,EAAAqzB,qBAk/E0uE,CAAI,EAl/EhvEp9D,CAk/EkvE,yBAAA+pC,EAAAqzB,qBAAqC,CAAK,EAl/E5xEp9D,CAk/E8xE,0BAAgB+pC,EAAA+yB,WAAAh7C,OAAkB,GAl/Eh0E9hB,MAAE,GAAFA,WAk/E02E,EAAA8pC,EAAA,KAAAoQ,EAl/E12El6C,MAAE,sDAAA+pC,EAAA+yB,WAAA0B,wBAAFx+D,CAk/Ek3B,gDAAA+pC,EAAAszB,gBAl/El3Br9D,MAAE,gBAAFA,CAAE,0BAAAk6C,EAAAnQ,EAAAuzB,sBAAAjyD,IAAA6uC,SAAA7uC,GAAFrL,cAAE+pC,EAAA+yB,WAAA2B,YAAFz+D,MAAE,KAAA+pC,EAAA+yB,WAAAxiD,GAAFta,CAk/E4+B,UAAA+pC,EAAA+yB,WAAAhD,QAl/E5+B95D,CAk/EyjC,YAAA+pC,EAAA+yB,WAAA9C,UAl/EzjCh6D,CAk/EmmC,UAAA+pC,EAAA+yB,WAAA4B,cAl/EnmC1+D,CAk/E+oC,UAAA+pC,EAAA+yB,WAAA6B,cAl/E/oC3+D,CAk/E2rC,aAAA+pC,EAAA+yB,WAAA8B,iBAl/E3rC5+D,CAk/E6uC,kBAAA+pC,EAAA+yB,WAAA0B,wBAl/E7uCx+D,CAk/E2yC,WAAA+pC,EAAAi0B,eAl/E3yCh+D,CAk/E80C,YAAA+pC,EAAA+yB,WAAAnY,UAl/E90C3kD,CAk/Ew3C,kBAAA+pC,EAAA6a,gBAl/Ex3C5kD,CAk/Em6C,gBAAA+pC,EAAA8a,cAl/En6C7kD,CAk/E08C,0BAl/E18CA,CAk/E6+C,0BAAA+pC,EAAA+a,wBAl/E7+C9kD,CAk/EwiD,wBAAA+pC,EAAAgb,uBAl/ExiD/kD,cAAE,kBAAA+pC,EAAAszB,gBAAFr9D,cAAE,uBAAA+pC,EAAAqzB,qBAAFp9D,MAAE,QAAA+pC,EAAA8yB,OAAA,WAAF78D,cAAE+pC,EAAAozB,iBAk/Eu1E,GAAArqB,aAAA,CAAs7D+rB,MAAwJxG,GAAyZiD,MAAgK9B,OAAS5tB,OAAA,62DAAAxB,cAAA,EAAA5jC,KAAA,CAAAs4D,UAAmK,CAACtD,GAAwBC,eAAgBD,GAAwBQ,iBAAenwB,gBAAA,IACxzK,OA7HK2wB,CAAoB,KA+IpBuC,GAAiB,MAAvB,MAAMA,EACFC,YAAWpnD,OAAOukD,OAClB8C,qBAAoBrnD,OAAOoiC,OAC3B2T,gBAAe/1C,OAAOo1C,MAAa,CAAEjgB,UAAU,IAC/C6gB,QAAOh2C,OAAOi2C,MAAgB,CAAE9gB,UAAU,IAC1C4vB,UAAS/kD,OAAOm0C,IAChBmT,mBAAkBtnD,OAAOqkD,IACzBkD,mBAAqBtwB,MAAamf,MAClCoR,aAAYxnD,OAAOynD,OAEnBb,wBAEA,WAAI1E,GAGA,OAAOx+D,KAAKy+D,WAAaz+D,KAAKgkE,gBAAkBhkE,KAAKgkE,gBAAgBC,gBAAkB,KAC3F,CACA,WAAIzF,CAAQ7jD,GACR3a,KAAKy+D,SAAWz+D,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,GACvF,CACA8jD,SAEAC,UAAY,QAQZ,SAAI6C,GACA,OAAQvhE,KAAKkkE,SAAWlkE,KAAKgkE,gBAAkBhkE,KAAKgkE,gBAAgBG,uBAAoBp0D,EAC5F,CACA,SAAIwxD,CAAM5mD,GACN3a,KAAKkkE,OAASvpD,CAClB,CACAupD,OAKAhC,SAAU,EAEV,YAAI/0C,GACA,YAA0Bpd,IAAnB/P,KAAKqyC,WAA2BryC,KAAKgkE,gBACtChkE,KAAKgkE,gBAAgB72C,WACnBntB,KAAKqyC,SACjB,CACA,YAAIllB,CAASxS,GACLA,IAAU3a,KAAKqyC,YACfryC,KAAKqyC,UAAY13B,EACjB3a,KAAKi9D,aAAa5iD,UAAKtK,GAE/B,CACAsiC,UAEA+xB,UAAY,QAEZC,UAAY,QAMZC,cAAe,EAKfzK,aAAe,IAAI/M,MAKnByO,cAAgB,IAAIzO,MAIpB6R,YAAc,IAAI7R,OAAa,GAE/BzD,UAEAkb,aAAe,IAAIzX,MAEnB0X,aAAe,IAAI1X,MAEnB,cAAIqW,GACA,OAAOnjE,KAAKykE,WAChB,CACA,cAAItB,CAAWxoD,GACX3a,KAAKykE,eAAcC,OAAkB/pD,EACzC,CACA8pD,YAEA,UAAIE,GACA,OAAO3kE,KAAK4kE,OAChB,CACA,UAAID,CAAOhqD,GACHA,EACA3a,KAAKyQ,OAGLzQ,KAAKwmB,OAEb,CACAo+C,SAAU,EAEV5lD,MAAK1C,OAAOsxC,OAAc3tD,MAAM,mBAEhCmjE,cACI,OAAOpjE,KAAKgkE,iBAAmBhkE,KAAKgkE,gBAAgB/mC,GACxD,CAEAomC,cACI,OAAOrjE,KAAKgkE,iBAAmBhkE,KAAKgkE,gBAAgB7mC,GACxD,CACAmmC,iBACI,OAAOtjE,KAAKgkE,iBAAmBhkE,KAAKgkE,gBAAgB9a,UACxD,CAEA2b,YAEAC,cAEAC,0BAA4B,KAE5BC,sBAAwB,GAAGhlE,KAAKgf,cAEhC+iD,eAEAiC,gBAEA/G,aAAe,IAAI1lD,KACnBi2C,aAAYlxC,OAAOw4B,OACnBmd,sBAAqB31C,OAAO41C,OAC5BryD,cAIIG,KAAKqhE,OAAOxQ,iBAAiBvoD,UAAU,KACnCtI,KAAKiyD,mBAAmBoD,cAAa,EAE7C,CACA9G,YAAY9tB,GACR,MAAMwkC,EAAiBxkC,EAAQ2jC,WAAgB3jC,EAAQ4jC,UACvD,GAAIY,IAAmBA,EAAenQ,aAAe90D,KAAK6kE,YAAa,CACnE,MAAMK,EAAmBllE,KAAK6kE,YAAYM,YAAYD,iBAClDA,aAA4BE,QAC5BplE,KAAKqlE,uBAAuBH,GACxBllE,KAAK2kE,QACL3kE,KAAK6kE,YAAYS,iBAG7B,CACAtlE,KAAKi9D,aAAa5iD,UAAKtK,EAC3B,CACA0H,cACIzX,KAAKulE,kBACLvlE,KAAKwmB,QACLxmB,KAAK6jE,mBAAmBpvB,cACxBz0C,KAAKi9D,aAAavlD,UACtB,CAEA8tD,OAAOvU,GACHjxD,KAAKqhE,OAAO7+D,IAAIyuD,EACpB,CAEA8R,YAAYjD,GACR9/D,KAAK65D,aAAavL,KAAKwR,EAC3B,CAEAkD,aAAajD,GACT//D,KAAKu7D,cAAcjN,KAAKyR,EAC5B,CAEAkD,aAAatD,GACT3/D,KAAK2+D,YAAYrQ,KAAKqR,EAC1B,CAMA8F,cAAc/nB,GACN,OAGJ19C,KAAK6jE,mBAAmBpvB,cACxBz0C,KAAKgkE,gBAAkBtmB,EACvB19C,KAAK6jE,mBAAqBnmB,EAAMuf,aAAa30D,UAAU,IAAMtI,KAAKi9D,aAAa5iD,UAAKtK,IAC7E/P,KAAKqhE,MAChB,CAKAqE,gBAAgB7C,GAIZ7iE,KAAK+hE,eAAiBc,EACtB7iE,KAAK8kE,eAAea,SAAS/C,eAAeC,GAAQ,EACxD,CAKA+C,cAAc/C,GACNA,IAAW7iE,KAAK+hE,iBAChB/hE,KAAK+hE,eAAiB,KACtB/hE,KAAK8kE,eAAea,SAAS/C,eAAe,MAAM,GAE1D,CAEAnyD,OAGQzQ,KAAK4kE,SAAW5kE,KAAKmtB,UAAYntB,KAAK8kE,eAAea,SAAS/D,eAMlE5hE,KAAK+kE,6BAA4Bc,SACjC7lE,KAAK8lE,eACL9lE,KAAK4kE,SAAU,EACf5kE,KAAKukE,aAAajW,OACtB,CAEA9nC,QAGI,IAAKxmB,KAAK4kE,SAAW5kE,KAAK8kE,eAAea,SAAS/D,aAC9C,OAEJ,MAAMmE,EAAkB/lE,KAAKskE,cACzBtkE,KAAK+kE,2BAC2C,mBAAzC/kE,KAAK+kE,0BAA0BjW,MACpCkX,EAAgBA,KAGdhmE,KAAK4kE,UACL5kE,KAAK4kE,SAAU,EACf5kE,KAAKwkE,aAAalW,OAAK,EAG/B,GAAItuD,KAAK8kE,cAAe,CACpB,MAAQa,WAAUM,YAAajmE,KAAK8kE,cACpCa,EAASpD,sBACToD,EAAShE,eAAe99D,QAAKsb,MAAK,IAAI7W,UAAU,KAC5C,MAAM49D,EAAgBlmE,KAAK8jE,UAAUoC,cAGjCH,KACEG,GACEA,IAAkBlmE,KAAK8jE,UAAUoC,eACjCD,EAAS/xB,cAAcoN,SAAS4kB,KACpClmE,KAAK+kE,0BAA0BjW,QAEnC9uD,KAAK+kE,0BAA4B,KACjC/kE,KAAKulE,iBAAgB,EAE7B,CACIQ,EAMAl9B,WAAWm9B,GAGXA,GAER,CAEArD,yBACI3iE,KAAK8kE,eAAea,UAAUhD,wBAClC,CAEAwD,sBAAsBR,GAClBA,EAASnE,WAAaxhE,KACtB2lE,EAASpE,MAAQvhE,KAAKuhE,MACtBoE,EAAS3D,eAAiBhiE,KAAKgkE,gBAAgBoC,oBAC/CT,EAAS/C,eAAe5iE,KAAK+hE,gBAAgB,EACjD,CAEA+D,eACI9lE,KAAKulE,kBACL,MAAMc,EAAWrmE,KAAKkiE,QAChBW,EAAS,IAAI1D,MAAgB+B,GAAsBlhE,KAAK2jE,mBACxD2C,EAActmE,KAAK6kE,YAAc7kE,KAAK0jE,SAASpmD,OAAO,IAAIipD,MAAc,CAC1ErB,iBAAkBmB,EAAWrmE,KAAKwmE,qBAAuBxmE,KAAKymE,uBAC9DC,aAAa,EACbC,cAAe,CACXN,EAAW,4BAA8B,mCACzCrmE,KAAKglE,uBAET4B,UAAW5mE,KAAKsyD,MAAQ,MACxBuU,eAAgBR,EAAWrmE,KAAK0jE,SAAS5C,iBAAiBgG,QAAU9mE,KAAK4jE,kBACzET,WAAY,mBAAkBkD,EAAW,SAAW,YAExDrmE,KAAK+mE,gBAAgBT,GAAYh+D,UAAUozC,IACnCA,GACAA,EAAME,iBAEV57C,KAAKwmB,OAAM,GAMf8/C,EAAW7qB,gBAAgBnzC,UAAUozC,IACjC,MAAMia,EAAUja,EAAMia,SAClBA,IAAYI,OACZJ,IAAYK,OACZL,IAAYC,OACZD,IAAYG,OACZH,IAAYU,OACZV,IAAYc,QACZ/a,EAAME,gBAAe,GAG7B57C,KAAK8kE,cAAgBwB,EAAWU,OAAOnE,GACvC7iE,KAAKmmE,sBAAsBnmE,KAAK8kE,cAAca,UAEzCU,MACDxX,OAAgB,KACZyX,EAAWhB,gBAAe,EAC3B,CAAEvsD,SAAU/Y,KAAKwtD,WAE5B,CAEA+X,kBACQvlE,KAAK6kE,cACL7kE,KAAK6kE,YAAYoC,UACjBjnE,KAAK6kE,YAAc7kE,KAAK8kE,cAAgB,KAEhD,CAEA0B,qBACI,OAAOxmE,KAAK0jE,SAASwD,WAAWC,SAASC,qBAAqBC,kBAClE,CAEAZ,uBACI,MAAMa,EAAWtnE,KAAK0jE,SACjBwD,WACAK,oBAAoBvnE,KAAKgkE,gBAAgBwD,6BACzCC,sBAAsB,2BACtBC,wBAAuB,GACvBC,mBAAmB,GACnBC,qBACL,OAAO5nE,KAAKqlE,uBAAuBiC,EACvC,CAEAjC,uBAAuBiC,GACnB,MAAMO,EAA8B,QAAnB7nE,KAAKokE,UAAsB,MAAQ,QAC9C0D,EAA0B,UAAbD,EAAuB,MAAQ,QAC5CE,EAA8B,UAAnB/nE,KAAKqkE,UAAwB,SAAW,MACnD2D,EAA0B,QAAbD,EAAqB,SAAW,MACnD,OAAOT,EAASW,cAAc,CAC1B,CACIC,QAASL,EACTM,QAASH,EACTI,SAAUP,EACVQ,SAAUN,GAEd,CACIG,QAASL,EACTM,QAASJ,EACTK,SAAUP,EACVQ,SAAUL,GAEd,CACIE,QAASJ,EACTK,QAASH,EACTI,SAAUN,EACVO,SAAUN,GAEd,CACIG,QAASJ,EACTK,QAASJ,EACTK,SAAUN,EACVO,SAAUL,IAGtB,CAEAjB,gBAAgBT,GACZ,MAAMgC,EAAyB,CAAC,UAAW,WAAY,WACvD,SAAOrzB,MAAMqxB,EAAWiC,gBAAiBjC,EAAWkC,cAAelC,EAAW7qB,gBAAgB53C,QAAKpB,MAAOi5C,GAE7FA,EAAMia,UAAYkB,SAAU,EAACC,OAAepb,IAChD17C,KAAKgkE,oBACFlN,OAAepb,EAAO,WACtBA,EAAMia,UAAYI,OAClBuS,EAAuBG,MAAOC,KAAa,EAAC5R,OAAepb,EAAOgtB,MAElF,CACAz4B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFu1B,EAAiB,EACpHxzB,iBAr5FyFvrC,MAAE,CAAA8N,KAq5FJixD,EAAiBpzB,OAAA,CAAA6yB,wBAAA,0BAAA1E,QAAA,UAAAE,UAAA,YAAA6C,MAAA,QAAAW,QAAA,uBAAgLyG,OAAgBx7C,SAAA,yBAAsCw7C,OAAgBvE,UAAA,YAAAC,UAAA,YAAAC,aAAA,iCAAkGqE,OAAgBtf,UAAA,YAAA8Z,WAAA,aAAAwB,OAAA,qBAAkFgE,QAAgB7Y,QAAA,CAAA+J,aAAA,eAAA0B,cAAA,gBAAAoD,YAAA,cAAA4F,aAAA,SAAAC,aAAA,UAAAhjD,SAAA,CAr5Fzd9c,eAs5F5F,OAjZK++D,CAAiB,KAkcjBmF,GAAa,MAAnB,MAAMA,UAAsBnF,GACxBxzB,iBAAW,UAAA44B,EAAA,gBAAA36B,GAAA,OAAA26B,MAx8F8EnkE,MAw8FUkkE,KAAa16B,GAAb06B,EAAa,GAArG,GACX34B,iBAz8FyFvrC,MAAE,CAAA8N,KAy8FJo2D,EAAaz6B,UAAA,qBAAAqI,SAAA,kBAAAh1B,SAAA,CAz8FX9c,MAy8FwE,CACzJ6sD,GACA,CAAE9a,QAASgtB,GAAmB/sB,YAAakyB,KA38FsClkE,OAAE0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,EAAAyB,gBAAA,IA68F9F,OANKq4B,CAAa,KA2BnB,MAAME,GACF19C,OACA29C,cAEApuD,MACA9a,YAEAurB,EAEA29C,GACI/oE,KAAKorB,OAASA,EACdprB,KAAK+oE,cAAgBA,EACrB/oE,KAAK2a,MAAQ3a,KAAKorB,OAAOzQ,KAC7B,EAEJ,IACMquD,GAAsB,MAA5B,MAAMA,EACF73B,eAAc70B,OAAO80B,OACrBihB,gBAAe/1C,OAAOo1C,MAAa,CAAEjgB,UAAU,IAC/C0gB,gBAAe71C,OAAO81C,MAAkB,CAAE3gB,UAAU,IAEpDw3B,eAEA,SAAItuD,GACA,OAAO3a,KAAKqhE,OAASrhE,KAAKkpE,mBAAmBlpE,KAAKqhE,OAAO3Q,WAAa1wD,KAAKmpE,aAC/E,CACA,SAAIxuD,CAAMA,GACN3a,KAAKopE,6BAA6BzuD,EACtC,CACA0mD,OAEA,YAAIl0C,GACA,QAASntB,KAAKqyC,WAAaryC,KAAKqpE,iBACpC,CACA,YAAIl8C,CAASxS,GACT,MAAM2uD,EAAW3uD,EACXkzC,EAAU7tD,KAAKmxC,YAAY+C,cAC7Bl0C,KAAKqyC,YAAci3B,IACnBtpE,KAAKqyC,UAAYi3B,EACjBtpE,KAAKi9D,aAAa5iD,UAAKtK,IAMvBu5D,GAAYtpE,KAAKipE,gBAAkBpb,EAAQ0b,MAI3C1b,EAAQ0b,MAEhB,CACAl3B,UAEAm3B,WAAa,IAAI1c,MAEjB2c,UAAY,IAAI3c,MAEhBmQ,aAAe,IAAI1lD,KACnBmyD,WAAaA,OACbC,mBAAqBA,OACrBC,aAAeA,OACfC,0BAA4Bt2B,MAAamf,MACzCoX,oBAAsBv2B,MAAamf,MAMnCyW,cAEAY,gBAAkBA,IACP/pE,KAAKgqE,gBACN,KACA,CAAEC,mBAAsB,CAAEC,KAAQlqE,KAAKmxC,YAAY+C,cAAcv5B,QAG3EwvD,iBAAoB9tC,IAChB,MAAM+tC,EAAepqE,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAY32B,EAAQ1hB,QAChG,OAAQyvD,GAAgBpqE,KAAKqqE,eAAeD,GACtC,KACA,CAAEE,qBAAuB,EAAK,EAGxCC,cAAiBluC,IACb,MAAM+tC,EAAepqE,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAY32B,EAAQ1hB,QAC1FsiB,EAAMj9B,KAAKojE,cACjB,OAAQnmC,IAAQmtC,GAAgBpqE,KAAKqyD,aAAakD,YAAYt4B,EAAKmtC,IAAiB,EAC9E,KACA,CAAEI,iBAAoB,CAAEvtC,IAAOA,EAAKwtC,OAAUL,GAAe,EAGvEM,cAAiBruC,IACb,MAAM+tC,EAAepqE,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAY32B,EAAQ1hB,QAC1FwiB,EAAMn9B,KAAKqjE,cACjB,OAAQlmC,IAAQitC,GAAgBpqE,KAAKqyD,aAAakD,YAAYp4B,EAAKitC,IAAiB,EAC9E,KACA,CAAEO,iBAAoB,CAAExtC,IAAOA,EAAKstC,OAAUL,GAAe,EAGvEQ,iBACI,MAAO,CAAC5qE,KAAK+pE,gBAAiB/pE,KAAKuqE,cAAevqE,KAAK0qE,cAAe1qE,KAAKmqE,iBAC/E,CAEAU,eAAeC,GACX9qE,KAAKqhE,OAASyJ,EACd9qE,KAAK6pE,0BAA0Bp1B,cAC3Bz0C,KAAKmpE,eACLnpE,KAAK+qE,aAAa/qE,KAAKmpE,eAE3BnpE,KAAK6pE,0BAA4B7pE,KAAKqhE,OAAOxQ,iBAAiBvoD,UAAUozC,IACpE,GAAI17C,KAAKgrE,yBAAyBtvB,GAAQ,CACtC,MAAM/gC,EAAQ3a,KAAKkpE,mBAAmBxtB,EAAMgV,WAC5C1wD,KAAKgqE,gBAAkBhqE,KAAKirE,cAActwD,GAC1C3a,KAAK4pE,aAAajvD,GAClB3a,KAAK0pE,aACL1pE,KAAKkrE,aAAavwD,GAClB3a,KAAKypE,UAAUnb,KAAK,IAAIwa,GAAwB9oE,KAAMA,KAAKmxC,YAAY+C,gBACvEl0C,KAAKwpE,WAAWlb,KAAK,IAAIwa,GAAwB9oE,KAAMA,KAAKmxC,YAAY+C,eAC5E,GAER,CAEA81B,iBAAkB,EAClBnqE,cAUIG,KAAK8pE,oBAAsB9pE,KAAKqyD,aAAasC,cAAcrsD,UAAU,KACjEtI,KAAKopE,6BAA6BppE,KAAK2a,MAAK,EAEpD,CACA45B,kBACIv0C,KAAKipE,gBAAiB,CAC1B,CACA1a,YAAY9tB,IA6IhB,SAAS0qC,GAAsB1qC,EAAS2wB,GACpC,MAAM3rD,EAAOlF,OAAOkF,KAAKg7B,GACzB,QAASp/B,KAAOoE,EAAM,CAClB,MAAQ85D,gBAAeC,gBAAiB/+B,EAAQp/B,GAChD,IAAI+vD,EAAQF,eAAeqO,KAAkBnO,EAAQF,eAAesO,GAMhE,OAAO,EALP,IAAKpO,EAAQkO,SAASC,EAAeC,GACjC,OAAO,CAMnB,CACA,OAAO,CACX,EA1JY2L,CAAsB1qC,EAASzgC,KAAKqyD,eACpCryD,KAAKi9D,aAAa5iD,UAAKtK,EAE/B,CACA0H,cACIzX,KAAK6pE,0BAA0Bp1B,cAC/Bz0C,KAAK8pE,oBAAoBr1B,cACzBz0C,KAAKi9D,aAAavlD,UACtB,CAEA0zD,0BAA0B9sD,GACtBte,KAAK2pE,mBAAqBrrD,CAC9B,CAEA+sD,SAASjxC,GACL,OAAOp6B,KAAKsrE,WAAatrE,KAAKsrE,WAAWlxC,GAAK,IAClD,CAEAmxC,WAAW5wD,GACP3a,KAAKopE,6BAA6BzuD,EACtC,CAEA6wD,iBAAiBltD,GACbte,KAAK4pE,aAAetrD,CACxB,CAEAmtD,kBAAkBntD,GACdte,KAAK0pE,WAAaprD,CACtB,CAEAotD,iBAAiBrwB,GACbr7C,KAAKmtB,SAAWkuB,CACpB,CACAswB,WAAWjwB,IAKP,EAHuBob,OAAepb,EAAO,WACzCA,EAAMia,UAAYK,OAFS,CAAC,UAAW,WAAY,WAG5ByS,MAAOC,KAAa,EAAC5R,OAAepb,EAAOgtB,MAC/C1oE,KAAKmxC,YAAY+C,cAAcvtB,WAClD3mB,KAAK4rE,aACLlwB,EAAME,iBAEd,CACAiwB,SAASlxD,GACL,MAAMmxD,EAAoB9rE,KAAKgqE,gBAC/B,IAAI/Y,EAAOjxD,KAAKqyD,aAAaz0B,MAAMjjB,EAAO3a,KAAKmyD,aAAav0B,MAAM6rC,WAClEzpE,KAAKgqE,gBAAkBhqE,KAAKirE,cAAcha,GAC1CA,EAAOjxD,KAAKqyD,aAAaU,mBAAmB9B,GAC5C,MAAM8a,GAAc/rE,KAAKqyD,aAAaiN,SAASrO,EAAMjxD,KAAK2a,QAGrDs2C,GAAQ8a,EACT/rE,KAAK4pE,aAAa3Y,IAKdt2C,IAAU3a,KAAK2a,OACf3a,KAAK4pE,aAAa3Y,GAElB6a,IAAsB9rE,KAAKgqE,iBAC3BhqE,KAAK2pE,sBAGToC,IACA/rE,KAAK+qE,aAAa9Z,GAClBjxD,KAAKypE,UAAUnb,KAAK,IAAIwa,GAAwB9oE,KAAMA,KAAKmxC,YAAY+C,gBAE/E,CACA83B,YACIhsE,KAAKwpE,WAAWlb,KAAK,IAAIwa,GAAwB9oE,KAAMA,KAAKmxC,YAAY+C,eAC5E,CAEA+3B,UAEQjsE,KAAK2a,OACL3a,KAAKkrE,aAAalrE,KAAK2a,OAE3B3a,KAAK0pE,YACT,CAEAwB,aAAavwD,GACT3a,KAAKmxC,YAAY+C,cAAcv5B,MAClB,MAATA,EAAgB3a,KAAKqyD,aAAa+E,OAAOz8C,EAAO3a,KAAKmyD,aAAa+E,QAAQuS,WAAa,EAC/F,CAEAsB,aAAapwD,GAGL3a,KAAKqhE,QACLrhE,KAAKksE,oBAAoBvxD,GACzB3a,KAAKmpE,cAAgB,MAGrBnpE,KAAKmpE,cAAgBxuD,CAE7B,CAEAswD,cAActwD,GACV,OAAQA,GAAS3a,KAAKqyD,aAAa1qC,QAAQhN,EAC/C,CAKA0uD,kBACI,OAAO,CACX,CAEAD,6BAA6BzuD,GACzBA,EAAQ3a,KAAKqyD,aAAaW,YAAYr4C,GACtC3a,KAAKgqE,gBAAkBhqE,KAAKirE,cAActwD,GAC1CA,EAAQ3a,KAAKqyD,aAAaU,mBAAmBp4C,GAC7C3a,KAAK+qE,aAAapwD,GAClB3a,KAAKkrE,aAAavwD,EACtB,CAEA0vD,eAAe1vD,GACX,MAAMlY,EAASzC,KAAKsjE,iBACpB,OAAQ7gE,GAAUA,EAAOkY,EAC7B,CACAs1B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF86B,EAAsB,EACzH/4B,iBA1uGyFvrC,MAAE,CAAA8N,KA0uGJw2D,EAAsB34B,OAAA,CAAA11B,MAAA,QAAAwS,SAAA,yBAAmFw7C,QAAgB7Y,QAAA,CAAA0Z,WAAA,aAAAC,UAAA,aAAAjoD,SAAA,CA1uGvH9c,eA2uG5F,OAzPKskE,CAAsB,KA2R5B,MAAMmD,GAAgC,CAClC11B,QAAS21B,MACT11B,aAAa21B,SAAW,IAAMC,IAC9BC,OAAO,GAGLC,GAA4B,CAC9B/1B,QAASg2B,MACT/1B,aAAa21B,SAAW,IAAMC,IAC9BC,OAAO,GAEX,IACMD,GAAkB,MAAxB,MAAMA,UAA2BtD,GAC7B0D,cAAapwD,OAAOqwD,MAAgB,CAAEl7B,UAAU,IAChDm7B,oBAAsBr5B,MAAamf,MACnCma,oBAAsBt5B,MAAamf,MAEnC,iBAAIoa,CAActL,GACVA,IACAxhE,KAAK+sE,YAAcvL,EACnBxhE,KAAKgtE,UAAU3jE,IAAIm4D,EAAWmD,OAASnD,EAAWxiD,GAAK,MACvDhf,KAAK4sE,oBAAsBpL,EAAWgD,aAAal8D,UAAU,KACzDtI,KAAK0pE,aACL1pE,KAAKgtE,UAAU3jE,IAAI,KAAI,GAE3BrJ,KAAK6sE,oBAAsBrL,EAAW+C,aAAaj8D,UAAU,KACzDtI,KAAKgtE,UAAU3jE,IAAIm4D,EAAWxiD,GAAE,GAEpChf,KAAK6qE,eAAerJ,EAAWiE,cAAczlE,OAErD,CACA+sE,YAEAC,aAAYzlE,OAAO,MAEnB,OAAI01B,GACA,OAAOj9B,KAAKitE,IAChB,CACA,OAAIhwC,CAAItiB,GACJ,MAAMuyD,EAAaltE,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,IACjF3a,KAAKqyD,aAAaiN,SAAS4N,EAAYltE,KAAKitE,QAC7CjtE,KAAKitE,KAAOC,EACZltE,KAAK2pE,qBAEb,CACAsD,KAEA,OAAI9vC,GACA,OAAOn9B,KAAKmtE,IAChB,CACA,OAAIhwC,CAAIxiB,GACJ,MAAMuyD,EAAaltE,KAAKqyD,aAAaU,mBAAmB/yD,KAAKqyD,aAAaW,YAAYr4C,IACjF3a,KAAKqyD,aAAaiN,SAAS4N,EAAYltE,KAAKmtE,QAC7CntE,KAAKmtE,KAAOD,EACZltE,KAAK2pE,qBAEb,CACAwD,KAEA,cAAIjkB,GACA,OAAOlpD,KAAKotE,WAChB,CACA,cAAIlkB,CAAWvuC,GACX,MAAM0yD,EAAmBrtE,KAAKqqE,eAAerqE,KAAK2a,OAClD3a,KAAKotE,YAAczyD,EACf3a,KAAKqqE,eAAerqE,KAAK2a,SAAW0yD,GACpCrtE,KAAK2pE,oBAEb,CACAyD,YAEA9B,WACAzrE,cACIC,QACAE,KAAKsrE,WAAa/uC,MAAW+wC,QAAQxtE,MAAM8qE,iBAC/C,CAKApD,4BACI,OAAOxnE,KAAK0sE,WAAa1sE,KAAK0sE,WAAWlF,4BAA8BxnE,KAAKmxC,WAChF,CAEAi1B,oBACI,OAAIpmE,KAAK0sE,WACE1sE,KAAK0sE,WAAWa,aAEpBvtE,KAAKmxC,YAAY+C,cAActG,aAAa,kBACvD,CAEAu2B,kBACI,OAAOnkE,KAAK0sE,WAAa1sE,KAAK0sE,WAAWnL,WAAQxxD,CACrD,CAEAk0D,gBACI,OAAOjkE,KAAK2a,KAChB,CACAlD,cACI3X,MAAM2X,cACNzX,KAAK4sE,oBAAoBn4B,cACzBz0C,KAAK6sE,oBAAoBp4B,aAC7B,CAEAm3B,aACQ5rE,KAAK+sE,aACL/sE,KAAK+sE,YAAYt8D,MAEzB,CACAy4D,mBAAmBsE,GACf,OAAOA,CACX,CACAtB,oBAAoBvxD,GACZ3a,KAAKqhE,QACLrhE,KAAKqhE,OAAOvQ,gBAAgBn2C,EAAO3a,KAE3C,CAEAojE,cACI,OAAOpjE,KAAKitE,IAChB,CAEA5J,cACI,OAAOrjE,KAAKmtE,IAChB,CAEA7J,iBACI,OAAOtjE,KAAKotE,WAChB,CACApC,yBAAyBtvB,GACrB,OAAOA,EAAM35B,SAAW/hB,IAC5B,CACAiwC,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFo+B,EAAkB,EACrHr8B,iBAl5GyFvrC,MAAE,CAAA8N,KAk5GJ85D,EAAkBn+B,UAAA,+BAAA+B,UAAA,2BAAAC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAl5GhB9pC,MAAE,iBAAAs7C,GAAA,OAk5GJvR,EAAAo9B,SAAA7rB,EAAA50B,OAAAzQ,MAA6B,EAl5G3BjW,CAk5GgB,2BAAlB+pC,EAAAu9B,WAAW,EAl5GTtnE,CAk5GgB,yBAAlB+pC,EAAAw9B,SAAS,EAl5GPvnE,CAk5GgB,mBAAAs7C,GAAA,OAAlBvR,EAAAk9B,WAAA3rB,EAAkB,KAAAxR,IAl5GhB9pC,MAAE,WAAA+pC,EAAAthB,UAAFzoB,MAAE,gBAAA+pC,EAAAs+B,YAk5GU,SAAW,KAl5GvBroE,CAk5G2B,YAA7B+pC,EAAAu+B,YAl5GEtoE,CAk5GS,MAAA+pC,EAAAxR,IAALwR,EAAA4jB,aAAAob,UAAAh/B,EAAAxR,KAA8B,KAl5GlCv4B,CAk5GsC,MAAA+pC,EAAAtR,IAAlCsR,EAAA4jB,aAAAob,UAAAh/B,EAAAtR,KAA8B,KAl5GlCz4B,CAk5GsC,oBAAA+pC,EAAAs+B,YAAAt+B,EAAAs+B,YAAA/tD,GAAT,MAAI,EAAAqxB,OAAA,CAAAy8B,cAAA,gBAAA7vC,IAAA,MAAAE,IAAA,MAAA+rB,WAAA,wCAAA1S,SAAA,uBAAAh1B,SAAA,CAl5GjC9c,MAk5GurB,CACxwBynE,GACAK,GACA,CAAE/1B,QAASi3B,MAA0Bh3B,YAAa41B,KAr5G+B5nE,SAu5G5F,OA9HK4nE,CAAkB,KAqKlBqB,GAAuB,MAA7B,MAAMA,EACF19B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFy/B,EAAuB,EAC1H19B,iBAh8GyFvrC,MAAE,CAAA8N,KAg8GJm7D,EAAuBx/B,UAAA,sCACjH,OAHKw/B,CAAuB,KAUvBC,GAAmB,MAAzB,MAAMA,EACF5hB,SAAQ1vC,OAAO8tC,IACf6H,sBAAqB31C,OAAO41C,OAC5B2b,cAAgBt6B,MAAamf,MAE7B8O,WAEAsM,SAEA9lB,UAEA,YAAI76B,GACA,YAAuBpd,IAAnB/P,KAAKqyC,WAA2BryC,KAAKwhE,WAC9BxhE,KAAKwhE,WAAWr0C,WAElBntB,KAAKqyC,SAClB,CACA,YAAIllB,CAASxS,GACT3a,KAAKqyC,UAAY13B,CACrB,CACA03B,UAEAF,cAEA47B,YAEAC,QACAnuE,cACI,MAAMouE,KAAkB3xD,OAAO,IAAI4xD,MAAmB,YAAa,CAAEz8B,UAAU,IACzE08B,EAAiBC,OAAOH,GAC9BjuE,KAAK8tE,SAAWK,GAAqC,IAAnBA,EAAuBA,EAAiB,IAC9E,CACA5f,YAAY9tB,GACJA,EAAQ+gC,YACRxhE,KAAKquE,oBAEb,CACA52D,cACIzX,KAAK6tE,cAAcp5B,aACvB,CACAigB,qBACI10D,KAAKquE,oBACT,CACAC,MAAM5yB,GACE17C,KAAKwhE,aAAexhE,KAAKmtB,WACzBntB,KAAKwhE,WAAW/wD,OAChBirC,EAAMqb,kBAEd,CACAsX,qBACI,MAAME,EAAyBvuE,KAAKwhE,WAAaxhE,KAAKwhE,WAAWvE,gBAAeuR,SAC1EC,EAAoBzuE,KAAKwhE,YAAcxhE,KAAKwhE,WAAWwC,gBACvDhkE,KAAKwhE,WAAWwC,gBAAgB/G,gBAChCuR,SACAE,EAAoB1uE,KAAKwhE,cACzBvsB,MAAMj1C,KAAKwhE,WAAW+C,aAAcvkE,KAAKwhE,WAAWgD,eAAY,EAChEgK,SACNxuE,KAAK6tE,cAAcp5B,cACnBz0C,KAAK6tE,iBAAgB54B,MAAMj1C,KAAKgsD,MAAMvrB,QAAS8tC,EAAwBE,EAAmBC,GAAmBpmE,UAAU,IAAMtI,KAAKiyD,mBAAmBoD,eACzJ,CACAplB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF0/B,EAAmB,EACtH39B,iBArgHyFvrC,MAAE,CAAA8N,KAqgHJo7D,EAAmBz/B,UAAA,4BAAAgI,eAAA,SAAA3H,EAAAC,EAAA2H,GAAuuB,GAAvuB,EAAA5H,GArgHjB9pC,MAAE0xC,EAqgH+tBu3B,GAAuB,KAAAn/B,EAAA,KAAA6H,EArgHxvB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAs/B,YAAA13B,EAAAz1B,MAAA,GAAA02B,UAAA,SAAA9I,EAAAC,GAAA,KAAAD,GAAF9pC,MAAEksC,GAAA,KAAApC,EAAA,KAAA6H,EAAF3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAu/B,QAAA33B,EAAAz1B,MAAA,GAAAsvB,UAAA,4BAAAC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,iBAAAs7C,GAAA,OAqgHJvR,EAAA6/B,MAAAtuB,EAAa,GAAM,EAAAxR,IArgHjB9pC,MAAE,WAqgHJ,KArgHEA,CAqgHE,oBAAA+pC,EAAA+yB,WAAA/yB,EAAA+yB,WAAAxiD,GAAyB,MArgH3Bta,MAAE,+BAAA+pC,EAAA+yB,YAAA/yB,EAAA+yB,WAAAmD,OAAFjgE,CAqgHiB,aAAA+pC,EAAA+yB,YAAgB,WAAhB/yB,EAAA+yB,WAAAD,MArgHjB78D,CAqgHiB,WAAA+pC,EAAA+yB,YAAgB,SAAhB/yB,EAAA+yB,WAAAD,OAAA,EAAAlxB,OAAA,CAAAmxB,WAAA,uBAAAsM,SAAA,WAAA9lB,UAAA,6BAAA76B,SAAA,yBAAuMw7C,OAAgBx2B,cAAA,iBAAAqE,SAAA,wBAAAh1B,SAAA,CArgHxO9c,aAAEiyC,mBAAA7F,GAAA1C,MAAA,EAAAC,KAAA,EAAAC,OAAA,6XAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAAF9pC,MAAEmsC,IAAFnsC,MAAE,gBAAFA,MAAE,EAAAylD,GAAA,kBAAFzlD,MAAE,GAAFA,SAqgHotD,EAAA8pC,IArgHptD9pC,MAAE,WAAA+pC,EAAAthB,SAAFzoB,CAqgH8rC,gBAAA+pC,EAAA0D,eArgH9rCztC,MAAE,gBAAA+pC,EAAA+yB,WAAA,cAAF98D,CAAE,aAAA+pC,EAAAuZ,WAAAvZ,EAAAud,MAAA1B,kBAAF5lD,CAAE,WAAA+pC,EAAAthB,UAAA,EAAAshB,EAAAq/B,UAAFppE,MAAE,GAAFA,MAAE+pC,EAAAs/B,aAAA,KAqgHmoD,EAAAv2B,aAAA,CAAwd2mB,OAAa7tB,OAAA,iVAAAxB,cAAA,EAAAyB,gBAAA,IACtsE,OA9DKq9B,CAAmB,KAmgCnBe,GAAmB,MAAzB,MAAMA,EACF1+B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFygC,EAAmB,EACtH1+B,iBA78IyFvrC,KAAE,CAAA8N,KA68ISm8D,IAyCpG1+B,iBAt/IyFvrC,MAAE,CAAAkqE,UAs/IyC,CAACxkB,GAAmB4W,IAAgDvwB,QAAA,CAAYhB,MAC5Mo/B,MACAC,MACAC,MACAr+B,MACAwwB,GACA0M,GACA/Q,GAAmBmS,SAC9B,OAnDKL,CAAmB,8BC1gJzB,MAAA9gC,GAAA,mCAAA8C,IAAAs+B,EAAAC,EAAAC,MAAA,2BAAAF,EAAA,6BAAAC,EAAA,gCAAAC,IAAA,SAAAC,GAAA5gC,EAAAC,GAAA,KAAAD,EAAA,OAAA+I,EA+CoG7yC,cAAE,UAAFA,MAAE,yBAAA2qE,EAAF3qE,MAAE6yC,GAAAiD,UAAAb,EAAFj1C,MAAE,UAAFA,MAsfu7Ci1C,EAAA21B,WAAAD,GAAgB,GAtfv8C3qE,MAAE,YAAFA,MAAE,GAAFA,SAsf0zD,MAAA8pC,EAAA,OAAA6gC,EAAA5gC,EAAA+L,UAAA+0B,EAAA9gC,EAAAzmC,MAAAwnE,EAtf1zD9qE,QAAEsD,MAAA2xC,EAAFj1C,cAAE,wBAAA2qE,EAAAI,UAAA,IAAF/qE,MAAE,YAAAi1C,EAAA2M,QAAA,IAAF5hD,CAsf0yC,iBAAAi1C,EAAA+1B,UAAA/1B,EAAA2M,QAAA,IAtf1yC5hD,CAsfq2C,oBAAAi1C,EAAA+1B,UAAA/1B,EAAA2M,QAAA,KAtfr2C5hD,MAAE,8BAAAi1C,EAAAg2B,aAAAH,EAAAD,GAAF7qE,CAsfqvB,iCAAA2qE,EAAA1rD,QAtfrvBjf,CAsfszB,gCAAAi1C,EAAAuV,UAAAmgB,EAAA10D,OAtftzBjW,CAsf+3B,kCAAAi1C,EAAAi2B,YAAAP,EAAA10D,OAtf/3BjW,CAsf48B,gCAAAi1C,EAAAk2B,UAAAR,EAAA10D,QAtf58BjW,MAAE,WAAAi1C,EAAAg2B,aAAAH,EAAAD,GAAA,MAAF7qE,MAAE,aAAA2qE,EAAArnB,UAAFtjD,CAAE,iBAAA2qE,EAAA1rD,SAAA,KAAFjf,CAAE,eAAA2qE,EAAA10D,QAAAg/B,EAAAuO,WAAA,YAAFxjD,CAAE,gBAAAi1C,EAAAm2B,WAAAT,EAAA10D,QAAFjW,cAAE,UAAFA,MAAE,GAAAisC,GAAA0+B,EAAAU,IAAAV,EAAA10D,QAAAg/B,EAAAuO,WAAAvO,EAAAm2B,WAAAT,EAAA10D,SAAFjW,cAAE,IAAA2qE,EAAAhnB,aAAA,IAsfsyD,WAAA2nB,GAAAxhC,EAAAC,GAAyB,GAAzB,EAAAD,IAtfxyD9pC,MAAE,UAAFA,MAAE,EAAA0qE,GAAA,aAAF1qE,SAsfi0D,EAAA8pC,EAAA,OAAA+Z,EAAA9Z,EAAA+L,UAtfj0D91C,cAAE,UAAA6jD,EAsf8gB,QAAA3X,GAAAq+B,KAAA,qBAAAA,IAAA,SAAAgB,GAAAzhC,EAAAC,GAuqC8V,GAvqC9V,EAAAD,IAtfhhB9pC,MAAE,OAAFA,CA6pDk0B,UA7pDl0BA,MAAE,GAAFA,WA6pD82B,EAAA8pC,EAAA,OAAA0hC,EAAAzhC,EAAA+L,UA7pD92B91C,MAAE,GAAFA,MAAEwrE,EA6pD01B,WAAAC,GAAA3hC,EAAAC,GAAyB,GAAzB,EAAAD,IA7pD51B9pC,MAAE,UAAFA,MAAE,EAAAurE,GAAA,YAAFvrE,SA6pDq3B,EAAA8pC,EAAA,OAAAkO,EA7pDr3Bh4C,sBAAE,UAAAg4C,EAAA0zB,YA6pD6zB,WAAAC,GAAA7hC,EAAAC,GAA4hB,GAA5hB,EAAAD,IA7pD/zB9pC,MAAE,SAAFA,CA6pDgyC,UA7pDhyCA,MAAE,GAAFA,WA6pD21C,EAAA8pC,EAAA,OAAA8hC,EAAA7hC,EAAA+L,UA7pD31C91C,MAAE,aAAA4rE,EAAA5nB,MAAFhkD,MAAE,GAAFA,MAAE4rE,EAAAC,MA6pDm0C,WAAAC,GAAAhiC,EAAAC,GAAA,KAAAD,EAAA,OAAA+I,EA7pDr0C7yC,cAAE,iCAAFA,MAAE,8BAAAs7C,GAAFt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA4gEkoLg4C,EAAA+zB,yBAAAzwB,GAAgC,EA5gElqLt7C,CA4gEoqL,0BAAAs7C,GA5gEpqLt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA4gEqsLg4C,EAAAg0B,aAAA1wB,GAAoB,EA5gEztLt7C,CA4gE2tL,2BA5gE3tLA,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA4gE2vLg4C,EAAAi0B,eAAc,GA5gEzwLjsE,OA4gEuyL,MAAA8pC,EAAA,OAAAkO,EA5gEvyLh4C,cAAE,eAAAg4C,EAAAk0B,aAAFlsE,CA4gE8tK,iBAAAg4C,EAAA6b,eA5gE9tK7zD,CA4gE+wK,WAAAg4C,EAAA/5B,SA5gE/wKje,CA4gEozK,YAAAg4C,EAAAm0B,UA5gEpzKnsE,CA4gE21K,aAAAg4C,EAAAo0B,WA5gE31KpsE,CA4gEo4K,UAAAg4C,EAAA0M,QA5gEp4K1kD,CA4gEu6K,oBAAAg4C,EAAAq0B,kBA5gEv6KrsE,CA4gE89K,UAAAg4C,EAAAyM,QA5gE99KzkD,CA4gEigL,aAAAg4C,EAAAwM,WA5gEjgLxkD,CA4gE0iL,kBAAAg4C,EAAAs0B,gBAAmD,WAAAC,GAAAziC,EAAAC,GAAA,KAAAD,EAAA,OAAAob,EA5gE7lLllD,cAAE,gCAAFA,MAAE,2BAAFA,MAAEklD,GAAA,MAAAlN,EAAFh4C,QAAE,OAAFA,MA4gEqqMg4C,EAAA0iB,kBAAiB,EA5gEtrM16D,CA4gEwrM,8BAAAs7C,GA5gExrMt7C,MAAEklD,GAAA,MAAAlN,EAAFh4C,QAAE,OAAFA,MA4gE6tMg4C,EAAA+zB,yBAAAzwB,GAAgC,EA5gE7vMt7C,CA4gE+vM,yBAAAs7C,GA5gE/vMt7C,MAAEklD,GAAA,MAAAlN,EAAFh4C,QAAE,OAAFA,MA4gE+xMg4C,EAAAw0B,sBAAAlxB,GAA6B,EA5gE5zMt7C,CA4gE8zM,kBAAAs7C,GA5gE9zMt7C,MAAEklD,GAAA,MAAAlN,EAAFh4C,QAAE,OAAFA,MA4gEu1Mg4C,EAAAy0B,eAAAnxB,EAAAtD,EAAA00B,SAAAC,OAAsC,GA5gE73M3sE,OA4gE05M,MAAA8pC,EAAA,OAAAkO,EA5gE15Mh4C,cAAE,eAAAg4C,EAAAk0B,aAAFlsE,CA4gEi6L,WAAAg4C,EAAA/5B,SA5gEj6Lje,CA4gEs8L,YAAAg4C,EAAAm0B,UA5gEt8LnsE,CA4gE6+L,aAAAg4C,EAAAo0B,WA5gE7+LpsE,CA4gEshM,UAAAg4C,EAAA0M,QA5gEthM1kD,CA4gEyjM,UAAAg4C,EAAAyM,QA5gEzjMzkD,CA4gE4lM,aAAAg4C,EAAAwM,WAAyC,WAAAooB,GAAA9iC,EAAAC,GAAA,KAAAD,EAAA,OAAAwb,EA5gEroMtlD,cAAE,sCAAFA,MAAE,2BAAFA,MAAEslD,GAAA,MAAAtN,EAAFh4C,QAAE,OAAFA,MA4gEqyNg4C,EAAA0iB,kBAAiB,EA5gEtzN16D,CA4gEwzN,8BAAAs7C,GA5gExzNt7C,MAAEslD,GAAA,MAAAtN,EAAFh4C,QAAE,OAAFA,MA4gE61Ng4C,EAAA+zB,yBAAAzwB,GAAgC,EA5gE73Nt7C,CA4gE+3N,wBAAAs7C,GA5gE/3Nt7C,MAAEslD,GAAA,MAAAtN,EAAFh4C,QAAE,OAAFA,MA4gE85Ng4C,EAAA60B,0BAAAvxB,GAAiC,EA5gE/7Nt7C,CA4gEi8N,kBAAAs7C,GA5gEj8Nt7C,MAAEslD,GAAA,MAAAtN,EAAFh4C,QAAE,OAAFA,MA4gE09Ng4C,EAAAy0B,eAAAnxB,EAAAtD,EAAA00B,SAAAI,MAAqC,GA5gE//N9sE,OA4gEkiO,MAAA8pC,EAAA,OAAAkO,EA5gEliOh4C,cAAE,eAAAg4C,EAAAk0B,aAAFlsE,CA4gEiiN,WAAAg4C,EAAA/5B,SA5gEjiNje,CA4gEskN,YAAAg4C,EAAAm0B,UA5gEtkNnsE,CA4gE6mN,aAAAg4C,EAAAo0B,WA5gE7mNpsE,CA4gEspN,UAAAg4C,EAAA0M,QA5gEtpN1kD,CA4gEyrN,UAAAg4C,EAAAyM,QA5gEzrNzkD,CA4gE4tN,aAAAg4C,EAAAwM,WAAyC,QAAArY,GAAA,wBAAA4gC,GAAAjjC,EAAAC,GAAA,EAAAD,GA5gErwN9pC,MAAE,WA6pEyuB,UAAAgtE,GAAAljC,EAAAC,GAAA,KAAAD,EAAA,OAAA+I,EA7pE3uB7yC,cAAE,+BAAFA,MAAE,uBAAAs7C,GAAFt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MAk8Ei5Dg4C,EAAAi1B,eAAA3xB,GAAsB,EAl8Ev6Dt7C,CAk8Ey6D,uBAAAs7C,GAl8Ez6Dt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MAk8Em8Dg4C,EAAAi1B,eAAA3xB,GAAsB,GAl8Ez9Dt7C,OAk8Es/D,MAAA8pC,EAAA,OAAAkO,EAl8Et/Dh4C,cAAE,iBAAFA,CAk8EwjD,iBAAAg4C,EAAAk1B,oBAl8ExjDltE,CAk8E0mD,mBAAAg4C,EAAAm1B,sBAl8E1mDntE,CAk8EgqD,iBAAAg4C,EAAAo1B,kBAl8EhqDptE,CAk8EgtD,mBAAAg4C,EAAAq1B,oBAl8EhtDrtE,CAk8EowD,QAAAg4C,EAAAs1B,YAl8EpwDttE,CAk8EqyD,QAl8EryDA,CAk8EizD,SAl8EjzDA,CAk8E8zD,OAAAg4C,EAAAu1B,WAl8E9zDvtE,CAk8E61D,sBAA0B,WAAAwtE,GAAA1jC,EAAAC,GAAA,KAAAD,EAAA,OAAAob,EAl8Ev3DllD,cAAE,UAAFA,CAk8EmjE,cAl8EnjEA,MAAE,iBAAAs7C,GAAFt7C,MAAEklD,GAAA,MAAAlN,EAAFh4C,QAAE,OAAFA,MAk8E4rEg4C,EAAAy1B,YAAAnyB,GAAmB,GAl8E/sEt7C,MAAE,YAAFA,MAAE,GAAFA,WAk8Eq2E,MAAA8pC,EAAA,OAAAkO,EAl8Er2Eh4C,cAAE,GAAFA,MAAE,IAAAg4C,EAAA01B,kBAAA,IAk8Eq0E,QAAAthC,GAAAm+B,KAAA,+BAAAA,IAAA,SAAAoD,GAAA7jC,EAAAC,GAAA,KAAAD,EAAA,OAAA+I,EAl8Ev0E7yC,cAAE,8BAAFA,MAAE,8BAAAs7C,GAAFt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,qBAAEg4C,EAAAk0B,aAAA5wB,KAAAtD,EAAAk0B,aAAA5wB,GAAFt7C,MAAEs7C,EAAA,GAAFt7C,MAAE,wBAAAs7C,GAAFt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA42F80Dg4C,EAAAp3B,OAAAgtD,WAAAtyB,GAAyB,EA52Fv2Dt7C,CA42Fy2D,yBAAAs7C,GA52Fz2Dt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA42Fy4Dg4C,EAAAp3B,OAAAitD,YAAAvyB,GAA0B,EA52Fn6Dt7C,CA42Fq6D,uBAAAs7C,GA52Fr6Dt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA42Fm8Dg4C,EAAAp3B,OAAAktD,WAAAxyB,GAAyB,EA52F59Dt7C,CA42F89D,0BAAAs7C,GA52F99Dt7C,MAAE6yC,GAAA,MAAAmF,EAAFh4C,QAAE,OAAFA,MA42F+/Dg4C,EAAAg0B,aAAA1wB,GAAoB,GA52FnhEt7C,OA42F+iE,MAAA8pC,EAAA,OAAAkO,EA52F/iEh4C,cAAE,iBAAAg4C,EAAAp3B,OAAAizC,gBAAF7zD,MAAE,eAAAg4C,EAAAk0B,cAAFlsE,MAAE,WAAAg4C,EAAAp3B,OAAA3C,SAAFje,CA42FyzC,YAAAg4C,EAAAp3B,OAAAurD,UA52FzzCnsE,CA42Fu2C,aAAAg4C,EAAAp3B,OAAAwrD,WA52Fv2CpsE,CA42Fu5C,UAAAg4C,EAAAp3B,OAAAmtD,YA52Fv5C/tE,CA42Fq8C,UAAAg4C,EAAAp3B,OAAAotD,YA52Fr8ChuE,CA42Fm/C,aAAAg4C,EAAAp3B,OAAAqtD,eA52Fn/CjuE,CA42FuiD,YAAAg4C,EAAAp3B,OAAAo5C,UA52FviDh6D,CA42FqlD,WAAAg4C,EAAAp3B,OAAAstD,SA52FrlDluE,CA42FioD,oBAAAg4C,EAAAp3B,OAAAyrD,kBA52FjoDrsE,CA42F+rD,gBAAAg4C,EAAAp3B,OAAAutD,cA52F/rDnuE,CA42FqvD,kBAAAg4C,EAAAp3B,OAAA0rD,gBAA0D,WAAA8B,GAAAtkC,EAAAC,GAAA,KAAAD,EAAA,OAAAob,EA52F/yDllD,cAAE,2BAAFA,MAAE,0BAAAs7C,GAAFt7C,MAAEklD,GAAA,MAAAlN,EAAFh4C,QAAE,OAAFA,MA42F0mFg4C,EAAAq2B,aAAA/yB,GAAoB,GA52F9nFt7C,OA42FupF,MAAA8pC,EAAA,OAAAkO,EA52FvpFh4C,cAAE,eAAAg4C,EAAAk0B,aAAFlsE,CA42F2uE,cAAAg4C,EAAAp3B,OAAAmtD,YA52F3uE/tE,CA42F6xE,cAAAg4C,EAAAp3B,OAAAotD,YA52F7xEhuE,CA42F+0E,mBAAAg4C,EAAAp3B,OAAA0tD,iBA52F/0EtuE,CA42F24E,cAAAg4C,EAAAp3B,OAAA2tD,YA52F34EvuE,CA42F67E,WAAAg4C,EAAAp3B,OAAA4tD,SA52F77ExuE,CA42Fy+E,aAAAg4C,EAAAp3B,OAAA6tD,WA52Fz+EzuE,CA42FyhF,aAAAg4C,EAAAp3B,OAAA2sD,WAAgD,WAAAmB,GAAA5kC,EAAAC,GAAA,KAAAD,EAAA,OAAAwb,EA52FzkFtlD,cAAE,UAAFA,CA42FgyF,cA52FhyFA,MAAE,iBAAAs7C,GAAFt7C,MAAEslD,GAAA,MAAAtN,EAAFh4C,QAAE,OAAFA,MA42FonGg4C,EAAA22B,uBAAArzB,EAA+B,GAAE,EA52FrpGt7C,CA42FupG,mBAAAs7C,GA52FvpGt7C,MAAEslD,GAAA,MAAAspB,EAAF5uE,MAAE,GAAAg4C,EAAFh4C,QAAE,OAAFA,MA42FkrGg4C,EAAA62B,yBAAAvzB,EAAAszB,EAAqC,GAAE,GA52FztG5uE,MAAE,YAAFA,CA42Fs0G,aA52Ft0GA,MAAE,GAAFA,cAAE,aAAFA,MAAE,GAAFA,kBAAE,cAAFA,MAAE,iBAAAs7C,GAAFt7C,MAAEslD,GAAA,MAAAtN,EAAFh4C,QAAE,OAAFA,MA42F22Hg4C,EAAA22B,uBAAArzB,EAA+B,GAAE,EA52F54Ht7C,CA42F84H,mBAAAs7C,GA52F94Ht7C,MAAEslD,GAAA,MAAAwpB,EAAF9uE,MAAE,GAAAg4C,EAAFh4C,QAAE,OAAFA,MA42Fy6Hg4C,EAAA62B,yBAAAvzB,EAAAwzB,EAAuC,GAAE,GA52Fl9H9uE,MAAE,aAAFA,CA42F6jI,cA52F7jIA,MAAE,IAAFA,cAAE,cAAFA,MAAE,IAAFA,aA42FwxI,MAAA8pC,EAAA,OAAAkO,EA52FxxIh4C,sBAAE,eAAAg4C,EAAA+2B,oBAAA,KAAF/uE,CA42F+2F,UA52F/2FA,MAAE,GAAAosC,GAAA,IAAA4L,EAAA+2B,sBAAF/uE,MAAE,mBAAAg4C,EAAA+2B,qBAAF/uE,MAAE,GAAFA,MAAE,GAAAg4C,EAAAg3B,UAAA,KAAFhvE,MAAE,GAAFA,MAAEg4C,EAAAi3B,oBAAFjvE,cAAE,eAAAg4C,EAAA+2B,oBAAA,KAAF/uE,CA42FwmH,UA52FxmHA,MAAE,GAAAosC,GAAA,IAAA4L,EAAA+2B,sBAAF/uE,MAAE,mBAAAg4C,EAAA+2B,qBAAF/uE,MAAE,GAAFA,MAAE,GAAAg4C,EAAAk3B,QAAA,KAAFlvE,MAAE,GAAFA,MAAEg4C,EAAAm3B,iBA42F8tI,WAAAC,GAAAtlC,EAAAC,GAAA,KAAAD,EAAA,OAAAulC,EA52FhuIrvE,cAAE,WAAFA,CA42F03I,eA52F13IA,MAAE,iBAAAs7C,GAAFt7C,MAAEqvE,GAAA,MAAAr3B,EAAFh4C,QAAE,OAAFA,MA42FsiJg4C,EAAAs3B,gBAAAh0B,GAAuB,GA52F7jJt7C,MAAE,aAAFA,MAAE,GAAFA,gBAAE,eAAFA,MAAE,iBAAAs7C,GAAFt7C,MAAEqvE,GAAA,MAAAr3B,EAAFh4C,QAAE,OAAFA,MA42Fw5Jg4C,EAAAu3B,aAAAj0B,GAAoB,GA52F56Jt7C,MAAE,aAAFA,MAAE,GAAFA,WA42FomK,MAAA8pC,EAAA,OAAAkO,EA52FpmKh4C,cAAE,GAAFA,MAAE,IAAAg4C,EAAAw3B,YAAA,KAAFxvE,MAAE,GAAFA,MAAE,IAAAg4C,EAAAy3B,SAAA,IA42F4jK,WAAAC,GAAA5lC,EAAAC,GAAA,KAx5F5pK4lC,GAA2B,MAAjC,MAAMA,EACF,YAAIlnD,GACA,YAA0Bpd,IAAnB/P,KAAKqyC,UAA0BryC,KAAKs0E,SAASnnD,WAAantB,KAAKqyC,SAC1E,CACA,YAAIllB,CAASxS,GACT3a,KAAKqyC,UAAY13B,CACrB,CACA,6BAAI45D,GACA,OAAOv0E,KAAKmtB,QAChB,CACAttB,YAAY20E,GACRx0E,KAAKw0E,eAAiBA,EACtBx0E,KAAKi9D,aAAe1pB,MAAamf,KACrC,CACAxjB,WACA,CACAqf,YAAY9tB,GACJA,EAAQ+gC,YACRxhE,KAAKy0E,mBAEb,CACA/f,qBACI10D,KAAKy0E,mBACT,CACAh9D,cACIzX,KAAKi9D,aAAaxoB,aACtB,CACAigC,kBAAkBh5B,GACV17C,KAAKs0E,WACLt0E,KAAKs0E,SAAS7jE,OACdirC,EAAMqb,kBAEd,CACA0d,oBACIz0E,KAAKi9D,aAAaxoB,cAClB,MAAMkgC,EAAgB30E,KAAKs0E,UAAYt0E,KAAKs0E,SAASM,QACjD50E,KAAKs0E,SAASM,QAAQC,kBAAiBrG,SACrCsG,EAAiB90E,KAAKs0E,SACxBt0E,KAAKs0E,SAASO,kBAAiBrG,SACnCxuE,KAAKi9D,gBAAehoB,MAAM,CAAC6/B,EAAgBH,IACtCrsE,UAAU,KACXtI,KAAKw0E,eAAenf,cAAa,EAEzC,QACSr1D,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFmmC,GAAV3vE,MAAuDA,OAAoB,CAA8C,QAChN1E,KAAK+0E,UADkFrwE,MAAE,CAAA8N,KACJ6hE,EAA2BlmC,UAAA,+BAAAgC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GADzB9pC,MAAE,iBAAAs7C,GAAA,OACJvR,EAAAimC,kBAAA10B,EAAyB,GAAE,EAAAxR,GADzB9pC,MAAE,0BAAA+pC,EAAA8lC,0BACuB,EAAAlkC,OAAA,CAAAikC,SAAA,oCAAAnnD,SAAA,YAAA6nD,YAAA,EAAAxzD,SAAA,CADzB9c,QACgU,EACna,OA9CK2vE,CAA2B,KAmEjC,MAAMY,GAAwB,IAAIhkC,MAAe,yBAM3CikC,GAAuB,IAAIjkC,MAAe,uBAAwB,CACpE9vC,WAAY,OACZF,QAGJ,SAASk0E,KACL,SAAO74D,OAAO84D,MAClB,IAMA,MAAMC,GACFx1E,cAEIG,KAAKs1E,eAAiB,IAAI/9D,KAE1BvX,KAAKu1E,kBAAoB,MAEzBv1E,KAAKw1E,oBAAsB,GAC/B,CACA,iBAAI7gB,GACA,OAAO30D,KAAKs1E,cAChB,CAOAG,QAAQ70D,EAAOC,GACX,IAAK7gB,KAAK2nB,QAAQ/G,KAAW5gB,KAAK2nB,QAAQ9G,GACtC,MAAM2P,MAAM,+CAEhB,MAAMklD,EAAY11E,KAAKsxD,MAAM1wC,GACvB+0D,EAAa31E,KAAKsxD,MAAMzwC,GACxB+0D,EAAO51E,KAAKw5D,QAAQkc,GAAa11E,KAAKw5D,QAAQmc,GACpD,OAAIC,EAAO,GACA,EAEFA,EAAO,EACL,EAIAA,CAEf,CAOAC,YAAYj1D,EAAOC,GACf,IAAK7gB,KAAK2nB,QAAQ/G,KAAW5gB,KAAK2nB,QAAQ9G,GACtC,MAAM2P,MAAM,+CAEhB,MAEMolD,EAFW51E,KAAK03D,QAAQ92C,GACZ5gB,KAAK03D,QAAQ72C,GAE/B,OAAI+0D,EAAO,GACA,EAEFA,EAAO,EACL,EAGA,CAEf,CAUA5iB,YAAYr4C,GACR,OAAa,MAATA,GACC3a,KAAKkxD,eAAev2C,IAAU3a,KAAK2nB,QAAQhN,GACrCA,EAEJ3a,KAAKihD,SAChB,CAIA60B,UAAUC,GACN/1E,KAAK+1E,OAASA,EACd/1E,KAAKs1E,eAAej7D,KAAK07D,EAC7B,CAIAC,YACI,OAAOh2E,KAAK+1E,MAChB,CAIA7iB,UAAUjC,EAAMh0B,EAAKE,GACjB,OAAIF,GAAOj9B,KAAKy1E,QAAQxkB,EAAMh0B,GAAO,EAC1BA,EAEPE,GAAOn9B,KAAKy1E,QAAQxkB,EAAM9zB,GAAO,EAC1BA,EAEJ8zB,CACX,EAMJ,IAAIglB,GAAe,EACnB,IAAI7E,GACH,SAAUA,GACPA,SAASC,MAAW,QACpBD,EAASI,KAAU,OACnBJ,EAAS8E,YAAiB,cAHnB9E,CAIX,CAJC,CAIEA,IAAwB,CAAC,GALf,IAMP+E,GAAW,MAAjB,MAAMA,EACF,oBAAInD,GACA,OAAOhzE,KAAKo2E,iBAChB,CACA,oBAAIpD,CAAiBqD,GACjBr2E,KAAKo2E,qBAAoBtmC,OAAsBumC,EACnD,CACA,eAAIpD,GACA,OAAOjzE,KAAKs2E,YAChB,CACA,eAAIrD,CAAYoD,GACZr2E,KAAKs2E,gBAAexmC,OAAsBumC,EAC9C,CACA,YAAInD,GACA,OAAOlzE,KAAKu2E,SAChB,CACA,YAAIrD,CAASmD,GACTr2E,KAAKu2E,aAAYnjC,OAAqBijC,EAAK,EAC/C,CACA,cAAIlD,GACA,OAAOnzE,KAAKw2E,WAChB,CACA,cAAIrD,CAAWkD,GACXr2E,KAAKw2E,eAAcpjC,OAAqBijC,EAAK,EACjD,CACA,cAAIpE,GACA,OAAOjyE,KAAKy2E,WAChB,CACA,cAAIxE,CAAWoE,GACXr2E,KAAKy2E,eAAcrjC,OAAqBijC,EAAK,EACjD,CACA,kBAAI9d,GACA,OAAOv4D,KAAK02E,eAChB,CACA,kBAAIne,CAAe59C,GACfA,KAAQy4B,OAAqBz4B,GAEzB3a,KAAK02E,gBADL/7D,EAAQ,GAAKA,EAAQ,OACE5K,EAGA4K,CAE/B,CACA,mBAAIq2D,GACA,OAAOhxE,KAAK22E,gBAChB,CACA,mBAAI3F,CAAgBqF,GAChBr2E,KAAK22E,oBAAmB7mC,OAAsBumC,EAClD,CACA,MAAIr3D,GACA,OAAOhf,KAAK42E,GAChB,CACA,gBAAIC,GACA,MAA2B,SAApB72E,KAAK82E,WACN92E,KAAK+2E,gBAAgBC,gBACD,aAApBh3E,KAAK82E,WACD92E,KAAK+2E,gBAAgBE,gBACrBj3E,KAAK+2E,gBAAgBG,eACnC,CACA,YAAI/pD,GACA,OAAO,CACX,CACAttB,YAAYs3E,EAAiBJ,GAuDzB,GAtDA/2E,KAAKm3E,gBAAkBA,EACvBn3E,KAAK+2E,gBAAkBA,EAIvB/2E,KAAKo2E,mBAAoB,EAIzBp2E,KAAKs2E,cAAe,EAIpBt2E,KAAK0+D,UAAY0S,GAASC,MAI1BrxE,KAAK+wE,mBAAoB,EAIzB/wE,KAAK4yE,UAAW,EAIhB5yE,KAAK6yE,eAAgB,EAIrB7yE,KAAKu2E,UAAY,EAIjBv2E,KAAKw2E,YAAc,EAInBx2E,KAAKy2E,YAAc,EAInBz2E,KAAK22E,kBAAmB,EAIxB32E,KAAKo3E,gBAAmBC,KACVA,KACJr3E,KAAK2yE,gBAAkB3yE,KAAK2yE,eAAe0E,OAC3Cr3E,KAAKyyE,aACHzyE,KAAKm3E,gBAAgB1B,QAAQ4B,EAAUr3E,KAAKyyE,cACxC,MACNzyE,KAAK0yE,aACH1yE,KAAKm3E,gBAAgB1B,QAAQ4B,EAAUr3E,KAAK0yE,cAAgB,IAEnE1yE,KAAKm3E,gBACN,MAAM3mD,MAAM,0NAIhB,IAAKxwB,KAAK+2E,gBACN,MAAMvmD,MAAM,gOAIhBxwB,KAAK42E,IAAM,iBAAiBX,IAChC,CACAqB,aAAaC,GACT,OAAOv3E,KAAKm3E,gBAAgBjmB,eAAeqmB,IACvCv3E,KAAKm3E,gBAAgBxvD,QAAQ4vD,GAC3BA,EACA,IACV,QACSv3E,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFioC,GAjSVzxE,MAiSuC2wE,GAAe,GAjStD3wE,MAiSmFuwE,GAAqB,IAA8D,QAC7Pj1E,KAAK+0E,UAlSkFrwE,MAAE,CAAA8N,KAkSJ2jE,EAAW9lC,OAAA,CAAA2iC,iBAAA,mBAAAC,YAAA,cAAAvU,UAAA,YAAAqS,kBAAA,oBAAA6B,SAAA,WAAAC,cAAA,gBAAAK,SAAA,WAAAC,WAAA,aAAAlB,WAAA,aAAA1Z,eAAA,iBAAAyY,gBAAA,mBAAAgE,YAAA,GAAuW,EACnd,OAzIKmB,CAAW,KA8KXqB,GAAe,MAArB,MAAMA,EACF33E,cAKIG,KAAKygC,QAAU,IAAIlpB,KAEnBvX,KAAKy3E,cAAgB,eAErBz3E,KAAK03E,gBAAkB,iBAEvB13E,KAAK23E,cAAgB,eAErB33E,KAAK43E,gBAAkB,iBAEvB53E,KAAK63E,YAAc,aAEnB73E,KAAK83E,cAAgB,eAErB93E,KAAKwqD,eAAiB,iBAEtBxqD,KAAKyqD,eAAiB,aAEtBzqD,KAAK0qD,cAAgB,gBAErB1qD,KAAK2qD,cAAgB,YAErB3qD,KAAK4qD,mBAAqB,oBAE1B5qD,KAAK6qD,mBAAqB,gBAE1B7qD,KAAK8qD,uBAAyB,uBAE9B9qD,KAAK+qD,2BAA6B,wBAElC/qD,KAAK+3E,eAAiB,SAEtB/3E,KAAKg4E,YAAc,MAEnBh4E,KAAKi4E,eAAiB,OAEtBj4E,KAAKk4E,aAAe,KAEpBl4E,KAAKm4E,cAAgB,KAErBn4E,KAAKo4E,cAAgB,IACzB,QACSp4E,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFspC,EAAe,CAAsD,QACtKx3E,KAAKq4E,WAzXkF3zE,MAAE,CAAA2mD,MAyXYmsB,EAAev2E,QAAfu2E,EAAet2E,UAAAC,WAAc,QAAW,EACzJ,OAlDKq2E,CAAe,KA2DrB,MAAMc,GACFz4E,YAAY8a,EAAO0tC,EAAcL,EAAWrkC,EAASosD,GAAM,EAAON,EAAY,IAC1EzvE,KAAK2a,MAAQA,EACb3a,KAAKqoD,aAAeA,EACpBroD,KAAKgoD,UAAYA,EACjBhoD,KAAK2jB,QAAUA,EACf3jB,KAAK+vE,IAAMA,EACX/vE,KAAKyvE,UAAYA,CACrB,EACH,IACK8I,GAAwB,MAA9B,MAAMA,EACF,0BAAIC,GACA,OAAO,CACX,CACA,kBAAIC,GACA,MAA2B,WAApBz4E,KAAK8wE,UAChB,CACA,iBAAI4H,GACA,MAA4B,UAApB14E,KAAK8wE,YACW,cAApB9wE,KAAK8wE,YACe,YAApB9wE,KAAK8wE,UACb,CACAjxE,YAAY84E,EAAQC,GAChB54E,KAAK24E,OAASA,EACd34E,KAAK44E,OAASA,EAId54E,KAAKssD,WAAa,EAIlBtsD,KAAKsmD,QAAU,EAIftmD,KAAK0vE,UAAY,EAIjB1vE,KAAKwlE,OAAS,IAAI1Y,KACtB,CACA5d,WAAa,CACbogC,WAAWjhB,GACPruD,KAAKwlE,OAAOlX,KAAKD,EACrB,CACAshB,aAAalhB,EAAUC,GAEnB,OADmBD,EAAWzuD,KAAKsmD,QAAUoI,IACvB1uD,KAAKssD,UAC/B,CAIAwjB,WAAWn1D,GACP,SAAK3a,KAAK64E,gBAAiD,IAA/B74E,KAAK64E,eAAe7uE,UAG5ChK,KAAKy4E,eACE99D,IAAU3a,KAAK64E,eAAe,GAErC74E,KAAK04E,cAGE/9D,IAFW3a,KAAK64E,eAAe,IAERl+D,IADd3a,KAAK64E,eAAe,QAFxC,EAKJ,CAIA3pB,UAAUv0C,GACN,GAAI3a,KAAK04E,cAAe,CACpB,MAAMI,EAAY94E,KAAK64E,eAAe,GAChCE,EAAU/4E,KAAK64E,eAAe,GACpC,OAAkB,OAAdC,GAAkC,OAAZC,EACfp+D,GAASm+D,GAAan+D,GAASo+D,EAG/Bp+D,IAAUm+D,GAAan+D,IAAUo+D,CAEhD,CACJ,CAIAnJ,YAAYj1D,GACR,GAAI3a,KAAK04E,cAAe,CACpB,MAAMI,EAAY94E,KAAK64E,eAAe,GACtC,OAAqB,OAAdC,GAAsBn+D,IAAUm+D,CAC3C,CACJ,CAIAjJ,UAAUl1D,GACN,GAAI3a,KAAK04E,cAAe,CACpB,MAAMK,EAAU/4E,KAAK64E,eAAe,GACpC,OAAmB,OAAZE,GAAoBp+D,IAAUo+D,CACzC,CACJ,CAIA3Z,kBACIp/D,KAAK44E,OAAO5jC,kBAAkB,KAC1Bh1C,KAAK44E,OAAOI,SACPC,eACAp1E,QAAKsb,MAAK,IACV7W,UAAU,KACXtI,KAAK24E,OAAOzkC,cACPxgC,cAAc,gCACdo7C,OAAM,EACd,EAET,QACS9uD,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFqqC,GArfV7zE,MAqfoDA,OArfpDA,MAqf8EA,OAAS,CAA8C,QAC5N1E,KAAKk5E,UAtfkFx0E,MAAE,CAAA8N,KAsfJ+lE,EAAwBpqC,UAAA,wCAAAgC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAtftB9pC,MAAE,uBAAA+pC,EAAA+pC,uBAsfoB,EAAAnoC,OAAA,CAAAic,WAAA,aAAAH,KAAA,OAAA7F,QAAA,UAAAopB,UAAA,YAAAxnB,WAAA,aAAA2wB,eAAA,iBAAA/H,WAAA,cAAAhhB,QAAA,CAAA0V,OAAA,UAAAhvB,SAAA,4BAAAw+B,YAAA,EAAAjlB,MAAAliB,GAAAO,MAAA,EAAAC,KAAA,EAAAC,OAAA,kXAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GAtftB9pC,MAAE,EAAAsrE,GAAA,YAsf0e,EAAAxhC,GAtf5e9pC,MAAE,UAAA+pC,EAAA0d,KAsfsc,EAAA3U,aAAA,CAAs7C5mC,MAA8FA,OAAUk+B,cAAA,EAAAyB,gBAAA,GAAgJ,EACztE,OA1GKgoC,CAAwB,KAwI9B,MAAMY,GACF,aAAO77D,GAEH,MAAO,CACH87D,UAAW,CACPC,SAAU,EACVC,YAAa,GAGzB,EAEJ,MAAMC,UACOv5E,KAAK+C,IAAM,IAAIkuC,MAAe,oBAAsB,QACpDjxC,KAAKo5E,UAAY,IAAInoC,MAAe,0BAA4B,EAE7E,MAAMuoC,GAAmB,CACrB,CACI/iC,QAAS8iC,GAAcx2E,IACvB4uD,WAxBR,SAAS8nB,KACL,OAAON,GAAe77D,QAC1B,GAwBI,CACIm5B,QAAS8iC,GAAcH,UACvBznB,WAzBR,SAAS+nB,GAAwB92D,GAC7B,OAAOA,EAAQw2D,SACnB,EAwBQhxC,KAAM,CAACmxC,GAAcx2E,OAI7B,IAGM42E,GAAyB,MAA/B,MAAMA,EACF,cAAI7I,GACA,OAAO9wE,KAAK45E,WAChB,CACA,cAAI9I,CAAWuF,GACXr2E,KAAK45E,YAAcvD,EACfr2E,KAAK65E,YACL75E,KAAK85E,mBACL95E,KAAK+5E,MAAM1kB,eAEnB,CACA,YAAI1yC,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GACT,MAAMq/D,EAAch6E,KAAKqzD,UACzB14C,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKqzD,UAAYrzD,KAAKs3E,aAAa38D,GAC9B3a,KAAKm3E,gBAAgB8C,UAAUD,EAAah6E,KAAKqzD,YAClDrzD,KAAK85E,kBAEb,CACA,aAAIjJ,GACA,OAAO7wE,KAAKk6E,UAChB,CACA,aAAIrJ,CAAU3sD,GACVlkB,KAAKk6E,WAAah2D,EAAOzjB,IAAKu/B,IAC1BA,EAAIhgC,KAAKm3E,gBAAgBnkB,YAAYhzB,GAC9BhgC,KAAKs3E,aAAat3C,KAE7BhgC,KAAK85E,kBACT,CACA,gBAAIlJ,GACA,OAAO5wE,KAAKm6E,aAChB,CACA,gBAAIvJ,CAAaj2D,GACb,MAAMy/D,EAAYp6E,KAAKm6E,cACvBx/D,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKm6E,cAAgBn6E,KAAKs3E,aAAa38D,IAAU3a,KAAKm3E,gBAAgBzoD,MAClE0rD,GAAap6E,KAAKm6E,gBACjBn6E,KAAKq6E,eAAeD,EAAWp6E,KAAKm6E,gBACrCn6E,KAAKs6E,kBAEb,CACA,cAAIpxB,GACA,OAAOlpD,KAAKotE,WAChB,CACA,cAAIlkB,CAAWzmD,GACXzC,KAAKotE,YAAc3qE,EACfzC,KAAK65E,WACL75E,KAAKs6E,kBAEb,CACA,WAAIlxB,GACA,OAAOppD,KAAKuzD,QAChB,CACA,WAAInK,CAAQzuC,GACRA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKuzD,SAAWvzD,KAAKs3E,aAAa38D,GAC9B3a,KAAK65E,WACL75E,KAAKs6E,kBAEb,CACA,WAAInxB,GACA,OAAOnpD,KAAKwzD,QAChB,CACA,WAAIrK,CAAQxuC,GACRA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKwzD,SAAWxzD,KAAKs3E,aAAa38D,GAC9B3a,KAAK65E,WACL75E,KAAKs6E,kBAEb,CACA,aAAIC,GACA,OAAOv6E,KAAK+5D,UAChB,CACA,SAAIygB,GACA,OAAOx6E,KAAK85D,MAChB,CACA,iBAAI2gB,GACA,OAAOz6E,KAAK06E,cAChB,CACA,kBAAIjC,GACA,MAA2B,WAApBz4E,KAAK8wE,UAChB,CACA,iBAAI4H,GACA,MAA2B,UAApB14E,KAAK8wE,YAA8C,cAApB9wE,KAAK8wE,YAChB,YAApB9wE,KAAK8wE,UAChB,CACA,cAAIxkB,GACA,GAAItsD,KAAKm6E,cACL,OAAOn6E,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKm6E,gBAAkBn6E,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,SAE3G,CACA,eAAIsB,GACA,GAAI36E,KAAK85D,QAAU95D,KAAK85D,OAAO9vD,OAAS,EACpC,MAAO,GAAGhK,KAAK85D,OAAO,GAAG,GAAGzR,kBAAkBroD,KAAK85D,OAAO95D,KAAK4iB,QAAQy2D,SAAW,GAAGr5E,KAAK4iB,QAAQ02D,YAAc,GAAGjxB,cAE3H,CACA,mBAAImV,GACA,OAAOx9D,KAAK46E,WAAWhwB,kBAC3B,CACA,mBAAI6S,GACA,OAAOz9D,KAAK46E,WAAW/vB,kBAC3B,CACA,qBAAIgwB,GACA,OAAO,CACX,CACA,8BAAIC,GACA,OAAO,CACX,CACAj7E,YAAYk6E,EAAOa,EAAYzD,EAAiBv0D,GAC5C5iB,KAAK+5E,MAAQA,EACb/5E,KAAK46E,WAAaA,EAClB56E,KAAKm3E,gBAAkBA,EACvBn3E,KAAK4iB,QAAUA,EAIf5iB,KAAK45E,YAAc,SACnB55E,KAAKk6E,WAAa,GAClBl6E,KAAK65E,WAAY,EAIjB75E,KAAK+6E,OAAS,IAAIjuB,MAIlB9sD,KAAK65D,aAAe,IAAI/M,MAExB9sD,KAAKg7E,mBAAqB,IAAIluB,MAE9B9sD,KAAKi7E,cAAgB,IAAInuB,KAC7B,CACA5d,WACA,CACAwlB,qBACI10D,KAAK+5D,WAAa/5D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKm3E,gBAAgBzoD,OACpE1uB,KAAKs6E,mBACLt6E,KAAK65E,WAAY,CACrB,CAIAqB,mBAAmB7sB,GACfruD,KAAKsyE,WAAWjkB,EAAK1zC,MACzB,CACA23D,WAAWlZ,GACPp5D,KAAK65D,aAAavL,KAAKtuD,KAAKm3E,gBAAgB1f,WAAW2B,EAAM,EAAG,IAChE,MAAM+hB,EAAmBn7E,KAAKm3E,gBAAgB1f,WAAW2B,EAAMp5D,KAAKm3E,gBAAgB7f,SAASt3D,KAAK4wE,cAAe,GAC3GhY,EAAc54D,KAAKm3E,gBAAgB/gB,kBAAkB+kB,GACrDx4D,EAAW3iB,KAAKm3E,gBAAgB1f,WAAW2B,EAAMp5D,KAAKm3E,gBAAgB7f,SAASt3D,KAAK4wE,cAAernE,KAAK0zB,IAAI27B,EAAa54D,KAAKm3E,gBAAgBjhB,QAAQl2D,KAAK4wE,eAAgB5wE,KAAKm3E,gBAAgBiE,SAASp7E,KAAK4wE,cAAe5wE,KAAKm3E,gBAAgBkE,WAAWr7E,KAAK4wE,cAAe5wE,KAAKm3E,gBAAgBmE,WAAWt7E,KAAK4wE,eAC5T5wE,KAAK+6E,OAAOzsB,KAAK3rC,EACrB,CAIA44D,aAAa7/B,GACT17C,KAAKm6E,cAAgBn6E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,cAAc,EAAK5wE,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,UAC3Hr5E,KAAKs6E,mBACL5+B,EAAME,gBACV,CAIA4/B,aAAa9/B,GACT17C,KAAKm6E,cAAgBn6E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,aAAc5wE,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,UACtHr5E,KAAKs6E,mBACL5+B,EAAME,gBACV,CACA0+B,mBACIt6E,KAAK85D,OAAS,GACd,MAAM2hB,EAAmBz7E,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKm6E,eACrDuB,EAASD,GAAoBz7E,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,UAC3E,QAAS1wE,EAAI,EAAGA,EAAI3I,KAAK4iB,QAAQy2D,SAAU1wE,IAAK,CAC5C,MAAM+kD,EAAM,GACZ,QAASiuB,EAAI,EAAGA,EAAI37E,KAAK4iB,QAAQ02D,YAAaqC,IAAK,CAC/C,MACMC,EAAW57E,KAAK67E,eADTJ,EAAmBC,GAAUC,EAAIhzE,EAAI3I,KAAK4iB,QAAQ02D,cAE/D5rB,EAAIhhD,KAAKkvE,EACb,CACA57E,KAAK85D,OAAOptD,KAAKghD,EACrB,CAEJ,CAEAmQ,kBACI,OAAK79D,KAAKopD,UAGFppD,KAAKopD,UAAYppD,KAAKq6E,eAAer6E,KAAKm6E,cAAen6E,KAAKopD,QAC1E,CAEA2U,cACI,OAAQ/9D,KAAKmpD,UAAYnpD,KAAKq6E,eAAer6E,KAAKm6E,cAAen6E,KAAKmpD,QAC1E,CACA2yB,sBAAsBpgC,GAClB,IAAIqgC,EACJ,OAAQrgC,EAAMia,SAEV,KAAKC,MACDmmB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAKm6E,eAAe,GACnEn6E,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKjmB,MACDimB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAKm6E,cAAe,GACnEn6E,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKhmB,MACDgmB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAKm6E,eAAe,EAAKn6E,KAAK4iB,QAAQ02D,aACrFt5E,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK/lB,MACD+lB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAKm6E,cAAen6E,KAAK4iB,QAAQ02D,aAChFt5E,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK9lB,MACD8lB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAKm6E,eAAgBn6E,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKm6E,gBAAkBn6E,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,WAChKr5E,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK5lB,MACD4lB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAKm6E,cAAgBn6E,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,SAAYr5E,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKm6E,gBAAkBn6E,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,UAAY,GAChOr5E,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK1lB,MACD0lB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,aAAcl1B,EAAM4a,OAAgBt2D,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,UAA/C,GAAiEr5E,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,UAA9C,GAC5Ir5E,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKtlB,MACDslB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,aAAcl1B,EAAM4a,OAAet2D,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,SAA9C,GAA2Dr5E,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,UACpLr5E,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MACJ,KAAKrlB,MACD12D,KAAKsyE,WAAWtyE,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKm6E,gBAClDn6E,KAAKi7E,cAAc3sB,OACnB,MACJ,QACI,OAERtuD,KAAKo/D,kBACL1jB,EAAME,gBACV,CAIAigC,eAAeziB,GACX,MAAM4iB,EAAkBh8E,KAAKm3E,gBAAgB1f,WAAW2B,EAAM,EAAG,GAC3DpR,EAAYhoD,KAAKm3E,gBAAgBxc,YAAYqhB,GAC7CvM,EAAY,eAAiBrW,EACnC,OAAO,IAAIkf,GAAalf,EAAMA,EAAKzgD,WAAYqvC,EAAWhoD,KAAKi8E,cAAc7iB,IAAO,EAAOqW,EAC/F,CACAqK,mBACI95E,KAAK06E,eAAiB,GAClB16E,KAAKy4E,gBAAkBz4E,KAAK2iB,WAC5B3iB,KAAK06E,eAAe,GAAK16E,KAAKm3E,gBAAgBzf,QAAQ13D,KAAK2iB,WAE3D3iB,KAAK04E,eAAiB14E,KAAK6wE,YAC3B7wE,KAAK06E,eAAiB16E,KAAK6wE,UAAUpwE,IAAKkiB,GAClC3iB,KAAKm3E,gBAAgBxvD,QAAQhF,GACtB3iB,KAAKm3E,gBAAgBzf,QAAQ/0C,GAG7B,MAIvB,CAEAs5D,cAAc7iB,GAEV,GAAmC,MAATA,GACrBp5D,KAAKmpD,SAAWiQ,EAAOp5D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKmpD,UACzDnpD,KAAKopD,SAAWgQ,EAAOp5D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKopD,SAC1D,OAAO,EAGX,IAAKppD,KAAKkpD,WACN,OAAO,EAIX,QAAS+H,EAFWjxD,KAAKm3E,gBAAgB1f,WAAW2B,EAAM,EAAG,GAEhCp5D,KAAKm3E,gBAAgBzf,QAAQzG,KAAUmI,EAAMnI,EAAOjxD,KAAKm3E,gBAAgBthB,gBAAgB5E,EAAM,GACxH,GAAIjxD,KAAKkpD,WAAW+H,GAChB,OAAO,EAGf,OAAO,CACX,CACAopB,eAAevf,EAAOC,GAClB,OAAOxxD,KAAKC,MAAMxJ,KAAKm3E,gBAAgBzf,QAAQoD,IAAU96D,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,aAC7F9vE,KAAKC,MAAMxJ,KAAKm3E,gBAAgBzf,QAAQqD,IAAU/6D,KAAK4iB,QAAQ02D,YAAct5E,KAAK4iB,QAAQy2D,UAClG,CAIA/B,aAAaC,GACT,OAAQv3E,KAAKm3E,gBAAgBjmB,eAAeqmB,IAAQv3E,KAAKm3E,gBAAgBxvD,QAAQ4vD,GAAQA,EAAM,IACnG,CACAnY,kBACIp/D,KAAKk8E,gBAAgB9c,iBACzB,QACSp/D,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFyrC,GAx2BVj1E,MAw2BqDA,OAx2BrDA,MAw2BsF8yE,IAx2BtF9yE,MAw2BkH2wE,GAAe,GAx2BjI3wE,MAw2B8J60E,GAAcH,WAAS,CAA8C,QAC1Tp5E,KAAKk5E,UAz2BkFx0E,MAAE,CAAA8N,KAy2BJmnE,EAAyBxrC,UAAA,oCAAAmJ,UAAA,SAAA9I,EAAAC,GAA6lB,GAA7lB,EAAAD,GAz2BvB9pC,MAy2B4lB6zE,GAAwB,KAAA/pC,EAAA,KAAA6H,EAz2BpnB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAytC,gBAAA7lC,EAAAz1B,MAAA,GAAAuvB,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,uBAAA+pC,EAAAosC,kBAAFn2E,CAy2BuB,kCAAA+pC,EAAAqsC,2BAAA,EAAAzqC,OAAA,CAAAygC,WAAA,aAAAnuD,SAAA,WAAAkuD,UAAA,YAAAD,aAAA,eAAA1nB,WAAA,aAAAE,QAAA,UAAAD,QAAA,WAAA2G,QAAA,CAAAirB,OAAA,SAAAlhB,aAAA,eAAAmhB,mBAAA,qBAAAC,cAAA,iBAAAjG,YAAA,EAAA5mC,MAAA,GAAAC,KAAA,GAAAC,OAAA,koDAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAz2BvB9pC,MAAE,cAAFA,MAAE,iBAAAs7C,GAAA,OAy2Bw3BvR,EAAA8sC,aAAAv7B,EAAoB,GAz2B94Bt7C,MAAE,YAAFA,cAAE,WAAFA,MAAE,YAAFA,0BAAE,YAAFA,CAy2Bw0D,YAz2Bx0DA,CAy2Bs3D,OAz2Bt3DA,CAy2Bg4D,UAz2Bh4DA,MAAE,GAAFA,kBAAE,aAAFA,MAAE,mBAAAs7C,GAAA,OAy2B+vEvR,EAAAqtC,sBAAA97B,EAA6B,EAz2B9xEt7C,CAy2BgyE,kBAAAs7C,GAAA,OAAwBvR,EAAAysC,mBAAAl7B,EAA0B,GAz2Bl1Et7C,gBAAE,eAAFA,MAAE,iBAAAs7C,GAAA,OAy2B0iFvR,EAAA+sC,aAAAx7B,EAAoB,GAz2BhkFt7C,MAAE,aAAFA,cAAE,YAAFA,MAAE,aAAFA,aAy2Bu6G,EAAA8pC,IAz2Bv6G9pC,MAAE,YAAA+pC,EAAAovB,mBAAFn5D,MAAE,aAAA+pC,EAAA+uB,iBAAF94D,MAAE,GAAFA,MAAE+pC,EAAAksC,aAAFj2E,cAAE,OAAA+pC,EAAA+rC,MAAF91E,CAy2B4hE,YAz2B5hEA,CAy2B4iE,gBAz2B5iEA,CAy2BkkE,aAAA+pC,EAAA6d,WAz2BlkE5nD,CAy2B0mE,aAAA+pC,EAAA8rC,UAz2B1mE71E,CAy2BipE,iBAAA+pC,EAAAgsC,cAz2BjpE/1E,CAy2BgsE,aAAA+pC,EAAAqiC,YAz2BhsEpsE,cAAE,YAAA+pC,EAAAsvB,eAAFr5D,MAAE,aAAA+pC,EAAAgvB,iBAAA,EAAAjmB,aAAA,CAy2Bk+G+gC,IAAwBzpC,cAAA,EAAAyB,gBAAA,GAAyQ,EACx2H,OAvTKopC,CAAyB,KAmWzBwC,GAAoB,MAA1B,MAAMA,EACF,cAAIrL,GACA,OAAO9wE,KAAK45E,WAChB,CACA,cAAI9I,CAAWuF,GACXr2E,KAAK45E,YAAcvD,EACfr2E,KAAK65E,YACL75E,KAAKo8E,oBACLp8E,KAAK+5E,MAAM1kB,eAEnB,CACA,YAAI1yC,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GACTA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKqzD,UAAYrzD,KAAKs3E,aAAa38D,GACnC3a,KAAKq8E,mBACT,CACA,aAAIxL,GACA,OAAO7wE,KAAKk6E,UAChB,CACA,aAAIrJ,CAAU3sD,GACVlkB,KAAKk6E,WAAa,GAClB,QAASvxE,EAAI,EAAGA,EAAIub,EAAOla,OAAQrB,IAAK,CACpC,MAAMgS,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAY9uC,EAAOvb,IACtD3I,KAAKk6E,WAAWxtE,KAAK1M,KAAKs3E,aAAa38D,GAC3C,CACA3a,KAAKq8E,mBACT,CACA,gBAAIzL,GACA,OAAO5wE,KAAKm6E,aAChB,CACA,gBAAIvJ,CAAaj2D,GACb,MAAMy/D,EAAYp6E,KAAKm6E,cACvBx/D,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKm6E,cACDn6E,KAAKs3E,aAAa38D,IAAU3a,KAAKm3E,gBAAgBzoD,OAChD1uB,KAAKs8E,YAAYlC,EAAWp6E,KAAKm6E,gBAClCn6E,KAAK65E,WACL75E,KAAKo8E,mBAEb,CACA,cAAIlzB,GACA,OAAOlpD,KAAKotE,WAChB,CACA,cAAIlkB,CAAWzmD,GACXzC,KAAKotE,YAAc3qE,EACfzC,KAAK65E,WACL75E,KAAKo8E,mBAEb,CACA,WAAIhzB,GACA,OAAOppD,KAAKuzD,QAChB,CACA,WAAInK,CAAQzuC,GACRA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKuzD,SAAWvzD,KAAKs3E,aAAa38D,GAC9B3a,KAAK65E,WACL75E,KAAKo8E,mBAEb,CACA,WAAIjzB,GACA,OAAOnpD,KAAKwzD,QAChB,CACA,WAAIrK,CAAQxuC,GACRA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKwzD,SAAWxzD,KAAKs3E,aAAa38D,GAC9B3a,KAAK65E,WACL75E,KAAKo8E,mBAEb,CACA,UAAIG,GACA,OAAOv8E,KAAKw7D,OAChB,CACA,cAAIlP,GACA,GAAItsD,KAAKm6E,cACL,OAAOn6E,KAAKm3E,gBAAgB7f,SAASt3D,KAAKm6E,cAElD,CACA,kBAAI1B,GACA,MAA2B,WAApBz4E,KAAK8wE,UAChB,CACA,iBAAI4H,GACA,MAA4B,UAApB14E,KAAK8wE,YACW,cAApB9wE,KAAK8wE,YACe,YAApB9wE,KAAK8wE,UACb,CACA,qBAAI+J,GACA,OAAO,CACX,CACAh7E,YAAYk6E,EAAO5C,EAAiBJ,GAChC/2E,KAAK+5E,MAAQA,EACb/5E,KAAKm3E,gBAAkBA,EACvBn3E,KAAK+2E,gBAAkBA,EAIvB/2E,KAAK45E,YAAc,SACnB55E,KAAKk6E,WAAa,GAClBl6E,KAAKw8E,UAAYjpC,MAAamf,MAC9B1yD,KAAK65E,WAAY,EAKjB75E,KAAKy8E,eAAiB,GAItBz8E,KAAK+6E,OAAS,IAAIjuB,MAIlB9sD,KAAKu7D,cAAgB,IAAIzO,MAEzB9sD,KAAKg7E,mBAAqB,IAAIluB,MAE9B9sD,KAAKi7E,cAAgB,IAAInuB,MACzB9sD,KAAKg8D,WAAah8D,KAAKm3E,gBAAgB9f,cAAc,QACzD,CACAnoB,WACIlvC,KAAKw8E,UAAYx8E,KAAKm3E,gBAAgBxiB,cAAcrsD,UAAU,KAC1DtI,KAAKo8E,oBACLp8E,KAAK+5E,MAAM1kB,cAAa,EAEhC,CACAX,qBACI10D,KAAKo8E,oBACLp8E,KAAK65E,WAAY,CACrB,CACApiE,cACIzX,KAAKw8E,UAAU/nC,aACnB,CAIAymC,mBAAmB7sB,GACfruD,KAAKuyE,YAAYlkB,EAAK1zC,MAC1B,CAIA43D,YAAYlZ,GACR,MAAM8hB,EAAmBn7E,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAK4wE,cAAevX,EAAO,GACjHr5D,KAAKu7D,cAAcjN,KAAK6sB,GACxB,MAAMviB,EAAc54D,KAAKm3E,gBAAgB/gB,kBAAkB+kB,GACrD32E,EAASxE,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAK4wE,cAAevX,EAAO9vD,KAAK0zB,IAAI27B,EAAa54D,KAAKm3E,gBAAgBjhB,QAAQl2D,KAAK4wE,eAAgB5wE,KAAKm3E,gBAAgBiE,SAASp7E,KAAK4wE,cAAe5wE,KAAKm3E,gBAAgBkE,WAAWr7E,KAAK4wE,cAAe5wE,KAAKm3E,gBAAgBmE,WAAWt7E,KAAK4wE,eAC1T5wE,KAAK+6E,OAAOzsB,KAAK9pD,EACrB,CAIAs3E,sBAAsBpgC,GAClB,IAAIqgC,EACJ,OAAQrgC,EAAMia,SAEV,KAAKC,MACDmmB,EAAS/7E,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,cAAc,GACnE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKjmB,MACDimB,EAAS/7E,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,aAAc,GACnE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKhmB,MACDgmB,EAAS/7E,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,cAAc,GACnE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK/lB,MACD+lB,EAAS/7E,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,aAAc,GACnE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK9lB,MACD8lB,EAAS/7E,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,cAAe5wE,KAAKm3E,gBAAgB7f,SAASt3D,KAAK4wE,eACvG5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK5lB,MACD4lB,EAAS/7E,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,aAAc,GAAK5wE,KAAKm3E,gBAAgB7f,SAASt3D,KAAK4wE,eAC3G5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK1lB,MACD0lB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,aAAcl1B,EAAM4a,QAAS,IAAM,GACvFt2D,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKtlB,MACDslB,EAAS/7E,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,aAAcl1B,EAAM4a,OAAS,GAAK,GACtFt2D,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKrlB,MACD12D,KAAKuyE,YAAYvyE,KAAKm3E,gBAAgB7f,SAASt3D,KAAK4wE,eACpD5wE,KAAKi7E,cAAc3sB,OACnB,MACJ,QACI,OAERtuD,KAAKo/D,kBACL1jB,EAAME,gBACV,CAIAwgC,oBACI,GAAKp8E,KAAK4wE,aAGV,CAAA5wE,KAAKq8E,oBACLr8E,KAAK08E,WAAa18E,KAAK28E,sBAAsB38E,KAAKm3E,gBAAgBzoD,OAClE1uB,KAAKw7D,QAAU,GACf,QAAS7yD,EAAI,EAAGA,EAAIi0E,EAAkCj0E,IAAK,CACvD,MAAM+kD,EAAM,GACZ,QAASiuB,EAAI,EAAGA,EA5NL,EA4NyBA,IAAK,CACrC,MACMkB,EAAY78E,KAAK88E,gBADTnB,EA7NP,EA6NWhzE,GAElB+kD,EAAIhhD,KAAKmwE,EACb,CACA78E,KAAKw7D,QAAQ9uD,KAAKghD,EACtB,EAEJ,CAIAovB,gBAAgBzjB,GACZ,MAAM0jB,EAAmB/8E,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAK4wE,cAAevX,EAAO,GAC3GrR,EAAYhoD,KAAKm3E,gBAAgB/f,OAAO2lB,EAAkB/8E,KAAK+2E,gBAAgB3a,oBAC/EqT,EAAY,gBAAkBpW,EACpC,OAAO,IAAIif,GAAajf,EAAOr5D,KAAKg8D,WAAW3C,GAAQrR,EAAWhoD,KAAKg9E,eAAe3jB,IAAQ,EAAOoW,EACzG,CAIAuN,eAAe3jB,GAIX,QAASpI,EAHgBjxD,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAK4wE,cAAevX,EAAO,GAG/Er5D,KAAKm3E,gBAAgB7f,SAASrG,KAAUoI,EAAOpI,EAAOjxD,KAAKm3E,gBAAgBthB,gBAAgB5E,EAAM,GAC/H,GAAMA,KACAjxD,KAAKkpD,YAAclpD,KAAKkpD,WAAW+H,OACnCjxD,KAAKopD,SACHppD,KAAKm3E,gBAAgB1B,QAAQxkB,EAAMjxD,KAAKopD,UAAY,MACtDppD,KAAKmpD,SACHnpD,KAAKm3E,gBAAgB1B,QAAQxkB,EAAMjxD,KAAKmpD,UAAY,GACxD,OAAO,EAGf,OAAO,CACX,CAKAwzB,sBAAsB1rB,GAClB,GAAIjxD,KAAKs3E,aAAarmB,IAASjxD,KAAKs3E,aAAat3E,KAAKm6E,eAAgB,CAClE,MAAM31E,EAASxE,KAAKm3E,gBAAgBtB,YAAY5kB,EAAMjxD,KAAKm6E,eAI3D,OAAI31E,EAAS,GACF,EAEFA,EAAS,EACP,GAGAxE,KAAKm3E,gBAAgB7f,SAASrG,EAE7C,CAEI,OAAO,IAEf,CAMAorB,oBACIr8E,KAAKy8E,eAAiB,GAClBz8E,KAAKy4E,gBAAkBz4E,KAAK2iB,WAC5B3iB,KAAKy8E,eAAe,GAAKz8E,KAAK28E,sBAAsB38E,KAAK2iB,WAEzD3iB,KAAK04E,eAAiB14E,KAAK6wE,YAC3B7wE,KAAKy8E,eAAe,GAAKz8E,KAAK28E,sBAAsB38E,KAAK6wE,UAAU,IACnE7wE,KAAKy8E,eAAe,GAAKz8E,KAAK28E,sBAAsB38E,KAAK6wE,UAAU,IAE3E,CAIAyL,YAAYW,EAAUC,GAClB,SAAUD,IACNC,GACAl9E,KAAKm3E,gBAAgBzf,QAAQulB,KACzBj9E,KAAKm3E,gBAAgBzf,QAAQwlB,GACzC,CAIA5F,aAAaC,GACT,OAAOv3E,KAAKm3E,gBAAgBjmB,eAAeqmB,IACvCv3E,KAAKm3E,gBAAgBxvD,QAAQ4vD,GAC3BA,EACA,IACV,CACAnY,kBACIp/D,KAAKk8E,gBAAgB9c,iBACzB,QACSp/D,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFiuC,GAltCVz3E,MAktCgDA,OAltChDA,MAktCiF2wE,GAAe,GAltChG3wE,MAktC6HuwE,GAAqB,IAA8D,QACvSj1E,KAAKk5E,UAntCkFx0E,MAAE,CAAA8N,KAmtCJ2pE,EAAoBhuC,UAAA,8BAAAmJ,UAAA,SAAA9I,EAAAC,GAAkhB,GAAlhB,EAAAD,GAntClB9pC,MAmtC4gB6zE,GAAwB,KAAA/pC,EAAA,KAAA6H,EAntCpiB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAytC,gBAAA7lC,EAAAz1B,MAAA,GAAAuvB,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,uBAAA+pC,EAAAosC,kBAmtCgB,EAAAxqC,OAAA,CAAAygC,WAAA,aAAAnuD,SAAA,WAAAkuD,UAAA,YAAAD,aAAA,eAAA1nB,WAAA,aAAAE,QAAA,UAAAD,QAAA,WAAA2G,QAAA,CAAAirB,OAAA,SAAAxf,cAAA,gBAAAyf,mBAAA,qBAAAC,cAAA,iBAAAzkC,SAAA,iBAAAw+B,YAAA,EAAA5mC,MAAA,EAAAC,KAAA,EAAAC,OAAA,0TAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAntClB9pC,MAAE,YAAFA,CAmtCisB,YAntCjsBA,CAmtC+uB,QAntC/uBA,MAAE,UAAFA,gBAAE,aAAFA,MAAE,mBAAAs7C,GAAA,OAmtCyqCvR,EAAAqtC,sBAAA97B,EAA6B,EAntCxsCt7C,CAmtC0sC,kBAAAs7C,GAAA,OAAwBvR,EAAAysC,mBAAAl7B,EAA0B,GAntC5vCt7C,WAmtCuxC,EAAA8pC,IAntCvxC9pC,MAAE,GAAFA,MAAE,OAAA+pC,EAAA8tC,OAAF73E,CAmtCo8B,YAntCp8BA,CAmtCo9B,gBAntCp9BA,CAmtC0+B,aAAA+pC,EAAA6d,WAntC1+B5nD,CAmtCkhC,aAAA+pC,EAAAiuC,WAntClhCh4E,CAmtC0jC,iBAAA+pC,EAAAguC,eAntC1jC/3E,CAmtC0mC,aAAA+pC,EAAAqiC,YAAwC,EAAAt5B,aAAA,CAAkM+gC,IAAwBzpC,cAAA,EAAAyB,gBAAA,GAAyQ,EACxtD,OA9TK4rC,CAAoB,KA2WpBgB,GAAqB,MAA3B,MAAMA,EACF,kBAAI5kB,GACA,OAAOv4D,KAAK02E,eAChB,CACA,kBAAIne,CAAe8d,GACXA,GAAO,GAAKA,GAAO,GAAKA,IAAQr2E,KAAK02E,kBACrC12E,KAAK02E,gBAAkBL,EACvBr2E,KAAKo9E,yBAA0B,EAC3Bp9E,KAAK65E,YACL75E,KAAKq9E,mBACLr9E,KAAKs9E,mBACLt9E,KAAK+5E,MAAM1kB,gBAGvB,CACA,cAAIyb,GACA,OAAO9wE,KAAK45E,WAChB,CACA,cAAI9I,CAAWuF,GACXr2E,KAAK45E,YAAcvD,EACfr2E,KAAK65E,YACL75E,KAAKs9E,mBACLt9E,KAAK+5E,MAAM1kB,eAEnB,CACA,YAAI1yC,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GACT,MAAMq/D,EAAch6E,KAAKqzD,UACzB14C,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKqzD,UAAYrzD,KAAKs3E,aAAa38D,GAC9B3a,KAAKm3E,gBAAgB8C,UAAUD,EAAah6E,KAAKqzD,YAClDrzD,KAAKu9E,kBAEb,CACA,aAAI1M,GACA,OAAO7wE,KAAKk6E,UAChB,CACA,aAAIrJ,CAAU3sD,GACVlkB,KAAKk6E,WAAah2D,EAAOzjB,IAAIu/B,IACzBA,EAAIhgC,KAAKm3E,gBAAgBnkB,YAAYhzB,GAC9BhgC,KAAKs3E,aAAat3C,KAE7BhgC,KAAKu9E,kBACT,CACA,gBAAI3M,GACA,OAAO5wE,KAAKm6E,aAChB,CACA,gBAAIvJ,CAAaj2D,GACb,MAAMy/D,EAAYp6E,KAAKm6E,cACvBx/D,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKm6E,cACDn6E,KAAKs3E,aAAa38D,IAAU3a,KAAKm3E,gBAAgBzoD,MACrD1uB,KAAKm7E,iBAAmBn7E,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAKm6E,eAAgBn6E,KAAKm3E,gBAAgB7f,SAASt3D,KAAKm6E,eAAgB,IACxJn6E,KAAKw9E,YAAYpD,EAAWp6E,KAAKm6E,gBAClCn6E,KAAK65E,WACL75E,KAAKs9E,kBAEb,CACA,cAAIp0B,GACA,OAAOlpD,KAAKotE,WAChB,CACA,cAAIlkB,CAAWzmD,GACXzC,KAAKotE,YAAc3qE,EACfzC,KAAK65E,YACL75E,KAAKs9E,mBACLt9E,KAAK+5E,MAAM1kB,eAEnB,CACA,WAAIjM,GACA,OAAOppD,KAAKuzD,QAChB,CACA,WAAInK,CAAQzuC,GACRA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKuzD,SAAWvzD,KAAKs3E,aAAa38D,GAC9B3a,KAAK65E,YACL75E,KAAKs9E,mBACLt9E,KAAK+5E,MAAM1kB,eAEnB,CACA,WAAIlM,GACA,OAAOnpD,KAAKwzD,QAChB,CACA,WAAIrK,CAAQxuC,GACRA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKwzD,SAAWxzD,KAAKs3E,aAAa38D,GAC9B3a,KAAK65E,YACL75E,KAAKs9E,mBACLt9E,KAAK+5E,MAAM1kB,eAEnB,CACA,YAAIqD,GACA,OAAO14D,KAAKw0D,SAChB,CACA,QAAIipB,GACA,OAAOz9E,KAAK09E,KAChB,CACA,cAAIpxB,GACA,GAAItsD,KAAK4wE,aACL,OAAQ5wE,KAAKm3E,gBAAgBjhB,QAAQl2D,KAAK4wE,cACtC5wE,KAAK29E,eACL,CAEZ,CACA,kBAAIlF,GACA,MAA2B,WAApBz4E,KAAK8wE,UAChB,CACA,iBAAI4H,GACA,MAA4B,UAApB14E,KAAK8wE,YACW,cAApB9wE,KAAK8wE,YACe,YAApB9wE,KAAK8wE,UACb,CACA,qBAAI+J,GACA,OAAO,CACX,CACAh7E,YAAYk6E,EAAO5C,EAAiBJ,GAChC/2E,KAAK+5E,MAAQA,EACb/5E,KAAKm3E,gBAAkBA,EACvBn3E,KAAK+2E,gBAAkBA,EAIvB/2E,KAAKgxE,iBAAkB,EAIvBhxE,KAAK+wE,mBAAoB,EACzB/wE,KAAKo9E,yBAA0B,EAI/Bp9E,KAAK45E,YAAc,SACnB55E,KAAKk6E,WAAa,GAClBl6E,KAAKw8E,UAAYjpC,MAAamf,MAC9B1yD,KAAK65E,WAAY,EAKjB75E,KAAK49E,cAAgB,GAIrB59E,KAAK0zD,eAAiB,IAAI5G,MAI1B9sD,KAAK69E,cAAgB,IAAI/wB,MAEzB9sD,KAAKg7E,mBAAqB,IAAIluB,KAClC,CACA5d,WACIlvC,KAAK89E,qBAAqB99E,KAAKm3E,gBAAgBnB,aAC/Ch2E,KAAKq9E,mBACLr9E,KAAKw8E,UAAYx8E,KAAKm3E,gBAAgBxiB,cAAcrsD,UAAUytE,IAC1D/1E,KAAK89E,qBAAqB/H,GAC1B/1E,KAAKq9E,mBACLr9E,KAAKs9E,mBACLt9E,KAAK+5E,MAAM1kB,cAAa,EAEhC,CACAX,qBACI10D,KAAKs9E,mBACLt9E,KAAK65E,WAAY,CACrB,CACApiE,cACIzX,KAAKw8E,UAAU/nC,aACnB,CAIAymC,mBAAmB7sB,IAIVA,EAAK1qC,SAAY3jB,KAAKgxE,iBAAmB3iB,EAAK0hB,KAGnD/vE,KAAKwyE,WAAWnkB,EAAK1zC,MACzB,CAIA63D,WAAWvhB,GACP,MACMtuC,EAAW3iB,KAAKm3E,gBAAgBthB,gBAAgB71D,KAAKm7E,iBAD1ClqB,EAAO,GAExBjxD,KAAK0zD,eAAepF,KAAK3rC,GACzB3iB,KAAK69E,cAAcvvB,MACvB,CAIAwtB,sBAAsBpgC,GAClB,IAAIqgC,EACJ,OAAQrgC,EAAMia,SAEV,KAAKC,MACDmmB,EAAS/7E,KAAKm3E,gBAAgBthB,gBAAgB71D,KAAK4wE,cAAc,GACjE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKjmB,MACDimB,EAAS/7E,KAAKm3E,gBAAgBthB,gBAAgB71D,KAAK4wE,aAAc,GACjE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKhmB,MACDgmB,EAAS/7E,KAAKm3E,gBAAgBthB,gBAAgB71D,KAAK4wE,cAAc,GACjE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK/lB,MACD+lB,EAAS/7E,KAAKm3E,gBAAgBthB,gBAAgB71D,KAAK4wE,aAAc,GACjE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK9lB,MACD8lB,EAAS/7E,KAAKm3E,gBAAgBthB,gBAAgB71D,KAAK4wE,aAAc,EAAI5wE,KAAKm3E,gBAAgBjhB,QAAQl2D,KAAK4wE,eACvG5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK5lB,MACD4lB,EAAS/7E,KAAKm3E,gBAAgBthB,gBAAgB71D,KAAK4wE,aAAc5wE,KAAKm3E,gBAAgB/gB,kBAAkBp2D,KAAK4wE,cACzG5wE,KAAKm3E,gBAAgBjhB,QAAQl2D,KAAK4wE,eACtC5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAK1lB,MACD0lB,EAASrgC,EAAM4a,OACTt2D,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,cAAc,GACzD5wE,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,cAAc,GAChE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKtlB,MACDslB,EAASrgC,EAAM4a,OACTt2D,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,aAAc,GACzD5wE,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,aAAc,GAChE5wE,KAAKg7E,mBAAmB1sB,KAAKytB,GAC7B,MAEJ,KAAKrlB,QACI12D,KAAKkpD,YAAclpD,KAAKkpD,WAAWlpD,KAAK4wE,gBACzC5wE,KAAKwyE,WAAWxyE,KAAKm3E,gBAAgBjhB,QAAQl2D,KAAK4wE,eAEtD,MACJ,QACI,OAER5wE,KAAKo/D,kBACL1jB,EAAME,gBACV,CAIAyhC,mBACI,MAAMU,EAAe/9E,KAAKm3E,gBAAgB1e,kBAAkB,QACtDulB,EAAgBh+E,KAAKm3E,gBAAgB1e,kBAAkB,SACvDD,EAAiBx4D,KAAKm3E,gBAAgB1e,kBAAkB,UACxDF,EAAiBv4D,KAAKu4D,eACtBG,EAAWqlB,EAAat9E,IAAI,CAACioD,EAAM//C,MAC5B+/C,OAAM6nB,MAAOyN,EAAcr1E,GAAIggD,OAAQ6P,EAAe7vD,MAEnE3I,KAAKw0D,UAAYkE,EACZC,MAAMJ,GACN5lD,OAAO+lD,EAASC,MAAM,EAAGJ,IAC9Bv4D,KAAK64D,UAAY74D,KAAKm3E,gBAAgBre,cAE1C,CAIAwkB,mBACI,IAAKt9E,KAAK4wE,aACN,OAEJ5wE,KAAKi+E,UAAY,KACjBj+E,KAAKowE,YAAc,GAMnB,IAAI8N,EAAW,GAJal+E,KAAKm3E,gBAAgBgH,OAAOn+E,KAAKm7E,mBA1R/C,EA2RSn7E,KAAKu4D,iBA3Rd,EAkSdv4D,KAAK29E,eAAiBp0E,KAAK60E,IAAIF,GAC/Bl+E,KAAK09E,MAAQ,GACb,QAAS/0E,EAAI,EAAGA,EAnSD,EAmSqBA,IAAK,CACrC,MAAM01E,EAAO,GACb,QAAS1C,EAAI,EAAGA,EAtSN,EAsSyBA,IAAK,CACpC,MAAM1qB,EAAOjxD,KAAKm3E,gBAAgBthB,gBAAgB71D,KAAKm7E,iBAAkB+C,GACnEI,EAAWt+E,KAAKu+E,eAAettB,EAAMitB,GAEvCl+E,KAAKm3E,gBAAgB8C,UAAUj6E,KAAKm3E,gBAAgBzoD,MAAOuiC,KAC3DjxD,KAAKi+E,UAAYC,EAAW,GAEhCG,EAAK3xE,KAAK4xE,GACVJ,GAAY,CAChB,CAEA,GADAl+E,KAAK09E,MAAMhxE,KAAK2xE,GACZr+E,KAAK+wE,kBAAmB,CACxB,MAAMyN,EAAax+E,KAAKy+E,WAAW,IAAIllB,KAAK8kB,EAAK,GAAGr2B,YACpDhoD,KAAKowE,YAAY1jE,KAAK8xE,EAC1B,CACJ,CACAx+E,KAAKu9E,kBACT,CACAkB,WAAWtoE,GACP,MAAMuoE,EAAa,IAAInlB,KAAKA,KAAKolB,IAAIxoE,EAAEyoE,cAAezoE,EAAEmhD,WAAYnhD,EAAE+/C,YAEtEwoB,EAAWG,WAAWH,EAAWI,aAAe,GAAKJ,EAAWK,aAAe,IAE/E,MAAMC,EAAY,IAAIzlB,KAAKA,KAAKolB,IAAID,EAAWO,iBAAkB,EAAG,IAGpE,OADe11E,KAAK21E,QAASR,GAAcM,GAAa,MAAY,GAAK,EAE7E,CACAlB,qBAAqB/H,GACjB,GAAI/1E,KAAKo9E,wBACL,IACIp9E,KAAK02E,mBAAkByI,OAAwBpJ,EACnD,OAEI/1E,KAAK02E,gBAAkB,CAC3B,CAER,CAIA6H,eAAettB,EAAMitB,GAEjB,MAAMtlB,EAAc54D,KAAKm3E,gBAAgB/gB,kBAAkBp2D,KAAK4wE,cAG1DwO,EAFUp/E,KAAKm3E,gBAAgBjhB,QAAQjF,GAEpBt4C,WACnBqvC,EAAYhoD,KAAKm3E,gBAAgB/f,OAAOnG,EAAMjxD,KAAK+2E,gBAAgB/d,eAEnEr1C,EAAU3jB,KAAKq/E,cAAcpuB,GAE7BquB,EAAWpB,EAAW,EACtBnO,EAAMuP,EAAW,GAAKA,EAAW1mB,EACjC6W,EAAY,cAAgBzvE,KAAKm3E,gBAAgBgH,OAAOltB,GAC9D,OAAO,IAAIqnB,GAAagH,EAAUF,EAAUp3B,EAAWrkC,EAASosD,EAAKN,EACzE,CAIA4P,cAAcpuB,GACV,QAAUA,KACJjxD,KAAKkpD,YAAclpD,KAAKkpD,WAAW+H,OACnCjxD,KAAKopD,SACHppD,KAAKm3E,gBAAgB1B,QAAQxkB,EAAMjxD,KAAKopD,UAAY,MACtDppD,KAAKmpD,SACHnpD,KAAKm3E,gBAAgB1B,QAAQxkB,EAAMjxD,KAAKmpD,UAAY,EAChE,CAIAmuB,aAAaC,GACT,OAAOv3E,KAAKm3E,gBAAgBjmB,eAAeqmB,IACvCv3E,KAAKm3E,gBAAgBxvD,QAAQ4vD,GAC3BA,EACA,IACV,CAIAiG,YAAYP,EAAUC,GAClB,SAAUD,GACNC,GACAl9E,KAAKm3E,gBAAgBxvD,QAAQs1D,IAC7Bj9E,KAAKm3E,gBAAgBxvD,QAAQu1D,IAC7Bl9E,KAAKm3E,gBAAgBzf,QAAQulB,KACzBj9E,KAAKm3E,gBAAgBzf,QAAQwlB,IACjCl9E,KAAKm3E,gBAAgB7f,SAAS2lB,KAC1Bj9E,KAAKm3E,gBAAgB7f,SAAS4lB,GAC1C,CAMAK,mBAEI,GADAv9E,KAAK49E,cAAgB,GAChB59E,KAAKm7E,iBAGV,IAAIn7E,KAAKy4E,gBAAkBz4E,KAAK2iB,SAAU,CACtC,MAAM48D,EAAUv/E,KAAKm3E,gBAAgBqI,yBAAyBx/E,KAAK2iB,SAAU3iB,KAAKm7E,kBAElF,YADAn7E,KAAK49E,cAAc,GAAK2B,EAAU,EAEtC,CACIv/E,KAAK04E,eAAiB14E,KAAK6wE,YAC3B7wE,KAAK49E,cAAgB59E,KAAK6wE,UAAUpwE,IAAIkiB,GAChC3iB,KAAKm3E,gBAAgBxvD,QAAQhF,GACb3iB,KAAKm3E,gBAAgBqI,yBAAyB78D,EAAU3iB,KAAKm7E,kBAC5D,EAGV,MAEd,CAET,CACA/b,kBACIp/D,KAAKk8E,gBAAgB9c,iBACzB,QACSp/D,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFivC,GA5pDVz4E,MA4pDiDA,OA5pDjDA,MA4pDkF2wE,GAAe,GA5pDjG3wE,MA4pD8HuwE,GAAqB,IAA8D,QACxSj1E,KAAKk5E,UA7pDkFx0E,MAAE,CAAA8N,KA6pDJ2qE,EAAqBhvC,UAAA,+BAAAmJ,UAAA,SAAA9I,EAAAC,GAAinB,GAAjnB,EAAAD,GA7pDnB9pC,MA6pD4mB6zE,GAAwB,KAAA/pC,EAAA,KAAA6H,EA7pDpoB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAytC,gBAAA7lC,EAAAz1B,MAAA,GAAAuvB,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,uBAAA+pC,EAAAosC,kBA6pDiB,EAAAxqC,OAAA,CAAA2gC,gBAAA,kBAAAD,kBAAA,oBAAAxY,eAAA,iBAAAuY,WAAA,aAAAnuD,SAAA,WAAAkuD,UAAA,YAAAD,aAAA,eAAA1nB,WAAA,aAAAE,QAAA,UAAAD,QAAA,WAAA2G,QAAA,CAAA4D,eAAA,iBAAAmqB,cAAA,gBAAA7C,mBAAA,sBAAAxkC,SAAA,gBAAAw+B,YAAA,EAAA5mC,MAAA,EAAAC,KAAA,GAAAC,OAAA,4fAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IA7pDnB9pC,MAAE,EAAAyrE,GAAA,YAAFzrE,MAAE,YAAFA,CA6pDyjC,YA7pDzjCA,CA6pDumC,UA7pDvmCA,MAAE,EAAA2rE,GAAA,YAAF3rE,cAAE,QAAFA,MAAE,UAAFA,gBAAE,aAAFA,MAAE,mBAAAs7C,GAAA,OA6pDkyDvR,EAAAqtC,sBAAA97B,EAA6B,EA7pDj0Dt7C,CA6pDm0D,kBAAAs7C,GAAA,OAAwBvR,EAAAysC,mBAAAl7B,EAA0B,GA7pDr3Dt7C,WA6pDg5D,EAAA8pC,IA7pDh5D9pC,MAAE,OAAA+pC,EAAAsiC,mBAAFrsE,cAAE,qCAAA+pC,EAAAuiC,iBAAFtsE,MAAE,UAAFA,MAAE,GAAAksC,GAAAnC,EAAAsiC,oBAAFrsE,MAAE,GAAFA,MAAE,UAAA+pC,EAAAiqB,UAAFh0D,MAAE,GAAFA,MAAE,UAAFA,MAAE,GAAAksC,GAAAnC,EAAAsiC,oBAAFrsE,cAAE,OAAA+pC,EAAAgvC,KAAF/4E,CA6pDinD,aAAA+pC,EAAAwvC,UA7pDjnDv5E,CA6pD4oD,iBAAA+pC,EAAAmvC,cA7pD5oDl5E,CA6pD2rD,aAAA+pC,EAAAqiC,WA7pD3rDpsE,CA6pDmuD,aAAA+pC,EAAA6d,YAAwC,EAAA9U,aAAA,CAA8Z5mC,MAA8FA,MAA6HA,MAAoG2nE,IAAwBjoC,OAAA,0RAAAC,gBAAA,GAAyQ,EAC52F,OA7ZK4sC,CAAqB,KA4crBsC,GAAoB,MAA1B,MAAMA,EACF,WAAIr2B,GACA,OAAOppD,KAAKuzD,QAChB,CACA,WAAInK,CAAQzuC,GACRA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzCA,EAAQ3a,KAAKs3E,aAAa38D,GAC1B3a,KAAKuzD,SAAW54C,EACV3a,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQ/8C,GAAQ3a,KAAKm3E,gBAAgB7f,SAAS38C,GAAQ3a,KAAKm3E,gBAAgBjhB,QAAQv7C,IACxI,IACV,CACA,WAAIwuC,GACA,OAAOnpD,KAAKwzD,QAChB,CACA,WAAIrK,CAAQxuC,GACRA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzCA,EAAQ3a,KAAKs3E,aAAa38D,GAC1B3a,KAAKwzD,SAAW74C,EACV3a,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQ/8C,GAAQ3a,KAAKm3E,gBAAgB7f,SAAS38C,GAAQ3a,KAAKm3E,gBAAgBjhB,QAAQv7C,IACxI,IACV,CACA,gBAAIi2D,GACA,OAAO5wE,KAAKm6E,aAChB,CACA,gBAAIvJ,CAAaj2D,GACbA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKm6E,cACDn6E,KAAKs3E,aAAa38D,IAAU3a,KAAKm3E,gBAAgBzoD,KACzD,CACA,YAAI/L,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GACTA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKqzD,UAAYrzD,KAAKs3E,aAAa38D,EACvC,CACA,aAAIk2D,GACA,OAAO7wE,KAAKk6E,UAChB,CACA,aAAIrJ,CAAU3sD,GACVlkB,KAAKk6E,WAAah2D,EAAOzjB,IAAIu/B,IACzBA,EAAIhgC,KAAKm3E,gBAAgBnkB,YAAYhzB,GAC9BhgC,KAAKs3E,aAAat3C,IAEjC,CACA,oBAAIk9B,GACA,OAAOl9D,KAAK0/E,YACN1/E,KAAKm3E,gBAAgB/f,OAAOp3D,KAAK4wE,aAAc5wE,KAAK+2E,gBAAgB3Z,gBACpEp9D,KAAKm3E,gBAAgBxc,YAAY36D,KAAK4wE,aAChD,CACA,qBAAIrT,GACA,OAAOv9D,KAAK0/E,YACN1/E,KAAK46E,WAAW7vB,2BAChB/qD,KAAK46E,WAAW9vB,sBAC1B,CACA,mBAAI0S,GACA,OAAIx9D,KAAKi/D,eAAiBmS,GAASC,MACxBrxE,KAAK46E,WAAWpwB,eAElBxqD,KAAKi/D,eAAiBmS,GAASI,KAC7BxxE,KAAK46E,WAAWlwB,cAGhB,IAEf,CACA,mBAAI+S,GACA,OAAIz9D,KAAKi/D,eAAiBmS,GAASC,MACxBrxE,KAAK46E,WAAWnwB,eAElBzqD,KAAKi/D,eAAiBmS,GAASI,KAC7BxxE,KAAK46E,WAAWjwB,cAGhB,IAEf,CACA,eAAIwS,GACA,OAAOn9D,KAAKi/D,YAChB,CACA,eAAI9B,CAAYwC,GACZ3/D,KAAKi/D,aAAeU,EACpB3/D,KAAK2/E,qBAAsB,CAC/B,CACA,kBAAIlH,GACA,MAA2B,WAApBz4E,KAAK8wE,UAChB,CACA,iBAAI4H,GACA,MAA4B,UAApB14E,KAAK8wE,YACW,cAApB9wE,KAAK8wE,YACe,YAApB9wE,KAAK8wE,UACb,CACA,qBAAI8O,GACA,OAAO5/E,KAAKi/D,eAAiBmS,GAAS8E,WAC1C,CACA,eAAIwJ,GACA,OAAO1/E,KAAKi/D,eAAiBmS,GAASC,KAC1C,CAIA,sBAAIwO,GACA,OAAO,CACX,CACAhgF,YAAY84E,EAAQiC,EAAYhC,EAAQmB,EAAO5C,EAAiBJ,GAC5D/2E,KAAK24E,OAASA,EACd34E,KAAK46E,WAAaA,EAClB56E,KAAK44E,OAASA,EACd54E,KAAK+5E,MAAQA,EACb/5E,KAAKm3E,gBAAkBA,EACvBn3E,KAAK+2E,gBAAkBA,EACvB/2E,KAAKoxE,SAAWA,GAChBpxE,KAAKk6E,WAAa,GAIlBl6E,KAAK0+D,UAAY0S,GAASC,MAI1BrxE,KAAK4yE,UAAW,EAIhB5yE,KAAK+wE,mBAAoB,EAIzB/wE,KAAK6yE,eAAgB,EAErB7yE,KAAKg7E,mBAAqB,IAAIluB,MAE9B9sD,KAAK8/E,YAAc,IAAIhzB,MAEvB9sD,KAAK0zD,eAAiB,IAAI5G,MAE1B9sD,KAAK69E,cAAgB,IAAI/wB,MAIzB9sD,KAAK65D,aAAe,IAAI/M,MAIxB9sD,KAAKu7D,cAAgB,IAAIzO,MACzB9sD,KAAK+/E,eAAiBxsC,MAAamf,MAMnC1yD,KAAK2/E,qBAAsB,EAI3B3/E,KAAKggF,mBAAsB/uB,KACbA,KACJjxD,KAAKkpD,YAAclpD,KAAKkpD,WAAW+H,OACnCjxD,KAAKopD,SACHppD,KAAKm3E,gBAAgB1B,QAAQxkB,EAAMjxD,KAAKopD,UAAY,MACtDppD,KAAKmpD,SACHnpD,KAAKm3E,gBAAgB1B,QAAQxkB,EAAMjxD,KAAKmpD,UAAY,GAEhEnpD,KAAK+/E,eAAiB//E,KAAK46E,WAAWn6C,QAAQn4B,UAAU,KACpDtI,KAAK+5E,MAAM1kB,cAAa,EAEhC,CACAnmB,WACA,CACAwlB,qBACI10D,KAAKi/D,aAAej/D,KAAK0+D,SAC7B,CACAnS,qBACQvsD,KAAK2/E,sBACL3/E,KAAK2/E,qBAAsB,EAC3B3/E,KAAKo/D,kBAEb,CACA3nD,cACIzX,KAAK+/E,eAAetrC,aACxB,CAIAwrC,cACI,IAAIC,EAAW,KAEXA,EADAlgF,KAAKi/D,eAAiBmS,GAASC,OAI3BrxE,KAAK6yE,cAHEzB,GAAS8E,YAMXl2E,KAAK4yE,SACC5yE,KAAKi/D,eAAiBmS,GAASI,KAAOJ,GAAS8E,YAAc9E,GAASI,KAGtEJ,GAASC,MAG5BrxE,KAAKm9D,YAAc+iB,CACvB,CAIAviB,kBACI39D,KAAK4wE,aAAe5wE,KAAK0/E,YACnB1/E,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,cAAc,GAC1D5wE,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,cAAc,GAC/D5wE,KAAKg7E,mBAAmB1sB,KAAKtuD,KAAK4wE,aACtC,CAIAhT,cACI59D,KAAK4wE,aAAe5wE,KAAK0/E,YACnB1/E,KAAKm3E,gBAAgB3gB,kBAAkBx2D,KAAK4wE,aAAc,GAC1D5wE,KAAKm3E,gBAAgB5gB,iBAAiBv2D,KAAK4wE,aAAc,GAC/D5wE,KAAKg7E,mBAAmB1sB,KAAKtuD,KAAK4wE,aACtC,CACAF,aAAazf,GACJjxD,KAAKggF,mBAAmB/uB,KAG7BjxD,KAAK8/E,YAAYxxB,KAAK2C,GACtBjxD,KAAK0zD,eAAepF,KAAK2C,GAK7B,CAIAkgB,eAAelgB,EAAM0O,GACjB3/D,KAAKywE,yBAAyBxf,KACxBjxD,KAAK4yE,WAAa5yE,KAAK6yE,eACxB7yE,KAAK6yE,eAAkBlT,IAASyR,GAASC,OAAS1R,IAASyR,GAASI,MACpExxE,KAAK4yE,UAAYjT,IAASyR,GAASC,SACpCrxE,KAAKm9D,YAAcwC,EAG3B,CAIA8Q,yBAAyBxf,GACrBjxD,KAAK4wE,aAAe5wE,KAAKm3E,gBAAgBjkB,UAAUjC,EAAMjxD,KAAKopD,QAASppD,KAAKmpD,SAC5EnpD,KAAKg7E,mBAAmB1sB,KAAKtuD,KAAK4wE,aAEtC,CACAD,eACI3wE,KAAK69E,cAAcvvB,MACvB,CAIA6xB,oBACI,OAASngF,KAAKopD,UAAYppD,KAAKogF,WAAWpgF,KAAK4wE,aAAc5wE,KAAKopD,QACtE,CAIAi3B,oBACI,OAASrgF,KAAKmpD,UAAYnpD,KAAKogF,WAAWpgF,KAAK4wE,aAAc5wE,KAAKmpD,QACtE,CAIAiW,kBACIp/D,KAAK44E,OAAO5jC,kBAAkB,KAC1Bh1C,KAAK44E,OAAOI,SACPC,eACAp1E,QAAKsb,MAAK,IACV7W,UAAU,KACXtI,KAAK24E,OAAOzkC,cACPxgC,cAAc,gCACdo7C,OAAM,EACd,EAET,CACAyiB,0BAA0BzR,GACtB9/D,KAAK65D,aAAavL,KAAKwR,EAC3B,CACAoR,sBAAsBnR,GAClB//D,KAAKu7D,cAAcjN,KAAKyR,EAC5B,CAIAqgB,WAAWtlB,EAAOC,GACd,OAAI/6D,KAAKi/D,eAAiBmS,GAASC,SACrBvW,IACNC,GACA/6D,KAAKm3E,gBAAgBzf,QAAQoD,KACzB96D,KAAKm3E,gBAAgBzf,QAAQqD,IACjC/6D,KAAKm3E,gBAAgB7f,SAASwD,KAC1B96D,KAAKm3E,gBAAgB7f,SAASyD,IAEjC/6D,KAAKi/D,eAAiBmS,GAASI,SAC1B1W,IACNC,GACA/6D,KAAKm3E,gBAAgBzf,QAAQoD,KACzB96D,KAAKm3E,gBAAgBzf,QAAQqD,GAK7C,CAIAuc,aAAaC,GACT,OAAOv3E,KAAKm3E,gBAAgBjmB,eAAeqmB,IACvCv3E,KAAKm3E,gBAAgBxvD,QAAQ4vD,GAC3BA,EACA,IACV,QACSv3E,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFuxC,GA3gEV/6E,MA2gEgDA,OA3gEhDA,MA2gE0E8yE,IA3gE1E9yE,MA2gEsGA,OA3gEtGA,MA2gE4HA,OA3gE5HA,MA2gE6J2wE,GAAe,GA3gE5K3wE,MA2gEyMuwE,GAAqB,IAA8D,QACnXj1E,KAAKk5E,UA5gEkFx0E,MAAE,CAAA8N,KA4gEJitE,EAAoBtxC,UAAA,6BAAAgC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GA5gElB9pC,MAAE,kBAAA+pC,EAAAoxC,mBA4gEgB,EAAAxvC,OAAA,CAAA+Y,QAAA,UAAAD,QAAA,UAAAynB,aAAA,eAAAjuD,SAAA,WAAAkuD,UAAA,YAAA3nB,WAAA,aAAAqP,eAAA,iBAAAuY,WAAA,aAAApS,UAAA,YAAAkU,SAAA,WAAA7B,kBAAA,oBAAA8B,cAAA,gBAAA7B,gBAAA,mBAAAlhB,QAAA,CAAAkrB,mBAAA,qBAAA8E,YAAA,cAAApsB,eAAA,iBAAAmqB,cAAA,gBAAAhkB,aAAA,eAAA0B,cAAA,iBAAA/kB,SAAA,wBAAAw+B,YAAA,EAAA5mC,MAAA,GAAAC,KAAA,GAAAC,OAAA,g5GAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IA5gElB9pC,MAAE,UAAFA,CA4gEuyB,cA5gEvyBA,MAAE,0BA4gEssC+pC,EAAAkvB,iBAAiB,GA5gEztCj5D,MAAE,YAAFA,cAAE,WAAFA,MAAE,YAAFA,0BAAE,UAAFA,CA4gEisE,cA5gEjsEA,MAAE,0BA4gEi6E+pC,EAAAwxC,aAAa,GA5gEh7Ev7E,MAAE,YAAFA,MAAE,GAAFA,MAAE,YAAFA,cAAE,WAAFA,CA4gEimG,QA5gEjmGA,MAAE,aAAFA,gCAAE,eAAFA,MAAE,0BA4gEujI+pC,EAAAmvB,aAAa,GA5gEtkIl5D,MAAE,aAAFA,cAAE,aAAFA,MAAE,cAAFA,4BAAE,aAAFA,MAAE,GAAA8rE,GAAA,mCAAF9rE,CA4gE4wL,GAAAusE,GAAA,iCA5gE5wLvsE,CA4gEg4M,GAAA4sE,GAAA,wCA5gEh4M5sE,SA4gE0iO,EAAA8pC,IA5gE1iO9pC,cAAE,aAAA+pC,EAAAmxC,kBAAA,oBAAFl7E,MAAE,YAAA+pC,EAAA0xC,qBAAFz7E,MAAE,aAAA+pC,EAAA+uB,iBAAF94D,MAAE,GAAFA,MAAE,aAAA+pC,EAAA8uB,mBAAF74D,MAAE,GAAFA,MAAE,IAAA+pC,EAAAyuB,iBAAA,KAAFx4D,cAAE,uBAAA+pC,EAAAixC,YAAA,eAAFh7E,MAAE,GAAFA,MAAE,aAAA+pC,EAAAmxC,kBAAA,oBAAFl7E,MAAE,YAAA+pC,EAAA4xC,qBAAF37E,MAAE,aAAA+pC,EAAAgvB,iBAAF/4D,MAAE,GAAFA,MAAE,WAAA+pC,EAAA0uB,aAAFz4D,cAAE,eAAA+pC,EAAA2iC,SAAAC,OAAF3sE,cAAE,eAAA+pC,EAAA2iC,SAAAI,MAAF9sE,cAAE,eAAA+pC,EAAA2iC,SAAA8E,aA4gEg/M,EAAA1+B,aAAA,CAAqnB5mC,MAAwFA,MAAoGC,MAA6K8oE,GAAoRwC,GAAsSgB,IAAqBruC,cAAA,EAAAyB,gBAAA,GAAgW,EACl+Q,OAhUKkvC,CAAoB,KAwXpBa,GAAoB,MAA1B,MAAMA,EACF,gBAAIj4B,GACA,GAAIroD,KAAKugF,SAEL,OAAOvgF,KAAKwgF,WAAWtsC,cAAcv5B,MAEzC,MAAMA,EAAQ3a,KAAKygF,UAAYzgF,KAAK2a,MACpC,OAAc,OAAVA,GAAkB+lE,MAAM/lE,GACjB,GAEJA,EAAQ,GAAK,IAAMA,EAAMhC,WAAagC,EAAMhC,UACvD,CACA,sBAAIgoE,GACA,OAAO,CACX,CACA9gF,cACIG,KAAK4gF,aAAc,EACnB5gF,KAAK6gF,KAAO,EACZ7gF,KAAK8gF,YAAc,IAAIh0B,MACvB9sD,KAAK+gF,YAAc,IAAIj0B,MACvB9sD,KAAKghF,YAAc,IAAIzpE,KACvBvX,KAAKihF,eAAiB1tC,MAAamf,MACnC1yD,KAAKugF,UAAW,EAChBvgF,KAAKkhF,2BAA6BlhF,KAAKmhF,uBAAuBC,KAAKphF,KACvE,CACAkvC,WACIlvC,KAAKihF,eAAiBjhF,KAAKghF,YAAYn9E,QAAKw9E,MAAa,MAAM/4E,UAAW+tE,IACtE,GAAIA,EAAK,CACL,MAAMiL,KAAaluC,OAAqBijC,EAAK,GAC7Cr2E,KAAKuhF,oBAAoBD,EAC7B,IAEJthF,KAAKwhF,0BACT,CACA/pE,cACIzX,KAAKyhF,6BACLzhF,KAAKihF,eAAexsC,aACxB,CACAitC,eACI1hF,KAAKyiD,YAAYziD,KAAK2a,MAAQ3a,KAAK6gF,KACvC,CACAc,iBACI3hF,KAAKyiD,YAAYziD,KAAK2a,MAAQ3a,KAAK6gF,KACvC,CACAe,kBAAkBvL,GACdr2E,KAAKghF,YAAY3mE,KAAKg8D,EAC1B,CACAwL,UACI7hF,KAAKugF,UAAW,CACpB,CACAuB,SAASnnE,GAEL,GADA3a,KAAKugF,UAAW,EACZ5lE,EAAO,CACP,MAAM2mE,KAAaluC,OAAqBz4B,EAAO,GAC/C3a,KAAKuhF,oBAAoBD,EAC7B,CACJ,CACA7+B,YAAY9nC,GACR3a,KAAK8gF,YAAYxyB,KAAK3zC,EAC1B,CACA4mE,oBAAoB5mE,GACZA,EAAQ3a,KAAKm9B,KAAOxiB,EAAQ3a,KAAKi9B,KAGrCj9B,KAAK+gF,YAAYzyB,KAAK3zC,EAC1B,CACAwmE,uBAAuBzlC,GAEnB,MAAMqmC,GADNrmC,EAAQA,GAAS5oC,OAAO4oC,OACJsmC,aAAetmC,EAAMumC,SAAWvmC,EAAMwmC,OACtDH,EAAQ,EACH/hF,KAAKmiF,eACNniF,KAAK0hF,eAGJK,EAAQ,IACR/hF,KAAKoiF,iBACNpiF,KAAK2hF,kBAGbjmC,EAAME,eAAiBF,EAAME,iBAAoBF,EAAM2mC,aAAc,CACzE,CACAb,2BACIxhF,KAAKwgF,WAAWtsC,cAAc9gC,iBAAiB,YAAaC,SAAW,QAAU,aAAcrT,KAAKkhF,2BACxG,CACAO,6BACIzhF,KAAKwgF,WAAWtsC,cAAc/gC,oBAAoB,YAAaE,SAAW,QAAU,aAAcrT,KAAKkhF,2BAC3G,QACSlhF,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFoyC,EAAoB,CAAqD,QAC1KtgF,KAAKk5E,UA7pEkFx0E,MAAE,CAAA8N,KA6pEJ8tE,EAAoBnyC,UAAA,8BAAAmJ,UAAA,SAAA9I,EAAAC,GA7pEhB,GA6pEgB,EAAAD,GA7pElB9pC,MAAEmsC,GAAA,KAAArC,EAAA,KAAA6H,EAAF3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAA+xC,WAAAnqC,EAAAz1B,MAAA,GAAAuvB,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,mBAAA+pC,EAAAkyC,mBA6pEgB,EAAAtwC,OAAA,CAAAuwC,YAAA,cAAA0B,eAAA,iBAAAH,cAAA,gBAAAI,iBAAA,mBAAAH,gBAAA,kBAAA3B,SAAA,WAAA9lE,MAAA,QAAAsiB,IAAA,MAAAE,IAAA,MAAA0jD,KAAA,OAAA2B,WAAA,cAAA1yB,QAAA,CAAAgxB,YAAA,cAAAC,YAAA,eAAAvqC,SAAA,wBAAAw+B,YAAA,EAAA5mC,MAAA,GAAAC,KAAA,EAAAC,OAAA,87CAAAC,SAAA,SAAAC,EAAAC,GAAA,KAAAD,EAAA,OAAA+I,EA7pElB7yC,cAAE,EAAA+sE,GAAA,aAAF/sE,MAAE,cAAFA,MAAE,mBAAFA,aAAE6yC,GAAF7yC,MA6pEi8B+pC,EAAAizC,eAAc,GA7pE/8Bh9E,MAAE,YAAFA,cAAE,WAAFA,MAAE,YAAFA,0BAAE,YAAFA,CA6pEo5D,eA7pEp5DA,MAAE,6BAAFA,aAAE6yC,GAAF7yC,OAAE+pC,EAAA0zC,eA6pEmiE1zC,EAAAizC,eAAc,EA7pEnjEh9E,CA6pEqjE,+BA7pErjEA,aAAE6yC,GAAF7yC,OAAE+pC,EAAA2zC,iBA6pE0mE3zC,EAAAkzC,iBAAgB,EA7pE5nEj9E,CA6pE8nE,mBA7pE9nEA,MAAE6yC,GAAA,MAAAkrC,EAAF/9E,MAAE,UAAFA,MA6pEqpE+pC,EAAAmzC,kBAAAa,EAAA9nE,OAAmC,EA7pExrEjW,CA6pE0rE,qBA7pE1rEA,aAAE6yC,GAAF7yC,MA6pEmtE+pC,EAAAozC,UAAS,EA7pE5tEn9E,CA6pE8tE,sBA7pE9tEA,MAAE6yC,GAAA,MAAAkrC,EAAF/9E,MAAE,UAAFA,MA6pEwvE+pC,EAAAqzC,SAAAW,EAAA9nE,OAA0B,GA7pElxEjW,cAAE,YAAFA,MAAE,GAAFA,gBAAE,eAAFA,MAAE,mBAAFA,aAAE6yC,GAAF7yC,MA6pEklF+pC,EAAAkzC,iBAAgB,GA7pElmFj9E,MAAE,aAAFA,cAAE,YAAFA,MAAE,aAAFA,WA6pEkgH,GAAA8pC,IA7pElgH9pC,MAAE,OAAA+pC,EAAAmyC,aAAFl8E,cAAE,WAAA+pC,EAAA0zC,eAAFz9E,MAAE,aAAA+pC,EAAA6zC,gBAAF59E,MAAE,GAAFA,MAAE,QAAA+pC,EAAA4Z,cAAF3jD,MAAE,GAAFA,MAAE+pC,EAAA+zC,YAAF99E,cAAE,WAAA+pC,EAAA2zC,iBAAF19E,MAAE,aAAA+pC,EAAA8zC,kBAAA,EAAA/qC,aAAA,CA6pE6jH5mC,OAAOk+B,cAAA,EAAAyB,gBAAA,GAA0H,EACnyH,OAzFK+vC,CAAoB,KAiIpBoC,GAAiB,MAAvB,MAAMA,EACF,gBAAI9R,GACA,OAAO5wE,KAAKm6E,aAChB,CACA,gBAAIvJ,CAAaj2D,GACbA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKm6E,cACDn6E,KAAKs3E,aAAa38D,IAAU3a,KAAKm3E,gBAAgBzoD,KACzD,CACA,eAAI+jD,GACA,OAAOzyE,KAAK2iF,YAChB,CACA,eAAIlQ,CAAY93D,GACZA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAK2iF,aAAe3iF,KAAKs3E,aAAa38D,EAC1C,CACA,eAAI+3D,GACA,OAAO1yE,KAAK4iF,YAChB,CACA,eAAIlQ,CAAY/3D,GACZA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAK4iF,aAAe5iF,KAAKs3E,aAAa38D,EAC1C,CACA,aAAIkoE,GACA,OAAO7iF,KAAKm3E,gBAAgBiE,SAASp7E,KAAK4wE,aAC9C,CAMA,gBAAIkS,GACA,IAAIC,EAAQ/iF,KAAK6iF,UACjB,OAAK7iF,KAAKizE,cAIQ,IAAV8P,GACAA,EAAQ,GACR/iF,KAAKgjF,MAAO,GAEPD,EAAQ,GAAKA,EAAQ,GAC1B/iF,KAAKgjF,MAAO,EAEG,KAAVD,EACL/iF,KAAKgjF,MAAO,EAEPD,EAAQ,IAAMA,EAAQ,KAC3BA,GAAgB,GAChB/iF,KAAKgjF,MAAO,IAETD,CAEf,CACA,eAAIE,GACA,OAAOjjF,KAAKm3E,gBAAgBkE,WAAWr7E,KAAK4wE,aAChD,CACA,eAAIoB,GACA,OAAOhyE,KAAKm3E,gBAAgBmE,WAAWt7E,KAAK4wE,aAChD,CACA,qBAAIsS,GACA,OAAOljF,KAAK46E,WAAW/C,WAC3B,CACA,uBAAIsL,GACA,OAAOnjF,KAAK46E,WAAW9C,aAC3B,CACA,uBAAIsL,GACA,OAAOpjF,KAAK46E,WAAWjD,aAC3B,CACA,yBAAI0L,GACA,OAAOrjF,KAAK46E,WAAWhD,eAC3B,CACA,uBAAIhG,GACA,OAAO5xE,KAAK46E,WAAWnD,aAC3B,CACA,yBAAI5F,GACA,OAAO7xE,KAAK46E,WAAWlD,eAC3B,CACA,qBAAItF,GACA,OAAOpyE,KAAKgjF,KACNhjF,KAAK46E,WAAWxC,cAChBp4E,KAAK46E,WAAWzC,aAC1B,CACA,mBAAImL,GACA,OAAO,CACX,CACA,qBAAIC,GACA,OAAO,CACX,CACA1jF,YAAY+4E,EAAQD,EAAQiC,EAAYb,EAAO5C,GAC3Cn3E,KAAK44E,OAASA,EACd54E,KAAK24E,OAASA,EACd34E,KAAK46E,WAAaA,EAClB56E,KAAK+5E,MAAQA,EACb/5E,KAAKm3E,gBAAkBA,EACvBn3E,KAAKgjF,MAAO,EAIZhjF,KAAKkzE,SAAW,EAIhBlzE,KAAKmzE,WAAa,EAIlBnzE,KAAKiyE,WAAa,EAClBjyE,KAAK0zD,eAAiB,IAAI5G,KAC9B,CACA5d,WAAa,CAIb4f,QACI9uD,KAAK44E,OAAO5jC,kBAAkB,KAC1Bh1C,KAAK44E,OAAOI,SACPC,eACAp1E,QAAKsb,MAAK,IACV7W,UAAU,KACXtI,KAAK24E,OAAOzkC,cAAc4a,OAAM,EACnC,EAET,CAKA00B,qBAAqBT,GACb/iF,KAAKizE,aAAejzE,KAAKgjF,MAAQD,GAAS,GAAKA,GAAS,GACxDA,GAAgB,GAEX/iF,KAAKizE,cAAgBjzE,KAAKgjF,MAAkB,KAAVD,IACvCA,EAAQ,GAEZ/iF,KAAKyjF,aAAaV,EACtB,CACAU,aAAaV,GACT,MAAMljD,EAAI7/B,KAAKm3E,gBAAgBuM,SAAS1jF,KAAK4wE,aAAcmS,GAC3D/iF,KAAK0zD,eAAepF,KAAKzuB,GACzB7/B,KAAK+5E,MAAM1kB,cACf,CACAsuB,eAAeC,GACX,MAAM/jD,EAAI7/B,KAAKm3E,gBAAgB0M,WAAW7jF,KAAK4wE,aAAcgT,GAC7D5jF,KAAK0zD,eAAepF,KAAKzuB,GACzB7/B,KAAK+5E,MAAM1kB,cACf,CACAsc,eAAemS,GACX,MAAMjkD,EAAI7/B,KAAKm3E,gBAAgB4M,WAAW/jF,KAAK4wE,aAAckT,GAC7D9jF,KAAK0zD,eAAepF,KAAKzuB,GACzB7/B,KAAK+5E,MAAM1kB,cACf,CACA8c,YAAYz2B,GACR17C,KAAKgjF,MAAQhjF,KAAKgjF,KAClB,IAAID,EAAQ/iF,KAAK6iF,UACb7iF,KAAKgjF,KACLD,GAAgB,GAGhBA,GAAgB,GAEhBA,GAAS,GAAKA,GAAS,IACvB/iF,KAAKyjF,aAAaV,GAEtB/iF,KAAK+5E,MAAM1kB,eACX3Z,EAAME,gBACV,CAIAooC,gBACI,OAAShkF,KAAK0yE,aACV1yE,KAAKikF,aAAajkF,KAAKkzE,SAAUlzE,KAAK0yE,aAAe,CAC7D,CAIAwR,kBACI,OAASlkF,KAAKyyE,aACVzyE,KAAKikF,cAAcjkF,KAAKkzE,SAAUlzE,KAAKyyE,cAAe,CAC9D,CAIA0R,kBACI,OAASnkF,KAAK0yE,aACV1yE,KAAKokF,eAAepkF,KAAKmzE,WAAYnzE,KAAK0yE,aAAe,CACjE,CAIA2R,oBACI,OAASrkF,KAAKyyE,aACVzyE,KAAKokF,gBAAgBpkF,KAAKmzE,WAAYnzE,KAAKyyE,cAAe,CAClE,CAIAX,kBACI,OAAS9xE,KAAK0yE,aACV1yE,KAAKskF,eAAetkF,KAAKiyE,WAAYjyE,KAAK0yE,aAAe,CACjE,CAIAX,oBACI,OAAS/xE,KAAKyyE,aACVzyE,KAAKskF,gBAAgBtkF,KAAKiyE,WAAYjyE,KAAKyyE,cAAe,CAClE,CAOAwR,aAAaM,EAAQC,GACjB,MAAMzB,EAAQ/iF,KAAKm3E,gBAAgBiE,SAASp7E,KAAK4wE,cAAgB2T,EAC3D//E,EAASxE,KAAKm3E,gBAAgBuM,SAAS1jF,KAAK4wE,aAAcmS,GAChE,OAAO/iF,KAAKm3E,gBAAgB1B,QAAQjxE,EAAQggF,EAChD,CAOAJ,eAAeG,EAAQC,GACnB,MAAMZ,EAAU5jF,KAAKm3E,gBAAgBkE,WAAWr7E,KAAK4wE,cAAgB2T,EAC/D//E,EAASxE,KAAKm3E,gBAAgB0M,WAAW7jF,KAAK4wE,aAAcgT,GAClE,OAAO5jF,KAAKm3E,gBAAgB1B,QAAQjxE,EAAQggF,EAChD,CAOAF,eAAeC,EAAQC,GACnB,MAAMV,EAAU9jF,KAAKm3E,gBAAgBmE,WAAWt7E,KAAK4wE,cAAgB2T,EAC/D//E,EAASxE,KAAKm3E,gBAAgB4M,WAAW/jF,KAAK4wE,aAAckT,GAClE,OAAO9jF,KAAKm3E,gBAAgB1B,QAAQjxE,EAAQggF,EAChD,CAIAlN,aAAaC,GACT,OAAOv3E,KAAKm3E,gBAAgBjmB,eAAeqmB,IACvCv3E,KAAKm3E,gBAAgBxvD,QAAQ4vD,GAC3BA,EACA,IACV,QACSv3E,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFw0C,GAj8EVh+E,MAi8E6CA,OAj8E7CA,MAi8EmEA,OAj8EnEA,MAi8E6F8yE,IAj8E7F9yE,MAi8EyHA,OAj8EzHA,MAi8E0J2wE,GAAe,IAA8D,QAC9Tr1E,KAAKk5E,UAl8EkFx0E,MAAE,CAAA8N,KAk8EJkwE,EAAiBv0C,UAAA,0BAAAgC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,IAl8Ef9pC,MAAE,WAAA+pC,EAAA80C,mBAAF7+E,MAAE,eAAA+pC,EAAA60C,iBAk8Ea,EAAAjzC,OAAA,CAAAugC,aAAA,eAAA6B,YAAA,cAAAC,YAAA,cAAAM,iBAAA,mBAAAC,YAAA,cAAAC,SAAA,WAAAC,WAAA,aAAAlB,WAAA,cAAAniB,QAAA,CAAA4D,eAAA,kBAAAld,SAAA,qBAAAw+B,YAAA,EAAA5mC,MAAA,EAAAC,KAAA,GAAAC,OAAA,krBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAl8Ef9pC,MAAE,+BAAFA,MAAE,uBAAAs7C,GAAA,OAk8Eu3BvR,EAAA+0C,qBAAAxjC,EAA4B,EAl8Er5Bt7C,CAk8Eu5B,uBAAAs7C,GAAA,OAA0BvR,EAAAg1C,aAAAzjC,EAAoB,GAl8Er8Bt7C,cAAE,+BAAFA,MAAE,uBAAAs7C,GAAA,OAk8Em3CvR,EAAAk1C,eAAA3jC,EAAsB,EAl8E34Ct7C,CAk8E64C,uBAAAs7C,GAAA,OAA0BvR,EAAAk1C,eAAA3jC,EAAsB,GAl8E77Ct7C,cAAE,EAAAgtE,GAAA,iCAAFhtE,CAk8E49D,EAAAwtE,GAAA,cAAuF,EAAA1jC,IAl8EnjE9pC,MAAE,iBAAA+pC,EAAAy0C,kBAAFx+E,CAk8EyjB,mBAAA+pC,EAAA00C,oBAl8EzjBz+E,CAk8E6mB,iBAAA+pC,EAAAu1C,gBAl8E7mBt/E,CAk8E2pB,mBAAA+pC,EAAAy1C,kBAl8E3pBx/E,CAk8E6sB,WAAA+pC,EAAAq0C,aAl8E7sBp+E,CAk8EkvB,QAAA+pC,EAAAo0C,UAl8ElvBn+E,CAk8EixB,QAl8EjxBA,CAk8E6xB,SAl8E7xBA,CAk8E0yB,OAAA+pC,EAAAykC,SAl8E1yBxuE,CAk8Eu0B,qBAl8Ev0BA,cAAE,iBAAFA,CAk8E4hC,iBAAA+pC,EAAA20C,oBAl8E5hC1+E,CAk8E8kC,mBAAA+pC,EAAA40C,sBAl8E9kC3+E,CAk8EooC,iBAAA+pC,EAAA01C,kBAl8EpoCz/E,CAk8EorC,mBAAA+pC,EAAA41C,oBAl8EprC3/E,CAk8EwuC,QAAA+pC,EAAAw0C,YAl8ExuCv+E,CAk8EywC,QAl8EzwCA,CAk8EqxC,SAl8ErxCA,CAk8EkyC,OAAA+pC,EAAA0kC,WAl8ElyCzuE,CAk8Ei0C,uBAl8Ej0CA,cAAE,OAAA+pC,EAAAukC,kBAAFtuE,cAAE,OAAA+pC,EAAAwkC,aAk8EghE,EAAAz7B,aAAA,CAAgZ5mC,MAAoG0vE,IAAoBxxC,cAAA,EAAAyB,gBAAA,GAAyU,EACt8F,OA7PKmyC,CAAiB,KA6RvB,MAAM+B,GAA8B,CAChCC,mBAAiBtkB,OAAQ,kBAAmB,IACxCzmD,OAAM,UAAQ6mD,OAAM,CAAEC,QAAS,EAAG97B,UAAW,kBAAgB,EAC7DhrB,OAAM,WAAS6mD,OAAM,CAAEC,QAAS,EAAG97B,UAAW,kBAAgB,EAC9D07B,OAAW,mBAAiBzjD,OAAM,IAC9B+nE,MAAM,mBAAiBC,SAAgB,CAAEnzC,UAAU,KAAM,EACzD6uB,OAAQ,8CACV,EACFD,OAAW,mBAAiBC,OAAQ,kBAAgBE,OAAM,CAAEC,QAAS,QAEzEokB,gBAAczkB,OAAQ,eAAgB,IAClCzmD,OAAM,WAAS6mD,OAAM,CAAEC,QAAS,MAAI,EACpC9mD,OAAM,UAAQ6mD,OAAM,CAAEC,QAAS,MAAI,EACnCJ,OAAW,mBAAiBC,OAAQ,oDAI5C,IAGMwkB,GAA6B,MAAnC,MAAMA,EACF,oBAAIC,GACA,OAAO/kF,KAAKglF,YAAY/L,cAC5B,CACA,yBAAIgM,GACA,OAAOjlF,KAAKklF,iBAAiBjM,cACjC,CACA,4BAAIkM,GACA,OAAOnlF,KAAKolF,oBAAoBnM,cACpC,CACA,sBAAIoM,GACA,OAAOrlF,KAAKslF,cAAcrM,cAC9B,CACA,gBAAIrI,GACA,OAAO5wE,KAAKulF,iBAChB,CACA,gBAAI3U,CAAaj2D,GACTA,IACA3a,KAAKulF,kBAAoBvlF,KAAKm3E,gBAAgBjkB,UAAUv4C,EAAO3a,KAAKslB,OAAOmtD,YAAazyE,KAAKslB,OAAOotD,cAExG1yE,KAAK+5E,MAAM1kB,cACf,CACA,cAAIyhB,GACA,OAAO92E,KAAKslB,OAAOwxD,UACvB,CACA,eAAI5C,GACA,OAAOl0E,KAAK46E,WAAW7C,cAC3B,CACA,YAAI5D,GACA,OAAOn0E,KAAK46E,WAAW5C,WAC3B,CAIA,aAAItE,GACA,OAAO1zE,KAAK46E,WAAW3C,cAC3B,CAIA,WAAIrE,GACA,OAAO5zE,KAAK46E,WAAW1C,YAC3B,CAIA,sBAAIvE,GACA,MAAMh5D,EAAQ3a,KAAKslB,OAAOurD,UAAU,GACpC,OAAOl2D,EACD3a,KAAKm3E,gBAAgB/f,OAAOz8C,EAAO3a,KAAKslB,OAAOuxD,cAC/C,EACV,CAIA,oBAAIhD,GACA,MAAMl5D,EAAQ3a,KAAKslB,OAAOurD,UAAU,GACpC,OAAOl2D,EACD3a,KAAKm3E,gBAAgB/f,OAAOz8C,EAAO3a,KAAKslB,OAAOuxD,cAC/C,EACV,CAMA,sBAAI2O,GACA,MAAmC,WAA3BxlF,KAAKslB,OAAOmgE,YACY,aAA3BzlF,KAAKslB,OAAOwxD,YACkB,WAA3B92E,KAAKslB,OAAOmgE,UACxB,CACA,gBAAIC,GACA,OAAO1lF,KAAK24E,OAAOzkC,aACvB,CACA,uBAAIyxC,GACA,OAAO,CACX,CACA,4BAAIC,GACA,MAAkC,UAA3B5lF,KAAKslB,OAAOmgE,UACvB,CACA,6BAAII,GACA,MAAkC,WAA3B7lF,KAAKslB,OAAOmgE,UACvB,CACA,6BAAIK,GACA,MAAkC,WAA3B9lF,KAAKslB,OAAOmgE,UACvB,CACA,+BAAIM,GACA,OAAO/lF,KAAKslB,OAAO6H,QACvB,CACA,oBAAI64D,GACA,OAAOhmF,KAAKslB,OAAOtG,EACvB,CACA,2BAAIinE,GACA,MAAkC,WAA3BjmF,KAAKslB,OAAOmgE,WAA0B,GAAK,OACtD,CACA5lF,YAAYk6E,EAAOpB,EAAQiC,EAAYzD,GACnCn3E,KAAK+5E,MAAQA,EACb/5E,KAAK24E,OAASA,EACd34E,KAAK46E,WAAaA,EAClB56E,KAAKm3E,gBAAkBA,EACvBn3E,KAAKyzE,oBAAsB,EAI3BzzE,KAAKglF,YAAc,IAAIztE,KAIvBvX,KAAKklF,iBAAmB,IAAI3tE,KAC5BvX,KAAKolF,oBAAsB,IAAI7tE,KAC/BvX,KAAKslF,cAAgB,IAAI/tE,IAC7B,CACA23B,WACmC,UAA3BlvC,KAAKslB,OAAOwrD,aACR9wE,KAAKslB,OAAOurD,UAAU,KACtB7wE,KAAKkmF,gBAAkBlmF,KAAKm3E,gBAAgB7lB,MAAMtxD,KAAKslB,OAAOurD,UAAU,KAExE7wE,KAAKslB,OAAOurD,UAAU,KACtB7wE,KAAKmmF,cAAgBnmF,KAAKm3E,gBAAgB7lB,MAAMtxD,KAAKslB,OAAOurD,UAAU,KAGlF,CACAnc,qBACI10D,KAAKomF,YACT,CACA7xC,kBACIv0C,KAAKqmF,aACT,CACAC,8BAA8B5qC,GAEV,UADAA,EAAM6qC,SAElBvmF,KAAKolF,oBAAoB/qE,KAAK,KAEtC,CACAmsE,6BAA6B9qC,GAET,UADAA,EAAM6qC,SAElBvmF,KAAKslF,cAAcjrE,KAAK,KAEhC,CACAq2D,aAAazf,GACT,IAAIzsD,EACJ,GAAIxE,KAAKslB,OAAOmzD,eAYZ,OAXAj0E,EAASxE,KAAKymF,yBAAyBx1B,QACnCzsD,GACAxE,KAAK4wE,aAAepsE,EACpBxE,KAAKslB,OAAOkgD,OAAOhhE,IAIK,aAApBxE,KAAK82E,YACL92E,KAAKglF,YAAY3qE,KAAK,OAK9Bra,KAAKslB,OAAOozD,gBACZl0E,EAASxE,KAAK0mF,wBAAwBz1B,GAClCzsD,IACAxE,KAAK4wE,aAAepsE,EAAOxE,KAAKyzE,qBAChCzzE,KAAKslB,OAAOkgD,OAAOhhE,IAG/B,CACAuuE,aAAa4T,GAET,GADA3mF,KAAK4wE,aAAe5wE,KAAKm3E,gBAAgB7lB,MAAMq1B,GAC1C3mF,KAAKslB,OAAO8xD,gBAAgBp3E,KAAK4wE,cAGtC,IAAI5wE,KAAKslB,OAAOmzD,eAEZ,YADAz4E,KAAKslB,OAAOkgD,OAAOxlE,KAAK4wE,cAG5B,GAAI5wE,KAAKslB,OAAOozD,cAAe,CAC3B,MAAM7H,EAAY,IAAI7wE,KAAKslB,OAAOurD,WAGA,IAA7B7wE,KAAKyzE,qBACN5C,EAAU,IACwD,IAAlE7wE,KAAKm3E,gBAAgB1B,QAAQz1E,KAAK4wE,aAAcC,EAAU,KAC5B,IAA7B7wE,KAAKyzE,qBACF5C,EAAU,KACwD,IAAlE7wE,KAAKm3E,gBAAgB1B,QAAQz1E,KAAK4wE,aAAcC,EAAU,KAC9DA,EAAU,GAAK7wE,KAAK4wE,aACpBC,EAAU,GAAK7wE,KAAK4wE,cAGpBC,EAAU7wE,KAAKyzE,qBAAuBzzE,KAAK4wE,aAE3CC,EAAU,KACV7wE,KAAKkmF,gBAAkBlmF,KAAKm3E,gBAAgB7lB,MAAMuf,EAAU,KAE5DA,EAAU,KACV7wE,KAAKmmF,cAAgBnmF,KAAKm3E,gBAAgB7lB,MAAMuf,EAAU,KAE9D7wE,KAAKslB,OAAOkgD,OAAOqL,EACvB,EACJ,CAIAmD,gBAAgBt4B,GACZ17C,KAAKglF,YAAY3qE,KAAK,MACtBqhC,EAAME,gBAEV,CAIAq4B,aAAav4B,GACT,IAAK17C,KAAKslB,OAAO8xD,gBAAgBp3E,KAAK4wE,cAGlC,OAFA5wE,KAAKglF,YAAY3qE,KAAK,WACtBqhC,EAAME,iBAGV57C,KAAKklF,iBAAiB7qE,KAAKqhC,GAC3BA,EAAME,gBAEV,CAIAy3B,uBAAuB33B,EAAO1zC,GAC1BhI,KAAK4mF,uBAAuB5+E,GAC5B0zC,EAAME,iBACNF,EAAMqb,iBACV,CAIAwc,yBAAyB73B,EAAOrhC,EAAMrS,GAClC,OAAQ0zC,EAAMia,SACV,KAAKK,MACL,KAAKF,MACL,KAAKC,MACL,KAAKH,MACDv7C,EAAKy0C,QACL9uD,KAAK4mF,uBAAiC,IAAV5+E,EAAc,EAAI,GAC9C0zC,EAAME,iBACNF,EAAMqb,kBACN,MACJ,KAAKJ,MACD32D,KAAK4mF,uBAAuB5+E,GAC5B0zC,EAAME,iBACNF,EAAMqb,kBACN,MACJ,QACI,OAEZ,CAIA6vB,uBAAuB5+E,GACnB,GAA+B,UAA3BhI,KAAKslB,OAAOwrD,YACZ9wE,KAAKyzE,sBAAwBzrE,EAAO,CACpChI,KAAKyzE,oBAAsBzrE,EAC3B,MAAM2a,EAAW3iB,KAAKslB,OAAOurD,UAAU7wE,KAAKyzE,qBACxCzzE,KAAKslB,OAAOurD,WAAaluD,IACzB3iB,KAAK4wE,aAAe5wE,KAAKm3E,gBAAgB7lB,MAAM3uC,GAEvD,CAEJ,CACAyjE,aACIpmF,KAAK4wE,aAAe5wE,KAAKslB,OAAOk5C,SAAWx+D,KAAKm3E,gBAAgBzoD,MAChE1uB,KAAKyzE,oBAAiD,YAA3BzzE,KAAKslB,OAAOwrD,WAA2B,EAAI,CAC1E,CAKA2V,yBAAyBx1B,GACrB,OAAIjxD,KAAKm3E,gBAAgB8C,UAAUhpB,EAAMjxD,KAAKslB,OAAO3C,UAC1C,KAEJ3iB,KAAK6mF,2BAA2B51B,EAC3C,CAIAy1B,wBAAwBz1B,GACpB,IAAIpb,EAAO71C,KAAKslB,OAAOurD,UAAU,GAC7BiW,EAAK9mF,KAAKslB,OAAOurD,UAAU,GAC/B,MAAMrsE,EAASxE,KAAK6mF,2BAA2B51B,GAC/C,OAAKzsD,GAM0B,UAA3BxE,KAAKslB,OAAOwrD,WACR9wE,KAAKslB,OAAOurD,WACZ7wE,KAAKslB,OAAOurD,UAAU7mE,SACrB88E,GACDjxC,GACA71C,KAAKm3E,gBAAgBqI,yBAAyBh7E,EAAQqxC,IAAS,GAE3DixC,EADA9mF,KAAKslB,OAAOyhE,QAAU/mF,KAAKmmF,cACtBnmF,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQlzD,GAASxE,KAAKm3E,gBAAgB7f,SAAS9yD,GAASxE,KAAKm3E,gBAAgBjhB,QAAQ1xD,GAASxE,KAAKm3E,gBAAgBiE,SAASp7E,KAAKslB,OAAOyhE,OAAQ/mF,KAAKm3E,gBAAgBkE,WAAWr7E,KAAKslB,OAAOyhE,OAAQ/mF,KAAKm3E,gBAAgBmE,WAAWt7E,KAAKslB,OAAOyhE,QAErS/mF,KAAKmmF,cACLnmF,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQlzD,GAASxE,KAAKm3E,gBAAgB7f,SAAS9yD,GAASxE,KAAKm3E,gBAAgBjhB,QAAQ1xD,GAASxE,KAAKm3E,gBAAgBiE,SAASp7E,KAAKmmF,eAAgBnmF,KAAKm3E,gBAAgBkE,WAAWr7E,KAAKmmF,eAAgBnmF,KAAKm3E,gBAAgBmE,WAAWt7E,KAAKmmF,gBAGhS3hF,EAETxE,KAAKyzE,oBAAsB,IAIvB59B,EADA71C,KAAKslB,OAAOk5C,UAAYx+D,KAAKkmF,gBACtBlmF,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQlzD,GAASxE,KAAKm3E,gBAAgB7f,SAAS9yD,GAASxE,KAAKm3E,gBAAgBjhB,QAAQ1xD,GAASxE,KAAKm3E,gBAAgBiE,SAASp7E,KAAKslB,OAAOk5C,SAAUx+D,KAAKm3E,gBAAgBkE,WAAWr7E,KAAKslB,OAAOk5C,SAAUx+D,KAAKm3E,gBAAgBmE,WAAWt7E,KAAKslB,OAAOk5C,UAE3Sx+D,KAAKkmF,gBACHlmF,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQlzD,GAASxE,KAAKm3E,gBAAgB7f,SAAS9yD,GAASxE,KAAKm3E,gBAAgBjhB,QAAQ1xD,GAASxE,KAAKm3E,gBAAgBiE,SAASp7E,KAAKkmF,iBAAkBlmF,KAAKm3E,gBAAgBkE,WAAWr7E,KAAKkmF,iBAAkBlmF,KAAKm3E,gBAAgBmE,WAAWt7E,KAAKkmF,kBAGpS1hF,EAEXsiF,EAAK,KACL9mF,KAAKyzE,oBAAsB,GAGC,cAA3BzzE,KAAKslB,OAAOwrD,YACjBj7B,EAAOrxC,EAEHsiF,GAAM9mF,KAAKm3E,gBAAgB1B,QAAQ5/B,EAAMixC,GAAM,IAC/CA,EAAK,OAGuB,YAA3B9mF,KAAKslB,OAAOwrD,aACjBgW,EAAKtiF,EAEDqxC,GAAQ71C,KAAKm3E,gBAAgB1B,QAAQ5/B,EAAMixC,GAAM,IACjDjxC,EAAO,OAGR,CAACA,EAAMixC,IAlDH,IAmDf,CAQAD,2BAA2B51B,GACvB,IAAIzsD,EAEJ,MAA+B,SAA3BxE,KAAKslB,OAAOwxD,YACZtyE,EAASxE,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQzG,GAAOjxD,KAAKm3E,gBAAgB7f,SAASrG,GAAOjxD,KAAKm3E,gBAAgBjhB,QAAQjF,GAAOjxD,KAAKm3E,gBAAgBiE,SAASp7E,KAAK4wE,cAAe5wE,KAAKm3E,gBAAgBkE,WAAWr7E,KAAK4wE,cAAe5wE,KAAKm3E,gBAAgBmE,WAAWt7E,KAAK4wE,eACjSpsE,EAASxE,KAAKm3E,gBAAgBjkB,UAAU1uD,EAAQxE,KAAKslB,OAAOmtD,YAAazyE,KAAKslB,OAAOotD,cAGrFluE,EAASxE,KAAKm3E,gBAAgB7lB,MAAML,GAGjCjxD,KAAKslB,OAAO8xD,gBAAgB5yE,GAAUA,EAAS,IAC1D,CAIA6hF,cACmC,WAA3BrmF,KAAKslB,OAAOmgE,aAGZzlF,KAAK88D,SACL98D,KAAK88D,SAASsC,kBAETp/D,KAAKgnF,OACVhnF,KAAKgnF,MAAMl4B,QAEnB,QACS9uD,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwF42C,GA32FVpgF,MA22FyDA,OA32FzDA,MA22F0FA,OA32F1FA,MA22FoH8yE,IA32FpH9yE,MA22FgJ2wE,GAAe,IAA8D,QACpTr1E,KAAKk5E,UA52FkFx0E,MAAE,CAAA8N,KA42FJsyE,EAA6B32C,UAAA,8BAAAmJ,UAAA,SAAA9I,EAAAC,GAA4vB,GAA5vB,EAAAD,IA52F3B9pC,MA42F0qB+6E,GAAoB,GA52F9rB/6E,MA42FswBg+E,GAAiB,MAAAl0C,EAAA,KAAA6H,EA52FvxB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAquB,SAAAzmB,EAAAz1B,OAAFlc,MAAE2xC,EAAF3xC,WAAE+pC,EAAAu4C,MAAA3wC,EAAAz1B,MAAA,GAAAuvB,SAAA,GAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,kCAAAs7C,GAAA,OA42FJvR,EAAA63C,8BAAAtmC,EAAqC,EA52FnCt7C,CA42F2B,iCAAAs7C,GAAA,OAA7BvR,EAAA+3C,6BAAAxmC,EAAoC,GAAP,EAAAxR,IA52F3B9pC,MAAE,mBAAA+pC,EAAAw3C,yBAAFvhF,MAAE,KAAA+pC,EAAAu3C,kBAAFthF,MAAE,mBAAA+pC,EAAAk3C,oBAAFjhF,CA42F2B,yBAAA+pC,EAAAm3C,yBA52F3BlhF,CA42F2B,0BAAA+pC,EAAAo3C,0BA52F3BnhF,CA42F2B,0BAAA+pC,EAAAq3C,0BA52F3BphF,CA42F2B,4BAAA+pC,EAAAs3C,6BAAA,EAAAvvC,SAAA,yBAAAw+B,YAAA,EAAA5mC,MAAA,EAAAC,KAAA,EAAAC,OAAA,20DAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IA52F3B9pC,MAAE,WAAFA,MAAE,EAAA2tE,GAAA,gCAAF3tE,CA42FshE,EAAAouE,GAAA,4BA52FthEpuE,CA42FioF,EAAA0uE,GAAA,cA52FjoF1uE,CA42FgyF,EAAAovE,GAAA,aA52FhyFpvE,SA42F4mK,EAAA8pC,IA52F5mK9pC,MAAE,0BAAA+pC,EAAAnpB,OAAAmgE,WAAF/gF,CA42Fk6B,2BAAA+pC,EAAAnpB,OAAAmgE,WAAA,YA52Fl6B/gF,cAAE,gBAAA+pC,EAAAqoC,YAAA,aAAAroC,EAAAqoC,YAAFpyE,cAAE,gBAAA+pC,EAAAqoC,YAAA,UAAAroC,EAAAqoC,YAAFpyE,cAAE,OAAA+pC,EAAAnpB,OAAAozD,eAAFh0E,cAAE,OAAA+pC,EAAA+2C,oBA42F6zI,EAAAhuC,aAAA,CAA02B5mC,MAA8FA,MAAoGC,MAA2J6xE,GAAiRjD,IAAoB3wC,cAAA,EAAA5jC,KAAA,CAAAs4D,UAAqZ,CACxxMihB,GAA4BC,gBAC5BD,GAA4BI,eAC/Bt0C,gBAAA,GAAyD,EACjE,OAzXKu0C,CAA6B,KAoZ/BmC,GAAW,EACf,MAAMC,GACFrnF,cAIIG,KAAKmnF,gBAAkB,KAIvBnnF,KAAK+9C,WAAY,EAEjB/9C,KAAK0mE,aAAc,EAEnB1mE,KAAKkL,KAAO,KAEZlL,KAAKonF,cAAe,EAIpBpnF,KAAKqnF,KAAO,SAIZrnF,KAAKsnF,UAAY,GAIjBtnF,KAAK07C,MAAQ,KAIb17C,KAAK2mE,cAAgB,GAIrB3mE,KAAKunF,mBAAoB,EAEzBvnF,KAAKg+C,MAAQ,GAEbh+C,KAAKwnF,OAAS,GAKdxnF,KAAKynF,SAAW,OAKhBznF,KAAK6mE,eAAiB,IAAI6gB,MAC1B1nF,KAAKgf,GAAK,cAAcioE,IAC5B,EAGJ,MAAMU,GACF9nF,YAAYymE,EAAYshB,EAAW5oE,EAAIinD,GACnCjmE,KAAKsmE,WAAaA,EAClBtmE,KAAK4nF,UAAYA,EACjB5nF,KAAKgf,GAAKA,EACVhf,KAAK6nF,cAAgB,IAAItwE,KACzBvX,KAAK8nF,aAAe,IAAIvwE,KACxBvX,KAAK+nF,YAAc,IAAIxwE,KACvBvX,KAAKgoF,cAAgB,IAAIzwE,KAEzBvX,KAAKioF,gBAAkB10C,MAAamf,MAEpC1yD,KAAKonF,cAAe,EACpBpnF,KAAKonF,aAAepnF,KAAK4nF,UAAUriF,OAAO6hF,aAC1CpnF,KAAK4nF,UAAUM,sBACVrkF,QAAKpB,MAAQi5C,GAA8B,UAApBA,EAAM+mB,WAA2C,UAAlB/mB,EAAM6qC,UAAmB,EAAG4B,MAAO,IACzF7/E,UAAU,KACXtI,KAAK8nF,aAAaztE,KAAK,MACvBra,KAAK8nF,aAAapwE,UAAS,GAE/B1X,KAAK4nF,UAAUM,sBACVrkF,QAAKpB,MAAQi5C,GAA8B,SAApBA,EAAM+mB,WAA0C,UAAlB/mB,EAAM6qC,UAAmB,EAAG4B,MAAO,IACxF7/E,UAAU,KACXtI,KAAK+nF,YAAY1tE,KAAK,MACtBra,KAAK+nF,YAAYrwE,UAAS,GAE9B1X,KAAK4nF,UAAUM,sBACVrkF,QAAKpB,MAAQi5C,GAA8B,SAApBA,EAAM+mB,WAA0C,SAAlB/mB,EAAM6qC,UAAkB,EAAG4B,MAAO,IACvF7/E,UAAU,KACXtI,KAAKsmE,WAAWW,UAChBjnE,KAAKioF,gBAAgBxzC,cACrBz0C,KAAKgoF,cAAc3tE,KAAKra,KAAKwE,QAC7BxE,KAAKgoF,cAActwE,WACnB1X,KAAKooF,kBAAoB,OAE7BpoF,KAAKsmE,WAAW7qB,gBACX53C,QAAKpB,MAAOi5C,GAASA,EAAMia,UAAYkB,QAAW72D,KAAKonF,eACvD9+E,UAAU,IAAMtI,KAAKwmB,SACtBy/C,IACAjmE,KAAKioF,gBAAkBhiB,EAAS39D,UAAU,KAClCtI,KAAK4nF,UAAUriF,OAAOgiF,mBACtBvnF,KAAKwmB,OAAM,GAI3B,CACAA,MAAM6hE,GACFroF,KAAKwE,OAAS6jF,EACdroF,KAAK4nF,UAAUM,sBACVrkF,QAAKpB,MAAQi5C,GAA8B,UAApBA,EAAM+mB,YAAqB,EAAG0lB,MAAO,IAC5D7/E,UAAU,KACXtI,KAAK6nF,cAAcxtE,KAAKguE,GACxBroF,KAAK6nF,cAAcnwE,WACnB1X,KAAKsmE,WAAWgiB,gBAAe,GAEnCtoF,KAAK4nF,UAAUW,oBACnB,CAIAhgB,gBACI,OAAOvoE,KAAKsmE,WAAWiC,eAC3B,CAIA9sB,gBACI,OAAOz7C,KAAKsmE,WAAW7qB,eAC3B,CAKA6pB,eAAe4B,GACX,MAAMI,EAAWtnE,KAAKwoF,sBACtB,OAAIthB,IAAaA,EAASuhB,MAAQvhB,EAASwhB,OACvCxhB,EAASuhB,KAAOnhB,EAASmhB,KAAKvhB,EAASuhB,MAAQnhB,EAASohB,MAAMxhB,EAASwhB,OAGvEphB,EAASF,qBAETF,IAAaA,EAASyhB,KAAOzhB,EAAS0hB,QACtC1hB,EAASyhB,IAAMrhB,EAASqhB,IAAIzhB,EAASyhB,KAAOrhB,EAASshB,OAAO1hB,EAAS0hB,QAGrEthB,EAASD,mBAEbrnE,KAAKsmE,WAAWhB,iBACTtlE,IACX,CAMA6oF,WAAW7qC,EAAQ,OAAQwpC,EAAS,QAChC,OAAAxnF,KAAKwoF,sBAAsBxqC,MAAMA,GAAOwpC,OAAOA,GAC/CxnF,KAAKsmE,WAAWhB,iBACTtlE,IACX,CACA8oF,cACI,OAAO9oF,KAAK4nF,UAAUkB,WAC1B,CACAC,aACI,OAAO/oF,KAAK8nF,aAAa7O,cAC7B,CACA+P,YACI,OAAOhpF,KAAK+nF,YAAY9O,cAC5B,CACAgQ,cACI,OAAOjpF,KAAK6nF,cAAc5O,cAC9B,CACAp9B,cACI,OAAO77C,KAAKgoF,cAAc/O,cAC9B,CAEAuP,sBACI,OAAOxoF,KAAKsmE,WAAWnB,YAAYD,gBACvC,EAMJ,MAAMgkB,GAAa,CACfzoB,QAAS,EACT97B,UAAW,4DAETwkD,GAAiB,CACnB1oB,QAAS,EACT97B,UAAW,2DACXykD,gBAAiB,qBACnB,IACIC,GAA2B,MAAjC,MAAMA,UAAoCC,MACtC,UAAI/jF,GACA,OAAOvF,KAAKupF,OAChB,CACA,2BAAIC,GACA,OAAO,CACX,CACA,8BAAIC,GACA,OAAO,CACX,CACA,wBAAIC,GACA,OAAO1pF,KAAKupF,QAAQvqE,EACxB,CACA,0BAAI2qE,GACA,OAAO3pF,KAAKupF,QAAQlC,MAAQ,IAChC,CACA,oCAAIuC,GACA,OAAO5pF,KAAK6pF,cAChB,CACA,qCAAIC,GACA,OAAO9pF,KAAKupF,QAAQpC,iBAAmB,IAC3C,CACA,+BAAI4C,GACA,MAAO,CAAEpvE,MAAO3a,KAAK2Z,MAAOhW,OAAQ3D,KAAK2D,OAC7C,CACA9D,YAAY20E,EAAgBn1B,EAAY2qC,EAAkB32E,GACtDvT,QACAE,KAAKw0E,eAAiBA,EACtBx0E,KAAKq/C,WAAaA,EAClBr/C,KAAKgqF,iBAAmBA,EACxBhqF,KAAKqT,SAAWA,EAChBrT,KAAKiqF,aAAe,KAEpBjqF,KAAK6pF,eAAiB,KAEtB7pF,KAAKkoF,sBAAwB,IAAIp7B,MACjC9sD,KAAK8oF,aAAc,EACnB9oF,KAAK2Z,MAAQ,QAEb3Z,KAAK2D,OAAS,CACV8pC,EAAG,MACHy8C,EAAG,MACHC,GAAI,MACJC,GAAI,MACJC,MAAO,GAIXrqF,KAAKsqF,oCAAsC,IAC/C,CACAp7C,WAAa,CAIbq7C,sBAAsB1nB,GAClB,GAAI7iE,KAAKiqF,aAAaO,cAClB,MAAMh6D,MAAM,yEAEhB,OAAAxwB,KAAKyqF,+BACEzqF,KAAKiqF,aAAaM,sBAAsB1nB,EACnD,CACA6nB,qBAAqB7nB,GACjB,MAAM,IAAIryC,MAAM,0BACpB,CACAm6D,UAAUplF,GACNvF,KAAKupF,QAAUhkF,EACXA,EAAOm2C,OACP17C,KAAK4qF,oBAAoBlvC,MAEjC,CACAmvC,iBAAiBnvC,GACb17C,KAAK8oF,aAAc,EACnB9oF,KAAKkoF,sBAAsB55B,KAAK5S,EACpC,CACAovC,gBAAgBpvC,GACU,UAAlBA,EAAM6qC,QACNvmF,KAAK+qF,YAEkB,SAAlBrvC,EAAM6qC,SACXvmF,KAAKskE,eAETtkE,KAAKkoF,sBAAsB55B,KAAK5S,GAChC17C,KAAK8oF,aAAc,CACvB,CACAP,qBACIvoF,KAAK2Z,MAAQ,OACb3Z,KAAKw0E,eAAenf,cACxB,CAKAu1B,oBAAoBlvC,GAChB,IAAKA,EACD,OAEJ,MAAM2U,EAAU3U,EAAM2U,QAChBC,EAAU5U,EAAM4U,QAChB06B,EAAKl4E,OAAOm4E,WAAa,EAGzBf,EAAI55B,EAFCx9C,OAAOo4E,YAAc,EAG1Bf,EAAK95B,EAAUv9C,OAAOm4E,WACtBb,EAAK95B,EAAUx9C,OAAOo4E,YAC5BlrF,KAAK2D,OAAO8pC,EAJF4iB,EAAU26B,EAIJ,KAChBhrF,KAAK2D,OAAOumF,EAAI,GAAGA,MACnBlqF,KAAK2D,OAAOwmF,GAAa,IAALA,EAAH,IACjBnqF,KAAK2D,OAAOymF,GAAa,IAALA,EAAH,IACjBpqF,KAAK2D,OAAO0mF,MAAQ,CAExB,CAIAI,+BACQzqF,KAAKqT,WACLrT,KAAKsqF,oCAAsCtqF,KAAKqT,SAC3C6yD,cACLzyC,QAAQ03D,UAAUC,KAAK,IAAMprF,KAAKq/C,WAAWnL,cAAc4a,SAEnE,CACAi8B,YACS/qF,KAAKqrF,YACNrrF,KAAKqrF,UAAYrrF,KAAKgqF,iBAAiB1sE,OAAOtd,KAAKq/C,WAAWnL,gBAE9Dl0C,KAAKupF,QAAQxrC,WACb/9C,KAAKqrF,UAAUC,8BAEvB,CACAhnB,eACI,MAAMinB,EAAUvrF,KAAKsqF,oCAEjBiB,GAAoC,mBAAlBA,EAAQz8B,OAC1By8B,EAAQz8B,QAER9uD,KAAKqrF,WACLrrF,KAAKqrF,UAAUG,SAEvB,QACSxrF,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFm7C,GAltGV3kF,MAktGuDA,OAltGvDA,MAktGwFA,OAltGxFA,MAktGkHmM,OAltGlHnM,MAktGkJq/D,MAAQ,IAA8D,QAC/S/jE,KAAKk5E,UAntGkFx0E,MAAE,CAAA8N,KAmtGJ62E,EAA2Bl7C,UAAA,2BAAAmJ,UAAA,SAAA9I,EAAAC,GAA4lB,GAA5lB,EAAAD,GAntGzB9pC,MAmtGsmBs7D,MAAe,KAAAxxB,EAAA,KAAA6H,EAntGrnB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAw7C,aAAA5zC,EAAAz1B,MAAA,GAAAuvB,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,6BAAAs7C,GAAA,OAmtGJvR,EAAAo8C,iBAAA7qC,EAAwB,EAntGtBt7C,CAmtGyB,4BAAAs7C,GAAA,OAA3BvR,EAAAq8C,gBAAA9qC,EAAuB,GAAI,EAAAxR,IAntGzB9pC,MAAE,cAAA+pC,EAAAs7C,6BAAFrlF,MAAE,WAAA+pC,EAAAg7C,2BAAF/kF,CAAE,KAAA+pC,EAAAi7C,qBAAFhlF,CAAE,OAAA+pC,EAAAk7C,uBAAFjlF,CAAE,kBAAA+pC,EAAAm7C,iCAAFllF,CAAE,mBAAA+pC,EAAAq7C,mCAAFplF,MAAE,uBAAA+pC,EAAA+6C,yBAmtGuB,EAAAxU,YAAA,EAAAxzD,SAAA,CAntGzB9c,OAAE0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,wBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,EAAA0vE,GAAA,oBAmtGwuB,EAAA58B,aAAA,CAA6D7mC,OAAkBm+B,cAAA,EAAA5jC,KAAA,CAAAs4D,UAAmI,IACphCpD,OAAQ,aAAc,IAClBC,OAAW,gBAAiB,IACxBG,OAAM2oB,KAAc,EACpB7oB,OAAQ,0CAAwCE,OAAM,OAAI,EAC1DF,OAAQ,WAASC,OAAU,IACvBC,OAAM,CAAE77B,UAAW,WAAY+2C,OAAQ,KAAG,EAC1Clb,OAAM,CAAE77B,UAAW,cAAe+2C,OAAQ,MAAK,EAC/Clb,OAAM,CAAE77B,UAAW,aAAc+2C,OAAQ,MAAK,EAC9Clb,OAAM,CAAE77B,UAAW,WAAY+2C,OAAQ,QACzC,EACFkJ,UACD,CACCjhF,OAAQ,CACJ8pC,EAAG,MACHy8C,EAAG,MACHC,GAAI,MACJC,GAAI,MACJC,MAAO,MAEd,EACDhqB,OAAW,gBAAiB,IAACukB,UAAa,EAAGtkB,OAAQ,OAAKE,OAAM0oB,MAAe,CAAEvlF,OAAQ,CAAE8pC,EAAG,MAAOy8C,EAAG,MAAOC,GAAI,MAAOC,GAAI,cAEhI,EACb,OApKKf,CAA2B,KAoPjC,MAAMoC,GAAkB,IAAIx6C,MAAe,iBAIrCy6C,GAA6B,IAAIz6C,MAAe,8BAMhD06C,GAAsC,CACxCl1C,QAASi1C,GACTtjD,KAAM,CAACy4B,OACPlP,WARJ,SAASi6B,GAA4ChrB,GAEjD,MADWtiD,IAAMsiD,EAAQE,iBAAiBgG,OAE9C,GAUM+kB,GAA6B,IAAI56C,MAAe,8BAA8B,IAC9E66C,GAAgB,MAAtB,MAAMA,EAEF,eAAIC,GACA,OAAO/rF,KAAKgsF,aACNhsF,KAAKgsF,aAAaD,YAClB/rF,KAAKisF,uBACf,CAEA,cAAIlD,GACA,OAAO/oF,KAAKgsF,aACNhsF,KAAKgsF,aAAajD,WAClB/oF,KAAKksF,sBACf,CAEA,aAAIlD,GACA,OAAOhpF,KAAKgsF,aACNhsF,KAAKgsF,aAAahD,UAClBhpF,KAAKmsF,qBACf,CACA,mBAAIC,GACA,MAAMv6B,EAAS7xD,KAAKgsF,aACpB,OAAOn6B,EACDA,EAAOu6B,gBACPpsF,KAAKqsF,0BACf,CACAxsF,YAAY+gE,EAAS7nD,EAAUktD,EAAUY,EAAgBylB,EAAgBN,EAAcO,GACnFvsF,KAAK4gE,QAAUA,EACf5gE,KAAK+Y,SAAWA,EAChB/Y,KAAKimE,SAAWA,EAChBjmE,KAAKssF,eAAiBA,EACtBtsF,KAAKgsF,aAAeA,EACpBhsF,KAAKusF,iBAAmBA,EACxBvsF,KAAKwsF,mBAAqB,IAAIC,IAC9BzsF,KAAKisF,wBAA0B,GAC/BjsF,KAAKksF,uBAAyB,IAAI30E,KAClCvX,KAAKmsF,sBAAwB,IAAI50E,KACjCvX,KAAKqsF,2BAA6B,IAAI90E,KAKtCvX,KAAK0sF,kBAAiBC,MAAM,IAAM3sF,KAAKisF,wBAAwBjiF,OACzDhK,KAAKosF,gBACLpsF,KAAKosF,gBAAgBvoF,QAAK+wD,WAAU7kD,KAC1C/P,KAAK6mE,eAAiBA,GACjBmlB,GAAgB/lB,GACjBA,EAAS39D,UAAU,IAAMtI,KAAK4sF,WAEtC,CACAn8E,KAAKo8E,EAAwBtnF,GAEzB,GADAA,EA6JR,SAASunF,GAAoBvnF,EAAQ+mF,GACjC,OA1PJ,SAASS,GAAaC,KAASC,GAC3B,GAAY,MAARD,EACA,MAAME,UAAU,8CAEpB,UAAWnrE,KAAUkrE,EACjB,GAAc,MAAVlrE,EACA,UAAW1gB,KAAO0gB,EACVA,EAAOorE,eAAe9rF,KACtB2rF,EAAK3rF,GAAO0gB,EAAO1gB,IAKnC,OAAO2rF,CACX,CA4OWD,CAAa,IAAI7F,GAAmB3hF,EAAQ+mF,EACvD,CA/JiBQ,CAAoBvnF,EAAQvF,KAAKssF,gBACtC/mF,EAAOyZ,IAAMhf,KAAKotF,cAAc7nF,EAAOyZ,IACvC,MAAMwR,MAAM,mBAAmBjrB,EAAOyZ,qDAE1C,MAAMsnD,EAAatmE,KAAKqtF,cAAc9nF,GAChC+nF,EAAkBttF,KAAKutF,sBAAsBjnB,EAAY/gE,GACzDioF,EAAYxtF,KAAKytF,oBAAoBZ,EAAwBS,EAAiBhnB,EAAY/gE,GAChG,OAAKvF,KAAK+rF,YAAY/hF,QAClBhK,KAAK0tF,8CAET1tF,KAAK+rF,YAAYr/E,KAAK8gF,GACtBA,EACK3xC,cACAvzC,UAAU,IAAMtI,KAAK2tF,iBAAiBH,IAC3CxtF,KAAK+oF,WAAW1uE,KAAKmzE,GACrBxtF,KAAKgpF,UAAU3uE,KAAKmzE,GACbA,CACX,CAIAZ,WACI,IAAIjkF,EAAI3I,KAAK+rF,YAAY/hF,OACzB,KAAOrB,KACH3I,KAAK+rF,YAAYpjF,GAAG6d,OAE5B,CAKA4mE,cAAcpuE,GACV,OAAOhf,KAAK+rF,YAAYrjF,KAAKsmC,GAAUA,EAAOhwB,KAAOA,EACzD,CACAyuE,oBAAoBZ,EAAwBS,EAAiBhnB,EAAY/gE,GACrE,MAAMioF,EAAY,IAAI7F,GAAarhB,EAAYgnB,EAAiB/nF,EAAOyZ,GAAIhf,KAAKimE,UAQhF,GAPI1gE,EAAOmhE,aACPJ,EAAWiC,gBAAgBjgE,UAAU,KAC5BklF,EAAUpG,cACXoG,EAAUhnE,OAAM,KAIxBqmE,aAAkCe,OAEjC,CACD,MAAM70E,EAAW/Y,KAAK6tF,eAAetoF,EAAQioF,EAAWF,GAClDQ,EAAaR,EAAgB/C,sBAAsB,IAAIprB,MAAgB0tB,OAAwB98E,EAAWgJ,IAChHy0E,EAAUpF,kBAAoB0F,EAAWnoB,QAC7C,CACA6nB,SACK3E,WAAWtjF,EAAOy4C,MAAOz4C,EAAOiiF,QAChCliB,eAAe//D,EAAO2hE,UACpBsmB,CACX,CACAK,eAAetoF,EAAQioF,EAAWF,GAC9B,MAAMS,EAAexoF,GACjBA,EAAOi4C,kBACPj4C,EAAOi4C,iBAAiBzkC,SACtBi1E,EAAkB,IAAIC,QAC5BD,SAAgB3kF,IAAIs+E,GAAc6F,GAClCQ,EAAgB3kF,IAAIggF,GAA6BiE,GACjDU,EAAgB3kF,IAAIoiF,GAAiBlmF,EAAO2F,MACrC,IAAIgjF,MAAeH,GAAgB/tF,KAAK+Y,SAAUi1E,EAC7D,CACAX,cAAc9nF,GACV,MAAM4oF,EAAgBnuF,KAAKouF,iBAAiB7oF,GAC5C,OAAOvF,KAAK4gE,QAAQtjD,OAAO6wE,EAC/B,CACAZ,sBAAsBjnB,EAAY/gE,GAC9B,MAAM8oF,EAAkB,IAAIlvB,MAAgBkqB,GAA6B9jF,EAAOi4C,kBAC1E8wC,EAAehoB,EAAWU,OAAOqnB,GACvCC,SAAa3oB,SAASglB,UAAUplF,GACzB+oF,EAAa3oB,QACxB,CACAyoB,iBAAiBG,GACb,MAAM50E,EAAQ,IAAI4sD,MAAc,CAC5BrB,iBAAkBllE,KAAK4gE,QAAQsG,WAAWC,SAC1CN,eAAgB0nB,EAAa1nB,gBAAkB7mE,KAAK6mE,iBACpD1D,WAAYorB,EAAajH,UACzB5gB,YAAa6nB,EAAa7nB,YAC1B8nB,SAAUD,EAAaC,SACvBC,UAAWF,EAAaE,UACxBhH,SAAU8G,EAAa9G,SACvBiH,UAAWH,EAAaG,YAE5B,OAAIH,EAAa5nB,gBACbhtD,EAAMgtD,cAAgB4nB,EAAa5nB,eAEhChtD,CACX,CACAg0E,iBAAiBH,GACb,MAAMxlF,EAAQhI,KAAKisF,wBAAwB0C,QAAQnB,GAC/CxlF,GAAQ,IACRhI,KAAK+rF,YAAY6C,OAAO5mF,EAAO,GAG1BhI,KAAK+rF,YAAY/hF,SAClBhK,KAAKwsF,mBAAmBr6E,QAAQ,CAACotD,EAAe1R,KACxC0R,EACA1R,EAAQvZ,aAAa,cAAeirB,GAGpC1R,EAAQghC,gBAAgB,cAAa,GAG7C7uF,KAAKwsF,mBAAmBsC,QACxB9uF,KAAKosF,gBAAgB/xE,QAGjC,CAIAqzE,8CACI,MAAMnB,EAAmBvsF,KAAKusF,iBAAiBwC,sBAE/C,GAAIxC,EAAiByC,cAAe,CAChC,MAAMC,EAAW1C,EAAiByC,cAAcE,SAChD,QAASvmF,EAAIsmF,EAASjlF,OAAS,EAAGrB,GAAI,EAAIA,IAAK,CAC3C,MAAMwmF,EAAUF,EAAStmF,GACrBwmF,IAAY5C,GACS,WAArB4C,EAAQh7C,UACa,UAArBg7C,EAAQh7C,WACPg7C,EAAQ96C,aAAa,eACtBr0C,KAAKwsF,mBAAmBnjF,IAAI8lF,EAASA,EAAQvhD,aAAa,gBAC1DuhD,EAAQ76C,aAAa,cAAe,QAE5C,CACJ,CACJ,QACSt0C,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwF49C,GAngHVpnF,MAmgH4CC,OAngH5CD,MAmgHmEA,OAngHnEA,MAmgH2FkM,MAAW,GAngHtGlM,MAmgHmIgnF,IAngHnIhnF,MAmgH0KmnF,GAA0B,GAngHpMnnF,MAmgHiOonF,EAAgB,IAngHjPpnF,MAmgH8RC,OAAmB,CAA+C,QACvb3E,KAAKq4E,WApgHkF3zE,MAAE,CAAA2mD,MAogHYygC,EAAgB7qF,QAAhB6qF,EAAgB5qF,WAAK,EACtI,OAvLK4qF,CAAgB,KAuNtB,MAAMsD,GAA+B,IAAIn+C,MAAe,gCAOlDo+C,GAAwC,CAC1C54C,QAAS24C,GACThnD,KAAM,CAACy4B,OACPlP,WARJ,SAAS29B,GAA8C1uB,GAEnD,MADWtiD,IAAMsiD,EAAQE,iBAAiBgG,OAE9C,GAME,IACIyoB,GAAoB,MAA1B,MAAMA,UAA6BpZ,GAC/B,WAAI3X,GAGA,OAAIx+D,KAAKy+D,SACEz+D,KAAKy+D,SAEZz+D,KAAKwvF,SAC4B,WAA7BxvF,KAAKwvF,SAAS1e,WACP9wE,KAAKwvF,SAAS70E,OAAS,KAEI,UAA7B3a,KAAKwvF,SAAS1e,YACU,cAA7B9wE,KAAKwvF,SAAS1e,WACP9wE,KAAKwvF,SAAStrE,OAAO,IAAM,KAEA,YAA7BlkB,KAAKwvF,SAAS1e,WACZ9wE,KAAKwvF,SAAStrE,OAAO,IAAM,UADjC,EAKE,IAEf,CACA,WAAIs6C,CAAQvN,GACRjxD,KAAKy+D,SAAWz+D,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY/B,GACvE,CACA,SAAI81B,GACA,OAAI/mF,KAAKyvF,OACEzvF,KAAKyvF,OAEZzvF,KAAKwvF,SAC4B,WAA7BxvF,KAAKwvF,SAAS1e,WACP9wE,KAAKwvF,SAAS70E,OAAS,KAEI,UAA7B3a,KAAKwvF,SAAS1e,YACU,cAA7B9wE,KAAKwvF,SAAS1e,WACP9wE,KAAKwvF,SAAStrE,OAAO,IAAM,UAFjC,EAME,IAEf,CACA,SAAI6iE,CAAM91B,GACNjxD,KAAKyvF,OAASzvF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY/B,GACrE,CACA,cAAI6lB,GACA,OAAO92E,KAAK0vF,WAChB,CACA,cAAI5Y,CAAWT,GACPA,IAAQr2E,KAAK0vF,cACb1vF,KAAK0vF,YAAcrZ,EACfr2E,KAAKwvF,UACLxvF,KAAKwvF,SAASG,yBAG1B,CACA,cAAIlK,GACA,OAAOzlF,KAAK4vF,WAChB,CACA,cAAInK,CAAWoK,GAEP7vF,KAAK4vF,YADI,UAATC,EACmBA,EAGA,QAE3B,CACA,YAAI1iE,GACA,YAA0Bpd,IAAnB/P,KAAKqyC,WAA2BryC,KAAKwvF,SACtCxvF,KAAKwvF,SAASriE,WACZntB,KAAKqyC,SACjB,CACA,YAAIllB,CAASxS,IACTA,KAAQm1B,OAAsBn1B,MAChB3a,KAAKqyC,YACfryC,KAAKqyC,UAAY13B,EACjB3a,KAAK60E,eAAex6D,KAAKM,GAEjC,CACA,UAAIgqD,GACA,OAAO3kE,KAAK4kE,OAChB,CACA,UAAID,CAAO0R,GACPA,EAAMr2E,KAAKyQ,OAASzQ,KAAKwmB,OAC7B,CACA,WAAIouD,GACA,OAAO50E,KAAKwvF,QAChB,CACA,YAAI7sE,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GACT3a,KAAKqzD,UAAY14C,EACjB3a,KAAKw0E,eAAenf,cACxB,CACA,aAAIwb,GACA,OAAO7wE,KAAKk6E,UAChB,CACA,aAAIrJ,CAAU3sD,GACVlkB,KAAKk6E,WAAah2D,EAClBlkB,KAAKw0E,eAAenf,cACxB,CAEA,eAAIod,GACA,OAAOzyE,KAAKwvF,UAAYxvF,KAAKwvF,SAASvyD,GAC1C,CAEA,eAAIy1C,GACA,OAAO1yE,KAAKwvF,UAAYxvF,KAAKwvF,SAASryD,GAC1C,CACA,kBAAIw1C,GACA,OAAO3yE,KAAKwvF,UAAYxvF,KAAKwvF,SAAS7c,cAC1C,CACA,cAAI7B,GACA,OAAO9wE,KAAKwvF,SAAS1e,UACzB,CACA,kBAAI2H,GACA,OAAOz4E,KAAKwvF,SAAS/W,cACzB,CACA,iBAAIC,GACA,OAAO14E,KAAKwvF,SAAS9W,aACzB,CACA74E,YAAY+gE,EAASpjB,EAAkBsyC,EAAelX,EAAQpE,EAAgB2C,EAAiB4Y,EAAuBhZ,EAAiB1jE,GACnIvT,MAAMq3E,EAAiBJ,GACvB/2E,KAAK4gE,QAAUA,EACf5gE,KAAKw9C,iBAAmBA,EACxBx9C,KAAK8vF,cAAgBA,EACrB9vF,KAAK44E,OAASA,EACd54E,KAAKw0E,eAAiBA,EACtBx0E,KAAKm3E,gBAAkBA,EACvBn3E,KAAK+2E,gBAAkBA,EACvB/2E,KAAKqT,SAAWA,EAEhBrT,KAAK2mE,cAAgB,GAErB3mE,KAAKmjE,WAAa,GAOlBnjE,KAAK0vF,YAAc,OAInB1vF,KAAK4vF,YAAc,QAEnB5vF,KAAK4kE,SAAU,EAIf5kE,KAAKgwF,kBAAoB,IAAIljC,MAI7B9sD,KAAKiwF,iBAAmB,IAAInjC,MAI5B9sD,KAAKkwF,gBAAkB,IAAIpjC,MAK3B9sD,KAAK65D,aAAe,IAAI/M,MAKxB9sD,KAAKu7D,cAAgB,IAAIzO,MAIzB9sD,KAAK0wE,aAAe,IAAI5jB,MAIxB9sD,KAAKmwF,sBAAwB,IAAIrjC,MAIjC9sD,KAAK60E,eAAiB,IAAI/nB,MAC1B9sD,KAAKowF,WAAa78C,MAAamf,MAC/B1yD,KAAKqwF,oBAAsB98C,MAAamf,MACxC1yD,KAAKswF,yBAA2B/8C,MAAamf,MAC7C1yD,KAAKuwF,sBAAwBh9C,MAAamf,MAC1C1yD,KAAKwwF,4BAA8Bj9C,MAAamf,MAEhD1yD,KAAKywF,yBAA2B,KAChCzwF,KAAKk6E,WAAa,GAClBl6E,KAAK+vF,sBAAwBA,CACjC,CACA7gD,WAAa,CACbz3B,cACIzX,KAAKwmB,QACLxmB,KAAKowF,WAAW37C,cAChBz0C,KAAK60E,eAAen9D,WAChB1X,KAAK0wF,UACL1wF,KAAK0wF,SAASzpB,SAEtB,CACAxB,cAAc/nB,GACV,GAAI19C,KAAKwvF,SACL,MAAMh/D,MAAM,oEAEhBxwB,KAAKwvF,SAAW9xC,EAChB19C,KAAKowF,WAAapwF,KAAKwvF,SAAS1O,YAAYx4E,UAAWqS,IAC/CqG,MAAMC,QAAQtG,GACd3a,KAAK6wE,UAAYl2D,EAGjB3a,KAAK2iB,SAAWhI,GAG5B,CACAlK,OACI,IAAIzQ,KAAK4kE,UAAW5kE,KAAKmtB,SAGzB,KAAKntB,KAAKwvF,SACN,MAAMh/D,MAAM,iEAEZxwB,KAAKqT,WACLrT,KAAKywF,yBAA2BzwF,KAAKqT,SAAS6yD,eAG9ClmE,KAAKy4E,eACLz4E,KAAK2iB,SAAW3iB,KAAKwvF,SAAS70E,MAEzB3a,KAAK04E,gBACV14E,KAAK6wE,UAAY7wE,KAAKwvF,SAAStrE,QAI/BlkB,KAAK2iB,UAAgC,aAApB3iB,KAAK82E,YAA6B92E,KAAKy+D,WACxDz+D,KAAK2iB,SAAW3iB,KAAKm3E,gBAAgB1f,WAAWz3D,KAAKm3E,gBAAgBzf,QAAQ13D,KAAK2iB,UAAW3iB,KAAKm3E,gBAAgB7f,SAASt3D,KAAK2iB,UAAW3iB,KAAKm3E,gBAAgBjhB,QAAQl2D,KAAK2iB,UAAW3iB,KAAKm3E,gBAAgBiE,SAASp7E,KAAKy+D,UAAWz+D,KAAKm3E,gBAAgBkE,WAAWr7E,KAAKy+D,UAAWz+D,KAAKm3E,gBAAgBmE,WAAWt7E,KAAKy+D,YAE3S,WAApBz+D,KAAKylF,WAA0BzlF,KAAK2wF,eAAiB3wF,KAAK4wF,cAC1D5wF,KAAK6wF,gBAAgBvrE,OAAStlB,KAE9BA,KAAKqwF,oBAAsBrwF,KAAK6wF,gBAAgB9L,iBAAiBz8E,UAAU,KACvEtI,KAAKwmB,OAAM,GAGfxmB,KAAKswF,yBAA2BtwF,KAAK6wF,gBAAgB5L,sBAAsB38E,UAAWozC,IAClF17C,KAAK8wF,cAAcp1C,EAAK,EAC3B,CACL,CAIA8pB,OAAOvU,GACCjwC,MAAMC,QAAQgwC,GACdjxD,KAAK6wE,UAAY,IAAI5f,GAGrBjxD,KAAK2iB,SAAWsuC,EAWI,WAApBjxD,KAAKylF,YACe,aAApBzlF,KAAK82E,aACiB,WAApB92E,KAAK8wE,YAA2B9wE,KAAK2iB,UACd,cAApB3iB,KAAK8wE,YAA8B9wE,KAAK6wE,UAAU,IAC9B,YAApB7wE,KAAK8wE,YAA4B9wE,KAAK6wE,UAAU,IAC5B,UAApB7wE,KAAK8wE,YACF9wE,KAAK6wE,UAAU,IACf7wE,KAAK6wE,UAAU,KACvB7wE,KAAK8wF,eAEb,CAIAxe,WAAWxS,GACP9/D,KAAK65D,aAAavL,KAAKwR,EAC3B,CAIAyS,YAAYxS,GACR//D,KAAKu7D,cAAcjN,KAAKyR,EAC5B,CAIAyS,WAAWtW,GACPl8D,KAAK0wE,aAAapiB,KAAK4N,EAC3B,CAIA11C,QACI,IAAKxmB,KAAK4kE,QACN,OAEA5kE,KAAK0wF,UAAY1wF,KAAK0wF,SAASlG,eAC/BxqF,KAAK0wF,SAASK,SAEd/wF,KAAKgxF,uBACLhxF,KAAKgxF,sBAAsBC,YAC3BjxF,KAAKgxF,sBAAsBD,SAE3B/wF,KAAKqwF,sBACLrwF,KAAKqwF,oBAAoB57C,cACzBz0C,KAAKqwF,oBAAsB,MAE3BrwF,KAAKswF,2BACLtwF,KAAKswF,yBAAyB77C,cAC9Bz0C,KAAKswF,yBAA2B,MAEhCtwF,KAAKwwF,8BACLxwF,KAAKwwF,4BAA4B/7C,cACjCz0C,KAAKwwF,4BAA8B,MAEnCxwF,KAAKuwF,wBACLvwF,KAAKuwF,sBAAsB97C,cAC3Bz0C,KAAKuwF,sBAAwB,MAE7BvwF,KAAKwtF,YACLxtF,KAAKwtF,UAAUhnE,QACfxmB,KAAKwtF,UAAY,MAErB,MAAMxnB,EAAgBA,KACdhmE,KAAK4kE,UACL5kE,KAAK4kE,SAAU,EAEf5kE,KAAKgwF,kBAAkB1hC,KADNtuD,KAAK2iB,UAAY3iB,KAAK6wE,WAEvC7wE,KAAKywF,yBAA2B,KACpC,EAEAzwF,KAAKywF,0BAC0C,mBAAxCzwF,KAAKywF,yBAAyB3hC,OAMrC9uD,KAAKywF,yBAAyB3hC,QAC9BjmB,WAAWm9B,IAGXA,GAER,CAIA8qB,cAAcp1C,GACV,GAAI17C,KAAKy4E,eAAgB,CACrB,MAAM91D,EAAW3iB,KAAK2iB,UAAY3iB,KAAKw+D,SAAWx+D,KAAKm3E,gBAAgBzoD,MACvE1uB,KAAKmwF,sBAAsB7hC,KAAK3rC,EACpC,MACS3iB,KAAK04E,eACV14E,KAAKmwF,sBAAsB7hC,KAAKtuD,KAAK6wE,WAEzC7wE,KAAKwmB,OAET,CAIAmqE,eACI3wF,KAAKwtF,UAAYxtF,KAAK8vF,cAAcr/E,KAAKq0E,GAA+B,CACpE/mC,WAAW,EACX4oB,cAAe,CACX,gCACA,EAAGuqB,OAAYlxF,KAAK2mE,gBAExB2gB,UAAW,CAAC,oBAAiB,EAAG4J,OAAYlxF,KAAKmjE,aACjD3lB,iBAAkBx9C,KAAKw9C,iBACvBqpB,eAAgB7mE,KAAK6mE,gBAAkB7mE,KAAK+vF,0BAEhD/vF,KAAK6wF,gBAAkB7wF,KAAKwtF,UAAUpF,kBACtCpoF,KAAKwtF,UAAUzE,aAAazgF,UAAU,KAClCtI,KAAKiwF,iBAAiB3hC,KAAK,KAAI,GAEnCtuD,KAAKwtF,UAAUxE,YAAY1gF,UAAU,KACjCtI,KAAKkwF,gBAAgB5hC,KAAK,MAC1BtuD,KAAK4kE,SAAU,IAEnB5kE,KAAKwtF,UAAU3xC,cAAcvzC,UAAU,IAAMtI,KAAKwmB,QACtD,CAIAoqE,cAOI,GANK5wF,KAAKgxF,wBACNhxF,KAAKgxF,sBAAwB,IAAI7xB,MAAgB2lB,GAA+B9kF,KAAKw9C,mBAEpFx9C,KAAK0wF,UACN1wF,KAAKmxF,eAEJnxF,KAAK0wF,SAASlG,cAAe,CAC9B,MAAM4G,EAAepxF,KAAK0wF,SAAS1pB,OAAOhnE,KAAKgxF,uBAC/ChxF,KAAK6wF,gBAAkBO,EAAazrB,SAEpC3lE,KAAK44E,OAAOI,SACPC,eACAp1E,QAAKsb,MAAK,IACV7W,UAAU,KACXtI,KAAK0wF,SAASprB,gBAAe,GAEjCtlE,KAAKwwF,4BAA8BxwF,KAAK6wF,gBAAgB1L,yBACnDthF,QAAKsb,MAAK,IACV7W,UAAU,KACXtI,KAAKiwF,iBAAiB3hC,KAAK,KAAI,GAGnCtuD,KAAKuwF,sBAAwBvwF,KAAK6wF,gBAAgBxL,mBAC7CxhF,QAAKsb,MAAK,IACV7W,UAAU,KACXtI,KAAKkwF,gBAAgB5hC,KAAK,MAC1BtuD,KAAK4kE,SAAU,GAEvB,CACJ,CACAusB,cACI,MAAMhD,EAAgB,IAAI5nB,MAAc,CACpCrB,iBAAkBllE,KAAKqxF,8BACvB3qB,aAAa,EACbC,cAAe,CACX,uCACA,EAAGuqB,OAAYlxF,KAAK2mE,gBAExBE,eAAgB7mE,KAAK6mE,gBAAkB7mE,KAAK+vF,wBAC5C5sB,WAAY,CAAC,mBAAgB,EAAG+tB,OAAYlxF,KAAKmjE,eAErDnjE,KAAK0wF,SAAW1wF,KAAK4gE,QAAQtjD,OAAO6wE,IAAa,EACjDl5C,MAAMj1C,KAAK0wF,SAASnoB,gBAAiBvoE,KAAK0wF,SAASloB,cAAexoE,KAAK0wF,SAClEj1C,gBACA53C,QAAKytF,MAAS51C,GAASA,EAAMia,UAAYkB,OACzC72D,KAAKwvF,UACF9zC,EAAM4a,QACN5a,EAAMia,UAAYI,SAAaztD,UAAU,IAAMtI,KAAKwmB,QAChE,CAIA6qE,8BACI,OAAOrxF,KAAK4gE,QACPsG,WACAK,oBAAoBvnE,KAAKwvF,SAASnwC,YAClCooB,sBAAsB,qBACtBC,wBAAuB,GACvB6pB,UAAS,GACTtpB,cAAc,CACf,CACIC,QAAS,QACTC,QAAS,SACTC,SAAU,QACVC,SAAU,OAEd,CACIH,QAAS,QACTC,QAAS,MACTC,SAAU,QACVC,SAAU,UAEd,CACIH,QAAS,MACTC,QAAS,SACTC,SAAU,MACVC,SAAU,OAEd,CACIH,QAAS,MACTC,QAAS,MACTC,SAAU,MACVC,SAAU,UAEd,CACIH,QAAS,QACTC,QAAS,MACTC,SAAU,QACVC,SAAU,MACVmpB,SAAS,KAEb,CACItpB,QAAS,QACTC,QAAS,MACTC,SAAU,QACVC,SAAU,MACVmpB,SAAS,MAGrB,QACSxxF,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFqhD,GAjiIV7qF,MAiiIgDC,OAjiIhDD,MAiiIuEA,OAjiIvEA,MAiiIuGonF,IAjiIvGpnF,MAiiIoIA,OAjiIpIA,MAiiI0JA,OAjiI1JA,MAiiI2L2wE,GAAe,GAjiI1M3wE,MAiiIuO0qF,IAjiIvO1qF,MAiiIgRuwE,GAAqB,GAjiIrSvwE,MAiiIkUq/D,MAAQ,IAA8D,QAC/d/jE,KAAKk5E,UAliIkFx0E,MAAE,CAAA8N,KAkiIJ+8E,EAAoBphD,UAAA,oBAAAkC,OAAA,CAAAs2B,cAAA,gBAAAxD,WAAA,aAAA3E,QAAA,UAAAuoB,MAAA,QAAAjQ,WAAA,aAAA2O,WAAA,aAAAt4D,SAAA,WAAAw3C,OAAA,SAAAkC,eAAA,kBAAA/W,QAAA,CAAAkgC,kBAAA,oBAAAC,iBAAA,mBAAAC,gBAAA,kBAAAr2B,aAAA,eAAA0B,cAAA,gBAAAmV,aAAA,gBAAAl6B,SAAA,gBAAAw+B,YAAA,EAAAxzD,SAAA,CAliIlB9c,OAAE0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,EAAAyB,gBAAA,GAkiImoB,EACxuB,OAlfKg/C,CAAoB,KAwiB1B,MAAMkC,GAAgC,CAClCh7C,QAAS21B,MACT11B,eAAa21B,OAAW,IAAMqlB,IAC9BnlB,OAAO,GAELolB,GAA0B,CAC5Bl7C,QAASg2B,MACT/1B,eAAa21B,OAAW,IAAMqlB,IAC9BnlB,OAAO,GACT,IACImlB,GAAyB,MAA/B,MAAMA,EACF,YAAIl1D,GACA,OAAOx8B,KAAK4xF,SAChB,CACA,YAAIp1D,CAAS7hB,GACT3a,KAAK4xF,UAAsB,KAAVj3E,GAAgBA,EACjC3a,KAAK6xF,mBACT,CAIA,eAAIC,CAAYn3E,GACZ3a,KAAK+xF,uBAAuBp3E,EAChC,CAIA,qBAAIq3E,CAAkBvvF,GAClBzC,KAAKiyF,gBAAkBxvF,EACvBzC,KAAK6xF,mBACT,CACA,kBAAIlf,GACA,OAAO3yE,KAAKiyF,eAChB,CACA,YAAI9kE,GACA,QAASntB,KAAKqyC,SAClB,CACA,YAAIllB,CAASxS,GACT,MAAM2uD,KAAWx5B,OAAsBn1B,GACjCkzC,EAAU7tD,KAAK24E,OAAOzkC,cACxBl0C,KAAKqyC,YAAci3B,IACnBtpE,KAAKqyC,UAAYi3B,EACjBtpE,KAAK60E,eAAevmB,KAAKgb,IAGzBA,GAAYzb,EAAQ0b,MAIpB1b,EAAQ0b,MAEhB,CACA,OAAItsC,GACA,OAAOj9B,KAAKitE,IAChB,CACA,OAAIhwC,CAAItiB,GACJ3a,KAAKitE,KAAOjtE,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAYr4C,IAC/D3a,KAAK6xF,mBACT,CACA,OAAI10D,GACA,OAAOn9B,KAAKmtE,IAChB,CACA,OAAIhwC,CAAIxiB,GACJ3a,KAAKmtE,KAAOntE,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAYr4C,IAC/D3a,KAAK6xF,mBACT,CACA,cAAI/gB,GACA,OAAO9wE,KAAK45E,WAChB,CACA,cAAI9I,CAAW+e,GACX,GAAa,WAATA,GACS,UAATA,GACS,cAATA,GACS,YAATA,EACA,MAAMr/D,MAAM,gDAEhBxwB,KAAK45E,YAAciW,CACvB,CACA,SAAIl1E,GACA,OAAO3a,KAAKkyF,MAChB,CACA,SAAIv3E,CAAMA,GACNA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzC3a,KAAKmyF,gBAAkBx3E,GAAS3a,KAAKm3E,gBAAgBxvD,QAAQhN,GAC7DA,EAAQ3a,KAAKs3E,aAAa38D,GAC1B,MAAMy3E,EAAUpyF,KAAKkyF,OACrBlyF,KAAKkyF,OAASv3E,EAEd3a,KAAK2vF,yBAEA3vF,KAAKm3E,gBAAgBnrD,QAAQomE,EAASz3E,IACvC3a,KAAK8gF,YAAYxyB,KAAK3zC,EAE9B,CACA,UAAIuJ,GACA,OAAOlkB,KAAKqyF,OAChB,CACA,UAAInuE,CAAOA,GACHA,GAAUA,EAAOla,OAAS,GAC1BhK,KAAKqyF,QAAUnuE,EAAOzjB,IAAIu/B,IACtBA,EAAIhgC,KAAKm3E,gBAAgBnkB,YAAYhzB,GAC9BhgC,KAAKs3E,aAAat3C,KAE7BhgC,KAAKmyF,iBACCnyF,KAAKqyF,QAAQ,IACXryF,KAAKm3E,gBAAgBxvD,QAAQ3nB,KAAKqyF,QAAQ,QACxCryF,KAAKqyF,QAAQ,IACXryF,KAAKm3E,gBAAgBxvD,QAAQ3nB,KAAKqyF,QAAQ,OAGtDryF,KAAKqyF,QAAU,GACfryF,KAAKmyF,gBAAiB,GAG1BnyF,KAAK2vF,yBACL3vF,KAAK8gF,YAAYxyB,KAAKtuD,KAAKqyF,QAC/B,CACA,cAAIhzC,GACA,OAAOr/C,KAAK24E,MAChB,CACA,kBAAIF,GACA,MAA4B,WAArBz4E,KAAK45E,WAChB,CACA,iBAAIlB,GACA,MAA6B,UAArB14E,KAAK45E,aACY,cAArB55E,KAAK45E,aACgB,YAArB55E,KAAK45E,WACb,CACA,gCAAI0Y,GACA,OAAO,CACX,CACA,4BAAIC,GACA,OAAQvyF,KAAKs0E,SAAS3P,QAAU3kE,KAAKs0E,SAASt1D,IAAO,IACzD,CACA,cAAIwzE,GACA,OAAOxyF,KAAKi9B,IAAMj9B,KAAKm3E,gBAAgB1J,UAAUztE,KAAKi9B,KAAO,IACjE,CACA,cAAIw1D,GACA,OAAOzyF,KAAKm9B,IAAMn9B,KAAKm3E,gBAAgB1J,UAAUztE,KAAKm9B,KAAO,IACjE,CACA,4BAAIu1D,GACA,OAAO1yF,KAAKmtB,QAChB,CACAttB,YAAY84E,EAAQga,EAAUxb,EAAiBJ,GA2I3C,GA1IA/2E,KAAK24E,OAASA,EACd34E,KAAK2yF,SAAWA,EAChB3yF,KAAKm3E,gBAAkBA,EACvBn3E,KAAK+2E,gBAAkBA,EAIvB/2E,KAAK45E,YAAc,SAInB55E,KAAK4yF,eAAiB,IACtB5yF,KAAKqyF,QAAU,GAIfryF,KAAK6yF,eAAiB,IAAI/lC,MAI1B9sD,KAAK8yF,cAAgB,IAAIhmC,MACzB9sD,KAAK+yF,YAAcx/C,MAAamf,MAChC1yD,KAAKw8E,UAAYjpC,MAAamf,MAC9B1yD,KAAKmyF,gBAAiB,EACtBnyF,KAAKgzF,cAAgB,OACrBhzF,KAAKizF,eAAiB,OACtBjzF,KAAK6xF,kBAAoB,OAEzB7xF,KAAKkzF,eAAiB,IACXlzF,KAAKmyF,eACN,KACA,CAAEgB,iBAAkB,CAAEjpB,KAAMlqE,KAAK24E,OAAOzkC,cAAcv5B,QAGhE3a,KAAKozF,aAAgB/2D,IACjB,GAAIr8B,KAAKy4E,eAAgB,CACrB,MAAMrO,EAAepqE,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,QAChF,OAAQ3a,KAAKi9B,MACRmtC,GACDpqE,KAAKm3E,gBAAgB1B,QAAQz1E,KAAKi9B,IAAKmtC,IAAiB,EACtD,KACA,CAAEipB,eAAgB,CAAEp2D,IAAKj9B,KAAKi9B,IAAKwtC,OAAQL,GACrD,IACSpqE,KAAK04E,eAAiBr8C,EAAQ1hB,MAAO,CAC1C,MAAM24E,EAAmBtzF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,MAAM,KACpF44E,EAAiBvzF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,MAAM,KACxF,OAAQ3a,KAAKi9B,MACRq2D,IACAC,GACDvzF,KAAKm3E,gBAAgB1B,QAAQz1E,KAAKi9B,IAAKq2D,IAAqB,EAC1D,KACA,CACED,eAAgB,CACZp2D,IAAKj9B,KAAKi9B,IACVwtC,OAAQ,CAAC6oB,EAAkBC,IAG3C,GAGJvzF,KAAKwzF,aAAgBn3D,IACjB,GAAIr8B,KAAKy4E,eAAgB,CACrB,MAAMrO,EAAepqE,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,QAChF,OAAQ3a,KAAKm9B,MACRitC,GACDpqE,KAAKm3E,gBAAgB1B,QAAQz1E,KAAKm9B,IAAKitC,IAAiB,EACtD,KACA,CAAEqpB,eAAgB,CAAEt2D,IAAKn9B,KAAKm9B,IAAKstC,OAAQL,GACrD,IACSpqE,KAAK04E,eAAiBr8C,EAAQ1hB,MAAO,CAC1C,MAAM24E,EAAmBtzF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,MAAM,KACpF44E,EAAiBvzF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,MAAM,KACxF,OAAQ3a,KAAKm9B,MACRm2D,IACAC,GACDvzF,KAAKm3E,gBAAgB1B,QAAQz1E,KAAKm9B,IAAKo2D,IAAmB,EACxD,KACA,CACEE,eAAgB,CACZt2D,IAAKn9B,KAAKm9B,IACVstC,OAAQ,CAAC6oB,EAAkBC,IAG3C,GAGJvzF,KAAK0zF,gBAAmBr3D,IACpB,MAAM+tC,EAAepqE,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,QAChF,OAAQ3a,KAAKiyF,iBACR7nB,IACDpqE,KAAKiyF,gBAAgB7nB,GAEnB,CAAE4nB,mBAAmB,GADrB,IAC0B,EAMpChyF,KAAK2zF,eAAkBt3D,IACnB,GAAIr8B,KAAKy4E,iBAAmBp8C,EAAQ1hB,MAChC,OAAO,KAEX,MAAM24E,EAAmBtzF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,MAAM,KACpF44E,EAAiBvzF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,MAAM,KACxF,OAAQ24E,IACHC,GACDvzF,KAAKm3E,gBAAgB1B,QAAQ6d,EAAkBC,IAAmB,EAChE,KACA,CAAEK,kBAAkB,EAAK,EAMnC5zF,KAAK6zF,uBAA0Bx3D,IAC3B,GAAIr8B,KAAKy4E,iBAAmBp8C,EAAQ1hB,QAAU3a,KAAKw8B,SAC/C,OAAO,KAEX,MAAM82D,EAAmBtzF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,MAAM,KACpF44E,EAAiBvzF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY32B,EAAQ1hB,MAAM,KACxF,OAAQ24E,GACHC,EAEC,KADA,CAAEO,yBAA0B,CAACR,EAAkBC,GAC/C,EAGVvzF,KAAK+zF,UAAYx3D,MAAW+wC,QAAQ,CAChCttE,KAAKkzF,eACLlzF,KAAKozF,aACLpzF,KAAKwzF,aACLxzF,KAAK0zF,gBACL1zF,KAAK2zF,eACL3zF,KAAK6zF,yBAGT7zF,KAAK8gF,YAAc,IAAIh0B,MAEvB9sD,KAAK60E,eAAiB,IAAI/nB,OACrB9sD,KAAKm3E,gBACN,MAAM3mD,MAAM,yNAIhB,IAAKxwB,KAAK+2E,gBACN,MAAMvmD,MAAM,gOAIhBxwB,KAAKw8E,UAAYx8E,KAAKm3E,gBAAgBxiB,cAAcrsD,UAAU,KAC1DtI,KAAK2a,MAAQ3a,KAAK2a,OAE1B,CACAu0B,WACI,IAAKlvC,KAAKs0E,SACN,MAAM9jD,MAAM,0FAEpB,CACAkkC,qBACI10D,KAAK+yF,YAAc/yF,KAAKs0E,SAAS6b,sBAAsB7nF,UAAWuoE,IAC1D7vD,MAAMC,QAAQ4vD,GACd7wE,KAAKkkB,OAAS2sD,EAGd7wE,KAAK2a,MAAQk2D,EAEjB7wE,KAAKgzF,cAAcniB,GACnB7wE,KAAKizF,iBACLjzF,KAAK6yF,eAAevkC,KAAK,CACrBvsC,OAAQ/hB,KACR2a,MAAOk2D,EACPnzB,MAAO19C,KAAK24E,OAAOzkC,gBAEvBl0C,KAAK8yF,cAAcxkC,KAAK,CACpBvsC,OAAQ/hB,KACR2a,MAAOk2D,EACPnzB,MAAO19C,KAAK24E,OAAOzkC,eACtB,EAET,CACAz8B,cACIzX,KAAK+yF,YAAYt+C,cACjBz0C,KAAKw8E,UAAU/nC,cACfz0C,KAAK8gF,YAAYppE,WACjB1X,KAAK60E,eAAen9D,UACxB,CACA6zD,WAAW5wD,GACH3a,KAAKy4E,eACLz4E,KAAK2a,MAAQA,EAGb3a,KAAKkkB,OAASvJ,CAEtB,CACA6wD,iBAAiBltD,GACbte,KAAKgzF,cAAgB10E,CACzB,CACAmtD,kBAAkBntD,GACdte,KAAKizF,eAAiB30E,CAC1B,CACAotD,iBAAiBrwB,GACbr7C,KAAKmtB,SAAWkuB,CACpB,CACAgwB,SAASjxC,GACL,OAAOp6B,KAAK+zF,UAAY/zF,KAAK+zF,UAAU35D,GAAK,IAChD,CACAgxC,0BAA0B9sD,GACtBte,KAAK6xF,kBAAoBvzE,CAC7B,CAIA01E,oBAAoBt4C,GACZA,EAAM4a,QAAU5a,EAAMia,UAAYK,QAClCh2D,KAAKs0E,SAAS7jE,OACdirC,EAAME,iBAEd,CACAq4C,iBAAiBv4C,GACb17C,KAAKizF,gBACT,CACAiB,kBAAkBx4C,GACd,MAAM/gC,EAAQ+gC,EAAMtwB,OAAOzQ,MACF,WAArB3a,KAAK45E,YACL55E,KAAKm0F,wBAAwBx5E,GAEH,UAArB3a,KAAK45E,YACV55E,KAAKo0F,uBAAuBz5E,GAG5B3a,KAAKq0F,6BAA6B15E,EAE1C,CACA25E,mBAAmB54C,GACf,IAAI1b,EACAhgC,KAAKy4E,eACLz4C,EAAIhgC,KAAK2a,MAEJ3a,KAAK04E,gBACV14C,EAAIhgC,KAAKkkB,QAEblkB,KAAK6yF,eAAevkC,KAAK,CACrBvsC,OAAQ/hB,KACR2a,MAAOqlB,EACP0d,MAAO19C,KAAK24E,OAAOzkC,eAE3B,CAIAy7C,yBACI,GAAI3vF,KAAKy4E,eACLz4E,KAAK2yF,SAAS4B,YAAYv0F,KAAK24E,OAAOzkC,cAAe,QAASl0C,KAAKkyF,OAC7DlyF,KAAKm3E,gBAAgB/f,OAAOp3D,KAAKkyF,OAAQlyF,KAAKs0E,SAASuC,cACvD,SAAE,GAEH72E,KAAK04E,cACV,GAAI14E,KAAKqyF,SAAWryF,KAAKkkB,OAAOla,OAAS,EAAG,CACxC,MAAM6rC,EAAO71C,KAAKqyF,QAAQ,GACpBvL,EAAK9mF,KAAKqyF,QAAQ,GAClBmC,EAAgB3+C,EAChB71C,KAAKm3E,gBAAgB/f,OAAOvhB,EAAM71C,KAAKs0E,SAASuC,cAChD,GACA4d,EAAc3N,EACd9mF,KAAKm3E,gBAAgB/f,OAAO0vB,EAAI9mF,KAAKs0E,SAASuC,cAC9C,GACD2d,GAAkBC,EAIM,UAArBz0F,KAAK45E,YACL55E,KAAK2yF,SAAS4B,YAAYv0F,KAAK24E,OAAOzkC,cAAe,QAASsgD,EAC1D,IACAx0F,KAAK4yF,eACL,IACA6B,GAEsB,cAArBz0F,KAAK45E,YACV55E,KAAK2yF,SAAS4B,YAAYv0F,KAAK24E,OAAOzkC,cAAe,QAASsgD,GAEpC,YAArBx0F,KAAK45E,aACV55E,KAAK2yF,SAAS4B,YAAYv0F,KAAK24E,OAAOzkC,cAAe,QAASugD,GAdlEz0F,KAAK2yF,SAAS4B,YAAYv0F,KAAK24E,OAAOzkC,cAAe,QAAS,KAiBtE,MAEIl0C,KAAK2yF,SAAS4B,YAAYv0F,KAAK24E,OAAOzkC,cAAe,QAAS,GAI1E,CAIA69C,uBAAuBzsE,GACfA,IACAtlB,KAAKs0E,SAAWhvD,EAChBtlB,KAAKs0E,SAAS7O,cAAczlE,MAEpC,CAIAs3E,aAAaC,GACT,OAAOv3E,KAAKm3E,gBAAgBjmB,eAAeqmB,IACvCv3E,KAAKm3E,gBAAgBxvD,QAAQ4vD,GAC3BA,EACA,IACV,CAOAmd,kCAAkCC,EAAYtd,GAC1C,GAAIsd,EAAY,CACZ,MAAM30D,EAAIq3C,GAAYr3E,KAAKm3E,gBAAgBzoD,MAE3C,OADmB1uB,KAAKm3E,gBAAgB/f,OAAOp3B,EAAGhgC,KAAK+2E,gBAAgBE,iBACnD,IAAM0d,CAC9B,CAEI,OAAO,IAEf,CAIAR,wBAAwB7S,GACpB,IAAI3mE,EAAQ2mE,EACqB,UAA7BthF,KAAKs0E,SAASwC,aACdn8D,EAAQ3a,KAAK00F,kCAAkC/5E,EAAO3a,KAAK2a,QAE/D,IAAInW,EAASxE,KAAKm3E,gBAAgBv5C,MAAMjjB,EAAO3a,KAAK+2E,gBAAgB6d,YACpE50F,KAAKmyF,gBAAkB3tF,GAAUxE,KAAKm3E,gBAAgBxvD,QAAQnjB,GAC9DA,EAASxE,KAAKs3E,aAAa9yE,KAGtBxE,KAAK60F,YAAYrwF,EAAQxE,KAAKkyF,SAAsB,OAAX1tF,KAC1CxE,KAAKkyF,OAAS1tF,EACdxE,KAAK8gF,YAAYxyB,KAAK9pD,GACtBxE,KAAKgzF,cAAcxuF,GACnBxE,KAAK8yF,cAAcxkC,KAAK,CACpBvsC,OAAQ/hB,KACR2a,MAAOnW,EACPk5C,MAAO19C,KAAK24E,OAAOzkC,gBAG/B,CAIAmgD,6BAA6B/S,GAIQ,UAA7BthF,KAAKs0E,SAASwC,aACdwK,EAAathF,KAAK00F,kCAAkCpT,EAJb,cAArBthF,KAAK45E,YACrB55E,KAAKqyF,QAAQ,GACbryF,KAAKqyF,QAAQ,KAInB,IAAI7tF,EAASxE,KAAKm3E,gBAAgBv5C,MAAM0jD,EAAYthF,KAAK+2E,gBAAgB6d,YACzE50F,KAAKmyF,gBAAkB3tF,GAAUxE,KAAKm3E,gBAAgBxvD,QAAQnjB,GAC9DA,EAASxE,KAAKs3E,aAAa9yE,KAED,cAArBxE,KAAK45E,aACN55E,KAAK60F,YAAYrwF,EAAQxE,KAAKqyF,QAAQ,KACtC7tF,GACsB,YAArBxE,KAAK45E,aACF55E,KAAK60F,YAAYrwF,EAAQxE,KAAKqyF,QAAQ,KACtC7tF,KAGRxE,KAAKqyF,QACoB,cAArBryF,KAAK45E,YACC,CAACp1E,EAAQxE,KAAKqyF,QAAQ,IACtB,CAACryF,KAAKqyF,QAAQ,GAAI7tF,GAC5BxE,KAAK8gF,YAAYxyB,KAAKtuD,KAAKqyF,SAC3BryF,KAAKgzF,cAAchzF,KAAKqyF,SACxBryF,KAAK8yF,cAAcxkC,KAAK,CACpBvsC,OAAQ/hB,KACR2a,MAAO3a,KAAKqyF,QACZ30C,MAAO19C,KAAK24E,OAAOzkC,gBAE3B,CAIAkgD,uBAAuB9S,GACnB,MAAMzQ,EAAYyQ,EAAW70E,MAAMzM,KAAK4yF,gBACxC,IAAIkC,EAAajkB,EAAU,GACvBl4D,EAAWk4D,EAAU,GACQ,UAA7B7wE,KAAKs0E,SAASwC,aACdge,EAAa90F,KAAK00F,kCAAkCI,EAAY90F,KAAKkkB,OAAO,IAC5EvL,EAAW3Y,KAAK00F,kCAAkC/7E,EAAU3Y,KAAKkkB,OAAO,KAE5E,IAAI2xB,EAAO71C,KAAKm3E,gBAAgBv5C,MAAMk3D,EAAY90F,KAAK+2E,gBAAgB6d,YACnE9N,EAAK9mF,KAAKm3E,gBAAgBv5C,MAAMjlB,EAAU3Y,KAAK+2E,gBAAgB6d,YACnE50F,KAAKmyF,iBACCt8C,GAAQ71C,KAAKm3E,gBAAgBxvD,QAAQkuB,OACjCixC,GAAM9mF,KAAKm3E,gBAAgBxvD,QAAQm/D,IAC7CjxC,EAAO71C,KAAKs3E,aAAazhC,GACzBixC,EAAK9mF,KAAKs3E,aAAawP,KAElB9mF,KAAK60F,YAAYh/C,EAAM71C,KAAKqyF,QAAQ,MACpCryF,KAAK60F,YAAY/N,EAAI9mF,KAAKqyF,QAAQ,KACzB,OAATx8C,GAAwB,OAAPixC,KAClB9mF,KAAKqyF,QAAU,CAACx8C,EAAMixC,GACtB9mF,KAAK8gF,YAAYxyB,KAAKtuD,KAAKqyF,SAC3BryF,KAAKgzF,cAAchzF,KAAKqyF,SACxBryF,KAAK8yF,cAAcxkC,KAAK,CACpBvsC,OAAQ/hB,KACR2a,MAAO3a,KAAKqyF,QACZ30C,MAAO19C,KAAK24E,OAAOzkC,gBAG/B,CAIA2gD,YAAYj0E,EAAOC,GACf,OAAID,GAASC,EAC8C,IAAhD7gB,KAAKm3E,gBAAgB1B,QAAQ70D,EAAOC,GAExCD,IAAUC,CACrB,QACS7gB,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFwjD,GAhpJVhtF,MAgpJqDA,OAhpJrDA,MAgpJ+EA,OAhpJ/EA,MAgpJwG2wE,GAAe,GAhpJvH3wE,MAgpJoJuwE,GAAqB,IAA8D,QAC9Tj1E,KAAK+0E,UAjpJkFrwE,MAAE,CAAA8N,KAipJJk/E,EAAyBvjD,UAAA,6BAAAgC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAjpJvB9pC,MAAE,mBAAAs7C,GAAA,OAipJJvR,EAAAulD,oBAAAh0C,EAA2B,EAjpJzBt7C,CAipJuB,gBAAAs7C,GAAA,OAAzBvR,EAAAwlD,iBAAAj0C,EAAwB,EAjpJtBt7C,CAipJuB,iBAAAs7C,GAAA,OAAzBvR,EAAAylD,kBAAAl0C,EAAyB,EAjpJvBt7C,CAipJuB,kBAAAs7C,GAAA,OAAzBvR,EAAA6lD,mBAAAt0C,EAA0B,GAAD,EAAAxR,IAjpJvB9pC,MAAE,WAAA+pC,EAAAikD,0BAAFhuF,MAAE,gBAAA+pC,EAAA6jD,6BAAF5tF,CAAE,YAAA+pC,EAAA8jD,yBAAF7tF,CAAE,MAAA+pC,EAAA+jD,WAAF9tF,CAAE,MAAA+pC,EAAAgkD,YAAA,EAAApiD,OAAA,CAAA7T,SAAA,WAAAs1D,YAAA,cAAAE,kBAAA,oBAAA3/C,UAAA,YAAApV,IAAA,MAAAE,IAAA,MAAA2zC,WAAA,aAAA8hB,eAAA,iBAAAj4E,MAAA,QAAAuJ,OAAA,UAAA4rC,QAAA,CAAA+iC,eAAA,iBAAAC,cAAA,iBAAAt8C,SAAA,qBAAAw+B,YAAA,EAAAxzD,SAAA,CAAF9c,MAipJ4wB,CACp2B+sF,GACAE,OACgD,EAC3D,OAljBKD,CAAyB,KAsoB/B,MAAMqD,GAA8B,CAChCt+C,QAAS21B,MACT11B,eAAa21B,OAAW,IAAM2oB,IAC9BzoB,OAAO,GACT,IACIyoB,GAA0B,MAAhC,MAAMA,UAAmC7e,GACrC,cAAIW,GACA,OAAO92E,KAAK0vF,WAChB,CACA,cAAI5Y,CAAWT,GACPA,IAAQr2E,KAAK0vF,cACb1vF,KAAK0vF,YAAcrZ,EAE3B,CACA,YAAIlpD,GACA,QAASntB,KAAKqyC,SAClB,CACA,YAAIllB,CAASxS,GACT3a,KAAKqyC,aAAYvC,OAAsBn1B,EAC3C,CACA,cAAIm2D,GACA,OAAO9wE,KAAK45E,WAChB,CACA,cAAI9I,CAAW+e,GACX,GAAa,WAATA,GACS,UAATA,GACS,cAATA,GACS,YAATA,EACA,MAAMr/D,MAAM,gDAEhBxwB,KAAK45E,YAAciW,CACvB,CACA,WAAIrxB,GACA,OAAIx+D,KAAKy+D,SACEz+D,KAAKy+D,SAEQ,WAApBz+D,KAAK8wE,WACE9wE,KAAK2a,OAAS,KAEI,UAApB3a,KAAK8wE,YACU,cAApB9wE,KAAK8wE,WACE9wE,KAAKkkB,OAAO,IAAM,KAEA,YAApBlkB,KAAK8wE,YACH9wE,KAAKkkB,OAAO,IAAM,IAKjC,CACA,WAAIs6C,CAAQvN,GACRjxD,KAAKy+D,SAAWz+D,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY/B,GACvE,CACA,SAAI81B,GACA,OAAI/mF,KAAKyvF,OACEzvF,KAAKyvF,OAEQ,WAApBzvF,KAAK8wE,WACE9wE,KAAK2a,OAAS,MAEI,UAApB3a,KAAK8wE,YACU,cAApB9wE,KAAK8wE,aACE9wE,KAAKkkB,OAAO,IAAM,IAKjC,CACA,SAAI6iE,CAAM91B,GACNjxD,KAAKyvF,OAASzvF,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAY/B,GACrE,CACA,kBAAI0hB,GACA,OAAO3yE,KAAKiyF,eAChB,CACA,kBAAItf,CAAelwE,GACfzC,KAAKiyF,gBAAkBxvF,CAC3B,CACA,eAAIgwE,GACA,OAAOzyE,KAAKitE,MAAQ,IACxB,CACA,eAAIwF,CAAY93D,GACZ3a,KAAKitE,KAAOjtE,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAYr4C,IAC/D3a,KAAKw0E,eAAenf,cACxB,CACA,eAAIqd,GACA,OAAO1yE,KAAKmtE,MAAQ,IACxB,CACA,eAAIuF,CAAY/3D,GACZ3a,KAAKmtE,KAAOntE,KAAKs3E,aAAat3E,KAAKm3E,gBAAgBnkB,YAAYr4C,IAC/D3a,KAAKw0E,eAAenf,cACxB,CACA,SAAI16C,GACA,OAAO3a,KAAKkyF,MAChB,CACA,SAAIv3E,CAAMA,GACNA,EAAQ3a,KAAKm3E,gBAAgBnkB,YAAYr4C,GACzCA,EAAQ3a,KAAKs3E,aAAa38D,GAC1B3a,KAAKkyF,OAASv3E,EACd3a,KAAK2iB,SAAWhI,CACpB,CACA,UAAIuJ,GACA,OAAOlkB,KAAKqyF,OAChB,CACA,UAAInuE,CAAOA,GACHA,GAAUA,EAAOla,OAAS,GAC1Bka,EAASA,EAAOzjB,IAAIu/B,IAChBA,EAAIhgC,KAAKm3E,gBAAgBnkB,YAAYhzB,IACrCA,EAAIhgC,KAAKs3E,aAAat3C,IACXhgC,KAAKm3E,gBAAgB7lB,MAAMtxB,GAAK,OAE/ChgC,KAAKqyF,QAAU,IAAInuE,GACnBlkB,KAAK6wE,UAAY,IAAI3sD,KAGrBlkB,KAAKqyF,QAAU,GACfryF,KAAK6wE,UAAY,GAEzB,CACA,YAAIluD,GACA,OAAO3iB,KAAKqzD,SAChB,CACA,YAAI1wC,CAAShI,GACT3a,KAAKqzD,UAAY14C,EACjB3a,KAAKw0E,eAAenf,cACxB,CACA,aAAIwb,GACA,OAAO7wE,KAAKk6E,UAChB,CACA,aAAIrJ,CAAU3sD,GACVlkB,KAAKk6E,WAAah2D,EAClBlkB,KAAKw0E,eAAenf,cACxB,CACA,UAAIsP,GACA,OAAO,CACX,CACA,cAAI8gB,GACA,MAAO,QACX,CACA,kBAAIhN,GACA,MAA4B,WAArBz4E,KAAK45E,WAChB,CACA,iBAAIlB,GACA,MAA6B,UAArB14E,KAAK45E,aACY,cAArB55E,KAAK45E,aACgB,YAArB55E,KAAK45E,WACb,CACA,oBAAIqb,GACA,OAAO,CACX,CACAp1F,YAAY20E,EAAgB2C,EAAiBJ,GACzCj3E,MAAMq3E,EAAiBJ,GACvB/2E,KAAKw0E,eAAiBA,EACtBx0E,KAAKm3E,gBAAkBA,EACvBn3E,KAAK+2E,gBAAkBA,EAOvB/2E,KAAK0vF,YAAc,OACnB1vF,KAAKqyC,WAAY,EACjBryC,KAAK45E,YAAc,SACnB55E,KAAKqyF,QAAU,GAKfryF,KAAK65D,aAAe,IAAI/M,MAKxB9sD,KAAKu7D,cAAgB,IAAIzO,MAIzB9sD,KAAK0wE,aAAe,IAAI5jB,MACxB9sD,KAAKk6E,WAAa,GAClBl6E,KAAKgzF,cAAgB,OACrBhzF,KAAKizF,eAAiB,MAC1B,CACA/jD,WACIlvC,KAAK4nF,UAAUtiE,OAAStlB,IAC5B,CACAurE,WAAW5wD,GACH3a,KAAKy4E,gBACLz4E,KAAK2a,MAAQA,EACb3a,KAAK4nF,UAAUhX,aAAej2D,IAG9B3a,KAAKkkB,OAASvJ,EACd3a,KAAK4nF,UAAUhX,aAAe5wE,KAAKqyF,QAAQryF,KAAK4nF,UAAUnU,qBAElE,CACAjI,iBAAiBltD,GACbte,KAAKgzF,cAAgB10E,CACzB,CACAmtD,kBAAkBntD,GACdte,KAAKizF,eAAiB30E,CAC1B,CACAotD,iBAAiBrwB,GACbr7C,KAAKmtB,SAAWkuB,CACpB,CACAmqB,OAAOvU,GACCjxD,KAAKmtB,WAGLnM,MAAMC,QAAQgwC,GACdjxD,KAAKkkB,OAAS,IAAI+sC,GAGlBjxD,KAAK2a,MAAQs2C,EAEjBjxD,KAAKgzF,cAAc/hC,GACnBjxD,KAAKizF,iBACT,CAIA3gB,WAAWxS,GACP9/D,KAAK65D,aAAavL,KAAKwR,EAC3B,CAIAyS,YAAYxS,GACR//D,KAAKu7D,cAAcjN,KAAKyR,EAC5B,CAIAyS,WAAWtW,GACPl8D,KAAK0wE,aAAapiB,KAAK4N,EAC3B,QACSl8D,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwF8mD,GAp9JVtwF,MAo9JsDA,OAp9JtDA,MAo9JuF2wE,GAAe,GAp9JtG3wE,MAo9JmIuwE,GAAqB,IAA8D,QAC7Sj1E,KAAKk5E,UAr9JkFx0E,MAAE,CAAA8N,KAq9JJwiF,EAA0B7mD,UAAA,2BAAAmJ,UAAA,SAAA9I,EAAAC,GAA2nB,GAA3nB,EAAAD,GAr9JxB9pC,MAq9JsnBogF,GAA6B,KAAAt2C,EAAA,KAAA6H,EAr9JnpB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAm5C,UAAAvxC,EAAAz1B,MAAA,GAAAuvB,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,gBAAA+pC,EAAAwmD,iBAq9JsB,EAAA5kD,OAAA,CAAAymC,WAAA,aAAA3pD,SAAA,WAAA2jD,WAAA,aAAAtS,QAAA,UAAAuoB,MAAA,QAAApU,eAAA,yCAAAF,YAAA,wBAAAC,YAAA,wBAAA/3D,MAAA,QAAAuJ,OAAA,UAAA4rC,QAAA,CAAA+J,aAAA,eAAA0B,cAAA,gBAAAmV,aAAA,gBAAAsE,YAAA,EAAAxzD,SAAA,CAr9JxB9c,MAq9JohB,CAACqwF,KAr9JrhBrwF,OAAE0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,4BAq9J0xB,EAAA8yC,aAAA,CAA2DstC,IAA6Bh2C,cAAA,EAAAyB,gBAAA,GAAqI,EAC5lC,OAxOKykD,CAA0B,KA0R1BE,GAAe,MAArB,MAAMA,SACOl1F,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFgnD,EAAe,CAAoD,QACpKl1F,KAAKm1F,UA1gKkFzwF,KAAE,CAAA8N,KA0gKS0iF,GAAmI,QACrOl1F,KAAKo1F,UA3gKkF1wF,MAAE,CAAAkqE,UA2gKqC,CAC/H+c,GACAG,IACHr7C,QAAA,CAAY4kD,MAAcvmB,MAAYD,MAAeE,QAAkB,EAC/E,OAPKmmB,CAAe,KA0BfI,GAAiB,MAAvB,MAAMA,SACOt1F,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFonD,EAAiB,CAAoD,QACtKt1F,KAAKm1F,UApiKkFzwF,KAAE,CAAA8N,KAoiKS8iF,GAoBxE,QAC1Bt1F,KAAKo1F,UAzjKkF1wF,MAAE,CAAAkqE,UAyjKuC,CACjI4I,GACA6X,MACG7V,IACN/oC,QAAA,CAAY4kD,MAAcxmB,MAAeqmB,GAAiBpmB,QAAgB,EAClF,OA5BKwmB,CAAiB,MAuEvB,SAASC,GAAMvrF,EAAQwrF,GACnB,MAAMC,EAAcz0E,MAAMhX,GAC1B,QAASrB,EAAI,EAAGA,EAAIqB,EAAQrB,IACxB8sF,EAAY9sF,GAAK6sF,EAAc7sF,EAGvC,CAuG2B4sF,CAAM,GAAI5sF,GAAK+sF,OAAO/sF,EAAI,0EC9wKrDgtF,UAAaC,IACbD,UAAaE,IAEb,MAAMC,GAAsC,IAAI7kD,MAAe,sCAAuC,CAClG9vC,WAAY,OACZF,QAGJ,SAAS80F,KACL,MAAO,CACHC,QAAQ,EAEhB,IAEA,SAAST,GAAMvrF,EAAQwrF,GACnB,MAAMC,EAAcz0E,MAAMhX,GAC1B,QAASrB,EAAI,EAAGA,EAAIqB,EAAQrB,IACxB8sF,EAAY9sF,GAAK6sF,EAAc7sF,GAEnC,OAAO8sF,CACX,CAAC,IACKQ,GAAoB,MAA1B,MAAMA,UAA6B5gB,GAC/Bx1E,YAAYq2F,EAAmBtzE,GAC3B9iB,QACAE,KAAKk2F,kBAAoBA,EACzBl2F,KAAK4iB,QAAUA,EACf5iB,KAAK81E,UAAUogB,GAAqBP,KAAQ5f,SAChD,CACAD,UAAUC,GACNj2E,MAAMg2E,UAAUC,GAChB,MAAMogB,EAAiBR,KAAQ5f,OAAOA,GAAQqgB,aAC9Cp2F,KAAKq2F,YAAc,CACfC,WAAYH,EAAe5Z,SAC3Bga,YAAaJ,EAAeK,cAC5BC,eAAgBN,EAAeO,gBAC/BC,gBAAiBR,EAAeO,gBAChCE,iBAAkBT,EAAeU,cACjCC,MAAOvB,GAAM,GAAK5sF,GAAM3I,KAAKy3D,WAAW,KAAM,EAAG9uD,EAAI,GAAGyuD,OAAO,MAEvE,CACAM,QAAQzG,GACJ,OAAOjxD,KAAKsxD,MAAML,GAAMmI,MAC5B,CACA9B,SAASrG,GACL,OAAOjxD,KAAKsxD,MAAML,GAAMoI,OAC5B,CACA8kB,OAAOltB,GACH,OAAOjxD,KAAKsxD,MAAML,GAAMqI,KAC5B,CACApD,QAAQjF,GACJ,OAAOjxD,KAAKsxD,MAAML,GAAMA,MAC5B,CACAmqB,SAASnqB,GACL,OAAOjxD,KAAKsxD,MAAML,GAAM8lC,MAC5B,CACA1b,WAAWpqB,GACP,OAAOjxD,KAAKsxD,MAAML,GAAM+lC,QAC5B,CACA1b,WAAWrqB,GACP,OAAOjxD,KAAKsxD,MAAML,GAAMpwC,QAC5B,CACA24C,QAAQvI,GACJ,OAAOjxD,KAAKsxD,MAAML,GAAMgmC,SAC5B,CACA7gC,kBAAkBnF,GACd,OAAOjxD,KAAKsxD,MAAML,GAAM2H,aAC5B,CACA4mB,yBAAyBvC,EAAUC,GAC/B,OAAO3zE,KAAK21E,KAAKjC,EAASia,QAAQ,OAAOthB,KAAKsH,EAAUga,QAAQ,OAAQ,OAAO,GACnF,CACAv8B,YAAY1J,GACR,OAAOA,EAAKmG,OAAO,OACvB,CACAC,cAAcmJ,GACV,MAAiB,SAAVA,EACDxgE,KAAKq2F,YAAYC,WACjBt2F,KAAKq2F,YAAYE,WAC3B,CACA99B,kBAAkB+H,GACd,MAAc,SAAVA,EACOxgE,KAAKq2F,YAAYI,eAEd,UAAVj2B,EACOxgE,KAAKq2F,YAAYM,gBAErB32F,KAAKq2F,YAAYO,gBAC5B,CACA99B,eACI,OAAO94D,KAAKq2F,YAAYS,KAC5B,CACArpB,UAAUxc,GACN,OAAOjxD,KAAKsxD,MAAML,GAAMkmC,aAC5B,CACAnrE,QAAQixD,EAAUC,GACd,OAAOl9E,KAAKsxD,MAAM2rB,GAAUma,OAAOp3F,KAAKsxD,MAAM4rB,GAClD,CACAjD,UAAUgD,EAAUC,GAChB,OAAOl9E,KAAKsxD,MAAM2rB,GAAUma,OAAOp3F,KAAKsxD,MAAM4rB,GAAY,MAC9D,CACAv1D,QAAQspC,GACJ,OAAOjxD,KAAKsxD,MAAML,GAAMtpC,SAC5B,CACAs5B,UACI,OAAO00C,GAAM0B,IACjB,CACAnmC,eAAeqmB,GACX,OAAOoe,WAAcpe,EACzB,CASAvkB,YAAYr4C,GACR,GAAqB,iBAAVA,EAAoB,CAC3B,MAAM28E,EAAmB3B,GAAMh7E,GAC/B,OAAO3a,KAAK2nB,QAAQ2vE,GACdA,EACAt3F,KAAKihD,SACf,QACkB,MAATtmC,GACJ3a,KAAKkxD,eAAev2C,IAAU3a,KAAK2nB,QAAQhN,GACrCA,EAEJ3a,KAAKihD,SAChB,CACAsV,iBAAiBtF,EAAMszB,GACnB,OAAOvkF,KAAKsxD,MAAML,GAAMzuD,IAAI+hF,EAAQ,OACxC,CACA/tB,kBAAkBvF,EAAMszB,GACpB,OAAOvkF,KAAKsxD,MAAML,GAAMzuD,IAAI+hF,EAAQ,QACxC,CACA1uB,gBAAgB5E,EAAMszB,GAClB,OAAOvkF,KAAKsxD,MAAML,GAAMzuD,IAAI+hF,EAAQ,MACxC,CACAb,SAASzyB,EAAMszB,GACX,OAAOvkF,KAAKsxD,MAAML,GAAM8lC,KAAKxS,EACjC,CACAV,WAAW5yB,EAAMszB,GACb,OAAOvkF,KAAKsxD,MAAML,GAAM+lC,OAAOzS,EACnC,CACAR,WAAW9yB,EAAMszB,GACb,OAAOvkF,KAAKsxD,MAAML,GAAMpwC,OAAO0jE,EACnC,CACA9sB,WAAW2B,EAAMC,EAAOpI,EAAM8xB,EAAQ,EAAGa,EAAU,EAAGE,EAAU,GAC5D,GAAIzqB,EAAQ,GAAKA,EAAQ,GACrB,MAAM7oC,MAAM,wBAAwB6oC,+CAExC,GAAIpI,EAAO,EACP,MAAMzgC,MAAM,iBAAiBygC,sCAEjC,GAAI8xB,EAAQ,GAAKA,EAAQ,GACrB,MAAMvyD,MAAM,kBAAkBuyD,yCAElC,GAAIa,EAAU,GAAKA,EAAU,GACzB,MAAMpzD,MAAM,oBAAoBozD,wCAEpC,GAAIE,EAAU,GAAKA,EAAU,GACzB,MAAMtzD,MAAM,oBAAoBszD,2CAEpC,IAAIt/E,EAASxE,KAAKu3F,YAAY5B,MAC9B,SAAS6B,EAAWvmC,EAAMwmC,EAAUlT,GAChC,OAAIA,GAAU,EACHtzB,EAAK5nD,IAAIouF,EAAUlT,GAEvBtzB,CACX,CASA,GARAzsD,EAASgzF,EAAWhzF,EAAQ,OAAQ40D,GACpC50D,EAASgzF,EAAWhzF,EAAQ,QAAS60D,GACrC70D,EAASgzF,EAAWhzF,EAAQ,OAAQysD,GACpCzsD,EAASgzF,EAAWhzF,EAAQ,OAAQu+E,GACpCv+E,EAASgzF,EAAWhzF,EAAQ,SAAUo/E,GACtCp/E,EAASgzF,EAAWhzF,EAAQ,SAAUs/E,GACtCt/E,EAAOuxE,OAAO/1E,KAAK+1E,SAEdvxE,EAAOmjB,UACR,MAAM6I,MAAM,iBAAiBygC,4BAA+BoI,OAEhE,OAAO70D,CACX,CACA8sD,MAAML,GACF,OAAOjxD,KAAKu3F,YAAYtmC,GAAMK,QAAQykB,OAAO/1E,KAAK+1E,OACtD,CACArnD,MACI,OAAO1uB,KAAKsxD,MAAMqkC,KACtB,CACAv+B,OAAOnG,EAAMymC,GACT,OAAO13F,KAAKsxD,MAAML,GAAMmG,OAAOsgC,EACnC,CACA95D,MAAMjjB,EAAOg9E,GACT,OAAOhC,GAAMh7E,EAAOg9E,EACxB,CACAJ,YAAYtmC,GACR,OACM0kC,GADU,OAAT1kC,EACK,KACAA,EADM,CAAE2mC,IAAK53F,KAAK4iB,QAAQozE,QAI1C,QACSh2F,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwF+nD,GAAVvxF,MAAgDwwE,GAAoB,GAApExwE,MAAiGoxF,GAAmC,IAA+D,QAC1R91F,KAAKq4E,WADkF3zE,MAAE,CAAA2mD,MACY4qC,EAAoBh1F,QAApBg1F,EAAoB/0F,WAAK,EAC1I,OAvLK+0F,CAAoB,KAsM1B,MAAM4B,GAA8B,CAChCjD,WAAY,OACZ5d,gBAAiB,OACjBC,gBAAiB,IACjBC,gBAAiB,KACjB9Z,eAAgB,WAChBpE,cAAe,KACfoD,mBAAoB,aAGxB,IAGM07B,GAAmB,MAAzB,MAAMA,SACO93F,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwF4pD,EAAmB,CAAoD,QACxK93F,KAAKm1F,UAhCkFzwF,KAAE,CAAA8N,KAgCSslF,GAAwB,QAC1H93F,KAAKo1F,UAjCkF1wF,MAAE,CAAAkqE,UAiCyC,CACnI,CACIn4B,QAAS4+B,GACT0iB,SAAU9B,GACV7tD,KAAM,CAAC8sC,GAAsB4gB,OAE/B,EACb,OAVKgC,CAAmB,KAuBnBE,GAAsB,MAA5B,MAAMA,SACOh4F,KAAKkB,UAAI,SAAAgtC,GAAA,WAAAA,GAAwF8pD,EAAsB,CAAoD,QAC3Kh4F,KAAKm1F,UAvDkFzwF,KAAE,CAAA8N,KAuDSwlF,GAA2D,QAC7Jh4F,KAAKo1F,UAxDkF1wF,MAAE,CAAAkqE,UAwD4C,CAAC,CAAEn4B,QAASw+B,GAAuBgjB,SAAUJ,KAA8BpnD,QAAA,CAAYqnD,KAAyB,EACjQ,OAJKE,CAAsB,qaCtPrB,MAAME,GACX,IAAIjnD,MACF,iCACA,CACE9vC,WAAY,OACZF,QAASA,MACP+0F,QAAQ,MAkBT,IAAMmC,GAAoB,MAA3B,MAAOA,UAA4BzmC,MAcvC7xD,YAC8Cu4F,EACgBC,GAE5Dv4F,QAH4CE,KAAAo4F,aACgBp4F,KAAAq4F,WAd9Dr4F,KAAAqD,OAAMtD,MAAS,CAACo4F,wBAkBdn4F,KAAKqD,IAAI6E,EAAE,cAAe,CAAElI,KAAMA,KAAMs4F,aAAct4F,KAAKs4F,aAAcF,aAAYC,aACjFr4F,KAAKs4F,cACP3C,YAAaiC,MAEfjC,YAAa4C,MACb5C,YAAa6C,MACb7C,YAAaS,MAEbp2F,KAAK81E,UAAU6f,OAAQ5f,SACzB,CAKSD,UAAUC,GACjBj2E,MAAMg2E,UAAUC,GAChB,MAAMpuE,EAAI3H,KAAKqD,IAAIib,GAAG,YAAa,CAAEy3D,WAErC4f,YAAa5f,GACb,MAAMqgB,EAAaT,OAAQ5f,OAAOA,GAAQqgB,aAE1Cp2F,KAAKo2F,WAAa,CAChB79B,eAAgB69B,EAAW79B,iBAC3B+9B,WAAYX,cACZY,YAAaZ,mBACbmB,MAAO92F,KAAKu1F,MAAM,GAAK5sF,GAAM3I,KAAKy3D,WAAW,KAAM,EAAG9uD,EAAI,GAAGyuD,OAAO,MACpEq/B,eAAgBz2F,KAAKu1F,MAAM,EAAI5sF,GAAM3I,KAAKy4F,QAAQpvF,IAAI,MAAOV,GAAGyuD,OAAO,SACvEu/B,gBAAiBhB,qBACjBiB,iBAAkBjB,oBAEpBhuF,EAAEsY,EAAEjgB,KAAKo2F,WACX,CAES1+B,QAAQzG,GACf,OAAOjxD,KAAKsxD,MAAML,GAAMmI,MAC1B,CAES9B,SAASrG,GAChB,OAAOjxD,KAAKsxD,MAAML,GAAMoI,OAC1B,CAESnD,QAAQjF,GACf,OAAOjxD,KAAKsxD,MAAML,GAAMA,MAC1B,CAES0G,aAAa1G,GACpB,OAAOjxD,KAAKsxD,MAAML,GAAMqI,KAC1B,CAESjC,cAAcmJ,GACrB,MAAiB,SAAVA,EACHxgE,KAAKo2F,WAAWE,WAChBt2F,KAAKo2F,WAAWG,WACtB,CAESz9B,eACP,OAAO94D,KAAKo2F,WAAWU,KACzB,CAESr+B,kBAAkB+H,GACzB,MAAc,SAAVA,EACKxgE,KAAKo2F,WAAWK,eAEX,UAAVj2B,EACKxgE,KAAKo2F,WAAWO,gBAElB32F,KAAKo2F,WAAWQ,gBACzB,CAESj8B,YAAY1J,GACnB,OAAOjxD,KAAKsxD,MAAML,GAAMmG,OAAO,OACjC,CAESQ,oBACP,OAAO53D,KAAKo2F,WAAW79B,cACzB,CAESnC,kBAAkBnF,GACzB,OAAOjxD,KAAKsxD,MAAML,GAAM2H,aAC1B,CAEStH,MAAML,GACb,OAAOjxD,KAAKy4F,MAAMxnC,GAAMK,OAC1B,CAMSmG,WAAW2B,EAAcC,EAAepI,GAS/C,OARoBjxD,KAAKy4F,QACtBpvF,IAAI,OAAQ+vD,GACZ/vD,IAAI,QAASgwD,GACbhwD,IAAI,OAAQ4nD,GACZ5nD,IAAI,OAAQ,GACZA,IAAI,SAAU,GACdA,IAAI,SAAU,GACdA,IAAI,cAAe,EAExB,CAES4pD,QACP,OAAOjzD,KAAKy4F,OACd,CAES76D,MAAMjjB,EAAYg9E,GACzB,MAAMe,EAAiC,iBAAV/9E,EACvBhT,EAAI3H,KAAKqD,IAAIib,GAAG,QAAS,CAAE3D,QAAOg9E,cAAae,kBACrD,GAAI/9E,GAAS+9E,EAAe,CAC1B,MAAMC,EAAiBhD,OAAQS,aAAauC,eAAehB,GAE3D,IAAIiB,EAAS54F,KAAKy4F,MAAM99E,EAAOg+E,EAAgB34F,KAAK+1E,QAAQ,GAE5D,GAAI6iB,EAAOjxE,UAET,OAAOixE,EAGT,GAAqB,IAAjBj+E,EAAM3Q,OAAc,CAGtB,MAAM6uF,EAAqBF,EAAe/kF,QAAQ,KAAM,KAExD,GADAglF,EAAS54F,KAAKy4F,MAAM99E,EAAOk+E,EAAoB74F,KAAK+1E,QAAQ,GACxD6iB,EAAOjxE,UACT,OAAOixE,EAKT,MAAME,EAAuBH,EAAe/kF,QAAQ,KAAM,KAE1D,GADAglF,EAAS54F,KAAKy4F,MAAM99E,EAAOm+E,EAAsB94F,KAAK+1E,QAAQ,GAC1D6iB,EAAOjxE,UACT,OAAOixE,CAEX,CAEA,GAAqB,IAAjBj+E,EAAM3Q,OAAc,CAGtB,MAAM+uF,EAA0BJ,EAAe/kF,QAAQ,UAAW,IAElE,GADAglF,EAAS54F,KAAKy4F,MAAM99E,EAAOo+E,EAAyB/4F,KAAK+1E,QAAQ,GAC7D6iB,EAAOjxE,UACT,OAAOixE,EAKT,MAAMI,EAA6BL,EAAe/kF,QAAQ,KAAM,KAAKA,QAAQ,KAAM,KAEnF,GADAglF,EAAS54F,KAAKy4F,MAAM99E,EAAOq+E,EAA4Bh5F,KAAK+1E,QAAQ,GAChE6iB,EAAOjxE,UACT,OAAOixE,CAEX,CAEA,GAAIj+E,EAAM3Q,OAAS,GAAK2Q,EAAM3Q,OAAS,EAAG,CAGxC,IAAIoW,EAAQ,IAAIY,MAUhB,IAT2B,IAAvBrG,EAAMg0E,QAAQ,OAChBvuE,EAAQzF,EAAMlO,MAAM,OAEK,IAAvBkO,EAAMg0E,QAAQ,OAChBvuE,EAAQzF,EAAMlO,MAAM,OAEK,IAAvBkO,EAAMg0E,QAAQ,OAChBvuE,EAAQzF,EAAMlO,MAAM,MAED,IAAjB2T,EAAMpW,OAAc,CACtB,IAAIivF,EACAC,EAeJ,GAdIP,EAAensF,WAAW,MAC5BysF,EAAU74E,EAAM,GAChB84E,EAAY94E,EAAM,IACTA,EAAMpW,OAAS,IACxBkvF,EAAY94E,EAAM,GAClB64E,EAAU74E,EAAM,IAEO,IAArB84E,EAAUlvF,SACZkvF,EAAY,EAAIA,GAEK,IAAnBD,EAAQjvF,SACVivF,EAAU,EAAIA,GAEhBL,EAAS54F,KAAKy4F,MAAMQ,EAAUC,EAAW,OAAQl5F,KAAK+1E,QAAQ,GAC1D6iB,EAAOjxE,UACT,OAAOixE,CAEX,CACF,CAWA,OATqB,IAAjBj+E,EAAM3Q,SAGR4uF,EAAS54F,KAAKy4F,MAAM99E,EADL,KACoB3a,KAAK+1E,QAAQ,GAC5C6iB,EAAOjxE,YAKQ,IAAjBhN,EAAM3Q,SAGR4uF,EAAS54F,KAAKy4F,MAAM99E,EADL,IACoB3a,KAAK+1E,QAAQ,GAE5C6iB,EAAOjxE,WACFixE,EAKJ54F,KAAKy4F,MAAM,KACpB,CAEA,OAAO9wF,EAAEsY,EAAEtF,EAAQ3a,KAAKy4F,MAAM99E,GAAOo7D,OAAO/1E,KAAK+1E,QAAU,KAC7D,CAES3e,OAAOnG,EAAaymC,GAC3B,MAAM/vF,EAAI3H,KAAKqD,IAAIib,GAAG,SAAU,CAAE2yC,OAAMymC,kBACxC,IAAK13F,KAAK2nB,QAAQspC,GAChB,MAAMzgC,MAAM,iDACd,OAAO7oB,EAAEsY,EAAEgxC,EAAK8kB,OAAO/1E,KAAK+1E,QAAQ3e,OAAOsgC,GAC7C,CAESnhC,iBAAiBtF,EAAaupB,GACrC,OAAOvpB,EAAKzuD,IAAIg4E,EAAO,OACzB,CAEShkB,kBAAkBvF,EAAasrB,GACtC,OAAOtrB,EAAKzuD,IAAI+5E,EAAQ,QAC1B,CAES1mB,gBAAgB5E,EAAawsB,GACpC,OAAOxsB,EAAKzuD,IAAIi7E,EAAM,MACxB,CAEShQ,UAAUxc,GACjB,OAAOA,EAAKkmC,aACd,CAcSnkC,YAAYr4C,GACnB,IAAIs2C,EACJ,GAAIt2C,aAAiB4+C,KACnBtI,EAAOjxD,KAAKy4F,MAAM99E,QAAK,GACd3a,KAAKkxD,eAAev2C,GAE7B,OAAO3a,KAAKsxD,MAAM32C,GAEpB,GAAqB,iBAAVA,EAAoB,CAC7B,IAAKA,EACH,OAAO,KAETs2C,EAAQjxD,KAAKy4F,MAAM99E,EACrB,CACA,OAAIs2C,GAAQjxD,KAAK2nB,QAAQspC,GAChBjxD,KAAKy4F,MAAMxnC,GAEbnxD,MAAMkzD,YAAYr4C,EAC3B,CAESu2C,eAAeqmB,GACtB,OAAOoe,aAAcpe,EACvB,CAES5vD,QAAQspC,GACf,OAAOjxD,KAAKsxD,MAAML,GAAMtpC,SAC1B,CAESs5B,UACP,OAAOjhD,KAAKy4F,MAAM,KACpB,CAMQA,MAAM/6C,EAA2D0Z,EAAiB2e,EAAiBojB,GAEzG,GADAA,EAAUA,IAAW,GAChBn5F,KAAKs4F,aACR,OAAO3C,KAAMj4C,EAAO0Z,GAGtB,GAAuB,iBAAX1Z,EAAqB,CAC/B,MAAMuT,EAAO,IAAIsI,KAAKo8B,KAAMj4C,EAAO0Z,GAAQgiC,UAM3C,OAJID,GACFloC,EAAKooC,YAAYpoC,EAAKqoC,cAAgBroC,EAAKsoC,oBAAsB,IAG/DtoC,EAAKsoC,oBAAsB,EACtB5D,KAAM,IAAIp8B,KAAKA,KAAKolB,IAAI1tB,EAAK2tB,cAAe3tB,EAAKqG,WAAYrG,EAAKiF,aAAa1zD,IAAI,EAAG,OAAOo1F,MAC/FjC,KAAM,IAAIp8B,KAAKA,KAAKolB,IAAI1tB,EAAK2tB,cAAe3tB,EAAKqG,WAAYrG,EAAKiF,aAAa0hC,KACxF,CAEA,OAAOjC,KAAMj4C,EAAO0Z,GAAQwgC,KAC9B,CAEQrC,MAASvrF,EAAgBwrF,GAC/B,MAAMC,EAAcz0E,MAAMhX,GAC1B,QAASrB,EAAI,EAAGA,EAAIqB,EAAQrB,IAC1B8sF,EAAY9sF,GAAK6sF,EAAc7sF,GAEjC,OAAO8sF,CACT,CAEA,gBAAY6C,GACV,MAAQtC,UAAuCh2F,KAAKq4F,UAAY,GAChE,QAASrC,CACX,iDAnVWmC,GAAmBzzF,MAeR80F,MAAe,GAAA90F,MACfwzF,GAA8B,yCAhBzCC,EAAmBl3F,QAAnBk3F,EAAmBj3F,WAAA,SAAnBi3F,CAAoB,KCzCjC,MAEasB,GAAyC,CACpD77D,MAAO,CACL6rC,UAJuB,KAMzBvS,QAAS,CACPuS,UAPuB,IAQvBrM,eAAgB,WAChBpE,cAAe,KACfoD,mBAAoB,cCLlBs9B,GAAoB,CACxB9E,WAAY,OACZ5d,gBAAiB,OACjBC,gBAAiB,IACjBC,gBAAiB,KACjB9Z,eAAgB,WAChBpE,cAAe,KACfoD,mBAAoB,aAuBf,IAAMu9B,GAAc,MAArB,MAAOA,oDAAc,mCAAdA,GAAc,wCAnBd,CACT,CAAEljD,QAAS2b,MAAkB6lC,SAAUwB,IACvC,CAAEhjD,QAASyhD,GAAgCD,SAAU,CAAEjC,QAAQ,IAC/D,CACEv/C,QAASw+B,GACTgjB,SAAUyB,IAEZ,CAEEjjD,QAASq/C,GACTmC,SAAU,CAAEjC,QAAQ,IAEtB,CACEv/C,QAASib,MACTqmC,SAAUI,GACV/vD,KAAM,CAACoxD,MAAiBtB,OAE3B,SAEUyB,CAAc,KClCrB,MAAOC,WAA6B93C,KAExCjiD,cAAgBC,MAAM,CAAE85F,yBAAyB,CAEjD/5E,QAAS1C,WAAUwiB,UAGjB,OAFU3/B,KAAKqD,IAAIib,GAAG,SAAU,CAAEnB,WAAUwiB,UAEnC1f,EADa9C,EAExB,2CCREzY,MADF,qBACEA,CAD4E,aAS1EA,MAAA,sBAAAs7C,GAAAt7C,MAAA6yC,GAAA,MAAAmF,EAAAh4C,QAAA,OAAAA,MAAcg4C,EAAA+F,YAAAzC,GAAmB,GARnCt7C,QAWAA,MADA,4BACAA,CADmH,2BAEnHA,MAAA,eAAWA,MAAA,GACbA,6CAdgBA,MAAA,YAAAg4C,EAAA9/B,OAIZlY,QAIAA,MAJA,WAAAg4C,EAAAiB,KAAAxwB,SAIAzoB,CAJ0B,gBAAAm1F,EAI1Bn1F,CAHwB,cAAAg4C,EAAAiF,SAAApnC,YAGxB7V,CAFoC,WAAAg4C,EAAAiF,SAAAnlB,SAEpC93B,CAD8B,QAAAg4C,EAAAyE,WAIKz8C,cAAA,MAAAm1F,GAE1Bn1F,MAAA,GAAAA,MAAAg4C,EAAAiF,SAAAjnC,iDAKXhW,MADF,qBACEA,CAD4E,aAS1EA,MAAA,0BAAAs7C,GAAAt7C,MAAAslD,GAAA,MAAAtN,EAAAh4C,QAAA,OAAAA,MAAkBg4C,EAAA+F,YAAAzC,GAAmB,GARvCt7C,QAWAA,MADA,4BACAA,CADqI,0BAErIA,MAAA,eAAWA,MAAA,GACbA,6CAdgBA,MAAA,YAAAg4C,EAAA9/B,OAIZlY,QAIAA,MAJA,WAAAg4C,EAAAiB,KAAAxwB,SAIAzoB,CAJ0B,cAAAo1F,EAI1Bp1F,CAHyB,cAAAg4C,EAAAiF,SAAApnC,YAGzB7V,CAFoC,WAAAg4C,EAAAiF,SAAAnlB,SAEpC93B,CAD8B,QAAAg4C,EAAAq9C,sBAIKr1F,cAAA,qBAAAo1F,GAE1Bp1F,MAAA,GAAAA,MAAAg4C,EAAAiF,SAAAjnC,QDlBfonC,KAAet/C,IAAIo3F,IE4BZ,IAAMI,GAAN,MAAMA,GAkBXn6F,YACUkH,EACAkzF,GADAj6F,KAAA+G,YACA/G,KAAAi6F,sBAlBVj6F,KAAAqD,OAAMtD,MAAS,CAACi6F,8BAENh6F,KAAA0c,cAAaJ,OAAOK,MAEpB3c,KAAA4c,MAAQ5c,KAAK0c,WAAWE,MAExB5c,KAAA29C,GAAK39C,KAAK0c,WAAWihC,GAC/B39C,KAAAmhD,QAAUnhD,KAAK0c,WAAWykC,QAChBnhD,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAEzB3hD,KAAAk6F,cAAgBl6F,KAAK0c,WAAWO,WAAW,iBAGrDjd,KAAA+5F,sBAAqBrlF,OAAS,IAAM1U,KAAKmhD,WAAWvtC,QAAQ,IAAK,IAAK+R,GAAaM,QAE3EjmB,KAAAm6F,uBAAsB3yF,KAAU2wF,IAKtCxC,YAAaiC,MACb,MAAMvqF,EAAcrN,KAAK+G,UAAUsG,YACnCsoF,YAAatoF,GACbrN,KAAKm6F,oBAAoBrkB,UAAUzoE,GACnCrN,KAAKi6F,oBAAoBnkB,UAAUzoE,GACnCusF,GAAqBp3C,UACvB,CAEAC,YAAY/G,GACV,MAAM4tB,EAA0B,MAAf5tB,EAAM/gC,MAAgB+gC,EAAM/gC,MAAMi9E,KAAI,GAAMwC,SAAW,KACxEp6F,KAAK29C,KAAK+E,aAAa4mB,EACzB,iDAjCW0wB,IAAwBt1F,MAAAC,MAAAD,MAAAiM,IAAA,oCAAxBqpF,GAAwB7rD,UAAA,uBAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,seAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDzBnC9pC,MAjBF,EAAA21F,GAAA,uBAiBE31F,CAjBsB,EAAA41F,GAAA,wBAmCxB51F,MAAA,iCAnCAA,MAAA+pC,EAAAyrD,gBAAA,oBC6BQz4C,MAAkB7wC,kBAClBgyC,MAAW/xC,MACXgyC,MAAmBhyC,MACnB0pF,MAAczpF,MACd69D,GAAmB59D,SACnBukF,GAAiB3kF,SACjBmwC,GACAk3C,GACA2B,GACA9qD,MAAcyB,OAAA,kRAIT0pD,IAAwBQ,EAAAz3C,OAAA,CADpCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,qBAoBxBzmC,KACU64D,MApBpB2kB,IClCN,IAAMS,GAAqB,MAA5B,MAAOA,EAEX56F,cAAgB,iDAFL46F,EAAqB,oCAArBA,EAAqBtsD,UAAA,oBAAAC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,YAArB2rD,CAAqB,+BCPhC/1F,MAAA,qDAAyBA,MAAA,YAAAA,MAAA,IAAAopC,EAAA6T,SAAAxB,OAAAz7C,QCapB,IAAMg2F,GAAN,MAAMA,GAAN76F,cAEKG,KAAA0c,cAAaJ,OAAOK,MACpB3c,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,uDAHxB+4C,GAAqB,oCAArBA,GAAqBvsD,UAAA,oBAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,kCAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDdlC9pC,MAAA,EAAAi2F,GAAA,kBAAAj2F,MAAA+pC,EAAAkT,SAAAi5C,QAAA,qBCUclhD,MAAYpJ,OAAA,8EAIboqD,MAAqB33C,OAAA,CADjCjE,GAAc,CAAE,IACJ47C,ICRP,MAAOG,WAAiC/4C,KAG5CjiD,cAAgBC,MAAM,CAAE+6F,8BAFxB76F,KAAAqU,KAAO0hB,KAAiBI,mBAE6B,CAErDtW,OAAO+D,GAEL,MAAM0/B,EADqBx0C,IAAkBC,YAAYhJ,IAAIgwB,KAAiBC,eAChDnW,OAAO+D,GACrC0/B,SAAGlgC,cAAe,EAClBkgC,EAAGpgC,iBAAkB,EACrBogC,EAAGw3C,mBAAoB,EACvBx3C,EAAGngC,cAAe,EAClBmgC,EAAGy3C,YAAa,EAChBz3C,EAAGxrB,SAAU,EAGbwrB,EAAG03C,WAAa,wBAChB13C,EAAGlmC,YAAckmC,EAAG03C,WAEb13C,CACT,EAGFxB,KAAet/C,IAAIq4F,oDC5Bb,MAAOI,GAIJC,UAAUC,GACf,IAAKA,EAAgB,MAAO,GAC5B,IAAKA,EAAejuF,SAAS,KAAM,OAAOiuF,EAC1C,MAAMC,EAAM/nF,SAASC,cAAc,OACnC8nF,SAAI9uD,UAAY6uD,GAAkB,GAC3BC,EAAIC,WAAa,EAC1B,ECFF,MAAMv4F,GAAW,CACfC,KAAK,EACLu4F,iBAAiB,EACjBC,UAAU,EACVC,YAAY,EACZC,YAAY,EACZC,YAAY,GASR,MAAOC,GAIX97F,YACUwU,EACA8I,EACRqE,EACQ/a,EACRm1F,EAAwCC,GAJhC77F,KAAAqU,OACArU,KAAAmd,WAEAnd,KAAAyG,aANVzG,KAAAqD,OAAMtD,MAAS,CAAE47F,0BAAyB74F,IAe1C9C,MAAA87F,GAAmB,EACnB97F,MAAA+7F,GAAkB,EAClB/7F,MAAAg8F,GAAe,EAEfh8F,MAAAi8F,EAAW,IAAIhB,GAVbj7F,KAAKqD,IAAI2+B,YAAY65D,GAAaD,EAAUM,iBAAkB,GAC9Dl8F,MAAK87F,EAAmBt6E,EAAS26E,SAASluE,KAAamuE,oBACvDp8F,MAAKg8F,EAAev1F,EAAWlB,OAAO82F,cAAcC,MAAMC,cAC1Dv8F,KAAKqD,IAAI6E,EAAE,yBAA0B,CAAEiV,WAAUq/E,YAAax8F,MAAK87F,GACrE,CAEAA,GACAC,GACAC,GAEAC,GAEAQ,GAGAnB,iBAAkB/7E,SAAQm9E,aAAYC,mBAAkBC,uBAAsB,IAI5E,MAAMj1F,EAAI3H,KAAKqD,IAAIC,KAAK,kBAAmB,CAAEic,SAAQm9E,aAAYC,qBAE3DE,EAAQ78F,MAAK88F,IAGbniF,QACJ,GAAIgiF,GAAqBC,IAAwBC,EAAMliF,MACrD,OAAO4E,EAAOpf,KAChB,QAA4B4P,IAAxBwP,EAAOs9E,EAAMliF,OACf,OAAO4E,EAAO3c,MAChB,MAAMm6F,EAAQx9E,EAAOs9E,EAAMliF,OAE3B,YAAiB5K,IAAVgtF,EAAsB,GAAGA,IAAUx9E,EAAOpf,IACnD,EARMwa,GAWAD,QACJ,MAAMsiF,EAAaz9E,EAAOs9E,EAAMniF,OAChC,OAAOsiF,EAAa,GAAGA,IAAez9E,EAAO09E,MAAQ,GAAG19E,EAAO09E,QAAU,GAAGtiF,GAC9E,EAHMD,GAKAwiF,EACiB39E,EAAOs9E,EAAMK,eAE3BviF,EAMT,GAHAhT,EAAEO,EAAE,eAAgB,CAAE20F,QAAOliF,QAAOD,QAAOwiF,eAAcC,gBAAiBN,EAAMM,mBAG3EN,EAAMM,gBAaT,OAAOx1F,EAAEsY,EAZkB,CACzBjB,GAAIO,EAAOzU,GACXI,KAAMqU,EACN5E,QACAuiF,eACAxiF,QACAiK,QAASk4E,EAAMl4E,QACfC,KAAMi4E,EAAMj4E,KACZtiB,KAAMu6F,EAAMv6F,KACZ86F,iBAAkBV,GAAc,KAChCW,MAAO99E,EAAO+9E,OAEG,YAIrB,MAAMC,EAAYv9F,MAAKw9F,EAAYX,EAAOt9E,GAGpCk+E,EAAaZ,EAAMniF,MAAMxN,SAAS,KAAOqwF,EAAU7iF,MAAQA,EAEjE,OAAO/S,EAAEsY,EAAE,CACTjB,GAAIO,EAAOzU,GACXI,KAAMqU,KACHg+E,EACH5iF,QACAD,MAAO+iF,EACPL,iBAAkBV,GAAc,KAChCW,MAAO99E,EAAO+9E,OACQ,aAC1B,CAGAE,GAAYX,EAAwB3xF,GAClC,MAAMvD,EAAI3H,KAAKqD,IAAIC,KAAK,aAAc,CAAEu5F,QAAO3xF,SAC/C,IAAIwP,EAAQmiF,EAAMniF,OAGb1a,MAAK+7F,IAAoB/7F,MAAK87F,GAAoB,GAAGe,EAAMl4E,UAAUk4E,EAAMj4E,OAAOi4E,EAAMv6F,OAAO0H,OAAS,IAC1FhK,MAAKg8F,EAGtBh8F,MAAK+7F,GAAkB,GAEzB,MAAM2B,EAAW19F,MAAK87F,GAAoB97F,MAAKg8F,EAC/C,IAAIr3E,EAAU+4E,EAAWb,EAAMl4E,QAAU,GACrCC,EAAO84E,EAAWb,EAAMj4E,KAAO,GAC/BtiB,EAAOo7F,EAAWb,EAAMv6F,KAAO,GAC/B46F,EAAeL,EAAMK,aAEzB38F,cAAOkF,KAAKyF,GAAMiH,QAAQ9Q,IAExB,MAAMs8F,EAAYzyF,EAAK7J,IAAQ,GAGzBu8F,EAAS,IAAIC,OAAO,WAAWx8F,OAAU,MAE/C,GAAI67F,EAAahwF,SAAS,YAAa,CAGrC,MAAM4wF,GADc99F,KAAKyG,WAAWlB,OAAOw4F,WAAYnqF,QAAQ,MAAO,IAC1C5T,KAAKyG,WAAWlB,OAAOy4F,QACnDd,EAAeA,EAAatpF,QAAQ,aAAckqF,GACpD,CAEAn5E,EAAUA,EAAQ/Q,QAAQgqF,EAAQD,GAClC/4E,EAAOA,EAAKhR,QAAQgqF,EAAQD,GAC5Br7F,EAAOA,EAAKsR,QAAQgqF,EAAQD,GAC5BjjF,EAAQA,EAAM9G,QAAQgqF,EAAQD,GAC9BT,EAAeA,EAAatpF,QAAQgqF,EAAQD,EAAS,GAGhDh2F,EAAEsY,EAAE,CAAEvF,QAAOiK,UAASC,OAAMtiB,OAAM46F,gBAA4C,SACvF,CAGAJ,KACE,OAAM98F,MAAKy8F,IACXz8F,MAAKy8F,EAASz8F,MAAKi+F,IACnBj+F,KAAKqD,IAAIqE,IAAI,WAAY,CAAEm1F,MAAO78F,MAAKy8F,KAFbz8F,MAAKy8F,CAIjC,CAEAwB,KACE,MAAM9gF,EAAWnd,KAAKmd,SAChBxV,EAAI3H,KAAKqD,IAAIC,KAAK,aAAc,CAAE6Z,aAElCwH,EAAYxH,EAAS+gF,YAAcl+F,MAAKi8F,EAASf,UAAU/9E,EAAS+gF,aAAe,GACnFt5E,EAASzH,EAASghF,gBAAkBn+F,MAAKi8F,EAASf,UAAU/9E,EAASghF,iBAAmB,GACxF77F,EAAO6a,EAASihF,UAAY,GAC5B1jF,EAAQyC,EAASkhF,OAAS,GAC1B1jF,EAAQwC,EAASva,OAAS,GAC1Bs6F,EAAe//E,EAASmhF,cAAgB,GAExC95F,EAA0B,CAC9B24F,iBAFuBx4E,EAAUC,EAAOtiB,EAAOoY,EAAQwiF,GAAchwF,SAAS,KAG9EyX,UACAC,OACAtiB,OACAoY,QACAC,QACAuiF,gBAGF,OAAOv1F,EAAEsY,EAAEzb,EAAQ,SACrB,ECrLI,MAAO+5F,GAAb1+F,cACEG,KAAAqD,OAAMtD,MAAS,CAACw+F,+BA6DlB,CA3DEC,8BAA8BrhF,GAC5Bnd,KAAKqD,IAAI6E,EAAE,gCAAiC,CAAEiV,aAE9C,MAAMshF,EAActhF,EAAiEuhF,wBAC/EC,EAAexhF,EAqBrB,MAJkB,IARK,CAAK,QAAS,KAAM,UARxBwhF,EAAaC,YAAYnyF,MAAM,MAAQ,GACrCkyF,EAAa/7F,MAAO+7F,EAAaN,MAEpDI,GAAYI,iBACZJ,GAAYK,kBACZL,GAAYM,wBACZN,GAAYO,yBAIXv+F,IAAIq0B,GAAS90B,KAAKi/F,4BAA4BnqE,GAAO,IAAOC,UAE1C,CAAC5X,EAAS+gF,YAAa/gF,EAASghF,gBAAiBhhF,EAASihF,UAC5E39F,IAAIq0B,GAAS90B,KAAKi/F,4BAA4BnqE,GAAO,IAAQC,QAI7DtyB,OAAOqjB,KAAUo5E,UAGHh+E,KAAK,IACxB,CAUA+9E,4BAA4BvhD,EAAeyhD,GAA8B,GACvEn/F,KAAKqD,IAAI6E,EAAE,8BAA+B,CAAEw1C,QAAOyhD,uBACnD,MAAM9jF,EAAmB,GAGzB,KAAMqiC,GAAOp8C,OAAO0I,OAAS,GAAI,OAAOqR,EAIxC,MAAM+jF,EAAQ,qBACd,IAAItiE,EACJ,KAAuC,QAA/BA,EAAQsiE,EAAMC,KAAK3hD,KAAkB,CAC3C,MAAM4hD,EAAexiE,EAAM,GAAGx7B,OAC1Bg+F,GAAcjkF,EAAO3O,KAAK4yF,EAChC,CAIA,OAAIH,GAAwC,IAAlB9jF,EAAOrR,QAAcqR,EAAO3O,KAAKgxC,GAEpDriC,CACT,EChDK,MAAMkkF,GAAyB,CACpCx8F,KAAK,EACLlD,aAAa,EACbqL,MAAM,EACNs0F,eAAe,EACfjhF,cAAc,EACdlD,OAAQ,IAAIC,KAAa,cACzBmkF,gBAAgB,EAChBC,kBAAkB,GAIb,IAAeC,GAAe,MAA/B,MAAgBA,UAAuB5oF,KAe3ClX,cAAgBC,QAVNE,KAAA0c,cAAaJ,OAAOK,MAGpB3c,KAAAwhB,YAAWlF,OAAO8L,KAGlBpoB,KAAAyG,cAAa6V,OAAOC,KAEpBvc,KAAAe,UAAYf,KAAK0c,WAAWrI,KAa/BrU,KAAA4d,WAAUpC,OAAU,WAAW,GAG5Bxb,KAAA4/F,QAAU,IAAIC,MAAyB,GACvC7/F,KAAAiN,UAASuO,OAAU,UAAU,GAU7Bxb,KAAA8/F,kBAAiBtkF,OAAoB,iBAAkB,IAEvDxb,KAAAmd,SAAWnd,KAAK0c,WAAWS,SAE3Bnd,KAAA+/F,oBAAqD,CAAE70F,KAAM,GAAI0S,SAAS,GAC1E5d,KAAAggG,mBAAoD,CAAE90F,KAAM,GAAI0S,SAAS,GASzE5d,KAAAigG,aAAe,IAAI1B,GAEnBv+F,KAAAkgG,QAAU,IAAIjF,EAzCC,CAEzBkF,iBACEngG,KAAKqD,SAAQtD,MAAS,CAAC4/F,mBACvB3/F,KAAKqD,IAAIqE,IAAI,cAAe,CAAE04F,SAAUpgG,KAAK0c,WAAWrI,MAC1D,CA2BOuH,QAAgB,OAAO5b,IAAM,CAEpCyX,cACEzX,KAAK4/F,QAAQloF,WACb5X,MAAM2X,aACR,CAMA+nF,gBACEx/F,KAAKqD,IAAIC,KAAK,iBACdtD,KAAK4/F,QAAQvlF,MAAK,GAClBra,KAAKiN,OAAO5D,KAAI,EAClB,CAEAkV,aAAa8hF,GACX,MAAM14F,EAAI3H,KAAKqD,IAAIC,KAAK,eAAgB,CAAE+8F,oBACpCp2E,EAASjqB,KAAK8/F,iBACdhmE,EAAS,IAAI7P,KAAWo2E,GAAiB59F,OAAOqjB,KAAUo5E,UAChEv3F,EAAEuc,OAAO,CAAE+F,SAAQo2E,kBAAiBvmE,WACpC95B,KAAK8/F,eAAez2F,IAAIywB,GACxBnyB,EAAE8R,KACJ,CAEU6mF,iBAAiBC,EAAkE1E,GAC3F,OAAO,IAAIF,GAAsB37F,KAAKe,UAAW,IAAIf,KAAKmd,cAAeojF,GAAgBvgG,KAAKwhB,SAAUxhB,KAAKyG,WAAYzG,KAAKqD,IAAKw4F,EACrI,CAEU2E,iBAAiBrjF,GACzB,OAAOnd,KAAKigG,aAAazB,8BAA8BrhF,EACzD,iDA/EoBwiF,EAAc,sCAAdA,EAAc1+F,QAAd0+F,EAAcz+F,WAAA,SAAdy+F,CAAe,KCpB9B,MAAMc,GAAyE,IACjFlB,GACHx8F,KAAK,EACLoY,cAAc,EACdulF,gBAAgB,EAChBniF,cAAc,EACdoiF,oBAAoB,EACnB,2BAA4B,GASxB,IAAeC,GAAqB,MAArC,MAAgBA,UAA6BjB,GAQjD9/F,cAAgBC,QAFNE,KAAA6gG,YAAWr5F,KAAUs5F,MAiB/B9gG,MAAA+gG,KAAgBvlF,OAAkB,eAAgB,MAClDxb,MAAAghG,KAAiBC,OAAajhG,MAAK+gG,GACnC/gG,MAAAkhG,EAAoBlhG,MAAKghG,EAAen9F,QAAKs9F,SAW7CnhG,MAAAohG,KAAYloF,UAASmoF,MAAc,CACjCrhG,MAAKkhG,EACLlhG,KAAK4/F,QAAQ/7F,QAAKs9F,SAAoB,EAAI1+F,MAAOwK,KAAYA,IAAM,EAAGxM,KAAIgtC,GAAK,OAC9E5pC,QAIDy9F,MAAU,EAAEC,KAAcvhG,KAAK0gG,eAAea,EAAU,GAAI,YAC3D,CAAEC,aAAcxhG,KAAK+/F,sBAExB//F,MAAAyhG,KAAejmF,OAAyC,cAAexb,KAAK+/F,qBAG5E//F,MAAA0hG,KAAYlmF,OAAyC,WAAYxb,KAAK+/F,qBAEtD//F,KAAAkL,QAAOwQ,OAAY,OAAQ,KACzC,MAAMimF,EAAW3hG,MAAKyhG,IAAev2F,KAC/BnI,EAAM/C,MAAKohG,IAAYl2F,KACvB02F,EAAW5hG,MAAK0hG,IAAYx2F,KAC5BA,EAAO,IAAI,IAAIuhF,IAAI,IAAIkV,KAAa5+F,KAAQ6+F,GAAUnhG,IAAIP,GAAQ,CAACA,EAAKya,MAAOza,KAAQgkB,UAC7F,OAAAlkB,KAAKqD,IAAI6E,EAAE,OAAQ,CAAEy5F,WAAU5+F,MAAK8+F,UAAWD,EAAU12F,SAClDA,IAIOlL,KAAA4d,WAAUlC,OAAY,UAAW,IAAM1b,MAAKohG,IAAYxjF,SAAW5d,MAAK0hG,IAAY9jF,QArD3E,CAEzBnG,cACEzX,KAAK4/F,QAAQloF,WACb5X,MAAM2X,aACR,CAUAspF,GACAC,GACAE,GAWAE,GAUAK,GAGAC,GAcAvmF,aAAa2mF,GACX,MAAMn6F,EAAI3H,KAAKqD,IAAI8a,WAAW,eAAgB,SAAUne,KAAKe,UAAW,CAAE+gG,gBACpEC,EAAQD,EAAYr/F,OAAOqjB,KAAUo5E,UAC3Cl/F,MAAKgiG,EAAmBhiG,MAAKyhG,EAAcM,EAAO,gBAClDp6F,EAAE8R,KACJ,CAGAwoF,UAAUt+F,GACR3D,KAAKqD,IAAI8a,WAAW,YAAa,SAAUne,KAAKe,UAAW,CAAE4C,WAC7D3D,MAAK+gG,EAAc13F,IAAI1F,EACzB,CAGgB4a,aAAa8hF,GAC3B,MAAM14F,EAAI3H,KAAKqD,IAAIC,KAAK,eAAgB,CAAE+8F,oBAC1CrgG,MAAKgiG,EAAmBhiG,MAAK0hG,EAAWrB,EAAiB,gBACzD14F,EAAE8R,KACJ,CAKAuoF,GAAmB52E,EAAuDi1E,EAA2B6B,GACnG,MAAMv+F,EAAS3D,MAAK+gG,IACdp5F,EAAI3H,KAAKqD,IAAI8a,WAAW,qBAAsB,SAAUne,KAAKe,UAAW,CAAEs/F,kBAAiB18F,SAAQu+F,cACzG,GAAuB,MAAnB7B,GAAsD,IAA3BA,EAAgBr2F,OAC7C,OAAOrC,EAAE8R,IAAI,uCAGf2R,EAAOvL,OAAOoK,KAAa/e,KAAM+e,EAAO/e,KAAM0S,SAAS,KAEvD5d,KAAK0gG,eAAe/8F,EAAQ08F,EAAiB6B,GAC1C55F,UAAU65F,IACT,MAAMx6F,EAAI3H,KAAKqD,IAAIib,GAAG,0BAA2B,CAAE+hF,kBAAiB8B,cAC9Dl4E,EAASmB,IACfA,EAAOvL,OAAOoK,KACZ/e,KAAM,IAAI,IAAIuhF,IAAI,IAAIxiE,EAAO/e,QAASi3F,EAAUj3F,MAAMzK,IAAIP,GAAQ,CAACA,EAAKya,MAAOza,KAAQgkB,UACvFtG,SAAS,KAEXjW,EAAEuc,OAAO,CAAE+F,SAAQk4E,UAAWA,EAAWroE,OAAQ1O,IAASlgB,MAAM,GAEpEvD,EAAE8R,KACJ,iDA1GoBmnF,EAAoB,sCAApBA,EAAoB3/F,QAApB2/F,EAAoB1/F,WAAA,SAApB0/F,CAAqB,KCpB9BwB,GAAoB,MAA3B,MAAOA,UAA4BxB,GAIvC/gG,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAAEqiG,uBAAuB3B,IAItCzgG,KAAKmgG,gBACP,CAKmBO,eAAe2B,EAAmBC,EAAkBC,GACrE,MAAMplF,EAAWnd,KAAKmd,YACdqlF,iBAAkBC,EAAYC,iBAAkBC,EAAYC,WAAYpwF,GAAS2K,EAEnFxV,EAAI3H,KAAKqD,IAAIC,KAAK,iBAAkB,CAAE6Z,YAAYolF,GAElDM,GAAarwF,GAAQ,IAAIjR,oBACzBuhG,EAAuB,QAAdD,EACX,UACgB,YAAdA,EACE,UACA,QAGFE,EAAY/iG,KAAKsgG,iBAAiB,CAAE19F,MAAOua,EAASva,OAAS,aAE7DsI,GAAOlL,KAAK6gG,SAASmC,aAAa,oBAAoBF,IAAU,cAAcL,YAAqBE,IAAc,IAAI9+F,QACzHpD,KAAIkqB,MAGOzf,KADIyf,GAAKm4E,GAAQriG,IAAI8e,IAAUwjF,EAAUzH,gBAAgB,CAAE/7E,UAAQm9E,WAAYoG,EAAQnG,kBAAkB,KACnG/+E,SAAS,MAG5B,OAAOjW,EAAEsY,EAAE/U,GACb,iDApCWk3F,EAAmB,sCAAnBA,EAAmBnhG,QAAnBmhG,EAAmBlhG,WAAA,SAAnBkhG,CAAoB,KCIpBa,GAAqB,MAA5B,MAAOA,UAA6B/mF,GAMxCrc,cAAgBC,QAJhBE,KAAAqD,OAAMtD,MAAS,CAACkjG,wBAAuBlnF,IAE7B/b,KAAA2b,iBAAgBnU,KAAU46F,GAEX,CAEzBhnF,aACEpb,KAAKub,aAAaikF,eACpB,iDAVWyD,EAAoB,sCAApBA,EAAoBhiG,QAApBgiG,EAAoB/hG,WAAA,SAApB+hG,CAAqB,oBCN9BC,GAAe,sBACfC,GAAkBtF,OAAOqF,GAAanhF,QAwB1C,MAAAqhF,GAPA,SAASC,GAAap9E,GACpBA,YAAStN,MAASsN,KACAk9E,GAAgBG,KAAKr9E,GACnCA,EAAOrS,QAAQsvF,GAAc,QAC7Bj9E,CACN,iBCzBA,MAAMnjB,GAAW,CACfC,KAAK,EACLwgG,mBAAmB,GAIf,SAAUA,GAAkBC,EAAqBC,GAIrD,MAAM97F,KAFM5H,MAAS,CAAEwjG,sBAAqBzgG,IAE9BQ,KAAK,oBAAqB,CAAEkgG,cAAaC,eAEvD,IAAKD,EACH,MAAO,GAET,MAAME,EAiDR,SAASC,GAAWH,GAClB,IAAKA,EACH,OAAO,IAAI3F,OAAO+F,IAGpB,GAAIJ,EAAYt2F,SAAS,KACvB,OAAO,IAAI2wF,OAAO2F,EAAa,KAGjC,MAAME,EAAQG,GAA8BL,EAAa,SAEzD,OAAO,IAAI3F,OAAO6F,EAAO,IAC3B,CA7DgBC,CAAWH,GACzBr1E,QAAQC,KAAKs1E,GAEb,MAAMI,EAwFR,SAASC,KAIP,OAHgC/iF,MAAM60B,KAAKxiC,SAAS2wF,aACjDvjG,IAAIwjG,IACJxhG,OAAOyhG,QAEZ,CA7FmBH,GACXI,EAA0B,GAC1BC,EAA6C,GACnD,UAAW/G,KAASyG,EAAU,CAC5B,MAAMO,EAAwBrjF,MAAM60B,KAAKwnD,GACtC56F,OAAO6hG,GAAQA,EAAKC,cAEvB,UAAWD,KAAQD,EAAsB,CAGvC,MAAMG,EAAWF,EAAKC,aAItBb,EAAMe,UAAY,EAClB,MAAMC,EAAShB,EAAMrE,KAAKmF,IAAWE,OAGrC,IAAKA,EACH,SAEFv2E,QAAQ9qB,IAAI,UAAWqhG,EAAO9hG,MAAO8hG,EAAOC,SAAUD,EAAOzH,OAE7D,MAAM2H,GAAYF,EAAOC,SAErBP,EAAkBQ,MAEtBT,EAAUz3F,KAAK,CACb5B,GAAI,KACJ3K,KAAM,KACN0kG,KAAMP,KACHI,EACHI,SAAUN,IAEZJ,EAAkBQ,KAAa,EACjC,CACF,CAEAj9F,SAAEO,EAAE,oBAAqB,CAAE68F,YAAavB,EAAaC,aAAYU,cAE1Dx8F,EAAEsY,EAAEkkF,EACb,CAEA,MAAMP,GAAgB,4DAiBhB,SAAUC,GAA8BmB,EAAgBvqF,GAC5D,OAAKuqF,EAEc,GAIrB,SAASC,GAAqBD,GAC5B,IAAKA,EACH,MAAO,GAGT,MAEME,EAAiBF,EAAOx4F,WAAW,KACnC24F,EAAkBD,EAAiBF,EAAOn5E,UAAU,GAAKm5E,EAGzDI,EAAY,YAAY/B,GAAa8B,+BAM3C,MADiB,eAFOD,EAAiB,GAAG7B,GAAa,OAAO+B,IAAcA,IAIhF,CAvBmBH,CAAqBD,KACLvqF,IAFb,EAItB,CA8BA,SAASwpF,GAAYoB,GACnB,IAAKA,EAAO,OAAO,KAGnB,IACE,OAAOA,EAAMhI,KACf,OAAkB,CAGlB,IACE,OAAOgI,EAAMC,QACf,OAAkB,CAElB,OAAO,IACT,CCzHA,MAAMxiG,GAAW,IACZy8F,GACHr0F,MAAM,EACNu0F,gBAAgB,EAChBC,kBAAkB,EAClBrkF,OAAQ,IAAIkkF,GAAuBlkF,OAAQ,MAItC,IAAMkqF,GAAc,MAArB,MAAOA,UAAsB5F,GAIjC9/F,YAAoB2lG,GAClB1lG,QADkBE,KAAAwlG,uBAFpBxlG,KAAAqD,OAAMtD,MAAS,CAAEwlG,iBAAiBziG,IAgBlC9C,KAAA4d,WAAUpC,OAAU,WAAW,GAE/Bxb,MAAAkpC,EAAYlpC,KAAK0c,WAAWS,SAC5Bnd,MAAAylG,KAAgBjqF,OAAyB,cAAe,IAExDxb,KAAA0/F,oBAAmBhkF,OAAY,mBAAoB,OAAMwG,MAAQliB,MAAKkpC,IAAapmB,KACjF4iF,cAAe5iF,EAAE4iF,cACjBC,kBAAmB7iF,EAAE6iF,kBACrBrH,aAAcx7E,EAAEw7E,aAChB17F,MAAOkgB,EAAElgB,UAKX5C,MAAA4lG,QAEE,MAAM9iF,EAAI9iB,KAAKmd,WAEf,OADmB,IAAIw+E,GAAsB37F,KAAKe,UAAW,IAAK+hB,EAAGu7E,MAAOv7E,EAAEu7E,OAAS,SAAWr+F,KAAKwhB,SAAUxhB,KAAKyG,WAAYzG,KAAKqD,IAEzI,EALAuiG,GAOA5lG,KAAAkL,QAAOwQ,OAAY,OAAQ,KAEzB,MAAMkH,EAAU5iB,MAAKylG,IACfI,EAAa7lG,MAAK4lG,EAElBj+F,EAAI3H,KAAKqD,IAAI8a,WAAW,OAAQ,SAAUne,KAAKe,UAAW,CAAE6hB,UAASijF,eAErErhG,EAASoe,EAAQniB,IAAI8e,IACzB,MAAMumF,EAAaD,EAAWvK,gBAAgB,CAAE/7E,SAAQm9E,WAAY,KAAMC,kBAAkB,IAC5Fh1F,SAAEO,EAAE,WAAY,CAAEqX,SAAQumF,eACnBA,IAET,OAAOn+F,EAAEsY,EAAEzb,EAAM,GA7CjBxE,KAAKmgG,iBACLngG,KAAKqD,IAAIC,KAAK,mBAAoBtD,KAAK0/F,oBAEvC,MAAMviF,EAAWnd,KAAK0/F,mBACtB1/F,KAAKwlG,qBAAqBz8F,KAAKoU,EAASuoF,cAAcj5F,MAAM,MAAO,KACjE,MAAMgzF,EAAiB8D,GAAkBpmF,EAASwoF,mBAAmB,GACrE3lG,KAAKqD,IAAIC,KAAK,iBAAkB,CAAE6Z,WAAUsiF,mBAC5Cz/F,MAAKylG,EAAcp8F,IAAIo2F,EAAc,EAGzC,CAIAv2D,GACAu8D,GAWAG,mDAhCWL,GAAa7gG,MAAAC,IAAA,sCAAb4gG,EAAatkG,QAAbskG,EAAarkG,WAAA,SAAbqkG,CAAc,KCTdQ,GAAe,MAAtB,MAAOA,UAAuB/qF,GAMlCnb,cACEC,QALFE,KAAAqD,OAAMtD,MAAS,CAAEgmG,kBAAkB/qF,GAAgBlY,UAEzC9C,KAAA2b,iBAAgBnU,KAAU+9F,IAO7BvlG,KAAAqd,cAAa7B,OAAU,WAAY,CAAEiF,MAAM,EAAOnD,QAAQ,EAAOsC,QAAQ,IAH9E5f,KAAKqD,IAAIC,KAAK,cAChB,CAIA8X,aACEpb,KAAKqD,IAAIC,KAAK,cACdtD,KAAKub,aAAaikF,eACpB,CAEAngF,WAAWC,GACT,MAAM,IAAIkR,MAAM,0BAClB,CAEAxU,SAASwC,EAAuDC,GAC9D,MAAM,IAAI+R,MAAM,0BAClB,iDAxBWu1E,EAAc,sCAAdA,EAAc9kG,QAAd8kG,EAAc7kG,WAAA,SAAd6kG,CAAe,KCAfC,GAAgB,MAAvB,MAAOA,UAAwBrG,GAInC9/F,cAAgBC,QAFhBE,KAAAqD,OAAMtD,MAAS,CAACimG,oBAIhBhmG,KAAA4d,WAAUpC,OAAU,WAAW,GAE/Bxb,MAAAimG,KAASzqF,OAAU,QAAS,8CAOZxb,KAAAkL,QAAOwQ,OAAY,OAAQ,IAAM,CAAC,CAChDf,MAAO,GACPD,MAAO1a,MAAKimG,KAAY,uBACxBC,eAAe,EACfrrF,WAAW,KAfY7a,KAAKmgG,gBAAiB,CAI/C8F,GAEOE,SAASzrF,GACd,OAAA1a,MAAKimG,EAAO58F,IAAIqR,GACT1a,IACT,iDAbWgmG,EAAe,sCAAfA,EAAe/kG,QAAf+kG,EAAe9kG,WAAA,SAAf8kG,CAAgB,KCChBI,GAAiB,MAAxB,MAAOA,UAAyBprF,GAMpCnb,cAAgBC,QAJhBE,KAAAqD,OAAMtD,MAAS,CAACqmG,oBAAmBprF,GAAgBlY,UAEzC9C,KAAA2b,iBAAgBnU,KAAUw+F,IAI7BhmG,KAAAqd,cAAa7B,OAAU,WAAY,CAAEiF,MAAM,EAAOnD,QAAQ,EAAOsC,QAAQ,GAFxD,CAIR1E,aAAavB,GAC3B,OAAA3Z,KAAK2b,cAAcwqF,SAAS,gCACrBrmG,MAAMob,aAAavB,EAC5B,CAEOsB,aACL,MAAMtT,EAAI3H,KAAKqD,IAAIC,KAAK,cACxB,OAAAtD,KAAKub,WAAWlS,IAAIrJ,KAAK2b,cAAcwqF,SAAS,iCACzCx+F,EAAEyR,QAAQpZ,KACnB,CAEAob,aACEpb,KAAKqD,IAAI6E,EAAE,cACXlI,KAAKub,aAAaikF,eACpB,CAEAngF,WAAWC,GACT,MAAM,IAAIkR,MAAM,0BAClB,CAEAxU,SAASwC,EAAuDC,GAC9D,MAAM,IAAI+R,MAAM,0BAClB,iDAhCW41E,EAAgB,sCAAhBA,EAAgBnlG,QAAhBmlG,EAAgBllG,WAAA,SAAhBklG,CAAiB,KCHjBC,GAAiB,MAAxB,MAAOA,UAAyBzF,GAIpC/gG,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAAEsmG,oBAAoB5F,IAInCzgG,KAAKmgG,gBACP,CAKmBO,eAAea,EAAkBQ,EAAiBQ,GACnE,MAAMlnF,EAASrb,KAAKwgG,iBAAiBxgG,KAAKmd,YAIpCmpF,EAAatmG,KAAK0c,WAAWnX,OAAOqkB,eACpC+yE,EAAmB2J,EAAWC,YAEpC,IAAI5+F,EAAI3H,KAAKqD,IAAIC,KAAK,iBAAkB,CAAEi+F,WAAUQ,QAAO1mF,SAAQ9M,UAAW+3F,EAAW/3F,UAAWouF,oBAAoB4F,GACxH,MAAMQ,EAAY/iG,KAAKsgG,mBACjBkG,EAAWxmG,KAAK6gG,SAAS4F,YAAY,CAAEC,aAAc,CAACnF,GAAWoF,QAAS5E,EAAO1mF,SAAQhY,IAAKrD,KAAKqD,IAAIgR,OAC1GxQ,QAECpD,KAAIkqB,KAEOzf,KADIyf,EAAKi8E,QAAQnmG,IAAI8e,IAAUwjF,EAAUzH,gBAAgB,CAAE/7E,UAAQm9E,WAAY,KAAMC,mBAAkBC,qBAAqB,KACtHh/E,SAAS,MAG9B,OAAOjW,EAAEsY,EAAEumF,EACb,iDA/BWH,EAAgB,sCAAhBA,EAAgBplG,QAAhBolG,EAAgBnlG,WAAA,SAAhBmlG,CAAiB,KCAjBQ,GAAkB,MAAzB,MAAOA,UAA0B3qF,GAMrCrc,cAAgBC,QAJhBE,KAAAqD,OAAMtD,MAAS,CAAC8mG,qBAAoB9qF,IAE1B/b,KAAA2b,iBAAgBnU,KAAU6+F,GAEX,CAEhBroF,aACPhe,KAAK2b,cAAcsmF,UAAUjiG,KAAKkO,cACpC,CAEAkN,aACEpb,KAAKge,aACLhe,KAAKub,aAAaikF,eACpB,iDAfWqH,EAAiB,sCAAjBA,EAAiB5lG,QAAjB4lG,EAAiB3lG,WAAA,SAAjB2lG,CAAkB,oBCWxB,IAAMC,GAAgB,MAAvB,MAAOA,UAAwBlG,GAInCj/E,GAEA9hB,cACEC,QALFE,KAAAqD,OAAMtD,MAAS,CAAC+mG,mBAAkBrG,IAElCzgG,MAAA2hB,KAAarF,OAAOE,MAOVxc,KAAA+mG,aAAYzqF,OAAOC,KAC7Bvc,MAAAgnG,EAAS54B,OAAOpuE,KAAK+mG,UAAUxhG,OAAO3B,OACtC5D,MAAAinG,KAAcvrF,OAAY,aAAc,IAAM1b,KAAKmd,WAAW+pF,YAL5DlnG,KAAKmgG,gBACP,CAGA6G,GACAC,GAKmBvG,eAAe/8F,EAAgBo+F,EAAiBQ,GACjE,IAAI56F,EAAI3H,KAAKqD,IAAI8a,WAAW,iBAAkB,SAAUne,KAAKe,UAAW,CAAE4C,SAAQo+F,SAASQ,GAE3F,MAAM4E,EAAOnnG,KAAKmd,WACZu/E,EAAa18F,MAAKinG,IAClBG,EAAYD,EAAKE,MACjBC,EAAaF,EACfA,EAAUl6F,SAAS,KAAOi6F,EAAKE,MAAQ,GAAGF,EAAKE,SAAS3K,IACxD,KAEJ/0F,EAAEO,EAAE,WAAY,CAAEk/F,YAAW1K,aAAY4K,aA8BzC,MAAM9iG,GAzBC8iG,GAiBL3/F,EAAEO,EAAE,uBAAwB,CAAEo/F,aACvBtnG,KAAK6gG,SACTmC,aAAasE,EAAU3jG,EAAQ3D,KAAKwgG,iBAAiBxgG,KAAKmd,YAAa4kF,GACvEl+F,QACCpD,KAAIyK,KAAWA,OAAM0S,SAAS,QApBhCjW,EAAEO,EAAE,wCAAqC,EAClCsmE,OAAkC,CACvCtjE,KAAM,CACJ07F,QAAW,CACT,CACE97F,IAAI,EACJ3K,KAAM,KACN88F,MAAOj9F,MAAK2hB,EAAWnR,QAAQ,uCAIrCoN,SAAS,MAaO/Z,QACpBpD,KAAI4I,KACF6B,KAAMlL,MAAKunG,EAAel+F,EAAI6B,KAAMwxF,GACpC9+E,QAASvU,EAAIuU,YAGjB,OAAOjW,EAAEsY,EAAEzb,EACb,CAGA+iG,GAAer8F,EAAoBwxF,GAEjC,MAAM/0F,EAAI3H,KAAKqD,IAAIib,GAAG,gBAAiB,CAAEpT,OAAMwxF,eAC/C,IAAKxxF,EACH,OAAOvD,EAAEsY,EAAE,CAAC3F,GAAkB/J,QAAQvQ,MAAK2hB,EAAY,mCAAoC,gBAI7F,MAAM2kF,EAAatmG,KAAK0c,WAAWnX,OAAOqkB,eACpC+yE,EAAmB2J,EAAWC,YAC9BiB,EAAc9K,EAAWjwF,MAAM,KACrC9E,EAAEuc,OAAO,CAAE3V,UAAW+3F,EAAW/3F,UAAWouF,mBAAkB6K,gBAG9D,MAAM/pF,EAAS+pF,EACZ/kG,OAAOi6F,IAAexxF,EAAKwxF,IAC3Bj8F,IAAIi8F,GAAcpiF,GAAkBC,YAAYva,MAAK2hB,EAAY,oCAAqC,IAAM+6E,IAGzGmJ,EAAa7lG,KAAKsgG,mBAClBp+F,EAAQslG,EACX/kG,OAAOi6F,GAAcxxF,EAAKwxF,IAC1Bl3E,OAAO,CAACC,EAAKi3E,MACZ,MAAM+K,GAAYv8F,EAAKwxF,IACpBj8F,IAAI8e,IAAUsmF,EAAWvK,gBAAgB,CAAE/7E,UAAQm9E,cAAYC,mBAAkBC,qBAAqB,KACzG,OAAOn3E,EAAI9S,OAAO80F,GAAS,EAC1B,IAGCC,EAAqB1nG,MAAK2nG,EAAgBzlG,GAGhD,OAAOyF,EAAEsY,EAAE,IAAIxC,KAAWiqF,GAC5B,CAEAC,GAAsCC,GACpC,OAAIA,GACFA,EAAcz1F,QAAQsS,IACpB,MAAM7gB,EAAQ6gB,EAAEvZ,MAAM28F,MACtBpjF,EAAE1J,OAAkB,MAATnX,GAAiBA,IAAU5D,MAAKgnG,EAC3CviF,EAAE3J,SAAW2J,EAAE1J,SAEZ6sF,CACT,iDA/GWd,EAAe,sCAAfA,EAAe7lG,QAAf6lG,EAAe5lG,WAAA,SAAf4lG,CAAgB,KCThBgB,GAAiB,MAAxB,MAAOA,UAAyB5rF,GAMpCrc,cAAgBC,QAJhBE,KAAAqD,OAAMtD,MAAS,CAAC+nG,oBAAmB/rF,IAEzB/b,KAAA2b,iBAAgBnU,KAAUs/F,IASpC9mG,MAAA8c,KAAkBtV,KAAUuV,MAAWC,WAAWhd,KAAKqD,IAAIgR,KAAMrU,KAAK0c,WAAWO,WAAW,iBAPnE,CAOzBH,GAESkB,aACPhe,KAAK2b,cAAcsmF,UAAUjiG,MAAK8c,GAAiBtY,SACrD,CAEA4W,aAIE,GAHUpb,KAAKqD,IAAI8a,WAAW,aAAc,SAAUne,KAAKqU,MAC3DrU,KAAKge,aAEAhe,KAAK0c,WAAWS,WAAWkqF,MAKhCrnG,KAAK2b,cAAc6jF,oBALnB,CACE,MAAM/hF,EAAS,CAACnD,GAAkBC,YAAYva,KAAK+G,UAAW,kCAC9D/G,KAAKwd,aAAanU,IAAIoU,EAExB,CAEF,iDA7BWqqF,EAAgB,sCAAhBA,EAAgB7mG,QAAhB6mG,EAAgB5mG,WAAA,SAAhB4mG,CAAiB,KCJ9B,MAAMhlG,GAAW,IACZy8F,GACHr0F,MAAM,GAID,IAAM68F,GAAiB,MAAxB,MAAOA,UAAyBpI,GAIpC9/F,cACEC,QAHFE,KAAAqD,OAAM2kG,MAAgB,CAACD,oBAAmBjlG,IAO1C9C,KAAA4d,WAAUpC,OAAU,WAAW,GAO/Bxb,MAAA4lG,EAAyB5lG,KAAKsgG,iBAAiB,CAAE19F,MAAO,UAExD5C,KAAAkL,QAAOwQ,OAAY,OAAQ,KACzB,MAAMkH,EAAU5iB,KAAKmd,WAAWk7E,SAC1BwN,EAAa7lG,MAAK4lG,EAClBj+F,EAAI3H,KAAKqD,IAAI8a,WAAW,OAAQ,SAAUne,KAAKe,UAAW,CAAE6hB,UAASijF,eACrErhG,EAASoe,EAAQniB,IAAIwnG,IACzB,MAAM1oF,EAAsB,CAC1BzU,GAAI,KACJ3K,KAAM,QACH8nG,GAECnC,EAAaD,EAAWvK,gBAAgB,CAAE/7E,SAAQm9E,WAAY,KAAMC,kBAAkB,IAC5Fh1F,SAAEO,EAAE,WAAY,CAAEqX,SAAQumF,eACnBA,IAET,OAAOn+F,EAAEsY,EAAEzb,EAAM,GA1BjBxE,KAAKmgG,gBACP,CASAyF,mDAhBWmC,EAAgB,sCAAhBA,EAAgB9mG,QAAhB8mG,EAAgB7mG,WAAA,SAAhB6mG,CAAiB,KCFjBG,GAAkB,MAAzB,MAAOA,UAA0BltF,GAMrCnb,cAAgBC,QAJhBE,KAAAqD,OAAMtD,MAAS,CAACmoG,qBAAoBltF,GAAgBlY,UAE1C9C,KAAA2b,iBAAgBnU,KAAUugG,IAI7B/nG,KAAAqd,cAAa7B,OAAU,WAAY,CAAEiF,MAAM,EAAOnD,QAAQ,EAAOsC,QAAQ,GAFxD,CAIxBxE,aACEpb,KAAKqD,IAAIC,KAAK,cACdtD,KAAKub,aAAaikF,eACpB,CAEAngF,WAAWC,GACT,MAAM,IAAIkR,MAAM,0BAClB,CAEAxU,SAASwC,EAAuDC,GAC9D,MAAM,IAAI+R,MAAM,0BAClB,iDArBW03E,EAAiB,sCAAjBA,EAAiBjnG,QAAjBinG,EAAiBhnG,WAAA,SAAjBgnG,CAAkB,KCKxB,MAAMC,GAAuB,CAClCplG,KAAK,EACL0/C,aAAa,EACbjgD,KAAK,EACL6G,KAAK,EACLqX,QAAQ,EACR0nF,SAAS,EACTtsF,eAAe,EACf0G,eAAe,EACf6lF,YAAY,EACZC,mBAAmB,EACnBC,gBAAgB,EAChBC,aAAa,EACbC,yBAAyB,EACzBptF,OAAQ,IAAIC,KAAa,UAIpB,IAAMotF,GAAY,MAAnB,MAAOA,EAMXC,GACArrD,GAEAz9C,cALAG,KAAAqD,OAAMtD,MAAS,CAAC2oG,gBAAeP,IAE/BnoG,MAAA2oG,KAAiBrsF,OAAOC,KACxBvc,MAAAs9C,KAAchhC,OAAOK,MAqBF3c,KAAAmd,SAAWnd,MAAKs9C,EAAYngC,SAGxCnd,KAAAqd,cAAa7B,OAAU,WAAY,IAM1Cxb,MAAA4oG,KAAkBltF,OAAY,iBAC5B,OAAMwG,MAAQliB,KAAKmd,WAAWC,YAC5ByrF,GAAMA,EAAGp8F,MAAMo8F,EAAGla,QAAQ,OAAQ,EAAK,KAAO,MAAMlsF,OAAOyhG,UAGxDlkG,KAAAwoG,eAAc9sF,OAAY,cAAe,KAC9C,MAAMoI,EAAM9jB,MAAK4oG,IAAkBnoG,IAAK8X,KAAoBmC,MAAO,KAAMnC,UAEnE5Q,EAAI3H,KAAKqD,IAAI8a,WAAW,cAAe,SAAUne,MAAK8oG,EAAY,CAAEhlF,QAIpEilF,EAAUjlF,EAAIrjB,IAAIuoG,IACtB,MAAMzwF,EAAOywF,EAAKzwF,KACZ0pB,EAAKjiC,MAAK2oG,EAAexrF,SAAS1S,aACrC/B,KAAKu5B,GAAMA,EAAGn3B,KAAOyN,GAAQ0pB,EAAG3zB,MAAQiK,GAC3C,MAAO,IACFywF,EAEHtuF,OAAQunB,GAAIg7D,OAASh7D,GAAI3zB,MAAQ,GAAGiK,iBAAoB3E,QAAQ,sBAAuB,IACvF2E,KAAM0pB,GAAIn3B,IAAMyN,KAGpB,OAAO5Q,EAAEsY,EAAE8oF,EAAO,GAQb/oG,KAAAikB,mBAAkBzI,OAA2B,qBAAmBA,OAAU,WAAW,IASrFxb,KAAAwiB,iBAAkC9G,OAAY,gBAAiB,KACpE,MAAMylC,EAAUnhD,MAAKs9C,EAAY6D,UACjCnhD,KAAKqD,IAAIC,KAAK,gBAAiB,CAAE69C,YACjC,MAAM8nD,EAAOjpG,KAAK8qB,OAAOo+E,KAAK/nD,GACxBgoD,EAAoBnpG,KAAKikB,iBAALjkB,GAI1B,OAH+B,GAAfipG,EAAKj/F,QAAem/F,EAChC,CAAC,IACDF,IAmBCjpG,KAAAkkB,UAASxI,OAAY,SAAU,IACvB1b,KAAK8qB,OAAOo+E,KAAKlpG,MAAKs9C,EAAY6D,WA/FjC,CAETvlC,MAAM7a,EAAmBqoG,GAC9B,OAAAppG,MAAK8oG,EAAa/nG,EAClBf,KAAK8qB,OAASs+E,EACPppG,IACT,CASA8oG,GAaAF,GAqDAS,GAEOd,eAAee,GACpB,MAAM3hG,EAAI3H,KAAKqD,IAAIC,KAAK,kBACxB,OAAAtD,MAAKqpG,EAA0BC,EACxB3hG,EAAEyR,QAAQpZ,KACnB,CAgBAupG,GAAaC,GACX,MAAM7hG,EAAI3H,KAAKqD,IAAI8a,WAAW,cAAe,SAAUne,MAAK8oG,GAItDlH,EAAW4H,EADE,IAAIxpG,KAAKkkB,WAEtBolD,EAAWtpE,KAAK8qB,OAAOy7D,QAAQqb,GACrC5hG,MAAKs9C,EAAYK,KAAK+E,aAAa4mB,GACnC3hE,EAAE8R,IAAI,GAAI,CAAE6vD,YACd,CAEO9mE,IAAImY,GACT3a,KAAKqD,IAAI8a,WAAW,MAAO,SAAUne,MAAK8oG,EAAY,CAAEnuF,UACxD3a,MAAKupG,EAAa5+E,GAAS3qB,KAAKwhB,WAAWhB,WAAc,IAAImK,EAAMhQ,GAAS,CAACA,GAC/E,CAEOtR,IAAI6a,GACTlkB,KAAKqD,IAAIC,KAAK,MAAO,CAAE4gB,WACvBlkB,MAAKupG,EAAa,IAAMrlF,EAC1B,CAEOulF,QACLzpG,KAAKqJ,IAAI,GACX,CAEO++F,QAAQsB,GACb1pG,KAAKqD,IAAIC,KAAK,UAAW,CAAEomG,mBAC3B1pG,MAAKupG,EAAa5+E,OAChBg/E,OAAgBh/E,EAAM++E,EAAeE,cAAeF,EAAeG,cAC5D,IAAIl/E,IAEf,CAEOjK,OAAO1Y,GACZhI,KAAKqD,IAAIC,KAAK,SAAU,CAAE0E,UAC1BhI,MAAKupG,EAAa5+E,IAChBA,EAAKikE,OAAO5mF,EAAO,GACZ,IAAI2iB,KAIR3qB,KAAKkkB,SAASla,QACjB6+B,WAAW,IAAM7oC,MAAKqpG,IAC1B,CAEOvtF,cAAcwD,GACnBtf,KAAKqD,IAAIC,KAAK,gBAAiB,CAAEgc,UACjCtf,KAAK0gB,OAAOpB,EAAMtX,MACpB,iDAhKW0gG,EAAY,sCAAZA,EAAYznG,QAAZynG,EAAYxnG,WAAA,SAAZwnG,CAAY,KCrBnB,MAAgBoB,GAEpBjqG,YAAsBkB,EAA6Boc,GAA7Bnd,KAAAe,YAA6Bf,KAAAmd,UAAkE,ECPjH,MAAO4sF,WAA0BD,GACrCZ,KAAKvvF,GACH,OAAOA,CACT,CAEA4sE,QAAQplC,GACN,OAAOA,CACT,ECNI,MAAO6oD,WAAiCF,GAI5CZ,KAAKvvF,GACH,OAAgB,MAATA,EACH,GACA,CAACA,EAAMhB,WACb,CAKA4tE,QAAQplC,GACN,MAAM8oD,EAA0B,MAAX9oD,GAAsC,IAAnBA,EAAQn3C,OAC5C,GACA8W,GAAqBqgC,EAASnhD,KAAKmd,WAAWohB,WAE5C2rE,EAAe97B,OAAO67B,GAC5B,OAAOvpB,MAAMwpB,GAAgB,KAAOA,CACtC,ECpBI,MAAOC,WAAiCL,GAI5CZ,KAAKvvF,GACH,OAAiB,MAATA,GAA2B,KAAVA,EACrB,GACAA,EAAMlN,MAAMzM,KAAKmd,WAAWohB,YAAc,EAChD,CAKAgoD,QAAQplC,GACN,OAAmB,MAAXA,GAAsC,IAAnBA,EAAQn3C,OAC/B,GACA8W,GAAqBqgC,EAASnhD,KAAKmd,WAAWohB,UACpD,ECzBK,MAAM6rE,GAAsB,CACjCC,yBAA0B,2BAC1BC,wBAAyB,2BAGdC,GAAgB,IACxBH,GACHI,oBAAqB,sBACrBC,qBAAsB,uBACtBC,wBAAyB,0BACzBC,kBAAmB,qBAGRC,GAAqB,mBCgB5B,MAAOC,GAIXhrG,YAAoBkZ,GAAA/Y,KAAA+Y,WAFpB/Y,KAAAqD,OAAMtD,MAAS,CAAE8qG,oBAAmB,KAEM,CAgB1CC,gBAAgBrgF,EAAwB/N,GACtC,MAAMquF,EAAmBtgF,EACnBugF,EAAiBD,EAAiBE,oBAClC18F,EAAYmO,EAAWnX,OAAOqkB,eAAerb,UAC7C5G,EAAI3H,KAAKqD,IAAIib,GAAG,uBAAwB,CAAEmM,aAAY/N,aAAYnO,YAAWy8F,mBACnF,GAAIA,EACF,OAAOrjG,EAAEyR,QAAQqR,EAAY,0BAE/BsgF,EAAiBE,qBAAsB,EAGvC,MAAMtxF,EAAQ3Z,MAAKkrG,EAAiBxuF,EAAWrI,KAAM9F,EAAWmO,EAAWS,UAErEguF,EAAkBzuF,EAAWS,WAAmDguF,eAChFppF,EAAS/hB,MAAKorG,EAAkB78F,EAAW48F,EAAgBxxF,GAEjE8Q,SAAW7O,MAAMc,EAAWrI,KAAMqI,EAAWS,SAAUxD,EAAOoI,GAK7D0I,EAAW1I,QAAkC9D,oBAEvCtW,EAAEyR,QAAQqR,EACnB,CAEAygF,GAAiBnqG,EAAmBwN,EAAwC4O,GAC1E,MAAMkuF,EAAeC,GAAS/8F,IAAY66F,SAC1C,IAAKiC,EACH,MAAM,IAAI76E,MAAM,8CAA8CjiB,KAEhE,MAAMg9F,KAAe/jG,KAAUkhG,GAAc1oG,KAAK+Y,UAC5CqwF,EAAW,IAAIiC,EAAatqG,EAAWoc,GAC7CouF,SAAa3vF,MAAM7a,EAAWqoG,GACvBmC,CACT,CAEAH,GAAkB78F,EAAwC48F,EAAwBxxF,GAChF,MAAMhS,EAAI3H,KAAKqD,IAAIib,GAAG,mBAAoB,CAAE/P,YAAW48F,mBAEjD/qF,EAAQkrF,GAAS/8F,GAGjBi9F,EAASprF,EAAMqrF,mBAAqBN,EAC1CxjG,EAAEO,EAAE,kBAAmB,CAAEijG,iBAAgBM,kBAAmBrrF,EAAMqrF,kBAAmBD,WAErF,MAAME,EAAkBC,GAAqBH,IAAWpF,GACxDpmG,MAAK4rG,EAAgCr9F,EAAWm9F,GAChD,MAAMlnG,KAASgD,KAAUkkG,EAAiB1rG,KAAK+Y,UAAUmC,aAAavB,GACtE,OAAOhS,EAAEsY,EAAEzb,EACb,CAEAonG,GAAgCr9F,EAAwC48F,GAGtE,GADIA,IAAmB/E,IACnBkF,GAAS/8F,IAAY0+E,SAAS//E,SAASi+F,GAAiB,OAAO,EACnE,MAAM,IAAI36E,MAAM,2DAA2DjiB,MAAc25F,KAC3F,EAIF,MAAMyD,GAAuE,CAC3E,CAACpB,GAAcF,0BAA2BnC,GAC1C,CAACqC,GAAcD,yBAA0BpC,GACzC,CAACqC,GAAcI,mBAAoB5E,GACnC,CAACwE,GAAcC,qBAAsB1C,GACrC,CAACyC,GAAcE,sBAAuB5D,GACtC,CAAC0D,GAAcG,yBAA0BzH,IAQrCqI,GAAoC,CACxC,CAACv1E,KAAiBO,cAAe,CAC/B22D,QAAS,CAACib,GAAmBJ,GAAkBjB,GAAmBd,GAAgB9C,IAClFmG,SAAUe,IAEZ,CAACp0E,KAAiBK,gBAAiB,CACjC62D,QAAS,CAACib,IACVkB,SAAUe,GACVsB,kBAAmBlB,GAAcF,0BAGnC,CAACt0E,KAAiB81E,sBAAuB,CACvC5e,QAAS,CAAC8Y,IACVqD,SAAUe,GACVsB,kBAAmBlB,GAAcI,mBAGnC,CAAC50E,KAAiB+1E,gBAAiB,CACjC7e,QAAS,CAACib,IACVkB,SAAUY,GACVyB,kBAAmBlB,GAAcF,0BAGnC,CAACt0E,KAAiBQ,cAAe,CAC/B02D,QAAS,CAACib,GAAmBJ,GAAkBjB,IAC/CuC,SAAUY,IAEZ,CAACj0E,KAAiBE,qBAAsB,CACtCg3D,QAAS,CAAC6a,IACVsB,SAAUe,GACVsB,kBAAmBlB,GAAcC,qBAEnC,CAACz0E,KAAiBC,eAAgB,CAChCi3D,QAAS,CAAC4Z,IACVuC,SAAUW,GACV0B,kBAAmBlB,GAAcE,sBAEnC,CAAC10E,KAAiBG,aAAc,CAC9B+2D,QAAS,CAAC6a,IACVsB,SAAUW,GACV0B,kBAAmBlB,GAAcC,qBAEnC,CAACz0E,KAAiBI,qBAAsB,CACtC82D,QAAS,CAAC4Z,IACVuC,SAAUW,GACV0B,kBAAmBlB,GAAcE,sBAEnC,CAAC10E,KAAiBM,cAAe,CAC/B42D,QAAS,CAAC4Z,GAAmBiB,GAAkBI,IAC/CkB,SAAUW,sFC9Jd,MAAMgC,GAEFC,UAEAC,eAAiB,IAAIC,OAAe,GAOpCC,QAEAC,SAKAC,aAEAC,YAEA52D,OAAO62D,GACHvsG,KAAKisG,eAAev2D,OAAO11C,KAAKwsG,cAAcD,GAClD,CAEA31F,OAAO21F,GACHvsG,KAAKisG,eAAezmC,OAAOxlE,KAAKwsG,cAAcD,GAClD,CAEAE,SAASF,GACLvsG,KAAKisG,eAAeS,SAAS1sG,KAAKwsG,cAAcD,GACpD,CAEA9zF,WAAW8zF,GACP,OAAOvsG,KAAKisG,eAAen8B,WAAW9vE,KAAKwsG,cAAcD,GAC7D,CAEAI,kBAAkBJ,GACdvsG,KAAKisG,eAAen8B,WAAW9vE,KAAKwsG,cAAcD,IAC5CvsG,KAAK4sG,oBAAoBL,GACzBvsG,KAAK6sG,kBAAkBN,EACjC,CAEAO,cACI9sG,KAAKisG,eAAend,OACxB,CAEA+d,kBAAkBN,GACd,IAAIQ,EAAgB,CAACR,GACrBQ,EAAcrgG,QAAQ1M,KAAKgtG,eAAeT,IAC1CvsG,KAAKisG,eAAezmC,UAAUunC,EAActsG,IAAIka,GAAS3a,KAAKwsG,cAAc7xF,IAChF,CAEAiyF,oBAAoBL,GAChB,IAAIQ,EAAgB,CAACR,GACrBQ,EAAcrgG,QAAQ1M,KAAKgtG,eAAeT,IAC1CvsG,KAAKisG,eAAeS,YAAYK,EAActsG,IAAIka,GAAS3a,KAAKwsG,cAAc7xF,IAClF,CACA6xF,cAAc7xF,GACV,OAAO3a,KAAKmsG,QAAUnsG,KAAKmsG,QAAQxxF,GAASA,CAChD,EAUJ,MAAMsyF,WAAwBlB,GAC1BK,SACAC,aACAzpF,QAEA/iB,YAAYusG,EAAUC,EAAczpF,GAChC9iB,QACAE,KAAKosG,SAAWA,EAChBpsG,KAAKqsG,aAAeA,EACpBrsG,KAAK4iB,QAAUA,EACX5iB,KAAK4iB,UACL5iB,KAAKmsG,QAAUnsG,KAAK4iB,QAAQupF,QAEpC,CAOAa,eAAeT,GACX,MACMW,EAAU,GAOhB,QAASvkG,EARU3I,KAAKgsG,UAAUrd,QAAQ4d,GAQhB,EAAG5jG,EAAI3I,KAAKgsG,UAAUhiG,QAAUhK,KAAKosG,SAASG,GAAYvsG,KAAKosG,SAASpsG,KAAKgsG,UAAUrjG,IAAKA,IAClHukG,EAAQxgG,KAAK1M,KAAKgsG,UAAUrjG,IAEhC,OAAOukG,CACX,CAOAC,YACIntG,KAAKisG,eAAezmC,UAAUxlE,KAAKgsG,UAAUvrG,IAAIs1C,GAAQ/1C,KAAKwsG,cAAcz2D,IAChF,EAmEJ,MAAMq3D,GAA4B,IAAIn8D,MAAe,6BACrD,IAIMo8D,GAAiB,MAAvB,MAAMA,EACFC,iBAAgBhxF,OAAOoiC,OACvB6uD,SAAQjxF,OAAO8wF,GAA2B,CAAE37D,UAAU,IACtD5xC,cAAgB,CAChBowC,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFm/D,EAAiB,EACpHp9D,iBADyFvrC,MAAE,CAAA8N,KACJ66F,EAAiBl/D,UAAA,gCAC3G,OANKk/D,CAAiB,KAevB,MAAMG,GAEFhzD,UAEAizD,MAEAzlG,MAEAi8B,MACApkC,YAAYqL,GACRlL,KAAKw6C,UAAYtvC,CACrB,EAEJ,IAIMwiG,GAAc,MAApB,MAAMA,EAEFn/D,YAAWjyB,OAAOsxE,OAQlB+f,KACA9tG,cAAgB,CAChBowC,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFw/D,EAAc,EACjHz9D,iBAzCyFvrC,MAAE,CAAA8N,KAyCJk7F,EAAcv/D,UAAA,2BAAAkC,OAAA,CAAAs9D,KAAA,mCACxG,OAdKD,CAAc,KAgDpB,SAASE,KACL,OAAOp9E,MAAM,kFACjB,CAUA,IAIMq9E,GAAO,MAAb,MAAMA,EACFC,YAAWxxF,OAAOyxF,OAClB97C,sBAAqB31C,OAAO41C,OAC5B/gB,eAAc70B,OAAO80B,OACrBkhB,QAAOh2C,OAAOi2C,OAEdy7C,WAAa,IAAIz2F,KAEjB02F,YAEAC,gBAEAC,kBAEAC,QAAU,IAAI3hB,IAEd4hB,SAAW,IAAI5hB,IASf6hB,UAAY,IAAI7hB,IAMhB,cAAIlxE,GACA,OAAOvb,KAAKuuG,WAChB,CACA,cAAIhzF,CAAWA,GACPvb,KAAKuuG,cAAgBhzF,GACrBvb,KAAKwuG,kBAAkBjzF,EAE/B,CACAgzF,YAQAE,YAOAC,cAOAC,iBAOAxC,QAIAyC,aAEAC,YAEAC,UAOAC,WAAa,IAAIlP,KAAgB,CAC7BrxE,MAAO,EACP/U,IAAK20D,OAAO4gC,YAGhBC,gBAMAC,gBAAkB,IAAIrP,KAAgB,IAEtCsP,UAAY,IAAItP,KAAgB,MAEhCuP,OAAS,IAAIvP,KAAgB,IAAIpT,KAMjC4iB,iBAAmB,IAAIxP,KAAgB,IACvCyP,sBAAqBhzF,OAAOizF,OAE5BC,YACAC,WAAY,EACZ5vG,cAAgB,CAChB60D,qBACI10D,KAAK0vG,uBACT,CACAC,wBACI3vG,KAAK4vG,+BACL5vG,KAAK6vG,yBACT,CACAp4F,cACIzX,KAAK6uG,YAAYvB,cAAcxe,QAC/B9uF,KAAK+uG,WAAWr3F,WAChB1X,KAAKguG,WAAW3zF,OAChBra,KAAKguG,WAAWt2F,WACZ1X,KAAKuuG,aAAsD,mBAAhCvuG,KAAKuuG,YAAY3uD,YAC5C5/C,KAAKub,WAAWqkC,WAAW5/C,MAE3BA,KAAKmuG,oBACLnuG,KAAKmuG,kBAAkB15D,cACvBz0C,KAAKmuG,kBAAoB,MAI7BnuG,KAAKwvG,aAAahkB,SACtB,CACAt8C,WACIlvC,KAAK8vG,yBACL9vG,KAAK+vG,uBACT,CACAx7D,kBACIv0C,KAAKyvG,WAAY,CACrB,CACAG,+BACI,MAAMI,EAAkBhwG,KAAK8uG,UAAUrsG,OAAOwtG,IAAQA,EAAItC,MAI1D3tG,KAAKkuG,gBAAkB8B,EAAgB,EAC3C,CAOAE,oBAAoBC,GAEI,OADAnwG,KAAKmvG,UAAUx0F,OAE/B3a,KAAKmvG,UAAU90F,KAAK81F,EAO5B,CAMA3B,kBAAkBjzF,GACVvb,KAAKuuG,aAAsD,mBAAhCvuG,KAAKuuG,YAAY3uD,YAC5C5/C,KAAKub,WAAWqkC,WAAW5/C,MAE3BA,KAAKmuG,oBACLnuG,KAAKmuG,kBAAkB15D,cACvBz0C,KAAKmuG,kBAAoB,MAGxB5yF,GACDvb,KAAK6uG,YAAYvB,cAAcxe,QAEnC9uF,KAAKuuG,YAAchzF,EACfvb,KAAK8uG,WACL9uG,KAAK6vG,yBAEb,CACAO,qBACI,OAAKpwG,KAAKyuG,YAIHzuG,KAAKyuG,YAAYxC,gBAHpBjsG,KAAKivG,kBAAoB,IAAI/C,OAAe,GACrClsG,KAAKivG,gBAGpB,CAEAY,0BACI,GAAI7vG,KAAKmuG,kBACL,OAEJ,IAAIkC,GAUJ,EATIC,OAAatwG,KAAKuuG,aAClB8B,EAAarwG,KAAKuuG,YAAYgC,QAAQvwG,OAAI,EAErCwwG,MAAaxwG,KAAKuuG,aACvB8B,EAAarwG,KAAKuuG,YAEbvtF,MAAMC,QAAQjhB,KAAKuuG,eACxB8B,KAAa7hC,OAAGxuE,KAAKuuG,cAEpB8B,IAMLrwG,KAAKmuG,kBAAoBnuG,KAAKywG,eAAeJ,GACxCxsG,QAAK6sG,MAAU1wG,KAAKguG,aACpB1lG,UAAUqoG,IACX3wG,KAAK4wG,mBAAmBD,EAAa,GAE7C,CAEAF,eAAeJ,GACX,MAAMpE,EAAiBjsG,KAAKowG,qBAC5B,SAAO/O,MAAc,CACjBgP,EACArwG,KAAKmvG,UAGLlD,EAAe1hF,QAAQ1mB,QAAK+wD,MAAU,OAAI,EAAGxwD,KAAIysG,IAC7C7wG,KAAK8wG,sBAAsBD,EAAgB,MAEhDhtG,QAAKy9F,MAAU,EAAEp2F,EAAM8qC,KACL,OAAbA,GAAa,EACNw4B,OAAG,CAAEuiC,YAAa7lG,EAAM8lG,eAAgB,KAAMh7D,aAIlDh2C,KAAKixG,sBAAsB/lG,EAAM8qC,GAAUnyC,QAAKpD,KAAIywG,QAAuBA,EAAel7D,gBAEzG,CACA46D,mBAAmB1lG,GACO,OAAlBA,EAAK8qC,UAMTh2C,KAAKmxG,kBAAkBjmG,EAAK8lG,gBAC5BhxG,KAAKoxG,kBAAkBlmG,EAAK6lG,aAC5B/wG,KAAKqxG,uBAAuBnmG,EAAK8lG,iBAP7BhxG,KAAKoxG,kBAAkBlmG,EAAK6lG,YAQpC,CACAD,sBAAsBD,GAClB,IAAKA,EACD,OAEJ,MAAMS,EAAQtxG,KAAKovG,OAAOz0F,MAC1B,UAAW42F,KAASV,EAAiBU,MACpBD,EAAMvrG,IAAIwrG,IACjBC,qBAAoB,GAE9B,UAAWC,KAAWZ,EAAiBY,QACtBH,EAAMvrG,IAAI0rG,IACjBD,qBAAoB,EAElC,CACA9B,wBACI,MAAMxtG,KAAQm/F,MAAc,CAACrhG,KAAKqvG,iBAAkBrvG,KAAKovG,SAASvrG,QAAKpD,KAAI,EAAEixG,EAAiBX,KAAiBW,EAAgBlsF,OAAO,CAACtjB,EAAOgJ,KAC1I,MAAM6qC,EAAOg7D,EAAYhrG,IAAI/F,KAAK2xG,iBAAiBzmG,IACnD,OAAI6qC,GACA7zC,EAAMwK,KAAKqpC,GAER7zC,GACR,MAOHlC,KAAKwvG,YAAcxvG,KAAKsvG,mBAAmBptG,EANjB,CACtBiqG,QAASp2D,GAAQ/1C,KAAK2xG,iBAAiB57D,EAAK7qC,MAC5C0mG,cAAe77D,KAAUA,EAAKsF,WAC9Bw2D,2BAA2B,EAC3BC,sBAAuB9xG,KAAKsyD,KAAK33C,OAGzC,CACAo1F,wBAEI,MAAM5D,EAAUnsG,KAAKmsG,WAAa4F,EAAQ7xG,IAASF,KAAK2xG,iBAAiBzxG,IACzEF,KAAKiuG,YAAcjuG,KAAK8tG,SAASplG,KAAK,IAAI4U,OAAO6uF,EACrD,CACA2D,yBAqBA,CAEAsB,kBAAkBlmG,EAAM8mG,EAAahyG,KAAKiuG,YAAaX,EAAgBttG,KAAK6uG,YAAYvB,cAAe2E,GACnG,MAAMxxE,EAAUuxE,EAAWp8B,KAAK1qE,IAQ3Bu1B,IAAYzgC,KAAKyvG,YAGtBhvE,GAASyxE,iBAAiB,CAAChyG,EAAMiyG,EAAuBtI,KACpD,GAA0B,MAAtB3pG,EAAK0pG,cACL5pG,KAAKoyG,WAAWlnG,EAAK2+F,GAAeA,EAAcyD,EAAe2E,QAAU,GAEtD,MAAhBpI,EACLyD,EAAc5sF,OAAOyxF,OAEpB,CACD,MAAMxyC,EAAO2tC,EAAcvnG,IAAIosG,GAC/B7E,EAAc+E,KAAK1yC,EAAMkqC,EAC7B,IAIJppE,GAAS6xE,sBAAuBC,IAC5B,MAAMC,EAAUD,EAAOryG,KACI6P,MAAvBwiG,EAAO1I,eACMyD,EAAcvnG,IAAIwsG,EAAO1I,cACjCtmG,QAAQi3C,UAAYg4D,EAC7B,GAMAP,EACAjyG,KAAKiyD,mBAAmBoD,eAGxBr1D,KAAKiyD,mBAAmBmG,gBAEhC,CAOAq6C,YAAYvnG,EAAMvC,GACd,OAA8B,IAA1B3I,KAAK8uG,UAAU9kG,OACRhK,KAAK8uG,UAAUluF,MAEV5gB,KAAK8uG,UAAUpmG,KAAKunG,GAAOA,EAAItC,MAAQsC,EAAItC,KAAKhlG,EAAGuC,KAAUlL,KAAKkuG,eAKtF,CAKAkE,WAAWM,EAAU1qG,EAAOslG,EAAe2E,GACvC,MAAMvD,EAAgB1uG,KAAK2yG,oBACrB58D,EAAO/1C,KAAKyyG,YAAYC,EAAU1qG,GAClC3G,EAAMrB,KAAK2xG,iBAAiBe,GAE5BnvG,EAAU,IAAIiqG,GAAyBkF,GAC7CT,IAAejyG,KAAKquG,SAAStoG,IAAI1E,SAAQ0O,EAIrCxM,EAAQkqG,MADRiB,EACgBA,EAAcgE,QAEV3iG,IAAfkiG,GAA4BjyG,KAAKouG,QAAQwE,IAAI5yG,KAAK2xG,iBAAiBM,IACxDjyG,KAAKouG,QAAQroG,IAAI/F,KAAK2xG,iBAAiBM,IAAe,EAGtD,EAEpBjyG,KAAKouG,QAAQ/kG,IAAIhI,EAAKkC,EAAQkqG,QAEZH,GAAgCttG,KAAK6uG,YAAYvB,eACzDuF,mBAAmB98D,EAAKxH,SAAUhrC,EAASyE,GAIjD8qG,GAAYC,qBACZD,GAAYC,mBAAmB7nG,KAAOwnG,EAE9C,CAEAj6F,WAAW8zF,GACP,SAAUvsG,KAAKyuG,aAAah2F,WAAW8zF,KACnCvsG,KAAKivG,iBAAiBn/B,WAAW9vE,KAAK2xG,iBAAiBpF,IAC/D,CAEA72D,OAAO62D,GACCvsG,KAAKyuG,YACLzuG,KAAKyuG,YAAY/4D,OAAO62D,GAEnBvsG,KAAKivG,iBACVjvG,KAAKivG,gBAAgBv5D,OAAO11C,KAAK2xG,iBAAiBpF,GAE1D,CAEA31F,OAAO21F,GACCvsG,KAAKyuG,YACLzuG,KAAKyuG,YAAY73F,OAAO21F,GAEnBvsG,KAAKivG,iBACVjvG,KAAKivG,gBAAgBzpC,OAAOxlE,KAAK2xG,iBAAiBpF,GAE1D,CAEAE,SAASF,GACDvsG,KAAKyuG,YACLzuG,KAAKyuG,YAAYhC,SAASF,GAErBvsG,KAAKivG,iBACVjvG,KAAKivG,gBAAgBvC,SAAS1sG,KAAK2xG,iBAAiBpF,GAE5D,CAKAI,kBAAkBJ,GACVvsG,KAAKyuG,YACLzuG,KAAKyuG,YAAY9B,kBAAkBJ,GAE9BvsG,KAAKivG,kBACNjvG,KAAKyY,WAAW8zF,GAChBvsG,KAAK4sG,oBAAoBL,GAGzBvsG,KAAK6sG,kBAAkBN,GAGnC,CAIAM,kBAAkBN,GACd,GAAIvsG,KAAKyuG,YACLzuG,KAAKyuG,YAAY5B,kBAAkBN,QAAQ,GAEtCvsG,KAAKivG,gBAAiB,CAC3B,MAAMhD,EAAiBjsG,KAAKivG,gBAC5BhD,EAAezmC,OAAOxlE,KAAK2xG,iBAAiBpF,IAC5CvsG,KAAKgzG,gBAAgBzG,GAChB1oG,QAAKsb,MAAK,IAAC,EAAGuxF,MAAU1wG,KAAKguG,aAC7B1lG,UAAU4mF,IACX+c,EAAezmC,UAAU0pB,EAASzuF,IAAIwyG,GAASjzG,KAAK2xG,iBAAiBsB,IAAO,EAEpF,CACJ,CAEArG,oBAAoBL,GAChB,GAAIvsG,KAAKyuG,YACLzuG,KAAKyuG,YAAY7B,oBAAoBL,QAAQ,GAExCvsG,KAAKivG,gBAAiB,CAC3B,MAAMhD,EAAiBjsG,KAAKivG,gBAC5BhD,EAAeS,SAAS1sG,KAAK2xG,iBAAiBpF,IAC9CvsG,KAAKgzG,gBAAgBzG,GAChB1oG,QAAKsb,MAAK,IAAC,EAAGuxF,MAAU1wG,KAAKguG,aAC7B1lG,UAAU4mF,IACX+c,EAAeS,YAAYxd,EAASzuF,IAAIwyG,GAASjzG,KAAK2xG,iBAAiBsB,IAAO,EAEtF,CACJ,CAEA9F,YACQntG,KAAKyuG,YACLzuG,KAAKyuG,YAAYtB,YAEZntG,KAAKivG,iBACajvG,KAAKivG,gBACbzpC,UAAUxlE,KAAKkvG,gBAAgBv0F,MAAMla,IAAIwyG,GAASjzG,KAAK2xG,iBAAiBsB,IAE/F,CAEAnG,cACQ9sG,KAAKyuG,YACLzuG,KAAKyuG,YAAY3B,cAEZ9sG,KAAKivG,iBACajvG,KAAKivG,gBACbvC,YAAY1sG,KAAKkvG,gBAAgBv0F,MAAMla,IAAIwyG,GAASjzG,KAAK2xG,iBAAiBsB,IAEjG,CAEAN,oBACI,OAAO3yG,KAAKyuG,aAAarC,UAAUhrB,KAAKphF,KAAKyuG,cAAgBzuG,KAAK0uG,aACtE,CAEAwE,uBACI,OAAOlzG,KAAKyuG,aAAanC,aAAalrB,KAAKphF,KAAKyuG,cAAgBzuG,KAAK2uG,gBACzE,CAKAwE,mBAAmB5G,GACf,MAAMmC,EAAgB1uG,KAAK2yG,oBACrB1G,EAAiBjsG,KAAKivG,iBAAmBjvG,KAAKyuG,aAAaxC,eACjE,IAAKA,EACD,SAAOz9B,OAAG,IAEd,MAAMntE,EAAMrB,KAAK2xG,iBAAiBpF,GAC5B9zF,EAAawzF,EAAe1hF,QAAQ1mB,QAAKy9F,MAAU7gE,GACjDA,EAAQ8wE,MAAMrkG,SAAS7L,IAAG,EACnBmtE,QAAG,GAEL/tC,EAAQgxE,QAAQvkG,SAAS7L,IAAG,EAC1BmtE,QAAG,GAEP9b,OACV,EAAGkC,MAAU50D,KAAKyY,WAAW8zF,KAC9B,GAAImC,EACA,SAAOrN,MAAc,CAAC5oF,EAAYzY,KAAKkvG,kBAAkBrrG,QAAKpD,KAAI,EAAE2yG,EAAUpC,KACrEoC,EAGEpzG,KAAKqzG,qBAAqB3E,EAAesC,EAAgBzE,EAAU,GAF/D,KAKnB,MAAMoC,EAAmB3uG,KAAKkzG,uBAC9B,GAAIvE,EACA,SAAO2E,MAAiB3E,EAAiBpC,IAAa,IAE1D,MAAMqB,IACV,CAQAyF,qBAAqB3E,EAAesC,EAAgBzE,EAAUgH,GAC1D,MAAMlyG,EAAMrB,KAAK2xG,iBAAiBpF,GAC5BiH,EAAaxC,EAAeyC,UAAU19D,GAAQ/1C,KAAK2xG,iBAAiB57D,KAAU10C,GAC9EqyG,EAAgBhF,EAAcnC,GAC9BoH,EAAgBD,EAAgBH,EAChCrG,EAAU,GAMhB,QAASvkG,EAAI6qG,EAAa,EAAG7qG,EAAIqoG,EAAehnG,OAAQrB,IAAK,CACzD,MAAMirG,EAAelF,EAAcsC,EAAeroG,IAClD,GAAIirG,GAAgBF,EAChB,MAEAE,GAAgBD,GAChBzG,EAAQxgG,KAAKskG,EAAeroG,GAEpC,CACA,OAAOukG,CACX,CAMA2G,cAAc99D,GACV/1C,KAAKovG,OAAOz0F,MAAMtR,IAAIrJ,KAAK2xG,iBAAiB57D,EAAK7qC,MAAO6qC,GACxD/1C,KAAKovG,OAAO/0F,KAAKra,KAAKovG,OAAOz0F,MACjC,CAEAm5F,gBAAgB/9D,GACZ/1C,KAAKovG,OAAOz0F,MAAMiF,OAAO5f,KAAK2xG,iBAAiB57D,EAAK7qC,OACpDlL,KAAKovG,OAAO/0F,KAAKra,KAAKovG,OAAOz0F,MACjC,CAMAo5F,UAAUh+D,GACN,OAAO/1C,KAAKouG,QAAQroG,IAAI/F,KAAK2xG,iBAAiB57D,GAClD,CAMAi+D,YAAYzH,GAER,OADYvsG,KAAKi0G,YAAY1H,GAClBviG,MACf,CAMAkqG,kBAAkB3H,GACd,MAAMljG,EAAMrJ,KAAKi0G,YAAY1H,GACvBlrG,EAAMrB,KAAK2xG,iBAAiBpF,GAClC,OAAOljG,EAAIoqG,UAAU19D,GAAQ/1C,KAAK2xG,iBAAiB57D,KAAU10C,GAAO,CACxE,CAEA8yG,eAAep+D,GACX,MAAM8b,EAAS7xD,KAAKquG,SAAStoG,IAAI/F,KAAK2xG,iBAAiB57D,EAAK7qC,OAC5D,OAAO2mD,GAAU7xD,KAAKovG,OAAOz0F,MAAM5U,IAAI/F,KAAK2xG,iBAAiB9/C,GACjE,CAEAuiD,iBAAiBr+D,GACb,OAAO/1C,KAAKmzG,mBAAmBp9D,EAAK7qC,MAAMrH,QAAKpD,KAAIyuF,GAAYA,EAAS1pE,OAAO,CAAC8rF,EAAO2B,KACnF,MAAMt4F,EAAQ3a,KAAKovG,OAAOz0F,MAAM5U,IAAI/F,KAAK2xG,iBAAiBsB,IAC1D,OAAIt4F,GACA22F,EAAM5kG,KAAKiO,GAER22F,GACR,KACP,CAEA+C,yBAAyB34D,GAGrB,GAAIA,EAAMtwB,SAAWprB,KAAKmxC,YAAY+C,cAClCl0C,KAAKwvG,YAAY8E,UAAU54D,OAE1B,CACD,MAAM41D,EAAQtxG,KAAKovG,OAAOmF,WAC1B,UAAW,CAAGx+D,KAASu7D,EACnB,GAAI51D,EAAMtwB,SAAW2qB,EAAK5E,YAAY+C,cAAe,CACjDl0C,KAAKwvG,YAAY8E,UAAU54D,GAC3B,KACJ,CAER,CACJ,CAEAs3D,gBAAgBzG,GACZ,GAAIvsG,KAAKyuG,YACL,SAAOjgC,OAAGxuE,KAAKyuG,YAAYzB,eAAeT,IAE9C,GAAIvsG,KAAK0uG,cAAe,CACpB,MAAMxB,EAAUltG,KAAKqzG,qBAAqBrzG,KAAK0uG,cAAe1uG,KAAKkvG,gBAAgBv0F,MAAO4xF,EAAUiI,KACpG,SAAOhmC,OAAG0+B,EACd,CACA,GAAIltG,KAAK2uG,iBACL,OAAO3uG,KAAKy0G,2BAA2BlI,GAAU1oG,QAAK2hB,MAAO,CAACkvF,EAAaC,KACvED,EAAYhoG,QAAQioG,GACbD,GACR,KAEP,MAAM9G,IACV,CAOA6G,2BAA2BlI,GACvB,OAAKvsG,KAAK2uG,oBAGH2E,MAAiBtzG,KAAK2uG,iBAAiBpC,IAAW1oG,QAAKsb,MAAK,IAAC,EAAGmiF,MAAUpS,IAE7E,UAAW+jB,KAAS/jB,EAChBlvF,KAAKquG,SAAShlG,IAAIrJ,KAAK2xG,iBAAiBsB,GAAQ1G,GAEpD,SAAO/9B,UAAM0gB,GAAUrrF,QAAK+wG,MAAU3B,MAAStgG,SAAO67D,OAAG,CAACykC,IAASjzG,KAAKy0G,2BAA2BxB,KAAQ,KAC7G,EARSzkC,OAAG,GASlB,CACAmjC,iBAAiBpF,GAQb,OAAOvsG,KAAK4uG,eAAerC,IAAaA,CAC5C,CACA0H,YAAYl+D,GACR,MAAM10C,EAAMrB,KAAK2xG,iBAAiB57D,GAC5B8b,EAAS7xD,KAAKquG,SAAStoG,IAAI1E,GAC3BwzG,EAAYhjD,EAAS7xD,KAAK2xG,iBAAiB9/C,GAAU,KAE3D,OADY7xD,KAAKsuG,UAAUvoG,IAAI8uG,IACjB,CAAC9+D,EACnB,CAMA++D,mBAAmB/+D,EAAM/tC,EAAO+sG,GAI5B,IAAKA,EAAY/qG,OACb,OAAO,KAEX,MAAM4pG,EAAe5zG,KAAKouG,QAAQroG,IAAI/F,KAAK2xG,iBAAiB57D,KAAU,EACtE,QAASi/D,EAAchtG,EAAQ,EAAGgtG,GAAe,EAAGA,IAAe,CAC/D,MAAMzzD,EAAawzD,EAAYC,GAE/B,IADoBh1G,KAAKouG,QAAQroG,IAAI/F,KAAK2xG,iBAAiBpwD,KAAgB,GACzDqyD,EACd,OAAOryD,CAEf,CACA,OAAO,IACX,CASA0zD,iCAAiC3D,EAAO7D,EAAQ,GAC5C,MAAMkB,EAAmB3uG,KAAKkzG,uBAE9B,OAAKvE,KAGEngC,UAAM8iC,GAAOztG,QAAK+wG,MAAU7+D,IAC/B,MAAM8+D,EAAY70G,KAAK2xG,iBAAiB57D,GACnC/1C,KAAKquG,SAASuE,IAAIiC,IACnB70G,KAAKquG,SAAShlG,IAAIwrG,EAAW,MAEjC70G,KAAKouG,QAAQ/kG,IAAIwrG,EAAWpH,GAC5B,MAAMve,KAAWokB,MAAiB3E,EAAiB54D,IACnD,SAAOpjC,SAAO67D,OAAG,CAACz4B,IAAQm5C,EAASrrF,QAAKsb,MAAK,IAAC,EAAG/a,KAAI0xC,IACjD91C,KAAKsuG,UAAUjlG,IAAIwrG,EAAW,IAAK/+D,GAAc,KACjD,UAAWm9D,KAASn9D,GAAc,GAAI,CAClC,MAAMo/D,EAAWl1G,KAAK2xG,iBAAiBsB,GACvCjzG,KAAKquG,SAAShlG,IAAI6rG,EAAUn/D,GAC5B/1C,KAAKouG,QAAQ/kG,IAAI6rG,EAAUzH,EAAQ,EACvC,KACH,EAAGnM,MAAUxrD,GACLA,EAGE91C,KAAKi1G,iCAAiCn/D,EAAY23D,EAAQ,GAAG5pG,QAAKpD,KAAI00G,GAAgBn1G,KAAKyY,WAAWs9B,GAAQo/D,EAAc,MAAI,EAF5H3mC,OAAG,MAGf,IACN,EAAGhpD,MAAO,CAAC0nF,EAAShe,KACjBge,EAAQxgG,QAAQwiF,GACTge,GACR,MAAG,EAzBK1+B,OAAG,IAAI8iC,GA0BtB,CAMAL,sBAAsBK,EAAOt7D,GAKzB,GAAIh2C,KAAK2uG,kBAAiC,SAAb34D,EAEzB,OAAAh2C,KAAKsuG,UAAUjlG,IAAI,KAAM,IAAIioG,IACtBtxG,KAAKi1G,iCAAiC3D,GAAOztG,QAAKpD,KAAIuwG,KACzDD,YAAaC,EACbA,qBAGH,GAAIhxG,KAAK0uG,eAA8B,WAAb14D,EAAuB,CAGlD,MAAM04D,EAAgB1uG,KAAK0uG,cAC3B,SAAOlgC,OAAG8iC,EAAM7uG,OAAOszC,GAAgC,IAAxB24D,EAAc34D,KAAclyC,QAAKpD,KAAI20G,KAChErE,YAAaqE,EACbpE,eAAgBM,MAClB,EAAGltG,KAAI,EAAG4sG,qBACRhxG,KAAKq1G,kBAAkBrE,EAAc,GAE7C,CACK,MAAiB,SAAbh7D,GAAa,EAKXw4B,OAAG,CAAEuiC,YAAaO,EAAON,eAAgBM,IAASztG,QAAKO,KAAI,EAAG4sG,qBACjEhxG,KAAKq1G,kBAAkBrE,EAAc,KAMzChxG,KAAKsuG,UAAUjlG,IAAI,KAAM,IAAIioG,IACtBtxG,KAAKi1G,iCAAiC3D,GAAOztG,QAAKpD,KAAIuwG,KACzDD,YAAaO,EACbN,qBAGZ,CACAG,kBAAkBH,GACdhxG,KAAKkvG,gBAAgB70F,KAAK22F,EAC9B,CACAK,uBAAuBL,GACnBhxG,KAAKqvG,iBAAiBh1F,KAAK22F,EAC/B,CAEAqE,kBAAkBrE,GACd,MAAMtC,EAAgB1uG,KAAK2yG,oBAC3B,GAAKjE,EAGL,CAAA1uG,KAAKquG,SAASvf,QACd9uF,KAAKsuG,UAAUxf,QACf,QAAS9mF,EAAQ,EAAGA,EAAQgpG,EAAehnG,OAAQhC,IAAS,CACxD,MAAMukG,EAAWyE,EAAehpG,GAC1B3G,EAAMrB,KAAK2xG,iBAAiBpF,GAClCvsG,KAAKouG,QAAQ/kG,IAAIhI,EAAKqtG,EAAcnC,IACpC,MAAM16C,EAAS7xD,KAAK80G,mBAAmBvI,EAAUvkG,EAAOgpG,GACxDhxG,KAAKquG,SAAShlG,IAAIhI,EAAKwwD,GACvB,MAAMgjD,EAAYhjD,EAAS7xD,KAAK2xG,iBAAiB9/C,GAAU,KACrDj1C,EAAQ5c,KAAKsuG,UAAUvoG,IAAI8uG,IAAc,GAC/Cj4F,EAAMgyE,OAAO5mF,EAAO,EAAGukG,GACvBvsG,KAAKsuG,UAAUjlG,IAAIwrG,EAAWj4F,EAClC,EACJ,CACAqzB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF2/D,EAAO,EAC1G59D,iBA/5ByFvrC,MAAE,CAAA8N,KA+5BJq7F,EAAO1/D,UAAA,eAAAgI,eAAA,SAAA3H,EAAAC,EAAA2H,GAA0a,GAA1a,EAAA5H,GA/5BL9pC,MAAE0xC,EA+5B+Zs3D,GAAc,KAAAl/D,EAAA,KAAA6H,EA/5B/a3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAqgE,UAAAz4D,EAAA,GAAAiB,UAAA,SAAA9I,EAAAC,GA+5B2hB,GA/5B3hB,EAAAD,GAAF9pC,MA+5B4gB2oG,GAAiB,KAAA7+D,EAAA,KAAA6H,EA/5B7hB3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAogE,YAAAx4D,EAAAz1B,MAAA,GAAAsvB,UAAA,QA+5BuQ,OAAM,cAAAE,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GA/5B/Q9pC,MAAE,mBAAAs7C,GAAA,OA+5BJvR,EAAA4lE,yBAAAr0D,EAAgC,EAAzB,EAAA3P,OAAA,CAAA90B,WAAA,aAAAkzF,YAAA,cAAAC,cAAA,gBAAAC,iBAAA,mBAAAxC,QAAA,UAAAyC,aAAA,gBAAAp4D,SAAA,YAAApI,MAAA,EAAAC,KAAA,EAAAC,OAAA,2BAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GA/5BL9pC,MAAE,IA+5BgqB,EAAA8yC,aAAA,CAA6D61D,IAAiBv+D,cAAA,IAC50B,OAp0BK++D,CAAO,KAk3BPiF,GAAW,MAAjB,MAAMA,EACF3hE,eAAc70B,OAAO80B,OACrBkkE,SAAQh5F,OAAOuxF,IACf0H,WAAY,EACZC,MAAQ,OAQR,QAAInuB,GACA,MAAO,UACX,CACA,QAAIA,CAAKouB,GACL,CAQJ,gBAAIpJ,GACA,OAAOrsG,KAAK01G,eAChB,CACA,gBAAIrJ,CAAaA,GACbrsG,KAAK21G,mBAAqBtJ,IACrBrsG,KAAKkL,MAASlL,KAAK01G,gBAAmB11G,KAAK21G,qBAK5C31G,KAAK41G,iBACL51G,KAAK4W,UAE0B,IAA1B5W,KAAK41G,kBACV51G,KAAKysG,WAEb,CACA,cAAIh0F,GACA,OAAOzY,KAAKs1G,MAAM78F,WAAWzY,KAAK61G,MACtC,CACA,cAAIp9F,CAAWA,GACXzY,KAAK41G,iBAAmBn9F,EACpBA,EACAzY,KAAK4W,SAGL5W,KAAKysG,UAEb,CAKApxD,WAKAy6D,eACAC,WACI,OAAO/1G,KAAK81G,gBAAkB91G,KAAKmxC,YAAY+C,cAAcgC,aAAa50C,QAAU,EACxF,CAEA00G,WAAa,IAAIlpD,MAEjBmpD,eAAiB,IAAInpD,MAKrB7c,0BAA4B,KAE5BimE,WAAa,IAAI3+F,KAEjB4+F,aAAe,IAAI5+F,KACnBo+F,oBAAqB,EACrBC,sBAAmB7lG,EAOnBqmG,cAAe,EACfC,qBAEA,QAAInrG,GACA,OAAOlL,KAAK61G,KAChB,CACA,QAAI3qG,CAAKyP,GACDA,IAAU3a,KAAK61G,QACf71G,KAAK61G,MAAQl7F,EACb3a,KAAKm2G,aAAa97F,OAE1B,CACAw7F,MAEA,cAAIS,GAEA,YAA6CvmG,IAAzC/P,KAAKs1G,MAAM7G,aAAapC,eACvBrsG,KAAKs1G,MAAM7G,YAAYpC,aAAarsG,KAAK61G,aAII9lG,IAAzC/P,KAAKs1G,MAAM7G,aAAapC,cACiC,IAA9DrsG,KAAKs1G,MAAM7G,aAAazB,eAAehtG,KAAK61G,OAAO7rG,MAI3D,CACA,SAAIyjG,GAIA,OAAOztG,KAAKs1G,MAAMvB,UAAU/zG,KAAK61G,QAAU71G,KAAKq2G,oBACpD,CAEAX,gBACI,OAAI11G,KAAKs1G,MAAM7G,aACPzuG,KAAKs2G,WAONt2G,KAAK21G,kBAChB,CAMAY,mBACI,OAAKv2G,KAAK01G,gBAGHhgB,OAAO11F,KAAKyY,YAFR,IAGf,CAMAu7F,cACI,OAAOh0G,KAAKs1G,MAAMtB,YAAYh0G,KAAK61G,MACvC,CAMA3B,oBACI,OAAOl0G,KAAKs1G,MAAMpB,kBAAkBl0G,KAAK61G,MAC7C,CACA5jD,sBAAqB31C,OAAO41C,OAC5BryD,cACIizG,EAAYC,mBAAqB/yG,IACrC,CACAkvC,WACIlvC,KAAKq2G,qBAoHb,SAASG,GAAuBC,GAC5B,IAAI5kD,EAAS4kD,EAAYznB,cACzB,KAAOn9B,IAAW6kD,GAAc7kD,IAC5BA,EAASA,EAAOm9B,cAEpB,OAAKn9B,EAQIA,EAAOjd,UAAU0M,SAAS,yBAAsB,EAC9Cq1D,OAAgB9kD,EAAOjkB,aAAa,eAIpC,GARI,CAUnB,CAxIoC4oE,CAAuBx2G,KAAKmxC,YAAY+C,eACpEl0C,KAAKs1G,MACAlF,qBACA7lF,QAAQ1mB,QAAKpD,KAAI,IAAMT,KAAKyY,aAAU,EAAG0oF,SACzC74F,UAAU,IAAMtI,KAAKiyD,mBAAmBoD,gBAC7Cr1D,KAAKs1G,MAAMpF,oBAAoBlwG,KAAKw1G,OACpCx1G,KAAKs1G,MAAMzB,cAAc7zG,KAC7B,CACAyX,cAGQq7F,EAAYC,qBAAuB/yG,OACnC8yG,EAAYC,mBAAqB,MAErC/yG,KAAKm2G,aAAaz+F,WAClB1X,KAAKk2G,WAAW77F,OAChBra,KAAKk2G,WAAWx+F,UACpB,CACAk/F,YACI,OAAO52G,KAAKs1G,MAAMnB,eAAen0G,OAAS,IAC9C,CACAssG,cACI,OAAOtsG,KAAKs1G,MAAMlB,iBAAiBp0G,KACvC,CAEA8uD,QACI9uD,KAAKu1G,UAAY,EACbv1G,KAAKo2G,cACLp2G,KAAKmxC,YAAY+C,cAAc4a,QAEnC9uD,KAAKiyD,mBAAmBoD,cAC5B,CAEAwhD,UACI72G,KAAKu1G,WAAY,EACjBv1G,KAAKiyD,mBAAmBoD,cAC5B,CAEAyhD,WACQ92G,KAAKq7C,YAGTr7C,KAAKg2G,WAAW37F,KAAKra,KAAK61G,MAC9B,CAEApJ,WACQzsG,KAAKqsG,cACLrsG,KAAKs1G,MAAM7I,SAASzsG,KAAK61G,MAEjC,CAEAj/F,SACQ5W,KAAKqsG,cACLrsG,KAAKs1G,MAAM1+F,OAAO5W,KAAK61G,MAE/B,CAEAkB,gBACI/2G,KAAKu1G,UAAY,EACjBv1G,KAAKiyD,mBAAmBoD,cAC5B,CACA2hD,aACQh3G,KAAKq7C,YAGTr7C,KAAKs1G,MAAM9F,YAAYyH,UAAUj3G,KACrC,CACAk3G,iBACQl3G,KAAKq7C,aAGTr7C,KAAKo2G,cAAe,EACpBp2G,KAAKs1G,MAAM9F,YAAYyH,UAAUj3G,MACjCA,KAAKo2G,cAAe,EACxB,CACA5E,oBAAoB4B,GAChBpzG,KAAKi2G,eAAe3nD,KAAK8kD,EAC7B,CACAnjE,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF4kE,EAAW,EAC9G7iE,iBAjsCyFvrC,MAAE,CAAA8N,KAisCJsgG,EAAW3kE,UAAA,oBAAA+B,UAAA,QAA2Y,WAAU,mBAAAC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GAjsC9Z9pC,MAAE,0BAisCJ+pC,EAAAyoE,gBAAgB,EAjsCdxyG,CAisCS,0BAAX+pC,EAAAuoE,YAAY,GAAD,EAAAxoE,IAjsCT9pC,MAAE,WAAA+pC,EAAA8mE,WAAF7wG,MAAE,gBAisCJ+pC,EAAA8nE,mBAjsCE7xG,CAisCgB,aAAA+pC,EAAAg/D,MAAV,EAjsCN/oG,CAisCO,gBAAT+pC,EAAAylE,oBAjsCExvG,CAisCiB,eAAnB+pC,EAAAulE,eAAa,EAAA3jE,OAAA,CAAAg3C,KAAA,OAAAglB,aAAA,iCAAsH1jC,OAAgBlwD,WAAA,aAAA4iC,WAAA,6BAAsEstB,OAAgBmtC,eAAA,kDAAAhmD,QAAA,CAAAkmD,WAAA,aAAAC,eAAA,kBAAAz/D,SAAA,gBAAAh1B,SAAA,CAjsCvO9c,SAksC5F,OApPKouG,CAAW,KA6SjB,SAAS4D,GAAc7oD,GACnB,MAAMjZ,EAAYiZ,EAAQjZ,UAC1B,SAAUA,GAAW0M,SAAS,0BAA2B1M,GAAW0M,SAAS,YACjF,CA6FA,MAAM61D,GAAiB,gBACvB,IAIMC,GAAkB,MAAxB,MAAMA,EACFC,aAAY/6F,OAAOw2F,IACnBwC,SAAQh5F,OAAOuxF,IACfyJ,YAAWh7F,OAAO80B,OAClBkhB,QAAOh2C,OAAOi2C,MAAgB,CAAE9gB,UAAU,IAE1C8lE,gBAEArB,WAAa,IAAI3+F,KAEjBigG,YAAc,KAEd,SAAI/J,GACA,OAAOztG,KAAKy3G,MAChB,CACA,SAAIhK,CAAM9yF,GACN3a,KAAK03G,eAAe/8F,EACxB,CACA88F,OAKA,UAAIE,GACA,OAAO33G,KAAK43G,OAChB,CACA,UAAID,CAAOA,GACP33G,KAAK63G,gBAAgBF,EACzB,CACAC,QAAU,GACV/3G,cACIG,KAAK83G,cACL93G,KAAKsyD,MAAMyoB,OAAOl3E,QAAK6sG,MAAU1wG,KAAKk2G,aAAa5tG,UAAU,IAAMtI,KAAK83G,aAAY,IAIpF93G,KAAKq3G,UAAUlB,aAAa7tG,UAAU,IAAMtI,KAAK83G,cACrD,CACArgG,cACIzX,KAAKk2G,WAAW77F,OAChBra,KAAKk2G,WAAWx+F,UACpB,CAEAqgG,iBACI,MAAMC,GAAah4G,KAAKq3G,UAAUnsG,MAAQlL,KAAKs1G,MAAMvB,UAAU/zG,KAAKq3G,UAAUnsG,QAAU,KAClFuiG,EAAuB,MAAfztG,KAAKy3G,OAAiBO,EAAYh4G,KAAKy3G,OACrD,MAAwB,iBAAVhK,EAAqB,GAAGA,EAAQztG,KAAK43G,UAAU53G,KAAKw3G,cAAgB,IACtF,CACAM,YAAYG,GAAc,GACtB,MAAMC,EAAUl4G,KAAK+3G,iBACrB,GAAIG,IAAYl4G,KAAKu3G,iBAAmBU,EAAa,CACjD,MAAMpqD,EAAU7tD,KAAKs3G,SAASpjE,cACxBikE,EAAcn4G,KAAKsyD,MAA4B,QAApBtyD,KAAKsyD,KAAK33C,MAAkB,eAAiB,cACxEy9F,EAA4B,gBAAhBD,EAAgC,eAAiB,cACnEtqD,EAAQ2S,MAAM23C,GAAeD,GAAW,GACxCrqD,EAAQ2S,MAAM43C,GAAa,GAC3Bp4G,KAAKu3G,gBAAkBW,CAC3B,CACJ,CAOAR,eAAe/8F,GAIX3a,KAAKy3G,OAAS/2B,MAAM/lE,GAAS,KAAOA,EACpC3a,KAAK83G,aACT,CAOAD,gBAAgBF,GACZ,IAAIh9F,EAAQg9F,EACRU,EAAQ,KACZ,GAAsB,iBAAXV,EAAqB,CAC5B,MAAMv3F,EAAQu3F,EAAOlrG,MAAM0qG,IAC3Bx8F,EAAQyF,EAAM,GACdi4F,EAAQj4F,EAAM,IAAMi4F,CACxB,CACAr4G,KAAKw3G,YAAca,EACnBr4G,KAAK43G,WAAUjB,OAAgBh8F,GAC/B3a,KAAK83G,aACT,CACA7nE,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFkpE,EAAkB,EACrHnnE,iBA37CyFvrC,MAAE,CAAA8N,KA27CJ4kG,EAAkBjpE,UAAA,+BAAAkC,OAAA,CAAAo9D,MAAA,gCAAyGkJ,OAAegB,OAAA,yCAAAn2F,SAAA,CA37CxI9c,SA47C5F,OA5FK0yG,CAAkB,KA6GlBkB,GAAiB,MAAvB,MAAMA,EACFhD,SAAQh5F,OAAOuxF,IACfwJ,aAAY/6F,OAAOw2F,IAEnByF,WAAY,EACZ14G,cAAgB,CAKhB24G,UACIx4G,KAAKu4G,UACCv4G,KAAKs1G,MAAM3I,kBAAkB3sG,KAAKq3G,UAAUnsG,MAC5ClL,KAAKs1G,MAAM5/D,OAAO11C,KAAKq3G,UAAUnsG,MACvClL,KAAKs1G,MAAM9F,YAAYyH,UAAUj3G,KAAKq3G,UAC1C,CACApnE,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFoqE,EAAiB,EACpHroE,iBA99CyFvrC,MAAE,CAAA8N,KA89CJ8lG,EAAiBnqE,UAAA,8BAAA+B,UAAA,YAA+K,MAAIE,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GA99ClM9pC,MAAE,iBAAAs7C,GA89CJvR,SAAA+pE,UAAWx4D,EAAA+W,iBAAwB,EA99CjCryD,CA89Ce,yBAAAs7C,GAAjBvR,SAAA+pE,UAAWx4D,EAAApE,gBAAuB,EA99ChCl3C,CA89Ce,yBAAAs7C,GAAjBvR,SAAA+pE,UAAWx4D,EAAApE,gBAAuB,EAAjB,EAAAvL,OAAA,CAAAkoE,UAAA,4CAAwH5vC,QAAgBnnD,SAAA,CA99CvJ9c,SA+9C5F,OAlBK4zG,CAAiB,KA4CjBG,GAAa,MAAnB,MAAMA,EACFxoE,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFuqE,EAAa,EAChHxoE,iBA3/CyFvrC,KAAE,CAAA8N,KA2/CSimG,IAapGxoE,iBAxgDyFvrC,MAAE,IAygD9F,OAhBK+zG,CAAa,KCprDbC,GAAW,MAAjB,MAAMA,UAAoB5F,GAStB,wBAAI6F,GACA,OAAO34G,KAAK44G,qBAChB,CACA,wBAAID,CAAqBh+F,GAErB3a,KAAK44G,sBAAwBj+F,CACjC,CACAi+F,sBASA3qC,gBAAkB,EAClB4qC,wBACI,OAjCR,SAASC,GAAqBC,GAC1B,QAASA,EAAWC,qBACxB,CA+BYF,CAAqB94G,KAAKs1G,MAAM9F,aACzBxvG,KAAK24G,qBAET34G,KAAKu1G,SAChB,CAOA,YAAIpoF,GACA,OAAOntB,KAAKq7C,UAChB,CACA,YAAIluB,CAASxS,GACT3a,KAAKq7C,WAAa1gC,CACtB,CACA9a,cACIC,QACA,MAAMguE,KAAWxxD,OAAO,IAAI4xD,MAAmB,YAAa,CAAEz8B,UAAU,IACxEzxC,KAAK24G,qBAAuBvqC,OAAON,IAAa9tE,KAAKiuE,eACzD,CAGA/+B,WACIpvC,MAAMovC,UACV,CACAz3B,cACI3X,MAAM2X,aACV,CACAw4B,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFwqE,EAAW,EAC9GzoE,iBADyFvrC,MAAE,CAAA8N,KACJkmG,EAAWvqE,UAAA,oBAAA+B,UAAA,oBAAAC,SAAA,EAAAC,aAAA,SAAA5B,EAAAC,GAAA,EAAAD,GADT9pC,MAAE,0BACJ+pC,EAAAuoE,YAAY,GAAD,EAAAxoE,IADT9pC,MAAE,WACJ+pC,EAAAoqE,yBADEn0G,MAAE,gBACJ+pC,EAAA8nE,mBADE7xG,CACgB,aAAA+pC,EAAAg/D,MAAV,EADN/oG,CACO,gBAAT+pC,EAAAylE,oBADExvG,CACiB,eAAnB+pC,EAAAulE,eAAa,EAAA3jE,OAAA,CAAAsoE,qBAAA,qCAAqHh+F,GAAoB,MAATA,EAAgB,KAAIg8F,OAAgBh8F,IAAOwS,SAAA,yBAAsCw7C,QAAgB7Y,QAAA,CAAAkmD,WAAA,aAAAC,eAAA,kBAAAz/D,SAAA,gBAAAh1B,SAAA,CAD5O9c,MAC8mB,CAAC,CAAE+xC,QAASq8D,GAAap8D,YAAagiE,KADppBh0G,eAE5F,OA3DKg0G,CAAW,KA2FXO,GAAc,MAApB,MAAMA,UAAuBvL,GACzBxiG,KACA+kC,iBAAW,UAAAipE,EAAA,gBAAAhrE,GAAA,OAAAgrE,MApC8Ex0G,MAoCUu0G,KAAc/qE,GAAd+qE,EAAc,GAAtG,GACXhpE,iBArCyFvrC,MAAE,CAAA8N,KAqCJymG,EAAc9qE,UAAA,2BAAAkC,OAAA,CAAAs9D,KAAA,gCAAAziG,KAAA,0BAAAsW,SAAA,CArCZ9c,MAqC4J,CAAC,CAAE+xC,QAASi3D,GAAgBh3D,YAAauiE,KArCrMv0G,SAsC5F,OAJKu0G,CAAc,KA4FdE,GAAkB,MAAxB,MAAMA,UAA2B/B,GAE7B,SAAI3J,GACA,OAAOztG,KAAKy3G,MAChB,CACA,SAAIhK,CAAM9yF,GACN3a,KAAK03G,eAAe/8F,EACxB,CAEA,UAAIg9F,GACA,OAAO33G,KAAK43G,OAChB,CACA,UAAID,CAAOA,GACP33G,KAAK63G,gBAAgBF,EACzB,CACA1nE,iBAAW,UAAAmpE,EAAA,gBAAAlrE,GAAA,OAAAkrE,MA7I8E10G,MA6IUy0G,KAAkBjrE,GAAlBirE,EAAkB,GAA1G,GACXlpE,iBA9IyFvrC,MAAE,CAAA8N,KA8IJ2mG,EAAkBhrE,UAAA,+BAAAkC,OAAA,CAAAo9D,MAAA,gCAAyGkJ,OAAegB,OAAA,yCAAAn2F,SAAA,CA9IxI9c,MA8IwM,CAAC,CAAE+xC,QAAS2gE,GAAoB1gE,YAAayiE,KA9IrPz0G,eA+I5F,OAjBKy0G,CAAkB,KAoClBE,GAAiB,MAAvB,MAAMA,EACF/L,iBAAgBhxF,OAAOoiC,OACvB6uD,SAAQjxF,OAAO8wF,GAA2B,CAAE37D,UAAU,IACtDxB,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFmrE,EAAiB,EACpHppE,iBAtKyFvrC,MAAE,CAAA8N,KAsKJ6mG,EAAiBlrE,UAAA,8BAAA3sB,SAAA,CAtKf9c,MAsKiF,CAClK,CACI+xC,QAAS42D,GACT32D,YAAa2iE,QAG5B,OAVKA,CAAiB,KA2BjBC,GAAO,MAAb,MAAMA,UAAgBzL,GAGlBgB,iBAAc9+F,EACdkgC,iBAAW,UAAAspE,EAAA,gBAAArrE,GAAA,OAAAqrE,MAjM8E70G,MAiMU40G,KAAOprE,GAAPorE,EAAO,GAA/F,GACXrpE,iBAlMyFvrC,MAAE,CAAA8N,KAkMJ8mG,EAAOnrE,UAAA,eAAAmJ,UAAA,SAAA9I,EAAAC,GAAiO,GAAjO,EAAAD,GAlML9pC,MAkMqN20G,GAAiB,KAAA7qE,EAAA,KAAA6H,EAlMtO3xC,MAAE2xC,EAAF3xC,WAAE+pC,EAAAogE,YAAAx4D,EAAAz1B,MAAA,GAAAsvB,UAAA,eAAAsG,SAAA,YAAAh1B,SAAA,CAAF9c,MAkMkG,CAAC,CAAE+xC,QAASo3D,GAASn3D,YAAa4iE,KAlMpI50G,OAAE0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,2BAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GAAF9pC,MAAE,IAkMgY,EAAA8yC,aAAA,CAAwqB6hE,IAAiB/oE,OAAA,kmBAAAxB,cAAA,IACvpC,OANKwqE,CAAO,KAoBPE,GAAiB,MAAvB,MAAMA,UAA0BlB,GAC5BroE,iBAAW,UAAAwpE,EAAA,gBAAAvrE,GAAA,OAAAurE,MAlN8E/0G,MAkNU80G,KAAiBtrE,GAAjBsrE,EAAiB,GAAzG,GACXvpE,iBAnNyFvrC,MAAE,CAAA8N,KAmNJgnG,EAAiBrrE,UAAA,8BAAAkC,OAAA,CAAAkoE,UAAA,8CAAA/2F,SAAA,CAnNf9c,MAmNqJ,CAAC,CAAE+xC,QAAS6hE,GAAmB5hE,YAAa8iE,KAnNjM90G,SAoN5F,OAHK80G,CAAiB,KAsBjBE,GAAa,MAAnB,MAAMA,EACFzpE,iBAAW,SAAA/B,GAAA,WAAAA,GAAwFwrE,EAAa,EAChHzpE,iBAzOyFvrC,KAAE,CAAA8N,KAyOSknG,IAapGzpE,iBAtPyFvrC,MAAE,CAAA+rC,QAAA,CAsPkCgoE,GAAe/nE,MAAiBA,SAChK,OAhBKgpE,CAAa,KA+DnB,MAAMC,GACFC,kBACAxN,SACAC,aACAC,YACAzsG,YAAY+5G,EAAmBxN,EAAUC,EAAcC,GACnDtsG,KAAK45G,kBAAoBA,EACzB55G,KAAKosG,SAAWA,EAChBpsG,KAAKqsG,aAAeA,EACpBrsG,KAAKssG,YAAcA,CACvB,CACAuN,aAAa9jE,EAAM03D,EAAOqM,EAAaC,GACnC,MAAMC,EAAWh6G,KAAK45G,kBAAkB7jE,EAAM03D,GAE9C,GADAqM,EAAYptG,KAAKstG,GACbh6G,KAAKqsG,aAAa2N,GAAW,CAC7B,MAAMC,EAAgBj6G,KAAKssG,YAAYv2D,GACnCkkE,IACIj5F,MAAMC,QAAQg5F,GACdj6G,KAAKk6G,iBAAiBD,EAAexM,EAAOqM,EAAaC,GAGzDE,EAAcp2G,QAAKsb,MAAK,IAAI7W,UAAU4mF,IAClClvF,KAAKk6G,iBAAiBhrB,EAAUue,EAAOqM,EAAaC,EAAS,GAI7E,CACA,OAAOD,CACX,CACAI,iBAAiBhrB,EAAUue,EAAOqM,EAAaC,GAC3C7qB,EAAS/8E,QAAQ,CAAC8gG,EAAOjrG,KACrB,IAAImyG,EAAiBJ,EAAUphD,QAC/BwhD,EAAeztG,KAAK1E,GAASknF,EAASllF,OAAS,GAC/ChK,KAAK65G,aAAa5G,EAAOxF,EAAQ,EAAGqM,EAAaK,EAAc,EAEvE,CAMAC,aAAaC,GACT,IAAIP,EAAc,GAClBO,SAAeloG,QAAQ4jC,GAAQ/1C,KAAK65G,aAAa9jE,EAAM,EAAG+jE,EAAa,KAChEA,CACX,CAKAQ,qBAAqBhJ,EAAO7C,GACxB,IAAIvB,EAAU,GACVqN,EAAgB,GACpBA,SAAc,IAAK,EACnBjJ,EAAMn/F,QAAQ4jC,IACV,IAAIn/B,GAAS,EACb,QAASjO,EAAI,EAAGA,GAAK3I,KAAKosG,SAASr2D,GAAOptC,IACtCiO,EAASA,GAAU2jG,EAAc5xG,GAEjCiO,GACAs2F,EAAQxgG,KAAKqpC,GAEb/1C,KAAKqsG,aAAat2D,KAClBwkE,EAAcv6G,KAAKosG,SAASr2D,GAAQ,GAAK04D,EAAYh2F,WAAWs9B,GAAI,GAGrEm3D,CACX,EAaJ,MAAMsN,WAA8BC,MAChCC,aACAC,eACAC,eAAiB,IAAI/a,KAAgB,IACrCgb,cAAgB,IAAIhb,KAAgB,IACpC,QAAI30F,GACA,OAAOlL,KAAK61G,MAAMl7F,KACtB,CACA,QAAIzP,CAAKyP,GACL3a,KAAK61G,MAAMx7F,KAAKM,GAChB3a,KAAK46G,eAAevgG,KAAKra,KAAK26G,eAAeP,aAAap6G,KAAKkL,OAC/DlL,KAAK06G,aAAa1O,UAAYhsG,KAAK46G,eAAejgG,KACtD,CACAk7F,MAAQ,IAAIhW,KAAgB,IAC5BhgG,YAAY66G,EAAcC,EAAgBG,GACtCh7G,QACAE,KAAK06G,aAAeA,EACpB16G,KAAK26G,eAAiBA,EAClBG,IAEA96G,KAAKkL,KAAO4vG,EAEpB,CACAvK,QAAQwK,GACJ,SAAO9lE,MAAM8lE,EAAiBhM,WAAY/uG,KAAK06G,aAAazO,eAAe1hF,QAASvqB,KAAK46G,gBAAgB/2G,QAAKpD,KAAI,KAC9GT,KAAK66G,cAAcxgG,KAAKra,KAAK26G,eAAeL,qBAAqBt6G,KAAK46G,eAAejgG,MAAO3a,KAAK06G,eAC1F16G,KAAK66G,cAAclgG,QAElC,CACAilC,aACI,iBC9cD,IAAMo7D,GAAuB,MAA9B,MAAOA,EAYXn7G,cARAG,KAAAqD,OAAMtD,MAAS,CAACi7G,4BAGNh7G,KAAA0c,cAAaJ,OAAOK,MAG9B3c,KAAAq+C,sBAAqB/hC,OAAOxF,IAQlB9W,KAAAi7G,gBAAkBj7G,KAAK0c,WAAWO,WAAW,mBAK7Cjd,KAAAyqB,WAAazqB,KAAK0c,WAAW+N,WAE7BzqB,KAAA0jB,iBAAmB1jB,KAAKyqB,WAAW/G,iBAEnC1jB,KAAA29C,GAAK39C,KAAK0c,WAAWihC,GAGrB39C,KAAAwiB,cAAgBxiB,KAAKyqB,WAAWhI,YAChCziB,KAAAk7G,aAAel7G,KAAKyqB,WAAW/H,YACzC1iB,KAAAm7G,aAAYz/F,OAAY,YAAa,IAAM1b,KAAKwiB,gBAAgBxY,QAGtDhK,KAAAuF,OAASvF,KAAK0c,WAAWnX,OAGzBvF,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAGzB3hD,KAAAwhB,SAAWxhB,KAAKyqB,WAAWjJ,QA7BrB,CAiChB45F,eACE,MAAM71G,EAASvF,KAAK0c,WAAWnX,OAC3BA,EAAOu1B,iBACX96B,KAAKq+C,mBAAmBznC,QAAO,EAAMrR,EAAOyC,MAAOzC,EAAO7E,WAC5D,CAEA26G,oBAAoB58F,GAClBze,KAAKqD,IAAI6E,EAAE,yBAAyBuW,MACpCze,KAAKyqB,WAAW1I,OAAO/F,SAAS,KAAMyC,EACxC,CAIA68F,eAAenuF,GACbntB,KAAKqD,IAAI6E,EAAE,kBAAkBilB,MACzBA,GACJntB,KAAKyqB,WAAW3F,oBAClB,iDA9DWk2F,EAAuB,oCAAvBA,EAAuB7sE,UAAA,2BAAAC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,YAAvBksE,CAAuB,8CCXlCt2G,MAAA,cAOEA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,QAAA,OAAAA,MAASg4C,EAAAj8B,KAAKi8B,EAAAx8C,OAAMya,MAAQ+hC,EAAAx8C,OAAM8e,IAAI,GAEtCta,MAAA,cAAUA,MAAA,UACZA,kCALEA,MAAA,WAAAg4C,EAAAiB,KAAAxwB,UAAAuvB,EAAAn3C,OAAAu1B,2DAUFp2B,MAAA,cAOEA,MAAA,mBAAAA,MAAAklD,GAAA,MAAAlN,EAAAh4C,QAAA,OAAAA,MAASg4C,EAAA6+D,WAAW7+D,EAAA10C,SAAQ,GAE5BtD,MAAA,cAAUA,MAAA,uBACZA,kCALEA,MAAA,WAAAg4C,EAAAiB,KAAAxwB,oDAWFzoB,MAAA,cAOEA,MAAA,mBAAAA,MAAAslD,GAAA,MAAAtN,EAAAh4C,QAAA,OAAAA,MAASg4C,EAAAr9B,WAAWq9B,EAAA10C,QAAS00C,EAAAx8C,OAAMya,OAAO,GAE1CjW,MAAA,cAAUA,MAAA,YACZA,kCALEA,MAAA,WAAAg4C,EAAAiB,KAAAxwB,WCpBG,IAAMquF,GAA2B,MAAlC,MAAOA,UAAmCR,GAc9Cn7G,cAAgBC,QAXhBE,KAAAE,KAAOw9C,MAAMlhB,WAGbx8B,KAAAgI,MAAQ01C,MAAMlhB,WAGdx8B,KAAA2uC,KAAO+O,MAAMlhB,WAGbx8B,KAAAy7G,cAAa/9D,OAAmC,MAKhD19C,KAAA07G,WAAUhgG,OAAY,UAAW,KAE/B,MAAMxb,EAAOF,KAAKE,OACZyuC,EAAO3uC,KAAK2uC,UAAYzuC,EACxBiqB,EAAInqB,KAAKwhB,WACTm6F,EAAM37G,KAAKy7G,aACjB,MAAO,CACLh7F,KAAM0J,EAAE1J,MAAqB,GAAbk7F,GAAKl7F,MAAiBkuB,IAASzuC,GAAM6a,OACrD2F,OAAQyJ,EAAEzJ,QAAyB,GAAfi7F,GAAKj7F,QAAmBiuB,IAASzuC,GAAM07G,SAC3Dh8F,OAAQuK,EAAEvK,QAAyB,GAAf+7F,GAAK/7F,QAAmB+uB,IAASzuC,GAAM4a,WAZtC,CAiBzB2F,KAAK/f,EAAoBue,GACvBjf,KAAKqD,IAAI6E,EAAE,eAAexH,YAAqBue,MAC/Cjf,KAAKyqB,WAAW1I,OAAO/F,SAAS,CAAEtb,aAAYue,YAAY,KAC5D,CAEAs8F,WAAWvzG,GACThI,KAAKqD,IAAI6E,EAAE,sBAAsBF,MACjChI,KAAKyqB,WAAW9Q,MAAM+G,OAAO1Y,EAC/B,CAEAqX,WAAWrX,EAAetH,GACxBV,KAAKqD,IAAI6E,EAAE,sBAAsBF,oBAAwBtH,MACzDV,KAAKyqB,WAAW1I,OAAO1C,WAAW,CAAErX,QAAOtH,cAC7C,iDA5CW86G,EAA0B,oCAA1BA,EAA0BrtE,UAAA,8BAAAkC,OAAA,CAAAnwC,KAAA,WAAA8H,MAAA,YAAA2mC,KAAA,WAAA8sE,WAAA,kBAAAj6F,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,43BAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDavC9pC,MAjCA,EAAAm3G,GAAA,eAiCAn3G,CAhCC,EAAAo3G,GAAA,eAgCDp3G,CAfC,EAAAq3G,GAAA,sBAlBDr3G,MAAA+pC,EAAAitE,UAAAj7F,KAAA,MAiBA/b,cAAA+pC,EAAAitE,UAAAh7F,OAAA,MAgBAhc,cAAA+pC,EAAAitE,UAAA97F,OAAA,sBCnBQ6vB,MAAe9qC,MACfiqC,MAAaj+B,MACbk+B,KACAmtE,MAA6B1rE,OAAA,oGAGxBkrE,CAA2B,6DCpBtC92G,MAAA,gBAAUA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,QAAA,OAAAA,MAASg4C,EAAAu/D,WAAU,GAA+Cv3G,MAAA,iBAAWA,gCAAxDA,MAAA,QAAAg4C,EAAAw/D,aCa1B,IAAMC,GAAuB,MAA9B,MAAOA,EATbt8G,cAUEG,KAAAk8G,YAAWx+D,SAEXu+D,WACEnpG,OAAOrC,KAAKzQ,KAAKk8G,WAAY,SAC/B,iDALWC,EAAuB,oCAAvBA,EAAuBhuE,UAAA,sBAAAkC,OAAA,CAAA6rE,SAAA,gBAAA9tE,MAAA,EAAAC,KAAA,EAAAC,OAAA,4FAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDdpC9pC,MAAA,EAAA03G,GAAA,uBAAA13G,MAAA+pC,EAAAytE,WAAA,qBCQQttE,MAAajqC,MACbkqC,KACAmtE,MAA6BltE,cAAA,YAIxBqtE,CAAuB,+BCblCz3G,MAAA,gBACEA,MAAA,YACFA,8BAFsDA,MAA5C,QAAAopC,EAAAuuE,UAA4C33G,CAAzB,oBAAyBA,CAAD,kBCahD,IAAM43G,GAAuB,MAA9B,MAAOA,EATbz8G,cAUEG,KAAAq8G,WAAU3+D,yDADC4+D,EAAuB,oCAAvBA,EAAuBnuE,UAAA,2BAAAkC,OAAA,CAAAgsE,QAAA,eAAAjuE,MAAA,EAAAC,KAAA,EAAAC,OAAA,kGAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDdpC9pC,MAAA,EAAA63G,GAAA,uBAAA73G,MAAA+pC,EAAA4tE,UAAA,qBCQQztE,MAAajqC,MACbkqC,KACAmtE,MAA6BltE,cAAA,YAIxBwtE,CAAuB,oBCVL,MAEzBE,GAAe,CACjBC,qBAAsB,8EACtBC,iBAAkB,+CAClBC,iCAAkC,uEAClCC,mCAAoC,2EACpCC,8BAA+B,iGAG7BC,GAAoB,CACtBC,mBAAoBA,OACpBvxB,QAASA,OACTwxB,QAASA,OACTC,OAAQA,OACRx+D,KAAMA,OACNy+D,sBAAuBA,OACvBl+F,GAAI,EACJm+F,QAAS,CACL,CACI9oG,KAAM,eACNm2B,cAAc,IAGtB4yE,OAAQ,CACJzjG,MAAO,CAAC,GAEZ0jG,eAAgB,CAAC,EACjB/9F,MAAO,CAAC,EACRg+F,UAAW,CAAC,EACZC,WAAYA,OACZC,SAAUA,OACV7uE,KAAMA,OACNh1B,MAAO,CACHohC,WAAW,EACX0iE,WAAW,EACXC,aAAa,EACbC,WAAW,EACXC,SAAS,GAEbC,QAASA,QAGPC,GAAqB,IAAI7sE,MAAe,qBAAsB,CAChE9vC,WAAY,OACZF,QAASA,IAAMu7G,KAMbuB,IAJsB,IAAI9sE,MAAe,sBAAuB,CAClE9vC,WAAY,OACZF,QAASA,IAAM67G,KAEM,IAAI7rE,MAAe,mBAAoB,CAC5D9vC,WAAY,OACZF,QAASA,MAAQ,MAGrB,IA+DM+8G,GAAc,MAApB,MAAMA,EACFC,YACI,SAAOA,QACX,EAEJD,SAAe98G,UAAI,SAAAgtC,GAAA,WAAAA,GAAyF8vE,EAAc,EAC1HA,EAAe3lC,WAtC2F3zE,MAAE,CAAA2mD,MAsCI2yD,EAAc/8G,QAAd+8G,EAAc98G,UAAAC,WAAc,SANtI68G,CAAc,KAYpB,IAAIE,GACH,SAAUA,GACPA,SAAyBC,YAAiB,cAC1CD,EAAyBr5G,KAAU,OACnCq5G,EAAyBp5G,KAAU,OACnCo5G,EAAyBE,sBAA2B,wBACpDF,EAAyBG,QAAa,UACtCH,EAAyB55G,OAAY,SACrC45G,EAAyBI,SAAc,WACvCJ,EAAyBK,WAAgB,aACzCL,EAAyBM,QAAa,UACtCN,EAAyBO,mBAAwB,qBACjDP,EAAyBQ,QAAa,UAX/BR,CAYX,CAZC,CAYEA,IAAwD,CAAC,GACxDS,GACH,SAAUA,GACPA,SAAkBC,UAAe,YACjCD,EAAkBE,cAAmB,gBAF9BF,CAGX,CAHC,CAGEA,IAA0C,CAAC,GAE9C,MAAMG,GACFj/G,YAAYk/G,GACR/+G,KAAK++G,KAAOA,EACZ/+G,KAAKg/G,QAAUh/G,KAAK++G,KAAKvhE,iBAAiByhE,gBAAgBj/G,KAAK++G,KAAK9gE,UACxE,CACAma,gBACI,OAAAp4D,KAAKg/G,SAAShiD,kBAAkB5E,gBACzBp4D,IACX,CACAk/G,aACI,OAAOl/G,KAAKg/G,SAAS/4C,SAAS/xB,aAClC,CACAs3C,UACIxrF,KAAKg/G,SAASxzB,UACdxrF,KAAKg/G,QAAU,IACnB,EAGJ,MAYMG,GAAqBA,CAACC,EAAczsB,KACtCysB,GAAgBA,aAAwBC,SAAW1sB,EAAS2sB,SAASF,EAAc,UAAW,QAAO,EAGzG,MAAMG,GACF1/G,YAAYk/G,GACR/+G,KAAK++G,KAAOA,EACZ/+G,KAAKw/G,QAAUx/G,KAAK++G,KAAKU,IAAI5M,mBAAmB7yG,KAAK++G,KAAKx7G,SAAW,CAAC,GACtEvD,KAAKw/G,QAAQpnD,gBACbp4D,KAAK++G,KAAKW,OAAOC,WAAW3/G,KAAKw/G,QACrC,CACApnD,gBACI,OAAAp4D,KAAKw/G,SAASpnD,gBACPp4D,IACX,CACAk/G,aACI,IAAKl/G,KAAKw/G,QACN,OAAO,KACX,MAAMpK,EAAYp1G,KAAKw/G,QAAQpK,UAC/B,OAAyB,IAArBA,EAAUprG,QAAgBorG,EAAU,GAAGp/D,WAAa4pE,KAAKC,aACzD7/G,KAAK6tD,QAAUunD,EAAU,IAGzBp1G,KAAK6tD,QAAUx6C,SAASC,cAAc,OACtCtT,KAAK6tD,QAAQiyD,UAAU1K,IAEpBp1G,KAAK6tD,OAChB,CACA29B,UACSxrF,KAAKw/G,UAEwB,IAA9Bx/G,KAAKw/G,QAAQpK,UAAU,KACvBp1G,KAAK6tD,SAAStM,YAAYw+D,YAAY//G,KAAK6tD,SAC3C7tD,KAAK6tD,QAAU,MAEnB7tD,KAAKw/G,QAAQh0B,UACbxrF,KAAKw/G,QAAU,KACnB,EACH,IAEKQ,GAAc,MAApB,MAAMA,EACFngH,YAAY6/G,GACR1/G,KAAK0/G,OAASA,CAClB,CACAO,mBAAmBC,EAASC,EAAWC,EAAe,CAAC,GACnD,IAAIZ,EACJ,MAtDe7kG,IAAUA,aAAiBizE,MAsDtCyyB,CAAcH,IACdE,EAAa5lE,UAAY2lE,EACzBX,EAAUx/G,KAAKsgH,eAAeJ,EAASE,IAGvCZ,EA/DS7kG,IAA2B,mBAAVA,EA8DrB4lG,CAAYL,GACPlgH,KAAKi/G,gBAAgBiB,GA7DnBvlG,IAAUA,aAAiB6lG,oBA+DlCC,CAAeP,GACV,CACNhB,WAAYA,IAAMgB,EAAQA,SAIpB,CACNhB,WAAYA,IAAMgB,GAGnBV,CACX,CACAc,eAAeb,EAAKl8G,GAChB,OAAO,IAAIg8G,GAAO,CACdE,MACAl8G,UACAm8G,OAAQ1/G,KAAK0/G,QAErB,CACAT,gBAAgBhhE,GACZ,OAAO,IAAI6gE,GAAQ,CACf7gE,YACAT,iBAAkBx9C,KAAKw9C,kBAE/B,EAEJwiE,SAAe9+G,UAAI,SAAAgtC,GAAA,WAAAA,GAAyF8xE,GA7KFt7G,MA6KkCA,OAAiB,EAC7Js7G,EAAe3nC,WA9K2F3zE,MAAE,CAAA2mD,MA8KI20D,EAAc/+G,QAAd++G,EAAc9+G,UAAAC,WAAc,SAxCtI6+G,CAAc,KA8CdU,GAAe,MAArB,MAAMA,EACF7gH,YAAY8gH,EAAiBC,EAAgBC,EAAgBrE,GACzDx8G,KAAK4gH,eAAiBA,EACtB5gH,KAAK6gH,eAAiBA,EACtB7gH,KAAKw8G,aAAeA,EACpBx8G,KAAK8gH,eAAiB,IAAIr0B,IAC1BzsF,KAAK+gH,6BAA+B,IAAIt0B,IACxCzsF,KAAKghH,gBAAkB,IAAIzpG,KAC3BvX,KAAKihH,eAAeN,EACxB,CAUAO,YAAY7sG,EAAMsF,GAEd,GADiB3Z,KAAK8gH,eAAe/6G,IAAIsO,GAC3B,CACV,MAAM8sG,EAAanhH,KAAKohH,WAAW,CAC/B95F,OAAQ,uBACR+5F,WAAY1C,GAAkBC,UAC9BvqG,SAEJrU,KAAKshH,WAAWH,EACpB,MAEInhH,KAAK8gH,eAAez3G,IAAIgL,EAAMsF,GAC9B3Z,KAAKuhH,oBAAoB,CACrBltG,OACAiT,OAAQ42F,GAAyBC,YACjCx4C,SAAUhsD,GAGtB,CAOA6nG,YAAYntG,GACR,OAAOrU,KAAK8gH,eAAelO,IAAIv+F,GAAQrU,KAAK8gH,eAAe/6G,IAAIsO,GAAQ,IAC3E,CAMAotG,eACI,OAAOzhH,KAAK8gH,eAAeY,KAAO1hH,KAAK8gH,eAAiB,IAC5D,CAOAa,qBAAqBttG,EAAMsF,GACvB,GAAI3Z,KAAK+gH,6BAA6BnO,IAAIv+F,GAAO,CAC7C,MAAM8sG,EAAanhH,KAAKohH,WAAW,CAC/B95F,OAAQ,gCACR+5F,WAAY1C,GAAkBE,cAC9BxqG,SAEJrU,KAAKshH,WAAWH,EACpB,MAEInhH,KAAK+gH,6BAA6B13G,IAAIgL,EAAMsF,EAEpD,CAOAioG,qBAAqBvtG,GACjB,OAAOrU,KAAK+gH,6BAA6BnO,IAAIv+F,GAAQrU,KAAK+gH,6BAA6Bh7G,IAAIsO,GAAQ,IACvG,CAMAwtG,wBACI,OAAO7hH,KAAK+gH,6BAA6BW,KAAO1hH,KAAK+gH,6BAA+B,IACxF,CASApyE,KAAKt6B,GACDrU,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyBr5G,KAC9D,CAMA45C,KAAKpqC,GACDrU,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyBp5G,KAC9D,CAQAo4G,sBAAsB7oG,EAAM0tG,GACxB/hH,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyBE,sBAAuB2D,EACrF,CAMA/E,QAAQ3oG,GACJrU,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyBG,QAC9D,CAMApB,OAAO5oG,GACHrU,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyB55G,OAC9D,CAOAk5G,SAASnpG,EAAM2tG,GACXhiH,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyBI,SAAU0D,EACxE,CAOAzE,WAAWlpG,EAAM+qG,EAAcgB,GAC3B,MAAMz6C,EAAW3lE,KAAKwhH,YAAYntG,GAClC,GAAKsxD,GAIL,GAAIy5C,EAAc,CACd,MAAMI,EAAUx/G,KAAK6gH,eAAeZ,mBAAmBb,EAAcz5C,EAASw6C,UAAWC,GACnFF,EAAUV,EAAQN,aACpBgB,GACAf,GAAmBe,EAASlgH,KAAK2yF,UACjChtB,EAAS43C,WAAW2C,GACpBv6C,EAAS65C,QAAUA,EACnBx/G,KAAKuhH,oBAAoB,CACrBltG,OACAiT,OAAQ,aACRq+C,cAIJ3lE,KAAKshH,WAAW,UAExB,OAnBIthH,KAAKiiH,2BAA2B5tG,EAoBxC,CAMAwpG,QAAQxpG,GACJrU,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyBM,QAC9D,CAMAzB,mBAAmB1oG,GACfrU,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyBO,mBAC9D,CAMAjzB,QAAQn3E,GACJrU,KAAK8hH,sBAAsBztG,EAAM6pG,GAAyBQ,SAC1D1+G,KAAK8gH,eAAelhG,OAAOvL,EAC/B,CAOA6tG,gBAAgBF,GACZG,MAAMD,gBAAgBF,EAC1B,CAIAI,UACIpiH,KAAK8gH,eAAe3uG,QAAQ,CAACwzD,EAAUtxD,KACnCsxD,EAASh3B,OACT3uC,KAAKuhH,oBAAoB,CACrBltG,OACAiT,OAAQ,OACRq+C,YACH,EAET,CAOA08C,QAAQz/F,GACJ,MAAM0/F,EAAUtiH,KAAKwhH,YAAY5+F,GAAS2/F,aAAe,IACnD7xG,EAAWkS,GAASlS,UAC1B2xG,SAAQ,CAAE3xG,cAAa4xG,GAC3B,CAMA,oBAAIE,GACA,OAAOxiH,KAAKghH,gBAAgB/nC,cAChC,CAIA6oC,sBAAsBztG,EAAMouG,EAAQC,GAChC,MAAM/8C,EAAW3lE,KAAKwhH,YAAYntG,GAC9BsxD,GACAA,EAAS88C,GAAQC,GACjB1iH,KAAKuhH,oBAAoB,CACrBltG,OACAiT,OAAQm7F,EACR98C,cAIJ3lE,KAAKiiH,2BAA2B5tG,EAExC,CACAktG,qBAAsBltG,OAAMiT,SAAQq+C,aAChC3lE,KAAKghH,gBAAgB3mG,KAAK,CAAEhG,OAAMiT,SAAQq+C,YAC9C,CACAs7C,eAAeN,GACX3gH,KAAK2yF,SAAWguB,EAAgBM,eAAe,KAAM,KACzD,CACAgB,2BAA2B5tG,GACvB,MAAM8sG,EAAanhH,KAAKohH,WAAW,CAC/B95F,OAAQ,mBACR+5F,WAAY1C,GAAkBC,UAC9BvqG,SAEJrU,KAAKshH,WAAWH,EACpB,CACAG,WAAW/wG,EAASoyG,EAAmBnyF,OACnC,GAAIxwB,KAAK4gH,eAAe3C,YACpB,MAAM,IAAI0E,EAAiBpyG,EACnC,CACA6wG,YAAa95F,SAAQ+5F,aAAYhtG,SAC7B,OAAOrU,KAAKw8G,aAAal1F,GAAQ1T,QAAQ,IAAIytG,IAAc,IAAIhtG,KACnE,EAEJqsG,SAAgBx/G,UAAI,SAAAgtC,GAAA,WAAAA,GAAyFwyE,GA5cHh8G,MA4coCA,OA5cpCA,MA4coEs5G,IA5cpEt5G,MA4c+Fs7G,IA5c/Ft7G,MA4c0Ho5G,IAAkB,EACtP4C,EAAgBroC,WA7c0F3zE,MAAE,CAAA2mD,MA6cKq1D,EAAez/G,QAAfy/G,EAAex/G,UAAAC,WAAc,SAzRxIu/G,CAAe,KAgafkC,GAAiB,MAAvB,MAAMA,EACF/iH,YAAYgjH,EAASlwB,EAAUmwB,EAAiBjC,EAAgBrjE,EAAkBulE,EAAUC,GACxFhjH,KAAK6iH,QAAUA,EACf7iH,KAAK2yF,SAAWA,EAChB3yF,KAAK8iH,gBAAkBA,EACvB9iH,KAAK6gH,eAAiBA,EACtB7gH,KAAKw9C,iBAAmBA,EACxBx9C,KAAK+iH,SAAWA,EAChB/iH,KAAKgjH,eAAiBA,EACtBhjH,KAAKijH,gBAAkB,IAAIx2B,GAC/B,CACAv9C,YACI,EAAIg0E,OAAiBljH,KAAK+iH,YAE1B/iH,KAAK6gH,eAAerjE,iBAAmBx9C,KAAKw9C,iBAC5Cx9C,KAAKmjH,YACT,CACA50D,YAAY9tB,GACRzgC,KAAKojH,cAAc3iF,EACvB,CACAhpB,cACIzX,KAAKqjH,cACT,CAKAF,YACI,MAAMG,EAActjH,KAAK6iH,QAAQ3uE,cACjC,GAAIl0C,WAAKujH,SACL,OACJ,MAAM/D,EAAUx/G,KAAK6gH,eAAeZ,mBAAmBjgH,KAAKujH,SAAUvjH,KAAKmgH,UAAWngH,KAAKogH,cACrFoD,EAAehE,EAAQN,aACvBuE,KAAYtB,OAAMmB,EAAa,IAC7BtjH,KAAKgjH,kBACLhjH,KAAKgiH,YAAc,CAAC,KACpBwB,GAAgB,CAAEtD,QAASsD,KAEnCxjH,KAAKmgH,UAAYngH,KAAKmgH,WAAa,SAASsD,EAAUzkG,KACtDmgG,GAAmBqE,EAAcxjH,KAAK2yF,UACtC3yF,KAAK0jH,iBAAiB,CAAEJ,cAAanD,UAAWngH,KAAKmgH,UAAWX,YAChEx/G,KAAK2jH,aAAa3jH,KAAK4jH,cAAe5jH,KAAK6jH,gBAC3C7jH,KAAK8jH,wBAAwB9jH,KAAK4jH,cAAe5jH,KAAKmgH,UAC1D,CACAuD,kBAAmBJ,cAAanD,YAAWX,YACvCx/G,KAAK4jH,cAAgB,IAAKN,EAAYS,OAAQ5D,YAAWX,UAC7D,CACAmE,aAAaC,EAAeI,GACxB,IAAKA,IAAcJ,EACf,OACJ,MAAMK,EAAaD,EAAUv3G,MAAM,KACnCw3G,EAAWj6G,QACPi6G,EAAW9xG,QAAQ6xG,IACfhkH,KAAK2yF,SAASuxB,SAASN,EAAcxG,OAAO+G,kBAAmBH,EAAS,EAEpF,CACAI,gBAAgBR,EAAeI,GAC3B,IAAKA,IAAcJ,EACf,OACJ,MAAMK,EAAaD,EAAUv3G,MAAM,KACnCw3G,EAAWj6G,QACPi6G,EAAW9xG,QAAQ6xG,IACfhkH,KAAK2yF,SAAS0xB,YAAYT,EAAcxG,OAAO+G,kBAAmBH,EAAS,EAEvF,CAQAF,wBAAwBF,EAAezD,GACnCyD,GAAiB5jH,KAAK8iH,gBAAgB5B,YAAYf,EAAWyD,EACjE,CACAR,eAAgBjD,YAAWoD,WAAUvB,aAAY6B,iBAAgBzD,iBAC7DD,IAAcA,EAAUrrD,aAAe90D,KAAKskH,kBAAkBnE,GAC9DoD,IAAaA,EAASzuD,aAAe90D,KAAKukH,qBAAqBhB,GAC/DvB,IAAeA,EAAWltD,aAAe90D,KAAKwkH,mBAAmBxC,GACjE6B,IAAmBA,EAAe/uD,aAAe90D,KAAKykH,mBAAmBZ,GACzEzD,IAAiBA,EAAatrD,aAAe90D,KAAK0kH,qBAAqBtE,EAC3E,CACAkE,mBAAoB/kD,gBAAeC,iBAC/B,MAAMshD,EAAiB9gH,KAAK2kH,wBACvB7D,IAAmB9gH,KAAK4jH,gBAE7B5jH,KAAK4kH,qBAAqB9D,EAAgBvhD,GAC1Cv/D,KAAK4jH,cAAgB,IAAK5jH,KAAK4jH,cAAezD,UAAW3gD,GACzDshD,EAAez3G,IAAIm2D,EAAcx/D,KAAK4jH,eAC1C,CACAW,sBAAuB/kD,iBACfx/D,KAAK4jH,eAAiB5jH,KAAKmgH,WAC3BngH,KAAK8iH,gBAAgBvF,WAAWv9G,KAAKmgH,UAAW3gD,GAC3B,MAAjBA,EACAx/D,KAAK8iH,gBAAgB9F,QAAQh9G,KAAKmgH,WAGlCngH,KAAK8iH,gBAAgB7F,OAAOj9G,KAAKmgH,YAIrCngH,KAAKmjH,WAEb,CACAqB,oBAAqBhlD,iBACjBx/D,KAAKmgH,WAAangH,KAAK8iH,gBAAgBtF,SAASx9G,KAAKmgH,UAAW3gD,EACpE,CACAilD,oBAAqBllD,gBAAeC,iBAChCx/D,KAAKokH,gBAAgBpkH,KAAK4jH,cAAerkD,GACzCv/D,KAAK2jH,aAAa3jH,KAAK4jH,cAAepkD,EAC1C,CACAklD,sBAAuBllD,iBACfx/D,KAAK4jH,eAAiB5jH,KAAKmgH,WAAangH,KAAKujH,SAC7CvjH,KAAK8iH,gBAAgBvF,WAAWv9G,KAAKmgH,UAAWngH,KAAKujH,SAAU/jD,GAG/Dx/D,KAAKmjH,WAEb,CACAwB,uBACI,MAAM7D,EAAiB9gH,KAAK8iH,gBAAgBrB,eAC5C,OAAIzhH,KAAKijH,gBAAgBrQ,IAAIkO,GAClB9gH,KAAKijH,gBAAgBl9G,IAAI+6G,IAGhC9gH,KAAKijH,gBAAgB55G,IAAIy3G,EAAgBA,GAClCA,EAEf,CACAuC,eACI,MAAMvC,EAAiB9gH,KAAK2kH,uBACtBf,EAAgB5jH,KAAK4jH,eACtBA,IAAkB9C,IAEvB9gH,KAAK6kH,cAAc,CAAEjB,gBAAe9C,mBACpC9gH,KAAK8kH,qBACL9kH,KAAK+kH,uBACT,CACAF,eAAgBjB,gBAAe9C,mBAC3B,MAAQX,aAAcyD,EACtB5jH,KAAKglH,aAAapB,GAClB5jH,KAAKilH,qBAAqBrB,GAC1B5jH,KAAK4kH,qBAAqB9D,EAAgBX,EAC9C,CACA6E,aAAapB,GACTA,EAAcpE,SAASh0B,SAAWo4B,EAAcpE,QAAQh0B,SAC5D,CACAy5B,qBAAqBrB,GACjBA,EAAcp4B,SAClB,CACAo5B,qBAAqB9D,EAAgBX,GACjCW,EAAelhG,OAAOugG,EAC1B,CACA2E,qBACI9kH,KAAK4jH,mBAAgB7zG,CACzB,CACAg1G,uBACI/kH,KAAKijH,gBAAgBn0B,OACzB,EAEJ8zB,SAAkB1hH,UAAI,SAAAgtC,GAAA,WAAAA,GAAyF00E,GApvBLl+G,MAovBwCA,OApvBxCA,MAovBkEA,OApvBlEA,MAovB2Fg8G,IApvB3Fh8G,MAovBuHs7G,IApvBvHt7G,MAovBkJA,OApvBlJA,MAovBkLwgH,OApvBlLxgH,MAovB0Mq5G,IAAgB,EACpU6E,EAAkB7tC,UArvBwFrwE,MAAE,CAAA8N,KAqvBTowG,EAAiBz0E,UAAA,qBAAAkC,OAAA,CAAAkzE,SAAA,WAAAvB,WAAA,aAAA7B,UAAA,YAAA0D,eAAA,iBAAAzD,aAAA,gBAAAprC,YAAA,EAAAxzD,SAAA,CArvBV9c,SAolBpGk+G,CAAiB,KAyLjBuC,GAAc,MAApB,MAAMA,GAENA,SAAejkH,UAAI,SAAAgtC,GAAA,WAAAA,GAAyFi3E,EAAc,EAC1HA,EAAehwB,UAhxB2FzwF,KAAE,CAAA8N,KAgxBC2yG,IAC7GA,EAAe/vB,UAjxB2F1wF,MAAE,CAAA+rC,QAAA,CAixB2B4kD,SAJjI8vB,CAAc,8BC/1BdzgH,MAAA,6BAAGA,MAAA,gBAAAopC,EAAAs3E,gBAAAt3E,EAAA5tC,OAAAg9F,cAAA,+BAKHx4F,MAAA,cAAUA,MAAA,GAAyBA,QAAYA,MAAA,mCAArCA,cAAAopC,EAAA5tC,OAAAg9F,yCAIVx4F,MAAA,WAEAA,MAAA,aACEA,MAAA,WACFA,0CAJkFA,MAA7E,WAAA2gH,EAA6E3gH,CAAnD,MAAAopC,EAAA5tC,OAAAg9F,aAAAx4F,MAAmDA,CAAD,MAAAopC,EAAA5tC,OAAAya,OAGtDjW,MAAA,GAA4BA,MAA5B,MAAAopC,EAAA5tC,OAAAg9F,aAAAx4F,MAA4BA,CAAD,MAAAopC,EAAA5tC,OAAAya,kCAMtDjW,MAAA,WAEAA,MAAA,aACEA,MAAA,WACFA,0CAJuGA,MAAlG,WAAA4gH,EAAkG5gH,CAAxE,MAAAopC,EAAAy3E,YAAAz3E,EAAA5tC,OAAAg9F,aAAA,OAAAx4F,MAAwEA,CAAD,MAAAopC,EAAA5tC,OAAAya,OAG3EjW,MAAA,GAAmDA,MAAnD,MAAAopC,EAAAy3E,YAAAz3E,EAAA5tC,OAAAg9F,aAAA,SAAAx4F,MAAmDA,CAAD,MAAAopC,EAAA5tC,OAAAya,iCAL/EjW,MAjBA,EAAA8gH,GAAA,UAiBA9gH,CAjBoB,EAAA+gH,GAAA,IAiBpB/gH,CAbyB,EAAAghH,GAAA,IAazBhhH,CARe,EAAAihH,GAAA,gCAXjBjhH,MAAA,cAAAi6C,EAAA7Q,EAAA3wB,WAAAyoG,aAAU,EAAV,kBAAUjnE,EAAK,EAAf,QAAeA,EAAV,EAAL,UAAKA,EAAE,OCcF,IAAMknE,GAA0B,MAAjC,MAAOA,EATbhmH,cAWEG,KAAAE,KAAOw9C,MAAMlhB,WAEbx8B,KAAAmd,SAAWugC,MAAMlhB,WAEjBx8B,KAAA8lH,gBAAepxG,OAAS,IACH,IAarB0wG,gBAAgBzqG,GACd,OAAOA,GAAO/G,QAAQ,MAAO,GAC/B,CAEA2xG,YAAYQ,EAAuB/nE,EAAewpC,GAEhD,IAAKu+B,EAAe,OAAOA,EAG3B,IAAIC,EAAiBD,EAClBnyG,QAAQ,cAAe,IACvBA,QAAQ,cAAe,IAG1BoyG,SAAiBA,EACdpyG,QAAQ,aAAc,SAASoqC,KAC/BpqC,QAAQ,cAAe,UAAU4zE,KAG/Bw+B,EAAe94G,SAAS,YAC3B84G,IAAmBA,EAAe94G,SAAS,KAAO,IAAM,KAAO,SAAS8wC,KAGrEgoE,EAAe94G,SAAS,aAC3B84G,IAAmBA,EAAe94G,SAAS,KAAO,IAAM,KAAO,UAAUs6E,KAEpEw+B,CACT,iDA/CWH,EAA0B,oCAA1BA,EAA0B13E,UAAA,8BAAAkC,OAAA,CAAAnwC,KAAA,WAAAid,SAAA,gBAAAixB,MAAA,EAAAC,KAAA,EAAAC,OAAA,mIAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,IDlBvC9pC,MAAA,GAGAA,MAAA,EAAAuhH,GAAA,iBAHAvhH,MAAA,IAAA+pC,EAAAq3E,eAAA,KAGAphH,cAAA,OAAAi6C,EAAAlQ,EAAAvuC,SAAAy+C,EAAAu+C,aAAA,sBCWIgpB,MACAf,GAAcxgH,IAAA2rC,OAAA,46BAGLu1E,CAA0B,2BCRjCnhH,MAAA,6BAAkBA,MAAA,6BCUjB,IAAMyhH,GAA2B,MAAlC,MAAOA,EAZbtmH,cAcEG,KAAAE,KAAOw9C,MAAMlhB,WAGbx8B,KAAAgI,SAAQ01C,OAAc,GAGtB19C,KAAAmd,SAAWugC,MAAMlhB,WAGjBx8B,KAAAy7G,cAAa/9D,OAAmC,MAGhD19C,KAAA2uC,QAAO+O,QAAe,GAEtB19C,KAAAomH,mBAAkB1xG,OAAS,KACzB,MAAM2xG,EAAarmH,KAAKE,OAAOm9F,MAC/B,IAAKgpB,EAAY,MAAO,GACxB,MAAM17F,EAAO07F,EACV55G,MAAM,KACNhM,IAAI25B,GAAKA,EAAE94B,QACXmB,OAAO23B,GAAKA,EAAE5tB,WAAW,sBACzB/L,IAAI25B,GAAKA,EAAE3tB,MAAM,KAAK,IACzB0hB,eAAQ9qB,IAAI,OAAQsnB,GACbA,GACN,CAAEtU,UAAW,oEA1BL8vG,EAA2B,oCAA3BA,EAA2Bh4E,UAAA,4BAAAkC,OAAA,CAAAnwC,KAAA,WAAA8H,MAAA,YAAAmV,SAAA,eAAAs+F,WAAA,iBAAA9sE,KAAA,YAAAP,MAAA,GAAAC,KAAA,EAAAC,OAAA,wOAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDpBtC9pC,MAFF,UAEEA,CAFkC,WAIhCA,MAAA,+BACAA,MAAA,YAAmCA,MAAA,GACrCA,UAEAA,MAAA,WAEEA,MAAA,EAAA4hH,GAAA,yBAAA5hH,OAOAA,MAHA,sBAGAA,CAH4D,2BAG5DA,CAFqE,gCAIzEA,iBAf6BA,MAAA,GAAgBA,MAAhB,OAAA+pC,EAAAvuC,OAAgBwE,CAAD,WAAA+pC,EAAAtxB,YACLzY,MAAA,GAAAA,MAAA,IAAA+pC,EAAAvuC,OAAAwa,OAAA+zB,EAAAvuC,OAAAya,MAAA,IAKnCjW,MAAA,GAAAA,MAAA+pC,EAAA23E,mBAIiB1hH,MAAA,GAAAA,MAAA,WAAA+pC,EAAAvuC,OAAAoC,MACKoC,cAAA,UAAA+pC,EAAAvuC,OAAA0kB,MAE2BlgB,QAAkDA,MAAlD,OAAA+pC,EAAAE,OAAkDjqC,CAAnC,OAAA+pC,EAAAvuC,OAAmCwE,CAAnB,QAAA+pC,EAAAzmC,QAAmBtD,CAAD,aAAA+pC,EAAAgtE,8BCJlGoK,GACA1J,GACAG,GACAd,GACA+K,MAAoBj2E,OAAA,ykBAKX61E,CAA2B,KCEjC,MAAMK,GAA0B,eCfhC,IAAMC,GAAoB,MAA3B,MAAOA,EAIXC,GACAC,GAIA9mH,cAPAG,KAAAqD,OAAMtD,MAAS,CAAC0mH,yBA6IhBzmH,KAAAyuG,YAAc,IAAIxB,GAChB/sG,GAAQA,EAAKutG,MACbvtG,GAAQA,EAAK0mH,YA6Bf5mH,KAAA6mH,SAAW,CAAC9kH,EAAW7B,IAAyBA,EAAK0mH,WApKnD5mH,KAAK8mH,OACP,CAEOC,aAAaC,GAClBhnH,KAAKqD,IAAI6E,EAAE,+BAEXlI,MAAK0mH,EAA2BM,CAClC,CAEOC,aAAaC,GAClBlnH,KAAKqD,IAAI6E,EAAE,gBACXlI,MAAK2mH,EAAaO,CACpB,CAEOC,mBAAmBC,GACxBpnH,KAAKqD,IAAI6E,EAAE,sBACXlI,KAAKub,WAAWrQ,KAAOk8G,CACzB,CAEOC,mBAAmB5oB,EAA8Bv8F,GACtDlC,KAAKqD,IAAI6E,EAAE,gCAAiC,CAAEu2F,aAAYv8F,UAC1D,MAAMolH,EAAiBplH,EAAMzB,IAAIgtC,GAAKztC,MAAKunH,EAA0B9oB,EAAYhxD,EAAGvrC,IAcpF,OAXqBolH,EAAe7mH,IAAIgtC,IACtC,IAAKA,EAAEm5E,WAAY,OAAOn5E,EAC1B,MAAMyhD,EAAWlvF,MAAKwnH,EAAa/oB,EAAYhxD,EAAG65E,GAGlD75E,SAAEyhD,SAAWA,EACNzhD,GAMX,CAEA85E,GAA0B9oB,EAA8Bv+F,EAAkBunH,GAGxE,GADAznH,KAAKqD,IAAI6E,EAAE,qCAAqChI,GAAM8e,KAAM,CAAEy/E,aAAYv+F,OAAMunH,cAC3EhpB,EAAY,MAAM,IAAIjuE,MAAM,+BACjC,IAAKtwB,EAAM,MAAM,IAAIswB,MAAM,6BAG3B,MAAMk3F,EAAgBjpB,EAAWkpB,kBAAoBnB,GAC/CoB,EAAQnpB,EAAWM,wBACnB8oB,EAAQppB,EAAWO,wBAEnB8oB,EAAMrpB,EAAWK,kBAEjBipB,EAActpB,EAAWupB,mBACzBC,EAAsBR,EACzBhlH,OAAOgrC,KAAMA,GAAE2vD,kBAAoB3vD,GAAE2vD,kBAAoB2qB,GACzDr/G,KAAK+kC,IAAKA,IAAKvtC,GAIZgoH,GAAYhoH,GAAMgL,OAAO48G,GACzBlB,GAAac,EACfO,GAAwB/nH,EAAKgL,KAAK28G,IAAQ79G,OAAS,EACnDi+G,KAAyBR,EAAS/+G,KAAK+kC,IAC/BA,GAAEviC,KAAK08G,KAAS,KAAKE,IAAQI,IAInC1jH,GAAyB,IAC1BtE,EACHutG,OAAO,EACPmZ,WAAYA,GACZ/0D,OAAQ3xD,EAAKgL,KAAK08G,GAClB14B,SAAUhvF,EAAKgL,KAAK28G,IAEtB,OAAA7nH,KAAKqD,IAAI6E,EAAE,SAAU,CAAE1D,YAChBA,EACT,CAEOsiH,QACL9mH,KAAKqD,IAAI6E,EAAE,SAEX,MAAMigH,EAAgB,IAAIxO,GAExB,CAACz5G,EAAsButG,SAClBvtG,EACHutG,UAIDvtG,GAA0BA,EAAKutG,MAG/BvtG,GAA2BA,EAAK0mH,WAGhC1mH,GAQQA,EAAKgvF,UAIhBlvF,KAAKub,WAAa,IAAIi/F,GAAsBx6G,KAAKyuG,YAAa0Z,EAChE,CAEAX,GAAa/oB,EAA8Bv+F,EAAsBunH,GAC/D,MACMG,EAAQnpB,EAAWM,wBAEnBqpB,EAAM3pB,EAAWI,iBACjBipB,EAAMrpB,EAAWK,kBACvB,GALsBL,EAAWkpB,kBAAoBnB,GAMnD,OAAOtmH,EAAKgL,KAJAuzF,EAAWO,yBAICv+F,IAAKgtC,GACbg6E,EAAS/+G,KAAKwhF,GAAMA,EAAUk+B,IAAS36E,EAAU26E,KAG9D,GDlH8B,gBCkH1B3pB,EAAWkpB,iBAA6C,CAC/D,MAAMU,EAAkBnoH,EAAKgL,OAAO48G,GAEpC,OAAOL,EAAShlH,OAAOgrC,GACCA,EAAEviC,KAAK08G,KAAS,KAAKE,IACnBO,EAE5B,CAEE,MAAM,IAAI73F,MAAM,+BAA+BiuE,GAAYkpB,oBAC/D,CASAW,cAAcpoH,EAAsByiB,EAAwB4lG,GAC1D,MAAM9pB,EAAaz+F,MAAK0mH,EAqBxB,OApB8B6B,GAE1B5lG,EAASzM,KAAKqJ,GAAUA,EAAO5E,QAAUza,EAAKya,SASlB8jF,GAAY+pB,qBAExCtoH,EAAKgvF,UAAUllF,OAAS,GAA6B,IAAxB9J,EAAK2xD,QAAQ7nD,SACVy0F,GAAYgqB,uBAE5CvoH,EAAKgvF,UAAUllF,OAAS,GAAK9J,EAAK2xD,QAAQ7nD,OAAS,IACvBy0F,GAAYiqB,qBAEd,IAA1BxoH,EAAKgvF,UAAUllF,MAErB,iDA5KWy8G,EAAoB,sCAApBA,EAAoBxlH,QAApBwlH,EAAoBvlH,WAAA,SAApBulH,CAAoB,KCCpBkC,GAAqB,MAA5B,MAAOA,EAIX9oH,YAAmB+oH,EAA0CtsG,GAA1Ctc,KAAA4oH,aAA0C5oH,KAAAsc,SAF7Dtc,KAAAqD,OAAMtD,MAAS,CAAC4oH,yBAEiE,CAE1EhxG,KAAKzI,EAAsCu4G,GAChDznH,KAAKqD,IAAI6E,EAAE,QAEX,MAAMiV,EAAWjO,IAIjB,GAH8C,SAA/BiO,EAAS0rG,kBAGX,OAGb,MAAMpqB,EAAathF,EAASuhF,wBACtBoqB,EAA4BrqB,GAAYkpB,kBAAoBnB,IAElEuC,SAAsB/oH,KAAKsc,OAAQ,MACjCuH,SAAO,KACL,MAAM9gB,EAAM0kH,IAGNP,EAA8B,MAAlBnkH,IAAM,IAAImI,KACxB,GACAlL,KAAK4oH,WAAWvB,mBAAmB5oB,EAAY17F,GAEnD,GAA4BgN,MAAxBm3G,IAAY,IAAIh8G,KAAmB,CACrClL,KAAK4oH,WAAW7B,aAAatoB,GAC7Bz+F,KAAK4oH,WAAW3B,aAAaC,GAE7B,MAAM8B,EAAe9B,EAAUzkH,OAAOgrC,GAAKq7E,GACtC5B,EAAUhxG,KAAKg0E,GAAKA,EAAEh/E,KAAKuzF,GAAYO,0BAA0B9oF,KAAM+yG,IAAuBA,GAAEn+G,KAAO2iC,EAAEzuB,KACnD,GAAvDyuB,EAAEviC,KAAKuzF,GAAYM,0BAA0B/0F,QACjDhK,KAAK4oH,WAAWzB,mBAAmB6B,EACrC,GACD,EAEL,iDAvCWL,GAAqBjkH,MAAAC,IAAAD,aAAA,sCAArBikH,EAAqB1nH,QAArB0nH,EAAqBznH,WAAA,SAArBynH,CAAqB,+LC0C9BjkH,MAAA,YACEA,MAAA,GACFA,mCAoBEA,MAAA,mBAUEA,MAAA,8BACFA,6CAJEA,MANA,QAAA2qE,EAAA10D,MAMAjW,CANoB,aAAA2qE,EAAAz0D,WAAA++B,EAAAx8B,WAAAorG,gBAAA5uE,EAAAuvE,iBAAA75C,EAAA10D,OAMpBjW,CAJoG,QAAA2qE,EAAA1qD,QAIpGjgB,CAHsB,oBAGtBA,CADuB,iBAIAA,QAAcA,MAAd,OAAA2qE,EAAc3qE,CAAD,WAAAi1C,EAAAj9B,WAAAS,sCAXxCzY,MAAA,EAAAykH,GAAA,oBAAApjE,yBAAArhD,MAAAi1C,EAAAyvE,4CAiBE1kH,MAAA,sBACEA,MAAA,eACAA,MAAA,mBAUEA,MAAA,8BAEJA,+CAXIA,MAAA,GAMAA,MANA,QAAA2kH,EAAA1uG,MAMAjW,CANoB,WAAAi1C,EAAAivE,WAAAN,cAAAe,EAAA1vE,EAAAn3B,gBAAAm3B,EAAAx8B,WAAAorG,gBAMpB7jH,CAJuF,QAAA2kH,EAAA1kG,QAIvFjgB,CAHsB,oBAGtBA,CADuB,iBAIAA,QAAcA,MAAd,OAAA2kH,EAAc3kH,CAAD,WAAAi1C,EAAAj9B,WAAAS,uCAKpCzY,MAFJ,qBAEIA,CAF+F,cAE/FA,CADkF,iBAEhFA,MAAA,GAEJA,UACAA,MAAA,mBAUEA,MAAA,8BAEJA,+CAjB4CA,6CAEtCA,MAAA,GAAAA,MAAA,IAAAi1C,EAAAivE,WAAAna,YAAAh2F,WAAA6wG,GAAA,mCAIF5kH,QAMAA,MANA,QAAA4kH,EAAA3uG,MAMAjW,CANoB,WAAAi1C,EAAAivE,WAAAN,cAAAgB,EAAA3vE,EAAAn3B,gBAAAm3B,EAAAx8B,WAAAorG,gBAMpB7jH,CAJuF,QAAA4kH,EAAA3kG,QAIvFjgB,CAHsB,oBAGtBA,CADuB,iBAIAA,QAAcA,MAAd,OAAA4kH,EAAc5kH,CAAD,WAAAi1C,EAAAj9B,WAAAS,uCAhC1CzY,MAAA,iBAgBEA,MAfA,EAAA6kH,GAAA,uBAeA7kH,CAfmF,EAAA8kH,GAAA,wBAkCrF9kH,8BAnC+CA,MAArC,aAAAi1C,EAAAivE,WAAArtG,WAAqC7W,CAAD,cAAAi1C,EAAAivE,WAAAna,aAgBF/pG,MAAA,GAAAA,MAAA,qBAAAi1C,EAAAktE,oDAyB9CniH,MAAA,YAAsBA,MAAA,aAAOA,MAAA,aAAgDA,MAAA,mBAAAA,MAAA+kH,GAAA,MAAA9vE,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAA+vE,aAAY,GAAEhlH,MAAA,mBAAoBA,WCxG1H,MAAM5B,GAAW,CACfC,KAAK,EACL4mH,gBAAgB,EAChBC,wBAAwB,EACxBC,UAAU,EACVC,UAAU,EACVnlG,SAAS,EACTtJ,OAAQ,IAAIC,KAAa,WAyBpB,IAAMyuG,GAAsB,MAA7B,MAAOA,UAA8B/O,GAMzCgP,GAmBAC,GAGApqH,YACUkH,EACA3D,GACNtD,QAFME,KAAA+G,YACA/G,KAAAoD,sBA3BVpD,KAAAqD,OAAMtD,MAAS,CAAEgqH,yBAAyBjnH,IAG1C9C,MAAAgqH,KAAiBjqH,MAAS,oCAK1BC,KAAAkqH,aAAeC,MAAU3tF,SAAuC,gBAGhEx8B,KAAAoqH,iBAAmB1sE,MAAMlhB,WAGzBx8B,KAAAqqH,oBAAsB3sE,MAAMlhB,WAQ5Bx8B,MAAAiqH,KAAmBziH,KAAUmhH,IACtB3oH,KAAA4oH,cAAaphH,KAAUi/G,IAQvBzmH,KAAAk7G,gBAAex/F,OAAY,gBAAiB,IAAM1b,KAAKyqB,WAAW/H,eAGzE1iB,MAAAsqH,KAAY9uG,OAAU,YAAY,GAE3Bxb,KAAAopH,iBAAgB1tG,OAAY,gBAAiB,KACxC1b,MAAKsqH,IAAf,MACMvnH,EAAM/C,KAAKyqB,WAAWxI,aACtBsoG,EAAcvqH,KAAKkqH,gBAAgBh2E,cAAcv5B,MACjDlY,EAAS8nH,GAAahpH,oBAEtBiD,EAAU/B,EAEZM,EAAIN,OAAO+nH,KAAWA,EAAM9vG,MAAQ8vG,EAAM9vG,MAAQ8vG,EAAM7vG,QAAU,IAAIpZ,oBAAoB2L,SAASzK,IADnGM,EAIJ,OAAOyB,EAAOwF,OAAS,EACnBxF,EACA,CAAC8V,GAAkB/J,QAAQvQ,KAAK+G,UAAW,gCAAiC,CAAE62F,OAAQ2sB,IAAc,GAI1GvqH,KAAA+oB,aAAe/oB,KAAKoD,oBAAoB4lB,QAGxChpB,KAAAmd,YAAWzB,OAAY,WAAY,KACjC,MAAMoH,EAAI9iB,KAAK0c,WAAWS,WAC1B,MAAO,CACLstG,kBAAmB3nG,EAAEg4E,kBACrBytB,eAAgBzlG,EAAE4nG,eAClBC,WAAoC,SAAxB7nG,EAAE+lG,qBAyJlB7oH,KAAA6mH,SAAW,CAAC9kH,EAAW7B,IAAyBF,KAAK4oH,WAAW/B,SAAS9kH,EAAG7B,EA1L/D,CAMboqH,GAgCAp7E,WACE,MAAMhgC,EAAgBlP,KAAK0c,WAAWS,SACI,SAAtCjO,IAAgB25G,oBAGlB7oH,MAAKiqH,EAAiBtyG,KAAKzI,EAAelP,KAAKyqB,WAAWxI,YAC1DjiB,KAAK4oH,WAAa5oH,MAAKiqH,EAAiBrB,YAG1C5oH,KAAKyqB,WAAW9Q,MAAM4uF,eAAe,IAAMvoG,KAAK4pH,yBAClD,CAEAA,yBACE5pH,KAAKqD,IAAIC,KAAK,0BACdtD,KAAKkqH,gBAAgBh2E,cAAc4a,OACrC,CAGA87D,gBAAgB1qH,GACd,OAAOF,KAAKoqH,mBAAsBlqH,GAAMwa,OAAS,GAAM,EACzD,CAEAiK,UACE,MAAMhd,EAAI3H,KAAKqD,IAAI8a,WAAW,UAAW,SAAUne,KAAK0c,WAAWrI,KAAM,KAAMrU,KAAK0c,WAAWrI,MAEzF4vB,EAAQjkC,KAAKyqB,WAAWhI,cAAczY,OAC5C,OAAa,GAATi6B,EACKt8B,EAAEsY,EAAE,KAAM,8BAA8BgkB,KAC1Ct8B,EAAEsY,EAAEjgB,KAAKk7G,eAAev2F,QAAS,KAC1C,CAGAkmG,UAAUlwG,GACR,MAAMugG,EAAel7G,KAAKk7G,eAG1B,GAFAl7G,MAAKgqH,EAAe9hH,EAAE,sBAAsByS,KAAU,CAAEugG,iBAE3C,MAATvgG,EAAe,MAAO,GAC1B,MAAM0nE,EAAcriF,KAAKyqB,WAAWxI,aAAavZ,KAAKoiH,GAAMA,EAAGnwG,OAASA,IAAQD,MAKhF,OAAK2nE,GAILriF,KAAKqD,IAAI6E,EAAE,mBAAoB,CAAEyS,QAAO0nE,gBACjCA,GAJE64B,GAAcvgG,OAASA,EAC1BugG,GAAcxgG,MACdC,EAAQ,IAGhB,CAEAowG,gBACE/qH,KAAK0c,WAAWihC,KAAK+H,aACvB,CAEAslE,sBACEhrH,MAAKsqH,EAAUzqG,OAAO4tB,IAAMA,EAC9B,CAKAq8E,SAASmB,GACP,MAAMtjH,EAAI3H,KAAKqD,IAAIC,KAAK,WAAY,CAAE2nH,sBAChCC,EAAgBlrH,KAAKkqH,eAAeh2E,cAC1CvsC,EAAEO,EAAE,+BAA+B+iH,iBAAiCC,EAAcvwG,UAElFuwG,EAAcvwG,MAAQ,GACtB3a,MAAKsqH,EAAUzqG,OAAO4tB,IAAMA,GAExBw9E,GACFC,EAAc3hD,MAClB,CAEAsgD,WACE,MAAMrnG,EAAgBxiB,KAAKwiB,gBACrB04F,EAAel7G,KAAKk7G,eACpBgQ,EAAgBlrH,KAAKkqH,eAAeh2E,cACpCvsC,EAAI3H,KAAKqD,IAAIC,KAAK,WAAY,CAAEkf,gBAAe04F,iBAKrD,OAAKl7G,KAAKoqH,oBAQVziH,EAAEO,EAAE,oBAGCgzG,EAMD14F,EAAcxY,OAAS,GACzBkhH,EAAcvwG,MAAQugG,EAAaxgG,MAC5B/S,EAAE8R,IAAI,wCAAwCyhG,EAAaxgG,QAAS,CAAEwgG,uBAF/E,GALEgQ,EAAcvwG,MAAQ,GACfhT,EAAE8R,IAAI,oBAZbyxG,EAAcvwG,MAAQ,GACfhT,EAAE8R,IAAI,qBAmBjB,CAGAkwG,eAAejuE,GACb,MAAMl7B,EAAaxgB,KAAKwhB,WAAWhB,WAC7B7Y,EAAI3H,KAAKqD,IAAIC,KAAK,iBAAkB,CAAEqX,MAAO+gC,EAAMusD,OAAOttF,MAAO6F,eACjEmC,EAAW+4B,EAAMusD,OAAOttF,MACzB6F,GAIH7Y,EAAEO,EAAE,qCACJlI,KAAKyqB,WAAW9Q,MAAMnX,IAAImgB,KAJ1Bhb,EAAEO,EAAE,kCACJlI,KAAKyqB,WAAW9Q,MAAMtQ,IAAI,CAACsZ,KAM7BkmB,WAAW,IAAM7oC,KAAKkqH,eAAeh2E,cAAcq1B,OACrD,CAEA4hD,iBACE,MAAM1pG,EAAazhB,KAAKyqB,WAAWxI,aACnC,IAAI1H,EACAva,KAAK+G,UAAUyJ,QADDiR,EAAWzX,OAAS,EACX,uBACA,8BAC3B,OAAAhK,MAAKgqH,EAAe9hH,EAAE,oBAAoBqS,KAAgB,CAAEkH,eACrDlH,CACT,CAEAmvG,aACE1pH,KAAKqD,IAAI6E,EAAE,cACXlI,KAAKyqB,WAAW9Q,MAAMnX,IAAI,KAC5B,CAEA0mH,iBAAiBvuG,GACf,MAAMgI,EAAW3iB,KAAKwiB,gBAChBstD,EAAantD,EAASzM,KAAKqJ,GAAUA,EAAO5E,QAAUA,GAC5D,OAAA3a,MAAKgqH,EAAe9hH,EAAE,2BAA2ByS,eAAmBm1D,IAAc,CAAEntD,aAC7EmtD,CACT,CAGAmsC,SAASC,GACPl8G,KAAKqD,IAAI6E,EAAE,uBAAuBg0G,MAClCppG,OAAOrC,KAAKyrG,EAAU,SACxB,CAIAkP,gBAAgBzwG,GACd,OAAO3a,KAAKyqB,WAAWxI,aAAavZ,KAAKoiH,GAAMA,EAAGnwG,QAAUA,EAC9D,iDA7NWovG,GAAqBrlH,MAAAC,MAAAD,MAAAiM,KAAA,oCAArBo5G,EAAqB57E,UAAA,wBAAAmJ,UAAA,SAAA9I,EAAAC,GAAA,EAAAD,s6CD1DlC9pC,MAAA,sBAKEA,MAAA,mBAAAA,aAAA6yC,GAAA7yC,MAAS+pC,EAAAu8E,sBAAqB,GAG9BtmH,MAAA,WAEEA,MAAA,+BAIAA,MAAA,eAYEA,MAFA,mBAAAA,aAAA6yC,GAAA7yC,MAAS+pC,EAAAhkB,WAAA1I,OAAA3G,aAA8B,EAEvC1W,CAFwC,kBAAAA,aAAA6yC,GAAA7yC,MAChC+pC,EAAAs8E,gBAAe,EACvBrmH,CADwB,mBAAAA,aAAA6yC,GAAA7yC,MACf+pC,EAAAu8E,sBAAqB,GAElCtmH,UAGAA,MAAA,+BAgBEA,MAPF,aAOEA,CADD,cACWA,MAAA,qBACZA,UAGAA,MAAA,EAAA2mH,GAAA,cAOA3mH,MAAA,kBACEA,MAAA,IAEJA,UAEAA,MAAA,4BAMEA,MAFA,0BAAAs7C,GAAAt7C,aAAA6yC,GAAA7yC,MAAkB+pC,EAAAk7E,eAAA3pE,GAAsB,EAExCt7C,CAFyC,oBAAAA,aAAA6yC,GAAA7yC,MAC/B+pC,EAAAo7E,WAAU,EACpBnlH,CADqB,oBAAAA,aAAA6yC,GAAA7yC,MACX+pC,EAAAq7E,SAASr7E,EAAAtxB,WAAUwtG,YAAY,GAkBvCjmH,MAhBF,GAAA4mH,GAAA,IAgBE5mH,CAhB4B,GAAA6mH,GAAA,mBAuDhC7mH,QAGAA,MAAA,GAAA8mH,GAAA,8CA7HE9mH,MAHA,YAAA+pC,EAAA/xB,WAAAE,MAGAlY,CAH8B,UAAAA,MAAA,GAAAmsC,GAAApC,EAAAkP,KAAAiI,oBASHlhD,MAAA,GAAgDA,MAAhD,OAAA+pC,EAAA28E,gBAAA,OAAAzqE,EAAAlS,EAAAysE,gBAAA,KAAAv6D,EAAAhmC,OAAgDjW,CAAD,WAAA+pC,EAAA/xB,WAAAS,YAQtEzY,QAKAA,MALA,kBAAA+mH,EAKA/mH,CALwB,QAAA+pC,EAAAm8E,gBAAAn8E,EAAAysE,gBAKxBx2G,CAJyC,cAAA+pC,EAAA08E,iBAIzCzmH,CAHgC,WAAA+pC,EAAAkP,KAAAxwB,WAAAshB,EAAAtxB,WAAAstG,kBAGhC/lH,CAF2D,QAAA+pC,EAAA9pB,UAE3DjgB,CADmB,iBAYrBA,MAAA,GAEAA,MAFA,OAAA+pC,EAAA47E,sBAEA3lH,CAF8B,OAAA+pC,EAAAysE,eAE9Bx2G,CADuB,WAUvBA,cAAA,WAAA+pC,EAAAkP,KAAAxwB,WAAAshB,EAAAtxB,WAAAstG,mBAMF/lH,MAAA,GAAAA,MAAA+pC,EAAAjtB,WAAAjB,UAAA,MAOW7b,cAAA,UAAAA,MAAA,GAAAosC,GAAArC,EAAAkP,KAAAiI,oBACTlhD,cAAA,IAAA+pC,EAAAkT,SAAA+pE,kBAAA,KAMFhnH,QACAA,MADA,cAAA+pC,EAAAo8E,UAAAzpC,KAAA3yC,GACA/pC,CADoC,mCAMpCA,MAAA,GAAAA,MAAA+pC,EAAAtxB,WAAAwtG,WAAA,OA0DFjmH,MAAA,GAAAA,MAAA+pC,EAAA1lB,eAAA,uBCxFI04B,MAAkB7wC,kBAClBgyC,MAAW/xC,MACXgyC,MAAmBhyC,MACnBqrC,MACAq+C,MAAczpF,MACd66G,MAAqB56G,MAAAC,MAAAD,MACrB0+B,MAAex+B,MACf29B,MAAa19B,MACb06G,MACAlS,GAAavoG,eACbu+B,IACA8rE,GACA3sE,KACAs3E,GACAN,IAA0Bv1E,OAAA,88BAGjBy5E,CAAsB,oBCrDnC,MAAMjnH,GAAW,CACfC,KAAK,EACL6f,SAAS,EACT4iD,QAAQ,GAGJ,MAAgBqmD,WAAkC7Q,GAItDn7G,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAAC8rH,8BAA4B/oH,IAQ5C9C,KAAA4iB,WAAUlH,OAAY,UAAW,KAC/B,MAAMkH,EAAU5iB,KAAKyqB,WAAWrJ,qBAC1BuB,EAAW3iB,KAAKwiB,gBAGhBwB,EAAQpB,EAAQniB,IAAI0hB,IACxB,MAAM2tD,EAAantD,EAASja,KAAMoa,GAAMA,EAAEnI,QAAUwH,EAAExH,OACtD,MAAO,IAAKwH,EAAGQ,WAAYmtD,EAAU,GAEvC,OAAA9vE,KAAKqD,IAAIqE,IAAI,UAAW,CAAEkb,UAASD,WAAUqB,UAItCA,IAhBPhkB,KAAKyqB,WAAW1I,OAAO3G,YACzB,CAkBAoqD,OAAOtlE,GACL,MAAMyH,EAAI3H,KAAKqD,IAAIib,GAAG,SAAU,CAAEpe,SAClC,GAAIA,EAAK0a,SAAU,OAAOjT,EAAE8R,IAAI,wBAChC,MAAMqyG,EAAa9rH,KAAKwhB,WAAWhB,WACnC,IAAKsrG,EACH,OAAA9rH,KAAKyqB,WAAW9Q,MAAMtQ,IAAI,CAACnJ,EAAKya,QACzBhT,EAAE8R,IAAI,WAAY,CAAEvZ,OAAM4rH,eAGnC,MAAM7hG,EAASjqB,KAAK4iB,UACdmpG,EAAU9hG,EAAOxpB,IAAI0hB,GAAKA,EAAExH,QAAUza,EAAKya,MAAQ,IAAKwH,EAAGQ,UAAWR,EAAEQ,UAAaR,GACrFQ,EAAWopG,EAAQtpH,OAAO0f,GAAKA,EAAEQ,UACjCuB,EAASvB,EAASliB,IAAI0hB,GAAKA,EAAExH,OACnC3a,KAAKyqB,WAAW9Q,MAAMtQ,IAAI6a,GAC1Bvc,EAAE8R,IAAI,QAAS,CAAEvZ,OAAM4rH,aAAY7hG,SAAQ8hG,UAASppG,WAAUuB,UAChE,uMCtCK,IAAM8nG,GAA4B,MAAnC,MAAOA,UAAoChR,2EAApCgR,KAA2B99E,GAA3B89E,EAA2B,wCAA3BA,EAA2B79E,UAAA,+BAAA3sB,SAAA,CAAA9c,OAAAiyC,mBAAAhG,GAAAvC,MAAA,EAAAC,KAAA,GAAAC,OAAA,wFAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,cCZpC9pC,MAFJ,UAEIA,CAFsB,QAEtBA,CADG,iBASDA,MAAA,GACFA,QACAA,MAAA,6BACFA,QACAA,MAAA,SACEA,MAAA,GACAA,MAAA,KAGJA,iBAjB2CA,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAAksC,GAAAnC,EAAA0sE,aAAA1sE,EAAA0sE,YAAA1sE,EAAAkP,KAAAiI,oBAAAnX,EAAAlpC,OAAAu1B,iBAAA2T,EAAAkP,KAAAiI,oBAAAnX,EAAAlpC,OAAAu1B,gBAAA2T,EAAAlpC,OAAAu1B,kBAQrCp2B,cAAA,IAAA+pC,EAAAkT,SAAA+pE,kBAAA,KAEqBhnH,QAAqBA,MAArB,iBAAqBA,CAAD,+BDFvCw3C,MACA4E,IAAwBxQ,OAAA,8KAGnB07E,CAA4B,mLEDrCtnH,MAAA,oBAEEA,MAAA,yBAAA2qE,EAAA3qE,MAAA6yC,GAAAiD,UAAAb,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAA6rB,OAAA6J,GAAY,GASrB3qE,MAAA,6BACFA,yDAJEA,MALA,UAAA2qE,EAAA1sD,SAKAje,CALyB,WAAAi1C,EAAAgE,KAAAxwB,UAAAkiD,EAAAz0D,SAKzBlW,CAJ2C,QAAA2qE,EAAA1qD,QAI3CjgB,CAHsB,oBAGtBA,CADuB,iBAIAA,QAAgFA,MAAhF,OAAA2qE,EAAgF3qE,CAAnE,UAAmEA,CAArD,QAAAunH,EAAqDvnH,CAApC,WAAAi1C,EAAAj9B,WAAAS,WAAoCzY,CAAD,aAAAA,MAAA,GAAAksC,MCDrG,IAAMs7E,GAA0B,MAAjC,MAAOA,UAAkCL,GAE7ChsH,cACEC,QACAE,KAAK0c,WAAWyvG,eAAel+F,KAAam+F,iBAC9C,iDALWF,EAAyB,oCAAzBA,EAAyB/9E,UAAA,4BAAA3sB,SAAA,CAAA9c,OAAAiyC,mBAAAhG,GAAAvC,MAAA,EAAAC,KAAA,EAAAC,OAAA,uTAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,cDtBpC9pC,MADF,UACEA,CADgC,8BAE9BA,MAAA,mBACAA,MAAA,4BACFA,QAQAA,MAAA,EAAA2nH,GAAA,sBAAAtmE,IAgBFrhD,eAhBEA,MAAA,GAAAA,MAAA+pC,EAAA7rB,2BCGM6+B,MACA3J,MACAw0E,MACAz9E,KACAm9E,GACA7F,IAA2B71E,OAAA,0gBAGtB47E,CAA0B,yWCFvBxnH,MADF,oBACEA,CAD0E,YAC3DA,MAAA,GACjBA,oCAFqDA,MAAA,QAAA6nH,EAAA5nG,SACpCjgB,MAAA,GAAAA,MAAA6nH,EAAA7xG,kCAHrBhW,MAAA,gBACEA,MAAA,EAAA8nH,GAAA,sBAAAzmE,IAKFrhD,8BALEA,cAAAg4C,EAAAl6B,4CAQF9d,MAAA,YACEA,MAAA,GACFA,8BAFgCA,MAAA,UAAAA,MAAA,EAAAqsC,GAAA2L,EAAAu+D,oBAC9Bv2G,cAAA,IAAAg4C,EAAAy+D,YAAA,6BAIFz2G,MAAA,YACEA,MAAA,GACFA,SCdH,IAAM+nH,GAAqB,MAA5B,MAAOA,UAA6BzR,2EAA7ByR,KAAoBv+E,GAApBu+E,EAAoB,wCAApBA,EAAoBt+E,UAAA,uBAAA3sB,SAAA,CAAA9c,OAAAiyC,mBAAAhG,GAAAvC,MAAA,EAAAC,KAAA,GAAAC,OAAA,uUAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,cDnB/B9pC,MADF,UACEA,CADgC,iBAQ9BA,MAAA,GACFA,QACAA,MAAA,WAA8FA,MAAA,0BAAS+pC,EAAA2sE,cAAc,GAMjH12G,MADF,UACEA,CAD0F,WAgBxFA,MAdA,EAAAgoH,GAAA,iBAcAhoH,CAdmB,EAAAioH,GAAA,aAcnBjoH,CALuB,EAAAkoH,GAAA,cAa/BloH,qBAtCyCA,cAAA,UAAAA,MAAA,EAAAksC,GAAAnC,EAAA0sE,aAAA1sE,EAAA0sE,YAAA1sE,EAAAkP,KAAAiI,oBAAAnX,EAAAlpC,OAAAu1B,iBAAA2T,EAAAkP,KAAAiI,oBAAAnX,EAAAlpC,OAAAu1B,gBAAA2T,EAAAlpC,OAAAu1B,kBAOrCp2B,cAAA,IAAA+pC,EAAAkT,SAAA+pE,kBAAA,KAEahnH,QACbA,MADa,qBAAAA,MAAA,GAAAmsC,IACbnsC,CAD0D,UAAAA,MAAA,GAAAosC,GAAArC,EAAAkP,KAAAiI,kBAAAnX,EAAAlpC,OAAAu1B,kBAKrDp2B,cAAA,UAAA+pC,EAAA0sE,YAAA,4DAEDz2G,MAAA,GAAAA,MAAA+pC,EAAA0sE,YAAA,MASAz2G,cAAA+pC,EAAA0sE,YAAA,QAKAz2G,cAAA+pC,EAAAwsE,kBAAA,sBClBAx5D,MAAkB98C,YAClBu3C,MACApE,MAAennC,MACfinC,GAAahnC,MACbi+B,MAAcyB,OAAA,wyEAGTm8E,CAAqB,kMCN1B/nH,MADF,QACEA,CADG,wBAGDA,MAAA,yBAAA2qE,EAAA3qE,MAAA6yC,GAAAiD,UAAAb,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAA6rB,OAAA6J,GAAY,GAUrB3qE,MAAA,6BAEJA,2DAXIA,QAMAA,MANA,OAAAi1C,EAAAtlC,KAMA3P,CANa,UAAA2qE,EAAA1sD,SAMbje,CALyB,WAAAi1C,EAAAgE,KAAAxwB,UAAAkiD,EAAAz0D,SAKzBlW,CAJ2C,QAAA2qE,EAAA1qD,QAI3CjgB,CAHsB,oBAGtBA,CADuB,iBAIAA,QAAgFA,MAAhF,OAAA2qE,EAAgF3qE,CAAnE,UAAmEA,CAArD,QAAAunH,EAAqDvnH,CAApC,WAAAi1C,EAAAj9B,WAAAS,WAAoCzY,CAAD,aAAAA,MAAA,GAAAksC,MCHzG,IAAMi8E,GAAqB,MAA5B,MAAOA,UAA6BhB,GAExChsH,cACEC,QAKFE,KAAAqU,KAAOrU,KAAK0c,WAAWrI,KAJrBrU,KAAK0c,WAAWyvG,eAAel+F,KAAa6+F,cAC9C,iDALWD,EAAoB,oCAApBA,EAAoB1+E,UAAA,uBAAA3sB,SAAA,CAAA9c,OAAAiyC,mBAAAhG,GAAAvC,MAAA,EAAAC,KAAA,EAAAC,OAAA,8MAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,cDtB/B9pC,MADF,UACEA,CADgC,8BAE9BA,MAAA,mBACAA,MAAA,4BACFA,QAQEA,MAAA,EAAAqoH,GAAA,gBAAAhnE,IAmBJrhD,eAnBIA,MAAA,GAAAA,MAAA+pC,EAAA7rB,2BCGI6+B,MACA3J,MACAk1E,MACAn+E,KACAm9E,GACA7F,IAA2B71E,OAAA,8gBAGtBu8E,CAAqB,8CCpB5BnoH,MAAA,cAOEA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAuwE,aAAevwE,EAAA4+D,eAAe5+D,EAAAwwE,cAAgB,KAAI,GAE3DxoH,MAAA,cAAUA,MAAA,YACZA,mCALEA,MAFA,UAAAg4C,EAAAuwE,aAAA,YAEAvoH,CAFwC,WAAAg4C,EAAAwwE,wDAU1CxoH,MAAA,cAOEA,MAAA,mBAAAA,MAAAklD,GAAA,MAAAlN,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAuwE,aAAe,KAAOvwE,EAAA4+D,eAAe5+D,EAAAwwE,cAAa,GAE3DxoH,MAAA,cAAUA,MAAA,iBACZA,mCALEA,MAFA,UAAAg4C,EAAAuwE,aAAA,YAEAvoH,CAFwC,WAAAg4C,EAAAwwE,yCAlB9CxoH,MAAA,YAcEA,MAbA,EAAAyoH,GAAA,eAaAzoH,CAbkC,EAAA0oH,GAAA,gBA0BpC1oH,8BA1BEA,cAAAg4C,EAAA2wE,YAAA3wE,EAAAuwE,aAAA,MAaAvoH,cAAAg4C,EAAA2wE,aAAA3wE,EAAAuwE,aAAA,OCOG,IAAMK,GAAyB,MAAhC,MAAOA,EASXztH,cARAG,KAAAktH,cAAaxvE,SACb19C,KAAAutH,aAAY7vE,SACZ19C,KAAAitH,cAAavvE,QAAM,GAEnB19C,KAAAqtH,YAAW3vE,QAAM,GAEjB19C,KAAAyqB,cAAanO,OAAOK,MAAY8N,UAEhB,CAEhB6wF,eAAenuF,GACTA,GACJntB,KAAKyqB,WAAW3F,oBAClB,iDAdWwoG,EAAyB,oCAAzBA,EAAyBn/E,UAAA,6BAAAkC,OAAA,CAAA68E,WAAA,iBAAAK,UAAA,gBAAAN,WAAA,iBAAAI,SAAA,gBAAAj/E,MAAA,EAAAC,KAAA,EAAAC,OAAA,kmBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDtBtC9pC,MAAA,EAAA8oH,GAAA,mBAAA9oH,MAAA+pC,EAAA8+E,YAAA,qBCcQ9rE,MAAkB98C,MAClB8qC,MAAe9+B,MACfurC,MACAtN,MAAah+B,MACborG,KACAntE,MAAcyB,OAAA,ghBAGTg9E,CAAyB,8FCnBhC5oH,MAAA,qCACEA,MADiB,WAAAopC,EAAA6T,SAAAnlB,SACjB93B,CAD+C,kBAAAopC,EAAApxB,WAAArI,KAC/C3P,CADmF,cAAAopC,EAAA6T,SAAApnC,uCAGrF7V,MAAA,kCAAmFA,MAAnE,WAAAopC,EAAA6T,SAAAnlB,SAAmE93B,CAArC,kBAAAopC,EAAApxB,WAAArI,KAAqC3P,CAAD,cAAAopC,EAAA6T,SAAApnC,cCYjF,IAAMkzG,GAAoB,MAA3B,MAAOA,UAA4BzS,GAIvCn7G,cAAgBC,QAFhBE,KAAAqD,OAAMtD,MAAS,CAAC0tH,wBAQNztH,KAAA0tH,gBAAehyG,OAAY,eAAgB,KAEnD,MAAMqF,EADW/gB,KAAK0c,WAAWS,WACNohB,UAE3B,MADwC,OAAbxd,GAAmE,MAAbA,CAAa,EATvE,iDAJd0sG,EAAmB,oCAAnBA,EAAmBt/E,UAAA,sBAAA3sB,SAAA,CAAA9c,OAAAiyC,mBAAAhG,GAAAvC,MAAA,EAAAC,KAAA,EAAAC,OAAA,wIAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,cDjB9B9pC,MADF,QACEA,CADG,sBAKCA,MAHF,EAAAipH,GAAA,iBAGEjpH,CAHoB,EAAAkpH,GAAA,eAMtBlpH,MAAA,WACEA,MAAA,GACFA,QACAA,MAAA,eAAWA,MAAA,GAEfA,mBAZkBA,cAAA,YAAA+pC,EAAA/xB,WAAAE,OACdlY,cAAA+pC,EAAAi/E,eAAA,KASWhpH,MAAA,GAAAA,MAAA+pC,EAAAkT,SAAAjnC,uBCCP+mC,MAAkB98C,kBAClBi+C,MAAWjyC,wBACXkyC,MAAmBlyC,YACnB4pF,MAAc3pF,OAAAk+B,cAAA,YAGT2+E,CAAoB,0FCZvB/oH,MAAA,+BADFA,MAAA,qBACEA,MAAA,EAAAmpH,GAAA,sBACFnpH,wCADiCA,cAAA,mBAAAopH,0BAK/BppH,MAAA,2BACAA,MAAA,+BAFFA,MAAA,2BAEEA,MADA,EAAAqpH,GAAA,qBACArpH,CADgD,EAAAspH,GAAA,sBAElDtpH,oDAFwBA,cAAA,mBAAAupH,GACSvpH,QAA8BA,MAA9B,mBAAAopH,EAA8BppH,CAAA,0BAAAA,MAAA,EAAAmpC,4BAK7DnpC,MAAA,2BACAA,MAAA,+BAFFA,MAAA,sBAEEA,MADA,EAAAwpH,GAAA,qBACAxpH,CADgD,EAAAypH,GAAA,sBAElDzpH,oDAFwBA,cAAA,mBAAAupH,GACSvpH,QAA8BA,MAA9B,mBAAAopH,EAA8BppH,CAAA,0BAAAA,MAAA,EAAAmpC,4BAK7DnpC,MAAA,+BADFA,MAAA,sBACEA,MAAA,EAAA0pH,GAAA,sBACF1pH,wCADiCA,cAAA,mBAAAopH,0BAK/BppH,MAAA,+BADFA,MAAA,yBACEA,MAAA,EAAA2pH,GAAA,sBACF3pH,wCAF6CA,MAA1B,sBAA0BA,CAAD,0BACXA,cAAA,mBAAAopH,0BAWnCppH,MAAA,4CAGEA,MAAA,eAKEA,MAAA,mBAAAA,MAAAklD,GAAA,MAAA0kE,EAAA5pH,MAAA,UAAAA,MAAS4pH,EAAAlT,eAAc,GAEvB12G,MAAA,cAAUA,MAAA,cACZA,mCALEA,MAAA,WAAA4pH,EAAA3wE,KAAAxwB,qCARNzoB,MAAA,WAIEA,MAFA,EAAA6pH,GAAA,sBAEA7pH,CAFyC,EAAA8pH,GAAA,iBAa3C9pH,0CAbiBA,cAAA,mBAAAupH,GAEfvpH,cAAA4pH,EAAA9sG,WAAAgC,yBAAA,6BAiBJ9e,MAAA,iDAGAA,MAAA,kCAKAA,MAAA,aACEA,MAAA,+BAOFA,kDARMA,MAAA,UAAAA,MAAA,EAAAisC,GAAA89E,IAEF/pH,QAGAA,MAHA,aAAA4pH,EAAA3wE,KAAAxwB,SAGAzoB,CAH4B,YAAA4pH,EAAA9sG,WAAAjB,UAG5B7b,CAFkC,aAAA4pH,EAAA5qG,mBAElChf,CADiC,mBAAAgqH,EAAAD,SAAA1+G,IAAA2+G,gDAsB7BhqH,MAAA,eAAsBA,MAAA,yBAAAiqH,EAAAjqH,MAAA+kH,GAAAjvE,UAAA8zE,EAAA5pH,MAAA,UAAAA,MAAS4pH,EAAAjT,oBAAAsT,EAAAp2G,MAA4B,GACzD7T,MAAA,UAAMA,MAAA,GACRA,sCADQA,MAAA,GAAAA,MAAAiqH,EAAAj0G,kCALVhW,MAPF,cAOEA,CADD,cACWA,MAAA,wBACZA,UACAA,MAAA,qBACEA,MAAA,EAAAkqH,GAAA,gBAAAlqH,OAKFA,0CAVEA,MADA,WAAA4pH,EAAA3wE,KAAAxwB,WAAAmhG,EAAA9sG,WAAAlE,OACA5Y,CADgD,oBAAAmqH,GAMhDnqH,MAAA,GAAAA,MAAA4pH,EAAA7jG,WAAA9Q,MAAA6uF,yDAOF9jG,MAAA,eAKEA,MAAA,mBAAAA,MAAAoqH,GAAA,MAAAR,EAAA5pH,MAAA,UAAAA,MAAS4pH,EAAAjT,oBAAoB,MAAK,GAElC32G,MAAA,cAAUA,MAAA,wBACZA,mCAJEA,MAAA,WAAA4pH,EAAA3wE,KAAAxwB,WAAAmhG,EAAA9sG,WAAAlE,kCALF5Y,MAjBF,EAAAqqH,GAAA,IAiBErqH,CAjB+C,EAAAsqH,GAAA,uCAAjDtqH,MAAA4pH,EAAA7jG,WAAA9Q,MAAA6uF,cAAAx+F,OAAA,iCADFtF,MAAA,EAAAuqH,GAAA,0BAAAvqH,MAAA4pH,EAAA9sG,WAAAiC,iBAAA,OC1CK,IAAMyrG,GAAuB,MAA9B,MAAOA,UAA+BlU,GAI1Cn7G,cAAgBC,QAFhBE,KAAAqD,OAAMtD,MAAS,CAACmvH,2BAIhBlvH,MAAAmvH,EAAcnvH,KAAK0c,WAAWO,WAAW,qBAEzCjd,KAAA6vF,QAAOn0E,OAAY,OAAQ,KACzB,GAAI1b,KAAK0jB,mBAAoB,MAAO,OAEpC,OADY1jB,MAAKmvH,KAEf,IAAK,QAAS,MAAO,QACrB,IAAK,WAAY,MAAO,WACxB,IAAK,cAMH,OAAInvH,KAAKwhB,WAAWhB,WAAmB,WAChC,QAET,QACE,OAAIxgB,KAAKwiB,gBAAgBxY,OAAS,EAAU,QACrC,SACX,GAGFhK,KAAAovH,gBAAe1zG,OAAY,gBAAiB,KAC1C,MAAMm0E,EAAO7vF,KAAK6vF,OAClB,MAAgB,UAATA,GAA6B,aAATA,CAAS,EA3Bb,CAEzBs/B,mDANWD,EAAsB,oCAAtBA,EAAsB/gF,UAAA,yBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,GAAAC,KAAA,EAAAC,OAAA,o/BAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,IDnCjC9pC,MAFF,UAEEA,CAFmB,WA0BfA,MAtBA,EAAA2qH,GAAA,sBAsBA3qH,CAtBgB,EAAA4qH,GAAA,4BAsBhB5qH,CAjBoB,EAAA6qH,GAAA,uBAiBpB7qH,CAXiB,EAAA8qH,GAAA,uBAWjB9qH,CALiB,EAAA+qH,GAAA,2BAWrB/qH,QAGAA,MAAA,EAAAgrH,GAAA,aAmBFhrH,QAwBAA,MArBA,EAAAirH,GAAA,4BAqBAjrH,CArBuB,EAAAkrH,GAAA,SAqBvBlrH,CAnBS,GAAAmrH,GAAA,yBAAAnrH,MAmBTA,CAbsC,GAAAorH,GAAA,yBAAAprH,mBA9DlCA,MAAA,GAAAA,MAAA,UAAAqrH,EAAAthF,EAAAohD,QAAM,EAAN,aAAMkgC,EAAI,EAAV,UAAUA,EAAH,EAAP,UAAOA,EAAA,EAAP,WAAOA,EAAC,MAgCVrrH,MAAA,GAAAA,MAAA,UAAA+pC,EAAAohD,QAAA,aAAAphD,EAAAohD,OAAA,MAsBFnrF,cAAA+pC,EAAA2gF,eAAA,qBCnCQY,MACA9zE,MACAzM,MAAe9qC,MACfw5C,MAAaxtC,kBACbi+B,MAAah+B,MACbi+B,KACA49E,GACAa,GACAvD,GACA0D,GACAvB,GACAW,GACA/rE,IAAwBxQ,OAAA,8PAGnB4+E,CAAuB,8ECnClCxqH,MAAA,iBAEEA,MAAA,GACFA,8BAFEA,MAAA,UAAAA,MAAA,EAAAmpC,GAAAC,EAAA6P,KAAAxwB,WACAzoB,cAAA,IAAAopC,EAAA6T,SAAA+pE,kBAAA,gCAiBQhnH,MAAA,gBAGEA,MAAA,mBACFA,+BAFEA,MAAA,gBAAAopC,EAAA6P,KAAAxwB,qCALNzoB,MADF,UACEA,CADiJ,WAG/IA,MAAA,EAAAurH,GAAA,kBAOAvrH,MAAA,YACEA,MAAA,GAEJA,UACAA,MAAA,+BACFA,wDAf6BA,MAAA,sBAAAopC,EAAAtsB,WAAAhB,WAAA,2BAAAstB,EAAA6P,KAAAxwB,SAAA,gBACHzoB,cAAA,UAAAA,MAAA,EAAAmpC,GAAAC,EAAA6P,KAAAxwB,WAEtBzoB,cAAAopC,EAAAtsB,WAAAhB,WAAA,MAO+B9b,cAAA,QAAAkiD,EAAAjiC,SAC7BjgB,cAAA,IAAAkiD,EAAAlsC,MAAA,KAGuDhW,QAA4BA,MAA5B,UAA4BA,CAAf,OAAAkiD,EAAeliD,CAAD,QAAAwrH,6CAvB5FxrH,MAAA,WAGEA,MAAA,8BAAAs7C,GAAAt7C,MAAAiiD,GAAA,MAAA7Y,EAAAppC,QAAA,OAAAA,MAAsBopC,EAAAqiF,KAAAnwE,GAAY,GAKlCt7C,MAAA,EAAA0rH,GAAA,aAAArqE,IAkBFrhD,gCArBEA,MAHA,uBAAAopC,EAAAtsB,WAAAhB,YAAAstB,EAAA6P,KAAAxwB,SAGAzoB,CAH+D,sBAAAopC,EAAAtsB,WAAAhB,WAAA,uBAM/D9b,cAAAopC,EAAAtrB,kBCYG,IAAM6tG,GAAoB,MAA3B,MAAOA,UAA4BrV,GAIvCn7G,cAAgBC,QAFhBE,KAAAqD,OAAMtD,MAAS,CAACswH,uBAES,CAEzBF,KAAKz0E,GACH17C,KAAKyqB,WAAW9Q,MAAMyuF,QAAQ,CAC5BwB,cAAeluD,EAAMkuD,cACrBC,aAAcnuD,EAAMmuD,cAExB,iDAXWwmB,EAAmB,oCAAnBA,EAAmBliF,UAAA,sBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,4aAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDrBhC9pC,MANA,EAAA4rH,GAAA,kBAMA5rH,CAN8B,EAAA6rH,GAAA,mBAA9B7rH,MAAA+pC,EAAAjtB,WAAAhB,YAAA,KAMA9b,cAAA+pC,EAAAjsB,gBAAAxY,OAAA,wBCWQy3C,MAAkB98C,YAClBiqC,MAAaj+B,MACb8+B,MACAyM,MACAs0E,MACAC,MACAjV,GACA3sE,MAAcyB,OAAA,80FAGT+/E,CAAoB,2BCzB/B3rH,MAAA,8BAEEA,MADA,sBACAA,CAD0B,gDAK5BA,MAAA,8DAoBQA,MAAA,cAAsBA,MAAA,yBAAAgsH,EAAAhsH,MAAA6yC,GAAAiD,UAAAb,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAA0hE,oBAAAqV,EAAAn4G,MAA4B,GACzD7T,MAAA,UAAMA,MAAA,GACRA,sCADQA,MAAA,GAAAA,MAAAgsH,EAAAh2G,kCALVhW,MAPF,aAOEA,CADD,cACWA,MAAA,SACZA,UACAA,MAAA,qBACEA,MAAA,EAAAisH,GAAA,eAAAjsH,OAKFA,0CAVEA,MADA,WAAAi1C,EAAAgE,KAAAxwB,WAAAwsB,EAAAn4B,WAAAlE,OACA5Y,CADgD,oBAAAksH,GAMhDlsH,MAAA,GAAAA,MAAAi1C,EAAAlvB,WAAA9Q,MAAA6uF,yDAOF9jG,MAAA,cAKEA,MAAA,mBAAAA,MAAAmsH,GAAA,MAAAl3E,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAA0hE,oBAAoB,MAAK,GAElC32G,MAAA,cAAUA,MAAA,SACZA,mCAJEA,MAAA,WAAAi1C,EAAAgE,KAAAxwB,WAAAwsB,EAAAn4B,WAAAlE,mCAvBN5Y,MAAA,WAkBIA,MAjBF,EAAAosH,GAAA,IAiBEpsH,CAjB+C,EAAAqsH,GAAA,gBA4BnDrsH,8BA5BEA,cAAAi1C,EAAAlvB,WAAA9Q,MAAA6uF,cAAAx+F,OAAA,QCSG,IAAMgnH,GAAsB,MAA7B,MAAOA,UAA8BhW,GAd3Cn7G,kCAgBYG,KAAAixH,kCAAiCv1G,OAAY,iCAAkC,KACvF,MAAM8F,EAAWxhB,KAAKwhB,WAChBrE,EAAWnd,KAAK0c,WAAWS,WAKjC,OAJoBnd,KAAK0jB,oBACpBvG,EAASgG,cACThG,EAASC,aACToE,EAAShB,qFARLwwG,KAAqB9iF,GAArB8iF,EAAqB,wCAArBA,EAAqB7iF,UAAA,wBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,+cAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ID1BlC9pC,MAAA,qBAQAA,MANA,EAAAwsH,GAAA,0BAMAxsH,CAN2B,EAAAysH,GAAA,uBAS3BzsH,MAAA,2BAIAA,MAAA,EAAA0sH,GAAA,oBAbA1sH,cAAA+pC,EAAA/qB,mBAAA,KAaAhf,MAAA,GAAAA,MAAA+pC,EAAAwiF,iCAAA,sBCCQZ,GACAtG,GACA0D,GACA3sE,GACArR,MAAe9qC,MACfw5C,MAAaxtC,kBACbi+B,MAAah+B,MACbi+B,MAAcC,cAAA,YAGTkiF,CAAsB,2BCf/BtsH,MAAA,8CAMAA,MAAA,uBCAG,IAAe2sH,GAAgB,MAAhC,MAAgBA,UAAwBC,YAGrCtxH,KAAA8C,SAAW,CAChBC,KAAK,EACL6mH,wBAAwB,EACxB2H,sBAAsB,EACtB56G,iBAAiB,EACjB,CAIF9W,cAAgBC,QAYhBE,MAAAwxH,KAAYl1G,OAAOw4B,OACnB90C,MAAAmc,KAAsBG,OAAOxF,IAC7B9W,MAAAs9C,KAAchhC,OAAOK,MAErB3c,MAAAyxH,EAAczxH,MAAKs9C,EAAY7yB,WAM/BzqB,KAAA0xH,eAAch2G,OAAY,cAAe,KACvC,MAAMoH,EAAI9iB,MAAKyxH,EAAYjwG,WAC3B,OAAQsB,EAAEtC,YAAesC,EAAEtC,aAAexgB,MAAKs9C,EAAYq0E,QAAM,EAxB1C,CAEzBxxB,iBACEngG,KAAKqD,SAAQtD,MAAS,CAACsxH,mBAAkBA,EAAgBvuH,UACzD9C,KAAKqD,IAAI6E,EAAE,eACe,IAAI2iG,GAAgB7qG,MAAKwxH,GACjC1mB,gBAAgB9qG,MAAKyxH,EAAazxH,MAAKs9C,EAC3D,CAKAk0E,GACAr1G,GACAmhC,GAEAm0E,GAWAviF,WACMlvC,MAAKyxH,EAAY7vG,0BAErB5hB,MAAK4xH,IACL5xH,MAAKyxH,EAAY7vG,yBAA0B,EAC7C,CAEAgwG,KACE,MAAMjqH,EAAI3H,KAAKqD,IAAIC,KAAK,wBAGlBiC,EAASvF,MAAKs9C,EAAY/3C,OAChCvF,KAAK+Z,cAAcvX,IAEjBxC,MAAKmc,EAAoBxF,gBAAgBpR,EAAOyC,MAAOzC,EAAO7E,YAC3D4H,UAAU9D,GACExE,KAAKqD,IAAIC,KAAK,kBAAmB,CAAEkB,WACpCyb,EAAEjgB,MAAKyxH,EAAYntG,oBAAoB9f,MAGvDmD,EAAE8R,KACJ,iDA5DoB43G,EAAe,oCAAfA,EAAeljF,UAAA,mBAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,SAqBxBu7E,GAAqB,gIDxBlCrlH,MATA,EAAAmtH,GAAA,yBASAntH,CATqB,EAAAotH,GAAA,8BAArBptH,MAAA+pC,EAAAijF,cAAA,qDCYsBL,CAAgB,KCdtC,MAAMvuH,GAAW,CACfC,KAAK,EACLgvH,0BAA0B,EAC1BC,sBAAsB,GAGlB,MAAOC,GAGXpyH,cAFAG,KAAAqD,OAAMtD,MAAS,CAACkyH,8BAA4BnvH,GAE5B,CAEhBovH,aACE1yD,EACAhtD,EACA2/G,EACAC,GAEA,MAAMzqH,EAAI3H,KAAKqD,IAAIib,GAAG,2BAA4B,CAAEkhD,eAAchtD,OAAM2/G,uBAAsBC,mBAE9F,IAAKA,EACH,OAAOzqH,EAAEsY,EAAEjgB,KAAKgyH,qBAAqB,GAAIxyD,GAAe,qBAE1D,MAAMtsB,EAAQk/E,EACXx+G,QAAQ,MAAO,IACfnH,MAAM,MAET,OAAQ0lH,GACN,IAAK,GACH,MAAME,EAAiBn/E,EAAMzyC,IAAI0f,IAC/B,MAAM2C,EAAI3C,EAAK1T,MAAM,KACf6lH,EAAsBxvG,EAAE,GACxBzhB,EAAMyhB,EAAEyvG,QACRl8C,GAAMvzD,EAAE5B,KAAK,KACnB,MAAO,CACL+7E,MAAO57F,EACPuB,MAAQyzE,IAA+B,KAAxBi8C,EAA8Bj8C,GAAMh1E,KAGvD,OAAOsG,EAAEsY,EAAEjgB,KAAKgyH,qBAAqBK,EAAgB7yD,IAIvD,IAAK,cACH,MAAM58C,EAAUswB,EAAMzyC,IAAI0f,IAExB,MAAMqyG,EAA8C,GACpD,QAAS7pH,GAAI,EAAGA,GAAIwX,EAAKnW,OAAQrB,KAAK,CACpC,MAAMwE,GAAUgT,EAAKxX,IACf0R,GAAO8F,EAAKxX,GAAI,GAEN,OAAZwE,IAA4B,MAARkN,GAMxBm4G,EAAM9lH,KAAK,CAAE+lH,KAAMtlH,GAASulH,SAAS,KALnCF,EAAM9lH,KAAK,CAAE+lH,KAAMp4G,GAAMq4G,SAAS,IAClC/pH,KAKJ,CAGA,MAAMgqH,EAAiBH,EAAM/e,UAAUr5E,IAAgB,MAAXA,GAAEq4F,OAA8B,IAAdr4F,GAAEs4F,SAC1DzqB,EAA6B,CACjChL,MAAO01B,GAAkB,EACrBH,EAAM75D,MAAMg6D,EAAiB,EAAGH,EAAMxoH,QAAQvJ,IAAI25B,IAAKA,GAAEq4F,MAAMvxG,KAAK,IACpEsxG,EAAM/xH,IAAI25B,IAAKA,GAAEq4F,MAAMvxG,KAAK,IAChCte,MAAO+vH,GAAkB,EACrBH,EAAM75D,MAAM,EAAGg6D,GAAgBlyH,IAAI25B,IAAKA,GAAEq4F,MAAMvxG,KAAK,IACrDsxG,EAAM/xH,IAAI25B,IAAKA,GAAEq4F,MAAMvxG,KAAK,KAElC,MAAa,WAAT1O,IACFy1F,EAAOrlG,MAAwB,MAAhBqlG,EAAOrlG,OAAkC,KAAjBqlG,EAAOrlG,MACzC89E,MAAMtS,OAAO65B,EAAOrlG,QAAiC,KAAvBwrE,OAAO65B,EAAOrlG,OAC7C,MAECqlG,IAET,OAAOtgG,EAAEsY,EAAEjgB,KAAKgyH,qBAAqBpvG,EAAS48C,IAEpD,CAEAwyD,qBAAqBpvG,EAA+B48C,GAClD,MAAM73D,EAAI3H,KAAKqD,IAAIib,GAAG,uBAAwB,CAAEsE,UAAS48C,iBAEzD,GAAoB,MAAhBA,GAAyC,KAAjBA,EAC1B,OAAO73D,EAAEsY,EAAE2C,EAAS,wBAGtB,MAAMgwG,EAAgBpzD,EAAa7mD,WAEnC,OAD0BiK,EAAQ1M,KAAKiM,GAAKA,EAAEvf,OAAO+V,aAAei6G,GAE3DjrH,EAAEsY,EAAE2C,EAAS,SAKbjb,EAAEsY,EAAE,IACN2C,EACH,CACEq6E,MAAO21B,EACPhwH,MAAO48D,IAKf,4BCvGF,MAAM18D,GAAW,CACfC,KAAK,EACL66B,OAAO,GAGH,MAAOi1F,GAIXhzH,cAFAG,KAAAqD,OAAMtD,MAAS,CAAC8yH,wBAAsB/vH,GAEtB,CAEhB86B,MAAMk1F,GAEJ,MAAMnrH,EAAI3H,KAAKqD,IAAIC,KAAK,QAAS,CAAEwvH,QAE7BrlF,EAAIslF,WAAuCD,EAAK,CACpDE,QAAQ,EACRC,gBAAgB,EAChBC,gBAAkBF,GAAmBA,EAAO1xH,OAC5CqjC,UAAWA,CAAChqB,EAAeq4G,IAA6B,SAAVA,EAAoBr4G,EAAQA,EAAMrZ,OAChF6xH,eAAe,IAIXjoH,EAAOuiC,GAAGviC,KAChB,IAAKA,IAAS8V,MAAMC,QAAQ/V,IAAwB,GAAfA,EAAKlB,OAAa,MAAO,GAG9D,MAAMopH,EAAWloH,EAAKzI,OAAO0T,QAAiBpG,IAAZoG,EAAEvT,OAEhCwwH,EAASppH,QAAUkB,EAAKlB,QAC1BmkB,QAAQC,KAAK,oCAAqC,CAAEljB,OAAMkoH,aAG5D,MAAMJ,EAASvlF,GAAG4lF,KAAKh4G,QAAU,GAC3Bi4G,EAAWN,EAAOxtG,OAAO,CAACC,EAAK8tG,SAChC9tG,EACH+tG,CAACD,GAAI,OACL,KAEM3wH,WAAU6wH,GAAUH,EAE5B3rH,EAAEO,EAAE,aAAc,CAAE8qH,SAAQS,QAAOvoH,OAAMkoH,aAGzC,MAAM17G,EAAW07G,EAAS3yH,IAAI0pB,QACzBspG,KACAtpG,EACHvnB,MAAOunB,EAAEvnB,OAAS,MAGpB,OAAO+E,EAAEsY,EAAEvI,EACb,ECzCF,MAAM5U,GAAW,CACfC,KAAK,EACL2wH,oCAAoC,EACpCxoH,MAAM,GAGF,MAAOyoH,GAIX9zH,cAFAG,KAAAqD,OAAMtD,MAAS,CAAE4zH,sBAAqB7wH,GAEtB,CAEhB,yBAAO8wH,CAAmBz2G,GACxB,MAAM2F,EAAI3F,EACV2F,SAAEI,mBAAoB,EACtBJ,EAAEi4E,cAAe,EACjBj4E,EAAEK,gBAAiB,EACnBL,EAAEg4E,qBAAsB,EAExBh4E,EAAEM,gBAAiB,EACnBN,EAAEO,gBAAiB,EACnBP,EAAEu7E,QAAU,GACZv7E,EAAEG,mBAAoB,EAEtBH,EAAE+wG,aAAc,EAET/wG,CACT,CAEA,oCAAOgxG,CAA8BC,EAA0Bp0F,GAC7D,MAAM2jB,EAAKywE,EACX,OAAMp0F,EAAM/xB,UAAUomH,wBAA0Br0F,EAAMiD,OAGtDzU,QAAQ9qB,IAAI,gEAAiEigD,EAAGh1C,uBAAyBg1C,EAAG03C,iBAC5G13C,EAAGy3C,YAAa,EAChBz3C,EAAGngC,cAAe,EAClBmgC,EAAGw3C,mBAAoB,EACvBx3C,EAAGlgC,cAAe,EAClBkgC,EAAGjgC,cAAe,EACX,CAAEigC,KAAI0wE,wBAAwB,IAR5B,CAAE1wE,KAAI0wE,wBAAwB,EASzC,CAEAC,WAAY92G,WAAUwiB,QAAOhlB,UAE3B,MAAMu5G,EAAaP,GAAkBC,mBAAmB,IAAKz2G,KAErDmmC,GAAI6wE,EAAOH,0BAA2BL,GAAkBG,8BAA8BI,EAAYv0F,IAElG2jB,KAAI8wE,eAAe,IAAIT,KAAoBU,EAAoC15G,EAAOw5G,EAAOx0F,GAErG,MAAO,CAAE2jB,KAAI0wE,yBAAwBI,aACvC,CAGAC,GAAoC15G,EAAmB25G,EAAwB30F,GAE7E,MAAM2jB,EAAKgxE,EAELC,EAA4BjxE,EAAGkxE,aAAaxqH,OAAS,EACvD21B,EAAMkD,mBAAmBj4B,QAAQ04C,EAAGkxE,aACpC,GAGEj5G,EAAag5G,EAAY,GACzBhzB,EAAWhmF,GAAY/M,KAAKF,KAClCg1C,EAAG6nD,eAAiB5J,GAAY,GAGhC,MAAM6yB,EAAaz0F,EAAMlG,OAAOrqB,QAA4BmM,GAEtDk5G,EAAcl0H,OAAO2jB,OAAOqmF,IAAer9F,SAASq0F,GAEpD55F,EAAI3H,KAAKqD,IAAIib,GAAG,cAAe,CAAEi2G,gBAIvC,GAFA5sH,EAAEuc,OAAO,CAAEq9E,WAAUkzB,cAAaF,cAAaH,gBAE1CK,EACHtmG,eAAQrO,MAAM,gCAAgCyhF,eAAsBj+C,EAAGh1C,QAChE,CAAEg1C,KAAI8wE,cAIf9wE,EAAGlmC,YAAcg3G,EAAWh3G,aAAe,GAC3CkmC,EAAGs7C,WAAaw1B,EAAWx1B,YAAc,GACzCt7C,EAAG+6C,MAAQ+1B,EAAW/1B,OAAS,GAC/B/6C,EAAG66C,gBAAkBi2B,EAAWj2B,iBAAmB,GACnD76C,EAAG46C,YAAck2B,EAAWl2B,aAAe,GAC3C56C,EAAG86C,SAAWg2B,EAAWh2B,UAAY,GACrC96C,EAAGsiE,YAAcwO,EAAWxO,aAAe,GAG3CtiE,EAAG1gD,MAAQwxH,EAAWxxH,OAAS,GAG/B0gD,EAAGg7C,aAAe81B,EAAW91B,cAAgB,GAE7C,MAAMo2B,EAAgBnzB,IAAagJ,GAAcC,oBAC3CmqB,EAAiBpzB,IAAagJ,GAAcE,qBAC5CmqB,GAAcrzB,IAAagJ,GAAcI,kBACzCkqB,GAAoBtzB,IAAagJ,GAAcG,wBAErD/iG,EAAEuc,OAAO,CAAEwwG,gBAAeC,iBAAgBC,eAAaC,uBAEvD,MAAMC,GAAiBv0H,OAAO2jB,OAAOkmF,IAAqBl9F,SAASq0F,GAGnE,GAAImzB,EAAe,CACjB,MAAMK,GAAaX,EACnB9wE,EAAG+jD,MAAQ0tB,GAAW1tB,OAAS,GAC/B/jD,EAAG4jD,WAAa6tB,GAAW7tB,YAAc,UACzC5jD,EAAG0xE,cAAgBD,GAAWE,iBAAmB,EACnD,CAsBA,GAnBIN,IAEDrxE,EAA2B03C,WADRo5B,EACiCc,kBAAoB,IAIvEN,KACFtxE,EAAGoiD,cAAgB0uB,EAAW1uB,eAAiB,GAC/CpiD,EAAGqiD,kBAAoByuB,EAAWzuB,mBAAqB,IAIrDkvB,KACFvxE,EAAGk/C,iBAAmB4xB,EAAW5xB,kBAAoB,IACrDl/C,EAAGo/C,iBAAmB0xB,EAAW1xB,kBAAoB,MACrDp/C,EAAGs/C,WAAawxB,EAAWxxB,YAAc,QACzCt/C,EAAGt1B,iBAAmB,CAACC,KAAaknG,wBAGlCL,GACF,GAAIvzB,IAAagJ,GAAcF,yBAA0B,CACvD,MAAM+qB,GAAahB,EAA2Dr0F,QAAU,GAExFujB,EAAG+0C,YAAa,IAAI45B,IAA4BC,aAAav3G,EAAiB,SAAU,cAAey6G,KAAc,EACvH,SAAW7zB,IAAagJ,GAAcD,wBAAyB,CAC7D,MAAMwoB,GAAOsB,EAA0DiB,IACvE/xE,EAAG+0C,YAAa,IAAIw6B,IAAsBj1F,MAAMk1F,IAChDxvE,EAAGt1B,iBAAmB,CAACC,KAAaqnG,gBACtC,CAIFhyE,SAAGpgC,gBAAkBogC,EAAGonE,kBAAmB,EAAQpnE,EAAGonE,gBAAiB,EAEnEpnE,EAAGpgC,iBACLogC,EAAGlmB,gBAAkB,EACrBkmB,EAAG/lB,gBAAkB,IAErB+lB,EAAGlmB,cAAgB,EACnBkmB,EAAG/lB,cAAgB,GAIrB+lB,EAAGulE,oBAAsB,OACzBvlE,EAAGiyE,6BAA+B,GAGlCjyE,EAAGo7C,wBAA0B1+F,MAAKw1H,EAAmBlyE,EAAI3jB,GAElD,CAAE2jB,KAAI8wE,aACf,CAGAoB,GAAmBlyE,EAAyC3jB,GAC1D,GAAI2jB,EAAGo7C,wBACL,OAAOp7C,EAAGo7C,wBAEZ,GAA6B,SAAzBp7C,EAAGulE,kBACL,OAAO,KAGT,MAAM4M,EAA4CnyE,EAAGiyE,4BAA4BvrH,OAAS,EACtF21B,EAAMkD,mBAAmBj4B,QAAQ04C,EAAGiyE,4BACpC,GAIJ,GAFgCE,EAA4B,IAAIjnH,KAAKF,OAErCs8F,GAC9B,OAAO,KAET,MAAMhnF,EAAQ+b,EAAMlG,OAAOrqB,QAA0BqmH,EAA4B,IAiBjF,MAhBgC,CAC9Bx4B,MAAOr5E,EAAMq5E,OAAS,GACtBy4B,YAAa9qB,GACb+c,iBAAkB/jG,EAAM+jG,kBAAoBnB,GAC5CwB,mBAAoBpkG,EAAMokG,oBAAsB,UAChD2N,iBAAkB/xG,EAAM+xG,kBAAoB,UAC5C72B,kBAAmBl7E,EAAMk7E,mBAAqB,KAC9CD,iBAAkBj7E,EAAMi7E,kBAAoB,KAC5CG,wBAAyBp7E,EAAMo7E,yBAA2B,WAC1DD,wBAAyBn7E,EAAMm7E,yBAA2B,SAC1D62B,aAAchyG,EAAMgyG,eAAgB,EACpCC,aAAcjyG,EAAMiyG,cAAgB,GACpCrN,oBAAqB5kG,EAAM4kG,sBAAuB,EAClDC,sBAAuB7kG,EAAM6kG,wBAAyB,EACtDC,oBAAqB9kG,EAAM8kG,sBAAuB,EAGtD,ECnNI,MAAOoN,WAA2Bh0E,KAGtCjiD,cAAgBC,MAAM,CAAEg2H,wBAFxB91H,KAAAqU,KAAO0hB,KAAiBC,aAEuB,CAE/CnW,QAAS1C,WAAUwiB,UAEjB,MAAMw0F,EAAQR,GAAkBC,mBAAmB,IAAKz2G,IAGxDg3G,SAAMn5B,aAAe,GACrBm5B,EAAM/2G,YAAc+2G,EAAMn5B,YAAc,GAGvCm5B,EAAwC4B,gBAAkB5B,EAAMtrH,eAC1DsrH,EAAMtrH,QAEF8qH,GAAkBG,8BAA8BK,EAAOx0F,GAAO2jB,EAG3E,wBLhBE5+C,MAAA,8CAMAA,MAAA,uBKcJo9C,KAAet/C,IAAIszH,ICnBZ,IAAME,GAAuB,MAA9B,MAAOA,UAA+B3E,GAI1CxxH,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAACi2H,0BAAyB3E,GAAgBvuH,UAIvD9C,KAAKmgG,iBACL21B,GAAmBtzE,UACrB,iDARWwzE,EAAsB,oCAAtBA,EAAsB7nF,UAAA,qBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GNEnC9pC,MATA,EAAAuxH,GAAA,yBASAvxH,CATqB,EAAAwxH,GAAA,8BAArBxxH,MAAA+pC,EAAAijF,cAAA,qDMOasE,CAAuB,2BNDhCtxH,MAAA,8CAMAA,MAAA,uBONG,IAAMyxH,GAA4B,MAAnC,MAAOA,UAAoCH,GAE/Cn2H,cACEC,QACA+6F,GAAyBr4C,UAC3B,iDALW2zE,EAA2B,oCAA3BA,EAA2BhoF,UAAA,4BAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GPGxC9pC,MATA,EAAA0xH,GAAA,yBASA1xH,CATqB,EAAA2xH,GAAA,8BAArB3xH,MAAA+pC,EAAAijF,cAAA,qDOMayE,CAA4B,KCNnC,MAAOG,WAA0Bx0E,KAGrCjiD,cAAgBC,MAAM,CAAEw2H,uBAFxBt2H,KAAAqU,KAAO0hB,KAAiBM,YAEsB,CAE9CxW,OAAO+D,GACL,OAAO,IAAI+vG,IAAoBM,UAAUrwG,GAAO0/B,EAClD,wBRDE5+C,MAAA,8CAMAA,MAAA,uBQFJo9C,KAAet/C,IAAI8zH,ICHZ,IAAMC,GAAsB,MAA7B,MAAOA,UAA8BlF,GAIzCxxH,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAACw2H,yBAAwBlF,GAAgBvuH,UAItD9C,KAAKmgG,iBACLm2B,GAAkB9zE,UACpB,iDARW+zE,EAAqB,oCAArBA,EAAqBpoF,UAAA,oBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GTElC9pC,MATA,EAAA8xH,GAAA,yBASA9xH,CATqB,EAAA+xH,GAAA,8BAArB/xH,MAAA+pC,EAAAijF,cAAA,qDSOa6E,CAAsB,KCL7B,MAAOG,WAAyB50E,KAGpCjiD,cAAgBC,MAAM,CAAE42H,sBAFxB12H,KAAAqU,KAAO0hB,KAAiBG,WAEqB,CAE7CrW,OAAO82G,GAEL,MAAM7zG,EADqBhU,IAAkBC,YAAYhJ,IAAIgwB,KAAiBC,eACjDnW,OAAO82G,GACpC7zG,SAAEukF,QAAU,GACZvkF,EAAEokF,aAAe,UACjBpkF,EAAEkyG,gBAAkB,GACblyG,CACT,wBVREpe,MAAA,8CAMAA,MAAA,uBUKJo9C,KAAet/C,IAAIk0H,ICVZ,IAAME,GAAqB,MAA5B,MAAOA,UAA6BvF,GAIxCxxH,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAAC62H,wBAAuBvF,GAAgBvuH,UAIrD9C,KAAKmgG,iBACLu2B,GAAiBl0E,UACnB,iDARWo0E,EAAoB,oCAApBA,EAAoBzoF,UAAA,mBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GXEjC9pC,MATA,EAAAmyH,GAAA,yBASAnyH,CATqB,EAAAoyH,GAAA,8BAArBpyH,MAAA+pC,EAAAijF,cAAA,qDWOakF,CAAqB,oBCE3B,IAAMG,GAAY,MAAnB,MAAOA,UAAoB5zH,IAE/BtD,YAAoB4G,GAClB3G,QADkBE,KAAAyG,YAEpB,CAEAwG,OAAOlD,EAAaxE,GAClB,OAAOvF,KAAKg3H,QACVjtH,EAAM,SACN,CACEpG,OAAQ,CACNszH,UAAW1xH,EAAO0xH,UAClBC,cAAe3xH,EAAO2xH,cAAcv+G,WACpC/U,MAAO5D,KAAKyG,WAAWlB,OAAO3B,QAItC,CAEAuzH,UAAUC,EAAuBrtH,EAAaxE,GAC5C,OAAOvF,KAAKwD,KAAKC,KACfsG,EAAM,UACN,GACA,CACEpG,OAAQ,CACNszH,UAAW1xH,EAAO0xH,UAClBI,UAAWC,KAAeC,aAAaH,GACvCF,cAAe3xH,EAAO2xH,cAAcv+G,WACpC/U,MAAO5D,KAAKyG,WAAWlB,OAAO3B,QAItC,CAEA4zH,OAAOt3H,EAAgBu3H,EAAiB1tH,EAAaxE,GACnD,OAAOvF,KAAKg3H,QACVjtH,EAAM,UACN,CACEpG,OAAQ,CACNszH,UAAW1xH,EAAO0xH,UAClBS,SAAUx3H,EAAKwC,SAASiW,WACxBqG,GAAI9e,EAAK4K,GAAG6N,WACZu+G,cAAe3xH,EAAO2xH,cAAcv+G,WACpC8+G,QAASH,KAAeC,aAAaE,GACrC7zH,MAAO5D,KAAKyG,WAAWlB,OAAO3B,QAItC,CAEAyb,WAAWnf,EAAgB6J,EAAaxE,GACtC,OAAOvF,KAAKg3H,QACVjtH,EAAM,UACN,CACEpG,OAAQ,CACNszH,UAAW1xH,EAAO0xH,UAClBS,SAAUx3H,EAAKwC,SAASiW,WACxBqG,GAAI9e,EAAK4K,GAAG6N,WACZu+G,cAAe3xH,EAAO2xH,cAAcv+G,WACpC/U,MAAO5D,KAAKyG,WAAWlB,OAAO3B,QAItC,CAEA+zH,YACEr1H,EACA4L,EACAqK,EACAuc,GAEA,OAAO90B,KAAKg3H,QACVh3H,KAAK0D,OAAO,qBACZ,CACEC,OAAQ,CACNrB,UACIiW,GAAQ,CAAEA,WACVrK,GAAe,CAAEA,kBACjB4mB,GAAS,CAAEA,SACf8iG,MAAO53H,KAAKyG,WAAWlB,OAAO3B,QAItC,iDAnFWmzH,GAAWryH,MAAAC,KAAA,sCAAXoyH,EAAW91H,QAAX81H,EAAW71H,WAAA,SAAX61H,CAAY,0CCDnB,MAAOc,GAQX,SAAI/iG,GAAU,OAAO90B,KAAK83H,mBAAqB,CAE/C,UAAIC,GAAW,OAAO/3H,MAAKg4H,OAAY/2B,OAAajhG,KAAK83H,kBAAmB,CAAE/+G,SAAU/Y,KAAKi4H,cAAcl/G,UAAY,CACvHi/G,GAEAn4H,YACEq4H,EACAC,EACQL,EACDG,EACPxxH,GAFQzG,KAAA83H,oBACD93H,KAAAi4H,gBAfTj4H,KAAAqD,OAAMtD,MAAS,CAAC83H,uBAkBd73H,KAAKkL,KAAO,IAAIktH,GAAyBF,EAAgBC,GACzDn4H,KAAKgvC,OAAS,IAAIqpF,GAA2BH,GAE7Cl4H,KAAKs4H,WAAa,CAChBC,EACAC,EACA3mH,KAMA,IAHkD,iBAAlB0mH,GAAuD,mBAAlBA,IACvC,iBAAlBC,GACa,mBAAb3mH,EAIV,OAFA2mH,EAAgB9mH,GAAqBa,iBAAiBimH,EAAyB/xH,QAAU,EACzFgyH,MAAY,CAAC,CAAEn1B,KAAMi1B,EAAe9kH,IAAK+kH,IAAkB3mH,GAI7D,IAAImP,MAAMC,QAAQs3G,IAA2C,mBAAlBC,EAM3C,MAAM,IAAIhoG,MAAM,2DALd,UAAWpe,KAAUmmH,EACnBnmH,EAAOqB,IAAM/B,GAAqBa,iBAAiBH,EAAOqB,IAAKhN,IACjEgyH,QAAYF,EAAeC,EAG4C,CAE7E,EAGF,MAAMJ,GAIJv4H,YAAoBq4H,EAAyCC,GAAzCn4H,KAAAk4H,iBAAyCl4H,KAAAm4H,SAF7Dn4H,KAAA04H,2BAAwD,GAItD14H,KAAKm4H,OAAO7vH,UAAUghE,IACpBtpE,KAAK2a,MAAQ2uD,EACbtpE,KAAK04H,2BAA2BvmH,QAAQN,GAAYA,EAASy3D,GAAS,EAE1E,CAEAzpD,OAAOypD,GACLtpE,KAAKk4H,eAAer4G,OAAOypD,EAC7B,CAEAqvD,cAAc9mH,GACZ7R,KAAK04H,2BAA2BhsH,KAAKmF,EACvC,EAGF,MAAMwmH,GACJx4H,YAAoBq4H,GAAAl4H,KAAAk4H,gBAAoC,CAExDznH,KAAK6I,GACH,OAAOtZ,KAAKk4H,eAAethH,QAAO,EAAM0C,EAC1C,CAEAkN,QACExmB,KAAKk4H,eAAethH,QAAO,EAC7B,EC9DF,MAAM9T,GAAW,CACfC,KAAK,EACLlD,aAAa,EACb8X,MAAM,EACNihH,YAAY,EACZC,eAAe,EACfC,4BAA4B,GAIvB,IAAMC,GAAgB,MAAvB,MAAOA,UAAwBhiH,KAInCy6G,GACAl0E,GACApc,GACA83F,GACAC,GACAC,GACAC,GACAh9G,GACAi9G,GACAh9G,GACAi9G,GAEAC,GAEAz5H,cACEC,QAjBFE,KAAAqD,OAAMtD,MAAS,CAACg5H,mBAAkBj2H,IAElC9C,MAAAwxH,KAAYl1G,OAAOw4B,OACnB90C,MAAAs9C,KAAchhC,OAAOK,MACrB3c,MAAAkhC,KAAc5kB,OAAOC,KACrBvc,MAAAg5H,KAAoB18G,OAAOE,MAC3Bxc,MAAAi5H,KAAsB38G,OAAO2qB,KAC7BjnC,MAAAk5H,KAAoB58G,OAAOi9G,KAC3Bv5H,MAAAm5H,KAAmB78G,OAAO8L,KAC1BpoB,MAAAmc,KAAsBG,OAAOxF,IAC7B9W,MAAAo5H,KAAU98G,OAAOk9G,OACjBx5H,MAAAoc,KAAYE,OAAOG,MACnBzc,MAAAq5H,KAAQ/8G,OAAOm2B,OAEfzyC,MAAAs5H,KAAe9xH,KAAUuvH,IAQzB/2H,MAAAy5H,EAAUz5H,MAAKs9C,EAAYK,KAAKthB,QAAQ1H,aAAa9wB,QAAK+wD,MAAU50D,MAAKs9C,EAAY6D,YAAS,EAAGggD,MAAqBn1E,OAEtHhsB,MAAAqkD,EAAUrkD,MAAKs9C,EAAY/3C,OAC3BvF,MAAA05H,EAAS15H,MAAKs9C,EAAY1gC,MAPxB5c,KAAKqD,IAAIqE,IAAI,cACf,CAEAiyH,GACAF,GAEAp1E,GACAq1E,GAEAE,GACAC,GAEOliH,KACLmiH,EACAC,EACAv8E,EACAwf,GAEA,OAAAh9D,KAAKqD,IAAI6E,EAAE,QACXlI,MAAK45H,EAAoBp8E,EACzBx9C,MAAK65H,EAAqB78D,EAC1Bh9D,MAAK25H,EAAYtmH,SAASC,cAAcwmH,GACxC95H,MAAK25H,EAAUK,UAAYh6H,MAAKi6H,IAChCF,EAAqB7lF,cAAcvgC,YAAY3T,MAAK25H,GAC7C35H,IACT,CAEAyX,cACEzX,KAAKqD,IAAI6E,EAAE,eACXlI,MAAK25H,GAAWp4E,WAAWw+D,YAAY//G,MAAK25H,GAC5C35H,MAAK25H,EAAY,KACjB75H,MAAM2X,aACR,CAEAwiH,KACE,MAAMC,EAAgBl6H,MAAKm6H,IACrBvqG,EAAe5vB,MAAKo6H,IACpBtC,KAAoBpjH,OAAS,KACjC,MAAMyI,EAAWnd,MAAKs9C,EAAYngC,WAClC,OAiHN,SAASk9G,GAAc90H,EAAwB4X,GAC7C,MAAO,CACL9I,KAAM9O,EAAOxE,UACbiH,MAAOzC,EAAOyC,MACd0S,MAAOyC,EAAS7O,KAChBiM,YAAa4C,EAAS6c,YACtBzrB,UAAWhJ,EAAOqkB,eAAerb,UACjCiE,KAAMjN,EAAOiN,KACbgqB,SAAUrf,EAASmf,cACnBnP,SAAU5nB,EAAOu1B,gBACjB3d,WAEJ,CA7Hak9G,CAAcr6H,MAAKqkD,EAASlnC,EAAQ,EAC1C,CAAE0I,MAAOmG,OACNguG,EAAY,IAAInC,GAAkBqC,EAAel6H,MAAKy5H,EAAS3B,EAAmBloG,EAAc5vB,MAAKkhC,EAAY37B,QAEvHse,gBAAO,KACL,MAAMf,EAAI9iB,MAAKs9C,EAAYngC,WACrB2X,EAAQklG,EAAUllG,MACxBA,EAAM3X,SAAW2F,EACjBgS,EAAMpa,MAAQoI,EAAExU,KAChBwmB,EAAMva,YAAcuI,EAAEkX,YACtBlF,EAAM0H,SAAW1Z,EAAEwZ,eAClB,CAAEvjB,SAAU/Y,MAAKwxH,IACbwI,CACT,CAEAG,KASE,MARqC,CACnCt6G,OAASlF,IACP3a,MAAKq5H,EAAM/8E,IAAI,IAAMt8C,MAAKs6H,EAAe3/G,GAAM,EAEjD/D,OAAQA,CAACA,EAAQ0C,KACftZ,MAAKq5H,EAAM/8E,IAAI,IAAMt8C,MAAKmc,EAAoBvF,OAAOA,EAAQ5W,MAAKqkD,EAAQr8C,MAAOhI,MAAKqkD,EAAQ3jD,WAAY4Y,GAAa,EAI7H,CAEA8gH,KACE,MAAMlsH,EAAclO,MAAKi5H,EAAoBlzH,IAAI/F,MAAKqkD,EAAQ9pB,mBACxDggG,EAAoBv6H,MAAKk5H,EAAkBsB,uBAAuBtsH,EAAYtN,YAE9E65H,KAAM16H,MAAS,+BA4CrB,MA1C6C,CAC3CW,WAAYV,MAAKqkD,EAAQ3jD,WACzB65H,oBACA9jH,UAAWzW,MAAK05H,EAChBgB,iBAAkB16H,MAAKg5H,EACvBpgH,YAAa5Y,MAAKmc,EAAoBvD,YAAY5Y,MAAKqkD,EAAQr8C,MAAOhI,MAAKqkD,EAAQ3jD,YACnFi6H,SAAU36H,MAAKqkD,EAAQs2E,SACvBC,KAAM56H,MAAKqkD,EAAQu2E,KACnBC,YAAaA,CAACxmH,EAAMsG,KAClB8/G,EAAIn8G,GAAG,cAAe,CAAEjK,OAAMsG,UAC9B3a,MAAKq5H,EAAM/8E,IAAI,KAAQt8C,MAAKs6H,EAAe3/G,EAAO3a,MAAK05H,EAAOoB,SAASzmH,GAAK,EAAI,EAElF0mH,iBAAkB/6H,MAAKm5H,EAAiBp+E,UACxCigF,WAAaz2E,IACXk2E,EAAIn8G,GAAG,aAAc,CAAEimC,YACvBvkD,MAAKq5H,EAAM/8E,IAAI,KAAQt8C,MAAKqkD,EAAQG,SAASnqC,KAAKkqC,EAAO,EAAI,EAE/D02E,eAAiBppH,IACf4oH,EAAIn8G,GAAG,kBACPte,MAAKq5H,EAAM/8E,IAAI,KACb4+E,KAAWzqH,KAAKzQ,MAAKqkD,EAASrkD,MAAK05H,EAAQ15H,MAAKo5H,EAASp5H,MAAK45H,EAAmB55H,MAAK65H,EAAoBhoH,EAAQ,EACnH,EAEHspH,uBAAyBptF,IACvB0sF,EAAIn8G,GAAG,yBAA0B,CAAEyvB,kBACnC/tC,MAAKq5H,EAAM/8E,IAAI,KACbt8C,MAAKo7H,EAA4BrtF,EAAa,EAC/C,EAEH6qF,WAAYA,CAACj+G,EAAO9I,KAClB4oH,EAAIn8G,GAAG,aAAc,CAAE3D,UACvB3a,MAAKq5H,EAAM/8E,IAAI,KAAQt8C,MAAKq7H,EAAY1gH,EAAO9I,EAAQ,EAAI,EAE7DypH,YAAcjnH,GAASrU,MAAKkhC,EAAY37B,OAAO4X,UAAU4iB,OAAO1rB,GAEhEknH,aAAcA,CAACC,EAAcnnH,OACpB7M,KAAUuV,KAAW/c,MAAKwxH,GAAW75G,KAAKtD,EAAMmnH,GAGzDziH,SAAU/Y,MAAKwxH,EAInB,CAEA6J,GAAY1gH,EAAe9I,GACzB,IAAK8I,EAAO,OAGZ,MAAMzM,EAAclO,MAAKqkD,EAAQ9pB,kBAC3B75B,EAAaV,MAAKqkD,EAAQ3jD,WAC1Bo0B,EAAQ90B,MAAKqkD,EAAQtjD,UAC3Bf,MAAKs5H,EAAa3B,YAAYh9G,EAAOzM,EAAaxN,EAAYo0B,GAAOxsB,UAAU1G,IACxEA,GACLiQ,EAASjQ,EAASgB,MAAK,EAE3B,CAEA03H,GAAe3/G,EAAmB0hB,EAA2B,OAChDA,EAAU,IAAIo/F,KAAUp/F,GAAWr8B,MAAKs9C,EAAYK,MACxDxwB,UACPntB,MAAKs9C,EAAYK,KAAK+E,aAAa/nC,EACrC,CAEAygH,GAA4BrtF,GACtBA,IAAkB9f,KAAaytG,yBACjC17H,MAAKoc,EAAU3L,KAAKzQ,MAAKg5H,EAAkBxoH,QAAQ,oCAAqCxQ,MAAKg5H,EAAkBxoH,QAAQ,uBAAwB,CAAEE,SAAU,MACxJirH,WACArzH,UAAU,OAAMszH,MAAkB57H,MAAKo5H,EAASnrG,KAAaytG,wBAAyB17H,MAAK45H,EAAmB55H,MAAK65H,GAE1H,iDAlKWd,EAAe,sCAAfA,EAAe93H,QAAf83H,EAAe73H,WAAA,SAAf63H,CAAgB,oCC9BtB,IAAM8C,GAAkB,MAAzB,MAAOA,EAYXh8H,cAVAG,KAAAqD,OAAMtD,MAAS,CAAC87H,uBAKN77H,KAAA0c,cAAaJ,OAAOK,MACtB3c,KAAA87H,oBAAmBt0H,KAAUuxH,IAC7B/4H,KAAAw9C,oBAAmBlhC,OAAOoiC,OAC1B1+C,KAAAg9D,qBAAoB1gD,OAAO41C,MAEnB,CAEhB3d,kBACE,MAAM5sC,EAAI3H,KAAKqD,IAAIib,GAAG,mBAChBhF,EAAenO,SAASwO,OAAOL,cAAgBtZ,KAAK0c,WAAWnX,OAAOqkB,eAAemyG,uBAC3Fp0H,EAAEO,EAAE,yBAA0B,CAAEoR,iBAChCtZ,KAAK87H,iBAAiBnkH,KACpB2B,EACAtZ,KAAK+5H,qBACL/5H,KAAKw9C,iBACLx9C,KAAKg9D,kBAET,iDAxBW6+D,EAAkB,oCAAlBA,EAAkB1tF,UAAA,oBAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,sMCV/B9pC,MAAA,wCDUam3H,CAAkB,KENzB,MAAOG,WAAuBl6E,KAGlCjiD,cAAgBC,MAAM,CAAEk8H,oBAFxBh8H,KAAAqU,KAAO0hB,KAAiBkmG,SAEmB,CAE3Cp8G,QAAS1C,aAGP,MAFqC,IAAKA,EAG5C,EAGF2kC,KAAet/C,IAAIw5H,ICPb,MAAOE,WAA2Bp6E,KAGtCjiD,cAAgBC,MAAM,CAAEo8H,wBAFxBl8H,KAAAqU,KAAO0hB,KAAiBomG,cAIxBn8H,KAAAupC,kBAAmB,CAF4B,CAI/C1pB,QAAS1C,WAAUwiB,UACjB,MAAMqiB,EAAgB,IAAK7kC,GAE3B6kC,SAAco6E,eAAyC,MAAxBp6E,EAAcq6E,QAA2C,KAAzBr6E,EAAcq6E,OAC7Er6E,EAAcq6E,SAAW,SACzBr6E,EAAcs6E,eAAiB,GAC/Bt6E,EAAcu6E,iBAAmB,GACjCv6E,EAAcw6E,aAAe,GAC7Bx6E,EAAcy6E,sBAAwB,IAGtCz6E,EAAc06E,UAAY18H,KAAK28H,qBAAqBh9F,EAAOqiB,EAAc46E,qBAAsB,CAC7FC,KAAM,UACNC,KAAM,KAGD96E,CACT,CAGA+6E,mBAAmBpiH,EAAmB8hB,GACpC,IACE,MAAMugG,GAAM,IAAIC,WAAYC,gBAAgBviH,EAAiB,aAC7DqiH,SAAIG,KAAKC,iBAAiB,OAAOjrH,QAASkrH,IACxC,MAAMC,EAAYD,EAAIzvF,aAAa,eAAeh6B,QAAQ,QAAS,IAC7DH,EAAM4pH,EAAIzvF,aAAa,OAC7B,GAAI0vF,GAAa7pH,EAAK,CACpB,MAAM8pH,EAAW9pH,EAAIhH,MAAM,KAAK+wH,MAChC,GAAIF,IAAcC,EAAU,CAC1B,MAAME,EAAWhhG,EAAU/zB,KAAK+kC,GAAKA,EAAEn/B,OAASgvH,GAC5CG,GACFJ,EAAI/oF,aAAa,MAAOmpF,EAAS56H,IACrC,CACF,IAEKm6H,EAAIG,KAAK7wF,SAClB,OAASxsB,GACPqO,eAAQrO,MAAM,uCAAwCA,GAC/CnF,CACT,CACF,wBCvDAjW,MAAA,yCAGAA,MAAA,mBDuDFo9C,KAAet/C,IAAI05H,IEzCZ,IAAMwB,GAA6B,MAApC,MAAOA,EASX79H,YACU2lG,GAAAxlG,KAAAwlG,uBARVxlG,KAAAqD,OAAMtD,MAAS,CAAC29H,kCAEN19H,KAAA0c,cAAaJ,OAAOK,MACpB3c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OAEzBvF,KAAA4d,WAAUrW,QAAgB,GAKlC20H,GAAmB15E,WACnBw5E,GAAex5E,UACjB,CAEAtT,WACElvC,KAAK29H,YACP,CAEQA,aACN,MAAMC,EAAS59H,KAAKuF,OAAOqkB,eAAegR,SAASijG,cAAcpxH,MAAM,MACjD,IAAlBmxH,EAAO5zH,QACXhK,KAAKwlG,qBAAqBz8F,KAAK60H,EAAQ59H,KAAK89H,aAAa18C,KAAKphF,MAChE,CAEQ89H,eACN99H,KAAKqD,IAAIib,GAAG,gBAAkBte,KAAKuF,OAAOxE,WAC1Cf,KAAK4d,QAAQvU,KAAI,EACnB,iDA7BWq0H,GAA6Bh5H,MAAAC,IAAA,oCAA7B+4H,EAA6BvvF,UAAA,6BAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,qBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GDf1C9pC,MAHA,EAAAq5H,GAAA,oBAGAr5H,CAHiB,EAAAs5H,GAAA,0BAAjBt5H,MAAA+pC,EAAA7wB,UAAA,EAAA6wB,EAAA/xB,WAAAi1G,SAAA,qBCcQsM,MAAwBttH,MACxBkrH,IAAkB/sF,cAAA,YAGb4uF,CAA6B,KCP1C,MAAM56H,GAAW,CACfC,KAAK,EACLlD,aAAa,EACbq+H,aAAa,GAOR,IAAMC,GAA4B,MAAnC,MAAOA,EAMXC,GAEAC,GAEAx+H,YACUw/C,EACA79B,EACAta,EACAH,EACAw2C,EACAC,EACAwf,GANAh9D,KAAAq/C,aACAr/C,KAAAwhB,WACAxhB,KAAAkH,WACAlH,KAAA+G,YACA/G,KAAAu9C,YACAv9C,KAAAw9C,mBACAx9C,KAAAg9D,oBAfVh9D,KAAAqD,OAAMtD,MAAS,CAACo+H,gCAA+Br7H,IAE/C9C,KAAAuF,UAASm4C,SACT19C,KAAAs+H,eAAc5gF,SACd19C,MAAAo+H,EAA0C,GAE1Cp+H,MAAAq+H,EAAqBr+H,KAAKwhB,SAASu5B,UAAU9sB,KAAaytG,2BAWxD17H,KAAKqD,IAAIib,GAAG,cAAe,CAAEggH,YAAat+H,KAAKs+H,cAAeC,kBAAmBv+H,MAAKq+H,GACxF,CAEAnvF,WACE,OAAQlvC,KAAKs+H,eACX,IAAK,QACHt+H,KAAKq/C,WAAWnL,cAAcsqF,mBAC9B,MACF,IAAK,UACHx+H,KAAKq/C,WAAWnL,cAAcuqF,uBAKlC,MAAMP,EAAexiF,IAAyB17C,MAAK0+H,EAAahjF,EAAK,EACrE17C,KAAKq/C,WAAWnL,cAAc9gC,iBAAiB,cAAe8qH,GAE9Dl+H,MAAKo+H,EAAgB1xH,KACnB,CAAEmhD,QAAS7tD,KAAKq/C,WAAWnL,cAAe1hC,KAAM,cAAemsH,SAAUT,GAE7E,CAEAzmH,cAEEzX,MAAKo+H,EAAgBjsH,QAAQ,EAAG07C,UAASr7C,OAAMmsH,eAC7C9wE,EAAQ16C,oBAAoBX,EAAMmsH,EAAQ,EAE9C,CAEAD,GAAahjF,GACX,MAAM/3B,EAAU3jB,MAAKq+H,EACf12H,EAAI3H,KAAKqD,IAAIC,KAAK,cAAe,CAAEo4C,SAAS,2BAA6B/3B,EAAU,UAAY,aACrG,GAAIA,EAAS,CACX,MAAMi7G,EAAQ5+H,MAAK6+H,EAASnjF,EAAMwmC,QAClCliF,KAAKuF,SAASo1H,SAASmE,WAAWF,GAClCj3H,EAAE8R,IAAI,iBACR,MACEzZ,KAAKkH,SAASuJ,KAAKzQ,KAAK+G,UAAUyJ,QAAQ,oCAAqCxQ,KAAK+G,UAAUyJ,QAAQ,uBAAwB,CAAEE,SAAU,MAAQirH,WAAWrzH,UAAU,MACrKszH,QAAkB57H,KAAKu9C,UAAWtvB,KAAaytG,wBAAyB17H,KAAKw9C,iBAAkBx9C,KAAKg9D,kBAAiB,GAEvHr1D,EAAE8R,IAAI,gCAEV,CAEAolH,GAAS3zH,GACP,IAAI6zH,EAAU7zH,EAAKmH,KAEnB,IAEE,MAAMvO,EAAW,IAAIk7H,SACrBl7H,EAASg8G,OAAO,OAAQ50G,EAAKmH,KAAMnH,EAAK+zH,eACxCF,EAAUj7H,EAASiC,IAAI,OACzB,OAAS0e,GACP0J,QAAQrO,MAAM,oBAAqB2E,EACrC,CACA,OAAOs6G,CACT,iDA3EWZ,GAA4Bz5H,mBAAAC,KAAAD,MAAAiM,MAAAjM,MAAAkM,MAAAlM,MAAAmM,OAAAnM,0BAAA,oCAA5By5H,EAA4BhwF,UAAA,mCAAAkC,OAAA,CAAA9qC,OAAA,aAAA+4H,YAAA,6BAA5BH,CAA4B,KCI5Be,GAA6B,MAApC,MAAOA,EAuBX1N,GACAr1G,GAIAtc,YACU4G,EACD82C,EACAC,EACAwf,EACA51D,EACAk3C,GALCt+C,KAAAyG,aACDzG,KAAAu9C,YACAv9C,KAAAw9C,mBACAx9C,KAAAg9D,oBACAh9D,KAAAoH,mBACApH,KAAAs+C,oBAhCTt+C,KAAAqD,OAAMtD,MAAS,CAACm/H,kCAEhBl/H,KAAAm/H,WAAU53H,OAAgB,CACxBwC,IAAK,GACLq1H,aAAc,GACdC,WAAY,GACZC,aAAc,GACdC,SAAS,EACT9K,aAAa,EACb+K,KAAM,KAGEx/H,KAAA0c,cAAaJ,OAAOK,MAEpB3c,KAAAmd,SAAWnd,KAAK0c,WAAWS,SAC3Bnd,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAC5B3hD,KAAAuF,OAASvF,KAAK0c,WAAWnX,OACzBvF,KAAA4c,MAAQ5c,KAAK0c,WAAWE,MACrB5c,KAAA29C,GAAK39C,KAAK0c,WAAWihC,GACrB39C,KAAAmhD,QAAUnhD,KAAK0c,WAAWykC,QAEpCnhD,MAAAwxH,KAAYl1G,OAAOw4B,OACnB90C,MAAAmc,KAAsBG,OAAOxF,IAEtB9W,KAAAy/H,eAAcj4H,KAAUuvH,IAmB/B/2H,KAAAy9H,YAAW/hH,OAAY,WAAY,KACjC,MAAMf,EAAQ3a,KAAKmhD,UACb1kB,EAAYz8B,KAAKuF,OAAOq1H,KAAK14H,QAEnC,IAAKyY,IAAU8hB,EAAUzyB,OAAQ,OAEjC,MAAM8yB,EAAQniB,EAAMrZ,OAAOw7B,MAAM,oBACjC,IAAKA,EAAO,OAEZ,MAAM4iG,EAAaxlH,SAAS4iB,EAAM,GAAI,IAEtC,OADiBL,EAAU/zB,KAAKC,IAAKA,GAAEmC,KAAO40H,EAAU,EApBtD,CAEJxwF,YACErrB,SAAO,KACL7jB,KAAKqD,IAAI6E,EAAE,wBACX,MAAMy3H,EAAS3/H,KAAK0c,WAAWykC,UAC/BnhD,KAAK4/H,UAAUD,EAAM,EACpB,CAAE5mH,SAAU/Y,MAAKwxH,GACtB,CAiBAyJ,iBACEC,KAAWzqH,KAAKzQ,KAAKuF,OAAQvF,KAAK4c,MAAO5c,KAAKu9C,UAAWv9C,KAAKw9C,iBAAkBx9C,KAAKg9D,kBAAoB6iE,IAElGA,GACL7/H,KAAK0c,WAAWihC,KAAK+E,aAAa,QAAQm9E,EAAK7gH,KAAI,EAEvD,CAEA8gH,uBAAuBrC,GACrB,GAAIz9H,KAAKs+C,kBAAkB33B,WAAWU,aAAeo2G,GAAUsC,+BAC7D,OAEF,MAAMh4H,EAAiB,CACrB7F,MAAO,CACLu7H,EAASuC,sBAAwB,EAC7BnhH,KAASE,OAAO0+G,EAASuC,uBACzBnhH,KAASohH,YAAYxC,EAAS96H,YAAa86H,EAASsC,+BAAgCG,MAAatlG,SAASulG,aAGlHngI,MAAKmc,EAAoB1L,KAAKzQ,KAAKuF,OAAOyC,MAAOhI,KAAKuF,OAAO7E,WAAYqH,EAC3E,CAEQ63H,UAAUjlH,GAEhB,GADA3a,KAAKqD,IAAI6E,EAAE,YAAa,CAAEyS,WACrBA,EAEH,YADA3a,KAAKogI,WAAWzlH,GAAO,GAKzB,IADqB3a,KAAKqgI,aAAa1lH,GAGrC,YADA3a,KAAKogI,WAAWzlH,GAAO,GAIzB,MAAM3B,EAAShZ,KAAKoH,iBAAiBrB,IAAI4U,GACzC,GAAI3B,EAAJ,CACE,MAAMsnH,GAActgI,KAAKqgI,aAAarnH,EAAOpW,OAC7C5C,KAAKogI,WAAWpnH,EAAOpW,MAAO09H,EAAYtnH,EAAOzW,KAEnD,MAMAvC,KAAKy/H,YAAY9H,YAAYh9G,EAHT3a,KAAKuF,OAAOg1B,kBACbv6B,KAAKuF,OAAO7E,WACjBV,KAAKuF,OAAOxE,WAEvBuH,UAAU1G,IACT,IAAKA,EAEH,YADA5B,KAAKogI,WAAWzlH,GAAO,GAGzB3a,KAAKoH,iBAAiB/E,QAAQsY,EAAO/Y,GACrC,MAAM0+H,GAActgI,KAAKqgI,aAAaz+H,EAASgB,OAC/C5C,KAAKogI,WAAWx+H,EAASgB,MAAO09H,EAAY1+H,EAASW,KAAI,EAE/D,CAEQ69H,WAAWzlH,EAAe2lH,EAAqB1F,GACrD,MAAMuE,EAAUn/H,KAAKugI,WAAW5lH,EAAO2lH,EAAY1F,GACnD56H,KAAKm/H,QAAQ91H,IAAI81H,EACnB,CAEQoB,WAAW5lH,EAAe2lH,EAAqB1F,GAErDjgH,MAEO,CACL5Q,IAHF4Q,EAAQA,EAAM/G,QAAQ,gBAAiBC,IAAWC,aAAa,MAAO9T,KAAKyG,WAAWlB,SAIpF+5H,aAAcgB,EAAa,OAAO3lH,EAAMkR,UAAUlR,EAAM6lH,YAAY,KAAO,KAAO,GAClFpB,aAAc,QAAQxE,GAAM6F,cAAgBzgI,KAAK0gI,SAAS/lH,EAAO,OACjE0kH,WAAYzE,GAAM+F,YAAc3gI,KAAK0gI,SAAS/lH,EAAO,GACrD4kH,QAASqB,KAAgBrB,QAAQ5kH,GACjC85G,YAAamM,KAAgBnM,YAAY95G,GACzC6kH,KAAMoB,KAAgBC,aAAalmH,GAEvC,CAEQ+lH,SAAS32H,EAAa23G,GAC5B,IAAI/8B,EAAQ,GACZ,OAAa,IAAT+8B,IACF/8B,GAAS,uBACE,IAAT+8B,IACF/8B,GAAS,wBACPA,IAAU56E,EAAImD,SAAS,OACzBy3E,EAAQ,IAAMA,GACT56E,EAAM46E,CACf,CAEQ07C,aAAa1lH,GACnB,MAAMmmH,EAAanmH,EAAMrZ,OAAOC,oBAEhC,OADqBu/H,EAAWt0H,WAAW,UAAYs0H,EAAWt0H,WAAW,QAE/E,iDAzJW0yH,GAA6Bx6H,MAAAC,KAAAD,MAAAiM,OAAAjM,gCAAAkM,IAAAlM,MAAAmM,IAAA,oCAA7BquH,EAA6B/wF,UAAA,yCAAAC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,YAA7BowF,CAA6B,KCpBpC,MAAO6B,WAA8Bj/E,KAGzCjiD,cAAgBC,MAAM,CAAEihI,2BAFxB/gI,KAAAqU,KAAO0hB,KAAiBirG,gBAE0B,CAElDnhH,QAAS1C,aACP,MAAM6kC,EAAgB,IAAK7kC,GAC3B6kC,SAAci/E,UAAY,YAC1Bj/E,EAAck/E,aAAe,GAC7Bl/E,EAAcm/E,QAAU,GACxBn/E,EAAco/E,wBAA0B,GACxCp/E,EAAcq/E,4BAA6B,EACpCr/E,CACT,EAGFF,KAAet/C,IAAIu+H,iFCjBXr8H,MAAA,eAKEA,MAAA,mBAAAA,MAAAiiD,GAAA,MAAAhN,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAA2nF,YAAW,GAAO,GAAM,GAEjC58H,MAAA,iBACFA,iCAJEA,MAAA,WAAAi1C,EAAAgE,KAAAxwB,oDAyBFzoB,MAAA,eAKEA,MAAA,mBAAAA,MAAAslD,GAAA,MAAArQ,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAAshF,iBAAgB,GAEzBv2H,MAAA,iBACFA,iCAJEA,MAAA,WAAAi1C,EAAAgE,KAAAxwB,qCAcAzoB,MAPF,aAOEA,CADD,cACWA,MAAA,eACZA,oDAHEA,MADA,WAAAi1C,EAAAgE,KAAAxwB,SACAzoB,CAD0B,oBAAA68H,6CAU1B78H,MAAA,eAAsBA,MAAA,mBAAAA,MAAA+kH,GAAA,MAAA9vE,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAA2nF,YAAW,GAAO,GAAM,GACrD58H,MAAA,iBACAA,MAAA,UAAMA,MAAA,wBACRA,gBADQA,MAAA,GAAAA,YAAA,oFAIRA,MAAA,eAAsBA,MAAA,mBAAAA,MAAAqvE,GAAA,MAAAp6B,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAAshF,iBAAgB,GAC7Cv2H,MAAA,iBACAA,MAAA,UAAMA,MAAA,wBACRA,gBADQA,MAAA,GAAAA,YAAA,oFAIRA,MAAA,eAAsBA,MAAA,mBAAAA,MAAA88H,GAAA,MAAA7nF,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAA2nF,YAAW,GAAM,GAAK,GACnD58H,MAAA,iBACAA,MAAA,UAAMA,MAAA,wBACRA,gBADQA,MAAA,GAAAA,YAAA,qFAIRA,MAAA,eAAsBA,MAAA,mBAAAA,MAAAoqH,GAAA,MAAAn1E,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAA2nF,YAAW,GAAM,GAAM,GACpD58H,MAAA,iBACAA,MAAA,UAAMA,MAAA,wBACRA,gBADQA,MAAA,GAAAA,YAAA,oEAHVA,MAlBA,EAAA+8H,GAAA,gBAkBA/8H,CAlBkB,EAAAg9H,GAAA,gBAkBlBh9H,CAZwB,EAAAi9H,GAAA,gBAYxBj9H,CAN0B,EAAAk9H,GAAA,uCAZ1Bl9H,MAAAi1C,EAAAkoF,WAAA,MAMAn9H,cAAAi1C,EAAAmoF,iBAAA,MAMAp9H,cAAAi1C,EAAAooF,mBAAA,MAMAr9H,cAAAi1C,EAAAqoF,kBAAA,iCA+BQt9H,MADF,WACEA,CAD8B,YACSA,MAAA,GAAeA,QAGlDA,MAFJ,WAEIA,CAFqC,SAErCA,CADsF,UAChFA,MAAA,GAGZA,+CANyCA,MAAA,GAAAA,MAAAi1C,EAAAwH,WAElCz8C,MAAA,GAAkEA,MAAlE,OAAAu9H,EAAAl4H,IAAArF,MAAkEA,CAAjD,QAAAu9H,EAAAl4H,KACZrF,MAAA,GAAAA,MAAAu9H,EAAA3C,yCAWR56H,MADF,SACEA,CADmC,YAEjCA,MAAA,YAEJA,iCAJGA,MAAA,OAAAu9H,EAAAl4H,IAAArF,OAEMA,MAAA,GAAAA,MAAA,MAAAu9H,EAAA5C,WAAA36H,kCAMPA,MADF,SACEA,CAD6E,YAE3EA,MAAA,iBAEJA,iCAJqCA,MAAlC,OAAAu9H,EAAAl4H,IAAArF,MAAkCA,CAAjB,QAAAu9H,EAAAl4H,KAENrF,MAAA,GAAAA,MAAA,UAAAu9H,EAAAzC,iCAZlB96H,MAAA,YAQIA,MAPF,EAAAw9H,GAAA,WAOEx9H,CAPkB,EAAAy9H,GAAA,YAetBz9H,+BAfEA,cAAAu9H,EAAA1C,QAAA,+CAnHV76H,MAAA,WACEA,MAAA,EAAA09H,GAAA,gBAWA19H,MAAA,cAMEA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAoC,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAAmmF,uBAAuBnmF,EAAA8jF,YAAW,GAE3C/4H,MAAA,gBAOGA,MAAA,yBAELA,UAYAA,MAXA,EAAA29H,GAAA,eAWA39H,CAXoB,EAAA49H,GAAA,gBAsBtB59H,QACAA,MAAA,kBACEA,MAAA,EAAA69H,GAAA,qBA0BF79H,QAOQA,MALR,WAKQA,CALqB,YAKrBA,CAJ8B,iBAI9BA,CAHuF,YAGvFA,CAFwC,wBAGtCA,MAAA,eAWAA,MAAA,gBAAWA,MAAA,IACbA,UAEAA,MAAA,GAAA89H,GAAA,cAUF99H,QACAA,MAAA,GAAA+9H,GAAA,cAqBN/9H,wDArIEA,cAAAi1C,EAAA+oF,aAAA,MAcEh+H,QACAA,MADA,oBAAAi+C,EAAAhJ,EAAA8jF,aAAA96E,EAAAo9E,gCACAr7H,CADwD,UAAAA,MAAA,GAAAmpC,IAAA,OAAA80F,EAAAhpF,EAAA8jF,YAAA,KAAAkF,EAAA3C,uBAAA,IAMtDt7H,QAKAA,MALA,iBAAAi1C,EAAAipF,2BAAA,qHAKAl+H,CADC,uBAAAgqH,EAAA/0E,EAAA8jF,YAAA,KAAA/O,EAAAqR,gCAKLr7H,MAAA,GAAAA,MAAAi1C,EAAAkpF,aAAA,MAWAn+H,cAAAi1C,EAAAmpF,aAAA,MA8CsBp+H,MAAA,GAAAA,MAAA,YAAAi1C,EAAA/8B,OAGZlY,QAOAA,MAPA,kBAAAi1C,EAAAp0C,OAAAxE,UAOA2D,CAPoC,cAAAi1C,EAAAgI,SAAApnC,YAOpC7V,CAJoC,WAAAi1C,EAAAgI,SAAAnlB,SAIpC93B,CAH8B,SAAAi1C,EAAAp0C,OAG9Bb,CADiB,uBAGRA,MAAA,GAAAA,MAAAi1C,EAAAgI,SAAAjnC,OAGbhW,cAAA,MAAAu9H,KAAA3C,aAAA,OAWF56H,cAAAi1C,EAAAwH,UAAA,iCAlHRz8C,MAAA,EAAAq+H,GAAA,4BAAAr+H,MAAAi1C,EAAAj9B,WAAAi1G,SAAA,OCmDK,IAAMqR,GAAN,MAAMA,WAAkC9D,GAU7Cr/H,YACEyF,EACAi4C,EACAC,EACAwf,EACA51D,EACAk3C,GAEAx+C,MACEwF,EACAi4C,EACAC,EACAwf,EACA51D,EACAk3C,GAvBMt+C,KAAA0iI,cAAahuH,OAAS,IAAM1U,KAAKmd,WAAW8jH,QAAQ/zH,SAAS,QAASyY,GAAaC,MACnF5lB,KAAA6iI,cAAanuH,OAAS,IAAM1U,KAAKmd,WAAW8jH,QAAQ/zH,SAAS,QAASyY,GAAaC,MACnF5lB,KAAA8iI,cAAapuH,OAAS,IAAM1U,KAAKmd,WAAW8jH,QAAQ/zH,SAAS,QAASyY,GAAaC,MACnF5lB,KAAA6hI,SAAW7hI,KAAK0c,WAAWO,WAAW,YACtCjd,KAAA8hI,eAAiB9hI,KAAK0c,WAAWO,WAAW,kBAC5Cjd,KAAA+hI,iBAAmB/hI,KAAK0c,WAAWO,WAAW,oBAC9Cjd,KAAAgiI,gBAAkBhiI,KAAK0c,WAAWO,WAAW,mBAC7Cjd,KAAA4iI,yBAA2B5iI,KAAK0c,WAAWO,WAAW,4BAkB9D8jH,GAAsBv+E,WAItB,MAAMygF,KAAevnH,OAAY,eAAgB,KAC/C,MAAMoH,EAAI9iB,KAAK0c,WAAWS,WAC1B,MAAO,CACL+lH,cAAepgH,EAAEq+G,MACjBx+B,WAAY7/E,EAAEo+G,WACdiC,UAAU,MAIdt/G,SAAO,KACL,MAAMte,EAAS09H,IAEfjjI,KAAKuF,OAAOq1H,KAAKjwC,UAAUplF,EAAM,EAErC,CAEA2pC,WACEpvC,MAAMovC,WAGNlvC,KAAKuF,OAAOq1H,KAAKwI,YAAeljI,IAAqBF,KAAKqjI,SAASnjI,EAAI,EACvEF,KAAKuF,OAAOq1H,KAAK0I,aAAgBpjI,IAAqBF,KAAKqjI,SAASnjI,EAAI,CAC1E,CAEAohI,WAAWpK,EAAwBqM,GACjCvjI,KAAKuF,OAAOq1H,KAAKllF,OAAOwhF,EAAeqM,EACzC,CAEQF,SAASnjI,GAEf,MAAMopE,EADoD,QAA1CtpE,KAAKmd,WAAWikH,sBACelhI,EAAK2C,IAAxB3C,EAAKyC,YACjC3C,KAAK0c,WAAWihC,KAAK+E,aAAa4mB,EACpC,iDA9DW05D,IAAyBt+H,MAAAC,KAAAD,MAAAiM,OAAAjM,gCAAAkM,IAAAlM,MAAAmM,IAAA,oCAAzBmyH,GAAyB70F,UAAA,wBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAC,OAAA,qrDAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,GDpDtC9pC,MAAA,EAAA8+H,GAAA,gBAAA9+H,OAAA++H,EAAAh1F,EAAA0wF,WAAA,KAAAsE,mBC8BQh0F,MAAe3+B,MACf89B,MAAa79B,MACbmrC,MACAiC,MAAantC,wBACbw+B,MAAav+B,MACbwwC,MAAkBvwC,YAClB0xC,MAAWzxC,wBACX0xC,MAAmB1xC,YACnBopF,MAAcnpF,MACd+sH,GACAzuF,IAAer+B,KACfw9B,MAAcyB,OAAA,ivCAWT0yF,MAAyBjgF,OAAA,CARrCjE,GAAc,CACbnpB,SAAU,C3J/BO,uBASI,2BAHc,2CARtB,uB2JuCd,EAACqtB,GAAAC,IAAA,qBAYc1mC,IACDi9G,MACO96E,MACCwT,MACD9wD,GACC+kB,MAhBV68G,IC/CP,MAAOU,WAA8B5hF,KAGzCjiD,cAAgBC,MAAM,CAAE4jI,2BAFxB1jI,KAAAqU,KAAO0hB,KAAiByF,gBAE0B,CAElD3b,QAAS1C,aACP,MAAM6kC,EAAgB,IAAK7kC,GAC3B6kC,SAAcq/E,4BAA6B,EACpCr/E,CACT,EAGFF,KAAet/C,IAAIkhI,ICMZ,IAAMC,GAAN,MAAMA,GAMX9jI,cAJUG,KAAA0c,cAAaJ,OAAOK,MAEtB3c,KAAA+Y,YAAWuD,OAAOw4B,OAGxB4uF,GAAsBlhF,WAEtB,IAAI5hC,GAAQ,GACZiD,SAAO,KACL,MAAMwY,EAAUr8B,KAAK0c,WAAWihC,KAAKthB,QAErCA,EAAQI,UAAYz8B,KAAK0c,WAAWnX,OAAOq1H,KAAK14H,QAAQ8H,OAGnD4W,GACHyb,EAAQunG,yBACVhjH,GAAQ,GAEZ,CAEAsuB,WACElvC,KAAK6jI,kBAEP,CAEQA,mBACN,MAAMC,KAAapoH,OAAY,aAAc,KAC3C,MAAMoH,EAAI9iB,KAAK0c,WAAWS,WAC1B,MAAO,CACL4mH,kBAAmBjhH,EAAEkhH,kBACrBb,UAAU,EACVc,cAAc,EACdf,cAAepgH,EAAEq+G,MACjBx+B,WAAY7/E,EAAEo+G,WACdgD,YAAaphH,EAAEqhH,aAAe,EAC9BC,qBAAsBthH,EAAEuhH,yBAI5BxgH,SAAO,KACL,MAAMte,EAASu+H,IAEf9jI,KAAK0c,WAAWnX,OAAOq1H,KAAKjwC,UAAUplF,EAAM,EAC3C,CAAEwT,SAAU/Y,KAAK+Y,UACtB,iDA9CW4qH,GAAyB,oCAAzBA,GAAyBx1F,UAAA,wBAAAC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,MAAzB60F,MAAyB5gF,OAAA,CARrCjE,GAAc,CACbnpB,SAAU,C7JFO,uBASI,2BAFc,2CATtB,uB6JUd,EAACqtB,GAAAC,IAAA,yBACW0gF,ICfP,MAAOW,WAA4BxiF,KAIvCjiD,cAAgBC,MAAM,CAAEwkI,yBAHxBtkI,KAAAqU,KAAoC0hB,KAAiBK,eACrDp2B,KAAAwS,KAA4B,QAEoB,CAEhDqN,QAAS1C,WAAUxC,UACjB,MAAM2oC,EAAKqwE,GAAkBC,mBAAmB,IAAKz2G,IAIrDmmC,SAAG+0C,UAAW,IAAI45B,IAA4BC,aAAav3G,EAAO3a,KAAKwS,KAAM8wC,EAAGihF,sBAAwB,GAAIjhF,EAAGkhF,gBAAkB,IAGjIlhF,EAAG03C,aAAe,GAClB13C,EAAGlmC,YAAckmC,EAAG03C,WAEpB13C,EAAGy3C,cAAe,EAClBz3C,EAAGngC,gBAAiB,EAMpBmgC,EAAGlgC,eAAiBkgC,EAAGpgC,gBAChBogC,CACT,EAGFxB,KAAet/C,IAAI8hI,IC/Bb,MAAOG,WAA2BH,GAAxCzkI,kCACEG,KAAAqU,KAAO0hB,KAAiB2uG,aAO1B,CALE7kH,OAAO+D,GAGL,MAFqC,IAAK9jB,MAAM+f,OAAO+D,GAGzD,EAGFk+B,KAAet/C,IAAIiiI,ICOZ,IAAME,GAAN,MAAMA,GAYX9kI,cAVUG,KAAA0c,cAAaJ,OAAOK,MAEpB3c,KAAA4c,MAAQ5c,KAAK0c,WAAWE,MACxB5c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OAEzBvF,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAEzB3hD,KAAAi9B,IAAMj9B,KAAK0c,WAAWO,WAAW,OACjCjd,KAAAm9B,IAAMn9B,KAAK0c,WAAWO,WAAW,OAGzCwnH,GAAmBjiF,UACrB,iDAdWmiF,GAAsB,oCAAtBA,GAAsBx2F,UAAA,qBAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,iLAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICvBnC9pC,MAAA,sBACEA,MAAA,aAOAA,MAAA,eAAWA,MAAA,GACbA,UACAA,MAAA,kCAVgBA,MAAA,YAAA+pC,EAAA7xB,OAGZlY,QAIAA,MAJA,kBAAA+pC,EAAAlpC,OAAAxE,UAIA2D,CAJoC,WAAA+pC,EAAAkT,SAAAnlB,SAIpC93B,CAH8B,cAAA+pC,EAAAkT,SAAApnC,YAG9B7V,CAFoC,MAAA+pC,EAAAxR,MAEpCv4B,CADa,MAAA+pC,EAAAtR,OAEJz4B,MAAA,GAAAA,MAAA+pC,EAAAkT,SAAAjnC,uBDOL+mC,MAAkB98C,YAClBi+C,MAAWjyC,0CACXkyC,MAAmBlyC,YACnB4pF,MAAc3pF,MACdkwC,IAAwBhS,cAAA,MAInB61F,MAAsB5hF,OAAA,CADlCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,yBAClC0hF,IEjBP,MAAOC,WAA4BN,GAAzCzkI,kCACEG,KAAAqU,KAAO0hB,KAAiB+1E,eACxB9rG,KAAAwS,KAAO,QAOT,CALEqN,OAAO+D,GAGL,MAFqC,IAAK9jB,MAAM+f,OAAO+D,GAGzD,wBhCHElf,MAAA,8CAMAA,MAAA,uBgCAJo9C,KAAet/C,IAAIoiI,ICDZ,IAAMC,GAAN,MAAMA,WAAgCxT,GAE3CxxH,cACEC,QACAE,KAAKmgG,iBACLykC,GAAoBpiF,UACtB,iDANWqiF,GAAuB,oCAAvBA,GAAuB12F,UAAA,sBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GjCFpC9pC,MATA,EAAAogI,GAAA,yBASApgI,CATqB,EAAAqgI,GAAA,8BAArBrgI,MAAA+pC,EAAAijF,cAAA,+CiCWamT,MAAuB9hF,OAAA,CADnCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,yBAClC4hF,ICTP,MAAOG,WAA0BljF,KAGrCjiD,cAAgBC,MAAM,CAAEklI,uBAFxBhlI,KAAAqU,KAAoC0hB,KAAiBQ,YAEP,CAE9C1W,OAAO+D,GAGL,OADoB9U,IAAkBC,YAAYhJ,IAAIgwB,KAAiBO,cACpDzW,OAAO+D,EAE5B,wBlCNElf,MAAA,8CAMAA,MAAA,uBkCGJo9C,KAAet/C,IAAIwiI,ICRZ,IAAMC,GAAsB,MAA7B,MAAOA,UAA8B5T,GAIzCxxH,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAAEklI,yBAAyB5T,GAAgBvuH,UAIxD9C,KAAKmgG,iBACL6kC,GAAkBxiF,UACpB,iDARWyiF,EAAqB,oCAArBA,EAAqB92F,UAAA,oBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GnCElC9pC,MATA,EAAAwgI,GAAA,yBASAxgI,CATqB,EAAAygI,GAAA,8BAArBzgI,MAAA+pC,EAAAijF,cAAA,qDmCOauT,CAAsB,KCP7B,MAAOG,WAA2BtjF,KAGtCjiD,cAAgBC,MAAM,CAAEslI,wBAFxBplI,KAAAqU,KAAO0hB,KAAiBsvG,cAIxBrlI,KAAAupC,kBAAmB,CAF4B,CAI/C1pB,OAAO+D,GACL,MAAMo+B,EAAgB,IAAKp+B,EAAMzG,UACjC6kC,SAAcsjF,kBAAoB,GAClCtjF,EAAcujF,WAAa,EACpBvjF,CACT,EAGFF,KAAet/C,IAAI4iI,wIChBf1gI,MAAA,kCAIEA,MAHA,kBAAAopC,EAAAvoC,OAAAxE,UAGA2D,CAHoC,cAAAopC,EAAA6T,SAAApnC,YAGpC7V,CAFoC,WAAAopC,EAAA6T,SAAAnlB,SAEpC93B,CAD8B,UAAAA,MAAA,EAAAisC,GAAA7C,EAAA03F,+CAKhC9gI,MAAA,gBAMAA,MAAA,UAAAA,8BADEA,MAJA,kBAAAopC,EAAAvoC,OAAAxE,UAIA2D,CAJoC,OAAAopC,EAAA23F,WAIpC/gI,CAHmB,cAAAopC,EAAA6T,SAAApnC,YAGnB7V,CAFoC,WAAAopC,EAAA6T,SAAAnlB,SAEpC93B,CAD8B,UAAAA,MAAA,EAAAksC,GAAA9C,EAAA03F,kBAAA13F,EAAA43F,cCc7B,IAAMC,GAAN,MAAMA,GA+BX9lI,cA7BUG,KAAA0c,cAAaJ,OAAOK,MAEpB3c,KAAA4c,MAAQ5c,KAAK0c,WAAWE,MACxB5c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OAEzBvF,KAAAmd,SAAWnd,KAAK0c,WAAWS,SAC3Bnd,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAQzB3hD,KAAA4lI,YAAc5lI,KAAK0c,WAAWO,WAAW,YAKzCjd,KAAAylI,YAAW/pH,OAAY,WAAY,IAAMnS,KAAK60E,IAAIp+E,KAAK4lI,eAAiB,IAExE5lI,KAAA6lI,eAAcnqH,OAAY,cAAe,KACjD,MAAMoqH,EAAK9lI,KAAK4lI,eAAiB,EACjC,OAAOE,EAAK,GAAKA,EAAK,IAGd9lI,KAAAwlI,gBAAkBxlI,KAAK0c,WAAWO,WAAW,mBAC7Cjd,KAAA0lI,SAAW1lI,KAAK0c,WAAWO,WAAW,gBAG9CmoH,GAAmB5iF,UACrB,iDAjCWmjF,GAAsB,oCAAtBA,GAAsBx3F,UAAA,qBAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,qRAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ID7BnC9pC,MAAA,sBASEA,MARA,EAAAqhI,GAAA,cAQArhI,CARsB,EAAAshI,GAAA,kBAkBtBthI,MAAA,eAAWA,MAAA,GACbA,UACAA,MAAA,kCArB8EA,MAA9D,YAAA+pC,EAAA7xB,MAA8DlY,CAA3C,UAAAA,MAAA,EAAAmpC,GAAAY,EAAAg3F,WAAA,IACjC/gI,cAAA+pC,EAAAo3F,cAAA,KAkBWnhI,MAAA,GAAAA,MAAA+pC,EAAAkT,SAAAjnC,uBCAL+mC,MAAkB98C,YAClBi+C,MAAWjyC,wBACXkyC,MAAmBlyC,YACnBurC,MACAq+C,MAAc3pF,MACdk1C,MACAhF,IAAwBxQ,OAAA,wDAInBq1F,MAAsB5iF,OAAA,CADlCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,yBAClC0iF,ICvBP,MAAOM,WAAiCnkF,KAG5CjiD,cAAgBC,MAAM,CAAEmmI,8BAFxBjmI,KAAAqU,KAAO0hB,KAAiBE,mBAE6B,CAErDpW,OAAO+D,GAEL,MAAM0/B,EADqBx0C,IAAkBC,YAAYhJ,IAAIgwB,KAAiBC,eAChDnW,OAAO+D,GACrC0/B,SAAG/kB,YAAc,IAMV+kB,CACT,wBvCXE5+C,MAAA,8CAMAA,MAAA,uBuCQJo9C,KAAet/C,IAAIyjI,ICbZ,IAAMC,GAA6B,MAApC,MAAOA,UAAqC7U,GAIhDxxH,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAACmmI,gCAA+B7U,GAAgBvuH,UAI7D9C,KAAKmgG,iBACL8lC,GAAyBzjF,UAC3B,iDARW0jF,EAA4B,oCAA5BA,EAA4B/3F,UAAA,4BAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GxCEzC9pC,MATA,EAAAyhI,GAAA,yBASAzhI,CATqB,EAAA0hI,GAAA,8BAArB1hI,MAAA+pC,EAAAijF,cAAA,qDwCOawU,CAA6B,2BxCDtCxhI,MAAA,8CAMAA,MAAA,uByCLG,IAAM2hI,GAAwB,MAA/B,MAAOA,UAAgChV,GAI3CxxH,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAACsmI,2BAA0BhV,GAAgBvuH,UAIxD9C,KAAKmgG,iBACL21B,GAAmBtzE,UACrB,iDARW6jF,EAAuB,oCAAvBA,EAAuBl4F,UAAA,sBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GzCEpC9pC,MATA,EAAA4hI,GAAA,yBASA5hI,CATqB,EAAA6hI,GAAA,8BAArB7hI,MAAA+pC,EAAAijF,cAAA,qDyCOa2U,CAAwB,KCG/B,MAAOG,WAAkC1kF,KAG7CjiD,cAAgBC,MAAM,CAAE0mI,+BAFxBxmI,KAAAqU,KAAO0hB,KAAiB81E,oBAE8B,CAEtDhsF,QAAS9e,YAAWoc,aAClB,MAAMxV,EAAI3H,KAAKqD,IAAI8a,WAAW,SAAU,SAAUpd,EAAW,CAAEA,YAAWoc,aAIpEmmC,EAAK,IAAKnmC,GACV2G,EAAMw/B,EAQZA,SAAGoiD,cAAgB5hF,EAAI2iH,OAAS,GAChCnjF,EAAGqiD,kBAAoB7hF,EAAI4iH,WAAa,GACxCpjF,EAAGqiD,kBAAoB9B,GAA8B//E,EAAI4iH,WAAa,GAAI,KAC1EpjF,EAAGg7C,aAAe,GAAGx6E,EAAI6iH,0BAEzBrjF,EAAGsiE,YAAa,WAChBtiE,EAAGrgC,iBAAkB,EACrBqgC,EAAGw3C,mBAAoB,EACvBx3C,EAAGpgC,iBAAkB,EAErBogC,EAAGuwE,aAAc,EAIjBvwE,EAAG+6C,MAAQv6E,EAAI8iH,WAAa,QAAU,QAC/Bj/H,EAAEsY,EAAEqjC,EACb,wB1CvCE5+C,MAAA,8CAMAA,MAAA,uB0CoCJo9C,KAAet/C,IAAIgkI,ICpCZ,IAAMK,GAAN,MAAMA,WAAsCxV,GAIjDxxH,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAAC8mI,kCAAgCxV,GAAgBvuH,UAI9D9C,KAAKmgG,iBACLqmC,GAA0BhkF,UAC5B,iDARWqkF,GAA6B,oCAA7BA,GAA6B14F,UAAA,8BAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,G3CH1C9pC,MATA,EAAAoiI,GAAA,yBASApiI,CATqB,EAAAqiI,GAAA,8BAArBriI,MAAA+pC,EAAAijF,cAAA,+C2CYamV,IAA6BG,EAAAjkF,OAAA,CADzCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,yBAClC4jF,ICTP,MAAOI,WAA0BnlF,KAGrCjiD,cAAgBC,MAAM,CAACmnI,uBAFvBjnI,KAAAqU,KAAoC0hB,KAAiBO,YAET,CAE5CzW,OAAO+D,GAIL,MAAMjc,GAFFtE,EAAMtD,MAAS,CAACknI,sBAAoB,MAE1B3oH,GAAG,SAAU,CAAEsF,WAErB0/B,KAAI0wE,yBAAwBI,eAAe,IAAIT,IAAoBM,UAAUrwG,GAErF0/B,EAAG/kB,YAAc,KACG,OAAhB+kB,EAAG/kB,YAAoB+kB,EAAG/kB,UAAY,MAG1C,MAAMgjE,EAAWj+C,EAAG6nD,eACd2pB,EAAiBv0H,OAAO2jB,OAAOkmF,IAAqBl9F,SAASq0F,GACnE55F,SAAEO,EAAE,SAASq5F,IAAY,CAAE6yB,aAAYU,mBAEnCA,EACGd,IACH1wE,EAAGy3C,YAAa,EAChBz3C,EAAGngC,cAAe,EAClBmgC,EAAGjgC,cAAe,GAGpB1b,EAAEO,EAAE,0CAA2C,CAAEksH,eAE5CzsH,EAAEsY,EAAEqjC,EACb,wB5C5BE5+C,MAAA,8CAMAA,MAAA,uB4CyBJo9C,KAAet/C,IAAIykI,IC9BZ,IAAMC,GAAsB,MAA7B,MAAOA,UAA8B7V,GAIzCxxH,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAAEmnI,yBAAyB7V,GAAgBvuH,UAIxD9C,KAAKmgG,iBACL8mC,GAAkBzkF,UACpB,iDARW0kF,EAAqB,oCAArBA,EAAqB/4F,UAAA,oBAAA3sB,SAAA,CAAA9c,OAAA0pC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,G7CElC9pC,MATA,EAAAyiI,GAAA,yBASAziI,CATqB,EAAA0iI,GAAA,8BAArB1iI,MAAA+pC,EAAAijF,cAAA,qD6COawV,CAAsB,0CCV5B,MAAMG,GAA+B,CAC1CC,MAAO,CACLC,IAAK,QACLC,QAAS,WACTh1H,KAAM,SAER,WAAY,CACV+0H,IAAK,UACLC,QAAS,WACTh1H,KAAM,SAGR,YAAa,CACX+0H,IAAK,MACLC,QAAS,qCCXH9iI,MAAA,kBACEA,MAAA,GACFA,kCAFYA,MAAA,QAAA+iI,GACV/iI,cAAA,IAAA+iI,EAAA,MCsCL,IAAMC,GAAN,MAAMA,GAIXpqF,GAGAk0E,GAIAmW,GAEAC,GAEAC,GAUAC,GACAC,GACAC,GAGAC,GAEApoI,YACU09C,EACAC,GADAx9C,KAAAu9C,YACAv9C,KAAAw9C,mBAhCVx9C,KAAAqD,OAAMtD,MAAS,CAAC2nI,mCAEhB1nI,MAAAs9C,KAAchhC,OAAOK,MAGrB3c,MAAAwxH,KAAYl1G,OAAOw4B,OAInB90C,MAAA2nI,KAAYngI,KAAUuV,MAAWpF,KAAK,WAAY3X,MAAKs9C,EAAYngC,WAAW+qH,UAAY,UAE1FloI,MAAA4nI,KAAgBpgI,KAAUuV,MAAWpF,KAAK,sBAAuB,cAEjE3X,MAAA6nI,KAAiBrgI,KAAU2gI,MAEjBnoI,KAAA4c,MAAQ5c,MAAKs9C,EAAY1gC,MACzB5c,KAAAuF,OAASvF,MAAKs9C,EAAY/3C,OAE1BvF,KAAA2hD,OAAS3hD,MAAKs9C,EAAYqE,OAC1B3hD,KAAA29C,GAAK39C,MAAKs9C,EAAYK,GAEtB39C,KAAA4S,SAAQrL,OAAiB,IAEnCvH,MAAA8nI,EAAcT,GAAcC,MAC5BtnI,MAAA+nI,EAAuB,GACvB/nI,MAAAgoI,GAAU,EAGVhoI,MAAAioI,GAAmB,EAkBnBjoI,MAAAooI,EAAgB,MAXdvkH,OAAO,IAAM7jB,MAAKqoI,EAAkBroI,MAAK4nI,EAAcpjI,YAAS,EAGhEqf,OAAO,IAAM7jB,MAAKsoI,EAAetoI,MAAK2nI,EAAUnjI,UAClD,CAEA8jI,GAAe91H,GACbxS,MAAK8nI,EAAcT,GAAc70H,GACjCxS,MAAKuoI,GACP,CAEAH,GACAC,GAAkBpiE,GACNjmE,KAAKqD,IAAIib,GAAG,mBAAoB,CAAE2nD,aAC5CjmE,MAAKgoI,EACU,qBAAb/hE,GACgB,WAAbA,EAGDjmE,MAAKooI,IAAkBniE,IAE3BjmE,MAAKooI,EAAgBniE,EAErBjmE,MAAK6nI,EAAe56H,SAASpJ,QAAKsb,MAAK,IAAI7W,UAAUsK,IACnD5S,MAAK+nI,EAAan1H,EAAMnQ,OAAO4P,GAAQA,EAAKm2H,SAAWxoI,MAAKgoI,GAASvnI,IAAI4R,GAAQA,EAAKo2H,MACtFzoI,MAAKioI,GAAmB,EACxBjoI,MAAKuoI,GAAmB,GAE5B,CAEAA,KACE,MAAMhB,EAAMvnI,MAAK8nI,EAAYP,IACvBnU,EAAWpzH,MAAK+nI,EAEnBtlI,OAAO8rC,IAAa,wBAAwB+0D,KAAK/0D,IACjD9rC,OAAO8rC,GAAYA,EAAS77B,SAAS60H,IACxCvnI,KAAK4S,MAAMvJ,IAAI+pH,GAEIpzH,MAAKioI,IAAqB7U,EAASl9G,KAAKq4B,GAAYA,IAAavuC,MAAKs9C,EAAY6D,YAEnGnhD,KAAK29C,KAAK+E,aAAa,GAC3B,CAEA49D,iBACE,MAAMooB,KAAWlhI,KAAUuV,KAAW/c,MAAKwxH,GAAW75G,KAAK,kBAAmB,UACxEzM,EAA6B,CACjCi8D,OAAQnnE,MAAKgoI,EACbR,QAASxnI,MAAK8nI,EAAYN,QAC1Bh1H,KAAMxS,MAAK8nI,EAAYt1H,KACvB6B,KAAMq0H,EAASlkI,UAEjBkkI,EAASl9C,UACSxrF,KAAKu9C,UAAU9sC,KAAKk4H,KAA2B,CAC/D5qF,WAAW,EACX7yC,OACAsyC,iBAAkBx9C,KAAKw9C,iBACvBQ,MAAO,UAGCnC,cAAcvzC,UAAW9D,IAC5BA,GAELxE,MAAK6nI,EAAevqH,OAAO9Y,EAAO6P,KAAMrU,MAAKgoI,EAASxjI,EAAOokI,aAAatgI,UAAUugI,KACtE,IAARA,EACFl9F,MAAM,0EAEN3rC,MAAK+nI,EAAWr7H,KAAKlI,EAAO6P,MAC5BrU,MAAKuoI,IACLvoI,KAAK29C,KAAK+E,aAAal+C,EAAO6P,MAAI,EAErC,EAEL,iDA7GWqzH,IAA6BhjI,MAAAC,OAAAD,aAAA,oCAA7BgjI,GAA6Bv5F,UAAA,6BAAAC,MAAA,GAAAC,KAAA,EAAAC,OAAA,wQAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDzClC9pC,MAHN,UAGMA,CAHsB,qBAGtBA,CAF0E,iBAE1EA,CADgH,kBAC3FA,MAAA,wBAAqDA,QAC1EA,MAAA,EAAAokI,GAAA,mBAAApkI,OAKFA,QACAA,MAAA,eAAWA,MAAA,GACbA,UACAA,MAAA,eAAsGA,MAAA,0BAAS+pC,EAAA6xE,gBAAgB,GAC7H57G,MAAA,eAAUA,MAAA,UAEdA,YACAA,MAAA,mCAfkBA,cAAA,YAAA+pC,EAAA7xB,OACFlY,QAAqCA,MAArC,kBAAA+pC,EAAAlpC,OAAAxE,UAAqC2D,CAAD,WAAA+pC,EAAAkT,SAAAnlB,UACzB93B,MAAA,GAAAA,YAAA,0CACrBA,MAAA,GAAAA,MAAA+pC,EAAA77B,SAMSlO,MAAA,GAAAA,MAAA+pC,EAAAkT,SAAAjnC,OAE8DhW,cAAA,WAAA+pC,EAAAkP,KAAAxwB,0BCmBvEs0B,MAAkB9wC,YAClBiyC,MAAWhyC,kBACXiyC,MAAmBjyC,YACnBm4H,MAAel4H,MAAAC,MACf86G,MACAn8E,MAAe1+B,MACf69B,MAAa59B,MACb8vC,GACApR,IAAez+B,KACf49B,MAAcyB,OAAA,8EAITo3F,IAA6BsB,EAAAjmF,OAAA,CADzCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,qBAkCxBu2E,MACO96E,SAlCjBgpF,ICvCP,MAAOuB,WAA2BnnF,KAGtCjiD,cAAgBC,MAAM,CAAEi2B,iBAAgBA,OAFxC/1B,KAAAqU,KAAO0hB,KAAiBmzG,aAEqB,CAE7CrpH,QAAS1C,aACP,MAAM6kC,EAAgB,IAAK7kC,GAC3B6kC,SAAcmnF,mBAAqB,KACnCnnF,EAAconF,gBAAiB,EACxBpnF,CACT,EAGFF,KAAet/C,IAAIymI,ICQZ,IAAMI,GAAN,MAAMA,GAYXC,GAOAC,GAGAC,GAMAC,GAKA5pI,cA/BAG,KAAAqD,OAAMtD,MAAS,CAACspI,4BAENrpI,KAAA0c,cAAaJ,OAAOK,MAEpB3c,KAAA4c,MAAQ5c,KAAK0c,WAAWE,MAExB5c,KAAAmd,SAAWnd,KAAK0c,WAAWS,SAC3Bnd,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAGnC3hD,MAAAspI,EAAoBtpI,KAAK0c,WAAWO,WAAW,oBAO/Cjd,MAAAupI,KAAgBhiI,OAAO,IAGvBvH,MAAAwpI,KAAahiI,KAAUuV,MAEpB2sH,aAAa,CAAC3nI,EAAG4Y,IAA2B,iBAAVA,EAAqBA,EAAM/G,QAAQ,IAAK,KAAKA,QAAQ,KAAM,KAAO+G,GACpGqC,WAAW,UAAWhd,MAAKspI,GAG9BtpI,MAAAypI,KAAsB/0H,OAAS,KAC7B,MAAM40D,EAAWtpE,MAAKwpI,EAAWhlI,SACjC,OAAOqP,IAAW81H,sBAAsBrgE,EAAUtpE,KAAKmd,WAAWisH,cAAc,EAAI,GAIpFH,GAAmBzmF,YAAQ,EAG3B3+B,OAAO,KACK7jB,KAAK0c,WAAWykC,UAC1BnhD,KAAK4pI,OAAM,EAAK,IACjB,EAGD/lH,OAAO,IAAM7jB,MAAK6pI,EAAwB7pI,MAAKypI,KACjD,CAGAI,GAAwBC,GACtB,MAAMniI,EAAI3H,KAAKqD,IAAIib,GAAG,oBAAqB,CAAEgrD,SAAUwgE,IAEjD9pG,EAAI,CACRmhB,QAASnhD,KAAK0c,WAAWykC,UACzB4oF,aAAc/pI,MAAKupI,IACnBS,aAAchqI,KAAKmd,WAAWisH,aAC9Ba,QAASH,GAIX,OAAI9pG,EAAEmhB,SAAYnhB,EAAEmhB,UAAYnhB,EAAE+pG,aACzBpiI,EAAE8R,IAAI,wDAAyDumB,GAEnEA,EAAEiqG,QAGHjqG,EAAEmhB,UAAYnhB,EAAEiqG,QACXtiI,EAAE8R,IAAI,aAAcumB,IAE7BhgC,MAAKupI,EAAclgI,IAAI22B,EAAEiqG,SACzBjqI,KAAK0c,WAAWihC,KAAK+E,aAAa1iB,EAAEiqG,cACpCtiI,EAAE8R,IAAI,eAAeumB,EAAEiqG,WAAYjqG,IAP1Br4B,EAAE8R,IAAI,mBAAoBumB,EAQrC,CAEA4pG,MAAMM,GACMlqI,KAAKqD,IAAIib,GAAG,QAAS,CAAE4rH,YAAjC,MACMvvH,EAAQ3a,KAAK0c,WAAWykC,UACxB8oF,EAAUp2H,IAAW81H,sBAAsBhvH,EAAO3a,KAAKmd,WAAWisH,aAAcc,GACtFlqI,KAAK0c,WAAWihC,KAAK+E,aAAaunF,EACpC,iDA7EWZ,GAAsB,oCAAtBA,GAAsBl7F,UAAA,sBAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,4JAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICzBjC9pC,MADF,qBACEA,CAD4E,aAG1EA,MAAA,yBAAQ+pC,EAAAm7F,OAAM,EAAK,GAFrBllI,QAKAA,MAAA,eAAWA,MAAA,GACbA,UACAA,MAAA,kCARgBA,MAAA,YAAA+pC,EAAA7xB,OAEZlY,QAGAA,MAHA,kBAAA+pC,EAAA/xB,WAAArI,KAGA3P,CAHmC,cAAA+pC,EAAAkT,SAAApnC,YAGnC7V,CADoC,WAAA+pC,EAAAkT,SAAAnlB,UAE3B93B,MAAA,GAAAA,MAAA+pC,EAAAkT,SAAAjnC,uBDYL+mC,MAAkB98C,YAClBi+C,MAAWjyC,wBACXkyC,MAAmBlyC,YACnB4pF,MAAc3pF,MACdkwC,IAAwBhS,cAAA,MAInBu6F,IAAsBc,EAAApnF,OAAA,CADlCjE,GAAc,IAAKppB,MAA0B,EAACstB,GAAAC,IAAA,yBAClComF,mBEvBP,MAAOe,GAuBXvqI,YAAYstB,GArBZntB,KAAAkjI,cAAgB,GAChBljI,KAAA2iG,WAAa,GACb3iG,KAAA+jI,mBAAoB,EACpB/jI,KAAAkkI,YAAc,EACdlkI,KAAAokI,qBAAuB,GAIvBpkI,KAAAk3H,eAAgB,EAChBl3H,KAAAujI,gBAAiB,EAIjBvjI,KAAAmjI,UAAW,EACXnjI,KAAAikI,cAAe,EACfjkI,KAAAi3H,UAAY,GACZj3H,KAAAqqI,WAAY,EACZrqI,KAAAmtB,UAAW,EACXntB,KAAAsqI,iBAAkB,EAIhBtqI,KAAKmtB,SAAWA,CAClB,CAEA,qBAAOo9G,CAAehlI,EAA6BilI,EAA6BC,GAE9E,MAAMC,EAAgBF,EAAY5gH,eAAe4M,WACjDi0G,EAAYA,GAAa,IAAIL,GAAmBM,GAChD,MAAMC,EAAY,IAAIP,GAAmBM,GAEzC,UAAWrpI,KAAOd,OAAOkF,KAAKklI,GAC3BA,EAAkBtpI,GAAQkE,EAAelE,IAASopI,EAAkBppI,GAoBvE,GAjBuBopI,EAAUvT,gBAAkByT,EAAUzT,gBAE3DyT,EAAU1T,UAAY,IAEpB0T,EAAUzT,gBACWyT,EAAUzH,cAAch2H,SAAS,QAEtDy9H,EAAUzH,cAAgByH,EAAUzH,cAActvH,QAAQ,MAAO,MAC1C+2H,EAAUzH,cAAc12H,WAAW,OAE1Dm+H,EAAUzH,cAAgByH,EAAUzH,cAActvH,QAAQ,IAAK,MAChD+2H,EAAU1T,UAAUzqH,WAAWm+H,EAAUzH,iBAExDyH,EAAU1T,UAAY0T,EAAUzH,eAClCyH,EAAUL,iBAAkB,IAGzBK,EAAUzT,cAGb,IAFqByT,EAAU1T,UAAY0T,EAAU1T,UAAUxqH,MAAM,KAAKzC,OAAS,IAClD2gI,EAAUzG,YAC7B,CACZ,IAAI0G,EAAUD,EAAU1T,UAAUxqH,MAAM,KACxCm+H,EAAUA,EAAQjyE,MAAM,EAAGgyE,EAAUzG,aACrCyG,EAAU1T,UAAY2T,EAAQ1pH,KAAK,KACnCypH,EAAUL,iBAAkB,CAC9B,MACEK,EAAUL,iBAAkB,EAGhC,OAAOK,CACT,gSCrDcjmI,MAAA,cAAUA,MAAA,YAAMA,+BAEhBA,MAAA,yDATRA,MAAA,WAAsCA,MAAA,iBAAAs7C,GAAAt7C,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAmuF,gBAAA7qF,GAAuB,GAElEt7C,MADF,UACEA,CADuE,cAC7DA,MAAA,kBAAYA,QACtBA,MAAA,WACEA,MAAA,wBAIEA,MAFF,EAAAomI,GAAA,eAEEpmI,CAFgC,EAAAqmI,GAAA,kBAOxCrmI,YAGAA,MAAA,aAOEA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAsuF,wBAAuB,GAG9BtmI,MADF,WACEA,CADuE,kBAUrEA,MAAA,eACFA,QAGAA,MAAA,YACEA,MAAA,0BASNA,iDA7CMA,MAAA,GAAAA,MAAA,IAAAA,MAAA,8DAEAA,MAAA,GAAAA,MAAAg4C,EAAAonF,aAAA5M,cAAA,KAaJxyH,MAAA,GACAA,MADA,SAAAg4C,EAAAn3C,OACAb,CADiB,yBASbA,MAAA,GAAAA,MAAA,iBAAAg4C,EAAAuuF,oCAYAvmI,MAAA,GAAAA,MAAA,IAAAg4C,EAAAuuF,mCAAAC,EAAAt2F,UAAA0M,SAAA,6EAAA58C,MAAA,6JAaNA,MAAA,YAAwBA,MAAA,mBAAAA,MAAAslD,GAAA,MAAAtN,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAy6E,YAAW,GAC1CzyH,MAAA,WACEA,MAAA,iBACAA,MAAA,YAA8BA,MAAA,wBAChCA,UACAA,MAAA,YACFA,cAHkCA,MAAA,GAAAA,YAAA,6FAOlCA,MAAA,YAAwBA,MAAA,mBAAAA,MAAAmsH,GAAA,MAAAn0E,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAyuF,OAAM,GACrCzmI,MAAA,WACEA,MAAA,iBACAA,MAAA,YAA8BA,MAAA,wBAChCA,UAEEA,MADF,WACEA,CADuD,iBACdA,MAAA,gBAE7CA,kBALkCA,MAAA,GAAAA,YAAA,8FAiB1BA,MAAA,iBACEA,MAAA,mBAAAA,MAAA88H,GAAA,MAAA4J,EAAA1mI,MAAA,GAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA2uF,IAAAD,GAAS,GAKjB1mI,MAAA,WAAKA,QAGRA,MAAA,iBACEA,MAAA,mBAAAA,MAAA88H,GAAA,MAAA4J,EAAA1mI,MAAA,GAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA86E,OAAA4T,GAAY,GAKpB1mI,MAAA,UAAIA,iCAVLA,MAAA,UAAAA,MAAA,EAAAisC,GAAA+L,EAAAvvB,aASAzoB,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAAisC,GAAA+L,EAAAvvB,uDASJzoB,MAAA,iBAKEA,MAAA,mBAAAA,MAAAoqH,GAAA,MAAAsc,EAAA1mI,MAAA,GAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA4uF,iBAAAF,IAAAG,qBAAAH,EAAAI,aAAmE,GAC3E9mI,MAAA,iBAAWA,2CAFZA,MAAA,WAAA0mI,EAAAG,qBAAA,KAAAH,EAAAI,YAAA,IADA9mI,MAAA,UAAAA,MAAA,EAAAksC,GAAAw6F,EAAAI,YAAA,8CAjCN9mI,MAAA,YAAwBA,MAAA,mBAAAA,MAAA+kH,GAAA,MAAA2hB,EAAA1mI,QAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA+uF,aAAAL,GAAkB,GACjD1mI,MAAA,YACEA,MAAA,iBACAA,MAAA,YAAyBA,MAAA,GAC3BA,UACAA,MAAA,SACEA,MAAA,EAAAgnI,GAAA,KAoBEhnI,MADF,WACEA,CAD+B,YACiBA,MAAA,GAEpDA,YACAA,MAAA,GAAAinI,GAAA,mBAUFjnI,qDApC6BA,MAAA,GAAAA,MAAA0mI,EAAA98H,MAEtB5J,cAAA,wBAAA0mI,EAAA58H,KAAA,IACH9J,cAAAg4C,EAAAonF,aAAAuG,UAAA,MAoB8B3lI,MAAA,GAAAA,MAAA,QAAA0mI,EAAA98H,MAAoB5J,cAAA0mI,EAAA98H,MAGpD5J,cAAA0mI,EAAAG,qBAAA,kCAwBI7mI,MADF,WACEA,CADiF,cACvEA,MAAA,GAAgBA,QAC1BA,MAAA,YAA8BA,MAAA,GAChCA,2CAFYA,MAAA,GAAAA,MAAA0mI,EAAAQ,OACoBlnI,MAAA,GAAAA,MAAA0mI,EAAA98H,iCAGhC5J,MAAA,YACEA,MAAA,YACFA,yCAD0BA,QAAkCA,MAAlC,MAAA0mI,EAAAtgI,GAAA,IAAAsgI,EAAA98H,KAAkC5J,CAAD,MAAA0mI,EAAA3K,aAAA/7H,iDAKzDA,MAAA,iBACEA,MAAA,mBAAAA,MAAAmnI,GAAA,MAAAT,EAAA1mI,MAAA,GAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA2uF,IAAAD,GAAS,GAKjB1mI,MAAA,WAAKA,QAGRA,MAAA,iBACEA,MAAA,mBAAAA,MAAAmnI,GAAA,MAAAT,EAAA1mI,MAAA,GAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA86E,OAAA4T,GAAY,GAKpB1mI,MAAA,UAAIA,iCAVLA,MAAA,UAAAA,MAAA,EAAAisC,GAAA+L,EAAAvvB,aASAzoB,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAAisC,GAAA+L,EAAAvvB,uDAcFzoB,MAAA,iBAYEA,MAAA,mBAAAA,MAAAonI,GAAA,MAAAV,EAAA1mI,MAAA,GAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA4uF,iBAAAF,IAAArL,+BAAAqL,EAAApL,uBAAuF,GAEhGt7H,MAAA,0BAAmBA,2CAPnBA,MAJA,UAAAA,MAAA,EAAAosC,IAAAs6F,EAAArL,+BAAAqL,EAAApL,sBAAA,GAIAt7H,CADE,iBAAA0mI,EAAArL,+BAAA,qJAaNr7H,MAAA,iBAKEA,MAAA,mBAAAA,MAAAqnI,GAAA,MAAAX,EAAA1mI,MAAA,GAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA4uF,iBAAAF,IAAAG,qBAAAH,EAAAI,aAAmE,GAC3E9mI,MAAA,iBAAWA,2CAFZA,MAAA,WAAA0mI,EAAAG,qBAAA,KAAAH,EAAAI,YAAA,IADA9mI,MAAA,UAAAA,MAAA,EAAAksC,GAAAw6F,EAAAI,YAAA,8CAtEN9mI,MAAA,YAEEA,MAAA,mBAAAA,MAAAsnI,GAAA,MAAAZ,EAAA1mI,QAAA81C,UAAAkC,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA8oB,OAAA4lE,GAAY,GAWnB1mI,MALF,EAAAunI,GAAA,aAKEvnI,CAL2B,EAAAwnI,GAAA,cAU7BxnI,MAAA,SACEA,MAAA,EAAAynI,GAAA,KAoBEznI,MADF,WACEA,CAD+B,YACiBA,MAAA,GAClDA,UAEEA,MADF,WACEA,CADoH,UAC9GA,MAAA,IACRA,UAEEA,MADF,UACEA,CADoF,kBACnBA,MAAA,kBACnEA,UACAA,MAAA,GAAA0nI,GAAA,mBAkBF1nI,QACAA,MAAA,GAAA2nI,GAAA,mBAUA3nI,MAAA,qBAUIA,MATF,YASEA,CADD,YACQA,MAAA,YAAKA,QACZA,MAAA,WACAA,MAAA,WACEA,MAAA,cAYRA,2DAlGEA,MAAA,UAAAA,MAAA,GAAAmsC,GAAA6L,EAAA/hC,UAAA,QAAAywH,EAAAtgI,IAAA4xC,EAAAonF,aAAAG,eAKAv/H,cAAA,UAAA0mI,EAAA58H,KAAA,KAUK9J,MAAA,GAAAA,MAAA,wBAAA0mI,EAAA58H,KAAA,IACH9J,cAAAg4C,EAAAonF,aAAAuG,UAAA,MAoB8B3lI,MAAA,GAAAA,MAAA,QAAA0mI,EAAA98H,MAAoB5J,cAAA0mI,EAAA98H,MAEgB5J,cAAA,YAAA0mI,EAAAtgI,GAAA,MAAAsgI,EAAAkB,aAAA,OAC1D5nI,MAAA,GAAAA,MAAA,IAAA0mI,EAAAtgI,GAAA,MAAAsgI,EAAAkB,aAAA,OAEoC5nI,cAAA,OAAA0mI,EAAAvoI,IAAA6B,OAG5CA,MAAA,GAAAA,MAAA,UAAA0mI,EAAA58H,KAAA,OAmBF9J,cAAA0mI,EAAAG,qBAAA,iCAnEJ7mI,MA3CA,EAAA6nI,GAAA,cA2CA7nI,CA3CqB,EAAA8nI,GAAA,yCAArB9nI,MAAA0mI,EAAA1oI,SAAA,MA2CAgC,cAAA0mI,EAAA1oI,UAAA,gCA9HJgC,MAAA,WAsEEA,MAhEA,EAAA+nI,GAAA,MAgEA/nI,CAhEwC,EAAAgoI,GAAA,YAgExChoI,CAVyE,EAAAioI,GAAA,aAqBzEjoI,MAAA,EAAAkoI,GAAA,cAAA7mF,IAsJFrhD,8BAtOEA,MAAA,UAAAA,MAAA,EAAAmpC,GAAA6O,EAAAonF,aAAA5M,eAAAx6E,EAAAonF,aAAA5M,gBAKAxyH,eAAAg4C,EAAAvvB,YAAAuvB,EAAAmwF,kBAAA,MAsDAnoI,cAAAg4C,EAAAonF,aAAAwG,iBAAA5tF,EAAAvvB,aAAAuvB,EAAAmwF,mBAAA,KAUAnoI,cAAA,KAAAg4C,EAAAonF,aAAA7M,WAAAv6E,EAAAonF,aAAA5M,eAAAx6E,EAAAonF,aAAA7M,YAAAv6E,EAAAonF,aAAAZ,cAAA,MAWAx+H,cAAAg4C,EAAAx6C,UCjDN,MAAMY,GAAW,CACfC,KAAK,EACLlD,aAAa,EACbyrI,kBAAkB,EAClB3gD,WAAW,EACXvvE,YAAY,EACZ0xH,qBAAqB,GAiChB,IAAMC,GAAoB,MAA3B,MAAOA,EAOX5wH,GACAgM,GAEAmxG,GACAtiH,GAEAnX,YACUmtI,EACA7lI,EACAC,EACAk3C,EACAf,EACAC,EACAwf,GANAh9D,KAAAgtI,aACAhtI,KAAAmH,mBACAnH,KAAAoH,mBACApH,KAAAs+C,oBACAt+C,KAAAu9C,YACAv9C,KAAAw9C,mBACAx9C,KAAAg9D,oBAlBVh9D,KAAAitI,cAAaC,SAEbltI,KAAAqD,OAAMtD,MAAS,CAAEgtI,wBAAwBjqI,IAE/B9C,KAAA0c,cAAaJ,OAAOK,MAC9B3c,MAAAmc,KAAsBG,OAAOxF,IAC7B9W,MAAAmoB,KAAY7L,OAAO8L,KAEnBpoB,MAAAs5H,KAAe9xH,KAAUuvH,IACzB/2H,MAAAgX,KAAgBxP,KAAU4P,MAuBhBpX,KAAAuF,OAASvF,KAAK0c,WAAWnX,OACzBvF,KAAA4c,MAAQ5c,KAAK0c,WAAWE,MAClC5c,MAAAmtI,EAAMntI,KAAK0c,WAAWihC,GAEZ39C,KAAAmtB,YAAWzR,OAAY,WAAY,IAAM1b,MAAKmtI,IAAMhgH,UAEpDntB,KAAA2a,SAAQe,OAAY,QAAS,IAAM1b,KAAK0c,WAAWykC,WAEtDnhD,KAAA8jI,cAAatoH,OAAsB,aAAc,MACjDxb,KAAAkC,SAAQsZ,OAAsB,QAAS,IAG9Cxb,MAAAotI,GAAc,EAEdptI,KAAA6sI,mBAAkBnxH,OAAY,kBAAmB,KAC/C,MAAM2xH,EAAMrtI,KAAK8jI,aACjB,OAAOuJ,EAAIhD,cAAkC,KAAlBgD,EAAIpW,WAAoBoW,EAAInW,eAAiBmW,EAAIpW,YAAcoW,EAAInK,iBAAmBmK,EAAItJ,qBAG7G/jI,KAAAirI,iCAAmCjrI,MAAKmoB,EAAU4yB,UAAU9sB,KAAaytG,yBA/BvE17H,KAAKqD,IAAIC,KAAK,gBAExBugB,SAAO,KAEa,MADC7jB,KAAK8jI,cAExB9jI,KAAKob,YAAU,GAGjB,MAAMiyH,EAAMrtI,KAAKuF,OACjBvF,MAAKstI,EAAOttI,KAAKgtI,WAAWO,MAAM/pI,KAAKE,OAAO,iBAAiB2pI,EAAI9yG,qBAAqB8yG,EAAI3sI,cAAc2sI,EAAItsI,YAChH,CAIAosI,GASAG,GACAF,GASAl+F,WAEElvC,MAAKgX,EAAcw2H,iBAAiB,IAAMxtI,KAAKob,cAG9Cpb,KAAKuF,OAAOq1H,KAAuB6S,WAAWztI,KACjD,CAEAm3H,YACE,GAAIn3H,MAAKmtI,IAAMhgH,SAAU,OAEzB,MAAMugH,EAAa56H,OAAO66H,OAAO,8BAC5BD,GAEL1tI,MAAKs5H,EAAanC,UAAUuW,EAAY1tI,MAAKstI,EAAMttI,KAAK8jI,cACrDx7H,UAAU,IAAMtI,KAAKob,aAC1B,CAEAiwH,IAAInrI,GACEF,MAAKmtI,IAAMhgH,WAEJra,OAAO6M,QAAQ,+CAG1B3f,MAAKs5H,EAAaj6G,WAAWnf,EAAMF,MAAKstI,EAAMttI,KAAK8jI,cAChDx7H,UAAU,IAAMtI,KAAKob,aAC1B,CAEAkwH,iBAAiB7N,EAAoBmQ,EAAyBC,GAC5D,MAAMlmI,EAAI3H,KAAKqD,IAAIC,KAAK,mBAAoB,CAACm6H,WAAUmQ,kBAAiBC,eACxE,GAAI7tI,KAAKs+C,kBAAkB33B,WAAWU,aAAeumH,EACnD,OAAOjmI,EAAE8R,IAAI,+BAEf,MAAM1R,EAAiB,CACrB7F,MAAO,CACL2rI,EAAa,EACThvH,KAASE,OAAO8uH,GAChBhvH,KAASohH,YAAYxC,EAAS96H,YAAairI,EAAiB1N,MAAatlG,SAASulG,aAG1FngI,MAAKmc,EAAoB1L,KAAKzQ,KAAKuF,OAAOyC,MAAOhI,KAAKuF,OAAO7E,WAAYqH,EAC3E,CAEAojI,OACE,IAAIlU,EAAYj3H,KAAK8jI,aAAa7M,UAClCA,EAAYA,EAAU/pH,SAAS,KAAO+pH,EAAUt+D,MAAM,EAAGs+D,EAAUuJ,YAAY,MAAQ,GACvFxgI,KAAK2qF,UAAU,CAAEssC,aACnB,CAEA6W,GAAkC5tI,GAGhC,OADiBF,KAAK0c,WAAWS,WACjBkkH,0BAA0C,UAAdnhI,EAAKsO,KAC7C0xH,MAAax5B,aAAaqnC,eAC1B,IACN,CAEAC,GAAwB9tI,GACtB,IAAI+tI,EAGJ,MAAkB,WAAd/tI,EAAKsO,MACPy/H,EAAQjuI,KAAK8jI,aAAaM,qBAAqBtnG,MAAM,0BACjDmxG,EACKA,EAAM,GAEN,OAWXA,EAAQjuI,KAAK8jI,aAAaM,qBAAqBtnG,MAAM,sBACjDmxG,EAAgBA,EAAM,GAGnB,KACT,CAEAxC,aAAavrI,GACX,IAAI+2H,EAAYj3H,KAAK8jI,aAAa7M,UAClCA,EAAYA,EAAY,GAAGA,KAAa/2H,EAAKoO,OAASpO,EAAKoO,KAC3DtO,KAAK2qF,UAAU,CAAEssC,aACnB,CAEA4T,gBAAgBnvF,GACd17C,KAAKitI,WAAW3+E,MAClB,CAEAkpE,OAAOt3H,GACL,GAAIF,MAAKmtI,IAAMhgH,SAAU,OAEzB,MAAMsqG,EAAU3kH,OAAO66H,OAAO,gCAAiCztI,EAAKoO,MAC/DmpH,GAELz3H,MAAKs5H,EAAa9B,OAAOt3H,EAAMu3H,EAASz3H,MAAKstI,EAAMttI,KAAK8jI,cACrDx7H,UAAU,IAAMtI,KAAKob,aAC1B,CAEAoqD,OAAOtlE,GACDF,MAAKmtI,IAAMhgH,WAAantB,KAAK8jI,aAAaG,cAC9CjkI,KAAKuF,OAAOq1H,KAAKwI,YAAYljI,EAC/B,CAMOkb,aACL,MAAM0oH,EAAa9jI,KAAK8jI,aAExB,GADU9jI,KAAKqD,IAAIC,KAAK,aAAc,CAAEwgI,aAAYoK,WAAYluI,MAAKotI,EAAalW,cAAe4M,GAAY5M,gBAC3F,MAAd4M,GACCA,EAAWX,SAEhB,IAAInjI,MAAKotI,EAAa,CACpBptI,MAAKotI,GAAc,EACnB,MAAM3wG,EAAYz8B,KAAKmH,iBAAiBrG,gBAAgBd,KAAKuF,OAAO7E,WAAYV,KAAKuF,OAAOxE,WAC5F,GAAI07B,EAAW,CACb,MAAM0xG,EAAc1xG,EAAUh8B,IAAIg9H,QAAkBA,KAEpD,YADA50F,WAAW,IAAM7oC,MAAKouI,EAAqBD,EAAarK,GAE1D,CACF,CAEA9jI,MAAKs5H,EAAarsH,OAAOjN,MAAKstI,EAAMxJ,GACjCx7H,UAAUpG,GAASlC,MAAKouI,EAAqBlsI,EAAO4hI,GAAW,CACpE,CAEAkH,wBACOhrI,KAAKirI,qCAAgC,EACxCrP,MAAkB57H,KAAKu9C,UAAWtvB,KAAaytG,wBAAyB17H,KAAKw9C,iBAAkBx9C,KAAKg9D,kBACxG,CAEAoxE,GAAqBlsI,EAAmB4hI,GAC5B9jI,KAAKqD,IAAIC,KAAK,sBAAuB,CAAEpB,QAAO4hI,aAAY5M,cAAe4M,EAAW5M,gBAC9Fl3H,KAAKoH,iBAAiBhF,QAAQF,GAE9B,MAAMknH,EAA4B,GAC5BilB,EA+DV,SAASC,GAAoB3rC,GAC3B,OAAKA,EAEcA,EAAWl2F,MAAM,KAAKhM,IAAI8tI,KAC3CA,EAAYA,EAAUjtI,QAERkL,WAAW,MACvB+hI,EAAYA,EAAU36H,QAAQ,KAAM,IAC7B26H,EAAU/hI,WAAW,OAC5B+hI,EAAYA,EAAU36H,QAAQ,IAAK,KAE9B26H,EAAUhtI,sBAVK,EAc1B,CA9E6B+sI,CAAoBxK,EAAWnhC,YAExD,UAAWziG,KAAQgC,EACjB,GAAkB,MAAdhC,EAAKoO,MAMT,GAAkB,SAAdpO,EAAKoO,MAAiC,SAAdpO,EAAKoO,OAE5BpO,EAAKwC,WAAYohI,EAAWP,gBAAgC,UAAdrjI,EAAKsO,SAEpDtO,EAAKwC,WAAYohI,EAAWwG,iBAEhC,IAAI+D,EAAiBrkI,OAAS,EAAG,CAC/B,MAAMukI,EAAYruI,EAAKoO,KAAKud,UAAU3rB,EAAKoO,KAAKkyH,YAAY,KAAO,GAAGj/H,oBACtE,IAAK8sI,EAAiBnhI,SAASqhI,GAAY,QAC7C,CAEAruI,EAAK6/H,+BAAiC//H,MAAK8tI,EAAkC5tI,GAC7EA,EAAK8/H,sBAAwB9/H,EAAKmP,UAAU3G,KAAKm3B,GAAKA,EAAErxB,KAAKF,OAASpO,EAAK6/H,iCAAiCj1H,IAAM,EAClH5K,EAAKqrI,qBAAuBvrI,MAAKguI,EAAwB9tI,GACzDA,EAAKsrI,YAActrI,EAAKmP,UAAU3G,KAAKm3B,GAAKA,EAAErxB,KAAKF,OAASpO,EAAKqrI,uBAAuBzgI,IAAM,EAC9F5K,EAAK0rI,MAAQhL,KAAgBC,aAAa3gI,EAAKoO,MAC/CpO,EAAKsuI,gBAAkB5N,KAAgBnM,YAAYv0H,EAAKoO,MACxDpO,EAAKosI,cAAgBpsI,EAAKuuI,KAAO,MAAMC,QAAQ,GAC/CtlB,EAAc18G,KAAKxM,EAAI,MAxBvB,CACE,MAAMmqI,EAAYnqI,EAAKyuI,UACnBtE,IAAcvG,EAAWuG,WAC3BrqI,KAAK2qF,UAAU,CAAE0/C,aAErB,CAsBFjhB,EAAcz8G,KAAK,CAACzE,EAAG0E,IAAM1E,EAAEoG,KAAK/M,oBAAoBsL,cAAcD,EAAE0B,KAAK/M,sBAC7E6nH,EAAcz8G,KAAK,CAACzE,EAAG0E,IAAMA,EAAElK,SAASiW,WAAW9L,cAAc3E,EAAExF,SAASiW,aAC5E3Y,KAAKkC,MAAMmH,IAAI+/G,EACjB,CAEOz+B,UAAUplF,GACf,MAAMoC,EAAI3H,KAAKqD,IAAIC,KAAK,YAAaiC,GAC/BolI,EAAYP,GAAmBG,eAAehlI,EAAQvF,KAAKuF,OAAQvF,KAAK8jI,eAG9E,EAAI93G,MAAQ2+G,EAAW3qI,KAAK8jI,cAC1Bn8H,EAAE8R,IAAI,cAIRzZ,KAAK8jI,WAAWz6H,IAAIshI,GCvTlB,SAAUiE,GAAYjE,EAA+BH,GACzD,MAAMqE,EAAcrE,EAAY7P,SAASx1D,YACnC2pE,EAA0C,GAC1CC,EAAcl7H,IAAWm7H,aAAaH,EAAY9kI,KAKxD,IAJoBglI,EAAY9X,WAAa,MAER0T,EAAU1T,WADvB8X,EAAY7X,gBAC4CyT,EAAUzT,cAAcv+G,WAEtF,CAChB,IAAIs2H,EAASJ,EAAY9kI,IACzBklI,EAASp7H,IAAWq7H,gBAAgBD,EAAQ,YAAatE,EAAU1T,WACnEgY,EAASp7H,IAAWq7H,gBAAgBD,EAAQ,gBAAiBtE,EAAUzT,cAAcv+G,YACrFm2H,EAAY/kI,IAAMklI,CACpB,CAEA,MAAME,GAAkBxE,EAAUN,YAEL,KAAxBM,EAAU1T,WAAoB0T,EAAUzT,eAAiByT,EAAU1T,YAAc0T,EAAUzH,iBACxFyH,EAAU5G,kBAGE8K,EAAY1hH,WAAagiH,IAE3CL,EAAY3hH,SAAWgiH,GAErB5uI,OAAOkF,KAAKqpI,GAAa9kI,OAAS,GACpCwgI,EAAY7P,SAAShwC,UAAUmkD,EACnC,CD6RIF,CAAYjE,EAAW3qI,KAAKuF,QAC5BoC,EAAE8R,MACJ,CAGOi8B,OAAOwhF,EAAwBqM,GACpC,MAAMoH,EAAwB,IAAK3qI,KAAK8jI,aAAmB5M,gBAAeqM,mBAE1E,EAAIv3G,MAAQ2+G,EAAW3qI,KAAK8jI,cAC1B6G,EAAUxH,UAAYwH,EAAUxH,SACxBwH,EAAUxH,WAClBwH,EAAUxH,UAAW,GAEvBnjI,KAAK2qF,UAAUggD,EACjB,iDAlQWoC,GAAoBroI,MAAAC,OAAAD,MAAAiM,IAAAjM,MAAAkM,IAAAlM,MAAAmM,IAAAnM,MAAAoM,OAAApM,0BAAA,oCAApBqoI,EAAoB5+F,UAAA,mBAAA2hB,QAAA,CAAAm9E,WAAA,cAAA7+F,MAAA,EAAAC,KAAA,EAAAC,OAAA,85GAAAC,SAAA,SAAAC,EAAAC,MAAA,EAAAD,IDzEjC9pC,MAAA,WACEA,MAAA,EAAA0qI,GAAA,aA0OF1qI,sBA3OsBA,MAAA,0BAAA++H,EAAAh1F,EAAAq1F,eAAAL,EAAAN,SAAA,iBACpBz+H,cAAA,OAAAi6C,EAAAlQ,EAAAq1F,eAAAnlF,EAAAwkF,UAAA10F,EAAA/xB,WAAAi1G,SAAA,sBC+DMz1E,MACAtN,MAAa79B,MACbotH,GACAkR,KAAcr+H,KACd0+B,IAAez+B,KACf+qG,KACAntE,MAAcyB,OAAA,klVAAAplC,KAAA,CAAAs4D,UAtBN,IACRpD,OAAQ,kBAAmB,IACvBzmD,OAAM,YAAU6mD,OAAM,CAClBgnB,OAAQ,IACR8nD,SAAU,aACZ,EACF31H,OAAM,UAAQ6mD,OAAM,CAChBgnB,OAAQ,IACR8nD,SAAU,aACZ,EACFjvE,OAAW,iBAAkB,IACzBC,OAAQ,+CAGnB,SAWQysE,CAAoB,4BEzD3BroI,MAAA,YACAA,MAAA,UAAMA,MAAA,wBAAgEA,QACtEA,MAAA,YACAA,MAAA,SAA6DA,MAAA,cAAQA,eAF/DA,MAAA,GAAAA,YAAA,sDCGL,IAAM6qI,GAAiB,MAAxB,MAAOA,EAZb1vI,cAaSG,KAAAwhB,YAAWlF,OAAO8L,KACfpoB,KAAAwvI,gBAAkBxvI,KAAKwhB,SAASu5B,UAAU9sB,KAAawhH,oEAFtDF,EAAiB,oCAAjBA,EAAiBphG,UAAA,gBAAAC,MAAA,GAAAC,KAAA,EAAAC,OAAA,6WAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDpB9B9pC,MAAA,iBAGEA,MADF,UACEA,CADoE,WACxCA,MAAA,wBAAyDA,QAEnFA,MADF,UACEA,CAD6B,SAQ3BA,MAAA,gBACAA,MAAA,UAAMA,MAAA,yBACRA,UACAA,MAAA,GAAAgrI,GAAA,KAOJhrI,iBAnB8BA,MAAA,GAAAA,YAAA,8CAUlBA,MAAA,GAAAA,YAAA,+CAERA,MAAA,GAAAA,MAAA+pC,EAAA+gG,mBAAA,sBCDIh/F,GAAgB7rC,GAChBiqC,MAAaj+B,MACb++B,IAAe9+B,KACfi+B,MAAcyB,OAAA,6ZAGTi/F,CAAiB,4OCFvB,IAAMI,GAAoB,MAA3B,MAAOA,EAOX9vI,cAHUG,KAAA0c,cAAaJ,OAAOK,MACpB3c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OAKnCvF,KAAA4vI,aAAe5vI,KAAKuF,OAAOq1H,KAAKv/E,UAHhB,CAMhBnM,WACElvC,KAAK6vI,eAAiB7vI,KAAKuF,OAAOqkB,eAAerb,YAAcwnB,KAAiByF,gBAClF,CAEAyxG,aACEjtI,KAAK8vI,sBAAsB57F,cAAc67F,OAC3C,iDAnBWJ,EAAoB,oCAApBA,EAAoBxhG,UAAA,uBAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,eACoBkQ,sdClBnDh6C,MADF,UACEA,CAD4G,WAE1GA,MAAA,UACFA,QACAA,MAAA,oBACEA,MAAA,wBAAAA,aAAA6yC,GAAA7yC,MAAc+pC,EAAAw+F,aAAY,GAO5BvoI,QACAA,MAAA,WAEEA,MADA,UACAA,CADqC,cAEvCA,QACAA,MAAA,iBACFA,cAlBKA,MAAA,UAAAA,MAAA,EAAAksC,GAAAnC,EAAA/xB,WAAAi1G,SAAAljF,EAAAohG,iBAODnrI,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAmsC,IAAApC,EAAAohG,eAAAphG,EAAAmhG,iBAMGlrI,cAAA+pC,EAAAlpC,OAAAy1B,uBAA2Ct2B,MAAA,UAAAA,MAAA,GAAAosC,GAAArC,EAAAmhG,iBAIjBlrI,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAosC,GAAArC,EAAAmhG,iCDJzB7C,GACA7wF,MACAqzF,IAAiBj/F,OAAA,otEAGZq/F,CAAoB,oBEZjC,MAAMK,GAAkB,IAAI/+F,MAAe,mBACrCg/F,GAAiB,CACnB,QACA,UACA,UACA,WACA,WACA,aACA,OACA,YACA,UACA,YACA,WACA,YACA,YACA,YACA,aACA,cACA,iBACA,kBACA,mBACA,gBACA,kBACA,kBACA,mBACA,mBACA,qBACA,QACA,gBACA,uBAEJ,MAAMC,GACFrwI,YAAY0F,EAAS,CAAC,GAClBvF,KAAKmwI,OAAO5qI,EAChB,CACA4qI,OAAO5qI,EAAS,CAAC,EAAG6lB,GAChBA,EAASA,GAAUprB,KACnB,UAAWqB,KAAOkE,EACK,MAAfA,EAAOlE,IAAkB2f,MAAMC,QAAQ1b,EAAOlE,KACvB,iBAAhBkE,EAAOlE,IAAuBkE,EAAOlE,aAAgB+uI,YAK5DhlH,EAAO/pB,GAAOkE,EAAOlE,IAJrB+pB,EAAO/pB,GAAO,CAAC,EACfrB,KAAKmwI,OAAO5qI,EAAOlE,GAAM+pB,EAAO/pB,IAM5C,EACH,IAEKgvI,GAAiB,MAAvB,MAAMA,EACFxwI,YAAYy/C,EAAMqzC,EAAUtzC,EAAYixF,EAASC,EAAYC,GACzDxwI,KAAKs/C,KAAOA,EACZt/C,KAAK2yF,SAAWA,EAChB3yF,KAAKq/C,WAAaA,EAClBr/C,KAAKswI,QAAUA,EACftwI,KAAKuwI,WAAaA,EAClBvwI,KAAKwwI,SAAWA,EAChBxwI,KAAKywI,WAAa,KAClBzwI,KAAKmtB,UAAW,EAChBntB,KAAK0wI,QAAU,IAAI5jF,MACnB9sD,KAAK2wI,SAAW,IAAI7jF,MACpB9sD,KAAK4wI,WAAa,IAAI9jF,MACtB9sD,KAAK6wI,WAAa,IAAI/jF,MACtB9sD,KAAK8wI,YAAc,IAAIhkF,MACvB9sD,KAAK+wI,YAAc,IAAIjkF,MACvB9sD,KAAKgxI,cAAgB,IAAIlkF,MACzB9sD,KAAKixI,QAAU,IAAInkF,MACnB9sD,KAAKkxI,aAAe,IAAIpkF,MACxB9sD,KAAKmxI,WAAa,IAAIrkF,MACtB9sD,KAAKoxI,aAAe,IAAItkF,MACxB9sD,KAAKqxI,YAAc,IAAIvkF,MACvB9sD,KAAKsxI,aAAe,IAAIxkF,MACxB9sD,KAAKuxI,aAAe,IAAIzkF,MACxB9sD,KAAKwxI,aAAe,IAAI1kF,MACxB9sD,KAAKyxI,cAAgB,IAAI3kF,MACzB9sD,KAAK0xI,eAAiB,IAAI5kF,MAC1B9sD,KAAK2xI,kBAAoB,IAAI7kF,MAC7B9sD,KAAK4xI,mBAAqB,IAAI9kF,MAC9B9sD,KAAK6xI,oBAAsB,IAAI/kF,MAC/B9sD,KAAK8xI,iBAAmB,IAAIhlF,MAC5B9sD,KAAK+xI,mBAAqB,IAAIjlF,MAC9B9sD,KAAKgyI,mBAAqB,IAAIllF,MAC9B9sD,KAAKiyI,oBAAsB,IAAInlF,MAC/B9sD,KAAKkyI,oBAAsB,IAAIplF,MAC/B9sD,KAAKmyI,sBAAwB,IAAIrlF,MACjC9sD,KAAKoyI,SAAW,IAAItlF,MACpB9sD,KAAKqyI,iBAAmB,IAAIvlF,MAC5B9sD,KAAKsyI,uBAAyB,IAAIxlF,MACvBylF,GACRC,cAAe,CACtB,CACAtjG,WACI,KAAI,EAACujG,OAAkBzyI,KAAKuwI,YACxB,OAEJ,MAAM5sI,EAAS,IAAIusI,GAAelwI,KAAKwwI,UACvC7sI,EAAOwsI,OAAOnwI,KAAKuF,QACnBvF,KAAK2yF,SAASuxB,SAASlkH,KAAKq/C,WAAWnL,cAAoC,IAApBvwC,EAAO+uI,SAAkB,YAAc,eAC9F1yI,KAAK2yF,SAAS0xB,YAAYrkH,KAAKq/C,WAAWnL,cAAoC,IAApBvwC,EAAO+uI,SAAkB,cAAgB,aACnG1yI,KAAKs/C,KAAKtK,kBAAkB,KACxBh1C,KAAK2lE,SAAW,IAAI4sE,GAASvyI,KAAKq/C,WAAWnL,cAAevwC,EAAM,GAElE3D,KAAKmtB,UACLntB,KAAK2lE,SAASq3C,UAEdh9G,KAAK0wI,QAAQiC,UAAU3oI,QACvBhK,KAAKs/C,KAAKhD,IAAI,KACVt8C,KAAK0wI,QAAQpiF,KAAKtuD,KAAK2lE,SAAQ,GAIvC3lE,KAAK2lE,SAASitE,GAAG,UAAW,KACA,MAApBjvI,EAAOkvI,WACPhqG,WAAW,IAAM7oC,KAAK8yI,QAASnvI,EAAOkvI,UAAS,GAGvD7yI,KAAK2lE,SAASitE,GAAG,QAAS,KACG,MAArBjvI,EAAOovI,YACPlqG,WAAW,IAAM7oC,KAAK8yI,QAASnvI,EAAOovI,WAAU,GAGxD/yI,KAAK2lE,SAASitE,GAAG,WAAY,KACC,MAAtBjvI,EAAOqvI,aACPnqG,WAAW,IAAM7oC,KAAK8yI,QAASnvI,EAAOqvI,YAAW,GAIzD/C,GAAe99H,QAAS8gI,IACpBjzI,KAAK2lE,SAASitE,GAAGK,EAAUx7G,cAAe,IAAIsnF,KAC1CA,EAAwB,IAAhBA,EAAK/0G,OAAgB+0G,EAAK,GAAKA,EACvC,MACMm0B,EAAUlzI,KADD,MAAMizI,EAAUE,iBAE3BD,EAAQP,UAAU3oI,OAAS,GAC3BhK,KAAKs/C,KAAKhD,IAAI,KACV42F,EAAQ5kF,KAAKywD,EAAI,EACpB,EAER,GAEA/+G,KAAKywI,aACNzwI,KAAKywI,WAAazwI,KAAKswI,QAAQ5nI,KAAK1I,KAAKuF,QAAU,CAAC,GAAG+X,SACvDtd,KAAKywI,WAAW76D,KAAK51E,KAAKuF,QAAU,CAAC,GAE7C,CACAkS,cACQzX,KAAK2lE,WACL3lE,KAAKs/C,KAAKtK,kBAAkB,KACxBh1C,KAAK2lE,SAAS6lB,SAAQ,GAE1BxrF,KAAK2lE,SAAW,KAExB,CACAytE,aACSpzI,KAAKmtB,UAAYntB,KAAKywI,YACPzwI,KAAKywI,WAAW76D,KAAK51E,KAAKuF,QAAU,CAAC,IACtCvF,KAAK2lE,WAChB3lE,KAAKyX,cACLzX,KAAKkvC,WAGjB,CACAqf,YAAY9tB,GACJzgC,KAAK2lE,UAAYllC,EAAQtT,UACrBsT,EAAQtT,SAAYqyC,eAAiB/+B,EAAQtT,SAAYoyC,iBAChB,IAArC9+B,EAAQtT,SAAYqyC,aACpBx/D,KAAKs/C,KAAKtK,kBAAkB,KACxBh1C,KAAK2lE,SAASs3C,QAAO,IAGiB,IAArCx8E,EAAQtT,SAAYqyC,cACzBx/D,KAAKs/C,KAAKtK,kBAAkB,KACxBh1C,KAAK2lE,SAASq3C,SAAQ,GAK1C,CACA2d,WACI,OAAO36H,KAAK2lE,QAChB,CACAmtE,MAAMO,GACErzI,KAAK2lE,UACL3lE,KAAKs/C,KAAKtK,kBAAkB,KACxBh1C,KAAK2lE,SAAS2tE,eAAeD,EAAM,EAG/C,EAEJhD,SAAkBnvI,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFmiG,GAAV3rI,MAA6CA,OAA7CA,MAAmEA,OAAnEA,MAA4FA,OAA5FA,MAAsHA,OAAtHA,MAAqJwgH,OAArJxgH,MAA6KsrI,GAAe,KAChSK,EAAkBt7D,UADkFrwE,MAAE,CAAA8N,KACJ69H,EAAiBliG,UAAA,qBAAAkC,OAAA,CAAAljB,SAAA,WAAA5nB,OAAA,yBAAAuqD,QAAA,CAAA4gF,QAAA,OAAAC,SAAA,QAAAC,WAAA,UAAAC,WAAA,UAAAC,YAAA,WAAAC,YAAA,WAAAC,cAAA,aAAAC,QAAA,OAAAC,aAAA,YAAAC,WAAA,UAAAC,aAAA,YAAAC,YAAA,WAAAC,aAAA,YAAAC,aAAA,YAAAC,aAAA,YAAAC,cAAA,aAAAC,eAAA,cAAAC,kBAAA,iBAAAC,mBAAA,kBAAAC,oBAAA,mBAAAC,iBAAA,gBAAAC,mBAAA,kBAAAC,mBAAA,kBAAAC,oBAAA,mBAAAC,oBAAA,mBAAAC,sBAAA,qBAAAC,SAAA,QAAAC,iBAAA,gBAAAC,uBAAA,uBAAA97F,SAAA,gBAAAw+B,YAAA,EAAAxzD,SAAA,CADf9c,SA3I9F2rI,CAAiB,KA+ZjBkD,GAAc,MAApB,MAAMA,GAENA,SAAeryI,UAAI,SAAAgtC,GAAA,WAAAA,GAAwFqlG,EAAc,EACzHA,EAAep+C,UAvRqFzwF,KAAE,CAAA8N,KAuRM+gI,IAC5GA,EAAen+C,UAxRqF1wF,MAAE,CAAA+rC,QAAA,CAwRgC,CAAC4kD,OAAeA,SAJhJk+C,CAAc,KCndd,MAAOC,GA0BX3zI,YAAYstB,EAAmBpjB,EAAa0pI,GArB5CzzI,KAAA0zI,cAAwB,KACxB1zI,KAAA0yI,SAAW,IACX1yI,KAAA2zI,gBAAkB,IAClB3zI,KAAA6yI,UAAoB,KACpB7yI,KAAA+yI,WAAqB,KACrB/yI,KAAAgzI,YAAsB,KAEtBhzI,KAAA4zI,YAAc,IAEd5zI,KAAA6zI,QAAU,KACV7zI,KAAA8zI,UAAY,aACZ9zI,KAAA+zI,qBAAuB,GACvB/zI,KAAAg0I,mBAAqB,GACrBh0I,KAAAi0I,gBAAiB,EACjBj0I,KAAAk0I,kBAAoB,qBAKpBl0I,KAAAm0I,UAAY,qBAGVn0I,KAAKmtB,SAAWA,EAChBntB,KAAK+J,IAAMA,EACX/J,KAAKyzI,QAAUA,CACjB,EClCK,IAAMW,GAAgB,MAAvB,MAAOA,SAGKp0I,KAAAq0I,qBAAuB,sCAAuC,SAHnED,CAAgB,KCMvB,MAAOE,GAAbz0I,cAGEG,KAAAu0I,iBAAkB,EAGlBv0I,KAAAw0I,WAAuB,CAAC,aAAc,YAwBxC,CArBEC,oBAAoB/4F,GAClB17C,KAAKu0I,gBAAkBD,GAAgBI,gBAAiBh5F,EAAMi5F,UAChE,CAGAC,4BAA4Bja,EAAetoH,GACrCrS,KAAKu0I,iBAAmBv0I,KAAKw0I,WAAWt+H,KAAKu3B,GAAKA,IAAMp7B,EAAKG,OAC/DmoH,EAASka,WAAWxiI,EACxB,CAGA,sBAAOqiI,CAAgB7mF,GAErB,EAAG,CACD,GAAe,MAAXA,EAAiB,OAAO,EAC5B,GAAIA,GAASjZ,UAAU0M,SAAS8yF,GAAiBC,sBAAuB,OAAO,EAC/ExmF,EAAUA,EAAQmhC,aACpB,QAAUnhC,GAASjZ,UAAU0M,SAAS8yF,GAAiBC,uBAAyBxmF,EAAQmhC,eAAiB37E,SAAS8pH,MAClH,OAAO,CACT,8DCZK,IAAM2X,GAAwB,MAA/B,MAAOA,EAOXx3F,GACA+G,GAKA0wF,GAEAl1I,YACU4G,EACAumI,GADAhtI,KAAAyG,aACAzG,KAAAgtI,aAfVhtI,KAAAqD,OAAMtD,MAAS,CAAC+0I,6BAKhB90I,MAAAs9C,KAAchhC,OAAOK,MACrB3c,MAAAqkD,EAAUrkD,MAAKs9C,EAAY/3C,OAE3BvF,KAAAg1I,kBAAiBztI,OAA0B,MAC3CvH,KAAAi1I,oBAAmBvgI,OAAS,IAAM1U,MAAKs9C,EAAYK,KAAKxwB,WAAantB,KAAKg1I,kBAAkB7nH,WAAY,IAExGntB,MAAA+0I,EAAiB,IAAIT,GAMnBt0I,KAAKk1I,gCACLl1I,MAAKm1I,EAAW,GAClB,CAEAD,gCACEl1I,MAAKqkD,EAAQs2E,SAAW,CACtBhwC,UAAYplF,GAAWvF,MAAKm1I,EAAW5vI,GACvC4/D,UAAWA,IAAMnlE,KAAKg1I,iBACtBlW,WAAaF,GAAU5+H,MAAKo1I,EAAYxW,GAE5C,CAEArqF,kBACEv0C,MAAKm1I,EAAW,CACdjB,kBAAmB,IAAIl0I,MAAKqkD,EAAQrpB,2CACpCm5G,UAAW,IAAIn0I,MAAKqkD,EAAQrpB,8CAEhC,CAGAq6G,OAAO35F,GACL17C,MAAK+0I,EAAeN,oBAAoB/4F,EAC1C,CAGA45F,YAAYjjI,GACVrS,MAAK+0I,EAAeH,4BAA4B50I,KAAKu1I,YAAY5a,WAAYtoH,EAC/E,CAEAmjI,cAAc95F,GACZ17C,KAAKqD,IAAIib,GAAG,gBAAiB,CAAEo9B,UAC/B/P,MAAM,gCAAgC+P,KACtC17C,KAAKu1I,YAAYzC,OACnB,CAEA2C,gBAAgB/5F,GACd,MAAM/zC,EAAI3H,KAAKqD,IAAIib,GAAG,kBAAmB,CAAEo9B,UACrCzP,EAAqByP,EAAM,GAC5BzP,EAASzb,OAQZ7oB,EAAEO,EAAE,0BAA0B+jC,EAASzb,SACvCmb,MAAM,0BAA0BM,EAASzb,UARrCxwB,MAAKqkD,EAAQu2E,MACf56H,MAAKqkD,EAAQu2E,KAAK0I,aAAar3F,GAC/BjsC,MAAKqkD,EAAQu2E,KAAK8a,WAElB/tI,EAAEO,EAAE,uDAMRlI,KAAKu1I,YAAYzC,OACnB,CAEAqC,GAAW5vI,GACT,MAAM2I,EAAclO,MAAKqkD,EAAQ9pB,kBAC3B75B,EAAaV,MAAKqkD,EAAQ3jD,WAC1Bo0B,EAAQ90B,MAAKqkD,EAAQtjD,UAGrB2pI,EAAgB1qI,MAAKqkD,EAAQz6B,eAAe4M,WAC5CzsB,EAAM/J,KAAKgtI,WAAWO,MAAM/pI,KAAKE,OAAO,iBAAiBwK,KAAexN,KAAco0B,0CAH9E90B,KAAKyG,WAAWlB,OAAO3B,SAI/B6vI,EAAUzzI,KAAKgtI,WAAW2I,IAAIC,OAAOnC,UAErC9I,EAAY,IAAI6I,GAAuB9I,EAAe3gI,EAAK0pI,GAC3DhJ,EAAYzqI,KAAKg1I,kBAAoBrK,EAE3C,UAAWtpI,MAAOd,OAAOkF,KAAKklI,GAC3BA,EAAkBtpI,IAAQkE,EAAelE,KAASopI,EAAkBppI,IAIvE,GADwBspI,EAAU+H,WAAa/H,EAAUgJ,gBACpC,CACnB,MAAMkC,GAAelL,EAAU+H,UAAY/H,EAAUgJ,gBACjDhJ,EAAU+H,SACV/H,EAAUgJ,gBACdhJ,EAAU+H,SAAWmD,GACrBlL,EAAUgJ,gBAAkBkC,EAC9B,EAKoD,MAA3BlL,EAAU+I,eAAqD,KAA5B/I,EAAU+I,uBAE7D/I,EAAU+I,cAEnB1zI,KAAKg1I,eAAe3rI,IAAIshI,EAC1B,CAEAyK,GAAY/iI,GACV,MAAMsoH,EAAW36H,KAAKu1I,YAAY5a,WAClCtoH,EAAKyjI,OAAS,CAAEC,QAASpb,EAASruC,eAAe0pD,UACjDrb,EAASsb,YAAY5jI,EACvB,iDA/GWyiI,GAAwBpwI,MAAAC,KAAAD,MAAAiM,OAAA,oCAAxBmkI,EAAwB3mG,UAAA,2BAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,eAIgBkQ,aACxC2xF,GAAiB,gTC3B9B3rI,MAAA,WAEwEA,MADR,iBAAAs7C,GAAAt7C,aAAA6yC,GAAA7yC,MAAS+pC,EAAA+mG,cAAAx1F,GAAqB,EACtBt7C,CADuB,mBAAAs7C,GAAAt7C,aAAA6yC,GAAA7yC,MAClF+pC,EAAAgnG,gBAAAz1F,GAAuB,EAAoCt7C,CAAnC,qBAAAs7C,GAAAt7C,aAAA6yC,GAAA7yC,MAAc+pC,EAAA6mG,YAAAt1F,GAAmB,EAAEt7C,CAAD,gBAAAs7C,GAAAt7C,aAAA6yC,GAAA7yC,MAAS+pC,EAAA4mG,OAAAr1F,GAAc,GAC5Ft7C,MAAA,UACFA,aAHgCA,MADS,UAAAA,MAAA,EAAAisC,GAAAlC,EAAAwmG,oBACTvwI,CADgE,WAAA+pC,EAAAumG,iBAChEtwI,CAAD,WAAA+pC,EAAAwmG,mCDiBvB/4F,MACAq3F,GAAc3iI,IAAA0/B,OAAA,oFAGTwkG,CAAwB,KEhB/B,MAAOoB,GAGXr2I,YAAoBy/C,GAAAt/C,KAAAs/C,OAFZt/C,KAAAm2I,eAAyC,EAEb,CAGpCnvE,OAAOovE,GACLp2I,KAAKs/C,KAAKtK,kBAAkB,KAS1B,SAASqhG,KAOT,SAASC,EAAcC,GACrB,UAAW1C,KAAW0C,EACpBC,aAAa3C,GACf0C,EAAc3nD,OAAO,EAAG2nD,EAAcvsI,OACxC,EAVEssI,CAAcxjI,OAAO2jI,oBACrBpjI,SAAS8pH,KAAKvoF,UAAUpyC,IAAIsQ,OAAO4jI,cACrC,CACA,SAASC,IACPtjI,SAAS8pH,KAAKvoF,UAAUl0B,OAAO5N,OAAO4jI,cACxC,CAdAN,EAAOhjI,iBAAiB,WAAYijI,EAAkB,CAAE1qF,SAAS,IACjEyqF,EAAOhjI,iBAAiB,OAAQujI,EAAc,CAAEhrF,SAAS,IAEzD3rD,KAAKm2I,eAAezpI,KAClB,CAAEmhD,QAASuoF,EAAQ5jI,KAAM,WAAYmsH,SAAU0X,GAC/C,CAAExoF,QAASuoF,EAAQ5jI,KAAM,OAAQmsH,SAAUgY,GAc7C,EAEJ,CAGA5lD,SACE/wF,KAAKs/C,KAAKtK,kBAAkB,KAC1Bh1C,KAAKm2I,eAAehkI,QAAQ,EAAG07C,UAASr7C,OAAMmsH,cAAe9wE,EAAQ16C,oBAAoBX,EAAMmsH,GAAS,EAE5G,ECxCK,MAAMiY,GAAyB,IACpCx2E,OAAQ,sBAAuB,IAC7BzmD,OACE,UACA6mD,OAAM,CACJgnB,OAAQ,WACR,EAEJ7tE,OACE,YACA6mD,OAAM,CACJgnB,OAAQ,UACR,EAEJnnB,OAAW,iBAAkB,IAACC,OAAQ,6CACvC,EACDF,OAAQ,yBAA0B,IAChCzmD,OACE,YACA6mD,OAAM,CACJgnB,OAAQ,QACR,EAEJ7tE,OACE,cACA6mD,OAAM,CACJgnB,OAAQ,iCACRkH,UAAW,mCAEb,CAAE/qF,OAAQ,CAAEkzI,aAAc/jI,OAAOm4E,WAAa,IAAM,QAAU,WAAU,EAE1E5qB,OACE,qBACA,IACEC,OACE,0CACAC,OAAU,IACRC,OAAM,CAAEgnB,OAAQ,MAAO8nD,SAAU,YAAU,EAC3C9uE,OAAM,CAAEgnB,OAAQ,iCAAkC8nD,SAAU,eAIlE,CAAE3rI,OAAQ,CAAEkzI,aAAc/jI,OAAOm4E,WAAa,IAAM,QAAU,aCtC7D,IAAM6rD,GAAmC,MAA1C,MAAOA,EAGXj3I,YAAoBw/C,GAAAr/C,KAAAq/C,aAFpBr/C,KAAAmtB,YAAWuwB,QAAe,EAEiC,CAE3D6Q,YAAY9tB,GACc,MAApBA,EAAQtT,UACVntB,KAAKq/C,WAAWnL,cAAc6iG,gBAAgB,WAAY/2I,KAAKmtB,WAEnE,iDATW2pH,GAAmCpyI,aAAA,oCAAnCoyI,EAAmC3oG,UAAA,2CAAAkC,OAAA,CAAAljB,SAAA,gBAAA3L,SAAA,CAAA9c,QAAA,SAAnCoyI,CAAmC,KCAnCE,GAA2C,MAAlD,MAAOA,EACXn3I,YAAmBo3I,GAAAj3I,KAAAi3I,aAAqC,iDAD7CD,GAA2CtyI,aAAA,oCAA3CsyI,EAA2C7oG,UAAA,yDAA3C6oG,CAA2C,KCA3CE,GAA2C,MAAlD,MAAOA,EACXr3I,YAAmBo3I,GAAAj3I,KAAAi3I,aAAqC,iDAD7CC,GAA2CxyI,aAAA,oCAA3CwyI,EAA2C/oG,UAAA,yDAA3C+oG,CAA2C,KCmB3CC,GAA8B,MAArC,MAAOA,UAAsC7lB,KASjDzxH,cACEC,QALFE,KAAAmtB,YAAWuwB,QAAe,GAE1B19C,KAAAo3I,MAAQ,IAAIv3C,MAAgB,EAI5B,CAEAnrC,qBACE10D,KAAK+Z,cAAcvX,OACjB6+F,MAAc,CACZrhG,KAAKo3I,MAAMvzI,QAAKs9F,SAChBnhG,KAAKq3I,cAAc52G,QAAQ58B,QAAK+wD,WAAU7kD,MACzCzH,UAAU,EAAEmI,MACbzQ,KAAKq3I,cAAcllI,QAAQ,CAACmlI,EAAK3uI,EAAG5F,KAElC,MAAMo6B,EAAM5zB,KAAK0zB,IAAIA,GAAyB,KAAlBl6B,EAAIiH,OAAS,GAAW,IAC9C62E,GAAQ1jD,EAAMF,KAAQl6B,EAAIiH,OAAS,GACnCutI,GAAwB9mI,EAAOwsB,GAAM4jD,EAAOl4E,EAAIw0B,EAAM0jD,EAAOl4E,GAAxC,IACvB2uI,EAAIpjG,cAAcssB,MAAM+2E,qBAAuBA,IACjDD,EAAIpjG,cAAcssB,MAAM+2E,mBAAqBA,IAEhD,GAGP,CAEA9/H,cACEzX,KAAKo3I,MAAM1/H,WACX5X,MAAM2X,aACR,CAEA+/H,QAAQ97F,EAAqBjrC,GACD,UAAtBirC,EAAM+7F,aACVz3I,KAAKo3I,MAAM/8H,KAAK5J,EAClB,iDAxCW0mI,EAA6B,oCAA7BA,EAA6BhpG,UAAA,8BAAAgI,eAAA,SAAA3H,EAAAC,EAAA2H,MAAA,EAAA5H,YAC1B0oG,GAA2C,WAC3CF,GAA2C,WACxCF,GAAmC,EAAU1lG,+YC5BhE1sC,MAAA,WACEA,MADwE,wBAAAs7C,GAAA,OAAgBvR,EAAA+oG,QAAAx3F,GAAgB,EAAK,EAC7Gt7C,CAD8G,wBAAAs7C,GAAA,OAC9FvR,EAAA+oG,QAAAx3F,GAAgB,EAAM,GACtCt7C,MAAA,WACEA,MAAA,KACFA,QACAA,MAAA,WACEA,MAAA,KAEJA,sDALkBA,MAAA,GAAAA,MAAA,yBAAA+pC,EAAA2xB,QAAA,KAAA3xB,EAAA2xB,QAAA62E,aAGAvyI,MAAA,GAAAA,MAAA,yBAAA+pC,EAAAipG,QAAA,KAAAjpG,EAAAipG,QAAAT,6BDgBVjnB,OAAgB1/E,OAAA,y7EAAAxB,cAAA,YAGXqoG,CAA8B,KEnB9BQ,GAAoC,MAA3C,MAAOA,EAGX93I,YAAoBw/C,GAAAr/C,KAAAq/C,aAFpBr/C,KAAAmtB,YAAWuwB,QAAe,EAEiC,CAE3D6Q,YAAY9tB,GACc,MAApBA,EAAQtT,UACVntB,KAAKq/C,WAAWnL,cAAc6iG,gBAAgB,WAAY/2I,KAAKmtB,WAEnE,iDATWwqH,GAAoCjzI,aAAA,oCAApCizI,EAAoCxpG,UAAA,4CAAAkC,OAAA,CAAAljB,SAAA,gBAAA3L,SAAA,CAAA9c,QAAA,SAApCizI,CAAoC,oOCsBrCjzI,MAAA,eAEEA,MAAA,mBAAAA,MAAAiiD,GAAA,MAAAhN,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAAxK,cAAa,GAEtBzqC,MAAA,cAAUA,MAAA,UAAIA,QACdA,MAAA,UAAMA,MAAA,wBACRA,gBADQA,MAAA,GAAAA,YAAA,0EAIRA,MAAA,eAIEA,MAAA,mBAAAA,MAAAslD,GAAA,MAAArQ,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAAi+F,SAAQ,GAAM,GAEvBlzI,MAAA,UAAMA,MAAA,wBAAqCA,QAC3CA,MAAA,cAAUA,MAAA,UACZA,UACAA,MAAA,eAIEA,MAAA,mBAAAA,MAAAslD,GAAA,MAAArQ,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAAi+F,SAAQ,GAAK,GAEtBlzI,MAAA,UAAMA,MAAA,wBAA6CA,QACnDA,MAAA,eAAUA,MAAA,eACZA,kCAdEA,MAAA,UAAAA,MAAA,EAAAmzI,GAAAl+F,EAAAm+F,iBAGMpzI,MAAA,GAAAA,YAAA,0BAMNA,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAmzI,GAAAl+F,EAAAm+F,iBAGMpzI,MAAA,GAAAA,YAAA,mCCbb,IAAMqzI,GAAoB,MAA3B,MAAOA,EAQX57H,GAMA67H,GAEAC,GAEAp4I,YACUy/C,GAAAt/C,KAAAs/C,OAfAt/C,KAAA0c,cAAaJ,OAAOK,MAEvB3c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OACzBvF,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAChC3hD,MAAAmc,KAAsBG,OAAOxF,IAC7B9W,KAAAs+C,qBAAoBhiC,OAAO6J,IACnBnmB,KAAAqH,mBAAkBiV,OAAO8L,KAEjCpoB,KAAAk4I,mBAAkBx6F,SAIlB19C,MAAAi4I,KAA0BzwI,KAAU8O,IAMpCtW,KAAA83I,gBAAep8H,OAAY,eAAgB,IAAM1b,MAAKi4I,EAAwBzhI,YAAcxW,KAAKs+C,kBAAkB92B,sBAEnHxnB,KAAAyQ,KAAOzQ,KAAK0c,WAAWi1G,OAYvB3xH,MAAAm4I,EAAmBn4I,KAAKqH,gBAAgB0zC,UAAU9sB,KAAawhH,oBAC/DzvI,KAAAo4I,sBAAqB1jI,OAAS,IAAM1U,MAAKm4I,IACrC,wCACA,mCAnBA,CAMJ5jG,kBACEv0C,MAAKg4I,EAA0B,IAAI9B,GAAuBl2I,KAAKs/C,MAC/Dt/C,MAAKg4I,EAAwBhxE,OAAOhnE,KAAKq4I,YAAYnkG,eACrDl0C,MAAKg4I,EAAwBhxE,OAAOhnE,KAAKwtF,UAAUt5C,cACrD,CAEAz8B,cACEzX,MAAKg4I,EAAwBjnD,QAC/B,CAEAonD,GAMAG,wBACE,OAAOxlI,OAAOm4E,WAAa,IAAM,QAAU,MAC7C,CAEA97C,cACEnvC,MAAKmc,EAAoBvF,QAAO,EAAO5W,KAAKuF,OAAOyC,MAAOhI,KAAKuF,OAAO7E,WACxE,CAEAk3I,QAAQpxH,GACNxmB,KAAKs+C,kBAAkBr2B,YAAYzB,EACrC,iDApDWuxH,GAAoBrzI,aAAA,oCAApBqzI,EAAoB5pG,UAAA,uBAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,myBDtC/B9pC,MADF,UACEA,CAD6D,aACvBA,MAAA,mBAAAA,aAAA6yC,GAAA7yC,MAAS+pC,EAAAU,cAAa,GAAEzqC,QAIxDA,MAHN,YAGMA,CAH8D,UAG9DA,CAFgE,eAEhEA,CADqD,cAC+BA,MAAA,mBAAAA,aAAA6yC,GAAA7yC,MAAS+pC,EAAAU,cAAa,GACxGzqC,MAAA,cAAUA,MAAA,gBACZA,UACAA,MAAA,aAAmCA,MAAA,IAEvCA,YACAA,MAAA,UACEA,MAAA,UACAA,MAAA,UAWEA,MAAA,IAEAA,MAAA,gCAUEA,MATA,GAAA6zI,GAAA,oBASA7zI,CATgD,GAAA8zI,GAAA,wBAiC1D9zI,sBA5DKA,MAAA,UAAA+pC,EAAAh+B,OAAA,oCAGI/L,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAAmsC,GAAApC,EAAAh+B,SAKkC/L,MAAA,GAAAA,MAAA+pC,EAAAkT,SAAAjnC,OAIhChW,MAAA,GAAAA,MAAA,uBAAA+pC,EAAAh+B,OAAA,iBAEH/L,cAAA,gFAAA+pC,EAAAypG,kBAAA,oCAIAxzI,MAAA,0BAAAA,MAAA,GAAAqsC,GAAAtC,EAAAh+B,OAAA,oBAAA/L,MAAA,EAAAosC,GAAArC,EAAA6pG,2CCSAp8F,MACA1M,MAAa7qC,MACbmzC,MAAennC,MACf8+B,MAAe7+B,MACfg+B,MAAa/9B,MACb6+B,IAAe5+B,KAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAEf09B,KACAwmD,OAAY/kD,OAAA,ozDAAAplC,KAAA,CAAAs4D,UAVJ,CAACozE,MAAuB,SAc3BmB,CAAoB,+XCV1B,IAAMU,GAA0B,MAAjC,MAAOA,EAkDX54I,YACUm9D,EACAxf,EACA8B,EACDhB,GAHCt+C,KAAAg9D,oBACAh9D,KAAAw9C,mBACAx9C,KAAAs/C,OACDt/C,KAAAs+C,oBApDTt+C,KAAAqD,OAAMtD,MAAS,CAAC04I,+BAONz4I,KAAA0c,cAAaJ,OAAOK,MACvB3c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OACtBvF,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAEzB3hD,KAAAmd,SAAWnd,KAAK0c,WAAWS,SAC3Bnd,KAAA29C,GAAK39C,KAAK0c,WAAWihC,GACrB39C,KAAAmhD,QAAUnhD,KAAK0c,WAAWykC,QAEpCnhD,KAAAukD,WAAUh9C,QAAO,GAEjBvH,KAAA4vI,aAAe5vI,KAAKuF,OAAOq1H,KAAKv/E,WAEhCr7C,KAAA04I,iBAAgBhkI,OAAS,KACvB,MAAMyI,EAAWnd,KAAKmd,WAChBu7H,EAA+B,CACnCjqD,UAAW,OACXC,UAAW,QAGb,GAAI1uF,KAAKuF,OAAOqkB,eAAerb,YAAcwnB,KAAiBomG,eAAqC,WAApBh/G,EAASk/G,OACtF,OAAOqc,EAET,IAAIvsF,EAAOjyC,SAASiD,EAASs/G,oBAAqB,IAC9CtwE,EAAO,IACTA,EAAO,GAGT,MAAMwsF,ECjEJ,SAAUC,GAAGC,GAEjB,OAAQA,EADetvI,KAAK4zB,IAAI9pB,SAASylI,gBAAgBC,aAAcjmI,OAAOo4E,aAAe,GACtD,GACzC,CD8D0B0tD,CAAG,IACzB,IAAInqD,EAAY,GAAY,GAAPtiC,EAErB,OAAIsiC,EAAYkqD,IACdlqD,EAAYkqD,GAEdD,EAAcjqD,UAAY,GAAGA,MAEtBiqD,IAGD14I,KAAA87H,oBAAmBt0H,KAAUuxH,GAQjC,CAEJ7pF,WACElvC,KAAKuF,OAAOi/C,SAASl8C,UAAUtI,KAAKukD,QAAQl7C,IAC9C,CAEAkrC,kBACE,MAAM5sC,EAAI3H,KAAKqD,IAAIib,GAAG,mBAEhB06H,EAAmBh5I,KAAKuF,OAAOqkB,eAAeovH,iBACpDrxI,EAAEO,EAAE,iCAAkC,CAAE8wI,qBACxCh5I,KAAK87H,iBAAiBnkH,KACpBqhI,EACAh5I,KAAKi5I,oBACLj5I,KAAKw9C,iBACLx9C,KAAKg9D,mBAGPh9D,KAAKk5I,uBAAyB,IAAIhD,GAAuBl2I,KAAKs/C,KAChE,CAEA7nC,cACEzX,KAAKqD,IAAIib,GAAG,cAAe,KAAM,gCACjCte,KAAKk5I,uBAAuBnoD,QAC9B,iDA/EW0nD,GAA0B/zI,6CAAAC,IAAA,oCAA1B8zI,EAA0BtqG,UAAA,6BAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,eAIckQ,yaEjCrDh6C,MAAA,sBACEA,MAAA,UACFA,QAEEA,MADF,UACEA,CADgC,iBAS9BA,MAAA,GACFA,QAMEA,MALF,UAKEA,CADK,WAEHA,MAAA,aAQJA,UACAA,MAAA,4BACFA,eA1ByCA,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAAksC,GAAAnC,EAAA0S,WAAA1S,EAAA0S,UAAA1S,EAAAkP,KAAAsD,UAAAxS,EAAAkP,KAAAw7F,SAAA1qG,EAAAkP,KAAA/nC,SAAA64B,EAAAkP,KAAAxwB,UAAAshB,EAAAkP,KAAAiI,oBAAAnX,EAAAkP,KAAAxwB,SAAAshB,EAAAkP,KAAAxwB,SAAAshB,EAAA8V,YAQrC7/C,cAAA,IAAA+pC,EAAAkT,SAAA+pE,kBAAA,KAEyBhnH,cAAA,UAAAA,MAAA,GAAAmsC,GAAApC,EAAAkP,KAAAsD,UAAAxS,EAAAkP,KAAAw7F,SAAA1qG,EAAAkP,KAAA/nC,OAAA64B,EAAAkP,KAAAxwB,SAAAshB,EAAA8V,YAM+C7/C,MAAA,GAE/DA,MAF+D,UAAAA,MAAA,GAAAosC,GAAArC,EAAAkP,KAAAxwB,UAE/DzoB,CAAD,UAAAA,MAAA,GAAAqsC,GAAAtC,EAAAiqG,gBAAAjqD,UAAAhgD,EAAAiqG,gBAAAhqD,4BFAJ5tC,GACAi3F,GACA1iD,MAAY1kF,aAAA2/B,OAAA,u6DAAAplC,KAAA,CAAAs4D,UAJJ,CAACozE,MAAuB,SAS3B6B,CAA0B,4EGrB/B/zI,MAAA,GACAA,MAAA,kDADAA,MAAA,IAAA00I,EAAA,KACkB10I,cAAA,gBAAA00I,8BAJtB10I,MAAA,WACEA,MAAA,kDACAA,MAAA,EAAA20I,GAAA,cAAA30I,OAIFA,8BAJEA,MAAA,GAAAA,MAAAg4C,EAAA1uB,qBCUC,IAAMsrH,GAA8B,MAArC,MAAOA,EAGXh8F,GAEAn1B,GAEAtoB,cAJAG,MAAAs9C,KAAchhC,OAAOK,MAErB3c,MAAAmoB,KAAY7L,OAAO8L,KAInBpoB,KAAAguB,oBAAmBtS,OAAY,mBAAoB,KACjD,MAAM69H,EAAMv5I,MAAKs9C,EAAYtvB,mBAC7B,OAAmB,IAAfurH,EAAIvvI,OAAqBuvI,EAEtBA,EAAI92I,OAAO0nB,IAAMnqB,MAAKmoB,EAAUg0E,SAAShyE,KAAI,GAG5CnqB,KAAA2hD,OAAS3hD,MAAKs9C,EAAYqE,MATpB,iDAPL23F,EAA8B,oCAA9BA,EAA8BnrG,UAAA,gCAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,cACUkQ,oMDjBrDh6C,MAAA,WACEA,MAAA,UAEAA,MAAA,EAAA80I,GAAA,aASF90I,eAZKA,MAAA,UAAAA,MAAA,EAAAisC,GAAAlC,EAAAzgB,mBAAAhkB,SAGHtF,MAAA,GAAAA,OAAA,mBCSMw3C,MACAqqE,MAAoBj2E,OAAA,4YAGfgpG,CAA8B,KCZrC,MAAOG,WAA0B33F,KAGrCjiD,cAAgBC,MAAM,CAAE25I,uBAFxBz5I,KAAAqU,KAAO0hB,KAAiB2jH,YAEsB,CAE9C75H,QAAS1C,aACP,MAAM6kC,EAAgB,IAAK7kC,GAC3B6kC,SAAclqB,WAAY,EAC1BkqB,EAAc23F,aAAc,EAC5B33F,EAAc/nB,QAAU,GACjB+nB,CACT,EAGFF,KAAet/C,IAAIi3I,gFCAT/0I,MAAA,WACEA,MAAA,gCACFA,eADiDA,cAAA,YAAAA,MAAA,IAAA+pC,GAAA/pC,QCOpD,IAAMk1I,GAA2B,MAAlC,MAAOA,EAMXt8F,GAQAu8F,GAEAh6I,cAdAG,KAAAqD,OAAMtD,MAAS,CAAC65I,gCAIhB55I,MAAAs9C,KAAchhC,OAAOK,MACX3c,KAAAuF,OAASvF,MAAKs9C,EAAY/3C,OAC1BvF,KAAA4c,MAAQ5c,MAAKs9C,EAAY1gC,MACzB5c,KAAA2hD,OAAS3hD,MAAKs9C,EAAYqE,OAGpC3hD,KAAA85I,UAAW95I,MAAKs9C,EAAYrgC,WAAW,aAEvCjd,MAAA65I,KAAqBv9H,OAAOmqB,IAG1BgzG,GAAkBj3F,UACpB,CAEAu3F,iBACE,MAAM9vH,EAASjqB,KAAK85I,YACpB95I,KAAKqD,IAAI6E,EAAE,iBAAkB,CAAE+hB,WAC/BjqB,MAAK65I,EAAmB52G,cAA4CjjC,MAAKs9C,EAAYjpC,KAAM,CAAEslI,WAAY1vH,GAAU,8BACrH,iDAxBW2vH,EAA2B,oCAA3BA,EAA2BzrG,UAAA,8BAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,cAIakQ,ymBD5BnDh6C,MAHF,eAGEA,CAHoI,WAG3FA,MAAA,mBAAAA,aAAA6yC,GAAA7yC,MAAS+pC,EAAAsrG,iBAAgB,GAE9Dr1I,MADF,UACEA,CADwD,gBAC1BA,MAAA,GAC9BA,QACAA,MAAA,YACEA,MAAA,GAGNA,YAKIA,MAFJ,uBAEIA,CAFoG,UAEpGA,CAD2B,WAGzBA,MAAA,GAAAs1I,GAAA,aAMAt1I,MAAA,aACEA,MAAA,WAKVA,8BA9B6EA,MAAA,UAAAA,MAAA,EAAAisC,IAAA,IAAAlC,EAAAkT,SAAAi5C,UAKzCl2F,MAAA,GAAAA,MAAA,GAAA+pC,EAAAqrG,YAAA,+CAG5Bp1I,MAAA,GAAAA,MAAA,IAAA+pC,EAAAkT,SAAAjnC,OAAA+zB,EAAAlpC,OAAAxE,UAAA,KAMiD2D,cAAA,UAAA+pC,EAAAqrG,YAAA,gBAIjDp1I,MAAA,GAAAA,OAAAi+C,EAAAlU,EAAAkT,SAAAxB,OAAA,MAAAwC,mBCEAnT,MAAa7qC,YACbu3C,MACAtN,MAAaj+B,MACbsuC,GACAvF,MAAYpJ,OAAA,u4BAGPspG,CAA2B,iCClBjC,IAAMK,GAAsB,MAA7B,MAAOA,EAMXp6I,cAHUG,KAAA0c,cAAaJ,OAAOK,MACpB3c,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,MAEnB,iDANLs4F,EAAsB,oCAAtBA,EAAsB9rG,UAAA,yBAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,cACkBkQ,yJCTrDh6C,MAAA,WACEA,MAAA,UACFA,cAFKA,MAAA,UAAA+pC,EAAAkT,SAAAi5C,oCDQQq/C,CAAsB,yYEkBzBv1I,MAAA,qCAAoDA,MAA1C,QAAAw1I,EAAAnwI,IAA0CrF,CAAxB,UAAAw1I,EAAA1a,gDA2CpB96H,MAAA,eAMEA,MAAA,mBAAAA,MAAAmsH,GAAA,MAAAn0E,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAA0+D,eAAc,GAEvB12G,MAAA,iBACFA,iCAJEA,MAAA,WAAAg4C,EAAAiB,KAAAxwB,oDA0BFzoB,MAAA,eAMEA,MAAA,mBAAAA,MAAA+kH,GAAA,MAAA/sE,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAu+E,iBAAgB,GAEzBv2H,MAAA,iBACFA,iCAJEA,MAAA,WAAAg4C,EAAAiB,KAAAxwB,oDAhDJzoB,MADF,UACEA,CAD8C,YAS5CA,MAAA,wBACFA,QAEAA,MAAA,EAAAy1I,GAAA,iBAYAz1I,MAAA,eAOEA,MAAA,mBAAAA,MAAAslD,GAAA,MAAAtN,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAojF,uBAAuBpjF,EAAA+gF,YAAW,GAE3C/4H,MAAA,iBAOGA,MAAA,yBAELA,UACAA,MAAA,EAAA01I,GAAA,iBAYF11I,2CAlDIA,cAAA,UAAAA,MAAA,GAAAmzI,GAAAn7F,EAAAiB,KAAAxwB,WAIAzoB,cAAA,IAAAg4C,EAAAgmF,aAAAh+H,MAAA,qDAGFA,MAAA,GAAAA,MAAAg4C,EAAAgmF,aAAA,MAgBEh+H,QACAA,MADA,oBAAA21I,EAAA39F,EAAA+gF,aAAA4c,EAAAta,gCACAr7H,CADwD,UAAAA,MAAA,GAAA41I,IAAA,OAAA5rB,EAAAhyE,EAAA+gF,YAAA,KAAA/O,EAAAsR,uBAAA,IAMtDt7H,QAKAA,MALA,iBAAAg4C,EAAAkmF,2BAAA,qHAKAl+H,CADC,uBAAA61I,EAAA79F,EAAA+gF,YAAA,KAAA8c,EAAAxa,gCAKLr7H,MAAA,GAAAA,MAAAg4C,EAAAmmF,aAAA,iCAqBFn+H,MADF,WACEA,CADkD,YACXA,MAAA,GAAeA,QAGlDA,MAFJ,WAEIA,CAFqC,SAErCA,CADoG,UAC9FA,MAAA,GAGZA,8CANyCA,MAAA,GAAAA,MAAAg4C,EAAAyE,WAElCz8C,MAAA,GAAgFA,MAAhF,OAAAw1I,EAAAnwI,IAAArF,MAAgFA,CAA/D,QAAAw1I,EAAAnwI,KACZrF,MAAA,GAAAA,MAAAw1I,EAAA5a,yCAWV56H,MADF,WACEA,CAD6D,UACvDA,MAAA,wBAAsCA,QAC5CA,MAAA,8BACFA,+BAFQA,MAAA,GAAAA,YAAA,IAAAg4C,EAAA07F,uBACiB1zI,MAAA,GAAAA,MAAA,gFAzH/BA,MATJ,UASIA,CAT2C,UAS3CA,CAFD,WAWGA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,QAAA,OAAAA,MAASg4C,EAAA0+D,eAAc,GAEvB12G,MAAA,EAAA81I,GAAA,kBAGF91I,QAYMA,MAVN,UAUMA,CAVkC,UAUlCA,CARsC,qBAQtCA,CADD,aAWGA,MAJA,kBAAAs7C,GAAAt7C,MAAA6yC,GAAA,MAAAmF,EAAAh4C,QAAA,OAAAA,MAAUg4C,EAAA2mF,SAAArjF,GAAgB,EAI1Bt7C,CAJ2B,kBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,QAAA,OAAAA,MAEnBg4C,EAAAquE,gBAAe,EAEvBrmH,CAFwB,iBAAAs7C,GAAAt7C,MAAA6yC,GAAA,MAAAmF,EAAAh4C,QAAA,OAAAA,MAEfg4C,EAAA2mF,SAAArjF,GAAgB,GAV3Bt7C,QAeAA,MAAA,EAAA+1I,GAAA,cA0DA/1I,MAAA,kBACEA,MAAA,IAEJA,UAEAA,MAAA,GAAAg2I,GAAA,cAUFh2I,QAEAA,MAAA,aACEA,MAAA,+BACAA,MAAA,GAAAi2I,GAAA,cASRj2I,0CArIIA,cAAA,UAAAA,MAAA,GAAAisC,GAAA+L,EAAAiB,KAAAxwB,SAAAuvB,EAAAn3C,OAAA01B,gBASEv2B,QAKAA,MALA,gBAAAg4C,EAAAiB,KAAAxwB,SAKAzoB,CAL+B,UAAAA,MAAA,GAAAksC,GAAA8L,EAAAyE,YAAA+4F,EAAA3a,QAAA7iF,EAAAiB,KAAAxwB,UAK/BzoB,CADE,UAAAA,MAAA,GAAAmsC,GAAA6L,EAAAyE,WAAA+4F,EAAA3a,QAAA2a,EAAA9a,aAAA,KAIF16H,cAAAg4C,EAAAyE,YAAA+4F,EAAA3a,QAAA,MAWI76H,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAosC,GAAA4L,EAAAiB,KAAAiI,oBASElhD,QAQAA,MARA,cAAAg4C,EAAAiF,SAAApnC,YAQA7V,CARoC,WAAAg4C,EAAAiB,KAAAxwB,SAQpCzoB,CAN0B,QAAAg4C,EAAAyE,UAM1Bz8C,CAJmB,SAAAg4C,EAAAn3C,OAInBb,CADiB,uBAGnBA,cAAAg4C,EAAAgmF,cAAAhmF,EAAAmmF,aAAA,MA0DWn+H,cAAA,UAAAA,MAAA,GAAAqsC,GAAA2L,EAAAiB,KAAAiI,oBACTlhD,cAAA,IAAAg4C,EAAAiF,SAAA+pE,kBAAA,KAIJhnH,cAAAw1I,EAAA5a,aAAA,OAauD56H,MAAA,GAAAA,MAAA,iCACvDA,cAAAg4C,EAAAgmF,aAAA,QCpFH,IAAMkY,GAA2C,MAAlD,MAAOA,UAAmD1b,GAc9Dr/H,YACEyF,EACAi4C,EACAC,EACAwf,EACA51D,EACAi3C,EACQiB,EACDhB,EACCj3C,GAERvH,MACEwF,EACAi4C,EACAC,EACAwf,EACA51D,EACAk3C,GAVMt+C,KAAAs/C,OACDt/C,KAAAs+C,oBACCt+C,KAAAqH,kBApBArH,KAAA0c,cAAaJ,OAAOK,MACvB3c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OACtBvF,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAEzB3hD,KAAA0iI,cAAahuH,OAAS,IAAM1U,KAAK0c,WAAWS,WAAW8jH,QAAQ/zH,SAAS,QAASyY,GAAaC,MAC9F5lB,KAAA6iI,cAAanuH,OAAS,IAAM1U,KAAK0c,WAAWS,WAAW8jH,QAAQ/zH,SAAS,QAASyY,GAAaC,MAC9F5lB,KAAA4iI,yBAA0B5iI,KAAK0c,WAAWO,WAAW,4BA2B/Djd,MAAAm4I,EAAmBn4I,KAAKqH,gBAAgB0zC,UAAU9sB,KAAawhH,oBAC/DzvI,KAAAo4I,sBAAqB1jI,OAAS,IAAM1U,MAAKm4I,IACrC,wCACA,oCANFn4I,KAAKq+C,mBAAqBA,CAC5B,CAEA85F,GAMA5jG,kBACEv0C,KAAKk5I,uBAAyB,IAAIhD,GAAuBl2I,KAAKs/C,KAChE,CAEA7nC,cACEzX,KAAKk5I,uBAAuBnoD,QAC9B,CAEAg6B,gBACE/qH,KAAK0c,WAAWihC,KAAK+H,aACvB,CAEA29E,SAAS3nF,GACP,MAAM4tB,EAAY5tB,EAAMtwB,OAA4BzQ,MACpD3a,KAAK0c,WAAWihC,KAAK+E,aAAa4mB,EACpC,CAEA8xC,eACMp7G,KAAK0c,WAAWihC,KAAKxwB,UACzBntB,KAAKq+C,mBAAmBznC,QAAO,EAAM5W,KAAKuF,OAAOyC,MAAOhI,KAAKuF,OAAO7E,WACtE,iDA9DWk6I,GAA0Cl2I,MAAAC,KAAAD,MAAAiM,OAAAjM,gCAAAkM,IAAAlM,MAAAmM,IAAAnM,mBAAAoM,IAAApM,MAAAqM,KAAA,oCAA1C6pI,EAA0CzsG,UAAA,+CAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,cACFkQ,qnEDlDrDh6C,MAAA,sBACEA,MAAA,UACFA,QAGAA,MAAA,EAAAm2I,GAAA,2BAAAn2I,MAAA,GAAAA,OAAAi6C,EAAAlQ,EAAA0wF,WAAA,KAAAxgF,mBC4BQzC,MACAtN,MAAa59B,MACb80C,MACApW,IAAez+B,KACf49B,KACAkpG,GACAj3F,GACAg6F,KACA3c,GACA9oC,MACA5zC,MAAkBvwC,kBAClBqpF,MAAcppF,MACds+B,MAAer+B,OAAAk/B,OAAA,qwEAAAplC,KAAA,CAAAs4D,UAdP,CAACozE,MAAuB,SAkB3BgE,CAA2C,oQCf1Cl2I,MADF,QACEA,CADG,YAEDA,MAAA,iBACAA,MAAA,YAA0CA,MAAA,GAE9CA,4CAF8CA,MAAA,GAAAA,MAAA2qE,EAAA/gE,iCAUtC5J,MAAA,cAAUA,MAAA,GAAgBA,yCAAhBA,cAAA2qE,EAAAu8D,kCAGVlnI,MAAA,cAAUA,MAAA,GAAgBA,yCAAhBA,cAAA2qE,EAAAu8D,kCALdlnI,MAAA,YAIEA,MAHA,EAAAq2I,GAAA,eAGAr2I,CAH4B,EAAAs2I,GAAA,gBAM5Bt2I,MAAA,YAA0CA,MAAA,GAC5CA,2CAPEA,cAAA2qE,EAAAm/D,gBAAA,MAGA9pI,cAAA2qE,EAAAm/D,iBAAA,KAG0C9pI,MAAA,GAAAA,MAAA2qE,EAAA/gE,iCAI5C5J,MAAA,YACEA,MAAA,YACFA,yCAD0BA,cAAA,SAAA2qE,EAAAvkE,GAAA,IAAAukE,EAAA/gE,KAAA,IAAoC5J,MAAA,MAAA2qE,EAAAoxD,aAAA/7H,kCAdlEA,MAAA,SAYEA,MAXA,EAAAu2I,GAAA,aAWAv2I,CAX6B,EAAAw2I,GAAA,cAgB/Bx2I,wCAhBEA,cAAA,UAAA2qE,EAAA7gE,KAAA,MAWA9J,cAAA,UAAA2qE,EAAA7gE,KAAA,gCAbJ9J,MATA,EAAAy2I,GAAA,UASAz2I,CATqB,EAAA02I,GAAA,oCAArB12I,MAAA2qE,EAAA3sE,SAAA,MASAgC,cAAA2qE,EAAA3sE,UAAA,MCNH,IAAM24I,GAA0C,MAAjD,MAAOA,EAaXlD,GAQAt4I,YACUy/C,EACAjB,EACDC,EACCj3C,GAHArH,KAAAs/C,OACAt/C,KAAAq+C,qBACDr+C,KAAAs+C,oBACCt+C,KAAAqH,kBAtBArH,KAAA0c,cAAaJ,OAAOK,MACpB3c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OACzBvF,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,OAEzB3hD,KAAA29C,GAAK39C,KAAK0c,WAAWihC,GACrB39C,KAAAmhD,QAAUnhD,KAAK0c,WAAWykC,QAE1BnhD,KAAAkC,SAAQwS,OAAS,IAAM1U,KAAKuF,OAAOq1H,KAAK14H,QAAQy2D,MAAM,EAAG,IACzD34D,KAAAs7I,eAAc5mI,OAAS,IAAM1U,KAAKuF,OAAOq1H,KAAK14H,QAAQ8H,OAAQ2b,GAAaK,QAErFhmB,MAAAm4I,EAAmBn4I,KAAKqH,gBAAgB0zC,UAAU9sB,KAAawhH,oBAC/DzvI,KAAAo4I,sBAAqB1jI,OAAS,IAAM1U,MAAKm4I,IACrC,wCACA,mCAUA,CAEJ5jG,kBACEv0C,KAAKk5I,uBAAyB,IAAIhD,GAAuBl2I,KAAKs/C,KAChE,CAEA7nC,cACEzX,KAAKk5I,uBAAuBnoD,QAC9B,CAEAwqD,UAAUvzI,EAAe9H,GACvB,OAAOA,EAAK4K,EACd,CAEAswG,eACMp7G,KAAKuF,OAAOu1B,iBAChB96B,KAAKq+C,mBAAmBznC,QAAO,EAAM5W,KAAKuF,OAAOyC,MAAOhI,KAAKuF,OAAO7E,WACtE,iDA3CW26I,GAA0C32I,mBAAAC,IAAAD,MAAAiM,IAAAjM,MAAAkM,KAAA,oCAA1CyqI,EAA0CltG,UAAA,+CAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,cACFkQ,quBDpCrDh6C,MAAA,wBACEA,MAAA,UACFA,QAIEA,MADF,UACEA,CADgC,iBAW9BA,MAAA,GACFA,QACAA,MAAA,WAIEA,MAAA,mBAAAA,aAAA6yC,GAAA7yC,MAAS+pC,EAAA2sE,eAAc,GAOrB12G,MADF,UACEA,CADwF,WAEtFA,MAAA,EAAA82I,GAAA,cAAA/sG,EAAA8sG,WAAA,GAkCN72I,YAGEA,MADF,WACEA,CAD0C,YAExCA,MAAA,4BACFA,QAEEA,MADF,WACEA,CADgF,WAC1EA,MAAA,0BAAuCA,QAC7CA,MAAA,+BAGNA,kBA3EkBA,MAAA,sBAQdA,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAAisC,GAAAlC,EAAA6sG,cAAA,MAAA7sG,EAAA6sG,cAAA7sG,EAAAkP,KAAAsD,UAAAxS,EAAAlpC,OAAAu1B,iBAAA2T,EAAAkP,KAAAsD,UAAAxS,EAAAlpC,OAAAu1B,gBAAA2T,EAAAlpC,OAAAu1B,kBAQAp2B,cAAA,IAAA+pC,EAAAkT,SAAA+pE,kBAAA,KAKAhnH,QAEAA,MAFA,qBAAAA,MAAA,GAAAksC,IAEAlsC,CAF6C,UAAAA,MAAA,GAAAmsC,GAAApC,EAAAkP,KAAAsD,QAAAxS,EAAAlpC,OAAAu1B,kBAOxCp2B,cAAA,UAAA+pC,EAAA0S,UAAA,4DAEDz8C,MAAA,GAAAA,MAAA+pC,EAAAvsC,SAyCIwC,MAAA,GAAAA,MAAA,GAAAA,MAAA,KAAA+pC,EAAA2pG,sBAAA,KACiB1zI,MAAA,GAAAA,MAAA,sDC/CrBqzI,GACAnpG,MAAa/9B,MACbinC,MAAehnC,MACfgwC,GACAg6F,KACAprG,IAAe3+B,KACfskF,MAAYrkF,OAAAs/B,OAAA,uoGAAAplC,KAAA,CAAAs4D,UARJ,CAACozE,MAAuB,SAY3ByE,CAA0C,yDCZhD,IAAMI,GAAgC,MAAvC,MAAOA,EAWX57I,YACSy+C,GAAAt+C,KAAAs+C,oBAVTt+C,KAAAqD,OAAMtD,MAAS,CAAE07I,qCAKPz7I,KAAA0c,cAAaJ,OAAOK,MACvB3c,KAAAuF,OAASvF,KAAK0c,WAAWnX,OACtBvF,KAAA2hD,OAAS3hD,KAAK0c,WAAWilC,MAI/B,iDAbO85F,GAAgC/2I,MAAAC,IAAA,oCAAhC82I,EAAgCttG,UAAA,oCAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,eAIQkQ,kBACEA,6VCpBjDh6C,MAHN,qBAGMA,CAHY,UAGZA,CAFyB,UAEzBA,CADkC,gBAEhCA,MAAA,UAIRA,cAEAA,MAAA,0BDEQ8qC,MAAa7+B,MACbonI,GAEA1iD,OAAY/kD,OAAA,yIAAAplC,KAAA,CAAAs4D,UALJ,CAACozE,MAAuB,SAQ3B6E,CAAgC,KEetC,MAAMC,GAA6C,CAExDC,CAAClmH,gBAA8Bk6G,GAC/BiM,CAACnmH,uBAAqCmkH,GACtCiC,CAACpmH,oBAAkCq/G,GACnCgH,CAACrmH,4BAA0CgmH,GAC3CM,CAACtmH,sBAAoCgjH,GACrCuD,CAACvmH,kBAAgCwkH,GACjCgC,CAACxmH,0BAAwC6jH,GACzC4C,CAACzmH,sCAAoDmlH,GACrDuB,CAAC1mH,sCAAoD4lH,GACrDe,CAAC3mH,wBAAsC2oB,GAGvC,CAACroB,KAAiBgsB,gBAAiBO,GACnC,CAACvsB,KAAiBotB,iBAAkBE,GACpC,CAACttB,KAAiBsmH,eAAgB34F,GAClC,CAAC3tB,KAAiBmG,kBAAmBkoB,GACrC,CAACruB,KAAiBumH,iBAAkBtiD,GACpC,CAACjkE,KAAiB2jH,cAAej/C,GACjC,CAAC1kE,KAAiBwmH,cAAe7hD,GACjC,CAAC3kE,KAAiBI,qBAAsBggG,GACxC,CAACpgG,KAAiBC,eAAgBggG,GAClC,CAACjgG,KAAiBG,aAAc0gG,GAChC,CAAC7gG,KAAiBymH,sBAAuB9e,GACzC,CAAC3nG,KAAiBirG,kBAAmBgC,GACrC,CAACjtG,KAAiByF,kBAAmBmoG,GACrC,CAAC5tG,KAAiB2uG,eAAgBC,GAClC,CAAC5uG,KAAiB+1E,gBAAiB+4B,GACnC,CAAC9uG,KAAiBsvG,eAAgBM,GAClC,CAAC5vG,KAAiBK,gBAAiBiwG,GACnC,CAACtwG,KAAiBE,qBAAsBiwG,GACxC,CAACnwG,KAAiB81E,sBAAuBg7B,GACzC,CAAC9wG,KAAiBouB,YAAaC,GAC/B,CAACruB,KAAiB0mH,sBAAuB/U,GACzC,CAAC3xG,KAAiBmzG,eAAgBG,GAGlC,CAACtzG,KAAiBM,cAAekgG,GACjC,CAACxgG,KAAiBO,cAAe4wG,GACjC,CAACnxG,KAAiBQ,cAAe0uG,ICtE7BniI,GAAW,CACfC,KAAK,EACL4nF,WAAW,EACX+qD,SAAS,GAOL,MAAOgH,GAAb78I,cAEEG,KAAAqD,OAAMtD,MAAS,CAAC28I,kBAAgB55I,IAWhC9C,MAAA28I,KAAWp1I,OAA6B,MAExCvH,MAAA48I,KAASlhI,OAAY,QAAS,IAAM1b,MAAK28I,KAAYz6I,SAAW,IAQhElC,MAAA68I,EAAS,EAcF78I,KAAAq7C,cAAa3mC,OAAS,IAAM1U,MAAK28I,KAAY7Y,cAAc32G,WAAY,EAWhF,CA5CE,WAAI2vH,GACF,MAAMlwI,EAAI5M,MAAK28I,IACf,GAAI/vI,EAAG,OAAOA,EACd,MAAM,IAAI4jB,MAAM,kBAClB,CAEOi9G,WAAWqP,GAChB98I,MAAK28I,EAAStzI,IAAIyzI,EACpB,CACAH,GAEAC,GACA,SAAI16I,GAAU,OAAOlC,MAAK48I,CAAO,CAE1BlnG,OAAOwhF,EAAwBqM,GACpCvjI,KAAKqD,IAAIib,GAAG,SAAU,CAAE44G,gBAAeqM,mBACvCvjI,KAAK88I,QAAQpnG,OAAOwhF,EAAeqM,EACrC,CAEAsZ,GAEOlyD,UAAUplF,GACf,MAAMoC,EAAI3H,KAAKqD,IAAIC,KAAK,YAAa,CAAEiC,SAAQ0+B,MAAOjkC,MAAK68I,IAG3D,GAFA78I,MAAK68I,IAED78I,MAAK68I,EAAS,GAChB,MAAM,IAAIrsH,MAAM,iBAElBxwB,KAAK88I,QAAQnyD,UAAUplF,GACvBoC,EAAE8R,KACJ,CACO0rD,YAAc,OAAOnlE,KAAK88I,QAAQhZ,YAAa,CAItDV,cAAwB,CAExBE,eAAyB,CAEzBoS,UACE11I,KAAKqD,IAAIC,KAAK,WACdtD,KAAK88I,QAAQ1hI,YACf,ECvDI,MAAO2hI,GA6BX,mBAAOC,CAAal6H,GAClB,MAAMpI,EAAQoI,GAAGxU,MAAQ,aACnB6xC,EAAQr9B,GAAGmX,OAAS,GACpBuC,EAAW1Z,GAAGwZ,gBAAiB,EAG/Bs+D,GAFgB93E,GAAGgV,UAAW,KACThV,GAAGiV,gBAExB+hH,EAAah3H,GAAoC62H,YAAa,EAIpE,MAAO,CACLj/H,QACAylC,QACA5lC,YAAauI,GAAGkX,aAAe,aAC/BwC,WACAkvF,kBAAmBhxG,GAAS8hB,EAAW,KAAO,IAC9Co+D,UAGAk/C,YAEJ,ECtCF,MAAMh3I,GAAW,CACfm6I,cAAc,EACd5hI,OAAQ,IAAIC,OAUP,IAAM4hI,GAAyB,MAAhC,MAAOA,EAIX1rB,GACA2rB,GACAtD,GACAuD,GACAC,GAEAlhI,GAEAtc,cAVAG,KAAAqD,OAAMtD,MAAS,CAACm9I,6BAA4Bp6I,IAE5C9C,MAAAwxH,KAAYl1G,OAAOw4B,OACnB90C,MAAAm9I,KAAe7gI,OAAOghI,OACtBt9I,MAAA65I,KAAqBv9H,OAAOmqB,IAC5BzmC,MAAAo9I,KAAsB9gI,OAAOhG,IAC7BtW,MAAAq9I,KAAe/gI,OAAO8L,KAEtBpoB,MAAAmc,KAAsBG,OAAOxF,GAEb,CAYTmmI,aAAazS,EAA6Bj8H,GAC/C,MAAM5G,EAAI3H,KAAKqD,IAAIC,KAAK,eAAgB,CAAEknI,cAAaj8H,cAEjD8F,EAAOm2H,EAAYzpI,UAGnBoc,EAAWnd,MAAK65I,EAAmB18H,SAAS9I,GAC5CstC,KAASjmC,OAAY,SAAU,IAAMqhI,GAAqBC,aAAa7/H,MAGvE1G,EAAYzW,MAAKo9I,EAAoB3mI,UACrC4lB,EAAU5lB,EAAUqkH,SAASzmH,GAC7BkpI,EAA4Bv9I,MAAKw9I,EAAenpI,EAAMgoB,EAAS9tB,EAAW4O,GAG1EgkC,QACJ,IAAK9kB,EAAS,SAAO7gB,OAAU,qBAAsB,MACrD,MAAMiiI,GAAkBphH,EAAQ1H,aAAa9wB,QAO3C65I,MAAmB19G,IAAKA,KAG1B,SAAO9mB,OAASukI,GAAiB,CAAE1kI,SAAU/Y,MAAKwxH,EAAWhwB,aAAcnlE,EAAQ1hB,OACrF,EAbMwmC,GAeAzkC,EAAa,IAAIC,KACrBtI,EACAm2H,EACA/zH,EACA0G,EACAwkC,EACA47F,EACAp8F,EACAnhD,MAAK65I,EAAmBxnH,iBAAiBhe,GACzCrU,MAAKmc,EAAoBrD,iBAAiB0xH,EAAYxiI,MAAOwiI,EAAY9pI,WAAYV,MAAKwxH,GAC1FxxH,MAAK65I,EAAmBpvH,WAAWpW,IAAS,KAC5CrU,MAAKq9I,EACLr9I,MAAKwxH,GAGDmsB,GAAY39I,MAAK49I,EAAiBlhI,GACxC,OAAO/U,EAAEsY,EAAE09H,GACb,CAKAH,GAAez8I,EAAmBs7B,EAA0B9tB,EAA2B4O,GAErF,MAAM0gI,EAAY79I,KAAKqD,IAAIy6I,OAAO99I,KAAKqD,IAAIugB,MAAMvI,OAAOnO,SAASnM,GAAY,2BAA4B,CAAEA,YAAWwN,cAGtH,GAAI8tB,EAAS,CACX,MAAM0hH,KAAY98C,OAAa9jF,EAAU,CAAEpE,SAAU/Y,MAAKwxH,IAE1D,SAAOzI,OAAsB/oH,MAAKwxH,EAAW,KAG3C,MAAMwsB,EAAiB3hH,EAAQ1H,aAAa9wB,QAC1C65I,MAAmB37I,KAAQ6T,MAAOymB,EAAQzmB,MAAOqrC,QAAS5kB,EAAQ4kB,QAASk4F,QAAS98G,EAAQ88G,QAAShsH,SAAUkP,EAAQlP,aAAW,EAClI/oB,KAAIuV,IAhGQ,IAqGRskI,KAAY58C,MAAc,CAC9B28C,EACAD,EAAUl6I,QAAK65I,MAAmB56H,GAAKA,EAAE2c,eACxC57B,QACDO,KAAI,EAAErC,EAAGorB,KAAc0wH,EAAU31I,EAAE,gCAAiC,CAAEm0B,UAASlP,eAAW,EAC1FuwH,MAAmB,EAAE37I,EAAGorB,KAAc,IAAIsuG,KAAUp/F,EAASt7B,EAAWosB,KAAS,EACjF/oB,KAAII,GAAUq5I,EAAU31I,EAAE,4BAA6B,CAAE1D,aAM3D,SAAO0U,OAAS+kI,EAAW,CAAEz8C,aAAc,IAAIi6B,KAAUp/F,EAASt7B,EAAWoc,IAAWsiB,aAAa,EAEzG,CAIA,OAAK9wB,IAAiBC,QAAQL,EAAUA,WAKjC,MAJL4f,QAAQrO,MAAM,6CAA6C/e,gDAAwDwN,EAAUA,eAAY,EAElIiN,OAAU,uBAAwBigH,KAAUyiB,gBAGvD,CAKAN,GAAiBlhI,GACf,MAAMkyD,EAAY,CAChB,CAAEn4B,QAAS95B,KAAYs7E,SAAUv7E,IAgBnC,MAAO,CAAE3D,SAZQ+7B,MAASx3B,OAAO,CAC/BsxD,UAAWA,EACX/c,OAAQ7xD,MAAKwxH,EACbn9G,KAAM,kBASW8pI,qBALbA,EAAsBC,OAC1BxvE,EACA5uE,MAAKm9I,EACL,oBAGJ,iDA9IWD,EAAyB,sCAAzBA,EAAyBj8I,QAAzBi8I,EAAyBh8I,WAAA,SAAzBg8I,CAAyB,KChBtC,MAAMp6I,GAAW,CACfC,KAAK,EACLs7I,eAAe,GAUV,IAAMC,GAA4B,MAAnC,MAAOA,EAMXC,GAKAC,GAGAC,GAGA5E,GAGAh6I,YAAoB6+I,EAAmDC,GAAnD3+I,KAAA0+I,oBAAmD1+I,KAAA2+I,KAf/D3+I,KAAA2yF,YAAWr2E,OAAOsiI,OAC1B5+I,MAAAu+I,GAAqB,EAErBv+I,KAAAqD,OAAMtD,MAAS,CAAEu+I,gCAAgCx7I,IAGjD9C,MAAAw+I,KAAoBh3I,KAAU01I,IAG9Bl9I,MAAAy+I,KAAkBniI,OAAOoiC,OAGzB1+C,MAAA65I,KAAqBv9H,OAAOmqB,IAkB5BzmC,MAAA6+I,EAAqC,GAErC7+I,KAAA8+I,eAAcv3I,QAAO,IAAK,EAhBxBsc,OAAO,KACL,MAAMi7H,EAAc9+I,KAAK8+I,cACnBvoI,EAAkBvW,KAAK0+I,kBAAkBnoI,kBAC/CvW,KAAKqD,IAAI6E,EAAE,0BAA2B,CAAE42I,cAAavoI,oBAC/CuoI,GAAevoI,IAGrBvW,KAAKqD,IAAI6E,EAAE,uBAAoB,EAE/B6kB,OAAU,IAAM/sB,KAAK++I,kBAAgB,EAEzC,CAGAF,GAIA3vG,WACElvC,KAAK8+I,YAAYz1I,KAAI,GAErBrJ,KAAKgI,MAAQkS,SAASla,KAAK2+I,GAAGzqG,cAActG,aAAa,cAC3D,CAEAmxG,iBAEE/+I,MAAKy+I,EAAgB3vD,QAKrB,IAAIkwD,EAAmBh/I,MAAKy+I,EAC5B,MAAMntH,EAActxB,MAAK65I,EAAmB3yG,WAI5C,UAAYnmC,EAAWkxB,KAAe1xB,OAAOC,QAAQ8wB,GAAc,CACjE,MAAMk5G,EAA8B,IAC/Bv4G,EAAWO,UACdzxB,UAAWA,EACXyjD,SAAU,IAAIq7C,MAAgB,GAC9B+6B,KAAM,IAAI8hB,IAEZ18I,MAAK6+I,EAAiBnyI,KAAK89H,GAC3B,MAAMj8H,EAAY0jB,EAAWO,UAAU5I,eAAerb,UAElDI,IAAiBmnB,aAAavnB,GAEhCywI,EAAmBh/I,MAAKi/I,EAAaj/I,MAAKy+I,EAAiBxsH,EAAYu4G,GAC9D77H,IAAiBuwI,WAAW3wI,GAErCywI,EAAmBh/I,MAAKy+I,EAGxBz+I,MAAKm/I,EAAiBH,EAAkB/sH,EAAYu4G,EAExD,CACF,CAEA/yH,cACE,UAAW+yH,KAAexqI,MAAK6+I,EAC7BrU,EAAYhmF,SAAS9sC,UACzB,CAEAunI,GAAa3wD,EAAgCr8D,EAAwBu4G,GACnE,MAAMmT,EAAY39I,MAAKw+I,EAAkBvB,aAAazS,EAAav4G,EAAWO,UAAU5I,gBACxF,IAAIw1H,EAAc,IAAIC,GAAmB,KAAM/wD,EAAcqvD,GAC7D,OAAI1rH,EAAWQ,gBACb2sH,EAAcp/I,MAAKs/I,EAAgBF,EAAantH,EAAWQ,gBACtD2sH,EAAYG,WACrB,CAEAJ,GAAiB7wD,EAAgCr8D,EAAwBu4G,GACvE,MAAMlkC,EAAar0E,EAAWO,UAAU5I,eACxC5pB,KAAKqD,IAAI6E,EAAE,kBAAmB,CAAEo+F,eAGhC,MAAMq3C,EAAY39I,MAAKw+I,EAAkBvB,aAAazS,EAAalkC,GACnE,IAAI84C,EAAc,IAAIC,GAAmB,KAAM/wD,EAAcqvD,GACzD1rH,EAAWQ,gBACb2sH,EAAcp/I,MAAKs/I,EAAgBF,EAAantH,EAAWQ,gBAE7D,MACM+sH,EAAgBx/I,MAAKy/I,EADLn5C,EAAW9vE,WAAaT,KAAiBymH,qBAAuBl2C,EAAW/3F,WAI3FmxI,EAAkC3gG,QAAQ4gG,YAAY9gG,GAAkB2gG,GAG1EE,GAAa/pH,WACfypH,EAAcp/I,MAAKs/I,EAAgBF,EAAaM,EAAY/pH,WAI9D,MAAMy7D,EAAepxF,MAAK4/I,EAAwBJ,EAAeJ,EAAYG,YAAaH,EAAYzB,WAIhGkC,EAA6BT,EAAYU,YAAYn6E,UAA+Co6E,iBAC1G,GAAiC,MAA7BF,EAAmC,CACrC,MAAMG,GAAchgJ,MAAKy/I,EAAmBn5C,EAAW/3F,WACvDvO,KAAKqD,IAAI6E,EAAE,gCAAiC,CAAE83I,iBAC9ChgJ,MAAK4/I,EAAwBI,GAAaH,EAA2BT,EAAYzB,UACnF,EAEgC,IAA5B39I,MAAKu+I,GAA+C,IAAfv+I,KAAKgI,QAAmD,IAApCiqB,EAAW9U,SAAS02G,cAC/E7zH,MAAKigJ,EAAc7uD,GACnBpxF,MAAKu+I,GAAqB,EAE9B,CAEA0B,GAAc7uD,GACZvoD,WAAW,KAET,MAAMqL,EAAgBk9C,EAAanrB,SAAS/xB,cAAcxgC,cAAc,SACpEwgC,IACFl0C,KAAK2yF,SAASr+C,aAAaJ,EAAe,YAAa,QACvDA,GAAe4a,QAAK,EAErB,IAEL,CAEA8wF,GAAwBJ,EAA0B53D,EAA6B+1D,GAC7E,OAAO/1D,EAAUq3B,gBAAgBugC,EAAe7B,EAClD,CAEA2B,GAAgBY,EAAkCvqH,GAChD,IAAIypH,EAAcc,EAClB,UAAWC,KAAexqH,EACxBypH,EAAcp/I,MAAKogJ,EAAehB,EAAae,GACjD,OAAOf,CACT,CAEAgB,GAAehB,EAAiCe,GACpCngJ,KAAKqD,IAAIC,KAAK,gBAAiB,CAAE68I,gBAA3C,MACMX,EAAgBx/I,MAAKy/I,EAAmBU,GACxCj6H,EAAMk5H,EAAYG,YAAYtgC,gBAAgBugC,EAAeJ,EAAYzB,WAC/E,OAAO,IAAI0B,GAAmBn5H,EAAKA,EAAIy/C,SAAS06E,eAAgB,KAClE,CAEAZ,GAAmBj7C,GAEjB,OADsBk3C,GAAgBl3C,KAEpCr2E,QAAQrO,MAAM,gCAAgC0kF,KACvC9gD,GAGX,iDAzKW46F,GAA4B55I,MAAAC,IAAAD,aAAA,oCAA5B45I,EAA4BnwG,UAAA,6CAA5BmwG,CAA4B,KA8KzC,MAAMe,GACJx/I,YACSigJ,EACAP,EAEA5B,GAHA39I,KAAA8/I,aACA9/I,KAAAu/I,cAEAv/I,KAAA29I,WACL,ECtMN,MAAM76I,GAAW,CACfC,KAAK,EACL8T,gCAAgC,GAO3B,IAAMypI,GAAsB,MAA7B,MAAOA,EADbzgJ,cAGEG,KAAAqD,OAAMtD,MAAS,CAACugJ,0BAAyBx9I,IAEzC9C,MAAAugJ,KAAajkI,OAAOkkI,OACpBxgJ,MAAAgX,KAAgBxP,KAAU4P,MAD1BmpI,GACAvpI,GAEAS,cACEzX,MAAKygJ,GAAUhsG,aACjB,CACAgsG,GAEA5pI,iCACE,MAAMlP,EAAI3H,KAAKqD,IAAIC,KAAK,kCACxBtD,MAAKygJ,EAAWzgJ,MAAKgX,EAAciD,qBAAqBpW,QACtDpD,KAAI,IAAMT,MAAKgX,EAAc2C,UAA0B,EACvDlX,MAAO+B,IAAkC,IAAxBA,GAAQk8I,cACzBp4I,UAAUvG,IACV,MAAMqd,EAAKpf,KAAKqD,IAAIC,KAAK,iCAAkC,KAAM,eACjEqE,EAAEO,EAAE,0CACJ,MAAM8P,EAAIhY,MAAKgX,EAAclP,SAASnE,OAChCsrI,EAASp7H,IAAW2F,8BAA8BxZ,MAAKgX,EAAcxQ,MAAM,QAAQwR,EAAE9V,QAAS,gBAAgB8V,EAAE9V,SACtH,GAAc,MAAV+sI,EAAgB,OAAO7vH,EAAG3F,IAAI,aAClCzZ,MAAKugJ,EAAW/5H,MAAM,CAAEm6H,YAAa1R,IACrC7vH,EAAG3F,IAAI,mBAAmBw1H,IAAQ,GAEpCtnI,EAAE8R,KACJ,iDA3BW6mI,EAAsB,sCAAtBA,EAAsBr/I,QAAtBq/I,EAAsBp/I,WAAA,SAAtBo/I,CAAsB,wECT3B57I,MAAA,cAAsBA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAkkG,YAAW,GAAEl8I,MAAA,wBAAyCA,QACrFA,MAAA,cAAsBA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAArP,oBAAmB,GAChD3oC,MAAA,wBACAA,MAAA,kCACFA,QACAA,MAAA,cAAsBA,MAAA,mBAAAA,MAAA6yC,GAAA,MAAAmF,EAAAh4C,MAAA,UAAAA,MAASg4C,EAAAmkG,UAAS,GAAEn8I,MAAA,wBAA2CA,cALzCA,oBAAA,8BAE1CA,MAAA,GAAAA,MAAA,IAAAA,MAAA,sCAC4BA,MAAA,GAAAA,MAAA,6CAEYA,MAAA,GAAAA,YAAA,2DAb5CA,MAFJ,QAEIA,CAFC,aAEDA,CADgG,YAE9FA,MAAA,6CAEAA,MAAA,gBAAqCA,MAAA,eAEzCA,YACAA,MAAA,qBACEA,MAAA,GAAAo8I,GAAA,uBASJp8I,2CAjBqBA,QAAoDA,MAApD,WAAAg4C,EAAA/1B,WAAAU,YAAAq1B,EAAA1d,cAAoDt6B,CAAD,oBAAAy4C,GAElEz4C,MAAA,GAAAA,MAAA,IAAAA,MAAA,IAAAA,MAAA,0CC0BD,IAAMq8I,GAA4B,MAAnC,MAAOA,EAMXlhJ,YACU09C,EACA72C,EACApB,EACA07I,EACAxjG,EACAyjG,GALAjhJ,KAAAu9C,YACAv9C,KAAA0G,cACA1G,KAAAsF,aACAtF,KAAAghJ,oBACAhhJ,KAAAw9C,mBACAx9C,KAAAihJ,mBAXVjhJ,KAAAU,cAAag9C,SAEL19C,KAAAs+C,qBAAoBhiC,OAAO6J,IACzBnmB,KAAA2mB,SAAW3mB,KAAKs+C,kBAAkB33B,SAiB5C3mB,MAAAkhJ,KAA0BxsI,OAAS,IAE1B1U,KAAKghJ,kBAAkBp3G,8BAGtB5pC,KAAAg/B,eAActqB,OAAS,IACxB1U,KAAK0G,YAAYs4B,YAAYh/B,KAAKU,aAAlCV,GACN2lB,GAAaC,MAEhB5lB,KAAAkE,SAAWlE,KAAKsF,WAAWpB,QAX3B,CAEAg9I,GAWAN,YACE5gJ,KAAKghJ,kBAAkBp2G,mBAAkB,EAC3C,CAEAi2G,UACE7gJ,KAAKghJ,kBAAkBp2G,mBAAkB,EAC3C,CAEAyC,oBACE,MAAM8zG,EAAkBnhJ,MAAKkhJ,IAC7B,GAA+B,IAA3BC,EAAgBn3I,OAClB,OAAOhK,KAAKghJ,kBAAkBh2G,iCAAgC,GAGhE,MAAMo2G,EAAsBphJ,KAAKihJ,iBAAiB5uH,iBAAiB8uH,EAAgB,MACnF,GAAIA,EAAgBn3I,OAAS,EAAG,CAK9B,MAAMilC,EAAsC,CAC1C1pC,OALwC,CACxC7E,WAAYV,KAAKU,aACjBK,UAAWogJ,EAAgB,IAI3B9uH,iBAAkB,CAChBnuB,SAAUk9I,EAAoBl9I,SAC9Bq0C,SAAU6oG,EAAoB7oG,UAEhCqC,iBAAiB,EACjBhB,mBAAoBunG,GAEtBnhJ,KAAKu9C,UAAU9sC,KAAKoqC,GAAkC,CACpDkD,WAAW,EACX7yC,KAAM+jC,EACNuO,iBAAkBx9C,KAAKw9C,iBACvBQ,MAAO,SAEX,MACEh+C,KAAKu9C,UAAU9sC,KAAKs+B,GAAoC,CACtDgP,WAAW,EACX7yC,KAAM,CAAEqkC,oBAAoB,GAC5BiO,iBAAkBx9C,KAAKw9C,iBACvBQ,MAAO,SAGb,iDA3EW+iG,GAA4Br8I,MAAAC,OAAAD,MAAAiM,KAAAjM,MAAAkM,KAAAlM,MAAAmM,IAAAnM,mBAAAoM,IAAA,oCAA5BiwI,EAA4B5yG,UAAA,gCAAAkC,OAAA,CAAA3vC,WAAA,kBAAA0tC,MAAA,EAAAC,KAAA,EAAAC,OAAA,+LAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GD/BzC9pC,MAAA,EAAA28I,GAAA,iBAAA38I,MAAA+pC,EAAAvqC,WAAAiJ,UAAAshC,EAAAvqC,WAAAkJ,QAAA,qBCuBQqiC,MAAe1+B,MACfotC,MAAantC,wBACb49B,MAAa39B,MACb+8B,GACAszG,MACA5xG,IAAex+B,MAAAo/B,OAAA,uPAGVywG,CAA4B,2FCdnCr8I,MAAA,iBAWEA,MAFA,wBAAAs7C,GAAAt7C,MAAAiiD,GAAA,MAAAhN,EAAAj1C,QAAA,OAAAA,MAAgBi1C,EAAA4nG,YAAWC,KAAQ7nG,EAAA8nG,WAAAzhG,GAAqB,KAAI,EAE5Dt7C,CAF6D,wBAAAs7C,GAAAt7C,MAAAiiD,GAAA,MAAAhN,EAAAj1C,QAAA,OAAAA,MAC7Ci1C,EAAA4nG,YAAWC,KAAQ7nG,EAAA8nG,WAAAzhG,GAAqB,KAAI,EAC5Dt7C,CAD6D,iBAAAs7C,GAAAt7C,MAAAiiD,GAAA,MAAAhN,EAAAj1C,QAAA,OAAAA,MACpDi1C,EAAA4nG,YAAWC,KAAQ7nG,EAAA8nG,WAAAzhG,GAAqBrG,EAAA+nG,WAAU,GAE3Dh9I,MAAA,cAAUA,MAAA,GACZA,kCAVEA,MAAA,YAAAi1C,EAAA4nG,YAAAI,aAAA,IAIAj9I,MAHA,WAAAi1C,EAAAhzB,WAGAjiB,CAHuB,iBAAAi1C,EAAA4nG,YAAA58H,QAGvBjgB,CAFsC,gBAAAi1C,EAAAhzB,WAEtCjiB,CAD4B,gBAAAi1C,EAAA4nG,YAAAK,cAMlBl9I,MAAA,GAAAA,MAAAi1C,EAAA4nG,YAAAM,oDAMZn9I,MAAA,YAKEA,MAAA,yBAAAA,MAAAslD,GAAA,MAAArQ,EAAAj1C,QAAA,OAAAA,MAAAi1C,EAAAmoG,aAA6B,EAAI,GAG/Bp9I,MADF,WACEA,CAD0C,eACUA,MAAA,mBAAAA,MAAAslD,GAAA,MAAArQ,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAA+nG,SAAS/nG,EAAA4nG,YAAWC,MAAM,GACrF98I,MAAA,cAAUA,MAAA,UACZA,UACAA,MAAA,eAAoDA,MAAA,mBAAAA,MAAAslD,GAAA,MAAArQ,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAAooG,WAAWpoG,EAAA4nG,YAAWC,MAAM,GACvF98I,MAAA,cAAUA,MAAA,YACZA,UACAA,MAAA,eAAoDA,MAAA,iBAAAs7C,GAAAt7C,MAAAslD,GAAA,MAAArQ,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAA8nG,WAAAzhG,GAAkB,GAC7Et7C,MAAA,cAAUA,MAAA,YAEdA,YACAA,MAAA,kCACFA,gCAlBEA,MAAA,oBAAAi1C,EAAA4nG,YAAAS,UAAA,IAiBiDt9I,MAAA,IAAAA,MAAA,YAAAA,MAAA,KAAAi1C,EAAA4nG,YAAAU,UAAAv9I,iDAMnDA,MAAA,yBAEEA,MAAA,oBAAAA,MAAAmsH,GAAA,MAAAl3E,EAAAj1C,QAAA,OAAAA,MAAUi1C,EAAAuoG,oBAAmB,GAM/Bx9I,gCAFEA,MAHA,WAAAi1C,EAAAwoG,aAAAnjH,YAGAt6B,CAHqC,WAAAi1C,EAAAhzB,YAAAgzB,EAAAxtC,YAAAgB,UAAAwsC,EAAAxtC,YAAAiB,QAGrC1I,CAFsE,iBAAAi1C,EAAAwoG,aAAAnjH,YAAA,iDAEtEt6B,CADiG,gBAAAi1C,EAAAhzB,YAAAgzB,EAAAxtC,YAAAgB,UAAAwsC,EAAAxtC,YAAAiB,oCASjG1I,MADF,UACEA,CAD+C,cACrCA,MAAA,iBACZA,gCAFsBA,MAAA,QAAAi1C,EAAAyoG,4DAOtB19I,MAAA,eAAwGA,MAAA,mBAAAA,MAAA+kH,GAAA,MAAA9vE,EAAAj1C,QAAA,OAAAA,MAASi1C,EAAA0oG,cAAa,GAC5H39I,MAAA,cAAUA,MAAA,aACZA,kCAFgFA,MAAA,WAAAi1C,EAAAhzB,uCAU5EjiB,MAAA,YACEA,MAAA,gCACFA,8BADiDA,cAAA,YAAAA,MAAA,IAAAi1C,EAAAwoG,aAAAG,kBAAA59I,QCzD3D,MAAM5B,GAAW,CACfC,KAAK,EACLw/I,WAAW,EACXC,cAAc,GA0BT,IAAMC,GAAmB,MAA1B,MAAOA,EAWX5I,GACA6I,GACA/gI,GACAghI,GAKAx6H,GACAy6H,GACAC,GA8BAC,GAYAC,GACAC,GACAhsI,GAEAnX,YACUukC,EACA6+G,EACA1lG,EACAC,GAHAx9C,KAAAokC,UACApkC,KAAAijJ,iBACAjjJ,KAAAu9C,YACAv9C,KAAAw9C,mBArEVx9C,KAAAqD,OAAMtD,MAAS,CAAC0iJ,uBAAsB3/I,IAKtC9C,KAAAU,cAAag9C,SACb19C,KAAAgI,SAAQ01C,SAEE19C,KAAAyG,cAAa6V,OAAOC,KAC9Bvc,MAAA65I,KAAqBv9H,OAAOmqB,IAC5BzmC,MAAA0iJ,KAAiBpmI,OAAO6J,IACxBnmB,MAAA2hB,KAAarF,OAAOE,MACpBxc,MAAA2iJ,KAAsBn7I,KAAU84I,IAEhCtgJ,KAAAysG,UAAW,EACXzsG,KAAA8hJ,aAAuB,EAEvB9hJ,MAAAmoB,KAAY7L,OAAO8L,KACnBpoB,MAAA4iJ,EAAmB5iJ,MAAKmoB,EAAU4yB,UAAU9sB,KAAai1H,iBACzDljJ,MAAA6iJ,EAAyB7iJ,MAAKmoB,EAAU4yB,UAAU9sB,KAAak1H,uBAG/DnjJ,KAAAmM,UAAYnM,KAAKyG,WAAWvC,SAG5BlE,KAAAmiJ,cAAazmI,OAAY,aAAc,KACrC,MAAMoH,EAAI9iB,MAAK65I,EAAmBx3G,sBAC5B7gB,EAAWsB,EAAEsgI,SACbC,ECjDJ,SAAUC,GAAyBC,GAYvC,OAXiBA,EACd92I,MAAM,MACN+Y,OAAO,CAAChhB,EAAQg/I,KACf,IAAKA,EACH,OAAOh/I,EACT,MAAMi/I,EAAeD,EAAmB/2I,MAAM,KAG9CjI,SAFai/I,EAAa,IACQ,SAApBA,EAAa,GAEpBj/I,GACN,GAEP,CDoCuB8+I,CAAyBxgI,EAAEsgI,UAE9C,MAAO,CACLM,UAAW5gI,EAAEwf,WACbqhH,eAAgB7gI,EAAE8gI,gBAClB5kH,YAAalc,EAAE+gI,aACfvB,iBAAkBx/H,EAAEghI,iBACpBtiI,WACAuiI,UAAWV,EAAWp1H,KAAai1H,kBAAoBljJ,MAAK4iJ,IAC5DoB,UAAWX,EAAWp1H,KAAak1H,wBAA0BnjJ,MAAK6iJ,OAItE7iJ,KAAA2mB,YAAWjL,OAAY,WAAY,IAAM1b,MAAK0iJ,EAAe/7H,WAAWU,YAGxErnB,KAAAoiJ,kBAAiB1mI,OAAY,iBAAkB,ICvG3C,SAAUuoI,GAAkBC,EAAiBn9I,GACjD,GAAKm9I,EACL,OAAOn9I,EAAUyJ,QAAQ,6BACrB,aAAa0zI,EAAQC,uBACJD,EAAQE,cACxBF,EAAQ91E,OAAS,aAAa81E,EAAQ91E,SAAW,KACjD81E,EAAQxuD,OAAS,aAAawuD,EAAQxuD,SAAW,KACjDwuD,EAAQ/jJ,KAAO,WAAW+jJ,EAAQ/jJ,OAAS,KAC3C+jJ,EAAQjnD,MAAQ,YAAYinD,EAAQjnD,QAAU,GACrD,CDgGWgnD,CADMjkJ,KAAKokC,QAAQigH,WAAWrkJ,KAAKU,cACXV,MAAK2hB,IAGtC3hB,MAAA8iJ,KAAsBtnI,OAAmB,sBAAsB,GAC/Dxb,KAAAuhJ,aAAY7lI,OAAY,YAAa,KACnC1b,MAAK8iJ,IACL,MAAMpiJ,EAAaV,KAAKU,aAClByL,EAAYnM,KAAKyG,WAAWvC,WAGlC,OCxGE,SAAUogJ,GAAa9C,EAAiBt9I,EAAwB09I,GACpE,MAAML,EAAuB,CAC3BC,OACA78H,QAASi9H,EAAe,iCAAmC,wBAC3DD,aAAc,YAAWC,EAAe,iBAAmB,IAC3DC,SAAU,gBACVG,UAAW,GACXC,cAAUlyI,EACV6xI,gBAEF,IAAKJ,EAAQ,OAAOD,EAEpBA,EAAU58H,aAAU5U,EACpB,MAAM0pB,EAAS,IAAIlsB,KAAarJ,GAChCq9I,EAAUU,SAAWxoH,EAAO2M,aAAao7G,EAAK5gJ,WAAW2jJ,MAEzD,MAAMC,EAAW/qH,EAAO2M,aAAao7G,EAAK5gJ,WAAW6jJ,UACrD,MAAiB,SAAbD,EACFjD,EAAUI,aAAe,WACH,YAAb6C,IACTjD,EAAUI,aAAe,cACzBJ,EAAUM,SAAW,UACrBN,EAAUS,UAAY,WAEjBT,CACT,CD+EW+C,CAFMtkJ,KAAKokC,QAAQsgH,YAAYhkJ,GAEZyL,EADuC,IAA3CnM,KAAKokC,QAAQr+B,IAAIrF,GAAYyJ,OAAOW,GACR,GAKpD9K,MAAA+iJ,KAAev7I,KAAUtE,GACzBlD,MAAAgjJ,KAAax7I,KAAUqV,OACvB7c,MAAAgX,KAAgBxP,KAAU4P,KAQ1B,CAEAm1C,qBAGGvsD,KAAK2kJ,SAASC,oBAA4B3yF,oBAAoBmG,eACjE,CAEAlpB,WAEElvC,MAAKgX,EAAcw2H,iBAAiB,IAAMxtI,MAAK6kJ,IACjD,CAEAptI,cACEzX,KAAK2kJ,SAASn+H,OAChB,CAEAuzH,iBACE/5I,KAAKysG,UAAYzsG,KAAKysG,QACxB,CAEAy1C,oBACE,MAAMxhJ,EAAaV,KAAKU,aAClBokJ,EAAY9kJ,KAAKokC,QAAQ2gH,cAAcrkJ,GACvCskJ,EAAkC,IACnCF,EACHG,SAAUH,EAAUG,SAEhBt9I,EAAI3H,KAAKqD,IAAIib,GAAG,oBAAqB,CAAEwmI,YAAWE,cACxDhlJ,KAAKokC,QAAQz2B,QAAQu3I,iBAAiBxkJ,EAAYskJ,GAClDr9I,EAAE8R,KACJ,CAEA4oI,cACE,MAAMniJ,EAAOF,KAAKokC,QAAQr+B,IAAI/F,KAAKU,cACnCV,MAAK2iJ,EAAoB9rI,iCACzB7W,MAAKgX,EAAcmuI,YAAY,CAAC,YAAYjlJ,EAAKiK,OAAOW,MAC1D,CAEA22I,WAAW/lG,GACT,MAAMi2E,EAAS3xH,KAAK2kJ,SAASS,aAAeC,MAAeC,KACxC,iBAAf5pG,EAAMlpC,MAA+C,GAApBxS,KAAK8hJ,YAAsB9hJ,KAAKulJ,WAC7C,iBAAf7pG,EAAMlpC,MAA+C,GAApBxS,KAAK8hJ,YAAsB9hJ,KAAK2kJ,SAASn+H,QAC3D,UAAfk1B,EAAMlpC,MAAoBm/G,IACT,GAApB3xH,KAAK8hJ,YACP9hJ,KAAK8hJ,aAAc,GAEnB9hJ,KAAK2kJ,SAASn+H,QACdxmB,KAAK8hJ,aAAc,GAGzB,CAEAyD,WACE,MAAMC,EAAkBxlJ,KAAKylJ,eAAevxG,cAAcwxG,wBAC1D1lJ,KAAK2kJ,QAAU3kJ,KAAKu9C,UAAU9sC,KAAKzQ,KAAK2lJ,gBAAiB,CACvD5nG,WAAW,EACX2oB,aAAa,EACb0gB,cAAc,EACd9iB,cAAc,EACdijB,mBAAmB,EACnBrgB,SAAU,CACRyhB,IAAK,GAAG68D,EAAgB58D,WACxBH,KAAS+8D,EAAgB/8D,KAAO,IAA1B,MAERjrC,iBAAkBx9C,KAAKw9C,iBACvB2lB,WAAY,eAEhB,CAEAu+E,SAASF,GACP,MAAM9gJ,EAAaV,KAAKU,aAClBiH,EAAI3H,KAAKqD,IAAIib,GAAG,WAAY,CAAEkjI,SAEpC,GAAuB,IADVxhJ,KAAKokC,QAAQr+B,IAAIrF,GACrByJ,OAAOW,GAEd,YADAnD,EAAE8R,IAAI,8BAIR,MAAM1R,EAAiB,CACrB7F,MAAO,CACG,MAARs/I,EACI3iI,KAASohH,YAAYv/H,EAAYw/H,MAAax5B,aAAavmD,MAAO+/E,MAAatlG,SAASrb,QAAQ,GAChGV,KAASE,OAAOyiI,EAAK12I,MAG7B9K,KAAKijJ,eAAexyI,KAAK,KAAM,KAAM1I,EACvC,CAEAg6I,WAAWP,GACT,MAAMt9I,EAAWlE,KAAKyG,WAAWvC,WAC3Bsb,EAAQ,IAAIjS,KAAarJ,GAAUkiC,aAAao7G,EAAK5gJ,WAAWq8F,OAEjEt9E,QAAQ3f,MAAK2hB,EAAWnR,QAAQ,uBAAwB,CAAEgP,QAAOR,GAD3DwiI,EAAK12I,OAGhB9K,MAAKgjJ,EAAWpjI,OAAO5f,KAAKyG,WAAWlB,OAAO3B,MAAOs8H,MAAax5B,aAAavmD,MAAOqhG,EAAK12I,IAAI,GAAOxC,UAAU,KAC9GtI,KAAK2kJ,SAASn+H,QACdxmB,MAAK6kJ,GAAU,EAEnB,CAEAA,KACE,MAAMnkJ,EAAaV,KAAKU,aAClBR,EAAOF,KAAKokC,QAAQr+B,IAAIrF,GACxBiH,EAAI3H,KAAKqD,IAAIC,KAAK,YAAa,CAAE5C,aAAYR,OAAM8e,GAAI9e,EAAKiK,OAAOW,KACzE,GAAuB,IAAnB5K,EAAKiK,OAAOW,GACd,OAAOnD,EAAE8R,IAAI,aAEf,MAAMtR,EAAY,CAAC0W,KAASE,OAAO7e,EAAKiK,OAAOW,KAC/C9K,MAAK+iJ,EAAa//I,cAAcoF,KAAKC,UAAUF,IAC5CG,UAAUxE,IACT,MAAMsb,EAAKpf,KAAKqD,IAAIib,GAAG,eAAgB,CAAExa,aAEzC,IAAK9D,KAAKokC,QAAQr+B,IAAIrF,GACpB,OAAO0e,EAAG3F,IAAI,QAAQ/Y,2DAGxB,MAAMwB,EAAQ4B,EAAS0E,MAAM/H,IAAIkI,GAAKi9I,KAAQC,QAAQl9I,IACtD3I,KAAKokC,QAAQz2B,QAAQm4I,mBAAmBplJ,EAAYwB,EAAM,GAAGiI,OAAOkF,UACpErP,MAAK8iJ,EAAoBz5I,KAAI,GAC7B+V,EAAG3F,IAAI,eAAc,GAEzB9R,EAAE8R,IAAI,uBACR,iDApMWgpI,GAAmB/9I,MAAAC,KAAAD,MAAAiM,IAAAjM,MAAAkM,OAAAlM,aAAA,oCAAnB+9I,EAAmBt0G,UAAA,2BAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,eAII4C,qrDD7DhC1sC,MAHJ,eAGIA,CAH0E,UAG1EA,CAF2D,WAEGA,MAAA,mBAAAA,aAAA6yC,GAAA7yC,MAAS+pC,EAAAsrG,iBAAgB,GACrFr1I,MAAA,gBACEA,MAAA,GACFA,QACAA,MAAA,YACEA,MAAA,wBAEJA,UAkEAA,MA/DA,EAAAqhJ,GAAA,eA+DArhJ,CA/D8B,EAAAshJ,GAAA,0BAAAthJ,MA+D9BA,CA5C2B,GAAAuhJ,GAAA,yBA4C3BvhJ,CApBmC,GAAAwhJ,GAAA,YAoBnCxhJ,CAPkD,GAAAyhJ,GAAA,iBAYlDzhJ,MAAA,mCACFA,QAGIA,MAFJ,yBAEIA,CAFkG,YAElGA,CAD2B,aAEzBA,MAAA,GAAA0hJ,GAAA,cAKA1hJ,MAAA,aAEEA,MAAA,aAKVA,sBA7FQA,MAAA,GAAAA,MAAA,IAAA+pC,EAAAg+D,SAAA,+CAGA/nG,MAAA,GAAAA,MAAA,IAAA+pC,EAAA0zG,aAAAuB,WAAAh/I,MAAA,mCAKJA,MAAA,GAAAA,MAAA+pC,EAAA0zG,aAAA4B,UAAA,MA2CAr/I,MAAA,GAAAA,MAAA+pC,EAAA0zG,aAAAwB,eAAA,OAaAj/I,cAAA+pC,EAAA0zG,aAAA6B,WAAAv1G,EAAA2zG,iBAAA,OAOA19I,cAAA+pC,EAAAhoC,WAAAlB,OAAA0F,cAAA,OAK2BvG,cAAA,aAAA+pC,EAAA/tC,cAE2BgE,cAAA,UAAA+pC,EAAAg+D,SAAA,gBAGlD/nG,MAAA,GAAAA,MAAA+pC,EAAA0zG,aAAAG,iBAAA,OAO8B59I,MAAA,iDChD9B8qC,MAAa3+B,YACb+9B,MAAa99B,MACb2+B,MAAe1+B,MACf0/G,MACA41B,MACAvjG,MAAoB9xC,MACpB+vI,GACA9hG,GACAq/F,GACA5uG,IAAez+B,KACf49B,KACA6K,KACA4sG,MAAiCh2G,OAAA,iqEAG5BmyG,CAAmB,KE7CnB8D,GAAsB,MAA7B,MAAOA,UAA8BxvI,KAIzClX,YACU2mJ,EACAC,EACAhgJ,EACA29B,GAERtkC,QALQE,KAAAwmJ,gBACAxmJ,KAAAymJ,gBACAzmJ,KAAAyG,aACAzG,KAAAokC,UANVpkC,KAAAqD,OAAMtD,MAAS,CAACwmJ,yBAShB,CAEOG,UAAUhmJ,GACf,MAAMqH,EAAO/H,KAAKwmJ,cAAc/vI,UAGhCzW,KAAK+Z,cAAcvX,IACjBuF,EAAK4sB,aAAa9wB,QAChBpD,KAAI,IAAMsH,EAAK6N,QAAK,EACpBg/C,MAAU7sD,EAAK6N,QAIftN,UAAUyf,IACV/nB,KAAKymJ,cAAc3+H,aAAapnB,EAAYqnB,EAAO,IAMvD,MAAM4+H,EAAa5+I,EAAK4sB,aAAa9wB,QACnCpD,KAAI,KAAOsH,EAAKk5C,UAAO,EACvB2T,OAAW7sD,EAAKk5C,UAAO,EACvBpoC,MAAgBgnB,GAAKA,IAIjB+mH,EAAc5mJ,KAAKokC,QAAQyiH,eAAenmJ,GAGhDV,KAAK+Z,cAAcvX,OACjB6+F,MAAc,CAACslD,EAAYC,IAAc/iJ,QACvCgV,MAAgB,EAAEiuI,EAAW9/H,KAAgBA,GAAYi+H,SAAW6B,IACpEx+I,UAAUqf,IACV3nB,KAAKymJ,cAAc/+H,aAAahnB,EAAYinB,EAAO,IAMvD3nB,KAAK+Z,cAAcvX,IACjBuF,EAAK4sB,aAAa9wB,QAChBpD,KAAI,IAAMsH,EAAKg/I,gBAAqC,EACpD5lD,MAAqB,CAAC6lD,EAAU75I,IAAyE,MAA7DwzB,KAAkBsmH,qBAAqBD,EAAU75I,KAC7F7E,UAAUgF,IACV,MAAMpJ,EAAWlE,KAAKyG,WAAWvC,WACjClE,KAAKokC,QAAQz2B,QAAQu5I,2BAA2BxmJ,EAAY4M,EAAYpJ,EAAQ,GAItF,iDA7DWqiJ,GAAqB7hJ,MAAAC,IAAAD,MAAAiM,IAAAjM,MAAAkM,KAAAlM,MAAAmM,KAAA,sCAArB01I,EAAqBtlJ,QAArBslJ,EAAqBrlJ,WAAA,SAArBqlJ,CAAsB,KCJtBY,GAAwB,MAA/B,MAAOA,EAIXtnJ,YACUqpB,EACAk+H,EACAC,EACAC,GAHAtnJ,KAAAkpB,oBACAlpB,KAAAonJ,eACApnJ,KAAAqnJ,cACArnJ,KAAAsnJ,sBANVtnJ,KAAAqD,OAAMtD,MAAS,CAAConJ,4BAA2B,KAOvC,CAEGI,aAAa7mJ,EAAoBqH,EAAwBy/I,GAE9D,MAAM7/I,EAAI3H,KAAKqD,IAAIib,GAAG,gBAGhBmpI,EAAiBD,EAAU/kJ,OAAO,EAAG8L,YAAWm5I,iBACnD/4I,IAAiBC,QAAQL,KACtBm5I,GAGN1nJ,KAAKqD,IAAI6E,EAAE,2BAA2Bu/I,EAAez9I,aAAaw9I,EAAUx9I,SAAU,CAAE29I,gBAAiBF,IAGzG,UAAWpsI,KAAUosI,EAAgB,CACnC,MAAQpzI,KAAMtT,EAAWue,MAAO2S,EAAY1jB,YAAWoM,SAAUU,EAEjE,IAAImmF,EAAe7mF,EAKnB,GAAIpM,IAAcwnB,KAAiBomG,eAAiB36B,EAAc,CAChE,MAAM3yF,GAAQC,IAAkBC,YAAYhJ,IAAIgwB,KAAiBomG,eAC3D1/F,GAAYz8B,KAAKonJ,aAAatmJ,gBAAgBJ,EAAYK,GAChEsa,EAAOV,MAAQ6mF,EAAgB3yF,GAA6CkuH,mBAAmBv7B,EAAc/kE,GAC/G,CAGA,MAAMtP,GAAW8E,EAAW9U,SAASsiB,WAC/BzxB,GAAMhO,KAAKkpB,kBACX0+H,GAAW,IAAIppH,GAAsBz9B,EAAWwN,EAAWP,GAAImP,SAASpc,GAAYiN,GAAIikB,WAAWlxB,GAAY,IAAMiN,GAAIyc,YACzH8Q,GAAaL,GAAkBI,cAAcssH,GAAUr5I,GACvDs5I,GAAa7nJ,KAAKqnJ,YAAYhrH,QAAQ,CAAElP,YAAUxS,MAAO6mF,GAAgBjmE,IAE/ExzB,EAAK+/I,WAAW/mJ,EAAW8mJ,GAC7B,CAEA7nJ,KAAKsnJ,oBAAoB/wI,gBAAgBlN,KAAI,GAC7C1B,EAAE8R,KACJ,iDAlDW0tI,GAAwBziJ,MAAAC,IAAAD,MAAAiM,IAAAjM,MAAAkM,OAAAlM,MAAAmM,IAAA,sCAAxBs2I,EAAwBlmJ,QAAxBkmJ,EAAwBjmJ,WAAA,SAAxBimJ,CAAwB,KCJrC,MAAMrkJ,GAAW,CACfilJ,0BAA0B,GAIrB,IAAMC,GAAsB,MAA7B,MAAOA,UAA8BjxI,KAIzClX,cACEC,QAHFE,KAAAqD,OAAMtD,MAAS,CAACioJ,yBAAwBllJ,GAIxC,CAEAilJ,yBAAyBhgJ,EAAwBkgJ,GAC/C,MAAMtgJ,EAAI3H,KAAKqD,IAAIC,KAAK,4BAKxBtD,KAAK+Z,cAAcvX,IACjBylJ,EAAgB3/I,UAAUk/I,IAExB,MAAMU,EAAeV,EAAU/kJ,OAAO4G,GAAOA,EAAIq+I,YAGjD//I,EAAEO,EAAE,uBAAuBggJ,EAAal+I,mBACxC,MAAMm+I,EAAkCpgJ,EAAKg/I,cACvCqB,EAAkC,GACxC,UAAa/zI,KAAMtT,EAAW4Z,WAAWutI,EACvCE,EAAUrnJ,GAAa4Z,EAEzB,MAAM8lB,EAAUE,KAAkBsmH,qBAAqBkB,EAAWC,GACnD,MAAX3nH,GACF94B,EAAEO,EAAE,gCAAgC3H,OAAOkF,KAAKg7B,GAASz2B,SAAU,CAAEy2B,UAAS0nH,YAAWC,cAKzFrgJ,EAAKsgJ,WAAW5nH,IAEhB94B,EAAEO,EAAE,sBAAuB,CAAEigJ,YAAWC,cAI1CzgJ,EAAEO,EAAE,yBACJ,UAAam0B,UAAS/c,WAAW4oI,EAC/BzsB,KAAUze,QAAQ3gF,EAAS/c,EAAMnC,SAASsiB,YAG5C93B,EAAEO,EAAE,kBACJ,UAAam0B,aAAa6rH,EACxB7rH,EAAQunG,wBAAsB,IAIpCj8H,EAAE8R,KACJ,iDAnDWuuI,EAAqB,sCAArBA,EAAqB/mJ,QAArB+mJ,EAAqB9mJ,WAAA,SAArB8mJ,CAAsB,KCCnC,MAAMllJ,GAAW,CACfC,KAAK,EACLulJ,oBAAoB,EACpBp5G,UAAU,EACTq5G,kBAAqB,GAkBjB,IAAMC,GAA0B,MAAjC,MAAOA,EAOXC,GAEAC,GACAC,GACA9O,GACAroB,GAGAo3B,GACAC,GACAC,GAEAjpJ,cAlBAG,KAAAU,cAAag9C,SACb19C,KAAAgI,SAAQ01C,SAER19C,KAAAqD,OAAMtD,MAAS,CAACyoJ,8BAA6B1lJ,IAG7C9C,MAAAyoJ,KAAgBnsI,OAAOhG,IAEvBtW,MAAA0oJ,KAA0BpsI,OAAOysI,MACjC/oJ,MAAA2oJ,KAAsBrsI,OAAOwtB,IAC7B9pC,MAAA65I,KAAqBv9H,OAAOmqB,IAC5BzmC,MAAAwxH,KAAYl1G,OAAOw4B,OAGnB90C,MAAA4oJ,KAA4BphJ,KAAU2/I,IACtCnnJ,MAAA6oJ,KAAiBrhJ,KAAUwgJ,IAC3BhoJ,MAAA8oJ,KAAethJ,KAAU++I,IAIlBvmJ,KAAA+H,KAAO/H,MAAKyoJ,EAAchyI,SAFjB,CAIhBy4B,WACE,MAAMxuC,EAAaV,KAAKU,aAClBiH,EAAI3H,KAAKqD,IAAIC,KAAK,WAAY,CAAE5C,eACtCV,MAAK65I,EAAmBliI,KAAKjX,GAC7BV,MAAK0oJ,EAAwBM,qBAAqBtoJ,GAAcV,MAAK65I,EACrE75I,MAAK2oJ,EAAoBhxI,KAAKjX,GAE9B,MAAMuoJ,EAAUjpJ,MAAKkpJ,EAAqBxoJ,GAG1CuoJ,EAAQplJ,QAAKsb,MAAK,IAAI7W,UAAUk/I,GAAaxnJ,MAAK4oJ,EAA0BrB,aAAa7mJ,EAAYV,KAAK+H,KAAMy/I,IAEhHxnJ,MAAK6oJ,EAAed,yBAAyB/nJ,KAAK+H,KAAMkhJ,GAGxDjpJ,MAAK8oJ,EAAapC,UAAUhmJ,GAE5BiH,EAAE8R,KACJ,CAEAhC,cACEzX,MAAK65I,EAAmB5xG,mBAC1B,CAEAihH,GAAqBxoJ,GACnB,MAAMiH,EAAI3H,KAAKqD,IAAIC,KAAK,qBAAsB,KAAM5C,GAC9CqH,EAAO/H,KAAK+H,KAEZm/B,EAAWlnC,MAAK65I,EAAmB3yG,SAInC+gH,KAHYhnD,OAAa/5D,EAAU,CAAEnuB,SAAU/Y,MAAKwxH,IAIvD3tH,QACCpB,MAAO4Y,GAAoB,MAAVA,GAAkB9a,OAAOkF,KAAK4V,GAAQrR,OAAS,IAAC,EACjEvJ,KAAI+mJ,IACF,MAAMnsI,EAA2B9a,OAAOC,QAAQgnJ,GAC7C/mJ,IAAI,EAAE4T,EAAMiL,MACX,MAAMooI,EAAa3/I,EAAK+yH,SAAS3tC,eAAe94E,GAEhD,MAAO,CACLA,OACAiL,QACA/Q,UAAW+Q,EAAMkT,UAAU5I,eAAerb,UAC1CoM,MAAO2E,EAAM3E,MACb+sI,aACArrH,QAPcqrH,EAAa3/I,EAAK+yH,SAASzmH,GAAQ,QAUvD,OAAArU,KAAKqD,IAAIqE,IAAI,mBAAoB,CAAEhH,aAAY2a,WACxCA,KAGb,OAAO1T,EAAEyR,QAAQ6uI,EACnB,iDA7EWO,EAA0B,oCAA1BA,EAA0Br6G,UAAA,mCAAAkC,OAAA,CAAA3vC,WAAA,iBAAAsH,MAAA,aAAAwZ,SAAA,CAAA9c,MANxB,CACP+hC,GACAqD,GACAxzB,MACH83B,MAAA,EAAAC,KAAA,EAAAC,OAAA,4DAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICpCL9pC,MAAA,YACEA,MAAA,4BACFA,eAF2BA,MAAA,YAAA+pC,EAAA1mC,MACHrD,QAA4BA,MAA5B,aAAA+pC,EAAA/tC,aAA4BgE,CAAD,QAAA+pC,EAAAzmC,yBD2B3C46C,MAAWj+C,YACXk+C,MAAmBl+C,MACnB89I,IAAmBnyG,OAAA,kEAQdk4G,CAA0B,KE/BjC,MAAOW,GAGX,kBAAOC,CAAeC,GACpB,MAAMC,EAA4B,GAClC,UAAW3uI,KAAS0uI,EAAUtpH,OAE5BupH,EADmB3uI,EAAM4uI,WAAW9oJ,IAAI+oJ,GAAaA,EAAU5mJ,OAAOse,QAC/CvG,EAAM/X,MAE/B,OAAO0mJ,CACT,ECRI,MAAOG,GAGX,sBAAOC,CAAgB/oJ,GACrB,MAAMgpJ,EAAkC,GAExC,UAAYt1I,EAAM6P,KAAW3jB,OAAOC,QAAQG,GAAa,CACvD,MAAM6R,EAAO0R,EAAO1V,KACO,MAAvBm7I,EAAcn3I,KAChBm3I,EAAcn3I,GAAQ,IAExBm3I,EAAcn3I,GAAM6B,GAAQ80I,GAAaC,YAAYllI,EACvD,CACA,OAAOylI,CACT,EChBI,MAAOC,GAUX,kBAAOC,CAAYtqI,GACjB,MAAMoqI,EAAgBF,GAAiBC,gBAAgBnqI,EAAO3e,YACxDkpJ,EAAc9pJ,KAAK+pJ,cAAcxqI,EAAOlQ,UAY9C,MAVgC,CAC9BzO,WAAY+oJ,EACZxpJ,KAAMof,EAAOpf,KACb2K,GAAIyU,EAAOzU,GACXk/I,MAAOzqI,EAAOyqI,MACdx7I,KAAM+Q,EAAO/Q,KACby7I,QAAS1qI,EAAO0qI,QAChBC,IAAK3qI,EAAO2qI,IACZ76I,SAAUy6I,EAGd,CAEQ,oBAAOC,CAAcvjD,GAC3B,OAAgB,MAAZA,EAA2B,KAEbA,EAAS/lG,IAAI8e,GAAUqqI,GAAaC,YAAYtqI,GAEpE,EC9BI,MAAO4qI,GAIX,kBAAOC,CAAYlqJ,GAOjB,MAJsC,CACpCiK,OAHcy/I,GAAaC,YAAY3pJ,EAAKiK,QAI5CvB,OAAQ1I,EAAK0I,OAGjB,4JCDIlE,MAHA,iCAGAA,CAD8B,aAD5BA,MAAA,QAAAA,MAAA,EAAAmpC,iBCNR,MAAM/qC,GAAW,IACZunJ,KACHC,oBAAoB,GAcf,IAAMC,GAAkC,MAAzC,MAAOA,EAIXpiI,GAEAqiI,GAEA3qJ,cANAG,KAAAqD,OAAMtD,MAAS,CAAEwqJ,sCAAsCznJ,IAEvD9C,MAAAmoB,KAAY7L,OAAO8L,KAEnBpoB,MAAAwqJ,KAAkBhjJ,KAAUijJ,MAMlBzqJ,KAAAwhB,SAAWxhB,MAAKwqJ,EAAgBE,kBAAkB1qJ,MAAKmoB,EAAUmiI,sBAH/DtqJ,KAAKqD,IAAIC,KAAK,cAC1B,iDAVWinJ,EAAkC,oCAAlCA,EAAkCp8G,UAAA,8CAAAC,MAAA,GAAAC,KAAA,EAAAC,OAAA,qEAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ID1B3C9pC,MAFJ,aAEIA,CAFM,oBAENA,CADe,oBACCA,MAAA,gDAClBA,UAEEA,MADF,qBACEA,CADgB,OAEdA,MAAA,iOAEFA,QACAA,MAAA,OACEA,MAAA,yDACAA,MAAA,QACAA,MAAA,+EACAA,MAAA,UAAoDA,MAAA,cAAOA,QAAKA,MAAA,uBAClEA,QACAA,MAAA,QAAGA,MAAA,uDAAgDA,QACnDA,MAAA,GAAAimJ,GAAA,cAAA5kG,IAOJrhD,iBAPIA,MAAA,IAAAA,MAAA+pC,EAAAjtB,4BCKIguB,MAAa7qC,wBACb8qC,MACAb,MACAc,IACAk7G,MAA6B97G,cAAA,YAGxBy7G,CAAkC,8CCFxC,IAAMM,GAA4B,MAAnC,MAAOA,EAMXhrJ,YACUmvC,EACAloC,EACAL,GAFAzG,KAAAgvC,SACAhvC,KAAA8G,uBACA9G,KAAAyG,aARVzG,KAAA4E,aAAeA,GAEL5E,KAAAqF,YAAcrF,KAAK8G,qBAAqBlB,eAAe5F,KAAKyG,WAAWlB,OAAON,QAC9EjF,KAAA4iB,QAAU5iB,KAAKyG,WAAWlB,OAAOC,kBAOzCxF,KAAKgvC,OAAOyM,gBAAgBnzC,UAAUozC,KACpC,EAAIC,MAAQD,IACVA,EAAME,gBAAc,EAE1B,CAEAx2C,eAAeC,GACbrF,KAAK8G,qBAAqB1B,eAAeC,EAAarF,KAAKyG,WAAWlB,OAAON,OAAQjF,KAAKyG,YAC1FzG,KAAKmvC,aACP,CAEQA,cACNnvC,KAAKgvC,OAAOxoB,OACd,iDAxBWqkI,GAA4BnmJ,MAAAC,OAAAD,MAAAiM,GAAAjM,MAAAkM,KAAA,oCAA5Bi6I,EAA4B18G,UAAA,gCAAAC,MAAA,GAAAC,KAAA,GAAAC,OAAA,+LAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICxBrC9pC,MAFJ,aAEIA,CAFM,oBAENA,CADe,oBACCA,MAAA,wBAA8CA,QAC9DA,MAAA,uBAAmBA,MAAA,wBACrBA,UAGIA,MAFJ,uBAEIA,CAFmD,mBAEnDA,CADmB,sBACMA,MAAA,0BAAS+pC,EAAArpC,eAAAqpC,EAAA7pC,aAAAC,KAAiC,GAGjEH,MAAA,iBAA0BA,MAAA,iBAAUA,QACpCA,MAAA,aAAuBA,MAAA,0BAAmDA,QAC1EA,MAAA,WAAMA,MAAA,0BACRA,UACAA,MAAA,sBAAyBA,MAAA,0BAAS+pC,EAAArpC,eAAAqpC,EAAA7pC,aAAAE,KAAiC,GAGjEJ,MAAA,iBAA0BA,MAAA,qBAAcA,QACxCA,MAAA,aAAuBA,MAAA,0BAAmDA,QAC1EA,MAAA,WAAMA,MAAA,0BACRA,UACAA,MAAA,sBAAyBA,MAAA,0BAAS+pC,EAAArpC,eAAAqpC,EAAA7pC,aAAAG,OAAmC,GAGnEL,MAAA,iBACAA,MAAA,aAAuBA,MAAA,0BAAqDA,QAC5EA,MAAA,WAAMA,MAAA,0BAIdA,uBA5BoBA,MAAA,GAAAA,YAAA,oCACGA,MAAA,GAAAA,YAAA,oCAKfA,MAAA,GACAA,MADA,gBAAA+pC,EAAA7rB,QAAA6rB,EAAA7pC,aAAAC,MACAH,CADgD,UAAAA,MAAA,GAAAmpC,GAAAY,EAAAppC,gBAAAopC,EAAA7pC,aAAAC,OAGzBH,MAAA,GAAAA,YAAA,0CACjBA,MAAA,GAAAA,YAAA,yCAGNA,MAAA,GACAA,MADA,gBAAA+pC,EAAA7rB,QAAA6rB,EAAA7pC,aAAAE,MACAJ,CADgD,UAAAA,MAAA,GAAAmpC,GAAAY,EAAAppC,gBAAAopC,EAAA7pC,aAAAE,OAGzBJ,MAAA,GAAAA,YAAA,0CACjBA,MAAA,GAAAA,YAAA,yCAGNA,MAAA,GACAA,MADA,gBAAA+pC,EAAA7rB,QAAA6rB,EAAA7pC,aAAAG,QACAL,CADkD,UAAAA,MAAA,GAAAmpC,GAAAY,EAAAppC,gBAAAopC,EAAA7pC,aAAAG,SAG3BL,MAAA,GAAAA,YAAA,4CACjBA,MAAA,GAAAA,YAAA,2DDPN8qC,MAAa3+B,8BACb+mC,GAAa9mC,YACborC,MACAtN,MAAa79B,MACb2+B,IAAe1+B,MAAAs/B,OAAA,2QAGVu6G,CAA4B,0MEXjCnmJ,MAAA,mDAAuBA,MAAA,WAAAopC,EAAA3gB,oCADzBzoB,MAAA,EAAAomJ,GAAA,KAAApmJ,MAAA,IAAAqmJ,uCAQFrmJ,MAAA,gBAAgGA,MAAA,YAAKA,8BAArEA,MAAA,yCAAAopC,EAAAnnB,WAAAW,gCAGhC5iB,MAAA,gBAAmEA,MAAA,iBAAUA,kDAe7EA,MAAA,eAAmEA,MAAA,mBAAAA,MAAAiiD,GAAA,MAAA7Y,EAAAppC,QAAA,OAAAA,MAASopC,EAAAk9G,uBAAsB,GAChGtmJ,MAAA,wBACFA,cADEA,cAAA,IAAAA,MAAA,0DCVC,IAAMumJ,GAAyB,MAAhC,MAAOA,EAIXvI,GACAv6H,GAEAtoB,YACU09C,EACAC,EACAx2C,EACAF,EACDL,GAJCzG,KAAAu9C,YACAv9C,KAAAw9C,mBACAx9C,KAAAgH,kBACAhH,KAAA8G,uBACD9G,KAAAyG,aAXTzG,KAAAmtB,YAAWuwB,SACD19C,KAAAmvC,eAAc+9F,SAExBltI,MAAA0iJ,KAAiBpmI,OAAO6J,IACxBnmB,MAAAmoB,KAAY7L,OAAO8L,KAUTpoB,KAAAuF,OAASvF,KAAKyG,WAAWlB,OACzBvF,KAAA2mB,SAAW3mB,MAAK0iJ,EAAe/7H,SAC/B3mB,KAAAqF,YAAcrF,KAAK8G,qBAAqBlB,eAAe5F,KAAKyG,WAAWlB,OAAON,QAE9EjF,KAAAkrJ,gBAAex2I,OAAS,IACd1U,KAAKgH,gBAAgB8f,cAArB9mB,GACCgK,OAAS,GAGpBhK,KAAAmrJ,mBAAqBnrJ,MAAKmoB,EAAUijI,qBAX1C,CAaJ5kI,QACExmB,KAAKmvC,YAAYmf,MACnB,CAEA+8F,0BACErrJ,KAAKu9C,UAAU9sC,KAAKo6I,GAA8B,CAChD9sG,WAAW,EACXP,iBAAkBx9C,KAAKw9C,iBACvBQ,MAAO,SAEX,CAEAgtG,wBJnBI,SAAUM,GAAoCt8G,EAAmBwO,GACrExO,EAAOv+B,KAAK85I,GAAoC,CAC9CxsG,WAAW,EACXP,iBAAkBA,EAClBQ,MAAO,SAEX,CIcIstG,CAAoCtrJ,KAAKu9C,UAAWv9C,KAAKw9C,iBAC3D,iDAxCWytG,GAAyBvmJ,MAAAC,OAAAD,mBAAAiM,MAAAjM,MAAAkM,GAAAlM,MAAAmM,KAAA,oCAAzBo6I,EAAyB98G,UAAA,6BAAAkC,OAAA,CAAAljB,SAAA,gBAAA2iC,QAAA,CAAA3gB,YAAA,eAAAf,MAAA,GAAAC,KAAA,GAAAC,OAAA,keAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ID7BpC9pC,MAFF,eAEEA,CAF2B,cAKzBA,MAAA,0BAAS+pC,EAAAjoB,OAAO,GAGhB9hB,MAAA,gBAA2BA,MAAA,GAC7BA,UAGAA,MAAA,WACEA,MAAA,EAAA6mJ,GAAA,KAKF7mJ,QAMAA,MAHA,EAAA8mJ,GAAA,iBAGA9mJ,CAH6B,EAAA+mJ,GAAA,kBAM7B/mJ,MAAA,cAIEA,MAAA,0BAAS+pC,EAAA48G,yBAAyB,GAGlC3mJ,MAAA,YACEA,MAAA,0BACAA,MAAA,QAAGA,MAAA,gDAEPA,YACAA,MAAA,GAAAgnJ,GAAA,gBAKFhnJ,eAtCIA,cAAA,kCAAA+pC,EAAAlpC,OAAAmE,eAAA,yBAE2BhF,MAAA,GAAAA,MAAA+pC,EAAAlpC,OAAAmE,eAAA,sBAK3BhF,MAAA,GAAAA,MAAA+pC,EAAAy8G,eAAA,MAQFxmJ,cAAA+pC,EAAA9nB,WAAAU,WAAA,MAGA3iB,cAAA+pC,EAAAlpC,OAAAwF,OAAA,MAMErG,QAEAA,MAFA,WAAA+pC,EAAA9nB,WAAAU,WAEA3iB,CAFkC,kCAAA+pC,EAAAppC,cAAA,QAKhCX,MAAA,GAAAA,MAAA,IAAAA,MAAA,kCACGA,MAAA,GAAAA,YAAA,MAAAA,MAAA,uBAAA+pC,EAAAppC,iBAGPX,MAAA,GAAAA,MAAA+pC,EAAA08G,qBAAA,uBCjBM37G,MAAa1+B,MACb2+B,MAAe1+B,YACf69B,MAAa59B,MAEbswI,MACA5xG,IAAez+B,KACf49B,MAAcyB,OAAA,88BAGT26G,CAAyB,+BCvBtC,MACMU,GAAgB,WAChBC,GAAiB,CAAC,YAAa,iBAK9B,IAAMC,GAAmB,MAA1B,MAAOA,UAA2BC,KAItCjsJ,YACUw/C,EACAr4C,EACAP,GAER3G,QAJQE,KAAAq/C,aACAr/C,KAAAgH,kBACAhH,KAAAyG,aALVzG,KAAAqD,OAAMtD,MAAS,CAAC8rJ,sBAQhB,CAEA38G,WACE,MAAMvnC,EAAI3H,KAAKqD,IAAIib,GAAG,YAChBnS,EAAYnM,KAAKgH,gBAAgBiG,SACjCinC,EAAgBl0C,KAAKq/C,WAAWnL,cACtCl0C,KAAK+Z,cAAcvX,OACjByyC,MAEEj1C,KAAKyG,WAAWslJ,UAAUloJ,QACxBpD,KAAIyD,GAAYA,EAASiJ,UAAO,EAChC0L,MAAgBgnB,GAAKA,IAAC,EAEtBmsH,SAAQ,EACRvrJ,KAAI,EAAEwrJ,EAAc5+I,MAClB1F,EAAEO,EAAE,SAAU,CAAE+jJ,eAAc5+I,gBAC9B,MAAM6+I,EAAY//I,EAAUsnG,UAAUj7D,GAAQA,EAAKjsC,SAAW0/I,GACxDpiD,EAAe19F,EAAUsnG,UAAUj7D,GAAQA,EAAKjsC,SAAWc,GAC3D8+I,EAASD,EAAYriD,EAAgB8hD,GAnCrC,OAoCNhkJ,SAAEO,EAAE,QAAS,CAAEgkJ,YAAWriD,eAAcsiD,UACjCA,MACP,EAGJC,MAA0Bl4G,EAAe,gBAAgBrwC,QACvDpB,MAAOi5C,QAAyE3rC,IAAhE67I,GAAeljJ,KAAK2jJ,GAAM3wG,EAAM4wG,cAAc55I,SAAS25I,MAAkB,EACzF5rJ,KAAI,IAAM,KAAE,EACZ8rJ,MAAM,KAERjkJ,UAAU6jJ,IACV,MAAMv3G,EAAYV,EAAcU,UAClB,KAAVu3G,GACFxkJ,EAAEO,EAAE,cACJ0sC,EAAUl0B,OAlDF,QAmDRk0B,EAAUl0B,OAAOirI,MAEjBhkJ,EAAEO,EAAE,mBAAmBikJ,MACvBv3G,EAAUpyC,IAAI2pJ,GAAK,GAI3B,iDAnDWN,GAAkBnnJ,mBAAAC,MAAAD,MAAAiM,KAAA,oCAAlBk7I,EAAkB19G,UAAA,yBAAA3sB,SAAA,CAAA9c,QAAA,SAAlBmnJ,CAAmB,+BCV1BnnJ,MADF,QACEA,CADG,UACGA,MAAA,GAAiBA,MAAA,UAAMA,MAAA,wBAC/BA,sCADQA,MAAA,GAAAA,MAAA8nJ,EAAA13H,OAAuBpwB,MAAA,GAAAA,MAAA,KAAAA,MAAA,IAAA8nJ,EAAAj8I,SAAA,KCM5B,IAAMk8I,GAA2B,MAAlC,MAAOA,EACX5sJ,YAA+C6sJ,GAAA1sJ,KAAA0sJ,cAAwC,iDAD5ED,GAA2B/nJ,MAClBioJ,MAAkB,oCAD3BF,EAA2Bt+G,UAAA,gCAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,8BAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDVtC9pC,MADF,UACEA,CADiC,SAC5BA,MAAA,wBAAqCA,QAC1CA,MAAA,QACAA,MAAA,EAAAkoJ,GAAA,eAAAloJ,OAKFA,eAPOA,MAAA,GAAAA,YAAA,0BAELA,MAAA,GAAAA,MAAA+pC,EAAAi+G,aAAAG,6BCMYn9G,IAAe/qC,MAAA2rC,OAAA,wEAEhBm8G,CAA2B,KCO3BK,GAA+B,MAAtC,MAAOA,EACXjtJ,YACUktJ,EAC4BL,GAD5B1sJ,KAAA+sJ,WAC4B/sJ,KAAA0sJ,cAClC,CAEJM,YAAYC,GACVjtJ,KAAK0sJ,aAAaO,KAAOA,EACzBjtJ,KAAK+sJ,SAASG,mBAChB,iDATWJ,GAA+BpoJ,MAAAC,MAAAD,MAGhCioJ,MAAkB,oCAHjBG,EAA+B3+G,UAAA,oCAAAC,MAAA,GAAAC,KAAA,GAAAC,OAAA,wFAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICjB5C9pC,MAAA,YACEA,MAAA,wBACFA,QAIEA,MADF,UACEA,CADyB,cACUA,MAAA,0BAAS+pC,EAAAu+G,aAAY,EAAM,GAC5DtoJ,MAAA,6CACFA,QACAA,MAAA,cAAmCA,MAAA,0BAAS+pC,EAAAu+G,aAAY,EAAK,GAC3DtoJ,MAAA,+CAEJA,iBAXEA,cAAA,IAAAA,MAAA,mCAMEA,MAAA,GAAAA,MAAA,IAAAA,MAAA,IAAAA,MAAA,qCAGAA,MAAA,GAAAA,MAAA,IAAAA,MAAA,MAAAA,MAAA,mDDCI+qC,MAAe9+B,MACf2wI,MACA5xG,IAAe9+B,MAAA0/B,OAAA,mIAIVw8G,CAA+B,2CEkDxCK,MAAgBC,EAAA3oI,EAAA,8EAAA2mE,KAAAgiE,EAAAhsE,KAAAgsE,EAAA,OAAAhiE,KAAAvrD,KAAAwtH,qNChDJ3oJ,MAAA,SACEA,MAAA,oCACFA,6CADgCA,QAAgCA,MAAhC,aAAA6nH,EAAApiH,OAAAhK,KAAgCuE,CAAD,QAAA4oJ,8BAHnE5oJ,MAAA,WACEA,MAAA,EAAA6oJ,GAAA,eAAAxnG,IAKFrhD,8BALEA,cAAAi1C,EAAAz3C,mDAaJwC,MAAA,eAGEA,MAAA,mBAAAA,MAAAslD,GAAA,MAAArQ,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAAi+F,SAAQ,GAAK,GAEtBlzI,MAAA,cAAUA,MAAA,UAAIA,QACdA,MAAA,UAAMA,MAAA,wBACRA,mCALEA,MAAA,UAAAA,MAAA,EAAAksC,GAAA+I,EAAAm+F,iBAIMpzI,MAAA,GAAAA,YAAA,4EAIRA,MAAA,eAGEA,MAAA,mBAAAA,MAAAmsH,GAAA,MAAAl3E,EAAAj1C,MAAA,UAAAA,MAASi1C,EAAAi+F,SAAQ,GAAM,GAEvBlzI,MAAA,UAAMA,MAAA,wBAAqCA,QAC3CA,MAAA,cAAUA,MAAA,UACZA,mCALEA,MAAA,UAAAA,MAAA,EAAAksC,GAAA+I,EAAAm+F,iBAGMpzI,MAAA,GAAAA,YAAA,kDAjBZA,MAAA,6BAWEA,MAVA,EAAA8oJ,GAAA,oBAUA9oJ,CAVgD,EAAA+oJ,GAAA,sBAoBlD/oJ,kCAKAA,MAAA,qDAAwBA,MAAA,UAAAi1C,EAAA+zG,aAAA,wCAD1BhpJ,MAAA,EAAAipJ,GAAA,KAAAjpJ,MAAA,IAAAkpJ,aDHJ,MAAM9qJ,GAAW,CACfC,KAAK,EACLlD,aAAa,GAoCR,IAAMguJ,GAAwB,MAA/B,MAAOA,UAAgCv8B,KAM3CnwF,GACAD,GAIA4sH,GAGAC,GACA1nJ,GACA4xI,GAIAp4I,YACUmvC,EACApoC,EACAC,EACAF,EACAD,EACAM,EACAC,EACAC,EACAH,EACAs3C,EACAv3C,EACAw3C,GACAn3C,GACAC,GACA4mJ,IAERluJ,QAhBQE,KAAAgvC,SACAhvC,KAAA4G,yBACA5G,KAAA6G,qBACA7G,KAAA2G,mBACA3G,KAAA0G,cACA1G,KAAAgH,kBACAhH,KAAAiH,gBACAjH,KAAAkH,WACAlH,KAAA+G,YACA/G,KAAAq+C,qBACAr+C,KAAA8G,uBACA9G,KAAAs+C,qBACAt+C,KAAAmH,oBACAnH,KAAAoH,oBACApH,KAAAguJ,0BAjCVhuJ,KAAAqD,OAAMtD,MAAS,CAAE8tJ,2BAA2B/qJ,IAI5C9C,MAAAmhC,KAAuB7kB,OAAOolB,KAC9B1hC,MAAAkhC,KAAc5kB,OAAOC,KAIrBvc,MAAA8tJ,KAAexxI,OAAO2xI,MAAiBlqH,KAAKmqH,MAC5CluJ,KAAAmuJ,cAAaz5I,OAAS,IAAM1U,MAAK8tJ,EAAa5iJ,OAAOw2G,MAErD1hH,MAAA+tJ,KAAoBvmJ,KAAUuM,IAC9B/T,MAAAqG,KAAmBmB,KAAUtE,GAC7BlD,MAAAi4I,KAA0BzwI,KAAU8O,IAE1BtW,KAAAouJ,iBAAgB7mJ,QAAO,GAwCvBvH,KAAAkC,MAAQlC,KAAK0G,YAAY2nJ,cAAcruJ,MAAKkhC,EAAY37B,OAAO2E,WAE/DlK,KAAAsuJ,WAAatuJ,KAAKs+C,kBAAkB/2B,eAC9CvnB,KAAA83I,gBAAepjI,OAAS,IAAM1U,MAAKi4I,EAAwBzhI,YAAcxW,KAAKs+C,kBAAkB92B,sBACtFxnB,KAAAuuJ,WAAavuJ,KAAKiH,cAAcunJ,oBAAoBxuJ,MAAKkhC,EAAY37B,OAAON,QAK5EjF,KAAA0tJ,cAAah5I,OAAS,IAE1B1U,MAAKmhC,EAAqBnY,WAC5BhpB,MAAKyuJ,GAAoB,GAClB,IAIDzuJ,MAAKyuJ,GAAqBzuJ,MAAK8tJ,EAAa5iJ,OAAOwjJ,QAInD1uJ,KAAA2uJ,wBAAuBC,OAAiBl3H,IAAQA,IAAQ13B,KAAK0tJ,cAAc,GAGrF1tJ,MAAAyuJ,GAAoB,EAMVzuJ,KAAA6uJ,aAAY31I,UACpBs1D,QAAG,GAAO3qE,QACR0oJ,MAAM,IAAC,EACP33F,OAAU,KArDF50D,KAAKqD,IAAIC,KAAK,eACxBtD,KAAKgvC,OAAOo4C,cAAe,EAI3B,MAAM0nE,GAAO9uJ,MAAK8tJ,EACQ,MAAtBgB,GAAK5jJ,OAAOwjJ,QACdI,GAAKzlJ,IAAI,SAAUrJ,MAAKkhC,EAAY37B,OAAO82F,cAAcC,MAAMC,gBAAiB,IAAK,EAGvF14E,OAAO,KACL,MAAM1W,GAAUnN,KAAKs+C,kBAAkBh4B,8BACnCnZ,GAAQoZ,cACVwG,OAAU,IAAM/sB,KAAK43I,QAAQzqI,GAAQqZ,OAAM,EAGjD,CAEAuoI,GA0BAN,GAaAv/G,WACElvC,KAAKq+C,mBAAmB1mC,OACxB3X,MAAK+tJ,EAAkBhlJ,OACvB/I,KAAKguJ,uBAAuBhtJ,MAAM2W,OAElC3X,MAAKgvJ,IACLhvJ,MAAKivJ,GACP,CAEA16G,kBACE1L,WAAW,IAAM7oC,KAAKouJ,cAAc/kJ,KAAI,GAC1C,CAEAoO,cACEzX,KAAKiH,cAAcyZ,OAAO1gB,MAAKkhC,EAAY37B,OAAON,QAClDjF,KAAK8G,qBAAqB4Z,OAAO1gB,MAAKkhC,EAAY37B,OAAON,QAErDjF,MAAKkhC,EAAY37B,OAAOmE,iBAE1B1J,KAAKiH,cAAcioJ,aACnBlvJ,KAAKgH,gBAAgBkoJ,aACrBlvJ,KAAK0G,YAAYwoJ,aACjBlvJ,KAAK2G,iBAAiBuoJ,aACtBlvJ,KAAK4G,uBAAuBsoJ,aAC5BlvJ,KAAK6G,mBAAmBqoJ,aACxBlvJ,KAAK8G,qBAAqBooJ,aAC1BlvJ,KAAKmH,iBAAiB+nJ,aACtBlvJ,KAAKoH,iBAAiB8nJ,cAExBpvJ,MAAM2X,aACR,CAEA03B,YAAYggH,GACV,OAAIA,EACKnvJ,KAAKgvC,OAAOxoB,MAAMxmB,MAAKkhC,EAAY37B,OAAOsF,WAAa7K,MAAK+uJ,OAAch/I,IAE9E/P,KAAKs+C,kBAAkB33B,WAAWU,YAAcrnB,KAAKs+C,kBAAkB53B,gBACnE1mB,MAAKovJ,SAEdpvJ,KAAKgvC,OAAOxoB,MAAMxmB,MAAKkhC,EAAY37B,OAAOsF,WAAa7K,MAAK+uJ,OAAch/I,EAC5E,CAGA6nI,QAAQpxH,GACNxmB,MAAKi4I,EAAwBzhI,SAASnN,KAAI,GAE1C,MAAM1B,EAAI3H,KAAKqD,IAAIib,GAAG,UAAW,CAAEkI,UACnC,GAAIxmB,KAAKs+C,kBAAkB73B,gBAAiB,CAG1C,MAAMvkB,EAAQlC,KAAKqvJ,gBAChB5uJ,IAAI6uJ,IACH,MAAMC,EAAUvvJ,KAAK0G,YAAYX,IAAIupJ,EAAe5uJ,cAEpD,IADgBV,KAAKs+C,kBAAkB72B,aAAa8nI,EAAQplJ,OAAOhK,MAEjE,OAAO,KAIT,MAAMqvJ,EAAgBjvJ,OAAOkF,KAAK8pJ,EAAQplJ,OAAOvJ,YAAYoJ,OAAS,EAEhEylJ,EADczvJ,KAAK6G,mBAAmBsH,qBAAqBohJ,GACjClgJ,SAAS6G,KAAK2pB,IvPpPlC,uBuPoPuCA,GAAErxB,KAAKF,MAC1D,OAAKkhJ,GAAkBC,EAGVtF,GAAmBC,YAAYmF,GAFnC,IAE0C,GAGpD9sJ,OAAOvC,GAAgB,MAARA,GAEZ8F,EAAgBhG,KAAK8G,qBAAqBf,IAAI/F,MAAKkhC,EAAY37B,OAAON,QAEtEhC,EAAgC,CACpCuF,MAAOtG,EACPyD,YAAaK,EAAcL,YAC3BD,kBAAmBM,EAAcN,mBAEnCiC,EAAEO,EAAE,kBAAmB,CAAEjF,iBACzBjD,KAAKkH,SAASuJ,KAAKzQ,KAAK+G,UAAUyJ,QAAQ,kBAAmB,KAAM,CAAEE,SAAU,MAE/E1Q,MAAKqG,EAAiBpD,aAAaA,EAAcjD,MAAKkhC,EAAY37B,OAAOd,YAAY6D,UAAU,CAC7F+R,KAAM7V,IACJmD,EAAEO,EAAE,kBAAmB,CAAE1D,SAAQgiB,UACjCxmB,KAAK0G,YAAYiH,QAAQ+hJ,aAAalrJ,GACtCxE,KAAKkH,SAASuJ,KAAKzQ,KAAK+G,UAAUyJ,QAAQ,iBAAkB,KAAM,CAAEE,SAAU,MAC9E1Q,KAAKs+C,kBAAkB53B,cAAcrd,KAAI,GACzCrJ,MAAK+uJ,EAAcvqJ,EACfgiB,GACFxmB,KAAKmvC,cAEPtG,WAAW,IACT7oC,MAAKi4I,EAAwBzhI,SAASnN,KAAI,GAExC,IAAG,EAGTyW,MAAO6vI,IACLhoJ,EAAEO,EAAE,eAAgBynJ,GACpB3vJ,KAAKkH,SAASuJ,KAAK,QAAS,KAAM,CAAEC,SAAU,MAC9C1Q,MAAKi4I,EAAwBzhI,SAASnN,KAAI,EAAK,GAGrD,KAAO,CAML,GAHArJ,MAAKi4I,EAAwBzhI,SAASnN,KAAI,GAGd,MAAxBrJ,KAAKqvJ,gBACP,OAEF,MAAMO,EAAuC,GAC7C5vJ,KAAKqvJ,gBAAgBl9I,QAAQm9I,IACtBA,EAAevnJ,KAAKk5C,SAEzB2uG,EAAWljJ,KAAKmjJ,KAAoBC,aAAaR,EAAevnJ,MAAK,GAGvE,MAAM8kJ,EAAmC,GACzC+C,EAAWz9I,QAAQ49I,IACjBxvJ,OAAOkF,KAAKsqJ,GAAW59I,QAAQ9Q,IAC7BwrJ,EAAYngJ,KAAK,CAAEooB,MAAOzzB,EAAKkP,QAASw/I,EAAU1uJ,IAAM,EACzD,GAGHrB,KAAKkH,SAAS40C,kBAAkB2wG,GAA6B,CAC3DvhJ,KAAM,CACJ2hJ,eAEFn8I,SAAU,KAEd,CACF,CAEAs+I,KACEhvJ,KAAK+Z,cAAcvX,OACjB4pJ,MAA6Bt5I,OAAQ,gBAAgBxK,UAAUozC,IACzD17C,KAAKs+C,kBAAkB33B,WAAWU,aAAernB,KAAKs+C,kBAAkB53B,kBAE5Eg1B,EAAME,iBACNF,EAAM2mC,YAAc,GACpBriF,MAAKovJ,IAA8B,IAIvCpvJ,KAAK+Z,cAAcvX,IACjBxC,KAAKgvC,OAAOu5B,gBAAgBjgE,UAAUvG,GAAK/B,KAAKmvC,eAEpD,CAEA8/G,KACEjvJ,KAAKgvC,OAAOyM,gBAAgBnzC,UAAUozC,IACpC,MAAIs0G,MAASt0G,GACX,OAAO17C,KAAKmvC,eAEd,EAAIwM,MAAQD,KACVA,EAAME,kBACD57C,KAAKs+C,kBAAkB33B,WAAWU,aAAernB,MAAKi4I,EAAwBzhI,YACjFxW,KAAK43I,QAAQl8F,EAAM4a,QAAM,EAGjC,CAEA84F,KACE,MAAMa,EAAcjwJ,KAAKkH,SAAS40C,kBAAkBgxG,GAAiC,CACnF5hJ,KAAM,CACJ+hJ,MAAM,GAERv8I,SAAU,MAGZu/I,EAAYt0B,WAAWrzH,UAAU,KAC/B,GAAK2nJ,EAAYC,kBAAkBC,eAAejlJ,KAAoC+hJ,KACpF,OAAOjtJ,KAAK43I,SAAQ,GAEtB53I,KAAKmvC,aAAY,EAAI,EAEzB,iDAhRW0+G,GAAuBnpJ,MAAAC,OAAAD,MAAAiM,KAAAjM,MAAAkM,KAAAlM,MAAAmM,KAAAnM,MAAAoM,KAAApM,MAAAqM,MAAArM,MAAAsM,KAAAtM,MAAAuM,MAAAvM,MAAAwM,MAAAxM,MAAAyM,IAAAzM,MAAA0M,GAAA1M,MAAA2M,IAAA3M,MAAA4M,IAAA5M,MAAA6M,IAAA7M,MAAA0rJ,MAAA,oCAAvBvC,EAAuB1/G,UAAA,2BAAAmJ,UAAA,SAAA9I,EAAAC,MAAA,EAAAD,SAIpBg6G,GAA0B,wEAb7B,CACT1xI,GACAqP,GAEA4iI,KAEAtiC,KACD/hH,OAAA0pC,MAAA,GAAAC,KAAA,GAAAC,OAAA,6sBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,ICtFC9pC,MAFJ,UAEIA,CAFiE,UAEjEA,CADmG,8BAEjGA,MAAA,gCAAe+pC,EAAAU,aAAa,GAEhCzqC,UAWMA,MAVN,UAUMA,CAV0B,UAU1BA,CAFG,UAEHA,CAD2B,WAEzBA,MAAA,EAAA2rJ,GAAA,aAWN3rJ,YACAA,MAAA,EAAA4rJ,GAAA,+BAwBF5rJ,QACAA,MAAA,EAAA6rJ,GAAA,KAMF7rJ,eA3DwDA,cAAA,UAAAA,MAAA,EAAAmpC,GAAAY,EAAA8/G,eACQ7pJ,cAAA,YAAA+pC,EAAA6/G,cAO0B5pJ,MAAA,GAAAA,MAAA,UAAAA,MAAA,EAAAisC,GAAAlC,EAAAi/G,aAAAj/G,EAAAi/G,cAAAj/G,EAAA0/G,aAAA1/G,EAAAi/G,cAAA,GAAAj/G,EAAA0/G,aAAA1/G,EAAA8/G,eAQhF7pJ,MAAA,GAAAA,MAAA+pC,EAAAogH,aAAA,KAYNnqJ,cAAA+pC,EAAA2/G,gBAAA,MAyBF1pJ,cAAA+pC,EAAAkgH,uBAAA,sBDcExB,MACAjxG,MACA+uG,GACAuF,MACA3E,GACArD,GACA1wG,MAAe24G,MACf7hH,MAAa8hH,MAEbhhH,IAAex+B,KAAAy/I,GAAAC,GAAAC,GAAAC,GAAAC,GAEfC,MAAoB1gH,OAAA,+8DAWXu9G,CAAwB,2BEvFnCnpJ,MAAA,0BCiCK,IAAMusJ,GAAkB,MAAzB,MAAOA,EAIXpxJ,YAAsBqxJ,EAAgDC,GAAhDnxJ,KAAAkxJ,yBAFtBlxJ,KAAAqD,OAAMtD,MAAS,CAAEkxJ,uBAGfjxJ,KAAKqD,IAAIqE,IAAI,cACf,CAEAwnC,WAEElvC,KAAKkxJ,uBAAuBluJ,eAC9B,iDAXWiuJ,GAAkBvsJ,MAAAC,IAAAD,MAAAiM,KAAA,oCAAlBsgJ,EAAkB9iH,UAAA,qBAAA3sB,SAAA,CAAA9c,MAXlB,CAET0sJ,KAEAhpI,IACAhiB,GACArC,IACAwY,IACA7K,MACD08B,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IDlCH9pC,MAAA,mBAEAA,MAAA,EAAA2sJ,GAAA,mCAAA3sJ,cAAA+pC,EAAAyiH,uBAAA5pJ,SAAA,sBCoBIgqJ,KACAzD,IAAuB/+G,cAAA,YAadmiH,CAAkB,mDC9BxB,MAAM/C,EAAoB,CAC/B7sJ,IAAK,qBACL6J,KAAM,CAEJqmJ,IAAK,KAELn+C,UAAU,EAEVsO,KAAM,EAENgtC,OAAQ,uFCTZ,MAAM5rJ,EAAW,CACfC,KAAK,EACLlD,aAAa,EACbggB,QAAQ,EACRxE,OAAQ,IAAIC,IAAa,SAGrB,MAAgBwmC,EAGpB,OAAIz+C,GAAQ,OAAOrD,MAAKwxJ,OAASzxJ,MAAS,CAAC+hD,kBAAiBh/C,GAAUi/B,WAAW,IAAI/hC,KAAKqU,QAAS,CAEnGm9I,GAEA3xJ,YAAY4xJ,EAAmDC,GAUxD1xJ,KAAAupC,kBAAmB,EATxBvpC,MAAKwxJ,KAAOzxJ,MAAS0xJ,GAAmB,CAAC3vG,kBAAiBh/C,EAAU,KAAM4uJ,GAC1E1xJ,KAAKqU,OAASrU,MAAKwxJ,EAAKn9I,KACxBrU,KAAKqD,IAAIC,KAAK,cAChB,CASA,UAAOd,CAAIqM,GACT,MAAM8iJ,EAAgB,IAAI9iJ,EAC1BC,IAAkBC,YAAYvM,IAAImvJ,EACpC,CAGA,eAAOnvG,GAAmB,CAQ1B/yC,aAAakL,EAAmB5M,GAC9B,MAAMpG,EAAI3H,KAAKqD,IAAIib,GAAG,eAAgB,CAAE3D,QAAO5M,iBACzC6jJ,EAAmB5wI,MAAMC,QAAQtG,IAA2B,IAAjBA,EAAM3Q,QAAgB+D,EACvE,OAAOpG,EAAEsY,OAAYlQ,IAAV4K,GAAuBi3I,EACpC,CAcAj1B,qBAAwBh9F,EAAwBkyH,EAAsBrhB,GACpE,IAAKqhB,EAAc,OAAOrhB,EAE1B,MAAMshB,EAAgBnyH,EAAM/xB,UAAUuP,SAAS7R,SAAS5C,KAAK+b,GAAKA,EAAEtkB,OAAS0xJ,GAC7E,IAAKC,EAAe,OAAOthB,EAE3B,MAAMuhB,EAAWpyH,EAAMlG,OAAOrqB,QAAQ0iJ,GACtC,MAAO,IAAKthB,KAAauhB,EAC3B,mFCtEI,MAAOC,UAAqBlwG,IAGhCjiD,cAAgBC,MAAM,CAACkyJ,iBAFvBhyJ,KAAAqU,KAAO0hB,IAAiBk8H,QAIxBjyJ,KAAAupC,kBAAmB,CAFoB,CAIvC1pB,QAAS1C,aACP,OAAOA,CACT,ECRF,MAAMra,EAAW,CACfC,KAAK,EACLgD,KAAK,GAWD,MAAO+I,EAKXjP,cAJQG,KAAAkyJ,OAAyC,GAEjDlyJ,KAAAqD,OAAMtD,MAAS,CAAC+O,qBAAoBhM,GAIlC9C,KAAKwC,IAAI,IAAIwvJ,EACf,CAEA,gBAAOjjJ,GACL,OAAO+D,OAAOq/I,uBAAyB,IAAIrjJ,CAC7C,CAGAtM,IAAIqM,GACF7O,KAAKkyJ,OAAOrjJ,EAAMwF,MAAQxF,CAC5B,CAGA9I,IAAIqsJ,GAGF,OAFUpyJ,KAAKqD,IAAIC,KAAK,MAAO,CAAE8uJ,kBAExBnyI,EADCjgB,KAAKkyJ,OAAOE,IAAkB,KAE1C,CAGApjJ,aAAaojJ,GACX,OAAOpyJ,KAAK+F,IAAIqsJ,IAAkBpyJ,KAAK+F,IAAIgwB,IAAiBk8H,QAC9D,+DC5CI,MAAOr0G,EAEX,+BAAOC,CAAyBtF,GAC9B,OAAQA,GACN,KAAKE,IAAiB45G,wBACpB,MAAO,0CACT,KAAK55G,IAAiBI,UACtB,KAAKJ,IAAiBM,aACpB,MAAO,yBACT,KAAKN,IAAiBK,cACpB,MAAO,GACT,KAAKL,IAAiBL,aACpB,MAAO,8BACT,KAAKK,IAAiBC,cACpB,MAAO,+BACT,QACE,MAAO,GAEb,CAEA,iCAAO45G,CAA2BC,EAAsB5kH,GACtD4kH,EAAa30G,EAAqB40G,yBAAyBD,EAAY5kH,GACvE,MAAMnpC,EAASo5C,EAAqB60G,+BAA+BF,GAC7DG,EAAqBluJ,EAAOkuJ,mBAC5BC,EAAqBnuJ,EAAOmuJ,mBAClC,IAAI11G,EAAc,GAElB,MAAM21G,EAAgBF,EAAmB1oJ,OAAS,EAC5C6oJ,EAAgBF,EAAmB3oJ,OAAS,EAClD,OAAI4oJ,GAAiBC,EACnB51G,EAAc,GAAGy1G,EAAmBxxI,KAAK,WAAWyxI,EAAmBzxI,KAAK,SACnE0xI,EACT31G,EAAcy1G,EAAmBxxI,KAAK,MAC7B2xI,IACT51G,EAAc,IAAI01G,EAAmBzxI,KAAK,UAGrC+7B,CACT,CAEQ,+BAAOu1G,CAAyBD,EAAsB5kH,GAC5D,MAAMmlH,EAAmC,GACnCC,EAAWplH,EAAgBgrB,MAAM,EAAGhrB,EAAgBghD,QAAQ,MAElEmkE,SAAOC,GAAY,CAACA,GAEpBR,EAAWpgJ,QAAQq3I,IAEjB,MAAMwJ,EADiBxJ,EAAU7wF,MAAM,EAAG6wF,EAAU76D,QAAQ,MACrB/6E,QAAQ,IAAK,IAE/Ck/I,EAAOE,GAGVF,EAAOE,GAAiBtmJ,KAAK88I,GAF7BsJ,EAAOE,GAAmB,CAACxJ,EAAS,GAM3B+I,EAAW9xJ,IAAI+oJ,IAC1B,MAAMyJ,EAAiBzJ,EAAU7wF,MAAM,EAAG6wF,EAAU76D,QAAQ,MACtDqkE,EAAkBC,EAAer/I,QAAQ,IAAK,IAEpD,OAAIk/I,EAAOE,GAAiBhpJ,OAAS,EAC5Bw/I,EAEAyJ,GAKb,CAEQ,qCAAOR,CAA+BF,GAC5C,MAAO,CACLG,mBAAoB,GACpBC,mBAAoBJ,EAAW9xJ,IAAI0V,GAAKA,EAAEvC,QAAQ,IAAK,KAE3D,iRCxEI,MAAOs/I,GAMX,QAAOC,CAAcjoI,IACnB,IAAKA,GACH,OAAOA,GAGT,IAAIkoI,EAAeloI,GAAQ5pB,OAgB3B,OAfI8xJ,EAAa5mJ,WAAW,QAC1B4mJ,EAAeA,EAAax/I,QAAQ,cAAe,IAAItS,QAcrD8xJ,EAAa5mJ,WAAWijB,KAAgBC,IACnC,GAAG2jI,OAAmBD,IAE3BA,EAAa5mJ,WAAW,GAAG6mJ,OAAmB5jI,KAAgBC,MACzD0jI,EAELA,EAAa5mJ,WAAW,QAC1B4mJ,EAAeA,EAAavnI,UAAU,EAAGunI,EAAa5yB,YAAY,KAAO,GACzE4yB,EAAeA,EAAax/I,QAAQ,KAAM,IACnC,GAAGy/I,UAAsBD,KAG3BA,CACT,CAOA,yBAAOE,CAAmBpoI,IACxB,MAAMkoI,EAAepzJ,MAAKmzJ,EAAcjoI,IAClCqoI,EAAcH,EAAavnI,UAAUwnI,KAAiBrpJ,OAAQopJ,EAAazkE,QAAQ,MAAMrtF,OAG/F,OAFsBf,OAAO2jB,OAAOuL,MAEbviB,SAASqmJ,GAC5BA,OACAxjJ,CACN,CAOA,2BAAOyjJ,CAAqBtoI,IAC1B,MAAMkoI,EAAepzJ,MAAKmzJ,EAAcjoI,IAExC,OAD4B,IAAIuoI,SAAS,UAAUL,IAAvB,EAE9B,gBC7CF,MAAMtwJ,EAAW,CACfC,KAAK,EACL2wJ,mBAAmB,EACnBC,yBAAyB,EACzBC,qBAAqB,EACrBC,gBAAgB,GAOX,IAAMC,EAAoB,MAA3B,MAAOA,UAA4B/8I,IAEvClX,YACU4G,EACAC,EACAG,EACAD,EACAmtJ,GACAhtJ,GACA8G,IAER/N,QARQE,KAAAyG,aACAzG,KAAA0G,cACA1G,KAAA6G,qBACA7G,KAAA4G,yBACA5G,KAAA+zJ,kBACA/zJ,KAAA+G,aACA/G,KAAA6N,cARV7N,KAAAqD,OAAMtD,MAAS,CAAC+zJ,uBAAsBhxJ,GA8KtC9C,MAAAg0J,EAA+D,EAnK/D,CAMON,kBAAkBO,GACvB,MAAMtsJ,EAAI3H,KAAKqD,IAAIC,KAAK,qBAClB4wJ,EAAmC,GACnChwJ,EAAWlE,KAAKyG,WAAWvC,WAC3Bu1B,GAAS,IAAIlsB,MAAarJ,GAE1B8J,GAAM,IAAIC,IAAsBjO,KAAKqD,IAAIgR,MAE/C,UAAW3T,MAAcV,KAAKyG,WAAWlB,OAAO2E,UAAW,CACzD,MAAMhK,GAAOF,KAAK0G,YAAYX,IAAIrF,IAE5ByzJ,GAASn0J,MAAKo0J,EAAgB1zJ,GAAYR,IAE1CgO,GAAclO,KAAK6G,mBAAmBsH,qBAAqBjO,IACjE,UAAWo1B,MAAapnB,GAAYtN,WAAY,CAE9C,MAAMuc,GAAWnP,GAAImB,mBAAmBsqB,GAAOrqB,QAAuBkmB,GAAUjmB,WAG1Ed,GAAYvO,KAAK6N,WAAWsX,SAASmQ,IAGrC++H,GAAkBr0J,KAAK4G,uBAC1BgE,QAAQuS,GAASm3I,UACjB7xJ,OAAO0nB,IAAKsP,GAAO2M,aAAsBjc,GAAEvpB,WAAWk/B,UAEzD,UAAWy0H,MAAWF,GAAiB,CACrC,MAAMG,GAAa/6H,GAAO2M,aAAqBmuH,GAAQ3zJ,WAAW6zJ,SAClE,IAAKD,GACH,SAEF,MAAMppI,GAAoCqO,GAAO2M,aAAqBmuH,GAAQ3zJ,WAAWujJ,QAGzF,IAAIuQ,GACJ,IACEA,GAAkBxB,GAAwBM,qBAAqBgB,GACjE,OAAS10I,IACPm0I,EAASU,aAAa,CAAEj0J,cAAYK,UAAWu0B,GAAUhnB,KAAM8c,gBAAsCrb,GAAW,GAAM,GACtH,MAAM2zI,GAAYj8G,MAA2BmtH,SAAS1mJ,GAAahK,GACnElE,KAAK+zJ,eAAec,OAAOC,IAActkI,MAAO,uCAAuCkzH,gBAAuBpuH,GAAUhnB,mBAAmB8c,MAAWtL,IACtJ9f,KAAK+zJ,eAAegB,YAAY/0J,KAAK+G,UAAUyJ,QAAQ,+BAAgC,IACzF,CAEA,MAAMwkJ,GAAqC,CACzCh0J,MAAO,GACPN,cACAK,UAAWu0B,GAAUhnB,KACrBgQ,GAAIo2I,IAAiBtzE,KAAK,IAC1B6zE,QAA4B,MAAnBP,GACTF,cACAU,gBAAiBV,GACjBW,eAAgBZ,GAAQp0J,KACxBi1J,aAAcb,GAAQzpJ,GACtBsgB,aACGprB,MAAKq1J,EAA4BjqI,GAAQ7c,IAC5CwH,QAASm9I,GAAwBI,mBAAmBkB,OACjDL,GACHxgI,MAAM,EACNrJ,OAAO,EACPF,qBAAsBkrI,KAA4BpoJ,SAASke,OACxDprB,MAAKu1J,OACLv1J,MAAKw1J,EAAwBpqI,KAGlC8oI,EAAaxnJ,KAAKsoJ,GACpB,CACF,CACF,CAEA,OAAOrtJ,EAAEsY,EAAEi0I,EACb,CAGAmB,GAA4BjqI,EAAmC7c,GAI7D,MAAO,CAAEA,UAAWA,EAAWsb,YAAatb,EAAUsb,YAAasD,UAAU,EAAOkB,eAAgB,GAItG,CAEAmnI,GAAwBpqI,GACtB,OAAOA,EAAO5e,WAAWsf,MACrB,CAAEoD,WAAW,EAAMtD,YAAaR,EAAOS,UAAUC,KAAsB9hB,QAASglB,SAAS,EAAOC,cAAc,GAC9G,CAAEC,WAAW,EAAOtD,YAAa,GAAIoD,QAAS5D,IAAWqqI,KAAsB7yJ,MAAOqsB,aAAc7D,IAAWqqI,KAAsBC,WAC3I,CAUAtB,GAAgB1zJ,EAAoBR,EAAgB,MAGlD,GAFAF,KAAKqD,IAAIC,KAAK,iBAAkB,CAAEpD,OAAMQ,eAEpCV,MAAKg0J,EAAkBtzJ,GACzB,OAAOV,MAAKg0J,EAAkBtzJ,GAGhC,MAAM6e,GADNrf,EAAOA,GAAQF,KAAK0G,YAAYX,IAAIrF,IAChByJ,OACdwrJ,EAAQp2I,EAAO2qI,IAgBfzjJ,GAAazG,KAAKyG,WAAWlB,OAC7BqwJ,GAAOnvJ,GAAW41F,cAAcC,MAAQ,GACxC63D,GAAS,CACb0B,aAlB6C,CAC7Ct9I,KAAMgH,EAAOpf,KACb6e,GAAIO,EAAOzU,GACX0H,KAAM,CACJ+F,KAAMgH,EAAO/Q,KAAK1D,GAClBuJ,KAAMkL,EAAO/Q,KAAKF,MAGpBwnJ,IAAK,CACHC,WAAYJ,GAAOvR,YAAc,EACjC7rI,KAAMo9I,GAAOx1J,KACb6lB,OAAQ2vI,GAAOvnF,OACfnoD,OAAQ0vI,GAAOjgE,SAOjBkgE,KAAM,CACJI,MAAOJ,GAAKK,MACZ19I,KAAMq9I,GAAKz1J,KACX6e,GAAI42I,GAAK9qJ,GACTorJ,YAAaN,GAAKO,YAClBC,YAAaR,GAAKS,YAClBC,eAAgBV,GAAKW,eACrBC,cAAeZ,GAAKr5D,cACpBloF,KAAMuhJ,GAAKtnJ,KACXmoJ,SAAUb,GAAKc,UAEjBC,IAAK,CACH/yJ,MAAO6C,GAAW7C,MAClBgzJ,OAAQnwJ,GAAWmwJ,OACnBC,SAAUpwJ,GAAW41F,cAAcpzF,IAAI6tJ,YACvCC,OAAQtwJ,GAAW41F,cAAcpzF,IAAI+tJ,UACrCC,UAAWxwJ,GAAW41F,cAAcpzF,IAAIiuJ,aACxCC,WAAa91J,QAEfs0I,IAAK7iI,OAAOy6H,MAAM,CAChBqpB,OAAQnwJ,GAAWmwJ,OACnBhzJ,MAAO6C,GAAW7C,MAClBwzJ,OAAQ3wJ,GAAW4wJ,MACnBC,SAAU7wJ,GAAW6wJ,SACrBC,yBAAyB,EACzBC,kBAAkB,KAGtB,OAAAx3J,MAAKg0J,EAAkBtzJ,GAAcyzJ,GAC9BA,EACT,CACAH,GAOAuB,KACEv1J,KAAKqD,IAAIC,KAAK,uBACd,MAAMwwB,EAAY,IAAI+rE,IAAgC,MAChD3rE,EAAkB,IAAI2rE,IAAyD,MAC/E43D,EAAe3jI,EAAUjwB,QAC7BpB,KAAOgrC,KAAOA,IAAC,EACf6zD,KAAUj4F,MAAOwsC,KAAKxsC,EAAIknB,SAAS1sB,QAAKpD,KAAI+D,MAAa6E,MAAK7E,gBAGhE,OAAAxE,KAAK+Z,cAAcvX,OAAI6+F,KAAc,CAACo2D,EAAcvjI,EAAgBrwB,QAAKpB,KAAOgrC,KAAOA,MACpFnlC,UACC,EAAEioB,EAAS1e,OACT0e,EAAQlnB,IAAI0qB,WAAY,EACxBxD,EAAQlnB,IAAIihB,OAAQ,EACbzY,GAAS0e,EAAQ/rB,WAIvB,CAAEsvB,YAAWI,kBACtB,CAYOy/H,wBAAwBM,EAA+Bj1I,EAAuBw1I,EAAoBl4G,GAIvG,IAAIo4G,GAGJ,GANA10J,KAAKqD,IAAIC,KAAK,0BAA2B,CAAE0b,KAAIw1I,aAAYl4G,QAMvDA,EACF,IACEo4G,GAAkBxB,GAAwBM,qBAAqBgB,EACjE,OAAS10I,IACPm0I,EAASU,aAAa31I,OAAiBjP,GAA0B,GAAsB,GACvF,MAAM7P,GAAOF,KAAK0G,YAAYX,IAAIiZ,EAAGte,YAC/BwN,GAAclO,KAAK6G,mBAAmBsH,qBAAqBjO,IAC3DgE,GAAWlE,KAAKyG,WAAWvC,WAE3BwzJ,GAAa,uCADDjwH,MAA2BmtH,SAAS1mJ,GAAahK,iBACc8a,EAAGje,wBAAwBie,EAAGoM,UAC/GprB,KAAK+zJ,eAAec,OAAOC,IAActkI,MAAOknI,GAAY53I,IAE5DqO,QAAQrO,MAAM43I,GAAY53I,GAC5B,CAGF,MAAM5f,GAAOF,KAAK0G,YAAYX,IAAIiZ,EAAGte,YAC/B40B,GAAYt1B,KAAK6G,mBAAmB8wJ,mBAAmBz3J,GAAM8e,EAAGje,WAChEwN,GAAYvO,KAAK6N,WAAWsX,SAASmQ,KAGnC3K,QAAM3iB,SAAO2S,UAAUs5I,EAAS2D,4BAA4B54I,GAC9DkM,GAAUvQ,IAAS,GAGnBw5I,GAASn0J,MAAKo0J,EAAgBp1I,EAAGte,YAEjCm3J,GAAW3sI,GAAQ4I,WAAa5I,GAAQgJ,gBAC1C,CAAEJ,UAAWnZ,GAAMmZ,UAAWI,gBAAiBvZ,GAAMuZ,iBACrDl0B,MAAKu1J,IAEHuC,GAAmC,IACpC94I,EACHhe,MAAOkqB,GAAQlqB,OAAS,GACxBsd,GAAIo2I,IAAiBtzE,KAAK,IAC1B6zE,SAAS34G,GAAyB,MAAnBo4G,GACfF,aACAU,gBAAiBhqI,GAAQgqI,gBACzBC,eAAgBjqI,GAAQiqI,eACxBC,aAAclqI,GAAQkqI,aACtBr/I,QAASm9I,GAAwBI,mBAAmBkB,MACjDx0J,MAAKq1J,EAA4Br2I,EAAGoM,OAAQ7c,OAC5C4lJ,GACHxgI,MAAM,EACNrJ,OAAO,EACPF,qBAAsBkrI,KAA4BpoJ,SAAS8R,EAAGoM,WAC3DysI,MACA73J,MAAKw1J,EAAwBx2I,EAAGoM,SAMrC,OAHiBpjB,IAAS,EACtB,IAAI2iB,GAAKguC,MAAM,EAAG3wD,IAAQ8vJ,MAAmBntI,GAAKguC,MAAM3wD,GAAQ,IAChE,CAAC8vJ,MAAmBntI,GAE1B,iDAlRWmpI,GAAmBpvJ,MAAAC,MAAAD,MAAAiM,KAAAjM,MAAAkM,MAAAlM,MAAAmM,KAAAnM,MAAAoM,KAAApM,MAAAqM,OAAArM,MAAAsM,KAAA,sCAAnB8iJ,EAAmB7yJ,QAAnB6yJ,EAAmB5yJ,WAAA,SAAnB4yJ,CAAoB,KC7BjC,MAAMhxJ,EAAW,CACfC,KAAK,EACLiqB,WAAW,EACX3R,OAAQ,IAAIC,MAOP,IAAMy8I,EAAmB,MAA1B,MAAOA,EAIXC,GAEAn4J,cAJAG,KAAAqD,OAAMtD,MAAS,CAACg4J,uBAAsBj1J,GAEtC9C,MAAAg4J,KAAgBxwJ,KAAUssJ,GAKnB9zJ,KAAAqqB,YAAW7O,MAA8B,WAAY,IAG5Dxb,MAAAi4J,KAAWz8I,MAAoC,kBAAmB,GANlD,CAMhBy8I,GAEAtgJ,OACE,MAAMu8I,EAAel0J,MAAKg4J,EAActE,kBAAkB1zJ,MAC1DA,KAAKqqB,SAAShhB,IAAI6qJ,EACpB,CAYAgE,GAAcx3J,EAAqBK,EAAoBqqB,EAAsC+sI,GAC3F,OAAOn4J,KAAKqqB,WAAW5nB,OAAO0nB,MACzBzpB,GAAaypB,GAAEzpB,aAAeA,MAC3BK,GAAYopB,GAAEppB,YAAcA,MAC5BqqB,GAASA,GAAQ1iB,KAAK0iB,IAAUjB,GAAEiB,QAAUA,SAC5C+sI,IAAqBhuI,GAAE8qI,SAEjC,CAMOjoI,UAAUtsB,EAAoB2T,EAAc+jJ,GACjD,MAAMzwJ,EAAI3H,KAAKqD,IAAI8a,WAAW,YAAa,SAAU9J,EAAM,MAASA,OAAM+jJ,eAAc/tI,SAAUrqB,KAAKqqB,cACjGguI,GAAUC,KACb3lJ,OAAOylJ,EAAeG,KAA+BC,MAElDz1J,GAAM/C,MAAKk4J,EAAcx3J,EAAY2T,EAAMgkJ,IAA2B,GAEtEI,GAAY11J,GAAIN,OAAO0nB,KAAMA,GAAEwJ,MAErC,OAAOhsB,EAAEsY,EAAEw4I,GAAW,QAAQ11J,GAAIiH,sBAAsByuJ,GAAUzuJ,SACpE,CAIO4tJ,4BAA4Bc,GACjC,MAAM/tI,EAAO3qB,KAAKqqB,WACZriB,EAAQ2iB,EAAK8oF,UAAUtpF,IAAKA,GAAEzpB,aAAeg4J,EAAMh4J,YAAcypB,GAAEppB,YAAc23J,EAAM33J,WAAaopB,GAAEiB,SAAWstI,EAAMttI,QAE7H,MAAO,CAAET,OAAM3iB,QAAO2S,MADRgQ,EAAK3iB,GAErB,CASO2wJ,YAAYC,EAA+BC,EAAoBC,GACpE,MAAQnuI,OAAM3iB,SAAO2S,UAAU3a,KAAK43J,4BAA4BgB,GAChE,GAAa,MAATj+I,GACF,OAEF,MAAMouF,GAA4B,IAC7BpuF,GACHu6I,gBAAiB0D,EAAYpE,WAC7BW,eAAgB0D,EAChBzD,aAAc0D,GAGVC,GAAW,IAAIpuI,EAAKguC,MAAM,EAAG3wD,IAAQ+gG,MAAYp+E,EAAKguC,MAAM3wD,GAAQ,IAC1EhI,KAAKqqB,SAAShhB,IAAI0vJ,GACpB,CAKOpF,wBAAwB30I,EAAuBkM,EAAiBoxB,GACrE,MAAMy8G,EAAW/4J,MAAKg4J,EAAcrE,wBAAwB3zJ,KAAMgf,EAAIkM,EAASoxB,GAC/Et8C,KAAKqqB,SAAShhB,IAAI0vJ,EACpB,CAKOn5I,OAAOZ,GACZ,MAAQ2L,OAAM3iB,SAAUhI,KAAK43J,4BAA4B54I,GACzD,GAAIhX,EAAQ,EAAG,OACf,MAAM+wJ,EAAW,IAAIpuI,EAAKguC,MAAM,EAAG3wD,MAAW2iB,EAAKguC,MAAM3wD,EAAQ,IACjEhI,KAAKqqB,SAAShhB,IAAI0vJ,EACpB,CAKOC,aAAah6I,GAClBhf,MAAKi5J,EAAcj6I,GAGnB,MAAMk2I,EAAkBl1J,KAAK43J,4BAA4B54I,GAAIrE,OAAOu6I,gBAC7C,MAAnBA,EACFl1J,KAAK2zJ,wBAAwB30I,EAAIk2I,GAAiB,GAElDl1J,KAAK4f,OAAOZ,EAChB,CAeO21I,aAAaiE,EAAgCj+I,EAAmBu+I,EAAkBC,GACvF,MAAMC,GAAoC,CACxC14J,WAAYk4J,EAAYl4J,WACxBK,UAAW63J,EAAY73J,UACvBqqB,OAAQwtI,EAAYxtI,OACpBzQ,QACAu+I,UACAC,iBAEIxxJ,GAAI3H,KAAKqD,IAAIib,GAAG,eAAgB,CAAE86I,gBAIxCrsI,SAAU,KACR,MAAQpC,QAAM3iB,UAAUhI,KAAKq5J,2BAA2BT,GAClDU,GAAatxJ,IAAS,EACxB,IAAI2iB,GAAKguC,MAAM,EAAG3wD,IAAQoxJ,MAAczuI,GAAKguC,MAAM3wD,GAAQ,IAC3D,CAACoxJ,MAAczuI,IAGjBhjB,GAAEO,EAAE,cAAe,CAAEyiB,QAAM3iB,SAAOsxJ,gBAClCt5J,MAAKi4J,EAAS5uJ,IAAIiwJ,GAAU,GAEhC3xJ,GAAE8R,IAAI,KACR,CAEO4/I,2BAA2Br6I,GAChC,MAAM2L,EAAO3qB,MAAKi4J,IACZjwJ,EAAQ2iB,EAAK8oF,UAAUxzF,IAAKA,GAAEvf,aAAese,EAAGte,YAAcuf,GAAElf,YAAcie,EAAGje,WAAakf,GAAEmL,SAAWpM,EAAGoM,QAEpH,MAAO,CAAET,OAAM3iB,QAAO2S,MADRgQ,EAAK3iB,GAErB,CAKAixJ,GAAcj6I,GACZ,MAAQ2L,OAAM3iB,SAAUhI,KAAKq5J,2BAA2Br6I,GACxD,GAAIhX,EAAQ,EAAG,OACf,MAAMsxJ,EAAa,IAAI3uI,EAAKguC,MAAM,EAAG3wD,MAAW2iB,EAAKguC,MAAM3wD,EAAQ,IACnEhI,MAAKi4J,EAAS5uJ,IAAIiwJ,EACpB,iDA5KWvB,EAAmB,sCAAnBA,EAAmB92J,QAAnB82J,EAAmB72J,WAAA,SAAnB62J,CAAmB,mBCJzB,IAAMwB,EAAqB,MAA5B,MAAOA,EAEX15J,YACU6G,EACAG,GADA7G,KAAA0G,cACA1G,KAAA6G,oBACN,CAEJ2yJ,iBAAiBx6I,EAAuBqL,GAEtC,MAAMovI,EAAgC,GACtC,GAAqB,MAAjBz6I,EAAGte,YAAsC,MAAhBse,EAAGje,UAC9B,OAAO04J,EAET,MAAMC,EAAgBrvI,EAAS5nB,OAAO0nB,IAAKA,GAAEzpB,aAAese,EAAGte,YAAcypB,GAAEppB,YAAcie,EAAGje,WAGhG,UAAWqqB,MAAU7qB,OAAO2jB,OAAOuxI,MAAwB,CACzD,MAAMkE,GAA6B,CACjCC,WAAYF,EAAcxjJ,KAAKiU,IAAKA,GAAEiB,SAAWA,IACjD1Q,MAAO0Q,GAAOS,UAAUT,GAAOo1G,YAAY,KAAO,GAClDp1G,WAEFquI,EAAc/sJ,KAAKitJ,GACrB,CAGA,MAAMz5J,GAAOF,KAAK0G,YAAYX,IAAIiZ,EAAGte,YAE/B6N,GADYvO,KAAK6G,mBAAmB8wJ,mBAAmBz3J,GAAM8e,EAAGje,WAC1C0N,UAC5B,GAAIE,IAAiBmnB,aAAavnB,IAChC,UAAW6c,KAAU,CAACyuI,KAAuBlgB,WAAY,CACvD,MAAMggB,GAA6B,CACjCC,WAAYF,EAAcxjJ,KAAKiU,IAAKA,GAAEiB,SAAWA,IACjD1Q,MAAO0Q,GAAOS,UAAUT,GAAOo1G,YAAY,KAAO,GAClDp1G,OAAQA,IAEVquI,EAAc/sJ,KAAKitJ,GACrB,CAEF,GAAIhrJ,IAAiBmrJ,iBAAiBvrJ,IACpC,UAAW6c,KAAU,CAACyuI,KAAuBr1B,gBAAiB,CAC5D,MAAMm1B,GAA6B,CACjCC,WAAYF,EAAcxjJ,KAAKiU,IAAKA,GAAEiB,SAAWA,IACjD1Q,MAAO0Q,GAAOS,UAAUT,GAAOo1G,YAAY,KAAO,GAClDp1G,OAAQA,IAEVquI,EAAc/sJ,KAAKitJ,GACrB,CAIF,GAAIhrJ,IAAiBkb,YAAYtb,IAC/B,UAAW6c,MAAU7qB,OAAO2jB,OAAO61I,MAA0B,CAC3D,MAAMJ,GAA6B,CACjCC,WAAYF,EAAcxjJ,KAAKiU,IAAKA,GAAEiB,SAAWA,IACjD1Q,MAAO,UAAY0Q,GAAOS,UAAUT,GAAOo1G,YAAY,KAAO,GAC9Dp1G,OAAQA,IAEVquI,EAAc/sJ,KAAKitJ,GACrB,CAqBF,UAAWzuI,MAAWwuI,EAAe,CAEnC,GADsBD,EAAcvjJ,KAAK8jJ,IAAKA,GAAE5uI,SAAWF,GAAQE,QAEjE,SAEF,MAAMuuI,GAA6B,CACjCC,YAAY,EACZl/I,MAAOwQ,GAAQE,OAAOS,UAAUX,GAAQE,OAAOo1G,YAAY,KAAO,GAClEp1G,OAAQF,GAAQE,QAElBquI,EAAc/sJ,KAAKitJ,GACrB,CAIA,IADuBF,EAAcvjJ,KAAK8jJ,IAAKA,GAAE5uI,SAAWpM,EAAGoM,QAC1C,CACnB,MAAMuuI,GAA6B,CACjCC,WAAYF,EAAcxjJ,KAAKiU,IAAKA,GAAEiB,SAAWpM,EAAGoM,QACpD1Q,MAAOsE,EAAGoM,OAAOS,UAAU7M,EAAGoM,OAAOo1G,YAAY,KAAO,GACxDp1G,OAAQpM,EAAGoM,QAEbquI,EAAc/sJ,KAAKitJ,GACrB,CACA,OAAOF,CACT,iDAxGWF,GAAqB70J,MAAAC,KAAAD,MAAAiM,MAAA,sCAArB4oJ,EAAqBt4J,QAArBs4J,EAAqBr4J,WAAA,SAArBq4J,CAAqB,mBCZ5B,MAAOU,EAOX,mCAAOC,CAA6BhvI,IAClC,GAAQA,GAAQnV,UACT0Z,KAAgBC,GA8BnB,MA7BiB,CACf,YACA,aACA,eACA,aACA,gBACA,mBACA,eACA,eACA,QACA,+BACA,qBACA,iBACA,mBACA,qBACA,cACA,cACA,UACA,mBACA,mBACA,sBACAjvB,IAAI4T,IACJ,MAAMkxC,EAAO,WAAWlxC,IAKxB,MAJsC,CACpCkxC,OACA7qC,MAAO6qC,IAQjB,CASA,kBAAO40G,CAAYjvI,GAA2BkvI,EAA6Bp6I,GACzE,GAAQkL,GAAQnV,UACT0Z,KAAgBC,GAArB,CACE,MAAM2qI,EAAyB,IAAIlxI,IAAuBnJ,GAASjd,IAiBnE,MAhBiB,CACf,QACA,UACA,UACA,aACGq3J,EAAa35J,IAAI0pB,IAAKA,GAAEppB,WAC3B,2BACGR,OAAOkF,KAAK40J,GAAwB55J,IAAIY,IAAO,cAAcA,OAChEZ,IAAI4T,KACJ,MAAMkxC,GAAO,QAAQlxC,KAKrB,MAJsC,CACpCkxC,QACA7qC,MAAO6qC,KAGV,CAKP,ECrEI,MAAO+0G,EAQX,iBAAOC,CAAWrvI,GAA2BkvI,EAA6Bp6I,GACxE,GAAQkL,GAAQnV,UACT0Z,KAAgBU,GAAI,CACvB,MAAMkqI,EAAyB,IAAIlxI,IAAuBnJ,GAASjd,IAE7DykJ,EAAY4S,EAAa35J,IAAI0pB,IAAK,GAAGA,GAAEppB,cAAcf,MAAKw6J,EAAqBrwI,GAAE5b,eAAe2S,KAAK,MACrGu5I,GAAgBl6J,OAAOkF,KAAK40J,GAAwB55J,IAAIY,IAAO,GAAGA,YAAa6f,KAAK,MAK1F,MC/BO,wkQD4BJtN,QAAQ,2BAA4B4zI,GACpC5zI,QAAQ,+BAAgC6mJ,GAK7C,CAIJ,CAEA,QAAOD,CAAqBjsJ,IAC1B,MAAMmsJ,EAAQnsJ,GAAUkpB,cACxB,OAAIijI,EAAMluJ,WAAW,UAAkB,SACnCkuJ,EAAMluJ,WAAW,UAAkB,SACnCkuJ,EAAMluJ,WAAW,QAAgB,OACjCkuJ,EAAMluJ,WAAW,WAAmB,UACjC,KACT,EEhCF,MAAM1J,EAAW,CACfC,KAAK,EACLlD,aAAa,EACb86J,iBAAiB,GAOZ,IAAM5R,EAAsB,MAA7B,MAAOA,EAKX6R,GAEA/6J,YAAoB6G,GAAA1G,KAAA0G,cALpB1G,KAAAqD,OAAMtD,MAAS,CAACgpJ,0BAAyBjmJ,GAElC9C,KAAAgB,SAAQwG,KAAUuwJ,GACzB/3J,MAAA46J,KAAkBpzJ,KAAU+xJ,GAUrBv5J,KAAAgpJ,qBAA8D,GAG9DhpJ,KAAA66J,iBAAgBr/I,MAAyB,gBAAiB,CAC/Ds/I,UAAU,EACVp6J,gBAAYqP,EACZhP,eAAWgP,EACX4hH,QAAQ,EACRvmG,YAAQrb,IAIV/P,KAAA+6J,iBAAgBr/I,MAAY,gBAAiB,KAC3C,MAAM/B,EAAQ3Z,KAAK66J,gBACnB,OAAO76J,KAAKgB,MAAMq4J,2BAA2B1/I,GAAOgB,QAGtD3a,KAAAg7J,wBAAuBt/I,MAA4B,uBAAwB,KACzE,MAAM/B,EAAQ3Z,KAAK66J,gBACbxwI,EAAWrqB,KAAKgB,MAAMqpB,WAC5B,OAAOrqB,MAAK46J,EAAgBpB,iBAAiB7/I,EAAO0Q,EAAQ,GAI9DrqB,KAAAi7J,iBAAgBv/I,MAA4B,gBAAiB,KAE3D,MAAM2O,EAAWrqB,KAAKgB,MAAMqpB,WAC5B,OAAO9pB,OAAOC,QAAQR,KAAKgpJ,sBAAsBvoJ,IAAI,EAAEC,EAAY8nB,MACjE,MAAM0yI,GAAiB7wI,EAAS5nB,OAAO0nB,IAAKA,GAAEzpB,aAAeA,GAC7D,MAAO,CACLA,WAAYA,EACZ2pB,SAAU6wI,GACVtB,WAAYsB,GAAelxJ,OAAS,EACpC0Q,MAAO8N,EAAY6Z,sBAAsBC,aAE5C,GAIHtiC,KAAAm7J,iBAAgBz/I,MAA2B,gBAAiB,KAC1D,MAAMnD,EAAOvY,KAAK66J,gBAAgBn6J,WAClC,GAAY,MAAR6X,EACF,MAAO,GACT,MAAM2iJ,EAAiBl7J,KAAKi7J,gBAAgBvyJ,KAAK+b,IAAKA,GAAE/jB,YAAc6X,GAAM8R,SAGtEiH,GADmBtxB,KAAKgpJ,qBAAqBzwI,GACd2uB,WAWrC,OAVoC3mC,OAAOkF,KAAK6rB,IAAa7wB,IAAIM,KAC/D,MAAMspB,GAAW6wI,EAAez4J,OAAO0nB,IAAKA,GAAEppB,YAAcA,IAC5D,MAAO,CACLA,aACAspB,YACAuvI,WAAYvvI,GAASrgB,OAAS,EAC9BuE,UAAW+iB,GAAYvwB,IAAWoc,SAAS1O,UAC3CiM,MAAO3Z,KAEV,GAsBHf,KAAAo7J,kBAAiB1/I,MAA8B,iBAAkB,KAC/D,MAAMoH,EAAI9iB,KAAK66J,iBACPlgJ,SAAU3a,KAAKgB,MAAM42J,4BAA4B90I,GACzD,OAAOnI,IAIT3a,KAAAq7J,qBAAoB3/I,MAAY,oBAAqB,KACnD,MAAMvO,EAAUnN,KAAKo7J,iBACrB,OAAkB,MAAXjuJ,EACL8sJ,EAAiBC,6BAA6B/sJ,GAC9C,KAIJnN,MAAAs7J,KAAqB5/I,MAAY,oBAAqB,KACpD,MAAMnD,EAAOvY,KAAK66J,gBAAgBn6J,WAClC,OAAe,MAAR6X,EAAe,KAAOvY,KAAK0G,YAAYq+I,cAAcxsI,EAAI,GAIlEvY,KAAAu7J,eAAc7/I,MAAY,cAAe,KACvC,MAAMwP,EAAUlrB,KAAKo7J,iBACfp0I,EAAahnB,MAAKs7J,IACxB,OAAkB,MAAXpwI,GAAiC,MAAdlE,EACtBszI,EAAeC,WAAWrvI,EAASlrB,KAAKm7J,gBAAiBn0I,EAAWne,SACpE,KAIN7I,KAAAw7J,kBAAiB9/I,MAAY,iBAAkB,KAC7C,MAAMwP,EAAUlrB,KAAKo7J,iBACfp0I,EAAahnB,MAAKs7J,IACxB,OAAkB,MAAXpwI,GAAiC,MAAdlE,EACxBizI,EAAiBE,YAAYjvI,EAASlrB,KAAKm7J,gBAAiBn0I,EAAWne,SACvE,KAxHF7I,KAAKqD,IAAIC,KAAK,cAChB,CAkEAm4J,gCAEE,MAAMj/G,EAAWx8C,KAAK66J,iBACfn6J,EAAY8nB,GAAejoB,OAAOC,QAAQR,KAAKgpJ,sBAAsB,GACtE13H,EAAc9I,EAAY0e,WAC1Bw0H,GAAiBn7J,OAAOkF,KAAK6rB,GAAa,GAG1CirB,GAA0B,IAC3BC,EACH97C,aACAK,UAAW26J,GACXtwI,OAN+B,MAAlBswI,GAAyBC,KAAe/4J,MAAQ,MAQ/D5C,KAAK66J,cAAcxxJ,IAAIkzC,GACzB,CAkBA++G,GA4BAX,gBAAgBhpC,GACd3xH,KAAKqD,IAAIC,KAAK,kBAAmB,CAAEquH,WACnC3xH,KAAK66J,cAAcxxJ,IAAI,IAClBrJ,KAAK66J,gBACRlpC,UAEJ,iDA9IWo3B,GAAsBrkJ,MAAAC,KAAA,sCAAtBokJ,EAAsB9nJ,QAAtB8nJ,EAAsB7nJ,WAAA,SAAtB6nJ,CAAsB,8ECd5B,MAAMsK,EAAmB,YAYnBuI,EAJY,qDAUZC,EAJa,2DAoBbpsI,EAAkB,CAC7BC,GAAI,KACJS,GAAI,0EClCA,MAAO2rI,EAEXC,GACAC,GACAC,GACAC,GAEAr8J,YAAYs8J,GACVn8J,MAAK+7J,EAAaI,EAClBn8J,MAAKg8J,EAAUG,EAAUvtI,cACzB5uB,MAAKk8J,EAAUl8J,MAAKg8J,EAAQruI,aAAa7D,MACzC9pB,MAAKi8J,EAAej8J,MAAKg8J,EAAQruI,aAAa7D,MAAMgB,MACtD,CAEA,WAAIsxI,GACF,MAAQlxI,WAAYlrB,MAAKg8J,EACzB,OAAI9wI,EAAQ8D,QACHhvB,MAAKq8J,EAAOr8J,MAAKg8J,EAAQpuI,qBAAqB0uI,4BAEnDpxI,EAAQgE,UACFlvB,MAAKg8J,EAAQtuI,gBAAiBxC,EAAQU,aAE5CV,EAAQrB,YACH7pB,MAAKk8J,EAAQt5I,QAAQ+H,UAD9B,CAEF,CAEA,WAAI8P,GACF,MAAMvP,EAAUlrB,MAAKg8J,EAAQ9wI,QAC7B,OAAOA,EAAQ8D,QACXhvB,MAAKq8J,EAAOr8J,MAAK+7J,EAAW9yI,kBAAkBiC,EAAQnqB,YACtD,IACN,CAEA,cAAIme,GACF,OAAOlf,MAAK+7J,EAAW78I,WAAWnc,KACpC,CAEA,WAAIid,GACF,MAAQkL,WAAYlrB,MAAKg8J,EACzB,OAAO9wI,EAAQ8D,QACXhvB,MAAKq8J,EAAOr8J,MAAKg8J,EAAQpuI,qBAAqB0uI,0BAAyB,IACvE,IACN,CAEA,SAAI3hJ,GACF,MAAMuQ,EAAUlrB,MAAKg8J,EAAQ9wI,QAE7B,OAAIA,EAAQ8D,QACHhvB,MAAKq8J,EAAOr8J,MAAKg8J,EAAQxuJ,cAAc0d,EAAQnqB,YAEpDmqB,EAAQgE,UACFlvB,MAAKg8J,EAAQvvI,gBAAiBvB,EAAQU,aAE5CV,EAAQ+D,aACH,CACL+O,SAAU,GACVztB,QAAS,SAHb,CAKF,CAGA,YAAIoS,GAA2B,OAAO3iB,MAAKu8J,EAAa,OAAS,CAEjE,eAAIl7I,GAA8B,OAAOrhB,MAAKu8J,EAAa,UAAY,CAEvEA,GAAax4H,GACX,MAAMpZ,EAAO3qB,MAAKk8J,EAAQv5I,SAASohB,GACnC,OAAO/jC,MAAKk8J,EAAQ52I,OAAOlB,aAAauG,EAC1C,CAEA,WAAI/H,GACF,OAAO5iB,MAAKw8J,EAAY,OAC1B,CAEA,cAAI16I,GACF,OAAO9hB,MAAKw8J,EAAY,UAC1B,CAEAA,GAAYz4H,GAGV,OADa/jC,MAAKk8J,EAAQt5I,QAAQmhB,EAEpC,CAGAs4H,GAAOv4I,GACL,OAAO9jB,MAAKi8J,GAAc/yD,KAAKplF,IAAQA,CACzC,ECxFI,MAAO24I,EAoBX58J,YAAY+jB,EAA2CgM,GACrD,MAAM1E,EAAUtH,EAAMgL,cAAc1D,QACpClrB,KAAKgB,MAAQkqB,EAAQlqB,MACrBhB,KAAK4iC,MAAQhf,EAAMmF,aACnB/oB,KAAK21I,IAAMzqH,EAAQyqH,IACnB31I,KAAK41J,KAAO1qI,EAAQ0qI,KAGpB,MAAQuB,gBAAeuF,IAAe94I,EAAMgL,cAAc1D,QAAQyrI,IAClE32J,KAAK22J,IAAMp2J,OAAO4vI,OAAO,IAAIwsB,EAAkB/4I,GAAQ84I,IAEvD18J,KAAKorB,OAAS,IAAIwxI,EAAqBh5I,GAEvC,MAAM1f,GAAW0f,EAAM1f,SACjBiI,EAAYyX,EAAMzX,UACxBnM,KAAK68J,QAAU,CACbt3G,KAAMrhD,GAASiJ,QACfkH,KAAMlI,EAAUzD,KAAKf,GAAKA,EAAE4E,SAAWrI,GAASiJ,UAAU2vJ,SAG5D98J,KAAKwhB,SAAW,IAAIu7I,EAAuBn5I,GAE3C5jB,KAAK+H,KAAO,IAAIi1J,EAAmBp5I,GAEnC5jB,KAAKwmG,SAAW,IAAIy2D,EAAuBr5I,GAE3C5jB,KAAKk9J,GAAKttI,CACZ,EAOF,MAAMqtI,EACJp9J,YAAoB+jB,GAAA5jB,KAAA4jB,OAA6C,CAOjE3W,SASE,OARmBjN,KAAK4jB,MAAMld,YAAYkE,QAAQ5K,KAAK4jB,MAAMnd,WAAWlB,OAAO2E,WAAWzJ,IAAIkI,KAC5F4P,KAAM5P,EAAEwB,OAAOhK,KACf6e,GAAIrW,EAAEwB,OAAOW,GACb0H,KAAM,CACJ+F,KAAM5P,EAAEwB,OAAOqE,KAAK1D,GACpBuJ,KAAM1L,EAAEwB,OAAOqE,KAAKF,QAI1B,CAQA6uJ,UAAUC,GACR,OAAOp9J,KAAKiN,SAASvE,KAAKR,GAAKA,EAAEsK,KAAK+F,MAAQ6kJ,GAAcl1J,EAAEsK,KAAK6B,MAAQ+oJ,EAC7E,EAGF,MAAML,EACJl9J,YAAoB+jB,GAAA5jB,KAAA4jB,OAA6C,CAEjEm3B,UAAU1mC,GACR,OAAOrU,KAAK4jB,MAAMpC,WAAW9Y,KAAKyhB,GAAKA,EAAEkzI,SAAWhpJ,IAAO0mC,YAAa,CAC1E,EAGF,MAAMiiH,EACJn9J,YAAoB+jB,GAAA5jB,KAAA4jB,OAA6C,CAEjE05I,cAEE,GADgBt9J,KAAK4jB,MAAMgL,cAAc1D,QAC7BnV,UAAY0Z,KAAgBC,GAGtC,OAFAvB,QAAQrO,MAAM,oKACd9f,KAAK4jB,MAAMsF,kBAAkBuL,kBAAkB,sBAIjDtG,QAAQrO,MAAM,6EAChB,EAUF,MAAM68I,EAEJZ,GAEAl8J,YAAYs8J,GACVn8J,MAAK+7J,EAAaI,CACpB,CAOAhF,WAAWoG,GACT,OAAIv9J,MAAK+7J,EAAWntI,cAAc1D,QAAQnV,UAAY0Z,KAAgBC,IACpEvB,QAAQC,KAAK,oEACN,oCAGMpuB,MAAK+7J,EAAWt1J,WAAWlB,OAAO4X,SAAS4iB,OAAOw9H,KAGjEpvI,QAAQC,KAAK,mBAAmBmvI,0GAEzB,mCACT,EAQF,MAAMX,EAOJb,GAEAl8J,YAAYs8J,GACVn8J,MAAK+7J,EAAaI,EAClB,MAAMlsD,EAAMksD,EAAUvtI,cAAc1D,QACpClrB,KAAKuf,OAAS0wF,EAAI4lD,aAGlB,MAAM2H,EAAsBvtD,EAAIjhF,SAAWihF,EAAIhhF,aAC/CjvB,KAAKqU,KAAOmpJ,EACRvtD,EAAIlvG,UACJkvG,EAAI7kF,OAAOS,UAAUokF,EAAI7kF,OAAOo1G,YAAY,KAAO,GACvDxgI,KAAKwS,KAAOgrJ,EACRvtD,EAAI7kF,OACJ6kF,EAAI7kF,OAAOS,UAAU,EAAGokF,EAAI7kF,OAAOo1G,YAAY,KACrD,gBCxKI,MAAOi9B,EAEX59J,YAAoB+jB,GAAA5jB,KAAA4jB,OAA6C,CAEjE6iF,cACE,OAAAzmG,MAAK09J,EAAqB,eACP19J,KAAK4jB,MAAMld,YAAYkE,QAAQ5K,KAAK4jB,MAAMnd,WAAWlB,OAAO2E,WAAWzJ,IAAIkI,KAC5F4P,KAAM5P,EAAEwB,OAAOhK,KACf6e,GAAIrW,EAAEwB,OAAOW,GACb0H,KAAM,CACJ+F,KAAM5P,EAAEwB,OAAOqE,KAAK1D,GACpBuJ,KAAM1L,EAAEwB,OAAOqE,KAAKF,QAI1B,CAEAgtH,YAAYv6H,GACV,OAAAf,MAAK09J,EAAqB,eACnB19J,KAAK4jB,MAAMsF,kBAAkB/L,SAASpc,IAC/C,CAEA48J,UAAUj9J,GACRV,MAAK09J,EAAqB,aAC1B,MAAMx9J,EAAOF,KAAK4jB,MAAMld,YAAYX,IAAIrF,GAExC,OADe,IAAI6M,KAAavN,KAAK4jB,MAAM1f,UAC7BsJ,cAActN,EAAKiK,OAAOvJ,WAC1C,CAEA88J,GAAqBrpJ,GACnB,MAAMuf,EArCc,gGAqCQhgB,QAAQ,MAAOS,GAC3C8Z,QAAQrO,MAAM8T,IAEV5zB,KAAK4jB,MAAMwF,iBAAiB/U,KAEhCrU,KAAK4jB,MAAMwF,iBAAiB/U,IAAQ,EACpCs3B,MAAM/X,GACR,0BC3CI,MAAOgqI,EAEX/9J,YACU0sB,EACAxlB,EACAgqB,EACA7F,EACA8F,GACA6sI,IALA79J,KAAAusB,cACAvsB,KAAA+G,YACA/G,KAAA+wB,SACA/wB,KAAAkrB,UACAlrB,KAAAgxB,WACAhxB,KAAA69J,gBAMH79J,KAAA2xH,QAAkB,EAJvB3xH,KAAK2xH,OAAS3xH,MAAK89J,EAAgB5yI,EACrC,CAKAsE,YACE,IAAKxvB,KAAK2xH,OAAQ,OAClB,MAAMxnG,EAAInqB,KAAKkrB,QACfiD,QAAQ9qB,IAAI,kBAAkB8mB,EAAEpU,SAASwhD,oCAAoCv3D,KAAKgxB,qBAAqB7G,EAAEppB,wBAAwBopB,EAAEiB,sBAAuBprB,KAAK69J,aACjK,CAEA5tI,WAAWtV,EAAmBu+I,EAAkBC,GAC9Cn5J,KAAKusB,YAAYvrB,MAAM2zJ,aAAa30J,KAAKkrB,QAASvQ,GAAO,GAAO,GAC5D3a,KAAK2xH,QACPxjG,QAAQ9qB,IAAI,kBAAmBsX,EACnC,CAEA8V,UAAU3Q,GACR,MAAMoL,EAAUlrB,KAAKkrB,QACfwsI,EAAa,6CAA6C13J,KAAKgxB,qBAAqB9F,EAAQnqB,wBAAwBmqB,EAAQE,UAClIprB,KAAKusB,YAAYvrB,MAAM2zJ,aAAazpI,OAASnb,GAAW,GAAM,GAC9D/P,KAAK+wB,OAAO8jI,OAAOC,IAActkI,MAAOknI,EAAY53I,GAChD9f,KAAK2xH,OACPxjG,QAAQrO,MAAM43I,EAAY53I,GAE1B9f,KAAK+wB,OAAOgkI,YAAY/0J,KAAK+G,UAAUyJ,QAAQ,6BAA8B,IACjF,CAOAstJ,GAAgB3zI,GACd,SAAO4C,OAAU,KACf,MAAMrP,EAAK1d,KAAKusB,YAAYsuI,gBAE5B,OADyBn9I,EAAGi0G,QAAUj0G,EAAGhd,aAAeypB,EAAEzpB,YAAcgd,EAAG3c,YAAcopB,EAAEppB,WAAa2c,EAAG0N,SAAWjB,EAAEiB,QAG5H,iBCtCI,MAAO8G,EAEXryB,YACU0sB,EACAxlB,EACAgqB,EACDC,GAHChxB,KAAAusB,cACAvsB,KAAA+G,YACA/G,KAAA+wB,SACD/wB,KAAAgxB,SACL,CAEGzB,YAAYH,GACjB,MAAMjF,EAAIiF,EAAUR,cAAc1D,QAC5BvnB,EAAS3D,MAAK+9J,EAAY3uI,GAC1BC,EAAY,IAAIuuI,EAAuB59J,KAAKusB,YAAavsB,KAAK+G,UAAW/G,KAAK+wB,OAAQ5G,EAAGnqB,KAAKgxB,QAASrtB,GAE7G,MAAO,CACLunB,QAASf,EACTppB,UAAWopB,EAAEppB,UACb4C,SACA6b,MAAOxf,KAAKgxB,QACZ3B,YACAC,UAAW,IAAI8E,KAAwBjK,EAAEppB,UAAWopB,EAAE6E,QAAS7E,EAAE5b,UAAW8gB,EAAUsiG,OAAQviG,EAAUR,cAAcjB,aAAa7D,MAAMgB,QAE7I,CAMAizI,GAAYzvI,GACV,MAAQpD,UAAS1d,cAAeF,GAAeghB,EAAUM,cAEzD,OAAQ1D,EAAQnV,SACd,KAAK0Z,KAAgBC,GACrB,KAAKD,KAAgBU,GAGnB,MAAMjlB,EAAO3K,OAAO4vI,OAAO,IAAI2rB,EAAkBxtI,GAAYhhB,GAEvDsiB,GAAe,IAAI6tI,EAA0BnvI,GAInD,MAAO,CACLpjB,OACA3H,QAJc,IAAIk5J,EAAqBnuI,EAAWsB,IAKlDA,iBAGJ,QAIE,MAAM,IAAIY,MAAM,yCAGtB,EAQI,MAAOrH,GACXtpB,YAAoBmgB,GAAAhgB,KAAAggB,SAAoC,CAExDjd,MACE,OAAK/C,MAAKg+J,IACRh+J,MAAKg+J,EAASh+J,KAAKggB,QAAU5X,KAAKw1B,MAAMx1B,KAAKC,UAAUrI,KAAKggB,UAAY,IACnEhgB,MAAKg+J,CACd,CACAA,oFCjFF,MAAMl7J,EAAW,CACfC,KAAK,EACLitB,IAAI,EACJM,IAAI,EACJ2tI,WAAW,EACXC,UAAU,EACV7iJ,OAAQ,YAAIC,IAMR,MAAO8Y,EAIXv0B,YACUkB,EACAiuB,EACAzgB,EACAojH,EACAwsC,GAJAn+J,KAAAe,YACAf,KAAAgvB,UACAhvB,KAAAuO,YACAvO,KAAA2xH,SACA3xH,KAAAm+J,cAPVn+J,KAAAqD,OAAMtD,MAAS,CAACq0B,2BAA0BtxB,EAQtC,CAGJktB,GAAGF,GACD,MAAM7O,EAAU6O,GAAY9O,MAAMC,QAAQ6O,IAAaA,EAAS24C,MAAMxoD,GAAkB,iBAANA,GAElF,KADqB,CAAC,SAAU,SAAU,WAAW/S,gBAAgB4iB,IAAaA,aAAoBypC,MAAQt4C,IAAY6O,EAExH,MAAO,CAAED,IAAI,EAAOC,SAAU9vB,KAAKkwB,qBAAgBngB,IAErD,MAAMquJ,EAAUp+J,KAAKgvB,QACjBhvB,MAAKq+J,EAAUvuI,GACfA,EACJ,MAAO,CAAED,IAAI,EAAMC,SAAU9vB,KAAKkwB,gBAAgBkuI,GACpD,CAEA9tI,GAAG9rB,GAED,MAAO,IADKxE,KAAKi+J,UAAUz5J,GACVqvB,eAAgB7zB,KAAK2xH,OACxC,CASAssC,UAAUz5J,GACR,MAAMmD,EAAI3H,KAAKqD,IAAI8a,WAAW,YAAa,SAAUne,KAAKe,UAAW,CAAEyD,WAOjEgsI,EAA4C,CAAE71H,WAAO5K,EAAWsL,OAAQ,GAAIsY,KAAM,KAAMrJ,MAAO,MACrG,GAAc,MAAV9lB,EACF,OAAOmD,EAAEsY,EAAE,IAAKuwH,EAAU71H,MAAOnW,GAAuB,cAE1D,MAAM85J,EAAgBt+J,KAAKgvB,QAG3B,GAAIhO,MAAMC,QAAQzc,GAChB2pB,eAAQC,KAAK,6HAA8H5pB,GACpImD,EAAEsY,EAAEuwH,EAAU,SAIvB,GAAsB,iBAAXhsI,EAAqB,CAC9B,GAAIA,aAAkB+0D,MAAQ+kG,EAC5B,OAAO32J,EAAEsY,EAAE,IAAKuwH,EAAU71H,MAAO3a,MAAKq+J,EAAU75J,IAAW,QAE7D,GAAIA,aAAkBivB,QACpB,OAAO9rB,EAAEsY,EAAE,IACNuwH,EACH71H,WAAO5K,EACPwgB,QAAS/rB,GACR,WAEL,MAAMsf,EAA8Btf,EAGpCsf,SAAI6P,OAAS,KACb7P,EAAIwG,QAAU,KAGVxG,EAAInJ,OAAS2jJ,IACfx6I,EAAInJ,MAAQqG,MAAMC,QAAQ6C,EAAInJ,OAC1B3a,KAAKm+J,aAAa53E,QAAQziE,EAAInJ,QAAUmJ,EAAInJ,MAC5C3a,MAAKq+J,EAAUv6I,EAAInJ,QAGrBmJ,EAAIzI,SACNyI,EAAIzI,OAASyI,EAAIzI,QAAQ5a,IAAI0pB,KAC3BA,GAAExP,MAAQ3a,MAAKq+J,EAAUl0I,GAAExP,OACpBwP,MAIPrG,EAAIlB,UACD5B,MAAMC,QAAQ6C,EAAIlB,SAGZkB,EAAIlB,QAAQ5Y,OAAS,IAC1B8Z,EAAIlB,QAAQla,KAAKyZ,KAAMA,IAAgB,MAAXA,GAAExH,SAChCwT,QAAQrO,MAAM,iCAAkCgE,EAAIlB,SACpDkB,EAAIlB,QAAU,IA+D1B,SAAS27I,EAAmB37I,GAC1B,IAAI47I,EAAM57I,EAAQniB,IAAI0hB,GAAKA,EAAExH,OACzB8jJ,EAAY,IAAIC,IAAIF,GACxB,OAAIA,EAAIx0J,SAAWy0J,EAAU/8C,OAC3BvzF,QAAQrO,MAAM,8BAA+B8C,IACtC,EAGX,CArEc27I,CAAmBz6I,EAAIlB,WACzBuL,QAAQrO,MAAM,8BAA+BgE,EAAIlB,SACjDkB,EAAIlB,QAAU,MAThBuL,QAAQrO,MAAM,0BAA2BgE,EAAIlB,SAC7CkB,EAAIlB,QAAU,KAYXjb,EAAEsY,EAAE6D,EAAK,SAClB,CAGA,MAAMnJ,EAAgC,CAAEA,MAAOnW,GAI/C,OAAI85J,EACK32J,EAAEsY,EAAE,IAAKuwH,EAAU71H,MAAO3a,MAAKq+J,EAAU1jJ,EAAMA,QAAU,qBAC3DhT,EAAEsY,EAAEtF,EAAO,wBACpB,CAQA0jJ,GAAU1jJ,GACR,GAAa,MAATA,EACF,OAAOA,EAET,MAAMpM,EAAYvO,KAAKuO,UAAUA,UAEjC,GAAIA,IAAcwnB,IAAiBumH,iBAAmB3hI,aAAiB4+C,KAAM,CAC3E,MAAMtI,EAAO,IAAIsI,KAAK5+C,GAGtB,QAAuB,iBAAVA,GAAsBA,EAAMjI,SAAS,OAASu+C,EAAKuI,YAAc7+C,GAC5Es2C,EAAK0tG,QAAQ1tG,EAAKuI,UAAuC,IAA3BvI,EAAKsoC,qBAErCtoC,EAAK2tG,gBAAgB,GACd3tG,EAAKmpC,QACd,CAEA,MAAuB,iBAAXz/E,IAAwBpM,GAAW/B,WAAWqyJ,IAAgBnpE,OAAOn0F,sBAC5EgN,GAAW/B,WAAWqyJ,IAAgBC,UAAUv9J,sBAC5CoZ,EAAMhC,WAERgC,CACT,CAGAuV,gBAAgBvV,GACd,MAAO,CACLA,QACAU,OAAQ,GACRsY,KAAM,KACNrJ,MAAO,KACPuJ,eAAgB7zB,KAAK2xH,OAEzB,mICjLK,MAAM7lG,EAAwB,kBAKxB2pI,EAAwB,CACnC16H,SAAU,GAAGjP,YACbxd,KAAM,GAAGwd,QACTmO,MAAO,GAAGnO,SACVuP,SAAU,GAAGvP,YACblpB,MAAO,cACPk1B,QAAS,GAAGhM,WACZ4pI,WAAY,oBAID4C,EAA6B/3J,OAAO2jB,OAAOuxI,GAK3CsE,EAA0B,CACrCgF,QAAS,gBACTC,SAAU,kBAICzG,EAA+Bh4J,OAAO2jB,OAAO61I,GAE7CzE,EAA8B,CACzCyE,EAAwBgF,QAExBhF,EAAwBiF,UAIb7zI,EAAgC,CAC3C4uI,EAAwBgF,QACxBhF,EAAwBiF,UAKbnF,EAAyB,CACpClgB,UAAW,GAAG7tH,aACd04G,eAAgB,GAAG14G,mBAGR0sI,EAA8Bj4J,OAAO2jB,OAAO21I,GAK5C8B,EAAiB,IACzBlG,KACAoE,KACAE,mFCnDE,IAAM7gH,EAAgB,MAAvB,MAAOA,UAAwBt5C,IAEnCC,cACEC,OAAA,EAAMC,MAAS,CAACm5C,qBAGTl5C,KAAAC,MAASC,GAAmBA,EAAKqM,OAAOhL,mBAFjD,iDAJW23C,EAAe,sCAAfA,EAAej4C,QAAfi4C,EAAeh4C,UAAAC,WADF,QAAM,SACnB+3C,CAAgB,mDCNtB,MAAMT,EAAmB,CAC9BI,UAAW,YACXC,cAAe,gBACfu5G,wBAAyB,0BACzBj6G,aAAc,eACdM,cAAe,gBACfK,aAAc,0GCOT,IAAMpX,EAAuB,MAA9B,MAAOA,UAA+B/hC,IAE1CC,cACEC,OAAA,EAAMC,MAAS,CAAC4hC,4BAGT3hC,KAAAC,MAASC,GAAoBA,EAAKC,IAF3C,CAIAmK,oBAAoB20J,GAClB,MAAMx3D,EAAYl8F,IAAUC,YAAYyzJ,GACxCj/J,KAAKa,QAAQ4mG,EACf,iDAXW9lE,EAAsB,sCAAtBA,EAAsB1gC,QAAtB0gC,EAAsBzgC,UAAAC,WADT,QAAM,SACnBwgC,CAAuB,yGCL7B,IAAMsF,EAAmB,MAA1B,MAAOA,UAA2BrnC,IAEtCC,cACEC,OAAA,EAAMC,MAAS,CAACknC,wBAGTjnC,KAAAC,MAASC,GAAyBA,EAAK4K,EAFhD,CAIAN,gBAAgBk8F,GACd,MAAMe,EAAYh8F,IAAeD,YAAYk7F,GAC7C1mG,KAAKa,QAAQ4mG,EACf,CAEAt5F,qBAAqBjO,GACnB,MAAMm9J,EAASrzH,IAAWC,qBAAqB/pC,GAC/C,OAAOF,KAAK+F,IAAIs3J,EAClB,CAEAzvH,aAAar1B,EAAclE,GACzB,OAAOrU,KAAK+F,IAAIwS,GAAM3X,WAAW8H,KAAKR,GAAKA,EAAEoG,OAAS+F,EACxD,CAEAsjJ,mBAAmBz3J,EAAemU,GAChC,OAAOrU,KAAKmO,qBAAqBjO,GAAMU,WAAW8H,KAAKR,GAAKA,EAAEoG,OAAS+F,EACzE,iDAxBW4yB,EAAkB,sCAAlBA,EAAkBhmC,QAAlBgmC,EAAkB/lC,UAAAC,WADL,QAAM,SACnB8lC,CAAmB,mDCL1B,MAAO+C,EACX,2BAAOC,CAAqB/pC,GAC1B,OAAOA,EAAKiK,OAAOqE,MAAM1D,IACnB5K,EAAK0I,OAA6Bs2J,eAC1C,6FCKK,IAAM3lC,EAAiB,MAAxB,MAAOA,UAAyB35H,IAEpCC,cACEC,OAAA,EAAMC,MAAS,CAACw5H,oBAAmB,OAG5Bv5H,KAAAC,MAASC,GAA4BA,EAAKsO,IAFnD,CAQAgsH,uBAAuB75H,GACrB,MAAMkN,EAAa7N,KAAKiN,SACxB,OAAOtM,EAAWF,IAAI60B,IACpB,MAAM1R,EAAQ5jB,KAAKm/J,iBAAiB7pI,EAAWznB,GAC/C,MAAO,CACLwG,KAAMihB,EAAUhnB,KAChBC,UAAWqV,EAAMrV,YAGvB,CAEA4W,SAASmQ,GACP,OAAOt1B,KAAKm/J,iBAAiB7pI,EAAWt1B,KAAKiN,SAC/C,CAEQkyJ,iBAAiB7pI,EAAoCznB,GAC3D,MAAMuxJ,EAAoBvxJ,EAAWnF,KAAKC,GAAKA,EAAE6F,OAAS8mB,EAAU7mB,WAC9DF,EAAY+mB,EAAU7mB,UACtB4F,EAAO9F,EAAUoK,WAUvB,MATmC,CACjCpK,YACAioB,aAAc4oI,GAAmBvhC,cACjCt3B,aAAclyF,EAAK7H,WAAW,YAAc6H,EAAK7H,WAAW,UAC5DwsI,iBAAkB,SAASzqI,IAC3BwtH,uBAAwB,SAASxtH,WACjCqsB,SAAUwkI,EACVv1I,YAAalb,IAAiBkb,YAAYtb,GAG9C,iDAzCWgrH,EAAgB,sCAAhBA,EAAgBt4H,QAAhBs4H,EAAgBr4H,UAAAC,WADH,QAAM,SACnBo4H,CAAiB,2ECPxB,MAAO8lC,EAQH,iBAAOC,CAAWC,GACxB,MAAM3kI,EAAWrvB,IAAUC,YAAY+zJ,EAAelwJ,UAChD8N,EAAWqiJ,IAAoBj8I,cAAcqX,GAUnD,MAR2C,CACzCnsB,UAAW8wJ,EAAe9wJ,UAC1BgxJ,QAASF,EAAeE,QACxBpwJ,SAAUurB,EACVtsB,KAAMixJ,EAAejxJ,KACrBjD,SAAU8R,EACV3O,KAAM+wJ,EAAe/wJ,KAGzB,CAEA,kBAAOhD,CAAYk0J,GACjB,OAAuB,MAAnBA,EAAkC,GAEnBA,EAAgBj/J,IAAIk/J,GAAcN,EAAwBC,WAAWK,GAE1F,EC9BI,MAAOl0J,EAYX,iBAAO6zJ,CAAWM,GAChB,MAAMj/J,EAAa0+J,EAAwB7zJ,YAAYo0J,EAAeh/J,YAChEg6B,EAAWrvB,IAAUC,YAAYo0J,EAAevwJ,UAChD8N,EAAWqiJ,IAAoBj8I,cAAcqX,GAWnD,MAToC,CAClCh6B,WAAYD,EACZmK,GAAI80J,EAAe90J,GACnBuE,SAAUurB,EACVtsB,KAAMsxJ,EAAetxJ,KACrBuxJ,MAAOD,EAAeC,MACtBx0J,SAAU8R,EACV8/E,MAAO2iE,EAAe3iE,MAG1B,CAEA,kBAAOzxF,CAAYs0J,GACjB,OAAuB,MAAnBA,EAAkC,KAEjBA,EAAgBr/J,IAAIm/J,GAAkBn0J,EAAe6zJ,WAAWM,GAEvF,gDCrCI,MAAOG,EAGX,aAAOziJ,CAAO3C,GACZ,MAAO,CAAE/X,MAAO+X,EAClB,+DCFI,MAAOqlJ,EAIX,cAAOna,CAAWoa,EAA2BztJ,GAE3C,MAAO,CACLutB,OAFamgI,IAASra,QAAQoa,GAG9BzxJ,KAAMgE,EAEV,ECVI,MAAOgtJ,EAGX,cAAO3Z,CAAQ8D,GACb,MAAMhpJ,EAAkC,GAGxC,UAAY4gG,EAAU4+D,KAAiB5/J,OAAOC,QAAQmpJ,GAEpD,UAAYyW,EAAeH,KAAa1/J,OAAOC,QAAQ2/J,GACrDx/J,EAAWy/J,GAAiBJ,EAASna,QAAQoa,EAAU1+D,GAG3D,OAAO5gG,CACT,CAEA,oBAAO4iB,CAAc88I,GACnB,GAAqB,MAAjBA,EAAyB,MAAO,GAEpC,MAAMvmI,EAA8B,GAEpC,UAAW55B,KAAQmgK,EACjB,GAAqB,SAAjBngK,EAAKsO,KAAK1D,GAEd,UAAYuJ,EAAMsG,KAAUpa,OAAOC,QAAQN,EAAKU,YAAa,CAC3D,MAAM0/J,EAAsB,IAAK3lJ,GACjCmf,EAAOzlB,GAAQisJ,CACjB,CAIF,UAAWpgK,KAAQmgK,EACjB,GAAqB,SAAjBngK,EAAKsO,KAAK1D,GAEd,UAAYuJ,EAAMsG,KAAUpa,OAAOC,QAAQN,EAAKU,YAAa,CAI3D,GAF+B,MAAhBk5B,EAAOzlB,IACqB,KAA1BsG,EAAMolB,OAAO,GAAGn9B,MACT,SAExB,MAAM09J,EAAsB,IAAK3lJ,GACjCmf,EAAOzlB,GAAQisJ,CACjB,CAEF,OAAOxmI,CACT,+DC7CI,MAAOvuB,EAUX,iBAAO+zJ,CAAWiB,GAChB,MAAM5/J,EAAa6+J,IAAoB3Z,QAAQ0a,EAAU3/J,YACnDg6B,EAAW56B,KAAKwL,YAAY+0J,EAAUlxJ,UAY5C,MAV0B,CACxBzO,WAAYD,EACZR,KAAMogK,EAAUpgK,KAChB2K,GAAIy1J,EAAUz1J,GACdk/I,MAAOuW,EAAUvW,MACjBx7I,KAAM+xJ,EAAU/xJ,KAChBy7I,QAASsW,EAAUtW,QACnBC,IAAKqW,EAAUrW,IACf76I,SAAUurB,EAGd,CAEA,kBAAOpvB,CAAYg1J,GACjB,OAAmB,MAAfA,EAA8B,KAEjBA,EAAY//J,IAAI8/J,GAAah1J,EAAU+zJ,WAAWiB,GAErE,+DC/BI,MAAO3a,EAIX,cAAOC,CAAQ4a,GAOb,MAJsB,CACpBt2J,OAHaoB,IAAU+zJ,WAAWmB,EAAgBt2J,QAIlDvB,OAAQ63J,EAAgB73J,OAG5B,8DCbI,MAAOs3J,EAIX,aAAO5iJ,CAAU3C,EAAU43I,GAKzB,MAJ8B,CAC5B3vJ,MAAO+X,EACP4uI,WAAYgJ,EAGhB,CAEA,cAAO1M,CAAW6a,GAKhB,OAJengK,OAAOC,QAAQkgK,GAAWjgK,IAAI,EAAEkL,EAAOgP,MACpD,MAAM43I,EAAa5mJ,EAAMc,MAAM,KAAKhM,IAAI+3C,GAAQunH,IAAaziJ,OAAOk7B,IACpE,OAAOx4C,KAAKsd,OAAO3C,EAAO43I,EAAU,EAGxC,qGCTK,IAAMnB,EAAc,MAArB,MAAOA,EAMXvxJ,YAAoBqH,GAAAlH,KAAAkH,WALZlH,KAAA2gK,MAAQ,IAAI9gE,IAA4B,IACxC7/F,KAAA4gK,SAAW,GACX5gK,KAAA6gK,iBAAmB,EACnB7gK,KAAA8gK,iBAAmB,GAEkB,CAE7CrpJ,cACEzX,KAAK2gK,MAAMjpJ,UACb,CAEAm9I,OAAO72H,EAAoCtjB,EAAeoF,GACxD,MAOMihJ,EAAU,CAPc,CAC5BjhJ,QACApF,QACAsjB,WACA2oD,KAAMptB,KAAK7qC,UAEG1uB,KAAK2gK,MAAMhmJ,MACcg+C,MAAM,EAAG34D,KAAK4gK,SAAW,IAClE5gK,KAAK2gK,MAAMtmJ,KAAK0mJ,EAClB,CAGAhM,YAAYxkJ,EAAiBG,EAAkBswJ,GAC7C,MAAMC,EAAU1nG,KAAK7qC,OAChBsyI,GAAUC,EAAUjhK,KAAK6gK,kBAAqB7gK,KAAK8gK,mBAIxC,MAAZpwJ,GAAoBA,EAAW,EACjC1Q,KAAKkH,SAASuJ,KAAKF,EAAS,KAAM,CAAEG,aAEpC1Q,KAAKkH,SAASuJ,KAAKF,GAErBvQ,KAAK6gK,iBAAmBI,EAC1B,CAEAC,WACE,OAAOlhK,KAAK2gK,MAAM1nF,cACpB,CAEAkoF,gBACE,SAAOjoJ,MAASlZ,KAAK2gK,MACvB,iDA7CWvP,GAAc1sJ,MAAAC,MAAA,sCAAdysJ,EAAcnwJ,QAAdmwJ,EAAclwJ,WAAA,SAAdkwJ,CAAc,KAyDpB,MAAM0D,EAAgB,CAC3BtkI,MAAO,QACP4wI,IAAK,MACLC,KAAM,gIC3DR,MAAMv+J,EAAW,CACfC,KAAK,EACLo3B,sBAAsB,EACtBhrB,oBAAoB,EACpBkM,OAAQ,IAAIC,IAAa,iBAQrB,MAAOrN,EAKXpO,YAAYkiB,GAFZ/hB,KAAAqD,OAAMtD,MAAS,CAACkO,yBAAwBnL,EAEV,CAQ9Bq3B,qBAAqBp5B,EAAmBoc,GACtC,MAAMxV,EAAI3H,KAAKqD,IAAI8a,WAAW,uBAAwB,SAAUpd,EAAW,CAAEA,YAAWoc,aAClFmkJ,GAAwBnkJ,EAC9B,GAA6C,MAAzCmkJ,GAAsBC,gBACxB,OAAO55J,EAAEsY,EAAE9C,EAAU,uBAEvB,IACE,MAAMqkJ,EAAkBp5J,KAAKw1B,MAAM0jI,GAAsBC,iBACzD,OAAO55J,EAAEsY,EAAE,IAAK9C,KAAaqkJ,GAAmB,0BAClD,OAAS1hJ,GACPqO,eAAQrO,MAAM,uBAAwBA,GAC/BnY,EAAEsY,EAAE9C,EAAU,iCACvB,CACF,CAEAhO,mBAAmBgO,GACjB,MAAMskJ,EAAcC,EAAcC,uBAAuB,IAAKxkJ,IAE9DskJ,EAAYnzJ,OAAS,GACrBmzJ,EAAYznI,cAAgB,GAC5BynI,EAAYxnI,QAAU,GACtBwnI,EAAYpmI,YAAa,EACzBomI,EAAY1mI,YAAa,EACzB0mI,EAAYlvI,sBAAuB,EACnCkvI,EAAY3pI,WAAY,EACY,MAAhC2pI,EAAYG,mBACdH,EAAY9nB,UAAY8nB,EAAYG,wBAC7BH,EAAYG,kBAErBH,EAAYnN,WAAa,GACzB,IAAIzlJ,EAAQC,IAAkBC,YAAYhJ,IAAIoX,EAAS1O,WACvDgzJ,SAAY/hI,0BAA4B7wB,GAAO06B,iBACxCk4H,CACT,CAEAxmI,cAAc/sB,EAA6BonB,GACzC,MAAMttB,EAAQkG,EAAYtN,WAAW+tF,QAAQr5D,GAC7C,OAAyC,MAArCpnB,EAAYtN,WAAWoH,EAAQ,MAG/BA,EADsBkG,EAAYtN,WAAW6yG,UAAUvrG,GAAKyG,IAAiBmnB,aAAa5tB,EAAEuG,cAG5FE,IAAiBuwI,WAAW5pH,EAAU7mB,aAEtCE,IAAiBypB,kBAAkBlqB,EAAYtN,WAAWoH,EAAQ,GAAGyG,WAG3E,CAEAkwB,+BACE1vB,EACAmwB,EACAl7B,GAEA,MAAMi8B,GAAc,IAAI5wB,IAAYN,EAAiB/K,GACrD,QAAIA,EAASiJ,UAAYjJ,EAASkJ,SAC7B+yB,GAAYF,aACbb,GACAe,GAAYC,kBAGlB,CAEA9N,oBAAoBrjB,EAAgCmwB,EAA6Bl7B,EAAwB0+B,IAIvG,IAAIoa,EACAC,GAJAra,IACF5iC,KAAKqD,IAAIib,GAAG,sBAAuB,CAAErP,kBAAiBmwB,qBAAoBl7B,aAK5E,MAAMi8B,GAAc,IAAI5wB,IAAYN,EAAiB/K,GAErD,GAAIk7B,EACF4d,EAAY,0BACZC,GAAc,WACJ9c,GAAYF,WAGjB,CACL,MAAM4hI,EAAc1hI,GAAYC,kBAC1B0hI,EAAc3hI,GAAYE,mBAEhC,GAAIwhI,GAAeC,EAAa,CAC9B,MAAMvP,GAAapyH,GAAYhzB,QAC5Bo8I,WAAW9oJ,IAAI+oJ,GAAaA,EAAU5mJ,OACtCH,OAAO+mJ,IAAcA,EAAUt8I,SAAShJ,EAASiJ,UAEnColJ,GAAWvoJ,OAAS,GAE/B63J,EACF7kH,EAAY,cACL8kH,IACP9kH,EAAY,iBAEdC,GAAcW,IAAqB00G,2BAA2BC,GAAYruJ,EAASiJ,WAEnF6vC,EAAY,GACZC,GAAc,GAElB,MACED,EAAY,sBACZC,GAAc,EAElB,MA3BED,EAAY,mCACZC,GAAc/4C,EAASkJ,QA2BzB,MAAMuM,EAAQ3Z,MAAK+hK,EAAyB9yJ,EAAiBmwB,EAAoBl7B,GAOjF,MAN2C,CACzC84C,YACAC,eACA/4C,SAAUyV,EAAMzV,SAChBq0C,SAAU5+B,EAAM4+B,SAGpB,CAEAwpH,GACE9yJ,EACAmwB,EACAl7B,GAEA,MAAMi8B,GAAc,IAAI5wB,IAAYN,EAAiB/K,GAErD,IAAKi8B,GAAYF,WACf,MAAO,CAAE/7B,SAAU,GAAIq0C,SAAUE,IAAiB45G,yBAEpD,GAAIjzH,EACF,MAAO,CAAEl7B,SAAU,GAAIq0C,SAAUE,IAAiBK,eAEpD,GAAI3Y,GAAYC,kBAAmB,CACjC,MAAM4hI,EAAmB7hI,GAAYhzB,QAClCo8I,WAAW9mJ,OAAO0T,IAAKA,GAAEvT,QAAUsB,EAASiJ,SAE/C,OAAQ60J,EAAiBh4J,OAAS,EAC9B,CAAE9F,SAAU89J,EAAiB,GAAGp/J,MAAO21C,SAAUE,IAAiBC,eAClE,CAAEx0C,SAAU,GAAIq0C,SAAUE,IAAiBI,UACjD,CAEA,OAAI1Y,GAAYE,mBAIP,CAAEn8B,SAHgBi8B,GAAYhzB,QAClCo8I,WAAW9mJ,OAAO0T,IAAKA,GAAEvT,QAAUsB,EAASiJ,SAEX,GAAGvK,MAAO21C,SAAUE,IAAiBL,cAGpE,CAAEl0C,SAAU,GAAIq0C,SAAUE,IAAiBK,cACpD,EAEF,MAAM4oH,EAIJ,6BAAOC,CAAuBxkJ,GAC5B,IAAI8kJ,EAAe9kJ,EACnB,OAAoC,MAAhC8kJ,EAAaC,kBACjB/kJ,EAAS2a,QAAUmqI,EAAaC,uBACzBD,EAAaC,iBACb/kJ,CACT,2ICvLI,MAAOglJ,EAAbtiK,cAEEG,KAAAqD,OAAMtD,MAAS,CAACoiK,eAoOlB,CAjOEC,GACEC,EACAC,EACAhtI,GAEA,MAAMitI,GAAqC,GAC3C,GAA0C,IAAtChiK,OAAOkF,KAAK48J,GAAer4J,OAAc,CAC3C,MAAMw4J,GAA+B,IAAKltI,GAC1CitI,UAAcD,GAAgBE,GACvBD,EACT,CAEA,UAAWlhK,MAAOd,OAAOkF,KAAK48J,GAC5B,GAAIhhK,KAAQihK,EAAc,CACxB,MAAME,EAA+B,IAAKltI,GAC1CitI,GAAclhK,IAAOmhK,CACvB,KAAO,CACL,MAAMA,EAA+B,IAAKH,EAAchhK,KACxDkhK,GAAclhK,IAAOmhK,CACvB,CAGF,GAAmC,MAA/BH,EAAcC,GAAuB,CACvC,MAAME,GAA+B,IAAKltI,GAC1CitI,GAAcD,GAAgBE,EAChC,CACA,OAAOD,EACT,CAGAE,uBACEjb,EACAkb,EACAx+J,GAEA,MAAMyD,GAAI3H,KAAKqD,IAAIib,GAAG,yBAA0B,CAAEkpI,YAAWkb,eAAcx+J,aAErEy+J,GAAqC,GAC3CpiK,cAAOkF,KAAK+hJ,GAAWr1I,QAAQmwJ,IAC7B,MAAMM,EAAeF,EAAaJ,GAGlC,QAAqBvyJ,IAAjB6yJ,EAKF,GAJW,IAAIrzJ,IAAYi4I,EAAU8a,GAAep+J,GAClB6oC,uCAGN,CAC1B,MAAMq7G,EAA2B,IAC5BZ,EAAU8a,GACbviI,OAAQynH,EAAU8a,GAAcviI,OAAOt/B,IAAI41E,GACrB,IAAIwsF,IAAgBxsF,EAAIkzE,WAAYrlJ,GAAU4+J,WAG9D,IACKzsF,EACHzzE,MAAOggK,GAEPvsF,IAIVssF,GAAcL,GAAgBla,CAChC,KAAO,CACLzgJ,GAAEO,EAAE,kCAAmC,CAAE06J,iBACzC,MAAMG,EAAc7C,IAAS5iJ,OAAOslJ,EAAc,CAAC7C,IAAaziJ,OAAOpZ,EAASiJ,WAChFw1J,GAAcL,GAAgB,IACzB9a,EAAU8a,GACbviI,OAAQ,IAAIynH,EAAU8a,GAAcviI,OAAQgjI,GAEhD,MAEAJ,GAAcL,GAAgB,IAAK9a,EAAU8a,GAAa,GAGvDK,EACT,CAGAK,qBACErxI,EACA2wI,EACA7/G,EACAv+C,GACAmjB,IAGA,IAAIs7I,EAAqC,GACrCM,EAAmB/+J,GAASiJ,QAE5Bka,KACF47I,EAAmB,IAAI/+J,GAASiJ,WAElC,MAAMmoB,EAA2B,IAC5B3D,EAAc2wI,GAAeviI,OAAQpO,EAAc2wI,GAAcviI,OAAOt/B,IAAI41E,GACzD,IAAIwsF,IAAgBxsF,EAAIkzE,WAAYrlJ,IAAU4+J,WAG9D,IACGzsF,EAEHzzE,MAAO6/C,EAEP8mG,WAAYlzE,EAAIkzE,WAAW9oJ,IAAI0V,GACGA,EAAEvT,QAAUsB,GAASiJ,SAChDgJ,EAAEvT,QAAU,IAAIsB,GAASiJ,WACxBjJ,GAASiJ,UAAYjJ,GAASkJ,SAAuB,MAAZ+I,EAAEvT,MAE7C,CAAEA,MAAOqgK,GACT9sJ,IAGNkgE,IAIRssF,SAAgB3iK,MAAKoiK,EAAiBzwI,EAAe2wI,EAAchtI,GAC5DqtI,CACT,CAEAO,kBACEvxI,EACAwxI,EACAb,EACAc,IAGA,IAAIT,GAAqC,GACzC,MAAMrtI,EACkC,IAAtC/0B,OAAOkF,KAAKksB,GAAe3nB,QAAiB2nB,EAAc2wI,GAMtD,IACG3wI,EAAc2wI,GACjBviI,OAAQ,IAAIpO,EAAc2wI,GAAcviI,OAAQojI,GAChD30J,KAAM40J,IARN,IACGzxI,EAAc2wI,GACjBviI,OAAQ,CAACojI,GACT30J,KAAM40J,IAOZT,UAAgB3iK,MAAKoiK,EAAiBzwI,EAAe2wI,EAAchtI,GAC5DqtI,EACT,CAGAU,sBACE1xI,EACA2wI,EACAgB,EACAC,GACAC,GACAn8I,GAGA,IAAIs7I,EAAqC,GACrCM,EAAmBK,EAEnBj8I,IACF47I,EAAmB,IAAIK,KAGzB,MAAMhuI,EAA2B,IAC5B3D,EAAc2wI,GAAeviI,OAAQpO,EAAc2wI,GAAcviI,OAAOt/B,IAAIgjK,GAC7CA,EAASla,WAAW7gJ,KAAKyN,GAAKA,EAAEvT,QAAU2gK,IACpEA,KAA2BC,IAA+B,MAAZrtJ,EAAEvT,OAElD,IACG6gK,EAEHla,WAAYka,EAASla,WAAW52I,OAAO,CAAE/P,MAAOqgK,KAEhDQ,IAIRd,SAAgB3iK,MAAKoiK,EAAiBzwI,EAAe2wI,EAAchtI,GAC5DqtI,CACT,CAGAe,yBAAyB/iK,EAAiC2hK,EAAsBp+J,GAC9E,MAAMm+J,GAAgB1hK,EAChBgjK,GAAkB,CAACz/J,EAAU,IAAIA,KAEjCyW,EAAQ0nJ,GAAcC,GAAcviI,OAAOr3B,KAAK+6J,GAC5BA,EAASla,WAAWrzI,KAAKC,GAAKwtJ,GAAgBz2J,SAASiJ,EAAEvT,SAKnF,IAAK+X,EAEH,MAD4C,IAAK0nJ,IAInD,IAAIuB,EACJ,OAAIjpJ,EAAM4uI,WAAWv/I,OAAS,EAE5B45J,EAAe,IACVvB,GAAcC,GACjBviI,OAAQsiI,GAAcC,GAAcviI,OAAOt/B,IAAIgjK,GACrBA,EAASla,WAAWrzI,KAAKC,GAAKwtJ,GAAgBz2J,SAASiJ,EAAEvT,QAG7E,IACK6gK,EACHla,WAAYka,EAASla,WAAW9mJ,OAAO0T,IAAMwtJ,GAAgBz2J,SAASiJ,EAAEvT,SAH1E6gK,IAO6B,IAA5B9oJ,EAAM4uI,WAAWv/I,SAE1B45J,EAAe,IACVvB,GAAcC,GACjBviI,OAAQsiI,GAAcC,GAAcviI,OAAOt9B,OAAOghK,IACxBA,EAASla,WAAWrzI,KAAKC,GAAKwtJ,GAAgBz2J,SAASiJ,EAAEvT,WAMjE5C,MAAKoiK,EAAiBC,GAAeC,EAAcsB,EAE3E,0BChOF,MAAM9gK,EAAW,CACfC,KAAK,EACL2sJ,cAAc,EACdxK,kBAAkB,EAClBh1I,uBAAuB,EACvBu8B,0BAA0B,EAC1B/8B,iBAAiB,EACjBw3I,4BAA4B,EAC5B95G,2BAA2B,EAC3Bn9B,8BAA8B,EAC9B61I,oBAAoB,GAGhB,MAAO+d,EAIXhkK,YAAoBukC,GAAApkC,KAAAokC,UAFpBpkC,KAAAqD,OAAMtD,MAAS,CAAC8jK,oBAAmB/gK,EAES,CAE5C4sJ,aAAaoU,GACD9jK,KAAKqD,IAAIC,KAAK,eAAgB,CAAEwgK,eAA1C,MACMpjK,EAAaH,OAAOkF,KAAKq+J,GAAY,GACrC7kJ,GAAW6kJ,EAAWpjK,GACtBqjK,GAAU/jK,KAAKokC,QAAQr+B,IAAIrF,GACjC,IAAKqjK,IAAgE,IAAnDA,GAAQn7J,OAA8Bo7J,UAAwC,IAAtBD,GAAQ55J,OAAOW,GACvF,OAEF,MAAMm5J,EAAmB,IACpBF,GACHn7J,OAAQ,IACHm7J,GAAQn7J,OACXo7J,SAAU/kJ,IAEZ9U,OAAQ,IACH45J,GAAQ55J,OACXW,GAAImU,KAGRjf,KAAKokC,QAAQ5hC,IAAIyhK,EACnB,CAIA/e,iBAAiBxkJ,EAAoBsyH,GACnC,MAAMrrH,EAAI3H,KAAKqD,IAAIC,KAAK,mBAAoB,CAAE5C,aAAYsyH,WACpD+wC,GAAU/jK,KAAKokC,QAAQr+B,IAAIrF,GACjC,IAAKqjK,GAAS,OAEd,MAAME,GAAmB,IACpBF,GACHn7J,OAAQ,IACHoqH,IAGPhzH,KAAKokC,QAAQ5hC,IAAIyhK,IACjBt8J,EAAE8R,KACJ,CAIAvJ,sBACExP,EACA4hK,EACAh5F,EACA37B,GACAtmB,GACA+7I,EACAj5H,GAAgB,EAChBn6B,GAEUhQ,KAAKqD,IAAIC,KAAK,wBAAyB,CAAE5C,aAAY4hK,eAAch5F,WAAU37B,mBAAiBtmB,cAAY+7I,gBAAej5H,gBAAen6B,oBAAlJ,MAEM+yJ,EAAc7C,IAAS5iJ,OAAOgsD,EAAU,CAACy2F,IAAaziJ,OADlC+J,GAAa,IAAIsmB,KAAoBA,MAEzDo2H,EAAU/zJ,GAAmBhQ,KAAKokC,QAAQr+B,IAAIrF,GAE9CujK,EAAmB,IACpBF,EACH55J,OAAQ,IACH45J,EAAQ55J,OACXvJ,YAAY,IAAIuhK,GAAce,kBAAkBa,EAAQ55J,OAAOvJ,WAAYmiK,EAAaT,EAAcc,KAK1G,OAAKj5H,GACHnqC,KAAKokC,QAAQ5hC,IAAIyhK,GAEZA,CACT,CAEAx3H,yBACE/rC,EACA4hK,EACAh5F,EACAplE,GACAmjB,IAEUrnB,KAAKqD,IAAIC,KAAK,2BAA4B,CAAE5C,aAAY4hK,eAAch5F,WAAUplE,YAAUmjB,gBAApG,MACM08I,EAAU/jK,KAAKokC,QAAQr+B,IAAIrF,GACjC,IAAKqjK,EAAS,OAEd,MAAME,EAAmB,IACpBF,EACH55J,OAAQ,IACH45J,EAAQ55J,OACXvJ,YAAY,IAAIuhK,GAAca,qBAC5Be,EAAQ55J,OAAOvJ,WAAY0hK,EAAch5F,EAAUplE,GAAUmjB,MAInErnB,KAAKokC,QAAQ5hC,IAAIyhK,EACnB,CAEAv0J,gBACExP,EACAkO,EACAG,EACA4O,GACAhR,GACAq3J,GAEA,MAAM77J,EAAI3H,KAAKqD,IAAIC,KAAK,kBAAmB,CAAEpD,OAAMkO,cAAaG,YAAW4O,YAAUhR,aAAWq3J,mBAAmB,SAASp1J,EAAYE,QAClIk8B,EAAe,IAAI3c,KAAczf,EAAYE,KAAMC,GAAWC,KAAM2O,GAAUjd,EAAK0I,QAAQ0zJ,2BAQ3FnsJ,EAAuB,IAAIZ,IAAYrP,EAAKiK,OAAOvJ,WAAWwN,EAAYE,MAAOk1J,GAAiB1zJ,kBAAkBlN,MAGpHshK,EAAqC,IAArB/3J,GAAUnC,QAAgBuE,GAAWqB,YAAe,IAAM4zJ,EAChF,YAA6BzzJ,IAAzBI,EACFnQ,KAAKkQ,sBAAsBhQ,EAAKiK,OAAOhK,KAAMiO,EAAYE,KAAMk8B,EAAc05H,GAAc,EAAO91J,EAAYI,MAG9GxO,KAAKysC,yBAAyBvsC,EAAKiK,OAAOhK,KAAMiO,EAAYE,KAAMk8B,EAAc,CAAEr9B,QAAS+2J,EAAc92J,QAASo2J,IAAmB,GAIhI77J,EAAEsY,EAAEuqB,EACb,CAMA08G,2BAA2BxmJ,EAAoB0nJ,EAAiClkJ,GAC9E,MAAMyD,GAAI3H,KAAKqD,IAAIC,KAAK,6BAA8B,CAAE5C,aAAY0nJ,YAAWlkJ,aACzE6/J,GAAU/jK,KAAKokC,QAAQr+B,IAAIrF,GACjC,IAAKqjK,GAAS,OAAOp8J,GAAE8R,IAAI,kBAE3B,MAAMggB,EAAS,IAAIlsB,KAAarJ,GAC1BikJ,EAAkC,GAClCgc,EAAiB5jK,OAAOC,QAAQujK,GAAQ55J,OAAOvJ,YAClD6B,OAAO,EAAE4R,KAAU+zI,EAAUj7D,eAAe94E,IAC/C,UAAYA,EAAM6P,KAAWigJ,EAC3Bhc,EAAU9zI,GAAQolB,EAAO2M,aAAaliB,GAExC,MAAMuc,EAAUE,IAAkBsmH,qBAAqBkB,EAAWC,GAClE,GAAe,MAAX3nH,EACF,OAAO94B,GAAE8R,IAAI,cAEf,MAAM8oJ,GAAgB,IAAIJ,GAAcM,uBAAuBsB,GAAQ55J,OAAOvJ,WAAY6/B,EAASv8B,GAC7F+/J,EAAmB,IACpBF,GACH55J,OAAQ,IACH45J,GAAQ55J,OACXvJ,WAAY2hK,IAGhBviK,KAAKokC,QAAQ5hC,IAAIyhK,EACnB,CAUA72H,0BACE1sC,EACA4hK,EACA30H,EACAy2H,GACAZ,GACAn8I,EACArX,GAEUhQ,KAAKqD,IAAIC,KAAK,4BAA6B,CAAE5C,aAAY4hK,eAAc30H,kBAAiBy2H,qBAAmBZ,mBAAiBn8I,aAAYrX,oBAAlJ,MACM+zJ,EAAU/zJ,GAAmBhQ,KAAKokC,QAAQr+B,IAAIrF,GAE9CujK,EAAmB,IACpBF,EACH55J,OAAQ,IACH45J,EAAQ55J,OACXvJ,YAAY,IAAIuhK,GAAckB,sBAC5BU,EAAQ55J,OAAOvJ,WAAY0hK,EAAc30H,EAAiBy2H,GAAmBZ,GAAiBn8I,KAIpGrnB,KAAKokC,QAAQ5hC,IAAIyhK,EACnB,CAGAh0J,6BACEvP,EACAK,EACAoM,EACAk3J,IAAc,EACdr0J,IAEA,MAAMrI,EAAI3H,KAAKqD,IAAIC,KAAK,+BAAgC,CAAE5C,aAAY4hK,aAAcvhK,EAAW4sC,gBAAiBxgC,EAASg9B,cAAek6H,GAAar0J,qBAC/I+zJ,EAAU/zJ,IAAmBhQ,KAAKokC,QAAQr+B,IAAIrF,GAE9CujK,EAAmB,IACpBF,EACH55J,OAAQ,IACH45J,EAAQ55J,OACXvJ,YAAY,IAAIuhK,GAAcuB,yBAAyBK,EAAQ55J,OAAOvJ,WAAYG,EAAWoM,KAIjG,OAAKk3J,IACHrkK,KAAKokC,QAAQ5hC,IAAIyhK,GACZt8J,EAAEsY,EAAEgkJ,EACb,CAMAne,mBAAmBplJ,EAAoBk6B,GACrC,MAAMjzB,EAAI3H,KAAKqD,IAAIC,KAAK,qBAAsB,CAAE5C,aAAYk6B,aACtDmpI,GAAU/jK,KAAKokC,QAAQr+B,IAAIrF,GAC3BujK,GAAmB,IACpBF,GACH55J,OAAQ,IACH45J,GAAQ55J,OACXkF,SAAUurB,IAGd56B,KAAKokC,QAAQ5hC,IAAIyhK,IACjBt8J,EAAE8R,IAAI,KAAM,CAAEwqJ,YAChB,sCCpPK,IAAMriI,GAAY,MAAnB,MAAOA,UAAoB0iI,IAE/BzkK,cACEC,OAAA,EAAMC,MAAS,CAAC6hC,iBAGT5hC,KAAAC,MAASC,GAAkBA,EAAKiK,OAAOhK,KAEzCH,KAAA2N,QAAU,IAAIk2J,EAAiB7jK,MAkBtCA,MAAAukK,EAAuB,IAAIp/J,KAAiD,kBAiC5EnF,MAAAwkK,EAAmB,IAAIr/J,KAAkD,cAYzEnF,MAAAykK,EAAoB,IAAIt/J,KAAqC,cAnE7D,CAQAiF,UAAUs6J,GACR,MAAMxiK,EAAQwiK,EAASjkK,IAAIP,IAAQ0lJ,IAAQC,QAAQ3lJ,KACnDF,KAAKa,QAAQqB,EACf,CAMAsgC,qBAAqB9hC,GACnB,MAAMiH,EAAI3H,KAAKqD,IAAIib,GAAG,iBAAkB,CAAE5d,eACpC8D,GAASxE,MAAKukK,EAAqB1+J,YAAYnF,EAAY,IAAMV,KAAK2kK,UAAUjkK,EAAfV,IAA8BmK,OAAOvJ,YAC5G,OAAO+G,EAAEsY,EAAEzb,GACb,CACA+/J,GAEApvI,kBAAkBz0B,GAChB,MAAMiH,EAAI3H,KAAKqD,IAAIib,GAAG,oBAAqB,CAAE5d,eACvC8D,GAASxE,KAAK+F,IAAIrF,IAAayJ,OAAOvJ,WAC5C,OAAO+G,EAAEsY,EAAEzb,GACb,CAEAogK,mBAAmBlkK,GACjB,OAAOV,KAAK6kK,MAAMhhK,QAChBpD,KAAIyB,GAASA,EAAMwG,KAAKxI,IAAQA,GAAKiK,OAAOhK,OAASO,IAAayJ,OAAOvJ,aAAU,EACnFiY,KAAgBgnB,GAAKA,GAEzB,CAMAklH,cAAcrkJ,GACZ,OAAOV,KAAK+F,IAAIrF,IAAakI,MAC/B,CAEAi+I,eAAenmJ,GACb,OAAOV,KAAK6kK,MAAMhhK,QAChBpD,KAAIyB,GAASA,EAAMwG,KAAKxI,IAAQA,GAAKiK,OAAOhK,OAASO,IAAakI,SAAM,EACxE80I,KAAmB79G,GAAKA,GAE5B,CAEAhZ,oBAAoBnmB,GAClB,OAAOV,MAAKwkK,EAAiB3+J,YAAYnF,EAAY,IAAMV,KAAK2kK,UAAUjkK,EAAfV,IAA8B4I,OAC3F,CACA47J,GAMAxlI,YAAYt+B,GACV,OAAOV,MAAKykK,EAAkB5+J,YAAYnF,EAAY,KACpD,MAAMsyH,EAAShzH,KAAK2kK,UAAUjkK,EAAfV,IAA8B4I,OAC7C,OAAiB,MAAVoqH,GAAwBA,EAAO8xC,gBAAkB9xC,EAAOiyB,SAEnE,CACAwf,GAOApgB,WAAW3jJ,GACT,OAAOV,KAAK+F,IAAIrF,IAAayJ,OAAO+/I,GACtC,CAGAxF,YAAYhkJ,GACV,OAAOV,KAAK+F,IAAIrF,IAAayJ,OAAOkF,UAChC3G,KAAKkyB,GAAYA,EAASpsB,KAAKF,OAAS4xH,KAAax5B,aAAavmD,MACxE,iDAtFWve,EAAW,uCAAXA,EAAW3gC,QAAX2gC,EAAW1gC,UAAAC,WADE,QAAM,SACnBygC,CAAY,2ECJlB,IAAe0vF,EAAa,MAA7B,MAAgBA,EALtBzxH,cAQYG,KAAA+Z,cAAgB,IAAIw5B,KAE9B97B,cACEzX,KAAK+Z,cAAc06B,aACrB,iDAPoB68E,EAAa,oCAAbA,EAAanjF,UAAA,yBAAAC,MAAA,EAAAC,KAAA,EAAAE,SAAA,SAAAC,EAAAC,GAAA,EAAAK,cAAA,YAAbwiF,CAAa,2ECV5B,IAAew6B,EAAa,MAA7B,MAAgBA,EAIpBjsJ,cAFUG,KAAA+Z,cAAgB,IAAIw5B,IAG9B,CAEA97B,cACEzX,KAAK+Z,cAAc06B,aACrB,iDAToBq3G,EAAa,oCAAbA,GAAa,SAAbA,CAAa,mDCL5B,MAAM+S,EAAkB,CAC7B36D,QAAS,UACT6gE,OAAQ,SACRC,SAAU,WACVC,MAAO,QACP96J,OAAQ,SACR20J,UAAW,YACX1wF,OAAQ,SACRsnB,OAAQ,sCCPJ,SAAUwvE,EAAgBC,GAC9B,MAAMxmB,EAAKtrI,SAASC,cAAc,YAClCqrI,EAAGhkI,MAAQwqJ,EACXxmB,EAAGrqG,aAAa,WAAY,IAC5BqqG,EAAGn+E,MAAM0G,SAAW,WACpBy3E,EAAGn+E,MAAMioB,KAAO,UAChBp1E,SAAS8pH,KAAKxpH,YAAYgrI,GAC1B,MAAMh8H,EACJtP,SAAS+xJ,eAAeC,WAAa,GACjChyJ,SAAS+xJ,eAAeE,WAAW,GAEzC3mB,EAAGn5E,SACHnyD,SAASkyJ,YAAY,QACrBlyJ,SAAS8pH,KAAKpd,YAAY4+B,GACtBh8H,IACFtP,SAAS+xJ,eAAeI,kBACxBnyJ,SAAS+xJ,eAAeK,SAAS9iJ,GAErC,uFCbO,IAAM+2B,EAAY,MAAnB,MAAOA,EAEX75C,YAAoB6lK,GAAA1lK,KAAA0lK,WAA2B,CAE/C/gI,UAAUghI,GACR,OAAO3lK,KAAK0lK,UAAUlxJ,wBAAwBmxJ,EAChD,iDANWjsH,GAAYh1C,MAAAC,KAAA,yDAAZ+0C,EAAYksH,MAAA,YAAZlsH,CAAY,mKCEzB,MAAM52C,EAAW,CACfC,KAAK,EACL0jG,aAAa,EACbo/D,sBAAsB,EACtBjmJ,QAAQ,GAGGkmJ,EAAmB,gBACnBC,EAAmB,oBAGzB,IAAMlpJ,EAAc,MAArB,MAAOA,UAAsB1Z,IADnCtD,kCAGEG,KAAAqD,OAAMtD,MAAS,CAAE8c,iBAAiB/Z,GAE1B9C,KAAAgmK,gBAAex+J,KAAUs5F,KAQjCmlE,aAAatiK,GACX,OAAA3D,KAAKqD,IAAIC,KAAK,eACPK,EAAOE,QACZpB,KAAOuV,IAAU,MAALA,KAAS,EACrBspF,KAAUtpF,IAAKhY,KAAK6lK,qBAAqB7tJ,GAAE41H,iBAAiB/pI,QAAKqiK,KAAY,KAEjF,CAEQL,qBAAqBj4B,EAAyBu4B,IAEpD,OADUnmK,KAAKqD,IAAIC,KAAK,wBACjBtD,KAAKgmK,aAAav/D,YAAY,CACnCC,aAAc,CAACknC,GACfjnC,QAASw/D,GACT9qJ,OAAQ,gBACRhY,IAAK,yBACJQ,QACDpD,KAAIyK,GAAQA,EAAK07F,SAErB,CAEAhnF,OAAOhc,EAAesK,GAAqB+Q,GAAkB+hJ,EAAgBvhJ,EAAmBC,GAC9F,OAAA1f,KAAKqD,IAAIC,KAAK,SAAU,CAAEM,QAAOsK,eAAa+Q,YAAU+hJ,QAAOvhJ,WAAUoyC,SAClE7xD,KAAKwD,KAAKoc,OAAa5f,KAAK0D,OAAOoiK,EAAmB,UAAW,CACtEniK,OAAQ,CACNuK,eACA8Q,GAAIC,GAAStG,WACb/U,QACAo9J,MAAOA,EAAMroJ,cACT8G,GAAY,CAAEA,SAAUA,EAAS9G,eACjC8G,GAAYC,GAAe,CAAEA,iBAGvC,0EA5CW7C,KAAaqxB,IAAbrxB,EAAa,0CAAbA,EAAa5b,QAAb4b,EAAa3b,WAAA,SAAb2b,CAAc,+FCZ3B,MAAM/Z,EAAW,CACfC,KAAK,EACL8iK,sBAAsB,EACtBp/D,aAAa,GAIR,IAAM3F,EAAY,MAAnB,MAAOA,EAIXjhG,YAAoB2D,EAA0BD,GAA1BvD,KAAAwD,OAA0BxD,KAAAuD,UAF9CvD,KAAAqD,OAAMtD,MAAS,CAAC+gG,gBAAeh+F,EAEmC,CAElEkgG,aAAasE,EAAkB3jG,EAAgB0X,EAAgB8qJ,GAC7DnmK,KAAKqD,IAAIC,KAAK,uBAAwB,CAAEgkG,WAAU3jG,SAAQ0X,SAAQ8qJ,mBAElE,MAAMC,IAAcziK,EAQd0iK,MAPc1iK,GAAQpC,qBAAuB,IACtB2L,SAAS,UAEtB,GAAK,UAAUlN,KAAKuD,QAAQK,UACvCwiK,EAAY,IAAIziK,IAAW,IAC5B,aAAe0X,GAAU,KAEDwQ,UAAU,GACtC,OAAO7rB,KAAKwD,KAAKC,KAAmB,kBAAkB6jG,KAAY++D,KAChE,CACEC,MAAOH,GAGb,CAEA1/D,aAAcC,eAAcC,UAAStrF,SAAQhY,QAC3CrD,KAAKqD,IAAIC,KAAK,cAAe,CAAED,MAAKqjG,eAAcC,UAAStrF,WAO3D,MAAMgrJ,GALJ,eAAiB3/D,GAAcxlF,KAAK,MAAQ,IAC1C,UAAUlhB,KAAKuD,QAAQK,kBACR+iG,GAASzlF,KAAK,MAAQ,IACrC,aAAe7F,GAAU,KAEDwQ,UAAU,GACtC,OAAO7rB,KAAKwD,KAAKC,KACf,8CAA8C4iK,IAC9C,GAEJ,iDAtCWvlE,GAAYp8F,MAAAC,MAAAD,MAAAiM,KAAA,sCAAZmwF,EAAY7/F,QAAZ6/F,EAAY5/F,WAAA,SAAZ4/F,CAAY,qFCFlB,IAAMr5F,EAAmB,MAA1B,MAAOA,EAEX5H,cAAgB,CAEhB0mK,GAAgB,IAAIC,KAZL,iBAefniH,GAAQtgB,EAAoBzjB,GAE1B,MAAMmmJ,EAAUzmK,MAAK0mK,MAfX,MAekC3iI,EAAgB,aAAe,gBAC3E,OAAI0iI,GAAS/zJ,SAAS,KACb,CAAExO,SAAUuiK,EAAQ9tG,MAAM,GAAG,GAAKqoG,OAAO,GAC3C,CAAE98J,SAAUlE,KAAK2mK,OAAO5iI,IAAS0iI,GAAWnmJ,EAAU0gJ,OAAO,EACtE,CAEArmJ,MAAMopB,GACJ,OAAO/jC,MAAKqkD,EAAQtgB,GAAM7/B,QAC5B,CAMAyiK,OAAO5iI,GACL,OAAO/jC,MAAKumK,EAAcxgK,IAAIg+B,IAAS,IACzC,CAGAkpH,KAAKlpH,EAAoB7/B,GACvBlE,MAAKumK,EAAc/jK,IAAIuhC,EAAM7/B,GAAY,KAC3C,CAGA2H,OAAOyU,GACL,OAAOtgB,MAAKqkD,EAxCF,KAwCiB/jC,IAAWpc,UAAU3C,oBAAoBkL,MAAM,KAAK,EACjF,CAEAm6J,SAAS7iI,GACP,OAAO/jC,MAAKqkD,EAAQtgB,IAAOi9H,KAC7B,CAEA6F,mBACE,MAAMC,EAAiB9mK,MAAK0mK,KAAqBK,qBACjD,OAA0B,IAAnBD,GAA+C,UAAnBA,CACrC,CAKAJ,KACE,GAAI1mK,MAAKgnK,EACP,OAAOhnK,MAAKgnK,EACd,MAAMC,EAAoBC,eAAeC,QAAQC,MACjD,OAASH,EAELjnK,MAAKgnK,EAAoB5+J,KAAKw1B,MAAMqpI,GADpC,IAEN,CACAD,mDAzDWv/J,EAAmB,sCAAnBA,EAAmBxG,QAAnBwG,EAAmBvG,WAAA,SAAnBuG,CAAmB,qFCRhC,MAAM4/J,EAAW,gBAGV,IAAMpZ,EAAe,MAAtB,MAAOA,EAIXpuJ,cAFAG,KAAAqD,OAAMtD,MAAS,CAACkuJ,oBA8BhBjuJ,MAAAsnK,EAA2E,GA3BzEtnK,KAAKqD,IAAIib,GAAG,cACd,CAEA,SAAIipJ,GAAU,OAAOvnK,MAAKwnK,IAAW,IAAIhB,KAAkBa,EAAW,CACtEG,GAEA,WAAIC,GAAY,OAAOznK,MAAK0nK,IAAa,IAAIC,KAAoBN,EAAW,CAC5EK,GAEA3hK,IAAO1E,EAAaumK,GAAW,GAC7B,OAAQA,EAAW5nK,KAAKunK,MAAQvnK,KAAKynK,SAAS1hK,IAAI1E,EACpD,CAEAgI,IAAOhI,EAAasZ,EAAUitJ,GAAW,IACtCA,EAAW5nK,KAAKunK,MAAQvnK,KAAKynK,SAASjlK,IAAInB,EAAKsZ,EAClD,CAEAopB,MAA0C1iC,MAAK6J,SAC7C,OAAOlL,MAAK6nK,EAASxmK,EAAK6J,GAAM,EAClC,CAEA28J,GAA4CxmK,EAAa6J,EAAS08J,GAAW,GAC3E,GAAI5nK,MAAKsnK,EAAWjmK,GAAM,OAAOrB,MAAKsnK,EAAWjmK,GACjD,MAAMymK,EAAU,IAAIC,EAAoB/nK,KAAMqB,EAAK6J,EAAM08J,GACzD,OAAA5nK,MAAKsnK,EAAWjmK,GAAOymK,EAChBA,CACT,CACAR,mDAhCWrZ,EAAe,sCAAfA,EAAehtJ,QAAfgtJ,EAAe/sJ,UAAAC,WADF,QAAM,SACnB8sJ,CAAe,KAmC5B,MAAM8Z,EAIJloK,YAAoBmoK,EAAuCX,EAAkBn8J,EAAiB08J,GAAW,GAArF5nK,KAAAgoK,eAAuChoK,KAAAqnK,WAAmCrnK,KAAA4nK,WAF9F5nK,KAAAqD,OAAMtD,MAAS,CAACgoK,wBAGd,MAAMjuI,EAAS,IAAK5uB,KAAS88J,EAAajiK,IAAOshK,EAAUO,IAC3D5nK,KAAKqD,IAAIib,GAAG,cAAewb,GAC3B95B,MAAKioK,KAAQ1gK,OAAUuyB,EACzB,CACAmuI,GAEA,YAAIngK,GAAa,OAAO9H,MAAKioK,GAAS,CAEtC,QAAI/8J,GAAS,OAAOlL,MAAKioK,EAAMC,YAAc,CAE7CniK,IAAuB1E,GACrB,OAAOrB,MAAKioK,IAAQ5mK,EACtB,CAEAgI,IAAuBhI,EAAQsZ,GAC7B3a,MAAKioK,EAAMpoJ,OAAO3U,QAAcA,EAAMi9J,CAAC9mK,GAAMsZ,KAC7C3a,MAAKooK,GACP,CAEA1yH,OAA0Br0C,GACxBrB,MAAKioK,EAAMpoJ,OAAO3U,QAAcA,EAAMi9J,CAAC9mK,IAAO6J,EAAK7J,MACnDrB,MAAKooK,GACP,CAEAC,OAAOn9J,GACLlL,MAAKioK,EAAM5+J,IAAI6B,GACflL,MAAKooK,GACP,CAEAE,QAAQp9J,GACNlL,MAAKioK,EAAMpoJ,OAAO0oJ,QAAaA,KAAQr9J,KACvClL,MAAKooK,GACP,CAEAA,KACE,MAAMl9J,EAAOlL,MAAKioK,IAClBjoK,KAAKqD,IAAIib,GAAG,OAAQpT,GACpBlL,KAAKgoK,aAAa3+J,IAAIrJ,KAAKqnK,SAAUrnK,MAAKioK,IAASjoK,KAAK4nK,SAC1D,qBCrFkEY,EAAOC,QAAmI,WAAW,aAAa,IAAUhkJ,EAAE,IAAIikJ,EAAE,KAAKzoJ,EAAE,cAActX,EAAE,SAASma,EAAE,SAAS6lJ,EAAE,OAAOzgK,EAAE,MAAMia,EAAE,OAAOgI,EAAE,QAAQopG,EAAE,UAAUn5F,EAAE,OAAOjkB,EAAE,OAAOyyJ,EAAE,eAAejhK,EAAE,6FAA6FuiF,EAAE,sFAAsF2+E,GAAE,CAACx0J,KAAK,KAAKqkD,SAAS,2DAA2DjsD,MAAM,KAAK8vE,OAAO,wFAAwF9vE,MAAM,MAAMozB,EAAE,SAASm6H,EAAEv1I,EAAEikJ,GAAG,IAAIzoJ,EAAEy1E,OAAOskE,GAAG,OAAO/5I,GAAGA,EAAEjW,QAAQya,EAAEu1I,EAAE,GAAGh5I,MAAMyD,EAAE,EAAExE,EAAEjW,QAAQkX,KAAKwnJ,GAAG1O,CAAC,EAAE8O,GAAE,CAAChmJ,EAAE+c,EAAEopF,EAAE,SAAS+wC,GAAG,IAAIv1I,GAAGu1I,EAAE+O,YAAYL,EAAEn/J,KAAK60E,IAAI35D,GAAGxE,EAAE1W,KAAKC,MAAMk/J,EAAE,IAAI//J,EAAE+/J,EAAE,GAAG,OAAOjkJ,GAAG,EAAE,IAAI,KAAKob,EAAE5f,EAAE,EAAE,KAAK,IAAI4f,EAAEl3B,EAAE,EAAE,IAAI,EAAEk3B,EAAE,SAASm6H,EAAEv1I,EAAEikJ,GAAG,GAAGjkJ,EAAEwsC,OAAOy3G,EAAEz3G,OAAO,OAAO+oG,EAAE0O,EAAEjkJ,GAAG,IAAIxE,EAAE,IAAIyoJ,EAAEtvG,OAAO30C,EAAE20C,SAASsvG,EAAErvG,QAAQ50C,EAAE40C,SAAS1wD,EAAE8b,EAAE6sC,QAAQ9uD,IAAIyd,EAAEkK,GAAGrH,EAAE4lJ,EAAE//J,EAAE,EAAEggK,EAAElkJ,EAAE6sC,QAAQ9uD,IAAIyd,GAAG6C,GAAE,EAAG,GAAGqH,GAAG,UAAUlK,GAAGyoJ,EAAE//J,IAAIma,EAAEna,EAAEggK,EAAEA,EAAEhgK,KAAK,EAAE,EAAET,EAAE,SAAS8xJ,GAAG,OAAOA,EAAE,EAAEzwJ,KAAK21E,KAAK86E,IAAI,EAAEzwJ,KAAKC,MAAMwwJ,EAAE,EAAEhiJ,EAAE,SAASgiJ,GAAG,MAAM,CAAC6O,EAAE1+I,EAAE+/D,EAAE9vD,EAAE4uI,EAAE7mJ,EAAEhM,EAAEjO,EAAE+gK,EAAE9yJ,EAAEo9G,EAAEo1C,EAAE9oI,EAAE/c,EAAEA,EAAEna,EAAEugK,GAAGjpJ,EAAEkpJ,EAAE51C,GAAGymC,IAAItkE,OAAOskE,GAAG,IAAIviI,cAAc7jB,QAAQ,KAAK,GAAG,EAAE+0J,EAAE,SAAS3O,GAAG,YAAO,IAASA,CAAC,GAAGh6H,GAAE,KAAKipI,EAAE,CAAC,EAAEA,EAAEjpI,IAAG6oI,GAAE,IAAI7wJ,EAAE,SAASgiJ,GAAG,OAAOA,aAAaj4J,EAAC,EAAEomK,EAAE,SAASnO,EAAEv1I,EAAEikJ,EAAEzoJ,GAAG,IAAItX,EAAE,IAAI8b,EAAE,OAAOub,GAAE,GAAG,iBAAiBvb,EAAE,CAAC,IAAI3B,EAAE2B,EAAEgT,cAAcwxI,EAAEnmJ,KAAKna,EAAEma,GAAG4lJ,IAAIO,EAAEnmJ,GAAG4lJ,EAAE//J,EAAEma,GAAG,IAAI6lJ,EAAElkJ,EAAEhY,MAAM,KAAK,IAAI9D,GAAGggK,EAAE3+J,OAAO,EAAE,OAAOgwJ,EAAE2O,EAAE,GAAG,KAAK,CAAC,IAAIzgK,EAAEuc,EAAEpQ,KAAK40J,EAAE/gK,GAAGuc,EAAE9b,EAAET,CAAC,CAAC,OAAO+X,GAAGtX,IAAIq3B,GAAEr3B,GAAGA,IAAIsX,GAAG+f,EAAC,EAAEgpI,EAAE,SAAShP,EAAEv1I,GAAG,GAAGzM,EAAEgiJ,GAAG,OAAOA,EAAE1oG,QAAQ,IAAIo3G,EAAE,iBAAiBjkJ,EAAEA,EAAE,CAAC,EAAE,OAAOikJ,EAAEz3G,KAAK+oG,EAAE0O,EAAE3pD,KAAKqqD,UAAU,IAAIrnK,GAAE2mK,EAAE,EAAEW,GAAEP,GAAEO,GAAE1hK,EAAEwgK,EAAEkB,GAAE1gK,EAAEqP,EAAEqxJ,GAAEL,EAAE,SAAShP,EAAEv1I,GAAG,OAAOukJ,EAAEhP,EAAE,CAACjkF,OAAOtxD,EAAE6kJ,GAAG1xE,IAAInzE,EAAE8kJ,GAAG97H,EAAEhpB,EAAE+kJ,GAAGC,QAAQhlJ,EAAEglJ,SAAS,EAAE,IAAI1nK,GAAE,WAAW,SAAS8mK,EAAE7O,GAAGh6J,KAAKspK,GAAGnB,EAAEnO,EAAEjkF,OAAO,MAAK,GAAI/1E,KAAK49B,MAAMo8H,EAAE,CAAC,IAAIn6H,EAAEgpI,EAAEa,UAAU,OAAO7pI,EAAEjC,MAAM,SAASo8H,GAAGh6J,KAAK2pK,GAAG,SAAS3P,GAAG,IAAIv1I,EAAEu1I,EAAE/oG,KAAKy3G,EAAE1O,EAAEpiE,IAAI,GAAG,OAAOnzE,EAAE,OAAO,IAAI80C,KAAK89B,KAAK,GAAGgyE,GAAEV,EAAElkJ,GAAG,OAAO,IAAI80C,KAAK,GAAG90C,aAAa80C,KAAK,OAAO,IAAIA,KAAK90C,GAAG,GAAG,iBAAiBA,IAAI,MAAM6+E,KAAK7+E,GAAG,CAAC,IAAIxE,EAAEwE,EAAEqY,MAAMn1B,GAAG,GAAGsY,EAAE,CAAC,IAAItX,EAAEsX,EAAE,GAAG,GAAG,EAAE6C,GAAG7C,EAAE,IAAI,KAAK4L,UAAU,EAAE,GAAG,OAAO68I,EAAE,IAAInvG,KAAKA,KAAKolB,IAAI1+D,EAAE,GAAGtX,EAAEsX,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAE6C,IAAI,IAAIy2C,KAAKt5C,EAAE,GAAGtX,EAAEsX,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAE6C,EAAE,CAAC,CAAC,OAAO,IAAIy2C,KAAK90C,EAAE,CAA3X,CAA6Xu1I,GAAGh6J,KAAKwpK,GAAGxP,EAAEvsH,GAAG,CAAC,EAAEztC,KAAK2X,MAAM,EAAEkoB,EAAEloB,KAAK,WAAW,IAAIqiJ,EAAEh6J,KAAK2pK,GAAG3pK,KAAK4pK,GAAG5P,EAAEp7E,cAAc5+E,KAAK6pK,GAAG7P,EAAE1iG,WAAWt3D,KAAK8pK,GAAG9P,EAAE9jG,UAAUl2D,KAAK+pK,GAAG/P,EAAE77E,SAASn+E,KAAKgqK,GAAGhQ,EAAE5+E,WAAWp7E,KAAKiqK,GAAGjQ,EAAE3+E,aAAar7E,KAAKkqK,GAAGlQ,EAAE1+E,aAAat7E,KAAKmqK,IAAInQ,EAAEoQ,iBAAiB,EAAEvqI,EAAEwqI,OAAO,WAAW,OAAOhB,EAAC,EAAExpI,EAAElY,QAAQ,WAAW,OAAQ3nB,KAAK2pK,GAAGhxJ,aAAaiwJ,CAAE,EAAE/oI,EAAEu3D,OAAO,SAAS4iE,EAAEv1I,GAAG,IAAIikJ,EAAEM,EAAEhP,GAAG,OAAOh6J,KAAKk3F,QAAQzyE,IAAIikJ,GAAGA,GAAG1oK,KAAKsqK,MAAM7lJ,EAAE,EAAEob,EAAE0qI,QAAQ,SAASvQ,EAAEv1I,GAAG,OAAOukJ,EAAEhP,GAAGh6J,KAAKk3F,QAAQzyE,EAAE,EAAEob,EAAE2qI,SAAS,SAASxQ,EAAEv1I,GAAG,OAAOzkB,KAAKsqK,MAAM7lJ,GAAGukJ,EAAEhP,EAAE,EAAEn6H,EAAE4qI,GAAG,SAASzQ,EAAEv1I,EAAEikJ,GAAG,OAAOW,GAAEV,EAAE3O,GAAGh6J,KAAKykB,GAAGzkB,KAAKqJ,IAAIq/J,EAAE1O,EAAE,EAAEn6H,EAAE6qI,KAAK,WAAW,OAAOnhK,KAAKC,MAAMxJ,KAAKi3F,UAAU,IAAI,EAAEp3D,EAAEo3D,QAAQ,WAAW,OAAOj3F,KAAK2pK,GAAGnwG,SAAS,EAAE35B,EAAEq3D,QAAQ,SAAS8iE,EAAEv1I,GAAG,IAAIikJ,EAAE1oK,KAAKigB,IAAIopJ,GAAEV,EAAElkJ,IAAIA,EAAE8uG,EAAE81C,GAAErxJ,EAAEgiJ,GAAG4O,EAAE,SAAS5O,EAAEv1I,GAAG,IAAI9b,GAAE0gK,GAAEL,EAAEN,EAAEa,GAAGhwG,KAAKolB,IAAI+pF,EAAEkB,GAAGnlJ,EAAEu1I,GAAG,IAAIzgG,KAAKmvG,EAAEkB,GAAGnlJ,EAAEu1I,GAAG0O,GAAG,OAAOzoJ,EAAEtX,GAAEA,GAAE2hK,MAAMpiK,EAAE,EAAEP,EAAE,SAASqyJ,EAAEv1I,GAAG,OAAO4kJ,GAAEL,EAAEN,EAAEtvE,SAAS4gE,GAAG2Q,MAAMjC,EAAEtvE,OAAO,MAAMn5E,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,MAAM04C,MAAMl0C,IAAIikJ,EAAE,EAAEx+E,EAAElqF,KAAK+pK,GAAGlB,EAAE7oK,KAAK6pK,GAAGhqI,EAAE7/B,KAAK8pK,GAAGhB,GAAE,OAAO9oK,KAAKupK,GAAG,MAAM,IAAI,OAAOh2C,GAAG,KAAKn5F,EAAE,OAAOna,EAAE2oJ,EAAE,EAAE,GAAGA,EAAE,GAAG,IAAI,KAAKz+I,EAAE,OAAOlK,EAAE2oJ,EAAE,EAAEC,GAAGD,EAAE,EAAEC,EAAE,GAAG,KAAK1mJ,EAAE,IAAI6d,EAAEhgC,KAAK4qK,UAAUC,WAAW,EAAE5B,GAAG/+E,EAAElqD,EAAEkqD,EAAE,EAAEA,GAAGlqD,EAAE,OAAO4oI,EAAE3oJ,EAAE4f,EAAEopI,EAAEppI,GAAG,EAAEopI,GAAGJ,GAAG,KAAK3gK,EAAE,KAAKiO,EAAE,OAAOxO,EAAEmhK,GAAE,QAAQ,GAAG,KAAKH,EAAE,OAAOhhK,EAAEmhK,GAAE,UAAU,GAAG,KAAKhmJ,EAAE,OAAOnb,EAAEmhK,GAAE,UAAU,GAAG,KAAKngK,EAAE,OAAOhB,EAAEmhK,GAAE,eAAe,GAAG,QAAQ,OAAO9oK,KAAKsxD,QAAQ,EAAEzxB,EAAEyqI,MAAM,SAAStQ,GAAG,OAAOh6J,KAAKk3F,QAAQ8iE,GAAE,EAAG,EAAEn6H,EAAEirI,KAAK,SAAS9Q,EAAEv1I,GAAG,IAAIikJ,EAAEvmJ,EAAEknJ,GAAErxJ,EAAEgiJ,GAAGzmC,EAAE,OAAOvzH,KAAKupK,GAAG,MAAM,IAAIX,GAAGF,EAAE,CAAC,EAAEA,EAAExgK,GAAGqrH,EAAE,OAAOm1C,EAAEvyJ,GAAGo9G,EAAE,OAAOm1C,EAAEv+I,GAAGopG,EAAE,QAAQm1C,EAAEtuI,GAAGm5F,EAAE,WAAWm1C,EAAEC,GAAGp1C,EAAE,QAAQm1C,EAAE5lJ,GAAGywG,EAAE,UAAUm1C,EAAE//J,GAAG4qH,EAAE,UAAUm1C,EAAEzoJ,GAAGszG,EAAE,eAAem1C,GAAGvmJ,GAAGxa,EAAEwa,IAAIja,EAAElI,KAAK8pK,IAAIrlJ,EAAEzkB,KAAK+pK,IAAItlJ,EAAE,GAAGtC,IAAIgI,GAAGhI,IAAIiY,EAAE,CAAC,IAAI8vD,EAAElqF,KAAKsxD,QAAQjoD,IAAI8M,EAAE,GAAG+zE,EAAEy/E,GAAGf,GAAGjhK,GAAGuiF,EAAEvyE,OAAO3X,KAAK2pK,GAAGz/E,EAAE7gF,IAAI8M,EAAE5M,KAAK0zB,IAAIj9B,KAAK8pK,GAAG5/E,EAAEtxB,gBAAgB+wG,EAAE,MAAMf,GAAG5oK,KAAK2pK,GAAGf,GAAGjhK,GAAG,OAAO3H,KAAK2X,OAAO3X,IAAI,EAAE6/B,EAAEx2B,IAAI,SAAS2wJ,EAAEv1I,GAAG,OAAOzkB,KAAKsxD,QAAQw5G,KAAK9Q,EAAEv1I,EAAE,EAAEob,EAAE95B,IAAI,SAASi0J,GAAG,OAAOh6J,KAAKqpK,GAAErxJ,EAAEgiJ,KAAK,EAAEn6H,EAAEr9B,IAAI,SAASyd,EAAEszG,GAAG,IAAIp9G,EAAEyyJ,EAAE5oK,KAAKigB,EAAEmuD,OAAOnuD,GAAG,IAAItY,EAAE0hK,GAAErxJ,EAAEu7G,GAAGrpC,EAAE,SAAS8vE,GAAG,IAAIv1I,EAAEukJ,EAAEJ,GAAG,OAAOS,GAAEL,EAAEvkJ,EAAEwsC,KAAKxsC,EAAEwsC,OAAO1nD,KAAKwhK,MAAM/Q,EAAE/5I,IAAI2oJ,EAAE,EAAE,GAAGjhK,IAAIwiB,EAAE,OAAOnqB,KAAKqJ,IAAI8gB,EAAEnqB,KAAK6pK,GAAG5pJ,GAAG,GAAGtY,IAAIyyB,EAAE,OAAOp6B,KAAKqJ,IAAI+wB,EAAEp6B,KAAK4pK,GAAG3pJ,GAAG,GAAGtY,IAAIO,EAAE,OAAOgiF,EAAE,GAAG,GAAGviF,IAAIwa,EAAE,OAAO+nE,EAAE,GAAG,IAAI2+E,GAAG1yJ,EAAE,CAAC,EAAEA,EAAE2M,GAAG2B,EAAEtO,EAAEwyJ,GAAGD,EAAEvyJ,EAAExN,GAAnrI,IAAwrIwN,GAAGxO,IAAI,EAAEk4B,EAAE7/B,KAAK2pK,GAAGnwG,UAAUv5C,EAAE4oJ,EAAE,OAAOQ,GAAEL,EAAEnpI,EAAE7/B,KAAK,EAAE6/B,EAAEmrI,SAAS,SAAShR,EAAEv1I,GAAG,OAAOzkB,KAAKwC,KAAI,EAAGw3J,EAAEv1I,EAAE,EAAEob,EAAEu3B,OAAO,SAAS4iG,GAAG,IAAIv1I,EAAEzkB,KAAK0oK,EAAE1oK,KAAK4qK,UAAU,IAAI5qK,KAAK2nB,UAAU,OAAO+gJ,EAAEuC,aAAarC,EAAE,IAAI3oJ,EAAE+5I,GAAG,uBAAuBrxJ,EAAE0gK,GAAEpgD,EAAEjpH,MAAM8iB,EAAE9iB,KAAKgqK,GAAGrB,EAAE3oK,KAAKiqK,GAAG/hK,EAAElI,KAAK6pK,GAAG1nJ,EAAEumJ,EAAEhwG,SAASvuC,EAAEu+I,EAAEnsF,OAAOg3C,GAAE,SAASymC,EAAE0O,GAAE//J,GAAEma,IAAG,OAAOk3I,IAAIA,EAAE0O,KAAI1O,EAAEv1I,EAAExE,KAAKtX,GAAE+/J,IAAG/vG,MAAM,EAAE71C,GAAE,EAAEsX,EAAE,SAAS4/H,GAAG,OAAOqP,GAAEvmJ,EAAEA,EAAE,IAAI,GAAGk3I,EAAE,IAAI,EAAE7jJ,EAAEuyJ,EAAEwC,UAAU,SAASlR,EAAEv1I,GAAEikJ,IAAG,IAAIzoJ,GAAE+5I,EAAE,GAAG,KAAK,KAAK,OAAO0O,GAAEzoJ,GAAEwX,cAAcxX,EAAC,EAAEtY,EAAE,CAACwjK,GAAGz1E,OAAO11F,KAAK4pK,IAAIjxG,OAAM,GAAIyyG,KAAKprK,KAAK4pK,GAAGf,EAAE3gK,EAAE,EAAEmjK,GAAGhC,GAAEvmJ,EAAE5a,EAAE,EAAE,EAAE,KAAKojK,IAAI/3C,GAAEm1C,EAAElyE,YAAYtuF,EAAEiiB,EAAE,GAAGohJ,KAAKh4C,GAAEppG,EAAEjiB,GAAG+gK,EAAEjpK,KAAK8pK,GAAG0B,GAAGnC,GAAEvmJ,EAAE9iB,KAAK8pK,GAAG,EAAE,KAAK3zJ,EAAEu/E,OAAO11F,KAAK+pK,IAAI0B,GAAGl4C,GAAEm1C,EAAE7xE,YAAY72F,KAAK+pK,GAAG5nJ,EAAE,GAAGupJ,IAAIn4C,GAAEm1C,EAAEhyE,cAAc12F,KAAK+pK,GAAG5nJ,EAAE,GAAGwpJ,KAAKxpJ,EAAEniB,KAAK+pK,IAAI6B,EAAEl2E,OAAO5yE,GAAG+oJ,GAAGxC,GAAEvmJ,EAAEA,EAAE,EAAE,KAAKywG,EAAEn5F,EAAE,GAAG0xI,GAAG1xI,EAAE,GAAGlyB,EAAEiO,EAAE2M,EAAE6lJ,GAAE,GAAIoD,EAAE51J,EAAE2M,EAAE6lJ,GAAE,GAAI9oI,EAAE61D,OAAOizE,GAAGqD,GAAG3C,GAAEvmJ,EAAE6lJ,EAAE,EAAE,KAAK7lJ,EAAE4yE,OAAO11F,KAAKkqK,IAAI+B,GAAG5C,GAAEvmJ,EAAE9iB,KAAKkqK,GAAG,EAAE,KAAKgC,IAAI7C,GAAEvmJ,EAAE9iB,KAAKmqK,IAAI,EAAE,KAAKgC,EAAExjK,GAAG,OAAOsX,EAAErM,QAAQs2E,EAAG,SAAS8vE,EAAEv1I,IAAG,OAAOA,IAAG9c,EAAEqyJ,IAAIrxJ,EAAEiL,QAAQ,IAAI,GAAG,EAAG,EAAEisB,EAAEkpI,UAAU,WAAW,OAAO,IAAIx/J,KAAKwhK,MAAM/qK,KAAK2pK,GAAGpwE,oBAAoB,GAAG,EAAE15D,EAAE+1C,KAAK,SAAS31D,EAAE9J,EAAEyyJ,GAAG,IAAIjhK,EAAEuiF,EAAEm/E,GAAErxJ,EAAE7B,GAAG0yJ,EAAEG,EAAE/oJ,GAAG4f,GAAGgpI,EAAEE,YAAY/oK,KAAK+oK,aAAatkJ,EAAEqkJ,EAAE9oK,KAAK6oK,EAAE7oI,EAAEqpI,GAAExpI,EAAE7/B,KAAK6oK,GAAG,OAAO7oI,GAAGr4B,EAAE,CAAC,EAAEA,EAAEyyB,GAAG4F,EAAE,GAAGr4B,EAAEwiB,GAAG6V,EAAEr4B,EAAE4rH,GAAGvzF,EAAE,EAAEr4B,EAAEwa,IAAI2mJ,EAAEjpI,GAAG,OAAOl4B,EAAEO,IAAI4gK,EAAEjpI,GAAG,MAAMl4B,EAAEghK,GAAGG,EAAEJ,EAAE/gK,EAAEmb,GAAGgmJ,EAAErkJ,EAAE9c,EAAEgB,GAAGmgK,EAA54K,IAAg5KnhK,GAAGuiF,IAAI4+E,EAAEF,EAAE5oI,EAAEqpI,GAAEnhK,EAAE83B,EAAE,EAAEH,EAAE+4B,YAAY,WAAW,OAAO54D,KAAKsqK,MAAMngJ,GAAG2/I,EAAE,EAAEjqI,EAAE+qI,QAAQ,WAAW,OAAO3B,EAAEjpK,KAAKspK,GAAG,EAAEzpI,EAAEk2C,OAAO,SAASikF,EAAEv1I,GAAG,IAAIu1I,EAAE,OAAOh6J,KAAKspK,GAAG,IAAIZ,EAAE1oK,KAAKsxD,QAAQrxC,EAAEkoJ,EAAEnO,EAAEv1I,GAAE,GAAI,OAAOxE,IAAIyoJ,EAAEY,GAAGrpJ,GAAGyoJ,CAAC,EAAE7oI,EAAEyxB,MAAM,WAAW,OAAO+3G,GAAEL,EAAEhpK,KAAK2pK,GAAG3pK,KAAK,EAAE6/B,EAAEu5D,OAAO,WAAW,OAAO,IAAI7/B,KAAKv5D,KAAKi3F,UAAU,EAAEp3D,EAAEu6D,OAAO,WAAW,OAAOp6F,KAAK2nB,UAAU3nB,KAAKm3F,cAAc,IAAI,EAAEt3D,EAAEs3D,YAAY,WAAW,OAAOn3F,KAAK2pK,GAAGxyE,aAAa,EAAEt3D,EAAElnB,SAAS,WAAW,OAAO3Y,KAAK2pK,GAAGyC,aAAa,EAAEvD,CAAC,CAAtwI,GAA0wIwD,EAAEtqK,GAAE2nK,UAAU,OAAOV,EAAEU,UAAU2C,EAAE,CAAC,CAAC,MAAMpsJ,GAAG,CAAC,KAAKtX,GAAG,CAAC,KAAKma,GAAG,CAAC,KAAK6lJ,GAAG,CAAC,KAAKzgK,GAAG,CAAC,KAAKiiB,GAAG,CAAC,KAAKiQ,GAAG,CAAC,KAAKjkB,IAAIhE,QAAS,SAAS6nJ,GAAGqS,EAAErS,EAAE,IAAI,SAASv1I,GAAG,OAAOzkB,KAAKyqK,GAAGhmJ,EAAEu1I,EAAE,GAAGA,EAAE,GAAG,CAAC,GAAIgP,EAAEsD,OAAO,SAAStS,EAAEv1I,GAAG,OAAOu1I,EAAEuS,KAAKvS,EAAEv1I,EAAE1iB,GAAEinK,GAAGhP,EAAEuS,IAAG,GAAIvD,CAAC,EAAEA,EAAEjzF,OAAOoyF,EAAEa,EAAEwD,QAAQx0J,EAAEgxJ,EAAE0B,KAAK,SAAS1Q,GAAG,OAAOgP,EAAE,IAAIhP,EAAE,EAAEgP,EAAEyD,GAAGxD,EAAEjpI,IAAGgpI,EAAE0D,GAAGzD,EAAED,EAAEhxJ,EAAE,CAAC,EAAEgxJ,CAAC,CAAn1MvkJ,yBCAf+jJ,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIikJ,EAA5E,SAAS1O,EAAEv1I,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOu1I,CAAEv1I,GAAGxE,EAAE,wYAA6ExT,MAAM,KAAK1K,EAAE,CAAC,EAAE,SAAI,EAAE,SAAI,EAAE,SAAI,EAAE,SAAI,EAAE,SAAI,EAAE,SAAI,EAAE,SAAI,EAAE,SAAI,EAAE,SAAI,EAAE,UAAKoU,EAAE,CAAC,SAAI,IAAI,SAAI,IAAI,SAAI,IAAI,SAAI,IAAI,SAAI,IAAI,SAAI,IAAI,SAAI,IAAI,SAAI,IAAI,SAAI,IAAI,SAAI,KAAKgM,EAAE,CAAC9N,KAAK,KAAKqkD,SAAS,uRAAsDjsD,MAAM,KAAKiqF,cAAc,mMAAwCjqF,MAAM,KAAKoqF,YAAY,mDAAgBpqF,MAAM,KAAK8vE,OAAOt8D,EAAEu2E,YAAYv2E,EAAE4qJ,UAAU,EAAE8B,aAAa,CAACC,OAAO,wBAASC,KAAK,wBAAS/pJ,EAAE,gEAAc+c,EAAE,gEAAcmsI,GAAG,oCAAWz4C,EAAE,0DAAau4C,GAAG,oCAAW31J,EAAE,8CAAWs1J,GAAG,8BAAU5C,EAAE,8CAAWwC,GAAG,8BAAUnhF,EAAE,8CAAW4iF,GAAG,qCAAYC,SAAS,SAAStoJ,GAAG,OAAOA,EAAE7Q,QAAQ,kEAAiB,SAAS6Q,GAAG,OAAOtO,EAAEsO,EAAE,GAAI7Q,QAAQ,UAAK,IAAI,EAAEo5J,WAAW,SAASvoJ,GAAG,OAAOA,EAAE7Q,QAAQ,MAAO,SAAS6Q,GAAG,OAAO1iB,EAAE0iB,EAAE,GAAI7Q,QAAQ,KAAK,SAAI,EAAEq5J,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,uBAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,2BAA2B,OAAO9E,EAAEtM,QAAQrmF,OAAO5zD,EAAE,MAAK,GAAIA,CAAC,CAAxyC63I,CAAEyT,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAASj4J,EAAE0iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAO1iB,CAAE0iB,GAAGtO,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,ySAAyDjsD,MAAM,KAAKiqF,cAAc,uIAA8BjqF,MAAM,KAAKoqF,YAAY,6FAAuBpqF,MAAM,KAAK8vE,OAAO,kbAAoF9vE,MAAM,KAAK+pF,YAAY,sOAAkD/pF,MAAM,KAAKo+J,UAAU,EAAEoC,QAAQ,SAASxoJ,GAAG,IAAI1iB,EAAE0iB,EAAE,IAAI,GAAG1iB,EAAE,IAAIA,EAAE,GAAG,OAAO0iB,EAAE,gBAAM,IAAIu1I,EAAEv1I,EAAE,GAAG,OAAO,IAAIu1I,EAAEv1I,EAAE,gBAAM,IAAIu1I,EAAEv1I,EAAE,gBAAM,IAAIu1I,GAAG,IAAIA,EAAEv1I,EAAE,gBAAMA,EAAE,eAAK,EAAEyoJ,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,YAAYC,GAAG,cAAcC,IAAI,mBAAmBC,KAAK,0BAA0Bb,aAAa,CAACC,OAAO,8BAAUC,KAAK,oCAAW/pJ,EAAE,wFAAkB+c,EAAE,uCAASmsI,GAAG,0CAAYz4C,EAAE,qBAAMu4C,GAAG,8BAAU31J,EAAE,qBAAMs1J,GAAG,8BAAU5C,EAAE,iCAAQwC,GAAG,0CAAYnhF,EAAE,uCAAS4iF,GAAG,4CAAc,OAAO9S,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAA3mCpU,CAAE0rK,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS0O,EAAEjkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOikJ,CAAEjkJ,GAAG,SAAS3B,EAAE2B,GAAG,OAAOA,EAAE,GAAGA,EAAE,GAAG,MAAMA,EAAE,GAAG,CAAC,SAASxE,EAAEwE,EAAEikJ,EAAE1O,EAAE/5I,GAAG,IAAI9J,EAAEsO,EAAE,IAAI,OAAOu1I,GAAG,IAAI,IAAI,OAAO0O,GAAGzoJ,EAAE,gBAAa,mBAAgB,IAAI,IAAI,OAAOyoJ,EAAE,SAASzoJ,EAAE,SAAS,UAAU,IAAI,KAAK,OAAOyoJ,GAAGzoJ,EAAE9J,GAAG2M,EAAE2B,GAAG,SAAS,SAAStO,EAAE,WAAW,IAAI,IAAI,OAAOuyJ,EAAE,SAASzoJ,EAAE,SAAS,UAAU,IAAI,KAAK,OAAOyoJ,GAAGzoJ,EAAE9J,GAAG2M,EAAE2B,GAAG,SAAS,SAAStO,EAAE,WAAW,IAAI,IAAI,OAAOuyJ,GAAGzoJ,EAAE,MAAM,OAAO,IAAI,KAAK,OAAOyoJ,GAAGzoJ,EAAE9J,GAAG2M,EAAE2B,GAAG,MAAM,UAAOtO,EAAE,MAAM,IAAI,IAAI,OAAOuyJ,GAAGzoJ,EAAE,gBAAQ,kBAAU,IAAI,KAAK,OAAOyoJ,GAAGzoJ,EAAE9J,GAAG2M,EAAE2B,GAAG,iBAAS,uBAAUtO,EAAE,iBAAS,IAAI,IAAI,OAAOuyJ,GAAGzoJ,EAAE,MAAM,QAAQ,IAAI,KAAK,OAAOyoJ,GAAGzoJ,EAAE9J,GAAG2M,EAAE2B,GAAG,OAAO,OAAOtO,EAAE,OAAO,CAAC,IAAIA,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,mFAAmDjsD,MAAM,KAAKiqF,cAAc,kCAAuBjqF,MAAM,KAAKoqF,YAAY,kCAAuBpqF,MAAM,KAAK8vE,OAAO,8HAAoF9vE,MAAM,KAAK+pF,YAAY,yFAAkD/pF,MAAM,KAAKo+J,UAAU,EAAE7rF,UAAU,EAAEiuF,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEyoJ,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,aAAaC,GAAG,eAAeC,IAAI,oBAAoBC,KAAK,yBAAyB7lK,EAAE,cAAcglK,aAAa,CAACC,OAAO,QAAQC,KAAK,eAAU/pJ,EAAE7C,EAAE4f,EAAE5f,EAAE+rJ,GAAG/rJ,EAAEszG,EAAEtzG,EAAE6rJ,GAAG7rJ,EAAE9J,EAAE8J,EAAEwrJ,GAAGxrJ,EAAE4oJ,EAAE5oJ,EAAEorJ,GAAGprJ,EAAEiqE,EAAEjqE,EAAE6sJ,GAAG7sJ,IAAI,OAAO+5I,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAAniDuyJ,CAAE+E,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAItO,EAA5E,SAAS6jJ,EAAEv1I,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOu1I,CAAEv1I,GAAGikJ,EAAE,CAACr0J,KAAK,KAAKqkD,SAAS,2DAAqDjsD,MAAM,KAAKiqF,cAAc,6CAAuCjqF,MAAM,KAAKoqF,YAAY,oCAA8BpqF,MAAM,KAAK8vE,OAAO,sFAAsF9vE,MAAM,KAAK+pF,YAAY,8DAA8D/pF,MAAM,KAAKo+J,UAAU,EAAEoC,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,eAAeC,IAAI,qBAAqBC,KAAK,sCAAsCb,aAAa,CAACC,OAAO,QAAQC,KAAK,WAAW/pJ,EAAE,iBAAc+c,EAAE,WAAWmsI,GAAG,cAAcz4C,EAAE,UAAUu4C,GAAG,WAAW31J,EAAE,SAASs1J,GAAG,UAAU5C,EAAE,cAAWwC,GAAG,gBAAanhF,EAAE,WAAQ4iF,GAAG,aAAU,OAAO32J,EAAEimJ,QAAQrmF,OAAO2yF,EAAE,MAAK,GAAIA,CAAC,CAArjC1O,CAAEyT,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS0O,EAAEjkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOikJ,CAAEjkJ,GAAG9b,EAAE,CAACma,EAAE,oBAAoB+c,EAAE,CAAC,cAAc,gBAAgBmsI,GAAG,aAAaz4C,EAAE,CAAC,cAAc,gBAAgBu4C,GAAG,aAAa31J,EAAE,CAAC,UAAU,aAAas1J,GAAG,CAAC,UAAU,YAAY5C,EAAE,CAAC,YAAY,eAAewC,GAAG,CAAC,YAAY,cAAcnhF,EAAE,CAAC,WAAW,cAAc4iF,GAAG,CAAC,WAAW,cAAc,SAAS5kK,EAAEuc,EAAEikJ,EAAE1O,GAAG,IAAI9xJ,EAAES,EAAEqxJ,GAAG,OAAOh5I,MAAMC,QAAQ/Y,KAAKA,EAAEA,EAAEwgK,EAAE,EAAE,IAAIxgK,EAAE0L,QAAQ,KAAK6Q,EAAE,CAAC,IAAIxE,EAAE,CAAC5L,KAAK,QAAQqkD,SAAS,8DAA8DjsD,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,2FAAqF9vE,MAAM,KAAK+pF,YAAY,mEAA6D/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEomJ,UAAU,EAAEqC,QAAQ,CAACE,IAAI,WAAWD,GAAG,QAAQE,EAAE,aAAaC,GAAG,eAAeC,IAAI,qBAAqBC,KAAK,4BAA4Bb,aAAa,CAACC,OAAO,QAAQC,KAAK,SAAS/pJ,EAAE5a,EAAE23B,EAAE33B,EAAE8jK,GAAG9jK,EAAEqrH,EAAErrH,EAAE4jK,GAAG5jK,EAAEiO,EAAEjO,EAAEujK,GAAGvjK,EAAE2gK,EAAE3gK,EAAEmjK,GAAGnjK,EAAEgiF,EAAEhiF,EAAE4kK,GAAG5kK,IAAI,OAAO8xJ,EAAEoC,QAAQrmF,OAAO91D,EAAE,MAAK,GAAIA,CAAC,CAAl0CyoJ,CAAE+E,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS0O,EAAEjkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOikJ,CAAEjkJ,GAAGvc,EAAE,CAAC4a,EAAE,oBAAoB+c,EAAE,CAAC,cAAc,gBAAgBmsI,GAAG,aAAaz4C,EAAE,CAAC,cAAc,gBAAgBu4C,GAAG,aAAa31J,EAAE,CAAC,UAAU,aAAas1J,GAAG,CAAC,UAAU,YAAY5C,EAAE,CAAC,YAAY,eAAewC,GAAG,CAAC,YAAY,cAAcnhF,EAAE,CAAC,WAAW,cAAc4iF,GAAG,CAAC,WAAW,cAAc,SAASnkK,EAAE8b,EAAEikJ,EAAE1O,GAAG,IAAIrxJ,EAAET,EAAE8xJ,GAAG,OAAOh5I,MAAMC,QAAQtY,KAAKA,EAAEA,EAAE+/J,EAAE,EAAE,IAAI//J,EAAEiL,QAAQ,KAAK6Q,EAAE,CAAC,IAAIxE,EAAE,CAAC5L,KAAK,QAAQqkD,SAAS,8DAA8DjsD,MAAM,KAAKiqF,cAAc,uBAAuBjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,wFAAqF9vE,MAAM,KAAK+pF,YAAY,gEAA6D/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEomJ,UAAU,EAAEqC,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,eAAeC,IAAI,qBAAqBC,KAAK,4BAA4Bb,aAAa,CAACC,OAAO,QAAQC,KAAK,SAAS/pJ,EAAEna,EAAEk3B,EAAEl3B,EAAEqjK,GAAGrjK,EAAE4qH,EAAE5qH,EAAEmjK,GAAGnjK,EAAEwN,EAAExN,EAAE8iK,GAAG9iK,EAAEkgK,EAAElgK,EAAE0iK,GAAG1iK,EAAEuhF,EAAEvhF,EAAEmkK,GAAGnkK,IAAI,OAAOqxJ,EAAEoC,QAAQrmF,OAAO91D,EAAE,MAAK,GAAIA,CAAC,CAA3zCyoJ,CAAE+E,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS0O,EAAEjkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOikJ,CAAEjkJ,GAAGvc,EAAE,CAAC4a,EAAE,oBAAoB+c,EAAE,CAAC,cAAc,gBAAgBmsI,GAAG,aAAaz4C,EAAE,CAAC,cAAc,gBAAgBu4C,GAAG,aAAa31J,EAAE,CAAC,UAAU,aAAas1J,GAAG,CAAC,UAAU,YAAY5C,EAAE,CAAC,YAAY,eAAewC,GAAG,CAAC,YAAY,cAAcnhF,EAAE,CAAC,WAAW,cAAc4iF,GAAG,CAAC,WAAW,cAAc,SAASnkK,EAAE8b,EAAEikJ,EAAE1O,GAAG,IAAIrxJ,EAAET,EAAE8xJ,GAAG,OAAOh5I,MAAMC,QAAQtY,KAAKA,EAAEA,EAAE+/J,EAAE,EAAE,IAAI//J,EAAEiL,QAAQ,KAAK6Q,EAAE,CAAC,IAAIxE,EAAE,CAAC5L,KAAK,KAAKqkD,SAAS,8DAA8DjsD,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,wFAAqF9vE,MAAM,KAAK+pF,YAAY,iEAA8D/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEomJ,UAAU,EAAE7rF,UAAU,EAAEkuF,QAAQ,CAACE,IAAI,WAAWD,GAAG,QAAQE,EAAE,aAAaC,GAAG,eAAeC,IAAI,qBAAqBC,KAAK,4BAA4Bb,aAAa,CAACC,OAAO,QAAQC,KAAK,SAAS/pJ,EAAEna,EAAEk3B,EAAEl3B,EAAEqjK,GAAGrjK,EAAE4qH,EAAE5qH,EAAEmjK,GAAGnjK,EAAEwN,EAAExN,EAAE8iK,GAAG9iK,EAAEkgK,EAAElgK,EAAE0iK,GAAG1iK,EAAEuhF,EAAEvhF,EAAEmkK,GAAGnkK,IAAI,OAAOqxJ,EAAEoC,QAAQrmF,OAAO91D,EAAE,MAAK,GAAIA,CAAC,CAAz0CyoJ,CAAE+E,EAAQ,4BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAASj4J,EAAE0iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAO1iB,CAAE0iB,GAAGtO,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,ySAAyDjsD,MAAM,KAAKiqF,cAAc,uIAA8BjqF,MAAM,KAAKoqF,YAAY,6FAAuBpqF,MAAM,KAAK8vE,OAAO,wnBAAqH9vE,MAAM,KAAK+pF,YAAY,wPAAqD/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEomJ,UAAU,EAAE8B,aAAa,CAACC,OAAO,kBAAQC,KAAK,8BAAU/pJ,EAAE,gHAAsB+c,EAAE,oDAAYmsI,GAAG,oCAAWz4C,EAAE,wCAAUu4C,GAAG,8BAAU31J,EAAE,8CAAWs1J,GAAG,oCAAW5C,EAAE,8CAAWwC,GAAG,oCAAWnhF,EAAE,oDAAY4iF,GAAG,2CAAaI,QAAQ,CAACC,GAAG,SAASC,IAAI,YAAYC,EAAE,aAAaC,GAAG,cAAcC,IAAI,qBAAqBC,KAAK,6BAA6B,OAAOxT,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAA/jCpU,CAAE0rK,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS9xJ,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAG1iB,EAAE,CAACsS,KAAK,QAAQqkD,SAAS,2DAA2DjsD,MAAM,KAAK8vE,OAAO,wFAAwF9vE,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,8BAA8BjqF,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,SAASC,IAAI,YAAYC,EAAE,aAAaC,GAAG,cAAcC,IAAI,qBAAqBC,KAAK,4BAA4Bb,aAAa,CAACC,OAAO,QAAQC,KAAK,SAAS/pJ,EAAE,gBAAgB+c,EAAE,WAAWmsI,GAAG,aAAaz4C,EAAE,UAAUu4C,GAAG,WAAW31J,EAAE,QAAQs1J,GAAG,UAAU5C,EAAE,UAAUwC,GAAG,YAAYnhF,EAAE,SAAS4iF,GAAG,aAAa,OAAO9S,EAAEoC,QAAQrmF,OAAOh0E,EAAE,MAAK,GAAIA,CAAC,CAA1hCmG,CAAEulK,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAI1iB,EAA5E,SAASmG,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAGu1I,EAAE,CAAC3lJ,KAAK,QAAQqkD,SAAS,2DAA2DjsD,MAAM,KAAK8vE,OAAO,wFAAwF9vE,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,SAASC,IAAI,YAAYC,EAAE,aAAaC,GAAG,eAAeC,IAAI,sBAAsBC,KAAK,6BAA6Bb,aAAa,CAACC,OAAO,QAAQC,KAAK,SAAS/pJ,EAAE,gBAAgB+c,EAAE,WAAWmsI,GAAG,aAAaz4C,EAAE,UAAUu4C,GAAG,WAAW31J,EAAE,QAAQs1J,GAAG,UAAU5C,EAAE,UAAUwC,GAAG,YAAYnhF,EAAE,SAAS4iF,GAAG,aAAa,OAAO/qK,EAAEq6J,QAAQrmF,OAAOikF,EAAE,MAAK,GAAIA,CAAC,CAAjhC9xJ,CAAEulK,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS9xJ,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAG1iB,EAAE,CAACsS,KAAK,QAAQqkD,SAAS,2DAA2DjsD,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,wFAAwF9vE,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKo+J,UAAU,EAAE7rF,UAAU,EAAE2tF,aAAa,CAACC,OAAO,QAAQC,KAAK,SAAS/pJ,EAAE,gBAAgB+c,EAAE,WAAWmsI,GAAG,aAAaz4C,EAAE,UAAUu4C,GAAG,WAAW31J,EAAE,QAAQs1J,GAAG,UAAU5C,EAAE,UAAUwC,GAAG,YAAYnhF,EAAE,SAAS4iF,GAAG,YAAYI,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,2BAA2BP,QAAQ,SAASxoJ,GAAG,IAAIvc,EAAE,CAAC,KAAK,KAAK,KAAK,MAAM8xJ,EAAEv1I,EAAE,IAAI,MAAM,IAAIA,GAAGvc,GAAG8xJ,EAAE,IAAI,KAAK9xJ,EAAE8xJ,IAAI9xJ,EAAE,IAAI,GAAG,GAAG,OAAO8xJ,EAAEoC,QAAQrmF,OAAOh0E,EAAE,MAAK,GAAIA,CAAC,CAAxmCmG,CAAEulK,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS9xJ,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAG1iB,EAAE,CAACsS,KAAK,QAAQqkD,SAAS,2DAA2DjsD,MAAM,KAAK8vE,OAAO,wFAAwF9vE,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,8BAA8BjqF,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,0BAA0Bb,aAAa,CAACC,OAAO,QAAQC,KAAK,SAAS/pJ,EAAE,gBAAgB+c,EAAE,WAAWmsI,GAAG,aAAaz4C,EAAE,UAAUu4C,GAAG,WAAW31J,EAAE,QAAQs1J,GAAG,UAAU5C,EAAE,UAAUwC,GAAG,YAAYnhF,EAAE,SAAS4iF,GAAG,aAAa,OAAO9S,EAAEoC,QAAQrmF,OAAOh0E,EAAE,MAAK,GAAIA,CAAC,CAArhCmG,CAAEulK,EAAQ,yBCAzBjF,EAAOC,QAA6I,WAAW,aAAa,MAAM,CAACp0J,KAAK,KAAKqkD,SAAS,2DAA2DjsD,MAAM,KAAK8vE,OAAO,wFAAwF9vE,MAAM,KAAK,CAAvWi8J,yBCAfF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAI3B,EAA5E,SAASX,EAAEsC,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOtC,CAAEsC,GAAGtO,EAAE,CAAC9B,KAAK,QAAQqkD,SAAS,6DAAuDjsD,MAAM,KAAKiqF,cAAc,2CAAqCjqF,MAAM,KAAKoqF,YAAY,0BAAuBpqF,MAAM,KAAK8vE,OAAO,2FAA2F9vE,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKkgK,aAAa,CAACC,OAAO,QAAQC,KAAK,UAAU/pJ,EAAE,gBAAgB+c,EAAE,YAAYmsI,GAAG,aAAaz4C,EAAE,WAAWu4C,GAAG,WAAW31J,EAAE,YAASs1J,GAAG,aAAU5C,EAAE,SAASwC,GAAG,WAAWnhF,EAAE,YAAS4iF,GAAG,cAAWG,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,MAAG,EAAEyoJ,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,aAAaC,GAAG,wBAAwBC,IAAI,6BAA6BC,KAAK,qCAAqC,OAAO1qJ,EAAEs5I,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAA/iCgM,CAAEsrJ,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAItC,EAA5E,SAASW,EAAE2B,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAO3B,CAAE2B,GAAGtO,EAAE,CAAC9B,KAAK,QAAQqkD,SAAS,6DAAuDjsD,MAAM,KAAKiqF,cAAc,2CAAqCjqF,MAAM,KAAKoqF,YAAY,0BAAuBpqF,MAAM,KAAK8vE,OAAO,2FAA2F9vE,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKkgK,aAAa,CAACC,OAAO,QAAQC,KAAK,UAAU/pJ,EAAE,gBAAgB+c,EAAE,YAAYmsI,GAAG,aAAaz4C,EAAE,WAAWu4C,GAAG,WAAW31J,EAAE,YAASs1J,GAAG,aAAU5C,EAAE,SAASwC,GAAG,WAAWnhF,EAAE,YAAS4iF,GAAG,cAAWG,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,MAAG,EAAEyoJ,QAAQ,CAACC,GAAG,SAASC,IAAI,YAAYC,EAAE,aAAaC,GAAG,wBAAwBC,IAAI,+BAA+BC,KAAK,uCAAuC,OAAOrrJ,EAAEi6I,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAAvjC2M,CAAE2qJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAI3B,EAA5E,SAASX,EAAEsC,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOtC,CAAEsC,GAAGtO,EAAE,CAAC9B,KAAK,KAAKmiF,YAAY,kDAAkD/pF,MAAM,KAAKisD,SAAS,6DAAuDjsD,MAAM,KAAKiqF,cAAc,2CAAqCjqF,MAAM,KAAKoqF,YAAY,0BAAuBpqF,MAAM,KAAK8vE,OAAO,2FAA2F9vE,MAAM,KAAKo+J,UAAU,EAAEqC,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,aAAaC,GAAG,wBAAwBC,IAAI,6BAA6BC,KAAK,oCAAoCb,aAAa,CAACC,OAAO,QAAQC,KAAK,UAAU/pJ,EAAE,gBAAgB+c,EAAE,YAAYmsI,GAAG,aAAaz4C,EAAE,WAAWu4C,GAAG,WAAW31J,EAAE,YAASs1J,GAAG,aAAU5C,EAAE,SAASwC,GAAG,WAAWnhF,EAAE,YAAS4iF,GAAG,cAAWG,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,MAAG,GAAG,OAAO3B,EAAEs5I,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAArjCgM,CAAEsrJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAS1mK,GAAG,aAAqF,IAAIi4J,EAA5E,SAASv1I,EAAE1iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAACq6J,QAAQr6J,EAAE,CAAO0iB,CAAE1iB,GAAGoU,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,iRAAqDjsD,MAAM,KAAKiqF,cAAc,iRAAqDjqF,MAAM,KAAKoqF,YAAY,mDAAgBpqF,MAAM,KAAKo+J,UAAU,EAAEtuF,OAAO,0WAAwE9vE,MAAM,KAAK+pF,YAAY,0WAAwE/pF,MAAM,KAAKwgK,QAAQ,SAASlrK,GAAG,OAAOA,CAAC,EAAEmrK,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,2BAA2Bb,aAAa,CAACC,OAAO,kBAAQC,KAAK,wBAAS/pJ,EAAE,oDAAY+c,EAAE,8CAAWmsI,GAAG,oCAAWz4C,EAAE,wCAAUu4C,GAAG,8BAAU31J,EAAE,kCAASs1J,GAAG,wBAAS5C,EAAE,kCAASwC,GAAG,wBAASnhF,EAAE,kCAAS4iF,GAAG,0BAAW,OAAO9S,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAAnhCsO,CAAEgpJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAASE,GAAG,aAAqF,IAAI3O,EAA5E,SAASv1I,EAAEkkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAACvM,QAAQuM,EAAE,CAAOlkJ,CAAEkkJ,GAAG,SAASD,EAAEC,EAAElkJ,EAAEu1I,EAAE0O,GAAG,IAAI//J,EAAE,CAACma,EAAE,kBAAkB+c,EAAE,WAAWmsI,GAAG,eAAez4C,EAAE,QAAQu4C,GAAG,YAAY31J,EAAE,cAAQs1J,GAAG,qBAAY5C,EAAE,WAAWwC,GAAG,eAAenhF,EAAE,QAAQ4iF,GAAG,YAAYY,QAAQ,iFAAwEjhK,MAAM,MAAMvE,EAAE,CAAC4a,EAAE,oBAAoB+c,EAAE,WAAWmsI,GAAG,cAAcz4C,EAAE,SAASu4C,GAAG,YAAY31J,EAAE,eAASs1J,GAAG,kBAAY5C,EAAE,YAAYwC,GAAG,eAAenhF,EAAE,SAAS4iF,GAAG,YAAYY,QAAQ,wFAA+EjhK,MAAM,MAAMqW,EAAE4lJ,IAAIjkJ,EAAEvc,EAAES,EAAS,OAALma,EAAEk3I,GAAiBpmJ,QAAQ,KAAf+0J,EAAE,GAAkB7lJ,EAAE4qJ,QAAQ/E,GAAmBA,EAAE,CAAC,IAAIhgK,EAAE,CAAC0L,KAAK,KAAKqkD,SAAS,qEAAqEjsD,MAAM,KAAKiqF,cAAc,uBAAuBjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,iHAA2G9vE,MAAM,KAAK+pF,YAAY,6EAAuE/pF,MAAM,KAAKwgK,QAAQ,SAAStE,GAAG,OAAOA,EAAE,GAAG,EAAEkC,UAAU,EAAE7rF,UAAU,EAAE2tF,aAAa,CAACC,OAAO,qBAAYC,KAAK,YAAY/pJ,EAAE4lJ,EAAE7oI,EAAE6oI,EAAEsD,GAAGtD,EAAEn1C,EAAEm1C,EAAEoD,GAAGpD,EAAEvyJ,EAAEuyJ,EAAE+C,GAAG/C,EAAEG,EAAEH,EAAE2C,GAAG3C,EAAEx+E,EAAI4iF,GAAGpE,GAAGwE,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,mBAAmBC,IAAI,gCAAgCC,KAAK,sCAAsC7lK,EAAE,WAAWgmK,GAAG,cAAcC,IAAI,2BAA2BC,KAAK,kCAAkC,OAAO7T,EAAEoC,QAAQrmF,OAAOptE,EAAE,MAAK,GAAIA,CAAC,CAA5tD8b,CAAEgpJ,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAI9b,EAA5E,SAAS+/J,EAAEjkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOikJ,CAAEjkJ,GAAG1iB,EAAE,CAACsS,KAAK,QAAQqkD,SAAS,sDAAsDjsD,MAAM,KAAK8vE,OAAO,gGAAuF9vE,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,qCAAqCjqF,MAAM,KAAK+pF,YAAY,0EAAiE/pF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,0BAA0Bb,aAAa,CAACC,OAAO,UAAUC,KAAK,YAAY/pJ,EAAE,oBAAoB+c,EAAE,aAAamsI,GAAG,aAAaz4C,EAAE,YAAYu4C,GAAG,YAAY31J,EAAE,UAAUs1J,GAAG,WAAW5C,EAAE,UAAUwC,GAAG,UAAUnhF,EAAE,QAAQ4iF,GAAG,WAAW,OAAOnkK,EAAEyzJ,QAAQrmF,OAAOh0E,EAAE,MAAK,GAAIA,CAAC,CAAjjC2mK,CAAE+E,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS0O,EAAEjkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOikJ,CAAEjkJ,GAAG9b,EAAE,CAAC0L,KAAK,KAAKqkD,SAAS,sDAAsDjsD,MAAM,KAAKiqF,cAAc,qCAAqCjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,gGAAuF9vE,MAAM,KAAK+pF,YAAY,0EAAiE/pF,MAAM,KAAKo+J,UAAU,EAAE7rF,UAAU,EAAEkuF,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,0BAA0Bb,aAAa,CAACC,OAAO,UAAUC,KAAK,YAAY/pJ,EAAE,oBAAoB+c,EAAE,aAAamsI,GAAG,aAAaz4C,EAAE,YAAYu4C,GAAG,YAAY31J,EAAE,UAAUs1J,GAAG,WAAW5C,EAAE,UAAUwC,GAAG,UAAUnhF,EAAE,QAAQ4iF,GAAG,UAAUG,QAAQ,SAASxoJ,GAAG,OAASA,GAAG,IAAIA,EAAE,KAAK,GAAG,GAAG,OAAOu1I,EAAEoC,QAAQrmF,OAAOptE,EAAE,MAAK,GAAIA,CAAC,CAAzkC+/J,CAAE+E,EAAQ,4BCAzBjF,EAAOC,QAA8K,SAASqF,GAAG,aAAqF,IAAI33J,EAA5E,SAAS0yJ,EAAEiF,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC1R,QAAQ0R,EAAE,CAAOjF,CAAEiF,GAAGrpJ,EAAE,CAAC3B,EAAE,0DAAampJ,GAAG,oCAAWpsI,EAAE,qBAAMmsI,GAAG,8BAAUz4C,EAAE,qBAAMu4C,GAAG,8BAAUiC,IAAI,uCAAS53J,EAAE,qBAAMs1J,GAAG,8BAAUuC,IAAI,uCAASnF,EAAE,2BAAOwC,GAAG,0CAAY4C,IAAI,6CAAU/jF,EAAE,qBAAM4iF,GAAG,8BAAUoB,IAAI,wCAAU,SAASnsK,EAAE+rK,EAAEjF,EAAE1yJ,GAAG,OAAOsO,EAAEtO,GAAG,IAAI23J,EAAE,IAAI,MAAMrpJ,EAAEtO,IAAIvC,QAAQ,KAAKk6J,EAAE,CAAC,IAAInmK,EAAE,CAAC0M,KAAK,KAAKqkD,SAAS,6LAAuCjsD,MAAM,KAAKiqF,cAAc,6FAAuBjqF,MAAM,KAAKoqF,YAAY,uFAAsBpqF,MAAM,KAAK8vE,OAAO,sXAA0E9vE,MAAM,KAAK+pF,YAAY,sOAAkD/pF,MAAM,KAAKkgK,aAAa,CAACC,OAAO,8BAAUC,KAAK,8BAAU/pJ,EAAE/gB,EAAE89B,EAAE99B,EAAEiqK,GAAGjqK,EAAEwxH,EAAExxH,EAAE+pK,GAAG/pK,EAAEoU,EAAEpU,EAAE0pK,GAAG1pK,EAAE8mK,EAAE9mK,EAAEspK,GAAGtpK,EAAEmoF,EAAEnoF,EAAE+qK,GAAG/qK,GAAGkrK,QAAQ,SAASa,GAAG,OAAOA,CAAC,EAAE12G,OAAO,CAAC+1G,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,sBAAiBC,IAAI,4BAAuBC,KAAK,kCAA6B7lK,EAAE,WAAWgmK,GAAG,aAAaC,IAAI,mBAAmBC,KAAK,yBAAyBX,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,sBAAiBC,IAAI,4BAAuBC,KAAK,kCAA6B7lK,EAAE,WAAWgmK,GAAG,aAAaC,IAAI,mBAAmBC,KAAK,0BAA0B,OAAO13J,EAAEimJ,QAAQrmF,OAAOpuE,EAAE,MAAK,GAAIA,CAAC,CAAl7CkhK,CAAE4E,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAS1mK,GAAG,aAAqF,IAAIi4J,EAA5E,SAASv1I,EAAE1iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAACq6J,QAAQr6J,EAAE,CAAO0iB,CAAE1iB,GAAGoU,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,6RAAuDjsD,MAAM,KAAK8vE,OAAO,8YAA8E9vE,MAAM,KAAKiqF,cAAc,+JAAkCjqF,MAAM,KAAK+pF,YAAY,2PAA6D/pF,MAAM,KAAKoqF,YAAY,iFAAqBpqF,MAAM,KAAKwgK,QAAQ,SAASlrK,GAAG,OAAOA,CAAC,EAAEmrK,QAAQ,CAACC,GAAG,4BAAaC,IAAI,+BAAgBC,EAAE,aAAaC,GAAG,cAAcC,IAAI,yCAA0BC,KAAK,gDAAiCb,aAAa,CAACC,OAAO,wBAASC,KAAK,8BAAU/pJ,EAAE,2DAAc+c,EAAE,wCAAUmsI,GAAG,8BAAUz4C,EAAE,wCAAUu4C,GAAG,8BAAU31J,EAAE,kCAASs1J,GAAG,wBAAS5C,EAAE,8CAAWwC,GAAG,oCAAWnhF,EAAE,wCAAU4iF,GAAG,gCAAY,OAAO9S,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAAphCsO,CAAEgpJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS9xJ,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAG3B,EAAE,mHAAoGrW,MAAM,KAAKi8J,EAAE,+GAAgGj8J,MAAM,KAAK1K,EAAE,+BAA+BogB,EAAE,SAASsC,EAAEvc,GAAG,OAAOnG,EAAEuhG,KAAKp7F,GAAG4a,EAAE2B,EAAE40C,SAASqvG,EAAEjkJ,EAAE40C,QAAQ,EAAEl3C,EAAEW,EAAE4lJ,EAAEvmJ,EAAEgI,EAAErH,EAAE,IAAIna,EAAE,CAAC0L,KAAK,KAAKqkD,SAAS,iEAA4DjsD,MAAM,KAAKiqF,cAAc,0CAAqCjqF,MAAM,KAAKoqF,YAAY,4BAAuBpqF,MAAM,KAAK8vE,OAAOp6D,EAAEq0E,YAAY,oEAA+D/pF,MAAM,KAAKo+J,UAAU,EAAEqC,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,aAAaC,GAAG,eAAeC,IAAI,oBAAoBC,KAAK,2BAA2Bb,aAAa,CAACC,OAAO,QAAQC,KAAK,WAAW/pJ,EAAE,UAAU+c,EAAE,SAASmsI,GAAG,YAAYz4C,EAAE,MAAMu4C,GAAG,UAAU31J,EAAE,MAAMs1J,GAAG,UAAU5C,EAAE,SAASwC,GAAG,aAAanhF,EAAE,SAAS4iF,GAAG,aAAaG,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,GAAG,OAAOu1I,EAAEoC,QAAQrmF,OAAOptE,EAAE,MAAK,GAAIA,CAAC,CAArwCT,CAAEulK,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS0O,EAAEjkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOikJ,CAAEjkJ,GAAGxE,EAAE,CAAC5L,KAAK,KAAKqkD,SAAS,6EAAsDjsD,MAAM,KAAKiqF,cAAc,yCAAgCjqF,MAAM,KAAKoqF,YAAY,qBAAqBpqF,MAAM,KAAK8vE,OAAO,4HAAoG9vE,MAAM,KAAK+pF,YAAY,oEAAqD/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEomJ,UAAU,EAAE8B,aAAa,CAACC,OAAO,cAAWC,KAAK,KAAK/pJ,EAAE,SAAS2B,EAAEikJ,EAAE1O,EAAE/5I,GAAG,MAAM,6BAAoBA,GAAGyoJ,EAAE,GAAG,IAAI,EAAE7oI,EAAE,SAASpb,EAAEikJ,EAAE1O,EAAE/5I,GAAG,MAAM,YAAYA,GAAGyoJ,EAAE,GAAG,IAAI,EAAEsD,GAAG,SAASvnJ,EAAEikJ,EAAE1O,EAAE/5I,GAAG,OAAOwE,EAAE,SAASxE,GAAGyoJ,EAAE,GAAG,IAAI,EAAEn1C,EAAE,SAAS9uG,EAAEikJ,EAAE1O,EAAE/5I,GAAG,MAAM,QAAQA,GAAGyoJ,EAAE,SAAM,cAAQ,EAAEoD,GAAG,SAASrnJ,EAAEikJ,EAAE1O,EAAE/5I,GAAG,OAAOwE,EAAE,KAAKxE,GAAGyoJ,EAAE,SAAM,cAAQ,EAAEvyJ,EAAE,SAASsO,EAAEikJ,EAAE1O,EAAE/5I,GAAG,MAAM,QAAQA,GAAGyoJ,EAAE,MAAM,QAAQ,EAAE+C,GAAG,SAAShnJ,EAAEikJ,EAAE1O,EAAE/5I,GAAG,OAAOwE,EAAE,KAAKxE,GAAGyoJ,EAAE,MAAM,QAAQ,EAAEG,EAAE,SAASpkJ,EAAEikJ,EAAE1O,EAAE/5I,GAAG,MAAM,QAAQA,GAAGyoJ,EAAE,WAAQ,aAAU,EAAE2C,GAAG,SAAS5mJ,EAAEikJ,EAAE1O,EAAE/5I,GAAG,OAAOwE,EAAE,KAAKxE,GAAGyoJ,EAAE,WAAQ,aAAU,EAAEx+E,EAAE,SAASzlE,EAAEikJ,EAAE1O,EAAE/5I,GAAG,MAAM,QAAQA,GAAGyoJ,EAAE,QAAK,SAAM,EAAEoE,GAAG,SAASroJ,EAAEikJ,EAAE1O,EAAE/5I,GAAG,OAAOwE,EAAE,KAAKxE,GAAGyoJ,EAAE,QAAK,SAAM,GAAGwE,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,cAAcC,GAAG,gBAAgBC,IAAI,qBAAqBC,KAAK,6BAA6B,OAAOxT,EAAEoC,QAAQrmF,OAAO91D,EAAE,MAAK,GAAIA,CAAC,CAA/+CyoJ,CAAE+E,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS9xJ,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAG1iB,EAAE,CAACsS,KAAK,KAAKqkD,SAAS,6CAA6CjsD,MAAM,KAAK8vE,OAAO,yFAAyF9vE,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKo+J,UAAU,EAAEqC,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,4BAA4BC,KAAK,mCAAmCb,aAAa,CAACC,OAAO,WAAWC,KAAK,eAAe/pJ,EAAE,iBAAiB+c,EAAE,UAAUmsI,GAAG,WAAWz4C,EAAE,QAAQu4C,GAAG,SAAS31J,EAAE,SAASs1J,GAAG,UAAU5C,EAAE,UAAUwC,GAAG,WAAWnhF,EAAE,UAAU4iF,GAAG,YAAYG,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,GAAG,OAAOu1I,EAAEoC,QAAQrmF,OAAOh0E,EAAE,MAAK,GAAIA,CAAC,CAA3hCmG,CAAEulK,EAAQ,2BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIikJ,EAA5E,SAASvmJ,EAAEsC,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOtC,CAAEsC,GAAGu1I,EAAE,CAAC3lJ,KAAK,QAAQqkD,SAAS,0EAA2DjsD,MAAM,KAAK8vE,OAAO,gGAAgG9vE,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,8BAA8BjqF,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,0BAA0Bb,aAAa,CAACC,OAAO,SAASC,KAAK,QAAQ/pJ,EAAE,iBAAiB+c,EAAE,YAAYmsI,GAAG,YAAYz4C,EAAE,SAASu4C,GAAG,SAAS31J,EAAE,YAAYs1J,GAAG,YAAY5C,EAAE,UAAUwC,GAAG,UAAUnhF,EAAE,UAAU4iF,GAAG,YAAY,OAAOpE,EAAEtM,QAAQrmF,OAAOikF,EAAE,MAAK,GAAIA,CAAC,CAA/hC73I,CAAEsrJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS73I,EAAEsC,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOtC,CAAEsC,GAAGikJ,EAAE,CAACr0J,KAAK,KAAKqkD,SAAS,0EAA2DjsD,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,gGAAgG9vE,MAAM,KAAKo+J,UAAU,EAAEr0E,YAAY,kDAAkD/pF,MAAM,KAAKygK,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,0BAA0Bb,aAAa,CAACC,OAAO,SAASC,KAAK,QAAQ/pJ,EAAE,kBAAkB+c,EAAE,YAAYmsI,GAAG,YAAYz4C,EAAE,UAAUu4C,GAAG,SAAS31J,EAAE,YAAYs1J,GAAG,YAAY5C,EAAE,UAAUwC,GAAG,UAAUnhF,EAAE,UAAU4iF,GAAG,WAAWG,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,MAAG,GAAG,OAAOu1I,EAAEoC,QAAQrmF,OAAO2yF,EAAE,MAAK,GAAIA,CAAC,CAA/hCvmJ,CAAEsrJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAASj4J,EAAE0iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAO1iB,CAAE0iB,GAAGtO,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,uIAA8BjsD,MAAM,KAAKiqF,cAAc,mDAAgBjqF,MAAM,KAAKoqF,YAAY,mDAAgBpqF,MAAM,KAAK8vE,OAAO,qGAAyC9vE,MAAM,KAAK+pF,YAAY,qGAAyC/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,QAAG,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,2BAAYC,IAAI,iCAAkBC,KAAK,sCAAuB7lK,EAAE,aAAagmK,GAAG,2BAAYC,IAAI,iCAAkBC,KAAK,uCAAwB3C,SAAS,SAASzmJ,GAAG,OAAOA,EAAE,GAAG,eAAK,cAAI,EAAEkoJ,aAAa,CAACC,OAAO,WAAMC,KAAK,WAAM/pJ,EAAE,eAAK+c,EAAE,UAAKmsI,GAAG,WAAMz4C,EAAE,gBAAMu4C,GAAG,iBAAO31J,EAAE,UAAKs1J,GAAG,WAAM5C,EAAE,gBAAMwC,GAAG,iBAAOnhF,EAAE,UAAK4iF,GAAG,aAAQ,OAAO9S,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAAr9BpU,CAAE0rK,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS0O,EAAEjkJ,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOikJ,CAAEjkJ,GAAG1iB,EAAE,CAACsS,KAAK,KAAKqkD,SAAS,+CAA+CjsD,MAAM,KAAK8vE,OAAO,yFAAyF9vE,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,8BAA8BjqF,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,4BAA4BC,KAAK,mCAAmCb,aAAa,CAACC,OAAO,gBAAgBC,KAAK,uBAAuB/pJ,EAAE,kBAAkB+c,EAAE,kBAAkBmsI,GAAG,WAAWz4C,EAAE,gBAAgBu4C,GAAG,SAAS31J,EAAE,WAAWs1J,GAAG,YAAY5C,EAAE,UAAUwC,GAAG,WAAWnhF,EAAE,SAAS4iF,GAAG,YAAY,OAAO9S,EAAEoC,QAAQrmF,OAAOh0E,EAAE,MAAK,GAAIA,CAAC,CAAzjC2mK,CAAE+E,EAAQ,4BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAItO,EAA5E,SAASpU,EAAE0iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAO1iB,CAAE0iB,GAAGu1I,EAAE,CAAC3lJ,KAAK,KAAKqkD,SAAS,uIAA8BjsD,MAAM,KAAKiqF,cAAc,mDAAgBjqF,MAAM,KAAKoqF,YAAY,mDAAgBpqF,MAAM,KAAK8vE,OAAO,qGAAyC9vE,MAAM,KAAK+pF,YAAY,qGAAyC/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,SAASC,IAAI,YAAYC,EAAE,cAAcC,GAAG,0BAAgBC,IAAI,iCAAuBC,KAAK,sCAA4B7lK,EAAE,cAAcgmK,GAAG,0BAAgBC,IAAI,iCAAuBC,KAAK,uCAA6B3C,SAAS,SAASzmJ,GAAG,OAAOA,EAAE,GAAG,eAAK,cAAI,EAAEkoJ,aAAa,CAACC,OAAO,YAAOC,KAAK,YAAO/pJ,EAAE,gBAAM+c,EAAE,UAAKmsI,GAAG,WAAMz4C,EAAE,sBAAOu4C,GAAG,iBAAO31J,EAAE,eAAKs1J,GAAG,WAAM5C,EAAE,gBAAMwC,GAAG,WAAMnhF,EAAE,gBAAM4iF,GAAG,aAAQ,OAAO32J,EAAEimJ,QAAQrmF,OAAOikF,EAAE,MAAK,GAAIA,CAAC,CAAr/Bj4J,CAAE0rK,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAASj4J,EAAE0iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAO1iB,CAAE0iB,GAAGikJ,EAAE,CAACr0J,KAAK,KAAKqkD,SAAS,4EAAmEjsD,MAAM,KAAK8vE,OAAO,6FAAuF9vE,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,uCAA8BjqF,MAAM,KAAK+pF,YAAY,+DAA+D/pF,MAAM,KAAKoqF,YAAY,gCAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,cAAcC,IAAI,iBAAiBC,EAAE,aAAaC,GAAG,eAAeC,IAAI,2BAA2BC,KAAK,mCAAmC,OAAOxT,EAAEoC,QAAQrmF,OAAO2yF,EAAE,MAAK,GAAIA,CAAC,CAA/3B3mK,CAAE0rK,EAAQ,4BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS9xJ,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAG1iB,EAAE,CAACsS,KAAK,QAAQqkD,SAAS,6CAA6CjsD,MAAM,KAAK8vE,OAAO,oFAAoF9vE,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,8BAA8BjqF,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,4BAA4BC,KAAK,mCAAmCb,aAAa,CAACC,OAAO,WAAWC,KAAK,gBAAgB/pJ,EAAE,gBAAgB+c,EAAE,UAAUmsI,GAAG,WAAWz4C,EAAE,QAAQu4C,GAAG,SAAS31J,EAAE,SAASs1J,GAAG,UAAU5C,EAAE,UAAUwC,GAAG,WAAWnhF,EAAE,UAAU4iF,GAAG,aAAa,OAAO9S,EAAEoC,QAAQrmF,OAAOh0E,EAAE,MAAK,GAAIA,CAAC,CAAxhCmG,CAAEulK,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAAS9xJ,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAG3B,EAAE,CAACzO,KAAK,KAAKqkD,SAAS,6CAA6CjsD,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,oFAAoF9vE,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKo+J,UAAU,EAAEqC,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,2BAA2Bb,aAAa,CAACC,OAAO,WAAWC,KAAK,gBAAgB/pJ,EAAE,gBAAgB+c,EAAE,UAAUmsI,GAAG,WAAWz4C,EAAE,QAAQu4C,GAAG,SAAS31J,EAAE,SAASs1J,GAAG,UAAU5C,EAAE,UAAUwC,GAAG,WAAWnhF,EAAE,UAAU4iF,GAAG,YAAYG,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,GAAG,OAAOu1I,EAAEoC,QAAQrmF,OAAOjzD,EAAE,MAAK,GAAIA,CAAC,CAAtgC5a,CAAEulK,EAAQ,4BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIikJ,EAA5E,SAASxgK,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAGtO,EAAE,CAAC9B,KAAK,QAAQqkD,SAAS,6DAA6DjsD,MAAM,KAAK8vE,OAAO,0FAA0F9vE,MAAM,KAAK+pF,YAAY,6DAA6D/pF,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,8BAA8BjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,CAAC,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,0BAA0Bb,aAAa,CAACC,OAAO,UAAUC,KAAK,aAAa/pJ,EAAE,oBAAoB+c,EAAE,mBAAamsI,GAAG,aAAaz4C,EAAE,gBAAUu4C,GAAG,SAAS31J,EAAE,gBAAUs1J,GAAG,WAAW5C,EAAE,kBAAYwC,GAAG,aAAanhF,EAAE,iBAAW4iF,GAAG,YAAY,OAAOpE,EAAEtM,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAArjCjO,CAAEulK,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAItO,EAA5E,SAASjO,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAGikJ,EAAE,CAACr0J,KAAK,KAAKqkD,SAAS,6DAA6DjsD,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAKoqF,YAAY,uBAAuBpqF,MAAM,KAAK8vE,OAAO,0FAA0F9vE,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,MAAM,IAAIA,GAAG,IAAIA,GAAG,IAAIA,GAAGA,GAAG,GAAG,MAAM,MAAM,GAAG,EAAEomJ,UAAU,EAAE7rF,UAAU,EAAEkuF,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,0BAA0Bb,aAAa,CAACC,OAAO,UAAUC,KAAK,aAAa/pJ,EAAE,oBAAoB+c,EAAE,aAAamsI,GAAG,aAAaz4C,EAAE,UAAUu4C,GAAG,SAAS31J,EAAE,UAAUs1J,GAAG,WAAW5C,EAAE,YAAYwC,GAAG,aAAanhF,EAAE,WAAW4iF,GAAG,YAAY,OAAO32J,EAAEimJ,QAAQrmF,OAAO2yF,EAAE,MAAK,GAAIA,CAAC,CAAxlCxgK,CAAEulK,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAS1mK,GAAG,aAAqF,IAAIi4J,EAA5E,SAASv1I,EAAE1iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAACq6J,QAAQr6J,EAAE,CAAO0iB,CAAE1iB,GAAGoU,EAAE,CAAC9B,KAAK,QAAQqkD,SAAS,ySAAyDjsD,MAAM,KAAK8vE,OAAO,8VAAsE9vE,MAAM,KAAKiqF,cAAc,yJAAiCjqF,MAAM,KAAK+pF,YAAY,8VAAsE/pF,MAAM,KAAKoqF,YAAY,yJAAiCpqF,MAAM,KAAKwgK,QAAQ,SAASlrK,GAAG,OAAOA,CAAC,EAAEmrK,QAAQ,CAACC,GAAG,4BAAaC,IAAI,+BAAgBC,EAAE,aAAaC,GAAG,cAAcC,IAAI,yCAA0BC,KAAK,gDAAiCb,aAAa,CAACC,OAAO,8BAAUC,KAAK,oCAAW/pJ,EAAE,oDAAY+c,EAAE,wCAAUmsI,GAAG,8BAAUz4C,EAAE,8CAAWu4C,GAAG,8BAAU31J,EAAE,wCAAUs1J,GAAG,wBAAS5C,EAAE,oDAAYwC,GAAG,oCAAWnhF,EAAE,wCAAU4iF,GAAG,0BAAW,OAAO9S,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAA1iCsO,CAAEgpJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAI9b,EAA5E,SAASqxJ,EAAEv1I,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOu1I,CAAEv1I,GAAG,SAASvc,EAAEuc,GAAG,OAAOA,EAAE,GAAG,GAAGA,EAAE,GAAG,MAAMA,EAAE,IAAI,IAAI,CAAC,CAAC,SAASikJ,EAAEjkJ,EAAEu1I,EAAErxJ,GAAG,IAAI+/J,EAAEjkJ,EAAE,IAAI,OAAO9b,GAAG,IAAI,IAAI,OAAOqxJ,EAAE,SAAS,cAAS,IAAI,KAAK,OAAO0O,GAAGxgK,EAAEuc,GAAG,SAAS,SAAS,IAAI,IAAI,OAAOu1I,EAAE,UAAU,eAAU,IAAI,KAAK,OAAO0O,GAAGxgK,EAAEuc,GAAG,UAAU,UAAU,IAAI,KAAK,OAAOikJ,GAAGxgK,EAAEuc,GAAG,gBAAW,iBAAY,IAAI,KAAK,OAAOikJ,GAAGxgK,EAAEuc,GAAG,OAAO,OAAO,CAAC,IAAIxE,EAAE,+GAAqGxT,MAAM,KAAK1K,EAAE,iIAAmG0K,MAAM,KAAKqW,EAAE,SAAS3M,EAAE,SAASsO,EAAEu1I,GAAG,OAAOl3I,EAAEwgF,KAAK02D,GAAG/5I,EAAEwE,EAAE40C,SAASt3D,EAAE0iB,EAAE40C,QAAQ,EAAEljD,EAAE2M,EAAE/gB,EAAEoU,EAAEgU,EAAElK,EAAE,IAAIkC,EAAE,CAAC9N,KAAK,KAAKqkD,SAAS,4EAA6DjsD,MAAM,KAAKiqF,cAAc,gCAA2BjqF,MAAM,KAAKoqF,YAAY,4BAAuBpqF,MAAM,KAAK8vE,OAAOpmE,EAAEqgF,YAAY,uDAAkD/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEomJ,UAAU,EAAE7rF,UAAU,EAAE2tF,aAAa,CAACC,OAAO,QAAQC,KAAK,UAAU/pJ,EAAE,eAAe+c,EAAE6oI,EAAEsD,GAAGtD,EAAEn1C,EAAEm1C,EAAEoD,GAAGpD,EAAEvyJ,EAAE,eAAUs1J,GAAG,SAAS5C,EAAE,eAAUwC,GAAG3C,EAAEx+E,EAAE,MAAM4iF,GAAGpE,GAAGwE,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,4BAA4B,OAAO7kK,EAAEyzJ,QAAQrmF,OAAO5zD,EAAE,MAAK,GAAIA,CAAC,CAAjhD63I,CAAEyT,EAAQ,6BCAzBjF,EAAOC,QAAiL,SAAShkJ,GAAG,aAAqF,IAAIvc,EAA5E,SAASia,EAAEsC,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOtC,CAAEsC,GAAG3B,EAAE,CAACzO,KAAK,QAAQqkD,SAAS,uFAAiFjsD,MAAM,KAAKiqF,cAAc,iCAA8BjqF,MAAM,KAAKoqF,YAAY,yCAAuBpqF,MAAM,KAAK8vE,OAAO,8FAA2F9vE,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,MAAG,EAAEyoJ,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,wBAAwBC,IAAI,sCAAmCC,KAAK,6CAA0Cb,aAAa,CAACC,OAAO,QAAQC,KAAK,WAAQ/pJ,EAAE,kBAAkB+c,EAAE,YAAYmsI,GAAG,aAAaz4C,EAAE,WAAWu4C,GAAG,WAAW31J,EAAE,SAASs1J,GAAG,UAAU5C,EAAE,YAASwC,GAAG,WAAWnhF,EAAE,SAAS4iF,GAAG,YAAY,OAAO5kK,EAAEk0J,QAAQrmF,OAAOjzD,EAAE,MAAK,GAAIA,CAAC,CAAhlCX,CAAEsrJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAItC,EAA5E,SAASja,EAAEuc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOvc,CAAEuc,GAAGu1I,EAAE,CAAC3lJ,KAAK,KAAKqkD,SAAS,uFAAiFjsD,MAAM,KAAKiqF,cAAc,8BAA8BjqF,MAAM,KAAKoqF,YAAY,sCAAuBpqF,MAAM,KAAK8vE,OAAO,8FAA2F9vE,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,MAAG,EAAEomJ,UAAU,EAAE7rF,UAAU,EAAEkuF,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,wBAAwBC,IAAI,sCAAmCC,KAAK,6CAA0Cb,aAAa,CAACC,OAAO,QAAQC,KAAK,WAAQ/pJ,EAAE,kBAAkB+c,EAAE,YAAYmsI,GAAG,aAAaz4C,EAAE,WAAWu4C,GAAG,WAAW31J,EAAE,SAASs1J,GAAG,UAAU5C,EAAE,YAASwC,GAAG,WAAWnhF,EAAE,SAAS4iF,GAAG,YAAY,OAAO3qJ,EAAEi6I,QAAQrmF,OAAOikF,EAAE,MAAK,GAAIA,CAAC,CAAlmC9xJ,CAAEulK,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAS1mK,GAAG,aAAqF,IAAI0iB,EAA5E,SAASu1I,EAAEj4J,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAACq6J,QAAQr6J,EAAE,CAAOi4J,CAAEj4J,GAAG2mK,EAAE,kbAAoFj8J,MAAM,KAAKqW,EAAE,saAAkFrW,MAAM,KAAKwT,EAAE,6QAAgExT,MAAM,KAAK0V,EAAE,kRAAgE1V,MAAM,KAAK9D,EAAE,+BAA+B,SAASwN,EAAEpU,EAAEi4J,EAAEv1I,IAAG,IAAIikJ,EAAE5lJ,GAAE,MAAM,MAAM2B,GAAEu1I,EAAE,uCAAS,uCAASj4J,EAAE,KAAK2mK,GAAG3mK,EAAE+gB,GAAE,CAACkpJ,GAAGhS,EAAE,2GAAsB,2GAAsB8R,GAAG,6EAAiBL,GAAG,uEAAgBJ,GAAG,iHAAuByB,GAAG,kEAAgBroJ,IAAGhY,MAAM,KAAKi8J,EAAE,IAAI,GAAGA,EAAE,KAAK,GAAG5lJ,GAAE,GAAG4lJ,EAAE,IAAI,GAAGA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,KAAK,IAAI5lJ,GAAE,GAAGA,GAAE,GAAG,CAAC,IAAI6lJ,EAAE,SAAS5mK,EAAEi4J,GAAG,OAAOrxJ,EAAE26F,KAAK02D,GAAG0O,EAAE3mK,EAAEs3D,SAASv2C,EAAE/gB,EAAEs3D,QAAQ,EAAEsvG,EAAE7lJ,EAAEA,EAAE6lJ,EAAEx+I,EAAEu+I,EAAE,IAAIxgK,EAAE,SAASnG,EAAEi4J,GAAG,OAAOrxJ,EAAE26F,KAAK02D,GAAG/5I,EAAEle,EAAEs3D,SAASl3C,EAAEpgB,EAAEs3D,QAAQ,EAAEnxD,EAAE4a,EAAEX,EAAEja,EAAEiiB,EAAElK,EAAE,IAAI4f,EAAE,CAACxrB,KAAK,KAAKqkD,SAAS,mVAAgEjsD,MAAM,KAAKiqF,cAAc,uIAA8BjqF,MAAM,KAAKoqF,YAAY,6FAAuBpqF,MAAM,KAAK8vE,OAAOosF,EAAEnyE,YAAYtuF,EAAE2iK,UAAU,EAAE7rF,UAAU,EAAEkuF,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,aAAaC,GAAG,sBAAiBC,IAAI,4BAAuBC,KAAK,mCAA8Bb,aAAa,CAACC,OAAO,oCAAWC,KAAK,oCAAW/pJ,EAAE,8FAAmB+c,EAAE1pB,EAAE61J,GAAG71J,EAAEo9G,EAAE,qBAAMu4C,GAAG31J,EAAEA,EAAE,2BAAOs1J,GAAGt1J,EAAE0yJ,EAAE,iCAAQwC,GAAGl1J,EAAE+zE,EAAE,qBAAM4iF,GAAG32J,GAAG82J,QAAQ,SAASlrK,GAAG,OAAOA,CAAC,EAAEmpK,SAAS,SAASnpK,GAAG,OAAOA,EAAE,EAAE,2BAAOA,EAAE,GAAG,2BAAOA,EAAE,GAAG,qBAAM,sCAAQ,GAAG,OAAO0iB,EAAE23I,QAAQrmF,OAAOl2C,EAAE,MAAK,GAAIA,CAAC,CAA1tDm6H,CAAEyT,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIikJ,EAA5E,SAAS1O,EAAEv1I,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOu1I,CAAEv1I,GAAG,SAASxE,EAAEwE,GAAG,OAAOA,EAAE,GAAGA,EAAE,GAAG,MAAMA,EAAE,GAAG,CAAC,SAAStC,EAAEsC,EAAEu1I,EAAE0O,EAAEvmJ,GAAG,IAAIja,EAAEuc,EAAE,IAAI,OAAOikJ,GAAG,IAAI,IAAI,OAAO1O,GAAG73I,EAAE,mBAAa,mBAAgB,IAAI,IAAI,OAAO63I,EAAE,YAAS73I,EAAE,YAAS,aAAU,IAAI,KAAK,OAAO63I,GAAG73I,EAAEja,GAAG+X,EAAEwE,GAAG,YAAS,YAASvc,EAAE,cAAW,IAAI,IAAI,OAAO8xJ,EAAE,SAAS73I,EAAE,SAAS,UAAU,IAAI,KAAK,OAAO63I,GAAG73I,EAAEja,GAAG+X,EAAEwE,GAAG,SAAS,YAASvc,EAAE,WAAW,IAAI,IAAI,OAAO8xJ,GAAG73I,EAAE,WAAM,YAAO,IAAI,KAAK,OAAO63I,GAAG73I,EAAEja,GAAG+X,EAAEwE,GAAG,MAAM,UAAOvc,EAAE,aAAQ,IAAI,IAAI,OAAO8xJ,GAAG73I,EAAE,SAAS,WAAW,IAAI,KAAK,OAAO63I,GAAG73I,EAAEja,GAAG+X,EAAEwE,GAAG,UAAU,YAAYvc,EAAE,WAAW,IAAI,IAAI,OAAO8xJ,GAAG73I,EAAE,MAAM,QAAQ,IAAI,KAAK,OAAO63I,GAAG73I,EAAEja,GAAG+X,EAAEwE,GAAG,OAAO,SAASvc,EAAE,QAAQ,CAAC,IAAIA,EAAE,CAACmM,KAAK,KAAKqkD,SAAS,gEAAsDjsD,MAAM,KAAKiqF,cAAc,4BAAuBjqF,MAAM,KAAKoqF,YAAY,4BAAuBpqF,MAAM,KAAK8vE,OAAO,yGAAoF9vE,MAAM,KAAK+pF,YAAY,2DAAkD/pF,MAAM,KAAKo+J,UAAU,EAAE7rF,UAAU,EAAEiuF,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEyoJ,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,aAAaC,GAAG,eAAeC,IAAI,oBAAoBC,KAAK,yBAAyB7lK,EAAE,cAAcglK,aAAa,CAACC,OAAO,QAAQC,KAAK,UAAU/pJ,EAAEX,EAAE0d,EAAE1d,EAAE6pJ,GAAG7pJ,EAAEoxG,EAAEpxG,EAAE2pJ,GAAG3pJ,EAAEhM,EAAEgM,EAAEspJ,GAAGtpJ,EAAE0mJ,EAAE1mJ,EAAEkpJ,GAAGlpJ,EAAE+nE,EAAE/nE,EAAE2qJ,GAAG3qJ,IAAI,OAAOumJ,EAAEtM,QAAQrmF,OAAO7tE,EAAE,MAAK,GAAIA,CAAC,CAAljD8xJ,CAAEyT,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAI1iB,EAA5E,SAASi4J,EAAEv1I,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOu1I,CAAEv1I,GAAGikJ,EAAE,CAACr0J,KAAK,KAAKqkD,SAAS,2DAAsDjsD,MAAM,KAAK8vE,OAAO,wFAAwF9vE,MAAM,KAAKo+J,UAAU,EAAEn0E,cAAc,0CAAqCjqF,MAAM,KAAK+pF,YAAY,8DAA8D/pF,MAAM,KAAKoqF,YAAY,4BAAuBpqF,MAAM,KAAKwgK,QAAQ,SAASxoJ,GAAG,OAAOA,EAAE,GAAG,EAAEyoJ,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,aAAaC,GAAG,eAAeC,IAAI,oBAAoBC,KAAK,2BAA2Bb,aAAa,CAACC,OAAO,cAASC,KAAK,UAAU/pJ,EAAE,eAAe+c,EAAE,SAASmsI,GAAG,WAAWz4C,EAAE,MAAMu4C,GAAG,QAAQ31J,EAAE,MAAMs1J,GAAG,SAAS5C,EAAE,QAAQwC,GAAG,aAAanhF,EAAE,OAAO4iF,GAAG,WAAW,OAAO/qK,EAAEq6J,QAAQrmF,OAAO2yF,EAAE,MAAK,GAAIA,CAAC,CAA/gC1O,CAAEyT,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIvc,EAA5E,SAAS8xJ,EAAEv1I,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAOu1I,CAAEv1I,GAAGtO,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,6DAAoDjsD,MAAM,KAAKiqF,cAAc,uCAA8BjqF,MAAM,KAAKoqF,YAAY,gCAAuBpqF,MAAM,KAAK8vE,OAAO,wFAAwF9vE,MAAM,KAAK+pF,YAAY,kDAAkD/pF,MAAM,KAAKo+J,UAAU,EAAE7rF,UAAU,EAAEiuF,QAAQ,SAASxoJ,GAAG,IAAIu1I,EAAEv1I,EAAE,GAAG,MAAM,IAAIA,GAAG,IAAIu1I,GAAG,IAAIA,EAAE,IAAI,KAAK,GAAG,EAAEkT,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,0BAA0BC,KAAK,+BAA+BI,IAAI,mBAAmBC,KAAK,wBAAwBlB,aAAa,CAACC,OAAO,QAAQC,KAAK,kBAAe/pJ,EAAE,oBAAiB+c,EAAE,WAAWmsI,GAAG,aAAaz4C,EAAE,WAAWu4C,GAAG,YAAY31J,EAAE,SAASs1J,GAAG,WAAW5C,EAAE,cAAWwC,GAAG,gBAAanhF,EAAE,YAAS4iF,GAAG,aAAU,OAAO5kK,EAAEk0J,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAAtoC6jJ,CAAEyT,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAS1mK,GAAG,aAAqF,IAAIi4J,EAA5E,SAASv1I,EAAE1iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAACq6J,QAAQr6J,EAAE,CAAO0iB,CAAE1iB,GAAGoU,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,yPAAiDjsD,MAAM,KAAKiqF,cAAc,uOAA8CjqF,MAAM,KAAKoqF,YAAY,sEAAyBpqF,MAAM,KAAK8vE,OAAO,khBAAoG9vE,MAAM,KAAK+pF,YAAY,wMAAiE/pF,MAAM,KAAKygK,QAAQ,CAACC,GAAG,OAAOC,IAAI,UAAUC,EAAE,aAAaC,GAAG,cAAcC,IAAI,4CAAwBC,KAAK,sFAAoCb,aAAa,CAACC,OAAO,wBAASC,KAAK,+CAAY/pJ,EAAE,2EAAe+c,EAAE,6BAASmsI,GAAG,8BAAUz4C,EAAE,+CAAYu4C,GAAG,gDAAa31J,EAAE,uBAAQs1J,GAAG,wBAAS5C,EAAE,mCAAUwC,GAAG,oCAAWnhF,EAAE,iBAAO4iF,GAAG,mBAASG,QAAQ,SAASlrK,GAAG,OAAOA,EAAE,GAAG,GAAG,OAAOi4J,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAAjjCsO,CAAEgpJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAASvgK,GAAG,aAAqF,IAAI8xJ,EAA5E,SAASv1I,EAAEvc,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAACk0J,QAAQl0J,EAAE,CAAOuc,CAAEvc,GAAGnG,EAAE,CAACsS,KAAK,KAAKqkD,SAAS,0EAAwDjsD,MAAM,KAAKiqF,cAAc,iCAA8BjqF,MAAM,KAAKoqF,YAAY,0BAAuBpqF,MAAM,KAAK8vE,OAAO,yGAA6E9vE,MAAM,KAAK+pF,YAAY,4DAAkD/pF,MAAM,KAAKo+J,UAAU,EAAEqC,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,cAAcC,IAAI,oBAAoBC,KAAK,2BAA2Bb,aAAa,CAACC,OAAO,WAAWC,KAAK,aAAU/pJ,EAAE,mBAAgB+c,EAAE,aAAamsI,GAAG,YAAYz4C,EAAE,WAAWu4C,GAAG,UAAU31J,EAAE,aAAUs1J,GAAG,YAAS5C,EAAE,SAASwC,GAAG,QAAQnhF,EAAE,eAAU4iF,GAAG,eAAUG,QAAQ,SAAS/kK,GAAG,OAAOA,EAAE,GAAG,GAAG,OAAO8xJ,EAAEoC,QAAQrmF,OAAOh0E,EAAE,MAAK,GAAIA,CAAC,CAAtgC0iB,CAAEgpJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAS1mK,GAAG,aAAqF,IAAIi4J,EAA5E,SAASv1I,EAAE1iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAACq6J,QAAQr6J,EAAE,CAAO0iB,CAAE1iB,GAAG+gB,EAAE,gdAAyFrW,MAAM,KAAKi8J,EAAE,ggBAAiGj8J,MAAM,KAAK0V,EAAE,+BAA+B,SAAShM,EAAEpU,EAAE0iB,EAAEu1I,GAAG,IAAIl3I,EAAE4lJ,EAAE,MAAM,MAAM1O,EAAEv1I,EAAE,6CAAU,6CAAU,MAAMu1I,EAAEv1I,EAAE,uCAAS,uCAAS1iB,EAAE,KAAK+gB,GAAG/gB,EAAE2mK,EAAE,CAACuD,GAAGxnJ,EAAE,6HAAyB,6HAAyBunJ,GAAGvnJ,EAAE,6HAAyB,6HAAyBqnJ,GAAGrnJ,EAAE,2GAAsB,2GAAsBgnJ,GAAG,uEAAgBJ,GAAG,uHAAwByB,GAAG,8EAAkB9S,GAAGvtJ,MAAM,KAAKqW,EAAE,IAAI,GAAGA,EAAE,KAAK,GAAG4lJ,EAAE,GAAG5lJ,EAAE,IAAI,GAAGA,EAAE,IAAI,IAAIA,EAAE,IAAI,IAAIA,EAAE,KAAK,IAAI4lJ,EAAE,GAAGA,EAAE,GAAG,CAAC,IAAI//J,EAAE,SAAS5G,EAAE0iB,GAAG,OAAOtC,EAAEmhF,KAAK7+E,GAAG3B,EAAE/gB,EAAEs3D,SAASqvG,EAAE3mK,EAAEs3D,QAAQ,EAAE1wD,EAAEma,EAAE4lJ,EAAE//J,EAAEwhB,EAAErH,EAAE,IAAI7C,EAAE,CAAC5L,KAAK,KAAKqkD,SAAS,+SAA0DjsD,MAAM,KAAKiqF,cAAc,uIAA8BjqF,MAAM,KAAKoqF,YAAY,6FAAuBpqF,MAAM,KAAK8vE,OAAO5zE,EAAE6tF,YAAY,gRAAyD/pF,MAAM,KAAKo+J,UAAU,EAAE8B,aAAa,CAACC,OAAO,kBAAQC,KAAK,8BAAU/pJ,EAAE,wFAAkB+c,EAAE1pB,EAAE61J,GAAG71J,EAAEo9G,EAAEp9G,EAAE21J,GAAG31J,EAAEA,EAAE,2BAAOs1J,GAAGt1J,EAAE0yJ,EAAE,uCAASwC,GAAGl1J,EAAE+zE,EAAE,qBAAM4iF,GAAG32J,GAAG82J,QAAQ,SAASlrK,GAAG,OAAOA,CAAC,EAAEmrK,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,sBAAiBC,IAAI,6BAAwBC,KAAK,qCAAgC,OAAOxT,EAAEoC,QAAQrmF,OAAO91D,EAAE,MAAK,GAAIA,CAAC,CAAvmDwE,CAAEgpJ,EAAQ,6BCAzBjF,EAAOC,QAA8K,SAAShkJ,GAAG,aAAqF,IAAIu1I,EAA5E,SAASj4J,EAAE0iB,GAAG,OAAOA,GAAG,iBAAiBA,GAAG,YAAYA,EAAEA,EAAE,CAAC23I,QAAQ33I,EAAE,CAAO1iB,CAAE0iB,GAAGtO,EAAE,CAAC9B,KAAK,KAAKqkD,SAAS,uIAA8BjsD,MAAM,KAAKiqF,cAAc,6FAAuBjqF,MAAM,KAAKoqF,YAAY,mDAAgBpqF,MAAM,KAAK8vE,OAAO,0KAAwC9vE,MAAM,KAAK+pF,YAAY,qGAAyC/pF,MAAM,KAAKwgK,QAAQ,SAASxoJ,EAAE1iB,GAAG,MAAM,MAAMA,EAAE0iB,EAAE,SAAIA,EAAE,QAAG,EAAEomJ,UAAU,EAAE7rF,UAAU,EAAEkuF,QAAQ,CAACC,GAAG,QAAQC,IAAI,WAAWC,EAAE,aAAaC,GAAG,2BAAYC,IAAI,2CAAkBC,KAAK,+CAAsB7lK,EAAE,WAAWgmK,GAAG,2BAAYC,IAAI,iCAAkBC,KAAK,sCAAuBlB,aAAa,CAACC,OAAO,WAAMC,KAAK,WAAM/pJ,EAAE,eAAK+c,EAAE,iBAAOmsI,GAAG,kBAAQz4C,EAAE,iBAAOu4C,GAAG,kBAAQ31J,EAAE,WAAMs1J,GAAG,YAAO5C,EAAE,iBAAOwC,GAAG,kBAAQnhF,EAAE,WAAM4iF,GAAG,aAAQ5B,SAAS,SAASzmJ,EAAE1iB,GAAG,IAAIi4J,EAAE,IAAIv1I,EAAE1iB,EAAE,OAAOi4J,EAAE,IAAI,eAAKA,EAAE,IAAI,eAAKA,EAAE,KAAK,eAAKA,EAAE,KAAK,eAAKA,EAAE,KAAK,eAAK,cAAI,GAAG,OAAOA,EAAEoC,QAAQrmF,OAAO5/D,EAAE,MAAK,GAAIA,CAAC,CAA1kCpU,CAAE0rK,EAAQ,sBCAzBjF,EAAOC,QAA4J,WAAW,aAAa,IAAIhkJ,EAAE,CAAC2oJ,IAAI,YAAYD,GAAG,SAASE,EAAE,aAAaC,GAAG,eAAeC,IAAI,sBAAsBC,KAAK,6BAA6BxT,EAAE,0FAA0F0O,EAAE,OAAOzoJ,EAAE,QAAQtX,EAAE,qBAAqBwZ,EAAE,CAAC,EAAEW,EAAE,SAAS2B,GAAG,OAAOA,GAAGA,IAAIA,EAAE,GAAG,KAAK,IAAI,EAAMvc,EAAE,SAASuc,GAAG,OAAO,SAASu1I,GAAGh6J,KAAKykB,IAAIu1I,CAAC,CAAC,EAAE7vI,EAAE,CAAC,sBAAsB,SAAS1F,IAAIzkB,KAAKs/C,OAAOt/C,KAAKs/C,KAAK,CAAC,IAAIo8B,OAAO,SAASj3D,GAAkB,IAAXA,GAAc,MAAMA,EAAE,OAAO,EAAE,IAAIu1I,EAAEv1I,EAAEqY,MAAM,gBAAgB4rI,GAAE,GAAG1O,EAAE,KAAKA,EAAE,IAAI,GAAG,OAAO,IAAI0O,GAAE,EAAE,MAAM1O,EAAE,IAAI0O,GAAEA,EAAC,CAAhI,CAAkIjkJ,EAAE,GAAG8uG,EAAE,SAAS9uG,GAAG,IAAIu1I,EAAE73I,EAAEsC,GAAG,OAAOu1I,IAAIA,EAAErrE,QAAQqrE,EAAEA,EAAEl3I,EAAEnQ,OAAOqnJ,EAAE7vI,GAAG,EAAEw+I,EAAE,SAASlkJ,EAAEu1I,GAAG,IAAI0O,EAAEzoJ,GAAEkC,EAAE+oJ,SAAS,GAAGjrJ,IAAG,QAAQtX,EAAE,EAAEA,GAAG,GAAGA,GAAG,EAAE,GAAG8b,EAAEkqE,QAAQ1uE,GAAEtX,EAAE,EAAEqxJ,KAAI,EAAG,CAAC0O,EAAE//J,EAAE,GAAG,KAAK,OAAO+/J,EAAEjkJ,KAAKu1I,EAAE,KAAK,MAAM,OAAO0O,CAAC,EAAEvyJ,EAAE,CAAC41J,EAAE,CAACpjK,EAAE,SAAS8b,GAAGzkB,KAAKmuK,UAAUxF,EAAElkJ,GAAE,EAAG,GAAGvc,EAAE,CAACS,EAAE,SAAS8b,GAAGzkB,KAAKmuK,UAAUxF,EAAElkJ,GAAE,EAAG,GAAG0jJ,EAAE,CAAC,KAAK,SAAS1jJ,GAAGzkB,KAAKouK,aAAa,KAAK3pJ,CAAC,GAAG4pJ,GAAG,CAAC3F,EAAE,SAASjkJ,GAAGzkB,KAAKouK,aAAa,IAAI3pJ,CAAC,GAAGynJ,IAAI,CAAC,QAAQ,SAASznJ,GAAGzkB,KAAKouK,cAAc3pJ,CAAC,GAAG3B,EAAE,CAAC7C,EAAE/X,EAAE,YAAY+jK,GAAG,CAAChsJ,EAAE/X,EAAE,YAAY23B,EAAE,CAAC5f,EAAE/X,EAAE,YAAY8jK,GAAG,CAAC/rJ,EAAE/X,EAAE,YAAY0jK,EAAE,CAAC3rJ,EAAE/X,EAAE,UAAUqrH,EAAE,CAACtzG,EAAE/X,EAAE,UAAU2jK,GAAG,CAAC5rJ,EAAE/X,EAAE,UAAU4jK,GAAG,CAAC7rJ,EAAE/X,EAAE,UAAU+gK,EAAE,CAAChpJ,EAAE/X,EAAE,QAAQsjK,GAAG,CAAC9C,EAAExgK,EAAE,QAAQomK,GAAG,CAAC3lK,EAAE,SAAS8b,GAAG,IAAIu1I,EAAE73I,EAAE8qJ,QAAQvE,EAAEjkJ,EAAEqY,MAAM,OAAO,GAAG98B,KAAKs5D,IAAIovG,EAAE,GAAG1O,EAAE,QAAQ/5I,GAAE,EAAEA,IAAG,GAAGA,IAAG,EAAE+5I,EAAE/5I,IAAGrM,QAAQ,SAAS,MAAM6Q,IAAIzkB,KAAKs5D,IAAIr5C,GAAE,GAAG4oJ,EAAE,CAAC5oJ,EAAE/X,EAAE,UAAUmjK,GAAG,CAAC3C,EAAExgK,EAAE,UAAUojK,IAAI,CAAC3iK,EAAE,SAAS8b,GAAG,IAAIu1I,EAAEzmC,EAAE,UAAUm1C,GAAGn1C,EAAE,gBAAgBymC,EAAEv5J,IAAK,SAASgkB,IAAG,OAAOA,GAAEk0C,MAAM,EAAE,EAAE,IAAKg2B,QAAQlqE,GAAG,EAAE,GAAGikJ,EAAE,EAAE,MAAM,IAAIl4I,MAAMxwB,KAAKq5D,MAAMqvG,EAAE,IAAIA,CAAC,GAAG6C,KAAK,CAAC5iK,EAAE,SAAS8b,GAAG,IAAIu1I,EAAEzmC,EAAE,UAAU5kC,QAAQlqE,GAAG,EAAE,GAAGu1I,EAAE,EAAE,MAAM,IAAIxpI,MAAMxwB,KAAKq5D,MAAM2gG,EAAE,IAAIA,CAAC,GAAG8T,EAAE,CAAC,WAAW5lK,EAAE,SAASijK,GAAG,CAACzC,EAAE,SAASjkJ,GAAGzkB,KAAKo5D,KAAKt2C,EAAE2B,EAAE,GAAG2mJ,KAAK,CAAC,QAAQljK,EAAE,SAASikK,EAAEhiJ,EAAEokJ,GAAGpkJ,GAA4rB,OAAO,SAAS1F,EAAEu1I,EAAE0O,GAAGA,EAAE1wJ,EAAEwgF,mBAAkB,EAAG/zE,GAAGA,EAAE+pJ,oBAAoB1rJ,EAAE2B,EAAE+pJ,mBAAmB,IAAIvuJ,GAAE+5I,EAAE0P,UAAU/gK,EAAEsX,GAAE2d,MAAM3d,GAAE2d,MAAM,SAASnZ,IAAG,IAAIu1I,GAAEv1I,GAAEwsC,KAAKhxC,EAAEwE,GAAEmzE,IAAI90E,EAAE2B,GAAEs6F,KAAK/+G,KAAKupK,GAAGtpJ,EAAE,IAAI/X,EAAE4a,EAAE,GAAG,GAAG,iBAAiB5a,EAAE,CAAC,IAAIiiB,GAAE,IAAKrH,EAAE,GAAGywG,IAAE,IAAKzwG,EAAE,GAAG6lJ,GAAEx+I,GAAGopG,GAAEp9G,EAAE2M,EAAE,GAAGywG,KAAIp9G,EAAE2M,EAAE,IAAIX,EAAEniB,KAAK4qK,WAAWzgJ,GAAGhU,IAAIgM,EAAEumJ,EAAEgE,GAAGv2J,IAAInW,KAAK2pK,GAAG,SAASllJ,EAAEu1I,EAAE0O,GAAG,IAAI,GAAG,CAAC,IAAI,KAAK/5E,QAAQqrE,IAAG,EAAG,OAAO,IAAIzgG,MAAM,MAAMygG,EAAE,IAAI,GAAGv1I,GAAG,IAAIxE,EAA3kC,SAASma,EAAEsuI,GAAG,IAAM//J,EAAMA,EAAEwZ,GAAGA,EAAE+qJ,QAAQ,QAAQpqJ,IAAG4lJ,EAA5BA,EAAgC90J,QAAQ,oCAAqC,SAASomJ,EAAE0O,GAAEzoJ,IAAG,IAAIkC,EAAElC,IAAGA,GAAEkzH,cAAc,OAAOu1B,IAAG//J,EAAEsX,KAAIwE,EAAExE,KAAItX,EAAEwZ,GAAGvO,QAAQ,iCAAkC,SAAS6Q,EAAEu1I,EAAE0O,GAAG,OAAO1O,GAAG0O,EAAE/vG,MAAM,EAAE,EAAG,IAAK77B,MAAMk9H,GAAG9xJ,EAAE4a,GAAE9Y,OAAOmgB,GAAE,EAAEA,GAAEjiB,EAAEiiB,IAAG,EAAE,CAAC,IAAIopG,GAAEzwG,GAAEqH,IAAGw+I,EAAExyJ,EAAEo9G,IAAa5rH,EAAEghK,GAAGA,EAAE,GAAG7lJ,GAAEqH,IAAGxiB,EAAE,CAACy3F,MAA1BupE,GAAGA,EAAE,GAA6B8F,OAAO9mK,GAAG4rH,GAAE3/G,QAAQ,WAAW,GAAG,CAAC,OAAO,SAAS6Q,GAAG,QAAQu1I,GAAE,CAAC,EAAE0O,GAAE,EAAEzoJ,EAAE,EAAEyoJ,GAAExgK,EAAEwgK,IAAG,EAAE,CAAC,IAAI//J,EAAEma,GAAE4lJ,IAAG,GAAG,iBAAiB//J,EAAEsX,GAAGtX,EAAEqB,WAAW,CAAC,IAAImY,EAAExZ,EAAEy2F,MAAMj1E,EAAExhB,EAAE8lK,OAAOl7C,EAAE9uG,EAAEk0C,MAAM14C,GAAG0oJ,EAAExmJ,EAAEk9E,KAAKk0B,GAAG,GAAGppG,EAAEukJ,KAAK1U,GAAE2O,GAAGlkJ,EAAEA,EAAE7Q,QAAQ+0J,EAAE,GAAG,CAAC,CAAC,OAAO,SAASlkJ,GAAG,IAAIu1I,EAAEv1I,EAAE0pJ,UAAU,QAAG,IAASnU,EAAE,CAAC,IAAI0O,EAAEjkJ,EAAEs+D,MAAMi3E,EAAE0O,EAAE,KAAKjkJ,EAAEs+D,OAAO,IAAI,KAAK2lF,IAAIjkJ,EAAEs+D,MAAM,UAAUt+D,EAAE0pJ,SAAS,CAAC,CAAxH,CAA0HnU,IAAGA,EAAC,CAAC,CAAqZ5/H,CAAE4/H,EAAF5/H,CAAK3V,GAAG9b,EAAEsX,EAAEm5C,KAAKj3C,EAAElC,EAAEo5C,MAAMv2C,EAAE7C,EAAEq5C,IAAIpxD,EAAE+X,EAAE8iE,MAAM54D,EAAElK,EAAE2jE,QAAQ2vC,GAAEtzG,EAAE6jE,QAAQ6kF,EAAE1oJ,EAAEmuJ,aAAaj4J,EAAE8J,EAAEq/B,KAAK33C,EAAE,IAAI4xD,KAAK15B,EAAE/c,IAAIna,GAAGwZ,EAAE,EAAExa,EAAEuuD,WAAW2yG,GAAElgK,GAAGhB,EAAEi3E,cAAckvF,GAAE,EAAEnlK,IAAIwZ,IAAI2rJ,GAAE3rJ,EAAE,EAAEA,EAAE,EAAExa,EAAE2vD,YAAY,IAAIt/C,GAAE9P,GAAG,EAAE83B,GAAE7V,GAAG,EAAE8+I,GAAE11C,IAAG,EAAEu1C,GAAEH,GAAG,EAAE,OAAOxyJ,EAAE,IAAIojD,KAAKA,KAAKolB,IAAIkqF,GAAEiF,GAAEjuI,EAAE7nB,GAAEgoB,GAAEipI,GAAEH,GAAE,GAAG3yJ,EAAEulE,OAAO,MAAMgtF,EAAE,IAAInvG,KAAKA,KAAKolB,IAAIkqF,GAAEiF,GAAEjuI,EAAE7nB,GAAEgoB,GAAEipI,GAAEH,KAAI,IAAIvvG,KAAKsvG,GAAEiF,GAAEjuI,EAAE7nB,GAAEgoB,GAAEipI,GAAEH,GAAE,OAAU,OAAO,IAAIvvG,KAAK,GAAG,CAAC,CAAzc,CAA2cygG,GAAE9xJ,EAAE+X,GAAGjgB,KAAK2X,OAAOxB,IAAG,IAAKA,IAAInW,KAAKspK,GAAGtpK,KAAK+1E,OAAO5/D,GAAGmzJ,IAAIX,IAAG3O,IAAGh6J,KAAKo3D,OAAOlvD,KAAKlI,KAAK2pK,GAAG,IAAIpwG,KAAK,KAAKp3C,EAAE,CAAC,CAAC,SAASja,aAAa8Y,MAAM,QAAQrZ,EAAEO,EAAE8B,OAAO61B,EAAE,EAAEA,GAAGl4B,EAAEk4B,GAAG,EAAE,CAAC/c,EAAE,GAAG5a,EAAE23B,EAAE,GAAG,IAAIgpI,EAAEH,EAAEiC,MAAM3qK,KAAK8iB,GAAG,GAAG+lJ,EAAElhJ,UAAU,CAAC3nB,KAAK2pK,GAAGd,EAAEc,GAAG3pK,KAAKspK,GAAGT,EAAES,GAAGtpK,KAAK2X,OAAO,KAAK,CAACkoB,IAAIl4B,IAAI3H,KAAK2pK,GAAG,IAAIpwG,KAAK,IAAI,MAAM5wD,EAAE+lK,KAAK1uK,KAAKykB,GAAE,CAAC,CAAC,CAA3kHu1I,qBCAfwO,EAAOC,QAAqJ,WAAW,aAAa,OAAO,SAASC,EAAEjkJ,EAAEu1I,GAAG,IAAkB73I,EAAE,SAASumJ,GAAG,OAAOA,IAAIA,EAAE/5E,QAAQ+5E,EAAEA,EAAE5lJ,EAAE,EAAE6lJ,EAAE,SAASD,EAAEjkJ,EAAEu1I,EAAE/5I,EAAE0oJ,GAAG,IAAIhgK,EAAE+/J,EAAEr0J,KAAKq0J,EAAEA,EAAEkC,UAAU1iK,EAAEia,EAAExZ,EAAE8b,IAAI3B,GAAEX,EAAExZ,EAAEqxJ,IAAI7vI,EAAEjiB,GAAG4a,GAAEriB,IAAK,SAASioK,IAAG,OAAOA,GAAE/vG,MAAM,EAAE14C,EAAE,GAAI,IAAI0oJ,EAAE,OAAOx+I,EAAE,IAAIhU,GAAExN,EAAEkiK,UAAU,OAAO1gJ,EAAE1pB,IAAK,SAASioK,GAAEjkJ,GAAG,OAAO0F,GAAG1F,GAAGtO,IAAG,IAAI,EAAE,EAAG,EAAExN,EAAE,WAAW,OAAOqxJ,EAAE0S,GAAG1S,EAAEjkF,SAAS,EAAE7tE,EAAE,SAASwgK,EAAEjkJ,GAAG,OAAOikJ,EAAEwE,QAAQzoJ,IAA4GikJ,EAAEwE,QAAQzoJ,EAAE0uH,eAA/Fv/H,QAAQ,iCAAkC,SAAS80J,EAAEjkJ,EAAEu1I,GAAG,OAAOv1I,GAAGu1I,EAAErhG,MAAM,EAAE,EAAgC,EAAE71C,EAAE,WAAW,IAAI4lJ,EAAE1oK,KAAK,MAAM,CAACu8E,OAAO,SAAS93D,GAAG,OAAOA,EAAEA,EAAE2yC,OAAO,QAAQuxG,EAAED,EAAE,SAAS,EAAElyE,YAAY,SAAS/xE,GAAG,OAAOA,EAAEA,EAAE2yC,OAAO,OAAOuxG,EAAED,EAAE,cAAc,SAAS,EAAE,EAAEnwG,eAAe,WAAW,OAAOmwG,EAAEkC,UAAUC,WAAW,CAAC,EAAEnyG,SAAS,SAASj0C,GAAG,OAAOA,EAAEA,EAAE2yC,OAAO,QAAQuxG,EAAED,EAAE,WAAW,EAAE7xE,YAAY,SAASpyE,GAAG,OAAOA,EAAEA,EAAE2yC,OAAO,MAAMuxG,EAAED,EAAE,cAAc,WAAW,EAAE,EAAEhyE,cAAc,SAASjyE,GAAG,OAAOA,EAAEA,EAAE2yC,OAAO,OAAOuxG,EAAED,EAAE,gBAAgB,WAAW,EAAE,EAAE/vE,eAAe,SAASl0E,GAAG,OAAOvc,EAAEwgK,EAAEkC,UAAUnmJ,EAAE,EAAEymJ,SAASlrK,KAAK4qK,UAAUM,SAAS+B,QAAQjtK,KAAK4qK,UAAUqC,QAAQ,EAAphCxoJ,EAAEilJ,UAAshCtzE,WAAW,WAAW,OAAOtzE,EAAEs+D,KAAKphF,KAAP8iB,EAAc,EAAEk3I,EAAE5jE,WAAW,WAAW,IAAIsyE,EAAE//J,IAAI,MAAM,CAAC4vD,eAAe,WAAW,OAAOmwG,EAAEmC,WAAW,CAAC,EAAEnyG,SAAS,WAAW,OAAOshG,EAAEthG,UAAU,EAAEg+B,cAAc,WAAW,OAAOsjE,EAAEtjE,eAAe,EAAEG,YAAY,WAAW,OAAOmjE,EAAEnjE,aAAa,EAAEta,OAAO,WAAW,OAAOy9E,EAAEz9E,QAAQ,EAAEia,YAAY,WAAW,OAAOwjE,EAAExjE,aAAa,EAAEmC,eAAe,SAASl0E,GAAG,OAAOvc,EAAEwgK,EAAEjkJ,EAAE,EAAEymJ,SAASxC,EAAEwC,SAAS+B,QAAQvE,EAAEuE,QAAQ,EAAEjT,EAAEz9E,OAAO,WAAW,OAAOosF,EAAEhgK,IAAI,SAAS,EAAEqxJ,EAAExjE,YAAY,WAAW,OAAOmyE,EAAEhgK,IAAI,cAAc,SAAS,EAAE,EAAEqxJ,EAAEthG,SAAS,SAASgwG,GAAG,OAAOC,EAAEhgK,IAAI,WAAW,KAAK,KAAK+/J,EAAE,EAAE1O,EAAEtjE,cAAc,SAASgyE,GAAG,OAAOC,EAAEhgK,IAAI,gBAAgB,WAAW,EAAE+/J,EAAE,EAAE1O,EAAEnjE,YAAY,SAAS6xE,GAAG,OAAOC,EAAEhgK,IAAI,cAAc,WAAW,EAAE+/J,EAAE,CAAC,CAAC,CAA58DjkJ,qBCAf+jJ,EAAOC,QAA0J,WAAW,aAAa,IAAIhkJ,EAAE,CAAC2oJ,IAAI,YAAYD,GAAG,SAASE,EAAE,aAAaC,GAAG,eAAeC,IAAI,sBAAsBC,KAAK,6BAA6B,OAAO,SAASxT,EAAE73I,EAAEumJ,GAAG,IAAIzoJ,EAAEkC,EAAEunJ,UAAU/gK,EAAEsX,EAAEm3C,OAAOsxG,EAAE+D,GAAGS,QAAQzoJ,EAAExE,EAAEm3C,OAAO,SAAS4iG,QAAG,IAASA,IAAIA,EAAE,wBAAwB,IAA0C73I,EAAtCA,EAAEniB,KAAK4qK,UAAUsC,QAAQxE,GAAavmJ,OAAqN,IAASA,EAAE,CAAC,EAAEA,EAAhB63I,EAAvMpmJ,QAAQ,oCAAqC,SAASomJ,EAAE0O,EAAEzoJ,GAAG,IAAItX,EAAEsX,GAAGA,EAAEkzH,cAAc,OAAOu1B,GAAGvmJ,EAAElC,IAAIwE,EAAExE,IAAIkC,EAAExZ,GAAGiL,QAAQ,iCAAkC,SAAS6Q,EAAEu1I,GAAE73I,GAAG,OAAO63I,IAAG73I,EAAEw2C,MAAM,EAAE,EAAG,IAAwB,OAAOhwD,EAAE+lK,KAAK1uK,KAAK0oK,EAAE,CAAC,CAAC,CAAhtB1O,qBCAfwO,EAAOC,QAA8I,WAAW,aAAa,IAAIzO,EAAE,SAASrxJ,EAAE,uBAAuB8b,EAAE,eAAe,OAAO,SAAS3B,EAAEqH,EAAEu+I,GAAG,IAAIC,EAAEx+I,EAAEu/I,UAAUhB,EAAE9wE,IAAI,SAASoiE,GAAwC,OAAO,IAAI7vI,EAA1C,CAAC8mC,KAAK+oG,EAAEpiE,KAAI,EAAGmnB,KAAKqqD,WAA0B,EAAET,EAAE/wE,IAAI,SAASjvF,GAAG,IAAI8b,EAAEikJ,EAAE1oK,KAAKo5F,SAAS,CAACrjB,OAAO/1E,KAAKspK,GAAG1xE,KAAI,IAAK,OAAOjvF,EAAE8b,EAAEjiB,IAAIxC,KAAK+oK,YAAY/O,GAAGv1I,CAAC,EAAEkkJ,EAAEpB,MAAM,WAAW,OAAOmB,EAAE1oK,KAAKo5F,SAAS,CAACrjB,OAAO/1E,KAAKspK,GAAG1xE,KAAI,GAAI,EAAE,IAAIz1E,EAAEwmJ,EAAE/qI,MAAM+qI,EAAE/qI,MAAM,SAASo8H,GAAGA,EAAEpiE,MAAM53F,KAAKupK,IAAG,GAAIvpK,KAAKqqK,SAAS1B,EAAE3O,EAAEyP,WAAWzpK,KAAKypK,QAAQzP,EAAEyP,SAAStnJ,EAAEusJ,KAAK1uK,KAAKg6J,EAAE,EAAE,IAAI/5I,EAAE0oJ,EAAEhxJ,KAAKgxJ,EAAEhxJ,KAAK,WAAW,GAAG3X,KAAKupK,GAAG,CAAC,IAAIvP,EAAEh6J,KAAK2pK,GAAG3pK,KAAK4pK,GAAG5P,EAAE/6E,iBAAiBj/E,KAAK6pK,GAAG7P,EAAE2U,cAAc3uK,KAAK8pK,GAAG9P,EAAEl7E,aAAa9+E,KAAK+pK,GAAG/P,EAAEj7E,YAAY/+E,KAAKgqK,GAAGhQ,EAAE1gE,cAAct5F,KAAKiqK,GAAGjQ,EAAE4U,gBAAgB5uK,KAAKkqK,GAAGlQ,EAAE6U,gBAAgB7uK,KAAKmqK,IAAInQ,EAAE8U,oBAAoB,MAAM7uJ,EAAEyuJ,KAAK1uK,KAAK,EAAE,IAAIkI,EAAEygK,EAAEI,UAAUJ,EAAEI,UAAU,SAASjmJ,EAAEqH,GAAG,IAAIu+I,EAAE1oK,KAAKqqK,SAAS1B,EAAE,GAAGD,EAAE5lJ,GAAG,OAAO9iB,KAAKupK,GAAG,EAAEb,EAAE1oK,KAAKypK,SAASvhK,EAAEwmK,KAAK1uK,MAAMA,KAAKypK,QAAQ,GAAG,iBAAiB3mJ,GAAqK,QAAjKA,EAAE,SAASk3I,SAAG,IAASA,KAAIA,GAAE,IAAI,IAAIl3I,EAAEk3I,GAAEl9H,MAAMn0B,GAAG,IAAIma,EAAE,OAAO,KAAK,IAAIqH,GAAG,GAAGrH,EAAE,IAAIga,MAAMrY,IAAI,CAAC,IAAI,EAAE,GAAUkkJ,EAAE,IAAIx+I,EAAE,KAAKA,EAAE,GAAG,OAAO,IAAIw+I,EAAE,EAAE,MAAtCx+I,EAAE,GAA4Cw+I,GAAGA,CAAC,CAA1J,CAA4J7lJ,IAAa,OAAO9iB,KAAK,IAAI2oK,GAAEp/J,KAAK60E,IAAIt7D,IAAI,GAAG,GAAGA,EAAEA,EAAEX,EAAEniB,KAAK,GAAGmqB,EAAE,OAAOhI,EAAEsnJ,QAAQd,GAAExmJ,EAAEonJ,GAAG,IAAIzmJ,EAAEX,EAAE,GAAG,IAAIW,EAAE,CAAC,IAAI7C,GAAEjgB,KAAKupK,GAAGvpK,KAAKo5F,SAASG,qBAAoB,EAAGv5F,KAAK+oK,aAAa5mJ,EAAEniB,KAAKunK,QAAQ/kK,IAAImmK,GAAE1oJ,GAAE+5I,IAAIyP,QAAQd,GAAExmJ,EAAEqnJ,GAAGuF,aAAa9uJ,EAAC,MAAMkC,EAAEniB,KAAK43F,MAAM,OAAOz1E,CAAC,EAAE,IAAIoxG,EAAEo1C,EAAEvxG,OAAOuxG,EAAEvxG,OAAO,SAAS4iG,GAAkD,OAAOzmC,EAAEm7C,KAAK1uK,KAAvDg6J,IAAIh6J,KAAKupK,GAAG,yBAAyB,IAAyB,EAAEZ,EAAE1xE,QAAQ,WAAW,IAAI+iE,EAAEh6J,KAAKqqK,SAAS1B,EAAE3oK,KAAKypK,SAAS,EAAEzpK,KAAKypK,SAASzpK,KAAKwpK,GAAGuF,cAAc/uK,KAAK2pK,GAAGpwE,qBAAqB,OAAOv5F,KAAK2pK,GAAG1yE,UAAU,IAAI+iE,CAAC,EAAE2O,EAAEqG,MAAM,WAAW,QAAQhvK,KAAKupK,EAAE,EAAEZ,EAAExxE,YAAY,WAAW,OAAOn3F,KAAKo5F,SAASjC,aAAa,EAAEwxE,EAAEhwJ,SAAS,WAAW,OAAO3Y,KAAKo5F,SAASgzE,aAAa,EAAE,IAAIzkK,EAAEghK,EAAEvvE,OAAOuvE,EAAEvvE,OAAO,SAAS4gE,GAAG,MAAM,MAAMA,GAAGh6J,KAAKypK,QAAQf,EAAE1oK,KAAKo3D,OAAO,4BAA4BgiC,SAASzxF,EAAE+mK,KAAK1uK,KAAK,EAAE,IAAIo6B,EAAEuuI,EAAE/yF,KAAK+yF,EAAE/yF,KAAK,SAASokF,EAAErxJ,EAAE8b,GAAG,GAAGu1I,GAAGh6J,KAAKupK,KAAKvP,EAAEuP,GAAG,OAAOnvI,EAAEs0I,KAAK1uK,KAAKg6J,EAAErxJ,EAAE8b,GAAG,IAAI3B,GAAE9iB,KAAKunK,QAAQp9I,EAAEu+I,EAAE1O,GAAGuN,QAAQ,OAAOntI,EAAEs0I,KAAK5rJ,GAAEqH,EAAExhB,EAAE8b,EAAE,CAAC,CAAC,CAAtnE9b,gCCEnF,SAASsmK,EAAQ13F,GAAkC,OAA2E03F,EAArD,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiB53F,GAAO,cAAcA,CAAK,EAAsB,SAAiBA,GAAO,OAAOA,GAAyB,mBAAX23F,QAAyB33F,EAAI13E,cAAgBqvK,QAAU33F,IAAQ23F,OAAOxF,UAAY,gBAAkBnyF,CAAK,GAAoBA,EAAM,CAIzX,SAAS63F,EAAgBjtJ,EAAGnK,GAAKo3J,SAAkB7uK,OAAO8uK,gBAAkB,SAAyBltJ,EAAGnK,GAAKmK,SAAEmtJ,UAAYt3J,EAAUmK,CAAG,GAA0BA,EAAGnK,EAAI,CAIzK,SAASu3J,EAA2BC,EAAMd,GAAQ,OAAIA,GAA2B,WAAlBO,EAAQP,IAAsC,mBAATA,EAA8Ce,EAAuBD,GAAtCd,CAA6C,CAEhL,SAASe,EAAuBD,GAAQ,QAAa,IAATA,EAAmB,MAAM,IAAIE,eAAe,6DAAgE,OAAOF,CAAM,CAIrK,SAASG,EAAgBxtJ,GAAKwtJ,SAAkBpvK,OAAO8uK,eAAiB9uK,OAAOqvK,eAAiB,SAAyBztJ,GAAK,OAAOA,EAAEmtJ,WAAa/uK,OAAOqvK,eAAeztJ,EAAI,GAA0BA,EAAI,CAE5M,SAAS0tJ,EAA2B1tJ,EAAG2tJ,GAAkB,IAAIzqJ,EAAI,UAAW6pJ,OAAW,KAAqC,MAAtB/sJ,EAAE+sJ,OAAOC,UAAmB,CAAE,GAAInuJ,MAAMC,QAAQkB,KAAOkD,EAE7J,SAAS0qJ,EAA4B5tJ,EAAG6tJ,GAAU,GAAK7tJ,EAAW,IAAiB,iBAANA,EAAgB,OAAO8tJ,EAAkB9tJ,EAAG6tJ,GAAS,IAAItH,EAAInoK,OAAOmpK,UAAU/wJ,SAAS+1J,KAAKvsJ,GAAGw2C,MAAM,GAAG,GAAkE,GAAnD,WAAN+vG,GAAkBvmJ,EAAEtiB,cAAa6oK,EAAIvmJ,EAAEtiB,YAAYwU,MAAgB,QAANq0J,GAAqB,QAANA,EAAa,OAAO1nJ,MAAM60B,KAAK1zB,GAAI,GAAU,cAANumJ,GAAqB,2CAA2CplE,KAAKolE,GAAI,OAAOuH,EAAkB9tJ,EAAG6tJ,EAAM,CAAG,CAF7PD,CAA4B5tJ,KAAO2tJ,GAAkB3tJ,GAAyB,iBAAbA,EAAEnY,OAAqB,CAAMqb,IAAIlD,EAAIkD,GAAI,IAAI1c,EAAI,EAAOunK,EAAI,WAAc,EAAG,MAAO,CAAEptJ,EAAGotJ,EAAGxH,EAAG,WAAe,OAAI//J,GAAKwZ,EAAEnY,OAAe,CAAEmmK,MAAM,GAAe,CAAEA,MAAM,EAAOx1J,MAAOwH,EAAExZ,KAAQ,EAAG8b,EAAG,SAAW2rJ,GAAM,MAAMA,CAAI,EAAGjmJ,EAAG+lJ,EAAK,CAAE,MAAM,IAAIhjF,UAAU,wIAA0I,CAAE,IAA6CyiE,EAAzC0gB,GAAmB,EAAMC,GAAS,EAAY,MAAO,CAAExtJ,EAAG,WAAeuC,EAAKlD,EAAE+sJ,OAAOC,WAAa,EAAGzG,EAAG,WAAe,IAAI7nF,EAAOx7D,EAAGhL,OAAQg2J,SAAmBxvF,EAAKsvF,KAAatvF,CAAM,EAAGp8D,EAAG,SAAW8rJ,GAAOD,GAAS,EAAM3gB,EAAM4gB,CAAK,EAAGpmJ,EAAG,WAAe,KAAWkmJ,GAAoC,MAAhBhrJ,EAAGmrJ,QAAmBnrJ,EAAGmrJ,QAAa,SAAY,GAAIF,EAAQ,MAAM3gB,CAAK,CAAE,EAAK,CAIp+B,SAASsgB,EAAkBQ,EAAKC,IAAkB,MAAPA,GAAeA,EAAMD,EAAIzmK,UAAQ0mK,EAAMD,EAAIzmK,QAAQ,QAASrB,EAAI,EAAGgoK,EAAO,IAAI3vJ,MAAM0vJ,GAAM/nK,EAAI+nK,EAAK/nK,IAAOgoK,EAAKhoK,GAAK8nK,EAAI9nK,GAAM,OAAOgoK,CAAM,CAEtL,SAASC,EAAgBjrG,EAAUkrG,GAAe,KAAMlrG,aAAoBkrG,GAAgB,MAAM,IAAI3jF,UAAU,oCAAwC,CAExJ,SAAS4jF,EAAkB1lJ,EAAQ9L,GAAS,QAAS3W,EAAI,EAAGA,EAAI2W,EAAMtV,OAAQrB,IAAK,CAAE,IAAIooK,EAAazxJ,EAAM3W,GAAIooK,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAM3wK,OAAO4wK,eAAe/lJ,EAAQ2lJ,EAAW1vK,IAAK0vK,EAAa,CAAE,CAE5T,SAASK,EAAaP,EAAaQ,EAAYC,GAAe,OAAID,GAAYP,EAAkBD,EAAYnH,UAAW2H,GAAiBC,GAAaR,EAAkBD,EAAaS,GAAqBT,CAAa,YA+BtN,IAAIU,GAAuB,WACzB,SAASA,IACPX,EAAgB5wK,KAAMuxK,EACxB,CAEAH,SAAaG,EAAS,CAAC,CACrBlwK,IAAK,KAELsZ,MAAO,SAAY+gC,EAAOp9B,GACxB,OAAAte,KAAKwxK,WAAaxxK,KAAKwxK,YAAc,CAAC,EAEjCxxK,KAAKwxK,WAAW91H,KACnB17C,KAAKwxK,WAAW91H,GAAS,IAG3B17C,KAAKwxK,WAAW91H,GAAOhvC,KAAK4R,GAErBte,IACT,GACC,CACDqB,IAAK,OACLsZ,MAAO,SAAc+gC,GACnB17C,KAAKwxK,WAAaxxK,KAAKwxK,YAAc,CAAC,EACtC,IAAIC,EAAYzxK,KAAKwxK,WAAW91H,GAEhC,GAAI+1H,EAAW,CACb,QAASC,EAAOtI,UAAUp/J,OAAQ+0G,EAAO,IAAI/9F,MAAM0wJ,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAClG5yD,EAAK4yD,EAAO,GAAKvI,UAAUuI,GAG7B,IACIC,EADAC,EAAYhC,EAA2B4B,GAG3C,IACE,IAAKI,EAAU/uJ,MAAO8uJ,EAAQC,EAAUnJ,KAAKyH,MAC5ByB,EAAMj3J,MACZgwJ,MAAM3qK,KAAM++G,EAEzB,OAAS4wC,GACPkiB,EAAUptJ,EAAEkrI,EACd,SACEkiB,EAAU1nJ,GACZ,CACF,CAEA,OAAOnqB,IACT,GAIC,CACDqB,IAAK,MACLsZ,MAAO,SAAa+gC,EAAOp9B,GACzB,IAAKte,KAAKwxK,YAAmC,IAArBpI,UAAUp/J,OAChC,OAAAhK,KAAKwxK,WAAa,CAAC,EACZxxK,KAIT,IAAIyxK,EAAYzxK,KAAKwxK,WAAW91H,GAEhC,IAAK+1H,EACH,OAAOzxK,KAIT,GAAyB,IAArBopK,UAAUp/J,OACZ,cAAOhK,KAAKwxK,WAAW91H,GAChB17C,KAIT,QAAS2I,EAAI,EAAGA,EAAI8oK,EAAUznK,OAAQrB,IAGpC,GAFe8oK,EAAU9oK,KAER2V,EAAI,CACnBmzJ,EAAU7iF,OAAOjmF,EAAG,GACpB,KACF,CAGF,OAAO3I,IACT,KAGKuxK,CACT,CAtF2B,GAwFvBh/B,EAAwB,SAAUu/B,IA/ItC,SAASC,EAAUC,EAAUC,GAAc,GAA0B,mBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAI/kF,UAAU,sDAAyD8kF,EAAStI,UAAYnpK,OAAO+c,OAAO20J,GAAcA,EAAWvI,UAAW,CAAE7pK,YAAa,CAAE8a,MAAOq3J,EAAUd,UAAU,EAAMD,cAAc,KAAegB,GAAY7C,EAAgB4C,EAAUC,EAAa,CAgJ9XF,CAAUx/B,EAAUu/B,GAEpB,IAAII,EA9IN,SAASC,EAAaC,GAAW,IAAIC,EAMrC,SAASC,IAAsG,UAA7DvzH,QAAY,MAAgBA,QAAQwzH,WAA6BxzH,QAAQwzH,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAMl5G,YAAKmwG,UAAU/wJ,SAAS+1J,KAAK3vH,QAAQwzH,UAAUh5G,KAAM,GAAI,WAAa,KAAY,CAAM,OAAc,OAAO,CAAO,CAAE,CANlQ+4G,GAA6B,OAAO,WAAkC,IAAsC9tK,EAAlCkuK,EAAQ/C,EAAgByC,GAAkB,GAAIC,EAA2B,CAAE,IAAIM,EAAYhD,EAAgB3vK,MAAMH,YAAa2E,EAASu6C,QAAQwzH,UAAUG,EAAOtJ,UAAWuJ,EAAY,MAASnuK,EAASkuK,EAAM/H,MAAM3qK,KAAMopK,WAAc,OAAOmG,EAA2BvvK,KAAMwE,EAAS,CAAG,CA8IzZ2tK,CAAa5/B,GA+zB1B,SAASA,EAASoM,EAAI/7H,GACpB,IAAIgwJ,EAKAtyJ,EAAUmoE,EAcd,GAjBAmoF,EAAgB5wK,KAAMuyI,IAEtBqgC,EAAQV,EAAOxD,KAAK1uK,OAEd6tD,QAAU8wF,EAEhBi0B,EAAM78J,QAAUw8H,EAASx8H,QACzB68J,EAAMtmF,eAAeumF,gBAAkBD,EAAMtmF,eAAeumF,gBAAgBj/J,QAAQ,OAAQ,IAC5Fg/J,EAAME,kBAAoB,GAC1BF,EAAMG,UAAY,GAClBH,EAAMhgK,MAAQ,GAEe,iBAAlBggK,EAAM/kH,UACf+kH,EAAM/kH,QAAUx6C,SAASK,cAAck/J,EAAM/kH,WAI1C+kH,EAAM/kH,SAAqC,MAA1B+kH,EAAM/kH,QAAQ7X,SAClC,MAAM,IAAIxlB,MAAM,6BAGlB,GAAIoiJ,EAAM/kH,QAAQ8sE,SAChB,MAAM,IAAInqG,MAAM,8BAIlB+hH,EAASygC,UAAUtmK,KAAK+iK,EAAuBmD,IAE/CA,EAAM/kH,QAAQ8sE,SAAW80C,EAAuBmD,GAChD,IAAIK,EAAuE,OAArDxqF,EAAO8pD,EAAS2gC,kBAAkBN,EAAM/kH,UAAoB46B,EAAO,CAAC,EAG1F,GAFAmqF,EAAMhwJ,QAAU2vH,EAAS+5B,OAAO,CAAC,EAAGsG,EAAMtmF,eAAgB2mF,EAAgBrwJ,GAA4B,CAAC,GAEnGgwJ,EAAMhwJ,QAAQuwJ,gBAAkB5gC,EAAS6gC,qBAC3C,OAAO7D,EAA2BqD,EAAOA,EAAMhwJ,QAAQtC,SAASouJ,KAAKe,EAAuBmD,KAQ9F,GAJyB,MAArBA,EAAMhwJ,QAAQ7Y,MAChB6oK,EAAMhwJ,QAAQ7Y,IAAM6oK,EAAM/kH,QAAQjgB,aAAa,YAG5CglI,EAAMhwJ,QAAQ7Y,IACjB,MAAM,IAAIymB,MAAM,oBAGlB,GAAIoiJ,EAAMhwJ,QAAQ8wH,eAAiBk/B,EAAMhwJ,QAAQywJ,kBAC/C,MAAM,IAAI7iJ,MAAM,sGAGlB,GAAIoiJ,EAAMhwJ,QAAQ0wJ,gBAAkBV,EAAMhwJ,QAAQozH,SAChD,MAAM,IAAIxlH,MAAM,qDAIlB,OAAIoiJ,EAAMhwJ,QAAQywJ,oBAChBT,EAAMhwJ,QAAQ8wH,cAAgBk/B,EAAMhwJ,QAAQywJ,yBACrCT,EAAMhwJ,QAAQywJ,mBAIa,MAAhCT,EAAMhwJ,QAAQ2wJ,iBAChBX,EAAMhwJ,QAAQ4wJ,WAAa,SAAUnhK,GACnC,OAAOugK,EAAMhwJ,QAAQ2wJ,eAAe7E,KAAKe,EAAuBmD,GAAQvgK,EAAKgC,KAAMhC,EACrF,GAGkC,iBAAzBugK,EAAMhwJ,QAAQ6/F,SACvBmwD,EAAMhwJ,QAAQ6/F,OAASmwD,EAAMhwJ,QAAQ6/F,OAAO0wB,gBAGzC7yH,EAAWsyJ,EAAMa,wBAA0BnzJ,EAASihC,YAEvDjhC,EAASihC,WAAWw+D,YAAYz/F,IAIM,IAApCsyJ,EAAMhwJ,QAAQsxH,oBAEd0+B,EAAM1+B,kBADJ0+B,EAAMhwJ,QAAQsxH,kBACU3B,EAASrzB,WAAW0zD,EAAMhwJ,QAAQsxH,kBAAmB,qBAErD0+B,EAAM/kH,SAIhC+kH,EAAMhwJ,QAAQuxH,YAEdy+B,EAAME,mBADwB,IAA5BF,EAAMhwJ,QAAQuxH,UACU,CAACy+B,EAAM/kH,SAEP0kF,EAASmhC,YAAYd,EAAMhwJ,QAAQuxH,UAAW,cAI5Ey+B,EAAMj7J,OAECi7J,CACT,CAGAxB,OAl6BAA,EAAa7+B,EAAU,KAAM,CAAC,CAC5BlxI,IAAK,YACLsZ,MAAO,WAEL3a,KAAK0pK,UAAU6H,QAAUA,GAOzBvxK,KAAK0pK,UAAUiK,OAAS,CAAC,OAAQ,YAAa,UAAW,YAAa,WAAY,YAAa,YAAa,aAAc,cAAe,YAAa,QAAS,gBAAiB,aAAc,qBAAsB,iBAAkB,sBAAuB,UAAW,kBAAmB,UAAW,kBAAmB,WAAY,mBAAoB,WAAY,mBAAoB,QAAS,mBAAoB,kBAAmB,iBACza3zK,KAAK0pK,UAAUp9E,eAAiB,CAO9BviF,IAAK,KAML04G,OAAQ,OAKRmxD,iBAAiB,EAKjB//B,QAAS,IAMTF,gBAAiB,EASjB2/B,gBAAgB,EAQhBt9B,UAAU,EAOV69B,eAAe,EAKfC,UAAW,IAKXC,sBAAsB,EAKtBC,aAAa,EAKbC,iBAAkB,EAOlBrgC,YAAa,IAObE,UAAW,OAKXogC,uBAAuB,EAKvBngC,qBAAsB,GAKtBogC,eAAgB,IAKhBC,gBAAiB,IAMjBC,gBAAiB,OAUjBC,YAAa,KAKbC,aAAc,KAOdC,eAAgB,KAKhBC,cAAe,GAMfC,aAAc,UAQdC,aAAc,IAKdjiC,SAAU,KAMVe,QAAS,KAUTU,WAAW,EAKXygC,mBAAmB,EAanBlhC,cAAe,KAMf2/B,kBAAmB,KAYnBwB,kBAAkB,EAMlBC,WAAW,EAOX7gC,gBAAgB,EAQhBC,kBAAmB,KASnB6gC,qBAAsB,OAUtBnpH,QAAS,KAKT2nH,eAAgB,KAOhBC,WAAY,KAQZL,eAAe,EAKfn/B,mBAAoB,4BAKpBghC,oBAAqB,0DAOrBC,iBAAkB,kFAMlBC,eAAgB,uEAKhBC,oBAAqB,uCAMrBC,kBAAmB,6CAKnBC,iBAAkB,gBAKlBC,mBAAoB,mBAKpBC,6BAA8B,+CAK9BC,eAAgB,cAKhBC,2BAA4B,KAM5BC,qBAAsB,qCAMtBC,kBAAmB,CACjBC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJnpK,EAAG,KAOL+K,KAAM,WAAiB,EAYvBhU,OAAQ,SAAgBiP,EAAOojK,EAAKC,GAClC,GAAIA,EACF,MAAO,CACLC,OAAQD,EAAM5jK,KAAKyjI,OAAOqgC,KAC1BC,aAAcH,EAAMjuK,MACpBquK,gBAAiBJ,EAAM5jK,KAAKqvG,KAC5B40D,YAAat2K,KAAK4iB,QAAQkxJ,UAC1ByC,kBAAmBN,EAAM5jK,KAAKyjI,OAAO0gC,gBACrCC,kBAAmBR,EAAMjuK,MAAQhI,KAAK4iB,QAAQkxJ,UAGpD,EAWA4C,OAAQ,SAAgBrkK,EAAM89J,GAC5B,OAAOA,GACT,EAQAwG,eAAgB,SAAwBtkK,EAAM89J,GAC5CA,GACF,EAOA7vJ,SAAU,WAER,IAAIs2J,EACJ52K,KAAK6tD,QAAQm2D,UAAY,GAAGrxG,OAAO3S,KAAK6tD,QAAQm2D,UAAW,6BAE3D,IACI6yD,EADAC,EAAajH,EAA2B7vK,KAAK6tD,QAAQ9N,qBAAqB,QAG9E,IACE,IAAK+2H,EAAWh0J,MAAO+zJ,EAASC,EAAWpO,KAAKyH,MAAO,CACrD,IAAIl9D,EAAQ4jE,EAAOl8J,MAEnB,GAAI,uBAAuB2oF,KAAK2P,EAAM+Q,WAAY,CAChD4yD,EAAiB3jE,EACjBA,EAAM+Q,UAAY,aAElB,KACF,CACF,CACF,OAAS2rC,GACPmnB,EAAWryJ,EAAEkrI,EACf,SACEmnB,EAAW3sJ,GACb,CAEKysJ,IACHA,EAAiBrkC,EAASj/H,cAAc,+CACxCtT,KAAK6tD,QAAQl6C,YAAYijK,IAG3B,IAAIG,EAAOH,EAAe72H,qBAAqB,QAAQ,GAEvD,OAAIg3H,IACsB,MAApBA,EAAK7gI,YACP6gI,EAAK7gI,YAAcl2C,KAAK4iB,QAAQoyJ,oBACL,MAAlB+B,EAAK17E,YACd07E,EAAK17E,UAAYr7F,KAAK4iB,QAAQoyJ,sBAI3Bh1K,KAAK6tD,QAAQl6C,YAAY3T,KAAKg3K,kBACvC,EAcAC,OAAQ,SAAgB5kK,EAAM2rC,EAAOwpC,EAAQktF,GAC3C,IAAI9vJ,EAAO,CACTsyJ,KAAM,EACNC,KAAM,EACNC,SAAU/kK,EAAK2rC,MACfq5H,UAAWhlK,EAAKm1E,QAEd8vF,EAAWjlK,EAAK2rC,MAAQ3rC,EAAKm1E,OAEpB,MAATxpC,GAA2B,MAAVwpC,GACnBxpC,EAAQp5B,EAAKwyJ,SACb5vF,EAAS5iE,EAAKyyJ,WACI,MAATr5H,EACTA,EAAQwpC,EAAS8vF,EACE,MAAV9vF,IACTA,EAASxpC,EAAQs5H,GAMnB,IAAIC,GAFJv5H,EAAQz0C,KAAK0zB,IAAI+gB,EAAOp5B,EAAKwyJ,YAC7B5vF,EAASj+E,KAAK0zB,IAAIuqD,EAAQ5iE,EAAKyyJ,YAG/B,GAAIzyJ,EAAKwyJ,SAAWp5H,GAASp5B,EAAKyyJ,UAAY7vF,EAE5C,GAAqB,SAAjBktF,EACE4C,EAAWC,GACb3yJ,EAAKyyJ,UAAYhlK,EAAKm1E,OACtB5iE,EAAKwyJ,SAAWxyJ,EAAKyyJ,UAAYE,IAEjC3yJ,EAAKwyJ,SAAW/kK,EAAK2rC,MACrBp5B,EAAKyyJ,UAAYzyJ,EAAKwyJ,SAAWG,WAET,YAAjB7C,EAQT,MAAM,IAAIlkJ,MAAM,yBAAyB7d,OAAO+hK,EAAc,MAN1D4C,EAAWC,EACb/vF,EAASxpC,EAAQs5H,EAEjBt5H,EAAQwpC,EAAS8vF,CAG+C,CAItE1yJ,SAAKsyJ,MAAQ7kK,EAAK2rC,MAAQp5B,EAAKwyJ,UAAY,EAC3CxyJ,EAAKuyJ,MAAQ9kK,EAAKm1E,OAAS5iE,EAAKyyJ,WAAa,EAC7CzyJ,EAAK4yJ,SAAWx5H,EAChBp5B,EAAK6yJ,UAAYjwF,EACV5iE,CACT,EAWA8yJ,cAAe,SAAuBrlK,EAAM89J,GAC1C,OAAKnwK,KAAK4iB,QAAQ0xJ,aAAet0K,KAAK4iB,QAAQ2xJ,eAAiBliK,EAAKG,KAAKsqB,MAAM,WACtE98B,KAAK23K,YAAYtlK,EAAMrS,KAAK4iB,QAAQ0xJ,YAAat0K,KAAK4iB,QAAQ2xJ,aAAcv0K,KAAK4iB,QAAQ8xJ,aAAcvE,GAEvGA,EAAK99J,EAEhB,EAgBAwgK,gBAAiB,swFAajB1iD,KAAM,SAAc1rG,GAClB,OAAOzkB,KAAK6tD,QAAQjZ,UAAUl0B,OAAO,gBACvC,EACAk3J,UAAW,SAAmBnzJ,GAAI,EAClCozJ,QAAS,SAAiBpzJ,GACxB,OAAOzkB,KAAK6tD,QAAQjZ,UAAUl0B,OAAO,gBACvC,EACAo3J,UAAW,SAAmBrzJ,GAC5B,OAAOzkB,KAAK6tD,QAAQjZ,UAAUpyC,IAAI,gBACpC,EACAu1K,SAAU,SAAkBtzJ,GAC1B,OAAOzkB,KAAK6tD,QAAQjZ,UAAUpyC,IAAI,gBACpC,EACAw1K,UAAW,SAAmBvzJ,GAC5B,OAAOzkB,KAAK6tD,QAAQjZ,UAAUl0B,OAAO,gBACvC,EACAu3J,MAAO,SAAexzJ,GAAI,EAG1BquH,MAAO,WACL,OAAO9yI,KAAK6tD,QAAQjZ,UAAUl0B,OAAO,aACvC,EAGAw3J,UAAW,SAAmB7lK,GAC5B,IAAI8lK,EAASn4K,KAMb,GAJIA,KAAK6tD,UAAY7tD,KAAKk0I,mBACxBl0I,KAAK6tD,QAAQjZ,UAAUpyC,IAAI,cAGzBxC,KAAKk0I,kBAAmB,CAC1B7hI,EAAK+lK,eAAiB7lC,EAASj/H,cAActT,KAAK4iB,QAAQiwJ,gBAAgBvxK,QAC1E+Q,EAAKwgK,gBAAkBxgK,EAAK+lK,eAE5Bp4K,KAAKk0I,kBAAkBvgI,YAAYtB,EAAK+lK,gBAExC,IACIC,EADAC,EAAazI,EAA2Bx9J,EAAK+lK,eAAeh7C,iBAAiB,mBAGjF,IACE,IAAKk7C,EAAWx1J,MAAOu1J,EAASC,EAAW5P,KAAKyH,MAAO,CACrD,IAAIp6H,EAAOsiI,EAAO19J,MAClBo7B,EAAKG,YAAc7jC,EAAKgC,IAC1B,CACF,OAASs7I,GACP2oB,EAAW7zJ,EAAEkrI,EACf,SACE2oB,EAAWnuJ,GACb,CAEA,IACIouJ,EADAC,EAAa3I,EAA2Bx9J,EAAK+lK,eAAeh7C,iBAAiB,mBAGjF,IACE,IAAKo7C,EAAW11J,MAAOy1J,EAASC,EAAW9P,KAAKyH,OAC9Cp6H,EAAOwiI,EAAO59J,OACT2xB,UAAYtsC,KAAKy4K,SAASpmK,EAAKqvG,KAExC,OAASiuC,GACP6oB,EAAW/zJ,EAAEkrI,EACf,SACE6oB,EAAWruJ,GACb,CAEInqB,KAAK4iB,QAAQqxH,iBACf5hI,EAAKqmK,YAAcnmC,EAASj/H,cAAc,oEAAwEX,OAAO3S,KAAK4iB,QAAQ4yJ,eAAgB,SACtJnjK,EAAK+lK,eAAezkK,YAAYtB,EAAKqmK,cAGvC,IAoBIC,EApBAC,EAAkB,SAAyBn0J,GAI7C,OAHAA,EAAEm3B,iBACFn3B,EAAEsyC,kBAEE1kD,EAAKstH,SAAW4S,EAASsmC,UACpBtmC,EAAS5yH,QAAQw4J,EAAOv1J,QAAQ2yJ,6BAA8B,WACnE,OAAO4C,EAAOtjC,WAAWxiI,EAC3B,GAEI8lK,EAAOv1J,QAAQ6yJ,2BACVljC,EAAS5yH,QAAQw4J,EAAOv1J,QAAQ6yJ,2BAA4B,WACjE,OAAO0C,EAAOtjC,WAAWxiI,EAC3B,GAEO8lK,EAAOtjC,WAAWxiI,EAG/B,EAEIymK,GAAajJ,EAA2Bx9J,EAAK+lK,eAAeh7C,iBAAiB,qBAGjF,IACE,IAAK07C,GAAWh2J,MAAO61J,EAASG,GAAWpQ,KAAKyH,MAC7BwI,EAAOh+J,MACbvH,iBAAiB,QAASwlK,EAEzC,OAASjpB,GACPmpB,GAAWr0J,EAAEkrI,EACf,SACEmpB,GAAW3uJ,GACb,CACF,CACF,EAEA4uJ,YAAa,SAAqB1mK,GAChC,OAA2B,MAAvBA,EAAK+lK,gBAA4D,MAAlC/lK,EAAK+lK,eAAe72H,YACrDlvC,EAAK+lK,eAAe72H,WAAWw+D,YAAY1tG,EAAK+lK,gBAG3Cp4K,KAAKg5K,6BACd,EAGAC,UAAW,SAAmB5mK,EAAM6mK,GAClC,GAAI7mK,EAAK+lK,eAAgB,CACvB/lK,EAAK+lK,eAAexjI,UAAUl0B,OAAO,mBAErC,IACIy4J,EADAC,EAAavJ,EAA2Bx9J,EAAK+lK,eAAeh7C,iBAAiB,wBAGjF,IACE,IAAKg8C,EAAWt2J,MAAOq2J,EAASC,EAAW1Q,KAAKyH,MAAO,CACrD,IAAIkJ,EAAmBF,EAAOx+J,MAC9B0+J,EAAiBC,IAAMjnK,EAAKgC,KAC5BglK,EAAiB5lK,IAAMylK,CACzB,CACF,OAASvpB,GACPypB,EAAW30J,EAAEkrI,EACf,SACEypB,EAAWjvJ,GACb,CAEA,OAAO0e,WAAW,WAChB,OAAOx2B,EAAK+lK,eAAexjI,UAAUpyC,IAAI,mBAC3C,EAAG,EACL,CACF,EAGAsd,MAAO,SAAezN,EAAM9B,GAC1B,GAAI8B,EAAK+lK,eAAgB,CACvB/lK,EAAK+lK,eAAexjI,UAAUpyC,IAAI,YAEX,iBAAZ+N,GAAwBA,EAAQuP,QACzCvP,EAAUA,EAAQuP,OAGpB,IACIy5J,EADAC,EAAa3J,EAA2Bx9J,EAAK+lK,eAAeh7C,iBAAiB,2BAGjF,IACE,IAAKo8C,EAAW12J,MAAOy2J,EAASC,EAAW9Q,KAAKyH,MACnCoJ,EAAO5+J,MACbu7B,YAAc3lC,CAEvB,OAASo/I,GACP6pB,EAAW/0J,EAAEkrI,EACf,SACE6pB,EAAWrvJ,GACb,CACF,CACF,EACAsvJ,cAAe,WAA0B,EAIzCC,WAAY,SAAoBrnK,GAC9B,GAAIA,EAAK+lK,iBACP/lK,EAAK+lK,eAAexjI,UAAUpyC,IAAI,iBAE9B6P,EAAKqmK,aACP,OAAOrmK,EAAKqmK,YAAYpsI,UAAYtsC,KAAK4iB,QAAQyyJ,gBAGvD,EACAsE,mBAAoB,WAA+B,EAInDC,eAAgB,SAAwBvnK,EAAMwnK,EAAUC,GACtD,GAAIznK,EAAK+lK,eAAgB,CACvB,IACI2B,EADAC,EAAanK,EAA2Bx9J,EAAK+lK,eAAeh7C,iBAAiB,6BAGjF,IACE,IAAK48C,EAAWl3J,MAAOi3J,EAASC,EAAWtR,KAAKyH,MAAO,CACrD,IAAIp6H,EAAOgkI,EAAOp/J,MACA,aAAlBo7B,EAAK5B,SAA0B4B,EAAKp7B,MAAQk/J,EAAW9jI,EAAKyqB,MAAMxiB,MAAQ,GAAGrrC,OAAOknK,EAAU,IAChG,CACF,OAASlqB,GACPqqB,EAAWv1J,EAAEkrI,EACf,SACEqqB,EAAW7vJ,GACb,CACF,CACF,EAGA8vJ,oBAAqB,WAAgC,EAIrDC,QAAS,WAAoB,EAC7BC,gBAAiB,WAA4B,EAG7CC,QAAS,SAAiB/nK,GACxB,GAAIA,EAAK+lK,eACP,OAAO/lK,EAAK+lK,eAAexjI,UAAUpyC,IAAI,aAE7C,EACA63K,gBAAiB,WAA4B,EAE7CC,SAAU,SAAkBjoK,GAC1B,OAAOrS,KAAKsuD,KAAK,QAASj8C,EAAMrS,KAAK4iB,QAAQ0yJ,mBAC/C,EACAiF,iBAAkB,WAA6B,EAG/C7iK,SAAU,SAAkBrF,GAK1B,GAJIA,EAAKqmK,cACPrmK,EAAKqmK,YAAYpsI,UAAYtsC,KAAK4iB,QAAQ4yJ,gBAGxCnjK,EAAK+lK,eACP,OAAO/lK,EAAK+lK,eAAexjI,UAAUpyC,IAAI,cAE7C,EACAg4K,iBAAkB,WAA6B,EAC/CC,iBAAkB,WAA6B,EAC/CC,gBAAiB,WAA4B,EAC7CC,cAAe,WAA0B,EACzCC,WAAY,WAAuB,GAErC56K,KAAK0pK,UAAUmR,gBAAkB,GACjC76K,KAAK0pK,UAAUoR,sBAAuB,CACxC,GAEC,CACDz5K,IAAK,SACLsZ,MAAO,SAAgByQ,GACrB,QAAS2vJ,EAAQ3R,UAAUp/J,OAAQgxK,EAAU,IAAIh6J,MAAM+5J,EAAQ,EAAIA,EAAQ,EAAI,GAAIE,EAAQ,EAAGA,EAAQF,EAAOE,IAC3GD,EAAQC,EAAQ,GAAK7R,UAAU6R,GAGjC,QAASC,EAAK,EAAGC,EAAWH,EAASE,EAAKC,EAASnxK,OAAQkxK,IAAM,CAC/D,IAAIz2I,EAAS02I,EAASD,GAEtB,QAAS75K,KAAOojC,EAEdrZ,EAAO/pB,GADGojC,EAAOpjC,EAGrB,CAEA,OAAO+pB,CACT,KAwGFgmJ,EAAa7+B,EAAU,CAAC,CACtBlxI,IAAK,mBACLsZ,MAAO,WACL,OAAO3a,KAAK4S,MAAMnQ,OAAO,SAAU4P,GACjC,OAAOA,EAAK+oK,QACd,GAAG36K,IAAI,SAAU4R,GACf,OAAOA,CACT,EACF,GAGC,CACDhR,IAAK,mBACLsZ,MAAO,WACL,OAAO3a,KAAK4S,MAAMnQ,OAAO,SAAU4P,GACjC,OAAQA,EAAK+oK,QACf,GAAG36K,IAAI,SAAU4R,GACf,OAAOA,CACT,EACF,GACC,CACDhR,IAAK,qBACLsZ,MAAO,SAA4BglH,GACjC,OAAO3/H,KAAK4S,MAAMnQ,OAAO,SAAU4P,GACjC,OAAOA,EAAKstH,SAAWA,CACzB,GAAGl/H,IAAI,SAAU4R,GACf,OAAOA,CACT,EACF,GAEC,CACDhR,IAAK,iBACLsZ,MAAO,WACL,OAAO3a,KAAKq7K,mBAAmB9oC,EAAS+oC,OAC1C,GACC,CACDj6K,IAAK,oBACLsZ,MAAO,WACL,OAAO3a,KAAKq7K,mBAAmB9oC,EAASsmC,UAC1C,GACC,CACDx3K,IAAK,gBACLsZ,MAAO,WACL,OAAO3a,KAAKq7K,mBAAmB9oC,EAASgpC,MAC1C,GAEC,CACDl6K,IAAK,iBACLsZ,MAAO,WACL,OAAO3a,KAAK4S,MAAMnQ,OAAO,SAAU4P,GACjC,OAAOA,EAAKstH,SAAW4S,EAASsmC,WAAaxmK,EAAKstH,SAAW4S,EAAS+oC,MACxE,GAAG76K,IAAI,SAAU4R,GACf,OAAOA,CACT,EACF,GAGC,CACDhR,IAAK,OACLsZ,MAAO,WACL,IAAI6gK,EAASx7K,KAGgB,SAAzBA,KAAK6tD,QAAQ4tH,SACfz7K,KAAK6tD,QAAQvZ,aAAa,UAAW,uBAGnCt0C,KAAK6tD,QAAQjZ,UAAU0M,SAAS,cAAgBthD,KAAK6tD,QAAQn6C,cAAc,gBAC7E1T,KAAK6tD,QAAQl6C,YAAY4+H,EAASj/H,cAAc,8EAAoFX,OAAO3S,KAAK4iB,QAAQoxH,mBAAoB,qBAG1Kh0I,KAAK8yK,kBAAkB9oK,QACE,SAAS0xK,IAClC,OAAIF,EAAOG,iBACTH,EAAOG,gBAAgBp6H,WAAWw+D,YAAYy7D,EAAOG,iBAGvDH,EAAOG,gBAAkBtoK,SAASC,cAAc,SAEhDkoK,EAAOG,gBAAgBrnI,aAAa,OAAQ,SAEZ,OAA5BknI,EAAO54J,QAAQ8vH,UAAqB8oC,EAAO54J,QAAQ8vH,SAAW,IAChE8oC,EAAOG,gBAAgBrnI,aAAa,WAAY,YAGlDknI,EAAOG,gBAAgB33D,UAAY,kBAEE,OAAjCw3D,EAAO54J,QAAQ8wH,eACjB8nC,EAAOG,gBAAgBrnI,aAAa,SAAUknI,EAAO54J,QAAQ8wH,eAGhC,OAA3B8nC,EAAO54J,QAAQgpC,SACjB4vH,EAAOG,gBAAgBrnI,aAAa,UAAWknI,EAAO54J,QAAQgpC,SAKhE4vH,EAAOG,gBAAgBn7G,MAAMo7G,WAAa,SAC1CJ,EAAOG,gBAAgBn7G,MAAM0G,SAAW,WACxCs0G,EAAOG,gBAAgBn7G,MAAMmoB,IAAM,IACnC6yF,EAAOG,gBAAgBn7G,MAAMioB,KAAO,IACpC+yF,EAAOG,gBAAgBn7G,MAAMgnB,OAAS,IACtCg0F,EAAOG,gBAAgBn7G,MAAMxiB,MAAQ,IACrCu0F,EAASrzB,WAAWs8D,EAAO54J,QAAQmyJ,qBAAsB,wBAAwBphK,YAAY6nK,EAAOG,iBAC7FH,EAAOG,gBAAgBvoK,iBAAiB,SAAU,WACvD,IAAIR,EAAQ4oK,EAAOG,gBAAgB/oK,MAEnC,GAAIA,EAAM5I,OAAQ,CAChB,IACI6xK,EADAC,GAAajM,EAA2Bj9J,GAG5C,IACE,IAAKkpK,GAAWh5J,MAAO+4J,EAASC,GAAWpT,KAAKyH,MAG9CqL,EAAOO,QAFIF,EAAOlhK,MAItB,OAASg1I,GACPmsB,GAAWr3J,EAAEkrI,EACf,SACEmsB,GAAW3xJ,GACb,CACF,CAEAqxJ,SAAOltH,KAAK,aAAc17C,GAEnB8oK,GACT,EACF,CAEAA,GAGF17K,KAAKg8K,IAAqB,OAAflpK,OAAOkpK,IAAelpK,OAAOkpK,IAAMlpK,OAAOmpK,UAIrD,IACIC,EADAC,EAActM,EAA2B7vK,KAAK2zK,QAGlD,IACE,IAAKwI,EAAYr5J,MAAOo5J,EAAUC,EAAYzT,KAAKyH,MAAO,CACxD,IAAIl9B,EAAYipC,EAAQvhK,MACxB3a,KAAK4yI,GAAGK,EAAWjzI,KAAK4iB,QAAQqwH,GAClC,CACF,OAAS0c,GACPwsB,EAAY13J,EAAEkrI,EAChB,SACEwsB,EAAYhyJ,GACd,CAEAnqB,KAAK4yI,GAAG,iBAAkB,WACxB,OAAO4oC,EAAOY,2BAChB,GACAp8K,KAAK4yI,GAAG,cAAe,WACrB,OAAO4oC,EAAOY,2BAChB,GACAp8K,KAAK4yI,GAAG,WAAY,SAAUvgI,GAC5B,OAAOmpK,EAAOltH,KAAK,WAAYj8C,EACjC,GAEArS,KAAK4yI,GAAG,WAAY,SAAUvgI,GAC5B,GAAsC,IAAlCmpK,EAAOa,gBAAgBryK,QAAsD,IAAtCwxK,EAAOc,oBAAoBtyK,QAAmD,IAAnCwxK,EAAOe,iBAAiBvyK,OAE5G,OAAO6+B,WAAW,WAChB,OAAO2yI,EAAOltH,KAAK,gBACrB,EAAG,EAEP,GAEA,IAaIkuH,EAAgB,SAAuB/3J,GAIzC,GAjBkB,SAAuBA,GACzC,GAAIA,EAAEg4J,aAAaC,MAIjB,QAAS/zK,GAAI,EAAGA,GAAI8b,EAAEg4J,aAAaC,MAAM1yK,OAAQrB,KAC/C,GAAgC,UAA5B8b,EAAEg4J,aAAaC,MAAM/zK,IAAgB,OAAO,EAIpD,OAAO,CACT,CAMOg0K,CAAcl4J,GAGnB,OAFAA,EAAEsyC,kBAEEtyC,EAAEm3B,eACGn3B,EAAEm3B,iBAEFn3B,EAAE49D,aAAc,CAE3B,EAGA,OAAAriF,KAAK+yK,UAAY,CAAC,CAChBllH,QAAS7tD,KAAK6tD,QACd8lH,OAAQ,CACNiE,UAAa,SAAmBnzJ,GAC9B,OAAO+2J,EAAOltH,KAAK,YAAa7pC,EAClC,EACAqzJ,UAAa,SAAmBrzJ,GAC9B+3J,SAAc/3J,GACP+2J,EAAOltH,KAAK,YAAa7pC,EAClC,EACAszJ,SAAY,SAAkBtzJ,GAI5B,IAAIm4J,GAEJ,IACEA,GAAOn4J,EAAEg4J,aAAaI,aACxB,OAAiB,CAEjBp4J,SAAEg4J,aAAaK,WAAa,SAAWF,IAAQ,aAAeA,GAAO,OAAS,OAC9EJ,EAAc/3J,GACP+2J,EAAOltH,KAAK,WAAY7pC,EACjC,EACAuzJ,UAAa,SAAmBvzJ,GAC9B,OAAO+2J,EAAOltH,KAAK,YAAa7pC,EAClC,EACA0rG,KAAQ,SAAc1rG,GACpB+3J,SAAc/3J,GACP+2J,EAAOrrD,KAAK1rG,EACrB,EACAozJ,QAAW,SAAiBpzJ,GAC1B,OAAO+2J,EAAOltH,KAAK,UAAW7pC,EAChC,KAOJzkB,KAAK8yK,kBAAkB3gK,QAAQ,SAAU4qK,GACvC,OAAOvB,EAAOzI,UAAUrmK,KAAK,CAC3BmhD,QAASkvH,EACTpJ,OAAQ,CACN5jC,MAAS,SAAeitC,IAEtB,OAAID,IAAqBvB,EAAO3tH,SAAWmvH,GAAI5xJ,SAAWowJ,EAAO3tH,SAAW0kF,EAAS0qC,cAAcD,GAAI5xJ,OAAQowJ,EAAO3tH,QAAQn6C,cAAc,kBAC1I8nK,EAAOG,gBAAgB5rC,SAIlB,CACT,IAGN,GACA/vI,KAAKi9G,SACEj9G,KAAK4iB,QAAQjL,KAAK+2J,KAAK1uK,KAChC,GAEC,CACDqB,IAAK,UACLsZ,MAAO,WACL,OAAA3a,KAAKg9G,UACLh9G,KAAKszI,gBAAe,GAEQ,MAAxBtzI,KAAK27K,iBAA0B37K,KAAK27K,gBAAgBp6H,aACtDvhD,KAAK27K,gBAAgBp6H,WAAWw+D,YAAY//G,KAAK27K,iBACjD37K,KAAK27K,gBAAkB,aAGlB37K,KAAK6tD,QAAQ8sE,SACb4X,EAASygC,UAAUpkF,OAAO2jD,EAASygC,UAAUrkF,QAAQ3uF,MAAO,EACrE,GACC,CACDqB,IAAK,4BACLsZ,MAAO,WACL,IAAIuiK,EACAC,EAAiB,EACjBC,EAAa,EAGjB,GAFkBp9K,KAAKq9K,iBAEPrzK,OAAQ,CACtB,IACIszK,EADAC,EAAc1N,EAA2B7vK,KAAKq9K,kBAGlD,IACE,IAAKE,EAAYz6J,MAAOw6J,EAAUC,EAAY7U,KAAKyH,MAAO,CACxD,IAAI99J,EAAOirK,EAAQ3iK,MACnBwiK,GAAkB9qK,EAAKyjI,OAAOgkC,UAC9BsD,GAAc/qK,EAAKyjI,OAAO0nC,KAC5B,CACF,OAAS7tB,GACP4tB,EAAY94J,EAAEkrI,EAChB,SACE4tB,EAAYpzJ,GACd,CAEA+yJ,EAAsB,IAAMC,EAAiBC,CAC/C,MACEF,EAAsB,IAGxB,OAAOl9K,KAAKsuD,KAAK,sBAAuB4uH,EAAqBE,EAAYD,EAC3E,GAGC,CACD97K,IAAK,gBACLsZ,MAAO,SAAuB+tJ,GAC5B,MAAsC,mBAA3B1oK,KAAK4iB,QAAQkxH,UACf9zI,KAAK4iB,QAAQkxH,UAAU40B,GAEvB,GAAG/1J,OAAO3S,KAAK4iB,QAAQkxH,WAAWnhI,OAAO3S,KAAK4iB,QAAQ0wJ,eAAiB,IAAI3gK,OAAO+1J,EAAG,KAAO,GAEvG,GAGC,CACDrnK,IAAK,cACLsZ,MAAO,SAAqBtI,GAC1B,MAAuC,mBAA5BrS,KAAK4iB,QAAQ4wJ,WACfnhK,EAAKgC,KAGPrU,KAAK4iB,QAAQ4wJ,WAAWnhK,EACjC,GAKC,CACDhR,IAAK,kBACLsZ,MAAO,WACL,IAAI8iK,EAAkB11K,EAEtB,GAAI01K,EAAmBz9K,KAAKyzK,sBAC1B,OAAOgK,EAGT,IAAIC,EAAe,4BAEf19K,KAAK4iB,QAAQqyJ,mBACfyI,GAAgB,MAAM/qK,OAAO3S,KAAK4iB,QAAQqyJ,iBAAkB,SAG9DyI,GAAgB,4BAA+B/qK,OAAO3S,KAAK29K,cAAc,GAAI,MAAOhrK,OAAO3S,KAAK4iB,QAAQ0wJ,eAAiB,2BAAwBvjK,EAAW,kDAC5J,IAAIsL,EAASk3H,EAASj/H,cAAcoqK,GAEpC,MAA6B,SAAzB19K,KAAK6tD,QAAQ4tH,SACf1zK,EAAOwqI,EAASj/H,cAAc,iBAAkBX,OAAO3S,KAAK4iB,QAAQ7Y,IAAK,4CAAgD4I,OAAO3S,KAAK4iB,QAAQ6/F,OAAQ,eAChJ9uG,YAAY0H,IAGjBrb,KAAK6tD,QAAQvZ,aAAa,UAAW,uBACrCt0C,KAAK6tD,QAAQvZ,aAAa,SAAUt0C,KAAK4iB,QAAQ6/F,SAG5C16G,GAAsBsT,CAC/B,GAIC,CACDha,IAAK,sBACLsZ,MAAO,WAoBL,QAnBIijK,EAAc,SAAqBC,GACrC,IACIC,EADAC,EAAclO,EAA2BgO,GAG7C,IACE,IAAKE,EAAYj7J,MAAOg7J,EAAUC,EAAYrV,KAAKyH,MAAO,CACxD,IAAIxxB,GAAKm/B,EAAQnjK,MAEjB,GAAI,qBAAqB2oF,KAAKq7C,GAAG36B,WAC/B,OAAO26B,EAEX,CACF,OAASgR,GACPouB,EAAYt5J,EAAEkrI,EAChB,SACEouB,EAAY5zJ,GACd,CACF,EAES6zJ,EAAM,EAAGC,EAAO,CAAC,MAAO,QAASD,EAAMC,EAAKj0K,OAAQg0K,IAAO,CAClE,IACI19J,EAEJ,GAAIA,EAAWs9J,EAAY59K,KAAK6tD,QAAQ9N,qBAH1Bk+H,EAAKD,KAIjB,OAAO19J,CAEX,CACF,GAEC,CACDjf,IAAK,sBACLsZ,MAAO,WACL,OAAO3a,KAAK+yK,UAAUtyK,IAAI,SAAUy9K,GAClC,OAAO,WACL,IAAI15K,EAAS,GAEb,QAASk3C,KAASwiI,EAAiBvK,OAEjCnvK,EAAOkI,KAAKwxK,EAAiBrwH,QAAQz6C,iBAAiBsoC,EADvCwiI,EAAiBvK,OAAOj4H,IACgC,IAGzE,OAAOl3C,CACT,CATO,EAUT,EACF,GAEC,CACDnD,IAAK,uBACLsZ,MAAO,WACL,OAAO3a,KAAK+yK,UAAUtyK,IAAI,SAAUy9K,GAClC,OAAO,WACL,IAAI15K,EAAS,GAEb,QAASk3C,KAASwiI,EAAiBvK,OAEjCnvK,EAAOkI,KAAKwxK,EAAiBrwH,QAAQ16C,oBAAoBuoC,EAD1CwiI,EAAiBvK,OAAOj4H,IACmC,IAG5E,OAAOl3C,CACT,CATO,EAUT,EACF,GAEC,CACDnD,IAAK,UACLsZ,MAAO,WACL,IAAIwjK,EAASn+K,KAEb,OAAAA,KAAK8yK,kBAAkB3gK,QAAQ,SAAU07C,GACvC,OAAOA,EAAQjZ,UAAUl0B,OAAO,eAClC,GACA1gB,KAAKo+K,uBACLp+K,KAAKmtB,UAAW,EACTntB,KAAK4S,MAAMnS,IAAI,SAAU4R,GAC9B,OAAO8rK,EAAOE,aAAahsK,EAC7B,EACF,GACC,CACDhR,IAAK,SACLsZ,MAAO,WACL,cAAO3a,KAAKmtB,SACZntB,KAAK8yK,kBAAkB3gK,QAAQ,SAAU07C,GACvC,OAAOA,EAAQjZ,UAAUpyC,IAAI,eAC/B,GACOxC,KAAKs+K,qBACd,GAEC,CACDj9K,IAAK,WACLsZ,MAAO,SAAkB+mG,GACvB,IAAI68D,EAAe,EACfC,EAAe,IAEnB,GAAI98D,EAAO,EAAG,CAGZ,QAFIrJ,EAAQ,CAAC,KAAM,KAAM,KAAM,KAAM,KAE5B1vG,EAAI,EAAGA,EAAI0vG,EAAMruG,OAAQrB,IAAK,CACrC,IAAI81K,EAAOpmE,EAAM1vG,GAGjB,GAAI+4G,GAFSn4G,KAAKm1K,IAAI1+K,KAAK4iB,QAAQ+xJ,aAAc,EAAIhsK,GAAK,GAEtC,CAClB41K,EAAe78D,EAAOn4G,KAAKm1K,IAAI1+K,KAAK4iB,QAAQ+xJ,aAAc,EAAIhsK,GAC9D61K,EAAeC,EACf,KACF,CACF,CAEAF,EAAeh1K,KAAKwhK,MAAM,GAAKwT,GAAgB,EACjD,CAEA,MAAO,WAAW5rK,OAAO4rK,EAAc,cAAc5rK,OAAO3S,KAAK4iB,QAAQ+yJ,kBAAkB6I,GAC7F,GAEC,CACDn9K,IAAK,8BACLsZ,MAAO,WACL,OAA6B,MAAzB3a,KAAK4iB,QAAQ8vH,UAAoB1yI,KAAK2+K,mBAAmB30K,QAAUhK,KAAK4iB,QAAQ8vH,UAC9E1yI,KAAK2+K,mBAAmB30K,SAAWhK,KAAK4iB,QAAQ8vH,UAClD1yI,KAAKsuD,KAAK,kBAAmBtuD,KAAK4S,OAG7B5S,KAAK6tD,QAAQjZ,UAAUpyC,IAAI,yBAE3BxC,KAAK6tD,QAAQjZ,UAAUl0B,OAAO,uBAEzC,GACC,CACDrf,IAAK,OACLsZ,MAAO,SAAc8J,GACnB,GAAKA,EAAEg4J,aAIP,CAAAz8K,KAAKsuD,KAAK,OAAQ7pC,GAKlB,QAFI7R,EAAQ,GAEHjK,EAAI,EAAGA,EAAI8b,EAAEg4J,aAAa7pK,MAAM5I,OAAQrB,IAC/CiK,EAAMjK,GAAK8b,EAAEg4J,aAAa7pK,MAAMjK,GAIlC,GAAIiK,EAAM5I,OAAQ,CAChB,IAAI9H,EAAQuiB,EAAEg4J,aAAav6K,MAEvBA,GAASA,EAAM8H,QAAuC,MAA7B9H,EAAM,GAAG08K,iBAEpC5+K,KAAK6+K,mBAAmB38K,GAExBlC,KAAK8+K,YAAYlsK,EAErB,CAEA5S,KAAKsuD,KAAK,aAAc17C,EAAK,CAC/B,GACC,CACDvR,IAAK,QACLsZ,MAAO,SAAe8J,GACpB,GAEM,MAi2DZ,SAASs6J,GAAUpkK,EAAOgqB,GACxB,cAAchqB,EAAU,KAAyB,OAAVA,EAAiBgqB,EAAUhqB,QAAS5K,CAC7E,CAr2DUgvK,CAAsBt6J,GAAEu6J,cAA2B,SAAUvxI,GAC/D,OAAOA,EAAEvrC,KACX,GAIA,CAAAlC,KAAKsuD,KAAK,QAAS7pC,GACnB,IAAIviB,EAAQuiB,EAAEu6J,cAAc98K,MAE5B,GAAIA,EAAM8H,OACR,OAAOhK,KAAK6+K,mBAAmB38K,EAAK,CAExC,GACC,CACDb,IAAK,cACLsZ,MAAO,SAAqB/H,GAC1B,IACIqsK,EADAC,EAAcrP,EAA2Bj9J,GAG7C,IACE,IAAKssK,EAAYp8J,MAAOm8J,EAAUC,EAAYxW,KAAKyH,MAEjDnwK,KAAK+7K,QADMkD,EAAQtkK,MAGvB,OAASg1I,GACPuvB,EAAYz6J,EAAEkrI,EAChB,SACEuvB,EAAY/0J,GACd,CACF,GAGC,CACD9oB,IAAK,qBACLsZ,MAAO,SAA4BzY,GACjC,IAAIi9K,EAASn/K,KAEb,OAAO,WACL,IAGIo/K,EAHA56K,EAAS,GAET66K,EAAcxP,EAA2B3tK,GAG7C,IACE,IAAKm9K,EAAYv8J,MAAOs8J,EAAUC,EAAY3W,KAAKyH,MAAO,CACxD,IACImP,EADAp/K,EAAOk/K,EAAQzkK,MAGU,MAAzBza,EAAK0+K,mBAA6BU,EAAQp/K,EAAK0+K,oBAE/Cp6K,EAAOkI,KADL4yK,EAAMC,OACIJ,EAAOpD,QAAQ77K,EAAKs/K,aACvBF,EAAMG,YAEHN,EAAOO,uBAAuBJ,EAAOA,EAAMjrK,WAE3CtE,GASdvL,EAAOkI,KAPoB,MAAlBxM,EAAKs/K,WACG,MAAbt/K,EAAKy/K,MAA8B,SAAdz/K,EAAKy/K,UAMlB5vK,EALEovK,EAAOpD,QAAQ77K,EAAKs/K,aAOtC,CACF,OAAS7vB,GACP0vB,EAAY56J,EAAEkrI,EAChB,SACE0vB,EAAYl1J,GACd,CAEA,OAAO3lB,CACT,CArCO,EAsCT,GAEC,CACDnD,IAAK,yBACLsZ,MAAO,SAAgCilK,EAAW/1K,GAChD,IAAIg2K,EAAS7/K,KAET8/K,EAAYF,EAAUG,eAEtBC,EAAe,SAAsBlgK,GACvC,OAkxDR,SAASmgK,GAAgB1oG,EAAK2oG,EAAYv7I,GACxC,UAAW4yC,EAAQ,KAAuB,OAARA,GAA2C,mBAApBA,EAAI2oG,GAC3D,OAAOv7I,EAAU4yC,EAAK2oG,EAI1B,CAxxDeD,CAAgB9xJ,QAAS,MAAO,SAAUhM,GAC/C,OAAOA,EAAE9e,IAAIyc,EACf,EACF,EAyCA,OAvCkB,SAASqgK,IACzB,OAAOL,EAAUK,YAAY,SAAU3/K,GACrC,GAAIA,EAAQwJ,OAAS,EAAG,CACtB,IACIo2K,GADAC,EAAcxQ,EAA2BrvK,GAG7C,IACE,IAAK6/K,EAAYv9J,MAAOs9J,GAAUC,EAAY3X,KAAKyH,MAAO,CACxD,IAAImP,EAAQc,GAAQzlK,MAEhB2kK,EAAMC,OACRD,EAAMjtK,KAAK,SAAUA,GACnB,IAAIwtK,EAAOj9J,QAAQgyJ,mBAAmD,MAA9BviK,EAAKgC,KAAKwX,UAAU,EAAG,GAI/DxZ,SAAKiuK,SAAW,GAAG3tK,OAAO9I,EAAM,KAAK8I,OAAON,EAAKgC,MAC1CwrK,EAAO9D,QAAQ1pK,EACxB,GACSitK,EAAMG,aACfI,EAAOH,uBAAuBJ,EAAO,GAAG3sK,OAAO9I,EAAM,KAAK8I,OAAO2sK,EAAMjrK,MAE3E,CAIF,OAASs7I,GACP0wB,EAAY57J,EAAEkrI,EAChB,SACE0wB,EAAYl2J,GACd,CAEAg2J,GACF,CAEA,OAAO,IACT,EAAGH,EACL,CAEOG,EACT,GAOC,CACD9+K,IAAK,SACLsZ,MAAO,SAAgBtI,EAAM89J,GACvBnwK,KAAK4iB,QAAQgxH,aAAevhI,EAAKqvG,KAAkC,KAA3B1hH,KAAK4iB,QAAQgxH,YAAqB,KAC5Eu8B,EAAKnwK,KAAK4iB,QAAQsyJ,eAAethK,QAAQ,eAAgBrK,KAAKwhK,MAAM14J,EAAKqvG,KAAO,KAAO,OAAS,KAAK9tG,QAAQ,kBAAmB5T,KAAK4iB,QAAQgxH,cACnIrB,EAASguC,YAAYluK,EAAMrS,KAAK4iB,QAAQ8wH,eAEhB,MAAzB1zI,KAAK4iB,QAAQ8vH,UAAoB1yI,KAAK2+K,mBAAmB30K,QAAUhK,KAAK4iB,QAAQ8vH,UACzFy9B,EAAKnwK,KAAK4iB,QAAQ8yJ,qBAAqB9hK,QAAQ,eAAgB5T,KAAK4iB,QAAQ8vH,WAC5E1yI,KAAKsuD,KAAK,mBAAoBj8C,IAE9BrS,KAAK4iB,QAAQ8zJ,OAAOhI,KAAK1uK,KAAMqS,EAAM89J,GALrCA,EAAKnwK,KAAK4iB,QAAQuyJ,oBAOtB,GACC,CACD9zK,IAAK,UACLsZ,MAAO,SAAiBtI,GACtB,IAAImuK,EAASxgL,KAEbqS,EAAKyjI,OAAS,CACZqgC,KAAM5jC,EAASkuC,SACf5G,SAAU,EAGV2D,MAAOnrK,EAAKqvG,KACZo4D,UAAW,EACXz0H,SAAUrlD,KAAK0gL,YAAYruK,IAK7BrS,KAAK4S,MAAMlG,KAAK2F,GAChBA,EAAKstH,OAAS4S,EAASgpC,MACvBv7K,KAAKsuD,KAAK,YAAaj8C,GAEvBrS,KAAK2gL,kBAAkBtuK,GAEvBrS,KAAK02K,OAAOrkK,EAAM,SAAUyN,GACtBA,GACFzN,EAAK+oK,UAAW,EAEhBoF,EAAOI,iBAAiB,CAACvuK,GAAOyN,KAGhCzN,EAAK+oK,UAAW,EAEZoF,EAAO59J,QAAQkyJ,WACjB0L,EAAOK,YAAYxuK,IAKvBmuK,EAAOxH,6BACT,EACF,GAEC,CACD33K,IAAK,eACLsZ,MAAO,SAAsB/H,GAC3B,IACIkuK,EADAC,EAAclR,EAA2Bj9J,GAG7C,IACE,IAAKmuK,EAAYj+J,MAAOg+J,EAAUC,EAAYrY,KAAKyH,MAEjDnwK,KAAK6gL,YADMC,EAAQnmK,MAGvB,OAASg1I,GACPoxB,EAAYt8J,EAAEkrI,EAChB,SACEoxB,EAAY52J,GACd,CAEA,OAAO,IACT,GACC,CACD9oB,IAAK,cACLsZ,MAAO,SAAqBtI,GAC1B,IAAI2uK,EAAShhL,KAEb,GAAIqS,EAAKstH,SAAW4S,EAASgpC,QAA2B,IAAlBlpK,EAAK+oK,SASzC,MAAM,IAAI5qJ,MAAM,oFANhB,GAFAne,EAAKstH,OAAS4S,EAAS+oC,OAEnBt7K,KAAK4iB,QAAQiyJ,iBACf,OAAOhsI,WAAW,WAChB,OAAOm4I,EAAOC,cAChB,EAAG,EAKT,GACC,CACD5/K,IAAK,oBACLsZ,MAAO,SAA2BtI,GAChC,IAAI6uK,EAASlhL,KAEb,GAAIA,KAAK4iB,QAAQsxJ,uBAAyB7hK,EAAKG,KAAKsqB,MAAM,YAAczqB,EAAKqvG,MAA4C,KAApC1hH,KAAK4iB,QAAQmxH,qBAA8B,KAC9H,OAAA/zI,KAAK66K,gBAAgBnuK,KAAK2F,GAEnBw2B,WAAW,WAChB,OAAOq4I,EAAOC,wBAChB,EAAG,EAEP,GACC,CACD9/K,IAAK,yBACLsZ,MAAO,WACL,IAAIymK,EAAUphL,KAEd,IAAIA,KAAK86K,sBAAwD,IAAhC96K,KAAK66K,gBAAgB7wK,OAItD,CAAAhK,KAAK86K,sBAAuB,EAE5B,IAAIzoK,EAAOrS,KAAK66K,gBAAgBtoD,QAEhC,OAAOvyH,KAAKqhL,gBAAgBhvK,EAAMrS,KAAK4iB,QAAQuxJ,eAAgBn0K,KAAK4iB,QAAQwxJ,gBAAiBp0K,KAAK4iB,QAAQyxJ,iBAAiB,EAAM,SAAU6E,GACzIkI,SAAQ9yH,KAAK,YAAaj8C,EAAM6mK,GAEhCkI,EAAQtG,sBAAuB,EACxBsG,EAAQD,wBACjB,EAAC,CACH,GAEC,CACD9/K,IAAK,aACLsZ,MAAO,SAAoBtI,GAQzB,GAPIA,EAAKstH,SAAW4S,EAASsmC,WAC3B74K,KAAKq+K,aAAahsK,GAGpBrS,KAAK4S,MAAQ0uK,GAAQthL,KAAK4S,MAAOP,GACjCrS,KAAKsuD,KAAK,cAAej8C,GAEC,IAAtBrS,KAAK4S,MAAM5I,OACb,OAAOhK,KAAKsuD,KAAK,QAErB,GAEC,CACDjtD,IAAK,iBACLsZ,MAAO,SAAwB4mK,GAEJ,MAArBA,IACFA,GAAoB,GAGtB,IACIC,EADAC,EAAc5R,EAA2B7vK,KAAK4S,MAAM+lD,SAGxD,IACE,IAAK8oH,EAAY3+J,MAAO0+J,EAAUC,EAAY/Y,KAAKyH,MAAO,CACxD,IAAI99J,EAAOmvK,EAAQ7mK,OAEftI,EAAKstH,SAAW4S,EAASsmC,WAAa0I,IACxCvhL,KAAK60I,WAAWxiI,EAEpB,CACF,OAASs9I,GACP8xB,EAAYh9J,EAAEkrI,EAChB,SACE8xB,EAAYt3J,GACd,CAEA,OAAO,IACT,GAIC,CACD9oB,IAAK,cACLsZ,MAAO,SAAqBtI,EAAM2rC,EAAOwpC,EAAQktF,EAAc7iK,GAC7D,IAAI6vK,EAAU1hL,KAEd,OAAOA,KAAKqhL,gBAAgBhvK,EAAM2rC,EAAOwpC,EAAQktF,GAAc,EAAM,SAAUwE,EAASyI,GACtF,GAAc,MAAVA,EAEF,OAAO9vK,EAASQ,GAEhB,IAAImiK,EAAiBkN,EAAQ9+J,QAAQ4xJ,eAEf,MAAlBA,IACFA,EAAiBniK,EAAKG,MAGxB,IAAIovK,GAAiBD,EAAOE,UAAUrN,EAAgBkN,EAAQ9+J,QAAQ6xJ,eAEtE,OAAuB,eAAnBD,GAAsD,cAAnBA,KAErCoN,GAAiBE,EAAYC,QAAQ1vK,EAAK2vK,QAASJ,KAG9C/vK,EAAS0gI,EAAS0vC,cAAcL,IAE3C,EACF,GACC,CACDvgL,IAAK,kBACLsZ,MAAO,SAAyBtI,EAAM2rC,EAAOwpC,EAAQktF,EAAcwN,EAAgBrwK,GACjF,IAAIswK,EAAUniL,KAEVoiL,EAAa,IAAIC,WAErBD,EAAWE,OAAS,WAClBjwK,EAAK2vK,QAAUI,EAAW59K,OAER,kBAAd6N,EAAKG,KAQT2vK,EAAQI,uBAAuBlwK,EAAM2rC,EAAOwpC,EAAQktF,EAAcwN,EAAgBrwK,GAN9EA,IAASuwK,EAAW59K,OAO1B,EAEA49K,EAAWI,cAAcnwK,EAC3B,GAOC,CACDhR,IAAK,sBACLsZ,MAAO,SAA6B8nK,EAAUC,EAAU7wK,EAAU8wK,GAChE,IAAIC,EAAU5iL,KAEV6iL,IAAkBzZ,UAAUp/J,OAAS,QAAsB+F,IAAjBq5J,UAAU,KAAmBA,UAAU,GACrFppK,KAAKsuD,KAAK,YAAam0H,GACvBziL,KAAKsuD,KAAK,WAAYm0H,GAEjBI,GAUHJ,EAAST,QAAUU,EACnB1iL,KAAKuiL,uBAAuBE,EAAUziL,KAAK4iB,QAAQuxJ,eAAgBn0K,KAAK4iB,QAAQwxJ,gBAAiBp0K,KAAK4iB,QAAQ8xJ,aAAc10K,KAAK4iB,QAAQs/J,eAP5H,SAAgBjJ,GAC3B2J,EAAQt0H,KAAK,YAAam0H,EAAUxJ,GAEhCpnK,GAAUA,GAChB,EAGiK8wK,KAVjK3iL,KAAKsuD,KAAK,YAAam0H,EAAUC,GAC7B7wK,GAAUA,IAWlB,GACC,CACDxQ,IAAK,yBACLsZ,MAAO,SAAgCtI,EAAM2rC,EAAOwpC,EAAQktF,EAAcwN,EAAgBrwK,EAAU8wK,GAClG,IAAIG,EAAU9iL,KAIVq9H,EAAMhqH,SAASC,cAAc,OAEjC,OAAIqvK,IACFtlD,EAAIslD,YAAcA,GAIpBT,EAAwE,cAAvDa,iBAAiB1vK,SAAS8pH,MAAM6lD,kBAA8Cd,EAE/F7kD,EAAIilD,OAAS,WACX,IAAIW,GAAW,SAAkBpxK,GAC/B,OAAOA,EAAS,EAClB,EAEA,cAAWqxK,KAAS,KAAwB,OAATA,MAAiBhB,IAClDe,GAAW,SAAkBpxK,GAC3B,OAAOqxK,KAAKC,QAAQ9lD,EAAK,WACvB,OAAOxrH,EAASqxK,KAAKE,OAAOpjL,KAAM,eACpC,EACF,GAGKijL,GAAS,SAAUI,GACxBhxK,EAAK2rC,MAAQq/E,EAAIr/E,MACjB3rC,EAAKm1E,OAAS61C,EAAI71C,OAElB,IAAI87F,EAAaR,EAAQlgK,QAAQq0J,OAAOvI,KAAKoU,EAASzwK,EAAM2rC,EAAOwpC,EAAQktF,GAEvEiN,EAAStuK,SAASC,cAAc,UAChCm7B,EAAMkzI,EAAO4B,WAAW,MAS5B,OARA5B,EAAO3jI,MAAQslI,EAAW9L,SAC1BmK,EAAOn6F,OAAS87F,EAAW7L,UAEvB4L,EAAc,IAChB1B,EAAO3jI,MAAQslI,EAAW7L,UAC1BkK,EAAOn6F,OAAS87F,EAAW9L,UAGrB6L,GACN,KAAK,EAEH50I,EAAI1nC,UAAU46K,EAAO3jI,MAAO,GAC5BvP,EAAI47C,OAAM,EAAI,GACd,MAEF,KAAK,EAEH57C,EAAI1nC,UAAU46K,EAAO3jI,MAAO2jI,EAAOn6F,QACnC/4C,EAAI+0I,OAAOj6K,KAAKk6K,IAChB,MAEF,KAAK,EAEHh1I,EAAI1nC,UAAU,EAAG46K,EAAOn6F,QACxB/4C,EAAI47C,MAAM,GAAG,GACb,MAEF,KAAK,EAEH57C,EAAI+0I,OAAO,GAAMj6K,KAAKk6K,IACtBh1I,EAAI47C,MAAM,GAAG,GACb,MAEF,KAAK,EAEH57C,EAAI+0I,OAAO,GAAMj6K,KAAKk6K,IACtBh1I,EAAI1nC,UAAU,GAAI46K,EAAO3jI,OACzB,MAEF,KAAK,EAEHvP,EAAI+0I,OAAO,GAAMj6K,KAAKk6K,IACtBh1I,EAAI1nC,UAAU46K,EAAOn6F,QAASm6F,EAAO3jI,OACrCvP,EAAI47C,OAAM,EAAI,GACd,MAEF,KAAK,EAEH57C,EAAI+0I,QAAO,GAAOj6K,KAAKk6K,IACvBh1I,EAAI1nC,WAAW46K,EAAOn6F,OAAQ,GAKlCk8F,EAAgBj1I,EAAK4uF,EAAwB,MAAnBimD,EAAWpM,KAAeoM,EAAWpM,KAAO,EAAsB,MAAnBoM,EAAWnM,KAAemM,EAAWnM,KAAO,EAAGmM,EAAWlM,SAAUkM,EAAWjM,UAA8B,MAAnBiM,EAAWK,KAAeL,EAAWK,KAAO,EAAsB,MAAnBL,EAAWM,KAAeN,EAAWM,KAAO,EAAGN,EAAW9L,SAAU8L,EAAW7L,WACjS,IAAIwB,GAAY0I,EAAOE,UAAU,aAEjC,GAAgB,MAAZhwK,EACF,OAAOA,EAASonK,GAAW0I,EAE/B,EACF,EAEgB,MAAZ9vK,IACFwrH,EAAIwmD,QAAUhyK,GAGTwrH,EAAI5pH,IAAMpB,EAAK2vK,OACxB,GAEC,CACD3gL,IAAK,eACLsZ,MAAO,WACL,IAAIg5H,EAAkB3zI,KAAK4iB,QAAQ+wH,gBAC/BmwC,EAAmB9jL,KAAKs8K,oBAAoBtyK,OAC5CrB,EAAIm7K,EAER,KAAIA,GAAoBnwC,GAIxB,KAAIowC,EAAc/jL,KAAKu8K,iBAEvB,GAAMwH,EAAY/5K,OAAS,EAI3B,IAAIhK,KAAK4iB,QAAQ0wJ,eAEf,OAAOtzK,KAAKgkL,aAAaD,EAAYprH,MAAM,EAAGg7E,EAAkBmwC,IAEhE,KAAOn7K,EAAIgrI,GAAiB,CAC1B,IAAKowC,EAAY/5K,OACf,OAIFhK,KAAKi2I,YAAY8tC,EAAYxxD,SAC7B5pH,GACF,GAEJ,GAEC,CACDtH,IAAK,cACLsZ,MAAO,SAAqBtI,GAC1B,OAAOrS,KAAKgkL,aAAa,CAAC3xK,GAC5B,GAEC,CACDhR,IAAK,eACLsZ,MAAO,SAAsB/H,GAC3B,IACIqxK,EADAC,EAAcrU,EAA2Bj9J,GAG7C,IACE,IAAKsxK,EAAYphK,MAAOmhK,EAAUC,EAAYxb,KAAKyH,MAAO,CACxD,IAAI99J,EAAO4xK,EAAQtpK,MACnBtI,EAAKqnK,YAAa,EAElBrnK,EAAKstH,OAAS4S,EAASsmC,UACvB74K,KAAKsuD,KAAK,aAAcj8C,EAC1B,CACF,OAASs9I,GACPu0B,EAAYz/J,EAAEkrI,EAChB,SACEu0B,EAAY/5J,GACd,CAEA,OAAInqB,KAAK4iB,QAAQ0wJ,gBACftzK,KAAKsuD,KAAK,qBAAsB17C,GAG3B5S,KAAKmkL,YAAYvxK,EAC1B,GACC,CACDvR,IAAK,mBACLsZ,MAAO,SAA0Bq7J,GAE/B,OAAeh2K,KAAK4S,MAAMnQ,OAAO,SAAU4P,GACzC,OAAOA,EAAK2jK,MAAQA,CACtB,GAAGv1K,IAAI,SAAU4R,GACf,OAAOA,CACT,EACF,GAKC,CACDhR,IAAK,eACLsZ,MAAO,SAAsBtI,GAC3B,GAAIA,EAAKstH,SAAW4S,EAASsmC,UAAW,CACtC,IAGIuL,EAHAC,EAAerkL,KAAKskL,iBAAiBjyK,EAAK2jK,KAE1CuO,EAAc1U,EAA2BwU,GAG7C,IACE,IAAKE,EAAYzhK,MAAOshK,EAAUG,EAAY7b,KAAKyH,MAC/BiU,EAAQzpK,MACdglH,OAAS4S,EAASiyC,QAElC,OAAS70B,GACP40B,EAAY9/J,EAAEkrI,EAChB,SACE40B,EAAYp6J,GACd,QAEW9X,EAAK2jK,IAAQ,KACtB3jK,EAAK2jK,IAAIyO,QAGX,IACIC,EADAC,EAAc9U,EAA2BwU,GAG7C,IACE,IAAKM,EAAY7hK,MAAO4hK,EAAUC,EAAYjc,KAAKyH,MAEjDnwK,KAAKsuD,KAAK,WADSo2H,EAAQ/pK,MAG/B,OAASg1I,GACPg1B,EAAYlgK,EAAEkrI,EAChB,SACEg1B,EAAYx6J,GACd,CAEInqB,KAAK4iB,QAAQ0wJ,gBACftzK,KAAKsuD,KAAK,mBAAoB+1H,EAElC,MAAWhyK,EAAKstH,SAAW4S,EAASgpC,OAASlpK,EAAKstH,SAAW4S,EAAS+oC,UACpEjpK,EAAKstH,OAAS4S,EAASiyC,SACvBxkL,KAAKsuD,KAAK,WAAYj8C,GAElBrS,KAAK4iB,QAAQ0wJ,gBACftzK,KAAKsuD,KAAK,mBAAoB,CAACj8C,KAInC,GAAIrS,KAAK4iB,QAAQiyJ,iBACf,OAAO70K,KAAKihL,cAEhB,GACC,CACD5/K,IAAK,gBACLsZ,MAAO,SAAuBstF,GAC5B,GAAsB,mBAAXA,EAAuB,CAChC,QAAS28E,EAAQxb,UAAUp/J,OAAQ+0G,EAAO,IAAI/9F,MAAM4jK,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IACxG9lE,EAAK8lE,EAAQ,GAAKzb,UAAUyb,GAG9B,OAAO58E,EAAO0iE,MAAM3qK,KAAM++G,EAC5B,CAEA,OAAO9W,CACT,GACC,CACD5mG,IAAK,aACLsZ,MAAO,SAAoBtI,GACzB,OAAOrS,KAAKmkL,YAAY,CAAC9xK,GAC3B,GACC,CACDhR,IAAK,cACLsZ,MAAO,SAAqB/H,GAC1B,IAAIkyK,EAAU9kL,KAEdA,KAAK+kL,gBAAgBnyK,EAAO,SAAUoyK,GACpC,GAAIF,EAAQliK,QAAQozH,SAAU,CAG5B,IAAIivC,EAAkBD,EAAiB,GACvCpyK,EAAM,GAAGkjI,OAAOC,QAAU+uC,EAAQliK,QAAQozH,WAAa8uC,EAAQliK,QAAQixJ,eAAiBoR,EAAgBvjE,KAAOojE,EAAQliK,QAAQkxJ,WAC/HlhK,EAAM,GAAGkjI,OAAO0gC,gBAAkBjtK,KAAK21E,KAAK+lG,EAAgBvjE,KAAOojE,EAAQliK,QAAQkxJ,UACrF,CAEA,GAAIlhK,EAAM,GAAGkjI,OAAOC,QAAS,CAI3B,IAAI1jI,EAAOO,EAAM,GACbsyK,EAAmBF,EAAiB,GAExC3yK,EAAKyjI,OAAOqvC,OAAS,GAErB,IAAIC,EAAkB,WAGpB,QAFIC,EAAa,OAEyBt1K,IAAnCsC,EAAKyjI,OAAOqvC,OAAOE,IACxBA,IAIF,KAAIA,GAAchzK,EAAKyjI,OAAO0gC,iBAC9B8O,CACA,IAAI92J,EAAQ62J,EAAaP,EAAQliK,QAAQkxJ,UACrCr6J,GAAMlQ,KAAK0zB,IAAIzO,EAAQs2J,EAAQliK,QAAQkxJ,UAAWoR,EAAiBxjE,MACnE6jE,GAAY,CACdlxK,KAAMywK,EAAQnH,cAAc,GAC5BzyK,KAAMg6K,EAAiBM,YAAcN,EAAiBM,YAAYh3J,EAAO/U,IAAOyrK,EAAiBvsH,MAAMnqC,EAAO/U,IAC9G4rC,SAAUhzC,EAAKyjI,OAAOzwF,SACtBggI,WAAYA,GAEdhzK,EAAKyjI,OAAOqvC,OAAOE,GAAc,CAC/BhzK,KAAMA,EACNrK,MAAOq9K,EACPE,UAAWA,GAEX5lD,OAAQ4S,EAASsmC,UACjBgB,SAAU,EACV4L,QAAS,GAIXX,EAAQY,YAAY9yK,EAAO,CAAC2yK,IAAU,CACxC,EA2BA,GAzBAlzK,EAAKyjI,OAAO6vC,oBAAsB,SAAU1P,GAC1C,IAAI2P,GAAc,EAClB3P,EAAMt2C,OAAS4S,EAASszC,QAExB5P,EAAMsP,UAAY,KAElBtP,EAAMD,IAAM,KAEZ,QAASrtK,EAAI,EAAGA,EAAI0J,EAAKyjI,OAAO0gC,gBAAiB7tK,IAAK,CACpD,QAA8BoH,IAA1BsC,EAAKyjI,OAAOqvC,OAAOx8K,GACrB,OAAOy8K,IAGL/yK,EAAKyjI,OAAOqvC,OAAOx8K,GAAGg3H,SAAW4S,EAASszC,UAC5CD,GAAc,EAElB,CAEIA,GACFd,EAAQliK,QAAQ+zJ,eAAetkK,EAAM,WACnCyyK,EAAQgB,UAAUlzK,EAAO,GAAI,KAC/B,EAEJ,EAEIkyK,EAAQliK,QAAQmxJ,qBAClB,QAASprK,EAAI,EAAGA,EAAI0J,EAAKyjI,OAAO0gC,gBAAiB7tK,IAC/Cy8K,SAGFA,GAEJ,KAAO,CAGL,QAFIW,GAAa,GAERC,EAAM,EAAGA,EAAMpzK,EAAM5I,OAAQg8K,IACpCD,GAAWC,GAAO,CAChB3xK,KAAMywK,EAAQnH,cAAcqI,GAC5B96K,KAAM85K,EAAiBgB,GACvB3gI,SAAUzyC,EAAMozK,GAAKlwC,OAAOzwF,UAIhCy/H,EAAQY,YAAY9yK,EAAOmzK,GAC7B,CACF,EACF,GAEC,CACD1kL,IAAK,YACLsZ,MAAO,SAAmBtI,EAAM2jK,GAC9B,QAASrtK,EAAI,EAAGA,EAAI0J,EAAKyjI,OAAO0gC,gBAAiB7tK,IAC/C,QAA8BoH,IAA1BsC,EAAKyjI,OAAOqvC,OAAOx8K,IAAoB0J,EAAKyjI,OAAOqvC,OAAOx8K,GAAGqtK,MAAQA,EACvE,OAAO3jK,EAAKyjI,OAAOqvC,OAAOx8K,EAGhC,GAIC,CACDtH,IAAK,cACLsZ,MAAO,SAAqB/H,EAAOmzK,GACjC,IAKIE,EALAC,EAAUlmL,KAEVg2K,EAAM,IAAImQ,eAEVC,EAAcvW,EAA2Bj9J,GAG7C,IACE,IAAKwzK,EAAYtjK,MAAOmjK,EAAUG,EAAY1d,KAAKyH,MACtC8V,EAAQtrK,MACdq7J,IAAMA,CAEf,OAASrmB,IACPy2B,EAAY3hK,EAAEkrI,GAChB,SACEy2B,EAAYj8J,GACd,CAEIvX,EAAM,GAAGkjI,OAAOC,UAElBnjI,EAAM,GAAGkjI,OAAOqvC,OAAOY,EAAW,GAAGV,YAAYrP,IAAMA,GAGzD,IAAIvzD,EAASziH,KAAKqmL,cAAcrmL,KAAK4iB,QAAQ6/F,OAAQ7vG,GACjD7I,EAAM/J,KAAKqmL,cAAcrmL,KAAK4iB,QAAQ7Y,IAAK6I,GAC/CojK,EAAIvlK,KAAKgyG,EAAQ14G,GAAK,GAEtBisK,EAAIniC,QAAU7zI,KAAKqmL,cAAcrmL,KAAK4iB,QAAQixH,QAASjhI,GAEvDojK,EAAIpC,kBAAoB5zK,KAAK4iB,QAAQgxJ,gBAErCoC,EAAIsM,OAAS,SAAU79J,IACrByhK,EAAQI,mBAAmB1zK,EAAOojK,EAAKvxJ,GACzC,EAEAuxJ,EAAIuQ,UAAY,WACdL,EAAQM,mBAAmB5zK,EAAOojK,EAAK,0BAA0BrjK,OAAOuzK,EAAQtjK,QAAQixH,QAAU,IAAM,YAC1G,EAEAmiC,EAAI6N,QAAU,WACZqC,EAAQM,mBAAmB5zK,EAAOojK,EACpC,GAGgC,MAAdA,EAAIlgC,OAAiBkgC,EAAIlgC,OAASkgC,GAExCyQ,WAAa,SAAUhiK,IACjC,OAAOyhK,EAAQQ,2BAA2B9zK,EAAOojK,EAAKvxJ,GACxD,EAEA,IAAIgvH,EAAU,CACZkzC,OAAU,mBACV,gBAAiB,WACjB,mBAAoB,kBAOtB,QAASC,KAJL5mL,KAAK4iB,QAAQ6wH,SACflB,EAAS+5B,OAAO74B,EAASzzI,KAAK4iB,QAAQ6wH,SAGjBA,EAAS,CAC9B,IAAIozC,EAAcpzC,EAAQmzC,GAEtBC,GACF7Q,EAAI8Q,iBAAiBF,EAAYC,EAErC,CAEA,IAAI/iL,EAAW,IAAIk7H,SAEnB,GAAIh/H,KAAK4iB,QAAQjf,OAAQ,CACvB,IAAIojL,GAAmB/mL,KAAK4iB,QAAQjf,OAMpC,QAAStC,KAJuB,mBAArB0lL,KACTA,GAAmBA,GAAiBrY,KAAK1uK,KAAM4S,EAAOojK,EAAKpjK,EAAM,GAAGkjI,OAAOC,QAAU/1I,KAAKgnL,UAAUp0K,EAAM,GAAIojK,GAAO,OAGvG+Q,GAAkB,CAChC,IAAIpsK,GAAQosK,GAAiB1lL,IAE7B,GAAI2f,MAAMC,QAAQtG,IAIhB,QAAShS,GAAI,EAAGA,GAAIgS,GAAM3Q,OAAQrB,KAChC7E,EAASg8G,OAAOz+G,GAAKsZ,GAAMhS,UAG7B7E,EAASg8G,OAAOz+G,GAAKsZ,GAEzB,CACF,CAGA,IACIssK,GADAC,GAAcrX,EAA2Bj9J,GAG7C,IACE,IAAKs0K,GAAYpkK,MAAOmkK,GAAUC,GAAYxe,KAAKyH,MAEjDnwK,KAAKsuD,KAAK,UADE24H,GAAQtsK,MACQq7J,EAAKlyK,EAErC,OAAS6rJ,IACPu3B,GAAYziK,EAAEkrI,GAChB,SACEu3B,GAAY/8J,GACd,CAEInqB,KAAK4iB,QAAQ0wJ,gBACftzK,KAAKsuD,KAAK,kBAAmB17C,EAAOojK,EAAKlyK,GAG3C9D,KAAKmnL,oBAAoBrjL,GAIzB,QAASsjL,GAAM,EAAGA,GAAMrB,EAAW/7K,OAAQo9K,KAAO,CAChD,IAAI7B,GAAYQ,EAAWqB,IAC3BtjL,EAASg8G,OAAOylE,GAAUlxK,KAAMkxK,GAAUr6K,KAAMq6K,GAAUlgI,SAC5D,CAEArlD,KAAKqnL,cAAcrR,EAAKlyK,EAAU8O,EACpC,GAEC,CACDvR,IAAK,kBACLsZ,MAAO,SAAyB/H,EAAOu9J,GAiBrC,QAhBImX,EAAUtnL,KAEVglL,EAAmB,GAEnBuC,EAAc,EAEdC,EAAQ,SAAe7+K,GACzB2+K,EAAQ1kK,QAAQ80J,cAAchJ,KAAK4Y,EAAS10K,EAAMjK,GAAI,SAAUs8K,IAC9DD,EAAiBr8K,GAAKs8K,KAEhBsC,IAAgB30K,EAAM5I,QAC1BmmK,EAAK6U,EAET,EACF,EAESr8K,EAAI,EAAGA,EAAIiK,EAAM5I,OAAQrB,IAChC6+K,EAAM7+K,EAEV,GAEC,CACDtH,IAAK,sBACLsZ,MAAO,SAA6B7W,GAElC,GAA6B,SAAzB9D,KAAK6tD,QAAQ4tH,QAAoB,CACnC,IACIgM,EADAC,EAAc7X,EAA2B7vK,KAAK6tD,QAAQuvE,iBAAiB,oCAG3E,IACE,IAAKsqD,EAAY5kK,MAAO2kK,EAAUC,EAAYhf,KAAKyH,MAAO,CACxD,IAAIzyH,EAAQ+pI,EAAQ9sK,MAChBgtK,EAAYjqI,EAAM9P,aAAa,QAC/Br/B,EAAYmvC,EAAM9P,aAAa,QAGnC,GAFIr/B,IAAWA,EAAYA,EAAUkpB,wBAE1BkwJ,EAAc,KAA6B,OAAdA,GAExC,GAAsB,WAAlBjqI,EAAM+9H,SAAwB/9H,EAAMrJ,aAAa,YAAa,CAEhE,IACIuzI,EADAC,EAAchY,EAA2BnyH,EAAM96B,SAGnD,IACE,IAAKilK,EAAY/kK,MAAO8kK,EAAUC,EAAYnf,KAAKyH,MAAO,CACxD,IAAIloE,EAAS2/E,EAAQjtK,MAEjBstF,EAAOtlF,UACT7e,EAASg8G,OAAO6nE,EAAW1/E,EAAOttF,MAEtC,CACF,OAASg1I,IACPk4B,EAAYpjK,EAAEkrI,GAChB,SACEk4B,EAAY19J,GACd,CACF,OAAY5b,GAA2B,aAAdA,GAA0C,UAAdA,GAAyBmvC,EAAMoqI,UAClFhkL,EAASg8G,OAAO6nE,EAAWjqI,EAAM/iC,MAErC,CACF,OAASg1I,IACP+3B,EAAYjjK,EAAEkrI,GAChB,SACE+3B,EAAYv9J,GACd,CACF,CACF,GAGC,CACD9oB,IAAK,6BACLsZ,MAAO,SAAoC/H,EAAOojK,EAAKvxJ,GACrD,IAAIo1J,EAEJ,UAAWp1J,EAAM,IAAa,CAG5B,GAFAo1J,EAAW,IAAMp1J,EAAEnd,OAASmd,EAAE+4J,MAE1B5qK,EAAM,GAAGkjI,OAAOC,QAAS,CAC3B,IAAI1jI,EAAOO,EAAM,GAEbqjK,EAAQj2K,KAAKgnL,UAAU30K,EAAM2jK,GAEjCC,EAAM4D,SAAWA,EACjB5D,EAAMuH,MAAQ/4J,EAAE+4J,MAChBvH,EAAM6D,UAAYr1J,EAAEnd,OAIpB+K,EAAKyjI,OAAO+jC,SAAW,EACvBxnK,EAAKyjI,OAAO0nC,MAAQ,EACpBnrK,EAAKyjI,OAAOgkC,UAAY,EAExB,QAASnxK,GAAI,EAAGA,GAAI0J,EAAKyjI,OAAO0gC,gBAAiB7tK,UACjBoH,IAA1BsC,EAAKyjI,OAAOqvC,OAAOx8K,UAAuDoH,IAAnCsC,EAAKyjI,OAAOqvC,OAAOx8K,IAAGkxK,WAC/DxnK,EAAKyjI,OAAO+jC,UAAYxnK,EAAKyjI,OAAOqvC,OAAOx8K,IAAGkxK,SAC9CxnK,EAAKyjI,OAAO0nC,OAASnrK,EAAKyjI,OAAOqvC,OAAOx8K,IAAG60K,MAC3CnrK,EAAKyjI,OAAOgkC,WAAaznK,EAAKyjI,OAAOqvC,OAAOx8K,IAAGmxK,WAInDznK,EAAKyjI,OAAO+jC,SAAWxnK,EAAKyjI,OAAO+jC,SAAWxnK,EAAKyjI,OAAO0gC,eAC5D,KAAO,CACL,IACIuR,EADAC,EAAcnY,EAA2Bj9J,GAG7C,IACE,IAAKo1K,EAAYllK,MAAOilK,EAAUC,EAAYtf,KAAKyH,MAAO,CACxD,IAAI8X,EAASF,EAAQptK,MACrBstK,EAAOnyC,OAAO+jC,SAAWA,EACzBoO,EAAOnyC,OAAO0nC,MAAQ/4J,EAAE+4J,MACxByK,EAAOnyC,OAAOgkC,UAAYr1J,EAAEnd,MAC9B,CACF,OAASqoJ,IACPq4B,EAAYvjK,EAAEkrI,GAChB,SACEq4B,EAAY79J,GACd,CACF,CAEA,IACI+9J,GADAC,EAActY,EAA2Bj9J,GAG7C,IACE,IAAKu1K,EAAYrlK,MAAOolK,GAAUC,EAAYzf,KAAKyH,MAAO,CACxD,IAAIiY,GAASF,GAAQvtK,MACrB3a,KAAKsuD,KAAK,iBAAkB85H,GAAQA,GAAOtyC,OAAO+jC,SAAUuO,GAAOtyC,OAAOgkC,UAC5E,CACF,OAASnqB,IACPw4B,EAAY1jK,EAAEkrI,GAChB,SACEw4B,EAAYh+J,GACd,CACF,KAAO,CAEL,IAAIk+J,IAAmB,EACvBxO,EAAW,IAEX,IACIyO,GADAC,GAAc1Y,EAA2Bj9J,GAG7C,IACE,IAAK21K,GAAYzlK,MAAOwlK,GAAUC,GAAY7f,KAAKyH,MAAO,CACxD,IAAIqY,GAASF,GAAQ3tK,OAEU,MAA3B6tK,GAAO1yC,OAAO+jC,UAAoB2O,GAAO1yC,OAAOgkC,YAAc0O,GAAO1yC,OAAO0nC,SAC9E6K,IAAmB,GAGrBG,GAAO1yC,OAAO+jC,SAAWA,EACzB2O,GAAO1yC,OAAOgkC,UAAY0O,GAAO1yC,OAAO0nC,KAC1C,CAEF,OAAS7tB,IACP44B,GAAY9jK,EAAEkrI,GAChB,SACE44B,GAAYp+J,GACd,CAEA,GAAIk+J,GACF,OAGF,IACII,GADAC,GAAc7Y,EAA2Bj9J,GAG7C,IACE,IAAK81K,GAAY5lK,MAAO2lK,GAAUC,GAAYhgB,KAAKyH,MAAO,CACxD,IAAIwY,GAASF,GAAQ9tK,MACrB3a,KAAKsuD,KAAK,iBAAkBq6H,GAAQ9O,EAAU8O,GAAO7yC,OAAOgkC,UAC9D,CACF,OAASnqB,IACP+4B,GAAYjkK,EAAEkrI,GAChB,SACE+4B,GAAYv+J,GACd,CACF,CACF,GACC,CACD9oB,IAAK,qBACLsZ,MAAO,SAA4B/H,EAAOojK,EAAKvxJ,GAC7C,IAAIwnB,EAEJ,GAAIr5B,EAAM,GAAG+sH,SAAW4S,EAASiyC,UAIV,IAAnBxO,EAAI4S,WAIR,IAAyB,gBAArB5S,EAAI6S,cAAuD,SAArB7S,EAAI6S,eAC5C58I,EAAW+pI,EAAI8S,aAEX9S,EAAI+S,kBAAkB,kBAAoB/S,EAAI+S,kBAAkB,gBAAgBp6F,QAAQ,qBAC1F,IACE1iD,EAAW7jC,KAAKw1B,MAAMqO,EACxB,OAASnsB,GACP2E,EAAI3E,EACJmsB,EAAW,oCACb,CAIJjsC,KAAK0mL,2BAA2B9zK,GAE1B,KAAOojK,EAAIr2C,QAAUq2C,EAAIr2C,OAAS,IAGlC/sH,EAAM,GAAGkjI,OAAOC,QAClBnjI,EAAM,GAAGkjI,OAAO6vC,oBAAoB3lL,KAAKgnL,UAAUp0K,EAAM,GAAIojK,IAE7Dh2K,KAAK8lL,UAAUlzK,EAAOq5B,EAAUxnB,GALlCzkB,KAAKwmL,mBAAmB5zK,EAAOojK,EAAK/pI,EAAQ,CAQhD,GACC,CACD5qC,IAAK,qBACLsZ,MAAO,SAA4B/H,EAAOojK,EAAK/pI,GAC7C,GAAIr5B,EAAM,GAAG+sH,SAAW4S,EAASiyC,SAIjC,IAAI5xK,EAAM,GAAGkjI,OAAOC,SAAW/1I,KAAK4iB,QAAQoxJ,YAAa,CACvD,IAAIiC,EAAQj2K,KAAKgnL,UAAUp0K,EAAM,GAAIojK,GAErC,GAAIC,EAAMwP,UAAYzlL,KAAK4iB,QAAQqxJ,iBAGjC,YAFAj0K,KAAK0lL,YAAY9yK,EAAO,CAACqjK,EAAMsP,YAI/Bp3J,QAAQC,KAAK,2CAEjB,CAEApuB,KAAK4gL,iBAAiBhuK,EAAOq5B,GAAYjsC,KAAK4iB,QAAQwyJ,kBAAkBxhK,QAAQ,iBAAkBoiK,EAAIr2C,QAASq2C,EAAG,CACpH,GACC,CACD30K,IAAK,gBACLsZ,MAAO,SAAuBq7J,EAAKlyK,EAAU8O,GAC3CojK,EAAIgT,KAAKllL,EACX,GAGC,CACDzC,IAAK,YACLsZ,MAAO,SAAmB/H,EAAOk2K,EAAcrkK,GAC7C,IACIwkK,EADAC,EAAcrZ,EAA2Bj9J,GAG7C,IACE,IAAKs2K,EAAYpmK,MAAOmmK,EAAUC,EAAYxgB,KAAKyH,MAAO,CACxD,IAAI99J,EAAO42K,EAAQtuK,MACnBtI,EAAKstH,OAAS4S,EAASszC,QACvB7lL,KAAKsuD,KAAK,UAAWj8C,EAAMy2K,EAAcrkK,GACzCzkB,KAAKsuD,KAAK,WAAYj8C,EACxB,CACF,OAASs9I,GACPu5B,EAAYzkK,EAAEkrI,EAChB,SACEu5B,EAAY/+J,GACd,CAOA,GALInqB,KAAK4iB,QAAQ0wJ,iBACftzK,KAAKsuD,KAAK,kBAAmB17C,EAAOk2K,EAAcrkK,GAClDzkB,KAAKsuD,KAAK,mBAAoB17C,IAG5B5S,KAAK4iB,QAAQiyJ,iBACf,OAAO70K,KAAKihL,cAEhB,GAGC,CACD5/K,IAAK,mBACLsZ,MAAO,SAA0B/H,EAAOrC,EAASylK,GAC/C,IACImT,EADAC,EAAcvZ,EAA2Bj9J,GAG7C,IACE,IAAKw2K,EAAYtmK,MAAOqmK,EAAUC,EAAY1gB,KAAKyH,MAAO,CACxD,IAAI99J,EAAO82K,EAAQxuK,MACnBtI,EAAKstH,OAAS4S,EAAS82C,MACvBrpL,KAAKsuD,KAAK,QAASj8C,EAAM9B,EAASylK,GAClCh2K,KAAKsuD,KAAK,WAAYj8C,EACxB,CACF,OAASs9I,GACPy5B,EAAY3kK,EAAEkrI,EAChB,SACEy5B,EAAYj/J,GACd,CAOA,GALInqB,KAAK4iB,QAAQ0wJ,iBACftzK,KAAKsuD,KAAK,gBAAiB17C,EAAOrC,EAASylK,GAC3Ch2K,KAAKsuD,KAAK,mBAAoB17C,IAG5B5S,KAAK4iB,QAAQiyJ,iBACf,OAAO70K,KAAKihL,cAEhB,IACE,CAAC,CACH5/K,IAAK,SACLsZ,MAAO,WACL,MAAO,uCAAuC/G,QAAQ,QAAS,SAAUwmB,GACvE,IAAIna,EAAoB,GAAhB1W,KAAKE,SAAgB,EAE7B,OADc,MAAN2wB,EAAYna,EAAQ,EAAJA,EAAU,GACzBtH,SAAS,GACpB,EACF,KAGK45H,CACT,CArmF4B,CAqmF1Bg/B,IAEFh/B,EAAS+2C,YACT/2C,EAASx8H,QAAU,QAenBw8H,EAAS3vH,QAAU,CAAC,EAEpB2vH,EAAS2gC,kBAAoB,SAAUrlH,GAErC,GAAIA,EAAQjgB,aAAa,MACvB,OAAO2kG,EAAS3vH,QAAQ2mK,GAAS17H,EAAQjgB,aAAa,OAI1D,EAGA2kG,EAASygC,UAAY,GAErBzgC,EAASi3C,WAAa,SAAU37H,GAK9B,GAJuB,iBAAZA,IACTA,EAAUx6C,SAASK,cAAcm6C,IAGqB,MAAjCA,GAAQ8sE,SAC7B,MAAM,IAAInqG,MAAM,kNAGlB,OAAOq9B,EAAQ8sE,QACjB,EAGA4X,EAASC,cAAe,EAExBD,EAASk3C,SAAW,WAClB,IAAIC,EAEJ,GAAIr2K,SAAS+pH,iBACXssD,EAAYr2K,SAAS+pH,iBAAiB,iBACjC,CACLssD,EAAY,GAEZ,IAAIC,EAAgB,SAAuB9L,GACzC,OAAO,WACL,IAGI+L,EAHAplL,EAAS,GAETqlL,EAAcha,EAA2BgO,GAG7C,IACE,IAAKgM,EAAY/mK,MAAO8mK,EAAUC,EAAYnhB,KAAKyH,MAAO,CACxD,IAAIxxB,EAAKirC,EAAQjvK,MAEb,qBAAqB2oF,KAAKq7C,EAAG36B,WAC/Bx/G,EAAOkI,KAAKg9K,EAAUh9K,KAAKiyI,IAE3Bn6I,EAAOkI,UAAKqD,EAEhB,CACF,OAAS4/I,GACPk6B,EAAYplK,EAAEkrI,EAChB,SACEk6B,EAAY1/J,GACd,CAEA,OAAO3lB,CACT,CAvBO,EAwBT,EAEAmlL,EAAct2K,SAAS0sC,qBAAqB,QAC5C4pI,EAAct2K,SAAS0sC,qBAAqB,QAC9C,CAEA,OAAO,WACL,IAGI+pI,EAHAtlL,EAAS,GAETulL,EAAcla,EAA2B6Z,GAG7C,IACE,IAAKK,EAAYjnK,MAAOgnK,EAAUC,EAAYrhB,KAAKyH,MAAO,CACxD,IAAIx1C,EAAWmvD,EAAQnvK,OAGsB,IAAzC43H,EAAS2gC,kBAAkBv4C,GAC7Bn2H,EAAOkI,KAAK,IAAI6lI,EAAS5X,IAEzBn2H,EAAOkI,UAAKqD,EAEhB,CACF,OAAS4/I,GACPo6B,EAAYtlK,EAAEkrI,EAChB,SACEo6B,EAAY5/J,GACd,CAEA,OAAO3lB,CACT,CAxBO,EAyBT,EAaA+tI,EAASy3C,oBAAsB,CAC/B,kDAEAz3C,EAAS6gC,mBAAqB,WAC5B,IAAI6W,GAAiB,EAErB,GAAIn3K,OAAOo3K,MAAQp3K,OAAOuvK,YAAcvvK,OAAOq3K,UAAYr3K,OAAOs3K,MAAQt3K,OAAOksH,UAAY3rH,SAASK,cACpG,GAAM,cAAeL,SAASC,cAAc,KAErC,CAEL,IACI+2K,EADAC,EAAcza,EAA2Bt9B,EAASy3C,qBAGtD,IACE,IAAKM,EAAYxnK,MAAOunK,EAAUC,EAAY5hB,KAAKyH,MACrCka,EAAQ1vK,MAEV2oF,KAAKinF,UAAUC,aACvBP,GAAiB,EAIvB,OAASt6B,GACP26B,EAAY7lK,EAAEkrI,EAChB,SACE26B,EAAYngK,GACd,CACF,MApBE8/J,GAAiB,OAsBnBA,GAAiB,EAGnB,OAAOA,CACT,EAEA13C,EAAS0vC,cAAgB,SAAUwI,GAUjC,QAPIC,EAAaC,KAAKF,EAAQh+K,MAAM,KAAK,IAErCm+K,EAAaH,EAAQh+K,MAAM,KAAK,GAAGA,MAAM,KAAK,GAAGA,MAAM,KAAK,GAE5Do+K,EAAK,IAAIC,YAAYJ,EAAW1gL,QAChC+gL,EAAK,IAAIC,WAAWH,GAEfliL,EAAI,EAAG8Q,EAAMixK,EAAW1gL,OAAQihL,EAAM,GAAKxxK,EAAKwxK,EAAMtiL,GAAK8Q,EAAM9Q,GAAK8Q,EAAKwxK,EAAMtiL,IAAMA,IAC9FoiL,EAAGpiL,GAAK+hL,EAAWQ,WAAWviL,GAIhC,OAAO,IAAIyhL,KAAK,CAACS,GAAK,CACpBr4K,KAAMo4K,GAEV,EAGA,IAAItJ,GAAU,SAAiB32J,EAAMwgK,GACnC,OAAOxgK,EAAKloB,OAAO,SAAUvC,GAC3B,OAAOA,IAASirL,CAClB,GAAG1qL,IAAI,SAAUP,GACf,OAAOA,CACT,EACF,EAGIqpL,GAAW,SAAkBpkB,GAC/B,OAAOA,EAAIvxJ,QAAQ,aAAc,SAAUkpB,GACzC,OAAOA,EAAMsuJ,OAAO,GAAGj4C,aACzB,EACF,EAGAZ,EAASj/H,cAAgB,SAAU2S,GACjC,IAAIm1E,EAAM/nF,SAASC,cAAc,OACjC8nF,SAAI9uD,UAAYrmB,EACTm1E,EAAItlD,WAAW,EACxB,EAGAy8F,EAAS0qC,cAAgB,SAAUpvH,EAAS+5B,GAC1C,GAAI/5B,IAAY+5B,EACd,OAAO,EAIT,KAAO/5B,EAAUA,EAAQtM,YACvB,GAAIsM,IAAY+5B,EACd,OAAO,EAIX,OAAO,CACT,EAEA2qD,EAASrzB,WAAa,SAAUy/B,EAAItqI,GAClC,IAAIw5C,EAQJ,GANkB,iBAAP8wF,EACT9wF,EAAUx6C,SAASK,cAAcirI,GACT,MAAfA,EAAG3oG,WACZ6X,EAAU8wF,GAGG,MAAX9wF,EACF,MAAM,IAAIr9B,MAAM,YAAY7d,OAAO0B,EAAM,8EAG3C,OAAOw5C,CACT,EAEA0kF,EAASmhC,YAAc,SAAU2X,EAAKh3K,GACpC,IAAQwpK,EAER,GAAIwN,aAAerqK,MAAO,CACxB68J,EAAW,GAEX,IACE,IACIyN,EADAC,EAAc1b,EAA2Bwb,GAG7C,IACE,IAAKE,EAAYzoK,MAAOwoK,EAAUC,EAAY7iB,KAAKyH,MAEjD0N,EAASnxK,KAAK1M,KAAKk/G,WADdosE,EAAQ3wK,MACqBtG,GAEtC,OAASs7I,GACP47B,EAAY9mK,EAAEkrI,EAChB,SACE47B,EAAYphK,GACd,CACF,OACE0zJ,EAAW,IACb,CACF,SAA0B,iBAARwN,EAAkB,CAClCxN,EAAW,GAEX,IACI2N,EADAC,EAAc5b,EAA2Bx8J,SAAS+pH,iBAAiBiuD,IAGvE,IACE,IAAKI,EAAY3oK,MAAO0oK,EAAUC,EAAY/iB,KAAKyH,MAEjD0N,EAASnxK,KADJ8+K,EAAQ7wK,MAGjB,OAASg1I,GACP87B,EAAYhnK,EAAEkrI,EAChB,SACE87B,EAAYthK,GACd,CACF,MAA2B,MAAhBkhK,EAAIr1I,WACb6nI,EAAW,CAACwN,IAGd,GAAgB,MAAZxN,IAAqBA,EAAS7zK,OAChC,MAAM,IAAIwmB,MAAM,YAAY7d,OAAO0B,EAAM,+FAG3C,OAAOwpK,CACT,EAMAtrC,EAAS5yH,QAAU,SAAU+rK,EAAUtQ,EAAUuQ,GAC/C,OAAI74K,OAAO6M,QAAQ+rK,GACVtQ,IACc,MAAZuQ,EACFA,SADF,CAGT,EAKAp5C,EAASguC,YAAc,SAAUluK,EAAMqhI,GACrC,IAAKA,EACH,OAAO,EAITA,EAAgBA,EAAcjnI,MAAM,KACpC,IAIIm/K,EAJAC,EAAWx5K,EAAKG,KAChBs5K,EAAeD,EAASj4K,QAAQ,QAAS,IAEzCm4K,EAAclc,EAA2Bn8B,GAG7C,IACE,IAAKq4C,EAAYjpK,MAAO8oK,EAAUG,EAAYrjB,KAAKyH,MAAO,CACxD,IAAI6b,EAAYJ,EAAQjxK,MAGxB,GAA4B,OAF5BqxK,EAAYA,EAAU1qL,QAER8pL,OAAO,IACnB,IAAsG,IAAlG/4K,EAAKgC,KAAKojB,cAAck3D,QAAQq9F,EAAUv0J,cAAeplB,EAAKgC,KAAKrK,OAASgiL,EAAUhiL,QACxF,OAAO,UAEA,QAAQs5F,KAAK0oF,IAEtB,GAAIF,IAAiBE,EAAUp4K,QAAQ,QAAS,IAC9C,OAAO,UAGLi4K,IAAaG,EACf,OAAO,CAGb,CACF,OAASr8B,GACPo8B,EAAYtnK,EAAEkrI,EAChB,SACEo8B,EAAY5hK,GACd,CAEA,OAAO,CACT,SAGW8hK,OAAW,KAA0B,OAAXA,SACnCA,OAAO3tK,GAAGq8G,SAAW,SAAU/3G,GAC7B,OAAO5iB,KAAKksL,KAAK,WACf,OAAO,IAAI35C,EAASvyI,KAAM4iB,EAC5B,EACF,GAG8C,OAAX4lJ,EACnCA,EAAOC,QAAUl2B,EAEjBz/H,OAAOy/H,SAAWA,EAIpBA,EAASgpC,MAAQ,QACjBhpC,EAAS+oC,OAAS,SAGlB/oC,EAAS45C,SAAW55C,EAAS+oC,OAC7B/oC,EAASsmC,UAAY,YACrBtmC,EAAS65C,WAAa75C,EAASsmC,UAE/BtmC,EAASiyC,SAAW,WACpBjyC,EAAS82C,MAAQ,QACjB92C,EAASszC,QAAU,UAYnB,IAwCInC,EAAkB,SAAyBj1I,EAAK4uF,EAAKgvD,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACnF,IAAIC,EAzCqB,SAA8BxvD,GACvD,IACIyvD,EAAKzvD,EAAI0vD,cACTpL,EAAStuK,SAASC,cAAc,UACpCquK,EAAO3jI,MAAQ,EACf2jI,EAAOn6F,OAASslG,EAChB,IAAIr+I,EAAMkzI,EAAO4B,WAAW,MAC5B90I,EAAIu+I,UAAU3vD,EAAK,EAAG,GAUtB,QAPInyH,EADoBujC,EAAIw+I,aAAa,EAAG,EAAG,EAAGH,GACrB5hL,KAGzBohL,EAAK,EACLY,EAAKJ,EACLK,EAAKL,EAEFK,EAAKb,GAGI,IAFFphL,EAAgB,GAAViiL,EAAK,GAAS,GAG9BD,EAAKC,EAELb,EAAKa,EAGPA,EAAKD,EAAKZ,GAAM,EAGlB,IAAIc,EAAQD,EAAKL,EAEjB,OAAc,IAAVM,EACK,EAEAA,CAEX,CAKwBC,CAAqBhwD,GAC3C,OAAO5uF,EAAIu+I,UAAU3vD,EAAKgvD,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAKC,EAC7D,EAKI/K,EAA2B,WAC7B,SAASA,IACPlR,EAAgB5wK,KAAM8hL,EACxB,CAEA1Q,SAAa0Q,EAAa,KAAM,CAAC,CAC/BzgL,IAAK,YACLsZ,MAAO,WACL3a,KAAKstL,QAAU,mEACjB,GACC,CACDjsL,IAAK,WACLsZ,MAAO,SAAkB+iC,GAWvB,QAVIwvF,EAAS,GACTqgD,OAAOx9K,EACPy9K,OAAOz9K,EACP09K,EAAO,GACPC,OAAO39K,EACP49K,OAAO59K,EACP69K,OAAO79K,EACP89K,EAAO,GACPllL,EAAI,EAMN+kL,GAHAH,EAAO7vI,EAAM/0C,OAGE,EACfglL,GAAe,EAAPJ,IAAa,GAHrBC,EAAO9vI,EAAM/0C,OAGoB,EACjCilL,GAAe,GAAPJ,IAAc,GAHtBC,EAAO/vI,EAAM/0C,OAGqB,EAClCklL,EAAc,GAAPJ,EAEH/sG,MAAM8sG,GACRI,EAAOC,EAAO,GACLntG,MAAM+sG,KACfI,EAAO,IAGT3gD,EAASA,EAASltI,KAAKstL,QAAQlC,OAAOsC,GAAQ1tL,KAAKstL,QAAQlC,OAAOuC,GAAQ3tL,KAAKstL,QAAQlC,OAAOwC,GAAQ5tL,KAAKstL,QAAQlC,OAAOyC,GAC1HN,EAAOC,EAAOC,EAAO,GACrBC,EAAOC,EAAOC,EAAOC,EAAO,GAEtBllL,EAAI+0C,EAAM1zC,SAKlB,OAAOkjI,CACT,GACC,CACD7rI,IAAK,UACLsZ,MAAO,SAAiBmzK,EAAgBC,GACtC,IAAKD,EAAehxJ,MAAM,2BACxB,OAAOixJ,EAGT,IAAIC,EAAWhuL,KAAKiuL,SAASH,EAAel6K,QAAQ,0BAA2B,KAC3Es6K,EAAWluL,KAAKmuL,eAAeH,GAC/BpvD,EAAQ5+H,KAAKouL,iBAAiBL,EAAmBG,GACrD,MAAO,0BAA0Bv7K,OAAO3S,KAAKquL,SAASzvD,GACxD,GACC,CACDv9H,IAAK,mBACLsZ,MAAO,SAA0BozK,EAAmBG,GAClD,IAAII,EAAYtuL,KAAKuuL,aAAaL,GAC9BM,EAAgBxuL,KAAKyuL,WAAWV,EAAmBO,GAEvD,OADc,IAAItD,WAAWwD,EAE/B,GACC,CACDntL,IAAK,eACLsZ,MAAO,SAAsBuzK,GAI3B,QAHIQ,OAAM3+K,EACN09B,EAAI,EAEDA,EAAIygJ,EAASlkL,QAAQ,CAG1B,GAAe,OAFf0kL,EAAMR,EAASzgJ,IAEP,GAAwB,MAAXihJ,EAAI,GACvB,OAAOA,EAGTjhJ,GACF,CAEA,MAAO,EACT,GACC,CACDpsC,IAAK,aACLsZ,MAAO,SAAoBozK,EAAmBO,GAC5C,IAAIK,EAAYZ,EAAkBn6K,QAAQ,0BAA2B,IACjEg7K,EAAM5uL,KAAKiuL,SAASU,GACpBE,EAAgBD,EAAIjgG,QAAQ,IAAK,GACjCmgG,EAAMF,EAAIj2H,MAAM,EAAGk2H,GACnBE,EAAMH,EAAIj2H,MAAMk2H,GAChBG,EAAQF,EACZE,SAAQA,EAAMr8K,OAAO27K,IACP37K,OAAOo8K,EAEvB,GACC,CACD1tL,IAAK,iBACLsZ,MAAO,SAAwBs0K,GAI7B,QAHIC,EAAO,EACPhB,EAAW,KAKe,MAAxBe,EAAcC,GAA4C,MAA5BD,EAAcC,EAAO,KAH5C,CAOX,GAA4B,MAAxBD,EAAcC,GAA4C,MAA5BD,EAAcC,EAAO,GACrDA,GAAQ,MACH,CAEL,IAAIC,EAAWD,GADoB,IAA1BD,EAAcC,EAAO,GAAWD,EAAcC,EAAO,IAC/B,EAC3BR,EAAMO,EAAct2H,MAAMu2H,EAAMC,GACpCjB,EAASxhL,KAAKgiL,GACdQ,EAAOC,CACT,CAEA,GAAID,EAAOD,EAAcjlL,OACvB,KAEJ,CAEA,OAAOkkL,CACT,GACC,CACD7sL,IAAK,WACLsZ,MAAO,SAAkB+iC,GACvB,IAEI8vI,OAAOz9K,EACP09K,EAAO,GACPC,OAAO39K,EACP49K,OAAO59K,EACP69K,OAAO79K,EACP89K,EAAO,GACPllL,EAAI,EACJimL,EAAM,GAUV,IARiB,sBAEFvvF,KAAK3hD,IAClBvvB,QAAQC,KAAK,oJAGfsvB,EAAQA,EAAM9pC,QAAQ,sBAAuB,IAG3C85K,EAAO1tL,KAAKstL,QAAQ3+F,QAAQjxC,EAAM0tI,OAAOziL,MAKzC6kL,GAAe,IAJfG,EAAO3tL,KAAKstL,QAAQ3+F,QAAQjxC,EAAM0tI,OAAOziL,SAInB,GAHtBilL,EAAO5tL,KAAKstL,QAAQ3+F,QAAQjxC,EAAM0tI,OAAOziL,QAGP,EAClC8kL,GAAe,EAAPG,IAAa,GAHrBC,EAAO7tL,KAAKstL,QAAQ3+F,QAAQjxC,EAAM0tI,OAAOziL,OAIzCimL,EAAIliL,KAHGghL,GAAQ,EAAIC,GAAQ,GAKd,KAATC,GACFgB,EAAIliL,KAAK8gL,GAGE,KAATK,GACFe,EAAIliL,KAAK+gL,GAGJD,EAAOC,EAAO,GACrBC,EAAOC,EAAOC,EAAOC,EAAO,GAEtBllL,EAAI+0C,EAAM1zC,SAKlB,OAAO4kL,CACT,KAGK9M,CACT,CAvL+B,GAyL/BA,EAAYwH,YAmEZ/2C,EAAS68C,sBAAwB,WAC/B,GAAI78C,EAASC,aACX,OAAOD,EAASk3C,UAEpB,EAtDoB,SAAuB4F,EAAK/wK,GAC9C,IAAI6xJ,GAAO,EACPxnF,GAAM,EACNq0C,EAAMqyD,EAAIh8K,SACVi8K,EAAOtyD,EAAI8b,gBACXt2I,EAAMw6H,EAAI5pH,iBAAmB,mBAAqB,cAClDm8K,EAAMvyD,EAAI5pH,iBAAmB,sBAAwB,cACrDo8K,EAAMxyD,EAAI5pH,iBAAmB,GAAK,KAElCuE,EAAO,SAASA,EAAK8M,IACvB,IAAe,qBAAXA,GAAEjS,MAAkD,aAAnBwqH,EAAI4rD,eAI7B,SAAXnkK,GAAEjS,KAAkB68K,EAAMryD,GAAKuyD,GAAKC,EAAM/qK,GAAEjS,KAAMmF,GAAM,IAEpDw4J,IAASA,GAAO,IACnB,OAAO7xJ,EAAGowJ,KAAK2gB,EAAK5qK,GAAEjS,MAAQiS,GAElC,EAaA,GAAuB,aAAnBu4G,EAAI4rD,WAA2B,CACjC,GAAI5rD,EAAIyyD,mBAAqBH,EAAKI,SAAU,CAC1C,IACE/mG,GAAO0mG,EAAIM,YACb,OAAiB,CAEbhnG,GAjBG,SAASinG,IAClB,IACEN,EAAKI,SAAS,OAChB,OAEE,YADA7mJ,WAAW+mJ,EAAM,GAEnB,CAEA,OAAOj4K,EAAK,OACd,CASMi4K,EAEJ,CAEA5yD,EAAIx6H,GAAKgtL,EAAM,mBAAoB73K,GAAM,GACzCqlH,EAAIx6H,GAAKgtL,EAAM,mBAAoB73K,GAAM,GAClC03K,EAAI7sL,GAAKgtL,EAAM,OAAQ73K,GAAM,EACtC,CACF,CASAk4K,CAAc/8K,OAAQy/H,EAAS68C,2CCt6G/B,IAAAU,EAAAC,EAM8DD,EAA6F,SAAShtK,IAAI,aAAa,IAAIqH,SAAsBqlJ,KAApB,IAAyBA,YAAyB18J,OAApB,IAA2BA,YAAO,IAASqX,EAAEA,EAAE,CAAC,EAAMu+I,GAAGv+I,EAAE9W,YAAY8W,EAAE6lK,YAAY7tK,EAAEgI,EAAE8lK,iBAAgB,EAAG/nL,EAAE,CAAC,EAAEygK,EAAE,EAAE/7J,EAAE,CAACgxB,MAAM,SAASnZ,EAAEu1I,GAAG,IAAI/5I,GAAG+5I,EAAEA,GAAG,CAAC,GAAG7mC,gBAAe,EAA0C,GAAvC+8D,GAAEjwK,KAAK+5I,EAAEm2B,sBAAsBlwK,EAAEA,EAAE,CAAC,GAAM+5I,EAAE7mC,cAAclzG,EAAE+5I,EAAEr1H,YAAYurJ,GAAEl2B,EAAEr1H,YAAYq1H,EAAEr1H,UAAUq1H,EAAEo2B,QAAQxjL,EAAEyjL,kBAAkB,CAAC,IAAI1nL,EAAE,WAAW,IAAIiE,EAAEyjL,kBAAkB,OAAM,EAAG,IAA+YpwK,EAAEtX,EAA7Y8b,GAAGxE,EAAEkK,EAAE6xJ,KAAK7xJ,EAAE8xJ,WAAW,KAAKtzK,EAAEma,EAAEnK,WAAW/L,EAAE0jL,WAAW1jL,EAAE0jL,SAASrwK,EAAEswK,gBAAgB,IAAInG,KAAK,CAAC,yOAAyO,IAAIzhL,EAAE,QAAQ,CAAC6J,KAAK,uBAAuBwnJ,EAAE,IAAI7vI,EAAEqmK,OAAO/rK,GAAW,OAAOu1I,EAAEy2B,UAAU1uL,EAAEi4J,EAAEh7I,GAAG2pJ,IAAIzgK,EAAE8xJ,EAAEh7I,IAAIg7I,CAAC,CAAte,GAA0e,OAAOrxJ,EAAE+nL,SAAS12B,EAAEn5E,KAAKl4E,EAAEgoL,UAAU32B,EAAEic,MAAMttK,EAAEioL,aAAa52B,EAAEtiJ,SAAS/O,EAAEkoL,UAAU72B,EAAEl6I,MAAMk6I,EAAEn5E,KAAKqvG,GAAEl2B,EAAEn5E,MAAMm5E,EAAEic,MAAMia,GAAEl2B,EAAEic,OAAOjc,EAAEtiJ,SAASw4K,GAAEl2B,EAAEtiJ,UAAUsiJ,EAAEl6I,MAAMowK,GAAEl2B,EAAEl6I,cAAck6I,EAAEo2B,YAAYznL,EAAEqnL,YAAY,CAACtyI,MAAMj5B,EAAElf,OAAOy0J,EAAE82B,SAASnoL,EAAEqW,IAAI,CAAC,IAA8DyF,EAA1DikJ,EAAE,KAAK97J,MAAoB,iBAAiB6X,GAAGA,EAAiB,SAANA,EAA0DA,GAA1CymK,WAAW,GAAUzmK,EAAEk0C,MAAM,GAAUl0C,EAAMikJ,EAAE1O,EAAE+2B,SAAS,IAAIppL,EAAEqyJ,GAAG,IAAIhiJ,EAAEgiJ,KAAI,IAAKv1I,EAAEusK,UAAUd,GAAEzrK,EAAEwsK,OAAOf,GAAEzrK,EAAEmuH,IAAI81B,EAAE,IAAII,GAAE9O,IAAI7vI,EAAE+/J,MAAMzlK,aAAaylK,MAAMzlK,aAAalkB,UAAUmoK,EAAE,IAAItuI,EAAE4/H,IAAW0O,EAAE5lE,OAAOr+E,EAAE,EAAEysK,QAAQ,SAASzsK,EAAEu1I,GAAG,IAAI0O,GAAE,EAAG3mK,GAAE,EAAG89B,EAAE,IAAIqqD,EAAE,OAAOpnE,EAAE,IAAI5a,EAAE4a,EAAEA,EAAE7C,GAAE,EAAGtX,EAAE,KAAKwZ,GAAE,GAAG,WAAY,GAAG,iBAAiB63I,EAAqc,IAA5b,iBAAiBA,EAAEm3B,WAAWvkL,EAAEwkL,eAAe3uL,OAAO,SAASgiB,GAAG,OAAM,IAAKu1I,EAAEm3B,UAAUxiG,QAAQlqE,EAAE,GAAGza,SAAS61B,EAAEm6H,EAAEm3B,YAAY,kBAAkBn3B,EAAEq3B,QAAQ,mBAAmBr3B,EAAEq3B,QAAQrwK,MAAMC,QAAQ+4I,EAAEq3B,WAAW3oB,EAAE1O,EAAEq3B,QAAQ,kBAAkBr3B,EAAE/mC,gBAAgB,iBAAiB+mC,EAAE/mC,iBAAiBhzG,EAAE+5I,EAAE/mC,gBAAgB,iBAAiB+mC,EAAEs3B,UAAUpnG,EAAE8vE,EAAEs3B,SAAS,iBAAiBt3B,EAAEu3B,YAAYzuK,EAAEk3I,EAAEu3B,WAAW,kBAAkBv3B,EAAEhnC,SAASjxH,EAAEi4J,EAAEhnC,QAAWhyG,MAAMC,QAAQ+4I,EAAEw3B,SAAS,CAAC,GAAG,IAAIx3B,EAAEw3B,QAAQxnL,OAAO,MAAM,IAAIwmB,MAAM,2BAA2B7nB,EAAEqxJ,EAAEw3B,OAAO,MAAC,IAASx3B,EAAEy3B,aAAavpL,EAAE8xJ,EAAEy3B,WAAW3uK,IAAI,kBAAkBk3I,EAAE03B,gBAAgB13B,EAAE03B,0BAA0B7zF,UAAU17E,EAAE63I,EAAE03B,0BAA0B7zF,OAAOm8D,EAAE03B,eAAe,mBAAkB,CAA9wB,GAAkxB,IAAI/oB,EAAE,IAAI9qE,OAAOsrE,GAAErmJ,GAAG,KAA2C,GAAtC,iBAAiB2B,IAAIA,EAAErc,KAAKw1B,MAAMnZ,IAAOzD,MAAMC,QAAQwD,GAAG,CAAC,IAAIA,EAAEza,QAAQgX,MAAMC,QAAQwD,EAAE,IAAI,OAAO8uG,EAAE,KAAK9uG,EAAExE,GAAG,GAAG,iBAAiBwE,EAAE,GAAG,OAAO8uG,EAAE5qH,GAAGpI,OAAOkF,KAAKgf,EAAE,IAAIA,EAAExE,EAAE,SAAS,iBAAiBwE,EAAE,MAAM,iBAAiBA,EAAEvZ,OAAOuZ,EAAEvZ,KAAK9C,KAAKw1B,MAAMnZ,EAAEvZ,OAAO8V,MAAMC,QAAQwD,EAAEvZ,QAAQuZ,EAAEpJ,SAASoJ,EAAEpJ,OAAOoJ,EAAE4uG,MAAM5uG,EAAE4uG,KAAKh4G,QAAQ1S,GAAG8b,EAAEpJ,SAASoJ,EAAEpJ,OAAO2F,MAAMC,QAAQwD,EAAEvZ,KAAK,IAAIuZ,EAAEpJ,OAAO,iBAAiBoJ,EAAEvZ,KAAK,GAAG3K,OAAOkF,KAAKgf,EAAEvZ,KAAK,IAAI,IAAI8V,MAAMC,QAAQwD,EAAEvZ,KAAK,KAAK,iBAAiBuZ,EAAEvZ,KAAK,KAAKuZ,EAAEvZ,KAAK,CAACuZ,EAAEvZ,QAAQqoH,EAAE9uG,EAAEpJ,QAAQ,GAAGoJ,EAAEvZ,MAAM,GAAG+U,GAAG,MAAM,IAAIuQ,MAAM,0CAA0C,SAAS+iG,EAAE9uG,EAAEu1I,EAAE/5I,GAAG,IAAItX,EAAE,GAAG,iBAAiB8b,IAAIA,EAAErc,KAAKw1B,MAAMnZ,IAAI,iBAAiBu1I,IAAIA,EAAE5xJ,KAAKw1B,MAAMo8H,IAAI,IAAI0O,GAAE1nJ,MAAMC,QAAQwD,IAAI,EAAEA,EAAEza,OAAO8Y,IAAG9B,MAAMC,QAAQ+4I,EAAE,IAAI,GAAG0O,IAAG3mK,EAAE,CAAC,QAAQmG,GAAE,EAAEA,GAAEuc,EAAEza,OAAO9B,KAAI,EAAEA,KAAIS,GAAGk3B,GAAGl3B,GAAGq3B,GAAEvb,EAAEvc,IAAGA,IAAG,EAAE8xJ,EAAEhwJ,SAASrB,GAAGuhF,EAAE,CAAC,QAAQ/nE,GAAE,EAAEA,GAAE63I,EAAEhwJ,OAAOmY,KAAI,CAAC,IAAIwmJ,GAAED,GAAEjkJ,EAAEza,OAAOgwJ,EAAE73I,IAAGnY,OAAOupH,IAAE,EAAGppG,GAAEu+I,GAAE,IAAInoK,OAAOkF,KAAKu0J,EAAE73I,KAAInY,OAAO,IAAIgwJ,EAAE73I,IAAGnY,OAAO,GAAGiW,IAAIyoJ,KAAIn1C,GAAE,WAAWtzG,EAAE,KAAK+5I,EAAE73I,IAAGjB,KAAK,IAAI5f,OAAO,IAAI04J,EAAE73I,IAAGnY,QAAQ,IAAIgwJ,EAAE73I,IAAG,GAAGnY,QAAQ,WAAWiW,GAAGyoJ,GAAE,CAAC,QAAQvyJ,GAAE,GAAGxO,GAAE,EAAEA,GAAEghK,GAAEhhK,KAAoBwO,GAAEzJ,KAAKstJ,EAAE73I,IAAlBW,GAAE2B,EAAE9c,IAAGA,KAAkB4rH,GAAE,KAAKp9G,GAAE+K,KAAK,IAAI5f,MAAM,CAAC,IAAIiyH,GAAE,CAAC,QAAQv7G,GAAE,EAAEA,GAAE2wJ,GAAE3wJ,KAAK,EAAEA,KAAImS,KAAIxhB,GAAGk3B,GAAqBl3B,GAAGq3B,GAAEg6H,EAAE73I,IAAnBumJ,IAAG5lJ,GAAE2B,EAAEzM,IAAGA,IAAeA,IAAGmK,GAAE63I,EAAEhwJ,OAAO,KAAKiW,GAAG,EAAE0oJ,KAAIx+I,MAAKxhB,GAAGuhF,EAAE,CAAC,CAAC,OAAOvhF,CAAC,CAAC,SAASq3B,GAAEvb,EAAEu1I,GAAG,GAAG,MAAMv1I,EAAE,MAAM,GAAG,GAAGA,EAAE5kB,cAAc05D,KAAK,OAAOnxD,KAAKC,UAAUoc,GAAGk0C,MAAM,EAAE,IAAI,IAAI14C,GAAE,EAAGkC,GAAG,iBAAiBsC,GAAGtC,EAAEmhF,KAAK7+E,KAAKA,EAAE,IAAIA,EAAExE,GAAE,GAAI,IAAItX,EAAE8b,EAAE9L,WAAW/E,QAAQ+0J,EAAEzgK,GAAG,OAAO+X,EAAEA,IAAG,IAAKyoJ,GAAG,mBAAmBA,GAAGA,EAAEjkJ,EAAEu1I,IAAIh5I,MAAMC,QAAQynJ,IAAIA,EAAE1O,IAAI,SAASv1I,GAAEu1I,IAAG,QAAQ/5I,GAAE,EAAEA,GAAE+5I,GAAEhwJ,OAAOiW,KAAI,IAAG,EAAGwE,GAAEkqE,QAAQqrE,GAAE/5I,KAAI,OAAM,EAAG,OAAM,CAAE,CAAhF,CAAkFtX,EAAEiE,EAAEwkL,kBAAiB,EAAGzoL,EAAEgmF,QAAQ9uD,IAAI,MAAMl3B,EAAEyiL,OAAO,IAAI,MAAMziL,EAAEyiL,OAAOziL,EAAEqB,OAAO,IAAI8Y,EAAEna,EAAEma,EAAEna,CAAC,CAAC,EAAMiE,WAAa8oF,OAAwB9oF,SAAW8oF,OAAwB9oF,gBAAkB,UAA7F,GAAsGA,EAAEwkL,eAAe,CAAC,KAAK,KAAK,IAAIxkL,EAAE+kL,iBAAiB/kL,EAAEyjL,mBAAmB3nB,KAAKv+I,EAAEqmK,OAAO5jL,EAAEglL,kBAAkB,EAAEhlL,EAAEilL,eAAe,SAASjlL,EAAEklL,gBAAgB,QAAQllL,EAAEmlL,iBAAiB,IAAInlL,EAAEolL,OAAOC,GAAErlL,EAAEslL,aAAajyK,EAAErT,EAAEulL,gBAAgBxqL,EAAEiF,EAAEwlL,aAAah4J,EAAExtB,EAAEylL,eAAer6K,EAAEpL,EAAE0lL,uBAAuBxpB,GAAE3+I,EAAE8hK,OAAO,CAAC,IAAI91K,EAAEgU,EAAE8hK,OAAO91K,EAAEmI,GAAGsf,MAAM,SAASzb,GAAG,IAAIlC,EAAEkC,EAAE5c,QAAQ,CAAC,EAAEojK,EAAE,GAAG,OAAO3oK,KAAKksL,KAAK,SAASznK,GAAG,GAAK,UAAUtO,EAAEnW,MAAMuyL,KAAK,WAAWp/C,eAAe,SAASh9H,EAAEnW,MAAMyxB,KAAK,QAAQgG,gBAAetN,EAAEk4J,aAAcriL,KAAK4S,OAAO,IAAI5S,KAAK4S,MAAM5I,OAAO,OAAM,EAAG,QAAQgwJ,EAAE,EAAEA,EAAEh6J,KAAK4S,MAAM5I,OAAOgwJ,IAAI2O,EAAEj8J,KAAK,CAAC2F,KAAKrS,KAAK4S,MAAMonJ,GAAGw4B,UAAUxyL,KAAKyyL,eAAet8K,EAAEm2J,OAAO,CAAC,EAAErsJ,IAAI,GAAGwE,IAAIzkB,KAAK,SAASykB,IAAI,GAAG,IAAIkkJ,EAAE3+J,OAAO,CAAC,IAAMgwJ,EAAE/5I,EAAEtX,EAAE+/J,EAAEC,EAAE,GAAG,GAAGunB,GAAE/tK,EAAE8H,QAAQ,CAAC,IAAInH,EAAEX,EAAE8H,OAAOy+I,EAAEr2J,KAAKq2J,EAAE8pB,WAAW,GAAG,iBAAiB1vK,EAAE,CAAC,GAAG,UAAUA,EAAE4vK,OAAO,OAAsB14B,EAAE0O,EAAEr2J,KAAK4N,EAAEyoJ,EAAE8pB,UAAU7pL,EAAEma,EAAEwE,YAAY4oK,GAAE/tK,EAAErC,QAAQqC,EAAErC,MAAM,CAACzL,KAAzE,cAAiF2lJ,EAAE/5I,EAAEtX,IAAI,GAAG,SAASma,EAAE4vK,OAAO,YAAYn/D,IAAI,iBAAiBzwG,EAAEvd,SAASmjK,EAAE+pB,eAAet8K,EAAEm2J,OAAO5D,EAAE+pB,eAAe3vK,EAAEvd,QAAQ,SAAS,SAASud,EAAE,YAAYywG,GAAG,CAAC,IAAIrrH,EAAEwgK,EAAE+pB,eAAe/6K,SAASgxJ,EAAE+pB,eAAe/6K,SAAS,SAAS+M,GAAGyrK,GAAEhoL,IAAIA,EAAEuc,EAAEikJ,EAAEr2J,KAAKq2J,EAAE8pB,WAAWj/D,GAAG,EAAE3mH,EAAEgxB,MAAM8qI,EAAEr2J,KAAKq2J,EAAE+pB,eAAe,MAAMvC,GAAE/tK,EAAEzK,WAAWyK,EAAEzK,UAAU,CAAC,SAAS67G,IAAIo1C,EAAE/5E,OAAO,EAAE,GAAGnqE,GAAG,CAAC,CAAC,CAAC,SAAS8uG,EAAE9uG,GAAGzkB,KAAK2yL,QAAQ,KAAK3yL,KAAK8lL,WAAU,EAAG9lL,KAAK4yL,YAAW,EAAG5yL,KAAK6yL,SAAQ,EAAG7yL,KAAK8yL,OAAO,KAAK9yL,KAAK+yL,WAAW,EAAE/yL,KAAKgzL,aAAa,GAAGhzL,KAAKizL,UAAU,EAAEjzL,KAAKkzL,OAAO,EAAElzL,KAAKmzL,WAAW,KAAKnzL,KAAKozL,cAAa,EAAGpzL,KAAKqzL,iBAAiB,CAACnoL,KAAK,GAAGuS,OAAO,GAAG41G,KAAK,CAAC,GAAG,SAAS5uG,GAAG,IAAIu1I,EAAEgP,EAAEvkJ,GAAGu1I,EAAE8Z,UAAU55J,SAAS8/I,EAAE8Z,WAAWrvJ,EAAEo8D,MAAMp8D,EAAEwxJ,QAAQjc,EAAE8Z,UAAU,MAAM9zK,KAAK2yL,QAAQ,IAAI1yK,EAAE+5I,IAAIh6J,KAAK2yL,QAAQW,SAAStzL,MAAMupF,QAAQywE,CAAC,EAAE0U,KAAK1uK,KAAKykB,GAAGzkB,KAAKuzL,WAAW,SAAS9uK,EAAEu1I,GAAG,GAAGh6J,KAAKozL,cAAclD,GAAElwL,KAAKupF,QAAQiqG,kBAAkB,CAAC,IAAIvzK,EAAEjgB,KAAKupF,QAAQiqG,iBAAiB/uK,QAAG,IAASxE,IAAIwE,EAAExE,EAAE,CAACjgB,KAAKozL,cAAa,EAAGpzL,KAAK6yL,SAAQ,EAAG,IAAIlqL,EAAE3I,KAAKgzL,aAAavuK,EAAEzkB,KAAKgzL,aAAa,GAAG,IAAItqB,EAAE1oK,KAAK2yL,QAAQ/0J,MAAMj1B,EAAE3I,KAAK+yL,YAAY/yL,KAAK8lL,WAAW,IAAI9lL,KAAK2yL,QAAQc,WAAWzzL,KAAK2yL,QAAQe,UAAU,CAAC,IAAI5wK,EAAE4lJ,EAAEr1C,KAAKsgE,OAAO3zL,KAAK8lL,YAAY9lL,KAAKgzL,aAAarqL,EAAEkjB,UAAU/I,EAAE9iB,KAAK+yL,YAAY/yL,KAAK+yL,WAAWjwK,GAAG4lJ,GAAGA,EAAEx9J,OAAOlL,KAAKizL,WAAWvqB,EAAEx9J,KAAKlB,QAAQ,IAAI9B,EAAElI,KAAK8lL,WAAW9lL,KAAKupF,QAAQ41C,SAASn/H,KAAKizL,WAAWjzL,KAAKupF,QAAQ41C,QAAQ,GAAGh9G,EAAEgI,EAAE6lK,YAAY,CAAC9iF,QAAQw7D,EAAEooB,SAASlkL,EAAEgnL,UAAUC,SAAS3rL,SAAE,GAAUgoL,GAAElwL,KAAKupF,QAAQ0sF,SAASjc,EAAE,CAAC,GAAGh6J,KAAKupF,QAAQ0sF,MAAMvN,EAAE1oK,KAAK2yL,SAAS3yL,KAAK2yL,QAAQc,UAAUzzL,KAAK2yL,QAAQe,UAAU,YAAY1zL,KAAK6yL,SAAQ,GAAInqB,OAAE,EAAO1oK,KAAKqzL,sBAAiB,CAAM,CAAC,OAAOrzL,KAAKupF,QAAQ1I,MAAM7gF,KAAKupF,QAAQ0sF,QAAQj2K,KAAKqzL,iBAAiBnoL,KAAKlL,KAAKqzL,iBAAiBnoL,KAAKyH,OAAO+1J,EAAEx9J,MAAMlL,KAAKqzL,iBAAiB51K,OAAOzd,KAAKqzL,iBAAiB51K,OAAO9K,OAAO+1J,EAAEjrJ,QAAQzd,KAAKqzL,iBAAiBhgE,KAAKq1C,EAAEr1C,MAAMrzH,KAAK4yL,aAAa1qL,IAAIgoL,GAAElwL,KAAKupF,QAAQ7xE,WAAWgxJ,GAAGA,EAAEr1C,KAAKqgE,UAAU1zL,KAAKupF,QAAQ7xE,SAAS1X,KAAKqzL,iBAAiBrzL,KAAK8yL,QAAQ9yL,KAAK4yL,YAAW,GAAI1qL,GAAGwgK,GAAGA,EAAEr1C,KAAKogE,QAAQzzL,KAAKmzL,aAAazqB,CAAC,CAAC1oK,KAAK6yL,SAAQ,CAAE,EAAE7yL,KAAK8zL,WAAW,SAASrvK,GAAGyrK,GAAElwL,KAAKupF,QAAQzpE,OAAO9f,KAAKupF,QAAQzpE,MAAM2E,GAAGtC,GAAGniB,KAAKupF,QAAQzpE,OAAOqK,EAAE6lK,YAAY,CAACc,SAASlkL,EAAEgnL,UAAU9zK,MAAM2E,EAAEovK,UAAS,GAAI,CAAC,CAAC,SAASlsL,EAAE8c,GAAG,IAAI9b,GAAG8b,EAAEA,GAAG,CAAC,GAAGqvJ,YAAYrvJ,EAAEqvJ,UAAUlnK,EAAEklL,iBAAiBv+D,EAAEm7C,KAAK1uK,KAAKykB,GAAGzkB,KAAKmzL,WAAWzqB,EAAE,WAAW1oK,KAAK+zL,aAAa/zL,KAAKg0L,cAAc,EAAE,WAAWh0L,KAAK+zL,YAAY,EAAE/zL,KAAK8iG,OAAO,SAASr+E,GAAGzkB,KAAK8yL,OAAOruK,EAAEzkB,KAAKmzL,YAAY,EAAEnzL,KAAK+zL,WAAW,WAAW,GAAG/zL,KAAK8lL,UAAU9lL,KAAKg0L,mBAAmB,CAAC,GAAGrrL,EAAE,IAAIw9K,eAAenmL,KAAKupF,QAAQqqF,kBAAkBjrK,EAAEirK,gBAAgB5zK,KAAKupF,QAAQqqF,iBAAiBlL,IAAI//J,EAAE25K,OAAOtiJ,GAAEhgC,KAAKg0L,aAAah0L,MAAM2I,EAAEk7K,QAAQ7jJ,GAAEhgC,KAAKi0L,YAAYj0L,OAAO2I,EAAE8H,KAAKzQ,KAAKupF,QAAQ2qG,oBAAoB,OAAO,MAAMl0L,KAAK8yL,QAAQpqB,GAAG1oK,KAAKupF,QAAQ4qG,uBAAuB,CAAC,IAAI1vK,EAAEzkB,KAAKupF,QAAQ4qG,uBAAuB,QAAQn6B,KAAKv1I,EAAE9b,EAAEm+K,iBAAiB9sB,EAAEv1I,EAAEu1I,GAAG,CAAIh6J,KAAKupF,QAAQuqF,WAAsDnrK,EAAEm+K,iBAAiB,QAAQ,SAAS9mL,KAAKkzL,OAAO,KAArFlzL,KAAKkzL,OAAOlzL,KAAKupF,QAAQuqF,UAAU,IAAyD,IAAInrK,EAAEqgL,KAAKhpL,KAAKupF,QAAQ2qG,oBAAoB,OAAOzvK,GAAGzkB,KAAKi0L,YAAYxvK,EAAElU,QAAQ,CAACm4J,GAAG,IAAI//J,EAAEg3H,QAAQ3/H,KAAKi0L,aAAa,CAAC,EAAEj0L,KAAKg0L,aAAa,WAAoN,IAAgBh6B,EAAzN,IAAIrxJ,EAAEigL,aAAajgL,EAAEg3H,OAAO,KAAK,KAAKh3H,EAAEg3H,OAAO3/H,KAAKi0L,eAAej0L,KAAKkzL,QAAQlzL,KAAKupF,QAAQuqF,UAAU9zK,KAAKupF,QAAQuqF,UAAUnrK,EAAEmgL,aAAa9+K,OAAOhK,KAAK8lL,WAAW9lL,KAAKupF,QAAQuqF,WAAW9zK,KAAKkzL,SAAkE,QAA1Cl5B,EAAgHrxJ,EAA5GogL,kBAAkB,mBAAmC,EAAU7uK,SAAS8/I,EAAEnuI,UAAUmuI,EAAEx5B,YAAY,KAAK,KAAQxgI,KAAKuzL,WAAW5qL,EAAEmgL,eAAe,EAAE9oL,KAAKi0L,YAAY,SAASxvK,GAAyBzkB,KAAK8zL,WAAW,IAAItjK,MAApC7nB,EAAEyrL,YAAY3vK,GAA+B,CAAC,CAAC,SAAS2V,EAAE3V,GAAG,IAAI9b,EAAE+/J,GAAGjkJ,EAAEA,GAAG,CAAC,GAAGqvJ,YAAYrvJ,EAAEqvJ,UAAUlnK,EAAEilL,gBAAgBt+D,EAAEm7C,KAAK1uK,KAAKykB,GAAG,IAAI3B,SAAsBu/J,WAApB,IAA+BriL,KAAK8iG,OAAO,SAASr+E,GAAGzkB,KAAK8yL,OAAOruK,EAAEikJ,EAAEjkJ,EAAEk0C,OAAOl0C,EAAE+gK,aAAa/gK,EAAE4vK,SAASvxK,IAAIna,EAAE,IAAI05K,YAAYC,OAAOtiJ,GAAEhgC,KAAKg0L,aAAah0L,MAAM2I,EAAEk7K,QAAQ7jJ,GAAEhgC,KAAKi0L,YAAYj0L,OAAO2I,EAAE,IAAI2rL,eAAet0L,KAAKmzL,YAAY,EAAEnzL,KAAKmzL,WAAW,WAAWnzL,KAAK8lL,WAAW9lL,KAAKupF,QAAQ41C,WAAWn/H,KAAKizL,UAAUjzL,KAAKupF,QAAQ41C,UAAUn/H,KAAK+zL,YAAY,EAAE/zL,KAAK+zL,WAAW,WAAW,IAAItvK,EAAEzkB,KAAK8yL,OAAO,GAAG9yL,KAAKupF,QAAQuqF,UAAU,CAAC,IAAI9Z,EAAEzwJ,KAAK0zB,IAAIj9B,KAAKkzL,OAAOlzL,KAAKupF,QAAQuqF,UAAU9zK,KAAK8yL,OAAOpxE,MAAMj9F,EAAEikJ,EAAEgG,KAAKjqJ,EAAEzkB,KAAKkzL,OAAOl5B,EAAE,CAAC,IAAI/5I,EAAEtX,EAAE4rL,WAAW9vK,EAAEzkB,KAAKupF,QAAQirG,UAAU1xK,GAAG9iB,KAAKg0L,aAAa,CAAC5oK,OAAO,CAAC5mB,OAAOyb,IAAI,EAAEjgB,KAAKg0L,aAAa,SAASvvK,GAAGzkB,KAAKkzL,QAAQlzL,KAAKupF,QAAQuqF,UAAU9zK,KAAK8lL,WAAW9lL,KAAKupF,QAAQuqF,WAAW9zK,KAAKkzL,QAAQlzL,KAAK8yL,OAAOpxE,KAAK1hH,KAAKuzL,WAAW9uK,EAAE2G,OAAO5mB,OAAO,EAAExE,KAAKi0L,YAAY,WAAWj0L,KAAK8zL,WAAWnrL,EAAEmX,MAAM,CAAC,CAAC,SAAS9H,EAAEyM,GAAG,IAAIxE,EAAEszG,EAAEm7C,KAAK1uK,KAAKykB,EAAEA,GAAG,CAAC,GAAGzkB,KAAK8iG,OAAO,SAASr+E,GAAG,OAAOxE,EAAEwE,EAAEzkB,KAAKmzL,YAAY,EAAEnzL,KAAKmzL,WAAW,WAAW,IAAInzL,KAAK8lL,UAAU,CAAC,IAAIrhK,EAAEu1I,EAAEh6J,KAAKupF,QAAQuqF,UAAU,OAAO9Z,GAAGv1I,EAAExE,EAAE4L,UAAU,EAAEmuI,GAAG/5I,EAAEA,EAAE4L,UAAUmuI,KAAKv1I,EAAExE,EAAEA,EAAE,IAAIjgB,KAAK8lL,WAAW7lK,EAAEjgB,KAAKuzL,WAAW9uK,EAAE,CAAC,CAAC,CAAC,SAASqkJ,GAAErkJ,GAAG8uG,EAAEm7C,KAAK1uK,KAAKykB,EAAEA,GAAG,CAAC,GAAG,IAAIu1I,EAAE,GAAG/5I,GAAE,EAAGtX,GAAE,EAAG3I,KAAKy0L,MAAM,WAAWlhE,EAAEm2C,UAAU+qB,MAAM9pB,MAAM3qK,KAAKopK,WAAWppK,KAAK8yL,OAAO2B,OAAO,EAAEz0L,KAAK00L,OAAO,WAAWnhE,EAAEm2C,UAAUgrB,OAAO/pB,MAAM3qK,KAAKopK,WAAWppK,KAAK8yL,OAAO4B,QAAQ,EAAE10L,KAAK8iG,OAAO,SAASr+E,GAAGzkB,KAAK8yL,OAAOruK,EAAEzkB,KAAK8yL,OAAOlgD,GAAG,OAAO5yI,KAAK20L,aAAa30L,KAAK8yL,OAAOlgD,GAAG,MAAM5yI,KAAK40L,YAAY50L,KAAK8yL,OAAOlgD,GAAG,QAAQ5yI,KAAK60L,aAAa,EAAE70L,KAAK80L,iBAAiB,WAAWnsL,GAAG,IAAIqxJ,EAAEhwJ,SAAShK,KAAK8lL,WAAU,EAAG,EAAE9lL,KAAKmzL,WAAW,WAAWnzL,KAAK80L,mBAAmB96B,EAAEhwJ,OAAOhK,KAAKuzL,WAAWv5B,EAAEznC,SAAStyG,GAAE,CAAE,EAAEjgB,KAAK20L,YAAY30J,GAAE,SAASvb,GAAG,IAAIu1I,EAAEttJ,KAAK,iBAAiB+X,EAAEA,EAAEA,EAAE9L,SAAS3Y,KAAKupF,QAAQirG,WAAWv0K,IAAIA,GAAE,EAAGjgB,KAAK80L,mBAAmB90L,KAAKuzL,WAAWv5B,EAAEznC,SAAS,OAAO9tG,GAAGzkB,KAAK60L,aAAapwK,EAAE,CAAC,EAAEzkB,MAAMA,KAAK60L,aAAa70J,GAAE,SAASvb,GAAGzkB,KAAK+0L,iBAAiB/0L,KAAK8zL,WAAWrvK,EAAE,EAAEzkB,MAAMA,KAAK40L,WAAW50J,GAAE,WAAWhgC,KAAK+0L,iBAAiBpsL,GAAE,EAAG3I,KAAK20L,YAAY,GAAG,EAAE30L,MAAMA,KAAK+0L,eAAe/0J,GAAE,WAAWhgC,KAAK8yL,OAAOkC,eAAe,OAAOh1L,KAAK20L,aAAa30L,KAAK8yL,OAAOkC,eAAe,MAAMh1L,KAAK40L,YAAY50L,KAAK8yL,OAAOkC,eAAe,QAAQh1L,KAAK60L,aAAa,EAAE70L,KAAK,CAAC,SAASigB,EAAE4f,GAAG,IAAI33B,EAAEia,EAAEwmJ,EAAEhgK,EAAEY,KAAKm1K,IAAI,EAAE,IAAIhW,GAAG//J,EAAEma,EAAE,mDAAmDywG,EAAE,qNAAqNymC,EAAEh6J,KAAKigB,EAAE,EAAEkK,EAAE,EAAEhU,GAAE,EAAGsO,GAAE,EAAG9c,GAAE,GAAGyyB,EAAE,CAAClvB,KAAK,GAAGuS,OAAO,GAAG41G,KAAK,CAAC,GAAG,GAAG68D,GAAErwJ,EAAEghD,MAAM,CAAC,IAAI7oE,EAAE6nB,EAAEghD,KAAKhhD,EAAEghD,KAAK,SAASp8D,IAAG,GAAG2V,EAAE3V,GAAE1iB,KAAI+mK,QAAQ,CAAC,GAAGA,IAAI,IAAI1uI,EAAElvB,KAAKlB,OAAO,OAAOiW,GAAGwE,GAAEvZ,KAAKlB,OAAO61B,EAAEs/F,SAASl/G,EAAE4f,EAAEs/F,QAAQh9G,EAAEsiK,SAASrqJ,EAAElvB,KAAKkvB,EAAElvB,KAAK,GAAG8M,EAAEoiB,EAAE4/H,GAAG,CAAC,CAAC,CAAC,SAAS9vE,EAAEzlE,IAAG,MAAM,WAAWob,EAAEozF,eAAe,KAAKxuG,GAAEvD,KAAK,IAAI5f,OAAO,IAAImjB,GAAEza,QAAQ,IAAIya,GAAE,GAAGza,MAAM,CAAC,SAAS8+J,IAAI,OAAO1uI,GAAGuuI,IAAIssB,GAAE,YAAY,wBAAwB,6DAA6DroL,EAAEmlL,iBAAiB,KAAKppB,GAAE,GAAI9oI,EAAEozF,iBAAiB74F,EAAElvB,KAAKkvB,EAAElvB,KAAKzI,OAAO,SAASgiB,IAAG,OAAOylE,EAAEzlE,GAAE,IAAI1iB,MAAK,WAAW,GAAIq4B,EAAoF,GAAGpZ,MAAMC,QAAQmZ,EAAElvB,KAAK,IAAI,CAAC,QAAQ8uJ,GAAE,EAAEj4J,MAAKi4J,GAAE5/H,EAAElvB,KAAKlB,OAAOgwJ,KAAI5/H,EAAElvB,KAAK8uJ,IAAG7nJ,QAAQsS,IAAG2V,EAAElvB,KAAK0jF,OAAO,EAAE,EAAE,MAAMx0D,EAAElvB,KAAKiH,QAAQsS,IAAzM,SAASA,GAAEA,GAAEu1I,IAAGk2B,GAAErwJ,EAAEqzF,mBAAmBzuG,GAAEob,EAAEqzF,gBAAgBzuG,GAAEu1I,KAAIryJ,GAAE+E,KAAK+X,GAAE,CAAiI,CAAnO,GAAuO,WAAW,IAAI2V,IAAIyF,EAAEmzF,SAASnzF,EAAEszF,gBAAgBtzF,EAAE8E,UAAU,OAAOvK,EAAE,SAAS3V,GAAEA,GAAEu1I,IAAG,IAAI/5I,GAAEtX,GAAEk3B,EAAEmzF,OAAO,CAAC,EAAE,GAAG,IAAI/yG,GAAE,EAAEA,GAAEwE,GAAEza,OAAOiW,KAAI,CAAC,IAAIyoJ,GAAEzoJ,GAAE6C,GAAE2B,GAAExE,IAAG4f,EAAEmzF,SAAS01C,GAAEzoJ,IAAGtY,GAAEqC,OAAO,iBAAiBrC,GAAEsY,KAAI4f,EAAE8E,YAAY7hB,GAAE+c,EAAE8E,UAAU7hB,GAAE4lJ,KAAI5lJ,GAAEkd,GAAE0oI,GAAE5lJ,IAAG,mBAAmB4lJ,IAAG//J,GAAE+/J,IAAG//J,GAAE+/J,KAAI,GAAG//J,GAAE+/J,IAAGh8J,KAAKoW,KAAIna,GAAE+/J,IAAG5lJ,EAAC,CAAC,OAAO+c,EAAEmzF,SAAS/yG,GAAEtY,GAAEqC,OAAOirL,GAAE,gBAAgB,gBAAgB,6BAA6BttL,GAAEqC,OAAO,sBAAsBiW,GAAEkK,EAAE6vI,IAAG/5I,GAAEtY,GAAEqC,QAAQirL,GAAE,gBAAgB,eAAe,4BAA4BttL,GAAEqC,OAAO,sBAAsBiW,GAAEkK,EAAE6vI,KAAIrxJ,EAAC,CAAC,IAAIqxJ,GAAE,EAAE,OAAC5/H,EAAElvB,KAAKlB,QAAQgX,MAAMC,QAAQmZ,EAAElvB,KAAK,KAAKkvB,EAAElvB,KAAKkvB,EAAElvB,KAAKzK,IAAIgkB,IAAGu1I,GAAE5/H,EAAElvB,KAAKlB,QAAQowB,EAAElvB,KAAKuZ,GAAE2V,EAAElvB,KAAK,GAAG20B,EAAEmzF,QAAQ54F,EAAEi5F,OAAOj5F,EAAEi5F,KAAKh4G,OAAO1T,IAAUwiB,GAAG6vI,GAAE5/H,CAAC,CAAvrB,EAA0rB,CAAC,SAASr4B,KAAI,OAAO89B,EAAEmzF,QAAQ,IAAIrrH,GAAEqC,MAAM,CAAC,SAASg2B,GAAEvb,GAAEu1I,IAAG,OAAO/5I,GAAEwE,GAAEob,EAAEswJ,4BAAuB,IAAStwJ,EAAEszF,cAAclzG,MAAK4f,EAAEszF,cAAclzG,IAAG4f,EAAEswJ,sBAAsBlwK,MAAI,KAAM4f,EAAEszF,cAAclzG,KAAI4f,EAAEszF,eAAe,SAAS6mC,IAAG,SAASA,IAAG,UAAUA,IAAG,UAAUA,KAAI,SAASv1I,IAAG,GAAG3B,EAAEwgF,KAAK7+E,IAAG,CAAC,IAAIu1I,GAAEk7B,WAAWzwK,IAAG,GAAGikJ,EAAE1O,IAAGA,GAAErxJ,EAAE,OAAM,CAAE,CAAC,OAAM,CAAE,CAA3E,CAA6EqxJ,IAAGk7B,WAAWl7B,IAAGzmC,EAAEjwB,KAAK02D,IAAG,IAAIzgG,KAAKygG,IAAG,KAAKA,GAAE,KAAKA,IAAGA,GAAE,IAAI/5I,EAAC,CAAC,SAASg1K,GAAExwK,GAAEu1I,GAAE/5I,GAAEtX,IAAG,IAAI+/J,GAAE,CAACl2J,KAAKiS,GAAE8gC,KAAKy0G,GAAEzpJ,QAAQ0P,SAAG,IAAStX,KAAI+/J,GAAEh7G,IAAI/kD,IAAGyxB,EAAE3c,OAAO/Q,KAAKg8J,GAAE,CAAC1oK,KAAK49B,MAAM,SAASnZ,GAAEu1I,GAAE/5I,IAA0B,GAAG4f,EAAEyxJ,UAAUzxJ,EAAEyxJ,QAAQ,SAAS7sK,GAAEu1I,IAAGv1I,GAAEA,GAAEoH,UAAU,EAAE,SAAS,IAAI5L,GAAE,IAAI49E,OAAOsrE,GAAEnP,IAAG,UAAUmP,GAAEnP,IAAG,MAAMrxJ,IAAG8b,GAAEA,GAAE7Q,QAAQqM,GAAE,KAAKxT,MAAM,MAAMi8J,GAAEjkJ,GAAEhY,MAAM,MAA4C,GAAG,IAAI9D,GAAEqB,QAA7C,EAAE0+J,GAAE1+J,QAAQ0+J,GAAE,GAAG1+J,OAAOrB,GAAE,GAAGqB,OAA0B,MAAM,KAAK,QAAQ9B,GAAE,EAAEia,GAAE,EAAEA,GAAExZ,GAAEqB,OAAOmY,KAAI,OAAOxZ,GAAEwZ,IAAG,IAAIja,KAAI,OAAOA,IAAGS,GAAEqB,OAAO,EAAE,OAAO,IAAI,CAA3R,CAA6Rya,GAAvUob,EAAE0xJ,WAAW,MAAgU5oB,GAAE,EAAG9oI,EAAEsxJ,UAAUjB,GAAErwJ,EAAEsxJ,aAAatxJ,EAAEsxJ,UAAUtxJ,EAAEsxJ,UAAU1sK,IAAG2V,EAAEi5F,KAAK89D,UAAUtxJ,EAAEsxJ,eAAe,CAAC,IAAIzoB,GAAE,SAASjkJ,GAAEu1I,GAAE/5I,GAAEtX,GAAE+/J,IAAG,IAAI5lJ,GAAE5a,GAAEia,GAAEwmJ,GAAED,GAAEA,IAAG,CAAC,IAAI,KAAK,IAAI,IAAI97J,EAAEuoL,WAAWvoL,EAAEwoL,UAAU,QAAQ7hE,GAAE,EAAEA,GAAEm1C,GAAE1+J,OAAOupH,KAAI,CAAC,IAAIppG,GAAEu+I,GAAEn1C,IAAGp9G,GAAE,EAAExO,GAAE,EAAEyyB,GAAE,EAAEjY,QAAE,EAAO,QAAQnK,EAAE,IAAIi6K,GAAE,CAACoD,SAAS1sL,GAAEwoL,UAAUhnK,GAAEmnK,QAAQt3B,GAAE76B,QAAQ,KAAKvhG,MAAMnZ,IAAGqkJ,EAAE,EAAEA,EAAE9wJ,EAAE9M,KAAKlB,OAAO8+J,IAAI,GAAG7oJ,IAAGiqE,EAAElyE,EAAE9M,KAAK49J,IAAI1uI,SAAQ,CAAC,IAAIr4B,GAAEiW,EAAE9M,KAAK49J,GAAG9+J,OAAOrC,IAAG5F,QAAE,IAASogB,GAAE,EAAEpgB,KAAIoU,IAAG5M,KAAK60E,IAAIr8E,GAAEogB,IAAGA,GAAEpgB,IAAGogB,GAAEpgB,EAAC,CAAC,EAAEiW,EAAE9M,KAAKlB,SAASrC,IAAGqQ,EAAE9M,KAAKlB,OAAOowB,UAAI,IAASlyB,IAAGiO,IAAGjO,WAAK,IAASygK,IAAGA,GAAEhhK,KAAI,KAAKA,KAAIO,GAAEiO,GAAE2M,GAAEqH,GAAEw+I,GAAEhhK,GAAE,CAAC,MAAM,CAAC2tL,cAAcz1J,EAAEsxJ,UAAUruK,IAAGyyK,cAAczyK,GAAE,CAAte,CAAwe2B,GAAEob,EAAEyxJ,QAAQzxJ,EAAEozF,eAAepzF,EAAEw1J,SAASx1J,EAAE21J,mBAAmB9sB,GAAE4sB,WAAWz1J,EAAEsxJ,UAAUzoB,GAAE6sB,eAAe5sB,GAAE,EAAG9oI,EAAEsxJ,UAAUvkL,EAAEmlL,kBAAkB33J,EAAEi5F,KAAK89D,UAAUtxJ,EAAEsxJ,SAAS,CAAC,IAAIruK,GAAEkmJ,EAAEnpI,GAAG,OAAOA,EAAEs/F,SAASt/F,EAAEmzF,QAAQlwG,GAAEq8G,UAAUj3H,EAAEuc,GAAEtC,EAAE,IAAI8vK,GAAEnvK,IAAGsX,EAAEjY,EAAEyb,MAAM11B,EAAE8xJ,GAAE/5I,IAAG6oJ,IAAI3yJ,EAAE,CAACk9G,KAAK,CAACogE,QAAO,IAAKr5J,GAAG,CAACi5F,KAAK,CAACogE,QAAO,GAAI,EAAEzzL,KAAKyzL,OAAO,WAAW,OAAOt9K,CAAC,EAAEnW,KAAKy0L,MAAM,WAAWt+K,GAAE,EAAGgM,EAAEsiK,QAAQv8K,EAAEgoL,GAAErwJ,EAAEo2I,OAAO,GAAG/tK,EAAE2jB,UAAU1J,EAAEszK,eAAe,EAAEz1L,KAAK00L,OAAO,WAAW16B,EAAEs5B,SAAST,SAAS18K,GAAE,EAAG6jJ,EAAEs5B,SAASC,WAAWrrL,GAAE,IAAK2gC,WAAWmxH,EAAE06B,OAAO,EAAE,EAAE10L,KAAK0zL,QAAQ,WAAW,OAAOjvK,CAAC,EAAEzkB,KAAKykL,MAAM,WAAWhgK,GAAE,EAAGtC,EAAEsiK,QAAQrqJ,EAAEi5F,KAAKqgE,SAAQ,EAAGxD,GAAErwJ,EAAEnoB,WAAWmoB,EAAEnoB,SAAS0iB,GAAGlyB,EAAE,EAAE,CAAC,CAAC,SAASihK,GAAE1kJ,GAAG,OAAOA,EAAE7Q,QAAQ,sBAAsB,OAAO,CAAC,SAASq+K,GAAEt2G,GAAG,IAAIstC,EAAE4/C,GAAGltF,EAAEA,GAAG,CAAC,GAAGw1G,UAAUuE,EAAE/5G,EAAE21G,QAAQqE,EAAEh6G,EAAE05G,SAASrpJ,EAAE2vC,EAAEkF,KAAK+0G,EAAEj6G,EAAEwjD,QAAQ02D,EAAEl6G,EAAEm6G,SAASC,EAAE9sE,EAAWttC,QAAE41G,UAA8B,IAAI51G,EAAE41G,UAAU,QAAG,IAAS51G,EAAE81G,aAAasE,EAAEp6G,EAAE81G,aAAa,iBAAiB5oB,IAAG,EAAGj8J,EAAEwkL,eAAeziG,QAAQk6E,MAAMA,EAAE,KAAK8sB,IAAI9sB,EAAE,MAAM,IAAIr4I,MAAM,wCAAuC,IAAKmlK,EAAEA,EAAE,KAAK,iBAAiBA,IAAG,EAAG/oL,EAAEwkL,eAAeziG,QAAQgnG,MAAMA,GAAE,GAAI,OAAOD,GAAG,OAAOA,GAAG,SAASA,IAAIA,EAAE,MAAM,IAAIM,EAAE,EAAEpqB,GAAE,EAAG5rK,KAAK49B,MAAM,SAASj1B,EAAEqxJ,EAAE/5I,IAAG,GAAG,iBAAiBtX,EAAE,MAAM,IAAI6nB,MAAM,0BAA0B,IAAIk4I,EAAE//J,EAAEqB,OAAOya,EAAEokJ,EAAE7+J,OAAO8Y,EAAE4yK,EAAE1rL,OAAO9B,EAAEytL,EAAE3rL,OAAOmY,GAAE+tK,GAAElkJ,GAAG28H,GAAE,GAAGp1C,GAAE,GAAGppG,GAAE,GAAGhU,GAAE6/K,EAAE,EAAE,IAAIrtL,EAAE,OAAO0kK,KAAI,GAAG1xF,EAAEq3C,SAASgnC,EAAE,CAAC,IAAIryJ,GAAEgB,EAAE8D,MAAMipL,GAAG,GAAGjpL,MAAMo8J,GAAGzuI,GAAE,GAAGpiB,GAAE,CAAC,EAAE8wJ,IAAE,EAAG,QAAQ/mK,MAAK4F,GAAE,CAAC,IAAIk4B,GAAEl4B,GAAE5F,IAAGmuL,GAAEv0G,EAAEu3C,mBAAmBrzF,GAAE87C,EAAEu3C,gBAAgBrzF,GAAE99B,KAAI,IAAImoF,GAAErqD,GAAEG,GAAEhoB,GAAE6nB,KAAI,EAAE,IAAI,EAAEG,KAAI8oI,IAAE,EAAG5+E,GAAErqD,GAAE,IAAIG,IAAGhoB,GAAE6nB,IAAGG,GAAE,EAAE5F,GAAEltB,SAASg9E,KAAIA,GAAEA,GAAE,IAAIlqD,GAAE5F,GAAE1tB,KAAKw9E,GAAE,CAAC,GAAG4+E,GAAE,CAAC,IAAImsB,GAAEtsL,EAAE8D,MAAMipL,GAAGT,GAAE,GAAG76J,GAAElZ,KAAK2nJ,GAAGlgK,EAAEssL,GAAE/zK,KAAKw0K,EAAE,CAAC,CAAC,GAAGG,IAAG,IAAKA,IAAG,IAAKltL,EAAEgmF,QAAQs6B,GAAG,CAAC,QAAQr8G,GAAEjE,EAAE8D,MAAMipL,GAAGzD,GAAE,EAAEA,GAAErlL,GAAE5C,OAAOioL,KAAI,CAAC,GAAU+D,IAAP7rK,GAAEvd,GAAEqlL,KAAQjoL,OAAOioL,KAAIrlL,GAAE5C,OAAO,EAAEgsL,GAAGN,EAAE1rL,eAAeiW,GAAE,OAAOotJ,KAAI,IAAIsoB,GAAGxrK,GAAE0B,UAAU,EAAE3jB,KAAKytL,EAAE,CAAC,GAAGxzK,IAAG,GAAGwmJ,GAAE,GAAGstB,GAAE9rK,GAAE1d,MAAMo8J,IAAIqH,KAAItE,EAAE,OAAOyB,UAAS4oB,GAAE9rK,GAAE1d,MAAMo8J,IAAI,GAAG+sB,GAAGA,GAAG3D,GAAE,OAAOtpB,GAAEA,GAAEhwG,MAAM,EAAEi9H,GAAGvoB,IAAE,EAAG,CAAC,CAAC,OAAOA,IAAG,CAAC,QAAQrE,GAAErgK,EAAEgmF,QAAQk6E,EAAEmtB,GAAGE,GAAEvtL,EAAEgmF,QAAQ+mG,EAAEM,GAAGG,GAAE,IAAIt4F,OAAOsrE,GAAE4sB,GAAG5sB,GAAElgD,GAAG,KAAKk/C,GAAEx/J,EAAEgmF,QAAQs6B,EAAE+sE,KAAK,GAAGrtL,EAAEqtL,KAAK/sE,EAAE,GAAG0sE,GAAG,IAAIxrK,GAAEngB,QAAQrB,EAAEkjB,UAAUmqK,EAAEA,EAAE9tL,KAAKytL,EAAE,CAAC,IAAG,IAAKO,GAAE,OAAO7oB,KAAU6oB,GAAEvtL,EAAEgmF,QAAQ+mG,EAAlBM,EAAEE,GAAEpzK,GAAmBkmJ,GAAErgK,EAAEgmF,QAAQk6E,EAAEmtB,EAAE,UAAS,IAAKhtB,KAAIA,GAAEktB,KAAG,IAAKA,IAAG/rK,GAAEzd,KAAK/D,EAAEkjB,UAAUmqK,EAAEhtB,KAAUA,GAAErgK,EAAEgmF,QAAQk6E,EAAlBmtB,EAAEhtB,GAAEvkJ,OAAuB,CAAC,IAAG,IAAKyxK,GAAE,MAAM,GAAG/rK,GAAEzd,KAAK/D,EAAEkjB,UAAUmqK,EAAEE,KAAIjtB,GAAEitB,GAAEpzK,GAAGX,KAAI+tJ,KAAItE,GAAG,OAAOyB,KAAI,GAAGuoB,GAAGjtB,GAAE3+J,QAAQ4rL,EAAE,OAAOvoB,IAAE,EAAG,MAAM,IAAIlF,GAAE6tB,EAAEA,MAAM,CAAC,IAAG,KAAM7tB,GAAEx/J,EAAEgmF,QAAQs6B,EAAEk/C,GAAE,IAAI,OAAOloJ,IAAGszG,GAAE7mH,KAAK,CAAC8F,KAAK,SAAS+yC,KAAK,gBAAgBh1C,QAAQ,4BAA4Bm9C,IAAIi7G,GAAE3+J,OAAOhC,MAAMguL,IAAI3pB,IAAI,GAAGlE,KAAIO,EAAE,EAAE,OAAO2D,EAAE1jK,EAAEkjB,UAAUmqK,EAAE7tB,IAAGv0J,QAAQuiL,GAAEltE,IAAI,GAAGA,IAAI8sE,GAAGptL,EAAEw/J,GAAE,KAAK4tB,GAAG,GAAG9sE,IAAI8sE,GAAG,IAAI5tB,IAAGx/J,EAAEw/J,GAAE,KAAK4tB,EAAE,EAAC,IAAK/sB,IAAGA,GAAEb,GAAE,IAAIa,GAAErgK,EAAEgmF,QAAQk6E,EAAEV,GAAE,KAAI,IAAK+tB,IAAGA,GAAE/tB,GAAE,IAAI+tB,GAAEvtL,EAAEgmF,QAAQ+mG,EAAEvtB,GAAE,IAAI,IAAIkB,GAAE0C,GAAE,IAAKmqB,GAAEltB,GAAEz/J,KAAK0zB,IAAI+rI,GAAEktB,KAAI,GAAGvtL,EAAEytL,OAAOjuB,GAAE,EAAEkB,GAAE5kJ,KAAKokJ,EAAE,CAAC1+I,GAAEzd,KAAK/D,EAAEkjB,UAAUmqK,EAAE7tB,IAAGv0J,QAAQuiL,GAAEltE,IAAItgH,EAAEqtL,EAAE7tB,GAAE,EAAEkB,GAAE5kJ,KAAKwkG,IAAIk/C,GAAEx/J,EAAEgmF,QAAQs6B,EAAE+sE,IAAIhtB,GAAErgK,EAAEgmF,QAAQk6E,EAAEmtB,GAAGE,GAAEvtL,EAAEgmF,QAAQ+mG,EAAEM,GAAG,KAAK,CAAC,IAAIvoJ,GAAEs+H,EAAEmqB,IAAG,GAAGvtL,EAAEkjB,UAAUs8I,GAAE,EAAE16H,GAAE06H,GAAE,EAAE16H,GAAE3qB,KAAK4yK,EAAE,CAAC,GAAGvrK,GAAEzd,KAAK/D,EAAEkjB,UAAUmqK,EAAE7tB,IAAGv0J,QAAQuiL,GAAEltE,IAAIggD,GAAEd,GAAE,EAAE16H,GAAE3qB,GAAGkmJ,GAAErgK,EAAEgmF,QAAQk6E,EAAEmtB,GAAG7tB,GAAEx/J,EAAEgmF,QAAQs6B,EAAE+sE,GAAG7zK,KAAI+tJ,KAAItE,GAAG,OAAOyB,KAAI,GAAGuoB,GAAGjtB,GAAE3+J,QAAQ4rL,EAAE,OAAOvoB,IAAE,GAAI,KAAK,CAAC95C,GAAE7mH,KAAK,CAAC8F,KAAK,SAAS+yC,KAAK,gBAAgBh1C,QAAQ,8CAA8Cm9C,IAAIi7G,GAAE3+J,OAAOhC,MAAMguL,IAAI7tB,IAAG,OAAOA,IAAG,CAAC,OAAOkE,IAAI,SAAS4pB,GAAExxK,IAAGkkJ,GAAEj8J,KAAK+X,IAAGtO,GAAE6/K,CAAC,CAAC,SAASjqB,EAAEtnJ,IAAG,IAAIu1I,GAAE,EAAE,IAAG,IAAKv1I,GAAE,CAAC,IAAIxE,GAAEtX,EAAEkjB,UAAUs8I,GAAE,EAAE1jJ,IAAGxE,IAAG,KAAKA,GAAE3e,SAAS04J,GAAE/5I,GAAEjW,OAAO,CAAC,OAAOgwJ,EAAC,CAAC,SAASqS,EAAE5nJ,IAAG,OAAOxE,UAAI,IAASwE,KAAIA,GAAE9b,EAAEkjB,UAAUmqK,IAAI7rK,GAAEzd,KAAK+X,IAAGuxK,EAAEttB,EAAEutB,GAAE9rK,IAAGhI,IAAG+tJ,MAAK7C,IAAG,CAAC,SAASpE,GAAExkJ,IAAGuxK,EAAEvxK,GAAEwxK,GAAE9rK,IAAGA,GAAE,GAAG+rK,GAAEvtL,EAAEgmF,QAAQ+mG,EAAEM,EAAE,CAAC,SAAS3oB,GAAE5oJ,IAAG,MAAM,CAACvZ,KAAKy9J,GAAElrJ,OAAO81G,GAAEF,KAAK,CAAC89D,UAAUtoB,EAAEwtB,UAAUX,EAAEhC,QAAQ9nB,EAAE0qB,YAAY7xK,GAAEkvK,OAAOx9K,IAAG6jJ,GAAG,IAAI,CAAC,SAASkW,KAAIlkI,EAAEqhI,MAAK1E,GAAE,GAAGp1C,GAAE,EAAE,CAAC,EAAEvzH,KAAKykL,MAAM,WAAW7Y,GAAE,CAAE,EAAE5rK,KAAKy1L,aAAa,WAAW,OAAOO,CAAC,CAAC,CAAC,SAASj0L,EAAE0iB,GAAG,IAAIu1I,EAAEv1I,EAAEvZ,KAAK+U,EAAE/X,EAAE8xJ,EAAE82B,UAAUnoL,GAAE,EAAG,GAAGqxJ,EAAEl6I,MAAMG,EAAE4wK,UAAU72B,EAAEl6I,MAAMk6I,EAAE3nJ,WAAI,GAAU2nJ,EAAE9sD,SAAS8sD,EAAE9sD,QAAQhiG,KAAK,CAAC,IAAIw9J,EAAE,CAAC+b,MAAM,WAAW97K,GAAE,EAAGk3B,EAAEm6H,EAAE82B,SAAS,CAAC5lL,KAAK,GAAGuS,OAAO,GAAG41G,KAAK,CAACqgE,SAAQ,IAAK,EAAEe,MAAMvqG,EAAEwqG,OAAOxqG,GAAG,GAAGgmG,GAAEjwK,EAAEywK,UAAU,CAAC,QAAQ5tK,EAAE,EAAEA,EAAEk3I,EAAE9sD,QAAQhiG,KAAKlB,SAASiW,EAAEywK,SAAS,CAACxlL,KAAK8uJ,EAAE9sD,QAAQhiG,KAAK4X,GAAGrF,OAAOu8I,EAAE9sD,QAAQzvF,OAAO41G,KAAK2mC,EAAE9sD,QAAQmmB,MAAMq1C,IAAI//J,GAAGma,YAAYk3I,EAAE9sD,OAAO,MAAMgjF,GAAEjwK,EAAE0wK,aAAa1wK,EAAE0wK,UAAU32B,EAAE9sD,QAAQw7D,EAAE1O,EAAE3nJ,aAAa2nJ,EAAE9sD,QAAQ,CAAC8sD,EAAE65B,WAAWlrL,GAAGk3B,EAAEm6H,EAAE82B,SAAS92B,EAAE9sD,QAAQ,CAAC,SAASrtE,EAAEpb,EAAEu1I,GAAG,IAAI/5I,EAAE/X,EAAEuc,GAAGyrK,GAAEjwK,EAAE2wK,eAAe3wK,EAAE2wK,aAAa52B,GAAG/5I,EAAEs2K,mBAAmBruL,EAAEuc,EAAE,CAAC,SAASylE,IAAI,MAAM,IAAI15D,MAAM,mBAAmB,CAAC,SAASw4I,EAAEvkJ,GAAG,GAAG,iBAAiBA,GAAG,OAAOA,EAAE,OAAOA,EAAE,IAAIu1I,EAAEh5I,MAAMC,QAAQwD,GAAG,GAAG,CAAC,EAAE,QAAQxE,KAAKwE,EAAEu1I,EAAE/5I,GAAG+oJ,EAAEvkJ,EAAExE,IAAI,OAAO+5I,CAAC,CAAC,SAASh6H,GAAEvb,EAAEu1I,GAAG,OAAO,WAAWv1I,EAAEkmJ,MAAM3Q,EAAEoP,UAAU,CAAC,CAAC,SAAS8mB,GAAEzrK,GAAG,MAAM,mBAAmBA,CAAC,CAAC,OAAOtC,IAAIgI,EAAEsmK,UAAU,SAAShsK,GAAG,IAAIu1I,EAAEv1I,EAAEvZ,KAAuD,QAAlD,IAAS0B,EAAEgnL,WAAW55B,IAAIptJ,EAAEgnL,UAAU55B,EAAE82B,UAAa,iBAAiB92B,EAAEt8G,MAAMvzB,EAAE6lK,YAAY,CAACc,SAASlkL,EAAEgnL,UAAU1mF,QAAQtgG,EAAEgxB,MAAMo8H,EAAEt8G,MAAMs8G,EAAEz0J,QAAQsuL,UAAS,SAAG,GAAU1pK,EAAE+/J,MAAMlwB,EAAEt8G,iBAAiBwsI,MAAMlwB,EAAEt8G,iBAAiBn9C,OAAO,CAAC,IAAI0f,EAAErT,EAAEgxB,MAAMo8H,EAAEt8G,MAAMs8G,EAAEz0J,QAAQ0a,GAAGkK,EAAE6lK,YAAY,CAACc,SAASlkL,EAAEgnL,UAAU1mF,QAAQjtF,EAAE4zK,UAAS,GAAI,CAAC,IAAIlsL,EAAE+hK,UAAUnpK,OAAO+c,OAAOi2G,EAAEm2C,YAAY7pK,YAAY8H,GAAGyyB,EAAEsvI,UAAUnpK,OAAO+c,OAAOi2G,EAAEm2C,YAAY7pK,YAAYu6B,GAAGpiB,EAAE0xJ,UAAUnpK,OAAO+c,OAAOtF,EAAE0xJ,YAAY7pK,YAAYmY,GAAG8wJ,GAAEY,UAAUnpK,OAAO+c,OAAOi2G,EAAEm2C,YAAY7pK,YAAYipK,GAAEl8J,CAAC,OAAz3lB,KAAAmjL,EAAAD,EAAAnlB,MAAAlC,EAAJ,OAAID,EAAAC,QAAAsnB,cCQhE,IAAIhxI,EACOA,IAu3CRA,IAAYA,EAAU,CAAC,GAp3CtB,WACI,IAAIuwI,EAA6B,iBAAfkH,WAA0BA,WACtB,iBAAXrvH,OAAsBA,OACT,iBAATqoG,KAAoBA,KACP,iBAATxvK,KAAoBA,KA6BvC,SAASy2L,IACL,OAbJ,SAASC,IACL,IACI,OAAOjjC,SAAS,eAATA,EACX,OACY,CAChB,CAQWijC,IAPX,SAASC,IACL,IACI,SAAgBC,MAAM,kCAC1B,OACY,CAChB,CAE6BD,EAC7B,CA9BgBF,GACZI,EAAWC,EAAa/3I,GAQ5B,SAAS+3I,EAAa1rK,EAAQ47H,GAC1B,OAAO,SAAU3lJ,EAAKsZ,GAClBpa,OAAO4wK,eAAe/lJ,EAAQ/pB,EAAK,CAAE4vK,cAAc,EAAMC,UAAU,EAAMv2J,MAAOA,IAC5EqsI,GACAA,EAAS3lJ,EAAKsZ,EACtB,CACJ,QAbW20K,EAAKvwI,QAAY,MACxB83I,EAAWC,EAAaxH,EAAKvwI,QAAS83I,IA4B3C,SAAUA,EAAUvH,GACnB,IAAIyH,EAASx2L,OAAOmpK,UAAUv8E,eAE1B6pG,EAAmC,mBAAX9nB,OACxB+nB,EAAoBD,UAAyB9nB,OAAOgoB,YAAgB,IAAchoB,OAAOgoB,YAAc,gBACvGC,EAAiBH,UAAyB9nB,OAAOC,SAAa,IAAcD,OAAOC,SAAW,aAC9FioB,EAA0C,mBAAlB72L,OAAO+c,OAC/B+5K,EAAgB,CAAE/nB,UAAW,cAAgBtuJ,MAC7Cs2K,GAAaF,IAAmBC,EAChCE,EAAU,CAEVj6K,OAAQ85K,EACF,WAAc,OAAOI,GAAej3L,OAAO+c,OAAO,MAAQ,EAC1D+5K,EACI,WAAc,OAAOG,GAAe,CAAEloB,UAAW,MAAS,EAC1D,WAAc,OAAOkoB,GAAe,CAAC,EAAI,EACnD5kF,IAAK0kF,EACC,SAAU72L,EAAKY,GAAO,OAAO01L,EAAOroB,KAAKjuK,EAAKY,EAAM,EACpD,SAAUZ,EAAKY,GAAO,OAAOA,KAAOZ,CAAK,EAC/CsF,IAAKuxL,EACC,SAAU72L,EAAKY,GAAO,OAAO01L,EAAOroB,KAAKjuK,EAAKY,GAAOZ,EAAIY,QAAO0O,CAAW,EAC3E,SAAUtP,EAAKY,GAAO,OAAOZ,EAAIY,EAAM,GAG7Co2L,EAAoBl3L,OAAOqvK,eAAenc,UAC1CikC,EAAsB,mBAARjrG,KAAuD,mBAA1BA,IAAIi9E,UAAUlpK,QAAyBisF,IAmkCtF,SAASkrG,KACL,IAAIC,EAAgB,CAAC,EACjBC,EAAgB,GAChBC,GAA6B,WAC7B,SAASA,GAAYryL,GAAMye,GAAQsgF,IAC/BxkG,KAAK+xG,OAAS,EACd/xG,KAAK+3L,MAAQtyL,GACbzF,KAAKqyF,QAAUnuE,GACflkB,KAAKg4L,UAAYxzF,EACrB,CACAszF,UAAYpuB,UAAU,cAAgB,WAAc,OAAO1pK,IAAM,EACjE83L,GAAYpuB,UAAUytB,GAAkB,WAAc,OAAOn3L,IAAM,EACnE83L,GAAYpuB,UAAUrvJ,KAAO,WACzB,IAAIrS,GAAQhI,KAAK+xG,OACjB,GAAI/pG,IAAS,GAAKA,GAAQhI,KAAK+3L,MAAM/tL,OAAQ,CACzC,IAAIxF,GAASxE,KAAKg4L,UAAUh4L,KAAK+3L,MAAM/vL,IAAQhI,KAAKqyF,QAAQrqF,KAC5D,OAAIA,GAAQ,GAAKhI,KAAK+3L,MAAM/tL,QACxBhK,KAAK+xG,QAAS,EACd/xG,KAAK+3L,MAAQF,EACb73L,KAAKqyF,QAAUwlG,GAGf73L,KAAK+xG,SAEF,CAAEp3F,MAAOnW,GAAQ2rK,MAAM,EAClC,CACA,MAAO,CAAEx1J,WAAO5K,EAAWogK,MAAM,EACrC,EACA2nB,GAAYpuB,UAAUuuB,MAAQ,SAAUn4K,IACpC,MAAI9f,KAAK+xG,QAAU,IACf/xG,KAAK+xG,QAAS,EACd/xG,KAAK+3L,MAAQF,EACb73L,KAAKqyF,QAAUwlG,GAEb/3K,EACV,EACAg4K,GAAYpuB,UAAU8G,OAAS,SAAU71J,IACrC,OAAI3a,KAAK+xG,QAAU,IACf/xG,KAAK+xG,QAAS,EACd/xG,KAAK+3L,MAAQF,EACb73L,KAAKqyF,QAAUwlG,GAEZ,CAAEl9K,MAAOA,GAAOw1J,MAAM,EACjC,EACO2nB,EACX,CA1CIA,GAiHJ,OAtEyB,WACrB,SAASrrG,KACLzsF,KAAK+3L,MAAQ,GACb/3L,KAAKqyF,QAAU,GACfryF,KAAKk4L,UAAYN,EACjB53L,KAAKm4L,aAAc,CACvB,CACA53L,cAAO4wK,eAAe1kF,GAAIi9E,UAAW,OAAQ,CACzC3jK,IAAK,WAAc,OAAO/F,KAAK+3L,MAAM/tL,MAAQ,EAC7CgnK,YAAY,EACZC,cAAc,IAElBxkF,GAAIi9E,UAAU92D,IAAM,SAAUvxG,IAAO,OAAOrB,KAAKo4L,MAAM/2L,IAAgB,IAAU,CAAG,EACpForF,GAAIi9E,UAAU3jK,IAAM,SAAU1E,IAC1B,IAAI2G,GAAQhI,KAAKo4L,MAAM/2L,IAAgB,GACvC,OAAO2G,IAAS,EAAIhI,KAAKqyF,QAAQrqF,SAAS+H,CAC9C,EACA08E,GAAIi9E,UAAUrgK,IAAM,SAAUhI,GAAKsZ,IAC/B,IAAI3S,GAAQhI,KAAKo4L,MAAM/2L,IAAgB,GACvC,OAAArB,KAAKqyF,QAAQrqF,IAAS2S,GACf3a,IACX,EACAysF,GAAIi9E,UAAU9pJ,OAAS,SAAUve,IAC7B,IAAI2G,GAAQhI,KAAKo4L,MAAM/2L,IAAgB,GACvC,GAAI2G,IAAS,EAAG,CAEZ,QADI05G,GAAO1hH,KAAK+3L,MAAM/tL,OACbrB,GAAIX,GAAQ,EAAGW,GAAI+4G,GAAM/4G,KAC9B3I,KAAK+3L,MAAMpvL,GAAI,GAAK3I,KAAK+3L,MAAMpvL,IAC/B3I,KAAKqyF,QAAQ1pF,GAAI,GAAK3I,KAAKqyF,QAAQ1pF,IAEvC,OAAA3I,KAAK+3L,MAAM/tL,SACXhK,KAAKqyF,QAAQroF,SACTquL,GAAch3L,GAAKrB,KAAKk4L,aACxBl4L,KAAKk4L,UAAYN,EACjB53L,KAAKm4L,aAAc,IAEhB,CACX,CACA,OAAO,CACX,EACA1rG,GAAIi9E,UAAU56E,MAAQ,WAClB9uF,KAAK+3L,MAAM/tL,OAAS,EACpBhK,KAAKqyF,QAAQroF,OAAS,EACtBhK,KAAKk4L,UAAYN,EACjB53L,KAAKm4L,aAAc,CACvB,EACA1rG,GAAIi9E,UAAUjkK,KAAO,WAAc,OAAO,IAAIqyL,GAAY93L,KAAK+3L,MAAO/3L,KAAKqyF,QAASimG,GAAS,EAC7F7rG,GAAIi9E,UAAUxlJ,OAAS,WAAc,OAAO,IAAI4zK,GAAY93L,KAAK+3L,MAAO/3L,KAAKqyF,QAASkiB,GAAW,EACjG9nB,GAAIi9E,UAAUlpK,QAAU,WAAc,OAAO,IAAIs3L,GAAY93L,KAAK+3L,MAAO/3L,KAAKqyF,QAASkmG,GAAW,EAClG9rG,GAAIi9E,UAAU,cAAgB,WAAc,OAAO1pK,KAAKQ,SAAW,EACnEisF,GAAIi9E,UAAUytB,GAAkB,WAAc,OAAOn3L,KAAKQ,SAAW,EACrEisF,GAAIi9E,UAAU0uB,MAAQ,SAAU/2L,GAAKm3L,IACjC,IAAKH,GAAcr4L,KAAKk4L,UAAW72L,IAAM,CACrCrB,KAAKm4L,aAAc,EACnB,QAASxvL,GAAI,EAAGA,GAAI3I,KAAK+3L,MAAM/tL,OAAQrB,KACnC,GAAI0vL,GAAcr4L,KAAK+3L,MAAMpvL,IAAItH,IAAM,CACnCrB,KAAKm4L,YAAcxvL,GACnB,KACJ,CAER,CACA,OAAI3I,KAAKm4L,YAAc,GAAKK,KACxBx4L,KAAKm4L,YAAcn4L,KAAK+3L,MAAM/tL,OAC9BhK,KAAK+3L,MAAMrrL,KAAKrL,IAChBrB,KAAKqyF,QAAQ3lF,UAAKqD,IAEf/P,KAAKm4L,WAChB,EACO1rG,EACX,CArEIA,GAuEJ,SAAS6rG,GAAOj3L,GAAKU,IACjB,OAAOV,EACX,CACA,SAASkzG,GAASxyG,GAAG4Y,IACjB,OAAOA,EACX,CACA,SAAS49K,GAASl3L,GAAKsZ,IACnB,MAAO,CAACtZ,GAAKsZ,GACjB,CACJ,CAjsC4Fg9K,GACxFc,EAAsB,mBAAR/5B,KAAuD,mBAA1BA,IAAIgL,UAAUlpK,QAAyBk+J,IAksCtF,SAASg6B,KAqBL,OApByB,WACrB,SAASh6B,IACL1+J,KAAK24L,KAAO,IAAIjB,CACpB,CACAn3L,cAAO4wK,eAAezS,EAAIgL,UAAW,OAAQ,CACzC3jK,IAAK,WAAc,OAAO/F,KAAK24L,KAAKj3E,IAAM,EAC1CsvD,YAAY,EACZC,cAAc,IAElBvS,EAAIgL,UAAU92D,IAAM,SAAUj4F,IAAS,OAAO3a,KAAK24L,KAAK/lF,IAAIj4F,GAAQ,EACpE+jJ,EAAIgL,UAAUlnK,IAAM,SAAUmY,IAAS,OAAO3a,KAAK24L,KAAKtvL,IAAIsR,GAAOA,IAAQ3a,IAAM,EACjF0+J,EAAIgL,UAAU9pJ,OAAS,SAAUjF,IAAS,OAAO3a,KAAK24L,KAAK/4K,OAAOjF,GAAQ,EAC1E+jJ,EAAIgL,UAAU56E,MAAQ,WAAc9uF,KAAK24L,KAAK7pG,OAAS,EACvD4vE,EAAIgL,UAAUjkK,KAAO,WAAc,OAAOzF,KAAK24L,KAAKlzL,MAAQ,EAC5Di5J,EAAIgL,UAAUxlJ,OAAS,WAAc,OAAOlkB,KAAK24L,KAAKlzL,MAAQ,EAC9Di5J,EAAIgL,UAAUlpK,QAAU,WAAc,OAAOR,KAAK24L,KAAKn4L,SAAW,EAClEk+J,EAAIgL,UAAU,cAAgB,WAAc,OAAO1pK,KAAKyF,MAAQ,EAChEi5J,EAAIgL,UAAUytB,GAAkB,WAAc,OAAOn3L,KAAKyF,MAAQ,EAC3Di5J,CACX,CAnBIA,EAqBR,CAxtC4Fg6B,GACxFE,EAA8B,mBAAZ3qG,QAAyBA,QAytC/C,SAAS4qG,KACL,IACIpzL,EAAO8xL,EAAQj6K,SACfw7K,GAAUC,KACd,OAAsB,WAClB,SAAS9qG,KACLjuF,KAAK2xK,KAAOonB,IAChB,CACA9qG,UAAQy7E,UAAU92D,IAAM,SAAUxnF,IAC9B,IAAI4tK,GAAQC,GAAwB7tK,IAAmB,GACvD,YAAiBrb,IAAVipL,IAAsBzB,EAAQ3kF,IAAIomF,GAAOh5L,KAAK2xK,KACzD,EACA1jF,GAAQy7E,UAAU3jK,IAAM,SAAUqlB,IAC9B,IAAI4tK,GAAQC,GAAwB7tK,IAAmB,GACvD,YAAiBrb,IAAVipL,GAAsBzB,EAAQxxL,IAAIizL,GAAOh5L,KAAK2xK,WAAQ5hK,CACjE,EACAk+E,GAAQy7E,UAAUrgK,IAAM,SAAU+hB,GAAQzQ,IAEtCq+K,OADYC,GAAwB7tK,IAAmB,GACjDprB,KAAK2xK,MAAQh3J,GACZ3a,IACX,EACAiuF,GAAQy7E,UAAU9pJ,OAAS,SAAUwL,IACjC,IAAI4tK,GAAQC,GAAwB7tK,IAAmB,GACvD,YAAiBrb,IAAVipL,WAA6BA,GAAMh5L,KAAK2xK,KACnD,EACA1jF,GAAQy7E,UAAU56E,MAAQ,WAEtB9uF,KAAK2xK,KAAOonB,IAChB,EACO9qG,EACX,CA1BA,GA2BA,SAAS8qG,KACL,IAAI13L,GACJ,GACIA,GAAM,cAAgB63L,WACnB3B,EAAQ3kF,IAAIntG,EAAMpE,KACzBoE,SAAKpE,KAAO,EACLA,EACX,CACA,SAAS43L,GAAwB7tK,GAAQ9N,IACrC,IAAKy5K,EAAOroB,KAAKtjJ,GAAQ0tK,IAAU,CAC/B,IAAKx7K,GACD,OACJ/c,OAAO4wK,eAAe/lJ,GAAQ0tK,GAAS,CAAEn+K,MAAO48K,EAAQj6K,UAC5D,CACA,OAAO8N,GAAO0tK,GAClB,CACA,SAASK,GAAgBC,GAAQ13E,IAC7B,QAAS/4G,GAAI,EAAGA,GAAI+4G,KAAQ/4G,GACxBywL,GAAOzwL,IAAqB,IAAhBY,KAAKE,SAAkB,EACvC,OAAO2vL,EACX,CAiBA,SAASF,KACL,IAAIhuL,GAjBR,SAASmuL,GAAe33E,IACpB,GAA0B,mBAAfspE,WAA2B,CAClC,IAAIgE,GAAQ,IAAIhE,WAAWtpE,IAC3B,cAAW43E,OAAW,IAClBA,OAAOC,gBAAgBvK,WAEXwK,SAAa,IACzBA,SAASD,gBAAgBvK,IAGzBmK,GAAgBnK,GAAOttE,IAEpBstE,EACX,CACA,OAAOmK,GAAgB,IAAIn4K,MAAM0gG,IAAOA,GAC5C,CAEe23E,CApEC,IAsEZnuL,GAAK,GAAe,GAAVA,GAAK,GAAY,GAC3BA,GAAK,GAAe,IAAVA,GAAK,GAAY,IAE3B,QADI1G,GAAS,GACJk3E,GAAS,EAAGA,GAzET,KAyE+BA,GAAQ,CAC/C,IAAI+9G,GAAOvuL,GAAKwwE,KACD,IAAXA,IAA2B,IAAXA,IAA2B,IAAXA,MAChCl3E,IAAU,KACVi1L,GAAO,KACPj1L,IAAU,KACdA,IAAUi1L,GAAK9gL,SAAS,IAAI8e,aAChC,CACA,OAAOjzB,EACX,CACJ,CA7yCyDq0L,GACrDa,EAAiB1C,EAAiB9nB,OAAOpZ,IAAI,mCAAgC/lJ,EAC7E4pL,GA44BJ,SAASC,KACL,IAAID,EACJ,OAAKE,EAAYH,IAAmBI,EAASxK,EAAKvwI,UAAYx+C,OAAOw5L,aAAazK,EAAKvwI,WACnF46I,EAAmBrK,EAAKvwI,QAAQ26I,IAEhCG,EAAYF,KACZA,EAxHR,SAASK,KACL,IAAI15K,GACCu5K,EAAYH,WACNpK,EAAKvwI,QAAY,OACtB26I,KAAkBpK,EAAKvwI,UACc,mBAAhCuwI,EAAKvwI,QAAQC,iBAEpB1+B,EAiPR,SAAS25K,GAAuBC,GAC5B,IAAIl7I,EAAiBk7I,EAAQl7I,eAAgBm7I,GAAiBD,EAAQC,eAAgBC,GAAiBF,EAAQE,eAAgBC,GAAqBH,EAAQG,mBAAoBC,GAAiBJ,EAAQI,eACrMC,GAAgB,IAAI3B,EAuBxB,MAtBe,CACX4B,cAAe,SAAUnxB,GAAGqsB,IACxB,IAAI+E,GAAsBF,GAAcx0L,IAAIsjK,IAC5C,QAAKwwB,EAAYY,MAAwBA,GAAoB7nF,IAAI8iF,QAG7D2E,GAAmBhxB,GAAGqsB,IAAG1rL,SACrB6vL,EAAYY,MACZA,GAAsB,IAAIhC,EAC1B8B,GAAclxL,IAAIggK,GAAGoxB,KAEzBA,GAAoBj4L,IAAIkzL,KACjB,EAGf,EACAgF,0BAA2B17I,EAC3B27I,uBAAwBR,GACxBS,uBAAwBR,GACxBS,wBAAyBR,GACzBS,uBAAwBR,GAGhC,CA3QmBL,CAAuB3K,EAAKvwI,UAE3C,IAAIn+B,EACAC,GACAk6K,GACAC,GAAoB,IAAIpC,EACxBqC,GAAW,CACXC,iBAAkBA,GAClBC,YAAaA,GACbC,YAAaA,IAEjB,OAAOH,GACP,SAASC,GAAiBG,IACtB,IAAK96L,OAAOw5L,aAAakB,IACrB,MAAM,IAAIzqK,MAAM,6CAEpB,QAAQ,GACJ,KAAKlQ,IAAa+6K,GAAU,MAC5B,KAAKxB,EAAYj5K,GACbA,EAAQy6K,GACR,MACJ,KAAKz6K,IAAUy6K,GAAU,MACzB,KAAKxB,EAAYh5K,IACbA,GAASw6K,GACT,MACJ,KAAKx6K,KAAWw6K,GAAU,MAC1B,aACiBtrL,IAATgrL,KACAA,GAAO,IAAItC,GACfsC,GAAKv4L,IAAI64L,IAGrB,CACA,SAASC,GAAmBjyB,GAAGqsB,IAC3B,IAAKmE,EAAYj5K,GAAQ,CACrB,GAAIA,EAAM45K,cAAcnxB,GAAGqsB,IACvB,OAAO90K,EACX,IAAKi5K,EAAYh5K,IAAS,CACtB,GAAIA,GAAO25K,cAAcnxB,GAAGqsB,IACxB,OAAO90K,EACX,IAAKi5K,EAAYkB,IAEb,QADI5rB,GAAWosB,GAAYR,MACd,CACT,IAAI1gL,GAAOmhL,GAAarsB,IACxB,IAAK90J,GACD,OAEJ,IAAIghL,GAAWI,GAAcphL,IAC7B,GAAIghL,GAASb,cAAcnxB,GAAGqsB,IAC1BgG,UAAcvsB,IACPksB,EAEf,CAER,CACJ,CACA,IAAKxB,EAAYv5K,IAAaA,EAASk6K,cAAcnxB,GAAGqsB,IACpD,OAAOp1K,CAGf,CACA,SAAS66K,GAAY9xB,GAAGqsB,IACpB,IACI2F,GADAM,GAAcX,GAAkBj1L,IAAIsjK,IAKxC,OAHKwwB,EAAY8B,MACbN,GAAWM,GAAY51L,IAAI2vL,KAE1BmE,EAAYwB,MAIZxB,EADLwB,GAAWC,GAAmBjyB,GAAGqsB,OAEzBmE,EAAY8B,MACZA,GAAc,IAAIjE,EAClBsD,GAAkB3xL,IAAIggK,GAAGsyB,KAE7BA,GAAYtyL,IAAIqsL,GAAG2F,MAEhBA,EACX,CACA,SAASO,GAAYP,IACjB,GAAIxB,EAAYwB,IACZ,MAAM,IAAInuG,UACd,OAAOtsE,IAAUy6K,IAAYx6K,KAAWw6K,KAAaxB,EAAYkB,KAASA,GAAKnoF,IAAIyoF,GACvF,CACA,SAASD,GAAY/xB,GAAGqsB,GAAG2F,IACvB,IAAKO,GAAYP,IACb,MAAM,IAAI7qK,MAAM,qCAEpB,IAAIqrK,GAAmBV,GAAY9xB,GAAGqsB,IACtC,GAAImG,KAAqBR,GAAU,CAC/B,IAAKxB,EAAYgC,IACb,OAAO,EAEX,IAAIF,GAAcX,GAAkBj1L,IAAIsjK,IACpCwwB,EAAY8B,MACZA,GAAc,IAAIjE,EAClBsD,GAAkB3xL,IAAIggK,GAAGsyB,KAE7BA,GAAYtyL,IAAIqsL,GAAG2F,GACvB,CACA,OAAO,CACX,CACJ,CAU2BrB,KAElBH,EAAYH,IAAmBI,EAASxK,EAAKvwI,UAAYx+C,OAAOw5L,aAAazK,EAAKvwI,UACnFx+C,OAAO4wK,eAAeme,EAAKvwI,QAAS26I,EAAgB,CAChD1oB,YAAY,EACZC,cAAc,EACdC,UAAU,EACVv2J,MAAOg/K,IAGRA,CACX,CA75BuBC,GACnBkC,EA65BJ,SAASC,GAAuBd,GAG5B,IAAIrgK,EAAW,IAAIg+J,EACfyC,GAAW,CACXb,cAAe,SAAUnxB,GAAGqsB,IACxB,IAAIsG,GAAiBphK,EAAS70B,IAAIsjK,IAClC,OAAIwwB,EAAYmC,KAETA,GAAeppF,IAAI8iF,GAC9B,EACAgF,0BAoDJ,SAASA,GAA0BuB,GAAaC,GAAe7yB,GAAGqsB,IAC5CyG,GAAuB9yB,GAAGqsB,IAAc,GAC9CrsL,IAAI4yL,GAAaC,GACjC,EAtDIvB,uBAmCJ,SAASA,GAAuBsB,GAAa5yB,GAAGqsB,IAC5C,IAAI0G,GAAcD,GAAuB9yB,GAAGqsB,IAAc,GAC1D,OAAImE,EAAYuC,KAETC,GAAUD,GAAYxpF,IAAIqpF,IACrC,EAvCIrB,uBA0CJ,SAASA,GAAuBqB,GAAa5yB,GAAGqsB,IAC5C,IAAI0G,GAAcD,GAAuB9yB,GAAGqsB,IAAc,GAC1D,IAAImE,EAAYuC,IAEhB,OAAOA,GAAYr2L,IAAIk2L,GAC3B,EA9CIpB,wBAuDJ,SAASA,GAAwBxxB,GAAGqsB,IAChC,IAAIjwL,GAAO,GACP22L,GAAcD,GAAuB9yB,GAAGqsB,IAAc,GAC1D,GAAImE,EAAYuC,IACZ,OAAO32L,GAIX,QAFI0pK,GAAWosB,GADDa,GAAY32L,QAEtBwvL,GAAI,IACK,CACT,IAAI56K,GAAOmhL,GAAarsB,IACxB,IAAK90J,GACD5U,UAAKuE,OAASirL,GACPxvL,GAEX,IAAI62L,GAAYb,GAAcphL,IAC9B,IACI5U,GAAKwvL,IAAKqH,EACd,OACO73K,IACH,IACIi3K,GAAcvsB,GAClB,SAEI,MAAM1qJ,EACV,CACJ,CACAwwK,IACJ,CACJ,EAlFI6F,uBAmFJ,SAASA,GAAuBmB,GAAa5yB,GAAGqsB,IAC5C,IAAI0G,GAAcD,GAAuB9yB,GAAGqsB,IAAc,GAG1D,GAFImE,EAAYuC,MAEXA,GAAYx8K,OAAOq8K,IACpB,OAAO,EACX,GAAyB,IAArBG,GAAY16E,KAAY,CACxB,IAAIs6E,GAAiBphK,EAAS70B,IAAIsjK,IAC7BwwB,EAAYmC,MACbA,GAAep8K,OAAO81K,IACM,IAAxBsG,GAAet6E,MACf9mF,EAAShb,OAAOo8K,IAG5B,CACA,OAAO,CACX,GAjGArC,UAAiBuB,iBAAiBG,IAC3BA,GACP,SAASc,GAAuB9yB,GAAGqsB,GAAG6G,IAClC,IAAIP,GAAiBphK,EAAS70B,IAAIsjK,IAC9BmzB,IAAwB,EAC5B,GAAI3C,EAAYmC,IAAiB,CAC7B,IAAKO,GACD,OACJP,GAAiB,IAAItE,EACrB98J,EAASvxB,IAAIggK,GAAG2yB,IAChBQ,IAAwB,CAC5B,CACA,IAAIJ,GAAcJ,GAAej2L,IAAI2vL,IACrC,GAAImE,EAAYuC,IAAc,CAC1B,IAAKG,GACD,OAGJ,GAFAH,GAAc,IAAI1E,EAClBsE,GAAe3yL,IAAIqsL,GAAG0G,KACjBnB,EAASG,YAAY/xB,GAAGqsB,GAAG2F,IAC5BW,SAAep8K,OAAO81K,IAClB8G,IACA5hK,EAAShb,OAAOypJ,IAEd,IAAI74I,MAAM,6BAExB,CACA,OAAO4rK,EACX,CAuEJ,CAhhCuBL,CAAuBpC,IAue9C,SAAS8C,EAAoBR,EAAa5yB,EAAGqsB,IAEzC,GADaiF,EAAuBsB,EAAa5yB,EAAGqsB,IAEhD,OAAO,EACX,IAAI7jI,GAAS6qI,GAAuBrzB,GACpC,OAAKszB,GAAO9qI,KACD4qI,EAAoBR,EAAapqI,GAAQ6jI,GAExD,CAGA,SAASiF,EAAuBsB,EAAa5yB,EAAGqsB,IAC5C,IAAI2F,GAAWuB,GAAoBvzB,EAAGqsB,IAAc,GACpD,OAAImE,EAAYwB,KAETgB,GAAUhB,GAASV,uBAAuBsB,EAAa5yB,EAAGqsB,IACrE,CAGA,SAASmH,EAAoBZ,EAAa5yB,EAAGqsB,IAEzC,GADaiF,EAAuBsB,EAAa5yB,EAAGqsB,IAEhD,OAAOkF,EAAuBqB,EAAa5yB,EAAGqsB,IAClD,IAAI7jI,GAAS6qI,GAAuBrzB,GACpC,OAAKszB,GAAO9qI,SAAZ,EACWgrI,EAAoBZ,EAAapqI,GAAQ6jI,GAExD,CAGA,SAASkF,EAAuBqB,EAAa5yB,EAAGqsB,IAC5C,IAAI2F,GAAWuB,GAAoBvzB,EAAGqsB,IAAc,GACpD,IAAImE,EAAYwB,IAEhB,OAAOA,GAAST,uBAAuBqB,EAAa5yB,EAAGqsB,GAC3D,CAGA,SAASgF,EAA0BuB,EAAaC,EAAe7yB,GAAGqsB,IAC/CkH,GAAoBvzB,GAAGqsB,IAAc,GAC3CgF,0BAA0BuB,EAAaC,EAAe7yB,GAAGqsB,GACtE,CAGA,SAASoH,EAAqBzzB,EAAGqsB,GAC7B,IAAIqH,GAAUlC,EAAwBxxB,EAAGqsB,GACrC7jI,GAAS6qI,GAAuBrzB,GACpC,GAAe,OAAXx3G,GACA,OAAOkrI,GACX,IAAIC,GAAaF,EAAqBjrI,GAAQ6jI,GAC9C,GAAIsH,GAAWhzL,QAAU,EACrB,OAAO+yL,GACX,GAAIA,GAAQ/yL,QAAU,EAClB,OAAOgzL,GAGX,QAFI3zL,GAAM,IAAIovL,EACVhzL,GAAO,GACFy1K,GAAK,EAAG+hB,GAAYF,GAAS7hB,GAAK+hB,GAAUjzL,OAAQkxK,KAE5C7xK,GAAIupG,IADbvxG,GAAM47L,GAAU/hB,OAGhB7xK,GAAI7G,IAAInB,IACRoE,GAAKiH,KAAKrL,KAGlB,QAASiR,GAAK,EAAG4qL,GAAeF,GAAY1qL,GAAK4qL,GAAalzL,OAAQsI,KAAM,CACxE,IAAIjR,GACSgI,GAAIupG,IADbvxG,GAAM67L,GAAa5qL,OAGnBjJ,GAAI7G,IAAInB,IACRoE,GAAKiH,KAAKrL,IAElB,CACA,OAAOoE,EACX,CAGA,SAASo1L,EAAwBxxB,EAAGqsB,GAChC,IAAI2F,GAAWuB,GAAoBvzB,EAAGqsB,GAAc,GACpD,OAAK2F,GAGEA,GAASR,wBAAwBxxB,EAAGqsB,GAFhC,EAGf,CAGA,SAASlnL,EAAKi/B,GACV,GAAU,OAANA,EACA,OAAO,EACX,cAAeA,GACX,IAAK,YAAa,OAAO,EACzB,IAAK,UAAW,OAAO,EACvB,IAAK,SAAU,OAAO,EACtB,IAAK,SAAU,OAAO,EACtB,IAAK,SAAU,OAAO,EACtB,IAAK,SAAU,OAAa,OAANA,EAAa,EAAe,EAClD,QAAS,OAAO,EAExB,CAGA,SAASosJ,EAAYpsJ,GACjB,YAAa19B,IAAN09B,CACX,CAGA,SAASkvJ,GAAOlvJ,GACZ,OAAa,OAANA,CACX,CAQA,SAASqsJ,EAASrsJ,GACd,MAAoB,iBAANA,EAAuB,OAANA,EAA0B,mBAANA,CACvD,CAKA,SAAS0vJ,EAAYz/I,EAAO0/I,GACxB,OAAQ5uL,EAAKkvC,IACT,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EAAgB,OAAOA,EAEhC,IAAI2/I,GAAyB,IAAlBD,EAAmC,SAA6B,IAAlBA,EAAmC,SAAW,UACnGE,GAAeC,GAAU7/I,EAAOu5I,GACpC,QAAqBlnL,IAAjButL,GAA4B,CAC5B,IAAI94L,GAAS84L,GAAa5uB,KAAKhxH,EAAO2/I,IACtC,GAAIvD,EAASt1L,IACT,MAAM,IAAI0oF,UACd,OAAO1oF,EACX,CACA,OAIJ,SAASg5L,EAAoBn0B,EAAGg0B,GAC5B,GAAa,WAATA,EAAmB,CACnB,IAAII,GAAap0B,EAAE1wJ,SACnB,GAAI+kL,GAAWD,MAEN3D,EADDt1L,GAASi5L,GAAW/uB,KAAKrF,IAEzB,OAAO7kK,GAGf,GAAIk5L,GADAzmG,GAAUoyE,EAAEpyE,WAGP6iG,EADDt1L,GAASyyF,GAAQy3E,KAAKrF,IAEtB,OAAO7kK,EAEnB,KACK,CACD,IAAIyyF,GACJ,GAAIymG,GADAzmG,GAAUoyE,EAAEpyE,WAGP6iG,EADDt1L,GAASyyF,GAAQy3E,KAAKrF,IAEtB,OAAO7kK,GAEf,IAEQA,GAFJm5L,GAAat0B,EAAE1wJ,SACnB,GAAI+kL,GAAWC,MAEN7D,EADDt1L,GAASm5L,GAAWjvB,KAAKrF,IAEzB,OAAO7kK,EAEnB,CACA,MAAM,IAAI0oF,SACd,CAlCWswG,CAAoB9/I,EAAgB,YAAT2/I,GAAqB,SAAWA,GACtE,CAoCA,SAAShB,GAAUuB,GACf,QAASA,CACb,CAQA,SAASC,GAAcD,GACnB,IAAIv8L,EAAM87L,EAAYS,EAAU,GAChC,OA9EJ,SAASE,EAASrwJ,GACd,MAAoB,iBAANA,CAClB,CA4EQqwJ,CAASz8L,GACFA,EARf,SAAS08L,GAASH,GACd,MAAO,GAAKA,CAChB,CAOWG,CAAS18L,EACpB,CAKA,SAAS28L,GAAQJ,GACb,OAAO58K,MAAMC,QACPD,MAAMC,QAAQ28K,GACdA,aAAoBr9L,OAChBq9L,aAAoB58K,MACyB,mBAA7CzgB,OAAOmpK,UAAU/wJ,SAAS+1J,KAAKkvB,EAC7C,CAGA,SAASF,GAAWE,GAEhB,MAA2B,mBAAbA,CAClB,CAGA,SAASK,GAAcL,GAEnB,MAA2B,mBAAbA,CAClB,CAUA,SAASvF,GAAc5qJ,EAAGy8C,GACtB,OAAOz8C,IAAMy8C,GAAKz8C,GAAMA,GAAKy8C,GAAMA,CACvC,CAKA,SAASqzG,GAAUW,EAAGxI,GAClB,IAAIyI,GAAOD,EAAExI,GACb,GAAmC,MAATyI,GAE1B,KAAKT,GAAWS,IACZ,MAAM,IAAIjxG,UACd,OAAOixG,GACX,CAGA,SAAS5C,GAAYhkH,GACjB,IAAIkrC,EAAS86E,GAAUhmH,EAAK4/G,GAC5B,IAAKuG,GAAWj7E,GACZ,MAAM,IAAIv1B,UACd,IAAIiiF,GAAW1sD,EAAOisD,KAAKn3F,GAC3B,IAAKuiH,EAAS3qB,IACV,MAAM,IAAIjiF,UACd,OAAOiiF,EACX,CAGA,SAASssB,GAAc2C,GACnB,OAAOA,EAAWzjL,KACtB,CAGA,SAAS6gL,GAAarsB,GAClB,IAAI3qK,EAAS2qK,EAAS90J,OACtB,OAAO7V,EAAO2rK,MAAe3rK,CACjC,CAGA,SAASk3L,GAAcvsB,GACnB,IAAIhlJ,EAAIglJ,EAASqB,OACbrmJ,GACAA,EAAEukJ,KAAKS,EACf,CAKA,SAASutB,GAAuBrzB,GAC5B,IAAIg1B,EAAQ99L,OAAOqvK,eAAevG,GAUlC,GATiB,mBAANA,GAAoBA,IAAMouB,GASjC4G,IAAU5G,EACV,OAAO4G,EAEX,IAAI30B,GAAYL,EAAEK,UACd40B,GAAiB50B,IAAanpK,OAAOqvK,eAAelG,IACxD,GAAsB,MAAlB40B,IAA0BA,KAAmB/9L,OAAOmpK,UACpD,OAAO20B,EAEX,IAAIx+L,GAAcy+L,GAAez+L,YAIjC,MAH2B,mBAAhBA,IAGPA,KAAgBwpK,EACTg1B,EAEJx+L,EACX,CA8RA,SAAS+8L,GAAoBvzB,EAAGqsB,EAAG6G,IAC/B,IAAIgC,GAAqB5E,GAAiBwB,YAAY9xB,EAAGqsB,GACzD,IAAKmE,EAAY0E,IACb,OAAOA,GAEX,GAAIhC,GAAQ,CACR,GAAI5C,GAAiByB,YAAY/xB,EAAGqsB,EAAGoG,GACnC,OAAOA,EAEX,MAAM,IAAItrK,MAAM,iBACpB,CAEJ,CAgPA,SAASgnK,GAAejgH,GACpBA,SAAIt1E,QAAK8N,SACFwnE,EAAIt1E,GACJs1E,CACX,CAnvCAs/G,EAAS,WArBT,SAAS2H,GAASC,EAAYrzK,EAAQszK,GAAa/9L,IAC/C,GAAKk5L,EAAY6E,IAYZ,CACD,IAAKV,GAAQS,GACT,MAAM,IAAIvxG,UACd,IAAK+wG,GAAc7yK,GACf,MAAM,IAAI8hE,UACd,OAmZR,SAASyxG,EAAoBF,EAAYrzK,GACrC,QAASziB,GAAI81L,EAAWz0L,OAAS,EAAGrB,IAAK,IAAKA,GAAG,CAC7C,IACIi2L,IAAYC,EADAJ,EAAW91L,KACDyiB,GAC1B,IAAKyuK,EAAY+E,MAAejC,GAAOiC,IAAY,CAC/C,IAAKX,GAAcW,IACf,MAAM,IAAI1xG,UACd9hE,EAASwzK,EACb,CACJ,CACA,OAAOxzK,CACX,CA9ZeuzK,CAAoBF,EAAYrzK,EAC3C,CAjBI,IAAK4yK,GAAQS,GACT,MAAM,IAAIvxG,UACd,IAAK4sG,EAAS1uK,GACV,MAAM,IAAI8hE,UACd,IAAK4sG,EAASn5L,MAAgBk5L,EAAYl5L,MAAgBg8L,GAAOh8L,IAC7D,MAAM,IAAIusF,UACd,OAAIyvG,GAAOh8L,MACPA,QAAaoP,GAwazB,SAAS+uL,EAAiBL,EAAYrzK,EAAQszK,GAAa3tB,IACvD,QAASpoK,GAAI81L,EAAWz0L,OAAS,EAAGrB,IAAK,IAAKA,GAAG,CAC7C,IACIi2L,IAAYC,EADAJ,EAAW91L,KACDyiB,EAAQszK,GAAa3tB,IAC/C,IAAK8oB,EAAY+E,MAAejC,GAAOiC,IAAY,CAC/C,IAAK9E,EAAS8E,IACV,MAAM,IAAI1xG,UACd6jF,GAAa6tB,EACjB,CACJ,CACA,OAAO7tB,EACX,CAjbe+tB,CAAiBL,EAAYrzK,EADpCszK,GAAcb,GAAca,IAC6B/9L,GASjE,GAsDAk2L,EAAS,WAVT,SAASj8J,GAASmkK,EAAaC,GAQ3B,OAPA,SAASH,GAAUzzK,GAAQszK,IACvB,IAAK5E,EAAS1uK,IACV,MAAM,IAAI8hE,UACd,IAAK2sG,EAAY6E,MAolBzB,SAASO,GAAcrB,GACnB,OAAQpvL,EAAKovL,IACT,KAAK,EACL,KAAK,EAAgB,OAAO,EAC5B,QAAS,OAAO,EAExB,CA1lB0CqB,CAAcP,IAC5C,MAAM,IAAIxxG,UACdwtG,EAA0BqE,EAAaC,EAAe5zK,GAAQszK,GAClE,CAEJ,GAgDA7H,EAAS,iBAPT,SAAS73I,EAAe+/I,EAAaC,EAAe5zK,GAAQszK,IACxD,IAAK5E,EAAS1uK,IACV,MAAM,IAAI8hE,UACd,OAAK2sG,EAAY6E,MACbA,GAAcb,GAAca,KACzBhE,EAA0BqE,EAAaC,EAAe5zK,GAAQszK,GACzE,GA2CA7H,EAAS,cAPT,SAASqI,EAAYH,EAAa3zK,EAAQszK,IACtC,IAAK5E,EAAS1uK,GACV,MAAM,IAAI8hE,UACd,OAAK2sG,EAAY6E,MACbA,GAAcb,GAAca,KACzBjC,EAAoBsC,EAAa3zK,EAAQszK,GACpD,GA2CA7H,EAAS,iBAPT,SAASsD,EAAe4E,EAAa3zK,EAAQszK,IACzC,IAAK5E,EAAS1uK,GACV,MAAM,IAAI8hE,UACd,OAAK2sG,EAAY6E,MACbA,GAAcb,GAAca,KACzB/D,EAAuBoE,EAAa3zK,EAAQszK,GACvD,GA2CA7H,EAAS,cAPT,SAASl3C,EAAYo/C,EAAa3zK,EAAQszK,IACtC,IAAK5E,EAAS1uK,GACV,MAAM,IAAI8hE,UACd,OAAK2sG,EAAY6E,MACbA,GAAcb,GAAca,KACzB7B,EAAoBkC,EAAa3zK,EAAQszK,GACpD,GA2CA7H,EAAS,iBAPT,SAASuD,GAAe2E,EAAa3zK,EAAQszK,IACzC,IAAK5E,EAAS1uK,GACV,MAAM,IAAI8hE,UACd,OAAK2sG,EAAY6E,MACbA,GAAcb,GAAca,KACzB9D,EAAuBmE,EAAa3zK,EAAQszK,GACvD,GA0CA7H,EAAS,kBAPT,SAASsI,GAAgB/zK,EAAQszK,GAC7B,IAAK5E,EAAS1uK,GACV,MAAM,IAAI8hE,UACd,OAAK2sG,EAAY6E,KACbA,EAAcb,GAAca,IACzB5B,EAAqB1xK,EAAQszK,EACxC,GA0CA7H,EAAS,qBAPT,SAASwD,EAAmBjvK,EAAQszK,GAChC,IAAK5E,EAAS1uK,GACV,MAAM,IAAI8hE,UACd,OAAK2sG,EAAY6E,KACbA,EAAcb,GAAca,IACzB7D,EAAwBzvK,EAAQszK,EAC3C,GAkDA7H,EAAS,iBAdT,SAASyD,EAAeyE,EAAa3zK,EAAQszK,IACzC,IAAK5E,EAAS1uK,GACV,MAAM,IAAI8hE,UAGd,GAFK2sG,EAAY6E,MACbA,GAAcb,GAAca,MAC3B5E,EAAS1uK,GACV,MAAM,IAAI8hE,UACT2sG,EAAY6E,MACbA,GAAcb,GAAca,KAChC,IAAIrD,GAAWuB,GAAoBxxK,EAAQszK,IAAwB,GACnE,OAAI7E,EAAYwB,KAETA,GAASP,uBAAuBiE,EAAa3zK,EAAQszK,GAChE,EAs2BJ,CAz2CIz9L,CAAQ41L,EAAUvH,UACPA,EAAKvwI,QAAY,MACxBuwI,EAAKvwI,QAAUA,EAwBvB,CApCA,4FCbJ,MAAAlR,EAAA,gCAAAuxJ,EAAA5wJ,EAAAC,GAqHmpD,GArHnpD,EAAAD,IAoH6F9pC,cAAE,YAAFA,MAAE,eAAFA,SACsjD,EAAA8pC,EAAA,OAAAV,GADtjDppC,cAAE,UAAAopC,GAAAuxJ,YAAF36L,cAAE,mBAAAopC,GAAAwxJ,uBAAA,KAAF56L,CACi4C,oBAAAopC,GAAAwxJ,uBAAA,OADj4C56L,CAC08C,eAAAopC,GAAAyxJ,qBAAA,KAD18C76L,MAAE,IAAAopC,GAAA0xJ,gBAAA,EAnH/F,MAAMC,EAAuC,IAAIxuJ,MAAe,uCAAwC,CACpG9vC,WAAY,OACZF,QAGJ,SAASy+L,IACL,MAAO,CAAEC,SAAUC,EACvB,IAIMA,EAAY,IAIW,IACvBC,EAAkB,MAAxB,MAAMA,EACF1uJ,eAAc70B,OAAO80B,OAErB2B,gBASA,SAAIwuB,GACA,OAAOvhE,KAAKkkE,QAAUlkE,KAAK8/L,aAC/B,CACA,SAAIv+H,CAAM5mD,IACN3a,KAAKkkE,OAASvpD,EAClB,CACAupD,OACA47H,cAAgB,UAEhBC,mBACAlgM,cACI,MAAMm0C,MAAgB13B,OAAO23B,MAAuB,CAAExC,UAAU,IAC1D++F,KAAWl0H,OAAOmjL,GACxBz/L,KAAK+yC,gBACiB,mBAAlBiB,MAAwCw8F,IAAaA,EAASwvD,iBAClEhgM,KAAK6vF,KACyD,gBAA1D7vF,KAAKmxC,YAAY+C,cAAcC,SAAS1c,cAClC,gBACA,cACN+4G,IACIA,EAASjvE,QACTvhE,KAAKuhE,MAAQvhE,KAAK8/L,cAAgBtvD,EAASjvE,OAE3CivE,EAASmvD,WACT3/L,KAAK2/L,SAAWnvD,EAASmvD,UAEzBnvD,EAASyvD,cACTjgM,KAAKigM,YAAczvD,EAASyvD,aAGxC,CAQApwG,KAEA,SAAIl1E,GACA,MAAqB,gBAAd3a,KAAK6vF,KAAyB7vF,KAAKkyF,OAAS,CACvD,CACA,SAAIv3E,CAAMqlB,IACNhgC,KAAKkyF,OAAS3oF,KAAK4zB,IAAI,EAAG5zB,KAAK0zB,IAAI,IAAK+C,IAAK,GACjD,CACAkyD,OAAS,EAET,YAAIytG,GACA,OAAO3/L,KAAKkgM,SAChB,CACA,YAAIP,CAASj+E,IACT1hH,KAAKkgM,UAAYx+E,IAAQ,CAC7B,CACAw+E,UAAYN,EAEZ,eAAIK,GACA,OAAOjgM,KAAKmgM,cAAgBngM,KAAK2/L,SAAW,EAChD,CACA,eAAIM,CAAYtlL,IACZ3a,KAAKmgM,aAAexlL,IAAS,CACjC,CACAwlL,aAEAX,gBACI,OAAQx/L,KAAK2/L,SA9EK,IA8E2B,CACjD,CAEAN,WACI,MAAMe,GAAiC,EAAvBpgM,KAAKw/L,gBAAsBx/L,KAAKigM,YAChD,MAAO,OAAOG,MAAWA,IAC7B,CAEAd,uBACI,OAAO,EAAI/1L,KAAKk6K,GAAKzjL,KAAKw/L,eAC9B,CAEAa,oBACI,MAAkB,gBAAdrgM,KAAK6vF,KACG7vF,KAAKs/L,wBAA0B,IAAMt/L,KAAKkyF,QAAW,IAE1D,IACX,CAEAqtG,qBACI,OAAQv/L,KAAKigM,YAAcjgM,KAAK2/L,SAAY,GAChD,CACA1vJ,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF2xJ,EAAkB,EACrH5vJ,iBADyFvrC,MAAE,CAAA8N,KACJqtL,EAAkB1xJ,UAAA,2CAAAmJ,UAAA,SAAA9I,EAAAC,IADd,GACc,EAAAD,GADhB9pC,MAAEmpC,EAAA,KAAAW,EAAA,KAAA6H,GAAF3xC,MAAE2xC,GAAF3xC,WAAE+pC,GAAAsxJ,mBAAA1pJ,GAAAz1B,MAAA,GAAAsvB,UAAA,QAC0T,cAAa,WAAc,KAAI,sDAAAC,SAAA,GAAAC,aAAA,SAAA5B,EAAAC,IAAA,EAAAD,IAD3V9pC,MAAE,gBACJ,EADEA,CACD,gBAAD,IADEA,CACC,gBAAM,gBAAN+pC,GAAAohD,KAAmBphD,GAAA9zB,MAAW,KAD/BjW,CACmC,OAAA+pC,GAAAohD,MADnCnrF,MACF,OAAM+pC,GAAA8yB,OADJ78D,MAAE,QAAA+pC,GAAAkxJ,SAAA,KAAFj7L,CACgB,SAAA+pC,GAAAkxJ,SAAA,KADhBj7L,CACgB,+BAAA+pC,GAAAkxJ,SAAP,KADTj7L,CACgB,iDAAA+pC,GAAAkxJ,SAAP,MADTj7L,MAAE,0BAAA+pC,GAAAsE,gBAAFruC,CACgB,uCAAT,kBAAS+pC,GAAAohD,MAAA,EAAAx/C,OAAA,CAAAkxB,MAAA,QAAAsuB,KAAA,OAAAl1E,MAAA,mBAAuIg8F,OAAegpF,SAAA,yBAAsChpF,OAAespF,YAAA,+BAA+CtpF,QAAengE,SAAA,uBAAAh1B,SAAA,CADzR9c,OAAE0pC,MAAA,GAAAC,KAAA,GAAAC,OAAA,0wBAAAC,SAAA,SAAAC,EAAAC,IAC6hG,GAD7hG,EAAAD,IAAF9pC,MAAE,EAAA06L,EAAA,yBAAF16L,aAAE,aAAFA,cAAE,WAAFA,MAAE,cAAFA,wBAAE,UAAFA,CACq/E,UADr/EA,CAC6iF,WAD7iFA,MAAE,KAAFA,cAAE,YAAFA,MAAE,MAAFA,cAAE,aAAFA,MAAE,MAAFA,aAC+hG,EAAA8pC,EAAA,OAAA8xJ,GAD/hG57L,MAAE,GAAFA,MAAE,GAAFA,MAAE,UAAA+pC,GAAA4wJ,YAAF36L,cAAE,mBAAA+pC,GAAA6wJ,uBAAA,KAAF56L,CACknE,oBAAA+pC,GAAA4xJ,oBAAA,KADlnE37L,CACorE,eAAA+pC,GAAA8wJ,qBAAA,KADprE76L,MAAE,IAAA+pC,GAAA+wJ,iBAAF96L,MAAE,GAAFA,MAAE,mBAAA47L,IAAF57L,MAAE,GAAFA,MAAE,mBAAA47L,IAAF57L,MAAE,GAAFA,MAAE,mBAAA47L,GAC++F,GAAA9oJ,aAAA,CAA0xIw4E,MAAgB1/E,OAAA,orIAAAxB,cAAA,EAAAyB,gBAAA,IACv3O,OArGKsvJ,CAAkB,KAmJlB5hE,EAAwB,MAA9B,MAAMA,EACFhuF,iBAAW,SAAA/B,GAAA,WAAAA,GAAwF+vF,EAAwB,EAC3HhuF,iBAlDyFvrC,KAAE,CAAA8N,KAkDSyrH,IACpGhuF,iBAnDyFvrC,MAAE,CAAA+rC,QAAA,CAmD6CC,QAC3I,OAJKutF,CAAwB","names":["AdamCacheService","SignalStoreBase","constructor","super","classLog","this","getId","item","Guid","loadPrefetch","prefetchAdams","snapshots","Object","entries","map","entityGuid","attributes","Attributes","addMany","getAdamSnapshot","fieldName","cache","factory","fac","providedIn","LinkCacheService","key","trim","toLocaleLowerCase","addPrefetch","prefetchLinks","prefetchAdam","links","linkInfo","adamLinkList","flatMap","_","prefetchFields","__","items","adamToLinks","addAdam","addLink","link","Adam","add","filter","IsFolder","ReferenceId","Value","Url","logSpecs","all","fetchFormData","saveFormData","FormDataService","HttpServiceBase","globalConfigService","log","fnIf","context","http","post","apiUrl","params","appId","pipe","formData","Context","Language","List","language","IsEnabled","tap","allowDebug","Enable","DebugMode","result","partOfPage","i0","i1","PublishModes","Show","Hide","Branch","FormPublishingService","formId","#signalsPublishModeCache","ComputedCacheHelper","setPublishMode","publishMode","eavService","config","versioningOptions","keys","DraftShouldBranch","IsPublished","getPublishMode","getOrCreate","toPublishMode","get","publishStatus","importLoadedData","keepInitialValues","initMissingValues","EditInitializerService","#formDataService","#userLanguageSvc","#initialFormValues","route","formConfig","itemService","inputTypeService","contentTypeItemService","contentTypeService","publishStatusService","translate","languageService","languageStore","snackBar","adamCacheService","linkCacheService","featuresService","loaded","signal","transient","UserLanguageService","aIf","l","inbound","convertUrlToForm","snapshot","form","index","clientId","a","editItems","JSON","stringify","subscribe","dataFromBackend","Items","originalItem","find","i","Header","Prefill","ClientData","load","UpdateEnvVarsFromDialogSettings","App","#importLoadedData","#keepInitialValues","#initMissingValues","set","loadDto","Math","floor","random","isParentDialog","calculateIsParentDialog","editDialogCount","path","pathFromRoot","url","length","urlSegment","itemGuids","Entity","loadItems","InputTypes","addContentTypeItems","ContentTypeItems","addContentTypes","ContentTypes","Prefetch","Links","getMany","createMode","Id","isCopy","DuplicateEntity","enableHistory","data","history","settingsAsEav","Settings","Entities","EavEntity","convertMany","EavContentType","initFormConfig","langs","userLangCode","uiCode","Current","use","sortedLanguages","sortLanguages","primaryLangKey","languages","primaryLang","sameLangs","otherLangs","NameId","startsWith","split","push","sort","b","localeCompare","Primary","addForm","allLangs","getAll","includes","current","primary","currentLang","formValues","EntityReader","currentValues","#initialValuesCacheKey","getInitialValues","updater","eavConfig","inputTypes","switchToDefault","isCreateMode","fss","FieldsSettingsHelpers","contentType","getContentTypeOfItem","ctAttribute","currentName","Name","inputType","Type","InputType","isEmptyType","InputTypeHelpers","isEmpty","logic","FieldLogicManager","singleton","getOrUnknown","attributeValues","fieldSettings","getDefaultSettings","flatten","Metadata","firstValue","FieldReader","currentOrDefaultOrAny","isValueEmpty","setDefaultValue","disableI18n","DisableI18n","noLanguageValue","currentOrDefault","undefined","transactionItem","removeItemAttributeDimension","addItemAttributeValue","defaultLanguageValue","valueIsEmpty","IsEphemeral","setCurrent","message","instant","open","duration","i2","i3","i4","i5","i6","i7","i8","i9","i10","i11","i12","i13","i14","sortByType","insertToDom","ScriptsLoaderService","#loadedFiles","scripts","callback","sortedFiles","#sortByType","#insertToDom","cssFiles","jsFiles","forEach","script","file","_a","resolveUrlTokens","type","domEl","endsWith","concat","files","increment","window","sxcVersion","existing","loadedFile","_listener","removeEventListener","addEventListener","document","createElement","rel","href","src","querySelector","appendChild","replace","UrlHelpers","getUrlPrefix","LoadIconsService","matIconRegistry","domSanitizer","icons","folder","sitemap","name","svg","addSvgIconLiteral","bypassSecurityTrustHtml","ComputedAnalyzer","computed","getConsumerNode","SIGNAL","getProducers","producerNode","getDirtyProducers","snapShotProducers","onlyDirty","#getSubInfosOf","producer","filterDirty","#getSubProducers","producerLastReadVersion","subProducers","producerVersions","subInfos","idx","dirtyPrd","dirty","verOwn","verPrd","version","dirtyVer","dirtySub","some","d","dirtyDepth","debugName","EntityFormStateService","controlsCreated","isSaving","formGroup","UntypedFormGroup","childFormResult","expand","watchToRefreshOnVersionsClosed","EditRoutingService","ServiceBase","#dialogRouter","#route","#router","langInstanceSvc","DialogRoutingService","router","#childFormResult$","Subject","#signalsExpandedCache","ngOnDestroy","complete","init","#initHideHeader","#watchChildFormResult","#getParams","#getParamsAndPayload","p","hasDetails","detailsEntityGuid","detailsFieldId","hasUpdate","updateEntityGuid","updateFieldId","guid","fieldId","isExpanded","fieldIndex","toString","isExpanded$","mapUntilChanged","isExpandedSignal","injector","cached","obs","toSignal","cr","rSilent","childFormClosed","componentTag","pInfo","newUrlIfCurrentContainsOldUrl","end","navigate","state","formUrl","convertFormToUrl","relativeTo","subscriptions","updateHideHeader","childDialogClosed$","parseInt","getCurrentNavigation","extras","next","PickerItemFactory","placeholder","i18nLabel","suffix","label","value","noSelect","isMessage","noDelete","noEdit","DataAdapterBase","setupEmpty","connectState","initPrefetch","fetchItems","fields","DebugFields","dataSource","signalObj","optionsOrHints","computedObj","dataSourceRaw","setup","deleteCallback","doAfterDelete","logSpecsDataAdapterEntityBase","editItem","getPrefill","DataAdapterEntityBase","#editRoutingService","#snackBar","#entityService","inject","FormConfigService","TranslateService","MatSnackBar","fieldState","FieldState","group","EntityService","#paramsMaskLazy","FieldMask","initSignal","settingExt","#createEntityTypes","settings","CreateTypes","myFeatures","create","#deletedItemsGuids","errorOptions","errors","ds","deleted","loading","#prefill","#createParams","#editParams","syncParams","onAfterViewInit","prefetchGuids","fnIfInList","forceReloadData","missingData","fn","addToRefresh","editParams","entityType","editGuid","formParams","#urlToObject","EditPrep","newFromType","editId","id","entityId","parameters","take","l2","deleteItem","props","entity","title","parentId","parentField","confirm","delete","update","error","dismiss","prefill","r","fromEntries","line","parts","fill","fallback","textEntry","multiValue","edit","remove","mergePickerFeatures","first","second","convertArrayToString","separator","Array","isArray","join","addInfosFromSourceForUi","optionsWithMissing","selectedRaw","selectedOverride","selectedState","features","allOptions","PickerData","#translate","closeWatcherAttachedWIP","ready","optionsRaw","source","optionsOverride","optionsAll","getWith","o","optionsAllowsEmpty","pickerItemsAllowsEmpty","dropdownOptions","#toSelectedWithUiInfo","selectedItems","selectedAll","selectedOne","selected","options","missing","s","#settingsLazy","#featuresFromSettings","EnableTextEntry","AllowMultiValue","EnableCreate","EnableRemove","EnableDelete","mergeSourceAndState","mergeSettings","showGoToListDialogButton","showAddNewButton","isInFreeTextMode","enabled","specs","effect","raw","override","final","allowsEmptyLazy","values","initiallySelected","selectedCopy","original","addNewlyCreatedItem","newItemGuid","opts","e","createPickerItemFromItem","tooltip","info","#createPickerItemFromValue","toggleFreeTextMode","validDataExpected","PickerDataFactory","inputTypeSvc","createPickersForAttributes","getSpecs","#createPickersData","it","picker","#createOne","reduce","acc","isAnyPicker","SignalEquals","bool","equal","RxHelpers","valueEquals","number","string","ref","FormsStateService","#formsValid","#formsDirty","triggerTrySaveAndMaybeClose","tryToSave","close","formsAreValid","formsAreDirty","readOnly","itemHeaders","getItemHeaderSignal","getAllSignal","itemsReadOnly","itemHeader","EditInfo","ReadOnly","languageAllowed","IsAllowed","isReadOnly","reason","formsValidTemp","saveButtonDisabled","getFormValid","setFormValid","isValid","allValid","valid","setFormDirty","isDirty","anyDirty","triggerSave","FormulaExecutionSpecsFactory","#features","FeaturesService","languageSvc","globalConfigSvc","editInitializerSvc","settingsSvc","clientData","#entityGuid","#settingsSvc","#clientData","#warningsObsolete","getSharedSpecs","debugEnabled","isDebug","initialFormValues","fieldsSettingsSvc","FormulaPropsParameters","warningsObsolete","FieldPropsPicker","getPickerInfos","filterFormulasIfPickerNotReady","FormulaFieldPickerHelper","fieldConstants","propsBefore","isSpecialPicker","inputTypeSpecs","isNewPicker","infos","#infos","#getInfos","before","picks","f","fieldIsSpecialPicker","formulas","sleep","changed","ver","pickerData","dummy","list","listRaw","verBefore","mapper","getVersion","sel","updateFormulaSleep","formula","FormulaSpecialPickerAutoSleep","target","preserveResultsAfterRun","wip","FormulaSettingsHelper","keepSettingIfTypeOk","valueNew","settingsNew","keepSettingIfTypeOkAndStatus","settingName","substring","SettingsFormulaPrefix","prevSetting","isEqual","wasChanged","runFormula","runAllOfField","runOrInitSettings","FormulaRunField","promiseHandler","designerSvc","runOneHelper","settingsCurrent","valueBefore","reuseExecSpecs","setUpdHelper","pickHelp","fAll","untracked","getActive","fGrouped","groupBy","disabled","#showDisabledFormulasWarnings","noPromiseSleep","filterFormulas","finalize","validation","#runAllOfField","settingsInitial","pickerHelper","defaultValueHelper","FieldDefaults","settingsUpdate","correctSettingsAfterChanges","requiredFeatures","FeatureNames","PickerFormulas","console","warn","disabledReason","runParams","reuseObjectsForFormulaDataAndContext","start","performance","now","allRunParams","runParameters","#runFormula","updateStop","handleStopAndPromise","isValue","isValidation","isSetting","afterRun","execSpecs","devHelper","valHelper","getPartsFor","showStart","FormulaVersions","V1","v1Raw","experimental","ok","v1Result","valueV1","v1","showResult","toFormulaResult","V2","v2Raw","v2Value","v2","promise","Error","showError","getFormulas","runAllFields","runOneFieldOrInitSettings","FormulaEngine","#formulaExecSpecsFactory","logSvc","ctTitle","#promiseHandler","#attributes","#contentTypeTitle","propsEngine","cycle","fieldsProps","valueUpdates","fieldUpdates","attr","lAttr","allAttributes","getFieldConstants","latestSettings","getFieldSettingsInCycle","settingsUpdateHelper","updateHelper","fieldProps","FormulaRunOneHelpersFactory","allResults","fixed","translationState","getTranslationState","DisableTranslation","constants","buildWrappers","formulaValidation","FormulaPromiseResult","addFormulaPromise","defineCallbackHandlerIfMissing","changesFromQueue","promiseComplete","FormulaPromiseHandler","#updateValueQueue","#fieldsSettingsService","fieldsSettingsService","modifiedChecker","#contentType","#modifiedChecker","promiseResult","hasPromise","Promise","newStop","stop","msg","openInDesigner","promises$","completed","#defineCallbackHandlerIfMissing","lcb","updateCallback$","#promiseComplete","FormulaValueCorrections","queue","queueItem","fieldQueue","promiseCompleted","retriggerFormulas","toProcess","valueChanges","newFieldProps","dataEntries","field","flat","modifiedValues","getValueUpdates","itemAttributes","getItemAttributes","setting","constantFieldPart","attribute","mergedSettings","updatedSettings","WrappersCatalog","WrappersLocalizationOnly","wrappers","WrapperHelper","getWrappers","isGroupStart","InputTypeCatalog","EntityDefault","StringDropdownQuery","EntityQuery","EntityContentBlocks","StringDropdown","EntityPicker","StringPicker","NumberPicker","isExternal","getCycleSettingsAndValues","getLatestSettingsAndValues","FieldsPropsEngineCycle","engine","initialValues","#getLatestSettingsAndValues","mergedValues","loopIndex","isFirstRound","formulaPromises","formulaEngine","constFieldPart","ItemFieldVisibility","identifier","defaultIsShow","ruleIsShow","toLowerCase","prev","hasRules","isVisibleDisabled","mergedVisible","Visible","VisibleDisabled","makeParentGroupsVisible","allConstFieldParts","groupField","innerField","endsPreviousGroup","stablePartsOfLanguage","stablePartOfField","constantPartsOfField","constantFieldParts","staticPartsOfField","FieldsSettingsConstantsService","#fieldSettingsHelper","itemForIds","entityReaderCurrent","labelReaderCurrent","#item","#itemFieldVisibility","#entityReaderCurrent","#labelReaderCurrent","#fieldSettingsSvc","stableDataOfLanguage","typeNameId","constParts","#constantPartsOfField","#stablePartsOfLanguage","reader","labelReader","entityReader","constPartOfLanguage","lInner","merged","labelMerged","Placeholder","Notes","withGeneric","mergeGenericSettings","c","inputTypeConfiguration","constPartsWithGroupVisibility","contentTypeNameId","mdMerger","initial","allPickers","constFieldParts","metadata","initialSettings","initialDisabled","Disabled","dropzonePreviewsClass","isLastInGroup","ValidationHelpers","isRequired","#shouldIgnoreValidators","Required","getValidators","validators","HyperlinkLibrary","#required","#requiredAdam","#regEx","#decimals","#numberMin","#numberMax","#listMin","#listMax","#formulaValidate","CustomJsonEditor","#jsonValidator","#ensureWarningsAndGetSettingsIfNoIgnore","control","valueRequired","Validators","required","adamItems","ValidationRegExJavaScript","pattern","Decimals","matchString","match","decimals","Min","min","Max","max","AllowMultiMin","countValues","minNoItems","AllowMultiMax","maxNoItems","warning","jsonMode","JsonValidation","parse","_warning","jsonWarning","jsonError","severity","formulaWarning","formulaMessage","formulaError","pd","convertValueToArray","emptyIsValid","Separator","ValidationHelperSpecs","pickersGet","schemaDisablesTranslation","getDisabledBecauseTranslations","FieldSettingsUpdateHelperFactory","contentTypeMetadata","fieldLogicTools","formReadOnly","slotIsEmpty","FieldSettingsUpdateHelper","formSlotIsEmpty","fieldValue","disableTranslation","#schemaDisablesTranslation","uiDisabledInThisLanguage","#getDisabledBecauseTranslations","uiDisabledForced","uiDisabled","DisableAutoTranslation","tools","attributeMetadata","m","Enabled","Values","v","hasPrimary","attrMd","fieldReader","hasEditableValues","hasCurrentReadonly","FieldsValuesModifiedHelper","valueUpdatesFromSideEffects","originalValues","changes","#findBestValue","FieldValueHelpers","fieldValuesAreEqual","fieldsUpdates","sideEffects","valSideEffect","getPickers","FieldsPropsEngine","#formConfig","#globalConfigService","#formsStateService","#contentTypeItemService","#itemService","#constantsService","#pickerFac","#fieldsValues","GlobalConfigService","ContentTypeItemService","ItemService","fieldsValues","forceDebug","extendName","forceEnable","ct","#fieldLangConstants","#updateHelper","#getPreparedParts","contentTypeSettings","_itemTitle","#itemAttributes","itemAttributesSignal","fieldLangConstants","readerSig","logicTools","debug","contentTypeItemSvc","FieldsPropertiesUpdates","fieldPropsMixins","hasChanges","updateSetting","queueWasEmpty","after","mergeMixins","mixins","ofField","startSync","filterRelevant","transferPickerData","FieldSettingsPickerUpdater","optsOnly","#filterRelevant","selOnly","#transferPickerData","part","toTransfer","count","logChanges","FieldsSignalsHelper","itemSvc","#itemGuid","#attributesLazy","lChange","difference","object","base","transform","iteratee","accumulator","isArr","isArrLike","isBuffer","isTypedArray","baseIteratee","Ctor","isObject","isFunction","baseCreate","getPrototype","arrayEach","baseForOwn","#reader","itemGuid","#fieldValueSigCache","lGet","#values","sig","#createValuesSignal","attrSig","#fieldValueOrNullSignal","getOrCreateWithInfo","getBestValue","isNew","effectTransferPickerData","regenerateProps","activateAnalyzer","FieldsSettingsService","#languageSvc","#contentTypeSvc","#itemSvc","#usrLangSvc","#propsEngine","#pickerSync","FormLanguageService","ContentTypeService","allProps","#startSync","#forceRefresh","#disabled","getEntityReader","#labelReader","lblLang","ContentTypeSettingsHelpers","#fieldValues","#fieldPropsCache","buildProxy","#fieldSignalsCache","proxy","allPropsOrNull","#allProps","disableForCleanUp","#fieldsPropsUpdate","debugOnlyCt","deps","idMsg","analyzer","slotWasEmpty","forceRefresh","watchRestart","prevFieldProps","hasRunOnce","setInterval","setTimeout","#regenerateProps","latestFieldProps","FieldTranslationInfo","getFieldsProps","#settings","#_settings","isAutoTranslatable","notForAutoTranslateBecauseOfType","autoTranslateIsDisabledByTypeButNotByConfig","canAutoTranslate","unlock","lock","getInfo","autoTranslate","findAutoTranslatableFields","addItemAttributeValueHelper","FieldsTranslateService","#contentTypeId","ItemHelper","getContentTypeNameId","contentTypeId","isTransaction","#getInfo","rNull","doesFieldHaveExistingDimension","currentEditable","defaultValue","FormLanguage","bothPrimary","#addItemAttributeValueHelper","toggleUnlockOnAll","isUnlock","translatable","findTranslatableFields","showMessageNoTranslatableFields","forAutoTranslate","fieldNames","sourceLanguageKey","isMany","areAllChecksKnown","autoTranslateLanguageKey","apiKeyInfo","EditApiKeyPaths","GoogleTranslate","IsDemo","alert","textsForTranslation","currentText","isAutoTranslationEnabledButWasDisabledByDefault","ApiKey","q","response","fieldsWithExistingDims","translations","translation","elem","innerHTML","translatedText","fieldHasExistingDimension","updateItemAttributeValue","copyFrom","copyFromLanguageKey","valueTranslation","ofLanguage","diffCurrent","isEditableOrReadonlyTranslationExist","linkReadOnly","linkWithLanguageKey","linkToOtherField","linkReadWrite","addItemAttributeDimension","autoTranslateMany","canTranslate","cantTranslateAndEmpty","findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault","x","ti","currentLanguage","getAttribute","_c0","ctx_r0","featureNameId","FeatureIconIndicatorComponent","FeatureComponentBase","__ngFactoryType__","selectors","decls","vars","consts","template","rf","ctx","FeatureIconIndicatorComponent_Conditional_0_Template","show","MatIconModule","TippyDirective","encapsulation","AutoTranslateDisabledWarningDialog","dialog","dialogData","ngOnInit","closeDialog","MAT_DIALOG_DATA","AutoTranslateDisabledWarningDialog_Conditional_5_Template","AutoTranslateDisabledWarningDialog_Conditional_6_Template","isAutoTranslateAll","MatCardModule","MatButtonModule","TranslateModule","MatDivider","vertical","_vertical","coerceBooleanProperty","inset","_inset","static","hostAttrs","hostVars","hostBindings","inputs","styles","changeDetection","MatDividerModule","imports","MatCommonModule","_c1","_c2","_c3","_c4","_c5","LIST_OPTION","InjectionToken","MatListItemTitle","_elementRef","ElementRef","MatListItemLine","MatListItemMeta","_MatListItemGraphicBase","_listOption","optional","_isAlignedAtStart","_getTogglePosition","MatListItemAvatar","MatListItemAvatar_BaseFactory","MatListItemIcon","MatListItemIcon_BaseFactory","MAT_LIST_CONFIG","MatListBase","_isNonInteractive","disableRipple","_disableRipple","_disabled","_defaultOptions","MatListItemBase","_ngZone","NgZone","_listBase","_platform","Platform","_hostElement","_isButtonElement","_noopAnimations","_avatars","_icons","lines","_explicitLines","coerceNumberProperty","_updateItemLines","_subscriptions","Subscription","_rippleRenderer","_hasUnscopedTextContent","rippleConfig","rippleDisabled","_CdkPrivateStyleLoader","_StructuralStylesLoader","globalRippleOptions","MAT_RIPPLE_GLOBAL_OPTIONS","animationMode","ANIMATION_MODULE_TYPE","nativeElement","nodeName","_initInteractiveListItem","hasAttribute","setAttribute","ngAfterViewInit","_monitorProjectedLinesAndTitle","unsubscribe","_removeTriggerEvents","_hasIconOrAvatar","classList","RippleRenderer","Injector","setupTriggerEvents","runOutsideAngular","merge","_lines","_titles","recheckUnscopedContent","_unscopedContent","_checkDomForUnscopedTextContent","numberOfLines","_inferLinesFromContent","unscopedContentEl","toggle","treatAsTitle","numOfLines","from","childNodes","node","nodeType","COMMENT_NODE","textContent","contentQueries","dirIndex","_t","MatActionList","MatActionList_BaseFactory","exportAs","provide","useExisting","ngContentSelectors","MatList","MatList_BaseFactory","MatListItem","_meta","_itemText","activated","_activated","_getAriaCurrent","_hasBothLeadingAndTrailing","MatListItem_BaseFactory","viewQuery","_r1","dependencies","CdkObserveContent","MatNavList","MatNavList_BaseFactory","MatListModule","ObserversModule","MatRippleModule","MatPseudoCheckboxModule","I18nKeys","NoTranslate","FromPrimary","FromOther","LinkReadOnly","LinkShared","getTemplateLanguages","linkType","lang","TranslationLinks","LinkReadWrite","findI18nKey","translationLink","Translate","DontTranslate","LinkCopyFrom","TranslateHelperComponent","#languageService","LanguageService","translationStateSignal","translationInfo","noLanguageRequired","showLanguageSelection","i18nRoot","submitDisabled","SnackBarWarningDemoComponent","SafeHtmlPipe","ctx_r2","translatableFields","language_r2","noTranslatableFieldsThatHaveContent","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_1_Conditional_1_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_1_Conditional_2_Template","noTranslatableFields","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_2_Conditional_1_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_2_Conditional_2_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_1_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Conditional_2_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_1_Template","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Conditional_2_Template","$implicit","setLanguage","AutoTranslateMenuDialogComponent_For_12_Conditional_5_Template","isTranslateWithGoogleFeatureEnabled","isTranslateMany","AutoTranslateMenuDialogComponent","fieldsTranslateService","isEnabled","EditUiTranslateWithGoogle","languagesSig","getTemplateLanguagesWithContent","countTranslatableFields","countTranslatableFieldsWithContent","isDisabled","langDefToUse","countEditable","countEditableWithContents","keydownEvents","event","isCtrlS","preventDefault","afterClosed","openFromComponent","newTranslationState","AutoTranslateMenuDialogComponent_For_12_Template","FeatureTextInfoComponent","NgClass","TranslateMenuDialogComponent_Conditional_55_For_10_Template","TranslateMenuDialogComponent","setLinkType","run","newState","oldState","TranslateMenuDialogComponent_Conditional_55_Template","ctx_r1","openAutoTranslateMenuDialog","dontTranslate","openTranslateMenuDialog","TranslateMenuComponent_Conditional_0_ng_template_11_Template","translationStateClass","infoLabel","infoMessage","disableTranslateButtonSignal","menu_r3","hideTranslateButton","TranslateMenuComponent","#fieldState","matDialog","viewContainerRef","fieldsTranslate","input","ui","TranslateMenuHelpers","getTranslationStateClass","#openDialog","autoFocus","width","component","TranslateMenuComponent_Conditional_0_Template","MatMenuModule","LocalizationWrapperComponent","editRoutingService","formsStateService","translateMenu","toggleTranslateButtonVisibility","hide","ViewContainerRef","tmp_1_0","tmp_3_0","FieldMetadataKey","FieldMetadata","Reflect","defineMetadata","ChangeAnchorTargetDirective","#target","#element","#observer","elementRef","zone","#setAnchorTargets","MutationObserver","observe","childList","subtree","disconnect","anchor","childAnchors","getElementsByTagName","$event","toggleHint","showExpand","notes","FieldHelperTextComponent_Conditional_0_Conditional_1_Template","FieldHelperTextComponent_Conditional_0_Conditional_2_Template","FieldHelperTextComponent_Conditional_0_Conditional_3_Template","hyperlinkDefaultWrapperFix","smallGap","showErrors","errorMessage","tmp_4_0","disableError","warningMessage","FieldHelperTextComponent","flatIfEmpty","#invalid","invalid","componentId","uiValue","getErrors","getWarnings","contains","parentNode","FieldHelperTextComponent_Conditional_0_Template","MatFormFieldModule","BooleanBaseComponent","basics","changedLabel","BooleanDefaultLogic","FieldLogicBase","BooleanDefault","fixedSettings","ReverseToggle","_label","#calculateLabel","TitleTrue","TitleFalse","BooleanDefaultComponent","checkedState","importMe","updateValue","setIfChanged","tmp_5_0","FormsModule","ReactiveFormsModule","MatSlideToggleModule","__decorate","tslib_es6","Sn","BooleanTristateLogic","BooleanTristate","TitleIndeterminate","BooleanTristateComponent","fs","bestLabel","#nextValue","reversed","CustomDefaultComponent","CustomJsonEditorLogic","Rows","JsonSchemaMode","JsonSchemaSource","JsonSchemaUrl","JsonSchemaRaw","JsonCommentsAllowed","StringJsonLogic","StringJson","CustomJsonEditorComponent","#config","#rows","focused","focused$","editorHeight","monacoOptions","lineHeight","jsonSchema","jsonComments","minimap","lineNumbers","lineDecorationsWidth","folding","scrollBeyondLastLine","tabSize","fixedOverflowWidgets","filename","codeChanged","code","onFocused","onBlurred","markTouched","CustomJsonEditorComponent_Conditional_4_Template","touchedAndInvalid","MonacoEditorComponent","NgStyle","_forTrack0","$index","$item","_trackRow","_forTrack1","MatCalendarBody_Conditional_0_Template","_cellPadding","numCols","MatCalendarBody_For_2_Conditional_1_Template","_firstRowOffset","labelMinRequiredCells","MatCalendarBody_For_2_For_3_Template","_r2","item_r3","_cellClicked","_emitActiveDateChange","$index_14_r4","$index_7_r5","_cellWidth","_isActiveCell","_isRangeStart","compareValue","_isRangeEnd","_isInRange","_isComparisonBridgeStart","_isComparisonBridgeEnd","_isComparisonStart","_isComparisonEnd","_isInComparisonRange","_isPreviewStart","_isPreviewEnd","_isInPreview","cssClasses","ariaLabel","_isSelected","todayValue","_getDescribedby","_isComparisonIdentical","displayValue","MatCalendarBody_For_2_Template","row_r6","MatMonthView_For_4_Template","day_r1","long","narrow","MatCalendar_ng_template_0_Template","MatCalendar_Case_2_Template","activeDate","_dateSelected","_dragStarted","_dragEnded","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","_activeDrag","MatCalendar_Case_3_Template","_r3","_monthSelectedInYearView","_goToDateInView","MatCalendar_Case_4_Template","_r4","_yearSelectedInMultiYearView","MatDatepickerContent_ng_template_2_Template","MatDatepickerToggle_Conditional_2_Template","MatDatepickerIntl","calendarLabel","openCalendarLabel","closeCalendarLabel","prevMonthLabel","nextMonthLabel","prevYearLabel","nextYearLabel","prevMultiYearLabel","nextMultiYearLabel","switchToMonthViewLabel","switchToMultiYearViewLabel","startDateLabel","endDateLabel","comparisonDateLabel","formatYearRange","formatYearRangeLabel","token","uniqueIdCounter$1","MatCalendarCell","rawValue","activeCapturingEventOptions","normalizePassiveListenerOptions","passive","capture","passiveCapturingEventOptions","passiveEventOptions","MatCalendarBody","_intl","_skipNextFocus","_focusActiveCellAfterViewChecked","rows","startValue","endValue","activeCell","ngAfterViewChecked","_focusActiveCell","isRange","cellAspectRatio","previewStart","previewEnd","selectedValueChange","EventEmitter","previewChange","activeDateChange","dragStarted","dragEnded","_startDateLabelId","_endDateLabelId","_comparisonStartDateLabelId","_comparisonEndDateLabelId","_didDragSinceMouseDown","_injector","comparisonDateAccessibleName","row","idGenerator","_IdGenerator","element","_touchmoveHandler","_enterHandler","_leaveHandler","_mousedownHandler","isBrowser","_mouseupHandler","_touchendHandler","cell","emit","ngOnChanges","columnChanges","rowIndex","colIndex","cellNumber","movePreview","afterNextRender","focus","_scheduleFocusActiveCellAfterViewChecked","isStart","isEnd","isInRange","previousCell","previousRow","nextCell","nextRow","_getCellFromElement","getActualTouchTarget","getCellElement","relatedTarget","cellElement","closest","col","outputs","attrs","isTableCell","rangeEnabled","touchLocation","changedTouches","elementFromPoint","clientX","clientY","DateRange","_disableStructuralEquivalency","MatDateSelectionModel","selection","_adapter","_selectionChanged","selectionChanged","updateSelection","oldValue","_isValidDateInstance","date","isDateInstance","MatSingleDateSelectionModel","adapter","isComplete","clone","MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER","Optional","SkipSelf","DateAdapter","useFactory","MAT_SINGLE_DATE_SELECTION_MODEL_FACTORY","parent","MAT_DATE_RANGE_SELECTION_STRATEGY","uniqueIdCounter","MatMonthView","_changeDetectorRef","ChangeDetectorRef","_dateFormats","MAT_DATE_FORMATS","_dateAdapter","_dir","Directionality","_rangeStrategy","_rerenderSubscription","EMPTY","_selectionKeyPressed","_activeDate","oldActiveDate","validDate","getValidDateOrNull","deserialize","today","clampDate","_hasSameMonthAndYear","_init","_selected","_setRanges","_minDate","_maxDate","activeDrag","selectedChange","_userSelection","_matCalendarBody","_monthLabel","_weeks","_firstWeekOffset","_rangeStart","_rangeEnd","_comparisonRangeStart","_comparisonRangeEnd","_previewStart","_previewEnd","_isRange","_todayDate","_weekdays","_VisuallyHiddenLoader","ngAfterContentInit","localeChanges","startWith","comparisonChange","firstChange","_clearPreview","selectedDate","_getDateFromDayOfMonth","rangeStartDate","rangeEndDate","_getDateInCurrentMonth","markForCheck","_updateActiveDate","compareDate","_handleCalendarBodyKeydown","isRtl","_isRtl","keyCode","LEFT_ARROW","addCalendarDays","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","HOME","getDate","END","getNumDaysInMonth","PAGE_UP","altKey","addCalendarYears","addCalendarMonths","PAGE_DOWN","ENTER","SPACE","_canSelect","ESCAPE","hasModifierKey","stopPropagation","_handleCalendarBodyKeyup","_getCellCompareValue","display","monthLabel","format","getMonthNames","getMonth","toLocaleUpperCase","firstOfMonth","createDate","getYear","getDayOfWeek","getFirstDayOfWeek","_initWeekdays","_createWeekCells","_previewChanged","previewRange","createPreview","dragRange","createDrag","detectChanges","dragDropResult","dayOfMonth","firstDayOfWeek","narrowWeekdays","getDayOfWeekNames","weekdays","slice","daysInMonth","dateNames","getDateNames","_shouldEnableDate","dateA11yLabel","cellClasses","d1","d2","year","month","day","Date","getTime","selectedValue","MatMultiYearView","isSameMultiYearView","_setSelectedYear","yearSelected","_years","_todayYear","_selectedYear","minYearOfPage","getActiveOffset","_createCellForYear","_yearSelected","selectedYear","_getDateFromYear","yearsPerPage","_getActiveCell","activeMonth","yearName","getYearName","_shouldEnableYear","dateAdapter","date1","date2","year1","year2","startingYear","getStartingYear","euclideanModulo","MatYearView","_setSelectedMonth","monthSelected","_months","_yearLabel","_todayMonth","_selectedMonth","_monthSelected","selectedMonth","_getDateFromMonth","_getMonthInCurrentYear","monthNames","_createCellForMonth","normalizedDate","monthName","monthYearA11yLabel","_shouldEnableMonth","activeYear","_isYearAndMonthAfterMaxDate","_isYearAndMonthBeforeMinDate","maxYear","maxMonth","minYear","minMonth","MatCalendarHeader","calendar","MatCalendar","changeDetectorRef","stateChanges","periodButtonText","currentView","monthYearLabel","_formatMinAndMaxYearLabels","periodButtonDescription","periodButtonLabel","prevButtonLabel","nextButtonLabel","currentPeriodClicked","previousClicked","nextClicked","previousEnabled","_isSameView","nextEnabled","maxYearOfPage","_periodButtonLabelId","MatButton","MatIconButton","headerComponent","_calendarHeaderPortal","_intlChanges","_moveFocusOnNextTick","startAt","_startAt","startView","viewChanged","_userDragDrop","monthView","yearView","multiYearView","_clampedActiveDate","_currentView","viewChangedResult","ComponentPortal","focusActiveCell","minDateChange","sameDate","previousValue","currentValue","maxDateChange","changeRequiringRerender","view","_getCurrentViewComponent","updateTodaysDate","normalizedYear","normalizedMonth","CdkPortalOutlet","CdkMonitorFocus","matDatepickerAnimations","transformPanel","trigger","transition","animate","keyframes","style","opacity","fadeInCalendar","MAT_DATEPICKER_SCROLL_STRATEGY","overlay","Overlay","scrollStrategies","reposition","MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY_PROVIDER","MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY","MatDatepickerContent","_globalModel","_rangeSelectionStrategy","_model","_calendar","color","datepicker","_isAbove","_animationState","_animationDone","_isAnimating","_closeButtonText","_closeButtonFocused","_actionsPortal","_dialogLabelId","intl","touchUi","_handleUserSelection","newSelection","selectionFinished","_handleUserDragDrop","_startExitAnimation","_handleAnimationEvent","phaseName","_getSelected","_applyPendingSelection","_assignActions","portal","forceRerender","_selectYear","_selectMonth","_viewChanged","calendarHeaderComponent","panelClass","_getMinDate","_getMaxDate","_getDateFilter","CdkTrapFocus","animation","MatDatepickerBase","_overlay","_viewContainerRef","_scrollStrategy","_inputStateChanges","_document","DOCUMENT","datepickerInput","getStartValue","_color","getThemePalette","xPosition","yPosition","restoreFocus","openedStream","closedStream","_panelClass","coerceStringArray","opened","_opened","_overlayRef","_componentRef","_focusedElementBeforeOpen","_backdropHarnessClass","positionChange","positionStrategy","getConfig","FlexibleConnectedPositionStrategy","_setConnectedPositions","updatePosition","_destroyOverlay","select","registerInput","registerActions","instance","removeActions","_getFocusedElementPierceShadowDom","_openOverlay","canRestoreFocus","completeClose","location","activeElement","_forwardContentValues","getOverlayLabelId","isDialog","overlayRef","OverlayConfig","_getDialogStrategy","_getDropdownStrategy","hasBackdrop","backdropClass","direction","scrollStrategy","block","_getCloseStream","attach","dispose","position","global","centerHorizontally","centerVertically","strategy","flexibleConnectedTo","getConnectedOverlayOrigin","withTransformOriginOn","withFlexibleDimensions","withViewportMargin","withLockedPosition","primaryX","secondaryX","primaryY","secondaryY","withPositions","originX","originY","overlayX","overlayY","ctrlShiftMetaModifiers","backdropClick","detachments","every","modifier","booleanAttribute","MatDatepicker","MatDatepicker_BaseFactory","MatDatepickerInputEvent","targetElement","MatDatepickerInputBase","_isInitialized","_getValueFromModel","_pendingValue","_assignValueProgrammatically","_parentDisabled","newValue","blur","dateChange","dateInput","_onTouched","_validatorOnChange","_cvaOnChange","_valueChangesSubscription","_localeSubscription","_parseValidator","_lastValueValid","matDatepickerParse","text","_filterValidator","controlValue","_matchesFilter","matDatepickerFilter","_minValidator","matDatepickerMin","actual","_maxValidator","matDatepickerMax","_getValidators","_registerModel","model","_assignValue","_shouldHandleChangeEvent","_isValidValue","_formatValue","dateInputsHaveChanged","registerOnValidatorChange","validate","_validator","writeValue","registerOnChange","registerOnTouched","setDisabledState","_onKeydown","_openPopup","_onInput","lastValueWasValid","hasChanged","_onChange","_onBlur","_assignValueToModel","MAT_DATEPICKER_VALUE_ACCESSOR","NG_VALUE_ACCESSOR","forwardRef","MatDatepickerInput","multi","MAT_DATEPICKER_VALIDATORS","NG_VALIDATORS","_formField","MAT_FORM_FIELD","_closedSubscription","_openedSubscription","matDatepicker","_datepicker","_ariaOwns","_min","validValue","_max","_dateFilter","wasMatchingValue","compose","getLabelId","modelValue","toIso8601","MAT_INPUT_VALUE_ACCESSOR","MatDatepickerToggleIcon","MatDatepickerToggle","_stateChanges","tabIndex","_customIcon","_button","defaultTabIndex","HostAttributeToken","parsedTabIndex","Number","_watchStateChanges","_open","datepickerStateChanged","of","inputStateChanged","datepickerToggled","MatDatepickerModule","providers","OverlayModule","A11yModule","PortalModule","CdkScrollableModule","a0","a1","a2","OwlCalendarBodyComponent_tr_0_td_1_Template","item_r2","selectCell","colIndex_r4","rowIndex_r5","cellClass","cellRatio","isActiveCell","isRangeFrom","isRangeTo","isSelected","out","OwlCalendarBodyComponent_tr_0_Template","OwlMonthViewComponent_ul_0_li_1_Template","week_r1","OwlMonthViewComponent_ul_0_Template","weekNumbers","OwlMonthViewComponent_th_4_Template","weekday_r3","short","OwlCalendarComponent_owl_date_time_month_view_18_Template","handlePickerMomentChange","dateSelected","userSelected","pickerMoment","selecteds","selectMode","showCalendarWeeks","hideOtherMonths","OwlCalendarComponent_owl_date_time_year_view_19_Template","selectMonthInYearView","goToDateInView","DateView","MONTH","OwlCalendarComponent_owl_date_time_multi_year_view_20_Template","selectYearInMultiYearView","YEAR","OwlTimerBoxComponent_div_0_Template","OwlTimerComponent_owl_date_time_timer_box_2_Template","setSecondValue","upSecondButtonLabel","downSecondButtonLabel","upSecondEnabled","downSecondEnabled","secondValue","stepSecond","OwlTimerComponent_div_3_Template","setMeridiem","hour12ButtonLabel","OwlDateTimeContainerComponent_owl_date_time_calendar_1_Template","selectYear","selectMonth","selectDate","minDateTime","maxDateTime","dateTimeFilter","yearOnly","multiyearOnly","OwlDateTimeContainerComponent_owl_date_time_timer_2_Template","timeSelected","showSecondsTimer","hour12Timer","stepHour","stepMinute","OwlDateTimeContainerComponent_div_3_Template","handleClickOnInfoGroup","to_r5","handleKeydownOnInfoGroup","from_r6","activeSelectedIndex","fromLabel","fromFormattedValue","toLabel","toFormattedValue","OwlDateTimeContainerComponent_div_4_Template","_r7","onCancelClicked","onSetClicked","cancelLabel","setLabel","OwlDialogContainerComponent_ng_template_0_Template","OwlDateTimeTriggerDirective","dtPicker","owlDTTriggerDisabledClass","changeDetector","watchStateChanges","handleClickOnHost","inputDisabled","dtInput","disabledChange","pickerDisabled","dir","standalone","OWL_DATE_TIME_FORMATS","OWL_DATE_TIME_LOCALE","OWL_DATE_TIME_LOCALE_FACTORY","LOCALE_ID","DateTimeAdapter","_localeChanges","millisecondsInDay","milliseondsInMinute","compare","dateFirst","dateSecond","diff","compareYear","setLocale","locale","getLocale","nextUniqueId","MULTI_YEARS","OwlDateTime","_showSecondsTimer","val","_hour12Timer","_stepHour","_stepMinute","_stepSecond","_firstDayOfWeek","_hideOtherMonths","_id","formatString","pickerType","dateTimeFormats","fullPickerInput","datePickerInput","timePickerInput","dateTimeAdapter","dateTimeChecker","dateTime","getValidDate","obj","OwlDateTimeIntl","upSecondLabel","downSecondLabel","upMinuteLabel","downMinuteLabel","upHourLabel","downHourLabel","cancelBtnLabel","setBtnLabel","rangeFromLabel","rangeToLabel","hour12AMLabel","hour12PMLabel","prov","CalendarCell","OwlCalendarBodyComponent","owlDTCalendarBodyClass","isInSingleMode","isInRangeMode","elmRef","ngZone","selectedValues","fromValue","toValue","onStable","asObservable","cmp","DefaultOptions","multiYear","yearRows","yearsPerRow","OptionsTokens","optionsProviders","defaultOptionsFactory","multiYearOptionsFactory","OwlMultiYearViewComponent","_selectMode","initiated","setSelectedYears","cdRef","oldSelected","isSameDay","_selecteds","_pickerMoment","oldMoment","isSameYearList","generateYearList","todayYear","years","selectedYears","_selectedYears","tableHeader","pickerIntl","owlDTCalendarView","owlDTCalendarMultiYearView","change","pickerMomentChange","keyboardEnter","selectCalendarCell","firstDateOfMonth","getHours","getMinutes","getSeconds","prevYearList","nextYearList","pickerMomentYear","offset","j","yearCell","createYearCell","handleCalendarKeydown","moment","startDateOfYear","isYearEnabled","calendarBodyElm","OwlYearViewComponent","generateMonthList","setSelectedMonths","hasSameYear","months","localeSub","selectedMonths","todayMonth","getMonthInCurrentYear","MONTHS_PER_YEAR","monthCell","createMonthCell","startDateOfMonth","isMonthEnabled","dateLeft","dateRight","OwlMonthViewComponent","isDefaultFirstDayOfWeek","generateWeekDays","generateCalendar","setSelectedDates","isSameMonth","days","_days","firstRowOffset","selectedDates","userSelection","updateFirstDayOfWeek","longWeekdays","shortWeekdays","todayDate","daysDiff","getDay","abs","week","dateCell","createDateCell","weekNumber","getISOWeek","clonedDate","UTC","getFullYear","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","ceil","getLocaleFirstDayOfWeek","dateName","isDateEnabled","dayValue","dayDiff","differenceInCalendarDays","OwlCalendarComponent","isMonthView","moveFocusOnNextTick","showControlArrows","owlDTCalendarClass","dateClicked","intlChangesSub","dateFilterForViews","toggleViews","nextView","prevButtonEnabled","isSameView","nextButtonEnabled","OwlTimerBoxComponent","hasFocus","valueInput","boxValue","isNaN","owlDTTimerBoxClass","showDivider","step","valueChange","inputChange","inputStream","inputStreamSub","onValueInputMouseWheelBind","onValueInputMouseWheel","bind","debounceTime","inputValue","updateValueViaInput","bindValueInputMouseWheel","unbindValueInputMouseWheel","upBtnClicked","downBtnClicked","handleInputChange","focusIn","focusOut","delta","wheelDelta","deltaY","detail","upBtnDisabled","downBtnDisabled","returnValue","upBtnAriaLabel","downBtnAriaLabel","inputLabel","valueInput_r2","OwlTimerComponent","_minDateTime","_maxDateTime","hourValue","hourBoxValue","hours","isPM","minuteValue","upHourButtonLabel","downHourButtonLabel","upMinuteButtonLabel","downMinuteButtonLabel","owlDTTimerClass","owlDTTimeTabIndex","setHourValueViaInput","setHourValue","setHours","setMinuteValue","minutes","setMinutes","seconds","setSeconds","upHourEnabled","compareHours","downHourEnabled","upMinuteEnabled","compareMinutes","downMinuteEnabled","compareSeconds","amount","comparedDate","owlDateTimePickerAnimations","transformPicker","query","animateChild","fadeInPicker","OwlDateTimeContainerComponent","hidePickerStream","hidePicker$","confirmSelectedStream","confirmSelected$","beforePickerOpenedStream","beforePickerOpened$","pickerOpenedStream","pickerOpened$","_clamPickerMoment","showControlButtons","pickerMode","containerElm","owlDTContainerClass","owlDTPopupContainerClass","owlDTDialogContainerClass","owlDTInlineContainerClass","owlDTContainerDisabledClass","owlDTContainerId","owlDTContainerAnimation","retainStartTime","retainEndTime","initPicker","focusPicker","handleContainerAnimationStart","toState","handleContainerAnimationDone","dateSelectedInSingleMode","dateSelectedInRangeMode","time","setActiveSelectedIndex","updateAndCheckCalendarDate","to","endAt","timer","uniqueId","OwlDialogConfig","ariaDescribedBy","disableClose","role","paneClass","closeOnNavigation","height","maxWidth","NoopScrollStrategy","OwlDialogRef","container","_beforeClose$","_beforeOpen$","_afterOpen$","_afterClosed$","locationChanged","animationStateChanged","take$1","componentInstance","dialogResult","detachBackdrop","startExitAnimation","getPositionStrategy","left","right","top","bottom","updateSize","isAnimating","beforeOpen","afterOpen","beforeClose","zoomFadeIn","zoomFadeInFrom","transformOrigin","OwlDialogContainerComponent","BasePortalOutlet","_config","owlDialogContainerClass","owlDialogContainerTabIndex","owlDialogContainerId","owlDialogContainerRole","owlDialogContainerAriaLabelledby","ariaLabelledBy","owlDialogContainerAriaDescribedby","owlDialogContainerAnimation","focusTrapFactory","portalOutlet","y","ox","oy","scale","elementFocusedBeforeDialogWasOpened","attachComponentPortal","hasAttached","savePreviouslyFocusedElement","attachTemplatePortal","setConfig","calculateZoomOrigin","onAnimationStart","onAnimationDone","trapFocus","wh","innerWidth","innerHeight","resolve","then","focusTrap","focusInitialElementWhenReady","toFocus","destroy","OWL_DIALOG_DATA","OWL_DIALOG_SCROLL_STRATEGY","OWL_DIALOG_SCROLL_STRATEGY_PROVIDER","OWL_DIALOG_SCROLL_STRATEGY_PROVIDER_FACTORY","OWL_DIALOG_DEFAULT_OPTIONS","OwlDialogService","openDialogs","parentDialog","_openDialogsAtThisLevel","_beforeOpenAtThisLevel","_afterOpenAtThisLevel","_afterAllClosed","_afterAllClosedAtThisLevel","defaultOptions","overlayContainer","ariaHiddenElements","Map","afterAllClosed","defer","closeAll","componentOrTemplateRef","applyConfigDefaults","extendObject","dest","sources","TypeError","hasOwnProperty","getDialogById","createOverlay","dialogContainer","attachDialogContainer","dialogRef","attachDialogContent","hideNonDialogContentFromAssistiveTechnology","removeOpenDialog","TemplateRef","createInjector","contentRef","userInjector","injectionTokens","WeakMap","PortalInjector","overlayConfig","getOverlayConfig","containerPortal","containerRef","dialogConfig","minWidth","minHeight","maxHeight","indexOf","splice","removeAttribute","clear","getContainerElement","parentElement","siblings","children","sibling","OWL_DTPICKER_SCROLL_STRATEGY","OWL_DTPICKER_SCROLL_STRATEGY_PROVIDER","OWL_DTPICKER_SCROLL_STRATEGY_PROVIDER_FACTORY","OwlDateTimeComponent","_dtInput","_endAt","_pickerType","formatNativeInputValue","_pickerMode","mode","dialogService","defaultScrollStrategy","afterPickerClosed","beforePickerOpen","afterPickerOpen","confirmSelectedChange","dtInputSub","hidePickerStreamSub","confirmSelectedStreamSub","pickerOpenedStreamSub","pickerBeforeOpenedStreamSub","focusedElementBeforeOpen","popupRef","openAsDialog","openAsPopup","pickerContainer","confirmSelect","detach","pickerContainerPortal","isAttached","coerceArray","createPopup","componentRef","createPopupPositionStrategy","filter$1","withPush","offsetY","OWL_DATETIME_VALUE_ACCESSOR$1","OwlDateTimeInputDirective","OWL_DATETIME_VALIDATORS","_required","validatorOnChange","owlDateTime","registerDateTimePicker","owlDateTimeFilter","_dateTimeFilter","_value","lastValueValid","oldDate","_values","owlDateTimeInputAriaHaspopup","owlDateTimeInputAriaOwns","minIso8601","maxIso8601","owlDateTimeInputDisabled","renderer","rangeSeparator","dateTimeChange","dateTimeInput","dtPickerSub","onModelChange","onModelTouched","parseValidator","owlDateTimeParse","minValidator","owlDateTimeMin","controlValueFrom","controlValueTo","maxValidator","owlDateTimeMax","filterValidator","rangeValidator","owlDateTimeRange","requiredRangeValidator","owlRequiredDateTimeRange","validator","handleKeydownOnHost","handleBlurOnHost","handleInputOnHost","changeInputInSingleMode","changeInputInRangeMode","changeInputInRangeFromToMode","handleChangeOnHost","setProperty","fromFormatted","toFormatted","convertTimeStringToDateTimeString","timeString","parseInput","isSameValue","fromString","OWL_DATETIME_VALUE_ACCESSOR","OwlDateTimeInlineComponent","owlDTInlineClass","OwlDialogModule","mod","inj","CommonModule","OwlDateTimeModule","range","valueFunction","valuesArray","String","dayjs","LocalizedFormat","localData","OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS","OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS_FACTORY","useUtc","DayjsDateTimeAdapter","owlDateTimeLocale","dayjsLocalData","localeData","_localeData","longMonths","shortMonths","monthsShort","longDaysOfWeek","weekdaysShort","shortDaysOfWeek","narrowDaysOfWeek","weekdaysMin","dates","hour","minute","valueOf","startOf","toISOString","isSame","NaN","constructedDayjs","createDayjs","trySetUnit","unitType","displayFormat","parseFormat","utc","OWL_DAYJS_DATE_TIME_FORMATS","DayJsDateTimeModule","useClass","OwlDayJsDateTimeModule","useValue","MAT_DAYJS_DATE_ADAPTER_OPTIONS","MatDayjsDateAdapter","dateLocale","_options","shouldUseUtc","localizedFormat","customParseFormat","dayJs","valueIsString","longDateFormat","parsed","formatWithSmallDay","formatWithSmallMonth","formatWithoutSeparators","formatWithSmallDayAndMonth","dayPart","monthPart","isTyped","toDate","setUTCHours","getUTCHours","getTimezoneOffset","MAT_DATE_LOCALE","MAT_DAYJS_DATE_FORMATS","OWL_DAYJS_FORMATS","MatDayjsModule","DateTimeDefaultLogic","picker_r3","owlPicker_r5","valueForTimePicker","DatetimeDefaultComponent","owlDayjsDateAdapter","useTimePicker","matDayjsDateAdapter","toJSON","DatetimeDefaultComponent_Conditional_0_Template","DatetimeDefaultComponent_Conditional_1_Template","MatInputModule","DatetimeDefaultComponent_1","EmptyDefaultComponent","EmptyMessageComponent","EmptyMessageComponent_Conditional_0_Template","visible","EntityContentBlocksLogic","EnableAddExisting","EnableEdit","EntityType","DataSourceHelpers","stripHtml","stringWithHtml","div","innerText","data2PickerItem","getMasks","patchMasks","parseMasks","buildMasks","DataSourceMasksHelper","parentLog","enableLog","#featInfoEnabled","#featInfoWarned","#isDeveloper","#helpers","enableChildren","allowUse","PickerUiMoreInfo","dialogContext","User","IsSystemAdmin","infoEnabled","#masks","streamName","valueMustUseGuid","valueDefaultsToGuid","masks","#getMasks","maybe","maybeTitle","Title","previewValue","hasPlaceholders","sourceStreamName","rules","Rules","fromMasks","#parseMasks","finalLabel","useInfos","valueItem","search","RegExp","appUrl","portalRoot","appRoot","#buildMasks","ItemTooltip","ItemInformation","ItemLink","Label","PreviewValue","DataSourceMoreFieldsHelper","fieldListToRetrieveFromServer","treeConfig","PickerTreeConfiguration","maskSettings","MoreFields","TreeChildIdField","TreeParentIdField","TreeChildParentRefField","TreeParentChildRefField","extractFieldNamesFromTokens","distinct","enableSimpleFields","regex","exec","trimmedMatch","logSpecsDataSourceBase","triggerGetAll","newIconOptions","fileLoadSettings","DataSourceBase","getAll$","BehaviorSubject","guidsToRefresh","noItemsLoadingFalse","noItemsLoadingTrue","fieldsHelper","helpers","constructorEnd","forField","additionalGuids","createMaskHelper","moreSettings","fieldsToRetrieve","logSpecsDataSourceEntityQueryBase","getFromBackend","loadMoreIntoSignal","DataSourceEntityBase","querySvc","QueryService","#typeOrParams","#typeOrParams$","toObservable","#paramsDebounced$","distinctUntilChanged","#fullList","combineLatest","switchMap","typeName","initialValue","#prefetchNew","#modified","prefetch","modified","overrides","entityGuids","guids","#loadMoreIntoCache","setParams","msgForLog","additions","DataSourceAppAssets","_typeName","_guids","purposeForLog","AssetsRootFolder","rootFolder","AssetsFileFilter","fileFilter","AssetsType","typeLower","stream","fieldMask","getFromQuery","DataAdapterAppAssets","reRegExpChar","reHasRegExpChar","lodash_es_escapeRegExp","escapeRegExp","test","findAllIconsInCss","cssSelector","showPrefix","regEx","buildRegEx","fallbackRegex","buildRegExFromPrefixAndSuffix","allRules","getAllCssRules","styleSheets","getCssRules","Boolean","foundList","duplicateDetector","allRulesWithSelector","rule","selectorText","selector","lastIndex","groups","ValueRaw","iconClass","Rule","Selector","classPrefix","prefix","buildRegExFromPrefix","startedWithDot","cssSelectorPart","valuePart","sheet","cssRules","DataSourceCss","scriptsLoaderService","#iconEntities","CssSourceFile","CssSelectorFilter","#dataMaskHelper","maskHelper","pickerItem","DataAdapterCss","DataSourceEmpty","#label","notSelectable","preSetup","DataAdapterEmpty","DataSourceEntity","inputSpecs","mustUseGuid","entities","getEntities","contentTypes","itemIds","Default","DataAdapterEntity","DataSourceQuery","formState","#appId","#streamName","StreamName","sets","queryName","Query","queryUrl","#transformData","streamNames","converted","itemsMaybeReadOnly","#setDisableEdit","queryEntities","AppId","DataAdapterQuery","DataSourceString","classLogEnabled","option","DataAdapterString","logSpecsStateAdapter","reorder","sepAndOpts","createEntityTypes","attachCallback","typesForNew","correctStringEmptyValue","StateAdapter","#formConfigSvc","#createTypesRaw","ts","#fieldName","updated","orig","asUi","toUi","pickerAllowsEmpty","uiMapper","#focusOnSearchComponent","focusCallback","#updateValue","operation","flush","reorderIndexes","moveItemInArray","previousIndex","currentIndex","StateUiMapperBase","StateUiMapperNoop","StateUiMapperNumberArray","stringValue","parsedNumber","StateUiMapperStringArray","PickerSourcesCustom","UiPickerSourceCustomList","UiPickerSourceCustomCsv","PickerConfigs","UiPickerSourceQuery","UiPickerSourceEntity","UiPickerSourceAppAssets","UiPickerSourceCss","UiPickerModeIsTree","PickerDataSetup","setupPickerData","pdWithSetupState","alreadyStarted","setupAlreadyStarted","#getStateAdapter","dataSourceType","#getSourceAdapter","uiMapperType","partsMap","stateAdapter","dsType","forcePickerConfig","dataAdapterType","mapNameToDataAdapter","#throwIfSourceAdapterNotAllowed","StringFontIconPicker","NumberDropdown","BaseTreeControl","dataNodes","expansionModel","SelectionModel","trackBy","getLevel","isExpandable","getChildren","dataNode","_trackByValue","collapse","deselect","toggleDescendants","collapseDescendants","expandDescendants","collapseAll","toBeProcessed","getDescendants","FlatTreeControl","results","expandAll","CDK_TREE_NODE_OUTLET_NODE","CdkTreeNodeOutlet","viewContainer","_node","CdkTreeNodeOutletContext","level","CdkTreeNodeDef","when","getTreeControlMissingError","CdkTree","_differs","IterableDiffers","_onDestroy","_dataDiffer","_defaultNodeDef","_dataSubscription","_levels","_parents","_ariaSets","_dataSource","_switchDataSource","treeControl","levelAccessor","childrenAccessor","expansionKey","_nodeOutlet","_nodeDefs","viewChange","MAX_VALUE","_expansionModel","_flattenedNodes","_nodeType","_nodes","_keyManagerNodes","_keyManagerFactory","TREE_KEY_MANAGER","_keyManager","_viewInit","_initializeKeyManager","ngAfterContentChecked","_updateDefaultNodeDefinition","_subscribeToDataChanges","_checkTreeControlUsage","_initializeDataDiffer","defaultNodeDefs","def","_setNodeTypeIfUnset","newType","_getExpansionModel","dataStream","isDataSource","connect","isObservable","_getRenderData","takeUntil","renderingData","_renderDataChanges","expansionChanges","_emitExpansionChanges","renderNodes","flattenedNodes","_computeRenderingData","convertedData","_updateCachedData","renderNodeChanges","_updateKeyManagerItems","nodes","added","_emitExpansionState","removed","keyManagerNodes","_getExpansionKey","skipPredicate","typeAheadDebounceInterval","horizontalOrientation","_index","dataDiffer","parentData","forEachOperation","adjustedPreviousIndex","insertNode","move","forEachIdentityChange","record","newData","_getNodeDef","nodeData","_getLevelAccessor","has","createEmbeddedView","CdkTreeNode","mostRecentTreeNode","_getDescendants","child","_getChildrenAccessor","_getDirectChildren","expanded","_findChildrenByLevel","coerceObservable","levelDelta","startIndex","findIndex","dataNodeLevel","expectedLevel","currentLevel","_registerNode","_unregisterNode","_getLevel","_getSetSize","_getAriaSet","_getPositionInSet","_getNodeParent","_getNodeChildren","_sendKeydownToKeyManager","onKeydown","getValue","Infinity","_getAllChildrenRecursively","allChildren","nextChildren","concatMap","parentKey","_findParentForNode","cachedNodes","parentIndex","_flattenNestedNodesWithExpansion","childKey","nestedNodes","rootNodes","_calculateParents","_tree","_tabindex","_type","_role","_isExpandable","_inputIsExpandable","_inputIsExpanded","_data","typeaheadLabel","getLabel","activation","expandedChange","_destroyed","_dataChanges","_shouldFocus","_parentNodeAriaLevel","isLeafNode","_getAriaExpanded","getParentNodeAriaLevel","nodeElement","isNodeElement","numberAttribute","getParent","unfocus","activate","makeFocusable","_focusItem","focusItem","_setActiveItem","cssUnitPattern","CdkTreeNodePadding","_treeNode","_element","_currentPadding","indentUnits","_level","_setLevelInput","indent","_indent","_setIndentInput","_setPadding","_paddingIndent","nodeLevel","forceChange","padding","paddingProp","resetProp","units","CdkTreeNodeToggle","recursive","_toggle","CdkTreeModule","MatTreeNode","tabIndexInputBinding","_tabIndexInputBinding","_getTabindexAttribute","isNoopTreeKeyManager","keyManager","_isNoopTreeKeyManager","MatTreeNodeDef","MatTreeNodeDef_BaseFactory","MatTreeNodePadding","MatTreeNodePadding_BaseFactory","MatTreeNodeOutlet","MatTree","MatTree_BaseFactory","MatTreeNodeToggle","MatTreeNodeToggle_BaseFactory","MatTreeModule","MatTreeFlattener","transformFunction","_flattenNode","resultNodes","parentMap","flatNode","childrenNodes","_flattenChildren","childParentMap","flattenNodes","structuredData","expandFlattenedNodes","currentExpand","MatTreeFlatDataSource","DataSource","_treeControl","_treeFlattener","_flattenedData","_expandedData","initialData","collectionViewer","PickerPartBaseComponent","enableTextEntry","selectedItem","itemCount","expandDialog","openNewEntityDialog","toggleFreeText","removeItem","PickerItemButtonsComponent","uiFeatures","buttons","uif","noRemove","PickerItemButtonsComponent_Conditional_0_Template","PickerItemButtonsComponent_Conditional_1_Template","PickerItemButtonsComponent_Conditional_2_Template","ClickStopPropagationDirective","goToLink","helpLink","PickerIconHelpComponent","PickerIconHelpComponent_Conditional_0_Template","infoBox","PickerIconInfoComponent","PickerIconInfoComponent_Conditional_0_Template","messagesDict","instanceAlreadyExist","instanceNotExist","childrenInstancesNotFoundGrouped","childrenInstancesNotFoundSingleton","singletonInstanceAlreadyExist","tippyFakeInstance","clearDelayTimeouts","disable","enable","hideWithInteractivity","plugins","popper","popperInstance","reference","setContent","setProps","isVisible","isDestroyed","isMounted","isShown","unmount","NGX_TIPPY_MESSAGES","NGX_TIPPY_CONFIG","DevModeService","isDevMode","InstanceChangeReasonEnum","SetInstance","HideWithInteractivity","Disable","SetProps","SetContent","Unmount","ClearDelayTimeouts","Destroy","NgxTippyNamesEnum","TippyName","SingletonName","CompRef","args","compRef","createComponent","getElement","setTemplateVisible","tippyContent","Element","setStyle","TplRef","viewRef","tpl","appRef","attachView","Node","ELEMENT_NODE","append","removeChild","NgxViewService","getViewRefInstance","content","tippyName","tippyContext","isTemplateRef","createTemplate","isComponent","HTMLTemplateElement","isHTMLTemplate","NgxTippyService","rendererFactory","devModeService","ngxViewService","tippyInstances","tippySingletonEntryInstances","tippyInstances$","createRenderer","setInstance","errMessage","getMessage","messageFor","throwError","emitInstancesChange","getInstance","getInstances","size","setSingletonInstance","getSingletonInstance","getSingletonInstances","callNativeTippyMethod","mouseEvent","tippyProps","throwErrorInstanceNotExist","setDefaultProps","tippy","showAll","hideAll","exclude","excludeName","instancesChanges","method","arg","errorConstructor","NgxTippyDirective","tippyEl","ngxTippyService","platform","ngxTippyConfig","cachedInstances","isPlatformServer","initTippy","handleChanges","destroyTippy","tippyTarget","ngxTippy","tippyElement","tInstance","setTippyInstance","setClassName","tippyInstance","tippyClassName","writeInstancesToStorage","_tippy","className","classNames","addClass","firstElementChild","removeClassName","removeClass","handleNameChanges","handleContentChanges","handlePropsChanges","handleClassChanges","handleContextChanges","cachedTippyInstances","deleteEntryInStorage","clearInstance","resetLocalInstance","clearCachedInstances","clearViewRef","destroyTippyInstance","PLATFORM_ID","NgxTippyModule","classWithoutDot","tippyTemplate_r2","tippyTemplate_r3","imageResize","PickerItemPreviewComponent_Conditional_1_Case_0_Template","PickerItemPreviewComponent_Conditional_1_Case_1_Template","PickerItemPreviewComponent_Conditional_1_Case_2_Template","PickerItemPreviewComponent_Conditional_1_Case_3_Template","PreviewType","PickerItemPreviewComponent","debugMessage","originalImage","optimizedImage","PickerItemPreviewComponent_Conditional_1_Template","MatIcon","PickerPreviewLabelComponent","featureWarnings","conditions","PickerPreviewLabelComponent_For_7_Template","FeatureIconComponent","RelationshipParentChild","PickerTreeDataHelper","#pickerTreeConfiguration","#treeItems","expandable","hasChild","build","updateConfig","pickerConfig","addTreeItems","treeItems","updateSelectedData","selectedData","preConvertAllItems","convertedItems","#preConvertItemToTreeItem","#getChildren","allItems","isParentChild","TreeRelationship","cpRef","pcRef","pId","pStreamName","TreeBranchesStream","itemInCorrectStream","currentId","treeFlattener","cId","itemParentValue","disableOption","enableReselect","TreeAllowSelectRoot","TreeAllowSelectBranch","TreeAllowSelectLeaf","PickerTreeDataService","treeHelper","PickerDisplayMode","relationshipIsParentChild","runInInjectionContext","filteredData","z","isOptionDisabled","PickerSearchComponent_Conditional_14_For_1_Template","filteredItems","item_r4","item_r5","PickerSearchComponent_Conditional_15_mat_tree_node_1_Template","PickerSearchComponent_Conditional_15_mat_tree_node_2_Template","_r6","insertNull","optionSelected","focusOnSearchComponent","onClosed","onOpened","PickerSearchComponent","#logItemChecks","#treeDataService","autocomplete","viewChild","showSelectedItem","showItemEditButtons","#reFilter","filterInDom","oItem","enableAddExisting","EnableReselect","showAsTree","displaySelected","displayFn","ae","markAsTouched","filterSelectionList","isTreeDisplayMode","searchElement","getPlaceholder","getSelectedItem","PickerSearchComponent_Conditional_9_Template","PickerSearchComponent_Conditional_14_Template","PickerSearchComponent_Conditional_15_Template","PickerSearchComponent_Conditional_16_Template","auto_r7","labelWithRequired","MatAutocompleteModule","MatOptionModule","PickerInlineBaseComponent","allowMulti","toggled","PickerInlineHeaderComponent","$index_r4","PickerCheckboxesComponent","requireFeature","PickerUiCheckbox","PickerCheckboxesComponent_For_5_Template","MatCheckbox","item_r1","PickerPillsComponent_Conditional_6_For_2_Template","PickerPillsComponent","PickerPillsComponent_Conditional_6_Template","PickerPillsComponent_Conditional_7_Template","PickerPillsComponent_Conditional_8_Template","PickerRadioComponent","PickerUiRadio","PickerRadioComponent_For_5_Template","MatRadioButton","isTextMode","csDisabled","PickerTextToggleComponent_Conditional_0_Conditional_1_Template","PickerTextToggleComponent_Conditional_0_Conditional_2_Template","showBoth","PickerTextToggleComponent","allowText","PickerTextToggleComponent_Conditional_0_Template","PickerTextComponent","useMultiLine","PickerTextComponent_Conditional_2_Template","PickerTextComponent_Conditional_3_Template","PickerPreviewComponent_Case_2_ng_container_1_Template","textToggle_r1","PickerPreviewComponent_Case_3_ng_container_1_Template","PickerPreviewComponent_Case_3_ng_container_2_Template","addNew_r2","PickerPreviewComponent_Case_4_ng_container_1_Template","PickerPreviewComponent_Case_4_ng_container_2_Template","PickerPreviewComponent_Case_5_ng_container_1_Template","PickerPreviewComponent_Case_6_ng_container_1_Template","ctx_r3","PickerPreviewComponent_Conditional_7_ng_container_1_Template","PickerPreviewComponent_Conditional_7_Conditional_2_Template","showBoth_r5","tmp_8_0","ct_r7","PickerPreviewComponent_ng_template_12_Conditional_0_Conditional_0_For_6_Template","entityTypesMenu_r8","_r9","PickerPreviewComponent_ng_template_12_Conditional_0_Conditional_0_Template","PickerPreviewComponent_ng_template_12_Conditional_0_Conditional_1_Template","PickerPreviewComponent_ng_template_12_Conditional_0_Template","PickerPreviewComponent","#pickerMode","skipHelpText","PickerPreviewComponent_Case_2_Template","PickerPreviewComponent_Case_3_Template","PickerPreviewComponent_Case_4_Template","PickerPreviewComponent_Case_5_Template","PickerPreviewComponent_Case_6_Template","PickerPreviewComponent_Conditional_7_Template","PickerPreviewComponent_Conditional_8_Template","PickerPreviewComponent_Conditional_9_Template","PickerPreviewComponent_ng_template_10_Template","PickerPreviewComponent_ng_template_12_Template","tmp_2_0","NgTemplateOutlet","PickerListComponent_Conditional_1_For_2_Conditional_2_Template","$index_8_r4","drop","PickerListComponent_Conditional_1_For_2_Template","PickerListComponent","PickerListComponent_Conditional_0_Template","PickerListComponent_Conditional_1_Template","CdkDropList","CdkDrag","ct_r2","PickerDialogComponent_Conditional_4_Conditional_1_For_6_Template","entityTypesMenu_r4","_r5","PickerDialogComponent_Conditional_4_Conditional_1_Template","PickerDialogComponent_Conditional_4_Conditional_2_Template","PickerDialogComponent","showAddNewEntityButtonInDialog","PickerDialogComponent_Conditional_1_Template","PickerDialogComponent_Conditional_2_Template","PickerDialogComponent_Conditional_4_Template","PickerComponent","BaseComponent","refreshOnChildClosed","#injector","#pickerData","showPreview","isOpen","#refreshOnChildClosed","PickerComponent_Conditional_0_Template","PickerComponent_Conditional_1_Template","calculateDropdownOptions","addSelectedIfMissing","DataSourceDropDownOptions","parseOptions","dropdownValuesFormat","dropdownValues","classicOptions","maybeWantedEmptyVal","shift","chars","char","escaped","separatorIndex","currentString","DataSourceParserCsv","csv","Papa","header","skipEmptyLines","transformHeader","dynamicTyping","filtered","meta","preEmpty","h","G","empty","getDataSourceAndSetupFieldSettings","PickerLogicShared","setDefaultSettings","noAutoFocus","maybeOverrideEditRestrictions","fsUntyped","removeEditRestrictions","preUpdate","fsDefaults","fsRaw","typeConfig","#getDataSourceAndSetupFieldSettings","fsBasic","dataSources","DataSources","isKnownType","sourceIsQuery","sourceIsEntity","sourceIsCss","sourceIsAppAssets","isCustomSource","specsQuery","UrlParameters","QueryParameters","ContentTypeNames","PickerSourceAppAssets","valuesRaw","Csv","PickerSourceCsv","PickerDisplayConfiguration","#getTreeConfigOnce","pickerDisplayConfigurations","ConfigModel","TreeLeavesStream","TreeShowRoot","TreeDepthMax","EntityDefaultLogic","CreatePrefill","EntityDefaultComponent","EntityDefaultComponent_Conditional_0_Template","EntityDefaultComponent_Conditional_1_Template","EntityContentBlockComponent","EntityContentBlockComponent_Conditional_0_Template","EntityContentBlockComponent_Conditional_1_Template","EntityPickerLogic","EntityPickerComponent","EntityPickerComponent_Conditional_0_Template","EntityPickerComponent_Conditional_1_Template","EntityQueryLogic","updateSpecs","EntityQueryComponent","EntityQueryComponent_Conditional_0_Template","EntityQueryComponent_Conditional_1_Template","AdamService","getHttp","subfolder","usePortalRoot","addFolder","newFolderName","newFolder","SanitizeHelper","sanitizeName","rename","newName","isFolder","getLinkInfo","appid","ConnectorInstance","fieldConfigSignal","field$","#field$","_experimental","_connectorHost","value$","ConnectorDataInstance","ConnectorDialogInstance","loadScript","testOrScripts","srcOrCallback","loadScripts","clientValueChangeListeners","onValueChange","getUrlOfId","updateControl","openFeatureDisabledWarning","ConnectorHelper","#translateService","#contentTypeService","#inputTypeService","#featuresService","#dialog","#zone","#adamService","InputTypeService","MatDialog","#value$","#group","#customEl","#viewContainerRef","#changeDetectorRef","customElName","customElContainerRef","connector","#buildConnector","connectorHost","#getCallbacks","#buildExperimentalProps","toFieldConfig","#updateControl","allInputTypeNames","getAttributeInputTypes","lEx","translateService","dropzone","adam","updateField","controls","isFeatureEnabled","setFocused","openPagePicker","PagePicker","featureDisabledWarning","#openFeatureDisabledWarning","#getUrlOfId","getSettings","getFieldMask","mask","UiControl","PasteImageFromClipboard","onAction","openFeatureDialog","ConnectorComponent","connectorCreator","componentTagDialogName","CustomGpsLogic","CustomGps","StringWysiwygLogic","StringWysiwyg","_allowDialog","Dialog","ButtonSource","ButtonAdvanced","ContentCss","InlineInitialHeight","_advanced","findAndMergeAdvanced","WysiwygConfiguration","Mode","Json","processValueOnLoad","doc","DOMParser","parseFromString","body","querySelectorAll","img","dataCmsid","fileName","pop","adamItem","ExternalWebComponentComponent","loadAssets","assets","AngularAssets","assetsLoaded","ExternalWebComponentComponent_Conditional_0_Template","ExternalWebComponentComponent_Conditional_1_Template","MatProgressSpinnerModule","handleImage","PasteClipboardImageDirective","#eventListeners","#pasteImageEnabled","elementType","pasteImageEnabled","pastableTextarea","pastableNonInputable","#handleImage","listener","image","#getFile","uploadFile","newFile","FormData","imageFileName","HyperlinkDefaultBaseComponent","preview","thumbnailUrl","previewUrl","floatingText","isImage","icon","adamService","adamItemId","status","fetchLink","page","openImageConfiguration","_imageConfigurationContentType","_imageConfigurationId","newMetadata","eavConstants","cmsObject","setPreview","isFileOrPage","isResolved","getPreview","lastIndexOf","ThumbnailUrl","buildUrl","PreviewUrl","FileTypeHelpers","getIconClass","cleanValue","HyperlinkDefaultLogic","HyperlinkDefault","Buttons","FileFilter","Paths","ServerResourceMapping","EnableImageConfiguration","toggleAdam","menu_r5","_r8","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Conditional_0_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Conditional_1_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Conditional_2_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Conditional_3_Template","showAdam","showPagePicker","showImageManager","showFileManager","preV_r10","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_19_Conditional_1_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_19_Conditional_2_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_1_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_5_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_6_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_ng_template_9_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_18_Template","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Conditional_19_Template","buttonAdam","tmp_6_0","enableImageConfiguration","buttonPage","buttonMore","HyperlinkDefaultComponent_Conditional_0_Conditional_0_Template","HyperlinkDefaultComponent","adamSettings","rootSubfolder","autoLoad","onItemClick","setValue","onItemUpload","showImagesOnly","HyperlinkDefaultComponent_Conditional_0_Template","tmp_0_0","HyperlinkLibraryLogic","HyperlinkLibraryComponent","updateValueAndValidity","attachAdamConfig","adamConfig","allowAssetsInRoot","AllowAssetsInRoot","enableSelect","folderDepth","FolderDepth","metadataContentTypes","MetadataContentTypes","StringDropdownLogic","DropdownValuesFormat","DropdownValues","NumberDefaultLogic","NumberDefault","NumberDefaultComponent","NumberDropdownLogic","NumberDropdownComponent","NumberDropdownComponent_Conditional_0_Template","NumberDropdownComponent_Conditional_1_Template","NumberPickerLogic","NumberPickerComponent","NumberPickerComponent_Conditional_0_Template","NumberPickerComponent_Conditional_1_Template","StringDefaultLogic","StringDefault","InputFontFamily","RowCount","inputFontFamily","rowCount","textWrap","StringDefaultComponent","rowCountRaw","isMultiline","rc","StringDefaultComponent_Conditional_1_Template","StringDefaultComponent_Conditional_2_Template","StringDropdownQueryLogic","StringDropdownQueryComponent","StringDropdownQueryComponent_Conditional_0_Template","StringDropdownQueryComponent_Conditional_1_Template","StringDropdownComponent","StringDropdownComponent_Conditional_0_Template","StringDropdownComponent_Conditional_1_Template","StringFontIconPickerLogic","Files","CssPrefix","PreviewCss","ShowPrefix","StringFontIconPickerComponent","StringFontIconPickerComponent_Conditional_0_Template","StringFontIconPickerComponent_Conditional_1_Template","StringFontIconPickerComponent_1","StringPickerLogic","StringPickerComponent","StringPickerComponent_Conditional_0_Template","StringPickerComponent_Conditional_1_Template","templateTypes","Token","ext","purpose","file_r1","StringTemplatePickerComponent","#typeMask","#locationMask","#sourceService","#activeSpec","#templates","#global","#resetIfNotFound","FileType","SourceService","#prevLocation","#onLocationChange","#setFileConfig","#setTemplateOptions","Shared","Path","nameMask","CreateFileDialogComponent","templateKey","res","StringTemplatePickerComponent_For_7_Template","MatSelectModule","StringTemplatePickerComponent_1","StringUrlPathLogic","StringUrlPath","AutoGenerateMask","AllowSlashes","StringUrlPathComponent","#maskFromSettings","#lastAutoCopy","#fieldMask","#maskedValueCleaned","initPreClean","stripNonUrlCharacters","clean","#publishFieldMaskResult","cleanedNewValue","lastAutoCopy","allowSlashes","cleaned","trimEnd","StringUrlPathComponent_1","AdamConfigInstance","allowEdit","maxDepthReached","completeConfig","fieldConfig","oldConfig","startDisabled","newConfig","folders","openUploadClick","AdamBrowserComponent_Conditional_1_Conditional_1_Conditional_7_Template","AdamBrowserComponent_Conditional_1_Conditional_1_Conditional_8_Template","openFeatureInfoDialog","isPasteImageFromClipboardEnabled","pasteDiv_r3","goUp","item_r7","del","editItemMetadata","_metadataContentType","_metadataId","goIntoFolder","AdamBrowserComponent_Conditional_1_For_5_Conditional_0_Conditional_6_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_0_Conditional_10_Template","_icon","_r11","_r12","_r13","_r10","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_1_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_2_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_4_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_14_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Conditional_15_Template","_displaySize","AdamBrowserComponent_Conditional_1_For_5_Conditional_0_Template","AdamBrowserComponent_Conditional_1_For_5_Conditional_1_Template","AdamBrowserComponent_Conditional_1_Conditional_1_Template","AdamBrowserComponent_Conditional_1_Conditional_2_Template","AdamBrowserComponent_Conditional_1_Conditional_3_Template","AdamBrowserComponent_Conditional_1_For_5_Template","allowAddButtons","processFetchedItems","AdamBrowserComponent","dnnContext","openUpload","output","#ui","#firstFetch","cnf","#url","$2sxc","doOnDialogClosed","setBrowser","folderName","prompt","contentTypeName","metadataId","#getImageConfigurationContentType","imageDecorator","#getMetadataContentType","found","firstFetch","clonedItems","#processFetchedItems","extensionsFilter","getExtensionsFilter","extension","_isMaterialIcon","Size","toFixed","AllowEdit","fixDropzone","oldDzConfig","newDzConfig","dzUrlParams","getUrlParams","newUrl","replaceUrlParam","uploadDisabled","AdamBrowserComponent_Conditional_1_Template","MatBadgeModule","overflow","AdamHintComponent","hideAdamSponsor","NoSponsoredByToSic","AdamHintComponent_Conditional_11_Template","AdamWrapperComponent","adamDisabled","fullscreenAdam","invisibleClickableRef","click","DROPZONE_CONFIG","DropzoneEvents","DropzoneConfig","assign","HTMLElement","DropzoneDirective","differs","platformId","defaults","configDiff","DZ_INIT","DZ_ERROR","DZ_SUCCESS","DZ_SENDING","DZ_CANCELED","DZ_COMPLETE","DZ_PROCESSING","DZ_DROP","DZ_DRAGSTART","DZ_DRAGEND","DZ_DRAGENTER","DZ_DRAGOVER","DZ_DRAGLEAVE","DZ_THUMBNAIL","DZ_ADDEDFILE","DZ_ADDEDFILES","DZ_REMOVEDFILE","DZ_UPLOADPROGRESS","DZ_MAXFILESREACHED","DZ_MAXFILESEXCEEDED","DZ_ERRORMULTIPLE","DZ_SUCCESSMULTIPLE","DZ_SENDINGMULTIPLE","DZ_CANCELEDMULTIPLE","DZ_COMPLETEMULTIPLE","DZ_PROCESSINGMULTIPLE","DZ_RESET","DZ_QUEUECOMPLETE","DZ_TOTALUPLOADPROGRESS","Dropzone","autoDiscover","isPlatformBrowser","maxFiles","observers","on","autoReset","reset","errorReset","cancelReset","eventName","emitter","toUpperCase","ngDoCheck","cancel","removeAllFiles","DropzoneModule","DropzoneConfigInstance","headers","acceptedFiles","parallelUploads","maxFilesize","timeout","paramName","maxThumbnailFilesize","dictDefaultMessage","addRemoveLinks","previewsContainer","clickable","WysiwygConstants","classToDetectWysiwyg","DropzoneWysiwyg","isStringWysiwyg","imageTypes","detectWysiwygOnDrop","isParentWysiwyg","toElement","removeFilesHandledByWysiwyg","removeFile","DropzoneWrapperComponent","#wysiwygHelper","dropzoneConfig","dropzoneDisabled","extendFieldConfigWithDropZone","#setConfig","#uploadFile","onDrop","onAddedFile","dropzoneRef","onUploadError","onUploadSuccess","refresh","sxc","webApi","uploadLimit","upload","chunked","chunking","processFile","DropzoneDraggingHelper","eventListeners","htmlEl","dragoverListener","clearTimeouts","timeoutsArray","clearTimeout","windowBodyTimeouts","draggingClass","dropListener","ContentExpandAnimation","bottomPixels","ExtendedFabSpeedDialActionDirective","toggleAttribute","ExtendedFabSpeedDialActionsContentDirective","templateRef","ExtendedFabSpeedDialTriggerContentDirective","ExtendedFabSpeedDialComponent","open$","actionButtons","btn","transitionDuration","setOpen","pointerType","actions","ExtendedFabSpeedDialTriggerDirective","saveAll","_c6","saveDisabled","DialogPopupComponent","#dropzoneDraggingHelper","#entityFormStateService","applyEmptyClass","#hideAdamSponsor","adamSponsorI18nKey","backdropRef","calculateBottomPixels","DialogPopupComponent_ng_template_17_Template","DialogPopupComponent_ng_template_18_Template","ExpandableWrapperComponent","previewHeight","maxHeightInPx","vh","percentage","documentElement","clientHeight","componentTagName","previewContainerRef","dropzoneDraggingHelper","touched","feature_r1","FeatureWarningWrapperComponent_Conditional_3_For_3_Template","FeatureWarningWrapperComponent","req","FeatureWarningWrapperComponent_Conditional_3_Template","EmptyDefaultLogic","EmptyDefault","Collapsed","CollapsibleWrapperComponent","#fieldsSettingsSvc","collapsed","toggleCollapse","CollapsibleWrapperComponent_Conditional_10_Template","HiddenWrapperComponent","preV_r3","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_8_Conditional_4_Template","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_8_Conditional_8_Template","tmp_7_0","_c7","tmp_10_0","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_3_Template","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_8_Template","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_11_Template","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Conditional_14_Template","HyperlinkDefaultExpandableWrapperComponent","HyperlinkDefaultExpandableWrapperComponent_Conditional_3_Template","FeatureIconTextComponent","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Conditional_1_Conditional_1_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Conditional_1_Conditional_2_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Conditional_1_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Conditional_2_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_0_Template","HyperlinkLibraryExpandableWrapperComponent_For_10_Conditional_1_Template","HyperlinkLibraryExpandableWrapperComponent","itemsNumber","trackByFn","HyperlinkLibraryExpandableWrapperComponent_For_10_Template","PickerExpandableWrapperComponent","InputComponents","We_AdamWrapper","We_CollapsibleWrapper","We_DropzoneWrapper","We_PickerExpandableWrapper","We_ExpandableWrapper","We_HiddenWrapper","We_FeatureWarningWrapper","We_HyperlinkDefaultExpandableWrapper","We_HyperlinkLibraryExpandableWrapper","We_LocalizationWrapper","CustomDefault","DateTimeDefault","EmptyMessage","ExternalWebComponent","StringTemplatePicker","AdamConnector","#browser","#items","#count","browser","BasicControlSettings","fromSettings","getInjectors","FieldStateInjectorFactory","#envInjector","#entityFormStateSvc","#featuresSvc","EnvironmentInjector","controlStatusChangeSignal","#buildUiSignal","debouncedValue$","mapUntilObjChanged","injectors","#createInjectors","lDetailed","fnCond","settings$","uiStateChange$","uiStatus$","emptyControl","environmentInjector","createEnvironmentInjector","createWrapper","EditControlsBuilderDirective","#firstInputFocused","#fieldInjectorFac","#myContainerRef","formConfigService","el","Renderer2","#fieldConfigSets","onInitReady","createControls","currentContainer","#createGroup","isGroupEnd","#createComponent","wrapperInfo","DynamicControlInfo","#createWrappers","contentsRef","componentType","#readComponentType","componentMd","getMetadata","#generateAndAttachField","pickerPreviewContainerRef","wrapperRef","previewComponent","previewType","#setAutoFocus","outerWrapper","wrapperName","#createWrapper","fieldComponent","EditForceReloadService","#dialogRef","MatDialogRef","#watcher","refreshEdit","navigateUrl","unlockAll","lockAll","EntityTranslateMenuComponent_Conditional_0_ng_template_10_Template","EntityTranslateMenuComponent","fieldTranslateSvc","fieldSettingsSvc","#autoTranslatableFields","autoTransFields","translationStateAny","EntityTranslateMenuComponent_Conditional_0_Template","UpperCasePipe","noteProps","note","toggleNote","editNote","triggerClass","itemNotSaved","iconName","noteTouched","deleteNote","noteClass","noteHtml","toggleSlotIsEmpty","ctSettings","itemForTooltip","openHistory","editInstructions","fetchNote","noteFormData","EntityFormComponent","#formsStateSvc","#versioningReloader","#editUiShowNotes","#editUiShowMetadataFor","#retriggerNoteProps","#formDataSvc","#entitySvc","editRoutingSvc","EditUiShowNotes","EditUiShowMetadataFor","Features","ctFeatures","buildContentTypeFeatures","contentTypeFeatures","contentTypeFeature","nameAndValue","itemTitle","slotCanBeEmpty","_slotCanBeEmpty","_slotIsEmpty","EditInstructions","showNotes","showMdFor","getItemForTooltip","itemFor","Target","TargetType","getItemFor","getNoteProps","Note","noteType","NoteType","getItemNote","noteRef","_containerInstance","#fetchNote","oldHeader","getItemHeader","newHeader","IsEmpty","updateItemHeader","navRelative","getState","MatDialogState","OPEN","openNote","triggerPosition","noteTriggerRef","getBoundingClientRect","noteTemplateRef","EavItem","convert","updateItemMetadata","EntityFormComponent_Conditional_8_Template","EntityFormComponent_ng_template_9_Template","EntityFormComponent_Conditional_11_Template","EntityFormComponent_Conditional_12_Template","EntityFormComponent_Conditional_13_Template","EntityFormComponent_Conditional_18_Template","CdkDragHandle","MousedownStopPropagationDirective","EntityFormSyncService","entityFormSvc","formsStateSvc","setupSync","formValid$","itemHeader$","getItemHeader$","formValid","getRawValue","previous","getItemValuesChanges","updateItemAttributesValues","FormFieldsBuilderService","adamCacheSvc","formBuilder","entityFormConfigSvc","createFields","allFields","fieldsToCreate","hasControl","fieldsForNgForm","valSpecs","newControl","addControl","keepFieldsAndStateInSync","FormFieldsSyncService","fieldsToProcess","fieldsOnForm","oldValues","newValues","patchValue","getFieldsToProcess","fieldsToProcess$","EntityFormBuilderComponent","#formStateSvc","#formulaDesignerService","#fieldsTranslateSvc","#formFieldsBuilderService","#fieldsSyncSvc","#formSyncSvc","FormulaDesignerService","itemSettingsServices","fields$","#getFieldsToProcess$","EavValuesDto","valuesToDto","eavValues","dtoValue","Dimensions","dimension","EavAttributesDto","attributesToDto","attributesDto","EavEntityDto","entityToDto","metadataDto","entitiesToDto","Owner","Version","For","EavEntityBundleDto","bundleToDto","commonSpecs","unlicensedFeatures","FeaturesUsedButUnlicensedComponent","#featureDetails","FeatureDetailService","getFeatureDetails","FeaturesUsedButUnlicensedComponent_For_17_Template","FeatureDetailsDialogComponent","PublishStatusDialogComponent","EditDialogHeaderComponent_Conditional_5_Defer_0_Template","EditDialogHeaderComponent_Conditional_5_Defer_1_DepsFn","openUnlicensedDialog","EditDialogHeaderComponent","hasLanguages","showLicenseWarning","hasUnlicensedFeatures","openPublishStatusDialog","openFeaturesUsedButUnlicensedDialog","EditDialogHeaderComponent_Conditional_5_Template","EditDialogHeaderComponent_Conditional_6_Template","EditDialogHeaderComponent_Conditional_7_Template","EditDialogHeaderComponent_Conditional_16_Template","classPrevious","animationNames","FormSlideDirective","BaseDirective","language$","pairwise","previousLang","prevIndex","slide","fromEvent","an","animationName","delay","error_r1","SnackBarSaveErrorsComponent","snackBarData","MAT_SNACK_BAR_DATA","SnackBarSaveErrorsComponent_For_6_Template","fieldErrors","SnackBarUnsavedChangesComponent","snackRef","saveChanges","save","dismissWithAction","MatDialogActions","__webpack_require__","EditDialogFooterComponent","$index_18_r2","EditDialogMainComponent_Conditional_7_For_2_Template","EditDialogMainComponent_Conditional_8_ng_template_1_Template","EditDialogMainComponent_Conditional_8_ng_template_2_Template","footerShow","EditDialogMainComponent_Conditional_9_Defer_0_Template","EditDialogMainComponent_Conditional_9_Defer_1_DepsFn","EditDialogMainComponent","#prefManager","#loadIconsService","formulaDesignerService","UserPreferences","footerPreferences","footerSize","viewInitiated","getManySignal","formsValid","hideHeader","getHideHeaderSignal","#debugWasModified","pinned","footerShowOnceOrMore","computedWithPrev","delayForm","pref","#saveResult","#startSubscriptions","#watchKeyboardShortcuts","clearCache","forceClose","#snackBarYouHaveUnsavedChanges","formBuilderRefs","formBuilderRef","eavItem","hasAttributes","saveIfEmpty","updateItemId","err","formErrors","ValidationMsgHelper","validateForm","formError","isEscape","snackBarRef","containerInstance","snackBarConfig","i15","EditDialogMainComponent_Conditional_7_Template","EditDialogMainComponent_Conditional_8_Template","EditDialogMainComponent_Conditional_9_Template","CdkScrollable","i16","i17","i18","i19","i20","i21","i22","ToggleDebugDirective","EditEntryComponent","editInitializerService","temp","LoggingService","EditEntryComponent_Conditional_1_Template","RouterOutlet","tab","#log","inheritingClass","logThis","logicInstance","emptyEntityField","possibleGuid","wysiwygConfig","advanced","UnknownLogic","Unknown","logics","eavFieldLogicManager","inputTypeName","MissingDefaultLangValue","calculateSharedInfoMessage","dimensions","calculateShortDimensions","calculateEditAndReadDimensions","editableDimensions","readOnlyDimensions","editableExist","readOnlyExist","dimMap","langCode","shortNoReadOnly","shortDimension","FormulaSourceCodeHelper","#cleanFormula","cleanFormula","runFormulaPrefix","findFormulaVersion","versionPart","buildFormulaFunction","Function","buildFormulaCache","updateFormulaFromEditor","createPromisedParts","getSharedParts","FormulaCacheBuilder","loggingService","#sharedPartsCache","cacheSvc","formulaCache","shared","#getSharedParts","formulaEntities","Formulas","fEntity","sourceCode","Formula","formulaFunction","cacheResults","getTitle","addLog","LogSeverities","showMessage","formulaCacheItem","isDraft","sourceCodeSaved","sourceCodeGuid","sourceCodeId","#inputTypeSpecsForCacheItem","FormulaSpecialPickerTargets","#createPromisedParts","#targetInfoForCacheItem","FormulaDefaultTargets","Validation","mdFor","user","targetEntity","for","targetType","email","Email","isAnonymous","IsAnonymous","isSiteAdmin","IsSiteAdmin","isContentAdmin","IsContentAdmin","isSystemAdmin","username","Username","app","zoneId","isGlobal","IsGlobalApp","isSite","IsSiteApp","isContent","IsContentApp","getSetting","pageId","tabId","moduleId","_noContextInHttpHeaders","_autoAppIdsInUrl","promiseSpecs","errorLabel","getAttributeOfItem","formulaListIndexAndOriginal","streams","newFormulaItem","FormulaCacheService","#cacheBuilder","#results","#findFormulas","allowDraft","forNewPicker","targets","FormulaDefaultTargetValues","FormulaNewPickerTargetValues","FormulaOptionalTargetValues","unstopped","fOrDs","updateSaved","formulaItem","sourceGuid","sourceId","newCache","resetFormula","#deleteResult","isError","isOnlyPromise","newResult","resultListIndexAndOriginal","newResults","FormulaTargetsService","getTargetOptions","targetOptions","fieldFormulas","targetOption","hasFormula","FormulaOptionalTargets","isOldValuePicker","FormulaNewPickerTargets","t","FormulaV1Helpers","buildDesignerSnippetsContext","getSnippets","fieldOptions","formulaPropsParameters","IntellisenseV2","getTypings","#inputTypeToDataType","allParameters","lower","setDesignerOpen","#targetsService","designerState","editMode","formulaResult","currentTargetOptions","entityOptions","entityFormulas","fieldsOptions","currentFormula","v1ContextSnippets","#currentItemHeader","v2JsTypings","v1DataSnippets","initAfterItemSettingsAreReady","firstFieldName","FormulaTargets","defaultFormula","defaultListItemFormula","FormulaDataObject","#propsData","#params","#valueMapper","#picker","propsData","default","#value","getDefaultOrPrefillValue","#getSelected","#getOptions","FormulaContextObject","partialApp","FormulaContextApp","FormulaContextTarget","culture","Culture","FormulaContextFeatures","FormulaContextForm","FormulaContextEntities","xp","getOfType","guidOrName","nameId","runFormulas","settingPath","isValueOrValidation","FormulaExperimentalObject","#showWarningObsolete","getValues","FormulaDeveloperHelper","formulaProps","#isDesignerOpen","#dataAndCtx","#cache","allValues","oneValue","valueMapper","v1Value","#oneValue","targetIsValue","hasDuplicateValues","ids","uniqueIds","Set","setTime","setMilliseconds","DataTypeCatalog","Hyperlink","Options","Selected","contentTypeItems","ContentTypeName","getSpecsInternal","inputTypeMetadata","EavContentTypeAttribute","convertOne","ctAttributeDto","EavEntityAttributes","IsTitle","ctAttributesDto","attribute1","contentTypeDto","Scope","contentTypesDto","EavDimension","EavField","valueDto","EavValue","attributeDto","attributeName","metadataItems","copy","entityDto","entitiesDto","entityBundleDto","valuesDto","logs$","logLimit","lastSnackBarTime","snackBarDebounce","newLogs","force","nowTime","getLogs$","getLogsSignal","Log","Warn","asWithGenericSettings","SettingsGeneric","genericSettings","defSettings","AllDeprecated","moveDeprecatedSettings","DefaultCollapsed","hasEditable","hasReadonly","#getTranslationStateCore","editableElements","asDeprecated","VisibleInEditUI","FieldWriter","#updateAttribute","oldAttributes","attributeKey","newAttributes","attributeCopy","updateAttributesValues","updateValues","eavAttributes","newItemValue","DimensionReader","hasCurrent","newEavValue","updateAttributeValue","newLanguageValue","addAttributeValue","attributeValue","attributeType","addAttributeDimension","newDimensionValue","existingDimensionValue","defaultLanguage","eavValue","removeAttributeDimension","validDimensions","newAttribute","ItemUpdateHelper","saveResult","oldItem","EntityId","newItem","languageCode","relevantValues","shareWithLanguage","delayUpsert","SignalStoreObservableBase","#itemAttributesCache","#itemHeaderCache","#slotIsEmptyCache","dtoItems","getSignal","getItemAttributes$","list$","IsEmptyAllowed","Custom","DateTime","Empty","copyToClipboard","str","getSelection","rangeCount","getRangeAt","execCommand","removeAllRanges","addRange","sanitizer","html","pure","getAvailableEntities","webApiEntityRoot","webApiEntityList","queryService","getEntities$","shareReplay","entitiesFilter","hasParams","urlParams","Guids","#stateManager","StateManagerLocal","fromUrl","#dialogUiSettings","stored","isForced","userConfigurable","isConfigurable","languageUserSettings","#uiSettingsCached","storedMaybeString","sessionStorage","getItem","dialogSettings","storeKey","#partCache","local","#local","session","#session","StateManagerSession","longTerm","#getPart","created","UserPreferencesPart","userSettings","#data","asReadonly","S","#save","setAll","setMany","old","module","exports","n","u","$","M","g","utcOffset","w","D","ms","Q","arguments","O","$L","$u","$x","$offset","prototype","$d","$y","$M","$D","$W","$H","$m","$s","$ms","getMilliseconds","$utils","endOf","isAfter","isBefore","$g","unix","apply","$locale","weekStart","$set","round","subtract","invalidDate","meridiem","YY","YYYY","MM","MMM","MMMM","DD","dd","ddd","dddd","H","HH","hh","A","mm","ss","SSS","Z","toUTCString","T","extend","$i","isDayjs","en","Ls","relativeTime","future","past","yy","preparse","postformat","ordinal","formats","LT","LTS","L","LL","LLL","LLLL","require","numbers","ll","lll","llll","Y","hh2","dd2","MM2","yy2","afternoon","milliseconds","SS","Do","ZZ","parseTwoDigitYear","parser","call","getUTCMonth","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","$localOffset","isUTC","_typeof","Symbol","iterator","_setPrototypeOf","setPrototypeOf","__proto__","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_getPrototypeOf","getPrototypeOf","_createForOfIteratorHelper","allowArrayLike","_unsupportedIterableToArray","minLen","_arrayLikeToArray","F","done","_e","normalCompletion","didErr","_e2","return","arr","len","arr2","_classCallCheck","Constructor","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","Emitter","_callbacks","callbacks","_len","_key","_step","_iterator","_Emitter","_inherits","subClass","superClass","_super","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","construct","sham","Proxy","Super","NewTarget","_this","previewTemplate","clickableElements","listeners","instances","elementOptions","optionsForElement","forceFallback","isBrowserSupported","acceptedMimeTypes","uploadMultiple","renameFilename","renameFile","getExistingFallback","getElements","events","withCredentials","forceChunking","chunkSize","parallelChunkUploads","retryChunks","retryChunksLimit","createImageThumbnails","thumbnailWidth","thumbnailHeight","thumbnailMethod","resizeWidth","resizeHeight","resizeMimeType","resizeQuality","resizeMethod","filesizeBase","ignoreHiddenFiles","autoProcessQueue","autoQueue","hiddenInputContainer","dictFallbackMessage","dictFallbackText","dictFileTooBig","dictInvalidFileType","dictResponseError","dictCancelUpload","dictUploadCanceled","dictCancelUploadConfirmation","dictRemoveFile","dictRemoveFileConfirmation","dictMaxFilesExceeded","dictFileSizeUnits","tb","gb","mb","kb","xhr","chunk","dzuuid","uuid","dzchunkindex","dztotalfilesize","dzchunksize","dztotalchunkcount","totalChunkCount","dzchunkbyteoffset","accept","chunksUploaded","messageElement","_step2","_iterator2","span","getFallbackForm","resize","srcX","srcY","srcWidth","srcHeight","srcRatio","trgRatio","trgWidth","trgHeight","transformFile","resizeImage","dragstart","dragend","dragenter","dragover","dragleave","paste","addedfile","_this2","previewElement","_step3","_iterator3","_step4","_iterator4","filesize","_removeLink","_step5","removeFileEvent","UPLOADING","_iterator5","removedfile","_updateMaxFilesReachedClass","thumbnail","dataUrl","_step6","_iterator6","thumbnailElement","alt","_step7","_iterator7","errormultiple","processing","processingmultiple","uploadprogress","progress","bytesSent","_step8","_iterator8","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","completemultiple","maxfilesexceeded","maxfilesreached","queuecomplete","addedfiles","_thumbnailQueue","_processingThumbnail","_len2","objects","_key2","_i","_objects","accepted","getFilesWithStatus","QUEUED","ADDED","_this3","tagName","setupHiddenFileInput","hiddenFileInput","visibility","_step9","_iterator9","addFile","URL","webkitURL","_step10","_iterator10","updateTotalUploadProgress","getAddedFiles","getUploadingFiles","getQueuedFiles","noPropagation","dataTransfer","types","containsFiles","efct","effectAllowed","dropEffect","clickableElement","evt","elementInside","totalUploadProgress","totalBytesSent","totalBytes","getActiveFiles","_step11","_iterator11","total","existingFallback","fieldsString","_getParamName","getFallback","elements","_step12","_iterator12","_i2","_arr","elementListeners","_this4","removeEventListeners","cancelUpload","setupEventListeners","selectedSize","selectedUnit","unit","pow","getAcceptedFiles","webkitGetAsEntry","_addFilesFromItems","handleFiles","__guard__","clipboardData","_step13","_iterator13","_this5","_step14","_iterator14","entry","isFile","getAsFile","isDirectory","_addFilesFromDirectory","kind","directory","_this6","dirReader","createReader","errorHandler","__guardMethod__","methodName","readEntries","_step15","_iterator15","fullPath","isValidFile","_this7","uuidv4","_renameFile","_enqueueThumbnail","_errorProcessing","enqueueFile","_step16","_iterator16","_this8","processQueue","_this9","_processThumbnailQueue","_this10","createThumbnail","without","cancelIfNecessary","_step17","_iterator17","_this11","canvas","resizedDataURL","toDataURL","ExifRestore","restore","dataURL","dataURItoBlob","fixOrientation","_this12","fileReader","FileReader","onload","createThumbnailFromUrl","readAsDataURL","mockFile","imageUrl","crossOrigin","_this13","resizeThumbnail","_this14","getComputedStyle","imageOrientation","loadExif","EXIF","getData","getTag","orientation","resizeInfo","getContext","rotate","PI","drawImageIOSFix","trgX","trgY","onerror","processingLength","queuedFiles","processFiles","_step18","_iterator18","uploadFiles","_step19","groupedFiles","_getFilesWithXhr","_iterator19","CANCELED","abort","_step20","_iterator20","_len3","_key3","_this15","_transformFiles","transformedFiles","transformedFile","_transformedFile","chunks","handleNextChunk","chunkIndex","startedChunkCount","dataBlock","webkitSlice","retries","_uploadData","finishedChunkUpload","allFinished","SUCCESS","_finished","dataBlocks","_i3","_step21","_this16","XMLHttpRequest","_iterator21","resolveOption","_finishedUploading","ontimeout","_handleUploadError","onprogress","_updateFilesUploadProgress","Accept","headerName","headerValue","setRequestHeader","additionalParams","_getChunk","_step22","_iterator22","_addFormElementData","_i4","submitRequest","_this17","doneCounter","_loop","_step23","_iterator23","inputName","_step24","_iterator24","checked","_step25","_iterator25","_file2","_step26","_iterator26","_file3","allFilesFinished","_step27","_iterator27","_file4","_step28","_iterator28","_file5","readyState","responseType","responseText","getResponseHeader","send","_step29","_iterator29","_step30","_iterator30","ERROR","initClass","camelize","forElement","discover","dropzones","checkElements","_step31","_iterator31","_step32","_iterator32","blacklistedBrowsers","capableBrowser","File","FileList","Blob","_step33","_iterator33","navigator","userAgent","dataURI","byteString","atob","mimeString","ab","ArrayBuffer","ia","Uint8Array","asc","charCodeAt","rejectedItem","charAt","els","_step34","_iterator34","_step35","_iterator35","question","rejected","_step36","mimeType","baseMimeType","_iterator36","validType","jQuery","each","ACCEPTED","PROCESSING","sx","sy","sw","sh","dx","dy","dw","dh","vertSquashRatio","ih","naturalHeight","drawImage","getImageData","ey","py","ratio","detectVerticalSquash","KEY_STR","chr1","chr2","chr3","enc1","enc2","enc3","enc4","origFileBase64","resizedFileBase64","rawImage","decode64","segments","slice2Segments","exifManipulation","encode64","exifArray","getExifArray","newImageArray","insertExif","seg","imageData","buf","separatePoint","mae","ato","array","rawImageArray","head","endPoint","_autoDiscoverFunction","win","root","rem","pre","createEventObject","doScroll","frameElement","poll","contentLoaded","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","postMessage","IS_PAPA_WORKER","J","dynamicTypingFunction","worker","WORKERS_SUPPORTED","BLOB_URL","createObjectURL","Worker","onmessage","userStep","userChunk","userComplete","userError","workerId","download","readable","read","unparse","delimiter","BAD_DELIMITERS","quotes","newline","quoteChar","columns","escapeChar","escapeFormulae","BYTE_ORDER_MARK","NODE_STREAM_INPUT","LocalChunkSize","RemoteChunkSize","DefaultDelimiter","Parser","E","ParserHandle","NetworkStreamer","FileStreamer","StringStreamer","ReadableStreamStreamer","prop","inputElem","instanceConfig","action","_handle","_completed","_halted","_input","_baseIndex","_partialLine","_rowCount","_start","_nextChunk","isFirstChunk","_completeResults","streamer","parseChunk","beforeFirstChunk","paused","aborted","cursor","WORKER_ID","finished","_sendError","_readChunk","_chunkLoaded","_chunkError","downloadRequestBody","downloadRequestHeaders","statusText","mozSlice","FileReaderSync","readAsText","encoding","pause","resume","_streamData","_streamEnd","_streamError","_checkIsFinished","_streamCleanUp","removeListener","k","parseFloat","RECORD_SEP","UNIT_SEP","comments","successful","bestDelimiter","delimitersToGuess","getCharIndex","P","U","N","B","fastMode","K","W","I","R","C","substr","linebreak","truncated","terminate","globalThis","sloppyModeThis","functionThis","indirectEvalThis","eval","exporter","makeExporter","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","supportsCreate","supportsProto","downLevel","HashMap","MakeDictionary","functionPrototype","_Map","CreateMapPolyfill","cacheSentinel","arraySentinel","MapIterator","_keys","_selector","throw","_cacheKey","_cacheIndex","_find","SameValueZero","getKey","getEntry","insert","_Set","CreateSetPolyfill","_map","_WeakMap","CreateWeakMapPolyfill","rootKey","CreateUniqueKey","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","GenRandomBytes","crypto","getRandomValues","msCrypto","byte","registrySymbol","metadataRegistry","GetOrCreateMetadataRegistry","IsUndefined","IsObject","isExtensible","CreateMetadataRegistry","CreateFallbackProvider","reflect","hasOwnMetadata","getOwnMetadata","getOwnMetadataKeys","deleteMetadata","metadataOwner","isProviderFor","metadataPropertySet","OrdinaryDefineOwnMetadata","OrdinaryHasOwnMetadata","OrdinaryGetOwnMetadata","OrdinaryOwnMetadataKeys","OrdinaryDeleteMetadata","rest","targetProviderMap","registry","registerProvider","getProvider","setProvider","provider","getProviderNoCache","GetIterator","IteratorStep","IteratorValue","IteratorClose","providerMap","hasProvider","existingProvider","metadataProvider","CreateMetadataProvider","targetMetadata","MetadataKey","MetadataValue","GetOrCreateMetadataMap","metadataMap","ToBoolean","nextValue","Create","createdTargetMetadata","OrdinaryHasMetadata","OrdinaryGetPrototypeOf","IsNull","GetMetadataProvider","OrdinaryGetMetadata","OrdinaryMetadataKeys","ownKeys","parentKeys","ownKeys_1","parentKeys_1","ToPrimitive","PreferredType","hint","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","toString_2","argument","ToPropertyKey","IsSymbol","ToString","IsArray","IsConstructor","V","func","iterResult","proto","prototypeProto","registeredProvider","decorate","decorators","propertyKey","DecorateConstructor","decorated","decorator","DecorateProperty","metadataKey","metadataValue","IsPropertyKey","hasMetadata","getMetadataKeys","MatProgressSpinner_ng_template_0_Template","_viewBox","_strokeCircumference","_circleStrokeWidth","_circleRadius","MAT_PROGRESS_SPINNER_DEFAULT_OPTIONS","MAT_PROGRESS_SPINNER_DEFAULT_OPTIONS_FACTORY","diameter","BASE_SIZE","MatProgressSpinner","_defaultColor","_determinateCircle","_forceAnimations","strokeWidth","_diameter","_strokeWidth","viewBox","_strokeDashOffset","circle_r2"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/edit/shared/adam/adam-cache.service.ts","./projects/eav-ui/src/app/edit/shared/adam/link-cache.service.ts","./projects/eav-ui/src/app/edit/form/form-data.service.ts","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-main.models.ts","./projects/eav-ui/src/app/edit/form/form-publishing.service.ts","./projects/eav-ui/src/app/edit/form/edit-initializer.service.ts","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-main.helpers.ts","./projects/eav-ui/src/app/edit/shared/services/scripts-loader.service.ts","./projects/eav-ui/src/app/edit/assets/icons/load-icons.service.ts","./projects/eav-ui/src/app/edit/assets/icons/2sxc/Material-Icon-Adam-48-filled.svg","./projects/eav-ui/src/app/edit/assets/icons/2sxc/Material-Icon-Adam-48-outlined.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/draft-branch.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-archive.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-audio.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-code.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-excel.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-image.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-pdf.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-powerpoint.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-text.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-video.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/file-word.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/folder.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/folder-plus.svg","./projects/eav-ui/src/app/edit/assets/icons/font-awesome/sitemap.svg","./projects/eav-ui/src/app/shared/signals/computed-analyzer.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-state.service.ts","./projects/eav-ui/src/app/edit/routing/edit-routing.service.ts","./projects/eav-ui/src/app/edit/fields/picker/models/picker-item.model.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-base.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-entity-base.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-features.model.ts","./projects/eav-ui/src/app/edit/fields/picker/picker.helpers.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-data.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-data.factory.ts","./projects/eav-ui/src/app/shared/signals/signal-equals.ts","./projects/eav-ui/src/app/edit/form/forms-state.service.ts","./projects/eav-ui/src/app/edit/formulas/formula-exec-specs.factory.ts","./projects/eav-ui/src/app/edit/state/fields-configs.model.ts","./projects/eav-ui/src/app/edit/formulas/formula-field-picker.helper.ts","./projects/eav-ui/src/app/edit/formulas/results/formula-settings.helper.ts","./projects/eav-ui/src/app/edit/formulas/formula-run-field.ts","./projects/eav-ui/src/app/edit/formulas/formula-engine.ts","./projects/eav-ui/src/app/edit/formulas/promise/formula-promise-result.model.ts","./projects/eav-ui/src/app/edit/formulas/promise/formula-promise-handler.ts","./projects/eav-ui/src/app/edit/fields/wrappers/wrappers.constants.ts","./projects/eav-ui/src/app/edit/fields/wrappers/wrapper.helper.ts","./projects/eav-ui/src/app/edit/state/fields-properties-engine-cycle.ts","./projects/eav-ui/src/app/edit/state/item-field-visibility.ts","./projects/eav-ui/src/app/edit/state/fields-settings-constants.service.ts","./projects/eav-ui/src/app/edit/shared/validation/validation.helpers.ts","./projects/eav-ui/src/app/edit/state/metadata-decorators.constants.ts","./projects/eav-ui/src/app/edit/state/fields-settings-update.helpers.ts","./projects/eav-ui/src/app/edit/state/fields-values-modified.helper.ts","./projects/eav-ui/src/app/edit/state/fields-properties-engine.ts","./projects/eav-ui/src/app/edit/state/fields-properties-updates.ts","./projects/eav-ui/src/app/edit/state/fields-settings-picker-updater.ts","./node_modules/lodash-es/transform.js","./projects/eav-ui/src/app/edit/state/fields-signals.helper.ts","./projects/eav-ui/src/app/shared/helpers/difference.ts","./projects/eav-ui/src/app/edit/state/fields-settings.service.ts","./projects/eav-ui/src/app/edit/state/field-translation-info.ts","./projects/eav-ui/src/app/edit/state/fields-translate.service.ts","./projects/eav-ui/src/app/features/feature-icon-indicator/feature-icon-indicator.component.html","./projects/eav-ui/src/app/features/feature-icon-indicator/feature-icon-indicator.component.ts","./projects/eav-ui/src/app/edit/localization/auto-translate-disabled-warning-dialog/auto-translate-disabled-warning-dialog.component.html","./projects/eav-ui/src/app/edit/localization/auto-translate-disabled-warning-dialog/auto-translate-disabled-warning-dialog.component.ts","./node_modules/@angular/material/fesm2022/divider.mjs","./node_modules/@angular/material/fesm2022/list.mjs","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.constants.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.helpers.ts","./projects/eav-ui/src/app/shared/components/translate-helper.component.ts","./projects/eav-ui/src/app/edit/localization/snack-bar-warning-demo/snack-bar-warning-demo.component.ts","./projects/eav-ui/src/app/edit/localization/snack-bar-warning-demo/snack-bar-warning-demo.component.html","./projects/eav-ui/src/app/edit/localization/auto-translate-menu-dialog/auto-translate-menu-dialog.component.html","./projects/eav-ui/src/app/edit/localization/auto-translate-menu-dialog/auto-translate-menu-dialog.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu/translate-menu.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu/translate-menu.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/localization-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/localization-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/field-metadata.decorator.ts","./projects/eav-ui/src/app/edit/fields/directives/change-anchor-target.directive.ts","./projects/eav-ui/src/app/edit/fields/help-text/field-help-text.component.html","./projects/eav-ui/src/app/edit/fields/help-text/field-help-text.component.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-default/boolean-base.component.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-default/boolean-default-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-default/boolean-default.component.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-default/boolean-default.component.html","./projects/eav-ui/src/app/edit/fields/basic/boolean-tristate/boolean-tristate-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-tristate/boolean-tristate.component.ts","./projects/eav-ui/src/app/edit/fields/basic/boolean-tristate/boolean-tristate.component.html","./projects/eav-ui/src/app/edit/fields/basic/custom-default/custom-default.component.ts","./projects/eav-ui/src/app/edit/fields/basic/custom-default/custom-default.component.html","./projects/eav-ui/src/app/edit/fields/basic/custom-json-editor/custom-json-editor-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/custom-json-editor/custom-json-editor.component.html","./projects/eav-ui/src/app/edit/fields/basic/custom-json-editor/custom-json-editor.component.ts","./node_modules/@angular/material/fesm2022/datepicker.mjs","./node_modules/@danielmoncada/angular-datetime-picker/fesm2022/danielmoncada-angular-datetime-picker.mjs","./node_modules/@danielmoncada/angular-datetime-picker-dayjs-adapter/fesm2022/danielmoncada-angular-datetime-picker-dayjs-adapter.mjs","./projects/eav-ui/src/app/edit/shared/date-adapters/mat-dayjs-date-adapter/mat-dayjs-date-adapter.ts","./projects/eav-ui/src/app/edit/shared/date-adapters/mat-dayjs-date-adapter/mat-dayjs-date-formats.ts","./projects/eav-ui/src/app/edit/shared/date-adapters/mat-dayjs-date-adapter/mat-dayjs-date-adapter.module.ts","./projects/eav-ui/src/app/edit/fields/basic/datetime-default/datetime-default-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/datetime-default/datetime-default.component.html","./projects/eav-ui/src/app/edit/fields/basic/datetime-default/datetime-default.component.ts","./projects/eav-ui/src/app/edit/fields/basic/empty-default/empty-default.component.ts","./projects/eav-ui/src/app/edit/fields/basic/empty-message/empty-message.component.html","./projects/eav-ui/src/app/edit/fields/basic/empty-message/empty-message.component.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-content-blocks/entity-content-blocks-logic.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-helpers.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-masks-helper.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-more-fields-helper.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-base.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-entity-base.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-app-assets.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-app-assets.ts","./node_modules/lodash-es/escapeRegExp.js","./projects/eav-ui/src/app/edit/fields/picker/data-sources/css/string-font-icon-picker.helpers.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-css.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-css.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-empty.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-empty.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-entity.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-entity.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-query.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-query.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-string.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/data-adapter-string.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-adapter.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-ui-mapper-base.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-ui-mapper-noop.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-ui-mapper-number-array.ts","./projects/eav-ui/src/app/edit/fields/picker/adapters/state-ui-mapper-string-array.ts","./projects/eav-ui/src/app/edit/fields/picker/constants/picker-config-model.constants.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-data-setup.ts","./node_modules/@angular/cdk/fesm2022/tree.mjs","./node_modules/@angular/material/fesm2022/tree.mjs","./projects/eav-ui/src/app/edit/fields/picker/picker-part-base.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-item-buttons/picker-item-buttons.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-item-buttons/picker-item-buttons.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-icon-help/picker-icon-help.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-icon-help/picker-icon-help.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-icon-info/picker-icon-info.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-icon-info/picker-icon-info.component.ts","./node_modules/ngx-tippy-wrapper/fesm2020/ngx-tippy-wrapper.mjs","./projects/eav-ui/src/app/edit/fields/picker/picker-item-preview/picker-item-preview.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-item-preview/picker-item-preview.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-item-label/picker-item-label.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-item-label/picker-item-label.component.ts","./projects/edit-types/src/PickerModeTree.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-tree/picker-tree-data-helper.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-tree/picker-tree-data-service.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-search/picker-search.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-search/picker-search.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-inline/picker-inline-base.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-inline/picker-inline-header.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-inline/picker-inline-header.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-checkboxes/picker-checkboxes.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-checkboxes/picker-checkboxes.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-pills/picker-pills.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-pills/picker-pills.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-radio/picker-radio.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-radio/picker-radio.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-text-toggle/picker-text-toggle.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-text-toggle/picker-text-toggle.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-text/picker-text.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-text/picker-text.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-preview/picker-preview.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-preview/picker-preview.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-list/picker-list.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-list/picker-list.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-dialog/picker-dialog.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker-dialog/picker-dialog.component.ts","./projects/eav-ui/src/app/edit/fields/picker/picker.component.html","./projects/eav-ui/src/app/edit/fields/picker/picker.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-picker/string-picker.helpers.ts","./projects/eav-ui/src/app/edit/fields/picker/data-sources/data-source-parser-csv.ts","./projects/eav-ui/src/app/edit/fields/picker/picker-logic-shared.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-default/entity-default-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-default/entity-default.component.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-content-blocks/entity-content-blocks.component.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-picker/entity-picker-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-picker/entity-picker.component.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-query/entity-query-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/entity-query/entity-query.component.ts","./projects/eav-ui/src/app/edit/shared/adam/adam.service.ts","./projects/eav-ui/src/app/edit/fields/connector/connector-instance.model.ts","./projects/eav-ui/src/app/edit/fields/connector/connector.helper.ts","./projects/eav-ui/src/app/edit/fields/connector/connector.component.ts","./projects/eav-ui/src/app/edit/fields/connector/connector.component.html","./projects/eav-ui/src/app/edit/fields/basic/external-web-component/custom-gps-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/external-web-component/string-wysiwyg-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/external-web-component/external-web-component.component.html","./projects/eav-ui/src/app/edit/fields/basic/external-web-component/external-web-component.component.ts","./projects/eav-ui/src/app/edit/fields/directives/paste-clipboard-image.directive.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-default/hyperlink-default-base.component.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-default/hyperlink-default-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-default/hyperlink-default.component.html","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-default/hyperlink-default.component.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-library/hyperlink-library-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/hyperlink-library/hyperlink-library.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-dropdown/string-dropdown-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/number-default/number-default-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/number-default/number-default.component.ts","./projects/eav-ui/src/app/edit/fields/basic/number-default/number-default.component.html","./projects/eav-ui/src/app/edit/fields/basic/number-dropdown/number-dropdown-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/number-dropdown/number-dropdown.component.ts","./projects/eav-ui/src/app/edit/fields/basic/number-picker/number-picker-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/number-picker/number-picker.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-default/string-default-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/string-default/string-default.component.html","./projects/eav-ui/src/app/edit/fields/basic/string-default/string-default.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-dropdown-query/string-dropdown-query-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/string-dropdown-query/string-dropdown-query.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-dropdown/string-dropdown.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-font-icon-picker/string-font-icon-picker-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/string-font-icon-picker/string-font-icon-picker.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-picker/string-picker-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/string-picker/string-picker.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-template-picker/string-template-picker.constants.ts","./projects/eav-ui/src/app/edit/fields/basic/string-template-picker/string-template-picker.component.html","./projects/eav-ui/src/app/edit/fields/basic/string-template-picker/string-template-picker.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-url-path/string-url-path-logic.ts","./projects/eav-ui/src/app/edit/fields/basic/string-url-path/string-url-path.component.ts","./projects/eav-ui/src/app/edit/fields/basic/string-url-path/string-url-path.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/adam-browser.models.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/adam-browser.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/adam-browser.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/dropzone-helper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-hint/adam-hint.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-hint/adam-hint.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-wrapper.component.html","./node_modules/ngx-dropzone-wrapper/fesm2020/ngx-dropzone-wrapper.mjs","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone/dropzone-wrapper.models.ts","./projects/field-string-wysiwyg/shared/wysiwyg.constants.ts","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone/dropzone-wysiwyg.ts","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone/dropzone-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone/dropzone-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/dropzone-dragging.helper.ts","./projects/eav-ui/src/app/edit/fields/wrappers/expand-dialog/content-expand.animation.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial-action.directive.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial-actions-content.directive.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial-trigger-content.directive.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial.component.ts","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial.component.html","./projects/eav-ui/src/app/shared/modules/extended-fab-speed-dial/extended-fab-speed-dial-trigger.directive.ts","./projects/eav-ui/src/app/edit/fields/wrappers/dialog-popup/dialog-popup.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/dialog-popup/dialog-popup.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/expand-dialog/expandable-wrapper.component.ts","./projects/eav-ui/src/app/shared/helpers/viewport.helpers.ts","./projects/eav-ui/src/app/edit/fields/wrappers/expand-dialog/expandable-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/feature-warning/feature-warning-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/feature-warning/feature-warning-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/group/collapsible-wrapper-logic.ts","./projects/eav-ui/src/app/edit/fields/wrappers/group/collapsible-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/group/collapsible-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/hidden/hidden-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/hidden/hidden-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/hyperlink-dialog/hyperlink-default-expandable-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/hyperlink-dialog/hyperlink-default-expandable-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/hyperlink-library-dialog/hyperlink-library-expandable-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/wrappers/hyperlink-library-dialog/hyperlink-library-expandable-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/picker-dialog/picker-expandable-wrapper.component.ts","./projects/eav-ui/src/app/edit/fields/wrappers/picker-dialog/picker-expandable-wrapper.component.html","./projects/eav-ui/src/app/edit/fields/input-components.constant.ts","./projects/eav-ui/src/app/edit/fields/wrappers/adam/adam-browser/adam-connector.ts","./projects/edit-types/src/BasicControlSettings.ts","./projects/eav-ui/src/app/edit/fields/builder/field-injector.service.ts","./projects/eav-ui/src/app/edit/fields/builder/fields-builder.directive.ts","./projects/eav-ui/src/app/edit/routing/edit-force-reload.service.ts","./projects/eav-ui/src/app/edit/entity-form/entity-translate-menu/entity-translate-menu.component.html","./projects/eav-ui/src/app/edit/entity-form/entity-translate-menu/entity-translate-menu.component.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-component/entity-form.component.html","./projects/eav-ui/src/app/edit/entity-form/entity-form-component/entity-form.component.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form.helpers.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-sync.service.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-builder/form-fields-builder.service.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-builder/form-fields-sync.service.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-builder/form-builder.component.ts","./projects/eav-ui/src/app/edit/entity-form/entity-form-builder/form-builder.component.html","./projects/eav-ui/src/app/edit/shared/models/json-format-v1/eav-values-dto.ts","./projects/eav-ui/src/app/edit/shared/models/json-format-v1/eav-attributes-dto.ts","./projects/eav-ui/src/app/edit/shared/models/json-format-v1/eav-entity-dto.ts","./projects/eav-ui/src/app/edit/shared/models/json-format-v1/eav-entity-bundle-dto.ts","./projects/eav-ui/src/app/features/features-used-but-missing-dialog/features-used-but-unlicensed-dialog.component.html","./projects/eav-ui/src/app/features/features-used-but-missing-dialog/features-used-but-unlicensed-dialog.component.ts","./projects/eav-ui/src/app/edit/dialog/header/publish-status-dialog/publish-status-dialog.component.ts","./projects/eav-ui/src/app/edit/dialog/header/publish-status-dialog/publish-status-dialog.component.html","./projects/eav-ui/src/app/edit/dialog/header/edit-dialog-header.component.html","./projects/eav-ui/src/app/edit/dialog/header/edit-dialog-header.component.ts","./projects/eav-ui/src/app/edit/dialog/main/form-slide.directive.ts","./projects/eav-ui/src/app/edit/dialog/main/snack-bar-save-errors/snack-bar-save-errors.component.html","./projects/eav-ui/src/app/edit/dialog/main/snack-bar-save-errors/snack-bar-save-errors.component.ts","./projects/eav-ui/src/app/edit/dialog/main/snack-bar-unsaved-changes/snack-bar-unsaved-changes.component.ts","./projects/eav-ui/src/app/edit/dialog/main/snack-bar-unsaved-changes/snack-bar-unsaved-changes.component.html","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-main.component.ts","./projects/eav-ui/src/app/edit/dialog/main/edit-dialog-main.component.html","./projects/eav-ui/src/app/edit/dialog/entry/edit-entry.component.html","./projects/eav-ui/src/app/edit/dialog/entry/edit-entry.component.ts","./projects/eav-ui/src/app/edit/dialog/footer/footer-preferences.ts","./projects/eav-ui/src/app/edit/fields/logic/field-logic-base.ts","./projects/eav-ui/src/app/edit/fields/logic/field-logic-unknown.ts","./projects/eav-ui/src/app/edit/fields/logic/field-logic-manager.ts","./projects/eav-ui/src/app/edit/fields/wrappers/localization/translate-menu/translate-menu.helpers.ts","./projects/eav-ui/src/app/edit/formulas/cache/source-code-helper.ts","./projects/eav-ui/src/app/edit/formulas/cache/formula-cache.builder.ts","./projects/eav-ui/src/app/edit/formulas/cache/formula-cache.service.ts","./projects/eav-ui/src/app/edit/formulas/targets/formula-targets.service.ts","./projects/eav-ui/src/app/edit/formulas/designer/formula-v1-snippets.ts","./projects/eav-ui/src/app/edit/formulas/designer/intellisense-v2.ts","./projects/eav-ui/src/app/edit/formulas/designer/editor-intellisense-function-v2.rawts","./projects/eav-ui/src/app/edit/formulas/designer/formula-designer.service.ts","./projects/eav-ui/src/app/edit/formulas/formula-definitions.ts","./projects/eav-ui/src/app/edit/formulas/run/formula-run-data.ts","./projects/eav-ui/src/app/edit/formulas/run/formula-run-context.ts","./projects/eav-ui/src/app/edit/formulas/run/formula-experimental-object.ts","./projects/eav-ui/src/app/edit/formulas/formula-developer-helper.ts","./projects/eav-ui/src/app/edit/formulas/formula-run-one-helpers.factory.ts","./projects/eav-ui/src/app/edit/formulas/results/formula-value-corrections.helper.ts","./projects/eav-ui/src/app/edit/formulas/targets/formula-targets.ts","./projects/eav-ui/src/app/edit/localization/language.service.ts","./projects/eav-ui/src/app/edit/localization/translation-link.constants.ts","./projects/eav-ui/src/app/edit/shared/content-types/content-type-item.service.ts","./projects/eav-ui/src/app/edit/shared/content-types/content-type.service.ts","./projects/eav-ui/src/app/edit/shared/helpers/item.helper.ts","./projects/eav-ui/src/app/edit/shared/input-types/input-type.service.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-content-type-attribute.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-content-type.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-dimension.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-values.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-entity-attributes.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-entity.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-item.ts","./projects/eav-ui/src/app/edit/shared/models/eav/eav-value.ts","./projects/eav-ui/src/app/edit/shared/services/logging.service.ts","./projects/eav-ui/src/app/edit/state/field-settings.helper.ts","./projects/eav-ui/src/app/edit/localization/field-writer.ts","./projects/eav-ui/src/app/edit/state/item-updater.helper.ts","./projects/eav-ui/src/app/edit/state/item.service.ts","./projects/eav-ui/src/app/shared/components/base.component.ts","./projects/eav-ui/src/app/shared/directives/base.directive.ts","./projects/eav-ui/src/app/shared/fields/data-type-catalog.ts","./projects/eav-ui/src/app/shared/helpers/copy-to-clipboard.helper.ts","./projects/eav-ui/src/app/shared/pipes/safe-html.pipe.ts","./projects/eav-ui/src/app/shared/services/entity.service.ts","./projects/eav-ui/src/app/shared/services/query.service.ts","./projects/eav-ui/src/app/shared/services/user-language.service.ts","./projects/eav-ui/src/app/shared/user/user-preferences.service.ts","./node_modules/dayjs/dayjs.min.js","./node_modules/dayjs/locale/ar.js","./node_modules/dayjs/locale/bg.js","./node_modules/dayjs/locale/cs.js","./node_modules/dayjs/locale/da.js","./node_modules/dayjs/locale/de-at.js","./node_modules/dayjs/locale/de-ch.js","./node_modules/dayjs/locale/de.js","./node_modules/dayjs/locale/el.js","./node_modules/dayjs/locale/en-au.js","./node_modules/dayjs/locale/en-ca.js","./node_modules/dayjs/locale/en-gb.js","./node_modules/dayjs/locale/en-ie.js","./node_modules/dayjs/locale/en.js","./node_modules/dayjs/locale/es-mx.js","./node_modules/dayjs/locale/es-us.js","./node_modules/dayjs/locale/es.js","./node_modules/dayjs/locale/fa.js","./node_modules/dayjs/locale/fi.js","./node_modules/dayjs/locale/fr-ch.js","./node_modules/dayjs/locale/fr.js","./node_modules/dayjs/locale/he.js","./node_modules/dayjs/locale/hi.js","./node_modules/dayjs/locale/hr.js","./node_modules/dayjs/locale/hu.js","./node_modules/dayjs/locale/id.js","./node_modules/dayjs/locale/it-ch.js","./node_modules/dayjs/locale/it.js","./node_modules/dayjs/locale/ja.js","./node_modules/dayjs/locale/jv.js","./node_modules/dayjs/locale/ko.js","./node_modules/dayjs/locale/lb.js","./node_modules/dayjs/locale/ms-my.js","./node_modules/dayjs/locale/ms.js","./node_modules/dayjs/locale/nl-be.js","./node_modules/dayjs/locale/nl.js","./node_modules/dayjs/locale/pa-in.js","./node_modules/dayjs/locale/pl.js","./node_modules/dayjs/locale/pt-br.js","./node_modules/dayjs/locale/pt.js","./node_modules/dayjs/locale/ru.js","./node_modules/dayjs/locale/sk.js","./node_modules/dayjs/locale/sl.js","./node_modules/dayjs/locale/sv.js","./node_modules/dayjs/locale/th.js","./node_modules/dayjs/locale/tr.js","./node_modules/dayjs/locale/uk.js","./node_modules/dayjs/locale/zh.js","./node_modules/dayjs/plugin/customParseFormat.js","./node_modules/dayjs/plugin/localeData.js","./node_modules/dayjs/plugin/localizedFormat.js","./node_modules/dayjs/plugin/utc.js","./node_modules/dropzone/dist/dropzone.js","./node_modules/papaparse/papaparse.min.js","./node_modules/reflect-metadata/Reflect.js","./node_modules/@angular/material/fesm2022/progress-spinner.mjs"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AdamItem } from '../../../../../../edit-types/src/AdamItem';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { PrefetchAdams } from '../../dialog/main/edit-dialog-main.models';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AdamCacheService extends SignalStoreBase<string, AdamSnapshot> {\r\n\r\n  constructor() {\r\n    super(classLog({AdamCacheService}));\r\n  }\r\n\r\n  override getId = (item: AdamSnapshot) => item.Guid;\r\n\r\n  loadPrefetch(prefetchAdams: PrefetchAdams): void {\r\n    if (prefetchAdams == null)\r\n      return; \r\n\r\n    const snapshots = Object.entries(prefetchAdams)\r\n      .map(([entityGuid, attributes]) => ({\r\n        Guid: entityGuid,\r\n        Attributes: attributes,\r\n      } satisfies AdamSnapshot));\r\n    this.addMany(snapshots);\r\n  }\r\n\r\n  getAdamSnapshot(entityGuid: string, fieldName: string): AdamItem[] {\r\n    return this.cache()[entityGuid]?.Attributes[fieldName];\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\ninterface AdamSnapshot {\r\n  Guid: string;\r\n  Attributes: AdamSnapshotAttributes;\r\n}\r\n\r\ninterface AdamSnapshotAttributes {\r\n  [name: string]: AdamItem[];\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AdamItem } from '../../../../../../edit-types/src/AdamItem';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { LinkInfo, PrefetchAdams, PrefetchLinks } from '../../dialog/main/edit-dialog-main.models';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\n\r\n/**\r\n * The link Cache will store info to all links incl. file references (ADAM)\r\n * to provide previews and link-resolution (eg. file:72 = /assets/icon.jpg)\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class LinkCacheService extends SignalStoreBase<string, LinkCache> {\r\n\r\n  constructor() {\r\n    super(classLog({LinkCacheService}));\r\n  }\r\n\r\n  override getId = (item: LinkCache) => item.key.trim().toLocaleLowerCase();\r\n\r\n  addPrefetch(prefetchLinks: PrefetchLinks, prefetchAdam: PrefetchAdams): void {\r\n\r\n    // Convert PrefetchLinks to LinkCache\r\n    const links: LinkCache[] = prefetchLinks\r\n      ? Object.entries(prefetchLinks)\r\n          .map(([key, linkInfo]) => ({ key, ...linkInfo }))\r\n      : [];\r\n\r\n    // Convert PrefetchAdam to LinkCache\r\n    // This is more complex, as the raw data is nested\r\n    const adamLinkList: LinkCache[] = prefetchAdam != null\r\n      ? Object.entries(prefetchAdam)\r\n          .flatMap(([_, prefetchFields]) => Object.entries(prefetchFields)\r\n            .flatMap(([__, items]) => this.adamToLinks(items))\r\n          )\r\n      : [];\r\n\r\n    this.addMany([ ...links, ...adamLinkList ]);\r\n  }\r\n\r\n  /** Add a new ADAM which was just uploaded */\r\n  addAdam(items: AdamItem[]): void {\r\n    this.addMany(this.adamToLinks(items));\r\n  }\r\n\r\n  /** Add a link which was just added (typed/selected) in the UI */\r\n  addLink(key: string, linkInfo: LinkInfo): void {\r\n    key = key.trim().toLocaleLowerCase();\r\n    const link: LinkCache = {\r\n      key,\r\n      ...linkInfo,\r\n      Adam: {\r\n        ...linkInfo.Adam,\r\n      },\r\n    } satisfies LinkCache;\r\n\r\n    this.add(link);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  private adamToLinks(items: AdamItem[]): LinkCache[] {\r\n    return items\r\n      .filter(item => !item.IsFolder)\r\n      .map(item => ({\r\n        key: item.ReferenceId,\r\n        Adam: { ...item },\r\n        Value: item.Url,\r\n      } satisfies LinkCache));\r\n  }\r\n}\r\n\r\n\r\ninterface LinkCache extends LinkInfo{\r\n  key: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map, tap } from 'rxjs';\r\nimport { classLog } from '../../shared/logging';\r\nimport { GlobalConfigService } from '../../shared/services/global-config.service';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { EavEditLoadDto, SaveEavFormData } from '../dialog/main/edit-dialog-main.models';\r\nimport { SaveResult } from '../state/save-result.model';\r\n\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  fetchFormData: false,\r\n  saveFormData: false,\r\n};\r\n\r\nconst webApiLoad = 'cms/edit/load';\r\nconst webApiSave = 'cms/edit/save';\r\n\r\n@Injectable()\r\nexport class FormDataService extends HttpServiceBase {\r\n\r\n  log = classLog({FormDataService}, logSpecs);\r\n\r\n  constructor(\r\n    private globalConfigService: GlobalConfigService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  fetchFormData(items: string) {\r\n    this.log.fnIf('fetchFormData', { items, context: this.context });\r\n    return this.http.post<EavEditLoadDto>(this.apiUrl(webApiLoad), items, {\r\n      params: { appId: this.appId }\r\n    }).pipe(\r\n      map(formData => {\r\n        formData.Context.Language.List = formData.Context.Language.List.filter(language => language.IsEnabled);\r\n        return formData;\r\n      }),\r\n      tap(formData => {\r\n        this.globalConfigService.allowDebug(formData.Context.Enable.DebugMode);\r\n      }),\r\n    );\r\n  }\r\n\r\n  saveFormData(result: SaveEavFormData, partOfPage: string) {\r\n    this.log.fnIf('saveFormData', { result, partOfPage });\r\n    return this.http.post<SaveResult>(this.apiUrl(webApiSave), result, {\r\n      params: { appId: this.appId, partOfPage }\r\n    });\r\n  }\r\n}\r\n","import { Of } from '../../../../../../core';\r\nimport { AdamItem } from '../../../../../../edit-types/src/AdamItem';\r\nimport { DialogContext } from '../../../app-administration/models';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { InputTypeMetadata } from '../../../shared/fields/input-type-metadata.model';\r\nimport { EavContentType, EavEntity } from '../../shared/models/eav';\r\nimport { EavContentTypeDto, EavEntityBundleDto, EavEntityDto } from '../../shared/models/json-format-v1';\r\n\r\nexport interface EavPublishStatus {\r\n  DraftShouldBranch: boolean;\r\n  IsPublished: boolean;\r\n}\r\n\r\nexport interface PublishStatus extends EavPublishStatus {\r\n  formId: number;\r\n}\r\n\r\n/** PublishMode is short version of PublishStatus */\r\nexport const PublishModes = {\r\n  Show: 'show',\r\n  Hide: 'hide',\r\n  Branch: 'branch',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n\r\nexport interface EavEditLoadDto extends EavPublishStatus {\r\n  ContentTypeItems: EavEntityDto[];\r\n  ContentTypes: EavContentTypeDto[];\r\n  Context: DialogContext;\r\n  InputTypes: InputTypeMetadata[];\r\n  Items: EavEntityBundleDto[];\r\n  Prefetch?: Prefetch;\r\n  Settings: EditSettingsDto;\r\n\r\n  RequiredFeatures?: Record<Of<typeof FeatureNames>, string[]>;\r\n}\r\n\r\nexport interface EditSettings {\r\n  Values: Record<string, unknown>;\r\n  // note: added by 2dm 2023-01-21 but not used yet\r\n  // will probably contain special wysiwyg-edit configs and similar...\r\n  Entities: EavEntity[];\r\n  /**\r\n   * ContentTypes which are additional settings.\r\n   * New v17 to help Pickers figure out the best title for new-entities.\r\n   * TODO: @SDV\r\n   */\r\n  ContentTypes: EavContentType[];\r\n}\r\n\r\nexport interface EditSettingsDto {\r\n  Values: Record<string, unknown>;\r\n  Entities: EavEntityDto[];\r\n  /**\r\n   * ContentTypes which are additional settings.\r\n   * New v17 to help Pickers figure out the best title for new-entities.\r\n   * TODO: @SDV\r\n   */\r\n  ContentTypes: EavContentTypeDto[];\r\n}\r\n\r\nexport interface SaveEavFormData extends EavPublishStatus {\r\n  Items: EavEntityBundleDto[];\r\n}\r\n\r\nexport interface Prefetch {\r\n  Adam: PrefetchAdams;\r\n\r\n  // #RemovePickerDataCacheService\r\n  // /**\r\n  //  * Entities for dropdowns which were already selected\r\n  //  * TODO: AS OF 2024-08-27 it is not in use any more, so we should either\r\n  //  * - remove from the backend\r\n  //  * - rethink what we do/improve\r\n  //  */\r\n  // Entities: PrefetchEntity[];\r\n  Links: PrefetchLinks;\r\n\r\n  /** NgRx store helper */\r\n  _guid?: string;\r\n}\r\n\r\nexport interface PrefetchAdams {\r\n  [entityGuid: string]: {\r\n    [fieldName: string]: AdamItem[];\r\n  };\r\n}\r\n\r\nexport interface PrefetchLinks {\r\n  [key: string]: LinkInfo;\r\n}\r\n\r\nexport interface LinkInfo {\r\n  /** Null if URL doesn't resolve to ADAM file (is page, external url or blocked by permissions) */\r\n  Adam?: AdamItem;\r\n  /** Resolved or original URL */\r\n  Value: string;\r\n}\r\n","import { Injectable, Signal } from '@angular/core';\r\nimport { Of } from '../../../../../core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { EavPublishStatus, PublishModes, PublishStatus } from '../dialog/main/edit-dialog-main.models';\r\nimport { SignalStoreBase } from '../shared/store/signal-store-base';\r\nimport { FormConfigService } from './form-config.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class FormPublishingService extends SignalStoreBase<number, PublishStatus> {\r\n  \r\n  constructor() {\r\n    super(classLog({FormPublishingService}));\r\n  }\r\n\r\n  override getId = (item: PublishStatus) => item.formId;\r\n\r\n  setPublishMode(publishMode: Of<typeof PublishModes>, formId: number, eavService: FormConfigService): void {\r\n    // if publish mode is prohibited, set default\r\n    if (eavService.config.versioningOptions[publishMode] == null) {\r\n      publishMode = Object.keys(eavService.config.versioningOptions)[0] as Of<typeof PublishModes>;\r\n    }\r\n    const publishStatus: PublishStatus = {\r\n      formId,\r\n      DraftShouldBranch: publishMode === PublishModes.Branch,\r\n      IsPublished: publishMode === PublishModes.Show,\r\n    };\r\n    this.add(publishStatus);\r\n  }\r\n\r\n  getPublishMode(formId: number): Signal<Of<typeof PublishModes>> {\r\n    return this.#signalsPublishModeCache.getOrCreate(formId, () => this.toPublishMode(this.get(formId)));\r\n  }\r\n  #signalsPublishModeCache = new ComputedCacheHelper<number, Of<typeof PublishModes>>('publishMode');\r\n\r\n  \r\n  /** Convert the booleans to the appropriate \"verb\" */\r\n  public toPublishMode(publishStatus: EavPublishStatus): Of<typeof PublishModes> {\r\n    const publishMode: Of<typeof PublishModes> = publishStatus.DraftShouldBranch\r\n      ? PublishModes.Branch\r\n      : publishStatus.IsPublished\r\n        ? PublishModes.Show\r\n        : PublishModes.Hide;\r\n    return publishMode;\r\n  }\r\n\r\n}\r\n","import { Injectable, signal } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../core';\r\nimport { FeaturesService } from '../../features/features.service';\r\nimport { InputTypeHelpers } from '../../shared/fields/input-type-helpers';\r\nimport { UpdateEnvVarsFromDialogSettings } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { convertUrlToForm } from '../../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemAddIdentifier } from '../../shared/models/edit-form.model';\r\nimport { UserLanguageService } from '../../shared/services/user-language.service';\r\nimport { calculateIsParentDialog, sortLanguages } from '../dialog/main/edit-dialog-main.helpers';\r\nimport { EavEditLoadDto } from '../dialog/main/edit-dialog-main.models';\r\nimport { FieldLogicManager } from '../fields/logic/field-logic-manager';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { LanguageService } from '../localization/language.service';\r\nimport { EditUrlParams } from '../routing/edit-url-params.model';\r\nimport { AdamCacheService } from '../shared/adam/adam-cache.service';\r\nimport { LinkCacheService } from '../shared/adam/link-cache.service';\r\nimport { ContentTypeItemService } from '../shared/content-types/content-type-item.service';\r\nimport { ContentTypeService } from '../shared/content-types/content-type.service';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { InputTypeService } from '../shared/input-types/input-type.service';\r\nimport { EavContentType } from '../shared/models/eav/eav-content-type';\r\nimport { EavEntity } from '../shared/models/eav/eav-entity';\r\nimport { FieldsSettingsHelpers } from '../state/field-settings.helper';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { ItemService } from '../state/item.service';\r\nimport { FormConfigService } from './form-config.service';\r\nimport { FormDataService } from './form-data.service';\r\nimport { FormLanguageService } from './form-language.service';\r\nimport { FormPublishingService } from './form-publishing.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: true,\r\n  fetchFormData: false,\r\n  importLoadedData: false,\r\n  keepInitialValues: false,\r\n  initMissingValues: false,\r\n};\r\n\r\n/**\r\n * Service to initialize an edit form. Will:\r\n * - Load form data\r\n * - store it in various services, stores etc.\r\n * - Load initial values for formulas\r\n */\r\n@Injectable()\r\nexport class EditInitializerService {\r\n  \r\n  log = classLog({EditInitializerService}, logSpecs);\r\n\r\n  public loaded = signal(false);\r\n\r\n  #formDataService = transient(FormDataService);\r\n\r\n  #userLanguageSvc = transient(UserLanguageService);\r\n\r\n  #initialFormValues: Record<string, ItemValuesOfLanguage> = {};\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private inputTypeService: InputTypeService,\r\n    private contentTypeItemService: ContentTypeItemService,\r\n    private contentTypeService: ContentTypeService,\r\n    private publishStatusService: FormPublishingService,\r\n    private translate: TranslateService,\r\n    private languageService: LanguageService,\r\n    private languageStore: FormLanguageService,\r\n    private snackBar: MatSnackBar,\r\n    private adamCacheService: AdamCacheService,\r\n    private linkCacheService: LinkCacheService,\r\n    private featuresService: FeaturesService,\r\n  ) {\r\n    this.log.aIf('constructor', null, \"constructor\");\r\n  }\r\n\r\n  fetchFormData(): void {\r\n    const l = this.log.fnIf('fetchFormData');\r\n    const inbound = convertUrlToForm((this.route.snapshot.params as EditUrlParams).items);\r\n    // 2024-06-01 2dm adding index to round trip\r\n    const form = {\r\n      ...inbound,\r\n      items: inbound.items.map((item, index) => {\r\n        return {\r\n          ...item,\r\n          clientId: index,\r\n        };\r\n      }),\r\n    }\r\n    l.a('fetchFormData', form);\r\n\r\n    const editItems = JSON.stringify(form.items);\r\n    this.#formDataService.fetchFormData(editItems).subscribe(dataFromBackend => {\r\n      // 2dm 2024-06-01 preserve prefill and client-data from original\r\n      // and stop relying on round-trip to keep it\r\n      const formData: EavEditLoadDto = {\r\n        ...dataFromBackend,\r\n        Items: dataFromBackend.Items.map(item => {\r\n          // try to find original item\r\n          const originalItem = form.items.find(i => i.clientId === item.Header.clientId);\r\n          l.a('fetchFormData - remix', {item, originalItem});\r\n\r\n          return originalItem == null\r\n            ? item\r\n            : {\r\n                ...item,\r\n                Header: {\r\n                  ...item.Header,\r\n                  Prefill: originalItem.Prefill,\r\n                  ClientData: originalItem.ClientData,\r\n                }\r\n              };\r\n        }),\r\n      };\r\n      l.a('fetchFormData - after remix', {formData});\r\n\r\n\r\n      // SDV: document what's happening here\r\n      this.featuresService.load(formData.Context, formData);\r\n      UpdateEnvVarsFromDialogSettings(formData.Context.App);\r\n      this.#importLoadedData(formData);\r\n      this.#keepInitialValues();\r\n      this.#initMissingValues();\r\n\r\n      this.loaded.set(true);\r\n    });\r\n  }\r\n\r\n  #importLoadedData(loadDto: EavEditLoadDto): void {\r\n    const l = this.log.fnIf('importLoadedData');\r\n    const formId = Math.floor(Math.random() * 99999);\r\n    const isParentDialog = calculateIsParentDialog(this.route);\r\n    const itemGuids = loadDto.Items.map(item => item.Entity.Guid);\r\n\r\n    this.itemService.loadItems(loadDto.Items);\r\n    // we assume that input type and content type data won't change between loading parent and child forms\r\n    this.inputTypeService.addMany(loadDto.InputTypes);\r\n    this.contentTypeItemService.addContentTypeItems(loadDto.ContentTypeItems);\r\n    this.contentTypeService.addContentTypes(loadDto.ContentTypes);\r\n    this.adamCacheService.loadPrefetch(loadDto.Prefetch?.Adam);\r\n    this.linkCacheService.addPrefetch(loadDto.Prefetch?.Links, loadDto.Prefetch?.Adam);\r\n\r\n    const items = this.itemService.getMany(itemGuids);\r\n    const createMode = items[0].Entity.Id === 0;\r\n    const isCopy = (items[0].Header as ItemAddIdentifier).DuplicateEntity != null;\r\n    const enableHistory = !createMode && this.route.snapshot.data.history !== false;\r\n    const settingsAsEav = {\r\n      ...loadDto.Settings,\r\n      Entities: EavEntity.convertMany(loadDto.Settings.Entities),\r\n      ContentTypes: EavContentType.convertMany(loadDto.Settings.ContentTypes),\r\n    };\r\n    this.formConfig.initFormConfig(loadDto.Context, formId, isParentDialog, itemGuids, createMode, isCopy, enableHistory, settingsAsEav);\r\n\r\n    var langs = loadDto.Context.Language;\r\n    // WARNING! TranslateService is a new instance for every form and language must be set for every one of them\r\n    const userLangCode = this.#userLanguageSvc.uiCode(langs.Current);\r\n    this.translate.use(userLangCode);\r\n\r\n    // load language data only for parent dialog to not overwrite languages when opening child dialogs\r\n    if (isParentDialog) {\r\n      const sortedLanguages = sortLanguages(langs.Primary, langs.List);\r\n      this.languageService.addMany(sortedLanguages);\r\n    }\r\n    this.languageStore.addForm(formId, langs.Primary, langs.Current, false);\r\n\r\n    // First convert to publish mode, because then it will run checks if this is allowed\r\n    const publishMode = this.publishStatusService.toPublishMode(loadDto);\r\n    this.publishStatusService.setPublishMode(publishMode, formId, this.formConfig);\r\n  }\r\n\r\n  //#region Initial Values for Formulas to retrieve if needed\r\n\r\n  /**\r\n   * Preserve initial values for future use in formulas which may need to know the initial value\r\n   */\r\n  #keepInitialValues(): void {\r\n    const l = this.log.fnIf('keepInitialValues');\r\n    const items = this.itemService.getMany(this.formConfig.config.itemGuids);\r\n    const allLangs = this.languageService.getAll().map(language => language.NameId);\r\n    const language = this.formConfig.language();\r\n    if (!allLangs.includes(language.current)) allLangs.push(language.current);\r\n    if (!allLangs.includes(language.primary)) allLangs.push(language.primary);\r\n\r\n    for (const item of items)\r\n      for (const currentLang of allLangs) {\r\n        const formValues = new EntityReader(currentLang, language.primary).currentValues(item.Entity.Attributes);\r\n        this.#initialFormValues[this.#initialValuesCacheKey(item.Entity.Guid, currentLang)] = formValues;\r\n      }\r\n  }\r\n\r\n  #initialValuesCacheKey(entityGuid: string, language: string): string {\r\n    return `entityGuid:${entityGuid}:language:${language}`;\r\n  }\r\n\r\n  getInitialValues(entityGuid: string, language: string): ItemValuesOfLanguage {\r\n    return this.#initialFormValues[this.#initialValuesCacheKey(entityGuid, language)];\r\n  }\r\n  //#endregion\r\n\r\n  #initMissingValues(): void {\r\n    const l = this.log.fnIf('initMissingValues');\r\n\r\n    const updater = this.itemService.updater;\r\n    const eavConfig = this.formConfig.config;\r\n    const formId = eavConfig.formId;\r\n    const items = this.itemService.getMany(eavConfig.itemGuids);\r\n    const inputTypes = this.inputTypeService.getAll();\r\n    const languages = this.languageService.getAll();\r\n    const language = this.formConfig.language();\r\n    /** force UI to switch to default language, because some values are missing in the default language */\r\n    let switchToDefault = false;\r\n    const isCreateMode = eavConfig.createMode;\r\n\r\n    const fss = new FieldsSettingsHelpers(\"EditInitializerService\");\r\n\r\n    for (const item of items) {\r\n      const contentType = this.contentTypeService.getContentTypeOfItem(item);\r\n\r\n      for (const ctAttribute of contentType.Attributes) {\r\n        const currentName = ctAttribute.Name;\r\n        const inputType = inputTypes.find(i => i.Type === ctAttribute.InputType);\r\n        const isEmptyType = InputTypeHelpers.isEmpty(inputType?.Type);\r\n        l.a(`Attribute: '${currentName}' InputType: '${inputType?.Type}' isEmptyType: '${isEmptyType}'`);\r\n\r\n        if (isEmptyType)\r\n          continue;\r\n\r\n        const logic = FieldLogicManager.singleton().getOrUnknown(inputType?.Type);\r\n\r\n        const attributeValues = item.Entity.Attributes[ctAttribute.Name];\r\n        const fieldSettings = fss.getDefaultSettings(\r\n          new EntityReader(language.primary, language.primary).flatten(ctAttribute.Metadata)\r\n        );\r\n\r\n        if (languages.length === 0) {\r\n          l.a(`${currentName} languages none, simple init`);\r\n          const firstValue = new FieldReader(attributeValues, '*').currentOrDefaultOrAny?.Value;\r\n          if (logic.isValueEmpty(firstValue, isCreateMode))\r\n            updater.setDefaultValue(item, ctAttribute, inputType, fieldSettings, languages, language.primary);\r\n        } else {\r\n          l.a(`${currentName} languages many, complex init`);\r\n\r\n          // check if there is a value for the generic / all language\r\n          const disableI18n = inputType?.DisableI18n;\r\n          const noLanguageValue = new FieldReader(attributeValues, '*').currentOrDefault?.Value;\r\n          l.a(currentName, { disableI18n, noLanguageValue });\r\n          if (!disableI18n && noLanguageValue !== undefined) {\r\n            // move * value to defaultLanguage\r\n            const transactionItem = updater.removeItemAttributeDimension(item.Entity.Guid, ctAttribute.Name, '*', true);\r\n            updater.addItemAttributeValue(\r\n              item.Entity.Guid,\r\n              ctAttribute.Name,\r\n              noLanguageValue,\r\n              language.primary,\r\n              false,\r\n              ctAttribute.Type,\r\n              false,\r\n              transactionItem,\r\n            );\r\n            l.a(`${currentName} exit`);\r\n            continue;\r\n          }\r\n\r\n          const defaultLanguageValue = new FieldReader(attributeValues, language.primary).currentOrDefault?.Value;\r\n\r\n          const valueIsEmpty = logic.isValueEmpty(defaultLanguageValue, isCreateMode);\r\n          l.a(currentName, { currentName, valueIsEmpty, defaultLanguageValue, isCreateMode });\r\n          if (valueIsEmpty) {\r\n            const valUsed = updater.setDefaultValue(item, ctAttribute, inputType, fieldSettings, languages, language.primary);\r\n\r\n            // 2022-08-15 2dm added this\r\n            // If we run into more problems (like required date-fields which result in null)\r\n            // we may have to update the logic to use FieldLogicBase and add rules for each type what would be valid\r\n            // or test for IsRequired as well\r\n\r\n            // If the primary language isn't ready, enforce switch-to-default\r\n            // Skip this for ephemeral fields as they never load with content\r\n            // Also switch for fields which use null as default (like boolean-tristate) as this kind of \"empty\" is valid\r\n            if (valUsed != null && !fieldSettings.IsEphemeral)\r\n              switchToDefault = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (switchToDefault && language.current !== language.primary) {\r\n      this.languageStore.setCurrent(formId, language.primary);\r\n      const message = this.translate.instant('Message.SwitchedLanguageToDefault', { language: language.primary });\r\n      this.snackBar.open(message, null, { duration: 5000 });\r\n    }\r\n  }\r\n}\r\n","import { ActivatedRoute } from '@angular/router';\r\nimport { Language } from '../../form/form-languages.model';\r\n\r\nexport function calculateIsParentDialog(route: ActivatedRoute) {\r\n  let editDialogCount = 0;\r\n  for (const path of route.snapshot.pathFromRoot) {\r\n    if (path.url.length <= 0) continue;\r\n    for (const urlSegment of path.url) {\r\n      if (urlSegment.path !== 'edit') continue;\r\n      editDialogCount++;\r\n    }\r\n  }\r\n  return editDialogCount === 1;\r\n}\r\n\r\nexport function sortLanguages(primaryLangKey: string, languages: Language[]) {\r\n  if (languages.length === 0) { return languages; }\r\n\r\n  let primaryLang: Language;\r\n  const sameLangs: Language[] = [];\r\n  const otherLangs: Language[] = [];\r\n  for (const language of languages) {\r\n    if (language.NameId === primaryLangKey) {\r\n      primaryLang = language;\r\n    } else if (language.NameId.startsWith(primaryLangKey.split('-')[0])) {\r\n      sameLangs.push(language);\r\n    } else {\r\n      otherLangs.push(language);\r\n    }\r\n  }\r\n  sameLangs.sort((a, b) => a.NameId.localeCompare(b.NameId));\r\n  otherLangs.sort((a, b) => a.NameId.localeCompare(b.NameId));\r\n\r\n  const allLangsSorted: Language[] = !primaryLang ? [...sameLangs, ...otherLangs] : [primaryLang, ...sameLangs, ...otherLangs];\r\n  return allLangsSorted;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavWindow } from '../../../shared/models/eav-window.model';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormConfiguration } from '../../form/form-configuration.model';\r\nimport { UrlHelpers } from '../helpers';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  load: true,\r\n  sortByType: false,\r\n  insertToDom: false,\r\n};\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport const FileTypeConstants = {\r\n  CSS: '.css',\r\n  JS: '.js',\r\n} as const;\r\n\r\ninterface LoadFile {\r\n  path: string;\r\n  type: string;\r\n  loaded: boolean;\r\n  domEl: HTMLLinkElement | HTMLScriptElement;\r\n}\r\n\r\n/**\r\n * Service for loading scripts and stylesheets dynamically for an edit form.\r\n * It must be different for each form, since it uses the form's configuration\r\n * to resolve paths pointing to the correct app, zone, etc.\r\n */\r\n@Injectable()\r\nexport class ScriptsLoaderService {\r\n\r\n  log = classLog({ScriptsLoaderService}, logSpecs);\r\n\r\n  #loadedFiles: LoadFile[] = [];\r\n\r\n  constructor(private formConfig: FormConfigService) { }\r\n\r\n  /** Loads CSS and JS files in order (CSS first) and calls callback function when finished */\r\n  load(scripts: string[], callback: () => void) {\r\n    this.log.fnIf('load', {scripts})\r\n    const sortedFiles = this.#sortByType(scripts);\r\n    this.#insertToDom(sortedFiles, callback, 0); // async, called again and again after each script is loaded\r\n  }\r\n\r\n  #sortByType(scripts: string[]): LoadFile[] {\r\n    this.log.fnIf('sortByType', {scripts})\r\n    const cssFiles: LoadFile[] = [];\r\n    const jsFiles: LoadFile[] = [];\r\n    scripts.forEach(script => {\r\n      const file: LoadFile = {\r\n        path: ScriptsLoaderService.resolveUrlTokens(script, this.formConfig.config),\r\n        type: null,\r\n        loaded: false,\r\n        domEl: null\r\n      };\r\n      if (file.path.endsWith(FileTypeConstants.CSS)) {\r\n        file.type = FileTypeConstants.CSS;\r\n        cssFiles.push(file);\r\n      } else if (file.path.endsWith(FileTypeConstants.JS)) {\r\n        file.type = FileTypeConstants.JS;\r\n        jsFiles.push(file);\r\n      }\r\n    });\r\n    return cssFiles.concat(jsFiles);\r\n  }\r\n\r\n  #insertToDom(files: LoadFile[], callback: () => void, increment: number) {\r\n    this.log.fnIf('insertToDom', {files, increment})\r\n    const file = files[increment];\r\n    increment++;\r\n    if (!file) {\r\n      callback();\r\n      return;\r\n    }\r\n    file.path = file.path + '?sxcver=' + window.sxcVersion; // break cache\r\n\r\n    const existing = this.#loadedFiles.find(loadedFile => loadedFile.path === file.path);\r\n    if (existing) {\r\n      if (existing.loaded) {\r\n        this.#insertToDom(files, callback, increment);\r\n      } else {\r\n        const _listener = () => {\r\n          file.loaded = true;\r\n          this.#insertToDom(files, callback, increment);\r\n          existing.domEl.removeEventListener('load', _listener);\r\n          existing.domEl.removeEventListener('error', _listener);\r\n        };\r\n        existing.domEl.addEventListener('load', _listener);\r\n        existing.domEl.addEventListener('error', _listener);\r\n      }\r\n    } else {\r\n      if (file.type === FileTypeConstants.CSS) {\r\n        file.domEl = document.createElement('link');\r\n        file.domEl.rel = 'stylesheet';\r\n        file.domEl.href = file.path;\r\n      } else if (file.type === FileTypeConstants.JS) {\r\n        file.domEl = document.createElement('script');\r\n        file.domEl.type = 'module';\r\n        file.domEl.src = file.path;\r\n      }\r\n\r\n      const _listener = () => {\r\n        file.loaded = true;\r\n        this.#insertToDom(files, callback, increment);\r\n        file.domEl.removeEventListener('load', _listener);\r\n        file.domEl.removeEventListener('error', _listener);\r\n      };\r\n      file.domEl.addEventListener('load', _listener);\r\n      file.domEl.addEventListener('error', _listener);\r\n\r\n      document.querySelector('head').appendChild(file.domEl);\r\n      this.#loadedFiles.push(file);\r\n    }\r\n  }\r\n\r\n  public static resolveUrlTokens(url: string, formConfig: FormConfiguration) {\r\n    return url.replace(/\\[System:Path\\]/i, UrlHelpers.getUrlPrefix('system', formConfig))\r\n      .replace(/\\[Zone:Path\\]/i, UrlHelpers.getUrlPrefix('zone', formConfig))\r\n      .replace(/\\[App:Path\\]/i, UrlHelpers.getUrlPrefix('app', formConfig))\r\n      .replace(/\\[App:PathShared\\]/i, UrlHelpers.getUrlPrefix('appShared', formConfig));\r\n  }\r\n}\r\n","import appleFilled from '!raw-loader!./2sxc/Material-Icon-Adam-48-filled.svg';\r\nimport appleOutlined from '!raw-loader!./2sxc/Material-Icon-Adam-48-outlined.svg';\r\nimport draftBranch from '!raw-loader!./font-awesome/draft-branch.svg';\r\nimport fileArchive from '!raw-loader!./font-awesome/file-archive.svg';\r\nimport fileAudio from '!raw-loader!./font-awesome/file-audio.svg';\r\nimport fileCode from '!raw-loader!./font-awesome/file-code.svg';\r\nimport fileExcel from '!raw-loader!./font-awesome/file-excel.svg';\r\nimport fileImage from '!raw-loader!./font-awesome/file-image.svg';\r\nimport filePdf from '!raw-loader!./font-awesome/file-pdf.svg';\r\nimport filePowerpoint from '!raw-loader!./font-awesome/file-powerpoint.svg';\r\nimport fileText from '!raw-loader!./font-awesome/file-text.svg';\r\nimport fileVideo from '!raw-loader!./font-awesome/file-video.svg';\r\nimport fileWord from '!raw-loader!./font-awesome/file-word.svg';\r\nimport file from '!raw-loader!./font-awesome/file.svg';\r\nimport folderPlus from '!raw-loader!./font-awesome/folder-plus.svg';\r\nimport folder from '!raw-loader!./font-awesome/folder.svg';\r\nimport sitemap from '!raw-loader!./font-awesome/sitemap.svg';\r\nimport { Injectable } from '@angular/core';\r\nimport { MatIconRegistry } from '@angular/material/icon';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Injectable()\r\nexport class LoadIconsService {\r\n  private icons: Record<string, string> = {\r\n    'apple-filled': appleFilled,\r\n    'apple-outlined': appleOutlined,\r\n    'draft-branch': draftBranch,\r\n    file,\r\n    'file-archive': fileArchive,\r\n    'file-audio': fileAudio,\r\n    'file-code': fileCode,\r\n    'file-excel': fileExcel,\r\n    'file-image': fileImage,\r\n    'file-pdf': filePdf,\r\n    'file-powerpoint': filePowerpoint,\r\n    'file-text': fileText,\r\n    'file-video': fileVideo,\r\n    'file-word': fileWord,\r\n    folder,\r\n    'folder-plus': folderPlus,\r\n    sitemap,\r\n  };\r\n\r\n  constructor(private matIconRegistry: MatIconRegistry, private domSanitizer: DomSanitizer) { }\r\n\r\n  load() {\r\n    Object.entries(this.icons).forEach(([name, svg]) => {\r\n      this.matIconRegistry.addSvgIconLiteral(name, this.domSanitizer.bypassSecurityTrustHtml(svg));\r\n    });\r\n  }\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 48 48\\\">\\r\\n<style type=\\\"text/css\\\">\\r\\n\\t.st0{display:none;}\\r\\n\\t.st1{display:inline;}\\r\\n</style>\\r\\n<g id=\\\"Layer_1\\\">\\r\\n\\t<path d=\\\"M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z\\\"/>\\r\\n</g>\\r\\n<g id=\\\"Layer_3\\\" class=\\\"st0\\\">\\r\\n</g>\\r\\n<g id=\\\"Icon\\\">\\r\\n\\t<path d=\\\"M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44c2,0,4-1.85,6-1.85S28,44,30,44\\r\\n\\t\\tc6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z\\\"/>\\r\\n</g>\\r\\n</svg>\\r\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 48 48\\\">\\r\\n<style type=\\\"text/css\\\">\\r\\n\\t.st0{display:none;}\\r\\n\\t.st1{display:inline;}\\r\\n</style>\\r\\n<g id=\\\"Layer_1\\\">\\r\\n\\t<path d=\\\"M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z\\\"/>\\r\\n</g>\\r\\n<g id=\\\"Layer_3\\\" class=\\\"st0\\\">\\r\\n</g>\\r\\n<g id=\\\"Icon\\\">\\r\\n\\t<path d=\\\"M32,20c3.7,0,6,2.1,6,5.47C38,33.21,33.01,40,30.06,40c-0.25-0.04-0.93-0.35-1.38-0.56c-1.25-0.58-2.8-1.3-4.68-1.3\\r\\n\\t\\ts-3.43,0.72-4.68,1.3C18.87,39.65,18.19,39.97,18,40c-3.01,0-8-6.79-8-14.53C10,22.1,12.3,20,16,20c2.44,0,5.29,1.17,6.17,1.62\\r\\n\\t\\tL24,22.56l1.83-0.94C26.64,21.2,29.53,20,32,20 M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44\\r\\n\\t\\tc2,0,4-1.85,6-1.85S28,44,30,44c6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z\\\"/>\\r\\n</g>\\r\\n</svg>\\r\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 39.2 28.2 71.8 65.5 78.7-.8 17.2-5 30.4-12.7 40-17.5 21.8-53.1 25.2-90.7 28.7-28.2 2.6-57.4 5.4-80.4 16.9-3.4 1.7-6.7 3.6-9.7 5.7V158.4c36.5-7.4 64-39.7 64-78.4 0-44.2-35.8-80-80-80S0 35.8 0 80c0 38.7 27.5 71 64 78.4v195.2C27.5 361 0 393.3 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-36.9-24.9-67.9-58.9-77.2 5-9.6 12.3-14.6 19-18 17.5-8.8 42.5-11.2 68.9-13.7 42.6-4 86.7-8.1 112.7-40.5 12.4-15.5 19-35.5 19.8-60.7C357.3 214 384 182.1 384 144zM32 80c0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48-48-21.5-48-48zm96 352c0 26.5-21.5 48-48 48s-48-21.5-48-48c0-26.4 21.4-47.9 47.8-48h.6c26.3.2 47.6 21.7 47.6 48zm187.8-241.5L304 192c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48c0 22.4-15.4 41.2-36.2 46.5z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M128 96v32h32V96zm65.9 169.6c-1.1-5.6-6-9.6-11.8-9.6H160v-32h-32v32l-19.4 97.2c-6.5 32.5 18.3 62.8 51.4 62.8s57.9-30.3 51.4-62.8zm-33.6 124.5c-17.9 0-32.4-12.1-32.4-27s14.5-27 32.4-27 32.4 12.1 32.4 27-14.5 27-32.4 27zM128 160v32h32v-32zm64-96h-32v32h32zm177.9 33.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.4 2.1 7.4 4.2l83.9 83.9c2 2 3.5 4.6 4.2 7.4H256zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h79.7v32h32V32H224v104c0 13.3 10.7 24 24 24h104zM192 192h-32v32h32zm0-64h-32v32h32z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-77.6-66.6c38.5-26 61.6-69.3 61.6-115.7 0-24.7-6.5-48.9-18.9-70.1-12-20.6-29.1-37.8-49.6-50-7.1-4.2-16.3-1.9-20.6 5.2-4.2 7.1-1.9 16.3 5.2 20.6 33.1 19.7 53.7 55.8 53.7 94.3 0 36.5-18.1 70.4-48.3 90.9-6.9 4.6-8.7 14-4 20.8 2.9 4.3 7.6 6.6 12.4 6.6 3.1 0 6-.8 8.5-2.6zm-26.6-38.3c26-17.3 41.5-46.2 41.5-77.4 0-32.9-17.7-63.7-46.2-80.3-7.2-4.2-16.3-1.7-20.5 5.4-4.2 7.2-1.7 16.3 5.4 20.5 19.3 11.2 31.3 32 31.3 54.3 0 21.1-10.5 40.7-28.1 52.4-6.9 4.6-8.8 13.9-4.2 20.8 2.9 4.4 7.7 6.7 12.5 6.7 2.8.1 5.7-.7 8.3-2.4zm-27-38.2c13.7-8.5 21.8-23.1 21.8-39.2 0-17-9.3-32.5-24.2-40.6-7.3-3.9-16.4-1.2-20.3 6.1-3.9 7.3-1.2 16.4 6.1 20.3 5.2 2.8 8.5 8.3 8.5 14.2 0 5.6-2.9 10.8-7.6 13.7-7 4.4-9.2 13.6-4.8 20.7 2.8 4.6 7.7 7.1 12.8 7.1 2.5 0 5.2-.7 7.7-2.3zM138 266.7v74.7L112 322H94v-36h18l26-19.3m17.9-50.7c-2.9 0-6 1.1-8.4 3.5L104 256H76c-6.6 0-12 5.4-12 12v72c0 6.6 5.4 12 12 12h28l43.5 36.5c2.4 2.4 5.4 3.5 8.4 3.5 6.2 0 12.1-4.8 12.1-12V228c0-7.2-5.9-12-12.1-12z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.941 97.941l-83.882-83.882A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zm-22.627 22.628a15.89 15.89 0 0 1 4.195 7.431H256V32.491a15.88 15.88 0 0 1 7.431 4.195l83.883 83.883zM336 480H48c-8.837 0-16-7.163-16-16V48c0-8.837 7.163-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304c0 8.837-7.163 16-16 16zm-161.471-67.404l-25.928-7.527a5.1 5.1 0 0 1-3.476-6.32l58.027-199.869a5.1 5.1 0 0 1 6.32-3.476l25.927 7.527a5.1 5.1 0 0 1 3.476 6.32L180.849 409.12a5.1 5.1 0 0 1-6.32 3.476zm-48.446-47.674l18.492-19.724a5.101 5.101 0 0 0-.351-7.317L105.725 304l38.498-33.881a5.1 5.1 0 0 0 .351-7.317l-18.492-19.724a5.1 5.1 0 0 0-7.209-.233L57.61 300.279a5.1 5.1 0 0 0 0 7.441l61.263 57.434a5.1 5.1 0 0 0 7.21-.232zm139.043.232l61.262-57.434a5.1 5.1 0 0 0 0-7.441l-61.262-57.434a5.1 5.1 0 0 0-7.209.233l-18.492 19.724a5.101 5.101 0 0 0 .351 7.317L278.275 304l-38.499 33.881a5.1 5.1 0 0 0-.351 7.317l18.492 19.724a5.1 5.1 0 0 0 7.209.232z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM211.7 308l50.5-81.8c4.8-8-.9-18.2-10.3-18.2h-4.1c-4.1 0-7.9 2.1-10.1 5.5-31 48.5-36.4 53.5-45.7 74.5-17.2-32.2-8.4-16-45.8-74.5-2.2-3.4-6-5.5-10.1-5.5H132c-9.4 0-15.1 10.3-10.2 18.2L173 308l-59.1 89.5c-5.1 8 .6 18.5 10.1 18.5h3.5c4.1 0 7.9-2.1 10.1-5.5 37.2-58 45.3-62.5 54.4-82.5 31.5 56.7 44.3 67.2 54.4 82.6 2.2 3.4 6 5.4 10 5.4h3.6c9.5 0 15.2-10.4 10.1-18.4L211.7 308z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M159 336l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0l-39 39L63 448h256V304l-55.5-55.5c-4.7-4.7-12.3-4.7-17 0L159 336zm96-50.7l32 32V416H95.1l.3-67.2 15.6-15.6 48 48c20.3-20.3 77.7-77.6 96-95.9zM127 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm0-96c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm242.9-62.1L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-22-171.2c-13.5-13.3-55-9.2-73.7-6.7-21.2-12.8-35.2-30.4-45.1-56.6 4.3-18 12-47.2 6.4-64.9-4.4-28.1-39.7-24.7-44.6-6.8-5 18.3-.3 44.4 8.4 77.8-11.9 28.4-29.7 66.9-42.1 88.6-20.8 10.7-54.1 29.3-58.8 52.4-3.5 16.8 22.9 39.4 53.1 6.4 9.1-9.9 19.3-24.8 31.3-45.5 26.7-8.8 56.1-19.8 82-24 21.9 12 47.6 19.9 64.6 19.9 27.7.1 28.9-30.2 18.5-40.6zm-229.2 89c5.9-15.9 28.6-34.4 35.5-40.8-22.1 35.3-35.5 41.5-35.5 40.8zM180 175.5c8.7 0 7.8 37.5 2.1 47.6-5.2-16.3-5-47.6-2.1-47.6zm-28.4 159.3c11.3-19.8 21-43.2 28.8-63.7 9.7 17.7 22.1 31.7 35.1 41.5-24.3 4.7-45.4 15.1-63.9 22.2zm153.4-5.9s-5.8 7-43.5-9.1c41-3 47.7 6.4 43.5 9.1z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM204.3 208H140c-6.6 0-12 5.4-12 12v184c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12v-60.4h44.3c38.7 0 67.7-27.3 67.7-69 0-38.6-23.8-66.6-67.7-66.6zm26 97.7c-7.5 7.6-17.8 11.4-31 11.4H160V233h39.7c12.9 0 23.1 3.7 30.6 11.1 15.3 15.1 15 46.5 0 61.6z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-48-244v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M224 280.593C224 267.01 212.989 256 199.407 256H88.593C75.011 256 64 267.01 64 280.593v110.815C64 404.99 75.011 416 88.593 416h110.814C212.989 416 224 404.99 224 391.407V381l27.971 27.971a23.998 23.998 0 0 0 16.97 7.029H296c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-27.059a24.003 24.003 0 0 0-16.97 7.029L224 291v-10.407zM192 384H96v-96h96v96zm80.255-96H288v96h-15.745L224 342.826v-13.652L272.255 288zm97.686-190.059l-83.883-83.882A47.996 47.996 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zM256 32.491a15.888 15.888 0 0 1 7.432 4.195l83.882 83.882a15.882 15.882 0 0 1 4.195 7.431H256V32.491zM352 464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V48c0-8.837 7.164-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-53.6-246.5c-6.8 32.8-32.5 139.7-33.4 150.3-5.8-29.1-.7 1.6-41.8-150.9-1.4-5.2-6.2-8.9-11.6-8.9h-6.4c-5.4 0-10.2 3.6-11.6 8.9-38.3 142.3-37.4 140.6-39.4 154.7-4.1-23.9 2.1-2.9-34.4-154.4-1.3-5.4-6.1-9.2-11.7-9.2h-7.2c-7.8 0-13.5 7.3-11.6 14.9 9.5 38 34.5 137.4 42.2 168 1.3 5.3 6.1 9.1 11.6 9.1h17c5.4 0 10.2-3.7 11.6-8.9 34.2-127.7 33.5-123.4 36.7-142.9 6.5 31.1.2 7 36.7 142.9 1.4 5.2 6.2 8.9 11.6 8.9h14c5.5 0 13.7-3.7 15.1-9l42.8-168c1.9-7.6-3.8-15-11.6-15h-6.8c-5.7 0-10.6 4-11.8 9.5z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path d=\\\"M194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path d=\\\"M344 272h-72v-72c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v72h-72c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h72v72c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-72h72c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 640 512\\\"><path d=\\\"M608 352h-32v-97.59c0-16.77-13.62-30.41-30.41-30.41H336v-64h48c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h48v64H94.41C77.62 224 64 237.64 64 254.41V352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32H96v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32h-32v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-480 32v96H32v-96h96zm240 0v96h-96v-96h96zM256 128V32h128v96H256zm352 352h-96v-96h96v96z\\\"/></svg>\";","import { Signal } from '@angular/core';\r\nimport { Reactive, ReactiveNode, SIGNAL } from '@angular/core/primitives/signals';\r\n\r\nexport class ComputedAnalyzer<T> {\r\n  constructor(private computed: Signal<T>) {\r\n  }\r\n\r\n  getConsumerNode() {\r\n    const forDebug = this.computed as Reactive;\r\n    const node = forDebug[SIGNAL] as ConsumerNode;\r\n    return node;\r\n  }\r\n\r\n  getProducers() {\r\n    const producers = this.getConsumerNode().producerNode;\r\n    return producers;\r\n  }\r\n\r\n  getDirtyProducers() {\r\n    const node = this.getConsumerNode();\r\n    const producers = node.producerNode;\r\n    return producers;\r\n  }\r\n\r\n  snapShotProducers(onlyDirty: boolean = false) {\r\n    return this.#getSubInfosOf(this.getConsumerNode(), onlyDirty);\r\n  }\r\n\r\n  #getSubInfosOf(producer: ReactiveNode, filterDirty: boolean) {\r\n    return this.#getSubProducers(producer.producerNode, producer.producerLastReadVersion, filterDirty);\r\n  }\r\n\r\n\r\n  #getSubProducers(subProducers: ReactiveNode[], producerVersions: number[], filterDirty: boolean): ProducerState[] {\r\n    if (!subProducers) return [];\r\n\r\n    let subInfos = subProducers\r\n      .map((producer, idx) => {\r\n        const dirtyPrd = producer.dirty;\r\n        const verOwn = producerVersions[idx];\r\n        const verPrd = producer.version;\r\n        const dirtyVer = verOwn < verPrd;\r\n        const subInfos = this.#getSubInfosOf(producer, filterDirty);\r\n        const dirtySub = subInfos.some(d => d.dirty);\r\n        const dirty = dirtyPrd || dirtyVer || dirtySub;\r\n        const dirtyDepth = subInfos.find(d => d.dirty)?.dirtyDepth + 1 || (dirty ? 1 : 0);\r\n        return {\r\n          name: (producer as any)?.debugName || 'unknown',\r\n          idx,\r\n          dirty,\r\n          dirtyDepth,\r\n          dirtyPrd,\r\n          dirtyVer,\r\n          dirtySub,\r\n          verOwn,\r\n          verPrd,\r\n          producer,\r\n          subInfos,\r\n        } as ProducerState;\r\n      });\r\n\r\n    if (filterDirty)\r\n      subInfos = subInfos.filter(d => d.dirty);\r\n    return subInfos;\r\n  }\r\n}\r\n\r\ninterface ProducerState {\r\n  idx: number;\r\n  name: string;\r\n  dirty: boolean;\r\n  dirtyDepth: number;\r\n  dirtyVer: boolean;\r\n  dirtyPrd: boolean;\r\n  dirtySub: boolean;\r\n  verOwn: number;\r\n  verPrd: number;\r\n  producer: ReactiveNode;\r\n  subInfos: ProducerState[];\r\n}\r\n\r\n// interface ProducerSnapshot {\r\n//   idx: number;\r\n//   name: string;\r\n//   ver: number;\r\n//   val: unknown;\r\n//   dirty: boolean;\r\n//   dirtyPrd: boolean;\r\n//   dirtySub: boolean;\r\n//   subInfos: ProducerState[];\r\n//   producer: ReactiveNode;\r\n// }\r\n\r\n// https://github.com/angular/angular/blob/main/packages/core/primitives/signals/src/graph.ts#L184C1-L188C2\r\ninterface ConsumerNode extends ReactiveNode {\r\n  producerNode: NonNullable<ReactiveNode['producerNode']>;\r\n  producerIndexOfThis: NonNullable<ReactiveNode['producerIndexOfThis']>;\r\n  producerLastReadVersion: NonNullable<ReactiveNode['producerLastReadVersion']>;\r\n}","import { Injectable, signal } from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\nimport { classLog } from '../../shared/logging';\r\n\r\n/**\r\n * A Service to hold the form group and anything specific to a form.\r\n *\r\n * Important: This is specific to a single entity.\r\n */\r\n@Injectable()\r\nexport class EntityFormStateService {\r\n\r\n  log = classLog({EntityFormStateService});\r\n\r\n  constructor() {\r\n  }\r\n\r\n  /** Signal to determine that the form group has been initialized */\r\n  controlsCreated = signal(false);\r\n\r\n  isSaving = signal(false);\r\n\r\n  /** The Form Group */\r\n  public readonly formGroup = new UntypedFormGroup({});\r\n\r\n}\r\n","import { Injectable, Injector, OnDestroy, Signal } from '@angular/core';\r\nimport { toSignal } from '@angular/core/rxjs-interop';\r\nimport { filter, map, Subject } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\nimport { mapUntilChanged } from '../../shared/rxJs/mapUntilChanged';\r\nimport { ServiceBase } from '../../shared/services/service-base';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormLanguageService } from '../form/form-language.service';\r\nimport { UrlHelpers } from '../shared/helpers';\r\nimport { EditUrlParams } from './edit-url-params.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  childFormResult: true,\r\n  expand: false,\r\n  open: false,\r\n  watchToRefreshOnVersionsClosed: true,\r\n}\r\n\r\n/**\r\n * Special helper to handle opening / closing field-specific popups.\r\n * E.g. the larger dialog on hyperlinks/files or entity-pickers.\r\n *\r\n * Note: also seems to be involved in the version-dialog closing as well.\r\n * \r\n * Note that it seems to be \"Scoped\" to the EditDialogMain Component\r\n */\r\n@Injectable()\r\nexport class EditRoutingService extends ServiceBase implements OnDestroy {\r\n\r\n  log = classLog({EditRoutingService}, logSpecs);\r\n\r\n  #dialogRouter = transient(DialogRoutingService);\r\n  #route = this.#dialogRouter.route;\r\n  #router = this.#dialogRouter.router;\r\n\r\n  constructor(\r\n    private langInstanceSvc: FormLanguageService,\r\n    private formConfig: FormConfigService\r\n  ) {\r\n    super();\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#childFormResult$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  init() {\r\n    this.#initHideHeader();\r\n    this.#watchChildFormResult();\r\n  }\r\n\r\n  #childFormResult$ = new Subject<ChildFormResult>();\r\n\r\n  #getParams() { return this.#route.snapshot.params as EditUrlParams; }\r\n\r\n  #getParamsAndPayload() {\r\n    const p = this.#getParams();\r\n    const hasDetails = p.detailsEntityGuid != null && p.detailsFieldId != null;\r\n    return {\r\n      params: p,\r\n      hasDetails,\r\n      hasUpdate: p.updateEntityGuid != null && p.updateFieldId != null,\r\n      guid: hasDetails ? p.detailsEntityGuid : p.updateEntityGuid,\r\n      fieldId: hasDetails ? p.detailsFieldId : p.updateFieldId,\r\n    };\r\n  }\r\n\r\n  /** Tells if field with this index should be expanded */\r\n  isExpanded(fieldId: number, entityGuid: string) {\r\n    const fieldIndex = fieldId.toString();\r\n    const params = this.#getParams();\r\n    const isExpanded = params.detailsEntityGuid === entityGuid && params.detailsFieldId === fieldIndex;\r\n    return isExpanded;\r\n  }\r\n\r\n  /** Tells if field with this index should be expanded */\r\n  isExpanded$(fieldId: number, entityGuid: string) {\r\n    const fieldIndex = fieldId.toString();\r\n    return this.#route.params.pipe(\r\n      mapUntilChanged((p: EditUrlParams) => p.detailsEntityGuid === entityGuid && p.detailsFieldId === fieldIndex),\r\n    );\r\n  }\r\n\r\n  public isExpandedSignal(fieldId: number, entityGuid: string, injector: Injector): Signal<boolean> {\r\n    // Create a unique key by combining fieldId and entityGuid, then check cache\r\n    const key = `${fieldId}-${entityGuid}`;\r\n    const cached = this.#signalsExpandedCache[key];\r\n    if (cached) return cached;\r\n\r\n    // Get the observable and convert it to a signal\r\n    const obs = this.isExpanded$(fieldId, entityGuid);\r\n    return this.#signalsExpandedCache[key] = toSignal(obs, { injector });\r\n  }\r\n  #signalsExpandedCache: Record<string, Signal<boolean>> = {};\r\n\r\n  /** Fires when child form is closed and has a result, new entity was added */\r\n  childFormResult(fieldId: number, entityGuid: string) {\r\n    const l = this.log.fnIf('childFormResult', { fieldId, entityGuid });\r\n    const obs = this.#childFormResult$.pipe(\r\n      filter(cr => cr.updateEntityGuid === entityGuid && cr.updateFieldId === fieldId && cr.result != null),\r\n      map(cr => cr.result),\r\n    );\r\n    return l.rSilent(obs);\r\n  }\r\n\r\n  /** Fires when child form is closed */\r\n  childFormClosed() {\r\n    return this.#childFormResult$.pipe(map(_ => null));\r\n  }\r\n\r\n  expand(expand: boolean, fieldId: number, entityGuid: string, componentTag?: string) {\r\n    const l = this.log.fnIf('expand', { expand, fieldId, entityGuid, componentTag });\r\n    const pInfo = this.#getParamsAndPayload();\r\n    const p = pInfo.params;\r\n    const oldEditUrl = `edit/${p.items}` + (pInfo.hasDetails ? `/details/${pInfo.guid}/${pInfo.fieldId}` : '');\r\n    const newEditUrl = `edit/${p.items}` + (expand ? `/details/${entityGuid}/${fieldId}` : '');\r\n    const url = UrlHelpers.newUrlIfCurrentContainsOldUrl(this.#route, oldEditUrl, newEditUrl);\r\n    if (url == null) return l.end('no change');\r\n    this.#router.navigate([url], { state: componentTag && { componentTag } });\r\n    l.end('routed away to ', { url});\r\n  }\r\n\r\n  /** Opens child dialog and stores update entityGuid and fieldId in the url, if field is not expanded already */\r\n  open(fieldId: number, entityGuid: string, form: EditForm) {\r\n    const l = this.log.fnIf('open', { fieldId, entityGuid, form });\r\n    const formUrl = convertFormToUrl(form);\r\n    const pInfo = this.#getParamsAndPayload();\r\n    // if field is expanded, just open child because that info will be used for field update\r\n    if (pInfo.hasDetails) {\r\n      this.#router.navigate([`edit/${formUrl}`], { relativeTo: this.#route });\r\n      return l.end('expanded, just open child');\r\n    }\r\n\r\n    // otherwise add /update/:entityGuid/:fieldId to the url\r\n    const oldEditUrl = `edit/${pInfo.params.items}`;\r\n    const newEditUrl = `edit/${pInfo.params.items}/update/${entityGuid}/${fieldId}/edit/${formUrl}`;\r\n    const url = UrlHelpers.newUrlIfCurrentContainsOldUrl(this.#route,oldEditUrl, newEditUrl);\r\n    if (url == null) return l.end('no change');\r\n    this.#router.navigate([url]);\r\n    l.end('routed away to ', { url });\r\n  }\r\n\r\n  /** Update hideHeader for the form. Fix for safari and mobile browsers */\r\n  #initHideHeader() {\r\n    this.subscriptions.add(\r\n      this.#route.params\r\n        .pipe(\r\n          mapUntilChanged((p: EditUrlParams) => p.detailsEntityGuid != null && p.detailsFieldId != null)\r\n        )\r\n        .subscribe(hasDetails => this.langInstanceSvc.updateHideHeader(this.formConfig.config.formId, hasDetails))\r\n    );\r\n  }\r\n\r\n  #watchChildFormResult() {\r\n    this.subscriptions.add(\r\n      this.#dialogRouter.childDialogClosed$().pipe(\r\n        map(() => {\r\n          const pInfo = this.#getParamsAndPayload();\r\n          return {\r\n            pInfo,\r\n            result: {\r\n              updateEntityGuid: pInfo.guid,\r\n              updateFieldId: parseInt(pInfo.fieldId, 10),\r\n              result: this.#router.getCurrentNavigation().extras?.state,\r\n            } satisfies ChildFormResult\r\n          };\r\n        }),\r\n      ).subscribe(({ pInfo, result }) => {\r\n        // alert subscribers that child form closed\r\n        this.#childFormResult$.next(result);\r\n\r\n        // clear update ids from url (leave expanded/details)\r\n        if (!pInfo.hasUpdate) return;\r\n        \r\n        const p = pInfo.params;\r\n        const url = UrlHelpers.newUrlIfCurrentContainsOldUrl(this.#route, `edit/${p.items}/update/${p.updateEntityGuid}/${p.updateFieldId}`, `edit/${p.items}`);\r\n        if (url == null) return;\r\n        this.#router.navigate([url]);\r\n      })\r\n    );\r\n  }\r\n}\r\n\r\nexport interface NavigateFormResult {\r\n  navigateUrl: string;\r\n}\r\n\r\ninterface ChildFormResult {\r\n  updateEntityGuid: string;\r\n  updateFieldId: number;\r\n  /** On add, contains GUID and Id of newly added item */\r\n  result: {\r\n    [guid: string]: number;\r\n  };\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { EntityLight } from '../../../../../../../edit-types/src/EntityLight';\r\n\r\nexport interface PickerItem {\r\n  /** The title to show in the dropdown */\r\n  label: string;\r\n\r\n  /** The value to store */\r\n  value: string;\r\n\r\n  /** The previewValue to Show (Icon, etc.) */\r\n  previewValue?: string;\r\n\r\n  /** The HTML to show in the preview */\r\n  previewHtml?: string;\r\n\r\n  /**\r\n   * The entity Id, only used to enable edit etc. if the item is an entity.\r\n   */\r\n  id?: number;\r\n\r\n  /**\r\n   * Prevent edit of this item for whatever reason, v15\r\n   * This property does not come from the server, but must be added by code.\r\n   */\r\n  noEdit?: boolean;\r\n\r\n  noRemove?: boolean;\r\n\r\n  /**\r\n   * Prevent delete of this item for whatever reason, v15\r\n   * This property does not come from the server, but must be added by code.\r\n   */\r\n  noDelete?: boolean;\r\n\r\n  /**\r\n   * Prevent select of this item for whatever reason, v16\r\n   * It was originally added so \"no query\" message will be shown in the dropdown.\r\n   * This property does not come from the server, but must be added by code.\r\n   *\r\n   * TODO: this is not quite correct, the UI seems to use and then look if re-select is allowed,\r\n   * but it's usually true for error messages...\r\n   */\r\n  noSelect?: boolean;\r\n\r\n\r\n  /**\r\n   * The tooltip that is seen on hover over item in the dropdown.\r\n   * This property does not come from the server, but must be added by code from the settings.\r\n   */\r\n  tooltip?: string;\r\n\r\n  /**\r\n   * The data that is seen on click on information icon on item in the dropdown.\r\n   * This property does not come from the server, but must be added by code from the settings.\r\n   */\r\n  info?: string;\r\n\r\n  /**\r\n   * The data that is seen on click on help icon on item in the dropdown.\r\n   * This property does not come from the server, but must be added by code from the settings.\r\n   */\r\n  link?: string;\r\n\r\n  /**\r\n   * The streamName is used for tree config when we have data from multiple streams and they have same Ids.\r\n   * This property does not come from the server, but must be added by code from the settings.\r\n   */\r\n  sourceStreamName?: string;\r\n\r\n  /**\r\n   * Indicate that this item is an error or message, which means it should not be selectable and it should\r\n   * also not be filtered out.\r\n   */\r\n  isMessage?: boolean;\r\n\r\n  /**\r\n   * The data of the underlying original entity.\r\n   * Used in formulas and field masks for all properties.\r\n   * Named `data` and not `entity` because in theory the data could come from elsewhere and never be an entity. \r\n   */\r\n  data?: EntityLight;\r\n\r\n  /**\r\n   * WIP to list features required for this item.\r\n   * \r\n   * Goal is to probably have a CSV always consisting of prefix like \r\n   * \r\n   * * `feature:` and then a feature ID such as `feature:PickerUiRadio` + a possible action such as `hint=feature:PickerUiRadio`\r\n   * * later `package:` and then a package\r\n   * * later `permission:` and then a permission\r\n   * \r\n   * Important: This is beta and not for public use; ATM used in the radio/checkboxes of pickers and only there.\r\n   * It can still change at any time, both format and implementation.\r\n   */\r\n  rules?: string;\r\n\r\n}\r\n\r\nexport class PickerItemFactory {\r\n\r\n  /** Generate a placeholder item to show in the list to show during loading or in case of error */\r\n  static placeholder(translate: TranslateService, i18nLabel: string, suffix?: string): PickerItem {\r\n    return {\r\n      label: translate.instant(i18nLabel) + (suffix ?? ''),\r\n      value: null,\r\n      noSelect: true,\r\n      isMessage: true,\r\n      noDelete: true,\r\n      noEdit: true,\r\n    } satisfies PickerItem;\r\n  }\r\n\r\n  /** Generate a placeholder item to show in the list to show during loading or in case of error */\r\n  static message(translate: TranslateService, i18nLabel: string, params?: object): PickerItem {\r\n    return {\r\n      label: translate.instant(i18nLabel, params),\r\n      value: null,\r\n      noSelect: true,\r\n      isMessage: true,\r\n      noDelete: true,\r\n      noEdit: true,\r\n    } satisfies PickerItem;\r\n  }\r\n}\r\n","import { Signal } from '@angular/core';\r\nimport { ClassLogger } from '../../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../../edit-debug';\r\nimport { DataSourceBase } from '../data-sources/data-source-base';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DeleteEntityProps } from '../models/picker.models';\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { StateAdapter } from './state-adapter';\r\n\r\nexport abstract class DataAdapterBase {\r\n\r\n  /** Log Specs to be used as a basis for all inheriting classes */\r\n  static logSpecs = {\r\n    all: false,\r\n    setupEmpty: false,\r\n    connectState: false,\r\n    initPrefetch: true,\r\n    fetchItems: false,\r\n    constructor: false,\r\n    fields: [...DebugFields, 'Categories'],\r\n  };\r\n\r\n  log: ClassLogger<typeof DataAdapterBase.logSpecs>;\r\n\r\n  constructor() { }\r\n\r\n  /** Picker Features of this DataAdapter - must be implemented by every data source to communicate it's features */\r\n  public abstract myFeatures: Signal<Partial<PickerFeatures>>;\r\n\r\n  /** a signal for data-sources - may not need a signal, if it's unchanging... */\r\n  public dataSource = signalObj<DataSourceBase>('dataSource', null satisfies DataSourceBase);\r\n\r\n  /**\r\n   * The options to show.\r\n   * Can be different from the underlying data, since it may have error or loading-entries.\r\n   * This is a signal, so it can be used in the template. it will _never_ be null.\r\n   */\r\n  public optionsOrHints: Signal<PickerItem[]> = computedObj('optionsOrHints', () => this.dataSource().data() ?? []);\r\n\r\n  public deleteCallback: (props: DeleteEntityProps) => void;\r\n\r\n  //#region Setup & Init\r\n\r\n  protected abstract dataSourceRaw: DataSourceBase;\r\n\r\n  public connectState(state: StateAdapter): this {\r\n    const l = this.log.fnIf('connectState');\r\n\r\n    this.dataSource.set(this.dataSourceRaw.setup());\r\n\r\n    this.deleteCallback = p => state.doAfterDelete(p);\r\n    return l.rSilent(this);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  abstract deleteItem(props: DeleteEntityProps): void;\r\n\r\n  abstract editItem(editParams: { entityGuid: string, entityId: number }, entityType: string): void;\r\n\r\n  abstract fetchItems(): void;\r\n}\r\n","import { HttpErrorResponse } from \"@angular/common/http\";\r\nimport { inject } from '@angular/core';\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { take } from 'rxjs';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { EditForm, EditPrep } from \"../../../../../app/shared/models/edit-form.model\";\r\nimport { EntityService } from \"../../../../../app/shared/services/entity.service\";\r\nimport { ClassLogger } from '../../../../shared/logging/class/class-logger';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { EntityFormStateService } from '../../../entity-form/entity-form-state.service';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { EditRoutingService } from '../../../routing/edit-routing.service';\r\nimport { FieldMask } from '../../../shared/helpers';\r\nimport { FieldState } from '../../field-state';\r\nimport { DataSourceEntityBase } from '../data-sources/data-source-entity-base';\r\nimport { PickerItem, PickerItemFactory } from '../models/picker-item.model';\r\nimport { DeleteEntityProps } from \"../models/picker.models\";\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { DataAdapterBase } from \"./data-adapter-base\";\r\nimport { DataAdapterCanRefresh } from './data-adapter-can-refresh';\r\n\r\nexport const logSpecsDataAdapterEntityBase = {\r\n  ...DataAdapterBase.logSpecs,\r\n  editItem: true,\r\n  getPrefill: true, // for create Entity & query\r\n};\r\n\r\nexport abstract class DataAdapterEntityBase extends DataAdapterBase implements DataAdapterCanRefresh {\r\n\r\n  //#region Services, constructor, log\r\n\r\n  log: ClassLogger<typeof DataAdapterBase.logSpecs> & ClassLogger<typeof logSpecsDataAdapterEntityBase>;\r\n\r\n  protected formConfig = inject(FormConfigService);\r\n  #editRoutingService = inject(EditRoutingService);\r\n  protected translate = inject(TranslateService);\r\n  #snackBar = inject(MatSnackBar);\r\n  protected fieldState = inject(FieldState) as FieldState<string[], FieldSettingsWithPickerSource & FieldSettingsPickerMerged>;\r\n  protected group = inject(EntityFormStateService).formGroup;\r\n  #entityService = transient(EntityService);\r\n\r\n  constructor() { super(); }\r\n\r\n  protected name = this.fieldState.name;\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * Content Type Mask\r\n   * This is a text or mask containing all query parameters.\r\n   * Since it's a mask, it can also contain values from the current item\r\n   */\r\n  #paramsMaskLazy = transient(FieldMask).initSignal('PickerSource-EntityType', this.fieldState.settingExt('EntityType'));\r\n\r\n  protected contentType = computedObj('contentType', () => this.#paramsMaskLazy?.result() ?? '');\r\n\r\n  #createEntityTypes = computedObj('createEntityTypes', () => this.fieldState.settings().CreateTypes);\r\n\r\n  /** \r\n   * Sync params: patch the data-source with the current settings\r\n   * Should be implemented in Entity & Query, probably not in AppAssets\r\n   */\r\n  syncParams(): void { }\r\n\r\n  onAfterViewInit(): void {\r\n    this.syncParams();\r\n  }\r\n\r\n  /** The features depend on contentType names being available to support create */\r\n  public myFeatures = computedObj<Partial<PickerFeatures>>('features', () => {\r\n    // if we don't know the content-type, we can't create new entities\r\n    const disableCreate = !this.contentType() && !this.#createEntityTypes();\r\n    return { create: !disableCreate } satisfies Partial<PickerFeatures>;\r\n  });\r\n\r\n  // WIP\r\n  #deletedItemsGuids = signalObj<string[]>('deletedItemsGuids', []);\r\n\r\n  /* Error handling to use in the final options - ATM never really used, since we can't really trigger the problem it was meant for */\r\n  protected errorOptions = signalObj<PickerItem[]>('errorOptions', null);\r\n\r\n  /** The options/hints to show in the UI */\r\n  override optionsOrHints = computedObj('optionsOrHints', () => {\r\n    const errors = this.errorOptions();\r\n    if (errors) return errors;\r\n    const ds = this.dataSource();\r\n    const deleted = this.#deletedItemsGuids();\r\n    const items = ds.data().filter(item => !deleted.some(guid => guid === item.value));\r\n    return ds.loading()\r\n      ? [PickerItemFactory.message(this.translate, 'Fields.Picker.Loading'), ...items]\r\n      : items;\r\n  });\r\n\r\n  initPrefetch(prefetchGuids: string[]): void {\r\n    this.syncParams();\r\n    this.log.fnIfInList('initPrefetch', 'fields', this.name, { prefetchGuids });\r\n    (this.dataSource() as DataSourceEntityBase).initPrefetch?.(prefetchGuids);\r\n  }\r\n\r\n  forceReloadData(missingData: string[]): void {\r\n    const l = this.log.fn('forceReloadData', { missingData });\r\n    this.dataSource().addToRefresh(missingData);\r\n    l.end();\r\n  }\r\n\r\n  // Note: 2dm 2023-01-24 added entityId as parameter #maybeRemoveGuidOnEditEntity\r\n  // not even sure if the guid would still be needed, as I assume the entityId\r\n  // should always be available.\r\n  // Must test all use cases and then probably simplify again.\r\n  editItem(editParams: { entityGuid: string, entityId: number }, entityType: string): void {\r\n    const l = this.log.fnIf('editItem', { editParams });\r\n    const editGuid = editParams?.entityGuid;\r\n    const formParams = this.#urlToObject(editGuid == null ? this.#createParams.result() : this.#editParams.result());\r\n    const form: EditForm = {\r\n      items: [\r\n        {\r\n          ...(editGuid == null)\r\n            ? EditPrep.newFromType(entityType ?? this.contentType(), this.#urlToObject(this.#prefill.result()))\r\n            : EditPrep.editId(this.optionsOrHints().find(item => item.value === editGuid)?.id ?? editParams.entityId),\r\n          ...( formParams ? { ClientData: { parameters: formParams } } : {} ),\r\n        },\r\n      ],\r\n    };\r\n    l.a('form', { form });\r\n    const config = this.fieldState.config;\r\n\r\n    // Open the form\r\n    this.#editRoutingService.open(config.index, config.entityGuid, form);\r\n\r\n    // Monitor for close to reload data\r\n    this.#editRoutingService.childFormClosed()\r\n      .pipe(take(1))\r\n      .subscribe(data => {\r\n        const l2 = this.log.fn('childFormClosed', { editGuid, data });\r\n        if (editGuid) {\r\n          this.forceReloadData([editGuid]);\r\n          return l2.end('forceReloadData', { editGuid });\r\n        }\r\n        l2.end(\"no guid, won't reload data\");\r\n      })\r\n    l.end();\r\n  }\r\n\r\n  deleteItem(props: DeleteEntityProps): void {\r\n    this.log.a('deleteItem', { props });\r\n    const entity = this.optionsOrHints().find(item => item.value === props.entityGuid);\r\n    const id = entity.id;\r\n    const title = entity.label;\r\n    const contentType = this.contentType();\r\n    const config = this.fieldState.config;\r\n    const parentId = config.entityId;\r\n    const parentField = config.fieldName;\r\n\r\n    const confirmed = confirm(this.translate.instant('Data.Delete.Question', { title, id }));\r\n    if (!confirmed) return;\r\n\r\n    this.#snackBar.open(this.translate.instant('Message.Deleting'));\r\n    this.#entityService.delete(this.formConfig.config.appId, contentType, id, false, parentId, parentField).subscribe({\r\n      next: () => {\r\n        this.#snackBar.open(this.translate.instant('Message.Deleted'), null, { duration: 2000 });\r\n        this.deleteCallback(props); // removes value from selected values\r\n        this.#deletedItemsGuids.update(p => [...p, props.entityGuid]);\r\n      },\r\n      error: (_: HttpErrorResponse) => {\r\n        this.#snackBar.dismiss();\r\n        if (!confirm(this.translate.instant('Data.Delete.Question', { title, id }))) return;\r\n        this.#snackBar.open(this.translate.instant('Message.Deleting'));\r\n        this.#entityService.delete(this.formConfig.config.appId, contentType, id, true, parentId, parentField).subscribe({\r\n          next: () => {\r\n            this.#snackBar.open(this.translate.instant('Message.Deleted'), null, { duration: 2000 });\r\n            this.deleteCallback(props); // removes value from selected values\r\n            this.#deletedItemsGuids.update(p => [...p, props.entityGuid]);\r\n          },\r\n          error: (_: HttpErrorResponse) => {\r\n            this.#snackBar.open(this.translate.instant('Message.DeleteError'), null, { duration: 2000 });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Will create a prefill object (if configured) which is based on a field-mask.\r\n   * This allows create-entity to use add prefills.\r\n   * ATM just normal values (text/number) or placeholders like [Title] work.\r\n   * In future we may add more features like dates etc.\r\n   * new 11.11.03\r\n   */\r\n  // #prefill = transient(FieldMask).initSignal('Prefill', this.fieldState.settingExt<FieldSettingsWithPickerSource, 'CreatePrefill'>('CreatePrefill'));\r\n  #prefill = transient(FieldMask).initSignal('Prefill', this.fieldState.settingExt('CreatePrefill'));\r\n  #createParams = transient(FieldMask).initSignal('CreateParams', this.fieldState.settingExt('CreateParameters'));\r\n  #editParams = transient(FieldMask).initSignal('CreateParams', this.fieldState.settingExt('EditParameters'));\r\n\r\n  // #getPrefillSetting() {\r\n  //   const maybe = this.fieldState.settingExt('CreatePrefill');\r\n  //   if (maybe()) return maybe;\r\n  //   return this.fieldState.settingExt('Prefill');\r\n  // }\r\n\r\n\r\n  #urlToObject(prefill: string) {\r\n    const l = this.log.fnIf('getPrefill', { prefill});\r\n    if (!prefill || !prefill.trim())\r\n      return l.r(null, 'empty');\r\n\r\n    // note: 2024-10-03 old code split for '\\n' but I had to add '&'\r\n    // not sure if the \\n is even relevant, so for now I'll remove it\r\n    const result = Object.fromEntries(\r\n      prefill.split('&')\r\n        .map(line => line.split('='))\r\n        .filter(parts => parts.length === 2 && parts[0] && parts[1])\r\n      ) as Record<string, string>;\r\n    \r\n    return l.r(result);\r\n    \r\n  }\r\n}\r\n\r\nexport interface LogSpecsDataAdapterEntityBase {\r\n  all: boolean;\r\n  connectState: boolean;\r\n}\r\n","/**\r\n * Picker features of a single item.\r\n */\r\nexport interface PickerFeaturesItem {\r\n  /** Item level: provide the edit button */\r\n  edit: boolean;\r\n  /** Item level: provide the remove button */\r\n  remove: boolean;\r\n  /** Item level: provide the delete button */\r\n  delete: boolean;\r\n}\r\n\r\n/**\r\n * Picker Features allow a source, state or control to determine what features are available for a picker.\r\n *\r\n * The idea is that by default, these things should be truish, and then the source, state or control can\r\n * declare that it's not allowed.\r\n *\r\n * In the end the features should be merged into one object, and the picker should be able to determine\r\n * what buttons etc. to show.\r\n */\r\nexport interface PickerFeatures extends PickerFeaturesItem {\r\n  /** Control level: provide the create button */\r\n  create: boolean;\r\n  /** Control level: provide the text entry */\r\n  textEntry: boolean;\r\n  /** Control level: provide the multi-value picker */\r\n  multiValue: boolean;\r\n}\r\n\r\nexport interface PickerFeaturesForControl extends PickerFeatures {\r\n  /**\r\n   * Determines if the control should also show the \"Go to List\" button.\r\n   * This depends on multi-select and in future also on the sortability of the list.\r\n   */\r\n  showGoToListDialogButton: boolean;\r\n\r\n  /**\r\n   * Determines if the control should also show the \"Add New\" button.\r\n   * This depends on the setting to create new items + the availability of the create-names.\r\n   */\r\n  showAddNewButton: boolean;\r\n}\r\n\r\nfunction fill(data: Partial<PickerFeatures>, fallback: boolean): PickerFeatures {\r\n  return {\r\n    create: data.create ?? fallback,\r\n    textEntry: data.textEntry ?? fallback,\r\n    multiValue: data.multiValue ?? fallback,\r\n\r\n    edit: data.edit ?? fallback,\r\n    remove: data.remove ?? fallback,\r\n    delete: data.delete ?? fallback,\r\n  };\r\n}\r\n\r\nexport function mergePickerFeatures(first: Partial<PickerFeatures>, second: Partial<PickerFeatures>): PickerFeatures {\r\n  first = fill(first, true);\r\n  second = fill(second, true);\r\n  return {\r\n    create: first.create && second.create,\r\n    textEntry: first.textEntry && second.textEntry,\r\n    multiValue: first.multiValue && second.multiValue,\r\n\r\n    edit: first.edit && second.edit,\r\n    remove: first.remove && second.remove,\r\n    delete: first.delete && second.delete,\r\n  };\r\n}","import groupBy from 'lodash-es/groupBy';\r\nimport { guidRegex } from '../../../shared/constants/guid.constants';\r\nimport { PickerItem } from './models/picker-item.model';\r\n\r\nexport function pickerItemsAllowsEmpty(dropdownOptions?: PickerItem[]): boolean {\r\n  return dropdownOptions?.some(o => o.value == '');\r\n}\r\n\r\n/** Convert string value in string array if a value is type string */\r\nexport function convertValueToArray(value: string | string[], separator: string, emptyIsValid: boolean): string[] {\r\n  // Special case: String-picker old with \"empty\" being selected\r\n  // In most dropdowns, empty would mean not-selected, but in string-dropdowns, it _can_ be a valid value\r\n  // So we must check if there is an empty value in the dropdown options\r\n  // And if this is true, return an array with an empty string being \"selected\"\r\n  if (value == '' && emptyIsValid)\r\n    return [''];\r\n\r\n  if (value == '' || !value)\r\n    return [];\r\n\r\n  return (Array.isArray(value))\r\n    ? value\r\n    : value.split(separator);\r\n}\r\n\r\n/** Convert string array value in string value if a value is type array */\r\nexport function convertArrayToString(value: string | string[], separator: string): string {\r\n  if (!value)\r\n    return '';\r\n  if (Array.isArray(value))\r\n    return value.join(separator);\r\n  return value;\r\n}\r\n\r\nexport function filterGuids(entityName: string, fieldName: string, guids: string[]): string[] {\r\n  if (guids == null) return;\r\n\r\n  const grouped = groupBy(guids, guid => guidRegex().test(guid) ? 'valid' : 'invalid');\r\n\r\n  // const validGuids: string[] = [];\r\n  // const invalidGuids: string[] = [];\r\n  // for (const guid of guids) {\r\n  //   if (guidRegex().test(guid)) {\r\n  //     validGuids.push(guid);\r\n  //   } else {\r\n  //     invalidGuids.push(guid);\r\n  //   }\r\n  // }\r\n\r\n  if (grouped.invalid) // invalidGuids.length > 0)\r\n    console.error(`Found invalid guids in Entity: \"${entityName}\", Field: \"${fieldName}\"`, grouped.invalid); // invalidGuids);\r\n\r\n  return grouped.valid ?? []; // validGuids;\r\n}\r\n","import { effect, inject, Injectable, Signal } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { getWith } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { DataAdapterBase } from './adapters/data-adapter-base';\r\nimport { DataAdapterCanRefresh } from './adapters/data-adapter-can-refresh';\r\nimport { DataAdapterEntityBase } from './adapters/data-adapter-entity-base';\r\nimport { StateAdapter } from \"./adapters/state-adapter\";\r\nimport { PickerItem } from './models/picker-item.model';\r\nimport { mergePickerFeatures, PickerFeatures, PickerFeaturesForControl } from './picker-features.model';\r\nimport { pickerItemsAllowsEmpty } from './picker.helpers';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  setup: false,\r\n  addInfosFromSourceForUi: false,\r\n  optionsWithMissing: false,\r\n  selectedRaw: false,\r\n  selectedOverride: false,\r\n  selectedState: false,\r\n  features: false,\r\n  allOptions: true,\r\n  fields: [...DebugFields, '*'],\r\n}\r\n\r\n/**\r\n * Manages the data for the picker component.\r\n * This is quite complex, because there are many combinations of where the configuration and data can come from,\r\n * as well as how the resulting values should be processed.\r\n */\r\n@Injectable()\r\nexport class PickerData {\r\n\r\n  //#region Constructor, Log, Services, Setup\r\n  \r\n  log = classLog({PickerData}, logSpecs);\r\n\r\n  #translate = inject(TranslateService);\r\n\r\n  name: string;\r\n\r\n  constructor() {\r\n    // Log the options when they change (if enabled)\r\n    if (this.log.enabled && this.log.specs.allOptions) {\r\n      effect(() => {\r\n        const ready = this.ready();\r\n        const raw = this.optionsRaw();\r\n        const override = this.optionsOverride();\r\n        const final = this.optionsAll();\r\n        this.log.a('options', { ready, raw, override, final });\r\n      });\r\n    }\r\n  }\r\n\r\n  /** Setup to load initial values and initialize the state */\r\n  public setup(name: string, settings: Signal<FieldSettings>, state: StateAdapter, source: DataAdapterBase) {\r\n    const l = this.log.fnIfInList('setup', 'fields', name, { name, state, source });\r\n\r\n    // Setup this object\r\n    this.name = name;\r\n    this.#settingsLazy.set(settings as Signal<FieldSettings & FieldSettingsPickerMerged>);\r\n    this.state = state;\r\n    this.source = source;\r\n\r\n    // Setup the State so it is able to do it's work based on data it wouldn't have otherwise\r\n    state.features = this.features;\r\n    state.allowsEmptyLazy.set(this.optionsAllowsEmpty);\r\n\r\n    // 1. Init Prefetch - for Entity Picker\r\n    // This will place the prefetch items into the available-items list\r\n    // Otherwise related entities would only show as GUIDs.\r\n    const values = state.values();\r\n    l.a('setup', { initiallySelected: values });\r\n    (source as DataAdapterBase & DataAdapterCanRefresh)?.initPrefetch?.(values);\r\n\r\n    // When everything is done, mark as ready\r\n    this.ready.set(true);\r\n\r\n    l.end('done');\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Adapters\r\n\r\n  /**\r\n   * The data for the list / options to show.\r\n   * Populated at Setup.\r\n   */\r\n  public source: DataAdapterBase;\r\n\r\n  /**\r\n   * The state containing the currently selected data in the correct object structure\r\n   * Populated at Setup.\r\n  */\r\n  public state: StateAdapter;\r\n\r\n  //#endregion\r\n\r\n  public closeWatcherAttachedWIP = false;\r\n\r\n  //#region Possible Options to provide\r\n\r\n  /**\r\n   * Inform the system that the sources are ready.\r\n   * WIP experimenting with making it public, so that formulas can delay running dependant function.\r\n   */\r\n  public ready = signalObj('sourceIsReady', false);\r\n\r\n  /** Options to show in the picker. Can also show hints if something is wrong. Must be initialized at setup */\r\n  public optionsRaw = computedObj('optionsSource', () => (this.ready() ? this.source.optionsOrHints() : null) ?? []);\r\n  \r\n  /** Overrides / replacements from formulas */\r\n  public optionsOverride = signalObj<PickerItem[]>('overrideOptions', null);\r\n\r\n  /** Final Options to show in the picker and to use to calculate labels of selected etc. */\r\n  public optionsAll = computedObj('optionsFinal', () => getWith(this.optionsOverride(), o => o ? o : this.optionsRaw()));\r\n\r\n  /** Special information for string pickers which allow empty to be valid selection - also used in validator */\r\n  public optionsAllowsEmpty = computedObj('optionsAllowsEmpty', () => pickerItemsAllowsEmpty(this.optionsAll()));\r\n\r\n  //#endregion\r\n\r\n  //#region Selected Data\r\n\r\n  /** Currently selected items. Must watch for ready. */\r\n  public selectedRaw = computedObj<PickerItem[]>('selectedState', () => {\r\n    const l = this.log.fnIfInList('selectedRaw', 'fields', this.name);\r\n    return !this.ready()\r\n      ? l.r([], 'not ready')\r\n      : l.r(this.#toSelectedWithUiInfo(this.state.selectedItems(), this.optionsAll()), 'ready');\r\n  });\r\n\r\n  /** Overrides / replacements from formulas */\r\n  public selectedOverride = signalObj<PickerItem[]>('selectedOverride', null);\r\n\r\n  /** Currently selected items from override or raw */\r\n  public selectedAll = computedObj('selectedAll', () => getWith(this.selectedOverride(), o => o ? o : this.selectedRaw()));\r\n\r\n  /** First selected item or null */\r\n  public selectedOne = computedObj('selectedOne', () => this.selectedAll()[0] ?? null);\r\n\r\n  /** Create a copy of the selected items, so that any changes (in formulas) won't affect the real selected data */\r\n  public selectedCopy(original: PickerItem[]): PickerItem[] {\r\n    return original.map(item => ({ ...item }));\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Options containing missing selected\r\n\r\n  public optionsWithMissing = computedObj('optionsWithMissing', () => {\r\n    const l = this.log.fnIf('optionsWithMissing');\r\n    const selected = this.selectedAll();\r\n    const options = this.optionsAll();\r\n    const missing = selected.filter(s => !options.find(o => o.value === s.value));\r\n    if (missing.length === 0) return options;\r\n\r\n    const result = options.concat(missing);\r\n    return l.r(result);\r\n  });\r\n\r\n  //#endregion\r\n\r\n  #settingsLazy = signalObj<Signal<FieldSettings & FieldSettingsPickerMerged>>('settingsLazy', null);\r\n\r\n  #featuresFromSettings = computedObj('featuresFromSettings', () => {\r\n    const s = this.#settingsLazy()();\r\n    return {\r\n      textEntry: s.EnableTextEntry,\r\n      multiValue: s.AllowMultiValue,\r\n      create: s.EnableCreate && !!s.CreateTypes,\r\n      remove: s.EnableRemove,\r\n      delete: s.EnableDelete,\r\n    } satisfies Partial<PickerFeatures>;\r\n  });\r\n\r\n  /** Signal containing the features of the picker, basically to accumulate features such as \"canEdit\" */\r\n  public features = computedObj<PickerFeaturesForControl>('features', () => {\r\n    const mergeSourceAndState = mergePickerFeatures(this.source.myFeatures(), this.state.myFeatures());\r\n    const mergeSettings = mergePickerFeatures(mergeSourceAndState, this.#featuresFromSettings());\r\n    const forControl = {\r\n      ...mergeSettings,\r\n      showGoToListDialogButton: mergeSettings.multiValue,\r\n      showAddNewButton: mergeSettings.create,\r\n    } satisfies PickerFeaturesForControl;\r\n    return forControl;\r\n  });\r\n\r\n  public addNewlyCreatedItem(result: Record<string, number>) {\r\n    const newItemGuid = Object.keys(result)[0];\r\n    const l = this.log.fn('addNewlyCreatedItem', { result, newItemGuid });\r\n    if (!this.state.values().includes(newItemGuid)) {\r\n      this.state.add(newItemGuid);\r\n      (this.source as DataAdapterBase & DataAdapterCanRefresh)?.forceReloadData?.([newItemGuid]);\r\n    }\r\n    l.end();\r\n  }\r\n\r\n  #toSelectedWithUiInfo(selected: string[], opts: PickerItem[]): PickerItem[] {\r\n    const l = this.log.fnIfInList('addInfosFromSourceForUi', 'fields', this.name, { selected, opts });\r\n\r\n    const result = selected.map(item => {\r\n      // If the selected item is not in the data, show the raw / original item\r\n      const original = opts.find(e => e.value === item);\r\n\r\n      return original\r\n        // Since we seem to have more information from the source, use that\r\n        ? createPickerItemFromItem(original, original.label ?? this.#translate.instant('Fields.Picker.EntityNotFound'))\r\n        // If it's not in the data, just show the value\r\n        : this.#createPickerItemFromValue(item);\r\n    });\r\n    return l.r(result);\r\n  }\r\n\r\n  //#region Text Mode\r\n\r\n  public isInFreeTextMode = signalObj('isInFreeTextMode', false);\r\n\r\n  toggleFreeTextMode(): void {\r\n    this.isInFreeTextMode.update(p => !p);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  #createPickerItemFromValue(value: string): PickerItem {\r\n    value = value?.toString() ?? '';  // safe to-string, so it's never 'undefined'\r\n\r\n    const validDataExpected = this.source instanceof DataAdapterEntityBase;\r\n\r\n    return {\r\n      // Special: if e.g. string with free text value which is not found, disable edit and delete.\r\n      // Otherwise we may see an edit-pencil for a value that is not in the dropdown (eg. a system query)\r\n      noEdit: true,\r\n      noDelete: true,\r\n      // either the real value or null if text-field or not found\r\n      id: null,\r\n      label: value + (validDataExpected ? ' ': ''),\r\n      tooltip: value + (validDataExpected ? `  ${this.#translate.instant('Fields.Picker.EntityNotFound')} - could result in error` : ' (manual entry)'),\r\n      value,\r\n    } satisfies PickerItem;\r\n  }\r\n}\r\n\r\n//#region Helper Functions for PickerItem\r\n\r\n\r\n\r\nfunction createPickerItemFromItem(original: PickerItem, label: string) {\r\n  return {\r\n    id: original.id,\r\n    value: original.value,\r\n    label,\r\n    tooltip: original.tooltip || `${label} (${original.value})`,\r\n    info: original.info || null,\r\n    link: original.link || null,\r\n    noEdit: original.noEdit === true,\r\n    noDelete: original.noDelete === true,\r\n    noSelect: false,\r\n  } satisfies PickerItem;\r\n}\r\n\r\n//#endregion","import { Injectable, Injector } from '@angular/core';\r\nimport { transient } from '../../../../../../core';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { InputTypeService } from '../../shared/input-types/input-type.service';\r\nimport { EavContentTypeAttribute } from '../../shared/models/eav';\r\nimport { PickerData } from './picker-data';\r\n\r\n/**\r\n * Factory for **creating** PickerData instances.\r\n * It will not set them up yet, because for that it needs the FieldState\r\n * which is not available at this time.\r\n */\r\n@Injectable()\r\nexport class PickerDataFactory {\r\n\r\n  log = classLog({PickerDataFactory});\r\n\r\n  constructor(private injector: Injector, private inputTypeSvc: InputTypeService) { }\r\n\r\n  createPickersForAttributes(attributes: EavContentTypeAttribute[]): Record<string, PickerData> {\r\n    const fields = attributes.map(a => ({ name: a.Name, inputType: this.inputTypeSvc.getSpecs(a)}));\r\n    return this.#createPickersData(fields);\r\n  }\r\n\r\n\r\n  #createPickersData(fields: { name: string, inputType: InputTypeSpecs}[]): Record<string, PickerData> {\r\n    const array = fields\r\n      .map(it => ({ name: it.name, picker: this.#createOne(it.inputType)}))\r\n      .filter(it => it.picker !== null);\r\n\r\n    return array.reduce((acc, it) => {\r\n      acc[it.name] = it.picker;\r\n      return acc;\r\n    }, {} as Record<string, PickerData>);\r\n  }\r\n\r\n  #createOne(inputType: InputTypeSpecs): PickerData {\r\n    return (InputTypeHelpers.isAnyPicker(inputType.inputType))\r\n      ? transient(PickerData, this.injector)\r\n      : null;\r\n  }\r\n};\r\n","import { CreateComputedOptions } from '@angular/core';\r\nimport { RxHelpers } from '../rxJs/rx.helpers';\r\nimport isEqual from 'lodash-es/isEqual';\r\n\r\nexport class SignalEquals {\r\n  /** Options for number signal to ensure equality only on value difference */\r\n  static bool: CreateComputedOptions<boolean> = {\r\n    equal: RxHelpers.valueEquals<boolean>\r\n  };\r\n\r\n  /** Options for string signal to ensure equality only on value difference */\r\n  static number: CreateComputedOptions<number> = {\r\n    equal: RxHelpers.valueEquals<number>\r\n  };\r\n\r\n  /** Options for string signal to ensure equality only on value difference */\r\n  static string: CreateComputedOptions<string> = {\r\n    equal: RxHelpers.valueEquals<string>\r\n  };\r\n\r\n  // note: this doesn't work as expected; leaving in so nobody tries to repeat this\r\n  // /** Options for string signal to ensure equality only on value difference */\r\n  // static valueEquals: CreateComputedOptions<boolean | string | number> = {\r\n  //   equal: RxHelpers.valueEquals<boolean | string | number>\r\n  // };\r\n\r\n  /**\r\n   * Helper to _not_ set the equal and use the standard equal.\r\n   * This is just to ensure that the code can explicitly show that RefEquals was expected,\r\n   * and not an oversight.\r\n   */\r\n  static ref = {  };\r\n}\r\n","import { Injectable, Signal, signal } from '@angular/core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { SignalEquals } from '../../shared/signals/signal-equals';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { LanguageService } from '../localization/language.service';\r\nimport { ItemService } from '../state/item.service';\r\nimport { FormConfigService } from './form-config.service';\r\n\r\n/**\r\n * Service to manage the state of forms.\r\n * Mainly to determine if valid, read-only etc.\r\n */\r\n@Injectable()\r\nexport class FormsStateService {\r\n\r\n  log = classLog({FormsStateService});\r\n\r\n  /** Signal which is filled by sub-dialogs to trigger save (other saves like ctrl+s don't go through this) */\r\n  public triggerTrySaveAndMaybeClose = signal({ tryToSave: false, close: false }, SignalEquals.ref);\r\n  public formsAreValid = signal(false);\r\n  public formsAreDirty = signal(false);\r\n\r\n  #formsValid: Record<string, boolean> = {};\r\n  #formsDirty: Record<string, boolean> = {};\r\n\r\n  readOnly: Signal<FormReadOnly> = (() => {\r\n    const itemHeaders = signal(this.formConfig.config.itemGuids\r\n      .map(guid => this.itemService.getItemHeaderSignal(guid))\r\n    );\r\n    const language = this.languageService.getAllSignal();\r\n\r\n    const readOnly = computedObj('readOnly', () => {\r\n      const itemsReadOnly = itemHeaders().some(itemHeader => itemHeader().EditInfo?.ReadOnly ?? false);\r\n      const languageAllowed = language().find(l => l.NameId === this.formConfig.language().current)?.IsAllowed ?? true;\r\n      const isReadOnly = itemsReadOnly || !languageAllowed;\r\n      const reason = itemsReadOnly ? 'Form' : !languageAllowed ? 'Language' : undefined;\r\n\r\n      return {\r\n        isReadOnly,\r\n        reason,\r\n      } satisfies FormReadOnly;\r\n    });\r\n    return readOnly;\r\n  })();\r\n\r\n  // readOnly: Signal<FormReadOnly>;\r\n  formsValidTemp = signal<boolean>(false);\r\n  saveButtonDisabled = computedObj('saveButtonDisabled', () => this.readOnly().isReadOnly || !this.formsValidTemp());\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private languageService: LanguageService,\r\n  ) {\r\n    // Reset initial dirty/valid states\r\n    for (const entityGuid of this.formConfig.config.itemGuids) {\r\n      this.#formsValid[entityGuid] = false;\r\n      this.#formsDirty[entityGuid] = false;\r\n    }\r\n  }\r\n\r\n  getFormValid(entityGuid: string) {\r\n    return this.#formsValid[entityGuid];\r\n  }\r\n\r\n  setFormValid(entityGuid: string, isValid: boolean) {\r\n    this.#formsValid[entityGuid] = isValid;\r\n\r\n    const allValid = !Object.values(this.#formsValid).some(valid => valid === false);\r\n    if (allValid !== this.formsValidTemp()) {\r\n      this.formsValidTemp.set(allValid);\r\n      this.formsAreValid.set(allValid);\r\n    }\r\n  }\r\n\r\n  setFormDirty(entityGuid: string, isDirty: boolean) {\r\n    this.#formsDirty[entityGuid] = isDirty;\r\n\r\n    const anyDirty = Object.values(this.#formsDirty).some(dirty => dirty === true);\r\n    if (anyDirty !== this.formsAreDirty())\r\n      this.formsAreDirty.set(anyDirty);\r\n  }\r\n\r\n  triggerSave(close: boolean) {\r\n    this.triggerTrySaveAndMaybeClose.set({ tryToSave: true, close });\r\n  }\r\n\r\n}\r\n\r\n\r\ninterface FormReadOnly {\r\n  isReadOnly: boolean;\r\n  reason: undefined | 'Form' | 'Language';\r\n}\r\n","import { inject, Injectable } from '@angular/core';\r\nimport { FeaturesService } from '../../features/features.service';\r\nimport { ItemIdentifierShared } from '../../shared/models/edit-form.model';\r\nimport { GlobalConfigService } from '../../shared/services/global-config.service';\r\nimport { EditInitializerService } from '../form/edit-initializer.service';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { LanguageService } from '../localization/language.service';\r\nimport { FieldsSettingsService } from '../state/fields-settings.service';\r\nimport { ItemService } from '../state/item.service';\r\nimport { FormulaPropsParameters } from './formula-run-one-helpers.factory';\r\nimport { FormulaExecutionSpecs } from './run/formula-objects-internal-data';\r\n\r\n/**\r\n * Factory for creating FormulaExecutionSpecs objects.\r\n * These are parameters needed to run formulas, which are reused quite a few times.\r\n */\r\n@Injectable()\r\nexport class FormulaExecutionSpecsFactory {\r\n\r\n  #features = inject(FeaturesService).getAll();\r\n  \r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private languageSvc: LanguageService,\r\n    private globalConfigSvc: GlobalConfigService,\r\n    private editInitializerSvc: EditInitializerService,\r\n  ) { }\r\n\r\n  init(settingsSvc: FieldsSettingsService, entityGuid: string, clientData: Pick<ItemIdentifierShared, \"ClientData\">) {\r\n    this.#entityGuid = entityGuid;\r\n    this.#settingsSvc = settingsSvc;\r\n    this.#clientData = clientData;\r\n  }\r\n\r\n  // properties to set on init\r\n  #entityGuid: string;\r\n  #settingsSvc: FieldsSettingsService;\r\n  #clientData: Pick<ItemIdentifierShared, \"ClientData\">;\r\n  \r\n  #warningsObsolete: Record<string, boolean> = {};\r\n\r\n  /**\r\n   * Get all objects which are needed for the data and context and are reused quite a few times.\r\n   * Can be reused for a short time, as the data doesn't change in a normal cycle,\r\n   * but it will need to be regenerated after things such as language or feature change.\r\n   */\r\n  getSharedSpecs(): FormulaExecutionSpecs {\r\n    const language = this.formConfig.language();\r\n    const languages = this.languageSvc.getAll();\r\n    const debugEnabled = this.globalConfigSvc.isDebug();\r\n    const initialFormValues = this.editInitializerSvc.getInitialValues(this.#entityGuid, language.current);\r\n\r\n    return {\r\n      initialFormValues,\r\n      language,\r\n      languages,\r\n      debugEnabled,\r\n      itemService: this.itemService,\r\n      formConfig: this.formConfig,\r\n      fieldsSettingsSvc: this.#settingsSvc,\r\n      features: this.#features,\r\n      parameters: new FormulaPropsParameters(this.#clientData.ClientData?.parameters ?? {}),\r\n      warningsObsolete: this.#warningsObsolete,\r\n    } satisfies FormulaExecutionSpecs;\r\n  }\r\n}","import { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { InputTypeMetadata } from '../../shared/fields/input-type-metadata.model';\r\nimport { FieldLogicBase } from '../fields/logic/field-logic-base';\r\nimport { PickerItem } from '../fields/picker/models/picker-item.model';\r\nimport { PickerData } from '../fields/picker/picker-data';\r\nimport { FormulaFieldValidation } from '../formulas/targets/formula-targets';\r\nimport { TranslationState } from '../localization/translate-state.model';\r\nimport { InputTypeSpecs } from '../shared/input-types/input-type-specs.model';\r\n\r\n/**\r\n * Field properties of a picker.\r\n * Implemented as a class, so we can use new FieldPropsPicker();\r\n * and reliably get undefined values (not null) to spread objects.\r\n */\r\nexport class FieldPropsPicker {\r\n  list: PickerItem[];\r\n  ver: number | undefined;\r\n}\r\n\r\nexport interface FieldProps {\r\n  /** The language which applied to these field props as added to cache */\r\n  language: string;\r\n  constants: FieldConstants;\r\n  settings: FieldSettings;\r\n  translationState: TranslationState;\r\n\r\n  /** INITIAL Value of this field - eg. at form-load or language change. */\r\n  value: FieldValue;\r\n  buildWrappers: string[];\r\n  formulaValidation: FormulaFieldValidation;\r\n\r\n  opts: FieldPropsPicker;\r\n  sel: FieldPropsPicker;\r\n}\r\n\r\n/** Field Config information which never changes through the entire lifetime in the UI */\r\nexport interface FieldConstants {\r\n  /** The GUID it belongs to - must always be provided */\r\n  entityGuid: string;\r\n\r\n  /** The EntityId is used in field masks (for placeholders and for certain delete operations) */\r\n  entityId: number;\r\n  contentTypeNameId: string;\r\n\r\n  /** The field name - always required */\r\n  fieldName: string;\r\n  index: number;\r\n\r\n  dropzonePreviewsClass?: string;\r\n  initialDisabled?: boolean;\r\n  inputTypeSpecs: InputTypeSpecs;\r\n  isLastInGroup?: boolean;\r\n  type: string;\r\n  logic?: FieldLogicBase,\r\n\r\n  pickerData: () => PickerData | null;\r\n}\r\n\r\n/** Extended field config information which is constant as long as the language doesn't change. */\r\nexport interface FieldConstantsOfLanguage extends FieldConstants {\r\n  /** The language used for the current \"constants\" */\r\n  language: string,\r\n\r\n  /** The initial field settings in this language */\r\n  settingsInitial: FieldSettings,\r\n\r\n  /** The input type configuration of this language */\r\n  inputTypeConfiguration: InputTypeMetadata,\r\n}\r\n\r\n\r\n\r\n","import { classLog, FnLogger } from '../../shared/logging';\r\nimport { getVersion } from '../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldConstantsOfLanguage, FieldProps } from '../state/fields-configs.model';\r\nimport { FormulaCacheItem } from './cache/formula-cache.model';\r\nimport { FieldFormulasResultPartialSettings, FieldFormulasResultRaw } from './results/formula-results.models';\r\nimport { FormulaRunPicker, FormulaRunPickers } from './run/formula-objects-internal-data';\r\nimport { FormulaSpecialPickerAutoSleep, FormulaSpecialPickerTargets } from './targets/formula-targets';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getPickerInfos: false,\r\n  filterFormulasIfPickerNotReady: true,\r\n  fields: [...DebugFields],\r\n}\r\n\r\nexport class FormulaFieldPickerHelper {\r\n  \r\n  log = classLog({FormulaFieldPickerHelper}, logSpecs);\r\n\r\n  constructor(private fieldName: string, private fieldConstants: FieldConstantsOfLanguage, private propsBefore: FieldProps) {\r\n    this.isSpecialPicker = fieldConstants.inputTypeSpecs.isNewPicker\r\n  }\r\n\r\n  isSpecialPicker: boolean;\r\n\r\n  get infos() { return this.#infos ??= this.#getInfos(this.fieldName, this.fieldConstants, this.propsBefore); }\r\n  #infos: FormulaRunPickers;\r\n\r\n  //#endregion Prepare / Get Picker Infos / Select live formulas\r\n\r\n  /**\r\n   * Filter out formulas which should not run yet, for these reasons:\r\n   * 1. picker is not ready\r\n   * 2. picker is ready but nothing has changed, and \"sleep\" determines that in this case it shouldn't run.\r\n   */\r\n  public filterFormulasIfPickerNotReady(before: FormulaCacheItem[]) {\r\n    const l = this.log.fnIfInList('filterFormulasIfPickerNotReady', 'fields', this.fieldName, { before });\r\n    const picks = this.infos;\r\n\r\n    const ready = this.isSpecialPicker && !picks.ready\r\n      ? before.filter(f => !f.fieldIsSpecialPicker)\r\n      : before; \r\n      \r\n    // Figure out which picker-formulas must sleep\r\n    const formulas = ready.filter(f => !f.fieldIsSpecialPicker || (this.isSpecialPicker && !f.sleep || picks.changed));\r\n\r\n    const msg = ` before: ${before.length}; ready: ${ready.length}; formulas:${formulas.length}; pickerChanged: ${picks.changed}; opts: ${picks.options.changed}/${picks.options.ver}; sel: ${picks.selected.changed}/${picks.selected.ver}`;\r\n    return l.rSilent(formulas, msg);\r\n  }\r\n\r\n  #getInfos(fieldName: string, fieldConstants: FieldConstantsOfLanguage, propsBefore: FieldProps): FormulaRunPickers {\r\n    const l = this.log.fnIfInList('getPickerInfos', 'fields', fieldName);\r\n    // Get the latest picker data and check if it has changed - as it affects which formulas to run\r\n    const picker = fieldConstants.pickerData();\r\n    if (picker?.ready() != true) {\r\n      const dummy = { list: [], listRaw: [], ver: null, verBefore: null, changed: false, } as FormulaRunPicker;\r\n      return { ready: false, mapper: null, picker, options: dummy, selected: dummy, changed: false, };\r\n    }\r\n\r\n    function getSpecs(cache: typeof picker.optionsRaw, final: typeof picker.optionsRaw, verBefore: number): FormulaRunPicker {\r\n      const listRaw = cache(); // must access before version check\r\n      const ver = getVersion(cache);\r\n      return { list: final(), listRaw, ver, verBefore, changed: ver !== verBefore, } satisfies FormulaRunPicker;\r\n    }\r\n    const options = getSpecs(picker.optionsRaw, picker.optionsAll, propsBefore.opts?.ver);\r\n    const selected = getSpecs(picker.selectedRaw, picker.selectedAll, propsBefore.sel?.ver);\r\n\r\n    const result: FormulaRunPickers = {\r\n      ready: true,\r\n      mapper: picker.state.mapper,\r\n      picker,\r\n      options,\r\n      selected,\r\n      changed: selected.changed || options.changed,\r\n    };\r\n    return l.r(result);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Update Field Props\r\n\r\n  /**\r\n   * Pause depends on explicit result\r\n   */\r\n  public updateFormulaSleep(formula: FormulaCacheItem, raw: FieldFormulasResultRaw, l: FnLogger): void {\r\n    formula.sleep = raw.sleep ?? (FormulaSpecialPickerAutoSleep.includes(formula.target) ? true : formula.sleep);\r\n    l.a(`formula.sleep: ${formula.target}; formula.sleep: ${formula.sleep}; raw.sleep: ${raw.sleep}`);\r\n  }\r\n\r\n  /**\r\n   * Transfer options with version if result contains anything like that.\r\n   */\r\n  public preserveResultsAfterRun(formula: FormulaCacheItem, wip: FieldFormulasResultPartialSettings, raw: FieldFormulasResultRaw, l: FnLogger): FieldFormulasResultPartialSettings {\r\n\r\n    // picker data results - experimental v18\r\n    if (raw.options) {\r\n      wip.options = { list: raw.options, ver: this.infos.options.ver };\r\n      l.a(` options returned, will add`, wip.options as unknown as Record<string, unknown>);\r\n    }\r\n\r\n    if (raw.selected) {\r\n      wip.selected = { list: raw.selected, ver: this.infos.selected.ver };\r\n      l.a(` selected returned, will add`, wip.selected as unknown as Record<string, unknown>);\r\n    }\r\n\r\n    return wip;\r\n  }\r\n\r\n  //#endregion\r\n\r\n}","import { SettingsFormulaPrefix } from '../targets/formula-targets';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport isEqual from 'lodash-es/isEqual';\r\n\r\n/**\r\n * Contains methods for updating settings from formulas.\r\n */\r\nexport class FormulaSettingsHelper {\r\n\r\n  /**\r\n   * Possibly updates setting with formula result if target and type matches.\r\n   * @param target Formula target\r\n   * @param settings Last/Current settings\r\n   * @param valueNew Formula result needed for type checking\r\n   * @param settingsNew Settings that are possibly updated\r\n   * @returns True if setting is updated, false if it is not\r\n   */\r\n  static keepSettingIfTypeOk(\r\n    target: string,\r\n    settings: FieldSettings,\r\n    valueNew: any,\r\n    settingsNew: Partial<FieldSettings>,\r\n  ): Partial<FieldSettings> {\r\n    return FormulaSettingsHelper.keepSettingIfTypeOkAndStatus(target, settings, valueNew, settingsNew).settingsNew;\r\n  }\r\n\r\n  static keepSettingIfTypeOkAndStatus(\r\n    target: string,\r\n    settings: FieldSettings,\r\n    valueNew: any,\r\n    settingsNew: Partial<FieldSettings>,\r\n  ): { settingsNew: Partial<FieldSettings>, wasChanged: boolean } {\r\n    // Retrieve the previous setting\r\n    const settingName = target.substring(SettingsFormulaPrefix.length) as keyof FieldSettings;\r\n    const prevSetting = settings[settingName];\r\n\r\n    if (isEqual(prevSetting, valueNew))\r\n      return { settingsNew, wasChanged: false };\r\n\r\n    const keepNewSetting = (Array.isArray(prevSetting) && Array.isArray(valueNew)) // can't check types of items in array, hope for the best\r\n      || (typeof prevSetting === typeof valueNew); // maybe typesafe\r\n\r\n    if (!keepNewSetting)\r\n      return { settingsNew, wasChanged: false };\r\n\r\n    (settingsNew as Record<keyof FieldSettings, any>)[settingName] = valueNew;\r\n    return { settingsNew, wasChanged: true };\r\n  }\r\n}\r\n","import { untracked } from '@angular/core';\r\nimport groupBy from 'lodash-es/groupBy';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemIdentifierShared } from '../../shared/models/edit-form.model';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldDefaults } from '../shared/helpers';\r\nimport { FieldConstantsOfLanguage, FieldProps, FieldPropsPicker } from '../state/fields-configs.model';\r\nimport { FieldSettingsUpdateHelper } from '../state/fields-settings-update.helpers';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { FormulaCacheItem } from './cache/formula-cache.model';\r\nimport { FormulaDesignerService } from './designer/formula-designer.service';\r\nimport { FormulaFunctionV1, FormulaVersions } from './formula-definitions';\r\nimport { FormulaFieldPickerHelper } from './formula-field-picker.helper';\r\nimport { FormulaRunOneHelpersFactory } from './formula-run-one-helpers.factory';\r\nimport { FormulaPromiseHandler } from './promise/formula-promise-handler';\r\nimport { FieldFormulasResult, FieldFormulasResultPartialSettings, FieldFormulasResultRaw } from './results/formula-results.models';\r\nimport { FormulaSettingsHelper } from './results/formula-settings.helper';\r\nimport { FormulaExecutionSpecs, FormulaExecutionSpecsWithRunParams, FormulaRunParameters } from './run/formula-objects-internal-data';\r\nimport { FormulaFieldValidation } from './targets/formula-targets';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  runFormula: false,\r\n  runAllOfField: true,\r\n  runOrInitSettings: true,\r\n  getPickerInfos: false,\r\n  fields: [...DebugFields], // will be replaced by shared list below\r\n};\r\n\r\n/**\r\n * Run all formulas of a single field.\r\n * Will also ensure that any settings are initialized properly if not yet created.\r\n */\r\nexport class FormulaRunField {\r\n\r\n  log = classLog({FormulaRunField}, logSpecs);\r\n\r\n  constructor(\r\n    private promiseHandler: FormulaPromiseHandler,\r\n    private designerSvc: FormulaDesignerService,\r\n    private entityGuid: string,\r\n    private runOneHelper: FormulaRunOneHelpersFactory,\r\n  ) { }\r\n\r\n  /**\r\n   * Used for running all formulas for a given attribute/field.\r\n   * @returns Object with all changes that formulas should make\r\n   */\r\n  runOrInitSettings(\r\n    currentValues: ItemValuesOfLanguage,\r\n    fieldName: string,\r\n    fieldConstants: FieldConstantsOfLanguage,\r\n    settingsCurrent: FieldSettings,\r\n    itemHeader: Pick<ItemIdentifierShared, \"Prefill\">,\r\n    valueBefore: FieldValue,\r\n    propsBefore: FieldProps,\r\n    reuseExecSpecs: FormulaExecutionSpecs,\r\n    setUpdHelper: FieldSettingsUpdateHelper,\r\n  ): FieldFormulasResult {\r\n    const l = this.log.fnIfInList('runOrInitSettings', 'fields', fieldName, { fieldName });\r\n\r\n    // Get the latest picker data and check if it has changed - as it affects which formulas to run\r\n    const pickHelp = new FormulaFieldPickerHelper(fieldName, fieldConstants, propsBefore);\r\n\r\n    // Get the latest formulas. Use untracked() to avoid tracking the reading of the formula-cache\r\n    // TODO: should probably use untracked around all the calls in this class...WIP 2dm\r\n    const fAll = untracked(() => this.designerSvc.cache.getActive(this.entityGuid, fieldName, pickHelp.isSpecialPicker));\r\n    const fGrouped = groupBy(fAll, f => f.disabled ? 'disabled' : 'enabled');\r\n    if (fGrouped.disabled)\r\n      this.#showDisabledFormulasWarnings(fGrouped.disabled);\r\n\r\n    const enabled = fGrouped.enabled ?? [];\r\n\r\n    const noPromiseSleep = this.promiseHandler.filterFormulas(fieldName, enabled)\r\n\r\n    // If we're working on the picker, but it's not ready yet, we must skip these formulas\r\n    const formulas = pickHelp.filterFormulasIfPickerNotReady(noPromiseSleep);\r\n\r\n    l.a(` enabled: ${enabled.length}; noPromisesSleep: ${noPromiseSleep.length}; formulas: ${formulas.length}`);\r\n\r\n    // If we have no formulas, exit early.\r\n    if (formulas.length == 0)\r\n      return finalize({}, valueBefore, {\r\n        value: valueBefore, validation: null, fields: [], settings: {},\r\n        options: new FieldPropsPicker(), selected: new FieldPropsPicker(),\r\n      } satisfies FieldFormulasResultPartialSettings);\r\n\r\n    // Run all formulas IF we have any and work with the objects containing specific changes\r\n    const runParamsStatic: Omit<FormulaRunParameters, 'formula'> = {\r\n      currentValues,\r\n      settingsInitial: fieldConstants.settingsInitial,\r\n      settingsCurrent,\r\n      pickerHelper: pickHelp,\r\n      defaultValueHelper: () => new FieldDefaults(fieldName, fieldConstants.inputTypeSpecs.inputType, fieldConstants.settingsInitial, itemHeader),\r\n    };\r\n    const raw = this.#runAllOfField(runParamsStatic, formulas, reuseExecSpecs);\r\n\r\n    return finalize(raw.settings, raw.value, raw);\r\n\r\n    // Helper to finalize the result, needed to quit early and also when it really runs\r\n    function finalize(settingsUpdate: Partial<FieldSettings>, value: FieldValue, raw: FieldFormulasResultPartialSettings): FieldFormulasResult {\r\n      // Correct any settings necessary after\r\n      // possibly making invalid changes in formulas or if settings need to adjust\r\n      // eg. custom bool labels which react to the value, etc.\r\n      const settings = setUpdHelper.correctSettingsAfterChanges({ ...settingsCurrent, ...settingsUpdate }, value || valueBefore);\r\n\r\n      // If it's a new picker, make sure that requirement is set.\r\n      if (fAll.length > 0 && pickHelp.isSpecialPicker)\r\n        settings.requiredFeatures = [ ...settings.requiredFeatures ?? [], FeatureNames.PickerFormulas ];\r\n      return l.r({ ...raw, settings, } satisfies FieldFormulasResult);\r\n    }\r\n  }\r\n\r\n  #showDisabledFormulasWarnings(disabled: FormulaCacheItem[]): void {\r\n    for (const formula of disabled)\r\n      console.warn(`Formula on field '${formula.fieldName}' with target '${formula.target}' is disabled. Reason: ${formula.disabledReason}`);\r\n  }\r\n\r\n  #runAllOfField(\r\n    runParams: Omit<FormulaRunParameters, 'formula'>,\r\n    formulas: FormulaCacheItem[],\r\n    reuseObjectsForFormulaDataAndContext: FormulaExecutionSpecs,\r\n  ): FieldFormulasResultPartialSettings {\r\n    const l = this.log.fnIfInList('runAllOfField', 'fields', formulas[0].fieldName, { runParams, formulas });\r\n\r\n    // Target variables to fill using formula result\r\n    let wip: FieldFormulasResultPartialSettings = {\r\n      value: undefined,                 // The new value\r\n      validation: undefined,            // The new validation\r\n      fields: [],                       // Any additional fields\r\n      options: new FieldPropsPicker(),  // Picker options\r\n      selected: new FieldPropsPicker(), // Picker selected\r\n      settings: {},                     // New settings - which can be updated multiple times by formulas\r\n    };\r\n\r\n    const start = performance.now();\r\n    for (const formula of formulas) {\r\n\r\n      const allRunParams: FormulaExecutionSpecsWithRunParams = {\r\n        runParameters: { formula, ...runParams, },\r\n        ...reuseObjectsForFormulaDataAndContext\r\n      };\r\n\r\n      const raw = this.#runFormula(allRunParams);\r\n      l.a(`formula result`, { formula, raw });\r\n\r\n      // Picker: First check sleep (before promise) since the promise will also need that\r\n      runParams.pickerHelper.updateFormulaSleep(formula, raw, l);\r\n\r\n      // Update Stop-State of formula in cache\r\n      this.promiseHandler.updateStop(formula, raw);\r\n\r\n      // Promise: Pick up in PromiseHandler if necessary and auto-stop if not explicitly set\r\n      this.promiseHandler.handleStopAndPromise(formula, raw);\r\n\r\n      // Picker: picker data results - experimental v18\r\n      wip = runParams.pickerHelper.preserveResultsAfterRun(formula, wip, raw, l);\r\n        \r\n      // If we have field changes, add to the list\r\n      if (raw.fields)\r\n        wip.fields.push(...raw.fields);\r\n\r\n      // If the value is not set, skip further result processing\r\n      if (raw.value === undefined)\r\n        continue;\r\n\r\n      // If we do have a value, we need to place it in the correct target\r\n      switch (true) {\r\n        // Target is the value. Remember it for later\r\n        case formula.isValue:\r\n          wip.value = raw.value;\r\n          break;\r\n\r\n        // Target is the validation. Remember it for later\r\n        case formula.isValidation:\r\n          wip.validation = raw.value as unknown as FormulaFieldValidation;\r\n          break;\r\n\r\n        // Target is a setting. Check validity and merge with other settings\r\n        case formula.isSetting:\r\n          wip.settings = FormulaSettingsHelper.keepSettingIfTypeOk(formula.target, runParams.settingsCurrent, raw.value, wip.settings);\r\n          break;\r\n      }\r\n    }\r\n    const afterRun = performance.now();\r\n\r\n    return l.r(wip, `runAllFormulas Time: ${afterRun - start}ms`);\r\n  }\r\n\r\n  /**\r\n   * Used for running a single formula and returning the result.\r\n   * @param formula\r\n   * @param entityId\r\n   * @param formValues\r\n   * @param inputType\r\n   * @param settingsInitial\r\n   * @param settingsCurrent\r\n   * @param itemIdWithPrefill\r\n   * @returns Result of a single formula.\r\n   */\r\n  #runFormula(execSpecs: FormulaExecutionSpecsWithRunParams): FieldFormulasResultRaw {\r\n\r\n    const { formula, fieldName, params, title, devHelper, valHelper } = this.runOneHelper.getPartsFor(execSpecs);\r\n\r\n    const l = this.log.fnIfInList('runFormula', 'fields', fieldName, { fieldName });\r\n\r\n    l.a(`formula version: ${formula.version}, entity: ${title}, field: ${fieldName}, target: ${formula.target}`, {formula});\r\n    try {\r\n      devHelper.showStart();\r\n\r\n      switch (formula.version) {\r\n        // Formula V1\r\n        case FormulaVersions.V1:\r\n          const v1Raw = (formula.fn as FormulaFunctionV1)(params.data, params.context, params.experimental);\r\n          const { ok, v1Result: valueV1 } = valHelper.v1(v1Raw);\r\n          if (ok) {\r\n            l.a('V1 formula result is pure', { v1Raw, valueV1 });\r\n            devHelper.showResult(valueV1.value, false, false);\r\n            return valueV1;\r\n          }\r\n          l.a('V1 formula result is not pure', { v1Raw });\r\n          console.error('V1 formulas accept only simple values in return statements. If you need to return an complex object, use V2 formulas.');\r\n          return valHelper.toFormulaResult(undefined);\r\n\r\n        // Formula V2\r\n        case FormulaVersions.V2:\r\n          //TODO: @2dm -> Added item as last argument so if ew use experimental anywhere nothing breaks\r\n          const v2Raw = (formula.fn as FormulaFunctionV1)(params.data, params.context, params.experimental);\r\n          const v2Value = valHelper.v2(v2Raw);\r\n          devHelper.showResult(v2Value.options as any ?? v2Value.value, false, !!v2Value.promise);\r\n          return v2Value;\r\n\r\n        default:\r\n          // default should never happen, so don't return any data to use; will probably error if this happens\r\n          // 2024-09-10 2dm adding throw error here to see if it's anywhere\r\n          // TODO: REMOVE option default everywhere ca. 2024-Q3\r\n          throw new Error(`Formula version unknown not supported`);\r\n          // const defRaw = (formula.fn as FormulaFunctionDefault)();\r\n          // const defValue = valHelper.v2(defRaw);\r\n          // devHelper.showResult(defValue.value, false, false);\r\n          // return defValue;\r\n      }\r\n    } catch (error) {\r\n      devHelper.showError(error);\r\n      return valHelper.toFormulaResult(undefined);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemIdentifierShared } from '../../shared/models/edit-form.model';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { EavContentType, EavContentTypeAttribute } from '../shared/models/eav';\r\nimport { LoggingService } from '../shared/services/logging.service';\r\nimport { FieldsSettingsHelpers } from '../state/field-settings.helper';\r\nimport { FieldProps } from '../state/fields-configs.model';\r\nimport { FieldsPropsEngine } from '../state/fields-properties-engine';\r\nimport { FieldsPropsEngineCycle } from '../state/fields-properties-engine-cycle';\r\nimport { FieldsSettingsService } from '../state/fields-settings.service';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { FormulaDesignerService } from './designer/formula-designer.service';\r\nimport { FormulaExecutionSpecsFactory } from './formula-exec-specs.factory';\r\nimport { FormulaRunField } from './formula-run-field';\r\nimport { FormulaRunOneHelpersFactory } from './formula-run-one-helpers.factory';\r\nimport { FormulaPromiseHandler } from './promise/formula-promise-handler';\r\nimport { NameValuePair } from './results/formula-results.models';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getFormulas: false,\r\n  runAllFields: true,\r\n  runFormula: false,\r\n  runOneFieldOrInitSettings: false,\r\n  fields: [...DebugFields], // or '*' for all\r\n};\r\n\r\n/**\r\n * Formula engine is responsible for running formulas and returning the result.\r\n *\r\n * Each instance of the engine is responsible for a _single_ entity.\r\n */\r\n@Injectable()\r\nexport class FormulaEngine {\r\n\r\n  log = classLog({FormulaEngine}, logSpecs);\r\n\r\n  #formulaExecSpecsFactory = transient(FormulaExecutionSpecsFactory);\r\n\r\n  constructor(\r\n    private designerSvc: FormulaDesignerService,\r\n    private logSvc: LoggingService,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  init(\r\n    entityGuid: string,\r\n    clientData: Pick<ItemIdentifierShared, \"ClientData\">,\r\n    settingsSvc: FieldsSettingsService,\r\n    promiseHandler: FormulaPromiseHandler,\r\n    contentType: EavContentType,\r\n    ctTitle: string\r\n  ) {\r\n    this.#entityGuid = entityGuid;\r\n    this.#promiseHandler = promiseHandler;\r\n    this.#attributes = contentType.Attributes;\r\n    this.#contentTypeTitle = ctTitle;\r\n    this.#formulaExecSpecsFactory.init(settingsSvc, entityGuid, clientData);\r\n  }\r\n\r\n  // properties to set on init\r\n  #entityGuid: string;\r\n  #contentTypeTitle: string;\r\n  #promiseHandler: FormulaPromiseHandler;\r\n  #attributes: EavContentTypeAttribute[];\r\n\r\n  runAllFields(propsEngine: FieldsPropsEngine, cycle: FieldsPropsEngineCycle) {\r\n    const fieldsProps: Record<string, FieldProps> = {};\r\n    const valueUpdates: ItemValuesOfLanguage = {};\r\n    const fieldUpdates: NameValuePair[] = [];\r\n\r\n    // Many aspects of a field are re-usable across formulas, so we prepare them here\r\n    // These are things explicit to the entity and either never change, or only rarely\r\n    // so never between cycles\r\n    const reuseExecSpecs = this.#formulaExecSpecsFactory.getSharedSpecs();\r\n\r\n    const fss = new FieldsSettingsHelpers(this.log.name);\r\n\r\n    for (const attr of this.#attributes) {\r\n      const lAttr = this.log.fnIfInList('runAllFields', 'fields', attr.Name, { fieldName: attr.Name });\r\n      const values = cycle.allAttributes[attr.Name];\r\n      const valueBefore = cycle.values[attr.Name];\r\n\r\n      const fieldConstants = cycle.getFieldConstants(attr.Name);\r\n      const latestSettings = cycle.getFieldSettingsInCycle(fieldConstants);\r\n      const settingsUpdateHelper = cycle.updateHelper.create(attr.Name, attr, fieldConstants, values);\r\n\r\n      const propsBefore = cycle.fieldProps[attr.Name] ?? {} as FieldProps;\r\n\r\n      // run formulas\r\n      const runOneHelper = new FormulaRunOneHelpersFactory(this.designerSvc, this.translate, this.logSvc, this.#contentTypeTitle);\r\n      const runOne = new FormulaRunField(this.#promiseHandler, this.designerSvc, this.#entityGuid, runOneHelper);\r\n      const allResults = runOne.runOrInitSettings(\r\n        cycle.values,\r\n        attr.Name,\r\n        fieldConstants,\r\n        latestSettings,\r\n        propsEngine.item.Header,\r\n        valueBefore,\r\n        propsBefore,\r\n        reuseExecSpecs,\r\n        settingsUpdateHelper,\r\n      );\r\n\r\n      const fixed = allResults.settings;\r\n\r\n      // Add any value changes to the queue for finalizing\r\n      valueUpdates[attr.Name] = allResults.value;\r\n\r\n      // If _other_ fields were updated, add it to the queue for later processing\r\n      if (allResults.fields)\r\n        fieldUpdates.push(...allResults.fields);\r\n\r\n      const debugDetails = lAttr.enabled;\r\n      const translationState = fss.getTranslationState(values, fixed.DisableTranslation, propsEngine.languages, debugDetails);\r\n\r\n      if (allResults.options.list)\r\n        lAttr.a('picker options', { options: allResults.options.list, version: allResults.options.ver });\r\n      if (allResults.selected.list)\r\n        lAttr.a('picker selected', { selected: allResults.selected.list, version: allResults.options.ver });\r\n\r\n      fieldsProps[attr.Name] = {\r\n        ...propsBefore,\r\n        language: fieldConstants.language,\r\n        constants: fieldConstants,\r\n        settings: fixed,\r\n        translationState,\r\n        value: valueBefore,\r\n        buildWrappers: null, // required, but set elsewhere\r\n        formulaValidation: allResults.validation,\r\n        // Options and Selected. Use spread, as values must be undefined if not updated\r\n        opts: { ...propsBefore.opts, ...allResults.options, },\r\n        sel: { ...propsBefore.sel, ...allResults.selected, },\r\n      };\r\n    }\r\n    return { fieldsProps, valueUpdates, fieldUpdates };\r\n  }\r\n\r\n}\r\n\r\n","import { FieldValueOrResultRaw, NameValuePair } from \"../results/formula-results.models\";\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\n\r\n/**\r\n * The result of a formula promise.\r\n * Contains queues of things to broadcast on the next processing cycle.\r\n */\r\nexport class FormulaPromiseResult {\r\n  constructor(public entityGuid: string) { }\r\n\r\n  public data: Record<string, FormulaPromiseResultField> = {};\r\n}\r\n\r\ninterface FormulaPromiseResultField {\r\n  name: string;\r\n  value?: FieldValue;\r\n  fields: NameValuePair[];\r\n  settings: Record<string, unknown>;\r\n}\r\n\r\nexport interface FieldSettingPair {\r\n  name: string;\r\n  settings: NameValuePair[];\r\n}\r\n\r\n\r\nexport interface FormulaPromise {\r\n  promise: Promise<FieldValueOrResultRaw>;\r\n  sleep: boolean;\r\n  completed: boolean;\r\n}","import { Injectable, Signal } from \"@angular/core\";\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { EavContentType } from \"../../shared/models/eav\";\r\nimport { FieldProps } from '../../state/fields-configs.model';\r\nimport { FieldsPropsEngineCycle } from '../../state/fields-properties-engine-cycle';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { FieldsValuesModifiedHelper } from '../../state/fields-values-modified.helper';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FieldFormulasResultRaw, FieldValueOrResultRaw } from \"../results/formula-results.models\";\r\nimport { FormulaSettingsHelper } from \"../results/formula-settings.helper\";\r\nimport { FormulaValueCorrections } from \"../results/formula-value-corrections.helper\";\r\nimport { SettingsFormulaPrefix } from '../targets/formula-targets';\r\nimport { FormulaPromiseResult } from \"./formula-promise-result.model\";\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  addFormulaPromise: true,\r\n  updateStop: false,\r\n  defineCallbackHandlerIfMissing: false,\r\n  changesFromQueue: false,\r\n  promiseComplete: true,\r\n  filterFormulas: true,\r\n  fields: [...DebugFields], // or '*' for all\r\n};\r\n\r\n/**\r\n * FormulaPromiseHandler is responsible for handling the promise parts of formula results.\r\n * \r\n * It is responsible for a single entity.\r\n */\r\n@Injectable()\r\nexport class FormulaPromiseHandler {\r\n\r\n  log = classLog({FormulaPromiseHandler}, logSpecs);\r\n\r\n  constructor(private itemService: ItemService) { }\r\n\r\n  #updateValueQueue: Record<string, FormulaPromiseResult> = {};\r\n  \r\n  init(entityGuid: string,\r\n    contentType: Signal<EavContentType>,\r\n    fieldsSettingsService: FieldsSettingsService,\r\n    modifiedChecker: FieldsValuesModifiedHelper,\r\n  ) {\r\n    this.#entityGuid = entityGuid;\r\n    this.#fieldsSettingsService = fieldsSettingsService;\r\n    this.#contentType = contentType;\r\n    this.#modifiedChecker = modifiedChecker;\r\n  }\r\n\r\n  #fieldsSettingsService: FieldsSettingsService = null;\r\n  #entityGuid: string;\r\n  #contentType: Signal<EavContentType>;\r\n  #modifiedChecker: FieldsValuesModifiedHelper;\r\n\r\n  public updateStop(formula: FormulaCacheItem, raw: FieldFormulasResultRaw): void {\r\n    const l = this.log.fnIfInList('updateStop', 'fields', formula.fieldName, { promiseResult: raw, formula }, formula.target);\r\n\r\n    const hasPromise = raw.promise instanceof Promise;\r\n\r\n    // Stop depends on explicit result and the default is different if it has a promise\r\n    // TODO: CONTINUE HERE - probably stop being set aggressively even if sleeping...\r\n    // Sleep state not fully resolved...\r\n    const newStop = raw.stop ?? (hasPromise ? true : formula.stop); \r\n    const msg = ` formula.stop: ${formula.stop}; raw.stop: ${raw.stop}; hasPromise: ${hasPromise}; newStop: ${newStop}`;\r\n    formula.stop = newStop;\r\n    return l.end(msg);\r\n  }\r\n\r\n  /**\r\n   * Used for filling queue and triggering next run.\r\n   * @param raw\r\n   * @param formula\r\n   * @param inputTypeName\r\n   */\r\n  public handleStopAndPromise(formula: FormulaCacheItem, raw: FieldFormulasResultRaw): void {\r\n    const l = this.log.fnIfInList('addFormulaPromise', 'fields', formula.fieldName, { promiseResult: raw, formula }, formula.target);\r\n\r\n    // If no promise, exit early\r\n    if (!(raw.promise instanceof Promise))\r\n      return l.end('no promise');\r\n    \r\n    // If the user is currently editing this formula,\r\n    // give him additional info about stopping.\r\n    if (raw.openInDesigner && raw.stop === null)\r\n      console.log(`FYI: formula returned a promise. This automatically stops this formula from running again. If you want it to continue running, return stop: false`);\r\n    \r\n    // Check sleep state (new feat in v18 for Pickers (state/data))\r\n    // Unclear if this should be here in the promise handling...\r\n    const sleep = raw.sleep ?? false;\r\n    \r\n    // If result _contains_ a promise, add it to the queue\r\n    // Add promise to the queue / ensure callback handling ???\r\n    formula.promises$.next({ promise: raw.promise, sleep, completed: false });\r\n    this.#defineCallbackHandlerIfMissing(formula);\r\n\r\n    return l.end(`promise added, sleep: ${sleep}`);\r\n  }\r\n\r\n  /**\r\n   * Filter out formulas which shouldn't run because of promises. Rules are:\r\n   * - not stopped (this is not handled here, as it applies to non-promise formulas too)\r\n   * - has promise, but is sleeping so we don't want to run it until it has completed\r\n   * @param fieldName \r\n   * @param before \r\n   * @returns \r\n   */\r\n  public filterFormulas(fieldName: string, before: FormulaCacheItem[]) {\r\n    const l = this.log.fnIfInList('filterFormulas', 'fields', fieldName, { enabled: before });\r\n    const formulas = before.filter(f => {\r\n      const promise = f.promises$.value;\r\n      l.a(`hasPromise: ${!!promise}; completed: ${promise?.completed}; sleep: ${promise?.sleep}`);\r\n      return !promise || (promise.completed || !promise.sleep);\r\n    });\r\n    const msg = ` beforeFilter: ${before.length}; formulas: ${formulas.length}; `;\r\n    return l.rSilent(formulas, msg);\r\n  }\r\n\r\n\r\n  /**\r\n   * Used for defining the callback handler for the promise if it doesn't already exist and filling queue for the next run.\r\n   * @param formula\r\n   * @param inputType\r\n   * @param entityGuid\r\n   */\r\n  #defineCallbackHandlerIfMissing(formula: FormulaCacheItem): void {\r\n    const entityGuid = this.#entityGuid;\r\n    const lcb = this.log.fnIfInList('defineCallbackHandlerIfMissing', 'fields', formula.fieldName, { formula, entityGuid }, formula.target);\r\n    if (formula.updateCallback$.value)\r\n      return lcb.end('callback already defined');\r\n\r\n    formula.updateCallback$.next((result: FieldValueOrResultRaw) => this.#promiseComplete(formula, result));\r\n  }\r\n\r\n  #promiseComplete(formula: FormulaCacheItem, result: FieldValueOrResultRaw): void {\r\n    const entityGuid = this.#entityGuid;\r\n    const l = this.log.fnIfInList('promiseComplete', 'fields', formula.fieldName, { result, formula, entityGuid }, formula.target);\r\n    const fieldName = formula.fieldName;\r\n    const raw = new FormulaValueCorrections(fieldName, formula.isValue, formula.inputType, false).v2(result);\r\n\r\n    // Make sure the cache contains this entry\r\n    const queue = this.#updateValueQueue;\r\n    const queueItem = queue[entityGuid] ??= new FormulaPromiseResult(entityGuid);      \r\n    const fieldQueue = queueItem.data[fieldName] ??= {\r\n      name: fieldName,\r\n      value: formula.isValue ? raw.value : undefined,\r\n      fields: [],\r\n      settings: {}\r\n    };\r\n\r\n    if (formula.isSetting) {\r\n      // New v18 settings are added to the field settings\r\n      l.a(\"formula promise settings\");\r\n      fieldQueue.settings ??= {};\r\n      fieldQueue.settings[formula.settingName] = raw.value;\r\n    }\r\n\r\n    if (raw.fields) {\r\n      l.a(\"formula promise fields\");\r\n      fieldQueue.fields.push(...raw.fields);\r\n    }\r\n\r\n    // new WIP\r\n    formula.stop = raw.stop ?? formula.stop;\r\n    formula.promiseCompleted = true;\r\n    l.end('promise complete, will retriggerFormulas', fieldQueue as unknown as Record<string, unknown>);\r\n    this.#fieldsSettingsService.retriggerFormulas('promise');\r\n  }\r\n\r\n  /**\r\n   * Used for updating values and cleaning settings from queue.\r\n   * @returns true if values were updated, false otherwise and new field props\r\n   */\r\n  public changesFromQueue(cycle: FieldsPropsEngineCycle): QueuedChanges {\r\n    // Get data from change queue and then flush, as we'll process it next and in case of errors we don't want to reprocess it\r\n    const toProcess = this.#updateValueQueue[this.#entityGuid];\r\n    this.#updateValueQueue[this.#entityGuid] = null;\r\n\r\n    // If nothing in the queue for this entity, exit early\r\n    if (toProcess == null || toProcess.data == null || Object.keys(toProcess.data).length === 0)\r\n      return { valueChanges: {}, newFieldProps: null };\r\n\r\n    // Updates to process/import\r\n    const dataEntries = Object.entries(toProcess.data);\r\n    const valuesArray = dataEntries.map(([name, field]) => ({ name, value: field.value }));\r\n    const values = valuesArray.reduce((acc, { name, value }) => {\r\n      acc[name] = value;\r\n      return acc;\r\n    }, {} as ItemValuesOfLanguage);\r\n\r\n    const fields = dataEntries\r\n      .filter(([_, field]) => field.fields.length > 0)\r\n      .map(([_, field]) => field.fields)\r\n      .flat();\r\n\r\n    const settings = dataEntries\r\n      .filter(([_, field]) => Object.keys(field.settings).length > 0)\r\n      .map(([name, field]) => ({ fieldName: name, settings: field.settings }));\r\n\r\n    // Handle values (of this field) and fields (values of other fields)\r\n    const modifiedValues = (Object.keys(values).length !== 0 || fields.length !== 0)\r\n      ? this.#modifiedChecker.getValueUpdates(cycle, fields, values)\r\n      : {};\r\n\r\n    // Handle settings\r\n    const contentType = this.#contentType();\r\n    let newFieldProps: Record<string, FieldProps> = null;\r\n    if (settings.length) {\r\n      newFieldProps = { ...cycle.fieldProps };\r\n      const itemAttributes = this.itemService.getItemAttributes(this.#entityGuid);\r\n      Object.values(settings).forEach(setting => {\r\n        const fieldName = setting.fieldName;\r\n        const settingsCurrent = cycle.fieldProps[fieldName]?.settings;\r\n        \r\n        let settingsNew: Partial<FieldSettings> = {};\r\n        Object.entries(setting.settings).forEach(([name, value]) => {\r\n          const target = SettingsFormulaPrefix + name;\r\n          settingsNew = FormulaSettingsHelper.keepSettingIfTypeOk(target, settingsCurrent, value, settingsNew);\r\n\r\n          const constantFieldPart = cycle.getFieldConstants(fieldName);\r\n          const attribute = contentType.Attributes.find(a => a.Name === fieldName);\r\n\r\n          // Prepare helper which the formula will need to verify if the field is visible\r\n          const setUpdHelper = cycle.updateHelper.create(fieldName, attribute, constantFieldPart, itemAttributes[fieldName]);\r\n\r\n          const mergedSettings = { ...settingsCurrent, ...settingsNew };\r\n          const updatedSettings = setUpdHelper.correctSettingsAfterChanges(mergedSettings, cycle.values[fieldName]);\r\n\r\n          newFieldProps[fieldName] = { ...newFieldProps[fieldName], settings: updatedSettings };\r\n        });\r\n\r\n      });\r\n    }\r\n\r\n    return { valueChanges: modifiedValues, newFieldProps };\r\n  }\r\n}\r\n\r\ninterface QueuedChanges {\r\n  /** value changes, may not be null */\r\n  valueChanges: ItemValuesOfLanguage,\r\n  newFieldProps: Record<string, FieldProps>\r\n}","import { FieldMetadataModel } from '../field-metadata.decorator';\r\n\r\n// Note: When creating new wrappers, do this\r\n// 1. Create the component\r\n// 2. Add it to the catalog above\r\n// 3. Make sure the class name is unique...\r\n// 4. ...and that i uses the name from the WrappersCatalog above\r\n// 5. Then also register it in the `InputComponents` list with the name and control\r\n// 6. If it should be applied to many controls, register in the `WrapperHelper` at the right place\r\n// ...otherwise add it as a `@FieldMetadata` to the field (remember that this only works on the entry component)\r\n\r\nexport const WrappersCatalog = {\r\n  AdamWrapper: 'app-adam-wrapper', // default\r\n  CollapsibleWrapper: 'app-collapsible-wrapper', // empty specific\r\n  DropzoneWrapper: 'app-dropzone-wrapper', // default\r\n  PickerExpandableWrapper: 'app-picker-expandable-wrapper', // entity specific\r\n  PickerPreviewWrapper: 'app-picker-preview-wrapper', // entity specific\r\n  ExpandableWrapper: 'app-expandable-wrapper', // default\r\n  HiddenWrapper: 'app-hidden-wrapper', // default\r\n  FeatureWarningWrapper: 'app-feat-warnings-wrapper', // default\r\n  HyperlinkDefaultExpandableWrapper: 'app-hyperlink-default-expandable-wrapper', // hyperlink specific\r\n  HyperlinkLibraryExpandableWrapper: 'app-hyperlink-library-expandable-wrapper', // hyperlink specific\r\n  DialogPopup: 'app-dialog-popup', // hyperlink specific\r\n  LocalizationWrapper: 'app-localization-wrapper', // default\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\nexport const WrappersLocalizationOnly: FieldMetadataModel = {\r\n  wrappers: [WrappersCatalog.LocalizationWrapper],\r\n};\r\n\r\n\r\n","import { Of } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { WrappersCatalog } from './wrappers.constants';\r\n\r\nconst logThis = false;\r\n\r\nexport class WrapperHelper {\r\n\r\n  static getWrappers(settings: FieldSettings, inputTypeSpecs: InputTypeSpecs): Of<typeof WrappersCatalog>[] {\r\n    const inputType = inputTypeSpecs.inputType;\r\n\r\n    if (InputTypeHelpers.isMessage(inputType))\r\n      return [];\r\n\r\n    // Empty input type wrappers - in this case, exit early\r\n    if (InputTypeHelpers.isGroupStart(inputType))\r\n      return [WrappersCatalog.CollapsibleWrapper];\r\n\r\n    // Start with default wrappers for all controls\r\n    const wrappers: Of<typeof WrappersCatalog>[] = [\r\n      WrappersCatalog.HiddenWrapper\r\n    ];\r\n\r\n    // entity-default/string-dropdown wrappers\r\n    const inputsEntityOrStringDropdown: string[] = [\r\n      InputTypeCatalog.EntityDefault,\r\n      InputTypeCatalog.StringDropdownQuery,\r\n      InputTypeCatalog.EntityQuery,\r\n      InputTypeCatalog.EntityContentBlocks,\r\n      InputTypeCatalog.StringDropdown,\r\n      InputTypeCatalog.EntityPicker,\r\n      InputTypeCatalog.StringPicker,\r\n      InputTypeCatalog.NumberPicker,\r\n      // InputTypeCatalog.StringFontIconPicker,\r\n      // || (inputType === InputTypeConstants.WIPNumberPicker);\r\n    ];\r\n    const isEntityOrStringDropdownType = inputsEntityOrStringDropdown.includes(inputType);\r\n\r\n    if (isEntityOrStringDropdownType) {\r\n      // New ...\r\n      wrappers.push(WrappersCatalog.FeatureWarningWrapper);\r\n      // i18n\r\n      wrappers.push(WrappersCatalog.LocalizationWrapper);\r\n      const allowMultiValue = (settings as FieldSettings & FieldSettingsPickerMerged).AllowMultiValue ?? false;\r\n      if (allowMultiValue || inputType === InputTypeCatalog.EntityContentBlocks)\r\n        wrappers.push(WrappersCatalog.PickerExpandableWrapper);\r\n    }\r\n\r\n    // External components should always get these wrappers\r\n    if (inputTypeSpecs.isExternal)\r\n      wrappers.push(\r\n        WrappersCatalog.DropzoneWrapper,\r\n        WrappersCatalog.LocalizationWrapper,\r\n        WrappersCatalog.ExpandableWrapper,\r\n        WrappersCatalog.AdamWrapper,\r\n      );\r\n\r\n    return wrappers;\r\n  }\r\n\r\n}\r\n","import { FieldConstantsOfLanguage, FieldProps } from './fields-configs.model';\r\nimport { ItemValuesOfLanguage } from './item-values-of-language.model';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { WrapperHelper } from '../fields/wrappers/wrapper.helper';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { FieldsPropsEngine } from './fields-properties-engine';\r\nimport { EavEntityAttributes } from '../shared/models/eav';\r\nimport { FieldSettingsUpdateHelperFactory } from './fields-settings-update.helpers';\r\nimport { classLog } from '../../shared/logging';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getCycleSettingsAndValues: false,\r\n  getLatestSettingsAndValues: false,\r\n}\r\n\r\nconst maxChangeCycles = 5;\r\n\r\n/**\r\n * Assistant helper to process / recalculate the value of fields and their settings.\r\n * \r\n * It should function as follows:\r\n * 1. The system initialized or something changed - the language, a value, a setting, etc.\r\n * 2. This triggers a recalculation of the fields and their settings.\r\n * 3. That kind of change can again re-trigger certain value updates, fields, settings - so it loops...\r\n * 4. ...until nothing changes - or a max-value has been achieved and it should stop to prevent infinite loops.\r\n * 5. This is then handed back to the ui / value services for propagation\r\n * 6. ...after this it should not run again until something changes anew...\r\n * \r\n * Note that as of now, this engine should be created and discarded on every cycle.\r\n */\r\nexport class FieldsPropsEngineCycle {\r\n  private log = classLog({FieldsPropsEngineCycle}, logSpecs);\r\n\r\n  constructor(\r\n    private engine: FieldsPropsEngine,\r\n    /** The values of the form - initialized here and to be updated until complete */\r\n    private readonly initialValues: ItemValuesOfLanguage,\r\n    /** The field props at start and during the calculation cycles (may be updated until complete) */\r\n    public fieldProps: Record<string, FieldProps>,\r\n    public allAttributes: EavEntityAttributes,\r\n    public updateHelper: FieldSettingsUpdateHelperFactory,\r\n    private fieldConstants: FieldConstantsOfLanguage[],\r\n  ) {\r\n    this.values = { ...initialValues };\r\n  }\r\n\r\n  public getFieldConstants(name: string) {\r\n    return this.fieldConstants.find(f => f.fieldName === name);\r\n  }\r\n\r\n  /**\r\n   * Get the current values of the fields, as they may update during the cycle\r\n   */\r\n  values: ItemValuesOfLanguage;\r\n\r\n  public getCycleSettingsAndValues(): PropsUpdate {\r\n    const l = this.log.fnIf('getCycleSettingsAndValues');\r\n\r\n    for (let i = 0; i < maxChangeCycles; i++) {\r\n      const cycle = this.#getLatestSettingsAndValues(i);\r\n      const mergedValues = { ...this.values, ...cycle.valueChanges };\r\n\r\n      // Quit if we have no more changes\r\n      if (isEqual(this.fieldProps, cycle.props) && isEqual(this.values, mergedValues)) {\r\n        l.a('No more changes, stable, exit');\r\n        break;\r\n      }\r\n\r\n      // Update state for next cycles\r\n      this.fieldProps = cycle.props;\r\n      this.values = mergedValues;\r\n    }\r\n\r\n    // figure out the final changes to propagate\r\n    const finalChanges = this.engine.modifiedChecker.getValueUpdates(this, [], this.values, this.initialValues);\r\n\r\n    return { valueChanges: finalChanges, props: this.fieldProps };\r\n  }\r\n\r\n  #getLatestSettingsAndValues(loopIndex: number): PropsUpdate {\r\n    const l = this.log.fnIf('getLatestSettingsAndValues', { loopIndex });\r\n\r\n    // 1. Detect first round as it has slightly different behavior\r\n    const isFirstRound = Object.keys(this.fieldProps).length === 0;\r\n\r\n    // 2. Process the queue of changes from promises if necessary\r\n    // If things change, we will exit because then the observable will be retriggered\r\n    if (!isFirstRound) {\r\n      const { valueChanges, newFieldProps } = this.engine.formulaPromises.changesFromQueue(this);\r\n\r\n      // If we only updated values from promise (queue), don't trigger property regular updates\r\n      if (newFieldProps) {\r\n        l.a('New field props from queue', { newFieldProps });\r\n        this.fieldProps = newFieldProps;\r\n      }\r\n      \r\n      // If any value changes then the entire cycle will automatically retrigger.\r\n      // So we exit now as the whole cycle will re-init and repeat.\r\n      if (Object.keys(valueChanges).length > 0) {\r\n        l.a('Value changes from queue', { valueChanges });\r\n        this.values = { ...this.values, ...valueChanges };\r\n      }\r\n    } else\r\n      l.a('First round, no queue to process');\r\n\r\n    // 3. Run formulas for all fields - as a side effect (not nice) will also get / init all field settings\r\n    // Note that in the case of promises being executed, the whole process will need to run again\r\n    // when the promises finish\r\n    const { fieldsProps: props, valueUpdates, fieldUpdates } = this.engine.formulaEngine.runAllFields(this.engine, this);\r\n\r\n    // 4. On first cycle, also make sure we have the wrappers specified as it's needed by the field creator; otherwise preserve previous\r\n    for (const [key, value] of Object.entries(props))\r\n      value.buildWrappers = isFirstRound\r\n        ? WrapperHelper.getWrappers(value.settings, value.constants.inputTypeSpecs)\r\n        : this.fieldProps[key]?.buildWrappers;\r\n\r\n    // 6.1 If we have value changes were applied\r\n    const modifiedValues = this.engine.modifiedChecker.getValueUpdates(this, fieldUpdates, valueUpdates);\r\n\r\n    return { valueChanges: modifiedValues, props: props };\r\n  }\r\n\r\n\r\n  /**\r\n   * Get latest/current valid field settings - if possible from cache\r\n   * if the currentLanguage changed then we need to flush the settings with initial ones that have updated language\r\n   */\r\n  getFieldSettingsInCycle(constFieldPart: FieldConstantsOfLanguage): FieldSettings {\r\n    const cached = this.fieldProps[constFieldPart.fieldName];\r\n    // if the currentLanguage changed then we need to flush the settings with initial ones that have updated language\r\n    const cachedStillValid = constFieldPart.language == cached?.language;\r\n    const result: FieldSettings = cachedStillValid\r\n      ? cached?.settings ?? { ...constFieldPart.settingsInitial }\r\n      : { ...constFieldPart.settingsInitial };\r\n    return result;\r\n  }\r\n}\r\n\r\ninterface PropsUpdate {\r\n  valueChanges: ItemValuesOfLanguage;\r\n  props: Record<string, FieldProps>;\r\n}","import { ItemIdentifierShared } from '../../shared/models/edit-form.model';\r\nimport { InputTypeHelpers } from '../../shared/fields/input-type-helpers';\r\nimport { FieldConstantsOfLanguage } from './fields-configs.model';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../shared/logging';\r\n\r\n/**\r\n * Small helper to parse Item-Field-Visibility requirements from the URL.\r\n * This is to allow callers to specify which fields should be hidden.\r\n * For example, to make the edit-UI only open a specific WYSIWYG field and hide all other fields.\r\n */\r\nexport class ItemFieldVisibility {\r\n  private defaultIsShow = true;\r\n  private fields: Record<string, boolean> = null;\r\n\r\n  private log = classLog({ItemFieldVisibility});\r\n\r\n  constructor(identifier: ItemIdentifierShared) {\r\n    const l = this.log.fn('ctor', { identifier });\r\n    var fields = identifier.ClientData?.fields as string;\r\n    if (fields == null || fields == '') {\r\n      l.end('no fields specified');\r\n      return;\r\n    }\r\n    \r\n    // If the first character is a minus, then default is show all and just hide mentions\r\n    this.defaultIsShow = (fields[0] == '-');\r\n    if (this.defaultIsShow)\r\n      fields = fields.substring(1);\r\n    const ruleIsShow = !this.defaultIsShow;\r\n\r\n    this.fields = fields.toLowerCase().split(',')\r\n      .reduce((prev, f) => {\r\n        prev[f] = ruleIsShow;\r\n        return prev;\r\n      }, {} as Record<string, boolean>);\r\n    l.end('', { fields: this.fields, defaultIsShow: this.defaultIsShow });\r\n  }\r\n\r\n  hasRules(): boolean {\r\n    return this.fields != null;\r\n  }\r\n\r\n  isVisibleDisabled(fieldName: string): boolean {\r\n    const l = this.log.fn('isVisibleDisabled', { fieldName });\r\n\r\n    // check if we have no rules at all - in which case never override\r\n    if (!this.hasRules())\r\n      return l.r(false, 'no rules');\r\n\r\n    const override = this.fields[fieldName.toLowerCase()];\r\n    \r\n    return l.r(!(override ?? this.defaultIsShow));\r\n  }\r\n\r\n  static mergedVisible(settings: FieldSettings): boolean {\r\n    return settings.Visible && !settings.VisibleDisabled;\r\n  }\r\n\r\n  /**  Make sure that groups, which have a forced-visible-field are also visible */\r\n  makeParentGroupsVisible(allConstFieldParts: FieldConstantsOfLanguage[]) {\r\n    const l = this.log.fn('makeParentGroupsVisible', { allConstFieldParts });\r\n\r\n    if (!this.hasRules())\r\n      return l.r(allConstFieldParts, 'no rules, no changes');\r\n\r\n    // ATM in try-catch, to ensure we don't break anything\r\n    try {\r\n      allConstFieldParts.forEach((groupField, index) => {\r\n        // Only work on group-starts\r\n        if (!InputTypeHelpers.isGroupStart(groupField.inputTypeSpecs.inputType))\r\n          return;\r\n\r\n        // Ignore if visible-disabled is already ok\r\n        if (groupField.settingsInitial.VisibleDisabled == false)\r\n          return;\r\n\r\n        // Check if any of the following fields is forced visible - before another group-start/end\r\n        for (let i = index + 1; i < allConstFieldParts.length; i++) {\r\n          const innerField = allConstFieldParts[i];\r\n\r\n          // Stop checking the current group if we found another group start/end\r\n          if (InputTypeHelpers.endsPreviousGroup(innerField.inputTypeSpecs.inputType))\r\n            return;\r\n\r\n          if (innerField.settingsInitial.VisibleDisabled == false) {\r\n            l.a('Forced visible', { fieldName: groupField.fieldName, reason: innerField.fieldName });\r\n            groupField.settingsInitial.VisibleDisabled = false;\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    } catch (e) {\r\n      console.error('Error trying to set item field visibility', e);\r\n    }\r\n\r\n    return allConstFieldParts;\r\n  }\r\n}","import { Injectable, Signal } from '@angular/core';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../shared/logging';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldLogicManager } from '../fields/logic/field-logic-manager';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { InputTypeService } from '../shared/input-types/input-type.service';\r\nimport { EavContentType, EavItem } from '../shared/models/eav';\r\nimport { FieldsSettingsHelpers } from './field-settings.helper';\r\nimport { FieldConstants, FieldConstantsOfLanguage } from './fields-configs.model';\r\nimport { FieldsSettingsService } from './fields-settings.service';\r\nimport { ItemFieldVisibility } from './item-field-visibility';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  stablePartsOfLanguage: false,\r\n  stablePartOfField: true,\r\n  constantPartsOfField: false,\r\n  constantFieldParts: false,\r\n  staticPartsOfField: false,\r\n  fields: [...DebugFields],\r\n}\r\n\r\n/**\r\n * Each instance is responsible for a single entity.\r\n */\r\n@Injectable()\r\nexport class FieldsSettingsConstantsService {\r\n\r\n  log = classLog({FieldsSettingsConstantsService}, logSpecs);\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private inputTypeSvc: InputTypeService,\r\n  ) { }\r\n\r\n  #fieldSettingsHelper = new FieldsSettingsHelpers(this.log.name);\r\n\r\n  init(\r\n    itemForIds: EavItem,\r\n    contentType: EavContentType,\r\n    entityReaderCurrent: Signal<EntityReader>,\r\n    labelReaderCurrent: Signal<EntityReader>,\r\n    fieldsSettingsSvc: FieldsSettingsService,\r\n  ): this {\r\n    this.#item = itemForIds;\r\n    this.#contentType = contentType;\r\n    this.#itemFieldVisibility = new ItemFieldVisibility(itemForIds.Header);\r\n    this.#entityReaderCurrent = entityReaderCurrent;\r\n    this.#labelReaderCurrent = labelReaderCurrent;\r\n    this.#fieldSettingsSvc = fieldsSettingsSvc;\r\n    return this;\r\n  }\r\n\r\n  #item: EavItem;\r\n  #itemFieldVisibility: ItemFieldVisibility;\r\n  #entityReaderCurrent: Signal<EntityReader>;\r\n  #labelReaderCurrent: Signal<EntityReader>;\r\n  #contentType: EavContentType;\r\n  #fieldSettingsSvc: FieldsSettingsService;\r\n\r\n  public stableDataOfLanguage() {\r\n    const guid = this.#item.Entity.Guid;\r\n    const id = this.#item.Entity.Id;\r\n    const typeNameId = this.#contentType.Id;\r\n    const constParts = this.#constantPartsOfField(guid, id, typeNameId);\r\n\r\n    return computedObj('stableDataOfLanguage',\r\n      () => this.#stablePartsOfLanguage(this.#entityReaderCurrent(), this.#labelReaderCurrent(), constParts)\r\n    );\r\n  }\r\n\r\n  #stablePartsOfLanguage(reader: EntityReader, labelReader: EntityReader, fieldConstants: FieldConstants[]) {\r\n    const contentType = this.#contentType;\r\n    const l = this.log.fnIf('stablePartsOfLanguage', { contentType, entityReader: reader });\r\n\r\n    const constPartOfLanguage = contentType.Attributes.map(attr => {\r\n      const fieldName = attr.Name;\r\n      const lInner = this.log.fnIfInList('stablePartOfField', 'fields', fieldName, { fieldName });\r\n\r\n      // Input Type config in the current language\r\n      const inputType = this.inputTypeSvc.get(attr.InputType);\r\n\r\n      // Construct the constants with settings and everything\r\n      // using the EntityReader with the current language\r\n      const merged = reader.flatten<FieldSettings>(attr.Metadata);\r\n\r\n      // If the user specified a preferred language for labels, use that\r\n      if (labelReader.current !== reader.current) {\r\n        const labelMerged = labelReader.flatten<FieldSettings>(attr.Metadata);\r\n        merged.Name = labelMerged.Name ?? merged.Name;\r\n        merged.Placeholder = labelMerged.Placeholder ?? merged.Placeholder;\r\n        merged.Notes = labelMerged.Notes ?? merged.Notes;\r\n      }\r\n\r\n      // Also integrate the generic (custom JSON injected field-settings)\r\n      const withGeneric = this.#fieldSettingsHelper.mergeGenericSettings(fieldName, merged);\r\n\r\n      // Sometimes the metadata doesn't have the input type (empty string), so we'll add the attribute.InputType just in case...\r\n      withGeneric.InputType = attr.InputType;\r\n      withGeneric.VisibleDisabled = this.#itemFieldVisibility.isVisibleDisabled(attr.Name);\r\n      const settingsInitial = this.#fieldSettingsHelper.getDefaultSettings(withGeneric);\r\n      const constantFieldParts: FieldConstantsOfLanguage = {\r\n        ...fieldConstants.find(c => c.fieldName === attr.Name),\r\n        settingsInitial,\r\n        inputTypeConfiguration: inputType,\r\n        language: reader.current,\r\n      };\r\n\r\n      return lInner.r(constantFieldParts);\r\n    });\r\n\r\n    const constPartsWithGroupVisibility = this.#itemFieldVisibility.makeParentGroupsVisible(constPartOfLanguage);\r\n\r\n    return l.r(constPartsWithGroupVisibility);\r\n  }\r\n\r\n  #constantPartsOfField(entityGuid: string, entityId: number, contentTypeNameId: string): FieldConstants[] {\r\n    const contentType = this.#contentType;\r\n    const l = this.log.fnIf('constantPartsOfField', { entityGuid, entityId, contentTypeNameId });\r\n    // Get the form languages - but we only need default & initial, so we don't have to observe\r\n    const language = this.formConfig.language();\r\n    \r\n    // When merging the \"constant\" metadata, the primary language must be the initial language, not the current\r\n    // as that contains all the relevant settings which should not be translated\r\n    const mdMerger = new EntityReader(language.initial, language.primary);\r\n\r\n    const allPickers = this.#fieldSettingsSvc.pickerData;\r\n    const eavConfig = this.formConfig.config;\r\n\r\n    l.a('shared across fields', { entityGuid, entityId, contentTypeNameId, language, allPickers });\r\n\r\n    const constFieldParts = contentType.Attributes.map((attr, index) => {\r\n      const fieldName = attr.Name;\r\n      const lInner = this.log.fnIfInList('constantFieldParts', 'fields', fieldName, { fieldName, index });\r\n      // metadata in the initial language with all the core settings - just for initialDisabled!\r\n      const metadata = mdMerger.flatten<FieldSettings>(attr.Metadata);\r\n      const initialSettings = this.#fieldSettingsHelper.getDefaultSettings(metadata);\r\n      const initialDisabled = initialSettings.Disabled ?? false;\r\n\r\n      const inputTypeSpecs = this.inputTypeSvc.getSpecs(attr);\r\n\r\n      lInner.a('details', { fieldName, contentType, language, attr, initialSettings, inputTypeSpecs });\r\n\r\n      const logic = FieldLogicManager.singleton().get(attr.InputType);\r\n\r\n      // Construct the constants / unchanging aspects of the field, no matter what language\r\n      const constants: FieldConstants = {\r\n        entityGuid,\r\n        entityId,\r\n        contentTypeNameId,\r\n        fieldName,\r\n        index,\r\n        dropzonePreviewsClass: `dropzone-previews-${eavConfig.formId}-${index}`,\r\n        initialDisabled,\r\n        inputTypeSpecs,\r\n        isLastInGroup: this.#fieldSettingsHelper.isLastInGroup(contentType, attr),\r\n        type: attr.Type,\r\n        logic,\r\n        pickerData: () => allPickers[fieldName] ?? null,\r\n      };\r\n\r\n      return lInner.r(constants);\r\n    });\r\n    return l.r(constFieldParts);\r\n  }\r\n\r\n}\r\n","import { Signal } from '@angular/core';\r\nimport { AbstractControl, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { CustomJsonEditor } from 'projects/edit-types/src/FieldSettings-CustomJsonEditor';\r\nimport { FieldSettingsNumber } from 'projects/edit-types/src/FieldSettings-Number';\r\nimport { FieldSettingsPicker } from 'projects/edit-types/src/FieldSettings-Pickers';\r\nimport { Of } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsOptionsWip, FieldSettingsSharedSeparator } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { AdamControl } from '../../fields/basic/hyperlink-library/hyperlink-library.models';\r\nimport { PickerData } from '../../fields/picker/picker-data';\r\nimport { convertValueToArray } from '../../fields/picker/picker.helpers';\r\nimport { FieldProps } from '../../state/fields-configs.model';\r\nimport { ItemFieldVisibility } from '../../state/item-field-visibility';\r\n\r\n\r\n/** Slightly enhanced standard Abstract Control with additional warnings */\r\nexport interface AbstractControlPro extends AbstractControl {\r\n  /**\r\n   * Object containing various warnings (or the object can also be null)\r\n   */\r\n  _warning?: ValidationErrors;\r\n}\r\n\r\n/** Validators here are copied from https://github.com/angular/angular/blob/master/packages/forms/src/validators.ts */\r\nexport class ValidationHelpers {\r\n\r\n  static isRequired(settings: FieldSettings): boolean {\r\n    // hidden field can't be required\r\n    return this.#shouldIgnoreValidators(settings) ? false : settings.Required;\r\n  }\r\n\r\n  public static getValidators(specs: ValidationHelperSpecs, inputType: Of<typeof InputTypeCatalog>): ValidatorFn[] {\r\n    // TODO: merge all validators in a single function? Should be faster\r\n    const validators: ValidatorFn[] = [\r\n      inputType !== InputTypeCatalog.HyperlinkLibrary\r\n        ? this.#required(specs)\r\n        : this.#requiredAdam(specs),\r\n      this.#regEx(specs),\r\n      this.#decimals(specs),\r\n      this.#numberMin(specs),\r\n      this.#numberMax(specs),\r\n      this.#listMin(specs),\r\n      this.#listMax(specs),\r\n      this.#formulaValidate(specs),\r\n    ];\r\n    if (inputType === InputTypeCatalog.CustomJsonEditor)\r\n      validators.push(this.#jsonValidator(specs));\r\n    return validators;\r\n  }\r\n\r\n  static #ensureWarningsAndGetSettingsIfNoIgnore(control: AbstractControl, specs: ValidationHelperSpecs) {\r\n    const settings = specs.settings();\r\n    if (this.#shouldIgnoreValidators(settings)) return null;\r\n    return settings;\r\n  }\r\n\r\n  static #required(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      // if (Array.isArray(control.value))\r\n      //   console.log('2dm #required', control.value)\r\n      if (s == null || !s.valueRequired) return null;\r\n      return Validators.required(control);\r\n    };\r\n  }\r\n\r\n  static #requiredAdam(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s == null || !s.valueRequired) return null;\r\n\r\n      return (control as AdamControl).adamItems === 0 ? { required: true } : null;\r\n    };\r\n  }\r\n\r\n  static #regEx(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s == null || !s.ValidationRegExJavaScript) return null;\r\n\r\n      return Validators.pattern(s.ValidationRegExJavaScript)(control);\r\n    };\r\n  }\r\n\r\n  static #decimals(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s?.Decimals == null || s.Decimals < 0) return null;\r\n      if (control.value == null) return null;\r\n\r\n      const matchString = s.Decimals === 0 ? `^-?[0-9]+$` : `^-?[0-9]+(\\.[0-9]{1,${s.Decimals}})?$`;\r\n      const matches = (control.value as number).toString().match(matchString);\r\n      return !matches ? { decimals: true } : null;\r\n    };\r\n  }\r\n\r\n  static #numberMin(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s?.Min == null) return null;\r\n\r\n      return Validators.min(s.Min)(control);\r\n    };\r\n  }\r\n\r\n  static #numberMax(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s?.Max == null) return null;\r\n\r\n      return Validators.max(s.Max)(control);\r\n    };\r\n  }\r\n\r\n  static #listMin(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s == null || s.AllowMultiMin == 0 || s.AllowMultiMin == undefined) return null;\r\n      return countValues(control, specs, s) < s.AllowMultiMin ? { minNoItems: s.AllowMultiMin } : null;\r\n    };\r\n  }\r\n\r\n  static #listMax(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const s = this.#ensureWarningsAndGetSettingsIfNoIgnore(control, specs);\r\n      if (s == null || s.AllowMultiMax == 0 || s.AllowMultiMax == undefined) return null;\r\n      return countValues(control, specs, s) > s.AllowMultiMax ? { maxNoItems: s.AllowMultiMax } : null;\r\n    };\r\n  }\r\n\r\n  static #jsonValidator(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControlPro): ValidationErrors | null => {\r\n      const settings = specs.settings();\r\n      let error: boolean;\r\n      let warning: boolean;\r\n      const jsonMode = (settings as FieldSettings & CustomJsonEditor).JsonValidation;\r\n\r\n      if (this.#shouldIgnoreValidators(settings) || jsonMode === 'none' || !control.value) {\r\n        error = false;\r\n        warning = false;\r\n      } else {\r\n        try {\r\n          JSON.parse(control.value);\r\n          error = false;\r\n          warning = false;\r\n        } catch {\r\n          if (jsonMode === 'strict') {\r\n            error = true;\r\n            warning = false;\r\n          } else if (jsonMode === 'light') {\r\n            error = false;\r\n            warning = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      control._warning = warning ? { jsonWarning: true } : null;\r\n      return error ? { jsonError: true } : null;\r\n    };\r\n  }\r\n\r\n  static #formulaValidate(specs: ValidationHelperSpecs): ValidatorFn {\r\n    return (control: AbstractControlPro): ValidationErrors | null => {\r\n      const formulaValidation = specs.props().formulaValidation;\r\n\r\n      const { error, warning } = (() => {\r\n        if (this.#shouldIgnoreValidators(specs.settings()) || formulaValidation == null)\r\n          return { error: false, warning: false };\r\n        if (formulaValidation.severity === 'error')\r\n          return { error: true, warning: false };\r\n        if (formulaValidation.severity === 'warning')\r\n          return { error: false, warning: true };\r\n        return { error: false, warning: false };\r\n      })();\r\n\r\n      control._warning = warning ? { formulaWarning: true, formulaMessage: formulaValidation.message } : null;\r\n      return error ? { formulaError: true, formulaMessage: formulaValidation.message } : null;\r\n    };\r\n  }\r\n\r\n  /** Hidden fields can't have validators */\r\n  static #shouldIgnoreValidators(settings: FieldSettings): boolean {\r\n    return !ItemFieldVisibility.mergedVisible(settings);\r\n  }\r\n}\r\n\r\nfunction countValues(control: AbstractControl, specs: ValidationHelperSpecs, s: FieldSettings & FieldSettingsOptionsWip & FieldSettingsSharedSeparator): number {\r\n  // If it is an array, return the length right away, since we don't need additional processing\r\n  if (Array.isArray(control.value))\r\n    return control.value.length;\r\n\r\n  // Picker Data - can be null in the first few cycles since it may not yet be initialized\r\n  const pd = specs.pickerData;\r\n  if (pd == null)\r\n    return convertValueToArray(control.value, s.Separator, false).length;\r\n\r\n  // PickerData SelectedAll will also contain an empty selected item if the field allows empty values\r\n  return pd.selectedAll().length;\r\n}\r\n\r\n\r\nexport class ValidationHelperSpecs {\r\n  constructor(\r\n    /** The Field Name */\r\n    public fieldName: string,\r\n    /** The Input Type */\r\n    public inputType: Of<typeof InputTypeCatalog>,\r\n    /** The settings, but must be re-cast so the system knows it has more properties */\r\n    settings: Signal<FieldSettings>,\r\n    /** The field properties an updated on every formula cycle */\r\n    public props: Signal<FieldProps>,\r\n    /** Delayed get pickers data */\r\n    private pickersGet: () => Record<string, PickerData>,\r\n  ) {\r\n    this.settings = settings as Signal<FieldSettings & FieldSettingsSharedSeparator & CustomJsonEditor & FieldSettingsNumber & FieldSettingsPicker & FieldSettingsOptionsWip>;\r\n  }\r\n\r\n  /** The settings cast in a way that it should have all relevant properties */\r\n  settings: Signal<FieldSettings & FieldSettingsSharedSeparator & CustomJsonEditor & FieldSettingsNumber & FieldSettingsPicker & FieldSettingsOptionsWip>;\r\n\r\n  /** Get the pickers for this field */\r\n  get pickerData(): PickerData {\r\n    return this.pickersGet()?.[this.fieldName] ?? null;\r\n  }\r\n}","export const MetadataDecorators = {\r\n  LanguagesDecorator: 'LanguagesDecorator',\r\n  SaveEmptyDecorator: 'SaveEmptyDecorator',\r\n} as const;\r\n","import { Signal } from '@angular/core';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../shared/logging';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldLogicTools } from '../fields/logic/field-logic-tools';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { EavContentTypeAttribute, EavEntity, EavField } from '../shared/models/eav';\r\nimport { ValidationHelpers } from '../shared/validation/validation.helpers';\r\nimport { FieldConstantsOfLanguage } from './fields-configs.model';\r\nimport { MetadataDecorators } from './metadata-decorators.constants';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  correctSettingsAfterChanges: true,\r\n  schemaDisablesTranslation: false,\r\n  getDisabledBecauseTranslations: false,\r\n  fields: [...DebugFields], // or '*' for all\r\n};\r\n\r\nexport class FieldSettingsUpdateHelperFactory {\r\n  log = classLog({FieldSettingsUpdateHelperFactory});\r\n  constructor(\r\n    // General & Content Type Info\r\n    private contentTypeMetadata: EavEntity[],\r\n    private language: FormLanguage,\r\n    /** set of configuration for running field logic - shared */\r\n    private fieldLogicTools: FieldLogicTools,\r\n    /** Info that the form is read-only */\r\n    private formReadOnly: boolean,\r\n    private slotIsEmpty: Signal<boolean>,\r\n  ) { }\r\n\r\n  create(\r\n    fieldName: string,\r\n    attribute: EavContentTypeAttribute,\r\n    constantFieldPart: FieldConstantsOfLanguage,\r\n    attributeValues: EavField<any>,\r\n  ): FieldSettingsUpdateHelper {\r\n    return new FieldSettingsUpdateHelper(\r\n      fieldName,\r\n      this.contentTypeMetadata,\r\n      this.language,\r\n      this.fieldLogicTools,\r\n      this.formReadOnly,\r\n      this.slotIsEmpty,\r\n      attribute,\r\n      constantFieldPart,\r\n      attributeValues,\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Special helper to check if a field should remain disabled because of various language settings.\r\n * \r\n * Only used in formulas, after running formulas which modify settings.\r\n * \r\n * Each one is specific to a certain field, so you must create another object for every field you check.\r\n */\r\nexport class FieldSettingsUpdateHelper {\r\n\r\n  log = classLog({FieldSettingsUpdateHelper}, logSpecs);\r\n\r\n  constructor(\r\n    private fieldName: string,\r\n    // General & Content Type Info\r\n    private contentTypeMetadata: EavEntity[],\r\n    private language: FormLanguage,\r\n    /** set of configuration for running field logic - shared */\r\n    private fieldLogicTools: FieldLogicTools,\r\n    /** Info that the form is read-only */\r\n    private formReadOnly: boolean,\r\n    private formSlotIsEmpty: Signal<boolean>,\r\n\r\n    // Field specific info\r\n    private attribute: EavContentTypeAttribute,\r\n    private constantFieldPart: FieldConstantsOfLanguage,\r\n    private attributeValues: EavField<any>,\r\n  ) { }\r\n\r\n  /**\r\n   * Used for verifying and updating new settings.\r\n   * @param settings Latest/newest settings\r\n   * @param fieldValue\r\n   * @returns Corrected settings\r\n   */\r\n  correctSettingsAfterChanges(settings: FieldSettings, fieldValue: FieldValue): FieldSettings {\r\n    const l = this.log.fnIfInList('correctSettingsAfterChanges', 'fields', this.fieldName, () => ({ settings, fieldValue }));\r\n\r\n    const constantFieldPart = this.constantFieldPart;\r\n    const slotIsEmpty = this.formSlotIsEmpty();\r\n\r\n    // Why are we doing this?\r\n    settings.Name = settings.Name || this.attribute.Name;\r\n\r\n    settings.valueRequired = ValidationHelpers.isRequired(settings);\r\n    const disableTranslation = this.#schemaDisablesTranslation();\r\n\r\n    settings.DisableTranslation = slotIsEmpty || disableTranslation;\r\n    settings.uiDisabledInThisLanguage = this.#getDisabledBecauseTranslations(settings.DisableTranslation);\r\n\r\n    settings.uiDisabledForced = slotIsEmpty || settings.uiDisabledInThisLanguage || this.formReadOnly;\r\n\r\n    settings.uiDisabled = settings.uiDisabledForced || settings.Disabled;\r\n\r\n    settings.DisableAutoTranslation = constantFieldPart.settingsInitial.DisableAutoTranslation\r\n      || settings.DisableTranslation;\r\n\r\n    // Correct these fresh settings with FieldLogics of this field\r\n    const fixed = constantFieldPart.logic?.update({ fieldName: this.fieldName, settings: settings, value: fieldValue, tools: this.fieldLogicTools }) ?? settings;\r\n\r\n    return l.r(fixed);\r\n  }\r\n\r\n\r\n  /** Find if DisableTranslation is true in any setting and in any language */\r\n  #schemaDisablesTranslation(): boolean {\r\n    const l = this.log.fnIfInList('schemaDisablesTranslation', 'fields', this.fieldName);\r\n    const contentTypeMetadata = this.contentTypeMetadata;\r\n    const inputType = this.constantFieldPart.inputTypeConfiguration;\r\n    const attributeValues = this.attributeValues;\r\n    const attributeMetadata = this.attribute.Metadata;\r\n\r\n    // Disable translation if not allowed by the ContentType.\r\n    // This is configured using a LanguagesDecorator in ContentType.\r\n    const languagesDecorator = contentTypeMetadata.find(m => m.Type.Name === MetadataDecorators.LanguagesDecorator);\r\n    if (languagesDecorator?.Attributes.Enabled?.Values.some(v => v.Value === false))\r\n      return true;\r\n\r\n    // Disable translation if the input type says it can't be translated (e.g. Entity).\r\n    if (inputType?.DisableI18n)\r\n      return true;\r\n\r\n    // TODO: CHECK if this should be here - it's repeated below\r\n    if (!new FieldReader(attributeValues, this.language).hasPrimary)\r\n      return true;\r\n\r\n    // Disable translation if the Attribute Configuration says so.\r\n    // DisableTranslation is true in any language in @All, @String, @string-default, etc...\r\n    for (const attrMd of attributeMetadata ?? [])\r\n      if (attrMd.Attributes.DisableTranslation?.Values.some(v => v.Value === true))\r\n        return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  #getDisabledBecauseTranslations(disableTranslation: boolean): boolean {\r\n    const l = this.log.fnIfInList('getDisabledBecauseTranslations', 'fields', this.fieldName);\r\n    const attributeValues = this.attributeValues;\r\n    const language = this.language;\r\n    // On primary edit is never disabled by translations\r\n    // This is the only one we check \r\n    if (language.current === language.primary)\r\n      return l.r(false, 'enabled, primary language');\r\n\r\n    const fieldReader = new FieldReader(attributeValues, language);\r\n    // If translations are disabled, then it's disabled\r\n    // Only check this _after_ checking if we're in the primary language\r\n    if (disableTranslation)\r\n      return l.r(true, 'disabled, disableTranslation');\r\n    // If no value on primary, then it's disabled\r\n    if (!fieldReader.hasPrimary)\r\n      return l.r(true, 'disabled, no value on primary');\r\n    if (fieldReader.hasEditableValues)\r\n      return l.r(false, 'disabled, has editable value');\r\n    if (fieldReader.hasCurrentReadonly)\r\n      return l.r(true, 'enabled, has readonly value');\r\n    return l.r(true, 'enabled, no rule applies');\r\n  }\r\n}\r\n","import { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { NameValuePair } from '../formulas/results/formula-results.models';\r\nimport { ItemValuesOfLanguage } from './item-values-of-language.model';\r\nimport { Signal } from '@angular/core';\r\nimport { EavContentType } from '../shared/models/eav/eav-content-type';\r\nimport { FieldValueHelpers } from '../shared/helpers/field-value.helpers';\r\nimport { FieldsPropsEngineCycle } from './fields-properties-engine-cycle';\r\nimport { classLog } from '../../shared/logging';\r\n\r\nexport class FieldsValuesModifiedHelper {\r\n  private log = classLog({FieldsValuesModifiedHelper});\r\n\r\n  constructor(\r\n    private contentType: Signal<EavContentType>,\r\n    private slotIsEmpty: Signal<boolean>,\r\n  ) { }\r\n\r\n\r\n  // NEW WIP\r\n  getValueUpdates(\r\n    cycle: FieldsPropsEngineCycle,\r\n    valueUpdatesFromSideEffects: NameValuePair[],\r\n    valueUpdates: ItemValuesOfLanguage,\r\n    originalValues?: ItemValuesOfLanguage\r\n  ): ItemValuesOfLanguage {\r\n    const contentType = this.contentType();\r\n    const slotIsEmpty = this.slotIsEmpty();\r\n\r\n    originalValues ??= cycle.values;\r\n    const fieldsProps = cycle.fieldProps;\r\n    const l = this.log.fn('getValueUpdates', { contentType, originalValues, fieldsProps, valueUpdates, valueUpdatesFromSideEffects, slotIsEmpty });\r\n\r\n    if (slotIsEmpty)\r\n      return l.r({}, 'Slot is empty, exit early');\r\n\r\n    const prep = contentType.Attributes\r\n      .map(attr => ({\r\n        name: attr.Name,\r\n        original: originalValues[attr.Name],\r\n      }))\r\n      // Only skip force disabled, not all disabled. If it's only disabled because the user shouldn't interact with it, we still want to update it.\r\n      .filter(p => p.original !== undefined && !fieldsProps[p.name]?.settings.uiDisabledForced)\r\n      .map(p => ({\r\n        ...p,\r\n        value: this.#findBestValue(p.name, valueUpdatesFromSideEffects, valueUpdates)\r\n      }))\r\n      .filter(p => p.value !== undefined && !FieldValueHelpers.fieldValuesAreEqual(p.original, p.value))\r\n\r\n\r\n    // Convert to object\r\n    const changes = prep.reduce((acc, p) => { acc[p.name] = p.value; return acc; }, {} as ItemValuesOfLanguage);\r\n    return l.rSilent(changes);\r\n  }\r\n\r\n  #findBestValue(fieldName: string, fieldsUpdates: NameValuePair[], valueUpdates: ItemValuesOfLanguage): FieldValue {\r\n    // First check if a formula had given a value as a side-effect of it's own calculation\r\n    // This is prioritized in case we have both,\r\n    // because it's very rare and it's usually something which resets another field\r\n    // In case we get many, we'll just keep the last one.\r\n    const sideEffects = fieldsUpdates.filter(f => f.name === fieldName);\r\n    const valSideEffect = sideEffects[sideEffects.length - 1]?.value; // findLast\r\n    if (valSideEffect != null)\r\n      return valSideEffect;\r\n\r\n    // If no value from formula, check if the field has a new value from a formula\r\n    return valueUpdates[fieldName];\r\n  }\r\n\r\n}","import { inject, Injectable, Signal } from '@angular/core';\r\nimport { transient } from '../../../../../core/transient';\r\nimport { classLog } from '../../shared/logging';\r\nimport { GlobalConfigService } from '../../shared/services/global-config.service';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { FieldLogicTools } from '../fields/logic/field-logic-tools';\r\nimport { PickerData } from '../fields/picker/picker-data';\r\nimport { PickerDataFactory } from '../fields/picker/picker-data.factory';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { FormsStateService } from '../form/forms-state.service';\r\nimport { FormulaEngine } from '../formulas/formula-engine';\r\nimport { FormulaPromiseHandler } from '../formulas/promise/formula-promise-handler';\r\nimport { ContentTypeItemService } from '../shared/content-types/content-type-item.service';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { EavContentType, EavEntityAttributes, EavItem } from '../shared/models/eav';\r\nimport { FieldConstantsOfLanguage, FieldProps } from './fields-configs.model';\r\nimport { FieldsPropsEngineCycle } from './fields-properties-engine-cycle';\r\nimport { FieldsSettingsConstantsService } from './fields-settings-constants.service';\r\nimport { FieldSettingsUpdateHelperFactory } from './fields-settings-update.helpers';\r\nimport { FieldsSettingsService } from './fields-settings.service';\r\nimport { FieldsSignalsHelper } from './fields-signals.helper';\r\nimport { FieldsValuesModifiedHelper } from './fields-values-modified.helper';\r\nimport { ItemValuesOfLanguage } from './item-values-of-language.model';\r\nimport { ItemService } from './item.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  init: true,\r\n  getPickers: true,\r\n}\r\n/**\r\n * Assistant helper to process / recalculate the value of fields and their settings.\r\n * \r\n */\r\n@Injectable()\r\nexport class FieldsPropsEngine {\r\n  private log = classLog({FieldsPropsEngine}, logSpecs);\r\n\r\n  // Shared / inherited services\r\n  #formConfig = inject(FormConfigService);\r\n  #globalConfigService = inject(GlobalConfigService);\r\n  #formsStateService = inject(FormsStateService);\r\n  #contentTypeItemService = inject(ContentTypeItemService);\r\n  #itemService = inject(ItemService);\r\n\r\n  // Transient services for this instance only\r\n  #constantsService = transient(FieldsSettingsConstantsService);\r\n  #pickerFac = transient(PickerDataFactory);\r\n  public formulaEngine = transient(FormulaEngine);\r\n  public formulaPromises = transient(FormulaPromiseHandler);\r\n  \r\n  /** The item we're working on - needed by the formula engine */\r\n  public item: EavItem;\r\n\r\n  public modifiedChecker: FieldsValuesModifiedHelper;\r\n  #fieldsValues: FieldsSignalsHelper;\r\n\r\n  constructor() { }\r\n\r\n  /** Setup everything which won't change throughout cycles */\r\n  init(\r\n    fss: FieldsSettingsService,\r\n    entityGuid: string,\r\n    item: EavItem,\r\n    contentType: Signal<EavContentType>,\r\n    reader: Signal<EntityReader>,\r\n    labelReader: Signal<EntityReader>,\r\n    fieldsValues: FieldsSignalsHelper,\r\n    forceDebug: boolean | null = null\r\n  ): this {\r\n    this.log.extendName(`[${entityGuid.substring(0, 8)}]`);\r\n    const l = this.log.fnIf('init', { entityGuid, item, contentType, reader, forceDebug });\r\n    if (forceDebug != null) this.log.forceEnable(forceDebug);\r\n\r\n    this.item = item;\r\n    this.languages = reader();\r\n    this.#fieldsValues = fieldsValues;\r\n\r\n    const slotIsEmpty = this.#itemService.slotIsEmpty(entityGuid);\r\n    const ct = contentType();\r\n\r\n    this.pickerData = this.#pickerFac.createPickersForAttributes(ct.Attributes);\r\n    l.a('Pickers created', this.pickerData);\r\n\r\n    // Constant field parts which don't ever change.\r\n    // They can only be created once the inputTypes and contentTypes are available\r\n    this.#fieldLangConstants = this.#constantsService\r\n      .init(item, ct, reader, labelReader, fss)\r\n      .stableDataOfLanguage();\r\n\r\n    this.#updateHelper = this.#getPreparedParts(reader, ct, slotIsEmpty);\r\n\r\n    this.modifiedChecker = new FieldsValuesModifiedHelper(contentType, slotIsEmpty);\r\n    this.formulaPromises.init(entityGuid, contentType, fss, this.modifiedChecker);\r\n    this.formulaEngine.init(entityGuid, item.Header, fss, this.formulaPromises, ct, fss.contentTypeSettings()._itemTitle);\r\n\r\n    this.#itemAttributes = this.#itemService.itemAttributesSignal(entityGuid);\r\n    return this;\r\n  }\r\n\r\n  #updateHelper: Signal<FieldSettingsUpdateHelperFactory>;\r\n\r\n  /**\r\n   * Constant field parts which don't ever change.\r\n   * They can only be created once the inputTypes and contentTypes are available\r\n   */\r\n  #fieldLangConstants: Signal<FieldConstantsOfLanguage[]>;\r\n\r\n  #itemAttributes: Signal<EavEntityAttributes>;\r\n\r\n  pickerData: Record<string, PickerData>;\r\n\r\n  /**\r\n   * The languages used in the form, for retrieving various things during the calculation.\r\n   */\r\n  languages: FormLanguage;\r\n\r\n  /**\r\n   * The current cycle of updating the properties.\r\n   * Will be reset every time a new round starts.\r\n   */\r\n  cycle: FieldsPropsEngineCycle;\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {ItemValuesOfLanguage} initialValues The values of the form - initialized here and to be updated until complete\r\n   * @param {Record<string, FieldProps>} fieldProps The field props at start and during the calculation cycles (may be updated until complete)\r\n   * @return {*}  {PropsUpdate}\r\n   * @memberof FieldsPropsEngine\r\n   */\r\n  public getLatestSettingsAndValues(fieldProps: Record<string, FieldProps>): Record<string, FieldProps> {  \r\n    const l = this.log.fn('getLatestSettingsAndValues');\r\n\r\n    const initialValues = this.#fieldsValues.values();\r\n\r\n    this.languages = this.#formConfig.language();\r\n\r\n    // These should only be accessed here, so the signal is only depended on once!\r\n    // All this should never change during the cycle\r\n    const attributes = this.#itemAttributes();\r\n    const updateHelper = this.#updateHelper();\r\n    const fieldLangConstants = this.#fieldLangConstants();\r\n\r\n    this.cycle = new FieldsPropsEngineCycle(this, initialValues, fieldProps, attributes, updateHelper, fieldLangConstants);\r\n    const cycleResult = this.cycle.getCycleSettingsAndValues();\r\n\r\n    // figure out the final changes to propagate\r\n    // const finalChanges = this.modifiedChecker.getValueUpdates(this.cycle, [], cycleResult.valueChanges, initialValues);\r\n\r\n    return cycleResult.props;\r\n  }\r\n\r\n  /**\r\n   * Prepare / build FieldLogicTools for use in all the formulas / field settings updates\r\n   */\r\n  #getPreparedParts(readerSig: Signal<EntityReader>, contentType: EavContentType, slotIsEmpty: Signal<boolean>): Signal<FieldSettingsUpdateHelperFactory> {\r\n    // Prepare / build FieldLogicTools for use in all the formulas / field settings updates\r\n    const prepared = computedObj('prepared-parts', () => {\r\n      const reader = readerSig(); // must be as a signal, so a language change triggers an update\r\n      const languages = reader;\r\n      const isDebug = this.#globalConfigService.isDebug();\r\n      const isReadOnly = this.#formsStateService.readOnly();\r\n\r\n        // Logic Tools are needed when checking for settings defaults etc.\r\n        const logicTools: FieldLogicTools = {\r\n          eavConfig: this.#formConfig.config,\r\n          reader: reader,\r\n          debug: isDebug,\r\n          contentTypeItemSvc: this.#contentTypeItemService,\r\n        };\r\n        // This factory will generate helpers to validate settings updates\r\n        const updHelperFactory = new FieldSettingsUpdateHelperFactory(\r\n          contentType.Metadata,\r\n          languages, // for languages current, default, initial\r\n          logicTools,\r\n          isReadOnly.isReadOnly,\r\n          slotIsEmpty,\r\n        );\r\n        return updHelperFactory;\r\n    });\r\n    return prepared;\r\n  }\r\n\r\n}\r\n","import { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { Signal } from '@angular/core';\r\nimport { FieldProps } from './fields-configs.model';\r\nimport { classLog } from '../../shared/logging';\r\n\r\n/**\r\n * Manage \"manual\" / forced updates of fields properties\r\n */\r\nexport class FieldsPropertiesUpdates {\r\n  \r\n  log = classLog({FieldsPropertiesUpdates});\r\n\r\n  constructor(private entityGuid: string) {\r\n    this.log.extendName(`[${entityGuid.substring(0, 8)}]`);\r\n  }\r\n\r\n  fieldPropsMixins: Record<string, Partial<FieldSettings>> = {};\r\n\r\n  hasChanges(): boolean {\r\n    return Object.keys(this.fieldPropsMixins).length > 0;\r\n  }\r\n\r\n  /**\r\n   * Modify a setting, ATM just to set collapsed / dialog-open states.\r\n   * Note that this change won't fire the formulas - which may not be correct.\r\n   */\r\n  updateSetting(fieldName: string, update: Partial<FieldSettings>, source: string, fieldsProps: Signal<Record<string, FieldProps>>): void {\r\n    const queueWasEmpty = Object.keys(this.fieldPropsMixins).length === 0;\r\n    const l = this.log.fn('updateSetting', { source, fieldName, update, queueWasEmpty });\r\n    // Test if the update is a change, or if it's the same as the current value\r\n    const before = fieldsProps()[fieldName].settings;\r\n    const after = { ...before, ...update };\r\n    if (isEqual(before, after))\r\n      return l.end(`no change; entityGuid: ${this.entityGuid}; fieldName: ${fieldName}`);\r\n    // Add change to queue, but mix with previous changes in queue.\r\n    const prev = this.fieldPropsMixins[fieldName] ?? {};\r\n    this.fieldPropsMixins[fieldName] = { ...prev, ...update };\r\n    \r\n    l.end('added to queue', { before, after, update });\r\n  }\r\n\r\n  mergeMixins(before: Record<string, FieldProps>): Record<string, FieldProps> {\r\n    const l = this.log.fn('mergeMixins', { before, mixins: this.fieldPropsMixins });\r\n    const mixins = this.fieldPropsMixins;\r\n    if (Object.keys(mixins).length === 0)\r\n      return before;\r\n\r\n    const final = Object.keys(mixins).reduce((acc, key) => {\r\n      const ofField = acc[key];\r\n      const update = mixins[key];\r\n      return {\r\n        ...acc,\r\n        [key]: {\r\n          ...ofField,\r\n          settings: { ...ofField.settings, ...update }\r\n        }\r\n      };\r\n    }, before);\r\n\r\n    this.fieldPropsMixins = {};\r\n    return l.r(final, `merged`);\r\n  }\r\n}","import { effect, Signal } from '@angular/core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { computedObj } from '../../shared/signals/signal.utilities';\r\nimport { PickerItem } from '../fields/picker/models/picker-item.model';\r\nimport { PickerData } from '../fields/picker/picker-data';\r\nimport { FieldProps } from './fields-configs.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  startSync: true,\r\n  filterRelevant: true,\r\n  transferPickerData: true,\r\n};\r\n\r\n/**\r\n * Simple helper in charge of updating the picker data in the updated/calculated field settings.\r\n */\r\nexport class FieldSettingsPickerUpdater {\r\n\r\n  log = classLog({FieldSettingsPickerUpdater}, logSpecs);\r\n\r\n  constructor() {} \r\n  \r\n  startSync(source: Signal<Record<string, FieldProps> | null>) {\r\n    const l = this.log.fnIf('startSync', { source });\r\n\r\n    // Only Options to transfer, with change detection on the signal to not fire the effect unnecessarily\r\n    const optsOnly = computedObj('optsOnly', () =>  this.#filterRelevant(source(), 'opts'));\r\n\r\n    // Only Selected to transfer, with change detection on the signal to not fire the effect unnecessarily\r\n    const selOnly = computedObj('selOnly', () => this.#filterRelevant(source(), 'sel'));\r\n\r\n    // Options-Transfer\r\n    effect(() => this.#transferPickerData(optsOnly(), 'opts'));\r\n\r\n    // Selected-Transfer\r\n    effect(() => this.#transferPickerData(selOnly(), 'sel'));\r\n\r\n    l.end();\r\n  }\r\n\r\n  #filterRelevant(update: Record<string, FieldProps>, part: 'opts' | 'sel'): DataToTransfer[] {\r\n    // Make sure we already have data.\r\n    if (!update) return [];\r\n\r\n    // Transfer picker data\r\n    // 1. find all fieldProps with picker data and transfer to pickerData\r\n    const toTransfer = Object.entries(update)\r\n      .filter(([_, v]) => v[part]?.list)\r\n      .map(([field, v]) => ({\r\n        field,\r\n        list: v[part].list,\r\n        pickerData: v.constants.pickerData\r\n      } as const));\r\n\r\n    const l = this.log.fnIf('filterRelevant', { count: toTransfer.length, toTransfer }, part);\r\n    return l.rSilent(toTransfer);\r\n  }\r\n\r\n  /** Transfer picker data */\r\n  #transferPickerData(update: DataToTransfer[], part: 'opts' | 'sel'): void {\r\n    if (!update.length) return;\r\n    const l = this.log.fnIf('transferPickerData', { count: update.length, toTransfer: update }, `${part}`);\r\n\r\n    for (const { field, list, pickerData } of update) {\r\n      l.a('Transfer', { field, list });\r\n      const pd = pickerData();\r\n      const target = part == 'opts' ? pd.optionsOverride : pd.selectedOverride;\r\n      target.set(list);\r\n    }\r\n  }\r\n\r\n}\r\n\r\ninterface DataToTransfer {\r\n  field: string,\r\n  list: PickerItem[],\r\n  pickerData: () => PickerData | null\r\n}","import arrayEach from './_arrayEach.js';\nimport baseCreate from './_baseCreate.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\nimport getPrototype from './_getPrototype.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isTypedArray from './isTypedArray.js';\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nexport default transform;\n","import { effect, Injectable, Signal } from '@angular/core';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { difference } from '../../shared/helpers/difference';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { computedObj, signalObj } from '../../shared/signals/signal.utilities';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { EavEntityAttributes } from '../shared/models/eav';\r\nimport { ItemService } from './item.service';\r\n\r\nconst logSpecs = {\r\n  logChanges: false,\r\n};\r\n\r\n@Injectable()\r\nexport class FieldsSignalsHelper {\r\n\r\n  log = classLog({FieldsSignalsHelper}, logSpecs);\r\n\r\n  constructor(private itemSvc: ItemService) {\r\n    if (this.log.specs.logChanges) {\r\n      const lChange = classLog('FieldValues');\r\n      lChange.a('will log value changes');\r\n      let before: Record<string, FieldValue> = {};\r\n      effect(() => {\r\n        const guid = this.#itemGuid();\r\n        if (!guid) return lChange.a('no guid');\r\n        const all = this.values();\r\n        const changes = difference(all, before);\r\n        before = all;\r\n        lChange.a(`changed on guid: ${guid}`, changes);\r\n      });\r\n    }\r\n  }\r\n\r\n  #reader: Signal<EntityReader>;\r\n  #itemGuid = signalObj<string>('itemGuid', null);\r\n\r\n  init(itemGuid: string, reader: Signal<EntityReader>): this {\r\n    this.#itemGuid.set(itemGuid);\r\n    this.#fieldValueSigCache = new ComputedCacheHelper(itemGuid);\r\n    this.#reader = reader;\r\n    const attributes = this.itemSvc.itemAttributesSignal(itemGuid);\r\n    if (attributes == null)\r\n      console.error('item-entity-attributes is null');\r\n\r\n    this.#attributesLazy.set(attributes);\r\n    return this;\r\n  }\r\n\r\n  #attributesLazy = signalObj<Signal<EavEntityAttributes>>('attributesLazy', null);\r\n\r\n  get values(): Signal<Record<string, FieldValue>> {\r\n    const lGet = this.log.fn('get-values', { itemGuid: this.#itemGuid });\r\n    if (this.#values != null)\r\n      return lGet.rSilent(this.#values, 'cached');\r\n\r\n    const sig = this.#createValuesSignal();\r\n    this.#values = sig;\r\n    return lGet.rSilent(this.#values, 'generated');\r\n  }\r\n  #values: Signal<Record<string, FieldValue>>;\r\n\r\n  #createValuesSignal() {\r\n    const sig = computedObj(`${this.#itemGuid().substring(0, 8)}-ALL`, () => {\r\n      const l = this.log.fn('values');\r\n\r\n      // Track dependencies early\r\n      const reader = this.#reader();\r\n      const attrSig = this.#attributesLazy();\r\n\r\n      if (attrSig == null)\r\n        return l.r({}, 'attributes is null');\r\n\r\n      const attributes = attrSig();\r\n      if (!attributes || Object.keys(attributes).length == 0)\r\n        return l.r({}, 'attributes is empty');\r\n\r\n      const values = reader.currentValues(attributes);\r\n      return values\r\n    });\r\n    return sig;\r\n  }\r\n\r\n\r\n  get(field: string): Signal<FieldValue> {\r\n    const l = this.log.fn('get', { field });\r\n    const sig = this.#fieldValueOrNullSignal(field);\r\n    return l.rSilent(sig);\r\n  }\r\n\r\n  #fieldValueSigCache: ComputedCacheHelper<string, FieldValue>;\r\n\r\n  #fieldValueOrNullSignal(fieldName: string): Signal<FieldValue> {\r\n    // TODO: REFACTOR - TO USE THE new value signal\r\n\r\n    const l = this.log.fn('#fieldValueOrNullSignal', { fieldName });\r\n    const sig = this.#fieldValueSigCache.getOrCreateWithInfo(fieldName, () => {\r\n      // Do we already have attributes?\r\n      const attrSig = this.#attributesLazy();\r\n      if (attrSig == null)\r\n        return null;\r\n\r\n      const attributes = attrSig();\r\n      if (!attributes || Object.keys(attributes).length == 0)\r\n        return null;\r\n\r\n      const attribute = attributes[fieldName];\r\n      const values = attribute?.Values;\r\n      if (values == null || values.length == 0)\r\n        return null;\r\n\r\n      const value = this.#reader().getBestValue(attribute);\r\n      return value as FieldValue;\r\n    });\r\n    return l.rSilent(sig.signal, `isNew: ${sig.isNew}`);\r\n  }\r\n\r\n}","import isEqual from 'lodash-es/isEqual';\r\nimport isObject from 'lodash-es/isObject';\r\nimport transform from 'lodash-es/transform';\r\n// https://gist.github.com/Yimiprod/7ee176597fef230d1451?permalink_comment_id=2569085\r\n\r\n/**\r\n * This code is licensed under the terms of the MIT license\r\n *\r\n * Deep diff between two object, using lodash\r\n * @param  {Object} object Object compared\r\n * @param  {Object} base   Object to compare with\r\n * @return {Object}        Return a new object who represent the diff\r\n */\r\nexport function difference(object: any, base: any) {\r\n  function changes(object: any, base: any) {\r\n    return transform(object, function (result: Record<string, any>, value, key) {\r\n      if (!isEqual(value, base[key])) {\r\n        result[key] = (isObject(value) && isObject(base[key])) ? changes(value, base[key]) : value;\r\n      }\r\n    });\r\n  }\r\n  return changes(object, base);\r\n}\r\n","import { computed, effect, inject, Injectable, signal, Signal, WritableSignal } from '@angular/core';\r\nimport { transient } from '../../../../../core';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../shared/logging';\r\nimport { UserLanguageService } from '../../shared/services/user-language.service';\r\nimport { ComputedAnalyzer } from '../../shared/signals/computed-analyzer';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { computedObj, signalObj } from '../../shared/signals/signal.utilities';\r\nimport { PickerData } from '../fields/picker/picker-data';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormLanguageService } from '../form/form-language.service';\r\nimport { TranslationState } from '../localization/translate-state.model';\r\nimport { ContentTypeService } from '../shared/content-types/content-type.service';\r\nimport { ContentTypeSettingsHelpers, EntityReader } from '../shared/helpers';\r\nimport { EavItem } from '../shared/models/eav';\r\nimport { FieldProps } from './fields-configs.model';\r\nimport { FieldsPropsEngine } from './fields-properties-engine';\r\nimport { FieldsPropertiesUpdates } from './fields-properties-updates';\r\nimport { FieldSettingsPickerUpdater } from './fields-settings-picker-updater';\r\nimport { FieldsSignalsHelper } from './fields-signals.helper';\r\nimport { ItemService } from './item.service';\r\n\r\nconst logSpecs = {\r\n  effectTransferPickerData: true,\r\n  regenerateProps: true,\r\n  // Debug only on the following content type\r\n  type: '', //'@String';\r\n  activateAnalyzer: false,\r\n}\r\n\r\nconst maxCyclesMs = 250;\r\nconst maxCycleRestartDelay = 500;\r\nconst maxCyclesPerTime = 10;\r\nconst maxCyclesWarning = \"Max cycles reached, stopping for this second\";\r\n\r\n/**\r\n * FieldsSettingsService is responsible for handling the settings, values and validations of fields.\r\n * Each instance is responsible for a single entity.\r\n */\r\n@Injectable()\r\nexport class FieldsSettingsService {\r\n\r\n  log = classLog({FieldsSettingsService}, logSpecs);\r\n\r\n  // Shared / inherited services\r\n  #languageSvc = inject(FormLanguageService);\r\n  #formConfig = inject(FormConfigService);\r\n  #contentTypeSvc = inject(ContentTypeService);\r\n  #itemSvc = inject(ItemService);\r\n  #usrLangSvc = transient(UserLanguageService);\r\n\r\n  // Transient services for this instance only\r\n  #propsEngine = transient(FieldsPropsEngine);\r\n\r\n  #pickerSync = new FieldSettingsPickerUpdater();\r\n\r\n  constructor() {\r\n\r\n    // Signal to combine startSync and computed allProps\r\n    const allPropsOrNull = computedObj<Record<string, FieldProps> | null>('allPropsOrNull', () => this.#startSync() && this.#allProps());\r\n\r\n    // Transfer changes to the props state to the public property\r\n    effect(() => {\r\n      const update = allPropsOrNull();\r\n      if (!update) return;\r\n      this.allProps.set(update);\r\n    });\r\n\r\n    // Start the picker sync\r\n    this.#pickerSync.startSync(allPropsOrNull);\r\n  }\r\n\r\n  //#region injected services, constructor, clean-up\r\n\r\n  disableForCleanUp(): void {\r\n    this.log.fn('cleanUp');\r\n    this.#disabled.set(true);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * Field properties of all fields.\r\n   * It is updated when every round of change-cycles are complete and stable.\r\n   */\r\n  public allProps = signalObj<Record<string, FieldProps>>('allProps', {});\r\n  #startSync = signal(false);\r\n  #allProps: Signal<Record<string, FieldProps>>;\r\n\r\n  /** Signal to force a refresh. */\r\n  #forceRefresh = signalObj('forceRefresh', 0);\r\n\r\n  /** Signal to disable everything. Mainly on clean-up, as the computed will still run when data is removed from cache */\r\n  #disabled = signalObj('disabled', false);\r\n\r\n  #fieldsPropsUpdate: FieldsPropertiesUpdates;\r\n\r\n  #reader = this.#languageSvc.getEntityReader(this.#formConfig.config.formId);\r\n  #labelReader = computedObj('labelReader', () => {\r\n    // Watch the reader, so it will update when the reader changes\r\n    const reader = this.#reader();\r\n\r\n    // Now first check if the user has a language set, and if so, use that.\r\n    const lblLang = this.#usrLangSvc.value('form');\r\n    if (!lblLang)\r\n      return reader;\r\n    \r\n    const customLng = { current: lblLang, primary: reader.primary };\r\n    const userReader = new EntityReader(customLng);\r\n    return userReader;\r\n  });\r\n\r\n  //#region Item and content-type\r\n\r\n  /** The item - set on init, used for many other computations */\r\n  #item = signal<EavItem>(null);\r\n\r\n  #contentType = computed(() => (!this.#item()) ? null : this.#contentTypeSvc.getContentTypeOfItem(this.#item()));\r\n\r\n  /** The settings of the content-type of this item */\r\n  public contentTypeSettings = computed(() => !this.#item()\r\n    ? null\r\n    : ContentTypeSettingsHelpers.getDefaultSettings(this.#labelReader(), this.#contentType(), this.#item().Header)\r\n  );\r\n\r\n  //#endregion\r\n\r\n  /** Signals for each field value */\r\n  #fieldValues = transient(FieldsSignalsHelper);\r\n\r\n  /** Start the observables etc. to monitor changes */\r\n  init(entityGuid: string): void {\r\n\r\n    const item = this.#itemSvc.get(entityGuid);\r\n    this.#item.set(item);\r\n    this.#fieldsPropsUpdate = new FieldsPropertiesUpdates(entityGuid);\r\n\r\n    // Remember content-type, as it won't change and we don't need to listen to a signal\r\n    const ct = this.#contentType();\r\n    const debugOnlyCt = this.log.specs.type;\r\n    const forceDebug = debugOnlyCt === null ? null : ct.Id === debugOnlyCt;\r\n    if (forceDebug !== null) {\r\n      this.log.a(`Set debug for content type '${ct.Id}' to ${forceDebug}, only debugging ${debugOnlyCt}`);\r\n      this.log.forceEnable(forceDebug);\r\n    }\r\n\r\n    const slotIsEmpty = this.#itemSvc.slotIsEmpty(entityGuid);\r\n    this.#fieldValues.init(entityGuid, this.#reader);\r\n    this.#propsEngine.init(this, entityGuid, item, this.#contentType, this.#reader, this.#labelReader, this.#fieldValues, forceDebug);\r\n\r\n    // properties for the computation - set on an object, so we can do the call in a function\r\n    // and change what we'll do with it.\r\n    const deps: Deps = {\r\n      idMsg: `entityGuid: ${entityGuid}; contentTypeId: ${ct.Id};`,\r\n      cycle: 0,\r\n      analyzer: null as ComputedAnalyzer<Record<string, FieldProps>>,\r\n      disabled: this.#disabled,\r\n      slotIsEmpty,\r\n      slotWasEmpty: false, // must start false, so it will certainly run once.\r\n      forceRefresh: this.#forceRefresh,\r\n      watchRestart: signal(0),\r\n      prevFieldProps: {} as Record<string, FieldProps>,\r\n      hasRunOnce: false,\r\n    } satisfies Deps;\r\n    \r\n    // Protect against infinite loops\r\n    setInterval(() => {\r\n      // If we ran into a max-count, we should reset and trigger the watchRestart\r\n      if (deps.cycle > maxCyclesPerTime)\r\n        setTimeout(() => {\r\n          this.log.a(`restarting max cycles from ${deps.cycle}; ${deps.idMsg}`);\r\n          return deps.watchRestart.update(v => v + 1);\r\n        }, maxCycleRestartDelay);\r\n      // Every interval, reset the cycle count\r\n      deps.cycle = 0;\r\n    }, maxCyclesMs);\r\n\r\n    // This computed will contain all the updated field properties\r\n    this.#allProps = computedObj('allFieldProps', () => this.#regenerateProps(deps));\r\n\r\n    // Start Analyzer if necessary\r\n    if (this.log.specs.activateAnalyzer)\r\n      deps.analyzer = new ComputedAnalyzer(this.#allProps);\r\n\r\n    this.#startSync.set(true);\r\n  }\r\n\r\n  #regenerateProps(deps: Deps): Record<string, FieldProps> {\r\n    if (deps.analyzer)\r\n      console.log('analyzer', { fieldProps: this.allProps }, deps.analyzer.snapShotProducers(true));\r\n\r\n    const l = this.log.fnIf('regenerateProps', { cycle: deps.cycle, props: this.allProps }, deps.idMsg);\r\n    // If disabled for any reason, return the previous value (but do make sure there is a previous value)\r\n    // The #disabled is a safeguard as data will be missing when this is being cleaned up.\r\n    // The #slotIsEmpty means that the current entity is not being edited and will not be saved; can change from cycle to cycle.\r\n    const slotIsEmpty = deps.slotIsEmpty();\r\n    const justReuse = this.#disabled() || (slotIsEmpty && slotIsEmpty == deps.slotWasEmpty);\r\n    if (justReuse && deps.hasRunOnce)\r\n      return l.r(deps.prevFieldProps, 'disabled or slotIsEmpty');\r\n    else {\r\n      deps.hasRunOnce = true;\r\n      deps.slotWasEmpty = slotIsEmpty;\r\n    }\r\n\r\n    // Listen to ForceRefresh. This is triggered by a) promise-completed messages and b) v1 formulas\r\n    this.#forceRefresh();\r\n\r\n    // If we have reached the max cycles, we should stop\r\n    if (deps.cycle++ > maxCyclesPerTime) {\r\n      const msg = `${maxCyclesWarning}; cycle: ${deps.cycle}; ${deps.idMsg};`;\r\n      console.warn(msg);\r\n      deps.watchRestart(); // to ensure it can start again in a second, access this before we exit.\r\n      return l.r(deps.prevFieldProps, msg);\r\n    }\r\n\r\n    const latestFieldProps = this.#fieldsPropsUpdate.hasChanges()\r\n      ? this.#fieldsPropsUpdate.mergeMixins(deps.prevFieldProps)\r\n      : deps.prevFieldProps;\r\n    \r\n    // Note that this will access a lot of source signals\r\n    // whose dependencies will be incorporated into this calculation\r\n    const props = this.#propsEngine.getLatestSettingsAndValues(latestFieldProps);\r\n    deps.prevFieldProps = props;\r\n        \r\n    return l.rSilent(props, 'normal update');\r\n    // const propsDiff = difference(props, prevFieldProps);\r\n    // if (Object.keys(propsDiff).length > 0) {\r\n    //   l.a('Fields Props Diff', propsDiff);\r\n    //   return l.r(props, `props: normal update`);\r\n    // } else {\r\n    //   return l.rSilent(prevFieldProps, 'props: no changes');\r\n    // }\r\n  }\r\n\r\n\r\n  #fieldPropsCache = new ComputedCacheHelper<string, FieldProps>('field-props');\r\n  public fieldProps = this.#fieldPropsCache.buildProxy(f => () => this.allProps()[f]);\r\n  \r\n  #fieldSignalsCache = new ComputedCacheHelper<string, FieldSettings>('fields');\r\n  /**\r\n   * Used for getting field settings for a specific field.\r\n   * @param fieldName\r\n   * @returns Field settings\r\n   */\r\n  public settings = this.#fieldSignalsCache.buildProxy(f => () => this.allProps()[f].settings);\r\n\r\n  /**\r\n   * Used for translation state stream for a specific field.\r\n   * @param fieldName\r\n   * @returns Translation state signal\r\n   */\r\n  translationState = ComputedCacheHelper.proxy<string, TranslationState>('transl-state', f => () => this.allProps()[f].translationState);\r\n\r\n  /**\r\n   * Triggers a reevaluation of all formulas.\r\n   */\r\n  retriggerFormulas(source: string): void {\r\n    this.log.fn('retriggerFormulas', { source});\r\n    this.#forceRefresh.update(v => v + 1);\r\n  }\r\n\r\n  //#region Update Settings of a field\r\n\r\n  /**\r\n   * Modify a setting, ATM just to set collapsed / dialog-open states.\r\n   * Note that this change won't fire the formulas - which may not be correct.\r\n   */\r\n  updateSetting<T extends FieldSettings>(fieldName: string, update: Partial<T>, source: string): void {\r\n    this.#fieldsPropsUpdate.updateSetting(fieldName, update, source, this.allProps);\r\n    \r\n    // Retrigger formulas if the queue was empty (otherwise it was already retriggered and will run soon)\r\n    // Put a very small delay into processing the queue, since startup can send single updates for many fields one at a time.\r\n    setTimeout(() => this.retriggerFormulas('updateSetting'), 10);\r\n  }\r\n\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * WIP\r\n   * Field States for every field.\r\n   * ATM just used for formulas which have data-sources + in Validators for picker fields.\r\n   */\r\n  public get pickerData(): Record<string, PickerData> { return this.#propsEngine.pickerData; };\r\n}\r\n\r\ninterface Deps {\r\n  idMsg: string,\r\n  cycle: number,\r\n  analyzer: ComputedAnalyzer<Record<string, FieldProps>>,\r\n  disabled: Signal<boolean>,\r\n  slotIsEmpty: Signal<boolean>,\r\n  forceRefresh: Signal<number>,\r\n  watchRestart: WritableSignal<number>,\r\n  prevFieldProps: Record<string, FieldProps>,\r\n\r\n  /**\r\n   * Informs that on a previous run, the slot was empty.\r\n   * This is important, since we don't want to run the same cycle again if the slot is empty.\r\n   * But if it started empty, or was set back to empty, the formulas must run once\r\n   * to correct disabled state of all fields.\r\n   */\r\n  slotWasEmpty: boolean,\r\n\r\n  hasRunOnce: boolean,\r\n}","import { FieldLogicManager } from '../fields/logic/field-logic-manager';\r\nimport { FieldProps } from './fields-configs.model';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../shared/logging';\r\n\r\nexport class FieldTranslationInfo implements Pick<FieldSettings, 'DisableTranslation' | 'DisableAutoTranslation'> {\r\n\r\n  log = classLog({FieldTranslationInfo});\r\n\r\n  constructor(private getFieldsProps: () => FieldProps) { }\r\n\r\n  get #settings(): FieldSettings { return this.#_settings ??= this.getFieldsProps().settings; }\r\n  #_settings: FieldSettings;\r\n\r\n  get isAutoTranslatable(): boolean { return !this.DisableTranslation && !this.DisableAutoTranslation; }\r\n\r\n  get notForAutoTranslateBecauseOfType(): boolean { return !this.DisableTranslation && this.autoTranslateIsDisabledByTypeButNotByConfig(); }\r\n\r\n  get DisableTranslation(): boolean { return this.#settings.DisableTranslation; }\r\n\r\n  get DisableAutoTranslation(): boolean { return this.#settings.DisableAutoTranslation; }\r\n\r\n  /**\r\n   * Returns true if auto translation is enabled for the field, but was disabled by default because of the field type.\r\n   * This is meant to spot \"additional\" disabled fields which should be added to a list of fields that should not be translated.\r\n   * ...this is a bit ugly...\r\n   */\r\n  autoTranslateIsDisabledByTypeButNotByConfig() {\r\n    // first check if it's already disabled - in which case we say \"false\"\r\n    // so it's not added (again) to lists of Fields that should not be translated\r\n    if (this.DisableAutoTranslation) return false;\r\n    const logic = FieldLogicManager.singleton().get(this.getFieldsProps().constants.inputTypeSpecs.inputType);\r\n    return !logic.canAutoTranslate;\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { EditApiKeyPaths } from '../../shared/constants/eav.constants';\r\nimport { ApiKeySpecs } from '../../shared/models/dialog-context.models';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { EavEntityAttributes, EavItem } from '../shared/models/eav';\r\nimport { FieldsSettingsService } from './fields-settings.service';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { ItemHelper } from '../shared/helpers/item.helper';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { ItemService } from './item.service';\r\nimport { ContentTypeService } from '../shared/content-types/content-type.service';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { FieldTranslationInfo } from './field-translation-info';\r\nimport { classLog } from '../../shared/logging';\r\n\r\nconst apiKeyInDemoModeAlert = `This translation is a demo. Please provide your own Google Translate API key in the EAV configuration.`;\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  constructor: false,\r\n  init: true,\r\n  unlock: true,\r\n  lock: true,\r\n  getInfo: true,\r\n  autoTranslate: true,\r\n  findAutoTranslatableFields: true,\r\n  addItemAttributeValueHelper: true,\r\n};\r\n\r\n/**\r\n * Fields-Translation service.\r\n * TODO: should probably split into two, to move Auto-Translate SoC\r\n */\r\n@Injectable()\r\nexport class FieldsTranslateService {\r\n  log = classLog({FieldsTranslateService}, logSpecs);\r\n\r\n  #itemAttributes: Signal<EavEntityAttributes>;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private itemService: ItemService,\r\n    private formConfig: FormConfigService,\r\n    private contentTypeService: ContentTypeService,\r\n    private fieldsSettingsService: FieldsSettingsService,\r\n    private snackBar: MatSnackBar,\r\n    private translate: TranslateService,\r\n  ) {\r\n    this.log.fnIf('constructor');\r\n  }\r\n\r\n  updater = this.itemService.updater;\r\n\r\n  init(entityGuid: string): void {\r\n    const l = this.log.fnIf('init');\r\n    this.#entityGuid = entityGuid;\r\n    const item = this.itemService.get(entityGuid);\r\n    this.#contentTypeId = ItemHelper.getContentTypeNameId(item);\r\n    this.#itemAttributes = this.itemService.itemAttributesSignal(entityGuid);\r\n    l.end('', { entityGuid, contentTypeId: this.#contentTypeId });\r\n  }\r\n\r\n  #entityGuid: string;\r\n  #contentTypeId: string;\r\n\r\n\r\n  //#region Lock / Unlock\r\n\r\n  unlock(fieldName: string, isTransaction = false, transactionItem?: EavItem): EavItem {\r\n    const l = this.log.fnIf('unlock', { fieldName, isTransaction, transactionItem });\r\n    \r\n    if (this.#getInfo(fieldName).DisableTranslation)\r\n      return l.rNull('Translation is disabled for this field.');\r\n\r\n    const language = this.formConfig.language();\r\n    transactionItem = this.updater.removeItemAttributeDimension(this.#entityGuid, fieldName, language.current, isTransaction, transactionItem);\r\n\r\n    const values = this.#itemAttributes()[fieldName];\r\n    const doesFieldHaveExistingDimension = new FieldReader(values, language).currentEditable != null;\r\n    const fieldReaderPrimaryLang = new FieldReader(values, FormLanguage.bothPrimary(language));\r\n    const defaultValue = fieldReaderPrimaryLang.current;\r\n    if (!doesFieldHaveExistingDimension) \r\n      return l.r(this.#addItemAttributeValueHelper(fieldName, defaultValue.Value, language.current, false));\r\n    else\r\n      return l.rNull();\r\n  }\r\n\r\n  lock(fieldName: string, isTransaction = false, transactionItem?: EavItem): EavItem {\r\n    const l = this.log.fnIf('lock', { fieldName, isTransaction, transactionItem });\r\n    if (this.#getInfo(fieldName).DisableTranslation)\r\n      return l.rNull('Translation is disabled for this field.');\r\n\r\n    const language = this.formConfig.language();\r\n    transactionItem = this.updater.removeItemAttributeDimension(this.#entityGuid, fieldName, language.current, isTransaction, transactionItem);\r\n    return transactionItem;\r\n  }\r\n\r\n  /** For all fields, to unlock or lock */\r\n  toggleUnlockOnAll(isUnlock: boolean): void {\r\n    const translatable = this.findTranslatableFields();\r\n    if (translatable.length === 0)\r\n      return this.showMessageNoTranslatableFields(false);\r\n\r\n    let transactionItem: EavItem;\r\n    for (const fieldName of translatable) {\r\n      // will finish the transaction when last field is being translated\r\n      const isTransaction = fieldName !== translatable[translatable.length - 1];\r\n      transactionItem = isUnlock\r\n        ? this.unlock(fieldName, isTransaction, transactionItem)\r\n        : this.lock(fieldName, isTransaction, transactionItem);\r\n    }\r\n  }\r\n\r\n  //#endregion\r\n\r\n  showMessageNoTranslatableFields(forAutoTranslate: boolean): void {\r\n    const msg = this.translate.instant(\"LangMenu.NoAutoTranslatableFieldsFound\".replace(\"Auto\", forAutoTranslate ? \"Auto\" : \"\"));\r\n    this.snackBar.open(msg, null, { duration: 2000 });\r\n  }\r\n\r\n  /**\r\n   * Auto-translate the field value to the current language.\r\n   * @param areAllChecksKnown If true, the function will not check if the field value is empty, or if the field auto-translate was disabled by default.\r\n   */\r\n  autoTranslate(fieldNames: string[], sourceLanguageKey: string, isMany: boolean = false, areAllChecksKnown: boolean = false): void {\r\n    const l = this.log.fnIf('autoTranslate', { fieldNames, autoTranslateLanguageKey: sourceLanguageKey, isMany, areAllChecksKnown });\r\n    // Get API key and optionally show warning\r\n    const apiKeyInfo = this.formConfig.settings.Values[EditApiKeyPaths.GoogleTranslate] as ApiKeySpecs;\r\n    if (apiKeyInfo.IsDemo)\r\n      alert(apiKeyInDemoModeAlert);\r\n\r\n    const language = this.formConfig.language();\r\n    const attributes = this.#itemAttributes();\r\n\r\n    // Filter out fields that have translation disabled\r\n    fieldNames = fieldNames.filter(f => !this.#getInfo(f).DisableTranslation);\r\n    const textsForTranslation = fieldNames.map(f => new FieldReader(attributes[f], sourceLanguageKey).currentEditable.Value);\r\n\r\n    if (!areAllChecksKnown)\r\n      fieldNames.forEach((field, i) => {\r\n        const currentText = textsForTranslation[i];\r\n        const isAutoTranslationEnabledButWasDisabledByDefault = this.#getInfo(field).autoTranslateIsDisabledByTypeButNotByConfig();\r\n        if (currentText == null || currentText === '' || isAutoTranslationEnabledButWasDisabledByDefault)\r\n          this.unlock(field);\r\n      });\r\n\r\n    const translationData = {\r\n      q: textsForTranslation,\r\n      target: language.current,\r\n      source: sourceLanguageKey\r\n    };\r\n    this.http.post(`https://translation.googleapis.com/language/translate/v2?key=${apiKeyInfo.ApiKey}`, translationData)\r\n      .subscribe((response: any) => {\r\n        const fieldsWithExistingDims = fieldNames.map(f => new FieldReader(attributes[f], language).currentEditable != null);\r\n        response.data.translations.forEach((translation: any, i: number) => {\r\n          const elem = document.createElement('textarea');\r\n          elem.innerHTML = translation.translatedText;\r\n          const fieldHasExistingDimension = fieldsWithExistingDims[i];\r\n          if (!isMany && fieldHasExistingDimension) {\r\n            this.updater.updateItemAttributeValue(this.#entityGuid, fieldNames[i], elem.value, language, false);\r\n          } else if (!fieldHasExistingDimension) {\r\n            this.#addItemAttributeValueHelper(fieldNames[i], elem.value, language.current, false);\r\n          }\r\n        });\r\n      });\r\n  }\r\n\r\n  copyFrom(fieldName: string, copyFromLanguageKey: string): void {\r\n    if (this.#getInfo(fieldName).DisableTranslation) return;\r\n\r\n    const attributes = this.#itemAttributes();\r\n    const values = attributes[fieldName];\r\n    const language = this.formConfig.language();\r\n    const fieldReader = new FieldReader(values, language);\r\n    const valueTranslation = fieldReader.ofLanguage(FormLanguage.diffCurrent(language, copyFromLanguageKey));\r\n    if (valueTranslation) {\r\n      const valueAlreadyExists = values\r\n        ? fieldReader.isEditableOrReadonlyTranslationExist()\r\n        : false;\r\n\r\n      if (valueAlreadyExists)\r\n        // Copy attribute value where language is languageKey to value where language is current language\r\n        this.updater.updateItemAttributeValue(\r\n          this.#entityGuid, fieldName, valueTranslation.Value, language, false,\r\n        );\r\n      else\r\n        // Copy attribute value where language is languageKey to new attribute with current language\r\n        this.#addItemAttributeValueHelper(fieldName, valueTranslation.Value, language.current, false);\r\n    } else\r\n      this.log.a(`${language.current}: Cant copy value from ${copyFromLanguageKey} because that value does not exist.`);\r\n  }\r\n\r\n  linkReadOnly(fieldName: string, linkWithLanguageKey: string): void {\r\n    this.linkToOtherField(fieldName, linkWithLanguageKey, true);\r\n  }\r\n\r\n  linkReadWrite(fieldName: string, linkWithLanguageKey: string): void {\r\n    return this.linkToOtherField(fieldName, linkWithLanguageKey, false);\r\n  }\r\n\r\n  private linkToOtherField(fieldName: string, linkWithLanguageKey: string, isReadOnly: boolean): void {\r\n    if (this.#getInfo(fieldName).DisableTranslation) return;\r\n\r\n    const language = this.formConfig.language();\r\n    const transactionItem = this.updater.removeItemAttributeDimension(this.#entityGuid, fieldName, language.current, true);\r\n    this.updater.addItemAttributeDimension(\r\n      this.#entityGuid, fieldName, language.current, linkWithLanguageKey, language.primary, isReadOnly, transactionItem,\r\n    );\r\n  }\r\n\r\n\r\n  /**\r\n   * Auto-translates all field that have auto-translate enabled and are not empty, empty ones are unlocked.\r\n   */\r\n  autoTranslateMany(sourceLanguageKey: string): void {\r\n    const attributes = this.#itemAttributes();\r\n    // fields that have auto-translate enabled and are not empty\r\n    const canTranslate: string[] = [];\r\n    // fields that have auto-translate enabled but didn't have it by default or are empty\r\n    const cantTranslateAndEmpty: string[] = this.findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault();\r\n    // fields that have auto-translate enabled and can be empty\r\n    const canTranslateWithEmpty = this.findAutoTranslatableFields().filter(x => !cantTranslateAndEmpty.includes(x));\r\n    // separate fields that have auto-translate enabled and are empty\r\n    canTranslateWithEmpty.forEach(fieldName => {\r\n      const value = new FieldReader(attributes[fieldName], sourceLanguageKey).currentEditable?.Value;\r\n      if (value !== '' && value != null && value !== undefined)\r\n        canTranslate.push(fieldName);\r\n      // this is commented out because future edits on fields should automatically be passed to the other languages\r\n      // else\r\n      //   cantTranslateAndEmpty.push(fieldName);\r\n    });\r\n    // translate fields that have auto-translate enabled and are not empty\r\n    this.autoTranslate(canTranslate, sourceLanguageKey, true, true);\r\n    let transactionItem: EavItem;\r\n    // unlock fields that have auto-translate enabled but didn't have it by default or are empty\r\n    cantTranslateAndEmpty.forEach(fieldName => {\r\n      this.unlock(fieldName, false, transactionItem);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns all fields that can be translated.\r\n   */\r\n  findTranslatableFields(): string[] {\r\n    const attributes = this.#itemAttributes();\r\n    return Object.keys(attributes).filter(fieldName => !this.#getInfo(fieldName).DisableTranslation);\r\n  }\r\n\r\n  /**\r\n   * Returns all fields that can be translated and autoTranslated.\r\n   */\r\n  findAutoTranslatableFields(): string[] {\r\n    const attributes = this.#itemAttributes();\r\n    const result = Object.keys(attributes).filter(fieldName => this.#getInfo(fieldName).isAutoTranslatable);\r\n    this.log.fnIf('findAutoTranslatableFields', { attributes, result });\r\n    return result;\r\n  }\r\n\r\n  #getInfo(fieldName: string): FieldTranslationInfo {\r\n    const ti = new FieldTranslationInfo(() => this.fieldsSettingsService.fieldProps[fieldName]());\r\n    this.log.fnIf('getInfo', { fieldName, ti });\r\n    return ti;\r\n  }\r\n\r\n  /**\r\n   * Returns all fields that can be translated and autoTranslated, but were not autoTranslatable by default.\r\n   */\r\n  findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault(): string[] {\r\n    const attributes = this.#itemAttributes();\r\n    return Object.keys(attributes).filter(fieldName => this.#getInfo(fieldName).notForAutoTranslateBecauseOfType);\r\n  }\r\n\r\n  #addItemAttributeValueHelper(fieldName: string, value: any, currentLanguage: string, isReadOnly: boolean): EavItem {\r\n    const l = this.log.fnIf('addItemAttributeValueHelper', { fieldName, value, currentLanguage, isReadOnly });\r\n    const ctAttribute = this.contentTypeService.getAttribute(this.#contentTypeId, fieldName);\r\n    const result = this.updater.addItemAttributeValue(\r\n      this.#entityGuid, fieldName, value, currentLanguage, isReadOnly, ctAttribute.Type\r\n    );\r\n    return l.r(result);\r\n  }\r\n}\r\n\r\n","@if (show()) {\r\n  <mat-icon tippyTranslate=\"Features.NotActivated\" [tippyData]=\"{ name: featureNameId() }\">diamond</mat-icon>\r\n}","import { Component } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { FeatureComponentBase } from '../shared/base-feature.component';\r\n\r\n@Component({\r\n    selector: 'app-feature-icon-indicator',\r\n    templateUrl: './feature-icon-indicator.component.html',\r\n    imports: [\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class FeatureIconIndicatorComponent extends FeatureComponentBase { }\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>\r\n      {{ 'LangMenu.Dialog.CantAutoTranslate' | translate }}\r\n    </mat-card-title>\r\n    @if (dialogData.isAutoTranslateAll) {\r\n      <mat-card-subtitle>\r\n        {{'LangMenu.Dialog.NoAutoTranslatableFields' | translate }}\r\n      </mat-card-subtitle>\r\n    }\r\n    @if (!dialogData.isAutoTranslateAll) {\r\n      <mat-card-subtitle>\r\n        {{'LangMenu.Dialog.ThisFieldIsNotAutoTranslatable' | translate }}\r\n      </mat-card-subtitle>\r\n    }\r\n  </mat-card-header>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-button color=\"accent\" (click)=\"closeDialog()\">{{'Features.Close' | translate }}</button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@Component({\r\n    selector: 'app-auto-translate-disabled-warning-dialog',\r\n    templateUrl: './auto-translate-disabled-warning-dialog.component.html',\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        TranslateModule,\r\n    ]\r\n})\r\nexport class AutoTranslateDisabledWarningDialog implements OnInit {\r\n  constructor(\r\n    private dialog: MatDialogRef<AutoTranslateDisabledWarningDialog>,\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: any,\r\n  ) { }\r\n\r\n  ngOnInit(): void { }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n}","import * as i0 from '@angular/core';\nimport { Component, ViewEncapsulation, ChangeDetectionStrategy, Input, NgModule } from '@angular/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { MatCommonModule } from '@angular/material/core';\n\nclass MatDivider {\n    /** Whether the divider is vertically aligned. */\n    get vertical() {\n        return this._vertical;\n    }\n    set vertical(value) {\n        this._vertical = coerceBooleanProperty(value);\n    }\n    _vertical = false;\n    /** Whether the divider is an inset divider. */\n    get inset() {\n        return this._inset;\n    }\n    set inset(value) {\n        this._inset = coerceBooleanProperty(value);\n    }\n    _inset = false;\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDivider, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDivider, isStandalone: true, selector: \"mat-divider\", inputs: { vertical: \"vertical\", inset: \"inset\" }, host: { attributes: { \"role\": \"separator\" }, properties: { \"attr.aria-orientation\": \"vertical ? \\\"vertical\\\" : \\\"horizontal\\\"\", \"class.mat-divider-vertical\": \"vertical\", \"class.mat-divider-horizontal\": \"!vertical\", \"class.mat-divider-inset\": \"inset\" }, classAttribute: \"mat-divider\" }, ngImport: i0, template: '', isInline: true, styles: [\".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\"], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDivider, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-divider', host: {\n                        'role': 'separator',\n                        '[attr.aria-orientation]': 'vertical ? \"vertical\" : \"horizontal\"',\n                        '[class.mat-divider-vertical]': 'vertical',\n                        '[class.mat-divider-horizontal]': '!vertical',\n                        '[class.mat-divider-inset]': 'inset',\n                        'class': 'mat-divider',\n                    }, template: '', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, styles: [\".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\"] }]\n        }], propDecorators: { vertical: [{\n                type: Input\n            }], inset: [{\n                type: Input\n            }] } });\n\nclass MatDividerModule {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDividerModule, deps: [], target: i0.FactoryTarget.NgModule });\n    static mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDividerModule, imports: [MatCommonModule, MatDivider], exports: [MatDivider, MatCommonModule] });\n    static inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDividerModule, imports: [MatCommonModule, MatCommonModule] });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDividerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [MatCommonModule, MatDivider],\n                    exports: [MatDivider, MatCommonModule],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MatDivider, MatDividerModule };\n","import * as i0 from '@angular/core';\nimport { InjectionToken, inject, ElementRef, Directive, Input, NgZone, ANIMATION_MODULE_TYPE, Injector, ContentChildren, Component, ViewEncapsulation, ChangeDetectionStrategy, ViewChild, ChangeDetectorRef, EventEmitter, Output, forwardRef, NgModule } from '@angular/core';\nimport { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { Platform, _getFocusedElementPierceShadowDom } from '@angular/cdk/platform';\nimport { _StructuralStylesLoader, MAT_RIPPLE_GLOBAL_OPTIONS, RippleRenderer, MatCommonModule, MatRippleModule, MatPseudoCheckboxModule } from '@angular/material/core';\nimport { _CdkPrivateStyleLoader } from '@angular/cdk/private';\nimport { Subscription, merge, Subject } from 'rxjs';\nimport { CdkObserveContent, ObserversModule } from '@angular/cdk/observers';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { NgTemplateOutlet } from '@angular/common';\nimport { FocusKeyManager } from '@angular/cdk/a11y';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { ENTER, SPACE, A, hasModifierKey } from '@angular/cdk/keycodes';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { takeUntil } from 'rxjs/operators';\n\n/**\n * Injection token that can be used to reference instances of an `ListOption`. It serves\n * as alternative token to an actual implementation which could result in undesired\n * retention of the class or circular references breaking runtime execution.\n * @docs-private\n */\nconst LIST_OPTION = new InjectionToken('ListOption');\n\n/**\n * Directive capturing the title of a list item. A list item usually consists of a\n * title and optional secondary or tertiary lines.\n *\n * Text content for the title never wraps. There can only be a single title per list item.\n */\nclass MatListItemTitle {\n    _elementRef = inject(ElementRef);\n    constructor() { }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemTitle, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListItemTitle, isStandalone: true, selector: \"[matListItemTitle]\", host: { classAttribute: \"mat-mdc-list-item-title mdc-list-item__primary-text\" }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemTitle, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matListItemTitle]',\n                    host: { 'class': 'mat-mdc-list-item-title mdc-list-item__primary-text' },\n                }]\n        }], ctorParameters: () => [] });\n/**\n * Directive capturing a line in a list item. A list item usually consists of a\n * title and optional secondary or tertiary lines.\n *\n * Text content inside a line never wraps. There can be at maximum two lines per list item.\n */\nclass MatListItemLine {\n    _elementRef = inject(ElementRef);\n    constructor() { }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemLine, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListItemLine, isStandalone: true, selector: \"[matListItemLine]\", host: { classAttribute: \"mat-mdc-list-item-line mdc-list-item__secondary-text\" }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemLine, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matListItemLine]',\n                    host: { 'class': 'mat-mdc-list-item-line mdc-list-item__secondary-text' },\n                }]\n        }], ctorParameters: () => [] });\n/**\n * Directive matching an optional meta section for list items.\n *\n * List items can reserve space at the end of an item to display a control,\n * button or additional text content.\n */\nclass MatListItemMeta {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemMeta, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListItemMeta, isStandalone: true, selector: \"[matListItemMeta]\", host: { classAttribute: \"mat-mdc-list-item-meta mdc-list-item__end\" }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemMeta, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matListItemMeta]',\n                    host: { 'class': 'mat-mdc-list-item-meta mdc-list-item__end' },\n                }]\n        }] });\n/**\n * @docs-private\n *\n * MDC uses the very intuitively named classes `.mdc-list-item__start` and `.mat-list-item__end` to\n * position content such as icons or checkboxes/radios that comes either before or after the text\n * content respectively. This directive detects the placement of the checkbox/radio and applies the\n * correct MDC class to position the icon/avatar on the opposite side.\n */\nclass _MatListItemGraphicBase {\n    _listOption = inject(LIST_OPTION, { optional: true });\n    constructor() { }\n    _isAlignedAtStart() {\n        // By default, in all list items the graphic is aligned at start. In list options,\n        // the graphic is only aligned at start if the checkbox/radio is at the end.\n        return !this._listOption || this._listOption?._getTogglePosition() === 'after';\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: _MatListItemGraphicBase, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: _MatListItemGraphicBase, isStandalone: true, host: { properties: { \"class.mdc-list-item__start\": \"_isAlignedAtStart()\", \"class.mdc-list-item__end\": \"!_isAlignedAtStart()\" } }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: _MatListItemGraphicBase, decorators: [{\n            type: Directive,\n            args: [{\n                    host: {\n                        // MDC uses intuitively named classes `.mdc-list-item__start` and `.mat-list-item__end` to\n                        // position content such as icons or checkboxes/radios that comes either before or after the\n                        // text content respectively. This directive detects the placement of the checkbox/radio and\n                        // applies the correct MDC class to position the icon/avatar on the opposite side.\n                        '[class.mdc-list-item__start]': '_isAlignedAtStart()',\n                        '[class.mdc-list-item__end]': '!_isAlignedAtStart()',\n                    },\n                }]\n        }], ctorParameters: () => [] });\n/**\n * Directive matching an optional avatar within a list item.\n *\n * List items can reserve space at the beginning of an item to display an avatar.\n */\nclass MatListItemAvatar extends _MatListItemGraphicBase {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemAvatar, deps: null, target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListItemAvatar, isStandalone: true, selector: \"[matListItemAvatar]\", host: { classAttribute: \"mat-mdc-list-item-avatar\" }, usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemAvatar, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matListItemAvatar]',\n                    host: { 'class': 'mat-mdc-list-item-avatar' },\n                }]\n        }] });\n/**\n * Directive matching an optional icon within a list item.\n *\n * List items can reserve space at the beginning of an item to display an icon.\n */\nclass MatListItemIcon extends _MatListItemGraphicBase {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemIcon, deps: null, target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListItemIcon, isStandalone: true, selector: \"[matListItemIcon]\", host: { classAttribute: \"mat-mdc-list-item-icon\" }, usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemIcon, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matListItemIcon]',\n                    host: { 'class': 'mat-mdc-list-item-icon' },\n                }]\n        }] });\n\n/** Injection token that can be used to provide the default options for the list module. */\nconst MAT_LIST_CONFIG = new InjectionToken('MAT_LIST_CONFIG');\n\n/** @docs-private */\nclass MatListBase {\n    _isNonInteractive = true;\n    /** Whether ripples for all list items is disabled. */\n    get disableRipple() {\n        return this._disableRipple;\n    }\n    set disableRipple(value) {\n        this._disableRipple = coerceBooleanProperty(value);\n    }\n    _disableRipple = false;\n    /**\n     * Whether the entire list is disabled. When disabled, the list itself and each of its list items\n     * are disabled.\n     */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n    }\n    _disabled = false;\n    _defaultOptions = inject(MAT_LIST_CONFIG, { optional: true });\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListBase, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListBase, isStandalone: true, inputs: { disableRipple: \"disableRipple\", disabled: \"disabled\" }, host: { properties: { \"attr.aria-disabled\": \"disabled\" } }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListBase, decorators: [{\n            type: Directive,\n            args: [{\n                    host: {\n                        '[attr.aria-disabled]': 'disabled',\n                    },\n                }]\n        }], propDecorators: { disableRipple: [{\n                type: Input\n            }], disabled: [{\n                type: Input\n            }] } });\n/** @docs-private */\nclass MatListItemBase {\n    _elementRef = inject(ElementRef);\n    _ngZone = inject(NgZone);\n    _listBase = inject(MatListBase, { optional: true });\n    _platform = inject(Platform);\n    /** Host element for the list item. */\n    _hostElement;\n    /** indicate whether the host element is a button or not */\n    _isButtonElement;\n    /** Whether animations are disabled. */\n    _noopAnimations;\n    _avatars;\n    _icons;\n    /**\n     * The number of lines this list item should reserve space for. If not specified,\n     * lines are inferred based on the projected content.\n     *\n     * Explicitly specifying the number of lines is useful if you want to acquire additional\n     * space and enable the wrapping of text. The unscoped text content of a list item will\n     * always be able to take up the remaining space of the item, unless it represents the title.\n     *\n     * A maximum of three lines is supported as per the Material Design specification.\n     */\n    set lines(lines) {\n        this._explicitLines = coerceNumberProperty(lines, null);\n        this._updateItemLines(false);\n    }\n    _explicitLines = null;\n    /** Whether ripples for list items are disabled. */\n    get disableRipple() {\n        return (this.disabled ||\n            this._disableRipple ||\n            this._noopAnimations ||\n            !!this._listBase?.disableRipple);\n    }\n    set disableRipple(value) {\n        this._disableRipple = coerceBooleanProperty(value);\n    }\n    _disableRipple = false;\n    /** Whether the list-item is disabled. */\n    get disabled() {\n        return this._disabled || !!this._listBase?.disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n    }\n    _disabled = false;\n    _subscriptions = new Subscription();\n    _rippleRenderer = null;\n    /** Whether the list item has unscoped text content. */\n    _hasUnscopedTextContent = false;\n    /**\n     * Implemented as part of `RippleTarget`.\n     * @docs-private\n     */\n    rippleConfig;\n    /**\n     * Implemented as part of `RippleTarget`.\n     * @docs-private\n     */\n    get rippleDisabled() {\n        return this.disableRipple || !!this.rippleConfig.disabled;\n    }\n    constructor() {\n        inject(_CdkPrivateStyleLoader).load(_StructuralStylesLoader);\n        const globalRippleOptions = inject(MAT_RIPPLE_GLOBAL_OPTIONS, {\n            optional: true,\n        });\n        const animationMode = inject(ANIMATION_MODULE_TYPE, { optional: true });\n        this.rippleConfig = globalRippleOptions || {};\n        this._hostElement = this._elementRef.nativeElement;\n        this._isButtonElement = this._hostElement.nodeName.toLowerCase() === 'button';\n        this._noopAnimations = animationMode === 'NoopAnimations';\n        if (this._listBase && !this._listBase._isNonInteractive) {\n            this._initInteractiveListItem();\n        }\n        // If no type attribute is specified for a host `<button>` element, set it to `button`. If a\n        // type attribute is already specified, we do nothing. We do this for backwards compatibility.\n        // TODO: Determine if we intend to continue doing this for the MDC-based list.\n        if (this._isButtonElement && !this._hostElement.hasAttribute('type')) {\n            this._hostElement.setAttribute('type', 'button');\n        }\n    }\n    ngAfterViewInit() {\n        this._monitorProjectedLinesAndTitle();\n        this._updateItemLines(true);\n    }\n    ngOnDestroy() {\n        this._subscriptions.unsubscribe();\n        if (this._rippleRenderer !== null) {\n            this._rippleRenderer._removeTriggerEvents();\n        }\n    }\n    /** Whether the list item has icons or avatars. */\n    _hasIconOrAvatar() {\n        return !!(this._avatars.length || this._icons.length);\n    }\n    _initInteractiveListItem() {\n        this._hostElement.classList.add('mat-mdc-list-item-interactive');\n        this._rippleRenderer = new RippleRenderer(this, this._ngZone, this._hostElement, this._platform, inject(Injector));\n        this._rippleRenderer.setupTriggerEvents(this._hostElement);\n    }\n    /**\n     * Subscribes to changes in the projected title and lines. Triggers a\n     * item lines update whenever a change occurs.\n     */\n    _monitorProjectedLinesAndTitle() {\n        this._ngZone.runOutsideAngular(() => {\n            this._subscriptions.add(merge(this._lines.changes, this._titles.changes).subscribe(() => this._updateItemLines(false)));\n        });\n    }\n    /**\n     * Updates the lines of the list item. Based on the projected user content and optional\n     * explicit lines setting, the visual appearance of the list item is determined.\n     *\n     * This method should be invoked whenever the projected user content changes, or\n     * when the explicit lines have been updated.\n     *\n     * @param recheckUnscopedContent Whether the projected unscoped content should be re-checked.\n     *   The unscoped content is not re-checked for every update as it is a rather expensive check\n     *   for content that is expected to not change very often.\n     */\n    _updateItemLines(recheckUnscopedContent) {\n        // If the updated is triggered too early before the view and content is initialized,\n        // we just skip the update. After view initialization the update is triggered again.\n        if (!this._lines || !this._titles || !this._unscopedContent) {\n            return;\n        }\n        // Re-check the DOM for unscoped text content if requested. This needs to\n        // happen before any computation or sanity checks run as these rely on the\n        // result of whether there is unscoped text content or not.\n        if (recheckUnscopedContent) {\n            this._checkDomForUnscopedTextContent();\n        }\n        // Sanity check the list item lines and title in the content. This is a dev-mode only\n        // check that can be dead-code eliminated by Terser in production.\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            sanityCheckListItemContent(this);\n        }\n        const numberOfLines = this._explicitLines ?? this._inferLinesFromContent();\n        const unscopedContentEl = this._unscopedContent.nativeElement;\n        // Update the list item element to reflect the number of lines.\n        this._hostElement.classList.toggle('mat-mdc-list-item-single-line', numberOfLines <= 1);\n        this._hostElement.classList.toggle('mdc-list-item--with-one-line', numberOfLines <= 1);\n        this._hostElement.classList.toggle('mdc-list-item--with-two-lines', numberOfLines === 2);\n        this._hostElement.classList.toggle('mdc-list-item--with-three-lines', numberOfLines === 3);\n        // If there is no title and the unscoped content is the is the only line, the\n        // unscoped text content will be treated as the title of the list-item.\n        if (this._hasUnscopedTextContent) {\n            const treatAsTitle = this._titles.length === 0 && numberOfLines === 1;\n            unscopedContentEl.classList.toggle('mdc-list-item__primary-text', treatAsTitle);\n            unscopedContentEl.classList.toggle('mdc-list-item__secondary-text', !treatAsTitle);\n        }\n        else {\n            unscopedContentEl.classList.remove('mdc-list-item__primary-text');\n            unscopedContentEl.classList.remove('mdc-list-item__secondary-text');\n        }\n    }\n    /**\n     * Infers the number of lines based on the projected user content. This is useful\n     * if no explicit number of lines has been specified on the list item.\n     *\n     * The number of lines is inferred based on whether there is a title, the number of\n     * additional lines (secondary/tertiary). An additional line is acquired if there is\n     * unscoped text content.\n     */\n    _inferLinesFromContent() {\n        let numOfLines = this._titles.length + this._lines.length;\n        if (this._hasUnscopedTextContent) {\n            numOfLines += 1;\n        }\n        return numOfLines;\n    }\n    /** Checks whether the list item has unscoped text content. */\n    _checkDomForUnscopedTextContent() {\n        this._hasUnscopedTextContent = Array.from(this._unscopedContent.nativeElement.childNodes)\n            .filter(node => node.nodeType !== node.COMMENT_NODE)\n            .some(node => !!(node.textContent && node.textContent.trim()));\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemBase, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListItemBase, isStandalone: true, inputs: { lines: \"lines\", disableRipple: \"disableRipple\", disabled: \"disabled\" }, host: { properties: { \"class.mdc-list-item--disabled\": \"disabled\", \"attr.aria-disabled\": \"disabled\", \"attr.disabled\": \"(_isButtonElement && disabled) || null\" } }, queries: [{ propertyName: \"_avatars\", predicate: MatListItemAvatar }, { propertyName: \"_icons\", predicate: MatListItemIcon }], ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItemBase, decorators: [{\n            type: Directive,\n            args: [{\n                    host: {\n                        '[class.mdc-list-item--disabled]': 'disabled',\n                        '[attr.aria-disabled]': 'disabled',\n                        '[attr.disabled]': '(_isButtonElement && disabled) || null',\n                    },\n                }]\n        }], ctorParameters: () => [], propDecorators: { _avatars: [{\n                type: ContentChildren,\n                args: [MatListItemAvatar, { descendants: false }]\n            }], _icons: [{\n                type: ContentChildren,\n                args: [MatListItemIcon, { descendants: false }]\n            }], lines: [{\n                type: Input\n            }], disableRipple: [{\n                type: Input\n            }], disabled: [{\n                type: Input\n            }] } });\n/**\n * Sanity checks the configuration of the list item with respect to the amount\n * of lines, whether there is a title, or if there is unscoped text content.\n *\n * The checks are extracted into a top-level function that can be dead-code\n * eliminated by Terser or other optimizers in production mode.\n */\nfunction sanityCheckListItemContent(item) {\n    const numTitles = item._titles.length;\n    const numLines = item._lines.length;\n    if (numTitles > 1) {\n        console.warn('A list item cannot have multiple titles.');\n    }\n    if (numTitles === 0 && numLines > 0) {\n        console.warn('A list item line can only be used if there is a list item title.');\n    }\n    if (numTitles === 0 &&\n        item._hasUnscopedTextContent &&\n        item._explicitLines !== null &&\n        item._explicitLines > 1) {\n        console.warn('A list item cannot have wrapping content without a title.');\n    }\n    if (numLines > 2 || (numLines === 2 && item._hasUnscopedTextContent)) {\n        console.warn('A list item can have at maximum three lines.');\n    }\n}\n\nclass MatActionList extends MatListBase {\n    // An navigation list is considered interactive, but does not extend the interactive list\n    // base class. We do this because as per MDC, items of interactive lists are only reachable\n    // through keyboard shortcuts. We want all items for the navigation list to be reachable\n    // through tab key as we do not intend to provide any special accessibility treatment. The\n    // accessibility treatment depends on how the end-user will interact with it.\n    _isNonInteractive = false;\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatActionList, deps: null, target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatActionList, isStandalone: true, selector: \"mat-action-list\", host: { attributes: { \"role\": \"group\" }, classAttribute: \"mat-mdc-action-list mat-mdc-list-base mdc-list\" }, providers: [{ provide: MatListBase, useExisting: MatActionList }], exportAs: [\"matActionList\"], usesInheritance: true, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\"], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatActionList, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-action-list', exportAs: 'matActionList', template: '<ng-content></ng-content>', host: {\n                        'class': 'mat-mdc-action-list mat-mdc-list-base mdc-list',\n                        'role': 'group',\n                    }, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [{ provide: MatListBase, useExisting: MatActionList }], styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\"] }]\n        }] });\n\n/**\n * Injection token that can be used to inject instances of `MatList`. It serves as\n * alternative token to the actual `MatList` class which could cause unnecessary\n * retention of the class and its component metadata.\n */\nconst MAT_LIST = new InjectionToken('MatList');\nclass MatList extends MatListBase {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatList, deps: null, target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatList, isStandalone: true, selector: \"mat-list\", host: { classAttribute: \"mat-mdc-list mat-mdc-list-base mdc-list\" }, providers: [{ provide: MatListBase, useExisting: MatList }], exportAs: [\"matList\"], usesInheritance: true, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\"], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatList, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-list', exportAs: 'matList', template: '<ng-content></ng-content>', host: {\n                        'class': 'mat-mdc-list mat-mdc-list-base mdc-list',\n                    }, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [{ provide: MatListBase, useExisting: MatList }], styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\"] }]\n        }] });\nclass MatListItem extends MatListItemBase {\n    _lines;\n    _titles;\n    _meta;\n    _unscopedContent;\n    _itemText;\n    /** Indicates whether an item in a `<mat-nav-list>` is the currently active page. */\n    get activated() {\n        return this._activated;\n    }\n    set activated(activated) {\n        this._activated = coerceBooleanProperty(activated);\n    }\n    _activated = false;\n    /**\n     * Determine the value of `aria-current`. Return 'page' if this item is an activated anchor tag.\n     * Otherwise, return `null`. This method is safe to use with server-side rendering.\n     */\n    _getAriaCurrent() {\n        return this._hostElement.nodeName === 'A' && this._activated ? 'page' : null;\n    }\n    _hasBothLeadingAndTrailing() {\n        return this._meta.length !== 0 && (this._avatars.length !== 0 || this._icons.length !== 0);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItem, deps: null, target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListItem, isStandalone: true, selector: \"mat-list-item, a[mat-list-item], button[mat-list-item]\", inputs: { activated: \"activated\" }, host: { properties: { \"class.mdc-list-item--activated\": \"activated\", \"class.mdc-list-item--with-leading-avatar\": \"_avatars.length !== 0\", \"class.mdc-list-item--with-leading-icon\": \"_icons.length !== 0\", \"class.mdc-list-item--with-trailing-meta\": \"_meta.length !== 0\", \"class.mat-mdc-list-item-both-leading-and-trailing\": \"_hasBothLeadingAndTrailing()\", \"class._mat-animation-noopable\": \"_noopAnimations\", \"attr.aria-current\": \"_getAriaCurrent()\" }, classAttribute: \"mat-mdc-list-item mdc-list-item\" }, queries: [{ propertyName: \"_lines\", predicate: MatListItemLine, descendants: true }, { propertyName: \"_titles\", predicate: MatListItemTitle, descendants: true }, { propertyName: \"_meta\", predicate: MatListItemMeta, descendants: true }], viewQueries: [{ propertyName: \"_unscopedContent\", first: true, predicate: [\"unscopedContent\"], descendants: true }, { propertyName: \"_itemText\", first: true, predicate: [\"text\"], descendants: true }], exportAs: [\"matListItem\"], usesInheritance: true, ngImport: i0, template: \"<ng-content select=\\\"[matListItemAvatar],[matListItemIcon]\\\"></ng-content>\\n\\n<span class=\\\"mdc-list-item__content\\\">\\n  <ng-content select=\\\"[matListItemTitle]\\\"></ng-content>\\n  <ng-content select=\\\"[matListItemLine]\\\"></ng-content>\\n  <span #unscopedContent class=\\\"mat-mdc-list-item-unscoped-content\\\"\\n        (cdkObserveContent)=\\\"_updateItemLines(true)\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</span>\\n\\n<ng-content select=\\\"[matListItemMeta]\\\"></ng-content>\\n\\n<ng-content select=\\\"mat-divider\\\"></ng-content>\\n\\n<!--\\n  Strong focus indicator element. MDC uses the `::before` pseudo element for the default\\n  focus/hover/selected state, so we need a separate element.\\n-->\\n<div class=\\\"mat-focus-indicator\\\"></div>\\n\", dependencies: [{ kind: \"directive\", type: CdkObserveContent, selector: \"[cdkObserveContent]\", inputs: [\"cdkObserveContentDisabled\", \"debounce\"], outputs: [\"cdkObserveContent\"], exportAs: [\"cdkObserveContent\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListItem, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-list-item, a[mat-list-item], button[mat-list-item]', exportAs: 'matListItem', host: {\n                        'class': 'mat-mdc-list-item mdc-list-item',\n                        '[class.mdc-list-item--activated]': 'activated',\n                        '[class.mdc-list-item--with-leading-avatar]': '_avatars.length !== 0',\n                        '[class.mdc-list-item--with-leading-icon]': '_icons.length !== 0',\n                        '[class.mdc-list-item--with-trailing-meta]': '_meta.length !== 0',\n                        // Utility class that makes it easier to target the case where there's both a leading\n                        // and a trailing icon. Avoids having to write out all the combinations.\n                        '[class.mat-mdc-list-item-both-leading-and-trailing]': '_hasBothLeadingAndTrailing()',\n                        '[class._mat-animation-noopable]': '_noopAnimations',\n                        '[attr.aria-current]': '_getAriaCurrent()',\n                    }, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, imports: [CdkObserveContent], template: \"<ng-content select=\\\"[matListItemAvatar],[matListItemIcon]\\\"></ng-content>\\n\\n<span class=\\\"mdc-list-item__content\\\">\\n  <ng-content select=\\\"[matListItemTitle]\\\"></ng-content>\\n  <ng-content select=\\\"[matListItemLine]\\\"></ng-content>\\n  <span #unscopedContent class=\\\"mat-mdc-list-item-unscoped-content\\\"\\n        (cdkObserveContent)=\\\"_updateItemLines(true)\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</span>\\n\\n<ng-content select=\\\"[matListItemMeta]\\\"></ng-content>\\n\\n<ng-content select=\\\"mat-divider\\\"></ng-content>\\n\\n<!--\\n  Strong focus indicator element. MDC uses the `::before` pseudo element for the default\\n  focus/hover/selected state, so we need a separate element.\\n-->\\n<div class=\\\"mat-focus-indicator\\\"></div>\\n\" }]\n        }], propDecorators: { _lines: [{\n                type: ContentChildren,\n                args: [MatListItemLine, { descendants: true }]\n            }], _titles: [{\n                type: ContentChildren,\n                args: [MatListItemTitle, { descendants: true }]\n            }], _meta: [{\n                type: ContentChildren,\n                args: [MatListItemMeta, { descendants: true }]\n            }], _unscopedContent: [{\n                type: ViewChild,\n                args: ['unscopedContent']\n            }], _itemText: [{\n                type: ViewChild,\n                args: ['text']\n            }], activated: [{\n                type: Input\n            }] } });\n\n/**\n * Injection token that can be used to reference instances of an `SelectionList`. It serves\n * as alternative token to an actual implementation which would result in circular references.\n * @docs-private\n */\nconst SELECTION_LIST = new InjectionToken('SelectionList');\nclass MatListOption extends MatListItemBase {\n    _selectionList = inject(SELECTION_LIST);\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _lines;\n    _titles;\n    _unscopedContent;\n    /**\n     * Emits when the selected state of the option has changed.\n     * Use to facilitate two-data binding to the `selected` property.\n     * @docs-private\n     */\n    selectedChange = new EventEmitter();\n    /** Whether the label should appear before or after the checkbox/radio. Defaults to 'after' */\n    togglePosition = 'after';\n    /**\n     * Whether the label should appear before or after the checkbox/radio. Defaults to 'after'\n     *\n     * @deprecated Use `togglePosition` instead.\n     * @breaking-change 17.0.0\n     */\n    get checkboxPosition() {\n        return this.togglePosition;\n    }\n    set checkboxPosition(value) {\n        this.togglePosition = value;\n    }\n    /**\n     * Theme color of the list option. This sets the color of the checkbox/radio.\n     * This API is supported in M2 themes only, it has no effect in M3 themes.\n     *\n     * For information on applying color variants in M3, see\n     * https://material.angular.io/guide/theming#using-component-color-variants.\n     */\n    get color() {\n        return this._color || this._selectionList.color;\n    }\n    set color(newValue) {\n        this._color = newValue;\n    }\n    _color;\n    /** Value of the option */\n    get value() {\n        return this._value;\n    }\n    set value(newValue) {\n        if (this.selected && newValue !== this.value && this._inputsInitialized) {\n            this.selected = false;\n        }\n        this._value = newValue;\n    }\n    _value;\n    /** Whether the option is selected. */\n    get selected() {\n        return this._selectionList.selectedOptions.isSelected(this);\n    }\n    set selected(value) {\n        const isSelected = coerceBooleanProperty(value);\n        if (isSelected !== this._selected) {\n            this._setSelected(isSelected);\n            if (isSelected || this._selectionList.multiple) {\n                this._selectionList._reportValueChange();\n            }\n        }\n    }\n    _selected = false;\n    /**\n     * This is set to true after the first OnChanges cycle so we don't\n     * clear the value of `selected` in the first cycle.\n     */\n    _inputsInitialized = false;\n    ngOnInit() {\n        const list = this._selectionList;\n        if (list._value && list._value.some(value => list.compareWith(this._value, value))) {\n            this._setSelected(true);\n        }\n        const wasSelected = this._selected;\n        // List options that are selected at initialization can't be reported properly to the form\n        // control. This is because it takes some time until the selection-list knows about all\n        // available options. Also it can happen that the ControlValueAccessor has an initial value\n        // that should be used instead. Deferring the value change report to the next tick ensures\n        // that the form control value is not being overwritten.\n        Promise.resolve().then(() => {\n            if (this._selected || wasSelected) {\n                this.selected = true;\n                this._changeDetectorRef.markForCheck();\n            }\n        });\n        this._inputsInitialized = true;\n    }\n    ngOnDestroy() {\n        super.ngOnDestroy();\n        if (this.selected) {\n            // We have to delay this until the next tick in order\n            // to avoid changed after checked errors.\n            Promise.resolve().then(() => {\n                this.selected = false;\n            });\n        }\n    }\n    /** Toggles the selection state of the option. */\n    toggle() {\n        this.selected = !this.selected;\n    }\n    /** Allows for programmatic focusing of the option. */\n    focus() {\n        this._hostElement.focus();\n    }\n    /** Gets the text label of the list option. Used for the typeahead functionality in the list. */\n    getLabel() {\n        const titleElement = this._titles?.get(0)?._elementRef.nativeElement;\n        // If there is no explicit title element, the unscoped text content\n        // is treated as the list item title.\n        const labelEl = titleElement || this._unscopedContent?.nativeElement;\n        return labelEl?.textContent || '';\n    }\n    /** Whether a checkbox is shown at the given position. */\n    _hasCheckboxAt(position) {\n        return this._selectionList.multiple && this._getTogglePosition() === position;\n    }\n    /** Where a radio indicator is shown at the given position. */\n    _hasRadioAt(position) {\n        return (!this._selectionList.multiple &&\n            this._getTogglePosition() === position &&\n            !this._selectionList.hideSingleSelectionIndicator);\n    }\n    /** Whether icons or avatars are shown at the given position. */\n    _hasIconsOrAvatarsAt(position) {\n        return this._hasProjected('icons', position) || this._hasProjected('avatars', position);\n    }\n    /** Gets whether the given type of element is projected at the specified position. */\n    _hasProjected(type, position) {\n        // If the checkbox/radio is shown at the specified position, neither icons or\n        // avatars can be shown at the position.\n        return (this._getTogglePosition() !== position &&\n            (type === 'avatars' ? this._avatars.length !== 0 : this._icons.length !== 0));\n    }\n    _handleBlur() {\n        this._selectionList._onTouched();\n    }\n    /** Gets the current position of the checkbox/radio. */\n    _getTogglePosition() {\n        return this.togglePosition || 'after';\n    }\n    /**\n     * Sets the selected state of the option.\n     * @returns Whether the value has changed.\n     */\n    _setSelected(selected) {\n        if (selected === this._selected) {\n            return false;\n        }\n        this._selected = selected;\n        if (selected) {\n            this._selectionList.selectedOptions.select(this);\n        }\n        else {\n            this._selectionList.selectedOptions.deselect(this);\n        }\n        this.selectedChange.emit(selected);\n        this._changeDetectorRef.markForCheck();\n        return true;\n    }\n    /**\n     * Notifies Angular that the option needs to be checked in the next change detection run.\n     * Mainly used to trigger an update of the list option if the disabled state of the selection\n     * list changed.\n     */\n    _markForCheck() {\n        this._changeDetectorRef.markForCheck();\n    }\n    /** Toggles the option's value based on a user interaction. */\n    _toggleOnInteraction() {\n        if (!this.disabled) {\n            if (this._selectionList.multiple) {\n                this.selected = !this.selected;\n                this._selectionList._emitChangeEvent([this]);\n            }\n            else if (!this.selected) {\n                this.selected = true;\n                this._selectionList._emitChangeEvent([this]);\n            }\n        }\n    }\n    /** Sets the tabindex of the list option. */\n    _setTabindex(value) {\n        this._hostElement.setAttribute('tabindex', value + '');\n    }\n    _hasBothLeadingAndTrailing() {\n        const hasLeading = this._hasProjected('avatars', 'before') ||\n            this._hasProjected('icons', 'before') ||\n            this._hasCheckboxAt('before') ||\n            this._hasRadioAt('before');\n        const hasTrailing = this._hasProjected('icons', 'after') ||\n            this._hasProjected('avatars', 'after') ||\n            this._hasCheckboxAt('after') ||\n            this._hasRadioAt('after');\n        return hasLeading && hasTrailing;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListOption, deps: null, target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"17.0.0\", version: \"19.0.0\", type: MatListOption, isStandalone: true, selector: \"mat-list-option\", inputs: { togglePosition: \"togglePosition\", checkboxPosition: \"checkboxPosition\", color: \"color\", value: \"value\", selected: \"selected\" }, outputs: { selectedChange: \"selectedChange\" }, host: { attributes: { \"role\": \"option\" }, listeners: { \"blur\": \"_handleBlur()\", \"click\": \"_toggleOnInteraction()\" }, properties: { \"class.mdc-list-item--selected\": \"selected && !_selectionList.multiple && _selectionList.hideSingleSelectionIndicator\", \"class.mdc-list-item--with-leading-avatar\": \"_hasProjected(\\\"avatars\\\", \\\"before\\\")\", \"class.mdc-list-item--with-leading-icon\": \"_hasProjected(\\\"icons\\\", \\\"before\\\")\", \"class.mdc-list-item--with-trailing-icon\": \"_hasProjected(\\\"icons\\\", \\\"after\\\")\", \"class.mat-mdc-list-option-with-trailing-avatar\": \"_hasProjected(\\\"avatars\\\", \\\"after\\\")\", \"class.mdc-list-item--with-leading-checkbox\": \"_hasCheckboxAt(\\\"before\\\")\", \"class.mdc-list-item--with-trailing-checkbox\": \"_hasCheckboxAt(\\\"after\\\")\", \"class.mdc-list-item--with-leading-radio\": \"_hasRadioAt(\\\"before\\\")\", \"class.mdc-list-item--with-trailing-radio\": \"_hasRadioAt(\\\"after\\\")\", \"class.mat-mdc-list-item-both-leading-and-trailing\": \"_hasBothLeadingAndTrailing()\", \"class.mat-accent\": \"color !== \\\"primary\\\" && color !== \\\"warn\\\"\", \"class.mat-warn\": \"color === \\\"warn\\\"\", \"class._mat-animation-noopable\": \"_noopAnimations\", \"attr.aria-selected\": \"selected\" }, classAttribute: \"mat-mdc-list-item mat-mdc-list-option mdc-list-item\" }, providers: [\n            { provide: MatListItemBase, useExisting: MatListOption },\n            { provide: LIST_OPTION, useExisting: MatListOption },\n        ], queries: [{ propertyName: \"_lines\", predicate: MatListItemLine, descendants: true }, { propertyName: \"_titles\", predicate: MatListItemTitle, descendants: true }], viewQueries: [{ propertyName: \"_unscopedContent\", first: true, predicate: [\"unscopedContent\"], descendants: true }], exportAs: [\"matListOption\"], usesInheritance: true, ngImport: i0, template: \"<!--\\n  Save icons and the pseudo checkbox/radio so that they can be re-used in the template without\\n  duplication. Also content can only be injected once so we need to extract icons/avatars\\n  into a template since we use it in multiple places.\\n-->\\n<ng-template #icons>\\n  <ng-content select=\\\"[matListItemAvatar],[matListItemIcon]\\\">\\n  </ng-content>\\n</ng-template>\\n\\n<ng-template #checkbox>\\n  <div class=\\\"mdc-checkbox\\\" [class.mdc-checkbox--disabled]=\\\"disabled\\\">\\n    <input type=\\\"checkbox\\\" class=\\\"mdc-checkbox__native-control\\\"\\n           [checked]=\\\"selected\\\" [disabled]=\\\"disabled\\\"/>\\n    <div class=\\\"mdc-checkbox__background\\\">\\n      <svg class=\\\"mdc-checkbox__checkmark\\\"\\n           viewBox=\\\"0 0 24 24\\\"\\n           aria-hidden=\\\"true\\\">\\n        <path class=\\\"mdc-checkbox__checkmark-path\\\"\\n              fill=\\\"none\\\"\\n              d=\\\"M1.73,12.91 8.1,19.28 22.79,4.59\\\"/>\\n      </svg>\\n      <div class=\\\"mdc-checkbox__mixedmark\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #radio>\\n  <div class=\\\"mdc-radio\\\" [class.mdc-radio--disabled]=\\\"disabled\\\">\\n    <input type=\\\"radio\\\" class=\\\"mdc-radio__native-control\\\"\\n           [checked]=\\\"selected\\\" [disabled]=\\\"disabled\\\"/>\\n    <div class=\\\"mdc-radio__background\\\">\\n      <div class=\\\"mdc-radio__outer-circle\\\"></div>\\n      <div class=\\\"mdc-radio__inner-circle\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n@if (_hasCheckboxAt('before')) {\\n  <!-- Container for the checkbox at start. -->\\n  <span class=\\\"mdc-list-item__start mat-mdc-list-option-checkbox-before\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"checkbox\\\"></ng-template>\\n  </span>\\n} @else if (_hasRadioAt('before')) {\\n  <!-- Container for the radio at the start. -->\\n  <span class=\\\"mdc-list-item__start mat-mdc-list-option-radio-before\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"radio\\\"></ng-template>\\n  </span>\\n}\\n<!-- Conditionally renders icons/avatars before the list item text. -->\\n@if (_hasIconsOrAvatarsAt('before')) {\\n  <ng-template [ngTemplateOutlet]=\\\"icons\\\"></ng-template>\\n}\\n\\n<!-- Text -->\\n<span class=\\\"mdc-list-item__content\\\">\\n  <ng-content select=\\\"[matListItemTitle]\\\"></ng-content>\\n  <ng-content select=\\\"[matListItemLine]\\\"></ng-content>\\n  <span #unscopedContent class=\\\"mat-mdc-list-item-unscoped-content\\\"\\n        (cdkObserveContent)=\\\"_updateItemLines(true)\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</span>\\n\\n@if (_hasCheckboxAt('after')) {\\n  <!-- Container for the checkbox at the end. -->\\n  <span class=\\\"mdc-list-item__end\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"checkbox\\\"></ng-template>\\n  </span>\\n} @else if (_hasRadioAt('after')) {\\n  <!-- Container for the radio at the end. -->\\n  <span class=\\\"mdc-list-item__end\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"radio\\\"></ng-template>\\n  </span>\\n}\\n\\n<!-- Conditionally renders icons/avatars after the list item text. -->\\n@if (_hasIconsOrAvatarsAt('after')) {\\n  <ng-template [ngTemplateOutlet]=\\\"icons\\\"></ng-template>\\n}\\n\\n<!-- Divider -->\\n<ng-content select=\\\"mat-divider\\\"></ng-content>\\n\\n<!--\\n  Strong focus indicator element. MDC uses the `::before` pseudo element for the default\\n  focus/hover/selected state, so we need a separate element.\\n-->\\n<div class=\\\"mat-focus-indicator\\\"></div>\\n\", styles: [\".mat-mdc-list-option-with-trailing-avatar.mdc-list-item,[dir=rtl] .mat-mdc-list-option-with-trailing-avatar.mdc-list-item{padding-left:0;padding-right:0}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{margin-left:16px;margin-right:16px;width:40px;height:40px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{border-radius:50%}.mat-mdc-list-option .mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mat-mdc-list-option .mdc-checkbox--disabled{cursor:default;pointer-events:none}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled{opacity:.5}}.mat-mdc-list-option .mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mat-mdc-list-option .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-list-option .mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover .mdc-checkbox__native-control~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__checkmark{color:CanvasText}}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}}.mat-mdc-list-option .mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mat-mdc-list-option .mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__mixedmark{margin:0 1px}}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-list-option._mat-animation-noopable .mdc-checkbox *,.mat-mdc-list-option._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-list-option .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-list-option .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-list-option .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:\\\"\\\";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-list-option .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-list-option .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-list-option._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-list-option._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-list-option .mdc-checkbox__native-control,.mat-mdc-list-option .mdc-radio__native-control{display:none}@media(forced-colors: active){.mat-mdc-list-option.mdc-list-item--selected::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.mat-mdc-list-option.mdc-list-item--selected [dir=rtl]::after{right:auto;left:16px}}\"], dependencies: [{ kind: \"directive\", type: NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\", \"ngTemplateOutletInjector\"] }, { kind: \"directive\", type: CdkObserveContent, selector: \"[cdkObserveContent]\", inputs: [\"cdkObserveContentDisabled\", \"debounce\"], outputs: [\"cdkObserveContent\"], exportAs: [\"cdkObserveContent\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListOption, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-list-option', exportAs: 'matListOption', host: {\n                        'class': 'mat-mdc-list-item mat-mdc-list-option mdc-list-item',\n                        'role': 'option',\n                        // As per MDC, only list items without checkbox or radio indicator should receive the\n                        // `--selected` class.\n                        '[class.mdc-list-item--selected]': 'selected && !_selectionList.multiple && _selectionList.hideSingleSelectionIndicator',\n                        // Based on the checkbox/radio position and whether there are icons or avatars, we apply MDC's\n                        // list-item `--leading` and `--trailing` classes.\n                        '[class.mdc-list-item--with-leading-avatar]': '_hasProjected(\"avatars\", \"before\")',\n                        '[class.mdc-list-item--with-leading-icon]': '_hasProjected(\"icons\", \"before\")',\n                        '[class.mdc-list-item--with-trailing-icon]': '_hasProjected(\"icons\", \"after\")',\n                        '[class.mat-mdc-list-option-with-trailing-avatar]': '_hasProjected(\"avatars\", \"after\")',\n                        // Based on the checkbox/radio position, we apply the `--leading` or `--trailing` MDC classes\n                        // which ensure that the checkbox/radio is positioned correctly within the list item.\n                        '[class.mdc-list-item--with-leading-checkbox]': '_hasCheckboxAt(\"before\")',\n                        '[class.mdc-list-item--with-trailing-checkbox]': '_hasCheckboxAt(\"after\")',\n                        '[class.mdc-list-item--with-leading-radio]': '_hasRadioAt(\"before\")',\n                        '[class.mdc-list-item--with-trailing-radio]': '_hasRadioAt(\"after\")',\n                        // Utility class that makes it easier to target the case where there's both a leading\n                        // and a trailing icon. Avoids having to write out all the combinations.\n                        '[class.mat-mdc-list-item-both-leading-and-trailing]': '_hasBothLeadingAndTrailing()',\n                        '[class.mat-accent]': 'color !== \"primary\" && color !== \"warn\"',\n                        '[class.mat-warn]': 'color === \"warn\"',\n                        '[class._mat-animation-noopable]': '_noopAnimations',\n                        '[attr.aria-selected]': 'selected',\n                        '(blur)': '_handleBlur()',\n                        '(click)': '_toggleOnInteraction()',\n                    }, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [\n                        { provide: MatListItemBase, useExisting: MatListOption },\n                        { provide: LIST_OPTION, useExisting: MatListOption },\n                    ], imports: [NgTemplateOutlet, CdkObserveContent], template: \"<!--\\n  Save icons and the pseudo checkbox/radio so that they can be re-used in the template without\\n  duplication. Also content can only be injected once so we need to extract icons/avatars\\n  into a template since we use it in multiple places.\\n-->\\n<ng-template #icons>\\n  <ng-content select=\\\"[matListItemAvatar],[matListItemIcon]\\\">\\n  </ng-content>\\n</ng-template>\\n\\n<ng-template #checkbox>\\n  <div class=\\\"mdc-checkbox\\\" [class.mdc-checkbox--disabled]=\\\"disabled\\\">\\n    <input type=\\\"checkbox\\\" class=\\\"mdc-checkbox__native-control\\\"\\n           [checked]=\\\"selected\\\" [disabled]=\\\"disabled\\\"/>\\n    <div class=\\\"mdc-checkbox__background\\\">\\n      <svg class=\\\"mdc-checkbox__checkmark\\\"\\n           viewBox=\\\"0 0 24 24\\\"\\n           aria-hidden=\\\"true\\\">\\n        <path class=\\\"mdc-checkbox__checkmark-path\\\"\\n              fill=\\\"none\\\"\\n              d=\\\"M1.73,12.91 8.1,19.28 22.79,4.59\\\"/>\\n      </svg>\\n      <div class=\\\"mdc-checkbox__mixedmark\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<ng-template #radio>\\n  <div class=\\\"mdc-radio\\\" [class.mdc-radio--disabled]=\\\"disabled\\\">\\n    <input type=\\\"radio\\\" class=\\\"mdc-radio__native-control\\\"\\n           [checked]=\\\"selected\\\" [disabled]=\\\"disabled\\\"/>\\n    <div class=\\\"mdc-radio__background\\\">\\n      <div class=\\\"mdc-radio__outer-circle\\\"></div>\\n      <div class=\\\"mdc-radio__inner-circle\\\"></div>\\n    </div>\\n  </div>\\n</ng-template>\\n\\n@if (_hasCheckboxAt('before')) {\\n  <!-- Container for the checkbox at start. -->\\n  <span class=\\\"mdc-list-item__start mat-mdc-list-option-checkbox-before\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"checkbox\\\"></ng-template>\\n  </span>\\n} @else if (_hasRadioAt('before')) {\\n  <!-- Container for the radio at the start. -->\\n  <span class=\\\"mdc-list-item__start mat-mdc-list-option-radio-before\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"radio\\\"></ng-template>\\n  </span>\\n}\\n<!-- Conditionally renders icons/avatars before the list item text. -->\\n@if (_hasIconsOrAvatarsAt('before')) {\\n  <ng-template [ngTemplateOutlet]=\\\"icons\\\"></ng-template>\\n}\\n\\n<!-- Text -->\\n<span class=\\\"mdc-list-item__content\\\">\\n  <ng-content select=\\\"[matListItemTitle]\\\"></ng-content>\\n  <ng-content select=\\\"[matListItemLine]\\\"></ng-content>\\n  <span #unscopedContent class=\\\"mat-mdc-list-item-unscoped-content\\\"\\n        (cdkObserveContent)=\\\"_updateItemLines(true)\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</span>\\n\\n@if (_hasCheckboxAt('after')) {\\n  <!-- Container for the checkbox at the end. -->\\n  <span class=\\\"mdc-list-item__end\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"checkbox\\\"></ng-template>\\n  </span>\\n} @else if (_hasRadioAt('after')) {\\n  <!-- Container for the radio at the end. -->\\n  <span class=\\\"mdc-list-item__end\\\">\\n    <ng-template [ngTemplateOutlet]=\\\"radio\\\"></ng-template>\\n  </span>\\n}\\n\\n<!-- Conditionally renders icons/avatars after the list item text. -->\\n@if (_hasIconsOrAvatarsAt('after')) {\\n  <ng-template [ngTemplateOutlet]=\\\"icons\\\"></ng-template>\\n}\\n\\n<!-- Divider -->\\n<ng-content select=\\\"mat-divider\\\"></ng-content>\\n\\n<!--\\n  Strong focus indicator element. MDC uses the `::before` pseudo element for the default\\n  focus/hover/selected state, so we need a separate element.\\n-->\\n<div class=\\\"mat-focus-indicator\\\"></div>\\n\", styles: [\".mat-mdc-list-option-with-trailing-avatar.mdc-list-item,[dir=rtl] .mat-mdc-list-option-with-trailing-avatar.mdc-list-item{padding-left:0;padding-right:0}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{margin-left:16px;margin-right:16px;width:40px;height:40px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{border-radius:50%}.mat-mdc-list-option .mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mat-mdc-list-option .mdc-checkbox--disabled{cursor:default;pointer-events:none}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled{opacity:.5}}.mat-mdc-list-option .mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mat-mdc-list-option .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-list-option .mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover .mdc-checkbox__native-control~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mat-mdc-list-option .mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__checkmark{color:CanvasText}}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}}.mat-mdc-list-option .mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mat-mdc-list-option .mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mat-mdc-list-option .mdc-checkbox__mixedmark{margin:0 1px}}.mat-mdc-list-option .mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-list-option._mat-animation-noopable .mdc-checkbox *,.mat-mdc-list-option._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-list-option .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-list-option .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-list-option .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:\\\"\\\";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-list-option .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-list-option .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-list-option._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-list-option._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-list-option .mdc-checkbox__native-control,.mat-mdc-list-option .mdc-radio__native-control{display:none}@media(forced-colors: active){.mat-mdc-list-option.mdc-list-item--selected::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.mat-mdc-list-option.mdc-list-item--selected [dir=rtl]::after{right:auto;left:16px}}\"] }]\n        }], propDecorators: { _lines: [{\n                type: ContentChildren,\n                args: [MatListItemLine, { descendants: true }]\n            }], _titles: [{\n                type: ContentChildren,\n                args: [MatListItemTitle, { descendants: true }]\n            }], _unscopedContent: [{\n                type: ViewChild,\n                args: ['unscopedContent']\n            }], selectedChange: [{\n                type: Output\n            }], togglePosition: [{\n                type: Input\n            }], checkboxPosition: [{\n                type: Input\n            }], color: [{\n                type: Input\n            }], value: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }] } });\n\n/**\n * Directive whose purpose is to add the mat- CSS styling to this selector.\n * @docs-private\n */\nclass MatListSubheaderCssMatStyler {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListSubheaderCssMatStyler, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatListSubheaderCssMatStyler, isStandalone: true, selector: \"[mat-subheader], [matSubheader]\", host: { classAttribute: \"mat-mdc-subheader mdc-list-group__subheader\" }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListSubheaderCssMatStyler, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[mat-subheader], [matSubheader]',\n                    // TODO(mmalerba): MDC's subheader font looks identical to the list item font, figure out why and\n                    //  make a change in one of the repos to visually distinguish.\n                    host: { 'class': 'mat-mdc-subheader mdc-list-group__subheader' },\n                }]\n        }] });\n\n/**\n * Injection token that can be used to inject instances of `MatNavList`. It serves as\n * alternative token to the actual `MatNavList` class which could cause unnecessary\n * retention of the class and its component metadata.\n */\nconst MAT_NAV_LIST = new InjectionToken('MatNavList');\nclass MatNavList extends MatListBase {\n    // An navigation list is considered interactive, but does not extend the interactive list\n    // base class. We do this because as per MDC, items of interactive lists are only reachable\n    // through keyboard shortcuts. We want all items for the navigation list to be reachable\n    // through tab key as we do not intend to provide any special accessibility treatment. The\n    // accessibility treatment depends on how the end-user will interact with it.\n    _isNonInteractive = false;\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatNavList, deps: null, target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatNavList, isStandalone: true, selector: \"mat-nav-list\", host: { attributes: { \"role\": \"navigation\" }, classAttribute: \"mat-mdc-nav-list mat-mdc-list-base mdc-list\" }, providers: [{ provide: MatListBase, useExisting: MatNavList }], exportAs: [\"matNavList\"], usesInheritance: true, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\"], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatNavList, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-nav-list', exportAs: 'matNavList', template: '<ng-content></ng-content>', host: {\n                        'class': 'mat-mdc-nav-list mat-mdc-list-base mdc-list',\n                        'role': 'navigation',\n                    }, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [{ provide: MatListBase, useExisting: MatNavList }], styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\"] }]\n        }] });\n\nconst MAT_SELECTION_LIST_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MatSelectionList),\n    multi: true,\n};\n/** Change event that is being fired whenever the selected state of an option changes. */\nclass MatSelectionListChange {\n    source;\n    options;\n    constructor(\n    /** Reference to the selection list that emitted the event. */\n    source, \n    /** Reference to the options that have been changed. */\n    options) {\n        this.source = source;\n        this.options = options;\n    }\n}\nclass MatSelectionList extends MatListBase {\n    _element = inject(ElementRef);\n    _ngZone = inject(NgZone);\n    _initialized = false;\n    _keyManager;\n    /** Emits when the list has been destroyed. */\n    _destroyed = new Subject();\n    /** Whether the list has been destroyed. */\n    _isDestroyed;\n    /** View to model callback that should be called whenever the selected options change. */\n    _onChange = (_) => { };\n    _items;\n    /** Emits a change event whenever the selected state of an option changes. */\n    selectionChange = new EventEmitter();\n    /**\n     * Theme color of the selection list. This sets the checkbox color for all\n     * list options. This API is supported in M2 themes only, it has no effect in\n     * M3 themes.\n     *\n     * For information on applying color variants in M3, see\n     * https://material.angular.io/guide/theming#using-component-color-variants.\n     */\n    color = 'accent';\n    /**\n     * Function used for comparing an option against the selected value when determining which\n     * options should appear as selected. The first argument is the value of an options. The second\n     * one is a value from the selected value. A boolean must be returned.\n     */\n    compareWith = (a1, a2) => a1 === a2;\n    /** Whether selection is limited to one or multiple items (default multiple). */\n    get multiple() {\n        return this._multiple;\n    }\n    set multiple(value) {\n        const newValue = coerceBooleanProperty(value);\n        if (newValue !== this._multiple) {\n            if ((typeof ngDevMode === 'undefined' || ngDevMode) && this._initialized) {\n                throw new Error('Cannot change `multiple` mode of mat-selection-list after initialization.');\n            }\n            this._multiple = newValue;\n            this.selectedOptions = new SelectionModel(this._multiple, this.selectedOptions.selected);\n        }\n    }\n    _multiple = true;\n    /** Whether radio indicator for all list items is hidden. */\n    get hideSingleSelectionIndicator() {\n        return this._hideSingleSelectionIndicator;\n    }\n    set hideSingleSelectionIndicator(value) {\n        this._hideSingleSelectionIndicator = coerceBooleanProperty(value);\n    }\n    _hideSingleSelectionIndicator = this._defaultOptions?.hideSingleSelectionIndicator ?? false;\n    /** The currently selected options. */\n    selectedOptions = new SelectionModel(this._multiple);\n    /** Keeps track of the currently-selected value. */\n    _value;\n    /** View to model callback that should be called if the list or its options lost focus. */\n    _onTouched = () => { };\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    constructor() {\n        super();\n        this._isNonInteractive = false;\n    }\n    ngAfterViewInit() {\n        // Mark the selection list as initialized so that the `multiple`\n        // binding can no longer be changed.\n        this._initialized = true;\n        this._setupRovingTabindex();\n        // These events are bound outside the zone, because they don't change\n        // any change-detected properties and they can trigger timeouts.\n        this._ngZone.runOutsideAngular(() => {\n            this._element.nativeElement.addEventListener('focusin', this._handleFocusin);\n            this._element.nativeElement.addEventListener('focusout', this._handleFocusout);\n        });\n        if (this._value) {\n            this._setOptionsFromValues(this._value);\n        }\n        this._watchForSelectionChange();\n    }\n    ngOnChanges(changes) {\n        const disabledChanges = changes['disabled'];\n        const disableRippleChanges = changes['disableRipple'];\n        const hideSingleSelectionIndicatorChanges = changes['hideSingleSelectionIndicator'];\n        if ((disableRippleChanges && !disableRippleChanges.firstChange) ||\n            (disabledChanges && !disabledChanges.firstChange) ||\n            (hideSingleSelectionIndicatorChanges && !hideSingleSelectionIndicatorChanges.firstChange)) {\n            this._markOptionsForCheck();\n        }\n    }\n    ngOnDestroy() {\n        this._keyManager?.destroy();\n        this._element.nativeElement.removeEventListener('focusin', this._handleFocusin);\n        this._element.nativeElement.removeEventListener('focusout', this._handleFocusout);\n        this._destroyed.next();\n        this._destroyed.complete();\n        this._isDestroyed = true;\n    }\n    /** Focuses the selection list. */\n    focus(options) {\n        this._element.nativeElement.focus(options);\n    }\n    /** Selects all of the options. Returns the options that changed as a result. */\n    selectAll() {\n        return this._setAllOptionsSelected(true);\n    }\n    /** Deselects all of the options. Returns the options that changed as a result. */\n    deselectAll() {\n        return this._setAllOptionsSelected(false);\n    }\n    /** Reports a value change to the ControlValueAccessor */\n    _reportValueChange() {\n        // Stop reporting value changes after the list has been destroyed. This avoids\n        // cases where the list might wrongly reset its value once it is removed, but\n        // the form control is still live.\n        if (this.options && !this._isDestroyed) {\n            const value = this._getSelectedOptionValues();\n            this._onChange(value);\n            this._value = value;\n        }\n    }\n    /** Emits a change event if the selected state of an option changed. */\n    _emitChangeEvent(options) {\n        this.selectionChange.emit(new MatSelectionListChange(this, options));\n    }\n    /** Implemented as part of ControlValueAccessor. */\n    writeValue(values) {\n        this._value = values;\n        if (this.options) {\n            this._setOptionsFromValues(values || []);\n        }\n    }\n    /** Implemented as a part of ControlValueAccessor. */\n    setDisabledState(isDisabled) {\n        this.disabled = isDisabled;\n        this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Whether the *entire* selection list is disabled. When true, each list item is also disabled\n     * and each list item is removed from the tab order (has tabindex=\"-1\").\n     */\n    get disabled() {\n        return this._selectionListDisabled;\n    }\n    set disabled(value) {\n        // Update the disabled state of this list. Write to `this._selectionListDisabled` instead of\n        // `super.disabled`. That is to avoid closure compiler compatibility issues with assigning to\n        // a super property.\n        this._selectionListDisabled = coerceBooleanProperty(value);\n        if (this._selectionListDisabled) {\n            this._keyManager?.setActiveItem(-1);\n        }\n    }\n    _selectionListDisabled = false;\n    /** Implemented as part of ControlValueAccessor. */\n    registerOnChange(fn) {\n        this._onChange = fn;\n    }\n    /** Implemented as part of ControlValueAccessor. */\n    registerOnTouched(fn) {\n        this._onTouched = fn;\n    }\n    /** Watches for changes in the selected state of the options and updates the list accordingly. */\n    _watchForSelectionChange() {\n        this.selectedOptions.changed.pipe(takeUntil(this._destroyed)).subscribe(event => {\n            // Sync external changes to the model back to the options.\n            for (let item of event.added) {\n                item.selected = true;\n            }\n            for (let item of event.removed) {\n                item.selected = false;\n            }\n            if (!this._containsFocus()) {\n                this._resetActiveOption();\n            }\n        });\n    }\n    /** Sets the selected options based on the specified values. */\n    _setOptionsFromValues(values) {\n        this.options.forEach(option => option._setSelected(false));\n        values.forEach(value => {\n            const correspondingOption = this.options.find(option => {\n                // Skip options that are already in the model. This allows us to handle cases\n                // where the same primitive value is selected multiple times.\n                return option.selected ? false : this.compareWith(option.value, value);\n            });\n            if (correspondingOption) {\n                correspondingOption._setSelected(true);\n            }\n        });\n    }\n    /** Returns the values of the selected options. */\n    _getSelectedOptionValues() {\n        return this.options.filter(option => option.selected).map(option => option.value);\n    }\n    /** Marks all the options to be checked in the next change detection run. */\n    _markOptionsForCheck() {\n        if (this.options) {\n            this.options.forEach(option => option._markForCheck());\n        }\n    }\n    /**\n     * Sets the selected state on all of the options\n     * and emits an event if anything changed.\n     */\n    _setAllOptionsSelected(isSelected, skipDisabled) {\n        // Keep track of whether anything changed, because we only want to\n        // emit the changed event when something actually changed.\n        const changedOptions = [];\n        this.options.forEach(option => {\n            if ((!skipDisabled || !option.disabled) && option._setSelected(isSelected)) {\n                changedOptions.push(option);\n            }\n        });\n        if (changedOptions.length) {\n            this._reportValueChange();\n        }\n        return changedOptions;\n    }\n    // Note: This getter exists for backwards compatibility. The `_items` query list\n    // cannot be named `options` as it will be picked up by the interactive list base.\n    /** The option components contained within this selection-list. */\n    get options() {\n        return this._items;\n    }\n    /** Handles keydown events within the list. */\n    _handleKeydown(event) {\n        const activeItem = this._keyManager.activeItem;\n        if ((event.keyCode === ENTER || event.keyCode === SPACE) &&\n            !this._keyManager.isTyping() &&\n            activeItem &&\n            !activeItem.disabled) {\n            event.preventDefault();\n            activeItem._toggleOnInteraction();\n        }\n        else if (event.keyCode === A &&\n            this.multiple &&\n            !this._keyManager.isTyping() &&\n            hasModifierKey(event, 'ctrlKey')) {\n            const shouldSelect = this.options.some(option => !option.disabled && !option.selected);\n            event.preventDefault();\n            this._emitChangeEvent(this._setAllOptionsSelected(shouldSelect, true));\n        }\n        else {\n            this._keyManager.onKeydown(event);\n        }\n    }\n    /** Handles focusout events within the list. */\n    _handleFocusout = () => {\n        // Focus takes a while to update so we have to wrap our call in a timeout.\n        setTimeout(() => {\n            if (!this._containsFocus()) {\n                this._resetActiveOption();\n            }\n        });\n    };\n    /** Handles focusin events within the list. */\n    _handleFocusin = (event) => {\n        if (this.disabled) {\n            return;\n        }\n        const activeIndex = this._items\n            .toArray()\n            .findIndex(item => item._elementRef.nativeElement.contains(event.target));\n        if (activeIndex > -1) {\n            this._setActiveOption(activeIndex);\n        }\n        else {\n            this._resetActiveOption();\n        }\n    };\n    /**\n     * Sets up the logic for maintaining the roving tabindex.\n     *\n     * `skipPredicate` determines if key manager should avoid putting a given list item in the tab\n     * index. Allow disabled list items to receive focus to align with WAI ARIA recommendation.\n     * Normally WAI ARIA's instructions are to exclude disabled items from the tab order, but it\n     * makes a few exceptions for compound widgets.\n     *\n     * From [Developing a Keyboard Interface](\n     * https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/):\n     *   \"For the following composite widget elements, keep them focusable when disabled: Options in a\n     *   Listbox...\"\n     */\n    _setupRovingTabindex() {\n        this._keyManager = new FocusKeyManager(this._items)\n            .withHomeAndEnd()\n            .withTypeAhead()\n            .withWrap()\n            .skipPredicate(() => this.disabled);\n        // Set the initial focus.\n        this._resetActiveOption();\n        // Move the tabindex to the currently-focused list item.\n        this._keyManager.change.subscribe(activeItemIndex => this._setActiveOption(activeItemIndex));\n        // If the active item is removed from the list, reset back to the first one.\n        this._items.changes.pipe(takeUntil(this._destroyed)).subscribe(() => {\n            const activeItem = this._keyManager.activeItem;\n            if (!activeItem || this._items.toArray().indexOf(activeItem) === -1) {\n                this._resetActiveOption();\n            }\n        });\n    }\n    /**\n     * Sets an option as active.\n     * @param index Index of the active option. If set to -1, no option will be active.\n     */\n    _setActiveOption(index) {\n        this._items.forEach((item, itemIndex) => item._setTabindex(itemIndex === index ? 0 : -1));\n        this._keyManager.updateActiveItem(index);\n    }\n    /**\n     * Resets the active option. When the list is disabled, remove all options from to the tab order.\n     * Otherwise, focus the first selected option.\n     */\n    _resetActiveOption() {\n        if (this.disabled) {\n            this._setActiveOption(-1);\n            return;\n        }\n        const activeItem = this._items.find(item => item.selected && !item.disabled) || this._items.first;\n        this._setActiveOption(activeItem ? this._items.toArray().indexOf(activeItem) : -1);\n    }\n    /** Returns whether the focus is currently within the list. */\n    _containsFocus() {\n        const activeElement = _getFocusedElementPierceShadowDom();\n        return activeElement && this._element.nativeElement.contains(activeElement);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatSelectionList, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatSelectionList, isStandalone: true, selector: \"mat-selection-list\", inputs: { color: \"color\", compareWith: \"compareWith\", multiple: \"multiple\", hideSingleSelectionIndicator: \"hideSingleSelectionIndicator\", disabled: \"disabled\" }, outputs: { selectionChange: \"selectionChange\" }, host: { attributes: { \"role\": \"listbox\" }, listeners: { \"keydown\": \"_handleKeydown($event)\" }, properties: { \"attr.aria-multiselectable\": \"multiple\" }, classAttribute: \"mat-mdc-selection-list mat-mdc-list-base mdc-list\" }, providers: [\n            MAT_SELECTION_LIST_VALUE_ACCESSOR,\n            { provide: MatListBase, useExisting: MatSelectionList },\n            { provide: SELECTION_LIST, useExisting: MatSelectionList },\n        ], queries: [{ propertyName: \"_items\", predicate: MatListOption, descendants: true }], exportAs: [\"matSelectionList\"], usesInheritance: true, usesOnChanges: true, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\"], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatSelectionList, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-selection-list', exportAs: 'matSelectionList', host: {\n                        'class': 'mat-mdc-selection-list mat-mdc-list-base mdc-list',\n                        'role': 'listbox',\n                        '[attr.aria-multiselectable]': 'multiple',\n                        '(keydown)': '_handleKeydown($event)',\n                    }, template: '<ng-content></ng-content>', encapsulation: ViewEncapsulation.None, providers: [\n                        MAT_SELECTION_LIST_VALUE_ACCESSOR,\n                        { provide: MatListBase, useExisting: MatSelectionList },\n                        { provide: SELECTION_LIST, useExisting: MatSelectionList },\n                    ], changeDetection: ChangeDetectionStrategy.OnPush, styles: [\".mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mdc-list-list-item-container-color, transparent);border-radius:var(--mdc-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:\\\"\\\";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-leading-icon-size, 24px);height:var(--mdc-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size, 40px);height:var(--mdc-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mdc-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mdc-list-list-item-trailing-icon-size, 24px);height:var(--mdc-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mdc-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mdc-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mdc-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mdc-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mdc-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mdc-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mdc-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mdc-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mdc-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:\\\"\\\";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:\\\"\\\";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mdc-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:\\\"\\\";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:\\\"\\\"}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}\"] }]\n        }], ctorParameters: () => [], propDecorators: { _items: [{\n                type: ContentChildren,\n                args: [MatListOption, { descendants: true }]\n            }], selectionChange: [{\n                type: Output\n            }], color: [{\n                type: Input\n            }], compareWith: [{\n                type: Input\n            }], multiple: [{\n                type: Input\n            }], hideSingleSelectionIndicator: [{\n                type: Input\n            }], disabled: [{\n                type: Input\n            }] } });\n\nclass MatListModule {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListModule, deps: [], target: i0.FactoryTarget.NgModule });\n    static mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListModule, imports: [ObserversModule,\n            MatCommonModule,\n            MatRippleModule,\n            MatPseudoCheckboxModule,\n            MatList,\n            MatActionList,\n            MatNavList,\n            MatSelectionList,\n            MatListItem,\n            MatListOption,\n            MatListSubheaderCssMatStyler,\n            MatListItemAvatar,\n            MatListItemIcon,\n            MatListItemLine,\n            MatListItemTitle,\n            MatListItemMeta], exports: [MatList,\n            MatActionList,\n            MatNavList,\n            MatSelectionList,\n            MatListItem,\n            MatListOption,\n            MatListItemAvatar,\n            MatListItemIcon,\n            MatListSubheaderCssMatStyler,\n            MatDividerModule,\n            MatListItemLine,\n            MatListItemTitle,\n            MatListItemMeta] });\n    static inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListModule, imports: [ObserversModule,\n            MatCommonModule,\n            MatRippleModule,\n            MatPseudoCheckboxModule, MatDividerModule] });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatListModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        ObserversModule,\n                        MatCommonModule,\n                        MatRippleModule,\n                        MatPseudoCheckboxModule,\n                        MatList,\n                        MatActionList,\n                        MatNavList,\n                        MatSelectionList,\n                        MatListItem,\n                        MatListOption,\n                        MatListSubheaderCssMatStyler,\n                        MatListItemAvatar,\n                        MatListItemIcon,\n                        MatListItemLine,\n                        MatListItemTitle,\n                        MatListItemMeta,\n                    ],\n                    exports: [\n                        MatList,\n                        MatActionList,\n                        MatNavList,\n                        MatSelectionList,\n                        MatListItem,\n                        MatListOption,\n                        MatListItemAvatar,\n                        MatListItemIcon,\n                        MatListSubheaderCssMatStyler,\n                        MatDividerModule,\n                        MatListItemLine,\n                        MatListItemTitle,\n                        MatListItemMeta,\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MAT_LIST, MAT_LIST_CONFIG, MAT_NAV_LIST, MAT_SELECTION_LIST_VALUE_ACCESSOR, MatActionList, MatList, MatListItem, MatListItemAvatar, MatListItemIcon, MatListItemLine, MatListItemMeta, MatListItemTitle, MatListModule, MatListOption, MatListSubheaderCssMatStyler, MatNavList, MatSelectionList, MatSelectionListChange, SELECTION_LIST, _MatListItemGraphicBase };\n","export const I18nKeys = {\r\n  NoTranslate: 'NoTranslate',\r\n  FromPrimary: 'FromPrimary',\r\n  FromOther: 'FromOther',\r\n  LinkReadOnly: 'LinkReadOnly',\r\n  LinkShared: 'LinkShared',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { Of } from '../../../../../../../../core';\r\nimport { FormLanguage, Language } from '../../../../form/form-languages.model';\r\nimport { FieldReader } from '../../../../localization/field-reader';\r\nimport { TranslationLinks } from '../../../../localization/translation-link.constants';\r\nimport { EavEntityAttributes } from '../../../../shared/models/eav';\r\nimport { I18nKeys } from './translate-menu-dialog.constants';\r\nimport { TranslateMenuDialogTemplateLanguage } from './translate-menu-dialog.models';\r\n\r\nexport function getTemplateLanguages(\r\n  config: { fieldName: string }, // FieldConfigSet,\r\n  language: FormLanguage,\r\n  languages: Language[],\r\n  attributes: EavEntityAttributes,\r\n  linkType: Of<typeof TranslationLinks>,\r\n): TranslateMenuDialogTemplateLanguage[] {\r\n  const templateLanguages = languages\r\n    .filter(lang => lang.NameId !== language.current)\r\n    .map(lang => {\r\n      const values = attributes[config.fieldName];\r\n      const disabled = (linkType === TranslationLinks.LinkReadWrite && !lang.IsAllowed)\r\n        || !new FieldReader(values, FormLanguage.diffCurrent(language, lang.NameId)).hasEditableValues;\r\n      const templateLanguage: TranslateMenuDialogTemplateLanguage = {\r\n        key: lang.NameId,\r\n        disabled,\r\n      };\r\n      return templateLanguage;\r\n    });\r\n  return templateLanguages;\r\n}\r\n\r\nexport function getTemplateLanguagesWithContent(\r\n  language: FormLanguage,\r\n  languages: Language[],\r\n  attributes: EavEntityAttributes,\r\n  linkType: Of<typeof TranslationLinks>,\r\n  translatableFields?: string[],\r\n): TranslateMenuDialogTemplateLanguage[] {\r\n  const templateLanguages = languages\r\n    .filter(lang => lang.NameId !== language.current)\r\n    .map(lang => {\r\n      let countTranslatableFields: number = 0;\r\n      let countTranslatableFieldsWithContent: number = 0;\r\n      let isDisabled: boolean = false;\r\n      const langDefToUse = FormLanguage.diffCurrent(language, lang.NameId);\r\n      translatableFields.forEach(field => {\r\n        const values = attributes[field];\r\n        const fieldReader = new FieldReader(values, langDefToUse);\r\n        countTranslatableFields += fieldReader.countEditable(); // LocalizationHelpers.countEditableValues(values, langDefToUse);\r\n        countTranslatableFieldsWithContent += fieldReader.countEditableWithContents(); // LocalizationHelpers.countEditableValuesWithContent(values, langDefToUse);\r\n        isDisabled = (linkType === TranslationLinks.LinkReadWrite && !lang.IsAllowed)\r\n          || countTranslatableFields == 0;\r\n      });\r\n      const templateLanguage: TranslateMenuDialogTemplateLanguage = {\r\n        key: lang.NameId,\r\n        disabled: isDisabled,\r\n        noTranslatableFields: countTranslatableFields,\r\n        noTranslatableFieldsThatHaveContent: countTranslatableFieldsWithContent,\r\n      };\r\n      return templateLanguage;\r\n    });\r\n  return templateLanguages;\r\n}\r\n\r\nexport function findI18nKey(translationLink: Of<typeof TranslationLinks>): Of<typeof I18nKeys> {\r\n  switch (translationLink) {\r\n    case TranslationLinks.Translate:\r\n      return I18nKeys.FromPrimary;\r\n    case TranslationLinks.DontTranslate:\r\n      return I18nKeys.NoTranslate;\r\n    case TranslationLinks.LinkReadOnly:\r\n      return I18nKeys.LinkReadOnly;\r\n    case TranslationLinks.LinkReadWrite:\r\n      return I18nKeys.LinkShared;\r\n    case TranslationLinks.LinkCopyFrom:\r\n      return I18nKeys.FromOther;\r\n  }\r\n}\r\n","import { Component, inject, Inject, signal } from '@angular/core';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { Of } from '../../../../../core';\r\nimport { I18nKeys } from '../../edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.constants';\r\nimport { findI18nKey } from '../../edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.helpers';\r\nimport { TranslateMenuDialogData } from '../../edit/fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.models';\r\nimport { FormConfigService } from '../../edit/form/form-config.service';\r\nimport { LanguageService } from '../../edit/localization/language.service';\r\nimport { TranslationStateCore } from '../../edit/localization/translate-state.model';\r\nimport { TranslationLinks } from '../../edit/localization/translation-link.constants';\r\nimport { ItemService } from '../../edit/state/item.service';\r\nimport { computedObj } from '../signals/signal.utilities';\r\n\r\ninterface TranslationInfo {\r\n  showLanguageSelection: boolean;\r\n  i18nRoot: string;\r\n  submitDisabled: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-translate-helper-component-base',\r\n  template: '',\r\n})\r\nexport abstract class TranslateHelperComponent {\r\n\r\n  #languageService = inject(LanguageService);\r\n  #itemService = inject(ItemService);\r\n  public formConfig = inject(FormConfigService);\r\n\r\n  constructor(@Inject(MAT_DIALOG_DATA) public dialogData: TranslateMenuDialogData) {}\r\n\r\n  TranslationLinks = TranslationLinks;\r\n  I18nKeys = I18nKeys;\r\n\r\n  public noLanguageRequired: Of<typeof TranslationLinks>[];\r\n\r\n  protected language = this.formConfig.language;\r\n  public translationStateSignal = signal<TranslationStateCore>(this.dialogData.translationState);\r\n\r\n  protected translationInfo = computedObj<TranslationInfo>('translationInfo', () => {\r\n    const translationState = this.translationStateSignal();\r\n    this.noLanguageRequired = [TranslationLinks.Translate, TranslationLinks.DontTranslate];\r\n    return {\r\n      showLanguageSelection: !this.noLanguageRequired.includes(translationState.linkType),\r\n      i18nRoot: `LangMenu.Dialog.${findI18nKey(translationState.linkType)}`,\r\n      submitDisabled: translationState.language === '' && !this.noLanguageRequired.includes(translationState.linkType),\r\n    };\r\n  });\r\n\r\n  protected languages = this.#languageService.getAllSignal();\r\n  protected itemAttributes = this.#itemService.itemAttributesSignal(this.dialogData.config.entityGuid);\r\n\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\n\r\n@Component({\r\n    selector: 'app-snack-bar-warning-demo',\r\n    templateUrl: './snack-bar-warning-demo.component.html',\r\n    styleUrls: ['./snack-bar-warning-demo.component.scss'],\r\n    imports: [\r\n        TranslateModule,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class SnackBarWarningDemoComponent {\r\n  constructor() { }\r\n}\r\n","<h3 [innerHTML]=\"'LangMenu.SnackBar.Title' | translate | safeHtml\"></h3>\r\n<p [innerHTML]=\"'LangMenu.SnackBar.Body' | translate | safeHtml\" class=\"snack-bar-warning-demo-white-hyperlink\"></p>","<mat-card class=\"auto-translate-menu-dialog-card u-hide-scrollbar\">\r\n  <mat-card-header>\r\n    <mat-card-title>\r\n      {{ 'LangMenu.Dialog.AutoTranslateAll.Title' | translate }}\r\n    </mat-card-title>\r\n    <app-feature-text-info [featureNameId]=\"'EditUiTranslateWithGoogle'\"></app-feature-text-info>\r\n    <mat-card-subtitle [innerHTML]=\"'LangMenu.Dialog.AutoTranslateAll.Body' | translate | safeHtml\">\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content class=\"eav-card-content__no-padding\">\r\n    <mat-action-list>\r\n      @for (language of languagesSig(); track language) {\r\n      <mat-list-item (click)=\"setLanguage(language.key)\"\r\n        [disabled]=\"language.disabled || !isTranslateWithGoogleFeatureEnabled()\" [ngClass]=\"{\r\n            'eav-list-item__focus': translationStateSignal().language === language.key,\r\n            'list-item__disabled': language.disabled || !isTranslateWithGoogleFeatureEnabled()\r\n            }\">\r\n        <mat-icon matListItemIcon [ngClass]=\"{ 'list-item-icon__disabled': language.disabled }\">language</mat-icon>\r\n        <span matListItemTitle>{{ language.key }}\r\n          @if (dialogData.isTranslateMany) {\r\n          <span>\r\n            @if (language.noTranslatableFields == 0) {\r\n            <span>({{\"LangMenu.Dialog.AutoTranslateAll.NoContent\" |\r\n              translate}})\r\n            </span>\r\n            }\r\n            @if (language.noTranslatableFields != 0) {\r\n            <span>\r\n              @if (language.noTranslatableFields == dialogData.translatableFields.length) {\r\n              <span>\r\n                @if (dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent == 0) {\r\n                <span>({{\"LangMenu.Dialog.AutoTranslateAll.AllTranslatableFields\"\r\n                  | translate}})\r\n                </span>\r\n                }\r\n                @if (dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent != 0) {\r\n                <span>({{\"LangMenu.Dialog.AutoTranslateAll.AllTranslatableFields\"\r\n                  | translate}},\r\n                  {{dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent}}\r\n                  {{\"LangMenu.Dialog.AutoTranslateAll.Empty\" | translate}})\r\n                </span>\r\n                }\r\n              </span>\r\n              }\r\n              @if (language.noTranslatableFields != dialogData.translatableFields.length) {\r\n              <span>\r\n                @if (dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent == 0) {\r\n                <span>({{language.noTranslatableFields}}\r\n                  {{\"LangMenu.Dialog.AutoTranslateAll.Of\" | translate}}\r\n                  {{dialogData.translatableFields.length}} {{\"LangMenu.Dialog.AutoTranslateAll.TranslatableFields\" |\r\n                  translate}})\r\n                </span>\r\n                }\r\n                @if (dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent != 0) {\r\n                <span>({{language.noTranslatableFields}}\r\n                  {{\"LangMenu.Dialog.AutoTranslateAll.Of\" | translate}}\r\n                  {{dialogData.translatableFields.length}} {{\"LangMenu.Dialog.AutoTranslateAll.TranslatableFields\" |\r\n                  translate}}\r\n                  , {{dialogData.translatableFields.length - language.noTranslatableFieldsThatHaveContent}}\r\n                  {{\"LangMenu.Dialog.AutoTranslateAll.Empty\" | translate}})\r\n                </span>\r\n                }\r\n              </span>\r\n              }\r\n            </span>\r\n            }\r\n          </span>\r\n          }\r\n        </span>\r\n      </mat-list-item>\r\n      }\r\n    </mat-action-list>\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, Inject, OnInit, computed, inject } from '@angular/core';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { FeatureTextInfoComponent } from '../../../features/feature-text-info/feature-text-info.component';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { TranslateHelperComponent } from '../../../shared/components/translate-helper.component';\r\nimport { EditApiKeyPaths } from '../../../shared/constants/eav.constants';\r\nimport { ApiKeySpecs } from '../../../shared/models/dialog-context.models';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\nimport { isCtrlS } from '../../dialog/main/keyboard-shortcuts';\r\nimport { getTemplateLanguages, getTemplateLanguagesWithContent } from '../../fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.helpers';\r\nimport { TranslateMenuDialogData } from '../../fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.models';\r\nimport { FieldsTranslateService } from '../../state/fields-translate.service';\r\nimport { SnackBarWarningDemoComponent } from '../snack-bar-warning-demo/snack-bar-warning-demo.component';\r\nimport { TranslationStateCore } from '../translate-state.model';\r\n\r\n@Component({\r\n  selector: 'app-auto-translate-menu-dialog',\r\n  templateUrl: './auto-translate-menu-dialog.component.html',\r\n  styleUrls: ['./auto-translate-menu-dialog.component.scss'],\r\n  imports: [\r\n    MatCardModule,\r\n    FeatureTextInfoComponent,\r\n    MatListModule,\r\n    NgClass,\r\n    MatIconModule,\r\n    TranslateModule,\r\n    SafeHtmlPipe,\r\n  ]\r\n})\r\nexport class AutoTranslateMenuDialogComponent extends TranslateHelperComponent implements OnInit {\r\n\r\n  public features = inject(FeaturesService);\r\n  public isTranslateWithGoogleFeatureEnabled = this.features.isEnabled[FeatureNames.EditUiTranslateWithGoogle];\r\n\r\n  protected languagesSig = computed(() => {\r\n    const languages = this.languages();\r\n    const language = this.language();\r\n    const attributes = this.itemAttributes();\r\n    const translationState = this.translationStateSignal();\r\n\r\n    return this.dialogData.isTranslateMany\r\n      ? getTemplateLanguagesWithContent(language, languages, attributes, translationState.linkType, this.dialogData.translatableFields)\r\n      : getTemplateLanguages(this.dialogData.config, language, languages, attributes, translationState.linkType);\r\n  });\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<AutoTranslateMenuDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: TranslateMenuDialogData,\r\n    private fieldsTranslateService: FieldsTranslateService,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    super(dialogData);\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlS(event))\r\n        event.preventDefault();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // If not enabled, ensure that after closed ...??? @STV\r\n    if (this.isTranslateWithGoogleFeatureEnabled())\r\n      this.dialog.afterClosed().subscribe(() => this.snackBar.dismiss());\r\n\r\n    // If the demo API key is being used, show snackbar warning\r\n    const apiKeyInfo = this.formConfig.settings.Values[EditApiKeyPaths.GoogleTranslate] as ApiKeySpecs;\r\n    if (apiKeyInfo.IsDemo)\r\n      this.snackBar.openFromComponent(SnackBarWarningDemoComponent);\r\n  }\r\n\r\n  setLanguage(language: string): void {\r\n    const newTranslationState: TranslationStateCore = { ...this.translationStateSignal(), language };\r\n    this.translationStateSignal.set(newTranslationState);\r\n\r\n    const oldState = this.dialogData.translationState;\r\n    const isEqual = oldState.language === newTranslationState.language;\r\n    if (isEqual) {\r\n      this.closeDialog();\r\n      return;\r\n    }\r\n\r\n    this.dialogData.isTranslateMany\r\n      ? this.fieldsTranslateService.autoTranslateMany(newTranslationState.language)\r\n      : this.fieldsTranslateService.autoTranslate([this.dialogData.config.fieldName], newTranslationState.language);\r\n\r\n    this.closeDialog();\r\n  }\r\n\r\n  private closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n}\r\n","  <mat-card class=\"translate-menu-dialog-card u-hide-scrollbar\">\r\n    <mat-card-header>\r\n      <mat-card-title>\r\n        {{ 'LangMenu.Dialog.Title' | translate: { name: dialogData.config.fieldName } }}\r\n      </mat-card-title>\r\n      <mat-card-subtitle>\r\n        {{ 'LangMenu.Dialog.Intro' | translate }}\r\n      </mat-card-subtitle>\r\n    </mat-card-header>\r\n    <mat-card-content class=\"eav-card-content__no-padding\">\r\n      <mat-nav-list toggle focus>\r\n        <mat-list-item\r\n          [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.DontTranslate }\"\r\n          (click)=\"setLinkType(TranslationLinks.DontTranslate)\">\r\n          <mat-icon matListItemIcon color=\"accent\">lock</mat-icon>\r\n          <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.NoTranslate + '.Title') | translate : { primary: language().primary } }}</span>\r\n          <span matListItemLine>{{ ('LangMenu.Dialog.' + I18nKeys.NoTranslate + '.Body') | translate : { primary: language().primary } }}</span>\r\n        </mat-list-item>\r\n        <mat-list-item lines=3\r\n          [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.Translate }\"\r\n          (click)=\"setLinkType(TranslationLinks.Translate)\">\r\n          <mat-icon matListItemIcon color=\"accent\">lock_open</mat-icon>\r\n          <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.FromPrimary + '.Title') | translate : { primary: language().primary } }}</span>\r\n          <span>{{ ('LangMenu.Dialog.' + I18nKeys.FromPrimary + '.Body') | translate : { primary: language().primary } }}</span>\r\n        </mat-list-item>\r\n        <mat-list-item lines=3\r\n          [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.LinkCopyFrom }\"\r\n          (click)=\"setLinkType(TranslationLinks.LinkCopyFrom)\">\r\n          <mat-icon matListItemIcon color=\"accent\">translate</mat-icon>\r\n          <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.FromOther + '.Title') | translate : { primary: language().primary } }}</span>\r\n          <span>{{ ('LangMenu.Dialog.' + I18nKeys.FromOther + '.Body') | translate : { primary: language().primary }\r\n          }}</span>\r\n        </mat-list-item>\r\n        <mat-list-item\r\n          [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.LinkReadOnly }\"\r\n          (click)=\"setLinkType(TranslationLinks.LinkReadOnly)\">\r\n          <mat-icon matListItemIcon color=\"accent\">link</mat-icon>\r\n          <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.LinkReadOnly + '.Title') | translate : { primary: language().primary } }}</span>\r\n          <span matListItemLine>{{ ('LangMenu.Dialog.' + I18nKeys.LinkReadOnly + '.Body') | translate : { primary: language().primary } }}</span>\r\n        </mat-list-item>\r\n        <mat-list-item lines=3\r\n          [ngClass]=\"{ 'eav-list-item__focus': translationStateSignal().linkType === TranslationLinks.LinkReadWrite }\"\r\n          (click)=\"setLinkType(TranslationLinks.LinkReadWrite)\">\r\n          <mat-icon matListItemIcon color=\"accent\">share</mat-icon>\r\n          <span matListItemTitle>{{ ('LangMenu.Dialog.' + I18nKeys.LinkShared + '.Title') | translate : { primary: language().primary } }}</span>\r\n          <span>{{ ('LangMenu.Dialog.' + I18nKeys.LinkShared + '.Body') | translate : { primary: language().primary }\r\n          }}</span>\r\n        </mat-list-item>\r\n      </mat-nav-list>\r\n      @if (translationInfo().showLanguageSelection) {\r\n        <div>\r\n          <mat-card-header>\r\n            <mat-card-title>\r\n              {{ (translationInfo().i18nRoot + '.Subtitle') | translate }}\r\n            </mat-card-title>\r\n            <mat-card-subtitle>\r\n              {{'LangMenu.Dialog.PickLanguageIntro' | translate }}\r\n            </mat-card-subtitle>\r\n          </mat-card-header>\r\n          <mat-action-list>\r\n            @for (language of languagesSig(); track language) {\r\n              <mat-list-item (click)=\"setLanguage(language.key)\"\r\n                [disabled]=\"language.disabled\" [ngClass]=\"{\r\n                'eav-list-item__focus': translationStateSignal().language === language.key,\r\n                'list-item__disabled': language.disabled\r\n                }\">\r\n                <mat-icon matListItemIcon [ngClass]=\"{ 'list-item-icon__disabled': language.disabled }\">language</mat-icon>\r\n                <span matListItemTitle>{{ language.key }}</span>\r\n              </mat-list-item>\r\n            }\r\n          </mat-action-list>\r\n        </div>\r\n      }\r\n    </mat-card-content>\r\n    <mat-card-actions align=\"end\">\r\n      <button mat-button color=\"accent\" [disabled]=\"translationInfo().submitDisabled\" (click)=\"run()\">OK</button>\r\n    </mat-card-actions>\r\n  </mat-card>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, computed, Inject } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { Of } from '../../../../../../../../core';\r\nimport { TranslateHelperComponent } from '../../../../../shared/components/translate-helper.component';\r\nimport { isCtrlS } from '../../../../dialog/main/keyboard-shortcuts';\r\nimport { TranslationStateCore } from '../../../../localization/translate-state.model';\r\nimport { TranslationLinks } from '../../../../localization/translation-link.constants';\r\nimport { FieldsTranslateService } from '../../../../state/fields-translate.service';\r\nimport { getTemplateLanguages } from './translate-menu-dialog.helpers';\r\nimport { TranslateMenuDialogData } from './translate-menu-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-translate-menu-dialog',\r\n  templateUrl: './translate-menu-dialog.component.html',\r\n  styleUrls: ['./translate-menu-dialog.component.scss'],\r\n  imports: [\r\n    MatCardModule,\r\n    MatListModule,\r\n    NgClass,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    TranslateModule,\r\n  ]\r\n})\r\nexport class TranslateMenuDialogComponent extends TranslateHelperComponent {\r\n\r\n  protected languagesSig = computed(() => {\r\n    const languages = this.languages();\r\n    const language = this.language();\r\n    const attributes = this.itemAttributes();\r\n    const translationState = this.translationStateSignal();\r\n\r\n    return getTemplateLanguages(this.dialogData.config, language, languages, attributes, translationState.linkType);\r\n  });\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<TranslateMenuDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: TranslateMenuDialogData,\r\n    public fieldsTranslateService: FieldsTranslateService,\r\n  ) {\r\n    super(dialogData); //\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlS(event))\r\n        event.preventDefault();\r\n    });\r\n  }\r\n\r\n  setLinkType(linkType: Of<typeof TranslationLinks>): void {\r\n    const newTranslationState: TranslationStateCore = {\r\n      linkType,\r\n      language: this.noLanguageRequired.includes(linkType) ? '' : this.translationStateSignal().language,\r\n    };\r\n    this.translationStateSignal.set(newTranslationState);\r\n  }\r\n\r\n  setLanguage(language: string): void {\r\n    const newTranslationState: TranslationStateCore = { ...this.translationStateSignal(), language };\r\n    this.translationStateSignal.set(newTranslationState);\r\n  }\r\n\r\n  run(): void {\r\n    const newState = this.translationStateSignal();\r\n    const oldState = this.dialogData.translationState;\r\n\r\n    const noChange = oldState.linkType === newState.linkType && oldState.language === newState.language;\r\n    if (noChange)\r\n      return this.closeDialog();\r\n\r\n    switch (newState.linkType) {\r\n      case TranslationLinks.Translate:\r\n        this.fieldsTranslateService.unlock(this.dialogData.config.fieldName);\r\n        break;\r\n      case TranslationLinks.DontTranslate:\r\n        this.fieldsTranslateService.lock(this.dialogData.config.fieldName);\r\n        break;\r\n      case TranslationLinks.LinkReadOnly:\r\n        this.fieldsTranslateService.linkReadOnly(this.dialogData.config.fieldName, newState.language);\r\n        break;\r\n      case TranslationLinks.LinkReadWrite:\r\n        this.fieldsTranslateService.linkReadWrite(this.dialogData.config.fieldName, newState.language);\r\n        break;\r\n      case TranslationLinks.LinkCopyFrom:\r\n        this.fieldsTranslateService.copyFrom(this.dialogData.config.fieldName, newState.language);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.closeDialog();\r\n  }\r\n\r\n  private closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n}\r\n","<!-- DBG: {{ language().current }} | {{ disabled() }} -->\r\n\r\n@if (language().current !== language().primary)\r\n{\r\n  <div class=\"my-flex-main\">\r\n    <div class=\"my-flex-inside eav-shared-languages-container\" [ngClass]=\"translationStateClass()\">\r\n      <div class=\"eav-shared-languages mat-caption\" [ngClass]=\"{ 'eav-shared-languages--disabled': disabled() }\">\r\n        {{translationState().infoLabel ? (translationState().infoLabel | translate:{ languages:\r\n        translationState().infoMessage }): '' }}\r\n      </div>\r\n      <div tippyTranslate=\"LangMenu.NotTranslatable\" [tippyDisabled]=\"!disableTranslateButtonSignal()\" tippyPlacement=\"top\">\r\n        <button mat-icon-button class=\"eav-translate-icon-button\" [matMenuTriggerFor]=\"menu\"\r\n          [disabled]=\"disableTranslateButtonSignal()\" [ngClass]=\"{ 'hidden': hideTranslateButton() }\">\r\n          <mat-icon class=\"eav-translate-icon\">translate</mat-icon>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <ng-template matMenuContent>\r\n        <button mat-menu-item (click)=\"translate()\"\r\n          [ngClass]=\"{ 'eav-menu-item-selected':translationState().linkType === TranslationLinks.Translate }\">\r\n          {{ 'LangMenu.Translate' | translate }}\r\n        </button>\r\n        <button mat-menu-item (click)=\"openAutoTranslateMenuDialog(translationState())\"\r\n          [ngClass]=\"{ 'eav-menu-item-selected':translationState().linkType === TranslationLinks.Translate }\">\r\n          {{ 'LangMenu.AutoTranslate' | translate }}\r\n          <app-feature-icon-indicator [featureNameId]=\"'EditUiTranslateWithGoogle'\"></app-feature-icon-indicator>\r\n        </button>\r\n        <button mat-menu-item (click)=\"dontTranslate()\"\r\n          [ngClass]=\"{ 'eav-menu-item-selected':translationState().linkType === TranslationLinks.DontTranslate }\">\r\n          {{ 'LangMenu.NoTranslate' | translate }}\r\n        </button>\r\n        <button mat-menu-item (click)=\"openTranslateMenuDialog(translationState())\"\r\n          [ngClass]=\"{ 'eav-menu-item-selected':translationState().language !== '' }\">\r\n          {{ 'LangMenu.Link' | translate }}\r\n        </button>\r\n      </ng-template>\r\n    </mat-menu>\r\n  </div>\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, inject, input, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FeatureIconIndicatorComponent } from '../../../../../features/feature-icon-indicator/feature-icon-indicator.component';\r\nimport { TippyDirective } from '../../../../../shared/directives/tippy.directive';\r\nimport { computedObj } from '../../../../../shared/signals/signal.utilities';\r\nimport { FormConfigService } from '../../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../../form/forms-state.service';\r\nimport { AutoTranslateDisabledWarningDialog } from '../../../../localization/auto-translate-disabled-warning-dialog/auto-translate-disabled-warning-dialog.component';\r\nimport { AutoTranslateMenuDialogComponent } from '../../../../localization/auto-translate-menu-dialog/auto-translate-menu-dialog.component';\r\nimport { TranslationState } from '../../../../localization/translate-state.model';\r\nimport { TranslationLinks } from '../../../../localization/translation-link.constants';\r\nimport { FieldsTranslateService } from '../../../../state/fields-translate.service';\r\nimport { FieldState } from '../../../field-state';\r\nimport { TranslateMenuDialogComponent } from '../translate-menu-dialog/translate-menu-dialog.component';\r\nimport { TranslateMenuDialogData } from '../translate-menu-dialog/translate-menu-dialog.models';\r\nimport { TranslateMenuHelpers } from './translate-menu.helpers';\r\n\r\n@Component({\r\n    selector: 'app-translate-menu',\r\n    templateUrl: './translate-menu.component.html',\r\n    styleUrls: ['./translate-menu.component.scss'],\r\n    imports: [\r\n        NgClass,\r\n        MatButtonModule,\r\n        MatMenuModule,\r\n        MatIconModule,\r\n        FeatureIconIndicatorComponent,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class TranslateMenuComponent {\r\n  hideTranslateButton = input<boolean>();\r\n\r\n  #fieldState = inject(FieldState);\r\n  #formsStateService = inject(FormsStateService);\r\n\r\n  TranslationLinks = TranslationLinks;\r\n\r\n  protected translationState = this.#fieldState.translationState; // this.fieldSettings.translationState[this.#fieldState.name];\r\n  protected language = this.formConfig.language;\r\n\r\n  protected disabled = computedObj('disabled', () => this.#fieldState.ui().disabled);\r\n\r\n  translationStateClass = computedObj('translationStateClass', () => TranslateMenuHelpers.getTranslationStateClass(this.translationState().linkType));\r\n\r\n  disableTranslateButtonSignal = computedObj('disableTranslateButtonSignal',\r\n    () => this.#formsStateService.readOnly().isReadOnly || this.#fieldState.settings().DisableTranslation\r\n  );\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private formConfig: FormConfigService,\r\n    private fieldsTranslate: FieldsTranslateService,\r\n  ) { }\r\n\r\n  translate(): void {\r\n    this.fieldsTranslate.unlock(this.#fieldState.name);\r\n  }\r\n\r\n  dontTranslate(): void {\r\n    this.fieldsTranslate.lock(this.#fieldState.name);\r\n  }\r\n\r\n  openTranslateMenuDialog(translationState: TranslationState): void {\r\n    this.#openDialog(translationState, TranslateMenuDialogComponent);\r\n  }\r\n\r\n  openAutoTranslateMenuDialog(translationState: TranslationState): void {\r\n    if (this.#fieldState.settings().DisableAutoTranslation) {\r\n      this.matDialog.open(AutoTranslateDisabledWarningDialog, {\r\n        autoFocus: false,\r\n        data: { isAutoTranslateAll: false },\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '350px',\r\n      });\r\n    } else {\r\n      this.#openDialog(translationState, AutoTranslateMenuDialogComponent);\r\n    }\r\n\r\n  }\r\n\r\n  #openDialog(translationState: TranslationState, component: any): void {\r\n    const dialogData: TranslateMenuDialogData = {\r\n      config: this.#fieldState.config,\r\n      translationState: {\r\n        language: translationState.language,\r\n        linkType: translationState.linkType,\r\n      },\r\n    };\r\n    this.matDialog.open(component, {\r\n      autoFocus: false,\r\n      data: dialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '400px',\r\n    });\r\n  }\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, inject, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { TranslateMenuComponent } from '../../../fields/wrappers/localization/translate-menu/translate-menu.component';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../form/forms-state.service';\r\nimport { EditRoutingService } from '../../../routing/edit-routing.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.LocalizationWrapper,\r\n    templateUrl: './localization-wrapper.component.html',\r\n    styleUrls: ['./localization-wrapper.component.scss'],\r\n    imports: [\r\n        NgClass,\r\n        TranslateMenuComponent,\r\n    ]\r\n})\r\nexport class LocalizationWrapperComponent {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n  @ViewChild(TranslateMenuComponent) private translateMenu: TranslateMenuComponent;\r\n\r\n  #formConfig = inject(FormConfigService);\r\n  #fieldState = inject(FieldState);\r\n\r\n  language = this.#formConfig.language;\r\n  hideTranslateButton: boolean = true;\r\n\r\n  constructor(\r\n    private editRoutingService: EditRoutingService,\r\n    private formsStateService: FormsStateService,\r\n  ) { }\r\n\r\n  translate() {\r\n    if (this.formsStateService.readOnly().isReadOnly) return;\r\n    const language = this.#formConfig.language();\r\n    if (language.current === language.primary) return;\r\n    if (!this.#fieldState.ui().disabled) return;\r\n    const config = this.#fieldState.config;\r\n    const isExpanded = this.editRoutingService.isExpanded(config.index, config.entityGuid);\r\n    if (isExpanded) return;\r\n\r\n    this.translateMenu.translate();\r\n  }\r\n\r\n  toggleTranslateButtonVisibility(hide: boolean) {\r\n    this.hideTranslateButton = hide;\r\n  }\r\n}\r\n","<!-- <pre>Wrapper.Localization Start</pre> -->\r\n<div class=\"language-wrap\" (mouseenter)=\"toggleTranslateButtonVisibility(false)\"\r\n  (mouseleave)=\"toggleTranslateButtonVisibility(true)\">\r\n  <div class=\"language-wrap__field\"\r\n    [ngClass]=\"{ 'language-wrap__field-short': language()?.current !== language()?.primary }\" (dblclick)=\"translate()\">\r\n    <!-- <pre>Wrapper.Localization - Field Start</pre> -->\r\n    <ng-container #fieldComponent></ng-container>\r\n    <!-- <pre>Wrapper.Localization - Field End</pre> -->\r\n  </div>\r\n\r\n  <app-translate-menu class=\"language-wrap__translate\" [hideTranslateButton]=\"hideTranslateButton\"\r\n    [ngClass]=\"{ 'language-wrap__translate--hidden': language()?.current === language()?.primary }\">\r\n  </app-translate-menu>\r\n</div>\r\n<!-- <pre>Wrapper.Localization End</pre> -->\r\n","import { Type } from '@angular/core';\r\nimport 'reflect-metadata';\r\n\r\nexport const FieldMetadataKey = 'FieldMetadata' as const;\r\n\r\n/**\r\n * Angular decorator to add metadata to a field component.\r\n * @param metadata \r\n * @returns \r\n */\r\nexport function FieldMetadata(metadata: FieldMetadataModel) {\r\n  return (component: Type<any>) => {\r\n    Reflect.defineMetadata(FieldMetadataKey, metadata, component);\r\n  };\r\n}\r\n\r\nexport interface FieldMetadataModel {\r\n  wrappers?: string[];\r\n  requiredFeatures?: string[];\r\n}\r\n","import { Directive, ElementRef, NgZone, OnDestroy, OnInit } from '@angular/core';\r\n\r\n/**\r\n * This directive will fix all html inside it so that links open in a new tab.\r\n */\r\n@Directive({\r\n  selector: '[appChangeAnchorTarget]',\r\n})\r\nexport class ChangeAnchorTargetDirective implements OnInit, OnDestroy {\r\n  #target = '_blank';\r\n  #element: HTMLElement;\r\n  #observer: MutationObserver;\r\n\r\n  constructor(elementRef: ElementRef, private zone: NgZone) {\r\n    this.#element = elementRef.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.#setAnchorTargets();\r\n      this.#observer = new MutationObserver((_: unknown) => {\r\n        this.#setAnchorTargets();\r\n      });\r\n      this.#observer.observe(this.#element, { attributes: true, childList: true, subtree: true });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.zone.runOutsideAngular(() => this.#observer.disconnect());\r\n  }\r\n\r\n  #setAnchorTargets() {\r\n    if (this.#element.nodeName.toLocaleLowerCase() === 'a') {\r\n      const anchor = this.#element as HTMLAnchorElement;\r\n      if (anchor.target !== this.#target)\r\n        anchor.target = this.#target;\r\n    }\r\n    const childAnchors = this.#element.getElementsByTagName('a');\r\n    for (const anchor of Array.from(childAnchors))\r\n      if (anchor.target !== this.#target)\r\n        anchor.target = this.#target;\r\n  }\r\n}\r\n","@if (show()) {\r\n  <div class=\"my-main\" [ngClass]=\"{\r\n      'my-last-field': fieldState.config.isLastInGroup,\r\n      'my-hyperlink-wrapper-fix': hyperlinkDefaultWrapperFix && !fieldState.config.isLastInGroup,\r\n      'small-gap': smallGap(),\r\n    }\"\r\n  >\r\n    @if (notes()) {\r\n      <mat-hint class=\"my-notes\" (click)=\"toggleHint($event)\" [ngClass]=\"{ 'disabled': disabled() }\">\r\n        <div class=\"id-notes-container\" [ngClass]=\"showExpand ? 'expandable': ''\" appChangeAnchorTarget\r\n          [innerHtml]=\"notes() | safeHtml\">\r\n        </div>\r\n      </mat-hint>\r\n    }\r\n    @if (showErrors() && errorMessage(); as error) {\r\n      <mat-error class=\"\">{{ error | translate: settings() }}</mat-error>\r\n    }\r\n    @if (!disableError() && warningMessage(); as warning) {\r\n      <mat-error class=\"warning\">{{ warning | translate }}</mat-error>\r\n    }\r\n  </div>\r\n}","import { NgClass } from '@angular/common';\r\nimport { Component, inject, input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\nimport { computedObj } from '../../../shared/signals/signal.utilities';\r\nimport { ChangeAnchorTargetDirective } from '../directives/change-anchor-target.directive';\r\nimport { FieldState } from '../field-state';\r\n\r\n@Component({\r\n    selector: 'app-field-helper-text',\r\n    templateUrl: './field-help-text.component.html',\r\n    styleUrls: ['./field-help-text.component.scss'],\r\n    imports: [\r\n        NgClass,\r\n        MatFormFieldModule,\r\n        ChangeAnchorTargetDirective,\r\n        TranslateModule,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class FieldHelperTextComponent {\r\n  disableError = input<boolean>(false);\r\n  hyperlinkDefaultWrapperFix = input<boolean>(false);\r\n\r\n  /** Make the control \"flat\" to not take space if there is nothing to show. */\r\n  flatIfEmpty = input<boolean>(false);\r\n\r\n  smallGap = input<boolean>(false);\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  constructor() {\r\n    // Get the component ID from the compiler, so we can use it in the template\r\n    // This is to get style encapsulation to work with inner html\r\n    this.componentId = (this.constructor as unknown as { ['cmp']: { id: string } })['cmp'].id;\r\n  }\r\n\r\n  componentId: string;\r\n\r\n  protected settings = this.fieldState.settings;\r\n\r\n  #invalid = computedObj('invalid', () => this.fieldState.ui().invalid);\r\n  disabled = computedObj('disabled', () => this.fieldState.ui().disabled);\r\n\r\n  showErrors = computedObj('showErrors', () => this.#invalid() && !this.disableError());\r\n\r\n  /**\r\n   * Notes with all p-tags updated to have the current components identifying class.\r\n   * This ensures that styles which are on this component will also affect the notes.\r\n   */\r\n  notes = computedObj('notes', () => {\r\n    const n = this.settings().Notes ?? '';\r\n    return n.replace(/<p>/g, `<p _ngcontent-ng-${this.componentId}>`);\r\n  });\r\n\r\n  isEmpty = computedObj('isEmpty', () => !this.notes() && !this.showErrors());\r\n\r\n  errorMessage = computedObj('errorMessage', () => {\r\n    // Make dependency on value change - otherwise errors are not updated reliably\r\n    const _ = this.fieldState.uiValue();\r\n    // Get the current errors\r\n    return this.fieldState.ui().getErrors();\r\n  });\r\n\r\n  warningMessage = computedObj('warningMessage', () => this.fieldState.ui().getWarnings());\r\n\r\n  /**\r\n   * Show the control if:\r\n   * - it's not empty (which already checks if it has errors) \r\n   * - and if it doesn't have warnings\r\n   * - and flat wasn't preferred\r\n   */\r\n  show = computedObj('show', () => !this.isEmpty() || this.warningMessage() || !this.flatIfEmpty());\r\n\r\n  showExpand = true;\r\n\r\n  /** Don't toggle if clicked on an anchor tag or it's children */\r\n  toggleHint(event: MouseEvent) {\r\n    let target = event.target as HTMLElement;\r\n\r\n    if (target.nodeName.toLocaleLowerCase() === 'a') return;\r\n    while (target && target.classList && !target.classList.contains('id-notes-container')) {\r\n      target = target.parentNode as HTMLElement;\r\n      if (!target) return;\r\n      if (target.nodeName.toLocaleLowerCase() === 'a') return;\r\n    }\r\n\r\n    this.showExpand = !this.showExpand;\r\n  }\r\n}\r\n","import { Component, inject } from '@angular/core';\r\nimport { FieldSettingsBoolean } from 'projects/edit-types/src/FieldSettings-Boolean';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldState } from '../../field-state';\r\n\r\n@Component({\r\n  selector: 'app-boolean-base',\r\n  template: '',\r\n})\r\n// @FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport abstract class BooleanBaseComponent {\r\n\r\n  fieldState = inject(FieldState) as FieldState<boolean, FieldSettings & FieldSettingsBoolean>;\r\n\r\n  group = this.fieldState.group;\r\n  ui = this.fieldState.ui;\r\n  uiValue = this.fieldState.uiValue;\r\n\r\n  settings = this.fieldState.settings;\r\n  basics = this.fieldState.basics;\r\n\r\n  // TODO: CONTINUE HERE\r\n  changedLabel = this.fieldState.settingExt('_label');\r\n}\r\n","import { FieldSettingsBoolean } from 'projects/edit-types/src/FieldSettings-Boolean';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { FieldSettings } from './../../../../../../../edit-types/src/FieldSettings';\r\n\r\nexport class BooleanDefaultLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.BooleanDefault;\r\n\r\n  constructor() { super({ BooleanDefaultLogic }); }\r\n\r\n  update({ settings, value }: FieldLogicUpdate<boolean>): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & FieldSettingsBoolean;\r\n    fixedSettings.ReverseToggle ??= false;\r\n    fixedSettings._label = this.#calculateLabel(value, fixedSettings);\r\n    // fixedSettings.DisableAutoTranslation = true;\r\n    return fixedSettings;\r\n  }\r\n\r\n  #calculateLabel(value: boolean, settings: FieldSettings & FieldSettingsBoolean): string {\r\n    if (value === true && settings.TitleTrue)\r\n      return settings.TitleTrue;\r\n    if (value === false && settings.TitleFalse)\r\n      return settings.TitleFalse;\r\n    return settings.Name;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(BooleanDefaultLogic);\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { BooleanBaseComponent } from './boolean-base.component';\r\nimport { BooleanDefaultLogic } from './boolean-default-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.BooleanDefault,\r\n    templateUrl: './boolean-default.component.html',\r\n    styleUrls: ['./boolean-default.component.scss'],\r\n    imports: [\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatSlideToggleModule,\r\n        NgClass,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class BooleanDefaultComponent extends BooleanBaseComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    BooleanDefaultLogic.importMe();\r\n  }\r\n\r\n  checkedState = computedObj('checkedState', () => {\r\n    const value = this.uiValue();\r\n    const reverseToggle = this.settings().ReverseToggle;\r\n    return reverseToggle ? !value : value;\r\n  });\r\n\r\n  updateValue() {\r\n    if (this.ui().disabled) return;\r\n    this.fieldState.ui().setIfChanged(!this.uiValue());\r\n  }\r\n}\r\n","<div [formGroup]=\"group\">\r\n  <div class=\"eav-toggle-hitbox\" (click)=\"updateValue()\">\r\n    <mat-slide-toggle\r\n      [checked]=\"checkedState()\"\r\n      [disabled]=\"ui().disabled\"\r\n      [ngClass]=\"!uiValue() ? 'changeable-label-mat-slide-toggle' : ''\" />\r\n    <span [ngClass]=\"!uiValue() ? 'eav-toggle-label' : ''\" class=\"eav-slide-toggle-label\">\r\n      {{ changedLabel() ?? basics().label }}\r\n    </span>\r\n  </div>\r\n  <app-field-helper-text [disableError]=\"true\"></app-field-helper-text>\r\n</div>\r\n","import { FieldSettingsBoolean } from 'projects/edit-types/src/FieldSettings-Boolean';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { FieldSettings } from './../../../../../../../edit-types/src/FieldSettings';\r\n\r\nexport class BooleanTristateLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.BooleanTristate;\r\n\r\n  constructor() { super({ BooleanTristateLogic }); }\r\n\r\n  update({ settings, value }: FieldLogicUpdate<boolean | ''>): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & FieldSettingsBoolean;\r\n    fixedSettings.ReverseToggle ??= false;\r\n    fixedSettings._label = this.#calculateLabel(value, fixedSettings);\r\n    // fixedSettings.DisableAutoTranslation = true;\r\n    return fixedSettings;\r\n  }\r\n\r\n  #calculateLabel(value: boolean | '', settings: FieldSettings & FieldSettingsBoolean): string {\r\n    if (value === true && settings.TitleTrue)\r\n      return settings.TitleTrue;\r\n    if (value === false && settings.TitleFalse)\r\n      return settings.TitleFalse;\r\n    if (!value /* null | '' */ && settings.TitleIndeterminate)\r\n      return settings.TitleIndeterminate;\r\n    return settings.Name;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(BooleanTristateLogic);\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { BooleanBaseComponent } from '../boolean-default/boolean-base.component';\r\nimport { BooleanTristateLogic } from './boolean-tristate-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.BooleanTristate,\r\n    templateUrl: './boolean-tristate.component.html',\r\n    styleUrls: ['./boolean-tristate.component.scss'],\r\n    imports: [\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatSlideToggleModule,\r\n        NgClass,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class BooleanTristateComponent extends BooleanBaseComponent {\r\n\r\n  fs = this.fieldState as FieldState<boolean | ''>;\r\n\r\n  constructor() {\r\n    super();\r\n    BooleanTristateLogic.importMe();\r\n  }\r\n\r\n  checkedState = computedObj('checkedState', () => {\r\n    const value = this.fs.uiValue();\r\n    const reverseToggle = this.settings().ReverseToggle;\r\n    return reverseToggle\r\n      ? (value === true ? false : value === false ? true : value)\r\n      : (value === '' ? null : value);\r\n  });\r\n\r\n  bestLabel = computedObj('bestLabel', () => {\r\n    const value = this.checkedState();\r\n    const settings = this.settings();\r\n    if (value === true && settings.TitleTrue)           return settings.TitleTrue;\r\n    if (value === false && settings.TitleFalse)         return settings.TitleFalse;\r\n    if (value === null && settings.TitleIndeterminate)  return settings.TitleIndeterminate;\r\n    return settings.Name;\r\n  });\r\n\r\n  updateValue(disabled: boolean) {\r\n    if (disabled) return;\r\n    this.fieldState.ui().setIfChanged(this.#nextValue());\r\n  }\r\n\r\n  #nextValue() {\r\n    const current = this.fs.uiValue();\r\n    const reversed = this.settings().ReverseToggle;\r\n\r\n    switch (current) {\r\n      case false: return reversed ? true : null;\r\n      case true: return reversed ? null : false;\r\n      case '':\r\n      case null: return reversed ? false : true;\r\n    }\r\n  }\r\n}\r\n","<!-- New -->\r\n<div [formGroup]=\"group\">\r\n  <div class=\"eav-toggle-hitbox\" (click)=\"updateValue(ui().disabled)\">\r\n    <mat-slide-toggle\r\n    [checked]=\"checkedState()\"\r\n    [disabled]=\"ui().disabled\"\r\n    [ngClass]=\"{\r\n          'toggle-false': checkedState() === false,\r\n          'toggle-true': checkedState() === true,\r\n          'toggle-null': checkedState() === null,\r\n          'changeable-label-tristate-mat-slide-toggle': changedLabel() !== basics().label\r\n            }\" />\r\n    <span [ngClass]=\"!checkedState() ? 'eav-toggle-label' : ''\" class=\"eav-slide-toggle-label\">\r\n      {{ changedLabel() ?? basics().label }}\r\n    </span>\r\n  </div>\r\n  <app-field-helper-text [disableError]=\"true\"></app-field-helper-text>\r\n</div>\r\n","import { Component, inject } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.CustomDefault,\r\n  templateUrl: './custom-default.component.html',\r\n  styleUrls: ['./custom-default.component.scss'],\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class CustomDefaultComponent {\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected config = this.fieldState.config;\r\n\r\n  constructor() {\r\n  }\r\n}\r\n","<div class=\"message\">{{ config.fieldName }}: Field configuration is incomplete and should be fixed.</div>\r\n","import { CustomJsonEditor } from 'projects/edit-types/src/FieldSettings-CustomJsonEditor';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\n\r\nexport class CustomJsonEditorLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.CustomJsonEditor as string;\r\n\r\n  constructor() { super({ CustomJsonEditorLogic }); }\r\n\r\n  update({ settings }: FieldLogicUpdate): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & CustomJsonEditor;\r\n    fixedSettings.Rows ||= 5;\r\n    fixedSettings.JsonValidation ||= 'strict';\r\n    fixedSettings.JsonSchemaMode ||= 'none';\r\n    fixedSettings.JsonSchemaSource ||= 'link';\r\n    fixedSettings.JsonSchemaUrl ??= '';\r\n    fixedSettings.JsonSchemaRaw ??= '';\r\n    fixedSettings.JsonCommentsAllowed ??= false;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(CustomJsonEditorLogic);\r\n\r\nexport class StringJsonLogic extends CustomJsonEditorLogic {\r\n  name = InputTypeCatalog.StringJson;\r\n}\r\n\r\nFieldLogicBase.add(StringJsonLogic);\r\n","<div class=\"json-field\" [ngClass]=\"{\r\n  'disabled': ui().disabled,\r\n  'focused': focused().value,\r\n  'error': ui().touchedAndInvalid\r\n  }\">\r\n  <mat-label class=\"label\">{{ basics().label }} {{ basics().required ? '*' : '' }}</mat-label>\r\n  <app-monaco-editor class=\"editor\"\r\n    [filename]=\"filename\"\r\n    [ngStyle]=\"{ 'height': editorHeight() }\"\r\n    [value]=\"uiValue()\"\r\n    [options]=\"monacoOptions\"\r\n    [jsonSchema]=\"jsonSchema()\"\r\n    [jsonComments]=\"jsonComments()\"\r\n    (valueChanged)=\"codeChanged($event)\"\r\n    (focused)=\"onFocused()\"\r\n    (blurred)=\"onBlurred()\">\r\n  </app-monaco-editor>\r\n  @if (!uiValue() && basics().placeholder) {\r\n    <input class=\"placeholder eav-translate-on-dblclick\" [placeholder]=\"basics().placeholder\">\r\n  }\r\n</div>\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { NgClass, NgStyle } from '@angular/common';\r\nimport { Component, computed, inject } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport type * as Monaco from 'monaco-editor';\r\nimport { CustomJsonEditor } from 'projects/edit-types/src/FieldSettings-CustomJsonEditor';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { MonacoEditorComponent } from '../../../../monaco-editor/monaco-editor.component';\r\nimport { JsonSchema } from '../../../../monaco-editor/monaco-editor.models';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { CustomJsonEditorLogic, StringJsonLogic } from './custom-json-editor-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.CustomJsonEditor,\r\n    templateUrl: './custom-json-editor.component.html',\r\n    styleUrls: ['./custom-json-editor.component.scss'],\r\n    imports: [\r\n        NgClass,\r\n        MatFormFieldModule,\r\n        MonacoEditorComponent,\r\n        NgStyle,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class CustomJsonEditorComponent {\r\n  #fieldState = inject(FieldState) as FieldState<string, FieldSettings & CustomJsonEditor>;\r\n  #config = this.#fieldState.config;\r\n\r\n  protected ui = this.#fieldState.ui;\r\n  protected uiValue = this.#fieldState.uiValue;\r\n  protected basics = this.#fieldState.basics;\r\n  #settings = this.#fieldState.settings;\r\n\r\n  #rows = this.#fieldState.settingExt('Rows');\r\n  protected focused = computed(() => this.#config.focused$);\r\n\r\n  protected editorHeight = computed(() => {\r\n    return this.#rows() * this.monacoOptions.lineHeight + 'px';\r\n  });\r\n\r\n  protected jsonSchema = computed(() => {\r\n    const settings = this.#settings();\r\n    if (settings.JsonSchemaMode === 'none') return;\r\n    const jsonSchema: JsonSchema = {\r\n      type: settings.JsonSchemaSource,\r\n      value: settings.JsonSchemaSource === 'link' ? settings.JsonSchemaUrl : settings.JsonSchemaRaw,\r\n    };\r\n    return jsonSchema;\r\n  });\r\n\r\n  protected jsonComments = computed(() => {\r\n    const settings = this.#settings();\r\n    const jsonComments: Monaco.languages.json.SeverityLevel = settings.JsonCommentsAllowed ? 'ignore' : 'error';\r\n    return jsonComments;\r\n  });\r\n\r\n  protected filename: string;\r\n  protected monacoOptions: Monaco.editor.IStandaloneEditorConstructionOptions = {\r\n    minimap: {\r\n      enabled: false,\r\n    },\r\n    lineHeight: 19,\r\n    lineNumbers: 'off',\r\n    lineDecorationsWidth: 0,\r\n    folding: false,\r\n    scrollBeyondLastLine: false,\r\n    tabSize: 2,\r\n    fixedOverflowWidgets: true,\r\n  };\r\n\r\n  constructor(private formConfig: FormConfigService) {\r\n    CustomJsonEditorLogic.importMe();\r\n    StringJsonLogic.importMe();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.filename = `${this.#config.fieldName} ${this.#config.entityGuid} ${this.formConfig.config.formId}.json`;\r\n  }\r\n\r\n  codeChanged(code: string): void {\r\n    this.ui().setIfChanged(code);\r\n  }\r\n\r\n  onFocused(): void {\r\n    this.#config.focused$.next(true);\r\n  }\r\n\r\n  onBlurred(): void {\r\n    this.ui().markTouched();\r\n    this.#config.focused$.next(false);\r\n  }\r\n}\r\n","import { _IdGenerator, CdkMonitorFocus, CdkTrapFocus, A11yModule } from '@angular/cdk/a11y';\nimport { Overlay, FlexibleConnectedPositionStrategy, OverlayConfig, OverlayModule } from '@angular/cdk/overlay';\nimport { ComponentPortal, CdkPortalOutlet, TemplatePortal, PortalModule } from '@angular/cdk/portal';\nimport * as i0 from '@angular/core';\nimport { Injectable, inject, ElementRef, NgZone, EventEmitter, Injector, afterNextRender, Component, ViewEncapsulation, ChangeDetectionStrategy, Input, Output, Optional, SkipSelf, InjectionToken, ChangeDetectorRef, ViewChild, ViewContainerRef, booleanAttribute, Directive, forwardRef, signal, HostAttributeToken, ContentChild, TemplateRef, NgModule } from '@angular/core';\nimport { MatButton, MatIconButton, MatButtonModule } from '@angular/material/button';\nimport { CdkScrollableModule } from '@angular/cdk/scrolling';\nimport * as i1 from '@angular/material/core';\nimport { _StructuralStylesLoader, DateAdapter, MAT_DATE_FORMATS, ErrorStateMatcher, _ErrorStateTracker, MatCommonModule } from '@angular/material/core';\nimport { Subject, Subscription, merge, of } from 'rxjs';\nimport { ESCAPE, hasModifierKey, SPACE, ENTER, PAGE_DOWN, PAGE_UP, END, HOME, DOWN_ARROW, UP_ARROW, RIGHT_ARROW, LEFT_ARROW, BACKSPACE } from '@angular/cdk/keycodes';\nimport { Directionality } from '@angular/cdk/bidi';\nimport { normalizePassiveListenerOptions, Platform, _getFocusedElementPierceShadowDom } from '@angular/cdk/platform';\nimport { NgClass, DOCUMENT } from '@angular/common';\nimport { _CdkPrivateStyleLoader, _VisuallyHiddenLoader } from '@angular/cdk/private';\nimport { startWith, take, filter } from 'rxjs/operators';\nimport { coerceStringArray } from '@angular/cdk/coercion';\nimport { trigger, transition, animate, keyframes, style, state } from '@angular/animations';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS, Validators, NgForm, FormGroupDirective, NgControl, ControlContainer } from '@angular/forms';\nimport { MAT_FORM_FIELD, MatFormFieldControl } from '@angular/material/form-field';\nimport { MAT_INPUT_VALUE_ACCESSOR } from '@angular/material/input';\n\n/** @docs-private */\nfunction createMissingDateImplError(provider) {\n    return Error(`MatDatepicker: No provider found for ${provider}. You must add one of the following ` +\n        `to your app config: provideNativeDateAdapter, provideDateFnsAdapter, ` +\n        `provideLuxonDateAdapter, provideMomentDateAdapter, or provide a custom implementation.`);\n}\n\n/** Datepicker data that requires internationalization. */\nclass MatDatepickerIntl {\n    /**\n     * Stream that emits whenever the labels here are changed. Use this to notify\n     * components if the labels have changed after initialization.\n     */\n    changes = new Subject();\n    /** A label for the calendar popup (used by screen readers). */\n    calendarLabel = 'Calendar';\n    /** A label for the button used to open the calendar popup (used by screen readers). */\n    openCalendarLabel = 'Open calendar';\n    /** Label for the button used to close the calendar popup. */\n    closeCalendarLabel = 'Close calendar';\n    /** A label for the previous month button (used by screen readers). */\n    prevMonthLabel = 'Previous month';\n    /** A label for the next month button (used by screen readers). */\n    nextMonthLabel = 'Next month';\n    /** A label for the previous year button (used by screen readers). */\n    prevYearLabel = 'Previous year';\n    /** A label for the next year button (used by screen readers). */\n    nextYearLabel = 'Next year';\n    /** A label for the previous multi-year button (used by screen readers). */\n    prevMultiYearLabel = 'Previous 24 years';\n    /** A label for the next multi-year button (used by screen readers). */\n    nextMultiYearLabel = 'Next 24 years';\n    /** A label for the 'switch to month view' button (used by screen readers). */\n    switchToMonthViewLabel = 'Choose date';\n    /** A label for the 'switch to year view' button (used by screen readers). */\n    switchToMultiYearViewLabel = 'Choose month and year';\n    /**\n     * A label for the first date of a range of dates (used by screen readers).\n     * @deprecated Provide your own internationalization string.\n     * @breaking-change 17.0.0\n     */\n    startDateLabel = 'Start date';\n    /**\n     * A label for the last date of a range of dates (used by screen readers).\n     * @deprecated Provide your own internationalization string.\n     * @breaking-change 17.0.0\n     */\n    endDateLabel = 'End date';\n    /**\n     * A label for the Comparison date of a range of dates (used by screen readers).\n     */\n    comparisonDateLabel = 'Comparison range';\n    /** Formats a range of years (used for visuals). */\n    formatYearRange(start, end) {\n        return `${start} \\u2013 ${end}`;\n    }\n    /** Formats a label for a range of years (used by screen readers). */\n    formatYearRangeLabel(start, end) {\n        return `${start} to ${end}`;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerIntl, deps: [], target: i0.FactoryTarget.Injectable });\n    static prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerIntl, providedIn: 'root' });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerIntl, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nlet uniqueIdCounter$1 = 0;\n/**\n * An internal class that represents the data corresponding to a single calendar cell.\n * @docs-private\n */\nclass MatCalendarCell {\n    value;\n    displayValue;\n    ariaLabel;\n    enabled;\n    cssClasses;\n    compareValue;\n    rawValue;\n    id = uniqueIdCounter$1++;\n    constructor(value, displayValue, ariaLabel, enabled, cssClasses = {}, compareValue = value, rawValue) {\n        this.value = value;\n        this.displayValue = displayValue;\n        this.ariaLabel = ariaLabel;\n        this.enabled = enabled;\n        this.cssClasses = cssClasses;\n        this.compareValue = compareValue;\n        this.rawValue = rawValue;\n    }\n}\n/** Event options that can be used to bind an active, capturing event. */\nconst activeCapturingEventOptions = normalizePassiveListenerOptions({\n    passive: false,\n    capture: true,\n});\n/** Event options that can be used to bind a passive, capturing event. */\nconst passiveCapturingEventOptions = normalizePassiveListenerOptions({\n    passive: true,\n    capture: true,\n});\n/** Event options that can be used to bind a passive, non-capturing event. */\nconst passiveEventOptions = normalizePassiveListenerOptions({ passive: true });\n/**\n * An internal component used to display calendar data in a table.\n * @docs-private\n */\nclass MatCalendarBody {\n    _elementRef = inject(ElementRef);\n    _ngZone = inject(NgZone);\n    _platform = inject(Platform);\n    _intl = inject(MatDatepickerIntl);\n    /**\n     * Used to skip the next focus event when rendering the preview range.\n     * We need a flag like this, because some browsers fire focus events asynchronously.\n     */\n    _skipNextFocus;\n    /**\n     * Used to focus the active cell after change detection has run.\n     */\n    _focusActiveCellAfterViewChecked = false;\n    /** The label for the table. (e.g. \"Jan 2017\"). */\n    label;\n    /** The cells to display in the table. */\n    rows;\n    /** The value in the table that corresponds to today. */\n    todayValue;\n    /** Start value of the selected date range. */\n    startValue;\n    /** End value of the selected date range. */\n    endValue;\n    /** The minimum number of free cells needed to fit the label in the first row. */\n    labelMinRequiredCells;\n    /** The number of columns in the table. */\n    numCols = 7;\n    /** The cell number of the active cell in the table. */\n    activeCell = 0;\n    ngAfterViewChecked() {\n        if (this._focusActiveCellAfterViewChecked) {\n            this._focusActiveCell();\n            this._focusActiveCellAfterViewChecked = false;\n        }\n    }\n    /** Whether a range is being selected. */\n    isRange = false;\n    /**\n     * The aspect ratio (width / height) to use for the cells in the table. This aspect ratio will be\n     * maintained even as the table resizes.\n     */\n    cellAspectRatio = 1;\n    /** Start of the comparison range. */\n    comparisonStart;\n    /** End of the comparison range. */\n    comparisonEnd;\n    /** Start of the preview range. */\n    previewStart = null;\n    /** End of the preview range. */\n    previewEnd = null;\n    /** ARIA Accessible name of the `<input matStartDate/>` */\n    startDateAccessibleName;\n    /** ARIA Accessible name of the `<input matEndDate/>` */\n    endDateAccessibleName;\n    /** Emits when a new value is selected. */\n    selectedValueChange = new EventEmitter();\n    /** Emits when the preview has changed as a result of a user action. */\n    previewChange = new EventEmitter();\n    activeDateChange = new EventEmitter();\n    /** Emits the date at the possible start of a drag event. */\n    dragStarted = new EventEmitter();\n    /** Emits the date at the conclusion of a drag, or null if mouse was not released on a date. */\n    dragEnded = new EventEmitter();\n    /** The number of blank cells to put at the beginning for the first row. */\n    _firstRowOffset;\n    /** Padding for the individual date cells. */\n    _cellPadding;\n    /** Width of an individual cell. */\n    _cellWidth;\n    /** ID for the start date label. */\n    _startDateLabelId;\n    /** ID for the end date label. */\n    _endDateLabelId;\n    /** ID for the comparison start date label. */\n    _comparisonStartDateLabelId;\n    /** ID for the comparison end date label. */\n    _comparisonEndDateLabelId;\n    _didDragSinceMouseDown = false;\n    _injector = inject(Injector);\n    comparisonDateAccessibleName = this._intl.comparisonDateLabel;\n    /**\n     * Tracking function for rows based on their identity. Ideally we would use some sort of\n     * key on the row, but that would require a breaking change for the `rows` input. We don't\n     * use the built-in identity tracking, because it logs warnings.\n     */\n    _trackRow = (row) => row;\n    constructor() {\n        const idGenerator = inject(_IdGenerator);\n        this._startDateLabelId = idGenerator.getId('mat-calendar-body-start-');\n        this._endDateLabelId = idGenerator.getId('mat-calendar-body-end-');\n        this._comparisonStartDateLabelId = idGenerator.getId('mat-calendar-body-comparison-start-');\n        this._comparisonEndDateLabelId = idGenerator.getId('mat-calendar-body-comparison-end-');\n        inject(_CdkPrivateStyleLoader).load(_StructuralStylesLoader);\n        this._ngZone.runOutsideAngular(() => {\n            const element = this._elementRef.nativeElement;\n            // `touchmove` is active since we need to call `preventDefault`.\n            element.addEventListener('touchmove', this._touchmoveHandler, activeCapturingEventOptions);\n            element.addEventListener('mouseenter', this._enterHandler, passiveCapturingEventOptions);\n            element.addEventListener('focus', this._enterHandler, passiveCapturingEventOptions);\n            element.addEventListener('mouseleave', this._leaveHandler, passiveCapturingEventOptions);\n            element.addEventListener('blur', this._leaveHandler, passiveCapturingEventOptions);\n            element.addEventListener('mousedown', this._mousedownHandler, passiveEventOptions);\n            element.addEventListener('touchstart', this._mousedownHandler, passiveEventOptions);\n            if (this._platform.isBrowser) {\n                window.addEventListener('mouseup', this._mouseupHandler);\n                window.addEventListener('touchend', this._touchendHandler);\n            }\n        });\n    }\n    /** Called when a cell is clicked. */\n    _cellClicked(cell, event) {\n        // Ignore \"clicks\" that are actually canceled drags (eg the user dragged\n        // off and then went back to this cell to undo).\n        if (this._didDragSinceMouseDown) {\n            return;\n        }\n        if (cell.enabled) {\n            this.selectedValueChange.emit({ value: cell.value, event });\n        }\n    }\n    _emitActiveDateChange(cell, event) {\n        if (cell.enabled) {\n            this.activeDateChange.emit({ value: cell.value, event });\n        }\n    }\n    /** Returns whether a cell should be marked as selected. */\n    _isSelected(value) {\n        return this.startValue === value || this.endValue === value;\n    }\n    ngOnChanges(changes) {\n        const columnChanges = changes['numCols'];\n        const { rows, numCols } = this;\n        if (changes['rows'] || columnChanges) {\n            this._firstRowOffset = rows && rows.length && rows[0].length ? numCols - rows[0].length : 0;\n        }\n        if (changes['cellAspectRatio'] || columnChanges || !this._cellPadding) {\n            this._cellPadding = `${(50 * this.cellAspectRatio) / numCols}%`;\n        }\n        if (columnChanges || !this._cellWidth) {\n            this._cellWidth = `${100 / numCols}%`;\n        }\n    }\n    ngOnDestroy() {\n        const element = this._elementRef.nativeElement;\n        element.removeEventListener('touchmove', this._touchmoveHandler, activeCapturingEventOptions);\n        element.removeEventListener('mouseenter', this._enterHandler, passiveCapturingEventOptions);\n        element.removeEventListener('focus', this._enterHandler, passiveCapturingEventOptions);\n        element.removeEventListener('mouseleave', this._leaveHandler, passiveCapturingEventOptions);\n        element.removeEventListener('blur', this._leaveHandler, passiveCapturingEventOptions);\n        element.removeEventListener('mousedown', this._mousedownHandler, passiveEventOptions);\n        element.removeEventListener('touchstart', this._mousedownHandler, passiveEventOptions);\n        if (this._platform.isBrowser) {\n            window.removeEventListener('mouseup', this._mouseupHandler);\n            window.removeEventListener('touchend', this._touchendHandler);\n        }\n    }\n    /** Returns whether a cell is active. */\n    _isActiveCell(rowIndex, colIndex) {\n        let cellNumber = rowIndex * this.numCols + colIndex;\n        // Account for the fact that the first row may not have as many cells.\n        if (rowIndex) {\n            cellNumber -= this._firstRowOffset;\n        }\n        return cellNumber == this.activeCell;\n    }\n    /**\n     * Focuses the active cell after the microtask queue is empty.\n     *\n     * Adding a 0ms setTimeout seems to fix Voiceover losing focus when pressing PageUp/PageDown\n     * (issue #24330).\n     *\n     * Determined a 0ms by gradually increasing duration from 0 and testing two use cases with screen\n     * reader enabled:\n     *\n     * 1. Pressing PageUp/PageDown repeatedly with pausing between each key press.\n     * 2. Pressing and holding the PageDown key with repeated keys enabled.\n     *\n     * Test 1 worked roughly 95-99% of the time with 0ms and got a little bit better as the duration\n     * increased. Test 2 got slightly better until the duration was long enough to interfere with\n     * repeated keys. If the repeated key speed was faster than the timeout duration, then pressing\n     * and holding pagedown caused the entire page to scroll.\n     *\n     * Since repeated key speed can verify across machines, determined that any duration could\n     * potentially interfere with repeated keys. 0ms would be best because it almost entirely\n     * eliminates the focus being lost in Voiceover (#24330) without causing unintended side effects.\n     * Adding delay also complicates writing tests.\n     */\n    _focusActiveCell(movePreview = true) {\n        afterNextRender(() => {\n            setTimeout(() => {\n                const activeCell = this._elementRef.nativeElement.querySelector('.mat-calendar-body-active');\n                if (activeCell) {\n                    if (!movePreview) {\n                        this._skipNextFocus = true;\n                    }\n                    activeCell.focus();\n                }\n            });\n        }, { injector: this._injector });\n    }\n    /** Focuses the active cell after change detection has run and the microtask queue is empty. */\n    _scheduleFocusActiveCellAfterViewChecked() {\n        this._focusActiveCellAfterViewChecked = true;\n    }\n    /** Gets whether a value is the start of the main range. */\n    _isRangeStart(value) {\n        return isStart(value, this.startValue, this.endValue);\n    }\n    /** Gets whether a value is the end of the main range. */\n    _isRangeEnd(value) {\n        return isEnd(value, this.startValue, this.endValue);\n    }\n    /** Gets whether a value is within the currently-selected range. */\n    _isInRange(value) {\n        return isInRange(value, this.startValue, this.endValue, this.isRange);\n    }\n    /** Gets whether a value is the start of the comparison range. */\n    _isComparisonStart(value) {\n        return isStart(value, this.comparisonStart, this.comparisonEnd);\n    }\n    /** Whether the cell is a start bridge cell between the main and comparison ranges. */\n    _isComparisonBridgeStart(value, rowIndex, colIndex) {\n        if (!this._isComparisonStart(value) || this._isRangeStart(value) || !this._isInRange(value)) {\n            return false;\n        }\n        let previousCell = this.rows[rowIndex][colIndex - 1];\n        if (!previousCell) {\n            const previousRow = this.rows[rowIndex - 1];\n            previousCell = previousRow && previousRow[previousRow.length - 1];\n        }\n        return previousCell && !this._isRangeEnd(previousCell.compareValue);\n    }\n    /** Whether the cell is an end bridge cell between the main and comparison ranges. */\n    _isComparisonBridgeEnd(value, rowIndex, colIndex) {\n        if (!this._isComparisonEnd(value) || this._isRangeEnd(value) || !this._isInRange(value)) {\n            return false;\n        }\n        let nextCell = this.rows[rowIndex][colIndex + 1];\n        if (!nextCell) {\n            const nextRow = this.rows[rowIndex + 1];\n            nextCell = nextRow && nextRow[0];\n        }\n        return nextCell && !this._isRangeStart(nextCell.compareValue);\n    }\n    /** Gets whether a value is the end of the comparison range. */\n    _isComparisonEnd(value) {\n        return isEnd(value, this.comparisonStart, this.comparisonEnd);\n    }\n    /** Gets whether a value is within the current comparison range. */\n    _isInComparisonRange(value) {\n        return isInRange(value, this.comparisonStart, this.comparisonEnd, this.isRange);\n    }\n    /**\n     * Gets whether a value is the same as the start and end of the comparison range.\n     * For context, the functions that we use to determine whether something is the start/end of\n     * a range don't allow for the start and end to be on the same day, because we'd have to use\n     * much more specific CSS selectors to style them correctly in all scenarios. This is fine for\n     * the regular range, because when it happens, the selected styles take over and still show where\n     * the range would've been, however we don't have these selected styles for a comparison range.\n     * This function is used to apply a class that serves the same purpose as the one for selected\n     * dates, but it only applies in the context of a comparison range.\n     */\n    _isComparisonIdentical(value) {\n        // Note that we don't need to null check the start/end\n        // here, because the `value` will always be defined.\n        return this.comparisonStart === this.comparisonEnd && value === this.comparisonStart;\n    }\n    /** Gets whether a value is the start of the preview range. */\n    _isPreviewStart(value) {\n        return isStart(value, this.previewStart, this.previewEnd);\n    }\n    /** Gets whether a value is the end of the preview range. */\n    _isPreviewEnd(value) {\n        return isEnd(value, this.previewStart, this.previewEnd);\n    }\n    /** Gets whether a value is inside the preview range. */\n    _isInPreview(value) {\n        return isInRange(value, this.previewStart, this.previewEnd, this.isRange);\n    }\n    /** Gets ids of aria descriptions for the start and end of a date range. */\n    _getDescribedby(value) {\n        if (!this.isRange) {\n            return null;\n        }\n        if (this.startValue === value && this.endValue === value) {\n            return `${this._startDateLabelId} ${this._endDateLabelId}`;\n        }\n        else if (this.startValue === value) {\n            return this._startDateLabelId;\n        }\n        else if (this.endValue === value) {\n            return this._endDateLabelId;\n        }\n        if (this.comparisonStart !== null && this.comparisonEnd !== null) {\n            if (value === this.comparisonStart && value === this.comparisonEnd) {\n                return `${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;\n            }\n            else if (value === this.comparisonStart) {\n                return this._comparisonStartDateLabelId;\n            }\n            else if (value === this.comparisonEnd) {\n                return this._comparisonEndDateLabelId;\n            }\n        }\n        return null;\n    }\n    /**\n     * Event handler for when the user enters an element\n     * inside the calendar body (e.g. by hovering in or focus).\n     */\n    _enterHandler = (event) => {\n        if (this._skipNextFocus && event.type === 'focus') {\n            this._skipNextFocus = false;\n            return;\n        }\n        // We only need to hit the zone when we're selecting a range.\n        if (event.target && this.isRange) {\n            const cell = this._getCellFromElement(event.target);\n            if (cell) {\n                this._ngZone.run(() => this.previewChange.emit({ value: cell.enabled ? cell : null, event }));\n            }\n        }\n    };\n    _touchmoveHandler = (event) => {\n        if (!this.isRange)\n            return;\n        const target = getActualTouchTarget(event);\n        const cell = target ? this._getCellFromElement(target) : null;\n        if (target !== event.target) {\n            this._didDragSinceMouseDown = true;\n        }\n        // If the initial target of the touch is a date cell, prevent default so\n        // that the move is not handled as a scroll.\n        if (getCellElement(event.target)) {\n            event.preventDefault();\n        }\n        this._ngZone.run(() => this.previewChange.emit({ value: cell?.enabled ? cell : null, event }));\n    };\n    /**\n     * Event handler for when the user's pointer leaves an element\n     * inside the calendar body (e.g. by hovering out or blurring).\n     */\n    _leaveHandler = (event) => {\n        // We only need to hit the zone when we're selecting a range.\n        if (this.previewEnd !== null && this.isRange) {\n            if (event.type !== 'blur') {\n                this._didDragSinceMouseDown = true;\n            }\n            // Only reset the preview end value when leaving cells. This looks better, because\n            // we have a gap between the cells and the rows and we don't want to remove the\n            // range just for it to show up again when the user moves a few pixels to the side.\n            if (event.target &&\n                this._getCellFromElement(event.target) &&\n                !(event.relatedTarget &&\n                    this._getCellFromElement(event.relatedTarget))) {\n                this._ngZone.run(() => this.previewChange.emit({ value: null, event }));\n            }\n        }\n    };\n    /**\n     * Triggered on mousedown or touchstart on a date cell.\n     * Respsonsible for starting a drag sequence.\n     */\n    _mousedownHandler = (event) => {\n        if (!this.isRange)\n            return;\n        this._didDragSinceMouseDown = false;\n        // Begin a drag if a cell within the current range was targeted.\n        const cell = event.target && this._getCellFromElement(event.target);\n        if (!cell || !this._isInRange(cell.compareValue)) {\n            return;\n        }\n        this._ngZone.run(() => {\n            this.dragStarted.emit({\n                value: cell.rawValue,\n                event,\n            });\n        });\n    };\n    /** Triggered on mouseup anywhere. Respsonsible for ending a drag sequence. */\n    _mouseupHandler = (event) => {\n        if (!this.isRange)\n            return;\n        const cellElement = getCellElement(event.target);\n        if (!cellElement) {\n            // Mouseup happened outside of datepicker. Cancel drag.\n            this._ngZone.run(() => {\n                this.dragEnded.emit({ value: null, event });\n            });\n            return;\n        }\n        if (cellElement.closest('.mat-calendar-body') !== this._elementRef.nativeElement) {\n            // Mouseup happened inside a different month instance.\n            // Allow it to handle the event.\n            return;\n        }\n        this._ngZone.run(() => {\n            const cell = this._getCellFromElement(cellElement);\n            this.dragEnded.emit({ value: cell?.rawValue ?? null, event });\n        });\n    };\n    /** Triggered on touchend anywhere. Respsonsible for ending a drag sequence. */\n    _touchendHandler = (event) => {\n        const target = getActualTouchTarget(event);\n        if (target) {\n            this._mouseupHandler({ target });\n        }\n    };\n    /** Finds the MatCalendarCell that corresponds to a DOM node. */\n    _getCellFromElement(element) {\n        const cell = getCellElement(element);\n        if (cell) {\n            const row = cell.getAttribute('data-mat-row');\n            const col = cell.getAttribute('data-mat-col');\n            if (row && col) {\n                return this.rows[parseInt(row)][parseInt(col)];\n            }\n        }\n        return null;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatCalendarBody, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"17.0.0\", version: \"19.0.0\", type: MatCalendarBody, isStandalone: true, selector: \"[mat-calendar-body]\", inputs: { label: \"label\", rows: \"rows\", todayValue: \"todayValue\", startValue: \"startValue\", endValue: \"endValue\", labelMinRequiredCells: \"labelMinRequiredCells\", numCols: \"numCols\", activeCell: \"activeCell\", isRange: \"isRange\", cellAspectRatio: \"cellAspectRatio\", comparisonStart: \"comparisonStart\", comparisonEnd: \"comparisonEnd\", previewStart: \"previewStart\", previewEnd: \"previewEnd\", startDateAccessibleName: \"startDateAccessibleName\", endDateAccessibleName: \"endDateAccessibleName\" }, outputs: { selectedValueChange: \"selectedValueChange\", previewChange: \"previewChange\", activeDateChange: \"activeDateChange\", dragStarted: \"dragStarted\", dragEnded: \"dragEnded\" }, host: { classAttribute: \"mat-calendar-body\" }, exportAs: [\"matCalendarBody\"], usesOnChanges: true, ngImport: i0, template: \"<!--\\n  If there's not enough space in the first row, create a separate label row. We mark this row as\\n  aria-hidden because we don't want it to be read out as one of the weeks in the month.\\n-->\\n@if (_firstRowOffset < labelMinRequiredCells) {\\n  <tr aria-hidden=\\\"true\\\">\\n    <td class=\\\"mat-calendar-body-label\\\"\\n        [attr.colspan]=\\\"numCols\\\"\\n        [style.paddingTop]=\\\"_cellPadding\\\"\\n        [style.paddingBottom]=\\\"_cellPadding\\\">\\n      {{label}}\\n    </td>\\n  </tr>\\n}\\n\\n<!-- Create the first row separately so we can include a special spacer cell. -->\\n@for (row of rows; track _trackRow(row); let rowIndex = $index) {\\n  <tr role=\\\"row\\\">\\n    <!--\\n      This cell is purely decorative, but we can't put `aria-hidden` or `role=\\\"presentation\\\"` on it,\\n      because it throws off the week days for the rest of the row on NVDA. The aspect ratio of the\\n      table cells is maintained by setting the top and bottom padding as a percentage of the width\\n      (a variant of the trick described here: https://www.w3schools.com/howto/howto_css_aspect_ratio.asp).\\n    -->\\n    @if (rowIndex === 0 && _firstRowOffset) {\\n      <td\\n        class=\\\"mat-calendar-body-label\\\"\\n        [attr.colspan]=\\\"_firstRowOffset\\\"\\n        [style.paddingTop]=\\\"_cellPadding\\\"\\n        [style.paddingBottom]=\\\"_cellPadding\\\">\\n        {{_firstRowOffset >= labelMinRequiredCells ? label : ''}}\\n      </td>\\n    }\\n    <!--\\n      Each gridcell in the calendar contains a button, which signals to assistive technology that the\\n      cell is interactable, as well as the selection state via `aria-pressed`. See #23476 for\\n      background.\\n    -->\\n    @for (item of row; track item.id; let colIndex = $index) {\\n      <td\\n        role=\\\"gridcell\\\"\\n        class=\\\"mat-calendar-body-cell-container\\\"\\n        [style.width]=\\\"_cellWidth\\\"\\n        [style.paddingTop]=\\\"_cellPadding\\\"\\n        [style.paddingBottom]=\\\"_cellPadding\\\"\\n        [attr.data-mat-row]=\\\"rowIndex\\\"\\n        [attr.data-mat-col]=\\\"colIndex\\\"\\n      >\\n        <button\\n            type=\\\"button\\\"\\n            class=\\\"mat-calendar-body-cell\\\"\\n            [ngClass]=\\\"item.cssClasses\\\"\\n            [tabindex]=\\\"_isActiveCell(rowIndex, colIndex) ? 0 : -1\\\"\\n            [class.mat-calendar-body-disabled]=\\\"!item.enabled\\\"\\n            [class.mat-calendar-body-active]=\\\"_isActiveCell(rowIndex, colIndex)\\\"\\n            [class.mat-calendar-body-range-start]=\\\"_isRangeStart(item.compareValue)\\\"\\n            [class.mat-calendar-body-range-end]=\\\"_isRangeEnd(item.compareValue)\\\"\\n            [class.mat-calendar-body-in-range]=\\\"_isInRange(item.compareValue)\\\"\\n            [class.mat-calendar-body-comparison-bridge-start]=\\\"_isComparisonBridgeStart(item.compareValue, rowIndex, colIndex)\\\"\\n            [class.mat-calendar-body-comparison-bridge-end]=\\\"_isComparisonBridgeEnd(item.compareValue, rowIndex, colIndex)\\\"\\n            [class.mat-calendar-body-comparison-start]=\\\"_isComparisonStart(item.compareValue)\\\"\\n            [class.mat-calendar-body-comparison-end]=\\\"_isComparisonEnd(item.compareValue)\\\"\\n            [class.mat-calendar-body-in-comparison-range]=\\\"_isInComparisonRange(item.compareValue)\\\"\\n            [class.mat-calendar-body-preview-start]=\\\"_isPreviewStart(item.compareValue)\\\"\\n            [class.mat-calendar-body-preview-end]=\\\"_isPreviewEnd(item.compareValue)\\\"\\n            [class.mat-calendar-body-in-preview]=\\\"_isInPreview(item.compareValue)\\\"\\n            [attr.aria-label]=\\\"item.ariaLabel\\\"\\n            [attr.aria-disabled]=\\\"!item.enabled || null\\\"\\n            [attr.aria-pressed]=\\\"_isSelected(item.compareValue)\\\"\\n            [attr.aria-current]=\\\"todayValue === item.compareValue ? 'date' : null\\\"\\n            [attr.aria-describedby]=\\\"_getDescribedby(item.compareValue)\\\"\\n            (click)=\\\"_cellClicked(item, $event)\\\"\\n            (focus)=\\\"_emitActiveDateChange(item, $event)\\\">\\n            <span class=\\\"mat-calendar-body-cell-content mat-focus-indicator\\\"\\n              [class.mat-calendar-body-selected]=\\\"_isSelected(item.compareValue)\\\"\\n              [class.mat-calendar-body-comparison-identical]=\\\"_isComparisonIdentical(item.compareValue)\\\"\\n              [class.mat-calendar-body-today]=\\\"todayValue === item.compareValue\\\">\\n              {{item.displayValue}}\\n            </span>\\n            <span class=\\\"mat-calendar-body-cell-preview\\\" aria-hidden=\\\"true\\\"></span>\\n        </button>\\n      </td>\\n    }\\n  </tr>\\n}\\n\\n<span [id]=\\\"_startDateLabelId\\\" class=\\\"mat-calendar-body-hidden-label\\\">\\n  {{startDateAccessibleName}}\\n</span>\\n<span [id]=\\\"_endDateLabelId\\\" class=\\\"mat-calendar-body-hidden-label\\\">\\n  {{endDateAccessibleName}}\\n</span>\\n<span [id]=\\\"_comparisonStartDateLabelId\\\" class=\\\"mat-calendar-body-hidden-label\\\">\\n  {{comparisonDateAccessibleName}} {{startDateAccessibleName}}\\n</span>\\n<span [id]=\\\"_comparisonEndDateLabelId\\\" class=\\\"mat-calendar-body-hidden-label\\\">\\n  {{comparisonDateAccessibleName}} {{endDateAccessibleName}}\\n</span>\\n\", styles: [\".mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:\\\"\\\";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}\"], dependencies: [{ kind: \"directive\", type: NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatCalendarBody, decorators: [{\n            type: Component,\n            args: [{ selector: '[mat-calendar-body]', host: {\n                        'class': 'mat-calendar-body',\n                    }, exportAs: 'matCalendarBody', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, imports: [NgClass], template: \"<!--\\n  If there's not enough space in the first row, create a separate label row. We mark this row as\\n  aria-hidden because we don't want it to be read out as one of the weeks in the month.\\n-->\\n@if (_firstRowOffset < labelMinRequiredCells) {\\n  <tr aria-hidden=\\\"true\\\">\\n    <td class=\\\"mat-calendar-body-label\\\"\\n        [attr.colspan]=\\\"numCols\\\"\\n        [style.paddingTop]=\\\"_cellPadding\\\"\\n        [style.paddingBottom]=\\\"_cellPadding\\\">\\n      {{label}}\\n    </td>\\n  </tr>\\n}\\n\\n<!-- Create the first row separately so we can include a special spacer cell. -->\\n@for (row of rows; track _trackRow(row); let rowIndex = $index) {\\n  <tr role=\\\"row\\\">\\n    <!--\\n      This cell is purely decorative, but we can't put `aria-hidden` or `role=\\\"presentation\\\"` on it,\\n      because it throws off the week days for the rest of the row on NVDA. The aspect ratio of the\\n      table cells is maintained by setting the top and bottom padding as a percentage of the width\\n      (a variant of the trick described here: https://www.w3schools.com/howto/howto_css_aspect_ratio.asp).\\n    -->\\n    @if (rowIndex === 0 && _firstRowOffset) {\\n      <td\\n        class=\\\"mat-calendar-body-label\\\"\\n        [attr.colspan]=\\\"_firstRowOffset\\\"\\n        [style.paddingTop]=\\\"_cellPadding\\\"\\n        [style.paddingBottom]=\\\"_cellPadding\\\">\\n        {{_firstRowOffset >= labelMinRequiredCells ? label : ''}}\\n      </td>\\n    }\\n    <!--\\n      Each gridcell in the calendar contains a button, which signals to assistive technology that the\\n      cell is interactable, as well as the selection state via `aria-pressed`. See #23476 for\\n      background.\\n    -->\\n    @for (item of row; track item.id; let colIndex = $index) {\\n      <td\\n        role=\\\"gridcell\\\"\\n        class=\\\"mat-calendar-body-cell-container\\\"\\n        [style.width]=\\\"_cellWidth\\\"\\n        [style.paddingTop]=\\\"_cellPadding\\\"\\n        [style.paddingBottom]=\\\"_cellPadding\\\"\\n        [attr.data-mat-row]=\\\"rowIndex\\\"\\n        [attr.data-mat-col]=\\\"colIndex\\\"\\n      >\\n        <button\\n            type=\\\"button\\\"\\n            class=\\\"mat-calendar-body-cell\\\"\\n            [ngClass]=\\\"item.cssClasses\\\"\\n            [tabindex]=\\\"_isActiveCell(rowIndex, colIndex) ? 0 : -1\\\"\\n            [class.mat-calendar-body-disabled]=\\\"!item.enabled\\\"\\n            [class.mat-calendar-body-active]=\\\"_isActiveCell(rowIndex, colIndex)\\\"\\n            [class.mat-calendar-body-range-start]=\\\"_isRangeStart(item.compareValue)\\\"\\n            [class.mat-calendar-body-range-end]=\\\"_isRangeEnd(item.compareValue)\\\"\\n            [class.mat-calendar-body-in-range]=\\\"_isInRange(item.compareValue)\\\"\\n            [class.mat-calendar-body-comparison-bridge-start]=\\\"_isComparisonBridgeStart(item.compareValue, rowIndex, colIndex)\\\"\\n            [class.mat-calendar-body-comparison-bridge-end]=\\\"_isComparisonBridgeEnd(item.compareValue, rowIndex, colIndex)\\\"\\n            [class.mat-calendar-body-comparison-start]=\\\"_isComparisonStart(item.compareValue)\\\"\\n            [class.mat-calendar-body-comparison-end]=\\\"_isComparisonEnd(item.compareValue)\\\"\\n            [class.mat-calendar-body-in-comparison-range]=\\\"_isInComparisonRange(item.compareValue)\\\"\\n            [class.mat-calendar-body-preview-start]=\\\"_isPreviewStart(item.compareValue)\\\"\\n            [class.mat-calendar-body-preview-end]=\\\"_isPreviewEnd(item.compareValue)\\\"\\n            [class.mat-calendar-body-in-preview]=\\\"_isInPreview(item.compareValue)\\\"\\n            [attr.aria-label]=\\\"item.ariaLabel\\\"\\n            [attr.aria-disabled]=\\\"!item.enabled || null\\\"\\n            [attr.aria-pressed]=\\\"_isSelected(item.compareValue)\\\"\\n            [attr.aria-current]=\\\"todayValue === item.compareValue ? 'date' : null\\\"\\n            [attr.aria-describedby]=\\\"_getDescribedby(item.compareValue)\\\"\\n            (click)=\\\"_cellClicked(item, $event)\\\"\\n            (focus)=\\\"_emitActiveDateChange(item, $event)\\\">\\n            <span class=\\\"mat-calendar-body-cell-content mat-focus-indicator\\\"\\n              [class.mat-calendar-body-selected]=\\\"_isSelected(item.compareValue)\\\"\\n              [class.mat-calendar-body-comparison-identical]=\\\"_isComparisonIdentical(item.compareValue)\\\"\\n              [class.mat-calendar-body-today]=\\\"todayValue === item.compareValue\\\">\\n              {{item.displayValue}}\\n            </span>\\n            <span class=\\\"mat-calendar-body-cell-preview\\\" aria-hidden=\\\"true\\\"></span>\\n        </button>\\n      </td>\\n    }\\n  </tr>\\n}\\n\\n<span [id]=\\\"_startDateLabelId\\\" class=\\\"mat-calendar-body-hidden-label\\\">\\n  {{startDateAccessibleName}}\\n</span>\\n<span [id]=\\\"_endDateLabelId\\\" class=\\\"mat-calendar-body-hidden-label\\\">\\n  {{endDateAccessibleName}}\\n</span>\\n<span [id]=\\\"_comparisonStartDateLabelId\\\" class=\\\"mat-calendar-body-hidden-label\\\">\\n  {{comparisonDateAccessibleName}} {{startDateAccessibleName}}\\n</span>\\n<span [id]=\\\"_comparisonEndDateLabelId\\\" class=\\\"mat-calendar-body-hidden-label\\\">\\n  {{comparisonDateAccessibleName}} {{endDateAccessibleName}}\\n</span>\\n\", styles: [\".mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:\\\"\\\";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}\"] }]\n        }], ctorParameters: () => [], propDecorators: { label: [{\n                type: Input\n            }], rows: [{\n                type: Input\n            }], todayValue: [{\n                type: Input\n            }], startValue: [{\n                type: Input\n            }], endValue: [{\n                type: Input\n            }], labelMinRequiredCells: [{\n                type: Input\n            }], numCols: [{\n                type: Input\n            }], activeCell: [{\n                type: Input\n            }], isRange: [{\n                type: Input\n            }], cellAspectRatio: [{\n                type: Input\n            }], comparisonStart: [{\n                type: Input\n            }], comparisonEnd: [{\n                type: Input\n            }], previewStart: [{\n                type: Input\n            }], previewEnd: [{\n                type: Input\n            }], startDateAccessibleName: [{\n                type: Input\n            }], endDateAccessibleName: [{\n                type: Input\n            }], selectedValueChange: [{\n                type: Output\n            }], previewChange: [{\n                type: Output\n            }], activeDateChange: [{\n                type: Output\n            }], dragStarted: [{\n                type: Output\n            }], dragEnded: [{\n                type: Output\n            }] } });\n/** Checks whether a node is a table cell element. */\nfunction isTableCell(node) {\n    return node?.nodeName === 'TD';\n}\n/**\n * Gets the date table cell element that is or contains the specified element.\n * Or returns null if element is not part of a date cell.\n */\nfunction getCellElement(element) {\n    let cell;\n    if (isTableCell(element)) {\n        cell = element;\n    }\n    else if (isTableCell(element.parentNode)) {\n        cell = element.parentNode;\n    }\n    else if (isTableCell(element.parentNode?.parentNode)) {\n        cell = element.parentNode.parentNode;\n    }\n    return cell?.getAttribute('data-mat-row') != null ? cell : null;\n}\n/** Checks whether a value is the start of a range. */\nfunction isStart(value, start, end) {\n    return end !== null && start !== end && value < end && value === start;\n}\n/** Checks whether a value is the end of a range. */\nfunction isEnd(value, start, end) {\n    return start !== null && start !== end && value >= start && value === end;\n}\n/** Checks whether a value is inside of a range. */\nfunction isInRange(value, start, end, rangeEnabled) {\n    return (rangeEnabled &&\n        start !== null &&\n        end !== null &&\n        start !== end &&\n        value >= start &&\n        value <= end);\n}\n/**\n * Extracts the element that actually corresponds to a touch event's location\n * (rather than the element that initiated the sequence of touch events).\n */\nfunction getActualTouchTarget(event) {\n    const touchLocation = event.changedTouches[0];\n    return document.elementFromPoint(touchLocation.clientX, touchLocation.clientY);\n}\n\n/** A class representing a range of dates. */\nclass DateRange {\n    start;\n    end;\n    /**\n     * Ensures that objects with a `start` and `end` property can't be assigned to a variable that\n     * expects a `DateRange`\n     */\n    // tslint:disable-next-line:no-unused-variable\n    _disableStructuralEquivalency;\n    constructor(\n    /** The start date of the range. */\n    start, \n    /** The end date of the range. */\n    end) {\n        this.start = start;\n        this.end = end;\n    }\n}\n/**\n * A selection model containing a date selection.\n * @docs-private\n */\nclass MatDateSelectionModel {\n    selection;\n    _adapter;\n    _selectionChanged = new Subject();\n    /** Emits when the selection has changed. */\n    selectionChanged = this._selectionChanged;\n    constructor(\n    /** The current selection. */\n    selection, _adapter) {\n        this.selection = selection;\n        this._adapter = _adapter;\n        this.selection = selection;\n    }\n    /**\n     * Updates the current selection in the model.\n     * @param value New selection that should be assigned.\n     * @param source Object that triggered the selection change.\n     */\n    updateSelection(value, source) {\n        const oldValue = this.selection;\n        this.selection = value;\n        this._selectionChanged.next({ selection: value, source, oldValue });\n    }\n    ngOnDestroy() {\n        this._selectionChanged.complete();\n    }\n    _isValidDateInstance(date) {\n        return this._adapter.isDateInstance(date) && this._adapter.isValid(date);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateSelectionModel, deps: \"invalid\", target: i0.FactoryTarget.Injectable });\n    static prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateSelectionModel });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateSelectionModel, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: undefined }, { type: i1.DateAdapter }] });\n/**\n * A selection model that contains a single date.\n * @docs-private\n */\nclass MatSingleDateSelectionModel extends MatDateSelectionModel {\n    constructor(adapter) {\n        super(null, adapter);\n    }\n    /**\n     * Adds a date to the current selection. In the case of a single date selection, the added date\n     * simply overwrites the previous selection\n     */\n    add(date) {\n        super.updateSelection(date, this);\n    }\n    /** Checks whether the current selection is valid. */\n    isValid() {\n        return this.selection != null && this._isValidDateInstance(this.selection);\n    }\n    /**\n     * Checks whether the current selection is complete. In the case of a single date selection, this\n     * is true if the current selection is not null.\n     */\n    isComplete() {\n        return this.selection != null;\n    }\n    /** Clones the selection model. */\n    clone() {\n        const clone = new MatSingleDateSelectionModel(this._adapter);\n        clone.updateSelection(this.selection, this);\n        return clone;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatSingleDateSelectionModel, deps: [{ token: i1.DateAdapter }], target: i0.FactoryTarget.Injectable });\n    static prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatSingleDateSelectionModel });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatSingleDateSelectionModel, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: i1.DateAdapter }] });\n/**\n * A selection model that contains a date range.\n * @docs-private\n */\nclass MatRangeDateSelectionModel extends MatDateSelectionModel {\n    constructor(adapter) {\n        super(new DateRange(null, null), adapter);\n    }\n    /**\n     * Adds a date to the current selection. In the case of a date range selection, the added date\n     * fills in the next `null` value in the range. If both the start and the end already have a date,\n     * the selection is reset so that the given date is the new `start` and the `end` is null.\n     */\n    add(date) {\n        let { start, end } = this.selection;\n        if (start == null) {\n            start = date;\n        }\n        else if (end == null) {\n            end = date;\n        }\n        else {\n            start = date;\n            end = null;\n        }\n        super.updateSelection(new DateRange(start, end), this);\n    }\n    /** Checks whether the current selection is valid. */\n    isValid() {\n        const { start, end } = this.selection;\n        // Empty ranges are valid.\n        if (start == null && end == null) {\n            return true;\n        }\n        // Complete ranges are only valid if both dates are valid and the start is before the end.\n        if (start != null && end != null) {\n            return (this._isValidDateInstance(start) &&\n                this._isValidDateInstance(end) &&\n                this._adapter.compareDate(start, end) <= 0);\n        }\n        // Partial ranges are valid if the start/end is valid.\n        return ((start == null || this._isValidDateInstance(start)) &&\n            (end == null || this._isValidDateInstance(end)));\n    }\n    /**\n     * Checks whether the current selection is complete. In the case of a date range selection, this\n     * is true if the current selection has a non-null `start` and `end`.\n     */\n    isComplete() {\n        return this.selection.start != null && this.selection.end != null;\n    }\n    /** Clones the selection model. */\n    clone() {\n        const clone = new MatRangeDateSelectionModel(this._adapter);\n        clone.updateSelection(this.selection, this);\n        return clone;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatRangeDateSelectionModel, deps: [{ token: i1.DateAdapter }], target: i0.FactoryTarget.Injectable });\n    static prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatRangeDateSelectionModel });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatRangeDateSelectionModel, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: i1.DateAdapter }] });\n/** @docs-private */\nfunction MAT_SINGLE_DATE_SELECTION_MODEL_FACTORY(parent, adapter) {\n    return parent || new MatSingleDateSelectionModel(adapter);\n}\n/**\n * Used to provide a single selection model to a component.\n * @docs-private\n */\nconst MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER = {\n    provide: MatDateSelectionModel,\n    deps: [[new Optional(), new SkipSelf(), MatDateSelectionModel], DateAdapter],\n    useFactory: MAT_SINGLE_DATE_SELECTION_MODEL_FACTORY,\n};\n/** @docs-private */\nfunction MAT_RANGE_DATE_SELECTION_MODEL_FACTORY(parent, adapter) {\n    return parent || new MatRangeDateSelectionModel(adapter);\n}\n/**\n * Used to provide a range selection model to a component.\n * @docs-private\n */\nconst MAT_RANGE_DATE_SELECTION_MODEL_PROVIDER = {\n    provide: MatDateSelectionModel,\n    deps: [[new Optional(), new SkipSelf(), MatDateSelectionModel], DateAdapter],\n    useFactory: MAT_RANGE_DATE_SELECTION_MODEL_FACTORY,\n};\n\n/** Injection token used to customize the date range selection behavior. */\nconst MAT_DATE_RANGE_SELECTION_STRATEGY = new InjectionToken('MAT_DATE_RANGE_SELECTION_STRATEGY');\n/** Provides the default date range selection behavior. */\nclass DefaultMatCalendarRangeStrategy {\n    _dateAdapter;\n    constructor(_dateAdapter) {\n        this._dateAdapter = _dateAdapter;\n    }\n    selectionFinished(date, currentRange) {\n        let { start, end } = currentRange;\n        if (start == null) {\n            start = date;\n        }\n        else if (end == null && date && this._dateAdapter.compareDate(date, start) >= 0) {\n            end = date;\n        }\n        else {\n            start = date;\n            end = null;\n        }\n        return new DateRange(start, end);\n    }\n    createPreview(activeDate, currentRange) {\n        let start = null;\n        let end = null;\n        if (currentRange.start && !currentRange.end && activeDate) {\n            start = currentRange.start;\n            end = activeDate;\n        }\n        return new DateRange(start, end);\n    }\n    createDrag(dragOrigin, originalRange, newDate) {\n        let start = originalRange.start;\n        let end = originalRange.end;\n        if (!start || !end) {\n            // Can't drag from an incomplete range.\n            return null;\n        }\n        const adapter = this._dateAdapter;\n        const isRange = adapter.compareDate(start, end) !== 0;\n        const diffYears = adapter.getYear(newDate) - adapter.getYear(dragOrigin);\n        const diffMonths = adapter.getMonth(newDate) - adapter.getMonth(dragOrigin);\n        const diffDays = adapter.getDate(newDate) - adapter.getDate(dragOrigin);\n        if (isRange && adapter.sameDate(dragOrigin, originalRange.start)) {\n            start = newDate;\n            if (adapter.compareDate(newDate, end) > 0) {\n                end = adapter.addCalendarYears(end, diffYears);\n                end = adapter.addCalendarMonths(end, diffMonths);\n                end = adapter.addCalendarDays(end, diffDays);\n            }\n        }\n        else if (isRange && adapter.sameDate(dragOrigin, originalRange.end)) {\n            end = newDate;\n            if (adapter.compareDate(newDate, start) < 0) {\n                start = adapter.addCalendarYears(start, diffYears);\n                start = adapter.addCalendarMonths(start, diffMonths);\n                start = adapter.addCalendarDays(start, diffDays);\n            }\n        }\n        else {\n            start = adapter.addCalendarYears(start, diffYears);\n            start = adapter.addCalendarMonths(start, diffMonths);\n            start = adapter.addCalendarDays(start, diffDays);\n            end = adapter.addCalendarYears(end, diffYears);\n            end = adapter.addCalendarMonths(end, diffMonths);\n            end = adapter.addCalendarDays(end, diffDays);\n        }\n        return new DateRange(start, end);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: DefaultMatCalendarRangeStrategy, deps: [{ token: i1.DateAdapter }], target: i0.FactoryTarget.Injectable });\n    static prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: DefaultMatCalendarRangeStrategy });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: DefaultMatCalendarRangeStrategy, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: i1.DateAdapter }] });\n/** @docs-private */\nfunction MAT_CALENDAR_RANGE_STRATEGY_PROVIDER_FACTORY(parent, adapter) {\n    return parent || new DefaultMatCalendarRangeStrategy(adapter);\n}\n/** @docs-private */\nconst MAT_CALENDAR_RANGE_STRATEGY_PROVIDER = {\n    provide: MAT_DATE_RANGE_SELECTION_STRATEGY,\n    deps: [[new Optional(), new SkipSelf(), MAT_DATE_RANGE_SELECTION_STRATEGY], DateAdapter],\n    useFactory: MAT_CALENDAR_RANGE_STRATEGY_PROVIDER_FACTORY,\n};\n\nconst DAYS_PER_WEEK = 7;\nlet uniqueIdCounter = 0;\n/**\n * An internal component used to display a single month in the datepicker.\n * @docs-private\n */\nclass MatMonthView {\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _dateFormats = inject(MAT_DATE_FORMATS, { optional: true });\n    _dateAdapter = inject(DateAdapter, { optional: true });\n    _dir = inject(Directionality, { optional: true });\n    _rangeStrategy = inject(MAT_DATE_RANGE_SELECTION_STRATEGY, { optional: true });\n    _rerenderSubscription = Subscription.EMPTY;\n    /** Flag used to filter out space/enter keyup events that originated outside of the view. */\n    _selectionKeyPressed;\n    /**\n     * The date to display in this month view (everything other than the month and year is ignored).\n     */\n    get activeDate() {\n        return this._activeDate;\n    }\n    set activeDate(value) {\n        const oldActiveDate = this._activeDate;\n        const validDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value)) ||\n            this._dateAdapter.today();\n        this._activeDate = this._dateAdapter.clampDate(validDate, this.minDate, this.maxDate);\n        if (!this._hasSameMonthAndYear(oldActiveDate, this._activeDate)) {\n            this._init();\n        }\n    }\n    _activeDate;\n    /** The currently selected date. */\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        if (value instanceof DateRange) {\n            this._selected = value;\n        }\n        else {\n            this._selected = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n        }\n        this._setRanges(this._selected);\n    }\n    _selected;\n    /** The minimum selectable date. */\n    get minDate() {\n        return this._minDate;\n    }\n    set minDate(value) {\n        this._minDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _minDate;\n    /** The maximum selectable date. */\n    get maxDate() {\n        return this._maxDate;\n    }\n    set maxDate(value) {\n        this._maxDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _maxDate;\n    /** Function used to filter which dates are selectable. */\n    dateFilter;\n    /** Function that can be used to add custom CSS classes to dates. */\n    dateClass;\n    /** Start of the comparison range. */\n    comparisonStart;\n    /** End of the comparison range. */\n    comparisonEnd;\n    /** ARIA Accessible name of the `<input matStartDate/>` */\n    startDateAccessibleName;\n    /** ARIA Accessible name of the `<input matEndDate/>` */\n    endDateAccessibleName;\n    /** Origin of active drag, or null when dragging is not active. */\n    activeDrag = null;\n    /** Emits when a new date is selected. */\n    selectedChange = new EventEmitter();\n    /** Emits when any date is selected. */\n    _userSelection = new EventEmitter();\n    /** Emits when the user initiates a date range drag via mouse or touch. */\n    dragStarted = new EventEmitter();\n    /**\n     * Emits when the user completes or cancels a date range drag.\n     * Emits null when the drag was canceled or the newly selected date range if completed.\n     */\n    dragEnded = new EventEmitter();\n    /** Emits when any date is activated. */\n    activeDateChange = new EventEmitter();\n    /** The body of calendar table */\n    _matCalendarBody;\n    /** The label for this month (e.g. \"January 2017\"). */\n    _monthLabel;\n    /** Grid of calendar cells representing the dates of the month. */\n    _weeks;\n    /** The number of blank cells in the first row before the 1st of the month. */\n    _firstWeekOffset;\n    /** Start value of the currently-shown date range. */\n    _rangeStart;\n    /** End value of the currently-shown date range. */\n    _rangeEnd;\n    /** Start value of the currently-shown comparison date range. */\n    _comparisonRangeStart;\n    /** End value of the currently-shown comparison date range. */\n    _comparisonRangeEnd;\n    /** Start of the preview range. */\n    _previewStart;\n    /** End of the preview range. */\n    _previewEnd;\n    /** Whether the user is currently selecting a range of dates. */\n    _isRange;\n    /** The date of the month that today falls on. Null if today is in another month. */\n    _todayDate;\n    /** The names of the weekdays. */\n    _weekdays;\n    constructor() {\n        inject(_CdkPrivateStyleLoader).load(_VisuallyHiddenLoader);\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            if (!this._dateAdapter) {\n                throw createMissingDateImplError('DateAdapter');\n            }\n            if (!this._dateFormats) {\n                throw createMissingDateImplError('MAT_DATE_FORMATS');\n            }\n        }\n        this._activeDate = this._dateAdapter.today();\n    }\n    ngAfterContentInit() {\n        this._rerenderSubscription = this._dateAdapter.localeChanges\n            .pipe(startWith(null))\n            .subscribe(() => this._init());\n    }\n    ngOnChanges(changes) {\n        const comparisonChange = changes['comparisonStart'] || changes['comparisonEnd'];\n        if (comparisonChange && !comparisonChange.firstChange) {\n            this._setRanges(this.selected);\n        }\n        if (changes['activeDrag'] && !this.activeDrag) {\n            this._clearPreview();\n        }\n    }\n    ngOnDestroy() {\n        this._rerenderSubscription.unsubscribe();\n    }\n    /** Handles when a new date is selected. */\n    _dateSelected(event) {\n        const date = event.value;\n        const selectedDate = this._getDateFromDayOfMonth(date);\n        let rangeStartDate;\n        let rangeEndDate;\n        if (this._selected instanceof DateRange) {\n            rangeStartDate = this._getDateInCurrentMonth(this._selected.start);\n            rangeEndDate = this._getDateInCurrentMonth(this._selected.end);\n        }\n        else {\n            rangeStartDate = rangeEndDate = this._getDateInCurrentMonth(this._selected);\n        }\n        if (rangeStartDate !== date || rangeEndDate !== date) {\n            this.selectedChange.emit(selectedDate);\n        }\n        this._userSelection.emit({ value: selectedDate, event: event.event });\n        this._clearPreview();\n        this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Takes the index of a calendar body cell wrapped in an event as argument. For the date that\n     * corresponds to the given cell, set `activeDate` to that date and fire `activeDateChange` with\n     * that date.\n     *\n     * This function is used to match each component's model of the active date with the calendar\n     * body cell that was focused. It updates its value of `activeDate` synchronously and updates the\n     * parent's value asynchronously via the `activeDateChange` event. The child component receives an\n     * updated value asynchronously via the `activeCell` Input.\n     */\n    _updateActiveDate(event) {\n        const month = event.value;\n        const oldActiveDate = this._activeDate;\n        this.activeDate = this._getDateFromDayOfMonth(month);\n        if (this._dateAdapter.compareDate(oldActiveDate, this.activeDate)) {\n            this.activeDateChange.emit(this._activeDate);\n        }\n    }\n    /** Handles keydown events on the calendar body when calendar is in month view. */\n    _handleCalendarBodyKeydown(event) {\n        // TODO(mmalerba): We currently allow keyboard navigation to disabled dates, but just prevent\n        // disabled ones from being selected. This may not be ideal, we should look into whether\n        // navigation should skip over disabled dates, and if so, how to implement that efficiently.\n        const oldActiveDate = this._activeDate;\n        const isRtl = this._isRtl();\n        switch (event.keyCode) {\n            case LEFT_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarDays(this._activeDate, isRtl ? 1 : -1);\n                break;\n            case RIGHT_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarDays(this._activeDate, isRtl ? -1 : 1);\n                break;\n            case UP_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarDays(this._activeDate, -7);\n                break;\n            case DOWN_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarDays(this._activeDate, 7);\n                break;\n            case HOME:\n                this.activeDate = this._dateAdapter.addCalendarDays(this._activeDate, 1 - this._dateAdapter.getDate(this._activeDate));\n                break;\n            case END:\n                this.activeDate = this._dateAdapter.addCalendarDays(this._activeDate, this._dateAdapter.getNumDaysInMonth(this._activeDate) -\n                    this._dateAdapter.getDate(this._activeDate));\n                break;\n            case PAGE_UP:\n                this.activeDate = event.altKey\n                    ? this._dateAdapter.addCalendarYears(this._activeDate, -1)\n                    : this._dateAdapter.addCalendarMonths(this._activeDate, -1);\n                break;\n            case PAGE_DOWN:\n                this.activeDate = event.altKey\n                    ? this._dateAdapter.addCalendarYears(this._activeDate, 1)\n                    : this._dateAdapter.addCalendarMonths(this._activeDate, 1);\n                break;\n            case ENTER:\n            case SPACE:\n                this._selectionKeyPressed = true;\n                if (this._canSelect(this._activeDate)) {\n                    // Prevent unexpected default actions such as form submission.\n                    // Note that we only prevent the default action here while the selection happens in\n                    // `keyup` below. We can't do the selection here, because it can cause the calendar to\n                    // reopen if focus is restored immediately. We also can't call `preventDefault` on `keyup`\n                    // because it's too late (see #23305).\n                    event.preventDefault();\n                }\n                return;\n            case ESCAPE:\n                // Abort the current range selection if the user presses escape mid-selection.\n                if (this._previewEnd != null && !hasModifierKey(event)) {\n                    this._clearPreview();\n                    // If a drag is in progress, cancel the drag without changing the\n                    // current selection.\n                    if (this.activeDrag) {\n                        this.dragEnded.emit({ value: null, event });\n                    }\n                    else {\n                        this.selectedChange.emit(null);\n                        this._userSelection.emit({ value: null, event });\n                    }\n                    event.preventDefault();\n                    event.stopPropagation(); // Prevents the overlay from closing.\n                }\n                return;\n            default:\n                // Don't prevent default or focus active cell on keys that we don't explicitly handle.\n                return;\n        }\n        if (this._dateAdapter.compareDate(oldActiveDate, this.activeDate)) {\n            this.activeDateChange.emit(this.activeDate);\n            this._focusActiveCellAfterViewChecked();\n        }\n        // Prevent unexpected default actions such as form submission.\n        event.preventDefault();\n    }\n    /** Handles keyup events on the calendar body when calendar is in month view. */\n    _handleCalendarBodyKeyup(event) {\n        if (event.keyCode === SPACE || event.keyCode === ENTER) {\n            if (this._selectionKeyPressed && this._canSelect(this._activeDate)) {\n                this._dateSelected({ value: this._dateAdapter.getDate(this._activeDate), event });\n            }\n            this._selectionKeyPressed = false;\n        }\n    }\n    /** Initializes this month view. */\n    _init() {\n        this._setRanges(this.selected);\n        this._todayDate = this._getCellCompareValue(this._dateAdapter.today());\n        this._monthLabel = this._dateFormats.display.monthLabel\n            ? this._dateAdapter.format(this.activeDate, this._dateFormats.display.monthLabel)\n            : this._dateAdapter\n                .getMonthNames('short')[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();\n        let firstOfMonth = this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate), this._dateAdapter.getMonth(this.activeDate), 1);\n        this._firstWeekOffset =\n            (DAYS_PER_WEEK +\n                this._dateAdapter.getDayOfWeek(firstOfMonth) -\n                this._dateAdapter.getFirstDayOfWeek()) %\n                DAYS_PER_WEEK;\n        this._initWeekdays();\n        this._createWeekCells();\n        this._changeDetectorRef.markForCheck();\n    }\n    /** Focuses the active cell after the microtask queue is empty. */\n    _focusActiveCell(movePreview) {\n        this._matCalendarBody._focusActiveCell(movePreview);\n    }\n    /** Focuses the active cell after change detection has run and the microtask queue is empty. */\n    _focusActiveCellAfterViewChecked() {\n        this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked();\n    }\n    /** Called when the user has activated a new cell and the preview needs to be updated. */\n    _previewChanged({ event, value: cell }) {\n        if (this._rangeStrategy) {\n            // We can assume that this will be a range, because preview\n            // events aren't fired for single date selections.\n            const value = cell ? cell.rawValue : null;\n            const previewRange = this._rangeStrategy.createPreview(value, this.selected, event);\n            this._previewStart = this._getCellCompareValue(previewRange.start);\n            this._previewEnd = this._getCellCompareValue(previewRange.end);\n            if (this.activeDrag && value) {\n                const dragRange = this._rangeStrategy.createDrag?.(this.activeDrag.value, this.selected, value, event);\n                if (dragRange) {\n                    this._previewStart = this._getCellCompareValue(dragRange.start);\n                    this._previewEnd = this._getCellCompareValue(dragRange.end);\n                }\n            }\n            // Note that here we need to use `detectChanges`, rather than `markForCheck`, because\n            // the way `_focusActiveCell` is set up at the moment makes it fire at the wrong time\n            // when navigating one month back using the keyboard which will cause this handler\n            // to throw a \"changed after checked\" error when updating the preview state.\n            this._changeDetectorRef.detectChanges();\n        }\n    }\n    /**\n     * Called when the user has ended a drag. If the drag/drop was successful,\n     * computes and emits the new range selection.\n     */\n    _dragEnded(event) {\n        if (!this.activeDrag)\n            return;\n        if (event.value) {\n            // Propagate drag effect\n            const dragDropResult = this._rangeStrategy?.createDrag?.(this.activeDrag.value, this.selected, event.value, event.event);\n            this.dragEnded.emit({ value: dragDropResult ?? null, event: event.event });\n        }\n        else {\n            this.dragEnded.emit({ value: null, event: event.event });\n        }\n    }\n    /**\n     * Takes a day of the month and returns a new date in the same month and year as the currently\n     *  active date. The returned date will have the same day of the month as the argument date.\n     */\n    _getDateFromDayOfMonth(dayOfMonth) {\n        return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate), this._dateAdapter.getMonth(this.activeDate), dayOfMonth);\n    }\n    /** Initializes the weekdays. */\n    _initWeekdays() {\n        const firstDayOfWeek = this._dateAdapter.getFirstDayOfWeek();\n        const narrowWeekdays = this._dateAdapter.getDayOfWeekNames('narrow');\n        const longWeekdays = this._dateAdapter.getDayOfWeekNames('long');\n        // Rotate the labels for days of the week based on the configured first day of the week.\n        let weekdays = longWeekdays.map((long, i) => {\n            return { long, narrow: narrowWeekdays[i], id: uniqueIdCounter++ };\n        });\n        this._weekdays = weekdays.slice(firstDayOfWeek).concat(weekdays.slice(0, firstDayOfWeek));\n    }\n    /** Creates MatCalendarCells for the dates in this month. */\n    _createWeekCells() {\n        const daysInMonth = this._dateAdapter.getNumDaysInMonth(this.activeDate);\n        const dateNames = this._dateAdapter.getDateNames();\n        this._weeks = [[]];\n        for (let i = 0, cell = this._firstWeekOffset; i < daysInMonth; i++, cell++) {\n            if (cell == DAYS_PER_WEEK) {\n                this._weeks.push([]);\n                cell = 0;\n            }\n            const date = this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate), this._dateAdapter.getMonth(this.activeDate), i + 1);\n            const enabled = this._shouldEnableDate(date);\n            const ariaLabel = this._dateAdapter.format(date, this._dateFormats.display.dateA11yLabel);\n            const cellClasses = this.dateClass ? this.dateClass(date, 'month') : undefined;\n            this._weeks[this._weeks.length - 1].push(new MatCalendarCell(i + 1, dateNames[i], ariaLabel, enabled, cellClasses, this._getCellCompareValue(date), date));\n        }\n    }\n    /** Date filter for the month */\n    _shouldEnableDate(date) {\n        return (!!date &&\n            (!this.minDate || this._dateAdapter.compareDate(date, this.minDate) >= 0) &&\n            (!this.maxDate || this._dateAdapter.compareDate(date, this.maxDate) <= 0) &&\n            (!this.dateFilter || this.dateFilter(date)));\n    }\n    /**\n     * Gets the date in this month that the given Date falls on.\n     * Returns null if the given Date is in another month.\n     */\n    _getDateInCurrentMonth(date) {\n        return date && this._hasSameMonthAndYear(date, this.activeDate)\n            ? this._dateAdapter.getDate(date)\n            : null;\n    }\n    /** Checks whether the 2 dates are non-null and fall within the same month of the same year. */\n    _hasSameMonthAndYear(d1, d2) {\n        return !!(d1 &&\n            d2 &&\n            this._dateAdapter.getMonth(d1) == this._dateAdapter.getMonth(d2) &&\n            this._dateAdapter.getYear(d1) == this._dateAdapter.getYear(d2));\n    }\n    /** Gets the value that will be used to one cell to another. */\n    _getCellCompareValue(date) {\n        if (date) {\n            // We use the time since the Unix epoch to compare dates in this view, rather than the\n            // cell values, because we need to support ranges that span across multiple months/years.\n            const year = this._dateAdapter.getYear(date);\n            const month = this._dateAdapter.getMonth(date);\n            const day = this._dateAdapter.getDate(date);\n            return new Date(year, month, day).getTime();\n        }\n        return null;\n    }\n    /** Determines whether the user has the RTL layout direction. */\n    _isRtl() {\n        return this._dir && this._dir.value === 'rtl';\n    }\n    /** Sets the current range based on a model value. */\n    _setRanges(selectedValue) {\n        if (selectedValue instanceof DateRange) {\n            this._rangeStart = this._getCellCompareValue(selectedValue.start);\n            this._rangeEnd = this._getCellCompareValue(selectedValue.end);\n            this._isRange = true;\n        }\n        else {\n            this._rangeStart = this._rangeEnd = this._getCellCompareValue(selectedValue);\n            this._isRange = false;\n        }\n        this._comparisonRangeStart = this._getCellCompareValue(this.comparisonStart);\n        this._comparisonRangeEnd = this._getCellCompareValue(this.comparisonEnd);\n    }\n    /** Gets whether a date can be selected in the month view. */\n    _canSelect(date) {\n        return !this.dateFilter || this.dateFilter(date);\n    }\n    /** Clears out preview state. */\n    _clearPreview() {\n        this._previewStart = this._previewEnd = null;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatMonthView, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"17.0.0\", version: \"19.0.0\", type: MatMonthView, isStandalone: true, selector: \"mat-month-view\", inputs: { activeDate: \"activeDate\", selected: \"selected\", minDate: \"minDate\", maxDate: \"maxDate\", dateFilter: \"dateFilter\", dateClass: \"dateClass\", comparisonStart: \"comparisonStart\", comparisonEnd: \"comparisonEnd\", startDateAccessibleName: \"startDateAccessibleName\", endDateAccessibleName: \"endDateAccessibleName\", activeDrag: \"activeDrag\" }, outputs: { selectedChange: \"selectedChange\", _userSelection: \"_userSelection\", dragStarted: \"dragStarted\", dragEnded: \"dragEnded\", activeDateChange: \"activeDateChange\" }, viewQueries: [{ propertyName: \"_matCalendarBody\", first: true, predicate: MatCalendarBody, descendants: true }], exportAs: [\"matMonthView\"], usesOnChanges: true, ngImport: i0, template: \"<table class=\\\"mat-calendar-table\\\" role=\\\"grid\\\">\\n  <thead class=\\\"mat-calendar-table-header\\\">\\n    <tr>\\n      @for (day of _weekdays; track day.id) {\\n        <th scope=\\\"col\\\">\\n          <span class=\\\"cdk-visually-hidden\\\">{{day.long}}</span>\\n          <span aria-hidden=\\\"true\\\">{{day.narrow}}</span>\\n        </th>\\n      }\\n    </tr>\\n    <tr aria-hidden=\\\"true\\\"><th class=\\\"mat-calendar-table-header-divider\\\" colspan=\\\"7\\\"></th></tr>\\n  </thead>\\n  <tbody mat-calendar-body\\n         [label]=\\\"_monthLabel\\\"\\n         [rows]=\\\"_weeks\\\"\\n         [todayValue]=\\\"_todayDate!\\\"\\n         [startValue]=\\\"_rangeStart!\\\"\\n         [endValue]=\\\"_rangeEnd!\\\"\\n         [comparisonStart]=\\\"_comparisonRangeStart\\\"\\n         [comparisonEnd]=\\\"_comparisonRangeEnd\\\"\\n         [previewStart]=\\\"_previewStart\\\"\\n         [previewEnd]=\\\"_previewEnd\\\"\\n         [isRange]=\\\"_isRange\\\"\\n         [labelMinRequiredCells]=\\\"3\\\"\\n         [activeCell]=\\\"_dateAdapter.getDate(activeDate) - 1\\\"\\n         [startDateAccessibleName]=\\\"startDateAccessibleName\\\"\\n         [endDateAccessibleName]=\\\"endDateAccessibleName\\\"\\n         (selectedValueChange)=\\\"_dateSelected($event)\\\"\\n         (activeDateChange)=\\\"_updateActiveDate($event)\\\"\\n         (previewChange)=\\\"_previewChanged($event)\\\"\\n         (dragStarted)=\\\"dragStarted.emit($event)\\\"\\n         (dragEnded)=\\\"_dragEnded($event)\\\"\\n         (keyup)=\\\"_handleCalendarBodyKeyup($event)\\\"\\n         (keydown)=\\\"_handleCalendarBodyKeydown($event)\\\">\\n  </tbody>\\n</table>\\n\", dependencies: [{ kind: \"component\", type: MatCalendarBody, selector: \"[mat-calendar-body]\", inputs: [\"label\", \"rows\", \"todayValue\", \"startValue\", \"endValue\", \"labelMinRequiredCells\", \"numCols\", \"activeCell\", \"isRange\", \"cellAspectRatio\", \"comparisonStart\", \"comparisonEnd\", \"previewStart\", \"previewEnd\", \"startDateAccessibleName\", \"endDateAccessibleName\"], outputs: [\"selectedValueChange\", \"previewChange\", \"activeDateChange\", \"dragStarted\", \"dragEnded\"], exportAs: [\"matCalendarBody\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatMonthView, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-month-view', exportAs: 'matMonthView', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, imports: [MatCalendarBody], template: \"<table class=\\\"mat-calendar-table\\\" role=\\\"grid\\\">\\n  <thead class=\\\"mat-calendar-table-header\\\">\\n    <tr>\\n      @for (day of _weekdays; track day.id) {\\n        <th scope=\\\"col\\\">\\n          <span class=\\\"cdk-visually-hidden\\\">{{day.long}}</span>\\n          <span aria-hidden=\\\"true\\\">{{day.narrow}}</span>\\n        </th>\\n      }\\n    </tr>\\n    <tr aria-hidden=\\\"true\\\"><th class=\\\"mat-calendar-table-header-divider\\\" colspan=\\\"7\\\"></th></tr>\\n  </thead>\\n  <tbody mat-calendar-body\\n         [label]=\\\"_monthLabel\\\"\\n         [rows]=\\\"_weeks\\\"\\n         [todayValue]=\\\"_todayDate!\\\"\\n         [startValue]=\\\"_rangeStart!\\\"\\n         [endValue]=\\\"_rangeEnd!\\\"\\n         [comparisonStart]=\\\"_comparisonRangeStart\\\"\\n         [comparisonEnd]=\\\"_comparisonRangeEnd\\\"\\n         [previewStart]=\\\"_previewStart\\\"\\n         [previewEnd]=\\\"_previewEnd\\\"\\n         [isRange]=\\\"_isRange\\\"\\n         [labelMinRequiredCells]=\\\"3\\\"\\n         [activeCell]=\\\"_dateAdapter.getDate(activeDate) - 1\\\"\\n         [startDateAccessibleName]=\\\"startDateAccessibleName\\\"\\n         [endDateAccessibleName]=\\\"endDateAccessibleName\\\"\\n         (selectedValueChange)=\\\"_dateSelected($event)\\\"\\n         (activeDateChange)=\\\"_updateActiveDate($event)\\\"\\n         (previewChange)=\\\"_previewChanged($event)\\\"\\n         (dragStarted)=\\\"dragStarted.emit($event)\\\"\\n         (dragEnded)=\\\"_dragEnded($event)\\\"\\n         (keyup)=\\\"_handleCalendarBodyKeyup($event)\\\"\\n         (keydown)=\\\"_handleCalendarBodyKeydown($event)\\\">\\n  </tbody>\\n</table>\\n\" }]\n        }], ctorParameters: () => [], propDecorators: { activeDate: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], minDate: [{\n                type: Input\n            }], maxDate: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input\n            }], dateClass: [{\n                type: Input\n            }], comparisonStart: [{\n                type: Input\n            }], comparisonEnd: [{\n                type: Input\n            }], startDateAccessibleName: [{\n                type: Input\n            }], endDateAccessibleName: [{\n                type: Input\n            }], activeDrag: [{\n                type: Input\n            }], selectedChange: [{\n                type: Output\n            }], _userSelection: [{\n                type: Output\n            }], dragStarted: [{\n                type: Output\n            }], dragEnded: [{\n                type: Output\n            }], activeDateChange: [{\n                type: Output\n            }], _matCalendarBody: [{\n                type: ViewChild,\n                args: [MatCalendarBody]\n            }] } });\n\nconst yearsPerPage = 24;\nconst yearsPerRow = 4;\n/**\n * An internal component used to display a year selector in the datepicker.\n * @docs-private\n */\nclass MatMultiYearView {\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _dateAdapter = inject(DateAdapter, { optional: true });\n    _dir = inject(Directionality, { optional: true });\n    _rerenderSubscription = Subscription.EMPTY;\n    /** Flag used to filter out space/enter keyup events that originated outside of the view. */\n    _selectionKeyPressed;\n    /** The date to display in this multi-year view (everything other than the year is ignored). */\n    get activeDate() {\n        return this._activeDate;\n    }\n    set activeDate(value) {\n        let oldActiveDate = this._activeDate;\n        const validDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value)) ||\n            this._dateAdapter.today();\n        this._activeDate = this._dateAdapter.clampDate(validDate, this.minDate, this.maxDate);\n        if (!isSameMultiYearView(this._dateAdapter, oldActiveDate, this._activeDate, this.minDate, this.maxDate)) {\n            this._init();\n        }\n    }\n    _activeDate;\n    /** The currently selected date. */\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        if (value instanceof DateRange) {\n            this._selected = value;\n        }\n        else {\n            this._selected = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n        }\n        this._setSelectedYear(value);\n    }\n    _selected;\n    /** The minimum selectable date. */\n    get minDate() {\n        return this._minDate;\n    }\n    set minDate(value) {\n        this._minDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _minDate;\n    /** The maximum selectable date. */\n    get maxDate() {\n        return this._maxDate;\n    }\n    set maxDate(value) {\n        this._maxDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _maxDate;\n    /** A function used to filter which dates are selectable. */\n    dateFilter;\n    /** Function that can be used to add custom CSS classes to date cells. */\n    dateClass;\n    /** Emits when a new year is selected. */\n    selectedChange = new EventEmitter();\n    /** Emits the selected year. This doesn't imply a change on the selected date */\n    yearSelected = new EventEmitter();\n    /** Emits when any date is activated. */\n    activeDateChange = new EventEmitter();\n    /** The body of calendar table */\n    _matCalendarBody;\n    /** Grid of calendar cells representing the currently displayed years. */\n    _years;\n    /** The year that today falls on. */\n    _todayYear;\n    /** The year of the selected date. Null if the selected date is null. */\n    _selectedYear;\n    constructor() {\n        if (!this._dateAdapter && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throw createMissingDateImplError('DateAdapter');\n        }\n        this._activeDate = this._dateAdapter.today();\n    }\n    ngAfterContentInit() {\n        this._rerenderSubscription = this._dateAdapter.localeChanges\n            .pipe(startWith(null))\n            .subscribe(() => this._init());\n    }\n    ngOnDestroy() {\n        this._rerenderSubscription.unsubscribe();\n    }\n    /** Initializes this multi-year view. */\n    _init() {\n        this._todayYear = this._dateAdapter.getYear(this._dateAdapter.today());\n        // We want a range years such that we maximize the number of\n        // enabled dates visible at once. This prevents issues where the minimum year\n        // is the last item of a page OR the maximum year is the first item of a page.\n        // The offset from the active year to the \"slot\" for the starting year is the\n        // *actual* first rendered year in the multi-year view.\n        const activeYear = this._dateAdapter.getYear(this._activeDate);\n        const minYearOfPage = activeYear - getActiveOffset(this._dateAdapter, this.activeDate, this.minDate, this.maxDate);\n        this._years = [];\n        for (let i = 0, row = []; i < yearsPerPage; i++) {\n            row.push(minYearOfPage + i);\n            if (row.length == yearsPerRow) {\n                this._years.push(row.map(year => this._createCellForYear(year)));\n                row = [];\n            }\n        }\n        this._changeDetectorRef.markForCheck();\n    }\n    /** Handles when a new year is selected. */\n    _yearSelected(event) {\n        const year = event.value;\n        const selectedYear = this._dateAdapter.createDate(year, 0, 1);\n        const selectedDate = this._getDateFromYear(year);\n        this.yearSelected.emit(selectedYear);\n        this.selectedChange.emit(selectedDate);\n    }\n    /**\n     * Takes the index of a calendar body cell wrapped in an event as argument. For the date that\n     * corresponds to the given cell, set `activeDate` to that date and fire `activeDateChange` with\n     * that date.\n     *\n     * This function is used to match each component's model of the active date with the calendar\n     * body cell that was focused. It updates its value of `activeDate` synchronously and updates the\n     * parent's value asynchronously via the `activeDateChange` event. The child component receives an\n     * updated value asynchronously via the `activeCell` Input.\n     */\n    _updateActiveDate(event) {\n        const year = event.value;\n        const oldActiveDate = this._activeDate;\n        this.activeDate = this._getDateFromYear(year);\n        if (this._dateAdapter.compareDate(oldActiveDate, this.activeDate)) {\n            this.activeDateChange.emit(this.activeDate);\n        }\n    }\n    /** Handles keydown events on the calendar body when calendar is in multi-year view. */\n    _handleCalendarBodyKeydown(event) {\n        const oldActiveDate = this._activeDate;\n        const isRtl = this._isRtl();\n        switch (event.keyCode) {\n            case LEFT_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, isRtl ? 1 : -1);\n                break;\n            case RIGHT_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, isRtl ? -1 : 1);\n                break;\n            case UP_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, -yearsPerRow);\n                break;\n            case DOWN_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, yearsPerRow);\n                break;\n            case HOME:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, -getActiveOffset(this._dateAdapter, this.activeDate, this.minDate, this.maxDate));\n                break;\n            case END:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, yearsPerPage -\n                    getActiveOffset(this._dateAdapter, this.activeDate, this.minDate, this.maxDate) -\n                    1);\n                break;\n            case PAGE_UP:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, event.altKey ? -yearsPerPage * 10 : -yearsPerPage);\n                break;\n            case PAGE_DOWN:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, event.altKey ? yearsPerPage * 10 : yearsPerPage);\n                break;\n            case ENTER:\n            case SPACE:\n                // Note that we only prevent the default action here while the selection happens in\n                // `keyup` below. We can't do the selection here, because it can cause the calendar to\n                // reopen if focus is restored immediately. We also can't call `preventDefault` on `keyup`\n                // because it's too late (see #23305).\n                this._selectionKeyPressed = true;\n                break;\n            default:\n                // Don't prevent default or focus active cell on keys that we don't explicitly handle.\n                return;\n        }\n        if (this._dateAdapter.compareDate(oldActiveDate, this.activeDate)) {\n            this.activeDateChange.emit(this.activeDate);\n        }\n        this._focusActiveCellAfterViewChecked();\n        // Prevent unexpected default actions such as form submission.\n        event.preventDefault();\n    }\n    /** Handles keyup events on the calendar body when calendar is in multi-year view. */\n    _handleCalendarBodyKeyup(event) {\n        if (event.keyCode === SPACE || event.keyCode === ENTER) {\n            if (this._selectionKeyPressed) {\n                this._yearSelected({ value: this._dateAdapter.getYear(this._activeDate), event });\n            }\n            this._selectionKeyPressed = false;\n        }\n    }\n    _getActiveCell() {\n        return getActiveOffset(this._dateAdapter, this.activeDate, this.minDate, this.maxDate);\n    }\n    /** Focuses the active cell after the microtask queue is empty. */\n    _focusActiveCell() {\n        this._matCalendarBody._focusActiveCell();\n    }\n    /** Focuses the active cell after change detection has run and the microtask queue is empty. */\n    _focusActiveCellAfterViewChecked() {\n        this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked();\n    }\n    /**\n     * Takes a year and returns a new date on the same day and month as the currently active date\n     *  The returned date will have the same year as the argument date.\n     */\n    _getDateFromYear(year) {\n        const activeMonth = this._dateAdapter.getMonth(this.activeDate);\n        const daysInMonth = this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(year, activeMonth, 1));\n        const normalizedDate = this._dateAdapter.createDate(year, activeMonth, Math.min(this._dateAdapter.getDate(this.activeDate), daysInMonth));\n        return normalizedDate;\n    }\n    /** Creates an MatCalendarCell for the given year. */\n    _createCellForYear(year) {\n        const date = this._dateAdapter.createDate(year, 0, 1);\n        const yearName = this._dateAdapter.getYearName(date);\n        const cellClasses = this.dateClass ? this.dateClass(date, 'multi-year') : undefined;\n        return new MatCalendarCell(year, yearName, yearName, this._shouldEnableYear(year), cellClasses);\n    }\n    /** Whether the given year is enabled. */\n    _shouldEnableYear(year) {\n        // disable if the year is greater than maxDate lower than minDate\n        if (year === undefined ||\n            year === null ||\n            (this.maxDate && year > this._dateAdapter.getYear(this.maxDate)) ||\n            (this.minDate && year < this._dateAdapter.getYear(this.minDate))) {\n            return false;\n        }\n        // enable if it reaches here and there's no filter defined\n        if (!this.dateFilter) {\n            return true;\n        }\n        const firstOfYear = this._dateAdapter.createDate(year, 0, 1);\n        // If any date in the year is enabled count the year as enabled.\n        for (let date = firstOfYear; this._dateAdapter.getYear(date) == year; date = this._dateAdapter.addCalendarDays(date, 1)) {\n            if (this.dateFilter(date)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /** Determines whether the user has the RTL layout direction. */\n    _isRtl() {\n        return this._dir && this._dir.value === 'rtl';\n    }\n    /** Sets the currently-highlighted year based on a model value. */\n    _setSelectedYear(value) {\n        this._selectedYear = null;\n        if (value instanceof DateRange) {\n            const displayValue = value.start || value.end;\n            if (displayValue) {\n                this._selectedYear = this._dateAdapter.getYear(displayValue);\n            }\n        }\n        else if (value) {\n            this._selectedYear = this._dateAdapter.getYear(value);\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatMultiYearView, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatMultiYearView, isStandalone: true, selector: \"mat-multi-year-view\", inputs: { activeDate: \"activeDate\", selected: \"selected\", minDate: \"minDate\", maxDate: \"maxDate\", dateFilter: \"dateFilter\", dateClass: \"dateClass\" }, outputs: { selectedChange: \"selectedChange\", yearSelected: \"yearSelected\", activeDateChange: \"activeDateChange\" }, viewQueries: [{ propertyName: \"_matCalendarBody\", first: true, predicate: MatCalendarBody, descendants: true }], exportAs: [\"matMultiYearView\"], ngImport: i0, template: \"<table class=\\\"mat-calendar-table\\\" role=\\\"grid\\\">\\n  <thead aria-hidden=\\\"true\\\" class=\\\"mat-calendar-table-header\\\">\\n    <tr><th class=\\\"mat-calendar-table-header-divider\\\" colspan=\\\"4\\\"></th></tr>\\n  </thead>\\n  <tbody mat-calendar-body\\n         [rows]=\\\"_years\\\"\\n         [todayValue]=\\\"_todayYear\\\"\\n         [startValue]=\\\"_selectedYear!\\\"\\n         [endValue]=\\\"_selectedYear!\\\"\\n         [numCols]=\\\"4\\\"\\n         [cellAspectRatio]=\\\"4 / 7\\\"\\n         [activeCell]=\\\"_getActiveCell()\\\"\\n         (selectedValueChange)=\\\"_yearSelected($event)\\\"\\n         (activeDateChange)=\\\"_updateActiveDate($event)\\\"\\n         (keyup)=\\\"_handleCalendarBodyKeyup($event)\\\"\\n         (keydown)=\\\"_handleCalendarBodyKeydown($event)\\\">\\n  </tbody>\\n</table>\\n\", dependencies: [{ kind: \"component\", type: MatCalendarBody, selector: \"[mat-calendar-body]\", inputs: [\"label\", \"rows\", \"todayValue\", \"startValue\", \"endValue\", \"labelMinRequiredCells\", \"numCols\", \"activeCell\", \"isRange\", \"cellAspectRatio\", \"comparisonStart\", \"comparisonEnd\", \"previewStart\", \"previewEnd\", \"startDateAccessibleName\", \"endDateAccessibleName\"], outputs: [\"selectedValueChange\", \"previewChange\", \"activeDateChange\", \"dragStarted\", \"dragEnded\"], exportAs: [\"matCalendarBody\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatMultiYearView, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-multi-year-view', exportAs: 'matMultiYearView', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, imports: [MatCalendarBody], template: \"<table class=\\\"mat-calendar-table\\\" role=\\\"grid\\\">\\n  <thead aria-hidden=\\\"true\\\" class=\\\"mat-calendar-table-header\\\">\\n    <tr><th class=\\\"mat-calendar-table-header-divider\\\" colspan=\\\"4\\\"></th></tr>\\n  </thead>\\n  <tbody mat-calendar-body\\n         [rows]=\\\"_years\\\"\\n         [todayValue]=\\\"_todayYear\\\"\\n         [startValue]=\\\"_selectedYear!\\\"\\n         [endValue]=\\\"_selectedYear!\\\"\\n         [numCols]=\\\"4\\\"\\n         [cellAspectRatio]=\\\"4 / 7\\\"\\n         [activeCell]=\\\"_getActiveCell()\\\"\\n         (selectedValueChange)=\\\"_yearSelected($event)\\\"\\n         (activeDateChange)=\\\"_updateActiveDate($event)\\\"\\n         (keyup)=\\\"_handleCalendarBodyKeyup($event)\\\"\\n         (keydown)=\\\"_handleCalendarBodyKeydown($event)\\\">\\n  </tbody>\\n</table>\\n\" }]\n        }], ctorParameters: () => [], propDecorators: { activeDate: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], minDate: [{\n                type: Input\n            }], maxDate: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input\n            }], dateClass: [{\n                type: Input\n            }], selectedChange: [{\n                type: Output\n            }], yearSelected: [{\n                type: Output\n            }], activeDateChange: [{\n                type: Output\n            }], _matCalendarBody: [{\n                type: ViewChild,\n                args: [MatCalendarBody]\n            }] } });\nfunction isSameMultiYearView(dateAdapter, date1, date2, minDate, maxDate) {\n    const year1 = dateAdapter.getYear(date1);\n    const year2 = dateAdapter.getYear(date2);\n    const startingYear = getStartingYear(dateAdapter, minDate, maxDate);\n    return (Math.floor((year1 - startingYear) / yearsPerPage) ===\n        Math.floor((year2 - startingYear) / yearsPerPage));\n}\n/**\n * When the multi-year view is first opened, the active year will be in view.\n * So we compute how many years are between the active year and the *slot* where our\n * \"startingYear\" will render when paged into view.\n */\nfunction getActiveOffset(dateAdapter, activeDate, minDate, maxDate) {\n    const activeYear = dateAdapter.getYear(activeDate);\n    return euclideanModulo(activeYear - getStartingYear(dateAdapter, minDate, maxDate), yearsPerPage);\n}\n/**\n * We pick a \"starting\" year such that either the maximum year would be at the end\n * or the minimum year would be at the beginning of a page.\n */\nfunction getStartingYear(dateAdapter, minDate, maxDate) {\n    let startingYear = 0;\n    if (maxDate) {\n        const maxYear = dateAdapter.getYear(maxDate);\n        startingYear = maxYear - yearsPerPage + 1;\n    }\n    else if (minDate) {\n        startingYear = dateAdapter.getYear(minDate);\n    }\n    return startingYear;\n}\n/** Gets remainder that is non-negative, even if first number is negative */\nfunction euclideanModulo(a, b) {\n    return ((a % b) + b) % b;\n}\n\n/**\n * An internal component used to display a single year in the datepicker.\n * @docs-private\n */\nclass MatYearView {\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _dateFormats = inject(MAT_DATE_FORMATS, { optional: true });\n    _dateAdapter = inject(DateAdapter, { optional: true });\n    _dir = inject(Directionality, { optional: true });\n    _rerenderSubscription = Subscription.EMPTY;\n    /** Flag used to filter out space/enter keyup events that originated outside of the view. */\n    _selectionKeyPressed;\n    /** The date to display in this year view (everything other than the year is ignored). */\n    get activeDate() {\n        return this._activeDate;\n    }\n    set activeDate(value) {\n        let oldActiveDate = this._activeDate;\n        const validDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value)) ||\n            this._dateAdapter.today();\n        this._activeDate = this._dateAdapter.clampDate(validDate, this.minDate, this.maxDate);\n        if (this._dateAdapter.getYear(oldActiveDate) !== this._dateAdapter.getYear(this._activeDate)) {\n            this._init();\n        }\n    }\n    _activeDate;\n    /** The currently selected date. */\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        if (value instanceof DateRange) {\n            this._selected = value;\n        }\n        else {\n            this._selected = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n        }\n        this._setSelectedMonth(value);\n    }\n    _selected;\n    /** The minimum selectable date. */\n    get minDate() {\n        return this._minDate;\n    }\n    set minDate(value) {\n        this._minDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _minDate;\n    /** The maximum selectable date. */\n    get maxDate() {\n        return this._maxDate;\n    }\n    set maxDate(value) {\n        this._maxDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _maxDate;\n    /** A function used to filter which dates are selectable. */\n    dateFilter;\n    /** Function that can be used to add custom CSS classes to date cells. */\n    dateClass;\n    /** Emits when a new month is selected. */\n    selectedChange = new EventEmitter();\n    /** Emits the selected month. This doesn't imply a change on the selected date */\n    monthSelected = new EventEmitter();\n    /** Emits when any date is activated. */\n    activeDateChange = new EventEmitter();\n    /** The body of calendar table */\n    _matCalendarBody;\n    /** Grid of calendar cells representing the months of the year. */\n    _months;\n    /** The label for this year (e.g. \"2017\"). */\n    _yearLabel;\n    /** The month in this year that today falls on. Null if today is in a different year. */\n    _todayMonth;\n    /**\n     * The month in this year that the selected Date falls on.\n     * Null if the selected Date is in a different year.\n     */\n    _selectedMonth;\n    constructor() {\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            if (!this._dateAdapter) {\n                throw createMissingDateImplError('DateAdapter');\n            }\n            if (!this._dateFormats) {\n                throw createMissingDateImplError('MAT_DATE_FORMATS');\n            }\n        }\n        this._activeDate = this._dateAdapter.today();\n    }\n    ngAfterContentInit() {\n        this._rerenderSubscription = this._dateAdapter.localeChanges\n            .pipe(startWith(null))\n            .subscribe(() => this._init());\n    }\n    ngOnDestroy() {\n        this._rerenderSubscription.unsubscribe();\n    }\n    /** Handles when a new month is selected. */\n    _monthSelected(event) {\n        const month = event.value;\n        const selectedMonth = this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate), month, 1);\n        this.monthSelected.emit(selectedMonth);\n        const selectedDate = this._getDateFromMonth(month);\n        this.selectedChange.emit(selectedDate);\n    }\n    /**\n     * Takes the index of a calendar body cell wrapped in an event as argument. For the date that\n     * corresponds to the given cell, set `activeDate` to that date and fire `activeDateChange` with\n     * that date.\n     *\n     * This function is used to match each component's model of the active date with the calendar\n     * body cell that was focused. It updates its value of `activeDate` synchronously and updates the\n     * parent's value asynchronously via the `activeDateChange` event. The child component receives an\n     * updated value asynchronously via the `activeCell` Input.\n     */\n    _updateActiveDate(event) {\n        const month = event.value;\n        const oldActiveDate = this._activeDate;\n        this.activeDate = this._getDateFromMonth(month);\n        if (this._dateAdapter.compareDate(oldActiveDate, this.activeDate)) {\n            this.activeDateChange.emit(this.activeDate);\n        }\n    }\n    /** Handles keydown events on the calendar body when calendar is in year view. */\n    _handleCalendarBodyKeydown(event) {\n        // TODO(mmalerba): We currently allow keyboard navigation to disabled dates, but just prevent\n        // disabled ones from being selected. This may not be ideal, we should look into whether\n        // navigation should skip over disabled dates, and if so, how to implement that efficiently.\n        const oldActiveDate = this._activeDate;\n        const isRtl = this._isRtl();\n        switch (event.keyCode) {\n            case LEFT_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarMonths(this._activeDate, isRtl ? 1 : -1);\n                break;\n            case RIGHT_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarMonths(this._activeDate, isRtl ? -1 : 1);\n                break;\n            case UP_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarMonths(this._activeDate, -4);\n                break;\n            case DOWN_ARROW:\n                this.activeDate = this._dateAdapter.addCalendarMonths(this._activeDate, 4);\n                break;\n            case HOME:\n                this.activeDate = this._dateAdapter.addCalendarMonths(this._activeDate, -this._dateAdapter.getMonth(this._activeDate));\n                break;\n            case END:\n                this.activeDate = this._dateAdapter.addCalendarMonths(this._activeDate, 11 - this._dateAdapter.getMonth(this._activeDate));\n                break;\n            case PAGE_UP:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, event.altKey ? -10 : -1);\n                break;\n            case PAGE_DOWN:\n                this.activeDate = this._dateAdapter.addCalendarYears(this._activeDate, event.altKey ? 10 : 1);\n                break;\n            case ENTER:\n            case SPACE:\n                // Note that we only prevent the default action here while the selection happens in\n                // `keyup` below. We can't do the selection here, because it can cause the calendar to\n                // reopen if focus is restored immediately. We also can't call `preventDefault` on `keyup`\n                // because it's too late (see #23305).\n                this._selectionKeyPressed = true;\n                break;\n            default:\n                // Don't prevent default or focus active cell on keys that we don't explicitly handle.\n                return;\n        }\n        if (this._dateAdapter.compareDate(oldActiveDate, this.activeDate)) {\n            this.activeDateChange.emit(this.activeDate);\n            this._focusActiveCellAfterViewChecked();\n        }\n        // Prevent unexpected default actions such as form submission.\n        event.preventDefault();\n    }\n    /** Handles keyup events on the calendar body when calendar is in year view. */\n    _handleCalendarBodyKeyup(event) {\n        if (event.keyCode === SPACE || event.keyCode === ENTER) {\n            if (this._selectionKeyPressed) {\n                this._monthSelected({ value: this._dateAdapter.getMonth(this._activeDate), event });\n            }\n            this._selectionKeyPressed = false;\n        }\n    }\n    /** Initializes this year view. */\n    _init() {\n        this._setSelectedMonth(this.selected);\n        this._todayMonth = this._getMonthInCurrentYear(this._dateAdapter.today());\n        this._yearLabel = this._dateAdapter.getYearName(this.activeDate);\n        let monthNames = this._dateAdapter.getMonthNames('short');\n        // First row of months only contains 5 elements so we can fit the year label on the same row.\n        this._months = [\n            [0, 1, 2, 3],\n            [4, 5, 6, 7],\n            [8, 9, 10, 11],\n        ].map(row => row.map(month => this._createCellForMonth(month, monthNames[month])));\n        this._changeDetectorRef.markForCheck();\n    }\n    /** Focuses the active cell after the microtask queue is empty. */\n    _focusActiveCell() {\n        this._matCalendarBody._focusActiveCell();\n    }\n    /** Schedules the matCalendarBody to focus the active cell after change detection has run */\n    _focusActiveCellAfterViewChecked() {\n        this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked();\n    }\n    /**\n     * Gets the month in this year that the given Date falls on.\n     * Returns null if the given Date is in another year.\n     */\n    _getMonthInCurrentYear(date) {\n        return date && this._dateAdapter.getYear(date) == this._dateAdapter.getYear(this.activeDate)\n            ? this._dateAdapter.getMonth(date)\n            : null;\n    }\n    /**\n     * Takes a month and returns a new date in the same day and year as the currently active date.\n     *  The returned date will have the same month as the argument date.\n     */\n    _getDateFromMonth(month) {\n        const normalizedDate = this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate), month, 1);\n        const daysInMonth = this._dateAdapter.getNumDaysInMonth(normalizedDate);\n        return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate), month, Math.min(this._dateAdapter.getDate(this.activeDate), daysInMonth));\n    }\n    /** Creates an MatCalendarCell for the given month. */\n    _createCellForMonth(month, monthName) {\n        const date = this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate), month, 1);\n        const ariaLabel = this._dateAdapter.format(date, this._dateFormats.display.monthYearA11yLabel);\n        const cellClasses = this.dateClass ? this.dateClass(date, 'year') : undefined;\n        return new MatCalendarCell(month, monthName.toLocaleUpperCase(), ariaLabel, this._shouldEnableMonth(month), cellClasses);\n    }\n    /** Whether the given month is enabled. */\n    _shouldEnableMonth(month) {\n        const activeYear = this._dateAdapter.getYear(this.activeDate);\n        if (month === undefined ||\n            month === null ||\n            this._isYearAndMonthAfterMaxDate(activeYear, month) ||\n            this._isYearAndMonthBeforeMinDate(activeYear, month)) {\n            return false;\n        }\n        if (!this.dateFilter) {\n            return true;\n        }\n        const firstOfMonth = this._dateAdapter.createDate(activeYear, month, 1);\n        // If any date in the month is enabled count the month as enabled.\n        for (let date = firstOfMonth; this._dateAdapter.getMonth(date) == month; date = this._dateAdapter.addCalendarDays(date, 1)) {\n            if (this.dateFilter(date)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Tests whether the combination month/year is after this.maxDate, considering\n     * just the month and year of this.maxDate\n     */\n    _isYearAndMonthAfterMaxDate(year, month) {\n        if (this.maxDate) {\n            const maxYear = this._dateAdapter.getYear(this.maxDate);\n            const maxMonth = this._dateAdapter.getMonth(this.maxDate);\n            return year > maxYear || (year === maxYear && month > maxMonth);\n        }\n        return false;\n    }\n    /**\n     * Tests whether the combination month/year is before this.minDate, considering\n     * just the month and year of this.minDate\n     */\n    _isYearAndMonthBeforeMinDate(year, month) {\n        if (this.minDate) {\n            const minYear = this._dateAdapter.getYear(this.minDate);\n            const minMonth = this._dateAdapter.getMonth(this.minDate);\n            return year < minYear || (year === minYear && month < minMonth);\n        }\n        return false;\n    }\n    /** Determines whether the user has the RTL layout direction. */\n    _isRtl() {\n        return this._dir && this._dir.value === 'rtl';\n    }\n    /** Sets the currently-selected month based on a model value. */\n    _setSelectedMonth(value) {\n        if (value instanceof DateRange) {\n            this._selectedMonth =\n                this._getMonthInCurrentYear(value.start) || this._getMonthInCurrentYear(value.end);\n        }\n        else {\n            this._selectedMonth = this._getMonthInCurrentYear(value);\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatYearView, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatYearView, isStandalone: true, selector: \"mat-year-view\", inputs: { activeDate: \"activeDate\", selected: \"selected\", minDate: \"minDate\", maxDate: \"maxDate\", dateFilter: \"dateFilter\", dateClass: \"dateClass\" }, outputs: { selectedChange: \"selectedChange\", monthSelected: \"monthSelected\", activeDateChange: \"activeDateChange\" }, viewQueries: [{ propertyName: \"_matCalendarBody\", first: true, predicate: MatCalendarBody, descendants: true }], exportAs: [\"matYearView\"], ngImport: i0, template: \"<table class=\\\"mat-calendar-table\\\" role=\\\"grid\\\">\\n  <thead aria-hidden=\\\"true\\\" class=\\\"mat-calendar-table-header\\\">\\n    <tr><th class=\\\"mat-calendar-table-header-divider\\\" colspan=\\\"4\\\"></th></tr>\\n  </thead>\\n  <tbody mat-calendar-body\\n         [label]=\\\"_yearLabel\\\"\\n         [rows]=\\\"_months\\\"\\n         [todayValue]=\\\"_todayMonth!\\\"\\n         [startValue]=\\\"_selectedMonth!\\\"\\n         [endValue]=\\\"_selectedMonth!\\\"\\n         [labelMinRequiredCells]=\\\"2\\\"\\n         [numCols]=\\\"4\\\"\\n         [cellAspectRatio]=\\\"4 / 7\\\"\\n         [activeCell]=\\\"_dateAdapter.getMonth(activeDate)\\\"\\n         (selectedValueChange)=\\\"_monthSelected($event)\\\"\\n         (activeDateChange)=\\\"_updateActiveDate($event)\\\"\\n         (keyup)=\\\"_handleCalendarBodyKeyup($event)\\\"\\n         (keydown)=\\\"_handleCalendarBodyKeydown($event)\\\">\\n  </tbody>\\n</table>\\n\", dependencies: [{ kind: \"component\", type: MatCalendarBody, selector: \"[mat-calendar-body]\", inputs: [\"label\", \"rows\", \"todayValue\", \"startValue\", \"endValue\", \"labelMinRequiredCells\", \"numCols\", \"activeCell\", \"isRange\", \"cellAspectRatio\", \"comparisonStart\", \"comparisonEnd\", \"previewStart\", \"previewEnd\", \"startDateAccessibleName\", \"endDateAccessibleName\"], outputs: [\"selectedValueChange\", \"previewChange\", \"activeDateChange\", \"dragStarted\", \"dragEnded\"], exportAs: [\"matCalendarBody\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatYearView, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-year-view', exportAs: 'matYearView', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, imports: [MatCalendarBody], template: \"<table class=\\\"mat-calendar-table\\\" role=\\\"grid\\\">\\n  <thead aria-hidden=\\\"true\\\" class=\\\"mat-calendar-table-header\\\">\\n    <tr><th class=\\\"mat-calendar-table-header-divider\\\" colspan=\\\"4\\\"></th></tr>\\n  </thead>\\n  <tbody mat-calendar-body\\n         [label]=\\\"_yearLabel\\\"\\n         [rows]=\\\"_months\\\"\\n         [todayValue]=\\\"_todayMonth!\\\"\\n         [startValue]=\\\"_selectedMonth!\\\"\\n         [endValue]=\\\"_selectedMonth!\\\"\\n         [labelMinRequiredCells]=\\\"2\\\"\\n         [numCols]=\\\"4\\\"\\n         [cellAspectRatio]=\\\"4 / 7\\\"\\n         [activeCell]=\\\"_dateAdapter.getMonth(activeDate)\\\"\\n         (selectedValueChange)=\\\"_monthSelected($event)\\\"\\n         (activeDateChange)=\\\"_updateActiveDate($event)\\\"\\n         (keyup)=\\\"_handleCalendarBodyKeyup($event)\\\"\\n         (keydown)=\\\"_handleCalendarBodyKeydown($event)\\\">\\n  </tbody>\\n</table>\\n\" }]\n        }], ctorParameters: () => [], propDecorators: { activeDate: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], minDate: [{\n                type: Input\n            }], maxDate: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input\n            }], dateClass: [{\n                type: Input\n            }], selectedChange: [{\n                type: Output\n            }], monthSelected: [{\n                type: Output\n            }], activeDateChange: [{\n                type: Output\n            }], _matCalendarBody: [{\n                type: ViewChild,\n                args: [MatCalendarBody]\n            }] } });\n\n/** Default header for MatCalendar */\nclass MatCalendarHeader {\n    _intl = inject(MatDatepickerIntl);\n    calendar = inject(MatCalendar);\n    _dateAdapter = inject(DateAdapter, { optional: true });\n    _dateFormats = inject(MAT_DATE_FORMATS, { optional: true });\n    constructor() {\n        inject(_CdkPrivateStyleLoader).load(_VisuallyHiddenLoader);\n        const changeDetectorRef = inject(ChangeDetectorRef);\n        this.calendar.stateChanges.subscribe(() => changeDetectorRef.markForCheck());\n    }\n    /** The display text for the current calendar view. */\n    get periodButtonText() {\n        if (this.calendar.currentView == 'month') {\n            return this._dateAdapter\n                .format(this.calendar.activeDate, this._dateFormats.display.monthYearLabel)\n                .toLocaleUpperCase();\n        }\n        if (this.calendar.currentView == 'year') {\n            return this._dateAdapter.getYearName(this.calendar.activeDate);\n        }\n        return this._intl.formatYearRange(...this._formatMinAndMaxYearLabels());\n    }\n    /** The aria description for the current calendar view. */\n    get periodButtonDescription() {\n        if (this.calendar.currentView == 'month') {\n            return this._dateAdapter\n                .format(this.calendar.activeDate, this._dateFormats.display.monthYearLabel)\n                .toLocaleUpperCase();\n        }\n        if (this.calendar.currentView == 'year') {\n            return this._dateAdapter.getYearName(this.calendar.activeDate);\n        }\n        // Format a label for the window of years displayed in the multi-year calendar view. Use\n        // `formatYearRangeLabel` because it is TTS friendly.\n        return this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels());\n    }\n    /** The `aria-label` for changing the calendar view. */\n    get periodButtonLabel() {\n        return this.calendar.currentView == 'month'\n            ? this._intl.switchToMultiYearViewLabel\n            : this._intl.switchToMonthViewLabel;\n    }\n    /** The label for the previous button. */\n    get prevButtonLabel() {\n        return {\n            'month': this._intl.prevMonthLabel,\n            'year': this._intl.prevYearLabel,\n            'multi-year': this._intl.prevMultiYearLabel,\n        }[this.calendar.currentView];\n    }\n    /** The label for the next button. */\n    get nextButtonLabel() {\n        return {\n            'month': this._intl.nextMonthLabel,\n            'year': this._intl.nextYearLabel,\n            'multi-year': this._intl.nextMultiYearLabel,\n        }[this.calendar.currentView];\n    }\n    /** Handles user clicks on the period label. */\n    currentPeriodClicked() {\n        this.calendar.currentView = this.calendar.currentView == 'month' ? 'multi-year' : 'month';\n    }\n    /** Handles user clicks on the previous button. */\n    previousClicked() {\n        this.calendar.activeDate =\n            this.calendar.currentView == 'month'\n                ? this._dateAdapter.addCalendarMonths(this.calendar.activeDate, -1)\n                : this._dateAdapter.addCalendarYears(this.calendar.activeDate, this.calendar.currentView == 'year' ? -1 : -yearsPerPage);\n    }\n    /** Handles user clicks on the next button. */\n    nextClicked() {\n        this.calendar.activeDate =\n            this.calendar.currentView == 'month'\n                ? this._dateAdapter.addCalendarMonths(this.calendar.activeDate, 1)\n                : this._dateAdapter.addCalendarYears(this.calendar.activeDate, this.calendar.currentView == 'year' ? 1 : yearsPerPage);\n    }\n    /** Whether the previous period button is enabled. */\n    previousEnabled() {\n        if (!this.calendar.minDate) {\n            return true;\n        }\n        return (!this.calendar.minDate || !this._isSameView(this.calendar.activeDate, this.calendar.minDate));\n    }\n    /** Whether the next period button is enabled. */\n    nextEnabled() {\n        return (!this.calendar.maxDate || !this._isSameView(this.calendar.activeDate, this.calendar.maxDate));\n    }\n    /** Whether the two dates represent the same view in the current view mode (month or year). */\n    _isSameView(date1, date2) {\n        if (this.calendar.currentView == 'month') {\n            return (this._dateAdapter.getYear(date1) == this._dateAdapter.getYear(date2) &&\n                this._dateAdapter.getMonth(date1) == this._dateAdapter.getMonth(date2));\n        }\n        if (this.calendar.currentView == 'year') {\n            return this._dateAdapter.getYear(date1) == this._dateAdapter.getYear(date2);\n        }\n        // Otherwise we are in 'multi-year' view.\n        return isSameMultiYearView(this._dateAdapter, date1, date2, this.calendar.minDate, this.calendar.maxDate);\n    }\n    /**\n     * Format two individual labels for the minimum year and maximum year available in the multi-year\n     * calendar view. Returns an array of two strings where the first string is the formatted label\n     * for the minimum year, and the second string is the formatted label for the maximum year.\n     */\n    _formatMinAndMaxYearLabels() {\n        // The offset from the active year to the \"slot\" for the starting year is the\n        // *actual* first rendered year in the multi-year view, and the last year is\n        // just yearsPerPage - 1 away.\n        const activeYear = this._dateAdapter.getYear(this.calendar.activeDate);\n        const minYearOfPage = activeYear -\n            getActiveOffset(this._dateAdapter, this.calendar.activeDate, this.calendar.minDate, this.calendar.maxDate);\n        const maxYearOfPage = minYearOfPage + yearsPerPage - 1;\n        const minYearLabel = this._dateAdapter.getYearName(this._dateAdapter.createDate(minYearOfPage, 0, 1));\n        const maxYearLabel = this._dateAdapter.getYearName(this._dateAdapter.createDate(maxYearOfPage, 0, 1));\n        return [minYearLabel, maxYearLabel];\n    }\n    _periodButtonLabelId = inject(_IdGenerator).getId('mat-calendar-period-label-');\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatCalendarHeader, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatCalendarHeader, isStandalone: true, selector: \"mat-calendar-header\", exportAs: [\"matCalendarHeader\"], ngImport: i0, template: \"<div class=\\\"mat-calendar-header\\\">\\n  <div class=\\\"mat-calendar-controls\\\">\\n    <!-- [Firefox Issue: https://bugzilla.mozilla.org/show_bug.cgi?id=1880533]\\n      Relocated label next to related button and made visually hidden via cdk-visually-hidden\\n      to enable label to appear in a11y tree for SR when using Firefox -->\\n    <span [id]=\\\"_periodButtonLabelId\\\" class=\\\"cdk-visually-hidden\\\" aria-live=\\\"polite\\\">{{periodButtonDescription}}</span>\\n    <button mat-button type=\\\"button\\\" class=\\\"mat-calendar-period-button\\\"\\n            (click)=\\\"currentPeriodClicked()\\\" [attr.aria-label]=\\\"periodButtonLabel\\\"\\n            [attr.aria-describedby]=\\\"_periodButtonLabelId\\\">\\n      <span aria-hidden=\\\"true\\\">{{periodButtonText}}</span>\\n      <svg class=\\\"mat-calendar-arrow\\\" [class.mat-calendar-invert]=\\\"calendar.currentView !== 'month'\\\"\\n           viewBox=\\\"0 0 10 5\\\" focusable=\\\"false\\\" aria-hidden=\\\"true\\\">\\n           <polygon points=\\\"0,0 5,5 10,0\\\"/>\\n      </svg>\\n    </button>\\n\\n    <div class=\\\"mat-calendar-spacer\\\"></div>\\n\\n    <ng-content></ng-content>\\n\\n    <button mat-icon-button type=\\\"button\\\" class=\\\"mat-calendar-previous-button\\\"\\n            [disabled]=\\\"!previousEnabled()\\\" (click)=\\\"previousClicked()\\\"\\n            [attr.aria-label]=\\\"prevButtonLabel\\\">\\n      <svg viewBox=\\\"0 0 24 24\\\" focusable=\\\"false\\\" aria-hidden=\\\"true\\\">\\n        <path d=\\\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\\\"/>\\n       </svg>\\n    </button>\\n\\n    <button mat-icon-button type=\\\"button\\\" class=\\\"mat-calendar-next-button\\\"\\n            [disabled]=\\\"!nextEnabled()\\\" (click)=\\\"nextClicked()\\\"\\n            [attr.aria-label]=\\\"nextButtonLabel\\\">\\n      <svg viewBox=\\\"0 0 24 24\\\" focusable=\\\"false\\\" aria-hidden=\\\"true\\\">\\n        <path d=\\\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\\\"/>\\n      </svg>\\n    </button>\\n  </div>\\n</div>\\n\", dependencies: [{ kind: \"component\", type: MatButton, selector: \"    button[mat-button], button[mat-raised-button], button[mat-flat-button],    button[mat-stroked-button]  \", exportAs: [\"matButton\"] }, { kind: \"component\", type: MatIconButton, selector: \"button[mat-icon-button]\", exportAs: [\"matButton\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatCalendarHeader, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-calendar-header', exportAs: 'matCalendarHeader', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, imports: [MatButton, MatIconButton], template: \"<div class=\\\"mat-calendar-header\\\">\\n  <div class=\\\"mat-calendar-controls\\\">\\n    <!-- [Firefox Issue: https://bugzilla.mozilla.org/show_bug.cgi?id=1880533]\\n      Relocated label next to related button and made visually hidden via cdk-visually-hidden\\n      to enable label to appear in a11y tree for SR when using Firefox -->\\n    <span [id]=\\\"_periodButtonLabelId\\\" class=\\\"cdk-visually-hidden\\\" aria-live=\\\"polite\\\">{{periodButtonDescription}}</span>\\n    <button mat-button type=\\\"button\\\" class=\\\"mat-calendar-period-button\\\"\\n            (click)=\\\"currentPeriodClicked()\\\" [attr.aria-label]=\\\"periodButtonLabel\\\"\\n            [attr.aria-describedby]=\\\"_periodButtonLabelId\\\">\\n      <span aria-hidden=\\\"true\\\">{{periodButtonText}}</span>\\n      <svg class=\\\"mat-calendar-arrow\\\" [class.mat-calendar-invert]=\\\"calendar.currentView !== 'month'\\\"\\n           viewBox=\\\"0 0 10 5\\\" focusable=\\\"false\\\" aria-hidden=\\\"true\\\">\\n           <polygon points=\\\"0,0 5,5 10,0\\\"/>\\n      </svg>\\n    </button>\\n\\n    <div class=\\\"mat-calendar-spacer\\\"></div>\\n\\n    <ng-content></ng-content>\\n\\n    <button mat-icon-button type=\\\"button\\\" class=\\\"mat-calendar-previous-button\\\"\\n            [disabled]=\\\"!previousEnabled()\\\" (click)=\\\"previousClicked()\\\"\\n            [attr.aria-label]=\\\"prevButtonLabel\\\">\\n      <svg viewBox=\\\"0 0 24 24\\\" focusable=\\\"false\\\" aria-hidden=\\\"true\\\">\\n        <path d=\\\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\\\"/>\\n       </svg>\\n    </button>\\n\\n    <button mat-icon-button type=\\\"button\\\" class=\\\"mat-calendar-next-button\\\"\\n            [disabled]=\\\"!nextEnabled()\\\" (click)=\\\"nextClicked()\\\"\\n            [attr.aria-label]=\\\"nextButtonLabel\\\">\\n      <svg viewBox=\\\"0 0 24 24\\\" focusable=\\\"false\\\" aria-hidden=\\\"true\\\">\\n        <path d=\\\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\\\"/>\\n      </svg>\\n    </button>\\n  </div>\\n</div>\\n\" }]\n        }], ctorParameters: () => [] });\n/** A calendar that is used as part of the datepicker. */\nclass MatCalendar {\n    _dateAdapter = inject(DateAdapter, { optional: true });\n    _dateFormats = inject(MAT_DATE_FORMATS, { optional: true });\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    /** An input indicating the type of the header component, if set. */\n    headerComponent;\n    /** A portal containing the header component type for this calendar. */\n    _calendarHeaderPortal;\n    _intlChanges;\n    /**\n     * Used for scheduling that focus should be moved to the active cell on the next tick.\n     * We need to schedule it, rather than do it immediately, because we have to wait\n     * for Angular to re-evaluate the view children.\n     */\n    _moveFocusOnNextTick = false;\n    /** A date representing the period (month or year) to start the calendar in. */\n    get startAt() {\n        return this._startAt;\n    }\n    set startAt(value) {\n        this._startAt = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _startAt;\n    /** Whether the calendar should be started in month or year view. */\n    startView = 'month';\n    /** The currently selected date. */\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        if (value instanceof DateRange) {\n            this._selected = value;\n        }\n        else {\n            this._selected = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n        }\n    }\n    _selected;\n    /** The minimum selectable date. */\n    get minDate() {\n        return this._minDate;\n    }\n    set minDate(value) {\n        this._minDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _minDate;\n    /** The maximum selectable date. */\n    get maxDate() {\n        return this._maxDate;\n    }\n    set maxDate(value) {\n        this._maxDate = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _maxDate;\n    /** Function used to filter which dates are selectable. */\n    dateFilter;\n    /** Function that can be used to add custom CSS classes to dates. */\n    dateClass;\n    /** Start of the comparison range. */\n    comparisonStart;\n    /** End of the comparison range. */\n    comparisonEnd;\n    /** ARIA Accessible name of the `<input matStartDate/>` */\n    startDateAccessibleName;\n    /** ARIA Accessible name of the `<input matEndDate/>` */\n    endDateAccessibleName;\n    /** Emits when the currently selected date changes. */\n    selectedChange = new EventEmitter();\n    /**\n     * Emits the year chosen in multiyear view.\n     * This doesn't imply a change on the selected date.\n     */\n    yearSelected = new EventEmitter();\n    /**\n     * Emits the month chosen in year view.\n     * This doesn't imply a change on the selected date.\n     */\n    monthSelected = new EventEmitter();\n    /**\n     * Emits when the current view changes.\n     */\n    viewChanged = new EventEmitter(true);\n    /** Emits when any date is selected. */\n    _userSelection = new EventEmitter();\n    /** Emits a new date range value when the user completes a drag drop operation. */\n    _userDragDrop = new EventEmitter();\n    /** Reference to the current month view component. */\n    monthView;\n    /** Reference to the current year view component. */\n    yearView;\n    /** Reference to the current multi-year view component. */\n    multiYearView;\n    /**\n     * The current active date. This determines which time period is shown and which date is\n     * highlighted when using keyboard navigation.\n     */\n    get activeDate() {\n        return this._clampedActiveDate;\n    }\n    set activeDate(value) {\n        this._clampedActiveDate = this._dateAdapter.clampDate(value, this.minDate, this.maxDate);\n        this.stateChanges.next();\n        this._changeDetectorRef.markForCheck();\n    }\n    _clampedActiveDate;\n    /** Whether the calendar is in month view. */\n    get currentView() {\n        return this._currentView;\n    }\n    set currentView(value) {\n        const viewChangedResult = this._currentView !== value ? value : null;\n        this._currentView = value;\n        this._moveFocusOnNextTick = true;\n        this._changeDetectorRef.markForCheck();\n        if (viewChangedResult) {\n            this.viewChanged.emit(viewChangedResult);\n        }\n    }\n    _currentView;\n    /** Origin of active drag, or null when dragging is not active. */\n    _activeDrag = null;\n    /**\n     * Emits whenever there is a state change that the header may need to respond to.\n     */\n    stateChanges = new Subject();\n    constructor() {\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            if (!this._dateAdapter) {\n                throw createMissingDateImplError('DateAdapter');\n            }\n            if (!this._dateFormats) {\n                throw createMissingDateImplError('MAT_DATE_FORMATS');\n            }\n        }\n        this._intlChanges = inject(MatDatepickerIntl).changes.subscribe(() => {\n            this._changeDetectorRef.markForCheck();\n            this.stateChanges.next();\n        });\n    }\n    ngAfterContentInit() {\n        this._calendarHeaderPortal = new ComponentPortal(this.headerComponent || MatCalendarHeader);\n        this.activeDate = this.startAt || this._dateAdapter.today();\n        // Assign to the private property since we don't want to move focus on init.\n        this._currentView = this.startView;\n    }\n    ngAfterViewChecked() {\n        if (this._moveFocusOnNextTick) {\n            this._moveFocusOnNextTick = false;\n            this.focusActiveCell();\n        }\n    }\n    ngOnDestroy() {\n        this._intlChanges.unsubscribe();\n        this.stateChanges.complete();\n    }\n    ngOnChanges(changes) {\n        // Ignore date changes that are at a different time on the same day. This fixes issues where\n        // the calendar re-renders when there is no meaningful change to [minDate] or [maxDate]\n        // (#24435).\n        const minDateChange = changes['minDate'] &&\n            !this._dateAdapter.sameDate(changes['minDate'].previousValue, changes['minDate'].currentValue)\n            ? changes['minDate']\n            : undefined;\n        const maxDateChange = changes['maxDate'] &&\n            !this._dateAdapter.sameDate(changes['maxDate'].previousValue, changes['maxDate'].currentValue)\n            ? changes['maxDate']\n            : undefined;\n        const changeRequiringRerender = minDateChange || maxDateChange || changes['dateFilter'];\n        if (changeRequiringRerender && !changeRequiringRerender.firstChange) {\n            const view = this._getCurrentViewComponent();\n            if (view) {\n                // Schedule focus to be moved to the active date since re-rendering\n                // can blur the active cell. See #29265.\n                this._moveFocusOnNextTick = true;\n                // We need to `detectChanges` manually here, because the `minDate`, `maxDate` etc. are\n                // passed down to the view via data bindings which won't be up-to-date when we call `_init`.\n                this._changeDetectorRef.detectChanges();\n                view._init();\n            }\n        }\n        this.stateChanges.next();\n    }\n    /** Focuses the active date. */\n    focusActiveCell() {\n        this._getCurrentViewComponent()._focusActiveCell(false);\n    }\n    /** Updates today's date after an update of the active date */\n    updateTodaysDate() {\n        this._getCurrentViewComponent()._init();\n    }\n    /** Handles date selection in the month view. */\n    _dateSelected(event) {\n        const date = event.value;\n        if (this.selected instanceof DateRange ||\n            (date && !this._dateAdapter.sameDate(date, this.selected))) {\n            this.selectedChange.emit(date);\n        }\n        this._userSelection.emit(event);\n    }\n    /** Handles year selection in the multiyear view. */\n    _yearSelectedInMultiYearView(normalizedYear) {\n        this.yearSelected.emit(normalizedYear);\n    }\n    /** Handles month selection in the year view. */\n    _monthSelectedInYearView(normalizedMonth) {\n        this.monthSelected.emit(normalizedMonth);\n    }\n    /** Handles year/month selection in the multi-year/year views. */\n    _goToDateInView(date, view) {\n        this.activeDate = date;\n        this.currentView = view;\n    }\n    /** Called when the user starts dragging to change a date range. */\n    _dragStarted(event) {\n        this._activeDrag = event;\n    }\n    /**\n     * Called when a drag completes. It may end in cancelation or in the selection\n     * of a new range.\n     */\n    _dragEnded(event) {\n        if (!this._activeDrag)\n            return;\n        if (event.value) {\n            this._userDragDrop.emit(event);\n        }\n        this._activeDrag = null;\n    }\n    /** Returns the component instance that corresponds to the current calendar view. */\n    _getCurrentViewComponent() {\n        // The return type is explicitly written as a union to ensure that the Closure compiler does\n        // not optimize calls to _init(). Without the explicit return type, TypeScript narrows it to\n        // only the first component type. See https://github.com/angular/components/issues/22996.\n        return this.monthView || this.yearView || this.multiYearView;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatCalendar, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"17.0.0\", version: \"19.0.0\", type: MatCalendar, isStandalone: true, selector: \"mat-calendar\", inputs: { headerComponent: \"headerComponent\", startAt: \"startAt\", startView: \"startView\", selected: \"selected\", minDate: \"minDate\", maxDate: \"maxDate\", dateFilter: \"dateFilter\", dateClass: \"dateClass\", comparisonStart: \"comparisonStart\", comparisonEnd: \"comparisonEnd\", startDateAccessibleName: \"startDateAccessibleName\", endDateAccessibleName: \"endDateAccessibleName\" }, outputs: { selectedChange: \"selectedChange\", yearSelected: \"yearSelected\", monthSelected: \"monthSelected\", viewChanged: \"viewChanged\", _userSelection: \"_userSelection\", _userDragDrop: \"_userDragDrop\" }, host: { classAttribute: \"mat-calendar\" }, providers: [MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER], viewQueries: [{ propertyName: \"monthView\", first: true, predicate: MatMonthView, descendants: true }, { propertyName: \"yearView\", first: true, predicate: MatYearView, descendants: true }, { propertyName: \"multiYearView\", first: true, predicate: MatMultiYearView, descendants: true }], exportAs: [\"matCalendar\"], usesOnChanges: true, ngImport: i0, template: \"<ng-template [cdkPortalOutlet]=\\\"_calendarHeaderPortal\\\"></ng-template>\\n\\n<div class=\\\"mat-calendar-content\\\" cdkMonitorSubtreeFocus tabindex=\\\"-1\\\">\\n  @switch (currentView) {\\n    @case ('month') {\\n        <mat-month-view\\n            [(activeDate)]=\\\"activeDate\\\"\\n            [selected]=\\\"selected\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [dateClass]=\\\"dateClass\\\"\\n            [comparisonStart]=\\\"comparisonStart\\\"\\n            [comparisonEnd]=\\\"comparisonEnd\\\"\\n            [startDateAccessibleName]=\\\"startDateAccessibleName\\\"\\n            [endDateAccessibleName]=\\\"endDateAccessibleName\\\"\\n            (_userSelection)=\\\"_dateSelected($event)\\\"\\n            (dragStarted)=\\\"_dragStarted($event)\\\"\\n            (dragEnded)=\\\"_dragEnded($event)\\\"\\n            [activeDrag]=\\\"_activeDrag\\\"></mat-month-view>\\n    }\\n\\n    @case ('year') {\\n        <mat-year-view\\n            [(activeDate)]=\\\"activeDate\\\"\\n            [selected]=\\\"selected\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [dateClass]=\\\"dateClass\\\"\\n            (monthSelected)=\\\"_monthSelectedInYearView($event)\\\"\\n            (selectedChange)=\\\"_goToDateInView($event, 'month')\\\"></mat-year-view>\\n    }\\n\\n    @case ('multi-year') {\\n        <mat-multi-year-view\\n            [(activeDate)]=\\\"activeDate\\\"\\n            [selected]=\\\"selected\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [dateClass]=\\\"dateClass\\\"\\n            (yearSelected)=\\\"_yearSelectedInMultiYearView($event)\\\"\\n            (selectedChange)=\\\"_goToDateInView($event, 'year')\\\"></mat-multi-year-view>\\n    }\\n  }\\n</div>\\n\", styles: [\".mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:\\\"\\\";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:\\\"\\\"}\"], dependencies: [{ kind: \"directive\", type: CdkPortalOutlet, selector: \"[cdkPortalOutlet]\", inputs: [\"cdkPortalOutlet\"], outputs: [\"attached\"], exportAs: [\"cdkPortalOutlet\"] }, { kind: \"directive\", type: CdkMonitorFocus, selector: \"[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]\", outputs: [\"cdkFocusChange\"], exportAs: [\"cdkMonitorFocus\"] }, { kind: \"component\", type: MatMonthView, selector: \"mat-month-view\", inputs: [\"activeDate\", \"selected\", \"minDate\", \"maxDate\", \"dateFilter\", \"dateClass\", \"comparisonStart\", \"comparisonEnd\", \"startDateAccessibleName\", \"endDateAccessibleName\", \"activeDrag\"], outputs: [\"selectedChange\", \"_userSelection\", \"dragStarted\", \"dragEnded\", \"activeDateChange\"], exportAs: [\"matMonthView\"] }, { kind: \"component\", type: MatYearView, selector: \"mat-year-view\", inputs: [\"activeDate\", \"selected\", \"minDate\", \"maxDate\", \"dateFilter\", \"dateClass\"], outputs: [\"selectedChange\", \"monthSelected\", \"activeDateChange\"], exportAs: [\"matYearView\"] }, { kind: \"component\", type: MatMultiYearView, selector: \"mat-multi-year-view\", inputs: [\"activeDate\", \"selected\", \"minDate\", \"maxDate\", \"dateFilter\", \"dateClass\"], outputs: [\"selectedChange\", \"yearSelected\", \"activeDateChange\"], exportAs: [\"matMultiYearView\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatCalendar, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-calendar', host: {\n                        'class': 'mat-calendar',\n                    }, exportAs: 'matCalendar', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER], imports: [CdkPortalOutlet, CdkMonitorFocus, MatMonthView, MatYearView, MatMultiYearView], template: \"<ng-template [cdkPortalOutlet]=\\\"_calendarHeaderPortal\\\"></ng-template>\\n\\n<div class=\\\"mat-calendar-content\\\" cdkMonitorSubtreeFocus tabindex=\\\"-1\\\">\\n  @switch (currentView) {\\n    @case ('month') {\\n        <mat-month-view\\n            [(activeDate)]=\\\"activeDate\\\"\\n            [selected]=\\\"selected\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [dateClass]=\\\"dateClass\\\"\\n            [comparisonStart]=\\\"comparisonStart\\\"\\n            [comparisonEnd]=\\\"comparisonEnd\\\"\\n            [startDateAccessibleName]=\\\"startDateAccessibleName\\\"\\n            [endDateAccessibleName]=\\\"endDateAccessibleName\\\"\\n            (_userSelection)=\\\"_dateSelected($event)\\\"\\n            (dragStarted)=\\\"_dragStarted($event)\\\"\\n            (dragEnded)=\\\"_dragEnded($event)\\\"\\n            [activeDrag]=\\\"_activeDrag\\\"></mat-month-view>\\n    }\\n\\n    @case ('year') {\\n        <mat-year-view\\n            [(activeDate)]=\\\"activeDate\\\"\\n            [selected]=\\\"selected\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [dateClass]=\\\"dateClass\\\"\\n            (monthSelected)=\\\"_monthSelectedInYearView($event)\\\"\\n            (selectedChange)=\\\"_goToDateInView($event, 'month')\\\"></mat-year-view>\\n    }\\n\\n    @case ('multi-year') {\\n        <mat-multi-year-view\\n            [(activeDate)]=\\\"activeDate\\\"\\n            [selected]=\\\"selected\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [dateClass]=\\\"dateClass\\\"\\n            (yearSelected)=\\\"_yearSelectedInMultiYearView($event)\\\"\\n            (selectedChange)=\\\"_goToDateInView($event, 'year')\\\"></mat-multi-year-view>\\n    }\\n  }\\n</div>\\n\", styles: [\".mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:\\\"\\\";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:\\\"\\\"}\"] }]\n        }], ctorParameters: () => [], propDecorators: { headerComponent: [{\n                type: Input\n            }], startAt: [{\n                type: Input\n            }], startView: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], minDate: [{\n                type: Input\n            }], maxDate: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input\n            }], dateClass: [{\n                type: Input\n            }], comparisonStart: [{\n                type: Input\n            }], comparisonEnd: [{\n                type: Input\n            }], startDateAccessibleName: [{\n                type: Input\n            }], endDateAccessibleName: [{\n                type: Input\n            }], selectedChange: [{\n                type: Output\n            }], yearSelected: [{\n                type: Output\n            }], monthSelected: [{\n                type: Output\n            }], viewChanged: [{\n                type: Output\n            }], _userSelection: [{\n                type: Output\n            }], _userDragDrop: [{\n                type: Output\n            }], monthView: [{\n                type: ViewChild,\n                args: [MatMonthView]\n            }], yearView: [{\n                type: ViewChild,\n                args: [MatYearView]\n            }], multiYearView: [{\n                type: ViewChild,\n                args: [MatMultiYearView]\n            }] } });\n\n/**\n * Animations used by the Material datepicker.\n * @docs-private\n */\nconst matDatepickerAnimations = {\n    /** Transforms the height of the datepicker's calendar. */\n    transformPanel: trigger('transformPanel', [\n        transition('void => enter-dropdown', animate('120ms cubic-bezier(0, 0, 0.2, 1)', keyframes([\n            style({ opacity: 0, transform: 'scale(1, 0.8)' }),\n            style({ opacity: 1, transform: 'scale(1, 1)' }),\n        ]))),\n        transition('void => enter-dialog', animate('150ms cubic-bezier(0, 0, 0.2, 1)', keyframes([\n            style({ opacity: 0, transform: 'scale(0.7)' }),\n            style({ transform: 'none', opacity: 1 }),\n        ]))),\n        transition('* => void', animate('100ms linear', style({ opacity: 0 }))),\n    ]),\n    /** Fades in the content of the calendar. */\n    fadeInCalendar: trigger('fadeInCalendar', [\n        state('void', style({ opacity: 0 })),\n        state('enter', style({ opacity: 1 })),\n        // TODO(crisbeto): this animation should be removed since it isn't quite on spec, but we\n        // need to keep it until #12440 gets in, otherwise the exit animation will look glitchy.\n        transition('void => *', animate('120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)')),\n    ]),\n};\n\n/** Injection token that determines the scroll handling while the calendar is open. */\nconst MAT_DATEPICKER_SCROLL_STRATEGY = new InjectionToken('mat-datepicker-scroll-strategy', {\n    providedIn: 'root',\n    factory: () => {\n        const overlay = inject(Overlay);\n        return () => overlay.scrollStrategies.reposition();\n    },\n});\n/** @docs-private */\nfunction MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY(overlay) {\n    return () => overlay.scrollStrategies.reposition();\n}\n/** @docs-private */\nconst MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY_PROVIDER = {\n    provide: MAT_DATEPICKER_SCROLL_STRATEGY,\n    deps: [Overlay],\n    useFactory: MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY,\n};\n/**\n * Component used as the content for the datepicker overlay. We use this instead of using\n * MatCalendar directly as the content so we can control the initial focus. This also gives us a\n * place to put additional features of the overlay that are not part of the calendar itself in the\n * future. (e.g. confirmation buttons).\n * @docs-private\n */\nclass MatDatepickerContent {\n    _elementRef = inject(ElementRef);\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _globalModel = inject(MatDateSelectionModel);\n    _dateAdapter = inject(DateAdapter);\n    _rangeSelectionStrategy = inject(MAT_DATE_RANGE_SELECTION_STRATEGY, { optional: true });\n    _subscriptions = new Subscription();\n    _model;\n    /** Reference to the internal calendar component. */\n    _calendar;\n    /**\n     * Theme color of the internal calendar. This API is supported in M2 themes\n     * only, it has no effect in M3 themes.\n     *\n     * For information on applying color variants in M3, see\n     * https://material.angular.io/guide/theming#using-component-color-variants.\n     */\n    color;\n    /** Reference to the datepicker that created the overlay. */\n    datepicker;\n    /** Start of the comparison range. */\n    comparisonStart;\n    /** End of the comparison range. */\n    comparisonEnd;\n    /** ARIA Accessible name of the `<input matStartDate/>` */\n    startDateAccessibleName;\n    /** ARIA Accessible name of the `<input matEndDate/>` */\n    endDateAccessibleName;\n    /** Whether the datepicker is above or below the input. */\n    _isAbove;\n    /** Current state of the animation. */\n    _animationState;\n    /** Emits when an animation has finished. */\n    _animationDone = new Subject();\n    /** Whether there is an in-progress animation. */\n    _isAnimating = false;\n    /** Text for the close button. */\n    _closeButtonText;\n    /** Whether the close button currently has focus. */\n    _closeButtonFocused;\n    /** Portal with projected action buttons. */\n    _actionsPortal = null;\n    /** Id of the label for the `role=\"dialog\"` element. */\n    _dialogLabelId;\n    constructor() {\n        inject(_CdkPrivateStyleLoader).load(_VisuallyHiddenLoader);\n        const intl = inject(MatDatepickerIntl);\n        this._closeButtonText = intl.closeCalendarLabel;\n    }\n    ngOnInit() {\n        this._animationState = this.datepicker.touchUi ? 'enter-dialog' : 'enter-dropdown';\n    }\n    ngAfterViewInit() {\n        this._subscriptions.add(this.datepicker.stateChanges.subscribe(() => {\n            this._changeDetectorRef.markForCheck();\n        }));\n        this._calendar.focusActiveCell();\n    }\n    ngOnDestroy() {\n        this._subscriptions.unsubscribe();\n        this._animationDone.complete();\n    }\n    _handleUserSelection(event) {\n        const selection = this._model.selection;\n        const value = event.value;\n        const isRange = selection instanceof DateRange;\n        // If we're selecting a range and we have a selection strategy, always pass the value through\n        // there. Otherwise don't assign null values to the model, unless we're selecting a range.\n        // A null value when picking a range means that the user cancelled the selection (e.g. by\n        // pressing escape), whereas when selecting a single value it means that the value didn't\n        // change. This isn't very intuitive, but it's here for backwards-compatibility.\n        if (isRange && this._rangeSelectionStrategy) {\n            const newSelection = this._rangeSelectionStrategy.selectionFinished(value, selection, event.event);\n            this._model.updateSelection(newSelection, this);\n        }\n        else if (value &&\n            (isRange || !this._dateAdapter.sameDate(value, selection))) {\n            this._model.add(value);\n        }\n        // Delegate closing the overlay to the actions.\n        if ((!this._model || this._model.isComplete()) && !this._actionsPortal) {\n            this.datepicker.close();\n        }\n    }\n    _handleUserDragDrop(event) {\n        this._model.updateSelection(event.value, this);\n    }\n    _startExitAnimation() {\n        this._animationState = 'void';\n        this._changeDetectorRef.markForCheck();\n    }\n    _handleAnimationEvent(event) {\n        this._isAnimating = event.phaseName === 'start';\n        if (!this._isAnimating) {\n            this._animationDone.next();\n        }\n    }\n    _getSelected() {\n        return this._model.selection;\n    }\n    /** Applies the current pending selection to the global model. */\n    _applyPendingSelection() {\n        if (this._model !== this._globalModel) {\n            this._globalModel.updateSelection(this._model.selection, this);\n        }\n    }\n    /**\n     * Assigns a new portal containing the datepicker actions.\n     * @param portal Portal with the actions to be assigned.\n     * @param forceRerender Whether a re-render of the portal should be triggered. This isn't\n     * necessary if the portal is assigned during initialization, but it may be required if it's\n     * added at a later point.\n     */\n    _assignActions(portal, forceRerender) {\n        // If we have actions, clone the model so that we have the ability to cancel the selection,\n        // otherwise update the global model directly. Note that we want to assign this as soon as\n        // possible, but `_actionsPortal` isn't available in the constructor so we do it in `ngOnInit`.\n        this._model = portal ? this._globalModel.clone() : this._globalModel;\n        this._actionsPortal = portal;\n        if (forceRerender) {\n            this._changeDetectorRef.detectChanges();\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerContent, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDatepickerContent, isStandalone: true, selector: \"mat-datepicker-content\", inputs: { color: \"color\" }, host: { listeners: { \"@transformPanel.start\": \"_handleAnimationEvent($event)\", \"@transformPanel.done\": \"_handleAnimationEvent($event)\" }, properties: { \"class\": \"color ? \\\"mat-\\\" + color : \\\"\\\"\", \"@transformPanel\": \"_animationState\", \"class.mat-datepicker-content-touch\": \"datepicker.touchUi\" }, classAttribute: \"mat-datepicker-content\" }, viewQueries: [{ propertyName: \"_calendar\", first: true, predicate: MatCalendar, descendants: true }], exportAs: [\"matDatepickerContent\"], ngImport: i0, template: \"<div\\n  cdkTrapFocus\\n  role=\\\"dialog\\\"\\n  [attr.aria-modal]=\\\"true\\\"\\n  [attr.aria-labelledby]=\\\"_dialogLabelId ?? undefined\\\"\\n  class=\\\"mat-datepicker-content-container\\\"\\n  [class.mat-datepicker-content-container-with-custom-header]=\\\"datepicker.calendarHeaderComponent\\\"\\n  [class.mat-datepicker-content-container-with-actions]=\\\"_actionsPortal\\\">\\n  <mat-calendar\\n    [id]=\\\"datepicker.id\\\"\\n    [class]=\\\"datepicker.panelClass\\\"\\n    [startAt]=\\\"datepicker.startAt\\\"\\n    [startView]=\\\"datepicker.startView\\\"\\n    [minDate]=\\\"datepicker._getMinDate()\\\"\\n    [maxDate]=\\\"datepicker._getMaxDate()\\\"\\n    [dateFilter]=\\\"datepicker._getDateFilter()\\\"\\n    [headerComponent]=\\\"datepicker.calendarHeaderComponent\\\"\\n    [selected]=\\\"_getSelected()\\\"\\n    [dateClass]=\\\"datepicker.dateClass\\\"\\n    [comparisonStart]=\\\"comparisonStart\\\"\\n    [comparisonEnd]=\\\"comparisonEnd\\\"\\n    [@fadeInCalendar]=\\\"'enter'\\\"\\n    [startDateAccessibleName]=\\\"startDateAccessibleName\\\"\\n    [endDateAccessibleName]=\\\"endDateAccessibleName\\\"\\n    (yearSelected)=\\\"datepicker._selectYear($event)\\\"\\n    (monthSelected)=\\\"datepicker._selectMonth($event)\\\"\\n    (viewChanged)=\\\"datepicker._viewChanged($event)\\\"\\n    (_userSelection)=\\\"_handleUserSelection($event)\\\"\\n    (_userDragDrop)=\\\"_handleUserDragDrop($event)\\\"></mat-calendar>\\n\\n  <ng-template [cdkPortalOutlet]=\\\"_actionsPortal\\\"></ng-template>\\n\\n  <!-- Invisible close button for screen reader users. -->\\n  <button\\n    type=\\\"button\\\"\\n    mat-raised-button\\n    [color]=\\\"color || 'primary'\\\"\\n    class=\\\"mat-datepicker-close-button\\\"\\n    [class.cdk-visually-hidden]=\\\"!_closeButtonFocused\\\"\\n    (focus)=\\\"_closeButtonFocused = true\\\"\\n    (blur)=\\\"_closeButtonFocused = false\\\"\\n    (click)=\\\"datepicker.close()\\\">{{ _closeButtonText }}</button>\\n</div>\\n\", styles: [\".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\"], dependencies: [{ kind: \"directive\", type: CdkTrapFocus, selector: \"[cdkTrapFocus]\", inputs: [\"cdkTrapFocus\", \"cdkTrapFocusAutoCapture\"], exportAs: [\"cdkTrapFocus\"] }, { kind: \"component\", type: MatCalendar, selector: \"mat-calendar\", inputs: [\"headerComponent\", \"startAt\", \"startView\", \"selected\", \"minDate\", \"maxDate\", \"dateFilter\", \"dateClass\", \"comparisonStart\", \"comparisonEnd\", \"startDateAccessibleName\", \"endDateAccessibleName\"], outputs: [\"selectedChange\", \"yearSelected\", \"monthSelected\", \"viewChanged\", \"_userSelection\", \"_userDragDrop\"], exportAs: [\"matCalendar\"] }, { kind: \"directive\", type: CdkPortalOutlet, selector: \"[cdkPortalOutlet]\", inputs: [\"cdkPortalOutlet\"], outputs: [\"attached\"], exportAs: [\"cdkPortalOutlet\"] }, { kind: \"component\", type: MatButton, selector: \"    button[mat-button], button[mat-raised-button], button[mat-flat-button],    button[mat-stroked-button]  \", exportAs: [\"matButton\"] }], animations: [matDatepickerAnimations.transformPanel, matDatepickerAnimations.fadeInCalendar], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerContent, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-datepicker-content', host: {\n                        'class': 'mat-datepicker-content',\n                        '[class]': 'color ? \"mat-\" + color : \"\"',\n                        '[@transformPanel]': '_animationState',\n                        '(@transformPanel.start)': '_handleAnimationEvent($event)',\n                        '(@transformPanel.done)': '_handleAnimationEvent($event)',\n                        '[class.mat-datepicker-content-touch]': 'datepicker.touchUi',\n                    }, animations: [matDatepickerAnimations.transformPanel, matDatepickerAnimations.fadeInCalendar], exportAs: 'matDatepickerContent', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, imports: [CdkTrapFocus, MatCalendar, CdkPortalOutlet, MatButton], template: \"<div\\n  cdkTrapFocus\\n  role=\\\"dialog\\\"\\n  [attr.aria-modal]=\\\"true\\\"\\n  [attr.aria-labelledby]=\\\"_dialogLabelId ?? undefined\\\"\\n  class=\\\"mat-datepicker-content-container\\\"\\n  [class.mat-datepicker-content-container-with-custom-header]=\\\"datepicker.calendarHeaderComponent\\\"\\n  [class.mat-datepicker-content-container-with-actions]=\\\"_actionsPortal\\\">\\n  <mat-calendar\\n    [id]=\\\"datepicker.id\\\"\\n    [class]=\\\"datepicker.panelClass\\\"\\n    [startAt]=\\\"datepicker.startAt\\\"\\n    [startView]=\\\"datepicker.startView\\\"\\n    [minDate]=\\\"datepicker._getMinDate()\\\"\\n    [maxDate]=\\\"datepicker._getMaxDate()\\\"\\n    [dateFilter]=\\\"datepicker._getDateFilter()\\\"\\n    [headerComponent]=\\\"datepicker.calendarHeaderComponent\\\"\\n    [selected]=\\\"_getSelected()\\\"\\n    [dateClass]=\\\"datepicker.dateClass\\\"\\n    [comparisonStart]=\\\"comparisonStart\\\"\\n    [comparisonEnd]=\\\"comparisonEnd\\\"\\n    [@fadeInCalendar]=\\\"'enter'\\\"\\n    [startDateAccessibleName]=\\\"startDateAccessibleName\\\"\\n    [endDateAccessibleName]=\\\"endDateAccessibleName\\\"\\n    (yearSelected)=\\\"datepicker._selectYear($event)\\\"\\n    (monthSelected)=\\\"datepicker._selectMonth($event)\\\"\\n    (viewChanged)=\\\"datepicker._viewChanged($event)\\\"\\n    (_userSelection)=\\\"_handleUserSelection($event)\\\"\\n    (_userDragDrop)=\\\"_handleUserDragDrop($event)\\\"></mat-calendar>\\n\\n  <ng-template [cdkPortalOutlet]=\\\"_actionsPortal\\\"></ng-template>\\n\\n  <!-- Invisible close button for screen reader users. -->\\n  <button\\n    type=\\\"button\\\"\\n    mat-raised-button\\n    [color]=\\\"color || 'primary'\\\"\\n    class=\\\"mat-datepicker-close-button\\\"\\n    [class.cdk-visually-hidden]=\\\"!_closeButtonFocused\\\"\\n    (focus)=\\\"_closeButtonFocused = true\\\"\\n    (blur)=\\\"_closeButtonFocused = false\\\"\\n    (click)=\\\"datepicker.close()\\\">{{ _closeButtonText }}</button>\\n</div>\\n\", styles: [\".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\"] }]\n        }], ctorParameters: () => [], propDecorators: { _calendar: [{\n                type: ViewChild,\n                args: [MatCalendar]\n            }], color: [{\n                type: Input\n            }] } });\n/** Base class for a datepicker. */\nclass MatDatepickerBase {\n    _overlay = inject(Overlay);\n    _viewContainerRef = inject(ViewContainerRef);\n    _dateAdapter = inject(DateAdapter, { optional: true });\n    _dir = inject(Directionality, { optional: true });\n    _model = inject(MatDateSelectionModel);\n    _scrollStrategy = inject(MAT_DATEPICKER_SCROLL_STRATEGY);\n    _inputStateChanges = Subscription.EMPTY;\n    _document = inject(DOCUMENT);\n    /** An input indicating the type of the custom header component for the calendar, if set. */\n    calendarHeaderComponent;\n    /** The date to open the calendar to initially. */\n    get startAt() {\n        // If an explicit startAt is set we start there, otherwise we start at whatever the currently\n        // selected value is.\n        return this._startAt || (this.datepickerInput ? this.datepickerInput.getStartValue() : null);\n    }\n    set startAt(value) {\n        this._startAt = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n    }\n    _startAt;\n    /** The view that the calendar should start in. */\n    startView = 'month';\n    /**\n     * Theme color of the datepicker's calendar. This API is supported in M2 themes only, it\n     * has no effect in M3 themes.\n     *\n     * For information on applying color variants in M3, see\n     * https://material.angular.io/guide/theming#using-component-color-variants.\n     */\n    get color() {\n        return (this._color || (this.datepickerInput ? this.datepickerInput.getThemePalette() : undefined));\n    }\n    set color(value) {\n        this._color = value;\n    }\n    _color;\n    /**\n     * Whether the calendar UI is in touch mode. In touch mode the calendar opens in a dialog rather\n     * than a dropdown and elements have more padding to allow for bigger touch targets.\n     */\n    touchUi = false;\n    /** Whether the datepicker pop-up should be disabled. */\n    get disabled() {\n        return this._disabled === undefined && this.datepickerInput\n            ? this.datepickerInput.disabled\n            : !!this._disabled;\n    }\n    set disabled(value) {\n        if (value !== this._disabled) {\n            this._disabled = value;\n            this.stateChanges.next(undefined);\n        }\n    }\n    _disabled;\n    /** Preferred position of the datepicker in the X axis. */\n    xPosition = 'start';\n    /** Preferred position of the datepicker in the Y axis. */\n    yPosition = 'below';\n    /**\n     * Whether to restore focus to the previously-focused element when the calendar is closed.\n     * Note that automatic focus restoration is an accessibility feature and it is recommended that\n     * you provide your own equivalent, if you decide to turn it off.\n     */\n    restoreFocus = true;\n    /**\n     * Emits selected year in multiyear view.\n     * This doesn't imply a change on the selected date.\n     */\n    yearSelected = new EventEmitter();\n    /**\n     * Emits selected month in year view.\n     * This doesn't imply a change on the selected date.\n     */\n    monthSelected = new EventEmitter();\n    /**\n     * Emits when the current view changes.\n     */\n    viewChanged = new EventEmitter(true);\n    /** Function that can be used to add custom CSS classes to dates. */\n    dateClass;\n    /** Emits when the datepicker has been opened. */\n    openedStream = new EventEmitter();\n    /** Emits when the datepicker has been closed. */\n    closedStream = new EventEmitter();\n    /** Classes to be passed to the date picker panel. */\n    get panelClass() {\n        return this._panelClass;\n    }\n    set panelClass(value) {\n        this._panelClass = coerceStringArray(value);\n    }\n    _panelClass;\n    /** Whether the calendar is open. */\n    get opened() {\n        return this._opened;\n    }\n    set opened(value) {\n        if (value) {\n            this.open();\n        }\n        else {\n            this.close();\n        }\n    }\n    _opened = false;\n    /** The id for the datepicker calendar. */\n    id = inject(_IdGenerator).getId('mat-datepicker-');\n    /** The minimum selectable date. */\n    _getMinDate() {\n        return this.datepickerInput && this.datepickerInput.min;\n    }\n    /** The maximum selectable date. */\n    _getMaxDate() {\n        return this.datepickerInput && this.datepickerInput.max;\n    }\n    _getDateFilter() {\n        return this.datepickerInput && this.datepickerInput.dateFilter;\n    }\n    /** A reference to the overlay into which we've rendered the calendar. */\n    _overlayRef;\n    /** Reference to the component instance rendered in the overlay. */\n    _componentRef;\n    /** The element that was focused before the datepicker was opened. */\n    _focusedElementBeforeOpen = null;\n    /** Unique class that will be added to the backdrop so that the test harnesses can look it up. */\n    _backdropHarnessClass = `${this.id}-backdrop`;\n    /** Currently-registered actions portal. */\n    _actionsPortal;\n    /** The input element this datepicker is associated with. */\n    datepickerInput;\n    /** Emits when the datepicker's state changes. */\n    stateChanges = new Subject();\n    _injector = inject(Injector);\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    constructor() {\n        if (!this._dateAdapter && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throw createMissingDateImplError('DateAdapter');\n        }\n        this._model.selectionChanged.subscribe(() => {\n            this._changeDetectorRef.markForCheck();\n        });\n    }\n    ngOnChanges(changes) {\n        const positionChange = changes['xPosition'] || changes['yPosition'];\n        if (positionChange && !positionChange.firstChange && this._overlayRef) {\n            const positionStrategy = this._overlayRef.getConfig().positionStrategy;\n            if (positionStrategy instanceof FlexibleConnectedPositionStrategy) {\n                this._setConnectedPositions(positionStrategy);\n                if (this.opened) {\n                    this._overlayRef.updatePosition();\n                }\n            }\n        }\n        this.stateChanges.next(undefined);\n    }\n    ngOnDestroy() {\n        this._destroyOverlay();\n        this.close();\n        this._inputStateChanges.unsubscribe();\n        this.stateChanges.complete();\n    }\n    /** Selects the given date */\n    select(date) {\n        this._model.add(date);\n    }\n    /** Emits the selected year in multiyear view */\n    _selectYear(normalizedYear) {\n        this.yearSelected.emit(normalizedYear);\n    }\n    /** Emits selected month in year view */\n    _selectMonth(normalizedMonth) {\n        this.monthSelected.emit(normalizedMonth);\n    }\n    /** Emits changed view */\n    _viewChanged(view) {\n        this.viewChanged.emit(view);\n    }\n    /**\n     * Register an input with this datepicker.\n     * @param input The datepicker input to register with this datepicker.\n     * @returns Selection model that the input should hook itself up to.\n     */\n    registerInput(input) {\n        if (this.datepickerInput && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throw Error('A MatDatepicker can only be associated with a single input.');\n        }\n        this._inputStateChanges.unsubscribe();\n        this.datepickerInput = input;\n        this._inputStateChanges = input.stateChanges.subscribe(() => this.stateChanges.next(undefined));\n        return this._model;\n    }\n    /**\n     * Registers a portal containing action buttons with the datepicker.\n     * @param portal Portal to be registered.\n     */\n    registerActions(portal) {\n        if (this._actionsPortal && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throw Error('A MatDatepicker can only be associated with a single actions row.');\n        }\n        this._actionsPortal = portal;\n        this._componentRef?.instance._assignActions(portal, true);\n    }\n    /**\n     * Removes a portal containing action buttons from the datepicker.\n     * @param portal Portal to be removed.\n     */\n    removeActions(portal) {\n        if (portal === this._actionsPortal) {\n            this._actionsPortal = null;\n            this._componentRef?.instance._assignActions(null, true);\n        }\n    }\n    /** Open the calendar. */\n    open() {\n        // Skip reopening if there's an in-progress animation to avoid overlapping\n        // sequences which can cause \"changed after checked\" errors. See #25837.\n        if (this._opened || this.disabled || this._componentRef?.instance._isAnimating) {\n            return;\n        }\n        if (!this.datepickerInput && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throw Error('Attempted to open an MatDatepicker with no associated input.');\n        }\n        this._focusedElementBeforeOpen = _getFocusedElementPierceShadowDom();\n        this._openOverlay();\n        this._opened = true;\n        this.openedStream.emit();\n    }\n    /** Close the calendar. */\n    close() {\n        // Skip reopening if there's an in-progress animation to avoid overlapping\n        // sequences which can cause \"changed after checked\" errors. See #25837.\n        if (!this._opened || this._componentRef?.instance._isAnimating) {\n            return;\n        }\n        const canRestoreFocus = this.restoreFocus &&\n            this._focusedElementBeforeOpen &&\n            typeof this._focusedElementBeforeOpen.focus === 'function';\n        const completeClose = () => {\n            // The `_opened` could've been reset already if\n            // we got two events in quick succession.\n            if (this._opened) {\n                this._opened = false;\n                this.closedStream.emit();\n            }\n        };\n        if (this._componentRef) {\n            const { instance, location } = this._componentRef;\n            instance._startExitAnimation();\n            instance._animationDone.pipe(take(1)).subscribe(() => {\n                const activeElement = this._document.activeElement;\n                // Since we restore focus after the exit animation, we have to check that\n                // the user didn't move focus themselves inside the `close` handler.\n                if (canRestoreFocus &&\n                    (!activeElement ||\n                        activeElement === this._document.activeElement ||\n                        location.nativeElement.contains(activeElement))) {\n                    this._focusedElementBeforeOpen.focus();\n                }\n                this._focusedElementBeforeOpen = null;\n                this._destroyOverlay();\n            });\n        }\n        if (canRestoreFocus) {\n            // Because IE moves focus asynchronously, we can't count on it being restored before we've\n            // marked the datepicker as closed. If the event fires out of sequence and the element that\n            // we're refocusing opens the datepicker on focus, the user could be stuck with not being\n            // able to close the calendar at all. We work around it by making the logic, that marks\n            // the datepicker as closed, async as well.\n            setTimeout(completeClose);\n        }\n        else {\n            completeClose();\n        }\n    }\n    /** Applies the current pending selection on the overlay to the model. */\n    _applyPendingSelection() {\n        this._componentRef?.instance?._applyPendingSelection();\n    }\n    /** Forwards relevant values from the datepicker to the datepicker content inside the overlay. */\n    _forwardContentValues(instance) {\n        instance.datepicker = this;\n        instance.color = this.color;\n        instance._dialogLabelId = this.datepickerInput.getOverlayLabelId();\n        instance._assignActions(this._actionsPortal, false);\n    }\n    /** Opens the overlay with the calendar. */\n    _openOverlay() {\n        this._destroyOverlay();\n        const isDialog = this.touchUi;\n        const portal = new ComponentPortal(MatDatepickerContent, this._viewContainerRef);\n        const overlayRef = (this._overlayRef = this._overlay.create(new OverlayConfig({\n            positionStrategy: isDialog ? this._getDialogStrategy() : this._getDropdownStrategy(),\n            hasBackdrop: true,\n            backdropClass: [\n                isDialog ? 'cdk-overlay-dark-backdrop' : 'mat-overlay-transparent-backdrop',\n                this._backdropHarnessClass,\n            ],\n            direction: this._dir || 'ltr',\n            scrollStrategy: isDialog ? this._overlay.scrollStrategies.block() : this._scrollStrategy(),\n            panelClass: `mat-datepicker-${isDialog ? 'dialog' : 'popup'}`,\n        })));\n        this._getCloseStream(overlayRef).subscribe(event => {\n            if (event) {\n                event.preventDefault();\n            }\n            this.close();\n        });\n        // The `preventDefault` call happens inside the calendar as well, however focus moves into\n        // it inside a timeout which can give browsers a chance to fire off a keyboard event in-between\n        // that can scroll the page (see #24969). Always block default actions of arrow keys for the\n        // entire overlay so the page doesn't get scrolled by accident.\n        overlayRef.keydownEvents().subscribe(event => {\n            const keyCode = event.keyCode;\n            if (keyCode === UP_ARROW ||\n                keyCode === DOWN_ARROW ||\n                keyCode === LEFT_ARROW ||\n                keyCode === RIGHT_ARROW ||\n                keyCode === PAGE_UP ||\n                keyCode === PAGE_DOWN) {\n                event.preventDefault();\n            }\n        });\n        this._componentRef = overlayRef.attach(portal);\n        this._forwardContentValues(this._componentRef.instance);\n        // Update the position once the calendar has rendered. Only relevant in dropdown mode.\n        if (!isDialog) {\n            afterNextRender(() => {\n                overlayRef.updatePosition();\n            }, { injector: this._injector });\n        }\n    }\n    /** Destroys the current overlay. */\n    _destroyOverlay() {\n        if (this._overlayRef) {\n            this._overlayRef.dispose();\n            this._overlayRef = this._componentRef = null;\n        }\n    }\n    /** Gets a position strategy that will open the calendar as a dropdown. */\n    _getDialogStrategy() {\n        return this._overlay.position().global().centerHorizontally().centerVertically();\n    }\n    /** Gets a position strategy that will open the calendar as a dropdown. */\n    _getDropdownStrategy() {\n        const strategy = this._overlay\n            .position()\n            .flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin())\n            .withTransformOriginOn('.mat-datepicker-content')\n            .withFlexibleDimensions(false)\n            .withViewportMargin(8)\n            .withLockedPosition();\n        return this._setConnectedPositions(strategy);\n    }\n    /** Sets the positions of the datepicker in dropdown mode based on the current configuration. */\n    _setConnectedPositions(strategy) {\n        const primaryX = this.xPosition === 'end' ? 'end' : 'start';\n        const secondaryX = primaryX === 'start' ? 'end' : 'start';\n        const primaryY = this.yPosition === 'above' ? 'bottom' : 'top';\n        const secondaryY = primaryY === 'top' ? 'bottom' : 'top';\n        return strategy.withPositions([\n            {\n                originX: primaryX,\n                originY: secondaryY,\n                overlayX: primaryX,\n                overlayY: primaryY,\n            },\n            {\n                originX: primaryX,\n                originY: primaryY,\n                overlayX: primaryX,\n                overlayY: secondaryY,\n            },\n            {\n                originX: secondaryX,\n                originY: secondaryY,\n                overlayX: secondaryX,\n                overlayY: primaryY,\n            },\n            {\n                originX: secondaryX,\n                originY: primaryY,\n                overlayX: secondaryX,\n                overlayY: secondaryY,\n            },\n        ]);\n    }\n    /** Gets an observable that will emit when the overlay is supposed to be closed. */\n    _getCloseStream(overlayRef) {\n        const ctrlShiftMetaModifiers = ['ctrlKey', 'shiftKey', 'metaKey'];\n        return merge(overlayRef.backdropClick(), overlayRef.detachments(), overlayRef.keydownEvents().pipe(filter(event => {\n            // Closing on alt + up is only valid when there's an input associated with the datepicker.\n            return ((event.keyCode === ESCAPE && !hasModifierKey(event)) ||\n                (this.datepickerInput &&\n                    hasModifierKey(event, 'altKey') &&\n                    event.keyCode === UP_ARROW &&\n                    ctrlShiftMetaModifiers.every((modifier) => !hasModifierKey(event, modifier))));\n        })));\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerBase, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"16.1.0\", version: \"19.0.0\", type: MatDatepickerBase, isStandalone: true, inputs: { calendarHeaderComponent: \"calendarHeaderComponent\", startAt: \"startAt\", startView: \"startView\", color: \"color\", touchUi: [\"touchUi\", \"touchUi\", booleanAttribute], disabled: [\"disabled\", \"disabled\", booleanAttribute], xPosition: \"xPosition\", yPosition: \"yPosition\", restoreFocus: [\"restoreFocus\", \"restoreFocus\", booleanAttribute], dateClass: \"dateClass\", panelClass: \"panelClass\", opened: [\"opened\", \"opened\", booleanAttribute] }, outputs: { yearSelected: \"yearSelected\", monthSelected: \"monthSelected\", viewChanged: \"viewChanged\", openedStream: \"opened\", closedStream: \"closed\" }, usesOnChanges: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerBase, decorators: [{\n            type: Directive\n        }], ctorParameters: () => [], propDecorators: { calendarHeaderComponent: [{\n                type: Input\n            }], startAt: [{\n                type: Input\n            }], startView: [{\n                type: Input\n            }], color: [{\n                type: Input\n            }], touchUi: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], disabled: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], xPosition: [{\n                type: Input\n            }], yPosition: [{\n                type: Input\n            }], restoreFocus: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], yearSelected: [{\n                type: Output\n            }], monthSelected: [{\n                type: Output\n            }], viewChanged: [{\n                type: Output\n            }], dateClass: [{\n                type: Input\n            }], openedStream: [{\n                type: Output,\n                args: ['opened']\n            }], closedStream: [{\n                type: Output,\n                args: ['closed']\n            }], panelClass: [{\n                type: Input\n            }], opened: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }] } });\n\n// TODO(mmalerba): We use a component instead of a directive here so the user can use implicit\n// template reference variables (e.g. #d vs #d=\"matDatepicker\"). We can change this to a directive\n// if angular adds support for `exportAs: '$implicit'` on directives.\n/** Component responsible for managing the datepicker popup/dialog. */\nclass MatDatepicker extends MatDatepickerBase {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepicker, deps: null, target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDatepicker, isStandalone: true, selector: \"mat-datepicker\", providers: [\n            MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER,\n            { provide: MatDatepickerBase, useExisting: MatDatepicker },\n        ], exportAs: [\"matDatepicker\"], usesInheritance: true, ngImport: i0, template: '', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepicker, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'mat-datepicker',\n                    template: '',\n                    exportAs: 'matDatepicker',\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                    encapsulation: ViewEncapsulation.None,\n                    providers: [\n                        MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER,\n                        { provide: MatDatepickerBase, useExisting: MatDatepicker },\n                    ],\n                }]\n        }] });\n\n/**\n * An event used for datepicker input and change events. We don't always have access to a native\n * input or change event because the event may have been triggered by the user clicking on the\n * calendar popup. For consistency, we always use MatDatepickerInputEvent instead.\n */\nclass MatDatepickerInputEvent {\n    target;\n    targetElement;\n    /** The new value for the target datepicker input. */\n    value;\n    constructor(\n    /** Reference to the datepicker input component that emitted the event. */\n    target, \n    /** Reference to the native input element associated with the datepicker input. */\n    targetElement) {\n        this.target = target;\n        this.targetElement = targetElement;\n        this.value = this.target.value;\n    }\n}\n/** Base class for datepicker inputs. */\nclass MatDatepickerInputBase {\n    _elementRef = inject(ElementRef);\n    _dateAdapter = inject(DateAdapter, { optional: true });\n    _dateFormats = inject(MAT_DATE_FORMATS, { optional: true });\n    /** Whether the component has been initialized. */\n    _isInitialized;\n    /** The value of the input. */\n    get value() {\n        return this._model ? this._getValueFromModel(this._model.selection) : this._pendingValue;\n    }\n    set value(value) {\n        this._assignValueProgrammatically(value);\n    }\n    _model;\n    /** Whether the datepicker-input is disabled. */\n    get disabled() {\n        return !!this._disabled || this._parentDisabled();\n    }\n    set disabled(value) {\n        const newValue = value;\n        const element = this._elementRef.nativeElement;\n        if (this._disabled !== newValue) {\n            this._disabled = newValue;\n            this.stateChanges.next(undefined);\n        }\n        // We need to null check the `blur` method, because it's undefined during SSR.\n        // In Ivy static bindings are invoked earlier, before the element is attached to the DOM.\n        // This can cause an error to be thrown in some browsers (IE/Edge) which assert that the\n        // element has been inserted.\n        if (newValue && this._isInitialized && element.blur) {\n            // Normally, native input elements automatically blur if they turn disabled. This behavior\n            // is problematic, because it would mean that it triggers another change detection cycle,\n            // which then causes a changed after checked error if the input element was focused before.\n            element.blur();\n        }\n    }\n    _disabled;\n    /** Emits when a `change` event is fired on this `<input>`. */\n    dateChange = new EventEmitter();\n    /** Emits when an `input` event is fired on this `<input>`. */\n    dateInput = new EventEmitter();\n    /** Emits when the internal state has changed */\n    stateChanges = new Subject();\n    _onTouched = () => { };\n    _validatorOnChange = () => { };\n    _cvaOnChange = () => { };\n    _valueChangesSubscription = Subscription.EMPTY;\n    _localeSubscription = Subscription.EMPTY;\n    /**\n     * Since the value is kept on the model which is assigned in an Input,\n     * we might get a value before we have a model. This property keeps track\n     * of the value until we have somewhere to assign it.\n     */\n    _pendingValue;\n    /** The form control validator for whether the input parses. */\n    _parseValidator = () => {\n        return this._lastValueValid\n            ? null\n            : { 'matDatepickerParse': { 'text': this._elementRef.nativeElement.value } };\n    };\n    /** The form control validator for the date filter. */\n    _filterValidator = (control) => {\n        const controlValue = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value));\n        return !controlValue || this._matchesFilter(controlValue)\n            ? null\n            : { 'matDatepickerFilter': true };\n    };\n    /** The form control validator for the min date. */\n    _minValidator = (control) => {\n        const controlValue = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value));\n        const min = this._getMinDate();\n        return !min || !controlValue || this._dateAdapter.compareDate(min, controlValue) <= 0\n            ? null\n            : { 'matDatepickerMin': { 'min': min, 'actual': controlValue } };\n    };\n    /** The form control validator for the max date. */\n    _maxValidator = (control) => {\n        const controlValue = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value));\n        const max = this._getMaxDate();\n        return !max || !controlValue || this._dateAdapter.compareDate(max, controlValue) >= 0\n            ? null\n            : { 'matDatepickerMax': { 'max': max, 'actual': controlValue } };\n    };\n    /** Gets the base validator functions. */\n    _getValidators() {\n        return [this._parseValidator, this._minValidator, this._maxValidator, this._filterValidator];\n    }\n    /** Registers a date selection model with the input. */\n    _registerModel(model) {\n        this._model = model;\n        this._valueChangesSubscription.unsubscribe();\n        if (this._pendingValue) {\n            this._assignValue(this._pendingValue);\n        }\n        this._valueChangesSubscription = this._model.selectionChanged.subscribe(event => {\n            if (this._shouldHandleChangeEvent(event)) {\n                const value = this._getValueFromModel(event.selection);\n                this._lastValueValid = this._isValidValue(value);\n                this._cvaOnChange(value);\n                this._onTouched();\n                this._formatValue(value);\n                this.dateInput.emit(new MatDatepickerInputEvent(this, this._elementRef.nativeElement));\n                this.dateChange.emit(new MatDatepickerInputEvent(this, this._elementRef.nativeElement));\n            }\n        });\n    }\n    /** Whether the last value set on the input was valid. */\n    _lastValueValid = false;\n    constructor() {\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            if (!this._dateAdapter) {\n                throw createMissingDateImplError('DateAdapter');\n            }\n            if (!this._dateFormats) {\n                throw createMissingDateImplError('MAT_DATE_FORMATS');\n            }\n        }\n        // Update the displayed date when the locale changes.\n        this._localeSubscription = this._dateAdapter.localeChanges.subscribe(() => {\n            this._assignValueProgrammatically(this.value);\n        });\n    }\n    ngAfterViewInit() {\n        this._isInitialized = true;\n    }\n    ngOnChanges(changes) {\n        if (dateInputsHaveChanged(changes, this._dateAdapter)) {\n            this.stateChanges.next(undefined);\n        }\n    }\n    ngOnDestroy() {\n        this._valueChangesSubscription.unsubscribe();\n        this._localeSubscription.unsubscribe();\n        this.stateChanges.complete();\n    }\n    /** @docs-private */\n    registerOnValidatorChange(fn) {\n        this._validatorOnChange = fn;\n    }\n    /** @docs-private */\n    validate(c) {\n        return this._validator ? this._validator(c) : null;\n    }\n    // Implemented as part of ControlValueAccessor.\n    writeValue(value) {\n        this._assignValueProgrammatically(value);\n    }\n    // Implemented as part of ControlValueAccessor.\n    registerOnChange(fn) {\n        this._cvaOnChange = fn;\n    }\n    // Implemented as part of ControlValueAccessor.\n    registerOnTouched(fn) {\n        this._onTouched = fn;\n    }\n    // Implemented as part of ControlValueAccessor.\n    setDisabledState(isDisabled) {\n        this.disabled = isDisabled;\n    }\n    _onKeydown(event) {\n        const ctrlShiftMetaModifiers = ['ctrlKey', 'shiftKey', 'metaKey'];\n        const isAltDownArrow = hasModifierKey(event, 'altKey') &&\n            event.keyCode === DOWN_ARROW &&\n            ctrlShiftMetaModifiers.every((modifier) => !hasModifierKey(event, modifier));\n        if (isAltDownArrow && !this._elementRef.nativeElement.readOnly) {\n            this._openPopup();\n            event.preventDefault();\n        }\n    }\n    _onInput(value) {\n        const lastValueWasValid = this._lastValueValid;\n        let date = this._dateAdapter.parse(value, this._dateFormats.parse.dateInput);\n        this._lastValueValid = this._isValidValue(date);\n        date = this._dateAdapter.getValidDateOrNull(date);\n        const hasChanged = !this._dateAdapter.sameDate(date, this.value);\n        // We need to fire the CVA change event for all\n        // nulls, otherwise the validators won't run.\n        if (!date || hasChanged) {\n            this._cvaOnChange(date);\n        }\n        else {\n            // Call the CVA change handler for invalid values\n            // since this is what marks the control as dirty.\n            if (value && !this.value) {\n                this._cvaOnChange(date);\n            }\n            if (lastValueWasValid !== this._lastValueValid) {\n                this._validatorOnChange();\n            }\n        }\n        if (hasChanged) {\n            this._assignValue(date);\n            this.dateInput.emit(new MatDatepickerInputEvent(this, this._elementRef.nativeElement));\n        }\n    }\n    _onChange() {\n        this.dateChange.emit(new MatDatepickerInputEvent(this, this._elementRef.nativeElement));\n    }\n    /** Handles blur events on the input. */\n    _onBlur() {\n        // Reformat the input only if we have a valid value.\n        if (this.value) {\n            this._formatValue(this.value);\n        }\n        this._onTouched();\n    }\n    /** Formats a value and sets it on the input element. */\n    _formatValue(value) {\n        this._elementRef.nativeElement.value =\n            value != null ? this._dateAdapter.format(value, this._dateFormats.display.dateInput) : '';\n    }\n    /** Assigns a value to the model. */\n    _assignValue(value) {\n        // We may get some incoming values before the model was\n        // assigned. Save the value so that we can assign it later.\n        if (this._model) {\n            this._assignValueToModel(value);\n            this._pendingValue = null;\n        }\n        else {\n            this._pendingValue = value;\n        }\n    }\n    /** Whether a value is considered valid. */\n    _isValidValue(value) {\n        return !value || this._dateAdapter.isValid(value);\n    }\n    /**\n     * Checks whether a parent control is disabled. This is in place so that it can be overridden\n     * by inputs extending this one which can be placed inside of a group that can be disabled.\n     */\n    _parentDisabled() {\n        return false;\n    }\n    /** Programmatically assigns a value to the input. */\n    _assignValueProgrammatically(value) {\n        value = this._dateAdapter.deserialize(value);\n        this._lastValueValid = this._isValidValue(value);\n        value = this._dateAdapter.getValidDateOrNull(value);\n        this._assignValue(value);\n        this._formatValue(value);\n    }\n    /** Gets whether a value matches the current date filter. */\n    _matchesFilter(value) {\n        const filter = this._getDateFilter();\n        return !filter || filter(value);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerInputBase, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"16.1.0\", version: \"19.0.0\", type: MatDatepickerInputBase, isStandalone: true, inputs: { value: \"value\", disabled: [\"disabled\", \"disabled\", booleanAttribute] }, outputs: { dateChange: \"dateChange\", dateInput: \"dateInput\" }, usesOnChanges: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerInputBase, decorators: [{\n            type: Directive\n        }], ctorParameters: () => [], propDecorators: { value: [{\n                type: Input\n            }], disabled: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], dateChange: [{\n                type: Output\n            }], dateInput: [{\n                type: Output\n            }] } });\n/**\n * Checks whether the `SimpleChanges` object from an `ngOnChanges`\n * callback has any changes, accounting for date objects.\n */\nfunction dateInputsHaveChanged(changes, adapter) {\n    const keys = Object.keys(changes);\n    for (let key of keys) {\n        const { previousValue, currentValue } = changes[key];\n        if (adapter.isDateInstance(previousValue) && adapter.isDateInstance(currentValue)) {\n            if (!adapter.sameDate(previousValue, currentValue)) {\n                return true;\n            }\n        }\n        else {\n            return true;\n        }\n    }\n    return false;\n}\n\n/** @docs-private */\nconst MAT_DATEPICKER_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MatDatepickerInput),\n    multi: true,\n};\n/** @docs-private */\nconst MAT_DATEPICKER_VALIDATORS = {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => MatDatepickerInput),\n    multi: true,\n};\n/** Directive used to connect an input to a MatDatepicker. */\nclass MatDatepickerInput extends MatDatepickerInputBase {\n    _formField = inject(MAT_FORM_FIELD, { optional: true });\n    _closedSubscription = Subscription.EMPTY;\n    _openedSubscription = Subscription.EMPTY;\n    /** The datepicker that this input is associated with. */\n    set matDatepicker(datepicker) {\n        if (datepicker) {\n            this._datepicker = datepicker;\n            this._ariaOwns.set(datepicker.opened ? datepicker.id : null);\n            this._closedSubscription = datepicker.closedStream.subscribe(() => {\n                this._onTouched();\n                this._ariaOwns.set(null);\n            });\n            this._openedSubscription = datepicker.openedStream.subscribe(() => {\n                this._ariaOwns.set(datepicker.id);\n            });\n            this._registerModel(datepicker.registerInput(this));\n        }\n    }\n    _datepicker;\n    /** The id of the panel owned by this input. */\n    _ariaOwns = signal(null);\n    /** The minimum valid date. */\n    get min() {\n        return this._min;\n    }\n    set min(value) {\n        const validValue = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n        if (!this._dateAdapter.sameDate(validValue, this._min)) {\n            this._min = validValue;\n            this._validatorOnChange();\n        }\n    }\n    _min;\n    /** The maximum valid date. */\n    get max() {\n        return this._max;\n    }\n    set max(value) {\n        const validValue = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n        if (!this._dateAdapter.sameDate(validValue, this._max)) {\n            this._max = validValue;\n            this._validatorOnChange();\n        }\n    }\n    _max;\n    /** Function that can be used to filter out dates within the datepicker. */\n    get dateFilter() {\n        return this._dateFilter;\n    }\n    set dateFilter(value) {\n        const wasMatchingValue = this._matchesFilter(this.value);\n        this._dateFilter = value;\n        if (this._matchesFilter(this.value) !== wasMatchingValue) {\n            this._validatorOnChange();\n        }\n    }\n    _dateFilter;\n    /** The combined form control validator for this input. */\n    _validator;\n    constructor() {\n        super();\n        this._validator = Validators.compose(super._getValidators());\n    }\n    /**\n     * Gets the element that the datepicker popup should be connected to.\n     * @return The element to connect the popup to.\n     */\n    getConnectedOverlayOrigin() {\n        return this._formField ? this._formField.getConnectedOverlayOrigin() : this._elementRef;\n    }\n    /** Gets the ID of an element that should be used a description for the calendar overlay. */\n    getOverlayLabelId() {\n        if (this._formField) {\n            return this._formField.getLabelId();\n        }\n        return this._elementRef.nativeElement.getAttribute('aria-labelledby');\n    }\n    /** Returns the palette used by the input's form field, if any. */\n    getThemePalette() {\n        return this._formField ? this._formField.color : undefined;\n    }\n    /** Gets the value at which the calendar should start. */\n    getStartValue() {\n        return this.value;\n    }\n    ngOnDestroy() {\n        super.ngOnDestroy();\n        this._closedSubscription.unsubscribe();\n        this._openedSubscription.unsubscribe();\n    }\n    /** Opens the associated datepicker. */\n    _openPopup() {\n        if (this._datepicker) {\n            this._datepicker.open();\n        }\n    }\n    _getValueFromModel(modelValue) {\n        return modelValue;\n    }\n    _assignValueToModel(value) {\n        if (this._model) {\n            this._model.updateSelection(value, this);\n        }\n    }\n    /** Gets the input's minimum date. */\n    _getMinDate() {\n        return this._min;\n    }\n    /** Gets the input's maximum date. */\n    _getMaxDate() {\n        return this._max;\n    }\n    /** Gets the input's date filtering function. */\n    _getDateFilter() {\n        return this._dateFilter;\n    }\n    _shouldHandleChangeEvent(event) {\n        return event.source !== this;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerInput, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDatepickerInput, isStandalone: true, selector: \"input[matDatepicker]\", inputs: { matDatepicker: \"matDatepicker\", min: \"min\", max: \"max\", dateFilter: [\"matDatepickerFilter\", \"dateFilter\"] }, host: { listeners: { \"input\": \"_onInput($event.target.value)\", \"change\": \"_onChange()\", \"blur\": \"_onBlur()\", \"keydown\": \"_onKeydown($event)\" }, properties: { \"attr.aria-haspopup\": \"_datepicker ? \\\"dialog\\\" : null\", \"attr.aria-owns\": \"_ariaOwns()\", \"attr.min\": \"min ? _dateAdapter.toIso8601(min) : null\", \"attr.max\": \"max ? _dateAdapter.toIso8601(max) : null\", \"attr.data-mat-calendar\": \"_datepicker ? _datepicker.id : null\", \"disabled\": \"disabled\" }, classAttribute: \"mat-datepicker-input\" }, providers: [\n            MAT_DATEPICKER_VALUE_ACCESSOR,\n            MAT_DATEPICKER_VALIDATORS,\n            { provide: MAT_INPUT_VALUE_ACCESSOR, useExisting: MatDatepickerInput },\n        ], exportAs: [\"matDatepickerInput\"], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerInput, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'input[matDatepicker]',\n                    providers: [\n                        MAT_DATEPICKER_VALUE_ACCESSOR,\n                        MAT_DATEPICKER_VALIDATORS,\n                        { provide: MAT_INPUT_VALUE_ACCESSOR, useExisting: MatDatepickerInput },\n                    ],\n                    host: {\n                        'class': 'mat-datepicker-input',\n                        '[attr.aria-haspopup]': '_datepicker ? \"dialog\" : null',\n                        '[attr.aria-owns]': '_ariaOwns()',\n                        '[attr.min]': 'min ? _dateAdapter.toIso8601(min) : null',\n                        '[attr.max]': 'max ? _dateAdapter.toIso8601(max) : null',\n                        // Used by the test harness to tie this input to its calendar. We can't depend on\n                        // `aria-owns` for this, because it's only defined while the calendar is open.\n                        '[attr.data-mat-calendar]': '_datepicker ? _datepicker.id : null',\n                        '[disabled]': 'disabled',\n                        '(input)': '_onInput($event.target.value)',\n                        '(change)': '_onChange()',\n                        '(blur)': '_onBlur()',\n                        '(keydown)': '_onKeydown($event)',\n                    },\n                    exportAs: 'matDatepickerInput',\n                }]\n        }], ctorParameters: () => [], propDecorators: { matDatepicker: [{\n                type: Input\n            }], min: [{\n                type: Input\n            }], max: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input,\n                args: ['matDatepickerFilter']\n            }] } });\n\n/** Can be used to override the icon of a `matDatepickerToggle`. */\nclass MatDatepickerToggleIcon {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerToggleIcon, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDatepickerToggleIcon, isStandalone: true, selector: \"[matDatepickerToggleIcon]\", ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerToggleIcon, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matDatepickerToggleIcon]',\n                }]\n        }] });\nclass MatDatepickerToggle {\n    _intl = inject(MatDatepickerIntl);\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _stateChanges = Subscription.EMPTY;\n    /** Datepicker instance that the button will toggle. */\n    datepicker;\n    /** Tabindex for the toggle. */\n    tabIndex;\n    /** Screen-reader label for the button. */\n    ariaLabel;\n    /** Whether the toggle button is disabled. */\n    get disabled() {\n        if (this._disabled === undefined && this.datepicker) {\n            return this.datepicker.disabled;\n        }\n        return !!this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = value;\n    }\n    _disabled;\n    /** Whether ripples on the toggle should be disabled. */\n    disableRipple;\n    /** Custom icon set by the consumer. */\n    _customIcon;\n    /** Underlying button element. */\n    _button;\n    constructor() {\n        const defaultTabIndex = inject(new HostAttributeToken('tabindex'), { optional: true });\n        const parsedTabIndex = Number(defaultTabIndex);\n        this.tabIndex = parsedTabIndex || parsedTabIndex === 0 ? parsedTabIndex : null;\n    }\n    ngOnChanges(changes) {\n        if (changes['datepicker']) {\n            this._watchStateChanges();\n        }\n    }\n    ngOnDestroy() {\n        this._stateChanges.unsubscribe();\n    }\n    ngAfterContentInit() {\n        this._watchStateChanges();\n    }\n    _open(event) {\n        if (this.datepicker && !this.disabled) {\n            this.datepicker.open();\n            event.stopPropagation();\n        }\n    }\n    _watchStateChanges() {\n        const datepickerStateChanged = this.datepicker ? this.datepicker.stateChanges : of();\n        const inputStateChanged = this.datepicker && this.datepicker.datepickerInput\n            ? this.datepicker.datepickerInput.stateChanges\n            : of();\n        const datepickerToggled = this.datepicker\n            ? merge(this.datepicker.openedStream, this.datepicker.closedStream)\n            : of();\n        this._stateChanges.unsubscribe();\n        this._stateChanges = merge(this._intl.changes, datepickerStateChanged, inputStateChanged, datepickerToggled).subscribe(() => this._changeDetectorRef.markForCheck());\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerToggle, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"17.0.0\", version: \"19.0.0\", type: MatDatepickerToggle, isStandalone: true, selector: \"mat-datepicker-toggle\", inputs: { datepicker: [\"for\", \"datepicker\"], tabIndex: \"tabIndex\", ariaLabel: [\"aria-label\", \"ariaLabel\"], disabled: [\"disabled\", \"disabled\", booleanAttribute], disableRipple: \"disableRipple\" }, host: { listeners: { \"click\": \"_open($event)\" }, properties: { \"attr.tabindex\": \"null\", \"class.mat-datepicker-toggle-active\": \"datepicker && datepicker.opened\", \"class.mat-accent\": \"datepicker && datepicker.color === \\\"accent\\\"\", \"class.mat-warn\": \"datepicker && datepicker.color === \\\"warn\\\"\", \"attr.data-mat-calendar\": \"datepicker ? datepicker.id : null\" }, classAttribute: \"mat-datepicker-toggle\" }, queries: [{ propertyName: \"_customIcon\", first: true, predicate: MatDatepickerToggleIcon, descendants: true }], viewQueries: [{ propertyName: \"_button\", first: true, predicate: [\"button\"], descendants: true }], exportAs: [\"matDatepickerToggle\"], usesOnChanges: true, ngImport: i0, template: \"<button\\n  #button\\n  mat-icon-button\\n  type=\\\"button\\\"\\n  [attr.aria-haspopup]=\\\"datepicker ? 'dialog' : null\\\"\\n  [attr.aria-label]=\\\"ariaLabel || _intl.openCalendarLabel\\\"\\n  [attr.tabindex]=\\\"disabled ? -1 : tabIndex\\\"\\n  [disabled]=\\\"disabled\\\"\\n  [disableRipple]=\\\"disableRipple\\\">\\n\\n  @if (!_customIcon) {\\n    <svg\\n      class=\\\"mat-datepicker-toggle-default-icon\\\"\\n      viewBox=\\\"0 0 24 24\\\"\\n      width=\\\"24px\\\"\\n      height=\\\"24px\\\"\\n      fill=\\\"currentColor\\\"\\n      focusable=\\\"false\\\"\\n      aria-hidden=\\\"true\\\">\\n      <path d=\\\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z\\\"/>\\n    </svg>\\n  }\\n\\n  <ng-content select=\\\"[matDatepickerToggleIcon]\\\"></ng-content>\\n</button>\\n\", styles: [\".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-on-surface-variant))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}\"], dependencies: [{ kind: \"component\", type: MatIconButton, selector: \"button[mat-icon-button]\", exportAs: [\"matButton\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerToggle, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-datepicker-toggle', host: {\n                        'class': 'mat-datepicker-toggle',\n                        '[attr.tabindex]': 'null',\n                        '[class.mat-datepicker-toggle-active]': 'datepicker && datepicker.opened',\n                        '[class.mat-accent]': 'datepicker && datepicker.color === \"accent\"',\n                        '[class.mat-warn]': 'datepicker && datepicker.color === \"warn\"',\n                        // Used by the test harness to tie this toggle to its datepicker.\n                        '[attr.data-mat-calendar]': 'datepicker ? datepicker.id : null',\n                        // Bind the `click` on the host, rather than the inner `button`, so that we can call\n                        // `stopPropagation` on it without affecting the user's `click` handlers. We need to stop\n                        // it so that the input doesn't get focused automatically by the form field (See #21836).\n                        '(click)': '_open($event)',\n                    }, exportAs: 'matDatepickerToggle', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, imports: [MatIconButton], template: \"<button\\n  #button\\n  mat-icon-button\\n  type=\\\"button\\\"\\n  [attr.aria-haspopup]=\\\"datepicker ? 'dialog' : null\\\"\\n  [attr.aria-label]=\\\"ariaLabel || _intl.openCalendarLabel\\\"\\n  [attr.tabindex]=\\\"disabled ? -1 : tabIndex\\\"\\n  [disabled]=\\\"disabled\\\"\\n  [disableRipple]=\\\"disableRipple\\\">\\n\\n  @if (!_customIcon) {\\n    <svg\\n      class=\\\"mat-datepicker-toggle-default-icon\\\"\\n      viewBox=\\\"0 0 24 24\\\"\\n      width=\\\"24px\\\"\\n      height=\\\"24px\\\"\\n      fill=\\\"currentColor\\\"\\n      focusable=\\\"false\\\"\\n      aria-hidden=\\\"true\\\">\\n      <path d=\\\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z\\\"/>\\n    </svg>\\n  }\\n\\n  <ng-content select=\\\"[matDatepickerToggleIcon]\\\"></ng-content>\\n</button>\\n\", styles: [\".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-on-surface-variant))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}\"] }]\n        }], ctorParameters: () => [], propDecorators: { datepicker: [{\n                type: Input,\n                args: ['for']\n            }], tabIndex: [{\n                type: Input\n            }], ariaLabel: [{\n                type: Input,\n                args: ['aria-label']\n            }], disabled: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], disableRipple: [{\n                type: Input\n            }], _customIcon: [{\n                type: ContentChild,\n                args: [MatDatepickerToggleIcon]\n            }], _button: [{\n                type: ViewChild,\n                args: ['button']\n            }] } });\n\n// This file contains the `_computeAriaAccessibleName` function, which computes what the *expected*\n// ARIA accessible name would be for a given element. Implements a subset of ARIA specification\n// [Accessible Name and Description Computation 1.2](https://www.w3.org/TR/accname-1.2/).\n//\n// Specification accname-1.2 can be summarized by returning the result of the first method\n// available.\n//\n//  1. `aria-labelledby` attribute\n//     ```\n//       <!-- example using aria-labelledby-->\n//       <label id='label-id'>Start Date</label>\n//       <input aria-labelledby='label-id'/>\n//     ```\n//  2. `aria-label` attribute (e.g. `<input aria-label=\"Departure\"/>`)\n//  3. Label with `for`/`id`\n//     ```\n//       <!-- example using for/id -->\n//       <label for=\"current-node\">Label</label>\n//       <input id=\"current-node\"/>\n//     ```\n//  4. `placeholder` attribute (e.g. `<input placeholder=\"06/03/1990\"/>`)\n//  5. `title` attribute (e.g. `<input title=\"Check-In\"/>`)\n//  6. text content\n//     ```\n//       <!-- example using text content -->\n//       <label for=\"current-node\"><span>Departure</span> Date</label>\n//       <input id=\"current-node\"/>\n//     ```\n/**\n * Computes the *expected* ARIA accessible name for argument element based on [accname-1.2\n * specification](https://www.w3.org/TR/accname-1.2/). Implements a subset of accname-1.2,\n * and should only be used for the Datepicker's specific use case.\n *\n * Intended use:\n * This is not a general use implementation. Only implements the parts of accname-1.2 that are\n * required for the Datepicker's specific use case. This function is not intended for any other\n * use.\n *\n * Limitations:\n *  - Only covers the needs of `matStartDate` and `matEndDate`. Does not support other use cases.\n *  - See NOTES's in implementation for specific details on what parts of the accname-1.2\n *  specification are not implemented.\n *\n *  @param element {HTMLInputElement} native &lt;input/&gt; element of `matStartDate` or\n *  `matEndDate` component. Corresponds to the 'Root Element' from accname-1.2\n *\n *  @return expected ARIA accessible name of argument &lt;input/&gt;\n */\nfunction _computeAriaAccessibleName(element) {\n    return _computeAriaAccessibleNameInternal(element, true);\n}\n/**\n * Determine if argument node is an Element based on `nodeType` property. This function is safe to\n * use with server-side rendering.\n */\nfunction ssrSafeIsElement(node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Determine if argument node is an HTMLInputElement based on `nodeName` property. This funciton is\n * safe to use with server-side rendering.\n */\nfunction ssrSafeIsHTMLInputElement(node) {\n    return node.nodeName === 'INPUT';\n}\n/**\n * Determine if argument node is an HTMLTextAreaElement based on `nodeName` property. This\n * funciton is safe to use with server-side rendering.\n */\nfunction ssrSafeIsHTMLTextAreaElement(node) {\n    return node.nodeName === 'TEXTAREA';\n}\n/**\n * Calculate the expected ARIA accessible name for given DOM Node. Given DOM Node may be either the\n * \"Root node\" passed to `_computeAriaAccessibleName` or \"Current node\" as result of recursion.\n *\n * @return the accessible name of argument DOM Node\n *\n * @param currentNode node to determine accessible name of\n * @param isDirectlyReferenced true if `currentNode` is the root node to calculate ARIA accessible\n * name of. False if it is a result of recursion.\n */\nfunction _computeAriaAccessibleNameInternal(currentNode, isDirectlyReferenced) {\n    // NOTE: this differs from accname-1.2 specification.\n    //  - Does not implement Step 1. of accname-1.2: '''If `currentNode`'s role prohibits naming,\n    //    return the empty string (\"\")'''.\n    //  - Does not implement Step 2.A. of accname-1.2: '''if current node is hidden and not directly\n    //    referenced by aria-labelledby... return the empty string.'''\n    // acc-name-1.2 Step 2.B.: aria-labelledby\n    if (ssrSafeIsElement(currentNode) && isDirectlyReferenced) {\n        const labelledbyIds = currentNode.getAttribute?.('aria-labelledby')?.split(/\\s+/g) || [];\n        const validIdRefs = labelledbyIds.reduce((validIds, id) => {\n            const elem = document.getElementById(id);\n            if (elem) {\n                validIds.push(elem);\n            }\n            return validIds;\n        }, []);\n        if (validIdRefs.length) {\n            return validIdRefs\n                .map(idRef => {\n                return _computeAriaAccessibleNameInternal(idRef, false);\n            })\n                .join(' ');\n        }\n    }\n    // acc-name-1.2 Step 2.C.: aria-label\n    if (ssrSafeIsElement(currentNode)) {\n        const ariaLabel = currentNode.getAttribute('aria-label')?.trim();\n        if (ariaLabel) {\n            return ariaLabel;\n        }\n    }\n    // acc-name-1.2 Step 2.D. attribute or element that defines a text alternative\n    //\n    // NOTE: this differs from accname-1.2 specification.\n    // Only implements Step 2.D. for `<label>`,`<input/>`, and `<textarea/>` element. Does not\n    // implement other elements that have an attribute or element that defines a text alternative.\n    if (ssrSafeIsHTMLInputElement(currentNode) || ssrSafeIsHTMLTextAreaElement(currentNode)) {\n        // use label with a `for` attribute referencing the current node\n        if (currentNode.labels?.length) {\n            return Array.from(currentNode.labels)\n                .map(x => _computeAriaAccessibleNameInternal(x, false))\n                .join(' ');\n        }\n        // use placeholder if available\n        const placeholder = currentNode.getAttribute('placeholder')?.trim();\n        if (placeholder) {\n            return placeholder;\n        }\n        // use title if available\n        const title = currentNode.getAttribute('title')?.trim();\n        if (title) {\n            return title;\n        }\n    }\n    // NOTE: this differs from accname-1.2 specification.\n    //  - does not implement acc-name-1.2 Step 2.E.: '''if the current node is a control embedded\n    //     within the label... then include the embedded control as part of the text alternative in\n    //     the following manner...'''. Step 2E applies to embedded controls such as textbox, listbox,\n    //     range, etc.\n    //  - does not implement acc-name-1.2 step 2.F.: check that '''role allows name from content''',\n    //    which applies to `currentNode` and its children.\n    //  - does not implement acc-name-1.2 Step 2.F.ii.: '''Check for CSS generated textual content'''\n    //    (e.g. :before and :after).\n    //  - does not implement acc-name-1.2 Step 2.I.: '''if the current node has a Tooltip attribute,\n    //    return its value'''\n    // Return text content with whitespace collapsed into a single space character. Accomplish\n    // acc-name-1.2 steps 2F, 2G, and 2H.\n    return (currentNode.textContent || '').replace(/\\s+/g, ' ').trim();\n}\n\n/**\n * Used to provide the date range input wrapper component\n * to the parts without circular dependencies.\n */\nconst MAT_DATE_RANGE_INPUT_PARENT = new InjectionToken('MAT_DATE_RANGE_INPUT_PARENT');\n/**\n * Base class for the individual inputs that can be projected inside a `mat-date-range-input`.\n */\nclass MatDateRangeInputPartBase extends MatDatepickerInputBase {\n    _rangeInput = inject(MAT_DATE_RANGE_INPUT_PARENT);\n    _elementRef = inject(ElementRef);\n    _defaultErrorStateMatcher = inject(ErrorStateMatcher);\n    _injector = inject(Injector);\n    _parentForm = inject(NgForm, { optional: true });\n    _parentFormGroup = inject(FormGroupDirective, { optional: true });\n    /**\n     * Form control bound to this input part.\n     * @docs-private\n     */\n    ngControl;\n    _dir = inject(Directionality, { optional: true });\n    _errorStateTracker;\n    /** Object used to control when error messages are shown. */\n    get errorStateMatcher() {\n        return this._errorStateTracker.matcher;\n    }\n    set errorStateMatcher(value) {\n        this._errorStateTracker.matcher = value;\n    }\n    /** Whether the input is in an error state. */\n    get errorState() {\n        return this._errorStateTracker.errorState;\n    }\n    set errorState(value) {\n        this._errorStateTracker.errorState = value;\n    }\n    constructor() {\n        super();\n        this._errorStateTracker = new _ErrorStateTracker(this._defaultErrorStateMatcher, null, this._parentFormGroup, this._parentForm, this.stateChanges);\n    }\n    ngOnInit() {\n        // We need the date input to provide itself as a `ControlValueAccessor` and a `Validator`, while\n        // injecting its `NgControl` so that the error state is handled correctly. This introduces a\n        // circular dependency, because both `ControlValueAccessor` and `Validator` depend on the input\n        // itself. Usually we can work around it for the CVA, but there's no API to do it for the\n        // validator. We work around it here by injecting the `NgControl` in `ngOnInit`, after\n        // everything has been resolved.\n        const ngControl = this._injector.get(NgControl, null, { optional: true, self: true });\n        if (ngControl) {\n            this.ngControl = ngControl;\n            this._errorStateTracker.ngControl = ngControl;\n        }\n    }\n    ngDoCheck() {\n        if (this.ngControl) {\n            // We need to re-evaluate this on every change detection cycle, because there are some\n            // error triggers that we can't subscribe to (e.g. parent form submissions). This means\n            // that whatever logic is in here has to be super lean or we risk destroying the performance.\n            this.updateErrorState();\n        }\n    }\n    /** Gets whether the input is empty. */\n    isEmpty() {\n        return this._elementRef.nativeElement.value.length === 0;\n    }\n    /** Gets the placeholder of the input. */\n    _getPlaceholder() {\n        return this._elementRef.nativeElement.placeholder;\n    }\n    /** Focuses the input. */\n    focus() {\n        this._elementRef.nativeElement.focus();\n    }\n    /** Gets the value that should be used when mirroring the input's size. */\n    getMirrorValue() {\n        const element = this._elementRef.nativeElement;\n        const value = element.value;\n        return value.length > 0 ? value : element.placeholder;\n    }\n    /** Refreshes the error state of the input. */\n    updateErrorState() {\n        this._errorStateTracker.updateErrorState();\n    }\n    /** Handles `input` events on the input element. */\n    _onInput(value) {\n        super._onInput(value);\n        this._rangeInput._handleChildValueChange();\n    }\n    /** Opens the datepicker associated with the input. */\n    _openPopup() {\n        this._rangeInput._openDatepicker();\n    }\n    /** Gets the minimum date from the range input. */\n    _getMinDate() {\n        return this._rangeInput.min;\n    }\n    /** Gets the maximum date from the range input. */\n    _getMaxDate() {\n        return this._rangeInput.max;\n    }\n    /** Gets the date filter function from the range input. */\n    _getDateFilter() {\n        return this._rangeInput.dateFilter;\n    }\n    _parentDisabled() {\n        return this._rangeInput._groupDisabled;\n    }\n    _shouldHandleChangeEvent({ source }) {\n        return source !== this._rangeInput._startInput && source !== this._rangeInput._endInput;\n    }\n    _assignValueProgrammatically(value) {\n        super._assignValueProgrammatically(value);\n        const opposite = (this === this._rangeInput._startInput\n            ? this._rangeInput._endInput\n            : this._rangeInput._startInput);\n        opposite?._validatorOnChange();\n    }\n    /** return the ARIA accessible name of the input element */\n    _getAccessibleName() {\n        return _computeAriaAccessibleName(this._elementRef.nativeElement);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateRangeInputPartBase, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDateRangeInputPartBase, isStandalone: true, inputs: { errorStateMatcher: \"errorStateMatcher\" }, usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateRangeInputPartBase, decorators: [{\n            type: Directive\n        }], ctorParameters: () => [], propDecorators: { errorStateMatcher: [{\n                type: Input\n            }] } });\n/** Input for entering the start date in a `mat-date-range-input`. */\nclass MatStartDate extends MatDateRangeInputPartBase {\n    /** Validator that checks that the start date isn't after the end date. */\n    _startValidator = (control) => {\n        const start = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value));\n        const end = this._model ? this._model.selection.end : null;\n        return !start || !end || this._dateAdapter.compareDate(start, end) <= 0\n            ? null\n            : { 'matStartDateInvalid': { 'end': end, 'actual': start } };\n    };\n    _validator = Validators.compose([...super._getValidators(), this._startValidator]);\n    _getValueFromModel(modelValue) {\n        return modelValue.start;\n    }\n    _shouldHandleChangeEvent(change) {\n        if (!super._shouldHandleChangeEvent(change)) {\n            return false;\n        }\n        else {\n            return !change.oldValue?.start\n                ? !!change.selection.start\n                : !change.selection.start ||\n                    !!this._dateAdapter.compareDate(change.oldValue.start, change.selection.start);\n        }\n    }\n    _assignValueToModel(value) {\n        if (this._model) {\n            const range = new DateRange(value, this._model.selection.end);\n            this._model.updateSelection(range, this);\n        }\n    }\n    _formatValue(value) {\n        super._formatValue(value);\n        // Any time the input value is reformatted we need to tell the parent.\n        this._rangeInput._handleChildValueChange();\n    }\n    _onKeydown(event) {\n        const endInput = this._rangeInput._endInput;\n        const element = this._elementRef.nativeElement;\n        const isLtr = this._dir?.value !== 'rtl';\n        // If the user hits RIGHT (LTR) when at the end of the input (and no\n        // selection), move the cursor to the start of the end input.\n        if (((event.keyCode === RIGHT_ARROW && isLtr) || (event.keyCode === LEFT_ARROW && !isLtr)) &&\n            element.selectionStart === element.value.length &&\n            element.selectionEnd === element.value.length) {\n            event.preventDefault();\n            endInput._elementRef.nativeElement.setSelectionRange(0, 0);\n            endInput.focus();\n        }\n        else {\n            super._onKeydown(event);\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatStartDate, deps: null, target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatStartDate, isStandalone: true, selector: \"input[matStartDate]\", outputs: { dateChange: \"dateChange\", dateInput: \"dateInput\" }, host: { attributes: { \"type\": \"text\" }, listeners: { \"input\": \"_onInput($event.target.value)\", \"change\": \"_onChange()\", \"keydown\": \"_onKeydown($event)\", \"blur\": \"_onBlur()\" }, properties: { \"disabled\": \"disabled\", \"attr.aria-haspopup\": \"_rangeInput.rangePicker ? \\\"dialog\\\" : null\", \"attr.aria-owns\": \"_rangeInput._ariaOwns\\n        ? _rangeInput._ariaOwns()\\n        : (_rangeInput.rangePicker?.opened && _rangeInput.rangePicker.id) || null\", \"attr.min\": \"_getMinDate() ? _dateAdapter.toIso8601(_getMinDate()) : null\", \"attr.max\": \"_getMaxDate() ? _dateAdapter.toIso8601(_getMaxDate()) : null\" }, classAttribute: \"mat-start-date mat-date-range-input-inner\" }, providers: [\n            { provide: NG_VALUE_ACCESSOR, useExisting: MatStartDate, multi: true },\n            { provide: NG_VALIDATORS, useExisting: MatStartDate, multi: true },\n        ], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatStartDate, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'input[matStartDate]',\n                    host: {\n                        'class': 'mat-start-date mat-date-range-input-inner',\n                        '[disabled]': 'disabled',\n                        '(input)': '_onInput($event.target.value)',\n                        '(change)': '_onChange()',\n                        '(keydown)': '_onKeydown($event)',\n                        '[attr.aria-haspopup]': '_rangeInput.rangePicker ? \"dialog\" : null',\n                        '[attr.aria-owns]': `_rangeInput._ariaOwns\n        ? _rangeInput._ariaOwns()\n        : (_rangeInput.rangePicker?.opened && _rangeInput.rangePicker.id) || null`,\n                        '[attr.min]': '_getMinDate() ? _dateAdapter.toIso8601(_getMinDate()) : null',\n                        '[attr.max]': '_getMaxDate() ? _dateAdapter.toIso8601(_getMaxDate()) : null',\n                        '(blur)': '_onBlur()',\n                        'type': 'text',\n                    },\n                    providers: [\n                        { provide: NG_VALUE_ACCESSOR, useExisting: MatStartDate, multi: true },\n                        { provide: NG_VALIDATORS, useExisting: MatStartDate, multi: true },\n                    ],\n                    // These need to be specified explicitly, because some tooling doesn't\n                    // seem to pick them up from the base class. See #20932.\n                    outputs: ['dateChange', 'dateInput'],\n                }]\n        }] });\n/** Input for entering the end date in a `mat-date-range-input`. */\nclass MatEndDate extends MatDateRangeInputPartBase {\n    /** Validator that checks that the end date isn't before the start date. */\n    _endValidator = (control) => {\n        const end = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value));\n        const start = this._model ? this._model.selection.start : null;\n        return !end || !start || this._dateAdapter.compareDate(end, start) >= 0\n            ? null\n            : { 'matEndDateInvalid': { 'start': start, 'actual': end } };\n    };\n    _validator = Validators.compose([...super._getValidators(), this._endValidator]);\n    _getValueFromModel(modelValue) {\n        return modelValue.end;\n    }\n    _shouldHandleChangeEvent(change) {\n        if (!super._shouldHandleChangeEvent(change)) {\n            return false;\n        }\n        else {\n            return !change.oldValue?.end\n                ? !!change.selection.end\n                : !change.selection.end ||\n                    !!this._dateAdapter.compareDate(change.oldValue.end, change.selection.end);\n        }\n    }\n    _assignValueToModel(value) {\n        if (this._model) {\n            const range = new DateRange(this._model.selection.start, value);\n            this._model.updateSelection(range, this);\n        }\n    }\n    _moveCaretToEndOfStartInput() {\n        const startInput = this._rangeInput._startInput._elementRef.nativeElement;\n        const value = startInput.value;\n        if (value.length > 0) {\n            startInput.setSelectionRange(value.length, value.length);\n        }\n        startInput.focus();\n    }\n    _onKeydown(event) {\n        const element = this._elementRef.nativeElement;\n        const isLtr = this._dir?.value !== 'rtl';\n        // If the user is pressing backspace on an empty end input, move focus back to the start.\n        if (event.keyCode === BACKSPACE && !element.value) {\n            this._moveCaretToEndOfStartInput();\n        }\n        // If the user hits LEFT (LTR) when at the start of the input (and no\n        // selection), move the cursor to the end of the start input.\n        else if (((event.keyCode === LEFT_ARROW && isLtr) || (event.keyCode === RIGHT_ARROW && !isLtr)) &&\n            element.selectionStart === 0 &&\n            element.selectionEnd === 0) {\n            event.preventDefault();\n            this._moveCaretToEndOfStartInput();\n        }\n        else {\n            super._onKeydown(event);\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatEndDate, deps: null, target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatEndDate, isStandalone: true, selector: \"input[matEndDate]\", outputs: { dateChange: \"dateChange\", dateInput: \"dateInput\" }, host: { attributes: { \"type\": \"text\" }, listeners: { \"input\": \"_onInput($event.target.value)\", \"change\": \"_onChange()\", \"keydown\": \"_onKeydown($event)\", \"blur\": \"_onBlur()\" }, properties: { \"disabled\": \"disabled\", \"attr.aria-haspopup\": \"_rangeInput.rangePicker ? \\\"dialog\\\" : null\", \"attr.aria-owns\": \"_rangeInput._ariaOwns\\n        ? _rangeInput._ariaOwns()\\n        : (_rangeInput.rangePicker?.opened && _rangeInput.rangePicker.id) || null\", \"attr.min\": \"_getMinDate() ? _dateAdapter.toIso8601(_getMinDate()) : null\", \"attr.max\": \"_getMaxDate() ? _dateAdapter.toIso8601(_getMaxDate()) : null\" }, classAttribute: \"mat-end-date mat-date-range-input-inner\" }, providers: [\n            { provide: NG_VALUE_ACCESSOR, useExisting: MatEndDate, multi: true },\n            { provide: NG_VALIDATORS, useExisting: MatEndDate, multi: true },\n        ], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatEndDate, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'input[matEndDate]',\n                    host: {\n                        'class': 'mat-end-date mat-date-range-input-inner',\n                        '[disabled]': 'disabled',\n                        '(input)': '_onInput($event.target.value)',\n                        '(change)': '_onChange()',\n                        '(keydown)': '_onKeydown($event)',\n                        '[attr.aria-haspopup]': '_rangeInput.rangePicker ? \"dialog\" : null',\n                        '[attr.aria-owns]': `_rangeInput._ariaOwns\n        ? _rangeInput._ariaOwns()\n        : (_rangeInput.rangePicker?.opened && _rangeInput.rangePicker.id) || null`,\n                        '[attr.min]': '_getMinDate() ? _dateAdapter.toIso8601(_getMinDate()) : null',\n                        '[attr.max]': '_getMaxDate() ? _dateAdapter.toIso8601(_getMaxDate()) : null',\n                        '(blur)': '_onBlur()',\n                        'type': 'text',\n                    },\n                    providers: [\n                        { provide: NG_VALUE_ACCESSOR, useExisting: MatEndDate, multi: true },\n                        { provide: NG_VALIDATORS, useExisting: MatEndDate, multi: true },\n                    ],\n                    // These need to be specified explicitly, because some tooling doesn't\n                    // seem to pick them up from the base class. See #20932.\n                    outputs: ['dateChange', 'dateInput'],\n                }]\n        }] });\n\nclass MatDateRangeInput {\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _elementRef = inject(ElementRef);\n    _dateAdapter = inject(DateAdapter, { optional: true });\n    _formField = inject(MAT_FORM_FIELD, { optional: true });\n    _closedSubscription = Subscription.EMPTY;\n    _openedSubscription = Subscription.EMPTY;\n    /** Current value of the range input. */\n    get value() {\n        return this._model ? this._model.selection : null;\n    }\n    /** Unique ID for the group. */\n    id = inject(_IdGenerator).getId('mat-date-range-input-');\n    /** Whether the control is focused. */\n    focused = false;\n    /** Whether the control's label should float. */\n    get shouldLabelFloat() {\n        return this.focused || !this.empty;\n    }\n    /** Name of the form control. */\n    controlType = 'mat-date-range-input';\n    /**\n     * Implemented as a part of `MatFormFieldControl`.\n     * Set the placeholder attribute on `matStartDate` and `matEndDate`.\n     * @docs-private\n     */\n    get placeholder() {\n        const start = this._startInput?._getPlaceholder() || '';\n        const end = this._endInput?._getPlaceholder() || '';\n        return start || end ? `${start} ${this.separator} ${end}` : '';\n    }\n    /** The range picker that this input is associated with. */\n    get rangePicker() {\n        return this._rangePicker;\n    }\n    set rangePicker(rangePicker) {\n        if (rangePicker) {\n            this._model = rangePicker.registerInput(this);\n            this._rangePicker = rangePicker;\n            this._closedSubscription.unsubscribe();\n            this._openedSubscription.unsubscribe();\n            this._ariaOwns.set(this.rangePicker.opened ? rangePicker.id : null);\n            this._closedSubscription = rangePicker.closedStream.subscribe(() => {\n                this._startInput?._onTouched();\n                this._endInput?._onTouched();\n                this._ariaOwns.set(null);\n            });\n            this._openedSubscription = rangePicker.openedStream.subscribe(() => {\n                this._ariaOwns.set(rangePicker.id);\n            });\n            this._registerModel(this._model);\n        }\n    }\n    _rangePicker;\n    /** The id of the panel owned by this input. */\n    _ariaOwns = signal(null);\n    /** Whether the input is required. */\n    get required() {\n        return (this._required ??\n            (this._isTargetRequired(this) ||\n                this._isTargetRequired(this._startInput) ||\n                this._isTargetRequired(this._endInput)) ??\n            false);\n    }\n    set required(value) {\n        this._required = value;\n    }\n    _required;\n    /** Function that can be used to filter out dates within the date range picker. */\n    get dateFilter() {\n        return this._dateFilter;\n    }\n    set dateFilter(value) {\n        const start = this._startInput;\n        const end = this._endInput;\n        const wasMatchingStart = start && start._matchesFilter(start.value);\n        const wasMatchingEnd = end && end._matchesFilter(start.value);\n        this._dateFilter = value;\n        if (start && start._matchesFilter(start.value) !== wasMatchingStart) {\n            start._validatorOnChange();\n        }\n        if (end && end._matchesFilter(end.value) !== wasMatchingEnd) {\n            end._validatorOnChange();\n        }\n    }\n    _dateFilter;\n    /** The minimum valid date. */\n    get min() {\n        return this._min;\n    }\n    set min(value) {\n        const validValue = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n        if (!this._dateAdapter.sameDate(validValue, this._min)) {\n            this._min = validValue;\n            this._revalidate();\n        }\n    }\n    _min;\n    /** The maximum valid date. */\n    get max() {\n        return this._max;\n    }\n    set max(value) {\n        const validValue = this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));\n        if (!this._dateAdapter.sameDate(validValue, this._max)) {\n            this._max = validValue;\n            this._revalidate();\n        }\n    }\n    _max;\n    /** Whether the input is disabled. */\n    get disabled() {\n        return this._startInput && this._endInput\n            ? this._startInput.disabled && this._endInput.disabled\n            : this._groupDisabled;\n    }\n    set disabled(value) {\n        if (value !== this._groupDisabled) {\n            this._groupDisabled = value;\n            this.stateChanges.next(undefined);\n        }\n    }\n    _groupDisabled = false;\n    /** Whether the input is in an error state. */\n    get errorState() {\n        if (this._startInput && this._endInput) {\n            return this._startInput.errorState || this._endInput.errorState;\n        }\n        return false;\n    }\n    /** Whether the datepicker input is empty. */\n    get empty() {\n        const startEmpty = this._startInput ? this._startInput.isEmpty() : false;\n        const endEmpty = this._endInput ? this._endInput.isEmpty() : false;\n        return startEmpty && endEmpty;\n    }\n    /** Value for the `aria-describedby` attribute of the inputs. */\n    _ariaDescribedBy = null;\n    /** Date selection model currently registered with the input. */\n    _model;\n    /** Separator text to be shown between the inputs. */\n    separator = '';\n    /** Start of the comparison range that should be shown in the calendar. */\n    comparisonStart = null;\n    /** End of the comparison range that should be shown in the calendar. */\n    comparisonEnd = null;\n    _startInput;\n    _endInput;\n    /**\n     * Implemented as a part of `MatFormFieldControl`.\n     * TODO(crisbeto): change type to `AbstractControlDirective` after #18206 lands.\n     * @docs-private\n     */\n    ngControl;\n    /** Emits when the input's state has changed. */\n    stateChanges = new Subject();\n    /**\n     * Disable the automatic labeling to avoid issues like #27241.\n     * @docs-private\n     */\n    disableAutomaticLabeling = true;\n    constructor() {\n        if (!this._dateAdapter && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throw createMissingDateImplError('DateAdapter');\n        }\n        // The datepicker module can be used both with MDC and non-MDC form fields. We have\n        // to conditionally add the MDC input class so that the range picker looks correctly.\n        if (this._formField?._elementRef.nativeElement.classList.contains('mat-mdc-form-field')) {\n            this._elementRef.nativeElement.classList.add('mat-mdc-input-element', 'mat-mdc-form-field-input-control', 'mdc-text-field__input');\n        }\n        // TODO(crisbeto): remove `as any` after #18206 lands.\n        this.ngControl = inject(ControlContainer, { optional: true, self: true });\n    }\n    /**\n     * Implemented as a part of `MatFormFieldControl`.\n     * @docs-private\n     */\n    setDescribedByIds(ids) {\n        this._ariaDescribedBy = ids.length ? ids.join(' ') : null;\n    }\n    /**\n     * Implemented as a part of `MatFormFieldControl`.\n     * @docs-private\n     */\n    onContainerClick() {\n        if (!this.focused && !this.disabled) {\n            if (!this._model || !this._model.selection.start) {\n                this._startInput.focus();\n            }\n            else {\n                this._endInput.focus();\n            }\n        }\n    }\n    ngAfterContentInit() {\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            if (!this._startInput) {\n                throw Error('mat-date-range-input must contain a matStartDate input');\n            }\n            if (!this._endInput) {\n                throw Error('mat-date-range-input must contain a matEndDate input');\n            }\n        }\n        if (this._model) {\n            this._registerModel(this._model);\n        }\n        // We don't need to unsubscribe from this, because we\n        // know that the input streams will be completed on destroy.\n        merge(this._startInput.stateChanges, this._endInput.stateChanges).subscribe(() => {\n            this.stateChanges.next(undefined);\n        });\n    }\n    ngOnChanges(changes) {\n        if (dateInputsHaveChanged(changes, this._dateAdapter)) {\n            this.stateChanges.next(undefined);\n        }\n    }\n    ngOnDestroy() {\n        this._closedSubscription.unsubscribe();\n        this._openedSubscription.unsubscribe();\n        this.stateChanges.complete();\n    }\n    /** Gets the date at which the calendar should start. */\n    getStartValue() {\n        return this.value ? this.value.start : null;\n    }\n    /** Gets the input's theme palette. */\n    getThemePalette() {\n        return this._formField ? this._formField.color : undefined;\n    }\n    /** Gets the element to which the calendar overlay should be attached. */\n    getConnectedOverlayOrigin() {\n        return this._formField ? this._formField.getConnectedOverlayOrigin() : this._elementRef;\n    }\n    /** Gets the ID of an element that should be used a description for the calendar overlay. */\n    getOverlayLabelId() {\n        return this._formField ? this._formField.getLabelId() : null;\n    }\n    /** Gets the value that is used to mirror the state input. */\n    _getInputMirrorValue(part) {\n        const input = part === 'start' ? this._startInput : this._endInput;\n        return input ? input.getMirrorValue() : '';\n    }\n    /** Whether the input placeholders should be hidden. */\n    _shouldHidePlaceholders() {\n        return this._startInput ? !this._startInput.isEmpty() : false;\n    }\n    /** Handles the value in one of the child inputs changing. */\n    _handleChildValueChange() {\n        this.stateChanges.next(undefined);\n        this._changeDetectorRef.markForCheck();\n    }\n    /** Opens the date range picker associated with the input. */\n    _openDatepicker() {\n        if (this._rangePicker) {\n            this._rangePicker.open();\n        }\n    }\n    /** Whether the separate text should be hidden. */\n    _shouldHideSeparator() {\n        return ((!this._formField ||\n            (this._formField.getLabelId() && !this._formField._shouldLabelFloat())) &&\n            this.empty);\n    }\n    /** Gets the value for the `aria-labelledby` attribute of the inputs. */\n    _getAriaLabelledby() {\n        const formField = this._formField;\n        return formField && formField._hasFloatingLabel() ? formField._labelId : null;\n    }\n    _getStartDateAccessibleName() {\n        return this._startInput._getAccessibleName();\n    }\n    _getEndDateAccessibleName() {\n        return this._endInput._getAccessibleName();\n    }\n    /** Updates the focused state of the range input. */\n    _updateFocus(origin) {\n        this.focused = origin !== null;\n        this.stateChanges.next();\n    }\n    /** Re-runs the validators on the start/end inputs. */\n    _revalidate() {\n        if (this._startInput) {\n            this._startInput._validatorOnChange();\n        }\n        if (this._endInput) {\n            this._endInput._validatorOnChange();\n        }\n    }\n    /** Registers the current date selection model with the start/end inputs. */\n    _registerModel(model) {\n        if (this._startInput) {\n            this._startInput._registerModel(model);\n        }\n        if (this._endInput) {\n            this._endInput._registerModel(model);\n        }\n    }\n    /** Checks whether a specific range input directive is required. */\n    _isTargetRequired(target) {\n        return target?.ngControl?.control?.hasValidator(Validators.required);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateRangeInput, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"16.1.0\", version: \"19.0.0\", type: MatDateRangeInput, isStandalone: true, selector: \"mat-date-range-input\", inputs: { rangePicker: \"rangePicker\", required: [\"required\", \"required\", booleanAttribute], dateFilter: \"dateFilter\", min: \"min\", max: \"max\", disabled: [\"disabled\", \"disabled\", booleanAttribute], separator: \"separator\", comparisonStart: \"comparisonStart\", comparisonEnd: \"comparisonEnd\" }, host: { attributes: { \"role\": \"group\" }, properties: { \"class.mat-date-range-input-hide-placeholders\": \"_shouldHidePlaceholders()\", \"class.mat-date-range-input-required\": \"required\", \"attr.id\": \"id\", \"attr.aria-labelledby\": \"_getAriaLabelledby()\", \"attr.aria-describedby\": \"_ariaDescribedBy\", \"attr.data-mat-calendar\": \"rangePicker ? rangePicker.id : null\" }, classAttribute: \"mat-date-range-input\" }, providers: [\n            { provide: MatFormFieldControl, useExisting: MatDateRangeInput },\n            { provide: MAT_DATE_RANGE_INPUT_PARENT, useExisting: MatDateRangeInput },\n        ], queries: [{ propertyName: \"_startInput\", first: true, predicate: MatStartDate, descendants: true }, { propertyName: \"_endInput\", first: true, predicate: MatEndDate, descendants: true }], exportAs: [\"matDateRangeInput\"], usesOnChanges: true, ngImport: i0, template: \"<div\\n  class=\\\"mat-date-range-input-container\\\"\\n  cdkMonitorSubtreeFocus\\n  (cdkFocusChange)=\\\"_updateFocus($event)\\\">\\n  <div class=\\\"mat-date-range-input-wrapper\\\">\\n    <ng-content select=\\\"input[matStartDate]\\\"></ng-content>\\n    <span\\n      class=\\\"mat-date-range-input-mirror\\\"\\n      aria-hidden=\\\"true\\\">{{_getInputMirrorValue('start')}}</span>\\n  </div>\\n\\n  <span\\n    class=\\\"mat-date-range-input-separator\\\"\\n    [class.mat-date-range-input-separator-hidden]=\\\"_shouldHideSeparator()\\\">{{separator}}</span>\\n\\n  <div class=\\\"mat-date-range-input-wrapper mat-date-range-input-end-wrapper\\\">\\n    <ng-content select=\\\"input[matEndDate]\\\"></ng-content>\\n    <span\\n      class=\\\"mat-date-range-input-mirror\\\"\\n      aria-hidden=\\\"true\\\">{{_getInputMirrorValue('end')}}</span>\\n  </div>\\n</div>\\n\\n\", styles: [\".mat-date-range-input{display:block;width:100%}.mat-date-range-input-container{display:flex;align-items:center}.mat-date-range-input-separator{transition:opacity 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);margin:0 4px;color:var(--mat-datepicker-range-input-separator-color, var(--mat-sys-on-surface))}.mat-form-field-disabled .mat-date-range-input-separator{color:var(--mat-datepicker-range-input-disabled-state-separator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}._mat-animation-noopable .mat-date-range-input-separator{transition:none}.mat-date-range-input-separator-hidden{-webkit-user-select:none;user-select:none;opacity:0;transition:none}.mat-date-range-input-wrapper{position:relative;overflow:hidden;max-width:calc(50% - 4px)}.mat-date-range-input-end-wrapper{flex-grow:1}.mat-date-range-input-inner{position:absolute;top:0;left:0;font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;vertical-align:bottom;text-align:inherit;-webkit-appearance:none;width:100%;height:100%}.mat-date-range-input-inner:-moz-ui-invalid{box-shadow:none}.mat-date-range-input-inner::placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-moz-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-webkit-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner:-ms-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner[disabled]{color:var(--mat-datepicker-range-input-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}@media(forced-colors: active){.mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{opacity:0}}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}@media(forced-colors: active){.mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{opacity:0}}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}@media(forced-colors: active){.mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{opacity:0}}.mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}@media(forced-colors: active){.mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{opacity:0}}._mat-animation-noopable .mat-date-range-input-inner::placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner::-moz-placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner:-ms-input-placeholder{transition:none}.mat-date-range-input-mirror{-webkit-user-select:none;user-select:none;visibility:hidden;white-space:nowrap;display:inline-block;min-width:2px}.mat-mdc-form-field-type-mat-date-range-input .mat-mdc-form-field-infix{width:200px}\"], dependencies: [{ kind: \"directive\", type: CdkMonitorFocus, selector: \"[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]\", outputs: [\"cdkFocusChange\"], exportAs: [\"cdkMonitorFocus\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateRangeInput, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-date-range-input', exportAs: 'matDateRangeInput', host: {\n                        'class': 'mat-date-range-input',\n                        '[class.mat-date-range-input-hide-placeholders]': '_shouldHidePlaceholders()',\n                        '[class.mat-date-range-input-required]': 'required',\n                        '[attr.id]': 'id',\n                        'role': 'group',\n                        '[attr.aria-labelledby]': '_getAriaLabelledby()',\n                        '[attr.aria-describedby]': '_ariaDescribedBy',\n                        // Used by the test harness to tie this input to its calendar. We can't depend on\n                        // `aria-owns` for this, because it's only defined while the calendar is open.\n                        '[attr.data-mat-calendar]': 'rangePicker ? rangePicker.id : null',\n                    }, changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, providers: [\n                        { provide: MatFormFieldControl, useExisting: MatDateRangeInput },\n                        { provide: MAT_DATE_RANGE_INPUT_PARENT, useExisting: MatDateRangeInput },\n                    ], imports: [CdkMonitorFocus], template: \"<div\\n  class=\\\"mat-date-range-input-container\\\"\\n  cdkMonitorSubtreeFocus\\n  (cdkFocusChange)=\\\"_updateFocus($event)\\\">\\n  <div class=\\\"mat-date-range-input-wrapper\\\">\\n    <ng-content select=\\\"input[matStartDate]\\\"></ng-content>\\n    <span\\n      class=\\\"mat-date-range-input-mirror\\\"\\n      aria-hidden=\\\"true\\\">{{_getInputMirrorValue('start')}}</span>\\n  </div>\\n\\n  <span\\n    class=\\\"mat-date-range-input-separator\\\"\\n    [class.mat-date-range-input-separator-hidden]=\\\"_shouldHideSeparator()\\\">{{separator}}</span>\\n\\n  <div class=\\\"mat-date-range-input-wrapper mat-date-range-input-end-wrapper\\\">\\n    <ng-content select=\\\"input[matEndDate]\\\"></ng-content>\\n    <span\\n      class=\\\"mat-date-range-input-mirror\\\"\\n      aria-hidden=\\\"true\\\">{{_getInputMirrorValue('end')}}</span>\\n  </div>\\n</div>\\n\\n\", styles: [\".mat-date-range-input{display:block;width:100%}.mat-date-range-input-container{display:flex;align-items:center}.mat-date-range-input-separator{transition:opacity 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);margin:0 4px;color:var(--mat-datepicker-range-input-separator-color, var(--mat-sys-on-surface))}.mat-form-field-disabled .mat-date-range-input-separator{color:var(--mat-datepicker-range-input-disabled-state-separator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}._mat-animation-noopable .mat-date-range-input-separator{transition:none}.mat-date-range-input-separator-hidden{-webkit-user-select:none;user-select:none;opacity:0;transition:none}.mat-date-range-input-wrapper{position:relative;overflow:hidden;max-width:calc(50% - 4px)}.mat-date-range-input-end-wrapper{flex-grow:1}.mat-date-range-input-inner{position:absolute;top:0;left:0;font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;vertical-align:bottom;text-align:inherit;-webkit-appearance:none;width:100%;height:100%}.mat-date-range-input-inner:-moz-ui-invalid{box-shadow:none}.mat-date-range-input-inner::placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-moz-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-webkit-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner:-ms-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner[disabled]{color:var(--mat-datepicker-range-input-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}@media(forced-colors: active){.mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{opacity:0}}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}@media(forced-colors: active){.mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{opacity:0}}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}@media(forced-colors: active){.mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{opacity:0}}.mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}@media(forced-colors: active){.mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{opacity:0}}._mat-animation-noopable .mat-date-range-input-inner::placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner::-moz-placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner:-ms-input-placeholder{transition:none}.mat-date-range-input-mirror{-webkit-user-select:none;user-select:none;visibility:hidden;white-space:nowrap;display:inline-block;min-width:2px}.mat-mdc-form-field-type-mat-date-range-input .mat-mdc-form-field-infix{width:200px}\"] }]\n        }], ctorParameters: () => [], propDecorators: { rangePicker: [{\n                type: Input\n            }], required: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], dateFilter: [{\n                type: Input\n            }], min: [{\n                type: Input\n            }], max: [{\n                type: Input\n            }], disabled: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], separator: [{\n                type: Input\n            }], comparisonStart: [{\n                type: Input\n            }], comparisonEnd: [{\n                type: Input\n            }], _startInput: [{\n                type: ContentChild,\n                args: [MatStartDate]\n            }], _endInput: [{\n                type: ContentChild,\n                args: [MatEndDate]\n            }] } });\n\n// TODO(mmalerba): We use a component instead of a directive here so the user can use implicit\n// template reference variables (e.g. #d vs #d=\"matDateRangePicker\"). We can change this to a\n// directive if angular adds support for `exportAs: '$implicit'` on directives.\n/** Component responsible for managing the date range picker popup/dialog. */\nclass MatDateRangePicker extends MatDatepickerBase {\n    _forwardContentValues(instance) {\n        super._forwardContentValues(instance);\n        const input = this.datepickerInput;\n        if (input) {\n            instance.comparisonStart = input.comparisonStart;\n            instance.comparisonEnd = input.comparisonEnd;\n            instance.startDateAccessibleName = input._getStartDateAccessibleName();\n            instance.endDateAccessibleName = input._getEndDateAccessibleName();\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateRangePicker, deps: null, target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDateRangePicker, isStandalone: true, selector: \"mat-date-range-picker\", providers: [\n            MAT_RANGE_DATE_SELECTION_MODEL_PROVIDER,\n            MAT_CALENDAR_RANGE_STRATEGY_PROVIDER,\n            { provide: MatDatepickerBase, useExisting: MatDateRangePicker },\n        ], exportAs: [\"matDateRangePicker\"], usesInheritance: true, ngImport: i0, template: '', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDateRangePicker, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'mat-date-range-picker',\n                    template: '',\n                    exportAs: 'matDateRangePicker',\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                    encapsulation: ViewEncapsulation.None,\n                    providers: [\n                        MAT_RANGE_DATE_SELECTION_MODEL_PROVIDER,\n                        MAT_CALENDAR_RANGE_STRATEGY_PROVIDER,\n                        { provide: MatDatepickerBase, useExisting: MatDateRangePicker },\n                    ],\n                }]\n        }] });\n\n/** Button that will close the datepicker and assign the current selection to the data model. */\nclass MatDatepickerApply {\n    _datepicker = inject(MatDatepickerBase);\n    constructor() { }\n    _applySelection() {\n        this._datepicker._applyPendingSelection();\n        this._datepicker.close();\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerApply, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDatepickerApply, isStandalone: true, selector: \"[matDatepickerApply], [matDateRangePickerApply]\", host: { listeners: { \"click\": \"_applySelection()\" } }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerApply, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matDatepickerApply], [matDateRangePickerApply]',\n                    host: { '(click)': '_applySelection()' },\n                }]\n        }], ctorParameters: () => [] });\n/** Button that will close the datepicker and discard the current selection. */\nclass MatDatepickerCancel {\n    _datepicker = inject(MatDatepickerBase);\n    constructor() { }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerCancel, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDatepickerCancel, isStandalone: true, selector: \"[matDatepickerCancel], [matDateRangePickerCancel]\", host: { listeners: { \"click\": \"_datepicker.close()\" } }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerCancel, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matDatepickerCancel], [matDateRangePickerCancel]',\n                    host: { '(click)': '_datepicker.close()' },\n                }]\n        }], ctorParameters: () => [] });\n/**\n * Container that can be used to project a row of action buttons\n * to the bottom of a datepicker or date range picker.\n */\nclass MatDatepickerActions {\n    _datepicker = inject(MatDatepickerBase);\n    _viewContainerRef = inject(ViewContainerRef);\n    _template;\n    _portal;\n    constructor() { }\n    ngAfterViewInit() {\n        this._portal = new TemplatePortal(this._template, this._viewContainerRef);\n        this._datepicker.registerActions(this._portal);\n    }\n    ngOnDestroy() {\n        this._datepicker.removeActions(this._portal);\n        // Needs to be null checked since we initialize it in `ngAfterViewInit`.\n        if (this._portal && this._portal.isAttached) {\n            this._portal?.detach();\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerActions, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatDatepickerActions, isStandalone: true, selector: \"mat-datepicker-actions, mat-date-range-picker-actions\", viewQueries: [{ propertyName: \"_template\", first: true, predicate: TemplateRef, descendants: true }], ngImport: i0, template: `\n    <ng-template>\n      <div class=\"mat-datepicker-actions\">\n        <ng-content></ng-content>\n      </div>\n    </ng-template>\n  `, isInline: true, styles: [\".mat-datepicker-actions{display:flex;justify-content:flex-end;align-items:center;padding:0 8px 8px 8px}.mat-datepicker-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-datepicker-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\"], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerActions, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-datepicker-actions, mat-date-range-picker-actions', template: `\n    <ng-template>\n      <div class=\"mat-datepicker-actions\">\n        <ng-content></ng-content>\n      </div>\n    </ng-template>\n  `, changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, styles: [\".mat-datepicker-actions{display:flex;justify-content:flex-end;align-items:center;padding:0 8px 8px 8px}.mat-datepicker-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-datepicker-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\"] }]\n        }], ctorParameters: () => [], propDecorators: { _template: [{\n                type: ViewChild,\n                args: [TemplateRef]\n            }] } });\n\nclass MatDatepickerModule {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerModule, deps: [], target: i0.FactoryTarget.NgModule });\n    static mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerModule, imports: [MatButtonModule,\n            OverlayModule,\n            A11yModule,\n            PortalModule,\n            MatCommonModule,\n            MatCalendar,\n            MatCalendarBody,\n            MatDatepicker,\n            MatDatepickerContent,\n            MatDatepickerInput,\n            MatDatepickerToggle,\n            MatDatepickerToggleIcon,\n            MatMonthView,\n            MatYearView,\n            MatMultiYearView,\n            MatCalendarHeader,\n            MatDateRangeInput,\n            MatStartDate,\n            MatEndDate,\n            MatDateRangePicker,\n            MatDatepickerActions,\n            MatDatepickerCancel,\n            MatDatepickerApply], exports: [CdkScrollableModule,\n            MatCalendar,\n            MatCalendarBody,\n            MatDatepicker,\n            MatDatepickerContent,\n            MatDatepickerInput,\n            MatDatepickerToggle,\n            MatDatepickerToggleIcon,\n            MatMonthView,\n            MatYearView,\n            MatMultiYearView,\n            MatCalendarHeader,\n            MatDateRangeInput,\n            MatStartDate,\n            MatEndDate,\n            MatDateRangePicker,\n            MatDatepickerActions,\n            MatDatepickerCancel,\n            MatDatepickerApply] });\n    static inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerModule, providers: [MatDatepickerIntl, MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY_PROVIDER], imports: [MatButtonModule,\n            OverlayModule,\n            A11yModule,\n            PortalModule,\n            MatCommonModule,\n            MatDatepickerContent,\n            MatDatepickerToggle,\n            MatCalendarHeader, CdkScrollableModule] });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatDatepickerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        MatButtonModule,\n                        OverlayModule,\n                        A11yModule,\n                        PortalModule,\n                        MatCommonModule,\n                        MatCalendar,\n                        MatCalendarBody,\n                        MatDatepicker,\n                        MatDatepickerContent,\n                        MatDatepickerInput,\n                        MatDatepickerToggle,\n                        MatDatepickerToggleIcon,\n                        MatMonthView,\n                        MatYearView,\n                        MatMultiYearView,\n                        MatCalendarHeader,\n                        MatDateRangeInput,\n                        MatStartDate,\n                        MatEndDate,\n                        MatDateRangePicker,\n                        MatDatepickerActions,\n                        MatDatepickerCancel,\n                        MatDatepickerApply,\n                    ],\n                    exports: [\n                        CdkScrollableModule,\n                        MatCalendar,\n                        MatCalendarBody,\n                        MatDatepicker,\n                        MatDatepickerContent,\n                        MatDatepickerInput,\n                        MatDatepickerToggle,\n                        MatDatepickerToggleIcon,\n                        MatMonthView,\n                        MatYearView,\n                        MatMultiYearView,\n                        MatCalendarHeader,\n                        MatDateRangeInput,\n                        MatStartDate,\n                        MatEndDate,\n                        MatDateRangePicker,\n                        MatDatepickerActions,\n                        MatDatepickerCancel,\n                        MatDatepickerApply,\n                    ],\n                    providers: [MatDatepickerIntl, MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY_PROVIDER],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DateRange, DefaultMatCalendarRangeStrategy, MAT_DATEPICKER_SCROLL_STRATEGY, MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY, MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY_PROVIDER, MAT_DATEPICKER_VALIDATORS, MAT_DATEPICKER_VALUE_ACCESSOR, MAT_DATE_RANGE_SELECTION_STRATEGY, MAT_RANGE_DATE_SELECTION_MODEL_FACTORY, MAT_RANGE_DATE_SELECTION_MODEL_PROVIDER, MAT_SINGLE_DATE_SELECTION_MODEL_FACTORY, MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER, MatCalendar, MatCalendarBody, MatCalendarCell, MatCalendarHeader, MatDateRangeInput, MatDateRangePicker, MatDateSelectionModel, MatDatepicker, MatDatepickerActions, MatDatepickerApply, MatDatepickerCancel, MatDatepickerContent, MatDatepickerInput, MatDatepickerInputEvent, MatDatepickerIntl, MatDatepickerModule, MatDatepickerToggle, MatDatepickerToggleIcon, MatEndDate, MatMonthView, MatMultiYearView, MatRangeDateSelectionModel, MatSingleDateSelectionModel, MatStartDate, MatYearView, matDatepickerAnimations, yearsPerPage, yearsPerRow };\n","import * as i0 from '@angular/core';\nimport { Directive, Input, InjectionToken, inject, LOCALE_ID, Optional, Inject, Injectable, EventEmitter, Component, ChangeDetectionStrategy, Output, ViewChild, TemplateRef, SkipSelf, forwardRef, Pipe, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { getLocaleFirstDayOfWeek, DOCUMENT, CommonModule } from '@angular/common';\nimport * as i4 from '@angular/cdk/a11y';\nimport { A11yModule } from '@angular/cdk/a11y';\nimport * as i1 from '@angular/cdk/overlay';\nimport { NoopScrollStrategy, Overlay, OverlayConfig, OverlayModule } from '@angular/cdk/overlay';\nimport { Subscription, of, merge, Subject, filter, take as take$1, defer } from 'rxjs';\nimport * as i2 from '@angular/cdk/portal';\nimport { BasePortalOutlet, CdkPortalOutlet, ComponentPortal, PortalInjector, PortalModule } from '@angular/cdk/portal';\nimport { ENTER, PAGE_DOWN, PAGE_UP, END, HOME, DOWN_ARROW, UP_ARROW, RIGHT_ARROW, LEFT_ARROW, SPACE, ESCAPE } from '@angular/cdk/keycodes';\nimport { coerceBooleanProperty, coerceNumberProperty, coerceArray } from '@angular/cdk/coercion';\nimport { take, debounceTime, startWith, filter as filter$1 } from 'rxjs/operators';\nimport { trigger, state, style, transition, group, query, animateChild, animate, keyframes } from '@angular/animations';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS, Validators } from '@angular/forms';\nimport * as i1$1 from '@angular/cdk/platform';\nimport { PlatformModule } from '@angular/cdk/platform';\n\n/**\n * date-time-picker-trigger.directive\n */\nclass OwlDateTimeTriggerDirective {\n    get disabled() {\n        return this._disabled === undefined ? this.dtPicker.disabled : !!this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = value;\n    }\n    get owlDTTriggerDisabledClass() {\n        return this.disabled;\n    }\n    constructor(changeDetector) {\n        this.changeDetector = changeDetector;\n        this.stateChanges = Subscription.EMPTY;\n    }\n    ngOnInit() {\n    }\n    ngOnChanges(changes) {\n        if (changes.datepicker) {\n            this.watchStateChanges();\n        }\n    }\n    ngAfterContentInit() {\n        this.watchStateChanges();\n    }\n    ngOnDestroy() {\n        this.stateChanges.unsubscribe();\n    }\n    handleClickOnHost(event) {\n        if (this.dtPicker) {\n            this.dtPicker.open();\n            event.stopPropagation();\n        }\n    }\n    watchStateChanges() {\n        this.stateChanges.unsubscribe();\n        const inputDisabled = this.dtPicker && this.dtPicker.dtInput ?\n            this.dtPicker.dtInput.disabledChange : of();\n        const pickerDisabled = this.dtPicker ?\n            this.dtPicker.disabledChange : of();\n        this.stateChanges = merge([pickerDisabled, inputDisabled])\n            .subscribe(() => {\n            this.changeDetector.markForCheck();\n        });\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeTriggerDirective, deps: [{ token: i0.ChangeDetectorRef }], target: i0.FactoryTarget.Directive }); }\n    static { this.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlDateTimeTriggerDirective, selector: \"[owlDateTimeTrigger]\", inputs: { dtPicker: [\"owlDateTimeTrigger\", \"dtPicker\"], disabled: \"disabled\" }, host: { listeners: { \"click\": \"handleClickOnHost($event)\" }, properties: { \"class.owl-dt-trigger-disabled\": \"owlDTTriggerDisabledClass\" } }, usesOnChanges: true, ngImport: i0 }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeTriggerDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[owlDateTimeTrigger]',\n                    host: {\n                        '(click)': 'handleClickOnHost($event)',\n                        '[class.owl-dt-trigger-disabled]': 'owlDTTriggerDisabledClass'\n                    }\n                }]\n        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }], propDecorators: { dtPicker: [{\n                type: Input,\n                args: ['owlDateTimeTrigger']\n            }], disabled: [{\n                type: Input\n            }] } });\n\n/**\n * date-time-format.class\n */\n/** InjectionToken for date time picker that can be used to override default format. */\nconst OWL_DATE_TIME_FORMATS = new InjectionToken('OWL_DATE_TIME_FORMATS');\n\n/**\n * date-time-adapter.class\n */\n/** InjectionToken for date time picker that can be used to override default locale code. */\nconst OWL_DATE_TIME_LOCALE = new InjectionToken('OWL_DATE_TIME_LOCALE', {\n    providedIn: 'root',\n    factory: OWL_DATE_TIME_LOCALE_FACTORY\n});\n/** @docs-private */\nfunction OWL_DATE_TIME_LOCALE_FACTORY() {\n    return inject(LOCALE_ID);\n}\n/** Provider for OWL_DATE_TIME_LOCALE injection token. */\nconst OWL_DATE_TIME_LOCALE_PROVIDER = {\n    provide: OWL_DATE_TIME_LOCALE,\n    useExisting: LOCALE_ID\n};\nclass DateTimeAdapter {\n    constructor() {\n        /** A stream that emits when the locale changes. */\n        this._localeChanges = new Subject();\n        /** total milliseconds in a day. */\n        this.millisecondsInDay = 86400000;\n        /** total milliseconds in a minute. */\n        this.milliseondsInMinute = 60000;\n    }\n    get localeChanges() {\n        return this._localeChanges;\n    }\n    /**\n     * Compare two given dates\n     * 1 if the first date is after the second,\n     * -1 if the first date is before the second\n     * 0 if dates are equal.\n     * */\n    compare(first, second) {\n        if (!this.isValid(first) || !this.isValid(second)) {\n            throw Error('JSNativeDate: Cannot compare invalid dates.');\n        }\n        const dateFirst = this.clone(first);\n        const dateSecond = this.clone(second);\n        const diff = this.getTime(dateFirst) - this.getTime(dateSecond);\n        if (diff < 0) {\n            return -1;\n        }\n        else if (diff > 0) {\n            return 1;\n        }\n        else {\n            // Return 0 if diff is 0; return NaN if diff is NaN\n            return diff;\n        }\n    }\n    /**\n     * Check if two given dates are in the same year\n     * 1 if the first date's year is after the second,\n     * -1 if the first date's year is before the second\n     * 0 if two given dates are in the same year\n     * */\n    compareYear(first, second) {\n        if (!this.isValid(first) || !this.isValid(second)) {\n            throw Error('JSNativeDate: Cannot compare invalid dates.');\n        }\n        const yearLeft = this.getYear(first);\n        const yearRight = this.getYear(second);\n        const diff = yearLeft - yearRight;\n        if (diff < 0) {\n            return -1;\n        }\n        else if (diff > 0) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * Attempts to deserialize a value to a valid date object. This is different from parsing in that\n     * deserialize should only accept non-ambiguous, locale-independent formats (e.g. a ISO 8601\n     * string). The default implementation does not allow any deserialization, it simply checks that\n     * the given value is already a valid date object or null. The `<mat-datepicker>` will call this\n     * method on all of it's `@Input()` properties that accept dates. It is therefore possible to\n     * support passing values from your backend directly to these properties by overriding this method\n     * to also deserialize the format used by your backend.\n     */\n    deserialize(value) {\n        if (value == null ||\n            (this.isDateInstance(value) && this.isValid(value))) {\n            return value;\n        }\n        return this.invalid();\n    }\n    /**\n     * Sets the locale used for all dates.\n     */\n    setLocale(locale) {\n        this.locale = locale;\n        this._localeChanges.next(locale);\n    }\n    /**\n    * Get the locale used for all dates.\n    * */\n    getLocale() {\n        return this.locale;\n    }\n    /**\n     * Clamp the given date between min and max dates.\n     */\n    clampDate(date, min, max) {\n        if (min && this.compare(date, min) < 0) {\n            return min;\n        }\n        if (max && this.compare(date, max) > 0) {\n            return max;\n        }\n        return date;\n    }\n}\n\n/**\n * date-time.class\n */\nlet nextUniqueId = 0;\nvar DateView;\n(function (DateView) {\n    DateView[\"MONTH\"] = \"month\";\n    DateView[\"YEAR\"] = \"year\";\n    DateView[\"MULTI_YEARS\"] = \"multi-years\";\n})(DateView || (DateView = {}));\nclass OwlDateTime {\n    get showSecondsTimer() {\n        return this._showSecondsTimer;\n    }\n    set showSecondsTimer(val) {\n        this._showSecondsTimer = coerceBooleanProperty(val);\n    }\n    get hour12Timer() {\n        return this._hour12Timer;\n    }\n    set hour12Timer(val) {\n        this._hour12Timer = coerceBooleanProperty(val);\n    }\n    get stepHour() {\n        return this._stepHour;\n    }\n    set stepHour(val) {\n        this._stepHour = coerceNumberProperty(val, 1);\n    }\n    get stepMinute() {\n        return this._stepMinute;\n    }\n    set stepMinute(val) {\n        this._stepMinute = coerceNumberProperty(val, 1);\n    }\n    get stepSecond() {\n        return this._stepSecond;\n    }\n    set stepSecond(val) {\n        this._stepSecond = coerceNumberProperty(val, 1);\n    }\n    get firstDayOfWeek() {\n        return this._firstDayOfWeek;\n    }\n    set firstDayOfWeek(value) {\n        value = coerceNumberProperty(value);\n        if (value > 6 || value < 0) {\n            this._firstDayOfWeek = undefined;\n        }\n        else {\n            this._firstDayOfWeek = value;\n        }\n    }\n    get hideOtherMonths() {\n        return this._hideOtherMonths;\n    }\n    set hideOtherMonths(val) {\n        this._hideOtherMonths = coerceBooleanProperty(val);\n    }\n    get id() {\n        return this._id;\n    }\n    get formatString() {\n        return this.pickerType === 'both'\n            ? this.dateTimeFormats.fullPickerInput\n            : this.pickerType === 'calendar'\n                ? this.dateTimeFormats.datePickerInput\n                : this.dateTimeFormats.timePickerInput;\n    }\n    get disabled() {\n        return false;\n    }\n    constructor(dateTimeAdapter, dateTimeFormats) {\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.dateTimeFormats = dateTimeFormats;\n        /**\n         * Whether to show the second's timer\n         */\n        this._showSecondsTimer = false;\n        /**\n         * Whether the timer is in hour12 format\n         */\n        this._hour12Timer = false;\n        /**\n         * The view that the calendar should start in.\n         */\n        this.startView = DateView.MONTH;\n        /**\n         * Whether to show calendar weeks in the calendar\n         * */\n        this.showCalendarWeeks = false;\n        /**\n         * Whether to should only the year and multi-year views.\n         */\n        this.yearOnly = false;\n        /**\n         * Whether to should only the multi-year view.\n         */\n        this.multiyearOnly = false;\n        /**\n         * Hours to change per step\n         */\n        this._stepHour = 1;\n        /**\n         * Minutes to change per step\n         */\n        this._stepMinute = 1;\n        /**\n         * Seconds to change per step\n         */\n        this._stepSecond = 1;\n        /**\n         * Whether to hide dates in other months at the start or end of the current month.\n         */\n        this._hideOtherMonths = false;\n        /**\n         * Date Time Checker to check if the give dateTime is selectable\n         */\n        this.dateTimeChecker = (dateTime) => {\n            return (!!dateTime &&\n                (!this.dateTimeFilter || this.dateTimeFilter(dateTime)) &&\n                (!this.minDateTime ||\n                    this.dateTimeAdapter.compare(dateTime, this.minDateTime) >=\n                        0) &&\n                (!this.maxDateTime ||\n                    this.dateTimeAdapter.compare(dateTime, this.maxDateTime) <= 0));\n        };\n        if (!this.dateTimeAdapter) {\n            throw Error(`OwlDateTimePicker: No provider found for DateTimeAdapter. You must import one of the following ` +\n                `modules at your application root: OwlNativeDateTimeModule, OwlMomentDateTimeModule, or provide a ` +\n                `custom implementation.`);\n        }\n        if (!this.dateTimeFormats) {\n            throw Error(`OwlDateTimePicker: No provider found for OWL_DATE_TIME_FORMATS. You must import one of the following ` +\n                `modules at your application root: OwlNativeDateTimeModule, OwlMomentDateTimeModule, or provide a ` +\n                `custom implementation.`);\n        }\n        this._id = `owl-dt-picker-${nextUniqueId++}`;\n    }\n    getValidDate(obj) {\n        return this.dateTimeAdapter.isDateInstance(obj) &&\n            this.dateTimeAdapter.isValid(obj)\n            ? obj\n            : null;\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTime, deps: [{ token: DateTimeAdapter, optional: true }, { token: OWL_DATE_TIME_FORMATS, optional: true }], target: i0.FactoryTarget.Directive }); }\n    static { this.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlDateTime, inputs: { showSecondsTimer: \"showSecondsTimer\", hour12Timer: \"hour12Timer\", startView: \"startView\", showCalendarWeeks: \"showCalendarWeeks\", yearOnly: \"yearOnly\", multiyearOnly: \"multiyearOnly\", stepHour: \"stepHour\", stepMinute: \"stepMinute\", stepSecond: \"stepSecond\", firstDayOfWeek: \"firstDayOfWeek\", hideOtherMonths: \"hideOtherMonths\" }, ngImport: i0 }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTime, decorators: [{\n            type: Directive\n        }], ctorParameters: () => [{ type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_FORMATS]\n                }] }], propDecorators: { showSecondsTimer: [{\n                type: Input\n            }], hour12Timer: [{\n                type: Input\n            }], startView: [{\n                type: Input\n            }], showCalendarWeeks: [{\n                type: Input\n            }], yearOnly: [{\n                type: Input\n            }], multiyearOnly: [{\n                type: Input\n            }], stepHour: [{\n                type: Input\n            }], stepMinute: [{\n                type: Input\n            }], stepSecond: [{\n                type: Input\n            }], firstDayOfWeek: [{\n                type: Input\n            }], hideOtherMonths: [{\n                type: Input\n            }] } });\n\n/**\n * date-time-picker-intl.service\n */\nclass OwlDateTimeIntl {\n    constructor() {\n        /**\n         * Stream that emits whenever the labels here are changed. Use this to notify\n         * components if the labels have changed after initialization.\n         */\n        this.changes = new Subject();\n        /** A label for the up second button (used by screen readers).  */\n        this.upSecondLabel = 'Add a second';\n        /** A label for the down second button (used by screen readers).  */\n        this.downSecondLabel = 'Minus a second';\n        /** A label for the up minute button (used by screen readers).  */\n        this.upMinuteLabel = 'Add a minute';\n        /** A label for the down minute button (used by screen readers).  */\n        this.downMinuteLabel = 'Minus a minute';\n        /** A label for the up hour button (used by screen readers).  */\n        this.upHourLabel = 'Add a hour';\n        /** A label for the down hour button (used by screen readers).  */\n        this.downHourLabel = 'Minus a hour';\n        /** A label for the previous month button (used by screen readers). */\n        this.prevMonthLabel = 'Previous month';\n        /** A label for the next month button (used by screen readers). */\n        this.nextMonthLabel = 'Next month';\n        /** A label for the previous year button (used by screen readers). */\n        this.prevYearLabel = 'Previous year';\n        /** A label for the next year button (used by screen readers). */\n        this.nextYearLabel = 'Next year';\n        /** A label for the previous multi-year button (used by screen readers). */\n        this.prevMultiYearLabel = 'Previous 21 years';\n        /** A label for the next multi-year button (used by screen readers). */\n        this.nextMultiYearLabel = 'Next 21 years';\n        /** A label for the 'switch to month view' button (used by screen readers). */\n        this.switchToMonthViewLabel = 'Change to month view';\n        /** A label for the 'switch to year view' button (used by screen readers). */\n        this.switchToMultiYearViewLabel = 'Choose month and year';\n        /** A label for the cancel button */\n        this.cancelBtnLabel = 'Cancel';\n        /** A label for the set button */\n        this.setBtnLabel = 'Set';\n        /** A label for the range 'from' in picker info */\n        this.rangeFromLabel = 'From';\n        /** A label for the range 'to' in picker info */\n        this.rangeToLabel = 'To';\n        /** A label for the hour12 button (AM) */\n        this.hour12AMLabel = 'AM';\n        /** A label for the hour12 button (PM) */\n        this.hour12PMLabel = 'PM';\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeIntl, deps: [], target: i0.FactoryTarget.Injectable }); }\n    static { this.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeIntl, providedIn: 'root' }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeIntl, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\n/**\n * calendar-body.component\n */\nclass CalendarCell {\n    constructor(value, displayValue, ariaLabel, enabled, out = false, cellClass = '') {\n        this.value = value;\n        this.displayValue = displayValue;\n        this.ariaLabel = ariaLabel;\n        this.enabled = enabled;\n        this.out = out;\n        this.cellClass = cellClass;\n    }\n}\nclass OwlCalendarBodyComponent {\n    get owlDTCalendarBodyClass() {\n        return true;\n    }\n    get isInSingleMode() {\n        return this.selectMode === 'single';\n    }\n    get isInRangeMode() {\n        return (this.selectMode === 'range' ||\n            this.selectMode === 'rangeFrom' ||\n            this.selectMode === 'rangeTo');\n    }\n    constructor(elmRef, ngZone) {\n        this.elmRef = elmRef;\n        this.ngZone = ngZone;\n        /**\n         * The cell number of the active cell in the table.\n         */\n        this.activeCell = 0;\n        /**\n         * The number of columns in the table.\n         * */\n        this.numCols = 7;\n        /**\n         * The ratio (width / height) to use for the cells in the table.\n         */\n        this.cellRatio = 1;\n        /**\n         * Emit when a calendar cell is selected\n         * */\n        this.select = new EventEmitter();\n    }\n    ngOnInit() { }\n    selectCell(cell) {\n        this.select.emit(cell);\n    }\n    isActiveCell(rowIndex, colIndex) {\n        const cellNumber = rowIndex * this.numCols + colIndex;\n        return cellNumber === this.activeCell;\n    }\n    /**\n     * Check if the cell is selected\n     */\n    isSelected(value) {\n        if (!this.selectedValues || this.selectedValues.length === 0) {\n            return false;\n        }\n        if (this.isInSingleMode) {\n            return value === this.selectedValues[0];\n        }\n        if (this.isInRangeMode) {\n            const fromValue = this.selectedValues[0];\n            const toValue = this.selectedValues[1];\n            return value === fromValue || value === toValue;\n        }\n    }\n    /**\n     * Check if the cell in the range\n     * */\n    isInRange(value) {\n        if (this.isInRangeMode) {\n            const fromValue = this.selectedValues[0];\n            const toValue = this.selectedValues[1];\n            if (fromValue !== null && toValue !== null) {\n                return value >= fromValue && value <= toValue;\n            }\n            else {\n                return value === fromValue || value === toValue;\n            }\n        }\n    }\n    /**\n     * Check if the cell is the range from\n     * */\n    isRangeFrom(value) {\n        if (this.isInRangeMode) {\n            const fromValue = this.selectedValues[0];\n            return fromValue !== null && value === fromValue;\n        }\n    }\n    /**\n     * Check if the cell is the range to\n     * */\n    isRangeTo(value) {\n        if (this.isInRangeMode) {\n            const toValue = this.selectedValues[1];\n            return toValue !== null && value === toValue;\n        }\n    }\n    /**\n     * Focus to a active cell\n     * */\n    focusActiveCell() {\n        this.ngZone.runOutsideAngular(() => {\n            this.ngZone.onStable\n                .asObservable()\n                .pipe(take(1))\n                .subscribe(() => {\n                this.elmRef.nativeElement\n                    .querySelector('.owl-dt-calendar-cell-active')\n                    .focus();\n            });\n        });\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlCalendarBodyComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlCalendarBodyComponent, selector: \"[owl-date-time-calendar-body]\", inputs: { activeCell: \"activeCell\", rows: \"rows\", numCols: \"numCols\", cellRatio: \"cellRatio\", todayValue: \"todayValue\", selectedValues: \"selectedValues\", selectMode: \"selectMode\" }, outputs: { select: \"select\" }, host: { properties: { \"class.owl-dt-calendar-body\": \"owlDTCalendarBodyClass\" } }, exportAs: [\"owlDateTimeCalendarBody\"], ngImport: i0, template: \"<tr *ngFor=\\\"let row of rows; let rowIndex = index\\\" role=\\\"row\\\">\\n    <td *ngFor=\\\"let item of row; let colIndex = index\\\"\\n        class=\\\"owl-dt-calendar-cell {{item.cellClass}}\\\"\\n        [tabindex]=\\\"isActiveCell(rowIndex, colIndex) ? 0 : -1\\\"\\n        [class.owl-dt-calendar-cell-active]=\\\"isActiveCell(rowIndex, colIndex)\\\"\\n        [class.owl-dt-calendar-cell-disabled]=\\\"!item.enabled\\\"\\n        [class.owl-dt-calendar-cell-in-range]=\\\"isInRange(item.value)\\\"\\n        [class.owl-dt-calendar-cell-range-from]=\\\"isRangeFrom(item.value)\\\"\\n        [class.owl-dt-calendar-cell-range-to]=\\\"isRangeTo(item.value)\\\"\\n        [attr.aria-label]=\\\"item.ariaLabel\\\"\\n        [attr.aria-disabled]=\\\"!item.enabled || null\\\"\\n        [attr.aria-current]=\\\"item.value === todayValue ? 'date' : null\\\"\\n        [attr.aria-selected]=\\\"isSelected(item.value)\\\"\\n        [style.width.%]=\\\"100 / numCols\\\"\\n        [style.paddingTop.%]=\\\"50 * cellRatio / numCols\\\"\\n        [style.paddingBottom.%]=\\\"50 * cellRatio / numCols\\\"\\n        (click)=\\\"selectCell(item)\\\">\\n        <span class=\\\"owl-dt-calendar-cell-content\\\"\\n              [ngClass]=\\\"{\\n                'owl-dt-calendar-cell-out': item.out,\\n                'owl-dt-calendar-cell-today': item.value === todayValue,\\n                'owl-dt-calendar-cell-selected': isSelected(item.value)\\n              }\\\">\\n            {{item.displayValue}}\\n        </span>\\n    </td>\\n</tr>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlCalendarBodyComponent, decorators: [{\n            type: Component,\n            args: [{ selector: '[owl-date-time-calendar-body]', exportAs: 'owlDateTimeCalendarBody', host: {\n                        '[class.owl-dt-calendar-body]': 'owlDTCalendarBodyClass'\n                    }, preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, template: \"<tr *ngFor=\\\"let row of rows; let rowIndex = index\\\" role=\\\"row\\\">\\n    <td *ngFor=\\\"let item of row; let colIndex = index\\\"\\n        class=\\\"owl-dt-calendar-cell {{item.cellClass}}\\\"\\n        [tabindex]=\\\"isActiveCell(rowIndex, colIndex) ? 0 : -1\\\"\\n        [class.owl-dt-calendar-cell-active]=\\\"isActiveCell(rowIndex, colIndex)\\\"\\n        [class.owl-dt-calendar-cell-disabled]=\\\"!item.enabled\\\"\\n        [class.owl-dt-calendar-cell-in-range]=\\\"isInRange(item.value)\\\"\\n        [class.owl-dt-calendar-cell-range-from]=\\\"isRangeFrom(item.value)\\\"\\n        [class.owl-dt-calendar-cell-range-to]=\\\"isRangeTo(item.value)\\\"\\n        [attr.aria-label]=\\\"item.ariaLabel\\\"\\n        [attr.aria-disabled]=\\\"!item.enabled || null\\\"\\n        [attr.aria-current]=\\\"item.value === todayValue ? 'date' : null\\\"\\n        [attr.aria-selected]=\\\"isSelected(item.value)\\\"\\n        [style.width.%]=\\\"100 / numCols\\\"\\n        [style.paddingTop.%]=\\\"50 * cellRatio / numCols\\\"\\n        [style.paddingBottom.%]=\\\"50 * cellRatio / numCols\\\"\\n        (click)=\\\"selectCell(item)\\\">\\n        <span class=\\\"owl-dt-calendar-cell-content\\\"\\n              [ngClass]=\\\"{\\n                'owl-dt-calendar-cell-out': item.out,\\n                'owl-dt-calendar-cell-today': item.value === todayValue,\\n                'owl-dt-calendar-cell-selected': isSelected(item.value)\\n              }\\\">\\n            {{item.displayValue}}\\n        </span>\\n    </td>\\n</tr>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: i0.NgZone }], propDecorators: { activeCell: [{\n                type: Input\n            }], rows: [{\n                type: Input\n            }], numCols: [{\n                type: Input\n            }], cellRatio: [{\n                type: Input\n            }], todayValue: [{\n                type: Input\n            }], selectedValues: [{\n                type: Input\n            }], selectMode: [{\n                type: Input\n            }], select: [{\n                type: Output\n            }] } });\n\nfunction defaultOptionsFactory() {\n    return DefaultOptions.create();\n}\nfunction multiYearOptionsFactory(options) {\n    return options.multiYear;\n}\nclass DefaultOptions {\n    static create() {\n        // Always return new instance\n        return {\n            multiYear: {\n                yearRows: 7,\n                yearsPerRow: 3\n            }\n        };\n    }\n}\nclass OptionsTokens {\n    static { this.all = new InjectionToken('All options token'); }\n    static { this.multiYear = new InjectionToken('Grid view options token'); }\n}\nconst optionsProviders = [\n    {\n        provide: OptionsTokens.all,\n        useFactory: defaultOptionsFactory,\n    },\n    {\n        provide: OptionsTokens.multiYear,\n        useFactory: multiYearOptionsFactory,\n        deps: [OptionsTokens.all],\n    },\n];\n\n/**\n * calendar-multi-year-view.component\n */\nclass OwlMultiYearViewComponent {\n    get selectMode() {\n        return this._selectMode;\n    }\n    set selectMode(val) {\n        this._selectMode = val;\n        if (this.initiated) {\n            this.setSelectedYears();\n            this.cdRef.markForCheck();\n        }\n    }\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        const oldSelected = this._selected;\n        value = this.dateTimeAdapter.deserialize(value);\n        this._selected = this.getValidDate(value);\n        if (!this.dateTimeAdapter.isSameDay(oldSelected, this._selected)) {\n            this.setSelectedYears();\n        }\n    }\n    get selecteds() {\n        return this._selecteds;\n    }\n    set selecteds(values) {\n        this._selecteds = values.map((v) => {\n            v = this.dateTimeAdapter.deserialize(v);\n            return this.getValidDate(v);\n        });\n        this.setSelectedYears();\n    }\n    get pickerMoment() {\n        return this._pickerMoment;\n    }\n    set pickerMoment(value) {\n        const oldMoment = this._pickerMoment;\n        value = this.dateTimeAdapter.deserialize(value);\n        this._pickerMoment = this.getValidDate(value) || this.dateTimeAdapter.now();\n        if (oldMoment && this._pickerMoment &&\n            !this.isSameYearList(oldMoment, this._pickerMoment)) {\n            this.generateYearList();\n        }\n    }\n    get dateFilter() {\n        return this._dateFilter;\n    }\n    set dateFilter(filter) {\n        this._dateFilter = filter;\n        if (this.initiated) {\n            this.generateYearList();\n        }\n    }\n    get minDate() {\n        return this._minDate;\n    }\n    set minDate(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._minDate = this.getValidDate(value);\n        if (this.initiated) {\n            this.generateYearList();\n        }\n    }\n    get maxDate() {\n        return this._maxDate;\n    }\n    set maxDate(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._maxDate = this.getValidDate(value);\n        if (this.initiated) {\n            this.generateYearList();\n        }\n    }\n    get todayYear() {\n        return this._todayYear;\n    }\n    get years() {\n        return this._years;\n    }\n    get selectedYears() {\n        return this._selectedYears;\n    }\n    get isInSingleMode() {\n        return this.selectMode === 'single';\n    }\n    get isInRangeMode() {\n        return this.selectMode === 'range' || this.selectMode === 'rangeFrom'\n            || this.selectMode === 'rangeTo';\n    }\n    get activeCell() {\n        if (this._pickerMoment) {\n            return this.dateTimeAdapter.getYear(this._pickerMoment) % (this.options.yearsPerRow * this.options.yearRows);\n        }\n    }\n    get tableHeader() {\n        if (this._years && this._years.length > 0) {\n            return `${this._years[0][0].displayValue} - ${this._years[this.options.yearRows - 1][this.options.yearsPerRow - 1].displayValue}`;\n        }\n    }\n    get prevButtonLabel() {\n        return this.pickerIntl.prevMultiYearLabel;\n    }\n    get nextButtonLabel() {\n        return this.pickerIntl.nextMultiYearLabel;\n    }\n    get owlDTCalendarView() {\n        return true;\n    }\n    get owlDTCalendarMultiYearView() {\n        return true;\n    }\n    constructor(cdRef, pickerIntl, dateTimeAdapter, options) {\n        this.cdRef = cdRef;\n        this.pickerIntl = pickerIntl;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.options = options;\n        /**\n         * The select mode of the picker;\n         * */\n        this._selectMode = 'single';\n        this._selecteds = [];\n        this.initiated = false;\n        /**\n         * Callback to invoke when a new month is selected\n         * */\n        this.change = new EventEmitter();\n        /**\n         * Emits the selected year. This doesn't imply a change on the selected date\n         * */\n        this.yearSelected = new EventEmitter();\n        /** Emits when any date is activated. */\n        this.pickerMomentChange = new EventEmitter();\n        /** Emits when use keyboard enter to select a calendar cell */\n        this.keyboardEnter = new EventEmitter();\n    }\n    ngOnInit() {\n    }\n    ngAfterContentInit() {\n        this._todayYear = this.dateTimeAdapter.getYear(this.dateTimeAdapter.now());\n        this.generateYearList();\n        this.initiated = true;\n    }\n    /**\n     * Handle a calendarCell selected\n     */\n    selectCalendarCell(cell) {\n        this.selectYear(cell.value);\n    }\n    selectYear(year) {\n        this.yearSelected.emit(this.dateTimeAdapter.createDate(year, 0, 1));\n        const firstDateOfMonth = this.dateTimeAdapter.createDate(year, this.dateTimeAdapter.getMonth(this.pickerMoment), 1);\n        const daysInMonth = this.dateTimeAdapter.getNumDaysInMonth(firstDateOfMonth);\n        const selected = this.dateTimeAdapter.createDate(year, this.dateTimeAdapter.getMonth(this.pickerMoment), Math.min(daysInMonth, this.dateTimeAdapter.getDate(this.pickerMoment)), this.dateTimeAdapter.getHours(this.pickerMoment), this.dateTimeAdapter.getMinutes(this.pickerMoment), this.dateTimeAdapter.getSeconds(this.pickerMoment));\n        this.change.emit(selected);\n    }\n    /**\n     * Generate the previous year list\n     * */\n    prevYearList(event) {\n        this._pickerMoment = this.dateTimeAdapter.addCalendarYears(this.pickerMoment, -1 * this.options.yearsPerRow * this.options.yearRows);\n        this.generateYearList();\n        event.preventDefault();\n    }\n    /**\n     * Generate the next year list\n     * */\n    nextYearList(event) {\n        this._pickerMoment = this.dateTimeAdapter.addCalendarYears(this.pickerMoment, this.options.yearsPerRow * this.options.yearRows);\n        this.generateYearList();\n        event.preventDefault();\n    }\n    generateYearList() {\n        this._years = [];\n        const pickerMomentYear = this.dateTimeAdapter.getYear(this._pickerMoment);\n        const offset = pickerMomentYear % (this.options.yearsPerRow * this.options.yearRows);\n        for (let i = 0; i < this.options.yearRows; i++) {\n            const row = [];\n            for (let j = 0; j < this.options.yearsPerRow; j++) {\n                const year = pickerMomentYear - offset + (j + i * this.options.yearsPerRow);\n                const yearCell = this.createYearCell(year);\n                row.push(yearCell);\n            }\n            this._years.push(row);\n        }\n        return;\n    }\n    /** Whether the previous period button is enabled. */\n    previousEnabled() {\n        if (!this.minDate) {\n            return true;\n        }\n        return !this.minDate || !this.isSameYearList(this._pickerMoment, this.minDate);\n    }\n    /** Whether the next period button is enabled. */\n    nextEnabled() {\n        return !this.maxDate || !this.isSameYearList(this._pickerMoment, this.maxDate);\n    }\n    handleCalendarKeydown(event) {\n        let moment;\n        switch (event.keyCode) {\n            // minus 1 year\n            case LEFT_ARROW:\n                moment = this.dateTimeAdapter.addCalendarYears(this._pickerMoment, -1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 1 year\n            case RIGHT_ARROW:\n                moment = this.dateTimeAdapter.addCalendarYears(this._pickerMoment, 1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // minus 3 years\n            case UP_ARROW:\n                moment = this.dateTimeAdapter.addCalendarYears(this._pickerMoment, -1 * this.options.yearsPerRow);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 3 years\n            case DOWN_ARROW:\n                moment = this.dateTimeAdapter.addCalendarYears(this._pickerMoment, this.options.yearsPerRow);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // go to the first year of the year page\n            case HOME:\n                moment = this.dateTimeAdapter.addCalendarYears(this._pickerMoment, -this.dateTimeAdapter.getYear(this._pickerMoment) % (this.options.yearsPerRow * this.options.yearRows));\n                this.pickerMomentChange.emit(moment);\n                break;\n            // go to the last year of the year page\n            case END:\n                moment = this.dateTimeAdapter.addCalendarYears(this._pickerMoment, (this.options.yearsPerRow * this.options.yearRows) - this.dateTimeAdapter.getYear(this._pickerMoment) % (this.options.yearsPerRow * this.options.yearRows) - 1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // minus 1 year page (or 10 year pages)\n            case PAGE_UP:\n                moment = this.dateTimeAdapter.addCalendarYears(this.pickerMoment, event.altKey ? -10 * (this.options.yearsPerRow * this.options.yearRows) : -1 * (this.options.yearsPerRow * this.options.yearRows));\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 1 year page (or 10 year pages)\n            case PAGE_DOWN:\n                moment = this.dateTimeAdapter.addCalendarYears(this.pickerMoment, event.altKey ? 10 * (this.options.yearsPerRow * this.options.yearRows) : (this.options.yearsPerRow * this.options.yearRows));\n                this.pickerMomentChange.emit(moment);\n                break;\n            case ENTER:\n                this.selectYear(this.dateTimeAdapter.getYear(this._pickerMoment));\n                this.keyboardEnter.emit();\n                break;\n            default:\n                return;\n        }\n        this.focusActiveCell();\n        event.preventDefault();\n    }\n    /**\n     * Creates an CalendarCell for the given year.\n     */\n    createYearCell(year) {\n        const startDateOfYear = this.dateTimeAdapter.createDate(year, 0, 1);\n        const ariaLabel = this.dateTimeAdapter.getYearName(startDateOfYear);\n        const cellClass = 'owl-dt-year-' + year;\n        return new CalendarCell(year, year.toString(), ariaLabel, this.isYearEnabled(year), false, cellClass);\n    }\n    setSelectedYears() {\n        this._selectedYears = [];\n        if (this.isInSingleMode && this.selected) {\n            this._selectedYears[0] = this.dateTimeAdapter.getYear(this.selected);\n        }\n        if (this.isInRangeMode && this.selecteds) {\n            this._selectedYears = this.selecteds.map((selected) => {\n                if (this.dateTimeAdapter.isValid(selected)) {\n                    return this.dateTimeAdapter.getYear(selected);\n                }\n                else {\n                    return null;\n                }\n            });\n        }\n    }\n    /** Whether the given year is enabled. */\n    isYearEnabled(year) {\n        // disable if the year is greater than maxDate lower than minDate\n        if (year === undefined || year === null ||\n            (this.maxDate && year > this.dateTimeAdapter.getYear(this.maxDate)) ||\n            (this.minDate && year < this.dateTimeAdapter.getYear(this.minDate))) {\n            return false;\n        }\n        // enable if it reaches here and there's no filter defined\n        if (!this.dateFilter) {\n            return true;\n        }\n        const firstOfYear = this.dateTimeAdapter.createDate(year, 0, 1);\n        // If any date in the year is enabled count the year as enabled.\n        for (let date = firstOfYear; this.dateTimeAdapter.getYear(date) === year; date = this.dateTimeAdapter.addCalendarDays(date, 1)) {\n            if (this.dateFilter(date)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isSameYearList(date1, date2) {\n        return Math.floor(this.dateTimeAdapter.getYear(date1) / (this.options.yearsPerRow * this.options.yearRows)) ===\n            Math.floor(this.dateTimeAdapter.getYear(date2) / (this.options.yearsPerRow * this.options.yearRows));\n    }\n    /**\n     * Get a valid date object\n     */\n    getValidDate(obj) {\n        return (this.dateTimeAdapter.isDateInstance(obj) && this.dateTimeAdapter.isValid(obj)) ? obj : null;\n    }\n    focusActiveCell() {\n        this.calendarBodyElm.focusActiveCell();\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlMultiYearViewComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: OwlDateTimeIntl }, { token: DateTimeAdapter, optional: true }, { token: OptionsTokens.multiYear }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlMultiYearViewComponent, selector: \"owl-date-time-multi-year-view\", inputs: { selectMode: \"selectMode\", selected: \"selected\", selecteds: \"selecteds\", pickerMoment: \"pickerMoment\", dateFilter: \"dateFilter\", minDate: \"minDate\", maxDate: \"maxDate\" }, outputs: { change: \"change\", yearSelected: \"yearSelected\", pickerMomentChange: \"pickerMomentChange\", keyboardEnter: \"keyboardEnter\" }, host: { properties: { \"class.owl-dt-calendar-view\": \"owlDTCalendarView\", \"class.owl-dt-calendar-multi-year-view\": \"owlDTCalendarMultiYearView\" } }, viewQueries: [{ propertyName: \"calendarBodyElm\", first: true, predicate: OwlCalendarBodyComponent, descendants: true, static: true }], ngImport: i0, template: \"<button class=\\\"owl-dt-control-button owl-dt-control-arrow-button\\\"\\n        [disabled]=\\\"!previousEnabled()\\\" [attr.aria-label]=\\\"prevButtonLabel\\\"\\n        type=\\\"button\\\" tabindex=\\\"0\\\" (click)=\\\"prevYearList($event)\\\">\\n    <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n        <!-- <editor-fold desc=\\\"SVG Arrow Left\\\"> -->\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n             version=\\\"1.1\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 250.738 250.738\\\"\\n             style=\\\"enable-background:new 0 0 250.738 250.738;\\\" xml:space=\\\"preserve\\\"\\n             width=\\\"100%\\\" height=\\\"100%\\\">\\n            <path style=\\\"fill-rule: evenodd; clip-rule: evenodd;\\\" d=\\\"M96.633,125.369l95.053-94.533c7.101-7.055,7.101-18.492,0-25.546   c-7.1-7.054-18.613-7.054-25.714,0L58.989,111.689c-3.784,3.759-5.487,8.759-5.238,13.68c-0.249,4.922,1.454,9.921,5.238,13.681   l106.983,106.398c7.101,7.055,18.613,7.055,25.714,0c7.101-7.054,7.101-18.491,0-25.544L96.633,125.369z\\\"/>\\n        </svg>\\n        <!-- </editor-fold> -->\\n    </span>\\n</button>\\n<table class=\\\"owl-dt-calendar-table owl-dt-calendar-multi-year-table\\\">\\n    <thead class=\\\"owl-dt-calendar-header\\\">\\n    <tr>\\n        <th colspan=\\\"3\\\">{{tableHeader}}</th>\\n    </tr>\\n    </thead>\\n    <tbody owl-date-time-calendar-body role=\\\"grid\\\"\\n           [rows]=\\\"years\\\" [numCols]=\\\"3\\\" [cellRatio]=\\\"3 / 7\\\"\\n           [activeCell]=\\\"activeCell\\\"\\n           [todayValue]=\\\"todayYear\\\"\\n           [selectedValues]=\\\"selectedYears\\\"\\n           [selectMode]=\\\"selectMode\\\"\\n           (keydown)=\\\"handleCalendarKeydown($event)\\\"\\n           (select)=\\\"selectCalendarCell($event)\\\"></tbody>\\n</table>\\n<button class=\\\"owl-dt-control-button owl-dt-control-arrow-button\\\"\\n        [disabled]=\\\"!nextEnabled()\\\" [attr.aria-label]=\\\"nextButtonLabel\\\"\\n        type=\\\"button\\\" tabindex=\\\"0\\\" (click)=\\\"nextYearList($event)\\\">\\n    <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n        <!-- <editor-fold desc=\\\"SVG Arrow Right\\\"> -->\\n    <svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n             viewBox=\\\"0 0 250.738 250.738\\\" style=\\\"enable-background:new 0 0 250.738 250.738;\\\" xml:space=\\\"preserve\\\">\\n            <path style=\\\"fill-rule:evenodd;clip-rule:evenodd;\\\" d=\\\"M191.75,111.689L84.766,5.291c-7.1-7.055-18.613-7.055-25.713,0\\n                c-7.101,7.054-7.101,18.49,0,25.544l95.053,94.534l-95.053,94.533c-7.101,7.054-7.101,18.491,0,25.545\\n                c7.1,7.054,18.613,7.054,25.713,0L191.75,139.05c3.784-3.759,5.487-8.759,5.238-13.681\\n                C197.237,120.447,195.534,115.448,191.75,111.689z\\\"/>\\n        </svg>\\n        <!-- </editor-fold> -->\\n    </span>\\n</button>\\n\", styles: [\"\"], dependencies: [{ kind: \"component\", type: OwlCalendarBodyComponent, selector: \"[owl-date-time-calendar-body]\", inputs: [\"activeCell\", \"rows\", \"numCols\", \"cellRatio\", \"todayValue\", \"selectedValues\", \"selectMode\"], outputs: [\"select\"], exportAs: [\"owlDateTimeCalendarBody\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlMultiYearViewComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'owl-date-time-multi-year-view', host: {\n                        '[class.owl-dt-calendar-view]': 'owlDTCalendarView',\n                        '[class.owl-dt-calendar-multi-year-view]': 'owlDTCalendarMultiYearView'\n                    }, preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, template: \"<button class=\\\"owl-dt-control-button owl-dt-control-arrow-button\\\"\\n        [disabled]=\\\"!previousEnabled()\\\" [attr.aria-label]=\\\"prevButtonLabel\\\"\\n        type=\\\"button\\\" tabindex=\\\"0\\\" (click)=\\\"prevYearList($event)\\\">\\n    <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n        <!-- <editor-fold desc=\\\"SVG Arrow Left\\\"> -->\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n             version=\\\"1.1\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 250.738 250.738\\\"\\n             style=\\\"enable-background:new 0 0 250.738 250.738;\\\" xml:space=\\\"preserve\\\"\\n             width=\\\"100%\\\" height=\\\"100%\\\">\\n            <path style=\\\"fill-rule: evenodd; clip-rule: evenodd;\\\" d=\\\"M96.633,125.369l95.053-94.533c7.101-7.055,7.101-18.492,0-25.546   c-7.1-7.054-18.613-7.054-25.714,0L58.989,111.689c-3.784,3.759-5.487,8.759-5.238,13.68c-0.249,4.922,1.454,9.921,5.238,13.681   l106.983,106.398c7.101,7.055,18.613,7.055,25.714,0c7.101-7.054,7.101-18.491,0-25.544L96.633,125.369z\\\"/>\\n        </svg>\\n        <!-- </editor-fold> -->\\n    </span>\\n</button>\\n<table class=\\\"owl-dt-calendar-table owl-dt-calendar-multi-year-table\\\">\\n    <thead class=\\\"owl-dt-calendar-header\\\">\\n    <tr>\\n        <th colspan=\\\"3\\\">{{tableHeader}}</th>\\n    </tr>\\n    </thead>\\n    <tbody owl-date-time-calendar-body role=\\\"grid\\\"\\n           [rows]=\\\"years\\\" [numCols]=\\\"3\\\" [cellRatio]=\\\"3 / 7\\\"\\n           [activeCell]=\\\"activeCell\\\"\\n           [todayValue]=\\\"todayYear\\\"\\n           [selectedValues]=\\\"selectedYears\\\"\\n           [selectMode]=\\\"selectMode\\\"\\n           (keydown)=\\\"handleCalendarKeydown($event)\\\"\\n           (select)=\\\"selectCalendarCell($event)\\\"></tbody>\\n</table>\\n<button class=\\\"owl-dt-control-button owl-dt-control-arrow-button\\\"\\n        [disabled]=\\\"!nextEnabled()\\\" [attr.aria-label]=\\\"nextButtonLabel\\\"\\n        type=\\\"button\\\" tabindex=\\\"0\\\" (click)=\\\"nextYearList($event)\\\">\\n    <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n        <!-- <editor-fold desc=\\\"SVG Arrow Right\\\"> -->\\n    <svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n             viewBox=\\\"0 0 250.738 250.738\\\" style=\\\"enable-background:new 0 0 250.738 250.738;\\\" xml:space=\\\"preserve\\\">\\n            <path style=\\\"fill-rule:evenodd;clip-rule:evenodd;\\\" d=\\\"M191.75,111.689L84.766,5.291c-7.1-7.055-18.613-7.055-25.713,0\\n                c-7.101,7.054-7.101,18.49,0,25.544l95.053,94.534l-95.053,94.533c-7.101,7.054-7.101,18.491,0,25.545\\n                c7.1,7.054,18.613,7.054,25.713,0L191.75,139.05c3.784-3.759,5.487-8.759,5.238-13.681\\n                C197.237,120.447,195.534,115.448,191.75,111.689z\\\"/>\\n        </svg>\\n        <!-- </editor-fold> -->\\n    </span>\\n</button>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: OwlDateTimeIntl }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [OptionsTokens.multiYear]\n                }] }], propDecorators: { selectMode: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], selecteds: [{\n                type: Input\n            }], pickerMoment: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input\n            }], minDate: [{\n                type: Input\n            }], maxDate: [{\n                type: Input\n            }], change: [{\n                type: Output\n            }], yearSelected: [{\n                type: Output\n            }], pickerMomentChange: [{\n                type: Output\n            }], keyboardEnter: [{\n                type: Output\n            }], calendarBodyElm: [{\n                type: ViewChild,\n                args: [OwlCalendarBodyComponent, { static: true }]\n            }] } });\n\n/**\n * calendar-year-view.component\n */\nconst MONTHS_PER_YEAR = 12;\nconst MONTHS_PER_ROW = 3;\nclass OwlYearViewComponent {\n    get selectMode() {\n        return this._selectMode;\n    }\n    set selectMode(val) {\n        this._selectMode = val;\n        if (this.initiated) {\n            this.generateMonthList();\n            this.cdRef.markForCheck();\n        }\n    }\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._selected = this.getValidDate(value);\n        this.setSelectedMonths();\n    }\n    get selecteds() {\n        return this._selecteds;\n    }\n    set selecteds(values) {\n        this._selecteds = [];\n        for (let i = 0; i < values.length; i++) {\n            const value = this.dateTimeAdapter.deserialize(values[i]);\n            this._selecteds.push(this.getValidDate(value));\n        }\n        this.setSelectedMonths();\n    }\n    get pickerMoment() {\n        return this._pickerMoment;\n    }\n    set pickerMoment(value) {\n        const oldMoment = this._pickerMoment;\n        value = this.dateTimeAdapter.deserialize(value);\n        this._pickerMoment =\n            this.getValidDate(value) || this.dateTimeAdapter.now();\n        if (!this.hasSameYear(oldMoment, this._pickerMoment) &&\n            this.initiated) {\n            this.generateMonthList();\n        }\n    }\n    get dateFilter() {\n        return this._dateFilter;\n    }\n    set dateFilter(filter) {\n        this._dateFilter = filter;\n        if (this.initiated) {\n            this.generateMonthList();\n        }\n    }\n    get minDate() {\n        return this._minDate;\n    }\n    set minDate(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._minDate = this.getValidDate(value);\n        if (this.initiated) {\n            this.generateMonthList();\n        }\n    }\n    get maxDate() {\n        return this._maxDate;\n    }\n    set maxDate(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._maxDate = this.getValidDate(value);\n        if (this.initiated) {\n            this.generateMonthList();\n        }\n    }\n    get months() {\n        return this._months;\n    }\n    get activeCell() {\n        if (this._pickerMoment) {\n            return this.dateTimeAdapter.getMonth(this._pickerMoment);\n        }\n    }\n    get isInSingleMode() {\n        return this.selectMode === 'single';\n    }\n    get isInRangeMode() {\n        return (this.selectMode === 'range' ||\n            this.selectMode === 'rangeFrom' ||\n            this.selectMode === 'rangeTo');\n    }\n    get owlDTCalendarView() {\n        return true;\n    }\n    constructor(cdRef, dateTimeAdapter, dateTimeFormats) {\n        this.cdRef = cdRef;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.dateTimeFormats = dateTimeFormats;\n        /**\n         * The select mode of the picker;\n         * */\n        this._selectMode = 'single';\n        this._selecteds = [];\n        this.localeSub = Subscription.EMPTY;\n        this.initiated = false;\n        /**\n         * An array to hold all selectedDates' month value\n         * the value is the month number in current year\n         * */\n        this.selectedMonths = [];\n        /**\n         * Callback to invoke when a new month is selected\n         * */\n        this.change = new EventEmitter();\n        /**\n         * Emits the selected year. This doesn't imply a change on the selected date\n         * */\n        this.monthSelected = new EventEmitter();\n        /** Emits when any date is activated. */\n        this.pickerMomentChange = new EventEmitter();\n        /** Emits when use keyboard enter to select a calendar cell */\n        this.keyboardEnter = new EventEmitter();\n        this.monthNames = this.dateTimeAdapter.getMonthNames('short');\n    }\n    ngOnInit() {\n        this.localeSub = this.dateTimeAdapter.localeChanges.subscribe(() => {\n            this.generateMonthList();\n            this.cdRef.markForCheck();\n        });\n    }\n    ngAfterContentInit() {\n        this.generateMonthList();\n        this.initiated = true;\n    }\n    ngOnDestroy() {\n        this.localeSub.unsubscribe();\n    }\n    /**\n     * Handle a calendarCell selected\n     */\n    selectCalendarCell(cell) {\n        this.selectMonth(cell.value);\n    }\n    /**\n     * Handle a new month selected\n     */\n    selectMonth(month) {\n        const firstDateOfMonth = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(this.pickerMoment), month, 1);\n        this.monthSelected.emit(firstDateOfMonth);\n        const daysInMonth = this.dateTimeAdapter.getNumDaysInMonth(firstDateOfMonth);\n        const result = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(this.pickerMoment), month, Math.min(daysInMonth, this.dateTimeAdapter.getDate(this.pickerMoment)), this.dateTimeAdapter.getHours(this.pickerMoment), this.dateTimeAdapter.getMinutes(this.pickerMoment), this.dateTimeAdapter.getSeconds(this.pickerMoment));\n        this.change.emit(result);\n    }\n    /**\n     * Handle keydown event on calendar body\n     */\n    handleCalendarKeydown(event) {\n        let moment;\n        switch (event.keyCode) {\n            // minus 1 month\n            case LEFT_ARROW:\n                moment = this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, -1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 1 month\n            case RIGHT_ARROW:\n                moment = this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, 1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // minus 3 months\n            case UP_ARROW:\n                moment = this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, -3);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 3 months\n            case DOWN_ARROW:\n                moment = this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, 3);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // move to first month of current year\n            case HOME:\n                moment = this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, -this.dateTimeAdapter.getMonth(this.pickerMoment));\n                this.pickerMomentChange.emit(moment);\n                break;\n            // move to last month of current year\n            case END:\n                moment = this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, 11 - this.dateTimeAdapter.getMonth(this.pickerMoment));\n                this.pickerMomentChange.emit(moment);\n                break;\n            // minus 1 year (or 10 year)\n            case PAGE_UP:\n                moment = this.dateTimeAdapter.addCalendarYears(this.pickerMoment, event.altKey ? -10 : -1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 1 year (or 10 year)\n            case PAGE_DOWN:\n                moment = this.dateTimeAdapter.addCalendarYears(this.pickerMoment, event.altKey ? 10 : 1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // Select current month\n            case ENTER:\n                this.selectMonth(this.dateTimeAdapter.getMonth(this.pickerMoment));\n                this.keyboardEnter.emit();\n                break;\n            default:\n                return;\n        }\n        this.focusActiveCell();\n        event.preventDefault();\n    }\n    /**\n     * Generate the calendar month list\n     * */\n    generateMonthList() {\n        if (!this.pickerMoment) {\n            return;\n        }\n        this.setSelectedMonths();\n        this.todayMonth = this.getMonthInCurrentYear(this.dateTimeAdapter.now());\n        this._months = [];\n        for (let i = 0; i < MONTHS_PER_YEAR / MONTHS_PER_ROW; i++) {\n            const row = [];\n            for (let j = 0; j < MONTHS_PER_ROW; j++) {\n                const month = j + i * MONTHS_PER_ROW;\n                const monthCell = this.createMonthCell(month);\n                row.push(monthCell);\n            }\n            this._months.push(row);\n        }\n        return;\n    }\n    /**\n     * Creates an CalendarCell for the given month.\n     */\n    createMonthCell(month) {\n        const startDateOfMonth = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(this.pickerMoment), month, 1);\n        const ariaLabel = this.dateTimeAdapter.format(startDateOfMonth, this.dateTimeFormats.monthYearA11yLabel);\n        const cellClass = 'owl-dt-month-' + month;\n        return new CalendarCell(month, this.monthNames[month], ariaLabel, this.isMonthEnabled(month), false, cellClass);\n    }\n    /**\n     * Check if the given month is enable\n     */\n    isMonthEnabled(month) {\n        const firstDateOfMonth = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(this.pickerMoment), month, 1);\n        // If any date in the month is selectable,\n        // we count the month as enable\n        for (let date = firstDateOfMonth; this.dateTimeAdapter.getMonth(date) === month; date = this.dateTimeAdapter.addCalendarDays(date, 1)) {\n            if (!!date &&\n                (!this.dateFilter || this.dateFilter(date)) &&\n                (!this.minDate ||\n                    this.dateTimeAdapter.compare(date, this.minDate) >= 0) &&\n                (!this.maxDate ||\n                    this.dateTimeAdapter.compare(date, this.maxDate) <= 0)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Gets the month in this year that the given Date falls on.\n     * Returns null if the given Date is in another year.\n     */\n    getMonthInCurrentYear(date) {\n        if (this.getValidDate(date) && this.getValidDate(this._pickerMoment)) {\n            const result = this.dateTimeAdapter.compareYear(date, this._pickerMoment);\n            // < 0 : the given date's year is before pickerMoment's year, we return -1 as selected month value.\n            // > 0 : the given date's year is after pickerMoment's year, we return 12 as selected month value.\n            // 0 : the give date's year is same as the pickerMoment's year, we return the actual month value.\n            if (result < 0) {\n                return -1;\n            }\n            else if (result > 0) {\n                return 12;\n            }\n            else {\n                return this.dateTimeAdapter.getMonth(date);\n            }\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Set the selectedMonths value\n     * In single mode, it has only one value which represent the month the selected date in\n     * In range mode, it would has two values, one for the month the fromValue in and the other for the month the toValue in\n     * */\n    setSelectedMonths() {\n        this.selectedMonths = [];\n        if (this.isInSingleMode && this.selected) {\n            this.selectedMonths[0] = this.getMonthInCurrentYear(this.selected);\n        }\n        if (this.isInRangeMode && this.selecteds) {\n            this.selectedMonths[0] = this.getMonthInCurrentYear(this.selecteds[0]);\n            this.selectedMonths[1] = this.getMonthInCurrentYear(this.selecteds[1]);\n        }\n    }\n    /**\n     * Check the given dates are in the same year\n     */\n    hasSameYear(dateLeft, dateRight) {\n        return !!(dateLeft &&\n            dateRight &&\n            this.dateTimeAdapter.getYear(dateLeft) ===\n                this.dateTimeAdapter.getYear(dateRight));\n    }\n    /**\n     * Get a valid date object\n     */\n    getValidDate(obj) {\n        return this.dateTimeAdapter.isDateInstance(obj) &&\n            this.dateTimeAdapter.isValid(obj)\n            ? obj\n            : null;\n    }\n    focusActiveCell() {\n        this.calendarBodyElm.focusActiveCell();\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlYearViewComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: DateTimeAdapter, optional: true }, { token: OWL_DATE_TIME_FORMATS, optional: true }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlYearViewComponent, selector: \"owl-date-time-year-view\", inputs: { selectMode: \"selectMode\", selected: \"selected\", selecteds: \"selecteds\", pickerMoment: \"pickerMoment\", dateFilter: \"dateFilter\", minDate: \"minDate\", maxDate: \"maxDate\" }, outputs: { change: \"change\", monthSelected: \"monthSelected\", pickerMomentChange: \"pickerMomentChange\", keyboardEnter: \"keyboardEnter\" }, host: { properties: { \"class.owl-dt-calendar-view\": \"owlDTCalendarView\" } }, viewQueries: [{ propertyName: \"calendarBodyElm\", first: true, predicate: OwlCalendarBodyComponent, descendants: true, static: true }], exportAs: [\"owlMonthView\"], ngImport: i0, template: \"<table class=\\\"owl-dt-calendar-table owl-dt-calendar-year-table\\\">\\n    <thead class=\\\"owl-dt-calendar-header\\\">\\n    <tr>\\n        <th class=\\\"owl-dt-calendar-table-divider\\\" aria-hidden=\\\"true\\\" colspan=\\\"3\\\"></th>\\n    </tr>\\n    </thead>\\n    <tbody owl-date-time-calendar-body role=\\\"grid\\\"\\n           [rows]=\\\"months\\\" [numCols]=\\\"3\\\" [cellRatio]=\\\"3 / 7\\\"\\n           [activeCell]=\\\"activeCell\\\"\\n           [todayValue]=\\\"todayMonth\\\"\\n           [selectedValues]=\\\"selectedMonths\\\"\\n           [selectMode]=\\\"selectMode\\\"\\n           (keydown)=\\\"handleCalendarKeydown($event)\\\"\\n           (select)=\\\"selectCalendarCell($event)\\\">\\n    </tbody>\\n</table>\\n\", styles: [\"\"], dependencies: [{ kind: \"component\", type: OwlCalendarBodyComponent, selector: \"[owl-date-time-calendar-body]\", inputs: [\"activeCell\", \"rows\", \"numCols\", \"cellRatio\", \"todayValue\", \"selectedValues\", \"selectMode\"], outputs: [\"select\"], exportAs: [\"owlDateTimeCalendarBody\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlYearViewComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'owl-date-time-year-view', exportAs: 'owlMonthView', host: {\n                        '[class.owl-dt-calendar-view]': 'owlDTCalendarView'\n                    }, preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, template: \"<table class=\\\"owl-dt-calendar-table owl-dt-calendar-year-table\\\">\\n    <thead class=\\\"owl-dt-calendar-header\\\">\\n    <tr>\\n        <th class=\\\"owl-dt-calendar-table-divider\\\" aria-hidden=\\\"true\\\" colspan=\\\"3\\\"></th>\\n    </tr>\\n    </thead>\\n    <tbody owl-date-time-calendar-body role=\\\"grid\\\"\\n           [rows]=\\\"months\\\" [numCols]=\\\"3\\\" [cellRatio]=\\\"3 / 7\\\"\\n           [activeCell]=\\\"activeCell\\\"\\n           [todayValue]=\\\"todayMonth\\\"\\n           [selectedValues]=\\\"selectedMonths\\\"\\n           [selectMode]=\\\"selectMode\\\"\\n           (keydown)=\\\"handleCalendarKeydown($event)\\\"\\n           (select)=\\\"selectCalendarCell($event)\\\">\\n    </tbody>\\n</table>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_FORMATS]\n                }] }], propDecorators: { selectMode: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], selecteds: [{\n                type: Input\n            }], pickerMoment: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input\n            }], minDate: [{\n                type: Input\n            }], maxDate: [{\n                type: Input\n            }], change: [{\n                type: Output\n            }], monthSelected: [{\n                type: Output\n            }], pickerMomentChange: [{\n                type: Output\n            }], keyboardEnter: [{\n                type: Output\n            }], calendarBodyElm: [{\n                type: ViewChild,\n                args: [OwlCalendarBodyComponent, { static: true }]\n            }] } });\n\n/**\n * calendar-month-view.component\n */\nconst DAYS_PER_WEEK = 7;\nconst WEEKS_PER_VIEW = 6;\nclass OwlMonthViewComponent {\n    get firstDayOfWeek() {\n        return this._firstDayOfWeek;\n    }\n    set firstDayOfWeek(val) {\n        if (val >= 0 && val <= 6 && val !== this._firstDayOfWeek) {\n            this._firstDayOfWeek = val;\n            this.isDefaultFirstDayOfWeek = false;\n            if (this.initiated) {\n                this.generateWeekDays();\n                this.generateCalendar();\n                this.cdRef.markForCheck();\n            }\n        }\n    }\n    get selectMode() {\n        return this._selectMode;\n    }\n    set selectMode(val) {\n        this._selectMode = val;\n        if (this.initiated) {\n            this.generateCalendar();\n            this.cdRef.markForCheck();\n        }\n    }\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        const oldSelected = this._selected;\n        value = this.dateTimeAdapter.deserialize(value);\n        this._selected = this.getValidDate(value);\n        if (!this.dateTimeAdapter.isSameDay(oldSelected, this._selected)) {\n            this.setSelectedDates();\n        }\n    }\n    get selecteds() {\n        return this._selecteds;\n    }\n    set selecteds(values) {\n        this._selecteds = values.map(v => {\n            v = this.dateTimeAdapter.deserialize(v);\n            return this.getValidDate(v);\n        });\n        this.setSelectedDates();\n    }\n    get pickerMoment() {\n        return this._pickerMoment;\n    }\n    set pickerMoment(value) {\n        const oldMoment = this._pickerMoment;\n        value = this.dateTimeAdapter.deserialize(value);\n        this._pickerMoment =\n            this.getValidDate(value) || this.dateTimeAdapter.now();\n        this.firstDateOfMonth = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(this._pickerMoment), this.dateTimeAdapter.getMonth(this._pickerMoment), 1);\n        if (!this.isSameMonth(oldMoment, this._pickerMoment) &&\n            this.initiated) {\n            this.generateCalendar();\n        }\n    }\n    get dateFilter() {\n        return this._dateFilter;\n    }\n    set dateFilter(filter) {\n        this._dateFilter = filter;\n        if (this.initiated) {\n            this.generateCalendar();\n            this.cdRef.markForCheck();\n        }\n    }\n    get minDate() {\n        return this._minDate;\n    }\n    set minDate(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._minDate = this.getValidDate(value);\n        if (this.initiated) {\n            this.generateCalendar();\n            this.cdRef.markForCheck();\n        }\n    }\n    get maxDate() {\n        return this._maxDate;\n    }\n    set maxDate(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._maxDate = this.getValidDate(value);\n        if (this.initiated) {\n            this.generateCalendar();\n            this.cdRef.markForCheck();\n        }\n    }\n    get weekdays() {\n        return this._weekdays;\n    }\n    get days() {\n        return this._days;\n    }\n    get activeCell() {\n        if (this.pickerMoment) {\n            return (this.dateTimeAdapter.getDate(this.pickerMoment) +\n                this.firstRowOffset -\n                1);\n        }\n    }\n    get isInSingleMode() {\n        return this.selectMode === 'single';\n    }\n    get isInRangeMode() {\n        return (this.selectMode === 'range' ||\n            this.selectMode === 'rangeFrom' ||\n            this.selectMode === 'rangeTo');\n    }\n    get owlDTCalendarView() {\n        return true;\n    }\n    constructor(cdRef, dateTimeAdapter, dateTimeFormats) {\n        this.cdRef = cdRef;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.dateTimeFormats = dateTimeFormats;\n        /**\n         * Whether to hide dates in other months at the start or end of the current month.\n         * */\n        this.hideOtherMonths = false;\n        /**\n         * Whether to show calendar weeks in the calendar\n         * */\n        this.showCalendarWeeks = false;\n        this.isDefaultFirstDayOfWeek = true;\n        /**\n         * The select mode of the picker;\n         * */\n        this._selectMode = 'single';\n        this._selecteds = [];\n        this.localeSub = Subscription.EMPTY;\n        this.initiated = false;\n        /**\n         * An array to hold all selectedDates' value\n         * the value is the day number in current month\n         * */\n        this.selectedDates = [];\n        /**\n         * Callback to invoke when a new date is selected\n         * */\n        this.selectedChange = new EventEmitter();\n        /**\n         * Callback to invoke when any date is selected.\n         * */\n        this.userSelection = new EventEmitter();\n        /** Emits when any date is activated. */\n        this.pickerMomentChange = new EventEmitter();\n    }\n    ngOnInit() {\n        this.updateFirstDayOfWeek(this.dateTimeAdapter.getLocale());\n        this.generateWeekDays();\n        this.localeSub = this.dateTimeAdapter.localeChanges.subscribe(locale => {\n            this.updateFirstDayOfWeek(locale);\n            this.generateWeekDays();\n            this.generateCalendar();\n            this.cdRef.markForCheck();\n        });\n    }\n    ngAfterContentInit() {\n        this.generateCalendar();\n        this.initiated = true;\n    }\n    ngOnDestroy() {\n        this.localeSub.unsubscribe();\n    }\n    /**\n     * Handle a calendarCell selected\n     */\n    selectCalendarCell(cell) {\n        // Cases in which the date would not be selected\n        // 1, the calendar cell is NOT enabled (is NOT valid)\n        // 2, the selected date is NOT in current picker's month and the hideOtherMonths is enabled\n        if (!cell.enabled || (this.hideOtherMonths && cell.out)) {\n            return;\n        }\n        this.selectDate(cell.value);\n    }\n    /**\n     * Handle a new date selected\n     */\n    selectDate(date) {\n        const daysDiff = date - 1;\n        const selected = this.dateTimeAdapter.addCalendarDays(this.firstDateOfMonth, daysDiff);\n        this.selectedChange.emit(selected);\n        this.userSelection.emit();\n    }\n    /**\n     * Handle keydown event on calendar body\n     */\n    handleCalendarKeydown(event) {\n        let moment;\n        switch (event.keyCode) {\n            // minus 1 day\n            case LEFT_ARROW:\n                moment = this.dateTimeAdapter.addCalendarDays(this.pickerMoment, -1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 1 day\n            case RIGHT_ARROW:\n                moment = this.dateTimeAdapter.addCalendarDays(this.pickerMoment, 1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // minus 1 week\n            case UP_ARROW:\n                moment = this.dateTimeAdapter.addCalendarDays(this.pickerMoment, -7);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 1 week\n            case DOWN_ARROW:\n                moment = this.dateTimeAdapter.addCalendarDays(this.pickerMoment, 7);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // move to first day of current month\n            case HOME:\n                moment = this.dateTimeAdapter.addCalendarDays(this.pickerMoment, 1 - this.dateTimeAdapter.getDate(this.pickerMoment));\n                this.pickerMomentChange.emit(moment);\n                break;\n            // move to last day of current month\n            case END:\n                moment = this.dateTimeAdapter.addCalendarDays(this.pickerMoment, this.dateTimeAdapter.getNumDaysInMonth(this.pickerMoment) -\n                    this.dateTimeAdapter.getDate(this.pickerMoment));\n                this.pickerMomentChange.emit(moment);\n                break;\n            // minus 1 month (or 1 year)\n            case PAGE_UP:\n                moment = event.altKey\n                    ? this.dateTimeAdapter.addCalendarYears(this.pickerMoment, -1)\n                    : this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, -1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // add 1 month (or 1 year)\n            case PAGE_DOWN:\n                moment = event.altKey\n                    ? this.dateTimeAdapter.addCalendarYears(this.pickerMoment, 1)\n                    : this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, 1);\n                this.pickerMomentChange.emit(moment);\n                break;\n            // select the pickerMoment\n            case ENTER:\n                if (!this.dateFilter || this.dateFilter(this.pickerMoment)) {\n                    this.selectDate(this.dateTimeAdapter.getDate(this.pickerMoment));\n                }\n                break;\n            default:\n                return;\n        }\n        this.focusActiveCell();\n        event.preventDefault();\n    }\n    /**\n     * Generate the calendar weekdays array\n     * */\n    generateWeekDays() {\n        const longWeekdays = this.dateTimeAdapter.getDayOfWeekNames('long');\n        const shortWeekdays = this.dateTimeAdapter.getDayOfWeekNames('short');\n        const narrowWeekdays = this.dateTimeAdapter.getDayOfWeekNames('narrow');\n        const firstDayOfWeek = this.firstDayOfWeek;\n        const weekdays = longWeekdays.map((long, i) => {\n            return { long, short: shortWeekdays[i], narrow: narrowWeekdays[i] };\n        });\n        this._weekdays = weekdays\n            .slice(firstDayOfWeek)\n            .concat(weekdays.slice(0, firstDayOfWeek));\n        this.dateNames = this.dateTimeAdapter.getDateNames();\n        return;\n    }\n    /**\n     * Generate the calendar days array\n     * */\n    generateCalendar() {\n        if (!this.pickerMoment) {\n            return;\n        }\n        this.todayDate = null;\n        this.weekNumbers = [];\n        // the first weekday of the month\n        const startWeekdayOfMonth = this.dateTimeAdapter.getDay(this.firstDateOfMonth);\n        const firstDayOfWeek = this.firstDayOfWeek;\n        // the amount of days from the first date of the month\n        // if it is < 0, it means the date is in previous month\n        let daysDiff = 0 -\n            ((startWeekdayOfMonth + (DAYS_PER_WEEK - firstDayOfWeek)) %\n                DAYS_PER_WEEK);\n        // the index of cell that contains the first date of the month\n        this.firstRowOffset = Math.abs(daysDiff);\n        this._days = [];\n        for (let i = 0; i < WEEKS_PER_VIEW; i++) {\n            const week = [];\n            for (let j = 0; j < DAYS_PER_WEEK; j++) {\n                const date = this.dateTimeAdapter.addCalendarDays(this.firstDateOfMonth, daysDiff);\n                const dateCell = this.createDateCell(date, daysDiff);\n                // check if the date is today\n                if (this.dateTimeAdapter.isSameDay(this.dateTimeAdapter.now(), date)) {\n                    this.todayDate = daysDiff + 1;\n                }\n                week.push(dateCell);\n                daysDiff += 1;\n            }\n            this._days.push(week);\n            if (this.showCalendarWeeks) {\n                const weekNumber = this.getISOWeek(new Date(week[0].ariaLabel));\n                this.weekNumbers.push(weekNumber);\n            }\n        }\n        this.setSelectedDates();\n    }\n    getISOWeek(d) {\n        const clonedDate = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\n        // Make Sunday's day number 7\n        clonedDate.setUTCDate(clonedDate.getUTCDate() + 4 - (clonedDate.getUTCDay() || 7));\n        // Get first day of year\n        const yearStart = new Date(Date.UTC(clonedDate.getUTCFullYear(), 0, 1));\n        // Calculate full weeks to nearest Thursday\n        const weekNo = Math.ceil((((+clonedDate - +yearStart) / 86400000) + 1) / 7);\n        return weekNo;\n    }\n    updateFirstDayOfWeek(locale) {\n        if (this.isDefaultFirstDayOfWeek) {\n            try {\n                this._firstDayOfWeek = getLocaleFirstDayOfWeek(locale);\n            }\n            catch {\n                this._firstDayOfWeek = 0;\n            }\n        }\n    }\n    /**\n     * Creates CalendarCell for days.\n     */\n    createDateCell(date, daysDiff) {\n        // total days of the month\n        const daysInMonth = this.dateTimeAdapter.getNumDaysInMonth(this.pickerMoment);\n        const dateNum = this.dateTimeAdapter.getDate(date);\n        // const dateName = this.dateNames[dateNum - 1];\n        const dateName = dateNum.toString();\n        const ariaLabel = this.dateTimeAdapter.format(date, this.dateTimeFormats.dateA11yLabel);\n        // check if the date if selectable\n        const enabled = this.isDateEnabled(date);\n        // check if date is not in current month\n        const dayValue = daysDiff + 1;\n        const out = dayValue < 1 || dayValue > daysInMonth;\n        const cellClass = 'owl-dt-day-' + this.dateTimeAdapter.getDay(date);\n        return new CalendarCell(dayValue, dateName, ariaLabel, enabled, out, cellClass);\n    }\n    /**\n     * Check if the date is valid\n     */\n    isDateEnabled(date) {\n        return (!!date &&\n            (!this.dateFilter || this.dateFilter(date)) &&\n            (!this.minDate ||\n                this.dateTimeAdapter.compare(date, this.minDate) >= 0) &&\n            (!this.maxDate ||\n                this.dateTimeAdapter.compare(date, this.maxDate) <= 0));\n    }\n    /**\n     * Get a valid date object\n     */\n    getValidDate(obj) {\n        return this.dateTimeAdapter.isDateInstance(obj) &&\n            this.dateTimeAdapter.isValid(obj)\n            ? obj\n            : null;\n    }\n    /**\n     * Check if the give dates are none-null and in the same month\n     */\n    isSameMonth(dateLeft, dateRight) {\n        return !!(dateLeft &&\n            dateRight &&\n            this.dateTimeAdapter.isValid(dateLeft) &&\n            this.dateTimeAdapter.isValid(dateRight) &&\n            this.dateTimeAdapter.getYear(dateLeft) ===\n                this.dateTimeAdapter.getYear(dateRight) &&\n            this.dateTimeAdapter.getMonth(dateLeft) ===\n                this.dateTimeAdapter.getMonth(dateRight));\n    }\n    /**\n     * Set the selectedDates value.\n     * In single mode, it has only one value which represent the selected date\n     * In range mode, it would has two values, one for the fromValue and the other for the toValue\n     * */\n    setSelectedDates() {\n        this.selectedDates = [];\n        if (!this.firstDateOfMonth) {\n            return;\n        }\n        if (this.isInSingleMode && this.selected) {\n            const dayDiff = this.dateTimeAdapter.differenceInCalendarDays(this.selected, this.firstDateOfMonth);\n            this.selectedDates[0] = dayDiff + 1;\n            return;\n        }\n        if (this.isInRangeMode && this.selecteds) {\n            this.selectedDates = this.selecteds.map(selected => {\n                if (this.dateTimeAdapter.isValid(selected)) {\n                    const dayDiff = this.dateTimeAdapter.differenceInCalendarDays(selected, this.firstDateOfMonth);\n                    return dayDiff + 1;\n                }\n                else {\n                    return null;\n                }\n            });\n        }\n    }\n    focusActiveCell() {\n        this.calendarBodyElm.focusActiveCell();\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlMonthViewComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: DateTimeAdapter, optional: true }, { token: OWL_DATE_TIME_FORMATS, optional: true }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlMonthViewComponent, selector: \"owl-date-time-month-view\", inputs: { hideOtherMonths: \"hideOtherMonths\", showCalendarWeeks: \"showCalendarWeeks\", firstDayOfWeek: \"firstDayOfWeek\", selectMode: \"selectMode\", selected: \"selected\", selecteds: \"selecteds\", pickerMoment: \"pickerMoment\", dateFilter: \"dateFilter\", minDate: \"minDate\", maxDate: \"maxDate\" }, outputs: { selectedChange: \"selectedChange\", userSelection: \"userSelection\", pickerMomentChange: \"pickerMomentChange\" }, host: { properties: { \"class.owl-dt-calendar-view\": \"owlDTCalendarView\" } }, viewQueries: [{ propertyName: \"calendarBodyElm\", first: true, predicate: OwlCalendarBodyComponent, descendants: true, static: true }], exportAs: [\"owlYearView\"], ngImport: i0, template: \"<ul class=\\\"week-number\\\" *ngIf=\\\"showCalendarWeeks\\\">\\n    <li *ngFor=\\\"let week of weekNumbers;\\\">\\n        <span>{{ week }}</span>\\n    </li>\\n</ul>\\n<table class=\\\"owl-dt-calendar-table owl-dt-calendar-month-table\\\" [ngClass]=\\\"{'owl-calendar-weeks': showCalendarWeeks}\\\"\\n       [class.owl-dt-calendar-only-current-month]=\\\"hideOtherMonths\\\">\\n    <thead class=\\\"owl-dt-calendar-header\\\">\\n    <tr class=\\\"owl-dt-weekdays\\\">\\n        <th *ngFor=\\\"let weekday of weekdays\\\"\\n            [attr.aria-label]=\\\"weekday.long\\\"\\n            class=\\\"owl-dt-weekday\\\" scope=\\\"col\\\">\\n            <span>{{weekday.short}}</span>\\n        </th>\\n    </tr>\\n    <tr>\\n        <th class=\\\"owl-dt-calendar-table-divider\\\" [ngClass]=\\\"{'owl-calendar-weeks': showCalendarWeeks}\\\" aria-hidden=\\\"true\\\" colspan=\\\"7\\\"></th>\\n    </tr>\\n    </thead>\\n    <tbody owl-date-time-calendar-body role=\\\"grid\\\"\\n           [rows]=\\\"days\\\" [todayValue]=\\\"todayDate\\\"\\n           [selectedValues]=\\\"selectedDates\\\"\\n           [selectMode]=\\\"selectMode\\\"\\n           [activeCell]=\\\"activeCell\\\"\\n           (keydown)=\\\"handleCalendarKeydown($event)\\\"\\n           (select)=\\\"selectCalendarCell($event)\\\">\\n    </tbody>\\n</table>\\n\", styles: [\".week-number{display:flex;flex-direction:column;justify-content:space-between;margin:46px 0 14px;padding:0;list-style:none;border-right:1px solid rgba(0,0,0,.12);width:8%;font-weight:700}.week-number li{font-size:.8em}\\n\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"component\", type: OwlCalendarBodyComponent, selector: \"[owl-date-time-calendar-body]\", inputs: [\"activeCell\", \"rows\", \"numCols\", \"cellRatio\", \"todayValue\", \"selectedValues\", \"selectMode\"], outputs: [\"select\"], exportAs: [\"owlDateTimeCalendarBody\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlMonthViewComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'owl-date-time-month-view', exportAs: 'owlYearView', host: {\n                        '[class.owl-dt-calendar-view]': 'owlDTCalendarView'\n                    }, preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, template: \"<ul class=\\\"week-number\\\" *ngIf=\\\"showCalendarWeeks\\\">\\n    <li *ngFor=\\\"let week of weekNumbers;\\\">\\n        <span>{{ week }}</span>\\n    </li>\\n</ul>\\n<table class=\\\"owl-dt-calendar-table owl-dt-calendar-month-table\\\" [ngClass]=\\\"{'owl-calendar-weeks': showCalendarWeeks}\\\"\\n       [class.owl-dt-calendar-only-current-month]=\\\"hideOtherMonths\\\">\\n    <thead class=\\\"owl-dt-calendar-header\\\">\\n    <tr class=\\\"owl-dt-weekdays\\\">\\n        <th *ngFor=\\\"let weekday of weekdays\\\"\\n            [attr.aria-label]=\\\"weekday.long\\\"\\n            class=\\\"owl-dt-weekday\\\" scope=\\\"col\\\">\\n            <span>{{weekday.short}}</span>\\n        </th>\\n    </tr>\\n    <tr>\\n        <th class=\\\"owl-dt-calendar-table-divider\\\" [ngClass]=\\\"{'owl-calendar-weeks': showCalendarWeeks}\\\" aria-hidden=\\\"true\\\" colspan=\\\"7\\\"></th>\\n    </tr>\\n    </thead>\\n    <tbody owl-date-time-calendar-body role=\\\"grid\\\"\\n           [rows]=\\\"days\\\" [todayValue]=\\\"todayDate\\\"\\n           [selectedValues]=\\\"selectedDates\\\"\\n           [selectMode]=\\\"selectMode\\\"\\n           [activeCell]=\\\"activeCell\\\"\\n           (keydown)=\\\"handleCalendarKeydown($event)\\\"\\n           (select)=\\\"selectCalendarCell($event)\\\">\\n    </tbody>\\n</table>\\n\", styles: [\".week-number{display:flex;flex-direction:column;justify-content:space-between;margin:46px 0 14px;padding:0;list-style:none;border-right:1px solid rgba(0,0,0,.12);width:8%;font-weight:700}.week-number li{font-size:.8em}\\n\"] }]\n        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_FORMATS]\n                }] }], propDecorators: { hideOtherMonths: [{\n                type: Input\n            }], showCalendarWeeks: [{\n                type: Input\n            }], firstDayOfWeek: [{\n                type: Input\n            }], selectMode: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], selecteds: [{\n                type: Input\n            }], pickerMoment: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input\n            }], minDate: [{\n                type: Input\n            }], maxDate: [{\n                type: Input\n            }], selectedChange: [{\n                type: Output\n            }], userSelection: [{\n                type: Output\n            }], pickerMomentChange: [{\n                type: Output\n            }], calendarBodyElm: [{\n                type: ViewChild,\n                args: [OwlCalendarBodyComponent, { static: true }]\n            }] } });\n\n/**\n * calendar.component\n */\nclass OwlCalendarComponent {\n    get minDate() {\n        return this._minDate;\n    }\n    set minDate(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        value = this.getValidDate(value);\n        this._minDate = value\n            ? this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(value), this.dateTimeAdapter.getMonth(value), this.dateTimeAdapter.getDate(value))\n            : null;\n    }\n    get maxDate() {\n        return this._maxDate;\n    }\n    set maxDate(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        value = this.getValidDate(value);\n        this._maxDate = value\n            ? this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(value), this.dateTimeAdapter.getMonth(value), this.dateTimeAdapter.getDate(value))\n            : null;\n    }\n    get pickerMoment() {\n        return this._pickerMoment;\n    }\n    set pickerMoment(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._pickerMoment =\n            this.getValidDate(value) || this.dateTimeAdapter.now();\n    }\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._selected = this.getValidDate(value);\n    }\n    get selecteds() {\n        return this._selecteds;\n    }\n    set selecteds(values) {\n        this._selecteds = values.map(v => {\n            v = this.dateTimeAdapter.deserialize(v);\n            return this.getValidDate(v);\n        });\n    }\n    get periodButtonText() {\n        return this.isMonthView\n            ? this.dateTimeAdapter.format(this.pickerMoment, this.dateTimeFormats.monthYearLabel)\n            : this.dateTimeAdapter.getYearName(this.pickerMoment);\n    }\n    get periodButtonLabel() {\n        return this.isMonthView\n            ? this.pickerIntl.switchToMultiYearViewLabel\n            : this.pickerIntl.switchToMonthViewLabel;\n    }\n    get prevButtonLabel() {\n        if (this._currentView === DateView.MONTH) {\n            return this.pickerIntl.prevMonthLabel;\n        }\n        else if (this._currentView === DateView.YEAR) {\n            return this.pickerIntl.prevYearLabel;\n        }\n        else {\n            return null;\n        }\n    }\n    get nextButtonLabel() {\n        if (this._currentView === DateView.MONTH) {\n            return this.pickerIntl.nextMonthLabel;\n        }\n        else if (this._currentView === DateView.YEAR) {\n            return this.pickerIntl.nextYearLabel;\n        }\n        else {\n            return null;\n        }\n    }\n    get currentView() {\n        return this._currentView;\n    }\n    set currentView(view) {\n        this._currentView = view;\n        this.moveFocusOnNextTick = true;\n    }\n    get isInSingleMode() {\n        return this.selectMode === 'single';\n    }\n    get isInRangeMode() {\n        return (this.selectMode === 'range' ||\n            this.selectMode === 'rangeFrom' ||\n            this.selectMode === 'rangeTo');\n    }\n    get showControlArrows() {\n        return this._currentView !== DateView.MULTI_YEARS;\n    }\n    get isMonthView() {\n        return this._currentView === DateView.MONTH;\n    }\n    /**\n     * Bind class 'owl-dt-calendar' to host\n     * */\n    get owlDTCalendarClass() {\n        return true;\n    }\n    constructor(elmRef, pickerIntl, ngZone, cdRef, dateTimeAdapter, dateTimeFormats) {\n        this.elmRef = elmRef;\n        this.pickerIntl = pickerIntl;\n        this.ngZone = ngZone;\n        this.cdRef = cdRef;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.dateTimeFormats = dateTimeFormats;\n        this.DateView = DateView;\n        this._selecteds = [];\n        /**\n         * The view that the calendar should start in.\n         */\n        this.startView = DateView.MONTH;\n        /**\n         * Whether to should only the year and multi-year views.\n         */\n        this.yearOnly = false;\n        /**\n         * Whether to show calendar weeks in the calendar\n         * */\n        this.showCalendarWeeks = false;\n        /**\n         * Whether to should only the multi-year view.\n         */\n        this.multiyearOnly = false;\n        /** Emits when the currently picker moment changes. */\n        this.pickerMomentChange = new EventEmitter();\n        /** Emits when the selected date changes. */\n        this.dateClicked = new EventEmitter();\n        /** Emits when the currently selected date changes. */\n        this.selectedChange = new EventEmitter();\n        /** Emits when any date is selected. */\n        this.userSelection = new EventEmitter();\n        /**\n         * Emits the selected year. This doesn't imply a change on the selected date\n         * */\n        this.yearSelected = new EventEmitter();\n        /**\n         * Emits the selected month. This doesn't imply a change on the selected date\n         * */\n        this.monthSelected = new EventEmitter();\n        this.intlChangesSub = Subscription.EMPTY;\n        /**\n         * Used for scheduling that focus should be moved to the active cell on the next tick.\n         * We need to schedule it, rather than do it immediately, because we have to wait\n         * for Angular to re-evaluate the view children.\n         */\n        this.moveFocusOnNextTick = false;\n        /**\n         * Date filter for the month and year view\n         */\n        this.dateFilterForViews = (date) => {\n            return (!!date &&\n                (!this.dateFilter || this.dateFilter(date)) &&\n                (!this.minDate ||\n                    this.dateTimeAdapter.compare(date, this.minDate) >= 0) &&\n                (!this.maxDate ||\n                    this.dateTimeAdapter.compare(date, this.maxDate) <= 0));\n        };\n        this.intlChangesSub = this.pickerIntl.changes.subscribe(() => {\n            this.cdRef.markForCheck();\n        });\n    }\n    ngOnInit() {\n    }\n    ngAfterContentInit() {\n        this._currentView = this.startView;\n    }\n    ngAfterViewChecked() {\n        if (this.moveFocusOnNextTick) {\n            this.moveFocusOnNextTick = false;\n            this.focusActiveCell();\n        }\n    }\n    ngOnDestroy() {\n        this.intlChangesSub.unsubscribe();\n    }\n    /**\n     * Toggle between month view and year view\n     */\n    toggleViews() {\n        let nextView = null;\n        if (this._currentView === DateView.MONTH) {\n            nextView = DateView.MULTI_YEARS;\n        }\n        else {\n            if (this.multiyearOnly) {\n                nextView = DateView.MULTI_YEARS;\n            }\n            else if (this.yearOnly) {\n                nextView = this._currentView === DateView.YEAR ? DateView.MULTI_YEARS : DateView.YEAR;\n            }\n            else {\n                nextView = DateView.MONTH;\n            }\n        }\n        this.currentView = nextView;\n    }\n    /**\n     * Handles user clicks on the previous button.\n     * */\n    previousClicked() {\n        this.pickerMoment = this.isMonthView\n            ? this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, -1)\n            : this.dateTimeAdapter.addCalendarYears(this.pickerMoment, -1);\n        this.pickerMomentChange.emit(this.pickerMoment);\n    }\n    /**\n     * Handles user clicks on the next button.\n     * */\n    nextClicked() {\n        this.pickerMoment = this.isMonthView\n            ? this.dateTimeAdapter.addCalendarMonths(this.pickerMoment, 1)\n            : this.dateTimeAdapter.addCalendarYears(this.pickerMoment, 1);\n        this.pickerMomentChange.emit(this.pickerMoment);\n    }\n    dateSelected(date) {\n        if (!this.dateFilterForViews(date)) {\n            return;\n        }\n        this.dateClicked.emit(date);\n        this.selectedChange.emit(date);\n        /*if ((this.isInSingleMode && !this.dateTimeAdapter.isSameDay(date, this.selected)) ||\n            this.isInRangeMode) {\n            this.selectedChange.emit(date);\n        }*/\n    }\n    /**\n     * Change the pickerMoment value and switch to a specific view\n     */\n    goToDateInView(date, view) {\n        this.handlePickerMomentChange(date);\n        if ((!this.yearOnly && !this.multiyearOnly) ||\n            (this.multiyearOnly && (view !== DateView.MONTH && view !== DateView.YEAR)) ||\n            (this.yearOnly && view !== DateView.MONTH)) {\n            this.currentView = view;\n        }\n        return;\n    }\n    /**\n     * Change the pickerMoment value\n     */\n    handlePickerMomentChange(date) {\n        this.pickerMoment = this.dateTimeAdapter.clampDate(date, this.minDate, this.maxDate);\n        this.pickerMomentChange.emit(this.pickerMoment);\n        return;\n    }\n    userSelected() {\n        this.userSelection.emit();\n    }\n    /**\n     * Whether the previous period button is enabled.\n     */\n    prevButtonEnabled() {\n        return (!this.minDate || !this.isSameView(this.pickerMoment, this.minDate));\n    }\n    /**\n     * Whether the next period button is enabled.\n     */\n    nextButtonEnabled() {\n        return (!this.maxDate || !this.isSameView(this.pickerMoment, this.maxDate));\n    }\n    /**\n     * Focus to the host element\n     * */\n    focusActiveCell() {\n        this.ngZone.runOutsideAngular(() => {\n            this.ngZone.onStable\n                .asObservable()\n                .pipe(take(1))\n                .subscribe(() => {\n                this.elmRef.nativeElement\n                    .querySelector('.owl-dt-calendar-cell-active')\n                    .focus();\n            });\n        });\n    }\n    selectYearInMultiYearView(normalizedYear) {\n        this.yearSelected.emit(normalizedYear);\n    }\n    selectMonthInYearView(normalizedMonth) {\n        this.monthSelected.emit(normalizedMonth);\n    }\n    /**\n     * Whether the two dates represent the same view in the current view mode (month or year).\n     */\n    isSameView(date1, date2) {\n        if (this._currentView === DateView.MONTH) {\n            return !!(date1 &&\n                date2 &&\n                this.dateTimeAdapter.getYear(date1) ===\n                    this.dateTimeAdapter.getYear(date2) &&\n                this.dateTimeAdapter.getMonth(date1) ===\n                    this.dateTimeAdapter.getMonth(date2));\n        }\n        else if (this._currentView === DateView.YEAR) {\n            return !!(date1 &&\n                date2 &&\n                this.dateTimeAdapter.getYear(date1) ===\n                    this.dateTimeAdapter.getYear(date2));\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Get a valid date object\n     */\n    getValidDate(obj) {\n        return this.dateTimeAdapter.isDateInstance(obj) &&\n            this.dateTimeAdapter.isValid(obj)\n            ? obj\n            : null;\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlCalendarComponent, deps: [{ token: i0.ElementRef }, { token: OwlDateTimeIntl }, { token: i0.NgZone }, { token: i0.ChangeDetectorRef }, { token: DateTimeAdapter, optional: true }, { token: OWL_DATE_TIME_FORMATS, optional: true }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlCalendarComponent, selector: \"owl-date-time-calendar\", inputs: { minDate: \"minDate\", maxDate: \"maxDate\", pickerMoment: \"pickerMoment\", selected: \"selected\", selecteds: \"selecteds\", dateFilter: \"dateFilter\", firstDayOfWeek: \"firstDayOfWeek\", selectMode: \"selectMode\", startView: \"startView\", yearOnly: \"yearOnly\", showCalendarWeeks: \"showCalendarWeeks\", multiyearOnly: \"multiyearOnly\", hideOtherMonths: \"hideOtherMonths\" }, outputs: { pickerMomentChange: \"pickerMomentChange\", dateClicked: \"dateClicked\", selectedChange: \"selectedChange\", userSelection: \"userSelection\", yearSelected: \"yearSelected\", monthSelected: \"monthSelected\" }, host: { properties: { \"class.owl-dt-calendar\": \"owlDTCalendarClass\" } }, exportAs: [\"owlDateTimeCalendar\"], ngImport: i0, template: \"<div class=\\\"owl-dt-calendar-control\\\">\\n    <!-- focus when keyboard tab (http://kizu.ru/en/blog/keyboard-only-focus/#x) -->\\n    <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-control-arrow-button\\\"\\n            type=\\\"button\\\" tabindex=\\\"0\\\"\\n            [style.visibility]=\\\"showControlArrows? 'visible': 'hidden'\\\"\\n            [disabled]=\\\"!prevButtonEnabled()\\\"\\n            [attr.aria-label]=\\\"prevButtonLabel\\\"\\n            (click)=\\\"previousClicked()\\\">\\n        <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n            <!-- <editor-fold desc=\\\"SVG Arrow Left\\\"> -->\\n        <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n                 version=\\\"1.1\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 250.738 250.738\\\"\\n                 style=\\\"enable-background:new 0 0 250.738 250.738;\\\" xml:space=\\\"preserve\\\"\\n                 width=\\\"100%\\\" height=\\\"100%\\\">\\n                <path style=\\\"fill-rule: evenodd; clip-rule: evenodd;\\\" d=\\\"M96.633,125.369l95.053-94.533c7.101-7.055,7.101-18.492,0-25.546   c-7.1-7.054-18.613-7.054-25.714,0L58.989,111.689c-3.784,3.759-5.487,8.759-5.238,13.68c-0.249,4.922,1.454,9.921,5.238,13.681   l106.983,106.398c7.101,7.055,18.613,7.055,25.714,0c7.101-7.054,7.101-18.491,0-25.544L96.633,125.369z\\\"/>\\n            </svg>\\n            <!-- </editor-fold> -->\\n        </span>\\n    </button>\\n    <div class=\\\"owl-dt-calendar-control-content\\\">\\n        <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-control-period-button\\\"\\n                type=\\\"button\\\" tabindex=\\\"0\\\"\\n                [attr.aria-label]=\\\"periodButtonLabel\\\"\\n                (click)=\\\"toggleViews()\\\">\\n            <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n                {{periodButtonText}}\\n\\n                <span class=\\\"owl-dt-control-button-arrow\\\"\\n                      [style.transform]=\\\"'rotate(' + (isMonthView? 0 : 180) +'deg)'\\\">\\n                    <!-- <editor-fold desc=\\\"SVG Arrow\\\"> -->\\n                    <svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n                         width=\\\"50%\\\" height=\\\"50%\\\" viewBox=\\\"0 0 292.362 292.362\\\" style=\\\"enable-background:new 0 0 292.362 292.362;\\\"\\n                         xml:space=\\\"preserve\\\">\\n                        <g>\\n                            <path d=\\\"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\\n                                C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\\n                                s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z\\\"/>\\n                        </g>\\n                    </svg>\\n                    <!-- </editor-fold> -->\\n                </span>\\n            </span>\\n        </button>\\n    </div>\\n    <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-control-arrow-button\\\"\\n            type=\\\"button\\\" tabindex=\\\"0\\\"\\n            [style.visibility]=\\\"showControlArrows? 'visible': 'hidden'\\\"\\n            [disabled]=\\\"!nextButtonEnabled()\\\"\\n            [attr.aria-label]=\\\"nextButtonLabel\\\"\\n            (click)=\\\"nextClicked()\\\">\\n        <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n            <!-- <editor-fold desc=\\\"SVG Arrow Right\\\"> -->\\n        <svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n                 viewBox=\\\"0 0 250.738 250.738\\\" style=\\\"enable-background:new 0 0 250.738 250.738;\\\" xml:space=\\\"preserve\\\">\\n                <path style=\\\"fill-rule:evenodd;clip-rule:evenodd;\\\" d=\\\"M191.75,111.689L84.766,5.291c-7.1-7.055-18.613-7.055-25.713,0\\n                    c-7.101,7.054-7.101,18.49,0,25.544l95.053,94.534l-95.053,94.533c-7.101,7.054-7.101,18.491,0,25.545\\n                    c7.1,7.054,18.613,7.054,25.713,0L191.75,139.05c3.784-3.759,5.487-8.759,5.238-13.681\\n                    C197.237,120.447,195.534,115.448,191.75,111.689z\\\"/>\\n            </svg>\\n            <!-- </editor-fold> -->\\n        </span>\\n    </button>\\n</div>\\n<div class=\\\"owl-dt-calendar-main\\\" cdkMonitorSubtreeFocus [ngSwitch]=\\\"currentView\\\" tabindex=\\\"-1\\\">\\n    <owl-date-time-month-view\\n            *ngSwitchCase=\\\"DateView.MONTH\\\"\\n            [pickerMoment]=\\\"pickerMoment\\\"\\n            [firstDayOfWeek]=\\\"firstDayOfWeek\\\"\\n            [selected]=\\\"selected\\\"\\n            [selecteds]=\\\"selecteds\\\"\\n            [selectMode]=\\\"selectMode\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [showCalendarWeeks]=\\\"showCalendarWeeks\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            [hideOtherMonths]=\\\"hideOtherMonths\\\"\\n            (pickerMomentChange)=\\\"handlePickerMomentChange($event)\\\"\\n            (selectedChange)=\\\"dateSelected($event)\\\"\\n            (userSelection)=\\\"userSelected()\\\"></owl-date-time-month-view>\\n\\n    <owl-date-time-year-view\\n            *ngSwitchCase=\\\"DateView.YEAR\\\"\\n            [pickerMoment]=\\\"pickerMoment\\\"\\n            [selected]=\\\"selected\\\"\\n            [selecteds]=\\\"selecteds\\\"\\n            [selectMode]=\\\"selectMode\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            (keyboardEnter)=\\\"focusActiveCell()\\\"\\n            (pickerMomentChange)=\\\"handlePickerMomentChange($event)\\\"\\n            (monthSelected)=\\\"selectMonthInYearView($event)\\\"\\n            (change)=\\\"goToDateInView($event, DateView.MONTH)\\\"></owl-date-time-year-view>\\n\\n    <owl-date-time-multi-year-view\\n            *ngSwitchCase=\\\"DateView.MULTI_YEARS\\\"\\n            [pickerMoment]=\\\"pickerMoment\\\"\\n            [selected]=\\\"selected\\\"\\n            [selecteds]=\\\"selecteds\\\"\\n            [selectMode]=\\\"selectMode\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            (keyboardEnter)=\\\"focusActiveCell()\\\"\\n            (pickerMomentChange)=\\\"handlePickerMomentChange($event)\\\"\\n            (yearSelected)=\\\"selectYearInMultiYearView($event)\\\"\\n            (change)=\\\"goToDateInView($event, DateView.YEAR)\\\"></owl-date-time-multi-year-view>\\n</div>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgSwitch, selector: \"[ngSwitch]\", inputs: [\"ngSwitch\"] }, { kind: \"directive\", type: i3.NgSwitchCase, selector: \"[ngSwitchCase]\", inputs: [\"ngSwitchCase\"] }, { kind: \"directive\", type: i4.CdkMonitorFocus, selector: \"[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]\", outputs: [\"cdkFocusChange\"], exportAs: [\"cdkMonitorFocus\"] }, { kind: \"component\", type: OwlMultiYearViewComponent, selector: \"owl-date-time-multi-year-view\", inputs: [\"selectMode\", \"selected\", \"selecteds\", \"pickerMoment\", \"dateFilter\", \"minDate\", \"maxDate\"], outputs: [\"change\", \"yearSelected\", \"pickerMomentChange\", \"keyboardEnter\"] }, { kind: \"component\", type: OwlYearViewComponent, selector: \"owl-date-time-year-view\", inputs: [\"selectMode\", \"selected\", \"selecteds\", \"pickerMoment\", \"dateFilter\", \"minDate\", \"maxDate\"], outputs: [\"change\", \"monthSelected\", \"pickerMomentChange\", \"keyboardEnter\"], exportAs: [\"owlMonthView\"] }, { kind: \"component\", type: OwlMonthViewComponent, selector: \"owl-date-time-month-view\", inputs: [\"hideOtherMonths\", \"showCalendarWeeks\", \"firstDayOfWeek\", \"selectMode\", \"selected\", \"selecteds\", \"pickerMoment\", \"dateFilter\", \"minDate\", \"maxDate\"], outputs: [\"selectedChange\", \"userSelection\", \"pickerMomentChange\"], exportAs: [\"owlYearView\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlCalendarComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'owl-date-time-calendar', exportAs: 'owlDateTimeCalendar', host: {\n                        '[class.owl-dt-calendar]': 'owlDTCalendarClass'\n                    }, preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, template: \"<div class=\\\"owl-dt-calendar-control\\\">\\n    <!-- focus when keyboard tab (http://kizu.ru/en/blog/keyboard-only-focus/#x) -->\\n    <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-control-arrow-button\\\"\\n            type=\\\"button\\\" tabindex=\\\"0\\\"\\n            [style.visibility]=\\\"showControlArrows? 'visible': 'hidden'\\\"\\n            [disabled]=\\\"!prevButtonEnabled()\\\"\\n            [attr.aria-label]=\\\"prevButtonLabel\\\"\\n            (click)=\\\"previousClicked()\\\">\\n        <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n            <!-- <editor-fold desc=\\\"SVG Arrow Left\\\"> -->\\n        <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n                 version=\\\"1.1\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 250.738 250.738\\\"\\n                 style=\\\"enable-background:new 0 0 250.738 250.738;\\\" xml:space=\\\"preserve\\\"\\n                 width=\\\"100%\\\" height=\\\"100%\\\">\\n                <path style=\\\"fill-rule: evenodd; clip-rule: evenodd;\\\" d=\\\"M96.633,125.369l95.053-94.533c7.101-7.055,7.101-18.492,0-25.546   c-7.1-7.054-18.613-7.054-25.714,0L58.989,111.689c-3.784,3.759-5.487,8.759-5.238,13.68c-0.249,4.922,1.454,9.921,5.238,13.681   l106.983,106.398c7.101,7.055,18.613,7.055,25.714,0c7.101-7.054,7.101-18.491,0-25.544L96.633,125.369z\\\"/>\\n            </svg>\\n            <!-- </editor-fold> -->\\n        </span>\\n    </button>\\n    <div class=\\\"owl-dt-calendar-control-content\\\">\\n        <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-control-period-button\\\"\\n                type=\\\"button\\\" tabindex=\\\"0\\\"\\n                [attr.aria-label]=\\\"periodButtonLabel\\\"\\n                (click)=\\\"toggleViews()\\\">\\n            <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n                {{periodButtonText}}\\n\\n                <span class=\\\"owl-dt-control-button-arrow\\\"\\n                      [style.transform]=\\\"'rotate(' + (isMonthView? 0 : 180) +'deg)'\\\">\\n                    <!-- <editor-fold desc=\\\"SVG Arrow\\\"> -->\\n                    <svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n                         width=\\\"50%\\\" height=\\\"50%\\\" viewBox=\\\"0 0 292.362 292.362\\\" style=\\\"enable-background:new 0 0 292.362 292.362;\\\"\\n                         xml:space=\\\"preserve\\\">\\n                        <g>\\n                            <path d=\\\"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\\n                                C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\\n                                s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z\\\"/>\\n                        </g>\\n                    </svg>\\n                    <!-- </editor-fold> -->\\n                </span>\\n            </span>\\n        </button>\\n    </div>\\n    <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-control-arrow-button\\\"\\n            type=\\\"button\\\" tabindex=\\\"0\\\"\\n            [style.visibility]=\\\"showControlArrows? 'visible': 'hidden'\\\"\\n            [disabled]=\\\"!nextButtonEnabled()\\\"\\n            [attr.aria-label]=\\\"nextButtonLabel\\\"\\n            (click)=\\\"nextClicked()\\\">\\n        <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n            <!-- <editor-fold desc=\\\"SVG Arrow Right\\\"> -->\\n        <svg version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n                 viewBox=\\\"0 0 250.738 250.738\\\" style=\\\"enable-background:new 0 0 250.738 250.738;\\\" xml:space=\\\"preserve\\\">\\n                <path style=\\\"fill-rule:evenodd;clip-rule:evenodd;\\\" d=\\\"M191.75,111.689L84.766,5.291c-7.1-7.055-18.613-7.055-25.713,0\\n                    c-7.101,7.054-7.101,18.49,0,25.544l95.053,94.534l-95.053,94.533c-7.101,7.054-7.101,18.491,0,25.545\\n                    c7.1,7.054,18.613,7.054,25.713,0L191.75,139.05c3.784-3.759,5.487-8.759,5.238-13.681\\n                    C197.237,120.447,195.534,115.448,191.75,111.689z\\\"/>\\n            </svg>\\n            <!-- </editor-fold> -->\\n        </span>\\n    </button>\\n</div>\\n<div class=\\\"owl-dt-calendar-main\\\" cdkMonitorSubtreeFocus [ngSwitch]=\\\"currentView\\\" tabindex=\\\"-1\\\">\\n    <owl-date-time-month-view\\n            *ngSwitchCase=\\\"DateView.MONTH\\\"\\n            [pickerMoment]=\\\"pickerMoment\\\"\\n            [firstDayOfWeek]=\\\"firstDayOfWeek\\\"\\n            [selected]=\\\"selected\\\"\\n            [selecteds]=\\\"selecteds\\\"\\n            [selectMode]=\\\"selectMode\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [showCalendarWeeks]=\\\"showCalendarWeeks\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            [hideOtherMonths]=\\\"hideOtherMonths\\\"\\n            (pickerMomentChange)=\\\"handlePickerMomentChange($event)\\\"\\n            (selectedChange)=\\\"dateSelected($event)\\\"\\n            (userSelection)=\\\"userSelected()\\\"></owl-date-time-month-view>\\n\\n    <owl-date-time-year-view\\n            *ngSwitchCase=\\\"DateView.YEAR\\\"\\n            [pickerMoment]=\\\"pickerMoment\\\"\\n            [selected]=\\\"selected\\\"\\n            [selecteds]=\\\"selecteds\\\"\\n            [selectMode]=\\\"selectMode\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            (keyboardEnter)=\\\"focusActiveCell()\\\"\\n            (pickerMomentChange)=\\\"handlePickerMomentChange($event)\\\"\\n            (monthSelected)=\\\"selectMonthInYearView($event)\\\"\\n            (change)=\\\"goToDateInView($event, DateView.MONTH)\\\"></owl-date-time-year-view>\\n\\n    <owl-date-time-multi-year-view\\n            *ngSwitchCase=\\\"DateView.MULTI_YEARS\\\"\\n            [pickerMoment]=\\\"pickerMoment\\\"\\n            [selected]=\\\"selected\\\"\\n            [selecteds]=\\\"selecteds\\\"\\n            [selectMode]=\\\"selectMode\\\"\\n            [minDate]=\\\"minDate\\\"\\n            [maxDate]=\\\"maxDate\\\"\\n            [dateFilter]=\\\"dateFilter\\\"\\n            (keyboardEnter)=\\\"focusActiveCell()\\\"\\n            (pickerMomentChange)=\\\"handlePickerMomentChange($event)\\\"\\n            (yearSelected)=\\\"selectYearInMultiYearView($event)\\\"\\n            (change)=\\\"goToDateInView($event, DateView.YEAR)\\\"></owl-date-time-multi-year-view>\\n</div>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: OwlDateTimeIntl }, { type: i0.NgZone }, { type: i0.ChangeDetectorRef }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_FORMATS]\n                }] }], propDecorators: { minDate: [{\n                type: Input\n            }], maxDate: [{\n                type: Input\n            }], pickerMoment: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], selecteds: [{\n                type: Input\n            }], dateFilter: [{\n                type: Input\n            }], firstDayOfWeek: [{\n                type: Input\n            }], selectMode: [{\n                type: Input\n            }], startView: [{\n                type: Input\n            }], yearOnly: [{\n                type: Input\n            }], showCalendarWeeks: [{\n                type: Input\n            }], multiyearOnly: [{\n                type: Input\n            }], hideOtherMonths: [{\n                type: Input\n            }], pickerMomentChange: [{\n                type: Output\n            }], dateClicked: [{\n                type: Output\n            }], selectedChange: [{\n                type: Output\n            }], userSelection: [{\n                type: Output\n            }], yearSelected: [{\n                type: Output\n            }], monthSelected: [{\n                type: Output\n            }] } });\n\n/**\n * timer-box.component\n */\nclass OwlTimerBoxComponent {\n    get displayValue() {\n        if (this.hasFocus) {\n            // Don't try to reformat the value that user is currently editing\n            return this.valueInput.nativeElement.value;\n        }\n        const value = this.boxValue || this.value;\n        if (value === null || isNaN(value)) {\n            return '';\n        }\n        return value < 10 ? '0' + value.toString() : value.toString();\n    }\n    get owlDTTimerBoxClass() {\n        return true;\n    }\n    constructor() {\n        this.showDivider = false;\n        this.step = 1;\n        this.valueChange = new EventEmitter();\n        this.inputChange = new EventEmitter();\n        this.inputStream = new Subject();\n        this.inputStreamSub = Subscription.EMPTY;\n        this.hasFocus = false;\n        this.onValueInputMouseWheelBind = this.onValueInputMouseWheel.bind(this);\n    }\n    ngOnInit() {\n        this.inputStreamSub = this.inputStream.pipe(debounceTime(750)).subscribe((val) => {\n            if (val) {\n                const inputValue = coerceNumberProperty(val, 0);\n                this.updateValueViaInput(inputValue);\n            }\n        });\n        this.bindValueInputMouseWheel();\n    }\n    ngOnDestroy() {\n        this.unbindValueInputMouseWheel();\n        this.inputStreamSub.unsubscribe();\n    }\n    upBtnClicked() {\n        this.updateValue(this.value + this.step);\n    }\n    downBtnClicked() {\n        this.updateValue(this.value - this.step);\n    }\n    handleInputChange(val) {\n        this.inputStream.next(val);\n    }\n    focusIn() {\n        this.hasFocus = true;\n    }\n    focusOut(value) {\n        this.hasFocus = false;\n        if (value) {\n            const inputValue = coerceNumberProperty(value, 0);\n            this.updateValueViaInput(inputValue);\n        }\n    }\n    updateValue(value) {\n        this.valueChange.emit(value);\n    }\n    updateValueViaInput(value) {\n        if (value > this.max || value < this.min) {\n            return;\n        }\n        this.inputChange.emit(value);\n    }\n    onValueInputMouseWheel(event) {\n        event = event || window.event;\n        const delta = event.wheelDelta || -event.deltaY || -event.detail;\n        if (delta > 0) {\n            if (!this.upBtnDisabled) {\n                this.upBtnClicked();\n            }\n        }\n        else if (delta < 0) {\n            if (!this.downBtnDisabled) {\n                this.downBtnClicked();\n            }\n        }\n        event.preventDefault ? event.preventDefault() : (event.returnValue = false);\n    }\n    bindValueInputMouseWheel() {\n        this.valueInput.nativeElement.addEventListener('onwheel' in document ? 'wheel' : 'mousewheel', this.onValueInputMouseWheelBind);\n    }\n    unbindValueInputMouseWheel() {\n        this.valueInput.nativeElement.removeEventListener('onwheel' in document ? 'wheel' : 'mousewheel', this.onValueInputMouseWheelBind);\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlTimerBoxComponent, deps: [], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlTimerBoxComponent, selector: \"owl-date-time-timer-box\", inputs: { showDivider: \"showDivider\", upBtnAriaLabel: \"upBtnAriaLabel\", upBtnDisabled: \"upBtnDisabled\", downBtnAriaLabel: \"downBtnAriaLabel\", downBtnDisabled: \"downBtnDisabled\", boxValue: \"boxValue\", value: \"value\", min: \"min\", max: \"max\", step: \"step\", inputLabel: \"inputLabel\" }, outputs: { valueChange: \"valueChange\", inputChange: \"inputChange\" }, host: { properties: { \"class.owl-dt-timer-box\": \"owlDTTimerBoxClass\" } }, viewQueries: [{ propertyName: \"valueInput\", first: true, predicate: [\"valueInput\"], descendants: true, static: true }], exportAs: [\"owlDateTimeTimerBox\"], ngImport: i0, template: \"<div *ngIf=\\\"showDivider\\\" class=\\\"owl-dt-timer-divider\\\" aria-hidden=\\\"true\\\"></div>\\n<button class=\\\"owl-dt-control-button owl-dt-control-arrow-button\\\"\\n        type=\\\"button\\\" tabindex=\\\"-1\\\"\\n        [disabled]=\\\"upBtnDisabled\\\"\\n        [attr.aria-label]=\\\"upBtnAriaLabel\\\"\\n        (click)=\\\"upBtnClicked()\\\">\\n    <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n        <!-- <editor-fold desc=\\\"SVG Arrow Up\\\"> -->\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n                 version=\\\"1.1\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 451.847 451.846\\\"\\n                 style=\\\"enable-background:new 0 0 451.847 451.846;\\\" xml:space=\\\"preserve\\\"\\n                 width=\\\"100%\\\" height=\\\"100%\\\">\\n                    <path d=\\\"M248.292,106.406l194.281,194.29c12.365,12.359,12.365,32.391,0,44.744c-12.354,12.354-32.391,12.354-44.744,0\\n                        L225.923,173.529L54.018,345.44c-12.36,12.354-32.395,12.354-44.748,0c-12.359-12.354-12.359-32.391,0-44.75L203.554,106.4\\n                        c6.18-6.174,14.271-9.259,22.369-9.259C234.018,97.141,242.115,100.232,248.292,106.406z\\\"/>\\n                </svg>\\n        <!-- </editor-fold> -->\\n    </span>\\n</button>\\n<label class=\\\"owl-dt-timer-content\\\">\\n    <input class=\\\"owl-dt-timer-input\\\" maxlength=\\\"2\\\"\\n           [value]=\\\"displayValue\\\"\\n           (keydown.arrowup)=\\\"!upBtnDisabled && upBtnClicked()\\\"\\n           (keydown.arrowdown)=\\\"!downBtnDisabled && downBtnClicked()\\\"\\n           (input)=\\\"handleInputChange(valueInput.value)\\\"\\n           (focusin)=\\\"focusIn()\\\"\\n           (focusout)=\\\"focusOut(valueInput.value)\\\"\\n           #valueInput>\\n    <span class=\\\"owl-hidden-accessible\\\">{{inputLabel}}</span>\\n</label>\\n<button class=\\\"owl-dt-control-button owl-dt-control-arrow-button\\\"\\n        type=\\\"button\\\" tabindex=\\\"-1\\\"\\n        [disabled]=\\\"downBtnDisabled\\\"\\n        [attr.aria-label]=\\\"downBtnAriaLabel\\\"\\n        (click)=\\\"downBtnClicked()\\\">\\n    <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n        <!-- <editor-fold desc=\\\"SVG Arrow Down\\\"> -->\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n                 version=\\\"1.1\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 451.847 451.846\\\"\\n                 style=\\\"enable-background:new 0 0 451.847 451.846;\\\" xml:space=\\\"preserve\\\"\\n                 width=\\\"100%\\\" height=\\\"100%\\\">\\n                    <path d=\\\"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751\\n                        c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0\\n                        c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z\\\"/>\\n                </svg>\\n        <!-- </editor-fold> -->\\n    </span>\\n</button>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlTimerBoxComponent, decorators: [{\n            type: Component,\n            args: [{ exportAs: 'owlDateTimeTimerBox', selector: 'owl-date-time-timer-box', preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, host: {\n                        '[class.owl-dt-timer-box]': 'owlDTTimerBoxClass'\n                    }, template: \"<div *ngIf=\\\"showDivider\\\" class=\\\"owl-dt-timer-divider\\\" aria-hidden=\\\"true\\\"></div>\\n<button class=\\\"owl-dt-control-button owl-dt-control-arrow-button\\\"\\n        type=\\\"button\\\" tabindex=\\\"-1\\\"\\n        [disabled]=\\\"upBtnDisabled\\\"\\n        [attr.aria-label]=\\\"upBtnAriaLabel\\\"\\n        (click)=\\\"upBtnClicked()\\\">\\n    <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n        <!-- <editor-fold desc=\\\"SVG Arrow Up\\\"> -->\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n                 version=\\\"1.1\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 451.847 451.846\\\"\\n                 style=\\\"enable-background:new 0 0 451.847 451.846;\\\" xml:space=\\\"preserve\\\"\\n                 width=\\\"100%\\\" height=\\\"100%\\\">\\n                    <path d=\\\"M248.292,106.406l194.281,194.29c12.365,12.359,12.365,32.391,0,44.744c-12.354,12.354-32.391,12.354-44.744,0\\n                        L225.923,173.529L54.018,345.44c-12.36,12.354-32.395,12.354-44.748,0c-12.359-12.354-12.359-32.391,0-44.75L203.554,106.4\\n                        c6.18-6.174,14.271-9.259,22.369-9.259C234.018,97.141,242.115,100.232,248.292,106.406z\\\"/>\\n                </svg>\\n        <!-- </editor-fold> -->\\n    </span>\\n</button>\\n<label class=\\\"owl-dt-timer-content\\\">\\n    <input class=\\\"owl-dt-timer-input\\\" maxlength=\\\"2\\\"\\n           [value]=\\\"displayValue\\\"\\n           (keydown.arrowup)=\\\"!upBtnDisabled && upBtnClicked()\\\"\\n           (keydown.arrowdown)=\\\"!downBtnDisabled && downBtnClicked()\\\"\\n           (input)=\\\"handleInputChange(valueInput.value)\\\"\\n           (focusin)=\\\"focusIn()\\\"\\n           (focusout)=\\\"focusOut(valueInput.value)\\\"\\n           #valueInput>\\n    <span class=\\\"owl-hidden-accessible\\\">{{inputLabel}}</span>\\n</label>\\n<button class=\\\"owl-dt-control-button owl-dt-control-arrow-button\\\"\\n        type=\\\"button\\\" tabindex=\\\"-1\\\"\\n        [disabled]=\\\"downBtnDisabled\\\"\\n        [attr.aria-label]=\\\"downBtnAriaLabel\\\"\\n        (click)=\\\"downBtnClicked()\\\">\\n    <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n        <!-- <editor-fold desc=\\\"SVG Arrow Down\\\"> -->\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n                 version=\\\"1.1\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 451.847 451.846\\\"\\n                 style=\\\"enable-background:new 0 0 451.847 451.846;\\\" xml:space=\\\"preserve\\\"\\n                 width=\\\"100%\\\" height=\\\"100%\\\">\\n                    <path d=\\\"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751\\n                        c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0\\n                        c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z\\\"/>\\n                </svg>\\n        <!-- </editor-fold> -->\\n    </span>\\n</button>\\n\" }]\n        }], ctorParameters: () => [], propDecorators: { showDivider: [{\n                type: Input\n            }], upBtnAriaLabel: [{\n                type: Input\n            }], upBtnDisabled: [{\n                type: Input\n            }], downBtnAriaLabel: [{\n                type: Input\n            }], downBtnDisabled: [{\n                type: Input\n            }], boxValue: [{\n                type: Input\n            }], value: [{\n                type: Input\n            }], min: [{\n                type: Input\n            }], max: [{\n                type: Input\n            }], step: [{\n                type: Input\n            }], inputLabel: [{\n                type: Input\n            }], valueChange: [{\n                type: Output\n            }], inputChange: [{\n                type: Output\n            }], valueInput: [{\n                type: ViewChild,\n                args: ['valueInput', { static: true }]\n            }] } });\n\n/**\n * timer.component\n */\nclass OwlTimerComponent {\n    get pickerMoment() {\n        return this._pickerMoment;\n    }\n    set pickerMoment(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._pickerMoment =\n            this.getValidDate(value) || this.dateTimeAdapter.now();\n    }\n    get minDateTime() {\n        return this._minDateTime;\n    }\n    set minDateTime(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._minDateTime = this.getValidDate(value);\n    }\n    get maxDateTime() {\n        return this._maxDateTime;\n    }\n    set maxDateTime(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this._maxDateTime = this.getValidDate(value);\n    }\n    get hourValue() {\n        return this.dateTimeAdapter.getHours(this.pickerMoment);\n    }\n    /**\n     * The value would be displayed in hourBox.\n     * We need this because the value displayed in hourBox it not\n     * the same as the hourValue when the timer is in hour12Timer mode.\n     * */\n    get hourBoxValue() {\n        let hours = this.hourValue;\n        if (!this.hour12Timer) {\n            return hours;\n        }\n        else {\n            if (hours === 0) {\n                hours = 12;\n                this.isPM = false;\n            }\n            else if (hours > 0 && hours < 12) {\n                this.isPM = false;\n            }\n            else if (hours === 12) {\n                this.isPM = true;\n            }\n            else if (hours > 12 && hours < 24) {\n                hours = hours - 12;\n                this.isPM = true;\n            }\n            return hours;\n        }\n    }\n    get minuteValue() {\n        return this.dateTimeAdapter.getMinutes(this.pickerMoment);\n    }\n    get secondValue() {\n        return this.dateTimeAdapter.getSeconds(this.pickerMoment);\n    }\n    get upHourButtonLabel() {\n        return this.pickerIntl.upHourLabel;\n    }\n    get downHourButtonLabel() {\n        return this.pickerIntl.downHourLabel;\n    }\n    get upMinuteButtonLabel() {\n        return this.pickerIntl.upMinuteLabel;\n    }\n    get downMinuteButtonLabel() {\n        return this.pickerIntl.downMinuteLabel;\n    }\n    get upSecondButtonLabel() {\n        return this.pickerIntl.upSecondLabel;\n    }\n    get downSecondButtonLabel() {\n        return this.pickerIntl.downSecondLabel;\n    }\n    get hour12ButtonLabel() {\n        return this.isPM\n            ? this.pickerIntl.hour12PMLabel\n            : this.pickerIntl.hour12AMLabel;\n    }\n    get owlDTTimerClass() {\n        return true;\n    }\n    get owlDTTimeTabIndex() {\n        return -1;\n    }\n    constructor(ngZone, elmRef, pickerIntl, cdRef, dateTimeAdapter) {\n        this.ngZone = ngZone;\n        this.elmRef = elmRef;\n        this.pickerIntl = pickerIntl;\n        this.cdRef = cdRef;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.isPM = false; // a flag indicates the current timer moment is in PM or AM\n        /**\n         * Hours to change per step\n         */\n        this.stepHour = 1;\n        /**\n         * Minutes to change per step\n         */\n        this.stepMinute = 1;\n        /**\n         * Seconds to change per step\n         */\n        this.stepSecond = 1;\n        this.selectedChange = new EventEmitter();\n    }\n    ngOnInit() { }\n    /**\n     * Focus to the host element\n     * */\n    focus() {\n        this.ngZone.runOutsideAngular(() => {\n            this.ngZone.onStable\n                .asObservable()\n                .pipe(take(1))\n                .subscribe(() => {\n                this.elmRef.nativeElement.focus();\n            });\n        });\n    }\n    /**\n     * Set the hour value via typing into timer box input\n     * We need this to handle the hour value when the timer is in hour12 mode\n     * */\n    setHourValueViaInput(hours) {\n        if (this.hour12Timer && this.isPM && hours >= 1 && hours <= 11) {\n            hours = hours + 12;\n        }\n        else if (this.hour12Timer && !this.isPM && hours === 12) {\n            hours = 0;\n        }\n        this.setHourValue(hours);\n    }\n    setHourValue(hours) {\n        const m = this.dateTimeAdapter.setHours(this.pickerMoment, hours);\n        this.selectedChange.emit(m);\n        this.cdRef.markForCheck();\n    }\n    setMinuteValue(minutes) {\n        const m = this.dateTimeAdapter.setMinutes(this.pickerMoment, minutes);\n        this.selectedChange.emit(m);\n        this.cdRef.markForCheck();\n    }\n    setSecondValue(seconds) {\n        const m = this.dateTimeAdapter.setSeconds(this.pickerMoment, seconds);\n        this.selectedChange.emit(m);\n        this.cdRef.markForCheck();\n    }\n    setMeridiem(event) {\n        this.isPM = !this.isPM;\n        let hours = this.hourValue;\n        if (this.isPM) {\n            hours = hours + 12;\n        }\n        else {\n            hours = hours - 12;\n        }\n        if (hours >= 0 && hours <= 23) {\n            this.setHourValue(hours);\n        }\n        this.cdRef.markForCheck();\n        event.preventDefault();\n    }\n    /**\n     * Check if the up hour button is enabled\n     */\n    upHourEnabled() {\n        return (!this.maxDateTime ||\n            this.compareHours(this.stepHour, this.maxDateTime) < 1);\n    }\n    /**\n     * Check if the down hour button is enabled\n     */\n    downHourEnabled() {\n        return (!this.minDateTime ||\n            this.compareHours(-this.stepHour, this.minDateTime) > -1);\n    }\n    /**\n     * Check if the up minute button is enabled\n     */\n    upMinuteEnabled() {\n        return (!this.maxDateTime ||\n            this.compareMinutes(this.stepMinute, this.maxDateTime) < 1);\n    }\n    /**\n     * Check if the down minute button is enabled\n     */\n    downMinuteEnabled() {\n        return (!this.minDateTime ||\n            this.compareMinutes(-this.stepMinute, this.minDateTime) > -1);\n    }\n    /**\n     * Check if the up second button is enabled\n     */\n    upSecondEnabled() {\n        return (!this.maxDateTime ||\n            this.compareSeconds(this.stepSecond, this.maxDateTime) < 1);\n    }\n    /**\n     * Check if the down second button is enabled\n     */\n    downSecondEnabled() {\n        return (!this.minDateTime ||\n            this.compareSeconds(-this.stepSecond, this.minDateTime) > -1);\n    }\n    /**\n     * PickerMoment's hour value +/- certain amount and compare it to the give date\n     * 1 is after the comparedDate\n     * -1 is before the comparedDate\n     * 0 is equal the comparedDate\n     * */\n    compareHours(amount, comparedDate) {\n        const hours = this.dateTimeAdapter.getHours(this.pickerMoment) + amount;\n        const result = this.dateTimeAdapter.setHours(this.pickerMoment, hours);\n        return this.dateTimeAdapter.compare(result, comparedDate);\n    }\n    /**\n     * PickerMoment's minute value +/- certain amount and compare it to the give date\n     * 1 is after the comparedDate\n     * -1 is before the comparedDate\n     * 0 is equal the comparedDate\n     * */\n    compareMinutes(amount, comparedDate) {\n        const minutes = this.dateTimeAdapter.getMinutes(this.pickerMoment) + amount;\n        const result = this.dateTimeAdapter.setMinutes(this.pickerMoment, minutes);\n        return this.dateTimeAdapter.compare(result, comparedDate);\n    }\n    /**\n     * PickerMoment's second value +/- certain amount and compare it to the give date\n     * 1 is after the comparedDate\n     * -1 is before the comparedDate\n     * 0 is equal the comparedDate\n     * */\n    compareSeconds(amount, comparedDate) {\n        const seconds = this.dateTimeAdapter.getSeconds(this.pickerMoment) + amount;\n        const result = this.dateTimeAdapter.setSeconds(this.pickerMoment, seconds);\n        return this.dateTimeAdapter.compare(result, comparedDate);\n    }\n    /**\n     * Get a valid date object\n     */\n    getValidDate(obj) {\n        return this.dateTimeAdapter.isDateInstance(obj) &&\n            this.dateTimeAdapter.isValid(obj)\n            ? obj\n            : null;\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlTimerComponent, deps: [{ token: i0.NgZone }, { token: i0.ElementRef }, { token: OwlDateTimeIntl }, { token: i0.ChangeDetectorRef }, { token: DateTimeAdapter, optional: true }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlTimerComponent, selector: \"owl-date-time-timer\", inputs: { pickerMoment: \"pickerMoment\", minDateTime: \"minDateTime\", maxDateTime: \"maxDateTime\", showSecondsTimer: \"showSecondsTimer\", hour12Timer: \"hour12Timer\", stepHour: \"stepHour\", stepMinute: \"stepMinute\", stepSecond: \"stepSecond\" }, outputs: { selectedChange: \"selectedChange\" }, host: { properties: { \"class.owl-dt-timer\": \"owlDTTimerClass\", \"attr.tabindex\": \"owlDTTimeTabIndex\" } }, exportAs: [\"owlDateTimeTimer\"], ngImport: i0, template: \"<owl-date-time-timer-box\\n        [upBtnAriaLabel]=\\\"upHourButtonLabel\\\"\\n        [downBtnAriaLabel]=\\\"downHourButtonLabel\\\"\\n        [upBtnDisabled]=\\\"!upHourEnabled()\\\"\\n        [downBtnDisabled]=\\\"!downHourEnabled()\\\"\\n        [boxValue]=\\\"hourBoxValue\\\"\\n        [value]=\\\"hourValue\\\" [min]=\\\"0\\\" [max]=\\\"23\\\"\\n        [step]=\\\"stepHour\\\" [inputLabel]=\\\"'Hour'\\\"\\n        (inputChange)=\\\"setHourValueViaInput($event)\\\"\\n        (valueChange)=\\\"setHourValue($event)\\\"></owl-date-time-timer-box>\\n<owl-date-time-timer-box\\n        [showDivider]=\\\"true\\\"\\n        [upBtnAriaLabel]=\\\"upMinuteButtonLabel\\\"\\n        [downBtnAriaLabel]=\\\"downMinuteButtonLabel\\\"\\n        [upBtnDisabled]=\\\"!upMinuteEnabled()\\\"\\n        [downBtnDisabled]=\\\"!downMinuteEnabled()\\\"\\n        [value]=\\\"minuteValue\\\" [min]=\\\"0\\\" [max]=\\\"59\\\"\\n        [step]=\\\"stepMinute\\\" [inputLabel]=\\\"'Minute'\\\"\\n        (inputChange)=\\\"setMinuteValue($event)\\\"\\n        (valueChange)=\\\"setMinuteValue($event)\\\"></owl-date-time-timer-box>\\n<owl-date-time-timer-box\\n        *ngIf=\\\"showSecondsTimer\\\"\\n        [showDivider]=\\\"true\\\"\\n        [upBtnAriaLabel]=\\\"upSecondButtonLabel\\\"\\n        [downBtnAriaLabel]=\\\"downSecondButtonLabel\\\"\\n        [upBtnDisabled]=\\\"!upSecondEnabled()\\\"\\n        [downBtnDisabled]=\\\"!downSecondEnabled()\\\"\\n        [value]=\\\"secondValue\\\" [min]=\\\"0\\\" [max]=\\\"59\\\"\\n        [step]=\\\"stepSecond\\\" [inputLabel]=\\\"'Second'\\\"\\n        (inputChange)=\\\"setSecondValue($event)\\\"\\n        (valueChange)=\\\"setSecondValue($event)\\\"></owl-date-time-timer-box>\\n\\n<div *ngIf=\\\"hour12Timer\\\" class=\\\"owl-dt-timer-hour12\\\">\\n    <button class=\\\"owl-dt-control-button owl-dt-timer-hour12-box\\\"\\n            type=\\\"button\\\" tabindex=\\\"0\\\"\\n            (click)=\\\"setMeridiem($event)\\\">\\n        <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n            {{hour12ButtonLabel}}\\n        </span>\\n    </button>\\n</div>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"component\", type: OwlTimerBoxComponent, selector: \"owl-date-time-timer-box\", inputs: [\"showDivider\", \"upBtnAriaLabel\", \"upBtnDisabled\", \"downBtnAriaLabel\", \"downBtnDisabled\", \"boxValue\", \"value\", \"min\", \"max\", \"step\", \"inputLabel\"], outputs: [\"valueChange\", \"inputChange\"], exportAs: [\"owlDateTimeTimerBox\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlTimerComponent, decorators: [{\n            type: Component,\n            args: [{ exportAs: 'owlDateTimeTimer', selector: 'owl-date-time-timer', preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, host: {\n                        '[class.owl-dt-timer]': 'owlDTTimerClass',\n                        '[attr.tabindex]': 'owlDTTimeTabIndex'\n                    }, template: \"<owl-date-time-timer-box\\n        [upBtnAriaLabel]=\\\"upHourButtonLabel\\\"\\n        [downBtnAriaLabel]=\\\"downHourButtonLabel\\\"\\n        [upBtnDisabled]=\\\"!upHourEnabled()\\\"\\n        [downBtnDisabled]=\\\"!downHourEnabled()\\\"\\n        [boxValue]=\\\"hourBoxValue\\\"\\n        [value]=\\\"hourValue\\\" [min]=\\\"0\\\" [max]=\\\"23\\\"\\n        [step]=\\\"stepHour\\\" [inputLabel]=\\\"'Hour'\\\"\\n        (inputChange)=\\\"setHourValueViaInput($event)\\\"\\n        (valueChange)=\\\"setHourValue($event)\\\"></owl-date-time-timer-box>\\n<owl-date-time-timer-box\\n        [showDivider]=\\\"true\\\"\\n        [upBtnAriaLabel]=\\\"upMinuteButtonLabel\\\"\\n        [downBtnAriaLabel]=\\\"downMinuteButtonLabel\\\"\\n        [upBtnDisabled]=\\\"!upMinuteEnabled()\\\"\\n        [downBtnDisabled]=\\\"!downMinuteEnabled()\\\"\\n        [value]=\\\"minuteValue\\\" [min]=\\\"0\\\" [max]=\\\"59\\\"\\n        [step]=\\\"stepMinute\\\" [inputLabel]=\\\"'Minute'\\\"\\n        (inputChange)=\\\"setMinuteValue($event)\\\"\\n        (valueChange)=\\\"setMinuteValue($event)\\\"></owl-date-time-timer-box>\\n<owl-date-time-timer-box\\n        *ngIf=\\\"showSecondsTimer\\\"\\n        [showDivider]=\\\"true\\\"\\n        [upBtnAriaLabel]=\\\"upSecondButtonLabel\\\"\\n        [downBtnAriaLabel]=\\\"downSecondButtonLabel\\\"\\n        [upBtnDisabled]=\\\"!upSecondEnabled()\\\"\\n        [downBtnDisabled]=\\\"!downSecondEnabled()\\\"\\n        [value]=\\\"secondValue\\\" [min]=\\\"0\\\" [max]=\\\"59\\\"\\n        [step]=\\\"stepSecond\\\" [inputLabel]=\\\"'Second'\\\"\\n        (inputChange)=\\\"setSecondValue($event)\\\"\\n        (valueChange)=\\\"setSecondValue($event)\\\"></owl-date-time-timer-box>\\n\\n<div *ngIf=\\\"hour12Timer\\\" class=\\\"owl-dt-timer-hour12\\\">\\n    <button class=\\\"owl-dt-control-button owl-dt-timer-hour12-box\\\"\\n            type=\\\"button\\\" tabindex=\\\"0\\\"\\n            (click)=\\\"setMeridiem($event)\\\">\\n        <span class=\\\"owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n            {{hour12ButtonLabel}}\\n        </span>\\n    </button>\\n</div>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.NgZone }, { type: i0.ElementRef }, { type: OwlDateTimeIntl }, { type: i0.ChangeDetectorRef }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }], propDecorators: { pickerMoment: [{\n                type: Input\n            }], minDateTime: [{\n                type: Input\n            }], maxDateTime: [{\n                type: Input\n            }], showSecondsTimer: [{\n                type: Input\n            }], hour12Timer: [{\n                type: Input\n            }], stepHour: [{\n                type: Input\n            }], stepMinute: [{\n                type: Input\n            }], stepSecond: [{\n                type: Input\n            }], selectedChange: [{\n                type: Output\n            }] } });\n\n/**\n * date-time-picker.animations\n */\nconst owlDateTimePickerAnimations = {\n    transformPicker: trigger('transformPicker', [\n        state('void', style({ opacity: 0, transform: 'scale(1, 0)' })),\n        state('enter', style({ opacity: 1, transform: 'scale(1, 1)' })),\n        transition('void => enter', group([\n            query('@fadeInPicker', animateChild(), { optional: true }),\n            animate('400ms cubic-bezier(0.25, 0.8, 0.25, 1)')\n        ])),\n        transition('enter => void', animate('100ms linear', style({ opacity: 0 })))\n    ]),\n    fadeInPicker: trigger('fadeInPicker', [\n        state('enter', style({ opacity: 1 })),\n        state('void', style({ opacity: 0 })),\n        transition('void => enter', animate('400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)')),\n    ])\n};\n\n/**\n * date-time-picker-container.component\n */\nclass OwlDateTimeContainerComponent {\n    get hidePickerStream() {\n        return this.hidePicker$.asObservable();\n    }\n    get confirmSelectedStream() {\n        return this.confirmSelected$.asObservable();\n    }\n    get beforePickerOpenedStream() {\n        return this.beforePickerOpened$.asObservable();\n    }\n    get pickerOpenedStream() {\n        return this.pickerOpened$.asObservable();\n    }\n    get pickerMoment() {\n        return this._clamPickerMoment;\n    }\n    set pickerMoment(value) {\n        if (value) {\n            this._clamPickerMoment = this.dateTimeAdapter.clampDate(value, this.picker.minDateTime, this.picker.maxDateTime);\n        }\n        this.cdRef.markForCheck();\n    }\n    get pickerType() {\n        return this.picker.pickerType;\n    }\n    get cancelLabel() {\n        return this.pickerIntl.cancelBtnLabel;\n    }\n    get setLabel() {\n        return this.pickerIntl.setBtnLabel;\n    }\n    /**\n     * The range 'from' label\n     * */\n    get fromLabel() {\n        return this.pickerIntl.rangeFromLabel;\n    }\n    /**\n     * The range 'to' label\n     * */\n    get toLabel() {\n        return this.pickerIntl.rangeToLabel;\n    }\n    /**\n     * The range 'from' formatted value\n     * */\n    get fromFormattedValue() {\n        const value = this.picker.selecteds[0];\n        return value\n            ? this.dateTimeAdapter.format(value, this.picker.formatString)\n            : '';\n    }\n    /**\n     * The range 'to' formatted value\n     * */\n    get toFormattedValue() {\n        const value = this.picker.selecteds[1];\n        return value\n            ? this.dateTimeAdapter.format(value, this.picker.formatString)\n            : '';\n    }\n    /**\n     * Cases in which the control buttons show in the picker\n     * 1) picker mode is 'dialog'\n     * 2) picker type is NOT 'calendar' and the picker mode is NOT 'inline'\n     * */\n    get showControlButtons() {\n        return (this.picker.pickerMode === 'dialog' ||\n            (this.picker.pickerType !== 'calendar' &&\n                this.picker.pickerMode !== 'inline'));\n    }\n    get containerElm() {\n        return this.elmRef.nativeElement;\n    }\n    get owlDTContainerClass() {\n        return true;\n    }\n    get owlDTPopupContainerClass() {\n        return this.picker.pickerMode === 'popup';\n    }\n    get owlDTDialogContainerClass() {\n        return this.picker.pickerMode === 'dialog';\n    }\n    get owlDTInlineContainerClass() {\n        return this.picker.pickerMode === 'inline';\n    }\n    get owlDTContainerDisabledClass() {\n        return this.picker.disabled;\n    }\n    get owlDTContainerId() {\n        return this.picker.id;\n    }\n    get owlDTContainerAnimation() {\n        return this.picker.pickerMode === 'inline' ? '' : 'enter';\n    }\n    constructor(cdRef, elmRef, pickerIntl, dateTimeAdapter) {\n        this.cdRef = cdRef;\n        this.elmRef = elmRef;\n        this.pickerIntl = pickerIntl;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.activeSelectedIndex = 0; // The current active SelectedIndex in range select mode (0: 'from', 1: 'to')\n        /**\n         * Stream emits when try to hide picker\n         * */\n        this.hidePicker$ = new Subject();\n        /**\n         * Stream emits when try to confirm the selected value\n         * */\n        this.confirmSelected$ = new Subject();\n        this.beforePickerOpened$ = new Subject();\n        this.pickerOpened$ = new Subject();\n    }\n    ngOnInit() {\n        if (this.picker.selectMode === 'range') {\n            if (this.picker.selecteds[0]) {\n                this.retainStartTime = this.dateTimeAdapter.clone(this.picker.selecteds[0]);\n            }\n            if (this.picker.selecteds[1]) {\n                this.retainEndTime = this.dateTimeAdapter.clone(this.picker.selecteds[1]);\n            }\n        }\n    }\n    ngAfterContentInit() {\n        this.initPicker();\n    }\n    ngAfterViewInit() {\n        this.focusPicker();\n    }\n    handleContainerAnimationStart(event) {\n        const toState = event.toState;\n        if (toState === 'enter') {\n            this.beforePickerOpened$.next(null);\n        }\n    }\n    handleContainerAnimationDone(event) {\n        const toState = event.toState;\n        if (toState === 'enter') {\n            this.pickerOpened$.next(null);\n        }\n    }\n    dateSelected(date) {\n        let result;\n        if (this.picker.isInSingleMode) {\n            result = this.dateSelectedInSingleMode(date);\n            if (result) {\n                this.pickerMoment = result;\n                this.picker.select(result);\n            }\n            else {\n                // we close the picker when result is null and pickerType is calendar.\n                if (this.pickerType === 'calendar') {\n                    this.hidePicker$.next(null);\n                }\n            }\n            return;\n        }\n        if (this.picker.isInRangeMode) {\n            result = this.dateSelectedInRangeMode(date);\n            if (result) {\n                this.pickerMoment = result[this.activeSelectedIndex];\n                this.picker.select(result);\n            }\n        }\n    }\n    timeSelected(time) {\n        this.pickerMoment = this.dateTimeAdapter.clone(time);\n        if (!this.picker.dateTimeChecker(this.pickerMoment)) {\n            return;\n        }\n        if (this.picker.isInSingleMode) {\n            this.picker.select(this.pickerMoment);\n            return;\n        }\n        if (this.picker.isInRangeMode) {\n            const selecteds = [...this.picker.selecteds];\n            // check if the 'from' is after 'to' or 'to'is before 'from'\n            // In this case, we set both the 'from' and 'to' the same value\n            if ((this.activeSelectedIndex === 0 &&\n                selecteds[1] &&\n                this.dateTimeAdapter.compare(this.pickerMoment, selecteds[1]) === 1) ||\n                (this.activeSelectedIndex === 1 &&\n                    selecteds[0] &&\n                    this.dateTimeAdapter.compare(this.pickerMoment, selecteds[0]) === -1)) {\n                selecteds[0] = this.pickerMoment;\n                selecteds[1] = this.pickerMoment;\n            }\n            else {\n                selecteds[this.activeSelectedIndex] = this.pickerMoment;\n            }\n            if (selecteds[0]) {\n                this.retainStartTime = this.dateTimeAdapter.clone(selecteds[0]);\n            }\n            if (selecteds[1]) {\n                this.retainEndTime = this.dateTimeAdapter.clone(selecteds[1]);\n            }\n            this.picker.select(selecteds);\n        }\n    }\n    /**\n     * Handle click on cancel button\n     */\n    onCancelClicked(event) {\n        this.hidePicker$.next(null);\n        event.preventDefault();\n        return;\n    }\n    /**\n     * Handle click on set button\n     */\n    onSetClicked(event) {\n        if (!this.picker.dateTimeChecker(this.pickerMoment)) {\n            this.hidePicker$.next(null);\n            event.preventDefault();\n            return;\n        }\n        this.confirmSelected$.next(event);\n        event.preventDefault();\n        return;\n    }\n    /**\n     * Handle click on inform radio group\n     */\n    handleClickOnInfoGroup(event, index) {\n        this.setActiveSelectedIndex(index);\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    /**\n     * Handle click on inform radio group\n     */\n    handleKeydownOnInfoGroup(event, next, index) {\n        switch (event.keyCode) {\n            case DOWN_ARROW:\n            case RIGHT_ARROW:\n            case UP_ARROW:\n            case LEFT_ARROW:\n                next.focus();\n                this.setActiveSelectedIndex(index === 0 ? 1 : 0);\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            case SPACE:\n                this.setActiveSelectedIndex(index);\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            default:\n                return;\n        }\n    }\n    /**\n     * Set the value of activeSelectedIndex\n     */\n    setActiveSelectedIndex(index) {\n        if (this.picker.selectMode === 'range' &&\n            this.activeSelectedIndex !== index) {\n            this.activeSelectedIndex = index;\n            const selected = this.picker.selecteds[this.activeSelectedIndex];\n            if (this.picker.selecteds && selected) {\n                this.pickerMoment = this.dateTimeAdapter.clone(selected);\n            }\n        }\n        return;\n    }\n    initPicker() {\n        this.pickerMoment = this.picker.startAt || this.dateTimeAdapter.now();\n        this.activeSelectedIndex = this.picker.selectMode === 'rangeTo' ? 1 : 0;\n    }\n    /**\n     * Select calendar date in single mode,\n     * it returns null when date is not selected.\n     */\n    dateSelectedInSingleMode(date) {\n        if (this.dateTimeAdapter.isSameDay(date, this.picker.selected)) {\n            return null;\n        }\n        return this.updateAndCheckCalendarDate(date);\n    }\n    /**\n     * Select dates in range Mode\n     */\n    dateSelectedInRangeMode(date) {\n        let from = this.picker.selecteds[0];\n        let to = this.picker.selecteds[1];\n        const result = this.updateAndCheckCalendarDate(date);\n        if (!result) {\n            return null;\n        }\n        // if the given calendar day is after or equal to 'from',\n        // set ths given date as 'to'\n        // otherwise, set it as 'from' and set 'to' to null\n        if (this.picker.selectMode === 'range') {\n            if (this.picker.selecteds &&\n                this.picker.selecteds.length &&\n                !to &&\n                from &&\n                this.dateTimeAdapter.differenceInCalendarDays(result, from) >= 0) {\n                if (this.picker.endAt && !this.retainEndTime) {\n                    to = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(result), this.dateTimeAdapter.getMonth(result), this.dateTimeAdapter.getDate(result), this.dateTimeAdapter.getHours(this.picker.endAt), this.dateTimeAdapter.getMinutes(this.picker.endAt), this.dateTimeAdapter.getSeconds(this.picker.endAt));\n                }\n                else if (this.retainEndTime) {\n                    to = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(result), this.dateTimeAdapter.getMonth(result), this.dateTimeAdapter.getDate(result), this.dateTimeAdapter.getHours(this.retainEndTime), this.dateTimeAdapter.getMinutes(this.retainEndTime), this.dateTimeAdapter.getSeconds(this.retainEndTime));\n                }\n                else {\n                    to = result;\n                }\n                this.activeSelectedIndex = 1;\n            }\n            else {\n                if (this.picker.startAt && !this.retainStartTime) {\n                    from = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(result), this.dateTimeAdapter.getMonth(result), this.dateTimeAdapter.getDate(result), this.dateTimeAdapter.getHours(this.picker.startAt), this.dateTimeAdapter.getMinutes(this.picker.startAt), this.dateTimeAdapter.getSeconds(this.picker.startAt));\n                }\n                else if (this.retainStartTime) {\n                    from = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(result), this.dateTimeAdapter.getMonth(result), this.dateTimeAdapter.getDate(result), this.dateTimeAdapter.getHours(this.retainStartTime), this.dateTimeAdapter.getMinutes(this.retainStartTime), this.dateTimeAdapter.getSeconds(this.retainStartTime));\n                }\n                else {\n                    from = result;\n                }\n                to = null;\n                this.activeSelectedIndex = 0;\n            }\n        }\n        else if (this.picker.selectMode === 'rangeFrom') {\n            from = result;\n            // if the from value is after the to value, set the to value as null\n            if (to && this.dateTimeAdapter.compare(from, to) > 0) {\n                to = null;\n            }\n        }\n        else if (this.picker.selectMode === 'rangeTo') {\n            to = result;\n            // if the from value is after the to value, set the from value as null\n            if (from && this.dateTimeAdapter.compare(from, to) > 0) {\n                from = null;\n            }\n        }\n        return [from, to];\n    }\n    /**\n     * Update the given calendar date's time and check if it is valid\n     * Because the calendar date has 00:00:00 as default time, if the picker type is 'both',\n     * we need to update the given calendar date's time before selecting it.\n     * if it is valid, return the updated dateTime\n     * if it is not valid, return null\n     */\n    updateAndCheckCalendarDate(date) {\n        let result;\n        // if the picker is 'both', update the calendar date's time value\n        if (this.picker.pickerType === 'both') {\n            result = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(date), this.dateTimeAdapter.getMonth(date), this.dateTimeAdapter.getDate(date), this.dateTimeAdapter.getHours(this.pickerMoment), this.dateTimeAdapter.getMinutes(this.pickerMoment), this.dateTimeAdapter.getSeconds(this.pickerMoment));\n            result = this.dateTimeAdapter.clampDate(result, this.picker.minDateTime, this.picker.maxDateTime);\n        }\n        else {\n            result = this.dateTimeAdapter.clone(date);\n        }\n        // check the updated dateTime\n        return this.picker.dateTimeChecker(result) ? result : null;\n    }\n    /**\n     * Focus to the picker\n     * */\n    focusPicker() {\n        if (this.picker.pickerMode === 'inline') {\n            return;\n        }\n        if (this.calendar) {\n            this.calendar.focusActiveCell();\n        }\n        else if (this.timer) {\n            this.timer.focus();\n        }\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeContainerComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i0.ElementRef }, { token: OwlDateTimeIntl }, { token: DateTimeAdapter, optional: true }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlDateTimeContainerComponent, selector: \"owl-date-time-container\", host: { listeners: { \"@transformPicker.start\": \"handleContainerAnimationStart($event)\", \"@transformPicker.done\": \"handleContainerAnimationDone($event)\" }, properties: { \"class.owl-dt-container\": \"owlDTContainerClass\", \"class.owl-dt-popup-container\": \"owlDTPopupContainerClass\", \"class.owl-dt-dialog-container\": \"owlDTDialogContainerClass\", \"class.owl-dt-inline-container\": \"owlDTInlineContainerClass\", \"class.owl-dt-container-disabled\": \"owlDTContainerDisabledClass\", \"attr.id\": \"owlDTContainerId\", \"@transformPicker\": \"owlDTContainerAnimation\" } }, viewQueries: [{ propertyName: \"calendar\", first: true, predicate: OwlCalendarComponent, descendants: true }, { propertyName: \"timer\", first: true, predicate: OwlTimerComponent, descendants: true }], exportAs: [\"owlDateTimeContainer\"], ngImport: i0, template: \"<div [cdkTrapFocus]=\\\"picker.pickerMode !== 'inline'\\\"\\n     [@fadeInPicker]=\\\"picker.pickerMode === 'inline'? '' : 'enter'\\\"\\n     class=\\\"owl-dt-container-inner\\\">\\n\\n    <owl-date-time-calendar\\n            *ngIf=\\\"pickerType === 'both' || pickerType === 'calendar'\\\"\\n            class=\\\"owl-dt-container-row\\\"\\n            [firstDayOfWeek]=\\\"picker.firstDayOfWeek\\\"\\n            [(pickerMoment)]=\\\"pickerMoment\\\"\\n            [selected]=\\\"picker.selected\\\"\\n            [selecteds]=\\\"picker.selecteds\\\"\\n            [selectMode]=\\\"picker.selectMode\\\"\\n            [minDate]=\\\"picker.minDateTime\\\"\\n            [maxDate]=\\\"picker.maxDateTime\\\"\\n            [dateFilter]=\\\"picker.dateTimeFilter\\\"\\n            [startView]=\\\"picker.startView\\\"\\n            [yearOnly]=\\\"picker.yearOnly\\\"\\n            [showCalendarWeeks]=\\\"picker.showCalendarWeeks\\\"\\n            [multiyearOnly]=\\\"picker.multiyearOnly\\\"\\n            [hideOtherMonths]=\\\"picker.hideOtherMonths\\\"\\n            (yearSelected)=\\\"picker.selectYear($event)\\\"\\n            (monthSelected)=\\\"picker.selectMonth($event)\\\"\\n            (dateClicked)=\\\"picker.selectDate($event)\\\"\\n            (selectedChange)=\\\"dateSelected($event)\\\"></owl-date-time-calendar>\\n\\n    <owl-date-time-timer\\n            *ngIf=\\\"pickerType === 'both' || pickerType === 'timer'\\\"\\n            class=\\\"owl-dt-container-row\\\"\\n            [pickerMoment]=\\\"pickerMoment\\\"\\n            [minDateTime]=\\\"picker.minDateTime\\\"\\n            [maxDateTime]=\\\"picker.maxDateTime\\\"\\n            [showSecondsTimer]=\\\"picker.showSecondsTimer\\\"\\n            [hour12Timer]=\\\"picker.hour12Timer\\\"\\n            [stepHour]=\\\"picker.stepHour\\\"\\n            [stepMinute]=\\\"picker.stepMinute\\\"\\n            [stepSecond]=\\\"picker.stepSecond\\\"\\n            (selectedChange)=\\\"timeSelected($event)\\\"></owl-date-time-timer>\\n\\n    <div *ngIf=\\\"picker.isInRangeMode\\\"\\n         role=\\\"radiogroup\\\"\\n         class=\\\"owl-dt-container-info owl-dt-container-row\\\">\\n        <div role=\\\"radio\\\" [tabindex]=\\\"activeSelectedIndex === 0 ? 0 : -1\\\"\\n             [attr.aria-checked]=\\\"activeSelectedIndex === 0\\\"\\n             class=\\\"owl-dt-control owl-dt-container-range owl-dt-container-from\\\"\\n             [ngClass]=\\\"{'owl-dt-container-info-active': activeSelectedIndex === 0}\\\"\\n             (click)=\\\"handleClickOnInfoGroup($event, 0)\\\"\\n             (keydown)=\\\"handleKeydownOnInfoGroup($event, to, 0)\\\" #from>\\n            <span class=\\\"owl-dt-control-content owl-dt-container-range-content\\\" tabindex=\\\"-1\\\">\\n                <span class=\\\"owl-dt-container-info-label\\\">{{fromLabel}}:</span>\\n                <span class=\\\"owl-dt-container-info-value\\\">{{fromFormattedValue}}</span>\\n            </span>\\n        </div>\\n        <div role=\\\"radio\\\" [tabindex]=\\\"activeSelectedIndex === 1 ? 0 : -1\\\"\\n             [attr.aria-checked]=\\\"activeSelectedIndex === 1\\\"\\n             class=\\\"owl-dt-control owl-dt-container-range owl-dt-container-to\\\"\\n             [ngClass]=\\\"{'owl-dt-container-info-active': activeSelectedIndex === 1}\\\"\\n             (click)=\\\"handleClickOnInfoGroup($event, 1)\\\"\\n             (keydown)=\\\"handleKeydownOnInfoGroup($event, from, 1)\\\" #to>\\n            <span class=\\\"owl-dt-control-content owl-dt-container-range-content\\\" tabindex=\\\"-1\\\">\\n                <span class=\\\"owl-dt-container-info-label\\\">{{toLabel}}:</span>\\n                <span class=\\\"owl-dt-container-info-value\\\">{{toFormattedValue}}</span>\\n            </span>\\n        </div>\\n    </div>\\n\\n    <div *ngIf=\\\"showControlButtons\\\" class=\\\"owl-dt-container-buttons owl-dt-container-row\\\">\\n        <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-container-control-button\\\"\\n                type=\\\"button\\\" tabindex=\\\"0\\\"\\n                (click)=\\\"onCancelClicked($event)\\\">\\n            <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n                {{cancelLabel}}\\n            </span>\\n        </button>\\n        <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-container-control-button\\\"\\n                type=\\\"button\\\" tabindex=\\\"0\\\"\\n                (click)=\\\"onSetClicked($event)\\\">\\n            <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n                {{setLabel}}\\n            </span>\\n        </button>\\n    </div>\\n</div>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i4.CdkTrapFocus, selector: \"[cdkTrapFocus]\", inputs: [\"cdkTrapFocus\", \"cdkTrapFocusAutoCapture\"], exportAs: [\"cdkTrapFocus\"] }, { kind: \"component\", type: OwlTimerComponent, selector: \"owl-date-time-timer\", inputs: [\"pickerMoment\", \"minDateTime\", \"maxDateTime\", \"showSecondsTimer\", \"hour12Timer\", \"stepHour\", \"stepMinute\", \"stepSecond\"], outputs: [\"selectedChange\"], exportAs: [\"owlDateTimeTimer\"] }, { kind: \"component\", type: OwlCalendarComponent, selector: \"owl-date-time-calendar\", inputs: [\"minDate\", \"maxDate\", \"pickerMoment\", \"selected\", \"selecteds\", \"dateFilter\", \"firstDayOfWeek\", \"selectMode\", \"startView\", \"yearOnly\", \"showCalendarWeeks\", \"multiyearOnly\", \"hideOtherMonths\"], outputs: [\"pickerMomentChange\", \"dateClicked\", \"selectedChange\", \"userSelection\", \"yearSelected\", \"monthSelected\"], exportAs: [\"owlDateTimeCalendar\"] }], animations: [\n            owlDateTimePickerAnimations.transformPicker,\n            owlDateTimePickerAnimations.fadeInPicker\n        ], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeContainerComponent, decorators: [{\n            type: Component,\n            args: [{ exportAs: 'owlDateTimeContainer', selector: 'owl-date-time-container', changeDetection: ChangeDetectionStrategy.OnPush, preserveWhitespaces: false, animations: [\n                        owlDateTimePickerAnimations.transformPicker,\n                        owlDateTimePickerAnimations.fadeInPicker\n                    ], host: {\n                        '(@transformPicker.start)': 'handleContainerAnimationStart($event)',\n                        '(@transformPicker.done)': 'handleContainerAnimationDone($event)',\n                        '[class.owl-dt-container]': 'owlDTContainerClass',\n                        '[class.owl-dt-popup-container]': 'owlDTPopupContainerClass',\n                        '[class.owl-dt-dialog-container]': 'owlDTDialogContainerClass',\n                        '[class.owl-dt-inline-container]': 'owlDTInlineContainerClass',\n                        '[class.owl-dt-container-disabled]': 'owlDTContainerDisabledClass',\n                        '[attr.id]': 'owlDTContainerId',\n                        '[@transformPicker]': 'owlDTContainerAnimation',\n                    }, template: \"<div [cdkTrapFocus]=\\\"picker.pickerMode !== 'inline'\\\"\\n     [@fadeInPicker]=\\\"picker.pickerMode === 'inline'? '' : 'enter'\\\"\\n     class=\\\"owl-dt-container-inner\\\">\\n\\n    <owl-date-time-calendar\\n            *ngIf=\\\"pickerType === 'both' || pickerType === 'calendar'\\\"\\n            class=\\\"owl-dt-container-row\\\"\\n            [firstDayOfWeek]=\\\"picker.firstDayOfWeek\\\"\\n            [(pickerMoment)]=\\\"pickerMoment\\\"\\n            [selected]=\\\"picker.selected\\\"\\n            [selecteds]=\\\"picker.selecteds\\\"\\n            [selectMode]=\\\"picker.selectMode\\\"\\n            [minDate]=\\\"picker.minDateTime\\\"\\n            [maxDate]=\\\"picker.maxDateTime\\\"\\n            [dateFilter]=\\\"picker.dateTimeFilter\\\"\\n            [startView]=\\\"picker.startView\\\"\\n            [yearOnly]=\\\"picker.yearOnly\\\"\\n            [showCalendarWeeks]=\\\"picker.showCalendarWeeks\\\"\\n            [multiyearOnly]=\\\"picker.multiyearOnly\\\"\\n            [hideOtherMonths]=\\\"picker.hideOtherMonths\\\"\\n            (yearSelected)=\\\"picker.selectYear($event)\\\"\\n            (monthSelected)=\\\"picker.selectMonth($event)\\\"\\n            (dateClicked)=\\\"picker.selectDate($event)\\\"\\n            (selectedChange)=\\\"dateSelected($event)\\\"></owl-date-time-calendar>\\n\\n    <owl-date-time-timer\\n            *ngIf=\\\"pickerType === 'both' || pickerType === 'timer'\\\"\\n            class=\\\"owl-dt-container-row\\\"\\n            [pickerMoment]=\\\"pickerMoment\\\"\\n            [minDateTime]=\\\"picker.minDateTime\\\"\\n            [maxDateTime]=\\\"picker.maxDateTime\\\"\\n            [showSecondsTimer]=\\\"picker.showSecondsTimer\\\"\\n            [hour12Timer]=\\\"picker.hour12Timer\\\"\\n            [stepHour]=\\\"picker.stepHour\\\"\\n            [stepMinute]=\\\"picker.stepMinute\\\"\\n            [stepSecond]=\\\"picker.stepSecond\\\"\\n            (selectedChange)=\\\"timeSelected($event)\\\"></owl-date-time-timer>\\n\\n    <div *ngIf=\\\"picker.isInRangeMode\\\"\\n         role=\\\"radiogroup\\\"\\n         class=\\\"owl-dt-container-info owl-dt-container-row\\\">\\n        <div role=\\\"radio\\\" [tabindex]=\\\"activeSelectedIndex === 0 ? 0 : -1\\\"\\n             [attr.aria-checked]=\\\"activeSelectedIndex === 0\\\"\\n             class=\\\"owl-dt-control owl-dt-container-range owl-dt-container-from\\\"\\n             [ngClass]=\\\"{'owl-dt-container-info-active': activeSelectedIndex === 0}\\\"\\n             (click)=\\\"handleClickOnInfoGroup($event, 0)\\\"\\n             (keydown)=\\\"handleKeydownOnInfoGroup($event, to, 0)\\\" #from>\\n            <span class=\\\"owl-dt-control-content owl-dt-container-range-content\\\" tabindex=\\\"-1\\\">\\n                <span class=\\\"owl-dt-container-info-label\\\">{{fromLabel}}:</span>\\n                <span class=\\\"owl-dt-container-info-value\\\">{{fromFormattedValue}}</span>\\n            </span>\\n        </div>\\n        <div role=\\\"radio\\\" [tabindex]=\\\"activeSelectedIndex === 1 ? 0 : -1\\\"\\n             [attr.aria-checked]=\\\"activeSelectedIndex === 1\\\"\\n             class=\\\"owl-dt-control owl-dt-container-range owl-dt-container-to\\\"\\n             [ngClass]=\\\"{'owl-dt-container-info-active': activeSelectedIndex === 1}\\\"\\n             (click)=\\\"handleClickOnInfoGroup($event, 1)\\\"\\n             (keydown)=\\\"handleKeydownOnInfoGroup($event, from, 1)\\\" #to>\\n            <span class=\\\"owl-dt-control-content owl-dt-container-range-content\\\" tabindex=\\\"-1\\\">\\n                <span class=\\\"owl-dt-container-info-label\\\">{{toLabel}}:</span>\\n                <span class=\\\"owl-dt-container-info-value\\\">{{toFormattedValue}}</span>\\n            </span>\\n        </div>\\n    </div>\\n\\n    <div *ngIf=\\\"showControlButtons\\\" class=\\\"owl-dt-container-buttons owl-dt-container-row\\\">\\n        <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-container-control-button\\\"\\n                type=\\\"button\\\" tabindex=\\\"0\\\"\\n                (click)=\\\"onCancelClicked($event)\\\">\\n            <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n                {{cancelLabel}}\\n            </span>\\n        </button>\\n        <button class=\\\"owl-dt-control owl-dt-control-button owl-dt-container-control-button\\\"\\n                type=\\\"button\\\" tabindex=\\\"0\\\"\\n                (click)=\\\"onSetClicked($event)\\\">\\n            <span class=\\\"owl-dt-control-content owl-dt-control-button-content\\\" tabindex=\\\"-1\\\">\\n                {{setLabel}}\\n            </span>\\n        </button>\\n    </div>\\n</div>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }, { type: OwlDateTimeIntl }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }], propDecorators: { calendar: [{\n                type: ViewChild,\n                args: [OwlCalendarComponent]\n            }], timer: [{\n                type: ViewChild,\n                args: [OwlTimerComponent]\n            }] } });\n\nlet uniqueId = 0;\nclass OwlDialogConfig {\n    constructor() {\n        /**\n         * ID of the element that describes the dialog.\n         */\n        this.ariaDescribedBy = null;\n        /**\n         * Whether to focus the dialog when the dialog is opened\n         */\n        this.autoFocus = true;\n        /** Whether the dialog has a backdrop. */\n        this.hasBackdrop = true;\n        /** Data being injected into the child component. */\n        this.data = null;\n        /** Whether the user can use escape or clicking outside to close a modal. */\n        this.disableClose = false;\n        /**\n         * The ARIA role of the dialog element.\n         */\n        this.role = 'dialog';\n        /**\n         * Custom class for the pane\n         * */\n        this.paneClass = '';\n        /**\n         * Mouse Event\n         * */\n        this.event = null;\n        /**\n         * Custom class for the backdrop\n         * */\n        this.backdropClass = '';\n        /**\n         * Whether the dialog should close when the user goes backwards/forwards in history.\n         * */\n        this.closeOnNavigation = true;\n        /** Width of the dialog. */\n        this.width = '';\n        /** Height of the dialog. */\n        this.height = '';\n        /**\n         * The max-width of the overlay panel.\n         * If a number is provided, pixel units are assumed.\n         * */\n        this.maxWidth = '85vw';\n        /**\n         * The scroll strategy when the dialog is open\n         * Learn more this from https://material.angular.io/cdk/overlay/overview#scroll-strategies\n         * */\n        this.scrollStrategy = new NoopScrollStrategy();\n        this.id = `owl-dialog-${uniqueId++}`;\n    }\n}\n\nclass OwlDialogRef {\n    constructor(overlayRef, container, id, location) {\n        this.overlayRef = overlayRef;\n        this.container = container;\n        this.id = id;\n        this._beforeClose$ = new Subject();\n        this._beforeOpen$ = new Subject();\n        this._afterOpen$ = new Subject();\n        this._afterClosed$ = new Subject();\n        /** Subscription to changes in the user's location. */\n        this.locationChanged = Subscription.EMPTY;\n        /** Whether the user is allowed to close the dialog. */\n        this.disableClose = true;\n        this.disableClose = this.container.config.disableClose;\n        this.container.animationStateChanged\n            .pipe(filter((event) => event.phaseName === 'start' && event.toState === 'enter'), take$1(1))\n            .subscribe(() => {\n            this._beforeOpen$.next(null);\n            this._beforeOpen$.complete();\n        });\n        this.container.animationStateChanged\n            .pipe(filter((event) => event.phaseName === 'done' && event.toState === 'enter'), take$1(1))\n            .subscribe(() => {\n            this._afterOpen$.next(null);\n            this._afterOpen$.complete();\n        });\n        this.container.animationStateChanged\n            .pipe(filter((event) => event.phaseName === 'done' && event.toState === 'exit'), take$1(1))\n            .subscribe(() => {\n            this.overlayRef.dispose();\n            this.locationChanged.unsubscribe();\n            this._afterClosed$.next(this.result);\n            this._afterClosed$.complete();\n            this.componentInstance = null;\n        });\n        this.overlayRef.keydownEvents()\n            .pipe(filter(event => event.keyCode === ESCAPE && !this.disableClose))\n            .subscribe(() => this.close());\n        if (location) {\n            this.locationChanged = location.subscribe(() => {\n                if (this.container.config.closeOnNavigation) {\n                    this.close();\n                }\n            });\n        }\n    }\n    close(dialogResult) {\n        this.result = dialogResult;\n        this.container.animationStateChanged\n            .pipe(filter((event) => event.phaseName === 'start'), take$1(1))\n            .subscribe(() => {\n            this._beforeClose$.next(dialogResult);\n            this._beforeClose$.complete();\n            this.overlayRef.detachBackdrop();\n        });\n        this.container.startExitAnimation();\n    }\n    /**\n     * Gets an observable that emits when the overlay's backdrop has been clicked.\n     */\n    backdropClick() {\n        return this.overlayRef.backdropClick();\n    }\n    /**\n     * Gets an observable that emits when keydown events are targeted on the overlay.\n     */\n    keydownEvents() {\n        return this.overlayRef.keydownEvents();\n    }\n    /**\n     * Updates the dialog's position.\n     * @param position New dialog position.\n     */\n    updatePosition(position) {\n        const strategy = this.getPositionStrategy();\n        if (position && (position.left || position.right)) {\n            position.left ? strategy.left(position.left) : strategy.right(position.right);\n        }\n        else {\n            strategy.centerHorizontally();\n        }\n        if (position && (position.top || position.bottom)) {\n            position.top ? strategy.top(position.top) : strategy.bottom(position.bottom);\n        }\n        else {\n            strategy.centerVertically();\n        }\n        this.overlayRef.updatePosition();\n        return this;\n    }\n    /**\n     * Updates the dialog's width and height.\n     * @param width New width of the dialog.\n     * @param height New height of the dialog.\n     */\n    updateSize(width = 'auto', height = 'auto') {\n        this.getPositionStrategy().width(width).height(height);\n        this.overlayRef.updatePosition();\n        return this;\n    }\n    isAnimating() {\n        return this.container.isAnimating;\n    }\n    beforeOpen() {\n        return this._beforeOpen$.asObservable();\n    }\n    afterOpen() {\n        return this._afterOpen$.asObservable();\n    }\n    beforeClose() {\n        return this._beforeClose$.asObservable();\n    }\n    afterClosed() {\n        return this._afterClosed$.asObservable();\n    }\n    /** Fetches the position strategy object from the overlay ref. */\n    getPositionStrategy() {\n        return this.overlayRef.getConfig().positionStrategy;\n    }\n}\n\n/**\n * dialog-container.component\n */\nconst zoomFadeIn = {\n    opacity: 0,\n    transform: 'translateX({{ x }}) translateY({{ y }}) scale({{scale}})'\n};\nconst zoomFadeInFrom = {\n    opacity: 0,\n    transform: 'translateX({{ x }}) translateY({{ y }}) scale({{scale}})',\n    transformOrigin: '{{ ox }} {{ oy }}'\n};\nclass OwlDialogContainerComponent extends BasePortalOutlet {\n    get config() {\n        return this._config;\n    }\n    get owlDialogContainerClass() {\n        return true;\n    }\n    get owlDialogContainerTabIndex() {\n        return -1;\n    }\n    get owlDialogContainerId() {\n        return this._config.id;\n    }\n    get owlDialogContainerRole() {\n        return this._config.role || null;\n    }\n    get owlDialogContainerAriaLabelledby() {\n        return this.ariaLabelledBy;\n    }\n    get owlDialogContainerAriaDescribedby() {\n        return this._config.ariaDescribedBy || null;\n    }\n    get owlDialogContainerAnimation() {\n        return { value: this.state, params: this.params };\n    }\n    constructor(changeDetector, elementRef, focusTrapFactory, document) {\n        super();\n        this.changeDetector = changeDetector;\n        this.elementRef = elementRef;\n        this.focusTrapFactory = focusTrapFactory;\n        this.document = document;\n        this.portalOutlet = null;\n        /** ID of the element that should be considered as the dialog's label. */\n        this.ariaLabelledBy = null;\n        /** Emits when an animation state changes. */\n        this.animationStateChanged = new EventEmitter();\n        this.isAnimating = false;\n        this.state = 'enter';\n        // for animation purpose\n        this.params = {\n            x: '0px',\n            y: '0px',\n            ox: '50%',\n            oy: '50%',\n            scale: 0\n        };\n        // A variable to hold the focused element before the dialog was open.\n        // This would help us to refocus back to element when the dialog was closed.\n        this.elementFocusedBeforeDialogWasOpened = null;\n    }\n    ngOnInit() { }\n    /**\n     * Attach a ComponentPortal as content to this dialog container.\n     */\n    attachComponentPortal(portal) {\n        if (this.portalOutlet.hasAttached()) {\n            throw Error('Attempting to attach dialog content after content is already attached');\n        }\n        this.savePreviouslyFocusedElement();\n        return this.portalOutlet.attachComponentPortal(portal);\n    }\n    attachTemplatePortal(portal) {\n        throw new Error('Method not implemented.');\n    }\n    setConfig(config) {\n        this._config = config;\n        if (config.event) {\n            this.calculateZoomOrigin(event);\n        }\n    }\n    onAnimationStart(event) {\n        this.isAnimating = true;\n        this.animationStateChanged.emit(event);\n    }\n    onAnimationDone(event) {\n        if (event.toState === 'enter') {\n            this.trapFocus();\n        }\n        else if (event.toState === 'exit') {\n            this.restoreFocus();\n        }\n        this.animationStateChanged.emit(event);\n        this.isAnimating = false;\n    }\n    startExitAnimation() {\n        this.state = 'exit';\n        this.changeDetector.markForCheck();\n    }\n    /**\n     * Calculate origin used in the `zoomFadeInFrom()`\n     * for animation purpose\n     */\n    calculateZoomOrigin(event) {\n        if (!event) {\n            return;\n        }\n        const clientX = event.clientX;\n        const clientY = event.clientY;\n        const wh = window.innerWidth / 2;\n        const hh = window.innerHeight / 2;\n        const x = clientX - wh;\n        const y = clientY - hh;\n        const ox = clientX / window.innerWidth;\n        const oy = clientY / window.innerHeight;\n        this.params.x = `${x}px`;\n        this.params.y = `${y}px`;\n        this.params.ox = `${ox * 100}%`;\n        this.params.oy = `${oy * 100}%`;\n        this.params.scale = 0;\n        return;\n    }\n    /**\n     * Save the focused element before dialog was open\n     */\n    savePreviouslyFocusedElement() {\n        if (this.document) {\n            this.elementFocusedBeforeDialogWasOpened = this.document\n                .activeElement;\n            Promise.resolve().then(() => this.elementRef.nativeElement.focus());\n        }\n    }\n    trapFocus() {\n        if (!this.focusTrap) {\n            this.focusTrap = this.focusTrapFactory.create(this.elementRef.nativeElement);\n        }\n        if (this._config.autoFocus) {\n            this.focusTrap.focusInitialElementWhenReady();\n        }\n    }\n    restoreFocus() {\n        const toFocus = this.elementFocusedBeforeDialogWasOpened;\n        // We need the extra check, because IE can set the `activeElement` to null in some cases.\n        if (toFocus && typeof toFocus.focus === 'function') {\n            toFocus.focus();\n        }\n        if (this.focusTrap) {\n            this.focusTrap.destroy();\n        }\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogContainerComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i0.ElementRef }, { token: i4.FocusTrapFactory }, { token: DOCUMENT, optional: true }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlDialogContainerComponent, selector: \"owl-dialog-container\", host: { listeners: { \"@slideModal.start\": \"onAnimationStart($event)\", \"@slideModal.done\": \"onAnimationDone($event)\" }, properties: { \"class.owl-dialog-container\": \"owlDialogContainerClass\", \"attr.tabindex\": \"owlDialogContainerTabIndex\", \"attr.id\": \"owlDialogContainerId\", \"attr.role\": \"owlDialogContainerRole\", \"attr.aria-labelledby\": \"owlDialogContainerAriaLabelledby\", \"attr.aria-describedby\": \"owlDialogContainerAriaDescribedby\", \"@slideModal\": \"owlDialogContainerAnimation\" } }, viewQueries: [{ propertyName: \"portalOutlet\", first: true, predicate: CdkPortalOutlet, descendants: true, static: true }], usesInheritance: true, ngImport: i0, template: \"<ng-template [cdkPortalOutlet]></ng-template>\\n\", dependencies: [{ kind: \"directive\", type: i2.CdkPortalOutlet, selector: \"[cdkPortalOutlet]\", inputs: [\"cdkPortalOutlet\"], outputs: [\"attached\"], exportAs: [\"cdkPortalOutlet\"] }], animations: [\n            trigger('slideModal', [\n                transition('void => enter', [\n                    style(zoomFadeInFrom),\n                    animate('300ms cubic-bezier(0.35, 0, 0.25, 1)', style('*')),\n                    animate('150ms', keyframes([\n                        style({ transform: 'scale(1)', offset: 0 }),\n                        style({ transform: 'scale(1.05)', offset: 0.3 }),\n                        style({ transform: 'scale(.95)', offset: 0.8 }),\n                        style({ transform: 'scale(1)', offset: 1.0 })\n                    ])),\n                    animateChild()\n                ], {\n                    params: {\n                        x: '0px',\n                        y: '0px',\n                        ox: '50%',\n                        oy: '50%',\n                        scale: 1\n                    }\n                }),\n                transition('enter => exit', [animateChild(), animate(200, style(zoomFadeIn))], { params: { x: '0px', y: '0px', ox: '50%', oy: '50%' } })\n            ])\n        ] }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogContainerComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'owl-dialog-container', animations: [\n                        trigger('slideModal', [\n                            transition('void => enter', [\n                                style(zoomFadeInFrom),\n                                animate('300ms cubic-bezier(0.35, 0, 0.25, 1)', style('*')),\n                                animate('150ms', keyframes([\n                                    style({ transform: 'scale(1)', offset: 0 }),\n                                    style({ transform: 'scale(1.05)', offset: 0.3 }),\n                                    style({ transform: 'scale(.95)', offset: 0.8 }),\n                                    style({ transform: 'scale(1)', offset: 1.0 })\n                                ])),\n                                animateChild()\n                            ], {\n                                params: {\n                                    x: '0px',\n                                    y: '0px',\n                                    ox: '50%',\n                                    oy: '50%',\n                                    scale: 1\n                                }\n                            }),\n                            transition('enter => exit', [animateChild(), animate(200, style(zoomFadeIn))], { params: { x: '0px', y: '0px', ox: '50%', oy: '50%' } })\n                        ])\n                    ], host: {\n                        '(@slideModal.start)': 'onAnimationStart($event)',\n                        '(@slideModal.done)': 'onAnimationDone($event)',\n                        '[class.owl-dialog-container]': 'owlDialogContainerClass',\n                        '[attr.tabindex]': 'owlDialogContainerTabIndex',\n                        '[attr.id]': 'owlDialogContainerId',\n                        '[attr.role]': 'owlDialogContainerRole',\n                        '[attr.aria-labelledby]': 'owlDialogContainerAriaLabelledby',\n                        '[attr.aria-describedby]': 'owlDialogContainerAriaDescribedby',\n                        '[@slideModal]': 'owlDialogContainerAnimation'\n                    }, template: \"<ng-template [cdkPortalOutlet]></ng-template>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }, { type: i4.FocusTrapFactory }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }], propDecorators: { portalOutlet: [{\n                type: ViewChild,\n                args: [CdkPortalOutlet, { static: true }]\n            }] } });\n\n/**\n * object.utils\n */\n/**\n * Extends an object with the *enumerable* and *own* properties of one or more source objects,\n * similar to Object.assign.\n *\n * @param dest The object which will have properties copied to it.\n * @param sources The source objects from which properties will be copied.\n */\nfunction extendObject(dest, ...sources) {\n    if (dest == null) {\n        throw TypeError('Cannot convert undefined or null to object');\n    }\n    for (const source of sources) {\n        if (source != null) {\n            for (const key in source) {\n                if (source.hasOwnProperty(key)) {\n                    dest[key] = source[key];\n                }\n            }\n        }\n    }\n    return dest;\n}\n\n/**\n * index\n */\n\n/**\n * dialog.service\n */\nconst OWL_DIALOG_DATA = new InjectionToken('OwlDialogData');\n/**\n * Injection token that determines the scroll handling while the dialog is open.\n * */\nconst OWL_DIALOG_SCROLL_STRATEGY = new InjectionToken('owl-dialog-scroll-strategy');\nfunction OWL_DIALOG_SCROLL_STRATEGY_PROVIDER_FACTORY(overlay) {\n    const fn = () => overlay.scrollStrategies.block();\n    return fn;\n}\n/** @docs-private */\nconst OWL_DIALOG_SCROLL_STRATEGY_PROVIDER = {\n    provide: OWL_DIALOG_SCROLL_STRATEGY,\n    deps: [Overlay],\n    useFactory: OWL_DIALOG_SCROLL_STRATEGY_PROVIDER_FACTORY\n};\n/**\n * Injection token that can be used to specify default dialog options.\n * */\nconst OWL_DIALOG_DEFAULT_OPTIONS = new InjectionToken('owl-dialog-default-options');\nclass OwlDialogService {\n    /** Keeps track of the currently-open dialogs. */\n    get openDialogs() {\n        return this.parentDialog\n            ? this.parentDialog.openDialogs\n            : this._openDialogsAtThisLevel;\n    }\n    /** Stream that emits when a dialog has been opened. */\n    get beforeOpen() {\n        return this.parentDialog\n            ? this.parentDialog.beforeOpen\n            : this._beforeOpenAtThisLevel;\n    }\n    /** Stream that emits when a dialog has been opened. */\n    get afterOpen() {\n        return this.parentDialog\n            ? this.parentDialog.afterOpen\n            : this._afterOpenAtThisLevel;\n    }\n    get _afterAllClosed() {\n        const parent = this.parentDialog;\n        return parent\n            ? parent._afterAllClosed\n            : this._afterAllClosedAtThisLevel;\n    }\n    constructor(overlay, injector, location, scrollStrategy, defaultOptions, parentDialog, overlayContainer) {\n        this.overlay = overlay;\n        this.injector = injector;\n        this.location = location;\n        this.defaultOptions = defaultOptions;\n        this.parentDialog = parentDialog;\n        this.overlayContainer = overlayContainer;\n        this.ariaHiddenElements = new Map();\n        this._openDialogsAtThisLevel = [];\n        this._beforeOpenAtThisLevel = new Subject();\n        this._afterOpenAtThisLevel = new Subject();\n        this._afterAllClosedAtThisLevel = new Subject();\n        /**\n         * Stream that emits when all open dialog have finished closing.\n         * Will emit on subscribe if there are no open dialogs to begin with.\n         */\n        this.afterAllClosed = defer(() => this._openDialogsAtThisLevel.length\n            ? this._afterAllClosed\n            : this._afterAllClosed.pipe(startWith(undefined)));\n        this.scrollStrategy = scrollStrategy;\n        if (!parentDialog && location) {\n            location.subscribe(() => this.closeAll());\n        }\n    }\n    open(componentOrTemplateRef, config) {\n        config = applyConfigDefaults(config, this.defaultOptions);\n        if (config.id && this.getDialogById(config.id)) {\n            throw Error(`Dialog with id \"${config.id}\" exists already. The dialog id must be unique.`);\n        }\n        const overlayRef = this.createOverlay(config);\n        const dialogContainer = this.attachDialogContainer(overlayRef, config);\n        const dialogRef = this.attachDialogContent(componentOrTemplateRef, dialogContainer, overlayRef, config);\n        if (!this.openDialogs.length) {\n            this.hideNonDialogContentFromAssistiveTechnology();\n        }\n        this.openDialogs.push(dialogRef);\n        dialogRef\n            .afterClosed()\n            .subscribe(() => this.removeOpenDialog(dialogRef));\n        this.beforeOpen.next(dialogRef);\n        this.afterOpen.next(dialogRef);\n        return dialogRef;\n    }\n    /**\n     * Closes all of the currently-open dialogs.\n     */\n    closeAll() {\n        let i = this.openDialogs.length;\n        while (i--) {\n            this.openDialogs[i].close();\n        }\n    }\n    /**\n     * Finds an open dialog by its id.\n     * @param id ID to use when looking up the dialog.\n     */\n    getDialogById(id) {\n        return this.openDialogs.find(dialog => dialog.id === id);\n    }\n    attachDialogContent(componentOrTemplateRef, dialogContainer, overlayRef, config) {\n        const dialogRef = new OwlDialogRef(overlayRef, dialogContainer, config.id, this.location);\n        if (config.hasBackdrop) {\n            overlayRef.backdropClick().subscribe(() => {\n                if (!dialogRef.disableClose) {\n                    dialogRef.close();\n                }\n            });\n        }\n        if (componentOrTemplateRef instanceof TemplateRef) {\n        }\n        else {\n            const injector = this.createInjector(config, dialogRef, dialogContainer);\n            const contentRef = dialogContainer.attachComponentPortal(new ComponentPortal(componentOrTemplateRef, undefined, injector));\n            dialogRef.componentInstance = contentRef.instance;\n        }\n        dialogRef\n            .updateSize(config.width, config.height)\n            .updatePosition(config.position);\n        return dialogRef;\n    }\n    createInjector(config, dialogRef, dialogContainer) {\n        const userInjector = config &&\n            config.viewContainerRef &&\n            config.viewContainerRef.injector;\n        const injectionTokens = new WeakMap();\n        injectionTokens.set(OwlDialogRef, dialogRef);\n        injectionTokens.set(OwlDialogContainerComponent, dialogContainer);\n        injectionTokens.set(OWL_DIALOG_DATA, config.data);\n        return new PortalInjector(userInjector || this.injector, injectionTokens);\n    }\n    createOverlay(config) {\n        const overlayConfig = this.getOverlayConfig(config);\n        return this.overlay.create(overlayConfig);\n    }\n    attachDialogContainer(overlayRef, config) {\n        const containerPortal = new ComponentPortal(OwlDialogContainerComponent, config.viewContainerRef);\n        const containerRef = overlayRef.attach(containerPortal);\n        containerRef.instance.setConfig(config);\n        return containerRef.instance;\n    }\n    getOverlayConfig(dialogConfig) {\n        const state = new OverlayConfig({\n            positionStrategy: this.overlay.position().global(),\n            scrollStrategy: dialogConfig.scrollStrategy || this.scrollStrategy(),\n            panelClass: dialogConfig.paneClass,\n            hasBackdrop: dialogConfig.hasBackdrop,\n            minWidth: dialogConfig.minWidth,\n            minHeight: dialogConfig.minHeight,\n            maxWidth: dialogConfig.maxWidth,\n            maxHeight: dialogConfig.maxHeight\n        });\n        if (dialogConfig.backdropClass) {\n            state.backdropClass = dialogConfig.backdropClass;\n        }\n        return state;\n    }\n    removeOpenDialog(dialogRef) {\n        const index = this._openDialogsAtThisLevel.indexOf(dialogRef);\n        if (index > -1) {\n            this.openDialogs.splice(index, 1);\n            // If all the dialogs were closed, remove/restore the `aria-hidden`\n            // to a the siblings and emit to the `afterAllClosed` stream.\n            if (!this.openDialogs.length) {\n                this.ariaHiddenElements.forEach((previousValue, element) => {\n                    if (previousValue) {\n                        element.setAttribute('aria-hidden', previousValue);\n                    }\n                    else {\n                        element.removeAttribute('aria-hidden');\n                    }\n                });\n                this.ariaHiddenElements.clear();\n                this._afterAllClosed.next();\n            }\n        }\n    }\n    /**\n     * Hides all of the content that isn't an overlay from assistive technology.\n     */\n    hideNonDialogContentFromAssistiveTechnology() {\n        const overlayContainer = this.overlayContainer.getContainerElement();\n        // Ensure that the overlay container is attached to the DOM.\n        if (overlayContainer.parentElement) {\n            const siblings = overlayContainer.parentElement.children;\n            for (let i = siblings.length - 1; i > -1; i--) {\n                const sibling = siblings[i];\n                if (sibling !== overlayContainer &&\n                    sibling.nodeName !== 'SCRIPT' &&\n                    sibling.nodeName !== 'STYLE' &&\n                    !sibling.hasAttribute('aria-live')) {\n                    this.ariaHiddenElements.set(sibling, sibling.getAttribute('aria-hidden'));\n                    sibling.setAttribute('aria-hidden', 'true');\n                }\n            }\n        }\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogService, deps: [{ token: i1.Overlay }, { token: i0.Injector }, { token: i3.Location, optional: true }, { token: OWL_DIALOG_SCROLL_STRATEGY }, { token: OWL_DIALOG_DEFAULT_OPTIONS, optional: true }, { token: OwlDialogService, optional: true, skipSelf: true }, { token: i1.OverlayContainer }], target: i0.FactoryTarget.Injectable }); }\n    static { this.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogService }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: i1.Overlay }, { type: i0.Injector }, { type: i3.Location, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [OWL_DIALOG_SCROLL_STRATEGY]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DIALOG_DEFAULT_OPTIONS]\n                }] }, { type: OwlDialogService, decorators: [{\n                    type: Optional\n                }, {\n                    type: SkipSelf\n                }] }, { type: i1.OverlayContainer }] });\n/**\n * Applies default options to the dialog config.\n * @param config Config to be modified.\n * @param defaultOptions Default config setting\n * @returns The new configuration object.\n */\nfunction applyConfigDefaults(config, defaultOptions) {\n    return extendObject(new OwlDialogConfig(), config, defaultOptions);\n}\n\n/**\n * date-time-picker.component\n */\n/** Injection token that determines the scroll handling while the dtPicker is open. */\nconst OWL_DTPICKER_SCROLL_STRATEGY = new InjectionToken('owl-dtpicker-scroll-strategy');\n/** @docs-private */\nfunction OWL_DTPICKER_SCROLL_STRATEGY_PROVIDER_FACTORY(overlay) {\n    const fn = () => overlay.scrollStrategies.block();\n    return fn;\n}\n/** @docs-private */\nconst OWL_DTPICKER_SCROLL_STRATEGY_PROVIDER = {\n    provide: OWL_DTPICKER_SCROLL_STRATEGY,\n    deps: [Overlay],\n    useFactory: OWL_DTPICKER_SCROLL_STRATEGY_PROVIDER_FACTORY\n};\nclass OwlDateTimeComponent extends OwlDateTime {\n    get startAt() {\n        // If an explicit startAt is set we start there, otherwise we start at whatever the currently\n        // selected value is.\n        if (this._startAt) {\n            return this._startAt;\n        }\n        if (this._dtInput) {\n            if (this._dtInput.selectMode === 'single') {\n                return this._dtInput.value || null;\n            }\n            else if (this._dtInput.selectMode === 'range' ||\n                this._dtInput.selectMode === 'rangeFrom') {\n                return this._dtInput.values[0] || null;\n            }\n            else if (this._dtInput.selectMode === 'rangeTo') {\n                return this._dtInput.values[1] || null;\n            }\n        }\n        else {\n            return null;\n        }\n    }\n    set startAt(date) {\n        this._startAt = this.getValidDate(this.dateTimeAdapter.deserialize(date));\n    }\n    get endAt() {\n        if (this._endAt) {\n            return this._endAt;\n        }\n        if (this._dtInput) {\n            if (this._dtInput.selectMode === 'single') {\n                return this._dtInput.value || null;\n            }\n            else if (this._dtInput.selectMode === 'range' ||\n                this._dtInput.selectMode === 'rangeFrom') {\n                return this._dtInput.values[1] || null;\n            }\n        }\n        else {\n            return null;\n        }\n    }\n    set endAt(date) {\n        this._endAt = this.getValidDate(this.dateTimeAdapter.deserialize(date));\n    }\n    get pickerType() {\n        return this._pickerType;\n    }\n    set pickerType(val) {\n        if (val !== this._pickerType) {\n            this._pickerType = val;\n            if (this._dtInput) {\n                this._dtInput.formatNativeInputValue();\n            }\n        }\n    }\n    get pickerMode() {\n        return this._pickerMode;\n    }\n    set pickerMode(mode) {\n        if (mode === 'popup') {\n            this._pickerMode = mode;\n        }\n        else {\n            this._pickerMode = 'dialog';\n        }\n    }\n    get disabled() {\n        return this._disabled === undefined && this._dtInput\n            ? this._dtInput.disabled\n            : !!this._disabled;\n    }\n    set disabled(value) {\n        value = coerceBooleanProperty(value);\n        if (value !== this._disabled) {\n            this._disabled = value;\n            this.disabledChange.next(value);\n        }\n    }\n    get opened() {\n        return this._opened;\n    }\n    set opened(val) {\n        val ? this.open() : this.close();\n    }\n    get dtInput() {\n        return this._dtInput;\n    }\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        this._selected = value;\n        this.changeDetector.markForCheck();\n    }\n    get selecteds() {\n        return this._selecteds;\n    }\n    set selecteds(values) {\n        this._selecteds = values;\n        this.changeDetector.markForCheck();\n    }\n    /** The minimum selectable date. */\n    get minDateTime() {\n        return this._dtInput && this._dtInput.min;\n    }\n    /** The maximum selectable date. */\n    get maxDateTime() {\n        return this._dtInput && this._dtInput.max;\n    }\n    get dateTimeFilter() {\n        return this._dtInput && this._dtInput.dateTimeFilter;\n    }\n    get selectMode() {\n        return this._dtInput.selectMode;\n    }\n    get isInSingleMode() {\n        return this._dtInput.isInSingleMode;\n    }\n    get isInRangeMode() {\n        return this._dtInput.isInRangeMode;\n    }\n    constructor(overlay, viewContainerRef, dialogService, ngZone, changeDetector, dateTimeAdapter, defaultScrollStrategy, dateTimeFormats, document) {\n        super(dateTimeAdapter, dateTimeFormats);\n        this.overlay = overlay;\n        this.viewContainerRef = viewContainerRef;\n        this.dialogService = dialogService;\n        this.ngZone = ngZone;\n        this.changeDetector = changeDetector;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.dateTimeFormats = dateTimeFormats;\n        this.document = document;\n        /** Custom class for the picker backdrop. */\n        this.backdropClass = [];\n        /** Custom class for the picker overlay pane. */\n        this.panelClass = [];\n        /**\n         * Set the type of the dateTime picker\n         *      'both' -- show both calendar and timer\n         *      'calendar' -- show only calendar\n         *      'timer' -- show only timer\n         */\n        this._pickerType = 'both';\n        /**\n         * Whether the picker open as a dialog\n         */\n        this._pickerMode = 'popup';\n        /** Whether the calendar is open. */\n        this._opened = false;\n        /**\n         * Callback when the picker is closed\n         * */\n        this.afterPickerClosed = new EventEmitter();\n        /**\n         * Callback before the picker is open\n         * */\n        this.beforePickerOpen = new EventEmitter();\n        /**\n         * Callback when the picker is open\n         * */\n        this.afterPickerOpen = new EventEmitter();\n        /**\n         * Emits selected year in multi-year view\n         * This doesn't imply a change on the selected date.\n         * */\n        this.yearSelected = new EventEmitter();\n        /**\n         * Emits selected month in year view\n         * This doesn't imply a change on the selected date.\n         * */\n        this.monthSelected = new EventEmitter();\n        /**\n         * Emits selected date\n         * */\n        this.dateSelected = new EventEmitter();\n        /**\n         * Emit when the selected value has been confirmed\n         * */\n        this.confirmSelectedChange = new EventEmitter();\n        /**\n         * Emits when the date time picker is disabled.\n         * */\n        this.disabledChange = new EventEmitter();\n        this.dtInputSub = Subscription.EMPTY;\n        this.hidePickerStreamSub = Subscription.EMPTY;\n        this.confirmSelectedStreamSub = Subscription.EMPTY;\n        this.pickerOpenedStreamSub = Subscription.EMPTY;\n        this.pickerBeforeOpenedStreamSub = Subscription.EMPTY;\n        /** The element that was focused before the date time picker was opened. */\n        this.focusedElementBeforeOpen = null;\n        this._selecteds = [];\n        this.defaultScrollStrategy = defaultScrollStrategy;\n    }\n    ngOnInit() { }\n    ngOnDestroy() {\n        this.close();\n        this.dtInputSub.unsubscribe();\n        this.disabledChange.complete();\n        if (this.popupRef) {\n            this.popupRef.dispose();\n        }\n    }\n    registerInput(input) {\n        if (this._dtInput) {\n            throw Error('A Owl DateTimePicker can only be associated with a single input.');\n        }\n        this._dtInput = input;\n        this.dtInputSub = this._dtInput.valueChange.subscribe((value) => {\n            if (Array.isArray(value)) {\n                this.selecteds = value;\n            }\n            else {\n                this.selected = value;\n            }\n        });\n    }\n    open() {\n        if (this._opened || this.disabled) {\n            return;\n        }\n        if (!this._dtInput) {\n            throw Error('Attempted to open an DateTimePicker with no associated input.');\n        }\n        if (this.document) {\n            this.focusedElementBeforeOpen = this.document.activeElement;\n        }\n        // reset the picker selected value\n        if (this.isInSingleMode) {\n            this.selected = this._dtInput.value;\n        }\n        else if (this.isInRangeMode) {\n            this.selecteds = this._dtInput.values;\n        }\n        // when the picker is open , we make sure the picker's current selected time value\n        // is the same as the _startAt time value.\n        if (this.selected && this.pickerType !== 'calendar' && this._startAt) {\n            this.selected = this.dateTimeAdapter.createDate(this.dateTimeAdapter.getYear(this.selected), this.dateTimeAdapter.getMonth(this.selected), this.dateTimeAdapter.getDate(this.selected), this.dateTimeAdapter.getHours(this._startAt), this.dateTimeAdapter.getMinutes(this._startAt), this.dateTimeAdapter.getSeconds(this._startAt));\n        }\n        this.pickerMode === 'dialog' ? this.openAsDialog() : this.openAsPopup();\n        this.pickerContainer.picker = this;\n        // Listen to picker container's hidePickerStream\n        this.hidePickerStreamSub = this.pickerContainer.hidePickerStream.subscribe(() => {\n            this.close();\n        });\n        // Listen to picker container's confirmSelectedStream\n        this.confirmSelectedStreamSub = this.pickerContainer.confirmSelectedStream.subscribe((event) => {\n            this.confirmSelect(event);\n        });\n    }\n    /**\n     * Selects the given date\n     */\n    select(date) {\n        if (Array.isArray(date)) {\n            this.selecteds = [...date];\n        }\n        else {\n            this.selected = date;\n        }\n        /**\n         * Cases in which automatically confirm the select when date or dates are selected:\n         * 1) picker mode is NOT 'dialog'\n         * 2) picker type is 'calendar' and selectMode is 'single'.\n         * 3) picker type is 'calendar' and selectMode is 'range' and\n         *    the 'selecteds' has 'from'(selecteds[0]) and 'to'(selecteds[1]) values.\n         * 4) selectMode is 'rangeFrom' and selecteds[0] has value.\n         * 5) selectMode is 'rangeTo' and selecteds[1] has value.\n         * */\n        if (this.pickerMode !== 'dialog' &&\n            this.pickerType === 'calendar' &&\n            ((this.selectMode === 'single' && this.selected) ||\n                (this.selectMode === 'rangeFrom' && this.selecteds[0]) ||\n                (this.selectMode === 'rangeTo' && this.selecteds[1]) ||\n                (this.selectMode === 'range' &&\n                    this.selecteds[0] &&\n                    this.selecteds[1]))) {\n            this.confirmSelect();\n        }\n    }\n    /**\n     * Emits the selected year in multi-year view\n     * */\n    selectYear(normalizedYear) {\n        this.yearSelected.emit(normalizedYear);\n    }\n    /**\n     * Emits selected month in year view\n     * */\n    selectMonth(normalizedMonth) {\n        this.monthSelected.emit(normalizedMonth);\n    }\n    /**\n     * Emits the selected date\n     * */\n    selectDate(normalizedDate) {\n        this.dateSelected.emit(normalizedDate);\n    }\n    /**\n     * Hide the picker\n     */\n    close() {\n        if (!this._opened) {\n            return;\n        }\n        if (this.popupRef && this.popupRef.hasAttached()) {\n            this.popupRef.detach();\n        }\n        if (this.pickerContainerPortal &&\n            this.pickerContainerPortal.isAttached) {\n            this.pickerContainerPortal.detach();\n        }\n        if (this.hidePickerStreamSub) {\n            this.hidePickerStreamSub.unsubscribe();\n            this.hidePickerStreamSub = null;\n        }\n        if (this.confirmSelectedStreamSub) {\n            this.confirmSelectedStreamSub.unsubscribe();\n            this.confirmSelectedStreamSub = null;\n        }\n        if (this.pickerBeforeOpenedStreamSub) {\n            this.pickerBeforeOpenedStreamSub.unsubscribe();\n            this.pickerBeforeOpenedStreamSub = null;\n        }\n        if (this.pickerOpenedStreamSub) {\n            this.pickerOpenedStreamSub.unsubscribe();\n            this.pickerOpenedStreamSub = null;\n        }\n        if (this.dialogRef) {\n            this.dialogRef.close();\n            this.dialogRef = null;\n        }\n        const completeClose = () => {\n            if (this._opened) {\n                this._opened = false;\n                const selected = this.selected || this.selecteds;\n                this.afterPickerClosed.emit(selected);\n                this.focusedElementBeforeOpen = null;\n            }\n        };\n        if (this.focusedElementBeforeOpen &&\n            typeof this.focusedElementBeforeOpen.focus === 'function') {\n            // Because IE moves focus asynchronously, we can't count on it being restored before we've\n            // marked the datepicker as closed. If the event fires out of sequence and the element that\n            // we're refocusing opens the datepicker on focus, the user could be stuck with not being\n            // able to close the calendar at all. We work around it by making the logic, that marks\n            // the datepicker as closed, async as well.\n            this.focusedElementBeforeOpen.focus();\n            setTimeout(completeClose);\n        }\n        else {\n            completeClose();\n        }\n    }\n    /**\n     * Confirm the selected value\n     */\n    confirmSelect(event) {\n        if (this.isInSingleMode) {\n            const selected = this.selected || this.startAt || this.dateTimeAdapter.now();\n            this.confirmSelectedChange.emit(selected);\n        }\n        else if (this.isInRangeMode) {\n            this.confirmSelectedChange.emit(this.selecteds);\n        }\n        this.close();\n        return;\n    }\n    /**\n     * Open the picker as a dialog\n     */\n    openAsDialog() {\n        this.dialogRef = this.dialogService.open(OwlDateTimeContainerComponent, {\n            autoFocus: false,\n            backdropClass: [\n                'cdk-overlay-dark-backdrop',\n                ...coerceArray(this.backdropClass)\n            ],\n            paneClass: ['owl-dt-dialog', ...coerceArray(this.panelClass)],\n            viewContainerRef: this.viewContainerRef,\n            scrollStrategy: this.scrollStrategy || this.defaultScrollStrategy()\n        });\n        this.pickerContainer = this.dialogRef.componentInstance;\n        this.dialogRef.beforeOpen().subscribe(() => {\n            this.beforePickerOpen.emit(null);\n        });\n        this.dialogRef.afterOpen().subscribe(() => {\n            this.afterPickerOpen.emit(null);\n            this._opened = true;\n        });\n        this.dialogRef.afterClosed().subscribe(() => this.close());\n    }\n    /**\n     * Open the picker as popup\n     */\n    openAsPopup() {\n        if (!this.pickerContainerPortal) {\n            this.pickerContainerPortal = new ComponentPortal(OwlDateTimeContainerComponent, this.viewContainerRef);\n        }\n        if (!this.popupRef) {\n            this.createPopup();\n        }\n        if (!this.popupRef.hasAttached()) {\n            const componentRef = this.popupRef.attach(this.pickerContainerPortal);\n            this.pickerContainer = componentRef.instance;\n            // Update the position once the calendar has rendered.\n            this.ngZone.onStable\n                .asObservable()\n                .pipe(take(1))\n                .subscribe(() => {\n                this.popupRef.updatePosition();\n            });\n            this.pickerBeforeOpenedStreamSub = this.pickerContainer.beforePickerOpenedStream\n                .pipe(take(1))\n                .subscribe(() => {\n                this.beforePickerOpen.emit(null);\n            });\n            // emit open stream\n            this.pickerOpenedStreamSub = this.pickerContainer.pickerOpenedStream\n                .pipe(take(1))\n                .subscribe(() => {\n                this.afterPickerOpen.emit(null);\n                this._opened = true;\n            });\n        }\n    }\n    createPopup() {\n        const overlayConfig = new OverlayConfig({\n            positionStrategy: this.createPopupPositionStrategy(),\n            hasBackdrop: true,\n            backdropClass: [\n                'cdk-overlay-transparent-backdrop',\n                ...coerceArray(this.backdropClass)\n            ],\n            scrollStrategy: this.scrollStrategy || this.defaultScrollStrategy(),\n            panelClass: ['owl-dt-popup', ...coerceArray(this.panelClass)]\n        });\n        this.popupRef = this.overlay.create(overlayConfig);\n        merge(this.popupRef.backdropClick(), this.popupRef.detachments(), this.popupRef\n            .keydownEvents()\n            .pipe(filter$1(event => event.keyCode === ESCAPE ||\n            (this._dtInput &&\n                event.altKey &&\n                event.keyCode === UP_ARROW)))).subscribe(() => this.close());\n    }\n    /**\n     * Create the popup PositionStrategy.\n     * */\n    createPopupPositionStrategy() {\n        return this.overlay\n            .position()\n            .flexibleConnectedTo(this._dtInput.elementRef)\n            .withTransformOriginOn('.owl-dt-container')\n            .withFlexibleDimensions(false)\n            .withPush(false)\n            .withPositions([\n            {\n                originX: 'start',\n                originY: 'bottom',\n                overlayX: 'start',\n                overlayY: 'top'\n            },\n            {\n                originX: 'start',\n                originY: 'top',\n                overlayX: 'start',\n                overlayY: 'bottom'\n            },\n            {\n                originX: 'end',\n                originY: 'bottom',\n                overlayX: 'end',\n                overlayY: 'top'\n            },\n            {\n                originX: 'end',\n                originY: 'top',\n                overlayX: 'end',\n                overlayY: 'bottom'\n            },\n            {\n                originX: 'start',\n                originY: 'top',\n                overlayX: 'start',\n                overlayY: 'top',\n                offsetY: -176\n            },\n            {\n                originX: 'start',\n                originY: 'top',\n                overlayX: 'start',\n                overlayY: 'top',\n                offsetY: -352\n            }\n        ]);\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeComponent, deps: [{ token: i1.Overlay }, { token: i0.ViewContainerRef }, { token: OwlDialogService }, { token: i0.NgZone }, { token: i0.ChangeDetectorRef }, { token: DateTimeAdapter, optional: true }, { token: OWL_DTPICKER_SCROLL_STRATEGY }, { token: OWL_DATE_TIME_FORMATS, optional: true }, { token: DOCUMENT, optional: true }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlDateTimeComponent, selector: \"owl-date-time\", inputs: { backdropClass: \"backdropClass\", panelClass: \"panelClass\", startAt: \"startAt\", endAt: \"endAt\", pickerType: \"pickerType\", pickerMode: \"pickerMode\", disabled: \"disabled\", opened: \"opened\", scrollStrategy: \"scrollStrategy\" }, outputs: { afterPickerClosed: \"afterPickerClosed\", beforePickerOpen: \"beforePickerOpen\", afterPickerOpen: \"afterPickerOpen\", yearSelected: \"yearSelected\", monthSelected: \"monthSelected\", dateSelected: \"dateSelected\" }, exportAs: [\"owlDateTime\"], usesInheritance: true, ngImport: i0, template: \"\", styles: [\"\"], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'owl-date-time', exportAs: 'owlDateTime', changeDetection: ChangeDetectionStrategy.OnPush, preserveWhitespaces: false, template: \"\" }]\n        }], ctorParameters: () => [{ type: i1.Overlay }, { type: i0.ViewContainerRef }, { type: OwlDialogService }, { type: i0.NgZone }, { type: i0.ChangeDetectorRef }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [OWL_DTPICKER_SCROLL_STRATEGY]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_FORMATS]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }], propDecorators: { backdropClass: [{\n                type: Input\n            }], panelClass: [{\n                type: Input\n            }], startAt: [{\n                type: Input\n            }], endAt: [{\n                type: Input\n            }], pickerType: [{\n                type: Input\n            }], pickerMode: [{\n                type: Input\n            }], disabled: [{\n                type: Input\n            }], opened: [{\n                type: Input\n            }], scrollStrategy: [{\n                type: Input\n            }], afterPickerClosed: [{\n                type: Output\n            }], beforePickerOpen: [{\n                type: Output\n            }], afterPickerOpen: [{\n                type: Output\n            }], yearSelected: [{\n                type: Output\n            }], monthSelected: [{\n                type: Output\n            }], dateSelected: [{\n                type: Output\n            }] } });\n\n/**\n * date-time-picker-input.directive\n */\nconst OWL_DATETIME_VALUE_ACCESSOR$1 = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => OwlDateTimeInputDirective),\n    multi: true\n};\nconst OWL_DATETIME_VALIDATORS = {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => OwlDateTimeInputDirective),\n    multi: true\n};\nclass OwlDateTimeInputDirective {\n    get required() {\n        return this._required;\n    }\n    set required(value) {\n        this._required = value === '' || value;\n        this.validatorOnChange();\n    }\n    /**\n     * The date time picker that this input is associated with.\n     * */\n    set owlDateTime(value) {\n        this.registerDateTimePicker(value);\n    }\n    /**\n     * A function to filter date time\n     */\n    set owlDateTimeFilter(filter) {\n        this._dateTimeFilter = filter;\n        this.validatorOnChange();\n    }\n    get dateTimeFilter() {\n        return this._dateTimeFilter;\n    }\n    get disabled() {\n        return !!this._disabled;\n    }\n    set disabled(value) {\n        const newValue = coerceBooleanProperty(value);\n        const element = this.elmRef.nativeElement;\n        if (this._disabled !== newValue) {\n            this._disabled = newValue;\n            this.disabledChange.emit(newValue);\n        }\n        // We need to null check the `blur` method, because it's undefined during SSR.\n        if (newValue && element.blur) {\n            // Normally, native input elements automatically blur if they turn disabled. This behavior\n            // is problematic, because it would mean that it triggers another change detection cycle,\n            // which then causes a changed after checked error if the input element was focused before.\n            element.blur();\n        }\n    }\n    get min() {\n        return this._min;\n    }\n    set min(value) {\n        this._min = this.getValidDate(this.dateTimeAdapter.deserialize(value));\n        this.validatorOnChange();\n    }\n    get max() {\n        return this._max;\n    }\n    set max(value) {\n        this._max = this.getValidDate(this.dateTimeAdapter.deserialize(value));\n        this.validatorOnChange();\n    }\n    get selectMode() {\n        return this._selectMode;\n    }\n    set selectMode(mode) {\n        if (mode !== 'single' &&\n            mode !== 'range' &&\n            mode !== 'rangeFrom' &&\n            mode !== 'rangeTo') {\n            throw Error('OwlDateTime Error: invalid selectMode value!');\n        }\n        this._selectMode = mode;\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        this.lastValueValid = !value || this.dateTimeAdapter.isValid(value);\n        value = this.getValidDate(value);\n        const oldDate = this._value;\n        this._value = value;\n        // set the input property 'value'\n        this.formatNativeInputValue();\n        // check if the input value changed\n        if (!this.dateTimeAdapter.isEqual(oldDate, value)) {\n            this.valueChange.emit(value);\n        }\n    }\n    get values() {\n        return this._values;\n    }\n    set values(values) {\n        if (values && values.length > 0) {\n            this._values = values.map(v => {\n                v = this.dateTimeAdapter.deserialize(v);\n                return this.getValidDate(v);\n            });\n            this.lastValueValid =\n                (!this._values[0] ||\n                    this.dateTimeAdapter.isValid(this._values[0])) &&\n                    (!this._values[1] ||\n                        this.dateTimeAdapter.isValid(this._values[1]));\n        }\n        else {\n            this._values = [];\n            this.lastValueValid = true;\n        }\n        // set the input property 'value'\n        this.formatNativeInputValue();\n        this.valueChange.emit(this._values);\n    }\n    get elementRef() {\n        return this.elmRef;\n    }\n    get isInSingleMode() {\n        return this._selectMode === 'single';\n    }\n    get isInRangeMode() {\n        return (this._selectMode === 'range' ||\n            this._selectMode === 'rangeFrom' ||\n            this._selectMode === 'rangeTo');\n    }\n    get owlDateTimeInputAriaHaspopup() {\n        return true;\n    }\n    get owlDateTimeInputAriaOwns() {\n        return (this.dtPicker.opened && this.dtPicker.id) || null;\n    }\n    get minIso8601() {\n        return this.min ? this.dateTimeAdapter.toIso8601(this.min) : null;\n    }\n    get maxIso8601() {\n        return this.max ? this.dateTimeAdapter.toIso8601(this.max) : null;\n    }\n    get owlDateTimeInputDisabled() {\n        return this.disabled;\n    }\n    constructor(elmRef, renderer, dateTimeAdapter, dateTimeFormats) {\n        this.elmRef = elmRef;\n        this.renderer = renderer;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.dateTimeFormats = dateTimeFormats;\n        /**\n         * The picker's select mode\n         */\n        this._selectMode = 'single';\n        /**\n         * The character to separate the 'from' and 'to' in input value\n         */\n        this.rangeSeparator = '-';\n        this._values = [];\n        /**\n         * Callback to invoke when `change` event is fired on this `<input>`\n         * */\n        this.dateTimeChange = new EventEmitter();\n        /**\n         * Callback to invoke when an `input` event is fired on this `<input>`.\n         * */\n        this.dateTimeInput = new EventEmitter();\n        this.dtPickerSub = Subscription.EMPTY;\n        this.localeSub = Subscription.EMPTY;\n        this.lastValueValid = true;\n        this.onModelChange = () => { };\n        this.onModelTouched = () => { };\n        this.validatorOnChange = () => { };\n        /** The form control validator for whether the input parses. */\n        this.parseValidator = () => {\n            return this.lastValueValid\n                ? null\n                : { owlDateTimeParse: { text: this.elmRef.nativeElement.value } };\n        };\n        /** The form control validator for the min date. */\n        this.minValidator = (control) => {\n            if (this.isInSingleMode) {\n                const controlValue = this.getValidDate(this.dateTimeAdapter.deserialize(control.value));\n                return !this.min ||\n                    !controlValue ||\n                    this.dateTimeAdapter.compare(this.min, controlValue) <= 0\n                    ? null\n                    : { owlDateTimeMin: { min: this.min, actual: controlValue } };\n            }\n            else if (this.isInRangeMode && control.value) {\n                const controlValueFrom = this.getValidDate(this.dateTimeAdapter.deserialize(control.value[0]));\n                const controlValueTo = this.getValidDate(this.dateTimeAdapter.deserialize(control.value[1]));\n                return !this.min ||\n                    !controlValueFrom ||\n                    !controlValueTo ||\n                    this.dateTimeAdapter.compare(this.min, controlValueFrom) <= 0\n                    ? null\n                    : {\n                        owlDateTimeMin: {\n                            min: this.min,\n                            actual: [controlValueFrom, controlValueTo]\n                        }\n                    };\n            }\n        };\n        /** The form control validator for the max date. */\n        this.maxValidator = (control) => {\n            if (this.isInSingleMode) {\n                const controlValue = this.getValidDate(this.dateTimeAdapter.deserialize(control.value));\n                return !this.max ||\n                    !controlValue ||\n                    this.dateTimeAdapter.compare(this.max, controlValue) >= 0\n                    ? null\n                    : { owlDateTimeMax: { max: this.max, actual: controlValue } };\n            }\n            else if (this.isInRangeMode && control.value) {\n                const controlValueFrom = this.getValidDate(this.dateTimeAdapter.deserialize(control.value[0]));\n                const controlValueTo = this.getValidDate(this.dateTimeAdapter.deserialize(control.value[1]));\n                return !this.max ||\n                    !controlValueFrom ||\n                    !controlValueTo ||\n                    this.dateTimeAdapter.compare(this.max, controlValueTo) >= 0\n                    ? null\n                    : {\n                        owlDateTimeMax: {\n                            max: this.max,\n                            actual: [controlValueFrom, controlValueTo]\n                        }\n                    };\n            }\n        };\n        /** The form control validator for the date filter. */\n        this.filterValidator = (control) => {\n            const controlValue = this.getValidDate(this.dateTimeAdapter.deserialize(control.value));\n            return !this._dateTimeFilter ||\n                !controlValue ||\n                this._dateTimeFilter(controlValue)\n                ? null\n                : { owlDateTimeFilter: true };\n        };\n        /**\n         * The form control validator for the range.\n         * Check whether the 'before' value is before the 'to' value\n         * */\n        this.rangeValidator = (control) => {\n            if (this.isInSingleMode || !control.value) {\n                return null;\n            }\n            const controlValueFrom = this.getValidDate(this.dateTimeAdapter.deserialize(control.value[0]));\n            const controlValueTo = this.getValidDate(this.dateTimeAdapter.deserialize(control.value[1]));\n            return !controlValueFrom ||\n                !controlValueTo ||\n                this.dateTimeAdapter.compare(controlValueFrom, controlValueTo) <= 0\n                ? null\n                : { owlDateTimeRange: true };\n        };\n        /**\n         * The form control validator for the range when required.\n         * Check whether the 'before' and 'to' values are present\n         * */\n        this.requiredRangeValidator = (control) => {\n            if (this.isInSingleMode || !control.value || !this.required) {\n                return null;\n            }\n            const controlValueFrom = this.getValidDate(this.dateTimeAdapter.deserialize(control.value[0]));\n            const controlValueTo = this.getValidDate(this.dateTimeAdapter.deserialize(control.value[1]));\n            return !controlValueFrom ||\n                !controlValueTo\n                ? { owlRequiredDateTimeRange: [controlValueFrom, controlValueTo] }\n                : null;\n        };\n        /** The combined form control validator for this input. */\n        this.validator = Validators.compose([\n            this.parseValidator,\n            this.minValidator,\n            this.maxValidator,\n            this.filterValidator,\n            this.rangeValidator,\n            this.requiredRangeValidator\n        ]);\n        /** Emits when the value changes (either due to user input or programmatic change). */\n        this.valueChange = new EventEmitter();\n        /** Emits when the disabled state has changed */\n        this.disabledChange = new EventEmitter();\n        if (!this.dateTimeAdapter) {\n            throw Error(`OwlDateTimePicker: No provider found for DateTimePicker. You must import one of the following ` +\n                `modules at your application root: OwlNativeDateTimeModule, OwlMomentDateTimeModule, or provide a ` +\n                `custom implementation.`);\n        }\n        if (!this.dateTimeFormats) {\n            throw Error(`OwlDateTimePicker: No provider found for OWL_DATE_TIME_FORMATS. You must import one of the following ` +\n                `modules at your application root: OwlNativeDateTimeModule, OwlMomentDateTimeModule, or provide a ` +\n                `custom implementation.`);\n        }\n        this.localeSub = this.dateTimeAdapter.localeChanges.subscribe(() => {\n            this.value = this.value;\n        });\n    }\n    ngOnInit() {\n        if (!this.dtPicker) {\n            throw Error(`OwlDateTimePicker: the picker input doesn't have any associated owl-date-time component`);\n        }\n    }\n    ngAfterContentInit() {\n        this.dtPickerSub = this.dtPicker.confirmSelectedChange.subscribe((selecteds) => {\n            if (Array.isArray(selecteds)) {\n                this.values = selecteds;\n            }\n            else {\n                this.value = selecteds;\n            }\n            this.onModelChange(selecteds);\n            this.onModelTouched();\n            this.dateTimeChange.emit({\n                source: this,\n                value: selecteds,\n                input: this.elmRef.nativeElement\n            });\n            this.dateTimeInput.emit({\n                source: this,\n                value: selecteds,\n                input: this.elmRef.nativeElement\n            });\n        });\n    }\n    ngOnDestroy() {\n        this.dtPickerSub.unsubscribe();\n        this.localeSub.unsubscribe();\n        this.valueChange.complete();\n        this.disabledChange.complete();\n    }\n    writeValue(value) {\n        if (this.isInSingleMode) {\n            this.value = value;\n        }\n        else {\n            this.values = value;\n        }\n    }\n    registerOnChange(fn) {\n        this.onModelChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.onModelTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n        this.disabled = isDisabled;\n    }\n    validate(c) {\n        return this.validator ? this.validator(c) : null;\n    }\n    registerOnValidatorChange(fn) {\n        this.validatorOnChange = fn;\n    }\n    /**\n     * Open the picker when user hold alt + DOWN_ARROW\n     * */\n    handleKeydownOnHost(event) {\n        if (event.altKey && event.keyCode === DOWN_ARROW) {\n            this.dtPicker.open();\n            event.preventDefault();\n        }\n    }\n    handleBlurOnHost(event) {\n        this.onModelTouched();\n    }\n    handleInputOnHost(event) {\n        const value = event.target.value;\n        if (this._selectMode === 'single') {\n            this.changeInputInSingleMode(value);\n        }\n        else if (this._selectMode === 'range') {\n            this.changeInputInRangeMode(value);\n        }\n        else {\n            this.changeInputInRangeFromToMode(value);\n        }\n    }\n    handleChangeOnHost(event) {\n        let v;\n        if (this.isInSingleMode) {\n            v = this.value;\n        }\n        else if (this.isInRangeMode) {\n            v = this.values;\n        }\n        this.dateTimeChange.emit({\n            source: this,\n            value: v,\n            input: this.elmRef.nativeElement\n        });\n    }\n    /**\n     * Set the native input property 'value'\n     */\n    formatNativeInputValue() {\n        if (this.isInSingleMode) {\n            this.renderer.setProperty(this.elmRef.nativeElement, 'value', this._value\n                ? this.dateTimeAdapter.format(this._value, this.dtPicker.formatString)\n                : '');\n        }\n        else if (this.isInRangeMode) {\n            if (this._values && this.values.length > 0) {\n                const from = this._values[0];\n                const to = this._values[1];\n                const fromFormatted = from\n                    ? this.dateTimeAdapter.format(from, this.dtPicker.formatString)\n                    : '';\n                const toFormatted = to\n                    ? this.dateTimeAdapter.format(to, this.dtPicker.formatString)\n                    : '';\n                if (!fromFormatted && !toFormatted) {\n                    this.renderer.setProperty(this.elmRef.nativeElement, 'value', null);\n                }\n                else {\n                    if (this._selectMode === 'range') {\n                        this.renderer.setProperty(this.elmRef.nativeElement, 'value', fromFormatted +\n                            ' ' +\n                            this.rangeSeparator +\n                            ' ' +\n                            toFormatted);\n                    }\n                    else if (this._selectMode === 'rangeFrom') {\n                        this.renderer.setProperty(this.elmRef.nativeElement, 'value', fromFormatted);\n                    }\n                    else if (this._selectMode === 'rangeTo') {\n                        this.renderer.setProperty(this.elmRef.nativeElement, 'value', toFormatted);\n                    }\n                }\n            }\n            else {\n                this.renderer.setProperty(this.elmRef.nativeElement, 'value', '');\n            }\n        }\n        return;\n    }\n    /**\n     * Register the relationship between this input and its picker component\n     */\n    registerDateTimePicker(picker) {\n        if (picker) {\n            this.dtPicker = picker;\n            this.dtPicker.registerInput(this);\n        }\n    }\n    /**\n     * Convert a given obj to a valid date object\n     */\n    getValidDate(obj) {\n        return this.dateTimeAdapter.isDateInstance(obj) &&\n            this.dateTimeAdapter.isValid(obj)\n            ? obj\n            : null;\n    }\n    /**\n     * Convert a time string to a date-time string\n     * When pickerType is 'timer', the value in the picker's input is a time string.\n     * The dateTimeAdapter parse fn could not parse a time string to a Date Object.\n     * Therefore we need this fn to convert a time string to a date-time string.\n     */\n    convertTimeStringToDateTimeString(timeString, dateTime) {\n        if (timeString) {\n            const v = dateTime || this.dateTimeAdapter.now();\n            const dateString = this.dateTimeAdapter.format(v, this.dateTimeFormats.datePickerInput);\n            return dateString + ' ' + timeString;\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Handle input change in single mode\n     */\n    changeInputInSingleMode(inputValue) {\n        let value = inputValue;\n        if (this.dtPicker.pickerType === 'timer') {\n            value = this.convertTimeStringToDateTimeString(value, this.value);\n        }\n        let result = this.dateTimeAdapter.parse(value, this.dateTimeFormats.parseInput);\n        this.lastValueValid = !result || this.dateTimeAdapter.isValid(result);\n        result = this.getValidDate(result);\n        // if the newValue is the same as the oldValue, we intend to not fire the valueChange event\n        // result equals to null means there is input event, but the input value is invalid\n        if (!this.isSameValue(result, this._value) || result === null) {\n            this._value = result;\n            this.valueChange.emit(result);\n            this.onModelChange(result);\n            this.dateTimeInput.emit({\n                source: this,\n                value: result,\n                input: this.elmRef.nativeElement\n            });\n        }\n    }\n    /**\n     * Handle input change in rangeFrom or rangeTo mode\n     */\n    changeInputInRangeFromToMode(inputValue) {\n        const originalValue = this._selectMode === 'rangeFrom'\n            ? this._values[0]\n            : this._values[1];\n        if (this.dtPicker.pickerType === 'timer') {\n            inputValue = this.convertTimeStringToDateTimeString(inputValue, originalValue);\n        }\n        let result = this.dateTimeAdapter.parse(inputValue, this.dateTimeFormats.parseInput);\n        this.lastValueValid = !result || this.dateTimeAdapter.isValid(result);\n        result = this.getValidDate(result);\n        // if the newValue is the same as the oldValue, we intend to not fire the valueChange event\n        if ((this._selectMode === 'rangeFrom' &&\n            this.isSameValue(result, this._values[0]) &&\n            result) ||\n            (this._selectMode === 'rangeTo' &&\n                this.isSameValue(result, this._values[1]) &&\n                result)) {\n            return;\n        }\n        this._values =\n            this._selectMode === 'rangeFrom'\n                ? [result, this._values[1]]\n                : [this._values[0], result];\n        this.valueChange.emit(this._values);\n        this.onModelChange(this._values);\n        this.dateTimeInput.emit({\n            source: this,\n            value: this._values,\n            input: this.elmRef.nativeElement\n        });\n    }\n    /**\n     * Handle input change in range mode\n     */\n    changeInputInRangeMode(inputValue) {\n        const selecteds = inputValue.split(this.rangeSeparator);\n        let fromString = selecteds[0];\n        let toString = selecteds[1];\n        if (this.dtPicker.pickerType === 'timer') {\n            fromString = this.convertTimeStringToDateTimeString(fromString, this.values[0]);\n            toString = this.convertTimeStringToDateTimeString(toString, this.values[1]);\n        }\n        let from = this.dateTimeAdapter.parse(fromString, this.dateTimeFormats.parseInput);\n        let to = this.dateTimeAdapter.parse(toString, this.dateTimeFormats.parseInput);\n        this.lastValueValid =\n            (!from || this.dateTimeAdapter.isValid(from)) &&\n                (!to || this.dateTimeAdapter.isValid(to));\n        from = this.getValidDate(from);\n        to = this.getValidDate(to);\n        // if the newValue is the same as the oldValue, we intend to not fire the valueChange event\n        if (!this.isSameValue(from, this._values[0]) ||\n            !this.isSameValue(to, this._values[1]) ||\n            (from === null && to === null)) {\n            this._values = [from, to];\n            this.valueChange.emit(this._values);\n            this.onModelChange(this._values);\n            this.dateTimeInput.emit({\n                source: this,\n                value: this._values,\n                input: this.elmRef.nativeElement\n            });\n        }\n    }\n    /**\n     * Check if the two value is the same\n     */\n    isSameValue(first, second) {\n        if (first && second) {\n            return this.dateTimeAdapter.compare(first, second) === 0;\n        }\n        return first === second;\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeInputDirective, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: DateTimeAdapter, optional: true }, { token: OWL_DATE_TIME_FORMATS, optional: true }], target: i0.FactoryTarget.Directive }); }\n    static { this.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlDateTimeInputDirective, selector: \"input[owlDateTime]\", inputs: { required: \"required\", owlDateTime: \"owlDateTime\", owlDateTimeFilter: \"owlDateTimeFilter\", _disabled: \"_disabled\", min: \"min\", max: \"max\", selectMode: \"selectMode\", rangeSeparator: \"rangeSeparator\", value: \"value\", values: \"values\" }, outputs: { dateTimeChange: \"dateTimeChange\", dateTimeInput: \"dateTimeInput\" }, host: { listeners: { \"keydown\": \"handleKeydownOnHost($event)\", \"blur\": \"handleBlurOnHost($event)\", \"input\": \"handleInputOnHost($event)\", \"change\": \"handleChangeOnHost($event)\" }, properties: { \"attr.aria-haspopup\": \"owlDateTimeInputAriaHaspopup\", \"attr.aria-owns\": \"owlDateTimeInputAriaOwns\", \"attr.min\": \"minIso8601\", \"attr.max\": \"maxIso8601\", \"disabled\": \"owlDateTimeInputDisabled\" } }, providers: [\n            OWL_DATETIME_VALUE_ACCESSOR$1,\n            OWL_DATETIME_VALIDATORS,\n        ], exportAs: [\"owlDateTimeInput\"], ngImport: i0 }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeInputDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'input[owlDateTime]',\n                    exportAs: 'owlDateTimeInput',\n                    host: {\n                        '(keydown)': 'handleKeydownOnHost($event)',\n                        '(blur)': 'handleBlurOnHost($event)',\n                        '(input)': 'handleInputOnHost($event)',\n                        '(change)': 'handleChangeOnHost($event)',\n                        '[attr.aria-haspopup]': 'owlDateTimeInputAriaHaspopup',\n                        '[attr.aria-owns]': 'owlDateTimeInputAriaOwns',\n                        '[attr.min]': 'minIso8601',\n                        '[attr.max]': 'maxIso8601',\n                        '[disabled]': 'owlDateTimeInputDisabled'\n                    },\n                    providers: [\n                        OWL_DATETIME_VALUE_ACCESSOR$1,\n                        OWL_DATETIME_VALIDATORS,\n                    ],\n                }]\n        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_FORMATS]\n                }] }], propDecorators: { required: [{\n                type: Input\n            }], owlDateTime: [{\n                type: Input\n            }], owlDateTimeFilter: [{\n                type: Input\n            }], _disabled: [{\n                type: Input\n            }], min: [{\n                type: Input\n            }], max: [{\n                type: Input\n            }], selectMode: [{\n                type: Input\n            }], rangeSeparator: [{\n                type: Input\n            }], value: [{\n                type: Input\n            }], values: [{\n                type: Input\n            }], dateTimeChange: [{\n                type: Output\n            }], dateTimeInput: [{\n                type: Output\n            }] } });\n\n/**\n * numberFixedLen.pipe\n */\nclass NumberFixedLenPipe {\n    transform(num, len) {\n        const number = Math.floor(num);\n        const length = Math.floor(len);\n        if (num === null || isNaN(number) || isNaN(length)) {\n            return num;\n        }\n        let numString = number.toString();\n        while (numString.length < length) {\n            numString = '0' + numString;\n        }\n        return numString;\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: NumberFixedLenPipe, deps: [], target: i0.FactoryTarget.Pipe }); }\n    static { this.pipe = i0.ngDeclarePipe({ minVersion: \"14.0.0\", version: \"18.0.5\", ngImport: i0, type: NumberFixedLenPipe, name: \"numberFixedLen\" }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: NumberFixedLenPipe, decorators: [{\n            type: Pipe,\n            args: [{\n                    name: 'numberFixedLen'\n                }]\n        }] });\n\n/**\n * date-time-inline.component\n */\nconst OWL_DATETIME_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => OwlDateTimeInlineComponent),\n    multi: true\n};\nclass OwlDateTimeInlineComponent extends OwlDateTime {\n    get pickerType() {\n        return this._pickerType;\n    }\n    set pickerType(val) {\n        if (val !== this._pickerType) {\n            this._pickerType = val;\n        }\n    }\n    get disabled() {\n        return !!this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n    }\n    get selectMode() {\n        return this._selectMode;\n    }\n    set selectMode(mode) {\n        if (mode !== 'single' &&\n            mode !== 'range' &&\n            mode !== 'rangeFrom' &&\n            mode !== 'rangeTo') {\n            throw Error('OwlDateTime Error: invalid selectMode value!');\n        }\n        this._selectMode = mode;\n    }\n    get startAt() {\n        if (this._startAt) {\n            return this._startAt;\n        }\n        if (this.selectMode === 'single') {\n            return this.value || null;\n        }\n        else if (this.selectMode === 'range' ||\n            this.selectMode === 'rangeFrom') {\n            return this.values[0] || null;\n        }\n        else if (this.selectMode === 'rangeTo') {\n            return this.values[1] || null;\n        }\n        else {\n            return null;\n        }\n    }\n    set startAt(date) {\n        this._startAt = this.getValidDate(this.dateTimeAdapter.deserialize(date));\n    }\n    get endAt() {\n        if (this._endAt) {\n            return this._endAt;\n        }\n        if (this.selectMode === 'single') {\n            return this.value || null;\n        }\n        else if (this.selectMode === 'range' ||\n            this.selectMode === 'rangeFrom') {\n            return this.values[1] || null;\n        }\n        else {\n            return null;\n        }\n    }\n    set endAt(date) {\n        this._endAt = this.getValidDate(this.dateTimeAdapter.deserialize(date));\n    }\n    get dateTimeFilter() {\n        return this._dateTimeFilter;\n    }\n    set dateTimeFilter(filter) {\n        this._dateTimeFilter = filter;\n    }\n    get minDateTime() {\n        return this._min || null;\n    }\n    set minDateTime(value) {\n        this._min = this.getValidDate(this.dateTimeAdapter.deserialize(value));\n        this.changeDetector.markForCheck();\n    }\n    get maxDateTime() {\n        return this._max || null;\n    }\n    set maxDateTime(value) {\n        this._max = this.getValidDate(this.dateTimeAdapter.deserialize(value));\n        this.changeDetector.markForCheck();\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        value = this.dateTimeAdapter.deserialize(value);\n        value = this.getValidDate(value);\n        this._value = value;\n        this.selected = value;\n    }\n    get values() {\n        return this._values;\n    }\n    set values(values) {\n        if (values && values.length > 0) {\n            values = values.map(v => {\n                v = this.dateTimeAdapter.deserialize(v);\n                v = this.getValidDate(v);\n                return v ? this.dateTimeAdapter.clone(v) : null;\n            });\n            this._values = [...values];\n            this.selecteds = [...values];\n        }\n        else {\n            this._values = [];\n            this.selecteds = [];\n        }\n    }\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        this._selected = value;\n        this.changeDetector.markForCheck();\n    }\n    get selecteds() {\n        return this._selecteds;\n    }\n    set selecteds(values) {\n        this._selecteds = values;\n        this.changeDetector.markForCheck();\n    }\n    get opened() {\n        return true;\n    }\n    get pickerMode() {\n        return 'inline';\n    }\n    get isInSingleMode() {\n        return this._selectMode === 'single';\n    }\n    get isInRangeMode() {\n        return (this._selectMode === 'range' ||\n            this._selectMode === 'rangeFrom' ||\n            this._selectMode === 'rangeTo');\n    }\n    get owlDTInlineClass() {\n        return true;\n    }\n    constructor(changeDetector, dateTimeAdapter, dateTimeFormats) {\n        super(dateTimeAdapter, dateTimeFormats);\n        this.changeDetector = changeDetector;\n        this.dateTimeAdapter = dateTimeAdapter;\n        this.dateTimeFormats = dateTimeFormats;\n        /**\n         * Set the type of the dateTime picker\n         *      'both' -- show both calendar and timer\n         *      'calendar' -- show only calendar\n         *      'timer' -- show only timer\n         */\n        this._pickerType = 'both';\n        this._disabled = false;\n        this._selectMode = 'single';\n        this._values = [];\n        /**\n         * Emits selected year in multi-year view\n         * This doesn't imply a change on the selected date.\n         * */\n        this.yearSelected = new EventEmitter();\n        /**\n         * Emits selected month in year view\n         * This doesn't imply a change on the selected date.\n         * */\n        this.monthSelected = new EventEmitter();\n        /**\n         * Emits selected date\n         * */\n        this.dateSelected = new EventEmitter();\n        this._selecteds = [];\n        this.onModelChange = () => { };\n        this.onModelTouched = () => { };\n    }\n    ngOnInit() {\n        this.container.picker = this;\n    }\n    writeValue(value) {\n        if (this.isInSingleMode) {\n            this.value = value;\n            this.container.pickerMoment = value;\n        }\n        else {\n            this.values = value;\n            this.container.pickerMoment = this._values[this.container.activeSelectedIndex];\n        }\n    }\n    registerOnChange(fn) {\n        this.onModelChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.onModelTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n        this.disabled = isDisabled;\n    }\n    select(date) {\n        if (this.disabled) {\n            return;\n        }\n        if (Array.isArray(date)) {\n            this.values = [...date];\n        }\n        else {\n            this.value = date;\n        }\n        this.onModelChange(date);\n        this.onModelTouched();\n    }\n    /**\n     * Emits the selected year in multi-year view\n     * */\n    selectYear(normalizedYear) {\n        this.yearSelected.emit(normalizedYear);\n    }\n    /**\n     * Emits selected month in year view\n     * */\n    selectMonth(normalizedMonth) {\n        this.monthSelected.emit(normalizedMonth);\n    }\n    /**\n     * Emits the selected date\n     * */\n    selectDate(normalizedDate) {\n        this.dateSelected.emit(normalizedDate);\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeInlineComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: DateTimeAdapter, optional: true }, { token: OWL_DATE_TIME_FORMATS, optional: true }], target: i0.FactoryTarget.Component }); }\n    static { this.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.0.5\", type: OwlDateTimeInlineComponent, selector: \"owl-date-time-inline\", inputs: { pickerType: \"pickerType\", disabled: \"disabled\", selectMode: \"selectMode\", startAt: \"startAt\", endAt: \"endAt\", dateTimeFilter: [\"owlDateTimeFilter\", \"dateTimeFilter\"], minDateTime: [\"min\", \"minDateTime\"], maxDateTime: [\"max\", \"maxDateTime\"], value: \"value\", values: \"values\" }, outputs: { yearSelected: \"yearSelected\", monthSelected: \"monthSelected\", dateSelected: \"dateSelected\" }, host: { properties: { \"class.owl-dt-inline\": \"owlDTInlineClass\" } }, providers: [OWL_DATETIME_VALUE_ACCESSOR], viewQueries: [{ propertyName: \"container\", first: true, predicate: OwlDateTimeContainerComponent, descendants: true, static: true }], usesInheritance: true, ngImport: i0, template: \"<owl-date-time-container></owl-date-time-container>\", styles: [\"\"], dependencies: [{ kind: \"component\", type: OwlDateTimeContainerComponent, selector: \"owl-date-time-container\", exportAs: [\"owlDateTimeContainer\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeInlineComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'owl-date-time-inline', host: {\n                        '[class.owl-dt-inline]': 'owlDTInlineClass'\n                    }, changeDetection: ChangeDetectionStrategy.OnPush, preserveWhitespaces: false, providers: [OWL_DATETIME_VALUE_ACCESSOR], template: \"<owl-date-time-container></owl-date-time-container>\" }]\n        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: DateTimeAdapter, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_FORMATS]\n                }] }], propDecorators: { container: [{\n                type: ViewChild,\n                args: [OwlDateTimeContainerComponent, { static: true }]\n            }], pickerType: [{\n                type: Input\n            }], disabled: [{\n                type: Input\n            }], selectMode: [{\n                type: Input\n            }], startAt: [{\n                type: Input\n            }], endAt: [{\n                type: Input\n            }], dateTimeFilter: [{\n                type: Input,\n                args: ['owlDateTimeFilter']\n            }], minDateTime: [{\n                type: Input,\n                args: ['min']\n            }], maxDateTime: [{\n                type: Input,\n                args: ['max']\n            }], value: [{\n                type: Input\n            }], values: [{\n                type: Input\n            }], yearSelected: [{\n                type: Output\n            }], monthSelected: [{\n                type: Output\n            }], dateSelected: [{\n                type: Output\n            }] } });\n\n/**\n * dialog.module\n */\nclass OwlDialogModule {\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogModule, deps: [], target: i0.FactoryTarget.NgModule }); }\n    static { this.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogModule, declarations: [OwlDialogContainerComponent], imports: [CommonModule, A11yModule, OverlayModule, PortalModule] }); }\n    static { this.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogModule, providers: [\n            OWL_DIALOG_SCROLL_STRATEGY_PROVIDER,\n            OwlDialogService,\n        ], imports: [CommonModule, A11yModule, OverlayModule, PortalModule] }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDialogModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, A11yModule, OverlayModule, PortalModule],\n                    exports: [],\n                    declarations: [\n                        OwlDialogContainerComponent,\n                    ],\n                    providers: [\n                        OWL_DIALOG_SCROLL_STRATEGY_PROVIDER,\n                        OwlDialogService,\n                    ]\n                }]\n        }] });\n\n/**\n * date-time.module\n */\nclass OwlDateTimeModule {\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeModule, deps: [], target: i0.FactoryTarget.NgModule }); }\n    static { this.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeModule, declarations: [OwlDateTimeTriggerDirective,\n            OwlDateTimeInputDirective,\n            OwlDateTimeComponent,\n            OwlDateTimeContainerComponent,\n            OwlMultiYearViewComponent,\n            OwlYearViewComponent,\n            OwlMonthViewComponent,\n            OwlTimerComponent,\n            OwlTimerBoxComponent,\n            OwlCalendarComponent,\n            OwlCalendarBodyComponent,\n            NumberFixedLenPipe,\n            OwlDateTimeInlineComponent], imports: [CommonModule, OverlayModule, OwlDialogModule, A11yModule], exports: [OwlCalendarComponent,\n            OwlTimerComponent,\n            OwlDateTimeTriggerDirective,\n            OwlDateTimeInputDirective,\n            OwlDateTimeComponent,\n            OwlDateTimeInlineComponent,\n            OwlMultiYearViewComponent,\n            OwlYearViewComponent,\n            OwlMonthViewComponent] }); }\n    static { this.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeModule, providers: [\n            OwlDateTimeIntl,\n            OWL_DTPICKER_SCROLL_STRATEGY_PROVIDER,\n            ...optionsProviders,\n        ], imports: [CommonModule, OverlayModule, OwlDialogModule, A11yModule] }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlDateTimeModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, OverlayModule, OwlDialogModule, A11yModule],\n                    exports: [\n                        OwlCalendarComponent,\n                        OwlTimerComponent,\n                        OwlDateTimeTriggerDirective,\n                        OwlDateTimeInputDirective,\n                        OwlDateTimeComponent,\n                        OwlDateTimeInlineComponent,\n                        OwlMultiYearViewComponent,\n                        OwlYearViewComponent,\n                        OwlMonthViewComponent,\n                    ],\n                    declarations: [\n                        OwlDateTimeTriggerDirective,\n                        OwlDateTimeInputDirective,\n                        OwlDateTimeComponent,\n                        OwlDateTimeContainerComponent,\n                        OwlMultiYearViewComponent,\n                        OwlYearViewComponent,\n                        OwlMonthViewComponent,\n                        OwlTimerComponent,\n                        OwlTimerBoxComponent,\n                        OwlCalendarComponent,\n                        OwlCalendarBodyComponent,\n                        NumberFixedLenPipe,\n                        OwlDateTimeInlineComponent,\n                    ],\n                    providers: [\n                        OwlDateTimeIntl,\n                        OWL_DTPICKER_SCROLL_STRATEGY_PROVIDER,\n                        ...optionsProviders,\n                    ]\n                }]\n        }] });\n\n/**\n * array.utils\n */\n/** Creates an array and fills it with values. */\nfunction range(length, valueFunction) {\n    const valuesArray = Array(length);\n    for (let i = 0; i < length; i++) {\n        valuesArray[i] = valueFunction(i);\n    }\n    return valuesArray;\n}\n\n/**\n * date.utils\n */\n/**\n * Creates a date with the given year, month, date, hour, minute and second. Does not allow over/under-flow of the\n * month and date.\n */\nfunction createDate(year, month, date, hours = 0, minutes = 0, seconds = 0) {\n    if (month < 0 || month > 11) {\n        throw Error(`Invalid month index \"${month}\". Month index has to be between 0 and 11.`);\n    }\n    if (date < 1) {\n        throw Error(`Invalid date \"${date}\". Date has to be greater than 0.`);\n    }\n    if (hours < 0 || hours > 23) {\n        throw Error(`Invalid hours \"${hours}\". Hours has to be between 0 and 23.`);\n    }\n    if (minutes < 0 || minutes > 59) {\n        throw Error(`Invalid minutes \"${minutes}\". Minutes has to between 0 and 59.`);\n    }\n    if (seconds < 0 || seconds > 59) {\n        throw Error(`Invalid seconds \"${seconds}\". Seconds has to be between 0 and 59.`);\n    }\n    const result = createDateWithOverflow(year, month, date, hours, minutes, seconds);\n    // Check that the date wasn't above the upper bound for the month, causing the month to overflow\n    // For example, createDate(2017, 1, 31) would try to create a date 2017/02/31 which is invalid\n    if (result.getMonth() !== month) {\n        throw Error(`Invalid date \"${date}\" for month with index \"${month}\".`);\n    }\n    return result;\n}\n/**\n * Gets the number of days in the month of the given date.\n */\nfunction getNumDaysInMonth(date) {\n    const lastDateOfMonth = createDateWithOverflow(date.getFullYear(), date.getMonth() + 1, 0);\n    return lastDateOfMonth.getDate();\n}\n/**\n * Creates a date but allows the month and date to overflow.\n */\nfunction createDateWithOverflow(year, month, date, hours = 0, minutes = 0, seconds = 0) {\n    const result = new Date(year, month, date, hours, minutes, seconds);\n    if (year >= 0 && year < 100) {\n        result.setFullYear(result.getFullYear() - 1900);\n    }\n    return result;\n}\n\n/**\n * constants\n */\n/** Whether the browser supports the Intl API. */\nconst SUPPORTS_INTL_API = typeof Intl !== 'undefined';\n/** The default month names to use if Intl API is not available. */\nconst DEFAULT_MONTH_NAMES = {\n    long: [\n        'January',\n        'February',\n        'March',\n        'April',\n        'May',\n        'June',\n        'July',\n        'August',\n        'September',\n        'October',\n        'November',\n        'December'\n    ],\n    short: [\n        'Jan',\n        'Feb',\n        'Mar',\n        'Apr',\n        'May',\n        'Jun',\n        'Jul',\n        'Aug',\n        'Sep',\n        'Oct',\n        'Nov',\n        'Dec'\n    ],\n    narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D']\n};\n/** The default day of the week names to use if Intl API is not available. */\nconst DEFAULT_DAY_OF_WEEK_NAMES = {\n    long: [\n        'Sunday',\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday',\n        'Saturday'\n    ],\n    short: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S']\n};\n/** The default date names to use if Intl API is not available. */\nconst DEFAULT_DATE_NAMES = range(31, i => String(i + 1));\n\n/**\n * native-date-time-adapter.class\n */\n/**\n * Matches strings that have the form of a valid RFC 3339 string\n * (https://tools.ietf.org/html/rfc3339). Note that the string may not actually be a valid date\n * because the regex will match strings an with out of bounds month, date, etc.\n */\nconst ISO_8601_REGEX = /^\\d{4}-\\d{2}-\\d{2}(?:T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?(?:Z|(?:[+\\-]\\d{2}:\\d{2}))?)?$/;\nclass NativeDateTimeAdapter extends DateTimeAdapter {\n    constructor(owlDateTimeLocale, platform) {\n        super();\n        this.owlDateTimeLocale = owlDateTimeLocale;\n        super.setLocale(owlDateTimeLocale);\n        // IE does its own time zone correction, so we disable this on IE.\n        this.useUtcForDisplay = !platform.TRIDENT;\n        this._clampDate = platform.TRIDENT || platform.EDGE;\n    }\n    getYear(date) {\n        return date.getFullYear();\n    }\n    getMonth(date) {\n        return date.getMonth();\n    }\n    getDay(date) {\n        return date.getDay();\n    }\n    getDate(date) {\n        return date.getDate();\n    }\n    getHours(date) {\n        return date.getHours();\n    }\n    getMinutes(date) {\n        return date.getMinutes();\n    }\n    getSeconds(date) {\n        return date.getSeconds();\n    }\n    getTime(date) {\n        return date.getTime();\n    }\n    getNumDaysInMonth(date) {\n        return getNumDaysInMonth(date);\n    }\n    differenceInCalendarDays(dateLeft, dateRight) {\n        if (this.isValid(dateLeft) && this.isValid(dateRight)) {\n            const dateLeftStartOfDay = this.createDate(this.getYear(dateLeft), this.getMonth(dateLeft), this.getDate(dateLeft));\n            const dateRightStartOfDay = this.createDate(this.getYear(dateRight), this.getMonth(dateRight), this.getDate(dateRight));\n            const timeStampLeft = this.getTime(dateLeftStartOfDay) -\n                dateLeftStartOfDay.getTimezoneOffset() *\n                    this.milliseondsInMinute;\n            const timeStampRight = this.getTime(dateRightStartOfDay) -\n                dateRightStartOfDay.getTimezoneOffset() *\n                    this.milliseondsInMinute;\n            return Math.round((timeStampLeft - timeStampRight) / this.millisecondsInDay);\n        }\n        else {\n            return null;\n        }\n    }\n    getYearName(date) {\n        if (SUPPORTS_INTL_API) {\n            const dtf = new Intl.DateTimeFormat(this.getLocale(), {\n                year: 'numeric',\n                timeZone: 'utc'\n            });\n            return this.stripDirectionalityCharacters(this._format(dtf, date));\n        }\n        return String(this.getYear(date));\n    }\n    getMonthNames(style) {\n        if (SUPPORTS_INTL_API) {\n            const dtf = new Intl.DateTimeFormat(this.getLocale(), {\n                month: style,\n                timeZone: 'utc'\n            });\n            return range(12, i => this.stripDirectionalityCharacters(this._format(dtf, new Date(2017, i, 1))));\n        }\n        return DEFAULT_MONTH_NAMES[style];\n    }\n    getDayOfWeekNames(style) {\n        if (SUPPORTS_INTL_API) {\n            const dtf = new Intl.DateTimeFormat(this.getLocale(), {\n                weekday: style,\n                timeZone: 'utc'\n            });\n            return range(7, i => this.stripDirectionalityCharacters(this._format(dtf, new Date(2017, 0, i + 1))));\n        }\n        return DEFAULT_DAY_OF_WEEK_NAMES[style];\n    }\n    getDateNames() {\n        if (SUPPORTS_INTL_API) {\n            const dtf = new Intl.DateTimeFormat(this.getLocale(), {\n                day: 'numeric',\n                timeZone: 'utc'\n            });\n            return range(31, i => this.stripDirectionalityCharacters(this._format(dtf, new Date(2017, 0, i + 1))));\n        }\n        return DEFAULT_DATE_NAMES;\n    }\n    toIso8601(date) {\n        return date.toISOString();\n    }\n    isEqual(dateLeft, dateRight) {\n        if (this.isValid(dateLeft) && this.isValid(dateRight)) {\n            return dateLeft.getTime() === dateRight.getTime();\n        }\n        else {\n            return false;\n        }\n    }\n    isSameDay(dateLeft, dateRight) {\n        if (this.isValid(dateLeft) && this.isValid(dateRight)) {\n            const dateLeftStartOfDay = this.clone(dateLeft);\n            const dateRightStartOfDay = this.clone(dateRight);\n            dateLeftStartOfDay.setHours(0, 0, 0, 0);\n            dateRightStartOfDay.setHours(0, 0, 0, 0);\n            return (dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime());\n        }\n        else {\n            return false;\n        }\n    }\n    isValid(date) {\n        return date && !isNaN(date.getTime());\n    }\n    invalid() {\n        return new Date(NaN);\n    }\n    isDateInstance(obj) {\n        return obj instanceof Date;\n    }\n    addCalendarYears(date, amount) {\n        return this.addCalendarMonths(date, amount * 12);\n    }\n    addCalendarMonths(date, amount) {\n        const result = this.clone(date);\n        amount = Number(amount);\n        const desiredMonth = result.getMonth() + amount;\n        const dateWithDesiredMonth = new Date(0);\n        dateWithDesiredMonth.setFullYear(result.getFullYear(), desiredMonth, 1);\n        dateWithDesiredMonth.setHours(0, 0, 0, 0);\n        const daysInMonth = this.getNumDaysInMonth(dateWithDesiredMonth);\n        // Set the last day of the new month\n        // if the original date was the last day of the longer month\n        result.setMonth(desiredMonth, Math.min(daysInMonth, result.getDate()));\n        return result;\n    }\n    addCalendarDays(date, amount) {\n        const result = this.clone(date);\n        amount = Number(amount);\n        result.setDate(result.getDate() + amount);\n        return result;\n    }\n    setHours(date, amount) {\n        const result = this.clone(date);\n        result.setHours(amount);\n        return result;\n    }\n    setMinutes(date, amount) {\n        const result = this.clone(date);\n        result.setMinutes(amount);\n        return result;\n    }\n    setSeconds(date, amount) {\n        const result = this.clone(date);\n        result.setSeconds(amount);\n        return result;\n    }\n    createDate(year, month, date, hours = 0, minutes = 0, seconds = 0) {\n        return createDate(year, month, date, hours, minutes, seconds);\n    }\n    clone(date) {\n        return this.createDate(this.getYear(date), this.getMonth(date), this.getDate(date), this.getHours(date), this.getMinutes(date), this.getSeconds(date));\n    }\n    now() {\n        return new Date();\n    }\n    format(date, displayFormat) {\n        if (!this.isValid(date)) {\n            throw Error('JSNativeDate: Cannot format invalid date.');\n        }\n        if (SUPPORTS_INTL_API) {\n            if (this._clampDate &&\n                (date.getFullYear() < 1 || date.getFullYear() > 9999)) {\n                date = this.clone(date);\n                date.setFullYear(Math.max(1, Math.min(9999, date.getFullYear())));\n            }\n            displayFormat = { ...displayFormat, timeZone: 'utc' };\n            const dtf = new Intl.DateTimeFormat(this.getLocale(), displayFormat);\n            return this.stripDirectionalityCharacters(this._format(dtf, date));\n        }\n        return this.stripDirectionalityCharacters(date.toDateString());\n    }\n    parse(value, parseFormat) {\n        // There is no way using the native JS Date to set the parse format or locale\n        if (typeof value === 'number') {\n            return new Date(value);\n        }\n        return value ? new Date(Date.parse(value)) : null;\n    }\n    /**\n     * Returns the given value if given a valid Date or null. Deserializes valid ISO 8601 strings\n     * (https://www.ietf.org/rfc/rfc3339.txt) into valid Dates and empty string into null. Returns an\n     * invalid date for all other values.\n     */\n    deserialize(value) {\n        if (typeof value === 'string') {\n            if (!value) {\n                return null;\n            }\n            // The `Date` constructor accepts formats other than ISO 8601, so we need to make sure the\n            // string is the right format first.\n            if (ISO_8601_REGEX.test(value)) {\n                const date = new Date(value);\n                if (this.isValid(date)) {\n                    return date;\n                }\n            }\n        }\n        return super.deserialize(value);\n    }\n    /**\n     * Strip out unicode LTR and RTL characters. Edge and IE insert these into formatted dates while\n     * other browsers do not. We remove them to make output consistent and because they interfere with\n     * date parsing.\n     */\n    stripDirectionalityCharacters(str) {\n        return str.replace(/[\\u200e\\u200f]/g, '');\n    }\n    /**\n     * When converting Date object to string, javascript built-in functions may return wrong\n     * results because it applies its internal DST rules. The DST rules around the world change\n     * very frequently, and the current valid rule is not always valid in previous years though.\n     * We work around this problem building a new Date object which has its internal UTC\n     * representation with the local date and time.\n     */\n    _format(dtf, date) {\n        const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n        return dtf.format(d);\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: NativeDateTimeAdapter, deps: [{ token: OWL_DATE_TIME_LOCALE, optional: true }, { token: i1$1.Platform }], target: i0.FactoryTarget.Injectable }); }\n    static { this.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: NativeDateTimeAdapter }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: NativeDateTimeAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_LOCALE]\n                }] }, { type: i1$1.Platform }] });\n\nconst OWL_NATIVE_DATE_TIME_FORMATS = {\n    parseInput: null,\n    fullPickerInput: { year: 'numeric', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' },\n    datePickerInput: { year: 'numeric', month: 'numeric', day: 'numeric' },\n    timePickerInput: { hour: 'numeric', minute: 'numeric' },\n    monthYearLabel: { year: 'numeric', month: 'short' },\n    dateA11yLabel: { year: 'numeric', month: 'long', day: 'numeric' },\n    monthYearA11yLabel: { year: 'numeric', month: 'long' },\n};\n\n/**\n * native-date-time.module\n */\nclass NativeDateTimeModule {\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: NativeDateTimeModule, deps: [], target: i0.FactoryTarget.NgModule }); }\n    static { this.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"18.0.5\", ngImport: i0, type: NativeDateTimeModule, imports: [PlatformModule] }); }\n    static { this.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: NativeDateTimeModule, providers: [\n            { provide: DateTimeAdapter, useClass: NativeDateTimeAdapter },\n        ], imports: [PlatformModule] }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: NativeDateTimeModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [PlatformModule],\n                    providers: [\n                        { provide: DateTimeAdapter, useClass: NativeDateTimeAdapter },\n                    ],\n                }]\n        }] });\nclass OwlNativeDateTimeModule {\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlNativeDateTimeModule, deps: [], target: i0.FactoryTarget.NgModule }); }\n    static { this.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlNativeDateTimeModule, imports: [NativeDateTimeModule] }); }\n    static { this.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlNativeDateTimeModule, providers: [{ provide: OWL_DATE_TIME_FORMATS, useValue: OWL_NATIVE_DATE_TIME_FORMATS }], imports: [NativeDateTimeModule] }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: OwlNativeDateTimeModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [NativeDateTimeModule],\n                    providers: [{ provide: OWL_DATE_TIME_FORMATS, useValue: OWL_NATIVE_DATE_TIME_FORMATS }],\n                }]\n        }] });\n\n/**\n * unix-timestamp-date-time-adapter.class\n */\nclass UnixTimestampDateTimeAdapter extends DateTimeAdapter {\n    constructor(owlDateTimeLocale, platform) {\n        super();\n        this.owlDateTimeLocale = owlDateTimeLocale;\n        super.setLocale(owlDateTimeLocale);\n        // IE does its own time zone correction, so we disable this on IE.\n        this.useUtcForDisplay = !platform.TRIDENT;\n        this._clampDate = platform.TRIDENT || platform.EDGE;\n    }\n    /**\n     * Strip out unicode LTR and RTL characters. Edge and IE insert these into formatted dates while\n     * other browsers do not. We remove them to make output consistent and because they interfere with\n     * date parsing.\n     */\n    static { this.search_ltr_rtl_pattern = '/[\\u200e\\u200f]/g'; }\n    static stripDirectionalityCharacters(str) {\n        return str.replace(UnixTimestampDateTimeAdapter.search_ltr_rtl_pattern, '');\n    }\n    /**\n     * When converting Date object to string, javascript built-in functions may return wrong\n     * results because it applies its internal DST rules. The DST rules around the world change\n     * very frequently, and the current valid rule is not always valid in previous years though.\n     * We work around this problem building a new Date object which has its internal UTC\n     * representation with the local date and time.\n     */\n    static _format(dtf, date) {\n        const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n        return dtf.format(d);\n    }\n    addCalendarDays(date, amount) {\n        const result = new Date(date);\n        amount = Number(amount);\n        result.setDate(result.getDate() + amount);\n        return result.getTime();\n    }\n    addCalendarMonths(date, amount) {\n        const result = new Date(date);\n        amount = Number(amount);\n        const desiredMonth = result.getMonth() + amount;\n        const dateWithDesiredMonth = new Date(0);\n        dateWithDesiredMonth.setFullYear(result.getFullYear(), desiredMonth, 1);\n        dateWithDesiredMonth.setHours(0, 0, 0, 0);\n        const daysInMonth = this.getNumDaysInMonth(dateWithDesiredMonth.getTime());\n        // Set the last day of the new month\n        // if the original date was the last day of the longer month\n        result.setMonth(desiredMonth, Math.min(daysInMonth, result.getDate()));\n        return result.getTime();\n    }\n    addCalendarYears(date, amount) {\n        return this.addCalendarMonths(date, amount * 12);\n    }\n    clone(date) {\n        return date;\n    }\n    createDate(year, month, date, hours = 0, minutes = 0, seconds = 0) {\n        return createDate(year, month, date, hours, minutes, seconds).getTime();\n    }\n    differenceInCalendarDays(dateLeft, dateRight) {\n        if (this.isValid(dateLeft) && this.isValid(dateRight)) {\n            const dateLeftStartOfDay = this.createDate(this.getYear(dateLeft), this.getMonth(dateLeft), this.getDate(dateLeft));\n            const dateRightStartOfDay = this.createDate(this.getYear(dateRight), this.getMonth(dateRight), this.getDate(dateRight));\n            const timeStampLeft = this.getTime(dateLeftStartOfDay) -\n                new Date(dateLeftStartOfDay).getTimezoneOffset() *\n                    this.milliseondsInMinute;\n            const timeStampRight = this.getTime(dateRightStartOfDay) -\n                new Date(dateRightStartOfDay).getTimezoneOffset() *\n                    this.milliseondsInMinute;\n            return Math.round((timeStampLeft - timeStampRight) / this.millisecondsInDay);\n        }\n        else {\n            return null;\n        }\n    }\n    format(date, displayFormat) {\n        if (!this.isValid(date)) {\n            throw Error('JSNativeDate: Cannot format invalid date.');\n        }\n        const jsDate = new Date(date);\n        if (SUPPORTS_INTL_API) {\n            if (this._clampDate &&\n                (jsDate.getFullYear() < 1 || jsDate.getFullYear() > 9999)) {\n                jsDate.setFullYear(Math.max(1, Math.min(9999, jsDate.getFullYear())));\n            }\n            displayFormat = { ...displayFormat, timeZone: 'utc' };\n            const dtf = new Intl.DateTimeFormat(this.locale, displayFormat);\n            return UnixTimestampDateTimeAdapter.stripDirectionalityCharacters(UnixTimestampDateTimeAdapter._format(dtf, jsDate));\n        }\n        return UnixTimestampDateTimeAdapter.stripDirectionalityCharacters(jsDate.toDateString());\n    }\n    getDate(date) {\n        return new Date(date).getDate();\n    }\n    getDateNames() {\n        if (SUPPORTS_INTL_API) {\n            const dtf = new Intl.DateTimeFormat(this.locale, {\n                day: 'numeric',\n                timeZone: 'utc'\n            });\n            return range(31, i => UnixTimestampDateTimeAdapter.stripDirectionalityCharacters(UnixTimestampDateTimeAdapter._format(dtf, new Date(2017, 0, i + 1))));\n        }\n        return DEFAULT_DATE_NAMES;\n    }\n    getDay(date) {\n        return new Date(date).getDay();\n    }\n    getDayOfWeekNames(style) {\n        if (SUPPORTS_INTL_API) {\n            const dtf = new Intl.DateTimeFormat(this.locale, {\n                weekday: style,\n                timeZone: 'utc'\n            });\n            return range(7, i => UnixTimestampDateTimeAdapter.stripDirectionalityCharacters(UnixTimestampDateTimeAdapter._format(dtf, new Date(2017, 0, i + 1))));\n        }\n        return DEFAULT_DAY_OF_WEEK_NAMES[style];\n    }\n    getHours(date) {\n        return new Date(date).getHours();\n    }\n    getMinutes(date) {\n        return new Date(date).getMinutes();\n    }\n    getMonth(date) {\n        return new Date(date).getMonth();\n    }\n    getMonthNames(style) {\n        if (SUPPORTS_INTL_API) {\n            const dtf = new Intl.DateTimeFormat(this.locale, {\n                month: style,\n                timeZone: 'utc'\n            });\n            return range(12, i => UnixTimestampDateTimeAdapter.stripDirectionalityCharacters(UnixTimestampDateTimeAdapter._format(dtf, new Date(2017, i, 1))));\n        }\n        return DEFAULT_MONTH_NAMES[style];\n    }\n    getNumDaysInMonth(date) {\n        return getNumDaysInMonth(new Date(date));\n    }\n    getSeconds(date) {\n        return new Date(date).getSeconds();\n    }\n    getTime(date) {\n        return date;\n    }\n    getYear(date) {\n        return new Date(date).getFullYear();\n    }\n    getYearName(date) {\n        if (SUPPORTS_INTL_API) {\n            const dtf = new Intl.DateTimeFormat(this.locale, {\n                year: 'numeric',\n                timeZone: 'utc'\n            });\n            return UnixTimestampDateTimeAdapter.stripDirectionalityCharacters(UnixTimestampDateTimeAdapter._format(dtf, new Date(date)));\n        }\n        return String(this.getYear(date));\n    }\n    invalid() {\n        return NaN;\n    }\n    isDateInstance(obj) {\n        return typeof obj === 'number';\n    }\n    isEqual(dateLeft, dateRight) {\n        if (this.isValid(dateLeft) && this.isValid(dateRight)) {\n            return dateLeft === dateRight;\n        }\n        else {\n            return false;\n        }\n    }\n    isSameDay(dateLeft, dateRight) {\n        if (this.isValid(dateLeft) && this.isValid(dateRight)) {\n            const dateLeftStartOfDay = new Date(dateLeft);\n            const dateRightStartOfDay = new Date(dateRight);\n            dateLeftStartOfDay.setHours(0, 0, 0, 0);\n            dateRightStartOfDay.setHours(0, 0, 0, 0);\n            return (dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime());\n        }\n        else {\n            return false;\n        }\n    }\n    isValid(date) {\n        return (date || date === 0) && !isNaN(date);\n    }\n    now() {\n        return new Date().getTime();\n    }\n    parse(value, parseFormat) {\n        // There is no way using the native JS Date to set the parse format or locale\n        if (typeof value === 'number') {\n            return value;\n        }\n        return value ? new Date(Date.parse(value)).getTime() : null;\n    }\n    setHours(date, amount) {\n        const result = new Date(date);\n        result.setHours(amount);\n        return result.getTime();\n    }\n    setMinutes(date, amount) {\n        const result = new Date(date);\n        result.setMinutes(amount);\n        return result.getTime();\n    }\n    setSeconds(date, amount) {\n        const result = new Date(date);\n        result.setSeconds(amount);\n        return result.getTime();\n    }\n    toIso8601(date) {\n        return new Date(date).toISOString();\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: UnixTimestampDateTimeAdapter, deps: [{ token: OWL_DATE_TIME_LOCALE, optional: true }, { token: i1$1.Platform }], target: i0.FactoryTarget.Injectable }); }\n    static { this.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: UnixTimestampDateTimeAdapter }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.0.5\", ngImport: i0, type: UnixTimestampDateTimeAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_LOCALE]\n                }] }, { type: i1$1.Platform }] });\n\nconst OWL_UNIX_TIMESTAMP_DATE_TIME_FORMATS = {\n    parseInput: null,\n    fullPickerInput: { year: 'numeric', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' },\n    datePickerInput: { year: 'numeric', month: 'numeric', day: 'numeric' },\n    timePickerInput: { hour: 'numeric', minute: 'numeric' },\n    monthYearLabel: { year: 'numeric', month: 'short' },\n    dateA11yLabel: { year: 'numeric', month: 'long', day: 'numeric' },\n    monthYearA11yLabel: { year: 'numeric', month: 'long' },\n};\n\n/**\n * picker\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CalendarCell, DateTimeAdapter, DateView, DefaultOptions, NativeDateTimeAdapter, OWL_DATETIME_VALIDATORS, OWL_DATETIME_VALUE_ACCESSOR$1 as OWL_DATETIME_VALUE_ACCESSOR, OWL_DATE_TIME_FORMATS, OWL_DATE_TIME_LOCALE, OWL_DATE_TIME_LOCALE_PROVIDER, OWL_UNIX_TIMESTAMP_DATE_TIME_FORMATS, OptionsTokens, OwlCalendarBodyComponent, OwlCalendarComponent, OwlDateTimeComponent, OwlDateTimeInlineComponent, OwlDateTimeInputDirective, OwlDateTimeIntl, OwlDateTimeModule, OwlDateTimeTriggerDirective, OwlMonthViewComponent, OwlMultiYearViewComponent, OwlNativeDateTimeModule, OwlTimerComponent, OwlYearViewComponent, UnixTimestampDateTimeAdapter, defaultOptionsFactory, multiYearOptionsFactory, optionsProviders };\n","import * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Optional, Inject, NgModule } from '@angular/core';\nimport { DateTimeAdapter, OWL_DATE_TIME_LOCALE, OWL_DATE_TIME_FORMATS } from '@danielmoncada/angular-datetime-picker';\nimport dayjs from 'dayjs';\nimport localData from 'dayjs/plugin/localeData';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\n\n/**\n * dayjs-date-time-adapter.class\n */\ndayjs.extend(LocalizedFormat);\ndayjs.extend(localData);\n/** InjectionToken for dayjs date adapter to configure options. */\nconst OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS = new InjectionToken('OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS', {\n    providedIn: 'root',\n    factory: OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS_FACTORY,\n});\n/** @docs-private */\nfunction OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS_FACTORY() {\n    return {\n        useUtc: false,\n    };\n}\n/** Creates an array and fills it with values. */\nfunction range(length, valueFunction) {\n    const valuesArray = Array(length);\n    for (let i = 0; i < length; i++) {\n        valuesArray[i] = valueFunction(i);\n    }\n    return valuesArray;\n}\nclass DayjsDateTimeAdapter extends DateTimeAdapter {\n    constructor(owlDateTimeLocale, options) {\n        super();\n        this.owlDateTimeLocale = owlDateTimeLocale;\n        this.options = options;\n        this.setLocale(owlDateTimeLocale || dayjs().locale());\n    }\n    setLocale(locale) {\n        super.setLocale(locale);\n        const dayjsLocalData = dayjs().locale(locale).localeData();\n        this._localeData = {\n            longMonths: dayjsLocalData.months(),\n            shortMonths: dayjsLocalData.monthsShort(),\n            longDaysOfWeek: dayjsLocalData.weekdaysShort(),\n            shortDaysOfWeek: dayjsLocalData.weekdaysShort(),\n            narrowDaysOfWeek: dayjsLocalData.weekdaysMin(),\n            dates: range(31, (i) => this.createDate(2017, 0, i + 1).format('D')),\n        };\n    }\n    getYear(date) {\n        return this.clone(date).year();\n    }\n    getMonth(date) {\n        return this.clone(date).month();\n    }\n    getDay(date) {\n        return this.clone(date).day();\n    }\n    getDate(date) {\n        return this.clone(date).date();\n    }\n    getHours(date) {\n        return this.clone(date).hour();\n    }\n    getMinutes(date) {\n        return this.clone(date).minute();\n    }\n    getSeconds(date) {\n        return this.clone(date).second();\n    }\n    getTime(date) {\n        return this.clone(date).valueOf();\n    }\n    getNumDaysInMonth(date) {\n        return this.clone(date).daysInMonth();\n    }\n    differenceInCalendarDays(dateLeft, dateRight) {\n        return Math.ceil(dateLeft.startOf('day').diff(dateRight.startOf('day'), 'day', true));\n    }\n    getYearName(date) {\n        return date.format('YYYY');\n    }\n    getMonthNames(style) {\n        return style === 'long'\n            ? this._localeData.longMonths\n            : this._localeData.shortMonths;\n    }\n    getDayOfWeekNames(style) {\n        if (style === 'long') {\n            return this._localeData.longDaysOfWeek;\n        }\n        if (style === 'short') {\n            return this._localeData.shortDaysOfWeek;\n        }\n        return this._localeData.narrowDaysOfWeek;\n    }\n    getDateNames() {\n        return this._localeData.dates;\n    }\n    toIso8601(date) {\n        return this.clone(date).toISOString();\n    }\n    isEqual(dateLeft, dateRight) {\n        return this.clone(dateLeft).isSame(this.clone(dateRight));\n    }\n    isSameDay(dateLeft, dateRight) {\n        return this.clone(dateLeft).isSame(this.clone(dateRight), 'day');\n    }\n    isValid(date) {\n        return this.clone(date).isValid();\n    }\n    invalid() {\n        return dayjs(NaN);\n    }\n    isDateInstance(obj) {\n        return dayjs.isDayjs(obj);\n    }\n    /**\n     * Attempts to deserialize a value to a valid date object. This is different from parsing in that\n     * deserialize should only accept non-ambiguous, locale-independent formats (e.g. a ISO 8601\n     * string). The datepicker will call this method on all of it's `@Input()` properties that accept dates.\n     * It is therefore possible to support passing values from your backend directly to these properties by\n     * overriding this method to also deserialize the format used by your backend.\n     * In this dayjs adapter it accepts Dayjs objects or strings that can be input into the dayjs contructor (e.g. ISO 8601).\n     */\n    deserialize(value) {\n        if (typeof value === 'string') {\n            const constructedDayjs = dayjs(value);\n            return this.isValid(constructedDayjs)\n                ? constructedDayjs\n                : this.invalid();\n        }\n        else if (value == null ||\n            (this.isDateInstance(value) && this.isValid(value))) {\n            return value;\n        }\n        return this.invalid();\n    }\n    addCalendarYears(date, amount) {\n        return this.clone(date).add(amount, 'year');\n    }\n    addCalendarMonths(date, amount) {\n        return this.clone(date).add(amount, 'month');\n    }\n    addCalendarDays(date, amount) {\n        return this.clone(date).add(amount, 'day');\n    }\n    setHours(date, amount) {\n        return this.clone(date).hour(amount);\n    }\n    setMinutes(date, amount) {\n        return this.clone(date).minute(amount);\n    }\n    setSeconds(date, amount) {\n        return this.clone(date).second(amount);\n    }\n    createDate(year, month, date, hours = 0, minutes = 0, seconds = 0) {\n        if (month < 0 || month > 11) {\n            throw Error(`Invalid month index \"${month}\". Month index has to be between 0 and 11.`);\n        }\n        if (date < 1) {\n            throw Error(`Invalid date \"${date}\". Date has to be greater than 0.`);\n        }\n        if (hours < 0 || hours > 23) {\n            throw Error(`Invalid hours \"${hours}\". Hours has to be between 0 and 23.`);\n        }\n        if (minutes < 0 || minutes > 59) {\n            throw Error(`Invalid minutes \"${minutes}\". Minutes has to between 0 and 59.`);\n        }\n        if (seconds < 0 || seconds > 59) {\n            throw Error(`Invalid seconds \"${seconds}\". Seconds has to be between 0 and 59.`);\n        }\n        let result = this.createDayjs(dayjs());\n        function trySetUnit(date, unitType, amount) {\n            if (amount >= 0) {\n                return date.set(unitType, amount);\n            }\n            return date;\n        }\n        result = trySetUnit(result, 'year', year);\n        result = trySetUnit(result, 'month', month);\n        result = trySetUnit(result, 'date', date);\n        result = trySetUnit(result, 'hour', hours);\n        result = trySetUnit(result, 'minute', minutes);\n        result = trySetUnit(result, 'second', seconds);\n        result.locale(this.locale);\n        // If the result isn't valid, the date must have been out of bounds for this month.\n        if (!result.isValid()) {\n            throw Error(`Invalid date \"${date}\" for month with index \"${month}\".`);\n        }\n        return result;\n    }\n    clone(date) {\n        return this.createDayjs(date).clone().locale(this.locale);\n    }\n    now() {\n        return this.clone(dayjs());\n    }\n    format(date, displayFormat) {\n        return this.clone(date).format(displayFormat);\n    }\n    parse(value, parseFormat) {\n        return dayjs(value, parseFormat);\n    }\n    createDayjs(date) {\n        return date === null\n            ? dayjs(null, { utc: this.options.useUtc })\n            : dayjs(date, {\n                utc: this.options.useUtc,\n            });\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: DayjsDateTimeAdapter, deps: [{ token: OWL_DATE_TIME_LOCALE, optional: true }, { token: OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS, optional: true }], target: i0.FactoryTarget.Injectable }); }\n    static { this.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: DayjsDateTimeAdapter }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: DayjsDateTimeAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DATE_TIME_LOCALE]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS]\n                }] }] });\n\nconst OWL_DAYJS_DATE_TIME_FORMATS = {\n    parseInput: 'l LT',\n    fullPickerInput: 'l LT',\n    datePickerInput: 'l',\n    timePickerInput: 'LT',\n    monthYearLabel: 'MMM YYYY',\n    dateA11yLabel: 'LL',\n    monthYearA11yLabel: 'MMMM YYYY'\n};\n\n/**\n * dayjs-date-time.module\n */\nclass DayJsDateTimeModule {\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: DayJsDateTimeModule, deps: [], target: i0.FactoryTarget.NgModule }); }\n    static { this.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"17.0.4\", ngImport: i0, type: DayJsDateTimeModule }); }\n    static { this.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: DayJsDateTimeModule, providers: [\n            {\n                provide: DateTimeAdapter,\n                useClass: DayjsDateTimeAdapter,\n                deps: [OWL_DATE_TIME_LOCALE, OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS]\n            },\n        ] }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: DayJsDateTimeModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [\n                        {\n                            provide: DateTimeAdapter,\n                            useClass: DayjsDateTimeAdapter,\n                            deps: [OWL_DATE_TIME_LOCALE, OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS]\n                        },\n                    ],\n                }]\n        }] });\nclass OwlDayJsDateTimeModule {\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: OwlDayJsDateTimeModule, deps: [], target: i0.FactoryTarget.NgModule }); }\n    static { this.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"17.0.4\", ngImport: i0, type: OwlDayJsDateTimeModule, imports: [DayJsDateTimeModule] }); }\n    static { this.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: OwlDayJsDateTimeModule, providers: [{ provide: OWL_DATE_TIME_FORMATS, useValue: OWL_DAYJS_DATE_TIME_FORMATS }], imports: [DayJsDateTimeModule] }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.4\", ngImport: i0, type: OwlDayJsDateTimeModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [DayJsDateTimeModule],\n                    providers: [{ provide: OWL_DATE_TIME_FORMATS, useValue: OWL_DAYJS_DATE_TIME_FORMATS }],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS, OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS_FACTORY, OwlDayJsDateTimeModule };\n","import { Inject, Injectable, InjectionToken, Optional } from '@angular/core';\r\nimport { DateAdapter, MAT_DATE_LOCALE } from '@angular/material/core';\r\nimport dayjs, { Dayjs } from 'dayjs';\r\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\r\nimport localeData from 'dayjs/plugin/localeData';\r\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport { classLog } from '../../../../shared/logging';\r\n\r\nexport interface MatDayjsDateAdapterOptions {\r\n  /**\r\n   * Turns the use of utc dates on or off.\r\n   * Changing this will change how Angular Material components like DatePicker output dates.\r\n   * @default false\r\n   */\r\n  useUtc?: boolean;\r\n}\r\n\r\n/** InjectionToken for Dayjs date adapter to configure options. */\r\nexport const MAT_DAYJS_DATE_ADAPTER_OPTIONS =\r\n  new InjectionToken<MatDayjsDateAdapterOptions>(\r\n    'MAT_DAYJS_DATE_ADAPTER_OPTIONS',\r\n    {\r\n      providedIn: 'root',\r\n      factory: () => ({\r\n        useUtc: true,\r\n      } satisfies MatDayjsDateAdapterOptions),\r\n    }\r\n  );\r\n\r\n// function MAT_DAYJS_DATE_ADAPTER_OPTIONS_FACTORY(): MatDayjsDateAdapterOptions {\r\n//   return {\r\n//     useUtc: false,\r\n//   } satisfies MatDayjsDateAdapterOptions;\r\n// }\r\n\r\n/**\r\n * This Date Adapter was inspired by @vanrossumict/material-dayjs-adapter\r\n * https://github.com/vanrossumict/material-dayjs-adapter/tree/localization/projects/material-dayjs-adapter\r\n * This adapter wasn't made as a fork because @vanrossumict/material-dayjs-adapter is a fork of @tabuckner/material-dayjs-adapter\r\n * witch since continued to be updated and forked so we didn't want to add to the complexity\r\n */\r\n@Injectable()\r\nexport class MatDayjsDateAdapter extends DateAdapter<Dayjs> {\r\n  \r\n  log = classLog({MatDayjsDateAdapter});\r\n\r\n  private localeData: {\r\n    firstDayOfWeek: number;\r\n    longMonths: string[];\r\n    shortMonths: string[];\r\n    dates: string[];\r\n    longDaysOfWeek: string[];\r\n    shortDaysOfWeek: string[];\r\n    narrowDaysOfWeek: string[];\r\n  };\r\n\r\n  constructor(\r\n    @Optional() @Inject(MAT_DATE_LOCALE) public dateLocale: string,\r\n    @Optional() @Inject(MAT_DAYJS_DATE_ADAPTER_OPTIONS) private _options?: MatDayjsDateAdapterOptions\r\n  ) {\r\n    super();\r\n\r\n    this.log.a('constructor', { this: this, shouldUseUtc: this.shouldUseUtc, dateLocale, _options });\r\n    if (this.shouldUseUtc)\r\n      dayjs.extend(utc);\r\n\r\n    dayjs.extend(localizedFormat);\r\n    dayjs.extend(customParseFormat);\r\n    dayjs.extend(localeData);\r\n\r\n    this.setLocale(dayjs().locale());\r\n  }\r\n\r\n  /**\r\n   * @vanrossumict/material-dayjs-adapter didn't set dayjs locale in adapter but in the component in witch it was used\r\n   */\r\n  override setLocale(locale: string) {\r\n    super.setLocale(locale);\r\n    const l = this.log.fn('setLocale', { locale });\r\n\r\n    dayjs.locale(locale);\r\n    const localeData = dayjs().locale(locale).localeData();\r\n\r\n    this.localeData = {\r\n      firstDayOfWeek: localeData.firstDayOfWeek(),\r\n      longMonths: dayjs.months(),\r\n      shortMonths: dayjs.monthsShort(),\r\n      dates: this.range(31, (i) => this.createDate(2017, 0, i + 1).format('D')),\r\n      longDaysOfWeek: this.range(7, (i) => this.dayJs().set('day', i).format('dddd')),\r\n      shortDaysOfWeek: dayjs.weekdaysShort(),\r\n      narrowDaysOfWeek: dayjs.weekdaysMin(),\r\n    };\r\n    l.r(this.localeData);\r\n  }\r\n\r\n  override getYear(date: Dayjs): number {\r\n    return this.clone(date).year();\r\n  }\r\n\r\n  override getMonth(date: Dayjs): number {\r\n    return this.clone(date).month();\r\n  }\r\n\r\n  override getDate(date: Dayjs): number {\r\n    return this.clone(date).date();\r\n  }\r\n\r\n  override getDayOfWeek(date: Dayjs): number {\r\n    return this.clone(date).day();\r\n  }\r\n\r\n  override getMonthNames(style: 'long' | 'short' | 'narrow'): string[] {\r\n    return style === 'long'\r\n      ? this.localeData.longMonths\r\n      : this.localeData.shortMonths;\r\n  }\r\n\r\n  override getDateNames(): string[] {\r\n    return this.localeData.dates;\r\n  }\r\n\r\n  override getDayOfWeekNames(style: 'long' | 'short' | 'narrow'): string[] {\r\n    if (style === 'long') {\r\n      return this.localeData.longDaysOfWeek;\r\n    }\r\n    if (style === 'short') {\r\n      return this.localeData.shortDaysOfWeek;\r\n    }\r\n    return this.localeData.narrowDaysOfWeek;\r\n  }\r\n\r\n  override getYearName(date: Dayjs): string {\r\n    return this.clone(date).format('YYYY');\r\n  }\r\n\r\n  override getFirstDayOfWeek(): number {\r\n    return this.localeData.firstDayOfWeek;\r\n  }\r\n\r\n  override getNumDaysInMonth(date: Dayjs): number {\r\n    return this.clone(date).daysInMonth();\r\n  }\r\n\r\n  override clone(date: Dayjs): Dayjs {\r\n    return this.dayJs(date).clone(); //.locale(this.locale);\r\n  }\r\n\r\n  /**\r\n   * @vanrossumict/material-dayjs-adapter didn't set hours, minutes, seconds and milliseconds to zero but we expect\r\n   * dates to have time set as midnight\r\n   */\r\n  override createDate(year: number, month: number, date: number): Dayjs {\r\n    const returnDayjs = this.dayJs()\r\n      .set('year', year)\r\n      .set('month', month)\r\n      .set('date', date)\r\n      .set('hour', 0)\r\n      .set('minute', 0)\r\n      .set('second', 0)\r\n      .set('millisecond', 0);\r\n    return returnDayjs;\r\n  }\r\n\r\n  override today(): Dayjs {\r\n    return this.dayJs();\r\n  }\r\n\r\n  override parse(value: any, parseFormat: string): Dayjs | null {\r\n    const valueIsString = typeof value === 'string';\r\n    const l = this.log.fn('parse', { value, parseFormat, valueIsString });\r\n    if (value && valueIsString) {\r\n      const longDateFormat = dayjs().localeData().longDateFormat(parseFormat) as string; // MM/DD/YYY or DD-MM-YYYY, etc.\r\n\r\n      let parsed = this.dayJs(value, longDateFormat, this.locale, true);\r\n\r\n      if (parsed.isValid()) {\r\n        // string value is exactly like long date format\r\n        return parsed;\r\n      }\r\n\r\n      if (value.length === 9) {\r\n        // user might have typed 1-12-2020 or 12/1/2020\r\n        // try to parse with D-MM-YYYY or MM/D/YYYY (based on long date format)\r\n        const formatWithSmallDay = longDateFormat.replace('DD', 'D');\r\n        parsed = this.dayJs(value, formatWithSmallDay, this.locale, true);\r\n        if (parsed.isValid()) {\r\n          return parsed;\r\n        }\r\n\r\n        // user might have typed 25-1-2020 or 1/25/2020\r\n        // try to parse with DD-M-YYYY or M/DD/YYYY (based on long date format)\r\n        const formatWithSmallMonth = longDateFormat.replace('MM', 'M');\r\n        parsed = this.dayJs(value, formatWithSmallMonth, this.locale, true);\r\n        if (parsed.isValid()) {\r\n          return parsed;\r\n        }\r\n      }\r\n\r\n      if (value.length === 8) {\r\n        // user might have typed 24012020 or 01242020\r\n        // strip long date format of non-alphabetic characters so we get MMDDYYYY or DDMMYYYY\r\n        const formatWithoutSeparators = longDateFormat.replace(/[\\W_]+/g, '');\r\n        parsed = this.dayJs(value, formatWithoutSeparators, this.locale, true);\r\n        if (parsed.isValid()) {\r\n          return parsed;\r\n        }\r\n\r\n        // user might have typed 1-2-2020 or 2/1/2020\r\n        // try to parse with D-M-YYYY or M/D/YYYY (based on long date format)\r\n        const formatWithSmallDayAndMonth = longDateFormat.replace('DD', 'D').replace('MM', 'M');\r\n        parsed = this.dayJs(value, formatWithSmallDayAndMonth, this.locale, true);\r\n        if (parsed.isValid()) {\r\n          return parsed;\r\n        }\r\n      }\r\n\r\n      if (value.length < 6 && value.length > 2) {\r\n        // user might have typed 01/24, 24-01, 1/24, 24/1 or 24-1\r\n        // try to extract month and day part and parse them with custom format\r\n        let parts = new Array();\r\n        if (value.indexOf('/') !== -1) {\r\n          parts = value.split('/');\r\n        }\r\n        if (value.indexOf('-') !== -1) {\r\n          parts = value.split('-');\r\n        }\r\n        if (value.indexOf('.') !== -1) {\r\n          parts = value.split('.');\r\n        }\r\n        if (parts.length === 2) {\r\n          let dayPart: string;\r\n          let monthPart: string;\r\n          if (longDateFormat.startsWith('D')) {\r\n            dayPart = parts[0];\r\n            monthPart = parts[1];\r\n          } else if (parts.length > 1) {\r\n            monthPart = parts[0];\r\n            dayPart = parts[1];\r\n          }\r\n          if (monthPart.length === 1) {\r\n            monthPart = 0 + monthPart;\r\n          }\r\n          if (dayPart.length === 1) {\r\n            dayPart = 0 + dayPart;\r\n          }\r\n          parsed = this.dayJs(dayPart + monthPart, 'DDMM', this.locale, true);\r\n          if (parsed.isValid()) {\r\n            return parsed;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (value.length === 2) {\r\n        // user might have typed 01, parse DD only\r\n        const format = 'DD';\r\n        parsed = this.dayJs(value, format, this.locale, true);\r\n        if (parsed.isValid()) {\r\n          return parsed;\r\n        }\r\n      }\r\n\r\n      if (value.length === 1) {\r\n        // user might have typed 1, parse D only\r\n        const format = 'D';\r\n        parsed = this.dayJs(value, format, this.locale, true);\r\n\r\n        if (parsed.isValid()) {\r\n          return parsed;\r\n        }\r\n      }\r\n\r\n      // not able to parse anything sensible, return something invalid so input can be corrected\r\n      return this.dayJs(null);\r\n    }\r\n\r\n    return l.r(value ? this.dayJs(value).locale(this.locale) : null);\r\n  }\r\n\r\n  override format(date: Dayjs, displayFormat: string): string {\r\n    const l = this.log.fn('format', { date, displayFormat });\r\n    if (!this.isValid(date))\r\n      throw Error('DayjsDateAdapter: Cannot format invalid date.');\r\n    return l.r(date.locale(this.locale).format(displayFormat));\r\n  }\r\n\r\n  override addCalendarYears(date: Dayjs, years: number): Dayjs {\r\n    return date.add(years, 'year');\r\n  }\r\n\r\n  override addCalendarMonths(date: Dayjs, months: number): Dayjs {\r\n    return date.add(months, 'month');\r\n  }\r\n\r\n  override addCalendarDays(date: Dayjs, days: number): Dayjs {\r\n    return date.add(days, 'day');\r\n  }\r\n\r\n  override toIso8601(date: Dayjs): string {\r\n    return date.toISOString();\r\n  }\r\n\r\n  /**\r\n   * Attempts to deserialize a value to a valid date object. This is different from parsing in that\r\n   * deserialize should only accept non-ambiguous, locale-independent formats (e.g. a ISO 8601\r\n   * string). The default implementation does not allow any deserialization, it simply checks that\r\n   * the given value is already a valid date object or null. The `<mat-datepicker>` will call this\r\n   * method on all of it's `@Input()` properties that accept dates. It is therefore possible to\r\n   * support passing values from your backend directly to these properties by overriding this method\r\n   * to also deserialize the format used by your backend.\r\n   * @param value The value to be deserialized into a date object.\r\n   * @returns The deserialized date object, either a valid date, null if the value can be\r\n   *     deserialized into a null date (e.g. the empty string), or an invalid date.\r\n   */\r\n  override deserialize(value: any): Dayjs | null {\r\n    let date;\r\n    if (value instanceof Date) {\r\n      date = this.dayJs(value);\r\n    } else if (this.isDateInstance(value)) {\r\n      // NOTE: assumes that cloning also sets the correct locale.\r\n      return this.clone(value);\r\n    }\r\n    if (typeof value === 'string') {\r\n      if (!value) {\r\n        return null;\r\n      }\r\n      date = (this.dayJs(value) as unknown as string);\r\n    }\r\n    if (date && this.isValid(date as Dayjs)) {\r\n      return this.dayJs(date);\r\n    }\r\n    return super.deserialize(value);\r\n  }\r\n\r\n  override isDateInstance(obj: any): boolean {\r\n    return dayjs.isDayjs(obj);\r\n  }\r\n\r\n  override isValid(date: Dayjs): boolean {\r\n    return this.clone(date).isValid();\r\n  }\r\n\r\n  override invalid(): Dayjs {\r\n    return this.dayJs(null);\r\n  }\r\n\r\n  /**\r\n   * @vanrossumict/material-dayjs-adapter didn't actually used this.shouldUseUtc function and no matter the chosen option\r\n   * no date used UTC\r\n   */\r\n  private dayJs(input?: string | number | Date | Dayjs | null | undefined, format?: string, locale?: string, isTyped?: boolean): Dayjs {\r\n    isTyped = isTyped || false;\r\n    if (!this.shouldUseUtc) {\r\n      return dayjs(input, format);\r\n    }\r\n    // when user writes date\r\n    if (typeof (input) === 'string') {\r\n      const date = new Date(dayjs(input, format).toDate());\r\n      // this is necessary because for typed dates time is set to midnight, not to the appropriate UTC time\r\n      if (isTyped) {\r\n        date.setUTCHours(date.getUTCHours() - date.getTimezoneOffset() / 60);\r\n      }\r\n      // this is necessary because for -(minus) timezones getDate returns date for previous day\r\n      if (date.getTimezoneOffset() > 0)\r\n        return dayjs(new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()))).add(1, 'day').utc();\r\n      return dayjs(new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()))).utc();\r\n    }\r\n    // when user picks date in date picker\r\n    return dayjs(input, format).utc();\r\n  }\r\n\r\n  private range<T>(length: number, valueFunction: (index: number) => T): T[] {\r\n    const valuesArray = Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n      valuesArray[i] = valueFunction(i);\r\n    }\r\n    return valuesArray;\r\n  }\r\n\r\n  private get shouldUseUtc(): boolean {\r\n    const { useUtc }: MatDayjsDateAdapterOptions = this._options || {};\r\n    return !!useUtc;\r\n  }\r\n}\r\n","import { MatDateFormats } from '@angular/material/core';\r\n\r\nconst DEFAULT_DATE_INPUT = 'l';\r\n\r\nexport const MAT_DAYJS_DATE_FORMATS: MatDateFormats = {\r\n  parse: {\r\n    dateInput: DEFAULT_DATE_INPUT,\r\n  },\r\n  display: {\r\n    dateInput: DEFAULT_DATE_INPUT,\r\n    monthYearLabel: 'MMM YYYY',\r\n    dateA11yLabel: 'LL',\r\n    monthYearA11yLabel: 'MMMM YYYY',\r\n  },\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { DateAdapter, MAT_DATE_LOCALE, MAT_DATE_FORMATS } from '@angular/material/core';\r\nimport { MatDayjsDateAdapter, MAT_DAYJS_DATE_ADAPTER_OPTIONS } from './mat-dayjs-date-adapter'\r\nimport { MAT_DAYJS_DATE_FORMATS } from './mat-dayjs-date-formats';\r\nimport { OWL_DATE_TIME_FORMATS } from '@danielmoncada/angular-datetime-picker';\r\nimport { OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS, OwlDayJsDateTimeAdapterOptions } from '@danielmoncada/angular-datetime-picker-dayjs-adapter';\r\n\r\nconst OWL_DAYJS_FORMATS = {\r\n  parseInput: 'l LT',\r\n  fullPickerInput: 'l LT',\r\n  datePickerInput: 'l',\r\n  timePickerInput: 'LT',\r\n  monthYearLabel: 'MMM YYYY',\r\n  dateA11yLabel: 'LL',\r\n  monthYearA11yLabel: 'MMMM YYYY',\r\n};\r\n\r\n@NgModule({\r\n  providers: [\r\n    { provide: MAT_DATE_FORMATS, useValue: MAT_DAYJS_DATE_FORMATS },\r\n    { provide: MAT_DAYJS_DATE_ADAPTER_OPTIONS, useValue: { useUtc: true } },\r\n    {\r\n      provide: OWL_DATE_TIME_FORMATS,\r\n      useValue: OWL_DAYJS_FORMATS\r\n    },\r\n    {\r\n      // note 2dm: Believe this is used by the Owl DateTimeAdapter<Dayjs> to determine how to handle dates\r\n      provide: OWL_DAYJS_DATE_TIME_ADAPTER_OPTIONS,\r\n      useValue: { useUtc: true } satisfies OwlDayJsDateTimeAdapterOptions,\r\n    },\r\n    {\r\n      provide: DateAdapter,\r\n      useClass: MatDayjsDateAdapter,\r\n      deps: [MAT_DATE_LOCALE, MAT_DAYJS_DATE_ADAPTER_OPTIONS]\r\n    }\r\n  ],\r\n})\r\nexport class MatDayjsModule { }\r\n","import { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { FieldSettings } from './../../../../../../../edit-types/src/FieldSettings';\r\n\r\nexport class DateTimeDefaultLogic extends FieldLogicBase {\r\n\r\n  constructor() { super({ DateTimeDefaultLogic }); }\r\n\r\n  update({ settings, tools }: FieldLogicUpdate<string[]>): FieldSettings {\r\n    const l = this.log.fn('update', { settings, tools });\r\n    const fixedSettings = settings;\r\n    return l.r(fixedSettings);\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(DateTimeDefaultLogic);\r\n","@if (!useTimePicker()) {\r\n  <!-- Date-Picker only - use the classic Angular-Material date picker -->\r\n  <mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n    <input\r\n      matInput\r\n      class=\"eav-translate-on-dblclick\"\r\n      [disabled]=\"ui().disabled\"\r\n      [matDatepicker]=\"picker\"\r\n      [placeholder]=\"basics().placeholder\"\r\n      [required]=\"basics().required\"\r\n      [value]=\"uiValue()\"\r\n      (dateChange)=\"updateValue($event)\"\r\n    />\r\n    <mat-datepicker-toggle matTextSuffix [for]=\"picker\" tippyTranslate=\"Fields.DateTime.Open\"> </mat-datepicker-toggle>\r\n    <mat-datepicker #picker></mat-datepicker>\r\n    <mat-label>{{ basics().label }}</mat-label>\r\n  </mat-form-field>\r\n} @else {\r\n  <!-- Date & Time Picker - use the OWL picker (not ideal, but looks similar)  -->\r\n  <mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n    <input\r\n      matInput\r\n      class=\"eav-translate-on-dblclick\"\r\n      [disabled]=\"ui().disabled\"\r\n      [owlDateTime]=\"owlPicker\"\r\n      [placeholder]=\"basics().placeholder\"\r\n      [required]=\"basics().required\"\r\n      [value]=\"valueForTimePicker()\"\r\n      (dateTimeChange)=\"updateValue($event)\"\r\n    />\r\n    <mat-datepicker-toggle matTextSuffix [owlDateTimeTrigger]=\"owlPicker\" tippyTranslate=\"Fields.DateTime.Open\"> </mat-datepicker-toggle>\r\n    <owl-date-time #owlPicker></owl-date-time>\r\n    <mat-label>{{ basics().label }}</mat-label>\r\n  </mat-form-field>\r\n}\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { Component, computed, inject } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDatepickerInputEvent, MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { DateTimeAdapter, OwlDateTimeModule } from '@danielmoncada/angular-datetime-picker';\r\nimport { OwlDayJsDateTimeModule } from '@danielmoncada/angular-datetime-picker-dayjs-adapter';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport dayjs, { Dayjs } from 'dayjs';\r\nimport utc from 'dayjs/plugin/utc'; // 'neutral' time for OwlDateTime picker\r\nimport { FieldSettingsDateTime } from 'projects/edit-types/src/FieldSettings-DateTime';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { SignalEquals } from '../../../../shared/signals/signal-equals';\r\nimport { MatDayjsDateAdapter, MatDayjsModule } from '../../../shared/date-adapters/date-adapter-api';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { DateTimeDefaultLogic } from './datetime-default-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.DateTimeDefault,\r\n    templateUrl: './datetime-default.component.html',\r\n    styleUrls: ['./datetime-default.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        MatDatepickerModule,\r\n        OwlDateTimeModule,\r\n        FieldHelperTextComponent,\r\n        OwlDayJsDateTimeModule,\r\n        MatDayjsModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class DatetimeDefaultComponent {\r\n\r\n  log = classLog({DatetimeDefaultComponent});\r\n\r\n  protected fieldState = inject(FieldState) as FieldState<string, FieldSettings & FieldSettingsDateTime>;\r\n\r\n  protected group = this.fieldState.group;\r\n\r\n  protected ui = this.fieldState.ui;\r\n  uiValue = this.fieldState.uiValue;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected useTimePicker = this.fieldState.settingExt('UseTimePicker');\r\n\r\n  /** The date/time picker needs the date-info cleaned up, so it doesn't do time-zone handling */\r\n  valueForTimePicker = computed(() => this.uiValue()?.replace('Z', ''), SignalEquals.string);\r\n\r\n  private matDayjsDateAdapter = transient(MatDayjsDateAdapter);\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private owlDayjsDateAdapter: DateTimeAdapter<Dayjs>,\r\n  ) {\r\n    dayjs.extend(utc); // 'neutral' time for OwlDateTime picker\r\n    const currentLang = this.translate.currentLang;\r\n    dayjs.locale(currentLang);\r\n    this.matDayjsDateAdapter.setLocale(currentLang);\r\n    this.owlDayjsDateAdapter.setLocale(currentLang);\r\n    DateTimeDefaultLogic.importMe();\r\n  }\r\n\r\n  updateValue(event: MatDatepickerInputEvent<Dayjs>) {\r\n    const newValue = event.value != null ? event.value.utc(true).toJSON() : null;\r\n    this.ui().setIfChanged(newValue);\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.EmptyDefault,\r\n  template: '',\r\n  styleUrls: [],\r\n})\r\nexport class EmptyDefaultComponent {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","@if (basics().visible) {\r\n  <div class=\"message-box\" [innerHtml]=\"basics().notes | safeHtml\"></div>\r\n}\r\n","import { Component, inject } from '@angular/core';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { SafeHtmlPipe } from '../../../../shared/pipes/safe-html.pipe';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EmptyMessage,\r\n    templateUrl: './empty-message.component.html',\r\n    styleUrls: ['./empty-message.component.scss'],\r\n    imports: [SafeHtmlPipe,]\r\n})\r\n// TODO: @2dm - remove empty FieldMetadata as not needed any more\r\n@FieldMetadata({ /* This is needed for the field to work */ })\r\nexport class EmptyMessageComponent {\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected basics = this.fieldState.basics;\r\n\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { FieldLogicManager } from '../../logic/field-logic-manager';\r\n\r\nexport class EntityContentBlocksLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.EntityContentBlocks;\r\n\r\n  constructor() { super({ EntityContentBlocksLogic }); }\r\n\r\n  update(specs: FieldLogicUpdate<string[]>): FieldSettings {\r\n    const entityDefaultLogic = FieldLogicManager.singleton().get(InputTypeCatalog.EntityDefault);\r\n    const fs = entityDefaultLogic.update(specs)  as FieldSettings & FieldSettingsPickerMerged;\r\n    fs.EnableRemove = true;\r\n    fs.AllowMultiValue = true;\r\n    fs.EnableAddExisting = false;\r\n    fs.EnableCreate = false;\r\n    fs.EnableEdit = false;\r\n    fs.Visible = false;\r\n\r\n    // Both the query type and create-type are the same\r\n    fs.EntityType = 'ContentGroupReference';\r\n    fs.CreateTypes = fs.EntityType;\r\n\r\n    return fs;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(EntityContentBlocksLogic);\r\n","\r\nexport class DataSourceHelpers {\r\n  /**\r\n   * remove HTML tags from a string, which possibly was created in a WYSIWYG\r\n   */\r\n  public stripHtml(stringWithHtml: string): string {\r\n    if (!stringWithHtml) return '';\r\n    if (!stringWithHtml.includes('<')) return stringWithHtml;\r\n    const div = document.createElement(\"div\");\r\n    div.innerHTML = stringWithHtml ?? '';\r\n    return div.innerText || '';\r\n  }\r\n}\r\n","import { EntityLight } from '../../../../../../../edit-types/src/EntityLight';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DataSourceHelpers } from './data-source-helpers';\r\nimport { DataSourceMasks } from './data-source-masks.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  data2PickerItem: false,\r\n  getMasks: false,\r\n  patchMasks: false,\r\n  parseMasks: false,\r\n  buildMasks: false,\r\n}\r\n\r\ntype MaskedPickerParts = Pick<PickerItem, 'label' | 'tooltip' | 'info' | 'link' | 'previewValue'>;\r\n\r\n/**\r\n * Helper class to process masks for a DataSource.\r\n * Masks are strings with placeholders, vs. just the name of the field to show.\r\n */\r\nexport class DataSourceMasksHelper {\r\n\r\n  log = classLog({ DataSourceMasksHelper }, logSpecs);\r\n\r\n  constructor(\r\n    private name: string,\r\n    private settings: DataSourceMaskSettings,\r\n    features: FeaturesService,\r\n    private formConfig: FormConfigService,\r\n    parentLog: { enableChildren: boolean }, enableLog?: boolean\r\n  ) {\r\n    this.log.forceEnable(enableLog ?? parentLog.enableChildren ?? false);\r\n    this.#featInfoEnabled = features.allowUse[FeatureNames.PickerUiMoreInfo]();\r\n    this.#isDeveloper = formConfig.config.dialogContext.User?.IsSystemAdmin;\r\n    this.log.a('constructor - settings', { settings, infoEnabled: this.#featInfoEnabled });\r\n  }\r\n\r\n  #featInfoEnabled = false;\r\n  #featInfoWarned = false;\r\n  #isDeveloper = false;\r\n\r\n  #helpers = new DataSourceHelpers();\r\n\r\n  #masks: DataSourceMasks;\r\n\r\n  /** Convert an Entity data to Picker-Item, processing any masks */\r\n  data2PickerItem({ entity, streamName, valueMustUseGuid, valueDefaultsToGuid = false }\r\n    : { entity: EntityLight; streamName: string | undefined; valueMustUseGuid: boolean; valueDefaultsToGuid?: boolean; }\r\n  ): PickerItem {\r\n\r\n    const l = this.log.fnIf('data2PickerItem', { entity, streamName, valueMustUseGuid });\r\n    // Check if we have masks, if yes\r\n    const masks = this.#getMasks();\r\n\r\n    // Figure out Value to use if we don't use masks - fallback is to use the Guid\r\n    const value = (() => {\r\n      if (valueMustUseGuid || (valueDefaultsToGuid && !masks.value))\r\n        return entity.Guid;\r\n      if (entity[masks.value] === undefined)\r\n        return entity.Value;\r\n      const maybe = entity[masks.value];\r\n      // the value could be an empty string (pickers); not sure if it can be null though\r\n      return maybe !== undefined ? `${maybe}` : entity.Guid;\r\n    })();\r\n\r\n    // Figure out Title Value if we don't use masks - fallback is to use the title, or the value with asterisk\r\n    const label = (() => {\r\n      const maybeTitle = entity[masks.label];\r\n      return maybeTitle ? `${maybeTitle}` : entity.Title ? `${entity.Title}` : `${value}`; // If there is no title, use value with '*'\r\n    })();\r\n\r\n    const previewValue = (() => {\r\n      const maybePreview = entity[masks.previewValue];\r\n      if (maybePreview) return maybePreview;\r\n      return value;\r\n    })();\r\n\r\n    l.a('debug values', { masks, value, label, previewValue, hasPlaceholders: masks.hasPlaceholders });\r\n\r\n    // If we don't have masks, we are done\r\n    if (!masks.hasPlaceholders) {\r\n      const result: PickerItem = {\r\n        id: entity.Id,\r\n        data: entity,\r\n        value,\r\n        previewValue,\r\n        label,\r\n        tooltip: masks.tooltip,\r\n        info: masks.info,\r\n        link: masks.link,\r\n        sourceStreamName: streamName ?? null,\r\n        rules: entity[\"Rules\"],\r\n      };\r\n      return l.r(result, 'no masks');\r\n    }\r\n\r\n    // Prepare the masks\r\n    const fromMasks = this.#parseMasks(masks, entity);\r\n\r\n    // If the original was not a mask, look up the field\r\n    const finalLabel = masks.label.includes('[') ? fromMasks.label : label;\r\n\r\n    return l.r({\r\n      id: entity.Id,\r\n      data: entity,\r\n      ...fromMasks,\r\n      value,\r\n      label: finalLabel,\r\n      sourceStreamName: streamName ?? null,\r\n      rules: entity[\"Rules\"],\r\n    } satisfies PickerItem, 'with masks');\r\n  }\r\n\r\n  /** Process all placeholders in all masks to get tooltip, info, link and title */\r\n  #parseMasks(masks: DataSourceMasks, data: Record<string, any>): MaskedPickerParts {\r\n    const l = this.log.fnIf('parseMasks', { masks, data });\r\n    let label = masks.label;\r\n\r\n    // If we have placeholders, but the feature is not enabled, warn about it\r\n    if (!this.#featInfoWarned && !this.#featInfoEnabled && `${masks.tooltip}${masks.info}${masks.link}`.length > 0) {\r\n      const msgAddOn = this.#isDeveloper\r\n        ? `It is enabled for developers, but will be disabled for normal users until it's licensed.`\r\n        : '';\r\n      this.#featInfoWarned = true;\r\n    }\r\n    const useInfos = this.#featInfoEnabled || this.#isDeveloper;\r\n    let tooltip = useInfos ? masks.tooltip : '';\r\n    let info = useInfos ? masks.info : '';\r\n    let link = useInfos ? masks.link : '';\r\n    let previewValue = masks.previewValue;\r\n\r\n    Object.keys(data).forEach(key => {\r\n      // must check for null and use '' instead\r\n      const valueItem = data[key] ?? '';\r\n\r\n      // replace all occurrences of [Item:Key] with value - should be case insensitive\r\n      const search = new RegExp(`\\\\[Item:${key}\\\\]`, 'gi');\r\n\r\n      if (previewValue.includes(\"App:Path\")) {\r\n        // var x = ScriptsLoaderService.resolveUrlTokens(previewValue, this.formConfig.config)\r\n        const portalRoot = (this.formConfig.config.portalRoot).replace(/\\/$/, '');\r\n        const appUrl = portalRoot + this.formConfig.config.appRoot;\r\n        previewValue = previewValue.replace(\"[App:Path]\", appUrl);\r\n      }\r\n\r\n      tooltip = tooltip.replace(search, valueItem);\r\n      info = info.replace(search, valueItem);\r\n      link = link.replace(search, valueItem);\r\n      label = label.replace(search, valueItem);\r\n      previewValue = previewValue.replace(search, valueItem);\r\n    });\r\n\r\n    return l.r({ label, tooltip, info, link, previewValue } satisfies MaskedPickerParts, 'result');\r\n  }\r\n\r\n  /** Get the mask - if possibly from current objects cache */\r\n  #getMasks() {\r\n    if (!!this.#masks) return this.#masks;\r\n    this.#masks = this.#buildMasks();\r\n    this.log.aIf('getMasks', { masks: this.#masks });\r\n    return this.#masks;\r\n  }\r\n\r\n  #buildMasks(): DataSourceMasks {\r\n    const settings = this.settings;\r\n    const l = this.log.fnIf('buildMasks', { settings });\r\n    // Figure out the masks\r\n    const tooltip = !!settings.ItemTooltip ? this.#helpers.stripHtml(settings.ItemTooltip) : '';\r\n    const info = !!settings.ItemInformation ? this.#helpers.stripHtml(settings.ItemInformation) : '';\r\n    const link = settings.ItemLink ?? '';\r\n    const label = settings.Label ?? '';\r\n    const value = settings.Value ?? '';\r\n    const previewValue = settings.PreviewValue ?? '';\r\n    const hasPlaceholders = (tooltip + info + link + label + previewValue).includes('[');\r\n    const result: DataSourceMasks = {\r\n      hasPlaceholders,\r\n      tooltip,\r\n      info,\r\n      link,\r\n      label,\r\n      value,\r\n      previewValue,\r\n    };\r\n\r\n    return l.r(result, 'result');\r\n  }\r\n\r\n}\r\n\r\ninterface DataSourceMaskSettings {\r\n  ItemTooltip: string;\r\n  ItemInformation: string;\r\n  ItemLink: string;\r\n  Label: string;\r\n  Value: string;\r\n  PreviewValue: string;\r\n}\r\n","import { FieldSettingsPicker, FieldSettingsPickerMasks } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { RxHelpers } from '../../../../shared/rxJs/rx.helpers';\r\n\r\n/**\r\n * Helper class for data source, to figure out all the fields we need to retrieve from the server.\r\n */\r\nexport class DataSourceMoreFieldsHelper {\r\n  log = classLog({DataSourceMoreFieldsHelper});\r\n\r\n  fieldListToRetrieveFromServer(settings: FieldSettingsWithPickerSource): string {\r\n    this.log.a('fieldListToRetrieveFromServer', { settings });\r\n\r\n    const treeConfig = (settings as FieldSettingsWithPickerSource & FieldSettingsPicker).PickerTreeConfiguration;\r\n    const maskSettings = settings as FieldSettingsWithPickerSource & FieldSettingsPickerMasks;\r\n    const moreFields = maskSettings.MoreFields?.split(',') ?? [];\r\n    const queryFields = [maskSettings.Value, maskSettings.Label];\r\n    const treeFields = [\r\n      treeConfig?.TreeChildIdField,\r\n      treeConfig?.TreeParentIdField,\r\n      treeConfig?.TreeChildParentRefField,\r\n      treeConfig?.TreeParentChildRefField,\r\n    ];\r\n    const combinedFields = [...['Title', 'Id', 'Guid'], ...moreFields, ...queryFields, ...treeFields]\r\n      // extraction should happen in every field\r\n      .map(field => this.extractFieldNamesFromTokens(field, true)).flat();\r\n\r\n    const stringFields = [settings.ItemTooltip, settings.ItemInformation, settings.ItemLink]\r\n      .map(field => this.extractFieldNamesFromTokens(field, false)).flat();\r\n\r\n    // in the end, we should deduplicate the fields\r\n    const allFields = [...combinedFields, ...stringFields]\r\n      .filter(RxHelpers.distinct);\r\n\r\n    // merging into one long string\r\n    return allFields.join(',');\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse a string to find out the field names in [Item:FieldName] format\r\n   *\r\n   * @param input input string\r\n   * @param enableSimpleFields enable simple fields\r\n   * @returns parsed fields\r\n   */\r\n  extractFieldNamesFromTokens(input: string, enableSimpleFields: boolean = true): string[] {\r\n    this.log.a('extractFieldNamesFromTokens', { input, enableSimpleFields });\r\n    const fields: string[] = [];\r\n\r\n    // 1.) skip processing on null or empty\r\n    if (!(input?.trim().length > 0)) return fields;\r\n\r\n    // 2.) some input parts could have a string such as \"[Item:Color] - [Item:Title]\"\r\n    // these should be extracted, so then we have \"Color\" and \"Title\"\r\n    const regex = /\\[Item:(\\S.*?)\\]/gi;\r\n    let match: RegExpExecArray | null;\r\n    while ((match = regex.exec(input)) !== null) {\r\n      const trimmedMatch = match[1].trim();\r\n      if (trimmedMatch) fields.push(trimmedMatch);\r\n    }\r\n\r\n    // 3.) optionaly, when input parts is simple field name, like \"Color\" - these should be used 1:1\r\n    // so nothing to do, just return input\r\n    if (enableSimpleFields && fields.length === 0) fields.push(input);\r\n\r\n    return fields;\r\n  }\r\n\r\n}\r\n","import { inject, Injectable, Signal } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMasks, FieldSettingsPickerMerged } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldValue } from '../../../../../../../edit-types/src/FieldValue';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { classLog, ClassLogger } from '../../../../shared/logging';\r\nimport { RxHelpers } from '../../../../shared/rxJs/rx.helpers';\r\nimport { ServiceBase } from '../../../../shared/services/service-base';\r\nimport { signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../../edit-debug';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { PickerItem } from '../../picker/models/picker-item.model';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { DataSourceHelpers } from './data-source-helpers';\r\nimport { DataSourceMasksHelper } from './data-source-masks-helper';\r\nimport { DataSourceMoreFieldsHelper } from './data-source-more-fields-helper';\r\n\r\nexport const logSpecsDataSourceBase = {\r\n  all: false,\r\n  constructor: false,\r\n  data: false,\r\n  triggerGetAll: false,\r\n  addToRefresh: false,\r\n  fields: [...DebugFields, 'Categories'],\r\n  newIconOptions: false,\r\n  fileLoadSettings: false,\r\n}\r\n\r\n@Injectable()\r\nexport abstract class DataSourceBase extends ServiceBase {\r\n\r\n  abstract log: ClassLogger<typeof logSpecsDataSourceBase>;\r\n\r\n  /** Field State with settings etc. */\r\n  protected fieldState = inject(FieldState) as FieldState<FieldValue, FieldSettingsWithPickerSource & FieldSettingsPickerMerged>;\r\n\r\n  /** For feature checks in the info/tooltip etc. of picker data */\r\n  protected features = inject(FeaturesService);\r\n\r\n  /** To get info if the current user is a developer */\r\n  protected formConfig = inject(FormConfigService);\r\n\r\n  protected fieldName = this.fieldState.name;\r\n\r\n  constructor() { super(); }\r\n\r\n  constructorEnd() {\r\n    this.log ??= classLog({DataSourceBase});\r\n    this.log.aIf('constructor', { forField: this.fieldState.name });\r\n  }\r\n\r\n  /** Signal containing the data */\r\n  public data: Signal<PickerItem[]>;\r\n\r\n  /** Signal with loading-status */\r\n  public loading = signalObj('loading', true);\r\n\r\n  /** Toggle to trigger a full refresh. */\r\n  protected getAll$ = new BehaviorSubject<boolean>(false);\r\n  protected getAll = signalObj('getAll', false);\r\n\r\n  /**\r\n   * Force refresh of the entities with these guids.\r\n   * Typically for entities which are added or updated.\r\n   * Once an entity has run through any modification, it's safer to refresh it.\r\n   * Since it's difficult to know which ones have been cached or not,\r\n   * for now we'll just keep on retrieving all on each backend access.\r\n   * In future we may enhance this, but we must be sure that previous retrievals are preserved.\r\n   */\r\n  protected guidsToRefresh = signalObj<string[]>('guidsToRefresh', []);\r\n\r\n  protected settings = this.fieldState.settings;\r\n\r\n  protected noItemsLoadingFalse: DataWithLoading<PickerItem[]> = { data: [], loading: false };\r\n  protected noItemsLoadingTrue: DataWithLoading<PickerItem[]> = { data: [], loading: true };\r\n\r\n  public setup(): this { return this; }\r\n\r\n  ngOnDestroy(): void {\r\n    this.getAll$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  protected fieldsHelper = new DataSourceMoreFieldsHelper();\r\n\r\n  protected helpers = new DataSourceHelpers();\r\n\r\n  triggerGetAll(): void {\r\n    this.log.fnIf('triggerGetAll');\r\n    this.getAll$.next(true);\r\n    this.getAll.set(true);\r\n  }\r\n\r\n  addToRefresh(additionalGuids: string[]): void {\r\n    const l = this.log.fnIf('addToRefresh', { additionalGuids });\r\n    const before = this.guidsToRefresh();\r\n    const merged = [...before, ...additionalGuids].filter(RxHelpers.distinct);\r\n    l.values({ before, additionalGuids, merged });\r\n    this.guidsToRefresh.set(merged);\r\n    l.end();\r\n  }\r\n\r\n  protected createMaskHelper(moreSettings?: Partial<FieldSettings & FieldSettingsPickerMasks>, enableLog?: boolean): DataSourceMasksHelper {\r\n    return new DataSourceMasksHelper(this.fieldName, {...this.settings(), ...moreSettings }, this.features, this.formConfig, this.log, enableLog);\r\n  }\r\n\r\n  protected fieldsToRetrieve(settings: FieldSettingsWithPickerSource): string {\r\n    return this.fieldsHelper.fieldListToRetrieveFromServer(settings);\r\n  }\r\n\r\n}\r\n","import { Injectable, WritableSignal } from '@angular/core';\r\nimport { toObservable, toSignal } from '@angular/core/rxjs-interop';\r\nimport { Observable, combineLatest, distinctUntilChanged, filter, map, switchMap } from \"rxjs\";\r\nimport { transient } from '../../../../../../../core';\r\nimport { ClassLogger } from '../../../../shared/logging';\r\nimport { RxHelpers } from '../../../../shared/rxJs/rx.helpers';\r\nimport { QueryService } from '../../../../shared/services/query.service';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DataSourceBase, logSpecsDataSourceBase } from './data-source-base';\r\n\r\nexport const logSpecsDataSourceEntityQueryBase: typeof logSpecsDataSourceBase & any = {\r\n  ...logSpecsDataSourceBase,\r\n  all: true,\r\n  initPrefetch: false,\r\n  getFromBackend: false,\r\n  addToRefresh: false,\r\n  loadMoreIntoSignal: true,\r\n  ['loadMoreIntoSignal-data']: true,\r\n}\r\n\r\n/**\r\n * This is the base class for data-sources providing data from\r\n * - entities\r\n * - queries\r\n */\r\n@Injectable()\r\nexport abstract class DataSourceEntityBase extends DataSourceBase {\r\n\r\n  //#region Inject and blank constructor\r\n\r\n  abstract log: ClassLogger<typeof logSpecsDataSourceEntityQueryBase>;\r\n\r\n  protected querySvc = transient(QueryService);\r\n\r\n  constructor() { super(); }\r\n\r\n  ngOnDestroy(): void {\r\n    this.getAll$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * The params are either query-url params or the type-name.\r\n   * Implemented as observable, since all requests depend on observables.\r\n   * If there is ever an httpSignal service or something, then this should be migrated.\r\n   */\r\n  #typeOrParams = signalObj<string>('typeOrParams', null);\r\n  #typeOrParams$ = toObservable(this.#typeOrParams);\r\n  #paramsDebounced$ = this.#typeOrParams$.pipe(distinctUntilChanged());\r\n\r\n  /** Get the data from a query - all or only the ones listed in the guids */\r\n  protected abstract getFromBackend(params: string, guids: string[], purposeForLog: string) : Observable<DataWithLoading<PickerItem[]>>;\r\n\r\n  /**\r\n   * Signal containing \"all\" the data from the backend when not filtered.\r\n   * It's triggered for retrieval when\r\n   * - the params change (in many cases just at start, but sometimes ongoing eg. view-data picker)\r\n   * @memberof DataSourceEntityQueryBase\r\n   */\r\n  #fullList = toSignal(combineLatest([\r\n    this.#paramsDebounced$,\r\n    this.getAll$.pipe(distinctUntilChanged(), filter(getAll => !!getAll), map(x => [])),\r\n  ]).pipe(\r\n    // SwitchMap ensures that only the latest request is processed\r\n    // This is important if parameters change, so that the old request is not used\r\n    // Otherwise it can lead to scenarios where the old result is used, if the first request takes longer.\r\n    switchMap(([typeName]) => this.getFromBackend(typeName, [], 'getAll')),\r\n  ), { initialValue: this.noItemsLoadingFalse });\r\n\r\n  #prefetchNew = signalObj<DataWithLoading<PickerItem[]>>('prefetchNow', this.noItemsLoadingFalse);\r\n\r\n  /** Additional items which were updated after sub-edits */\r\n  #modified = signalObj<DataWithLoading<PickerItem[]>>('modified', this.noItemsLoadingFalse);\r\n\r\n  public override data = computedObj('data', () => {\r\n    const prefetch = this.#prefetchNew().data;\r\n    const all = this.#fullList().data;\r\n    const modified = this.#modified().data;\r\n    const data = [...new Map([...prefetch, ...all, ...modified].map(item => [item.value, item])).values()];\r\n    this.log.a('data', { prefetch, all, overrides: modified, data });\r\n    return data;\r\n  });\r\n\r\n  /** Signal with loading-status */\r\n  public override loading = computedObj('loading', () => this.#fullList().loading || this.#modified().loading) as WritableSignal<boolean>;\r\n\r\n  initPrefetch(entityGuids: string[]): void {\r\n    const l = this.log.fnIfInList('initPrefetch', 'fields', this.fieldName, { entityGuids });\r\n    const guids = entityGuids.filter(RxHelpers.distinct);\r\n    this.#loadMoreIntoCache(this.#prefetchNew, guids, 'initPrefetch');\r\n    l.end();\r\n  }\r\n\r\n  /** Set parameters for retrieval - either contentTypeName or query url parameters */\r\n  setParams(params: string): void {\r\n    this.log.fnIfInList('setParams', 'fields', this.fieldName, { params });\r\n    this.#typeOrParams.set(params);\r\n  }\r\n\r\n\r\n  public override addToRefresh(additionalGuids: string[]): void {\r\n    const l = this.log.fnIf('addToRefresh', { additionalGuids });\r\n    this.#loadMoreIntoCache(this.#modified, additionalGuids, 'addToRefresh');\r\n    l.end();\r\n  }\r\n\r\n  /**\r\n   * Load some data and place it inside a target signal cache, adding to existing data.\r\n   */\r\n  #loadMoreIntoCache(target: WritableSignal<DataWithLoading<PickerItem[]>>, additionalGuids: string[], msgForLog: string): void {\r\n    const params = this.#typeOrParams();\r\n    const l = this.log.fnIfInList('loadMoreIntoSignal', 'fields', this.fieldName, { additionalGuids, params, msgForLog });\r\n    if (additionalGuids == null || additionalGuids.length === 0)\r\n      return l.end('no additional guids to load/refresh');\r\n\r\n    // get existing value and set loading to true\r\n    target.update(before => ({ data: before.data, loading: true }));\r\n\r\n    this.getFromBackend(params, additionalGuids, msgForLog)\r\n      .subscribe(additions => {\r\n        const l = this.log.fn('loadMoreIntoSignal-data', { additionalGuids, additions });\r\n        const before = target();\r\n        target.update(before => ({\r\n          data: [...new Map([...before.data, ...additions.data].map(item => [item.value, item])).values()],\r\n          loading: false\r\n        }));\r\n        l.values({ before, additions: additions, merged: target().data });\r\n      });\r\n    l.end();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map, Observable } from \"rxjs\";\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DataSourceEntityBase, logSpecsDataSourceEntityQueryBase } from './data-source-entity-base';\r\n\r\n@Injectable()\r\nexport class DataSourceAppAssets extends DataSourceEntityBase {\r\n\r\n  log = classLog({ DataSourceAppAssets }, logSpecsDataSourceEntityQueryBase);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n  }\r\n\r\n  /**\r\n  * Get the data from the Query System.AppAssets/Default\r\n  */\r\n  protected override getFromBackend(_typeName: string, _guids: string[], purposeForLog: string): Observable<DataWithLoading<PickerItem[]>> {\r\n    const settings = this.settings();\r\n    const { AssetsRootFolder: rootFolder, AssetsFileFilter: fileFilter, AssetsType: type } = settings;\r\n\r\n    const l = this.log.fnIf('getFromBackend', { settings }, purposeForLog);\r\n\r\n    const typeLower = (type ?? '').toLocaleLowerCase();\r\n    const stream = typeLower === 'all'\r\n      ? 'Default'\r\n        : typeLower === 'folders'\r\n          ? 'Folders'\r\n          : 'Files';\r\n\r\n    \r\n    const fieldMask = this.createMaskHelper({ Value: settings.Value || 'FullName'});\r\n\r\n    const data = this.querySvc.getFromQuery(`System.AppAssets/${stream}`, `rootFolder=${rootFolder}&filter=${fileFilter}`, '').pipe(\r\n      map(list => {\r\n        // const fieldMask = this.createMaskHelper({ Value: 'Name' });\r\n        const data = list[stream].map(entity => fieldMask.data2PickerItem({ entity, streamName: stream, valueMustUseGuid: false }));\r\n        return { data, loading: false } as DataWithLoading<PickerItem[]>;\r\n      })\r\n    );\r\n    return l.r(data);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog, ClassLogger } from '../../../../shared/logging';\r\nimport { DataSourceAppAssets } from '../data-sources/data-source-app-assets';\r\nimport { DataAdapterBase } from './data-adapter-base';\r\nimport { DataAdapterEntityBase, logSpecsDataAdapterEntityBase } from \"./data-adapter-entity-base\";\r\n\r\n/**\r\n * App Assets behave a lot like an entity-source,\r\n * since the internals are loaded from a query.\r\n */\r\n@Injectable()\r\nexport class DataAdapterAppAssets extends DataAdapterEntityBase {\r\n\r\n  log = classLog({DataAdapterAppAssets}, logSpecsDataAdapterEntityBase) as ClassLogger<typeof DataAdapterBase.logSpecs> & ClassLogger<typeof logSpecsDataAdapterEntityBase>;\r\n\r\n  protected dataSourceRaw = transient(DataSourceAppAssets);\r\n\r\n  constructor() { super(); }\r\n\r\n  fetchItems(): void {\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n}\r\n","import toString from './toString.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n    reHasRegExpChar = RegExp(reRegExpChar.source);\n\n/**\n * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n */\nfunction escapeRegExp(string) {\n  string = toString(string);\n  return (string && reHasRegExpChar.test(string))\n    ? string.replace(reRegExpChar, '\\\\$&')\n    : string;\n}\n\nexport default escapeRegExp;\n","import escapeRegExp from 'lodash-es/escapeRegExp';\r\nimport { EntityLight } from '../../../../../../../../edit-types/src/EntityLight';\r\nimport { classLog } from '../../../../../shared/logging/logging';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  findAllIconsInCss: false,\r\n};\r\n\r\n/** Calculates available css classes with className prefix. WARNING: Expensive operation */\r\nexport function findAllIconsInCss(cssSelector: string, showPrefix?: boolean): EntityLight[] {\r\n\r\n  const log = classLog({ findAllIconsInCss }, logSpecs);\r\n\r\n  const l = log.fnIf('findAllIconsInCss', { cssSelector, showPrefix });\r\n\r\n  if (!cssSelector)\r\n    return [];\r\n\r\n  const regEx = buildRegEx(cssSelector);\r\n  console.warn(regEx)\r\n\r\n  const allRules = getAllCssRules();\r\n  const foundList: IconOption[] = [];\r\n  const duplicateDetector: Record<string, boolean> = {};\r\n  for (const rules of allRules) {\r\n    const allRulesWithSelector = (Array.from(rules) as CSSStyleRule[])\r\n      .filter(rule => rule.selectorText);\r\n\r\n    for (const rule of allRulesWithSelector) {\r\n      // The full selector text, such as \".fa-x-ray:before\"\r\n      // Note that ATM we're still looking for icons, which is probably not the final solution\r\n      const selector = rule.selectorText;\r\n\r\n      // Reset the regex, otherwise it will only work every second time\r\n      // https://medium.com/codesnips/js-careful-when-reusing-regex-636b92c6bf07\r\n      regEx.lastIndex = 0;\r\n      const groups = regEx.exec(selector)?.groups;\r\n\r\n      // Skip if not found\r\n      if (!groups)\r\n        continue;\r\n      \r\n      console.log('regExed', groups.Value, groups.ValueRaw, groups.Title);\r\n\r\n      const iconClass = groups.ValueRaw;\r\n\r\n      if (duplicateDetector[iconClass]) continue;\r\n\r\n      foundList.push({\r\n        Id: null,\r\n        Guid: null,\r\n        Rule: rule,\r\n        ...groups as { Value: string, ValueRaw: string, Title: string },\r\n        Selector: selector,\r\n      });\r\n      duplicateDetector[iconClass] = true;\r\n    }\r\n  }\r\n\r\n  l.a('findAllIconsInCss', { classPrefix: cssSelector, showPrefix, foundList });\r\n\r\n  return l.r(foundList);\r\n}\r\n\r\nconst fallbackRegex = `(?<ValueRaw>\\\\.(?<Value>(?<Title>[\\\\-a-zA-Z0-9]+)))[:,\\{}]`;\r\nconst fontAwesomeRegex = `(?<ValueRaw>\\\\.(?<Value>fa-(?<Title>[\\\\-a-zA-Z0-9]+))):`;\r\n\r\nfunction buildRegEx(cssSelector: string): RegExp {\r\n  if (!cssSelector)\r\n    return new RegExp(fallbackRegex);\r\n\r\n  // If it contains a <, it's a regex with the names, so use that, but be sure to double-escape the backslashes\r\n  if (cssSelector.includes('<'))\r\n    return new RegExp(cssSelector, 'g');\r\n\r\n  // It's just a starts with, so create the default regex\r\n  const regEx = buildRegExFromPrefixAndSuffix(cssSelector, '[:\\{,]');\r\n\r\n  return new RegExp(regEx, 'g');\r\n}\r\n\r\nexport function buildRegExFromPrefixAndSuffix(prefix: string, suffix: string): string {\r\n  if (!prefix) return '';\r\n  const valueRaw = buildRegExFromPrefix(prefix);\r\n  const withEnding = `${valueRaw}${suffix}`;\r\n  return withEnding;\r\n}\r\n\r\nfunction buildRegExFromPrefix(prefix: string): string {\r\n  if (!prefix)\r\n    return '';\r\n\r\n  // Capturing group called \"Title\" containing the main part of the capture\r\n  const titlePart = '(?<Title>[\\\\-a-zA-Z0-9]+)';\r\n  // Check if it has a dot, which we don't want in the Value, but we want in the ValueRaw\r\n  const startedWithDot = prefix.startsWith('.');\r\n  const cssSelectorPart = startedWithDot ? prefix.substring(1) : prefix;\r\n\r\n  // Capturing group with name Value\r\n  const valuePart = `(?<Value>${escapeRegExp(cssSelectorPart)}${titlePart})`;\r\n\r\n  // If it started with a dot, we want to capture the dot as well\r\n  const valueWithPrefix = startedWithDot ? `${escapeRegExp('.')}${valuePart}` : valuePart;\r\n  // Capturing group with name ValueRaw\r\n  const valueRaw = `(?<ValueRaw>${valueWithPrefix})`;\r\n  return valueRaw;\r\n}\r\n\r\n\r\nfunction getAllCssRules(): CSSRuleList[] {\r\n  const allRules: CSSRuleList[] = Array.from(document.styleSheets)\r\n    .map(getCssRules)\r\n    .filter(Boolean);\r\n  return allRules;\r\n}\r\n\r\nfunction getCssRules(sheet: CSSStyleSheet): CSSRuleList {\r\n  if (!sheet) return null;\r\n  \r\n  // Try old browser API (officially deprecated)\r\n  try {\r\n    return sheet.rules;\r\n  } catch (error) { /* errors happens if browser denies access to css rules */ }\r\n\r\n  // Try newer browser API\r\n  try {\r\n    return sheet.cssRules;\r\n  } catch (error) { /* errors happens if browser denies access to css rules */ }\r\n\r\n  return null;\r\n}\r\n\r\n\r\nexport interface IconOption extends EntityLight {\r\n  Rule: CSSRule;\r\n  /** The Class - which is the main value we're picking */\r\n  Value: string;\r\n  /** Label for showing in the dropdown */\r\n  Title: string;\r\n\r\n  /** Optional: Icon class for new Picker */\r\n  ValueRaw?: string;\r\n  Selector?: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityLight } from 'projects/edit-types/src/EntityLight';\r\nimport { getWith } from '../../../../../../../core/object-utilities';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { ScriptsLoaderService } from '../../../shared/services/scripts-loader.service';\r\nimport { findAllIconsInCss } from './css/string-font-icon-picker.helpers';\r\nimport { DataSourceBase, logSpecsDataSourceBase } from './data-source-base';\r\nimport { DataSourceMasksHelper } from './data-source-masks-helper';\r\n\r\nconst logSpecs = {\r\n  ...logSpecsDataSourceBase,\r\n  data: false,\r\n  newIconOptions: true,\r\n  fileLoadSettings: false,\r\n  fields: [...logSpecsDataSourceBase.fields, '*'],\r\n};\r\n\r\n@Injectable()\r\nexport class DataSourceCss extends DataSourceBase {\r\n\r\n  log = classLog({ DataSourceCss }, logSpecs);\r\n\r\n  constructor(private scriptsLoaderService: ScriptsLoaderService) {\r\n    super();\r\n    this.constructorEnd();\r\n    this.log.fnIf('fileLoadSettings', this.fileLoadSettings());\r\n\r\n    const settings = this.fileLoadSettings();\r\n    this.scriptsLoaderService.load(settings.CssSourceFile.split('\\n'), () => {\r\n      const newIconOptions = findAllIconsInCss(settings.CssSelectorFilter, false);\r\n      this.log.fnIf('newIconOptions', { settings, newIconOptions });\r\n      this.#iconEntities.set(newIconOptions);\r\n    });\r\n\r\n  }\r\n\r\n  loading = signalObj('loading', false);\r\n\r\n  #settings = this.fieldState.settings;\r\n  #iconEntities = signalObj<EntityLight[]>('iconOptions', []);\r\n\r\n  fileLoadSettings = computedObj('fileLoadSettings', () => getWith(this.#settings(), s => ({\r\n    CssSourceFile: s.CssSourceFile,\r\n    CssSelectorFilter: s.CssSelectorFilter,\r\n    PreviewValue: s.PreviewValue,\r\n    Value: s.Value,\r\n  })));\r\n\r\n\r\n\r\n  #dataMaskHelper = (() => {\r\n    // Make sure the converter/builder uses the \"Value\" field for the final 'value'\r\n    const s = this.settings();\r\n    const maskHelper = new DataSourceMasksHelper(this.fieldName, { ...s, Label: s.Label || 'Value' }, this.features, this.formConfig, this.log);\r\n    return maskHelper;\r\n  })();\r\n\r\n  data = computedObj('data', () => {\r\n\r\n    const options = this.#iconEntities();\r\n    const maskHelper = this.#dataMaskHelper;\r\n\r\n    const l = this.log.fnIfInList('data', 'fields', this.fieldName, { options, maskHelper });\r\n\r\n    const result = options.map(entity => {\r\n      const pickerItem = maskHelper.data2PickerItem({ entity, streamName: null, valueMustUseGuid: false });\r\n      l.a('one item', { entity, pickerItem });\r\n      return pickerItem;\r\n    });\r\n    return l.r(result);\r\n  })\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataSourceCss } from \"../data-sources/data-source-css\";\r\nimport { DeleteEntityProps } from \"../models/picker.models\";\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { DataAdapterBase } from \"./data-adapter-base\";\r\n\r\n@Injectable()\r\nexport class DataAdapterCss extends DataAdapterBase {\r\n\r\n  log = classLog({ DataAdapterCss }, DataAdapterBase.logSpecs);\r\n\r\n  protected dataSourceRaw = transient(DataSourceCss);\r\n\r\n  constructor() {\r\n    super();\r\n    this.log.fnIf('constructor');\r\n  }\r\n\r\n  public myFeatures = signalObj('features', { edit: false, create: false, delete: false, } satisfies Partial<PickerFeatures>);\r\n\r\n  fetchItems(): void {\r\n    this.log.fnIf('fetchItems');\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n\r\n  deleteItem(props: DeleteEntityProps): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n\r\n  editItem(editParams: { entityGuid: string; entityId: number; }, entityType: string): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n}\r\n","import { DataSourceBase } from './data-source-base';\r\nimport { Injectable } from '@angular/core';\r\nimport { signalObj, computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { classLog } from '../../../../shared/logging';\r\n\r\n/**\r\n * This is the data-source we plan to attach when a picker is not configured.\r\n * It should only show the information that it's not configured.\r\n */\r\n@Injectable()\r\nexport class DataSourceEmpty extends DataSourceBase {\r\n\r\n  log = classLog({DataSourceEmpty});\r\n\r\n  constructor() { super(); this.constructorEnd() }\r\n  \r\n  loading = signalObj('loading', false);\r\n\r\n  #label = signalObj('label', `something is wrong - using DataSourceEmpty`);\r\n\r\n  public preSetup(label: string): this {\r\n    this.#label.set(label);\r\n    return this;\r\n  }\r\n\r\n  public override data = computedObj('data', () => [{\r\n    value: '',\r\n    label: this.#label() ?? 'No options available',\r\n    notSelectable: true,\r\n    isMessage: true,\r\n  }]);\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataSourceEmpty } from '../data-sources/data-source-empty';\r\nimport { DeleteEntityProps } from \"../models/picker.models\";\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { DataAdapterBase } from \"./data-adapter-base\";\r\nimport { StateAdapter } from './state-adapter';\r\n\r\n@Injectable()\r\nexport class DataAdapterEmpty extends DataAdapterBase {\r\n\r\n  log = classLog({DataAdapterEmpty}, DataAdapterBase.logSpecs);\r\n\r\n  protected dataSourceRaw = transient(DataSourceEmpty);\r\n\r\n  constructor() { super();}\r\n\r\n  public myFeatures = signalObj('features', { edit: false, create: false, delete: false, } satisfies Partial<PickerFeatures>);\r\n\r\n  public override connectState(state: StateAdapter): this {\r\n    this.dataSourceRaw.preSetup(\"Error: configuration missing\");\r\n    return super.connectState(state);\r\n  }\r\n\r\n  public setupEmpty(): this {\r\n    const l = this.log.fnIf('setupEmpty');\r\n    this.dataSource.set(this.dataSourceRaw.preSetup(\"Error: configuration missing\"));\r\n    return l.rSilent(this);\r\n  }\r\n\r\n  fetchItems(): void {\r\n    this.log.a('fetchItems');\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n\r\n  deleteItem(props: DeleteEntityProps): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n\r\n  editItem(editParams: { entityGuid: string; entityId: number; }, entityType: string): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map, Observable } from \"rxjs\";\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { DataSourceEntityBase, logSpecsDataSourceEntityQueryBase } from './data-source-entity-base';\r\n\r\n@Injectable()\r\nexport class DataSourceEntity extends DataSourceEntityBase {\r\n\r\n  log = classLog({ DataSourceEntity }, logSpecsDataSourceEntityQueryBase);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n  }\r\n\r\n  /**\r\n   * Get the data from the backend using the built-in get-Entities query\r\n   */\r\n  protected override getFromBackend(typeName: string, guids: string[], purposeForLog: string): Observable<DataWithLoading<PickerItem[]>> {\r\n    const fields = this.fieldsToRetrieve(this.settings());\r\n\r\n    // Behavior changes a bit if the query is meant to supply data for string-inputs\r\n    // ...mainly because the value is allowed to be any field, not just the Guid.\r\n    const inputSpecs = this.fieldState.config.inputTypeSpecs;\r\n    const valueMustUseGuid = inputSpecs.mustUseGuid;\r\n\r\n    var l = this.log.fnIf('getFromBackend', { typeName, guids, fields, inputType: inputSpecs.inputType, valueMustUseGuid }, purposeForLog);\r\n    const fieldMask = this.createMaskHelper();\r\n    const entities = this.querySvc.getEntities({ contentTypes: [typeName], itemIds: guids, fields, log: this.log.name })\r\n      .pipe(\r\n        // tap(list => l.a('getEntities', { typeName, list })),\r\n        map(list => {\r\n          const data = list.Default.map(entity => fieldMask.data2PickerItem({ entity, streamName: null, valueMustUseGuid, valueDefaultsToGuid: true }));\r\n          return { data, loading: false } as DataWithLoading<PickerItem[]>;\r\n        }),\r\n      )\r\n    return l.r(entities);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog, ClassLogger } from '../../../../shared/logging';\r\nimport { DataSourceEntity } from \"../data-sources/data-source-entity\";\r\nimport { DataAdapterBase } from './data-adapter-base';\r\nimport { DataAdapterEntityBase, logSpecsDataAdapterEntityBase } from \"./data-adapter-entity-base\";\r\n\r\n@Injectable()\r\nexport class DataAdapterEntity extends DataAdapterEntityBase {\r\n\r\n  log = classLog({DataAdapterEntity}, logSpecsDataAdapterEntityBase) as ClassLogger<typeof DataAdapterBase.logSpecs> & ClassLogger<typeof logSpecsDataAdapterEntityBase>;\r\n\r\n  protected dataSourceRaw = transient(DataSourceEntity);\r\n\r\n  constructor() { super(); }\r\n\r\n  override syncParams(): void {\r\n    this.dataSourceRaw.setParams(this.contentType());\r\n  }\r\n\r\n  fetchItems(): void {\r\n    this.syncParams();\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n}\r\n","import { Injectable, inject } from '@angular/core';\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { Observable, map, of } from \"rxjs\";\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { QueryStreams } from '../../../../shared/models/query-stream.model';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { DataWithLoading } from '../models/data-with-loading';\r\nimport { PickerItem, PickerItemFactory } from '../models/picker-item.model';\r\nimport { DataSourceEntityBase, logSpecsDataSourceEntityQueryBase } from './data-source-entity-base';\r\n\r\n// TODO: NEXT STEPS\r\n// 5. afterwards check all edge cases.\r\n// - EG. not aggressively loading\r\n// - eg changes to data (edits)\r\n// - deletes - NOT QUITE WORKING ATM\r\n// - I believe some kind of clean-up is still necessary...?\r\n\r\n@Injectable()\r\nexport class DataSourceQuery extends DataSourceEntityBase {\r\n\r\n  log = classLog({DataSourceQuery}, logSpecsDataSourceEntityQueryBase);\r\n\r\n  #translate = inject(TranslateService);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n  }\r\n\r\n  protected formState = inject(FormConfigService);\r\n  #appId = Number(this.formState.config.appId);\r\n  #streamName = computedObj('streamName', () => this.settings().StreamName);\r\n\r\n  /**\r\n   * Get the data from a query - all or only the ones listed in the guids\r\n   */\r\n  protected override getFromBackend(params: string, guids: string[], purposeForLog: string): Observable<DataWithLoading<PickerItem[]>> {\r\n    var l = this.log.fnIfInList('getFromBackend', 'fields', this.fieldName, { params, guids }, purposeForLog);\r\n    // If the configuration isn't complete, the query can be empty\r\n    const sets = this.settings();\r\n    const streamName = this.#streamName();\r\n    const queryName = sets.Query;\r\n    const queryUrl = !!queryName\r\n      ? queryName.includes('/') ? sets.Query : `${sets.Query}/${streamName}`\r\n      : null;\r\n\r\n    l.a('queryUrl', { queryName, streamName, queryUrl })\r\n\r\n    // If no query, return a dummy item with a message\r\n    const source: Observable<DataWithLoading<QueryStreams>> = (() => {\r\n      // If we don't have a query, return a dummy item\r\n      if (!queryUrl) {\r\n        l.a('noQueryUrl - will create dummy item');\r\n        return of<DataWithLoading<QueryStreams>>({\r\n          data: {\r\n            'Default': [\r\n              {\r\n                Id: -1,\r\n                Guid: null,\r\n                Title: this.#translate.instant('Fields.Picker.QueryNotConfigured'),\r\n              },\r\n            ],\r\n          },\r\n          loading: false,\r\n        });\r\n      }\r\n\r\n      // We have query (default case), get the data\r\n      l.a('queryUrl for request', { queryUrl });\r\n      return this.querySvc\r\n        .getFromQuery(queryUrl, params, this.fieldsToRetrieve(this.settings()), guids)\r\n        .pipe(\r\n          map(data => ({ data, loading: false } as DataWithLoading<QueryStreams>)),\r\n        );\r\n    })();\r\n\r\n    const result = source.pipe(\r\n      map(set => ({\r\n        data: this.#transformData(set.data, streamName),\r\n        loading: set.loading,\r\n      } as DataWithLoading<PickerItem[]>)),\r\n    );\r\n    return l.r(result);\r\n  }\r\n\r\n\r\n  #transformData(data: QueryStreams, streamName: string | null): PickerItem[] {\r\n    \r\n    const l = this.log.fn('transformData', { data, streamName });\r\n    if (!data)\r\n      return l.r([PickerItemFactory.message(this.#translate, 'Fields.Picker.QueryErrorNoData')], 'data is null');\r\n    \r\n    // Behavior changes a bit if the query is meant to supply data for string-inputs\r\n    // ...mainly because the value is allowed to be any field, not just the Guid.\r\n    const inputSpecs = this.fieldState.config.inputTypeSpecs;\r\n    const valueMustUseGuid = inputSpecs.mustUseGuid;\r\n    const streamNames = streamName.split(',');\r\n    l.values({ inputType: inputSpecs.inputType, valueMustUseGuid, streamNames });\r\n\r\n    // If expected streams are missing, create placeholders\r\n    const errors = streamNames\r\n      .filter(streamName => !data[streamName])\r\n      .map(streamName => PickerItemFactory.placeholder(this.#translate, 'Fields.Picker.QueryStreamNotFound', ' ' + streamName));\r\n\r\n    // Create the items\r\n    const maskHelper = this.createMaskHelper();\r\n    const items = streamNames\r\n      .filter(streamName => data[streamName])\r\n      .reduce((acc, streamName) => {\r\n        const converted = data[streamName]\r\n          .map(entity => maskHelper.data2PickerItem({ entity, streamName, valueMustUseGuid, valueDefaultsToGuid: true }));\r\n        return acc.concat(converted);\r\n      }, []);\r\n\r\n    // Set read-only flags on items from other apps\r\n    const itemsMaybeReadOnly = this.#setDisableEdit(items);\r\n\r\n    // Merge errors and items\r\n    return l.r([...errors, ...itemsMaybeReadOnly]);\r\n  }\r\n\r\n  #setDisableEdit<T extends PickerItem>(queryEntities: T[]): T[] {\r\n    if (queryEntities)\r\n      queryEntities.forEach(e => {\r\n        const appId = e.data?.AppId;\r\n        e.noEdit = appId != null && appId !== this.#appId;\r\n        e.noDelete = e.noEdit;\r\n      });\r\n    return queryEntities;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog, ClassLogger } from '../../../../shared/logging';\r\nimport { FieldMask } from '../../../shared/helpers/field-mask.helper';\r\nimport { DataSourceQuery } from \"../data-sources/data-source-query\";\r\nimport { PickerItemFactory } from '../models/picker-item.model';\r\nimport { DataAdapterBase } from './data-adapter-base';\r\nimport { DataAdapterEntityBase, logSpecsDataAdapterEntityBase } from \"./data-adapter-entity-base\";\r\n\r\n@Injectable()\r\nexport class DataAdapterQuery extends DataAdapterEntityBase {\r\n\r\n  log = classLog({DataAdapterQuery}, logSpecsDataAdapterEntityBase) as ClassLogger<typeof DataAdapterBase.logSpecs> & ClassLogger<typeof logSpecsDataAdapterEntityBase>;\r\n\r\n  protected dataSourceRaw = transient(DataSourceQuery);\r\n\r\n  constructor() { super(); }\r\n\r\n  /**\r\n   * Url Parameters - often mask - from settings\r\n   * This is a text or mask containing all query parameters.\r\n   * Since it's a mask, it can also contain values from the current item\r\n   */\r\n  #paramsMaskLazy = transient(FieldMask).initSignal(this.log.name, this.fieldState.settingExt('UrlParameters'));\r\n\r\n  override syncParams(): void {\r\n    this.dataSourceRaw.setParams(this.#paramsMaskLazy?.result());\r\n  }\r\n\r\n  fetchItems(): void {\r\n    const l = this.log.fnIfInList('fetchItems', 'fields', this.name);\r\n    this.syncParams();\r\n    // note: it's kind of hard to produce this error, because the config won't save without a query\r\n    if (!this.fieldState.settings().Query) {\r\n      const errors = [PickerItemFactory.placeholder(this.translate, 'Fields.Picker.QueryNotDefined')];\r\n      this.errorOptions.set(errors);\r\n      return;\r\n    }\r\n    this.dataSourceRaw.triggerGetAll();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityLight } from '../../../../../../../edit-types/src/EntityLight';\r\nimport { classLogEnabled } from '../../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataSourceBase, logSpecsDataSourceBase } from './data-source-base';\r\n\r\nconst logSpecs = {\r\n  ...logSpecsDataSourceBase,\r\n  data: true,\r\n};\r\n\r\n@Injectable()\r\nexport class DataSourceString extends DataSourceBase {\r\n\r\n  log = classLogEnabled({DataSourceString}, logSpecs);\r\n  \r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n  }\r\n\r\n  loading = signalObj('loading', false);\r\n\r\n  /**\r\n   * The Data Mask Helper to create Picker Items from the source data\r\n   * Make sure the converter/builder uses the \"Value\" field\r\n   * as all the dropdown sources (CSV, etc.) use that field.\r\n   */\r\n  #dataMaskHelper = (() => this.createMaskHelper({ Value: 'Value' }))();\r\n\r\n  data = computedObj('data', () => {\r\n    const options = this.settings()._options;\r\n    const maskHelper = this.#dataMaskHelper;\r\n    const l = this.log.fnIfInList('data', 'fields', this.fieldName, { options, maskHelper });\r\n    const result = options.map(option => {\r\n      const entity: EntityLight = {\r\n        Id: null,\r\n        Guid: null,\r\n        ...option,  // Must contain at least Title / Value\r\n      };\r\n      const pickerItem = maskHelper.data2PickerItem({ entity, streamName: null, valueMustUseGuid: false });\r\n      l.a('one item', { entity, pickerItem });\r\n      return pickerItem;\r\n    });\r\n    return l.r(result);\r\n  })\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DataSourceString } from \"../data-sources/data-source-string\";\r\nimport { DeleteEntityProps } from \"../models/picker.models\";\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { DataAdapterBase } from \"./data-adapter-base\";\r\n\r\n@Injectable()\r\nexport class DataAdapterString extends DataAdapterBase {\r\n\r\n  log = classLog({DataAdapterString}, DataAdapterBase.logSpecs);\r\n\r\n  protected dataSourceRaw = transient(DataSourceString);\r\n\r\n  constructor() { super();}\r\n\r\n  public myFeatures = signalObj('features', { edit: false, create: false, delete: false, } satisfies Partial<PickerFeatures>);\r\n\r\n  fetchItems(): void {\r\n    this.log.fnIf('fetchItems');\r\n    this.dataSource().triggerGetAll();\r\n  }\r\n\r\n  deleteItem(props: DeleteEntityProps): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n\r\n  editItem(editParams: { entityGuid: string; entityId: number; }, entityType: string): void {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n}\r\n","import { moveItemInArray } from '@angular/cdk/drag-drop';\r\nimport { Injectable, Signal, inject } from '@angular/core';\r\nimport { getWith } from '../../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsOptionsWip, FieldSettingsPickerMerged } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../../edit-debug';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { DeleteEntityProps } from '../models/picker.models';\r\nimport { PickerFeatures } from '../picker-features.model';\r\nimport { ReorderIndexes } from '../picker-list/reorder-index.models';\r\nimport { StateUiMapperBase } from './state-ui-mapper-base';\r\n\r\nexport const logSpecsStateAdapter = {\r\n  all: false,\r\n  updateValue: false,\r\n  add: false,\r\n  set: false,\r\n  remove: false,\r\n  reorder: false,\r\n  doAfterDelete: false,\r\n  selectedItems: false,\r\n  sepAndOpts: false,\r\n  createEntityTypes: false,\r\n  attachCallback: false,\r\n  typesForNew: false,\r\n  correctStringEmptyValue: true,\r\n  fields: [...DebugFields, 'Query'],\r\n};\r\n\r\n@Injectable()\r\nexport class StateAdapter {\r\n\r\n  //#region Setup / Inject / Logs\r\n\r\n  log = classLog({StateAdapter}, logSpecsStateAdapter);\r\n\r\n  #formConfigSvc = inject(FormConfigService);\r\n  #fieldState = inject(FieldState) as FieldState<number | string | string[], FieldSettings & FieldSettingsOptionsWip & FieldSettingsPickerMerged>;\r\n\r\n  constructor() { }\r\n\r\n  public setup(fieldName: string, uiMapper: StateUiMapperBase): this {\r\n    this.#fieldName = fieldName;\r\n    this.mapper = uiMapper as StateUiMapperBase<number | string | string[], string[]>;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Mapper to convert between the state and the UI - must be configured in setup.\r\n   * On the UI side, must always be an array of strings.\r\n   */\r\n  public mapper: StateUiMapperBase<number | string | string[], string[]>;\r\n\r\n  /** Field Name - just for selective debugging */\r\n  #fieldName: string;\r\n\r\n  //#endregion\r\n\r\n  protected readonly settings = this.#fieldState.settings;\r\n\r\n  /** The features this source will broadcast, to be merged with other features */\r\n  public myFeatures = signalObj('features', {} as Partial<PickerFeatures>);\r\n\r\n  /** The final valid features, must be provided by the picker-data */\r\n  public features: Signal<PickerFeatures>;\r\n\r\n\r\n  #createTypesRaw = computedObj('createTypesRaw',\r\n    () => getWith(this.settings().CreateTypes,\r\n      ts => ts.split(ts.indexOf('\\n') > -1 ? '\\n' : ',')).filter(Boolean));\r\n\r\n  /**  List of entity types to create for the (+) button; ATM exclusively used in the new pickers for selecting the source. */\r\n  public typesForNew = computedObj('typesForNew', () => {\r\n    const raw = this.#createTypesRaw().map((guid: string) => ({ label: null, guid }));\r\n    \r\n    const l = this.log.fnIfInList('typesForNew', 'fields', this.#fieldName, { raw });\r\n\r\n    // return [];\r\n    // Augment with additional label and guid if we have this\r\n    const updated = raw.map(orig => {\r\n      const guid = orig.guid;\r\n      const ct = this.#formConfigSvc.settings.ContentTypes\r\n        .find(ct => ct.Id === guid || ct.Name == guid);\r\n      return {\r\n        ...orig,\r\n        // replace is a bit temporary, as the names are a bit long...\r\n        label: (ct?.Title ?? ct?.Name ?? `${guid} (not found)`).replace('UI Picker Source - ', ''),\r\n        guid: ct?.Id ?? guid,\r\n      }\r\n    });\r\n    return l.r(updated);\r\n  });\r\n\r\n  /**\r\n   * Lazy Signal telling us if empty values are allowed\r\n   * Should ONLY be used in 'selectedItems' - and never in Values, as we would create a loop\r\n   * since the this will also access the possible options, which in turn is initialized using the selectedItems\r\n   */\r\n  public allowsEmptyLazy = signalObj<Signal<boolean>>('allowsEmptyLazy', signalObj('initial', false));\r\n\r\n  /**\r\n   * Signal with all the currently selected items.\r\n   * The PickerItems are fairly basic, as any additional data is added later on.\r\n   * The only case the additional data matters,\r\n   * is when we have a string-picker with a free-text value that is not in the dropdown.\r\n   * In that case, additional data from here is used to disable edit and delete.\r\n   */\r\n  public selectedItems: Signal<string[]> = computedObj('selectedItems', () => {\r\n    const uiValue = this.#fieldState.uiValue();\r\n    this.log.fnIf('selectedItems', { uiValue });\r\n    const asUi = this.mapper.toUi(uiValue);\r\n    const pickerAllowsEmpty = this.allowsEmptyLazy()();\r\n    const uiFixed = asUi.length == 0 && pickerAllowsEmpty\r\n      ? ['']\r\n      : asUi;\r\n    return uiFixed;\r\n  });\r\n\r\n  //#region Callbacks for setting the focus, like after removing the last selection\r\n\r\n  #focusOnSearchComponent: () => void;\r\n\r\n  public attachCallback(focusCallback: () => void): this {\r\n    const l = this.log.fnIf('attachCallback');\r\n    this.#focusOnSearchComponent = focusCallback;\r\n    return l.rSilent(this);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Conversion back and forth between formats\r\n\r\n  /** Signal with the current values in the picker, as an array */\r\n  public values = computedObj('values', () => {\r\n    const asUi = this.mapper.toUi(this.#fieldState.uiValue());\r\n    return asUi;\r\n  });\r\n\r\n  //#endregion\r\n\r\n  //#region CRUD operations\r\n\r\n  #updateValue(operation: (original: string[]) => string[]): void {\r\n    const l = this.log.fnIfInList('updateValue', 'fields', this.#fieldName);\r\n    // Get original data, and make sure we have a copy, so that ongoing changes won't affect the original\r\n    // If we don't do this, then later change detection can fail!\r\n    const valueArray = [...this.values()];\r\n    const modified = operation(valueArray);\r\n    const newValue = this.mapper.toState(modified);\r\n    this.#fieldState.ui().setIfChanged(newValue);\r\n    l.end('', { newValue });\r\n  }\r\n\r\n  public add(value: string): void {\r\n    this.log.fnIfInList('add', 'fields', this.#fieldName, { value });\r\n    this.#updateValue(list => (this.features().multiValue) ? [...list, value] : [value]);\r\n  }\r\n\r\n  public set(values: string[]): void {\r\n    this.log.fnIf('set', { values });\r\n    this.#updateValue(() => values);\r\n  }\r\n\r\n  public flush(): void {\r\n    this.set([]);\r\n  }\r\n\r\n  public reorder(reorderIndexes: ReorderIndexes) {\r\n    this.log.fnIf('reorder', { reorderIndexes });\r\n    this.#updateValue(list => {\r\n      moveItemInArray(list, reorderIndexes.previousIndex, reorderIndexes.currentIndex);\r\n      return [...list];\r\n    });\r\n  }\r\n\r\n  public remove(index: number) {\r\n    this.log.fnIf('remove', { index });\r\n    this.#updateValue(list => {\r\n      list.splice(index, 1);\r\n      return [...list];\r\n    });\r\n\r\n    // If we have no items left, set focus back to the search component, since this is usually wanted\r\n    if (!this.values().length)\r\n      setTimeout(() => this.#focusOnSearchComponent());\r\n  }\r\n\r\n  public doAfterDelete(props: DeleteEntityProps) {\r\n    this.log.fnIf('doAfterDelete', { props });\r\n    this.remove(props.index);\r\n  }\r\n\r\n  //#endregion\r\n\r\n}\r\n","import { Signal } from '@angular/core';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsSharedSeparator } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldValue } from '../../../../../../../edit-types/src/FieldValue';\r\n\r\n/**\r\n * Small helper class to do mapping between the state and the UI.\r\n *\r\n * Basically the reason is that the UI sometimes needs a slightly different representation of the state.\r\n *\r\n * This class should help map both ways.\r\n */\r\nexport abstract class StateUiMapperBase<TState extends FieldValue = FieldValue, TUi extends FieldValue = FieldValue> {\r\n\r\n  constructor(protected fieldName: string, protected settings: Signal<FieldSettings & FieldSettingsSharedSeparator>) { }\r\n\r\n  abstract toUi(state: TState): TUi;\r\n\r\n  abstract toState(uiValue: TUi): TState;\r\n}\r\n\r\n\r\n// export abstract class StateUiMapperWithSettingsBase<TState extends FieldValue = FieldValue, TUi extends FieldValue = FieldValue>\r\n//   extends StateUiMapperBase<TState, TUi> {\r\n//   constructor(fieldName: string, settings: Signal<FieldSettings & FieldSettingsSharedSeparator>) {\r\n//     super(fieldName, settings);\r\n//   }\r\n// }\r\n","import { StateUiMapperBase } from './state-ui-mapper-base';\r\n\r\n/**\r\n * A noop mapper that does nothing, as the data-type for state is the same as the UI.\r\n * \r\n * Typically used in Entity-Picker fields.\r\n */\r\nexport class StateUiMapperNoop extends StateUiMapperBase<any, any> {\r\n  toUi(state: any): any {\r\n    return state;\r\n  }\r\n\r\n  toState(uiValue: any): any {\r\n    return uiValue;\r\n  }\r\n}","import { convertArrayToString } from '../picker.helpers';\r\nimport { StateUiMapperBase } from './state-ui-mapper-base';\r\n\r\n/**\r\n * A mapper that converts a string to a number .\r\n *\r\n * Typically used for string-pickers, where the data is a string but the UI is an array of strings.\r\n */\r\nexport class StateUiMapperNumberArray extends StateUiMapperBase<number, string[]> {\r\n  /**\r\n    * Convert a number to an array of strings for use in the UI.\r\n    */\r\n  toUi(state: number): string[] {\r\n    return state == null\r\n      ? []\r\n      : [state.toString()];\r\n  }\r\n\r\n  /**\r\n  * Convert an array of strings to a number for state.\r\n  */\r\n  toState(uiValue: string[]): number {\r\n    const stringValue = (uiValue == null || uiValue.length === 0)\r\n      ? ''\r\n      : convertArrayToString(uiValue, this.settings().Separator);\r\n\r\n    const parsedNumber = Number(stringValue);\r\n    return isNaN(parsedNumber) ? null : parsedNumber;\r\n  }\r\n}\r\n","import { convertArrayToString } from '../picker.helpers';\r\nimport { StateUiMapperBase } from './state-ui-mapper-base';\r\n\r\n/**\r\n * A mapper that converts a string to an array of strings, and vice versa.\r\n *\r\n * Typically used for string-pickers, where the data is a string but the UI is an array of strings.\r\n */\r\nexport class StateUiMapperStringArray extends StateUiMapperBase<string, string[]> {\r\n  /**\r\n   * Convert a string to an array of strings for use in the UI.\r\n   */\r\n  toUi(state: string): string[] {\r\n    return (state == null || state === '')\r\n      ? []\r\n      : state.split(this.settings().Separator) ?? [];\r\n  }\r\n\r\n  /**\r\n   * The state needs a string, using the specified separator.\r\n   */\r\n  toState(uiValue: string[]): string {\r\n    return (uiValue == null || uiValue.length === 0) \r\n      ? ''\r\n      : convertArrayToString(uiValue, this.settings().Separator);\r\n  }\r\n}","export const PickerSourcesCustom = {\r\n  UiPickerSourceCustomList: 'UiPickerSourceCustomList',\r\n  UiPickerSourceCustomCsv: 'UiPickerSourceCustomCsv',\r\n} as const;\r\n\r\nexport const PickerConfigs = {\r\n  ...PickerSourcesCustom,\r\n  UiPickerSourceQuery: 'UiPickerSourceQuery',\r\n  UiPickerSourceEntity: 'UiPickerSourceEntity',\r\n  UiPickerSourceAppAssets: 'UiPickerSourceAppAssets',\r\n  UiPickerSourceCss: 'UiPickerSourceCss',\r\n} as const;\r\n\r\nexport const UiPickerModeIsTree = 'UiPickerModeTree';\r\n\r\n","import { Injector, ProviderToken } from '@angular/core';\r\nimport { FieldSettingsPicker } from 'projects/edit-types/src/FieldSettings-Pickers';\r\nimport { Of, transient } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldState } from '../field-state';\r\nimport { DataAdapterAppAssets } from './adapters/data-adapter-app-assets';\r\nimport { DataAdapterBase } from './adapters/data-adapter-base';\r\nimport { DataAdapterCss } from './adapters/data-adapter-css';\r\nimport { DataAdapterEmpty } from './adapters/data-adapter-empty';\r\nimport { DataAdapterEntity } from './adapters/data-adapter-entity';\r\nimport { DataAdapterEntityBase } from './adapters/data-adapter-entity-base';\r\nimport { DataAdapterQuery } from './adapters/data-adapter-query';\r\nimport { DataAdapterString } from './adapters/data-adapter-string';\r\nimport { StateAdapter } from './adapters/state-adapter';\r\nimport { StateUiMapperBase } from './adapters/state-ui-mapper-base';\r\nimport { StateUiMapperNoop } from './adapters/state-ui-mapper-noop';\r\nimport { StateUiMapperNumberArray } from './adapters/state-ui-mapper-number-array';\r\nimport { StateUiMapperStringArray } from './adapters/state-ui-mapper-string-array';\r\nimport { PickerConfigs } from './constants/picker-config-model.constants';\r\nimport { PickerData } from './picker-data';\r\n\r\n/**\r\n * Factory for creating PickerData instances.\r\n * Goal is to move all the logic for which combination of input types\r\n * result in what states etc. to here.\r\n */\r\nexport class PickerDataSetup {\r\n\r\n  log = classLog({ PickerDataSetup }, null);\r\n\r\n  constructor(private injector: Injector) { }\r\n\r\n  // Notes: previous flow of initialization\r\n  // 1. Final control (eg. StringPickerComponent) gets services which it will use using transient(...)\r\n  // ... and also importMe on the logic\r\n  // 2. PickerComponent.ngOnInit() will\r\n  // ...\r\n  // 3. The control will override initAdaptersAndModel()\r\n  // 3.1 init state with\r\n  // ... it will also attach a CALLBACK! for focused?\r\n\r\n  /**\r\n   * Setup / initialize a Picker Data.\r\n   * Note that it can't be called when fields are being created, but must be called from inside each field.\r\n   * Reason is that objects created later on through DI will need the FieldState and other context objects to be injected.\r\n   */\r\n  setupPickerData(pickerData: PickerData, fieldState: FieldState<FieldValue>): PickerData {\r\n    const pdWithSetupState = pickerData as PickerData & { setupAlreadyStarted: boolean };\r\n    const alreadyStarted = pdWithSetupState.setupAlreadyStarted;\r\n    const inputType = fieldState.config.inputTypeSpecs.inputType;\r\n    const l = this.log.fn('createPickerAdapters', { pickerData, fieldState, inputType, alreadyStarted });\r\n    if (alreadyStarted)\r\n      return l.rSilent(pickerData, 'exist, already started');\r\n    \r\n    pdWithSetupState.setupAlreadyStarted = true;\r\n\r\n    // First get the state, since the sources will depend on it.\r\n    const state = this.#getStateAdapter(fieldState.name, inputType, fieldState.settings as ConstructorParameters<typeof StateUiMapperBase>[1]);\r\n\r\n    const dataSourceType = (fieldState.settings() as FieldSettings & FieldSettingsPicker).dataSourceType;\r\n    const source = this.#getSourceAdapter(inputType, dataSourceType, state);\r\n\r\n    pickerData.setup(fieldState.name, fieldState.settings, state, source);\r\n\r\n    // l.end('ok', { state, source });\r\n\r\n    // Perform any post-init actions for the source - ATM only on Entity/Query\r\n    (pickerData.source as DataAdapterEntityBase)?.onAfterViewInit?.();\r\n    \r\n    return l.rSilent(pickerData);\r\n  }\r\n\r\n  #getStateAdapter(fieldName: string, inputType: Of<typeof InputTypeCatalog>, settings: ConstructorParameters<typeof StateUiMapperBase>[1]): StateAdapter {\r\n    const uiMapperType = partsMap[inputType]?.uiMapper as typeof StateUiMapperNoop;\r\n    if (!uiMapperType)\r\n      throw new Error(`No State Adapter found for inputTypeSpecs: ${inputType}`);\r\n\r\n    const stateAdapter = transient(StateAdapter, this.injector);\r\n    const uiMapper = new uiMapperType(fieldName, settings);\r\n    stateAdapter.setup(fieldName, uiMapper);\r\n    return stateAdapter;\r\n  }\r\n\r\n  #getSourceAdapter(inputType: Of<typeof InputTypeCatalog>, dataSourceType: string, state: StateAdapter): DataAdapterBase {\r\n    const l = this.log.fn('getSourceAdapter', { inputType, dataSourceType });\r\n    // Get config for allowed sources / adapters for the current inputType\r\n    const parts = partsMap[inputType];\r\n\r\n    // The config type is either the forced type (from defaults for old pickers) or the specified type\r\n    const dsType = parts.forcePickerConfig ?? dataSourceType;\r\n    l.a(`use config type`, { dataSourceType, forcePickerConfig: parts.forcePickerConfig, dsType });\r\n\r\n    const dataAdapterType = mapNameToDataAdapter[dsType] ?? DataAdapterEmpty;\r\n    this.#throwIfSourceAdapterNotAllowed(inputType, dataAdapterType);\r\n    const result = transient(dataAdapterType, this.injector).connectState(state);\r\n    return l.r(result);\r\n  }\r\n\r\n  #throwIfSourceAdapterNotAllowed(inputType: Of<typeof InputTypeCatalog>, dataSourceType: ProviderToken<unknown>): boolean {\r\n    // Empty is always allowed, as it's usually for errors / missing configs\r\n    if (dataSourceType === DataAdapterEmpty) return false;\r\n    if (partsMap[inputType]?.sources?.includes(dataSourceType)) return false;\r\n    throw new Error(`Specified SourceAdapter not allowed for inputTypeSpecs: ${inputType}: ${DataAdapterString}`);\r\n  }\r\n\r\n}\r\n\r\nconst mapNameToDataAdapter: Record<string, ProviderToken<DataAdapterBase>> = {\r\n  [PickerConfigs.UiPickerSourceCustomList]: DataAdapterString,\r\n  [PickerConfigs.UiPickerSourceCustomCsv]: DataAdapterString,\r\n  [PickerConfigs.UiPickerSourceCss]: DataAdapterCss,\r\n  [PickerConfigs.UiPickerSourceQuery]: DataAdapterQuery,\r\n  [PickerConfigs.UiPickerSourceEntity]: DataAdapterEntity,\r\n  [PickerConfigs.UiPickerSourceAppAssets]: DataAdapterAppAssets,\r\n};\r\n\r\n/**\r\n * Catalog of the parts to be used for each picker type.\r\n * This includes what data-sources and state-adapters to use.\r\n * For older pickers, a predefined source is used.\r\n */\r\nconst partsMap: Record<string, PartMap> = {\r\n  [InputTypeCatalog.StringPicker]: {\r\n    sources: [DataAdapterString, DataAdapterQuery, DataAdapterEntity, DataAdapterCss, DataAdapterAppAssets],\r\n    uiMapper: StateUiMapperStringArray,\r\n  },\r\n  [InputTypeCatalog.StringDropdown]: {\r\n    sources: [DataAdapterString],\r\n    uiMapper: StateUiMapperStringArray,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceCustomList,\r\n  },\r\n\r\n  [InputTypeCatalog.StringFontIconPicker]: {\r\n    sources: [DataAdapterCss],\r\n    uiMapper: StateUiMapperStringArray,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceCss,\r\n  },\r\n\r\n  [InputTypeCatalog.NumberDropdown]: {\r\n    sources: [DataAdapterString],\r\n    uiMapper: StateUiMapperNumberArray,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceCustomList,\r\n  },\r\n\r\n  [InputTypeCatalog.NumberPicker]: {\r\n    sources: [DataAdapterString, DataAdapterQuery, DataAdapterEntity],\r\n    uiMapper: StateUiMapperNumberArray,\r\n  },\r\n  [InputTypeCatalog.StringDropdownQuery]: {\r\n    sources: [DataAdapterQuery],\r\n    uiMapper: StateUiMapperStringArray,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceQuery,\r\n  },\r\n  [InputTypeCatalog.EntityDefault]: {\r\n    sources: [DataAdapterEntity],\r\n    uiMapper: StateUiMapperNoop,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceEntity,\r\n  },\r\n  [InputTypeCatalog.EntityQuery]: {\r\n    sources: [DataAdapterQuery],\r\n    uiMapper: StateUiMapperNoop,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceQuery,\r\n  },\r\n  [InputTypeCatalog.EntityContentBlocks]: {\r\n    sources: [DataAdapterEntity],\r\n    uiMapper: StateUiMapperNoop,\r\n    forcePickerConfig: PickerConfigs.UiPickerSourceEntity,\r\n  },\r\n  [InputTypeCatalog.EntityPicker]: {\r\n    sources: [DataAdapterEntity, DataAdapterQuery, DataAdapterString],\r\n    uiMapper: StateUiMapperNoop,\r\n  },\r\n};\r\n\r\ninterface PartMap {\r\n  sources: ProviderToken<unknown>[],\r\n  uiMapper: typeof StateUiMapperBase | typeof StateUiMapperStringArray | typeof StateUiMapperNumberArray, // ProviderToken<StateUiMapperBase>,\r\n  /** Force some string-sources to assume no-configuration, since the config is in the classic metadata, not in a DataSource config */\r\n  forcePickerConfig?: Of<typeof PickerConfigs>,\r\n}\r\n","import { SelectionModel, isDataSource } from '@angular/cdk/collections';\nimport { isObservable, Subject, BehaviorSubject, of, combineLatest, EMPTY, concat } from 'rxjs';\nimport { take, filter, takeUntil, startWith, tap, switchMap, map, reduce, concatMap, distinctUntilChanged } from 'rxjs/operators';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, inject, ViewContainerRef, Directive, TemplateRef, IterableDiffers, ChangeDetectorRef, ElementRef, Component, ViewEncapsulation, ChangeDetectionStrategy, Input, ViewChild, ContentChildren, EventEmitter, booleanAttribute, Output, numberAttribute, NgModule } from '@angular/core';\nimport { TREE_KEY_MANAGER } from '@angular/cdk/a11y';\nimport { Directionality } from '@angular/cdk/bidi';\nimport { coerceObservable } from '@angular/cdk/coercion/private';\n\n/**\n * Base tree control. It has basic toggle/expand/collapse operations on a single data node.\n *\n * @deprecated Use one of levelAccessor or childrenAccessor. To be removed in a future version.\n * @breaking-change 21.0.0\n */\nclass BaseTreeControl {\n    /** Saved data node for `expandAll` action. */\n    dataNodes;\n    /** A selection model with multi-selection to track expansion status. */\n    expansionModel = new SelectionModel(true);\n    /**\n     * Returns the identifier by which a dataNode should be tracked, should its\n     * reference change.\n     *\n     * Similar to trackBy for *ngFor\n     */\n    trackBy;\n    /** Get depth of a given data node, return the level number. This is for flat tree node. */\n    getLevel;\n    /**\n     * Whether the data node is expandable. Returns true if expandable.\n     * This is for flat tree node.\n     */\n    isExpandable;\n    /** Gets a stream that emits whenever the given data node's children change. */\n    getChildren;\n    /** Toggles one single data node's expanded/collapsed state. */\n    toggle(dataNode) {\n        this.expansionModel.toggle(this._trackByValue(dataNode));\n    }\n    /** Expands one single data node. */\n    expand(dataNode) {\n        this.expansionModel.select(this._trackByValue(dataNode));\n    }\n    /** Collapses one single data node. */\n    collapse(dataNode) {\n        this.expansionModel.deselect(this._trackByValue(dataNode));\n    }\n    /** Whether a given data node is expanded or not. Returns true if the data node is expanded. */\n    isExpanded(dataNode) {\n        return this.expansionModel.isSelected(this._trackByValue(dataNode));\n    }\n    /** Toggles a subtree rooted at `node` recursively. */\n    toggleDescendants(dataNode) {\n        this.expansionModel.isSelected(this._trackByValue(dataNode))\n            ? this.collapseDescendants(dataNode)\n            : this.expandDescendants(dataNode);\n    }\n    /** Collapse all dataNodes in the tree. */\n    collapseAll() {\n        this.expansionModel.clear();\n    }\n    /** Expands a subtree rooted at given data node recursively. */\n    expandDescendants(dataNode) {\n        let toBeProcessed = [dataNode];\n        toBeProcessed.push(...this.getDescendants(dataNode));\n        this.expansionModel.select(...toBeProcessed.map(value => this._trackByValue(value)));\n    }\n    /** Collapses a subtree rooted at given data node recursively. */\n    collapseDescendants(dataNode) {\n        let toBeProcessed = [dataNode];\n        toBeProcessed.push(...this.getDescendants(dataNode));\n        this.expansionModel.deselect(...toBeProcessed.map(value => this._trackByValue(value)));\n    }\n    _trackByValue(value) {\n        return this.trackBy ? this.trackBy(value) : value;\n    }\n}\n\n/**\n * Flat tree control. Able to expand/collapse a subtree recursively for flattened tree.\n *\n * @deprecated Use one of levelAccessor or childrenAccessor instead. To be removed in a future\n * version.\n * @breaking-change 21.0.0\n */\nclass FlatTreeControl extends BaseTreeControl {\n    getLevel;\n    isExpandable;\n    options;\n    /** Construct with flat tree data node functions getLevel and isExpandable. */\n    constructor(getLevel, isExpandable, options) {\n        super();\n        this.getLevel = getLevel;\n        this.isExpandable = isExpandable;\n        this.options = options;\n        if (this.options) {\n            this.trackBy = this.options.trackBy;\n        }\n    }\n    /**\n     * Gets a list of the data node's subtree of descendent data nodes.\n     *\n     * To make this working, the `dataNodes` of the TreeControl must be flattened tree nodes\n     * with correct levels.\n     */\n    getDescendants(dataNode) {\n        const startIndex = this.dataNodes.indexOf(dataNode);\n        const results = [];\n        // Goes through flattened tree nodes in the `dataNodes` array, and get all descendants.\n        // The level of descendants of a tree node must be greater than the level of the given\n        // tree node.\n        // If we reach a node whose level is equal to the level of the tree node, we hit a sibling.\n        // If we reach a node whose level is greater than the level of the tree node, we hit a\n        // sibling of an ancestor.\n        for (let i = startIndex + 1; i < this.dataNodes.length && this.getLevel(dataNode) < this.getLevel(this.dataNodes[i]); i++) {\n            results.push(this.dataNodes[i]);\n        }\n        return results;\n    }\n    /**\n     * Expands all data nodes in the tree.\n     *\n     * To make this working, the `dataNodes` variable of the TreeControl must be set to all flattened\n     * data nodes of the tree.\n     */\n    expandAll() {\n        this.expansionModel.select(...this.dataNodes.map(node => this._trackByValue(node)));\n    }\n}\n\n/**\n * Nested tree control. Able to expand/collapse a subtree recursively for NestedNode type.\n *\n * @deprecated Use one of levelAccessor or childrenAccessor instead. To be removed in a future\n * version.\n * @breaking-change 21.0.0\n */\nclass NestedTreeControl extends BaseTreeControl {\n    getChildren;\n    options;\n    /** Construct with nested tree function getChildren. */\n    constructor(getChildren, options) {\n        super();\n        this.getChildren = getChildren;\n        this.options = options;\n        if (this.options) {\n            this.trackBy = this.options.trackBy;\n        }\n        if (this.options?.isExpandable) {\n            this.isExpandable = this.options.isExpandable;\n        }\n    }\n    /**\n     * Expands all dataNodes in the tree.\n     *\n     * To make this working, the `dataNodes` variable of the TreeControl must be set to all root level\n     * data nodes of the tree.\n     */\n    expandAll() {\n        this.expansionModel.clear();\n        const allNodes = this.dataNodes.reduce((accumulator, dataNode) => [...accumulator, ...this.getDescendants(dataNode), dataNode], []);\n        this.expansionModel.select(...allNodes.map(node => this._trackByValue(node)));\n    }\n    /** Gets a list of descendant dataNodes of a subtree rooted at given data node recursively. */\n    getDescendants(dataNode) {\n        const descendants = [];\n        this._getDescendants(descendants, dataNode);\n        // Remove the node itself\n        return descendants.splice(1);\n    }\n    /** A helper function to get descendants recursively. */\n    _getDescendants(descendants, dataNode) {\n        descendants.push(dataNode);\n        const childrenNodes = this.getChildren(dataNode);\n        if (Array.isArray(childrenNodes)) {\n            childrenNodes.forEach((child) => this._getDescendants(descendants, child));\n        }\n        else if (isObservable(childrenNodes)) {\n            // TypeScript as of version 3.5 doesn't seem to treat `Boolean` like a function that\n            // returns a `boolean` specifically in the context of `filter`, so we manually clarify that.\n            childrenNodes.pipe(take(1), filter(Boolean)).subscribe(children => {\n                for (const child of children) {\n                    this._getDescendants(descendants, child);\n                }\n            });\n        }\n    }\n}\n\n/**\n * Injection token used to provide a `CdkTreeNode` to its outlet.\n * Used primarily to avoid circular imports.\n * @docs-private\n */\nconst CDK_TREE_NODE_OUTLET_NODE = new InjectionToken('CDK_TREE_NODE_OUTLET_NODE');\n/**\n * Outlet for nested CdkNode. Put `[cdkTreeNodeOutlet]` on a tag to place children dataNodes\n * inside the outlet.\n */\nclass CdkTreeNodeOutlet {\n    viewContainer = inject(ViewContainerRef);\n    _node = inject(CDK_TREE_NODE_OUTLET_NODE, { optional: true });\n    constructor() { }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNodeOutlet, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: CdkTreeNodeOutlet, isStandalone: true, selector: \"[cdkTreeNodeOutlet]\", ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNodeOutlet, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkTreeNodeOutlet]',\n                }]\n        }], ctorParameters: () => [] });\n\n/** Context provided to the tree node component. */\nclass CdkTreeNodeOutletContext {\n    /** Data for the node. */\n    $implicit;\n    /** Depth of the node. */\n    level;\n    /** Index location of the node. */\n    index;\n    /** Length of the number of total dataNodes. */\n    count;\n    constructor(data) {\n        this.$implicit = data;\n    }\n}\n/**\n * Data node definition for the CdkTree.\n * Captures the node's template and a when predicate that describes when this node should be used.\n */\nclass CdkTreeNodeDef {\n    /** @docs-private */\n    template = inject(TemplateRef);\n    /**\n     * Function that should return true if this node template should be used for the provided node\n     * data and index. If left undefined, this node will be considered the default node template to\n     * use when no other when functions return true for the data.\n     * For every node, there must be at least one when function that passes or an undefined to\n     * default.\n     */\n    when;\n    constructor() { }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNodeDef, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: CdkTreeNodeDef, isStandalone: true, selector: \"[cdkTreeNodeDef]\", inputs: { when: [\"cdkTreeNodeDefWhen\", \"when\"] }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNodeDef, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkTreeNodeDef]',\n                    inputs: [{ name: 'when', alias: 'cdkTreeNodeDefWhen' }],\n                }]\n        }], ctorParameters: () => [] });\n\n/**\n * Returns an error to be thrown when there is no usable data.\n * @docs-private\n */\nfunction getTreeNoValidDataSourceError() {\n    return Error(`A valid data source must be provided.`);\n}\n/**\n * Returns an error to be thrown when there are multiple nodes that are missing a when function.\n * @docs-private\n */\nfunction getTreeMultipleDefaultNodeDefsError() {\n    return Error(`There can only be one default row without a when predicate function.`);\n}\n/**\n * Returns an error to be thrown when there are no matching node defs for a particular set of data.\n * @docs-private\n */\nfunction getTreeMissingMatchingNodeDefError() {\n    return Error(`Could not find a matching node definition for the provided node data.`);\n}\n/**\n * Returns an error to be thrown when there is no tree control.\n * @docs-private\n */\nfunction getTreeControlMissingError() {\n    return Error(`Could not find a tree control, levelAccessor, or childrenAccessor for the tree.`);\n}\n/**\n * Returns an error to be thrown when there are multiple ways of specifying children or level\n * provided to the tree.\n * @docs-private\n */\nfunction getMultipleTreeControlsError() {\n    return Error(`More than one of tree control, levelAccessor, or childrenAccessor were provided.`);\n}\n\n/**\n * CDK tree component that connects with a data source to retrieve data of type `T` and renders\n * dataNodes with hierarchy. Updates the dataNodes when new data is provided by the data source.\n */\nclass CdkTree {\n    _differs = inject(IterableDiffers);\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _elementRef = inject(ElementRef);\n    _dir = inject(Directionality);\n    /** Subject that emits when the component has been destroyed. */\n    _onDestroy = new Subject();\n    /** Differ used to find the changes in the data provided by the data source. */\n    _dataDiffer;\n    /** Stores the node definition that does not have a when predicate. */\n    _defaultNodeDef;\n    /** Data subscription */\n    _dataSubscription;\n    /** Level of nodes */\n    _levels = new Map();\n    /** The immediate parents for a node. This is `null` if there is no parent. */\n    _parents = new Map();\n    /**\n     * Nodes grouped into each set, which is a list of nodes displayed together in the DOM.\n     *\n     * Lookup key is the parent of a set. Root nodes have key of null.\n     *\n     * Values is a 'set' of tree nodes. Each tree node maps to a treeitem element. Sets are in the\n     * order that it is rendered. Each set maps directly to aria-posinset and aria-setsize attributes.\n     */\n    _ariaSets = new Map();\n    /**\n     * Provides a stream containing the latest data array to render. Influenced by the tree's\n     * stream of view window (what dataNodes are currently on screen).\n     * Data source can be an observable of data array, or a data array to render.\n     */\n    get dataSource() {\n        return this._dataSource;\n    }\n    set dataSource(dataSource) {\n        if (this._dataSource !== dataSource) {\n            this._switchDataSource(dataSource);\n        }\n    }\n    _dataSource;\n    /**\n     * The tree controller\n     *\n     * @deprecated Use one of `levelAccessor` or `childrenAccessor` instead. To be removed in a\n     * future version.\n     * @breaking-change 21.0.0\n     */\n    treeControl;\n    /**\n     * Given a data node, determines what tree level the node is at.\n     *\n     * One of levelAccessor or childrenAccessor must be specified, not both.\n     * This is enforced at run-time.\n     */\n    levelAccessor;\n    /**\n     * Given a data node, determines what the children of that node are.\n     *\n     * One of levelAccessor or childrenAccessor must be specified, not both.\n     * This is enforced at run-time.\n     */\n    childrenAccessor;\n    /**\n     * Tracking function that will be used to check the differences in data changes. Used similarly\n     * to `ngFor` `trackBy` function. Optimize node operations by identifying a node based on its data\n     * relative to the function to know if a node should be added/removed/moved.\n     * Accepts a function that takes two parameters, `index` and `item`.\n     */\n    trackBy;\n    /**\n     * Given a data node, determines the key by which we determine whether or not this node is expanded.\n     */\n    expansionKey;\n    // Outlets within the tree's template where the dataNodes will be inserted.\n    _nodeOutlet;\n    /** The tree node template for the tree */\n    _nodeDefs;\n    // TODO(tinayuangao): Setup a listener for scrolling, emit the calculated view to viewChange.\n    //     Remove the MAX_VALUE in viewChange\n    /**\n     * Stream containing the latest information on what rows are being displayed on screen.\n     * Can be used by the data source to as a heuristic of what data should be provided.\n     */\n    viewChange = new BehaviorSubject({\n        start: 0,\n        end: Number.MAX_VALUE,\n    });\n    /** Keep track of which nodes are expanded. */\n    _expansionModel;\n    /**\n     * Maintain a synchronous cache of flattened data nodes. This will only be\n     * populated after initial render, and in certain cases, will be delayed due to\n     * relying on Observable `getChildren` calls.\n     */\n    _flattenedNodes = new BehaviorSubject([]);\n    /** The automatically determined node type for the tree. */\n    _nodeType = new BehaviorSubject(null);\n    /** The mapping between data and the node that is rendered. */\n    _nodes = new BehaviorSubject(new Map());\n    /**\n     * Synchronous cache of nodes for the `TreeKeyManager`. This is separate\n     * from `_flattenedNodes` so they can be independently updated at different\n     * times.\n     */\n    _keyManagerNodes = new BehaviorSubject([]);\n    _keyManagerFactory = inject(TREE_KEY_MANAGER);\n    /** The key manager for this tree. Handles focus and activation based on user keyboard input. */\n    _keyManager;\n    _viewInit = false;\n    constructor() { }\n    ngAfterContentInit() {\n        this._initializeKeyManager();\n    }\n    ngAfterContentChecked() {\n        this._updateDefaultNodeDefinition();\n        this._subscribeToDataChanges();\n    }\n    ngOnDestroy() {\n        this._nodeOutlet.viewContainer.clear();\n        this.viewChange.complete();\n        this._onDestroy.next();\n        this._onDestroy.complete();\n        if (this._dataSource && typeof this._dataSource.disconnect === 'function') {\n            this.dataSource.disconnect(this);\n        }\n        if (this._dataSubscription) {\n            this._dataSubscription.unsubscribe();\n            this._dataSubscription = null;\n        }\n        // In certain tests, the tree might be destroyed before this is initialized\n        // in `ngAfterContentInit`.\n        this._keyManager?.destroy();\n    }\n    ngOnInit() {\n        this._checkTreeControlUsage();\n        this._initializeDataDiffer();\n    }\n    ngAfterViewInit() {\n        this._viewInit = true;\n    }\n    _updateDefaultNodeDefinition() {\n        const defaultNodeDefs = this._nodeDefs.filter(def => !def.when);\n        if (defaultNodeDefs.length > 1 && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throw getTreeMultipleDefaultNodeDefsError();\n        }\n        this._defaultNodeDef = defaultNodeDefs[0];\n    }\n    /**\n     * Sets the node type for the tree, if it hasn't been set yet.\n     *\n     * This will be called by the first node that's rendered in order for the tree\n     * to determine what data transformations are required.\n     */\n    _setNodeTypeIfUnset(newType) {\n        const currentType = this._nodeType.value;\n        if (currentType === null) {\n            this._nodeType.next(newType);\n        }\n        else if ((typeof ngDevMode === 'undefined' || ngDevMode) && currentType !== newType) {\n            console.warn(`Tree is using conflicting node types which can cause unexpected behavior. ` +\n                `Please use tree nodes of the same type (e.g. only flat or only nested). ` +\n                `Current node type: \"${currentType}\", new node type \"${newType}\".`);\n        }\n    }\n    /**\n     * Switch to the provided data source by resetting the data and unsubscribing from the current\n     * render change subscription if one exists. If the data source is null, interpret this by\n     * clearing the node outlet. Otherwise start listening for new data.\n     */\n    _switchDataSource(dataSource) {\n        if (this._dataSource && typeof this._dataSource.disconnect === 'function') {\n            this.dataSource.disconnect(this);\n        }\n        if (this._dataSubscription) {\n            this._dataSubscription.unsubscribe();\n            this._dataSubscription = null;\n        }\n        // Remove the all dataNodes if there is now no data source\n        if (!dataSource) {\n            this._nodeOutlet.viewContainer.clear();\n        }\n        this._dataSource = dataSource;\n        if (this._nodeDefs) {\n            this._subscribeToDataChanges();\n        }\n    }\n    _getExpansionModel() {\n        if (!this.treeControl) {\n            this._expansionModel ??= new SelectionModel(true);\n            return this._expansionModel;\n        }\n        return this.treeControl.expansionModel;\n    }\n    /** Set up a subscription for the data provided by the data source. */\n    _subscribeToDataChanges() {\n        if (this._dataSubscription) {\n            return;\n        }\n        let dataStream;\n        if (isDataSource(this._dataSource)) {\n            dataStream = this._dataSource.connect(this);\n        }\n        else if (isObservable(this._dataSource)) {\n            dataStream = this._dataSource;\n        }\n        else if (Array.isArray(this._dataSource)) {\n            dataStream = of(this._dataSource);\n        }\n        if (!dataStream) {\n            if (typeof ngDevMode === 'undefined' || ngDevMode) {\n                throw getTreeNoValidDataSourceError();\n            }\n            return;\n        }\n        this._dataSubscription = this._getRenderData(dataStream)\n            .pipe(takeUntil(this._onDestroy))\n            .subscribe(renderingData => {\n            this._renderDataChanges(renderingData);\n        });\n    }\n    /** Given an Observable containing a stream of the raw data, returns an Observable containing the RenderingData */\n    _getRenderData(dataStream) {\n        const expansionModel = this._getExpansionModel();\n        return combineLatest([\n            dataStream,\n            this._nodeType,\n            // We don't use the expansion data directly, however we add it here to essentially\n            // trigger data rendering when expansion changes occur.\n            expansionModel.changed.pipe(startWith(null), tap(expansionChanges => {\n                this._emitExpansionChanges(expansionChanges);\n            })),\n        ]).pipe(switchMap(([data, nodeType]) => {\n            if (nodeType === null) {\n                return of({ renderNodes: data, flattenedNodes: null, nodeType });\n            }\n            // If we're here, then we know what our node type is, and therefore can\n            // perform our usual rendering pipeline, which necessitates converting the data\n            return this._computeRenderingData(data, nodeType).pipe(map(convertedData => ({ ...convertedData, nodeType })));\n        }));\n    }\n    _renderDataChanges(data) {\n        if (data.nodeType === null) {\n            this.renderNodeChanges(data.renderNodes);\n            return;\n        }\n        // If we're here, then we know what our node type is, and therefore can\n        // perform our usual rendering pipeline.\n        this._updateCachedData(data.flattenedNodes);\n        this.renderNodeChanges(data.renderNodes);\n        this._updateKeyManagerItems(data.flattenedNodes);\n    }\n    _emitExpansionChanges(expansionChanges) {\n        if (!expansionChanges) {\n            return;\n        }\n        const nodes = this._nodes.value;\n        for (const added of expansionChanges.added) {\n            const node = nodes.get(added);\n            node?._emitExpansionState(true);\n        }\n        for (const removed of expansionChanges.removed) {\n            const node = nodes.get(removed);\n            node?._emitExpansionState(false);\n        }\n    }\n    _initializeKeyManager() {\n        const items = combineLatest([this._keyManagerNodes, this._nodes]).pipe(map(([keyManagerNodes, renderNodes]) => keyManagerNodes.reduce((items, data) => {\n            const node = renderNodes.get(this._getExpansionKey(data));\n            if (node) {\n                items.push(node);\n            }\n            return items;\n        }, [])));\n        const keyManagerOptions = {\n            trackBy: node => this._getExpansionKey(node.data),\n            skipPredicate: node => !!node.isDisabled,\n            typeAheadDebounceInterval: true,\n            horizontalOrientation: this._dir.value,\n        };\n        this._keyManager = this._keyManagerFactory(items, keyManagerOptions);\n    }\n    _initializeDataDiffer() {\n        // Provide a default trackBy based on `_getExpansionKey` if one isn't provided.\n        const trackBy = this.trackBy ?? ((_index, item) => this._getExpansionKey(item));\n        this._dataDiffer = this._differs.find([]).create(trackBy);\n    }\n    _checkTreeControlUsage() {\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            // Verify that Tree follows API contract of using one of TreeControl, levelAccessor or\n            // childrenAccessor. Throw an appropriate error if contract is not met.\n            let numTreeControls = 0;\n            if (this.treeControl) {\n                numTreeControls++;\n            }\n            if (this.levelAccessor) {\n                numTreeControls++;\n            }\n            if (this.childrenAccessor) {\n                numTreeControls++;\n            }\n            if (!numTreeControls) {\n                throw getTreeControlMissingError();\n            }\n            else if (numTreeControls > 1) {\n                throw getMultipleTreeControlsError();\n            }\n        }\n    }\n    /** Check for changes made in the data and render each change (node added/removed/moved). */\n    renderNodeChanges(data, dataDiffer = this._dataDiffer, viewContainer = this._nodeOutlet.viewContainer, parentData) {\n        const changes = dataDiffer.diff(data);\n        // Some tree consumers expect change detection to propagate to nodes\n        // even when the array itself hasn't changed; we explicitly detect changes\n        // anyways in order for nodes to update their data.\n        //\n        // However, if change detection is called while the component's view is\n        // still initing, then the order of child views initing will be incorrect;\n        // to prevent this, we only exit early if the view hasn't initialized yet.\n        if (!changes && !this._viewInit) {\n            return;\n        }\n        changes?.forEachOperation((item, adjustedPreviousIndex, currentIndex) => {\n            if (item.previousIndex == null) {\n                this.insertNode(data[currentIndex], currentIndex, viewContainer, parentData);\n            }\n            else if (currentIndex == null) {\n                viewContainer.remove(adjustedPreviousIndex);\n            }\n            else {\n                const view = viewContainer.get(adjustedPreviousIndex);\n                viewContainer.move(view, currentIndex);\n            }\n        });\n        // If the data itself changes, but keeps the same trackBy, we need to update the templates'\n        // context to reflect the new object.\n        changes?.forEachIdentityChange((record) => {\n            const newData = record.item;\n            if (record.currentIndex != undefined) {\n                const view = viewContainer.get(record.currentIndex);\n                view.context.$implicit = newData;\n            }\n        });\n        // Note: we only `detectChanges` from a top-level call, otherwise we risk overflowing\n        // the call stack since this method is called recursively (see #29733.)\n        // TODO: change to `this._changeDetectorRef.markForCheck()`,\n        // or just switch this component to use signals.\n        if (parentData) {\n            this._changeDetectorRef.markForCheck();\n        }\n        else {\n            this._changeDetectorRef.detectChanges();\n        }\n    }\n    /**\n     * Finds the matching node definition that should be used for this node data. If there is only\n     * one node definition, it is returned. Otherwise, find the node definition that has a when\n     * predicate that returns true with the data. If none return true, return the default node\n     * definition.\n     */\n    _getNodeDef(data, i) {\n        if (this._nodeDefs.length === 1) {\n            return this._nodeDefs.first;\n        }\n        const nodeDef = this._nodeDefs.find(def => def.when && def.when(i, data)) || this._defaultNodeDef;\n        if (!nodeDef && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throw getTreeMissingMatchingNodeDefError();\n        }\n        return nodeDef;\n    }\n    /**\n     * Create the embedded view for the data node template and place it in the correct index location\n     * within the data node view container.\n     */\n    insertNode(nodeData, index, viewContainer, parentData) {\n        const levelAccessor = this._getLevelAccessor();\n        const node = this._getNodeDef(nodeData, index);\n        const key = this._getExpansionKey(nodeData);\n        // Node context that will be provided to created embedded view\n        const context = new CdkTreeNodeOutletContext(nodeData);\n        parentData ??= this._parents.get(key) ?? undefined;\n        // If the tree is flat tree, then use the `getLevel` function in flat tree control\n        // Otherwise, use the level of parent node.\n        if (levelAccessor) {\n            context.level = levelAccessor(nodeData);\n        }\n        else if (parentData !== undefined && this._levels.has(this._getExpansionKey(parentData))) {\n            context.level = this._levels.get(this._getExpansionKey(parentData)) + 1;\n        }\n        else {\n            context.level = 0;\n        }\n        this._levels.set(key, context.level);\n        // Use default tree nodeOutlet, or nested node's nodeOutlet\n        const container = viewContainer ? viewContainer : this._nodeOutlet.viewContainer;\n        container.createEmbeddedView(node.template, context, index);\n        // Set the data to just created `CdkTreeNode`.\n        // The `CdkTreeNode` created from `createEmbeddedView` will be saved in static variable\n        //     `mostRecentTreeNode`. We get it from static variable and pass the node data to it.\n        if (CdkTreeNode.mostRecentTreeNode) {\n            CdkTreeNode.mostRecentTreeNode.data = nodeData;\n        }\n    }\n    /** Whether the data node is expanded or collapsed. Returns true if it's expanded. */\n    isExpanded(dataNode) {\n        return !!(this.treeControl?.isExpanded(dataNode) ||\n            this._expansionModel?.isSelected(this._getExpansionKey(dataNode)));\n    }\n    /** If the data node is currently expanded, collapse it. Otherwise, expand it. */\n    toggle(dataNode) {\n        if (this.treeControl) {\n            this.treeControl.toggle(dataNode);\n        }\n        else if (this._expansionModel) {\n            this._expansionModel.toggle(this._getExpansionKey(dataNode));\n        }\n    }\n    /** Expand the data node. If it is already expanded, does nothing. */\n    expand(dataNode) {\n        if (this.treeControl) {\n            this.treeControl.expand(dataNode);\n        }\n        else if (this._expansionModel) {\n            this._expansionModel.select(this._getExpansionKey(dataNode));\n        }\n    }\n    /** Collapse the data node. If it is already collapsed, does nothing. */\n    collapse(dataNode) {\n        if (this.treeControl) {\n            this.treeControl.collapse(dataNode);\n        }\n        else if (this._expansionModel) {\n            this._expansionModel.deselect(this._getExpansionKey(dataNode));\n        }\n    }\n    /**\n     * If the data node is currently expanded, collapse it and all its descendants.\n     * Otherwise, expand it and all its descendants.\n     */\n    toggleDescendants(dataNode) {\n        if (this.treeControl) {\n            this.treeControl.toggleDescendants(dataNode);\n        }\n        else if (this._expansionModel) {\n            if (this.isExpanded(dataNode)) {\n                this.collapseDescendants(dataNode);\n            }\n            else {\n                this.expandDescendants(dataNode);\n            }\n        }\n    }\n    /**\n     * Expand the data node and all its descendants. If they are already expanded, does nothing.\n     */\n    expandDescendants(dataNode) {\n        if (this.treeControl) {\n            this.treeControl.expandDescendants(dataNode);\n        }\n        else if (this._expansionModel) {\n            const expansionModel = this._expansionModel;\n            expansionModel.select(this._getExpansionKey(dataNode));\n            this._getDescendants(dataNode)\n                .pipe(take(1), takeUntil(this._onDestroy))\n                .subscribe(children => {\n                expansionModel.select(...children.map(child => this._getExpansionKey(child)));\n            });\n        }\n    }\n    /** Collapse the data node and all its descendants. If it is already collapsed, does nothing. */\n    collapseDescendants(dataNode) {\n        if (this.treeControl) {\n            this.treeControl.collapseDescendants(dataNode);\n        }\n        else if (this._expansionModel) {\n            const expansionModel = this._expansionModel;\n            expansionModel.deselect(this._getExpansionKey(dataNode));\n            this._getDescendants(dataNode)\n                .pipe(take(1), takeUntil(this._onDestroy))\n                .subscribe(children => {\n                expansionModel.deselect(...children.map(child => this._getExpansionKey(child)));\n            });\n        }\n    }\n    /** Expands all data nodes in the tree. */\n    expandAll() {\n        if (this.treeControl) {\n            this.treeControl.expandAll();\n        }\n        else if (this._expansionModel) {\n            const expansionModel = this._expansionModel;\n            expansionModel.select(...this._flattenedNodes.value.map(child => this._getExpansionKey(child)));\n        }\n    }\n    /** Collapse all data nodes in the tree. */\n    collapseAll() {\n        if (this.treeControl) {\n            this.treeControl.collapseAll();\n        }\n        else if (this._expansionModel) {\n            const expansionModel = this._expansionModel;\n            expansionModel.deselect(...this._flattenedNodes.value.map(child => this._getExpansionKey(child)));\n        }\n    }\n    /** Level accessor, used for compatibility between the old Tree and new Tree */\n    _getLevelAccessor() {\n        return this.treeControl?.getLevel?.bind(this.treeControl) ?? this.levelAccessor;\n    }\n    /** Children accessor, used for compatibility between the old Tree and new Tree */\n    _getChildrenAccessor() {\n        return this.treeControl?.getChildren?.bind(this.treeControl) ?? this.childrenAccessor;\n    }\n    /**\n     * Gets the direct children of a node; used for compatibility between the old tree and the\n     * new tree.\n     */\n    _getDirectChildren(dataNode) {\n        const levelAccessor = this._getLevelAccessor();\n        const expansionModel = this._expansionModel ?? this.treeControl?.expansionModel;\n        if (!expansionModel) {\n            return of([]);\n        }\n        const key = this._getExpansionKey(dataNode);\n        const isExpanded = expansionModel.changed.pipe(switchMap(changes => {\n            if (changes.added.includes(key)) {\n                return of(true);\n            }\n            else if (changes.removed.includes(key)) {\n                return of(false);\n            }\n            return EMPTY;\n        }), startWith(this.isExpanded(dataNode)));\n        if (levelAccessor) {\n            return combineLatest([isExpanded, this._flattenedNodes]).pipe(map(([expanded, flattenedNodes]) => {\n                if (!expanded) {\n                    return [];\n                }\n                return this._findChildrenByLevel(levelAccessor, flattenedNodes, dataNode, 1);\n            }));\n        }\n        const childrenAccessor = this._getChildrenAccessor();\n        if (childrenAccessor) {\n            return coerceObservable(childrenAccessor(dataNode) ?? []);\n        }\n        throw getTreeControlMissingError();\n    }\n    /**\n     * Given the list of flattened nodes, the level accessor, and the level range within\n     * which to consider children, finds the children for a given node.\n     *\n     * For example, for direct children, `levelDelta` would be 1. For all descendants,\n     * `levelDelta` would be Infinity.\n     */\n    _findChildrenByLevel(levelAccessor, flattenedNodes, dataNode, levelDelta) {\n        const key = this._getExpansionKey(dataNode);\n        const startIndex = flattenedNodes.findIndex(node => this._getExpansionKey(node) === key);\n        const dataNodeLevel = levelAccessor(dataNode);\n        const expectedLevel = dataNodeLevel + levelDelta;\n        const results = [];\n        // Goes through flattened tree nodes in the `flattenedNodes` array, and get all\n        // descendants within a certain level range.\n        //\n        // If we reach a node whose level is equal to or less than the level of the tree node,\n        // we hit a sibling or parent's sibling, and should stop.\n        for (let i = startIndex + 1; i < flattenedNodes.length; i++) {\n            const currentLevel = levelAccessor(flattenedNodes[i]);\n            if (currentLevel <= dataNodeLevel) {\n                break;\n            }\n            if (currentLevel <= expectedLevel) {\n                results.push(flattenedNodes[i]);\n            }\n        }\n        return results;\n    }\n    /**\n     * Adds the specified node component to the tree's internal registry.\n     *\n     * This primarily facilitates keyboard navigation.\n     */\n    _registerNode(node) {\n        this._nodes.value.set(this._getExpansionKey(node.data), node);\n        this._nodes.next(this._nodes.value);\n    }\n    /** Removes the specified node component from the tree's internal registry. */\n    _unregisterNode(node) {\n        this._nodes.value.delete(this._getExpansionKey(node.data));\n        this._nodes.next(this._nodes.value);\n    }\n    /**\n     * For the given node, determine the level where this node appears in the tree.\n     *\n     * This is intended to be used for `aria-level` but is 0-indexed.\n     */\n    _getLevel(node) {\n        return this._levels.get(this._getExpansionKey(node));\n    }\n    /**\n     * For the given node, determine the size of the parent's child set.\n     *\n     * This is intended to be used for `aria-setsize`.\n     */\n    _getSetSize(dataNode) {\n        const set = this._getAriaSet(dataNode);\n        return set.length;\n    }\n    /**\n     * For the given node, determine the index (starting from 1) of the node in its parent's child set.\n     *\n     * This is intended to be used for `aria-posinset`.\n     */\n    _getPositionInSet(dataNode) {\n        const set = this._getAriaSet(dataNode);\n        const key = this._getExpansionKey(dataNode);\n        return set.findIndex(node => this._getExpansionKey(node) === key) + 1;\n    }\n    /** Given a CdkTreeNode, gets the node that renders that node's parent's data. */\n    _getNodeParent(node) {\n        const parent = this._parents.get(this._getExpansionKey(node.data));\n        return parent && this._nodes.value.get(this._getExpansionKey(parent));\n    }\n    /** Given a CdkTreeNode, gets the nodes that renders that node's child data. */\n    _getNodeChildren(node) {\n        return this._getDirectChildren(node.data).pipe(map(children => children.reduce((nodes, child) => {\n            const value = this._nodes.value.get(this._getExpansionKey(child));\n            if (value) {\n                nodes.push(value);\n            }\n            return nodes;\n        }, [])));\n    }\n    /** `keydown` event handler; this just passes the event to the `TreeKeyManager`. */\n    _sendKeydownToKeyManager(event) {\n        // Only handle events directly on the tree or directly on one of the nodes, otherwise\n        // we risk interfering with events in the projected content (see #29828).\n        if (event.target === this._elementRef.nativeElement) {\n            this._keyManager.onKeydown(event);\n        }\n        else {\n            const nodes = this._nodes.getValue();\n            for (const [, node] of nodes) {\n                if (event.target === node._elementRef.nativeElement) {\n                    this._keyManager.onKeydown(event);\n                    break;\n                }\n            }\n        }\n    }\n    /** Gets all nested descendants of a given node. */\n    _getDescendants(dataNode) {\n        if (this.treeControl) {\n            return of(this.treeControl.getDescendants(dataNode));\n        }\n        if (this.levelAccessor) {\n            const results = this._findChildrenByLevel(this.levelAccessor, this._flattenedNodes.value, dataNode, Infinity);\n            return of(results);\n        }\n        if (this.childrenAccessor) {\n            return this._getAllChildrenRecursively(dataNode).pipe(reduce((allChildren, nextChildren) => {\n                allChildren.push(...nextChildren);\n                return allChildren;\n            }, []));\n        }\n        throw getTreeControlMissingError();\n    }\n    /**\n     * Gets all children and sub-children of the provided node.\n     *\n     * This will emit multiple times, in the order that the children will appear\n     * in the tree, and can be combined with a `reduce` operator.\n     */\n    _getAllChildrenRecursively(dataNode) {\n        if (!this.childrenAccessor) {\n            return of([]);\n        }\n        return coerceObservable(this.childrenAccessor(dataNode)).pipe(take(1), switchMap(children => {\n            // Here, we cache the parents of a particular child so that we can compute the levels.\n            for (const child of children) {\n                this._parents.set(this._getExpansionKey(child), dataNode);\n            }\n            return of(...children).pipe(concatMap(child => concat(of([child]), this._getAllChildrenRecursively(child))));\n        }));\n    }\n    _getExpansionKey(dataNode) {\n        // In the case that a key accessor function was not provided by the\n        // tree user, we'll default to using the node object itself as the key.\n        //\n        // This cast is safe since:\n        // - if an expansionKey is provided, TS will infer the type of K to be\n        //   the return type.\n        // - if it's not, then K will be defaulted to T.\n        return this.expansionKey?.(dataNode) ?? dataNode;\n    }\n    _getAriaSet(node) {\n        const key = this._getExpansionKey(node);\n        const parent = this._parents.get(key);\n        const parentKey = parent ? this._getExpansionKey(parent) : null;\n        const set = this._ariaSets.get(parentKey);\n        return set ?? [node];\n    }\n    /**\n     * Finds the parent for the given node. If this is a root node, this\n     * returns null. If we're unable to determine the parent, for example,\n     * if we don't have cached node data, this returns undefined.\n     */\n    _findParentForNode(node, index, cachedNodes) {\n        // In all cases, we have a mapping from node to level; all we need to do here is backtrack in\n        // our flattened list of nodes to determine the first node that's of a level lower than the\n        // provided node.\n        if (!cachedNodes.length) {\n            return null;\n        }\n        const currentLevel = this._levels.get(this._getExpansionKey(node)) ?? 0;\n        for (let parentIndex = index - 1; parentIndex >= 0; parentIndex--) {\n            const parentNode = cachedNodes[parentIndex];\n            const parentLevel = this._levels.get(this._getExpansionKey(parentNode)) ?? 0;\n            if (parentLevel < currentLevel) {\n                return parentNode;\n            }\n        }\n        return null;\n    }\n    /**\n     * Given a set of root nodes and the current node level, flattens any nested\n     * nodes into a single array.\n     *\n     * If any nodes are not expanded, then their children will not be added into the array.\n     * This will still traverse all nested children in order to build up our internal data\n     * models, but will not include them in the returned array.\n     */\n    _flattenNestedNodesWithExpansion(nodes, level = 0) {\n        const childrenAccessor = this._getChildrenAccessor();\n        // If we're using a level accessor, we don't need to flatten anything.\n        if (!childrenAccessor) {\n            return of([...nodes]);\n        }\n        return of(...nodes).pipe(concatMap(node => {\n            const parentKey = this._getExpansionKey(node);\n            if (!this._parents.has(parentKey)) {\n                this._parents.set(parentKey, null);\n            }\n            this._levels.set(parentKey, level);\n            const children = coerceObservable(childrenAccessor(node));\n            return concat(of([node]), children.pipe(take(1), tap(childNodes => {\n                this._ariaSets.set(parentKey, [...(childNodes ?? [])]);\n                for (const child of childNodes ?? []) {\n                    const childKey = this._getExpansionKey(child);\n                    this._parents.set(childKey, node);\n                    this._levels.set(childKey, level + 1);\n                }\n            }), switchMap(childNodes => {\n                if (!childNodes) {\n                    return of([]);\n                }\n                return this._flattenNestedNodesWithExpansion(childNodes, level + 1).pipe(map(nestedNodes => (this.isExpanded(node) ? nestedNodes : [])));\n            })));\n        }), reduce((results, children) => {\n            results.push(...children);\n            return results;\n        }, []));\n    }\n    /**\n     * Converts children for certain tree configurations.\n     *\n     * This also computes parent, level, and group data.\n     */\n    _computeRenderingData(nodes, nodeType) {\n        // The only situations where we have to convert children types is when\n        // they're mismatched; i.e. if the tree is using a childrenAccessor and the\n        // nodes are flat, or if the tree is using a levelAccessor and the nodes are\n        // nested.\n        if (this.childrenAccessor && nodeType === 'flat') {\n            // This flattens children into a single array.\n            this._ariaSets.set(null, [...nodes]);\n            return this._flattenNestedNodesWithExpansion(nodes).pipe(map(flattenedNodes => ({\n                renderNodes: flattenedNodes,\n                flattenedNodes,\n            })));\n        }\n        else if (this.levelAccessor && nodeType === 'nested') {\n            // In the nested case, we only look for root nodes. The CdkNestedNode\n            // itself will handle rendering each individual node's children.\n            const levelAccessor = this.levelAccessor;\n            return of(nodes.filter(node => levelAccessor(node) === 0)).pipe(map(rootNodes => ({\n                renderNodes: rootNodes,\n                flattenedNodes: nodes,\n            })), tap(({ flattenedNodes }) => {\n                this._calculateParents(flattenedNodes);\n            }));\n        }\n        else if (nodeType === 'flat') {\n            // In the case of a TreeControl, we know that the node type matches up\n            // with the TreeControl, and so no conversions are necessary. Otherwise,\n            // we've already confirmed that the data model matches up with the\n            // desired node type here.\n            return of({ renderNodes: nodes, flattenedNodes: nodes }).pipe(tap(({ flattenedNodes }) => {\n                this._calculateParents(flattenedNodes);\n            }));\n        }\n        else {\n            // For nested nodes, we still need to perform the node flattening in order\n            // to maintain our caches for various tree operations.\n            this._ariaSets.set(null, [...nodes]);\n            return this._flattenNestedNodesWithExpansion(nodes).pipe(map(flattenedNodes => ({\n                renderNodes: nodes,\n                flattenedNodes,\n            })));\n        }\n    }\n    _updateCachedData(flattenedNodes) {\n        this._flattenedNodes.next(flattenedNodes);\n    }\n    _updateKeyManagerItems(flattenedNodes) {\n        this._keyManagerNodes.next(flattenedNodes);\n    }\n    /** Traverse the flattened node data and compute parents, levels, and group data. */\n    _calculateParents(flattenedNodes) {\n        const levelAccessor = this._getLevelAccessor();\n        if (!levelAccessor) {\n            return;\n        }\n        this._parents.clear();\n        this._ariaSets.clear();\n        for (let index = 0; index < flattenedNodes.length; index++) {\n            const dataNode = flattenedNodes[index];\n            const key = this._getExpansionKey(dataNode);\n            this._levels.set(key, levelAccessor(dataNode));\n            const parent = this._findParentForNode(dataNode, index, flattenedNodes);\n            this._parents.set(key, parent);\n            const parentKey = parent ? this._getExpansionKey(parent) : null;\n            const group = this._ariaSets.get(parentKey) ?? [];\n            group.splice(index, 0, dataNode);\n            this._ariaSets.set(parentKey, group);\n        }\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTree, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: CdkTree, isStandalone: true, selector: \"cdk-tree\", inputs: { dataSource: \"dataSource\", treeControl: \"treeControl\", levelAccessor: \"levelAccessor\", childrenAccessor: \"childrenAccessor\", trackBy: \"trackBy\", expansionKey: \"expansionKey\" }, host: { attributes: { \"role\": \"tree\" }, listeners: { \"keydown\": \"_sendKeydownToKeyManager($event)\" }, classAttribute: \"cdk-tree\" }, queries: [{ propertyName: \"_nodeDefs\", predicate: CdkTreeNodeDef, descendants: true }], viewQueries: [{ propertyName: \"_nodeOutlet\", first: true, predicate: CdkTreeNodeOutlet, descendants: true, static: true }], exportAs: [\"cdkTree\"], ngImport: i0, template: `<ng-container cdkTreeNodeOutlet></ng-container>`, isInline: true, dependencies: [{ kind: \"directive\", type: CdkTreeNodeOutlet, selector: \"[cdkTreeNodeOutlet]\" }], changeDetection: i0.ChangeDetectionStrategy.Default, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTree, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cdk-tree',\n                    exportAs: 'cdkTree',\n                    template: `<ng-container cdkTreeNodeOutlet></ng-container>`,\n                    host: {\n                        'class': 'cdk-tree',\n                        'role': 'tree',\n                        '(keydown)': '_sendKeydownToKeyManager($event)',\n                    },\n                    encapsulation: ViewEncapsulation.None,\n                    // The \"OnPush\" status for the `CdkTree` component is effectively a noop, so we are removing it.\n                    // The view for `CdkTree` consists entirely of templates declared in other views. As they are\n                    // declared elsewhere, they are checked when their declaration points are checked.\n                    // tslint:disable-next-line:validate-decorators\n                    changeDetection: ChangeDetectionStrategy.Default,\n                    imports: [CdkTreeNodeOutlet],\n                }]\n        }], ctorParameters: () => [], propDecorators: { dataSource: [{\n                type: Input\n            }], treeControl: [{\n                type: Input\n            }], levelAccessor: [{\n                type: Input\n            }], childrenAccessor: [{\n                type: Input\n            }], trackBy: [{\n                type: Input\n            }], expansionKey: [{\n                type: Input\n            }], _nodeOutlet: [{\n                type: ViewChild,\n                args: [CdkTreeNodeOutlet, { static: true }]\n            }], _nodeDefs: [{\n                type: ContentChildren,\n                args: [CdkTreeNodeDef, {\n                        // We need to use `descendants: true`, because Ivy will no longer match\n                        // indirect descendants if it's left as false.\n                        descendants: true,\n                    }]\n            }] } });\n/**\n * Tree node for CdkTree. It contains the data in the tree node.\n */\nclass CdkTreeNode {\n    _elementRef = inject(ElementRef);\n    _tree = inject(CdkTree);\n    _tabindex = -1;\n    _type = 'flat';\n    /**\n     * The role of the tree node.\n     *\n     * @deprecated This will be ignored; the tree will automatically determine the appropriate role\n     * for tree node. This input will be removed in a future version.\n     * @breaking-change 21.0.0\n     */\n    get role() {\n        return 'treeitem';\n    }\n    set role(_role) {\n        // ignore any role setting, we handle this internally.\n    }\n    /**\n     * Whether or not this node is expandable.\n     *\n     * If not using `FlatTreeControl`, or if `isExpandable` is not provided to\n     * `NestedTreeControl`, this should be provided for correct node a11y.\n     */\n    get isExpandable() {\n        return this._isExpandable();\n    }\n    set isExpandable(isExpandable) {\n        this._inputIsExpandable = isExpandable;\n        if ((this.data && !this._isExpandable) || !this._inputIsExpandable) {\n            return;\n        }\n        // If the node is being set to expandable, ensure that the status of the\n        // node is propagated\n        if (this._inputIsExpanded) {\n            this.expand();\n        }\n        else if (this._inputIsExpanded === false) {\n            this.collapse();\n        }\n    }\n    get isExpanded() {\n        return this._tree.isExpanded(this._data);\n    }\n    set isExpanded(isExpanded) {\n        this._inputIsExpanded = isExpanded;\n        if (isExpanded) {\n            this.expand();\n        }\n        else {\n            this.collapse();\n        }\n    }\n    /**\n     * Whether or not this node is disabled. If it's disabled, then the user won't be able to focus\n     * or activate this node.\n     */\n    isDisabled;\n    /**\n     * The text used to locate this item during typeahead. If not specified, the `textContent` will\n     * will be used.\n     */\n    typeaheadLabel;\n    getLabel() {\n        return this.typeaheadLabel || this._elementRef.nativeElement.textContent?.trim() || '';\n    }\n    /** This emits when the node has been programatically activated or activated by keyboard. */\n    activation = new EventEmitter();\n    /** This emits when the node's expansion status has been changed. */\n    expandedChange = new EventEmitter();\n    /**\n     * The most recently created `CdkTreeNode`. We save it in static variable so we can retrieve it\n     * in `CdkTree` and set the data to it.\n     */\n    static mostRecentTreeNode = null;\n    /** Subject that emits when the component has been destroyed. */\n    _destroyed = new Subject();\n    /** Emits when the node's data has changed. */\n    _dataChanges = new Subject();\n    _inputIsExpandable = false;\n    _inputIsExpanded = undefined;\n    /**\n     * Flag used to determine whether or not we should be focusing the actual element based on\n     * some user interaction (click or focus). On click, we don't forcibly focus the element\n     * since the click could trigger some other component that wants to grab its own focus\n     * (e.g. menu, dialog).\n     */\n    _shouldFocus = true;\n    _parentNodeAriaLevel;\n    /** The tree node's data. */\n    get data() {\n        return this._data;\n    }\n    set data(value) {\n        if (value !== this._data) {\n            this._data = value;\n            this._dataChanges.next();\n        }\n    }\n    _data;\n    /* If leaf node, return true to not assign aria-expanded attribute */\n    get isLeafNode() {\n        // If flat tree node data returns false for expandable property, it's a leaf node\n        if (this._tree.treeControl?.isExpandable !== undefined &&\n            !this._tree.treeControl.isExpandable(this._data)) {\n            return true;\n            // If nested tree node data returns 0 descendants, it's a leaf node\n        }\n        else if (this._tree.treeControl?.isExpandable === undefined &&\n            this._tree.treeControl?.getDescendants(this._data).length === 0) {\n            return true;\n        }\n        return false;\n    }\n    get level() {\n        // If the tree has a levelAccessor, use it to get the level. Otherwise read the\n        // aria-level off the parent node and use it as the level for this node (note aria-level is\n        // 1-indexed, while this property is 0-indexed, so we don't need to increment).\n        return this._tree._getLevel(this._data) ?? this._parentNodeAriaLevel;\n    }\n    /** Determines if the tree node is expandable. */\n    _isExpandable() {\n        if (this._tree.treeControl) {\n            if (this.isLeafNode) {\n                return false;\n            }\n            // For compatibility with trees created using TreeControl before we added\n            // CdkTreeNode#isExpandable.\n            return true;\n        }\n        return this._inputIsExpandable;\n    }\n    /**\n     * Determines the value for `aria-expanded`.\n     *\n     * For non-expandable nodes, this is `null`.\n     */\n    _getAriaExpanded() {\n        if (!this._isExpandable()) {\n            return null;\n        }\n        return String(this.isExpanded);\n    }\n    /**\n     * Determines the size of this node's parent's child set.\n     *\n     * This is intended to be used for `aria-setsize`.\n     */\n    _getSetSize() {\n        return this._tree._getSetSize(this._data);\n    }\n    /**\n     * Determines the index (starting from 1) of this node in its parent's child set.\n     *\n     * This is intended to be used for `aria-posinset`.\n     */\n    _getPositionInSet() {\n        return this._tree._getPositionInSet(this._data);\n    }\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    constructor() {\n        CdkTreeNode.mostRecentTreeNode = this;\n    }\n    ngOnInit() {\n        this._parentNodeAriaLevel = getParentNodeAriaLevel(this._elementRef.nativeElement);\n        this._tree\n            ._getExpansionModel()\n            .changed.pipe(map(() => this.isExpanded), distinctUntilChanged())\n            .subscribe(() => this._changeDetectorRef.markForCheck());\n        this._tree._setNodeTypeIfUnset(this._type);\n        this._tree._registerNode(this);\n    }\n    ngOnDestroy() {\n        // If this is the last tree node being destroyed,\n        // clear out the reference to avoid leaking memory.\n        if (CdkTreeNode.mostRecentTreeNode === this) {\n            CdkTreeNode.mostRecentTreeNode = null;\n        }\n        this._dataChanges.complete();\n        this._destroyed.next();\n        this._destroyed.complete();\n    }\n    getParent() {\n        return this._tree._getNodeParent(this) ?? null;\n    }\n    getChildren() {\n        return this._tree._getNodeChildren(this);\n    }\n    /** Focuses this data node. Implemented for TreeKeyManagerItem. */\n    focus() {\n        this._tabindex = 0;\n        if (this._shouldFocus) {\n            this._elementRef.nativeElement.focus();\n        }\n        this._changeDetectorRef.markForCheck();\n    }\n    /** Defocus this data node. */\n    unfocus() {\n        this._tabindex = -1;\n        this._changeDetectorRef.markForCheck();\n    }\n    /** Emits an activation event. Implemented for TreeKeyManagerItem. */\n    activate() {\n        if (this.isDisabled) {\n            return;\n        }\n        this.activation.next(this._data);\n    }\n    /** Collapses this data node. Implemented for TreeKeyManagerItem. */\n    collapse() {\n        if (this.isExpandable) {\n            this._tree.collapse(this._data);\n        }\n    }\n    /** Expands this data node. Implemented for TreeKeyManagerItem. */\n    expand() {\n        if (this.isExpandable) {\n            this._tree.expand(this._data);\n        }\n    }\n    /** Makes the node focusable. Implemented for TreeKeyManagerItem. */\n    makeFocusable() {\n        this._tabindex = 0;\n        this._changeDetectorRef.markForCheck();\n    }\n    _focusItem() {\n        if (this.isDisabled) {\n            return;\n        }\n        this._tree._keyManager.focusItem(this);\n    }\n    _setActiveItem() {\n        if (this.isDisabled) {\n            return;\n        }\n        this._shouldFocus = false;\n        this._tree._keyManager.focusItem(this);\n        this._shouldFocus = true;\n    }\n    _emitExpansionState(expanded) {\n        this.expandedChange.emit(expanded);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNode, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"16.1.0\", version: \"19.0.0\", type: CdkTreeNode, isStandalone: true, selector: \"cdk-tree-node\", inputs: { role: \"role\", isExpandable: [\"isExpandable\", \"isExpandable\", booleanAttribute], isExpanded: \"isExpanded\", isDisabled: [\"isDisabled\", \"isDisabled\", booleanAttribute], typeaheadLabel: [\"cdkTreeNodeTypeaheadLabel\", \"typeaheadLabel\"] }, outputs: { activation: \"activation\", expandedChange: \"expandedChange\" }, host: { attributes: { \"role\": \"treeitem\" }, listeners: { \"click\": \"_setActiveItem()\", \"focus\": \"_focusItem()\" }, properties: { \"attr.aria-expanded\": \"_getAriaExpanded()\", \"attr.aria-level\": \"level + 1\", \"attr.aria-posinset\": \"_getPositionInSet()\", \"attr.aria-setsize\": \"_getSetSize()\", \"tabindex\": \"_tabindex\" }, classAttribute: \"cdk-tree-node\" }, exportAs: [\"cdkTreeNode\"], ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNode, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'cdk-tree-node',\n                    exportAs: 'cdkTreeNode',\n                    host: {\n                        'class': 'cdk-tree-node',\n                        '[attr.aria-expanded]': '_getAriaExpanded()',\n                        '[attr.aria-level]': 'level + 1',\n                        '[attr.aria-posinset]': '_getPositionInSet()',\n                        '[attr.aria-setsize]': '_getSetSize()',\n                        '[tabindex]': '_tabindex',\n                        'role': 'treeitem',\n                        '(click)': '_setActiveItem()',\n                        '(focus)': '_focusItem()',\n                    },\n                }]\n        }], ctorParameters: () => [], propDecorators: { role: [{\n                type: Input\n            }], isExpandable: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], isExpanded: [{\n                type: Input\n            }], isDisabled: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], typeaheadLabel: [{\n                type: Input,\n                args: ['cdkTreeNodeTypeaheadLabel']\n            }], activation: [{\n                type: Output\n            }], expandedChange: [{\n                type: Output\n            }] } });\nfunction getParentNodeAriaLevel(nodeElement) {\n    let parent = nodeElement.parentElement;\n    while (parent && !isNodeElement(parent)) {\n        parent = parent.parentElement;\n    }\n    if (!parent) {\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            throw Error('Incorrect tree structure containing detached node.');\n        }\n        else {\n            return -1;\n        }\n    }\n    else if (parent.classList.contains('cdk-nested-tree-node')) {\n        return numberAttribute(parent.getAttribute('aria-level'));\n    }\n    else {\n        // The ancestor element is the cdk-tree itself\n        return 0;\n    }\n}\nfunction isNodeElement(element) {\n    const classList = element.classList;\n    return !!(classList?.contains('cdk-nested-tree-node') || classList?.contains('cdk-tree'));\n}\n\n/**\n * Nested node is a child of `<cdk-tree>`. It works with nested tree.\n * By using `cdk-nested-tree-node` component in tree node template, children of the parent node will\n * be added in the `cdkTreeNodeOutlet` in tree node template.\n * The children of node will be automatically added to `cdkTreeNodeOutlet`.\n */\nclass CdkNestedTreeNode extends CdkTreeNode {\n    _type = 'nested';\n    _differs = inject(IterableDiffers);\n    /** Differ used to find the changes in the data provided by the data source. */\n    _dataDiffer;\n    /** The children data dataNodes of current node. They will be placed in `CdkTreeNodeOutlet`. */\n    _children;\n    /** The children node placeholder. */\n    nodeOutlet;\n    constructor() {\n        super();\n    }\n    ngAfterContentInit() {\n        this._dataDiffer = this._differs.find([]).create(this._tree.trackBy);\n        this._tree\n            ._getDirectChildren(this.data)\n            .pipe(takeUntil(this._destroyed))\n            .subscribe(result => this.updateChildrenNodes(result));\n        this.nodeOutlet.changes\n            .pipe(takeUntil(this._destroyed))\n            .subscribe(() => this.updateChildrenNodes());\n    }\n    ngOnDestroy() {\n        this._clear();\n        super.ngOnDestroy();\n    }\n    /** Add children dataNodes to the NodeOutlet */\n    updateChildrenNodes(children) {\n        const outlet = this._getNodeOutlet();\n        if (children) {\n            this._children = children;\n        }\n        if (outlet && this._children) {\n            const viewContainer = outlet.viewContainer;\n            this._tree.renderNodeChanges(this._children, this._dataDiffer, viewContainer, this._data);\n        }\n        else {\n            // Reset the data differ if there's no children nodes displayed\n            this._dataDiffer.diff([]);\n        }\n    }\n    /** Clear the children dataNodes. */\n    _clear() {\n        const outlet = this._getNodeOutlet();\n        if (outlet) {\n            outlet.viewContainer.clear();\n            this._dataDiffer.diff([]);\n        }\n    }\n    /** Gets the outlet for the current node. */\n    _getNodeOutlet() {\n        const outlets = this.nodeOutlet;\n        // Note that since we use `descendants: true` on the query, we have to ensure\n        // that we don't pick up the outlet of a child node by accident.\n        return outlets && outlets.find(outlet => !outlet._node || outlet._node === this);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkNestedTreeNode, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: CdkNestedTreeNode, isStandalone: true, selector: \"cdk-nested-tree-node\", host: { classAttribute: \"cdk-nested-tree-node\" }, providers: [\n            { provide: CdkTreeNode, useExisting: CdkNestedTreeNode },\n            { provide: CDK_TREE_NODE_OUTLET_NODE, useExisting: CdkNestedTreeNode },\n        ], queries: [{ propertyName: \"nodeOutlet\", predicate: CdkTreeNodeOutlet, descendants: true }], exportAs: [\"cdkNestedTreeNode\"], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkNestedTreeNode, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'cdk-nested-tree-node',\n                    exportAs: 'cdkNestedTreeNode',\n                    providers: [\n                        { provide: CdkTreeNode, useExisting: CdkNestedTreeNode },\n                        { provide: CDK_TREE_NODE_OUTLET_NODE, useExisting: CdkNestedTreeNode },\n                    ],\n                    host: {\n                        'class': 'cdk-nested-tree-node',\n                    },\n                }]\n        }], ctorParameters: () => [], propDecorators: { nodeOutlet: [{\n                type: ContentChildren,\n                args: [CdkTreeNodeOutlet, {\n                        // We need to use `descendants: true`, because Ivy will no longer match\n                        // indirect descendants if it's left as false.\n                        descendants: true,\n                    }]\n            }] } });\n\n/** Regex used to split a string on its CSS units. */\nconst cssUnitPattern = /([A-Za-z%]+)$/;\n/**\n * Indent for the children tree dataNodes.\n * This directive will add left-padding to the node to show hierarchy.\n */\nclass CdkTreeNodePadding {\n    _treeNode = inject(CdkTreeNode);\n    _tree = inject(CdkTree);\n    _element = inject(ElementRef);\n    _dir = inject(Directionality, { optional: true });\n    /** Current padding value applied to the element. Used to avoid unnecessarily hitting the DOM. */\n    _currentPadding;\n    /** Subject that emits when the component has been destroyed. */\n    _destroyed = new Subject();\n    /** CSS units used for the indentation value. */\n    indentUnits = 'px';\n    /** The level of depth of the tree node. The padding will be `level * indent` pixels. */\n    get level() {\n        return this._level;\n    }\n    set level(value) {\n        this._setLevelInput(value);\n    }\n    _level;\n    /**\n     * The indent for each level. Can be a number or a CSS string.\n     * Default number 40px from material design menu sub-menu spec.\n     */\n    get indent() {\n        return this._indent;\n    }\n    set indent(indent) {\n        this._setIndentInput(indent);\n    }\n    _indent = 40;\n    constructor() {\n        this._setPadding();\n        this._dir?.change.pipe(takeUntil(this._destroyed)).subscribe(() => this._setPadding(true));\n        // In Ivy the indentation binding might be set before the tree node's data has been added,\n        // which means that we'll miss the first render. We have to subscribe to changes in the\n        // data to ensure that everything is up to date.\n        this._treeNode._dataChanges.subscribe(() => this._setPadding());\n    }\n    ngOnDestroy() {\n        this._destroyed.next();\n        this._destroyed.complete();\n    }\n    /** The padding indent value for the tree node. Returns a string with px numbers if not null. */\n    _paddingIndent() {\n        const nodeLevel = (this._treeNode.data && this._tree._getLevel(this._treeNode.data)) ?? null;\n        const level = this._level == null ? nodeLevel : this._level;\n        return typeof level === 'number' ? `${level * this._indent}${this.indentUnits}` : null;\n    }\n    _setPadding(forceChange = false) {\n        const padding = this._paddingIndent();\n        if (padding !== this._currentPadding || forceChange) {\n            const element = this._element.nativeElement;\n            const paddingProp = this._dir && this._dir.value === 'rtl' ? 'paddingRight' : 'paddingLeft';\n            const resetProp = paddingProp === 'paddingLeft' ? 'paddingRight' : 'paddingLeft';\n            element.style[paddingProp] = padding || '';\n            element.style[resetProp] = '';\n            this._currentPadding = padding;\n        }\n    }\n    /**\n     * This has been extracted to a util because of TS 4 and VE.\n     * View Engine doesn't support property rename inheritance.\n     * TS 4.0 doesn't allow properties to override accessors or vice-versa.\n     * @docs-private\n     */\n    _setLevelInput(value) {\n        // Set to null as the fallback value so that _setPadding can fall back to the node level if the\n        // consumer set the directive as `cdkTreeNodePadding=\"\"`. We still want to take this value if\n        // they set 0 explicitly.\n        this._level = isNaN(value) ? null : value;\n        this._setPadding();\n    }\n    /**\n     * This has been extracted to a util because of TS 4 and VE.\n     * View Engine doesn't support property rename inheritance.\n     * TS 4.0 doesn't allow properties to override accessors or vice-versa.\n     * @docs-private\n     */\n    _setIndentInput(indent) {\n        let value = indent;\n        let units = 'px';\n        if (typeof indent === 'string') {\n            const parts = indent.split(cssUnitPattern);\n            value = parts[0];\n            units = parts[1] || units;\n        }\n        this.indentUnits = units;\n        this._indent = numberAttribute(value);\n        this._setPadding();\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNodePadding, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"16.1.0\", version: \"19.0.0\", type: CdkTreeNodePadding, isStandalone: true, selector: \"[cdkTreeNodePadding]\", inputs: { level: [\"cdkTreeNodePadding\", \"level\", numberAttribute], indent: [\"cdkTreeNodePaddingIndent\", \"indent\"] }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNodePadding, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkTreeNodePadding]',\n                }]\n        }], ctorParameters: () => [], propDecorators: { level: [{\n                type: Input,\n                args: [{ alias: 'cdkTreeNodePadding', transform: numberAttribute }]\n            }], indent: [{\n                type: Input,\n                args: ['cdkTreeNodePaddingIndent']\n            }] } });\n\n/**\n * Node toggle to expand and collapse the node.\n */\nclass CdkTreeNodeToggle {\n    _tree = inject(CdkTree);\n    _treeNode = inject(CdkTreeNode);\n    /** Whether expand/collapse the node recursively. */\n    recursive = false;\n    constructor() { }\n    // Toggle the expanded or collapsed state of this node.\n    //\n    // Focus this node with expanding or collapsing it. This ensures that the active node will always\n    // be visible when expanding and collapsing.\n    _toggle() {\n        this.recursive\n            ? this._tree.toggleDescendants(this._treeNode.data)\n            : this._tree.toggle(this._treeNode.data);\n        this._tree._keyManager.focusItem(this._treeNode);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNodeToggle, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"16.1.0\", version: \"19.0.0\", type: CdkTreeNodeToggle, isStandalone: true, selector: \"[cdkTreeNodeToggle]\", inputs: { recursive: [\"cdkTreeNodeToggleRecursive\", \"recursive\", booleanAttribute] }, host: { attributes: { \"tabindex\": \"-1\" }, listeners: { \"click\": \"_toggle(); $event.stopPropagation();\", \"keydown.Enter\": \"_toggle(); $event.preventDefault();\", \"keydown.Space\": \"_toggle(); $event.preventDefault();\" } }, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeNodeToggle, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkTreeNodeToggle]',\n                    host: {\n                        '(click)': '_toggle(); $event.stopPropagation();',\n                        '(keydown.Enter)': '_toggle(); $event.preventDefault();',\n                        '(keydown.Space)': '_toggle(); $event.preventDefault();',\n                        'tabindex': '-1',\n                    },\n                }]\n        }], ctorParameters: () => [], propDecorators: { recursive: [{\n                type: Input,\n                args: [{ alias: 'cdkTreeNodeToggleRecursive', transform: booleanAttribute }]\n            }] } });\n\nconst EXPORTED_DECLARATIONS = [\n    CdkNestedTreeNode,\n    CdkTreeNodeDef,\n    CdkTreeNodePadding,\n    CdkTreeNodeToggle,\n    CdkTree,\n    CdkTreeNode,\n    CdkTreeNodeOutlet,\n];\nclass CdkTreeModule {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeModule, deps: [], target: i0.FactoryTarget.NgModule });\n    static mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeModule, imports: [CdkNestedTreeNode,\n            CdkTreeNodeDef,\n            CdkTreeNodePadding,\n            CdkTreeNodeToggle,\n            CdkTree,\n            CdkTreeNode,\n            CdkTreeNodeOutlet], exports: [CdkNestedTreeNode,\n            CdkTreeNodeDef,\n            CdkTreeNodePadding,\n            CdkTreeNodeToggle,\n            CdkTree,\n            CdkTreeNode,\n            CdkTreeNodeOutlet] });\n    static inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeModule });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: CdkTreeModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: EXPORTED_DECLARATIONS,\n                    exports: EXPORTED_DECLARATIONS,\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BaseTreeControl, CDK_TREE_NODE_OUTLET_NODE, CdkNestedTreeNode, CdkTree, CdkTreeModule, CdkTreeNode, CdkTreeNodeDef, CdkTreeNodeOutlet, CdkTreeNodeOutletContext, CdkTreeNodePadding, CdkTreeNodeToggle, FlatTreeControl, NestedTreeControl, getMultipleTreeControlsError, getTreeControlMissingError, getTreeMissingMatchingNodeDefError, getTreeMultipleDefaultNodeDefsError, getTreeNoValidDataSourceError };\n","import { CdkTreeNode, CdkTreeNodeDef, CdkNestedTreeNode, CDK_TREE_NODE_OUTLET_NODE, CdkTreeNodePadding, CdkTreeNodeOutlet, CdkTree, CdkTreeNodeToggle, CdkTreeModule } from '@angular/cdk/tree';\nimport * as i0 from '@angular/core';\nimport { inject, HostAttributeToken, numberAttribute, booleanAttribute, Directive, Input, ViewContainerRef, Component, ViewEncapsulation, ChangeDetectionStrategy, ViewChild, NgModule } from '@angular/core';\nimport { MatCommonModule } from '@angular/material/core';\nimport { DataSource } from '@angular/cdk/collections';\nimport { BehaviorSubject, merge } from 'rxjs';\nimport { take, map } from 'rxjs/operators';\n\n/**\n * Determinte if argument TreeKeyManager is the NoopTreeKeyManager. This function is safe to use with SSR.\n */\nfunction isNoopTreeKeyManager(keyManager) {\n    return !!keyManager._isNoopTreeKeyManager;\n}\n/**\n * Wrapper for the CdkTree node with Material design styles.\n */\nclass MatTreeNode extends CdkTreeNode {\n    /**\n     * The tabindex of the tree node.\n     *\n     * @deprecated By default MatTreeNode manages focus using TreeKeyManager instead of tabIndex.\n     *   Recommend to avoid setting tabIndex directly to prevent TreeKeyManager form getting into\n     *   an unexpected state. Tabindex to be removed in a future version.\n     * @breaking-change 21.0.0 Remove this attribute.\n     */\n    get tabIndexInputBinding() {\n        return this._tabIndexInputBinding;\n    }\n    set tabIndexInputBinding(value) {\n        // If the specified tabIndex value is null or undefined, fall back to the default value.\n        this._tabIndexInputBinding = value;\n    }\n    _tabIndexInputBinding;\n    /**\n     * The default tabindex of the tree node.\n     *\n     * @deprecated By default MatTreeNode manages focus using TreeKeyManager instead of tabIndex.\n     *   Recommend to avoid setting tabIndex directly to prevent TreeKeyManager form getting into\n     *   an unexpected state. Tabindex to be removed in a future version.\n     * @breaking-change 21.0.0 Remove this attribute.\n     */\n    defaultTabIndex = 0;\n    _getTabindexAttribute() {\n        if (isNoopTreeKeyManager(this._tree._keyManager)) {\n            return this.tabIndexInputBinding;\n        }\n        return this._tabindex;\n    }\n    /**\n     * Whether the component is disabled.\n     *\n     * @deprecated This is an alias for `isDisabled`.\n     * @breaking-change 21.0.0 Remove this input\n     */\n    get disabled() {\n        return this.isDisabled;\n    }\n    set disabled(value) {\n        this.isDisabled = value;\n    }\n    constructor() {\n        super();\n        const tabIndex = inject(new HostAttributeToken('tabindex'), { optional: true });\n        this.tabIndexInputBinding = Number(tabIndex) || this.defaultTabIndex;\n    }\n    // This is a workaround for https://github.com/angular/angular/issues/23091\n    // In aot mode, the lifecycle hooks from parent class are not called.\n    ngOnInit() {\n        super.ngOnInit();\n    }\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNode, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"16.1.0\", version: \"19.0.0\", type: MatTreeNode, isStandalone: true, selector: \"mat-tree-node\", inputs: { tabIndexInputBinding: [\"tabIndex\", \"tabIndexInputBinding\", (value) => (value == null ? 0 : numberAttribute(value))], disabled: [\"disabled\", \"disabled\", booleanAttribute] }, outputs: { activation: \"activation\", expandedChange: \"expandedChange\" }, host: { listeners: { \"click\": \"_focusItem()\" }, properties: { \"attr.aria-expanded\": \"_getAriaExpanded()\", \"attr.aria-level\": \"level + 1\", \"attr.aria-posinset\": \"_getPositionInSet()\", \"attr.aria-setsize\": \"_getSetSize()\", \"tabindex\": \"_getTabindexAttribute()\" }, classAttribute: \"mat-tree-node\" }, providers: [{ provide: CdkTreeNode, useExisting: MatTreeNode }], exportAs: [\"matTreeNode\"], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNode, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'mat-tree-node',\n                    exportAs: 'matTreeNode',\n                    outputs: ['activation', 'expandedChange'],\n                    providers: [{ provide: CdkTreeNode, useExisting: MatTreeNode }],\n                    host: {\n                        'class': 'mat-tree-node',\n                        '[attr.aria-expanded]': '_getAriaExpanded()',\n                        '[attr.aria-level]': 'level + 1',\n                        '[attr.aria-posinset]': '_getPositionInSet()',\n                        '[attr.aria-setsize]': '_getSetSize()',\n                        '(click)': '_focusItem()',\n                        '[tabindex]': '_getTabindexAttribute()',\n                    },\n                }]\n        }], ctorParameters: () => [], propDecorators: { tabIndexInputBinding: [{\n                type: Input,\n                args: [{\n                        transform: (value) => (value == null ? 0 : numberAttribute(value)),\n                        alias: 'tabIndex',\n                    }]\n            }], disabled: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }] } });\n/**\n * Wrapper for the CdkTree node definition with Material design styles.\n * Captures the node's template and a when predicate that describes when this node should be used.\n */\nclass MatTreeNodeDef extends CdkTreeNodeDef {\n    data;\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNodeDef, deps: null, target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatTreeNodeDef, isStandalone: true, selector: \"[matTreeNodeDef]\", inputs: { when: [\"matTreeNodeDefWhen\", \"when\"], data: [\"matTreeNode\", \"data\"] }, providers: [{ provide: CdkTreeNodeDef, useExisting: MatTreeNodeDef }], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNodeDef, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matTreeNodeDef]',\n                    inputs: [{ name: 'when', alias: 'matTreeNodeDefWhen' }],\n                    providers: [{ provide: CdkTreeNodeDef, useExisting: MatTreeNodeDef }],\n                }]\n        }], propDecorators: { data: [{\n                type: Input,\n                args: ['matTreeNode']\n            }] } });\n/**\n * Wrapper for the CdkTree nested node with Material design styles.\n */\nclass MatNestedTreeNode extends CdkNestedTreeNode {\n    node;\n    /**\n     * Whether the node is disabled.\n     *\n     * @deprecated This is an alias for `isDisabled`.\n     * @breaking-change 21.0.0 Remove this input\n     */\n    get disabled() {\n        return this.isDisabled;\n    }\n    set disabled(value) {\n        this.isDisabled = value;\n    }\n    /** Tabindex of the node. */\n    get tabIndex() {\n        return this.isDisabled ? -1 : this._tabIndex;\n    }\n    set tabIndex(value) {\n        // If the specified tabIndex value is null or undefined, fall back to the default value.\n        this._tabIndex = value;\n    }\n    _tabIndex;\n    // This is a workaround for https://github.com/angular/angular/issues/19145\n    // In aot mode, the lifecycle hooks from parent class are not called.\n    // TODO(tinayuangao): Remove when the angular issue #19145 is fixed\n    ngOnInit() {\n        super.ngOnInit();\n    }\n    ngAfterContentInit() {\n        super.ngAfterContentInit();\n    }\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatNestedTreeNode, deps: null, target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"16.1.0\", version: \"19.0.0\", type: MatNestedTreeNode, isStandalone: true, selector: \"mat-nested-tree-node\", inputs: { node: [\"matNestedTreeNode\", \"node\"], disabled: [\"disabled\", \"disabled\", booleanAttribute], tabIndex: [\"tabIndex\", \"tabIndex\", (value) => (value == null ? 0 : numberAttribute(value))] }, outputs: { activation: \"activation\", expandedChange: \"expandedChange\" }, host: { classAttribute: \"mat-nested-tree-node\" }, providers: [\n            { provide: CdkNestedTreeNode, useExisting: MatNestedTreeNode },\n            { provide: CdkTreeNode, useExisting: MatNestedTreeNode },\n            { provide: CDK_TREE_NODE_OUTLET_NODE, useExisting: MatNestedTreeNode },\n        ], exportAs: [\"matNestedTreeNode\"], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatNestedTreeNode, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'mat-nested-tree-node',\n                    exportAs: 'matNestedTreeNode',\n                    outputs: ['activation', 'expandedChange'],\n                    providers: [\n                        { provide: CdkNestedTreeNode, useExisting: MatNestedTreeNode },\n                        { provide: CdkTreeNode, useExisting: MatNestedTreeNode },\n                        { provide: CDK_TREE_NODE_OUTLET_NODE, useExisting: MatNestedTreeNode },\n                    ],\n                    host: {\n                        'class': 'mat-nested-tree-node',\n                    },\n                }]\n        }], propDecorators: { node: [{\n                type: Input,\n                args: ['matNestedTreeNode']\n            }], disabled: [{\n                type: Input,\n                args: [{ transform: booleanAttribute }]\n            }], tabIndex: [{\n                type: Input,\n                args: [{\n                        transform: (value) => (value == null ? 0 : numberAttribute(value)),\n                    }]\n            }] } });\n\n/**\n * Wrapper for the CdkTree padding with Material design styles.\n */\nclass MatTreeNodePadding extends CdkTreeNodePadding {\n    /** The level of depth of the tree node. The padding will be `level * indent` pixels. */\n    get level() {\n        return this._level;\n    }\n    set level(value) {\n        this._setLevelInput(value);\n    }\n    /** The indent for each level. Default number 40px from material design menu sub-menu spec. */\n    get indent() {\n        return this._indent;\n    }\n    set indent(indent) {\n        this._setIndentInput(indent);\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNodePadding, deps: null, target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"16.1.0\", version: \"19.0.0\", type: MatTreeNodePadding, isStandalone: true, selector: \"[matTreeNodePadding]\", inputs: { level: [\"matTreeNodePadding\", \"level\", numberAttribute], indent: [\"matTreeNodePaddingIndent\", \"indent\"] }, providers: [{ provide: CdkTreeNodePadding, useExisting: MatTreeNodePadding }], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNodePadding, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matTreeNodePadding]',\n                    providers: [{ provide: CdkTreeNodePadding, useExisting: MatTreeNodePadding }],\n                }]\n        }], propDecorators: { level: [{\n                type: Input,\n                args: [{ alias: 'matTreeNodePadding', transform: numberAttribute }]\n            }], indent: [{\n                type: Input,\n                args: ['matTreeNodePaddingIndent']\n            }] } });\n\n/**\n * Outlet for nested CdkNode. Put `[matTreeNodeOutlet]` on a tag to place children dataNodes\n * inside the outlet.\n */\nclass MatTreeNodeOutlet {\n    viewContainer = inject(ViewContainerRef);\n    _node = inject(CDK_TREE_NODE_OUTLET_NODE, { optional: true });\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNodeOutlet, deps: [], target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatTreeNodeOutlet, isStandalone: true, selector: \"[matTreeNodeOutlet]\", providers: [\n            {\n                provide: CdkTreeNodeOutlet,\n                useExisting: MatTreeNodeOutlet,\n            },\n        ], ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNodeOutlet, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matTreeNodeOutlet]',\n                    providers: [\n                        {\n                            provide: CdkTreeNodeOutlet,\n                            useExisting: MatTreeNodeOutlet,\n                        },\n                    ],\n                }]\n        }] });\n\n/**\n * Wrapper for the CdkTable with Material design styles.\n */\nclass MatTree extends CdkTree {\n    // Outlets within the tree's template where the dataNodes will be inserted.\n    // We need an initializer here to avoid a TS error. The value will be set in `ngAfterViewInit`.\n    _nodeOutlet = undefined;\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTree, deps: null, target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatTree, isStandalone: true, selector: \"mat-tree\", host: { classAttribute: \"mat-tree\" }, providers: [{ provide: CdkTree, useExisting: MatTree }], viewQueries: [{ propertyName: \"_nodeOutlet\", first: true, predicate: MatTreeNodeOutlet, descendants: true, static: true }], exportAs: [\"matTree\"], usesInheritance: true, ngImport: i0, template: `<ng-container matTreeNodeOutlet></ng-container>`, isInline: true, styles: [\".mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-sys-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-sys-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-sys-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height, 48px)}.mat-nested-tree-node{border-bottom-width:0}\"], dependencies: [{ kind: \"directive\", type: MatTreeNodeOutlet, selector: \"[matTreeNodeOutlet]\" }], changeDetection: i0.ChangeDetectionStrategy.Default, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTree, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-tree', exportAs: 'matTree', template: `<ng-container matTreeNodeOutlet></ng-container>`, host: {\n                        'class': 'mat-tree',\n                    }, encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.Default, providers: [{ provide: CdkTree, useExisting: MatTree }], imports: [MatTreeNodeOutlet], styles: [\".mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-sys-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-sys-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-sys-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height, 48px)}.mat-nested-tree-node{border-bottom-width:0}\"] }]\n        }], propDecorators: { _nodeOutlet: [{\n                type: ViewChild,\n                args: [MatTreeNodeOutlet, { static: true }]\n            }] } });\n\n/**\n * Wrapper for the CdkTree's toggle with Material design styles.\n */\nclass MatTreeNodeToggle extends CdkTreeNodeToggle {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNodeToggle, deps: null, target: i0.FactoryTarget.Directive });\n    static dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"19.0.0\", type: MatTreeNodeToggle, isStandalone: true, selector: \"[matTreeNodeToggle]\", inputs: { recursive: [\"matTreeNodeToggleRecursive\", \"recursive\"] }, providers: [{ provide: CdkTreeNodeToggle, useExisting: MatTreeNodeToggle }], usesInheritance: true, ngImport: i0 });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeNodeToggle, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[matTreeNodeToggle]',\n                    providers: [{ provide: CdkTreeNodeToggle, useExisting: MatTreeNodeToggle }],\n                    inputs: [{ name: 'recursive', alias: 'matTreeNodeToggleRecursive' }],\n                }]\n        }] });\n\nconst MAT_TREE_DIRECTIVES = [\n    MatNestedTreeNode,\n    MatTreeNodeDef,\n    MatTreeNodePadding,\n    MatTreeNodeToggle,\n    MatTree,\n    MatTreeNode,\n    MatTreeNodeOutlet,\n];\nclass MatTreeModule {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeModule, deps: [], target: i0.FactoryTarget.NgModule });\n    static mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeModule, imports: [CdkTreeModule, MatCommonModule, MatNestedTreeNode,\n            MatTreeNodeDef,\n            MatTreeNodePadding,\n            MatTreeNodeToggle,\n            MatTree,\n            MatTreeNode,\n            MatTreeNodeOutlet], exports: [MatCommonModule, MatNestedTreeNode,\n            MatTreeNodeDef,\n            MatTreeNodePadding,\n            MatTreeNodeToggle,\n            MatTree,\n            MatTreeNode,\n            MatTreeNodeOutlet] });\n    static inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeModule, imports: [CdkTreeModule, MatCommonModule, MatCommonModule] });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatTreeModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CdkTreeModule, MatCommonModule, ...MAT_TREE_DIRECTIVES],\n                    exports: [MatCommonModule, MAT_TREE_DIRECTIVES],\n                }]\n        }] });\n\n/**\n * Tree flattener to convert a normal type of node to node with children & level information.\n * Transform nested nodes of type `T` to flattened nodes of type `F`.\n *\n * For example, the input data of type `T` is nested, and contains its children data:\n *   SomeNode: {\n *     key: 'Fruits',\n *     children: [\n *       NodeOne: {\n *         key: 'Apple',\n *       },\n *       NodeTwo: {\n *        key: 'Pear',\n *      }\n *    ]\n *  }\n *  After flattener flatten the tree, the structure will become\n *  SomeNode: {\n *    key: 'Fruits',\n *    expandable: true,\n *    level: 1\n *  },\n *  NodeOne: {\n *    key: 'Apple',\n *    expandable: false,\n *    level: 2\n *  },\n *  NodeTwo: {\n *   key: 'Pear',\n *   expandable: false,\n *   level: 2\n * }\n * and the output flattened type is `F` with additional information.\n *\n * @deprecated Use MatTree#childrenAccessor and MatTreeNode#isExpandable\n * instead. To be removed in a future version.\n * @breaking-change 21.0.0\n */\nclass MatTreeFlattener {\n    transformFunction;\n    getLevel;\n    isExpandable;\n    getChildren;\n    constructor(transformFunction, getLevel, isExpandable, getChildren) {\n        this.transformFunction = transformFunction;\n        this.getLevel = getLevel;\n        this.isExpandable = isExpandable;\n        this.getChildren = getChildren;\n    }\n    _flattenNode(node, level, resultNodes, parentMap) {\n        const flatNode = this.transformFunction(node, level);\n        resultNodes.push(flatNode);\n        if (this.isExpandable(flatNode)) {\n            const childrenNodes = this.getChildren(node);\n            if (childrenNodes) {\n                if (Array.isArray(childrenNodes)) {\n                    this._flattenChildren(childrenNodes, level, resultNodes, parentMap);\n                }\n                else {\n                    childrenNodes.pipe(take(1)).subscribe(children => {\n                        this._flattenChildren(children, level, resultNodes, parentMap);\n                    });\n                }\n            }\n        }\n        return resultNodes;\n    }\n    _flattenChildren(children, level, resultNodes, parentMap) {\n        children.forEach((child, index) => {\n            let childParentMap = parentMap.slice();\n            childParentMap.push(index != children.length - 1);\n            this._flattenNode(child, level + 1, resultNodes, childParentMap);\n        });\n    }\n    /**\n     * Flatten a list of node type T to flattened version of node F.\n     * Please note that type T may be nested, and the length of `structuredData` may be different\n     * from that of returned list `F[]`.\n     */\n    flattenNodes(structuredData) {\n        let resultNodes = [];\n        structuredData.forEach(node => this._flattenNode(node, 0, resultNodes, []));\n        return resultNodes;\n    }\n    /**\n     * Expand flattened node with current expansion status.\n     * The returned list may have different length.\n     */\n    expandFlattenedNodes(nodes, treeControl) {\n        let results = [];\n        let currentExpand = [];\n        currentExpand[0] = true;\n        nodes.forEach(node => {\n            let expand = true;\n            for (let i = 0; i <= this.getLevel(node); i++) {\n                expand = expand && currentExpand[i];\n            }\n            if (expand) {\n                results.push(node);\n            }\n            if (this.isExpandable(node)) {\n                currentExpand[this.getLevel(node) + 1] = treeControl.isExpanded(node);\n            }\n        });\n        return results;\n    }\n}\n/**\n * Data source for flat tree.\n * The data source need to handle expansion/collapsion of the tree node and change the data feed\n * to `MatTree`.\n * The nested tree nodes of type `T` are flattened through `MatTreeFlattener`, and converted\n * to type `F` for `MatTree` to consume.\n *\n * @deprecated Use one of levelAccessor or childrenAccessor instead. To be removed in a future\n * version.\n * @breaking-change 21.0.0\n */\nclass MatTreeFlatDataSource extends DataSource {\n    _treeControl;\n    _treeFlattener;\n    _flattenedData = new BehaviorSubject([]);\n    _expandedData = new BehaviorSubject([]);\n    get data() {\n        return this._data.value;\n    }\n    set data(value) {\n        this._data.next(value);\n        this._flattenedData.next(this._treeFlattener.flattenNodes(this.data));\n        this._treeControl.dataNodes = this._flattenedData.value;\n    }\n    _data = new BehaviorSubject([]);\n    constructor(_treeControl, _treeFlattener, initialData) {\n        super();\n        this._treeControl = _treeControl;\n        this._treeFlattener = _treeFlattener;\n        if (initialData) {\n            // Assign the data through the constructor to ensure that all of the logic is executed.\n            this.data = initialData;\n        }\n    }\n    connect(collectionViewer) {\n        return merge(collectionViewer.viewChange, this._treeControl.expansionModel.changed, this._flattenedData).pipe(map(() => {\n            this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value, this._treeControl));\n            return this._expandedData.value;\n        }));\n    }\n    disconnect() {\n        // no op\n    }\n}\n\n/**\n * Data source for nested tree.\n *\n * The data source for nested tree doesn't have to consider node flattener, or the way to expand\n * or collapse. The expansion/collapsion will be handled by TreeControl and each non-leaf node.\n */\nclass MatTreeNestedDataSource extends DataSource {\n    /**\n     * Data for the nested tree\n     */\n    get data() {\n        return this._data.value;\n    }\n    set data(value) {\n        this._data.next(value);\n    }\n    _data = new BehaviorSubject([]);\n    connect(collectionViewer) {\n        return merge(...[collectionViewer.viewChange, this._data]).pipe(map(() => this.data));\n    }\n    disconnect() {\n        // no op\n    }\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MatNestedTreeNode, MatTree, MatTreeFlatDataSource, MatTreeFlattener, MatTreeModule, MatTreeNestedDataSource, MatTreeNode, MatTreeNodeDef, MatTreeNodeOutlet, MatTreeNodePadding, MatTreeNodeToggle };\n","import { Component, inject } from '@angular/core';\r\nimport { FieldSettingsPickerMerged } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../edit-types/src/PickerSources';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { computedObj } from '../../../shared/signals/signal.utilities';\r\nimport { FieldState } from '../../fields/field-state';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\n\r\n/**\r\n * Base class for Picker Part Components.\r\n */\r\n@Component({\r\n  selector: 'app-picker-part-base',\r\n  template: '',\r\n})\r\nexport class PickerPartBaseComponent {\r\n\r\n  //#region Setup: Logging, inject, constructor\r\n\r\n  log = classLog({PickerPartBaseComponent});\r\n\r\n  /** Entire Field State */\r\n  protected fieldState = inject(FieldState) as FieldState<FieldValue, FieldSettingsWithPickerSource & FieldSettingsPickerMerged>;\r\n\r\n  /** Routing service to open edit-dialogs for entities where necessary */\r\n  editRoutingService = inject(EditRoutingService);\r\n\r\n  constructor() { }\r\n\r\n  //#endregion\r\n\r\n  //#region Settings - simple values\r\n\r\n  protected enableTextEntry = this.fieldState.settingExt('EnableTextEntry');\r\n\r\n  //#endregion\r\n\r\n  /** Picker Data Bundle with Source and state etc. */\r\n  protected pickerData = this.fieldState.pickerData;\r\n\r\n  protected isInFreeTextMode = this.pickerData.isInFreeTextMode;\r\n\r\n  protected ui = this.fieldState.ui;\r\n\r\n  /** All Selected Items */\r\n  protected selectedItems = this.pickerData.selectedAll;\r\n  protected selectedItem = this.pickerData.selectedOne;\r\n  itemCount = computedObj('itemCount', () => this.selectedItems().length);\r\n\r\n  /** Field Configuration - from field state */\r\n  protected config = this.fieldState.config;\r\n\r\n  /** Label and other basics to show from the picker data. Is not auto-attached, since it's not the initial/top-level component. */\r\n  protected basics = this.fieldState.basics;\r\n\r\n  /** Features */\r\n  protected features = this.pickerData.features;\r\n\r\n  //#region CRUD style operations\r\n\r\n  expandDialog() {\r\n    const config = this.fieldState.config;\r\n    if (config.initialDisabled) return;\r\n    this.editRoutingService.expand(true, config.index, config.entityGuid);\r\n  }\r\n\r\n  openNewEntityDialog(entityType: string): void {\r\n    this.log.a(`openNewEntityDialog: '${entityType}'`);\r\n    this.pickerData.source.editItem(null, entityType);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  toggleFreeText(disabled: boolean): void {\r\n    this.log.a(`toggleFreeText ${disabled}`);\r\n    if (disabled) return;\r\n    this.pickerData.toggleFreeTextMode();\r\n  }\r\n}\r\n","\r\n@if (buttons().edit)\r\n{\r\n  <!-- Disable edit only if it was disabled in the settings, not if disabled by language change -->\r\n  <!-- note: not sure if the above comment is applied in this code, as it still uses ui().disabled -->\r\n  <button\r\n    mat-icon-button\r\n    matSuffix\r\n    class=\"picker-inline-button\"\r\n    tippyTranslate=\"Fields.Picker.Edit\"\r\n    [disabled]=\"ui().disabled || config.initialDisabled\"\r\n    appClickStopPropagation\r\n    (click)=\"edit(item().value, item().id)\"\r\n  >\r\n    <mat-icon>edit</mat-icon>\r\n  </button>\r\n}\r\n\r\n@if (buttons().remove)\r\n{\r\n  <button\r\n    mat-icon-button\r\n    matSuffix\r\n    class=\"picker-inline-button\"\r\n    tippyTranslate=\"Fields.Picker.Remove\"\r\n    [disabled]=\"ui().disabled\"\r\n    appClickStopPropagation\r\n    (click)=\"removeItem(index())\"\r\n  >\r\n    <mat-icon>do_not_disturb_on</mat-icon>\r\n  </button>\r\n}\r\n\r\n\r\n@if (buttons().delete)\r\n{\r\n  <button\r\n    mat-icon-button\r\n    matSuffix\r\n    class=\"picker-inline-button\"\r\n    tippyTranslate=\"Fields.Picker.Delete\"\r\n    [disabled]=\"ui().disabled\"\r\n    appClickStopPropagation\r\n    (click)=\"deleteItem(index(), item().value)\"\r\n  >\r\n    <mat-icon>delete</mat-icon>\r\n  </button>\r\n}\r\n","import { Component, input } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerFeaturesItem } from '../picker-features.model';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\n\r\n@Component({\r\n    selector: 'app-picker-item-buttons',\r\n    templateUrl: './picker-item-buttons.component.html',\r\n    styleUrl: './picker-item-buttons.component.scss',\r\n    imports: [\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n        ClickStopPropagationDirective,\r\n    ]\r\n})\r\nexport class PickerItemButtonsComponent extends PickerPartBaseComponent {\r\n\r\n  /** The item to show the label/buttons for */\r\n  item = input.required<PickerItem>();\r\n  \r\n  /** The item index, important for certain button actions */\r\n  index = input.required<number>();\r\n\r\n  /** If the buttons should show or not - I believe ATM it's always true */\r\n  show = input.required<boolean>();\r\n\r\n  /** UI Features can let the control determine that certain buttons shouldn't be available, eg. \"remove\" on radio-button */\r\n  uiFeatures = input<Partial<PickerFeaturesItem>>(null);\r\n\r\n  constructor() { super(); }\r\n\r\n  /** Current applicable settings like \"enableEdit\" etc. */\r\n  buttons = computedObj('buttons', () => {\r\n    // note that selected can be null, since a item in the list can be null\r\n    const item = this.item();\r\n    const show = this.show() && !!item;\r\n    const f = this.features();\r\n    const uif = this.uiFeatures();\r\n    return {\r\n      edit: f.edit && uif?.edit != false && show && !item?.noEdit,\r\n      remove: f.remove && uif?.remove != false && show && !item?.noRemove,\r\n      delete: f.delete && uif?.delete != false && show && !item?.noDelete,\r\n    };\r\n  });\r\n  \r\n\r\n  edit(entityGuid: string, entityId: number): void {\r\n    this.log.a(`edit guid: '${entityGuid}'; id: '${entityId}'`);\r\n    this.pickerData.source.editItem({ entityGuid, entityId }, null);\r\n  }\r\n\r\n  removeItem(index: number): void {\r\n    this.log.a(`removeItem index: '${index}'`);\r\n    this.pickerData.state.remove(index);\r\n  }\r\n\r\n  deleteItem(index: number, entityGuid: string): void {\r\n    this.log.a(`deleteItem index: '${index}'; entityGuid: '${entityGuid}'`);\r\n    this.pickerData.source.deleteItem({ index, entityGuid });\r\n  }\r\n\r\n}\r\n","@if (helpLink()) {\r\n  <mat-icon (click)=\"goToLink()\" [tippy]=\"helpLink()\" appClickStopPropagation>open_in_new</mat-icon>\r\n}","import { Component, input } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n    selector: 'app-picker-help',\r\n    imports: [\r\n        MatIconModule,\r\n        TippyDirective,\r\n        ClickStopPropagationDirective,\r\n    ],\r\n    templateUrl: './picker-icon-help.component.html'\r\n})\r\nexport class PickerIconHelpComponent {\r\n  helpLink = input<string>();\r\n\r\n  goToLink(): void {\r\n    window.open(this.helpLink(), '_blank');\r\n  }\r\n}\r\n","@if (infoBox()) {\r\n  <mat-icon [tippy]=\"infoBox()\" [tippyAllowHtml]=\"true\" [tippyArrow]=\"true\" tippyFontSize=\"larger\" appClickStopPropagation>\r\n    info\r\n  </mat-icon>\r\n}\r\n","import { Component, input } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n    selector: 'app-picker-icon-info',\r\n    imports: [\r\n        MatIconModule,\r\n        TippyDirective,\r\n        ClickStopPropagationDirective,\r\n    ],\r\n    templateUrl: './picker-icon-info.component.html'\r\n})\r\nexport class PickerIconInfoComponent {\r\n  infoBox = input<string>();\r\n}\r\n","import { isPlatformServer, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, PLATFORM_ID, ElementRef, Component, Inject, Input, ViewChild, isDevMode, Injectable, TemplateRef, Directive, NgModule } from '@angular/core';\nimport tippy, { hideAll, createSingleton } from 'tippy.js';\nimport { Subject } from 'rxjs';\n\nconst messagesDict = {\n    instanceAlreadyExist: `Instance with name #tippyName already exist, please pick unique [tippyName]`,\n    instanceNotExist: `Instance with name #tippyName does not exist`,\n    childrenInstancesNotFoundGrouped: `No children tippy instances found within 'ngx-tippy-group' component`,\n    childrenInstancesNotFoundSingleton: `No children tippy instances found within 'ngx-tippy-singleton' component`,\n    singletonInstanceAlreadyExist: `Singleton instance with name #singletonName already exist, please pick unique [singletonName]`,\n};\n\nconst tippyFakeInstance = {\n    clearDelayTimeouts: () => { },\n    destroy: () => { },\n    disable: () => { },\n    enable: () => { },\n    hide: () => { },\n    hideWithInteractivity: () => { },\n    id: 0,\n    plugins: [\n        {\n            name: 'followCursor',\n            defaultValue: false,\n        },\n    ],\n    popper: {\n        state: {},\n    },\n    popperInstance: {},\n    props: {},\n    reference: {},\n    setContent: () => { },\n    setProps: () => { },\n    show: () => { },\n    state: {\n        isEnabled: true,\n        isVisible: true,\n        isDestroyed: false,\n        isMounted: true,\n        isShown: false,\n    },\n    unmount: () => { },\n};\n\nconst NGX_TIPPY_MESSAGES = new InjectionToken('NGX_TIPPY_MESSAGES', {\n    providedIn: 'root',\n    factory: () => messagesDict,\n});\nconst TIPPY_FAKE_INSTANCE = new InjectionToken('TIPPY_FAKE_INSTANCE', {\n    providedIn: 'root',\n    factory: () => tippyFakeInstance,\n});\nconst NGX_TIPPY_CONFIG = new InjectionToken('NGX_TIPPY_CONFIG', {\n    providedIn: 'root',\n    factory: () => ({}),\n});\n\n/**\n * Different tooltip content to many different elements, but only one tippy instance\n */\nclass NgxTippyGroupComponent {\n    constructor(platform, messagesDict, ngxTippyConfig) {\n        this.platform = platform;\n        this.messagesDict = messagesDict;\n        this.ngxTippyConfig = ngxTippyConfig;\n    }\n    ngAfterViewInit() {\n        if (isPlatformServer(this.platform))\n            return;\n        this.setTooltips();\n    }\n    setTooltips() {\n        const contentWrapperNativeEl = this.contentWrapper.nativeElement;\n        const tooltips = Array.from(contentWrapperNativeEl.querySelectorAll('[data-tippy-grouped]'));\n        if (tooltips.length) {\n            this.initTippy(tooltips);\n        }\n        else {\n            throw new Error(this.messagesDict.childrenInstancesNotFoundGrouped);\n        }\n    }\n    initTippy(tooltips) {\n        tippy(tooltips, {\n            ...this.ngxTippyConfig,\n            ...this.groupedProps,\n        });\n    }\n}\nNgxTippyGroupComponent.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyGroupComponent, deps: [{ token: PLATFORM_ID }, { token: NGX_TIPPY_MESSAGES }, { token: NGX_TIPPY_CONFIG }], target: i0.FactoryTarget.Component });\nNgxTippyGroupComponent.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"14.2.12\", type: NgxTippyGroupComponent, selector: \"ngx-tippy-group\", inputs: { groupedProps: \"groupedProps\" }, viewQueries: [{ propertyName: \"contentWrapper\", first: true, predicate: [\"contentWrapper\"], descendants: true, read: ElementRef }], ngImport: i0, template: `\n    <div #contentWrapper>\n      <ng-content></ng-content>\n    </div>\n  `, isInline: true });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyGroupComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'ngx-tippy-group',\n                    template: `\n    <div #contentWrapper>\n      <ng-content></ng-content>\n    </div>\n  `,\n                }]\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_MESSAGES]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_CONFIG]\n                }] }]; }, propDecorators: { groupedProps: [{\n                type: Input\n            }], contentWrapper: [{\n                type: ViewChild,\n                args: ['contentWrapper', { read: ElementRef, static: false }]\n            }] } });\n\nclass DevModeService {\n    isDevMode() {\n        return isDevMode();\n    }\n}\nDevModeService.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: DevModeService, deps: [], target: i0.FactoryTarget.Injectable });\nDevModeService.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: DevModeService, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: DevModeService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\nvar InstanceChangeReasonEnum;\n(function (InstanceChangeReasonEnum) {\n    InstanceChangeReasonEnum[\"SetInstance\"] = \"setInstance\";\n    InstanceChangeReasonEnum[\"Show\"] = \"show\";\n    InstanceChangeReasonEnum[\"Hide\"] = \"hide\";\n    InstanceChangeReasonEnum[\"HideWithInteractivity\"] = \"hideWithInteractivity\";\n    InstanceChangeReasonEnum[\"Disable\"] = \"disable\";\n    InstanceChangeReasonEnum[\"Enable\"] = \"enable\";\n    InstanceChangeReasonEnum[\"SetProps\"] = \"setProps\";\n    InstanceChangeReasonEnum[\"SetContent\"] = \"setContent\";\n    InstanceChangeReasonEnum[\"Unmount\"] = \"unmount\";\n    InstanceChangeReasonEnum[\"ClearDelayTimeouts\"] = \"clearDelayTimeouts\";\n    InstanceChangeReasonEnum[\"Destroy\"] = \"destroy\";\n})(InstanceChangeReasonEnum || (InstanceChangeReasonEnum = {}));\nvar NgxTippyNamesEnum;\n(function (NgxTippyNamesEnum) {\n    NgxTippyNamesEnum[\"TippyName\"] = \"tippyName\";\n    NgxTippyNamesEnum[\"SingletonName\"] = \"singletonName\";\n})(NgxTippyNamesEnum || (NgxTippyNamesEnum = {}));\n\nclass CompRef {\n    constructor(args) {\n        this.args = args;\n        this.compRef = this.args.viewContainerRef.createComponent(this.args.component);\n    }\n    detectChanges() {\n        this.compRef?.changeDetectorRef.detectChanges();\n        return this;\n    }\n    getElement() {\n        return this.compRef?.location.nativeElement;\n    }\n    destroy() {\n        this.compRef?.destroy();\n        this.compRef = null;\n    }\n}\n\nconst isComponent = (value) => typeof value === 'function';\n\nconst isHTMLTemplate = (value) => value instanceof HTMLTemplateElement;\n\nconst isTemplateRef = (value) => value instanceof TemplateRef;\n\n/**\n * Set display: \"block\" for content wrapper element\n *\n * @param tippyContent  { NgxTippyContent }\n * @param renderer { Renderer2 }\n */\nconst setTemplateVisible = (tippyContent, renderer) => {\n    tippyContent && tippyContent instanceof Element && renderer.setStyle(tippyContent, 'display', 'block');\n};\n\nclass TplRef {\n    constructor(args) {\n        this.args = args;\n        this.viewRef = this.args.tpl.createEmbeddedView(this.args.context || {});\n        this.viewRef.detectChanges();\n        this.args.appRef.attachView(this.viewRef);\n    }\n    detectChanges() {\n        this.viewRef?.detectChanges();\n        return this;\n    }\n    getElement() {\n        if (!this.viewRef)\n            return null;\n        const rootNodes = this.viewRef.rootNodes;\n        if (rootNodes.length === 1 && rootNodes[0].nodeType === Node.ELEMENT_NODE) {\n            this.element = rootNodes[0];\n        }\n        else {\n            this.element = document.createElement('div');\n            this.element.append(...rootNodes);\n        }\n        return this.element;\n    }\n    destroy() {\n        if (!this.viewRef)\n            return;\n        if (this.viewRef.rootNodes[0] !== 1) {\n            this.element?.parentNode?.removeChild(this.element);\n            this.element = null;\n        }\n        this.viewRef.destroy();\n        this.viewRef = null;\n    }\n}\n\nclass NgxViewService {\n    constructor(appRef) {\n        this.appRef = appRef;\n    }\n    getViewRefInstance(content, tippyName, tippyContext = {}) {\n        let viewRef;\n        if (isTemplateRef(content)) {\n            tippyContext.$implicit = tippyName;\n            viewRef = this.createTemplate(content, tippyContext);\n        }\n        else if (isComponent(content)) {\n            viewRef = this.createComponent(content);\n        }\n        else if (isHTMLTemplate(content)) {\n            viewRef = {\n                getElement: () => content.content,\n            };\n        }\n        else {\n            viewRef = {\n                getElement: () => content,\n            };\n        }\n        return viewRef;\n    }\n    createTemplate(tpl, context) {\n        return new TplRef({\n            tpl,\n            context,\n            appRef: this.appRef,\n        });\n    }\n    createComponent(component) {\n        return new CompRef({\n            component,\n            viewContainerRef: this.viewContainerRef,\n        });\n    }\n}\nNgxViewService.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxViewService, deps: [{ token: i0.ApplicationRef }], target: i0.FactoryTarget.Injectable });\nNgxViewService.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxViewService, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxViewService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: i0.ApplicationRef }]; } });\n\nclass NgxTippyService {\n    constructor(rendererFactory, devModeService, ngxViewService, messagesDict) {\n        this.devModeService = devModeService;\n        this.ngxViewService = ngxViewService;\n        this.messagesDict = messagesDict;\n        this.tippyInstances = new Map();\n        this.tippySingletonEntryInstances = new Map();\n        this.tippyInstances$ = new Subject();\n        this.createRenderer(rendererFactory);\n    }\n    /**\n     * Working with storage\n     */\n    /**\n     * Write tippy instances to storage\n     *\n     * @param name { string } name of tippy instance\n     * @param state { NgxTippyInstance } tippy instance\n     */\n    setInstance(name, state) {\n        const instance = this.tippyInstances.get(name);\n        if (instance) {\n            const errMessage = this.getMessage({\n                reason: 'instanceAlreadyExist',\n                messageFor: NgxTippyNamesEnum.TippyName,\n                name,\n            });\n            this.throwError(errMessage);\n        }\n        else {\n            this.tippyInstances.set(name, state);\n            this.emitInstancesChange({\n                name,\n                reason: InstanceChangeReasonEnum.SetInstance,\n                instance: state,\n            });\n        }\n    }\n    /**\n     * Get specific tippy instance\n     *\n     * @param name { string } name of tippy instance\n     * @returns { NgxTippyInstance | null } specific tippy instance or null\n     */\n    getInstance(name) {\n        return this.tippyInstances.has(name) ? this.tippyInstances.get(name) : null;\n    }\n    /**\n     * Get all tippy instances from storage\n     *\n     * @returns { Map<string, NgxTippyInstance> | null } all tippy instances or null\n     */\n    getInstances() {\n        return this.tippyInstances.size ? this.tippyInstances : null;\n    }\n    /**\n     * Write singleton instances to storage\n     *\n     * @param name { string } name of tippy instance\n     * @param state { NgxTippyInstance } tippy instance\n     */\n    setSingletonInstance(name, state) {\n        if (this.tippySingletonEntryInstances.has(name)) {\n            const errMessage = this.getMessage({\n                reason: 'singletonInstanceAlreadyExist',\n                messageFor: NgxTippyNamesEnum.SingletonName,\n                name,\n            });\n            this.throwError(errMessage);\n        }\n        else {\n            this.tippySingletonEntryInstances.set(name, state);\n        }\n    }\n    /**\n     * Get specific singleton tippy instance\n     *\n     * @param name { string } name of singleton tippy instance\n     * @returns { NgxTippySingletonInstance | null } specific singleton tippy instance or null\n     */\n    getSingletonInstance(name) {\n        return this.tippySingletonEntryInstances.has(name) ? this.tippySingletonEntryInstances.get(name) : null;\n    }\n    /**\n     * Get all singleton tippy instances\n     *\n     * @returns { Map<string, NgxTippyInstance> | null } all singleton tippy instances or null\n     */\n    getSingletonInstances() {\n        return this.tippySingletonEntryInstances.size ? this.tippySingletonEntryInstances : null;\n    }\n    /**\n     * Working with tippy instance methods\n     */\n    /**\n     * Programmatically show the tippy\n     *\n     * @param name { string } name of tippy instance\n     */\n    show(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Show);\n    }\n    /**\n     * Programmatically hide the tippy\n     *\n     * @param name { string } name of tippy instance\n     */\n    hide(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Hide);\n    }\n    /**\n     * Will hide the tippy only if the cursor is outside of the tippy's interactive region\n     * This allows you to programmatically hook into interactive behavior upon a mouseleave event if implementing custom event listeners\n     *\n     * @param name { string } name of tippy instance\n     * @param name { mouseEvent } pass the mouse event object in from your event listener\n     */\n    hideWithInteractivity(name, mouseEvent) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.HideWithInteractivity, mouseEvent);\n    }\n    /**\n     * Prevent a tippy from showing or hiding\n     *\n     * @param name { string } name of tippy instance\n     */\n    disable(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Disable);\n    }\n    /**\n     * Re-enable a tippy\n     *\n     * @param name { string } name of tippy instance\n     */\n    enable(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Enable);\n    }\n    /**\n     * Update any tippy props\n     *\n     * @param name { string } name of tippy instance\n     * @param tippyProps { NgxTippyProps } new props\n     */\n    setProps(name, tippyProps) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.SetProps, tippyProps);\n    }\n    /**\n     * Update the content for tippy\n     *\n     * @param name { string } name of tippy instance\n     * @param tippyContent { NgxTippyContent } new content\n     */\n    setContent(name, tippyContent, tippyContext) {\n        const instance = this.getInstance(name);\n        if (!instance) {\n            this.throwErrorInstanceNotExist(name);\n            return;\n        }\n        if (tippyContent) {\n            const viewRef = this.ngxViewService.getViewRefInstance(tippyContent, instance.tippyName, tippyContext);\n            const content = viewRef.getElement();\n            if (content) {\n                setTemplateVisible(content, this.renderer);\n                instance.setContent(content);\n                instance.viewRef = viewRef;\n                this.emitInstancesChange({\n                    name,\n                    reason: 'setContent',\n                    instance,\n                });\n            }\n            else {\n                this.throwError('message');\n            }\n        }\n    }\n    /**\n     * Unmount the tippy from the DOM\n     *\n     * @param name { string } name of tippy instance\n     */\n    unmount(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Unmount);\n    }\n    /**\n     * Clears the instances delay timeouts\n     *\n     * @param name { string } name of tippy instance\n     */\n    clearDelayTimeouts(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.ClearDelayTimeouts);\n    }\n    /**\n     * Permanently destroy and clean up the tippy instance\n     *\n     * @param name { string } name of tippy instance\n     */\n    destroy(name) {\n        this.callNativeTippyMethod(name, InstanceChangeReasonEnum.Destroy);\n        this.tippyInstances.delete(name);\n    }\n    /** Working with tippy static methods */\n    /**\n     * Set the default props for each new tippy instance\n     *\n     * @param tippyProps { NgxTippyDefaultProps } default props\n     */\n    setDefaultProps(tippyProps) {\n        tippy.setDefaultProps(tippyProps);\n    }\n    /**\n     * Show all tippies\n     */\n    showAll() {\n        this.tippyInstances.forEach((instance, name) => {\n            instance.show();\n            this.emitInstancesChange({\n                name,\n                reason: 'show',\n                instance,\n            });\n        });\n    }\n    /**\n     * Hide all tippies or hide all except a particular one\n     * Additional hide them with duration\n     *\n     * @param { NgxTippyHideAllOptions } [options] - additional hiding options\n     */\n    hideAll(options) {\n        const exclude = this.getInstance(options?.excludeName || '');\n        const duration = options?.duration;\n        hideAll({ duration, ...exclude });\n    }\n    /**\n     * Subscription to change of tippy instances\n     *\n     * @returns { Observable<InstancesChanges> } observable of tippy instances change\n     */\n    get instancesChanges() {\n        return this.tippyInstances$.asObservable();\n    }\n    /**\n     * Service methods\n     */\n    callNativeTippyMethod(name, method, arg) {\n        const instance = this.getInstance(name);\n        if (instance) {\n            instance[method](arg);\n            this.emitInstancesChange({\n                name,\n                reason: method,\n                instance,\n            });\n        }\n        else {\n            this.throwErrorInstanceNotExist(name);\n        }\n    }\n    emitInstancesChange({ name, reason, instance, }) {\n        this.tippyInstances$.next({ name, reason, instance });\n    }\n    createRenderer(rendererFactory) {\n        this.renderer = rendererFactory.createRenderer(null, null);\n    }\n    throwErrorInstanceNotExist(name) {\n        const errMessage = this.getMessage({\n            reason: 'instanceNotExist',\n            messageFor: NgxTippyNamesEnum.TippyName,\n            name,\n        });\n        this.throwError(errMessage);\n    }\n    throwError(message, errorConstructor = Error) {\n        if (this.devModeService.isDevMode())\n            throw new errorConstructor(message);\n    }\n    getMessage({ reason, messageFor, name, }) {\n        return this.messagesDict[reason].replace(`#${messageFor}`, `'${name}'`);\n    }\n}\nNgxTippyService.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyService, deps: [{ token: i0.RendererFactory2 }, { token: DevModeService }, { token: NgxViewService }, { token: NGX_TIPPY_MESSAGES }], target: i0.FactoryTarget.Injectable });\nNgxTippyService.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyService, providedIn: 'root' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.RendererFactory2 }, { type: DevModeService }, { type: NgxViewService }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_MESSAGES]\n                }] }]; } });\n\n/**\n * Tippy singleton - single tippy element that takes the place of an array of regular tippy instances\n */\nclass NgxTippySingletonComponent {\n    constructor(platform, ngxTippyService, messagesDict, ngxTippyConfig) {\n        this.platform = platform;\n        this.ngxTippyService = ngxTippyService;\n        this.messagesDict = messagesDict;\n        this.ngxTippyConfig = ngxTippyConfig;\n    }\n    ngAfterViewInit() {\n        if (isPlatformServer(this.platform))\n            return;\n        this.setSingleton();\n    }\n    ngOnDestroy() {\n        this.clearSingletonInstance();\n    }\n    /**\n     * Take projected in component tooltips element\n     * Take initiated tippy instances\n     * Initiate `singleton addon` only for projected tooltips for current component instance\n     */\n    setSingleton() {\n        const contentWrapperNativeEl = this.contentWrapper.nativeElement;\n        const singletonTooltipIDs = Array.from(contentWrapperNativeEl.querySelectorAll('[data-tippy-singleton]')).map((el) => el._tippy.id);\n        const tippyInstances = this.ngxTippyService.getInstances();\n        const tippyInstancesSerialized = tippyInstances && [...tippyInstances.values()];\n        this.currentSingletonChildrenTippyInstances =\n            tippyInstancesSerialized &&\n                tippyInstancesSerialized.filter(tippyInstance => singletonTooltipIDs.includes(tippyInstance.id));\n        if (this.currentSingletonChildrenTippyInstances?.length) {\n            this.initTippySingletonEntry(this.currentSingletonChildrenTippyInstances);\n        }\n        else {\n            throw new Error(this.messagesDict.childrenInstancesNotFoundSingleton);\n        }\n    }\n    initTippySingletonEntry(childrenSingletonInstances) {\n        this.singletonInstance = createSingleton(childrenSingletonInstances, {\n            ...this.ngxTippyConfig,\n            ...this.singletonProps,\n        });\n        this.writeSingletonInstanceToStorage(this.singletonInstance);\n    }\n    /**\n     * To manipulate singleton groups, write all instances to storage\n     * `singletonName` used as unique key\n     * If `singletonName` does not provided - it will be generated using id of singletonInstance\n     *\n     * @param tippyInstance { NgxTippySingletonInstance }\n     */\n    writeSingletonInstanceToStorage(singletonInstance) {\n        const extendedSingletonInstance = this.extendShowFn(singletonInstance);\n        this.ngxTippyService.setSingletonInstance(this.singletonName || `singleton-${singletonInstance.id}`, extendedSingletonInstance);\n    }\n    /**\n     * Extend original `show` method\n     * Purpose: manipulate tooltip state by [tippyName]\n     *\n     * @param singletonInstance { NgxTippySingletonInstance }\n     * @returns { NgxTippySingletonInstance }\n     */\n    extendShowFn(singletonInstance) {\n        const originalShowFn = singletonInstance.show;\n        singletonInstance.show = (singletonInstanceIdentifier) => {\n            if (typeof singletonInstanceIdentifier === 'string') {\n                const instance = this.ngxTippyService.getInstance(singletonInstanceIdentifier);\n                instance && originalShowFn(instance);\n            }\n            else {\n                originalShowFn(singletonInstanceIdentifier);\n            }\n        };\n        return singletonInstance;\n    }\n    clearSingletonInstance() {\n        const singletonInstances = this.ngxTippyService.getSingletonInstances();\n        if (singletonInstances && this.singletonInstance) {\n            this.destroySingletonInstance();\n            this.deleteEntryInStorage(singletonInstances);\n        }\n    }\n    destroySingletonInstance() {\n        this.singletonInstance.destroy();\n    }\n    deleteEntryInStorage(singletonInstances) {\n        singletonInstances.delete(this.singletonName || `singleton-${this.singletonInstance.id}`);\n    }\n}\nNgxTippySingletonComponent.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippySingletonComponent, deps: [{ token: PLATFORM_ID }, { token: NgxTippyService }, { token: NGX_TIPPY_MESSAGES }, { token: NGX_TIPPY_CONFIG }], target: i0.FactoryTarget.Component });\nNgxTippySingletonComponent.cmp = i0.ngDeclareComponent({ minVersion: \"14.0.0\", version: \"14.2.12\", type: NgxTippySingletonComponent, selector: \"ngx-tippy-singleton\", inputs: { singletonProps: \"singletonProps\", singletonName: \"singletonName\" }, viewQueries: [{ propertyName: \"contentWrapper\", first: true, predicate: [\"contentWrapper\"], descendants: true, read: ElementRef }], ngImport: i0, template: `\n    <div #contentWrapper>\n      <ng-content></ng-content>\n    </div>\n  `, isInline: true });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippySingletonComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'ngx-tippy-singleton',\n                    template: `\n    <div #contentWrapper>\n      <ng-content></ng-content>\n    </div>\n  `,\n                }]\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: NgxTippyService }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_MESSAGES]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_CONFIG]\n                }] }]; }, propDecorators: { singletonProps: [{\n                type: Input\n            }], singletonName: [{\n                type: Input\n            }], contentWrapper: [{\n                type: ViewChild,\n                args: ['contentWrapper', { read: ElementRef, static: false }]\n            }] } });\n\nclass NgxTippyDirective {\n    constructor(tippyEl, renderer, ngxTippyService, ngxViewService, viewContainerRef, platform, ngxTippyConfig) {\n        this.tippyEl = tippyEl;\n        this.renderer = renderer;\n        this.ngxTippyService = ngxTippyService;\n        this.ngxViewService = ngxViewService;\n        this.viewContainerRef = viewContainerRef;\n        this.platform = platform;\n        this.ngxTippyConfig = ngxTippyConfig;\n        this.cachedInstances = new Map();\n    }\n    ngOnInit() {\n        if (isPlatformServer(this.platform))\n            return;\n        this.ngxViewService.viewContainerRef = this.viewContainerRef;\n        this.initTippy();\n    }\n    ngOnChanges(changes) {\n        this.handleChanges(changes);\n    }\n    ngOnDestroy() {\n        this.destroyTippy();\n    }\n    /**\n     * Tooltip initialize\n     * Content can be directly passed through `ngxTippy` selector\n     */\n    initTippy() {\n        const tippyTarget = this.tippyEl.nativeElement;\n        if (this.ngxTippy === null || this.ngxTippy === undefined)\n            return;\n        const viewRef = this.ngxViewService.getViewRefInstance(this.ngxTippy, this.tippyName, this.tippyContext);\n        const tippyElement = viewRef.getElement();\n        const tInstance = tippy(tippyTarget, {\n            ...(this.ngxTippyConfig),\n            ...(this.tippyProps || {}),\n            ...(tippyElement && { content: tippyElement }),\n        });\n        this.tippyName = this.tippyName || `tippy-${tInstance.id}`;\n        setTemplateVisible(tippyElement, this.renderer);\n        this.setTippyInstance({ tippyTarget, tippyName: this.tippyName, viewRef });\n        this.setClassName(this.tippyInstance, this.tippyClassName);\n        this.writeInstancesToStorage(this.tippyInstance, this.tippyName);\n    }\n    setTippyInstance({ tippyTarget, tippyName, viewRef, }) {\n        this.tippyInstance = { ...tippyTarget._tippy, tippyName, viewRef };\n    }\n    setClassName(tippyInstance, className) {\n        if (!className || !tippyInstance)\n            return;\n        const classNames = className.split(' ');\n        classNames.length &&\n            classNames.forEach(className => {\n                this.renderer.addClass(tippyInstance.popper.firstElementChild, className);\n            });\n    }\n    removeClassName(tippyInstance, className) {\n        if (!className || !tippyInstance)\n            return;\n        const classNames = className.split(' ');\n        classNames.length &&\n            classNames.forEach(className => {\n                this.renderer.removeClass(tippyInstance.popper.firstElementChild, className);\n            });\n    }\n    /**\n     * To manipulate tooltips, write all instances to storage\n     * `tippyName` used as unique key\n     * If `tippyName` does not provided - it will be generated using `tippyInstance.id`\n     *\n     * @param tippyInstance { NgxTippyInstance }\n     */\n    writeInstancesToStorage(tippyInstance, tippyName) {\n        tippyInstance && this.ngxTippyService.setInstance(tippyName, tippyInstance);\n    }\n    handleChanges({ tippyName, ngxTippy, tippyProps, tippyClassName, tippyContext }) {\n        tippyName && !tippyName.firstChange && this.handleNameChanges(tippyName);\n        ngxTippy && !ngxTippy.firstChange && this.handleContentChanges(ngxTippy);\n        tippyProps && !tippyProps.firstChange && this.handlePropsChanges(tippyProps);\n        tippyClassName && !tippyClassName.firstChange && this.handleClassChanges(tippyClassName);\n        tippyContext && !tippyContext.firstChange && this.handleContextChanges(tippyContext);\n    }\n    handleNameChanges({ previousValue, currentValue }) {\n        const tippyInstances = this.cachedTippyInstances();\n        if (!tippyInstances || !this.tippyInstance)\n            return;\n        this.deleteEntryInStorage(tippyInstances, previousValue);\n        this.tippyInstance = { ...this.tippyInstance, tippyName: currentValue };\n        tippyInstances.set(currentValue, this.tippyInstance);\n    }\n    handleContentChanges({ currentValue }) {\n        if (this.tippyInstance && this.tippyName) {\n            this.ngxTippyService.setContent(this.tippyName, currentValue);\n            if (currentValue === null || currentValue === undefined) {\n                this.ngxTippyService.disable(this.tippyName);\n            }\n            else {\n                this.ngxTippyService.enable(this.tippyName);\n            }\n        }\n        else {\n            this.initTippy();\n        }\n    }\n    handlePropsChanges({ currentValue }) {\n        this.tippyName && this.ngxTippyService.setProps(this.tippyName, currentValue);\n    }\n    handleClassChanges({ previousValue, currentValue }) {\n        this.removeClassName(this.tippyInstance, previousValue);\n        this.setClassName(this.tippyInstance, currentValue);\n    }\n    handleContextChanges({ currentValue }) {\n        if (this.tippyInstance && this.tippyName && this.ngxTippy) {\n            this.ngxTippyService.setContent(this.tippyName, this.ngxTippy, currentValue);\n        }\n        else {\n            this.initTippy();\n        }\n    }\n    cachedTippyInstances() {\n        const tippyInstances = this.ngxTippyService.getInstances();\n        if (this.cachedInstances.has(tippyInstances)) {\n            return this.cachedInstances.get(tippyInstances);\n        }\n        else {\n            this.cachedInstances.set(tippyInstances, tippyInstances);\n            return tippyInstances;\n        }\n    }\n    destroyTippy() {\n        const tippyInstances = this.cachedTippyInstances();\n        const tippyInstance = this.tippyInstance;\n        if (!tippyInstance || !tippyInstances)\n            return;\n        this.clearInstance({ tippyInstance, tippyInstances });\n        this.resetLocalInstance();\n        this.clearCachedInstances();\n    }\n    clearInstance({ tippyInstance, tippyInstances, }) {\n        const { tippyName } = tippyInstance;\n        this.clearViewRef(tippyInstance);\n        this.destroyTippyInstance(tippyInstance);\n        this.deleteEntryInStorage(tippyInstances, tippyName);\n    }\n    clearViewRef(tippyInstance) {\n        tippyInstance.viewRef?.destroy && tippyInstance.viewRef.destroy();\n    }\n    destroyTippyInstance(tippyInstance) {\n        tippyInstance.destroy();\n    }\n    deleteEntryInStorage(tippyInstances, tippyName) {\n        tippyInstances.delete(tippyName);\n    }\n    resetLocalInstance() {\n        this.tippyInstance = undefined;\n    }\n    clearCachedInstances() {\n        this.cachedInstances.clear();\n    }\n}\nNgxTippyDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyDirective, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: NgxTippyService }, { token: NgxViewService }, { token: i0.ViewContainerRef }, { token: PLATFORM_ID }, { token: NGX_TIPPY_CONFIG }], target: i0.FactoryTarget.Directive });\nNgxTippyDirective.dir = i0.ngDeclareDirective({ minVersion: \"14.0.0\", version: \"14.2.12\", type: NgxTippyDirective, selector: \"[ngxTippy]\", inputs: { ngxTippy: \"ngxTippy\", tippyProps: \"tippyProps\", tippyName: \"tippyName\", tippyClassName: \"tippyClassName\", tippyContext: \"tippyContext\" }, usesOnChanges: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ngxTippy]',\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: NgxTippyService }, { type: NgxViewService }, { type: i0.ViewContainerRef }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [NGX_TIPPY_CONFIG]\n                }] }]; }, propDecorators: { ngxTippy: [{\n                type: Input\n            }], tippyProps: [{\n                type: Input\n            }], tippyName: [{\n                type: Input\n            }], tippyClassName: [{\n                type: Input\n            }], tippyContext: [{\n                type: Input\n            }] } });\n\nclass NgxTippyModule {\n}\nNgxTippyModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyModule, deps: [], target: i0.FactoryTarget.NgModule });\nNgxTippyModule.mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyModule, declarations: [NgxTippyDirective, NgxTippyGroupComponent, NgxTippySingletonComponent], imports: [CommonModule], exports: [NgxTippyDirective, NgxTippyGroupComponent, NgxTippySingletonComponent] });\nNgxTippyModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyModule, imports: [CommonModule] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.12\", ngImport: i0, type: NgxTippyModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    declarations: [NgxTippyDirective, NgxTippyGroupComponent, NgxTippySingletonComponent],\n                    exports: [NgxTippyDirective, NgxTippyGroupComponent, NgxTippySingletonComponent],\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-tippy-wrapper\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NGX_TIPPY_CONFIG, NgxTippyDirective, NgxTippyGroupComponent, NgxTippyModule, NgxTippyService, NgxTippySingletonComponent };\n","<!-- Type Text for String are Default -->\r\n\r\n{{ debugMessage() }}\r\n\r\n<!-- Only try to show something if we have a valid item and a valid preview-value -->\r\n@if (item()?.previewValue) {\r\n  @switch (settings().PreviewType) {\r\n    <!-- Type Font Icon -->\r\n    @case (\"icon-css\") {\r\n      <i class=\"icon-preview {{ classWithoutDot(item().previewValue) }}\"></i>\r\n    }\r\n    <!-- Type Material Icon -->\r\n    @case (\"icon-material\") {\r\n      <!-- TODO: ATM it can only take material icons, but in future it should be able to also take other icons, in which case the tag would have to be reworked... -->\r\n      <mat-icon>{{ item().previewValue }}</mat-icon> &nbsp;\r\n    }\r\n    <!--  Type SVG Icon -->\r\n    @case (\"svg\") {\r\n      <img [ngxTippy]=\"tippyTemplate\" class=\"image-preview\" [src]=\"item().previewValue\" [alt]=\"item().value\" />\r\n      <!-- Tippy to Show Big Image -->\r\n      <div #tippyTemplate class=\"tippy-custom\">\r\n        <img class=\"image-tippy\" [src]=\"item().previewValue\" [alt]=\"item().value\" />\r\n      </div>\r\n    }\r\n    <!-- Type Image -->\r\n    @case (\"image\") {\r\n      <!-- Small Image Preview -->\r\n      <img [ngxTippy]=\"tippyTemplate\" class=\"image-preview\" [src]=\"imageResize(item().previewValue, 24, 24)\" [alt]=\"item().value\" />\r\n      <!-- Tippy to Show Big Image -->\r\n      <div #tippyTemplate class=\"tippy-custom\">\r\n        <img class=\"image-tippy\" [src]=\"imageResize(item().previewValue, 140, 140)\" [alt]=\"item().value\" />\r\n      </div>\r\n    }\r\n  }\r\n}","import { Component, computed, input } from '@angular/core';\r\nimport { MatIcon } from '@angular/material/icon';\r\nimport { NgxTippyModule } from 'ngx-tippy-wrapper';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { PickerItem } from '../models/picker-item.model';\r\n\r\nconst debug = false;\r\n\r\n/**\r\n * Preview as an image/icon of an item.\r\n */\r\n@Component({\r\n  selector: 'app-picker-item-preview',\r\n  templateUrl: './picker-item-preview.component.html',\r\n  styleUrl: './picker-item-preview.component.scss',\r\n  imports: [\r\n    MatIcon,\r\n    NgxTippyModule,\r\n  ]\r\n})\r\nexport class PickerItemPreviewComponent {\r\n\r\n  item = input.required<PickerItem>();\r\n\r\n  settings = input.required<FieldSettingsWithPickerSource>();\r\n\r\n  debugMessage = computed(() => {\r\n    if (!debug) return '';\r\n\r\n    const settings = this.settings();\r\n    const previewType = settings.PreviewType;\r\n\r\n    const item = this.item();\r\n\r\n    const msg = `Debug:: Preview type: ${previewType}; PreviewValue: '${item?.previewValue}'; Item: ${JSON.stringify(item)}`;\r\n    console.log('debug message', msg, item);\r\n    return '';\r\n  });\r\n\r\n  /** Remove the dot from the class name, as it would be wrong in the class-attribute. */\r\n  classWithoutDot(value: string): string {\r\n    return value?.replace(/\\./g, '');\r\n  }\r\n\r\n  imageResize(originalImage: string, width: number, height: number): string {\r\n\r\n    if (!originalImage) return originalImage;\r\n\r\n    // Remove w and h parameters completely\r\n    let optimizedImage = originalImage\r\n      .replace(/[\\?&]w=\\d+/g, '')  // Remove w parameter\r\n      .replace(/[\\?&]h=\\d+/g, ''); // Remove h parameter\r\n\r\n    // Replace width and height if they exist\r\n    optimizedImage = optimizedImage\r\n      .replace(/width=\\d+/g, `width=${width}`)\r\n      .replace(/height=\\d+/g, `height=${height}`);\r\n\r\n    // If width is not present, add it\r\n    if (!optimizedImage.includes('width='))\r\n      optimizedImage += (optimizedImage.includes('?') ? '&' : '?') + `width=${width}`;\r\n\r\n    // If height is not present, add it\r\n    if (!optimizedImage.includes('height='))\r\n      optimizedImage += (optimizedImage.includes('?') ? '&' : '?') + `height=${height}`;\r\n\r\n    return optimizedImage;\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"picker-option-contents\">\r\n  <!-- Preview Type -->\r\n  <div class=\"picker-option\">\r\n    <!-- Show Icon or Image -->\r\n    <app-picker-item-preview [item]=\"item()\" [settings]=\"settings()\"></app-picker-item-preview>\r\n    <span class=\"picker-option-label\"> {{ item().label || item().value }}</span>\r\n  </div>\r\n\r\n  <div class=\"picker-option-info\">\r\n    <!-- Show feature warnings if available. Do this first, to avoid the icons from fluttering back and forth -->\r\n    @for (feature of featureWarnings(); track feature)\r\n    {\r\n      <app-feature-icon [featureNameId]=\"feature\"></app-feature-icon>\r\n    }\r\n    <app-picker-help [helpLink]=\"item().link\"></app-picker-help>\r\n    <app-picker-icon-info [infoBox]=\"item().info\"></app-picker-icon-info>\r\n    <!-- Action items such as edit, remove, delete -->\r\n    <app-picker-item-buttons class=\"my-item-actions\" [show]=\"show()\" [item]=\"item()\" [index]=\"index()\" [uiFeatures]=\"uiFeatures()\"></app-picker-item-buttons>\r\n  </div>\r\n</div>\r\n","import { Component, computed, input } from '@angular/core';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { FeatureIconComponent } from '../../../../features/feature-icon/feature-icon.component';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerFeaturesItem } from '../picker-features.model';\r\nimport { PickerIconHelpComponent } from '../picker-icon-help/picker-icon-help.component';\r\nimport { PickerIconInfoComponent } from '../picker-icon-info/picker-icon-info.component';\r\nimport { PickerItemButtonsComponent } from '../picker-item-buttons/picker-item-buttons.component';\r\nimport { PickerItemPreviewComponent } from '../picker-item-preview/picker-item-preview.component';\r\n\r\n@Component({\r\n  selector: 'app-picker-item-label',\r\n  imports: [\r\n    PickerItemPreviewComponent,\r\n    PickerIconHelpComponent,\r\n    PickerIconInfoComponent,\r\n    PickerItemButtonsComponent,\r\n    FeatureIconComponent,\r\n  ],\r\n  templateUrl: './picker-item-label.component.html',\r\n  styleUrl: './picker-item-label.component.scss'\r\n})\r\nexport class PickerPreviewLabelComponent {\r\n  /** The item to show the label/buttons for */\r\n  item = input.required<PickerItem>();\r\n\r\n  /** The item index, important for certain button actions */\r\n  index = input<number>(0);\r\n\r\n  /** Settings, mainly for the preview feature such as icon etc. */\r\n  settings = input.required<FieldSettingsWithPickerSource>();\r\n\r\n  /** UI Features can let the control determine that certain buttons shouldn't be available, eg. \"remove\" on radio-button */\r\n  uiFeatures = input<Partial<PickerFeaturesItem>>(null);\r\n\r\n  /** If the buttons should show or not - I believe ATM it's always true */\r\n  show = input<boolean>(false);\r\n\r\n  featureWarnings = computed(() => {\r\n    const conditions = this.item().rules;\r\n    if (!conditions) return [];\r\n    const list = conditions\r\n      .split(';')\r\n      .map(c => c.trim())\r\n      .filter(c => c.startsWith('warn-req=feature:'))\r\n      .map(c => c.split(':')[1]);\r\n    console.log('list', list);\r\n    return list;\r\n  }, { debugName: 'featureWarnings' });\r\n}\r\n","\r\ninterface PickerSourceBase {\r\n  Title: string;\r\n\r\n  ConfigModel: 'UiPickerModeTree';\r\n}\r\n\r\nexport interface UiPickerModeTree extends PickerSourceBase {\r\n  TreeRelationship: typeof RelationshipParentChild | typeof RelationshipChildParent; //child-parent or parent-child\r\n  TreeBranchesStream: string;\r\n  TreeLeavesStream: string;\r\n  TreeParentIdField: string;\r\n  TreeChildIdField: string;\r\n  TreeParentChildRefField: string;\r\n  TreeChildParentRefField: string;\r\n\r\n  TreeShowRoot: boolean;\r\n  TreeDepthMax: number;\r\n\r\n  TreeAllowSelectRoot: boolean;\r\n  TreeAllowSelectBranch: boolean;\r\n  TreeAllowSelectLeaf: boolean;\r\n}\r\n\r\nexport const RelationshipParentChild = 'parent-child';\r\nexport const RelationshipChildParent = 'child-parent';\r\n","import { FlatTreeControl } from '@angular/cdk/tree';\r\nimport { Injectable } from '@angular/core';\r\nimport { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree';\r\nimport { RelationshipChildParent, RelationshipParentChild, UiPickerModeTree } from '../../../../../../../edit-types/src/PickerModeTree';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerTreeItem } from '../models/picker-tree.models';\r\n\r\n@Injectable()\r\nexport class PickerTreeDataHelper {\r\n  \r\n  log = classLog({PickerTreeDataHelper});\r\n\r\n  #pickerTreeConfiguration: UiPickerModeTree;\r\n  #treeItems: PickerTreeItem[];\r\n\r\n  dataSource: MatTreeFlatDataSource<PickerItem, PickerTreeItem, PickerTreeItem>\r\n\r\n  constructor() {\r\n    this.build();\r\n  }\r\n\r\n  public updateConfig(pickerConfig: UiPickerModeTree) {\r\n    this.log.a('updateConfigAndSelectedData');\r\n    // set config, which will be accessed on 'this.' whenever it's needed\r\n    this.#pickerTreeConfiguration = pickerConfig;\r\n  }\r\n\r\n  public addTreeItems(treeItems: PickerTreeItem[]) {\r\n    this.log.a('addTreeItems');\r\n    this.#treeItems = treeItems;\r\n  }\r\n\r\n  public updateSelectedData(selectedData: PickerItem[]) {\r\n    this.log.a('updateSelectedData');\r\n    this.dataSource.data = selectedData;\r\n  }\r\n\r\n  public preConvertAllItems(treeConfig: UiPickerModeTree, items: PickerItem[]) {\r\n    this.log.a('preConvertAllItemsToTreeItems', { treeConfig, items });\r\n    const convertedItems = items.map(x => this.#preConvertItemToTreeItem(treeConfig, x, items));\r\n\r\n    // todo: establish relationships\r\n    const withChildren = convertedItems.map(x => {\r\n      if (!x.expandable) return x;\r\n      const children = this.#getChildren(treeConfig, x, convertedItems);\r\n      // important: don't use spread, we really want to modify the object\r\n      // so that all object correctly reference each other\r\n      x.children = children;\r\n      return x;\r\n      // return { ...x, children };\r\n    });\r\n    // todo: open collapse first level...\r\n\r\n    return withChildren;\r\n  }\r\n\r\n  #preConvertItemToTreeItem(treeConfig: UiPickerModeTree, item: PickerItem, allItems: PickerItem[]) {\r\n    // Log and do some initial checks\r\n    this.log.a(`preConvertItemToTreeItem for item ${item?.id}`, { treeConfig, item, allItems });\r\n    if (!treeConfig) throw new Error('No tree configuration found');\r\n    if (!item) throw new Error(\"Can't transform null-item\");\r\n\r\n    // Get the tree configuration\r\n    const isParentChild = treeConfig.TreeRelationship == RelationshipParentChild;\r\n    const cpRef = treeConfig.TreeChildParentRefField;\r\n    const pcRef = treeConfig.TreeParentChildRefField;\r\n    const cId = treeConfig.TreeChildIdField;\r\n    const pId = treeConfig.TreeParentIdField;\r\n    const cStreamName = treeConfig.TreeLeavesStream;\r\n    const pStreamName = treeConfig.TreeBranchesStream;\r\n    const itemInCorrectStream = allItems\r\n      .filter(x => !x.sourceStreamName || x.sourceStreamName == pStreamName)\r\n      .find(x => x == item);\r\n\r\n    // figure out if this node can be expanded\r\n    // todo: first variant isParentChild probably doesn't work yet\r\n    const currentId = item?.data?.[pId];\r\n    const expandable = isParentChild\r\n      ? itemInCorrectStream && (item.data[pcRef]?.length > 0 ?? false)\r\n      : itemInCorrectStream && !!allItems.find(x => {\r\n        return (x.data[cpRef]?.[0]?.[pId] == currentId)\r\n      }\r\n      );\r\n\r\n    const result: PickerTreeItem = {\r\n      ...item,\r\n      level: -1,\r\n      expandable: expandable,\r\n      parent: item.data[cpRef],\r\n      children: item.data[pcRef],\r\n    };\r\n    this.log.a('result', { result });\r\n    return result;\r\n  }\r\n\r\n  public build() {\r\n    this.log.a('build');\r\n\r\n    const treeFlattener = new MatTreeFlattener(\r\n      // transformFunction converts an item to a tree-item\r\n      (item: PickerTreeItem, level: number): PickerTreeItem => ({\r\n        ...item,\r\n        level,\r\n      }),\r\n\r\n      // getLevel\r\n      (item): number => { return item.level; },\r\n\r\n      // isExpandable\r\n      (item): boolean => { return item.expandable; },\r\n\r\n      // getChildren\r\n      (item): PickerTreeItem[] => {\r\n        // TODO: @2dm - must determine which method is better\r\n        // getting them here is a bit more functional, but the other model doesn't need the catalog to be stored separately\r\n\r\n        // return item.children; //\r\n        // const getChildren = this.getChildren(this.pickerTreeConfiguration, item, this.treeItems);\r\n        // console.warn('2dm item', item, 'getChildren', getChildren, 'item.children', item.children)\r\n        // return getChildren;\r\n        return item.children;\r\n      },\r\n    );\r\n\r\n    this.dataSource = new MatTreeFlatDataSource(this.treeControl, treeFlattener);\r\n  }\r\n\r\n  #getChildren(treeConfig: UiPickerModeTree, item: PickerTreeItem, allItems: PickerTreeItem[]) {\r\n    const isParentChild = treeConfig.TreeRelationship == RelationshipParentChild;\r\n    const cpRef = treeConfig.TreeChildParentRefField;\r\n    const pcRef = treeConfig.TreeParentChildRefField;\r\n    const cId = treeConfig.TreeChildIdField;\r\n    const pId = treeConfig.TreeParentIdField;\r\n    if (isParentChild)\r\n      return item.data[pcRef].map((x: any) => {\r\n        const child = allItems.find(y => (y as any)[cId] == (x as any)[cId]);\r\n        return child;\r\n      });\r\n    else if (treeConfig.TreeRelationship == RelationshipChildParent) {\r\n      const itemParentValue = item.data?.[pId];\r\n      // console.log(`RelationshipChildParent - 2dm for parentIdField: '${pId}' on item: '${itemParentValue}' with parent having id field '${cId}' `);\r\n      return allItems.filter(x => {\r\n        const childParentId = x.data[cpRef]?.[0]?.[pId];\r\n        return childParentId == itemParentValue;\r\n      });\r\n    }\r\n    else\r\n      throw new Error(`Unknown tree relationship: \"${treeConfig?.TreeRelationship}\"`);\r\n  }\r\n\r\n  /** Needed by material tree to somehow determine the properties */\r\n  treeControl = new FlatTreeControl<PickerTreeItem>(\r\n    item => item.level,\r\n    item => item.expandable,\r\n  );\r\n\r\n\r\n  disableOption(item: PickerTreeItem, selected: PickerItem[], enableReselect: boolean): boolean {\r\n    const treeConfig = this.#pickerTreeConfiguration;\r\n    const selectedButNoReselect = enableReselect\r\n      ? false\r\n      : selected.some(entity => entity.value === item.value);\r\n\r\n    // test code to verify functionality\r\n    // if (item.label?.indexOf('Kawasaki') > -1) {\r\n    //   this.log.enabled = true;\r\n    //   this.log.add('disableOption', item, selected, enableReselect, selectedButNoReselect);\r\n    //   this.log.enabled = false;\r\n    // }\r\n\r\n    const isRootButRootNotAllowed = treeConfig?.TreeAllowSelectRoot\r\n      ? false\r\n      : item.children?.length > 0 && item.parent?.length === 0;\r\n    const isBranchButBranchNotAllowed = treeConfig?.TreeAllowSelectBranch\r\n      ? false\r\n      : item.children?.length > 0 && item.parent?.length > 0;\r\n    const isLeafButLeafNotAllowed = treeConfig?.TreeAllowSelectLeaf\r\n      ? false\r\n      : item.children?.length === 0;\r\n    return selectedButNoReselect || isRootButRootNotAllowed || isBranchButBranchNotAllowed || isLeafButLeafNotAllowed;\r\n  }\r\n\r\n  hasChild = (_: number, item: PickerTreeItem) => item.expandable;\r\n}\r\n","import { Injectable, Injector, Signal, effect, runInInjectionContext } from '@angular/core';\r\nimport { FieldSettingsPicker } from 'projects/edit-types/src/FieldSettings-Pickers';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { RelationshipParentChild } from '../../../../../../../edit-types/src/PickerModeTree';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerTreeItem } from '../models/picker-tree.models';\r\nimport { PickerTreeDataHelper } from './picker-tree-data-helper';\r\n\r\n@Injectable()\r\nexport class PickerTreeDataService {\r\n\r\n  log = classLog({PickerTreeDataService});\r\n\r\n  constructor(public treeHelper: PickerTreeDataHelper, private inject: Injector) { }\r\n\r\n  public init(fieldSettings: Signal<FieldSettings>, allItems: Signal<PickerItem[]>) {\r\n    this.log.a('init');\r\n\r\n    const settings = fieldSettings() as FieldSettings & FieldSettingsPicker;\r\n    const isTree = settings.PickerDisplayMode === 'tree';\r\n\r\n    // if not tree, quit early, nothing has to work then\r\n    if (!isTree) return;\r\n\r\n    // as of now, the tree config can not change at runtime, so pick up early\r\n    const treeConfig = settings.PickerTreeConfiguration;\r\n    const relationshipIsParentChild = treeConfig?.TreeRelationship == RelationshipParentChild;\r\n\r\n    runInInjectionContext(this.inject, () => {\r\n      effect(() => {\r\n        const all = allItems();\r\n        // if the objects don't have a data property, we can't convert them to tree items\r\n        // todo: not sure why this happens, possibly early cycles don't have it yet?\r\n        const treeItems = all?.[0]?.data == null\r\n          ? [] as PickerTreeItem[]\r\n          : this.treeHelper.preConvertAllItems(treeConfig, all);\r\n\r\n        if (treeItems?.[0]?.data != undefined) {\r\n          this.treeHelper.updateConfig(treeConfig);\r\n          this.treeHelper.addTreeItems(treeItems);\r\n\r\n          const filteredData = treeItems.filter(x => relationshipIsParentChild //check for two streams type also\r\n            ? !treeItems.some(y => y.data[treeConfig?.TreeParentChildRefField]?.some((z: { Id: number; }) => z.Id === x.id))\r\n            : x.data[treeConfig?.TreeChildParentRefField]?.length == 0);\r\n          this.treeHelper.updateSelectedData(filteredData);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n","<mat-form-field\r\n  [formGroup]=\"fieldState.group\"\r\n  class=\"eav-mat-form-field my-search\"\r\n  color=\"accent\"\r\n  [ngClass]=\"{ 'mat-form-field-invalid': ui().touchedAndInvalid }\"\r\n  (click)=\"filterSelectionList()\"\r\n>\r\n  <!-- Show Icon or Image -->\r\n  <div class=\"show-input-container\">\r\n    <!-- Note: very patching quick style-fix to get alignment look ok. Should be researched and fixed properly -->\r\n    <app-picker-item-preview [item]=\"getSelectedItem(selectedItem()?.value)\" [settings]=\"fieldState.settings()\" style=\"height: 29px;\">\r\n    </app-picker-item-preview>\r\n\r\n    <!-- The initial input showing the selected value - one only. As soon as there are more, this control won't show any more -->\r\n    <input\r\n      matInput\r\n      class=\"eav-translate-on-dblclick\"\r\n      #autocomplete\r\n      [matAutocomplete]=\"auto\"\r\n      [value]=\"displaySelected(selectedItem())\"\r\n      [placeholder]=\"getPlaceholder()\"\r\n      [disabled]=\"ui().disabled || !settings().enableAddExisting\"\r\n      [tippy]=\"tooltip()\"\r\n      [tippyArrow]=\"true\"\r\n      (focus)=\"pickerData.source.fetchItems()\"\r\n      (blur)=\"markAsTouched()\"\r\n      (input)=\"filterSelectionList()\"\r\n    />\r\n  </div>\r\n\r\n  <!-- Action items such as edit, remove, delete -->\r\n  <app-picker-item-buttons\r\n    matSuffix\r\n    class=\"my-item-actions\"\r\n    [show]=\"showItemEditButtons()\"\r\n    [item]=\"selectedItem()\"\r\n    [index]=\"0\"\r\n  ></app-picker-item-buttons>\r\n\r\n  <!-- \"v\" button to open the drop-down -->\r\n  <button\r\n    mat-icon-button\r\n    matSuffix\r\n    class=\"entity-dropdown-button picker-inline-button\"\r\n    disableRipple=\"true\"\r\n    [disabled]=\"ui().disabled || !settings().enableAddExisting\"\r\n  >\r\n    <mat-icon>arrow_drop_down</mat-icon>\r\n  </button>\r\n\r\n  <!-- Toggle Text Mode -->\r\n  @if (features().textEntry) {\r\n    <span matSuffix>\r\n      <ng-content select=\"[freeTextButtons]\"></ng-content>\r\n    </span>\r\n  }\r\n\r\n  <!-- Help text / error messages -->\r\n  <mat-label [ngClass]=\"{ 'mat-error': ui().touchedAndInvalid }\">\r\n    {{ basics().labelWithRequired }}\r\n  </mat-label>\r\n</mat-form-field>\r\n\r\n<mat-autocomplete\r\n  #auto=\"matAutocomplete\"\r\n  [displayWith]=\"displayFn.bind(this)\"\r\n  [hideSingleSelectionIndicator]=\"true\"\r\n  (optionSelected)=\"optionSelected($event)\"\r\n  (closed)=\"onClosed()\"\r\n  (opened)=\"onOpened(settings().showAsTree)\"\r\n>\r\n  @if (!settings().showAsTree) {\r\n    <!-- Standard List-Search Mode -->\r\n    @for (item of filteredItems(); track item.value) {\r\n      <mat-option\r\n        [value]=\"item.value\"\r\n        class=\"picker-option-wrapper\"\r\n        [disabled]=\"item.noSelect ? true : settings().enableReselect ? false : isOptionDisabled(item.value)\"\r\n        [tippy]=\"item.tooltip\"\r\n        tippyShowDelay=\"500\"\r\n        [tippyAllowHtml]=\"true\"\r\n        [tippyArrow]=\"true\"\r\n      >\r\n        <!-- Show Preview Label -->\r\n        <app-picker-item-label [item]=\"item\" [settings]=\"fieldState.settings()\"></app-picker-item-label>\r\n      </mat-option>\r\n    }\r\n  } @else {\r\n    <!-- Tree Search Mode (BETA not really working) -->\r\n    <mat-tree [dataSource]=\"treeHelper.dataSource\" [treeControl]=\"treeHelper.treeControl\">\r\n      <mat-tree-node *matTreeNodeDef=\"let item\" matTreeNodePadding class=\"eav-tree-node\">\r\n        <button mat-icon-button disabled></button>\r\n        <mat-option\r\n          [value]=\"item.value\"\r\n          class=\"picker-option-wrapper\"\r\n          [disabled]=\"treeHelper.disableOption(item, selectedItems(), settings().enableReselect)\"\r\n          [tippy]=\"item.tooltip\"\r\n          tippyShowDelay=\"500\"\r\n          [tippyAllowHtml]=\"true\"\r\n          [tippyArrow]=\"true\"\r\n        >\r\n          <!-- Show Preview Label -->\r\n          <app-picker-item-label [item]=\"item\" [settings]=\"fieldState.settings()\"></app-picker-item-label>\r\n        </mat-option>\r\n      </mat-tree-node>\r\n      <mat-tree-node *matTreeNodeDef=\"let item; when: hasChild\" matTreeNodePadding class=\"eav-tree-node\">\r\n        <button mat-icon-button matTreeNodeToggle [attr.aria-label]=\"'Toggle ' + item.name\">\r\n          <mat-icon class=\"mat-icon-rtl-mirror\">\r\n            {{ treeHelper.treeControl.isExpanded(item) ? \"expand_more\" : \"chevron_right\" }}\r\n          </mat-icon>\r\n        </button>\r\n        <mat-option\r\n          [value]=\"item.value\"\r\n          class=\"picker-option-wrapper\"\r\n          [disabled]=\"treeHelper.disableOption(item, selectedItems(), settings().enableReselect)\"\r\n          [tippy]=\"item.tooltip\"\r\n          tippyShowDelay=\"500\"\r\n          [tippyAllowHtml]=\"true\"\r\n          [tippyArrow]=\"true\"\r\n        >\r\n          <!-- Show Preview Label -->\r\n          <app-picker-item-label [item]=\"item\" [settings]=\"fieldState.settings()\"></app-picker-item-label>\r\n        </mat-option>\r\n      </mat-tree-node>\r\n    </mat-tree>\r\n  }\r\n</mat-autocomplete>\r\n\r\n<!-- Button to add null-item, in debug-mode only -->\r\n@if (debugEnabled()) {\r\n  <div class=\"null-box\">debug: <span class=\"null-button\" tippy=\"Add null-item\" (click)=\"insertNull()\">add null-item</span></div>\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, ElementRef, OnInit, input, viewChild } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatAutocompleteModule, MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatTreeModule } from '@angular/material/tree';\r\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { GlobalConfigService } from '../../../../shared/services/global-config.service';\r\nimport { computedObj, signalObj } from '../../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../../edit-debug';\r\nimport { PickerItem, PickerItemFactory } from '../models/picker-item.model';\r\nimport { PickerTreeItem } from '../models/picker-tree.models';\r\nimport { PickerItemButtonsComponent } from '../picker-item-buttons/picker-item-buttons.component';\r\nimport { PickerPreviewLabelComponent } from '../picker-item-label/picker-item-label.component';\r\nimport { PickerItemPreviewComponent } from '../picker-item-preview/picker-item-preview.component';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\nimport { PickerTreeDataHelper } from '../picker-tree/picker-tree-data-helper';\r\nimport { PickerTreeDataService } from '../picker-tree/picker-tree-data-service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  optionSelected: false,\r\n  focusOnSearchComponent: false,\r\n  onClosed: true,\r\n  onOpened: true,\r\n  tooltip: false,\r\n  fields: [...DebugFields, 'Author'],\r\n}\r\n\r\n@Component({\r\n  selector: 'app-picker-search',\r\n  templateUrl: './picker-search.component.html',\r\n  styleUrls: ['./picker-search.component.scss'],\r\n  imports: [\r\n    MatFormFieldModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NgClass,\r\n    MatInputModule,\r\n    MatAutocompleteModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatOptionModule,\r\n    MatTreeModule,\r\n    TranslateModule,\r\n    PickerItemButtonsComponent,\r\n    TippyDirective,\r\n    PickerPreviewLabelComponent,\r\n    PickerItemPreviewComponent,\r\n  ]\r\n})\r\nexport class PickerSearchComponent extends PickerPartBaseComponent implements OnInit {\r\n\r\n  /** Main log */\r\n  log = classLog({ PickerSearchComponent }, logSpecs);\r\n\r\n  /** Special log which would fire a lot for each item doing disabled checks etc. */\r\n  #logItemChecks = classLog(`PickerSearchComponent-ItemChecks`);\r\n\r\n  //#region Inputs\r\n\r\n  /** The input field for the search */\r\n  autocomplete = viewChild.required<ElementRef<HTMLInputElement>>('autocomplete');\r\n\r\n  /** Determine if the input field shows the selected items. eg. not when in dialog where it's just a search-box */\r\n  showSelectedItem = input.required<boolean>();\r\n\r\n  /** Determine if edit buttons are possible, eg. not in preview */\r\n  showItemEditButtons = input.required<boolean>();\r\n\r\n  //#endregion\r\n\r\n  /**\r\n   * The tree helper which is used by the tree display.\r\n   * Will only be initialized if we're really showing a tree.\r\n   */\r\n  #treeDataService = transient(PickerTreeDataService);\r\n  public treeHelper = transient(PickerTreeDataHelper);\r\n\r\n  constructor(\r\n    private translate: TranslateService,\r\n    private globalConfigService: GlobalConfigService,\r\n  ) { super(); }\r\n\r\n  /** Currently selected 1 item, as this input will only ever show 1 and it needs to know if certain edit buttons should be shown. */\r\n  public selectedItem = computedObj('selectedItems', () => this.pickerData.selectedOne());\r\n\r\n  /** special trigger to recalculate filtered items; not ideal, should happen automatically */\r\n  #reFilter = signalObj('reFilter', false);\r\n\r\n  public filteredItems = computedObj('filteredItems', () => {\r\n    const _ = this.#reFilter(); // just make a dependency\r\n    const all = this.pickerData.optionsAll();\r\n    const filterInDom = this.autocomplete()?.nativeElement.value;\r\n    const filter = filterInDom?.toLocaleLowerCase();\r\n\r\n    const result = !filter\r\n      ? all\r\n      : all.filter(oItem => ((oItem.label ? oItem.label : oItem.value) ?? '').toLocaleLowerCase().includes(filter));\r\n\r\n    // If the list is empty, show a message about this.\r\n    return result.length > 0\r\n      ? result\r\n      : [PickerItemFactory.message(this.translate, 'Fields.Picker.FilterNoResults', { search: filterInDom })];\r\n  });\r\n\r\n  /** Debug status for UI, mainly to show \"add-null\" button */\r\n  debugEnabled = this.globalConfigService.isDebug;\r\n\r\n  /** Current applicable settings like \"enableEdit\" etc. */\r\n  settings = computedObj('settings', () => {\r\n    const s = this.fieldState.settings();\r\n    return {\r\n      enableAddExisting: s.EnableAddExisting,\r\n      enableReselect: s.EnableReselect,\r\n      showAsTree: s.PickerDisplayMode === 'tree',\r\n    };\r\n  });\r\n\r\n\r\n  ngOnInit(): void {\r\n    const fieldSettings = this.fieldState.settings;\r\n    if (fieldSettings().PickerDisplayMode === 'tree') {\r\n      // Setup Tree Helper - but should only happen, if we're really doing trees\r\n      // Only doing this the first time, as these settings are not expected to change\r\n      this.#treeDataService.init(fieldSettings, this.pickerData.optionsAll);\r\n      this.treeHelper = this.#treeDataService.treeHelper;\r\n\r\n    }\r\n    this.pickerData.state.attachCallback(() => this.focusOnSearchComponent());\r\n  }\r\n\r\n  focusOnSearchComponent(): void {\r\n    this.log.fnIf('focusOnSearchComponent');\r\n    this.autocomplete()?.nativeElement.focus();\r\n  }\r\n\r\n\r\n  displaySelected(item: PickerItem): string {\r\n    return this.showSelectedItem() ? (item?.label ?? '') : '';\r\n  }\r\n\r\n  tooltip(): string {\r\n    const l = this.log.fnIfInList('tooltip', 'fields', this.fieldState.name, null, this.fieldState.name);\r\n    // no tooltip if zero or multiple items selected\r\n    const count = this.pickerData.selectedAll().length;\r\n    if (count != 1)\r\n      return l.r(null, `0 or more than 1 selected: ${count}`);\r\n    return l.r(this.selectedItem().tooltip, 'ok');\r\n  }\r\n\r\n  \r\n  displayFn(value: string): string {\r\n    const selectedItem = this.selectedItem();\r\n    this.#logItemChecks.a(`displayFn: value: '${value}'`, { selectedItem });\r\n    // and probably clean up if it's stable for a few days\r\n    if (value == null) return '';\r\n    const returnValue = this.pickerData.optionsAll().find(ae => ae.value == value)?.label;\r\n\r\n    // If nothing yet, try to return label of selected or fallback to return the value\r\n    // note: not quite sure, but I believe this is for scenarios where a manual entry was done\r\n    // ...so it would return it, even though it's not in the list of available items\r\n    if (!returnValue)\r\n      return selectedItem?.value == value\r\n        ? selectedItem?.label\r\n        : value + \" *\";\r\n    this.log.a('displayFn result', { value, returnValue });\r\n    return returnValue;\r\n  }\r\n\r\n  markAsTouched(): void {\r\n    this.fieldState.ui().markTouched();\r\n  }\r\n\r\n  filterSelectionList(): void {\r\n    this.#reFilter.update(x => !x);\r\n  }\r\n\r\n  /**\r\n   * Event triggered when opening the auto-complete / search\r\n   */\r\n  onOpened(isTreeDisplayMode: boolean): void {\r\n    const l = this.log.fnIf('onOpened', { isTreeDisplayMode });\r\n    const searchElement = this.autocomplete().nativeElement;\r\n    l.a(`onOpened: isTreeDisplayMode ${isTreeDisplayMode}; domValue: '${searchElement.value}'`);\r\n    // flush the input so the user can use it to search, otherwise the list is filtered\r\n    searchElement.value = '';\r\n    this.#reFilter.update(x => !x);\r\n    // If tree, we need to blur so tree reacts to the first click, otherwise the user must click 2x\r\n    if (isTreeDisplayMode)\r\n      searchElement.blur();\r\n  }\r\n\r\n  onClosed(): void {\r\n    const selectedItems = this.selectedItems();\r\n    const selectedItem = this.selectedItem();\r\n    const searchElement = this.autocomplete().nativeElement;\r\n    const l = this.log.fnIf('onClosed', { selectedItems, selectedItem });\r\n\r\n    // If we should not show the selected item in search,\r\n    // like in the popup, where selections are added to the list above\r\n    // exit early\r\n    if (!this.showSelectedItem()) {\r\n      searchElement.value = '';\r\n      return l.end('!showSelectedItem')\r\n    }\r\n\r\n    // If we should show the selected item, try to do it\r\n    // Note that this is false in search-add-only scenarios, like the popup dialog\r\n    // where the selections are added to the list above.\r\n    l.a('showSelectedItem');\r\n\r\n    // If nothing is selected, make sure the text is empty afterwards, otherwise the user thinks he selected something\r\n    if (!selectedItem) {\r\n      searchElement.value = '';\r\n      return l.end('!selectedItem')\r\n    }\r\n    \r\n    // Something is selected. If it's less than 2, we don't show the pills, so we want to show the label\r\n    if (selectedItems.length < 2) {\r\n      searchElement.value = selectedItem.label;\r\n      return l.end(`selectedItem & < 2; label updated to ${selectedItem.label}`, { selectedItem });\r\n    }\r\n  }\r\n\r\n  /** Callback from autocomplete when selected */\r\n  optionSelected(event: MatAutocompleteSelectedEvent): void {\r\n    const multiValue = this.features().multiValue;\r\n    const l = this.log.fnIf('optionSelected', { value: event.option.value, multiValue });\r\n    const selected = event.option.value;\r\n    if (!multiValue) {\r\n      l.a('no multiValue, will set to new');\r\n      this.pickerData.state.set([selected]);\r\n    } else {\r\n      l.a('multiValue, will add to selection');\r\n      this.pickerData.state.add(selected);\r\n    }\r\n    // @SDV - This is needed so after choosing option element is not focused (it gets focused by default so if blur is outside of setTimeout it will happen before refocus)\r\n    setTimeout(() => this.autocomplete().nativeElement.blur());\r\n  }\r\n\r\n  getPlaceholder(): string {\r\n    const allOptions = this.pickerData.optionsAll();\r\n    var placeholder = allOptions.length > 0\r\n      ? this.translate.instant('Fields.Picker.Search')\r\n      : this.translate.instant('Fields.Picker.QueryNoItems');\r\n    this.#logItemChecks.a(`getPlaceholder: '${placeholder}'`, { allOptions });\r\n    return placeholder;\r\n  }\r\n\r\n  insertNull(): void {\r\n    this.log.a('insertNull');\r\n    this.pickerData.state.add(null);\r\n  }\r\n\r\n  isOptionDisabled(value: string): boolean {\r\n    const selected = this.selectedItems();\r\n    const isSelected = selected.some(entity => entity.value === value);\r\n    this.#logItemChecks.a(`sOptionDisabled value: '${value}'; result: ${isSelected}`, { selected });\r\n    return isSelected;\r\n  }\r\n\r\n\r\n  goToLink(helpLink: string): void {\r\n    this.log.a(`goToLink helpLink: '${helpLink}'`);\r\n    window.open(helpLink, '_blank');\r\n  }\r\n\r\n  hasChild = (_: number, item: PickerTreeItem) => this.treeHelper.hasChild(_, item);\r\n\r\n  getSelectedItem(value: string): PickerItem {\r\n    return this.pickerData.optionsAll().find(ae => ae.value === value);\r\n  }\r\n\r\n}\r\n","import { classLog } from '../../../../shared/logging';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  options: true,\r\n  select: true,\r\n};\r\n\r\nexport abstract class PickerInlineBaseComponent extends PickerPartBaseComponent {\r\n\r\n  log = classLog({PickerInlineBaseComponent}, logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    // Make sure the data is loaded - especially for entity/query sources\r\n    this.pickerData.source.fetchItems();\r\n  }\r\n\r\n  options = computedObj('options', () => {\r\n    const options = this.pickerData.optionsWithMissing();\r\n    const selected = this.selectedItems();\r\n\r\n    // Off all the possible options, mark the ones that are selected\r\n    const final = options.map(o => {\r\n      const isSelected = selected.find((s) => s.value === o.value);\r\n      return { ...o, selected: !!isSelected };\r\n    });\r\n    this.log.aIf('options', { options, selected, final });\r\n\r\n    // TODO: trap if too many hits... since we can almost break the UI if it has too many items\r\n\r\n    return final as (PickerItem & { selected?: boolean})[];\r\n  });\r\n  \r\n  select(item: PickerItem) {\r\n    const l = this.log.fn('select', { item });\r\n    if (item.noSelect) return l.end('noSelect, exit early');\r\n    const allowMulti = this.features().multiValue;\r\n    if (!allowMulti) {\r\n      this.pickerData.state.set([item.value]);\r\n      return l.end('no-multi', { item, allowMulti });\r\n    }\r\n\r\n    const before = this.options();\r\n    const toggled = before.map(o => o.value === item.value ? { ...o, selected: !o.selected } : o);\r\n    const selected = toggled.filter(o => o.selected);\r\n    const values = selected.map(o => o.value);\r\n    this.pickerData.state.set(values);\r\n    l.end('multi', { item, allowMulti, before, toggled, selected, values });\r\n  }\r\n\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\n\r\n@Component({\r\n    selector: 'app-picker-inline-header',\r\n    templateUrl: './picker-inline-header.component.html',\r\n    styleUrl: './picker-inline-header.component.scss',\r\n    imports: [\r\n        NgClass,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\nexport class PickerInlineHeaderComponent extends PickerPartBaseComponent {\r\n\r\n}\r\n","<div class=\"my-title-bar\">\r\n  <div>\r\n    <mat-label class=\"c-ew__preview-label\" [ngClass]=\"{\r\n      'mat-caption' : itemCount(),\r\n      'mat-empty' : !itemCount(),\r\n      'mat-error' : ui().touchedAndInvalid && !config.initialDisabled,\r\n      'color__primary' : !ui().touchedAndInvalid && !config.initialDisabled,\r\n      'my-label-disabled' : config.initialDisabled\r\n      }\"\r\n    >\r\n      {{ basics().labelWithRequired }}\r\n    </mat-label>\r\n    <app-field-helper-text [flatIfEmpty]=\"true\" [smallGap]=\"true\"></app-field-helper-text>\r\n  </div>\r\n  <div>\r\n    <ng-content select=\"[addNew]\"></ng-content>\r\n    <ng-content select=\"[freeTextButtons]\"></ng-content>\r\n  </div>\r\n\r\n</div>\r\n","<div class=\"c-ew__preview-holder\">\r\n  <app-picker-inline-header>\r\n    <ng-content addNew select=\"[addNew]\"></ng-content>\r\n    <ng-content freeTextButtons select=\"[freeTextButtons]\"></ng-content>\r\n  </app-picker-inline-header>\r\n\r\n  <!-- <div (click)=\"expandDialog()\"\r\n    [ngClass]=\"{\r\n    'c-ew__preview--invalid' : ui().touchedAndInvalid,\r\n    'c-ew__preview--disabled': config.initialDisabled\r\n    }\"> -->\r\n\r\n  @for (item of options(); track item.value) {\r\n    <mat-checkbox\r\n      class=\"picker-option-wrapper\"\r\n      (click)=\"select(item)\"\r\n      [checked]=\"item.selected\"\r\n      [disabled]=\"ui().disabled || item.noSelect\"\r\n      [tippy]=\"item.tooltip\"\r\n      tippyShowDelay=\"500\"\r\n      [tippyAllowHtml]=\"true\"\r\n      [tippyArrow]=\"true\"\r\n    >\r\n      <!-- Show Label, Tooltips, Links-Buttons and Feature-Warnings -->\r\n      <app-picker-item-label [item]=\"item\" [show]=\"true\" [index]=\"$index\" [settings]=\"fieldState.settings()\" [uiFeatures]=\"{ remove: false }\"></app-picker-item-label>\r\n    </mat-checkbox>\r\n  }\r\n  <!-- </div> -->\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { MatCheckbox } from '@angular/material/checkbox';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { PickerInlineBaseComponent } from '../picker-inline/picker-inline-base.component';\r\nimport { PickerInlineHeaderComponent } from '../picker-inline/picker-inline-header.component';\r\nimport { PickerPreviewLabelComponent } from '../picker-item-label/picker-item-label.component';\r\n\r\n@Component({\r\n    selector: 'app-picker-checkboxes',\r\n    templateUrl: './picker-checkboxes.component.html',\r\n    styleUrls: ['./picker-checkboxes.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatRippleModule,\r\n        MatCheckbox,\r\n        TippyDirective,\r\n        PickerInlineHeaderComponent,\r\n        PickerPreviewLabelComponent,\r\n    ]\r\n})\r\nexport class PickerCheckboxesComponent extends PickerInlineBaseComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    this.fieldState.requireFeature(FeatureNames.PickerUiCheckbox);\r\n  }\r\n\r\n}\r\n","<div class=\"c-ew__preview-holder\">\r\n  <mat-label class=\"c-ew__preview-label\" [ngClass]=\"{\r\n    'mat-caption' : itemCount(),\r\n    'mat-empty' : !itemCount(),\r\n    'mat-error' : ui().touchedAndInvalid && !config.initialDisabled,\r\n    'color__primary' : !ui().touchedAndInvalid && !config.initialDisabled,\r\n    'my-label-disabled' : config.initialDisabled\r\n    }\">\r\n    {{ basics().labelWithRequired }}\r\n  </mat-label>\r\n  <div matRipple [matRippleAnimation]=\"{ enterDuration: 360 }\" class=\"c-ew__preview mat-ripple\" (click)=\"expandDialog()\"\r\n    [ngClass]=\"{\r\n    'c-ew__preview--invalid' : ui().touchedAndInvalid,\r\n    'c-ew__preview--disabled': config.initialDisabled\r\n    }\">\r\n    <div [ngClass]=\"itemCount() ? 'c-ew__preview-container' : 'c-ew__preview-container--empty'\">\r\n      <div class=\"my-flex\">\r\n        @if (itemCount()) {\r\n          <mat-list class=\"eav-list my-pills\">\r\n            @for (item of selectedItems(); track (item.value + $index)) {\r\n              <mat-list-item role=\"listitem\" class=\"eav-list-item\" [tippy]=\"item.tooltip\">\r\n                <span mat-line>{{ item.label }}</span>\r\n              </mat-list-item>\r\n            }\r\n          </mat-list>\r\n        }\r\n        @if (itemCount() > 3) {\r\n          <span class=\"eav-more-entities\" [ngClass]=\"{'eav-more-entities-margin-right': enableTextEntry() }\">\r\n            {{ itemCount() }}\r\n          </span>\r\n        }\r\n        @if (enableTextEntry()) {\r\n          <span matSuffix>\r\n            <ng-content select=\"[freeTextButtons]\"></ng-content>\r\n          </span>\r\n        }\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { TippyDirective } from 'projects/eav-ui/src/app/shared/directives/tippy.directive';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\n\r\n@Component({\r\n    selector: 'app-picker-pills',\r\n    templateUrl: './picker-pills.component.html',\r\n    styleUrls: ['./picker-pills.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        NgClass,\r\n        MatRippleModule,\r\n        MatListModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PickerPillsComponent extends PickerPartBaseComponent { }\r\n","<div class=\"c-ew__preview-holder\">\r\n  <app-picker-inline-header>\r\n    <ng-content addNew select=\"[addNew]\"></ng-content>\r\n    <ng-content freeTextButtons select=\"[freeTextButtons]\"></ng-content>\r\n  </app-picker-inline-header>\r\n\r\n  <!-- <div (click)=\"expandDialog()\"\r\n    [ngClass]=\"{\r\n    'c-ew__preview--invalid' : ui().touchedAndInvalid,\r\n    'c-ew__preview--disabled': config.initialDisabled\r\n    }\"> -->\r\n\r\n    @for (item of options(); track item.value) {\r\n      <div>\r\n        <mat-radio-button\r\n          class=\"picker-option-wrapper\"\r\n          (click)=\"select(item)\"\r\n          [name]=\"name\"\r\n          [checked]=\"item.selected\"\r\n          [disabled]=\"ui().disabled || item.noSelect\"\r\n          [tippy]=\"item.tooltip\"\r\n          tippyShowDelay=\"500\"\r\n          [tippyAllowHtml]=\"true\"\r\n          [tippyArrow]=\"true\"\r\n        >\r\n          <!-- Show Preview Label -->\r\n          <app-picker-item-label [item]=\"item\" [show]=\"true\" [index]=\"$index\" [settings]=\"fieldState.settings()\" [uiFeatures]=\"{ remove: false }\"></app-picker-item-label>\r\n        </mat-radio-button>\r\n      </div>\r\n    }\r\n  <!-- </div> -->\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatRadioButton } from '@angular/material/radio';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { PickerInlineBaseComponent } from '../picker-inline/picker-inline-base.component';\r\nimport { PickerInlineHeaderComponent } from '../picker-inline/picker-inline-header.component';\r\nimport { PickerPreviewLabelComponent } from '../picker-item-label/picker-item-label.component';\r\n\r\n@Component({\r\n    selector: 'app-picker-radio',\r\n    templateUrl: './picker-radio.component.html',\r\n    styleUrls: ['./picker-radio.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatRippleModule,\r\n        MatRadioButton,\r\n        TippyDirective,\r\n        PickerInlineHeaderComponent,\r\n        PickerPreviewLabelComponent,\r\n    ]\r\n})\r\nexport class PickerRadioComponent extends PickerInlineBaseComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    this.fieldState.requireFeature(FeatureNames.PickerUiRadio);\r\n  }\r\n\r\n  /** Name is used to group the radio buttons together in the form */\r\n  name = this.fieldState.name;\r\n\r\n}\r\n","@if (allowText()) {\r\n  <span matSuffix class=\"toggle-buttons\">\r\n    @if (showBoth() || isTextMode()) {\r\n      <button\r\n        mat-icon-button\r\n        class=\"eav-suffix-button\"\r\n        [ngClass]=\"isTextMode() ? '' : 'active'\"\r\n        tippyTranslate=\"Fields.String.Dropdown\"\r\n        [disabled]=\"csDisabled()\"\r\n        appClickStopPropagation\r\n        (click)=\"isTextMode() ? toggleFreeText(csDisabled()) : null\"\r\n      >\r\n        <mat-icon>search</mat-icon>\r\n      </button>\r\n    }\r\n    @if (showBoth() || !isTextMode()) {\r\n      <button\r\n        mat-icon-button\r\n        class=\"eav-suffix-button\"\r\n        [ngClass]=\"isTextMode() ? 'active' : ''\"\r\n        tippyTranslate=\"Fields.String.Freetext\"\r\n        [disabled]=\"csDisabled()\"\r\n        appClickStopPropagation\r\n        (click)=\"isTextMode() ? null : toggleFreeText(csDisabled())\"\r\n      >\r\n        <mat-icon>text_fields</mat-icon>\r\n      </button>\r\n    }\r\n  </span>\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, inject, input } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { FieldState } from '../../field-state';\r\n\r\n@Component({\r\n    selector: 'app-picker-toggle-text',\r\n    templateUrl: './picker-text-toggle.component.html',\r\n    styleUrls: ['./picker-text-toggle.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatButtonModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        ClickStopPropagationDirective,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PickerTextToggleComponent {\r\n  csDisabled = input<boolean>();\r\n  allowText = input<boolean>();\r\n  isTextMode = input(false);\r\n\r\n  showBoth = input(true);\r\n\r\n  pickerData = inject(FieldState).pickerData;\r\n\r\n  constructor() { }\r\n\r\n  toggleFreeText(disabled: boolean): void {\r\n    if (disabled) return;\r\n    this.pickerData.toggleFreeTextMode();\r\n  }\r\n}\r\n","<div>\r\n  <mat-form-field [formGroup]=\"fieldState.group\" class=\"eav-mat-form-field\" color=\"accent\">\r\n    @if (useMultiLine()) {\r\n      <textarea matInput [required]=\"basics().required\" [formControlName]=\"fieldState.name\"\r\n        [placeholder]=\"basics().placeholder\"></textarea>\r\n    } @else {\r\n      <input matInput [required]=\"basics().required\" [formControlName]=\"fieldState.name\" [placeholder]=\"basics().placeholder\">\r\n    }\r\n    <div matSuffix>\r\n      <ng-content select=\"[freeTextButtons]\"></ng-content>\r\n    </div>\r\n    <mat-label>{{ basics().label }}</mat-label>\r\n  </mat-form-field>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\n\r\n@Component({\r\n    selector: 'app-picker-text',\r\n    templateUrl: './picker-text.component.html',\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n    ]\r\n})\r\nexport class PickerTextComponent extends PickerPartBaseComponent {\r\n  \r\n  log = classLog({PickerTextComponent});\r\n\r\n  constructor() { super(); }\r\n\r\n  /**\r\n   * Tell the text-input to be multi-line, if the separator is a newline.\r\n   * Otherwise, it will be single-line.\r\n   */\r\n  protected useMultiLine = computedObj('useMultiLine', () => {\r\n    const settings = this.fieldState.settings();\r\n    const separator = settings.Separator;\r\n    const isSeparatorNewLine = separator == '\\\\n' /* buggy temp double-slash-n */ || separator == '\\n' /* correct */;\r\n    return isSeparatorNewLine;\r\n  });\r\n}\r\n","<div class=\"my-flex\">\r\n  <!-- The Input field / checkboxes etc. -->\r\n  <div class=\"eav-mat-form-field\">\r\n    @switch (mode()) {\r\n      @case (\"text\") {\r\n        <app-picker-text>\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle\"></ng-container>\r\n        </app-picker-text>\r\n      }\r\n      @case (\"checkbox\") {\r\n        <app-picker-checkboxes>\r\n          <ng-container addNew *ngTemplateOutlet=\"addNew\"></ng-container>\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle; context: { $implicit: false }\"></ng-container>\r\n        </app-picker-checkboxes>\r\n      }\r\n      @case (\"radio\") {\r\n        <app-picker-radio>\r\n          <ng-container addNew *ngTemplateOutlet=\"addNew\"></ng-container>\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle; context: { $implicit: false }\"></ng-container>\r\n        </app-picker-radio>\r\n      }\r\n      @case (\"pills\") {\r\n        <app-picker-pills>\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle\"></ng-container>\r\n        </app-picker-pills>\r\n      }\r\n      @case (\"search\") {\r\n        <app-picker-search [showSelectedItem]=\"true\" [showItemEditButtons]=\"true\">\r\n          <ng-container freeTextButtons *ngTemplateOutlet=\"textToggle\"></ng-container>\r\n        </app-picker-search>\r\n      }\r\n    }\r\n  </div>\r\n\r\n  <!-- The edit / add buttons -->\r\n  @if (mode() !== \"radio\" && mode() !== \"checkbox\") {\r\n\r\n    <div class=\"my-flex\">\r\n      <!-- create new entity to add to this list -->\r\n      <ng-container *ngTemplateOutlet=\"addNew\"></ng-container>\r\n      <!-- Open dialog button -->\r\n      @if (features().showGoToListDialogButton) {\r\n        <button\r\n          mat-icon-button\r\n          class=\"picker-inline-button\"\r\n          [disabled]=\"ui().disabled\"\r\n          tippyTranslate=\"Fields.Picker.OpenMultiselect\"\r\n          (click)=\"expandDialog()\"\r\n        >\r\n          <mat-icon>post_add</mat-icon>\r\n        </button>\r\n      }\r\n    </div>\r\n  }\r\n</div>\r\n\r\n<!-- Help text for most controls (not radio/checkbox) -->\r\n@if (!skipHelpText()) {\r\n  <app-field-helper-text></app-field-helper-text>\r\n} @else {\r\n  <!-- Cheap spacer if no help text, should probably be done better some day -->\r\n  <br />\r\n}\r\n\r\n<!-- Part to add the text-toggle to the control -->\r\n<ng-template #textToggle let-showBoth>\r\n  <span [ngClass]=\"{ 'picker-suffix-text': showBoth }\">\r\n    <app-picker-toggle-text\r\n      [csDisabled]=\"ui().disabled\"\r\n      [allowText]=\"features().textEntry\"\r\n      [isTextMode]=\"isInFreeTextMode()\"\r\n      [showBoth]=\"showBoth ?? true\"\r\n    >\r\n    </app-picker-toggle-text>\r\n  </span>\r\n</ng-template>\r\n\r\n<!-- Part for the AddNew button, which will either open the edit, or first show a menu with all the options -->\r\n<ng-template #addNew>\r\n  @if (features().showAddNewButton) {\r\n    @if (pickerData.state.typesForNew().length > 1) {\r\n      <button\r\n        mat-icon-button\r\n        class=\"picker-inline-button\"\r\n        tippyTranslate=\"Fields.Picker.New\"\r\n        [disabled]=\"ui().disabled || !features().create\"\r\n        [matMenuTriggerFor]=\"entityTypesMenu\"\r\n      >\r\n        <mat-icon>add_circle_outline</mat-icon>\r\n      </button>\r\n      <mat-menu #entityTypesMenu=\"matMenu\">\r\n        @for (ct of pickerData.state.typesForNew(); track ct) {\r\n          <button mat-menu-item (click)=\"openNewEntityDialog(ct.guid)\">\r\n            <span>{{ ct.label }}</span>\r\n          </button>\r\n        }\r\n      </mat-menu>\r\n    } @else {\r\n      <button\r\n        mat-icon-button\r\n        class=\"picker-inline-button\"\r\n        tippyTranslate=\"Fields.Picker.New\"\r\n        [disabled]=\"ui().disabled || !features().create\"\r\n        (click)=\"openNewEntityDialog(null)\"\r\n      >\r\n        <mat-icon>add_circle_outline</mat-icon>\r\n      </button>\r\n    }\r\n  }\r\n</ng-template>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { PickerCheckboxesComponent } from '../picker-checkboxes/picker-checkboxes.component';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\nimport { PickerPillsComponent } from '../picker-pills/picker-pills.component';\r\nimport { PickerRadioComponent } from '../picker-radio/picker-radio.component';\r\nimport { PickerSearchComponent } from '../picker-search/picker-search.component';\r\nimport { PickerTextToggleComponent } from '../picker-text-toggle/picker-text-toggle.component';\r\nimport { PickerTextComponent } from '../picker-text/picker-text.component';\r\n\r\n@Component({\r\n    selector: 'app-picker-preview',\r\n    templateUrl: './picker-preview.component.html',\r\n    styleUrls: ['./picker-preview.component.scss'],\r\n    imports: [\r\n        NgTemplateOutlet,\r\n        NgClass,\r\n        MatButtonModule,\r\n        MatMenuModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n        PickerPillsComponent,\r\n        PickerTextToggleComponent,\r\n        PickerSearchComponent,\r\n        PickerTextComponent,\r\n        PickerCheckboxesComponent,\r\n        PickerRadioComponent,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\nexport class PickerPreviewComponent extends PickerPartBaseComponent {\r\n\r\n  log = classLog({PickerPreviewComponent});\r\n\r\n  constructor() { super(); }\r\n\r\n  #pickerMode = this.fieldState.settingExt('PickerDisplayMode');\r\n\r\n  mode = computedObj('mode', () => {\r\n    if (this.isInFreeTextMode()) return 'text';\r\n    const pdm = this.#pickerMode();\r\n    switch (pdm) {\r\n      case 'radio': return 'radio';\r\n      case 'checkbox': return 'checkbox';\r\n      case 'auto-inline':\r\n        // TODO: Check if the selected exist in the options, if not, default to text\r\n        const pd = this.fieldState.pickerData;\r\n\r\n\r\n        // Multi-value should automatically use checkboxes\r\n        if (this.features().multiValue) return 'checkbox';\r\n        return 'radio';\r\n      case 'list':\r\n      default:\r\n        if (this.selectedItems().length > 1) return 'pills';\r\n        return 'search';\r\n    }\r\n  });\r\n\r\n  skipHelpText = computedObj('helpTextOnTop', () => {\r\n    const mode = this.mode();\r\n    return mode === 'radio' || mode === 'checkbox';\r\n  });\r\n\r\n}\r\n","\r\n@if (!features().multiValue) {\r\n  <mat-label class=\"field-label\"\r\n    [ngClass]=\"{ 'disabled': ui().disabled }\">\r\n    {{ basics().labelWithRequired }}\r\n  </mat-label>\r\n}\r\n@if (selectedItems().length > 0) {\r\n  <div\r\n    cdkDropList\r\n    [cdkDropListDisabled]=\"!features().multiValue || ui().disabled\"\r\n    (cdkDropListDropped)=\"drop($event)\"\r\n    class=\"my-list\"\r\n    [ngClass]=\"'my-list-' + (features().multiValue ? 'draggable' : 'static')\"\r\n  >\r\n    <!-- Normal list usually shows only one item, but can show \"empty slot\" / \"null-item\" in debug mode -->\r\n    @for (item of selectedItems(); track (item.value + $index); let index = $index) {\r\n      <div cdkDrag class=\"my-item\" [ngClass]=\"('my-item-' + (features().multiValue ? 'draggable' : 'static')) + ' ' + (ui().disabled ? 'disabled' : '')\">\r\n        <div class=\"item-title\" [ngClass]=\"{ 'disabled': ui().disabled }\">\r\n          <!-- visual Drag-Handle if sortable -->\r\n          @if (features().multiValue) {\r\n            <mat-icon class=\"item-title__icon\"\r\n              tippyTranslate=\"Fields.Picker.DragMove\"\r\n              [tippyDisabled]=\"ui().disabled\">\r\n              drag_handle\r\n            </mat-icon>\r\n          }\r\n          <span class=\"item-title__text\" [tippy]=\"item.tooltip\">\r\n            {{ item.label }}\r\n          </span>\r\n        </div>\r\n        <app-picker-item-buttons matSuffix class=\"my-item-actions\" [show]=\"true\" [item]=\"item\" [index]=\"index\"></app-picker-item-buttons>\r\n      </div>\r\n    }\r\n  </div>\r\n}\r\n","import { CdkDrag, CdkDragDrop, CdkDropList } from '@angular/cdk/drag-drop';\r\nimport { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerItem } from '../models/picker-item.model';\r\nimport { PickerItemButtonsComponent } from '../picker-item-buttons/picker-item-buttons.component';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\nimport { ReorderIndexes } from './reorder-index.models';\r\n\r\n@Component({\r\n    selector: 'app-picker-list',\r\n    templateUrl: './picker-list.component.html',\r\n    styleUrls: ['./picker-list.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatIconModule,\r\n        MatButtonModule,\r\n        NgClass,\r\n        CdkDropList,\r\n        CdkDrag,\r\n        PickerItemButtonsComponent,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PickerListComponent extends PickerPartBaseComponent {\r\n  \r\n  log = classLog({PickerListComponent});\r\n\r\n  constructor() { super(); }\r\n\r\n  drop(event: CdkDragDrop<PickerItem[]>): void {\r\n    this.pickerData.state.reorder({\r\n      previousIndex: event.previousIndex,\r\n      currentIndex: event.currentIndex,\r\n    } satisfies ReorderIndexes);\r\n  }\r\n\r\n}\r\n","<app-picker-list></app-picker-list>\r\n\r\n@if (!isInFreeTextMode()) {\r\n  <app-picker-search\r\n    [showSelectedItem]=\"false\"\r\n    [showItemEditButtons]=\"false\">\r\n  </app-picker-search>\r\n}\r\n@else {\r\n  <app-picker-text></app-picker-text>\r\n}\r\n<app-field-helper-text></app-field-helper-text>\r\n\r\n<!-- Note: this is almost the same as in picker-preview, but the styling (FAB) and icons are a bit different -->\r\n<!-- add new entity -->\r\n@if (showAddNewEntityButtonInDialog()) {\r\n  <div style=\"display: flex; justify-content: end\">\r\n    @if (pickerData.state.typesForNew().length > 1) {\r\n      <button\r\n        mat-mini-fab\r\n        color=\"accent\"\r\n        tippyTranslate=\"Fields.Picker.New\"\r\n        [disabled]=\"ui().disabled || !features().create\"\r\n        [matMenuTriggerFor]=\"entityTypesMenu\"\r\n      >\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n      <mat-menu #entityTypesMenu=\"matMenu\">\r\n        @for (ct of pickerData.state.typesForNew(); track ct) {\r\n          <button mat-menu-item (click)=\"openNewEntityDialog(ct.guid)\">\r\n            <span>{{ ct.label }}</span>\r\n          </button>\r\n        }\r\n      </mat-menu>\r\n    } @else {\r\n      <button\r\n        mat-mini-fab\r\n        color=\"accent\"\r\n        tippyTranslate=\"Fields.Picker.New\"\r\n        [disabled]=\"ui().disabled || !features().create\"\r\n        (click)=\"openNewEntityDialog(null)\"\r\n      >\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    }\r\n  </div>\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { PickerListComponent } from '../picker-list/picker-list.component';\r\nimport { PickerPartBaseComponent } from '../picker-part-base.component';\r\nimport { PickerSearchComponent } from '../picker-search/picker-search.component';\r\nimport { PickerTextComponent } from '../picker-text/picker-text.component';\r\n\r\n@Component({\r\n    selector: 'app-picker-dialog',\r\n    templateUrl: './picker-dialog.component.html',\r\n    imports: [\r\n        PickerListComponent,\r\n        PickerSearchComponent,\r\n        PickerTextComponent,\r\n        FieldHelperTextComponent,\r\n        MatButtonModule,\r\n        MatMenuModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PickerDialogComponent extends PickerPartBaseComponent {\r\n\r\n  protected showAddNewEntityButtonInDialog = computedObj('showAddNewEntityButtonInDialog', () => {\r\n    const features = this.features();\r\n    const settings = this.fieldState.settings();\r\n    const showAddNew = !this.isInFreeTextMode()\r\n      && settings.EnableCreate\r\n      && settings.CreateTypes\r\n      && features.multiValue;\r\n    return showAddNew;\r\n  });\r\n\r\n}\r\n","<!--\r\nThis template is used for all entity like fields,\r\ne.g. EntityDefault, EntityContentBlocks, EntityQuery, StringDropdownQuery\r\n-->\r\n<!-- <pre>Field.Picker Start - showPreview: {{ showPreview() }}</pre> -->\r\n@if (showPreview()) {\r\n  <!-- Had to disable defer 2024-06-14 2dm when Upgrading to Angular 17.3 from 17.0 before, seems to be module-related\r\n        can probably reactivate once modules are gone\r\n  -->\r\n  <!-- @defer { -->\r\n    <!-- <div>preview</div> -->\r\n    <app-picker-preview></app-picker-preview>\r\n  <!-- } -->\r\n}\r\n@else {\r\n  <!-- @defer { -->\r\n    <!-- <div>search, not preview</div> -->\r\n    <app-picker-dialog></app-picker-dialog>\r\n  <!-- } -->\r\n}\r\n<!-- <pre>Field.Picker End</pre> -->","import { Component, inject, Injector, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { FieldSettingsWithPickerSource } from '../../../../../../edit-types/src/PickerSources';\r\nimport { BaseComponent } from '../../../shared/components/base.component';\r\nimport { classLog, ClassLogger } from '../../../shared/logging';\r\nimport { computedObj } from '../../../shared/signals/signal.utilities';\r\nimport { FieldState } from '../../fields/field-state';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { PickerDataSetup } from './picker-data-setup';\r\nimport { PickerImports } from './picker-providers.constant';\r\nimport { PickerSearchComponent } from './picker-search/picker-search.component';\r\n\r\n@Component({\r\n    // selector: none since it's a base class\r\n    templateUrl: './picker.component.html',\r\n    imports: PickerImports\r\n})\r\nexport abstract class PickerComponent extends BaseComponent implements OnInit, OnDestroy {\r\n\r\n  /** Typed Log Specs for inheriting classes to reuse */\r\n  static logSpecs = {\r\n    all: false,\r\n    focusOnSearchComponent: true,\r\n    refreshOnChildClosed: false,\r\n    childFormResult: true,\r\n  };\r\n\r\n  log: ClassLogger<typeof PickerComponent.logSpecs>;\r\n  \r\n  constructor() { super(); }\r\n  \r\n  constructorEnd() {\r\n    this.log ??= classLog({PickerComponent}, PickerComponent.logSpecs);\r\n    this.log.a('constructor');\r\n    const pickerDataFactory = new PickerDataSetup(this.#injector);\r\n    pickerDataFactory.setupPickerData(this.#pickerData, this.#fieldState);\r\n  }\r\n\r\n  @ViewChild(PickerSearchComponent) protected entitySearchComponent: PickerSearchComponent;\r\n\r\n  /** The injector is used by most children to get transient one-time objects */\r\n  #injector = inject(Injector);\r\n  #editRoutingService = inject(EditRoutingService);\r\n  #fieldState = inject(FieldState) as FieldState<FieldValue, FieldSettingsWithPickerSource>;\r\n\r\n  #pickerData = this.#fieldState.pickerData;\r\n\r\n  /**\r\n   * Whether to show the preview or not,\r\n   * since this control is used both for preview and dialog.\r\n   */\r\n  showPreview = computedObj('showPreview', () => {\r\n    const s = this.#pickerData.features();\r\n    return !s.multiValue || (s.multiValue && !this.#fieldState.isOpen());\r\n  });\r\n\r\n  ngOnInit(): void {\r\n    if (this.#pickerData.closeWatcherAttachedWIP)\r\n      return;\r\n    this.#refreshOnChildClosed();\r\n    this.#pickerData.closeWatcherAttachedWIP = true;\r\n  }\r\n\r\n  #refreshOnChildClosed(): void {\r\n    const l = this.log.fnIf('refreshOnChildClosed');\r\n\r\n    // this is used when new entity is created in child form it automatically adds it to the picker as selected item\r\n    const config = this.#fieldState.config;\r\n    this.subscriptions.add(\r\n      // TODO: 2dm 2024-09-05 I believe this doesn't work as expected\r\n      this.#editRoutingService.childFormResult(config.index, config.entityGuid)\r\n        .subscribe(result => {\r\n          const l2 = this.log.fnIf('childFormResult', { result });\r\n          return l2.r(this.#pickerData.addNewlyCreatedItem(result));\r\n        })\r\n    );\r\n    l.end();\r\n  }\r\n}\r\n","import { PickerOptionCustom } from '../../../../../../../edit-types/src/DropdownOption';\r\nimport { classLog } from '../../../../shared/logging/logging';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  calculateDropdownOptions: true,\r\n  addSelectedIfMissing: true,\r\n}\r\n\r\nexport class DataSourceDropDownOptions {\r\n  log = classLog({DataSourceDropDownOptions}, logSpecs);\r\n\r\n  constructor() { }\r\n\r\n  parseOptions(\r\n    currentValue: string | number | null,\r\n    type: 'string' | 'number',\r\n    dropdownValuesFormat: '' | 'value-label', // first one is empty as a compatibility with old 2sxc versions\r\n    dropdownValues: string\r\n  ): PickerOptionCustom[] {\r\n    const l = this.log.fn('calculateDropdownOptions', { currentValue, type, dropdownValuesFormat, dropdownValues });\r\n\r\n    if (!dropdownValues)\r\n      return l.r(this.addSelectedIfMissing([], currentValue), 'No dropdownValues');\r\n  \r\n    const lines = dropdownValues\r\n      .replace(/\\r/g, '')\r\n      .split('\\n');\r\n  \r\n    switch (dropdownValuesFormat) {\r\n      case '':\r\n        const classicOptions = lines.map(line => {\r\n          const s = line.split(':');\r\n          const maybeWantedEmptyVal = s[1];\r\n          const key = s.shift();    // first element is the key; remove it\r\n          const val = s.join(':');  // in case there are more than one colon, we'll join them back\r\n          return {\r\n            Title: key,\r\n            Value: (val || maybeWantedEmptyVal === '') ? val : key\r\n          } satisfies PickerOptionCustom;\r\n        });\r\n        return l.r(this.addSelectedIfMissing(classicOptions, currentValue));\r\n  \r\n      // Newer format, where the value is the first part, and the label is the rest\r\n      // Numbers can only be in this format, as we added the number-dropdowns later\r\n      case 'value-label':\r\n        const options = lines.map(line => {\r\n          // remove backslash escapes\r\n          const chars: { char: string, escaped: boolean }[] = [];\r\n          for (let i = 0; i < line.length; i++) {\r\n            const current = line[i];\r\n            const next = line[i + 1];\r\n  \r\n            if (current === '\\\\' && next != null) {\r\n              chars.push({ char: next, escaped: true });\r\n              i++;\r\n              continue;\r\n            }\r\n  \r\n            chars.push({ char: current, escaped: false });\r\n          }\r\n  \r\n          // dropdownValues split with \":\", but ignore if escaped\r\n          const separatorIndex = chars.findIndex(c => c.char === ':' && c.escaped === false);\r\n          const option: PickerOptionCustom = {\r\n            Title: separatorIndex >= 0\r\n              ? chars.slice(separatorIndex + 1, chars.length).map(c => c.char).join('')\r\n              : chars.map(c => c.char).join(''),\r\n            Value: separatorIndex >= 0\r\n              ? chars.slice(0, separatorIndex).map(c => c.char).join('')\r\n              : chars.map(c => c.char).join(''),\r\n          };\r\n          if (type === 'number') {\r\n            option.Value = option.Value != null && option.Value !== ''\r\n              ? !isNaN(Number(option.Value)) ? Number(option.Value) : null\r\n              : null;\r\n          }\r\n          return option;\r\n        });\r\n        return l.r(this.addSelectedIfMissing(options, currentValue));\r\n    }\r\n  }\r\n\r\n  addSelectedIfMissing(options: PickerOptionCustom[], currentValue: string | number | null): PickerOptionCustom[] {\r\n    const l = this.log.fn('addSelectedIfMissing', { options, currentValue });\r\n\r\n    if (currentValue == null || currentValue === '')\r\n      return l.r(options, 'currentValue is null');\r\n    \r\n    // Perform string-compare because we don't know if the currentValue is a number or a string\r\n    const currentString = currentValue.toString();\r\n    const currentValueFound = options.some(o => o.Value?.toString() === currentString);\r\n    if (currentValueFound)\r\n      return l.r(options, 'found');\r\n\r\n    // 2024-12-17 2dm - this condition doesn't seem to make sense, so turn it off until we\r\n    // understand when we would need it\r\n    // if (!currentValueFound && !currentValue && currentValue !== '') {\r\n      return l.r([\r\n        ...options,\r\n        {\r\n          Title: currentString,\r\n          Value: currentValue,\r\n        } \r\n      ]);\r\n    // }\r\n    // return l.r(options);\r\n  }\r\n}\r\n","import Papa from 'papaparse';\r\nimport { PickerOptionCustomExtended } from '../../../../../../../edit-types/src/DropdownOption';\r\nimport { classLog } from '../../../../shared/logging';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  parse: true,\r\n};\r\n\r\nexport class DataSourceParserCsv {\r\n  \r\n  log = classLog({DataSourceParserCsv}, logSpecs);\r\n\r\n  constructor() { }\r\n\r\n  parse(csv: string): PickerOptionCustomExtended[] {\r\n\r\n    const l = this.log.fnIf('parse', { csv });\r\n\r\n    const x = Papa.parse<PickerOptionCustomExtended>(csv, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      transformHeader: (header: string) => header.trim(),\r\n      transform: (value: string, header: string) => header == 'Value' ? value : value.trim(),\r\n      dynamicTyping: true,  // auto-detect booleans, numbers, etc\r\n    });\r\n\r\n    // If no data, return empty array\r\n    const data = x?.data;\r\n    if (!data || !Array.isArray(data) || data.length == 0) return [];\r\n\r\n    // Filter out all without a value property (but empty strings are ok)\r\n    const filtered = data.filter(d => d.Value !== undefined);\r\n\r\n    if (filtered.length != data.length)\r\n      console.warn('CSV contains rows without a value', { data, filtered });\r\n\r\n    // Use header to create empty object with all fields\r\n    const header = x?.meta.fields ?? [];\r\n    const preEmpty = header.reduce((acc, h) => ({\r\n      ...acc,\r\n      [h]: null }) as { [key: string]: any },\r\n      {}\r\n    ) as { [key: string]: any };\r\n    const { Value, ...empty } = preEmpty;\r\n    \r\n    l.a('Parsed CSV', { header, empty, data, filtered });\r\n\r\n    // Make sure all the rows have all the fields\r\n    const complete = filtered.map(f => ({\r\n      ...empty,\r\n      ...f,\r\n      Value: f.Value ?? '' // this is necessary, because the 'dynamicTyping' option will make it a null if it's empty\r\n    }));\r\n\r\n    return l.r(complete);\r\n  }\r\n}","import { Of } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsEntity, FieldSettingsPicker, FieldSettingsPickerMerged } from '../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { RelationshipParentChild, UiPickerModeTree } from '../../../../../../edit-types/src/PickerModeTree';\r\nimport { FieldSettingsWithPickerSource, PickerSourceCustomCsv, PickerSourceCustomList, PickerSourceEntity, PickerSourceQuery, UiPickerSourcesAll } from '../../../../../../edit-types/src/PickerSources';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavEntity } from '../../shared/models/eav';\r\nimport { DataSourceDropDownOptions } from '../basic/string-picker/string-picker.helpers';\r\nimport { FieldLogicUpdate } from '../logic/field-logic-base';\r\nimport { FieldLogicTools } from '../logic/field-logic-tools';\r\nimport { PickerConfigs, PickerSourcesCustom, UiPickerModeIsTree } from './constants/picker-config-model.constants';\r\nimport { DataSourceParserCsv } from './data-sources/data-source-parser-csv';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  getDataSourceAndSetupFieldSettings: true,\r\n  data: true,\r\n};\r\n\r\nexport class PickerLogicShared {\r\n\r\n  log = classLog({ PickerLogicShared }, logSpecs);\r\n\r\n  constructor() { }\r\n\r\n  static setDefaultSettings(settings: FieldSettings): FieldSettings {\r\n    const s = settings as FieldSettings & FieldSettingsPickerMerged;\r\n    s.AllowMultiValue ??= false;\r\n    s.EnableEdit ??= true;\r\n    s.EnableCreate ??= true;\r\n    s.EnableAddExisting ??= true;\r\n    // if multi-value is ever allowed, then we must also enable remove...\r\n    s.EnableRemove ??= true;\r\n    s.EnableDelete ??= false;\r\n    s.Label ??= '';\r\n    s.EnableTextEntry ??= false;\r\n\r\n    s.noAutoFocus = true;\r\n\r\n    return s;\r\n  }\r\n\r\n  static maybeOverrideEditRestrictions(fsUntyped: FieldSettings, tools: FieldLogicTools): { fs: FieldSettings, removeEditRestrictions: boolean } {\r\n    const fs = fsUntyped as FieldSettings & FieldSettingsPickerMerged;\r\n    if (!(tools.eavConfig.removeEditRestrictions && tools.debug))\r\n      return { fs, removeEditRestrictions: false };\r\n\r\n    console.log(`SystemAdmin + Debug: Overriding edit restrictions for field \\'${fs.Name}\\' (EntityType: \\'${fs.EntityType}\\').`);\r\n    fs.EnableEdit = true;\r\n    fs.EnableCreate = true;\r\n    fs.EnableAddExisting = true;\r\n    fs.EnableRemove = true;\r\n    fs.EnableDelete = true;\r\n    return { fs, removeEditRestrictions: true };\r\n  }\r\n\r\n  preUpdate({ settings, tools, value }: FieldLogicUpdate) {\r\n\r\n    const fsDefaults = PickerLogicShared.setDefaultSettings({ ...settings });\r\n\r\n    const { fs: fsRaw, removeEditRestrictions } = PickerLogicShared.maybeOverrideEditRestrictions(fsDefaults, tools);\r\n\r\n    const { fs, typeConfig } = new PickerLogicShared().#getDataSourceAndSetupFieldSettings(value, fsRaw, tools);\r\n\r\n    return { fs, removeEditRestrictions, typeConfig };\r\n  }\r\n\r\n\r\n  #getDataSourceAndSetupFieldSettings(value: FieldValue, fsBasic: FieldSettings, tools: FieldLogicTools) {\r\n    // Define field settings to be a merged FieldSettings and PickerSources\r\n    const fs = fsBasic as FieldSettingsWithPickerSource & FieldSettingsPickerMerged;\r\n\r\n    const dataSources: EavEntity[] = (fs.DataSources?.length > 0)\r\n      ? tools.contentTypeItemSvc.getMany(fs.DataSources)\r\n      : [];\r\n\r\n    // Transfer configuration\r\n    const dataSource = dataSources[0];\r\n    const typeName = dataSource?.Type.Name as Of<typeof PickerConfigs>;\r\n    fs.dataSourceType = typeName ?? '' as Of<typeof PickerConfigs>;\r\n\r\n    // DataSource may not be configured yet, in which case the object is just {}\r\n    const typeConfig = tools.reader.flatten<UiPickerSourcesAll>(dataSource);\r\n\r\n    const isKnownType = Object.values(PickerConfigs).includes(typeName);\r\n\r\n    const l = this.log.fn('dataSources', { dataSources });\r\n\r\n    l.values({ typeName, isKnownType, dataSources, typeConfig });\r\n\r\n    if (!isKnownType) {\r\n      console.error(`Unknown picker source type: '${typeName}' on field ${fs.Name}`);\r\n      return { fs, typeConfig };\r\n    }\r\n\r\n    // Properties to transfer from just about all sources\r\n    fs.CreateTypes = typeConfig.CreateTypes ?? '';// possible multiple types\r\n    fs.MoreFields = typeConfig.MoreFields ?? '';\r\n    fs.Label = typeConfig.Label ?? '';\r\n    fs.ItemInformation = typeConfig.ItemInformation ?? '';\r\n    fs.ItemTooltip = typeConfig.ItemTooltip ?? '';\r\n    fs.ItemLink = typeConfig.ItemLink ?? '';\r\n    fs.PreviewType = typeConfig.PreviewType ?? '';\r\n\r\n    // May specify another value to be used as the value - eg. for strings/numbers\r\n    fs.Value = typeConfig.Value ?? '';\r\n\r\n    // Do this for all, as it's a common property - e.g. Css, AppAssets, etc.\r\n    fs.PreviewValue = typeConfig.PreviewValue ?? '';\r\n\r\n    const sourceIsQuery = typeName === PickerConfigs.UiPickerSourceQuery;\r\n    const sourceIsEntity = typeName === PickerConfigs.UiPickerSourceEntity;\r\n    const sourceIsCss = typeName === PickerConfigs.UiPickerSourceCss;\r\n    const sourceIsAppAssets = typeName === PickerConfigs.UiPickerSourceAppAssets;\r\n\r\n    l.values({ sourceIsQuery, sourceIsEntity, sourceIsCss, sourceIsAppAssets });\r\n\r\n    const isCustomSource = Object.values(PickerSourcesCustom).includes(typeName as Of<typeof PickerSourcesCustom>);\r\n\r\n    /** Query Data Source */\r\n    if (sourceIsQuery) {\r\n      const specsQuery = typeConfig as PickerSourceQuery;\r\n      fs.Query = specsQuery.Query ?? '';\r\n      fs.StreamName = specsQuery.StreamName ?? 'Default';// stream name could be multiple stream names\r\n      fs.UrlParameters = specsQuery.QueryParameters ?? '';\r\n    }\r\n\r\n    /** Entity Data Source */\r\n    if (sourceIsEntity) {\r\n      const specsEntity = typeConfig as PickerSourceEntity;\r\n      (fs as FieldSettingsEntity).EntityType = specsEntity.ContentTypeNames ?? '';// possible multiple types\r\n    }\r\n\r\n    /** Css File Data Source */\r\n    if (sourceIsCss) {\r\n      fs.CssSourceFile = typeConfig.CssSourceFile ?? '';\r\n      fs.CssSelectorFilter = typeConfig.CssSelectorFilter ?? '';\r\n    }\r\n\r\n    /** App Assets Source */\r\n    if (sourceIsAppAssets) {\r\n      fs.AssetsRootFolder = typeConfig.AssetsRootFolder ?? '/';\r\n      fs.AssetsFileFilter = typeConfig.AssetsFileFilter ?? '*.*';\r\n      fs.AssetsType = typeConfig.AssetsType ?? 'files';\r\n      fs.requiredFeatures = [FeatureNames.PickerSourceAppAssets];\r\n    }\r\n\r\n    if (isCustomSource) {\r\n      if (typeName === PickerConfigs.UiPickerSourceCustomList) {\r\n        const valuesRaw = (typeConfig as UiPickerSourcesAll & PickerSourceCustomList).Values ?? '';\r\n        // note that 'value-label' is the only format supported by the new picker config\r\n        fs._options ??= new DataSourceDropDownOptions().parseOptions(value as string, 'string', 'value-label', valuesRaw) ?? [];\r\n      } else if (typeName === PickerConfigs.UiPickerSourceCustomCsv) {\r\n        const csv = (typeConfig as UiPickerSourcesAll & PickerSourceCustomCsv).Csv;\r\n        fs._options ??= new DataSourceParserCsv().parse(csv);\r\n        fs.requiredFeatures = [FeatureNames.PickerSourceCsv];\r\n      }\r\n    }\r\n\r\n    // If AllowMultiValue is false then EnableReselect must be false\r\n    fs.AllowMultiValue ? fs.EnableReselect ??= false : fs.EnableReselect = false;\r\n    // If AllowMultiValue is false then AllowMultiMin and AllowMultiMax must be 0 so we don't trigger the validation\r\n    if (fs.AllowMultiValue) {\r\n      fs.AllowMultiMin ??= 0;\r\n      fs.AllowMultiMax ??= 0;\r\n    } else {\r\n      fs.AllowMultiMin = 0;\r\n      fs.AllowMultiMax = 0;\r\n    }\r\n\r\n    // Display Mode and configuration of that\r\n    fs.PickerDisplayMode ??= 'list';\r\n    fs.PickerDisplayConfiguration ??= [];\r\n\r\n    // Tree configuration WIP\r\n    fs.PickerTreeConfiguration = this.#getTreeConfigOnce(fs, tools);\r\n\r\n    return { fs, typeConfig };\r\n  }\r\n\r\n  /** Get the tree config, unless it was already created, in which case we reuse it. */\r\n  #getTreeConfigOnce(fs: FieldSettings & FieldSettingsPicker, tools: FieldLogicTools): UiPickerModeTree {\r\n    if (fs.PickerTreeConfiguration)\r\n      return fs.PickerTreeConfiguration;\r\n\r\n    if (fs.PickerDisplayMode !== 'tree')\r\n      return null;\r\n\r\n    // Tree configuration WIP\r\n    const pickerDisplayConfigurations: EavEntity[] = (fs.PickerDisplayConfiguration?.length > 0)\r\n      ? tools.contentTypeItemSvc.getMany(fs.PickerDisplayConfiguration)\r\n      : [];\r\n\r\n    const pickerDisplayConfigName = pickerDisplayConfigurations[0]?.Type.Name;\r\n\r\n    if (pickerDisplayConfigName !== UiPickerModeIsTree)\r\n      return null;\r\n\r\n    const specs = tools.reader.flatten<UiPickerModeTree>(pickerDisplayConfigurations[0]);\r\n    const final: UiPickerModeTree = {\r\n      Title: specs.Title ?? '',\r\n      ConfigModel: UiPickerModeIsTree,\r\n      TreeRelationship: specs.TreeRelationship ?? RelationshipParentChild,\r\n      TreeBranchesStream: specs.TreeBranchesStream ?? 'Default',\r\n      TreeLeavesStream: specs.TreeLeavesStream ?? 'Default',\r\n      TreeParentIdField: specs.TreeParentIdField ?? 'Id',\r\n      TreeChildIdField: specs.TreeChildIdField ?? 'Id',\r\n      TreeParentChildRefField: specs.TreeParentChildRefField ?? 'Children',\r\n      TreeChildParentRefField: specs.TreeChildParentRefField ?? 'Parent',\r\n      TreeShowRoot: specs.TreeShowRoot ?? true,\r\n      TreeDepthMax: specs.TreeDepthMax ?? 10,\r\n      TreeAllowSelectRoot: specs.TreeAllowSelectRoot ?? true,\r\n      TreeAllowSelectBranch: specs.TreeAllowSelectBranch ?? true,\r\n      TreeAllowSelectLeaf: specs.TreeAllowSelectLeaf ?? true,\r\n    } satisfies UiPickerModeTree;\r\n    return final;\r\n  }\r\n\r\n}\r\n","import { PickerSourceEntity } from 'projects/edit-types/src/PickerSources';\r\nimport { FieldSettingsEntity, FieldSettingsSharedCreate } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { PickerLogicShared } from '../../picker/picker-logic-shared';\r\nimport { FieldSettings } from './../../../../../../../edit-types/src/FieldSettings';\r\n\r\nexport class EntityDefaultLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.EntityDefault;\r\n  \r\n  constructor() { super({ EntityDefaultLogic }); }\r\n\r\n  update({ settings, tools }: FieldLogicUpdate): FieldSettings {\r\n    \r\n    const fsRaw = PickerLogicShared.setDefaultSettings({ ...settings }) as FieldSettings & FieldSettingsSharedCreate & FieldSettingsEntity;\r\n    \r\n    // Both the query type and create-type are the same\r\n    fsRaw.EntityType ??= '';\r\n    fsRaw.CreateTypes = fsRaw.EntityType ?? '';\r\n\r\n    // The old entity-type has a prefill, which is now the create-prefill\r\n    (fsRaw as unknown as PickerSourceEntity).CreatePrefill ??= fsRaw.Prefill;\r\n    delete fsRaw.Prefill;\r\n\r\n    const fs = PickerLogicShared.maybeOverrideEditRestrictions(fsRaw, tools).fs;\r\n    \r\n    return fs;\r\n  }\r\n\r\n}\r\n\r\nFieldLogicBase.add(EntityDefaultLogic);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { EntityDefaultLogic } from './entity-default-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EntityDefault,\r\n    templateUrl: '../../picker/picker.component.html',\r\n    imports: PickerImports\r\n})\r\nexport class EntityDefaultComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({EntityDefaultComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    EntityDefaultLogic.importMe();\r\n  }\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { EntityContentBlocksLogic } from './entity-content-blocks-logic';\r\nimport { EntityDefaultComponent } from '../entity-default/entity-default.component';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EntityContentBlocks,\r\n    templateUrl: '../../picker/picker.component.html',\r\n    imports: PickerImports\r\n})\r\nexport class EntityContentBlockComponent extends EntityDefaultComponent implements OnInit, OnDestroy {\r\n\r\n  constructor() {\r\n    super();\r\n    EntityContentBlocksLogic.importMe();\r\n  }\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { PickerLogicShared } from '../../picker/picker-logic-shared';\r\n\r\nexport class EntityPickerLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.EntityPicker;\r\n\r\n  constructor() { super({ EntityPickerLogic }); }\r\n\r\n  update(specs: FieldLogicUpdate): FieldSettings {\r\n    return new PickerLogicShared().preUpdate(specs).fs;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(EntityPickerLogic);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { EntityPickerLogic } from './entity-picker-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EntityPicker,\r\n    templateUrl: '../../picker/picker.component.html',\r\n    imports: PickerImports\r\n})\r\nexport class EntityPickerComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({EntityPickerComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    EntityPickerLogic.importMe();\r\n  }\r\n\r\n}\r\n","import { FieldSettingsEntityQuery } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { FieldLogicManager } from '../../logic/field-logic-manager';\r\nimport { EntityDefaultLogic } from '../entity-default/entity-default-logic';\r\nimport { FieldSettings } from './../../../../../../../edit-types/src/FieldSettings';\r\n\r\nexport class EntityQueryLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.EntityQuery;\r\n\r\n  constructor() { super({ EntityQueryLogic }); }\r\n\r\n  update(updateSpecs: FieldLogicUpdate<string[]>): FieldSettings {\r\n    const entityDefaultLogic = FieldLogicManager.singleton().get(InputTypeCatalog.EntityDefault) as EntityDefaultLogic;\r\n    const s = entityDefaultLogic.update(updateSpecs) as FieldSettings & FieldSettingsEntityQuery;\r\n    s.Query ??= '';\r\n    s.StreamName ||= 'Default';\r\n    s.UrlParameters ??= '';\r\n    return s;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(EntityQueryLogic);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { EntityQueryLogic } from './entity-query-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.EntityQuery,\r\n    templateUrl: '../../picker/picker.component.html',\r\n    imports: PickerImports\r\n})\r\nexport class EntityQueryComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({EntityQueryComponent}, PickerComponent.logSpecs);\r\n  \r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    EntityQueryLogic.importMe();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { AdamConfig } from '../../../../../../edit-types/src/AdamConfig';\r\nimport { AdamItem } from '../../../../../../edit-types/src/AdamItem';\r\nimport { HttpServiceBase } from '../../../shared/services/http-service-base';\r\nimport { LinkInfo } from '../../dialog/main/edit-dialog-main.models';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { SanitizeHelper } from '../helpers';\r\n\r\n/**\r\n * Form wide ADAM helper to get files, add folders etc.\r\n * Must be created once per edit-form, as it needs the exact app etc.\r\n */\r\n@Injectable()\r\nexport class AdamService extends HttpServiceBase {\r\n\r\n  constructor(private formConfig: FormConfigService) {\r\n    super();\r\n  }\r\n\r\n  getAll(url: string, config: AdamConfig) {\r\n    return this.getHttp<AdamItem[]>(\r\n      url + '/items',\r\n      {\r\n        params: {\r\n          subfolder: config.subfolder,\r\n          usePortalRoot: config.usePortalRoot.toString(),\r\n          appId: this.formConfig.config.appId,\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  addFolder(newFolderName: string, url: string, config: AdamConfig) {\r\n    return this.http.post<AdamItem[]>(\r\n      url + '/folder',\r\n      {},\r\n      {\r\n        params: {\r\n          subfolder: config.subfolder,\r\n          newFolder: SanitizeHelper.sanitizeName(newFolderName),\r\n          usePortalRoot: config.usePortalRoot.toString(),\r\n          appId: this.formConfig.config.appId,\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  rename(item: AdamItem, newName: string, url: string, config: AdamConfig) {\r\n    return this.getHttp<boolean>(\r\n      url + '/rename',\r\n      {\r\n        params: {\r\n          subfolder: config.subfolder,\r\n          isFolder: item.IsFolder.toString(),\r\n          id: item.Id.toString(),\r\n          usePortalRoot: config.usePortalRoot.toString(),\r\n          newName: SanitizeHelper.sanitizeName(newName),\r\n          appId: this.formConfig.config.appId,\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  deleteItem(item: AdamItem, url: string, config: AdamConfig) {\r\n    return this.getHttp<boolean>(\r\n      url + '/delete',\r\n      {\r\n        params: {\r\n          subfolder: config.subfolder,\r\n          isFolder: item.IsFolder.toString(),\r\n          id: item.Id.toString(),\r\n          usePortalRoot: config.usePortalRoot.toString(),\r\n          appId: this.formConfig.config.appId,\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  getLinkInfo(\r\n    link: string,\r\n    contentType: string,\r\n    guid: string,\r\n    field: string\r\n  ): Observable<LinkInfo> {\r\n    return this.getHttp<LinkInfo>(\r\n      this.apiUrl('cms/edit/linkInfo'),\r\n      {\r\n        params: {\r\n          link,\r\n          ...(guid && { guid }),\r\n          ...(contentType && { contentType }),\r\n          ...(field && { field }),\r\n          appid: this.formConfig.config.appId,\r\n        },\r\n      }\r\n    );\r\n  }\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { Connector } from '../../../../../../edit-types/src/Connector';\r\nimport { ConnectorDialog } from '../../../../../../edit-types/src/ConnectorDialog';\r\nimport { ConnectorData } from '../../../../../../edit-types/src/ConnectorData';\r\nimport { FieldConfig } from '../../../../../../edit-types/src/FieldConfig';\r\nimport { ExperimentalProps } from '../../../../../../edit-types/src/ExperimentalProps';\r\nimport { loadScripts } from '../../../shared/helpers/load-scripts.helper';\r\nimport { FormConfiguration } from '../../form/form-configuration.model';\r\nimport { Signal } from '@angular/core';\r\nimport { ScriptsLoaderService } from '../../shared/services/scripts-loader.service';\r\nimport { toObservable } from '@angular/core/rxjs-interop';\r\nimport { classLog } from '../../../shared/logging';\r\n\r\nexport class ConnectorInstance<T = any> implements Connector<T> {\r\n  \r\n  log = classLog({ConnectorInstance});\r\n  \r\n  data: ConnectorData<T>;\r\n  dialog: ConnectorDialog;\r\n  loadScript: (...args: any[]) => void;\r\n\r\n  get field() { return this.fieldConfigSignal(); }\r\n\r\n  get field$() { return this.#field$ ??= toObservable(this.fieldConfigSignal, { injector: this._experimental.injector }) }\r\n  #field$: Observable<FieldConfig>;\r\n\r\n  constructor(\r\n    _connectorHost: ConnectorHost<T>,\r\n    value$: Observable<T>,\r\n    private fieldConfigSignal: Signal<FieldConfig>,\r\n    public _experimental: ExperimentalProps,\r\n    formConfig: FormConfiguration,\r\n  ) {\r\n    this.data = new ConnectorDataInstance<T>(_connectorHost, value$);\r\n    this.dialog = new ConnectorDialogInstance<T>(_connectorHost);\r\n\r\n    this.loadScript = (\r\n      testOrScripts: string | (() => boolean) | { test: string | (() => boolean); src: string }[],\r\n      srcOrCallback: string | (() => void),\r\n      callback?: () => void,\r\n    ) => {\r\n      // one script (3 parameters: global or test, script url and a callback)\r\n      const isMainSignature = (typeof testOrScripts === 'string' || typeof testOrScripts === 'function')\r\n        && typeof srcOrCallback === 'string'\r\n        && typeof callback === 'function';\r\n      if (isMainSignature) {\r\n        srcOrCallback = ScriptsLoaderService.resolveUrlTokens(srcOrCallback as string, formConfig);\r\n        loadScripts([{ test: testOrScripts, src: srcOrCallback }], callback);\r\n        return;\r\n      }\r\n      // multiple scripts (2 parameters: scripts array and a callback)\r\n      if (Array.isArray(testOrScripts) && typeof srcOrCallback === 'function') {\r\n        for (const script of testOrScripts)\r\n          script.src = ScriptsLoaderService.resolveUrlTokens(script.src, formConfig);\r\n        loadScripts(testOrScripts, srcOrCallback);\r\n        return;\r\n      }\r\n      throw new Error('Unrecognized parameters. Please double check your input');\r\n    };\r\n  }\r\n}\r\n\r\nclass ConnectorDataInstance<T> implements ConnectorData<T> {\r\n  value: T;\r\n  clientValueChangeListeners: ((newValue: T) => void)[] = [];\r\n\r\n  constructor(private _connectorHost: ConnectorHost<T>, public value$: Observable<T>) {\r\n    // Host will complete this observable. Therefore unsubscribe is not required\r\n    this.value$.subscribe(newValue => {\r\n      this.value = newValue;\r\n      this.clientValueChangeListeners.forEach(callback => callback(newValue));\r\n    });\r\n  }\r\n\r\n  update(newValue: T) {\r\n    this._connectorHost.update(newValue);\r\n  }\r\n\r\n  onValueChange(callback: (newValue: T) => void) {\r\n    this.clientValueChangeListeners.push(callback);\r\n  }\r\n}\r\n\r\nclass ConnectorDialogInstance<T> implements ConnectorDialog {\r\n  constructor(private _connectorHost: ConnectorHost<T>) { }\r\n\r\n  open(componentTag?: string) {\r\n    return this._connectorHost.expand(true, componentTag);\r\n  }\r\n\r\n  close() {\r\n    this._connectorHost.expand(false);\r\n  }\r\n}\r\n\r\n/** Props and methods available to the connector to communicate with the host */\r\nexport interface ConnectorHost<T = any> {\r\n  update: (value: T) => void;\r\n  expand: (expand: boolean, componentTag?: string) => void;\r\n}\r\n","import { ChangeDetectorRef, ElementRef, Injectable, Injector, NgZone, OnDestroy, ViewContainerRef, computed, effect, inject } from '@angular/core';\r\nimport { AbstractControl } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { distinctUntilChanged, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../../core';\r\nimport { EavCustomInputField } from '../../../../../../edit-types/src/EavCustomInputField';\r\nimport { FieldConfig } from '../../../../../../edit-types/src/FieldConfig';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { openFeatureDialog } from '../../../features/shared/base-feature.component';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { ServiceBase } from '../../../shared/services/service-base';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { AdamService } from '../../shared/adam/adam.service';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { UiControl } from '../../shared/controls/ui-control';\r\nimport { FieldMask } from '../../shared/helpers';\r\nimport { InputTypeService } from '../../shared/input-types/input-type.service';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\nimport { FieldState } from '../field-state';\r\nimport { PagePicker } from '../page-picker/page-picker.helper';\r\nimport { ExperimentalProps } from './../../../../../../edit-types/src/ExperimentalProps';\r\nimport { FieldValue } from './../../../../../../edit-types/src/FieldValue';\r\nimport { ConnectorHost, ConnectorInstance } from './connector-instance.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  init: true,\r\n  getUrlOfId: false,\r\n  updateControl: false,\r\n  openFeatureDisabledWarning: false,\r\n};\r\n\r\n@Injectable()\r\nexport class ConnectorHelper extends ServiceBase implements OnDestroy {\r\n  \r\n  log = classLog({ConnectorHelper}, logSpecs);\r\n  \r\n  #injector = inject(Injector);\r\n  #fieldState = inject(FieldState);\r\n  #formConfig = inject(FormConfigService);\r\n  #translateService = inject(TranslateService);\r\n  #contentTypeService = inject(ContentTypeService);\r\n  #inputTypeService = inject(InputTypeService);\r\n  #featuresService = inject(FeaturesService);\r\n  #editRoutingService = inject(EditRoutingService);\r\n  #dialog = inject(MatDialog);\r\n  #snackBar = inject(MatSnackBar);\r\n  #zone = inject(NgZone);\r\n  \r\n  #adamService = transient(AdamService);\r\n\r\n  constructor() {\r\n    super();\r\n    this.log.aIf('constructor')\r\n  }\r\n\r\n  #customEl: EavCustomInputField;\r\n  #value$ = this.#fieldState.ui().control.valueChanges.pipe(startWith(this.#fieldState.uiValue()), distinctUntilChanged(isEqual));\r\n\r\n  #config = this.#fieldState.config;\r\n  #group = this.#fieldState.group;\r\n\r\n  #viewContainerRef: ViewContainerRef;\r\n  #changeDetectorRef: ChangeDetectorRef;\r\n\r\n  public init(\r\n    customElName: string,\r\n    customElContainerRef: ElementRef,\r\n    viewContainerRef: ViewContainerRef,\r\n    changeDetectorRef: ChangeDetectorRef,\r\n  ): this {\r\n    this.log.a('init');\r\n    this.#viewContainerRef = viewContainerRef;\r\n    this.#changeDetectorRef = changeDetectorRef;\r\n    this.#customEl = document.createElement(customElName) as EavCustomInputField;\r\n    this.#customEl.connector = this.#buildConnector();\r\n    customElContainerRef.nativeElement.appendChild(this.#customEl);\r\n    return this;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.log.a('ngOnDestroy');\r\n    this.#customEl?.parentNode.removeChild(this.#customEl);\r\n    this.#customEl = null;\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  #buildConnector() {\r\n    const connectorHost = this.#getCallbacks();\r\n    const experimental = this.#buildExperimentalProps();\r\n    const fieldConfigSignal = computed(() => {\r\n      const settings = this.#fieldState.settings();\r\n      return toFieldConfig(this.#config, settings);\r\n    }, { equal: isEqual});\r\n    const connector = new ConnectorInstance(connectorHost, this.#value$, fieldConfigSignal, experimental, this.#formConfig.config);\r\n\r\n    effect(() => {\r\n      const s = this.#fieldState.settings();\r\n      const field = connector.field as FieldConfig;\r\n      field.settings = s;\r\n      field.label = s.Name;\r\n      field.placeholder = s.Placeholder;\r\n      field.required = s.valueRequired;\r\n    }, { injector: this.#injector });\r\n    return connector;\r\n  }\r\n\r\n  #getCallbacks() {\r\n    const connectorHost: ConnectorHost = {\r\n      update: (value) => {\r\n        this.#zone.run(() => this.#updateControl(value));\r\n      },\r\n      expand: (expand, componentTag) => {\r\n        this.#zone.run(() => this.#editRoutingService.expand(expand, this.#config.index, this.#config.entityGuid, componentTag));\r\n      },\r\n    };\r\n    return connectorHost;\r\n  }\r\n\r\n  #buildExperimentalProps() {\r\n    const contentType = this.#contentTypeService.get(this.#config.contentTypeNameId);\r\n    const allInputTypeNames = this.#inputTypeService.getAttributeInputTypes(contentType.Attributes);\r\n\r\n    const lEx = classLog(\"ConnectorHelperExperimental\");\r\n\r\n    const experimentalProps: ExperimentalProps = {\r\n      entityGuid: this.#config.entityGuid,\r\n      allInputTypeNames,\r\n      formGroup: this.#group,\r\n      translateService: this.#translateService,\r\n      isExpanded$: this.#editRoutingService.isExpanded$(this.#config.index, this.#config.entityGuid),\r\n      dropzone: this.#config.dropzone,\r\n      adam: this.#config.adam,\r\n      updateField: (name, value) => {\r\n        lEx.fn('updateField', { name, value });\r\n        this.#zone.run(() => { this.#updateControl(value, this.#group.controls[name]); });\r\n      },\r\n      isFeatureEnabled: this.#featuresService.isEnabled,\r\n      setFocused: (focused) => {\r\n        lEx.fn('setFocused', { focused });\r\n        this.#zone.run(() => { this.#config.focused$.next(focused); });\r\n      },\r\n      openPagePicker: (callback) => {\r\n        lEx.fn('openPagePicker');\r\n        this.#zone.run(() => {\r\n          PagePicker.open(this.#config, this.#group, this.#dialog, this.#viewContainerRef, this.#changeDetectorRef, callback);\r\n        });\r\n      },\r\n      featureDisabledWarning: (featureNameId) => {\r\n        lEx.fn('featureDisabledWarning', { featureNameId });\r\n        this.#zone.run(() => {\r\n          this.#openFeatureDisabledWarning(featureNameId);\r\n        });\r\n      },\r\n      getUrlOfId: (value, callback) => {\r\n        lEx.fn('getUrlOfId', { value });\r\n        this.#zone.run(() => { this.#getUrlOfId(value, callback); });\r\n      },\r\n      getSettings: (name) => this.#formConfig.config.settings?.Values[name],\r\n\r\n      getFieldMask: (mask: string, name?: string) => {\r\n        return transient(FieldMask, this.#injector).init(name, mask);\r\n      },\r\n\r\n      injector: this.#injector,\r\n    };\r\n\r\n    return experimentalProps;\r\n  }\r\n\r\n  #getUrlOfId(value: string, callback: (value: string) => void) {\r\n    if (!value) return;\r\n\r\n    // handle short-ID links like file:17\r\n    const contentType = this.#config.contentTypeNameId;\r\n    const entityGuid = this.#config.entityGuid;\r\n    const field = this.#config.fieldName;\r\n    this.#adamService.getLinkInfo(value, contentType, entityGuid, field).subscribe(linkInfo => {\r\n      if (!linkInfo) return;\r\n      callback(linkInfo.Value);\r\n    });\r\n  }\r\n\r\n  #updateControl(value: FieldValue, control: AbstractControl = null) {\r\n    const ui = control ? new UiControl(control) : this.#fieldState.ui();\r\n    if (ui.disabled) return;\r\n    this.#fieldState.ui().setIfChanged(value);\r\n  }\r\n\r\n  #openFeatureDisabledWarning(featureNameId: string) { \r\n    if (featureNameId === FeatureNames.PasteImageFromClipboard) {\r\n      this.#snackBar.open(this.#translateService.instant('Message.PastingFilesIsNotEnabled'), this.#translateService.instant('Message.FindOutMore'), { duration: 3000 })\r\n        .onAction()\r\n        .subscribe(() => openFeatureDialog(this.#dialog, FeatureNames.PasteImageFromClipboard, this.#viewContainerRef, this.#changeDetectorRef));\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * This function must stay here and not be in the edit-types folder,\r\n * otherwise too many dependencies are added because the FieldConfigSet is used.\r\n * @param config \r\n * @param settings \r\n * @returns \r\n */\r\nfunction toFieldConfig(config: FieldConfigSet, settings: FieldSettings): FieldConfig {\r\n  return {\r\n    name: config.fieldName,\r\n    index: config.index,\r\n    label: settings.Name,\r\n    placeholder: settings.Placeholder,\r\n    inputType: config.inputTypeSpecs.inputType,\r\n    type: config.type,\r\n    required: settings.valueRequired,\r\n    disabled: config.initialDisabled,\r\n    settings,\r\n  } satisfies FieldConfig;\r\n}","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, inject, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { transient } from '../../../../../../core/transient';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldState } from '../field-state';\r\nimport { ConnectorHelper } from './connector.helper';\r\n\r\n@Component({\r\n  selector: 'app-connector',\r\n  templateUrl: './connector.component.html',\r\n})\r\nexport class ConnectorComponent implements AfterViewInit {\r\n\r\n  log = classLog({ConnectorComponent});\r\n\r\n  /** Child tag which will contain the inner html */\r\n  @ViewChild('customElContainer') private customElContainerRef: ElementRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  private connectorCreator = transient(ConnectorHelper);\r\n  private viewContainerRef = inject(ViewContainerRef);\r\n  private changeDetectorRef = inject(ChangeDetectorRef);\r\n\r\n  constructor() { }\r\n\r\n  ngAfterViewInit() {\r\n    const l = this.log.fn('ngAfterViewInit');\r\n    const componentTag = history?.state?.componentTag || this.fieldState.config.inputTypeSpecs.componentTagDialogName;\r\n    l.a('Connector created for:', { componentTag });\r\n    this.connectorCreator.init(\r\n      componentTag,\r\n      this.customElContainerRef,\r\n      this.viewContainerRef,\r\n      this.changeDetectorRef,\r\n    );\r\n  }\r\n\r\n}\r\n","<div #customElContainer style=\"height:100%; position:relative;\"></div>\r\n","import { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\n\r\nexport class CustomGpsLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.CustomGps;\r\n\r\n  constructor() { super({ CustomGpsLogic }); }\r\n\r\n  update({ settings }: FieldLogicUpdate): FieldSettings {\r\n    const fixedSettings: FieldSettings = { ...settings };\r\n    // fixedSettings.DisableAutoTranslation = true;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(CustomGpsLogic);\r\n","import { StringWysiwyg } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../../edit-types/src/FieldValue';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { FieldLogicWithValueInit } from '../../logic/field-logic-with-init';\r\n\r\n\r\nexport class StringWysiwygLogic extends FieldLogicBase implements FieldLogicWithValueInit {\r\n  name = InputTypeCatalog.StringWysiwyg;\r\n\r\n  constructor() { super({ StringWysiwygLogic }); }\r\n\r\n  canAutoTranslate = true;\r\n\r\n  update({ settings, tools }: FieldLogicUpdate): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & StringWysiwyg;\r\n    // If the `Dialog` setting is blank, it means start inline (default) and allow switching to dialog.\r\n    fixedSettings._allowDialog ??= fixedSettings.Dialog == null || fixedSettings.Dialog === '';\r\n    fixedSettings.Dialog ||= 'inline';\r\n    fixedSettings.ButtonSource ||= '';\r\n    fixedSettings.ButtonAdvanced ||= '';\r\n    fixedSettings.ContentCss ||= '';\r\n    fixedSettings.InlineInitialHeight ||= '3';\r\n\r\n    // New - configuration bundles\r\n    fixedSettings._advanced = this.findAndMergeAdvanced(tools, fixedSettings.WysiwygConfiguration, {\r\n      Mode: 'default',\r\n      Json: '',\r\n    });\r\n\r\n    return fixedSettings;\r\n  }\r\n\r\n  /** Checks if dataCmsId is same as file name and if it is switches img src with adam item url */\r\n  processValueOnLoad(value: FieldValue, adamItems: AdamItem[]): FieldValue {\r\n    try {\r\n      const doc = new DOMParser().parseFromString(value as string, 'text/html');\r\n      doc.body.querySelectorAll('img').forEach((img) => {\r\n        const dataCmsid = img.getAttribute('data-cmsid')?.replace('file:', '');\r\n        const src = img.getAttribute('src');\r\n        if (dataCmsid && src) {\r\n          const fileName = src.split('/').pop();\r\n          if (dataCmsid === fileName) {\r\n            const adamItem = adamItems.find(x => x.Name === dataCmsid);\r\n            if (adamItem)\r\n              img.setAttribute('src', adamItem.Url);\r\n          }\r\n        }\r\n      });\r\n      return doc.body.innerHTML;\r\n    } catch (error) {\r\n      console.error('Error while cleaning wysiwyg content', error);\r\n      return value;\r\n    }\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(StringWysiwygLogic);\r\n\r\n","@if (loading()) {\r\n  <mat-spinner color=\"accent\"></mat-spinner>\r\n}\r\n@else if (this.fieldState.isOpen()) {\r\n  <app-connector></app-connector>\r\n}\r\n","import { Component, inject, signal } from '@angular/core';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { ScriptsLoaderService } from '../../../shared/services/scripts-loader.service';\r\nimport { ConnectorComponent } from '../../connector/connector.component';\r\nimport { FieldState } from '../../field-state';\r\nimport { CustomGpsLogic } from './custom-gps-logic';\r\nimport { StringWysiwygLogic } from './string-wysiwyg-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.ExternalWebComponent,\r\n    templateUrl: './external-web-component.component.html',\r\n    imports: [\r\n        MatProgressSpinnerModule,\r\n        ConnectorComponent,\r\n    ]\r\n})\r\nexport class ExternalWebComponentComponent {\r\n\r\n  log = classLog({ExternalWebComponentComponent});\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected config = this.fieldState.config;\r\n \r\n  protected loading = signal<boolean>(true)\r\n\r\n  constructor(\r\n    private scriptsLoaderService: ScriptsLoaderService,\r\n  ) {\r\n    StringWysiwygLogic.importMe();\r\n    CustomGpsLogic.importMe();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadAssets();\r\n  }\r\n\r\n  private loadAssets() {\r\n    const assets = this.config.inputTypeSpecs.metadata.AngularAssets.split('\\n');\r\n    if (assets.length === 0) return;\r\n    this.scriptsLoaderService.load(assets, this.assetsLoaded.bind(this));\r\n  }\r\n\r\n  private assetsLoaded() {\r\n    this.log.fn('assetsLoaded ' + this.config.fieldName);\r\n    this.loading.set(false);\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Directive, ElementRef, input, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { openFeatureDialog } from '../../../features/shared/base-feature.component';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { ElementEventListener } from '../../shared/controls/element-event-listener.model';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  constructor: false,\r\n  handleImage: false,\r\n};\r\n\r\n\r\n@Directive({\r\n  selector: '[appPasteClipboardImage]',\r\n})\r\nexport class PasteClipboardImageDirective implements OnInit, OnDestroy {\r\n\r\n  log = classLog({PasteClipboardImageDirective}, logSpecs);\r\n\r\n  config = input<FieldConfigSet>();\r\n  elementType = input<string>();\r\n  #eventListeners: ElementEventListener[] = [];\r\n\r\n  #pasteImageEnabled = this.features.isEnabled[FeatureNames.PasteImageFromClipboard]();\r\n\r\n  constructor(\r\n    private elementRef: ElementRef,\r\n    private features: FeaturesService,\r\n    private snackBar: MatSnackBar,\r\n    private translate: TranslateService,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    this.log.fn('constructor', { elementType: this.elementType(), pasteImageEnabled: this.#pasteImageEnabled });\r\n  }\r\n\r\n  ngOnInit() {\r\n    switch (this.elementType()) {\r\n      case 'input':\r\n        this.elementRef.nativeElement.pastableTextarea();\r\n        break;\r\n      case 'element':\r\n        this.elementRef.nativeElement.pastableNonInputable();\r\n        break;\r\n    }\r\n\r\n\r\n    const handleImage = (event: CustomEvent) => { this.#handleImage(event); };\r\n    this.elementRef.nativeElement.addEventListener('handleImage', handleImage);\r\n\r\n    this.#eventListeners.push(\r\n      { element: this.elementRef.nativeElement, type: 'handleImage', listener: handleImage },\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // spm 2019-10-24 paste.js which handles clipboard paste doesn't destroy listeners\r\n    this.#eventListeners.forEach(({ element, type, listener }) => {\r\n      element.removeEventListener(type, listener);\r\n    });\r\n  }\r\n\r\n  #handleImage(event: CustomEvent) {\r\n    const enabled = this.#pasteImageEnabled;\r\n    const l = this.log.fnIf('handleImage', { event }, 'handling paste image - ' + (enabled ? 'enabled' : 'disabled') );\r\n    if (enabled) {\r\n      const image = this.#getFile(event.detail as PasteClipboardImageEventDetail);\r\n      this.config().dropzone.uploadFile(image);\r\n      l.end('started upload');\r\n    } else {\r\n      this.snackBar.open(this.translate.instant('Message.PastingFilesIsNotEnabled'), this.translate.instant('Message.FindOutMore'), { duration: 3000 }).onAction().subscribe(() => {\r\n        openFeatureDialog(this.matDialog, FeatureNames.PasteImageFromClipboard, this.viewContainerRef, this.changeDetectorRef);\r\n      });\r\n      l.end('not enabled, showing snackbar');\r\n    }\r\n  }\r\n\r\n  #getFile(data: PasteClipboardImageEventDetail) {\r\n    let newFile = data.file; // for fallback\r\n\r\n    try {\r\n      // File.name is readonly so we do this\r\n      const formData = new FormData();\r\n      formData.append('file', data.file, data.imageFileName);\r\n      newFile = formData.get('file') as File;\r\n    } catch (e) {\r\n      console.error('paste image error', e);\r\n    }\r\n    return newFile;\r\n  }\r\n}\r\n\r\ninterface PasteClipboardImageEventDetail {\r\n  file: File;\r\n  imageFileName: string;\r\n  originalEvent: ClipboardEvent;\r\n}\r\n","import { ChangeDetectorRef, Component, Injector, OnInit, ViewContainerRef, effect, inject, signal } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Hyperlink, HyperlinkLibrary } from 'projects/edit-types/src/FieldSettings-Hyperlink';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { eavConstants } from '../../../../shared/constants/eav.constants';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { EditForm, EditPrep } from '../../../../shared/models/edit-form.model';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../form/forms-state.service';\r\nimport { EditRoutingService } from '../../../routing/edit-routing.service';\r\nimport { AdamService } from '../../../shared/adam/adam.service';\r\nimport { LinkCacheService } from '../../../shared/adam/link-cache.service';\r\nimport { FileTypeHelpers, UrlHelpers } from '../../../shared/helpers';\r\nimport { FieldState } from '../../field-state';\r\nimport { PagePicker } from '../../page-picker/page-picker.helper';\r\nimport { Preview } from './hyperlink-default.models';\r\n\r\n@Component({\r\n  selector: 'app-base-field-hyperlink-component',\r\n  template: '',\r\n})\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport class HyperlinkDefaultBaseComponent implements OnInit {\r\n\r\n  log = classLog({HyperlinkDefaultBaseComponent});\r\n\r\n  preview = signal<Preview>({\r\n    url: '',\r\n    thumbnailUrl: '',\r\n    previewUrl: '',\r\n    floatingText: '',\r\n    isImage: false,\r\n    isKnownType: false,\r\n    icon: '',\r\n  });\r\n\r\n  protected fieldState = inject(FieldState) as FieldState<string, FieldSettings & Hyperlink & HyperlinkLibrary>;\r\n\r\n  protected settings = this.fieldState.settings;\r\n  protected basics = this.fieldState.basics;\r\n  public config = this.fieldState.config;\r\n  public group = this.fieldState.group;\r\n  protected ui = this.fieldState.ui;\r\n  protected uiValue = this.fieldState.uiValue;\r\n\r\n  #injector = inject(Injector);\r\n  #editRoutingService = inject(EditRoutingService);\r\n\r\n  public adamService = transient(AdamService);\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    public matDialog: MatDialog,\r\n    public viewContainerRef: ViewContainerRef,\r\n    public changeDetectorRef: ChangeDetectorRef,\r\n    public linkCacheService: LinkCacheService,\r\n    public formsStateService: FormsStateService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    effect(() => {\r\n      this.log.a('controlStatus effect');\r\n      const status = this.fieldState.uiValue();\r\n      this.fetchLink(status);\r\n    }, { injector: this.#injector });\r\n  }\r\n\r\n  adamItem = computedObj('adamItem', () => {\r\n    const value = this.uiValue();\r\n    const adamItems = this.config.adam.items() as AdamItem[];\r\n\r\n    if (!value || !adamItems.length) return;\r\n\r\n    const match = value.trim().match(/^file:([0-9]+)$/i);\r\n    if (!match) return;\r\n\r\n    const adamItemId = parseInt(match[1], 10);\r\n    const adamItem = adamItems.find(i => i.Id === adamItemId);\r\n    return adamItem;\r\n  });\r\n\r\n\r\n  openPagePicker() {\r\n    PagePicker.open(this.config, this.group, this.matDialog, this.viewContainerRef, this.changeDetectorRef, (page) => {\r\n      // convert to page:xyz format (if it wasn't cancelled)\r\n      if (!page) return;\r\n      this.fieldState.ui().setIfChanged(`page:${page.id}`);\r\n    });\r\n  }\r\n\r\n  openImageConfiguration(adamItem?: AdamItem) {\r\n    if (this.formsStateService.readOnly().isReadOnly || !adamItem?._imageConfigurationContentType)\r\n      return;\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        adamItem._imageConfigurationId > 0\r\n          ? EditPrep.editId(adamItem._imageConfigurationId)\r\n          : EditPrep.newMetadata(adamItem.ReferenceId, adamItem._imageConfigurationContentType, eavConstants.metadata.cmsObject),\r\n      ],\r\n    };\r\n    this.#editRoutingService.open(this.config.index, this.config.entityGuid, form);\r\n  }\r\n\r\n  private fetchLink(value: string) {\r\n    this.log.a('fetchLink', { value });\r\n    if (!value) {\r\n      this.setPreview(value, false);\r\n      return;\r\n    }\r\n\r\n    const isFileOrPage = this.isFileOrPage(value);\r\n    if (!isFileOrPage) {\r\n      this.setPreview(value, false);\r\n      return;\r\n    }\r\n\r\n    const cached = this.linkCacheService.get(value);\r\n    if (cached) {\r\n      const isResolved = !this.isFileOrPage(cached.Value);\r\n      this.setPreview(cached.Value, isResolved, cached.Adam);\r\n      return;\r\n    }\r\n\r\n    // handle short-ID links like file:17\r\n    const contentType = this.config.contentTypeNameId;\r\n    const entityGuid = this.config.entityGuid;\r\n    const field = this.config.fieldName;\r\n    this.adamService.getLinkInfo(value, contentType, entityGuid, field)\r\n      .subscribe(linkInfo => {\r\n        if (!linkInfo) {\r\n          this.setPreview(value, false);\r\n          return;\r\n        }\r\n        this.linkCacheService.addLink(value, linkInfo);\r\n        const isResolved = !this.isFileOrPage(linkInfo.Value);\r\n        this.setPreview(linkInfo.Value, isResolved, linkInfo.Adam);\r\n      });\r\n  }\r\n\r\n  private setPreview(value: string, isResolved: boolean, adam?: AdamItem) {\r\n    const preview = this.getPreview(value, isResolved, adam);\r\n    this.preview.set(preview);\r\n  }\r\n\r\n  private getPreview(value: string, isResolved: boolean, adam?: AdamItem): Preview {\r\n    // for preview resolve [App:Path]\r\n    value = value.replace(/\\[App:Path\\]/i, UrlHelpers.getUrlPrefix('app', this.formConfig.config));\r\n\r\n    return {\r\n      url: value,\r\n      floatingText: isResolved ? `.../${value.substring(value.lastIndexOf('/') + 1)}` : '',\r\n      thumbnailUrl: `url(\"${adam?.ThumbnailUrl ?? this.buildUrl(value, 1)}\")`,\r\n      previewUrl: adam?.PreviewUrl ?? this.buildUrl(value, 2),\r\n      isImage: FileTypeHelpers.isImage(value),\r\n      isKnownType: FileTypeHelpers.isKnownType(value),\r\n      icon: FileTypeHelpers.getIconClass(value),\r\n    } satisfies Preview;\r\n  }\r\n\r\n  private buildUrl(url: string, size?: 1 | 2): string {\r\n    let query = '';\r\n    if (size === 1)\r\n      query += 'w=80&h=80&mode=crop';\r\n    if (size === 2)\r\n      query += 'w=800&h=800&mode=max';\r\n    if (query && !url.includes('?'))\r\n      query = '?' + query;\r\n    return url + query;\r\n  }\r\n\r\n  private isFileOrPage(value: string) {\r\n    const cleanValue = value.trim().toLocaleLowerCase();\r\n    const isFileOrPage = cleanValue.startsWith('file:') || cleanValue.startsWith('page:');\r\n    return isFileOrPage;\r\n  }\r\n}\r\n","import { Hyperlink } from 'projects/edit-types/src/FieldSettings-Hyperlink';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\n\r\nexport class HyperlinkDefaultLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.HyperlinkDefault;\r\n\r\n  constructor() { super({ HyperlinkDefaultLogic }); }\r\n\r\n  update({ settings }: FieldLogicUpdate): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & Hyperlink;\r\n    fixedSettings.Buttons ||= 'adam,more';\r\n    fixedSettings.FileFilter ??= '';\r\n    fixedSettings.Paths ??= '';\r\n    fixedSettings.ServerResourceMapping ??= '';\r\n    fixedSettings.EnableImageConfiguration ??= true; // 2022-11-08 v14.12 changed default to true // false;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(HyperlinkDefaultLogic);\r\n","@if (preview(); as preV) {\r\n  @if (this.fieldState.isOpen()) {\r\n    <div class=\"fabs-box\">\r\n      @if (buttonAdam()) {\r\n        <button\r\n          mat-mini-fab\r\n          color=\"accent\"\r\n          tippyTranslate=\"Fields.Hyperlink.Default.AdamTip\"\r\n          [disabled]=\"ui().disabled\"\r\n          (click)=\"toggleAdam(false, false)\"\r\n        >\r\n          <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n        </button>\r\n      }\r\n      <button\r\n        mat-mini-fab\r\n        color=\"primary\"\r\n        [disabled]=\"!adamItem()?._imageConfigurationContentType\"\r\n        [ngClass]=\"{ 'metadata-exists': adamItem()?._imageConfigurationId > 0 }\"\r\n        tippyTranslate=\"Fields.Hyperlink.AdamFileManager.ImageSettings\"\r\n        (click)=\"openImageConfiguration(adamItem())\"\r\n      >\r\n        <mat-icon\r\n          [tippyTranslate]=\"\r\n            enableImageConfiguration()\r\n              ? 'Fields.Hyperlink.AdamFileManager.ImageSettingsUnavailable'\r\n              : 'Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled'\r\n          \"\r\n          [tippyDisabled]=\"adamItem()?._imageConfigurationContentType\"\r\n          >filter_center_focus</mat-icon\r\n        >\r\n      </button>\r\n      @if (buttonPage()) {\r\n        <button\r\n          mat-mini-fab\r\n          color=\"primary\"\r\n          tippyTranslate=\"Fields.Hyperlink.Default.PageTip\"\r\n          [disabled]=\"ui().disabled\"\r\n          (click)=\"openPagePicker()\"\r\n        >\r\n          <mat-icon svgIcon=\"sitemap\"></mat-icon>\r\n        </button>\r\n      }\r\n      @if (buttonMore()) {\r\n        <button\r\n          mat-mini-fab\r\n          color=\"primary\"\r\n          tippyTranslate=\"Fields.Hyperlink.Default.MoreOptions\"\r\n          [disabled]=\"ui().disabled\"\r\n          [matMenuTriggerFor]=\"menu\"\r\n        >\r\n          <mat-icon>more_vert</mat-icon>\r\n        </button>\r\n      }\r\n    </div>\r\n    <mat-menu #menu=\"matMenu\" class=\"menu-box\">\r\n      <ng-template matMenuContent>\r\n        @if (showAdam()) {\r\n          <button mat-menu-item (click)=\"toggleAdam(false, false)\">\r\n            <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n            <span>{{ \"Fields.Hyperlink.Default.MenuAdam\" | translate }}</span>\r\n          </button>\r\n        }\r\n        @if (showPagePicker()) {\r\n          <button mat-menu-item (click)=\"openPagePicker()\">\r\n            <mat-icon svgIcon=\"sitemap\"></mat-icon>\r\n            <span>{{ \"Fields.Hyperlink.Default.MenuPage\" | translate }}</span>\r\n          </button>\r\n        }\r\n        @if (showImageManager()) {\r\n          <button mat-menu-item (click)=\"toggleAdam(true, true)\">\r\n            <mat-icon svgIcon=\"file-image\"></mat-icon>\r\n            <span>{{ \"Fields.Hyperlink.Default.MenuImage\" | translate }}</span>\r\n          </button>\r\n        }\r\n        @if (showFileManager()) {\r\n          <button mat-menu-item (click)=\"toggleAdam(true, false)\">\r\n            <mat-icon svgIcon=\"file\"></mat-icon>\r\n            <span>{{ \"Fields.Hyperlink.Default.MenuDocs\" | translate }}</span>\r\n          </button>\r\n        }\r\n      </ng-template>\r\n    </mat-menu>\r\n    <!-- content -->\r\n    <div class=\"eav-layout-grid\">\r\n      <div class=\"eav-layout-grid__inner\">\r\n        <mat-card class=\"eav-card eav-layout-grid__cell--span-12 hyperlink-card shadow-bottom-z-1\">\r\n          <div class=\"hyperlink-input-link-wrapper\">\r\n            <!-- input -->\r\n            <mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n              <input\r\n                matInput\r\n                [formControlName]=\"config.fieldName\"\r\n                tippyTranslate=\"Fields.Hyperlink.Default.Tooltip\"\r\n                tippyPlacement=\"top\"\r\n                [placeholder]=\"basics().placeholder\"\r\n                [required]=\"basics().required\"\r\n                appPasteClipboardImage\r\n                [config]=\"config\"\r\n                [elementType]=\"'input'\"\r\n              />\r\n              <mat-label>{{ basics().label }}</mat-label>\r\n            </mat-form-field>\r\n            <!-- link absolutely positioned above input -->\r\n            @if (preV?.floatingText) {\r\n              <div class=\"hyperlink-floating\">\r\n                <div class=\"hyperlink-floating__value\">{{ uiValue() }}</div>\r\n                <div class=\"hyperlink-floating__url-box\">\r\n                  <a [href]=\"preV.url\" target=\"_blank\" class=\"hyperlink-floating__url\" [tippy]=\"preV.url\">\r\n                    <span>{{ preV.floatingText }}</span>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          @if (uiValue()) {\r\n            <div class=\"preview-wrapper\">\r\n              @if (preV.isImage) {\r\n                <!-- image -->\r\n                <a [href]=\"preV.url\" target=\"_blank\">\r\n                  <div class=\"preview-image-box\">\r\n                    <img [src]=\"preV.previewUrl\" class=\"preview-image\" />\r\n                  </div>\r\n                </a>\r\n              } @else {\r\n                <!-- icon -->\r\n                <a [href]=\"preV.url\" target=\"_blank\" [tippy]=\"preV.url\" tippyPlacement=\"right\">\r\n                  <div class=\"preview-icon-box\">\r\n                    <mat-icon [svgIcon]=\"preV.icon\"></mat-icon>\r\n                  </div>\r\n                </a>\r\n              }\r\n            </div>\r\n          }\r\n        </mat-card>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, computed, effect, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { SignalEquals } from '../../../../shared/signals/signal-equals';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormsStateService } from '../../../form/forms-state.service';\r\nimport { LinkCacheService } from '../../../shared/adam/link-cache.service';\r\nimport { PasteClipboardImageDirective } from '../../directives/paste-clipboard-image.directive';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { WrappersCatalog } from '../../wrappers/wrappers.constants';\r\nimport { HyperlinkDefaultBaseComponent } from './hyperlink-default-base.component';\r\nimport { HyperlinkDefaultLogic } from './hyperlink-default-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.HyperlinkDefault,\r\n    templateUrl: './hyperlink-default.component.html',\r\n    styleUrls: ['./hyperlink-default.component.scss'],\r\n    imports: [\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        NgClass,\r\n        MatMenuModule,\r\n        MatCardModule,\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        PasteClipboardImageDirective,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\n@FieldMetadata({\r\n  wrappers: [\r\n    WrappersCatalog.DropzoneWrapper,\r\n    WrappersCatalog.LocalizationWrapper,\r\n    WrappersCatalog.HyperlinkDefaultExpandableWrapper,\r\n    WrappersCatalog.AdamWrapper,\r\n  ],\r\n})\r\nexport class HyperlinkDefaultComponent extends HyperlinkDefaultBaseComponent implements OnInit {\r\n  protected buttonAdam = computed(() => this.settings().Buttons.includes('adam'), SignalEquals.bool);\r\n  protected buttonPage = computed(() => this.settings().Buttons.includes('page'), SignalEquals.bool);\r\n  protected buttonMore = computed(() => this.settings().Buttons.includes('more'), SignalEquals.bool);\r\n  protected showAdam = this.fieldState.settingExt('ShowAdam');\r\n  protected showPagePicker = this.fieldState.settingExt('ShowPagePicker');\r\n  protected showImageManager = this.fieldState.settingExt('ShowImageManager');\r\n  protected showFileManager = this.fieldState.settingExt('ShowFileManager');\r\n  protected enableImageConfiguration = this.fieldState.settingExt('EnableImageConfiguration');\r\n\r\n  constructor(\r\n    eavService: FormConfigService,\r\n    matDialog: MatDialog,\r\n    viewContainerRef: ViewContainerRef,\r\n    changeDetectorRef: ChangeDetectorRef,\r\n    linkCacheService: LinkCacheService,\r\n    formsStateService: FormsStateService,\r\n  ) {\r\n    super(\r\n      eavService,\r\n      matDialog,\r\n      viewContainerRef,\r\n      changeDetectorRef,\r\n      linkCacheService,\r\n      formsStateService,\r\n    );\r\n    HyperlinkDefaultLogic.importMe();\r\n\r\n    // ADAM Settings, in a way which ensures they only fire on relevant changes\r\n    // must be in constructor for effect() to work\r\n    const adamSettings = computedObj('adamSettings', () => {\r\n      const s = this.fieldState.settings();\r\n      return {\r\n        rootSubfolder: s.Paths,\r\n        fileFilter: s.FileFilter,\r\n        autoLoad: true,\r\n      };\r\n    });\r\n\r\n    effect(() => {\r\n      const config = adamSettings();\r\n      // console.warn('adamConfig in Hyperlink-Default', config);\r\n      this.config.adam.setConfig(config);\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n\r\n    // Should probably be in ngOnInit, because this.config.adam is created late\r\n    this.config.adam.onItemClick = (item: AdamItem) => { this.setValue(item); };\r\n    this.config.adam.onItemUpload = (item: AdamItem) => { this.setValue(item); };\r\n  }\r\n\r\n  toggleAdam(usePortalRoot: boolean, showImagesOnly: boolean) {\r\n    this.config.adam.toggle(usePortalRoot, showImagesOnly);\r\n  }\r\n\r\n  private setValue(item: AdamItem) {\r\n    const usePath = this.settings().ServerResourceMapping === 'url';\r\n    const newValue = !usePath ? item.ReferenceId : item.Url;\r\n    this.fieldState.ui().setIfChanged(newValue);\r\n  }\r\n}\r\n","import { HyperlinkLibrary } from 'projects/edit-types/src/FieldSettings-Hyperlink';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\n\r\nexport class HyperlinkLibraryLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.HyperlinkLibrary;\r\n\r\n  constructor() { super({ HyperlinkLibraryLogic }); }\r\n\r\n  update({ settings }: FieldLogicUpdate): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & HyperlinkLibrary;\r\n    fixedSettings.EnableImageConfiguration ??= true; // 2022-11-08 v14.12 changed default to true // false;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(HyperlinkLibraryLogic);\r\n","import { Component, effect, inject, Injector, OnInit } from '@angular/core';\r\nimport { AdamConfig } from '../../../../../../../edit-types/src/AdamConfig';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../../wrappers/wrappers.constants';\r\nimport { HyperlinkLibraryLogic } from './hyperlink-library-logic';\r\nimport { AdamControl } from './hyperlink-library.models';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.HyperlinkLibrary,\r\n  template: '', // note: no template - it will just show the adam component in the popup\r\n  styleUrls: [],\r\n})\r\n@FieldMetadata({\r\n  wrappers: [\r\n    WrappersCatalog.DropzoneWrapper,\r\n    WrappersCatalog.LocalizationWrapper,\r\n    WrappersCatalog.HyperlinkLibraryExpandableWrapper,\r\n    WrappersCatalog.AdamWrapper,\r\n  ],\r\n})\r\nexport class HyperlinkLibraryComponent implements OnInit {\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  private injector = inject(Injector);\r\n\r\n  constructor() {\r\n    HyperlinkLibraryLogic.importMe();\r\n\r\n    let first = true;\r\n    effect(() => {\r\n      const control = this.fieldState.ui().control as AdamControl;\r\n      // Patch length info to the control state, so the validator can pick it up\r\n      control.adamItems = this.fieldState.config.adam.items().length;\r\n      // Update the validity of the control - but not during initialization, only on later changes\r\n      // otherwise the field would glow red right from the start\r\n      if (!first)\r\n        control.updateValueAndValidity();\r\n      first = false;\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.attachAdamConfig();\r\n    // this.attachAdamValidator();\r\n  }\r\n\r\n  private attachAdamConfig() {\r\n    const adamConfig = computedObj('adamConfig', () => {\r\n      const s = this.fieldState.settings();\r\n      return {\r\n        allowAssetsInRoot: s.AllowAssetsInRoot,\r\n        autoLoad: true,\r\n        enableSelect: false,\r\n        rootSubfolder: s.Paths,\r\n        fileFilter: s.FileFilter,\r\n        folderDepth: s.FolderDepth || 0,\r\n        metadataContentTypes: s.MetadataContentTypes,\r\n      } as AdamConfig;\r\n    });\r\n\r\n    effect(() => {\r\n      const config = adamConfig();\r\n      // console.warn('adamConfig in HyperlinkLibrary', config);\r\n      this.fieldState.config.adam.setConfig(config);\r\n    }, { injector: this.injector });\r\n  }\r\n}\r\n","import { Of } from '../../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPickerMerged, StringDropdown } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { PickerLogicShared } from '../../picker/picker-logic-shared';\r\nimport { DataSourceDropDownOptions } from '../string-picker/string-picker.helpers';\r\n\r\nexport class StringDropdownLogic extends FieldLogicBase {\r\n  name: Of<typeof InputTypeCatalog> = InputTypeCatalog.StringDropdown;\r\n  type: 'string' | 'number' = 'string';\r\n\r\n  constructor() { super({ StringDropdownLogic }); }\r\n\r\n  update({ settings, value }: FieldLogicUpdate<string>): FieldSettings {\r\n    const fs = PickerLogicShared.setDefaultSettings({ ...settings }) as FieldSettings & StringDropdown & FieldSettingsPickerMerged;\r\n    // fixedSettings.EnableTextEntry ??= false;\r\n    // fixedSettings.DropdownValues ??= '';\r\n    // fixedSettings.DropdownValuesFormat ??= '';// maybe we should change this to 'value-label' in the future\r\n    fs._options = new DataSourceDropDownOptions().parseOptions(value, this.type, fs.DropdownValuesFormat || '', fs.DropdownValues || '');\r\n    \r\n    // Both the query type and create-type are the same\r\n    fs.EntityType ??= '';\r\n    fs.CreateTypes = fs.EntityType;\r\n\r\n    fs.EnableEdit ??= false;\r\n    fs.EnableCreate ??= false;\r\n    // fixedSettings.EnableAddExisting ??= true;\r\n    // fixedSettings.EnableDelete ??= false;\r\n    // if multi-value is ever allowed, then we must also enable remove\r\n    // since we're migrating to pickers, we don't plan to implement multi-value dropdowns here\r\n    // fixedSettings.AllowMultiValue ??= false;\r\n    fs.EnableRemove ??= fs.AllowMultiValue;\r\n    return fs;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(StringDropdownLogic);\r\n","import { FieldLogicUpdate, FieldLogicBase } from '../../logic/field-logic-base';\r\nimport { StringDropdownLogic } from '../string-dropdown/string-dropdown-logic';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\n\r\n\r\nexport class NumberDefaultLogic extends StringDropdownLogic {\r\n  name = InputTypeCatalog.NumberDefault;\r\n\r\n  update(specs: FieldLogicUpdate<string>): FieldSettings {\r\n    const fixedSettings: FieldSettings = { ...super.update(specs) };\r\n    // fixedSettings.DisableAutoTranslation = true;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(NumberDefaultLogic);\r\n","import { Component, inject } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { NumberDefaultLogic } from './number-default-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.NumberDefault,\r\n    templateUrl: './number-default.component.html',\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class NumberDefaultComponent {\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  protected group = this.fieldState.group;\r\n  protected config = this.fieldState.config;\r\n\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected min = this.fieldState.settingExt('Min');\r\n  protected max = this.fieldState.settingExt('Max');\r\n\r\n  constructor() {\r\n    NumberDefaultLogic.importMe();\r\n  }\r\n\r\n}\r\n","<mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n  <input matInput type=\"number\"\r\n    class=\"eav-translate-on-dblclick\"\r\n    [formControlName]=\"config.fieldName\"\r\n    [required]=\"basics().required\"\r\n    [placeholder]=\"basics().placeholder\"\r\n    [min]=\"min()\"\r\n    [max]=\"max()\">\r\n  <mat-label>{{ basics().label }}</mat-label>\r\n</mat-form-field>\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { FieldLogicUpdate, FieldLogicBase } from '../../logic/field-logic-base';\r\nimport { StringDropdownLogic } from '../string-dropdown/string-dropdown-logic';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\n\r\n\r\nexport class NumberDropdownLogic extends StringDropdownLogic {\r\n  name = InputTypeCatalog.NumberDropdown;\r\n  type = 'number' as 'number';\r\n\r\n  update(specs: FieldLogicUpdate<string>): FieldSettings {\r\n    const fixedSettings: FieldSettings = { ...super.update(specs) };\r\n    // fixedSettings.DisableAutoTranslation = true;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(NumberDropdownLogic);\r\n","import { Component } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { NumberDropdownLogic } from './number-dropdown-logic';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.NumberDropdown,\r\n  templateUrl: '../../picker/picker.component.html',\r\n  imports: [\r\n    PickerImports\r\n  ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class NumberDropdownComponent extends PickerComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    NumberDropdownLogic.importMe();\r\n  }\r\n}\r\n","import { Of } from '../../../../../../../core/type-utilities';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { FieldLogicManager } from '../../logic/field-logic-manager';\r\nimport { StringPickerLogic } from '../string-picker/string-picker-logic';\r\n\r\nexport class NumberPickerLogic extends FieldLogicBase {\r\n  name: Of<typeof InputTypeCatalog> = InputTypeCatalog.NumberPicker;\r\n\r\n  constructor() { super({ NumberPickerLogic }); }\r\n\r\n  update(specs: FieldLogicUpdate<string>): FieldSettings {\r\n\r\n    const stringLogic = FieldLogicManager.singleton().get(InputTypeCatalog.StringPicker) as StringPickerLogic;\r\n    return stringLogic.update(specs);\r\n\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(NumberPickerLogic);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging/logging';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { NumberPickerLogic } from './number-picker-logic';\r\n\r\n@Component({\r\n  selector: InputTypeCatalog.NumberPicker,\r\n  templateUrl: '../../picker/picker.component.html',\r\n  imports: PickerImports\r\n})\r\nexport class NumberPickerComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({ NumberPickerComponent }, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    NumberPickerLogic.importMe();\r\n  }\r\n}\r\n\r\n\r\n","import { FieldSettingsStringDefault } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\n\r\nexport class StringDefaultLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.StringDefault;\r\n\r\n  constructor() { super({ StringDefaultLogic }); }\r\n\r\n  canAutoTranslate = true;\r\n\r\n  update(specs: FieldLogicUpdate): FieldSettings {\r\n    const fixedSettings = { ...specs.settings } as FieldSettings & FieldSettingsStringDefault;\r\n    fixedSettings.InputFontFamily ??= '';\r\n    fixedSettings.RowCount ||= 1;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(StringDefaultLogic);\r\n","\r\n<mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\" [ngClass]=\"{'textarea-field': rowCount() > 1}\">\r\n  @if (!isMultiline()) {\r\n    <!-- Single Line field -->\r\n    <input matInput class=\"eav-translate-on-dblclick\"\r\n      [formControlName]=\"config.fieldName\"\r\n      [placeholder]=\"basics().placeholder\"\r\n      [required]=\"basics().required\"\r\n      [ngStyle]=\"{ 'font-family': inputFontFamily() }\">\r\n  }\r\n  @else {\r\n    <!-- Multi Line field -->\r\n    <textarea matInput class=\"eav-translate-on-dblclick\"\r\n      [formControlName]=\"config.fieldName\"\r\n      [rows]=\"rowCount()\"\r\n      [placeholder]=\"basics().placeholder\"\r\n      [required]=\"basics().required\"\r\n      [ngStyle]=\"{ 'font-family': inputFontFamily(), 'white-space': textWrap() }\">\r\n    </textarea>\r\n  }\r\n  <mat-label>{{ basics().label }}</mat-label>\r\n</mat-form-field>\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { NgClass, NgStyle } from '@angular/common';\r\nimport { Component, inject } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { FieldSettingsStringDefault } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { StringDefaultLogic } from './string-default-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringDefault,\r\n    templateUrl: './string-default.component.html',\r\n    styleUrls: ['./string-default.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        NgClass,\r\n        MatInputModule,\r\n        NgStyle,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class StringDefaultComponent {\r\n\r\n  protected fieldState = inject(FieldState) as FieldState<string, FieldSettings & FieldSettingsStringDefault>;\r\n\r\n  protected group = this.fieldState.group;\r\n  protected config = this.fieldState.config;\r\n\r\n  protected settings = this.fieldState.settings;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  /**\r\n   * Row Count as it is in the settings\r\n   * It has an undocumented feature - ATM only used in icon-picker,\r\n   * where the row count can be negative to create a multi-line picker.\r\n   * This is not an official feature, as we may add a toggle to this some day instead, and then fix the icon-picker.\r\n   */\r\n  protected rowCountRaw = this.fieldState.settingExt('RowCount');\r\n\r\n  /**\r\n   * Row Count corrected and also neutralize negative numbers, as it's an undocumented feature to create multi-line with 1 line\r\n   */\r\n  protected rowCount = computedObj('rowCount', () => Math.abs(this.rowCountRaw() || 1));\r\n  \r\n  protected isMultiline = computedObj('isMultiline', () => {\r\n    const rc = this.rowCountRaw() || 1;\r\n    return rc < 0 || rc > 1;\r\n  });\r\n  \r\n  protected inputFontFamily = this.fieldState.settingExt('InputFontFamily');\r\n  protected textWrap = this.fieldState.settingExt('TextWrapping');\r\n\r\n  constructor() {\r\n    StringDefaultLogic.importMe();\r\n  }\r\n\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsSharedSeparator } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { FieldLogicManager } from '../../logic/field-logic-manager';\r\nimport { EntityDefaultLogic } from '../entity-default/entity-default-logic';\r\n\r\nexport class StringDropdownQueryLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.StringDropdownQuery;\r\n\r\n  constructor() { super({ StringDropdownQueryLogic }); }\r\n\r\n  update(specs: FieldLogicUpdate<string[]>): FieldSettings {\r\n    const entityDefaultLogic = FieldLogicManager.singleton().get(InputTypeCatalog.EntityDefault) as EntityDefaultLogic;\r\n    const fs = entityDefaultLogic.update(specs) as FieldSettings & FieldSettingsSharedSeparator;\r\n    fs.Separator ||= ',';\r\n\r\n    // New features should not be supported in this old input, so commented out\r\n    // fixedSettings.Value ??= '';\r\n    // fixedSettings.Label ??= '';\r\n    // fixedSettings.MoreFields ??= '';\r\n    return fs;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(StringDropdownQueryLogic);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { StringDropdownQueryLogic } from './string-dropdown-query-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringDropdownQuery,\r\n    templateUrl: '../../picker/picker.component.html',\r\n    imports: PickerImports\r\n})\r\nexport class StringDropdownQueryComponent extends PickerComponent {\r\n\r\n  log = classLog({StringDropdownQueryComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    StringDropdownQueryLogic.importMe();\r\n  }\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { EntityDefaultLogic } from '../entity-default/entity-default-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringDropdown,\r\n    templateUrl: '../../picker/picker.component.html',\r\n    imports: PickerImports\r\n})\r\nexport class StringDropdownComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({StringDropdownComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    EntityDefaultLogic.importMe();\r\n  }\r\n\r\n}\r\n","import { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldSettingsPicker, FieldSettingsPickerMasks, FieldSettingsStringFontIconPicker } from '../../../../../../../edit-types/src/FieldSettings-Pickers';\r\nimport { PickerSourceCss } from '../../../../../../../edit-types/src/PickerSources';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { buildRegExFromPrefixAndSuffix } from '../../picker/data-sources/css/string-font-icon-picker.helpers';\r\n\r\n/**\r\n * Logic for the StringFontIconPicker field.\r\n * This is an older field, which was standalone till ca. v18.01.\r\n * \r\n * In v18.02 it was changed to use the standard picker,\r\n * so it now ports the configuration from the names in the old config entity\r\n * to how the new picker expects them.\r\n */\r\nexport class StringFontIconPickerLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.StringFontIconPicker;\r\n\r\n  constructor() { super({ StringFontIconPickerLogic }); }\r\n\r\n  update({ fieldName, settings }: FieldLogicUpdate): FieldSettings {\r\n    const l = this.log.fnIfInList('update', 'fields', fieldName, { fieldName, settings });\r\n\r\n    // Cast settings to type which knows about the properties\r\n    // and the raw settings which show what values can be read\r\n    const fs = { ...settings } as FieldSettings & FieldSettingsPickerMasks & PickerSourceCss & FieldSettingsPicker;\r\n    const raw = fs as unknown as FieldSettingsStringFontIconPicker;\r\n\r\n    ///// OLD Settings\r\n    // fixedSettings.Files ??= '';\r\n    // fixedSettings.CssPrefix ??= '';\r\n    // fixedSettings.ShowPrefix ??= false;\r\n\r\n    // Note: the original Files was multi-line. We assume it was never used, but we can't be sure.\r\n    fs.CssSourceFile = raw.Files ?? '';\r\n    fs.CssSelectorFilter = raw.CssPrefix ?? '';\r\n    fs.CssSelectorFilter = buildRegExFromPrefixAndSuffix(raw.CssPrefix ?? '', ':');\r\n    fs.PreviewValue = `${raw.PreviewCss} [Item:Value]`;\r\n\r\n    fs.PreviewType ='icon-css';\r\n    fs.EnableTextEntry = false;\r\n    fs.EnableAddExisting = true;\r\n    fs.AllowMultiValue = false;\r\n\r\n    fs.noAutoFocus = true;\r\n\r\n    // The label should either be the entire class, or just the part after the prefix\r\n    // These values will be in the `Value` or `Title` fields, respectively.\r\n    fs.Label = raw.ShowPrefix ? 'Value' : 'Title';\r\n    return l.r(fs);\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(StringFontIconPickerLogic);\r\n","import { Component } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { StringFontIconPickerLogic } from './string-font-icon-picker-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringFontIconPicker,\r\n    templateUrl: '../../picker/picker.component.html',\r\n    imports: [\r\n        PickerImports,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class StringFontIconPickerComponent extends PickerComponent {\r\n\r\n  log = classLog({StringFontIconPickerComponent}, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    StringFontIconPickerLogic.importMe();\r\n  }\r\n}\r\n","import { Of } from '../../../../../../../core/type-utilities';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\nimport { PickerSourcesCustom } from '../../picker/constants/picker-config-model.constants';\r\nimport { PickerLogicShared } from '../../picker/picker-logic-shared';\r\n\r\nexport class StringPickerLogic extends FieldLogicBase {\r\n  name: Of<typeof InputTypeCatalog> = InputTypeCatalog.StringPicker;\r\n\r\n  constructor() { super({StringPickerLogic}); }\r\n\r\n  update(specs: FieldLogicUpdate<string>): FieldSettings {\r\n    \r\n    var log = classLog({StringPickerLogic}, null);\r\n\r\n    const l = log.fn('update', { specs });\r\n\r\n    const { fs, removeEditRestrictions, typeConfig } = new PickerLogicShared().preUpdate(specs);\r\n\r\n    fs.Separator ??= '\\n'; //'\\\\n';\r\n    if (fs.Separator == '\\\\n') fs.Separator = '\\n'; //buggy temp double-slash-n\r\n\r\n    /** Dropdown data source aka custom-list picker */\r\n    const typeName = fs.dataSourceType;\r\n    const isCustomSource = Object.values(PickerSourcesCustom).includes(typeName as Of<typeof PickerSourcesCustom>);\r\n    l.a(`type: ${typeName}`, { typeConfig, isCustomSource });\r\n\r\n    if (isCustomSource) {\r\n      if (!removeEditRestrictions) {\r\n        fs.EnableEdit = false;\r\n        fs.EnableCreate = false;\r\n        fs.EnableDelete = false;\r\n      }\r\n    } else\r\n      l.a('type: not UiPickerSourceCustom-List/Csv', { typeConfig });\r\n\r\n    return l.r(fs);\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(StringPickerLogic);\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { PickerImports } from '../../picker/picker-providers.constant';\r\nimport { PickerComponent } from '../../picker/picker.component';\r\nimport { StringPickerLogic } from './string-picker-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringPicker,\r\n    templateUrl: '../../picker/picker.component.html',\r\n    imports: PickerImports\r\n})\r\nexport class StringPickerComponent extends PickerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({ StringPickerComponent }, PickerComponent.logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n    this.constructorEnd();\r\n    StringPickerLogic.importMe();\r\n  }\r\n\r\n}\r\n","import { TemplateTypes } from './string-template-picker.models';\r\n\r\nexport const templateTypes: TemplateTypes = {\r\n  Token: {\r\n    ext: '.html',\r\n    purpose: 'Template',\r\n    type: 'Token',\r\n  },\r\n  'C# Razor': {\r\n    ext: '.cshtml',\r\n    purpose: 'Template',\r\n    type: 'Razor',\r\n  },\r\n  // New in 12.02 - won't show up in the selection-dropdown but is used for Controller-Selectors\r\n  'C# Search': {\r\n    ext: '.cs',\r\n    purpose: 'Search',\r\n  },\r\n} as const;\r\n","  <div class=\"picker-wrapper\">\r\n    <mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n      <mat-select [formControlName]=\"config.fieldName\" [required]=\"basics().required\" class=\"eav-translate-on-dblclick\">\r\n        <mat-option value=\"\">{{ 'Fields.TemplatePicker.NotSelected' | translate }}</mat-option>\r\n        @for (file of files(); track file) {\r\n          <mat-option [value]=\"file\">\r\n            {{ file }}\r\n          </mat-option>\r\n        }\r\n      </mat-select>\r\n      <mat-label>{{ basics().label }}</mat-label>\r\n    </mat-form-field>\r\n    <button mat-icon-button tippyTranslate=\"Fields.TemplatePicker.NewTemplate\" [disabled]=\"ui().disabled\" (click)=\"createTemplate()\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n  </div>\r\n  <app-field-helper-text></app-field-helper-text>\r\n","import { Component, Injector, ViewContainerRef, effect, inject, signal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { StringTemplatePicker } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { take } from 'rxjs';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { SourceService } from '../../../../code-editor/services/source.service';\r\nimport { CreateFileDialogComponent } from '../../../../create-file-dialog/create-file-dialog.component';\r\nimport { CreateFileDialogData, CreateFileDialogResult } from '../../../../create-file-dialog/create-file-dialog.models';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FieldMask } from '../../../shared/helpers';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { templateTypes } from './string-template-picker.constants';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringTemplatePicker,\r\n    templateUrl: './string-template-picker.component.html',\r\n    styleUrls: ['./string-template-picker.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatSelectModule,\r\n        MatOptionModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        FieldHelperTextComponent,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class StringTemplatePickerComponent {\r\n  \r\n  log = classLog({StringTemplatePickerComponent});\r\n\r\n  #fieldState = inject(FieldState) as FieldState<string, FieldSettings & StringTemplatePicker>;\r\n\r\n  // needed to create more FieldMasks as needed\r\n  #injector = inject(Injector);\r\n\r\n  // If we have a configured type, use that, otherwise use the field mask\r\n  // We'll still use the field-mask (even though it wouldn't be needed) to keep the logic simple\r\n  #typeMask = transient(FieldMask).init('typeMask', this.#fieldState.settings().FileType ?? '[Type]');\r\n\r\n  #locationMask = transient(FieldMask).init('String-LocationMask', '[Location]');\r\n\r\n  #sourceService = transient(SourceService);\r\n\r\n  protected group = this.#fieldState.group;\r\n  protected config = this.#fieldState.config;\r\n\r\n  protected basics = this.#fieldState.basics;\r\n  protected ui = this.#fieldState.ui;\r\n\r\n  protected files = signal<string[]>([]);\r\n\r\n  #activeSpec = templateTypes.Token;\r\n  #templates: string[] = [];\r\n  #global = false;\r\n\r\n  /** Reset only after templates have been fetched once */\r\n  #resetIfNotFound = false;\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) {\r\n    // Watch for location changes to update the files in the dropdown\r\n    effect(() => this.#onLocationChange(this.#locationMask.result()));\r\n\r\n    // Watch for changes to the Type mask\r\n    effect(() => this.#setFileConfig(this.#typeMask.result()));\r\n  }\r\n\r\n  #setFileConfig(type: string) {\r\n    this.#activeSpec = templateTypes[type];\r\n    this.#setTemplateOptions();\r\n  }\r\n\r\n  #prevLocation = '';\r\n  #onLocationChange(location: string) {\r\n    const l = this.log.fn('onLocationChange', { location });\r\n    this.#global = (\r\n      location === 'Host File System' // Original value used from 2sxc up until v12.01\r\n      || location === 'Global' // New key used in 2sxc 12.02 and later\r\n    );\r\n\r\n    if (this.#prevLocation === location)\r\n      return;\r\n    this.#prevLocation = location;\r\n\r\n    this.#sourceService.getAll().pipe(take(1)).subscribe(files => {\r\n      this.#templates = files.filter(file => file.Shared === this.#global).map(file => file.Path);\r\n      this.#resetIfNotFound = true;\r\n      this.#setTemplateOptions();\r\n    });\r\n  }\r\n\r\n  #setTemplateOptions() {\r\n    const ext = this.#activeSpec.ext;\r\n    const filtered = this.#templates\r\n      // new feature in v11 - '.code.xxx' files shouldn't be shown, they are code-behind\r\n      .filter(template => !/\\.code\\.[a-zA-Z0-9]+$/.test(template))\r\n      .filter(template => template.endsWith(ext));\r\n    this.files.set(filtered);\r\n\r\n    const resetValue = this.#resetIfNotFound && !filtered.some(template => template === this.#fieldState.uiValue());\r\n    if (resetValue)\r\n      this.ui().setIfChanged('');\r\n  }\r\n\r\n  createTemplate() {\r\n    const nameMask = transient(FieldMask, this.#injector).init('String-NameMask', '[Name]');\r\n    const data: CreateFileDialogData = {\r\n      global: this.#global,\r\n      purpose: this.#activeSpec.purpose,\r\n      type: this.#activeSpec.type,\r\n      name: nameMask.result(),\r\n    };\r\n    nameMask.destroy();\r\n    const dialogRef = this.matDialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) return;\r\n\r\n      this.#sourceService.create(result.name, this.#global, result.templateKey).subscribe(res => {\r\n        if (res === false) {\r\n          alert('Server reported that create failed - the file probably already exists');\r\n        } else {\r\n          this.#templates.push(result.name);\r\n          this.#setTemplateOptions();\r\n          this.ui().setIfChanged(result.name);\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { StringUrlPath } from 'projects/edit-types/src/FieldSettings-String';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\n\r\nexport class StringUrlPathLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.StringUrlPath;\r\n\r\n  constructor() { super({ InputTypeCatalog }); }\r\n\r\n  update({ settings }: FieldLogicUpdate): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & StringUrlPath;\r\n    fixedSettings.AutoGenerateMask ??= null;\r\n    fixedSettings.AllowSlashes ??= false;\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(StringUrlPathLogic);\r\n","import { Component, computed, effect, inject, signal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FieldMask, UrlHelpers } from '../../../shared/helpers';\r\nimport { FieldMetadata } from '../../field-metadata.decorator';\r\nimport { FieldState } from '../../field-state';\r\nimport { FieldHelperTextComponent } from '../../help-text/field-help-text.component';\r\nimport { WrappersLocalizationOnly } from '../../wrappers/wrappers.constants';\r\nimport { StringUrlPathLogic } from './string-url-path-logic';\r\n\r\n@Component({\r\n    selector: InputTypeCatalog.StringUrlPath,\r\n    templateUrl: './string-url-path.component.html',\r\n    imports: [\r\n        MatFormFieldModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatInputModule,\r\n        FieldHelperTextComponent,\r\n    ]\r\n})\r\n@FieldMetadata({ ...WrappersLocalizationOnly })\r\nexport class StringUrlPathComponent {\r\n\r\n  log = classLog({StringUrlPathComponent});\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  protected group = this.fieldState.group;\r\n\r\n  protected settings = this.fieldState.settings;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  /** The mask to use comes from the field settings */\r\n  #maskFromSettings = this.fieldState.settingExt('AutoGenerateMask');\r\n\r\n  /**\r\n   * Blocks external update if field was changed manually and doesn't match external updates.\r\n   * WARNING: Doesn't work on language change\r\n   * TODO: MAKE work on language change\r\n   */\r\n  #lastAutoCopy = signal('');\r\n\r\n  /** The Field-Mask Helper which will continuously parse the result */\r\n  #fieldMask = transient(FieldMask)\r\n    // .logChanges()\r\n    .initPreClean((_, value) => typeof value === 'string' ? value.replace('/', '-').replace('\\\\', '-') : value)\r\n    .initSignal('UrlPath', this.#maskFromSettings);\r\n\r\n  /** The cleaned value, ready for broadcasting back to the field */\r\n  #maskedValueCleaned = computed(() => {\r\n    const newValue = this.#fieldMask.result();\r\n    return UrlHelpers.stripNonUrlCharacters(newValue, this.settings().AllowSlashes, true);\r\n  });\r\n\r\n  constructor() {\r\n    StringUrlPathLogic.importMe();\r\n\r\n    // Listen to value changes to correct spaces and other non-allowed characters\r\n    effect(() => {\r\n      const _ = this.fieldState.uiValue();\r\n      this.clean(false);\r\n    });\r\n\r\n    // Listen to the mask changes to update the field\r\n    effect(() => this.#publishFieldMaskResult(this.#maskedValueCleaned()));\r\n  }\r\n\r\n\r\n  #publishFieldMaskResult(cleanedNewValue: string) {\r\n    const l = this.log.fn('#onSourcesChanged', { newValue: cleanedNewValue });\r\n\r\n    const v = {\r\n      uiValue: this.fieldState.uiValue(),\r\n      lastAutoCopy: this.#lastAutoCopy(),\r\n      allowSlashes: this.settings().AllowSlashes,\r\n      cleaned: cleanedNewValue,\r\n    };\r\n\r\n    // Exit early if the UI is a) not empty and b) doesn't have the last copy of the stripped value\r\n    if (v.uiValue && (v.uiValue !== v.lastAutoCopy))\r\n      return l.end(`UI not empty but manually modified, so no auto-update`, v);\r\n\r\n    if (!v.cleaned)\r\n      return l.end('cleaned is empty', v);\r\n\r\n    if (v.uiValue === v.cleaned)\r\n      return l.end('no changes', v);\r\n\r\n    this.#lastAutoCopy.set(v.cleaned);\r\n    this.fieldState.ui().setIfChanged(v.cleaned);\r\n    l.end(`updated to \"${v.cleaned}\"`, v);\r\n  }\r\n\r\n  clean(trimEnd: boolean) {\r\n    const l = this.log.fn('clean', { trimEnd });\r\n    const value = this.fieldState.uiValue();\r\n    const cleaned = UrlHelpers.stripNonUrlCharacters(value, this.settings().AllowSlashes, trimEnd);\r\n    this.fieldState.ui().setIfChanged(cleaned);\r\n  }\r\n}\r\n","<mat-form-field [formGroup]=\"group\" color=\"accent\" class=\"eav-mat-form-field\">\r\n  <input matInput class=\"eav-translate-on-dblclick\"\r\n    [formControlName]=\"fieldState.name\"\r\n    (blur)=\"clean(true)\"\r\n    [placeholder]=\"basics().placeholder\"\r\n    [required]=\"basics().required\">\r\n  <mat-label>{{ basics().label }}</mat-label>\r\n</mat-form-field>\r\n<app-field-helper-text></app-field-helper-text>\r\n","import { AdamConfig } from '../../../../../../../../edit-types/src/AdamConfig';\r\nimport { FieldConfigSet } from '../../../field-config-set.model';\r\n\r\nexport class AdamConfigInstance implements AdamConfig {\r\n  //#region Field settings\r\n  rootSubfolder = '';\r\n  fileFilter = '';\r\n  allowAssetsInRoot = true;\r\n  folderDepth = 0;\r\n  metadataContentTypes = '';\r\n  //#endregion\r\n\r\n  //#region Toggle\r\n  usePortalRoot = false;\r\n  showImagesOnly = false;\r\n  //#endregion\r\n\r\n  //#region Calculated\r\n  autoLoad = false;\r\n  enableSelect = true;\r\n  subfolder = '';\r\n  allowEdit = true;\r\n  disabled = true;\r\n  maxDepthReached = false;\r\n  //#endregion\r\n\r\n  constructor(disabled: boolean) {\r\n    this.disabled = disabled;\r\n  }\r\n\r\n  static completeConfig(config: Partial<AdamConfig>, fieldConfig: FieldConfigSet, oldConfig?: AdamConfigInstance): AdamConfigInstance {\r\n    // set new values and use old ones where new value is not provided\r\n    const startDisabled = fieldConfig.inputTypeSpecs.isExternal;\r\n    oldConfig = oldConfig ?? new AdamConfigInstance(startDisabled);\r\n    const newConfig = new AdamConfigInstance(startDisabled);\r\n\r\n    for (const key of Object.keys(newConfig))\r\n      (newConfig as any)[key] = (config as any)[key] ?? (oldConfig as any)[key];\r\n\r\n    // fixes\r\n    const resetSubfolder = oldConfig.usePortalRoot !== newConfig.usePortalRoot;\r\n    if (resetSubfolder)\r\n      newConfig.subfolder = '';\r\n\r\n    if (newConfig.usePortalRoot) {\r\n      const fixBackSlashes = newConfig.rootSubfolder.includes('\\\\');\r\n      if (fixBackSlashes)\r\n        newConfig.rootSubfolder = newConfig.rootSubfolder.replace(/\\\\/g, '/');\r\n      const fixStartingSlash = newConfig.rootSubfolder.startsWith('/');\r\n      if (fixStartingSlash)\r\n        newConfig.rootSubfolder = newConfig.rootSubfolder.replace('/', '');\r\n      const fixRoot = !newConfig.subfolder.startsWith(newConfig.rootSubfolder);\r\n      if (fixRoot)\r\n        newConfig.subfolder = newConfig.rootSubfolder;\r\n      newConfig.maxDepthReached = false; // when using portal root depth is infinite\r\n    }\r\n\r\n    if (!newConfig.usePortalRoot) {\r\n      const currentDepth = newConfig.subfolder ? newConfig.subfolder.split('/').length : 0;\r\n      const fixDepth = currentDepth >= newConfig.folderDepth;\r\n      if (fixDepth) {\r\n        let folders = newConfig.subfolder.split('/');\r\n        folders = folders.slice(0, newConfig.folderDepth);\r\n        newConfig.subfolder = folders.join('/');\r\n        newConfig.maxDepthReached = true;\r\n      } else\r\n        newConfig.maxDepthReached = false;\r\n    }\r\n\r\n    return newConfig;\r\n  }\r\n\r\n}\r\n","<div class=\"dropzone\" [@adamShowAnimate]=\"adamConfig()?.autoLoad ? 'open' : 'closed'\">\r\n  @if (adamConfig()?.autoLoad && this.fieldState.isOpen()) {\r\n    <div\r\n      [ngClass]=\"{\r\n        'adam-scope-site': adamConfig().usePortalRoot,\r\n        'adam-scope-field': !adamConfig().usePortalRoot,\r\n      }\"\r\n    >\r\n      @if (!disabled() && allowAddButtons()) {\r\n        <!-- click to upload -->\r\n        <div class=\"dz-preview dropzone-adam\" (click)=\"openUploadClick($event)\" tippyTranslate=\"Fields.Hyperlink.AdamFileManager.UploadTip\">\r\n          <div class=\"dz-image adam-browse-background-icon adam-browse-background\">\r\n            <mat-icon>cloud_upload</mat-icon>\r\n            <div class=\"adam-upload-label\">\r\n              {{ 'Fields.Hyperlink.AdamFileManager.UploadLabel' | translate }}\r\n              &nbsp;\r\n              @if (adamConfig().usePortalRoot) {\r\n                <mat-icon>public</mat-icon>\r\n              } @else {\r\n                <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- paste image from clipboard -->\r\n        <div\r\n          #pasteDiv\r\n          appPasteClipboardImage\r\n          [config]=\"config\"\r\n          [elementType]=\"'element'\"\r\n          class=\"dz-preview dropzone-adam paste-image\"\r\n          tippyTranslate=\"Fields.Hyperlink.AdamFileManager.UploadPasteTip\"\r\n          (click)=\"openFeatureInfoDialog()\"\r\n        >\r\n          <div class=\"dz-image adam-browse-background-icon adam-browse-background\">\r\n            <mat-icon\r\n              class=\"adam-filter-mat-icon-with-grey-mat-badge\"\r\n              [matBadgeHidden]=\"isPasteImageFromClipboardEnabled()\"\r\n              matBadgeSize=\"large\"\r\n              matBadge=\"\"\r\n              matBadgePosition=\"below after\"\r\n              matBadgeOverlap=\"true\"\r\n              aria-hidden=\"false\"\r\n            >\r\n              filter\r\n            </mat-icon>\r\n\r\n            <!-- TODO: @2dm -->\r\n            <div class=\"adam-upload-label\">\r\n              {{\r\n                !isPasteImageFromClipboardEnabled()\r\n                  ? 'Fields.Hyperlink.AdamFileManager.UploadPasteLabel'\r\n                  : pasteDiv.classList.contains('pastable-focus')\r\n                    ? 'Fields.Hyperlink.AdamFileManager.UploadPasteFocusedLabel'\r\n                    : ('Fields.Hyperlink.AdamFileManager.UploadPasteLabel' | translate)\r\n              }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      }\r\n      <!-- add folder -->\r\n      @if (!adamConfig().maxDepthReached && !disabled() && allowAddButtons()) {\r\n        <div class=\"dz-preview\" (click)=\"addFolder()\" tippyTranslate=\"Fields.Hyperlink.AdamFileManager.NewFolderTip\">\r\n          <div class=\"dz-image adam-browse-background-icon adam-browse-background\">\r\n            <mat-icon svgIcon=\"folder-plus\"></mat-icon>\r\n            <div class=\"adam-short-label\">{{ 'Fields.Hyperlink.AdamFileManager.NewFolder' | translate }}</div>\r\n          </div>\r\n          <div class=\"dz-details\" style=\"opacity: 1\"></div>\r\n        </div>\r\n      }\r\n      <!-- browse up a folder -->\r\n      @if (adamConfig().subfolder !== '' || (adamConfig().usePortalRoot && adamConfig().subfolder !== adamConfig().rootSubfolder)) {\r\n        <div class=\"dz-preview\" (click)=\"goUp()\" tippyTranslate=\"Fields.Hyperlink.AdamFileManager.BackFolderTip\">\r\n          <div class=\"dz-image adam-browse-background-icon adam-browse-background\">\r\n            <mat-icon svgIcon=\"folder\"></mat-icon>\r\n            <div class=\"adam-short-label\">{{ 'Fields.Hyperlink.AdamFileManager.BackFolder' | translate }}</div>\r\n          </div>\r\n          <div class=\"adam-background adam-browse-background-icon\">\r\n            <mat-icon class=\"adam-back-folder-arrow\">arrow_back</mat-icon>\r\n          </div>\r\n        </div>\r\n      }\r\n      @for (item of items(); track item.Id) {\r\n        <!-- folders -->\r\n        @if (item.IsFolder) {\r\n          <div class=\"dz-preview\" (click)=\"goIntoFolder(item)\">\r\n            <div class=\"dz-image adam-blur adam-browse-background-icon adam-browse-background\">\r\n              <mat-icon svgIcon=\"folder\"></mat-icon>\r\n              <div class=\"short-label\">{{ item.Name }}</div>\r\n            </div>\r\n            <div class=\"dz-details file-type-{{ item.Type }}\">\r\n              @if (adamConfig().allowEdit) {\r\n                <mat-icon\r\n                  (click)=\"del(item)\"\r\n                  appClickStopPropagation\r\n                  class=\"adam-delete-button\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Delete\"\r\n                  [ngClass]=\"{ 'adam-button-disabled': disabled() }\"\r\n                  >clear</mat-icon\r\n                >\r\n\r\n                <mat-icon\r\n                  (click)=\"rename(item)\"\r\n                  appClickStopPropagation\r\n                  class=\"adam-rename-button\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Edit\"\r\n                  [ngClass]=\"{ 'adam-button-disabled': disabled() }\"\r\n                  >edit</mat-icon\r\n                >\r\n              }\r\n              <div class=\"adam-full-name-area\">\r\n                <div class=\"adam-full-name\" [title]=\"item.Name\">{{ item.Name }}</div>\r\n              </div>\r\n            </div>\r\n            @if (item._metadataContentType) {\r\n              <mat-icon\r\n                class=\"adam-tag\"\r\n                appClickStopPropagation\r\n                [ngClass]=\"{ 'metadata-exists': item._metadataId > 0 }\"\r\n                tippy=\"{{ item._metadataContentType }}: {{ item._metadataId }}\"\r\n                (click)=\"editItemMetadata(item, item._metadataContentType, item._metadataId)\"\r\n                >local_offer</mat-icon\r\n              >\r\n            }\r\n          </div>\r\n        }\r\n        <!-- files -->\r\n        @if (!item.IsFolder) {\r\n          <div\r\n            class=\"dz-preview\"\r\n            (click)=\"select(item)\"\r\n            [ngClass]=\"{\r\n              'dz-success': value() === 'file:' + item.Id,\r\n              'disable-select': !adamConfig().enableSelect,\r\n            }\"\r\n          >\r\n            @if (item.Type !== 'image') {\r\n              <div class=\"dz-image adam-blur adam-browse-background-icon adam-browse-background\">\r\n                <mat-icon>{{ item._icon }}</mat-icon>\r\n                <div class=\"adam-short-label\">{{ item.Name }}</div>\r\n              </div>\r\n            } @else {\r\n              <div class=\"dz-image adam-browse-background-image\">\r\n                <img vm-dz-thumbnail=\"\" [alt]=\"item.Id + ':' + item.Name\" [src]=\"item.ThumbnailUrl\" />\r\n              </div>\r\n            }\r\n            <div class=\"dz-details file-type-{{ item.Type }}\">\r\n              @if (adamConfig().allowEdit) {\r\n                <mat-icon\r\n                  (click)=\"del(item)\"\r\n                  appClickStopPropagation\r\n                  class=\"adam-delete-button\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Delete\"\r\n                  [ngClass]=\"{ 'adam-button-disabled': disabled() }\"\r\n                  >clear</mat-icon\r\n                >\r\n\r\n                <mat-icon\r\n                  (click)=\"rename(item)\"\r\n                  appClickStopPropagation\r\n                  class=\"adam-rename-button\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Edit\"\r\n                  [ngClass]=\"{ 'adam-button-disabled': disabled() }\"\r\n                  >edit</mat-icon\r\n                >\r\n              }\r\n              <div class=\"adam-full-name-area\">\r\n                <div class=\"adam-full-name\" [title]=\"item.Name\">{{ item.Name }}</div>\r\n              </div>\r\n              <div class=\"dz-filename adam-short-label\" appClickStopPropagation title=\"#{{ item.Id }} - {{ item._displaySize }} KB\">\r\n                <span>#{{ item.Id }} - {{ item._displaySize }} KB</span>\r\n              </div>\r\n              <a class=\"adam-link-button\" target=\"_blank\" [href]=\"item.Url\" appClickStopPropagation>\r\n                <mat-icon tippyTranslate=\"Fields.Hyperlink.AdamFileManager.Show\">open_in_new</mat-icon>\r\n              </a>\r\n              @if (item.Type === 'image') {\r\n                <mat-icon\r\n                  class=\"image-configuration-button\"\r\n                  appClickStopPropagation\r\n                  [ngClass]=\"{\r\n                    'adam-button-disabled': !item._imageConfigurationContentType,\r\n                    'metadata-exists': item._imageConfigurationId > 0,\r\n                  }\"\r\n                  [tippyTranslate]=\"\r\n                    item._imageConfigurationContentType\r\n                      ? 'Fields.Hyperlink.AdamFileManager.ImageSettings'\r\n                      : 'Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled'\r\n                  \"\r\n                  (click)=\"editItemMetadata(item, item._imageConfigurationContentType, item._imageConfigurationId)\"\r\n                >\r\n                  filter_center_focus</mat-icon\r\n                >\r\n              }\r\n            </div>\r\n            @if (item._metadataContentType) {\r\n              <mat-icon\r\n                class=\"adam-tag\"\r\n                appClickStopPropagation\r\n                [ngClass]=\"{ 'metadata-exists': item._metadataId > 0 }\"\r\n                tippy=\"{{ item._metadataContentType }}: {{ item._metadataId }}\"\r\n                (click)=\"editItemMetadata(item, item._metadataContentType, item._metadataId)\"\r\n                >local_offer</mat-icon\r\n              >\r\n            }\r\n            <div class=\"dz-success-mark\">\r\n              <svg\r\n                width=\"54px\"\r\n                height=\"54px\"\r\n                viewBox=\"0 0 54 54\"\r\n                version=\"1.1\"\r\n                xmlns=\"https://www.w3.org/2000/svg\"\r\n                xmlns:xlink=\"https://www.w3.org/1999/xlink\"\r\n                xmlns:sketch=\"https://www.bohemiancoding.com/sketch/ns\"\r\n              >\r\n                <title>Check</title>\r\n                <defs></defs>\r\n                <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\">\r\n                  <path\r\n                    d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\"\r\n                    id=\"Oval-2\"\r\n                    stroke-opacity=\"0.198794158\"\r\n                    stroke=\"#747474\"\r\n                    fill-opacity=\"0.816519475\"\r\n                    fill=\"#FFFFFF\"\r\n                    sketch:type=\"MSShapeGroup\"\r\n                  ></path>\r\n                </g>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        }\r\n      }\r\n    </div>\r\n  }\r\n</div>\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { animate, state, style, transition, trigger } from '@angular/animations';\r\nimport { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, effect, inject, OnInit, output, ViewContainerRef } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { transient } from '../../../../../../../../core/transient';\r\nimport { AdamConfig } from '../../../../../../../../edit-types/src/AdamConfig';\r\nimport { AdamItem } from '../../../../../../../../edit-types/src/AdamItem';\r\nimport { FeatureNames } from '../../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../../features/features.service';\r\nimport { openFeatureDialog } from '../../../../../features/shared/base-feature.component';\r\nimport { eavConstants } from '../../../../../shared/constants/eav.constants';\r\nimport { ClickStopPropagationDirective } from '../../../../../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../../shared/logging';\r\nimport { EditForm, EditPrep } from '../../../../../shared/models/edit-form.model';\r\nimport { DialogRoutingService } from '../../../../../shared/routing/dialog-routing.service';\r\nimport { computedObj, signalObj } from '../../../../../shared/signals/signal.utilities';\r\nimport { FormsStateService } from '../../../../form/forms-state.service';\r\nimport { EditRoutingService } from '../../../../routing/edit-routing.service';\r\nimport { AdamCacheService } from '../../../../shared/adam/adam-cache.service';\r\nimport { AdamService } from '../../../../shared/adam/adam.service';\r\nimport { LinkCacheService } from '../../../../shared/adam/link-cache.service';\r\nimport { FileTypeHelpers } from '../../../../shared/helpers';\r\nimport { PasteClipboardImageDirective } from '../../../directives/paste-clipboard-image.directive';\r\nimport { FieldState } from '../../../field-state';\r\nimport { AdamConfigInstance } from './adam-browser.models';\r\nimport { AdamConnector } from './adam-connector';\r\nimport { fixDropzone } from './dropzone-helper';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  editItemMetadata: false,\r\n  setConfig: false,\r\n  fetchItems: true,\r\n  processFetchedItems: true,\r\n}\r\n\r\n@Component({\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'adam-browser',\r\n    templateUrl: './adam-browser.component.html',\r\n    styleUrls: ['./adam-browser.component.scss'],\r\n    animations: [\r\n        trigger('adamShowAnimate', [\r\n            state('closed', style({\r\n                height: '0',\r\n                overflow: 'hidden',\r\n            })),\r\n            state('open', style({\r\n                height: '*',\r\n                overflow: 'hidden',\r\n            })),\r\n            transition('closed => open', [\r\n                animate('300ms cubic-bezier(0.4, 0.0, 0.2, 1)'),\r\n            ]),\r\n        ]),\r\n    ],\r\n    imports: [\r\n        NgClass,\r\n        MatIconModule,\r\n        PasteClipboardImageDirective,\r\n        MatBadgeModule,\r\n        TranslateModule,\r\n        ClickStopPropagationDirective,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class AdamBrowserComponent implements OnInit {\r\n  \r\n  openUpload = output<void>();\r\n\r\n  log = classLog({ AdamBrowserComponent }, logSpecs);\r\n\r\n  protected fieldState = inject(FieldState);\r\n  #editRoutingService = inject(EditRoutingService);\r\n  #features = inject(FeaturesService);\r\n\r\n  #adamService = transient(AdamService);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dnnContext: DnnContext,\r\n    private adamCacheService: AdamCacheService,\r\n    private linkCacheService: LinkCacheService,\r\n    private formsStateService: FormsStateService,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    const l = this.log.fnIf('constructor');\r\n    // Ensure that we fetch items when we have the configuration\r\n    effect(() => {\r\n      const adamConfig = this.adamConfig();\r\n      if (adamConfig == null) return;\r\n      this.fetchItems();\r\n    });\r\n\r\n    const cnf = this.config;\r\n    this.#url = this.dnnContext.$2sxc.http.apiUrl(`app/auto/data/${cnf.contentTypeNameId}/${cnf.entityGuid}/${cnf.fieldName}`);\r\n  }\r\n\r\n  protected config = this.fieldState.config;\r\n  protected group = this.fieldState.group;\r\n  #ui = this.fieldState.ui;\r\n\r\n  protected disabled = computedObj('disabled', () => this.#ui().disabled);\r\n\r\n  protected value = computedObj('value', () => this.fieldState.uiValue());\r\n\r\n  public adamConfig = signalObj<AdamConfig>('adamConfig', null); // here the change detection is critical\r\n  public items = signalObj<AdamItem[]>('items', []);\r\n\r\n  #url: string;\r\n  #firstFetch = true;\r\n\r\n  allowAddButtons = computedObj('allowAddButtons', () => {\r\n    const cnf = this.adamConfig();\r\n    return cnf.allowEdit && !((cnf.subfolder === '' || cnf.usePortalRoot && cnf.subfolder === cnf.rootSubfolder) && !cnf.allowAssetsInRoot)\r\n  });\r\n\r\n  protected isPasteImageFromClipboardEnabled = this.#features.isEnabled[FeatureNames.PasteImageFromClipboard];\r\n\r\n  ngOnInit() {\r\n    // Update data if a child-form closes\r\n    this.#dialogRouter.doOnDialogClosed(() => this.fetchItems());\r\n\r\n    // Attach this browser to the AdamConnector\r\n    (this.config.adam as AdamConnector).setBrowser(this);\r\n  }\r\n\r\n  addFolder() {\r\n    if (this.#ui().disabled) return;\r\n\r\n    const folderName = window.prompt('Please enter a folder name'); // todo i18n\r\n    if (!folderName) return;\r\n\r\n    this.#adamService.addFolder(folderName, this.#url, this.adamConfig())\r\n      .subscribe(() => this.fetchItems());\r\n  }\r\n\r\n  del(item: AdamItem) {\r\n    if (this.#ui().disabled) return;\r\n\r\n    const ok = window.confirm('Are you sure you want to delete this item?'); // todo i18n\r\n    if (!ok) return;\r\n\r\n    this.#adamService.deleteItem(item, this.#url, this.adamConfig())\r\n      .subscribe(() => this.fetchItems());\r\n  }\r\n\r\n  editItemMetadata(adamItem: AdamItem, contentTypeName: string, metadataId: number) {\r\n    const l = this.log.fnIf('editItemMetadata', {adamItem, contentTypeName, metadataId});\r\n    if (this.formsStateService.readOnly().isReadOnly || !contentTypeName)\r\n      return l.end('readonly or no content type');\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        metadataId > 0\r\n          ? EditPrep.editId(metadataId)\r\n          : EditPrep.newMetadata(adamItem.ReferenceId, contentTypeName, eavConstants.metadata.cmsObject),\r\n      ],\r\n    };\r\n    this.#editRoutingService.open(this.config.index, this.config.entityGuid, form);\r\n  }\r\n\r\n  goUp() {\r\n    let subfolder = this.adamConfig().subfolder;\r\n    subfolder = subfolder.includes('/') ? subfolder.slice(0, subfolder.lastIndexOf('/')) : '';\r\n    this.setConfig({ subfolder });\r\n  }\r\n\r\n  #getImageConfigurationContentType(item: AdamItem) {\r\n    // allow image configuration if file is type image and if image configuration is enabled in settings\r\n    const settings = this.fieldState.settings();\r\n    return settings.EnableImageConfiguration && item.Type === 'image'\r\n      ? eavConstants.contentTypes.imageDecorator\r\n      : null;\r\n  }\r\n\r\n  #getMetadataContentType(item: AdamItem) {\r\n    let found: string[];\r\n\r\n    // check if it's a folder and if this has a special registration\r\n    if (item.Type === 'folder') {\r\n      found = this.adamConfig().metadataContentTypes.match(/^(folder)(:)([^\\n]*)/im);\r\n      if (found) {\r\n        return found[3];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    // check if the extension has a special registration\r\n    // -- not implemented yet\r\n\r\n    // check if the type \"image\" or \"document\" has a special registration\r\n    // -- not implemented yet\r\n\r\n    // nothing found so far, go for the default with nothing as the prefix\r\n    found = this.adamConfig().metadataContentTypes.match(/^([^:\\n]*)(\\n|$)/im);\r\n    if (found) { return found[1]; }\r\n\r\n    // this is if we don't find anything\r\n    return null;\r\n  }\r\n\r\n  goIntoFolder(item: AdamItem) {\r\n    let subfolder = this.adamConfig().subfolder;\r\n    subfolder = subfolder ? `${subfolder}/${item.Name}` : item.Name;\r\n    this.setConfig({ subfolder });\r\n  }\r\n\r\n  openUploadClick(event: MouseEvent) {\r\n    this.openUpload.emit();\r\n  }\r\n\r\n  rename(item: AdamItem) {\r\n    if (this.#ui().disabled) return;\r\n\r\n    const newName = window.prompt('Rename the file / folder to: ', item.Name); // todo i18n\r\n    if (!newName) return;\r\n\r\n    this.#adamService.rename(item, newName, this.#url, this.adamConfig())\r\n      .subscribe(() => this.fetchItems());\r\n  }\r\n\r\n  select(item: AdamItem) {\r\n    if (this.#ui().disabled || !this.adamConfig().enableSelect) return;\r\n    this.config.adam.onItemClick(item);\r\n  }\r\n\r\n  /**\r\n   * Note: since all fetch-items happen in a timeout or subscribe, it doesn't need to be in the NgZone\r\n   * @returns\r\n   */\r\n  public fetchItems() {\r\n    const adamConfig = this.adamConfig();\r\n    const l = this.log.fnIf('fetchItems', { adamConfig, firstFetch: this.#firstFetch, usePortalRoot: adamConfig?.usePortalRoot });\r\n    if (adamConfig == null) return;\r\n    if (!adamConfig.autoLoad) return;\r\n\r\n    if (this.#firstFetch) {\r\n      this.#firstFetch = false;\r\n      const adamItems = this.adamCacheService.getAdamSnapshot(this.config.entityGuid, this.config.fieldName);\r\n      if (adamItems) {\r\n        const clonedItems = adamItems.map(adamItem => ({ ...adamItem } satisfies AdamItem));\r\n        setTimeout(() => this.#processFetchedItems(clonedItems, adamConfig));\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.#adamService.getAll(this.#url, adamConfig)\r\n      .subscribe(items => this.#processFetchedItems(items, adamConfig));\r\n  }\r\n\r\n  openFeatureInfoDialog() {\r\n    if (!this.isPasteImageFromClipboardEnabled())\r\n      openFeatureDialog(this.matDialog, FeatureNames.PasteImageFromClipboard, this.viewContainerRef, this.changeDetectorRef);\r\n  }\r\n\r\n  #processFetchedItems(items: AdamItem[], adamConfig: AdamConfig): void {\r\n    const l = this.log.fnIf('processFetchedItems', { items, adamConfig, usePortalRoot: adamConfig.usePortalRoot });\r\n    this.linkCacheService.addAdam(items);\r\n\r\n    const filteredItems: AdamItem[] = [];\r\n    const extensionsFilter = getExtensionsFilter(adamConfig.fileFilter);\r\n\r\n    for (const item of items) {\r\n      if (item.Name === '.') { // is root\r\n        const allowEdit = item.AllowEdit;\r\n        if (allowEdit !== adamConfig.allowEdit)\r\n          this.setConfig({ allowEdit });\r\n        continue;\r\n      }\r\n      if (item.Name === '2sxc' || item.Name === 'adam')\r\n        continue;\r\n      if (!item.IsFolder && adamConfig.showImagesOnly && item.Type !== 'image')\r\n        continue;\r\n      if (item.IsFolder && adamConfig.maxDepthReached)\r\n        continue;\r\n      if (extensionsFilter.length > 0) {\r\n        const extension = item.Name.substring(item.Name.lastIndexOf('.') + 1).toLocaleLowerCase();\r\n        if (!extensionsFilter.includes(extension)) continue;\r\n      }\r\n\r\n      item._imageConfigurationContentType = this.#getImageConfigurationContentType(item);\r\n      item._imageConfigurationId = item.Metadata?.find(m => m.Type.Name === item._imageConfigurationContentType)?.Id ?? 0;\r\n      item._metadataContentType = this.#getMetadataContentType(item);\r\n      item._metadataId = item.Metadata?.find(m => m.Type.Name === item._metadataContentType)?.Id ?? 0;\r\n      item._icon = FileTypeHelpers.getIconClass(item.Name);\r\n      item._isMaterialIcon = FileTypeHelpers.isKnownType(item.Name);\r\n      item._displaySize = (item.Size / 1024).toFixed(0);\r\n      filteredItems.push(item);\r\n    }\r\n\r\n    filteredItems.sort((a, b) => a.Name.toLocaleLowerCase().localeCompare(b.Name.toLocaleLowerCase()));\r\n    filteredItems.sort((a, b) => b.IsFolder.toString().localeCompare(a.IsFolder.toString()));\r\n    this.items.set(filteredItems);\r\n  }\r\n\r\n  public setConfig(config: Partial<AdamConfig>) {\r\n    const l = this.log.fnIf('setConfig', config);\r\n    const newConfig = AdamConfigInstance.completeConfig(config, this.config, this.adamConfig());\r\n\r\n    // There is a high risk of infinite loops here, so we need to ensure that we don't do this too often\r\n    if (isEqual(newConfig, this.adamConfig())) {\r\n      l.end('no change');\r\n      return;\r\n    }\r\n\r\n    this.adamConfig.set(newConfig);\r\n    fixDropzone(newConfig, this.config);\r\n    l.end();\r\n  }\r\n\r\n\r\n  public toggle(usePortalRoot: boolean, showImagesOnly: boolean) {\r\n    const newConfig: AdamConfig = { ...this.adamConfig(), ...{ usePortalRoot, showImagesOnly } };\r\n\r\n    if (isEqual(newConfig, this.adamConfig()))\r\n      newConfig.autoLoad = !newConfig.autoLoad;\r\n    else if (!newConfig.autoLoad)\r\n      newConfig.autoLoad = true;\r\n\r\n    this.setConfig(newConfig);\r\n  }\r\n}\r\n\r\nfunction getExtensionsFilter(fileFilter: string) {\r\n  if (!fileFilter) return [];\r\n\r\n  const extensions = fileFilter.split(',').map(extension => {\r\n    extension = extension.trim();\r\n\r\n    if (extension.startsWith('*.'))\r\n      extension = extension.replace('*.', '');\r\n    else if (extension.startsWith('*'))\r\n      extension = extension.replace('*', '');\r\n\r\n    return extension.toLocaleLowerCase();\r\n  });\r\n\r\n  return extensions;\r\n}\r\n\r\n","import { DropzoneConfigExt } from '../../../../../../../../edit-types/src/DropzoneConfigExt';\r\nimport { UrlHelpers } from '../../../../shared/helpers';\r\nimport { FieldConfigSet } from '../../../field-config-set.model';\r\nimport { AdamConfigInstance } from './adam-browser.models';\r\n\r\nexport function fixDropzone(newConfig: AdamConfigInstance, fieldConfig: FieldConfigSet) {\r\n  const oldDzConfig = fieldConfig.dropzone.getConfig();\r\n  const newDzConfig: Partial<DropzoneConfigExt> = {};\r\n  const dzUrlParams = UrlHelpers.getUrlParams(oldDzConfig.url as string);\r\n  const dzSubfolder = dzUrlParams.subfolder || '';\r\n  const dzUsePortalRoot = dzUrlParams.usePortalRoot;\r\n  const fixUploadUrl = dzSubfolder !== newConfig.subfolder || dzUsePortalRoot !== newConfig.usePortalRoot.toString();\r\n\r\n  if (fixUploadUrl) {\r\n    let newUrl = oldDzConfig.url as string;\r\n    newUrl = UrlHelpers.replaceUrlParam(newUrl, 'subfolder', newConfig.subfolder);\r\n    newUrl = UrlHelpers.replaceUrlParam(newUrl, 'usePortalRoot', newConfig.usePortalRoot.toString());\r\n    newDzConfig.url = newUrl;\r\n  }\r\n\r\n  const uploadDisabled = !newConfig.allowEdit\r\n    || (\r\n      (newConfig.subfolder === '' || newConfig.usePortalRoot && newConfig.subfolder === newConfig.rootSubfolder)\r\n      && !newConfig.allowAssetsInRoot\r\n    );\r\n\r\n  const fixDisabled = oldDzConfig.disabled !== uploadDisabled;\r\n  if (fixDisabled)\r\n    newDzConfig.disabled = uploadDisabled;\r\n\r\n  if (Object.keys(newDzConfig).length > 0)\r\n    fieldConfig.dropzone.setConfig(newDzConfig);\r\n}\r\n","<mat-divider></mat-divider>\r\n\r\n<div class=\"hint-box u-border-radius-bottom mat-caption u-shadow-top\">\r\n  <div class=\"hint-box__hint\">{{ \"Fields.Hyperlink.AdamFileManager.Hint\" | translate }}</div>\r\n  <div class=\"hint-box__sponsor\">\r\n    <a\r\n      href=\"https://2sxc.org/help?tag=adam\"\r\n      target=\"_blank\"\r\n      tabindex=\"-1\"\r\n      class=\"adam-link\"\r\n      tippyTranslate=\"Fields.Hyperlink.AdamFileManager.HelpTooltip\"\r\n    >\r\n      <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n      <span>{{ \"Fields.Hyperlink.AdamFileManager.Name\" | translate }}</span>\r\n    </a>\r\n    @if (!hideAdamSponsor()) {\r\n      &nbsp;\r\n      <span>{{ \"Fields.Hyperlink.AdamFileManager.SponsorLine\" | translate }}</span>\r\n      &nbsp;\r\n      <a href=\"https://www.2sic.com\" target=\"_blank\" tabindex=\"-1\">2sic.com</a>\r\n    }\r\n  </div>\r\n</div>\r\n","import { Component, inject } from '@angular/core';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FeaturesService } from '../../../../../features/features.service';\r\nimport { TippyDirective } from '../../../../../shared/directives/tippy.directive';\r\nimport { FeatureNames } from './../../../../../features/feature-names';\r\n\r\n@Component({\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'adam-hint',\r\n    templateUrl: './adam-hint.component.html',\r\n    styleUrls: ['./adam-hint.component.scss'],\r\n    imports: [\r\n        MatDividerModule,\r\n        MatIconModule,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class AdamHintComponent {\r\n  public features = inject(FeaturesService);\r\n  protected hideAdamSponsor = this.features.isEnabled[FeatureNames.NoSponsoredByToSic];\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, ElementRef, inject, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\nimport { AdamBrowserComponent } from './adam-browser/adam-browser.component';\r\nimport { AdamHintComponent } from './adam-hint/adam-hint.component';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.AdamWrapper,\r\n    templateUrl: './adam-wrapper.component.html',\r\n    styleUrls: ['./adam-wrapper.component.scss'],\r\n    imports: [\r\n        AdamBrowserComponent,\r\n        NgClass,\r\n        AdamHintComponent,\r\n    ]\r\n})\r\nexport class AdamWrapperComponent implements OnInit {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n  @ViewChild('invisibleClickable') invisibleClickableRef: ElementRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected config = this.fieldState.config;\r\n\r\n  constructor() { }\r\n\r\n  fullscreenAdam: boolean;\r\n  adamDisabled = this.config.adam.isDisabled;\r\n\r\n\r\n  ngOnInit() {\r\n    this.fullscreenAdam = this.config.inputTypeSpecs.inputType === InputTypeCatalog.HyperlinkLibrary;\r\n  }\r\n\r\n  openUpload() {\r\n    this.invisibleClickableRef.nativeElement.click();\r\n  }\r\n}\r\n","<div [ngClass]=\"{ 'adam-in-popup': this.fieldState.isOpen(), 'c-ew__dialog-content--empty': fullscreenAdam }\">\r\n  <div class=\"adam-dialog-content\">\r\n    <ng-container #fieldComponent></ng-container>\r\n  </div>\r\n  <adam-browser\r\n    (openUpload)=\"openUpload()\"\r\n    class=\"u-shadow-top\"\r\n    [ngClass]=\"{\r\n      'adam-browser-container--short u-hide-scrollbar': !fullscreenAdam,\r\n      'u-display-none': adamDisabled(),\r\n    }\"\r\n  >\r\n  </adam-browser>\r\n  <div class=\"{{ config.dropzonePreviewsClass }}\" [ngClass]=\"{ 'u-display-none': adamDisabled() }\">\r\n    <div class=\"dropzone-previews\"></div>\r\n    <span #invisibleClickable class=\"invisible-clickable\" data-note=\"just a fake, invisible area for dropzone\"></span>\r\n  </div>\r\n  <adam-hint class=\"field-hints\" [ngClass]=\"{ 'u-display-none': adamDisabled() }\"></adam-hint>\r\n</div>\r\n","import * as i0 from '@angular/core';\nimport { InjectionToken, EventEmitter, PLATFORM_ID, Directive, Inject, Optional, Input, Output, Component, ViewEncapsulation, ViewChild, NgModule } from '@angular/core';\nimport * as i2 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport Dropzone from 'dropzone';\n\nconst DROPZONE_CONFIG = new InjectionToken('DROPZONE_CONFIG');\nconst DropzoneEvents = [\n    'error',\n    'success',\n    'sending',\n    'canceled',\n    'complete',\n    'processing',\n    'drop',\n    'dragStart',\n    'dragEnd',\n    'dragEnter',\n    'dragOver',\n    'dragLeave',\n    'thumbnail',\n    'addedFile',\n    'addedFiles',\n    'removedFile',\n    'uploadProgress',\n    'maxFilesReached',\n    'maxFilesExceeded',\n    'errorMultiple',\n    'successMultiple',\n    'sendingMultiple',\n    'canceledMultiple',\n    'completeMultiple',\n    'processingMultiple',\n    'reset',\n    'queueComplete',\n    'totalUploadProgress'\n];\nclass DropzoneConfig {\n    constructor(config = {}) {\n        this.assign(config);\n    }\n    assign(config = {}, target) {\n        target = target || this;\n        for (const key in config) {\n            if (config[key] != null && !(Array.isArray(config[key])) &&\n                typeof config[key] === 'object' && !(config[key] instanceof HTMLElement)) {\n                target[key] = {};\n                this.assign(config[key], target[key]);\n            }\n            else {\n                target[key] = config[key];\n            }\n        }\n    }\n}\n\nclass DropzoneDirective {\n    constructor(zone, renderer, elementRef, differs, platformId, defaults) {\n        this.zone = zone;\n        this.renderer = renderer;\n        this.elementRef = elementRef;\n        this.differs = differs;\n        this.platformId = platformId;\n        this.defaults = defaults;\n        this.configDiff = null;\n        this.disabled = false;\n        this.DZ_INIT = new EventEmitter();\n        this.DZ_ERROR = new EventEmitter();\n        this.DZ_SUCCESS = new EventEmitter();\n        this.DZ_SENDING = new EventEmitter();\n        this.DZ_CANCELED = new EventEmitter();\n        this.DZ_COMPLETE = new EventEmitter();\n        this.DZ_PROCESSING = new EventEmitter();\n        this.DZ_DROP = new EventEmitter();\n        this.DZ_DRAGSTART = new EventEmitter();\n        this.DZ_DRAGEND = new EventEmitter();\n        this.DZ_DRAGENTER = new EventEmitter();\n        this.DZ_DRAGOVER = new EventEmitter();\n        this.DZ_DRAGLEAVE = new EventEmitter();\n        this.DZ_THUMBNAIL = new EventEmitter();\n        this.DZ_ADDEDFILE = new EventEmitter();\n        this.DZ_ADDEDFILES = new EventEmitter();\n        this.DZ_REMOVEDFILE = new EventEmitter();\n        this.DZ_UPLOADPROGRESS = new EventEmitter();\n        this.DZ_MAXFILESREACHED = new EventEmitter();\n        this.DZ_MAXFILESEXCEEDED = new EventEmitter();\n        this.DZ_ERRORMULTIPLE = new EventEmitter();\n        this.DZ_SUCCESSMULTIPLE = new EventEmitter();\n        this.DZ_SENDINGMULTIPLE = new EventEmitter();\n        this.DZ_CANCELEDMULTIPLE = new EventEmitter();\n        this.DZ_COMPLETEMULTIPLE = new EventEmitter();\n        this.DZ_PROCESSINGMULTIPLE = new EventEmitter();\n        this.DZ_RESET = new EventEmitter();\n        this.DZ_QUEUECOMPLETE = new EventEmitter();\n        this.DZ_TOTALUPLOADPROGRESS = new EventEmitter();\n        const dz = Dropzone;\n        dz.autoDiscover = false;\n    }\n    ngOnInit() {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n        const params = new DropzoneConfig(this.defaults);\n        params.assign(this.config); // Custom configuration\n        this.renderer.addClass(this.elementRef.nativeElement, (params.maxFiles === 1) ? 'dz-single' : 'dz-multiple');\n        this.renderer.removeClass(this.elementRef.nativeElement, (params.maxFiles === 1) ? 'dz-multiple' : 'dz-single');\n        this.zone.runOutsideAngular(() => {\n            this.instance = new Dropzone(this.elementRef.nativeElement, params);\n        });\n        if (this.disabled) {\n            this.instance.disable();\n        }\n        if (this.DZ_INIT.observers.length) {\n            this.zone.run(() => {\n                this.DZ_INIT.emit(this.instance);\n            });\n        }\n        // Add auto reset handling for events\n        this.instance.on('success', () => {\n            if (params.autoReset != null) {\n                setTimeout(() => this.reset(), params.autoReset);\n            }\n        });\n        this.instance.on('error', () => {\n            if (params.errorReset != null) {\n                setTimeout(() => this.reset(), params.errorReset);\n            }\n        });\n        this.instance.on('canceled', () => {\n            if (params.cancelReset != null) {\n                setTimeout(() => this.reset(), params.cancelReset);\n            }\n        });\n        // Add native Dropzone event handling\n        DropzoneEvents.forEach((eventName) => {\n            this.instance.on(eventName.toLowerCase(), (...args) => {\n                args = (args.length === 1) ? args[0] : args;\n                const output = `DZ_${eventName.toUpperCase()}`;\n                const emitter = this[output];\n                if (emitter.observers.length > 0) {\n                    this.zone.run(() => {\n                        emitter.emit(args);\n                    });\n                }\n            });\n        });\n        if (!this.configDiff) {\n            this.configDiff = this.differs.find(this.config || {}).create();\n            this.configDiff.diff(this.config || {});\n        }\n    }\n    ngOnDestroy() {\n        if (this.instance) {\n            this.zone.runOutsideAngular(() => {\n                this.instance.destroy();\n            });\n            this.instance = null;\n        }\n    }\n    ngDoCheck() {\n        if (!this.disabled && this.configDiff) {\n            const changes = this.configDiff.diff(this.config || {});\n            if (changes && this.instance) {\n                this.ngOnDestroy();\n                this.ngOnInit();\n            }\n        }\n    }\n    ngOnChanges(changes) {\n        if (this.instance && changes['disabled']) {\n            if (changes['disabled'].currentValue !== changes['disabled'].previousValue) {\n                if (changes['disabled'].currentValue === false) {\n                    this.zone.runOutsideAngular(() => {\n                        this.instance.enable();\n                    });\n                }\n                else if (changes['disabled'].currentValue === true) {\n                    this.zone.runOutsideAngular(() => {\n                        this.instance.disable();\n                    });\n                }\n            }\n        }\n    }\n    dropzone() {\n        return this.instance;\n    }\n    reset(cancel) {\n        if (this.instance) {\n            this.zone.runOutsideAngular(() => {\n                this.instance.removeAllFiles(cancel);\n            });\n        }\n    }\n}\nDropzoneDirective.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: DropzoneDirective, deps: [{ token: i0.NgZone }, { token: i0.Renderer2 }, { token: i0.ElementRef }, { token: i0.KeyValueDiffers }, { token: PLATFORM_ID }, { token: DROPZONE_CONFIG, optional: true }], target: i0.FactoryTarget.Directive });\nDropzoneDirective.dir = i0.ngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.2.5\", type: DropzoneDirective, selector: \"[dropzone]\", inputs: { disabled: \"disabled\", config: [\"dropzone\", \"config\"] }, outputs: { DZ_INIT: \"init\", DZ_ERROR: \"error\", DZ_SUCCESS: \"success\", DZ_SENDING: \"sending\", DZ_CANCELED: \"canceled\", DZ_COMPLETE: \"complete\", DZ_PROCESSING: \"processing\", DZ_DROP: \"drop\", DZ_DRAGSTART: \"dragStart\", DZ_DRAGEND: \"dragEnd\", DZ_DRAGENTER: \"dragEnter\", DZ_DRAGOVER: \"dragOver\", DZ_DRAGLEAVE: \"dragLeave\", DZ_THUMBNAIL: \"thumbnail\", DZ_ADDEDFILE: \"addedFile\", DZ_ADDEDFILES: \"addedFiles\", DZ_REMOVEDFILE: \"removedFile\", DZ_UPLOADPROGRESS: \"uploadProgress\", DZ_MAXFILESREACHED: \"maxFilesReached\", DZ_MAXFILESEXCEEDED: \"maxFilesExceeded\", DZ_ERRORMULTIPLE: \"errorMultiple\", DZ_SUCCESSMULTIPLE: \"successMultiple\", DZ_SENDINGMULTIPLE: \"sendingMultiple\", DZ_CANCELEDMULTIPLE: \"canceledMultiple\", DZ_COMPLETEMULTIPLE: \"completeMultiple\", DZ_PROCESSINGMULTIPLE: \"processingMultiple\", DZ_RESET: \"reset\", DZ_QUEUECOMPLETE: \"queueComplete\", DZ_TOTALUPLOADPROGRESS: \"totalUploadProgress\" }, exportAs: [\"ngxDropzone\"], usesOnChanges: true, ngImport: i0 });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: DropzoneDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[dropzone]',\n                    exportAs: 'ngxDropzone'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: i0.Renderer2 }, { type: i0.ElementRef }, { type: i0.KeyValueDiffers }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [DROPZONE_CONFIG]\n                }] }]; }, propDecorators: { disabled: [{\n                type: Input\n            }], config: [{\n                type: Input,\n                args: ['dropzone']\n            }], DZ_INIT: [{\n                type: Output,\n                args: ['init']\n            }], DZ_ERROR: [{\n                type: Output,\n                args: ['error']\n            }], DZ_SUCCESS: [{\n                type: Output,\n                args: ['success']\n            }], DZ_SENDING: [{\n                type: Output,\n                args: ['sending']\n            }], DZ_CANCELED: [{\n                type: Output,\n                args: ['canceled']\n            }], DZ_COMPLETE: [{\n                type: Output,\n                args: ['complete']\n            }], DZ_PROCESSING: [{\n                type: Output,\n                args: ['processing']\n            }], DZ_DROP: [{\n                type: Output,\n                args: ['drop']\n            }], DZ_DRAGSTART: [{\n                type: Output,\n                args: ['dragStart']\n            }], DZ_DRAGEND: [{\n                type: Output,\n                args: ['dragEnd']\n            }], DZ_DRAGENTER: [{\n                type: Output,\n                args: ['dragEnter']\n            }], DZ_DRAGOVER: [{\n                type: Output,\n                args: ['dragOver']\n            }], DZ_DRAGLEAVE: [{\n                type: Output,\n                args: ['dragLeave']\n            }], DZ_THUMBNAIL: [{\n                type: Output,\n                args: ['thumbnail']\n            }], DZ_ADDEDFILE: [{\n                type: Output,\n                args: ['addedFile']\n            }], DZ_ADDEDFILES: [{\n                type: Output,\n                args: ['addedFiles']\n            }], DZ_REMOVEDFILE: [{\n                type: Output,\n                args: ['removedFile']\n            }], DZ_UPLOADPROGRESS: [{\n                type: Output,\n                args: ['uploadProgress']\n            }], DZ_MAXFILESREACHED: [{\n                type: Output,\n                args: ['maxFilesReached']\n            }], DZ_MAXFILESEXCEEDED: [{\n                type: Output,\n                args: ['maxFilesExceeded']\n            }], DZ_ERRORMULTIPLE: [{\n                type: Output,\n                args: ['errorMultiple']\n            }], DZ_SUCCESSMULTIPLE: [{\n                type: Output,\n                args: ['successMultiple']\n            }], DZ_SENDINGMULTIPLE: [{\n                type: Output,\n                args: ['sendingMultiple']\n            }], DZ_CANCELEDMULTIPLE: [{\n                type: Output,\n                args: ['canceledMultiple']\n            }], DZ_COMPLETEMULTIPLE: [{\n                type: Output,\n                args: ['completeMultiple']\n            }], DZ_PROCESSINGMULTIPLE: [{\n                type: Output,\n                args: ['processingMultiple']\n            }], DZ_RESET: [{\n                type: Output,\n                args: ['reset']\n            }], DZ_QUEUECOMPLETE: [{\n                type: Output,\n                args: ['queueComplete']\n            }], DZ_TOTALUPLOADPROGRESS: [{\n                type: Output,\n                args: ['totalUploadProgress']\n            }] } });\n\nclass DropzoneComponent {\n    constructor(platformId) {\n        this.platformId = platformId;\n        this.disabled = false;\n        this.message = 'Click or drag files to upload';\n        this.placeholder = '';\n        this.useDropzoneClass = true;\n        this.DZ_INIT = new EventEmitter();\n        this.DZ_ERROR = new EventEmitter();\n        this.DZ_SUCCESS = new EventEmitter();\n        this.DZ_SENDING = new EventEmitter();\n        this.DZ_CANCELED = new EventEmitter();\n        this.DZ_COMPLETE = new EventEmitter();\n        this.DZ_PROCESSING = new EventEmitter();\n        this.DZ_DROP = new EventEmitter();\n        this.DZ_DRAGSTART = new EventEmitter();\n        this.DZ_DRAGEND = new EventEmitter();\n        this.DZ_DRAGENTER = new EventEmitter();\n        this.DZ_DRAGOVER = new EventEmitter();\n        this.DZ_DRAGLEAVE = new EventEmitter();\n        this.DZ_THUMBNAIL = new EventEmitter();\n        this.DZ_ADDEDFILE = new EventEmitter();\n        this.DZ_ADDEDFILES = new EventEmitter();\n        this.DZ_REMOVEDFILE = new EventEmitter();\n        this.DZ_UPLOADPROGRESS = new EventEmitter();\n        this.DZ_MAXFILESREACHED = new EventEmitter();\n        this.DZ_MAXFILESEXCEEDED = new EventEmitter();\n        this.DZ_ERRORMULTIPLE = new EventEmitter();\n        this.DZ_SUCCESSMULTIPLE = new EventEmitter();\n        this.DZ_SENDINGMULTIPLE = new EventEmitter();\n        this.DZ_CANCELEDMULTIPLE = new EventEmitter();\n        this.DZ_COMPLETEMULTIPLE = new EventEmitter();\n        this.DZ_PROCESSINGMULTIPLE = new EventEmitter();\n        this.DZ_RESET = new EventEmitter();\n        this.DZ_QUEUECOMPLETE = new EventEmitter();\n        this.DZ_TOTALUPLOADPROGRESS = new EventEmitter();\n    }\n    ngOnInit() {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n        window.setTimeout(() => {\n            DropzoneEvents.forEach((eventName) => {\n                if (this.directiveRef) {\n                    const output = `DZ_${eventName.toUpperCase()}`;\n                    const directiveOutput = output;\n                    const componentOutput = output;\n                    this.directiveRef[directiveOutput] = this[componentOutput];\n                }\n            });\n        }, 0);\n    }\n    getPlaceholder() {\n        return 'url(' + encodeURI(this.placeholder) + ')';\n    }\n}\nDropzoneComponent.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: DropzoneComponent, deps: [{ token: PLATFORM_ID }], target: i0.FactoryTarget.Component });\nDropzoneComponent.cmp = i0.ngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.5\", type: DropzoneComponent, selector: \"dropzone\", inputs: { disabled: \"disabled\", config: \"config\", message: \"message\", placeholder: \"placeholder\", useDropzoneClass: \"useDropzoneClass\" }, outputs: { DZ_INIT: \"init\", DZ_ERROR: \"error\", DZ_SUCCESS: \"success\", DZ_SENDING: \"sending\", DZ_CANCELED: \"canceled\", DZ_COMPLETE: \"complete\", DZ_PROCESSING: \"processing\", DZ_DROP: \"drop\", DZ_DRAGSTART: \"dragStart\", DZ_DRAGEND: \"dragEnd\", DZ_DRAGENTER: \"dragEnter\", DZ_DRAGOVER: \"dragOver\", DZ_DRAGLEAVE: \"dragLeave\", DZ_THUMBNAIL: \"thumbnail\", DZ_ADDEDFILE: \"addedFile\", DZ_ADDEDFILES: \"addedFiles\", DZ_REMOVEDFILE: \"removedFile\", DZ_UPLOADPROGRESS: \"uploadProgress\", DZ_MAXFILESREACHED: \"maxFilesReached\", DZ_MAXFILESEXCEEDED: \"maxFilesExceeded\", DZ_ERRORMULTIPLE: \"errorMultiple\", DZ_SUCCESSMULTIPLE: \"successMultiple\", DZ_SENDINGMULTIPLE: \"sendingMultiple\", DZ_CANCELEDMULTIPLE: \"canceledMultiple\", DZ_COMPLETEMULTIPLE: \"completeMultiple\", DZ_PROCESSINGMULTIPLE: \"processingMultiple\", DZ_RESET: \"reset\", DZ_QUEUECOMPLETE: \"queueComplete\", DZ_TOTALUPLOADPROGRESS: \"totalUploadProgress\" }, viewQueries: [{ propertyName: \"directiveRef\", first: true, predicate: DropzoneDirective, descendants: true, static: true }], exportAs: [\"ngxDropzone\"], ngImport: i0, template: \"<div class=\\\"dz-wrapper\\\" [class.dropzone]=\\\"useDropzoneClass\\\" [dropzone]=\\\"config\\\" [disabled]=\\\"disabled\\\" (init)=\\\"DZ_INIT.emit($event)\\\">\\n  <div class=\\\"dz-message\\\" [class.disabled]=\\\"disabled\\\" [class.dz-placeholder]=\\\"placeholder\\\">\\n    <div class=\\\"dz-text\\\" [innerHTML]=\\\"config?.dictDefaultMessage || message\\\"></div>\\n\\n    <div *ngIf=\\\"placeholder\\\" class=\\\"dz-image\\\" [style.background-image]=\\\"getPlaceholder()\\\"></div>\\n  </div>\\n\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\"dropzone{display:block;width:100%;height:auto}dropzone[fxflex]{display:flex;flex-direction:inherit;min-width:0;min-height:0}dropzone[fxflex]>.dropzone.dz-wrapper{flex:1 1 auto;min-width:0;min-height:0;-webkit-box-flex:1}dropzone[fxlayout]{align-items:inherit;align-content:inherit;justify-content:inherit;-webkit-box-align:inherit;-webkit-box-pack:inherit}dropzone[fxlayout]>.dropzone.dz-wrapper.dz-single{display:flex;flex-direction:column;align-items:center;align-content:center;justify-content:center;-webkit-box-align:center;-webkit-box-pack:center}dropzone[fxlayout]>.dropzone.dz-wrapper.dz-multiple{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;justify-content:space-between;-webkit-box-align:flex-start;-webkit-box-pack:flex-start}dropzone>.dropzone.dz-wrapper{position:relative;overflow:auto;width:100%;min-height:0;max-height:100%;padding:0;border:none;color:#666;background:transparent}dropzone>.dropzone.dz-wrapper .dz-message{position:relative;display:inline-block;overflow:auto;width:calc(100% - 16px);min-width:calc(100% - 16px);min-height:40px;max-width:calc(100% - 16px);max-height:100%;margin:8px;border:2px dashed #aaa;background-color:#eee}dropzone>.dropzone.dz-wrapper .dz-message .dz-text{position:absolute;top:50%;width:100%;padding:8px 16px;text-align:center;transform:translateY(-50%)}dropzone>.dropzone.dz-wrapper .dz-message .dz-image{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:50% 50%}dropzone>.dropzone.dz-wrapper .dz-message.disabled{cursor:not-allowed}dropzone>.dropzone.dz-wrapper .dz-message.disabled .dz-text{opacity:.5}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder{border-color:rgba(#aaa,0)}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder .dz-text{position:absolute;z-index:1;top:0;right:10%;left:10%;opacity:0;font-weight:700;background-color:rgba(#fff,.5);transform:translateY(-50%);transition:filter .25s ease-in-out,opacity .25s ease-in-out,border-color .25s ease-in-out}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled){border-color:#aaa}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-text{opacity:1}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-image{filter:blur(8px)}dropzone>.dropzone.dz-wrapper .dz-preview{margin:8px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-details{padding:24px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress{width:80%;margin-left:-40%;border:1px solid #aaa;border-radius:4px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress .dz-upload{background-color:#666}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span{display:block;overflow:hidden;width:100%;max-width:100%;text-overflow:ellipsis}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span:hover{overflow:visible;white-space:normal;word-wrap:break-word}dropzone>.dropzone.dz-wrapper.dz-single .dz-message{width:100%;height:100%}dropzone>.dropzone.dz-wrapper.dz-single.dz-started .dz-message{display:none}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview{width:calc(100% - 16px);height:100%}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image{width:100%;height:100%;border-radius:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image img{display:block;width:100%;height:auto;margin:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-error-message{top:50%;left:50%;transform:translate(-50%) translateY(100%)}dropzone>.dropzone.dz-wrapper.dz-multiple.dz-started .dz-message{display:inline-block}\\n\", \"@keyframes passing-through{0%{opacity:0;transform:translateY(40px)}30%,70%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}@keyframes slide-in{0%{opacity:0;transform:translateY(40px)}30%{opacity:1;transform:translateY(0)}}@keyframes pulse{0%{transform:scale(1)}10%{transform:scale(1.1)}20%{transform:scale(1)}}.dropzone,.dropzone *{box-sizing:border-box}.dropzone{min-height:150px;border:2px solid rgba(0,0,0,.3);background:#fff;padding:20px}.dropzone.dz-clickable{cursor:pointer}.dropzone.dz-clickable *{cursor:default}.dropzone.dz-clickable .dz-message,.dropzone.dz-clickable .dz-message *{cursor:pointer}.dropzone.dz-started .dz-message{display:none}.dropzone.dz-drag-hover{border-style:solid}.dropzone.dz-drag-hover .dz-message{opacity:.5}.dropzone .dz-message{text-align:center;margin:2em 0}.dropzone .dz-message .dz-button{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.dropzone .dz-preview{position:relative;display:inline-block;vertical-align:top;margin:16px;min-height:100px}.dropzone .dz-preview:hover{z-index:1000}.dropzone .dz-preview.dz-file-preview .dz-image{border-radius:20px;background:#999;background:linear-gradient(to bottom,#eee,#ddd)}.dropzone .dz-preview.dz-file-preview .dz-details{opacity:1}.dropzone .dz-preview.dz-image-preview{background:#fff}.dropzone .dz-preview.dz-image-preview .dz-details{transition:opacity .2s linear}.dropzone .dz-preview .dz-remove{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.dropzone .dz-preview .dz-remove:hover{text-decoration:underline}.dropzone .dz-preview:hover .dz-details{opacity:1}.dropzone .dz-preview .dz-details{z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:#000000e6;line-height:150%}.dropzone .dz-preview .dz-details .dz-size{margin-bottom:1em;font-size:16px}.dropzone .dz-preview .dz-details .dz-filename{white-space:nowrap}.dropzone .dz-preview .dz-details .dz-filename:hover span{border:1px solid rgba(200,200,200,.8);background-color:#fffc}.dropzone .dz-preview .dz-details .dz-filename:not(:hover){overflow:hidden;text-overflow:ellipsis}.dropzone .dz-preview .dz-details .dz-filename:not(:hover) span{border:1px solid transparent}.dropzone .dz-preview .dz-details .dz-filename span,.dropzone .dz-preview .dz-details .dz-size span{background-color:#fff6;padding:0 .4em;border-radius:3px}.dropzone .dz-preview:hover .dz-image img{transform:scale(1.05);filter:blur(8px)}.dropzone .dz-preview .dz-image{border-radius:20px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.dropzone .dz-preview .dz-image img{display:block}.dropzone .dz-preview.dz-success .dz-success-mark{animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview.dz-error .dz-error-mark{opacity:1;animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview .dz-success-mark,.dropzone .dz-preview .dz-error-mark{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:50%;left:50%;margin-left:-27px;margin-top:-27px}.dropzone .dz-preview .dz-success-mark svg,.dropzone .dz-preview .dz-error-mark svg{display:block;width:54px;height:54px}.dropzone .dz-preview.dz-processing .dz-progress{opacity:1;transition:all .2s linear}.dropzone .dz-preview.dz-complete .dz-progress{opacity:0;transition:opacity .4s ease-in}.dropzone .dz-preview:not(.dz-processing) .dz-progress{animation:pulse 6s ease infinite}.dropzone .dz-preview .dz-progress{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:rgba(255,255,255,.9);-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.dropzone .dz-preview .dz-progress .dz-upload{background:#333;background:linear-gradient(to bottom,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;transition:width .3s ease-in-out}.dropzone .dz-preview.dz-error .dz-error-message{display:block}.dropzone .dz-preview.dz-error:hover .dz-error-message{opacity:1;pointer-events:auto}.dropzone .dz-preview .dz-error-message{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;transition:opacity .3s ease;border-radius:8px;font-size:13px;top:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(to bottom,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.dropzone .dz-preview .dz-error-message:after{content:\\\"\\\";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}\\n\"], directives: [{ type: DropzoneDirective, selector: \"[dropzone]\", inputs: [\"disabled\", \"dropzone\"], outputs: [\"init\", \"error\", \"success\", \"sending\", \"canceled\", \"complete\", \"processing\", \"drop\", \"dragStart\", \"dragEnd\", \"dragEnter\", \"dragOver\", \"dragLeave\", \"thumbnail\", \"addedFile\", \"addedFiles\", \"removedFile\", \"uploadProgress\", \"maxFilesReached\", \"maxFilesExceeded\", \"errorMultiple\", \"successMultiple\", \"sendingMultiple\", \"canceledMultiple\", \"completeMultiple\", \"processingMultiple\", \"reset\", \"queueComplete\", \"totalUploadProgress\"], exportAs: [\"ngxDropzone\"] }, { type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], encapsulation: i0.ViewEncapsulation.None });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: DropzoneComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'dropzone', exportAs: 'ngxDropzone', encapsulation: ViewEncapsulation.None, template: \"<div class=\\\"dz-wrapper\\\" [class.dropzone]=\\\"useDropzoneClass\\\" [dropzone]=\\\"config\\\" [disabled]=\\\"disabled\\\" (init)=\\\"DZ_INIT.emit($event)\\\">\\n  <div class=\\\"dz-message\\\" [class.disabled]=\\\"disabled\\\" [class.dz-placeholder]=\\\"placeholder\\\">\\n    <div class=\\\"dz-text\\\" [innerHTML]=\\\"config?.dictDefaultMessage || message\\\"></div>\\n\\n    <div *ngIf=\\\"placeholder\\\" class=\\\"dz-image\\\" [style.background-image]=\\\"getPlaceholder()\\\"></div>\\n  </div>\\n\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\"dropzone{display:block;width:100%;height:auto}dropzone[fxflex]{display:flex;flex-direction:inherit;min-width:0;min-height:0}dropzone[fxflex]>.dropzone.dz-wrapper{flex:1 1 auto;min-width:0;min-height:0;-webkit-box-flex:1}dropzone[fxlayout]{align-items:inherit;align-content:inherit;justify-content:inherit;-webkit-box-align:inherit;-webkit-box-pack:inherit}dropzone[fxlayout]>.dropzone.dz-wrapper.dz-single{display:flex;flex-direction:column;align-items:center;align-content:center;justify-content:center;-webkit-box-align:center;-webkit-box-pack:center}dropzone[fxlayout]>.dropzone.dz-wrapper.dz-multiple{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;justify-content:space-between;-webkit-box-align:flex-start;-webkit-box-pack:flex-start}dropzone>.dropzone.dz-wrapper{position:relative;overflow:auto;width:100%;min-height:0;max-height:100%;padding:0;border:none;color:#666;background:transparent}dropzone>.dropzone.dz-wrapper .dz-message{position:relative;display:inline-block;overflow:auto;width:calc(100% - 16px);min-width:calc(100% - 16px);min-height:40px;max-width:calc(100% - 16px);max-height:100%;margin:8px;border:2px dashed #aaa;background-color:#eee}dropzone>.dropzone.dz-wrapper .dz-message .dz-text{position:absolute;top:50%;width:100%;padding:8px 16px;text-align:center;transform:translateY(-50%)}dropzone>.dropzone.dz-wrapper .dz-message .dz-image{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:50% 50%}dropzone>.dropzone.dz-wrapper .dz-message.disabled{cursor:not-allowed}dropzone>.dropzone.dz-wrapper .dz-message.disabled .dz-text{opacity:.5}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder{border-color:rgba(#aaa,0)}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder .dz-text{position:absolute;z-index:1;top:0;right:10%;left:10%;opacity:0;font-weight:700;background-color:rgba(#fff,.5);transform:translateY(-50%);transition:filter .25s ease-in-out,opacity .25s ease-in-out,border-color .25s ease-in-out}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled){border-color:#aaa}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-text{opacity:1}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-image{filter:blur(8px)}dropzone>.dropzone.dz-wrapper .dz-preview{margin:8px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-details{padding:24px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress{width:80%;margin-left:-40%;border:1px solid #aaa;border-radius:4px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress .dz-upload{background-color:#666}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span{display:block;overflow:hidden;width:100%;max-width:100%;text-overflow:ellipsis}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span:hover{overflow:visible;white-space:normal;word-wrap:break-word}dropzone>.dropzone.dz-wrapper.dz-single .dz-message{width:100%;height:100%}dropzone>.dropzone.dz-wrapper.dz-single.dz-started .dz-message{display:none}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview{width:calc(100% - 16px);height:100%}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image{width:100%;height:100%;border-radius:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image img{display:block;width:100%;height:auto;margin:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-error-message{top:50%;left:50%;transform:translate(-50%) translateY(100%)}dropzone>.dropzone.dz-wrapper.dz-multiple.dz-started .dz-message{display:inline-block}\\n\", \"@keyframes passing-through{0%{opacity:0;transform:translateY(40px)}30%,70%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-40px)}}@keyframes slide-in{0%{opacity:0;transform:translateY(40px)}30%{opacity:1;transform:translateY(0)}}@keyframes pulse{0%{transform:scale(1)}10%{transform:scale(1.1)}20%{transform:scale(1)}}.dropzone,.dropzone *{box-sizing:border-box}.dropzone{min-height:150px;border:2px solid rgba(0,0,0,.3);background:#fff;padding:20px}.dropzone.dz-clickable{cursor:pointer}.dropzone.dz-clickable *{cursor:default}.dropzone.dz-clickable .dz-message,.dropzone.dz-clickable .dz-message *{cursor:pointer}.dropzone.dz-started .dz-message{display:none}.dropzone.dz-drag-hover{border-style:solid}.dropzone.dz-drag-hover .dz-message{opacity:.5}.dropzone .dz-message{text-align:center;margin:2em 0}.dropzone .dz-message .dz-button{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.dropzone .dz-preview{position:relative;display:inline-block;vertical-align:top;margin:16px;min-height:100px}.dropzone .dz-preview:hover{z-index:1000}.dropzone .dz-preview.dz-file-preview .dz-image{border-radius:20px;background:#999;background:linear-gradient(to bottom,#eee,#ddd)}.dropzone .dz-preview.dz-file-preview .dz-details{opacity:1}.dropzone .dz-preview.dz-image-preview{background:#fff}.dropzone .dz-preview.dz-image-preview .dz-details{transition:opacity .2s linear}.dropzone .dz-preview .dz-remove{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.dropzone .dz-preview .dz-remove:hover{text-decoration:underline}.dropzone .dz-preview:hover .dz-details{opacity:1}.dropzone .dz-preview .dz-details{z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:#000000e6;line-height:150%}.dropzone .dz-preview .dz-details .dz-size{margin-bottom:1em;font-size:16px}.dropzone .dz-preview .dz-details .dz-filename{white-space:nowrap}.dropzone .dz-preview .dz-details .dz-filename:hover span{border:1px solid rgba(200,200,200,.8);background-color:#fffc}.dropzone .dz-preview .dz-details .dz-filename:not(:hover){overflow:hidden;text-overflow:ellipsis}.dropzone .dz-preview .dz-details .dz-filename:not(:hover) span{border:1px solid transparent}.dropzone .dz-preview .dz-details .dz-filename span,.dropzone .dz-preview .dz-details .dz-size span{background-color:#fff6;padding:0 .4em;border-radius:3px}.dropzone .dz-preview:hover .dz-image img{transform:scale(1.05);filter:blur(8px)}.dropzone .dz-preview .dz-image{border-radius:20px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.dropzone .dz-preview .dz-image img{display:block}.dropzone .dz-preview.dz-success .dz-success-mark{animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview.dz-error .dz-error-mark{opacity:1;animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview .dz-success-mark,.dropzone .dz-preview .dz-error-mark{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:50%;left:50%;margin-left:-27px;margin-top:-27px}.dropzone .dz-preview .dz-success-mark svg,.dropzone .dz-preview .dz-error-mark svg{display:block;width:54px;height:54px}.dropzone .dz-preview.dz-processing .dz-progress{opacity:1;transition:all .2s linear}.dropzone .dz-preview.dz-complete .dz-progress{opacity:0;transition:opacity .4s ease-in}.dropzone .dz-preview:not(.dz-processing) .dz-progress{animation:pulse 6s ease infinite}.dropzone .dz-preview .dz-progress{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:rgba(255,255,255,.9);-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.dropzone .dz-preview .dz-progress .dz-upload{background:#333;background:linear-gradient(to bottom,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;transition:width .3s ease-in-out}.dropzone .dz-preview.dz-error .dz-error-message{display:block}.dropzone .dz-preview.dz-error:hover .dz-error-message{opacity:1;pointer-events:auto}.dropzone .dz-preview .dz-error-message{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;transition:opacity .3s ease;border-radius:8px;font-size:13px;top:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(to bottom,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.dropzone .dz-preview .dz-error-message:after{content:\\\"\\\";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; }, propDecorators: { disabled: [{\n                type: Input\n            }], config: [{\n                type: Input\n            }], message: [{\n                type: Input\n            }], placeholder: [{\n                type: Input\n            }], useDropzoneClass: [{\n                type: Input\n            }], DZ_INIT: [{\n                type: Output,\n                args: ['init']\n            }], DZ_ERROR: [{\n                type: Output,\n                args: ['error']\n            }], DZ_SUCCESS: [{\n                type: Output,\n                args: ['success']\n            }], DZ_SENDING: [{\n                type: Output,\n                args: ['sending']\n            }], DZ_CANCELED: [{\n                type: Output,\n                args: ['canceled']\n            }], DZ_COMPLETE: [{\n                type: Output,\n                args: ['complete']\n            }], DZ_PROCESSING: [{\n                type: Output,\n                args: ['processing']\n            }], DZ_DROP: [{\n                type: Output,\n                args: ['drop']\n            }], DZ_DRAGSTART: [{\n                type: Output,\n                args: ['dragStart']\n            }], DZ_DRAGEND: [{\n                type: Output,\n                args: ['dragEnd']\n            }], DZ_DRAGENTER: [{\n                type: Output,\n                args: ['dragEnter']\n            }], DZ_DRAGOVER: [{\n                type: Output,\n                args: ['dragOver']\n            }], DZ_DRAGLEAVE: [{\n                type: Output,\n                args: ['dragLeave']\n            }], DZ_THUMBNAIL: [{\n                type: Output,\n                args: ['thumbnail']\n            }], DZ_ADDEDFILE: [{\n                type: Output,\n                args: ['addedFile']\n            }], DZ_ADDEDFILES: [{\n                type: Output,\n                args: ['addedFiles']\n            }], DZ_REMOVEDFILE: [{\n                type: Output,\n                args: ['removedFile']\n            }], DZ_UPLOADPROGRESS: [{\n                type: Output,\n                args: ['uploadProgress']\n            }], DZ_MAXFILESREACHED: [{\n                type: Output,\n                args: ['maxFilesReached']\n            }], DZ_MAXFILESEXCEEDED: [{\n                type: Output,\n                args: ['maxFilesExceeded']\n            }], DZ_ERRORMULTIPLE: [{\n                type: Output,\n                args: ['errorMultiple']\n            }], DZ_SUCCESSMULTIPLE: [{\n                type: Output,\n                args: ['successMultiple']\n            }], DZ_SENDINGMULTIPLE: [{\n                type: Output,\n                args: ['sendingMultiple']\n            }], DZ_CANCELEDMULTIPLE: [{\n                type: Output,\n                args: ['canceledMultiple']\n            }], DZ_COMPLETEMULTIPLE: [{\n                type: Output,\n                args: ['completeMultiple']\n            }], DZ_PROCESSINGMULTIPLE: [{\n                type: Output,\n                args: ['processingMultiple']\n            }], DZ_RESET: [{\n                type: Output,\n                args: ['reset']\n            }], DZ_QUEUECOMPLETE: [{\n                type: Output,\n                args: ['queueComplete']\n            }], DZ_TOTALUPLOADPROGRESS: [{\n                type: Output,\n                args: ['totalUploadProgress']\n            }], directiveRef: [{\n                type: ViewChild,\n                args: [DropzoneDirective, { static: true }]\n            }] } });\n\nclass DropzoneModule {\n}\nDropzoneModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: DropzoneModule, deps: [], target: i0.FactoryTarget.NgModule });\nDropzoneModule.mod = i0.ngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: DropzoneModule, declarations: [DropzoneComponent, DropzoneDirective], imports: [CommonModule], exports: [CommonModule, DropzoneComponent, DropzoneDirective] });\nDropzoneModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: DropzoneModule, imports: [[CommonModule], CommonModule] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: DropzoneModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    declarations: [DropzoneComponent, DropzoneDirective],\n                    exports: [CommonModule, DropzoneComponent, DropzoneDirective]\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DROPZONE_CONFIG, DropzoneComponent, DropzoneConfig, DropzoneDirective, DropzoneModule };\n","import { DropzoneConfigExt } from '../../../../../../../edit-types/src/DropzoneConfigExt';\r\n\r\nexport type DropzoneType = any;\r\n\r\nexport class DropzoneConfigInstance implements DropzoneConfigExt {\r\n  /** Subfolder and UsePortalRoot are updated from AdamBrowser */\r\n  disabled: boolean;\r\n  url: string;\r\n  headers: Record<string, string>;\r\n  acceptedFiles: string = null;\r\n  maxFiles = 1000;\r\n  parallelUploads = 1000;\r\n  autoReset: number = null;\r\n  errorReset: number = null;\r\n  cancelReset: number = null;\r\n  /** In MB. Upload will also be stopped on the server if file is larger than allowed */\r\n  maxFilesize = 20000;\r\n  /** In milliseconds */\r\n  timeout = 1800000;\r\n  paramName = 'uploadfile';\r\n  maxThumbnailFilesize = 10;\r\n  dictDefaultMessage = '';\r\n  addRemoveLinks = false;\r\n  previewsContainer = '.dropzone-previews';\r\n  /**\r\n   * We need a clickable, because otherwise the entire area is clickable,\r\n   * so i'm just making the preview clickable, as it's not important\r\n   */\r\n  clickable = '.dropzone-previews';\r\n\r\n  constructor(disabled: boolean, url: string, headers: Record<string, string>) {\r\n    this.disabled = disabled;\r\n    this.url = url;\r\n    this.headers = headers;\r\n  }\r\n}\r\n","export class WysiwygConstants {\r\n\r\n  /** Constant to mark the WYSIWYG dom tag */\r\n  static readonly classToDetectWysiwyg = \"class-distinguish-from-adam-dropzone\";\r\n}","import { WysiwygConstants } from '../../../../../../../field-string-wysiwyg/shared/wysiwyg.constants';\r\n\r\n\r\n/**\r\n * Special helper / constants so Dropzone works together with the WYSIWYG editor\r\n */\r\nexport class DropzoneWysiwyg {\r\n\r\n  /** If the last drop was on a WYSIWYG field */\r\n  isStringWysiwyg = false;\r\n\r\n  /** Allowed image / mime types on WYSIWYG */\r\n  imageTypes: string[] = [\"image/jpeg\", \"image/png\"];\r\n\r\n  // on onDrop we check if drop is on wysiwyg or not\r\n  detectWysiwygOnDrop(event: any) {\r\n    this.isStringWysiwyg = DropzoneWysiwyg.isParentWysiwyg((event.toElement as HTMLElement));\r\n  }\r\n  \r\n  // here we check if file is image type so we can cancel upload if it is also uploaded on wysiwyg\r\n  removeFilesHandledByWysiwyg(dropzone: any, file: any) {\r\n    if (this.isStringWysiwyg && this.imageTypes.some(x => x === file.type))\r\n      dropzone.removeFile(file);\r\n  }\r\n\r\n\r\n  static isParentWysiwyg(element: HTMLElement): boolean {\r\n    // Traverse the DOM to see if we can find the wysiwyg editor\r\n    do {\r\n      if (element == null) return false;\r\n      if (element?.classList.contains(WysiwygConstants.classToDetectWysiwyg)) return true;\r\n      element = element.parentElement;\r\n    } while (!element?.classList.contains(WysiwygConstants.classToDetectWysiwyg) || element.parentElement != document.body);\r\n    return false;\r\n  }\r\n\r\n}","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { NgClass } from '@angular/common';\r\nimport { AfterViewInit, Component, computed, inject, signal, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { DropzoneDirective, DropzoneModule } from 'ngx-dropzone-wrapper';\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { DropzoneConfigExt } from '../../../../../../../edit-types/src/DropzoneConfigExt';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\nimport { DropzoneConfigInstance, DropzoneType } from './dropzone-wrapper.models';\r\nimport { DropzoneWysiwyg } from './dropzone-wysiwyg';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.DropzoneWrapper,\r\n    templateUrl: './dropzone-wrapper.component.html',\r\n    styleUrls: ['./dropzone-wrapper.component.scss'],\r\n    imports: [\r\n        NgClass,\r\n        DropzoneModule,\r\n    ]\r\n})\r\nexport class DropzoneWrapperComponent implements AfterViewInit {\r\n  \r\n  log = classLog({DropzoneWrapperComponent});\r\n\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n  @ViewChild(DropzoneDirective) dropzoneRef: DropzoneDirective;\r\n\r\n  #fieldState = inject(FieldState);\r\n  #config = this.#fieldState.config;\r\n\r\n  dropzoneConfig = signal<DropzoneConfigExt>(null);\r\n  dropzoneDisabled = computed(() => this.#fieldState.ui().disabled || (this.dropzoneConfig()?.disabled ?? true));\r\n  \r\n  #wysiwygHelper = new DropzoneWysiwyg();\r\n\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private dnnContext: DnnContext,\r\n  ) {\r\n    this.extendFieldConfigWithDropZone();\r\n    this.#setConfig({});\r\n  }\r\n\r\n  extendFieldConfigWithDropZone() {\r\n    this.#config.dropzone = {\r\n      setConfig: (config) => this.#setConfig(config),\r\n      getConfig: () => this.dropzoneConfig(),\r\n      uploadFile: (image) => this.#uploadFile(image),\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.#setConfig({\r\n      previewsContainer: `.${this.#config.dropzonePreviewsClass} .dropzone-previews`,\r\n      clickable: `.${this.#config.dropzonePreviewsClass} .invisible-clickable`,\r\n    });\r\n  }\r\n\r\n  // on onDrop we check if drop is on wysiwyg or not\r\n  onDrop(event: any) {\r\n    this.#wysiwygHelper.detectWysiwygOnDrop(event);\r\n  }\r\n\r\n  // here we check if file is image type so we can cancel upload if it is also uploaded on wysiwyg\r\n  onAddedFile(file: any) {\r\n    this.#wysiwygHelper.removeFilesHandledByWysiwyg(this.dropzoneRef.dropzone(), file);\r\n  }\r\n\r\n  onUploadError(event: DropzoneType) {\r\n    this.log.fn('onUploadError', { event });\r\n    alert(`Dropzone upload error. Event ${event}`);\r\n    this.dropzoneRef.reset();\r\n  }\r\n\r\n  onUploadSuccess(event: DropzoneType) {\r\n    const l = this.log.fn('onUploadSuccess', { event });\r\n    const response: AdamItem = event[1]; // gets the server response as second argument.\r\n    if (!response.Error) {\r\n      if (this.#config.adam) {\r\n        this.#config.adam.onItemUpload(response);\r\n        this.#config.adam.refresh();\r\n      } else {\r\n        l.a(`Upload failed because: ADAM reference doesn't exist`);\r\n      }\r\n    } else {\r\n      l.a(`Upload failed because: ${response.Error}`);\r\n      alert(`Upload failed because: ${response.Error}`);\r\n    }\r\n    this.dropzoneRef.reset();\r\n  }\r\n\r\n  #setConfig(config: Partial<DropzoneConfigExt>) {\r\n    const contentType = this.#config.contentTypeNameId;\r\n    const entityGuid = this.#config.entityGuid;\r\n    const field = this.#config.fieldName;\r\n    const appId = this.formConfig.config.appId;\r\n\r\n    const startDisabled = this.#config.inputTypeSpecs.isExternal;\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(`app/auto/data/${contentType}/${entityGuid}/${field}?subfolder=&usePortalRoot=false&appId=${appId}`);\r\n    const headers = this.dnnContext.sxc.webApi.headers();\r\n\r\n    const newConfig = new DropzoneConfigInstance(startDisabled, url, headers);\r\n    const oldConfig = this.dropzoneConfig() ?? newConfig;\r\n\r\n    for (const key of Object.keys(newConfig))\r\n      (newConfig as any)[key] = (config as any)[key] ?? (oldConfig as any)[key];\r\n\r\n    // fixes\r\n    const syncUploadLimit = newConfig.maxFiles !== newConfig.parallelUploads;\r\n    if (syncUploadLimit) {\r\n      const uploadLimit = (newConfig.maxFiles >= newConfig.parallelUploads)\r\n        ? newConfig.maxFiles\r\n        : newConfig.parallelUploads;\r\n      newConfig.maxFiles = uploadLimit;\r\n      newConfig.parallelUploads = uploadLimit;\r\n    }\r\n\r\n    // Make sure dropzone accepts all files, since we'll process it afterwards\r\n    // only way to tell dropzone to accept all files is to remove acceptedFiles from config\r\n    // so if the config exists but is empty/null, we must completely remove it\r\n    const fixAcceptedFiles = newConfig.acceptedFiles == null || newConfig.acceptedFiles === '';\r\n    if (fixAcceptedFiles)\r\n      delete newConfig.acceptedFiles; \r\n\r\n    this.dropzoneConfig.set(newConfig);\r\n  }\r\n\r\n  #uploadFile(file: File & { upload?: { chunked: boolean; }; }) {\r\n    const dropzone = this.dropzoneRef.dropzone();\r\n    file.upload = { chunked: dropzone.defaultOptions.chunking };\r\n    dropzone.processFile(file);\r\n  }\r\n}\r\n","<div class=\"dropzone dropzone-container\" [ngClass]=\"{ 'dropzone-disabled': dropzoneDisabled() }\"\r\n  [dropzone]=\"dropzoneConfig()\" [disabled]=\"dropzoneDisabled()\" (error)=\"onUploadError($event)\"\r\n  (success)=\"onUploadSuccess($event)\" (addedFile)=\"onAddedFile($event)\" (drop)=\"onDrop($event)\">\r\n  <ng-container #fieldComponent></ng-container>\r\n</div>","import { NgZone } from '@angular/core';\r\nimport { EavWindow } from '../../../shared/models/eav-window.model';\r\nimport { ElementEventListener } from '../../shared/controls/element-event-listener.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport class DropzoneDraggingHelper {\r\n  private eventListeners: ElementEventListener[] = [];\r\n\r\n  constructor(private zone: NgZone) { }\r\n\r\n  /** Starts listening for dragover and drop events on a given element */\r\n  attach(htmlEl: HTMLElement) {\r\n    this.zone.runOutsideAngular(() => {\r\n      htmlEl.addEventListener('dragover', dragoverListener, { passive: true });\r\n      htmlEl.addEventListener('drop', dropListener, { passive: true });\r\n\r\n      this.eventListeners.push(\r\n        { element: htmlEl, type: 'dragover', listener: dragoverListener },\r\n        { element: htmlEl, type: 'drop', listener: dropListener },\r\n      );\r\n\r\n      function dragoverListener() {\r\n        clearTimeouts(window.windowBodyTimeouts); // clear timeouts from global array of timeouts which clear draggingClass from body\r\n        document.body.classList.add(window.draggingClass);\r\n      }\r\n      function dropListener() {\r\n        document.body.classList.remove(window.draggingClass);\r\n      }\r\n      function clearTimeouts(timeoutsArray: number[]) {\r\n        for (const timeout of timeoutsArray)\r\n          clearTimeout(timeout);\r\n        timeoutsArray.splice(0, timeoutsArray.length);\r\n      }\r\n    });\r\n  }\r\n\r\n  /** Removes event listeners from registered elements */\r\n  detach() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.eventListeners.forEach(({ element, type, listener }) => element.removeEventListener(type, listener));\r\n    });\r\n  }\r\n}\r\n","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\r\n\r\nexport const ContentExpandAnimation = [\r\n  trigger('itemShrinkAnimation', [\r\n    state(\r\n      'open',\r\n      style({\r\n        height: '30vh',\r\n      }),\r\n    ),\r\n    state(\r\n      'closed',\r\n      style({\r\n        height: '0vh',\r\n      }),\r\n    ),\r\n    transition('open => closed', [animate('300ms cubic-bezier(0.4, 0.0, 0.2, 1)')]),\r\n  ]),\r\n  trigger('contentExpandAnimation', [\r\n    state(\r\n      'closed',\r\n      style({\r\n        height: '0',\r\n      }),\r\n    ),\r\n    state(\r\n      'expanded',\r\n      style({\r\n        height: 'calc(100vh - {{bottomPixels}})', // 100px on desktop, 50px on mobile\r\n        maxHeight: 'calc(100vh - {{bottomPixels}})',\r\n      }),\r\n      { params: { bottomPixels: window.innerWidth > 600 ? '100px' : '50px' } },\r\n    ),\r\n    transition(\r\n      'closed => expanded',\r\n      [\r\n        animate(\r\n          '300ms cubic-bezier(0.4, 0.0, 0.2, 1)',\r\n          keyframes([\r\n            style({ height: '0vh', overflow: 'hidden' }),\r\n            style({ height: 'calc(100vh - {{bottomPixels}})', overflow: 'hidden' }),\r\n          ]),\r\n        ),\r\n      ],\r\n      { params: { bottomPixels: window.innerWidth > 600 ? '100px' : '50px' } },\r\n    ),\r\n  ]),\r\n];\r\n","import { Directive, ElementRef, input, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\n// tslint:disable-next-line:directive-selector\r\n@Directive({\r\n  selector: '[extended-fab-speed-dial-action]',\r\n})\r\nexport class ExtendedFabSpeedDialActionDirective implements OnChanges {\r\n  disabled = input<boolean>(false);\r\n\r\n  constructor(private elementRef: ElementRef<HTMLElement>) { }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.disabled != null) {\r\n      this.elementRef.nativeElement.toggleAttribute('disabled', this.disabled());\r\n    }\r\n  }\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n// tslint:disable-next-line:directive-selector\r\n@Directive({\r\n  selector: '[extendedFabSpeedDialActionsContent]',\r\n})\r\nexport class ExtendedFabSpeedDialActionsContentDirective {\r\n  constructor(public templateRef: TemplateRef<unknown>) { }\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n// tslint:disable-next-line:directive-selector\r\n@Directive({\r\n  selector: '[extendedFabSpeedDialTriggerContent]',\r\n})\r\nexport class ExtendedFabSpeedDialTriggerContentDirective {\r\n  constructor(public templateRef: TemplateRef<unknown>) { }\r\n}\r\n","// tslint:disable-next-line:max-line-length\r\nimport { NgTemplateOutlet } from '@angular/common';\r\nimport { AfterContentInit, Component, ContentChild, ContentChildren, ElementRef, input, OnDestroy, QueryList, ViewEncapsulation } from '@angular/core';\r\nimport { BehaviorSubject, combineLatest, distinctUntilChanged, startWith } from 'rxjs';\r\nimport { BaseComponent } from '../../components/base.component';\r\nimport { ExtendedFabSpeedDialActionDirective } from './extended-fab-speed-dial-action.directive';\r\nimport { ExtendedFabSpeedDialActionsContentDirective } from './extended-fab-speed-dial-actions-content.directive';\r\nimport { ExtendedFabSpeedDialTriggerContentDirective } from './extended-fab-speed-dial-trigger-content.directive';\r\n\r\n/**\r\n * Special Speed-Dial kind of FAB which opens more menu items on hover.\r\n *\r\n * IMPORTANT: to work it needs ca. 4 more directives.\r\n * So never import this component directly, but instead import the ExtendedFabSpeedDialImports.\r\n */\r\n@Component({\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'extended-fab-speed-dial',\r\n    templateUrl: './extended-fab-speed-dial.component.html',\r\n    styleUrls: ['./extended-fab-speed-dial.component.scss'],\r\n    encapsulation: ViewEncapsulation.None,\r\n    imports: [\r\n        NgTemplateOutlet\r\n    ]\r\n})\r\nexport class ExtendedFabSpeedDialComponent extends BaseComponent implements AfterContentInit, OnDestroy {\r\n  @ContentChild(ExtendedFabSpeedDialTriggerContentDirective) trigger: ExtendedFabSpeedDialTriggerContentDirective;\r\n  @ContentChild(ExtendedFabSpeedDialActionsContentDirective) actions: ExtendedFabSpeedDialActionsContentDirective;\r\n  @ContentChildren(ExtendedFabSpeedDialActionDirective, { read: ElementRef }) actionButtons: QueryList<ElementRef<HTMLButtonElement>>;\r\n\r\n  disabled = input<boolean>(false);\r\n\r\n  open$ = new BehaviorSubject(false);\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  ngAfterContentInit(): void {\r\n    this.subscriptions.add(\r\n      combineLatest([\r\n        this.open$.pipe(distinctUntilChanged()),\r\n        this.actionButtons.changes.pipe(startWith(undefined)),\r\n      ]).subscribe(([open]) => {\r\n        this.actionButtons.forEach((btn, i, all) => {\r\n          const min = 0.3;\r\n          const max = Math.min(min + (all.length - 1) * 0.05, 0.6);\r\n          const step = (max - min) / (all.length - 1);\r\n          const transitionDuration = `${open ? min + step * i : max - step * i}s`;\r\n          if (btn.nativeElement.style.transitionDuration !== transitionDuration) {\r\n            btn.nativeElement.style.transitionDuration = transitionDuration;\r\n          }\r\n        });\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.open$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  setOpen(event: PointerEvent, open: boolean): void {\r\n    if (event.pointerType === 'touch') return;\r\n    this.open$.next(open);\r\n  }\r\n}\r\n","<div class=\"extended-fab-speed-dial\" [attr.disabled]=\"disabled() || null\" (pointerenter)=\"setOpen($event, true)\"\r\n  (pointerleave)=\"setOpen($event, false)\">\r\n  <div class=\"extended-fab-speed-dial-trigger\">\r\n    <ng-container [ngTemplateOutlet]=\"trigger?.templateRef\"></ng-container>\r\n  </div>\r\n  <div class=\"extended-fab-speed-dial-actions\">\r\n    <ng-container [ngTemplateOutlet]=\"actions?.templateRef\"></ng-container>\r\n  </div>\r\n</div>\r\n","import { Directive, ElementRef, input, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\n// tslint:disable-next-line:directive-selector\r\n@Directive({\r\n  selector: '[extended-fab-speed-dial-trigger]',\r\n})\r\nexport class ExtendedFabSpeedDialTriggerDirective implements OnChanges {\r\n  disabled = input<boolean>(false);\r\n\r\n  constructor(private elementRef: ElementRef<HTMLElement>) { }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.disabled != null) {\r\n      this.elementRef.nativeElement.toggleAttribute('disabled', this.disabled());\r\n    }\r\n  }\r\n}\r\n","<div [ngClass]=\"open() ? 'c-ew__container' : 'u-display-none'\">\r\n  <div #backdrop class=\"c-ew__backdrop\" (click)=\"closeDialog()\"></div>\r\n  <div #dialog class=\"c-ew__dialog mat-elevation-z24 u-border-radius\">\r\n    <div [ngClass]=\"{ 'c-ew__dialog-header mat-elevation-z2': open() }\">\r\n      <mat-card appearance=\"raised\" class=\"mat-elevation-z0\">\r\n        <button mat-icon-button class=\"back-arrow\" tippyTranslate=\"Form.Buttons.Return.Tip\" (click)=\"closeDialog()\">\r\n          <mat-icon>arrow_back</mat-icon>\r\n        </button>\r\n        <span class=\"title mat-headline-4\">{{ basics().label }}</span>\r\n      </mat-card>\r\n    </div>\r\n    <div>\r\n      <div [@itemShrinkAnimation]=\"open() ? 'closed' : 'open'\"></div>\r\n      <div\r\n        [class]=\"\r\n          'c-ew__dialog-content u-border-radius-bottom u-add-scrollbar u-hide-scrollbar' +\r\n          (applyEmptyClass() ? ' c-ew__dialog-content--empty' : '')\r\n        \"\r\n        [@contentExpandAnimation]=\"{\r\n          value: open() ? 'expanded' : 'closed',\r\n          params: { bottomPixels: calculateBottomPixels() },\r\n        }\"\r\n      >\r\n        <!-- This is where the content comes from the parent / calling HTML -->\r\n        <ng-content></ng-content>\r\n\r\n        <extended-fab-speed-dial class=\"adam\">\r\n          <ng-template extendedFabSpeedDialTriggerContent>\r\n            <button extended-fab-speed-dial-trigger\r\n              matRipple\r\n              (click)=\"closeDialog()\"\r\n            >\r\n              <mat-icon>done</mat-icon>\r\n              <span>{{ 'Form.Buttons.Return.Tip' | translate }}</span>\r\n            </button>\r\n          </ng-template>\r\n          <ng-template extendedFabSpeedDialActionsContent>\r\n            <button\r\n              extended-fab-speed-dial-action\r\n              matRipple\r\n              [ngClass]=\"{ 'appear-disabled': saveDisabled() }\"\r\n              (click)=\"saveAll(false)\"\r\n            >\r\n              <span>{{ 'Form.Buttons.Save' | translate }}</span>\r\n              <mat-icon>save</mat-icon>\r\n            </button>\r\n            <button\r\n              extended-fab-speed-dial-action\r\n              matRipple\r\n              [ngClass]=\"{ 'appear-disabled': saveDisabled() }\"\r\n              (click)=\"saveAll(true)\"\r\n            >\r\n              <span>{{ 'Form.Buttons.SaveAndClose' | translate }}</span>\r\n              <mat-icon>done_all</mat-icon>\r\n            </button>\r\n          </ng-template>\r\n        </extended-fab-speed-dial>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { CommonModule, NgClass } from '@angular/common';\r\nimport { Component, computed, ElementRef, inject, input, NgZone, ViewChild } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { transient } from 'projects/core';\r\nimport { computedObj } from 'projects/eav-ui/src/app/shared/signals/signal.utilities';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { ExtendedFabSpeedDialImports } from '../../../../shared/modules/extended-fab-speed-dial/extended-fab-speed-dial.imports';\r\nimport { EntityFormStateService } from '../../../entity-form/entity-form-state.service';\r\nimport { FormsStateService } from '../../../form/forms-state.service';\r\nimport { EditRoutingService } from '../../../routing/edit-routing.service';\r\nimport { FieldState } from '../../field-state';\r\nimport { DropzoneDraggingHelper } from '../dropzone-dragging.helper';\r\nimport { ContentExpandAnimation } from '../expand-dialog/content-expand.animation';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.DialogPopup,\r\n    templateUrl: './dialog-popup.component.html',\r\n    styleUrls: ['./dialog-popup.component.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        NgClass,\r\n        MatCardModule,\r\n        MatRippleModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        TranslateModule,\r\n        ...ExtendedFabSpeedDialImports,\r\n        TippyDirective,\r\n        CommonModule,\r\n    ]\r\n})\r\n// tslint:disable-next-line:max-line-length\r\nexport class DialogPopupComponent {\r\n  @ViewChild('backdrop') private backdropRef: ElementRef;\r\n  @ViewChild('dialog') private dialogRef: ElementRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n\r\n  public config = this.fieldState.config;\r\n  public basics = this.fieldState.basics;\r\n  #editRoutingService = inject(EditRoutingService);\r\n  formsStateService = inject(FormsStateService);\r\n  private featuresService = inject(FeaturesService);\r\n\r\n  applyEmptyClass = input<boolean>();\r\n\r\n  #dropzoneDraggingHelper: DropzoneDraggingHelper;\r\n\r\n  #entityFormStateService = transient(EntityFormStateService);\r\n  \r\n  constructor(\r\n    private zone: NgZone,\r\n  ) { }\r\n  \r\n  saveDisabled = computedObj('saveDisabled', () => this.#entityFormStateService.isSaving() || this.formsStateService.saveButtonDisabled());\r\n\r\n  open = this.fieldState.isOpen\r\n\r\n  ngAfterViewInit() {\r\n    this.#dropzoneDraggingHelper = new DropzoneDraggingHelper(this.zone);\r\n    this.#dropzoneDraggingHelper.attach(this.backdropRef.nativeElement);\r\n    this.#dropzoneDraggingHelper.attach(this.dialogRef.nativeElement);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#dropzoneDraggingHelper.detach();\r\n  }\r\n\r\n  #hideAdamSponsor = this.featuresService.isEnabled[FeatureNames.NoSponsoredByToSic];\r\n  adamSponsorI18nKey = computed(() => this.#hideAdamSponsor()\r\n    ? 'Fields.Hyperlink.AdamFileManager.Name'\r\n    : 'Fields.Hyperlink.Default.Sponsor'\r\n  );\r\n\r\n  calculateBottomPixels() {\r\n    return window.innerWidth > 600 ? '100px' : '50px';\r\n  }\r\n\r\n  closeDialog() {\r\n    this.#editRoutingService.expand(false, this.config.index, this.config.entityGuid);\r\n  }\r\n\r\n  saveAll(close: boolean) {\r\n    this.formsStateService.triggerSave(close);\r\n  }\r\n}\r\n","import { CommonModule } from \"@angular/common\";\r\nimport { AfterViewInit, ChangeDetectorRef, Component, computed, ElementRef, inject, NgZone, OnDestroy, signal, ViewChild, ViewContainerRef } from \"@angular/core\";\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { vh } from '../../../../shared/helpers/viewport.helpers';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FormsStateService } from \"../../../form/forms-state.service\";\r\nimport { ConnectorHelper } from \"../../connector/connector.helper\";\r\nimport { FieldState } from \"../../field-state\";\r\nimport { FieldHelperTextComponent } from \"../../help-text/field-help-text.component\";\r\nimport { DialogPopupComponent } from \"../dialog-popup/dialog-popup.component\";\r\nimport { DropzoneDraggingHelper } from \"../dropzone-dragging.helper\";\r\nimport { WrappersCatalog } from \"../wrappers.constants\";\r\nimport { ContentExpandAnimation } from \"./content-expand.animation\";\r\nimport { PreviewHeight } from \"./expandable-wrapper.models\";\r\n\r\n@Component({\r\n    selector: WrappersCatalog.ExpandableWrapper,\r\n    templateUrl: './expandable-wrapper.component.html',\r\n    styleUrls: ['./expandable-wrapper.component.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        FieldHelperTextComponent,\r\n        DialogPopupComponent,\r\n        CommonModule,\r\n        DialogPopupComponent,\r\n        FieldHelperTextComponent\r\n    ]\r\n})\r\nexport class ExpandableWrapperComponent implements AfterViewInit, OnDestroy {\r\n  \r\n  log = classLog({ExpandableWrapperComponent});\r\n\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  /** Child tag which will contain the inner html */\r\n  @ViewChild('previewContainer') private previewContainerRef: ElementRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  public config = this.fieldState.config;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected settings = this.fieldState.settings;\r\n  protected ui = this.fieldState.ui;\r\n  protected uiValue = this.fieldState.uiValue;\r\n\r\n  focused = signal(false);\r\n\r\n  adamDisabled = this.config.adam.isDisabled;\r\n\r\n  previewHeight = computed(() => {\r\n    const settings = this.settings();\r\n    const previewHeight: PreviewHeight = {\r\n      minHeight: '36px',\r\n      maxHeight: '50vh',\r\n    };\r\n\r\n    if (this.config.inputTypeSpecs.inputType !== InputTypeCatalog.StringWysiwyg && settings.Dialog !== 'inline')\r\n      return previewHeight;\r\n\r\n    let rows = parseInt(settings.InlineInitialHeight, 10);\r\n    if (rows < 1)\r\n      rows = 1;\r\n\r\n    // header + rows\r\n    const maxHeightInPx = vh(50);\r\n    let minHeight = 40 + rows * 36;\r\n\r\n    if (minHeight > maxHeightInPx)\r\n      minHeight = maxHeightInPx;\r\n\r\n    previewHeight.minHeight = `${minHeight}px`;\r\n\r\n    return previewHeight;\r\n  })\r\n\r\n  private connectorCreator = transient(ConnectorHelper);\r\n  private dropzoneDraggingHelper: DropzoneDraggingHelper;\r\n\r\n  constructor(\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private zone: NgZone,\r\n    public formsStateService: FormsStateService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.config.focused$.subscribe(this.focused.set);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const l = this.log.fn('ngAfterViewInit');\r\n\r\n    const componentTagName = this.config.inputTypeSpecs.componentTagName;\r\n    l.a('ExpandableWrapper created for:', { componentTagName });\r\n    this.connectorCreator.init(\r\n      componentTagName,\r\n      this.previewContainerRef,\r\n      this.viewContainerRef,\r\n      this.changeDetectorRef,\r\n    );\r\n\r\n    this.dropzoneDraggingHelper = new DropzoneDraggingHelper(this.zone);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.log.fn('ngOnDestroy', null, 'destroying ExpandableWrapper');\r\n    this.dropzoneDraggingHelper.detach();\r\n  }\r\n}\r\n","export function vh(percentage: number) {\r\n  const viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n  return (percentage * viewportHeight) / 100;\r\n}\r\n\r\nexport function vw(percentage: number) {\r\n  const viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\r\n  return (percentage * viewportWidth) / 100;\r\n}\r\n","<app-dialog-popup>\r\n  <ng-container #fieldComponent></ng-container>\r\n</app-dialog-popup>\r\n<div class=\"c-ew__preview-holder\">\r\n  <mat-label class=\"c-ew__preview-label\" [ngClass]=\"{\r\n      'mat-caption' : uiValue(),\r\n      'mat-empty' : !uiValue(),\r\n      'mat-error' : ui().invalid && (ui().touched || ui().dirty) && !ui().disabled,\r\n      'color__primary' : !(ui().touchedAndInvalid) && !ui().disabled,\r\n      'my-label-disabled' : ui().disabled,\r\n      'c-ew__preview-label--focused': focused()\r\n      }\">\r\n    {{basics().labelWithRequired}}\r\n  </mat-label>\r\n  <div class=\"c-ew__preview\" [ngClass]=\"{\r\n      'c-ew__preview--invalid' : ui().invalid && (ui().touched || ui().dirty),\r\n      'c-ew__preview--disabled': ui().disabled,\r\n      'c-ew__preview--focused': focused()\r\n      }\">\r\n    <div class=\"c-ew__preview-container\">\r\n      <div #previewContainer class=\"c-ew__preview-content u-hide-scrollbar\" [ngClass]=\"{\r\n          'c-ew__preview-content--disabled': ui().disabled\r\n          }\" [ngStyle]=\"{\r\n          'min-height': previewHeight().minHeight,\r\n          'max-height': previewHeight().maxHeight\r\n          }\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <app-field-helper-text></app-field-helper-text>\r\n</div>\r\n","<!-- <pre>Wrapper.FeatureWarning Start - rEQ1: '{{ requiredFeatures()[0] }}'</pre> -->\r\n<div [ngClass]=\"{ mark: requiredFeatures().length }\">\r\n  <ng-container #fieldComponent></ng-container>\r\n  <!-- 2dm: for now, don't show the required features on the field, as we have it in the entire form -->\r\n  @if (false && requiredFeatures().length > 0) {\r\n    <div class=\"feature-warning\">\r\n      This uses features which are not licensed:\r\n      @for (feature of requiredFeatures(); track feature) {\r\n        {{ feature }}\r\n        <app-feature-icon [featureNameId]=\"feature\"></app-feature-icon>\r\n      }\r\n    </div>\r\n  }\r\n</div>\r\n<!-- <pre>Wrapper.FeatureWarning End</pre> -->\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, inject, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { FeatureIconComponent } from '../../../../features/feature-icon/feature-icon.component';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { computedObj } from '../../../../shared/signals/signal.utilities';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.FeatureWarningWrapper,\r\n    templateUrl: './feature-warning-wrapper.component.html',\r\n    styleUrls: ['./feature-warning-wrapper.component.scss'],\r\n    imports: [\r\n        NgClass,\r\n        FeatureIconComponent,\r\n    ]\r\n})\r\nexport class FeatureWarningWrapperComponent {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  #fieldState = inject(FieldState);\r\n\r\n  #features = inject(FeaturesService);\r\n\r\n  constructor() { }\r\n\r\n  requiredFeatures = computedObj('requiredFeatures', () => {\r\n    const req = this.#fieldState.requiredFeatures();\r\n    if (req.length === 0) return req;\r\n    // Check if feature is allowed to be used - NOT if it's enabled\r\n    return req.filter(f => !this.#features.allowUse[f]());\r\n  });\r\n\r\n  protected basics = this.#fieldState.basics;\r\n}\r\n","import { EmptyDefault } from 'projects/edit-types/src/FieldSettings-EmptyDefault';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from '../../logic/field-logic-base';\r\n\r\nexport class EmptyDefaultLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.EmptyDefault;\r\n\r\n  constructor() { super({ EmptyDefaultLogic }); }\r\n\r\n  update({ settings }: FieldLogicUpdate): FieldSettings {\r\n    const fixedSettings = { ...settings } as FieldSettings & EmptyDefault;\r\n    fixedSettings.Visible ??= true;\r\n    fixedSettings.Collapsed ??= false;\r\n    fixedSettings.Notes ??= '';\r\n    return fixedSettings;\r\n  }\r\n}\r\n\r\nFieldLogicBase.add(EmptyDefaultLogic);\r\n","<mat-card appearance=\"raised\" class=\"eav-card-group-child shadow-bottom-z-1\" [ngClass]=\"{ 'force-hide': basics().visible === false }\">\r\n\r\n  <!-- The title bar with ^v buttons to toggle state -->\r\n  <div class=\"eav-card-header-group-child\" (click)=\"toggleCollapse()\">\r\n    <div class=\"my-title-bar eav-card-title-group mat-body-2\">\r\n      <mat-icon class=\"title-arrow\">{{ collapsed() ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}\r\n      </mat-icon>\r\n      <span class=\"title\">\r\n        {{ basics().label || config.fieldName }}\r\n      </span>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- The notes and all inner components -->\r\n  <mat-card-content class=\"eav-card-content-group-child\" [style.display]=\"collapsed() ? 'none' : 'block'\">\r\n    <div class=\"eav-layout-grid\">\r\n      <div class=\"eav-layout-grid__inner\">\r\n        <!-- Notes -->\r\n        @if (basics().notes; as note) {\r\n          <div class=\"eav-layout-grid__cell--span-12 mat-body-2\" align=\"start\">\r\n            <div class=\"description\" appChangeAnchorTarget [innerHtml]=\"note | safeHtml\"></div>\r\n          </div>\r\n        }\r\n        <!-- Components inside this -->\r\n        <div class=\"eav-layout-grid__cell--span-12\">\r\n          <ng-container #fieldComponent></ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </mat-card-content>\r\n</mat-card>","import { NgClass } from '@angular/common';\r\nimport { Component, ViewChild, ViewContainerRef, inject } from '@angular/core';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { EmptyDefault } from 'projects/edit-types/src/FieldSettings-EmptyDefault';\r\nimport { FieldSettings } from '../../../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { SafeHtmlPipe } from '../../../../shared/pipes/safe-html.pipe';\r\nimport { FieldsSettingsService } from '../../../state/fields-settings.service';\r\nimport { ChangeAnchorTargetDirective } from '../../directives/change-anchor-target.directive';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\nimport { EmptyDefaultLogic } from './collapsible-wrapper-logic';\r\n\r\n\r\n@Component({\r\n    selector: WrappersCatalog.CollapsibleWrapper,\r\n    templateUrl: './collapsible-wrapper.component.html',\r\n    styleUrls: ['./collapsible-wrapper.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        ChangeAnchorTargetDirective,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class CollapsibleWrapperComponent {\r\n\r\n  log = classLog({CollapsibleWrapperComponent});\r\n\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  #fieldState = inject(FieldState);\r\n  protected config = this.#fieldState.config;\r\n  protected group = this.#fieldState.group;\r\n  protected basics = this.#fieldState.basics;\r\n\r\n  /** Collapsed state - will be updated in various scenarios */\r\n  collapsed= this.#fieldState.settingExt('Collapsed');\r\n\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n\r\n  constructor() {\r\n    EmptyDefaultLogic.importMe();\r\n  }\r\n\r\n  toggleCollapse(): void {\r\n    const before = this.collapsed();\r\n    this.log.a('toggleCollapse', { before })\r\n    this.#fieldsSettingsSvc.updateSetting<FieldSettings & EmptyDefault>(this.#fieldState.name, { Collapsed: !before }, \"CollapsibleWrapperComponent\");\r\n  }\r\n}\r\n","import { Component, inject, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { FieldState } from '../../field-state';\r\nimport { WrappersCatalog } from '../wrappers.constants';\r\n\r\n@Component({\r\n    selector: WrappersCatalog.HiddenWrapper,\r\n    templateUrl: './hidden-wrapper.component.html',\r\n    imports: []\r\n})\r\nexport class HiddenWrapperComponent {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected basics = this.fieldState.basics;\r\n\r\n  constructor() { }\r\n}\r\n","<!-- <pre>Wrapper.Hidden Start - VisibleAndEnabled: '{{ basics().visibleAndEnabled }}'</pre> -->\r\n<div [hidden]=\"!basics().visible\">\r\n  <ng-container #fieldComponent></ng-container>\r\n</div>\r\n<!-- <pre>Wrapper.Hidden End</pre> -->\r\n","<app-dialog-popup>\r\n  <ng-container #fieldComponent></ng-container>\r\n</app-dialog-popup>\r\n\r\n<!-- preview -->\r\n@if (preview(); as preV) {\r\n  <div class=\"c-hyperlink-default-field-preview\">\r\n    <div\r\n      class=\"c-ew__preview c-ew__preview--hyperlink\"\r\n      [ngClass]=\"{\r\n        'c-ew__preview--disabled': ui().disabled,\r\n        'c-ew__preview--last-in-group': config.isLastInGroup,\r\n      }\"\r\n    >\r\n      <!-- image / icon -->\r\n      <div\r\n        class=\"thumbnail-before-input\"\r\n        tippyTranslate=\"Fields.Hyperlink.Default.Fullscreen\"\r\n        [tippyDisabled]=\"ui().disabled\"\r\n        [ngClass]=\"{\r\n          'icon-before-input': uiValue() && !preV.isImage,\r\n          'thumbnail-before-input--disabled': ui().disabled,\r\n        }\"\r\n        [ngStyle]=\"{ 'background-image': uiValue() && preV.isImage ? preV.thumbnailUrl : '' }\"\r\n        (click)=\"expandDialog()\"\r\n      >\r\n        @if (uiValue() && !preV.isImage) {\r\n          <mat-icon [tippy]=\"preV.url\" tippyPlacement=\"right\" [svgIcon]=\"preV.icon\"></mat-icon>\r\n        }\r\n      </div>\r\n      <!-- field -->\r\n      <div class=\"c-ew__preview-field--short\">\r\n        <!-- input -->\r\n        <div class=\"hyperlink-input-link-wrapper\">\r\n          <mat-form-field\r\n            color=\"accent\"\r\n            class=\"eav-mat-form-field\"\r\n            [ngClass]=\"{\r\n              'mat-form-field-invalid': ui().touchedAndInvalid,\r\n            }\"\r\n          >\r\n            <input\r\n              matInput\r\n              class=\"eav-translate-on-dblclick\"\r\n              tippyTranslate=\"Fields.Hyperlink.Default.Tooltip\"\r\n              tippyPlacement=\"top\"\r\n              [placeholder]=\"basics().placeholder\"\r\n              (change)=\"setValue($event)\"\r\n              [disabled]=\"ui().disabled\"\r\n              (blur)=\"markAsTouched()\"\r\n              [value]=\"uiValue()\"\r\n              (keyup)=\"setValue($event)\"\r\n              appPasteClipboardImage\r\n              [config]=\"config\"\r\n              [elementType]=\"'input'\"\r\n            />\r\n            @if (buttonAdam() || buttonPage()) {\r\n              <div matTextSuffix class=\"c-ew__preview-suffix\">\r\n                <div\r\n                  class=\"c-ew__preview-suffix-text\"\r\n                  fxHide\r\n                  fxShow.gt-xs\r\n                  [ngClass]=\"{\r\n                    'c-ew__preview-suffix-text--disabled': ui().disabled,\r\n                  }\"\r\n                >\r\n                  {{ buttonAdam() ? ('Fields.Hyperlink.AdamFileManager.Hint' | translate) : '' }}\r\n                </div>\r\n                <!-- Open Dialog -->\r\n                @if (buttonAdam()) {\r\n                  <button\r\n                    mat-icon-button\r\n                    class=\"c-ew__preview-suffix-icon\"\r\n                    tippyTranslate=\"Fields.Hyperlink.Default.Fullscreen\"\r\n                    appClickStopPropagation\r\n                    [disabled]=\"ui().disabled\"\r\n                    (click)=\"expandDialog()\"\r\n                  >\r\n                    <mat-icon svgIcon=\"apple-outlined\"></mat-icon>\r\n                  </button>\r\n                }\r\n                <button\r\n                  mat-icon-button\r\n                  class=\"c-ew__preview-suffix-icon\"\r\n                  appClickStopPropagation\r\n                  [disabled]=\"!adamItem()?._imageConfigurationContentType\"\r\n                  [ngClass]=\"{ 'metadata-exists': adamItem()?._imageConfigurationId > 0 }\"\r\n                  tippyTranslate=\"Fields.Hyperlink.AdamFileManager.ImageSettings\"\r\n                  (click)=\"openImageConfiguration(adamItem())\"\r\n                >\r\n                  <mat-icon\r\n                    [tippyTranslate]=\"\r\n                      enableImageConfiguration()\r\n                        ? 'Fields.Hyperlink.AdamFileManager.ImageSettingsUnavailable'\r\n                        : 'Fields.Hyperlink.AdamFileManager.ImageSettingsDisabled'\r\n                    \"\r\n                    [tippyDisabled]=\"adamItem()?._imageConfigurationContentType\"\r\n                    >filter_center_focus</mat-icon\r\n                  >\r\n                </button>\r\n                @if (buttonPage()) {\r\n                  <button\r\n                    mat-icon-button\r\n                    class=\"c-ew__preview-suffix-icon\"\r\n                    tippyTranslate=\"Fields.Hyperlink.Default.PageTip\"\r\n                    appClickStopPropagation\r\n                    [disabled]=\"ui().disabled\"\r\n                    (click)=\"openPagePicker()\"\r\n                  >\r\n                    <mat-icon svgIcon=\"sitemap\"></mat-icon>\r\n                  </button>\r\n                }\r\n              </div>\r\n            }\r\n            <mat-label [ngClass]=\"{ 'mat-error': ui().touchedAndInvalid }\">\r\n              {{ basics().labelWithRequired }}\r\n            </mat-label>\r\n          </mat-form-field>\r\n          <!-- link absolutely positioned above input -->\r\n          @if (preV.floatingText) {\r\n            <div class=\"hyperlink-floating\" fxHide fxShow.gt-xs>\r\n              <div class=\"hyperlink-floating__value\">{{ uiValue() }}</div>\r\n              <div class=\"hyperlink-floating__url-box\">\r\n                <a [href]=\"preV.url\" target=\"_blank\" tabindex=\"-1\" class=\"hyperlink-floating__url\" [tippy]=\"preV.url\">\r\n                  <span>{{ preV.floatingText }}</span>\r\n                </a>\r\n              </div>\r\n            </div>\r\n          }\r\n        </div>\r\n        <!-- helper text and adam text -->\r\n        <div class=\"c__helper-wrapper\">\r\n          <app-field-helper-text class=\"c__helper-wrapper--left\" [hyperlinkDefaultWrapperFix]=\"true\"> </app-field-helper-text>\r\n          @if (buttonAdam()) {\r\n            <div class=\"c-ew__preview-field-hint c__helper-wrapper--right\">\r\n              <span>{{ adamSponsorI18nKey() | translate }}</span>\r\n              <app-feature-icon-text [featureNameId]=\"'NoSponsoredByToSic'\"></app-feature-icon-text>\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n}\r\n","import { CommonModule, NgClass, NgStyle } from \"@angular/common\";\r\nimport { AfterViewInit, ChangeDetectorRef, Component, computed, inject, NgZone, OnDestroy, ViewChild, ViewContainerRef } from \"@angular/core\";\r\nimport { MatButtonModule } from \"@angular/material/button\";\r\nimport { MatDialog } from \"@angular/material/dialog\";\r\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\r\nimport { MatIconModule } from \"@angular/material/icon\";\r\nimport { MatInputModule } from \"@angular/material/input\";\r\nimport { TranslateModule } from \"@ngx-translate/core\";\r\nimport { FeatureIconTextComponent } from '../../../../features/feature-icon-text/feature-icon-text.component';\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { SignalEquals } from '../../../../shared/signals/signal-equals';\r\nimport { FormConfigService } from \"../../../form/form-config.service\";\r\nimport { FormsStateService } from \"../../../form/forms-state.service\";\r\nimport { EditRoutingService } from \"../../../routing/edit-routing.service\";\r\nimport { LinkCacheService } from \"../../../shared/adam/link-cache.service\";\r\nimport { HyperlinkDefaultBaseComponent } from \"../../basic/hyperlink-default/hyperlink-default-base.component\";\r\nimport { PasteClipboardImageDirective } from \"../../directives/paste-clipboard-image.directive\";\r\nimport { FieldState } from \"../../field-state\";\r\nimport { FieldHelperTextComponent } from \"../../help-text/field-help-text.component\";\r\nimport { DialogPopupComponent } from \"../dialog-popup/dialog-popup.component\";\r\nimport { DropzoneDraggingHelper } from \"../dropzone-dragging.helper\";\r\nimport { ContentExpandAnimation } from \"../expand-dialog/content-expand.animation\";\r\nimport { WrappersCatalog } from \"../wrappers.constants\";\r\nimport { TippyDirective } from './../../../../shared/directives/tippy.directive';\r\n\r\n\r\n@Component({\r\n    selector: WrappersCatalog.HyperlinkDefaultExpandableWrapper,\r\n    templateUrl: './hyperlink-default-expandable-wrapper.component.html',\r\n    styleUrls: ['./hyperlink-default-expandable-wrapper.component.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        NgClass,\r\n        MatIconModule,\r\n        NgStyle,\r\n        TranslateModule,\r\n        TippyDirective,\r\n        DialogPopupComponent,\r\n        FieldHelperTextComponent,\r\n        FeatureIconTextComponent,\r\n        PasteClipboardImageDirective,\r\n        CommonModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n    ]\r\n})\r\n// tslint:disable-next-line:max-line-length\r\nexport class HyperlinkDefaultExpandableWrapperComponent extends HyperlinkDefaultBaseComponent implements AfterViewInit, OnDestroy {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  public config = this.fieldState.config;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected buttonAdam = computed(() => this.fieldState.settings().Buttons.includes('adam'), SignalEquals.bool);\r\n  protected buttonPage = computed(() => this.fieldState.settings().Buttons.includes('page'), SignalEquals.bool);\r\n  protected enableImageConfiguration= this.fieldState.settingExt('EnableImageConfiguration');\r\n\r\n  private dropzoneDraggingHelper: DropzoneDraggingHelper;\r\n  private editRoutingService: EditRoutingService;\r\n\r\n  constructor(\r\n    eavService: FormConfigService,\r\n    matDialog: MatDialog,\r\n    viewContainerRef: ViewContainerRef,\r\n    changeDetectorRef: ChangeDetectorRef,\r\n    linkCacheService: LinkCacheService,\r\n    editRoutingService: EditRoutingService,\r\n    private zone: NgZone,\r\n    public formsStateService: FormsStateService,\r\n    private featuresService: FeaturesService,\r\n  ) {\r\n    super(\r\n      eavService,\r\n      matDialog,\r\n      viewContainerRef,\r\n      changeDetectorRef,\r\n      linkCacheService,\r\n      formsStateService,\r\n    );\r\n    this.editRoutingService = editRoutingService;\r\n  }\r\n\r\n  #hideAdamSponsor = this.featuresService.isEnabled[FeatureNames.NoSponsoredByToSic];\r\n  adamSponsorI18nKey = computed(() => this.#hideAdamSponsor()\r\n    ? 'Fields.Hyperlink.AdamFileManager.Name'\r\n    : 'Fields.Hyperlink.Default.Sponsor'\r\n  );\r\n\r\n  ngAfterViewInit() {\r\n    this.dropzoneDraggingHelper = new DropzoneDraggingHelper(this.zone);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dropzoneDraggingHelper.detach();\r\n  }\r\n\r\n  markAsTouched() {\r\n    this.fieldState.ui().markTouched();\r\n  }\r\n\r\n  setValue(event: Event) {\r\n    const newValue = (event.target as HTMLInputElement).value;\r\n    this.fieldState.ui().setIfChanged(newValue);\r\n  }\r\n\r\n  expandDialog() {\r\n    if (this.fieldState.ui().disabled) return;\r\n    this.editRoutingService.expand(true, this.config.index, this.config.entityGuid);\r\n  }\r\n}\r\n","<app-dialog-popup [applyEmptyClass]=\"true\">\r\n  <ng-container #fieldComponent></ng-container>\r\n</app-dialog-popup>\r\n\r\n<!-- preview -->\r\n<div class=\"c-ew__preview-holder\">\r\n  <mat-label\r\n    class=\"c-ew__preview-label c-ew__color--primary\"\r\n    [ngClass]=\"{\r\n      'mat-caption': itemsNumber() > 0,\r\n      'mat-empty': itemsNumber() === 0,\r\n      'mat-error': ui().invalid && !config.initialDisabled,\r\n      color__primary: !ui().invalid && !config.initialDisabled,\r\n      'my-label-disabled': config.initialDisabled,\r\n    }\"\r\n  >\r\n    {{ basics().labelWithRequired }}\r\n  </mat-label>\r\n  <div\r\n    matRipple\r\n    class=\"c-ew__preview mat-ripple\"\r\n    [matRippleAnimation]=\"{ enterDuration: 360 }\"\r\n    (click)=\"expandDialog()\"\r\n    [ngClass]=\"{\r\n      'c-ew__preview--invalid': ui().invalid,\r\n      'c-ew__preview--disabled': config.initialDisabled,\r\n    }\"\r\n  >\r\n    <div [ngClass]=\"uiValue() ? 'c-ew__preview-container' : 'c-ew__preview-container--empty'\">\r\n      <div class=\"c-ew__preview-content\">\r\n        @for (item of items(); track trackByFn($index, item)) {\r\n          <!-- folders -->\r\n          @if (item.IsFolder) {\r\n            <div>\r\n              <div class=\"adam-browse-background-icon\">\r\n                <mat-icon svgIcon=\"folder\"></mat-icon>\r\n                <div class=\"adam-short-label mat-caption\">{{ item.Name }}</div>\r\n              </div>\r\n            </div>\r\n          }\r\n          <!-- files -->\r\n          @if (!item.IsFolder) {\r\n            <div>\r\n              @if (item.Type !== \"image\") {\r\n                <div class=\"adam-browse-background-icon\">\r\n                  @if (item._isMaterialIcon) {\r\n                    <mat-icon>{{ item._icon }}</mat-icon>\r\n                  }\r\n                  @if (!item._isMaterialIcon) {\r\n                    <mat-icon>{{ item._icon }}</mat-icon>\r\n                  }\r\n                  <div class=\"adam-short-label mat-caption\">{{ item.Name }}</div>\r\n                </div>\r\n              }\r\n              @if (item.Type === \"image\") {\r\n                <div class=\"adam-browse-background-image\">\r\n                  <img vm-dz-thumbnail=\"\" alt=\"{{ item.Id }}:{{ item.Name }}\" [src]=\"item.ThumbnailUrl\" />\r\n                </div>\r\n              }\r\n            </div>\r\n          }\r\n        }\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- hints -->\r\n  <div class=\"mat-caption c-ew__preview-hint\">\r\n    <div class=\"c__helper-wrapper--left\">\r\n      <app-field-helper-text></app-field-helper-text>\r\n    </div>\r\n    <div class=\"c__helper-wrapper--right c-ew__preview-hint-text\" fxHide fxShow.gt-xs>\r\n      <span>{{ adamSponsorI18nKey() | translate }} </span>\r\n      <app-feature-icon-text [featureNameId]=\"'NoSponsoredByToSic'\"></app-feature-icon-text>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { CommonModule } from \"@angular/common\";\r\nimport { AfterViewInit, Component, computed, inject, NgZone, OnDestroy, ViewChild, ViewContainerRef } from \"@angular/core\";\r\nimport { MatRippleModule } from \"@angular/material/core\";\r\nimport { MatIconModule } from \"@angular/material/icon\";\r\nimport { TranslateModule } from \"@ngx-translate/core\";\r\nimport { AdamItem } from '../../../../../../../edit-types/src/AdamItem';\r\nimport { FeatureIconTextComponent } from \"../../../../features/feature-icon-text/feature-icon-text.component\";\r\nimport { FeatureNames } from '../../../../features/feature-names';\r\nimport { FeaturesService } from '../../../../features/features.service';\r\nimport { SignalEquals } from '../../../../shared/signals/signal-equals';\r\nimport { FormsStateService } from \"../../../form/forms-state.service\";\r\nimport { EditRoutingService } from \"../../../routing/edit-routing.service\";\r\nimport { FieldState } from \"../../field-state\";\r\nimport { FieldHelperTextComponent } from \"../../help-text/field-help-text.component\";\r\nimport { DialogPopupComponent } from \"../dialog-popup/dialog-popup.component\";\r\nimport { DropzoneDraggingHelper } from \"../dropzone-dragging.helper\";\r\nimport { ContentExpandAnimation } from \"../expand-dialog/content-expand.animation\";\r\nimport { WrappersCatalog } from \"../wrappers.constants\";\r\n\r\n@Component({\r\n    selector: WrappersCatalog.HyperlinkLibraryExpandableWrapper,\r\n    templateUrl: './hyperlink-library-expandable-wrapper.component.html',\r\n    styleUrls: ['./hyperlink-library-expandable-wrapper.component.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        DialogPopupComponent,\r\n        MatIconModule,\r\n        MatRippleModule,\r\n        FieldHelperTextComponent,\r\n        FeatureIconTextComponent,\r\n        TranslateModule,\r\n        CommonModule,\r\n    ]\r\n})\r\n// tslint:disable-next-line:max-line-length\r\nexport class HyperlinkLibraryExpandableWrapperComponent implements AfterViewInit, OnDestroy {\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  protected config = this.fieldState.config;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  protected ui = this.fieldState.ui;\r\n  protected uiValue = this.fieldState.uiValue;\r\n\r\n  protected items = computed(() => this.config.adam.items().slice(0, 9));\r\n  protected itemsNumber = computed(() => this.config.adam.items().length, SignalEquals.number);\r\n\r\n  #hideAdamSponsor = this.featuresService.isEnabled[FeatureNames.NoSponsoredByToSic];\r\n  adamSponsorI18nKey = computed(() => this.#hideAdamSponsor()\r\n    ? 'Fields.Hyperlink.AdamFileManager.Name'\r\n    : 'Fields.Hyperlink.Default.Sponsor'\r\n  );\r\n\r\n  private dropzoneDraggingHelper: DropzoneDraggingHelper;\r\n\r\n  constructor(\r\n    private zone: NgZone,\r\n    private editRoutingService: EditRoutingService,\r\n    public formsStateService: FormsStateService,\r\n    private featuresService: FeaturesService,\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.dropzoneDraggingHelper = new DropzoneDraggingHelper(this.zone);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dropzoneDraggingHelper.detach();\r\n  }\r\n\r\n  trackByFn(index: number, item: AdamItem) {\r\n    return item.Id;\r\n  }\r\n\r\n  expandDialog() {\r\n    if (this.config.initialDisabled) return;\r\n    this.editRoutingService.expand(true, this.config.index, this.config.entityGuid);\r\n  }\r\n}","import { CommonModule } from \"@angular/common\";\r\nimport { Component, inject, ViewChild, ViewContainerRef } from \"@angular/core\";\r\nimport { MatCardModule } from \"@angular/material/card\";\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { FormsStateService } from \"../../../form/forms-state.service\";\r\nimport { FieldState } from \"../../field-state\";\r\nimport { DialogPopupComponent } from \"../dialog-popup/dialog-popup.component\";\r\nimport { ContentExpandAnimation } from \"../expand-dialog/content-expand.animation\";\r\nimport { WrappersCatalog } from \"../wrappers.constants\";\r\n\r\n\r\n@Component({\r\n    selector: WrappersCatalog.PickerExpandableWrapper,\r\n    templateUrl: './picker-expandable-wrapper.component.html',\r\n    styleUrls: ['./picker-expandable-wrapper.component.scss'],\r\n    animations: [ContentExpandAnimation],\r\n    imports: [\r\n        MatCardModule,\r\n        DialogPopupComponent,\r\n        DialogPopupComponent,\r\n        CommonModule,\r\n    ]\r\n})\r\nexport class PickerExpandableWrapperComponent {\r\n\r\n  log = classLog({ PickerExpandableWrapperComponent });\r\n\r\n  @ViewChild('fieldComponent', { static: true, read: ViewContainerRef }) fieldComponent: ViewContainerRef;\r\n  @ViewChild('previewComponent', { static: true, read: ViewContainerRef }) previewComponent: ViewContainerRef;\r\n\r\n  protected fieldState = inject(FieldState);\r\n  public config = this.fieldState.config;\r\n  protected basics = this.fieldState.basics;\r\n\r\n  constructor(\r\n    public formsStateService: FormsStateService,\r\n  ) { }\r\n}\r\n","<!--\r\n  Dialog part for large picker\r\n  Should only show when dialogIsOpen() is true.\r\n  It must be part of the DOM already (so no @if) as it is used in the code.\r\n-->\r\n<app-dialog-popup>\r\n  <div class=\"eav-layout-grid\">\r\n    <div class=\"eav-layout-grid__inner\">\r\n      <mat-card class=\"eav-card eav-layout-grid__cell--span-12 u-border-radius shadow-bottom-z-1\">\r\n        <ng-container #fieldComponent></ng-container>\r\n      </mat-card>\r\n    </div>\r\n  </div>\r\n</app-dialog-popup>\r\n<!-- Preview = inline search or pills -->\r\n<ng-container #previewComponent></ng-container>","import { Type } from '@angular/core';\r\nimport { InputTypeCatalog } from '../../shared/fields/input-type-catalog';\r\nimport { LocalizationWrapperComponent } from '../fields/wrappers/localization/localization-wrapper.component';\r\nimport { BooleanDefaultComponent } from './basic/boolean-default/boolean-default.component';\r\nimport { BooleanTristateComponent } from './basic/boolean-tristate/boolean-tristate.component';\r\nimport { CustomDefaultComponent } from './basic/custom-default/custom-default.component';\r\nimport { CustomJsonEditorComponent } from './basic/custom-json-editor/custom-json-editor.component';\r\nimport { DatetimeDefaultComponent } from './basic/datetime-default/datetime-default.component';\r\nimport { EmptyDefaultComponent } from './basic/empty-default/empty-default.component';\r\nimport { EmptyMessageComponent } from './basic/empty-message/empty-message.component';\r\nimport { EntityContentBlockComponent } from './basic/entity-content-blocks/entity-content-blocks.component';\r\nimport { EntityDefaultComponent } from './basic/entity-default/entity-default.component';\r\nimport { EntityPickerComponent } from './basic/entity-picker/entity-picker.component';\r\nimport { EntityQueryComponent } from './basic/entity-query/entity-query.component';\r\nimport { ExternalWebComponentComponent } from './basic/external-web-component/external-web-component.component';\r\nimport { HyperlinkDefaultComponent } from './basic/hyperlink-default/hyperlink-default.component';\r\nimport { HyperlinkLibraryComponent } from './basic/hyperlink-library/hyperlink-library.component';\r\nimport { NumberDefaultComponent } from './basic/number-default/number-default.component';\r\nimport { NumberDropdownComponent } from './basic/number-dropdown/number-dropdown.component';\r\nimport { NumberPickerComponent } from './basic/number-picker/number-picker.component';\r\nimport { StringDefaultComponent } from './basic/string-default/string-default.component';\r\nimport { StringDropdownQueryComponent } from './basic/string-dropdown-query/string-dropdown-query.component';\r\nimport { StringDropdownComponent } from './basic/string-dropdown/string-dropdown.component';\r\nimport { StringFontIconPickerComponent } from './basic/string-font-icon-picker/string-font-icon-picker.component';\r\nimport { StringPickerComponent } from './basic/string-picker/string-picker.component';\r\nimport { StringTemplatePickerComponent } from './basic/string-template-picker/string-template-picker.component';\r\nimport { StringUrlPathComponent } from './basic/string-url-path/string-url-path.component';\r\nimport { AdamWrapperComponent } from './wrappers/adam/adam-wrapper.component';\r\nimport { DropzoneWrapperComponent } from './wrappers/dropzone/dropzone-wrapper.component';\r\nimport { ExpandableWrapperComponent } from './wrappers/expand-dialog/expandable-wrapper.component';\r\nimport { FeatureWarningWrapperComponent } from './wrappers/feature-warning/feature-warning-wrapper.component';\r\nimport { CollapsibleWrapperComponent } from './wrappers/group/collapsible-wrapper.component';\r\nimport { HiddenWrapperComponent } from './wrappers/hidden/hidden-wrapper.component';\r\nimport { HyperlinkDefaultExpandableWrapperComponent } from './wrappers/hyperlink-dialog/hyperlink-default-expandable-wrapper.component';\r\nimport { HyperlinkLibraryExpandableWrapperComponent } from './wrappers/hyperlink-library-dialog/hyperlink-library-expandable-wrapper.component';\r\nimport { PickerExpandableWrapperComponent } from './wrappers/picker-dialog/picker-expandable-wrapper.component';\r\nimport { WrappersCatalog } from './wrappers/wrappers.constants';\r\n\r\nexport const InputComponents: Record<string, Type<any>> = {\r\n  // Wrappers\r\n  [WrappersCatalog.AdamWrapper]: AdamWrapperComponent,\r\n  [WrappersCatalog.CollapsibleWrapper]: CollapsibleWrapperComponent,\r\n  [WrappersCatalog.DropzoneWrapper]: DropzoneWrapperComponent,\r\n  [WrappersCatalog.PickerExpandableWrapper]: PickerExpandableWrapperComponent,\r\n  [WrappersCatalog.ExpandableWrapper]: ExpandableWrapperComponent,\r\n  [WrappersCatalog.HiddenWrapper]: HiddenWrapperComponent,\r\n  [WrappersCatalog.FeatureWarningWrapper]: FeatureWarningWrapperComponent,\r\n  [WrappersCatalog.HyperlinkDefaultExpandableWrapper]: HyperlinkDefaultExpandableWrapperComponent,\r\n  [WrappersCatalog.HyperlinkLibraryExpandableWrapper]: HyperlinkLibraryExpandableWrapperComponent,\r\n  [WrappersCatalog.LocalizationWrapper]: LocalizationWrapperComponent,\r\n\r\n  // Input Types\r\n  [InputTypeCatalog.BooleanDefault]: BooleanDefaultComponent,\r\n  [InputTypeCatalog.BooleanTristate]: BooleanTristateComponent,\r\n  [InputTypeCatalog.CustomDefault]: CustomDefaultComponent,\r\n  [InputTypeCatalog.CustomJsonEditor]: CustomJsonEditorComponent,\r\n  [InputTypeCatalog.DateTimeDefault]: DatetimeDefaultComponent,\r\n  [InputTypeCatalog.EmptyDefault]: EmptyDefaultComponent,\r\n  [InputTypeCatalog.EmptyMessage]: EmptyMessageComponent,\r\n  [InputTypeCatalog.EntityContentBlocks]: EntityContentBlockComponent,\r\n  [InputTypeCatalog.EntityDefault]: EntityDefaultComponent,\r\n  [InputTypeCatalog.EntityQuery]: EntityQueryComponent,\r\n  [InputTypeCatalog.ExternalWebComponent]: ExternalWebComponentComponent,\r\n  [InputTypeCatalog.HyperlinkDefault]: HyperlinkDefaultComponent,\r\n  [InputTypeCatalog.HyperlinkLibrary]: HyperlinkLibraryComponent,\r\n  [InputTypeCatalog.NumberDefault]: NumberDefaultComponent,\r\n  [InputTypeCatalog.NumberDropdown]: NumberDropdownComponent,\r\n  [InputTypeCatalog.StringDefault]: StringDefaultComponent,\r\n  [InputTypeCatalog.StringDropdown]: StringDropdownComponent,\r\n  [InputTypeCatalog.StringDropdownQuery]: StringDropdownQueryComponent,\r\n  [InputTypeCatalog.StringFontIconPicker]: StringFontIconPickerComponent,\r\n  [InputTypeCatalog.StringJson]: CustomJsonEditorComponent,\r\n  [InputTypeCatalog.StringTemplatePicker]: StringTemplatePickerComponent,\r\n  [InputTypeCatalog.StringUrlPath]: StringUrlPathComponent,\r\n\r\n  // Pickers\r\n  [InputTypeCatalog.EntityPicker]: EntityPickerComponent,\r\n  [InputTypeCatalog.StringPicker]: StringPickerComponent,\r\n  [InputTypeCatalog.NumberPicker]: NumberPickerComponent,\r\n};\r\n","import { computed, signal } from '@angular/core';\r\nimport { computedObj } from 'projects/eav-ui/src/app/shared/signals/signal.utilities';\r\nimport { Adam } from '../../../../../../../../edit-types/src/Adam';\r\nimport { AdamConfig } from '../../../../../../../../edit-types/src/AdamConfig';\r\nimport { AdamItem } from '../../../../../../../../edit-types/src/AdamItem';\r\nimport { classLog } from '../../../../../shared/logging';\r\nimport { AdamBrowserComponent } from './adam-browser.component';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  setConfig: true,\r\n  refresh: true,\r\n}\r\n\r\n/**\r\n * Helper to connect ADAM.\r\n * It will be added to the field state early on, but won't work until the browser is initialized.\r\n */\r\nexport class AdamConnector implements Adam {\r\n  \r\n  log = classLog({AdamConnector}, logSpecs);\r\n\r\n  get browser() {\r\n    const b = this.#browser();\r\n    if (b) return b;\r\n    throw new Error('Browser not set');\r\n  }\r\n\r\n  public setBrowser(browser: AdamBrowserComponent) {\r\n    this.#browser.set(browser);\r\n  }\r\n  #browser = signal<AdamBrowserComponent>(null);\r\n\r\n  #items = computedObj('items', () => this.#browser()?.items() ?? [] satisfies AdamItem[]);\r\n  get items() { return this.#items };\r\n\r\n  public toggle(usePortalRoot: boolean, showImagesOnly: boolean) {\r\n    this.log.fn('toggle', { usePortalRoot, showImagesOnly });\r\n    this.browser.toggle(usePortalRoot, showImagesOnly)\r\n  };\r\n\r\n  #count = 0;\r\n\r\n  public setConfig(config: Partial<AdamConfig>) {\r\n    const l = this.log.fnIf('setConfig', { config, count: this.#count });\r\n    this.#count++;\r\n\r\n    if (this.#count > 10)\r\n      throw new Error('Infinite loop');\r\n\r\n    this.browser.setConfig(config);\r\n    l.end();\r\n  };\r\n  public getConfig() { return this.browser.adamConfig() };\r\n\r\n  public isDisabled = computed(() => this.#browser()?.adamConfig()?.disabled ?? true);\r\n\r\n  onItemClick() { return; }\r\n\r\n  onItemUpload() { return; }\r\n\r\n  refresh() {\r\n    this.log.fnIf('refresh');\r\n    this.browser.fetchItems()\r\n  }\r\n\r\n}","import { FieldSettings } from './FieldSettings';\r\nimport { EmptyDefault } from './FieldSettings-EmptyDefault';\r\n\r\n/**\r\n * Goal of this is to provide the basic settings for a control\r\n * in the BaseFieldComponent<T = FieldValue>\r\n * to replace all the many subscriptions etc.\r\n * with a simple signal containing the important settings.\r\n */\r\nexport class BasicControlSettings {\r\n  /** Label to show on an input field */\r\n  label: string;\r\n\r\n  /** Notes to show below an input field */\r\n  notes: string;\r\n\r\n  /** Label with a * if required */\r\n  labelWithRequired: string;\r\n\r\n  /** Placeholder to show on an input field */\r\n  placeholder: string;\r\n\r\n  /** If the field is required */\r\n  required: boolean;\r\n\r\n  /** Real final visibility. Also respects if it was disabled by the ItemFieldVisibility. */\r\n  visible: boolean;\r\n\r\n  // /** Original visibility, more as info. ATM not used any where. */\r\n  // visibilityRaw: boolean;\r\n\r\n  // /** Information if this field was forcibly disabled */\r\n  // visibilityDisabled: boolean;\r\n\r\n  /** If the field is collapsed */\r\n  collapsed: boolean;\r\n\r\n\r\n  static fromSettings(s: FieldSettings): BasicControlSettings {\r\n    const label = s?.Name ?? 'loading...';\r\n    const notes = s?.Notes ?? '';\r\n    const required = s?.valueRequired ?? true;\r\n    const visibilityRaw = s?.Visible ?? true;\r\n    const visibilityDisabled = s?.VisibleDisabled ?? false;\r\n    const visible = visibilityRaw && !visibilityDisabled;\r\n    const collapsed = (s as FieldSettings & EmptyDefault)?.Collapsed ?? false;\r\n    // if (label == 'loading...') {\r\n    //   console.log('s', s);\r\n    // }\r\n    return {\r\n      label,\r\n      notes,\r\n      placeholder: s?.Placeholder ?? 'loading...',\r\n      required,\r\n      labelWithRequired: label + (required ? ' *' : ''),\r\n      visible,\r\n      // visibilityRaw,\r\n      // visibilityDisabled,\r\n      collapsed,\r\n    };\r\n  }\r\n}\r\n","import { EnvironmentInjector, Injectable, Injector, Signal, createEnvironmentInjector, inject, runInInjectionContext } from '@angular/core';\r\nimport { toObservable, toSignal } from '@angular/core/rxjs-interop';\r\nimport { AbstractControl } from '@angular/forms';\r\nimport { combineLatest, tap } from 'rxjs';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { mapUntilObjChanged } from '../../../shared/rxJs/mapUntilChanged';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { EntityFormStateService } from '../../entity-form/entity-form-state.service';\r\nimport { FieldState } from '../../fields/field-state';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { UiControl } from '../../shared/controls/ui-control';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\nimport { BasicControlSettings } from './../../../../../../edit-types/src/BasicControlSettings';\r\nimport { InjectorBundle } from './injector-bundle.model';\r\n\r\nconst logSpecs = {\r\n  getInjectors: true,\r\n  fields: [...DebugFields] as string[], // example: ['Boolean'],\r\n};\r\n\r\nconst detailedDebug = false;\r\n\r\n/**\r\n * This service creates custom injectors for each field.\r\n * It's used in the fields-builder to initialize dynamic controls.\r\n */\r\n@Injectable()\r\nexport class FieldStateInjectorFactory {\r\n\r\n  log = classLog({FieldStateInjectorFactory}, logSpecs);\r\n\r\n  #injector = inject(Injector);\r\n  #envInjector = inject(EnvironmentInjector);\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n  #entityFormStateSvc = inject(EntityFormStateService);\r\n  #featuresSvc = inject(FeaturesService);\r\n\r\n  #editRoutingService = inject(EditRoutingService);\r\n\r\n  constructor() { }\r\n\r\n  /**\r\n   * Get the injectors for a specific form field.\r\n   * Requires that the angular form has already created the field.\r\n   * \r\n   * IMPORTANT: It also has a side-effect that it adds picker data to the FieldStateService.\r\n   * this is not elegant ATM.\r\n   * @param fieldConfig \r\n   * @param inputType \r\n   * @returns an injector bundle with control and environment injectors\r\n   */\r\n  public getInjectors(fieldConfig: FieldConfigSet, inputType: InputTypeSpecs): InjectorBundle {\r\n    const l = this.log.fnIf('getInjectors', { fieldConfig, inputType });\r\n\r\n    const name = fieldConfig.fieldName;\r\n\r\n    // Create settings() and basics() signal for further use\r\n    const settings = this.#fieldsSettingsSvc.settings[name];\r\n    const basics = computedObj('basics', () => BasicControlSettings.fromSettings(settings()));\r\n\r\n    // Control and Control Status\r\n    const formGroup = this.#entityFormStateSvc.formGroup;\r\n    const control = formGroup.controls[name];    \r\n    const controlStatusChangeSignal = this.#buildUiSignal(name, control, inputType, settings);\r\n\r\n    /** The UI Value changes. Since it can also contain arrays, so we're using the strong equal */\r\n    const uiValue: Signal<FieldValue> = (() => {\r\n      if (!control) return signalObj('value-change-empty', null);\r\n      const debouncedValue$ = control.valueChanges.pipe(\r\n        // tap(v => console.warn('2dm value change on UI - before equals', v)),\r\n        // distinctUntilChanged((p, c) => {\r\n        //   const eq = isEqual(p, c);\r\n        //   console.warn('2dm value change on UI - equals', p, c, eq);\r\n        //   return eq;\r\n        // }),\r\n        mapUntilObjChanged(v => v),\r\n        // tap(v => console.warn('2dm value change on UI - after equals', v)),\r\n      );\r\n      return toSignal(debouncedValue$, { injector: this.#injector, initialValue: control.value });\r\n    })();\r\n\r\n    const fieldState = new FieldState(\r\n      name,\r\n      fieldConfig,\r\n      formGroup,\r\n      settings,\r\n      basics,\r\n      controlStatusChangeSignal,\r\n      uiValue,\r\n      this.#fieldsSettingsSvc.translationState[name],\r\n      this.#editRoutingService.isExpandedSignal(fieldConfig.index, fieldConfig.entityGuid, this.#injector),\r\n      this.#fieldsSettingsSvc.pickerData[name] ?? null,\r\n      this.#featuresSvc,\r\n      this.#injector,\r\n    );\r\n\r\n    const injectors = this.#createInjectors(fieldState);\r\n    return l.r(injectors);\r\n  }\r\n\r\n  /**\r\n   * Create a signal for the control status - mainly disabled etc.\r\n   */\r\n  #buildUiSignal(fieldName: string, control: AbstractControl, inputType: InputTypeSpecs, settings: Signal<FieldSettings>): Signal<UiControl> {\r\n    // Conditional logger for detailed logging\r\n    const lDetailed = this.log.fnCond(this.log.specs.fields.includes(fieldName), 'buildControlChangeSignal', { fieldName, inputType });\r\n\r\n    // Create a signal to watch for control-state changes\r\n    if (control) {\r\n      const settings$ = toObservable(settings, { injector: this.#injector });\r\n\r\n      return runInInjectionContext(this.#injector, () => {\r\n        // Watch the control for state changes - this is triggered on the ValueChanges\r\n        // but we only want to continue triggering if a relevant state changed.\r\n        const uiStateChange$ = control.valueChanges.pipe(\r\n          mapUntilObjChanged(_ => ({ dirty: control.dirty, invalid: control.invalid, touched: control.touched, disabled: control.disabled })),\r\n          tap(state => detailedDebug && console.error('controlStateChange', state)),\r\n        );\r\n\r\n        // disabled can be caused by settings in addition to the control status\r\n        // since the control doesn't cause a `valueChanged` on disabled, we need to watch the settings\r\n        const uiStatus$ = combineLatest([\r\n          uiStateChange$,\r\n          settings$.pipe(mapUntilObjChanged(s => s.uiDisabled)),\r\n        ]).pipe(\r\n          tap(([_, disabled]) => lDetailed.a('controlStateChange on control', { control, disabled })),\r\n          mapUntilObjChanged(([_, disabled]) => new UiControl(control, fieldName, disabled)),\r\n          tap(result => lDetailed.a('controlStatusChangeSignal', { result })),\r\n        );\r\n\r\n        // Build controlStatus observable.\r\n        // Should be changed to a pure signal without the observables probably in Angular 18\r\n        // which probably has a signal for this as well...\r\n        return toSignal(uiStatus$, { initialValue: new UiControl(control, fieldName, settings().uiDisabled) });\r\n      });\r\n    }\r\n    \r\n    // No control found - could be a problem, could be expected\r\n    // If it's an empty message field, this is kind of expected, since it doesn't have a value control in the form\r\n    if (!InputTypeHelpers.isEmpty(inputType.inputType)) {\r\n      console.error(`Error: can't create signal for control of ${fieldName} (not found). Input type is not empty, it's ${inputType.inputType}.`);\r\n      // try to have a temporary result, so that in most cases it won't just fail\r\n      return signalObj('control-status-empty', UiControl.emptyControl());\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Create the injector definitions to use for this field.\r\n   */\r\n  #createInjectors(fieldState: FieldState<FieldValue>) {\r\n    const providers = [\r\n      { provide: FieldState, useValue: fieldState },\r\n    ];\r\n\r\n    // Component injector, not actually sure if it's used, because standalone only use environmentInjector AFAIK\r\n    const injector = Injector.create({\r\n      providers: providers,\r\n      parent: this.#injector,\r\n      name: 'FieldInjector',\r\n    });\r\n\r\n    // Environment injector\r\n    const environmentInjector = createEnvironmentInjector(\r\n      providers,\r\n      this.#envInjector,\r\n      'FieldEnvInjector'\r\n    );\r\n    return { injector, environmentInjector };\r\n  }\r\n}\r\n","import { ComponentRef, Directive, ElementRef, OnDestroy, OnInit, Renderer2, Type, ViewContainerRef, effect, inject, signal, untracked } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { transient } from '../../../../../../core';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EntityFormStateService } from '../../entity-form/entity-form-state.service';\r\nimport { InputComponents } from '../../fields/input-components.constant';\r\nimport { PickerExpandableWrapperComponent } from '../../fields/wrappers/picker-dialog/picker-expandable-wrapper.component';\r\nimport { FieldProps } from '../../state/fields-configs.model';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { CustomDefaultComponent } from '../basic/custom-default/custom-default.component';\r\nimport { FieldConfigSet } from '../field-config-set.model';\r\nimport { FieldMetadataKey, FieldMetadataModel } from '../field-metadata.decorator';\r\nimport { AdamConnector } from '../wrappers/adam/adam-browser/adam-connector';\r\nimport { FieldStateInjectorFactory } from './field-injector.service';\r\nimport { InjectorBundle } from './injector-bundle.model';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  createWrapper: true,\r\n};\r\n\r\n/**\r\n * This directive is responsible for creating the dynamic fields based on the field settings.\r\n * It will create the fields based on the settings and attach them to the view.\r\n */\r\n@Directive({\r\n  selector: '[appEditControlsBuilder]',\r\n})\r\nexport class EditControlsBuilderDirective implements OnInit, OnDestroy {\r\n\r\n  index: number;\r\n\r\n  // In the class, inject Renderer2\r\n  private renderer = inject(Renderer2);\r\n  #firstInputFocused = false;\r\n\r\n  log = classLog({ EditControlsBuilderDirective }, logSpecs);\r\n\r\n  /** Service to create custom injectors for each field */\r\n  #fieldInjectorFac = transient(FieldStateInjectorFactory);\r\n\r\n  /** Ref to this HTML DOM, for adding controls */\r\n  #myContainerRef = inject(ViewContainerRef);\r\n\r\n  /** Service to get all settings for each field */\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n\r\n\r\n  constructor(private formConfigService: EntityFormStateService, private el: ElementRef) {\r\n    effect(() => {\r\n      const onInitReady = this.onInitReady();\r\n      const controlsCreated = this.formConfigService.controlsCreated();\r\n      this.log.a('createControls - effect', { onInitReady, controlsCreated });\r\n      if (!(onInitReady && controlsCreated))\r\n        return;\r\n\r\n      this.log.a('createControls RUN');\r\n      // TODO: NOT YET CLEAR IF THIS IS THE RIGHT SOLUTION\r\n      untracked(() => this.createControls());\r\n    });\r\n  }\r\n\r\n  /** Field Configs for clean-up after the control closes */\r\n  #fieldConfigSets: FieldConfigSet[] = [];\r\n\r\n  onInitReady = signal(false);\r\n\r\n  ngOnInit() {\r\n    this.onInitReady.set(true);\r\n    // Get the Index from the HTML element attribute\r\n    this.index = parseInt(this.el.nativeElement.getAttribute('data-index'));\r\n  }\r\n\r\n  createControls() {\r\n    // clear container\r\n    this.#myContainerRef.clear();\r\n\r\n    // Set the current container to be \"This\" = the main container (not a specific group)\r\n    // When groups open/close, this will be set to that group,\r\n    // so fields are then inside that container.\r\n    let currentContainer = this.#myContainerRef;\r\n    const fieldsProps = this.#fieldsSettingsSvc.allProps();\r\n\r\n    // Loop through each field and create the component\r\n    // If we encounter a group, we create a new container and set it as the main one\r\n    for (const [fieldName, fieldProps] of Object.entries(fieldsProps)) {\r\n      const fieldConfig: FieldConfigSet = {\r\n        ...fieldProps.constants,\r\n        fieldName: fieldName,\r\n        focused$: new BehaviorSubject(false),\r\n        adam: new AdamConnector(),\r\n      };\r\n      this.#fieldConfigSets.push(fieldConfig);\r\n      const inputType = fieldProps.constants.inputTypeSpecs.inputType;\r\n\r\n      if (InputTypeHelpers.isGroupStart(inputType)) {\r\n        // If we encounter a group-start, then create a new container based on the main container\r\n        currentContainer = this.#createGroup(this.#myContainerRef, fieldProps, fieldConfig);\r\n      } else if (InputTypeHelpers.isGroupEnd(inputType)) {\r\n        // If we encounter a group-end, set the main container to be the default one again\r\n        currentContainer = this.#myContainerRef;\r\n      } else {\r\n        // Just create the normal component within the current container\r\n        this.#createComponent(currentContainer, fieldProps, fieldConfig);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    for (const fieldConfig of this.#fieldConfigSets)\r\n      fieldConfig.focused$.complete();\r\n  }\r\n\r\n  #createGroup(containerRef: ViewContainerRef, fieldProps: FieldProps, fieldConfig: FieldConfigSet): ViewContainerRef {\r\n    const injectors = this.#fieldInjectorFac.getInjectors(fieldConfig, fieldProps.constants.inputTypeSpecs);\r\n    let wrapperInfo = new DynamicControlInfo(null, containerRef, injectors);\r\n    if (fieldProps.buildWrappers)\r\n      wrapperInfo = this.#createWrappers(wrapperInfo, fieldProps.buildWrappers);\r\n    return wrapperInfo.contentsRef;\r\n  }\r\n\r\n  #createComponent(containerRef: ViewContainerRef, fieldProps: FieldProps, fieldConfig: FieldConfigSet) {\r\n    const inputSpecs = fieldProps.constants.inputTypeSpecs;\r\n    this.log.a('createComponent', { inputSpecs });\r\n\r\n    // Add injector to first wrapper, so that it will be attached to the top level, and then dropped\r\n    const injectors = this.#fieldInjectorFac.getInjectors(fieldConfig, inputSpecs);\r\n    let wrapperInfo = new DynamicControlInfo(null, containerRef, injectors);\r\n    if (fieldProps.buildWrappers)\r\n      wrapperInfo = this.#createWrappers(wrapperInfo, fieldProps.buildWrappers);\r\n\r\n    const componentName = inputSpecs.isExternal ? InputTypeCatalog.ExternalWebComponent : inputSpecs.inputType;\r\n    const componentType = this.#readComponentType(componentName);\r\n\r\n    // create component - ideally with metadata if provided (ATM can specify alternate wrapper)\r\n    const componentMd: FieldMetadataModel = Reflect.getMetadata(FieldMetadataKey, componentType);\r\n\r\n    // generate wrappers if they are defined\r\n    if (componentMd?.wrappers)\r\n      wrapperInfo = this.#createWrappers(wrapperInfo, componentMd.wrappers);\r\n\r\n    // generate the real input field component\r\n    // this.log.a('createComponent - add component', { componentType });\r\n    const componentRef = this.#generateAndAttachField(componentType, wrapperInfo.contentsRef, wrapperInfo.injectors);\r\n\r\n\r\n    // generate the picker preview component if it exists\r\n    const pickerPreviewContainerRef = (wrapperInfo.wrapperRef?.instance as PickerExpandableWrapperComponent)?.previewComponent;\r\n    if (pickerPreviewContainerRef != null) {\r\n      const previewType = this.#readComponentType(inputSpecs.inputType);\r\n      this.log.a('createComponent - add preview', { previewType });\r\n      this.#generateAndAttachField(previewType, pickerPreviewContainerRef, wrapperInfo.injectors);\r\n    }\r\n    // Set only the first input to be focused, if it is the first input\r\n    if (this.#firstInputFocused === false && this.index === 0 && fieldProps.settings.noAutoFocus !== true) {\r\n      this.#setAutoFocus(componentRef);\r\n      this.#firstInputFocused = true;\r\n    }\r\n  }\r\n\r\n  #setAutoFocus(componentRef: ComponentRef<any>) {\r\n    setTimeout(() => {\r\n      // Get the input element from the component\r\n      const nativeElement = componentRef.location.nativeElement.querySelector('input');\r\n      if (nativeElement) {\r\n        this.renderer.setAttribute(nativeElement, 'autofocus', 'true');\r\n        nativeElement?.focus(); // Focus the input element - with null check in case we're too early\r\n      }\r\n    }, 250); // Wait for the input to be created before focusing\r\n\r\n  }\r\n\r\n  #generateAndAttachField(componentType: Type<any>, container: ViewContainerRef, injectors: InjectorBundle): ComponentRef<any> {\r\n    return container.createComponent(componentType, injectors); // Return the ComponentRef\r\n  }\r\n\r\n  #createWrappers(outerWrapper: DynamicControlInfo, wrappers: string[]): DynamicControlInfo {\r\n    let wrapperInfo = outerWrapper;\r\n    for (const wrapperName of wrappers)\r\n      wrapperInfo = this.#createWrapper(wrapperInfo, wrapperName);\r\n    return wrapperInfo;\r\n  }\r\n\r\n  #createWrapper(wrapperInfo: DynamicControlInfo, wrapperName: string): DynamicControlInfo {\r\n    const l = this.log.fnIf('createWrapper', { wrapperName });\r\n    const componentType = this.#readComponentType(wrapperName);\r\n    const ref = wrapperInfo.contentsRef.createComponent(componentType, wrapperInfo.injectors);\r\n    return new DynamicControlInfo(ref, ref.instance.fieldComponent, null /* no injectors for following wrappers */);\r\n  }\r\n\r\n  #readComponentType(selector: string): Type<any> {\r\n    const componentType = InputComponents[selector];\r\n    if (componentType == null) {\r\n      console.error(`Missing component class for: ${selector}`);\r\n      return CustomDefaultComponent;\r\n    }\r\n    return componentType;\r\n  }\r\n\r\n}\r\n\r\n\r\nclass DynamicControlInfo {\r\n  constructor(\r\n    public wrapperRef: ComponentRef<any>,\r\n    public contentsRef: ViewContainerRef,\r\n    // will only need to be set the first time\r\n    public injectors: InjectorBundle,\r\n  ) { }\r\n}\r\n","import { inject, Injectable, OnDestroy } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { filter, map, Subscription } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { ItemHistoryResult } from '../../item-history/models/item-history-result.model';\r\nimport { classLog } from '../../shared/logging';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\nimport { EditEntryComponent } from '../dialog/entry/edit-entry.component';\r\nimport { UrlHelpers } from '../shared/helpers';\r\nimport { NavigateFormResult } from './edit-routing.service';\r\nimport { EditUrlParams } from './edit-url-params.model';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  watchToRefreshOnVersionsClosed: true,\r\n}\r\n\r\n/**\r\n * Special helper to watch for history-dialog closing.\r\n */\r\n@Injectable()\r\nexport class EditForceReloadService implements OnDestroy {\r\n\r\n  log = classLog({EditForceReloadService}, logSpecs);\r\n\r\n  #dialogRef = inject(MatDialogRef<EditEntryComponent>);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  ngOnDestroy() {\r\n    this.#watcher?.unsubscribe();\r\n  }\r\n  #watcher: Subscription;\r\n\r\n  watchToRefreshOnVersionsClosed() {\r\n    const l = this.log.fnIf('watchToRefreshOnVersionsClosed');\r\n    this.#watcher = this.#dialogRouter.childDialogClosed$().pipe(\r\n      map(() => this.#dialogRouter.state<ItemHistoryResult>()),\r\n      filter(result => result?.refreshEdit === true),\r\n    ).subscribe(_ => {\r\n      const l2 = this.log.fnIf('watchToRefreshOnVersionsClosed', null, 'refreshEdit');\r\n      l.a('version closed, refreshing edit dialog');\r\n      const p = this.#dialogRouter.snapshot.params as EditUrlParams;\r\n      const newUrl = UrlHelpers.newUrlIfCurrentContainsOldUrl(this.#dialogRouter.route,`edit/${p.items}`, `edit/refresh/${p.items}`);\r\n      if (newUrl == null) return l2.end('no change');\r\n      this.#dialogRef.close({ navigateUrl: newUrl } satisfies NavigateFormResult);\r\n      l2.end(`routed away to :${newUrl}`);\r\n    })\r\n    l.end();\r\n  }\r\n}\r\n","@if (language().current !== language().primary)\r\n{\r\n  <div>\r\n    <button mat-button [disabled]=\"readOnly().isReadOnly || slotIsEmpty()\" [matMenuTriggerFor]=\"menu\">\r\n      <span class=\"my-flex-inside\">\r\n        {{ 'LangMenu.Translate' | translate | uppercase }}\r\n        &nbsp;&nbsp;\r\n        <mat-icon class=\"eav-translate-icon\">translate</mat-icon>\r\n      </span>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <ng-template matMenuContent>\r\n        <button mat-menu-item (click)=\"unlockAll()\">{{ 'LangMenu.TranslateAll' | translate }}</button>\r\n        <button mat-menu-item (click)=\"autoTranslateMany()\">\r\n          {{ 'LangMenu.AutoTranslateAll' | translate }}\r\n          <app-feature-icon-indicator [featureNameId]=\"'EditUiTranslateWithGoogle'\"></app-feature-icon-indicator>\r\n        </button>\r\n        <button mat-menu-item (click)=\"lockAll()\">{{ 'LangMenu.NoTranslateAll' | translate }}</button>\r\n      </ng-template>\r\n    </mat-menu>\r\n  </div>\r\n}\r\n","import { UpperCasePipe } from '@angular/common';\r\nimport { Component, computed, inject, input, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FeatureIconIndicatorComponent } from '../../../features/feature-icon-indicator/feature-icon-indicator.component';\r\nimport { SignalEquals } from '../../../shared/signals/signal-equals';\r\nimport { TranslateMenuDialogConfig, TranslateMenuDialogData } from '../../fields/wrappers/localization/translate-menu-dialog/translate-menu-dialog.models';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { AutoTranslateDisabledWarningDialog } from '../../localization/auto-translate-disabled-warning-dialog/auto-translate-disabled-warning-dialog.component';\r\nimport { AutoTranslateMenuDialogComponent } from '../../localization/auto-translate-menu-dialog/auto-translate-menu-dialog.component';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { FieldsTranslateService } from '../../state/fields-translate.service';\r\nimport { ItemService } from '../../state/item.service';\r\n\r\n@Component({\r\n    selector: 'app-entity-translate-menu',\r\n    templateUrl: './entity-translate-menu.component.html',\r\n    styleUrls: ['./entity-translate-menu.component.scss'],\r\n    imports: [\r\n        MatButtonModule,\r\n        MatMenuModule,\r\n        MatIconModule,\r\n        FeatureIconIndicatorComponent,\r\n        UpperCasePipe,\r\n        TranslateModule,\r\n    ]\r\n})\r\nexport class EntityTranslateMenuComponent {\r\n  entityGuid = input<string>();\r\n\r\n  private formsStateService = inject(FormsStateService);\r\n  protected readOnly = this.formsStateService.readOnly;\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private itemService: ItemService,\r\n    private eavService: FormConfigService,\r\n    private fieldTranslateSvc: FieldsTranslateService,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private fieldSettingsSvc: FieldsSettingsService,\r\n  ) {\r\n    // debug...\r\n    // effect(() => {\r\n    //   console.log(`2dm ${this.entityGuid()} slotIsEmpty:` + this.slotIsEmpty());\r\n    //   console.log(`2dm autoTranslatableFields:` + this.#autoTranslatableFields());\r\n    // });\r\n  }\r\n\r\n  #autoTranslatableFields = computed(() => {\r\n    // console.log(`2dm #AutoTrans:`, val, (this.fieldsTranslateService as any).entityGuid);\r\n    return this.fieldTranslateSvc.findAutoTranslatableFields();\r\n  });\r\n\r\n  protected slotIsEmpty = computed(() => {\r\n    return this.itemService.slotIsEmpty(this.entityGuid())();\r\n  }, SignalEquals.bool);\r\n\r\n  language = this.eavService.language;\r\n\r\n  unlockAll() {\r\n    this.fieldTranslateSvc.toggleUnlockOnAll(true);\r\n  }\r\n\r\n  lockAll() {\r\n    this.fieldTranslateSvc.toggleUnlockOnAll(false);\r\n  }\r\n\r\n  autoTranslateMany(): void {\r\n    const autoTransFields = this.#autoTranslatableFields();\r\n    if (autoTransFields.length === 0) \r\n      return this.fieldTranslateSvc.showMessageNoTranslatableFields(true);\r\n\r\n    // Translation state of any field, to detect the languages\r\n    const translationStateAny = this.fieldSettingsSvc.translationState[autoTransFields[0]]();\r\n    if (autoTransFields.length > 0) {\r\n      const config: TranslateMenuDialogConfig = {\r\n        entityGuid: this.entityGuid(),\r\n        fieldName: autoTransFields[0],\r\n      }\r\n      const dialogData: TranslateMenuDialogData = {\r\n        config,\r\n        translationState: {\r\n          language: translationStateAny.language,\r\n          linkType: translationStateAny.linkType,\r\n        },\r\n        isTranslateMany: true,\r\n        translatableFields: autoTransFields,\r\n      };\r\n      this.matDialog.open(AutoTranslateMenuDialogComponent, {\r\n        autoFocus: false,\r\n        data: dialogData,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n    } else {\r\n      this.matDialog.open(AutoTranslateDisabledWarningDialog, {\r\n        autoFocus: false,\r\n        data: { isAutoTranslateAll: true },\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<!--\r\n Header containing title, notes, slot empty toggle, metadata-for information, history button and translate menu\r\n-->\r\n<mat-card appearance=\"raised\" class=\"eav-card-group-parent shadow-bottom-z-1\">\r\n  <div class=\"my-title-bar-outer eav-card-header-group-parent\">\r\n    <!-- ^v icon to indicate state + Title -->\r\n    <div class=\"my-title-bar eav-card-title-group mat-headline-4\" (click)=\"toggleCollapse()\">\r\n      <mat-icon class=\"title-arrow\">\r\n        {{ collapse ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}\r\n      </mat-icon>\r\n      <span class=\"title\">\r\n        {{ ctSettings().itemTitle || ('ItemCard.DefaultTitle' | translate) }}\r\n      </span>\r\n    </div>\r\n\r\n    <!-- Notes button -->\r\n    @if (ctSettings().showNotes) {\r\n      <button\r\n        type=\"button\"\r\n        #noteTrigger\r\n        mat-icon-button\r\n        class=\"eav-note {{ noteProps().triggerClass }}\"\r\n        [disabled]=\"readOnly()\"\r\n        [tippyTranslate]=\"noteProps().tooltip\"\r\n        [tippyDisabled]=\"readOnly()\"\r\n        [disableRipple]=\"noteProps().itemNotSaved\"\r\n        (pointerenter)=\"noteProps().note ? toggleNote($event) : null\"\r\n        (pointerleave)=\"noteProps().note ? toggleNote($event) : null\"\r\n        (click)=\"noteProps().note ? toggleNote($event) : editNote()\"\r\n      >\r\n        <mat-icon>{{ noteProps().iconName }}</mat-icon>\r\n      </button>\r\n    }\r\n\r\n    <!-- Note template to show on demand -->\r\n    <ng-template #noteTemplate>\r\n      <div\r\n        class=\"eav-note-wrapper {{ noteProps().noteClass }}\"\r\n        cdkDrag\r\n        cdkDragRootElement=\".cdk-overlay-pane\"\r\n        cdkDragBoundary=\"body\"\r\n        (pointerdown)=\"noteTouched = true\"\r\n      >\r\n        <div class=\"eav-note-actions\" cdkDragHandle>\r\n          <button mat-icon-button appMousedownStopPropagation (click)=\"editNote(noteProps().note)\">\r\n            <mat-icon>edit</mat-icon>\r\n          </button>\r\n          <button mat-icon-button appMousedownStopPropagation (click)=\"deleteNote(noteProps().note)\">\r\n            <mat-icon>delete</mat-icon>\r\n          </button>\r\n          <button mat-icon-button appMousedownStopPropagation (click)=\"toggleNote($event)\">\r\n            <mat-icon>close</mat-icon>\r\n          </button>\r\n        </div>\r\n        <div class=\"eav-note-content eav-hide-scrollbar\" [innerHtml]=\"noteProps().noteHtml | safeHtml\"></div>\r\n      </div>\r\n    </ng-template>\r\n\r\n    <!-- Slot Empty Toggle -->\r\n    @if (ctSettings().slotCanBeEmpty) {\r\n      <mat-slide-toggle\r\n        class=\"empty-slot-toggle\"\r\n        (change)=\"toggleSlotIsEmpty()\"\r\n        [checked]=\"!ctSettings().slotIsEmpty\"\r\n        [disabled]=\"readOnly() || languages().current !== languages().primary\"\r\n        [tippyTranslate]=\"!ctSettings().slotIsEmpty ? 'ItemCard.SlotUsedTrue' : 'ItemCard.SlotUsedFalse'\"\r\n        [tippyDisabled]=\"readOnly() || languages().current !== languages().primary\"\r\n      >\r\n      </mat-slide-toggle>\r\n    }\r\n\r\n    <!-- Metadata-For Information -->\r\n    @if (ctSettings().showMdFor && itemForTooltip()) {\r\n      <div class=\"icon-box\" [tippy]=\"itemForTooltip()\">\r\n        <mat-icon>local_offer</mat-icon>\r\n      </div>\r\n    }\r\n\r\n    <!-- History Button -->\r\n    @if (formConfig.config.enableHistory) {\r\n      <button type=\"button\" mat-icon-button tippyTranslate=\"Form.Buttons.History.Tip\" [disabled]=\"readOnly()\" (click)=\"openHistory()\">\r\n        <mat-icon>history</mat-icon>\r\n      </button>\r\n    }\r\n    <app-entity-translate-menu [entityGuid]=\"entityGuid()\"> </app-entity-translate-menu>\r\n  </div>\r\n  <mat-card-content class=\"eav-card-content-group-parent\" [style.display]=\"collapse ? 'none' : 'block'\">\r\n    <div class=\"eav-layout-grid\">\r\n      <div class=\"eav-layout-grid__inner\">\r\n        @if (ctSettings().editInstructions) {\r\n          <div class=\"eav-layout-grid__cell--span-12 mat-body-2\" align=\"start\">\r\n            <div class=\"description\" appChangeAnchorTarget [innerHtml]=\"ctSettings().editInstructions | safeHtml\"></div>\r\n          </div>\r\n        }\r\n        <div class=\"eav-layout-grid__cell--span-12\">\r\n          <!-- Inputs index weiter geben -->\r\n          <div appEditControlsBuilder [attr.data-index]=\"index()\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { CdkDrag, CdkDragHandle } from '@angular/cdk/drag-drop';\r\nimport { AfterViewChecked, Component, ElementRef, inject, input, OnDestroy, OnInit, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialog, MatDialogRef, MatDialogState } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../../core';\r\nimport { FeatureNames } from '../../../features/feature-names';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { eavConstants } from '../../../shared/constants/eav.constants';\r\nimport { MousedownStopPropagationDirective } from '../../../shared/directives/mousedown-stop-propagation.directive';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EditForm, EditPrep, ItemIdentifierHeader } from '../../../shared/models/edit-form.model';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\nimport { DialogRoutingService } from '../../../shared/routing/dialog-routing.service';\r\nimport { EntityService } from '../../../shared/services/entity.service';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { EditControlsBuilderDirective } from '../../fields/builder/fields-builder.directive';\r\nimport { ChangeAnchorTargetDirective } from '../../fields/directives/change-anchor-target.directive';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormDataService } from '../../form/form-data.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { EditForceReloadService } from '../../routing/edit-force-reload.service';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { EntityReader } from '../../shared/helpers/entity-reader';\r\nimport { EavEntity, EavItem } from '../../shared/models/eav';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { buildContentTypeFeatures, getItemForTooltip, getNoteProps } from '../entity-form.helpers';\r\nimport { EntityTranslateMenuComponent } from '../entity-translate-menu/entity-translate-menu.component';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  fetchNote: true,\r\n  noteFormData: true,\r\n};\r\n\r\n/**\r\n * This wraps a single entity in the multi-entities-form.\r\n */\r\n@Component({\r\n    selector: 'app-edit-entity-form',\r\n    templateUrl: './entity-form.component.html',\r\n    styleUrls: ['./entity-form.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        MatIconModule,\r\n        MatButtonModule,\r\n        CdkDrag,\r\n        CdkDragHandle,\r\n        MatSlideToggleModule,\r\n        EntityTranslateMenuComponent,\r\n        ChangeAnchorTargetDirective,\r\n        EditControlsBuilderDirective,\r\n        TranslateModule,\r\n        TippyDirective,\r\n        SafeHtmlPipe,\r\n        MousedownStopPropagationDirective,\r\n    ]\r\n})\r\nexport class EntityFormComponent implements OnInit, AfterViewChecked, OnDestroy {\r\n\r\n  log = classLog({EntityFormComponent}, logSpecs);\r\n\r\n  @ViewChild('noteTrigger', { read: ElementRef }) private noteTriggerRef?: ElementRef<HTMLButtonElement>;\r\n  @ViewChild('noteTemplate') private noteTemplateRef?: TemplateRef<undefined>;\r\n\r\n  entityGuid = input<string>();\r\n  index = input<number>();\r\n\r\n  protected formConfig = inject(FormConfigService);\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n  #formsStateSvc = inject(FormsStateService);\r\n  #translate = inject(TranslateService);\r\n  #versioningReloader = transient(EditForceReloadService);\r\n\r\n  collapse = false;\r\n  noteTouched: boolean = false;\r\n\r\n  #features = inject(FeaturesService);\r\n  #editUiShowNotes = this.#features.isEnabled[FeatureNames.EditUiShowNotes];\r\n  #editUiShowMetadataFor = this.#features.isEnabled[FeatureNames.EditUiShowMetadataFor];\r\n\r\n  /** Languages */\r\n  languages = this.formConfig.language;\r\n\r\n  /** Content-Type Settings */\r\n  ctSettings = computedObj('ctSettings', () => {\r\n    const s = this.#fieldsSettingsSvc.contentTypeSettings();\r\n    const features = s.Features;\r\n    const ctFeatures = buildContentTypeFeatures(s.Features);\r\n\r\n    return {\r\n      itemTitle: s._itemTitle,\r\n      slotCanBeEmpty: s._slotCanBeEmpty,\r\n      slotIsEmpty: s._slotIsEmpty,\r\n      editInstructions: s.EditInstructions,\r\n      features,\r\n      showNotes: ctFeatures[FeatureNames.EditUiShowNotes] ?? this.#editUiShowNotes(),\r\n      showMdFor: ctFeatures[FeatureNames.EditUiShowMetadataFor] ?? this.#editUiShowMetadataFor(),\r\n    };\r\n  });\r\n\r\n  readOnly = computedObj('readOnly', () => this.#formsStateSvc.readOnly().isReadOnly);\r\n\r\n  /** Item-For (Target) Tooltip */\r\n  itemForTooltip = computedObj('itemForTooltip', () => {\r\n    const item = this.itemSvc.getItemFor(this.entityGuid());\r\n    return getItemForTooltip(item, this.#translate);\r\n  });\r\n\r\n  #retriggerNoteProps = signalObj<boolean>('retriggerNoteProps', false);\r\n  noteProps = computedObj('noteProps', () => {\r\n    this.#retriggerNoteProps(); // dependency to retrigger when #retriggerNoteProps changes\r\n    const entityGuid = this.entityGuid();\r\n    const languages = this.formConfig.language();\r\n    const note = this.itemSvc.getItemNote(entityGuid);\r\n    const notCreatedYet = this.itemSvc.get(entityGuid).Entity.Id === 0;\r\n    return getNoteProps(note, languages, notCreatedYet);\r\n  });\r\n\r\n  private noteRef?: MatDialogRef<undefined, any>;\r\n\r\n  #formDataSvc = transient(FormDataService);\r\n  #entitySvc = transient(EntityService);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private itemSvc: ItemService,\r\n    private editRoutingSvc: EditRoutingService,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    // change detection inside note template seems to be independent of this component and without forcing checks\r\n    // throws ExpressionChangedAfterItHasBeenCheckedError\r\n    (this.noteRef?._containerInstance as any)?._changeDetectorRef?.detectChanges();\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Update the notes whenever a child form is closed\r\n    this.#dialogRouter.doOnDialogClosed(() => this.#fetchNote());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.noteRef?.close();\r\n  }\r\n\r\n  toggleCollapse() {\r\n    this.collapse = !this.collapse;\r\n  }\r\n\r\n  toggleSlotIsEmpty() {\r\n    const entityGuid = this.entityGuid();\r\n    const oldHeader = this.itemSvc.getItemHeader(entityGuid);\r\n    const newHeader: ItemIdentifierHeader = {\r\n      ...oldHeader,\r\n      IsEmpty: !oldHeader.IsEmpty,\r\n    };\r\n    const l = this.log.fn('toggleSlotIsEmpty', { oldHeader, newHeader });\r\n    this.itemSvc.updater.updateItemHeader(entityGuid, newHeader);\r\n    l.end();\r\n  }\r\n\r\n  openHistory() {\r\n    const item = this.itemSvc.get(this.entityGuid());\r\n    this.#versioningReloader.watchToRefreshOnVersionsClosed();\r\n    this.#dialogRouter.navRelative([`versions/${item.Entity.Id}`]);\r\n  }\r\n\r\n  toggleNote(event: Event) {\r\n    const isOpen = this.noteRef?.getState() === MatDialogState.OPEN;\r\n    if (event.type === 'pointerenter' && this.noteTouched == false) this.openNote();\r\n    else if (event.type === 'pointerleave' && this.noteTouched == false) this.noteRef?.close();\r\n    else if (event.type === 'click' && isOpen) {\r\n      if (this.noteTouched == false)\r\n        this.noteTouched = true;\r\n      else {\r\n        this.noteRef?.close();\r\n        this.noteTouched = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  openNote() {\r\n    const triggerPosition = this.noteTriggerRef.nativeElement.getBoundingClientRect();\r\n    this.noteRef = this.matDialog.open(this.noteTemplateRef, {\r\n      autoFocus: false,\r\n      hasBackdrop: false,\r\n      disableClose: true,\r\n      restoreFocus: false,\r\n      closeOnNavigation: false,\r\n      position: {\r\n        top: `${triggerPosition.bottom}px`,\r\n        left: `${triggerPosition.left - 200}px`,\r\n      },\r\n      viewContainerRef: this.viewContainerRef,\r\n      panelClass: 'note-dialog',\r\n    });\r\n  }\r\n\r\n  editNote(note?: EavEntity) {\r\n    const entityGuid = this.entityGuid();\r\n    const l = this.log.fn('editNote', { note });\r\n    const item = this.itemSvc.get(entityGuid);\r\n    if (item.Entity.Id === 0) {\r\n      l.end('Item not saved yet, ID = 0');\r\n      return;\r\n    }\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        note == null\r\n          ? EditPrep.newMetadata(entityGuid, eavConstants.contentTypes.notes, eavConstants.metadata.entity, true)\r\n          : EditPrep.editId(note.Id),\r\n      ],\r\n    };\r\n    this.editRoutingSvc.open(null, null, form);\r\n  }\r\n\r\n  deleteNote(note: EavEntity) {\r\n    const language = this.formConfig.language();\r\n    const title = new EntityReader(language).getBestValue(note.Attributes.Title); // LocalizationHelpers.translate(language, note.Attributes.Title, null);\r\n    const id = note.Id;\r\n    if (!confirm(this.#translate.instant('Data.Delete.Question', { title, id })))\r\n      return;\r\n    this.#entitySvc.delete(this.formConfig.config.appId, eavConstants.contentTypes.notes, note.Id, false).subscribe(() => {\r\n      this.noteRef?.close();\r\n      this.#fetchNote();\r\n    });\r\n  }\r\n\r\n  #fetchNote() {\r\n    const entityGuid = this.entityGuid();\r\n    const item = this.itemSvc.get(entityGuid);\r\n    const l = this.log.fnIf('fetchNote', { entityGuid, item, id: item.Entity.Id });\r\n    if (item.Entity.Id === 0)\r\n      return l.end('no change');\r\n\r\n    const editItems = [EditPrep.editId(item.Entity.Id)];\r\n    this.#formDataSvc.fetchFormData(JSON.stringify(editItems))\r\n      .subscribe(formData => {\r\n        const l2 = this.log.fn('noteFormData', { formData });\r\n        // Check if the item is still in the service being edited, as it could have been flushed when this triggers on version-restore\r\n        if (!this.itemSvc.get(entityGuid))\r\n          return l2.end(`Item ${entityGuid} not found in service, was probably flushed for reload`);\r\n\r\n        // Parse and update the note metadata\r\n        const items = formData.Items.map(i => EavItem.convert(i));\r\n        this.itemSvc.updater.updateItemMetadata(entityGuid, items[0].Entity.Metadata);\r\n        this.#retriggerNoteProps.set(true);\r\n        l2.end('updated note');\r\n      });\r\n    l.end('started note-loading');\r\n  }\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { EntityReader } from '../shared/helpers';\r\nimport { EavEntity, EavFor } from '../shared/models/eav';\r\nimport { NoteProps } from './note-props.model';\r\n\r\nexport function getItemForTooltip(itemFor: EavFor, translate: TranslateService) {\r\n  if (!itemFor) return;\r\n  return translate.instant('Form.Buttons.Metadata.Tip')\r\n    + `\\nTarget: ${itemFor.Target}`\r\n    + `\\nTargetType: ${itemFor.TargetType}`\r\n    + (itemFor.Number ? `\\nNumber: ${itemFor.Number}` : '')\r\n    + (itemFor.String ? `\\nString: ${itemFor.String}` : '')\r\n    + (itemFor.Guid ? `\\nGuid: ${itemFor.Guid}` : '')\r\n    + (itemFor.Title ? `\\nTitle: ${itemFor.Title}` : '');\r\n}\r\n\r\nexport function getNoteProps(note: EavEntity, language: FormLanguage, itemNotSaved: boolean): NoteProps {\r\n  const noteProps: NoteProps = {\r\n    note,\r\n    tooltip: itemNotSaved ? 'Form.Buttons.Note.ItemNotSaved' : 'Form.Buttons.Note.Add',\r\n    triggerClass: `no-note ${itemNotSaved ? 'item-not-saved' : ''}`,\r\n    iconName: 'sticky_note_2',\r\n    noteClass: '',\r\n    noteHtml: undefined,\r\n    itemNotSaved,\r\n  };\r\n  if (!note) { return noteProps; }\r\n\r\n  noteProps.tooltip = undefined;\r\n  const reader = new EntityReader(language);\r\n  noteProps.noteHtml = reader.getBestValue(note.Attributes.Note);\r\n\r\n  const noteType = reader.getBestValue(note.Attributes.NoteType);\r\n  if (noteType === 'note') {\r\n    noteProps.triggerClass = 'has-note';\r\n  } else if (noteType === 'warning') {\r\n    noteProps.triggerClass = 'has-warning';\r\n    noteProps.iconName = 'warning';\r\n    noteProps.noteClass = 'warning';\r\n  }\r\n  return noteProps;\r\n}\r\n\r\nexport function buildContentTypeFeatures(contentTypeFeatures: string): Record<string, boolean> {\r\n  const features = contentTypeFeatures\r\n    .split('\\n')\r\n    .reduce((result, contentTypeFeature) => {\r\n      if (!contentTypeFeature)\r\n        return result;\r\n      const nameAndValue = contentTypeFeature.split('=');\r\n      const name = nameAndValue[0];\r\n      const value = nameAndValue[1] === 'true';\r\n      result[name] = value;\r\n      return result;\r\n    }, {} as Record<string, boolean>);\r\n  return features;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { combineLatest, distinctUntilChanged, map, startWith } from 'rxjs';\r\nimport { classLog } from '../../shared/logging';\r\nimport { mapUntilChanged } from '../../shared/rxJs/mapUntilChanged';\r\nimport { ServiceBase } from '../../shared/services/service-base';\r\nimport { FormConfigService } from '../form/form-config.service';\r\nimport { FormsStateService } from '../form/forms-state.service';\r\nimport { FieldValueHelpers } from '../shared/helpers/field-value.helpers';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { ItemService } from '../state/item.service';\r\nimport { EntityFormStateService } from './entity-form-state.service';\r\n\r\n/**\r\n * A Service to ....\r\n * \r\n * Important: This is specific to a single entity.\r\n */\r\n@Injectable()\r\nexport class EntityFormSyncService extends ServiceBase {\r\n\r\n  log = classLog({EntityFormSyncService});\r\n\r\n  constructor(\r\n    private entityFormSvc: EntityFormStateService,\r\n    private formsStateSvc: FormsStateService,\r\n    private formConfig: FormConfigService,\r\n    private itemSvc: ItemService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  public setupSync(entityGuid: string) {\r\n    const form = this.entityFormSvc.formGroup;\r\n\r\n    // 1. Sync dirty state upwards\r\n    this.subscriptions.add(\r\n      form.valueChanges.pipe(\r\n        map(() => form.dirty),\r\n        startWith(form.dirty),\r\n        // We can't have distinctUntilChanged because dirty state is not reset on form save.\r\n        // leave this comment and the code below for future reference, so people don't add it back.\r\n        // distinctUntilChanged(),\r\n      ).subscribe(isDirty => {\r\n        this.formsStateSvc.setFormDirty(entityGuid, isDirty);\r\n      })\r\n    );\r\n\r\n    // 2. Sync form-valid state to the global states\r\n    // 2.1. Get the form-valid state\r\n    const formValid$ = form.valueChanges.pipe(\r\n      map(() => !form.invalid),\r\n      startWith(!form.invalid),\r\n      mapUntilChanged(m => m),\r\n    );\r\n\r\n    // 2.2. Get the item header. Note that it will be null during destruction\r\n    const itemHeader$ = this.itemSvc.getItemHeader$(entityGuid);\r\n\r\n    // 2.3. Setup sync\r\n    this.subscriptions.add(\r\n      combineLatest([formValid$, itemHeader$]).pipe(\r\n        mapUntilChanged(([formValid, itemHeader]) => itemHeader?.IsEmpty || formValid),\r\n      ).subscribe(isValid => {\r\n        this.formsStateSvc.setFormValid(entityGuid, isValid);\r\n      })\r\n    );\r\n\r\n    // 3. Sync raw values as they change from the form...\r\n    // TODO: THIS LOOKS a bit fishy, since I think we have another service syncing form values to the controls\r\n    this.subscriptions.add(\r\n      form.valueChanges.pipe(\r\n        map(() => form.getRawValue() as ItemValuesOfLanguage),\r\n        distinctUntilChanged((previous, current) => FieldValueHelpers.getItemValuesChanges(previous, current) == null),\r\n      ).subscribe(formValues => {\r\n        const language = this.formConfig.language();\r\n        this.itemSvc.updater.updateItemAttributesValues(entityGuid, formValues, language);\r\n      })\r\n    );\r\n\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldLogicManager } from '../../fields/logic/field-logic-manager';\r\nimport { FieldLogicWithValueInit } from '../../fields/logic/field-logic-with-init';\r\nimport { AdamCacheService } from '../../shared/adam/adam-cache.service';\r\nimport { ValidationHelpers, ValidationHelperSpecs } from '../../shared/validation/validation.helpers';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { EntityFormStateService } from '../entity-form-state.service';\r\nimport { FieldInitSpecs } from './field-init-specs.model';\r\n\r\n@Injectable()\r\nexport class FormFieldsBuilderService {\r\n\r\n  log = classLog({FormFieldsBuilderService}, null);\r\n\r\n  constructor(\r\n    private fieldsSettingsSvc: FieldsSettingsService,\r\n    private adamCacheSvc: AdamCacheService,\r\n    private formBuilder: UntypedFormBuilder,\r\n    private entityFormConfigSvc: EntityFormStateService,\r\n  ) { }\r\n\r\n  public createFields(entityGuid: string, form: UntypedFormGroup, allFields: FieldInitSpecs[]) {\r\n\r\n    const l = this.log.fn('createFields');\r\n\r\n    // 1. create missing controls - usually just on first cycle\r\n    const fieldsToCreate = allFields.filter(({ inputType, hasControl }) =>\r\n      !InputTypeHelpers.isEmpty(inputType)    // Empty type, skip\r\n      && !hasControl                          // If control already exists, skip\r\n    );\r\n\r\n    this.log.a(`create missing controls ${fieldsToCreate.length} of ${allFields.length}`, { fieldsForNgForm: fieldsToCreate });\r\n\r\n    // Generate any fields which don't exist yet (usually only on first cycle)\r\n    for (const fields of fieldsToCreate) {\r\n      const { name: fieldName, props: fieldProps, inputType, value } = fields;\r\n      // The initial value at the moment the control is first created in this language\r\n      let initialValue = value;\r\n\r\n      // Special treatment for wysiwyg fields\r\n      // Note by 2dm 2024-08-19 - not sure if this actually works, because the changed buildValue is maybe never reused\r\n      // ...except for directly below\r\n      if (inputType === InputTypeCatalog.StringWysiwyg && initialValue) {\r\n        const logic = FieldLogicManager.singleton().get(InputTypeCatalog.StringWysiwyg);\r\n        const adamItems = this.adamCacheSvc.getAdamSnapshot(entityGuid, fieldName);\r\n        fields.value = initialValue = (logic as unknown as FieldLogicWithValueInit).processValueOnLoad(initialValue, adamItems);\r\n      }\r\n\r\n      // Build control in the Angular form with validators\r\n      const disabled = fieldProps.settings.uiDisabled;\r\n      const fss = this.fieldsSettingsSvc;\r\n      const valSpecs = new ValidationHelperSpecs(fieldName, inputType, fss.settings[fieldName], fss.fieldProps[fieldName], () => fss.pickerData);\r\n      const validators = ValidationHelpers.getValidators(valSpecs, inputType);\r\n      const newControl = this.formBuilder.control({ disabled, value: initialValue }, validators);\r\n      // TODO: build all fields at once. That should be faster\r\n      form.addControl(fieldName, newControl);\r\n    }\r\n\r\n    this.entityFormConfigSvc.controlsCreated.set(true);\r\n    l.end();\r\n  }\r\n}\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { ServiceBase } from '../../../shared/services/service-base';\r\nimport { FieldValueHelpers } from '../../shared/helpers/field-value.helpers';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldInitSpecs } from './field-init-specs.model';\r\nimport { UiControl } from '../../shared/controls/ui-control';\r\n\r\nconst logSpecs = {\r\n  keepFieldsAndStateInSync: true,\r\n};\r\n\r\n@Injectable()\r\nexport class FormFieldsSyncService extends ServiceBase {\r\n\r\n  log = classLog({FormFieldsSyncService}, logSpecs);\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  keepFieldsAndStateInSync(form: UntypedFormGroup, fieldsToProcess: Observable<FieldInitSpecs[]>) {\r\n    const l = this.log.fnIf('keepFieldsAndStateInSync');\r\n    // This has multiple features, possibly we should separate them\r\n    // 2. Sync values between form and fieldProps - eg. on value changes which are from formulas\r\n    // 3. Ensure disabled state is in sync eg. after settings recalculations\r\n    // 4. Ensure validators are run in such scenarios\r\n    this.subscriptions.add(\r\n      fieldsToProcess.subscribe(allFields => {\r\n        // Figure out which fields may require further processing\r\n        const fieldsOnForm = allFields.filter(set => set.hasControl);\r\n\r\n        // 2. sync values - create list comparing the old raw values and new fieldProps - eg. modified by formulas\r\n        l.a(`sync values for max ${fieldsOnForm.length} controls`);\r\n        const oldValues: ItemValuesOfLanguage = form.getRawValue();\r\n        const newValues: ItemValuesOfLanguage = {};\r\n        for (const { name: fieldName, value } of fieldsOnForm)\r\n          newValues[fieldName] = value;\r\n\r\n        const changes = FieldValueHelpers.getItemValuesChanges(oldValues, newValues);\r\n        if (changes != null) {\r\n          l.a(`patching form as it changed (${Object.keys(changes).length}`, { changes, oldValues, newValues })\r\n          // controls probably don't need to set touched and dirty for this kind of update.\r\n          // This update usually happens for language change, formula or updates on same entity in another Edit Ui.\r\n          // In case controls should be updated, update with control.markAsTouched and control.markAsDirty.\r\n          // Marking the form will not mark controls, but marking controls marks the form\r\n          form.patchValue(changes);\r\n        } else\r\n          l.a('no changes detected', { oldValues, newValues });\r\n\r\n        // 3. sync disabled if state not matching\r\n        // Important: Fires valueChange event for every single control\r\n        l.a('sync \"disabled\" state');\r\n        for (const { control, props } of fieldsOnForm)\r\n          UiControl.disable(control, props.settings.uiDisabled);\r\n\r\n        // 4. run validators - required because formulas can recalculate validators and if value doesn't change, new validator will not run\r\n        l.a('run validators');\r\n        for (const { control } of fieldsOnForm)\r\n          control.updateValueAndValidity();\r\n      })\r\n    );\r\n\r\n    l.end();\r\n  }\r\n}\r\n","import { Component, inject, Injector, input, OnDestroy, OnInit } from '@angular/core';\r\nimport { toObservable } from '@angular/core/rxjs-interop';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { filter, map, Observable, take } from 'rxjs';\r\nimport { transient } from '../../../../../../core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FormulaDesignerService } from '../../formulas/designer/formula-designer.service';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { FieldsTranslateService } from '../../state/fields-translate.service';\r\nimport { EntityFormComponent } from '../entity-form-component/entity-form.component';\r\nimport { EntityFormStateService } from '../entity-form-state.service';\r\nimport { EntityFormSyncService } from '../entity-form-sync.service';\r\nimport { FieldInitSpecs } from './field-init-specs.model';\r\nimport { FormFieldsBuilderService } from './form-fields-builder.service';\r\nimport { FormFieldsSyncService } from './form-fields-sync.service';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  getFieldsToProcess: false,\r\n  ngOnInit: false,\r\n  ['fieldsToProcess$']: true,\r\n}\r\n\r\n@Component({\r\n    selector: 'app-edit-entity-form-builder',\r\n    templateUrl: './form-builder.component.html',\r\n    styleUrls: ['./form-builder.component.scss'],\r\n    imports: [\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        EntityFormComponent,\r\n    ],\r\n    providers: [\r\n        FieldsSettingsService, // used for all field settings - must be shared from here\r\n        FieldsTranslateService, // used for field translations and uses FieldsSettingsService, so also shared here\r\n        EntityFormStateService, // used for sharing information about this entity form\r\n    ]\r\n})\r\nexport class EntityFormBuilderComponent implements OnInit, OnDestroy {\r\n  entityGuid = input<string>();\r\n  index = input<number>();\r\n\r\n  log = classLog({EntityFormBuilderComponent}, logSpecs);\r\n\r\n  /** Inject the form state service to start it here */\r\n  #formStateSvc = inject(EntityFormStateService);\r\n\r\n  #formulaDesignerService = inject(FormulaDesignerService);\r\n  #fieldsTranslateSvc = inject(FieldsTranslateService);\r\n  #fieldsSettingsSvc = inject(FieldsSettingsService);\r\n  #injector = inject(Injector);\r\n\r\n  // Transient services\r\n  #formFieldsBuilderService = transient(FormFieldsBuilderService);\r\n  #fieldsSyncSvc = transient(FormFieldsSyncService);\r\n  #formSyncSvc = transient(EntityFormSyncService);\r\n\r\n  constructor() { }\r\n\r\n  public form = this.#formStateSvc.formGroup;\r\n\r\n  ngOnInit() {\r\n    const entityGuid = this.entityGuid();\r\n    const l = this.log.fnIf('ngOnInit', { entityGuid });\r\n    this.#fieldsSettingsSvc.init(entityGuid);\r\n    this.#formulaDesignerService.itemSettingsServices[entityGuid] = this.#fieldsSettingsSvc;\r\n    this.#fieldsTranslateSvc.init(entityGuid);\r\n\r\n    const fields$ = this.#getFieldsToProcess$(entityGuid);\r\n\r\n    // Create all the controls in the form right at the beginning\r\n    fields$.pipe(take(1)).subscribe(allFields => this.#formFieldsBuilderService.createFields(entityGuid, this.form, allFields));\r\n\r\n    this.#fieldsSyncSvc.keepFieldsAndStateInSync(this.form, fields$);\r\n\r\n    // Sync state to parent: dirty, isValid, value changes\r\n    this.#formSyncSvc.setupSync(entityGuid);\r\n\r\n    l.end();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#fieldsSettingsSvc.disableForCleanUp();\r\n  }\r\n\r\n  #getFieldsToProcess$(entityGuid: string): Observable<FieldInitSpecs[]> {\r\n    const l = this.log.fnIf('getFieldsToProcess', null, entityGuid);\r\n    const form = this.form;\r\n\r\n    const allProps = this.#fieldsSettingsSvc.allProps;\r\n    const allProps$ = toObservable(allProps, { injector: this.#injector });\r\n\r\n    // 1. Prepare: Take field props and enrich initial values and input types\r\n    const fieldsToProcess: Observable<FieldInitSpecs[]> = allProps$\r\n      .pipe(\r\n        filter(fields => fields != null && Object.keys(fields).length > 0),\r\n        map(allFields => {\r\n          const fields: FieldInitSpecs[] = Object.entries(allFields)\r\n            .map(([name, props]) => {\r\n              const hasControl = form.controls.hasOwnProperty(name);\r\n              const control = hasControl ? form.controls[name] : null;\r\n              return {\r\n                name,\r\n                props,\r\n                inputType: props.constants.inputTypeSpecs.inputType,\r\n                value: props.value,\r\n                hasControl,\r\n                control,\r\n              } satisfies FieldInitSpecs;\r\n            });\r\n          this.log.aIf('fieldsToProcess$', { entityGuid, fields });\r\n          return fields;\r\n        }),\r\n      );\r\n    return l.rSilent(fieldsToProcess);\r\n  }\r\n}\r\n","<form class=\"dynamic-form\" [formGroup]=\"form\">\r\n  <app-edit-entity-form [entityGuid]=\"entityGuid()\" [index]=\"index()\"></app-edit-entity-form>\r\n</form>\r\n","import { EavField } from '../eav';\r\n\r\n/**\r\n * A JSON representation of EavValues.\r\n * The keys are a string containing a CSV list of assigned dimensions, the values are the values.\r\n * This is a DTO (Data Transfer Object).\r\n */\r\nexport class EavValuesDto<T> {\r\n  [languages: string]: T;\r\n\r\n  static valuesToDto<T>(eavValues: EavField<T>): EavValuesDto<T> {\r\n    const dtoValue: EavValuesDto<T> = {};\r\n    for (const value of eavValues.Values) {\r\n      const dimensions = value.Dimensions.map(dimension => dimension.Value).join();\r\n      dtoValue[dimensions] = value.Value;\r\n    }\r\n    return dtoValue;\r\n  }\r\n}\r\n","import { EavAttributesOfTypeDto, EavValuesDto } from '.';\r\nimport { EavEntityAttributes } from '../eav';\r\n\r\n/**\r\n * A JSON representation of EavAttributes.\r\n * It's basically a list containing each type (string, number, etc.).\r\n * That then contains an array of all the attributes of that type.\r\n * This is a DTO (Data Transfer Object).\r\n */\r\nexport class EavAttributesDto {\r\n  [attributeType: string]: EavAttributesOfTypeDto<any>;\r\n\r\n  static attributesToDto(attributes: EavEntityAttributes): EavAttributesDto {\r\n    const attributesDto: EavAttributesDto = {};\r\n\r\n    for (const [name, values] of Object.entries(attributes)) {\r\n      const type = values.Type;\r\n      if (attributesDto[type] == null) {\r\n        attributesDto[type] = {};\r\n      }\r\n      attributesDto[type][name] = EavValuesDto.valuesToDto(values);\r\n    }\r\n    return attributesDto;\r\n  }\r\n}\r\n","import { EavAttributesDto } from '.';\r\nimport { EavEntity, EavFor, EavType } from '../eav';\r\n\r\n/**\r\n * A JSON representation of an EavEntity.\r\n * This is a DTO (Data Transfer Object).\r\n */\r\nexport class EavEntityDto {\r\n  Attributes: EavAttributesDto;\r\n  Guid: string;\r\n  Id: number;\r\n  Owner: string;\r\n  Type: EavType;\r\n  Version: number;\r\n  For?: EavFor;\r\n  Metadata?: EavEntityDto[];\r\n\r\n  static entityToDto(entity: EavEntity): EavEntityDto {\r\n    const attributesDto = EavAttributesDto.attributesToDto(entity.Attributes);\r\n    const metadataDto = this.entitiesToDto(entity.Metadata);\r\n\r\n    const entityDto: EavEntityDto = {\r\n      Attributes: attributesDto,\r\n      Guid: entity.Guid,\r\n      Id: entity.Id,\r\n      Owner: entity.Owner,\r\n      Type: entity.Type,\r\n      Version: entity.Version,\r\n      For: entity.For,\r\n      Metadata: metadataDto,\r\n    };\r\n    return entityDto;\r\n  }\r\n\r\n  private static entitiesToDto(entities: EavEntity[]): EavEntityDto[] {\r\n    if (entities == null) { return null; }\r\n\r\n    const entities1 = entities.map(entity => EavEntityDto.entityToDto(entity));\r\n    return entities1;\r\n  }\r\n}\r\n","import { EavEntityDto } from '.';\r\nimport { EavItem } from '../eav';\r\nimport { ItemIdentifierHeader } from '../../../../shared/models/edit-form.model';\r\n\r\n/**\r\n * A bundle/set for an Entity.\r\n * Contains the Entity and the Header.\r\n * This is a DTO (Data Transfer Object).\r\n */\r\nexport class EavEntityBundleDto {\r\n  Entity: EavEntityDto;\r\n  Header: ItemIdentifierHeader;\r\n\r\n  static bundleToDto(item: EavItem): EavEntityBundleDto {\r\n    const entity1 = EavEntityDto.entityToDto(item.Entity);\r\n\r\n    const bundleDto: EavEntityBundleDto = {\r\n      Entity: entity1,\r\n      Header: item.Header,\r\n    };\r\n    return bundleDto;\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Preview of Features which are not Licensed</mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <p>\r\n      99% of all features in 2sxc are free. But some very advanced features are only for patrons (supporters) and enterprise customers. You\r\n      are permitted to try these features, but to really use them you must get a license.\r\n    </p>\r\n    <p>\r\n      This message should remind you  of that.\r\n      <br />\r\n      Please contact your account manager to get them licensed, or visit the\r\n      <a href=\"https://patrons.2sxc.org/\" target=\"_blank\">patrons</a> to learn more.\r\n    </p>\r\n    <p>The following features are currently in preview:</p>\r\n    @for (feature of features(); track feature.nameId) {\r\n      <app-feature-details-dialog\r\n        [specs]=\"{ feature: feature, showGuid: false, showStatus: true, showClose: false }\"\r\n      ></app-feature-details-dialog>\r\n      <br />\r\n    }\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { Component, inject, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { transient } from '../../../../../core';\r\nimport { FeatureDetailsDialogComponent } from '../../apps-management/licence-info/feature-details-dialog/feature-details-dialog.component';\r\nimport { classLog, commonSpecs } from '../../shared/logging';\r\nimport { FeaturesService } from '../features.service';\r\nimport { FeatureDetailService } from '../services/feature-detail.service';\r\n\r\nconst logSpecs = {\r\n  ...commonSpecs,\r\n  unlicensedFeatures: false,\r\n};\r\n\r\n@Component({\r\n    selector: 'app-features-used-but-unlicensed-dialog',\r\n    templateUrl: './features-used-but-unlicensed-dialog.component.html',\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        TranslateModule,\r\n        FeatureDetailsDialogComponent,\r\n    ]\r\n})\r\nexport class FeaturesUsedButUnlicensedComponent {\r\n\r\n  log = classLog({ FeaturesUsedButUnlicensedComponent }, logSpecs);\r\n\r\n  #features = inject(FeaturesService);\r\n\r\n  #featureDetails = transient(FeatureDetailService);\r\n\r\n  constructor() {\r\n    const l = this.log.fnIf('constructor');\r\n  }\r\n\r\n  protected features = this.#featureDetails.getFeatureDetails(this.#features.unlicensedFeatures());\r\n\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param dialog\r\n * @param viewContainerRef the container ref is important to get services (eg. features) from the parent component\r\n */\r\nexport function openFeaturesUsedButUnlicensedDialog(dialog: MatDialog, viewContainerRef: ViewContainerRef) {\r\n  dialog.open(FeaturesUsedButUnlicensedComponent, {\r\n    autoFocus: false,\r\n    viewContainerRef: viewContainerRef,\r\n    width: '600px',\r\n  });\r\n}\r\n","import { NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { Of } from '../../../../../../../core';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { FormPublishingService } from '../../../form/form-publishing.service';\r\nimport { PublishModes } from '../../main/edit-dialog-main.models';\r\nimport { isCtrlS } from '../../main/keyboard-shortcuts';\r\n\r\n\r\n@Component({\r\n    selector: 'app-publish-status-dialog',\r\n    templateUrl: './publish-status-dialog.component.html',\r\n    styleUrls: ['./publish-status-dialog.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        MatListModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        TranslateModule,\r\n    ]\r\n})\r\nexport class PublishStatusDialogComponent {\r\n  PublishModes = PublishModes;\r\n\r\n  protected publishMode = this.publishStatusService.getPublishMode(this.formConfig.config.formId)\r\n  protected options = this.formConfig.config.versioningOptions;\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<PublishStatusDialogComponent>,\r\n    private publishStatusService: FormPublishingService,\r\n    private formConfig: FormConfigService,\r\n  ) {\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlS(event))\r\n        event.preventDefault();\r\n    });\r\n  }\r\n\r\n  setPublishMode(publishMode: Of<typeof PublishModes>) {\r\n    this.publishStatusService.setPublishMode(publishMode, this.formConfig.config.formId, this.formConfig);\r\n    this.closeDialog();\r\n  }\r\n\r\n  private closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>{{ 'PublishStatus.Dialog.Title' | translate }}</mat-card-title>\r\n    <mat-card-subtitle>{{ 'PublishStatus.Dialog.Intro' | translate }}</mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content class=\"eav-card-content__no-padding\">\r\n    <mat-nav-list toggle>\r\n      <mat-list-item lines=\"3\" (click)=\"setPublishMode(PublishModes.Show)\"\r\n        [disabled]=\"options[PublishModes.Show] !== true\"\r\n        [ngClass]=\"{ 'eav-list-item__focus': publishMode() === PublishModes.Show }\">\r\n        <mat-icon matListItemIcon>visibility</mat-icon>\r\n        <span matListItemTitle>{{ 'PublishStatus.Dialog.Show.Title' | translate }}</span>\r\n        <span>{{ 'PublishStatus.Dialog.Show.Body' | translate }}</span>\r\n      </mat-list-item>\r\n      <mat-list-item lines=\"3\" (click)=\"setPublishMode(PublishModes.Hide)\"\r\n        [disabled]=\"options[PublishModes.Hide] !== true\"\r\n        [ngClass]=\"{ 'eav-list-item__focus': publishMode() === PublishModes.Hide }\">\r\n        <mat-icon matListItemIcon>visibility_off</mat-icon>\r\n        <span matListItemTitle>{{ 'PublishStatus.Dialog.Hide.Title' | translate }}</span>\r\n        <span>{{ 'PublishStatus.Dialog.Hide.Body' | translate }}</span>\r\n      </mat-list-item>\r\n      <mat-list-item lines=\"3\" (click)=\"setPublishMode(PublishModes.Branch)\"\r\n        [disabled]=\"options[PublishModes.Branch] !== true\"\r\n        [ngClass]=\"{ 'eav-list-item__focus': publishMode() === PublishModes.Branch }\">\r\n        <mat-icon matListItemIcon svgIcon=\"draft-branch\"></mat-icon>\r\n        <span matListItemTitle>{{ 'PublishStatus.Dialog.Branch.Title' | translate }}</span>\r\n        <span>{{ 'PublishStatus.Dialog.Branch.Body' | translate }}</span>\r\n      </mat-list-item>\r\n    </mat-nav-list>\r\n  </mat-card-content>\r\n</mat-card>\r\n","<mat-card class=\"eav-header\">\r\n  <!-- Close button to the left -->\r\n  <button\r\n    mat-icon-button\r\n    class=\"eav-exit-button\"\r\n    (click)=\"close()\"\r\n    [tippyTranslate]=\"'Form.Buttons.' + (config.isParentDialog ? 'Exit' : 'Return') + '.Tip'\"\r\n  >\r\n    <mat-icon class=\"eav-icon\">{{ config.isParentDialog ? 'clear' : 'arrow_back' }}</mat-icon>\r\n  </button>\r\n\r\n  <!-- Language Bar (if used). The empty div is always needed because ATM the alignment would otherwise be off (should fix) -->\r\n  <div class=\"eav-languages\">\r\n    @if (hasLanguages()) {\r\n      @defer {\r\n        <app-language-switcher [disabled]=\"disabled()\"></app-language-switcher>\r\n      }\r\n    }\r\n  </div>\r\n\r\n  <!-- END -->\r\n  @if (readOnly().isReadOnly) {\r\n    <mat-icon class=\"eav-hint-icon\" [tippyTranslate]=\"'General.ReadOnlyHint.' + readOnly().reason\"> lock </mat-icon>\r\n  }\r\n  @if (config.isCopy) {\r\n    <mat-icon class=\"eav-hint-icon\" tippyTranslate=\"General.CopyHint\"> file_copy </mat-icon>\r\n  }\r\n  <button\r\n    mat-button\r\n    class=\"eav-publish-button\"\r\n    [disabled]=\"readOnly().isReadOnly\"\r\n    (click)=\"openPublishStatusDialog()\"\r\n    [tippyTranslate]=\"'PublishStatus.' + publishMode() + '.Tip'\"\r\n  >\r\n    <span class=\"eav-publish-mode\">\r\n      {{ 'PublishStatus.Label' | translate }}\r\n      <b>{{ 'PublishStatus.' + publishMode() | translate | uppercase }}</b>\r\n    </span>\r\n  </button>\r\n  @if (showLicenseWarning()) {\r\n    <button mat-button tippyTranslate=\"License-EditUi-Warning-Tooltip\" (click)=\"openUnlicensedDialog()\">\r\n      {{ 'License-EditUi-Warning-Label' | translate }} \r\n    </button>\r\n  }\r\n</mat-card>\r\n","import { UpperCasePipe } from '@angular/common';\r\nimport { Component, computed, inject, input, output, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { openFeaturesUsedButUnlicensedDialog } from '../../../features/features-used-but-missing-dialog/features-used-but-unlicensed-dialog.component';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormPublishingService } from '../../form/form-publishing.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { LanguageService } from '../../localization/language.service';\r\nimport { LanguageSwitcherComponent } from './language-switcher/language-switcher.component';\r\nimport { PublishStatusDialogComponent } from './publish-status-dialog/publish-status-dialog.component';\r\n\r\n@Component({\r\n    selector: 'app-edit-dialog-header',\r\n    templateUrl: './edit-dialog-header.component.html',\r\n    styleUrls: ['./edit-dialog-header.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        LanguageSwitcherComponent,\r\n        UpperCasePipe,\r\n        TranslateModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class EditDialogHeaderComponent {\r\n  disabled = input<boolean>();\r\n  protected closeDialog = output<void>();\r\n\r\n  #formsStateSvc = inject(FormsStateService);\r\n  #features = inject(FeaturesService);\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private languageService: LanguageService,\r\n    private publishStatusService: FormPublishingService,\r\n    public formConfig: FormConfigService,\r\n  ) { }\r\n\r\n  protected config = this.formConfig.config;\r\n  protected readOnly = this.#formsStateSvc.readOnly;\r\n  protected publishMode = this.publishStatusService.getPublishMode(this.formConfig.config.formId)\r\n\r\n  protected hasLanguages = computed(() => {\r\n    const languages = this.languageService.getAllSignal();\r\n    return languages().length > 0\r\n  });\r\n\r\n  protected showLicenseWarning = this.#features.hasUnlicensedFeatures;\r\n\r\n  close() {\r\n    this.closeDialog.emit();\r\n  }\r\n\r\n  openPublishStatusDialog() {\r\n    this.matDialog.open(PublishStatusDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '350px',\r\n    });\r\n  }\r\n\r\n  openUnlicensedDialog() {\r\n    openFeaturesUsedButUnlicensedDialog(this.matDialog, this.viewContainerRef);\r\n  }\r\n}\r\n","import { Directive, ElementRef, OnDestroy, OnInit } from '@angular/core';\r\nimport { delay, filter, fromEvent, map, merge, pairwise } from 'rxjs';\r\nimport { BaseDirective } from '../../../shared/directives/base.directive';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { mapUntilChanged } from '../../../shared/rxJs/mapUntilChanged';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { LanguageService } from '../../localization/language.service';\r\n\r\nconst classNext = 'next';\r\nconst classPrevious = 'previous';\r\nconst animationNames = ['move-next', 'move-previous'];\r\n\r\n@Directive({\r\n  selector: '[appFormSlide]',\r\n})\r\nexport class FormSlideDirective extends BaseDirective implements OnInit, OnDestroy {\r\n\r\n  log = classLog({FormSlideDirective});\r\n\r\n  constructor(\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    private languageService: LanguageService,\r\n    private formConfig: FormConfigService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    const l = this.log.fn('ngOnInit');\r\n    const languages = this.languageService.getAll();\r\n    const nativeElement = this.elementRef.nativeElement;\r\n    this.subscriptions.add(\r\n      merge(\r\n        // emit 'next' and 'previous' slide direction based on language change\r\n        this.formConfig.language$.pipe(\r\n          map(language => language.current),\r\n          mapUntilChanged(m => m),\r\n          // distinctUntilChanged(),\r\n          pairwise(),\r\n          map(([previousLang, currentLang]) => {\r\n            l.a('toggle', { previousLang, currentLang });\r\n            const prevIndex = languages.findIndex(lang => lang.NameId === previousLang);\r\n            const currentIndex = languages.findIndex(lang => lang.NameId === currentLang);\r\n            const slide = (prevIndex > currentIndex) ? classPrevious : classNext;\r\n            l.a('slide', { prevIndex, currentIndex, slide });\r\n            return slide;\r\n          }),\r\n        ),\r\n        // emit '' to stop the slide animation\r\n        fromEvent<AnimationEvent>(nativeElement, 'animationend').pipe(\r\n          filter(event => animationNames.find(an => event.animationName.endsWith(an)) !== undefined),\r\n          map(() => ''),\r\n          delay(0), // small delay because animationend fires a bit too early\r\n        ),\r\n      ).subscribe(slide => {\r\n        const classList = nativeElement.classList;\r\n        if (slide === '') {\r\n          l.a('stop-slide');\r\n          classList.remove(classNext);\r\n          classList.remove(classPrevious);\r\n        } else {\r\n          l.a(`start-slide to '${slide}'`);\r\n          classList.add(slide);\r\n        }\r\n      })\r\n    );\r\n  }\r\n}\r\n","<div class=\"save-errors-container\">\r\n  <div>{{ 'Errors.SaveErrors' | translate }}</div>\r\n  <br />\r\n  @for (error of snackBarData.fieldErrors; track error) {\r\n    <div>\r\n      <span>{{ error.field }}<span>: {{ error.message | translate }}</span></span>\r\n    </div>\r\n  }\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_SNACK_BAR_DATA } from '@angular/material/snack-bar';\r\nimport { SaveErrorsSnackBarData } from './snack-bar-save-errors.models';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@Component({\r\n    selector: 'app-snack-bar-save-errors',\r\n    templateUrl: './snack-bar-save-errors.component.html',\r\n    styleUrls: ['./snack-bar-save-errors.component.scss'],\r\n    imports: [TranslateModule]\r\n})\r\nexport class SnackBarSaveErrorsComponent {\r\n  constructor(@Inject(MAT_SNACK_BAR_DATA) public snackBarData: SaveErrorsSnackBarData) { }\r\n}\r\n","import { UpperCasePipe } from '@angular/common';\r\nimport { Component, Inject } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MAT_SNACK_BAR_DATA, MatSnackBarRef } from '@angular/material/snack-bar';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { UnsavedChangesSnackBarData } from './snack-bar-unsaved-changes.models';\r\n\r\n@Component({\r\n    selector: 'app-snack-bar-unsaved-changes',\r\n    templateUrl: './snack-bar-unsaved-changes.component.html',\r\n    styleUrls: ['./snack-bar-unsaved-changes.component.scss'],\r\n    imports: [\r\n        MatButtonModule,\r\n        UpperCasePipe,\r\n        TranslateModule,\r\n        UpperCasePipe\r\n    ]\r\n})\r\nexport class SnackBarUnsavedChangesComponent {\r\n  constructor(\r\n    private snackRef: MatSnackBarRef<SnackBarUnsavedChangesComponent>,\r\n    @Inject(MAT_SNACK_BAR_DATA) private snackBarData: UnsavedChangesSnackBarData,\r\n  ) { }\r\n\r\n  saveChanges(save: boolean) {\r\n    this.snackBarData.save = save;\r\n    this.snackRef.dismissWithAction();\r\n  }\r\n}\r\n","<!-- The message -->\r\n<span class=\"error-message\">\r\n  {{ 'Errors.UnsavedChanges' | translate }}\r\n</span>\r\n\r\n<!-- The save / exit buttons -->\r\n<div class=\"my-flex-right\">\r\n  <button mat-button color=\"primary\" (click)=\"saveChanges(false)\">\r\n    {{ 'General.Buttons.NotSave' | translate | uppercase }}\r\n  </button>\r\n  <button mat-button color=\"primary\" (click)=\"saveChanges(true)\">\r\n    {{ 'General.Buttons.Save' | translate | uppercase }}\r\n  </button>\r\n</div>\r\n","import { CdkScrollable } from '@angular/cdk/scrolling';\r\nimport { NgClass } from '@angular/common';\r\nimport { AfterViewInit, Component, computed, effect, inject, OnDestroy, OnInit, QueryList, signal, untracked, ViewChildren } from '@angular/core';\r\nimport { toSignal } from '@angular/core/rxjs-interop';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { delay, fromEvent, of, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../../core';\r\nimport { BaseComponent } from '../../../shared/components/base.component';\r\nimport { ToggleDebugDirective } from '../../../shared/directives/toggle-debug.directive';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { ExtendedFabSpeedDialImports } from '../../../shared/modules/extended-fab-speed-dial/extended-fab-speed-dial.imports';\r\nimport { GlobalConfigService } from '../../../shared/services/global-config.service';\r\nimport { computedWithPrev } from '../../../shared/signals/signal.utilities';\r\nimport { UserPreferences } from '../../../shared/user/user-preferences.service';\r\nimport { LoadIconsService } from '../../assets/icons/load-icons.service';\r\nimport { EntityFormBuilderComponent } from '../../entity-form/entity-form-builder/form-builder.component';\r\nimport { EntityFormStateService } from '../../entity-form/entity-form-state.service';\r\nimport { PickerTreeDataHelper } from '../../fields/picker/picker-tree/picker-tree-data-helper';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { FormDataService } from '../../form/form-data.service';\r\nimport { FormLanguageService } from '../../form/form-language.service';\r\nimport { FormPublishingService } from '../../form/form-publishing.service';\r\nimport { FormsStateService } from '../../form/forms-state.service';\r\nimport { FormulaDesignerService } from '../../formulas/designer/formula-designer.service';\r\nimport { LanguageService } from '../../localization/language.service';\r\nimport { EditRoutingService } from '../../routing/edit-routing.service';\r\nimport { AdamCacheService } from '../../shared/adam/adam-cache.service';\r\nimport { LinkCacheService } from '../../shared/adam/link-cache.service';\r\nimport { ContentTypeItemService } from '../../shared/content-types/content-type-item.service';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { InputTypeService } from '../../shared/input-types/input-type.service';\r\nimport { EavEntityBundleDto } from '../../shared/models/json-format-v1';\r\nimport { ValidationMsgHelper } from '../../shared/validation/validation-messages.helpers';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { MetadataDecorators } from '../../state/metadata-decorators.constants';\r\nimport { SaveResult } from '../../state/save-result.model';\r\nimport { EditEntryComponent } from '../entry/edit-entry.component';\r\nimport { EditDialogFooterComponent } from '../footer/edit-dialog-footer.component';\r\nimport { footerPreferences } from '../footer/footer-preferences';\r\nimport { EditDialogHeaderComponent } from '../header/edit-dialog-header.component';\r\nimport { SaveEavFormData } from './edit-dialog-main.models';\r\nimport { FormSlideDirective } from './form-slide.directive';\r\nimport { isCtrlS, isEscape } from './keyboard-shortcuts';\r\nimport { SnackBarSaveErrorsComponent } from './snack-bar-save-errors/snack-bar-save-errors.component';\r\nimport { FieldErrorMessage, SaveErrorsSnackBarData } from './snack-bar-save-errors/snack-bar-save-errors.models';\r\nimport { SnackBarUnsavedChangesComponent } from './snack-bar-unsaved-changes/snack-bar-unsaved-changes.component';\r\nimport { UnsavedChangesSnackBarData } from './snack-bar-unsaved-changes/snack-bar-unsaved-changes.models';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: true,\r\n}\r\n\r\n/**\r\n * The edit-main component is the complete edit component containing:\r\n * - Header (which also contains the languages and publish state)\r\n * - Each entity form\r\n * - Footer\r\n */\r\n@Component({\r\n  selector: 'app-edit-dialog-main',\r\n  templateUrl: './edit-dialog-main.component.html',\r\n  styleUrls: ['./edit-dialog-main.component.scss'],\r\n  imports: [\r\n    MatDialogActions,\r\n    NgClass,\r\n    EditDialogHeaderComponent,\r\n    CdkScrollable,\r\n    FormSlideDirective,\r\n    EntityFormBuilderComponent,\r\n    MatRippleModule,\r\n    MatIconModule,\r\n    EditDialogFooterComponent,\r\n    TranslateModule,\r\n    ...ExtendedFabSpeedDialImports,\r\n    ToggleDebugDirective,\r\n  ],\r\n  providers: [\r\n    EditRoutingService,\r\n    FormsStateService,\r\n    // This is shared across all entities on this form\r\n    FormulaDesignerService,\r\n    // TODO: probably move to each picker component (Errors)\r\n    PickerTreeDataHelper,\r\n  ]\r\n})\r\nexport class EditDialogMainComponent extends BaseComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  log = classLog({ EditDialogMainComponent }, logSpecs);\r\n\r\n  @ViewChildren(EntityFormBuilderComponent) formBuilderRefs: QueryList<EntityFormBuilderComponent>;\r\n\r\n  #globalConfigService = inject(GlobalConfigService);\r\n  #formConfig = inject(FormConfigService);\r\n\r\n\r\n  /** Signal to tell the UI if the footer should show and/or the footer needs more space (changes CSS) */\r\n  #prefManager = inject(UserPreferences).part(footerPreferences)\r\n  footerSize = computed(() => this.#prefManager.data().size);\r\n\r\n  #loadIconsService = transient(LoadIconsService);\r\n  #formDataService = transient(FormDataService);\r\n  #entityFormStateService = transient(EntityFormStateService);\r\n\r\n  protected viewInitiated = signal(false);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<EditEntryComponent>,\r\n    private contentTypeItemService: ContentTypeItemService,\r\n    private contentTypeService: ContentTypeService,\r\n    private inputTypeService: InputTypeService,\r\n    private itemService: ItemService,\r\n    private languageService: LanguageService,\r\n    private languageStore: FormLanguageService,\r\n    private snackBar: MatSnackBar,\r\n    private translate: TranslateService,\r\n    private editRoutingService: EditRoutingService,\r\n    private publishStatusService: FormPublishingService,\r\n    private formsStateService: FormsStateService,\r\n    private adamCacheService: AdamCacheService,\r\n    private linkCacheService: LinkCacheService,\r\n    private formulaDesignerService: FormulaDesignerService,\r\n  ) {\r\n    super();\r\n    const l = this.log.fnIf('constructor');\r\n    this.dialog.disableClose = true;\r\n\r\n\r\n    // Initialize default user preferences for footer show/hide\r\n    const pref = this.#prefManager;\r\n    if (pref.data().pinned == null)\r\n      pref.set('pinned', this.#formConfig.config.dialogContext.User?.IsSystemAdmin ?? false);\r\n\r\n    // Watch for the \"try-save\" event from the forms\r\n    effect(() => {\r\n      const current = this.formsStateService.triggerTrySaveAndMaybeClose();\r\n      if (current.tryToSave)\r\n        untracked(() => this.saveAll(current.close));\r\n    });\r\n\r\n  }\r\n\r\n  #saveResult: SaveResult;\r\n\r\n  protected items = this.itemService.getManySignal(this.#formConfig.config.itemGuids);\r\n\r\n  protected formsValid = this.formsStateService.formsValidTemp;\r\n  saveDisabled = computed(() => this.#entityFormStateService.isSaving() || this.formsStateService.saveButtonDisabled());\r\n  protected hideHeader = this.languageStore.getHideHeaderSignal(this.#formConfig.config.formId);\r\n\r\n  //#region Footer - Show once or more, hide again, and expand footer (extra large footer)\r\n\r\n  /** Signal to determine if we should show the footer. Will affect style.display of the footer tag */\r\n  protected footerShow = computed(() => {\r\n    // if debug is true, then it was set once using the keyboard shortcut\r\n    if (this.#globalConfigService.isDebug()) {\r\n      this.#debugWasModified = true;\r\n      return true;\r\n    }\r\n\r\n    // If debug is false, and was never modified, show based on system admin status\r\n    return !this.#debugWasModified && this.#prefManager.data().pinned;\r\n  });\r\n\r\n  /** Show footer once or more - basically stays true if it was ever shown */\r\n  protected footerShowOnceOrMore = computedWithPrev(prev => prev || this.footerShow(), false);\r\n\r\n  /** Special variable to check if debug was ever triggered, to allow super-users to re-hide the footer */\r\n  #debugWasModified = false;\r\n\r\n\r\n  //#endregion\r\n\r\n  /** delay showing the form, but not quite sure why. maybe to prevent flickering? */\r\n  protected delayForm = toSignal(\r\n    of(false).pipe(\r\n      delay(0),\r\n      startWith(true)\r\n    ));\r\n\r\n\r\n  ngOnInit() {\r\n    this.editRoutingService.init();\r\n    this.#loadIconsService.load();\r\n    this.formulaDesignerService.cache.init();\r\n\r\n    this.#startSubscriptions();\r\n    this.#watchKeyboardShortcuts();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => this.viewInitiated.set(true));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.languageStore.remove(this.#formConfig.config.formId);\r\n    this.publishStatusService.remove(this.#formConfig.config.formId);\r\n\r\n    if (this.#formConfig.config.isParentDialog) {\r\n      // clear the rest of the store\r\n      this.languageStore.clearCache();\r\n      this.languageService.clearCache();\r\n      this.itemService.clearCache();\r\n      this.inputTypeService.clearCache();\r\n      this.contentTypeItemService.clearCache();\r\n      this.contentTypeService.clearCache();\r\n      this.publishStatusService.clearCache();\r\n      this.adamCacheService.clearCache();\r\n      this.linkCacheService.clearCache();\r\n    }\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog(forceClose?: boolean): void {\r\n    if (forceClose)\r\n      return this.dialog.close(this.#formConfig.config.createMode ? this.#saveResult : undefined);\r\n\r\n    if (!this.formsStateService.readOnly().isReadOnly && this.formsStateService.formsAreDirty())\r\n      return this.#snackBarYouHaveUnsavedChanges();\r\n\r\n    this.dialog.close(this.#formConfig.config.createMode ? this.#saveResult : undefined);\r\n  }\r\n\r\n  /** Save all forms */\r\n  saveAll(close: boolean): boolean {\r\n    this.#entityFormStateService.isSaving.set(true);\r\n\r\n    const l = this.log.fn('saveAll', { close });\r\n    if (this.formsStateService.formsAreValid()) {\r\n      // #1 Case form is valid\r\n\r\n      const items = this.formBuilderRefs\r\n        .map(formBuilderRef => {\r\n          const eavItem = this.itemService.get(formBuilderRef.entityGuid());\r\n          const isValid = this.formsStateService.getFormValid(eavItem.Entity.Guid);\r\n          if (!isValid)\r\n            return null;\r\n\r\n          // do not try to save item which doesn't have any fields, nothing could have changed about it\r\n          // but enable saving if there is a special metadata\r\n          const hasAttributes = Object.keys(eavItem.Entity.Attributes).length > 0;\r\n          const contentType = this.contentTypeService.getContentTypeOfItem(eavItem);\r\n          const saveIfEmpty = contentType.Metadata.some(m => m.Type.Name === MetadataDecorators.SaveEmptyDecorator);\r\n          if (!hasAttributes && !saveIfEmpty)\r\n            return null;\r\n\r\n          const item = EavEntityBundleDto.bundleToDto(eavItem);\r\n          return item;\r\n        })\r\n        .filter(item => item != null);\r\n\r\n      const publishStatus = this.publishStatusService.get(this.#formConfig.config.formId);\r\n\r\n      const saveFormData: SaveEavFormData = {\r\n        Items: items,\r\n        IsPublished: publishStatus.IsPublished,\r\n        DraftShouldBranch: publishStatus.DraftShouldBranch,\r\n      };\r\n      l.a('SAVE FORM DATA:', { saveFormData });\r\n      this.snackBar.open(this.translate.instant('Message.Saving'), null, { duration: 2000 });\r\n\r\n      this.#formDataService.saveFormData(saveFormData, this.#formConfig.config.partOfPage).subscribe({\r\n        next: result => {\r\n          l.a('SAVED!, result:', { result, close });\r\n          this.itemService.updater.updateItemId(result);\r\n          this.snackBar.open(this.translate.instant('Message.Saved'), null, { duration: 2000 });\r\n          this.formsStateService.formsAreDirty.set(false);\r\n          this.#saveResult = result;\r\n          if (close)\r\n            this.closeDialog();\r\n\r\n          setTimeout(() =>\r\n            this.#entityFormStateService.isSaving.set(false)\r\n\r\n            , 500);\r\n\r\n        },\r\n        error: err => {\r\n          l.a('SAVE FAILED:', err);\r\n          this.snackBar.open('Error', null, { duration: 2000 });\r\n          this.#entityFormStateService.isSaving.set(false)\r\n        },\r\n      });\r\n    } else {\r\n      // #2 Case form is not valid\r\n      // Quickly set saving to false, otherwise further saves will be blocked\r\n      this.#entityFormStateService.isSaving.set(false);\r\n\r\n      // check if there is even a formBuilder to process, otherwise exit\r\n      if (this.formBuilderRefs == null)\r\n        return;\r\n\r\n      const formErrors: Record<string, string>[] = [];\r\n      this.formBuilderRefs.forEach(formBuilderRef => {\r\n        if (!formBuilderRef.form.invalid)\r\n          return;\r\n        formErrors.push(ValidationMsgHelper.validateForm(formBuilderRef.form));\r\n      });\r\n\r\n      const fieldErrors: FieldErrorMessage[] = [];\r\n      formErrors.forEach(formError => {\r\n        Object.keys(formError).forEach(key => {\r\n          fieldErrors.push({ field: key, message: formError[key] });\r\n        });\r\n      });\r\n\r\n      this.snackBar.openFromComponent(SnackBarSaveErrorsComponent, {\r\n        data: {\r\n          fieldErrors,\r\n        } satisfies SaveErrorsSnackBarData,\r\n        duration: 5000,\r\n      });\r\n    }\r\n  }\r\n\r\n  #startSubscriptions() {\r\n    this.subscriptions.add(\r\n      fromEvent<BeforeUnloadEvent>(window, 'beforeunload').subscribe(event => {\r\n        if (this.formsStateService.readOnly().isReadOnly || !this.formsStateService.formsAreDirty())\r\n          return;\r\n        event.preventDefault();\r\n        event.returnValue = ''; // fix for Chrome\r\n        this.#snackBarYouHaveUnsavedChanges();\r\n      })\r\n    );\r\n\r\n    this.subscriptions.add(\r\n      this.dialog.backdropClick().subscribe(_ => this.closeDialog())\r\n    );\r\n  }\r\n\r\n  #watchKeyboardShortcuts(): void {\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isEscape(event))\r\n        return this.closeDialog();\r\n\r\n      if (isCtrlS(event)) {\r\n        event.preventDefault();\r\n        if (!this.formsStateService.readOnly().isReadOnly && !this.#entityFormStateService.isSaving())\r\n          this.saveAll(event.altKey);\r\n      }\r\n    });\r\n  }\r\n\r\n  #snackBarYouHaveUnsavedChanges(): void {\r\n    const snackBarRef = this.snackBar.openFromComponent(SnackBarUnsavedChangesComponent, {\r\n      data: {\r\n        save: false,\r\n      } satisfies UnsavedChangesSnackBarData,\r\n      duration: 5000,\r\n    });\r\n\r\n    snackBarRef.onAction().subscribe(() => {\r\n      if ((snackBarRef.containerInstance.snackBarConfig.data as UnsavedChangesSnackBarData).save)\r\n        return this.saveAll(true);\r\n\r\n      this.closeDialog(true);\r\n    });\r\n  }\r\n}\r\n","<div style=\"position: relative\" mat-dialog__container appToggleDebug>\r\n  <div mat-dialog-actions class=\"form-header-container\" [ngClass]=\"{ 'u-display-none': hideHeader() }\">\r\n    <app-edit-dialog-header class=\"multi-item-edit-form-header\" [disabled]=\"!formsValid()\"\r\n      (closeDialog)=\"closeDialog()\">\r\n    </app-edit-dialog-header>\r\n  </div>\r\n  <div style=\"position: relative\">\r\n    <!-- cdkScrollable is required when using matAutocomplete with scrollable element that is not body. Fixes matAutocomplete not following input  -->\r\n    <!-- TODO_(mdc-migration) -->\r\n    <div mat-mdc-dialog-content cdkScrollable class=\"eav-dialog-content u-hide-scrollbar\" [ngClass]=\"{\r\n        'debug-enabled': footerShow(),\r\n        'debug-info-is-open': footerShow() && footerSize(),\r\n        'footer-xl': footerShow() && (footerSize() == 2),\r\n        'hide-header-height-fix': hideHeader()\r\n        }\">\r\n      <div class=\"eav-layout-grid\">\r\n        <div class=\"eav-layout-grid__inner\">\r\n          @if (!delayForm()) {\r\n            <div class=\"eav-layout-grid__cell--span-12\" appFormSlide>\r\n              @for (item of items(); track item.Entity.Guid; let i = $index) {\r\n                <div>\r\n                  <app-edit-entity-form-builder [entityGuid]=\"item.Entity.Guid\" [index]=\"i\"></app-edit-entity-form-builder>\r\n                </div>\r\n              }\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n    @if (viewInitiated()) {\r\n      <extended-fab-speed-dial>\r\n        <ng-template extendedFabSpeedDialTriggerContent>\r\n          <button extended-fab-speed-dial-trigger\r\n            matRipple\r\n            [ngClass]=\"{ 'appear-disabled': saveDisabled() }\"\r\n            (click)=\"saveAll(true)\"\r\n          >\r\n            <mat-icon>done</mat-icon>\r\n            <span>{{ 'Form.Buttons.SaveAndClose' | translate }}</span>\r\n          </button>\r\n        </ng-template>\r\n        <ng-template extendedFabSpeedDialActionsContent>\r\n          <button extended-fab-speed-dial-action\r\n            matRipple\r\n            [ngClass]=\"{ 'appear-disabled': saveDisabled() }\"\r\n            (click)=\"saveAll(false)\"\r\n          >\r\n            <span>{{ 'Form.Buttons.Save' | translate }}</span>\r\n            <mat-icon>save</mat-icon>\r\n          </button>\r\n        </ng-template>\r\n      </extended-fab-speed-dial>\r\n    }\r\n  </div>\r\n  @if (footerShowOnceOrMore()) {\r\n    @defer {\r\n      <app-edit-dialog-footer [style.display]=\"footerShow() ? 'block' : 'none'\" mat-dialog-actions>\r\n      </app-edit-dialog-footer>\r\n    }\r\n  }\r\n</div>\r\n","<router-outlet></router-outlet>\r\n\r\n@if (editInitializerService.loaded()) {\r\n  <app-edit-dialog-main></app-edit-dialog-main>\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { FeaturesService } from '../../../features/features.service';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { Context } from '../../../shared/services/context';\r\nimport { EditInitializerService } from '../../form/edit-initializer.service';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { LoggingService } from '../../shared/services/logging.service';\r\nimport { ScriptsLoaderService } from '../../shared/services/scripts-loader.service';\r\nimport { EditDialogMainComponent } from '../main/edit-dialog-main.component';\r\n\r\n/**\r\n * This component is the entry point for every edit dialog.\r\n * It initializes the form data and the form itself.\r\n *\r\n * Each edit-entry can show multiple entities, as the form can contain multiple sections each having an entity.\r\n * But if a sub-dialog is opened, this will start anew, with it's own provided services etc.\r\n */\r\n@Component({\r\n  selector: 'app-edit-entry',\r\n  templateUrl: './edit-entry.component.html',\r\n  imports: [\r\n    RouterOutlet,\r\n    EditDialogMainComponent,\r\n  ],\r\n  providers: [\r\n    // must be by Providers\r\n    LoggingService,\r\n    // Shared Services across the edit form\r\n    FeaturesService, // for checking if features are enabled - this can change from dialog to dialog\r\n    EditInitializerService, // for loading the data and having it ready downstream\r\n    Context, // Form context, such as what app etc. - the same for the entire form\r\n    FormConfigService, // form configuration valid for this entire form; will be initialized by the EditInitializerService\r\n    ScriptsLoaderService, // Loader for external scripts. Shared as it keeps track of what's been loaded. Maybe should be providedIn: 'root'?\r\n  ]\r\n})\r\nexport class EditEntryComponent implements OnInit {\r\n\r\n  log = classLog({ EditEntryComponent });\r\n\r\n  constructor(protected editInitializerService: EditInitializerService, temp: FeaturesService) {\r\n    this.log.aIf('constructor');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Load the data - when it's loaded, the HTML will show the rest\r\n    this.editInitializerService.fetchFormData();\r\n  }\r\n}\r\n","import { Of } from '../../../../../../core/type-utilities';\r\nimport { DebugTypes } from './edit-dialog-footer.models';\r\n\r\n/**\r\n * User preferences how the footer should be displayed.\r\n */\r\nexport const footerPreferences = {\r\n  key: 'edit-dialog-footer',\r\n  data: {\r\n    /** Which tab is expanded (or none) */\r\n    tab: null as Of<typeof DebugTypes>,\r\n    /**  */\r\n    expanded: false,\r\n    /** Expansion size, as it can be larger (2) */\r\n    size: 0,\r\n    /** If the footer is pinned, e.g. visible on load. If null, will be prefilled with user-host-status */\r\n    pinned: null as boolean,\r\n  }\r\n};\r\n","import { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { classLog, ClassLogger } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { FieldLogicManager } from './field-logic-manager';\r\nimport { FieldLogicTools } from './field-logic-tools';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: true,\r\n  update: true,\r\n  fields: [...DebugFields, 'Icon'],\r\n}\r\n\r\nexport abstract class FieldLogicBase {\r\n\r\n  /** Logger - lazy created on first access if not yet created */\r\n  get log() { return this.#log ??= classLog({FieldLogicBase}, logSpecs).extendName(`[${this.name}]`) };\r\n  \r\n  #log: ClassLogger<typeof logSpecs>;\r\n\r\n  constructor(inheritingClass: Record<string, unknown> | string, logThis?: boolean) {\r\n    this.#log = classLog(inheritingClass ?? {FieldLogicBase}, logSpecs, null, logThis);\r\n    this.name ??= this.#log.name;\r\n    this.log.fnIf('constructor');\r\n  }\r\n\r\n  /** Input type name */\r\n  name: string;\r\n\r\n  /** If this field supports AutoTranslate (new v15.x) */\r\n  public canAutoTranslate = false;\r\n\r\n  /** Adds Logic to FieldLogicManager */\r\n  static add(logic: LogicConstructor) {\r\n    const logicInstance = new logic();\r\n    FieldLogicManager.singleton().add(logicInstance);\r\n  }\r\n\r\n  /** Run this dummy method from component to make sure Logic files are not tree shaken */\r\n  static importMe(): void { }\r\n\r\n  /**\r\n   * Entity fields for empty items are prefilled on the backend with []\r\n   * so I can never know if entity field is brand new, or just emptied out by the user\r\n   * \r\n   * Note: 2dm 2023-08-31 moved from InputFieldHelpers; in future, each logic can override this\r\n   */\r\n  isValueEmpty(value: FieldValue, isCreateMode: boolean): boolean {\r\n    const l = this.log.fn('isValueEmpty', { value, isCreateMode });\r\n    const emptyEntityField = Array.isArray(value) && value.length === 0 && isCreateMode;\r\n    return l.r(value === undefined || emptyEntityField);\r\n  }\r\n\r\n  /** \r\n   * Update field settings - typically used on init and in every formula cycle\r\n   */\r\n  abstract update(updateSpecs: FieldLogicUpdate): FieldSettings;\r\n\r\n  /**\r\n   * Lookup advanced (external) configuration.\r\n   * These are usually stored in the eavConfig.settings.\r\n   * Needs defaults to merge for anything that is not defined in the external config.\r\n   * @param possibleGuid - guid of the external config, if empty, return defaults\r\n   * @param defaults - defaults to merge with external config\r\n   */\r\n  findAndMergeAdvanced<T>(tools: FieldLogicTools, possibleGuid: string, defaults: T): T {\r\n    if (!possibleGuid) return defaults;\r\n\r\n    const wysiwygConfig = tools.eavConfig.settings.Entities.find(e => e.Guid === possibleGuid);\r\n    if (!wysiwygConfig) return defaults;\r\n\r\n    const advanced = tools.reader.flatten(wysiwygConfig) as T;\r\n    return { ...defaults, ...advanced };\r\n  }\r\n}\r\n\r\nexport interface FieldLogicUpdate<T = FieldValue> {\r\n  /** The field name, to better debug */\r\n  fieldName: string;\r\n\r\n  /** Settings before logic update */\r\n  settings: FieldSettings;\r\n\r\n  /** Tools for doing various kind of work in the logic, which is singleton and may need context-specific tools */\r\n  tools: FieldLogicTools;\r\n\r\n  /** The field value which the settings-update sometimes needs to know, eg. to indicated selected option in a dropdown */\r\n  value?: T;\r\n}\r\n\r\ntype LogicConstructor = new (...args: any[]) => FieldLogicBase;","import { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { FieldLogicBase, FieldLogicUpdate } from './field-logic-base';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\n\r\nexport class UnknownLogic extends FieldLogicBase {\r\n  name = InputTypeCatalog.Unknown;\r\n  \r\n  constructor() { super({UnknownLogic}); }\r\n\r\n  canAutoTranslate = false;\r\n\r\n  update({ settings }: FieldLogicUpdate): FieldSettings {\r\n    return settings;\r\n  }\r\n}\r\n\r\n// Don't register here, the manager will register it as a fallback\r\n// FieldLogicBase.add(UnknownLogic);\r\n\r\n","import { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { FieldLogicBase } from './field-logic-base';\r\nimport { UnknownLogic } from './field-logic-unknown';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  get: true,\r\n}\r\n\r\n// declare const window; //: EavWindow;\r\n\r\ndeclare global {\r\n  interface Window {\r\n    eavFieldLogicManager: FieldLogicManager;\r\n  }\r\n}\r\n\r\nexport class FieldLogicManager {\r\n  private logics: Record<string, FieldLogicBase> = {};\r\n\r\n  log = classLog({FieldLogicManager}, logSpecs);\r\n\r\n  private constructor() {\r\n    // add unknown as a fallback for all scenarios\r\n    this.add(new UnknownLogic());\r\n  }\r\n\r\n  static singleton(): FieldLogicManager {\r\n    return window.eavFieldLogicManager ??= new FieldLogicManager();\r\n  }\r\n\r\n  /** Add settings logic */\r\n  add(logic: FieldLogicBase): void {\r\n    this.logics[logic.name] = logic;\r\n  }\r\n\r\n  /** Get settings logic for input type */\r\n  get(inputTypeName: string): FieldLogicBase {\r\n    const l = this.log.fnIf('get', { inputTypeName });\r\n    const r = this.logics[inputTypeName] ?? null;\r\n    return l.r(r);\r\n  }\r\n\r\n  /** Get or use unknown - temporary solution v16.04 to prevent any scenario where there is none */\r\n  getOrUnknown(inputTypeName: string): FieldLogicBase {\r\n    return this.get(inputTypeName) ?? this.get(InputTypeCatalog.Unknown);\r\n  }\r\n}\r\n","import { Of } from '../../../../../../../../core';\r\nimport { TranslationLinks } from '../../../../localization/translation-link.constants';\r\n\r\nexport class TranslateMenuHelpers {\r\n\r\n  static getTranslationStateClass(linkType: Of<typeof TranslationLinks>) {\r\n    switch (linkType) {\r\n      case TranslationLinks.MissingDefaultLangValue:\r\n        return 'localization-missing-default-lang-value';\r\n      case TranslationLinks.Translate:\r\n      case TranslationLinks.LinkCopyFrom:\r\n        return 'localization-translate';\r\n      case TranslationLinks.DontTranslate:\r\n        return '';\r\n      case TranslationLinks.LinkReadOnly:\r\n        return 'localization-link-read-only';\r\n      case TranslationLinks.LinkReadWrite:\r\n        return 'localization-link-read-write';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  static calculateSharedInfoMessage(dimensions: string[], currentLanguage: string): string {\r\n    dimensions = TranslateMenuHelpers.calculateShortDimensions(dimensions, currentLanguage);\r\n    const result = TranslateMenuHelpers.calculateEditAndReadDimensions(dimensions);\r\n    const editableDimensions = result.editableDimensions;\r\n    const readOnlyDimensions = result.readOnlyDimensions;\r\n    let infoMessage = '';\r\n\r\n    const editableExist = editableDimensions.length > 0;\r\n    const readOnlyExist = readOnlyDimensions.length > 0;\r\n    if (editableExist && readOnlyExist) {\r\n      infoMessage = `${editableDimensions.join(', ')}, (${readOnlyDimensions.join(', ')})`;\r\n    } else if (editableExist) {\r\n      infoMessage = editableDimensions.join(', ');\r\n    } else if (readOnlyExist) {\r\n      infoMessage = `(${readOnlyDimensions.join(', ')})`;\r\n    }\r\n\r\n    return infoMessage;\r\n  }\r\n\r\n  private static calculateShortDimensions(dimensions: string[], currentLanguage: string): string[] {\r\n    const dimMap: Record<string, string[]> = {};\r\n    const langCode = currentLanguage.slice(0, currentLanguage.indexOf('-'));\r\n\r\n    dimMap[langCode] = [langCode];\r\n\r\n    dimensions.forEach(dimension => {\r\n      const shortDimension = dimension.slice(0, dimension.indexOf('-'));\r\n      const shortNoReadOnly = shortDimension.replace('~', '');\r\n\r\n      if (!dimMap[shortNoReadOnly]) {\r\n        dimMap[shortNoReadOnly] = [dimension];\r\n      } else {\r\n        dimMap[shortNoReadOnly].push(dimension);\r\n      }\r\n    });\r\n\r\n    dimensions = dimensions.map(dimension => {\r\n      const shortDimension = dimension.slice(0, dimension.indexOf('-'));\r\n      const shortNoReadOnly = shortDimension.replace('~', '');\r\n\r\n      if (dimMap[shortNoReadOnly].length > 1) {\r\n        return dimension;\r\n      } else {\r\n        return shortDimension;\r\n      }\r\n    });\r\n\r\n    return dimensions;\r\n  }\r\n\r\n  private static calculateEditAndReadDimensions(dimensions: string[]) {\r\n    return {\r\n      editableDimensions: [] as string[],\r\n      readOnlyDimensions: dimensions.map(d => d.replace('~', '')),\r\n    };\r\n  }\r\n}\r\n","import { Of } from '../../../../../../core';\r\nimport { FormulaFunction, FormulaVersions, runFormulaPrefix } from '../formula-definitions';\r\n\r\n/**\r\n * Contains methods for building formulas.\r\n */\r\n\r\nexport class FormulaSourceCodeHelper {\r\n  /**\r\n   * Used to clean formula text.\r\n   * @param formula Formula text to clean\r\n   * @returns Cleaned formula text\r\n   */\r\n  static #cleanFormula(formula: string): string {\r\n    if (!formula)\r\n      return formula;\r\n\r\n    // Clean and remove any leading single-line comments\r\n    let cleanFormula = formula.trim();\r\n    if (cleanFormula.startsWith('//'))\r\n      cleanFormula = cleanFormula.replace(/^\\/\\/.*\\n/gm, '').trim();\r\n\r\n    /*\r\n      Valid function string:\r\n      function NAME (...ARGS) { BODY }\r\n \r\n      Must build function string for these inputs:\r\n      v1 (...ARGS) { BODY }\r\n      function v1 (...ARGS) { BODY }\r\n      v2((...ARGS) => { BODY });\r\n \r\n      Everything else is ignored.\r\n      TODO: do this properly with regex if it's not too slow\r\n    */\r\n    if (cleanFormula.startsWith(FormulaVersions.V1))\r\n      return `${runFormulaPrefix}${cleanFormula}`;\r\n\r\n    if (cleanFormula.startsWith(`${runFormulaPrefix}${FormulaVersions.V1}`))\r\n      return cleanFormula;\r\n\r\n    if (cleanFormula.startsWith('v2(')) {\r\n      cleanFormula = cleanFormula.substring(3, cleanFormula.lastIndexOf('}') + 1);\r\n      cleanFormula = cleanFormula.replace('=>', '');\r\n      return `${runFormulaPrefix}v2 ${cleanFormula}`;\r\n    }\r\n\r\n    return cleanFormula;\r\n  }\r\n\r\n  /**\r\n   * Used to find formula version.\r\n   * @param formula Formula text\r\n   * @returns If formula is V1 or V2\r\n   */\r\n  static findFormulaVersion(formula: string): Of<typeof FormulaVersions> {\r\n    const cleanFormula = this.#cleanFormula(formula);\r\n    const versionPart = cleanFormula.substring(runFormulaPrefix.length, cleanFormula.indexOf('(')).trim();\r\n    const validVersions = Object.values(FormulaVersions);\r\n\r\n    return (validVersions).includes(versionPart as Of<typeof FormulaVersions>)\r\n      ? versionPart as Of<typeof FormulaVersions>\r\n      : undefined;\r\n  }\r\n\r\n  /**\r\n   * Used to build executable formula function from formula text.\r\n   * @param formula Formula text\r\n   * @returns Executable formula function\r\n   */\r\n  static buildFormulaFunction(formula: string): FormulaFunction {\r\n    const cleanFormula = this.#cleanFormula(formula);\r\n    const fn: FormulaFunction = new Function(`return ${cleanFormula}`)();\r\n    return fn;\r\n  }\r\n}\r\n","import { Sxc } from '@2sic.com/2sxc-typings';\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, combineLatest, filter, from, map, switchMap } from 'rxjs';\r\nimport { Of } from '../../../../../../core';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DialogContextUser } from '../../../shared/models/dialog-context.models';\r\nimport { ServiceBase } from '../../../shared/services/service-base';\r\nimport { FormConfigService } from '../../form/form-config.service';\r\nimport { ContentTypeItemService } from '../../shared/content-types/content-type-item.service';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { ContentTypeSettingsHelpers, EntityReader } from '../../shared/helpers';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { InputTypeService } from '../../shared/input-types/input-type.service';\r\nimport { EavItem } from '../../shared/models/eav/eav-item';\r\nimport { LoggingService, LogSeverities } from '../../shared/services/logging.service';\r\nimport { FieldsSettingsHelpers } from '../../state/field-settings.helper';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { FormulaFunction } from '../formula-definitions';\r\nimport { FormulaPromise } from '../promise/formula-promise-result.model';\r\nimport { FieldValueOrResultRaw, FormulaIdentifier } from '../results/formula-results.models';\r\nimport { FormulaV1CtxApp, FormulaV1CtxTargetEntity, FormulaV1CtxUser } from '../run/formula-run-context.model';\r\nimport { FormulaDefaultTargets, FormulaSpecialPickerTargets, FormulaTargets, SettingsFormulaPrefix } from '../targets/formula-targets';\r\nimport { FormulaCacheItem, FormulaCacheItemConstants } from './formula-cache.model';\r\nimport { FormulaCacheService } from './formula-cache.service';\r\nimport { FormulaSourceCodeHelper } from './source-code-helper';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  buildFormulaCache: false,\r\n  updateFormulaFromEditor: false,\r\n  createPromisedParts: false,\r\n  getSharedParts: false,\r\n};\r\n\r\n/**\r\n * Service just to cache formulas for execution and use in the designer.\r\n */\r\n@Injectable()\r\nexport class FormulaCacheBuilder extends ServiceBase {\r\n  log = classLog({FormulaCacheBuilder}, logSpecs);\r\n  constructor(\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private contentTypeService: ContentTypeService,\r\n    private contentTypeItemService: ContentTypeItemService,\r\n    private loggingService: LoggingService,\r\n    private translate: TranslateService,\r\n    private inputTypes: InputTypeService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Used for building the initial formula cache.\r\n   * @returns\r\n   */\r\n  public buildFormulaCache(cacheSvc: FormulaCacheService): FormulaCacheItem[] {\r\n    const l = this.log.fnIf('buildFormulaCache');\r\n    const formulaCache: FormulaCacheItem[] = [];\r\n    const language = this.formConfig.language();\r\n    const reader = new EntityReader(language);\r\n\r\n    const fss = new FieldsSettingsHelpers(this.log.name);\r\n\r\n    for (const entityGuid of this.formConfig.config.itemGuids) {\r\n      const item = this.itemService.get(entityGuid);\r\n\r\n      const shared = this.#getSharedParts(entityGuid, item);\r\n\r\n      const contentType = this.contentTypeService.getContentTypeOfItem(item);\r\n      for (const attribute of contentType.Attributes) {\r\n        // Get field settings\r\n        const settings = fss.getDefaultSettings(reader.flatten<FieldSettings>(attribute.Metadata));\r\n\r\n        // get input type specs\r\n        const inputType = this.inputTypes.getSpecs(attribute);\r\n\r\n        // Get all formulas for the field\r\n        const formulaEntities = this.contentTypeItemService\r\n          .getMany(settings.Formulas)\r\n          .filter(f => reader.getBestValue<boolean>(f.Attributes.Enabled));\r\n\r\n        for (const fEntity of formulaEntities) {\r\n          const sourceCode = reader.getBestValue<string>(fEntity.Attributes.Formula);\r\n          if (!sourceCode) \r\n            continue;\r\n\r\n          const target: Of<typeof FormulaTargets> = reader.getBestValue<string>(fEntity.Attributes.Target);\r\n\r\n          // create cleaned formula function, or if this fails, add info to log & results\r\n          let formulaFunction: FormulaFunction;\r\n          try {\r\n            formulaFunction = FormulaSourceCodeHelper.buildFormulaFunction(sourceCode);\r\n          } catch (error) {\r\n            cacheSvc.cacheResults({ entityGuid, fieldName: attribute.Name, target } satisfies FormulaIdentifier, undefined, true, false);\r\n            const itemTitle = ContentTypeSettingsHelpers.getTitle(contentType, language);\r\n            this.loggingService.addLog(LogSeverities.Error, `Error building formula for Entity: \"${itemTitle}\", Field: \"${attribute.Name}\", Target: \"${target}\"`, error);\r\n            this.loggingService.showMessage(this.translate.instant('Errors.FormulaConfiguration'), 2000);\r\n          }\r\n\r\n          const formulaCacheItem: FormulaCacheItem = {\r\n            cache: {},\r\n            entityGuid,\r\n            fieldName: attribute.Name,\r\n            fn: formulaFunction?.bind({}),\r\n            isDraft: formulaFunction == null,\r\n            sourceCode,\r\n            sourceCodeSaved: sourceCode,\r\n            sourceCodeGuid: fEntity.Guid,\r\n            sourceCodeId: fEntity.Id,\r\n            target,\r\n            ...this.#inputTypeSpecsForCacheItem(target, inputType),\r\n            version: FormulaSourceCodeHelper.findFormulaVersion(sourceCode),\r\n            ...shared,\r\n            stop: false,\r\n            sleep: false,\r\n            fieldIsSpecialPicker: FormulaSpecialPickerTargets.includes(target),\r\n            ...this.#createPromisedParts(),\r\n            ...this.#targetInfoForCacheItem(target),\r\n          };\r\n\r\n          formulaCache.push(formulaCacheItem);\r\n        }\r\n      }\r\n    }\r\n\r\n    return l.r(formulaCache);\r\n  }\r\n\r\n\r\n  #inputTypeSpecsForCacheItem(target: Of<typeof FormulaTargets>, inputType: InputTypeSpecs): Pick<FormulaCacheItem, 'inputType' | 'isNewPicker' | 'disabled' | 'disabledReason'> {\r\n\r\n    // Disable picker checks WIP\r\n    /* if (!inputType.isNewPicker) */\r\n    return { inputType: inputType, isNewPicker: inputType.isNewPicker, disabled: false, disabledReason: '' };\r\n    // return [FormulaDefaultTargets.Value /*, FormulaNewPickerTargets.Options */].includes(target)\r\n    //   ? { isNewPicker: true, disabled: true, disabledReason: 'New picker is not supported in formulas yet' }\r\n    //   : { isNewPicker: true, disabled: false, disabledReason: '' };\r\n  }\r\n\r\n  #targetInfoForCacheItem(target: Of<typeof FormulaTargets>): Pick<FormulaCacheItem, 'isSetting' | 'settingName' | 'isValue' | 'isValidation'> {\r\n    return target.startsWith(SettingsFormulaPrefix)\r\n      ? { isSetting: true, settingName: target.substring(SettingsFormulaPrefix.length), isValue: false, isValidation: false }\r\n      : { isSetting: false, settingName: '', isValue: target === FormulaDefaultTargets.Value, isValidation: target === FormulaDefaultTargets.Validation };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Used for building shared parts of formula cache item.\r\n   * @param item\r\n   * @param entityGuid\r\n   * @returns\r\n   */\r\n  #getSharedParts(entityGuid: string, item: EavItem = null): FormulaCacheItemConstants {\r\n    this.log.fnIf('getSharedParts', { item, entityGuid });\r\n\r\n    if (this.#sharedPartsCache[entityGuid])\r\n      return this.#sharedPartsCache[entityGuid];\r\n\r\n    item = item ?? this.itemService.get(entityGuid);\r\n    const entity = item.Entity;\r\n    const mdFor = entity.For;\r\n    const targetEntity: FormulaV1CtxTargetEntity = {\r\n      guid: entity.Guid,\r\n      id: entity.Id,\r\n      type: {\r\n        guid: entity.Type.Id,\r\n        name: entity.Type.Name,\r\n      },\r\n      // New v15.04\r\n      for: {\r\n        targetType: mdFor?.TargetType ?? 0,\r\n        guid: mdFor?.Guid,\r\n        number: mdFor?.Number,\r\n        string: mdFor?.String,\r\n      },\r\n    };\r\n    const formConfig = this.formConfig.config;\r\n    const user = formConfig.dialogContext.User ?? {} as Partial<DialogContextUser>;\r\n    const shared = {\r\n      targetEntity,\r\n      user: {\r\n        email: user.Email,\r\n        guid: user.Guid,\r\n        id: user.Id,\r\n        isAnonymous: user.IsAnonymous,\r\n        isSiteAdmin: user.IsSiteAdmin,\r\n        isContentAdmin: user.IsContentAdmin,\r\n        isSystemAdmin: user.IsSystemAdmin,\r\n        name: user.Name,\r\n        username: user.Username,\r\n      } satisfies FormulaV1CtxUser,\r\n      app: {\r\n        appId: formConfig.appId,\r\n        zoneId: formConfig.zoneId,\r\n        isGlobal: formConfig.dialogContext.App.IsGlobalApp,\r\n        isSite: formConfig.dialogContext.App.IsSiteApp,\r\n        isContent: formConfig.dialogContext.App.IsContentApp,\r\n        getSetting: (key: string) => undefined,\r\n      } satisfies FormulaV1CtxApp,\r\n      sxc: window.$2sxc({\r\n        zoneId: formConfig.zoneId,\r\n        appId: formConfig.appId,\r\n        pageId: formConfig.tabId,\r\n        moduleId: formConfig.moduleId,\r\n        _noContextInHttpHeaders: true,  // disable pageid etc. headers in http headers, because it would make debugging very hard\r\n        _autoAppIdsInUrl: true,         // auto-add appid and zoneid to url so formula developer can see what's happening\r\n      } as any) satisfies Sxc,\r\n    } satisfies FormulaCacheItemConstants;\r\n    this.#sharedPartsCache[entityGuid] = shared;\r\n    return shared;\r\n  }\r\n  #sharedPartsCache: Record<string, FormulaCacheItemConstants> = {};\r\n\r\n\r\n  /**\r\n   * Used for pacing promises$ and callback$ triggers. Callback$ triggers for the first time when the last promise is resolved.\r\n   * @returns\r\n   */\r\n  #createPromisedParts() {\r\n    this.log.fnIf('createPromisedParts');\r\n    const promises$ = new BehaviorSubject<FormulaPromise>(null);\r\n    const updateCallback$ = new BehaviorSubject<(result: FieldValueOrResultRaw) => void>(null);\r\n    const promiseSpecs = promises$.pipe(\r\n      filter(x => !!x),\r\n      switchMap(set => from(set.promise).pipe(map(result => ({ set, result })))),\r\n    );\r\n    // This combineLatest triggers the callback for the first time when the last promise is resolved\r\n    this.subscriptions.add(combineLatest([promiseSpecs, updateCallback$.pipe(filter(x => !!x))])\r\n      .subscribe(\r\n        ([promise, callback]) => {\r\n          promise.set.completed = true;\r\n          promise.set.sleep = false;\r\n          return callback(promise.result);\r\n        },\r\n      ));\r\n\r\n    return { promises$, updateCallback$ };\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Used for updating formula from editor.\r\n   * @param entityGuid\r\n   * @param fieldName\r\n   * @param target\r\n   * @param sourceCode\r\n   * @param run\r\n   */\r\n  public updateFormulaFromEditor(cacheSvc: FormulaCacheService, id: FormulaIdentifier, sourceCode: string, run: boolean) {\r\n    this.log.fnIf('updateFormulaFromEditor', { id, sourceCode, run });\r\n    // important: the designer contains too much info, so we need to extract the essentials\r\n    // to not have it in the cache - which would trigger loads of changes to that signal later on.\r\n    let formulaFunction: FormulaFunction;\r\n\r\n    // If we should also run it, push it to the formulas cache so it will be executed\r\n    if (run)\r\n      try {\r\n        formulaFunction = FormulaSourceCodeHelper.buildFormulaFunction(sourceCode);\r\n      } catch (error) {\r\n        cacheSvc.cacheResults(id, /* value: */ undefined, /* isError: */ true, /* isPromise */ false);\r\n        const item = this.itemService.get(id.entityGuid);\r\n        const contentType = this.contentTypeService.getContentTypeOfItem(item);\r\n        const language = this.formConfig.language();\r\n        const itemTitle = ContentTypeSettingsHelpers.getTitle(contentType, language);\r\n        const errorLabel = `Error building formula for Entity: \"${itemTitle}\", Field: \"${id.fieldName}\", Target: \"${id.target}\"`;\r\n        this.loggingService.addLog(LogSeverities.Error, errorLabel, error);\r\n\r\n        console.error(errorLabel, error);\r\n      }\r\n\r\n    // find input type\r\n    const item = this.itemService.get(id.entityGuid);\r\n    const attribute = this.contentTypeService.getAttributeOfItem(item, id.fieldName);\r\n    const inputType = this.inputTypes.getSpecs(attribute);\r\n\r\n    // Find original in case we had it already (as we would then update it)\r\n    const { list, index, value } = cacheSvc.formulaListIndexAndOriginal(id);\r\n    const formula = value ?? {} as FormulaCacheItem;\r\n\r\n    // Get shared calculated properties, which we need in case the old-formula doesn't have them yet\r\n    const shared = this.#getSharedParts(id.entityGuid);\r\n\r\n    const streams = (formula.promises$ && formula.updateCallback$)\r\n      ? { promises$: value.promises$, updateCallback$: value.updateCallback$ }\r\n      : this.#createPromisedParts();\r\n\r\n    const newFormulaItem: FormulaCacheItem = {\r\n      ...id,\r\n      cache: formula.cache ?? {},\r\n      fn: formulaFunction?.bind({}),\r\n      isDraft: run ? formulaFunction == null : true,\r\n      sourceCode,\r\n      sourceCodeSaved: formula.sourceCodeSaved,\r\n      sourceCodeGuid: formula.sourceCodeGuid,\r\n      sourceCodeId: formula.sourceCodeId,\r\n      version: FormulaSourceCodeHelper.findFormulaVersion(sourceCode),\r\n      ...this.#inputTypeSpecsForCacheItem(id.target, inputType),\r\n      ...shared,\r\n      stop: false,\r\n      sleep: false,\r\n      fieldIsSpecialPicker: FormulaSpecialPickerTargets.includes(id.target),\r\n      ...streams,\r\n      ...this.#targetInfoForCacheItem(id.target),\r\n    };\r\n\r\n    const newCache = index >= 0\r\n      ? [...list.slice(0, index), newFormulaItem, ...list.slice(index + 1)]\r\n      : [newFormulaItem, ...list];\r\n    return newCache;\r\n  }\r\n\r\n}","import { Injectable, untracked } from '@angular/core';\r\nimport { Of, transient } from '../../../../../../core';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { FormulaIdentifier } from '../results/formula-results.models';\r\nimport { FormulaDefaultTargetValues, FormulaNewPickerTargetValues, FormulaOptionalTargetValues, FormulaTargets } from '../targets/formula-targets';\r\nimport { FormulaCacheBuilder } from './formula-cache.builder';\r\nimport { FormulaCacheItem, FormulaResultCacheItem } from './formula-cache.model';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  getActive: true,\r\n  fields: [...DebugFields],\r\n};\r\n\r\n/**\r\n * Service just to cache formulas for execution and use in the designer.\r\n */\r\n@Injectable()\r\nexport class FormulaCacheService {\r\n\r\n  log = classLog({FormulaCacheService}, logSpecs);\r\n\r\n  #cacheBuilder = transient(FormulaCacheBuilder);\r\n\r\n  constructor() { }\r\n\r\n  /** All the formulas with various additional info to enable execution and editing */\r\n  public formulas = signalObj<FormulaCacheItem[]>('formulas', []);\r\n\r\n  /** All the formula results */\r\n  #results = signalObj<FormulaResultCacheItem[]>('formula-results', []);\r\n\r\n  init() {\r\n    const formulaCache = this.#cacheBuilder.buildFormulaCache(this);\r\n    this.formulas.set(formulaCache);\r\n  }\r\n\r\n  //#region Formulas Get / Find\r\n\r\n  /**\r\n   * Used for returning formulas filtered by optional entity, field or target.\r\n   * @param entityGuid Optional entity guid\r\n   * @param fieldName Optional field\r\n   * @param target Optional target\r\n   * @param allowDraft\r\n   * @returns Filtered formula array\r\n   */\r\n  #findFormulas(entityGuid?: string, fieldName?: string, target?: Of<typeof FormulaTargets>[], allowDraft?: boolean): FormulaCacheItem[] {\r\n    return this.formulas().filter(f =>\r\n        (entityGuid ? f.entityGuid === entityGuid : true)\r\n        && (fieldName ? f.fieldName === fieldName : true)\r\n        && (target ? target?.find(target => f.target == target) : true)\r\n        && (allowDraft ? true : !f.isDraft)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Find formulas of the current field which are still running.\r\n   * Uses the designerService as that can modify the behavior while developing a formula.\r\n   */\r\n  public getActive(entityGuid: string, name: string, forNewPicker: boolean): FormulaCacheItem[] {\r\n    const l = this.log.fnIfInList('getActive', 'fields', name, () => ({ name, forNewPicker, formulas: this.formulas() }));\r\n    const targets = FormulaDefaultTargetValues\r\n      .concat(forNewPicker ? FormulaNewPickerTargetValues : FormulaOptionalTargetValues);\r\n    \r\n    const all = this.#findFormulas(entityGuid, name, targets, /* allowDraft: */ false);\r\n\r\n    const unstopped = all.filter(f => !f.stop);\r\n\r\n    return l.r(unstopped, `all: ${all.length}, unstopped: ${unstopped.length}`);\r\n  }\r\n\r\n\r\n\r\n  public formulaListIndexAndOriginal(fOrDs: FormulaIdentifier) {\r\n    const list = this.formulas();\r\n    const index = list.findIndex(f => f.entityGuid === fOrDs.entityGuid && f.fieldName === fOrDs.fieldName && f.target === fOrDs.target);\r\n    const value = list[index];\r\n    return { list, index, value };\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Formulas CRUD\r\n\r\n  /**\r\n   * Used for saving updated formula from editor.\r\n   */\r\n  public updateSaved(formulaItem: FormulaCacheItem, sourceGuid: string, sourceId: number): void {\r\n    const { list, index, value } = this.formulaListIndexAndOriginal(formulaItem);\r\n    if (value == null)\r\n      return;\r\n\r\n    const updated: FormulaCacheItem = {\r\n      ...value,\r\n      sourceCodeSaved: formulaItem.sourceCode,\r\n      sourceCodeGuid: sourceGuid,\r\n      sourceCodeId: sourceId,\r\n    };\r\n\r\n    const newCache = [...list.slice(0, index), updated, ...list.slice(index + 1)];\r\n    this.formulas.set(newCache);\r\n  }\r\n\r\n  /**\r\n   * Used for updating formula from editor.\r\n   */\r\n  public updateFormulaFromEditor(id: FormulaIdentifier, formula: string, run: boolean): void {\r\n    const newCache = this.#cacheBuilder.updateFormulaFromEditor(this, id, formula, run);\r\n    this.formulas.set(newCache);\r\n  }\r\n\r\n  /**\r\n   * Used for deleting formula.\r\n   */\r\n  public delete(id: FormulaIdentifier): void {\r\n    const { list, index } = this.formulaListIndexAndOriginal(id);\r\n    if (index < 0) return;\r\n    const newCache = [...list.slice(0, index), ...list.slice(index + 1)];\r\n    this.formulas.set(newCache);\r\n  }\r\n\r\n  /**\r\n   * Used for resetting formula.\r\n   */\r\n  public resetFormula(id: FormulaIdentifier): void {\r\n    this.#deleteResult(id);\r\n\r\n    // If we reset to saved code, then do that, otherwise delete/flush\r\n    const sourceCodeSaved = this.formulaListIndexAndOriginal(id).value?.sourceCodeSaved;\r\n    if (sourceCodeSaved != null)\r\n      this.updateFormulaFromEditor(id, sourceCodeSaved, true);\r\n    else \r\n      this.delete(id);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Get Results & Delete\r\n\r\n  /**\r\n   * Cache the results of a formula - mainly for showing formula result in editor.\r\n   * @param entityGuid\r\n   * @param fieldName\r\n   * @param target\r\n   * @param value\r\n   * @param isError\r\n   * @param isOnlyPromise\r\n   */\r\n  public cacheResults(formulaItem: FormulaIdentifier, value: FieldValue, isError: boolean, isOnlyPromise: boolean): void {\r\n    const newResult: FormulaResultCacheItem = {\r\n      entityGuid: formulaItem.entityGuid,\r\n      fieldName: formulaItem.fieldName,\r\n      target: formulaItem.target,\r\n      value,\r\n      isError,\r\n      isOnlyPromise,\r\n    };\r\n    const l = this.log.fn('cacheResults', { newResult });\r\n\r\n    // We should not track reading the list during formula execution\r\n    // since we don't depend on it!\r\n    untracked(() => {\r\n      const { list, index } = this.resultListIndexAndOriginal(formulaItem);\r\n      const newResults = index >= 0\r\n        ? [...list.slice(0, index), newResult, ...list.slice(index + 1)]\r\n        : [newResult, ...list];\r\n\r\n      // side effect within props calculations\r\n        l.a('set results', { list, index, newResults});\r\n        this.#results.set(newResults);\r\n    });\r\n    l.end('ok');\r\n  }\r\n\r\n  public resultListIndexAndOriginal(id: FormulaIdentifier) {\r\n    const list = this.#results();\r\n    const index = list.findIndex(r => r.entityGuid === id.entityGuid && r.fieldName === id.fieldName && r.target === id.target);\r\n    const value = list[index];\r\n    return { list, index, value };\r\n  }\r\n\r\n  /**\r\n   * Delete Results from cache.\r\n   */\r\n  #deleteResult(id: FormulaIdentifier): void {\r\n    const { list, index } = this.resultListIndexAndOriginal(id);\r\n    if (index < 0) return;\r\n    const newResults = [...list.slice(0, index), ...list.slice(index + 1)];\r\n    this.#results.set(newResults);\r\n  }  \r\n\r\n  //#endregion\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Of } from '../../../../../../core';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { TargetOption } from '../../dialog/footer/formula-designer/formula-designer.models';\r\nimport { ContentTypeService } from '../../shared/content-types/content-type.service';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FormulaIdentifier } from '../results/formula-results.models';\r\nimport { FormulaDefaultTargets, FormulaNewPickerTargets, FormulaOptionalTargets, FormulaTargets } from './formula-targets';\r\n\r\n/**\r\n * Small helper service to get the target options for the formula designer.\r\n * \r\n * The purpose is to figure out what targets are possible for each field (eg. Settings.Name, etc.)\r\n * and to ensure that the information (eg. hasFormula) is correct.\r\n */\r\n@Injectable()\r\nexport class FormulaTargetsService {\r\n\r\n  constructor(\r\n    private itemService: ItemService,\r\n    private contentTypeService: ContentTypeService,\r\n  ) { }\r\n\r\n  getTargetOptions(id: FormulaIdentifier, formulas: FormulaCacheItem[]): TargetOption[] {\r\n    // Create a list of formula targets for the selected field - eg. Value, Tooltip, ListItem.Label, ListItem.Tooltip etc.\r\n    const targetOptions: TargetOption[] = [];\r\n    if (id.entityGuid == null || id.fieldName == null)\r\n      return targetOptions;\r\n\r\n    const fieldFormulas = formulas.filter(f => f.entityGuid === id.entityGuid && f.fieldName === id.fieldName);\r\n\r\n    // default targets\r\n    for (const target of Object.values(FormulaDefaultTargets)) {\r\n      const targetOption: TargetOption = {\r\n        hasFormula: fieldFormulas.some(f => f.target === target),\r\n        label: target.substring(target.lastIndexOf('.') + 1),\r\n        target,\r\n      };\r\n      targetOptions.push(targetOption);\r\n    }\r\n\r\n    // optional targets\r\n    const item = this.itemService.get(id.entityGuid);\r\n    const attribute = this.contentTypeService.getAttributeOfItem(item, id.fieldName);\r\n    const inputType = attribute.InputType;\r\n    if (InputTypeHelpers.isGroupStart(inputType)) {\r\n      for (const target of [FormulaOptionalTargets.Collapsed]) {\r\n        const targetOption: TargetOption = {\r\n          hasFormula: fieldFormulas.some(f => f.target === target),\r\n          label: target.substring(target.lastIndexOf('.') + 1),\r\n          target: target as Of<typeof FormulaTargets>,\r\n        };\r\n        targetOptions.push(targetOption);\r\n      }\r\n    }\r\n    if (InputTypeHelpers.isOldValuePicker(inputType)) {\r\n      for (const target of [FormulaOptionalTargets.DropdownValues]) {\r\n        const targetOption: TargetOption = {\r\n          hasFormula: fieldFormulas.some(f => f.target === target),\r\n          label: target.substring(target.lastIndexOf('.') + 1),\r\n          target: target as Of<typeof FormulaTargets>,\r\n        };\r\n        targetOptions.push(targetOption);\r\n      }\r\n    }\r\n\r\n    // TODO: HERE\r\n    if (InputTypeHelpers.isNewPicker(inputType)) {\r\n      for (const target of Object.values(FormulaNewPickerTargets)) {\r\n        const targetOption: TargetOption = {\r\n          hasFormula: fieldFormulas.some(f => f.target === target),\r\n          label: \"Picker \" + target.substring(target.lastIndexOf('.') + 1),\r\n          target: target as Of<typeof FormulaTargets>,\r\n        };\r\n        targetOptions.push(targetOption);\r\n      }\r\n    }\r\n\r\n    /* TODO: for picker types WIP\r\n      add formulas -> Field.ListItem.Label\r\n                      Field.ListItem.Tooltip\r\n                      Field.ListItem.Information\r\n                      Field.ListItem.HelpLink\r\n                      Field.ListItem.Disabled\r\n\r\n      Template for all new type formulas\r\n      v2((data, context, item) => {\r\n        return data.value;\r\n      });\r\n\r\n      old template for all of the rest\r\n\r\n      run formulas upon dropdowning the picker, upon each opening\r\n    */\r\n\r\n    // targets for formulas\r\n    for (const formula of fieldFormulas) {\r\n      const formulaExists = targetOptions.some(t => t.target === formula.target);\r\n      if (formulaExists) \r\n        continue;\r\n\r\n      const targetOption: TargetOption = {\r\n        hasFormula: true,\r\n        label: formula.target.substring(formula.target.lastIndexOf('.') + 1),\r\n        target: formula.target,\r\n      };\r\n      targetOptions.push(targetOption);\r\n    }\r\n\r\n    // currently selected target\r\n    const selectedExists = targetOptions.some(t => t.target === id.target);\r\n    if (!selectedExists) {\r\n      const targetOption: TargetOption = {\r\n        hasFormula: fieldFormulas.some(f => f.target === id.target),\r\n        label: id.target.substring(id.target.lastIndexOf('.') + 1),\r\n        target: id.target,\r\n      };\r\n      targetOptions.push(targetOption);\r\n    }\r\n    return targetOptions;    \r\n  }\r\n\r\n}","import { DesignerSnippet, FieldOption } from '../../dialog/footer/formula-designer/formula-designer.models';\r\nimport { FormulaVersions } from '../formula-definitions';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FormulaPropsParameters, FormulaRunOneHelpersFactory } from '../formula-run-one-helpers.factory';\r\n\r\nexport class FormulaV1Helpers {\r\n\r\n  /**\r\n   * Used to build the designer snippets context for use in formulas.\r\n   * @param formula\r\n   * @returns Designer snippets context for use in formulas\r\n   */\r\n  static buildDesignerSnippetsContext(formula: FormulaCacheItem): DesignerSnippet[] {\r\n    switch (formula.version) {\r\n      case FormulaVersions.V1:\r\n        const snippets = [\r\n          'app.appId',\r\n          'app.zoneId',\r\n          'app.isGlobal',\r\n          'app.isSite',\r\n          'app.isContent',\r\n          'cache.ChangeThis',\r\n          'culture.code',\r\n          'culture.name',\r\n          'debug',\r\n          'features.isEnabled(\\'nameId\\')',\r\n          'form.runFormulas()',\r\n          'sxc.ChangeThis',\r\n          'target.entity.id',\r\n          'target.entity.guid',\r\n          'target.name',\r\n          'target.type',\r\n          'user.id',\r\n          'user.isAnonymous',\r\n          'user.isSiteAdmin',\r\n          'user.isSystemAdmin',\r\n        ].map(name => {\r\n          const code = `context.${name}`;\r\n          const fieldSnippet: DesignerSnippet = {\r\n            code,\r\n            label: code,\r\n          };\r\n          return fieldSnippet;\r\n        });\r\n        return snippets;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Used to build the designer snippets for use in formulas.\r\n   * @param formula\r\n   * @param fieldOptions\r\n   * @param itemHeader\r\n   * @returns Designer snippets for use in formulas\r\n   */\r\n  static getSnippets(formula: FormulaCacheItem, fieldOptions: FieldOption[], prefill: Record<string, unknown>): DesignerSnippet[] {\r\n    switch (formula.version) {\r\n      case FormulaVersions.V1:\r\n        const formulaPropsParameters = new FormulaPropsParameters(prefill).all;\r\n        const snippets = [\r\n          'value',\r\n          'default',\r\n          'prefill',\r\n          'initial',\r\n          ...fieldOptions.map(f => f.fieldName),\r\n          'parameters.ChangeThis',\r\n          ...Object.keys(formulaPropsParameters).map(key => `parameters.${key}`),\r\n        ].map(name => {\r\n          const code = `data.${name}`;\r\n          const fieldSnippet: DesignerSnippet = {\r\n            code,\r\n            label: code,\r\n          };\r\n          return fieldSnippet;\r\n        });\r\n        return snippets;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n}","import { FieldOption } from '../../dialog/footer/formula-designer/formula-designer.models';\r\nimport { FormulaVersions } from '../formula-definitions';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FormulaV1Data } from '../run/formula-run-data.model';\r\nimport { FormulaV1Context } from '../run/formula-run-context.model';\r\nimport { FormulaV1Experimental } from '../run/formula-run-experimental.model';\r\nimport { PickerItem } from '../../fields/picker/models/picker-item.model';\r\nimport { FormulaPropsParameters, FormulaRunOneHelpersFactory } from '../formula-run-one-helpers.factory';\r\n\r\n// Import the type definitions for intellisense\r\nimport editorTypesForIntellisense from '!raw-loader!./editor-intellisense-function-v2.rawts';\r\n\r\nexport class IntellisenseV2 {\r\n  /**\r\n   * Used to build the formula typings for use in intellisense.\r\n   * @param formula\r\n   * @param fieldOptions\r\n   * @param itemHeader\r\n   * @returns Formula typings for use in intellisense\r\n   */\r\n  static getTypings(formula: FormulaCacheItem, fieldOptions: FieldOption[], prefill: Record<string, unknown>): string {\r\n    switch (formula.version) {\r\n      case FormulaVersions.V2: {\r\n        const formulaPropsParameters = new FormulaPropsParameters(prefill).all;\r\n\r\n        const allFields = fieldOptions.map(f => `${f.fieldName}: ${this.#inputTypeToDataType(f.inputType)};`).join('\\n');\r\n        const allParameters = Object.keys(formulaPropsParameters).map(key => `${key}: any;`).join('\\n');\r\n        const final = editorTypesForIntellisense\r\n          .replace('/* [inject:AllFields] */', allFields)\r\n          .replace('/* [inject:AllParameters] */', allParameters);\r\n\r\n        return final;\r\n\r\n        // TODO: probably update the entity-type info which was added in v14.07.05\r\n      }\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  static #inputTypeToDataType(inputType: string) {\r\n    const lower = inputType.toLowerCase();\r\n    if (lower.startsWith('string')) return 'string';\r\n    if (lower.startsWith('number')) return 'number';\r\n    if (lower.startsWith('date')) return 'Date';\r\n    if (lower.startsWith('boolean')) return 'boolean';\r\n    return \"any\";\r\n  }\r\n}\r\n\r\n\r\ninterface FormulaPropsV1 {\r\n  data: FormulaV1Data;\r\n  context: FormulaV1Context;\r\n  experimental: FormulaV1Experimental;\r\n  item?: PickerItem; //@SDV possibly add PickerTreeItem also\r\n}\r\n\r\n\r\n","export default \"/*\\r\\n  This is a special file which is not compiled as a normal TypeScript.\\r\\n  Instead it's loaded as raw text, to hand over to Monaco.\\r\\n  It ensures that v2 functions have intellisense.\\r\\n\\r\\n  TIP: To edit this file, briefly rename it to ...raw.ts, then back to ...rawts\\r\\n       This will make VSCode load it as a normal TypeScript file, so you can edit it.\\r\\n\\r\\n  - Try to keep in sync with the real code in the 2sxc project.\\r\\n  - The comments are _documentation_ for the user, so they can see what's available\\r\\n  - If you need any \\\"internal\\\" comments, use // instead\\r\\n  - Note that the [inject:...] comments are replaced by the build process\\r\\n*/\\r\\n\\r\\n/**\\r\\n * The data object is the main object for figuring out what the field or setting contained and what other fields currently store.\\r\\n * It has properties such as `.value` etc.\\r\\n * Just start typing to see the intellisense.\\r\\n */\\r\\n// Note that the type must be explicitly like `string | boolean | number | string[]`\\r\\n// Otherwise it won't show the details to the user\\r\\ndeclare interface FormulaData {\\r\\n  /**\\r\\n   * The value of the current field/setting when the formula runs.\\r\\n   *\\r\\n   * _It's exact type depends on the underlying type._\\r\\n   */\\r\\n  value: string | boolean | number | string[];\\r\\n  /**\\r\\n   * The _default_ value of the current field/setting as defined in the field settings.\\r\\n   *\\r\\n   * _It's exact type depends on the underlying type._\\r\\n   */\\r\\n  default: string | boolean | number | string[];\\r\\n  /**\\r\\n   * A prefill value that was passed into the form when it was loaded.\\r\\n   *\\r\\n   * _It's exact type depends on the underlying type._\\r\\n   */\\r\\n  prefill: string | boolean | number | string[];\\r\\n  /**\\r\\n   * The value of the current field/setting when the form initially loaded.\\r\\n   *\\r\\n   * _It's exact type depends on the underlying type._\\r\\n   */\\r\\n  initial: string | boolean | number | string[];\\r\\n  /* [inject:AllFields] */\\r\\n  /**\\r\\n   * All parameters which were passed to the form when it was loaded\\r\\n   *\\r\\n   * _It's exact type depends on the parameter, but it's usually a string._\\r\\n   */\\r\\n  parameters: {\\r\\n    /* [inject:AllParameters] */\\r\\n  };\\r\\n}\\r\\n\\r\\ndeclare interface FormulaContext {\\r\\n  /**\\r\\n   * Information about the current App\\r\\n   */\\r\\n  app: {\\r\\n    /** The current App ID */\\r\\n    appId: number;\\r\\n    /** The current Zone ID */\\r\\n    zoneId: number;\\r\\n    /** Determines if the current App is the global App */\\r\\n    isGlobal: boolean;\\r\\n    /** Determines if the current App is the primary (main) App on the site */\\r\\n    isSite: boolean;\\r\\n    /** Determines if the current App is a content App */\\r\\n    isContent: boolean;\\r\\n    /**\\r\\n     * Retrieve a setting like an App setting.\\r\\n     * You need the full path like `Settings.ShowCategories`.\\r\\n     * \\r\\n     * Important: For security reasons formulas will only get settings which where configured in the ContentType for use in Formulas.\\r\\n     */\\r\\n    getSetting(settingPath: string): string;\\r\\n  };\\r\\n  /**\\r\\n   * Cache for this formula. You can store any data here and it will be available in the next run.\\r\\n   */\\r\\n  cache: Record<string, any>;\\r\\n  /**\\r\\n   * Information about the current language\\r\\n   */\\r\\n  culture: {\\r\\n    code: string;\\r\\n    name: string;\\r\\n  };\\r\\n  debug: boolean;\\r\\n  /**\\r\\n   * API to detect what features are currently enabled/available\\r\\n   */\\r\\n  features: {\\r\\n    // /**\\r\\n    //  * Get internal information about a feature if it's available. This is rarely used.\\r\\n    //  * @param nameId The name of the feature, eg. `PasteImageFromClipboard`\\r\\n    //  */\\r\\n    // get(nameId: string): Record<string, any>;\\r\\n    /** Find out if the feature is enabled. Eg. `...isEnabled('PasteImageFromClipboard')` */\\r\\n    isEnabled(nameId: string): boolean;\\r\\n  };\\r\\n  /**\\r\\n   * Work with the current form\\r\\n   */\\r\\n  form: {\\r\\n    // v16 Deprecated for v2\\r\\n    // /** Re-trigger all formulas. Usually used inside promises when they complete. */\\r\\n    // runFormulas(): void;\\r\\n  };\\r\\n  /**\\r\\n   * The standard sxc object for the current App.\\r\\n   * It's the same as the sxc-instance in the page.\\r\\n   *\\r\\n   * You can use it to make API calls to the server.\\r\\n   */\\r\\n  sxc: {\\r\\n    /** The module ID */\\r\\n    id: number;\\r\\n    /** The Content-Block ID - matches the module ID unless it's an inner-content block inside another module */\\r\\n    cbid: number;\\r\\n    /** The sxc WebAPI object. Check the docs: https://docs.2sxc.org/api/js/SxcWebApi.html */\\r\\n    webApi: {\\r\\n      /**\\r\\n       * Get data from a url and return the json-object\\r\\n       * @param url Url to call. It's usually a virtual url such as `app/auto/api/basic/hello`\\r\\n       * @param data Optional data. If provided, it will use a POST\\r\\n       * @param method Optional method, default is `GET` unless you specify data, then it's `POST`\\r\\n       */\\r\\n      fetchJson<TData>(url: string, data?: string | Record<string, any>, method?: string): Promise<TData>;\\r\\n      /**\\r\\n       * Get data from a url and return the response (not a nice object)\\r\\n       * @param url Url to call. It's usually a virtual url such as `app/auto/api/basic/hello`\\r\\n       * @param data Optional data. If provided, it will use a POST\\r\\n       * @param method Optional method, default is `GET` unless you specify data, then it's `POST`\\r\\n       */\\r\\n      fetchRaw<TData>(url: string, data?: string | Record<string, any>, method?: string): Promise<TData>;\\r\\n    };\\r\\n    // turn off for now v16.00 - confusing\\r\\n    // [key: string]: any;\\r\\n  };\\r\\n  /**\\r\\n   * Information about the item this formula targets.\\r\\n   */\\r\\n  target: {\\r\\n    /** The entity the current formula affects */\\r\\n    entity: {\\r\\n      /** The entity ID */\\r\\n      id: number;\\r\\n      /** The entity GUID */\\r\\n      guid: string;\\r\\n      /** Metadata For information */\\r\\n      for: {\\r\\n        /** The target type like `4` (Entity). `0` if it's not metadata  */\\r\\n        targetType: number;\\r\\n        /** The int-key if it uses number keys, otherwise null */\\r\\n        number?: number;\\r\\n        /** The string-key if it uses string keys, otherwise null */\\r\\n        string?: string;\\r\\n        /** The GUID-key if it uses GUIDs, otherwise null */\\r\\n        guid?: string;\\r\\n      }\\r\\n    };\\r\\n    name: string;\\r\\n    /** The entity type name */\\r\\n    type: string;\\r\\n  };\\r\\n  /**\\r\\n   * Information about the current user\\r\\n   */\\r\\n  user: {\\r\\n    /** The current user ID */\\r\\n    id: number;\\r\\n    /** Check if the current user is anonymous eg. not logged in */\\r\\n    isAnonymous: boolean;\\r\\n    /** Check if the current user is a content admin */\\r\\n    isContentAdmin: boolean;\\r\\n    /** Check if the current user is a site admin */\\r\\n    isSiteAdmin: boolean;\\r\\n    /** Check if the current user is a system admin */\\r\\n    isSystemAdmin: boolean;\\r\\n    /** current user e-mail */\\r\\n    email: string;\\r\\n    /** The user GUID */\\r\\n    guid: string;\\r\\n    /** the name usually shown in greetings */\\r\\n    name: string;\\r\\n    /** The user name used for login */\\r\\n    username: string;\\r\\n  };\\r\\n}\\r\\n\\r\\n// /**\\r\\n//  * Test docs\\r\\n//  * @param data The data object\\r\\n//  */\\r\\n// declare function callbackV2(data: FormulaData): string | string[];\\r\\n\\r\\n// /**\\r\\n//  * test docs 3\\r\\n//  * @param callback The real code of the formula\\r\\n//  */\\r\\n// declare function v3(callback: typeof callbackV2);\\r\\n\\r\\n/**\\r\\n * This `v2` wrapper is required for the intellisense to work.\\r\\n * @param callback The real code of the formula\\r\\n * @returns A string, boolean, number, date or an advanced object\\r\\n */\\r\\ndeclare function v2(\\r\\n  // The main function - adding comments here does not show up, so we don't have them ATM\\r\\n  callback: (\\r\\n    data: FormulaData,\\r\\n    context: FormulaContext,\\r\\n  ) => string | boolean | number | Date | {\\r\\n    value?: string | boolean | number | Date | { severity: 'warning' | 'error', message: string },\\r\\n    fields?: {\\r\\n      name: string,\\r\\n      value: string | boolean | number | Date\\r\\n    }[],\\r\\n    promise?: Promise<any>,\\r\\n    stop?: boolean,\\r\\n  },\\r\\n): void;\\r\\n\";","import { Injectable } from '@angular/core';\r\nimport { transient } from '../../../../../../core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { computedObj, signalObj } from '../../../shared/signals/signal.utilities';\r\nimport { EntityOption, FieldOption, TargetOption } from '../../dialog/footer/formula-designer/formula-designer.models';\r\nimport { FieldsSettingsService } from '../../state/fields-settings.service';\r\nimport { ItemService } from '../../state/item.service';\r\nimport { FormulaCacheItem } from '../cache/formula-cache.model';\r\nimport { FormulaCacheService } from '../cache/formula-cache.service';\r\nimport { FormulaTargets } from '../targets/formula-targets';\r\nimport { FormulaTargetsService } from '../targets/formula-targets.service';\r\nimport { DesignerState } from './designer-state.model';\r\nimport { FormulaV1Helpers } from './formula-v1-snippets';\r\nimport { IntellisenseV2 } from './intellisense-v2';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  constructor: false,\r\n  setDesignerOpen: false,\r\n}\r\n\r\n/**\r\n * Contains methods for extended CRUD operations for formulas.\r\n */\r\n@Injectable()\r\nexport class FormulaDesignerService {\r\n\r\n  log = classLog({FormulaDesignerService}, logSpecs);\r\n\r\n  public cache = transient(FormulaCacheService);\r\n  #targetsService = transient(FormulaTargetsService);\r\n\r\n  constructor(private itemService: ItemService) {\r\n    this.log.fnIf('constructor');\r\n  }\r\n\r\n  /**\r\n   * Contain all the settings to all items/settings in this form\r\n   * for rare cases (formulas) which need to access settings of all items\r\n   */\r\n  public itemSettingsServices: Record<string, FieldsSettingsService> = {};\r\n\r\n  /** The current state of the UI, what field is being edited etc. */\r\n  public designerState = signalObj<DesignerState>('designerState', {\r\n    editMode: false,\r\n    entityGuid: undefined,\r\n    fieldName: undefined,\r\n    isOpen: false,\r\n    target: undefined,\r\n  } satisfies DesignerState);\r\n\r\n  /** Formula result of the formula which is currently open in the editor */\r\n  formulaResult = computedObj('formulaResult', () => {\r\n    const state = this.designerState();\r\n    return this.cache.resultListIndexAndOriginal(state).value;\r\n  });\r\n\r\n  currentTargetOptions = computedObj<TargetOption[]>('currentTargetOptions', () => {\r\n    const state = this.designerState();\r\n    const formulas = this.cache.formulas();\r\n    return this.#targetsService.getTargetOptions(state, formulas);\r\n  });\r\n\r\n  /** Possible entities incl. state if they have formulas */\r\n  entityOptions = computedObj<EntityOption[]>('entityOptions', () => {\r\n    // this is a signal, so this will change when the data is loaded...\r\n    const formulas = this.cache.formulas();\r\n    return Object.entries(this.itemSettingsServices).map(([entityGuid, settingsSvc]) => {\r\n      const entityFormulas = formulas.filter(f => f.entityGuid === entityGuid);\r\n      return {\r\n        entityGuid: entityGuid,\r\n        formulas: entityFormulas,\r\n        hasFormula: entityFormulas.length > 0,\r\n        label: settingsSvc.contentTypeSettings()._itemTitle,\r\n      } satisfies EntityOption;\r\n    })\r\n  });\r\n\r\n  /** possible fields of the current entity incl. state such as if it has formulas */\r\n  fieldsOptions = computedObj<FieldOption[]>('fieldsOptions', () => {\r\n    const guid = this.designerState().entityGuid;\r\n    if (guid == null)\r\n      return [];\r\n    const entityFormulas = this.entityOptions().find(e => e.entityGuid == guid).formulas;\r\n    // find the current fieldSettingsService to get all properties\r\n    const selectedSettings = this.itemSettingsServices[guid];\r\n    const fieldsProps = selectedSettings.allProps();\r\n    const fieldOptions: FieldOption[] = Object.keys(fieldsProps).map(fieldName => {\r\n      const formulas = entityFormulas.filter(f => f.fieldName === fieldName);\r\n      return {\r\n        fieldName,\r\n        formulas,\r\n        hasFormula: formulas.length > 0,\r\n        inputType: fieldsProps[fieldName].settings.InputType,\r\n        label: fieldName,\r\n      } satisfies FieldOption;\r\n    });\r\n    return fieldOptions;\r\n  });\r\n\r\n  initAfterItemSettingsAreReady(): void {\r\n    // Initialize the first designer state to contain the first item and field\r\n    const oldState = this.designerState();\r\n    const [entityGuid, settingsSvc] = Object.entries(this.itemSettingsServices)[0];\r\n    const fieldsProps = settingsSvc.allProps();\r\n    const firstFieldName = Object.keys(fieldsProps)[0];\r\n    const target = firstFieldName != null ? FormulaTargets.Value : null;\r\n\r\n    const newState: DesignerState = {\r\n      ...oldState,\r\n      entityGuid,\r\n      fieldName: firstFieldName,\r\n      target,\r\n    };\r\n    this.designerState.set(newState);\r\n  }\r\n\r\n  /** The currently selected formula or null */\r\n  currentFormula = computedObj<FormulaCacheItem>('currentFormula', () => {\r\n    const s = this.designerState();\r\n    const { value } = this.cache.formulaListIndexAndOriginal(s);\r\n    return value;\r\n  });\r\n\r\n  /** Snippets for the current formula based on it's version */\r\n  v1ContextSnippets = computedObj('v1ContextSnippets', () => {\r\n    const current = this.currentFormula();\r\n    return current != null\r\n    ? FormulaV1Helpers.buildDesignerSnippetsContext(current)\r\n    : [];\r\n  });\r\n\r\n  /** Snippets for the current item header based on the current formulas target guid */\r\n  #currentItemHeader = computedObj('currentItemHeader', () => {\r\n    const guid = this.designerState().entityGuid;\r\n    return guid == null ? null : this.itemService.getItemHeader(guid);\r\n  });\r\n\r\n  /** JS Typings for V2 formulas - all the properties and type names */\r\n  v2JsTypings = computedObj('v2JsTypings', () => {\r\n    const formula = this.currentFormula();\r\n    const itemHeader = this.#currentItemHeader();\r\n    return formula != null && itemHeader != null\r\n      ? IntellisenseV2.getTypings(formula, this.fieldsOptions(), itemHeader.Prefill)\r\n      : ''\r\n  });\r\n\r\n  /** Data snippets for the current formula V1 - all the data that can be used in formulas */\r\n  v1DataSnippets = computedObj('v1DataSnippets', () => {\r\n    const formula = this.currentFormula();\r\n    const itemHeader = this.#currentItemHeader();\r\n    return formula != null && itemHeader != null\r\n    ? FormulaV1Helpers.getSnippets(formula, this.fieldsOptions(), itemHeader.Prefill)\r\n    : []\r\n  });\r\n\r\n\r\n  /**\r\n   * Used for opening or closing designer\r\n   * @param isOpen\r\n   */\r\n  setDesignerOpen(isOpen: boolean): void {\r\n    this.log.fnIf('setDesignerOpen', { isOpen });\r\n    this.designerState.set({\r\n      ...this.designerState(),\r\n      isOpen,\r\n    } satisfies DesignerState);\r\n  }\r\n}\r\n","import { FieldValueOrResultRaw } from './results/formula-results.models';\r\nimport { FormulaV1Context } from './run/formula-run-context.model';\r\nimport { FormulaV1Data } from './run/formula-run-data.model';\r\nimport { FormulaV1Experimental } from './run/formula-run-experimental.model';\r\n\r\n//#region Formula strings / parts to process and show templates\r\n\r\n/**\r\n * This must be in front of every formula so that JavaScript will run it.\r\n * Normally it's not there, so it's added before running the code.\r\n */\r\nexport const runFormulaPrefix = 'function ';\r\n\r\n// V1 sample, just for reference\r\n// const defaultFormulaV1 = `${requiredFormulaPrefix}v1 (data, context) {\r\n//   return data.value;\r\n// }`;\r\n\r\n// new\r\nconst defaultFormulaV2 = `v2((data, context) => {\r\n  return data.value;\r\n});`;\r\n\r\nexport const defaultFormula = defaultFormulaV2;\r\n\r\nconst listItemFormulaV2 = `v2((data, context, item) => {\r\n  return data.value;\r\n});`;\r\n\r\nexport const defaultListItemFormula = listItemFormulaV2;\r\n\r\n//#endregion\r\n\r\n//#region Formula Function Types\r\n\r\nexport type FormulaFunction = FormulaFunctionDefault | FormulaFunctionV1;\r\n\r\nexport type FormulaFunctionDefault = () => FieldValueOrResultRaw;\r\n\r\nexport type FormulaFunctionV1 = (data: FormulaV1Data, context: FormulaV1Context, experimental: FormulaV1Experimental) => FieldValueOrResultRaw;\r\n\r\n//#endregion\r\n\r\n//#region Formula Versions\r\n\r\nexport const FormulaVersions = {\r\n  V1: 'v1',\r\n  V2: 'v2',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n//#endregion","import { FormulaFieldValidation } from '../targets/formula-targets';\r\nimport { FormulaV1Data } from './formula-run-data.model';\r\nimport { FormulaExecutionSpecsWithRunParams, FormulaRunParameters, FormulaRunPickers } from './formula-objects-internal-data';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { PickerItem } from '../../fields/picker/models/picker-item.model';\r\nimport { StateUiMapperBase } from '../../fields/picker/adapters/state-ui-mapper-base';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\n\r\n/**\r\n * The object containing data information.\r\n * Usually given to a formula on the first parameter.\r\n * eg v2((DATA, ctx) => { ... })\r\n */\r\nexport class FormulaDataObject implements FormulaV1Data {\r\n  /** Private variable containing the data used in the getters */\r\n  #propsData: FormulaExecutionSpecsWithRunParams;\r\n  #params: FormulaRunParameters;\r\n  #valueMapper: StateUiMapperBase;\r\n  #picker: FormulaRunPickers;\r\n\r\n  constructor(propsData: FormulaExecutionSpecsWithRunParams) {\r\n    this.#propsData = propsData;\r\n    this.#params = propsData.runParameters;\r\n    this.#picker = this.#params.pickerHelper.infos;\r\n    this.#valueMapper = this.#params.pickerHelper.infos.mapper;\r\n  }\r\n\r\n  get default(): FieldValue {\r\n    const { formula } = this.#params;\r\n    if (formula.isValue)\r\n      return this.#value(this.#params.defaultValueHelper().getDefaultOrPrefillValue());\r\n\r\n    if (formula.isSetting)\r\n      return (this.#params.settingsInitial)[formula.settingName as keyof FieldSettings] as FieldValue;\r\n\r\n    if (formula.isNewPicker)\r\n      return this.#picker.options.list as unknown as FieldValue;\r\n  }\r\n\r\n  get initial(): FieldValue {\r\n    const formula = this.#params.formula;\r\n    return formula.isValue\r\n      ? this.#value(this.#propsData.initialFormValues[formula.fieldName])\r\n      : null;\r\n  }\r\n\r\n  get parameters(): Record<string, any> {\r\n    return this.#propsData.parameters.all();\r\n  }\r\n\r\n  get prefill(): FieldValue {\r\n    const { formula } = this.#params;\r\n    return formula.isValue\r\n      ? this.#value(this.#params.defaultValueHelper().getDefaultOrPrefillValue(true))\r\n      : null;\r\n  }\r\n\r\n  get value(): FieldValue | FormulaFieldValidation {\r\n    const formula = this.#params.formula;\r\n\r\n    if (formula.isValue)\r\n      return this.#value(this.#params.currentValues[formula.fieldName]);\r\n\r\n    if (formula.isSetting)\r\n      return (this.#params.settingsCurrent)[formula.settingName as keyof FieldSettings] as FieldValue;\r\n\r\n    if (formula.isValidation)\r\n      return {\r\n        severity: '',\r\n        message: '',\r\n      } satisfies FormulaFieldValidation;\r\n  }\r\n\r\n  /** Get the selected data - make sure it's a copy of each item, so changes don't affect the source! */\r\n  get selected(): PickerItem[] { return this.#getSelected('list'); }\r\n\r\n  get selectedRaw(): PickerItem[] { return this.#getSelected('listRaw'); }\r\n\r\n  #getSelected(part: 'list' | 'listRaw') {\r\n    const list = this.#picker.selected[part];\r\n    return this.#picker.picker.selectedCopy(list);\r\n  }\r\n\r\n  get options(): PickerItem[] {\r\n    return this.#getOptions('list');\r\n  }\r\n\r\n  get optionsRaw(): PickerItem[] {\r\n    return this.#getOptions('listRaw');\r\n  }\r\n\r\n  #getOptions(part: 'list' | 'listRaw') {\r\n    // TODO: create copy!\r\n    const list = this.#picker.options[part];\r\n    return list;\r\n  }\r\n\r\n\r\n  #value(raw: FieldValue): FieldValue {\r\n    return this.#valueMapper?.toUi(raw) ?? raw;\r\n  }\r\n}\r\n","import { Sxc } from '@2sic.com/2sxc-typings';\r\nimport { FormulaVersions } from '../formula-definitions';\r\nimport { FormulaV1Context, FormulaV1CtxApp, FormulaV1CtxCulture, FormulaV1CtxFeatures, FormulaV1CtxForm, FormulaV1CtxTarget, FormulaV1CtxTargetEntity, FormulaV1CtxUser } from './formula-run-context.model';\r\nimport { FormulaExecutionSpecsWithRunParams } from './formula-objects-internal-data';\r\nimport { FormulaExperimentalObject } from './formula-experimental-object';\r\nimport { FormulaContextEntityInfo } from './formula-run-experimental.model';\r\n\r\n/**\r\n * The object containing context information.\r\n * Usually given to a formula on the second parameter.\r\n * eg v2((data, CTX) => { ... })\r\n */\r\nexport class FormulaContextObject implements FormulaV1Context {\r\n\r\n  cache: Record<string, any>;\r\n  debug: boolean;\r\n  sxc: Sxc;\r\n  user: FormulaV1CtxUser;\r\n  app: FormulaV1CtxApp;\r\n  culture: FormulaV1CtxCulture;\r\n\r\n  /**\r\n   * new v18.01\r\n   */\r\n  entities: FormulaContextEntities;\r\n\r\n  features: FormulaV1CtxFeatures;\r\n  form: FormulaV1CtxForm;\r\n  target: FormulaV1CtxTarget;\r\n\r\n  xp: FormulaExperimentalObject;\r\n\r\n  constructor(specs: FormulaExecutionSpecsWithRunParams, experimental: FormulaExperimentalObject) {\r\n    const formula = specs.runParameters.formula;\r\n    this.cache = formula.cache;\r\n    this.debug = specs.debugEnabled;\r\n    this.sxc = formula.sxc;\r\n    this.user = formula.user;\r\n\r\n    // Build the App, but don't include the getSetting method which would be an empty method\r\n    const { getSetting, ...partialApp } = specs.runParameters.formula.app;\r\n    this.app = Object.assign(new FormulaContextApp(specs), partialApp);\r\n\r\n    this.target = new FormulaContextTarget(specs);\r\n\r\n    const language = specs.language;\r\n    const languages = specs.languages\r\n    this.culture = {\r\n      code: language.current,\r\n      name: languages.find(l => l.NameId === language.current)?.Culture,\r\n    };\r\n\r\n    this.features = new FormulaContextFeatures(specs);\r\n\r\n    this.form = new FormulaContextForm(specs);\r\n\r\n    this.entities = new FormulaContextEntities(specs);\r\n\r\n    this.xp = experimental;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * new v18.01\r\n */\r\nclass FormulaContextEntities {\r\n  constructor(private specs: FormulaExecutionSpecsWithRunParams) { }\r\n\r\n  /**\r\n   * \r\n   * @returns All entities in the context\r\n   * new v18.01\r\n   */\r\n  getAll() {\r\n    const v1Entities = this.specs.itemService.getMany(this.specs.formConfig.config.itemGuids).map(i => ({\r\n      guid: i.Entity.Guid,\r\n      id: i.Entity.Id,\r\n      type: {\r\n        guid: i.Entity.Type.Id,\r\n        name: i.Entity.Type.Name,\r\n      }\r\n    } satisfies FormulaContextEntityInfo));\r\n    return v1Entities;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param guidOrName \r\n   * @returns The first entity in the context which matches the guid or name\r\n   * new v18.01\r\n   */\r\n  getOfType(guidOrName: string) {\r\n    return this.getAll().find(a => a.type.guid == guidOrName || a.type.name == guidOrName);\r\n  }\r\n}\r\n\r\nclass FormulaContextFeatures implements FormulaV1CtxFeatures {\r\n  constructor(private specs: FormulaExecutionSpecsWithRunParams) { }\r\n\r\n  isEnabled(name: string): boolean {\r\n    return this.specs.features().find(f => f.nameId === name)?.isEnabled ?? false;\r\n  }\r\n}\r\n\r\nclass FormulaContextForm implements FormulaV1CtxForm {\r\n  constructor(private specs: FormulaExecutionSpecsWithRunParams) { }\r\n\r\n  runFormulas(): void {\r\n    const formula = this.specs.runParameters.formula;\r\n    if (formula.version === FormulaVersions.V1) {\r\n      console.error('form.runFormulas() is being deprecated and will stop working end of 2024. Use V2 formulas and return the promise. Formulas will auto-run when it completes.');\r\n      this.specs.fieldsSettingsSvc.retriggerFormulas('form.runFormulas()');\r\n      return;\r\n    }\r\n    \r\n    console.error('form.runFormulas() is not supported in V2 formulas. Just return a promise.');\r\n  }\r\n}\r\n\r\n/**\r\n * The object containing app context information.\r\n * Usually on the context.app property.\r\n * \r\n * Note that most properties are assigned to this object from outside, which is why we don't initialize them.\r\n * This is because they are created once, and don't need to be re-created for each formula run.\r\n */\r\nclass FormulaContextApp implements FormulaV1CtxApp {\r\n  /** Private variable containing the data used in the getters */\r\n  #propsData: FormulaExecutionSpecsWithRunParams;\r\n\r\n  constructor(propsData: FormulaExecutionSpecsWithRunParams) {\r\n    this.#propsData = propsData;\r\n  }\r\n\r\n  appId: number;\r\n  zoneId: number;\r\n  isGlobal: boolean;\r\n  isSite: boolean;\r\n  isContent: boolean;\r\n  getSetting(settingPath: string) {\r\n    if (this.#propsData.runParameters.formula.version === FormulaVersions.V1) {\r\n      console.warn('app.getSetting() is not available in v1 formulas, please use v2.');\r\n      return ' error - see console';\r\n    }\r\n\r\n    const result = this.#propsData.formConfig.config.settings.Values[settingPath];\r\n    if (result != null)\r\n      return result;\r\n    console.warn(`Error: Setting '${settingPath}' not found. Did you configure it in the ContentType to be included? ` +\r\n      `See https://go.2sxc.org/formulas`);\r\n    return ' error - see console';\r\n  }\r\n}\r\n\r\n/**\r\n * The object containing formula target information.\r\n * So it says what the formula is for, which entity, field, setting/value etc.\r\n * Usually on the context.target property.\r\n */\r\nclass FormulaContextTarget implements FormulaV1CtxTarget {\r\n\r\n  entity: FormulaV1CtxTargetEntity;\r\n  name: string;\r\n  type: string;\r\n\r\n  /** Private variable containing the data used in the getters */\r\n  #propsData: FormulaExecutionSpecsWithRunParams;\r\n\r\n  constructor(propsData: FormulaExecutionSpecsWithRunParams) {\r\n    this.#propsData = propsData;\r\n    const def = propsData.runParameters.formula;\r\n    this.entity = def.targetEntity;\r\n\r\n    // Name and type are truncated from the original target string if it's a setting\r\n    const isValueOrValidation = def.isValue || def.isValidation;\r\n    this.name = isValueOrValidation\r\n      ? def.fieldName\r\n      : def.target.substring(def.target.lastIndexOf('.') + 1);\r\n    this.type = isValueOrValidation\r\n      ? def.target\r\n      : def.target.substring(0, def.target.lastIndexOf('.'))\r\n  }\r\n\r\n}","import { FormulaContextEntityInfo } from './formula-run-experimental.model';\r\nimport { FormulaV1Experimental } from './formula-run-experimental.model';\r\nimport { FormulaExecutionSpecsWithRunParams } from './formula-objects-internal-data';\r\nimport { FieldSettings } from '../../../../../../edit-types/src/FieldSettings';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\nimport { EntityReader } from '../../shared/helpers';\r\n\r\nconst messageObsolete = 'A formula in this dialog is using an experimental feature: \"{0}\" - this will be removed soon.';\r\n\r\n/**\r\n * The object containing experimental information which can change at any time.\r\n * Usually given to a formula on the third parameter, but not officially documented.\r\n * eg v2((data, ctx, experimental) => { ... })\r\n */\r\nexport class FormulaExperimentalObject implements FormulaV1Experimental {\r\n\r\n  constructor(private specs: FormulaExecutionSpecsWithRunParams) { }\r\n\r\n  getEntities(): FormulaContextEntityInfo[] {\r\n    this.#showWarningObsolete('getEntities');\r\n    const v1Entities = this.specs.itemService.getMany(this.specs.formConfig.config.itemGuids).map(i => ({\r\n      guid: i.Entity.Guid,\r\n      id: i.Entity.Id,\r\n      type: {\r\n        guid: i.Entity.Type.Id,\r\n        name: i.Entity.Type.Name,\r\n      }\r\n    } satisfies FormulaContextEntityInfo));\r\n    return v1Entities;\r\n  }\r\n\r\n  getSettings(fieldName: string): FieldSettings {\r\n    this.#showWarningObsolete('getSettings');\r\n    return this.specs.fieldsSettingsSvc.settings[fieldName]();\r\n  }\r\n\r\n  getValues(entityGuid: string): ItemValuesOfLanguage {\r\n    this.#showWarningObsolete('getValues');\r\n    const item = this.specs.itemService.get(entityGuid);\r\n    const reader = new EntityReader(this.specs.language);\r\n    return reader.currentValues(item.Entity.Attributes);\r\n  }\r\n\r\n  #showWarningObsolete(name: string) {\r\n    const msg = messageObsolete.replace('{0}', name);\r\n    console.error(msg);\r\n\r\n    if (this.specs.warningsObsolete[name])\r\n      return;\r\n    this.specs.warningsObsolete[name] = true;\r\n    alert(msg);\r\n  }\r\n}","import { untracked } from '@angular/core';\r\nimport { FormulaCacheItem } from './cache/formula-cache.model';\r\nimport { FormulaDesignerService } from './designer/formula-designer.service';\r\nimport { FormulaPropsV1 } from './formula-run-one-helpers.factory';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { LoggingService, LogSeverities } from '../shared/services/logging.service';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\n\r\nexport class FormulaDeveloperHelper {\r\n\r\n  constructor(\r\n    private designerSvc: FormulaDesignerService,\r\n    private translate: TranslateService,\r\n    private logSvc: LoggingService,\r\n    private formula: FormulaCacheItem,\r\n    private ctTitle: string,\r\n    private formulaProps: FormulaPropsV1,\r\n  ) {\r\n    this.isOpen = this.#isDesignerOpen(formula);\r\n  }\r\n  \r\n  /** The designer is currently open, so we should show more information to the developer */\r\n  public isOpen: boolean = false;\r\n\r\n  showStart() {\r\n    if (!this.isOpen) return;\r\n    const f = this.formula;\r\n    console.log(`Running formula${f.version?.toLocaleUpperCase()} for Entity: \"${this.ctTitle}\", Field: \"${f.fieldName}\", Target: \"${f.target}\", arguments:`, this.formulaProps);\r\n  }\r\n\r\n  showResult(value: FieldValue, isError: boolean, isOnlyPromise: boolean) {\r\n    this.designerSvc.cache.cacheResults(this.formula, value, false, false);\r\n    if (this.isOpen)\r\n      console.log('Formula result:', value);\r\n  }\r\n\r\n  showError(error: unknown) {\r\n    const formula = this.formula;\r\n    const errorLabel = `Error in formula calculation for Entity: \"${this.ctTitle}\", Field: \"${formula.fieldName}\", Target: \"${formula.target}\"`;\r\n    this.designerSvc.cache.cacheResults(formula, undefined, true, false);\r\n    this.logSvc.addLog(LogSeverities.Error, errorLabel, error);\r\n    if (this.isOpen)\r\n      console.error(errorLabel, error);\r\n    else\r\n      this.logSvc.showMessage(this.translate.instant('Errors.FormulaCalculation'), 2000);\r\n  }\r\n\r\n  /**\r\n   * Used for checking if the currently running formula is open in designer.\r\n   * @param f\r\n   * @returns True if formula is open in designer, otherwise false\r\n   */\r\n  #isDesignerOpen(f: FormulaCacheItem): boolean {\r\n    return untracked(() => {\r\n      const ds = this.designerSvc.designerState();\r\n      const isOpenInDesigner = ds.isOpen && ds.entityGuid === f.entityGuid && ds.fieldName === f.fieldName && ds.target === f.target;\r\n      return isOpenInDesigner;\r\n    });\r\n  }\r\n}","\r\nimport { FormulaVersions } from './formula-definitions';\r\nimport { FormulaDataObject } from './run/formula-run-data';\r\nimport { FormulaExecutionSpecsWithRunParams } from './run/formula-objects-internal-data';\r\nimport { FormulaContextObject } from './run/formula-run-context';\r\nimport { FormulaExperimentalObject } from './run/formula-experimental-object';\r\nimport { FormulaV1Data } from './run/formula-run-data.model';\r\nimport { FormulaV1Context } from './run/formula-run-context.model';\r\nimport { FormulaV1Experimental } from './run/formula-run-experimental.model';\r\nimport { FormulaDesignerService } from './designer/formula-designer.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { LoggingService } from '../shared/services/logging.service';\r\nimport { FormulaDeveloperHelper } from './formula-developer-helper';\r\nimport { FormulaValueCorrections } from './results/formula-value-corrections.helper';\r\n\r\n/**\r\n * Helper to run a single formula.\r\n * Will be initialized for each field as it's about to run all, and can then provide\r\n * helper objects and build the formula props (data/context/experimental).\r\n */\r\nexport class FormulaRunOneHelpersFactory {\r\n\r\n  constructor(\r\n    private designerSvc: FormulaDesignerService,\r\n    private translate: TranslateService,\r\n    private logSvc: LoggingService,\r\n    public ctTitle: string,\r\n  ) { }\r\n\r\n  public getPartsFor(execSpecs: FormulaExecutionSpecsWithRunParams) {\r\n    const f = execSpecs.runParameters.formula;\r\n    const params = this.#dataAndCtx(execSpecs);\r\n    const devHelper = new FormulaDeveloperHelper(this.designerSvc, this.translate, this.logSvc, f, this.ctTitle, params);\r\n\r\n    return {\r\n      formula: f,\r\n      fieldName: f.fieldName,\r\n      params,\r\n      title: this.ctTitle,\r\n      devHelper,\r\n      valHelper: new FormulaValueCorrections(f.fieldName, f.isValue, f.inputType, devHelper.isOpen, execSpecs.runParameters.pickerHelper.infos.mapper),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Used to build formula props parameters.\r\n   * @returns Formula properties\r\n   */\r\n  #dataAndCtx(runParams: FormulaExecutionSpecsWithRunParams,): FormulaPropsV1 {\r\n    const { formula, currentValues: formValues } = runParams.runParameters;\r\n    \r\n    switch (formula.version) {\r\n      case FormulaVersions.V1:\r\n      case FormulaVersions.V2:\r\n\r\n        // Create the data object and add all value properties of the form to it\r\n        const data = Object.assign(new FormulaDataObject(runParams), formValues);\r\n\r\n        const experimental = new FormulaExperimentalObject(runParams);\r\n\r\n        const context = new FormulaContextObject(runParams, experimental);\r\n\r\n        return {\r\n          data,\r\n          context,\r\n          experimental,\r\n        } satisfies FormulaPropsV1;\r\n\r\n      default:\r\n        // default should never happen, so don't return any data to use; will probably error if this happens\r\n        // 2024-09-10 2dm adding throw error here to see if it's anywhere\r\n        // TODO: REMOVE option default everywhere ca. 2024-Q3\r\n        throw new Error(`Formula version unknown not supported`);\r\n        // return;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Used to build the formula props parameters as a record of key-value pairs.\r\n * @param prefillAsParameters\r\n * @returns\r\n */\r\nexport class FormulaPropsParameters {\r\n  constructor(private prefill: Record<string, unknown>) { }\r\n\r\n  all(): Record<string, any> {\r\n    if (!this.#cache)\r\n      this.#cache = this.prefill ? JSON.parse(JSON.stringify(this.prefill)) : {};\r\n    return this.#cache;\r\n  }\r\n  #cache: Record<string, any>;\r\n}\r\n\r\n\r\n\r\nexport interface FormulaPropsV1 {\r\n  data: FormulaV1Data;\r\n  context: FormulaV1Context;\r\n  experimental: FormulaV1Experimental;\r\n}\r\n","import { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { DataTypeCatalog } from \"../../../shared/fields/data-type-catalog\";\r\nimport { InputTypeCatalog } from \"../../../shared/fields/input-type-catalog\";\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { StateUiMapperBase } from '../../fields/picker/adapters/state-ui-mapper-base';\r\nimport { PickerItem } from '../../fields/picker/models/picker-item.model';\r\nimport { InputTypeSpecs } from '../../shared/input-types/input-type-specs.model';\r\nimport { FieldFormulasResultRaw, FieldValueOrResultRaw } from \"./formula-results.models\";\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  v1: false,\r\n  v2: false,\r\n  allValues: true,\r\n  oneValue: true,\r\n  fields: [...DebugFields],\r\n}\r\n\r\n/**\r\n * Contains methods for correcting formula results.\r\n */\r\nexport class FormulaValueCorrections {\r\n\r\n  log = classLog({FormulaValueCorrections}, logSpecs);\r\n\r\n  constructor(\r\n    private fieldName: string,\r\n    private isValue: boolean,\r\n    private inputType: InputTypeSpecs,\r\n    private isOpen: boolean,\r\n    private valueMapper?: StateUiMapperBase,\r\n  ) { }\r\n\r\n\r\n  v1(v1Result: FieldValueOrResultRaw): { ok: boolean, v1Result: FieldFormulasResultRaw } {\r\n    const isArray = v1Result && Array.isArray(v1Result) && v1Result.every(r => typeof r === 'string');\r\n    const resultIsPure = ['string', 'number', 'boolean'].includes(typeof v1Result) || v1Result instanceof Date || isArray || !v1Result;\r\n    if (!resultIsPure)\r\n      return { ok: false, v1Result: this.toFormulaResult(undefined) };\r\n\r\n    const v1Value = this.isValue\r\n      ? this.#oneValue(v1Result as FieldValue)\r\n      : v1Result as FieldValue;\r\n    return { ok: true, v1Result: this.toFormulaResult(v1Value) };\r\n  }\r\n\r\n  v2(result: FieldValueOrResultRaw): FieldFormulasResultRaw {\r\n    const raw = this.allValues(result);\r\n    return { ...raw, openInDesigner: this.isOpen };\r\n  }\r\n\r\n  /**\r\n   * This method is used to support duck typing in the formula result and from it to fill FormulaResultRaw object with corrected values.\r\n   * @param target Formula target\r\n   * @param result Formula result\r\n   * @param inputType InputType is needed to check if the result is a date which needs to be corrected\r\n   * @returns Strongly typed FormulaResultRaw object\r\n   */\r\n  allValues(result: FieldValueOrResultRaw): FieldFormulasResultRaw {\r\n    const l = this.log.fnIfInList('allValues', 'fields', this.fieldName, { result });\r\n\r\n    // if (l.enabled)\r\n    //   debugger;\r\n\r\n    // 2024-09-10 21:15 2dm changed this, as I believe all cases have a clear stop-value\r\n    // const stop = (result as FormulaResultRaw)?.stop ?? null;\r\n    const defaults: Partial<FieldFormulasResultRaw> = { value: undefined, fields: [], stop: null, sleep: null };\r\n    if (result == null)\r\n      return l.r({ ...defaults, value: result as FieldValue}, 'null/empty');\r\n    \r\n    const targetIsValue = this.isValue;\r\n\r\n    // Show warning if array - new v18 newPicker\r\n    if (Array.isArray(result)) {\r\n      console.warn('Formula result was an array - this is not allowed. Please return an object containing the array instead: { value: [...] }.', result);\r\n      return l.r(defaults, 'array');\r\n    }\r\n\r\n    // Handle object results - the larger / more complex case\r\n    if (typeof result === 'object') {\r\n      if (result instanceof Date && targetIsValue)\r\n        return l.r({ ...defaults, value: this.#oneValue(result) }, 'date');\r\n\r\n      if (result instanceof Promise)\r\n        return l.r({\r\n          ...defaults,\r\n          value: undefined,\r\n          promise: result as Promise<FieldFormulasResultRaw>,\r\n        }, 'promise');\r\n\r\n      const raw: FieldFormulasResultRaw = result as FieldFormulasResultRaw;\r\n\r\n      // fix stop so it's never undefined\r\n      raw.stop ??= null;\r\n      raw.sleep ??= null;\r\n\r\n      // Fix single value - but only if it's not an array, in which case we must leave as is\r\n      if (raw.value && targetIsValue)\r\n        raw.value = Array.isArray(raw.value)\r\n          ? this.valueMapper?.toState(raw.value) ?? raw.value\r\n          : this.#oneValue(raw.value);\r\n\r\n      // fix fields\r\n      if (raw.fields)\r\n        raw.fields = raw.fields?.map(f => {\r\n          f.value = this.#oneValue(f.value);\r\n          return f;\r\n        });\r\n\r\n      // test options\r\n      if (raw.options) {\r\n        if (!Array.isArray(raw.options)) {\r\n          console.error('options is not an array', raw.options);\r\n          raw.options = [];\r\n        } else if (raw.options.length > 0) {\r\n          if (raw.options.find(o => !o || o.value == null)) {\r\n            console.error('some options are missing value', raw.options);\r\n            raw.options = [];\r\n          }\r\n          if (hasDuplicateValues(raw.options)) {\r\n            console.error('duplicate values in options', raw.options);\r\n            raw.options = [];\r\n          }\r\n        }\r\n      }\r\n      return l.r(raw, 'object');\r\n    }\r\n\r\n    // Non-Object results\r\n    const value: FieldFormulasResultRaw = { value: result as FieldValue };\r\n\r\n    // Handle value only result\r\n    // atm we are only correcting Value formulas\r\n    if (targetIsValue)\r\n      return l.r({ ...defaults, value: this.#oneValue(value.value) }, 'non-object, value');\r\n    return l.r(value, 'non-object, non-value');\r\n  }\r\n\r\n  /**\r\n   * Used to correct datetime field value from formula result.\r\n   * @param value Field value from formula result\r\n   * @param inputType InputType is needed to check if the result is a date which needs to be corrected\r\n   * @returns Corrected field value\r\n   */\r\n  #oneValue(value: FieldValue | Date): FieldValue {\r\n    if (value == null)\r\n      return value as FieldValue;\r\n\r\n    const inputType = this.inputType.inputType;\r\n    \r\n    if (inputType === InputTypeCatalog.DateTimeDefault || value instanceof Date) {\r\n      const date = new Date(value as string | number | Date);\r\n\r\n      // if value is not ISO string, nor milliseconds, correct timezone\r\n      if (!(typeof value === 'string' && value.endsWith('Z')) && date.getTime() !== value)\r\n        date.setTime(date.getTime() - date.getTimezoneOffset() * 60000);\r\n\r\n      date.setMilliseconds(0);\r\n      return date.toJSON();\r\n    }\r\n    \r\n    if (typeof (value) !== 'string' && (inputType?.startsWith(DataTypeCatalog.String.toLocaleLowerCase())\r\n      || inputType?.startsWith(DataTypeCatalog.Hyperlink.toLocaleLowerCase()))) {\r\n      return value.toString();\r\n    }\r\n    return value;\r\n  }\r\n\r\n\r\n  toFormulaResult(value: FieldValue): FieldFormulasResultRaw {\r\n    return {\r\n      value,\r\n      fields: [],\r\n      stop: null,\r\n      sleep: null,\r\n      openInDesigner: this.isOpen\r\n    };\r\n  }\r\n}\r\n\r\nfunction hasDuplicateValues(options: PickerItem[]) {\r\n  var ids = options.map(o => o.value);\r\n  var uniqueIds = new Set(ids);\r\n  if (ids.length !== uniqueIds.size) {\r\n    console.error('Duplicate values in options', options);\r\n    return true;\r\n  }\r\n  return false;\r\n}","/** Prefix for any kind of field settings */\r\nexport const SettingsFormulaPrefix = 'Field.Settings.';\r\n\r\n\r\n\r\n/** Default targets for formulas */\r\nexport const FormulaDefaultTargets = {\r\n  Disabled: `${SettingsFormulaPrefix}Disabled`,\r\n  Name: `${SettingsFormulaPrefix}Name`,\r\n  Notes: `${SettingsFormulaPrefix}Notes`,\r\n  Required: `${SettingsFormulaPrefix}Required`,\r\n  Value: 'Field.Value',\r\n  Visible: `${SettingsFormulaPrefix}Visible`,\r\n  Validation: 'Field.Validation',\r\n};\r\n\r\n/** Values of the Default Targets (used often, so precalculated) */\r\nexport const FormulaDefaultTargetValues = Object.values(FormulaDefaultTargets);\r\n\r\n\r\n\r\n/** Targets for new Pickers only */\r\nexport const FormulaNewPickerTargets = {\r\n  Options: 'Field.Options',\r\n  Selected: 'Field.Selected',\r\n};\r\n\r\n/** Values of the NewPicker Targets (used often, so precalculated) */\r\nexport const FormulaNewPickerTargetValues = Object.values(FormulaNewPickerTargets);\r\n\r\nexport const FormulaSpecialPickerTargets = [\r\n  FormulaNewPickerTargets.Options,\r\n  // FormulaDefaultTargets.Value,\r\n  FormulaNewPickerTargets.Selected,\r\n];\r\n\r\n/** These formulas should auto-sleep unless specified otherwise */\r\nexport const FormulaSpecialPickerAutoSleep = [\r\n  FormulaNewPickerTargets.Options,\r\n  FormulaNewPickerTargets.Selected,\r\n];\r\n\r\n\r\n\r\nexport const FormulaOptionalTargets = {\r\n  Collapsed: `${SettingsFormulaPrefix}Collapsed`,\r\n  DropdownValues: `${SettingsFormulaPrefix}DropdownValues`,\r\n};\r\n\r\nexport const FormulaOptionalTargetValues = Object.values(FormulaOptionalTargets);\r\n\r\n\r\n\r\n/** All possible targets for formulas (merged) */\r\nexport const FormulaTargets = {\r\n  ...FormulaDefaultTargets,\r\n  ...FormulaOptionalTargets,\r\n  ...FormulaNewPickerTargets,\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n/** Validation object interface */\r\nexport interface FormulaFieldValidation {\r\n  severity: '' | 'error' | 'warning';\r\n  message?: string;\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { classLog } from '../../shared/logging';\r\nimport { Language } from '../../shared/models/language.model';\r\nimport { SignalStoreBase } from '../shared/store/signal-store-base';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LanguageService extends SignalStoreBase<string, Language> {\r\n\r\n  constructor() {\r\n    super(classLog({LanguageService}));\r\n  }\r\n\r\n  override getId = (item: Language) => item.NameId.toLocaleLowerCase();\r\n}\r\n","export const TranslationLinks = {\r\n  Translate: 'Translate',\r\n  DontTranslate: 'DontTranslate',\r\n  MissingDefaultLangValue: 'MissingDefaultLangValue',\r\n  LinkReadOnly: 'LinkReadOnly',\r\n  LinkReadWrite: 'LinkReadWrite',\r\n  LinkCopyFrom: 'LinkCopyFrom',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { Injectable } from '@angular/core';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavEntity } from '../models/eav';\r\nimport { EavEntityDto } from '../models/json-format-v1';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\n\r\n/**\r\n * Content-Type Items are additional entities which the ContentType info needs.\r\n * For example, external formulas.\r\n * \r\n * This service stores / retrieves these.\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class ContentTypeItemService extends SignalStoreBase<string, EavEntity> {\r\n\r\n  constructor() {\r\n    super(classLog({ContentTypeItemService}));\r\n  }\r\n\r\n  override getId = (item: EavEntity) => item.Guid;\r\n\r\n  addContentTypeItems(contentTypeItems: EavEntityDto[]): void {\r\n    const converted = EavEntity.convertMany(contentTypeItems);\r\n    this.addMany(converted);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { EavContentType, EavContentTypeAttribute, EavItem } from '../models/eav';\r\nimport { EavContentTypeDto } from '../models/json-format-v1';\r\nimport { ItemHelper } from '../helpers/item.helper';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\nimport { classLog } from '../../../shared/logging';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ContentTypeService extends SignalStoreBase<string, EavContentType> {\r\n\r\n  constructor() {\r\n    super(classLog({ContentTypeService}));\r\n  }\r\n  \r\n  override getId = (item: EavContentType) => item.Id;\r\n\r\n  addContentTypes(contentTypes: EavContentTypeDto[]): void {\r\n    const converted = EavContentType.convertMany(contentTypes);\r\n    this.addMany(converted);\r\n  }\r\n\r\n  getContentTypeOfItem(item: EavItem): EavContentType {\r\n    const nameId = ItemHelper.getContentTypeNameId(item);\r\n    return this.get(nameId);\r\n  }\r\n\r\n  getAttribute(guid: string, name: string): EavContentTypeAttribute {\r\n    return this.get(guid).Attributes.find(a => a.Name === name);\r\n  }\r\n\r\n  getAttributeOfItem(item: EavItem, name: string): EavContentTypeAttribute {\r\n    return this.getContentTypeOfItem(item).Attributes.find(a => a.Name === name);\r\n  }\r\n}\r\n","import { ItemAddIdentifier } from '../../../shared/models/edit-form.model';\r\nimport { EavItem } from '../models/eav';\r\n\r\nexport class ItemHelper {\r\n  static getContentTypeNameId(item: EavItem): string {\r\n    return item.Entity.Type?.Id\r\n      ?? (item.Header as ItemAddIdentifier).ContentTypeName;\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Of } from '../../../../../../core';\r\nimport { AttributeInputType } from '../../../../../../edit-types/src/InputTypeName';\r\nimport { InputTypeCatalog } from '../../../shared/fields/input-type-catalog';\r\nimport { InputTypeHelpers } from '../../../shared/fields/input-type-helpers';\r\nimport { InputTypeMetadata } from '../../../shared/fields/input-type-metadata.model';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavContentTypeAttribute } from '../models/eav';\r\nimport { SignalStoreBase } from '../store/signal-store-base';\r\nimport { InputTypeSpecs } from './input-type-specs.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class InputTypeService extends SignalStoreBase<string, InputTypeMetadata> {\r\n\r\n  constructor() {\r\n    super(classLog({InputTypeService}, null));\r\n  }\r\n\r\n  override getId = (item: InputTypeMetadata) => item.Type;\r\n\r\n  /**\r\n   * Get Name specs with a nice name and a longer name\r\n   * Note: ATM only used in the external connector, not sure why it's even here.\r\n   */\r\n  getAttributeInputTypes(attributes: EavContentTypeAttribute[]): AttributeInputType[] {\r\n    const inputTypes = this.getAll();\r\n    return attributes.map(attribute => {\r\n      const specs = this.getSpecsInternal(attribute, inputTypes);\r\n      return {\r\n        name: attribute.Name,\r\n        inputType: specs.inputType,\r\n      } satisfies AttributeInputType;\r\n    });\r\n  }\r\n\r\n  getSpecs(attribute: EavContentTypeAttribute): InputTypeSpecs {\r\n    return this.getSpecsInternal(attribute, this.getAll());\r\n  }\r\n\r\n  private getSpecsInternal(attribute: EavContentTypeAttribute, inputTypes: InputTypeMetadata[]): InputTypeSpecs {\r\n    const inputTypeMetadata = inputTypes.find(i => i.Type === attribute.InputType);\r\n    const inputType = attribute.InputType as Of<typeof InputTypeCatalog>;\r\n    const name = inputType.toString();\r\n    const calculated: InputTypeSpecs = {\r\n      inputType,\r\n      isExternal: !!inputTypeMetadata?.AngularAssets,\r\n      mustUseGuid: !name.startsWith('string') && !name.startsWith('number'),\r\n      componentTagName: `field-${inputType}`,\r\n      componentTagDialogName: `field-${inputType}-dialog`,\r\n      metadata: inputTypeMetadata,\r\n      isNewPicker: InputTypeHelpers.isNewPicker(inputType),\r\n    };\r\n    return calculated;\r\n  }\r\n\r\n\r\n}\r\n","import { EavEntity, EavEntityAttributes } from '.';\r\nimport { Of } from '../../../../../../../core';\r\nimport { InputTypeCatalog } from '../../../../shared/fields/input-type-catalog';\r\nimport { EavContentTypeAttributesDto } from '../json-format-v1';\r\n\r\nexport class EavContentTypeAttribute {\r\n  InputType: Of<typeof InputTypeCatalog>;\r\n  IsTitle: boolean;\r\n  Metadata: EavEntity[];\r\n  Name: string;\r\n  Settings: EavEntityAttributes;\r\n  Type: string;\r\n\r\n  private static convertOne(ctAttributeDto: EavContentTypeAttributesDto): EavContentTypeAttribute {\r\n    const metadata = EavEntity.convertMany(ctAttributeDto.Metadata);\r\n    const settings = EavEntityAttributes.mergeSettings(metadata);\r\n\r\n    const attribute: EavContentTypeAttribute = {\r\n      InputType: ctAttributeDto.InputType,\r\n      IsTitle: ctAttributeDto.IsTitle,\r\n      Metadata: metadata,\r\n      Name: ctAttributeDto.Name,\r\n      Settings: settings,\r\n      Type: ctAttributeDto.Type,\r\n    };\r\n    return attribute;\r\n  }\r\n\r\n  static convertMany(ctAttributesDto: EavContentTypeAttributesDto[]): EavContentTypeAttribute[] {\r\n    if (ctAttributesDto == null) { return []; }\r\n\r\n    const attributes = ctAttributesDto.map(attribute1 => EavContentTypeAttribute.convertOne(attribute1));\r\n    return attributes;\r\n  }\r\n}\r\n","import { EavContentTypeAttribute, EavEntity, EavEntityAttributes } from '.';\r\nimport { EavContentTypeDto } from '../json-format-v1';\r\n\r\nexport class EavContentType {\r\n  Attributes: EavContentTypeAttribute[];\r\n  /** The NameId / Guid of this Content-Type */\r\n  Id: string;\r\n  Metadata: EavEntity[];\r\n  Name: string;\r\n  Scope: string;\r\n  Settings: EavEntityAttributes;\r\n\r\n  /** WIP v18.02 */\r\n  Title: string;\r\n\r\n  static convertOne(contentTypeDto: EavContentTypeDto): EavContentType {\r\n    const attributes = EavContentTypeAttribute.convertMany(contentTypeDto.Attributes);\r\n    const metadata = EavEntity.convertMany(contentTypeDto.Metadata);\r\n    const settings = EavEntityAttributes.mergeSettings(metadata);\r\n\r\n    const contentType: EavContentType = {\r\n      Attributes: attributes,\r\n      Id: contentTypeDto.Id,\r\n      Metadata: metadata,\r\n      Name: contentTypeDto.Name,\r\n      Scope: contentTypeDto.Scope,\r\n      Settings: settings,\r\n      Title: contentTypeDto.Title,\r\n    };\r\n    return contentType;\r\n  }\r\n\r\n  static convertMany(contentTypesDto: EavContentTypeDto[]): EavContentType[] {\r\n    if (contentTypesDto == null) { return null; }\r\n\r\n    const contentTypes = contentTypesDto.map(contentTypeDto => EavContentType.convertOne(contentTypeDto));\r\n    return contentTypes;\r\n  }\r\n}\r\n","export class EavDimension {\r\n  Value: string;\r\n\r\n  static create(value: string): EavDimension {\r\n    return { Value: value, } satisfies EavDimension;\r\n  }\r\n}\r\n","import { EavValue } from '.';\r\nimport { EavValuesDto } from '../json-format-v1';\r\n\r\nexport class EavField<T> {\r\n  Values: EavValue<T>[];\r\n  Type: string;\r\n\r\n  static convert<T>(valueDto: EavValuesDto<T>, type: string): EavField<T> {\r\n    const values = EavValue.convert(valueDto);\r\n    return {\r\n      Values: values,\r\n      Type: type,\r\n    } satisfies EavField<T>;\r\n  }\r\n}\r\n","import { EavEntity, EavField } from '.';\r\nimport { EavAttributesDto } from '../json-format-v1';\r\n\r\nexport class EavEntityAttributes {\r\n  [attributeName: string]: EavField<any>;\r\n\r\n  static convert(attributesDto: EavAttributesDto): EavEntityAttributes {\r\n    const attributes: EavEntityAttributes = {};\r\n\r\n    // loop attribute types - String, Boolean, ...\r\n    for (const [typeName, attributeDto] of Object.entries(attributesDto)) {\r\n      // loop attribute names - Description, Name, ...\r\n      for (const [attributeName, valueDto] of Object.entries(attributeDto)) {\r\n        attributes[attributeName] = EavField.convert(valueDto, typeName);\r\n      }\r\n    }\r\n    return attributes;\r\n  }\r\n\r\n  static mergeSettings(metadataItems: EavEntity[]): EavEntityAttributes {\r\n    if (metadataItems == null) { return {}; }\r\n\r\n    const merged: EavEntityAttributes = {};\r\n    // copy metadata settings which are not @All\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id === '@All') continue;\r\n\r\n      for (const [name, value] of Object.entries(item.Attributes)) {\r\n        const copy: EavField<any> = { ...value };\r\n        merged[name] = copy;\r\n      }\r\n    }\r\n\r\n    // copy @All metadata settings, overwriting previous settings\r\n    for (const item of metadataItems) {\r\n      if (item.Type.Id !== '@All') continue;\r\n\r\n      for (const [name, value] of Object.entries(item.Attributes)) {\r\n        // do not overwrite previous settings if @All is empty\r\n        const exists = merged[name] != null;\r\n        const emptyAll = value.Values[0].Value === '';\r\n        if (exists && emptyAll) continue;\r\n\r\n        const copy: EavField<any> = { ...value };\r\n        merged[name] = copy;\r\n      }\r\n    }\r\n    return merged;\r\n  }\r\n}\r\n","import { EavEntityAttributes, EavFor, EavType } from '.';\r\nimport { EavEntityDto } from '../json-format-v1';\r\n\r\nexport class EavEntity {\r\n  Attributes: EavEntityAttributes;\r\n  Guid: string;\r\n  Id: number;\r\n  Owner: string;\r\n  Type: EavType;\r\n  Version: number;\r\n  For?: EavFor;\r\n  Metadata?: EavEntity[];\r\n\r\n  static convertOne(entityDto: EavEntityDto): EavEntity {\r\n    const attributes = EavEntityAttributes.convert(entityDto.Attributes);\r\n    const metadata = this.convertMany(entityDto.Metadata);\r\n\r\n    const entity: EavEntity = {\r\n      Attributes: attributes,\r\n      Guid: entityDto.Guid,\r\n      Id: entityDto.Id,\r\n      Owner: entityDto.Owner,\r\n      Type: entityDto.Type,\r\n      Version: entityDto.Version,\r\n      For: entityDto.For,\r\n      Metadata: metadata,\r\n    };\r\n    return entity;\r\n  }\r\n\r\n  static convertMany(entitiesDto: EavEntityDto[]): EavEntity[] {\r\n    if (entitiesDto == null) { return null; }\r\n\r\n    const entities = entitiesDto.map(entityDto => EavEntity.convertOne(entityDto));\r\n    return entities;\r\n  }\r\n}\r\n","import { EavEntity } from '.';\r\nimport { EavEntityBundleDto } from '../json-format-v1';\r\nimport { ItemIdentifierHeader } from '../../../../shared/models/edit-form.model';\r\n\r\nexport class EavItem {\r\n  Entity: EavEntity;\r\n  Header: ItemIdentifierHeader;\r\n\r\n  static convert(entityBundleDto: EavEntityBundleDto): EavItem {\r\n    const entity = EavEntity.convertOne(entityBundleDto.Entity);\r\n\r\n    const item: EavItem = {\r\n      Entity: entity,\r\n      Header: entityBundleDto.Header,\r\n    };\r\n    return item;\r\n  }\r\n}\r\n","import { EavDimension } from '.';\r\nimport { EavValuesDto } from '../json-format-v1';\r\n\r\nexport class EavValue<T> {\r\n  Value: T;\r\n  Dimensions: EavDimension[];\r\n\r\n  static create<T>(value: T, dimensions: EavDimension[]): EavValue<T> {\r\n    const eavValue: EavValue<T> = {\r\n      Value: value,\r\n      Dimensions: dimensions,\r\n    };\r\n    return eavValue;\r\n  }\r\n\r\n  static convert<T>(valuesDto: EavValuesDto<T>): EavValue<T>[] {\r\n    const values = Object.entries(valuesDto).map(([langs, value]) => {\r\n      const dimensions = langs.split(',').map(lang => EavDimension.create(lang));\r\n      return this.create(value, dimensions);\r\n    });\r\n    return values;\r\n  }\r\n}\r\n","import { Injectable, OnDestroy, Signal } from '@angular/core';\r\nimport { toSignal } from '@angular/core/rxjs-interop';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { Of } from '../../../../../../core';\r\n\r\n/**\r\n * Logging service - ATM not really used, but would be great\r\n * to show logs in the debug-panel.\r\n * So don't delete - reconsider how to use.\r\n */\r\n@Injectable()\r\nexport class LoggingService implements OnDestroy {\r\n  private logs$ = new BehaviorSubject<LogEntry[]>([]);\r\n  private logLimit = 50;\r\n  private lastSnackBarTime = 0;\r\n  private snackBarDebounce = 10000;\r\n\r\n  constructor(private snackBar: MatSnackBar) { }\r\n\r\n  ngOnDestroy(): void {\r\n    this.logs$.complete();\r\n  }\r\n\r\n  addLog(severity: Of<typeof LogSeverities>, label: string, error: any): void {\r\n    const newLogEntry: LogEntry = {\r\n      error,\r\n      label,\r\n      severity,\r\n      time: Date.now(),\r\n    };\r\n    const oldLogs = this.logs$.value;\r\n    const newLogs = [newLogEntry, ...oldLogs.slice(0, this.logLimit - 2)];\r\n    this.logs$.next(newLogs);\r\n  }\r\n\r\n  /** Show snackBar to the user. By default snackBars have debounce timer, but you can force snackBar to show instantly */\r\n  showMessage(message: string, duration: number, force?: boolean): void {\r\n    const nowTime = Date.now();\r\n    if (!force && (nowTime - this.lastSnackBarTime) <= this.snackBarDebounce) {\r\n      return;\r\n    }\r\n\r\n    if (duration != null && duration > 0) {\r\n      this.snackBar.open(message, null, { duration });\r\n    } else {\r\n      this.snackBar.open(message);\r\n    }\r\n    this.lastSnackBarTime = nowTime;\r\n  }\r\n\r\n  getLogs$(): Observable<LogEntry[]> {\r\n    return this.logs$.asObservable();\r\n  }\r\n\r\n  getLogsSignal(): Signal<LogEntry[]> {\r\n    return toSignal(this.logs$);\r\n  }\r\n\r\n}\r\n\r\n\r\nexport interface LogEntry {\r\n  error: any;\r\n  label: string;\r\n  severity: Of<typeof LogSeverities>;\r\n  time: number;\r\n}\r\n\r\nexport const LogSeverities = {\r\n  Error: 'error',\r\n  Log: 'log',\r\n  Warn: 'warn',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { EmptyDefault } from 'projects/edit-types/src/FieldSettings-EmptyDefault';\r\nimport { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { InputTypeHelpers } from '../../shared/fields/input-type-helpers';\r\nimport { classLog } from '../../shared/logging';\r\nimport { DebugFields } from '../edit-debug';\r\nimport { FieldLogicManager } from '../fields/logic/field-logic-manager';\r\nimport { TranslateMenuHelpers } from '../fields/wrappers/localization/translate-menu/translate-menu.helpers';\r\nimport { FormLanguage } from '../form/form-languages.model';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { TranslationState, TranslationStateCore } from '../localization/translate-state.model';\r\nimport { TranslationLinks } from '../localization/translation-link.constants';\r\nimport { EavContentType, EavContentTypeAttribute, EavField } from '../shared/models/eav';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  mergeGenericSettings: true,\r\n  getDefaultSettings: false,\r\n  fields: [...DebugFields, 'GroupPreview'],\r\n};\r\n\r\n/**\r\n * Helper to figure out / initialize field settings.\r\n * \r\n * It is, and must be, stateless.\r\n */\r\nexport class FieldsSettingsHelpers {\r\n\r\n  // TODO: conditionally create logger based on source name\r\n  log = classLog({FieldsSettingsHelpers}, logSpecs);\r\n\r\n  constructor(source: string) { }\r\n\r\n  /**\r\n   * Special feature in 18.02\r\n   * Generic settings are metadata which contain a JSON to basically set anything for which there is no Content-Type metadata.\r\n   * @param settings \r\n   * @param genericSettings \r\n   */\r\n  mergeGenericSettings(fieldName: string, settings: FieldSettings): FieldSettings {\r\n    const l = this.log.fnIfInList('mergeGenericSettings', 'fields', fieldName, { fieldName, settings });\r\n    const asWithGenericSettings = settings as unknown as { SettingsGeneric: string };\r\n    if (asWithGenericSettings.SettingsGeneric == null)\r\n      return l.r(settings, 'No generic settings');\r\n\r\n    try {\r\n      const genericSettings = JSON.parse(asWithGenericSettings.SettingsGeneric);\r\n      return l.r({ ...settings, ...genericSettings }, 'Merged generic settings');\r\n    } catch (error) {\r\n      console.error('mergeGenericSettings', error);\r\n      return l.r(settings, 'Error parsing generic settings');\r\n    }\r\n  }\r\n\r\n  getDefaultSettings(settings: FieldSettings): FieldSettings {\r\n    const defSettings = AllDeprecated.moveDeprecatedSettings({ ...settings }) as FieldSettings & EmptyDefault;\r\n    // update @All settings\r\n    defSettings.Name ??= '';\r\n    defSettings.Placeholder ??= '';\r\n    defSettings.Notes ??= '';\r\n    defSettings.Required ??= false;\r\n    defSettings.Disabled ??= false;\r\n    defSettings.DisableTranslation ??= false;\r\n    defSettings.Visible ??= true;\r\n    if (defSettings.DefaultCollapsed != null) {\r\n      defSettings.Collapsed = defSettings.DefaultCollapsed;\r\n      delete defSettings.DefaultCollapsed;\r\n    }\r\n    defSettings.Formulas ??= [];\r\n    let logic = FieldLogicManager.singleton().get(settings.InputType);\r\n    defSettings.DisableAutoTranslation ??= !logic?.canAutoTranslate;\r\n    return defSettings;\r\n  }\r\n\r\n  isLastInGroup(contentType: EavContentType, attribute: EavContentTypeAttribute): boolean {\r\n    const index = contentType.Attributes.indexOf(attribute);\r\n    if (contentType.Attributes[index + 1] == null) return true;\r\n\r\n    const indexOfFirstEmpty = contentType.Attributes.findIndex(a => InputTypeHelpers.isGroupStart(a.InputType));\r\n    if (index < indexOfFirstEmpty) return false;\r\n\r\n    if (InputTypeHelpers.isGroupEnd(attribute.InputType)) return true;\r\n\r\n    if (InputTypeHelpers.endsPreviousGroup(contentType.Attributes[index + 1].InputType)) return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  getDisabledBecauseTranslations(\r\n    attributeValues: EavField<any>,\r\n    disableTranslation: boolean,\r\n    language: FormLanguage\r\n  ): boolean {\r\n    const fieldReader = new FieldReader(attributeValues, language);\r\n    if (language.current === language.primary) return false;\r\n    if (!fieldReader.hasPrimary) return true;\r\n    if (disableTranslation) return true;\r\n    if (fieldReader.hasEditableValues) return false;\r\n    if (fieldReader.hasCurrentReadonly) return true;\r\n    return true;\r\n  }\r\n\r\n  getTranslationState(attributeValues: EavField<any>, disableTranslation: boolean, language: FormLanguage, debug: boolean): TranslationState {\r\n    if (debug)\r\n      this.log.fn('getTranslationState', { attributeValues, disableTranslation, language });\r\n\r\n    let infoLabel: string;\r\n    let infoMessage: string;\r\n\r\n    const fieldReader = new FieldReader(attributeValues, language);\r\n\r\n    if (disableTranslation) {\r\n      infoLabel = 'LangMenu.InAllLanguages';\r\n      infoMessage = '';\r\n    } else if (!fieldReader.hasPrimary) {\r\n      infoLabel = 'LangMenu.MissingDefaultLangValue';\r\n      infoMessage = language.primary;\r\n    } else {\r\n      const hasEditable = fieldReader.hasEditableValues;\r\n      const hasReadonly = fieldReader.hasCurrentReadonly;\r\n\r\n      if (hasEditable || hasReadonly) {\r\n        const dimensions = fieldReader.current\r\n          .Dimensions.map(dimension => dimension.Value)\r\n          .filter(dimension => !dimension.includes(language.current));\r\n\r\n        const isShared = dimensions.length > 0;\r\n        if (isShared) {\r\n          if (hasEditable)\r\n            infoLabel = 'LangMenu.In';\r\n          else if (hasReadonly)\r\n            infoLabel = 'LangMenu.From';\r\n\r\n          infoMessage = TranslateMenuHelpers.calculateSharedInfoMessage(dimensions, language.current);\r\n        } else {\r\n          infoLabel = '';\r\n          infoMessage = '';\r\n        }\r\n      } else {\r\n        infoLabel = 'LangMenu.UseDefault';\r\n        infoMessage = '';\r\n      }\r\n    }\r\n    const state = this.#getTranslationStateCore(attributeValues, disableTranslation, language);\r\n    const translationState: TranslationState = {\r\n      infoLabel,\r\n      infoMessage,\r\n      language: state.language,\r\n      linkType: state.linkType,\r\n    };\r\n    return translationState;\r\n  }\r\n\r\n  #getTranslationStateCore(\r\n    attributeValues: EavField<any>,\r\n    disableTranslation: boolean,\r\n    language: FormLanguage\r\n  ): TranslationStateCore {\r\n    const fieldReader = new FieldReader(attributeValues, language);\r\n    // Determine is control disabled or enabled and info message\r\n    if (!fieldReader.hasPrimary)\r\n      return { language: '', linkType: TranslationLinks.MissingDefaultLangValue };\r\n\r\n    if (disableTranslation)\r\n      return { language: '', linkType: TranslationLinks.DontTranslate };\r\n\r\n    if (fieldReader.hasEditableValues) {\r\n      const editableElements = fieldReader.current\r\n        .Dimensions.filter(d => d.Value !== language.current);\r\n\r\n      return (editableElements.length > 0)\r\n        ? { language: editableElements[0].Value, linkType: TranslationLinks.LinkReadWrite }\r\n        : { language: '', linkType: TranslationLinks.Translate };\r\n    }\r\n\r\n    if (fieldReader.hasCurrentReadonly) {\r\n      const readOnlyElements = fieldReader.current\r\n        .Dimensions.filter(d => d.Value !== language.current);\r\n\r\n      return { language: readOnlyElements[0].Value, linkType: TranslationLinks.LinkReadOnly, };\r\n    }\r\n\r\n    return { language: '', linkType: TranslationLinks.DontTranslate, };\r\n  }\r\n}\r\nclass AllDeprecated {\r\n  /** @deprecated */\r\n  VisibleInEditUI: boolean;\r\n  /** VisibleInEditUi is copied Visible and then deleted */\r\n  static moveDeprecatedSettings(settings: FieldSettings): FieldSettings {\r\n    var asDeprecated = settings as unknown as AllDeprecated;\r\n    if (asDeprecated.VisibleInEditUI == null) return settings;\r\n    settings.Visible = asDeprecated.VisibleInEditUI;\r\n    delete asDeprecated.VisibleInEditUI;\r\n    return settings;\r\n  }\r\n}\r\n","import { FormLanguage } from '../form/form-languages.model';\r\nimport { EavDimension } from '../shared/models/eav/eav-dimension';\r\nimport { EavEntityAttributes } from '../shared/models/eav/eav-entity-attributes';\r\nimport { EavValue } from '../shared/models/eav/eav-value';\r\nimport { EavField } from '../shared/models/eav/eav-values';\r\nimport { ItemValuesOfLanguage } from '../state/item-values-of-language.model';\r\nimport { FieldReader } from './field-reader';\r\nimport { DimensionReader } from './dimension-reader';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../shared/logging';\r\n\r\nexport class FieldWriter {\r\n\r\n  log = classLog({FieldWriter});\r\n\r\n  /** Copy attributes from item */\r\n  #updateAttribute(\r\n    oldAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    attribute: EavField<any>,\r\n  ): EavEntityAttributes {\r\n    const newAttributes: EavEntityAttributes = {};\r\n    if (Object.keys(oldAttributes).length === 0) {\r\n      const attributeCopy: EavField<any> = { ...attribute };\r\n      newAttributes[attributeKey] = attributeCopy;\r\n      return newAttributes;\r\n    }\r\n\r\n    for (const key of Object.keys(oldAttributes)) {\r\n      if (key === attributeKey) {\r\n        const attributeCopy: EavField<any> = { ...attribute };\r\n        newAttributes[key] = attributeCopy;\r\n      } else {\r\n        const attributeCopy: EavField<any> = { ...oldAttributes[key] };\r\n        newAttributes[key] = attributeCopy;\r\n      }\r\n    }\r\n\r\n    if (oldAttributes[attributeKey] == null) {\r\n      const attributeCopy: EavField<any> = { ...attribute };\r\n      newAttributes[attributeKey] = attributeCopy;\r\n    }\r\n    return newAttributes;\r\n  }\r\n\r\n  /** Update values for languageKey */\r\n  updateAttributesValues(\r\n    allFields: EavEntityAttributes,\r\n    updateValues: ItemValuesOfLanguage,\r\n    language: FormLanguage,\r\n  ): EavEntityAttributes {\r\n    const l = this.log.fn('updateAttributesValues', { allFields, updateValues, language });\r\n    // copy attributes from item\r\n    const eavAttributes: EavEntityAttributes = {};\r\n    Object.keys(allFields).forEach(attributeKey => {\r\n      const newItemValue = updateValues[attributeKey];\r\n      // if new value exist update attribute for languageKey   \r\n      // it's important to check for undefined, because empty string and sometimes null (bool-tristate) are valid values\r\n      if (newItemValue !== undefined) {\r\n        const fr = new FieldReader(allFields[attributeKey], language);\r\n        const valueWithLanguageExist = fr.isEditableOrReadonlyTranslationExist();\r\n\r\n        // if valueWithLanguageExist update value for languageKey\r\n        if (valueWithLanguageExist) {\r\n          const newValues: EavField<any> = {\r\n            ...allFields[attributeKey],\r\n            Values: allFields[attributeKey].Values.map(val => {\r\n              const hasLanguage = new DimensionReader(val.Dimensions, language).hasCurrent;\r\n              const newValue: EavValue<any> = hasLanguage\r\n                // Update value for languageKey\r\n                ? {\r\n                    ...val,\r\n                    Value: newItemValue,\r\n                  }\r\n                  : val;\r\n              return newValue;\r\n            })\r\n          };\r\n          eavAttributes[attributeKey] = newValues;\r\n        } else { // else add new value with dimension languageKey\r\n          l.a('saveAttributeValues add values ', { newItemValue });\r\n          const newEavValue = EavValue.create(newItemValue, [EavDimension.create(language.current)]);\r\n          eavAttributes[attributeKey] = {\r\n            ...allFields[attributeKey],\r\n            Values: [...allFields[attributeKey].Values, newEavValue]\r\n          } satisfies EavField<any>;\r\n        }\r\n      } else { // else copy item attributes\r\n        eavAttributes[attributeKey] = { ...allFields[attributeKey] };\r\n      }\r\n    });\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** update attribute value, and change language readonly state if needed */\r\n  updateAttributeValue(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    updateValue: FieldValue,\r\n    language: FormLanguage,\r\n    isReadOnly: boolean,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    let newLanguageValue = language.current;\r\n\r\n    if (isReadOnly)\r\n      newLanguageValue = `~${language.current}`;\r\n\r\n    const attribute: EavField<any> = {\r\n      ...allAttributes[attributeKey], Values: allAttributes[attributeKey].Values.map(val => {\r\n        const hasLanguage = new DimensionReader(val.Dimensions, language).hasCurrent;\r\n        const newValue: EavValue<any> = hasLanguage\r\n          // Update value and dimension\r\n          ? {\r\n            ...val,\r\n            // update value\r\n            Value: updateValue,\r\n            // update languageKey with newLanguageValue\r\n            Dimensions: val.Dimensions.map(d => {\r\n              const dimensionIsForLanguage = (d.Value === language.current\r\n                || d.Value === `~${language.current}`\r\n                || (language.current === language.primary && d.Value === '*'));\r\n              return dimensionIsForLanguage\r\n                ? { Value: newLanguageValue } satisfies EavDimension\r\n                : d;\r\n            })\r\n          }\r\n          : val;\r\n        return newValue;\r\n      })\r\n    };\r\n    eavAttributes = this.#updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  addAttributeValue(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeValue: EavValue<any>,\r\n    attributeKey: string,\r\n    attributeType: string,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    const attribute: EavField<any> =\r\n      Object.keys(allAttributes).length === 0 || !allAttributes[attributeKey]\r\n        ? {\r\n          ...allAttributes[attributeKey],\r\n          Values: [attributeValue],\r\n          Type: attributeType\r\n        }\r\n        : {\r\n          ...allAttributes[attributeKey],\r\n          Values: [...allAttributes[attributeKey].Values, attributeValue],\r\n          Type: attributeType\r\n        };\r\n    eavAttributes = this.#updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** Add dimension to value with existing dimension */\r\n  addAttributeDimension(\r\n    allAttributes: EavEntityAttributes,\r\n    attributeKey: string,\r\n    newDimensionValue: string,\r\n    existingDimensionValue: string,\r\n    defaultLanguage: string,\r\n    isReadOnly: boolean,\r\n  ): EavEntityAttributes {\r\n    // copy attributes from item\r\n    let eavAttributes: EavEntityAttributes = {};\r\n    let newLanguageValue = newDimensionValue;\r\n\r\n    if (isReadOnly) {\r\n      newLanguageValue = `~${newDimensionValue}`;\r\n    }\r\n\r\n    const attribute: EavField<any> = {\r\n      ...allAttributes[attributeKey], Values: allAttributes[attributeKey].Values.map(eavValue => {\r\n        const newValue: EavValue<any> = eavValue.Dimensions.find(d => d.Value === existingDimensionValue\r\n          || (existingDimensionValue === defaultLanguage && d.Value === '*'))\r\n          // Update dimension for current language\r\n          ? {\r\n            ...eavValue,\r\n            // if languageKey already exist\r\n            Dimensions: eavValue.Dimensions.concat({ Value: newLanguageValue })\r\n          }\r\n          : eavValue;\r\n        return newValue;\r\n      })\r\n    };\r\n    eavAttributes = this.#updateAttribute(allAttributes, attributeKey, attribute);\r\n    return eavAttributes;\r\n  }\r\n\r\n  /** Removes dimension (language) from attribute. If multiple dimensions exist, delete only dimension, else delete value and dimension */\r\n  removeAttributeDimension(attributes: EavEntityAttributes, attributeKey: string, language: string): EavEntityAttributes {\r\n    const oldAttributes = attributes;\r\n    const validDimensions = [language, `~${language}`];\r\n\r\n    const value = oldAttributes[attributeKey].Values.find(eavValue => {\r\n      const dimensionExists = eavValue.Dimensions.some(d => validDimensions.includes(d.Value));\r\n      return dimensionExists;\r\n    });\r\n\r\n    // given dimension doesn't exist for this attribute so no change is needed\r\n    if (!value) {\r\n      const attributesCopy: EavEntityAttributes = { ...oldAttributes };\r\n      return attributesCopy;\r\n    }\r\n\r\n    let newAttribute: EavField<any>;\r\n    if (value.Dimensions.length > 1) {\r\n      // if multiple dimensions exist delete only dimension\r\n      newAttribute = {\r\n        ...oldAttributes[attributeKey],\r\n        Values: oldAttributes[attributeKey].Values.map(eavValue => {\r\n          const dimensionExists = eavValue.Dimensions.some(d => validDimensions.includes(d.Value));\r\n          return (!dimensionExists)\r\n            ? eavValue\r\n            : {\r\n                ...eavValue,\r\n                Dimensions: eavValue.Dimensions.filter(d => !validDimensions.includes(d.Value)),\r\n              } satisfies EavValue<any>;\r\n        })\r\n      };\r\n    } else if (value.Dimensions.length === 1) {\r\n      // if only one dimension exists delete value and dimension\r\n      newAttribute = {\r\n        ...oldAttributes[attributeKey],\r\n        Values: oldAttributes[attributeKey].Values.filter(eavValue => {\r\n          const dimensionExists = eavValue.Dimensions.some(d => validDimensions.includes(d.Value));\r\n          return !dimensionExists;\r\n        })\r\n      };\r\n    }\r\n\r\n    const newAttributes = this.#updateAttribute(oldAttributes, attributeKey, newAttribute);\r\n    return newAttributes;\r\n  }\r\n\r\n}","import { FieldSettings } from '../../../../../edit-types/src/FieldSettings';\r\nimport { FieldValue } from '../../../../../edit-types/src/FieldValue';\r\nimport { InputTypeMetadata } from '../../shared/fields/input-type-metadata.model';\r\nimport { classLog } from '../../shared/logging';\r\nimport { ItemEditIdentifier, ItemIdentifierHeader } from '../../shared/models/edit-form.model';\r\nimport { FormLanguage, Language } from '../form/form-languages.model';\r\nimport { FieldReader } from '../localization/field-reader';\r\nimport { FieldWriter } from '../localization/field-writer';\r\nimport { EntityReader, FieldDefaults } from '../shared/helpers';\r\nimport { FieldValueHelpers } from '../shared/helpers/field-value.helpers';\r\nimport { EavContentTypeAttribute, EavDimension, EavEntity, EavItem, EavValue } from '../shared/models/eav';\r\nimport { ItemValuesOfLanguage } from './item-values-of-language.model';\r\nimport { ItemService } from './item.service';\r\nimport { SaveResult } from './save-result.model';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  updateItemId: false,\r\n  updateItemHeader: false,\r\n  addItemAttributeValue: false,\r\n  updateItemAttributeValue: false,\r\n  setDefaultValue: false,\r\n  updateItemAttributesValues: false,\r\n  addItemAttributeDimension: false,\r\n  removeItemAttributeDimension: false,\r\n  updateItemMetadata: false,\r\n};\r\n\r\nexport class ItemUpdateHelper {\r\n\r\n  log = classLog({ItemUpdateHelper}, logSpecs);\r\n  \r\n  constructor(private itemSvc: ItemService) { }\r\n\r\n  updateItemId(saveResult: SaveResult): void {\r\n    const l = this.log.fnIf('updateItemId', { saveResult });\r\n    const entityGuid = Object.keys(saveResult)[0];\r\n    const entityId = saveResult[entityGuid];\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    if (!oldItem || ((oldItem.Header as ItemEditIdentifier).EntityId !== 0 && oldItem.Entity.Id !== 0))\r\n      return;\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Header: {\r\n        ...oldItem.Header,\r\n        EntityId: entityId,\r\n      },\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Id: entityId,\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n  }\r\n\r\n\r\n  /** Update parts of the header; ATM just to tell us about the slot being empty */\r\n  updateItemHeader(entityGuid: string, header: ItemIdentifierHeader): void {\r\n    const l = this.log.fnIf('updateItemHeader', { entityGuid, header });\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    if (!oldItem) return;\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Header: {\r\n        ...header\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n    l.end();\r\n  }\r\n\r\n  //#region Item Attribute - Single Value\r\n\r\n  addItemAttributeValue(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    newValue: FieldValue,\r\n    currentLanguage: string,\r\n    isReadOnly: boolean,\r\n    attributeType: string,\r\n    isTransaction = false,\r\n    transactionItem?: EavItem,\r\n  ): EavItem {\r\n    const l = this.log.fnIf('addItemAttributeValue', { entityGuid, attributeKey, newValue, currentLanguage, isReadOnly, attributeType, isTransaction, transactionItem });\r\n    const newValueDimension = isReadOnly ? `~${currentLanguage}` : currentLanguage;\r\n    const newEavValue = EavValue.create(newValue, [EavDimension.create(newValueDimension)]);\r\n    const oldItem = transactionItem ?? this.itemSvc.get(entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: new FieldWriter().addAttributeValue(oldItem.Entity.Attributes, newEavValue, attributeKey, attributeType),\r\n      }\r\n    };\r\n\r\n    // if we're in a transaction, then save/update will happen later on, so don't trigger state changes yet\r\n    if (!isTransaction) \r\n      this.itemSvc.add(newItem);\r\n\r\n    return newItem;\r\n  }\r\n\r\n  updateItemAttributeValue(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    newValue: FieldValue,\r\n    language: FormLanguage,\r\n    isReadOnly: boolean,\r\n  ): void {\r\n    const l = this.log.fnIf('updateItemAttributeValue', { entityGuid, attributeKey, newValue, language, isReadOnly });\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    if (!oldItem) return;\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: new FieldWriter().updateAttributeValue(\r\n          oldItem.Entity.Attributes, attributeKey, newValue, language, isReadOnly,\r\n        ),\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n  }\r\n\r\n  setDefaultValue(\r\n    item: EavItem,\r\n    ctAttribute: EavContentTypeAttribute,\r\n    inputType: InputTypeMetadata,\r\n    settings: FieldSettings,\r\n    languages: Language[],\r\n    defaultLanguage: string,\r\n  ): FieldValue {\r\n    const l = this.log.fnIf('setDefaultValue', { item, ctAttribute, inputType, settings, languages, defaultLanguage }, `Name: ${ctAttribute.Name}`);\r\n    const defaultValue = new FieldDefaults(ctAttribute.Name, inputType?.Type, settings, item.Header).getDefaultOrPrefillValue();\r\n\r\n    // const defaultLanguageValue = LocalizationHelpers.getBestValue(\r\n    //   item.Entity.Attributes[ctAttribute.Name],\r\n    //   defaultLanguage,\r\n    //   // defaultLanguage,\r\n    //   BestValueModes.Strict,\r\n    // );\r\n    const defaultLanguageValue = new FieldReader(item.Entity.Attributes[ctAttribute.Name], defaultLanguage).currentOrDefault?.Value;\r\n\r\n    // 2023-08-31 2dm simplified; leave comments in till EOY in case I broke something\r\n    const languageCode = (languages.length === 0 || inputType?.DisableI18n) ? '*' : defaultLanguage;\r\n    if (defaultLanguageValue === undefined) {\r\n      this.addItemAttributeValue(item.Entity.Guid, ctAttribute.Name, defaultValue, languageCode, false, ctAttribute.Type);\r\n    } else {\r\n      // most likely used only for entity fields because we can never know if they were cleaned out or brand new\r\n      this.updateItemAttributeValue(item.Entity.Guid, ctAttribute.Name, defaultValue, { current: languageCode, primary: defaultLanguage }, false);\r\n    }\r\n\r\n    // return what was used, so it can be checked on form-init\r\n    return l.r(defaultValue);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Item Attribute - Multi Value\r\n\r\n  updateItemAttributesValues(entityGuid: string, newValues: ItemValuesOfLanguage, language: FormLanguage): void {\r\n    const l = this.log.fnIf('updateItemAttributesValues', { entityGuid, newValues, language });\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    if (!oldItem) return l.end('Item not found');\r\n\r\n    const reader = new EntityReader(language);\r\n    const oldValues: ItemValuesOfLanguage = {};\r\n    const relevantValues = Object.entries(oldItem.Entity.Attributes)\r\n      .filter(([name]) => newValues.hasOwnProperty(name));\r\n    for (const [name, values] of relevantValues)\r\n      oldValues[name] = reader.getBestValue(values);\r\n\r\n    const changes = FieldValueHelpers.getItemValuesChanges(oldValues, newValues);\r\n    if (changes == null)\r\n      return l.end('No changes');\r\n\r\n    const newAttributes = new FieldWriter().updateAttributesValues(oldItem.Entity.Attributes, changes, language);\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: newAttributes,\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Item Value Dimensions\r\n\r\n  /**\r\n   * Update entity attribute dimension. Add readonly languageKey to existing useFromLanguageKey.\r\n   * Example to useFrom en-us add fr-fr = \"en-us,-fr-fr\"\r\n   */\r\n  addItemAttributeDimension(\r\n    entityGuid: string,\r\n    attributeKey: string,\r\n    currentLanguage: string,\r\n    shareWithLanguage: string,\r\n    defaultLanguage: string,\r\n    isReadOnly: boolean,\r\n    transactionItem?: EavItem,\r\n  ): void {\r\n    const l = this.log.fnIf('addItemAttributeDimension', { entityGuid, attributeKey, currentLanguage, shareWithLanguage, defaultLanguage, isReadOnly, transactionItem });\r\n    const oldItem = transactionItem ?? this.itemSvc.get(entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: new FieldWriter().addAttributeDimension(\r\n          oldItem.Entity.Attributes, attributeKey, currentLanguage, shareWithLanguage, defaultLanguage, isReadOnly,\r\n        ),\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n  }\r\n\r\n  // TODO:: Old Code, remove after testing ist done\r\n  removeItemAttributeDimension(\r\n    entityGuid: string,\r\n    fieldName: string,\r\n    current: string,\r\n    delayUpsert = false,\r\n    transactionItem?: EavItem,\r\n  ): EavItem {\r\n    const l = this.log.fnIf('removeItemAttributeDimension', { entityGuid, attributeKey: fieldName, currentLanguage: current, isTransaction: delayUpsert, transactionItem });\r\n    const oldItem = transactionItem ?? this.itemSvc.get(entityGuid);\r\n\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Attributes: new FieldWriter().removeAttributeDimension(oldItem.Entity.Attributes, fieldName, current),\r\n      }\r\n    };\r\n\r\n    if (!delayUpsert)\r\n      this.itemSvc.add(newItem);\r\n    return l.r(newItem);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Metadata\r\n\r\n  updateItemMetadata(entityGuid: string, metadata: EavEntity[]): void {\r\n    const l = this.log.fnIf('updateItemMetadata', { entityGuid, metadata });\r\n    const oldItem = this.itemSvc.get(entityGuid);\r\n    const newItem: EavItem = {\r\n      ...oldItem,\r\n      Entity: {\r\n        ...oldItem.Entity,\r\n        Metadata: metadata,\r\n      }\r\n    };\r\n    this.itemSvc.add(newItem);\r\n    l.end('ok', { newItem });\r\n  }\r\n\r\n  //#endregion\r\n\r\n}","import { Injectable, Signal } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { EavEntity, EavFor, EavItem } from '../shared/models/eav';\r\nimport { EavEntityBundleDto } from '../shared/models/json-format-v1';\r\nimport { ItemIdentifierHeader } from '../../shared/models/edit-form.model';\r\nimport { mapUntilChanged, mapUntilObjChanged } from '../../shared/rxJs/mapUntilChanged';\r\nimport { ItemUpdateHelper } from './item-updater.helper';\r\nimport { ComputedCacheHelper } from '../../shared/signals/computed-cache';\r\nimport { EavEntityAttributes } from '../shared/models/eav/eav-entity-attributes';\r\nimport { SignalStoreObservableBase } from '../shared/store/signal-store-observable-base';\r\nimport { classLog } from '../../shared/logging';\r\n\r\n/**\r\n * This class provides access to the items / entities cache which are being edited in the UI.\r\n * \r\n * It's undergoing a lot of refactoring to get rid of observables, so ATM it's a bit confusing.\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class ItemService extends SignalStoreObservableBase<string, EavItem> {\r\n\r\n  constructor() {\r\n    super(classLog({ItemService}));\r\n  }\r\n\r\n  override getId = (item: EavItem) => item.Entity.Guid;\r\n\r\n  public updater = new ItemUpdateHelper(this);\r\n\r\n  //#region Loaders and Updaters\r\n\r\n  loadItems(dtoItems: EavEntityBundleDto[]): void {\r\n    const items = dtoItems.map(item => EavItem.convert(item));\r\n    this.addMany(items);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Item Attributes\r\n\r\n  itemAttributesSignal(entityGuid: string): Signal<EavEntityAttributes> {\r\n    const l = this.log.fn('itemAttributes', { entityGuid });\r\n    const result = this.#itemAttributesCache.getOrCreate(entityGuid, () => this.getSignal(entityGuid)()?.Entity.Attributes);\r\n    return l.r(result);\r\n  }\r\n  #itemAttributesCache = new ComputedCacheHelper<string, EavEntityAttributes>('itemAttributes');\r\n\r\n  getItemAttributes(entityGuid: string): EavEntityAttributes {\r\n    const l = this.log.fn('getItemAttributes', { entityGuid });\r\n    const result = this.get(entityGuid)?.Entity.Attributes;\r\n    return l.r(result);\r\n  }\r\n\r\n  getItemAttributes$(entityGuid: string): Observable<EavEntityAttributes> {\r\n    return this.list$.pipe(\r\n      map(items => items.find(item => item.Entity.Guid === entityGuid)?.Entity.Attributes),\r\n      mapUntilChanged(m => m),\r\n    );\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Item Headers\r\n\r\n  getItemHeader(entityGuid: string): ItemIdentifierHeader {\r\n    return this.get(entityGuid)?.Header;\r\n  };\r\n\r\n  getItemHeader$(entityGuid: string): Observable<ItemIdentifierHeader> {\r\n    return this.list$.pipe(\r\n      map(items => items.find(item => item.Entity.Guid === entityGuid)?.Header),\r\n      mapUntilObjChanged(m => m),\r\n    );\r\n  }\r\n\r\n  getItemHeaderSignal(entityGuid: string): Signal<ItemIdentifierHeader> {\r\n    return this.#itemHeaderCache.getOrCreate(entityGuid, () => this.getSignal(entityGuid)()?.Header);\r\n  }\r\n  #itemHeaderCache = new ComputedCacheHelper<string, ItemIdentifierHeader>('itemHeader');\r\n\r\n  //#endregion\r\n\r\n  //#region Item Header Properties\r\n\r\n  slotIsEmpty(entityGuid: string): Signal<boolean> {\r\n    return this.#slotIsEmptyCache.getOrCreate(entityGuid, () => {\r\n      const header = this.getSignal(entityGuid)()?.Header;\r\n      return header == null ? true : header.IsEmptyAllowed && header.IsEmpty;\r\n    });\r\n  }\r\n  #slotIsEmptyCache = new ComputedCacheHelper<string, boolean>('slotIsEmpty');\r\n\r\n  //#endregion\r\n\r\n  //#region Item Metadata & For (Metadata Target)\r\n\r\n  /** Sync get-item-for info to show metadata-target info on an entity in the UI */\r\n  getItemFor(entityGuid: string): EavFor {\r\n    return this.get(entityGuid)?.Entity.For;\r\n  }\r\n\r\n\r\n  getItemNote(entityGuid: string): EavEntity | undefined {\r\n    return this.get(entityGuid)?.Entity.Metadata\r\n      ?.find(metadata => metadata.Type.Name === eavConstants.contentTypes.notes);\r\n  }\r\n\r\n  //#endregion\r\n\r\n}\r\n","import { Component, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * A newer base component, without Log being created / requested.\r\n * This is so it's easier to inherit than the BaseComponent,\r\n * which would make typed log with specs harder to implement.\r\n * \r\n * Note that as with time, we wish to get away from these, as we don't want to use many observables any more.\r\n */\r\n@Component({\r\n  selector: 'app-base-component',\r\n  template: '',\r\n})\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseComponent implements OnDestroy {\r\n  \r\n  /** Holds all subscriptions to be unsubscribed on destroy */\r\n  protected subscriptions = new Subscription();\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n\r\n}\r\n","import { Directive, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive()\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseDirective implements OnDestroy {\r\n  /** Holds all subscriptions to be unsubscribed on destroy */\r\n  protected subscriptions = new Subscription();\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","export const DataTypeCatalog = {\r\n  Boolean: 'Boolean',\r\n  Custom: 'Custom',\r\n  DateTime: 'DateTime',\r\n  Empty: 'Empty',\r\n  Entity: 'Entity',\r\n  Hyperlink: 'Hyperlink',\r\n  Number: 'Number',\r\n  String: 'String',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","/** https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f */\r\nexport function copyToClipboard(str: string) {\r\n  const el = document.createElement('textarea');  // Create a <textarea> element\r\n  el.value = str;                                 // Set its value to the string that you want copied\r\n  el.setAttribute('readonly', '');                // Make it readonly to be tamper-proof\r\n  el.style.position = 'absolute';\r\n  el.style.left = '-9999px';                      // Move outside the screen to make it invisible\r\n  document.body.appendChild(el);                  // Append the <textarea> element to the HTML document\r\n  const selected =\r\n    document.getSelection().rangeCount > 0        // Check if there is any content selected previously\r\n      ? document.getSelection().getRangeAt(0)     // Store selection if found\r\n      : false;                                    // Mark as false to know no selection existed before\r\n  el.select();                                    // Select the <textarea> content\r\n  document.execCommand('copy');                   // Copy - only works as a result of a user action (e.g. click events)\r\n  document.body.removeChild(el);                  // Remove the <textarea> element\r\n  if (selected) {                                 // If a selection existed before copying\r\n    document.getSelection().removeAllRanges();    // Unselect everything on the HTML document\r\n    document.getSelection().addRange(selected);   // Restore the original selection\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n  name: 'safeHtml',\r\n})\r\nexport class SafeHtmlPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(html: string) {\r\n    return this.sanitizer.bypassSecurityTrustHtml(html);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { filter, map, Observable, shareReplay, switchMap } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { EntityLightIdentifier } from '../../../../../edit-types/src/EntityLight';\r\nimport { classLog } from '../logging';\r\nimport { HttpServiceBase } from './http-service-base';\r\nimport { QueryService } from './query.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getEntities: false,\r\n  getAvailableEntities: false,\r\n  delete: false,\r\n};\r\n\r\nexport const webApiEntityRoot = 'admin/entity/';\r\nexport const webApiEntityList = 'admin/entity/list';\r\n\r\n@Injectable()\r\nexport class EntityService extends HttpServiceBase {\r\n\r\n  log = classLog({ EntityService }, logSpecs);\r\n\r\n  private queryService = transient(QueryService);\r\n\r\n  /**\r\n   * Get entities based on the content type name.\r\n   * As of 2024-04-29 only used in REST API.\r\n   * @param params\r\n   * @returns\r\n   */\r\n  getEntities$(params: Observable<{ contentTypeName: string }>): Observable<EntityLightIdentifier[]> {\r\n    this.log.fnIf('getEntities');\r\n    return params.pipe(\r\n      filter(p => p != null),\r\n      switchMap(p => this.getAvailableEntities(p.contentTypeName).pipe(shareReplay(1))),\r\n    );\r\n  }\r\n\r\n  private getAvailableEntities(contentTypeName: string, entitiesFilter?: string[]): Observable<EntityLightIdentifier[]> {\r\n    var log = this.log.fnIf('getAvailableEntities');\r\n    return this.queryService.getEntities({\r\n      contentTypes: [contentTypeName],\r\n      itemIds: entitiesFilter,\r\n      fields: 'Id,Guid,Title',\r\n      log: 'getAvailableEntities'\r\n    }).pipe(\r\n      map(data => data.Default)\r\n    );\r\n  }\r\n\r\n  delete(appId: number, contentType: string, entityId: number, force: boolean, parentId?: number, parentField?: string): Observable<null> {\r\n    this.log.fnIf('delete', { appId, contentType, entityId, force, parentId, parent });\r\n    return this.http.delete<null>(this.apiUrl(webApiEntityRoot + 'delete'), {\r\n      params: {\r\n        contentType,\r\n        id: entityId.toString(),\r\n        appId,\r\n        force: force.toString(),\r\n        ...(parentId && { parentId: parentId.toString() }),\r\n        ...(parentId && parentField && { parentField }),\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { classLog } from '../logging';\r\nimport { QueryStreams } from '../models/query-stream.model';\r\nimport { Context } from './context';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getAvailableEntities: false,\r\n  getEntities: false,\r\n};\r\n\r\n@Injectable()\r\nexport class QueryService {\r\n\r\n  log = classLog({QueryService}, logSpecs);\r\n\r\n  constructor(private http: HttpClient, private context: Context) { }\r\n\r\n  getFromQuery(queryUrl: string, params: string, fields: string, entitiesFilter?: string[]): Observable<QueryStreams> {\r\n    this.log.fnIf('getAvailableEntities', { queryUrl, params, fields, entitiesFilter });\r\n    // Check if any params we should auto-add are already set (like in a query which has these params set in the configuration)\r\n    const hasParams = !!params;\r\n    const paramsLower = params?.toLocaleLowerCase() ?? '';\r\n    const hasAppId = paramsLower.includes('appid=') ?? false;\r\n    const allParams = ''\r\n      + (hasAppId ? '' : `&appId=${this.context.appId}`)\r\n      + (hasParams ? `&${params}` : '')\r\n      + '&$select=' + (fields ?? '' /* special catch to avoid the word \"null\" */);\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(`app/auto/query/${queryUrl}?${urlParams}`,\r\n      {\r\n        Guids: entitiesFilter,\r\n      },\r\n    );\r\n  }\r\n\r\n  getEntities({ contentTypes, itemIds, fields, log }: { contentTypes: string[]; itemIds: string[]; fields: string; log: string }): Observable<QueryStreams> {\r\n    this.log.fnIf(`getEntities`, { log, contentTypes, itemIds, fields });\r\n    const allParams =\r\n      '&typeNames=' + (contentTypes?.join(',') ?? '')\r\n      + `&appId=${this.context.appId}`\r\n      + '&itemIds=' + (itemIds?.join(',') ?? '')\r\n      + '&$select=' + (fields ?? '' /* special catch to avoid the word \"null\" */);\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(\r\n      `app/auto/query/System.EntityPicker/Default?${urlParams}`,\r\n      {}\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { dialogSettings, DialogUiSettings } from '../constants/session.constants';\r\nimport { StateManagerLocal } from '../user/state-manager';\r\n\r\nconst storeKey = 'user-language';\r\n\r\nconst uiKey = 'ui';\r\nconst formKey = 'form';\r\n\r\ntype possibleKeys = typeof uiKey | typeof formKey;\r\n\r\n@Injectable()\r\nexport class UserLanguageService {\r\n\r\n  constructor() { }\r\n\r\n  #stateManager = new StateManagerLocal(storeKey);\r\n\r\n  /** Get the UI mixing url, stored etc. */\r\n  #config(part: possibleKeys, fallback?: string): { language: string, force: boolean } {\r\n    // Check if URL overrides everything\r\n    const fromUrl = this.#dialogUiSettings()?.[ part == uiKey ? 'languageUi' : 'languageForm' ];\r\n    if (fromUrl?.endsWith('!'))\r\n      return { language: fromUrl.slice(0, -1), force: true };\r\n    return { language: this.stored(part) ?? fromUrl ?? fallback, force: false };\r\n  }\r\n\r\n  value(part: possibleKeys): string {\r\n    return this.#config(part).language;\r\n  }\r\n\r\n  /**\r\n   * Get the UI or Form as stored for the user, for the config-UI\r\n   * Important: can be an empty string! which must be returned as null.\r\n   */\r\n  stored(part: possibleKeys): string {\r\n    return this.#stateManager.get(part) || null;\r\n  }\r\n\r\n  /** Set the UI language in the store */\r\n  save(part: possibleKeys, language: string) {\r\n    this.#stateManager.add(part, language || null); // try to save null instead of \"\"\r\n  }\r\n\r\n  /** Get the code like 'en' or 'de' for setting the language */\r\n  uiCode(fallback?: string): string {\r\n    return this.#config(uiKey, fallback)?.language?.toLocaleLowerCase().split('-')[0];\r\n  }\r\n\r\n  isForced(part: possibleKeys): boolean {\r\n    return this.#config(part)?.force;\r\n  }\r\n\r\n  userConfigurable(): boolean {\r\n    const isConfigurable = this.#dialogUiSettings()?.languageUserSettings;\r\n    return isConfigurable !== false && isConfigurable !== \"false\";\r\n  }\r\n\r\n\r\n  // note: for now just here, if we need it more often\r\n  // create some service which caches the object instead of deserializing every time\r\n  #dialogUiSettings(): DialogUiSettings {\r\n    if (this.#uiSettingsCached)\r\n      return this.#uiSettingsCached;\r\n    const storedMaybeString = sessionStorage.getItem(dialogSettings);\r\n    return (!storedMaybeString)\r\n      ? null\r\n      : this.#uiSettingsCached = JSON.parse(storedMaybeString);\r\n  }\r\n  #uiSettingsCached?: DialogUiSettings;\r\n}\r\n","import { Injectable, signal, WritableSignal } from '@angular/core';\r\nimport { classLog } from '../logging';\r\nimport { StateManagerLocal, StateManagerSession } from './state-manager';\r\n\r\nconst storeKey = 'user-settings';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UserPreferences {\r\n\r\n  log = classLog({UserPreferences});\r\n\r\n  constructor() {\r\n    this.log.fn('constructor');\r\n  }\r\n\r\n  get local() { return this.#local ??= new StateManagerLocal(storeKey); }\r\n  #local: StateManagerLocal;\r\n\r\n  get session() { return this.#session ??= new StateManagerSession(storeKey); }\r\n  #session: StateManagerSession;\r\n\r\n  get<T>(key: string, longTerm = false): T {\r\n    return (longTerm ? this.local : this.session).get(key);\r\n  }\r\n\r\n  set<T>(key: string, value: T, longTerm = false) {\r\n    (longTerm ? this.local : this.session).add(key, value);\r\n  }\r\n\r\n  part<T extends Record<string, unknown>>({ key, data }: { key: string; data: T; }): UserPreferencesPart<T> {\r\n    return this.#getPart(key, data, true);\r\n  }\r\n\r\n  #getPart<T extends Record<string, unknown>>(key: string, data: T, longTerm = false): UserPreferencesPart<T> {\r\n    if (this.#partCache[key]) return this.#partCache[key] as unknown as UserPreferencesPart<T>;\r\n    const created = new UserPreferencesPart(this, key, data, longTerm);\r\n    this.#partCache[key] = created;\r\n    return created as unknown as UserPreferencesPart<T>;\r\n  }\r\n  #partCache: Record<string, UserPreferencesPart<Record<string, unknown>>> = {};\r\n}\r\n\r\nclass UserPreferencesPart<T extends Record<string, unknown>> {\r\n\r\n  log = classLog({UserPreferencesPart});\r\n  \r\n  constructor(private userSettings: UserPreferences, private storeKey: string, data: T, private longTerm = false) {\r\n    const merged = { ...data, ...userSettings.get<T>(storeKey, longTerm) };\r\n    this.log.fn('constructor', merged);\r\n    this.#data = signal<T>(merged);\r\n  }\r\n  #data: WritableSignal<T>;\r\n\r\n  get snapshot() { return this.#data(); }\r\n\r\n  get data() { return this.#data.asReadonly(); }\r\n\r\n  get<K extends keyof T>(key: K): T[K] {\r\n    return this.#data()[key];\r\n  }\r\n\r\n  set<K extends keyof T>(key: K, value: T[K]) {\r\n    this.#data.update(data => ({ ...data, [key]: value }));\r\n    this.#save();\r\n  }\r\n\r\n  toggle<K extends keyof T>(key: K) {\r\n    this.#data.update(data => ({ ...data, [key]: !data[key] }));\r\n    this.#save();\r\n  }\r\n\r\n  setAll(data: T) {\r\n    this.#data.set(data);\r\n    this.#save();\r\n  }\r\n\r\n  setMany(data: Partial<T>) {\r\n    this.#data.update(old => ({ ...old, ...data }));\r\n    this.#save();\r\n  }\r\n\r\n  #save() {\r\n    const data = this.#data();\r\n    this.log.fn('save', data);\r\n    this.userSettings.set(this.storeKey, this.#data(), this.longTerm);\r\n  }\r\n}","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},v=\"en\",D={};D[v]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return v;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(v=i),i||!r&&v},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var v=this.$locale().weekStart||0,D=(y<v?y+7:y)-v;return $(r?m-D:m+(6-D),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,v=O.m(this,M);return v=(l={},l[c]=v/12,l[f]=v,l[h]=v/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?v:O.a(v)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[v],w.Ls=D,w.p={},w}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_ar=t(e.dayjs)}(this,(function(e){\"use strict\";function t(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var n=t(e),r=\"___________\".split(\"_\"),_={1:\"\",2:\"\",3:\"\",4:\"\",5:\"\",6:\"\",7:\"\",8:\"\",9:\"\",0:\"\"},d={\"\":\"1\",\"\":\"2\",\"\":\"3\",\"\":\"4\",\"\":\"5\",\"\":\"6\",\"\":\"7\",\"\":\"8\",\"\":\"9\",\"\":\"0\"},o={name:\"ar\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:r,monthsShort:r,weekStart:6,relativeTime:{future:\" %s\",past:\" %s\",s:\" \",m:\" \",mm:\"%d \",h:\" \",hh:\"%d \",d:\" \",dd:\"%d \",M:\" \",MM:\"%d \",y:\" \",yy:\"%d \"},preparse:function(e){return e.replace(/[]/g,(function(e){return d[e]})).replace(//g,\",\")},postformat:function(e){return e.replace(/\\d/g,(function(e){return _[e]})).replace(/,/g,\"\")},ordinal:function(e){return e},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"D/M/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"}};return n.default.locale(o,null,!0),o}));","!function(e,_){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=_(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],_):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_bg=_(e.dayjs)}(this,(function(e){\"use strict\";function _(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=_(e),d={name:\"bg\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekStart:1,ordinal:function(e){var _=e%100;if(_>10&&_<20)return e+\"-\";var t=e%10;return 1===t?e+\"-\":2===t?e+\"-\":7===t||8===t?e+\"-\":e+\"-\"},formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"D.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY H:mm\",LLLL:\"dddd, D MMMM YYYY H:mm\"},relativeTime:{future:\" %s\",past:\" %s\",s:\" \",m:\"\",mm:\"%d \",h:\"\",hh:\"%d \",d:\"\",dd:\"%d \",M:\"\",MM:\"%d \",y:\"\",yy:\"%d \"}};return t.default.locale(d,null,!0),d}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_cs=n(e.dayjs)}(this,(function(e){\"use strict\";function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=n(e);function s(e){return e>1&&e<5&&1!=~~(e/10)}function r(e,n,t,r){var d=e+\" \";switch(t){case\"s\":return n||r?\"pr sekund\":\"pr sekundami\";case\"m\":return n?\"minuta\":r?\"minutu\":\"minutou\";case\"mm\":return n||r?d+(s(e)?\"minuty\":\"minut\"):d+\"minutami\";case\"h\":return n?\"hodina\":r?\"hodinu\":\"hodinou\";case\"hh\":return n||r?d+(s(e)?\"hodiny\":\"hodin\"):d+\"hodinami\";case\"d\":return n||r?\"den\":\"dnem\";case\"dd\":return n||r?d+(s(e)?\"dny\":\"dn\"):d+\"dny\";case\"M\":return n||r?\"msc\":\"mscem\";case\"MM\":return n||r?d+(s(e)?\"msce\":\"msc\"):d+\"msci\";case\"y\":return n||r?\"rok\":\"rokem\";case\"yy\":return n||r?d+(s(e)?\"roky\":\"let\"):d+\"lety\"}}var d={name:\"cs\",weekdays:\"nedle_pondl_ter_steda_tvrtek_ptek_sobota\".split(\"_\"),weekdaysShort:\"ne_po_t_st_t_p_so\".split(\"_\"),weekdaysMin:\"ne_po_t_st_t_p_so\".split(\"_\"),months:\"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec\".split(\"_\"),monthsShort:\"led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro\".split(\"_\"),weekStart:1,yearStart:4,ordinal:function(e){return e+\".\"},formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd D. MMMM YYYY H:mm\",l:\"D. M. YYYY\"},relativeTime:{future:\"za %s\",past:\"ped %s\",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r}};return t.default.locale(d,null,!0),d}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_da=t(e.dayjs)}(this,(function(e){\"use strict\";function t(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var d=t(e),n={name:\"da\",weekdays:\"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag\".split(\"_\"),weekdaysShort:\"sn._man._tirs._ons._tors._fre._lr.\".split(\"_\"),weekdaysMin:\"s._ma._ti._on._to._fr._l.\".split(\"_\"),months:\"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december\".split(\"_\"),monthsShort:\"jan._feb._mar._apr._maj_juni_juli_aug._sept._okt._nov._dec.\".split(\"_\"),weekStart:1,ordinal:function(e){return e+\".\"},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY HH:mm\",LLLL:\"dddd [d.] D. MMMM YYYY [kl.] HH:mm\"},relativeTime:{future:\"om %s\",past:\"%s siden\",s:\"f sekunder\",m:\"et minut\",mm:\"%d minutter\",h:\"en time\",hh:\"%d timer\",d:\"en dag\",dd:\"%d dage\",M:\"en mned\",MM:\"%d mneder\",y:\"et r\",yy:\"%d r\"}};return d.default.locale(n,null,!0),n}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_de_at=n(e.dayjs)}(this,(function(e){\"use strict\";function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=n(e),i={s:\"ein paar Sekunden\",m:[\"eine Minute\",\"einer Minute\"],mm:\"%d Minuten\",h:[\"eine Stunde\",\"einer Stunde\"],hh:\"%d Stunden\",d:[\"ein Tag\",\"einem Tag\"],dd:[\"%d Tage\",\"%d Tagen\"],M:[\"ein Monat\",\"einem Monat\"],MM:[\"%d Monate\",\"%d Monaten\"],y:[\"ein Jahr\",\"einem Jahr\"],yy:[\"%d Jahre\",\"%d Jahren\"]};function a(e,n,t){var a=i[t];return Array.isArray(a)&&(a=a[n?0:1]),a.replace(\"%d\",e)}var r={name:\"de-at\",weekdays:\"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag\".split(\"_\"),weekdaysShort:\"So._Mo._Di._Mi._Do._Fr._Sa.\".split(\"_\"),weekdaysMin:\"So_Mo_Di_Mi_Do_Fr_Sa\".split(\"_\"),months:\"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember\".split(\"_\"),monthsShort:\"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.\".split(\"_\"),ordinal:function(e){return e+\".\"},weekStart:1,formats:{LTS:\"HH:mm:ss\",LT:\"HH:mm\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY HH:mm\",LLLL:\"dddd, D. MMMM YYYY HH:mm\"},relativeTime:{future:\"in %s\",past:\"vor %s\",s:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a}};return t.default.locale(r,null,!0),r}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_de_ch=n(e.dayjs)}(this,(function(e){\"use strict\";function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=n(e),a={s:\"ein paar Sekunden\",m:[\"eine Minute\",\"einer Minute\"],mm:\"%d Minuten\",h:[\"eine Stunde\",\"einer Stunde\"],hh:\"%d Stunden\",d:[\"ein Tag\",\"einem Tag\"],dd:[\"%d Tage\",\"%d Tagen\"],M:[\"ein Monat\",\"einem Monat\"],MM:[\"%d Monate\",\"%d Monaten\"],y:[\"ein Jahr\",\"einem Jahr\"],yy:[\"%d Jahre\",\"%d Jahren\"]};function i(e,n,t){var i=a[t];return Array.isArray(i)&&(i=i[n?0:1]),i.replace(\"%d\",e)}var r={name:\"de-ch\",weekdays:\"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag\".split(\"_\"),weekdaysShort:\"So_Mo_Di_Mi_Do_Fr_Sa\".split(\"_\"),weekdaysMin:\"So_Mo_Di_Mi_Do_Fr_Sa\".split(\"_\"),months:\"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember\".split(\"_\"),monthsShort:\"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.\".split(\"_\"),ordinal:function(e){return e+\".\"},weekStart:1,formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY HH:mm\",LLLL:\"dddd, D. MMMM YYYY HH:mm\"},relativeTime:{future:\"in %s\",past:\"vor %s\",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i}};return t.default.locale(r,null,!0),r}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_de=n(e.dayjs)}(this,(function(e){\"use strict\";function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=n(e),a={s:\"ein paar Sekunden\",m:[\"eine Minute\",\"einer Minute\"],mm:\"%d Minuten\",h:[\"eine Stunde\",\"einer Stunde\"],hh:\"%d Stunden\",d:[\"ein Tag\",\"einem Tag\"],dd:[\"%d Tage\",\"%d Tagen\"],M:[\"ein Monat\",\"einem Monat\"],MM:[\"%d Monate\",\"%d Monaten\"],y:[\"ein Jahr\",\"einem Jahr\"],yy:[\"%d Jahre\",\"%d Jahren\"]};function i(e,n,t){var i=a[t];return Array.isArray(i)&&(i=i[n?0:1]),i.replace(\"%d\",e)}var r={name:\"de\",weekdays:\"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag\".split(\"_\"),weekdaysShort:\"So._Mo._Di._Mi._Do._Fr._Sa.\".split(\"_\"),weekdaysMin:\"So_Mo_Di_Mi_Do_Fr_Sa\".split(\"_\"),months:\"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember\".split(\"_\"),monthsShort:\"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.\".split(\"_\"),ordinal:function(e){return e+\".\"},weekStart:1,yearStart:4,formats:{LTS:\"HH:mm:ss\",LT:\"HH:mm\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY HH:mm\",LLLL:\"dddd, D. MMMM YYYY HH:mm\"},relativeTime:{future:\"in %s\",past:\"vor %s\",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i}};return t.default.locale(r,null,!0),r}));","!function(e,_){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=_(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],_):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_el=_(e.dayjs)}(this,(function(e){\"use strict\";function _(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=_(e),d={name:\"el\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),ordinal:function(e){return e},weekStart:1,relativeTime:{future:\" %s\",past:\" %s\",s:\" \",m:\" \",mm:\"%d \",h:\" \",hh:\"%d \",d:\" \",dd:\"%d \",M:\" \",MM:\"%d \",y:\" \",yy:\"%d \"},formats:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY h:mm A\",LLLL:\"dddd, D MMMM YYYY h:mm A\"}};return t.default.locale(d,null,!0),d}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_en_au=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=a(e),_={name:\"en-au\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),weekStart:1,weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY h:mm A\",LLLL:\"dddd, D MMMM YYYY h:mm A\"},relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"}};return t.default.locale(_,null,!0),_}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_en_ca=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var _=a(e),t={name:\"en-ca\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"YYYY-MM-DD\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"}};return _.default.locale(t,null,!0),t}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_en_gb=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=a(e),_={name:\"en-gb\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekStart:1,yearStart:4,relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},ordinal:function(e){var a=[\"th\",\"st\",\"nd\",\"rd\"],t=e%100;return\"[\"+e+(a[(t-20)%10]||a[t]||a[0])+\"]\"}};return t.default.locale(_,null,!0),_}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_en_ie=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=a(e),_={name:\"en-ie\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),weekStart:1,weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"}};return t.default.locale(_,null,!0),_}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_en=n()}(this,(function(){\"use strict\";return{name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")}}));","!function(e,o){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=o(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],o):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_es_mx=o(e.dayjs)}(this,(function(e){\"use strict\";function o(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var s=o(e),d={name:\"es-mx\",weekdays:\"domingo_lunes_martes_mircoles_jueves_viernes_sbado\".split(\"_\"),weekdaysShort:\"dom._lun._mar._mi._jue._vie._sb.\".split(\"_\"),weekdaysMin:\"do_lu_ma_mi_ju_vi_s\".split(\"_\"),months:\"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre\".split(\"_\"),monthsShort:\"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic\".split(\"_\"),relativeTime:{future:\"en %s\",past:\"hace %s\",s:\"unos segundos\",m:\"un minuto\",mm:\"%d minutos\",h:\"una hora\",hh:\"%d horas\",d:\"un da\",dd:\"%d das\",M:\"un mes\",MM:\"%d meses\",y:\"un ao\",yy:\"%d aos\"},ordinal:function(e){return e+\"\"},formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY H:mm\",LLLL:\"dddd, D [de] MMMM [de] YYYY H:mm\"}};return s.default.locale(d,null,!0),d}));","!function(e,s){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=s(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],s):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_es_us=s(e.dayjs)}(this,(function(e){\"use strict\";function s(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var o=s(e),d={name:\"es-us\",weekdays:\"domingo_lunes_martes_mircoles_jueves_viernes_sbado\".split(\"_\"),weekdaysShort:\"dom._lun._mar._mi._jue._vie._sb.\".split(\"_\"),weekdaysMin:\"do_lu_ma_mi_ju_vi_s\".split(\"_\"),months:\"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre\".split(\"_\"),monthsShort:\"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic\".split(\"_\"),relativeTime:{future:\"en %s\",past:\"hace %s\",s:\"unos segundos\",m:\"un minuto\",mm:\"%d minutos\",h:\"una hora\",hh:\"%d horas\",d:\"un da\",dd:\"%d das\",M:\"un mes\",MM:\"%d meses\",y:\"un ao\",yy:\"%d aos\"},ordinal:function(e){return e+\"\"},formats:{LT:\"h:mm A\",LTS:\"h:mm:ss A\",L:\"MM/DD/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY h:mm A\",LLLL:\"dddd, D [de] MMMM [de] YYYY h:mm A\"}};return o.default.locale(d,null,!0),d}));","!function(e,o){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=o(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],o):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_es=o(e.dayjs)}(this,(function(e){\"use strict\";function o(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var s=o(e),d={name:\"es\",monthsShort:\"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic\".split(\"_\"),weekdays:\"domingo_lunes_martes_mircoles_jueves_viernes_sbado\".split(\"_\"),weekdaysShort:\"dom._lun._mar._mi._jue._vie._sb.\".split(\"_\"),weekdaysMin:\"do_lu_ma_mi_ju_vi_s\".split(\"_\"),months:\"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre\".split(\"_\"),weekStart:1,formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY H:mm\",LLLL:\"dddd, D [de] MMMM [de] YYYY H:mm\"},relativeTime:{future:\"en %s\",past:\"hace %s\",s:\"unos segundos\",m:\"un minuto\",mm:\"%d minutos\",h:\"una hora\",hh:\"%d horas\",d:\"un da\",dd:\"%d das\",M:\"un mes\",MM:\"%d meses\",y:\"un ao\",yy:\"%d aos\"},ordinal:function(e){return e+\"\"}};return s.default.locale(d,null,!0),d}));","!function(_,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],e):(_=\"undefined\"!=typeof globalThis?globalThis:_||self).dayjs_locale_fa=e(_.dayjs)}(this,(function(_){\"use strict\";function e(_){return _&&\"object\"==typeof _&&\"default\"in _?_:{default:_}}var t=e(_),d={name:\"fa\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),weekStart:6,months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),ordinal:function(_){return _},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},relativeTime:{future:\" %s\",past:\"%s \",s:\" \",m:\" \",mm:\"%d \",h:\" \",hh:\"%d \",d:\" \",dd:\"%d \",M:\" \",MM:\"%d \",y:\" \",yy:\"%d \"}};return t.default.locale(d,null,!0),d}));","!function(u,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],e):(u=\"undefined\"!=typeof globalThis?globalThis:u||self).dayjs_locale_fi=e(u.dayjs)}(this,(function(u){\"use strict\";function e(u){return u&&\"object\"==typeof u&&\"default\"in u?u:{default:u}}var t=e(u);function n(u,e,t,n){var i={s:\"muutama sekunti\",m:\"minuutti\",mm:\"%d minuuttia\",h:\"tunti\",hh:\"%d tuntia\",d:\"piv\",dd:\"%d piv\",M:\"kuukausi\",MM:\"%d kuukautta\",y:\"vuosi\",yy:\"%d vuotta\",numbers:\"nolla_yksi_kaksi_kolme_nelj_viisi_kuusi_seitsemn_kahdeksan_yhdeksn\".split(\"_\")},a={s:\"muutaman sekunnin\",m:\"minuutin\",mm:\"%d minuutin\",h:\"tunnin\",hh:\"%d tunnin\",d:\"pivn\",dd:\"%d pivn\",M:\"kuukauden\",MM:\"%d kuukauden\",y:\"vuoden\",yy:\"%d vuoden\",numbers:\"nollan_yhden_kahden_kolmen_neljn_viiden_kuuden_seitsemn_kahdeksan_yhdeksn\".split(\"_\")},s=n&&!e?a:i,_=s[t];return u<10?_.replace(\"%d\",s.numbers[u]):_.replace(\"%d\",u)}var i={name:\"fi\",weekdays:\"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai\".split(\"_\"),weekdaysShort:\"su_ma_ti_ke_to_pe_la\".split(\"_\"),weekdaysMin:\"su_ma_ti_ke_to_pe_la\".split(\"_\"),months:\"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu\".split(\"_\"),monthsShort:\"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu\".split(\"_\"),ordinal:function(u){return u+\".\"},weekStart:1,yearStart:4,relativeTime:{future:\"%s pst\",past:\"%s sitten\",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},formats:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM[ta] YYYY\",LLL:\"D. MMMM[ta] YYYY, [klo] HH.mm\",LLLL:\"dddd, D. MMMM[ta] YYYY, [klo] HH.mm\",l:\"D.M.YYYY\",ll:\"D. MMM YYYY\",lll:\"D. MMM YYYY, [klo] HH.mm\",llll:\"ddd, D. MMM YYYY, [klo] HH.mm\"}};return t.default.locale(i,null,!0),i}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_fr_ch=n(e.dayjs)}(this,(function(e){\"use strict\";function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var i=n(e),_={name:\"fr-ch\",weekdays:\"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi\".split(\"_\"),months:\"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre\".split(\"_\"),weekStart:1,weekdaysShort:\"dim._lun._mar._mer._jeu._ven._sam.\".split(\"_\"),monthsShort:\"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.\".split(\"_\"),weekdaysMin:\"di_lu_ma_me_je_ve_sa\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},relativeTime:{future:\"dans %s\",past:\"il y a %s\",s:\"quelques secondes\",m:\"une minute\",mm:\"%d minutes\",h:\"une heure\",hh:\"%d heures\",d:\"un jour\",dd:\"%d jours\",M:\"un mois\",MM:\"%d mois\",y:\"un an\",yy:\"%d ans\"}};return i.default.locale(_,null,!0),_}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_fr=n(e.dayjs)}(this,(function(e){\"use strict\";function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=n(e),i={name:\"fr\",weekdays:\"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi\".split(\"_\"),weekdaysShort:\"dim._lun._mar._mer._jeu._ven._sam.\".split(\"_\"),weekdaysMin:\"di_lu_ma_me_je_ve_sa\".split(\"_\"),months:\"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre\".split(\"_\"),monthsShort:\"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.\".split(\"_\"),weekStart:1,yearStart:4,formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},relativeTime:{future:\"dans %s\",past:\"il y a %s\",s:\"quelques secondes\",m:\"une minute\",mm:\"%d minutes\",h:\"une heure\",hh:\"%d heures\",d:\"un jour\",dd:\"%d jours\",M:\"un mois\",MM:\"%d mois\",y:\"un an\",yy:\"%d ans\"},ordinal:function(e){return\"\"+e+(1===e?\"er\":\"\")}};return t.default.locale(i,null,!0),i}));","!function(Y,M){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=M(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],M):(Y=\"undefined\"!=typeof globalThis?globalThis:Y||self).dayjs_locale_he=M(Y.dayjs)}(this,(function(Y){\"use strict\";function M(Y){return Y&&\"object\"==typeof Y&&\"default\"in Y?Y:{default:Y}}var d=M(Y),e={s:\" \",ss:\"%d \",m:\"\",mm:\"%d \",h:\"\",hh:\"%d \",hh2:\"\",d:\"\",dd:\"%d \",dd2:\"\",M:\"\",MM:\"%d \",MM2:\"\",y:\"\",yy:\"%d \",yy2:\"\"};function _(Y,M,d){return(e[d+(2===Y?\"2\":\"\")]||e[d]).replace(\"%d\",Y)}var l={name:\"he\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:\"___________\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),relativeTime:{future:\" %s\",past:\" %s\",s:_,m:_,mm:_,h:_,hh:_,d:_,dd:_,M:_,MM:_,y:_,yy:_},ordinal:function(Y){return Y},format:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D []MMMM YYYY\",LLL:\"D []MMMM YYYY HH:mm\",LLLL:\"dddd, D []MMMM YYYY HH:mm\",l:\"D/M/YYYY\",ll:\"D MMM YYYY\",lll:\"D MMM YYYY HH:mm\",llll:\"ddd, D MMM YYYY HH:mm\"},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D []MMMM YYYY\",LLL:\"D []MMMM YYYY HH:mm\",LLLL:\"dddd, D []MMMM YYYY HH:mm\",l:\"D/M/YYYY\",ll:\"D MMM YYYY\",lll:\"D MMM YYYY HH:mm\",llll:\"ddd, D MMM YYYY HH:mm\"}};return d.default.locale(l,null,!0),l}));","!function(_,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],e):(_=\"undefined\"!=typeof globalThis?globalThis:_||self).dayjs_locale_hi=e(_.dayjs)}(this,(function(_){\"use strict\";function e(_){return _&&\"object\"==typeof _&&\"default\"in _?_:{default:_}}var t=e(_),d={name:\"hi\",weekdays:\"______\".split(\"_\"),months:\"___________\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),monthsShort:\"._.__.___._._._._._.\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),ordinal:function(_){return _},formats:{LT:\"A h:mm \",LTS:\"A h:mm:ss \",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY, A h:mm \",LLLL:\"dddd, D MMMM YYYY, A h:mm \"},relativeTime:{future:\"%s \",past:\"%s \",s:\"  \",m:\" \",mm:\"%d \",h:\" \",hh:\"%d \",d:\" \",dd:\"%d \",M:\" \",MM:\"%d \",y:\" \",yy:\"%d \"}};return t.default.locale(d,null,!0),d}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_hr=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=a(e),s=\"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca\".split(\"_\"),n=\"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac\".split(\"_\"),_=/D[oD]?(\\[[^[\\]]*\\]|\\s)+MMMM?/,o=function(e,a){return _.test(a)?s[e.month()]:n[e.month()]};o.s=n,o.f=s;var i={name:\"hr\",weekdays:\"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota\".split(\"_\"),weekdaysShort:\"ned._pon._uto._sri._et._pet._sub.\".split(\"_\"),weekdaysMin:\"ne_po_ut_sr_e_pe_su\".split(\"_\"),months:o,monthsShort:\"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.\".split(\"_\"),weekStart:1,formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd, D. MMMM YYYY H:mm\"},relativeTime:{future:\"za %s\",past:\"prije %s\",s:\"sekunda\",m:\"minuta\",mm:\"%d minuta\",h:\"sat\",hh:\"%d sati\",d:\"dan\",dd:\"%d dana\",M:\"mjesec\",MM:\"%d mjeseci\",y:\"godina\",yy:\"%d godine\"},ordinal:function(e){return e+\".\"}};return t.default.locale(i,null,!0),i}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_hu=n(e.dayjs)}(this,(function(e){\"use strict\";function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=n(e),r={name:\"hu\",weekdays:\"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat\".split(\"_\"),weekdaysShort:\"vas_ht_kedd_sze_cst_pn_szo\".split(\"_\"),weekdaysMin:\"v_h_k_sze_cs_p_szo\".split(\"_\"),months:\"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december\".split(\"_\"),monthsShort:\"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec\".split(\"_\"),ordinal:function(e){return e+\".\"},weekStart:1,relativeTime:{future:\"%s mlva\",past:\"%s\",s:function(e,n,t,r){return\"nhny msodperc\"+(r||n?\"\":\"e\")},m:function(e,n,t,r){return\"egy perc\"+(r||n?\"\":\"e\")},mm:function(e,n,t,r){return e+\" perc\"+(r||n?\"\":\"e\")},h:function(e,n,t,r){return\"egy \"+(r||n?\"ra\":\"rja\")},hh:function(e,n,t,r){return e+\" \"+(r||n?\"ra\":\"rja\")},d:function(e,n,t,r){return\"egy \"+(r||n?\"nap\":\"napja\")},dd:function(e,n,t,r){return e+\" \"+(r||n?\"nap\":\"napja\")},M:function(e,n,t,r){return\"egy \"+(r||n?\"hnap\":\"hnapja\")},MM:function(e,n,t,r){return e+\" \"+(r||n?\"hnap\":\"hnapja\")},y:function(e,n,t,r){return\"egy \"+(r||n?\"v\":\"ve\")},yy:function(e,n,t,r){return e+\" \"+(r||n?\"v\":\"ve\")}},formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"YYYY.MM.DD.\",LL:\"YYYY. MMMM D.\",LLL:\"YYYY. MMMM D. H:mm\",LLLL:\"YYYY. MMMM D., dddd H:mm\"}};return t.default.locale(r,null,!0),r}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_id=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=a(e),_={name:\"id\",weekdays:\"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu\".split(\"_\"),months:\"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember\".split(\"_\"),weekdaysShort:\"Min_Sen_Sel_Rab_Kam_Jum_Sab\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des\".split(\"_\"),weekdaysMin:\"Mg_Sn_Sl_Rb_Km_Jm_Sb\".split(\"_\"),weekStart:1,formats:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY [pukul] HH.mm\",LLLL:\"dddd, D MMMM YYYY [pukul] HH.mm\"},relativeTime:{future:\"dalam %s\",past:\"%s yang lalu\",s:\"beberapa detik\",m:\"semenit\",mm:\"%d menit\",h:\"sejam\",hh:\"%d jam\",d:\"sehari\",dd:\"%d hari\",M:\"sebulan\",MM:\"%d bulan\",y:\"setahun\",yy:\"%d tahun\"},ordinal:function(e){return e+\".\"}};return t.default.locale(_,null,!0),_}));","!function(e,o){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=o(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],o):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_it_ch=o(e.dayjs)}(this,(function(e){\"use strict\";function o(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var n=o(e),t={name:\"it-ch\",weekdays:\"domenica_luned_marted_mercoled_gioved_venerd_sabato\".split(\"_\"),months:\"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre\".split(\"_\"),weekStart:1,weekdaysShort:\"dom_lun_mar_mer_gio_ven_sab\".split(\"_\"),monthsShort:\"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic\".split(\"_\"),weekdaysMin:\"do_lu_ma_me_gi_ve_sa\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},relativeTime:{future:\"tra %s\",past:\"%s fa\",s:\"alcuni secondi\",m:\"un minuto\",mm:\"%d minuti\",h:\"un'ora\",hh:\"%d ore\",d:\"un giorno\",dd:\"%d giorni\",M:\"un mese\",MM:\"%d mesi\",y:\"un anno\",yy:\"%d anni\"}};return n.default.locale(t,null,!0),t}));","!function(e,o){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=o(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],o):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_it=o(e.dayjs)}(this,(function(e){\"use strict\";function o(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=o(e),n={name:\"it\",weekdays:\"domenica_luned_marted_mercoled_gioved_venerd_sabato\".split(\"_\"),weekdaysShort:\"dom_lun_mar_mer_gio_ven_sab\".split(\"_\"),weekdaysMin:\"do_lu_ma_me_gi_ve_sa\".split(\"_\"),months:\"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre\".split(\"_\"),weekStart:1,monthsShort:\"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic\".split(\"_\"),formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},relativeTime:{future:\"tra %s\",past:\"%s fa\",s:\"qualche secondo\",m:\"un minuto\",mm:\"%d minuti\",h:\"un' ora\",hh:\"%d ore\",d:\"un giorno\",dd:\"%d giorni\",M:\"un mese\",MM:\"%d mesi\",y:\"un anno\",yy:\"%d anni\"},ordinal:function(e){return e+\"\"}};return t.default.locale(n,null,!0),n}));","!function(e,_){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=_(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],_):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_ja=_(e.dayjs)}(this,(function(e){\"use strict\";function _(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=_(e),d={name:\"ja\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),monthsShort:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),ordinal:function(e){return e+\"\"},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY/MM/DD\",LL:\"YYYYMD\",LLL:\"YYYYMD HH:mm\",LLLL:\"YYYYMD dddd HH:mm\",l:\"YYYY/MM/DD\",ll:\"YYYYMD\",lll:\"YYYYMD HH:mm\",llll:\"YYYYMD(ddd) HH:mm\"},meridiem:function(e){return e<12?\"\":\"\"},relativeTime:{future:\"%s\",past:\"%s\",s:\"\",m:\"1\",mm:\"%d\",h:\"1\",hh:\"%d\",d:\"1\",dd:\"%d\",M:\"1\",MM:\"%d\",y:\"1\",yy:\"%d\"}};return t.default.locale(d,null,!0),d}));","!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],n):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_jv=n(e.dayjs)}(this,(function(e){\"use strict\";function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=n(e),_={name:\"jv\",weekdays:\"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu\".split(\"_\"),months:\"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember\".split(\"_\"),weekStart:1,weekdaysShort:\"Min_Sen_Sel_Reb_Kem_Jem_Sep\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des\".split(\"_\"),weekdaysMin:\"Mg_Sn_Sl_Rb_Km_Jm_Sp\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY [pukul] HH.mm\",LLLL:\"dddd, D MMMM YYYY [pukul] HH.mm\"},relativeTime:{future:\"wonten ing %s\",past:\"%s ingkang kepengker\",s:\"sawetawis detik\",m:\"setunggal menit\",mm:\"%d menit\",h:\"setunggal jam\",hh:\"%d jam\",d:\"sedinten\",dd:\"%d dinten\",M:\"sewulan\",MM:\"%d wulan\",y:\"setaun\",yy:\"%d taun\"}};return t.default.locale(_,null,!0),_}));","!function(e,_){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=_(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],_):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_ko=_(e.dayjs)}(this,(function(e){\"use strict\";function _(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var d=_(e),t={name:\"ko\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),monthsShort:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"A h:mm\",LTS:\"A h:mm:ss\",L:\"YYYY.MM.DD.\",LL:\"YYYY MMMM D\",LLL:\"YYYY MMMM D A h:mm\",LLLL:\"YYYY MMMM D dddd A h:mm\",l:\"YYYY.MM.DD.\",ll:\"YYYY MMMM D\",lll:\"YYYY MMMM D A h:mm\",llll:\"YYYY MMMM D dddd A h:mm\"},meridiem:function(e){return e<12?\"\":\"\"},relativeTime:{future:\"%s \",past:\"%s \",s:\" \",m:\"1\",mm:\"%d\",h:\" \",hh:\"%d\",d:\"\",dd:\"%d\",M:\" \",MM:\"%d\",y:\" \",yy:\"%d\"}};return d.default.locale(t,null,!0),t}));","!function(e,_){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=_(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],_):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_lb=_(e.dayjs)}(this,(function(e){\"use strict\";function _(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=_(e),n={name:\"lb\",weekdays:\"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg\".split(\"_\"),months:\"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember\".split(\"_\"),weekStart:1,weekdaysShort:\"So._M._D._M._Do._Fr._Sa.\".split(\"_\"),monthsShort:\"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.\".split(\"_\"),weekdaysMin:\"So_M_D_M_Do_Fr_Sa\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"H:mm [Auer]\",LTS:\"H:mm:ss [Auer]\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm [Auer]\",LLLL:\"dddd, D. MMMM YYYY H:mm [Auer]\"}};return t.default.locale(n,null,!0),n}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_ms_my=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=a(e),_={name:\"ms-my\",weekdays:\"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu\".split(\"_\"),months:\"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember\".split(\"_\"),weekStart:1,weekdaysShort:\"Ahd_Isn_Sel_Rab_Kha_Jum_Sab\".split(\"_\"),monthsShort:\"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis\".split(\"_\"),weekdaysMin:\"Ah_Is_Sl_Rb_Km_Jm_Sb\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY [pukul] HH.mm\",LLLL:\"dddd, D MMMM YYYY [pukul] HH.mm\"},relativeTime:{future:\"dalam %s\",past:\"%s yang lepas\",s:\"beberapa saat\",m:\"seminit\",mm:\"%d minit\",h:\"sejam\",hh:\"%d jam\",d:\"sehari\",dd:\"%d hari\",M:\"sebulan\",MM:\"%d bulan\",y:\"setahun\",yy:\"%d tahun\"}};return t.default.locale(_,null,!0),_}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_ms=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=a(e),s={name:\"ms\",weekdays:\"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu\".split(\"_\"),weekdaysShort:\"Ahd_Isn_Sel_Rab_Kha_Jum_Sab\".split(\"_\"),weekdaysMin:\"Ah_Is_Sl_Rb_Km_Jm_Sb\".split(\"_\"),months:\"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember\".split(\"_\"),monthsShort:\"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis\".split(\"_\"),weekStart:1,formats:{LT:\"HH.mm\",LTS:\"HH.mm.ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH.mm\",LLLL:\"dddd, D MMMM YYYY HH.mm\"},relativeTime:{future:\"dalam %s\",past:\"%s yang lepas\",s:\"beberapa saat\",m:\"seminit\",mm:\"%d minit\",h:\"sejam\",hh:\"%d jam\",d:\"sehari\",dd:\"%d hari\",M:\"sebulan\",MM:\"%d bulan\",y:\"setahun\",yy:\"%d tahun\"},ordinal:function(e){return e+\".\"}};return t.default.locale(s,null,!0),s}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_nl_be=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var n=a(e),d={name:\"nl-be\",weekdays:\"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag\".split(\"_\"),months:\"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december\".split(\"_\"),monthsShort:\"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.\".split(\"_\"),weekStart:1,weekdaysShort:\"zo._ma._di._wo._do._vr._za.\".split(\"_\"),weekdaysMin:\"zo_ma_di_wo_do_vr_za\".split(\"_\"),ordinal:function(e){return e},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},relativeTime:{future:\"over %s\",past:\"%s geleden\",s:\"een paar seconden\",m:\"n minuut\",mm:\"%d minuten\",h:\"n uur\",hh:\"%d uur\",d:\"n dag\",dd:\"%d dagen\",M:\"n maand\",MM:\"%d maanden\",y:\"n jaar\",yy:\"%d jaar\"}};return n.default.locale(d,null,!0),d}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_nl=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var d=a(e),n={name:\"nl\",weekdays:\"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag\".split(\"_\"),weekdaysShort:\"zo._ma._di._wo._do._vr._za.\".split(\"_\"),weekdaysMin:\"zo_ma_di_wo_do_vr_za\".split(\"_\"),months:\"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december\".split(\"_\"),monthsShort:\"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec\".split(\"_\"),ordinal:function(e){return\"[\"+e+(1===e||8===e||e>=20?\"ste\":\"de\")+\"]\"},weekStart:1,yearStart:4,formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD-MM-YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd D MMMM YYYY HH:mm\"},relativeTime:{future:\"over %s\",past:\"%s geleden\",s:\"een paar seconden\",m:\"een minuut\",mm:\"%d minuten\",h:\"een uur\",hh:\"%d uur\",d:\"een dag\",dd:\"%d dagen\",M:\"een maand\",MM:\"%d maanden\",y:\"een jaar\",yy:\"%d jaar\"}};return d.default.locale(n,null,!0),n}));","!function(_,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],e):(_=\"undefined\"!=typeof globalThis?globalThis:_||self).dayjs_locale_pa_in=e(_.dayjs)}(this,(function(_){\"use strict\";function e(_){return _&&\"object\"==typeof _&&\"default\"in _?_:{default:_}}var t=e(_),d={name:\"pa-in\",weekdays:\"______\".split(\"_\"),months:\"___________\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),monthsShort:\"___________\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),ordinal:function(_){return _},formats:{LT:\"A h:mm \",LTS:\"A h:mm:ss \",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY, A h:mm \",LLLL:\"dddd, D MMMM YYYY, A h:mm \"},relativeTime:{future:\"%s \",past:\"%s \",s:\" \",m:\" \",mm:\"%d \",h:\" \",hh:\"%d \",d:\" \",dd:\"%d \",M:\" \",MM:\"%d \",y:\" \",yy:\"%d \"}};return t.default.locale(d,null,!0),d}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_pl=t(e.dayjs)}(this,(function(e){\"use strict\";function t(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var i=t(e);function a(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function n(e,t,i){var n=e+\" \";switch(i){case\"m\":return t?\"minuta\":\"minut\";case\"mm\":return n+(a(e)?\"minuty\":\"minut\");case\"h\":return t?\"godzina\":\"godzin\";case\"hh\":return n+(a(e)?\"godziny\":\"godzin\");case\"MM\":return n+(a(e)?\"miesice\":\"miesicy\");case\"yy\":return n+(a(e)?\"lata\":\"lat\")}}var r=\"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia\".split(\"_\"),_=\"stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie\".split(\"_\"),s=/D MMMM/,d=function(e,t){return s.test(t)?r[e.month()]:_[e.month()]};d.s=_,d.f=r;var o={name:\"pl\",weekdays:\"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota\".split(\"_\"),weekdaysShort:\"ndz_pon_wt_r_czw_pt_sob\".split(\"_\"),weekdaysMin:\"Nd_Pn_Wt_r_Cz_Pt_So\".split(\"_\"),months:d,monthsShort:\"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru\".split(\"_\"),ordinal:function(e){return e+\".\"},weekStart:1,yearStart:4,relativeTime:{future:\"za %s\",past:\"%s temu\",s:\"kilka sekund\",m:n,mm:n,h:n,hh:n,d:\"1 dzie\",dd:\"%d dni\",M:\"miesic\",MM:n,y:\"rok\",yy:n},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"}};return i.default.locale(o,null,!0),o}));","!function(e,o){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=o(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],o):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_pt_br=o(e.dayjs)}(this,(function(e){\"use strict\";function o(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var a=o(e),s={name:\"pt-br\",weekdays:\"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado\".split(\"_\"),weekdaysShort:\"dom_seg_ter_qua_qui_sex_sb\".split(\"_\"),weekdaysMin:\"Do_2_3_4_5_6_S\".split(\"_\"),months:\"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro\".split(\"_\"),monthsShort:\"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez\".split(\"_\"),ordinal:function(e){return e+\"\"},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY [s] HH:mm\",LLLL:\"dddd, D [de] MMMM [de] YYYY [s] HH:mm\"},relativeTime:{future:\"em %s\",past:\"h %s\",s:\"poucos segundos\",m:\"um minuto\",mm:\"%d minutos\",h:\"uma hora\",hh:\"%d horas\",d:\"um dia\",dd:\"%d dias\",M:\"um ms\",MM:\"%d meses\",y:\"um ano\",yy:\"%d anos\"}};return a.default.locale(s,null,!0),s}));","!function(e,a){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=a(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],a):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_pt=a(e.dayjs)}(this,(function(e){\"use strict\";function a(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var o=a(e),t={name:\"pt\",weekdays:\"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado\".split(\"_\"),weekdaysShort:\"dom_seg_ter_qua_qui_sex_sab\".split(\"_\"),weekdaysMin:\"Do_2_3_4_5_6_Sa\".split(\"_\"),months:\"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro\".split(\"_\"),monthsShort:\"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez\".split(\"_\"),ordinal:function(e){return e+\"\"},weekStart:1,yearStart:4,formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY [s] HH:mm\",LLLL:\"dddd, D [de] MMMM [de] YYYY [s] HH:mm\"},relativeTime:{future:\"em %s\",past:\"h %s\",s:\"alguns segundos\",m:\"um minuto\",mm:\"%d minutos\",h:\"uma hora\",hh:\"%d horas\",d:\"um dia\",dd:\"%d dias\",M:\"um ms\",MM:\"%d meses\",y:\"um ano\",yy:\"%d anos\"}};return o.default.locale(t,null,!0),t}));","!function(_,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],t):(_=\"undefined\"!=typeof globalThis?globalThis:_||self).dayjs_locale_ru=t(_.dayjs)}(this,(function(_){\"use strict\";function t(_){return _&&\"object\"==typeof _&&\"default\"in _?_:{default:_}}var e=t(_),n=\"___________\".split(\"_\"),s=\"___________\".split(\"_\"),r=\"._._._.____._._._._.\".split(\"_\"),o=\"._.__.____._._._._.\".split(\"_\"),i=/D[oD]?(\\[[^[\\]]*\\]|\\s)+MMMM?/;function d(_,t,e){var n,s;return\"m\"===e?t?\"\":\"\":_+\" \"+(n=+_,s={mm:t?\"__\":\"__\",hh:\"__\",dd:\"__\",MM:\"__\",yy:\"__\"}[e].split(\"_\"),n%10==1&&n%100!=11?s[0]:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?s[1]:s[2])}var u=function(_,t){return i.test(t)?n[_.month()]:s[_.month()]};u.s=s,u.f=n;var a=function(_,t){return i.test(t)?r[_.month()]:o[_.month()]};a.s=o,a.f=r;var m={name:\"ru\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:u,monthsShort:a,weekStart:1,yearStart:4,formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY .\",LLL:\"D MMMM YYYY ., H:mm\",LLLL:\"dddd, D MMMM YYYY ., H:mm\"},relativeTime:{future:\" %s\",past:\"%s \",s:\" \",m:d,mm:d,h:\"\",hh:d,d:\"\",dd:d,M:\"\",MM:d,y:\"\",yy:d},ordinal:function(_){return _},meridiem:function(_){return _<4?\"\":_<12?\"\":_<17?\"\":\"\"}};return e.default.locale(m,null,!0),m}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_sk=t(e.dayjs)}(this,(function(e){\"use strict\";function t(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var n=t(e);function r(e){return e>1&&e<5&&1!=~~(e/10)}function o(e,t,n,o){var a=e+\" \";switch(n){case\"s\":return t||o?\"pr seknd\":\"pr sekundami\";case\"m\":return t?\"minta\":o?\"mintu\":\"mintou\";case\"mm\":return t||o?a+(r(e)?\"minty\":\"mint\"):a+\"mintami\";case\"h\":return t?\"hodina\":o?\"hodinu\":\"hodinou\";case\"hh\":return t||o?a+(r(e)?\"hodiny\":\"hodn\"):a+\"hodinami\";case\"d\":return t||o?\"de\":\"dom\";case\"dd\":return t||o?a+(r(e)?\"dni\":\"dn\"):a+\"dami\";case\"M\":return t||o?\"mesiac\":\"mesiacom\";case\"MM\":return t||o?a+(r(e)?\"mesiace\":\"mesiacov\"):a+\"mesiacmi\";case\"y\":return t||o?\"rok\":\"rokom\";case\"yy\":return t||o?a+(r(e)?\"roky\":\"rokov\"):a+\"rokmi\"}}var a={name:\"sk\",weekdays:\"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota\".split(\"_\"),weekdaysShort:\"ne_po_ut_st_t_pi_so\".split(\"_\"),weekdaysMin:\"ne_po_ut_st_t_pi_so\".split(\"_\"),months:\"janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december\".split(\"_\"),monthsShort:\"jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec\".split(\"_\"),weekStart:1,yearStart:4,ordinal:function(e){return e+\".\"},formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd D. MMMM YYYY H:mm\",l:\"D. M. YYYY\"},relativeTime:{future:\"za %s\",past:\"pred %s\",s:o,m:o,mm:o,h:o,hh:o,d:o,dd:o,M:o,MM:o,y:o,yy:o}};return n.default.locale(a,null,!0),a}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_sl=t(e.dayjs)}(this,(function(e){\"use strict\";function t(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var _=t(e),n={name:\"sl\",weekdays:\"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota\".split(\"_\"),months:\"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december\".split(\"_\"),weekStart:1,weekdaysShort:\"ned._pon._tor._sre._et._pet._sob.\".split(\"_\"),monthsShort:\"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.\".split(\"_\"),weekdaysMin:\"ne_po_to_sr_e_pe_so\".split(\"_\"),ordinal:function(e){return e+\".\"},formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D. MMMM YYYY\",LLL:\"D. MMMM YYYY H:mm\",LLLL:\"dddd, D. MMMM YYYY H:mm\"},relativeTime:{future:\"ez %s\",past:\"pred %s\",s:\"nekaj sekund\",m:\"minuta\",mm:\"%d minut\",h:\"ura\",hh:\"%d ur\",d:\"dan\",dd:\"%d dni\",M:\"mesec\",MM:\"%d mesecev\",y:\"leto\",yy:\"%d let\"}};return _.default.locale(n,null,!0),n}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_sv=t(e.dayjs)}(this,(function(e){\"use strict\";function t(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var a=t(e),d={name:\"sv\",weekdays:\"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag\".split(\"_\"),weekdaysShort:\"sn_mn_tis_ons_tor_fre_lr\".split(\"_\"),weekdaysMin:\"s_m_ti_on_to_fr_l\".split(\"_\"),months:\"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december\".split(\"_\"),monthsShort:\"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec\".split(\"_\"),weekStart:1,yearStart:4,ordinal:function(e){var t=e%10;return\"[\"+e+(1===t||2===t?\"a\":\"e\")+\"]\"},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY-MM-DD\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY [kl.] HH:mm\",LLLL:\"dddd D MMMM YYYY [kl.] HH:mm\",lll:\"D MMM YYYY HH:mm\",llll:\"ddd D MMM YYYY HH:mm\"},relativeTime:{future:\"om %s\",past:\"fr %s sedan\",s:\"ngra sekunder\",m:\"en minut\",mm:\"%d minuter\",h:\"en timme\",hh:\"%d timmar\",d:\"en dag\",dd:\"%d dagar\",M:\"en mnad\",MM:\"%d mnader\",y:\"ett r\",yy:\"%d r\"}};return a.default.locale(d,null,!0),d}));","!function(_,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],e):(_=\"undefined\"!=typeof globalThis?globalThis:_||self).dayjs_locale_th=e(_.dayjs)}(this,(function(_){\"use strict\";function e(_){return _&&\"object\"==typeof _&&\"default\"in _?_:{default:_}}var t=e(_),d={name:\"th\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"._._._._._._.\".split(\"_\"),months:\"___________\".split(\"_\"),monthsShort:\".._.._.._.._.._.._.._.._.._.._.._..\".split(\"_\"),formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY  H:mm\",LLLL:\"dddd D MMMM YYYY  H:mm\"},relativeTime:{future:\" %s\",past:\"%s\",s:\"\",m:\"1 \",mm:\"%d \",h:\"1 \",hh:\"%d \",d:\"1 \",dd:\"%d \",M:\"1 \",MM:\"%d \",y:\"1 \",yy:\"%d \"},ordinal:function(_){return _+\".\"}};return t.default.locale(d,null,!0),d}));","!function(a,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],e):(a=\"undefined\"!=typeof globalThis?globalThis:a||self).dayjs_locale_tr=e(a.dayjs)}(this,(function(a){\"use strict\";function e(a){return a&&\"object\"==typeof a&&\"default\"in a?a:{default:a}}var t=e(a),_={name:\"tr\",weekdays:\"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi\".split(\"_\"),weekdaysShort:\"Paz_Pts_Sal_ar_Per_Cum_Cts\".split(\"_\"),weekdaysMin:\"Pz_Pt_Sa_a_Pe_Cu_Ct\".split(\"_\"),months:\"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk\".split(\"_\"),monthsShort:\"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara\".split(\"_\"),weekStart:1,formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},relativeTime:{future:\"%s sonra\",past:\"%s nce\",s:\"birka saniye\",m:\"bir dakika\",mm:\"%d dakika\",h:\"bir saat\",hh:\"%d saat\",d:\"bir gn\",dd:\"%d gn\",M:\"bir ay\",MM:\"%d ay\",y:\"bir yl\",yy:\"%d yl\"},ordinal:function(a){return a+\".\"}};return t.default.locale(_,null,!0),_}));","!function(_,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],e):(_=\"undefined\"!=typeof globalThis?globalThis:_||self).dayjs_locale_uk=e(_.dayjs)}(this,(function(_){\"use strict\";function e(_){return _&&\"object\"==typeof _&&\"default\"in _?_:{default:_}}var t=e(_),s=\"___________\".split(\"_\"),n=\"___________\".split(\"_\"),o=/D[oD]?(\\[[^[\\]]*\\]|\\s)+MMMM?/;function d(_,e,t){var s,n;return\"m\"===t?e?\"\":\"\":\"h\"===t?e?\"\":\"\":_+\" \"+(s=+_,n={ss:e?\"__\":\"__\",mm:e?\"__\":\"__\",hh:e?\"__\":\"__\",dd:\"__\",MM:\"__\",yy:\"__\"}[t].split(\"_\"),s%10==1&&s%100!=11?n[0]:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?n[1]:n[2])}var i=function(_,e){return o.test(e)?s[_.month()]:n[_.month()]};i.s=n,i.f=s;var r={name:\"uk\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:i,monthsShort:\"___________\".split(\"_\"),weekStart:1,relativeTime:{future:\" %s\",past:\"%s \",s:\" \",m:d,mm:d,h:d,hh:d,d:\"\",dd:d,M:\"\",MM:d,y:\"\",yy:d},ordinal:function(_){return _},formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY .\",LLL:\"D MMMM YYYY ., HH:mm\",LLLL:\"dddd, D MMMM YYYY ., HH:mm\"}};return t.default.locale(r,null,!0),r}));","!function(e,_){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=_(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],_):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_zh=_(e.dayjs)}(this,(function(e){\"use strict\";function _(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=_(e),d={name:\"zh\",weekdays:\"______\".split(\"_\"),weekdaysShort:\"______\".split(\"_\"),weekdaysMin:\"______\".split(\"_\"),months:\"___________\".split(\"_\"),monthsShort:\"1_2_3_4_5_6_7_8_9_10_11_12\".split(\"_\"),ordinal:function(e,_){return\"W\"===_?e+\"\":e+\"\"},weekStart:1,yearStart:4,formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY/MM/DD\",LL:\"YYYYMD\",LLL:\"YYYYMDAhmm\",LLLL:\"YYYYMDddddAhmm\",l:\"YYYY/M/D\",ll:\"YYYYMD\",lll:\"YYYYMD HH:mm\",llll:\"YYYYMDdddd HH:mm\"},relativeTime:{future:\"%s\",past:\"%s\",s:\"\",m:\"1 \",mm:\"%d \",h:\"1 \",hh:\"%d \",d:\"1 \",dd:\"%d \",M:\"1 \",MM:\"%d \",y:\"1 \",yy:\"%d \"},meridiem:function(e,_){var t=100*e+_;return t<600?\"\":t<900?\"\":t<1100?\"\":t<1300?\"\":t<1800?\"\":\"\"}};return t.default.locale(d,null,!0),d}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_customParseFormat=t()}(this,(function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},t=/(\\[[^[]*\\])|([-_:/.,()\\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\\d\\d/,r=/\\d\\d?/,i=/\\d*[^-_:/,()\\s\\d]+/,o={},s=function(e){return(e=+e)+(e>68?1900:2e3)};var a=function(e){return function(t){this[e]=+t}},f=[/[+-]\\d\\d:?(\\d\\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if(\"Z\"===e)return 0;var t=e.match(/([+-]|\\d\\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:\"+\"===t[0]?-n:n}(e)}],h=function(e){var t=o[e];return t&&(t.indexOf?t:t.s.concat(t.f))},u=function(e,t){var n,r=o.meridiem;if(r){for(var i=1;i<=24;i+=1)if(e.indexOf(r(i,0,t))>-1){n=i>12;break}}else n=e===(t?\"pm\":\"PM\");return n},d={A:[i,function(e){this.afternoon=u(e,!1)}],a:[i,function(e){this.afternoon=u(e,!0)}],S:[/\\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\\d{3}/,function(e){this.milliseconds=+e}],s:[r,a(\"seconds\")],ss:[r,a(\"seconds\")],m:[r,a(\"minutes\")],mm:[r,a(\"minutes\")],H:[r,a(\"hours\")],h:[r,a(\"hours\")],HH:[r,a(\"hours\")],hh:[r,a(\"hours\")],D:[r,a(\"day\")],DD:[n,a(\"day\")],Do:[i,function(e){var t=o.ordinal,n=e.match(/\\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\\[|\\]/g,\"\")===e&&(this.day=r)}],M:[r,a(\"month\")],MM:[n,a(\"month\")],MMM:[i,function(e){var t=h(\"months\"),n=(h(\"monthsShort\")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[i,function(e){var t=h(\"months\").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\\d+/,a(\"year\")],YY:[n,function(e){this.year=s(e)}],YYYY:[/\\d{4}/,a(\"year\")],Z:f,ZZ:f};function c(n){var r,i;r=n,i=o&&o.formats;for(var s=(n=r.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var o=r&&r.toUpperCase();return n||i[r]||e[r]||i[o].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),a=s.length,f=0;f<a;f+=1){var h=s[f],u=d[h],c=u&&u[0],l=u&&u[1];s[f]=l?{regex:c,parser:l}:h.replace(/^\\[|\\]$/g,\"\")}return function(e){for(var t={},n=0,r=0;n<a;n+=1){var i=s[n];if(\"string\"==typeof i)r+=i.length;else{var o=i.regex,f=i.parser,h=e.slice(r),u=o.exec(h)[0];f.call(t,u),e=e.replace(u,\"\")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(s=e.parseTwoDigitYear);var r=t.prototype,i=r.parse;r.parse=function(e){var t=e.date,r=e.utc,s=e.args;this.$u=r;var a=s[1];if(\"string\"==typeof a){var f=!0===s[2],h=!0===s[3],u=f||h,d=s[2];h&&(d=s[2]),o=this.$locale(),!f&&d&&(o=n.Ls[d]),this.$d=function(e,t,n){try{if([\"x\",\"X\"].indexOf(t)>-1)return new Date((\"X\"===t?1e3:1)*e);var r=c(t)(e),i=r.year,o=r.month,s=r.day,a=r.hours,f=r.minutes,h=r.seconds,u=r.milliseconds,d=r.zone,l=new Date,m=s||(i||o?1:l.getDate()),M=i||l.getFullYear(),Y=0;i&&!o||(Y=o>0?o-1:l.getMonth());var p=a||0,v=f||0,D=h||0,g=u||0;return d?new Date(Date.UTC(M,Y,m,p,v,D,g+60*d.offset*1e3)):n?new Date(Date.UTC(M,Y,m,p,v,D,g)):new Date(M,Y,m,p,v,D,g)}catch(e){return new Date(\"\")}}(t,a,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),u&&t!=this.format(a)&&(this.$d=new Date(\"\")),o={}}else if(a instanceof Array)for(var l=a.length,m=1;m<=l;m+=1){s[1]=a[m-1];var M=n.apply(this,s);if(M.isValid()){this.$d=M.$d,this.$L=M.$L,this.init();break}m===l&&(this.$d=new Date(\"\"))}else i.call(this,e)}}}));","!function(n,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(n=\"undefined\"!=typeof globalThis?globalThis:n||self).dayjs_plugin_localeData=e()}(this,(function(){\"use strict\";return function(n,e,t){var r=e.prototype,o=function(n){return n&&(n.indexOf?n:n.s)},u=function(n,e,t,r,u){var i=n.name?n:n.$locale(),a=o(i[e]),s=o(i[t]),f=a||s.map((function(n){return n.slice(0,r)}));if(!u)return f;var d=i.weekStart;return f.map((function(n,e){return f[(e+(d||0))%7]}))},i=function(){return t.Ls[t.locale()]},a=function(n,e){return n.formats[e]||function(n){return n.replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(n,e,t){return e||t.slice(1)}))}(n.formats[e.toUpperCase()])},s=function(){var n=this;return{months:function(e){return e?e.format(\"MMMM\"):u(n,\"months\")},monthsShort:function(e){return e?e.format(\"MMM\"):u(n,\"monthsShort\",\"months\",3)},firstDayOfWeek:function(){return n.$locale().weekStart||0},weekdays:function(e){return e?e.format(\"dddd\"):u(n,\"weekdays\")},weekdaysMin:function(e){return e?e.format(\"dd\"):u(n,\"weekdaysMin\",\"weekdays\",2)},weekdaysShort:function(e){return e?e.format(\"ddd\"):u(n,\"weekdaysShort\",\"weekdays\",3)},longDateFormat:function(e){return a(n.$locale(),e)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return s.bind(this)()},t.localeData=function(){var n=i();return{firstDayOfWeek:function(){return n.weekStart||0},weekdays:function(){return t.weekdays()},weekdaysShort:function(){return t.weekdaysShort()},weekdaysMin:function(){return t.weekdaysMin()},months:function(){return t.months()},monthsShort:function(){return t.monthsShort()},longDateFormat:function(e){return a(n,e)},meridiem:n.meridiem,ordinal:n.ordinal}},t.months=function(){return u(i(),\"months\")},t.monthsShort=function(){return u(i(),\"monthsShort\",\"months\",3)},t.weekdays=function(n){return u(i(),\"weekdays\",null,null,n)},t.weekdaysShort=function(n){return u(i(),\"weekdaysShort\",\"weekdays\",3,n)},t.weekdaysMin=function(n){return u(i(),\"weekdaysMin\",\"weekdays\",2,n)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_localizedFormat=t()}(this,(function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"};return function(t,o,n){var r=o.prototype,i=r.format;n.en.formats=e,r.format=function(t){void 0===t&&(t=\"YYYY-MM-DDTHH:mm:ssZ\");var o=this.$locale().formats,n=function(t,o){return t.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||o[r]||e[r]||o[i].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,o){return t||o.slice(1)}))}))}(t,void 0===o?{}:o);return i.call(this,n)}}}));","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_utc=i()}(this,(function(){\"use strict\";var t=\"minute\",i=/[+-]\\d\\d(?::?\\d\\d)?/g,e=/([+-]|\\d\\d)/g;return function(s,f,n){var u=f.prototype;n.utc=function(t){var i={date:t,utc:!0,args:arguments};return new f(i)},u.utc=function(i){var e=n(this.toDate(),{locale:this.$L,utc:!0});return i?e.add(this.utcOffset(),t):e},u.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var o=u.parse;u.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var r=u.init;u.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else r.call(this)};var a=u.utcOffset;u.utcOffset=function(s,f){var n=this.$utils().u;if(n(s))return this.$u?0:n(this.$offset)?a.call(this):this.$offset;if(\"string\"==typeof s&&(s=function(t){void 0===t&&(t=\"\");var s=t.match(i);if(!s)return null;var f=(\"\"+s[0]).match(e)||[\"-\",0,0],n=f[0],u=60*+f[1]+ +f[2];return 0===u?0:\"+\"===n?u:-u}(s),null===s))return this;var u=Math.abs(s)<=16?60*s:s,o=this;if(f)return o.$offset=u,o.$u=0===s,o;if(0!==s){var r=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(u+r,t)).$offset=u,o.$x.$localOffset=r}else o=this.utc();return o};var h=u.format;u.format=function(t){var i=t||(this.$u?\"YYYY-MM-DDTHH:mm:ss[Z]\":\"\");return h.call(this,i)},u.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var l=u.toDate;u.toDate=function(t){return\"s\"===t&&this.$offset?n(this.format(\"YYYY-MM-DD HH:mm:ss:SSS\")).toDate():l.call(this)};var c=u.diff;u.diff=function(t,i,e){if(t&&this.$u===t.$u)return c.call(this,t,i,e);var s=this.local(),f=n(t).local();return c.call(s,f,i,e)}}}));","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/*\n *\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\n *\n * Copyright (c) 2012, Matias Meno\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n */\n// The Emitter class provides the ability to call `.on()` on Dropzone to listen\n// to events.\n// It is strongly based on component's emitter class, and I removed the\n// functionality because of the dependency hell with different frameworks.\nvar Emitter = /*#__PURE__*/function () {\n  function Emitter() {\n    _classCallCheck(this, Emitter);\n  }\n\n  _createClass(Emitter, [{\n    key: \"on\",\n    // Add an event listener for given event\n    value: function on(event, fn) {\n      this._callbacks = this._callbacks || {}; // Create namespace for this event\n\n      if (!this._callbacks[event]) {\n        this._callbacks[event] = [];\n      }\n\n      this._callbacks[event].push(fn);\n\n      return this;\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      this._callbacks = this._callbacks || {};\n      var callbacks = this._callbacks[event];\n\n      if (callbacks) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var _iterator = _createForOfIteratorHelper(callbacks),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var callback = _step.value;\n            callback.apply(this, args);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      return this;\n    } // Remove event listener for given event. If fn is not provided, all event\n    // listeners for that event will be removed. If neither is provided, all\n    // event listeners will be removed.\n\n  }, {\n    key: \"off\",\n    value: function off(event, fn) {\n      if (!this._callbacks || arguments.length === 0) {\n        this._callbacks = {};\n        return this;\n      } // specific event\n\n\n      var callbacks = this._callbacks[event];\n\n      if (!callbacks) {\n        return this;\n      } // remove all handlers\n\n\n      if (arguments.length === 1) {\n        delete this._callbacks[event];\n        return this;\n      } // remove specific handler\n\n\n      for (var i = 0; i < callbacks.length; i++) {\n        var callback = callbacks[i];\n\n        if (callback === fn) {\n          callbacks.splice(i, 1);\n          break;\n        }\n      }\n\n      return this;\n    }\n  }]);\n\n  return Emitter;\n}();\n\nvar Dropzone = /*#__PURE__*/function (_Emitter) {\n  _inherits(Dropzone, _Emitter);\n\n  var _super = _createSuper(Dropzone);\n\n  _createClass(Dropzone, null, [{\n    key: \"initClass\",\n    value: function initClass() {\n      // Exposing the emitter class, mainly for tests\n      this.prototype.Emitter = Emitter;\n      /*\n       This is a list of all available events you can register on a dropzone object.\n        You can register an event handler like this:\n        dropzone.on(\"dragEnter\", function() { });\n        */\n\n      this.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"addedfiles\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\n      this.prototype.defaultOptions = {\n        /**\n         * Has to be specified on elements other than form (or when the form\n         * doesn't have an `action` attribute). You can also\n         * provide a function that will be called with `files` and\n         * must return the url (since `v3.12.0`)\n         */\n        url: null,\n\n        /**\n         * Can be changed to `\"put\"` if necessary. You can also provide a function\n         * that will be called with `files` and must return the method (since `v3.12.0`).\n         */\n        method: \"post\",\n\n        /**\n         * Will be set on the XHRequest.\n         */\n        withCredentials: false,\n\n        /**\n         * The timeout for the XHR requests in milliseconds (since `v4.4.0`).\n         */\n        timeout: 30000,\n\n        /**\n         * How many file uploads to process in parallel (See the\n         * Enqueuing file uploads documentation section for more info)\n         */\n        parallelUploads: 2,\n\n        /**\n         * Whether to send multiple files in one request. If\n         * this it set to true, then the fallback file input element will\n         * have the `multiple` attribute as well. This option will\n         * also trigger additional events (like `processingmultiple`). See the events\n         * documentation section for more information.\n         */\n        uploadMultiple: false,\n\n        /**\n         * Whether you want files to be uploaded in chunks to your server. This can't be\n         * used in combination with `uploadMultiple`.\n         *\n         * See [chunksUploaded](#config-chunksUploaded) for the callback to finalise an upload.\n         */\n        chunking: false,\n\n        /**\n         * If `chunking` is enabled, this defines whether **every** file should be chunked,\n         * even if the file size is below chunkSize. This means, that the additional chunk\n         * form data will be submitted and the `chunksUploaded` callback will be invoked.\n         */\n        forceChunking: false,\n\n        /**\n         * If `chunking` is `true`, then this defines the chunk size in bytes.\n         */\n        chunkSize: 2000000,\n\n        /**\n         * If `true`, the individual chunks of a file are being uploaded simultaneously.\n         */\n        parallelChunkUploads: false,\n\n        /**\n         * Whether a chunk should be retried if it fails.\n         */\n        retryChunks: false,\n\n        /**\n         * If `retryChunks` is true, how many times should it be retried.\n         */\n        retryChunksLimit: 3,\n\n        /**\n         * If not `null` defines how many files this Dropzone handles. If it exceeds,\n         * the event `maxfilesexceeded` will be called. The dropzone element gets the\n         * class `dz-max-files-reached` accordingly so you can provide visual feedback.\n         */\n        maxFilesize: 256,\n\n        /**\n         * The name of the file param that gets transferred.\n         * **NOTE**: If you have the option  `uploadMultiple` set to `true`, then\n         * Dropzone will append `[]` to the name.\n         */\n        paramName: \"file\",\n\n        /**\n         * Whether thumbnails for images should be generated\n         */\n        createImageThumbnails: true,\n\n        /**\n         * In MB. When the filename exceeds this limit, the thumbnail will not be generated.\n         */\n        maxThumbnailFilesize: 10,\n\n        /**\n         * If `null`, the ratio of the image will be used to calculate it.\n         */\n        thumbnailWidth: 120,\n\n        /**\n         * The same as `thumbnailWidth`. If both are null, images will not be resized.\n         */\n        thumbnailHeight: 120,\n\n        /**\n         * How the images should be scaled down in case both, `thumbnailWidth` and `thumbnailHeight` are provided.\n         * Can be either `contain` or `crop`.\n         */\n        thumbnailMethod: 'crop',\n\n        /**\n         * If set, images will be resized to these dimensions before being **uploaded**.\n         * If only one, `resizeWidth` **or** `resizeHeight` is provided, the original aspect\n         * ratio of the file will be preserved.\n         *\n         * The `options.transformFile` function uses these options, so if the `transformFile` function\n         * is overridden, these options don't do anything.\n         */\n        resizeWidth: null,\n\n        /**\n         * See `resizeWidth`.\n         */\n        resizeHeight: null,\n\n        /**\n         * The mime type of the resized image (before it gets uploaded to the server).\n         * If `null` the original mime type will be used. To force jpeg, for example, use `image/jpeg`.\n         * See `resizeWidth` for more information.\n         */\n        resizeMimeType: null,\n\n        /**\n         * The quality of the resized images. See `resizeWidth`.\n         */\n        resizeQuality: 0.8,\n\n        /**\n         * How the images should be scaled down in case both, `resizeWidth` and `resizeHeight` are provided.\n         * Can be either `contain` or `crop`.\n         */\n        resizeMethod: 'contain',\n\n        /**\n         * The base that is used to calculate the filesize. You can change this to\n         * 1024 if you would rather display kibibytes, mebibytes, etc...\n         * 1024 is technically incorrect, because `1024 bytes` are `1 kibibyte` not `1 kilobyte`.\n         * You can change this to `1024` if you don't care about validity.\n         */\n        filesizeBase: 1000,\n\n        /**\n         * Can be used to limit the maximum number of files that will be handled by this Dropzone\n         */\n        maxFiles: null,\n\n        /**\n         * An optional object to send additional headers to the server. Eg:\n         * `{ \"My-Awesome-Header\": \"header value\" }`\n         */\n        headers: null,\n\n        /**\n         * If `true`, the dropzone element itself will be clickable, if `false`\n         * nothing will be clickable.\n         *\n         * You can also pass an HTML element, a CSS selector (for multiple elements)\n         * or an array of those. In that case, all of those elements will trigger an\n         * upload when clicked.\n         */\n        clickable: true,\n\n        /**\n         * Whether hidden files in directories should be ignored.\n         */\n        ignoreHiddenFiles: true,\n\n        /**\n         * The default implementation of `accept` checks the file's mime type or\n         * extension against this list. This is a comma separated list of mime\n         * types or file extensions.\n         *\n         * Eg.: `image/*,application/pdf,.psd`\n         *\n         * If the Dropzone is `clickable` this option will also be used as\n         * [`accept`](https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept)\n         * parameter on the hidden file input as well.\n         */\n        acceptedFiles: null,\n\n        /**\n         * **Deprecated!**\n         * Use acceptedFiles instead.\n         */\n        acceptedMimeTypes: null,\n\n        /**\n         * If false, files will be added to the queue but the queue will not be\n         * processed automatically.\n         * This can be useful if you need some additional user input before sending\n         * files (or if you want want all files sent at once).\n         * If you're ready to send the file simply call `myDropzone.processQueue()`.\n         *\n         * See the [enqueuing file uploads](#enqueuing-file-uploads) documentation\n         * section for more information.\n         */\n        autoProcessQueue: true,\n\n        /**\n         * If false, files added to the dropzone will not be queued by default.\n         * You'll have to call `enqueueFile(file)` manually.\n         */\n        autoQueue: true,\n\n        /**\n         * If `true`, this will add a link to every file preview to remove or cancel (if\n         * already uploading) the file. The `dictCancelUpload`, `dictCancelUploadConfirmation`\n         * and `dictRemoveFile` options are used for the wording.\n         */\n        addRemoveLinks: false,\n\n        /**\n         * Defines where to display the file previews  if `null` the\n         * Dropzone element itself is used. Can be a plain `HTMLElement` or a CSS\n         * selector. The element should have the `dropzone-previews` class so\n         * the previews are displayed properly.\n         */\n        previewsContainer: null,\n\n        /**\n         * This is the element the hidden input field (which is used when clicking on the\n         * dropzone to trigger file selection) will be appended to. This might\n         * be important in case you use frameworks to switch the content of your page.\n         *\n         * Can be a selector string, or an element directly.\n         */\n        hiddenInputContainer: \"body\",\n\n        /**\n         * If null, no capture type will be specified\n         * If camera, mobile devices will skip the file selection and choose camera\n         * If microphone, mobile devices will skip the file selection and choose the microphone\n         * If camcorder, mobile devices will skip the file selection and choose the camera in video mode\n         * On apple devices multiple must be set to false.  AcceptedFiles may need to\n         * be set to an appropriate mime type (e.g. \"image/*\", \"audio/*\", or \"video/*\").\n         */\n        capture: null,\n\n        /**\n         * **Deprecated**. Use `renameFile` instead.\n         */\n        renameFilename: null,\n\n        /**\n         * A function that is invoked before the file is uploaded to the server and renames the file.\n         * This function gets the `File` as argument and can use the `file.name`. The actual name of the\n         * file that gets used during the upload can be accessed through `file.upload.filename`.\n         */\n        renameFile: null,\n\n        /**\n         * If `true` the fallback will be forced. This is very useful to test your server\n         * implementations first and make sure that everything works as\n         * expected without dropzone if you experience problems, and to test\n         * how your fallbacks will look.\n         */\n        forceFallback: false,\n\n        /**\n         * The text used before any files are dropped.\n         */\n        dictDefaultMessage: \"Drop files here to upload\",\n\n        /**\n         * The text that replaces the default message text it the browser is not supported.\n         */\n        dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\n\n        /**\n         * The text that will be added before the fallback form.\n         * If you provide a  fallback element yourself, or if this option is `null` this will\n         * be ignored.\n         */\n        dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\n\n        /**\n         * If the filesize is too big.\n         * `{{filesize}}` and `{{maxFilesize}}` will be replaced with the respective configuration values.\n         */\n        dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\n\n        /**\n         * If the file doesn't match the file type.\n         */\n        dictInvalidFileType: \"You can't upload files of this type.\",\n\n        /**\n         * If the server response was invalid.\n         * `{{statusCode}}` will be replaced with the servers status code.\n         */\n        dictResponseError: \"Server responded with {{statusCode}} code.\",\n\n        /**\n         * If `addRemoveLinks` is true, the text to be used for the cancel upload link.\n         */\n        dictCancelUpload: \"Cancel upload\",\n\n        /**\n         * The text that is displayed if an upload was manually canceled\n         */\n        dictUploadCanceled: \"Upload canceled.\",\n\n        /**\n         * If `addRemoveLinks` is true, the text to be used for confirmation when cancelling upload.\n         */\n        dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\n\n        /**\n         * If `addRemoveLinks` is true, the text to be used to remove a file.\n         */\n        dictRemoveFile: \"Remove file\",\n\n        /**\n         * If this is not null, then the user will be prompted before removing a file.\n         */\n        dictRemoveFileConfirmation: null,\n\n        /**\n         * Displayed if `maxFiles` is st and exceeded.\n         * The string `{{maxFiles}}` will be replaced by the configuration value.\n         */\n        dictMaxFilesExceeded: \"You can not upload any more files.\",\n\n        /**\n         * Allows you to translate the different units. Starting with `tb` for terabytes and going down to\n         * `b` for bytes.\n         */\n        dictFileSizeUnits: {\n          tb: \"TB\",\n          gb: \"GB\",\n          mb: \"MB\",\n          kb: \"KB\",\n          b: \"b\"\n        },\n\n        /**\n         * Called when dropzone initialized\n         * You can add event listeners here\n         */\n        init: function init() {},\n\n        /**\n         * Can be an **object** of additional parameters to transfer to the server, **or** a `Function`\n         * that gets invoked with the `files`, `xhr` and, if it's a chunked upload, `chunk` arguments. In case\n         * of a function, this needs to return a map.\n         *\n         * The default implementation does nothing for normal uploads, but adds relevant information for\n         * chunked uploads.\n         *\n         * This is the same as adding hidden input fields in the form element.\n         */\n        params: function params(files, xhr, chunk) {\n          if (chunk) {\n            return {\n              dzuuid: chunk.file.upload.uuid,\n              dzchunkindex: chunk.index,\n              dztotalfilesize: chunk.file.size,\n              dzchunksize: this.options.chunkSize,\n              dztotalchunkcount: chunk.file.upload.totalChunkCount,\n              dzchunkbyteoffset: chunk.index * this.options.chunkSize\n            };\n          }\n        },\n\n        /**\n         * A function that gets a [file](https://developer.mozilla.org/en-US/docs/DOM/File)\n         * and a `done` function as parameters.\n         *\n         * If the done function is invoked without arguments, the file is \"accepted\" and will\n         * be processed. If you pass an error message, the file is rejected, and the error\n         * message will be displayed.\n         * This function will not be called if the file is too big or doesn't match the mime types.\n         */\n        accept: function accept(file, done) {\n          return done();\n        },\n\n        /**\n         * The callback that will be invoked when all chunks have been uploaded for a file.\n         * It gets the file for which the chunks have been uploaded as the first parameter,\n         * and the `done` function as second. `done()` needs to be invoked when everything\n         * needed to finish the upload process is done.\n         */\n        chunksUploaded: function chunksUploaded(file, done) {\n          done();\n        },\n\n        /**\n         * Gets called when the browser is not supported.\n         * The default implementation shows the fallback input field and adds\n         * a text.\n         */\n        fallback: function fallback() {\n          // This code should pass in IE7... :(\n          var messageElement;\n          this.element.className = \"\".concat(this.element.className, \" dz-browser-not-supported\");\n\n          var _iterator2 = _createForOfIteratorHelper(this.element.getElementsByTagName(\"div\")),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var child = _step2.value;\n\n              if (/(^| )dz-message($| )/.test(child.className)) {\n                messageElement = child;\n                child.className = \"dz-message\"; // Removes the 'dz-default' class\n\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          if (!messageElement) {\n            messageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\n            this.element.appendChild(messageElement);\n          }\n\n          var span = messageElement.getElementsByTagName(\"span\")[0];\n\n          if (span) {\n            if (span.textContent != null) {\n              span.textContent = this.options.dictFallbackMessage;\n            } else if (span.innerText != null) {\n              span.innerText = this.options.dictFallbackMessage;\n            }\n          }\n\n          return this.element.appendChild(this.getFallbackForm());\n        },\n\n        /**\n         * Gets called to calculate the thumbnail dimensions.\n         *\n         * It gets `file`, `width` and `height` (both may be `null`) as parameters and must return an object containing:\n         *\n         *  - `srcWidth` & `srcHeight` (required)\n         *  - `trgWidth` & `trgHeight` (required)\n         *  - `srcX` & `srcY` (optional, default `0`)\n         *  - `trgX` & `trgY` (optional, default `0`)\n         *\n         * Those values are going to be used by `ctx.drawImage()`.\n         */\n        resize: function resize(file, width, height, resizeMethod) {\n          var info = {\n            srcX: 0,\n            srcY: 0,\n            srcWidth: file.width,\n            srcHeight: file.height\n          };\n          var srcRatio = file.width / file.height; // Automatically calculate dimensions if not specified\n\n          if (width == null && height == null) {\n            width = info.srcWidth;\n            height = info.srcHeight;\n          } else if (width == null) {\n            width = height * srcRatio;\n          } else if (height == null) {\n            height = width / srcRatio;\n          } // Make sure images aren't upscaled\n\n\n          width = Math.min(width, info.srcWidth);\n          height = Math.min(height, info.srcHeight);\n          var trgRatio = width / height;\n\n          if (info.srcWidth > width || info.srcHeight > height) {\n            // Image is bigger and needs rescaling\n            if (resizeMethod === 'crop') {\n              if (srcRatio > trgRatio) {\n                info.srcHeight = file.height;\n                info.srcWidth = info.srcHeight * trgRatio;\n              } else {\n                info.srcWidth = file.width;\n                info.srcHeight = info.srcWidth / trgRatio;\n              }\n            } else if (resizeMethod === 'contain') {\n              // Method 'contain'\n              if (srcRatio > trgRatio) {\n                height = width / srcRatio;\n              } else {\n                width = height * srcRatio;\n              }\n            } else {\n              throw new Error(\"Unknown resizeMethod '\".concat(resizeMethod, \"'\"));\n            }\n          }\n\n          info.srcX = (file.width - info.srcWidth) / 2;\n          info.srcY = (file.height - info.srcHeight) / 2;\n          info.trgWidth = width;\n          info.trgHeight = height;\n          return info;\n        },\n\n        /**\n         * Can be used to transform the file (for example, resize an image if necessary).\n         *\n         * The default implementation uses `resizeWidth` and `resizeHeight` (if provided) and resizes\n         * images according to those dimensions.\n         *\n         * Gets the `file` as the first parameter, and a `done()` function as the second, that needs\n         * to be invoked with the file when the transformation is done.\n         */\n        transformFile: function transformFile(file, done) {\n          if ((this.options.resizeWidth || this.options.resizeHeight) && file.type.match(/image.*/)) {\n            return this.resizeImage(file, this.options.resizeWidth, this.options.resizeHeight, this.options.resizeMethod, done);\n          } else {\n            return done(file);\n          }\n        },\n\n        /**\n         * A string that contains the template used for each dropped\n         * file. Change it to fulfill your needs but make sure to properly\n         * provide all elements.\n         *\n         * If you want to use an actual HTML element instead of providing a String\n         * as a config option, you could create a div with the id `tpl`,\n         * put the template inside it and provide the element like this:\n         *\n         *     document\n         *       .querySelector('#tpl')\n         *       .innerHTML\n         *\n         */\n        previewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n      <title>Check</title>\\n      <g stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n      <title>Error</title>\\n      <g stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <g stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\",\n        // END OPTIONS\n        // (Required by the dropzone documentation parser)\n\n        /*\n         Those functions register themselves to the events on init and handle all\n         the user interface specific stuff. Overwriting them won't break the upload\n         but can break the way it's displayed.\n         You can overwrite them if you don't like the default behavior. If you just\n         want to add an additional event handler, register it on the dropzone object\n         and don't overwrite those options.\n         */\n        // Those are self explanatory and simply concern the DragnDrop.\n        drop: function drop(e) {\n          return this.element.classList.remove(\"dz-drag-hover\");\n        },\n        dragstart: function dragstart(e) {},\n        dragend: function dragend(e) {\n          return this.element.classList.remove(\"dz-drag-hover\");\n        },\n        dragenter: function dragenter(e) {\n          return this.element.classList.add(\"dz-drag-hover\");\n        },\n        dragover: function dragover(e) {\n          return this.element.classList.add(\"dz-drag-hover\");\n        },\n        dragleave: function dragleave(e) {\n          return this.element.classList.remove(\"dz-drag-hover\");\n        },\n        paste: function paste(e) {},\n        // Called whenever there are no files left in the dropzone anymore, and the\n        // dropzone should be displayed as if in the initial state.\n        reset: function reset() {\n          return this.element.classList.remove(\"dz-started\");\n        },\n        // Called when a file is added to the queue\n        // Receives `file`\n        addedfile: function addedfile(file) {\n          var _this2 = this;\n\n          if (this.element === this.previewsContainer) {\n            this.element.classList.add(\"dz-started\");\n          }\n\n          if (this.previewsContainer) {\n            file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\n            file.previewTemplate = file.previewElement; // Backwards compatibility\n\n            this.previewsContainer.appendChild(file.previewElement);\n\n            var _iterator3 = _createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-name]\")),\n                _step3;\n\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var node = _step3.value;\n                node.textContent = file.name;\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n\n            var _iterator4 = _createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-size]\")),\n                _step4;\n\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                node = _step4.value;\n                node.innerHTML = this.filesize(file.size);\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n\n            if (this.options.addRemoveLinks) {\n              file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\".concat(this.options.dictRemoveFile, \"</a>\"));\n              file.previewElement.appendChild(file._removeLink);\n            }\n\n            var removeFileEvent = function removeFileEvent(e) {\n              e.preventDefault();\n              e.stopPropagation();\n\n              if (file.status === Dropzone.UPLOADING) {\n                return Dropzone.confirm(_this2.options.dictCancelUploadConfirmation, function () {\n                  return _this2.removeFile(file);\n                });\n              } else {\n                if (_this2.options.dictRemoveFileConfirmation) {\n                  return Dropzone.confirm(_this2.options.dictRemoveFileConfirmation, function () {\n                    return _this2.removeFile(file);\n                  });\n                } else {\n                  return _this2.removeFile(file);\n                }\n              }\n            };\n\n            var _iterator5 = _createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-remove]\")),\n                _step5;\n\n            try {\n              for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                var removeLink = _step5.value;\n                removeLink.addEventListener(\"click\", removeFileEvent);\n              }\n            } catch (err) {\n              _iterator5.e(err);\n            } finally {\n              _iterator5.f();\n            }\n          }\n        },\n        // Called whenever a file is removed.\n        removedfile: function removedfile(file) {\n          if (file.previewElement != null && file.previewElement.parentNode != null) {\n            file.previewElement.parentNode.removeChild(file.previewElement);\n          }\n\n          return this._updateMaxFilesReachedClass();\n        },\n        // Called when a thumbnail has been generated\n        // Receives `file` and `dataUrl`\n        thumbnail: function thumbnail(file, dataUrl) {\n          if (file.previewElement) {\n            file.previewElement.classList.remove(\"dz-file-preview\");\n\n            var _iterator6 = _createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\")),\n                _step6;\n\n            try {\n              for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                var thumbnailElement = _step6.value;\n                thumbnailElement.alt = file.name;\n                thumbnailElement.src = dataUrl;\n              }\n            } catch (err) {\n              _iterator6.e(err);\n            } finally {\n              _iterator6.f();\n            }\n\n            return setTimeout(function () {\n              return file.previewElement.classList.add(\"dz-image-preview\");\n            }, 1);\n          }\n        },\n        // Called whenever an error occurs\n        // Receives `file` and `message`\n        error: function error(file, message) {\n          if (file.previewElement) {\n            file.previewElement.classList.add(\"dz-error\");\n\n            if (typeof message !== \"string\" && message.error) {\n              message = message.error;\n            }\n\n            var _iterator7 = _createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-errormessage]\")),\n                _step7;\n\n            try {\n              for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                var node = _step7.value;\n                node.textContent = message;\n              }\n            } catch (err) {\n              _iterator7.e(err);\n            } finally {\n              _iterator7.f();\n            }\n          }\n        },\n        errormultiple: function errormultiple() {},\n        // Called when a file gets processed. Since there is a cue, not all added\n        // files are processed immediately.\n        // Receives `file`\n        processing: function processing(file) {\n          if (file.previewElement) {\n            file.previewElement.classList.add(\"dz-processing\");\n\n            if (file._removeLink) {\n              return file._removeLink.innerHTML = this.options.dictCancelUpload;\n            }\n          }\n        },\n        processingmultiple: function processingmultiple() {},\n        // Called whenever the upload progress gets updated.\n        // Receives `file`, `progress` (percentage 0-100) and `bytesSent`.\n        // To get the total number of bytes of the file, use `file.size`\n        uploadprogress: function uploadprogress(file, progress, bytesSent) {\n          if (file.previewElement) {\n            var _iterator8 = _createForOfIteratorHelper(file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\")),\n                _step8;\n\n            try {\n              for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n                var node = _step8.value;\n                node.nodeName === 'PROGRESS' ? node.value = progress : node.style.width = \"\".concat(progress, \"%\");\n              }\n            } catch (err) {\n              _iterator8.e(err);\n            } finally {\n              _iterator8.f();\n            }\n          }\n        },\n        // Called whenever the total upload progress gets updated.\n        // Called with totalUploadProgress (0-100), totalBytes and totalBytesSent\n        totaluploadprogress: function totaluploadprogress() {},\n        // Called just before the file is sent. Gets the `xhr` object as second\n        // parameter, so you can modify it (for example to add a CSRF token) and a\n        // `formData` object to add additional information.\n        sending: function sending() {},\n        sendingmultiple: function sendingmultiple() {},\n        // When the complete upload is finished and successful\n        // Receives `file`\n        success: function success(file) {\n          if (file.previewElement) {\n            return file.previewElement.classList.add(\"dz-success\");\n          }\n        },\n        successmultiple: function successmultiple() {},\n        // When the upload is canceled.\n        canceled: function canceled(file) {\n          return this.emit(\"error\", file, this.options.dictUploadCanceled);\n        },\n        canceledmultiple: function canceledmultiple() {},\n        // When the upload is finished, either with success or an error.\n        // Receives `file`\n        complete: function complete(file) {\n          if (file._removeLink) {\n            file._removeLink.innerHTML = this.options.dictRemoveFile;\n          }\n\n          if (file.previewElement) {\n            return file.previewElement.classList.add(\"dz-complete\");\n          }\n        },\n        completemultiple: function completemultiple() {},\n        maxfilesexceeded: function maxfilesexceeded() {},\n        maxfilesreached: function maxfilesreached() {},\n        queuecomplete: function queuecomplete() {},\n        addedfiles: function addedfiles() {}\n      };\n      this.prototype._thumbnailQueue = [];\n      this.prototype._processingThumbnail = false;\n    } // global utility\n\n  }, {\n    key: \"extend\",\n    value: function extend(target) {\n      for (var _len2 = arguments.length, objects = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        objects[_key2 - 1] = arguments[_key2];\n      }\n\n      for (var _i = 0, _objects = objects; _i < _objects.length; _i++) {\n        var object = _objects[_i];\n\n        for (var key in object) {\n          var val = object[key];\n          target[key] = val;\n        }\n      }\n\n      return target;\n    }\n  }]);\n\n  function Dropzone(el, options) {\n    var _this;\n\n    _classCallCheck(this, Dropzone);\n\n    _this = _super.call(this);\n    var fallback, left;\n    _this.element = el; // For backwards compatibility since the version was in the prototype previously\n\n    _this.version = Dropzone.version;\n    _this.defaultOptions.previewTemplate = _this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\n    _this.clickableElements = [];\n    _this.listeners = [];\n    _this.files = []; // All files\n\n    if (typeof _this.element === \"string\") {\n      _this.element = document.querySelector(_this.element);\n    } // Not checking if instance of HTMLElement or Element since IE9 is extremely weird.\n\n\n    if (!_this.element || _this.element.nodeType == null) {\n      throw new Error(\"Invalid dropzone element.\");\n    }\n\n    if (_this.element.dropzone) {\n      throw new Error(\"Dropzone already attached.\");\n    } // Now add this dropzone to the instances.\n\n\n    Dropzone.instances.push(_assertThisInitialized(_this)); // Put the dropzone inside the element itself.\n\n    _this.element.dropzone = _assertThisInitialized(_this);\n    var elementOptions = (left = Dropzone.optionsForElement(_this.element)) != null ? left : {};\n    _this.options = Dropzone.extend({}, _this.defaultOptions, elementOptions, options != null ? options : {}); // If the browser failed, just call the fallback and leave\n\n    if (_this.options.forceFallback || !Dropzone.isBrowserSupported()) {\n      return _possibleConstructorReturn(_this, _this.options.fallback.call(_assertThisInitialized(_this)));\n    } // @options.url = @element.getAttribute \"action\" unless @options.url?\n\n\n    if (_this.options.url == null) {\n      _this.options.url = _this.element.getAttribute(\"action\");\n    }\n\n    if (!_this.options.url) {\n      throw new Error(\"No URL provided.\");\n    }\n\n    if (_this.options.acceptedFiles && _this.options.acceptedMimeTypes) {\n      throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\n    }\n\n    if (_this.options.uploadMultiple && _this.options.chunking) {\n      throw new Error('You cannot set both: uploadMultiple and chunking.');\n    } // Backwards compatibility\n\n\n    if (_this.options.acceptedMimeTypes) {\n      _this.options.acceptedFiles = _this.options.acceptedMimeTypes;\n      delete _this.options.acceptedMimeTypes;\n    } // Backwards compatibility\n\n\n    if (_this.options.renameFilename != null) {\n      _this.options.renameFile = function (file) {\n        return _this.options.renameFilename.call(_assertThisInitialized(_this), file.name, file);\n      };\n    }\n\n    if (typeof _this.options.method === 'string') {\n      _this.options.method = _this.options.method.toUpperCase();\n    }\n\n    if ((fallback = _this.getExistingFallback()) && fallback.parentNode) {\n      // Remove the fallback\n      fallback.parentNode.removeChild(fallback);\n    } // Display previews in the previewsContainer element or the Dropzone element unless explicitly set to false\n\n\n    if (_this.options.previewsContainer !== false) {\n      if (_this.options.previewsContainer) {\n        _this.previewsContainer = Dropzone.getElement(_this.options.previewsContainer, \"previewsContainer\");\n      } else {\n        _this.previewsContainer = _this.element;\n      }\n    }\n\n    if (_this.options.clickable) {\n      if (_this.options.clickable === true) {\n        _this.clickableElements = [_this.element];\n      } else {\n        _this.clickableElements = Dropzone.getElements(_this.options.clickable, \"clickable\");\n      }\n    }\n\n    _this.init();\n\n    return _this;\n  } // Returns all files that have been accepted\n\n\n  _createClass(Dropzone, [{\n    key: \"getAcceptedFiles\",\n    value: function getAcceptedFiles() {\n      return this.files.filter(function (file) {\n        return file.accepted;\n      }).map(function (file) {\n        return file;\n      });\n    } // Returns all files that have been rejected\n    // Not sure when that's going to be useful, but added for completeness.\n\n  }, {\n    key: \"getRejectedFiles\",\n    value: function getRejectedFiles() {\n      return this.files.filter(function (file) {\n        return !file.accepted;\n      }).map(function (file) {\n        return file;\n      });\n    }\n  }, {\n    key: \"getFilesWithStatus\",\n    value: function getFilesWithStatus(status) {\n      return this.files.filter(function (file) {\n        return file.status === status;\n      }).map(function (file) {\n        return file;\n      });\n    } // Returns all files that are in the queue\n\n  }, {\n    key: \"getQueuedFiles\",\n    value: function getQueuedFiles() {\n      return this.getFilesWithStatus(Dropzone.QUEUED);\n    }\n  }, {\n    key: \"getUploadingFiles\",\n    value: function getUploadingFiles() {\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\n    }\n  }, {\n    key: \"getAddedFiles\",\n    value: function getAddedFiles() {\n      return this.getFilesWithStatus(Dropzone.ADDED);\n    } // Files that are either queued or uploading\n\n  }, {\n    key: \"getActiveFiles\",\n    value: function getActiveFiles() {\n      return this.files.filter(function (file) {\n        return file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED;\n      }).map(function (file) {\n        return file;\n      });\n    } // The function that gets called when Dropzone is initialized. You\n    // can (and should) setup event listeners inside this function.\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this3 = this;\n\n      // In case it isn't set already\n      if (this.element.tagName === \"form\") {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n      }\n\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><button class=\\\"dz-button\\\" type=\\\"button\\\">\".concat(this.options.dictDefaultMessage, \"</button></div>\")));\n      }\n\n      if (this.clickableElements.length) {\n        var setupHiddenFileInput = function setupHiddenFileInput() {\n          if (_this3.hiddenFileInput) {\n            _this3.hiddenFileInput.parentNode.removeChild(_this3.hiddenFileInput);\n          }\n\n          _this3.hiddenFileInput = document.createElement(\"input\");\n\n          _this3.hiddenFileInput.setAttribute(\"type\", \"file\");\n\n          if (_this3.options.maxFiles === null || _this3.options.maxFiles > 1) {\n            _this3.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n          }\n\n          _this3.hiddenFileInput.className = \"dz-hidden-input\";\n\n          if (_this3.options.acceptedFiles !== null) {\n            _this3.hiddenFileInput.setAttribute(\"accept\", _this3.options.acceptedFiles);\n          }\n\n          if (_this3.options.capture !== null) {\n            _this3.hiddenFileInput.setAttribute(\"capture\", _this3.options.capture);\n          } // Not setting `display=\"none\"` because some browsers don't accept clicks\n          // on elements that aren't displayed.\n\n\n          _this3.hiddenFileInput.style.visibility = \"hidden\";\n          _this3.hiddenFileInput.style.position = \"absolute\";\n          _this3.hiddenFileInput.style.top = \"0\";\n          _this3.hiddenFileInput.style.left = \"0\";\n          _this3.hiddenFileInput.style.height = \"0\";\n          _this3.hiddenFileInput.style.width = \"0\";\n          Dropzone.getElement(_this3.options.hiddenInputContainer, 'hiddenInputContainer').appendChild(_this3.hiddenFileInput);\n          return _this3.hiddenFileInput.addEventListener(\"change\", function () {\n            var files = _this3.hiddenFileInput.files;\n\n            if (files.length) {\n              var _iterator9 = _createForOfIteratorHelper(files),\n                  _step9;\n\n              try {\n                for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n                  var file = _step9.value;\n\n                  _this3.addFile(file);\n                }\n              } catch (err) {\n                _iterator9.e(err);\n              } finally {\n                _iterator9.f();\n              }\n            }\n\n            _this3.emit(\"addedfiles\", files);\n\n            return setupHiddenFileInput();\n          });\n        };\n\n        setupHiddenFileInput();\n      }\n\n      this.URL = window.URL !== null ? window.URL : window.webkitURL; // Setup all event listeners on the Dropzone object itself.\n      // They're not in @setupEventListeners() because they shouldn't be removed\n      // again when the dropzone gets disabled.\n\n      var _iterator10 = _createForOfIteratorHelper(this.events),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var eventName = _step10.value;\n          this.on(eventName, this.options[eventName]);\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n\n      this.on(\"uploadprogress\", function () {\n        return _this3.updateTotalUploadProgress();\n      });\n      this.on(\"removedfile\", function () {\n        return _this3.updateTotalUploadProgress();\n      });\n      this.on(\"canceled\", function (file) {\n        return _this3.emit(\"complete\", file);\n      }); // Emit a `queuecomplete` event if all files finished uploading.\n\n      this.on(\"complete\", function (file) {\n        if (_this3.getAddedFiles().length === 0 && _this3.getUploadingFiles().length === 0 && _this3.getQueuedFiles().length === 0) {\n          // This needs to be deferred so that `queuecomplete` really triggers after `complete`\n          return setTimeout(function () {\n            return _this3.emit(\"queuecomplete\");\n          }, 0);\n        }\n      });\n\n      var containsFiles = function containsFiles(e) {\n        if (e.dataTransfer.types) {\n          // Because e.dataTransfer.types is an Object in\n          // IE, we need to iterate like this instead of\n          // using e.dataTransfer.types.some()\n          for (var i = 0; i < e.dataTransfer.types.length; i++) {\n            if (e.dataTransfer.types[i] === \"Files\") return true;\n          }\n        }\n\n        return false;\n      };\n\n      var noPropagation = function noPropagation(e) {\n        // If there are no files, we don't want to stop\n        // propagation so we don't interfere with other\n        // drag and drop behaviour.\n        if (!containsFiles(e)) return;\n        e.stopPropagation();\n\n        if (e.preventDefault) {\n          return e.preventDefault();\n        } else {\n          return e.returnValue = false;\n        }\n      }; // Create the listeners\n\n\n      this.listeners = [{\n        element: this.element,\n        events: {\n          \"dragstart\": function dragstart(e) {\n            return _this3.emit(\"dragstart\", e);\n          },\n          \"dragenter\": function dragenter(e) {\n            noPropagation(e);\n            return _this3.emit(\"dragenter\", e);\n          },\n          \"dragover\": function dragover(e) {\n            // Makes it possible to drag files from chrome's download bar\n            // http://stackoverflow.com/questions/19526430/drag-and-drop-file-uploads-from-chrome-downloads-bar\n            // Try is required to prevent bug in Internet Explorer 11 (SCRIPT65535 exception)\n            var efct;\n\n            try {\n              efct = e.dataTransfer.effectAllowed;\n            } catch (error) {}\n\n            e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\n            noPropagation(e);\n            return _this3.emit(\"dragover\", e);\n          },\n          \"dragleave\": function dragleave(e) {\n            return _this3.emit(\"dragleave\", e);\n          },\n          \"drop\": function drop(e) {\n            noPropagation(e);\n            return _this3.drop(e);\n          },\n          \"dragend\": function dragend(e) {\n            return _this3.emit(\"dragend\", e);\n          }\n        } // This is disabled right now, because the browsers don't implement it properly.\n        // \"paste\": (e) =>\n        //   noPropagation e\n        //   @paste e\n\n      }];\n      this.clickableElements.forEach(function (clickableElement) {\n        return _this3.listeners.push({\n          element: clickableElement,\n          events: {\n            \"click\": function click(evt) {\n              // Only the actual dropzone or the message element should trigger file selection\n              if (clickableElement !== _this3.element || evt.target === _this3.element || Dropzone.elementInside(evt.target, _this3.element.querySelector(\".dz-message\"))) {\n                _this3.hiddenFileInput.click(); // Forward the click\n\n              }\n\n              return true;\n            }\n          }\n        });\n      });\n      this.enable();\n      return this.options.init.call(this);\n    } // Not fully tested yet\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.disable();\n      this.removeAllFiles(true);\n\n      if (this.hiddenFileInput != null ? this.hiddenFileInput.parentNode : undefined) {\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n      }\n\n      delete this.element.dropzone;\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\n    }\n  }, {\n    key: \"updateTotalUploadProgress\",\n    value: function updateTotalUploadProgress() {\n      var totalUploadProgress;\n      var totalBytesSent = 0;\n      var totalBytes = 0;\n      var activeFiles = this.getActiveFiles();\n\n      if (activeFiles.length) {\n        var _iterator11 = _createForOfIteratorHelper(this.getActiveFiles()),\n            _step11;\n\n        try {\n          for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n            var file = _step11.value;\n            totalBytesSent += file.upload.bytesSent;\n            totalBytes += file.upload.total;\n          }\n        } catch (err) {\n          _iterator11.e(err);\n        } finally {\n          _iterator11.f();\n        }\n\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\n      } else {\n        totalUploadProgress = 100;\n      }\n\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\n    } // @options.paramName can be a function taking one parameter rather than a string.\n    // A parameter name for a file is obtained simply by calling this with an index number.\n\n  }, {\n    key: \"_getParamName\",\n    value: function _getParamName(n) {\n      if (typeof this.options.paramName === \"function\") {\n        return this.options.paramName(n);\n      } else {\n        return \"\".concat(this.options.paramName).concat(this.options.uploadMultiple ? \"[\".concat(n, \"]\") : \"\");\n      }\n    } // If @options.renameFile is a function,\n    // the function will be used to rename the file.name before appending it to the formData\n\n  }, {\n    key: \"_renameFile\",\n    value: function _renameFile(file) {\n      if (typeof this.options.renameFile !== \"function\") {\n        return file.name;\n      }\n\n      return this.options.renameFile(file);\n    } // Returns a form that can be used as fallback if the browser does not support DragnDrop\n    //\n    // If the dropzone is already a form, only the input field and button are returned. Otherwise a complete form element is provided.\n    // This code has to pass in IE7 :(\n\n  }, {\n    key: \"getFallbackForm\",\n    value: function getFallbackForm() {\n      var existingFallback, form;\n\n      if (existingFallback = this.getExistingFallback()) {\n        return existingFallback;\n      }\n\n      var fieldsString = \"<div class=\\\"dz-fallback\\\">\";\n\n      if (this.options.dictFallbackText) {\n        fieldsString += \"<p>\".concat(this.options.dictFallbackText, \"</p>\");\n      }\n\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\".concat(this._getParamName(0), \"\\\" \").concat(this.options.uploadMultiple ? 'multiple=\"multiple\"' : undefined, \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\");\n      var fields = Dropzone.createElement(fieldsString);\n\n      if (this.element.tagName !== \"FORM\") {\n        form = Dropzone.createElement(\"<form action=\\\"\".concat(this.options.url, \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\").concat(this.options.method, \"\\\"></form>\"));\n        form.appendChild(fields);\n      } else {\n        // Make sure that the enctype and method attributes are set properly\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n        this.element.setAttribute(\"method\", this.options.method);\n      }\n\n      return form != null ? form : fields;\n    } // Returns the fallback elements if they exist already\n    //\n    // This code has to pass in IE7 :(\n\n  }, {\n    key: \"getExistingFallback\",\n    value: function getExistingFallback() {\n      var getFallback = function getFallback(elements) {\n        var _iterator12 = _createForOfIteratorHelper(elements),\n            _step12;\n\n        try {\n          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n            var el = _step12.value;\n\n            if (/(^| )fallback($| )/.test(el.className)) {\n              return el;\n            }\n          }\n        } catch (err) {\n          _iterator12.e(err);\n        } finally {\n          _iterator12.f();\n        }\n      };\n\n      for (var _i2 = 0, _arr = [\"div\", \"form\"]; _i2 < _arr.length; _i2++) {\n        var tagName = _arr[_i2];\n        var fallback;\n\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\n          return fallback;\n        }\n      }\n    } // Activates all listeners stored in @listeners\n\n  }, {\n    key: \"setupEventListeners\",\n    value: function setupEventListeners() {\n      return this.listeners.map(function (elementListeners) {\n        return function () {\n          var result = [];\n\n          for (var event in elementListeners.events) {\n            var listener = elementListeners.events[event];\n            result.push(elementListeners.element.addEventListener(event, listener, false));\n          }\n\n          return result;\n        }();\n      });\n    } // Deactivates all listeners stored in @listeners\n\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      return this.listeners.map(function (elementListeners) {\n        return function () {\n          var result = [];\n\n          for (var event in elementListeners.events) {\n            var listener = elementListeners.events[event];\n            result.push(elementListeners.element.removeEventListener(event, listener, false));\n          }\n\n          return result;\n        }();\n      });\n    } // Removes all event listeners and cancels all files in the queue or being processed.\n\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      var _this4 = this;\n\n      this.clickableElements.forEach(function (element) {\n        return element.classList.remove(\"dz-clickable\");\n      });\n      this.removeEventListeners();\n      this.disabled = true;\n      return this.files.map(function (file) {\n        return _this4.cancelUpload(file);\n      });\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      delete this.disabled;\n      this.clickableElements.forEach(function (element) {\n        return element.classList.add(\"dz-clickable\");\n      });\n      return this.setupEventListeners();\n    } // Returns a nicely formatted filesize\n\n  }, {\n    key: \"filesize\",\n    value: function filesize(size) {\n      var selectedSize = 0;\n      var selectedUnit = \"b\";\n\n      if (size > 0) {\n        var units = ['tb', 'gb', 'mb', 'kb', 'b'];\n\n        for (var i = 0; i < units.length; i++) {\n          var unit = units[i];\n          var cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\n\n          if (size >= cutoff) {\n            selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\n            selectedUnit = unit;\n            break;\n          }\n        }\n\n        selectedSize = Math.round(10 * selectedSize) / 10; // Cutting of digits\n      }\n\n      return \"<strong>\".concat(selectedSize, \"</strong> \").concat(this.options.dictFileSizeUnits[selectedUnit]);\n    } // Adds or removes the `dz-max-files-reached` class from the form.\n\n  }, {\n    key: \"_updateMaxFilesReachedClass\",\n    value: function _updateMaxFilesReachedClass() {\n      if (this.options.maxFiles != null && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\n          this.emit('maxfilesreached', this.files);\n        }\n\n        return this.element.classList.add(\"dz-max-files-reached\");\n      } else {\n        return this.element.classList.remove(\"dz-max-files-reached\");\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop(e) {\n      if (!e.dataTransfer) {\n        return;\n      }\n\n      this.emit(\"drop\", e); // Convert the FileList to an Array\n      // This is necessary for IE11\n\n      var files = [];\n\n      for (var i = 0; i < e.dataTransfer.files.length; i++) {\n        files[i] = e.dataTransfer.files[i];\n      } // Even if it's a folder, files.length will contain the folders.\n\n\n      if (files.length) {\n        var items = e.dataTransfer.items;\n\n        if (items && items.length && items[0].webkitGetAsEntry != null) {\n          // The browser supports dropping of folders, so handle items instead of files\n          this._addFilesFromItems(items);\n        } else {\n          this.handleFiles(files);\n        }\n      }\n\n      this.emit(\"addedfiles\", files);\n    }\n  }, {\n    key: \"paste\",\n    value: function paste(e) {\n      if (__guard__(e != null ? e.clipboardData : undefined, function (x) {\n        return x.items;\n      }) == null) {\n        return;\n      }\n\n      this.emit(\"paste\", e);\n      var items = e.clipboardData.items;\n\n      if (items.length) {\n        return this._addFilesFromItems(items);\n      }\n    }\n  }, {\n    key: \"handleFiles\",\n    value: function handleFiles(files) {\n      var _iterator13 = _createForOfIteratorHelper(files),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var file = _step13.value;\n          this.addFile(file);\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n    } // When a folder is dropped (or files are pasted), items must be handled\n    // instead of files.\n\n  }, {\n    key: \"_addFilesFromItems\",\n    value: function _addFilesFromItems(items) {\n      var _this5 = this;\n\n      return function () {\n        var result = [];\n\n        var _iterator14 = _createForOfIteratorHelper(items),\n            _step14;\n\n        try {\n          for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n            var item = _step14.value;\n            var entry;\n\n            if (item.webkitGetAsEntry != null && (entry = item.webkitGetAsEntry())) {\n              if (entry.isFile) {\n                result.push(_this5.addFile(item.getAsFile()));\n              } else if (entry.isDirectory) {\n                // Append all files from that directory to files\n                result.push(_this5._addFilesFromDirectory(entry, entry.name));\n              } else {\n                result.push(undefined);\n              }\n            } else if (item.getAsFile != null) {\n              if (item.kind == null || item.kind === \"file\") {\n                result.push(_this5.addFile(item.getAsFile()));\n              } else {\n                result.push(undefined);\n              }\n            } else {\n              result.push(undefined);\n            }\n          }\n        } catch (err) {\n          _iterator14.e(err);\n        } finally {\n          _iterator14.f();\n        }\n\n        return result;\n      }();\n    } // Goes through the directory, and adds each file it finds recursively\n\n  }, {\n    key: \"_addFilesFromDirectory\",\n    value: function _addFilesFromDirectory(directory, path) {\n      var _this6 = this;\n\n      var dirReader = directory.createReader();\n\n      var errorHandler = function errorHandler(error) {\n        return __guardMethod__(console, 'log', function (o) {\n          return o.log(error);\n        });\n      };\n\n      var readEntries = function readEntries() {\n        return dirReader.readEntries(function (entries) {\n          if (entries.length > 0) {\n            var _iterator15 = _createForOfIteratorHelper(entries),\n                _step15;\n\n            try {\n              for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n                var entry = _step15.value;\n\n                if (entry.isFile) {\n                  entry.file(function (file) {\n                    if (_this6.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\n                      return;\n                    }\n\n                    file.fullPath = \"\".concat(path, \"/\").concat(file.name);\n                    return _this6.addFile(file);\n                  });\n                } else if (entry.isDirectory) {\n                  _this6._addFilesFromDirectory(entry, \"\".concat(path, \"/\").concat(entry.name));\n                }\n              } // Recursively call readEntries() again, since browser only handle\n              // the first 100 entries.\n              // See: https://developer.mozilla.org/en-US/docs/Web/API/DirectoryReader#readEntries\n\n            } catch (err) {\n              _iterator15.e(err);\n            } finally {\n              _iterator15.f();\n            }\n\n            readEntries();\n          }\n\n          return null;\n        }, errorHandler);\n      };\n\n      return readEntries();\n    } // If `done()` is called without argument the file is accepted\n    // If you call it with an error message, the file is rejected\n    // (This allows for asynchronous validation)\n    //\n    // This function checks the filesize, and if the file.type passes the\n    // `acceptedFiles` check.\n\n  }, {\n    key: \"accept\",\n    value: function accept(file, done) {\n      if (this.options.maxFilesize && file.size > this.options.maxFilesize * 1024 * 1024) {\n        done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\n        done(this.options.dictInvalidFileType);\n      } else if (this.options.maxFiles != null && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\n        this.emit(\"maxfilesexceeded\", file);\n      } else {\n        this.options.accept.call(this, file, done);\n      }\n    }\n  }, {\n    key: \"addFile\",\n    value: function addFile(file) {\n      var _this7 = this;\n\n      file.upload = {\n        uuid: Dropzone.uuidv4(),\n        progress: 0,\n        // Setting the total upload size to file.size for the beginning\n        // It's actual different than the size to be transmitted.\n        total: file.size,\n        bytesSent: 0,\n        filename: this._renameFile(file) // Not setting chunking information here, because the acutal data  and\n        // thus the chunks  might change if `options.transformFile` is set\n        // and does something to the data.\n\n      };\n      this.files.push(file);\n      file.status = Dropzone.ADDED;\n      this.emit(\"addedfile\", file);\n\n      this._enqueueThumbnail(file);\n\n      this.accept(file, function (error) {\n        if (error) {\n          file.accepted = false;\n\n          _this7._errorProcessing([file], error); // Will set the file.status\n\n        } else {\n          file.accepted = true;\n\n          if (_this7.options.autoQueue) {\n            _this7.enqueueFile(file);\n          } // Will set .accepted = true\n\n        }\n\n        _this7._updateMaxFilesReachedClass();\n      });\n    } // Wrapper for enqueueFile\n\n  }, {\n    key: \"enqueueFiles\",\n    value: function enqueueFiles(files) {\n      var _iterator16 = _createForOfIteratorHelper(files),\n          _step16;\n\n      try {\n        for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n          var file = _step16.value;\n          this.enqueueFile(file);\n        }\n      } catch (err) {\n        _iterator16.e(err);\n      } finally {\n        _iterator16.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"enqueueFile\",\n    value: function enqueueFile(file) {\n      var _this8 = this;\n\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\n        file.status = Dropzone.QUEUED;\n\n        if (this.options.autoProcessQueue) {\n          return setTimeout(function () {\n            return _this8.processQueue();\n          }, 0); // Deferring the call\n        }\n      } else {\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\n      }\n    }\n  }, {\n    key: \"_enqueueThumbnail\",\n    value: function _enqueueThumbnail(file) {\n      var _this9 = this;\n\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n        this._thumbnailQueue.push(file);\n\n        return setTimeout(function () {\n          return _this9._processThumbnailQueue();\n        }, 0); // Deferring the call\n      }\n    }\n  }, {\n    key: \"_processThumbnailQueue\",\n    value: function _processThumbnailQueue() {\n      var _this10 = this;\n\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\n        return;\n      }\n\n      this._processingThumbnail = true;\n\n      var file = this._thumbnailQueue.shift();\n\n      return this.createThumbnail(file, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.thumbnailMethod, true, function (dataUrl) {\n        _this10.emit(\"thumbnail\", file, dataUrl);\n\n        _this10._processingThumbnail = false;\n        return _this10._processThumbnailQueue();\n      });\n    } // Can be called by the user to remove a file\n\n  }, {\n    key: \"removeFile\",\n    value: function removeFile(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        this.cancelUpload(file);\n      }\n\n      this.files = without(this.files, file);\n      this.emit(\"removedfile\", file);\n\n      if (this.files.length === 0) {\n        return this.emit(\"reset\");\n      }\n    } // Removes all files that aren't currently processed from the list\n\n  }, {\n    key: \"removeAllFiles\",\n    value: function removeAllFiles(cancelIfNecessary) {\n      // Create a copy of files since removeFile() changes the @files array.\n      if (cancelIfNecessary == null) {\n        cancelIfNecessary = false;\n      }\n\n      var _iterator17 = _createForOfIteratorHelper(this.files.slice()),\n          _step17;\n\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var file = _step17.value;\n\n          if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\n            this.removeFile(file);\n          }\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n\n      return null;\n    } // Resizes an image before it gets sent to the server. This function is the default behavior of\n    // `options.transformFile` if `resizeWidth` or `resizeHeight` are set. The callback is invoked with\n    // the resized blob.\n\n  }, {\n    key: \"resizeImage\",\n    value: function resizeImage(file, width, height, resizeMethod, callback) {\n      var _this11 = this;\n\n      return this.createThumbnail(file, width, height, resizeMethod, true, function (dataUrl, canvas) {\n        if (canvas == null) {\n          // The image has not been resized\n          return callback(file);\n        } else {\n          var resizeMimeType = _this11.options.resizeMimeType;\n\n          if (resizeMimeType == null) {\n            resizeMimeType = file.type;\n          }\n\n          var resizedDataURL = canvas.toDataURL(resizeMimeType, _this11.options.resizeQuality);\n\n          if (resizeMimeType === 'image/jpeg' || resizeMimeType === 'image/jpg') {\n            // Now add the original EXIF information\n            resizedDataURL = ExifRestore.restore(file.dataURL, resizedDataURL);\n          }\n\n          return callback(Dropzone.dataURItoBlob(resizedDataURL));\n        }\n      });\n    }\n  }, {\n    key: \"createThumbnail\",\n    value: function createThumbnail(file, width, height, resizeMethod, fixOrientation, callback) {\n      var _this12 = this;\n\n      var fileReader = new FileReader();\n\n      fileReader.onload = function () {\n        file.dataURL = fileReader.result; // Don't bother creating a thumbnail for SVG images since they're vector\n\n        if (file.type === \"image/svg+xml\") {\n          if (callback != null) {\n            callback(fileReader.result);\n          }\n\n          return;\n        }\n\n        _this12.createThumbnailFromUrl(file, width, height, resizeMethod, fixOrientation, callback);\n      };\n\n      fileReader.readAsDataURL(file);\n    } // `mockFile` needs to have these attributes:\n    // \n    //     { name: 'name', size: 12345, imageUrl: '' }\n    //\n    // `callback` will be invoked when the image has been downloaded and displayed.\n    // `crossOrigin` will be added to the `img` tag when accessing the file.\n\n  }, {\n    key: \"displayExistingFile\",\n    value: function displayExistingFile(mockFile, imageUrl, callback, crossOrigin) {\n      var _this13 = this;\n\n      var resizeThumbnail = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      this.emit(\"addedfile\", mockFile);\n      this.emit(\"complete\", mockFile);\n\n      if (!resizeThumbnail) {\n        this.emit(\"thumbnail\", mockFile, imageUrl);\n        if (callback) callback();\n      } else {\n        var onDone = function onDone(thumbnail) {\n          _this13.emit('thumbnail', mockFile, thumbnail);\n\n          if (callback) callback();\n        };\n\n        mockFile.dataURL = imageUrl;\n        this.createThumbnailFromUrl(mockFile, this.options.thumbnailWidth, this.options.thumbnailHeight, this.options.resizeMethod, this.options.fixOrientation, onDone, crossOrigin);\n      }\n    }\n  }, {\n    key: \"createThumbnailFromUrl\",\n    value: function createThumbnailFromUrl(file, width, height, resizeMethod, fixOrientation, callback, crossOrigin) {\n      var _this14 = this;\n\n      // Not using `new Image` here because of a bug in latest Chrome versions.\n      // See https://github.com/enyo/dropzone/pull/226\n      var img = document.createElement(\"img\");\n\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      } // fixOrientation is not needed anymore with browsers handling imageOrientation\n\n\n      fixOrientation = getComputedStyle(document.body)['imageOrientation'] == 'from-image' ? false : fixOrientation;\n\n      img.onload = function () {\n        var loadExif = function loadExif(callback) {\n          return callback(1);\n        };\n\n        if (typeof EXIF !== 'undefined' && EXIF !== null && fixOrientation) {\n          loadExif = function loadExif(callback) {\n            return EXIF.getData(img, function () {\n              return callback(EXIF.getTag(this, 'Orientation'));\n            });\n          };\n        }\n\n        return loadExif(function (orientation) {\n          file.width = img.width;\n          file.height = img.height;\n\n          var resizeInfo = _this14.options.resize.call(_this14, file, width, height, resizeMethod);\n\n          var canvas = document.createElement(\"canvas\");\n          var ctx = canvas.getContext(\"2d\");\n          canvas.width = resizeInfo.trgWidth;\n          canvas.height = resizeInfo.trgHeight;\n\n          if (orientation > 4) {\n            canvas.width = resizeInfo.trgHeight;\n            canvas.height = resizeInfo.trgWidth;\n          }\n\n          switch (orientation) {\n            case 2:\n              // horizontal flip\n              ctx.translate(canvas.width, 0);\n              ctx.scale(-1, 1);\n              break;\n\n            case 3:\n              // 180 rotate left\n              ctx.translate(canvas.width, canvas.height);\n              ctx.rotate(Math.PI);\n              break;\n\n            case 4:\n              // vertical flip\n              ctx.translate(0, canvas.height);\n              ctx.scale(1, -1);\n              break;\n\n            case 5:\n              // vertical flip + 90 rotate right\n              ctx.rotate(0.5 * Math.PI);\n              ctx.scale(1, -1);\n              break;\n\n            case 6:\n              // 90 rotate right\n              ctx.rotate(0.5 * Math.PI);\n              ctx.translate(0, -canvas.width);\n              break;\n\n            case 7:\n              // horizontal flip + 90 rotate right\n              ctx.rotate(0.5 * Math.PI);\n              ctx.translate(canvas.height, -canvas.width);\n              ctx.scale(-1, 1);\n              break;\n\n            case 8:\n              // 90 rotate left\n              ctx.rotate(-0.5 * Math.PI);\n              ctx.translate(-canvas.height, 0);\n              break;\n          } // This is a bugfix for iOS' scaling bug.\n\n\n          drawImageIOSFix(ctx, img, resizeInfo.srcX != null ? resizeInfo.srcX : 0, resizeInfo.srcY != null ? resizeInfo.srcY : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, resizeInfo.trgX != null ? resizeInfo.trgX : 0, resizeInfo.trgY != null ? resizeInfo.trgY : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\n          var thumbnail = canvas.toDataURL(\"image/png\");\n\n          if (callback != null) {\n            return callback(thumbnail, canvas);\n          }\n        });\n      };\n\n      if (callback != null) {\n        img.onerror = callback;\n      }\n\n      return img.src = file.dataURL;\n    } // Goes through the queue and processes files if there aren't too many already.\n\n  }, {\n    key: \"processQueue\",\n    value: function processQueue() {\n      var parallelUploads = this.options.parallelUploads;\n      var processingLength = this.getUploadingFiles().length;\n      var i = processingLength; // There are already at least as many files uploading than should be\n\n      if (processingLength >= parallelUploads) {\n        return;\n      }\n\n      var queuedFiles = this.getQueuedFiles();\n\n      if (!(queuedFiles.length > 0)) {\n        return;\n      }\n\n      if (this.options.uploadMultiple) {\n        // The files should be uploaded in one request\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\n      } else {\n        while (i < parallelUploads) {\n          if (!queuedFiles.length) {\n            return;\n          } // Nothing left to process\n\n\n          this.processFile(queuedFiles.shift());\n          i++;\n        }\n      }\n    } // Wrapper for `processFiles`\n\n  }, {\n    key: \"processFile\",\n    value: function processFile(file) {\n      return this.processFiles([file]);\n    } // Loads the file, then calls finishedLoading()\n\n  }, {\n    key: \"processFiles\",\n    value: function processFiles(files) {\n      var _iterator18 = _createForOfIteratorHelper(files),\n          _step18;\n\n      try {\n        for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n          var file = _step18.value;\n          file.processing = true; // Backwards compatibility\n\n          file.status = Dropzone.UPLOADING;\n          this.emit(\"processing\", file);\n        }\n      } catch (err) {\n        _iterator18.e(err);\n      } finally {\n        _iterator18.f();\n      }\n\n      if (this.options.uploadMultiple) {\n        this.emit(\"processingmultiple\", files);\n      }\n\n      return this.uploadFiles(files);\n    }\n  }, {\n    key: \"_getFilesWithXhr\",\n    value: function _getFilesWithXhr(xhr) {\n      var files;\n      return files = this.files.filter(function (file) {\n        return file.xhr === xhr;\n      }).map(function (file) {\n        return file;\n      });\n    } // Cancels the file upload and sets the status to CANCELED\n    // **if** the file is actually being uploaded.\n    // If it's still in the queue, the file is being removed from it and the status\n    // set to CANCELED.\n\n  }, {\n    key: \"cancelUpload\",\n    value: function cancelUpload(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        var groupedFiles = this._getFilesWithXhr(file.xhr);\n\n        var _iterator19 = _createForOfIteratorHelper(groupedFiles),\n            _step19;\n\n        try {\n          for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n            var groupedFile = _step19.value;\n            groupedFile.status = Dropzone.CANCELED;\n          }\n        } catch (err) {\n          _iterator19.e(err);\n        } finally {\n          _iterator19.f();\n        }\n\n        if (typeof file.xhr !== 'undefined') {\n          file.xhr.abort();\n        }\n\n        var _iterator20 = _createForOfIteratorHelper(groupedFiles),\n            _step20;\n\n        try {\n          for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n            var _groupedFile = _step20.value;\n            this.emit(\"canceled\", _groupedFile);\n          }\n        } catch (err) {\n          _iterator20.e(err);\n        } finally {\n          _iterator20.f();\n        }\n\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", groupedFiles);\n        }\n      } else if (file.status === Dropzone.ADDED || file.status === Dropzone.QUEUED) {\n        file.status = Dropzone.CANCELED;\n        this.emit(\"canceled\", file);\n\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", [file]);\n        }\n      }\n\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    }\n  }, {\n    key: \"resolveOption\",\n    value: function resolveOption(option) {\n      if (typeof option === 'function') {\n        for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n          args[_key3 - 1] = arguments[_key3];\n        }\n\n        return option.apply(this, args);\n      }\n\n      return option;\n    }\n  }, {\n    key: \"uploadFile\",\n    value: function uploadFile(file) {\n      return this.uploadFiles([file]);\n    }\n  }, {\n    key: \"uploadFiles\",\n    value: function uploadFiles(files) {\n      var _this15 = this;\n\n      this._transformFiles(files, function (transformedFiles) {\n        if (_this15.options.chunking) {\n          // Chunking is not allowed to be used with `uploadMultiple` so we know\n          // that there is only __one__file.\n          var transformedFile = transformedFiles[0];\n          files[0].upload.chunked = _this15.options.chunking && (_this15.options.forceChunking || transformedFile.size > _this15.options.chunkSize);\n          files[0].upload.totalChunkCount = Math.ceil(transformedFile.size / _this15.options.chunkSize);\n        }\n\n        if (files[0].upload.chunked) {\n          // This file should be sent in chunks!\n          // If the chunking option is set, we **know** that there can only be **one** file, since\n          // uploadMultiple is not allowed with this option.\n          var file = files[0];\n          var _transformedFile = transformedFiles[0];\n          var startedChunkCount = 0;\n          file.upload.chunks = [];\n\n          var handleNextChunk = function handleNextChunk() {\n            var chunkIndex = 0; // Find the next item in file.upload.chunks that is not defined yet.\n\n            while (file.upload.chunks[chunkIndex] !== undefined) {\n              chunkIndex++;\n            } // This means, that all chunks have already been started.\n\n\n            if (chunkIndex >= file.upload.totalChunkCount) return;\n            startedChunkCount++;\n            var start = chunkIndex * _this15.options.chunkSize;\n            var end = Math.min(start + _this15.options.chunkSize, _transformedFile.size);\n            var dataBlock = {\n              name: _this15._getParamName(0),\n              data: _transformedFile.webkitSlice ? _transformedFile.webkitSlice(start, end) : _transformedFile.slice(start, end),\n              filename: file.upload.filename,\n              chunkIndex: chunkIndex\n            };\n            file.upload.chunks[chunkIndex] = {\n              file: file,\n              index: chunkIndex,\n              dataBlock: dataBlock,\n              // In case we want to retry.\n              status: Dropzone.UPLOADING,\n              progress: 0,\n              retries: 0 // The number of times this block has been retried.\n\n            };\n\n            _this15._uploadData(files, [dataBlock]);\n          };\n\n          file.upload.finishedChunkUpload = function (chunk) {\n            var allFinished = true;\n            chunk.status = Dropzone.SUCCESS; // Clear the data from the chunk\n\n            chunk.dataBlock = null; // Leaving this reference to xhr intact here will cause memory leaks in some browsers\n\n            chunk.xhr = null;\n\n            for (var i = 0; i < file.upload.totalChunkCount; i++) {\n              if (file.upload.chunks[i] === undefined) {\n                return handleNextChunk();\n              }\n\n              if (file.upload.chunks[i].status !== Dropzone.SUCCESS) {\n                allFinished = false;\n              }\n            }\n\n            if (allFinished) {\n              _this15.options.chunksUploaded(file, function () {\n                _this15._finished(files, '', null);\n              });\n            }\n          };\n\n          if (_this15.options.parallelChunkUploads) {\n            for (var i = 0; i < file.upload.totalChunkCount; i++) {\n              handleNextChunk();\n            }\n          } else {\n            handleNextChunk();\n          }\n        } else {\n          var dataBlocks = [];\n\n          for (var _i3 = 0; _i3 < files.length; _i3++) {\n            dataBlocks[_i3] = {\n              name: _this15._getParamName(_i3),\n              data: transformedFiles[_i3],\n              filename: files[_i3].upload.filename\n            };\n          }\n\n          _this15._uploadData(files, dataBlocks);\n        }\n      });\n    } /// Returns the right chunk for given file and xhr\n\n  }, {\n    key: \"_getChunk\",\n    value: function _getChunk(file, xhr) {\n      for (var i = 0; i < file.upload.totalChunkCount; i++) {\n        if (file.upload.chunks[i] !== undefined && file.upload.chunks[i].xhr === xhr) {\n          return file.upload.chunks[i];\n        }\n      }\n    } // This function actually uploads the file(s) to the server.\n    // If dataBlocks contains the actual data to upload (meaning, that this could either be transformed\n    // files, or individual chunks for chunked upload).\n\n  }, {\n    key: \"_uploadData\",\n    value: function _uploadData(files, dataBlocks) {\n      var _this16 = this;\n\n      var xhr = new XMLHttpRequest(); // Put the xhr object in the file objects to be able to reference it later.\n\n      var _iterator21 = _createForOfIteratorHelper(files),\n          _step21;\n\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var file = _step21.value;\n          file.xhr = xhr;\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n\n      if (files[0].upload.chunked) {\n        // Put the xhr object in the right chunk object, so it can be associated later, and found with _getChunk\n        files[0].upload.chunks[dataBlocks[0].chunkIndex].xhr = xhr;\n      }\n\n      var method = this.resolveOption(this.options.method, files);\n      var url = this.resolveOption(this.options.url, files);\n      xhr.open(method, url, true); // Setting the timeout after open because of IE11 issue: https://gitlab.com/meno/dropzone/issues/8\n\n      xhr.timeout = this.resolveOption(this.options.timeout, files); // Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179\n\n      xhr.withCredentials = !!this.options.withCredentials;\n\n      xhr.onload = function (e) {\n        _this16._finishedUploading(files, xhr, e);\n      };\n\n      xhr.ontimeout = function () {\n        _this16._handleUploadError(files, xhr, \"Request timedout after \".concat(_this16.options.timeout / 1000, \" seconds\"));\n      };\n\n      xhr.onerror = function () {\n        _this16._handleUploadError(files, xhr);\n      }; // Some browsers do not have the .upload property\n\n\n      var progressObj = xhr.upload != null ? xhr.upload : xhr;\n\n      progressObj.onprogress = function (e) {\n        return _this16._updateFilesUploadProgress(files, xhr, e);\n      };\n\n      var headers = {\n        \"Accept\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      };\n\n      if (this.options.headers) {\n        Dropzone.extend(headers, this.options.headers);\n      }\n\n      for (var headerName in headers) {\n        var headerValue = headers[headerName];\n\n        if (headerValue) {\n          xhr.setRequestHeader(headerName, headerValue);\n        }\n      }\n\n      var formData = new FormData(); // Adding all @options parameters\n\n      if (this.options.params) {\n        var additionalParams = this.options.params;\n\n        if (typeof additionalParams === 'function') {\n          additionalParams = additionalParams.call(this, files, xhr, files[0].upload.chunked ? this._getChunk(files[0], xhr) : null);\n        }\n\n        for (var key in additionalParams) {\n          var value = additionalParams[key];\n\n          if (Array.isArray(value)) {\n            // The additional parameter contains an array,\n            // so lets iterate over it to attach each value\n            // individually.\n            for (var i = 0; i < value.length; i++) {\n              formData.append(key, value[i]);\n            }\n          } else {\n            formData.append(key, value);\n          }\n        }\n      } // Let the user add additional data if necessary\n\n\n      var _iterator22 = _createForOfIteratorHelper(files),\n          _step22;\n\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _file = _step22.value;\n          this.emit(\"sending\", _file, xhr, formData);\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n\n      if (this.options.uploadMultiple) {\n        this.emit(\"sendingmultiple\", files, xhr, formData);\n      }\n\n      this._addFormElementData(formData); // Finally add the files\n      // Has to be last because some servers (eg: S3) expect the file to be the last parameter\n\n\n      for (var _i4 = 0; _i4 < dataBlocks.length; _i4++) {\n        var dataBlock = dataBlocks[_i4];\n        formData.append(dataBlock.name, dataBlock.data, dataBlock.filename);\n      }\n\n      this.submitRequest(xhr, formData, files);\n    } // Transforms all files with this.options.transformFile and invokes done with the transformed files when done.\n\n  }, {\n    key: \"_transformFiles\",\n    value: function _transformFiles(files, done) {\n      var _this17 = this;\n\n      var transformedFiles = []; // Clumsy way of handling asynchronous calls, until I get to add a proper Future library.\n\n      var doneCounter = 0;\n\n      var _loop = function _loop(i) {\n        _this17.options.transformFile.call(_this17, files[i], function (transformedFile) {\n          transformedFiles[i] = transformedFile;\n\n          if (++doneCounter === files.length) {\n            done(transformedFiles);\n          }\n        });\n      };\n\n      for (var i = 0; i < files.length; i++) {\n        _loop(i);\n      }\n    } // Takes care of adding other input elements of the form to the AJAX request\n\n  }, {\n    key: \"_addFormElementData\",\n    value: function _addFormElementData(formData) {\n      // Take care of other input elements\n      if (this.element.tagName === \"FORM\") {\n        var _iterator23 = _createForOfIteratorHelper(this.element.querySelectorAll(\"input, textarea, select, button\")),\n            _step23;\n\n        try {\n          for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n            var input = _step23.value;\n            var inputName = input.getAttribute(\"name\");\n            var inputType = input.getAttribute(\"type\");\n            if (inputType) inputType = inputType.toLowerCase(); // If the input doesn't have a name, we can't use it.\n\n            if (typeof inputName === 'undefined' || inputName === null) continue;\n\n            if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\n              // Possibly multiple values\n              var _iterator24 = _createForOfIteratorHelper(input.options),\n                  _step24;\n\n              try {\n                for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n                  var option = _step24.value;\n\n                  if (option.selected) {\n                    formData.append(inputName, option.value);\n                  }\n                }\n              } catch (err) {\n                _iterator24.e(err);\n              } finally {\n                _iterator24.f();\n              }\n            } else if (!inputType || inputType !== \"checkbox\" && inputType !== \"radio\" || input.checked) {\n              formData.append(inputName, input.value);\n            }\n          }\n        } catch (err) {\n          _iterator23.e(err);\n        } finally {\n          _iterator23.f();\n        }\n      }\n    } // Invoked when there is new progress information about given files.\n    // If e is not provided, it is assumed that the upload is finished.\n\n  }, {\n    key: \"_updateFilesUploadProgress\",\n    value: function _updateFilesUploadProgress(files, xhr, e) {\n      var progress;\n\n      if (typeof e !== 'undefined') {\n        progress = 100 * e.loaded / e.total;\n\n        if (files[0].upload.chunked) {\n          var file = files[0]; // Since this is a chunked upload, we need to update the appropriate chunk progress.\n\n          var chunk = this._getChunk(file, xhr);\n\n          chunk.progress = progress;\n          chunk.total = e.total;\n          chunk.bytesSent = e.loaded;\n          var fileProgress = 0,\n              fileTotal,\n              fileBytesSent;\n          file.upload.progress = 0;\n          file.upload.total = 0;\n          file.upload.bytesSent = 0;\n\n          for (var i = 0; i < file.upload.totalChunkCount; i++) {\n            if (file.upload.chunks[i] !== undefined && file.upload.chunks[i].progress !== undefined) {\n              file.upload.progress += file.upload.chunks[i].progress;\n              file.upload.total += file.upload.chunks[i].total;\n              file.upload.bytesSent += file.upload.chunks[i].bytesSent;\n            }\n          }\n\n          file.upload.progress = file.upload.progress / file.upload.totalChunkCount;\n        } else {\n          var _iterator25 = _createForOfIteratorHelper(files),\n              _step25;\n\n          try {\n            for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n              var _file2 = _step25.value;\n              _file2.upload.progress = progress;\n              _file2.upload.total = e.total;\n              _file2.upload.bytesSent = e.loaded;\n            }\n          } catch (err) {\n            _iterator25.e(err);\n          } finally {\n            _iterator25.f();\n          }\n        }\n\n        var _iterator26 = _createForOfIteratorHelper(files),\n            _step26;\n\n        try {\n          for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n            var _file3 = _step26.value;\n            this.emit(\"uploadprogress\", _file3, _file3.upload.progress, _file3.upload.bytesSent);\n          }\n        } catch (err) {\n          _iterator26.e(err);\n        } finally {\n          _iterator26.f();\n        }\n      } else {\n        // Called when the file finished uploading\n        var allFilesFinished = true;\n        progress = 100;\n\n        var _iterator27 = _createForOfIteratorHelper(files),\n            _step27;\n\n        try {\n          for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n            var _file4 = _step27.value;\n\n            if (_file4.upload.progress !== 100 || _file4.upload.bytesSent !== _file4.upload.total) {\n              allFilesFinished = false;\n            }\n\n            _file4.upload.progress = progress;\n            _file4.upload.bytesSent = _file4.upload.total;\n          } // Nothing to do, all files already at 100%\n\n        } catch (err) {\n          _iterator27.e(err);\n        } finally {\n          _iterator27.f();\n        }\n\n        if (allFilesFinished) {\n          return;\n        }\n\n        var _iterator28 = _createForOfIteratorHelper(files),\n            _step28;\n\n        try {\n          for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n            var _file5 = _step28.value;\n            this.emit(\"uploadprogress\", _file5, progress, _file5.upload.bytesSent);\n          }\n        } catch (err) {\n          _iterator28.e(err);\n        } finally {\n          _iterator28.f();\n        }\n      }\n    }\n  }, {\n    key: \"_finishedUploading\",\n    value: function _finishedUploading(files, xhr, e) {\n      var response;\n\n      if (files[0].status === Dropzone.CANCELED) {\n        return;\n      }\n\n      if (xhr.readyState !== 4) {\n        return;\n      }\n\n      if (xhr.responseType !== 'arraybuffer' && xhr.responseType !== 'blob') {\n        response = xhr.responseText;\n\n        if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n          try {\n            response = JSON.parse(response);\n          } catch (error) {\n            e = error;\n            response = \"Invalid JSON response from server.\";\n          }\n        }\n      }\n\n      this._updateFilesUploadProgress(files);\n\n      if (!(200 <= xhr.status && xhr.status < 300)) {\n        this._handleUploadError(files, xhr, response);\n      } else {\n        if (files[0].upload.chunked) {\n          files[0].upload.finishedChunkUpload(this._getChunk(files[0], xhr));\n        } else {\n          this._finished(files, response, e);\n        }\n      }\n    }\n  }, {\n    key: \"_handleUploadError\",\n    value: function _handleUploadError(files, xhr, response) {\n      if (files[0].status === Dropzone.CANCELED) {\n        return;\n      }\n\n      if (files[0].upload.chunked && this.options.retryChunks) {\n        var chunk = this._getChunk(files[0], xhr);\n\n        if (chunk.retries++ < this.options.retryChunksLimit) {\n          this._uploadData(files, [chunk.dataBlock]);\n\n          return;\n        } else {\n          console.warn('Retried this chunk too often. Giving up.');\n        }\n      }\n\n      this._errorProcessing(files, response || this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr);\n    }\n  }, {\n    key: \"submitRequest\",\n    value: function submitRequest(xhr, formData, files) {\n      xhr.send(formData);\n    } // Called internally when processing is finished.\n    // Individual callbacks have to be called in the appropriate sections.\n\n  }, {\n    key: \"_finished\",\n    value: function _finished(files, responseText, e) {\n      var _iterator29 = _createForOfIteratorHelper(files),\n          _step29;\n\n      try {\n        for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {\n          var file = _step29.value;\n          file.status = Dropzone.SUCCESS;\n          this.emit(\"success\", file, responseText, e);\n          this.emit(\"complete\", file);\n        }\n      } catch (err) {\n        _iterator29.e(err);\n      } finally {\n        _iterator29.f();\n      }\n\n      if (this.options.uploadMultiple) {\n        this.emit(\"successmultiple\", files, responseText, e);\n        this.emit(\"completemultiple\", files);\n      }\n\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    } // Called internally when processing is finished.\n    // Individual callbacks have to be called in the appropriate sections.\n\n  }, {\n    key: \"_errorProcessing\",\n    value: function _errorProcessing(files, message, xhr) {\n      var _iterator30 = _createForOfIteratorHelper(files),\n          _step30;\n\n      try {\n        for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n          var file = _step30.value;\n          file.status = Dropzone.ERROR;\n          this.emit(\"error\", file, message, xhr);\n          this.emit(\"complete\", file);\n        }\n      } catch (err) {\n        _iterator30.e(err);\n      } finally {\n        _iterator30.f();\n      }\n\n      if (this.options.uploadMultiple) {\n        this.emit(\"errormultiple\", files, message, xhr);\n        this.emit(\"completemultiple\", files);\n      }\n\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    }\n  }], [{\n    key: \"uuidv4\",\n    value: function uuidv4() {\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0,\n            v = c === 'x' ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n      });\n    }\n  }]);\n\n  return Dropzone;\n}(Emitter);\n\nDropzone.initClass();\nDropzone.version = \"5.7.2\"; // This is a map of options for your different dropzones. Add configurations\n// to this object for your different dropzone elemens.\n//\n// Example:\n//\n//     Dropzone.options.myDropzoneElementId = { maxFilesize: 1 };\n//\n// To disable autoDiscover for a specific element, you can set `false` as an option:\n//\n//     Dropzone.options.myDisabledElementId = false;\n//\n// And in html:\n//\n//     <form action=\"/upload\" id=\"my-dropzone-element-id\" class=\"dropzone\"></form>\n\nDropzone.options = {}; // Returns the options for an element or undefined if none available.\n\nDropzone.optionsForElement = function (element) {\n  // Get the `Dropzone.options.elementId` for this element if it exists\n  if (element.getAttribute(\"id\")) {\n    return Dropzone.options[camelize(element.getAttribute(\"id\"))];\n  } else {\n    return undefined;\n  }\n}; // Holds a list of all dropzone instances\n\n\nDropzone.instances = []; // Returns the dropzone for given element if any\n\nDropzone.forElement = function (element) {\n  if (typeof element === \"string\") {\n    element = document.querySelector(element);\n  }\n\n  if ((element != null ? element.dropzone : undefined) == null) {\n    throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\n  }\n\n  return element.dropzone;\n}; // Set to false if you don't want Dropzone to automatically find and attach to .dropzone elements.\n\n\nDropzone.autoDiscover = true; // Looks for all .dropzone elements and creates a dropzone for them\n\nDropzone.discover = function () {\n  var dropzones;\n\n  if (document.querySelectorAll) {\n    dropzones = document.querySelectorAll(\".dropzone\");\n  } else {\n    dropzones = []; // IE :(\n\n    var checkElements = function checkElements(elements) {\n      return function () {\n        var result = [];\n\n        var _iterator31 = _createForOfIteratorHelper(elements),\n            _step31;\n\n        try {\n          for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n            var el = _step31.value;\n\n            if (/(^| )dropzone($| )/.test(el.className)) {\n              result.push(dropzones.push(el));\n            } else {\n              result.push(undefined);\n            }\n          }\n        } catch (err) {\n          _iterator31.e(err);\n        } finally {\n          _iterator31.f();\n        }\n\n        return result;\n      }();\n    };\n\n    checkElements(document.getElementsByTagName(\"div\"));\n    checkElements(document.getElementsByTagName(\"form\"));\n  }\n\n  return function () {\n    var result = [];\n\n    var _iterator32 = _createForOfIteratorHelper(dropzones),\n        _step32;\n\n    try {\n      for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {\n        var dropzone = _step32.value;\n\n        // Create a dropzone unless auto discover has been disabled for specific element\n        if (Dropzone.optionsForElement(dropzone) !== false) {\n          result.push(new Dropzone(dropzone));\n        } else {\n          result.push(undefined);\n        }\n      }\n    } catch (err) {\n      _iterator32.e(err);\n    } finally {\n      _iterator32.f();\n    }\n\n    return result;\n  }();\n}; // Since the whole Drag'n'Drop API is pretty new, some browsers implement it,\n// but not correctly.\n// So I created a blacklist of userAgents. Yes, yes. Browser sniffing, I know.\n// But what to do when browsers *theoretically* support an API, but crash\n// when using it.\n//\n// This is a list of regular expressions tested against navigator.userAgent\n//\n// ** It should only be used on browser that *do* support the API, but\n// incorrectly **\n//\n\n\nDropzone.blacklistedBrowsers = [// The mac os and windows phone version of opera 12 seems to have a problem with the File drag'n'drop API.\n/opera.*(Macintosh|Windows Phone).*version\\/12/i]; // Checks if the browser is supported\n\nDropzone.isBrowserSupported = function () {\n  var capableBrowser = true;\n\n  if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\n    if (!(\"classList\" in document.createElement(\"a\"))) {\n      capableBrowser = false;\n    } else {\n      // The browser supports the API, but may be blacklisted.\n      var _iterator33 = _createForOfIteratorHelper(Dropzone.blacklistedBrowsers),\n          _step33;\n\n      try {\n        for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n          var regex = _step33.value;\n\n          if (regex.test(navigator.userAgent)) {\n            capableBrowser = false;\n            continue;\n          }\n        }\n      } catch (err) {\n        _iterator33.e(err);\n      } finally {\n        _iterator33.f();\n      }\n    }\n  } else {\n    capableBrowser = false;\n  }\n\n  return capableBrowser;\n};\n\nDropzone.dataURItoBlob = function (dataURI) {\n  // convert base64 to raw binary data held in a string\n  // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n  var byteString = atob(dataURI.split(',')[1]); // separate out the mime component\n\n  var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]; // write the bytes of the string to an ArrayBuffer\n\n  var ab = new ArrayBuffer(byteString.length);\n  var ia = new Uint8Array(ab);\n\n  for (var i = 0, end = byteString.length, asc = 0 <= end; asc ? i <= end : i >= end; asc ? i++ : i--) {\n    ia[i] = byteString.charCodeAt(i);\n  } // write the ArrayBuffer to a blob\n\n\n  return new Blob([ab], {\n    type: mimeString\n  });\n}; // Returns an array without the rejected item\n\n\nvar without = function without(list, rejectedItem) {\n  return list.filter(function (item) {\n    return item !== rejectedItem;\n  }).map(function (item) {\n    return item;\n  });\n}; // abc-def_ghi -> abcDefGhi\n\n\nvar camelize = function camelize(str) {\n  return str.replace(/[\\-_](\\w)/g, function (match) {\n    return match.charAt(1).toUpperCase();\n  });\n}; // Creates an element from string\n\n\nDropzone.createElement = function (string) {\n  var div = document.createElement(\"div\");\n  div.innerHTML = string;\n  return div.childNodes[0];\n}; // Tests if given element is inside (or simply is) the container\n\n\nDropzone.elementInside = function (element, container) {\n  if (element === container) {\n    return true;\n  } // Coffeescript doesn't support do/while loops\n\n\n  while (element = element.parentNode) {\n    if (element === container) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nDropzone.getElement = function (el, name) {\n  var element;\n\n  if (typeof el === \"string\") {\n    element = document.querySelector(el);\n  } else if (el.nodeType != null) {\n    element = el;\n  }\n\n  if (element == null) {\n    throw new Error(\"Invalid `\".concat(name, \"` option provided. Please provide a CSS selector or a plain HTML element.\"));\n  }\n\n  return element;\n};\n\nDropzone.getElements = function (els, name) {\n  var el, elements;\n\n  if (els instanceof Array) {\n    elements = [];\n\n    try {\n      var _iterator34 = _createForOfIteratorHelper(els),\n          _step34;\n\n      try {\n        for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n          el = _step34.value;\n          elements.push(this.getElement(el, name));\n        }\n      } catch (err) {\n        _iterator34.e(err);\n      } finally {\n        _iterator34.f();\n      }\n    } catch (e) {\n      elements = null;\n    }\n  } else if (typeof els === \"string\") {\n    elements = [];\n\n    var _iterator35 = _createForOfIteratorHelper(document.querySelectorAll(els)),\n        _step35;\n\n    try {\n      for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n        el = _step35.value;\n        elements.push(el);\n      }\n    } catch (err) {\n      _iterator35.e(err);\n    } finally {\n      _iterator35.f();\n    }\n  } else if (els.nodeType != null) {\n    elements = [els];\n  }\n\n  if (elements == null || !elements.length) {\n    throw new Error(\"Invalid `\".concat(name, \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\"));\n  }\n\n  return elements;\n}; // Asks the user the question and calls accepted or rejected accordingly\n//\n// The default implementation just uses `window.confirm` and then calls the\n// appropriate callback.\n\n\nDropzone.confirm = function (question, accepted, rejected) {\n  if (window.confirm(question)) {\n    return accepted();\n  } else if (rejected != null) {\n    return rejected();\n  }\n}; // Validates the mime type like this:\n//\n// https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept\n\n\nDropzone.isValidFile = function (file, acceptedFiles) {\n  if (!acceptedFiles) {\n    return true;\n  } // If there are no accepted mime types, it's OK\n\n\n  acceptedFiles = acceptedFiles.split(\",\");\n  var mimeType = file.type;\n  var baseMimeType = mimeType.replace(/\\/.*$/, \"\");\n\n  var _iterator36 = _createForOfIteratorHelper(acceptedFiles),\n      _step36;\n\n  try {\n    for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n      var validType = _step36.value;\n      validType = validType.trim();\n\n      if (validType.charAt(0) === \".\") {\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n          return true;\n        }\n      } else if (/\\/\\*$/.test(validType)) {\n        // This is something like a image/* mime type\n        if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\n          return true;\n        }\n      } else {\n        if (mimeType === validType) {\n          return true;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator36.e(err);\n  } finally {\n    _iterator36.f();\n  }\n\n  return false;\n}; // Augment jQuery\n\n\nif (typeof jQuery !== 'undefined' && jQuery !== null) {\n  jQuery.fn.dropzone = function (options) {\n    return this.each(function () {\n      return new Dropzone(this, options);\n    });\n  };\n}\n\nif (typeof module !== 'undefined' && module !== null) {\n  module.exports = Dropzone;\n} else {\n  window.Dropzone = Dropzone;\n} // Dropzone file status codes\n\n\nDropzone.ADDED = \"added\";\nDropzone.QUEUED = \"queued\"; // For backwards compatibility. Now, if a file is accepted, it's either queued\n// or uploading.\n\nDropzone.ACCEPTED = Dropzone.QUEUED;\nDropzone.UPLOADING = \"uploading\";\nDropzone.PROCESSING = Dropzone.UPLOADING; // alias\n\nDropzone.CANCELED = \"canceled\";\nDropzone.ERROR = \"error\";\nDropzone.SUCCESS = \"success\";\n/*\n\n Bugfix for iOS 6 and 7\n Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n based on the work of https://github.com/stomita/ios-imagefile-megapixel\n\n */\n// Detecting vertical squash in loaded image.\n// Fixes a bug which squash image vertically while drawing into canvas for some images.\n// This is a bug in iOS6 devices. This function from https://github.com/stomita/ios-imagefile-megapixel\n\nvar detectVerticalSquash = function detectVerticalSquash(img) {\n  var iw = img.naturalWidth;\n  var ih = img.naturalHeight;\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = 1;\n  canvas.height = ih;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(img, 0, 0);\n\n  var _ctx$getImageData = ctx.getImageData(1, 0, 1, ih),\n      data = _ctx$getImageData.data; // search image edge pixel position in case it is squashed vertically.\n\n\n  var sy = 0;\n  var ey = ih;\n  var py = ih;\n\n  while (py > sy) {\n    var alpha = data[(py - 1) * 4 + 3];\n\n    if (alpha === 0) {\n      ey = py;\n    } else {\n      sy = py;\n    }\n\n    py = ey + sy >> 1;\n  }\n\n  var ratio = py / ih;\n\n  if (ratio === 0) {\n    return 1;\n  } else {\n    return ratio;\n  }\n}; // A replacement for context.drawImage\n// (args are for source and destination).\n\n\nvar drawImageIOSFix = function drawImageIOSFix(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n  var vertSquashRatio = detectVerticalSquash(img);\n  return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n}; // Based on MinifyJpeg\n// Source: http://www.perry.cz/files/ExifRestorer.js\n// http://elicon.blog57.fc2.com/blog-entry-206.html\n\n\nvar ExifRestore = /*#__PURE__*/function () {\n  function ExifRestore() {\n    _classCallCheck(this, ExifRestore);\n  }\n\n  _createClass(ExifRestore, null, [{\n    key: \"initClass\",\n    value: function initClass() {\n      this.KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    }\n  }, {\n    key: \"encode64\",\n    value: function encode64(input) {\n      var output = '';\n      var chr1 = undefined;\n      var chr2 = undefined;\n      var chr3 = '';\n      var enc1 = undefined;\n      var enc2 = undefined;\n      var enc3 = undefined;\n      var enc4 = '';\n      var i = 0;\n\n      while (true) {\n        chr1 = input[i++];\n        chr2 = input[i++];\n        chr3 = input[i++];\n        enc1 = chr1 >> 2;\n        enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n        enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n          enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n          enc4 = 64;\n        }\n\n        output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n        chr1 = chr2 = chr3 = '';\n        enc1 = enc2 = enc3 = enc4 = '';\n\n        if (!(i < input.length)) {\n          break;\n        }\n      }\n\n      return output;\n    }\n  }, {\n    key: \"restore\",\n    value: function restore(origFileBase64, resizedFileBase64) {\n      if (!origFileBase64.match('data:image/jpeg;base64,')) {\n        return resizedFileBase64;\n      }\n\n      var rawImage = this.decode64(origFileBase64.replace('data:image/jpeg;base64,', ''));\n      var segments = this.slice2Segments(rawImage);\n      var image = this.exifManipulation(resizedFileBase64, segments);\n      return \"data:image/jpeg;base64,\".concat(this.encode64(image));\n    }\n  }, {\n    key: \"exifManipulation\",\n    value: function exifManipulation(resizedFileBase64, segments) {\n      var exifArray = this.getExifArray(segments);\n      var newImageArray = this.insertExif(resizedFileBase64, exifArray);\n      var aBuffer = new Uint8Array(newImageArray);\n      return aBuffer;\n    }\n  }, {\n    key: \"getExifArray\",\n    value: function getExifArray(segments) {\n      var seg = undefined;\n      var x = 0;\n\n      while (x < segments.length) {\n        seg = segments[x];\n\n        if (seg[0] === 255 & seg[1] === 225) {\n          return seg;\n        }\n\n        x++;\n      }\n\n      return [];\n    }\n  }, {\n    key: \"insertExif\",\n    value: function insertExif(resizedFileBase64, exifArray) {\n      var imageData = resizedFileBase64.replace('data:image/jpeg;base64,', '');\n      var buf = this.decode64(imageData);\n      var separatePoint = buf.indexOf(255, 3);\n      var mae = buf.slice(0, separatePoint);\n      var ato = buf.slice(separatePoint);\n      var array = mae;\n      array = array.concat(exifArray);\n      array = array.concat(ato);\n      return array;\n    }\n  }, {\n    key: \"slice2Segments\",\n    value: function slice2Segments(rawImageArray) {\n      var head = 0;\n      var segments = [];\n\n      while (true) {\n        var length;\n\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 218) {\n          break;\n        }\n\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 216) {\n          head += 2;\n        } else {\n          length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3];\n          var endPoint = head + length + 2;\n          var seg = rawImageArray.slice(head, endPoint);\n          segments.push(seg);\n          head = endPoint;\n        }\n\n        if (head > rawImageArray.length) {\n          break;\n        }\n      }\n\n      return segments;\n    }\n  }, {\n    key: \"decode64\",\n    value: function decode64(input) {\n      var output = '';\n      var chr1 = undefined;\n      var chr2 = undefined;\n      var chr3 = '';\n      var enc1 = undefined;\n      var enc2 = undefined;\n      var enc3 = undefined;\n      var enc4 = '';\n      var i = 0;\n      var buf = []; // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n\n      var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n\n      if (base64test.exec(input)) {\n        console.warn('There were invalid base64 characters in the input text.\\nValid base64 characters are A-Z, a-z, 0-9, \\'+\\', \\'/\\',and \\'=\\'\\nExpect errors in decoding.');\n      }\n\n      input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n      while (true) {\n        enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n        chr1 = enc1 << 2 | enc2 >> 4;\n        chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n        chr3 = (enc3 & 3) << 6 | enc4;\n        buf.push(chr1);\n\n        if (enc3 !== 64) {\n          buf.push(chr2);\n        }\n\n        if (enc4 !== 64) {\n          buf.push(chr3);\n        }\n\n        chr1 = chr2 = chr3 = '';\n        enc1 = enc2 = enc3 = enc4 = '';\n\n        if (!(i < input.length)) {\n          break;\n        }\n      }\n\n      return buf;\n    }\n  }]);\n\n  return ExifRestore;\n}();\n\nExifRestore.initClass();\n/*\n * contentloaded.js\n *\n * Author: Diego Perini (diego.perini at gmail.com)\n * Summary: cross-browser wrapper for DOMContentLoaded\n * Updated: 20101020\n * License: MIT\n * Version: 1.2\n *\n * URL:\n * http://javascript.nwbox.com/ContentLoaded/\n * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\n */\n// @win window reference\n// @fn function reference\n\nvar contentLoaded = function contentLoaded(win, fn) {\n  var done = false;\n  var top = true;\n  var doc = win.document;\n  var root = doc.documentElement;\n  var add = doc.addEventListener ? \"addEventListener\" : \"attachEvent\";\n  var rem = doc.addEventListener ? \"removeEventListener\" : \"detachEvent\";\n  var pre = doc.addEventListener ? \"\" : \"on\";\n\n  var init = function init(e) {\n    if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\n      return;\n    }\n\n    (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\n\n    if (!done && (done = true)) {\n      return fn.call(win, e.type || e);\n    }\n  };\n\n  var poll = function poll() {\n    try {\n      root.doScroll(\"left\");\n    } catch (e) {\n      setTimeout(poll, 50);\n      return;\n    }\n\n    return init(\"poll\");\n  };\n\n  if (doc.readyState !== \"complete\") {\n    if (doc.createEventObject && root.doScroll) {\n      try {\n        top = !win.frameElement;\n      } catch (error) {}\n\n      if (top) {\n        poll();\n      }\n    }\n\n    doc[add](pre + \"DOMContentLoaded\", init, false);\n    doc[add](pre + \"readystatechange\", init, false);\n    return win[add](pre + \"load\", init, false);\n  }\n}; // As a single function to be able to write tests.\n\n\nDropzone._autoDiscoverFunction = function () {\n  if (Dropzone.autoDiscover) {\n    return Dropzone.discover();\n  }\n};\n\ncontentLoaded(window, Dropzone._autoDiscoverFunction);\n\nfunction __guard__(value, transform) {\n  return typeof value !== 'undefined' && value !== null ? transform(value) : undefined;\n}\n\nfunction __guardMethod__(obj, methodName, transform) {\n  if (typeof obj !== 'undefined' && obj !== null && typeof obj[methodName] === 'function') {\n    return transform(obj, methodName);\n  } else {\n    return undefined;\n  }\n}\n","/* @license\nPapa Parse\nv5.4.1\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n!function(e,t){\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof module&&\"undefined\"!=typeof exports?module.exports=t():e.Papa=t()}(this,function s(){\"use strict\";var f=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==f?f:{};var n=!f.document&&!!f.postMessage,o=f.IS_PAPA_WORKER||!1,a={},u=0,b={parse:function(e,t){var r=(t=t||{}).dynamicTyping||!1;J(r)&&(t.dynamicTypingFunction=r,r={});if(t.dynamicTyping=r,t.transform=!!J(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var i=function(){if(!b.WORKERS_SUPPORTED)return!1;var e=(r=f.URL||f.webkitURL||null,i=s.toString(),b.BLOB_URL||(b.BLOB_URL=r.createObjectURL(new Blob([\"var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; \",\"(\",i,\")();\"],{type:\"text/javascript\"})))),t=new f.Worker(e);var r,i;return t.onmessage=_,t.id=u++,a[t.id]=t}();return i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=J(t.step),t.chunk=J(t.chunk),t.complete=J(t.complete),t.error=J(t.error),delete t.worker,void i.postMessage({input:e,config:t,workerId:i.id})}var n=null;b.NODE_STREAM_INPUT,\"string\"==typeof e?(e=function(e){if(65279===e.charCodeAt(0))return e.slice(1);return e}(e),n=t.download?new l(t):new p(t)):!0===e.readable&&J(e.read)&&J(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t));return n.stream(e)},unparse:function(e,t){var n=!1,_=!0,m=\",\",y=\"\\r\\n\",s='\"',a=s+s,r=!1,i=null,o=!1;!function(){if(\"object\"!=typeof t)return;\"string\"!=typeof t.delimiter||b.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(m=t.delimiter);(\"boolean\"==typeof t.quotes||\"function\"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes);\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(r=t.skipEmptyLines);\"string\"==typeof t.newline&&(y=t.newline);\"string\"==typeof t.quoteChar&&(s=t.quoteChar);\"boolean\"==typeof t.header&&(_=t.header);if(Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");i=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s);(\"boolean\"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(o=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\\-@\\t\\r].*$/)}();var u=new RegExp(Q(s),\"g\");\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,r);if(\"object\"==typeof e[0])return h(i||Object.keys(e[0]),e,r)}else if(\"object\"==typeof e)return\"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||i),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:\"object\"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),h(e.fields||[],e.data||[],r);throw new Error(\"Unable to serialize unrecognized input\");function h(e,t,r){var i=\"\";\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(i+=m),i+=v(e[a],a);0<t.length&&(i+=y)}for(var o=0;o<t.length;o++){var u=n?e.length:t[o].length,h=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(r&&!n&&(h=\"greedy\"===r?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===r&&n){for(var d=[],l=0;l<u;l++){var c=s?e[l]:l;d.push(t[o][c])}h=\"\"===d.join(\"\").trim()}if(!h){for(var p=0;p<u;p++){0<p&&!f&&(i+=m);var g=n&&s?e[p]:p;i+=v(t[o][g],p)}o<t.length-1&&(!r||0<u&&!f)&&(i+=y)}}return i}function v(e,t){if(null==e)return\"\";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var r=!1;o&&\"string\"==typeof e&&o.test(e)&&(e=\"'\"+e,r=!0);var i=e.toString().replace(u,a);return(r=r||!0===n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(i,b.BAD_DELIMITERS)||-1<i.indexOf(m)||\" \"===i.charAt(0)||\" \"===i.charAt(i.length-1))?s+i+s:i}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK=\"\\ufeff\",b.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=\",\",b.Parser=E,b.ParserHandle=r,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var r=o.config||{},u=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)u.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},r)})}),e(),this;function e(){if(0!==u.length){var e,t,r,i,n=u[0];if(J(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,r=n.inputElem,i=s.reason,void(J(o.error)&&o.error({name:e},t,r,i));if(\"skip\"===s.action)return void h();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if(\"skip\"===s)return void h()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){J(a)&&a(e,n.file,n.inputElem),h()},b.parse(n.file,n.instanceConfig)}else J(o.complete)&&o.complete()}function h(){u.splice(0,1),e()}}}function h(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=w(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new r(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&J(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(e);void 0!==r&&(e=r)}this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+e;this._partialLine=\"\";var n=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=n.meta.cursor;this._finished||(this._partialLine=i.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)f.postMessage({results:n,workerId:b.WORKER_ID,finished:a});else if(J(this._config.chunk)&&!t){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);n=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!J(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(e){J(this._config.error)?this._config.error(e):o&&this._config.error&&f.postMessage({workerId:b.WORKER_ID,error:e,finished:!1})}}function l(e){var i;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),h.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),n||(i.onload=v(this._chunkLoaded,this),i.onerror=v(this._chunkError,this)),i.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)i.setRequestHeader(t,e[t])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;i.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+r)}try{i.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===i.status&&this._chunkError()}},this._chunkLoaded=function(){4===i.readyState&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:i.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader(\"Content-Range\");if(null===t)return-1;return parseInt(t.substring(t.lastIndexOf(\"/\")+1))}(i),this.parseChunk(i.responseText)))},this._chunkError=function(e){var t=i.statusText||e;this._sendError(new Error(t))}}function c(e){var i,n;(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),h.call(this,e);var s=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((i=new FileReader).onload=v(this._chunkLoaded,this),i.onerror=v(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,t)}var r=i.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(i.error)}}function p(e){var r;h.call(this,e=e||{}),this.stream=function(e){return r=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=r.substring(0,t),r=r.substring(t)):(e=r,r=\"\"),this._finished=!r,this.parseChunk(e)}}}function g(e){h.call(this,e=e||{});var t=[],r=!0,i=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError)},this._checkIsFinished=function(){i&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=v(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=v(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=v(function(){this._streamCleanUp(),i=!0,this._streamData(\"\")},this),this._streamCleanUp=v(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError)},this)}function r(m){var a,o,u,i=Math.pow(2,53),n=-i,s=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)([eE][-+]?\\d+)?\\s*$/,h=/^((\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z)))$/,t=this,r=0,f=0,d=!1,e=!1,l=[],c={data:[],errors:[],meta:{}};if(J(m.step)){var p=m.step;m.step=function(e){if(c=e,_())g();else{if(g(),0===c.data.length)return;r+=e.data.length,m.preview&&r>m.preview?o.abort():(c.data=c.data[0],p(c,t))}}}function y(e){return\"greedy\"===m.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){return c&&u&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+b.DefaultDelimiter+\"'\"),u=!1),m.skipEmptyLines&&(c.data=c.data.filter(function(e){return!y(e)})),_()&&function(){if(!c)return;function e(e,t){J(m.transformHeader)&&(e=m.transformHeader(e,t)),l.push(e)}if(Array.isArray(c.data[0])){for(var t=0;_()&&t<c.data.length;t++)c.data[t].forEach(e);c.data.splice(0,1)}else c.data.forEach(e)}(),function(){if(!c||!m.header&&!m.dynamicTyping&&!m.transform)return c;function e(e,t){var r,i=m.header?{}:[];for(r=0;r<e.length;r++){var n=r,s=e[r];m.header&&(n=r>=l.length?\"__parsed_extra\":l[r]),m.transform&&(s=m.transform(s,n)),s=v(n,s),\"__parsed_extra\"===n?(i[n]=i[n]||[],i[n].push(s)):i[n]=s}return m.header&&(r>l.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+l.length+\" fields but parsed \"+r,f+t):r<l.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+l.length+\" fields but parsed \"+r,f+t)),i}var t=1;!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(e),t=c.data.length):c.data=e(c.data,0);m.header&&c.meta&&(c.meta.fields=l);return f+=t,c}()}function _(){return m.header&&0===l.length}function v(e,t){return r=e,m.dynamicTypingFunction&&void 0===m.dynamicTyping[r]&&(m.dynamicTyping[r]=m.dynamicTypingFunction(r)),!0===(m.dynamicTyping[r]||m.dynamicTyping)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&(function(e){if(s.test(e)){var t=parseFloat(e);if(n<t&&t<i)return!0}return!1}(t)?parseFloat(t):h.test(t)?new Date(t):\"\"===t?null:t):t;var r}function k(e,t,r,i){var n={type:e,code:t,message:r};void 0!==i&&(n.row=i),c.errors.push(n)}this.parse=function(e,t,r){var i=m.quoteChar||'\"';if(m.newline||(m.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(Q(t)+\"([^]*?)\"+Q(t),\"gm\"),i=(e=e.replace(r,\"\")).split(\"\\r\"),n=e.split(\"\\n\"),s=1<n.length&&n[0].length<i[0].length;if(1===i.length||s)return\"\\n\";for(var a=0,o=0;o<i.length;o++)\"\\n\"===i[o][0]&&a++;return a>=i.length/2?\"\\r\\n\":\"\\r\"}(e,i)),u=!1,m.delimiter)J(m.delimiter)&&(m.delimiter=m.delimiter(e),c.meta.delimiter=m.delimiter);else{var n=function(e,t,r,i,n){var s,a,o,u;n=n||[\",\",\"\\t\",\"|\",\";\",b.RECORD_SEP,b.UNIT_SEP];for(var h=0;h<n.length;h++){var f=n[h],d=0,l=0,c=0;o=void 0;for(var p=new E({comments:i,delimiter:f,newline:t,preview:10}).parse(e),g=0;g<p.data.length;g++)if(r&&y(p.data[g]))c++;else{var _=p.data[g].length;l+=_,void 0!==o?0<_&&(d+=Math.abs(_-o),o=_):o=_}0<p.data.length&&(l/=p.data.length-c),(void 0===a||d<=a)&&(void 0===u||u<l)&&1.99<l&&(a=d,s=f,u=l)}return{successful:!!(m.delimiter=s),bestDelimiter:s}}(e,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess);n.successful?m.delimiter=n.bestDelimiter:(u=!0,m.delimiter=b.DefaultDelimiter),c.meta.delimiter=m.delimiter}var s=w(m);return m.preview&&m.header&&s.preview++,a=e,o=new E(s),c=o.parse(a,t,r),g(),d?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,o.abort(),a=J(m.chunk)?\"\":a.substring(o.getCharIndex())},this.resume=function(){t.streamer._halted?(d=!1,t.streamer.parseChunk(a,!0)):setTimeout(t.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,o.abort(),c.meta.aborted=!0,J(m.complete)&&m.complete(c),a=\"\"}}function Q(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function E(j){var z,M=(j=j||{}).delimiter,P=j.newline,U=j.comments,q=j.step,N=j.preview,B=j.fastMode,K=z=void 0===j.quoteChar||null===j.quoteChar?'\"':j.quoteChar;if(void 0!==j.escapeChar&&(K=j.escapeChar),(\"string\"!=typeof M||-1<b.BAD_DELIMITERS.indexOf(M))&&(M=\",\"),U===M)throw new Error(\"Comment character same as delimiter\");!0===U?U=\"#\":(\"string\"!=typeof U||-1<b.BAD_DELIMITERS.indexOf(U))&&(U=!1),\"\\n\"!==P&&\"\\r\"!==P&&\"\\r\\n\"!==P&&(P=\"\\n\");var W=0,H=!1;this.parse=function(i,t,r){if(\"string\"!=typeof i)throw new Error(\"Input must be a string\");var n=i.length,e=M.length,s=P.length,a=U.length,o=J(q),u=[],h=[],f=[],d=W=0;if(!i)return L();if(j.header&&!t){var l=i.split(P)[0].split(M),c=[],p={},g=!1;for(var _ in l){var m=l[_];J(j.transformHeader)&&(m=j.transformHeader(m,_));var y=m,v=p[m]||0;for(0<v&&(g=!0,y=m+\"_\"+v),p[m]=v+1;c.includes(y);)y=y+\"_\"+v;c.push(y)}if(g){var k=i.split(P);k[0]=c.join(M),i=k.join(P)}}if(B||!1!==B&&-1===i.indexOf(z)){for(var b=i.split(P),E=0;E<b.length;E++){if(f=b[E],W+=f.length,E!==b.length-1)W+=P.length;else if(r)return L();if(!U||f.substring(0,a)!==U){if(o){if(u=[],I(f.split(M)),F(),H)return L()}else I(f.split(M));if(N&&N<=E)return u=u.slice(0,N),L(!0)}}return L()}for(var w=i.indexOf(M,W),R=i.indexOf(P,W),C=new RegExp(Q(K)+Q(z),\"g\"),S=i.indexOf(z,W);;)if(i[W]!==z)if(U&&0===f.length&&i.substring(W,W+a)===U){if(-1===R)return L();W=R+s,R=i.indexOf(P,W),w=i.indexOf(M,W)}else if(-1!==w&&(w<R||-1===R))f.push(i.substring(W,w)),W=w+e,w=i.indexOf(M,W);else{if(-1===R)break;if(f.push(i.substring(W,R)),D(R+s),o&&(F(),H))return L();if(N&&u.length>=N)return L(!0)}else for(S=W,W++;;){if(-1===(S=i.indexOf(z,S+1)))return r||h.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:u.length,index:W}),T();if(S===n-1)return T(i.substring(W,S).replace(C,z));if(z!==K||i[S+1]!==K){if(z===K||0===S||i[S-1]!==K){-1!==w&&w<S+1&&(w=i.indexOf(M,S+1)),-1!==R&&R<S+1&&(R=i.indexOf(P,S+1));var O=A(-1===R?w:Math.min(w,R));if(i.substr(S+1+O,e)===M){f.push(i.substring(W,S).replace(C,z)),i[W=S+1+O+e]!==z&&(S=i.indexOf(z,W)),w=i.indexOf(M,W),R=i.indexOf(P,W);break}var x=A(R);if(i.substring(S+1+x,S+1+x+s)===P){if(f.push(i.substring(W,S).replace(C,z)),D(S+1+x+s),w=i.indexOf(M,W),S=i.indexOf(z,W),o&&(F(),H))return L();if(N&&u.length>=N)return L(!0);break}h.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:u.length,index:W}),S++}}else S++}return T();function I(e){u.push(e),d=W}function A(e){var t=0;if(-1!==e){var r=i.substring(S+1,e);r&&\"\"===r.trim()&&(t=r.length)}return t}function T(e){return r||(void 0===e&&(e=i.substring(W)),f.push(e),W=n,I(f),o&&F()),L()}function D(e){W=e,I(f),f=[],R=i.indexOf(P,W)}function L(e){return{data:u,errors:h,meta:{delimiter:M,linebreak:P,aborted:H,truncated:!!e,cursor:d+(t||0)}}}function F(){q(L()),u=[],h=[]}},this.abort=function(){H=!0},this.getCharIndex=function(){return W}}function _(e){var t=e.data,r=a[t.workerId],i=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){i=!0,m(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(J(r.userStep)){for(var s=0;s<t.results.data.length&&(r.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!i);s++);delete t.results}else J(r.userChunk)&&(r.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!i&&m(t.workerId,t.results)}function m(e,t){var r=a[e];J(r.userComplete)&&r.userComplete(t),r.terminate(),delete a[e]}function y(){throw new Error(\"Not implemented.\")}function w(e){if(\"object\"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=w(e[r]);return t}function v(e,t){return function(){e.apply(t,arguments)}}function J(e){return\"function\"==typeof e}return o&&(f.onmessage=function(e){var t=e.data;void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId);if(\"string\"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var r=b.parse(t.input,t.config);r&&f.postMessage({workerId:b.WORKER_ID,results:r,finished:!0})}}),(l.prototype=Object.create(h.prototype)).constructor=l,(c.prototype=Object.create(h.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(h.prototype)).constructor=g,b});","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof globalThis === \"object\" ? globalThis :\n            typeof global === \"object\" ? global :\n                typeof self === \"object\" ? self :\n                    typeof this === \"object\" ? this :\n                        sloppyModeThis();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect !== \"undefined\") {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter, root);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                if (previous)\n                    previous(key, value);\n            };\n        }\n        function functionThis() {\n            try {\n                return Function(\"return this;\")();\n            }\n            catch (_) { }\n        }\n        function indirectEvalThis() {\n            try {\n                return (void 0, eval)(\"(function() { return this; })()\");\n            }\n            catch (_) { }\n        }\n        function sloppyModeThis() {\n            return functionThis() || indirectEvalThis();\n        }\n    })(function (exporter, root) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var _Map = typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        var registrySymbol = supportsSymbol ? Symbol.for(\"@reflect-metadata:registry\") : undefined;\n        var metadataRegistry = GetOrCreateMetadataRegistry();\n        var metadataProvider = CreateMetadataProvider(metadataRegistry);\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var provider = GetMetadataProvider(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return provider.OrdinaryDeleteMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return ToBoolean(provider.OrdinaryHasOwnMetadata(MetadataKey, O, P));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return;\n            return provider.OrdinaryGetOwnMetadata(MetadataKey, O, P);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ true);\n            provider.OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var provider = GetMetadataProvider(O, P, /*create*/ false);\n            if (!provider) {\n                return [];\n            }\n            return provider.OrdinaryOwnMetadataKeys(O, P);\n        }\n        // 6 ECMAScript Data Types and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        function SameValueZero(x, y) {\n            return x === y || x !== x && y !== y;\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // Global metadata registry\n        // - Allows `import \"reflect-metadata\"` and `import \"reflect-metadata/no-conflict\"` to interoperate.\n        // - Uses isolated metadata if `Reflect` is frozen before the registry can be installed.\n        /**\n         * Creates a registry used to allow multiple `reflect-metadata` providers.\n         */\n        function CreateMetadataRegistry() {\n            var fallback;\n            if (!IsUndefined(registrySymbol) &&\n                typeof root.Reflect !== \"undefined\" &&\n                !(registrySymbol in root.Reflect) &&\n                typeof root.Reflect.defineMetadata === \"function\") {\n                // interoperate with older version of `reflect-metadata` that did not support a registry.\n                fallback = CreateFallbackProvider(root.Reflect);\n            }\n            var first;\n            var second;\n            var rest;\n            var targetProviderMap = new _WeakMap();\n            var registry = {\n                registerProvider: registerProvider,\n                getProvider: getProvider,\n                setProvider: setProvider,\n            };\n            return registry;\n            function registerProvider(provider) {\n                if (!Object.isExtensible(registry)) {\n                    throw new Error(\"Cannot add provider to a frozen registry.\");\n                }\n                switch (true) {\n                    case fallback === provider: break;\n                    case IsUndefined(first):\n                        first = provider;\n                        break;\n                    case first === provider: break;\n                    case IsUndefined(second):\n                        second = provider;\n                        break;\n                    case second === provider: break;\n                    default:\n                        if (rest === undefined)\n                            rest = new _Set();\n                        rest.add(provider);\n                        break;\n                }\n            }\n            function getProviderNoCache(O, P) {\n                if (!IsUndefined(first)) {\n                    if (first.isProviderFor(O, P))\n                        return first;\n                    if (!IsUndefined(second)) {\n                        if (second.isProviderFor(O, P))\n                            return first;\n                        if (!IsUndefined(rest)) {\n                            var iterator = GetIterator(rest);\n                            while (true) {\n                                var next = IteratorStep(iterator);\n                                if (!next) {\n                                    return undefined;\n                                }\n                                var provider = IteratorValue(next);\n                                if (provider.isProviderFor(O, P)) {\n                                    IteratorClose(iterator);\n                                    return provider;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!IsUndefined(fallback) && fallback.isProviderFor(O, P)) {\n                    return fallback;\n                }\n                return undefined;\n            }\n            function getProvider(O, P) {\n                var providerMap = targetProviderMap.get(O);\n                var provider;\n                if (!IsUndefined(providerMap)) {\n                    provider = providerMap.get(P);\n                }\n                if (!IsUndefined(provider)) {\n                    return provider;\n                }\n                provider = getProviderNoCache(O, P);\n                if (!IsUndefined(provider)) {\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return provider;\n            }\n            function hasProvider(provider) {\n                if (IsUndefined(provider))\n                    throw new TypeError();\n                return first === provider || second === provider || !IsUndefined(rest) && rest.has(provider);\n            }\n            function setProvider(O, P, provider) {\n                if (!hasProvider(provider)) {\n                    throw new Error(\"Metadata provider not registered.\");\n                }\n                var existingProvider = getProvider(O, P);\n                if (existingProvider !== provider) {\n                    if (!IsUndefined(existingProvider)) {\n                        return false;\n                    }\n                    var providerMap = targetProviderMap.get(O);\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return true;\n            }\n        }\n        /**\n         * Gets or creates the shared registry of metadata providers.\n         */\n        function GetOrCreateMetadataRegistry() {\n            var metadataRegistry;\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                metadataRegistry = root.Reflect[registrySymbol];\n            }\n            if (IsUndefined(metadataRegistry)) {\n                metadataRegistry = CreateMetadataRegistry();\n            }\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                Object.defineProperty(root.Reflect, registrySymbol, {\n                    enumerable: false,\n                    configurable: false,\n                    writable: false,\n                    value: metadataRegistry\n                });\n            }\n            return metadataRegistry;\n        }\n        function CreateMetadataProvider(registry) {\n            // [[Metadata]] internal slot\n            // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n            var metadata = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var targetMetadata = metadata.get(O);\n                    if (IsUndefined(targetMetadata))\n                        return false;\n                    return targetMetadata.has(P);\n                },\n                OrdinaryDefineOwnMetadata: OrdinaryDefineOwnMetadata,\n                OrdinaryHasOwnMetadata: OrdinaryHasOwnMetadata,\n                OrdinaryGetOwnMetadata: OrdinaryGetOwnMetadata,\n                OrdinaryOwnMetadataKeys: OrdinaryOwnMetadataKeys,\n                OrdinaryDeleteMetadata: OrdinaryDeleteMetadata,\n            };\n            metadataRegistry.registerProvider(provider);\n            return provider;\n            function GetOrCreateMetadataMap(O, P, Create) {\n                var targetMetadata = metadata.get(O);\n                var createdTargetMetadata = false;\n                if (IsUndefined(targetMetadata)) {\n                    if (!Create)\n                        return undefined;\n                    targetMetadata = new _Map();\n                    metadata.set(O, targetMetadata);\n                    createdTargetMetadata = true;\n                }\n                var metadataMap = targetMetadata.get(P);\n                if (IsUndefined(metadataMap)) {\n                    if (!Create)\n                        return undefined;\n                    metadataMap = new _Map();\n                    targetMetadata.set(P, metadataMap);\n                    if (!registry.setProvider(O, P, provider)) {\n                        targetMetadata.delete(P);\n                        if (createdTargetMetadata) {\n                            metadata.delete(O);\n                        }\n                        throw new Error(\"Wrong provider for target.\");\n                    }\n                }\n                return metadataMap;\n            }\n            // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n            function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                return ToBoolean(metadataMap.has(MetadataKey));\n            }\n            // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n            function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return undefined;\n                return metadataMap.get(MetadataKey);\n            }\n            // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n            function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n                metadataMap.set(MetadataKey, MetadataValue);\n            }\n            // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n            function OrdinaryOwnMetadataKeys(O, P) {\n                var keys = [];\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return keys;\n                var keysObj = metadataMap.keys();\n                var iterator = GetIterator(keysObj);\n                var k = 0;\n                while (true) {\n                    var next = IteratorStep(iterator);\n                    if (!next) {\n                        keys.length = k;\n                        return keys;\n                    }\n                    var nextValue = IteratorValue(next);\n                    try {\n                        keys[k] = nextValue;\n                    }\n                    catch (e) {\n                        try {\n                            IteratorClose(iterator);\n                        }\n                        finally {\n                            throw e;\n                        }\n                    }\n                    k++;\n                }\n            }\n            function OrdinaryDeleteMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                if (!metadataMap.delete(MetadataKey))\n                    return false;\n                if (metadataMap.size === 0) {\n                    var targetMetadata = metadata.get(O);\n                    if (!IsUndefined(targetMetadata)) {\n                        targetMetadata.delete(P);\n                        if (targetMetadata.size === 0) {\n                            metadata.delete(targetMetadata);\n                        }\n                    }\n                }\n                return true;\n            }\n        }\n        function CreateFallbackProvider(reflect) {\n            var defineMetadata = reflect.defineMetadata, hasOwnMetadata = reflect.hasOwnMetadata, getOwnMetadata = reflect.getOwnMetadata, getOwnMetadataKeys = reflect.getOwnMetadataKeys, deleteMetadata = reflect.deleteMetadata;\n            var metadataOwner = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var metadataPropertySet = metadataOwner.get(O);\n                    if (!IsUndefined(metadataPropertySet) && metadataPropertySet.has(P)) {\n                        return true;\n                    }\n                    if (getOwnMetadataKeys(O, P).length) {\n                        if (IsUndefined(metadataPropertySet)) {\n                            metadataPropertySet = new _Set();\n                            metadataOwner.set(O, metadataPropertySet);\n                        }\n                        metadataPropertySet.add(P);\n                        return true;\n                    }\n                    return false;\n                },\n                OrdinaryDefineOwnMetadata: defineMetadata,\n                OrdinaryHasOwnMetadata: hasOwnMetadata,\n                OrdinaryGetOwnMetadata: getOwnMetadata,\n                OrdinaryOwnMetadataKeys: getOwnMetadataKeys,\n                OrdinaryDeleteMetadata: deleteMetadata,\n            };\n            return provider;\n        }\n        /**\n         * Gets the metadata provider for an object. If the object has no metadata provider and this is for a create operation,\n         * then this module's metadata provider is assigned to the object.\n         */\n        function GetMetadataProvider(O, P, Create) {\n            var registeredProvider = metadataRegistry.getProvider(O, P);\n            if (!IsUndefined(registeredProvider)) {\n                return registeredProvider;\n            }\n            if (Create) {\n                if (metadataRegistry.setProvider(O, P, metadataProvider)) {\n                    return metadataProvider;\n                }\n                throw new Error(\"Illegal state.\");\n            }\n            return undefined;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            var Map = /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (SameValueZero(key, this._cacheKey)) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (!SameValueZero(this._cacheKey, key)) {\n                        this._cacheIndex = -1;\n                        for (var i = 0; i < this._keys.length; i++) {\n                            if (SameValueZero(this._keys[i], key)) {\n                                this._cacheIndex = i;\n                                break;\n                            }\n                        }\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            return Map;\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            var Set = /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.keys(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n            return Set;\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    var array = new Uint8Array(size);\n                    if (typeof crypto !== \"undefined\") {\n                        crypto.getRandomValues(array);\n                    }\n                    else if (typeof msCrypto !== \"undefined\") {\n                        msCrypto.getRandomValues(array);\n                    }\n                    else {\n                        FillRandomBytes(array, size);\n                    }\n                    return array;\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","import * as i0 from '@angular/core';\nimport { InjectionToken, inject, ElementRef, ANIMATION_MODULE_TYPE, numberAttribute, Component, ChangeDetectionStrategy, ViewEncapsulation, Input, ViewChild, NgModule } from '@angular/core';\nimport { NgTemplateOutlet } from '@angular/common';\nimport { MatCommonModule } from '@angular/material/core';\n\n/** Injection token to be used to override the default options for `mat-progress-spinner`. */\nconst MAT_PROGRESS_SPINNER_DEFAULT_OPTIONS = new InjectionToken('mat-progress-spinner-default-options', {\n    providedIn: 'root',\n    factory: MAT_PROGRESS_SPINNER_DEFAULT_OPTIONS_FACTORY,\n});\n/** @docs-private */\nfunction MAT_PROGRESS_SPINNER_DEFAULT_OPTIONS_FACTORY() {\n    return { diameter: BASE_SIZE };\n}\n/**\n * Base reference size of the spinner.\n */\nconst BASE_SIZE = 100;\n/**\n * Base reference stroke width of the spinner.\n */\nconst BASE_STROKE_WIDTH = 10;\nclass MatProgressSpinner {\n    _elementRef = inject(ElementRef);\n    /** Whether the _mat-animation-noopable class should be applied, disabling animations.  */\n    _noopAnimations;\n    // TODO: should be typed as `ThemePalette` but internal apps pass in arbitrary strings.\n    /**\n     * Theme color of the progress spinner. This API is supported in M2 themes only, it\n     * has no effect in M3 themes.\n     *\n     * For information on applying color variants in M3, see\n     * https://material.angular.io/guide/theming#using-component-color-variants.\n     */\n    get color() {\n        return this._color || this._defaultColor;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    _color;\n    _defaultColor = 'primary';\n    /** The element of the determinate spinner. */\n    _determinateCircle;\n    constructor() {\n        const animationMode = inject(ANIMATION_MODULE_TYPE, { optional: true });\n        const defaults = inject(MAT_PROGRESS_SPINNER_DEFAULT_OPTIONS);\n        this._noopAnimations =\n            animationMode === 'NoopAnimations' && !!defaults && !defaults._forceAnimations;\n        this.mode =\n            this._elementRef.nativeElement.nodeName.toLowerCase() === 'mat-spinner'\n                ? 'indeterminate'\n                : 'determinate';\n        if (defaults) {\n            if (defaults.color) {\n                this.color = this._defaultColor = defaults.color;\n            }\n            if (defaults.diameter) {\n                this.diameter = defaults.diameter;\n            }\n            if (defaults.strokeWidth) {\n                this.strokeWidth = defaults.strokeWidth;\n            }\n        }\n    }\n    /**\n     * Mode of the progress bar.\n     *\n     * Input must be one of these values: determinate, indeterminate, buffer, query, defaults to\n     * 'determinate'.\n     * Mirrored to mode attribute.\n     */\n    mode;\n    /** Value of the progress bar. Defaults to zero. Mirrored to aria-valuenow. */\n    get value() {\n        return this.mode === 'determinate' ? this._value : 0;\n    }\n    set value(v) {\n        this._value = Math.max(0, Math.min(100, v || 0));\n    }\n    _value = 0;\n    /** The diameter of the progress spinner (will set width and height of svg). */\n    get diameter() {\n        return this._diameter;\n    }\n    set diameter(size) {\n        this._diameter = size || 0;\n    }\n    _diameter = BASE_SIZE;\n    /** Stroke width of the progress spinner. */\n    get strokeWidth() {\n        return this._strokeWidth ?? this.diameter / 10;\n    }\n    set strokeWidth(value) {\n        this._strokeWidth = value || 0;\n    }\n    _strokeWidth;\n    /** The radius of the spinner, adjusted for stroke width. */\n    _circleRadius() {\n        return (this.diameter - BASE_STROKE_WIDTH) / 2;\n    }\n    /** The view box of the spinner's svg element. */\n    _viewBox() {\n        const viewBox = this._circleRadius() * 2 + this.strokeWidth;\n        return `0 0 ${viewBox} ${viewBox}`;\n    }\n    /** The stroke circumference of the svg circle. */\n    _strokeCircumference() {\n        return 2 * Math.PI * this._circleRadius();\n    }\n    /** The dash offset of the svg circle. */\n    _strokeDashOffset() {\n        if (this.mode === 'determinate') {\n            return (this._strokeCircumference() * (100 - this._value)) / 100;\n        }\n        return null;\n    }\n    /** Stroke width of the circle in percent. */\n    _circleStrokeWidth() {\n        return (this.strokeWidth / this.diameter) * 100;\n    }\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatProgressSpinner, deps: [], target: i0.FactoryTarget.Component });\n    static cmp = i0.ngDeclareComponent({ minVersion: \"16.1.0\", version: \"19.0.0\", type: MatProgressSpinner, isStandalone: true, selector: \"mat-progress-spinner, mat-spinner\", inputs: { color: \"color\", mode: \"mode\", value: [\"value\", \"value\", numberAttribute], diameter: [\"diameter\", \"diameter\", numberAttribute], strokeWidth: [\"strokeWidth\", \"strokeWidth\", numberAttribute] }, host: { attributes: { \"role\": \"progressbar\", \"tabindex\": \"-1\" }, properties: { \"class\": \"\\\"mat-\\\" + color\", \"class._mat-animation-noopable\": \"_noopAnimations\", \"class.mdc-circular-progress--indeterminate\": \"mode === \\\"indeterminate\\\"\", \"style.width.px\": \"diameter\", \"style.height.px\": \"diameter\", \"style.--mdc-circular-progress-size\": \"diameter + \\\"px\\\"\", \"style.--mdc-circular-progress-active-indicator-width\": \"diameter + \\\"px\\\"\", \"attr.aria-valuemin\": \"0\", \"attr.aria-valuemax\": \"100\", \"attr.aria-valuenow\": \"mode === \\\"determinate\\\" ? value : null\", \"attr.mode\": \"mode\" }, classAttribute: \"mat-mdc-progress-spinner mdc-circular-progress\" }, viewQueries: [{ propertyName: \"_determinateCircle\", first: true, predicate: [\"determinateSpinner\"], descendants: true }], exportAs: [\"matProgressSpinner\"], ngImport: i0, template: \"<ng-template #circle>\\n  <svg [attr.viewBox]=\\\"_viewBox()\\\" class=\\\"mdc-circular-progress__indeterminate-circle-graphic\\\"\\n       xmlns=\\\"http://www.w3.org/2000/svg\\\" focusable=\\\"false\\\">\\n    <circle [attr.r]=\\\"_circleRadius()\\\"\\n            [style.stroke-dasharray.px]=\\\"_strokeCircumference()\\\"\\n            [style.stroke-dashoffset.px]=\\\"_strokeCircumference() / 2\\\"\\n            [style.stroke-width.%]=\\\"_circleStrokeWidth()\\\"\\n            cx=\\\"50%\\\" cy=\\\"50%\\\"/>\\n  </svg>\\n</ng-template>\\n\\n<!--\\n  All children need to be hidden for screen readers in order to support ChromeVox.\\n  More context in the issue: https://github.com/angular/components/issues/22165.\\n-->\\n<div class=\\\"mdc-circular-progress__determinate-container\\\" aria-hidden=\\\"true\\\" #determinateSpinner>\\n  <svg [attr.viewBox]=\\\"_viewBox()\\\" class=\\\"mdc-circular-progress__determinate-circle-graphic\\\"\\n       xmlns=\\\"http://www.w3.org/2000/svg\\\" focusable=\\\"false\\\">\\n    <circle [attr.r]=\\\"_circleRadius()\\\"\\n            [style.stroke-dasharray.px]=\\\"_strokeCircumference()\\\"\\n            [style.stroke-dashoffset.px]=\\\"_strokeDashOffset()\\\"\\n            [style.stroke-width.%]=\\\"_circleStrokeWidth()\\\"\\n            class=\\\"mdc-circular-progress__determinate-circle\\\"\\n            cx=\\\"50%\\\" cy=\\\"50%\\\"/>\\n  </svg>\\n</div>\\n<!--TODO: figure out why there are 3 separate svgs-->\\n<div class=\\\"mdc-circular-progress__indeterminate-container\\\" aria-hidden=\\\"true\\\">\\n  <div class=\\\"mdc-circular-progress__spinner-layer\\\">\\n    <div class=\\\"mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left\\\">\\n      <ng-container [ngTemplateOutlet]=\\\"circle\\\"></ng-container>\\n    </div>\\n    <div class=\\\"mdc-circular-progress__gap-patch\\\">\\n      <ng-container [ngTemplateOutlet]=\\\"circle\\\"></ng-container>\\n    </div>\\n    <div class=\\\"mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right\\\">\\n      <ng-container [ngTemplateOutlet]=\\\"circle\\\"></ng-container>\\n    </div>\\n  </div>\\n</div>\\n\", styles: [\".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}\"], dependencies: [{ kind: \"directive\", type: NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\", \"ngTemplateOutletInjector\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatProgressSpinner, decorators: [{\n            type: Component,\n            args: [{ selector: 'mat-progress-spinner, mat-spinner', exportAs: 'matProgressSpinner', host: {\n                        'role': 'progressbar',\n                        'class': 'mat-mdc-progress-spinner mdc-circular-progress',\n                        // set tab index to -1 so screen readers will read the aria-label\n                        // Note: there is a known issue with JAWS that does not read progressbar aria labels on FireFox\n                        'tabindex': '-1',\n                        '[class]': '\"mat-\" + color',\n                        '[class._mat-animation-noopable]': `_noopAnimations`,\n                        '[class.mdc-circular-progress--indeterminate]': 'mode === \"indeterminate\"',\n                        '[style.width.px]': 'diameter',\n                        '[style.height.px]': 'diameter',\n                        '[style.--mdc-circular-progress-size]': 'diameter + \"px\"',\n                        '[style.--mdc-circular-progress-active-indicator-width]': 'diameter + \"px\"',\n                        '[attr.aria-valuemin]': '0',\n                        '[attr.aria-valuemax]': '100',\n                        '[attr.aria-valuenow]': 'mode === \"determinate\" ? value : null',\n                        '[attr.mode]': 'mode',\n                    }, changeDetection: ChangeDetectionStrategy.OnPush, encapsulation: ViewEncapsulation.None, imports: [NgTemplateOutlet], template: \"<ng-template #circle>\\n  <svg [attr.viewBox]=\\\"_viewBox()\\\" class=\\\"mdc-circular-progress__indeterminate-circle-graphic\\\"\\n       xmlns=\\\"http://www.w3.org/2000/svg\\\" focusable=\\\"false\\\">\\n    <circle [attr.r]=\\\"_circleRadius()\\\"\\n            [style.stroke-dasharray.px]=\\\"_strokeCircumference()\\\"\\n            [style.stroke-dashoffset.px]=\\\"_strokeCircumference() / 2\\\"\\n            [style.stroke-width.%]=\\\"_circleStrokeWidth()\\\"\\n            cx=\\\"50%\\\" cy=\\\"50%\\\"/>\\n  </svg>\\n</ng-template>\\n\\n<!--\\n  All children need to be hidden for screen readers in order to support ChromeVox.\\n  More context in the issue: https://github.com/angular/components/issues/22165.\\n-->\\n<div class=\\\"mdc-circular-progress__determinate-container\\\" aria-hidden=\\\"true\\\" #determinateSpinner>\\n  <svg [attr.viewBox]=\\\"_viewBox()\\\" class=\\\"mdc-circular-progress__determinate-circle-graphic\\\"\\n       xmlns=\\\"http://www.w3.org/2000/svg\\\" focusable=\\\"false\\\">\\n    <circle [attr.r]=\\\"_circleRadius()\\\"\\n            [style.stroke-dasharray.px]=\\\"_strokeCircumference()\\\"\\n            [style.stroke-dashoffset.px]=\\\"_strokeDashOffset()\\\"\\n            [style.stroke-width.%]=\\\"_circleStrokeWidth()\\\"\\n            class=\\\"mdc-circular-progress__determinate-circle\\\"\\n            cx=\\\"50%\\\" cy=\\\"50%\\\"/>\\n  </svg>\\n</div>\\n<!--TODO: figure out why there are 3 separate svgs-->\\n<div class=\\\"mdc-circular-progress__indeterminate-container\\\" aria-hidden=\\\"true\\\">\\n  <div class=\\\"mdc-circular-progress__spinner-layer\\\">\\n    <div class=\\\"mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left\\\">\\n      <ng-container [ngTemplateOutlet]=\\\"circle\\\"></ng-container>\\n    </div>\\n    <div class=\\\"mdc-circular-progress__gap-patch\\\">\\n      <ng-container [ngTemplateOutlet]=\\\"circle\\\"></ng-container>\\n    </div>\\n    <div class=\\\"mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right\\\">\\n      <ng-container [ngTemplateOutlet]=\\\"circle\\\"></ng-container>\\n    </div>\\n  </div>\\n</div>\\n\", styles: [\".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}\"] }]\n        }], ctorParameters: () => [], propDecorators: { color: [{\n                type: Input\n            }], _determinateCircle: [{\n                type: ViewChild,\n                args: ['determinateSpinner']\n            }], mode: [{\n                type: Input\n            }], value: [{\n                type: Input,\n                args: [{ transform: numberAttribute }]\n            }], diameter: [{\n                type: Input,\n                args: [{ transform: numberAttribute }]\n            }], strokeWidth: [{\n                type: Input,\n                args: [{ transform: numberAttribute }]\n            }] } });\n/**\n * @deprecated Import Progress Spinner instead. Note that the\n *    `mat-spinner` selector isn't deprecated.\n * @breaking-change 16.0.0\n */\n// tslint:disable-next-line:variable-name\nconst MatSpinner = MatProgressSpinner;\n\nclass MatProgressSpinnerModule {\n    static fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatProgressSpinnerModule, deps: [], target: i0.FactoryTarget.NgModule });\n    static mod = i0.ngDeclareNgModule({ minVersion: \"14.0.0\", version: \"19.0.0\", ngImport: i0, type: MatProgressSpinnerModule, imports: [MatProgressSpinner, MatSpinner], exports: [MatProgressSpinner, MatSpinner, MatCommonModule] });\n    static inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatProgressSpinnerModule, imports: [MatCommonModule] });\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"19.0.0\", ngImport: i0, type: MatProgressSpinnerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [MatProgressSpinner, MatSpinner],\n                    exports: [MatProgressSpinner, MatSpinner, MatCommonModule],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MAT_PROGRESS_SPINNER_DEFAULT_OPTIONS, MAT_PROGRESS_SPINNER_DEFAULT_OPTIONS_FACTORY, MatProgressSpinner, MatProgressSpinnerModule, MatSpinner };\n"],"x_google_ignoreList":[58,68,69,99,100,101,119,138,139,147,236,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407]}