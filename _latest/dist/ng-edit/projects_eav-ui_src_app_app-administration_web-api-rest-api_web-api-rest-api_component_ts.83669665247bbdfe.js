"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts"],{9262:(f,u,n)=>{n.r(u),n.d(u,{WebApiRestApiComponent:()=>s});var h=n(316),o=n(4456),c=n(4175),P=n(3777),O=n(3840),E=n(5175),A=n(5797),m=n(9184),T=n(9996),x=n(7037),D=n(5437),a=n(8559),C=n(5944),l=n(5060);function M(t,p){if(1&t&&(a.j41(0,"mat-option",3),a.EFF(1),a.k0s()),2&t){const i=p.$implicit;a.Y8G("value",i.path),a.R7$(),a.SpI(" ",i.name," ")}}function e(t,p){1&t&&a.Z7z(0,M,2,2,"mat-option",3,a.fX1),2&t&&a.Dyx(p.sort())}let s=(()=>{class t{constructor(i,r,_){this.fb=i,this.router=r,this.route=_,this.sourceService=(0,D.d)(T.F),this.webApis$=new A.t(void 0)}ngOnInit(){this.fetchWebApis(),this.webApiTypeForm=this.fb.group({webApiType:[""]})}fetchWebApis(){this.sourceService.getWebApis().subscribe(i=>{this.webApis$.next(i);const r=this.router.url.split("/");var d=r[r.length-1].replace("%252F","/");const I=i.find(g=>g.path===d);I&&this.webApiTypeForm.get("webApiType").setValue(I.path)})}openRestApi(i){i&&this.router.navigate([encodeURIComponent(i)],{relativeTo:this.route.parent.firstChild})}static#t=this.\u0275fac=function(r){return new(r||t)(a.rXU(o.ok),a.rXU(m.Ix),a.rXU(m.nX))};static#e=this.\u0275cmp=a.VBU({type:t,selectors:[["app-web-api-rest-api"]],standalone:!0,features:[a.aNF],decls:8,vars:4,consts:[[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","webApiType",3,"valueChange"],[3,"value"]],template:function(r,_){if(1&r&&(a.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),a.EFF(3,"Endpoint"),a.k0s(),a.j41(4,"mat-select",2),a.bIt("valueChange",function(I){return _.openRestApi(I)}),a.DNE(5,e,2,0),a.nI1(6,"async"),a.k0s()()(),a.nrm(7,"router-outlet")),2&r){let d;a.Y8G("formGroup",_.webApiTypeForm),a.R7$(5),a.vxM(5,(d=a.bMT(6,2,_.webApis$))?5:-1,d)}},dependencies:[E.Ve,C.rl,C.nJ,E.VO,l.wT,c.Hl,P.Hu,O.m_,o.X1,o.qT,o.BC,o.cb,o.j4,o.JD,h.Jj,m.n3,x.p]})}return t})()},9996:(f,u,n)=>{n.d(u,{F:()=>C});var h=n(271),o=n(8873),c=n(8559),P=n(6443),O=n(4821);const A="admin/AppFiles/asset";let C=(()=>{class l{constructor(e,s,t){this.http=e,this.context=s,this.dnnContext=t}get(e,s,t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(A),{params:{appId:this.context.appId,global:s,...this.templateIdOrPath(e,s,t)}}).pipe((0,h.T)(p=>{if("auto"===p.Type.toLocaleLowerCase())switch(p.Extension.toLocaleLowerCase()){case".cs":case".cshtml":p.Type="Razor";break;case".html":case".css":case".js":p.Type="Token"}return p}))}save(e,s,t,p){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(A),t,{params:{appId:this.context.appId,global:s,...this.templateIdOrPath(e,s,p)}})}getAll(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/AppFiles/AppFiles"),{params:{appId:this.context.appId,...e&&{mask:e}}}).pipe((0,h.T)(({Files:s})=>(s.forEach(t=>{t.Shared??=!1}),s)))}getWebApis(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/ApiExplorer/AppApiFiles"),{params:{appId:this.context.appId}}).pipe((0,h.T)(({files:e})=>(e.forEach(s=>{s.isShared??=!1,s.isCompiled??=!1}),e))).pipe((0,h.T)(e=>e.map(t=>{const p=t.path.lastIndexOf("/"),i=t.path.lastIndexOf("."),r=t.path.substring(0,p),_=t.path.substring(p+1,i);return{path:t.path,folder:r,name:_,isShared:t.isShared,endpointPath:t.endpointPath,isCompiled:t.isCompiled,edition:t.edition}})))}getWebApiDetails(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/ApiExplorer/inspect"),{params:{appId:this.context.appId,zoneId:this.context.zoneId,path:e}})}getPredefinedTemplates(e,s){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/AppFiles/GetTemplates"),{params:{...e&&{purpose:e},...s&&{type:s}}})}getPreview(e,s,t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/AppFiles/preview"),{params:{appId:this.context.appId,path:e,templateKey:t,global:s}})}create(e,s,t){return this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/AppFiles/create"),{},{params:{appId:this.context.appId,global:s,purpose:"auto",path:e,templateKey:t}})}templateIdOrPath(e,s,t){if(/^[0-9]*$/g.test(e)){const p=t.find(i=>i.EntityId?.toString()===e&&i.IsShared===s)?.Path;return{templateId:e,...null!=p&&{path:p}}}return{path:e}}static#t=this.\u0275fac=function(s){return new(s||l)(c.KVO(P.Qq),c.KVO(o.o),c.KVO(O.ob))};static#e=this.\u0275prov=c.jDH({token:l,factory:l.\u0275fac})}return l})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts.83669665247bbdfe.js.map