{"version":3,"mappings":"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","names":["i0","ctx_r15","oxw","ctx_r24","ctx_r34","ctx_r36","ctx_r38","ctx_r39","ctx_r40","SystemInfoComponent","constructor","zoneService","snackBar","dialogService","sxcInsightsService","this","ngOnInit","systemInfoSet$","BehaviorSubject","undefined","languages$","loading$","buildTemplateVars","getSystemInfo","getLanguages","ngOnDestroy","complete","copyToClipboard","text","open","duration","openSiteSettings","sitePrimaryApp","dialogSettings","Context","Site","PrimaryApp","openAppAdministration","ZoneId","AppId","openGlobalSettings","globalPrimaryApp","System","openInsights","window","$2sxc","http","apiUrl","activatePageLog","form","next","pageLogDuration","subscribe","res","document","activeElement","HTMLElement","blur","resetForm","error","systemInfoSet","languages","systemInfos$","pipe","map","label","value","EavVersion","Platform","PlatformVersion","Zones","toString","Fingerprint","License","Owner","link","url","target","siteInfos$","combineLatest","allLanguages","length","activeLanguages","filter","l","IsEnabled","SiteId","Apps","warningIcon$","Messages","WarningsObsolete","WarningsOther","warningInfos$","templateVars$","systemInfos","siteInfos","loading","warningIcon","warningInfos","selectors","ctx_r6","ctx_r8","ctx_r10","AppsListActionsComponent","agInit","params","app","data","refresh","openLightspeed","onOpenLightspeed","flushCache","onFlush","deleteApp","onDelete","AppsListShowComponent","AppsListComponent","router","route","appsListService","context","buildGridOptions","Subject","Subscription","apps$","refreshApps$","startWith","switchMap","getAll","catchError","of","share","refreshOnChildClosed","fabOpen$","subscription","unsubscribe","openChange","browseCatalog","createApp","navigate","relativeTo","firstChild","createInheritedApp","importApp","files","state","result","prompt","Name","Id","delete","alert","flushApp","confirm","Lightspeed","formUrl","convertFormToUrl","items","EntityId","zoneId","openApp","add","events","event","NavigationEnd","snapshot","pairwise","hadChild","hasChild","Object","defaultGridOptions","columnDefs","headerName","field","width","headerClass","cellClass","split","sortable","valueGetter","cellRenderer","IdFieldComponent","cellRendererParams","tooltipGetter","Guid","BooleanFilterComponent","IsHidden","flex","minWidth","sort","onCellClicked","Thumbnail","Folder","Version","Items","pinned","ctx","SiteLanguagesStatusComponent","toggleLanguage","onToggleLanguage","checked","SiteLanguagesComponent","refreshLanguages$","language","enable","Code","Culture","ctx_r4","ctx_r7","FeatureDetailsDialogComponent","dialogData","dialogRef","closeDialog","close","MAT_DIALOG_DATA","FeaturesListEnabledReasonComponent","feature","FeaturesListEnabledComponent","FeaturesStatusComponent","disabled","isDisabled","toggle","nextValue","onToggle","AgGridHeightDirective","elementRef","element","nativeElement","ngOnChanges","changes","itemsCount","style","height","headerHeight","maxRows","rowHeight","extraHeight","LicensesOrderPipe","transform","licenses","Array","isArray","a","b","Priority","pure","ActiveFeaturesCountPipe","license","Features","f","Enabled","ctx_r11","ctx_r14","ctx_r16","LicenseInfoComponent","featuresConfigService","dialog","viewContainerRef","changeDetectorRef","globalConfigService","getDebugEnabled$","licenses$","refreshLicenses$","getLicenses","tap","disabled$","distinctUntilChanged","t","gridRef","_a","api","refreshCells","force","columns","trackLicenses","index","retrieveLicense","info","Success","Message","panelClass","openLicenseUpload","FileUploadDialogComponent","title","description","allowedFileTypes","upload$","uploadLicense","autoFocus","afterClosed","openLicenseRegistration","showFeatureDetails","markForCheck","toggleFeature","enabled","forkJoin","saveFeatures","FeatureGuid","timer","NameId","EnabledReason","expires","Expires","c","startsWith","EnabledStored","AgGridAngular","AppsManagementNavComponent","appDialogConfigService","tabs","indexOf","path","tabIndex","fetchDialogSettings","dialogSettings$","changeTab","getDialogSettings","FieldHintComponent","toggleIsShort","isShort","id","align","tooltip","copy","accentedSort","animateRows","enableCellTextSelection","suppressScrollOnNewData","valueCache","defaultColDef","filterParams","newRowsAction","tooltipShowDelay","tooltipHideDelay","suppressMovableColumns","ToggleDebugDirective","onClick","navigator","platform","match","metaKey","ctrlKey","shiftKey","altKey","toggleDebugEnabled","getSelection","removeAllRanges","str","el","createElement","setAttribute","position","left","body","appendChild","selected","rangeCount","getRangeAt","select","execCommand","removeChild","addRange"],"sources":["./projects/eav-ui/src/app/apps-management/system-info/system-info.component.html","./projects/eav-ui/src/app/apps-management/system-info/system-info.component.ts","./projects/eav-ui/src/app/apps-management/apps-list/apps-list-actions/apps-list-actions.component.html","./projects/eav-ui/src/app/apps-management/apps-list/apps-list-actions/apps-list-actions.component.ts","./projects/eav-ui/src/app/apps-management/apps-list/apps-list-show/apps-list-show.component.ts","./projects/eav-ui/src/app/apps-management/apps-list/apps-list-show/apps-list-show.component.html","./projects/eav-ui/src/app/apps-management/apps-list/apps-list.component.ts","./projects/eav-ui/src/app/apps-management/apps-list/apps-list.component.html","./projects/eav-ui/src/app/apps-management/site-languages/site-languages-status/site-languages-status.component.ts","./projects/eav-ui/src/app/apps-management/site-languages/site-languages-status/site-languages-status.component.html","./projects/eav-ui/src/app/apps-management/site-languages/site-languages.component.ts","./projects/eav-ui/src/app/apps-management/site-languages/site-languages.component.html","./projects/eav-ui/src/app/apps-management/licence-info/feature-details-dialog/feature-details-dialog.component.html","./projects/eav-ui/src/app/apps-management/licence-info/feature-details-dialog/feature-details-dialog.component.ts","./projects/eav-ui/src/app/apps-management/licence-info/features-list-enabled-reason/features-list-enabled-reason.component.ts","./projects/eav-ui/src/app/apps-management/licence-info/features-list-enabled-reason/features-list-enabled-reason.component.html","./projects/eav-ui/src/app/apps-management/licence-info/features-list-enabled/features-list-enabled.component.ts","./projects/eav-ui/src/app/apps-management/licence-info/features-list-enabled/features-list-enabled.component.html","./projects/eav-ui/src/app/apps-management/licence-info/features-status/features-status.component.ts","./projects/eav-ui/src/app/apps-management/licence-info/features-status/features-status.component.html","./projects/eav-ui/src/app/apps-management/licence-info/ag-grid-height.directive.ts","./projects/eav-ui/src/app/apps-management/licence-info/licenses-order.pipe.ts","./projects/eav-ui/src/app/apps-management/licence-info/active-features-count.pipe.ts","./projects/eav-ui/src/app/apps-management/licence-info/license-info.component.html","./projects/eav-ui/src/app/apps-management/licence-info/license-info.component.ts","./projects/eav-ui/src/app/apps-management/apps-management-nav/apps-management-nav.component.html","./projects/eav-ui/src/app/apps-management/apps-management-nav/apps-management-nav.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/components/id-field/id-field.component.ts","./projects/eav-ui/src/app/shared/components/id-field/id-field.component.html","./projects/eav-ui/src/app/shared/constants/default-grid-options.constants.ts","./projects/eav-ui/src/app/shared/directives/toggle-debug.directive.ts","./projects/eav-ui/src/app/shared/helpers/copy-to-clipboard.helper.ts"],"sourcesContent":["<ng-container *ngIf=\"templateVars$ | async as data\">\r\n  <mat-card>\r\n    <mat-card-header>\r\n      <div mat-card-avatar>\r\n        <mat-icon>settings_applications</mat-icon>\r\n      </div>\r\n      <mat-card-title>Platform</mat-card-title>\r\n      <mat-card-subtitle>What you are running</mat-card-subtitle>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <div class=\"info-row\" *ngFor=\"let info of data.systemInfos\">\r\n        <div class=\"info-row__label\">{{ info.label }}</div>\r\n        <div class=\"info-row__value\">\r\n          <span [tippy]=\"info.value\" (click)=\"copyToClipboard(info.value)\">{{ info.value }}</span>\r\n          <ng-container *ngIf=\"info.link\">\r\n            <a class=\"info-row__link\" *ngIf=\"info.link.target === 'angular'\" [routerLink]=\"info.link.url\">{{\r\n              info.link.label }}</a>\r\n            <a class=\"info-row__link\" *ngIf=\"info.link.target !== 'angular'\" [href]=\"info.link.url\"\r\n              [target]=\"info.link.target\">{{ info.link.label }}</a>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n      <div class=\"card-content-separator\"></div>\r\n      <h4>Global Settings</h4>\r\n      <p>\r\n        This includes both pre-defined SystemSettings as well as custom Settings.\r\n        It will affect the entire Installation.\r\n        See <a href=\"http://r.2sxc.org/settings\" target=\"_blank\">docs</a>.\r\n      </p>\r\n      <div class=\"card-actions\">\r\n        <button mat-button (click)=\"openGlobalSettings()\">\r\n          <mat-icon>open_in_new</mat-icon>\r\n          <span>Open Global Settings</span>\r\n        </button>\r\n      </div>\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card>\r\n    <mat-card-header>\r\n      <div mat-card-avatar>\r\n        <mat-icon>public</mat-icon>\r\n      </div>\r\n      <mat-card-title>This Site</mat-card-title>\r\n      <mat-card-subtitle>The current Site you're on</mat-card-subtitle>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <div class=\"info-row\" *ngFor=\"let info of data.siteInfos\">\r\n        <div class=\"info-row__label\">{{ info.label }}</div>\r\n        <div class=\"info-row__value\">\r\n          <span [tippy]=\"info.value\" (click)=\"copyToClipboard(info.value)\">{{ info.value }}</span>\r\n          <ng-container *ngIf=\"info.link\">\r\n            <a class=\"info-row__link\" *ngIf=\"info.link.target === 'angular'\" [routerLink]=\"info.link.url\">{{\r\n              info.link.label\r\n              }}</a>\r\n            <a class=\"info-row__link\" *ngIf=\"info.link.target !== 'angular'\" [href]=\"info.link.url\"\r\n              [target]=\"info.link.target\">{{ info.link.label }}</a>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n      <div class=\"card-content-separator\"></div>\r\n      <h4>Site Settings</h4>\r\n      <p>\r\n        This includes both pre-defined SystemSettings as well as custom Settings.\r\n        It will affect the entire Site / Portal.\r\n        See <a href=\"http://r.2sxc.org/settings\" target=\"_blank\">docs</a>.\r\n      </p>\r\n      <div class=\"card-actions\">\r\n        <button mat-button (click)=\"openSiteSettings()\">\r\n          <mat-icon>open_in_new</mat-icon>\r\n          <span>Open Site Settings</span>\r\n        </button>\r\n      </div>\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card>\r\n    <mat-card-header>\r\n      <div mat-card-avatar>\r\n        <mat-icon>speed</mat-icon>\r\n      </div>\r\n      <mat-card-title>2sxc Insights</mat-card-title>\r\n      <mat-card-subtitle>See what's happening under the hood</mat-card-subtitle>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <h4>2sxc Insights for Super Users</h4>\r\n      <p>\r\n        This is to access a special section to see what is really in the server memory.\r\n        It's intended for extensive debugging - see also\r\n        <a href=\"https://2sxc.org/en/blog/post/using-2sxc-insights\" target=\"_blank\">this blog post</a>.\r\n      </p>\r\n      <div class=\"card-actions\">\r\n        <button mat-button (click)=\"openInsights()\">\r\n          <mat-icon>open_in_new</mat-icon>\r\n          <span>Open 2sxc Insights</span>\r\n        </button>\r\n      </div>\r\n      <div class=\"card-content-separator\"></div>\r\n      <h4>Activate Page Level Logging</h4>\r\n      <form #activateLogForm=\"ngForm\" class=\"activate-log-form\" (ngSubmit)=\"activatePageLog(activateLogForm)\">\r\n        <div>\r\n          This will place insights-logs in the HTML of the user output for users with ?debug=true in the url.\r\n          It can only be activated for short periods of time.\r\n        </div>\r\n        <mat-form-field appearance=\"standard\" color=\"accent\">\r\n          <mat-label>Duration in Minutes</mat-label>\r\n          <input matInput type=\"number\" min=\"0\" required [pattern]=\"positiveWholeNumber\" [(ngModel)]=\"pageLogDuration\"\r\n            name=\"Duration\" #duration=\"ngModel\" [disabled]=\"data.loading\">\r\n        </mat-form-field>\r\n        <ng-container *ngIf=\"duration.touched && duration.errors\">\r\n          <app-field-hint *ngIf=\"duration.errors.pattern\" [isError]=\"true\">\r\n            Only positive whole numbers\r\n          </app-field-hint>\r\n        </ng-container>\r\n        <div class=\"form-actions\">\r\n          <button mat-raised-button type=\"submit\" color=\"accent\" [disabled]=\"!activateLogForm.valid || data.loading\">\r\n            Activate\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card>\r\n    <mat-card-header>\r\n      <div mat-card-avatar>\r\n        <mat-icon>{{ data.warningIcon }}</mat-icon>\r\n      </div>\r\n      <mat-card-title>Warnings</mat-card-title>\r\n      <mat-card-subtitle>System and Code Warnings</mat-card-subtitle>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <div class=\"info-row\" *ngFor=\"let info of data.warningInfos\">\r\n        <div class=\"info-row__label\">{{ info.label }}</div>\r\n        <div class=\"info-row__value\">\r\n          <span [tippy]=\"info.value\" (click)=\"copyToClipboard(info.value)\">{{ info.value }}</span>\r\n          <ng-container *ngIf=\"info.link\">\r\n            <a class=\"info-row__link\" *ngIf=\"info.link.target === 'angular'\" [routerLink]=\"info.link.url\">{{\r\n              info.link.label\r\n              }}</a>\r\n            <a class=\"info-row__link\" *ngIf=\"info.link.target !== 'angular'\" [href]=\"info.link.url\"\r\n              [target]=\"info.link.target\">{{ info.link.label }}</a>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </mat-card-content>\r\n  </mat-card>\r\n</ng-container>\r\n","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject, combineLatest, map, Observable } from 'rxjs';\r\nimport { DialogSettings } from '../../app-administration/models';\r\nimport { copyToClipboard } from '../../shared/helpers/copy-to-clipboard.helper';\r\nimport { EavWindow } from '../../shared/models/eav-window.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { SiteLanguage } from '../models/site-language.model';\r\nimport { SystemInfoSet } from '../models/system-info.model';\r\nimport { SxcInsightsService } from '../services/sxc-insights.service';\r\nimport { ZoneService } from '../services/zone.service';\r\nimport { InfoTemplate, SystemInfoTemplateVars } from './system-info.models';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n@Component({\r\n  selector: 'app-system-info',\r\n  templateUrl: './system-info.component.html',\r\n  styleUrls: ['./system-info.component.scss'],\r\n})\r\nexport class SystemInfoComponent implements OnInit, OnDestroy {\r\n  @Input() dialogSettings: DialogSettings;\r\n\r\n  pageLogDuration: number;\r\n  positiveWholeNumber = /^[1-9][0-9]*$/;\r\n  templateVars$: Observable<SystemInfoTemplateVars>;\r\n\r\n  private systemInfoSet$: BehaviorSubject<SystemInfoSet | undefined>;\r\n  private languages$: BehaviorSubject<SiteLanguage[] | undefined>;\r\n  private loading$: BehaviorSubject<boolean>;\r\n\r\n  constructor(\r\n    private zoneService: ZoneService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n    private sxcInsightsService: SxcInsightsService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.systemInfoSet$ = new BehaviorSubject<SystemInfoSet | undefined>(undefined);\r\n    this.languages$ = new BehaviorSubject<SiteLanguage[] | undefined>(undefined);\r\n    this.loading$ = new BehaviorSubject<boolean>(false);\r\n\r\n    this.buildTemplateVars();\r\n    this.getSystemInfo();\r\n    this.getLanguages();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.systemInfoSet$.complete();\r\n    this.languages$.complete();\r\n    this.loading$.complete();\r\n  }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n\r\n  openSiteSettings(): void {\r\n    const sitePrimaryApp = this.dialogSettings.Context.Site.PrimaryApp;\r\n    this.dialogService.openAppAdministration(sitePrimaryApp.ZoneId, sitePrimaryApp.AppId, 'app');\r\n  }\r\n\r\n  openGlobalSettings(): void {\r\n    const globalPrimaryApp = this.dialogSettings.Context.System.PrimaryApp;\r\n    this.dialogService.openAppAdministration(globalPrimaryApp.ZoneId, globalPrimaryApp.AppId, 'app');\r\n  }\r\n\r\n  openInsights() {\r\n    window.open(window.$2sxc.http.apiUrl('sys/insights/help'), '_blank');\r\n  }\r\n\r\n  activatePageLog(form: NgForm) {\r\n    this.loading$.next(true);\r\n    this.snackBar.open('Activating...');\r\n    this.sxcInsightsService.activatePageLog(this.pageLogDuration).subscribe(res => {\r\n      this.loading$.next(false);\r\n      this.snackBar.open(res, null, { duration: 4000 });\r\n    });\r\n    if (document.activeElement instanceof HTMLElement) {\r\n      document.activeElement.blur();\r\n    }\r\n    form.resetForm();\r\n  }\r\n\r\n  private getSystemInfo(): void {\r\n    this.zoneService.getSystemInfo().subscribe({\r\n      error: () => {\r\n        this.systemInfoSet$.next(undefined);\r\n      },\r\n      next: (systemInfoSet) => {\r\n        this.systemInfoSet$.next(systemInfoSet);\r\n      },\r\n    });\r\n  }\r\n\r\n  private getLanguages(): void {\r\n    this.zoneService.getLanguages().subscribe({\r\n      error: () => {\r\n        this.languages$.next(undefined);\r\n      },\r\n      next: (languages) => {\r\n        this.languages$.next(languages);\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildTemplateVars(): void {\r\n    const systemInfos$ = this.systemInfoSet$.pipe(\r\n      map(systemInfoSet => {\r\n        if (systemInfoSet == null) { return; }\r\n        const info: InfoTemplate[] = [\r\n          { label: 'CMS', value: `2sxc v.${systemInfoSet.System.EavVersion}` },\r\n          { label: 'Platform', value: `${systemInfoSet.System.Platform} v.${systemInfoSet.System.PlatformVersion}` },\r\n          { label: 'Zones', value: systemInfoSet.System.Zones.toString() },\r\n          { label: 'Fingerprint', value: systemInfoSet.System.Fingerprint },\r\n          {\r\n            label: 'Registered to',\r\n            value: systemInfoSet.License.Owner || '(unregistered)',\r\n            link: systemInfoSet.License.Owner\r\n              ? undefined\r\n              : {\r\n                url: `https://patrons.2sxc.org/register?fingerprint=${systemInfoSet.System.Fingerprint}`,\r\n                label: 'register',\r\n                target: '_blank',\r\n              },\r\n          },\r\n        ];\r\n        return info;\r\n      })\r\n    );\r\n    const siteInfos$ = combineLatest([this.systemInfoSet$, this.languages$]).pipe(\r\n      map(([systemInfoSet, languages]) => {\r\n        if (systemInfoSet == null || languages == null) { return; }\r\n        const allLanguages = languages.length;\r\n        const activeLanguages = languages.filter(l => l.IsEnabled).length;\r\n        const info: InfoTemplate[] = [\r\n          { label: 'Zone', value: systemInfoSet.Site.ZoneId.toString() },\r\n          { label: 'Site', value: systemInfoSet.Site.SiteId.toString() },\r\n          {\r\n            label: 'Languages',\r\n            value: `${activeLanguages}/${allLanguages}`,\r\n            link: {\r\n              url: 'languages',\r\n              label: 'manage',\r\n              target: 'angular',\r\n            },\r\n          },\r\n          {\r\n            label: 'Apps',\r\n            value: systemInfoSet.Site.Apps.toString(),\r\n            link: {\r\n              url: 'list',\r\n              label: 'manage',\r\n              target: 'angular',\r\n            },\r\n          },\r\n        ];\r\n        return info;\r\n      })\r\n    );\r\n    const warningIcon$ = this.systemInfoSet$.pipe(\r\n      map(systemInfoSet => {\r\n        if (systemInfoSet == null) { return; }\r\n        if (systemInfoSet.Messages.WarningsObsolete || systemInfoSet.Messages.WarningsOther) {\r\n          return 'warning';\r\n        }\r\n        return 'check';\r\n      }),\r\n    );\r\n    const warningInfos$ = this.systemInfoSet$.pipe(\r\n      map(systemInfoSet => {\r\n        if (systemInfoSet == null) { return; }\r\n        const info: InfoTemplate[] = [\r\n          {\r\n            label: 'Warnings Obsolete',\r\n            value: systemInfoSet.Messages.WarningsObsolete.toString(),\r\n            link: !systemInfoSet.Messages.WarningsObsolete\r\n              ? undefined\r\n              : {\r\n                url: window.$2sxc.http.apiUrl('sys/insights/logs?key=warnings-obsolete'),\r\n                label: 'review',\r\n                target: '_blank',\r\n              },\r\n          },\r\n          {\r\n            label: 'Warnings Other',\r\n            value: systemInfoSet.Messages.WarningsOther.toString(),\r\n            link: !systemInfoSet.Messages.WarningsOther\r\n              ? undefined\r\n              : {\r\n                url: window.$2sxc.http.apiUrl('sys/insights/logs'),\r\n                label: 'review',\r\n                target: '_blank',\r\n              },\r\n          },\r\n        ];\r\n        return info;\r\n      }),\r\n    );\r\n    this.templateVars$ = combineLatest([systemInfos$, siteInfos$, this.loading$, warningIcon$, warningInfos$]).pipe(\r\n      map(([systemInfos, siteInfos, loading, warningIcon, warningInfos]) => {\r\n        const templateVars: SystemInfoTemplateVars = {\r\n          systemInfos,\r\n          siteInfos,\r\n          loading,\r\n          warningIcon,\r\n          warningInfos,\r\n        };\r\n        return templateVars;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button icon\"\r\n    [tippy]=\"app.IsGlobal ? 'This app is global' : app.IsInherited ? 'This app is inherited' : ''\"\r\n    [tippyDisabled]=\"!app.IsGlobal && !app.IsInherited\">\r\n    <mat-icon *ngIf=\"app.IsGlobal\">foundation</mat-icon>\r\n    <mat-icon *ngIf=\"app.IsInherited\">holiday_village</mat-icon>\r\n  </div>\r\n  <div class=\"like-button\" *ngIf=\"app.Lightspeed?.IsEnabled\" matRipple [tippy]=\"app.Lightspeed.Title\"\r\n    (click)=\"openLightspeed()\">\r\n    <mat-icon>bolt</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" tippy=\"Lightspeed is disabled\" *ngIf=\"!app.Lightspeed?.IsEnabled\">\r\n    <mat-icon>bolt</mat-icon>\r\n  </div>\r\n  <div class=\"like-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"flushCache()\">\r\n      <mat-icon>cached</mat-icon>\r\n      <span>Flush cache</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"!app.IsApp\" (click)=\"deleteApp()\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { App } from '../../models/app.model';\r\nimport { AppsListActionsParams } from './apps-list-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-apps-list-actions',\r\n  templateUrl: './apps-list-actions.component.html',\r\n  styleUrls: ['./apps-list-actions.component.scss'],\r\n})\r\nexport class AppsListActionsComponent implements ICellRendererAngularComp {\r\n  app: App;\r\n\r\n  private params: ICellRendererParams & AppsListActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & AppsListActionsParams): void {\r\n    this.params = params;\r\n    this.app = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openLightspeed(): void {\r\n    this.params.onOpenLightspeed(this.app);\r\n  }\r\n\r\n  flushCache(): void {\r\n    this.params.onFlush(this.app);\r\n  }\r\n\r\n  deleteApp(): void {\r\n    this.params.onDelete(this.app);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-apps-list-show',\r\n  templateUrl: './apps-list-show.component.html',\r\n  styleUrls: ['./apps-list-show.component.scss'],\r\n})\r\nexport class AppsListShowComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams): void {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <div class=\"like-button icon\" [tippy]=\"value ? 'Show this app to users' : 'Don\\'t show this app to users'\">\r\n    <mat-icon>{{ value ? 'visibility' : 'visibility_off' }}</mat-icon>\r\n  </div>\r\n</div>\r\n","import { GridOptions, ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, catchError, filter, map, Observable, of, pairwise, share, startWith, Subject, Subscription, switchMap } from 'rxjs';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { Context } from '../../shared/services/context';\r\nimport { App } from '../models/app.model';\r\nimport { AppsListService } from '../services/apps-list.service';\r\nimport { AppsListActionsComponent } from './apps-list-actions/apps-list-actions.component';\r\nimport { AppsListActionsParams } from './apps-list-actions/apps-list-actions.models';\r\nimport { AppsListShowComponent } from './apps-list-show/apps-list-show.component';\r\n\r\n@Component({\r\n  selector: 'app-apps-list',\r\n  templateUrl: './apps-list.component.html',\r\n  styleUrls: ['./apps-list.component.scss'],\r\n})\r\nexport class AppsListComponent implements OnInit, OnDestroy {\r\n  apps$: Observable<App[]>;\r\n  fabOpen$ = new BehaviorSubject(false);\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private refreshApps$ = new Subject<void>();\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private appsListService: AppsListService,\r\n    private snackBar: MatSnackBar,\r\n    private context: Context,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.apps$ = this.refreshApps$.pipe(\r\n      startWith(undefined),\r\n      switchMap(() => this.appsListService.getAll().pipe(catchError(() => of(undefined)))),\r\n      share(),\r\n    );\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.fabOpen$.complete();\r\n    this.refreshApps$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  openChange(open: boolean): void {\r\n    this.fabOpen$.next(open);\r\n  }\r\n\r\n  browseCatalog(): void {\r\n    window.open('https://2sxc.org/apps', '_blank');\r\n  }\r\n\r\n  createApp(): void {\r\n    this.router.navigate(['create'], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  createInheritedApp(): void {\r\n    this.router.navigate(['create-inherited'], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  importApp(files?: File[]): void {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: dialogData });\r\n  }\r\n\r\n  private deleteApp(app: App): void {\r\n    const result = prompt(`This cannot be undone. To really delete this app, type 'yes!' or type/paste the app-name here. Are you sure want to delete '${app.Name}' (${app.Id})?`);\r\n    if (result === null) { return; }\r\n    if (result === app.Name || result === 'yes!') {\r\n      this.snackBar.open('Deleting...');\r\n      this.appsListService.delete(app.Id).subscribe({\r\n        error: () => {\r\n          this.snackBar.open('Delete failed. Please check console for more information', undefined, { duration: 3000 });\r\n          this.refreshApps$.next();\r\n        },\r\n        next: () => {\r\n          this.snackBar.open('Deleted', undefined, { duration: 2000 });\r\n          this.refreshApps$.next();\r\n        },\r\n      });\r\n    } else {\r\n      alert('Input did not match - will not delete');\r\n    }\r\n  }\r\n\r\n  private flushApp(app: App): void {\r\n    if (!confirm(`Flush the App Cache for ${app.Name} (${app.Id})?`)) { return; }\r\n    this.snackBar.open('Flushing cache...');\r\n    this.appsListService.flushCache(app.Id).subscribe({\r\n      error: () => {\r\n        this.snackBar.open('Cache flush failed. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.snackBar.open('Cache flushed', undefined, { duration: 2000 });\r\n      },\r\n    });\r\n  }\r\n\r\n  private openLightspeed(app: App): void {\r\n    if (!app.Lightspeed) { return; }\r\n    const form: EditForm = { items: [{ EntityId: app.Lightspeed.Id }] };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`${this.context.zoneId}/${app.Id}/edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openApp(app: App): void {\r\n    this.router.navigate([app.Id.toString()], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private refreshOnChildClosed(): void {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.refreshApps$.next();\r\n      })\r\n    );\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'id-action no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<App> = {\r\n              tooltipGetter: (app) => `ID: ${app.Id}\\nGUID: ${app.Guid}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Show',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'icons no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return !app.IsHidden;\r\n          },\r\n          cellRenderer: AppsListShowComponent,\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'apps-list-primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Name;\r\n          },\r\n          onCellClicked: (params) => {\r\n            const app: App = params.data;\r\n            this.openApp(app);\r\n          },\r\n          cellRenderer: (params: ICellRendererParams) => {\r\n            const app: App = params.data;\r\n            return `\r\n            <div class=\"container\">\r\n              ${app.Thumbnail\r\n                ? `<img class=\"image logo\" src=\"${app.Thumbnail}?w=40&h=40&mode=crop\"></img>`\r\n                : `<div class=\"image logo\"><span class=\"material-icons-outlined\">star_border</span></div>`\r\n              }\r\n              <div class=\"text\">${params.value}</div>\r\n            </div>\r\n            `;\r\n          },\r\n        },\r\n        {\r\n          field: 'Folder',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Folder;\r\n          },\r\n        },\r\n        {\r\n          field: 'Version',\r\n          width: 78,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Version;\r\n          },\r\n        },\r\n        {\r\n          field: 'Items',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'number-cell no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const app: App = params.data;\r\n            return app.Items;\r\n          },\r\n        },\r\n        {\r\n          width: 122,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: AppsListActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: AppsListActionsParams = {\r\n              onDelete: (app) => this.deleteApp(app),\r\n              onFlush: (app) => this.flushApp(app),\r\n              onOpenLightspeed: (app) => this.openLightspeed(app),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"apps$ | async\" [gridOptions]=\"gridOptions\" appDragAndDrop\r\n    [allowedFileTypes]=\"'zip'\" (filesDropped)=\"importApp($event)\">\r\n  </ag-grid-angular>\r\n\r\n  <div class=\"grid-more-actions-box\"></div>\r\n\r\n  <eco-fab-speed-dial class=\"grid-fab\" [ngClass]=\"{ 'fab-opened': (fabOpen$ | async) }\"\r\n    (openChange)=\"openChange($event)\">\r\n    <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n      <button mat-fab>\r\n        <mat-icon class=\"spin180\">{{ (fabOpen$ | async) ? 'close' : 'add' }}</mat-icon>\r\n      </button>\r\n    </eco-fab-speed-dial-trigger>\r\n\r\n    <eco-fab-speed-dial-actions>\r\n      <button mat-mini-fab label=\"Find more apps\" (click)=\"browseCatalog()\">\r\n        <mat-icon>search</mat-icon>\r\n      </button>\r\n      <button mat-mini-fab label=\"Create inherited app\" (click)=\"createInheritedApp()\">\r\n        <mat-icon>holiday_village</mat-icon>\r\n      </button>\r\n      <button mat-mini-fab label=\"Import app\" (click)=\"importApp()\">\r\n        <mat-icon>cloud_upload</mat-icon>\r\n      </button>\r\n      <button mat-mini-fab label=\"Create app\" (click)=\"createApp()\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    </eco-fab-speed-dial-actions>\r\n  </eco-fab-speed-dial>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatSlideToggleChange } from '@angular/material/slide-toggle';\r\nimport { SiteLanguage } from '../../models/site-language.model';\r\nimport { SiteLanguagesStatusParams } from './site-languages-status.models';\r\n\r\n@Component({\r\n  selector: 'app-site-languages-status',\r\n  templateUrl: './site-languages-status.component.html',\r\n  styleUrls: ['./site-languages-status.component.scss'],\r\n})\r\nexport class SiteLanguagesStatusComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  private params: ICellRendererParams & SiteLanguagesStatusParams;\r\n\r\n  agInit(params: ICellRendererParams & SiteLanguagesStatusParams): void {\r\n    this.params = params;\r\n    this.value = this.params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  toggleLanguage(event: MatSlideToggleChange): void {\r\n    const language: SiteLanguage = this.params.data;\r\n    this.params.onToggleLanguage(language, event.checked);\r\n  }\r\n}\r\n","<mat-slide-toggle [checked]=\"value\" (change)=\"toggleLanguage($event)\"></mat-slide-toggle>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { catchError, Observable, of, share, startWith, Subject, switchMap } from 'rxjs';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { SiteLanguage } from '../models/site-language.model';\r\nimport { ZoneService } from '../services/zone.service';\r\nimport { SiteLanguagesStatusComponent } from './site-languages-status/site-languages-status.component';\r\nimport { SiteLanguagesStatusParams } from './site-languages-status/site-languages-status.models';\r\n\r\n@Component({\r\n  selector: 'app-site-languages',\r\n  templateUrl: './site-languages.component.html',\r\n  styleUrls: ['./site-languages.component.scss'],\r\n})\r\nexport class SiteLanguagesComponent implements OnInit, OnDestroy {\r\n  languages$: Observable<SiteLanguage[]>;\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private refreshLanguages$ = new Subject<void>();\r\n\r\n  constructor(private zoneService: ZoneService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.languages$ = this.refreshLanguages$.pipe(\r\n      startWith(undefined),\r\n      switchMap(() => this.zoneService.getLanguages().pipe(catchError(() => of(undefined)))),\r\n      share(),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.refreshLanguages$.complete();\r\n  }\r\n\r\n  private toggleLanguage(language: SiteLanguage, enable: boolean): void {\r\n    this.zoneService.toggleLanguage(language.Code, enable).subscribe({\r\n      error: () => {\r\n        this.refreshLanguages$.next();\r\n      },\r\n      next: () => {\r\n        this.refreshLanguages$.next();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'id-action no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            return language.Code;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<SiteLanguage> = {\r\n              tooltipGetter: (language: SiteLanguage) => `ID: ${language.Code}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight no-outline'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            return language.Culture;\r\n          },\r\n          onCellClicked: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            this.toggleLanguage(language, !language.IsEnabled);\r\n          },\r\n        },\r\n        {\r\n          field: 'Status',\r\n          width: 72,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            return language.IsEnabled;\r\n          },\r\n          cellRenderer: SiteLanguagesStatusComponent,\r\n          cellRendererParams: (() => {\r\n            const params: SiteLanguagesStatusParams = {\r\n              onToggleLanguage: (language, enable) => this.toggleLanguage(language, enable),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"languages$ | async\" [gridOptions]=\"gridOptions\">\r\n  </ag-grid-angular>\r\n\r\n  <div class=\"grid-more-actions-box\"></div>\r\n</div>\r\n","<div mat-dialog-title>\r\n  <div class=\"dialog-title-box\">\r\n    <div>{{ dialogData.feature.Name }}</div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<p class=\"dialog-description\" [innerHtml]=\"dialogData.feature.Description | safeHtml\"></p>\r\n\r\n<div class=\"info-box\">\r\n  <div class=\"info-row\" *ngIf=\"dialogData.feature.NameId as id\">\r\n    <div class=\"info-row__label\">ID</div>\r\n    <div class=\"info-row__value click\">\r\n      <span [tippy]=\"id\" (click)=\"copyToClipboard(id)\">{{ id }}</span>\r\n    </div>\r\n  </div>\r\n  <div class=\"info-row\" *ngIf=\"dialogData.feature.Guid as guid\">\r\n    <div class=\"info-row__label\">GUID</div>\r\n    <div class=\"info-row__value click\">\r\n      <span [tippy]=\"guid\" (click)=\"copyToClipboard(guid)\">{{ guid }}</span>\r\n    </div>\r\n  </div>\r\n  <div class=\"info-row\"\r\n    *ngIf=\"(dialogData.feature.Security.Impact + ': ' + dialogData.feature.Security.Message) as security\">\r\n    <div class=\"info-row__label\">Security Rating</div>\r\n    <div class=\"info-row__value\">\r\n      <span>{{ security }}</span>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { copyToClipboard } from '../../../shared/helpers/copy-to-clipboard.helper';\r\nimport { FeatureDetailsDialogData } from './feature-details-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-feature-details-dialog',\r\n  templateUrl: './feature-details-dialog.component.html',\r\n  styleUrls: ['./feature-details-dialog.component.scss']\r\n})\r\nexport class FeatureDetailsDialogComponent {\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: FeatureDetailsDialogData,\r\n    private dialogRef: MatDialogRef<FeatureDetailsDialogComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) { }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { Feature } from '../../models/feature.model';\r\n\r\n@Component({\r\n  selector: 'app-features-list-enabled-reason',\r\n  templateUrl: './features-list-enabled-reason.component.html',\r\n  styleUrls: ['./features-list-enabled-reason.component.scss'],\r\n})\r\nexport class FeaturesListEnabledReasonComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n  feature: Feature;\r\n\r\n  agInit(params: ICellRendererParams): void {\r\n    this.value = params.value;\r\n    this.feature = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div [tippy]=\"feature.EnabledReasonDetailed\">{{ value }}</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-features-list-enabled',\r\n  templateUrl: './features-list-enabled.component.html',\r\n  styleUrls: ['./features-list-enabled.component.scss'],\r\n})\r\nexport class FeaturesListEnabledComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams): void {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <mat-icon>{{ value ? 'check_box' : 'check_box_outline_blank' }}</mat-icon>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { Feature } from '../../models/feature.model';\r\nimport { FeaturesStatusParams } from './features-status.models';\r\n\r\n@Component({\r\n  selector: 'app-features-status',\r\n  templateUrl: './features-status.component.html',\r\n  styleUrls: ['./features-status.component.scss'],\r\n})\r\nexport class FeaturesStatusComponent implements ICellRendererAngularComp {\r\n  value: boolean | null;\r\n  disabled: boolean;\r\n\r\n  private params: ICellRendererParams & FeaturesStatusParams;\r\n\r\n  agInit(params: ICellRendererParams & FeaturesStatusParams): void {\r\n    this.params = params;\r\n    this.value = this.params.value;\r\n    this.disabled = this.params.isDisabled();\r\n  }\r\n\r\n  refresh(params: ICellRendererParams & FeaturesStatusParams): boolean {\r\n    this.disabled = this.params.isDisabled();\r\n    return true;\r\n  }\r\n\r\n  toggle(): void {\r\n    const feature: Feature = this.params.data;\r\n    let nextValue: boolean;\r\n    switch (this.value) {\r\n      case false:\r\n        nextValue = null;\r\n        break;\r\n      case null:\r\n        nextValue = true;\r\n        break;\r\n      case true:\r\n        nextValue = false;\r\n        break;\r\n    }\r\n    this.value = nextValue;\r\n    this.params.onToggle(feature, nextValue);\r\n  }\r\n}\r\n","<mat-slide-toggle [checked]=\"value\" [disabled]=\"disabled\" (change)=\"toggle()\" [ngClass]=\"{\r\n  'toggle-false': value === false,\r\n  'toggle-null': value === null\r\n  }\">\r\n</mat-slide-toggle>\r\n","import { Directive, ElementRef, Input, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\n@Directive({ selector: '[appAgGridHeight]' })\r\nexport class AgGridHeightDirective implements OnChanges {\r\n  @Input() itemsCount = 0;\r\n  @Input() headerHeight = 32;\r\n  @Input() rowHeight = 48;\r\n  @Input() maxRows = 100;\r\n\r\n  /** Fixes a bug where scrollbar appears when then is no overflow */\r\n  private extraHeight = 2;\r\n\r\n  private element: HTMLElement;\r\n\r\n  constructor(elementRef: ElementRef) {\r\n    this.element = elementRef.nativeElement;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.itemsCount != null) {\r\n      const rows = this.itemsCount === 0 ? 2 : this.itemsCount > this.maxRows ? this.maxRows : this.itemsCount;\r\n      this.element.style.height = `${this.headerHeight + rows * this.rowHeight + this.extraHeight}px`;\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { License } from '../models/license.model';\r\n\r\n@Pipe({ name: 'licensesOrder' })\r\nexport class LicensesOrderPipe implements PipeTransform {\r\n\r\n  transform(licenses: License[]): any {\r\n    if (!Array.isArray(licenses)) { return licenses; }\r\n\r\n    const sorted = [...licenses].sort((a: License, b: License) => {\r\n      if (a.Priority < b.Priority) {\r\n        return -1;\r\n      } else if (a.Priority > b.Priority) {\r\n        return 1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n    return sorted;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { License } from '../models/license.model';\r\n\r\n@Pipe({ name: 'activeFeaturesCount' })\r\nexport class ActiveFeaturesCountPipe implements PipeTransform {\r\n\r\n  transform(license: License) {\r\n    return `${license.Features.filter(f => f.Enabled).length}/${license.Features.length}`;\r\n  }\r\n}\r\n","<mat-accordion multi *ngIf=\"licenses$ | async as licenses\">\r\n  <mat-expansion-panel #panel *ngFor=\"let license of licenses | licensesOrder; trackBy: trackLicenses\">\r\n    <mat-expansion-panel-header>\r\n      <mat-panel-title>\r\n        <mat-icon class=\"panel-icon\" [tippy]=\"license.IsEnabled ? 'License is active' : 'License is not active'\">\r\n          {{ license.IsEnabled ? 'check_circle_outline' : 'cancel' }}\r\n        </mat-icon>\r\n        <div>\r\n          <div class=\"panel-title\">\r\n            <span>{{ license.Name }}</span>\r\n            <span class=\"active-features-count\">{{ license | activeFeaturesCount }}</span>\r\n          </div>\r\n          <div class=\"panel-description\" [ngClass]=\"{ 'expanded': panel.expanded }\">\r\n            {{ license.Description }}\r\n          </div>\r\n        </div>\r\n      </mat-panel-title>\r\n    </mat-expansion-panel-header>\r\n\r\n    <ng-container *ngIf=\"panel.expanded\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"license.Features\" [gridOptions]=\"gridOptions\"\r\n        appAgGridHeight [itemsCount]=\"license.Features?.length\">\r\n      </ag-grid-angular>\r\n    </ng-container>\r\n  </mat-expansion-panel>\r\n</mat-accordion>\r\n\r\n<div class=\"spacer\"></div>\r\n\r\n<div class=\"actions-box\" *ngIf=\"{\r\n  debugEnabled: debugEnabled$ | async,\r\n  systemInfoSet: systemInfoSet$ | async\r\n} as data\">\r\n  <button mat-button tippy=\"Register\" *ngIf=\"data.systemInfoSet\" (click)=\"openLicenseRegistration(data.systemInfoSet)\">\r\n    <mat-icon>app_registration</mat-icon>\r\n    <span>Register</span>\r\n  </button>\r\n  <button mat-button tippy=\"Retrieve license\" (click)=\"retrieveLicense()\">\r\n    <mat-icon>download_for_offline</mat-icon>\r\n    <span>Retrieve license</span>\r\n  </button>\r\n  <button mat-button color=\"accent\" tippy=\"Upload license\" *ngIf=\"data.debugEnabled\" (click)=\"openLicenseUpload()\">\r\n    <mat-icon>cloud_upload</mat-icon>\r\n    <span>Upload license</span>\r\n  </button>\r\n</div>\r\n","import { AgGridAngular } from '@ag-grid-community/angular';\r\nimport { GridOptions } from '@ag-grid-community/core';\r\nimport { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n// tslint:disable-next-line:max-line-length\r\nimport { BehaviorSubject, catchError, distinctUntilChanged, forkJoin, Observable, of, share, startWith, Subject, Subscription, switchMap, tap, timer } from 'rxjs';\r\nimport { GlobalConfigService } from '../../edit/shared/store/ngrx-data';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { FileUploadDialogComponent, FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { Feature, FeatureState } from '../models/feature.model';\r\nimport { License } from '../models/license.model';\r\nimport { SystemInfoSet } from '../models/system-info.model';\r\nimport { FeaturesConfigService } from '../services/features-config.service';\r\nimport { ZoneService } from '../services/zone.service';\r\nimport { FeatureDetailsDialogComponent } from './feature-details-dialog/feature-details-dialog.component';\r\nimport { FeatureDetailsDialogData } from './feature-details-dialog/feature-details-dialog.models';\r\nimport { FeaturesListEnabledReasonComponent } from './features-list-enabled-reason/features-list-enabled-reason.component';\r\nimport { FeaturesListEnabledComponent } from './features-list-enabled/features-list-enabled.component';\r\nimport { FeaturesStatusComponent } from './features-status/features-status.component';\r\nimport { FeaturesStatusParams } from './features-status/features-status.models';\r\n\r\n@Component({\r\n  selector: 'app-license-info',\r\n  templateUrl: './license-info.component.html',\r\n  styleUrls: ['./license-info.component.scss'],\r\n})\r\nexport class LicenseInfoComponent implements OnInit, OnDestroy {\r\n  @ViewChild(AgGridAngular) private gridRef?: AgGridAngular;\r\n\r\n  licenses$: Observable<License[]>;\r\n  disabled$ = new BehaviorSubject(false);\r\n  debugEnabled$ = this.globalConfigService.getDebugEnabled$();\r\n  systemInfoSet$: Observable<SystemInfoSet>;\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private refreshLicenses$ = new Subject<void>();\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private featuresConfigService: FeaturesConfigService,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    private globalConfigService: GlobalConfigService,\r\n    private snackBar: MatSnackBar,\r\n    private zoneService: ZoneService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.licenses$ = this.refreshLicenses$.pipe(\r\n      startWith(undefined),\r\n      switchMap(() => this.featuresConfigService.getLicenses().pipe(catchError(() => of(undefined)))),\r\n      tap(() => this.disabled$.next(false)),\r\n      share(),\r\n    );\r\n    this.systemInfoSet$ = this.zoneService.getSystemInfo().pipe(catchError(() => of(undefined)), share());\r\n    this.subscription.add(\r\n      this.disabled$.pipe(distinctUntilChanged()).subscribe(() => {\r\n        this.gridRef?.api.refreshCells({ force: true, columns: ['Status'] });\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.disabled$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  trackLicenses(index: number, license: License): string {\r\n    return license.Guid;\r\n  }\r\n\r\n  retrieveLicense(): void {\r\n    this.featuresConfigService.retrieveLicense().subscribe({\r\n      error: () => {\r\n        this.snackBar.open('Failed to retrieve license. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: (info) => {\r\n        const message = `License ${info.Success ? 'Info' : 'Error'}: ${info.Message}`;\r\n        const duration = info.Success ? 3000 : 100000;\r\n        const panelClass = info.Success ? undefined : 'snackbar-error';\r\n        this.snackBar.open(message, undefined, { duration, panelClass });\r\n        this.refreshLicenses$.next();\r\n      },\r\n    });\r\n  }\r\n\r\n  openLicenseUpload(): void {\r\n    const data: FileUploadDialogData = {\r\n      title: 'Upload license',\r\n      description: '',\r\n      allowedFileTypes: 'json',\r\n      upload$: (files) => this.featuresConfigService.uploadLicense(files[0]),\r\n    };\r\n    const dialogRef = this.dialog.open(FileUploadDialogComponent, {\r\n      data,\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    dialogRef.afterClosed().subscribe((refresh?: boolean) => {\r\n      if (refresh) {\r\n        this.refreshLicenses$.next();\r\n      }\r\n    });\r\n  }\r\n\r\n  openLicenseRegistration(systemInfoSet: SystemInfoSet): void {\r\n    window.open(`https://patrons.2sxc.org/register?fingerprint=${systemInfoSet.System.Fingerprint}`, '_blank');\r\n  }\r\n\r\n  private showFeatureDetails(feature: Feature): void {\r\n    const data: FeatureDetailsDialogData = {\r\n      feature,\r\n    };\r\n    this.dialog.open(FeatureDetailsDialogComponent, {\r\n      autoFocus: false,\r\n      data,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private toggleFeature(feature: Feature, enabled: boolean): void {\r\n    this.disabled$.next(true);\r\n    const state: FeatureState = {\r\n      FeatureGuid: feature.Guid,\r\n      Enabled: enabled,\r\n    };\r\n    forkJoin([this.featuresConfigService.saveFeatures([state]), timer(100)]).subscribe({\r\n      error: () => {\r\n        this.refreshLicenses$.next();\r\n      },\r\n      next: () => {\r\n        this.refreshLicenses$.next();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 200,\r\n          headerClass: 'dense',\r\n          cellClass: 'id-action no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const feature: Feature = params.data;\r\n            return feature.NameId;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<Feature> = {\r\n              tooltipGetter: (feature: Feature) => feature.NameId,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Name',\r\n          flex: 3,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          onCellClicked: (params) => {\r\n            const feature: Feature = params.data;\r\n            this.showFeatureDetails(feature);\r\n          },\r\n          valueGetter: (params) => {\r\n            const feature: Feature = params.data;\r\n            return feature.Name;\r\n          },\r\n        },\r\n        {\r\n          field: 'Enabled',\r\n          width: 80,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          cellRenderer: FeaturesListEnabledComponent,\r\n          valueGetter: (params) => {\r\n            const feature: Feature = params.data;\r\n            return feature.Enabled;\r\n          },\r\n        },\r\n        {\r\n          field: 'EnabledReason',\r\n          headerName: 'Reason',\r\n          flex: 1,\r\n          minWidth: 150,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          cellRenderer: FeaturesListEnabledReasonComponent,\r\n          valueGetter: (params) => {\r\n            const feature: Feature = params.data;\r\n            return feature.EnabledReason;\r\n          },\r\n        },\r\n        {\r\n          field: 'Expires',\r\n          width: 100,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const feature: Feature = params.data;\r\n            const expires = feature.Expires?.split('T')[0];\r\n            return expires?.startsWith('9999') ? 'never' : expires;\r\n          },\r\n        },\r\n        {\r\n          field: 'Status',\r\n          headerName: '',\r\n          width: 62,\r\n          cellClass: 'secondary-action no-outline no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: FeaturesStatusComponent,\r\n          valueGetter: (params) => {\r\n            const feature: Feature = params.data;\r\n            return feature.EnabledStored;\r\n          },\r\n          cellRendererParams: (() => {\r\n            const params: FeaturesStatusParams = {\r\n              isDisabled: () => this.disabled$.value,\r\n              onToggle: (feature, enabled) => this.toggleFeature(feature, enabled),\r\n            };\r\n            return params;\r\n          }),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"nav-component-wrapper\" appToggleDebug>\r\n  <div mat-dialog-title>\r\n    <div class=\"dialog-title-box\">\r\n      <div>Manage Zone {{ zoneId }}</div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <!-- spm NOTE: we use mat-tab-group because mat-tab-nav-bar doesn't have animations and doesn't look pretty -->\r\n  <mat-tab-group class=\"mat-tab-group-max-height\" dynamicHeight color=\"accent\"\r\n    *ngIf=\"dialogSettings$ | async as dialogSettings\" (selectedTabChange)=\"changeTab($event)\"\r\n    [selectedIndex]=\"tabIndex$ | async\">\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" tippy=\"System Info\">\r\n        <mat-icon>settings</mat-icon>\r\n        <span>System</span>\r\n      </div>\r\n      <app-system-info *matTabContent [dialogSettings]=\"dialogSettings\"></app-system-info>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" tippy=\"Apps\">\r\n        <mat-icon>star_border</mat-icon>\r\n        <span>Apps</span>\r\n      </div>\r\n      <app-apps-list *matTabContent></app-apps-list>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" tippy=\"Languages\">\r\n        <mat-icon>translate</mat-icon>\r\n        <span>Languages</span>\r\n      </div>\r\n      <app-site-languages *matTabContent></app-site-languages>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" tippy=\"Extensions and Features\">\r\n        <mat-icon>tune</mat-icon>\r\n        <span>Extensions / Features</span>\r\n      </div>\r\n      <app-license-info *matTabContent></app-license-info>\r\n    </mat-tab>\r\n  </mat-tab-group>\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatTabChangeEvent } from '@angular/material/tabs';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, filter, map, pairwise, startWith, Subscription } from 'rxjs';\r\nimport { DialogSettings } from '../../app-administration/models';\r\nimport { AppDialogConfigService } from '../../app-administration/services';\r\nimport { Context } from '../../shared/services/context';\r\n\r\n@Component({\r\n  selector: 'app-apps-management-nav',\r\n  templateUrl: './apps-management-nav.component.html',\r\n  styleUrls: ['./apps-management-nav.component.scss'],\r\n})\r\nexport class AppsManagementNavComponent implements OnInit, OnDestroy {\r\n  zoneId = this.context.zoneId;\r\n  dialogSettings$ = new BehaviorSubject<DialogSettings>(undefined);\r\n\r\n  private tabs = ['system', 'list', 'languages', 'license']; // tabs order has to match template\r\n  tabIndex$ = this.router.events.pipe(\r\n    filter(event => event instanceof NavigationEnd),\r\n    map(() => this.tabs.indexOf(this.route.snapshot.firstChild.url[0].path)),\r\n    filter(tabIndex => tabIndex >= 0),\r\n    startWith(this.tabs.indexOf(this.route.snapshot.firstChild.url[0].path)),\r\n  );\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AppsManagementNavComponent>,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private context: Context,\r\n    private appDialogConfigService: AppDialogConfigService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchDialogSettings();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dialogSettings$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  changeTab(event: MatTabChangeEvent) {\r\n    const path = this.tabs[event.index];\r\n    this.router.navigate([path], { relativeTo: this.route });\r\n  }\r\n\r\n  private fetchDialogSettings() {\r\n    this.appDialogConfigService.getDialogSettings(0).subscribe(dialogSettings => {\r\n      this.dialogSettings$.next(dialogSettings);\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.fetchDialogSettings();\r\n      })\r\n    );\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\" [ngSwitch]=\"isError\">\r\n  <mat-hint *ngSwitchCase=\"false\">\r\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n  </mat-hint>\r\n\r\n  <mat-error *ngSwitchCase=\"true\">\r\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n  </mat-error>\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { copyToClipboard } from '../../helpers/copy-to-clipboard.helper';\r\nimport { IdFieldParams } from './id-field.models';\r\n\r\n@Component({\r\n  selector: 'app-id-field',\r\n  templateUrl: './id-field.component.html',\r\n  styleUrls: ['./id-field.component.scss'],\r\n})\r\nexport class IdFieldComponent implements ICellRendererAngularComp {\r\n  id: number | string;\r\n  align: 'start' | 'end';\r\n  tooltip: string;\r\n\r\n  constructor(private snackBar: MatSnackBar) { }\r\n\r\n  agInit(params: ICellRendererParams & IdFieldParams): void {\r\n    this.id = params.value;\r\n    this.align = typeof this.id === 'number' ? 'end' : 'start';\r\n    this.tooltip = params.tooltipGetter(params.data);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  copy(): void {\r\n    copyToClipboard(this.tooltip);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n}\r\n","<div matRipple class=\"id-box highlight\" [tippy]=\"tooltip\" (click)=\"copy()\" [ngClass]=\"{\r\n  'align-start': align === 'start',\r\n  'align-end': align === 'end'\r\n}\">\r\n  <span class=\"id\">{{ id }}</span>\r\n  <mat-icon class=\"icon\">file_copy</mat-icon>\r\n</div>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\n\r\nexport const defaultGridOptions: GridOptions = {\r\n  accentedSort: true,\r\n  animateRows: true,\r\n  enableCellTextSelection: true,\r\n  headerHeight: 32,\r\n  suppressScrollOnNewData: true,\r\n  valueCache: true,\r\n  defaultColDef: { filterParams: { newRowsAction: 'keep' } },\r\n  tooltipShowDelay: 0,\r\n  tooltipHideDelay: 100000,\r\n  suppressMovableColumns: true,\r\n} as const;\r\n","import { Directive, HostListener } from '@angular/core';\r\nimport { GlobalConfigService } from '../../edit/shared/store/ngrx-data';\r\n\r\n@Directive({ selector: '[appToggleDebug]' })\r\nexport class ToggleDebugDirective {\r\n\r\n  constructor(private globalConfigService: GlobalConfigService) { }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    const CTRL_SHIFT_ALT_CLICK = (navigator.platform.match('Mac') ? event.metaKey : event.ctrlKey) && event.shiftKey && event.altKey;\r\n    if (CTRL_SHIFT_ALT_CLICK) {\r\n      this.globalConfigService.toggleDebugEnabled();\r\n      window.getSelection().removeAllRanges();\r\n    }\r\n  }\r\n}\r\n","/** https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f */\r\nexport function copyToClipboard(str: string) {\r\n  const el = document.createElement('textarea');  // Create a <textarea> element\r\n  el.value = str;                                 // Set its value to the string that you want copied\r\n  el.setAttribute('readonly', '');                // Make it readonly to be tamper-proof\r\n  el.style.position = 'absolute';\r\n  el.style.left = '-9999px';                      // Move outside the screen to make it invisible\r\n  document.body.appendChild(el);                  // Append the <textarea> element to the HTML document\r\n  const selected =\r\n    document.getSelection().rangeCount > 0        // Check if there is any content selected previously\r\n      ? document.getSelection().getRangeAt(0)     // Store selection if found\r\n      : false;                                    // Mark as false to know no selection existed before\r\n  el.select();                                    // Select the <textarea> content\r\n  document.execCommand('copy');                   // Copy - only works as a result of a user action (e.g. click events)\r\n  document.body.removeChild(el);                  // Remove the <textarea> element\r\n  if (selected) {                                 // If a selection existed before copying\r\n    document.getSelection().removeAllRanges();    // Unselect everything on the HTML document\r\n    document.getSelection().addRange(selected);   // Restore the original selection\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts.3c5f40cadfb26d8a.js"}