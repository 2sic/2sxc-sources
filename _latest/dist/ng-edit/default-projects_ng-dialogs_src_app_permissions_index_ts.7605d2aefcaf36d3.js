"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["default-projects_ng-dialogs_src_app_permissions_index_ts","projects_ng-dialogs_src_app_permissions_go-to-permissions_ts","projects_ng-dialogs_src_app_permissions_permissions_module_ts","projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{8130:function(M,u,t){t.d(u,{g:function(){return _}});var g=t(8069),v=t(8047),o=t(8507),s=t(8598),c=t(7133),p=t(8784),l=t(2425),_=function(){var a=function(){function n(i,r,m){(0,g.Z)(this,n),this.http=i,this.context=r,this.dnnContext=m}return(0,v.Z)(n,[{key:"create",value:function(r,m){return this.http.post("app/auto/data/".concat(r),m,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}},{key:"delete",value:function(r,m,P){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(o.Uo+"delete"),{params:{contentType:r,id:m.toString(),appId:this.context.appId.toString(),force:P.toString()}})}}]),n}();return a.\u0275fac=function(i){return new(i||a)(c.LFG(p.eN),c.LFG(s._),c.LFG(l._y))},a.\u0275prov=c.Yz7({token:a,factory:a.\u0275fac}),a}()},7297:function(M,u,t){t.d(u,{i:function(){return s}});var g=t(8069),v=t(8047),o=t(1825),s=function(){var c=function(){function p(){(0,g.Z)(this,p)}return(0,v.Z)(p,null,[{key:"getUrl",value:function(_,a,n){return"permissions/".concat(_,"/").concat(a,"/").concat(n)}},{key:"getUrlApp",value:function(_){return this.getUrl(o.Z.metadata.app.targetType,o.Z.metadata.app.keyType,_.toString())}},{key:"getUrlAttribute",value:function(_){return this.getUrl(o.Z.metadata.attribute.targetType,o.Z.metadata.attribute.keyType,_.toString())}},{key:"getUrlContentType",value:function(_){return this.getUrlEntity(_)}},{key:"getUrlEntity",value:function(_){return this.getUrl(o.Z.metadata.entity.targetType,o.Z.metadata.entity.keyType,_)}},{key:"getUrlLanguage",value:function(_){return this.getUrl(o.Z.metadata.language.targetType,o.Z.metadata.language.keyType,_.toLocaleLowerCase())}}]),p}();return c.route={path:"permissions/:targetType/:keyType/:key",loadChildren:function(){return t.e("projects_ng-dialogs_src_app_permissions_permissions_module_ts").then(t.bind(t,4484)).then(function(l){return l.PermissionsModule})},data:{title:"Permissions"}},c}()},6307:function(M,u,t){t.d(u,{iK:function(){return g.i},Do:function(){return p.D},qQ:function(){return l.q}});var g=t(7297),p=(t(1157),t(7725),t(5620),t(4484),t(4753)),l=t(7170)},1157:function(M,u,t){t.d(u,{g:function(){return s}});var g=t(9016),v=t.n(g),o=t(4929),s={name:"SET_PERMISSIONS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:function(){return(0,o.mG)(this,void 0,void 0,v().mark(function p(){return v().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),t.e("default-projects_ng-dialogs_src_app_shared_constants_default-grid-options_constants_ts-node_m-d43c44"),t.e("projects_ng-dialogs_src_app_permissions_permissions_component_ts")]).then(t.bind(t,5620));case 2:return n.abrupt("return",n.sent.PermissionsComponent);case 5:case"end":return n.stop()}},p)}))}}},7725:function(M,u,t){t.d(u,{T:function(){return a}});var g=t(8047),v=t(8069),o=t(2977),s=t(8327),c=t(5487),p=t(1157),l=t(7133),_=[{path:"",component:c.r,data:{dialog:p.g},children:[{matcher:s.eP,loadChildren:function(){return Promise.all([t.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2015_progress-spinner_mjs"),t.e("default-projects_ng-dialogs_src_app_create-file-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2015_slide-toggle_mjs"),t.e("default-node_modules_angular_material_fesm2015_list_mjs"),t.e("default-projects_ng-dialogs_src_app_monaco-editor_monaco-editor_component_ts-projects_ng-dial-39d674"),t.e("default-projects_edit_edit_module_ts"),t.e("default-node_modules_angular_cdk_fesm2015_drag-drop_mjs"),t.e("default-node_modules_angular_material_fesm2015_menu_mjs"),t.e("default-node_modules_angular_material_fesm2015_autocomplete_mjs"),t.e("common"),t.e("projects_ng-dialogs_src_app_shared_components_field-hint_field-hint_component_ts-projects_ng--d12a670")]).then(t.bind(t,1575)).then(function(i){return i.EditModule})}},{matcher:s.lZ,loadChildren:function(){return t.e("projects_edit_refresh-edit_module_ts").then(t.bind(t,3804)).then(function(i){return i.RefreshEditModule})}}]}],a=function(){var n=(0,g.Z)(function i(){(0,v.Z)(this,i)});return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[o.Bz.forChild(_)],o.Bz]}),n}()},5620:function(M,u,t){t.r(u),t.d(u,{PermissionsComponent:function(){return S}});var g=t(2090),v=t(8069),o=t(8047),s=t(1276),c=t(2977),p=t(6317),l=t(7714),_=t(116),a=t(4874),n=t(635),i=t(679),r=t(5578),m=t(9119),P=t(1825),D=t(5137),e=t(7133),R=t(1130),O=t(785),I=t(5590),L=function(){var E=function(){function C(){(0,v.Z)(this,C)}return(0,o.Z)(C,[{key:"agInit",value:function(d){this.params=d}},{key:"refresh",value:function(d){return!0}},{key:"deletePermission",value:function(){this.params.onDelete(this.params.data)}}]),C}();return E.\u0275fac=function(h){return new(h||E)},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(h,d){1&h&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(){return d.deletePermission()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA(),e.qZA(),e.qZA())},directives:[R.wG,O.$,I.Hw],styles:[""]}),E}(),Z=t(7170),B=t(5758),W=t(2528),j=t(7317),K=t(1350),x=t(6362),S=function(){var E=function(){function C(h,d,f,y,T){(0,v.Z)(this,C),this.dialogRef=h,this.router=d,this.route=f,this.permissionsService=y,this.snackBar=T,this.permissions$=new p.X(null),this.modules=s.F$,this.gridOptions=Object.assign(Object.assign({},m.f),{frameworkComponents:{idFieldComponent:r.m,permissionsActionsComponent:L},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(U){return"ID: ".concat(U.Id,"\nGUID: ").concat(U.Guid)}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new l.w0,this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key")}return(0,o.Z)(C,[{key:"ngOnInit",value:function(){this.fetchPermissions(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.permissions$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"fetchPermissions",value:function(){var d=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(f){d.permissions$.next(f)})}},{key:"editPermission",value:function(d){var y,T,A,f=this;A=null==d?{items:[{ContentTypeName:P.Z.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:null!==(T=null===(y=Object.values(P.Z.metadata).find(function(G){return G.targetType===f.targetType}))||void 0===y?void 0:y.target)&&void 0!==T?T:this.targetType.toString(),TargetType:this.targetType},this.keyType===P.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===P.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===P.Z.keyTypes.string&&{String:this.key})}]}:{items:[{EntityId:d.data.Id}]};var F=(0,D.f)(A);this.router.navigate(["edit/".concat(F)],{relativeTo:this.route})}},{key:"deletePermission",value:function(d){var f=this;!confirm("Delete '".concat(d.Title,"' (").concat(d.Id,")?"))||(this.snackBar.open("Deleting..."),this.permissionsService.delete(d.Id).subscribe(function(){f.snackBar.open("Deleted",null,{duration:2e3}),f.fetchPermissions()}))}},{key:"refreshOnChildClosed",value:function(){var d=this;this.subscription.add(this.router.events.pipe((0,_.h)(function(f){return f instanceof c.m2}),(0,a.O)(!!this.route.snapshot.firstChild),(0,n.U)(function(){return!!d.route.snapshot.firstChild}),(0,i.G)(),(0,_.h)(function(f){var y=(0,g.Z)(f,2);return y[0]&&!y[1]})).subscribe(function(){d.fetchPermissions()}))}}]),C}();return E.\u0275fac=function(h){return new(h||E)(e.Y36(B.so),e.Y36(c.F0),e.Y36(c.gz),e.Y36(Z.q),e.Y36(W.ux))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(h,d){1&h&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e._uU(4,"Permissions"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return d.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"router-outlet"),e.TgZ(9,"div",4),e._UZ(10,"ag-grid-angular",5),e.ALo(11,"async"),e._UZ(12,"div",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return d.editPermission(null)}),e.TgZ(14,"mat-icon"),e._uU(15,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&h&&(e.xp6(10),e.Q6J("rowData",e.lcZ(11,3,d.permissions$))("modules",d.modules)("gridOptions",d.gridOptions))},directives:[B.uh,j.lW,O.$,I.Hw,c.lC,K.N8],pipes:[x.Ov],styles:[""]}),E}()},4484:function(M,u,t){t.r(u),t.d(u,{PermissionsModule:function(){return R}});var g=t(8047),v=t(8069),o=t(1350),s=t(6362),c=t(7317),p=t(1130),l=t(5758),_=t(5590),a=t(2528),n=t(8130),i=t(8598),r=t(8450),m=t(7725),P=t(4753),D=t(7170),e=t(7133),R=function(){var O=(0,g.Z)(function I(){(0,v.Z)(this,I)});return O.\u0275fac=function(L){return new(L||O)},O.\u0275mod=e.oAB({type:O}),O.\u0275inj=e.cJS({providers:[i._,D.q,P.D,n.g],imports:[[s.ez,m.T,r.q,l.Is,c.ot,_.Ps,o.sF.withComponents([]),p.si,a.ZX]]}),O}()},4753:function(M,u,t){t.d(u,{D:function(){return _}});var g=t(8069),v=t(8047),o=t(8598),s=t(7133),c=t(8784),p=t(2425),_=function(){var a=function(){function n(i,r,m){(0,g.Z)(this,n),this.http=i,this.context=r,this.dnnContext=m}return(0,v.Z)(n,[{key:"getMetadata",value:function(r,m,P,D){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:Object.assign({appId:this.context.appId.toString(),targetType:r.toString(),keyType:m,key:P.toString()},D&&{contentType:D})})}}]),n}();return a.\u0275fac=function(i){return new(i||a)(s.LFG(c.eN),s.LFG(o._),s.LFG(p._y))},a.\u0275prov=s.Yz7({token:a,factory:a.\u0275fac}),a}()},7170:function(M,u,t){t.d(u,{q:function(){return _}});var g=t(8069),v=t(8047),o=t(635),s=t(8130),c=t(1825),p=t(4753),l=t(7133),_=function(){var a=function(){function n(i,r){(0,g.Z)(this,n),this.metadataService=i,this.entitiesService=r}return(0,v.Z)(n,[{key:"getAll",value:function(r,m,P){return this.metadataService.getMetadata(r,m,P,c.Z.contentTypes.permissions).pipe((0,o.U)(function(D){return D.Items}))}},{key:"delete",value:function(r){return this.entitiesService.delete(c.Z.contentTypes.permissions,r,!1)}}]),n}();return a.\u0275fac=function(i){return new(i||a)(l.LFG(p.D),l.LFG(s.g))},a.\u0275prov=l.Yz7({token:a,factory:a.\u0275fac}),a}()},5578:function(M,u,t){t.d(u,{m:function(){return a}});var g=t(8069),v=t(8047),o=t(5388),s=t(7133),c=t(2528),p=t(1130),l=t(785),_=t(5590),a=function(){var n=function(){function i(r){(0,g.Z)(this,i),this.snackBar=r}return(0,v.Z)(i,[{key:"agInit",value:function(m){this.id=m.value,this.tooltip=m.tooltipGetter(m.data)}},{key:"refresh",value:function(m){return!0}},{key:"copy",value:function(){(0,o.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),i}();return n.\u0275fac=function(r){return new(r||n)(s.Y36(c.ux))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(r,m){1&r&&(s.TgZ(0,"div",0),s.NdJ("click",function(){return m.copy()}),s.TgZ(1,"span",1),s._uU(2),s.qZA(),s.TgZ(3,"mat-icon",2),s._uU(4,"file_copy"),s.qZA(),s.qZA()),2&r&&(s.Q6J("tippy",m.tooltip),s.xp6(2),s.Oqu(m.id))},directives:[p.wG,l.$,_.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),n}()},5388:function(M,u,t){function g(v){var o=document.createElement("textarea");o.value=v,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o);var s=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);o.select(),document.execCommand("copy"),document.body.removeChild(o),s&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(s))}t.d(u,{v:function(){return g}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/default-projects_ng-dialogs_src_app_permissions_index_ts.7605d2aefcaf36d3.js.map