"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_sub-dialogs_analyze-settings_analyze-settings_comp-6cd38e"],{8852:(I,h,n)=>{n.r(h),n.d(h,{AnalyzeSettingsComponent:()=>E});var d=n(9184),p=n(5797),C=n(9999),R=n(271),S=n(251),x=n(5445),F=n(8362),$=n(519),o=n(5060),k=n(4601),t=n(8559),z=n(3347);let j=(()=>{class s{constructor(e){this.snackBar=e}agInit(e){this.key=e.value}refresh(e){return!0}copy(){(0,$.l)(this.key),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(z.UG))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-analyze-settings-key"]],standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[["matRipple","",1,"key-box","highlight",3,"click","tippy"],[1,"key"]],template:function(i,a){1&i&&(t.j41(0,"div",0),t.bIt("click",function(){return a.copy()}),t.j41(1,"span",1),t.EFF(2),t.k0s()()),2&i&&(t.Y8G("tippy",a.key),t.R7$(2),t.JRh(a.key))},dependencies:[o.pZ,o.r6,k.e],styles:[".key-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.key-box[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}"]})}return s})();var r=n(3840);function w(s,c){if(1&s&&(t.j41(0,"div",0)(1,"div"),t.EFF(2),t.k0s(),t.j41(3,"div",2)(4,"mat-icon"),t.EFF(5,"search"),t.k0s()()()),2&s){const e=t.XpG();t.R7$(2),t.JRh(e.totalResults)}}function T(s,c){if(1&s){const e=t.RV6();t.j41(0,"div",3),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.openDetails())}),t.j41(1,"div",4),t.EFF(2),t.k0s(),t.j41(3,"div",5)(4,"mat-icon"),t.EFF(5,"search"),t.k0s()()()}if(2&s){const e=t.XpG();t.R7$(2),t.JRh(e.totalResults)}}let V=(()=>{class s{agInit(e){this.totalResults=e.value,this.params=e,this.stackItem=this.params.data}refresh(e){return!0}openDetails(){this.params.openDetails(this.stackItem)}static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-analyze-settings-total-results"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[1,"input-component","no-click"],["matRipple","","tippy","Open details",1,"input-component","highlight"],[1,"eav-grid-action-button","disabled"],["matRipple","","tippy","Open details",1,"input-component","highlight",3,"click"],[1,"text"],[1,"eav-grid-action-button"]],template:function(i,a){1&i&&t.DNE(0,w,6,1,"div",0)(1,T,6,1,"div",1),2&i&&(t.vxM(0,a.totalResults<=1?0:-1),t.R7$(),t.vxM(1,a.totalResults>1?1:-1))},dependencies:[r.m_,r.An,o.pZ,o.r6],styles:[".no-click[_ngcontent-%COMP%]{cursor:default;-webkit-user-select:initial;user-select:initial}"]})}return s})();var A=n(1423),M=n(316),m=n(4456),v=n(5175),g=n(5944),y=n(4175),O=n(7037),u=n(1828),f=n(5437),G=n(7941),N=n(9841);function b(s,c){if(1&s&&(t.j41(0,"mat-option",8),t.EFF(1),t.k0s()),2&s){const e=c.$implicit;t.Y8G("value",e.Guid),t.R7$(),t.JRh(e.Name)}}function D(s,c){if(1&s){const e=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t.EFF(4),t.k0s(),t.j41(5,"button",3),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.closeDialog())}),t.j41(6,"mat-icon"),t.EFF(7,"close"),t.k0s()()()(),t.j41(8,"div",4)(9,"p",5),t.EFF(10," Settings and Resources are consolidated from many sources. Here you see what the resulting values would be. "),t.k0s(),t.nrm(11,"router-outlet"),t.j41(12,"mat-form-field",6)(13,"mat-label"),t.EFF(14,"Merge settings / resources of a View"),t.k0s(),t.j41(15,"mat-select",7),t.bIt("ngModelChange",function(a){t.eBV(e);const l=t.XpG();return t.Njj(l.changeView(a))}),t.j41(16,"mat-option",8),t.EFF(17,"No view selected - this is how APIs see the data"),t.k0s(),t.Z7z(18,b,2,2,"mat-option",8,t.fX1),t.k0s()()(),t.j41(20,"div",9),t.nrm(21,"ag-grid-angular",10)(22,"div",11),t.k0s()()}if(2&s){const e=c,i=t.XpG();t.R7$(4),t.SpI("Analyze ",i.part,""),t.R7$(11),t.Y8G("ngModel",e.selectedView),t.R7$(),t.Y8G("value",void 0),t.R7$(2),t.Dyx(e.views),t.R7$(3),t.Y8G("rowData",e.stack)("gridOptions",i.gridOptions)}}let E=(()=>{class s{constructor(e,i,a){this.dialogRef=e,this.route=i,this.router=a,this.gridOptions=this.buildGridOptions(),this.viewsService=(0,f.d)(x.y0),this.analyzeSettingsService=(0,f.d)(F.l),this.part=this.route.snapshot.paramMap.get("part")}ngOnInit(){this.views$=new p.t([]),this.selectedView$=new p.t(void 0),this.stack$=new p.t([]),this.getViews(),this.getStack(),this.viewModel$=(0,C.z)([this.views$,this.selectedView$,this.stack$]).pipe((0,R.T)(([e,i,a])=>({views:e,selectedView:i,stack:a})))}ngOnDestroy(){this.views$.complete(),this.selectedView$.complete(),this.stack$.complete()}closeDialog(){this.dialogRef.close()}changeView(e){this.selectedView$.next(e),this.getStack()}getViews(){this.viewsService.getAll().subscribe(e=>{this.views$.next(e)})}getStack(){this.analyzeSettingsService.getStack(this.part,void 0,this.selectedView$.value,!0).subscribe(e=>{this.stack$.next(e)})}buildGridOptions(){return{...S.C,columnDefs:[{...u.r.TextWideActionClass,headerName:"Key",field:"Path",cellRenderer:j},{...u.r.TextWideActionClass,headerName:"Value",field:"_value",cellRenderer:A.g},{field:"Source",...u.r.TextNarrow},{headerName:"Total",field:"TotalResults",width:72,headerClass:"dense",cellClass:"secondary-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter",cellRenderer:V,cellRendererParams:{openDetails:a=>{this.router.navigate([`details/${this.selectedView$.value}/${a.Path}`],{relativeTo:this.route})}}}]}}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(G.CP),t.rXU(d.nX),t.rXU(d.Ix))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-analyze-settings"]],standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"nav-component-wrapper"],["mat-mdc-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"padding-class"],[1,"dialog-description"],["color","accent",1,"view-select-box"],[3,"ngModelChange","ngModel"],[3,"value"],[1,"grid-wrapper","padding-class"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"]],template:function(i,a){if(1&i&&(t.DNE(0,D,23,5,"div",0),t.nI1(1,"async")),2&i){let l;t.vxM(0,(l=t.bMT(1,1,a.viewModel$))?0:-1,l)}},dependencies:[y.Hl,y.iY,r.m_,r.An,d.n3,g.RG,g.rl,g.nJ,v.Ve,v.VO,o.wT,m.YN,m.BC,m.vS,o.Sy,M.Jj,O.p,N.xs],styles:[".view-select-box[_ngcontent-%COMP%]{width:400px}.padding-class[_ngcontent-%COMP%]{padding:0 24px}"]})}return s})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_app-administration_sub-dialogs_analyze-settings_analyze-settings_comp-6cd38e.29003e58563e15b6.js.map