"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_content-items_component_ts-projects_eav-ui_src_app_impo-19a5d8","projects_eav-ui_src_app_app-administration_services_content-types_service_ts-projects_eav-ui_-a8fb8f"],{7693:(O,M,i)=>{i.d(M,{X:()=>c,g:()=>_});var t=i(271),y=i(8873),s=i(8559),m=i(6443),r=i(4821);const c="admin/type/",f="admin/type/scopes";let _=(()=>{class p{constructor(I,x,P){this.http=I,this.context=x,this.dnnContext=P}apiUrl(I){return this.dnnContext.$2sxc.http.apiUrl(I)}retrieveContentType(I){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:I}})}retrieveContentTypes(I){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:I}})}getScopes(){return this.http.get(this.apiUrl(f),{params:{appId:this.context.appId.toString()}}).pipe((0,t.T)(I=>{const x=I.old;return Object.keys(x).map(K=>({name:x[K],value:K}))}))}getScopesV2(){return this.http.get(this.apiUrl(f),{params:{appId:this.context.appId.toString()}}).pipe((0,t.T)(I=>I.scopes))}save(I){return this.http.post(this.apiUrl("admin/type/save"),I,{params:{appid:this.context.appId.toString()}})}delete(I){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:I.StaticName}})}import(I){const x=new FormData;for(const P of I)x.append("File",P);return this.http.post(this.apiUrl("admin/type/import"),x,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(I){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:I}})}static#t=this.\u0275fac=function(x){return new(x||p)(s.KVO(m.Qq),s.KVO(y.o),s.KVO(r.ob))};static#e=this.\u0275prov=s.jDH({token:p,factory:p.\u0275fac})}return p})()},6163:(O,M,i)=>{i.d(M,{t:()=>u});var t=i(6301),y=i(271),s=i(8764),m=i(8873),r=i(8147),c=i(9431),d=i(8559),v=i(6443);let u=(()=>{class h{constructor(p,T,I){this.http=p,this.context=T,this.globalConfigService=I,this.log=new r.B("GlobalDialogConfigService",!1),this.dialogSettings$={},this.log.a(`using context #${this.context.log.svcId}`)}getShared$(p){return this.log.a("getShared$ appId: "+p),this.dialogSettings$[p]??=this.getDialogSettings(p,"getShared$").pipe((0,t.t)({refCount:!1})),this.dialogSettings$[p]}getDialogSettings(p,T){return this.log.a("getDialogSettings",{appId:p,reqBy:T}),this.http.get("admin/dialog/settings",{params:{appId:p??this.context.appId.toString()}}).pipe((0,y.T)(I=>(I.Context.Language.List=I.Context.Language.List.filter(x=>x.IsEnabled),I)),(0,s.M)(I=>{this.globalConfigService.allowDebug(I.Context.Enable.DebugMode)}))}static#t=this.\u0275fac=function(T){return new(T||h)(d.KVO(v.Qq),d.KVO(m.o),d.KVO(c.B))};static#e=this.\u0275prov=d.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},5445:(O,M,i)=>{i.d(M,{Cu:()=>c.Cu,JL:()=>c.JL,Mk:()=>c.Mk,ei:()=>c.ei,gs:()=>y.g,tn:()=>t.t,vN:()=>c.vN,xR:()=>c.xR,y0:()=>d.y});var t=i(6163),y=i(7693),c=(i(1475),i(320),i(8624),i(4079)),d=i(2570)},4079:(O,M,i)=>{i.d(M,{Cu:()=>p,JL:()=>T,Mk:()=>h,ei:()=>_,vN:()=>I,xR:()=>x});var t=i(4600),y=i(6647),s=i(271),m=i(693),r=i(8873),c=i(9234),d=i(8559),v=i(6443),f=i(4821);const h="admin/query/Run",_="admin/query/DebugStream",p="admin/query/Save",T="admin/query/Get",I="admin/query/DataSources";let x=(()=>{class P{constructor(S,j,N){this.http=S,this.context=j,this.dnnContext=N}getAll(S){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(c.Gg),{params:{appId:this.context.appId.toString(),contentType:S}})}importQuery(S){return(0,t.H)((0,m.n)(S)).pipe((0,y.n)(j=>this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:this.context.appId.toString(),ContentBase64:j})),(0,s.T)(j=>({Success:j,Messages:[]})))}clonePipeline(S){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:S.toString(),appId:this.context.appId.toString()}})}delete(S){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:S.toString()}})}static#t=this.\u0275fac=function(j){return new(j||P)(d.KVO(v.Qq),d.KVO(r.o),d.KVO(f.ob))};static#e=this.\u0275prov=d.jDH({token:P,factory:P.\u0275fac})}return P})()},2570:(O,M,i)=>{i.d(M,{y:()=>C});var t=i(8873),y=i(8559),s=i(6443),m=i(4821);const r="admin/view/",c=r+"all",d=r+"delete",v=r+"import",f=r+"polymorphism",g=r+"usage";let C=(()=>{class u{constructor(_,p,T){this.http=_,this.context=p,this.dnnContext=T}getAll(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(c),{params:{appId:this.context.appId.toString()}})}delete(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(d),{params:{appId:this.context.appId.toString(),Id:_.toString()}})}import(_){const p=new FormData;return p.append("File",_),this.http.post(this.dnnContext.$2sxc.http.apiUrl(v),p,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}export(_){const p=this.dnnContext.$2sxc.http.apiUrl(r+"json")+"?appId="+this.context.appId+"&viewId="+_;window.open(p,"_blank","")}getPolymorphism(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(f),{params:{appId:this.context.appId.toString()}})}getUsage(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(g),{params:{appId:this.context.appId.toString(),guid:_}})}static#t=this.\u0275fac=function(p){return new(p||u)(y.KVO(s.Qq),y.KVO(t.o),y.KVO(m.ob))};static#e=this.\u0275prov=y.jDH({token:u,factory:u.\u0275fac})}return u})()},7730:(O,M,i)=>{i.r(M),i.d(M,{ContentItemsComponent:()=>Ee});var t=i(8559),y=i(7941),s=i(2159),m=i(4205),r=i(5797),c=i(9999),d=i(271),v=i(1567),f=i(4334),g=i(7693),C=i(6360),u=i(1726),h=i(3454),_=i(1735),p=i(1960),T=i(4456),I=i(3804),x=i(5944),P=i(7984);const K=["valueInput"];let S=(()=>{class o{constructor(){this.filter="",this.idFilterString="",this.idFilter=[]}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.filter||this.idFilter.length>0}doesFilterPass(e){if(""!==this.filter){const a=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:l=>e.node.data[l],node:e.node});if(null==a||!a.some(l=>!!l&&l.includes(this.filter)))return!1}if(this.idFilter.length>0){const n=e.data[this.filterParams.colDef.headerName];if(null==n||!this.idFilter.some(a=>n.some(l=>l.Id===a)))return!1}return!0}getModel(){return this.isFilterActive()?{filterType:"entity",filter:this.filter,idFilter:this.idFilter}:void 0}setModel(e){this.filter=e?.filter??"",this.idFilter=e?.idFilter??[],this.idFilterString=e?.idFilter?.join(",")??""}afterGuiAttached(e){this.valueInputRef.nativeElement.focus()}updateIdFilter(){this.idFilter=this.idFilterString.split(",").map(e=>parseInt(e,10)).filter(e=>!isNaN(e))}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-entity-filter"]],viewQuery:function(n,a){if(1&n&&t.GBs(K,5),2&n){let l;t.mGM(l=t.lsd())&&(a.valueInputRef=l.first)}},standalone:!0,features:[t.aNF],decls:9,vars:2,consts:[["valueInput",""],["color","accent",1,"eav-mat-form-field"],["matInput","","type","text",3,"ngModelChange","ngModel"]],template:function(n,a){if(1&n){const l=t.RV6();t.j41(0,"mat-form-field",1)(1,"mat-label"),t.EFF(2,"Value"),t.k0s(),t.j41(3,"input",2,0),t.mxI("ngModelChange",function(b){return t.eBV(l),t.DH7(a.filter,b)||(a.filter=b),t.Njj(b)}),t.bIt("ngModelChange",function(){return t.eBV(l),t.Njj(a.filterChanged())}),t.k0s()(),t.j41(5,"mat-form-field",1)(6,"mat-label"),t.EFF(7,"IDs (comma separated)"),t.k0s(),t.j41(8,"input",2),t.mxI("ngModelChange",function(b){return t.eBV(l),t.DH7(a.idFilterString,b)||(a.idFilterString=b),t.Njj(b)}),t.bIt("ngModelChange",function(){return t.eBV(l),a.updateIdFilter(),t.Njj(a.filterChanged())}),t.k0s()()}2&n&&(t.R7$(3),t.R50("ngModel",a.filter),t.R7$(5),t.R50("ngModel",a.idFilterString))},dependencies:[T.YN,T.me,T.BC,T.vS,I.Wk,x.RG,x.rl,x.nJ,P.fS,P.fg],styles:["[_nghost-%COMP%]{display:block;padding:16px 12px 2px}.mat-mdc-form-field[_ngcontent-%COMP%]{display:block;width:175px}"]})}return o})();var j=i(6378),N=i(251),F=i(52),it=i(8172),V=i(3216),U=i(1034),A=i(3840),k=i(5060);function ot(o,E){if(1&o){const e=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.do("delete"))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Delete"),t.k0s()()}if(2&o){const e=t.XpG();t.Y8G("disabled",e.item._EditInfo.DisableDelete)}}let at=(()=>{class o{agInit(e){this.params=e,this.item=e.data}refresh(e){return!0}do(e){this.params.do(e,this.item)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-content-items-actions"]],standalone:!0,features:[t.aNF],decls:13,vars:1,consts:[["menu","matMenu"],[1,"actions-component"],["matRipple","","tippy","Copy",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","Export",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["matMenuContent",""],["mat-menu-item","",3,"click","disabled"]],template:function(n,a){if(1&n){const l=t.RV6();t.j41(0,"div",1)(1,"div",2),t.bIt("click",function(){return t.eBV(l),t.Njj(a.do("clone"))}),t.j41(2,"mat-icon"),t.EFF(3,"file_copy"),t.k0s()(),t.j41(4,"div",3),t.bIt("click",function(){return t.eBV(l),t.Njj(a.do("export"))}),t.j41(5,"mat-icon"),t.EFF(6,"cloud_download"),t.k0s()(),t.j41(7,"div",4)(8,"mat-icon"),t.EFF(9,"more_horiz"),t.k0s()()(),t.j41(10,"mat-menu",5,0),t.DNE(12,ot,5,1,"ng-template",6),t.k0s()}if(2&n){const l=t.sdS(11);t.R7$(7),t.Y8G("matMenuTriggerFor",l)}},dependencies:[k.pZ,k.r6,A.m_,A.An,U.Cn,U.kk,U.fb,U.z8,U.Cp]})}return o})();var W=i(7896);function st(o,E){if(1&o&&(t.j41(0,"span",1),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(e.entities)}}let rt=(()=>{class o{agInit(e){Array.isArray(e.value)&&(this.encodedValue=this.htmlEncode(e.value.join(", ")),e.colDef.allowMultiValue&&(this.entities=e.value.length))}refresh(e){return!0}htmlEncode(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-content-items-entity"]],standalone:!0,features:[t.aNF],decls:3,vars:3,consts:[[3,"tippy"],[1,"more-entities"]],template:function(n,a){1&n&&(t.j41(0,"div",0),t.DNE(1,st,2,1,"span",1),t.EFF(2),t.k0s()),2&n&&(t.Y8G("tippy",a.encodedValue),t.R7$(),t.vxM(1,a.entities?1:-1),t.R7$(),t.SpI(" ",a.encodedValue,"\n"))},dependencies:[W.e],styles:[".more-entities[_ngcontent-%COMP%]{padding:0 8px;border-radius:10px;border:1px solid rgba(29,39,61,.44);-webkit-user-select:none;user-select:none}"]})}return o})();var H=i(6256),G=i(316);const lt=o=>({"hide-until-row-hover":o});function dt(o,E){if(1&o){const e=t.RV6();t.j41(0,"div",4),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.openMetadata())}),t.j41(1,"mat-icon",5),t.EFF(2),t.k0s()()}if(2&o){const e=t.XpG();t.Y8G("ngClass",t.eq3(5,lt,!e.metadataCount&&!e.value.metadata))("tippy",e.metadataTooltip),t.R7$(),t.Y8G("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.R7$(),t.SpI("",e.value.metadata?"loyalty":"local_offer"," ")}}function ct(o,E){if(1&o&&(t.j41(0,"div",3)(1,"mat-icon",6),t.EFF(2),t.k0s()()),2&o){const e=t.XpG();t.R7$(),t.Y8G("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.R7$(),t.SpI("",e.value.metadata?"loyalty":"local_offer"," ")}}let pt=(()=>{class o{agInit(e){this.value=e.value,this.params=e,this.item=e.data,this.disableMetadata=this.item._EditInfo.DisableMetadata,this.metadataCount=this.item.Metadata?.length??0;const n=this.item.For;this.metadataTooltip=n?`This item is metadata for:\nTarget: ${n.Target}\nTargetType: ${n.TargetType}`+(n.KeyNumber?`\nNumber: ${n.KeyNumber}`:"")+(n.KeyString?`\nString: ${n.KeyString}`:"")+(n.KeyGuid?`\nGuid: ${n.KeyGuid}`:"")+(n.Title?`\nTitle: ${n.Title}`:""):"This item is not metadata.",this.metadataTooltip+=`\n\nThis item has ${this.metadataCount>0?this.metadataCount:"no"} other metadata ${1===this.metadataCount?"item":"items"} attached to it.`}refresh(e){return!0}openMetadata(){this.params.onOpenMetadata(this.item)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-content-items-status"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[[1,"actions-component"],[1,"eav-grid-action-button","icon",3,"tippy"],["matRipple","",1,"eav-grid-action-button","highlight",3,"ngClass","tippy"],[1,"eav-grid-action-button","disabled"],["matRipple","",1,"eav-grid-action-button","highlight",3,"click","ngClass","tippy"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"mat-icon"),t.EFF(3),t.k0s()(),t.DNE(4,dt,3,7,"div",2)(5,ct,3,3,"div",3),t.k0s()),2&n&&(t.R7$(),t.Y8G("tippy",a.value.published?"Published":"Not published"),t.R7$(2),t.JRh(a.value.published?"visibility":"visibility_off"),t.R7$(),t.vxM(4,a.disableMetadata?-1:4),t.R7$(),t.vxM(5,a.disableMetadata&&(a.metadataCount||a.value.metadata)?5:-1))},dependencies:[A.m_,A.An,k.pZ,k.r6,G.YU,H.Y,H.k,W.e],styles:[".hide-until-row-hover[_ngcontent-%COMP%]{visibility:hidden}  .ag-row-hover .hide-until-row-hover{visibility:visible}"]})}return o})();var ut=i(4038),z=i(8827),w=i(3037),L=i(1817),ht=i(3617),_t=i(5445),gt=i(3176),Q=i(5858),ft=i(8873),J=i(336),Ct=i(9417);function yt(o){return E=>{if(!E.value)return null;const e=o.controls.keyType.value,n=E.value.toString();switch(e){case F.YX.keyTypes.number:return/^[0-9]+$/.test(n)?null:{patternWholeNumber:!0};case F.YX.keyTypes.guid:const l=["{","}"].some(R=>n.includes(R)),D=n.substring(l?1:0,l?n.length-1:n.length);return(0,Ct.L)().test(D)?null:{patternGuid:!0};default:return null}}}var B=i(4175),Z=i(5175),vt=i(3758),Tt=i(9333),q=i(2220),Et=i(3826),Mt=i(8021),$=i(5437);const tt=o=>({active:o});function It(o,E){if(1&o&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&o){const e=E.$implicit;t.Y8G("value",e.targetType),t.R7$(),t.SpI(" ",e.label," ")}}function Dt(o,E){if(1&o&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.Y8G("value",e.formValues.targetType),t.R7$(),t.SpI(" ",e.formValues.targetType," ")}}function bt(o,E){if(1&o&&(t.j41(0,"mat-select",8),t.Z7z(1,It,2,2,"mat-option",12,t.fX1),t.DNE(3,Dt,2,2,"mat-option",12),t.k0s()),2&o){const e=t.XpG(),n=t.XpG();t.R7$(),t.Dyx(n.targetTypeOptions),t.R7$(2),t.vxM(3,e.unknownTargetType?3:-1)}}function xt(o,E){1&o&&t.nrm(0,"input",9)}function Ot(o,E){1&o&&(t.j41(0,"app-field-hint",10),t.EFF(1," Warning: you entered an unknown target type. This may work or may not. Please be sure you know what you're doing "),t.k0s()),2&o&&t.Y8G("isError",!1)}function Ft(o,E){if(1&o&&(t.j41(0,"app-field-hint",10),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.Y8G("isError",!1),t.R7$(),t.JRh(e.targetTypeHint)}}function Pt(o,E){1&o&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&o&&t.Y8G("isError",!0)}function Rt(o,E){1&o&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a whole number "),t.k0s()),2&o&&t.Y8G("isError",!0)}function St(o,E){if(1&o&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&o){const e=E.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function jt(o,E){1&o&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&o&&t.Y8G("isError",!0)}function At(o,E){if(1&o&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&o){const e=E.$implicit;t.Y8G("value",e.StaticName),t.R7$(),t.SpI(" ",e.Label," ")}}function Bt(o,E){if(1&o&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"Content Type"),t.k0s(),t.j41(3,"mat-select",19),t.Z7z(4,At,2,2,"mat-option",12,t.fX1),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.Y8G("placeholder",e.contentTypes.length?"":"No items found"),t.R7$(),t.Dyx(e.contentTypes)}}function kt(o,E){if(1&o&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&o){const e=E.$implicit;t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function $t(o,E){if(1&o&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"Scope"),t.k0s(),t.j41(3,"mat-select",20),t.Z7z(4,kt,2,2,"mat-option",12,t.fX1),t.j41(6,"mat-option",12),t.EFF(7,"Other..."),t.k0s()()()),2&o){const e=t.XpG(),n=t.XpG();t.R7$(3),t.Y8G("placeholder",e.scopeOptions.length?"":"No items found"),t.R7$(),t.Dyx(e.scopeOptions),t.R7$(2),t.Y8G("value",n.dropdownInsertValue)}}function Ut(o,E){if(1&o&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&o){const e=E.$implicit;t.Y8G("value",e.Guid),t.R7$(),t.Lme(" ",e.Title," (",e.Id,") ")}}function Gt(o,E){if(1&o&&(t.j41(0,"mat-select",21),t.Z7z(1,Ut,2,3,"mat-option",12,t.fX1),t.k0s()),2&o){const e=t.XpG(3);t.Y8G("placeholder",e.contentItems.length?"":"No items found"),t.R7$(),t.Dyx(e.contentItems)}}function Kt(o,E){1&o&&t.nrm(0,"input",22)}function Nt(o,E){if(1&o&&t.DNE(0,Gt,3,1,"mat-select",21)(1,Kt,1,0,"input",22),2&o){const e=t.XpG(2);t.vxM(0,e.guidedKey?0:-1),t.R7$(),t.vxM(1,e.guidedKey?-1:1)}}function Lt(o,E){if(1&o&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&o){const e=E.$implicit;t.Y8G("value",e.StaticName),t.R7$(),t.SpI(" ",e.Label," ")}}function Vt(o,E){if(1&o&&(t.j41(0,"mat-select",21),t.Z7z(1,Lt,2,2,"mat-option",12,t.fX1),t.k0s()),2&o){const e=t.XpG(3);t.Y8G("placeholder",e.contentTypes.length?"":"No items found"),t.R7$(),t.Dyx(e.contentTypes)}}function Wt(o,E){1&o&&t.nrm(0,"input",22)}function wt(o,E){if(1&o&&t.DNE(0,Vt,3,1,"mat-select",21)(1,Wt,1,0,"input",22),2&o){const e=t.XpG(2);t.vxM(0,e.guidedKey?0:-1),t.R7$(),t.vxM(1,e.guidedKey?-1:1)}}function Xt(o,E){1&o&&t.eu8(0)}function Yt(o,E){if(1&o&&t.DNE(0,Xt,1,0,"ng-container",23),2&o){t.XpG(2);const e=t.sdS(39);t.Y8G("ngTemplateOutlet",e)}}function Ht(o,E){if(1&o&&t.DNE(0,Nt,2,2)(1,wt,2,2)(2,Yt,1,1),2&o){let e;const n=t.XpG(),a=t.XpG();t.vxM(0,(e=n.formValues.targetType)===a.eavConstants.metadata.entity.targetType?0:e===a.eavConstants.metadata.contentType.targetType?1:2)}}function zt(o,E){1&o&&t.nrm(0,"input",22)}function Qt(o,E){1&o&&t.nrm(0,"input",24)}function Jt(o,E){if(1&o&&t.DNE(0,zt,1,0,"input",22)(1,Qt,1,0,"input",24),2&o){const e=t.XpG(),n=t.XpG();t.vxM(0,e.formValues.keyType!==n.eavConstants.keyTypes.number?0:-1),t.R7$(),t.vxM(1,e.formValues.keyType===n.eavConstants.keyTypes.number?1:-1)}}function Zt(o,E){1&o&&t.nrm(0,"input",22)}function qt(o,E){1&o&&t.nrm(0,"input",24)}function te(o,E){if(1&o&&t.DNE(0,Zt,1,0,"input",22)(1,qt,1,0,"input",24),2&o){const e=t.XpG(),n=t.XpG();t.vxM(0,e.formValues.keyType!==n.eavConstants.keyTypes.number?0:-1),t.R7$(),t.vxM(1,e.formValues.keyType===n.eavConstants.keyTypes.number?1:-1)}}function ee(o,E){if(1&o){const e=t.RV6();t.j41(0,"div",14)(1,"button",25),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.toggleGuidedKey(!0))}),t.j41(2,"mat-icon",26),t.EFF(3,"search"),t.k0s()(),t.j41(4,"button",27),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.toggleGuidedKey(!1))}),t.j41(5,"mat-icon",26),t.EFF(6,"text_fields"),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(2,tt,e.guidedKey)),t.R7$(3),t.Y8G("ngClass",t.eq3(4,tt,!e.guidedKey))}}function ne(o,E){1&o&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&o&&t.Y8G("isError",!0)}function ie(o,E){1&o&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a whole number "),t.k0s()),2&o&&t.Y8G("isError",!0)}function oe(o,E){1&o&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a valid GUID "),t.k0s()),2&o&&t.Y8G("isError",!0)}function ae(o,E){if(1&o){const e=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3,"Create Metadata"),t.k0s()(),t.j41(4,"div",4)(5,"p"),t.EFF(6," This is a special operation to add an item which is metadata for another item, see "),t.j41(7,"a",5),t.EFF(8,"docs"),t.k0s(),t.EFF(9,". "),t.k0s(),t.j41(10,"form",6)(11,"mat-form-field",7)(12,"mat-label"),t.EFF(13,"Target"),t.k0s(),t.DNE(14,bt,4,1,"mat-select",8)(15,xt,1,0,"input",9),t.k0s(),t.DNE(16,Ot,2,1,"app-field-hint",10)(17,Ft,2,2,"app-field-hint",10)(18,Pt,2,1,"app-field-hint",10)(19,Rt,2,1,"app-field-hint",10),t.j41(20,"mat-form-field",7)(21,"mat-label"),t.EFF(22,"Key type"),t.k0s(),t.j41(23,"mat-select",11),t.Z7z(24,St,2,2,"mat-option",12,t.fX1),t.k0s()(),t.DNE(26,jt,2,1,"app-field-hint",10)(27,Bt,6,1,"mat-form-field",7)(28,$t,8,2,"mat-form-field",7),t.j41(29,"app-field-hint"),t.EFF(30," The scope should almost never be changed - "),t.j41(31,"a",13),t.EFF(32,"see help"),t.k0s()(),t.j41(33,"mat-form-field",7)(34,"mat-label"),t.EFF(35,"Key"),t.k0s(),t.DNE(36,Ht,3,1)(37,Jt,2,2)(38,te,2,2,"ng-template",null,0,t.C5r)(40,ee,7,6,"div",14),t.k0s(),t.DNE(41,ne,2,1,"app-field-hint",10)(42,ie,2,1,"app-field-hint",10)(43,oe,2,1,"app-field-hint",10),t.k0s()(),t.j41(44,"mat-dialog-actions",15)(45,"mat-slide-toggle",16),t.bIt("change",function(a){t.eBV(e);const l=t.XpG();return t.Njj(l.toggleGuidedMode(a))}),t.EFF(46),t.k0s(),t.j41(47,"div")(48,"button",17),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.closeDialog())}),t.EFF(49,"Cancel"),t.k0s(),t.j41(50,"button",18),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.confirm())}),t.EFF(51," Confirm "),t.k0s()()()()}if(2&o){const e=E,n=t.XpG();t.R7$(10),t.Y8G("formGroup",n.form),t.R7$(4),t.vxM(14,e.guidedMode?14:-1),t.R7$(),t.vxM(15,e.guidedMode?-1:15),t.R7$(),t.vxM(16,n.form.controls.targetType.touched&&!n.form.controls.targetType.invalid&&e.unknownTargetType?16:-1),t.R7$(),t.vxM(17,e.targetTypeHint?17:-1),t.R7$(),t.vxM(18,n.form.controls.targetType.touched&&null!=n.form.controls.targetType.errors&&n.form.controls.targetType.errors.required?18:-1),t.R7$(),t.vxM(19,n.form.controls.targetType.touched&&null!=n.form.controls.targetType.errors&&n.form.controls.targetType.errors.pattern?19:-1),t.R7$(5),t.Dyx(e.keyTypeOptions),t.R7$(2),t.vxM(26,n.form.controls.keyType.touched&&null!=n.form.controls.keyType.errors&&n.form.controls.keyType.errors.required?26:-1),t.R7$(),t.vxM(27,e.guidedMode&&e.formValues.targetType===n.eavConstants.metadata.entity.targetType?27:-1),t.R7$(),t.vxM(28,!e.guidedMode||e.formValues.targetType!==n.eavConstants.metadata.entity.targetType&&e.formValues.targetType!==n.eavConstants.metadata.contentType.targetType?-1:28),t.R7$(8),t.vxM(36,e.guidedMode?36:37),t.R7$(4),t.vxM(40,e.guidedMode&&e.guidedKeyExists?40:-1),t.R7$(),t.vxM(41,n.form.controls.key.touched&&null!=n.form.controls.key.errors&&n.form.controls.key.errors.required?41:-1),t.R7$(),t.vxM(42,n.form.controls.key.touched&&null!=n.form.controls.key.errors&&n.form.controls.key.errors.patternWholeNumber?42:-1),t.R7$(),t.vxM(43,n.form.controls.key.touched&&null!=n.form.controls.key.errors&&n.form.controls.key.errors.patternGuid?43:-1),t.R7$(2),t.Y8G("tippy",e.guidedMode?"Guided mode helps you select options that work":"Manual mode is for advanced uses and allows you to insert any values")("checked",e.guidedMode),t.R7$(),t.SpI(" ",e.guidedMode?"Guided":"Manual"," "),t.R7$(4),t.Y8G("disabled",!n.form.valid)}}let se=(()=>{class o extends gt.${constructor(e,n){super(),this.dialogRef=e,this.context=n,this.hostClass="dialog-component",this.eavConstants=F.YX,this.dropdownInsertValue=Q.O,this.contentItemsService=(0,$.d)(J.F),this.contentTypesService=(0,$.d)(_t.gs)}ngOnInit(){this.targetTypeOptions=Object.values(F.YX.metadata).map(n=>({...n})),this.keyTypeOptions=Object.values(F.YX.keyTypes),this.keyTypeOptions$=new r.t([]),this.scopeOptions$=new r.t([]),this.guidedMode$=new r.t(!0),this.contentItems$=new r.t([]),this.contentTypes$=new r.t([]),this.guidedKey$=new r.t(!0),this.fetchScopes(),this.form=new T.J3({}),this.form.addControl("targetType",new T.hs(F.YX.metadata.entity.targetType,[T.k0.required,T.k0.pattern(/^[0-9]+$/)])),this.form.addControl("keyType",new T.hs(F.YX.metadata.entity.keyType,[T.k0.required])),this.form.addControl("contentTypeForContentItems",new T.hs(null)),this.form.addControl("scopeForContentTypes",new T.hs(F.YX.scopes.default.value)),this.form.addControl("key",new T.hs(null,[T.k0.required,yt(this.form)])),this.subscriptions.add(this.form.controls.scopeForContentTypes.valueChanges.pipe((0,w.Z)(this.form.controls.scopeForContentTypes.value),(0,L.F)()).subscribe(n=>{null!=this.form.controls.contentTypeForContentItems.value&&this.form.controls.contentTypeForContentItems.patchValue(null),n===Q.O?(n=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||F.YX.scopes.default.value,this.scopeOptions$.value.some(a=>a.value===n)||this.scopeOptions$.next([{name:n,value:n},...this.scopeOptions$.value]),this.form.controls.scopeForContentTypes.patchValue(n)):this.fetchContentTypes(n)})),this.subscriptions.add((0,ht.h)(this.form.controls.targetType.valueChanges.pipe((0,L.F)()),this.form.controls.keyType.valueChanges.pipe((0,L.F)())).subscribe(()=>{this.guidedKey$.next(!0),null!=this.form.getRawValue().key&&this.form.patchValue({key:null})})),this.subscriptions.add(this.form.controls.contentTypeForContentItems.valueChanges.pipe((0,w.Z)(this.form.controls.contentTypeForContentItems.value),(0,L.F)()).subscribe(n=>{const a=this.form.getRawValue();a.targetType===F.YX.metadata.entity.targetType&&null!=a.key&&this.form.patchValue({key:null}),this.contentItemsService.getAll(n).subscribe(l=>{this.contentItems$.next(l)})}));const e=this.form.valueChanges.pipe((0,w.Z)(this.form.getRawValue()),(0,d.T)(()=>this.form.getRawValue()),(0,Mt.A)(n=>n));this.subscriptions.add((0,c.z)([e,this.guidedMode$]).subscribe(([n,a])=>{const l=this.targetTypeOptions.find(nt=>nt.targetType===n.targetType),D=a&&l?[l.keyType]:[...this.keyTypeOptions];Et.a.arraysEqual(D,this.keyTypeOptions$.value)||this.keyTypeOptions$.next(D);const b={};this.keyTypeOptions$.value.includes(n.keyType)||(b.keyType=this.keyTypeOptions$.value[0]);const R=a&&n.targetType===F.YX.metadata.app.targetType;R&&n.key!==this.context.appId&&(b.key=this.context.appId),Object.keys(b).length&&this.form.patchValue(b),q.D.disableControl(this.form.controls.keyType,a&&this.keyTypeOptions$.value.length<=1),q.D.disableControl(this.form.controls.key,R)})),this.viewModel$=(0,c.z)([(0,c.z)([this.guidedMode$,this.keyTypeOptions$,this.scopeOptions$,this.contentItems$,this.contentTypes$]),(0,c.z)([e,this.guidedKey$])]).pipe((0,d.T)(([[n,a,l,D,b],[R,X]])=>({guidedMode:n,unknownTargetType:!this.targetTypeOptions.some(Y=>Y.targetType===R.targetType),targetTypeHint:n&&this.targetTypeOptions.find(Y=>Y.targetType===R.targetType)?.hint,keyTypeOptions:a,scopeOptions:l,guidedKey:X,guidedKeyExists:[F.YX.metadata.entity.targetType,F.YX.metadata.contentType.targetType].includes(R.targetType),formValues:R,contentItems:D,contentTypes:b})))}ngOnDestroy(){this.guidedMode$.complete(),this.keyTypeOptions$.complete(),this.contentItems$.complete(),this.contentTypes$.complete(),this.guidedKey$.complete(),super.ngOnDestroy()}closeDialog(e){this.dialogRef.close(e)}toggleGuidedKey(e){this.guidedKey$.next(e)}toggleGuidedMode(e){this.guidedMode$.next(e.checked)}confirm(){const e=this.form.getRawValue(),n={target:this.targetTypeOptions.find(a=>a.targetType===e.targetType)?.target,targetType:e.targetType,keyType:e.keyType,key:e.keyType===F.YX.keyTypes.guid?e.key.replace(/{|}/g,""):e.key.toString()};this.closeDialog(n)}fetchContentTypes(e){this.contentTypesService.retrieveContentTypes(e).subscribe(n=>{this.contentTypes$.next(n)})}fetchScopes(){this.contentTypesService.getScopes().subscribe(e=>{this.scopeOptions$.next(e)})}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(y.CP),t.rXU(ft.o))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-create-metadata-dialog"]],hostVars:1,hostBindings:function(n,a){2&n&&t.Mr5("className",a.hostClass)},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[["defaultKeyInput",""],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],["href","https://go.2sxc.org/metadata","target","_blank"],[3,"formGroup"],["color","accent",2,"width","100%","margin-bottom","8px"],["formControlName","targetType","required",""],["matInput","","type","number","min","0","formControlName","targetType","required",""],[3,"isError"],["formControlName","keyType","required",""],[3,"value"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matTextSuffix","",1,"eav-selection-suffix"],[1,"eav-dialog-actions"],["color","accent",3,"change","tippy","checked"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click","disabled"],["formControlName","contentTypeForContentItems",3,"placeholder"],["formControlName","scopeForContentTypes",3,"placeholder"],["formControlName","key","required","",3,"placeholder"],["matInput","","type","text","formControlName","key","required",""],[4,"ngTemplateOutlet"],["matInput","","type","number","formControlName","key","required",""],["mat-icon-button","","type","button","tippy","Pick existing value",1,"eav-selection-suffix-button",3,"click","ngClass"],[1,"eav-icon"],["mat-icon-button","","type","button","tippy","Manual entry",1,"eav-selection-suffix-button",3,"click","ngClass"]],template:function(n,a){if(1&n&&(t.DNE(0,ae,52,19,"div",1),t.nI1(1,"async")),2&n){let l;t.vxM(0,(l=t.bMT(1,1,a.viewModel$))?0:-1,l)}},dependencies:[T.YN,T.qT,T.me,T.Q0,T.BC,T.cb,T.YS,T.VZ,T.X1,T.j4,T.JD,x.RG,x.rl,x.nJ,x.yw,Z.Ve,Z.VO,k.wT,k.Sy,P.fS,P.fg,G.T3,B.Hl,B.$z,B.iY,G.YU,A.m_,A.An,y.E7,z.mV,z.sG,G.Jj,vt.F,Tt.c,W.e]})}return o})(),re=(()=>{class o{constructor(){this.published="",this.metadata="",this.hasMetadata=""}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.published||""!==this.metadata||""!==this.hasMetadata}doesFilterPass(e){let n=!1,a=!1,l=!1;const b=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:R=>e.node.data[R],node:e.node});return n=""===this.published||null!=b.published&&b.published.toString()===this.published,a=""===this.metadata||null!=b.metadata&&b.metadata.toString()===this.metadata,l=""===this.hasMetadata||null!=b.hasMetadata&&b.hasMetadata.toString()===this.hasMetadata,n&&a&&l}getModel(){return this.isFilterActive()?{filterType:"pub-meta",published:this.published,metadata:this.metadata,hasMetadata:this.hasMetadata}:void 0}setModel(e){this.published=e?e.published:"",this.metadata=e?e.metadata:"",this.hasMetadata=e?e.hasMetadata:""}afterGuiAttached(e){}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-pub-meta-filter"]],standalone:!0,features:[t.aNF],decls:27,vars:3,consts:[[1,"title"],[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(n,a){1&n&&(t.j41(0,"div",0),t.EFF(1,"Published"),t.k0s(),t.j41(2,"mat-radio-group",1),t.mxI("ngModelChange",function(D){return t.DH7(a.published,D)||(a.published=D),D}),t.bIt("ngModelChange",function(){return a.filterChanged()}),t.j41(3,"mat-radio-button",2),t.EFF(4,"All"),t.k0s(),t.j41(5,"mat-radio-button",3),t.EFF(6,"Published"),t.k0s(),t.j41(7,"mat-radio-button",4),t.EFF(8,"Not published"),t.k0s()(),t.j41(9,"div",0),t.EFF(10,"Is Metadata"),t.k0s(),t.j41(11,"mat-radio-group",1),t.mxI("ngModelChange",function(D){return t.DH7(a.metadata,D)||(a.metadata=D),D}),t.bIt("ngModelChange",function(){return a.filterChanged()}),t.j41(12,"mat-radio-button",2),t.EFF(13,"All"),t.k0s(),t.j41(14,"mat-radio-button",3),t.EFF(15,"Is metadata"),t.k0s(),t.j41(16,"mat-radio-button",4),t.EFF(17,"Is not metadata"),t.k0s()(),t.j41(18,"div",0),t.EFF(19,"Has Metadata"),t.k0s(),t.j41(20,"mat-radio-group",1),t.mxI("ngModelChange",function(D){return t.DH7(a.hasMetadata,D)||(a.hasMetadata=D),D}),t.bIt("ngModelChange",function(){return a.filterChanged()}),t.j41(21,"mat-radio-button",2),t.EFF(22,"All"),t.k0s(),t.j41(23,"mat-radio-button",3),t.EFF(24,"Has metadata"),t.k0s(),t.j41(25,"mat-radio-button",4),t.EFF(26,"Has no metadata"),t.k0s()()),2&n&&(t.R7$(2),t.R50("ngModel",a.published),t.R7$(9),t.R50("ngModel",a.metadata),t.R7$(9),t.R50("ngModel",a.hasMetadata))},dependencies:[I.Wk,I.VT,I._g,T.YN,T.BC,T.vS],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return o})();var le=i(6817),et=i(1828),de=i(9914),ce=i(4575),pe=i(7037),ue=i(5699),me=i(8147),he=i(9431),_e=i(3347),ge=i(9841);function fe(o,E){1&o&&(t.nrm(0,"div",5),t.nI1(1,"safeHtml")),2&o&&t.Y8G("innerHTML",t.bMT(1,1,E),t.npT)}function Ce(o,E){if(1&o){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.debugFilter())}),t.j41(1,"mat-icon",11),t.EFF(2,"filter_list"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Filter"),t.k0s()()}}function ye(o,E){if(1&o){const e=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.closeDialog())}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",4),t.nrm(8,"router-outlet"),t.DNE(9,fe,2,3,"div",5),t.j41(10,"div",6)(11,"ag-grid-angular",7),t.bIt("gridReady",function(a){t.eBV(e);const l=t.XpG();return t.Njj(l.onGridReady(a))})("filesDropped",function(a){t.eBV(e);const l=t.XpG();return t.Njj(l.filesDropped(a))}),t.k0s()()(),t.j41(12,"mat-dialog-actions",8)(13,"div",9)(14,"button",10),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.exportContent())}),t.j41(15,"mat-icon",11),t.EFF(16,"cloud_download"),t.k0s(),t.j41(17,"span"),t.EFF(18,"Data"),t.k0s()(),t.j41(19,"button",12),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.importContent())}),t.j41(20,"mat-icon",11),t.EFF(21,"cloud_upload"),t.k0s(),t.j41(22,"span"),t.EFF(23,"Data"),t.k0s()(),t.j41(24,"button",13),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.importItem())}),t.j41(25,"mat-icon",11),t.EFF(26,"cloud_upload"),t.k0s(),t.j41(27,"span"),t.EFF(28,"Item"),t.k0s()(),t.j41(29,"button",14),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.createMetadata())}),t.j41(30,"mat-icon",11),t.EFF(31,"local_offer"),t.k0s(),t.j41(32,"span"),t.EFF(33,"Create Metadata"),t.k0s()(),t.DNE(34,Ce,5,0,"button",15),t.k0s(),t.j41(35,"button",16),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.editItem(null))}),t.j41(36,"mat-icon"),t.EFF(37,"add"),t.k0s()()()()}if(2&o){let e;const n=E,a=t.XpG();t.R7$(3),t.SpI(" ",n.contentType.Label||n.contentType.Name," Data "),t.R7$(6),t.vxM(9,(e=null==n.contentType||null==n.contentType.Properties?null:n.contentType.Properties.ListInstructions)?9:-1,e),t.R7$(2),t.Y8G("rowData",n.items)("gridOptions",a.gridOptions)("allowedFileTypes","xml,json"),t.R7$(23),t.vxM(34,a.isDebug()?34:-1)}}let Ee=(()=>{class o extends _.V{constructor(e,n,a,l,D,b,R){super(e,n,new me.B("ContentItemsComponent",!1)),this.router=e,this.route=n,this.dialogRef=a,this.snackBar=l,this.dialog=D,this.viewContainerRef=b,this.changeDetectorRef=R,this.contentType$=new m.B,this.items$=new r.t(void 0),this.gridOptions={...N.C},this.gridApi$=new r.t(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName"),this.entitiesService=(0,$.d)(le.R),this.contentExportService=(0,$.d)(C.D),this.isDebug=(0,t.WQX)(he.B).isDebug,this.contentItemsService=(0,$.d)(J.F),this.contentTypesService=(0,$.d)(g.g)}ngOnInit(){this.fetchContentType(),this.fetchItems(),this.fetchColumns(),this.subscriptions.add(this.childDialogClosed$().subscribe(()=>{this.fetchItems()})),this.viewModel$=(0,c.z)([this.contentType$,this.items$]).pipe((0,d.T)(([e,n])=>({contentType:e,items:n})))}ngOnDestroy(){this.contentType$.complete(),this.items$.complete(),this.gridApi$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onGridReady(e){this.gridApi$.next(e.api)}fetchContentType(){this.contentTypesService.retrieveContentType(this.contentTypeStaticName).subscribe(e=>{this.contentType$.next(e)})}fetchItems(){this.contentItemsService.getAll(this.contentTypeStaticName).subscribe(e=>{this.items$.next(e)})}fetchColumns(){this.contentItemsService.getColumns(this.contentTypeStaticName).subscribe(e=>{const n=e.filter(D=>!D.IsEphemeral),a=this.buildColumnDefs(n),l=function mt(o,E){if(!o)return;let e;"="===o.charAt(o.length-1)&&(o=atob(o));try{e=JSON.parse(o)}catch{console.error("Can't parse JSON with filters from url:",o)}if(!e)return;const n={};return(e.IsPublished||e.IsMetadata)&&(n.Status={filterType:"pub-meta",published:e.IsPublished??"",metadata:e.IsMetadata??"",hasMetadata:""}),Object.entries(e).filter(([a,l])=>"IsPublished"!==a&&"IsMetadata"!==a).forEach(([a,l])=>{if(E.find(b=>b.headerName===a)?.filter!==S){if("string"==typeof l)n[a]={filterType:"text",type:"equals",filter:l};else if("number"==typeof l)n[a]={filterType:"number",type:"equals",filter:l,filterTo:null};else if("boolean"==typeof l){const b={filterType:"boolean",filter:l.toString()};n[a]=b}}else{const b={filterType:"entity",filter:"string"==typeof(l=ut.i.tryParse(l)??l)?l:void 0,idFilter:"number"==typeof l?[l]:Array.isArray(l)?l.filter(R=>"number"==typeof R):void 0};n[a]=b}}),n}(sessionStorage.getItem(it.bo),a);this.gridApi$.value?this.setColumnDefs(a,l):this.gridApi$.pipe((0,v.p)(D=>null!=D),(0,f.s)(1)).subscribe(D=>{this.setColumnDefs(a,l)})})}setColumnDefs(e,n){this.gridApi$.value.setColumnDefs(e),n&&(this.log.a("Will try to apply filter:",n),this.gridApi$.value.setFilterModel(n))}openMetadata(e){const n=h.H.getUrlEntity(e.Guid,`Metadata for Entity: ${e._Title} (${e.Id})`,this.contentTypeStaticName);this.router.navigate([n],{relativeTo:this.route})}editItem(e){const a=(0,V.s)({items:[null==e?{ContentTypeName:this.contentTypeStaticName}:{EntityId:e.Id}]});this.router.navigate([`edit/${a}`],{relativeTo:this.route})}exportContent(){const e=this.gridApi$.value.getFilterModel(),n=Object.keys(e).length>0,a=[];n&&this.gridApi$.value.forEachNodeAfterFilterAndSort(l=>{a.push(l.data.Id)}),this.router.navigate([`export/${this.contentTypeStaticName}${a.length>0?`/${a}`:""}`],{relativeTo:this.route})}filesDropped(e){const n=e[0];switch(n.name.substring(n.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":this.importContent(e);break;case"json":this.importItem(e)}}importContent(e){this.router.navigate([`${this.contentTypeStaticName}/import`],{relativeTo:this.route,state:{files:e}})}importItem(e){this.router.navigate(["import"],{relativeTo:this.route,state:{files:e}})}createMetadata(){this.dialog.open(se,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(n=>{if(null==n)return;const a={items:[{ContentTypeName:this.contentTypeStaticName,For:{Target:n.target??n.targetType.toString(),TargetType:n.targetType,...n.keyType===F.YX.keyTypes.guid&&{Guid:n.key},...n.keyType===F.YX.keyTypes.number&&{Number:parseInt(n.key,10)},...n.keyType===F.YX.keyTypes.string&&{String:n.key}}}]},l=(0,V.s)(a);this.router.navigate([`edit/${l}`],{relativeTo:this.route}),this.changeDetectorRef.markForCheck()})}debugFilter(){console.warn("Current filter:",this.gridApi$.value.getFilterModel()),this.snackBar.open("Check console for filter information",void 0,{duration:3e3})}buildColumnDefs(e){const n=[{...et.r.Id,cellClass:a=>("id-action no-padding no-outline "+(a.data._EditInfo.ReadOnly?"disabled":"")).split(" "),cellRenderer:j.L,cellRendererParams:{tooltipGetter:l=>`ID: ${l.Id}\nRepoID: ${l._RepositoryId}\nGUID: ${l.Guid}`}},{field:"Status",width:82,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),filter:re,valueGetter:a=>{const l=a.data;return{published:l.IsPublished,metadata:!!l.For,hasMetadata:!!l.Metadata&&l.Metadata.length>0}},cellRenderer:pt,cellRendererParams:{onOpenMetadata:l=>this.openMetadata(l)}},{headerName:"Item (Entity)",field:"_Title",flex:2,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agTextColumnFilter",onCellClicked:a=>{this.editItem(a.data)}},{headerName:"Stats",headerTooltip:"Used by others / uses others",field:"_Used",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:a=>{const l=a.data;return`${l._Used} / ${l._Uses}`}},{...et.r.ActionsPinnedRight3,cellRenderer:at,cellRendererParams:{do:(l,D)=>{switch(l){case"clone":this.clone(D);break;case"export":this.export(D);break;case"delete":this.delete(D)}}}}];for(const a of e){const l={headerName:a.StaticName,field:a.StaticName,flex:2,minWidth:250,cellClass:"no-outline",sortable:!0};switch(a.Type){case u.O.Entity:l.allowMultiValue=a.Metadata?.Entity?.AllowMultiValue??!0,l.cellRenderer=rt,l.valueGetter=this.valueGetterEntityField,l.filter=S;break;case u.O.DateTime:l.useTimePicker=a.Metadata?.DateTime?.UseTimePicker??!1,l.valueGetter=this.valueGetterDateTime,l.filter="agTextColumnFilter";break;case u.O.Boolean:l.valueGetter=this.valueGetterBoolean,l.filter=p.y;break;case u.O.Number:l.filter="agNumberColumnFilter";break;default:l.filter="agTextColumnFilter"}n.push(l)}return n}clone(e){const a=(0,V.s)({items:[{ContentTypeName:this.contentTypeStaticName,DuplicateEntity:e.Id}]});this.router.navigate([`edit/${a}`],{relativeTo:this.route})}export(e){this.contentExportService.exportEntity(e.Id,this.contentTypeStaticName,!0)}delete(e){confirm(`Delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.entitiesService.delete(this.contentTypeStaticName,e._RepositoryId,!1).subscribe({next:()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()},error:n=>{this.snackBar.dismiss(),confirm(`${n.error.ExceptionMessage}\n\nDo you want to force delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.entitiesService.delete(this.contentTypeStaticName,e._RepositoryId,!0).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()}))}}))}valueGetterEntityField(e){const n=e.data[e.colDef.field];return 0===n.length?null:n.map(a=>a.Title)}valueGetterDateTime(e){const n=e.data[e.colDef.field];return n?e.colDef.useTimePicker?n.replace("T"," ").replace("Z",""):n.split("T")[0]:null}valueGetterBoolean(e){const n=e.data[e.colDef.field];return"boolean"!=typeof n?null:n.toString()}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(s.Ix),t.rXU(s.nX),t.rXU(y.CP),t.rXU(_e.UG),t.rXU(y.bZ),t.rXU(t.c1b),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-content-items"]],standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[["appToggleDebug","",1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[3,"innerHTML"],[1,"grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"gridReady","filesDropped","rowData","gridOptions","allowedFileTypes"],[1,"eav-dialog-actions"],[1,"eav-dialog-actions-div"],["mat-button","","tippy","Export xml list",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["mat-button","","tippy","Import xml list",1,"eav-button__with-icon",3,"click"],["mat-button","","tippy","Import single json item",1,"eav-button__with-icon",3,"click"],["mat-button","","tippy","Create metadata",1,"eav-button__with-icon",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",1,"eav-button__with-icon"],["mat-fab","","mat-elevation-z24","","tippy","Add item",1,"grid-fab",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",1,"eav-button__with-icon",3,"click"]],template:function(n,a){if(1&n&&(t.DNE(0,ye,38,6,"div",0),t.nI1(1,"async")),2&n){let l;t.vxM(0,(l=t.bMT(1,1,a.viewModel$))?0:-1,l)}},dependencies:[B.Hl,B.$z,B.iY,B.Sr,A.m_,A.An,s.n3,y.E7,G.Jj,de.$,ce.S,ue.V,pe.p,ge.xs]})}return o})()},2871:(O,M,i)=>{i.d(M,{J:()=>s});var t=i(3840),y=i(8559);let s=(()=>{class m{constructor(){this.trueIcon="check_circle",this.falseIcon="circle"}agInit(c){let d=c.value;c.reverse&&(d=!d),c.trueIcon&&(this.trueIcon=c.trueIcon),c.falseIcon&&(this.falseIcon=c.falseIcon),this.icon=d?this.trueIcon:this.falseIcon}refresh(c){return!0}static#t=this.\u0275fac=function(d){return new(d||m)};static#e=this.\u0275cmp=y.VBU({type:m,selectors:[["app-rest-api-true-false"]],standalone:!0,features:[y.aNF],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(d,v){1&d&&(y.j41(0,"div",0)(1,"mat-icon"),y.EFF(2),y.k0s()()),2&d&&(y.R7$(2),y.JRh(v.icon))},dependencies:[t.m_,t.An],encapsulation:2})}return m})()},1772:(O,M,i)=>{i.d(M,{I:()=>f,u:()=>v});var t=i(6647),y=i(9452),s=i(3550),m=i(8873),r=i(8559),c=i(6443),d=i(4821);const v="admin/app/";let f=(()=>{class g{constructor(u,h,_){this.http=u,this.context=h,this.dnnContext=_}importApp(u,h,_=!1){const p=new FormData;return p.append("File",u),p.append("Name",h??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(v+"Import"),p,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(T=>{if(_&&T.Messages[0]?.MessageType===s.G1.Warning){const I=prompt(T.Messages[0].Text+" Would you like to install it using another folder name?");if(I)return this.importApp(u,I,!0)}return(0,y.of)(T)}))}static#t=this.\u0275fac=function(h){return new(h||g)(r.KVO(c.Qq),r.KVO(m.o),r.KVO(d.ob))};static#e=this.\u0275prov=r.jDH({token:g,factory:g.\u0275fac})}return g})()},8991:(O,M,i)=>{i.d(M,{N:()=>C});const t={states:{true:{tooltip:"true/on",icon:"radio_button_checked"},false:{tooltip:"false/off",icon:"radio_button_unchecked"}}};var y=i(7896),s=i(3840),m=i(316),r=i(8559);const c=u=>({clickable:u});function d(u,h){1&u&&r.eu8(0)}function v(u,h){if(1&u&&(r.j41(0,"a",2),r.DNE(1,d,1,0,"ng-container",3),r.k0s()),2&u){const _=r.XpG(),p=r.sdS(4);r.Y8G("href",_.data.url,r.B4B),r.R7$(),r.Y8G("ngTemplateOutlet",p)}}function f(u,h){if(1&u&&(r.j41(0,"div",4)(1,"mat-icon"),r.EFF(2),r.k0s()()),2&u){const _=r.XpG();r.Y8G("ngClass",r.eq3(3,c,_.data.clickable))("tippy",_.data.tooltip),r.R7$(2),r.JRh(_.data.icon)}}function g(u,h){if(1&u&&(r.j41(0,"div",4)(1,"mat-icon"),r.EFF(2),r.k0s()()),2&u){const _=r.XpG();r.Y8G("ngClass",r.eq3(3,c,_.data.clickable))("tippy",_.data.tooltip),r.R7$(2),r.JRh(_.data.icon)}}let C=(()=>{class u{agInit(_){this.value=_.value,this.allSettings=_.settings?.(_.data)??t;const p=this.allSettings.states[this.value?"true":"false"];this.data={...p,url:p.url??p.getUrl?.(_.data)}}refresh(_){return!0}static#t=this.\u0275fac=function(p){return new(p||u)};static#e=this.\u0275cmp=r.VBU({type:u,selectors:[["app-ag-bool-icon-renderer"]],standalone:!0,features:[r.aNF],decls:5,vars:1,consts:[["showIcon",""],[1,"icon-container"],["target","_blank",3,"href"],[4,"ngTemplateOutlet"],[1,"icon-cell","icon",3,"ngClass","tippy"]],template:function(p,T){1&p&&(r.j41(0,"div",1),r.DNE(1,v,2,2,"a",2)(2,f,3,5),r.k0s(),r.DNE(3,g,3,5,"ng-template",null,0,r.C5r)),2&p&&(r.R7$(),r.vxM(1,T.data.url?1:2))},dependencies:[y.e,s.m_,s.An,m.YU],encapsulation:2})}return u})()},1828:(O,M,i)=>{i.d(M,{r:()=>m});var t=i(1960),y=i(8991),s=i(2871);class m{static#t=this.ActionsPinnedRight1={width:42,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#e=this.ActionsPinnedRight3={width:122,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#n=this.ActionsPinnedRight4={width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#i=this.ActionsPinnedRight5={width:202,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#o=this.ActionsPinnedRight6={width:82,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#a=this.ActionsPinnedRight7={width:62,cellClass:"secondary-action no-outline no-padding".split(" "),pinned:"right"};static#s=this.IconShow={headerName:"Show",width:70,headerClass:"dense",cellClass:"icons no-outline".split(" "),sortable:!0,filter:t.y,valueGetter:c=>!c.data.IsHidden,cellRenderer:y.N};static#r=this.Items={width:102,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#l=this.Fields={width:94,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#d=this.Character={width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#c=this.Id={headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#p=this.Boolean={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0};static#u=this.Boolean2={width:100,sortable:!0,cellClass:"no-outline",filter:t.y};static#m=this.Boolean3={headerClass:"dense",width:80,cellClass:"no-outline",cellRenderer:s.J,cellRendererParams:{reverse:!1}};static#h=this.Number={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#_=this.TextWideType={flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agTextColumnFilter"};static#g=this.TextWide={flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#f=this.TextWideMin100={flex:1,minWidth:100,sortable:!0,filter:"agTextColumnFilter"};static#C=this.TextWideFlex3={flex:3,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#y=this.TextNarrow={flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#v=this.TextWideActionClass={flex:2,minWidth:250,cellClass:"primary-action no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter"}}},1735:(O,M,i)=>{i.d(M,{V:()=>f});var t=i(2159),y=i(1567),s=i(3037),m=i(271),r=i(5057),c=i(3176),d=i(8147);class f extends c.${constructor(C,u,h){super(),this.router=C,this.route=u,this.log=h,this.log??=new d.B("BaseComponent",!1)}childDialogClosed$(){return this.router.events.pipe((0,y.p)(C=>C instanceof t.wF),(0,s.Z)(!!this.route.snapshot.firstChild),(0,m.T)(()=>!!this.route.snapshot.firstChild),(0,r.J)(),(0,y.p)(([C,u])=>C&&!u))}}},1960:(O,M,i)=>{i.d(M,{y:()=>m});var t=i(4456),y=i(3804),s=i(8559);let m=(()=>{class r{constructor(){this.filter=""}agInit(d){this.filterParams=d}isFilterActive(){return""!==this.filter}doesFilterPass(d){const f=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:d.node.data,getValue:g=>d.node.data[g],node:d.node});return null!=f&&f.toString()===this.filter}getModel(){if(this.isFilterActive())return{filterType:"boolean",filter:this.filter}}setModel(d){this.filter=d?d.filter:""}afterGuiAttached(d){}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(v){return new(v||r)};static#e=this.\u0275cmp=s.VBU({type:r,selectors:[["app-boolean-filter"]],standalone:!0,features:[s.aNF],decls:7,vars:1,consts:[[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(v,f){1&v&&(s.j41(0,"mat-radio-group",0),s.mxI("ngModelChange",function(C){return s.DH7(f.filter,C)||(f.filter=C),C}),s.bIt("ngModelChange",function(){return f.filterChanged()}),s.j41(1,"mat-radio-button",1),s.EFF(2,"All"),s.k0s(),s.j41(3,"mat-radio-button",2),s.EFF(4,"True"),s.k0s(),s.j41(5,"mat-radio-button",3),s.EFF(6,"False"),s.k0s()()),2&v&&s.R50("ngModel",f.filter)},dependencies:[t.YN,t.BC,t.vS,y.Wk,y.VT,y._g],styles:[".mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return r})()},3758:(O,M,i)=>{i.d(M,{F:()=>C});var t=i(316),y=i(5944),s=i(8559);const m=["*"],r=u=>({"hint-box__short":u});function c(u,h){1&u&&s.eu8(0)}function d(u,h){if(1&u&&(s.j41(0,"mat-hint"),s.DNE(1,c,1,0,"ng-container",2),s.k0s()),2&u){s.XpG();const _=s.sdS(4);s.R7$(),s.Y8G("ngTemplateOutlet",_)}}function v(u,h){1&u&&s.eu8(0)}function f(u,h){if(1&u&&(s.j41(0,"mat-error"),s.DNE(1,v,1,0,"ng-container",2),s.k0s()),2&u){s.XpG();const _=s.sdS(4);s.R7$(),s.Y8G("ngTemplateOutlet",_)}}function g(u,h){1&u&&s.SdG(0)}let C=(()=>{class u{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(p){return new(p||u)};static#e=this.\u0275cmp=s.VBU({type:u,selectors:[["app-field-hint"]],inputs:{isError:"isError"},standalone:!0,features:[s.aNF],ngContentSelectors:m,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(p,T){if(1&p){const I=s.RV6();s.NAR(),s.j41(0,"div",1),s.bIt("click",function(){return s.eBV(I),s.Njj(T.toggleIsShort())}),s.DNE(1,d,2,1)(2,f,2,1),s.k0s(),s.DNE(3,g,1,0,"ng-template",null,0,s.C5r)}if(2&p){let I;s.Y8G("ngClass",s.eq3(2,r,T.isShort)),s.R7$(),s.vxM(1,!1===(I=T.isError)?1:!0===I?2:-1)}},dependencies:[y.RG,y.MV,y.TL,t.YU,t.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return u})()},6378:(O,M,i)=>{i.d(M,{L:()=>v});var t=i(519),y=i(316),s=i(3840),m=i(7896),r=i(8559),c=i(3347);const d=(f,g)=>({"align-start":f,"align-end":g});let v=(()=>{class f{constructor(C){this.snackBar=C}agInit(C){this.id=C.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=C.tooltipGetter(C.data)}refresh(C){return!0}copy(){(0,t.l)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(u){return new(u||f)(r.rXU(c.UG))};static#e=this.\u0275cmp=r.VBU({type:f,selectors:[["app-id-field"]],standalone:!0,features:[r.aNF],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"click","tippy","ngClass"],[1,"id"],[1,"icon"]],template:function(u,h){1&u&&(r.j41(0,"div",0),r.bIt("click",function(){return h.copy()}),r.j41(1,"span",1),r.EFF(2),r.k0s(),r.j41(3,"mat-icon",2),r.EFF(4,"file_copy"),r.k0s()()),2&u&&(r.Y8G("tippy",h.tooltip)("ngClass",r.l_i(3,d,"start"===h.align,"end"===h.align)),r.R7$(2),r.JRh(h.id))},dependencies:[y.YU,s.m_,s.An,m.e],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}return f})()},9333:(O,M,i)=>{i.d(M,{c:()=>s});var t=i(8559);let s=(()=>{class m{constructor(){}onClick(c){c.stopPropagation()}static#t=this.\u0275fac=function(d){return new(d||m)};static#e=this.\u0275dir=t.FsC({type:m,selectors:[["","appClickStopPropagation",""]],hostBindings:function(d,v){1&d&&t.bIt("click",function(g){return v.onClick(g)})},standalone:!0})}return m})()},5699:(O,M,i)=>{i.d(M,{V:()=>s});var t=i(9431),y=i(8559);let s=(()=>{class m{constructor(c){this.globalConfigService=c}onClick(c){(navigator.platform.match("Mac")?c.metaKey:c.ctrlKey)&&c.shiftKey&&c.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static#t=this.\u0275fac=function(d){return new(d||m)(y.rXU(t.B))};static#e=this.\u0275dir=y.FsC({type:m,selectors:[["","appToggleDebug",""]],hostBindings:function(d,v){1&d&&y.bIt("click",function(g){return v.onClick(g)})},standalone:!0})}return m})()},5959:(O,M,i)=>{i.d(M,{h6:()=>g,zZ:()=>v});var t=i(271),y=i(7693),s=i(8873),m=i(8559),r=i(6443),c=i(4821);const d="admin/field/",v="admin/field/all",f="admin/field/GetSharedFields";let g=(()=>{class C{constructor(h,_,p){this.http=h,this.context=_,this.dnnContext=p}apiUrl(h){return this.dnnContext.$2sxc.http.apiUrl(h)}typeListRetrieve(){return this.http.get(this.apiUrl(d+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(d+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,t.T)(h=>h.map(p=>({dataType:p.Type.substring(0,p.Type.indexOf("-")),inputType:p.Type,label:p.Label,description:p.Description,isDefault:p.IsDefault,isObsolete:p.IsObsolete,isRecommended:p.IsRecommended,obsoleteMessage:p.ObsoleteMessage,icon:p.IsDefault?"star":p.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(d+"ReservedNames"))}getFields(h){return this.http.get(this.apiUrl(v),{params:{appid:this.context.appId.toString(),staticName:h}}).pipe((0,t.T)(_=>{if(_)for(const p of _){if(!p.Metadata)continue;const T=p.Metadata;T.merged={...T.All,...T[p.Type],...T[p.InputType]}}return _}))}getShareableFields(){return this.http.get(this.apiUrl(f),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(h){return this.http.get(this.apiUrl(f),{params:{appid:this.context.appId.toString(),attributeId:h.toString()}})}addInheritedField(h,_,p,T){return this.http.post(this.apiUrl(d+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:h.toString(),SourceType:_,SourceField:p,name:T}})}share(h,_=!0){return this.http.post(this.apiUrl(d+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:h.toString(),share:_}})}inherit(h,_){return this.http.post(this.apiUrl(d+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:h.toString(),inheritMetadataOf:_}})}reOrder(h,_){return this.http.post(this.apiUrl(d+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:_.Id.toString(),order:JSON.stringify(h)}})}setTitle(h,_){return this.http.post(this.apiUrl(y.X+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:_.Id.toString(),attributeId:h.Id.toString()}})}rename(h,_,p){return this.http.post(this.apiUrl(d+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:_.toString(),attributeId:h.toString(),newName:p}})}delete(h,_){if(h.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(d+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:_.Id.toString(),attributeId:h.Id.toString()}})}add(h,_){return this.http.post(this.apiUrl(d+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:_.toString(),Id:h.Id.toString(),Type:h.Type,InputType:h.InputType,StaticName:h.StaticName,IsTitle:h.IsTitle.toString(),Index:h.SortOrder.toString()}})}updateInputType(h,_,p){return this.http.post(this.apiUrl(d+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:h.toString(),field:_,inputType:p}})}static#t=this.\u0275fac=function(_){return new(_||C)(m.KVO(r.Qq),m.KVO(s.o),m.KVO(c.ob))};static#e=this.\u0275prov=m.jDH({token:C,factory:C.\u0275fac})}return C})()},1726:(O,M,i)=>{i.d(M,{O:()=>t});const t={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},693:(O,M,i)=>{function t(s){return new Promise((m,r)=>{const c=new FileReader;c.readAsDataURL(s),c.onload=()=>{m(c.result.split(",")[1])},c.onerror=d=>{r(d)}})}function y(s){return new Promise((m,r)=>{const c=new FileReader;c.readAsText(s),c.onload=()=>{m(c.result)},c.onerror=d=>{r(d)}})}i.d(M,{d:()=>y,n:()=>t})},8021:(O,M,i)=>{i.d(M,{A:()=>c,J:()=>r});var t=i(5682),y=i(1817),s=i(271),m=i(9611);function r(d){return(0,t.F)((0,y.F)(),(0,s.T)(d),(0,y.F)())}function c(d){return(0,t.F)((0,y.F)(),(0,s.T)(d),(0,y.F)(m.A))}},3826:(O,M,i)=>{i.d(M,{a:()=>t});class t{static boolEquals(s,m){return s===m}static stringEquals(s,m){return s===m}static valueEquals(s,m){return s===m}static manyEquals(s,m){if(null==s||null==m)return s===m;const r=typeof s;return r===typeof m&&("string"===r||"number"===r||"boolean"===r?s===m:Array.isArray(s)?t.arraysEqual(s,m):t.objectsEqual(s,m))}static objectsEqual(s,m){if(null==s||null==m)return s===m;const r=s,c=m,d=Object.keys(r),v=Object.keys(c);return d.length===v.length&&d.every(g=>!!c.hasOwnProperty(g)&&r[g]===c[g])}static arraysEqual(s,m){return null==s||null==m?s===m:s.length===m.length&&s.every((c,d)=>s[d]===m[d])}static distinct(s,m,r){return r.indexOf(s)===m}}},6817:(O,M,i)=>{i.d(M,{R:()=>c});var t=i(8873),y=i(9234),s=i(8559),m=i(6443),r=i(4821);let c=(()=>{class d{constructor(f,g,C){this.http=f,this.context=g,this.dnnContext=C}create(f,g){return this.http.post(`app/auto/data/${f}`,g,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}update(f,g,C){return this.http.post(`app/auto/data/${f}/${g}`,C,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}delete(f,g,C){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(y.gb+"delete"),{params:{contentType:f,id:g.toString(),appId:this.context.appId.toString(),force:C.toString()}})}static#t=this.\u0275fac=function(g){return new(g||d)(s.KVO(m.Qq),s.KVO(t.o),s.KVO(r.ob))};static#e=this.\u0275prov=s.jDH({token:d,factory:d.\u0275fac})}return d})()},9431:(O,M,i)=>{i.d(M,{B:()=>r});var t=i(8559),y=i(9074),s=i(8172),m=i(3347);let r=(()=>{class c{constructor(v){this.snackBar=v,this.debugState=(0,t.vPA)(null),this.isDebug=(0,t.EWP)(()=>!!this.debugState()?.allowDebugMode&&!!this.debugState()?.debugEnabled),this.debugEnabled$=(0,y.br)(this.isDebug);const f={id:0,debugEnabled:"true"===sessionStorage.getItem(s.tn),allowDebugMode:!1};this.debugState.set(f)}allowDebug(v){const f=this.debugState();if(f.allowDebugMode===v)return;const g={...f,allowDebugMode:v};this.debugState.set(g)}toggleDebugEnabled(){const v=this.debugState();if(!v.allowDebugMode)return void this.snackBar.open("You do not have permissions to enter developer mode",null,{duration:3e3});const f={...v,debugEnabled:!v.debugEnabled};this.debugState.set(f),this.snackBar.open(f.debugEnabled?"developer mode on":"developer mode off",null,{duration:3e3})}static#t=this.\u0275fac=function(f){return new(f||c)(t.KVO(m.UG))};static#e=this.\u0275prov=t.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},4839:(O,M,i)=>{i.d(M,{c:()=>d});var t=i(8147),y=i(4979),s=i(8873),m=i(8559),r=i(6443);let d=(()=>{class v extends y.V{constructor(g,C){super(new t.B("QueryService",!1)),this.http=g,this.context=C}getAvailableEntities(g,C,u,h){this.log.a("getAvailableEntities",{queryUrl:g,params:C,fields:u,entitiesFilter:h});const _=!!C,x=(((C?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(_?`&${C}`:"")+"&$select="+(u??"")).substring(1);return this.http.post(`app/auto/query/${g}?${x}`,{Guids:h})}getEntities({contentTypes:g,itemIds:C,fields:u,log:h}){this.log.a(`getEntities(${h})`,{contentTypes:g,itemIds:C,fields:u});const p=("&typeNames="+(g?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(C?.join(",")??"")+"&$select="+(u??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${p}`,{})}static#t=this.\u0275fac=function(C){return new(C||v)(m.KVO(r.Qq),m.KVO(s.o))};static#e=this.\u0275prov=m.jDH({token:v,factory:v.\u0275fac})}return v})()},9074:(O,M,i)=>{i.d(M,{br:()=>d,ot:()=>v});var t=i(8559),y=i(6042);function d(f,g){!g?.injector&&(0,t.Af3)(d);const C=g?.injector??(0,t.WQX)(t.zZn),u=new y.m(1),h=(0,t.QZP)(()=>{let _;try{_=f()}catch(p){return void(0,t.O8t)(()=>u.error(p))}(0,t.O8t)(()=>u.next(_))},{injector:C,manualCleanup:!0});return C.get(t.abz).onDestroy(()=>{h.destroy(),u.complete()}),u.asObservable()}function v(f,g){const C=!g?.manualCleanup;C&&!g?.injector&&(0,t.Af3)(v);const u=C?g?.injector?.get(t.abz)??(0,t.WQX)(t.abz):null;let h;h=(0,t.vPA)(g?.requireSync?{kind:0}:{kind:1,value:g?.initialValue});const _=f.subscribe({next:p=>h.set({kind:1,value:p}),error:p=>{if(g?.rejectErrors)throw p;h.set({kind:2,error:p})}});return u?.onDestroy(_.unsubscribe.bind(_)),(0,t.EWP)(()=>{const p=h();switch(p.kind){case 1:return p.value;case 2:throw p.error;case 0:throw new t.wOt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_content-items_content-items_component_ts-projects_eav-ui_src_app_impo-19a5d8.4b3f360d523bf70d.js.map