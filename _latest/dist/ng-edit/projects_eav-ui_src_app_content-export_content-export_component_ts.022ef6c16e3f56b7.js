"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-export_content-export_component_ts"],{2497:(U,g,n)=>{n.r(g),n.d(g,{ContentExportComponent:()=>I});var p=n(8071),h=n(4300),x=n(9731),C=n(5530),E=n(4323),e=n(1699),u=n(6861),v=n(91),c=n(6575),M=n(895),i=n(8849),m=n(1268),T=n(6355),Z=n(257),d=n(2106);function A(r,l){if(1&r&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&r){const a=l.$implicit;e.Q6J("value",a.NameId),e.xp6(1),e.Oqu(a.NameId)}}function O(r,l){if(1&r&&(e.TgZ(0,"mat-radio-button",25),e._uU(1),e.qZA()),2&r){const a=e.oxw(2);e.xp6(1),e.hij(" Export selected ",a.itemIds.length," items ")}}function D(r,l){if(1&r){const a=e.EpF();e.TgZ(0,"form",null,4)(2,"div",5)(3,"p"),e._uU(4," This will generate an XML file which you can edit in Excel. If you just want to import new data, use this to export the schema that you can then fill in using Excel. Please visit "),e.TgZ(5,"a",6),e._uU(6,"https://2sxc.org/help"),e.qZA(),e._uU(7," for more instructions. "),e.qZA(),e.TgZ(8,"div",7)(9,"div")(10,"mat-form-field",8)(11,"mat-label"),e._uU(12,"Languages"),e.qZA(),e.TgZ(13,"mat-select",9),e.NdJ("ngModelChange",function(o){e.CHM(a);const s=e.oxw();return e.KtG(s.formValues.language=o)}),e.TgZ(14,"mat-option",10),e._uU(15,"All"),e.qZA(),e.YNc(16,A,2,2,"mat-option",11),e.qZA()()(),e.TgZ(17,"div")(18,"p",12),e._uU(19,"Export data"),e.qZA(),e.TgZ(20,"mat-radio-group",13),e.NdJ("ngModelChange",function(o){e.CHM(a);const s=e.oxw();return e.KtG(s.formValues.recordExport=o)}),e.TgZ(21,"mat-radio-button",14),e._uU(22,"No, just export blank data schema (for new data import) "),e.qZA(),e.TgZ(23,"mat-radio-button",15),e._uU(24,"Yes, export all content-items"),e.qZA(),e.YNc(25,O,2,1,"mat-radio-button",16),e.qZA()(),e.TgZ(26,"div")(27,"p",12),e._uU(28,"Value references to other languages"),e.qZA(),e.TgZ(29,"mat-radio-group",17),e.NdJ("ngModelChange",function(o){e.CHM(a);const s=e.oxw();return e.KtG(s.formValues.languageReferences=o)}),e.TgZ(30,"mat-radio-button",18),e._uU(31,"Keep references to other languages (for re-import) "),e.qZA(),e.TgZ(32,"mat-radio-button",19),e._uU(33,"Replace references with values"),e.qZA()()(),e.TgZ(34,"div")(35,"p",12),e._uU(36,"File / page references"),e.qZA(),e.TgZ(37,"mat-radio-group",20),e.NdJ("ngModelChange",function(o){e.CHM(a);const s=e.oxw();return e.KtG(s.formValues.resourcesReferences=o)}),e.TgZ(38,"mat-radio-button",18),e._uU(39,"Keep references (for re-import, for example Page:4711) "),e.qZA(),e.TgZ(40,"mat-radio-button",19),e._uU(41,"Replace references with real URLs (for example /Portals/0...) "),e.qZA()()()()(),e.TgZ(42,"mat-dialog-actions",21)(43,"button",22),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.closeDialog())}),e._uU(44,"Cancel"),e.qZA(),e.TgZ(45,"button",23),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.exportContent())}),e._uU(46," Export Data "),e.qZA()()()}if(2&r){const a=e.MAs(1),t=e.oxw();e.xp6(13),e.Q6J("ngModel",t.formValues.language),e.xp6(3),e.Q6J("ngForOf",t.languages),e.xp6(4),e.Q6J("ngModel",t.formValues.recordExport),e.xp6(5),e.Q6J("ngIf",t.hasIdList),e.xp6(4),e.Q6J("ngModel",t.formValues.languageReferences)("disabled","Blank"===t.formValues.recordExport),e.xp6(8),e.Q6J("ngModel",t.formValues.resourcesReferences)("disabled","Blank"===t.formValues.recordExport),e.xp6(8),e.Q6J("disabled",!a.form.valid)}}let I=(()=>{var r;class l{constructor(t,o,s,_,L){this.dialogRef=t,this.route=o,this.contentExportService=s,this.appDialogConfigService=_,this.contentTypesService=L,this.hostClass="dialog-component",this.hasIdList=!1,this.loading$=new p.X(!1),this.contentType$=new p.X(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName");const f=this.route.snapshot.paramMap.get("selectedIds");this.hasIdList=!!f,this.hasIdList&&(this.itemIds=f.split(",").map(P=>parseInt(P,10)))}ngOnInit(){this.loading$.next(!0);const t=this.contentTypesService.retrieveContentType(this.contentTypeStaticName),o=this.appDialogConfigService.getShared$();(0,h.D)([t,o]).subscribe(([s,_])=>{this.contentType$.next(s),this.languages=_.Context.Language.List,this.formValues={defaultLanguage:_.Context.Language.Primary,contentTypeStaticName:this.contentTypeStaticName,language:"",recordExport:this.hasIdList?"Selection":"All",languageReferences:"Link",resourcesReferences:"Link"},this.loading$.next(!1)})}ngOnDestroy(){this.contentType$.complete(),this.loading$.complete()}closeDialog(){this.dialogRef.close()}exportContent(){this.contentExportService.exportContent(this.formValues,this.hasIdList&&"Selection"===this.formValues.recordExport?this.itemIds:null)}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(u.so),e.Y36(v.gz),e.Y36(E.i),e.Y36(x.K),e.Y36(C.s))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-content-export"]],hostVars:1,hostBindings:function(t,o){2&t&&e.Ikx("className",o.hostClass)},decls:7,vars:6,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[4,"ngIf"],["ngForm","ngForm"],[1,"eav-dialog-content"],["href","https://2sxc.org/help","target","_blank"],[1,"dialog-form-content","fancy-scrollbar-light"],["color","accent",1,"eav-form-field"],["name","Language",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"eav-radio-group-label"],["name","RecordExport",1,"eav-radio-group",3,"ngModel","ngModelChange"],["value","Blank"],["value","All"],["value","Selection",4,"ngIf"],["name","LanguageReferences",1,"eav-radio-group",3,"ngModel","disabled","ngModelChange"],["value","Link"],["value","Resolve"],["name","ResourcesReferences",1,"eav-radio-group",3,"ngModel","disabled","ngModelChange"],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["value","Selection"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"async"),e.qZA()(),e.YNc(5,D,47,9,"form",3),e.ALo(6,"async"),e.qZA()),2&t){let s;e.xp6(3),e.hij("Export ",null==(s=e.lcZ(4,2,o.contentType$))?null:s.Name,""),e.xp6(2),e.Q6J("ngIf",!1===e.lcZ(6,4,o.loading$))}},dependencies:[c.sg,c.O5,u.H8,M.lW,i._Y,i.JJ,i.JL,i.On,i.F,m.KE,m.hX,T.gD,Z.ey,d.VQ,d.U0,c.Ov],styles:[".eav-radio-group-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.eav-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}"]}),l})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.17.00/dist/ng-edit/projects_eav-ui_src_app_content-export_content-export_component_ts.022ef6c16e3f56b7.js.map