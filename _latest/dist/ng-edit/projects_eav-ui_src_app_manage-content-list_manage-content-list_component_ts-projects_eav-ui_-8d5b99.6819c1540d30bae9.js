"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_manage-content-list_manage-content-list_component_ts-projects_eav-ui_-8d5b99"],{4979:(A,g,o)=>{o.d(g,{V:()=>c});var l=o(27092),_=o(44444);let c=(()=>{class h{constructor(){this.subscriptions=new l.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#e=this.\u0275fac=function(v){return new(v||h)};static#n=this.\u0275prov=_.jDH({token:h,factory:h.\u0275fac})}return h})()},13620:(A,g,o)=>{function l(c,h){return h(c)}function _(c,h){return h(c)}o.d(g,{C:()=>l,z:()=>_})},52645:(A,g,o)=>{o.r(g),o.d(g,{ManageContentListComponent:()=>Y});var l=o(86571),_=o(84344),c=o(44444),h=o(84175),M=o(81863),P=o(93840),v=o(29658),O=o(90852),D=o(12938),B=o(13620),y=o(64699),x=o(32760),j=o(23840),S=o(34601),L=o(43216),C=o(70334),d=o(72973),R=o(60852),i=o(67993),n=o(59669),t=o(99293),p=o(3347),f=o(88622),b=o(87841),T=o(18708),F=o(18934),E=o(20545);const K=(r,u)=>u.Index+"+"+u.Id;function $(r,u){if(1&r){const e=t.RV6();t.j41(0,"span"),t.EFF(1),t.k0s(),t.j41(2,"button",12),t.bIt("click",function(){c.eBV(e);const a=t.XpG(3);return c.Njj(a.editHeader())}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()()}if(2&r){const e=t.XpG(3);t.R7$(),t.JRh(e.header().Title)}}function N(r,u){1&r&&(t.EFF(0),t.nI1(1,"translate")),2&r&&t.SpI(" ",t.bMT(1,1,"ManageContentList.NoHeader")," ")}function V(r,u){if(1&r&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"translate"),t.k0s(),t.j41(3,"p"),t.nVh(4,$,5,1)(5,N,2,3),t.k0s()),2&r){const e=t.XpG(2);t.R7$(),t.SpI(" ",t.bMT(2,2,"ManageContentList.Description")," "),t.R7$(3),t.vxM(e.header().Type?4:5)}}function X(r,u){if(1&r&&(t.j41(0,"p",6),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r){let e;const s=t.XpG(2);t.R7$(),t.SpI(" ",t.bMT(2,1,"ManageContentList."+(s.reordered()?"ListHasBeenReordered":(null==(e=s.items())?null:e.length)<25?"SortItems":"SortLotsOfItems"))," ")}}function G(r,u){if(1&r){const e=t.RV6();t.j41(0,"div",8)(1,"div",13)(2,"mat-icon",14),t.EFF(3,"drag_handle"),t.k0s(),t.j41(4,"span",15),t.EFF(5),t.k0s()(),t.j41(6,"div")(7,"button",16),t.bIt("click",function(){const a=c.eBV(e).$implicit,m=t.XpG(2);return c.Njj(m.addFromExisting(a.Index))}),t.j41(8,"mat-icon"),t.EFF(9,"playlist_add"),t.k0s()(),t.j41(10,"button",17),t.bIt("click",function(){const a=c.eBV(e).$implicit,m=t.XpG(2);return c.Njj(m.addBelow(a.Index))}),t.j41(11,"mat-icon"),t.EFF(12,"add"),t.k0s()(),t.j41(13,"button",18),t.bIt("click",function(){const a=c.eBV(e).$implicit,m=t.XpG(2);return c.Njj(m.remove(a))}),t.j41(14,"mat-icon"),t.EFF(15,"remove"),t.k0s()(),t.j41(16,"button",19),t.bIt("click",function(){const a=c.eBV(e).$implicit,m=t.XpG(2);return c.Njj(m.editItem(a.Id))}),t.j41(17,"mat-icon"),t.EFF(18,"edit"),t.k0s()()()()}if(2&r){const e=u.$implicit,s=t.XpG(2);t.R7$(4),t.Y8G("tippy",t.ai1("",e.Title," (",e.Id,")")),t.R7$(),t.Lme(" ",e.Title," (",e.Id,") "),t.R7$(2),t.Y8G("disabled",0===e.Id),t.R7$(3),t.Y8G("disabled",0===e.Id||s.reordered()),t.R7$(3),t.Y8G("disabled",s.reordered()),t.R7$(3),t.Y8G("disabled",0===e.Id)}}function H(r,u){if(1&r){const e=t.RV6();t.j41(0,"app-save-close-button",20),t.bIt("action",function(){c.eBV(e);const a=t.XpG(2);return c.Njj(a.saveAndCloseList())}),t.k0s()}2&r&&t.Y8G("label","Form.Buttons.SaveAndClose")}function w(r,u){if(1&r){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){c.eBV(e);const a=t.XpG(2);return c.Njj(a.saveList())}),t.j41(1,"span"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"mat-icon"),t.EFF(5,"save"),t.k0s()()}2&r&&(t.R7$(2),t.JRh(t.bMT(3,1,"Form.Buttons.Save")))}function z(r,u){if(1&r){const e=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"button",3),t.bIt("click",function(){c.eBV(e);const a=t.XpG();return c.Njj(a.closeDialog())}),t.j41(6,"mat-icon"),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"div",4),t.nrm(9,"router-outlet"),t.j41(10,"div",5),t.nVh(11,V,6,4),t.nVh(12,X,3,3,"p",6),t.j41(13,"div",7),t.bIt("cdkDropListDropped",function(a){c.eBV(e);const m=t.XpG();return c.Njj(m.drop(a))}),t.Z7z(14,G,19,9,"div",8,K),t.k0s()()(),t.j41(16,"mat-dialog-actions",9)(17,"extended-fab-speed-dial"),t.DNE(18,H,1,1,"ng-template",10)(19,w,6,3,"ng-template",11),t.k0s()()()}if(2&r){const e=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,3,"ManageContentList.Title")," "),t.R7$(8),t.vxM(e.header()?11:-1),t.R7$(),t.vxM(e.items()?12:-1),t.R7$(2),t.Dyx(e.items())}}let Y=(()=>{class r{#e;#n;#s;constructor(e,s,a){this.dialog=e,this.snackBar=s,this.translate=a,this.hostClass="dialog-component",this.#e=(0,D.d)(R.c),this.#n=(0,D.d)(n.y),this.#s=(0,D.d)(y.L),this.items=(0,i.KX)("items",null),this.#t=(0,B.C)(this.#e.getParams(["guid","part","index"]),m=>({id:null,guid:m.guid,part:m.part,index:parseInt(m.index,10)})),this.#i=(0,c.vPA)(0),this.header=this.#n.getAllLive(this.#t,this.#i).value,this.reordered=(0,i.KX)("reordered",!1)}#t;#i;ngOnInit(){this.#c(),this.#o(),this.#r(),this.#e.doOnDialogClosed(()=>{this.#o(!0),this.#a()})}#r(){this.#s.getCurrent$().subscribe(e=>{this.translate.setDefaultLang(e.Context.Language.Primary.split("-")[0]),this.translate.use(e.Context.Language.Current.split("-")[0])})}closeDialog(){this.dialog.close()}saveList(){this.snackBar.open("Saving..."),this.#n.saveList(this.#t,this.items()).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.#o(),this.#a()})}saveAndCloseList(){this.snackBar.open("Saving..."),this.#n.saveList(this.#t,this.items()).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}#c(){this.dialog.keydownEvents().subscribe(e=>{(0,x.JY)(e)&&(e.preventDefault(),this.saveList()),(0,x.YU)(e)&&(e.preventDefault(),this.saveAndCloseList())})}editHeader(){const e={items:[C.c.relationship(this.#t.guid,"listcontent",0,0===this.header().Id),C.c.relationship(this.#t.guid,"listpresentation",0,0===this.header().Id)]},s=(0,L.s)(e);this.#e.navRelative([`edit/${s}`])}editItem(e){const s={items:[C.c.editId(e)]},a=(0,L.s)(s);this.#e.navRelative([`edit/${a}`])}addFromExisting(e){this.#e.navRelative([`${this.#t.guid}/${this.#t.part}/${e+1}/replace`],{queryParams:{add:!0}})}addBelow(e){const s={items:[C.c.relationship(this.#t.guid,this.#t.part,e+1,!0)]},a=(0,L.s)(s);this.#e.navRelative([`edit/${a}`])}remove(e){confirm(this.translate.instant("ManageContentList.ConfirmRemove"))&&(this.snackBar.open("Removing..."),this.#n.removeItem(this.#t,e.Index).subscribe(()=>{this.snackBar.open("Removed",null,{duration:2e3}),this.#o()}))}drop(e){const s=[...this.items()];(0,l.HD)(s,e.previousIndex,e.currentIndex),this.items.set(s),this.reordered.set(!0)}#o(e=!1){this.#n.getListPromise(this.#t).then(s=>{if(this.reordered()){const a=this.items().map(I=>I.Id);if(this.items().length===s.length&&!s.some(I=>!a.includes(I.Id))&&e){const I=this.items().map(W=>W.Index);s.sort((W,Q)=>{const k=I.indexOf(W.Index),U=I.indexOf(Q.Index);return-1===k||-1===U?0:k-U})}else e&&this.snackBar.open("List was changed from somewhere else. Order of items is reset",null,{duration:5e3})}this.items.set(s),this.reordered.set(!1)})}#a(){this.#i.set(this.#i()+1)}static#_=this.\u0275fac=function(s){return new(s||r)(t.rXU(M.k),t.rXU(p.UG),t.rXU(O.c$))};static#l=this.\u0275cmp=t.VBU({type:r,selectors:[["app-manage-content-list"]],hostVars:1,hostBindings:function(s,a){2&s&&t.Avn("className",a.hostClass)},decls:1,vars:1,consts:[[1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],["cdkScrollable","",1,"dialog-component-content","fancy-scrollbar-light"],[1,"eav-sort-title"],["cdkDropList","",1,"eav-dnd-list",3,"cdkDropListDropped"],["cdkDrag","",1,"eav-dnd-item"],["align","end"],["extendedFabSpeedDialTriggerContent",""],["extendedFabSpeedDialActionsContent",""],["mat-icon-button","","tippy","Edit header",3,"click"],[1,"eav-dnd-item__title"],["tippy","Drag to reorder the list",1,"eav-dnd-item__title-icon"],[1,"eav-dnd-item__title-text",3,"tippy"],["mat-icon-button","","tippyTranslate","Fields.Picker.AddExistingItem","appMousedownStopPropagation","",3,"click","disabled"],["mat-icon-button","","tippyTranslate","Fields.Picker.AddItemBelow","appMousedownStopPropagation","",3,"click","disabled"],["mat-icon-button","","tippyTranslate","Fields.Picker.Remove","appMousedownStopPropagation","",3,"click","disabled"],["mat-icon-button","","tippyTranslate","Fields.Picker.Edit","appMousedownStopPropagation","",3,"click","disabled"],[3,"action","label"],["extended-fab-speed-dial-action","","matRipple","",3,"click"]],template:function(s,a){1&s&&t.nVh(0,z,20,5,"div",0),2&s&&t.vxM(a.header()&&a.items()?0:-1)},dependencies:[v.n3,_.uv,h.Hl,f.M,P.m_,P.An,l.O7,l.T1,M.M,O.h,O.D9,M.l,S.e,j.z,b.d,T.R,F.Q,E.d,d.j],styles:[".eav-sort-title[_ngcontent-%COMP%]{padding-top:16px}.eav-dnd-list[_ngcontent-%COMP%]{margin:16px 0;border:1px solid #ccc;border-radius:4px;overflow:hidden}.eav-dnd-item[_ngcontent-%COMP%]{cursor:move;height:40px;border-bottom:1px solid #ccc;padding:0 8px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-sizing:border-box;font-size:14px}.eav-dnd-item[_ngcontent-%COMP%]:last-child{border:none}.eav-dnd-item__title[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;max-width:80%}.eav-dnd-item__title-icon[_ngcontent-%COMP%]{margin-right:8px;opacity:.4}.eav-dnd-item__title-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}extended-fab-speed-dial[_ngcontent-%COMP%]  .extended-fab-speed-dial-actions{right:24px;bottom:54px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.dnd-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dnd-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return r})()},93840:(A,g,o)=>{o.d(g,{An:()=>L,m_:()=>C});var l=o(99293),_=o(44444),c=o(37580),h=o(27092),M=o(64334),P=o(50069),v=o(8126);const O=["*"],D=new _.nKC("MAT_ICON_DEFAULT_OPTIONS"),B=new _.nKC("mat-icon-location",{providedIn:"root",factory:function y(){const d=(0,_.WQX)(_.qQL),R=d?d.location:null;return{getPathname:()=>R?R.pathname+R.search:""}}}),x=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],j=x.map(d=>`[${d}]`).join(", "),S=/^url\(['"]?#(.*?)['"]?\)$/;let L=(()=>{class d{_elementRef=(0,_.WQX)(l.aKT);_iconRegistry=(0,_.WQX)(P.M);_location=(0,_.WQX)(B);_errorHandler=(0,_.WQX)(_.zcH);_defaultColor;get color(){return this._color||this._defaultColor}set color(i){this._color=i}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(i){const n=this._cleanupFontValue(i);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(i){const n=this._cleanupFontValue(i);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=h.yU.EMPTY;constructor(){const i=(0,_.WQX)(new c.ES_("aria-hidden"),{optional:!0}),n=(0,_.WQX)(D,{optional:!0});n&&(n.color&&(this.color=this._defaultColor=n.color),n.fontSet&&(this.fontSet=n.fontSet)),i||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];const n=i.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const i=this._elementsWithExternalReferences;if(i&&i.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){const i=this._elementRef.nativeElement;let n=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const t=i.childNodes[n];(1!==t.nodeType||"svg"===t.nodeName.toLowerCase())&&t.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const i=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(t=>t.length>0);this._previousFontSetClass.forEach(t=>i.classList.remove(t)),n.forEach(t=>i.classList.add(t)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return"string"==typeof i?i.trim().split(" ")[0]:i}_prependPathToReferences(i){const n=this._elementsWithExternalReferences;n&&n.forEach((t,p)=>{t.forEach(f=>{p.setAttribute(f.name,`url('${i}#${f.value}')`)})})}_cacheChildrenWithExternalReferences(i){const n=i.querySelectorAll(j),t=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let p=0;p<n.length;p++)x.forEach(f=>{const b=n[p],T=b.getAttribute(f),F=T?T.match(S):null;if(F){let E=t.get(b);E||(E=[],t.set(b,E)),E.push({name:f,value:F[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){const[n,t]=this._splitIconName(i);n&&(this._svgNamespace=n),t&&(this._svgName=t),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(t,n).pipe((0,M.s)(1)).subscribe(p=>this._setSvgElement(p),p=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${t}! ${p.message}`))})}}static \u0275fac=function(n){return new(n||d)};static \u0275cmp=l.VBU({type:d,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(n,t){2&n&&(l.BMQ("data-mat-icon-type",t._usingFontIcon()?"font":"svg")("data-mat-icon-name",t._svgName||t.fontIcon)("data-mat-icon-namespace",t._svgNamespace||t.fontSet)("fontIcon",t._usingFontIcon()?t.fontIcon:null),l.HbH(t.color?"mat-"+t.color:""),l.AVh("mat-icon-inline",t.inline)("mat-icon-no-color","primary"!==t.color&&"accent"!==t.color&&"warn"!==t.color))},inputs:{color:"color",inline:[2,"inline","inline",c.L39],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:O,decls:1,vars:0,template:function(n,t){1&n&&(l.NAR(),l.SdG(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0})}return d})(),C=(()=>{class d{static \u0275fac=function(n){return new(n||d)};static \u0275mod=l.$C({type:d});static \u0275inj=_.G2t({imports:[v.M,v.M]})}return d})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.05/dist/ng-edit/projects_eav-ui_src_app_manage-content-list_manage-content-list_component_ts-projects_eav-ui_-8d5b99.6819c1540d30bae9.js.map