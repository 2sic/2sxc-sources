{"version":3,"file":"projects_eav-ui_src_app_app-administration_data_data_component_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/app-administration/data/data-actions/data-actions.component.ts","./projects/eav-ui/src/app/app-administration/data/data-actions/data-actions.component.html","./projects/eav-ui/src/app/app-administration/data/data-fields/data-fields.component.ts","./projects/eav-ui/src/app/app-administration/data/data-fields/data-fields.component.html","./projects/eav-ui/src/app/app-administration/data/data-items/data-items.component.ts","./projects/eav-ui/src/app/app-administration/data/data-items/data-items.component.html","./projects/eav-ui/src/app/app-administration/data/data.component.ts","./projects/eav-ui/src/app/app-administration/data/data.component.html","./projects/eav-ui/src/app/shared/helpers/file-to-base64.helper.ts","./projects/eav-ui/src/app/shared/rxJs/mapUntilChanged.ts"],"sourcesContent":["import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { guidRegex } from '../../../shared/constants/guid.constants';\r\nimport { ContentType } from '../../models/content-type.model';\r\nimport { DataActionsParams, DataActionType } from './data-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-data-actions',\r\n  templateUrl: './data-actions.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n    MatBadgeModule,\r\n    MatMenuModule,\r\n  ],\r\n})\r\nexport class DataActionsComponent implements ICellRendererAngularComp {\r\n  contentType: ContentType;\r\n  enablePermissions: boolean;\r\n  private params: ICellRendererParams & DataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & DataActionsParams): void {\r\n    this.params = params;\r\n    this.contentType = this.params.data;\r\n    const enablePermissions = this.params.enablePermissionsGetter();\r\n    this.enablePermissions = enablePermissions && guidRegex().test(this.contentType.StaticName);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  do(verb: DataActionType): void {\r\n    this.params.do(verb, this.contentType);\r\n  }\r\n\r\n}\r\n","<div class=\"actions-component\">\r\n  @if (!contentType.EditInfo.DisableEdit || contentType.Properties) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple\r\n      tippy=\"Description and more\"\r\n      (click)=\"do('createUpdateMetaData')\">\r\n      <mat-icon>edit</mat-icon>\r\n    </div>\r\n  }\r\n  @if (contentType.EditInfo.DisableEdit && !contentType.Properties) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon>edit</mat-icon>\r\n    </div>\r\n  }\r\n\r\n  @if (!contentType.EditInfo.DisableMetadata) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Metadata\"\r\n      (click)=\"do('openMetadata')\">\r\n      <mat-icon [matBadge]=\"contentType.Metadata.length\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\" [matBadgeHidden]=\"!contentType.Metadata.length\" aria-hidden=\"false\">\r\n        local_offer\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n  @if (contentType.EditInfo.DisableMetadata) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon [matBadge]=\"contentType.Metadata.length\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\" matBadgeDisabled=\"true\" [matBadgeHidden]=\"!contentType.Metadata.length\" aria-hidden=\"false\">\r\n        local_offer\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n\r\n  @if (!contentType.EditInfo.DisableEdit && enablePermissions) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple\r\n      tippy=\"Permissions\" (click)=\"do('openPermissions')\">\r\n      <mat-icon [matBadge]=\"contentType.Permissions.Count\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\" [matBadgeHidden]=\"!contentType.Permissions.Count\" aria-hidden=\"false\">\r\n      person</mat-icon>\r\n    </div>\r\n  }\r\n  @if (contentType.EditInfo.DisableEdit || !enablePermissions) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon [matBadge]=\"contentType.Permissions.Count\" matBadgePosition=\"below after\" matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\" matBadgeDisabled=\"true\" [matBadgeHidden]=\"!contentType.Permissions.Count\"\r\n        aria-hidden=\"false\">\r\n      person</mat-icon>\r\n    </div>\r\n  }\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item [disabled]=\"contentType.EditInfo.DisableRename\" (click)=\"do('editContentType')\">\r\n      <mat-icon>settings</mat-icon>\r\n      <span>Rename</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"do('openRestApi')\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"do('typeExport')\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export content type</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"do('dataExport')\">\r\n      <mat-icon>cloud_download</mat-icon>\r\n      <span>Export data</span>\r\n    </button>\r\n    <button mat-menu-item (click)=\"do('dataImport')\">\r\n      <mat-icon>cloud_upload</mat-icon>\r\n      <span>Import data</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"contentType.EditInfo.DisableDelete\" (click)=\"do('deleteContentType')\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { ContentType } from '../../models/content-type.model';\r\nimport { DataFieldsParams } from './data-fields.models';\r\n\r\n@Component({\r\n  selector: 'app-data-fields',\r\n  templateUrl: './data-fields.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n    MatBadgeModule,\r\n    TippyDirective,\r\n  ],\r\n})\r\nexport class DataFieldsComponent implements ICellRendererAngularComp {\r\n  value: number;\r\n  tooltip: string;\r\n  icon: string;\r\n\r\n  private params: ICellRendererParams & DataFieldsParams;\r\n  private contentType: ContentType;\r\n\r\n  agInit(params: ICellRendererParams & DataFieldsParams): void {\r\n    this.params = params;\r\n    this.contentType = params.data;\r\n    this.value = params.value;\r\n    this.tooltip = !this.contentType.EditInfo.ReadOnly\r\n      ? 'Edit fields'\r\n      : `${this.contentType.EditInfo.ReadOnlyMessage ? `${this.contentType.EditInfo.ReadOnlyMessage}\\n\\n` : ''}This ContentType shares the definition of #${this.contentType.SharedDefId} so you can't edit it here. Read 2sxc.org/help?tag=shared-types`;\r\n    this.icon = !this.contentType.EditInfo.ReadOnly ? 'dns' : 'share';\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  editFields(): void {\r\n    this.params.onEditFields(this.contentType);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple [tippy]=\"tooltip\" (click)=\"editFields()\">\r\n    <mat-icon [matBadge]=\"value\" matBadgePosition=\"below after\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!value\" aria-hidden=\"false\">\r\n      {{icon}}\r\n    </mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { ContentType } from '../../models';\r\nimport { DataItemsParams } from './data-items.models';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n  selector: 'app-data-items',\r\n  templateUrl: './data-items.component.html',\r\n  styleUrls: ['./data-items.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n    TippyDirective,\r\n  ],\r\n})\r\nexport class DataItemsComponent implements ICellRendererAngularComp {\r\n  value: number;\r\n  private params: DataItemsParams;\r\n  private contentType: ContentType;\r\n\r\n  agInit(params: ICellRendererParams & DataItemsParams): void {\r\n    this.params = params;\r\n    this.contentType = params.data;\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  showItems(): void {\r\n    this.params.onShowItems(this.contentType);\r\n  }\r\n\r\n  addItem(): void {\r\n    this.params.onAddItem(this.contentType);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"{{ value }} items\" (click)=\"showItems()\">\r\n    <div class=\"text-icon\">{{ value }}</div>\r\n  </div>\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Add item\" (click)=\"addItem()\">\r\n    <mat-icon>add</mat-icon>\r\n  </div>\r\n</div>","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, inject, OnDestroy, OnInit, signal } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogActions } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { NavigationEnd, RouterOutlet } from '@angular/router';\r\nimport { filter, from, map, startWith, take } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { ContentExportService } from '../../content-export/services/content-export.service';\r\nimport { ContentImportDialogData } from '../../content-import/content-import-dialog.config';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { GoToMetadata } from '../../metadata';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { ColumnDefinitions } from '../../shared/ag-grid/column-definitions';\r\nimport { BaseComponent } from '../../shared/components/base.component';\r\nimport { FileUploadDialogData } from '../../shared/components/file-upload-dialog';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { DragAndDropDirective } from '../../shared/directives/drag-and-drop.directive';\r\nimport { toString } from '../../shared/helpers/file-to-base64.helper';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm, EditPrep } from '../../shared/models/edit-form.model';\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\nimport { mapUntilChanged } from '../../shared/rxJs/mapUntilChanged';\r\nimport { GlobalConfigService } from '../../shared/services/global-config.service';\r\nimport { ContentType } from '../models/content-type.model';\r\nimport { ScopeDetailsDto } from '../models/scopedetails.dto';\r\nimport { ContentTypesService } from '../services/content-types.service';\r\nimport { DialogConfigAppService } from '../services/dialog-config-app.service';\r\nimport { DataActionsComponent } from './data-actions/data-actions.component';\r\nimport { DataActionsParams } from './data-actions/data-actions.models';\r\nimport { DataFieldsComponent } from './data-fields/data-fields.component';\r\nimport { DataFieldsParams } from './data-fields/data-fields.models';\r\nimport { DataItemsComponent } from './data-items/data-items.component';\r\nimport { DataItemsParams } from './data-items/data-items.models';\r\n\r\n@Component({\r\n  selector: 'app-data',\r\n  templateUrl: './data.component.html',\r\n  styleUrls: ['./data.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatDialogActions,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    FormsModule,\r\n    MatOptionModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    SxcGridModule,\r\n    DragAndDropDirective,\r\n  ],\r\n})\r\nexport class DataComponent extends BaseComponent implements OnInit, OnDestroy {\r\n\r\n  isDebug = inject(GlobalConfigService).isDebug;\r\n  #snackBar = inject(MatSnackBar);\r\n\r\n  #contentTypeSvc = transient(ContentTypesService);\r\n  #contentExportSvc = transient(ContentExportService);\r\n  #dialogConfigSvc = transient(DialogConfigAppService);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  constructor() { super(); }\r\n\r\n  contentTypes = signal<ContentType[]>(undefined);\r\n  scope = signal<string>(undefined);\r\n  scopeOptions = signal<ScopeDetailsDto[]>([]);\r\n\r\n  /** Possible scopes - the ones from the backend + manually entered scopes by the current user */\r\n  gridOptions = this.#buildGridOptions();\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  enablePermissions!: boolean;\r\n\r\n  ngOnInit() {\r\n    this.#fetchScopes();\r\n    this.#refreshScopeOnRouteChange();\r\n    this.#dialogRouter.doOnDialogClosed(() => this.#fetchContentTypes());\r\n\r\n    this.#dialogConfigSvc.getCurrent$().subscribe(data => {\r\n      this.enablePermissions = data.Context.Enable.AppPermissions;\r\n    });\r\n  }\r\n\r\n  filesDropped(files: File[]) {\r\n    const importFile = files[0];\r\n    const ext = importFile.name.substring(importFile.name.lastIndexOf('.') + 1).toLocaleLowerCase();\r\n    switch (ext) {\r\n      case 'xml':\r\n        from(toString(files[0])).pipe(take(1)).subscribe(fileString => {\r\n          const contentTypeName = fileString.split('<Entity Type=\"')[1]?.split('\"')[0];\r\n          const contentType = this.contentTypes().find(ct => ct.Name === contentTypeName);\r\n          if (contentType == null) {\r\n            const message = `Cannot find Content Type named '${contentTypeName}'. Please open Content Type Import dialog manually.`;\r\n            this.#snackBar.open(message, null, { duration: 5000 });\r\n            return;\r\n          }\r\n          this.#openDataImport(contentType, files);\r\n        });\r\n        break;\r\n      case 'json':\r\n        this.importType(files);\r\n        break;\r\n    }\r\n  }\r\n\r\n  importType(files?: File[]) {\r\n    const dialogData: FileUploadDialogData = { files };\r\n    this.#dialogRouter.navParentFirstChild(['import'], { state: dialogData });\r\n  }\r\n\r\n  #showContentItems(contentType: ContentType) {\r\n    this.#dialogRouter.navParentFirstChild([`items/${contentType.StaticName}`]);\r\n  }\r\n\r\n  editContentType(contentType: ContentType) {\r\n    if (!contentType) {\r\n      this.#dialogRouter.navParentFirstChild(['add']);\r\n    } else {\r\n      if (contentType.EditInfo.ReadOnly) return;\r\n      this.#dialogRouter.navParentFirstChild([`${contentType.StaticName}/edit`]);\r\n    }\r\n  }\r\n\r\n  #fetchContentTypes() {\r\n    this.#contentTypeSvc.retrieveContentTypes(this.scope()).subscribe(contentTypes => {\r\n      for (const contentType of contentTypes) {\r\n        contentType._compareLabel = contentType.Label.replace(/\\p{Emoji}/gu, 'ž');\r\n      }\r\n      this.contentTypes.set(contentTypes);\r\n      if (this.scope() !== eavConstants.scopes.default.value) {\r\n        const message = 'Warning! You are in a special scope. Changing things here could easily break functionality';\r\n        this.#snackBar.open(message, null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  #fetchScopes() {\r\n    this.#contentTypeSvc.getScopesV2().subscribe(scopeList => {\r\n      // Merge the new scopes with the existing ones - in case there were manual scopes added\r\n      // If old scope list had a manual scope which the server didn't send, re-add it here\r\n      const manual = this.scopeOptions()\r\n        .filter(sOld => scopeList.find(sNew => sNew.name === sOld.name) == null);\r\n\r\n      // Add a nice label to each scope containing count-information of types\r\n      const withNiceLabel = scopeList.map(s => {\r\n        let countInfo = !s.typesInherited\r\n          ? `${s.typesTotal} types`               // only not-inherited\r\n          : (s.typesInherited == s.typesTotal)\r\n            ? s.typesInherited + ' sys types'     // only inherited\r\n            : `${s.typesTotal} types / ${s.typesInherited} system`;\r\n        return ({ ...s, label: s.name + ` - ${countInfo}` });\r\n      });\r\n\r\n      this.scopeOptions.set([...withNiceLabel, ...manual]);\r\n    });\r\n  }\r\n\r\n  createGhost() {\r\n    const sourceName = window.prompt('To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost');\r\n    if (!sourceName) return;\r\n    this.#snackBar.open('Saving...');\r\n    this.#contentTypeSvc.createGhost(sourceName).subscribe(_ => {\r\n      this.#snackBar.open('Saved', null, { duration: 2000 });\r\n      this.#fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  changeScope(newScope: string) {\r\n    if (newScope === dropdownInsertValue) {\r\n      newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n    }\r\n    this.#dialogRouter.navRelative(['..', newScope]);\r\n  }\r\n\r\n  /**\r\n   * Refreshes the scope when the route changes.\r\n   * ...also adds a scope name if the route scope is not found in the list of possible scopes.\r\n   * This is to allow an admin to enter a custom scope.\r\n   * Note 2024-03-04 2dm - not sure if this auto-add feature is still needed though...\r\n   */\r\n  #refreshScopeOnRouteChange() {\r\n    this.subscriptions.add(\r\n      this.#dialogRouter.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        map(() => this.#dialogRouter.getParam('scope')),\r\n        startWith(this.#dialogRouter.getParam('scope')),\r\n        filter(scope => !!scope),\r\n        mapUntilChanged(m => m),\r\n      ).subscribe(scope => {\r\n        this.scope.set(scope);\r\n\r\n        // If we can't find the scope in the list of options, add it as it was entered manually\r\n        if (!this.scopeOptions().map(option => option.name).includes(scope)) {\r\n          const newScopeOption: ScopeDetailsDto = {\r\n            name: scope,\r\n            label: scope,\r\n            typesTotal: 0,\r\n            typesInherited: 0,\r\n            typesOfApp: 0,\r\n          };\r\n          this.scopeOptions.set([...this.scopeOptions(), newScopeOption]);\r\n        }\r\n        this.#fetchContentTypes();\r\n      })\r\n    );\r\n  }\r\n\r\n  //#region Grid\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          cellRendererParams: ColumnDefinitions.idFieldParamsTooltipGetter<ContentType>('StaticName'),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWidePrimary,\r\n          headerName: 'ContentType',\r\n          field: 'Label',\r\n          sort: 'asc',\r\n          onCellClicked: (params) => {\r\n            const contentType: ContentType = params.data;\r\n            this.#showContentItems(contentType);\r\n          },\r\n          comparator: (valueA, valueB, nodeA, nodeB, isInverted) => {\r\n            const contentTypeA: ContentType = nodeA.data;\r\n            const contentTypeB: ContentType = nodeB.data;\r\n            return contentTypeA._compareLabel.localeCompare(contentTypeB._compareLabel);\r\n          },\r\n        },\r\n        {\r\n          ...ColumnDefinitions.Items,\r\n          field: 'Items',\r\n          cellRenderer: DataItemsComponent,\r\n          cellRendererParams: (() => ({\r\n            onShowItems: (contentType) => this.#showContentItems(contentType),\r\n            onAddItem: (contentType) => this.#addItem(contentType),\r\n          } satisfies DataItemsParams))(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.Fields,\r\n          field: 'Fields',\r\n          cellRenderer: DataFieldsComponent,\r\n          cellRendererParams: (() => ({\r\n            onEditFields: (contentType) => this.#editFields(contentType),\r\n          } satisfies DataFieldsParams))(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWideMin100,\r\n          field: 'Name',\r\n          cellClass: (p) => {\r\n            return `${p.data.EditInfo.DisableEdit ? 'no-outline' : 'primary-action highlight'}`.split(' ');\r\n          },\r\n          valueGetter: (p: { data: ContentType }) => p.data?.Name,\r\n          onCellClicked: (p) => {\r\n            this.editContentType(p.data);\r\n          },\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWideFlex3,\r\n          field: 'Description',\r\n          valueGetter: (p: { data: ContentType }) => p.data?.Properties?.Description,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight4,\r\n          cellRenderer: DataActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: DataActionsParams = {\r\n              enablePermissionsGetter: () => this.enablePermissions,\r\n              do: (verb, contentType) => {\r\n                switch (verb) {\r\n                  case 'createUpdateMetaData': this.#createOrEditMetadata(contentType); break;\r\n                  case 'openPermissions': this.#openPermissions(contentType); break;\r\n                  case 'editContentType': this.editContentType(contentType); break;\r\n                  case 'openMetadata': this.#openMetadata(contentType); break;\r\n                  case 'openRestApi': this.#openRestApi(contentType); break;\r\n                  case 'typeExport': this.#exportType(contentType); break;\r\n                  case 'dataExport': this.#openDataExport(contentType); break;\r\n                  case 'dataImport': this.#openDataImport(contentType); break;\r\n                  case 'deleteContentType': this.#deleteContentType(contentType); break;\r\n                }\r\n              }\r\n            } satisfies DataActionsParams;\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Actions in the grid\r\n\r\n  #addItem(contentType: ContentType) {\r\n    const form: EditForm = {\r\n      items: [EditPrep.newFromType(contentType.StaticName)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRouter.navParentFirstChild([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #editFields(contentType: ContentType) {\r\n    this.#dialogRouter.navParentFirstChild([`fields/${contentType.StaticName}`]);\r\n  }\r\n\r\n\r\n  #createOrEditMetadata(contentType: ContentType) {\r\n    const form: EditForm = {\r\n      items: [\r\n        !contentType.Properties\r\n          ? {\r\n              ...EditPrep.newMetadata(contentType.StaticName, eavConstants.contentTypes.contentType, eavConstants.metadata.contentType),\r\n              Prefill: {\r\n                Label: contentType.Name,\r\n                Description: contentType.Description\r\n              },\r\n            }\r\n          : EditPrep.editId(contentType.Properties.Id),\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRouter.navParentFirstChild([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #openPermissions(contentType: ContentType) {\r\n    this.#dialogRouter.navParentFirstChild([GoToPermissions.getUrlContentType(contentType.StaticName)]);\r\n  }\r\n\r\n  #openMetadata(contentType: ContentType) {\r\n    const url = GoToMetadata.getUrlContentType(\r\n      contentType.StaticName,\r\n      `Metadata for Content Type: ${contentType.Name} (${contentType.Id})`,\r\n    );\r\n    this.#dialogRouter.navParentFirstChild([url]);\r\n  }\r\n\r\n  #openRestApi(contentType: ContentType) {\r\n    this.#dialogRouter.navParentFirstChild([GoToDevRest.getUrlData(contentType)]);\r\n  }\r\n\r\n  #exportType(contentType: ContentType) {\r\n    this.#contentExportSvc.exportJson(contentType.StaticName);\r\n  }\r\n\r\n  #openDataExport(contentType: ContentType) {\r\n    this.#dialogRouter.navParentFirstChild([`export/${contentType.StaticName}`]);\r\n  }\r\n\r\n  #openDataImport(contentType: ContentType, files?: File[]) {\r\n    const contentImportData: ContentImportDialogData = { files };\r\n    this.#dialogRouter.navParentFirstChild([`${contentType.StaticName}/import`], { state: contentImportData });\r\n  }\r\n\r\n  #deleteContentType(contentType: ContentType) {\r\n    if (!confirm(`Are you sure you want to delete '${contentType.Name}' (${contentType.Id})?`)) return;\r\n    this.#snackBar.open('Deleting...');\r\n    this.#contentTypeSvc.delete(contentType).subscribe(result => {\r\n      this.#snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.#fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  //#endregion\r\n}\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"contentTypes()\" [gridOptions]=\"gridOptions\" appDragAndDrop\r\n    [allowedFileTypes]=\"'xml,json'\" (filesDropped)=\"filesDropped($event)\">\r\n  </ag-grid-angular>\r\n  <mat-dialog-actions class=\"eav-dialog-actions\">\r\n    <div class=\"eav-dialog-actions-div\">\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field eav-scope-dropdown\">\r\n        <mat-select [ngModel]=\"scope()\" name=\"Scope\" (ngModelChange)=\"changeScope($event)\">\r\n          @for (scopeOption of (scopeOptions()); track scopeOption) {\r\n          <mat-option [value]=\"scopeOption.name\">\r\n            {{ 'Scope: ' + scopeOption.label }}\r\n          </mat-option>\r\n          }\r\n          <mat-option [value]=\"dropdownInsertValue\">Scope: Other...</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      <button mat-button class=\"eav-button__with-icon\" tippy=\"Import content type\" (click)=\"importType()\">\r\n        <mat-icon class=\"eav-icon\">cloud_upload</mat-icon>\r\n        <span>Content Type</span>\r\n      </button>\r\n      @if (isDebug()) {\r\n      <button mat-button class=\"eav-button__with-icon\" color=\"accent\" tippy=\"Create a ghost content type\"\r\n        (click)=\"createGhost()\">\r\n        <mat-icon class=\"eav-icon\">share</mat-icon>\r\n        <span>Ghost</span>\r\n      </button>\r\n      }\r\n    </div>\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new content type\"\r\n      (click)=\"editContentType(null)\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>\r\n<router-outlet></router-outlet>\r\n","export function toBase64(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n      resolve((reader.result as string).split(',')[1]);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n\r\nexport function toString(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsText(file);\r\n    reader.onload = () => {\r\n      resolve(reader.result as string);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n","import { Observable, pipe, UnaryFunction } from 'rxjs';\r\nimport { distinctUntilChanged, map } from 'rxjs/operators';\r\nimport isEqual from 'lodash-es/isEqual';\r\n\r\n/**\r\n * Combine map and distinctUntilChanged, as this is a very common pattern.\r\n * @param fn the mapping function\r\n * @returns\r\n */\r\nexport function mapUntilChanged<T, R>(\r\n  fn: (state: T) => R\r\n): UnaryFunction<Observable<T>, Observable<R>> {\r\n  return pipe(\r\n    distinctUntilChanged(),\r\n    map(fn),\r\n    distinctUntilChanged(),\r\n  );\r\n}\r\n\r\nexport function mapUntilObjChanged<T, R>(\r\n  fn: (state: T) => R\r\n): UnaryFunction<Observable<T>, Observable<R>> {\r\n  return pipe(\r\n    distinctUntilChanged(isEqual),\r\n    map(fn),\r\n    distinctUntilChanged(isEqual),\r\n  );\r\n}\r\n"],"names":["MatBadgeModule","MatRippleModule","MatIconModule","MatMenuModule","guidRegex","i0","ɵɵelementStart","ɵɵlistener","DataActionsComponent_Conditional_1_Template_div_click_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","do","ɵɵtext","ɵɵelementEnd","DataActionsComponent_Conditional_3_Template_div_click_0_listener","_r3","ɵɵadvance","ɵɵproperty","contentType","Metadata","length","DataActionsComponent_Conditional_5_Template_div_click_0_listener","_r4","Permissions","Count","DataActionsComponent_ng_template_12_Template_button_click_0_listener","_r5","DataActionsComponent_ng_template_12_Template_button_click_5_listener","ɵɵelement","DataActionsComponent_ng_template_12_Template_button_click_9_listener","DataActionsComponent_ng_template_12_Template_button_click_14_listener","DataActionsComponent_ng_template_12_Template_button_click_19_listener","DataActionsComponent_ng_template_12_Template_button_click_24_listener","EditInfo","DisableRename","DisableDelete","DataActionsComponent","agInit","params","data","enablePermissions","enablePermissionsGetter","test","StaticName","refresh","verb","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","DataActionsComponent_Template","rf","ctx","ɵɵtemplate","DataActionsComponent_Conditional_1_Template","DataActionsComponent_Conditional_2_Template","DataActionsComponent_Conditional_3_Template","DataActionsComponent_Conditional_4_Template","DataActionsComponent_Conditional_5_Template","DataActionsComponent_Conditional_6_Template","DataActionsComponent_ng_template_12_Template","ɵɵconditional","DisableEdit","Properties","DisableMetadata","menu_r6","i1","MatRipple","i2","MatIcon","i3","MatBadge","i4","MatMenu","MatMenuItem","MatMenuContent","MatMenuTrigger","encapsulation","TippyDirective","DataFieldsComponent","value","tooltip","ReadOnly","ReadOnlyMessage","SharedDefId","icon","editFields","onEditFields","DataFieldsComponent_Template","DataFieldsComponent_Template_div_click_1_listener","ɵɵtextInterpolate1","DataItemsComponent","showItems","onShowItems","addItem","onAddItem","DataItemsComponent_Template","DataItemsComponent_Template_div_click_1_listener","DataItemsComponent_Template_div_click_4_listener","ɵɵpropertyInterpolate1","ɵɵtextInterpolate","styles","inject","signal","FormsModule","MatButtonModule","MatOptionModule","MatDialogActions","MatFormFieldModule","MatSelectModule","MatSnackBar","NavigationEnd","RouterOutlet","filter","from","map","startWith","take","transient","ContentExportService","GoToDevRest","GoToMetadata","GoToPermissions","ColumnDefinitions","BaseComponent","defaultGridOptions","dropdownInsertValue","eavConstants","DragAndDropDirective","toString","convertFormToUrl","EditPrep","SxcGridModule","DialogRoutingService","mapUntilChanged","GlobalConfigService","ContentTypesService","DialogConfigAppService","scopeOption_r1","name","label","DataComponent_Conditional_15_Template_button_click_0_listener","_r2","ctx_r2","createGhost","DataComponent","snackBar","contentTypeSvc","contentExportSvc","dialogConfigSvc","dialogRouter","constructor","isDebug","contentTypes","undefined","scope","scopeOptions","gridOptions","buildGridOptions","ngOnInit","fetchScopes","refreshScopeOnRouteChange","doOnDialogClosed","fetchContentTypes","getCurrent$","subscribe","Context","Enable","AppPermissions","filesDropped","files","importFile","ext","substring","lastIndexOf","toLocaleLowerCase","pipe","fileString","contentTypeName","split","find","ct","Name","message","open","duration","openDataImport","importType","dialogData","navParentFirstChild","state","showContentItems","#showContentItems","editContentType","#fetchContentTypes","retrieveContentTypes","_compareLabel","Label","replace","set","scopes","default","#fetchScopes","getScopesV2","scopeList","manual","sOld","sNew","withNiceLabel","s","countInfo","typesInherited","typesTotal","sourceName","window","prompt","_","changeScope","newScope","navRelative","#refreshScopeOnRouteChange","subscriptions","add","router","events","event","getParam","m","option","includes","newScopeOption","typesOfApp","#buildGridOptions","columnDefs","IdWithDefaultRenderer","cellRendererParams","idFieldParamsTooltipGetter","TextWidePrimary","headerName","field","sort","onCellClicked","comparator","valueA","valueB","nodeA","nodeB","isInverted","contentTypeA","contentTypeB","localeCompare","Items","cellRenderer","Fields","TextWideMin100","cellClass","p","valueGetter","TextWideFlex3","Description","ActionsPinnedRight4","createOrEditMetadata","openPermissions","openMetadata","openRestApi","exportType","openDataExport","deleteContentType","#addItem","form","items","newFromType","formUrl","#editFields","#createOrEditMetadata","newMetadata","metadata","Prefill","editId","Id","#openPermissions","getUrlContentType","#openMetadata","url","#openRestApi","getUrlData","#exportType","exportJson","#openDataExport","#openDataImport","contentImportData","#deleteContentType","confirm","delete","result","ɵɵInheritDefinitionFeature","DataComponent_Template","DataComponent_Template_ag_grid_angular_filesDropped_1_listener","$event","DataComponent_Template_mat_select_ngModelChange_5_listener","ɵɵrepeaterCreate","DataComponent_For_7_Template","ɵɵrepeaterTrackByIdentity","DataComponent_Template_button_click_10_listener","DataComponent_Conditional_15_Template","DataComponent_Template_button_click_16_listener","ɵɵrepeater","MatFormField","MatSelect","MatOption","NgControlStatus","NgModel","i5","MatButton","MatFabButton","i6","i7","AgGridAngular","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","error","readAsText","distinctUntilChanged","isEqual","fn","mapUntilObjChanged"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}