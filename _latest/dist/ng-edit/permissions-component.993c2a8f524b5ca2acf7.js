(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{gyhz:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i("vxPj"),o=i("fXoL"),s=i("dNgK"),r=i("FKr1"),a=i("Qu3c"),c=i("NFeN"),l=function(){function e(e){this.snackBar=e}return e.prototype.agInit=function(e){this.id=e.value,this.tooltip=e.tooltipGetter(e.data)},e.prototype.refresh=function(e){return!0},e.prototype.copy=function(){Object(n.a)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(o.Pb(s.b))},e.\u0275cmp=o.Jb({type:e,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"matTooltip","click"],[1,"id"],[1,"icon"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.dc("click",function(){return t.copy()}),o.Vb(1,"span",1),o.Mc(2),o.Ub(),o.Vb(3,"mat-icon",2),o.Mc(4,"file_copy"),o.Ub(),o.Ub()),2&e&&(o.nc("matTooltip",t.tooltip),o.Db(2),o.Nc(t.id))},directives:[r.p,a.a,c.a],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),e}()},tIKv:function(e,t,i){"use strict";i.r(t),i.d(t,"PermissionsComponent",function(){return j});var n=i("mrSG"),o=i("DR3G"),s=i("tyNb"),r=i("2Vo4"),a=i("quSY"),c=i("pLZG"),l=i("JX91"),d=i("lJxs"),p=i("Zy1z"),u=i("gyhz"),m=i("1HxE"),h=i("qb9A"),b=i("X9FW"),f=i("fXoL"),g=i("FKr1"),y=i("Qu3c"),v=i("NFeN"),C=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(e){return!0},e.prototype.deletePermission=function(){this.params.onDelete(this.params.data)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Jb({type:e,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","matTooltip","Delete",1,"like-button","highlight",3,"click"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"div",1),f.dc("click",function(){return t.deletePermission()}),f.Vb(2,"mat-icon"),f.Mc(3,"delete"),f.Ub(),f.Ub(),f.Ub())},directives:[g.p,y.a,v.a],styles:[""]}),e}(),k=i("0IaG"),x=i("CLg8"),P=i("dNgK"),O=i("bTqV"),T=i("gwh1"),w=i("ofXK"),j=function(){function e(e,t,i,s,c){this.dialogRef=e,this.router=t,this.route=i,this.permissionsService=s,this.snackBar=c,this.permissions$=new r.a(null),this.modules=o.a,this.gridOptions=Object(n.a)(Object(n.a)({},m.a),{frameworkComponents:{idFieldComponent:u.a,permissionsActionsComponent:C},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(e){return"ID: "+e.Id+"\nGUID: "+e.Guid}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:40,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new a.a,this.targetType=parseInt(this.route.snapshot.paramMap.get("type"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key")}return e.prototype.ngOnInit=function(){this.fetchPermissions(),this.refreshOnChildClosed()},e.prototype.ngOnDestroy=function(){this.permissions$.complete(),this.subscription.unsubscribe()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.fetchPermissions=function(){var e=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(t){e.permissions$.next(t)})},e.prototype.editPermission=function(e){var t,i,o=this;if(null==e){var s=null===(t=Object.values(h.a.metadata).find(function(e){return e.type===o.targetType}))||void 0===t?void 0:t.target;i={items:[{ContentTypeName:h.a.contentTypes.permissions,For:Object(n.a)(Object(n.a)(Object(n.a)({Target:s},this.keyType===h.a.keyTypes.guid&&{Guid:this.key}),this.keyType===h.a.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===h.a.keyTypes.string&&{String:this.key})}]}}else i={items:[{EntityId:e.data.Id}]};var r=Object(b.a)(i);this.router.navigate(["edit/"+r],{relativeTo:this.route})},e.prototype.deletePermission=function(e){var t=this;confirm("Delete '"+e.Title+"' ("+e.Id+")?")&&(this.snackBar.open("Deleting..."),this.permissionsService.delete(e.Id).subscribe(function(){t.snackBar.open("Deleted",null,{duration:2e3}),t.fetchPermissions()}))},e.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.router.events.pipe(Object(c.a)(function(e){return e instanceof s.b}),Object(l.a)(!!this.route.snapshot.firstChild),Object(d.a)(function(){return!!e.route.snapshot.firstChild}),Object(p.a)(),Object(c.a)(function(e){var t=Object(n.g)(e,2);return t[0]&&!t[1]})).subscribe(function(){e.fetchPermissions()}))},e.\u0275fac=function(t){return new(t||e)(f.Pb(k.f),f.Pb(s.c),f.Pb(s.a),f.Pb(x.a),f.Pb(P.b))},e.\u0275cmp=f.Jb({type:e,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","matTooltip","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","matTooltip","Create a new permission",1,"grid-fab",3,"click"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"div",1),f.Vb(2,"div",2),f.Vb(3,"div"),f.Mc(4,"Permissions"),f.Ub(),f.Vb(5,"button",3),f.dc("click",function(){return t.closeDialog()}),f.Vb(6,"mat-icon"),f.Mc(7,"close"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(8,"router-outlet"),f.Vb(9,"div",4),f.Qb(10,"ag-grid-angular",5),f.ic(11,"async"),f.Qb(12,"div",6),f.Vb(13,"button",7),f.dc("click",function(){return t.editPermission(null)}),f.Vb(14,"mat-icon"),f.Mc(15,"add"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Db(10),f.nc("rowData",f.jc(11,3,t.permissions$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[k.g,O.a,y.a,v.a,s.e,T.a],pipes:[w.b],styles:[""]}),e}()},vxPj:function(e,t,i){"use strict";function n(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var i=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))}i.d(t,"a",function(){return n})}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.03.00/ng-edit/permissions-component.993c2a8f524b5ca2acf7.js.map