{"version":3,"file":"projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/apps-management/create-inherited-app/create-inherited-app.component.ts","./projects/eav-ui/src/app/apps-management/create-inherited-app/create-inherited-app.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html"],"sourcesContent":["import { Component, HostBinding, signal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from '../../../../../core';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { AppsListService } from '../services/apps-list.service';\r\n\r\n@Component({\r\n  selector: 'app-create-inherited-app',\r\n  templateUrl: './create-inherited-app.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    RouterOutlet,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatDialogActions,\r\n    MatButtonModule,\r\n    FieldHintComponent\r\n  ],\r\n})\r\nexport class CreateInheritedAppComponent{\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n\r\n\r\n\r\n  private appsListService = transient(AppsListService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<CreateInheritedAppComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.form = this.buildForm();\r\n  }\r\n\r\n  loading = signal<boolean>(false);\r\n  inheritableApps = this.appsListService.getInheritable();\r\n\r\n\r\n  closeDialog(): void {\r\n    this.dialog.close();\r\n  }\r\n\r\n  create(): void {\r\n    this.form.disable();\r\n    this.loading.set(true);\r\n    const inheritId = this.form.controls.inheritId.value;\r\n    // TODO:: remove after test\r\n    // const name = this.inheritableApps$.value.find(app => app.Id === inheritId).Name;\r\n    const name = this.inheritableApps().find(app => app.Id === inheritId).Name;\r\n    this.snackBar.open('Creating inherited app...');\r\n    this.appsListService.create(name, inheritId).subscribe({\r\n      error: () => {\r\n        this.form.enable();\r\n    this.loading.set(false);\r\n\r\n        this.snackBar.open('Failed to create inherited app. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.form.enable();\r\n        this.snackBar.open('Created inherited app', undefined, { duration: 2000 });\r\n        this.closeDialog();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildForm(): UntypedFormGroup {\r\n    const form = new UntypedFormGroup({\r\n      inheritId: new UntypedFormControl(null, [Validators.required]),\r\n    });\r\n    return form;\r\n  }\r\n}\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Create inherited App</div>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <router-outlet></router-outlet>\r\n    <p>\r\n      Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were\r\n      specifically\r\n      marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the\r\n      App you expect, make sure that has happened.\r\n    </p>\r\n    <form [formGroup]=\"form\">\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Inherit App</mat-label>\r\n        <mat-select formControlName=\"inheritId\"\r\n          [placeholder]=\"inheritableApps() === undefined ? 'Loading...' : inheritableApps() === null || inheritableApps().length === 0 ? 'No inheritable apps found' : ''\">\r\n          @for (app of inheritableApps(); track app) {\r\n          <mat-option [value]=\"app.Id\">\r\n            {{ app.Name }}\r\n          </mat-option>\r\n          }\r\n        </mat-select>\r\n      </mat-form-field>\r\n      @if (form.controls.inheritId.touched && form.controls.inheritId.errors?.required) {\r\n      <app-field-hint [isError]=\"true\">\r\n        Required\r\n      </app-field-hint>\r\n      }\r\n    </form>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    <button type=\"button\" mat-raised-button [disabled]=\"loading()\" (click)=\"closeDialog()\">\r\n      Cancel\r\n    </button>\r\n    <button type=\"button\" mat-raised-button color=\"accent\" [disabled]=\"loading() || !form.valid\" (click)=\"create()\">\r\n      Create\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatFormFieldModule,\r\n    NgClass,\r\n    NgTemplateOutlet\r\n  ]\r\n})\r\nexport class FieldHintComponent {\r\n  isError = input<boolean>(false);\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError()) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n"],"names":["signal","FormsModule","ReactiveFormsModule","UntypedFormControl","UntypedFormGroup","Validators","MatButtonModule","MatOptionModule","MatDialogActions","MatDialogRef","MatFormFieldModule","MatSelectModule","MatSnackBar","RouterOutlet","transient","FieldHintComponent","AppsListService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","app_r1","Id","ɵɵadvance","ɵɵtextInterpolate1","Name","CreateInheritedAppComponent","constructor","dialog","snackBar","hostClass","appsListService","loading","inheritableApps","getInheritable","form","buildForm","closeDialog","close","create","disable","set","inheritId","controls","value","name","find","app","open","subscribe","error","enable","undefined","duration","next","required","ɵɵdirectiveInject","i1","i2","selectors","hostVars","hostBindings","CreateInheritedAppComponent_HostBindings","rf","ctx","ɵɵhostProperty","ɵɵelement","ɵɵrepeaterCreate","CreateInheritedAppComponent_For_14_Template","ɵɵrepeaterTrackByIdentity","ɵɵtemplate","CreateInheritedAppComponent_Conditional_15_Template","ɵɵlistener","CreateInheritedAppComponent_Template_button_click_17_listener","CreateInheritedAppComponent_Template_button_click_19_listener","length","ɵɵrepeater","ɵɵconditional","touched","errors","valid","i3","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","MatFormField","MatLabel","i5","MatSelect","i6","MatOption","i7","MatButton","encapsulation","NgClass","NgTemplateOutlet","input","ɵɵelementContainer","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","ɵɵprojection","isError","isShort","toggleIsShort","inputs","standalone","features","ɵɵStandaloneFeature","ngContentSelectors","_c0","decls","vars","consts","template","FieldHintComponent_Template","FieldHintComponent_Template_div_click_0_listener","ɵɵrestoreView","_r1","ɵɵresetView","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction1","_c1","tmp_2_0","MatHint","MatError","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}