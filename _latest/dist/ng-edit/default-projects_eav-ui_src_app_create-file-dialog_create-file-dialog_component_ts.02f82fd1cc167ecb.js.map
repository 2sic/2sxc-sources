{"version":3,"file":"default-projects_eav-ui_src_app_create-file-dialog_create-file-dialog_component_ts.02f82fd1cc167ecb.js","mappings":"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","names":["MatInputAutofocusDirective","constructor","matInput","elementRef","this","autofocusSelectValue","input","ngOnInit","setTimeout","focus","toBoolean","nativeElement","setSelectionRange","value","length","valueLowerCase","toLocaleLowerCase","static","__ngFactoryType__","i0","i1","debug_node_JnOYh9kg","FsC","selectors","inputs","platform_r3","purpose_r4","template_r5","Key","Name","_c0","vm_r6","loadingPreview","preview","previewError","_r1","ctx_r1","closeDialog","CreateFileDialogComponent_Conditional_0_For_19_Template","CreateFileDialogComponent_Conditional_0_For_26_Template","CreateFileDialogComponent_Conditional_0_For_33_Template","CreateFileDialogComponent_Conditional_0_Conditional_39_Template","CreateFileDialogComponent_Conditional_0_Conditional_40_Template","CreateFileDialogComponent_Conditional_0_Conditional_41_Template","CreateFileDialogComponent_Conditional_0_Conditional_42_Template","saveAndClose","controls","finalName","folder","trim","ngForm","platforms","purposes","templates","name","touched","errors","required","canSave","CreateFileDialogComponent","BaseComponent","#all","#templates$","#loadingPreview$","#sourceService","dialogData","dialog","super","hostClass","transient","SourceService","formValid","signal","previewValid","computed","#watchKeyboardShortcuts","BehaviorSubject","#buildForm","#fetchTemplates","#buildViewModel","subscriptions","add","subscribe","set","ngAfterViewInit","statusChanges","valid","ngOnDestroy","complete","getPredefinedTemplates","purpose","type","then","response","templateKey","Default","patchValue","next","Templates","UntypedFormGroup","platform","UntypedFormControl","disabled","Validators","combineLatest","valueChanges","pipe","startWith","distinctUntilChanged","template","find","t","suggestedName","SuggestedFileName","SanitizeHelper","sanitizePath","Prefix","Suffix","Extension","replace","platforms$","map","platformsMap","forEach","Platforms","Object","keys","purposes$","purposesMap","Purpose","templates$","filter","platformMatch","includes","purposeMatch","tap","some","newTemplateKey","preview$","throttleTime","duration","scheduler","asyncScheduler","config","duration$","timer","throttle","durationSelector","operate","source","subscriber","leading","trailing","hasValue","sendValue","throttled","isComplete","endThrottling","unsubscribe","send","cleanupThrottling","startThrottle","innerFrom","createOperatorSubscriber","closed","switchMap","forkJoin","getPreview","global","of","undefined","IsValid","viewModel$","Preview","Error","result","close","formValues","getRawValue","keydownEvents","event","isCtrlEnter","preventDefault","MAT_DIALOG_DATA","VBU","hostVars","hostBindings","rf","ctx","CreateFileDialogComponent_Conditional_0_Template","tmp_0_0","FormsModule","i2","ReactiveFormsModule","MatFormFieldModule","i3","MatSelectModule","i4","MatOptionModule","MatInputModule","i5","MatIconModule","i6","MatDialogActions","MatProgressSpinnerModule","i7","MatButtonModule","i8","NgClass","AsyncPipe","FieldHintComponent","SaveCloseButtonFabComponent","styles","appFilesAsset","apiExplorerAppApiFiles","HttpServiceBase","get","viewKey","urlItems","getHttpApiUrl","params","appId","templateIdOrPath","view","Type","save","http","post","apiUrl","getAllPromise","mask","fetchPromise","Files","file","Shared","getWebApis","files","isShared","isCompiled","splitIndex","path","lastIndexOf","fileExtIndex","substring","endpointPath","edition","getWebApisLive","refresh","apiResource","httpResource","url","getWebApiDetails","apiPath","zoneId","create","test","i","EntityId","toString","IsShared","Path","templateId","_angular_core__WEBPACK_IMPORTED_MODULE_5__","jDH","factory","ɵfac"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/directives/mat-input-autofocus.directive.ts","./projects/eav-ui/src/app/create-file-dialog/create-file-dialog.component.html","./projects/eav-ui/src/app/create-file-dialog/create-file-dialog.component.ts","./node_modules/rxjs/dist/esm/internal/operators/throttleTime.js","./node_modules/rxjs/dist/esm/internal/operators/throttle.js","./projects/eav-ui/src/app/code-editor/services/source.service.ts"],"sourcesContent":["import { Directive, ElementRef, input, OnInit } from '@angular/core';\r\nimport { MatInput } from '@angular/material/input';\r\n\r\n@Directive({\r\n  selector: '[appMatInputAutofocus]',\r\n})\r\nexport class MatInputAutofocusDirective implements OnInit {\r\n  autofocusSelectValue = input<string | boolean | null | undefined>(false);\r\n\r\n  constructor(private matInput: MatInput, private elementRef: ElementRef<HTMLInputElement>) { }\r\n\r\n  ngOnInit(): void {\r\n    setTimeout(() => {\r\n      this.matInput.focus();\r\n\r\n      if (this.toBoolean(this.autofocusSelectValue())) {\r\n        this.elementRef.nativeElement.setSelectionRange(0, this.matInput.value.length);\r\n      }\r\n    });\r\n  }\r\n\r\n  private toBoolean(value: any): boolean | null | undefined {\r\n    if (typeof value === 'boolean') { return value; }\r\n    if (typeof value === 'string') {\r\n      const valueLowerCase = value.toLocaleLowerCase();\r\n      if (valueLowerCase === 'true') { return true; }\r\n      if (valueLowerCase === 'false') { return false; }\r\n      return;\r\n    }\r\n    if (value == null) { return value; }\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"eav-dialog eav-no-scrollbar\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title eav-dialog-title-box\">\r\n        <span>Create</span>\r\n        <span class=\"eav-file-name\">\r\n          {{ controls.finalName.value\r\n              || (controls.folder.value ? controls.folder.value.trim() + '/' : '') }}\r\n        </span>\r\n      </div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n    <form [formGroup]=\"ngForm\">\r\n      <div class=\"eav-dialog-content\">\r\n        <div class=\"eav-field-container\">\r\n          <!-- Platform -->\r\n          <div>\r\n            <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n              <mat-label>Platform</mat-label>\r\n              <mat-select formControlName=\"platform\">\r\n                @for (platform of vm.platforms; track platform) {\r\n                  <mat-option [value]=\"platform\">\r\n                    {{ platform }}\r\n                  </mat-option>\r\n                }\r\n              </mat-select>\r\n            </mat-form-field>\r\n          </div>\r\n          <!-- Purpose -->\r\n          <div>\r\n            <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n              <mat-label>Purpose</mat-label>\r\n              <mat-select formControlName=\"purpose\">\r\n                @for (purpose of vm.purposes; track purpose) {\r\n                  <mat-option [value]=\"purpose\">\r\n                    {{ purpose }}\r\n                  </mat-option>\r\n                }\r\n              </mat-select>\r\n            </mat-form-field>\r\n          </div>\r\n        </div>\r\n        <!-- Template -->\r\n        <div class=\"eav-field-container\">\r\n          <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n            <mat-label>Template</mat-label>\r\n            <mat-select formControlName=\"templateKey\">\r\n              @for (template of vm.templates; track template) {\r\n                <mat-option [value]=\"template.Key\">\r\n                  {{ template.Name }}\r\n                </mat-option>\r\n              }\r\n            </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <!-- Name -->\r\n        <div class=\"eav-field-container\">\r\n          <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n            <mat-label>Name</mat-label>\r\n            <input matInput type=\"text\" formControlName=\"name\" required appMatInputAutofocus\r\n              autofocusSelectValue=\"true\">\r\n          </mat-form-field>\r\n          @if (controls.name.touched && controls.name.errors?.required) {\r\n            <app-field-hint [isError]=\"true\">\r\n              This field is required\r\n            </app-field-hint>\r\n          }\r\n        </div>\r\n        @if (vm.preview) {\r\n          <div class=\"eav-preview-container\">\r\n            <div class=\"eav-preview-label-box\">\r\n              <label class=\"eav-preview-label\" [ngClass]=\"{ 'disabled': vm.loadingPreview }\">Preview</label>\r\n            </div>\r\n            <pre class=\"fancy-scrollbar-light\" [ngClass]=\"{ 'disabled': vm.loadingPreview }\">{{ vm.preview }}</pre>\r\n          </div>\r\n        }\r\n        @if (!vm.loadingPreview && vm.previewError) {\r\n          <div class=\"eav-preview-error\">\r\n            {{ vm.previewError }}\r\n          </div>\r\n        }\r\n        @if (vm.loadingPreview) {\r\n          <div>\r\n            <mat-spinner mode=\"indeterminate\" diameter=\"20\" color=\"accent\"></mat-spinner>\r\n            <div class=\"spacer\"></div>\r\n          </div>\r\n        }\r\n      </div>\r\n      <mat-dialog-actions align=\"end\">\r\n        <app-save-close-button-fab\r\n          [ngClass]=\"!canSave() ? 'disabled' : ''\"\r\n          [disabled]=\"!canSave()\"\r\n          [label]=\"'Form.Buttons.CreateAndClose'\"\r\n          (action)=\"saveAndClose()\"\r\n        />\r\n      </mat-dialog-actions>\r\n    </form>\r\n  </div>\r\n}","import { AsyncPipe, NgClass } from '@angular/common';\r\nimport { AfterViewInit, Component, computed, HostBinding, Inject, OnDestroy, OnInit, signal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MAT_DIALOG_DATA, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { asyncScheduler, BehaviorSubject, combineLatest, distinctUntilChanged, forkJoin, map, Observable, of, startWith, switchMap, tap, throttleTime, timer } from 'rxjs';\r\nimport { CreateFileDialogData, CreateFileDialogResult, CreateFileFormControls, CreateFileFormValues, CreateFileViewModel } from '.';\r\nimport { transient } from '../../../../core';\r\nimport { PredefinedTemplate } from '../code-editor/models/predefined-template.model';\r\nimport { Preview } from '../code-editor/models/preview.models';\r\nimport { SourceService } from '../code-editor/services/source.service';\r\nimport { isCtrlEnter } from '../edit/dialog/main/keyboard-shortcuts';\r\nimport { SanitizeHelper } from '../edit/shared/helpers';\r\nimport { BaseComponent } from '../shared/components/base.component';\r\nimport { FieldHintComponent } from '../shared/components/field-hint/field-hint.component';\r\nimport { MatInputAutofocusDirective } from '../shared/directives/mat-input-autofocus.directive';\r\nimport { SaveCloseButtonFabComponent } from '../shared/modules/save-close-button-fab/save-close-button-fab.component';\r\n\r\n@Component({\r\n  selector: 'app-create-file-dialog',\r\n  templateUrl: './create-file-dialog.component.html',\r\n  styleUrls: ['./create-file-dialog.component.scss'],\r\n  imports: [\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatInputModule,\r\n    MatIconModule,\r\n    MatDialogActions,\r\n    MatProgressSpinnerModule,\r\n    MatButtonModule,\r\n    NgClass,\r\n    AsyncPipe,\r\n    FieldHintComponent,\r\n    MatInputAutofocusDirective,\r\n    SaveCloseButtonFabComponent,\r\n  ]\r\n})\r\nexport class CreateFileDialogComponent extends BaseComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  ngForm: UntypedFormGroup;\r\n  controls: CreateFileFormControls;\r\n  viewModel$: Observable<CreateFileViewModel>;\r\n\r\n  #all = 'All' as const;\r\n  #templates$: BehaviorSubject<PredefinedTemplate[]>;\r\n  #loadingPreview$: BehaviorSubject<boolean>;\r\n  #sourceService = transient(SourceService);\r\n\r\n  protected formValid = signal(false);\r\n\r\n  // Signals for preview loading and validity\r\n  protected loadingPreview = signal(false);\r\n  protected previewValid = signal(false);\r\n\r\n  protected canSave = computed(() =>\r\n    this.formValid() &&\r\n    !this.loadingPreview() &&\r\n    this.previewValid()\r\n  );\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) private dialogData: CreateFileDialogData,\r\n    private dialog: MatDialogRef<CreateFileDialogComponent>,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.#watchKeyboardShortcuts();\r\n\r\n    this.#templates$ = new BehaviorSubject<PredefinedTemplate[]>([]);\r\n    this.#loadingPreview$ = new BehaviorSubject(false);\r\n\r\n    this.#buildForm();\r\n    this.#fetchTemplates();\r\n    this.#buildViewModel();\r\n\r\n    // Subscribe signals to their sources\r\n    this.subscriptions.add(\r\n      this.#loadingPreview$.subscribe(value => this.loadingPreview.set(value))\r\n    );\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngForm?.statusChanges.subscribe(() => {\r\n      this.formValid.set(this.ngForm?.valid ?? false);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.#templates$.complete();\r\n    this.#loadingPreview$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  #fetchTemplates(): void {\r\n    this.#sourceService.getPredefinedTemplates(this.dialogData.purpose, this.dialogData.type).then(response => {\r\n      if (this.controls.templateKey.value !== response.Default) {\r\n        this.controls.templateKey.patchValue(response.Default);\r\n      }\r\n      this.#templates$.next(response.Templates);\r\n    });\r\n  }\r\n\r\n  #buildForm(): void {\r\n    this.ngForm = new UntypedFormGroup({\r\n      platform: new UntypedFormControl(this.#all),\r\n      purpose: new UntypedFormControl({ value: this.dialogData.purpose ?? this.#all, disabled: this.dialogData.purpose != null }),\r\n      templateKey: new UntypedFormControl(null, Validators.required),\r\n      name: new UntypedFormControl(this.dialogData.name ?? null, Validators.required),\r\n      finalName: new UntypedFormControl({ value: null, disabled: true }),\r\n      folder: new UntypedFormControl({ value: this.dialogData.folder ?? '', disabled: true }),\r\n    });\r\n\r\n    this.controls = this.ngForm.controls as any;\r\n\r\n    this.subscriptions.add(\r\n      combineLatest([\r\n        this.#templates$,\r\n        this.controls.templateKey.valueChanges.pipe(\r\n          startWith<string>(this.controls.templateKey.value),\r\n          distinctUntilChanged(),\r\n        ),\r\n      ]).subscribe(([templates, templateKey]) => {\r\n        const template = templates.find(t => t.Key === templateKey);\r\n        const suggestedName = this.dialogData.name\r\n          ? this.controls.name.value || this.dialogData.name\r\n          : template?.SuggestedFileName ?? null;\r\n\r\n        if (this.controls.name.value !== suggestedName) {\r\n          this.controls.name.patchValue(suggestedName);\r\n        }\r\n      })\r\n    );\r\n\r\n    this.subscriptions.add(\r\n      combineLatest([\r\n        this.#templates$,\r\n        this.controls.templateKey.valueChanges.pipe(\r\n          startWith<string>(this.controls.templateKey.value),\r\n          distinctUntilChanged(),\r\n        ),\r\n        this.controls.name.valueChanges.pipe(\r\n          startWith<string>(this.controls.name.value),\r\n          distinctUntilChanged(),\r\n        ),\r\n        this.controls.folder.valueChanges.pipe(\r\n          startWith<string>(this.controls.folder.value),\r\n          distinctUntilChanged(),\r\n        ),\r\n      ]).subscribe(([templates, templateKey, name, folder]) => {\r\n        const template = templates.find(t => t.Key === templateKey);\r\n\r\n        let finalName: string = null;\r\n        if (name) {\r\n          folder = folder.trim();\r\n          name = SanitizeHelper.sanitizePath(name.trim());\r\n          name = `${template?.Prefix ?? ''}${name}${template?.Suffix ?? ''}${template?.Extension ?? ''}`;\r\n          finalName = `${folder ? `${folder}/` : ''}${name}`.replace(/\\/{2,}/g, '/');\r\n        }\r\n\r\n        if (this.controls.finalName.value !== finalName) {\r\n          this.controls.finalName.patchValue(finalName);\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  #buildViewModel(): void {\r\n    const platforms$ = this.#templates$.pipe(\r\n      map(templates => {\r\n        const platformsMap: Record<string, string> = {\r\n          [this.#all]: this.#all,\r\n        };\r\n        templates.forEach(template => {\r\n          template.Platforms?.forEach(platform => {\r\n            platformsMap[platform] = platform;\r\n          });\r\n        });\r\n        return Object.keys(platformsMap);\r\n      }),\r\n    );\r\n    const purposes$ = this.#templates$.pipe(\r\n      map(templates => {\r\n        const purposesMap: Record<string, string> = {\r\n          [this.#all]: this.#all,\r\n        };\r\n        templates.forEach(template => {\r\n          purposesMap[template.Purpose] = template.Purpose;\r\n        });\r\n        return Object.keys(purposesMap);\r\n      }),\r\n    );\r\n    const templates$ = combineLatest([\r\n      this.#templates$,\r\n      this.controls.platform.valueChanges.pipe(\r\n        startWith<string>(this.controls.platform.value),\r\n        distinctUntilChanged(),\r\n      ),\r\n      this.controls.purpose.valueChanges.pipe(\r\n        startWith<string>(this.controls.purpose.value),\r\n        distinctUntilChanged(),\r\n      ),\r\n    ]).pipe(\r\n      map(([templates, platform, purpose]) => {\r\n        const filtered = templates.filter(template => {\r\n          const platformMatch = platform === this.#all || (template.Platforms?.includes(platform) ?? false);\r\n          const purposeMatch = purpose === this.#all || template.Purpose === purpose;\r\n          return platformMatch && purposeMatch;\r\n        });\r\n        return filtered;\r\n      }),\r\n      tap(templates => {\r\n        if (!templates.some(t => t.Key === this.controls.templateKey.value)) {\r\n          const newTemplateKey = templates[0]?.Key ?? null;\r\n          if (this.controls.templateKey.value !== newTemplateKey) {\r\n            this.controls.templateKey.patchValue(newTemplateKey);\r\n          }\r\n        }\r\n      }),\r\n    );\r\n    const preview$ = combineLatest([\r\n      this.controls.finalName.valueChanges.pipe(\r\n        startWith<string>(this.controls.finalName.value),\r\n        distinctUntilChanged(),\r\n      ),\r\n      this.controls.templateKey.valueChanges.pipe(\r\n        startWith<string>(this.controls.templateKey.value),\r\n        distinctUntilChanged(),\r\n      ),\r\n    ]).pipe(\r\n      throttleTime(100, asyncScheduler, { leading: true, trailing: true }),\r\n      tap(() => {\r\n        this.#loadingPreview$.next(true);\r\n      }),\r\n      switchMap(([finalName, templateKey]) => {\r\n        return !finalName || !templateKey\r\n          ? of<Preview | undefined>(undefined)\r\n          : forkJoin([\r\n            this.#sourceService.getPreview(finalName, this.dialogData.global, templateKey),\r\n            timer(500),\r\n          ]).pipe(map(([preview]) => preview));\r\n      }),\r\n      tap(() => {\r\n        this.#loadingPreview$.next(false);\r\n      }),\r\n    );\r\n\r\n    // Subscribe preview validity signal\r\n    this.subscriptions.add(\r\n      preview$.subscribe(preview => {\r\n        this.previewValid.set(preview?.IsValid ?? false);\r\n      })\r\n    );\r\n\r\n    this.viewModel$ = combineLatest([platforms$, purposes$, templates$, preview$, this.#loadingPreview$]).pipe(\r\n      map(([platforms, purposes, templates, preview, loadingPreview]) => {\r\n        const viewModel: CreateFileViewModel = {\r\n          platforms,\r\n          purposes,\r\n          templates,\r\n          loadingPreview,\r\n          preview: preview?.Preview,\r\n          previewValid: preview?.IsValid ?? false,\r\n          previewError: preview?.Error,\r\n        };\r\n        return viewModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  closeDialog(result?: CreateFileDialogResult): void {\r\n    this.dialog.close(result);\r\n  }\r\n\r\n  saveAndClose(): void {\r\n    const formValues: CreateFileFormValues = this.ngForm.getRawValue();\r\n\r\n    const result: CreateFileDialogResult = {\r\n      name: formValues.finalName,\r\n      templateKey: formValues.templateKey,\r\n    };\r\n    this.closeDialog(result);\r\n  }\r\n\r\n  #watchKeyboardShortcuts(): void {\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlEnter(event) && this.canSave()) {\r\n        event.preventDefault();\r\n        this.saveAndClose();\r\n      }\r\n    });\r\n  }\r\n}","import { asyncScheduler } from '../scheduler/async';\nimport { throttle } from './throttle';\nimport { timer } from '../observable/timer';\nexport function throttleTime(duration, scheduler = asyncScheduler, config) {\n    const duration$ = timer(duration, scheduler);\n    return throttle(() => duration$, config);\n}\n","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/innerFrom';\nexport function throttle(durationSelector, config) {\n    return operate((source, subscriber) => {\n        const { leading = true, trailing = false } = config !== null && config !== void 0 ? config : {};\n        let hasValue = false;\n        let sendValue = null;\n        let throttled = null;\n        let isComplete = false;\n        const endThrottling = () => {\n            throttled === null || throttled === void 0 ? void 0 : throttled.unsubscribe();\n            throttled = null;\n            if (trailing) {\n                send();\n                isComplete && subscriber.complete();\n            }\n        };\n        const cleanupThrottling = () => {\n            throttled = null;\n            isComplete && subscriber.complete();\n        };\n        const startThrottle = (value) => (throttled = innerFrom(durationSelector(value)).subscribe(createOperatorSubscriber(subscriber, endThrottling, cleanupThrottling)));\n        const send = () => {\n            if (hasValue) {\n                hasValue = false;\n                const value = sendValue;\n                sendValue = null;\n                subscriber.next(value);\n                !isComplete && startThrottle(value);\n            }\n        };\n        source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            hasValue = true;\n            sendValue = value;\n            !(throttled && !throttled.closed) && (leading ? send() : startThrottle(value));\n        }, () => {\n            isComplete = true;\n            !(trailing && hasValue && throttled && !throttled.closed) && subscriber.complete();\n        }));\n    });\n}\n","import { httpResource } from '@angular/common/http';\r\nimport { computed, Injectable, Signal } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { WebApi, WebApiDetails } from '../../app-administration/models';\r\nimport { ViewOrFileIdentifier } from '../../shared/models/edit-form.model';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { FileAsset } from '../models/file-asset.model';\r\nimport { PredefinedTemplatesResponse } from '../models/predefined-template.model';\r\nimport { Preview } from '../models/preview.models';\r\nimport { SourceView } from '../models/source-view.model';\r\n\r\nconst appFilesAll = 'admin/AppFiles/AppFiles';\r\nconst appFilesAsset = 'admin/AppFiles/asset';\r\nconst appFilesCreate = 'admin/AppFiles/create';\r\nconst apiExplorerInspect = 'admin/ApiExplorer/inspect';\r\nconst apiExplorerAppApiFiles = 'admin/ApiExplorer/AppApiFiles';\r\nconst appFilesPredefinedTemplates = 'admin/AppFiles/GetTemplates';\r\nconst appFilesPreview = 'admin/AppFiles/preview';\r\n\r\n@Injectable()\r\nexport class SourceService extends HttpServiceBase {\r\n\r\n  // TODO: @2dg, ask 2dm \r\n  /** ViewKey is templateId or path */\r\n  get(viewKey: string, global: boolean, urlItems: ViewOrFileIdentifier[]): Observable<SourceView> {\r\n    return this.getHttpApiUrl<SourceView>(appFilesAsset, {\r\n      params: {\r\n        appId: this.appId,\r\n        global,\r\n        ...this.templateIdOrPath(viewKey, global, urlItems),\r\n      },\r\n    }).pipe(\r\n      map(view => {\r\n        if (view.Type.toLocaleLowerCase() === 'auto') {\r\n          switch (view.Extension.toLocaleLowerCase()) {\r\n            case '.cs':\r\n            case '.cshtml':\r\n              view.Type = 'Razor';\r\n              break;\r\n            case '.html':\r\n            case '.css':\r\n            case '.js':\r\n              view.Type = 'Token';\r\n              break;\r\n          }\r\n        }\r\n        return view;\r\n      })\r\n    );\r\n  }\r\n\r\n  // TODO: @2dg, ask 2dm \r\n  // getSig(viewKey: string, global: boolean, urlItems: ViewOrFileIdentifier[], initial: undefined): Signal<SourceView> {\r\n  //   // Signal für die SourceView erstellen\r\n  //   const temp = this.getSignal<SourceView>(appFilesAsset, {\r\n  //     params: {\r\n  //       appId: this.appId,\r\n  //       global,\r\n  //       ...this.templateIdOrPath(viewKey, global, urlItems),\r\n  //     },\r\n  //   }, initial);\r\n  //   return computed(() => {\r\n  //     const result = temp();\r\n\r\n  //     if (result && result.Type.toLocaleLowerCase() === 'auto') {\r\n  //       switch (result.Extension.toLocaleLowerCase()) {\r\n  //         case '.cs':\r\n  //         case '.cshtml':\r\n  //           result.Type = 'Razor';\r\n  //           break;\r\n  //         case '.html':\r\n  //         case '.css':\r\n  //         case '.js':\r\n  //           result.Type = 'Token';\r\n  //           break;\r\n  //       }\r\n  //     }\r\n\r\n  //     return result;\r\n  //   });\r\n  // }\r\n\r\n\r\n  /** ViewKey is templateId or path */\r\n  save(viewKey: string, global: boolean, view: SourceView, urlItems: ViewOrFileIdentifier[]): Observable<boolean> {\r\n    return this.http.post<boolean>(this.apiUrl(appFilesAsset), view, {\r\n      params: {\r\n        appId: this.appId,\r\n        global,\r\n        ...this.templateIdOrPath(viewKey, global, urlItems),\r\n      },\r\n    });\r\n  }\r\n\r\n  getAllPromise(mask?: string): Promise<FileAsset[]> {\r\n    return this.fetchPromise<{ Files: FileAsset[] }>(appFilesAll, {\r\n      params: {\r\n        appId: this.appId,\r\n        ...(mask && { mask }),\r\n      },\r\n    }).then(({ Files }) => {\r\n      Files.forEach(file => {\r\n        file.Shared ??= false;\r\n      });\r\n      return Files;\r\n    });\r\n  }\r\n\r\n  // TODO: @2dg, ask 2dm\r\n  getWebApis(): Observable<WebApi[]> {\r\n    return this.getHttpApiUrl<{ files: WebApi[] }>(apiExplorerAppApiFiles, {\r\n      params: {\r\n        appId: this.appId,\r\n      },\r\n    }).pipe(\r\n      map(({ files }) => {\r\n        files.forEach(file => {\r\n          file.isShared ??= false;\r\n          file.isCompiled ??= false;\r\n        });\r\n        return files;\r\n      }),\r\n    ).pipe(\r\n      map(files => {\r\n        const webApis: WebApi[] = files.map(file => {\r\n          const splitIndex = file.path.lastIndexOf('/');\r\n          const fileExtIndex = file.path.lastIndexOf('.');\r\n          const folder = file.path.substring(0, splitIndex);\r\n          const name = file.path.substring(splitIndex + 1, fileExtIndex);\r\n          const webApi: WebApi = { path: file.path, folder, name, isShared: file.isShared, endpointPath: file.endpointPath, isCompiled: file.isCompiled, edition: file.edition };\r\n          return webApi;\r\n        });\r\n        return webApis;\r\n      }),\r\n    );\r\n  }\r\n\r\n\r\n  getWebApisLive(refresh: Signal<unknown>) {\r\n    const apiResource = httpResource<{ files: WebApi[] }>(() => {\r\n      refresh();\r\n      return {\r\n        url: this.apiUrl(apiExplorerAppApiFiles),\r\n        params: { appId: this.appId },\r\n      };\r\n    });\r\n\r\n    // Return a computed signal that transforms the data\r\n    return computed(() => {\r\n      const response = apiResource.value();\r\n      const files = response?.files;\r\n\r\n      if (!files) return [];\r\n\r\n      // Set default values for isShared and isCompiled if they are undefined\r\n      files.forEach(file => {\r\n        file.isShared ??= false;\r\n        file.isCompiled ??= false;\r\n      });\r\n\r\n      // Transform the raw files into the desired WebApi format\r\n      return files.map(file => {\r\n        const splitIndex = file.path.lastIndexOf('/');\r\n        const fileExtIndex = file.path.lastIndexOf('.');\r\n        const folder = file.path.substring(0, splitIndex);\r\n        const name = file.path.substring(splitIndex + 1, fileExtIndex);\r\n\r\n        return {\r\n          path: file.path,\r\n          folder,\r\n          name,\r\n          isShared: file.isShared,\r\n          endpointPath: file.endpointPath,\r\n          isCompiled: file.isCompiled,\r\n          edition: file.edition,\r\n        } as WebApi;\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  // TODO: @2dg, ask 2dm \r\n  getWebApiDetails(apiPath: string): Observable<WebApiDetails> {\r\n    return this.getHttpApiUrl<WebApiDetails>(apiExplorerInspect, {\r\n      params: { appId: this.appId, zoneId: this.zoneId, path: apiPath },\r\n    });\r\n  }\r\n\r\n  getPredefinedTemplates(purpose?: 'Template' | 'Search' | 'Api', type?: 'Token' | 'Razor'): Promise<PredefinedTemplatesResponse> {\r\n    return this.fetchPromise<PredefinedTemplatesResponse>(appFilesPredefinedTemplates, {\r\n      params: {\r\n        ...(purpose && { purpose }),\r\n        ...(type && { type }),\r\n      },\r\n    });\r\n  }\r\n\r\n  // TODO: @2dg, ask 2dm \r\n  getPreview(path: string, global: boolean, templateKey: string): Observable<Preview> {\r\n    return this.getHttpApiUrl<Preview>(appFilesPreview, {\r\n      params: {\r\n        appId: this.appId,\r\n        path,\r\n        templateKey,\r\n        global,\r\n      },\r\n    });\r\n  }\r\n\r\n  create(path: string, global: boolean, templateKey: string): Observable<boolean> {\r\n    return this.http.post<boolean>(this.apiUrl(appFilesCreate), {}, {\r\n      params: {\r\n        appId: this.appId,\r\n        global,\r\n        purpose: 'auto',\r\n        path,\r\n        templateKey,\r\n      },\r\n    });\r\n  }\r\n\r\n  private templateIdOrPath(viewKey: string, global: boolean, urlItems: ViewOrFileIdentifier[]) {\r\n    if (/^[0-9]*$/g.test(viewKey)) {\r\n      const path = urlItems.find(i => i.EntityId?.toString() === viewKey && i.IsShared === global)?.Path;\r\n      return {\r\n        templateId: viewKey,\r\n        ...(path != null && { path }),\r\n      };\r\n    } else {\r\n      return { path: viewKey };\r\n    }\r\n  }\r\n}\r\n"],"x_google_ignoreList":[3,4]}