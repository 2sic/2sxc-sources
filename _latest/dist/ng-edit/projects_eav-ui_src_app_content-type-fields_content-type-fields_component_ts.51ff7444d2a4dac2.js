"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-type-fields_content-type-fields_component_ts"],{3403:(A,T,o)=>{o.r(T),o.d(T,{ContentTypeFieldsComponent:()=>je});var e=o(7580),g=o(7941),y=o(2159),f=o(9452),R=o(1873),I=o(7693),b=o(3454),D=o(2437),M=o(251),F=o(52),h=o(3216),j=o(334),s=o(1726),r=o(4202),c=o(1034),C=o(6256),m=o(3840),v=o(5060),O=o(7896);function P(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.do("shareOrInherit"))}),e.j41(1,"mat-icon",11),e.EFF(2),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("tippy",t.shareText()),e.R7$(2),e.SpI(" ",t.shareOrInheritIcon()," ")}}function V(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.do("shareOrInherit"))}),e.j41(1,"mat-icon",13),e.EFF(2," share "),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("tippy",t.shareText())}}function X(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.do("rename"))}),e.j41(1,"mat-icon"),e.EFF(2,"text_fields"),e.k0s(),e.j41(3,"span"),e.EFF(4,"Rename"),e.k0s()(),e.j41(5,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.do("delete"))}),e.j41(6,"mat-icon"),e.EFF(7,"delete"),e.k0s(),e.j41(8,"span"),e.EFF(9,"Delete"),e.k0s()()}if(2&a){const t=e.XpG();e.Y8G("disabled",t.field.EditInfo.DisableRename),e.R7$(5),e.Y8G("disabled",t.field.EditInfo.DisableDelete||t.field.IsTitle)}}let U=(()=>{class a{agInit(t){this.params=t,this.field=this.params.data;const n=this.field.EditInfo.DisableEdit;this.enablePermissions=!n&&(this.field.InputType===r.u.StringWysiwyg||this.field.Type===s.O.Hyperlink),this.enableMetadata=!this.field.EditInfo.DisableMetadata,this.metadataCount=this.field.Metadata?Object.keys(this.field.Metadata).filter(i=>"merged"!==i).length:0,this.enableImageConfig=!n&&this.field.imageConfiguration.isRecommended,this.imgConfigCount=this.field.imageConfiguration.entityId?1:0}highlightOrDisabled(t){return t?"highlight":"disabled"}shareText(){const t="click to configure sharing",n=this.field.SysSettings;return n?n.Share?"shared enabled as "+this.field.Guid:n.InheritMetadataOf?"inherits "+n.InheritMetadataOf:t:t}shareOrInheritIcon(){const t=this.field.SysSettings;return t?t.Share?"share":t.InheritMetadataOf?"adjust":"":""}refresh(t){return!0}do(t){this.params.do(t,this.field)}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-content-type-fields-actions"]],standalone:!0,features:[e.aNF],decls:18,vars:22,consts:[["menu","matMenu"],[1,"actions-component"],["matRipple","","tippy","Metadata",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeDisabled","matBadgeHidden"],["matRipple","",3,"click","tippy"],["matBadgeSize","small","matBadgePosition","below after","aria-hidden","false","matBadgeColor","accent",3,"matBadge","matBadgeHidden","matBadgeDisabled"],["matRipple","",1,"eav-grid-action-button","highlight",3,"tippy"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["matMenuContent",""],["matRipple","",1,"eav-grid-action-button","highlight",3,"click","tippy"],["aria-hidden","false"],["matRipple","",1,"eav-grid-action-button","disabled","eav-hover-icon-div",3,"click","tippy"],["aria-hidden","false",1,"eav-hover-icon","disabled"],["mat-menu-item","",3,"click","disabled"]],template:function(n,i){if(1&n){const l=e.RV6();e.j41(0,"div",1)(1,"div",2),e.bIt("click",function(){return e.eBV(l),e.Njj(i.enableMetadata?i.do("metadata"):"")}),e.j41(2,"mat-icon",3),e.EFF(3,"local_offer"),e.k0s()(),e.j41(4,"div",4),e.bIt("click",function(){return e.eBV(l),e.Njj(i.enableImageConfig?i.do("image"):"")}),e.j41(5,"mat-icon",5),e.EFF(6,"filter_center_focus"),e.k0s()(),e.j41(7,"div",4),e.bIt("click",function(){return e.eBV(l),e.Njj(i.enablePermissions?i.do("permissions"):"")}),e.j41(8,"mat-icon",3),e.EFF(9,"person"),e.k0s()(),e.DNE(10,P,3,2,"div",6)(11,V,3,1),e.j41(12,"div",7)(13,"mat-icon"),e.EFF(14,"more_horiz"),e.k0s()()(),e.j41(15,"mat-menu",8,0),e.DNE(17,X,10,2,"ng-template",9),e.k0s()}if(2&n){const l=e.sdS(16);e.R7$(),e.ZvI("eav-grid-action-button ",i.highlightOrDisabled(i.enableMetadata),""),e.R7$(),e.Y8G("matBadge",i.metadataCount)("matBadgeDisabled",!i.enableMetadata)("matBadgeHidden",!i.metadataCount),e.R7$(2),e.ZvI("eav-grid-action-button ",i.highlightOrDisabled(i.enableImageConfig),""),e.FS9("tippy",i.enableImageConfig?"Image Configuration":"no image configuration for this field"),e.R7$(),e.Y8G("matBadge",i.imgConfigCount)("matBadgeHidden",!i.imgConfigCount)("matBadgeDisabled",!i.enableImageConfig),e.R7$(2),e.ZvI("eav-grid-action-button ",i.highlightOrDisabled(i.enablePermissions),""),e.FS9("tippy",i.enablePermissions?"Permissions":"no permissions to configure on this field"),e.R7$(),e.Y8G("matBadge",i.field.Permissions.Count)("matBadgeDisabled",!i.enablePermissions)("matBadgeHidden",!i.field.Permissions.Count),e.R7$(2),e.vxM(10,""!=i.shareOrInheritIcon()?10:11),e.R7$(2),e.Y8G("matMenuTriggerFor",l)}},dependencies:[v.pZ,v.r6,m.m_,m.An,C.Y,C.k,c.Cn,c.kk,c.fb,c.z8,c.Cp,O.e],styles:[".eav-hover-icon[_ngcontent-%COMP%]{display:none}.eav-hover-icon-div[_ngcontent-%COMP%]:hover   .eav-hover-icon[_ngcontent-%COMP%]{display:block}"]})}return a})();function L(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changeInputType())}),e.j41(1,"div",3),e.EFF(2),e.k0s(),e.j41(3,"div",4)(4,"mat-icon"),e.EFF(5,"arrow_drop_down"),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.JRh(t.value)}}function Y(a,d){if(1&a&&(e.j41(0,"div",1)(1,"div",5),e.EFF(2),e.k0s(),e.j41(3,"div",6)(4,"mat-icon"),e.EFF(5,"arrow_drop_down"),e.k0s()()()),2&a){const t=e.XpG();e.R7$(2),e.JRh(t.value)}}let H=(()=>{class a{agInit(t){this.params=t,this.value=t.value,this.field=t.data}refresh(t){return!0}changeInputType(){this.params.onChangeInputType(this.field)}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-content-type-fields-input-type"]],standalone:!0,features:[e.aNF],decls:2,vars:2,consts:[["matRipple","",1,"input-component","highlight"],[1,"input-component","disabled"],["matRipple","",1,"input-component","highlight",3,"click"],[1,"text"],[1,"eav-grid-action-button"],[1,"text","disabled"],[1,"eav-grid-action-button","disabled"]],template:function(n,i){1&n&&e.DNE(0,L,6,1,"div",0)(1,Y,6,1,"div",1),2&n&&(e.vxM(0,i.field.EditInfo.DisableEdit?-1:0),e.R7$(),e.vxM(1,i.field.EditInfo.DisableEdit?1:-1))},dependencies:[v.pZ,v.r6,m.m_,m.An]})}return a})();function W(a,d){1&a&&(e.j41(0,"mat-icon",1),e.EFF(1,"functions"),e.k0s())}function K(a,d){1&a&&(e.j41(0,"mat-icon",2),e.EFF(1,"mobiledata_off"),e.k0s())}let Q=(()=>{class a{agInit(t){const n=t.data;this.hasFormulas=n.HasFormulas,this.isEphemeral=n.IsEphemeral}refresh(t){return!0}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-content-type-fields-special"]],standalone:!0,features:[e.aNF],decls:3,vars:2,consts:[[1,"icon-container"],["tippy","Has Formulas"],["tippy","Ephemeral / Temporary, won't save"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.DNE(1,W,2,0,"mat-icon",1)(2,K,2,0,"mat-icon",2),e.k0s()),2&n&&(e.R7$(),e.vxM(1,i.hasFormulas?1:-1),e.R7$(),e.vxM(2,i.isEphemeral?2:-1))},dependencies:[m.m_,m.An]})}return a})();var E=o(1612);function Z(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setTitle())}),e.j41(1,"mat-icon"),e.EFF(2,"star"),e.k0s()()}if(2&a){const t=e.XpG();e.ZvI("eav-grid-action-button highlight ",t.isTitle?"":t.suitableForTitle?"hover-only":"no-button",""),e.BMQ("disabled",t.isTitle||!t.suitableForTitle)}}function J(a,d){if(1&a&&(e.j41(0,"div",3)(1,"mat-icon"),e.EFF(2),e.k0s()()),2&a){const t=e.XpG();e.R7$(2),e.JRh(t.isTitle?"star":"")}}let q=(()=>{class a{constructor(){this.suitableForTitle=!0}agInit(t){this.params=t,this.isTitle=t.value,this.field=t.data,this.suitableForTitle=!E.Q.isEmpty(this.field.InputType)}refresh(t){return!0}setTitle(){this.suitableForTitle&&this.params.onSetTitle(this.field)}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-content-type-fields-title"]],standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[[1,"actions-component"],["matRipple","","tippy","Use as title field",3,"class"],["matRipple","","tippy","Use as title field",3,"click"],[1,"eav-grid-action-button","disabled"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.DNE(1,Z,3,4,"div",1)(2,J,3,1),e.k0s()),2&n&&(e.R7$(),e.vxM(1,i.field.EditInfo.ReadOnly?2:1))},dependencies:[v.pZ,v.r6,m.m_,m.An],styles:["div.hover-only[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}div.hover-only[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:block}div.no-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}"]})}return a})();var ee=o(4007);let te=(()=>{class a{agInit(t){this.value=t.value,this.icon=(0,ee.y)(this.value)}refresh(t){return!0}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-content-type-fields-type"]],standalone:!0,features:[e.aNF],decls:3,vars:2,consts:[[1,"icon-container",3,"tippy"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"mat-icon"),e.EFF(2),e.k0s()()),2&n&&(e.Y8G("tippy",i.value),e.R7$(2),e.JRh(i.icon))},dependencies:[m.m_,m.An,O.e]})}return a})();var $=o(5959),ie=o(3176),u=function(a){return a[a.None=0]="None",a[a.Sharing=1]="Sharing",a[a.Inheriting=2]="Inheriting",a}(u||{}),ne=o(5541),ae=o(4824),w=o(8136),x=o(852),G=o(316),_=o(906),z=o(3777),S=o(4175),oe=o(3703),B=o(5437);const se=a=>({"eav-selected-row":a});function re(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeDialog())}),e.j41(1,"mat-icon"),e.EFF(2,"close"),e.k0s()()}}function le(a,d){if(1&a&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,t.message)," ",t.dialogData.Guid,"")}}function de(a,d){if(1&a&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Lme("",e.bMT(2,2,t.message)," ",t.dialogData.SysSettings.InheritMetadataOf,"")}}function ce(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.chooseShare())}),e.EFF(1,"Share"),e.k0s()}}function he(a,d){if(1&a){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.chooseInherit())}),e.EFF(1,"Inherit"),e.k0s()}}function pe(a,d){1&a&&(e.j41(0,"span"),e.EFF(1,"This will share the field definition"),e.k0s())}function me(a,d){1&a&&(e.j41(0,"th",20)(1,"b"),e.EFF(2,"Content Type"),e.k0s()())}function ge(a,d){if(1&a&&(e.j41(0,"td",21),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.R7$(),e.SpI(" ",t.ContentType.Name," ")}}function ue(a,d){1&a&&(e.j41(0,"th",20)(1,"b"),e.EFF(2,"Name"),e.k0s()())}function fe(a,d){if(1&a&&(e.j41(0,"td",21),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.R7$(),e.SpI(" ",t.StaticName," ")}}function ve(a,d){1&a&&(e.j41(0,"th",20)(1,"b"),e.EFF(2,"Type"),e.k0s()())}function _e(a,d){if(1&a&&(e.j41(0,"td",21),e.EFF(1),e.k0s()),2&a){const t=d.$implicit;e.R7$(),e.SpI(" ",t.Type," ")}}function be(a,d){1&a&&e.nrm(0,"tr",22)}function Ce(a,d){if(1&a){const t=e.RV6();e.j41(0,"tr",23),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(3);return e.Njj(l.inheritField(i))}),e.k0s()}if(2&a){const t=d.$implicit,n=e.XpG(3);e.Y8G("ngClass",e.eq3(1,se,n.guid===t.Guid))}}function ye(a,d){if(1&a&&(e.j41(0,"mat-card",9)(1,"table",12),e.qex(2,13),e.DNE(3,me,3,0,"th",14)(4,ge,2,1,"td",15),e.bVm(),e.qex(5,16),e.DNE(6,ue,3,0,"th",14)(7,fe,2,1,"td",15),e.bVm(),e.qex(8,17),e.DNE(9,ve,3,0,"th",14)(10,_e,2,1,"td",15),e.bVm(),e.DNE(11,be,1,0,"tr",18)(12,Ce,1,3,"tr",19),e.k0s()()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("dataSource",t.shareableFields()),e.R7$(10),e.Y8G("matHeaderRowDef",t.displayedShareableFieldsColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedShareableFieldsColumns)}}function Te(a,d){if(1&a&&(e.j41(0,"div"),e.DNE(1,ce,2,0,"button",7)(2,he,2,0,"button",8)(3,pe,2,0,"span")(4,ye,13,3,"mat-card",9),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.vxM(1,t.state==t.sharingOrInheriting.None?1:-1),e.R7$(),e.vxM(2,t.state==t.sharingOrInheriting.None?2:-1),e.R7$(),e.vxM(3,t.state==t.sharingOrInheriting.Sharing?3:-1),e.R7$(),e.vxM(4,t.state==t.sharingOrInheriting.Inheriting?4:-1)}}function Ie(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",5)(1,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeDialog())}),e.EFF(2,"Cancel"),e.k0s(),e.j41(3,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.j41(4,"div",25)(5,"span"),e.EFF(6,"Save"),e.k0s(),e.nrm(7,"app-feature-icon-indicator",26),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(3),e.Y8G("disabled",t.isSaveDisabled),e.R7$(4),e.Y8G("featureNameId","FieldShareConfigManagement")}}let De=(()=>{class a extends ie.${#e;constructor(t,n,i,l,p){super(),this.dialogData=t,this.dialogRef=n,this.dialog=i,this.viewContainerRef=l,this.changeDetectorRef=p,this.displayedShareableFieldsColumns=["contentType","name","type"],this.state=u.None,this.initialState=u.None,this.sharingOrInheriting=u,this.guid=null,this.isSaveDisabled=!0,this.shareableFields=(0,e.vPA)(void 0),this.features=(0,e.WQX)(ae.t),this.#e=this.features.isEnabled[w.T.FieldShareConfigManagement],this.contentTypesFieldsService=(0,B.d)($.h6)}ngOnInit(){this.initialState=this.dialogData.SysSettings&&(this.dialogData.SysSettings.Share||this.dialogData.SysSettings.InheritMetadataOf)?this.dialogData.SysSettings.Share?u.Sharing:u.Inheriting:u.None,this.initialState===u.None?(this.title="SharingOrInheriting.TitleNone",this.contentTypesFieldsService.getShareableFieldsFor(this.dialogData.AttributeId).subscribe(n=>{this.shareableFields.set(n)})):this.initialState===u.Sharing?(this.title="SharingOrInheriting.TitleSharing",this.message="SharingOrInheriting.MessageSharing"):this.initialState===u.Inheriting&&(this.title="SharingOrInheriting.TitleInheriting",this.message="SharingOrInheriting.MessageInheriting")}chooseShare(){this.guid=null,this.state=u.Sharing,this.isSaveDisabled=!1}chooseInherit(){this.guid=null,this.state=u.Inheriting,this.isSaveDisabled=!0}inheritField(t){this.guid=t.Guid,this.isSaveDisabled=!1}save(){this.#e()?this.state==u.Sharing?this.subscriptions.add(this.contentTypesFieldsService.share(this.dialogData.Id).subscribe(()=>this.dialogRef.close())):this.state==u.Inheriting&&this.subscriptions.add(this.contentTypesFieldsService.inherit(this.dialogData.Id,this.guid).subscribe(()=>this.dialogRef.close())):(0,ne.j)(this.dialog,w.T.FieldShareConfigManagement,this.viewContainerRef,this.changeDetectorRef)}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(n){return new(n||a)(e.rXU(g.Vh),e.rXU(g.CP),e.rXU(g.bZ),e.rXU(e.c1b),e.rXU(e.gRc))};static#i=this.\u0275cmp=e.VBU({type:a,selectors:[["app-share-or-inherit-dialog"]],standalone:!0,features:[e.Vt3,e.aNF],decls:11,vars:8,consts:[[1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog"],[1,"eav-dialog-content"],[1,"eav-dialog-actions-custom"],["mat-icon-button","","tippy","Close dialog",3,"click"],["mat-raised-button","","type","button",1,"eav-dialog-action-button"],["mat-raised-button","","type","button"],[1,"eav-table-div"],["mat-raised-button","","type","button",1,"eav-dialog-action-button",3,"click"],["mat-raised-button","","type","button",3,"click"],["mat-table","",1,"mat-elevation-z8","eav-fields-table",3,"dataSource"],["matColumnDef","contentType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click","ngClass"],["mat-raised-button","","type","submit","color","accent",1,"eav-dialog-action-button",3,"click","disabled"],[1,"eav-button-feature"],[1,"eav-button-feature-icon",3,"featureNameId"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.DNE(5,re,3,0,"button",3),e.k0s(),e.j41(6,"div",4),e.DNE(7,le,3,4,"div")(8,de,3,4,"div")(9,Te,5,4,"div"),e.k0s(),e.DNE(10,Ie,8,2,"div",5),e.k0s()),2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,6,i.title)," "),e.R7$(2),e.vxM(5,i.initialState!=i.sharingOrInheriting.None?5:-1),e.R7$(2),e.vxM(7,i.initialState==i.sharingOrInheriting.Sharing?7:-1),e.R7$(),e.vxM(8,i.initialState==i.sharingOrInheriting.Inheriting?8:-1),e.R7$(),e.vxM(9,i.initialState==i.sharingOrInheriting.None?9:-1),e.R7$(),e.vxM(10,i.initialState==i.sharingOrInheriting.None?10:-1))},dependencies:[S.Hl,S.$z,S.iY,m.m_,m.An,z.Hu,z.RN,_.tP,_.Zl,_.tL,_.ji,_.cC,_.YV,_.iL,_.KS,_.$R,_.YZ,_.NB,G.YU,x.h,x.D9,oe.s],styles:[".eav-table-div[_ngcontent-%COMP%]{margin-top:8px;width:100%;max-height:400px;overflow-y:auto;border:1px solid rgba(0,0,0,.1)}.eav-table-div[_ngcontent-%COMP%]   .eav-selected-row[_ngcontent-%COMP%]{background-color:#00000026}.eav-dialog-actions-custom[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;padding:8px 0}.eav-dialog-action-button[_ngcontent-%COMP%]{margin-right:8px}.eav-dialog-action-button[_ngcontent-%COMP%]   .eav-button-feature[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.eav-dialog-action-button[_ngcontent-%COMP%]   .eav-button-feature[_ngcontent-%COMP%]   .eav-button-feature-icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:6px}"]})}return a})();var N=o(1828),Fe=o(5699),Ee=o(7037),Se=o(8471),Re=o(3347),Me=o(9841);const Oe=(a,d)=>({"grid-sorted":a,"grid-filtered":d});let je=(()=>{class a{#e;constructor(t,n,i){this.dialogRef=t,this.snackBar=n,this.dialog=i,this.#e=(0,B.d)(Se.c),this.contentType=(0,e.vPA)(void 0),this.fields=(0,e.vPA)(void 0),this.gridOptions=this.buildGridOptions(),this.sortApplied=!1,this.filterApplied=!1,this.rowDragSuppressed=!1,this.contentTypeStaticName=this.#e.getParam("contentTypeStaticName"),this.contentTypesService=(0,B.d)(I.g),this.contentTypesFieldsService=(0,B.d)($.h6)}ngOnInit(){this.fetchFields(),this.#e.doOnDialogClosed(()=>this.fetchFields())}closeDialog(){this.dialogRef.close()}onGridReady(t){this.gridApi=t.api,this.columnApi=t.columnApi}onRowDragEnter(t){this.gridApi.setEnableCellTextSelection(!1)}onRowDragEnd(t){this.gridApi.setSuppressRowDrag(!0);const n=this.fields().map(i=>i.Id);this.contentTypesFieldsService.reOrder(n,this.contentType()).subscribe(()=>{this.fetchFields(()=>{this.gridApi.setEnableCellTextSelection(!0),this.gridApi.setSuppressRowDrag(!1)})})}onRowDragMove(t){const n=t.node,i=t.overNode;if(i&&n!==i){const p=n.data,Be=i.data,k=[...this.fields()],Ne=k.indexOf(p),ke=k.indexOf(Be);this.moveInArray(k,Ne,ke),this.fields.set(k),this.gridApi.clearFocusedCell()}}moveInArray(t,n,i){const l=t[n];t.splice(n,1),t.splice(i,0,l)}onSortChanged(t){const n=this.columnApi.getColumnState();this.sortApplied=n.some(i=>null!=i.sort),this.suppressRowDrag()}onFilterChanged(t){const n=this.gridApi.getFilterModel(),i=Object.keys(n);this.filterApplied=i.length>0,this.suppressRowDrag()}suppressRowDrag(){const t=this.sortApplied||this.filterApplied;t&&!this.rowDragSuppressed?(this.rowDragSuppressed=!0,this.gridApi.setSuppressRowDrag(!0)):!t&&this.rowDragSuppressed&&(this.rowDragSuppressed=!1,this.gridApi.setSuppressRowDrag(!1))}add(){this.#e.navRelative([`add/${this.contentTypeStaticName}`])}nameCellRenderer(t){const n=t.data.InputType;if(E.Q.endsPreviousGroup(n))return t.value;let i=!1;for(const l of this.fields())if(E.Q.isGroupStart(n))i=!0;else if(E.Q.isGroupEnd(n))i=!1;else if(l.StaticName===t.data.StaticName)break;return i?`<span class="is-in-group">${t.value}</span>`:t.value}fetchFields(t){const n=null==this.contentType()?this.contentTypesService.retrieveContentType(this.contentTypeStaticName):(0,f.of)(this.contentType()),i=this.contentTypesFieldsService.getFields(this.contentTypeStaticName);(0,R.p)([n,i]).subscribe(([l,p])=>{this.contentType.set(l),this.fields.set(p),t?.()})}editFieldMetadata(t){if(t.SysSettings?.InheritMetadataOf){if(!Object.keys(t.ConfigTypes).length)return void this.snackBar.open("This field inherits all configuration so there is nothing to edit.",null,{duration:3e3});this.snackBar.open("This field inherits some configuration. Edit will only show configuration which is not inherited.",null,{duration:5e3})}t.SysSettings?.Share&&this.snackBar.open("This field is shared, so changing it will affect all other fields inheriting it.",null,{duration:5e3});const n={items:Object.keys(t.ConfigTypes).map(l=>this.createItemDefinition(t,l))},i=(0,h.s)(n);this.#e.navRelative([`edit/${i}`])}createItemDefinition(t,n){const i=n.replace("@",""),l=("@"+n).replace("@@","@"),p=t.Metadata[i];return null!=p?j.c.editId(p.Id):{...j.c.newMetadata(t.Id,l,F.YX.metadata.attribute),Prefill:{Name:t.StaticName}}}setTitle(t){this.snackBar.open("Setting title..."),this.contentTypesFieldsService.setTitle(t,this.contentType()).subscribe(()=>{this.snackBar.open("Title set",null,{duration:2e3}),this.fetchFields()})}changeInputType(t){this.#e.navRelative([`update/${this.contentTypeStaticName}/${t.Id}/inputType`])}rename(t){this.#e.navRelative([`update/${this.contentTypeStaticName}/${t.Id}/name`])}delete(t){confirm(`Are you sure you want to delete '${t.StaticName}' (${t.Id})?`)&&(this.snackBar.open("Deleting..."),this.contentTypesFieldsService.delete(t,this.contentType()).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchFields()}))}openPermissions(t){this.#e.navRelative([D.k.getUrlAttribute(t.Id)])}openImageConfiguration(t){const n=t.imageConfiguration;if(1!=n?.isRecommended)throw new Error("This field does not expect to have an image configuration");const i=n.entityId?j.c.editId(n.entityId):j.c.newMetadata(t.Id,n.typeName,F.YX.metadata.attribute),l=(0,h.s)({items:[i]});this.#e.navRelative([`edit/${l}`])}openMetadata(t){const n=b.H.getUrlAttribute(t.Id,`Metadata for Field: ${t.StaticName} (${t.Id})`);this.#e.navRelative([n])}shareOrInherit(t){this.dialog.open(De,{autoFocus:!1,width:"800px",data:t}).afterClosed().subscribe(()=>this.fetchFields())}buildGridOptions(){return{...M.C,getRowClass(n){const i=n.data,l=[];return i.EditInfo.DisableSort&&l.push("disable-row-drag"),E.Q.isGroupStart(i.InputType)&&l.push("group-start-row"),E.Q.isGroupEnd(i.InputType)&&l.push("group-end-row"),l},columnDefs:[{rowDrag:!0,width:18,cellClass:"no-select no-padding no-outline".split(" ")},{field:"Title",width:42,cellClass:"secondary-action no-padding no-outline".split(" "),valueGetter:n=>n.data.IsTitle,cellRenderer:q,cellRendererParams:{onSetTitle:n=>this.setTitle(n)}},{...N.r.TextWidePrimary,headerName:"Name",field:"StaticName",onCellClicked:n=>this.editFieldMetadata(n.data),cellRenderer:n=>this.nameCellRenderer(n)},{...N.r.ItemsText,field:"Type",width:70,valueGetter:n=>n.data.Type,cellRenderer:te},{...N.r.ItemsText,headerName:"Input",field:"InputType",width:160,cellClass:n=>(n.data.EditInfo.DisableEdit?"no-outline no-padding":"secondary-action no-padding").split(" "),valueGetter:n=>n.data.InputType.substring(n.data.InputType.indexOf("-")+1),cellRenderer:H,cellRendererParams:{onChangeInputType:n=>this.changeInputType(n)}},{field:"Label",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.Metadata?.All?.Name},{field:"Special",width:66,headerClass:"dense",cellClass:"no-outline",cellRenderer:Q},{field:"Notes",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.Metadata?.All?.Notes},{...N.r.ActionsPinnedRight5,cellRenderer:U,cellRendererParams:{do:(n,i)=>{switch(n){case"rename":this.rename(i);break;case"delete":this.delete(i);break;case"permissions":this.openPermissions(i);break;case"metadata":this.openMetadata(i);break;case"shareOrInherit":this.shareOrInherit(i);break;case"image":this.openImageConfiguration(i)}}}}]}}static#t=this.\u0275fac=function(n){return new(n||a)(e.rXU(g.CP),e.rXU(Re.UG),e.rXU(g.bZ))};static#i=this.\u0275cmp=e.VBU({type:a,selectors:[["app-content-type-fields"]],standalone:!0,features:[e.aNF],decls:15,vars:8,consts:[["appToggleDebug","",1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowDragEnter","rowDragEnd","rowDragMove","gridReady","sortChanged","filterChanged","rowData","gridOptions","ngClass"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Add fields",1,"grid-fab",3,"click","disabled"]],template:function(n,i){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return i.closeDialog()}),e.j41(5,"mat-icon"),e.EFF(6,"close"),e.k0s()()(),e.j41(7,"div",4),e.nrm(8,"router-outlet"),e.j41(9,"div",5)(10,"ag-grid-angular",6),e.bIt("rowDragEnter",function(p){return i.onRowDragEnter(p)})("rowDragEnd",function(p){return i.onRowDragEnd(p)})("rowDragMove",function(p){return i.onRowDragMove(p)})("gridReady",function(p){return i.onGridReady(p)})("sortChanged",function(p){return i.onSortChanged(p)})("filterChanged",function(p){return i.onFilterChanged(p)}),e.k0s()()(),e.j41(11,"mat-dialog-actions",7)(12,"button",8),e.bIt("click",function(){return i.add()}),e.j41(13,"mat-icon"),e.EFF(14,"add"),e.k0s()()()()),2&n){let l;e.R7$(3),e.SpI(" ",(null==(l=i.contentType())?null:l.Label)||(null==(l=i.contentType())?null:l.Name)," Fields "),e.R7$(7),e.Y8G("rowData",i.fields())("gridOptions",i.gridOptions)("ngClass",e.l_i(5,Oe,i.sortApplied,i.filterApplied)),e.R7$(2),e.Y8G("disabled",null==i.contentType()||i.contentType().EditInfo.ReadOnly)}},dependencies:[S.Hl,S.iY,S.Sr,m.m_,m.An,y.n3,G.YU,g.E7,Fe.V,Ee.p,Me.xs],encapsulation:2})}return a})()},8471:(A,T,o)=>{o.d(T,{c:()=>F});var e=o(2159),g=o(1567),y=o(3037),f=o(271),R=o(5057),I=o(4979),b=o(4435),D=o(7580);const M={doOnDialogClosed:!0};let F=(()=>{class h extends I.V{constructor(s,r){super(),this.router=s,this.route=r,this.log=(0,b.T)({DialogRoutingService:h},M)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(s){return this.route.snapshot.paramMap.get(s)}getParams(s){const r=this.route.snapshot.paramMap;return s.reduce((c,C)=>(c[C]=r.get(C),c),{})}getQueryParam(s){return this.route.snapshot.queryParamMap.get(s)}getQueryParams(s){const r=this.route.snapshot.queryParamMap;return s.reduce((c,C)=>(c[C]=r.get(C),c),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(s){const r=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>s())),r.end()}navPath(s,r){return this.router.navigate([s],r)}navRelative(s,r){return this.router.navigate(s,{...r,relativeTo:this.route})}navParentFirstChild(s,r){return this.router.navigate(s,{...r,relativeTo:this.route.parent.firstChild})}childDialogClosed$(){return this.router.events.pipe((0,g.p)(s=>s instanceof e.wF),(0,y.Z)(!!this.route.snapshot.firstChild),(0,f.T)(()=>!!this.route.snapshot.firstChild),(0,R.J)(),(0,g.p)(([s,r])=>s&&!r))}static#e=this.\u0275fac=function(r){return new(r||h)(D.KVO(e.Ix),D.KVO(e.nX))};static#t=this.\u0275prov=D.jDH({token:h,factory:h.\u0275fac})}return h})()},4979:(A,T,o)=>{o.d(T,{V:()=>y});var e=o(7092),g=o(7580);let y=(()=>{class f{constructor(){this.subscriptions=new e.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#e=this.\u0275fac=function(b){return new(b||f)};static#t=this.\u0275prov=g.jDH({token:f,factory:f.\u0275fac})}return f})()},6256:(A,T,o)=>{o.d(T,{Y:()=>F,k:()=>M});var e=o(7580),g=o(5060),y=o(2102),f=o(316);let R=0;const I="mat-badge-content",b=new Set;let D=(()=>{class h{static#e=this.\u0275fac=function(r){return new(r||h)};static#t=this.\u0275cmp=e.VBU({type:h,selectors:[["ng-component"]],standalone:!0,features:[e.aNF],decls:0,vars:0,template:function(r,c){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color);color:var(--mat-badge-text-color);font-family:var(--mat-badge-text-font);font-weight:var(--mat-badge-text-weight);border-radius:var(--mat-badge-container-shape)}.cdk-high-contrast-active .mat-badge-content{outline:solid 1px;border-radius:0}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color);color:var(--mat-badge-disabled-state-text-color)}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, unset);min-height:var(--mat-badge-small-size-container-size, unset);line-height:var(--mat-badge-legacy-small-size-container-size, var(--mat-badge-small-size-container-size));padding:var(--mat-badge-small-size-container-padding);font-size:var(--mat-badge-small-size-text-size);margin:var(--mat-badge-small-size-container-offset)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, unset);min-height:var(--mat-badge-container-size, unset);line-height:var(--mat-badge-legacy-container-size, var(--mat-badge-container-size));padding:var(--mat-badge-container-padding);font-size:var(--mat-badge-text-size);margin:var(--mat-badge-container-offset)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, unset);min-height:var(--mat-badge-large-size-container-size, unset);line-height:var(--mat-badge-legacy-large-size-container-size, var(--mat-badge-large-size-container-size));padding:var(--mat-badge-large-size-container-padding);font-size:var(--mat-badge-large-size-text-size);margin:var(--mat-badge-large-size-container-offset)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset)}"],encapsulation:2,changeDetection:0})}return h})(),M=(()=>{class h{get color(){return this._color}set color(s){this._setColor(s),this._color=s}get content(){return this._content}set content(s){this._updateRenderedContent(s)}get description(){return this._description}set description(s){this._updateDescription(s)}constructor(s,r,c,C,m){this._ngZone=s,this._elementRef=r,this._ariaDescriber=c,this._renderer=C,this._animationMode=m,this._color="primary",this.overlap=!0,this.position="above after",this.size="medium",this._id=R++,this._isInitialized=!1,this._interactivityChecker=(0,e.WQX)(y.Z7),this._document=(0,e.WQX)(f.qQ);const v=(0,e.WQX)(e.o8S);if(!b.has(v)){b.add(v);const O=(0,e.a0P)(D,{environmentInjector:(0,e.WQX)(e.uvJ)});v.onDestroy(()=>{b.delete(v),0===b.size&&O.destroy()})}}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){const s=this._renderer.createElement("span"),r="mat-badge-active";return s.setAttribute("id",`mat-badge-content-${this._id}`),s.setAttribute("aria-hidden","true"),s.classList.add(I),"NoopAnimations"===this._animationMode&&s.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(s),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{s.classList.add(r)})}):s.classList.add(r),s}_updateRenderedContent(s){const r=`${s??""}`.trim();this._isInitialized&&r&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=r),this._content=r}_updateDescription(s){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!s||this._isHostInteractive())&&this._removeInlineDescription(),this._description=s,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,s):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(s){const r=this._elementRef.nativeElement.classList;r.remove(`mat-badge-${this._color}`),s&&r.add(`mat-badge-${s}`)}_clearExistingBadges(){const s=this._elementRef.nativeElement.querySelectorAll(`:scope > .${I}`);for(const r of Array.from(s))r!==this._badgeElement&&r.remove()}static#e=this.\u0275fac=function(r){return new(r||h)(e.rXU(e.SKi),e.rXU(e.aKT),e.rXU(y.vr),e.rXU(e.sFG),e.rXU(e.bc$,8))};static#t=this.\u0275dir=e.FsC({type:h,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(r,c){2&r&&e.AVh("mat-badge-overlap",c.overlap)("mat-badge-above",c.isAbove())("mat-badge-below",!c.isAbove())("mat-badge-before",!c.isAfter())("mat-badge-after",c.isAfter())("mat-badge-small","small"===c.size)("mat-badge-medium","medium"===c.size)("mat-badge-large","large"===c.size)("mat-badge-hidden",c.hidden||!c.content)("mat-badge-disabled",c.disabled)},inputs:{color:[e.Mj6.None,"matBadgeColor","color"],overlap:[e.Mj6.HasDecoratorInputTransform,"matBadgeOverlap","overlap",e.L39],disabled:[e.Mj6.HasDecoratorInputTransform,"matBadgeDisabled","disabled",e.L39],position:[e.Mj6.None,"matBadgePosition","position"],content:[e.Mj6.None,"matBadge","content"],description:[e.Mj6.None,"matBadgeDescription","description"],size:[e.Mj6.None,"matBadgeSize","size"],hidden:[e.Mj6.HasDecoratorInputTransform,"matBadgeHidden","hidden",e.L39]},standalone:!0,features:[e.GFd]})}return h})(),F=(()=>{class h{static#e=this.\u0275fac=function(r){return new(r||h)};static#t=this.\u0275mod=e.$C({type:h});static#i=this.\u0275inj=e.G2t({imports:[y.Pd,g.yE,g.yE]})}return h})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.01.00/dist/ng-edit/projects_eav-ui_src_app_content-type-fields_content-type-fields_component_ts.51ff7444d2a4dac2.js.map