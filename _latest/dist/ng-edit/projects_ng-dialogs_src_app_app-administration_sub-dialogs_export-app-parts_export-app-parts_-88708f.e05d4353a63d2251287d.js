(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_-88708f"],{3979:function(t,n,e){"use strict";e.r(n),e.d(n,{ExportAppPartsComponent:function(){return M}});var o=e(4762),i=e(8512),p=e(1305),c=e(9996),r=e(5803),s=e(1785),a=e(2935),l=e(3466),u=e(2832),f=e(1116),g=e(3070),d=e(3841),h=e(1041),x=e(7064),Z=e(4369),_=e(7512),m=e(7307),T=e(1271),v=e(7110),A=e(994);function y(t,n){if(1&t&&(s.TgZ(0,"mat-option",17),s._uU(1),s.qZA()),2&t){var e=n.$implicit;s.Q6J("value",e.value),s.xp6(1),s.hij(" ",e.name," ")}}function C(t,n){if(1&t&&(s.TgZ(0,"li",21),s.TgZ(1,"div",22),s.TgZ(2,"mat-checkbox",23),s.NdJ("ngModelChange",function(t){return n.$implicit._export=t}),s.TgZ(3,"span",24),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){var e=n.$implicit;s.xp6(2),s.Q6J("ngModel",e._export),s.xp6(2),s.AsE("",e.Name," (",e.Id,")")}}function q(t,n){if(1&t&&(s.TgZ(0,"ul",26),s.TgZ(1,"p",27),s._uU(2,"Templates"),s.qZA(),s.YNc(3,C,5,3,"li",20),s.qZA()),2&t){var e=s.oxw().$implicit;s.xp6(3),s.Q6J("ngForOf",e.Templates)}}function b(t,n){if(1&t&&(s.TgZ(0,"li",21),s.TgZ(1,"div",22),s.TgZ(2,"mat-checkbox",23),s.NdJ("ngModelChange",function(t){return n.$implicit._export=t}),s.TgZ(3,"span",24),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){var e=n.$implicit;s.xp6(2),s.Q6J("ngModel",e._export),s.xp6(2),s.AsE("",e.Title," (",e.Id,")")}}function k(t,n){if(1&t&&(s.TgZ(0,"ul",26),s.TgZ(1,"p",27),s._uU(2,"Entities"),s.qZA(),s.YNc(3,b,5,3,"li",20),s.qZA()),2&t){var e=s.oxw().$implicit;s.xp6(3),s.Q6J("ngForOf",e.Entities)}}function S(t,n){if(1&t&&(s.TgZ(0,"li",21),s.TgZ(1,"div",22),s.TgZ(2,"mat-checkbox",23),s.NdJ("ngModelChange",function(t){return n.$implicit._export=t}),s.TgZ(3,"span",24),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.YNc(5,q,4,1,"ul",25),s.YNc(6,k,4,1,"ul",25),s.qZA()),2&t){var e=n.$implicit;s.xp6(2),s.Q6J("ngModel",e._export),s.xp6(2),s.AsE("",e.Name," (",e.Id,")"),s.xp6(1),s.Q6J("ngIf",e.Templates.length>0),s.xp6(1),s.Q6J("ngIf",e.Entities.length>0)}}function I(t,n){if(1&t&&(s.TgZ(0,"li",21),s.TgZ(1,"div",22),s.TgZ(2,"mat-checkbox",23),s.NdJ("ngModelChange",function(t){return n.$implicit._export=t}),s.TgZ(3,"span",24),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){var e=n.$implicit;s.xp6(2),s.Q6J("ngModel",e._export),s.xp6(2),s.AsE("",e.Name," (",e.Id,")")}}function J(t,n){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ul",18),s.TgZ(2,"p",19),s._uU(3,"Content Types"),s.qZA(),s.YNc(4,S,7,5,"li",20),s.qZA(),s.TgZ(5,"ul",18),s.TgZ(6,"p",19),s._uU(7,"Templates Without Content Types"),s.qZA(),s.YNc(8,I,5,3,"li",20),s.qZA(),s.qZA()),2&t){var e=s.oxw(2);s.xp6(4),s.Q6J("ngForOf",e.contentInfo.ContentTypes),s.xp6(4),s.Q6J("ngForOf",e.contentInfo.TemplatesWithoutContentTypes)}}function O(t,n){if(1&t){var e=s.EpF();s.ynx(0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._uU(3,"Export Content and Templates from this App"),s.qZA(),s.qZA(),s.TgZ(4,"p",3),s._uU(5," This is an advanced feature to export parts of the app. The export will create an xml file which can be imported into another site or app. To export the entire content of the app (for example when duplicating the entire site), go to the app export. For further help visit "),s.TgZ(6,"a",4),s._uU(7,"2sxc Help"),s.qZA(),s._uU(8,". "),s.qZA(),s.TgZ(9,"div",5),s.TgZ(10,"div",6),s.TgZ(11,"mat-form-field",7),s.TgZ(12,"mat-label"),s._uU(13,"Scope"),s.qZA(),s.TgZ(14,"mat-select",8),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().changeScope(t)}),s.YNc(15,y,2,2,"mat-option",9),s.TgZ(16,"mat-option",10),s._uU(17,"Other..."),s.qZA(),s.qZA(),s.TgZ(18,"button",11),s.TgZ(19,"mat-icon",12),s.NdJ("click",function(){return s.CHM(e),s.oxw().unlockScope()}),s._uU(20),s.qZA(),s.qZA(),s.qZA(),s.TgZ(21,"app-field-hint"),s._uU(22," The scope should almost never be changed - "),s.TgZ(23,"a",13),s._uU(24,"see help"),s.qZA(),s.qZA(),s.qZA(),s.YNc(25,J,9,2,"div",0),s.qZA(),s.TgZ(26,"div",14),s.TgZ(27,"button",15),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeDialog()}),s._uU(28," Cancel "),s.qZA(),s.TgZ(29,"button",16),s.NdJ("click",function(){return s.CHM(e),s.oxw().exportAppParts()}),s._uU(30," Export "),s.qZA(),s.qZA(),s.BQk()}if(2&t){var o=n.ngIf,i=s.oxw();s.xp6(14),s.Q6J("ngModel",i.exportScope)("disabled",i.lockScope),s.xp6(1),s.Q6J("ngForOf",i.scopeOptions),s.xp6(3),s.Q6J("tippy",i.lockScope?"Unlock":"Lock"),s.xp6(2),s.hij(" ",i.lockScope?"lock":"lock_open"," "),s.xp6(5),s.Q6J("ngIf",i.contentInfo),s.xp6(2),s.Q6J("disabled",o.loading||o.isExporting),s.xp6(2),s.Q6J("disabled",o.loading||o.isExporting)}}var M=function(){function t(t,n,e){this.dialogRef=t,this.exportAppPartsService=n,this.contentTypesService=e,this.hostClass="dialog-component",this.exportScope=r.Z.scopes.default.value,this.lockScope=!0,this.loading$=new i.X(!1),this.isExporting$=new i.X(!1),this.templateVars$=(0,p.aj)([this.loading$,this.isExporting$]).pipe((0,c.U)(function(t){var n=(0,o.CR)(t,2);return{loading:n[0],isExporting:n[1]}}))}return t.prototype.ngOnInit=function(){this.fetchScopes(),this.fetchContentInfo()},t.prototype.ngOnDestroy=function(){this.loading$.complete(),this.isExporting$.complete()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.exportAppParts=function(){this.isExporting$.next(!0);var t=this.selectedContentTypes().map(function(t){return t.Id}),n=this.selectedTemplates().map(function(t){return t.Id}),e=this.selectedEntities().map(function(t){return t.Id});e=e.concat(n),this.exportAppPartsService.exportParts(t,e,n),this.isExporting$.next(!1)},t.prototype.changeScope=function(t){"Other"===t&&((t=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason."))?this.scopeOptions.find(function(n){return n.value===t})||this.scopeOptions.push({name:t,value:t}):t=r.Z.scopes.default.value),this.exportScope=t,this.fetchContentInfo()},t.prototype.unlockScope=function(){this.lockScope=!this.lockScope,this.lockScope&&(this.exportScope=r.Z.scopes.default.value,this.fetchContentInfo())},t.prototype.fetchScopes=function(){var t=this;this.loading$.next(!0),this.contentTypesService.getScopes().subscribe(function(n){t.scopeOptions=n,t.loading$.next(!1)})},t.prototype.fetchContentInfo=function(){var t=this;this.loading$.next(!0),this.exportAppPartsService.getContentInfo(this.exportScope).subscribe(function(n){t.contentInfo=n,t.loading$.next(!1)})},t.prototype.selectedContentTypes=function(){return this.contentInfo.ContentTypes.filter(function(t){return t._export})},t.prototype.selectedEntities=function(){var t,n,e=[];try{for(var i=(0,o.XA)(this.contentInfo.ContentTypes),p=i.next();!p.done;p=i.next())e=e.concat(p.value.Entities.filter(function(t){return t._export}))}catch(c){t={error:c}}finally{try{p&&!p.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e},t.prototype.selectedTemplates=function(){var t,n,e=[];try{for(var i=(0,o.XA)(this.contentInfo.ContentTypes),p=i.next();!p.done;p=i.next())e=e.concat(p.value.Templates.filter(function(t){return t._export}))}catch(c){t={error:c}}finally{try{p&&!p.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e.concat(this.contentInfo.TemplatesWithoutContentTypes.filter(function(t){return t._export}))},t.\u0275fac=function(n){return new(n||t)(s.Y36(a.so),s.Y36(l.T),s.Y36(u.s))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-export-app-parts"]],hostVars:1,hostBindings:function(t,n){2&t&&s.Ikx("className",n.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/en/help?tag=export","target","_blank"],[1,"dialog-component-content","fancy-scrollbar-light"],[1,"edit-input"],["appearance","standard","color","accent"],["name","Scope",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","Other"],["mat-icon-button","","type","button","matSuffix","",3,"tippy"],["appClickStopPropagation","",3,"click"],["appClickStopPropagation","","href","https://2sxc.org/help?tag=scope","target","_blank"],[1,"dialog-component-actions"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],[1,"content-info__list","content-info__base"],[1,"content-info__title"],["class","content-info__item",4,"ngFor","ngForOf"],[1,"content-info__item"],[1,"option-box"],[3,"ngModel","ngModelChange"],[1,"option-box__text"],["class","content-info__list",4,"ngIf"],[1,"content-info__list"],[1,"content-info__subtitle"]],template:function(t,n){1&t&&(s.YNc(0,O,31,8,"ng-container",0),s.ALo(1,"async")),2&t&&s.Q6J("ngIf",s.lcZ(1,1,n.templateVars$))},directives:[f.O5,a.uh,g.KE,g.hX,d.gD,h.JJ,h.On,f.sg,x.ey,Z.lW,g.R9,_.$,m.Hw,T.E,v.Y,A.oG],pipes:[f.Ov],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}.content-info__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.content-info__subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.content-info__list[_ngcontent-%COMP%]{font-size:14px;list-style-type:none}.content-info__base[_ngcontent-%COMP%]{padding:0}.content-info__item[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding:2px}.option-box[_ngcontent-%COMP%]{margin:8px 0}.option-box__text[_ngcontent-%COMP%]{white-space:normal;font-size:14px}"]}),t}()},1271:function(t,n,e){"use strict";e.d(n,{E:function(){return i}});var o=e(1785),i=function(){function t(){}return t.prototype.onClick=function(t){t.stopPropagation()},t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=o.lG2({type:t,selectors:[["","appClickStopPropagation",""]],hostBindings:function(t,n){1&t&&o.NdJ("click",function(t){return n.onClick(t)})}}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.07.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_-88708f.e05d4353a63d2251287d.js.map