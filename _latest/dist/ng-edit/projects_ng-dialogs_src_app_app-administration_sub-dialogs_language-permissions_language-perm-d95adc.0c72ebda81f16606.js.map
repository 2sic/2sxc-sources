{"version":3,"mappings":"ydAUaA,EAAb,eAAaA,EAAb,WAKE,6BALF,qCAOE,SAAOC,GACLC,KAAKD,OAASA,EACdC,KAAKC,SAAWD,KAAKD,OAAOG,OAThC,qBAYE,SAAQH,GACN,OAAO,IAbX,6BAgBE,WACEC,KAAKD,OAAOI,kBAAkBH,KAAKC,cAjBvCG,kDAAaN,8BAAoCO,4RCVjDC,iBACEA,iBAAiEA,gCAASC,sBACxED,sBAEEA,oBACFA,QACFA,QACFA,eALcA,wDAAuC,+FDQxCR,EAAb,2CESaU,EAAb,eAAaA,EAAb,WAOE,WACUC,EACAC,EACAC,EACAC,GAAqB,2BAHrBZ,iBACAA,mBACAA,cACAA,aATVA,aAAUa,KAWRb,KAAKc,aAAe,IAAIC,KACxBf,KAAKgB,WAAa,IAAIC,SAAuDC,GAC7ElB,KAAKmB,YAAWC,+BACXC,KAAkB,CACrBC,oBAAqB,CACnBC,iBAAkBC,IAClBC,qCAAsC3B,GAExC4B,WAAY,CACV,CACEC,WAAY,KAAMC,MAAO,KAAMC,MAAO,GAAIC,YAAa,QAASC,UAAW,kCAC3EC,aAAc,mBAAoBC,UAAU,EAAMC,OAAQ,qBAC1DC,YAAa,SAACpC,GAAD,OAAaA,EAAOG,KAAiCkC,MAClEC,mBAAoB,CAClBC,cAAe,SAACrC,GAAD,oBAA8CA,EAASmC,SAG1E,CACER,MAAO,OAAQW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAAcE,UAAU,EAC1EQ,KAAM,MAAOP,OAAQ,qBACrBC,YAAa,SAACpC,GAAD,OAAaA,EAAOG,KAAiCwC,UAEpE,CACEb,MAAO,GAAIE,UAAW,8BAA+BC,aAAc,uCAAwCW,OAAQ,QACnHN,mBAAoB,CAClBlC,kBAAmB,SAACF,GAAD,OAAc2C,EAAKC,gBAAgB5C,SAtClE,uCA6CE,WACED,KAAK8C,eACL9C,KAAK+C,yBA/CT,yBAkDE,WACE/C,KAAKgB,WAAWgC,WAChBhD,KAAKc,aAAamC,gBApDtB,yBAuDE,WACEjD,KAAKS,UAAUyC,UAxDnB,6BA2DE,SAAgBjD,GACdD,KAAKW,OAAOwC,SAAS,CAACC,oBAA+BnD,EAASoD,SAAU,CAAEC,WAAYtD,KAAKY,UA5D/F,0BA+DU,WAAY,WAClBZ,KAAKU,YAAY6C,0BAA0BC,UAAU,CACnDC,MAAO,WACLC,EAAK1C,WAAW2C,UAAKzC,IAEvByC,KAAM,SAACC,GACLF,EAAK1C,WAAW2C,KAAKC,QArE7B,kCA0EU,WAAoB,WAC1B5D,KAAKc,aAAa+C,IAChB7D,KAAKW,OAAOmD,OAAOC,MACjB7B,OAAO,YAAK,OAAI8B,aAAiBC,QACjCC,SAAYlE,KAAKY,MAAMuD,SAASC,aAChCC,OAAI,mBAAQX,EAAK9C,MAAMuD,SAASC,gBAChCE,QACApC,OAAO,qDACPsB,UAAU,WACVE,EAAKZ,sBAnFb1C,kDAAaI,GAA4BF,yEAA5BE,EAA4BH,sWCnBzCC,iBACEA,iBACEA,iBACEA,eAAKA,gCAAoBA,QACzBA,oBAA6CA,gCAASC,kBACpDD,oBAAUA,iBAAKA,QACjBA,QACFA,QACFA,QAEAA,eACEA,6NAGFA,QAEAA,0BAEAA,kBACEA,gDAIAA,kBACFA,QACFA,eAN+CA,oDAA8B,oBAA9BA,CAA8B,oGDAhEE,EAAb","names":["LanguagesPermissionsActionsComponent","params","this","language","data","onOpenPermissions","o","selectors","i0","ctx","LanguagePermissionsComponent","dialogRef","zoneService","router","route","AllCommunityModules","subscription","Subscription","languages$","BehaviorSubject","undefined","gridOptions","Object","defaultGridOptions","frameworkComponents","idFieldComponent","IdFieldComponent","languagesPermissionsActionsComponent","columnDefs","headerName","field","width","headerClass","cellClass","cellRenderer","sortable","filter","valueGetter","Code","cellRendererParams","tooltipGetter","flex","minWidth","sort","Culture","pinned","d","openPermissions","getLanguages","refreshOnChildClosed","complete","unsubscribe","close","navigate","GoToPermissions","NameId","relativeTo","getLanguagesPermissions","subscribe","error","s","next","languages","add","events","pipe","event","NavigationEnd","startWith","snapshot","firstChild","map","pairwise"],"sources":["./projects/ng-dialogs/src/app/app-administration/ag-grid-components/languages-permissions-actions/languages-permissions-actions.component.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/languages-permissions-actions/languages-permissions-actions.component.html","./projects/ng-dialogs/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.ts","./projects/ng-dialogs/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.html"],"sourcesContent":["import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { Component } from '@angular/core';\r\nimport { SiteLanguagePermissions } from '../../../apps-management/models/site-language.model';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-languages-permissions-actions',\r\n  templateUrl: './languages-permissions-actions.component.html',\r\n  styleUrls: ['./languages-permissions-actions.component.scss'],\r\n})\r\nexport class LanguagesPermissionsActionsComponent implements ICellRendererAngularComp {\r\n  language: SiteLanguagePermissions;\r\n\r\n  private params: LanguagesPermissionsActionsParams;\r\n\r\n  constructor() { }\r\n\r\n  agInit(params: LanguagesPermissionsActionsParams) {\r\n    this.params = params;\r\n    this.language = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openPermissions() {\r\n    this.params.onOpenPermissions(this.language);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"language.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!language.Permissions.Count\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n</div>\r\n","import { AllCommunityModules, GridOptions } from '@ag-grid-community/all-modules';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, filter, map, pairwise, startWith, Subscription } from 'rxjs';\r\nimport { SiteLanguagePermissions } from '../../../apps-management/models/site-language.model';\r\nimport { ZoneService } from '../../../apps-management/services/zone.service';\r\nimport { GoToPermissions } from '../../../permissions';\r\nimport { IdFieldComponent } from '../../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../../shared/constants/default-grid-options.constants';\r\nimport { LanguagesPermissionsActionsComponent } from '../../ag-grid-components/languages-permissions-actions/languages-permissions-actions.component';\r\nimport { LanguagesPermissionsActionsParams } from '../../ag-grid-components/languages-permissions-actions/languages-permissions-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-language-permissions',\r\n  templateUrl: './language-permissions.component.html',\r\n  styleUrls: ['./language-permissions.component.scss'],\r\n})\r\nexport class LanguagePermissionsComponent implements OnInit, OnDestroy {\r\n  languages$: BehaviorSubject<SiteLanguagePermissions[] | undefined>;\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions;\r\n\r\n  private subscription: Subscription;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<LanguagePermissionsComponent>,\r\n    private zoneService: ZoneService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n  ) {\r\n    this.subscription = new Subscription();\r\n    this.languages$ = new BehaviorSubject<SiteLanguagePermissions[] | undefined>(undefined);\r\n    this.gridOptions = {\r\n      ...defaultGridOptions,\r\n      frameworkComponents: {\r\n        idFieldComponent: IdFieldComponent,\r\n        languagesPermissionsActionsComponent: LanguagesPermissionsActionsComponent,\r\n      },\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID', field: 'Id', width: 70, headerClass: 'dense', cellClass: 'id-action no-padding no-outline',\r\n          cellRenderer: 'idFieldComponent', sortable: true, filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => (params.data as SiteLanguagePermissions).Code,\r\n          cellRendererParams: {\r\n            tooltipGetter: (language: SiteLanguagePermissions) => `ID: ${language.Code}`,\r\n          } as IdFieldParams,\r\n        },\r\n        {\r\n          field: 'Name', flex: 2, minWidth: 250, cellClass: 'no-outline', sortable: true,\r\n          sort: 'asc', filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => (params.data as SiteLanguagePermissions).Culture,\r\n        },\r\n        {\r\n          width: 42, cellClass: 'secondary-action no-padding', cellRenderer: 'languagesPermissionsActionsComponent', pinned: 'right',\r\n          cellRendererParams: {\r\n            onOpenPermissions: (language) => this.openPermissions(language),\r\n          } as LanguagesPermissionsActionsParams,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getLanguages();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.languages$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  openPermissions(language: SiteLanguagePermissions): void {\r\n    this.router.navigate([GoToPermissions.getUrlLanguage(language.NameId)], { relativeTo: this.route });\r\n  }\r\n\r\n  private getLanguages(): void {\r\n    this.zoneService.getLanguagesPermissions().subscribe({\r\n      error: () => {\r\n        this.languages$.next(undefined);\r\n      },\r\n      next: (languages) => {\r\n        this.languages$.next(languages);\r\n      },\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.getLanguages();\r\n      })\r\n    );\r\n  }\r\n}\r\n","<div class=\"nav-component-wrapper\">\r\n  <div mat-dialog-title>\r\n    <div class=\"dialog-title-box\">\r\n      <div>Language permissions</div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <p class=\"dialog-description\">\r\n    If no language permissions are defined, all editors can edit all languages.\r\n    As soon as you set any language permission, only the specified users\r\n    (or users in the specified groups) can edit these permissions.\r\n  </p>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <div class=\"grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"languages$ | async\" [modules]=\"modules\"\r\n      [gridOptions]=\"gridOptions\">\r\n    </ag-grid-angular>\r\n\r\n    <div class=\"grid-more-actions-box\"></div>\r\n  </div>\r\n</div>\r\n"],"sourceRoot":"webpack:///","file":"projects_ng-dialogs_src_app_app-administration_sub-dialogs_language-permissions_language-perm-d95adc.0c72ebda81f16606.js"}