{"version":3,"file":"default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts.1bd021487049b07d.js","mappings":"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","names":["BaseDirective","constructor","this","subscriptions","Subscription","ngOnDestroy","unsubscribe","static","__ngFactoryType__","_angular_core__WEBPACK_IMPORTED_MODULE_1__","FsC","InstallerService","http","installPackages","packages","step","reduce","t","c","pipe","switchMap","url","post","of","i0","i1","root_effect_scheduler_DCy1y1b8","jDH","factory","Éµfac","ImportModeValues","importOriginal","importAsTemplate","FileUploadMessageTypes","Warning","Success","Error","UploadTypes","App","AppPart","ContentType","ContentItem","Query","View","ImportParts","Extension","_r2","ctx_r2","closeDialog","dialogData","title","FileUploadDialogComponent_Conditional_7_Conditional_7_Template","FileUploadDialogComponent_Conditional_7_Conditional_8_Template","importForm","importModeValues","tmp_5_0","get","value","file_r5","name","_r6","toggleShowAppCatalog","uploading","invalid","_r7","upload","files","length","result","_r8","_r9","cleanUpload","FileUploadDialogComponent_Conditional_17_Conditional_1_Conditional_2_Template","FileUploadDialogComponent_Conditional_17_Conditional_1_Conditional_3_Template","uploadType","_r10","_r11","FileUploadDialogComponent_Conditional_17_Conditional_2_Conditional_2_Template","FileUploadDialogComponent_Conditional_17_Conditional_2_Conditional_3_Template","_c2","message_r12","MessageType","Text","FileUploadDialogComponent_Conditional_17_Conditional_1_Template","FileUploadDialogComponent_Conditional_17_Conditional_2_Template","FileUploadDialogComponent_Conditional_17_For_4_Template","Messages","remoteInstallerUrl","currentPackage","displayName","FileUploadDialogComponent_Conditional_18_Conditional_0_Template","FileUploadDialogComponent_Conditional_18_Conditional_1_Template","ready","showProgress","FileUploadDialogComponent","BaseComponent","#installerService","#installSettingsService","#appsListService","#fb","dialog","snackBar","sanitizer","context","changeDetectorRef","super","hostClass","input","signal","showAppCatalog","undefined","urlChangeImportMode","transient","AppInstallSettingsService","AppsListService","inject","FormBuilder","group","importMode","Validators","required","#alreadyProcessing","#messages$","fromEvent","window","filter","evt","origin","map","JSON","parse","data","e","console","error","Number","moduleId","add","settings$","subscribe","settings","remoteUrl","bypassSecurityTrustResourceUrl","#setupConditionalValidation","ngOnInit","valueChanges","mode","isTemplate","includes","filesDropped","loadGettingStarted","action","tap","winFrame","installerWindow","nativeElement","specsMsg","installedApps","rules","app","target","appGuid","guid","specsJson","stringify","contentWindow","postMessage","log","Object","values","msg","confirm","detectChanges","createTemplate","p","alert","top","location","reload","catchError","Message","message","refresh","close","set","nameControl","setValidators","updateValueAndValidity","#setFiles","filesChanged","event","Array","from","upload$","take","next","open","duration","multiple","slice","MAT_DIALOG_DATA","i2","i3","i4","debug_node_JnOYh9kg","VBU","selectors","viewQuery","rf","ctx","$event","_r1","FileUploadDialogComponent_Conditional_1_Template","FileUploadDialogComponent_Conditional_3_Template","FileUploadDialogComponent_Conditional_4_Template","FileUploadDialogComponent_Conditional_7_Template","fileInput_r4","click","FileUploadDialogComponent_Conditional_10_Template","FileUploadDialogComponent_For_12_Template","FileUploadDialogComponent_Conditional_15_Template","FileUploadDialogComponent_Conditional_16_Template","FileUploadDialogComponent_Conditional_17_Template","FileUploadDialogComponent_Conditional_18_Template","allowedFileTypes","_c1","description","valid","NgClass","MatDialogModule","MatProgressSpinnerModule","i5","SafeHtmlPipe","DragAndDropDirective","MatButtonModule","i6","MatIconModule","i7","MatRadioModule","i8","MatInputModule","i9","i10","ReactiveFormsModule","i11","styles","installSettingsSubject","Subject","asObservable","startWith","isContentApp","json","_angular_core__WEBPACK_IMPORTED_MODULE_3__","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","eventName","options","resultSelector","isFunction","mapOneOrManyArgs","remove","isEventTarget","addEventListener","removeEventListener","methodName","handler","isNodeStyleEventEmitter","addListener","removeListener","toCommonHandlerRegistry","isJQueryStyleEventEmitter","on","off","isArrayLike","mergeMap","subTarget","innerFrom","TypeError","Observable","subscriber","args","elementRef","zone","markStyle","output","dropAreaClass","markStyleClass","dragClass","timeouts","element","classList","runOutsideAngular","preventDefault","stopPropagation","clearTimeouts","push","setTimeout","onDrop","dataTransfer","filterTypes","emit","timeout","clearTimeout","allowedTypes","split","type","toLocaleLowerCase","filtered","file","extIndex","lastIndexOf","ext","substring","allowedTypesString","replace","_angular_core__WEBPACK_IMPORTED_MODULE_4__","hostBindings","webApiAppRootApp","HttpServiceBaseSignal","getAllLive","httpResource","apiUrl","params","zoneId","getInheritable","getPendingApps","create","inheritAppId","templateId","newName","encodedName","encodeURIComponent","installPendingApps","pendingApps","delete","appId","toString","flushCache","_this","_asyncToGenerator","getStatusPromise"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/directives/base.directive.ts","./projects/eav-ui/src/app/shared/services/installer.service.ts","./projects/eav-ui/src/app/shared/components/file-upload-dialog/file-upload-dialog.models.ts","./projects/eav-ui/src/app/shared/components/file-upload-dialog/file-upload-dialog.component.html","./projects/eav-ui/src/app/shared/components/file-upload-dialog/file-upload-dialog.component.ts","./projects/eav-ui/src/app/shared/services/getting-started.service.ts","./node_modules/rxjs/dist/esm/internal/observable/fromEvent.js","./projects/eav-ui/src/app/shared/directives/drag-and-drop.directive.ts","./projects/eav-ui/src/app/apps-management/services/apps-list.service.ts"],"sourcesContent":["import { Directive, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive()\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseDirective implements OnDestroy {\r\n  /** Holds all subscriptions to be unsubscribed on destroy */\r\n  protected subscriptions = new Subscription();\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, of, switchMap } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { InstallPackage } from '../models/installer-models';\r\n\r\n// copied from 2sxc-ui app/installer\r\n@Injectable()\r\nexport class InstallerService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  installPackages(packages: InstallPackage[], step: (p: InstallPackage) => void): Observable<any> {\r\n    return packages.reduce(\r\n      (t: Observable<Response>, c) => t.pipe(\r\n        switchMap(() => {\r\n          if (!c.url) return of(true);\r\n          step(c);\r\n          return <Observable<any>>this.http.post(`sys/install/RemotePackage?packageUrl=${c.url}`, {});\r\n        })),\r\n      of(true));\r\n  }\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { Of } from '../../../../../../core';\r\n\r\nexport interface FileUploadDialogData {\r\n  title?: string;\r\n  description?: string;\r\n  allowedFileTypes?: string;\r\n  files?: File[];\r\n  multiple?: boolean;\r\n  // upload$?(files: File[]): Observable<FileUploadResult>;\r\n  upload$?(files: File[], name?: string): Observable<FileUploadResult>;\r\n}\r\n\r\nexport enum ImportModeValues {\r\n  importOriginal = 'importOriginal',\r\n  importAsTemplate = 'importAsTemplate',\r\n}\r\n\r\nexport interface FileUploadResult {\r\n  Messages: FileUploadResultMessage[];\r\n  Success: boolean;\r\n}\r\n\r\nexport interface FileUploadResultMessage {\r\n  MessageType: Of<typeof FileUploadMessageTypes>;\r\n  Text: string;\r\n}\r\n\r\nexport const FileUploadMessageTypes = {\r\n  Warning: 0,\r\n  Success: 1,\r\n  Error: 2,\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\nexport const UploadTypes = {\r\n  App: 0,\r\n  AppPart: 1,\r\n  ContentType: 2,\r\n  ContentItem: 3,\r\n  Query: 4,\r\n  View: 5,\r\n  ImportParts: 6,\r\n  Extension: 7,\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","<div\r\n  class=\"eav-dialog\"\r\n  style=\"margin-bottom: 12px\"\r\n  appDragAndDrop\r\n  [allowedFileTypes]=\"dialogData.allowedFileTypes\"\r\n  (filesDropped)=\"filesDropped($event)\"\r\n>\r\n  @if (uploadType() != UploadTypes.ImportParts) {\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\" [innerHtml]=\"dialogData.title | safeHtml\"></div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  }\r\n\r\n  <div\r\n    [ngClass]=\"{\r\n      'outer-container-app': uploadType() === UploadTypes.ImportParts,\r\n      'eav-dialog-content': uploadType() !== UploadTypes.ImportParts,\r\n    }\"\r\n  >\r\n    @if (uploadType() == UploadTypes.ImportParts) {\r\n      <h3 [innerHtml]=\"dialogData.title | safeHtml\"></h3>\r\n    }\r\n\r\n    @if (uploading()) {\r\n      <mat-spinner mode=\"indeterminate\" diameter=\"20\"></mat-spinner>\r\n    }\r\n\r\n    <p [innerHtml]=\"dialogData.description | safeHtml\"></p>\r\n\r\n    @if (uploadType() == UploadTypes.App) {\r\n      <form [formGroup]=\"importForm\">\r\n        <mat-radio-group formControlName=\"importMode\" aria-label=\"Select import mode\">\r\n          <mat-radio-button [value]=\"importModeValues.importOriginal\">Import App(s)</mat-radio-button>\r\n          <mat-radio-button [value]=\"importModeValues.importAsTemplate\">Import and Rename / Reset</mat-radio-button>\r\n        </mat-radio-group>\r\n        <br />\r\n\r\n        @if (importForm.get('importMode')?.value === importModeValues.importOriginal) {\r\n          <span>The app will be imported as is, using the original name and folder.</span>\r\n          <span>If you already have the same app installed, it will prevent you from overwriting it.</span>\r\n        } @else if (importForm.get('importMode')?.value === importModeValues.importAsTemplate) {\r\n          <span>The app will be imported using a new name / folder.</span>\r\n          <span>\r\n            This allows you to create multiple isolated copies of the same app or to create something very different using this app as a\r\n            template.\r\n          </span>\r\n          <br />\r\n          <mat-form-field color=\"accent\" class=\"eav-mat-form-field\" style=\"max-width: 300px\">\r\n            <mat-label>Name</mat-label>\r\n            <input matInput type=\"text\" formControlName=\"name\" />\r\n          </mat-form-field>\r\n        }\r\n      </form>\r\n      <br />\r\n    }\r\n\r\n    <div>\r\n      <button mat-raised-button tippy=\"Open file browser\" [disabled]=\"uploading() || importForm.invalid\" (click)=\"fileInput.click()\">\r\n        @if (!files().length) {\r\n          <div>Select or drop file</div>\r\n        }\r\n        @for (file of files(); track file) {\r\n          <div>{{ file.name }}</div>\r\n        }\r\n      </button>\r\n      <input #fileInput type=\"file\" multiple (change)=\"filesChanged($event)\" class=\"hide\" />\r\n      @if (uploadType() == UploadTypes.App && !files().length) {\r\n        <button\r\n          mat-raised-button\r\n          class=\"eav-app-catalog-button eav-action-button\"\r\n          [disabled]=\"uploading() || importForm.invalid\"\r\n          tippy=\"Open app catalog\"\r\n          (click)=\"toggleShowAppCatalog()\"\r\n        >\r\n          Get recommended Apps from Catalog\r\n        </button>\r\n      }\r\n\r\n      @if (files().length) {\r\n        <button\r\n          class=\"eav-action-button\"\r\n          style=\"margin-left: 12px\"\r\n          mat-raised-button\r\n          [disabled]=\"!files().length || uploading() || !!result() || importForm.invalid\"\r\n          (click)=\"upload()\"\r\n        >\r\n          Upload\r\n        </button>\r\n      }\r\n    </div>\r\n    @if (result()) {\r\n      <div class=\"eav-result-container\">\r\n        @if (result().Success) {\r\n          <div class=\"sxc-message sxc-message-info\">\r\n            Upload succeeded. See the messages below for more information.\r\n            @if (uploadType() != UploadTypes.ImportParts) {\r\n              <a href=\"javascript:void(0)\" (click)=\"closeDialog(true)\">Close</a>\r\n            } @else {\r\n              <a href=\"javascript:void(0)\" (click)=\"cleanUpload()\">Clean</a>\r\n            }\r\n          </div>\r\n        }\r\n        @if (!result().Success) {\r\n          <div class=\"sxc-message sxc-message-error\">\r\n            Upload failed. See the messages below for more information.\r\n            @if (uploadType() != UploadTypes.ImportParts) {\r\n              <a href=\"javascript:void(0)\" (click)=\"closeDialog(true)\">Close</a>\r\n            } @else {\r\n              <a href=\"javascript:void(0)\" (click)=\"cleanUpload()\">Clean</a>\r\n            }\r\n          </div>\r\n        }\r\n        @for (message of result().Messages; track message) {\r\n          <div\r\n            class=\"sxc-message\"\r\n            [ngClass]=\"{\r\n              'sxc-message-warning': message.MessageType === FileUploadMessageTypes.Warning,\r\n              'sxc-message-success': message.MessageType === FileUploadMessageTypes.Success,\r\n              'sxc-message-error': message.MessageType === FileUploadMessageTypes.Error,\r\n            }\"\r\n          >\r\n            {{ message.Text }}\r\n          </div>\r\n        }\r\n      </div>\r\n    }\r\n    @if (uploadType() == UploadTypes.App && showAppCatalog() && !files().length && importForm.valid) {\r\n      @if (ready) {\r\n        <iframe #installerWindow class=\"eav-app-catalog-iframe\" [src]=\"remoteInstallerUrl\"></iframe>\r\n      }\r\n      @if (showProgress) {\r\n        <div class=\"eav-progress\">\r\n          <mat-progress-spinner [mode]=\"'indeterminate'\"></mat-progress-spinner>\r\n          <span>Installing {{ currentPackage?.displayName }}..</span>\r\n        </div>\r\n      }\r\n    }\r\n  </div>\r\n</div>\r\n","import { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, ElementRef, HostBinding, inject, Inject, input, OnDestroy, OnInit, signal, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MAT_DIALOG_DATA, MatDialogModule, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { catchError, filter, fromEvent, map, of, switchMap, take, tap } from 'rxjs';\r\nimport { Of, transient } from '../../../../../../core';\r\nimport { AppsListService } from '../../../apps-management/services/apps-list.service';\r\nimport { DragAndDropDirective } from '../../directives/drag-and-drop.directive';\r\nimport { CrossWindowMessage, InstallPackage, InstallSettings, SpecsForInstaller } from '../../models/installer-models';\r\nimport { SafeHtmlPipe } from '../../pipes/safe-html.pipe';\r\nimport { Context } from '../../services/context';\r\nimport { AppInstallSettingsService } from '../../services/getting-started.service';\r\nimport { InstallerService } from '../../services/installer.service';\r\nimport { BaseComponent } from '../base.component';\r\nimport { FileUploadDialogData, FileUploadMessageTypes, FileUploadResult, ImportModeValues, UploadTypes } from './file-upload-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-file-upload-dialog',\r\n  templateUrl: './file-upload-dialog.component.html',\r\n  styleUrls: ['./file-upload-dialog.component.scss'],\r\n  imports: [\r\n    NgClass,\r\n    MatDialogModule,\r\n    MatProgressSpinnerModule,\r\n    SafeHtmlPipe,\r\n    DragAndDropDirective,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatRadioModule,\r\n    MatInputModule,\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class FileUploadDialogComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  uploadType = input<Of<typeof UploadTypes>>();\r\n\r\n  @ViewChild('installerWindow') installerWindow: ElementRef;\r\n\r\n  uploading = signal(false);\r\n  showAppCatalog = signal(false);\r\n  result = signal<FileUploadResult>(undefined);\r\n  files = signal<File[]>([]);\r\n\r\n  FileUploadMessageTypes = FileUploadMessageTypes;\r\n  UploadTypes = UploadTypes;\r\n  importModeValues = ImportModeValues;\r\n\r\n  showProgress: boolean = false;\r\n  currentPackage: InstallPackage;\r\n  remoteInstallerUrl = '';\r\n  urlChangeImportMode = \"\"\r\n  ready = false;\r\n  settings: InstallSettings;\r\n\r\n  #installerService = transient(InstallerService);\r\n  #installSettingsService = transient(AppInstallSettingsService);\r\n  #appsListService = transient(AppsListService);\r\n  #fb = inject(FormBuilder);\r\n\r\n  importForm: FormGroup = this.#fb.group({\r\n    importMode: [this.importModeValues.importOriginal, Validators.required],\r\n    name: ['']\r\n  });\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: FileUploadDialogData,\r\n    private dialog: MatDialogRef<FileUploadDialogComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private sanitizer: DomSanitizer,\r\n    private context: Context,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    super();\r\n\r\n    // copied from 2sxc-ui app/installer\r\n    this.subscriptions.add(\r\n      this.#installSettingsService.settings$.subscribe(settings => {\r\n        this.settings = settings;\r\n        this.urlChangeImportMode = settings.remoteUrl\r\n        this.remoteInstallerUrl = <string>this.sanitizer.bypassSecurityTrustResourceUrl(settings.remoteUrl);\r\n        this.ready = true;\r\n      })\r\n    );\r\n\r\n    this.#setupConditionalValidation();\r\n  }\r\n\r\n  #alreadyProcessing = false;\r\n  // copied from 2sxc-ui app/installer\r\n  // Initial Observable to monitor messages\r\n  #messages$ = fromEvent(window, 'message').pipe(\r\n    // Ensure only one installation is processed.\r\n    filter(() => !this.#alreadyProcessing),\r\n    filter((evt: MessageEvent) => evt.origin === \"https://2sxc.org\"),\r\n    // Get data from event.\r\n    map((evt: MessageEvent) => {\r\n      try {\r\n        return JSON.parse(evt.data) as CrossWindowMessage;\r\n      } catch (e) {\r\n        console.error('error procesing message. Message was ' + evt.data, e);\r\n        return void 0;\r\n      }\r\n    }),\r\n    // Check if data is valid and the moduleID matches\r\n    filter(data => data && Number(data.moduleId) === this.context.moduleId),\r\n  );\r\n\r\n  ngOnInit(): void {\r\n    // Update the remote installer URL based on the import mode\r\n    // Show multiple select or single select based on import mode\r\n    this.importForm.get('importMode')?.valueChanges.subscribe((mode) => {\r\n      const isTemplate = mode === this.importModeValues.importAsTemplate;\r\n      const url = this.urlChangeImportMode + (this.urlChangeImportMode.includes('?') ? '&' : '?') + `selectOnlyMode=${isTemplate}`;\r\n      this.remoteInstallerUrl = <string>this.sanitizer.bypassSecurityTrustResourceUrl(url);\r\n    });\r\n\r\n    if (this.dialogData.files != null)\r\n      this.filesDropped(this.dialogData.files);\r\n\r\n    // copied from 2sxc-ui\r\n    this.#installSettingsService.loadGettingStarted(false); // Passed as input from 2sxc-ui\r\n\r\n    // copied from 2sxc-ui app/installer\r\n    this.subscriptions.add(this.#messages$.pipe(\r\n      // Verify it's for this action\r\n      filter(data => data.action === 'specs'),\r\n      // Send message to iframe\r\n      tap(() => {\r\n        const winFrame = this.installerWindow.nativeElement as HTMLIFrameElement;\r\n        const specsMsg: SpecsForInstaller = {\r\n          action: 'specs',\r\n          data: {\r\n            //currently not used\r\n            installedApps: this.settings.installedApps,//.map(app => ((app as InstalledApp).guid)),\r\n            //currently used to forbid already installed apps\r\n            rules: this.settings.installedApps.map(app => ({ target: 'guid', appGuid: app.guid, mode: 'f', url: '' })),//this.settings.rules,\r\n          },\r\n        };\r\n        const specsJson = JSON.stringify(specsMsg);\r\n        winFrame.contentWindow.postMessage(specsJson, '*');\r\n        console.log('debug: just sent specs message:' + specsJson, specsMsg, winFrame);\r\n      }),\r\n    ).subscribe());\r\n\r\n    // copied from 2sxc-ui app/installer\r\n    // Subscription to listen to 'install' messages\r\n    this.subscriptions.add(this.#messages$.pipe(\r\n      filter(data => data.action === 'install'),\r\n      // Get packages from data.\r\n      map(data => Object.values(data.packages)),\r\n      // Show confirm dialog.\r\n      filter(packages => {\r\n        const packagesDisplayNames = packages\r\n          .reduce((t, c) => `${t} - ${c.displayName}\\n`, '');\r\n\r\n        const msg = `Do you want to install these packages?\r\n\r\n${packagesDisplayNames}\r\nThis takes about 10 seconds per package. Don't reload the page while it's installing.`;\r\n        return confirm(msg);\r\n      }),\r\n      // Install the packages one at a time\r\n      switchMap(packages => {\r\n        this.#alreadyProcessing = true;\r\n        this.showProgress = true;\r\n        this.changeDetectorRef.detectChanges(); //without this spinner is not shown\r\n        // If import mode is 'importAsTemplate', create a Install template with Url and new Name\r\n        if (this.importForm.get('importMode')?.value === this.importModeValues.importAsTemplate) {\r\n          return this.#appsListService.createTemplate(packages[0].url, this.importForm.get('name')?.value);\r\n        } else {\r\n          // Otherwise, install the packages normally\r\n          return this.#installerService.installPackages(packages, p => this.currentPackage = p);\r\n        }\r\n      }),\r\n      tap(() => {\r\n        this.showProgress = false;\r\n        this.changeDetectorRef.detectChanges(); //without this spinner is not removed (though window reload will remove it anyway) so maybe unnecessary\r\n        alert('Installation complete ðŸ‘');\r\n        window.top.location.reload();\r\n        this.closeDialog(true);\r\n      }),\r\n      catchError(error => {\r\n        console.error('Error: ', error);\r\n        this.showProgress = false;\r\n        this.#alreadyProcessing = false;\r\n        this.changeDetectorRef.detectChanges(); //without this spinner is not removed\r\n        const errorMsg = `An error occurred: Package ${this.currentPackage.displayName}\r\n\r\n${error.error?.Message ?? error.error?.message ?? ''}\r\n\r\n${error.message}\r\n\r\nPlease try again later or check how to manually install content-templates: https://azing.org/2sxc/r/0O4OymoA`;\r\n        alert(errorMsg);\r\n        return of(error);\r\n      }),\r\n    ).subscribe());\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog(refresh?: boolean): void {\r\n    this.dialog.close(refresh);\r\n  }\r\n\r\n  cleanUpload(): void {\r\n    this.result.set(undefined);\r\n    this.files.set([]);\r\n    this.uploading.set(false);\r\n  }\r\n\r\n  #setupConditionalValidation(): void {\r\n    const nameControl = this.importForm.get('name');\r\n    this.importForm.get('importMode')?.valueChanges.subscribe(mode => {\r\n      const isTemplate = mode === this.importModeValues.importAsTemplate;\r\n      nameControl?.setValidators(isTemplate ? [Validators.required] : null);\r\n      nameControl?.updateValueAndValidity();\r\n    });\r\n  }\r\n\r\n  filesDropped(files: File[]): void {\r\n    this.#setFiles(files);\r\n  }\r\n\r\n  filesChanged(event: Event): void {\r\n    const fileList = (event.target as HTMLInputElement).files;\r\n    const files = Array.from(fileList);\r\n    this.#setFiles(files);\r\n  }\r\n\r\n  upload(): void {\r\n    this.uploading.set(true);\r\n    const name = this.importForm.get('name')?.value as string;\r\n    this.subscriptions.add(\r\n      this.dialogData.upload$(this.files(), name).pipe(take(1)).subscribe({\r\n        next: (result) => {\r\n          this.uploading.set(false);\r\n          this.result.set(result);\r\n        },\r\n        error: () => {\r\n          this.uploading.set(false);\r\n          this.result.set(undefined);\r\n          this.snackBar.open('Upload failed. Please check console for more information', undefined, { duration: 3000 });\r\n        },\r\n      }),\r\n    );\r\n  }\r\n\r\n  toggleShowAppCatalog(): void {\r\n    this.showAppCatalog.set(!this.showAppCatalog());\r\n  }\r\n\r\n  #setFiles(files: File[]): void {\r\n    if (!this.dialogData.multiple)\r\n      files = files.slice(0, 1);\r\n\r\n    this.files.set(files);\r\n  }\r\n}\r\n\r\n","\r\nimport { startWith, map, tap } from 'rxjs/operators';\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Subject, Observable } from 'rxjs';\r\nimport { InstallSettings } from '../models/installer-models';\r\n\r\n// copied from 2sxc-ui app/installer\r\n@Injectable()\r\nexport class AppInstallSettingsService {\r\n\r\n  private installSettingsSubject: Subject<InstallSettings> = new Subject<InstallSettings>();\r\n  settings$: Observable<InstallSettings> = this.installSettingsSubject.asObservable();\r\n\r\n  constructor(private http: HttpClient) {\r\n    const ready$ = this.settings$.pipe(\r\n      map(() => true),\r\n      startWith(false));\r\n\r\n    ready$.subscribe();\r\n  }\r\n\r\n  public loadGettingStarted(isContentApp: boolean): void {\r\n    this.http.get<InstallSettings>(`sys/install/InstallSettings?isContentApp=${isContentApp}`)\r\n      .subscribe(json => this.installSettingsSubject.next(json));\r\n  }\r\n}\r\n","import { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nconst nodeEventEmitterMethods = ['addListener', 'removeListener'];\nconst eventTargetMethods = ['addEventListener', 'removeEventListener'];\nconst jqueryMethods = ['on', 'off'];\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs(resultSelector));\n    }\n    const [add, remove] = isEventTarget(target)\n        ? eventTargetMethods.map((methodName) => (handler) => target[methodName](eventName, handler, options))\n        :\n            isNodeStyleEventEmitter(target)\n                ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName))\n                : isJQueryStyleEventEmitter(target)\n                    ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName))\n                    : [];\n    if (!add) {\n        if (isArrayLike(target)) {\n            return mergeMap((subTarget) => fromEvent(subTarget, eventName, options))(innerFrom(target));\n        }\n    }\n    if (!add) {\n        throw new TypeError('Invalid event target');\n    }\n    return new Observable((subscriber) => {\n        const handler = (...args) => subscriber.next(1 < args.length ? args : args[0]);\n        add(handler);\n        return () => remove(handler);\n    });\n}\nfunction toCommonHandlerRegistry(target, eventName) {\n    return (methodName) => (handler) => target[methodName](eventName, handler);\n}\nfunction isNodeStyleEventEmitter(target) {\n    return isFunction(target.addListener) && isFunction(target.removeListener);\n}\nfunction isJQueryStyleEventEmitter(target) {\n    return isFunction(target.on) && isFunction(target.off);\n}\nfunction isEventTarget(target) {\n    return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}\n","import { Directive, ElementRef, HostListener, input, NgZone, OnDestroy, OnInit, output, signal } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { fromEvent } from 'rxjs';\r\nimport { BaseDirective } from './base.directive';\r\n\r\n@Directive({\r\n  selector: '[appDragAndDrop]',\r\n})\r\nexport class DragAndDropDirective extends BaseDirective implements OnInit, OnDestroy {\r\n  markStyle = input<'outline' | 'fill' | 'shadow'>('outline');\r\n  /** Comma separated file types, e.g. 'txt,doc,docx' */\r\n  allowedFileTypes = input<string>('');\r\n  protected filesDropped = output<File[]>();\r\n\r\n  private element: HTMLElement;\r\n  private dropAreaClass = 'eav-droparea';\r\n  private markStyleClass = signal<string>('');\r\n  private dragClass = 'eav-dragover';\r\n  private timeouts: number[] = [];\r\n\r\n  constructor(elementRef: ElementRef, private zone: NgZone, private snackBar: MatSnackBar) {\r\n    super();\r\n    this.element = elementRef.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.markStyleClass.set(`eav-droparea-${this.markStyle()}`);\r\n    this.element.classList.add(this.dropAreaClass, this.markStyleClass());\r\n    this.zone.runOutsideAngular(() => {\r\n      this.subscriptions.add(\r\n        fromEvent<DragEvent>(this.element, 'dragover').subscribe(event => {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this.clearTimeouts();\r\n          this.element.classList.add(this.dragClass);\r\n        })\r\n      );\r\n      this.subscriptions.add(\r\n        fromEvent<DragEvent>(this.element, 'dragleave').subscribe(event => {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this.timeouts.push(\r\n            window.setTimeout(() => { this.element.classList.remove(this.dragClass); }, 50)\r\n          );\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.clearTimeouts();\r\n    this.element.classList.remove(this.dropAreaClass, this.markStyleClass(), this.dragClass);\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  @HostListener('drop', ['$event'])\r\n  onDrop(event: DragEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    this.clearTimeouts();\r\n    this.element.classList.remove(this.dragClass);\r\n    const fileList = event.dataTransfer.files;\r\n    let files = Array.from(fileList);\r\n    files = this.filterTypes(files, this.allowedFileTypes());\r\n    if (files.length > 0) {\r\n      this.filesDropped.emit(files);\r\n    }\r\n  }\r\n\r\n  private clearTimeouts() {\r\n    for (const timeout of this.timeouts) {\r\n      clearTimeout(timeout);\r\n    }\r\n    this.timeouts = [];\r\n  }\r\n\r\n  private filterTypes(files: File[], allowedFileTypes: string) {\r\n    if (allowedFileTypes === '') { return files; }\r\n\r\n    const allowedTypes = allowedFileTypes.split(',').map(type => type.toLocaleLowerCase());\r\n    const filtered = files.filter(file => {\r\n      const extIndex = file.name.lastIndexOf('.');\r\n      if (extIndex <= 0) { return false; }\r\n      const ext = file.name.substring(extIndex + 1).toLocaleLowerCase();\r\n      const allowed = allowedTypes.includes(ext);\r\n      return allowed;\r\n    });\r\n\r\n    if (files.length !== filtered.length) {\r\n      const allowedTypesString = this.allowedFileTypes().replace(/\\,/g, ', ');\r\n      const message = filtered.length\r\n        ? 'Some files were filtered out. This drop location only accepts file types: ' + allowedTypesString\r\n        : 'This drop location only accepts file types: ' + allowedTypesString;\r\n      this.snackBar.open(message, null, { duration: 5000 });\r\n    }\r\n    return filtered;\r\n  }\r\n}\r\n","import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { App, PendingApp } from '../models/app.model';\r\n\r\nconst webApiAppRootList = 'admin/app/list';\r\nconst webApiAppRootInheritableApps = 'admin/app/InheritableApps';\r\nconst webApiAppRootPendingApps = 'admin/app/GetPendingApps';\r\nconst webApiAppRootApp = 'admin/app/app';\r\nconst webApiAppRootInstallPendingApps = 'admin/app/InstallPendingApps';\r\nconst webApiAppRootFlushcache = 'admin/app/flushcache';\r\n\r\n@Injectable()\r\nexport class AppsListService extends HttpServiceBaseSignal {\r\n\r\n  // clean way to create a new resource every time if refresh change\r\n  getAllLive(refresh: Signal<unknown>) {\r\n    return httpResource<App[]>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiAppRootList),\r\n        params: { zoneId: this.zoneId }\r\n      });\r\n    });\r\n  }\r\n\r\n  getInheritable() {\r\n    return httpResource<App[]>(() => ({\r\n      url: this.apiUrl(webApiAppRootInheritableApps),\r\n      params: { zoneId: this.zoneId }\r\n    }));\r\n  }\r\n\r\n  getPendingApps() {\r\n    return httpResource<PendingApp[]>(() => ({\r\n      url: this.apiUrl(webApiAppRootPendingApps),\r\n      params: { zoneId: this.zoneId },\r\n    }));\r\n  }\r\n\r\n  create(name: string, inheritAppId?: number, templateId?: number) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRootApp), {}, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n        name,\r\n        ...(inheritAppId != null && { inheritAppId }),\r\n        ...(templateId != null && { templateId }),\r\n      },\r\n    });\r\n  }\r\n\r\n  createTemplate(url: string, newName: string) {\r\n    const encodedName = encodeURIComponent(newName);\r\n    return <Observable<any>>this.http.post(`sys/install/RemotePackage?packageUrl=${url}&newName=${encodedName}`, {});\r\n  }\r\n\r\n  installPendingApps(pendingApps: PendingApp[]) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRootInstallPendingApps), pendingApps, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(appId: number) {\r\n    return this.http.delete<null>(this.apiUrl(webApiAppRootApp), {\r\n      params: { zoneId: this.zoneId, appId: appId.toString() },\r\n    });\r\n  }\r\n\r\n  async flushCache(appId: number): Promise<number> {\r\n    return this.getStatusPromise(webApiAppRootFlushcache, {\r\n      params: { zoneId: this.zoneId, appId: appId.toString() },\r\n    });\r\n  }\r\n\r\n}\r\n"],"x_google_ignoreList":[6]}