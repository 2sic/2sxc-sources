"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["common"],{1657:(_,h,t)=>{t.d(h,{E:()=>i});var s=t(9148),r=t(6256),d=t(5060),c=t(3840),p=t(8136),m=t(4824),o=t(4601);function n(u,g){if(1&u){const f=s.RV6();s.j41(0,"div",2),s.bIt("click",function(){s.eBV(f);const E=s.XpG();return s.Njj(E.openLightspeedFeatureInfo())}),s.j41(1,"mat-icon",3),s.EFF(2," bolt "),s.k0s()()}}function a(u,g){if(1&u&&(s.j41(0,"a",5)(1,"mat-icon",6),s.EFF(2," bolt "),s.k0s()()),2&u){const f=s.XpG(2);s.Y8G("href","#"+f.params().lightSpeedLink(f.lightSpeedOwner()),s.B4B)}}function e(u,g){if(1&u&&(s.j41(0,"a",5)(1,"mat-icon",7),s.EFF(2," bolt "),s.k0s()()),2&u){const f=s.XpG(2);s.Y8G("href","#"+f.params().lightSpeedLink(f.lightSpeedOwner()),s.B4B)}}function l(u,g){if(1&u&&(s.j41(0,"div",4),s.DNE(1,a,3,1,"a",5)(2,e,3,1,"a",5),s.k0s()),2&u){const f=s.XpG();s.ZvI("eav-grid-action-button ",f.appHasLightSpeed?"":"disabled",""),s.Y8G("tippy",f.appHasLightSpeed?f.lightSpeed().Title:"Not yet configured for LightSpeed"),s.R7$(),s.vxM(f.appLightSpeedEnabled?1:2)}}let i=(()=>{class u{constructor(){this.lightSpeedOwner=s.hFB.required(),this.params=s.hFB.required(),this.lightSpeed=s.hFB.required(),this.features=(0,s.WQX)(m.t),this.lightSpeedEnabled=this.features.isEnabled[p.T.LightSpeed]}get appHasLightSpeed(){return null!=this.lightSpeed()?.Id}get appLightSpeedEnabled(){return 1==this.lightSpeed()?.IsEnabled}openLightspeedFeatureInfo(){this.params().openLightspeedFeatureInfo()}static{this.\u0275fac=function(v){return new(v||u)}}static{this.\u0275cmp=s.VBU({type:u,selectors:[["app-lightspeed-action"]],inputs:{lightSpeedOwner:[1,"lightSpeedOwner"],params:[1,"params"],lightSpeed:[1,"lightSpeed"]},standalone:!0,features:[s.aNF],decls:2,vars:1,consts:[["tippy","Lightspeed is disabled",1,"eav-grid-action-button","disabled"],["matRipple","",3,"class","tippy"],["tippy","Lightspeed is disabled",1,"eav-grid-action-button","disabled",3,"click"],["matBadgeSize","small","matBadge","\u{1f48e}","matBadgePosition","below after","aria-hidden","false"],["matRipple","",3,"tippy"],[1,"default-link",3,"href"],["matBadgeSize","small","matBadge","\u2705","matBadgePosition","below after","aria-hidden","false"],["matBadgeSize","small","matBadge","\u26d4","matBadgePosition","below after","aria-hidden","false"]],template:function(v,E){1&v&&s.DNE(0,n,3,0,"div",0)(1,l,3,5,"div",1),2&v&&s.vxM(E.lightSpeedEnabled()?1:0)},dependencies:[o.e,c.m_,c.An,r.Y,r.k,d.pZ,d.r6],encapsulation:2})}}return u})()},8713:(_,h,t)=>{t.d(h,{g:()=>d});var s=t(52),r=t(334);class d{static getLightSpeedEditParams(p){return{items:[r.c.newMetadata(p,s.YX.appMetadata.LightSpeed.ContentTypeName,s.YX.metadata.app,!0)]}}}},7703:(_,h,t)=>{t.d(h,{s:()=>r,w:()=>s});const s=/^[A-Za-z][A-Za-z0-9]+$/,r="Standard letters and numbers are allowed. Must start with a letter."},2620:(_,h,t)=>{t.d(h,{y:()=>s});class s{refresh(d){return!0}}},8362:(_,h,t)=>{t.d(h,{l:()=>p});var s=t(9148),r=t(271),d=t(1772),c=t(6474);let p=(()=>{class m extends c.D{getStackSig(n,a,e,l=!1){const i=(0,s.vPA)([]);return this.getAndWrite(d.u+"GetStack",{params:{appId:this.appId,part:n,...a&&{key:a},...e&&{view:e}}},i),(0,s.EWP)(()=>l?i().map(u=>({...u,_value:JSON.stringify(u.Value)})):i())}getStack(n,a,e,l=!1){return this.getHttp(d.u+"GetStack",{params:{appId:this.appId,part:n,...a&&{key:a},...e&&{view:e}}}).pipe((0,r.T)(i=>{if(!l)return i;for(const u of i)u._value=JSON.stringify(u.Value);return i}))}static{this.\u0275fac=(()=>{let n;return function(e){return(n||(n=s.xGo(m)))(e||m)}})()}static{this.\u0275prov=s.jDH({token:m,factory:m.\u0275fac})}}return m})()},1423:(_,h,t)=>{t.d(h,{g:()=>o});var s=t(5060),r=t(2938),d=t(4601),c=t(4038),p=t(5081),m=t(9148);let o=(()=>{class n{constructor(){this.clipboard=(0,r.d)(p.W)}agInit(e){this.value=e.value}refresh(e){return!0}copy(e){e=c.i.tryParse(e)??e,this.clipboard.copyToClipboard(e)}static{this.\u0275fac=function(l){return new(l||n)}}static{this.\u0275cmp=m.VBU({type:n,selectors:[["app-analyze-settings-value"]],standalone:!0,features:[m.aNF],decls:3,vars:2,consts:[["matRipple","",1,"value-box","highlight",3,"click","tippy"],[1,"value"]],template:function(l,i){1&l&&(m.j41(0,"div",0),m.bIt("click",function(){return i.copy(i.value)}),m.j41(1,"span",1),m.EFF(2),m.k0s()()),2&l&&(m.Y8G("tippy",i.value),m.R7$(2),m.JRh(i.value))},dependencies:[s.pZ,s.r6,d.e],styles:[".value-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.value-box[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}"]})}}return n})()},3583:(_,h,t)=>{t.d(h,{U:()=>a});var s=t(6474),r=t(9148);const m="admin/app/app";let a=(()=>{class e extends s.D{getAll(){return this.getSignal("admin/app/list",{params:{zoneId:this.zoneId}})}getInheritable(){return this.getSignal("admin/app/InheritableApps",{params:{zoneId:this.zoneId}})}getPendingApps(){return this.getSignal("admin/app/GetPendingApps",{params:{zoneId:this.zoneId}})}create(i,u,g){return this.http.post(this.apiUrl(m),{},{params:{zoneId:this.zoneId,name:i,...null!=u&&{inheritAppId:u},...null!=g&&{templateId:g}}})}installPendingApps(i){return this.http.post(this.apiUrl("admin/app/InstallPendingApps"),i,{params:{zoneId:this.zoneId}})}delete(i){return this.http.delete(this.apiUrl(m),{params:{zoneId:this.zoneId,appId:i.toString()}})}flushCache(i){return this.getHttpApiUrl("admin/app/flushcache",{params:{zoneId:this.zoneId,appId:i.toString()}})}static{this.\u0275fac=(()=>{let i;return function(g){return(i||(i=r.xGo(e)))(g||e)}})()}static{this.\u0275prov=r.jDH({token:e,factory:e.\u0275fac})}}return e})()},3992:(_,h,t)=>{t.d(h,{b:()=>a});var s=t(271),r=t(3550),d=t(6474),c=t(9148);const o="sys/license/Summary";let a=(()=>{class e extends d.D{saveFeatures(i){return this.http.post(this.apiUrl("admin/feature/SaveNew"),i)}getLicenses(){return this.getHttpApiUrl(o)}getLicensesSig(){return this.getSignal(o)}uploadLicense(i){const u=new FormData;return u.append("File",i),this.http.post(this.apiUrl("sys/license/Upload"),u).pipe((0,s.T)(g=>({Success:g.Success,Messages:[{MessageType:g.Success?r.G1.Success:r.G1.Error,Text:`License ${g.Success?"uploaded":"upload failed"}: ${g.Message}`}]})))}retrieveLicense(){return this.getHttpApiUrl("sys/license/Retrieve")}static{this.\u0275fac=(()=>{let i;return function(g){return(i||(i=c.xGo(e)))(g||e)}})()}static{this.\u0275prov=c.jDH({token:e,factory:e.\u0275fac})}}return e})()},7130:(_,h,t)=>{t.d(h,{U:()=>o});var s=t(6474),r=t(9148);let o=(()=>{class n extends s.D{getLanguage(e){return this.getSignal("admin/zone/GetLanguages",{},e)}toggleLanguage(e,l){return this.getHttpApiUrl("admin/zone/SwitchLanguage",{params:{cultureCode:e,enable:l.toString()}})}getSystemInfo(e){return this.getSignal("admin/zone/GetSystemInfo",{},e)}getLanguagesPermissions(e){return this.getSignal("admin/app/languages",{params:{appId:this.appId}},e)}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=r.xGo(n)))(i||n)}})()}static{this.\u0275prov=r.jDH({token:n,factory:n.\u0275fac})}}return n})()},753:(_,h,t)=>{t.r(h),t.d(h,{contentItemsRoutes:()=>o});var s=t(3454),r=t(5544),d=t(9204);const c={name:"IMPORT_CONTENT_ITEM_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,d.A)(function*(){const{ImportContentItemComponent:n}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts")]).then(t.bind(t,6754));return n})()},p={name:"CONTENT_ITEMS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:()=>(0,d.A)(function*(){const{ContentItemsComponent:n}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_-3cb379"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("default-projects_eav-ui_src_app_shared_services_service-base_ts-node_modules_angular_material-ffa7b3"),t.e("default-node_modules_angular_material_fesm2022_slide-toggle_mjs"),t.e("common"),t.e("projects_eav-ui_src_app_content-items_content-items_component_ts")]).then(t.bind(t,7730));return n})()};var m=t(1195);const o=[{path:"",component:r.DialogEntryComponent,data:{dialog:p},children:[...s.H.getRoutes(),{path:"export/:contentTypeStaticName",loadChildren:()=>t.e("projects_eav-ui_src_app_content-export_content-export_routing_ts").then(t.bind(t,4350)).then(n=>n.ContentExportRoutes)},{path:"export/:contentTypeStaticName/:selectedIds",loadChildren:()=>t.e("projects_eav-ui_src_app_content-export_content-export_routing_ts").then(t.bind(t,4350)).then(n=>n.ContentExportRoutes)},{path:"import",component:r.DialogEntryComponent,data:{dialog:c}},{path:":contentTypeStaticName/import",loadChildren:()=>t.e("projects_eav-ui_src_app_content-import_content-import_routing_ts").then(t.bind(t,3031)).then(n=>n.contentImportRoutes),data:{title:"Import Items"}},...m.RD]}]},4007:(_,h,t)=>{t.d(h,{D:()=>d,y:()=>r});var s=t(1726);function r(c){return{[s.O.Boolean]:"toggle_on",[s.O.Custom]:"extension",[s.O.DateTime]:"today",[s.O.Empty]:"crop_free",[s.O.Entity]:"share",[s.O.Hyperlink]:"link",[s.O.Number]:"dialpad",[s.O.String]:"text_fields"}[c]??"device_unknown"}function d(c){return{[s.O.Boolean]:"Boolean (yes/no)",[s.O.Custom]:"Custom - ui-tools or custom types",[s.O.DateTime]:"Date and/or time",[s.O.Empty]:"Empty - for form-titles etc.",[s.O.Entity]:"Entity (other content-items)",[s.O.Hyperlink]:"Link / file reference",[s.O.Number]:"Number",[s.O.String]:"Text / string"}[c]??"device_unknown"}},5733:(_,h,t)=>{t.r(h),t.d(h,{contentTypeFieldsRoutes:()=>n});var s=t(1195),r=t(3454),d=t(2437),c=t(5544),p=t(9204);const o={name:"EDIT_CONTENT_TYPE_FIELDS_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,p.A)(function*(){const{EditContentTypeFieldsComponent:a}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("common"),t.e("projects_eav-ui_src_app_content-type-fields_edit-content-type-fields_edit-content-type-fields-974b18")]).then(t.bind(t,4099));return a})()},n=[{path:"",component:c.DialogEntryComponent,data:{dialog:{name:"CONTENT_TYPE_FIELDS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:()=>(0,p.A)(function*(){const{ContentTypeFieldsComponent:a}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_-3cb379"),t.e("default-projects_eav-ui_src_app_shared_services_clipboard_service_ts-node_modules_angular_mat-15cf82"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("default-projects_eav-ui_src_app_shared_services_service-base_ts-node_modules_angular_material-ffa7b3"),t.e("default-projects_eav-ui_src_app_features_feature-icon-text_feature-icon-text_component_ts-pro-5596fb"),t.e("common"),t.e("projects_eav-ui_src_app_content-type-fields_content-type-fields_component_ts")]).then(t.bind(t,5715));return a})()}},children:[{path:"add/:contentTypeStaticName",component:c.DialogEntryComponent,data:{dialog:o}},{path:"update/:contentTypeStaticName/:id/:editMode",component:c.DialogEntryComponent,data:{dialog:o}},...r.H.getRoutes(),d.k.route,...s.RD]}]},5160:(_,h,t)=>{t.d(h,{O:()=>d});var s=t(9148),r=t(4456);let d=(()=>{class c{constructor(){this.appReservedNames=(0,s.hFB)({})}validate(m){if(!m.value)return null;const o=m.value.toLocaleLowerCase(),n=Object.keys(this.appReservedNames()).find(a=>a.toLocaleLowerCase()===o);return n?{reservedNames:this.appReservedNames()[n]}:null}static mergeReserved(m,o){const n={};return o.forEach(a=>{n[a.StaticName]="this field already exists"}),{...m,...n}}static{this.\u0275fac=function(o){return new(o||c)}}static{this.\u0275dir=s.FsC({type:c,selectors:[["","appReservedNames",""]],inputs:{appReservedNames:[1,"appReservedNames"]},standalone:!0,features:[s.Jv_([{provide:r.cz,useExisting:c,multi:!0}])]})}}return c})()},6068:(_,h,t)=>{t.d(h,{g:()=>s.g});var s=t(4029)},6740:(_,h,t)=>{t.d(h,{z:()=>r});const r=t(6619).c.production?[]:["ViewController"]},8857:(_,h,t)=>{t.d(h,{a:()=>n});var s=t(2434),r=t(4435),d=t(6740),c=t(6953),p=t(8275);const m={all:!0,constructor:!1,markTouched:!1,set:!1,disable:!1,getErrors:!0,fields:[...d.z,"*"]},o="ValidationMessage.";class n{constructor(e,l="unknown",i=!1){this.control=e,this.name=l,this.moreDisabled=i,this.log=(0,r.T)({UiControl:n},m),this.#t={jsonWarning:`${o}JsonWarning`,formulaWarning:`${o}NotValid`},this.control??={dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1},this.log.extendName(`[${l}]`),this.log.aIfInList("fields",this.name,{moreDisabled:i},"constructor")}static emptyControl(){return new n({dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1})}get dirty(){return this.control.dirty}get invalid(){return this.control.invalid}get touched(){return this.control.touched}get disabled(){return this.control.disabled||this.moreDisabled}get touchedAndInvalid(){return this.control.touched&&this.control.invalid}markTouched(){this.log.aIfInList("fields",this.name,null,"markTouched"),n.markTouched(this.control)}setIfChanged(e){this.log.aIfInList("fields",this.name,{before:this.control.value,newValue:e},"setIfChanged"),!(0,s.A)(e,this.control.value)&&this.#e(e)}#e(e){const l=this.control,i=l.value;this.log.aIfInList("fields",this.name,{before:i,newValue:e},"set"),l.touched||l.markAsTouched(),!l.dirty&&!c.$.fieldValuesAreEqual(i,e)&&l.markAsDirty(),l.patchValue(e)}disable(e){this.log.aIfInList("fields",this.name,null,`disable: ${e}`),n.disable(this.control,e)}static markTouched(e){e.touched||(e.markAsTouched(),e.updateValueAndValidity())}static disable(e,l){e.disabled!==l&&(l?e.disable():e.enable())}getErrors(){const e=this.control,l=e.errors,i=this.log.fnIfInList("getErrors","fields",this.name,{control:e,name:this.name});if(!e.invalid)return i.r("","valid");if(!e.dirty&&!e.touched)return i.r("","not dirty or touched");for(const u of Object.keys(l)){const g="formulaError"===u?e.errors.formulaMessage??p.n.messages[u]?.(!0):p.n.messages[u]?.(!0);if(g)return i.r(g,"error found")}return i.r("","no error")}#t;getWarnings(){const e=this.control;if(null==e._warning||!e.dirty&&!e.touched)return"";let l="";for(const i of Object.keys(e._warning))if(l="formulaWarning"===i?e._warning.formulaMessage??this.#t[i]:this.#t[i],l)break;return l}}},6953:(_,h,t)=>{t.d(h,{$:()=>r});var s=t(3826);class r{static fieldValuesAreEqual(c,p){return!!(c===p||"number"==typeof c&&"number"==typeof p&&isNaN(c)&&isNaN(p)||Array.isArray(c)&&Array.isArray(p)&&s.a.arraysEqual(c,p))}static getItemValuesChanges(c,p){const m={};for(const o of Object.keys(p)){const n=p[o];r.fieldValuesAreEqual(n,c[o])||(m[o]=n)}return 0===Object.keys(m).length?void 0:m}}},8275:(_,h,t)=>{t.d(h,{n:()=>c});var s=t(8857);const r="ValidationMessage.",d="ValidationMessage.NotValid";let c=(()=>{class p{static{this.messages={required:o=>o?`${r}Required`:`${r}RequiredShort`,min:o=>o?`${r}Min`:d,max:o=>o?`${r}Max`:d,minNoItems:o=>o?`${r}MinNoItems`:d,maxNoItems:o=>o?`${r}MaxNoItems`:d,pattern:o=>o?`${r}Pattern`:d,decimals:o=>o?`${r}Decimals`:d,jsonError:o=>o?`${r}JsonError`:d,formulaError:o=>d}}static validateForm(o){const n={};for(const[a,e]of Object.entries(o.controls))if(s.a.markTouched(e),e.invalid)for(const l of Object.keys(e.errors))if(n[a]=this.messages[l]?.(!1),n[a])break;return n}}return p})()},7903:(_,h,t)=>{t.r(h),t.d(h,{importRoutes:()=>c});var s=t(5544),r=t(9204);const c=[{path:"",component:s.DialogEntryComponent,data:{dialog:{name:"IMPORT_APP_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,r.A)(function*(){const{ImportAppComponent:p}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("projects_eav-ui_src_app_import-app_import-app_component_ts")]).then(t.bind(t,781));return p})()}}}]},9669:(_,h,t)=>{t.d(h,{y:()=>c});var s=t(6474),r=t(9148);const d="cms/contentgroup/";let c=(()=>{class p extends s.D{getItems(o){return this.getHttpApiUrl(d+"replace",{params:{appId:this.appId,guid:o.guid,part:o.part,index:o.index.toString()}})}saveItem(o){return this.http.post(this.apiUrl(d+"replace"),{},{params:{guid:o.guid,part:o.part,index:o.index.toString(),entityId:o.id.toString(),add:`${o.add}`}})}removeItem(o,n){return this.http.delete(this.apiUrl("cms/list/delete"),{params:{index:n,parent:o.guid,fields:o.part}})}getList(o){return this.getHttpApiUrl(d+"itemlist",{params:{appId:this.appId,guid:o.guid,part:o.part}})}saveList(o,n){return this.http.post(this.apiUrl(d+"itemlist"),n,{params:{appId:this.appId,guid:o.guid,part:o.part}})}getHeader(o,n){return this.getSignal(d+"header",{params:{appId:this.appId,guid:o.guid}},n)}static{this.\u0275fac=(()=>{let o;return function(a){return(o||(o=r.xGo(p)))(a||p)}})()}static{this.\u0275prov=r.jDH({token:p,factory:p.\u0275fac})}}return p})()},8801:(_,h,t)=>{t.d(h,{K:()=>m});var s=t(9148);const d="area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr".split(",").map(o=>o.trim().toLocaleLowerCase());class c{constructor(n,a,e,l,i,u,g){this.monaco=n,this.filename=a,this.snippets=u,this.tooltips=g,this.globalCache=this.createGlobalCache(n),this.defineThemes(this.globalCache,this.monaco),this.cachedValue=e,this.editorInstance=this.createInstance(this.monaco,a,e,l,i),this.completionItemProviders=this.addSnippets(this.monaco,this.editorInstance),this.resizeObserver=this.createResizeObserver(l,this.editorInstance),this.restoreState(this.globalCache,this.editorInstance),this.addEvents(this.editorInstance)}destroy(){this.saveState(this.globalCache,this.editorInstance),this.resizeObserver.disconnect(),this.completionItemProviders.forEach(n=>n.dispose()),this.jsTypingsLib?.dispose(),this.editorInstance.getModel().dispose(),this.editorInstance.dispose()}updateValue(n){this.cachedValue!==n&&(this.cachedValue=n,this.editorInstance.getModel().setValue(n))}focus(){this.editorInstance.focus()}onValueChange(n){this.valueChangedCallback=n}onFocus(n){this.focusedCallback=n}onBlur(n){this.blurredCallback=n}insertSnippet(n){this.editorInstance.getContribution("snippetController2").insert(n)}setSnippets(n){this.snippets=n}setTooltips(n){this.tooltips=n}setJsonSchema(n){const a=this.editorInstance.getModel().uri.toString(),e=this.monaco.languages.json.jsonDefaults.diagnosticsOptions,l=e.schemas?.some(g=>g.fileMatch[0]===a)??!1,i="link"===n?.type?{uri:n.value,fileMatch:[a]}:"raw"===n?.type?{uri:a,fileMatch:[a],schema:JSON.parse(n.value)}:void 0;if(!l&&!i)return;const u={...e,enableSchemaRequest:!0,schemas:l&&!i?e.schemas.filter(g=>g.fileMatch[0]!==a):l?e.schemas.map(g=>g.fileMatch[0]===a?i:g):[...e.schemas??[],i]};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(u)}setJsonComments(n){if(!n)return;const a={...this.monaco.languages.json.jsonDefaults.diagnosticsOptions,comments:n};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(a)}setJsDiagnostics(n){if(!n)return;const a={...this.monaco.languages.typescript.javascriptDefaults.getDiagnosticsOptions(),...n};this.monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions(a)}setJsTypings(n){n?this.jsTypingsLib=this.monaco.languages.typescript.javascriptDefaults.addExtraLib(n,`js-typings-${this.filename}`):this.jsTypingsLib?.dispose()}createGlobalCache(n){return null==n._2sxc&&(n._2sxc={themesAreDefined:!1,savedStates:{}}),n._2sxc}defineThemes(n,a){n.themesAreDefined||(n.themesAreDefined=!0,a.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}],colors:{}}))}createInstance(n,a,e,l,i){const u=n.editor.create(l,i),g=n.Uri.file(a),f=n.editor.createModel(e,void 0,g);return u.setModel(f),u}saveState(n,a){const e=a.getModel().uri.toString(),l=JSON.stringify(a.saveViewState());null==n.savedStates[e]?n.savedStates[e]={viewState:l}:n.savedStates[e].viewState=l}restoreState(n,a){const e=a.getModel().uri.toString(),l=n.savedStates[e];if(null==l)return;const i=JSON.parse(l.viewState);a.restoreViewState(i)}addSnippets(n,a){return[n.languages.registerCompletionItemProvider(a.getModel().getLanguageId(),{triggerCharacters:[">"],provideCompletionItems:(l,i)=>{if(a.getModel()!==l)return{suggestions:[]};const u=l.getValueInRange({startLineNumber:i.lineNumber,startColumn:1,endLineNumber:i.lineNumber,endColumn:i.column});if(">"!==u[u.length-1])return{suggestions:[]};const f=u.lastIndexOf("<");if(-1===f)return{suggestions:[]};const v=u.substring(f);let E=0;if(Array.from(v).forEach(D=>{'"'===D&&E++}),E%2!=0)return{suggestions:[]};if(v.startsWith("</"))return{suggestions:[]};if(v.indexOf(">")!==v.length-1)return{suggestions:[]};let I=v.indexOf(" ");if(-1===I&&(I=v.indexOf(">")),-1===I)return{suggestions:[]};const C=v.substring(1,I);return C?d.includes(C.toLocaleLowerCase())?{suggestions:[]}:/[a-zA-Z0-9_-]/.test(C)?{suggestions:[{label:`</${C}>`,kind:n.languages.CompletionItemKind.Snippet,insertText:`$0</${C}>`,insertTextRules:n.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:i.lineNumber,endLineNumber:i.lineNumber,startColumn:i.column,endColumn:i.column}}]}:{suggestions:[]}:{suggestions:[]}}}),n.languages.registerCompletionItemProvider(a.getModel().getLanguageId(),{provideCompletionItems:(l,i)=>{if(null==this.snippets||a.getModel()!==l)return{suggestions:[]};const u=l.getWordUntilPosition(i);return{suggestions:this.snippets.map(f=>f.content?{label:f.name,kind:n.languages.CompletionItemKind.Snippet,documentation:`${f.title??""}\n${f.help??""}\n${f.links??""}`,insertText:f.content,insertTextRules:n.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:i.lineNumber,endLineNumber:i.lineNumber,startColumn:u.startColumn,endColumn:u.endColumn}}:void 0).filter(f=>!!f)}}}),n.languages.registerHoverProvider(a.getModel().getLanguageId(),{provideHover:(l,i)=>{if(null==this.tooltips||a.getModel()!==l)return;const u=l.getWordAtPosition(i);if(!u)return;const g=this.tooltips.find(f=>f.Term===u.word);return g?{contents:g.Help.map(f=>({value:f})),range:{startLineNumber:i.lineNumber,endLineNumber:i.lineNumber,startColumn:u.startColumn,endColumn:u.endColumn}}:void 0}})]}createResizeObserver(n,a){const e=new ResizeObserver(()=>{a.layout()});return e.observe(n),e}addEvents(n){n.getModel().onDidChangeContent(()=>{const a=n.getModel().getValue();a!==this.cachedValue&&(this.cachedValue=a,this.valueChangedCallback?.(a))}),n.onDidFocusEditorWidget(()=>{this.focusedCallback?.()}),n.onDidBlurEditorWidget(()=>{this.blurredCallback?.()})}}const p=["editor"];let m=(()=>{class o{constructor(){this.filename=(0,s.hFB)(),this.value=(0,s.hFB)(),this.tooltips=(0,s.hFB)(),this.snippets=(0,s.hFB)(),this.options=(0,s.hFB)(),this.jsonSchema=(0,s.hFB)(),this.jsonComments=(0,s.hFB)(),this.jsTypings=(0,s.hFB)(),this.jsDiagnostics=(0,s.hFB)(),this.autoFocus=(0,s.hFB)(!1),this.valueChanged=(0,s.CGW)(),this.focused=(0,s.CGW)(),this.blurred=(0,s.CGW)()}ngAfterViewInit(){window.require.config({paths:{vs:["https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.46.0/min/vs"]}}),window.require(["vs/editor/editor.main"],a=>{this.monaco=a,this.createEditor(this.autoFocus())})}ngOnChanges(a){null!=a.filename&&null!=this.monacoInstance&&(this.monacoInstance.destroy(),this.createEditor(!0)),null!=a.value&&this.monacoInstance?.updateValue(this.value()),null!=a.jsonSchema&&this.monacoInstance?.setJsonSchema(this.jsonSchema()),null!=a.jsonComments&&this.monacoInstance?.setJsonComments(this.jsonComments()),null!=a.snippets&&this.monacoInstance?.setSnippets(this.snippets()),null!=a.tooltips&&this.monacoInstance?.setTooltips(this.tooltips()),null!=a.jsTypings&&this.monacoInstance?.setJsTypings(this.jsTypings()),null!=a.jsDiagnostics&&this.monacoInstance?.setJsDiagnostics(this.jsDiagnostics())}insertSnippet(a){this.monacoInstance?.insertSnippet(a),this.monacoInstance?.focus()}ngOnDestroy(){this.monacoInstance?.destroy()}createEditor(a){this.monacoInstance=new c(this.monaco,this.filename(),this.value(),this.editorRef.nativeElement,this.options(),this.snippets(),this.tooltips()),this.monacoInstance.setJsonSchema(this.jsonSchema()),this.monacoInstance.setJsonComments(this.jsonComments()),this.monacoInstance.setJsTypings(this.jsTypings()),this.monacoInstance.setJsDiagnostics(this.jsDiagnostics()),this.monacoInstance.onValueChange(e=>{this.valueChanged.emit(e)}),this.monacoInstance.onFocus(()=>{this.focused.emit()}),this.monacoInstance.onBlur(()=>{this.blurred.emit()}),a&&this.monacoInstance.focus()}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=s.VBU({type:o,selectors:[["app-monaco-editor"]],viewQuery:function(e,l){if(1&e&&s.GBs(p,5),2&e){let i;s.mGM(i=s.lsd())&&(l.editorRef=i.first)}},inputs:{filename:[1,"filename"],value:[1,"value"],tooltips:[1,"tooltips"],snippets:[1,"snippets"],options:[1,"options"],jsonSchema:[1,"jsonSchema"],jsonComments:[1,"jsonComments"],jsTypings:[1,"jsTypings"],jsDiagnostics:[1,"jsDiagnostics"],autoFocus:[1,"autoFocus"]},outputs:{valueChanged:"valueChanged",focused:"focused",blurred:"blurred"},standalone:!0,features:[s.OA$,s.aNF],decls:2,vars:0,consts:[["editor",""],[1,"editor"]],template:function(e,l){1&e&&s.nrm(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}.editor[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]})}}return o})()},318:(_,h,t)=>{t.r(h),t.d(h,{replaceContentRoutes:()=>p});var s=t(5544),r=t(9204);const d={name:"REPLACE_CONTENT_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,r.A)(function*(){const{ReplaceContentComponent:m}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-node_modules_angular_material_fesm2022_autocomplete_mjs"),t.e("common"),t.e("projects_eav-ui_src_app_replace-content_replace-content_component_ts-node_modules_rxjs_dist_e-178ebb")]).then(t.bind(t,4513));return m})()};var c=t(1195);const p=[{path:"",component:s.DialogEntryComponent,data:{dialog:d},children:[...c.Ed]}]},5544:(_,h,t)=>{t.r(h),t.d(h,{DialogEntryComponent:()=>m});var s=t(4435),r=t(8873),d=t(9148),c=t(7941),p=t(2159);let m=(()=>{class o{#e;#t;constructor(a,e,l,i,u,g){this.matDialog=a,this.viewContainerRef=e,this.router=l,this.route=i,this.context=u,this.changeDetectorRef=g,this.log=(0,s.T)({DialogEntryComponent:o});const f=this.router.getCurrentNavigation();this.#e=f?.extras?.state||{}}ngOnInit(){const a=this.log.fn("ngOnInit"),e=this.route.snapshot.data.dialog;if(null==e)throw new Error("Could not find config for dialog. Did you forget to add DialogConfig to route data?");a.a("Open dialog: "+e.name,{id:this.context.id,context:this.context}),e.getComponent().then(l=>{const i=this.matDialog;i._dialogAnimatingOpen&&i._lastDialogRef?i._lastDialogRef.afterOpened().subscribe(()=>this.openDialogComponent(e,l)):this.openDialogComponent(e,l)})}ngOnDestroy(){this.#t.close()}openDialogComponent(a,e){this.log.a(`Open dialog(initContext: ${a.initContext})`,{name:a.name,"Contextid:":this.context.log.svcId,"Context:":this.context}),a.initContext&&this.context.init(this.route),this.#t=this.matDialog.open(e,{autoFocus:!1,backdropClass:"dialog-backdrop",closeOnNavigation:!1,data:this.#e,panelClass:["dialog-panel",`dialog-panel-${a.panelSize}`,a.showScrollbar?"show-scrollbar":"no-scrollbar",...a.panelClass?a.panelClass:[]],position:{top:"0"},viewContainerRef:this.viewContainerRef}),this.#t.afterClosed().subscribe(l=>{this.log.a("Dialog was closed - name:"+a.name,{data:l});const i=l;if(null==i?.navigateUrl)if(this.route.pathFromRoot.length<=3)try{window.parent.$2sxc.totalPopup.close()}catch{}else this.router.navigate(["./"],this.route.snapshot.url.length>0?{relativeTo:this.route.parent,state:l}:{relativeTo:this.route.parent.parent,state:l});else this.router.navigate([i.navigateUrl])}),this.changeDetectorRef.markForCheck()}static{this.\u0275fac=function(e){return new(e||o)(d.rXU(c.bZ),d.rXU(d.c1b),d.rXU(p.Ix),d.rXU(p.nX),d.rXU(r.o),d.rXU(d.gRc))}}static{this.\u0275cmp=d.VBU({type:o,selectors:[["app-dialog-entry"]],standalone:!0,features:[d.Jv_([r.o]),d.aNF],decls:0,vars:0,template:function(e,l){},encapsulation:2})}}return o})()},9417:(_,h,t)=>{function s(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}t.d(h,{L:()=>s})},4038:(_,h,t)=>{t.d(h,{i:()=>s});class s{static tryParse(d){try{return JSON.parse(d)}catch{}}}},3518:(_,h,t)=>{function s(r,d,c=0){const m=r.length===c+1?d:s.bind(this,r,d,c+1),o=r[c],n="string"==typeof o.test?o.test:null,a="function"==typeof o.test?o.test:null,e=window;null!=n&&e[n]||null!=a&&a()?d():window.require([o.src],l=>{l&&!e[n]&&(e[n]=l),m()})}t.d(h,{P:()=>s})},1477:(_,h,t)=>{function s(r){try{const d=r?.Api;if(!d)return;const p={...window.$2sxc.env.header,appApi:d};window.$2sxc.env.load(p)}catch{}}t.d(h,{W:()=>s})},6666:(_,h,t)=>{t.d(h,{F:()=>s});const s={App:"App",Site:"Site",Global:"Global"}},3826:(_,h,t)=>{t.d(h,{a:()=>s});class s{static boolEquals(d,c){return d===c}static stringEquals(d,c){return d===c}static valueEquals(d,c){return d===c}static objectsEqual(d,c){if(null==d||null==c)return d===c;const p=d,m=c,o=Object.keys(p),n=Object.keys(m);return o.length===n.length&&o.every(e=>!!m.hasOwnProperty(e)&&p[e]===m[e])}static arraysEqual(d,c){return null==d||null==c?d===c:d.length===c.length&&d.every((m,o)=>d[o]===c[o])}static distinct(d,c,p){return p.indexOf(d)===c}}},2785:(_,h,t)=>{t.d(h,{o:()=>m});var s=t(7567),r=t(8172),d=t(334),c=t(6474),p=t(9148);let m=(()=>{class o extends c.D{openCodeFile(a,e,l){const i=s.Y.Develop,u={items:[{Path:a,...null!=l&&d.c.editId(l)}]},g={...this.buildHashParam(r.Q$,i),...this.buildHashParam(r.P3,e.toString()),...this.buildHashParam(r.Ul,JSON.stringify(u.items))},f=this.buildFullUrl(g);window.open(f,"_blank")}openQueryDesigner(a){const e=s.Y.PipelineDesigner,l={items:[d.c.editId(a)]},i={...this.buildHashParam(r.Q$,e),...this.buildHashParam(r.Xw,a.toString()),...this.buildHashParam(r.Ul,JSON.stringify(l.items))},u=this.buildFullUrl(i);window.open(u,"_blank")}openAppsManagement(a,e){const l={...e&&{tab:e}},i={...this.buildHashParam(r.v4,a.toString()),...this.buildHashParam(r.Q$,s.Y.Zone),...Object.keys(l).length?this.buildHashParam(r.z0,JSON.stringify(l)):""},u=this.buildFullUrl(i);window.open(u,"_blank")}openAppAdministration(a,e,l,i){const u={...l&&{tab:l},...i&&{scope:i}},g={...this.buildHashParam(r.v4,a.toString()),...this.buildHashParam(r.K7,e.toString()),...this.buildHashParam(r.Q$,s.Y.App),...Object.keys(u).length?this.buildHashParam(r.z0,JSON.stringify(u)):""},f=this.buildFullUrl(g);window.open(f,"_blank")}buildSharedHashParams(){return{...this.buildHashParam(r.v4,this.zoneId),...this.buildHashParam(r.K7,this.appId),...this.buildHashParam(r.Zm,this.context.moduleId?.toString()),...this.buildHashParam(r.p$,this.context.contentBlockId?.toString()),...this.buildHashParam(r.h9),...sessionStorage.getItem(r.tn)?this.buildHashParam(r.tn):{}}}buildHashParam(a,e){const l=a.replace(r.Pl,""),i=e??sessionStorage.getItem(a),u=encodeURIComponent(i);return{[l]:u}}buildFullUrl(a){const e=sessionStorage.getItem(r.zX),l=new URL(e),i=l.origin+l.pathname+l.search,u={...this.buildSharedHashParams(),...a};return i+Object.entries(u).reduce((f,[v,E])=>`${f}&${v}=${E}`,"").replace("&","#")}static{this.\u0275fac=(()=>{let a;return function(l){return(a||(a=p.xGo(o)))(l||o)}})()}static{this.\u0275prov=p.jDH({token:o,factory:o.\u0275fac})}}return o})()},3143:(_,h,t)=>{t.d(h,{$:()=>c});var s=t(9923),r=t(819);const d=(p,m)=>(p.push(m),p);function c(){return(0,r.N)((p,m)=>{(0,s.T)(d,[])(p).subscribe(m)})}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.05.00/dist/ng-edit/common.e438750486f3a496.js.map