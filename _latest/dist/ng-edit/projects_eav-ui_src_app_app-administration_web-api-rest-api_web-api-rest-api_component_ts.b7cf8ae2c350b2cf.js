"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts"],{9262:(f,c,i)=>{i.r(c),i.d(c,{WebApiRestApiComponent:()=>s});var a=i(9148),r=i(4456),A=i(4175),E=i(3777),m=i(3840),u=i(5175),I=i(2159),h=i(2938),P=i(9996),g=i(7037),C=i(8471),d=i(4950),D=i(5060);function e(t,l){if(1&t&&(a.j41(0,"mat-option",3),a.EFF(1),a.k0s()),2&t){const n=l.$implicit;a.Y8G("value",n.path),a.R7$(),a.SpI(" ",n.name," ")}}function p(t,l){if(1&t&&a.Z7z(0,e,2,2,"mat-option",3,a.fX1),2&t){const n=a.XpG();a.Dyx(n.webApisTypes().sort())}}let s=(()=>{class t{#e;#t;#a;constructor(n){this.fb=n,this.#e=(0,h.d)(P.F),this.#t=(0,h.d)(C.c),this.#a=this.#e.getWebApisSig(),this.webApisTypes=(0,a.EWP)(()=>{const o=this.#a(),_=this.#t.url.split("/");var T=_[_.length-1].replace("%252F","/");const O=o.find(M=>M.path===T);return O&&this.webApiTypeForm.get("webApiType").setValue(O.path),o}),this.webApiTypeForm=this.fb.group({webApiType:[""]})}openRestApi(n){n&&this.#t.navParentFirstChild([encodeURIComponent(n)])}static{this.\u0275fac=function(o){return new(o||t)(a.rXU(r.ok))}}static{this.\u0275cmp=a.VBU({type:t,selectors:[["app-web-api-rest-api"]],standalone:!0,features:[a.aNF],decls:7,vars:2,consts:[[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","webApiType",3,"valueChange"],[3,"value"]],template:function(o,_){1&o&&(a.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),a.EFF(3,"Endpoint"),a.k0s(),a.j41(4,"mat-select",2),a.bIt("valueChange",function(T){return _.openRestApi(T)}),a.DNE(5,p,2,0),a.k0s()()(),a.nrm(6,"router-outlet")),2&o&&(a.Y8G("formGroup",_.webApiTypeForm),a.R7$(5),a.vxM(_.webApisTypes()?5:-1))},dependencies:[u.Ve,d.rl,d.nJ,u.VO,D.wT,A.Hl,E.Hu,m.m_,r.X1,r.qT,r.BC,r.cb,r.j4,r.JD,I.n3,g.p],encapsulation:2})}}return t})()},9996:(f,c,i)=>{i.d(c,{F:()=>C});var a=i(9148),r=i(271),A=i(6474);const m="admin/AppFiles/asset",h="admin/ApiExplorer/AppApiFiles";let C=(()=>{class d extends A.D{get(e,p,s){return this.getHttpApiUrl(m,{params:{appId:this.appId,global:p,...this.templateIdOrPath(e,p,s)}}).pipe((0,r.T)(t=>{if("auto"===t.Type.toLocaleLowerCase())switch(t.Extension.toLocaleLowerCase()){case".cs":case".cshtml":t.Type="Razor";break;case".html":case".css":case".js":t.Type="Token"}return t}))}save(e,p,s,t){return this.http.post(this.apiUrl(m),s,{params:{appId:this.appId,global:p,...this.templateIdOrPath(e,p,t)}})}getAll(e){return this.getHttpApiUrl("admin/AppFiles/AppFiles",{params:{appId:this.appId,...e&&{mask:e}}}).pipe((0,r.T)(({Files:p})=>(p.forEach(s=>{s.Shared??=!1}),p)))}getWebApis(){return this.getHttpApiUrl(h,{params:{appId:this.appId}}).pipe((0,r.T)(({files:e})=>(e.forEach(p=>{p.isShared??=!1,p.isCompiled??=!1}),e))).pipe((0,r.T)(e=>e.map(s=>{const t=s.path.lastIndexOf("/"),l=s.path.lastIndexOf("."),n=s.path.substring(0,t),o=s.path.substring(t+1,l);return{path:s.path,folder:n,name:o,isShared:s.isShared,endpointPath:s.endpointPath,isCompiled:s.isCompiled,edition:s.edition}})))}getWebApisSig(){const e=this.getSignal(h,{params:{appId:this.appId}});return(0,a.EWP)(()=>{const s=e()?.files;return s?(s.forEach(t=>{t.isShared??=!1,t.isCompiled??=!1}),s.map(t=>{const l=t.path.lastIndexOf("/"),n=t.path.lastIndexOf("."),o=t.path.substring(0,l),_=t.path.substring(l+1,n);return{path:t.path,folder:o,name:_,isShared:t.isShared,endpointPath:t.endpointPath,isCompiled:t.isCompiled,edition:t.edition}})):[]})}getWebApiDetails(e){return this.getHttpApiUrl("admin/ApiExplorer/inspect",{params:{appId:this.appId,zoneId:this.zoneId,path:e}})}getPredefinedTemplates(e,p){return this.getHttpApiUrl("admin/AppFiles/GetTemplates",{params:{...e&&{purpose:e},...p&&{type:p}}})}getPreview(e,p,s){return this.getHttpApiUrl("admin/AppFiles/preview",{params:{appId:this.appId,path:e,templateKey:s,global:p}})}create(e,p,s){return this.http.post(this.apiUrl("admin/AppFiles/create"),{},{params:{appId:this.appId,global:p,purpose:"auto",path:e,templateKey:s}})}templateIdOrPath(e,p,s){if(/^[0-9]*$/g.test(e)){const t=s.find(l=>l.EntityId?.toString()===e&&l.IsShared===p)?.Path;return{templateId:e,...null!=t&&{path:t}}}return{path:e}}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=a.xGo(d)))(s||d)}})()}static{this.\u0275prov=a.jDH({token:d,factory:d.\u0275fac})}}return d})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.03.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts.b7cf8ae2c350b2cf.js.map