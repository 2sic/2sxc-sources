{"version":3,"sources":["C:/Projects/2sxc/eav-item-dialog-angular/node_modules/rxjs/_esm2015/internal/operators/toArray.js","./src/app/content-type-fields/edit-content-type-fields/edit-content-type-fields.helpers.ts","./src/app/content-type-fields/edit-content-type-fields/edit-content-type-fields.component.html","./src/app/content-type-fields/edit-content-type-fields/edit-content-type-fields.component.ts","C:/Projects/2sxc/eav-item-dialog-angular/node_modules/rxjs/_esm2015/internal/operators/reduce.js"],"names":["toArrayReducer","arr","item","index","push","dataTypeLabels","Boolean","label","description","Custom","DateTime","Empty","Entity","Hyperlink","Number","String","dialogRef","route","contentTypesService","contentTypesFieldsService","snackBar","hostClass","fields","filteredInputTypeOptions","dataTypeHints","inputTypeHints","fieldNamePattern","fieldNameError","findIcon","loading$","BehaviorSubject","saving$","subscription","Subscription","this","disableClose","add","backdropClick","subscribe","event","form","dirty","confirm","closeDialog","ngOnInit","contentTypeStaticName","snapshot","paramMap","get","editFieldId","parseInt","editMode","contentType$","retrieveContentType","pipe","share","fields$","mergeMap","contentType","getFields","dataTypes$","typeListRetrieve","map","rawDataTypes","dataTypes","rawDataType","name","icon","calculateDataTypes","inputTypes$","getInputTypesList","forkJoin","inputTypes","allFields","inputTypeOptions","editField","find","field","Id","i","Type","InputType","StringDefault","StaticName","IsTitle","length","SortOrder","calculateInputTypeOptions","calculateHints","next","ngOnDestroy","complete","unsubscribe","close","resetInputType","toLowerCase","DefaultSuffix","filter","option","dataType","selectedDataType","selectedInputType","inputTypeOption","inputType","save","open","updateInputType","res","duration","of","concatMap","catchError","error","accumulator","seed","arguments","source","scan","takeLast","defaultIfEmpty","acc","value","reduce","responses","EditContentTypeFieldsComponent"],"mappings":"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","file":"edit-content-type-fields-component.39378daff53e6c22df7b.js","sourcesContent":["import { reduce } from './reduce';\nfunction toArrayReducer(arr, item, index) {\n    if (index === 0) {\n        return [item];\n    }\n    arr.push(item);\n    return arr;\n}\nexport function toArray() {\n    return reduce(toArrayReducer, []);\n}\n//# sourceMappingURL=toArray.js.map","import { calculateTypeIcon } from '../content-type-fields.helpers';\r\n\r\n// tslint:disable:max-line-length\r\nconst dataTypeLabels: { [key: string]: { label: string, description: string } } = {\r\n  Boolean: { label: 'Boolean (yes/no)', description: 'Yes/no or true/false values' },\r\n  Custom: { label: 'Custom - ui-tools or custom types', description: 'Use for things like gps-pickers (which writes into multiple fields) or for custom-data which serializes something exotic into the db like an array, a custom json or anything' },\r\n  DateTime: { label: 'Date and/or time', description: 'For date, time or combined values' },\r\n  Empty: { label: 'Empty - for form-titles etc.', description: 'Use to structure your form' },\r\n  Entity: { label: 'Entity (other content-items)', description: 'One or more other content-items' },\r\n  Hyperlink: { label: 'Link / file reference', description: 'Hyperlink or reference to a picture / file' },\r\n  Number: { label: 'Number', description: 'Any kind of number' },\r\n  String: { label: 'Text / string', description: 'Any kind of text' },\r\n};\r\n// tslint:enable:max-line-length\r\n\r\nexport class DataType {\r\n  name: string;\r\n  label: string;\r\n  icon: string;\r\n  description: string;\r\n}\r\n\r\nexport function calculateDataTypes(rawDataTypes: string[]): DataType[] {\r\n  const dataTypes: DataType[] = [];\r\n  for (const rawDataType of rawDataTypes) {\r\n    dataTypes.push({\r\n      name: rawDataType,\r\n      label: dataTypeLabels[rawDataType].label,\r\n      icon: calculateTypeIcon(rawDataType),\r\n      description: dataTypeLabels[rawDataType].description,\r\n    });\r\n  }\r\n  return dataTypes;\r\n}\r\n","<div mat-dialog-title>\r\n  <div class=\"dialog-title-box\" [ngSwitch]=\"editMode\">\r\n    <ng-container *ngSwitchCase=\"undefined\">Fields</ng-container>\r\n    <ng-container *ngSwitchCase=\"true\">Edit Field</ng-container>\r\n    <ng-container *ngSwitchCase=\"false\">Add Fields</ng-container>\r\n  </div>\r\n</div>\r\n\r\n<form #ngForm=\"ngForm\" class=\"dialog-form\" *ngIf=\"(loading$ | async) === false\" (ngSubmit)=\"save()\">\r\n  <div class=\"dialog-form-content fancy-scrollbar-light\">\r\n    <div class=\"row-container\" *ngFor=\"let field of fields; index as i\">\r\n      <div class=\"edit-input\">\r\n        <mat-form-field appearance=\"standard\" color=\"accent\">\r\n          <mat-label>Name</mat-label>\r\n          <input matInput [pattern]=\"fieldNamePattern\" [(ngModel)]=\"field.StaticName\" [name]=\"'StaticName' + i\"\r\n            [disabled]=\"editMode\" #staticName=\"ngModel\">\r\n        </mat-form-field>\r\n        <ng-container *ngIf=\"staticName.touched && staticName.errors\">\r\n          <app-field-hint *ngIf=\"staticName.errors.pattern\" [isError]=\"true\">{{ fieldNameError }}</app-field-hint>\r\n        </ng-container>\r\n      </div>\r\n\r\n      <div class=\"edit-input\">\r\n        <mat-form-field appearance=\"standard\" color=\"accent\">\r\n          <mat-label>Data Type</mat-label>\r\n          <mat-select (selectionChange)=\"resetInputType(i); calculateInputTypeOptions(i); calculateHints(i)\"\r\n            [(ngModel)]=\"field.Type\" [name]=\"'Type' + i\" [disabled]=\"editMode\">\r\n            <mat-select-trigger>\r\n              <mat-icon class=\"type-icon\">{{ findIcon(field.Type) }}</mat-icon>\r\n              <span>{{ field.Type }}</span>\r\n            </mat-select-trigger>\r\n            <mat-option *ngFor=\"let dataType of dataTypes\" [value]=\"dataType.name\">\r\n              <mat-icon>{{ dataType.icon }}</mat-icon>\r\n              <span>{{ dataType.label }}</span>\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n        <app-field-hint>{{ dataTypeHints[i] }}</app-field-hint>\r\n      </div>\r\n\r\n      <div class=\"edit-input\">\r\n        <mat-form-field appearance=\"standard\" color=\"accent\">\r\n          <mat-label>Input Type</mat-label>\r\n          <mat-select (selectionChange)=\"calculateHints(i)\" [(ngModel)]=\"field.InputType\" [name]=\"'InputType' + i\">\r\n            <mat-option *ngFor=\"let option of filteredInputTypeOptions[i]\" [value]=\"option.inputType\">\r\n              {{ option.label }}</mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n        <app-field-hint>{{ inputTypeHints[i] }}</app-field-hint>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"dialog-form-actions\">\r\n    <button mat-raised-button type=\"button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button type=\"submit\" color=\"accent\" [disabled]=\"!ngForm.form.valid || (saving$ | async)\">\r\n      Save\r\n    </button>\r\n  </div>\r\n</form>\r\n","import { ChangeDetectionStrategy, Component, HostBinding, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BehaviorSubject, forkJoin, of, Subscription } from 'rxjs';\r\nimport { catchError, concatMap, filter, map, mergeMap, share, toArray } from 'rxjs/operators';\r\nimport { fieldNameError, fieldNamePattern } from '../../app-administration/constants/field-name.patterns';\r\nimport { ContentType } from '../../app-administration/models/content-type.model';\r\nimport { ContentTypesService } from '../../app-administration/services/content-types.service';\r\nimport { DataTypeConstants } from '../constants/data-type.constants';\r\nimport { InputTypeConstants } from '../constants/input-type.constants';\r\nimport { calculateTypeIcon } from '../content-type-fields.helpers';\r\nimport { Field, FieldInputTypeOption } from '../models/field.model';\r\nimport { ContentTypesFieldsService } from '../services/content-types-fields.service';\r\nimport { calculateDataTypes, DataType } from './edit-content-type-fields.helpers';\r\n\r\n@Component({\r\n  selector: 'app-edit-content-type-fields',\r\n  templateUrl: './edit-content-type-fields.component.html',\r\n  styleUrls: ['./edit-content-type-fields.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class EditContentTypeFieldsComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n  @ViewChild('ngForm', { read: NgForm }) private form: NgForm;\r\n\r\n  fields: Partial<Field>[] = [];\r\n  editMode: boolean;\r\n  dataTypes: DataType[];\r\n  filteredInputTypeOptions: FieldInputTypeOption[][] = [];\r\n  dataTypeHints: string[] = [];\r\n  inputTypeHints: string[] = [];\r\n  fieldNamePattern = fieldNamePattern;\r\n  fieldNameError = fieldNameError;\r\n  findIcon = calculateTypeIcon;\r\n  loading$ = new BehaviorSubject(true);\r\n  saving$ = new BehaviorSubject(false);\r\n\r\n  private contentType: ContentType;\r\n  private inputTypeOptions: FieldInputTypeOption[];\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<EditContentTypeFieldsComponent>,\r\n    private route: ActivatedRoute,\r\n    private contentTypesService: ContentTypesService,\r\n    private contentTypesFieldsService: ContentTypesFieldsService,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.dialogRef.disableClose = true;\r\n    this.subscription.add(\r\n      this.dialogRef.backdropClick().subscribe(event => {\r\n        if (this.form.dirty) {\r\n          const confirmed = confirm('You have unsaved changes. Are you sure you want to close this dialog?');\r\n          if (!confirmed) { return; }\r\n        }\r\n        this.closeDialog();\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnInit() {\r\n    const contentTypeStaticName = this.route.snapshot.paramMap.get('contentTypeStaticName');\r\n    const editFieldId = this.route.snapshot.paramMap.get('id') ? parseInt(this.route.snapshot.paramMap.get('id'), 10) : null;\r\n    this.editMode = (editFieldId !== null);\r\n\r\n    const contentType$ = this.contentTypesService.retrieveContentType(contentTypeStaticName).pipe(share());\r\n    const fields$ = contentType$.pipe(mergeMap(contentType => this.contentTypesFieldsService.getFields(contentType)));\r\n    const dataTypes$ = this.contentTypesFieldsService.typeListRetrieve().pipe(map(rawDataTypes => calculateDataTypes(rawDataTypes)));\r\n    const inputTypes$ = this.contentTypesFieldsService.getInputTypesList();\r\n\r\n    forkJoin([contentType$, fields$, dataTypes$, inputTypes$]).subscribe(([contentType, fields, dataTypes, inputTypes]) => {\r\n      this.contentType = contentType;\r\n      const allFields = fields;\r\n      this.dataTypes = dataTypes;\r\n      this.inputTypeOptions = inputTypes;\r\n\r\n      if (this.editMode) {\r\n        const editField = allFields.find(field => field.Id === editFieldId);\r\n        this.fields.push(editField);\r\n      } else {\r\n        for (let i = 1; i <= 8; i++) {\r\n          this.fields.push({\r\n            Id: 0,\r\n            Type: DataTypeConstants.String,\r\n            InputType: InputTypeConstants.StringDefault,\r\n            StaticName: '',\r\n            IsTitle: allFields.length === 0,\r\n            SortOrder: allFields.length + i,\r\n          });\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < this.fields.length; i++) {\r\n        this.calculateInputTypeOptions(i);\r\n        this.calculateHints(i);\r\n      }\r\n      this.loading$.next(false);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.loading$.complete();\r\n    this.saving$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  resetInputType(index: number) {\r\n    this.fields[index].InputType = this.fields[index].Type.toLowerCase() + InputTypeConstants.DefaultSuffix;\r\n  }\r\n\r\n  calculateInputTypeOptions(index: number) {\r\n    this.filteredInputTypeOptions[index] = this.inputTypeOptions\r\n      .filter(option => option.dataType === this.fields[index].Type.toLowerCase());\r\n  }\r\n\r\n  calculateHints(index: number) {\r\n    const selectedDataType = this.dataTypes.find(dataType => dataType.name === this.fields[index].Type);\r\n    const selectedInputType = this.inputTypeOptions.find(inputTypeOption => inputTypeOption.inputType === this.fields[index].InputType);\r\n    this.dataTypeHints[index] = selectedDataType ? selectedDataType.description : '';\r\n    this.inputTypeHints[index] = selectedInputType ? selectedInputType.description : '';\r\n  }\r\n\r\n  save() {\r\n    this.saving$.next(true);\r\n    this.snackBar.open('Saving...');\r\n    if (this.editMode) {\r\n      const field = this.fields[0];\r\n      this.contentTypesFieldsService.updateInputType(field.Id, field.StaticName, field.InputType).subscribe(res => {\r\n        this.saving$.next(false);\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n        this.closeDialog();\r\n      });\r\n    } else {\r\n      of(...this.fields).pipe(\r\n        filter(field => !!field.StaticName),\r\n        concatMap(field =>\r\n          this.contentTypesFieldsService.add(field, this.contentType.Id).pipe(catchError(error => of(null)))\r\n        ),\r\n        toArray(),\r\n      ).subscribe(responses => {\r\n        this.saving$.next(false);\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n        this.closeDialog();\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { scan } from './scan';\nimport { takeLast } from './takeLast';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { pipe } from '../util/pipe';\nexport function reduce(accumulator, seed) {\n    if (arguments.length >= 2) {\n        return function reduceOperatorFunctionWithSeed(source) {\n            return pipe(scan(accumulator, seed), takeLast(1), defaultIfEmpty(seed))(source);\n        };\n    }\n    return function reduceOperatorFunction(source) {\n        return pipe(scan((acc, value, index) => accumulator(acc, value, index + 1)), takeLast(1))(source);\n    };\n}\n//# sourceMappingURL=reduce.js.map"],"sourceRoot":"webpack:///"}