{"version":3,"file":"projects_eav-ui_src_app_app-administration_sub-dialogs_language-permissions_language-permissi-a91b40.js","mappings":"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","sources":["./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.html","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/languages-permissions-actions/languages-permissions-actions.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/languages-permissions-actions/languages-permissions-actions.component.html"],"sourcesContent":["import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, OnInit, signal } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from '../../../../../../core';\r\nimport { SiteLanguagePermissions } from '../../../apps-management/models/site-language.model';\r\nimport { ZoneService } from '../../../apps-management/services/zone.service';\r\nimport { GoToPermissions } from '../../../permissions';\r\nimport { ColumnDefinitions } from '../../../shared/ag-grid/column-definitions';\r\nimport { IdFieldParams } from '../../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../../shared/constants/default-grid-options.constants';\r\nimport { SxcGridModule } from '../../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogRoutingService } from '../../../shared/routing/dialog-routing.service';\r\nimport { LanguagesPermissionsActionsComponent } from './languages-permissions-actions/languages-permissions-actions.component';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions/languages-permissions-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-language-permissions',\r\n  templateUrl: './language-permissions.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    MatDialogActions,\r\n    SxcGridModule,\r\n  ],\r\n})\r\nexport class LanguagePermissionsComponent implements OnInit {\r\n  gridOptions: GridOptions = this.#buildGridOptions();\r\n\r\n  languages = signal<SiteLanguagePermissions[]>([]);\r\n\r\n  #zoneService = transient(ZoneService);\r\n  #dialogRouting = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<LanguagePermissionsComponent>,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getLanguages();\r\n    this.#dialogRouting.doOnDialogClosed(() => { this.getLanguages(); });\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialog.close();\r\n  }\r\n\r\n  openPermissions(language: SiteLanguagePermissions): void {\r\n    this.#dialogRouting.navRelative([GoToPermissions.getUrlLanguage(language.NameId)]);\r\n  }\r\n\r\n  private getLanguages(): void {\r\n    this.#zoneService.getLanguagesPermissions().subscribe({\r\n      error: () => {\r\n        this.languages.set(undefined);\r\n      },\r\n      next: (languages) => {\r\n        this.languages.set(languages);\r\n      },\r\n    });\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          field: 'Code',\r\n          filter: 'agTextColumnFilter',\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<SiteLanguagePermissions> = {\r\n              tooltipGetter: (language) => `ID: ${language.Code}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Name',\r\n          sort: 'asc',\r\n          valueGetter: (p: { data: SiteLanguagePermissions }) => p.data.Culture,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: LanguagesPermissionsActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: LanguagesPermissionsActionsParams = {\r\n              onOpenPermissions: (lang) => this.openPermissions(lang),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\n\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Language permissions</div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content nav-component-wrapper\">\r\n    <p>\r\n      If no language permissions are defined, all editors can edit all languages.\r\n      As soon as you set any language permission, only the specified users\r\n      (or users in the specified groups) can edit these permissions.\r\n    </p>\r\n    <router-outlet></router-outlet>\r\n    <div class=\"grid-wrapper\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"languages()\" [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\"></mat-dialog-actions>\r\n  </div>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { SiteLanguagePermissions } from '../../../../apps-management/models/site-language.model';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-languages-permissions-actions',\r\n  templateUrl: './languages-permissions-actions.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n    MatBadgeModule,\r\n  ],\r\n})\r\nexport class LanguagesPermissionsActionsComponent implements ICellRendererAngularComp {\r\n  language: SiteLanguagePermissions;\r\n\r\n  private params: ICellRendererParams & LanguagesPermissionsActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & LanguagesPermissionsActionsParams): void {\r\n    this.params = params;\r\n    this.language = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openPermissions(): void {\r\n    this.params.onOpenPermissions(this.language);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"language.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!language.Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n</div>"],"names":["signal","MatButtonModule","MatDialogActions","MatDialogRef","MatIconModule","RouterOutlet","transient","ZoneService","GoToPermissions","ColumnDefinitions","defaultGridOptions","SxcGridModule","DialogRoutingService","LanguagesPermissionsActionsComponent","LanguagePermissionsComponent","zoneService","dialogRouting","constructor","dialog","gridOptions","buildGridOptions","languages","ngOnInit","getLanguages","doOnDialogClosed","closeDialog","close","openPermissions","language","navRelative","getUrlLanguage","NameId","getLanguagesPermissions","subscribe","error","set","undefined","next","#buildGridOptions","columnDefs","IdWithDefaultRenderer","field","filter","cellRendererParams","params","tooltipGetter","Code","TextWide","sort","valueGetter","p","data","Culture","ActionsPinnedRight1","cellRenderer","onOpenPermissions","lang","i0","ɵɵdirectiveInject","i1","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LanguagePermissionsComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LanguagePermissionsComponent_Template_button_click_4_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","i2","MatIconButton","i3","MatIcon","i4","AgGridAngular","encapsulation","MatBadgeModule","MatRippleModule","agInit","refresh","LanguagesPermissionsActionsComponent_Template","LanguagesPermissionsActionsComponent_Template_div_click_1_listener","Permissions","Count","MatRipple","MatBadge"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}