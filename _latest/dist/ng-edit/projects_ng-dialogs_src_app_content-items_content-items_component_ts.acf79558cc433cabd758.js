(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_content-items_content-items_component_ts","projects_ng-dialogs_src_app_app-administration_services_app-dialog-config_service_ts-_31ae0","projects_ng-dialogs_src_app_app-administration_services_app-dialog-config_service_ts-_31ae1"],{2887:function(t,e,n){"use strict";n.d(e,{K:function(){return s}});var i=n(1785),o=n(2693),r=n(3582),a=n(2837),s=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.getDialogSettings=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/dialog/settings"),{params:{appId:null!=t?t:this.context.appId.toString()}})},t.\u0275fac=function(e){return new(e||t)(i.LFG(o.eN),i.LFG(r._),i.LFG(a._y))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t}()},3466:function(t,e,n){"use strict";n.d(e,{T:function(){return p}});var i=n(3475),o=n(1785),r=n(2693),a=n(3582),s=n(2837),p=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.getContentInfo=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(i.v+"Get"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),scope:t}})},t.prototype.exportParts=function(t,e,n){var o=this.dnnContext.$2sxc.http.apiUrl(i.v+"Export")+"?appId="+this.context.appId.toString()+"&zoneId="+this.context.zoneId.toString()+"&contentTypeIdsString="+t.join(";")+"&entityIdsString="+e.join(";")+"&templateIdsString="+n.join(";");window.open(o,"_blank","")},t.\u0275fac=function(e){return new(e||t)(o.LFG(r.eN),o.LFG(a._),o.LFG(s._y))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t}()},271:function(t,e,n){"use strict";n.d(e,{v:function(){return p}});var i=n(6466),o=n(1785),r=n(2693),a=n(3582),s=n(2837),p=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.getAppInfo=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(i.H+"Statistics"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})},t.prototype.exportApp=function(t,e){var n=this.dnnContext.$2sxc.http.apiUrl(i.H+"Export")+"?appId="+this.context.appId+"&zoneId="+this.context.zoneId+"&includeContentGroups="+t+"&resetAppGuid="+e;window.open(n,"_blank","")},t.prototype.exportForVersionControl=function(t,e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(i.H+"SaveData"),{params:{appid:this.context.appId.toString(),zoneId:this.context.zoneId.toString(),includeContentGroups:t.toString(),resetAppGuid:e.toString()}})},t.\u0275fac=function(e){return new(e||t)(o.LFG(r.eN),o.LFG(a._),o.LFG(s._y))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t}()},3475:function(t,e,n){"use strict";n.d(e,{v:function(){return p},z:function(){return u}});var i=n(6466),o=n(1785),r=n(2693),a=n(3582),s=n(2837),p="admin/appParts/",u=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.importAppParts=function(t){var e=new FormData;return e.append("File",t),this.http.post(this.dnnContext.$2sxc.http.apiUrl(p+"Import"),e,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})},t.prototype.resetApp=function(){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(i.H+"Reset"),{},{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})},t.\u0275fac=function(e){return new(e||t)(o.LFG(r.eN),o.LFG(a._),o.LFG(s._y))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t}()},5151:function(t,e,n){"use strict";n.d(e,{Kw:function(){return i.K},sF:function(){return o.s},vG:function(){return r.vG},bf:function(){return r.bf},Az:function(){return r.Az},TB:function(){return r.TB},cv:function(){return r.cv},nt:function(){return r.nt},h3:function(){return a.h}});var i=n(2887),o=n(2832),r=(n(3466),n(271),n(3475),n(2394)),a=n(1916);n(7915)},2394:function(t,e,n){"use strict";n.d(e,{cv:function(){return l},Az:function(){return d},nt:function(){return f},TB:function(){return h},bf:function(){return g},vG:function(){return m}});var i=n(9764),o=n(3982),r=n(1407),a=n(8442),s=n(1785),p=n(2693),u=n(3582),c=n(2837),l="admin/query/Run",d="admin/query/DebugStream",f="admin/query/Save",h="admin/query/Get",g="admin/query/DataSources",m=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.getAll=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(r.PS),{params:{appId:this.context.appId.toString(),contentType:t}})},t.prototype.importQuery=function(t){var e=this;return(0,i.D)((0,a.s)(t)).pipe((0,o.zg)(function(t){return e.http.post(e.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:e.context.appId.toString(),ContentBase64:t})}))},t.prototype.clonePipeline=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:t.toString(),appId:this.context.appId.toString()}})},t.prototype.delete=function(t){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:t.toString()}})},t.\u0275fac=function(e){return new(e||t)(s.LFG(p.eN),s.LFG(u._),s.LFG(c._y))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t}()},1916:function(t,e,n){"use strict";n.d(e,{h:function(){return s}});var i=n(1785),o=n(2693),r=n(3582),a=n(2837),s=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.getAll=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/view/all"),{params:{appId:this.context.appId.toString()}})},t.prototype.delete=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/view/delete"),{params:{appId:this.context.appId.toString(),Id:t.toString()}})},t.prototype.import=function(t){var e=new FormData;return e.append("File",t),this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/view/import"),e,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})},t.prototype.export=function(t){var e=this.dnnContext.$2sxc.http.apiUrl("admin/view/json")+"?appId="+this.context.appId+"&viewId="+t;window.open(e,"_blank","")},t.prototype.getPolymorphism=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/view/polymorphism"),{params:{appId:this.context.appId.toString()}})},t.prototype.getUsage=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/view/usage"),{params:{appId:this.context.appId.toString(),guid:t}})},t.\u0275fac=function(e){return new(e||t)(i.LFG(o.eN),i.LFG(r._),i.LFG(a._y))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t}()},7915:function(t,e,n){"use strict";n.d(e,{n:function(){return u}});var i=n(9996),o=n(1407),r=n(1785),a=n(2693),s=n(3582),p=n(2837),u=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.getAll=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(o.nu),{params:{appId:this.context.appId.toString(),global:"false",path:"",mask:"*Controller.cs",withSubfolders:"true"}}).pipe((0,i.U)(function(t){return t.map(function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("."),i=t.substring(0,e),o=t.substring(e+1,n);return{path:t,folder:i,name:o}})}))},t.prototype.create=function(t){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(o.yE),{},{params:{appId:this.context.appId.toString(),purpose:"api",global:"false",path:"api/"+t}})},t.prototype.details=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(o.BQ),{params:{path:t}})},t.\u0275fac=function(e){return new(e||t)(r.LFG(a.eN),r.LFG(s._),r.LFG(p._y))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t}()},6582:function(t,e,n){"use strict";n.r(e),n.d(e,{ContentItemsComponent:function(){return Pt}});var i=n(4762),o=n(9206),r=n(1282),a=n(8512),s=n(7570),p=n(3835),u=n(611),c=n(6238),l=n(9996),d=n(2855),f=n(3667),h=n(753),g=n(7867),m=n(6085),y=n(8579),v=n(5803),T=n(5549),x=n(9081),b=n(2420),Z=n(1785),C=n(7064),I=n(7512),k=n(7307),_=n(7070),A=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.item=t.data},t.prototype.refresh=function(t){return!0},t.prototype.clone=function(){this.params.onClone(this.item)},t.prototype.export=function(){this.params.onExport(this.item)},t.prototype.deleteItem=function(){this.params.onDelete(this.item)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-content-items-actions"]],decls:17,vars:1,consts:[[1,"actions-component"],["matRipple","","tippy","Copy",1,"like-button","highlight",3,"click"],["matRipple","","tippy","Export",1,"like-button","highlight",3,"click"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(Z.TgZ(0,"div",0),Z.TgZ(1,"div",1),Z.NdJ("click",function(){return e.clone()}),Z.TgZ(2,"mat-icon"),Z._uU(3,"file_copy"),Z.qZA(),Z.qZA(),Z.TgZ(4,"div",2),Z.NdJ("click",function(){return e.export()}),Z.TgZ(5,"mat-icon"),Z._uU(6,"cloud_download"),Z.qZA(),Z.qZA(),Z.TgZ(7,"div",3),Z.TgZ(8,"mat-icon"),Z._uU(9,"more_horiz"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(10,"mat-menu",4,5),Z.TgZ(12,"button",6),Z.NdJ("click",function(){return e.deleteItem()}),Z.TgZ(13,"mat-icon"),Z._uU(14,"delete"),Z.qZA(),Z.TgZ(15,"span"),Z._uU(16,"Delete"),Z.qZA(),Z.qZA(),Z.qZA()),2&t){var n=Z.MAs(11);Z.xp6(7),Z.Q6J("matMenuTriggerFor",n)}},directives:[C.wG,I.$,k.Hw,_.p6,_.VK,_.OP],styles:[""]}),t}(),w=n(1116);function q(t,e){if(1&t&&(Z.TgZ(0,"span",2),Z._uU(1),Z.qZA()),2&t){var n=Z.oxw();Z.xp6(1),Z.Oqu(n.entities)}}var N=function(){function t(){}return t.prototype.agInit=function(t){Array.isArray(t.value)&&(this.encodedValue=this.htmlEncode(t.value.join(", ")),t.colDef.allowMultiValue&&(this.entities=t.value.length))},t.prototype.refresh=function(t){return!0},t.prototype.htmlEncode=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-content-items-entity"]],decls:3,vars:3,consts:[[3,"tippy"],["class","more-entities",4,"ngIf"],[1,"more-entities"]],template:function(t,e){1&t&&(Z.TgZ(0,"div",0),Z.YNc(1,q,2,1,"span",1),Z._uU(2),Z.qZA()),2&t&&(Z.Q6J("tippy",e.encodedValue),Z.xp6(1),Z.Q6J("ngIf",e.entities),Z.xp6(1),Z.hij(" ",e.encodedValue,"\n"))},directives:[I.$,w.O5],styles:[".more-entities[_ngcontent-%COMP%]{padding:0 8px;border-radius:10px;border:1px solid rgba(29,39,61,.44);-webkit-user-select:none;user-select:none}"]}),t}(),M=n(7217),S=function(t){return{"hide-until-row-hover":t}},U=function(){function t(){}return t.prototype.agInit=function(t){var e,n;this.value=t.value,this.params=t,this.item=t.data,this.metadataCount=null!==(n=null===(e=this.item.Metadata)||void 0===e?void 0:e.length)&&void 0!==n?n:0,this.metadataTooltip=this.item.For?"This item is metadata for:\nType: "+this.item.For.Target+(this.item.For.Number?"\nNumber: "+this.item.For.Number:"")+(this.item.For.String?"\nString: "+this.item.For.String:"")+(this.item.For.Guid?"\nGuid: "+this.item.For.Guid:""):"This item is not metadata.",this.metadataTooltip+="\n\nThis item has "+(this.metadataCount>0?this.metadataCount:"no")+" other metadata "+(1===this.metadataCount?"item":"items")+" attached to it."},t.prototype.refresh=function(t){return!0},t.prototype.openMetadata=function(){this.params.onOpenMetadata(this.item)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-content-items-status"]],decls:7,vars:8,consts:[[1,"actions-component"],[1,"like-button","button-publish",3,"tippy"],["matRipple","",1,"like-button","highlight",3,"ngClass","tippy","click"],["matBadgePosition","below after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge"]],template:function(t,e){1&t&&(Z.TgZ(0,"div",0),Z.TgZ(1,"div",1),Z.TgZ(2,"mat-icon"),Z._uU(3),Z.qZA(),Z.qZA(),Z.TgZ(4,"div",2),Z.NdJ("click",function(){return e.openMetadata()}),Z.TgZ(5,"mat-icon",3),Z._uU(6),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(1),Z.Q6J("tippy",e.value.published?"Published":"Not published"),Z.xp6(2),Z.Oqu(e.value.published?"visibility":"visibility_off"),Z.xp6(1),Z.Q6J("ngClass",Z.VKq(6,S,0===e.metadataCount&&!e.value.metadata))("tippy",e.metadataTooltip),Z.xp6(1),Z.Q6J("matBadge",e.metadataCount>0?e.metadataCount:null),Z.xp6(1),Z.hij(" ",e.value.metadata?"loyalty":"local_offer"," "))},directives:[I.$,k.Hw,C.wG,w.mk,M.k],styles:[".button-publish[_ngcontent-%COMP%]{cursor:default!important}.button-publish[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:initial!important}.hide-until-row-hover[_ngcontent-%COMP%]{visibility:hidden}  .ag-row-hover .hide-until-row-hover{visibility:visible}"]}),t}(),J=n(7436),F=n(1041),$=function(){function t(){this.published="",this.metadata="",this.hasMetadata=""}return t.prototype.agInit=function(t){this.params=t},t.prototype.isFilterActive=function(){return""!==this.published||""!==this.metadata||""!==this.hasMetadata},t.prototype.doesFilterPass=function(t){var e,n,i,o=this.params.valueGetter(t.node);return e=""===this.published||null!=o.published&&o.published.toString()===this.published,n=""===this.metadata||null!=o.metadata&&o.metadata.toString()===this.metadata,i=""===this.hasMetadata||null!=o.hasMetadata&&o.hasMetadata.toString()===this.hasMetadata,e&&n&&i},t.prototype.getModel=function(){if(this.isFilterActive())return{filterType:"pub-meta",published:this.published,metadata:this.metadata,hasMetadata:this.hasMetadata}},t.prototype.setModel=function(t){this.published=t?t.published:"",this.metadata=t?t.metadata:"",this.hasMetadata=t?t.hasMetadata:""},t.prototype.afterGuiAttached=function(t){},t.prototype.filterChanged=function(){this.params.filterChangedCallback()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-pub-meta-filter"]],decls:27,vars:3,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(t,e){1&t&&(Z.TgZ(0,"div",0),Z._uU(1,"Published"),Z.qZA(),Z.TgZ(2,"mat-radio-group",1),Z.NdJ("ngModelChange",function(t){return e.published=t})("ngModelChange",function(){return e.filterChanged()}),Z.TgZ(3,"mat-radio-button",2),Z._uU(4,"All"),Z.qZA(),Z.TgZ(5,"mat-radio-button",3),Z._uU(6,"Published"),Z.qZA(),Z.TgZ(7,"mat-radio-button",4),Z._uU(8,"Not published"),Z.qZA(),Z.qZA(),Z.TgZ(9,"div",0),Z._uU(10,"Is Metadata"),Z.qZA(),Z.TgZ(11,"mat-radio-group",1),Z.NdJ("ngModelChange",function(t){return e.metadata=t})("ngModelChange",function(){return e.filterChanged()}),Z.TgZ(12,"mat-radio-button",2),Z._uU(13,"All"),Z.qZA(),Z.TgZ(14,"mat-radio-button",3),Z._uU(15,"Is metadata"),Z.qZA(),Z.TgZ(16,"mat-radio-button",4),Z._uU(17,"Is not metadata"),Z.qZA(),Z.qZA(),Z.TgZ(18,"div",0),Z._uU(19,"Has Metadata"),Z.qZA(),Z.TgZ(20,"mat-radio-group",1),Z.NdJ("ngModelChange",function(t){return e.hasMetadata=t})("ngModelChange",function(){return e.filterChanged()}),Z.TgZ(21,"mat-radio-button",2),Z._uU(22,"All"),Z.qZA(),Z.TgZ(23,"mat-radio-button",3),Z._uU(24,"Has metadata"),Z.qZA(),Z.TgZ(25,"mat-radio-button",4),Z._uU(26,"Has no metadata"),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(2),Z.Q6J("ngModel",e.published),Z.xp6(9),Z.Q6J("ngModel",e.metadata),Z.xp6(9),Z.Q6J("ngModel",e.hasMetadata))},directives:[J.VQ,F.JJ,F.On,J.U0],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]}),t}(),O=n(1906),G=n(1305),Q=n(8720),D=n(447),Y=n(7289),E=n(2935),P=n(3582),R=n(5223),z=n(5151),L=n(3070),j=n(3841),K=n(9572),V=n(4369),B=n(9550),H=n(7110);function X(t,e){if(1&t&&(Z.TgZ(0,"mat-option",25),Z._uU(1),Z.qZA()),2&t){var n=e.$implicit;Z.Q6J("value",n.type),Z.xp6(1),Z.hij(" ",n.label," ")}}function W(t,e){if(1&t&&(Z.TgZ(0,"mat-option",25),Z._uU(1),Z.qZA()),2&t){var n=Z.oxw(2).ngIf;Z.Q6J("value",n.formValues.targetType),Z.xp6(1),Z.hij(" ",n.formValues.targetType," ")}}function tt(t,e){if(1&t&&(Z.TgZ(0,"mat-select",23),Z.YNc(1,X,2,2,"mat-option",12),Z.YNc(2,W,2,2,"mat-option",24),Z.qZA()),2&t){var n=Z.oxw().ngIf,i=Z.oxw();Z.xp6(1),Z.Q6J("ngForOf",i.targetTypeOptions),Z.xp6(1),Z.Q6J("ngIf",n.unknownTargetType)}}function et(t,e){1&t&&Z._UZ(0,"input",26)}function nt(t,e){1&t&&(Z.TgZ(0,"app-field-hint",27),Z._uU(1," Warning: you entered an unknown target type. This may work or may not. Please be sure you know what you're doing "),Z.qZA()),2&t&&Z.Q6J("isError",!1)}function it(t,e){if(1&t&&(Z.TgZ(0,"app-field-hint",27),Z._uU(1),Z.qZA()),2&t){var n=Z.oxw().ngIf;Z.Q6J("isError",!1),Z.xp6(1),Z.Oqu(n.targetTypeHint)}}function ot(t,e){1&t&&(Z.TgZ(0,"app-field-hint",27),Z._uU(1," This field is required "),Z.qZA()),2&t&&Z.Q6J("isError",!0)}function rt(t,e){1&t&&(Z.TgZ(0,"app-field-hint",27),Z._uU(1," Must be a whole number "),Z.qZA()),2&t&&Z.Q6J("isError",!0)}function at(t,e){if(1&t&&(Z.TgZ(0,"mat-option",25),Z._uU(1),Z.qZA()),2&t){var n=e.$implicit;Z.Q6J("value",n),Z.xp6(1),Z.hij(" ",n," ")}}function st(t,e){1&t&&(Z.TgZ(0,"app-field-hint",27),Z._uU(1," This field is required "),Z.qZA()),2&t&&Z.Q6J("isError",!0)}function pt(t,e){if(1&t&&(Z.TgZ(0,"mat-option",25),Z._uU(1),Z.qZA()),2&t){var n=e.$implicit;Z.Q6J("value",n.StaticName),Z.xp6(1),Z.hij(" ",n.Label," ")}}function ut(t,e){if(1&t&&(Z.TgZ(0,"mat-form-field",7),Z.TgZ(1,"mat-label"),Z._uU(2,"Content Type"),Z.qZA(),Z.TgZ(3,"mat-select",28),Z.YNc(4,pt,2,2,"mat-option",12),Z.qZA(),Z.qZA()),2&t){var n=Z.oxw().ngIf;Z.xp6(3),Z.Q6J("placeholder",n.contentTypes.length?"":"No items found"),Z.xp6(1),Z.Q6J("ngForOf",n.contentTypes)}}function ct(t,e){1&t&&Z.GkF(0)}function lt(t,e){if(1&t&&(Z.TgZ(0,"mat-option",25),Z._uU(1),Z.qZA()),2&t){var n=e.$implicit;Z.Q6J("value",n.Guid),Z.xp6(1),Z.AsE(" ",n.Title," (",n.Id,") ")}}function dt(t,e){if(1&t&&(Z.TgZ(0,"mat-select",34),Z.YNc(1,lt,2,3,"mat-option",12),Z.qZA()),2&t){var n=Z.oxw(3).ngIf;Z.Q6J("placeholder",n.contentItems.length?"":"No items found"),Z.xp6(1),Z.Q6J("ngForOf",n.contentItems)}}function ft(t,e){1&t&&Z._UZ(0,"input",35)}function ht(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,dt,2,2,"mat-select",32),Z.YNc(2,ft,1,0,"input",33),Z.BQk()),2&t){var n=Z.oxw(2).ngIf;Z.xp6(1),Z.Q6J("ngIf",n.guidedKey),Z.xp6(1),Z.Q6J("ngIf",!n.guidedKey)}}function gt(t,e){if(1&t&&(Z.TgZ(0,"mat-option",25),Z._uU(1),Z.qZA()),2&t){var n=e.$implicit;Z.Q6J("value",n.StaticName),Z.xp6(1),Z.hij(" ",n.Label," ")}}function mt(t,e){if(1&t&&(Z.TgZ(0,"mat-select",34),Z.YNc(1,gt,2,2,"mat-option",12),Z.qZA()),2&t){var n=Z.oxw(3).ngIf;Z.Q6J("placeholder",n.contentTypes.length?"":"No items found"),Z.xp6(1),Z.Q6J("ngForOf",n.contentTypes)}}function yt(t,e){1&t&&Z._UZ(0,"input",35)}function vt(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,mt,2,2,"mat-select",32),Z.YNc(2,yt,1,0,"input",33),Z.BQk()),2&t){var n=Z.oxw(2).ngIf;Z.xp6(1),Z.Q6J("ngIf",n.guidedKey),Z.xp6(1),Z.Q6J("ngIf",!n.guidedKey)}}function Tt(t,e){1&t&&Z.GkF(0)}function xt(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,Tt,1,0,"ng-container",36),Z.BQk()),2&t){Z.oxw(2);var n=Z.MAs(34);Z.xp6(1),Z.Q6J("ngTemplateOutlet",n)}}function bt(t,e){if(1&t&&(Z.ynx(0,29),Z.YNc(1,ht,3,2,"ng-container",30),Z.YNc(2,vt,3,2,"ng-container",30),Z.YNc(3,xt,2,1,"ng-container",31),Z.BQk()),2&t){var n=Z.oxw().ngIf,i=Z.oxw();Z.Q6J("ngSwitch",n.formValues.targetType),Z.xp6(1),Z.Q6J("ngSwitchCase",i.eavConstants.metadata.entity.type),Z.xp6(1),Z.Q6J("ngSwitchCase",i.eavConstants.metadata.contentType.type)}}function Zt(t,e){1&t&&Z._UZ(0,"input",35)}function Ct(t,e){1&t&&Z._UZ(0,"input",38)}function It(t,e){if(1&t&&(Z.YNc(0,Zt,1,0,"input",33),Z.YNc(1,Ct,1,0,"input",37)),2&t){var n=Z.oxw().ngIf,i=Z.oxw();Z.Q6J("ngIf",n.formValues.keyType!==i.eavConstants.keyTypes.number),Z.xp6(1),Z.Q6J("ngIf",n.formValues.keyType===i.eavConstants.keyTypes.number)}}var kt=function(t){return{active:t}};function _t(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"div",39),Z.TgZ(1,"button",40),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw(2).toggleGuidedKey(!0)}),Z.TgZ(2,"mat-icon"),Z._uU(3,"search"),Z.qZA(),Z.qZA(),Z.TgZ(4,"button",41),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw(2).toggleGuidedKey(!1)}),Z.TgZ(5,"mat-icon"),Z._uU(6,"text_fields"),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){var i=Z.oxw().ngIf;Z.xp6(1),Z.Q6J("ngClass",Z.VKq(2,kt,i.guidedKey)),Z.xp6(3),Z.Q6J("ngClass",Z.VKq(4,kt,!i.guidedKey))}}function At(t,e){1&t&&(Z.TgZ(0,"app-field-hint",27),Z._uU(1," This field is required "),Z.qZA()),2&t&&Z.Q6J("isError",!0)}function wt(t,e){1&t&&(Z.TgZ(0,"app-field-hint",27),Z._uU(1," Must be a whole number "),Z.qZA()),2&t&&Z.Q6J("isError",!0)}function qt(t,e){1&t&&(Z.TgZ(0,"app-field-hint",27),Z._uU(1," Must be a valid GUID "),Z.qZA()),2&t&&Z.Q6J("isError",!0)}function Nt(t,e){if(1&t){var n=Z.EpF();Z.ynx(0),Z.TgZ(1,"div",1),Z.TgZ(2,"div",2),Z._uU(3,"Create Metadata"),Z.qZA(),Z.qZA(),Z.TgZ(4,"p",3),Z._uU(5," This is a special operation to add an item which is metadata for another item, see "),Z.TgZ(6,"a",4),Z._uU(7,"docs"),Z.qZA(),Z._uU(8,". "),Z.qZA(),Z.TgZ(9,"form",5),Z.TgZ(10,"div",6),Z.TgZ(11,"mat-form-field",7),Z.TgZ(12,"mat-label"),Z._uU(13,"Target"),Z.qZA(),Z.YNc(14,tt,3,2,"mat-select",8),Z.YNc(15,et,1,0,"input",9),Z.qZA(),Z.YNc(16,nt,2,1,"app-field-hint",10),Z.YNc(17,it,2,2,"app-field-hint",10),Z.YNc(18,ot,2,1,"app-field-hint",10),Z.YNc(19,rt,2,1,"app-field-hint",10),Z.TgZ(20,"mat-form-field",7),Z.TgZ(21,"mat-label"),Z._uU(22,"Key type"),Z.qZA(),Z.TgZ(23,"mat-select",11),Z.YNc(24,at,2,2,"mat-option",12),Z.qZA(),Z.qZA(),Z.YNc(25,st,2,1,"app-field-hint",10),Z.YNc(26,ut,5,2,"mat-form-field",13),Z.TgZ(27,"mat-form-field",7),Z.TgZ(28,"mat-label"),Z._uU(29,"Key"),Z.qZA(),Z.YNc(30,ct,1,0,"ng-container",14),Z.YNc(31,bt,4,3,"ng-template",null,15,Z.W1O),Z.YNc(33,It,2,2,"ng-template",null,16,Z.W1O),Z.YNc(35,_t,7,6,"div",17),Z.qZA(),Z.YNc(36,At,2,1,"app-field-hint",10),Z.YNc(37,wt,2,1,"app-field-hint",10),Z.YNc(38,qt,2,1,"app-field-hint",10),Z.qZA(),Z.TgZ(39,"div",18),Z.TgZ(40,"mat-slide-toggle",19),Z.NdJ("change",function(t){return Z.CHM(n),Z.oxw().toggleGuidedMode(t)}),Z._uU(41),Z.qZA(),Z._UZ(42,"div",20),Z.TgZ(43,"button",21),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().closeDialog()}),Z._uU(44,"Cancel"),Z.qZA(),Z.TgZ(45,"button",22),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().confirm()}),Z._uU(46," Confirm "),Z.qZA(),Z.qZA(),Z.qZA(),Z.BQk()}if(2&t){var i=e.ngIf,o=Z.MAs(32),r=Z.MAs(34),a=Z.oxw();Z.xp6(9),Z.Q6J("formGroup",a.form),Z.xp6(5),Z.Q6J("ngIf",i.guidedMode),Z.xp6(1),Z.Q6J("ngIf",!i.guidedMode),Z.xp6(1),Z.Q6J("ngIf",a.form.controls.targetType.touched&&!a.form.controls.targetType.invalid&&i.unknownTargetType),Z.xp6(1),Z.Q6J("ngIf",i.targetTypeHint),Z.xp6(1),Z.Q6J("ngIf",a.form.controls.targetType.touched&&(null==a.form.controls.targetType.errors?null:a.form.controls.targetType.errors.required)),Z.xp6(1),Z.Q6J("ngIf",a.form.controls.targetType.touched&&(null==a.form.controls.targetType.errors?null:a.form.controls.targetType.errors.pattern)),Z.xp6(5),Z.Q6J("ngForOf",i.keyTypeOptions),Z.xp6(1),Z.Q6J("ngIf",a.form.controls.keyType.touched&&(null==a.form.controls.keyType.errors?null:a.form.controls.keyType.errors.required)),Z.xp6(1),Z.Q6J("ngIf",i.guidedMode&&i.formValues.targetType===a.eavConstants.metadata.entity.type),Z.xp6(4),Z.Q6J("ngIf",i.guidedMode)("ngIfThen",o)("ngIfElse",r),Z.xp6(5),Z.Q6J("ngIf",i.guidedMode&&i.guidedKeyExists),Z.xp6(1),Z.Q6J("ngIf",a.form.controls.key.touched&&(null==a.form.controls.key.errors?null:a.form.controls.key.errors.required)),Z.xp6(1),Z.Q6J("ngIf",a.form.controls.key.touched&&(null==a.form.controls.key.errors?null:a.form.controls.key.errors.patternWholeNumber)),Z.xp6(1),Z.Q6J("ngIf",a.form.controls.key.touched&&(null==a.form.controls.key.errors?null:a.form.controls.key.errors.patternGuid)),Z.xp6(2),Z.Q6J("tippy",i.guidedMode?"Guided mode helps you select options that work":"Manual mode is for advanced uses and allows you to insert any values")("checked",i.guidedMode),Z.xp6(1),Z.hij(" ",i.guidedMode?"Guided":"Manual"," "),Z.xp6(4),Z.Q6J("disabled",!a.form.valid)}}var Mt=function(){function t(t,e,n,i){this.dialogRef=t,this.context=e,this.contentItemsService=n,this.contentTypesService=i,this.hostClass="dialog-component",this.eavConstants=v.Z}return t.prototype.ngOnInit=function(){var t,e=this;this.subscription=new s.w,this.targetTypeOptions=Object.values(v.Z.metadata).map(function(t){return(0,i.pi)({},t)}),this.keyTypeOptions=Object.values(v.Z.keyTypes),this.keyTypeOptions$=new a.X([]),this.guidedMode$=new a.X(!0),this.contentItems$=new a.X([]),this.contentTypes$=new a.X([]),this.guidedKey$=new a.X(!0),this.form=new F.cw({}),this.form.addControl("targetType",new F.NI(v.Z.metadata.entity.type,[F.kI.required,F.kI.pattern(/^[0-9]+$/)])),this.form.addControl("keyType",new F.NI(v.Z.metadata.entity.keyType,[F.kI.required])),this.form.addControl("contentTypeForContentItems",new F.NI(null)),this.form.addControl("key",new F.NI(null,[F.kI.required,(t=this.form,function(e){if(!e.value)return null;var n=t.controls.keyType.value,i=e.value.toString();switch(n){case v.Z.keyTypes.number:return/^[0-9]+$/.test(i)?null:{patternWholeNumber:!0};case v.Z.keyTypes.guid:var o=["{","}"].some(function(t){return i.includes(t)}),r=i.substring(o?1:0,o?i.length-1:i.length);return(0,Y.M)().test(r)?null:{patternGuid:!0};case v.Z.keyTypes.string:default:return null}})])),this.contentTypesService.retrieveContentTypes(v.Z.scopes.default.value).subscribe(function(t){e.contentTypes$.next(t)}),this.subscription.add((0,O.T)(this.form.controls.targetType.valueChanges.pipe((0,Q.x)()),this.form.controls.keyType.valueChanges.pipe((0,Q.x)())).subscribe(function(){e.guidedKey$.next(!0),null!=e.form.getRawValue().key&&e.form.patchValue({key:null})})),this.subscription.add(this.form.controls.contentTypeForContentItems.valueChanges.pipe((0,c.O)(this.form.controls.contentTypeForContentItems.value),(0,Q.x)()).subscribe(function(t){var n=e.form.getRawValue();n.targetType===v.Z.metadata.entity.type&&null!=n.key&&e.form.patchValue({key:null}),e.contentItemsService.getAll(t).subscribe(function(t){e.contentItems$.next(t)})}));var n=this.form.valueChanges.pipe((0,c.O)(this.form.getRawValue()),(0,l.U)(function(){return e.form.getRawValue()}),(0,Q.x)(D.iX.objectsEqual));this.subscription.add((0,G.aj)([n,this.guidedMode$]).subscribe(function(t){var n=(0,i.CR)(t,2),o=n[0],r=n[1],a=e.targetTypeOptions.find(function(t){return t.type===o.targetType}),s=r&&a?[a.keyType]:(0,i.ev)([],(0,i.CR)(e.keyTypeOptions));D.iX.arraysEqual(s,e.keyTypeOptions$.value)||e.keyTypeOptions$.next(s);var p={};e.keyTypeOptions$.value.includes(o.keyType)||(p.keyType=e.keyTypeOptions$.value[0]);var u=r&&o.targetType===v.Z.metadata.app.type;u&&o.key!==e.context.appId&&(p.key=e.context.appId),Object.keys(p).length&&e.form.patchValue(p),D.iX.disableControl(e.form.controls.keyType,r&&e.keyTypeOptions$.value.length<=1),D.iX.disableControl(e.form.controls.key,u)})),this.templateVars$=(0,G.aj)([(0,G.aj)([this.guidedMode$,this.keyTypeOptions$,this.contentItems$,this.contentTypes$]),(0,G.aj)([n,this.guidedKey$])]).pipe((0,l.U)(function(t){var n,o=(0,i.CR)(t,2),r=(0,i.CR)(o[0],4),a=r[0],s=r[1],p=r[2],u=r[3],c=(0,i.CR)(o[1],2),l=c[0],d=c[1];return{guidedMode:a,unknownTargetType:!e.targetTypeOptions.some(function(t){return t.type===l.targetType}),targetTypeHint:a&&(null===(n=e.targetTypeOptions.find(function(t){return t.type===l.targetType}))||void 0===n?void 0:n.hint),keyTypeOptions:s,guidedKey:d,guidedKeyExists:[v.Z.metadata.entity.type,v.Z.metadata.contentType.type].includes(l.targetType),formValues:l,contentItems:p,contentTypes:u}}))},t.prototype.ngOnDestroy=function(){this.guidedMode$.complete(),this.keyTypeOptions$.complete(),this.contentItems$.complete(),this.contentTypes$.complete(),this.guidedKey$.complete(),this.subscription.unsubscribe()},t.prototype.closeDialog=function(t){this.dialogRef.close(t)},t.prototype.toggleGuidedKey=function(t){this.guidedKey$.next(t)},t.prototype.toggleGuidedMode=function(t){this.guidedMode$.next(t.checked)},t.prototype.confirm=function(){var t,e,n=this.form.getRawValue(),i={target:null!==(e=null===(t=this.targetTypeOptions.find(function(t){return t.type===n.targetType}))||void 0===t?void 0:t.target)&&void 0!==e?e:n.targetType.toString(),keyType:n.keyType,key:n.keyType===v.Z.keyTypes.guid?n.key.replace(/{|}/g,""):n.key.toString()};this.closeDialog(i)},t.\u0275fac=function(e){return new(e||t)(Z.Y36(E.so),Z.Y36(P._),Z.Y36(R.l),Z.Y36(z.sF))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-create-metadata-dialog"]],hostVars:1,hostBindings:function(t,e){2&t&&Z.Ikx("className",e.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","http://r.2sxc.org/metadata","target","_blank"],[1,"dialog-form",3,"formGroup"],[1,"dialog-form-content","fancy-scrollbar-light"],["appearance","standard","color","accent"],["formControlName","targetType","required","",4,"ngIf"],["matInput","","type","number","min","0","formControlName","targetType","required","",4,"ngIf"],[3,"isError",4,"ngIf"],["formControlName","keyType","required",""],[3,"value",4,"ngFor","ngForOf"],["appearance","standard","color","accent",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["specialKeyInputs",""],["defaultKeyInput",""],["matSuffix","","class","selection-suffix",4,"ngIf"],[1,"dialog-form-actions"],["color","accent",3,"tippy","checked","change"],[1,"spacer"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["formControlName","targetType","required",""],[3,"value",4,"ngIf"],[3,"value"],["matInput","","type","number","min","0","formControlName","targetType","required",""],[3,"isError"],["formControlName","contentTypeForContentItems",3,"placeholder"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["formControlName","key","required","",3,"placeholder",4,"ngIf"],["matInput","","type","text","formControlName","key","required","",4,"ngIf"],["formControlName","key","required","",3,"placeholder"],["matInput","","type","text","formControlName","key","required",""],[4,"ngTemplateOutlet"],["matInput","","type","number","formControlName","key","required","",4,"ngIf"],["matInput","","type","number","formControlName","key","required",""],["matSuffix","",1,"selection-suffix"],["mat-icon-button","","type","button","tippy","Select option",3,"ngClass","click"],["mat-icon-button","","type","button","tippy","Insert value",3,"ngClass","click"]],template:function(t,e){1&t&&(Z.YNc(0,Nt,47,21,"ng-container",0),Z.ALo(1,"async")),2&t&&Z.Q6J("ngIf",Z.lcZ(1,1,e.templateVars$))},directives:[w.O5,E.uh,F._Y,F.JL,F.sg,L.KE,L.hX,j.gD,F.JJ,F.u,F.Q7,w.sg,K.Rr,I.$,V.lW,C.ey,B.Nt,F.qQ,F.wV,F.Fj,H.Y,w.RF,w.n9,w.ED,w.tP,L.R9,w.mk,k.Hw],pipes:[w.Ov],styles:[".dialog-form-content[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]:not(:first-of-type){margin-top:8px}.selection-suffix[_ngcontent-%COMP%]{display:flex}.selection-suffix[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#002753;color:#fff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t}(),St=n(2832),Ut=n(7553),Jt=n(3653),Ft=n(3589),$t=n(9886),Ot=n(6146),Gt=n(9825),Qt=n(5921),Dt=n(6207);function Yt(t,e){1&t&&(Z._UZ(0,"div",14),Z.ALo(1,"safeHtml")),2&t&&Z.Q6J("innerHTML",Z.lcZ(1,1,e.ngIf),Z.oJD)}function Et(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"button",15),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().debugFilter()}),Z.TgZ(1,"mat-icon"),Z._uU(2,"filter_list"),Z.qZA(),Z.TgZ(3,"span"),Z._uU(4,"Filter"),Z.qZA(),Z.qZA()}}var Pt=function(){function t(t,e,n,r,p,u,c,l,d,f,h,v){this.dialogRef=t,this.contentTypesService=e,this.router=n,this.route=r,this.contentItemsService=p,this.entitiesService=u,this.contentExportService=c,this.snackBar=l,this.globalConfigService=d,this.dialog=f,this.viewContainerRef=h,this.changeDetectorRef=v,this.contentType$=new a.X(null),this.items$=new a.X(null),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.modules=o.F$,this.gridOptions=(0,i.pi)((0,i.pi)({},y.f),{frameworkComponents:{pubMetaFilterComponent:$,booleanFilterComponent:g.U,idFieldComponent:m.m,contentItemsStatusComponent:U,contentItemsActionsComponent:A,contentItemsEntityComponent:N}}),this.gridApi$=new a.X(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName"),this.subscription=new s.w}return t.prototype.ngOnInit=function(){this.fetchContentType(),this.fetchItems(),this.fetchColumns(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.items$.complete(),this.gridApi$.complete(),this.subscription.unsubscribe()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.onGridReady=function(t){this.gridApi$.next(t.api)},t.prototype.fetchContentType=function(){var t=this;this.contentTypesService.retrieveContentType(this.contentTypeStaticName).subscribe(function(e){t.contentType$.next(e)})},t.prototype.fetchItems=function(){var t=this;this.contentItemsService.getAll(this.contentTypeStaticName).subscribe(function(e){t.items$.next(e)})},t.prototype.fetchColumns=function(){var t=this;this.contentItemsService.getColumns(this.contentTypeStaticName).subscribe(function(e){var n=t.buildColumnDefs(e),o=function(t){var e,n;if(t){var o;"="===t.charAt(t.length-1)&&(t=atob(t));try{o=JSON.parse(t)}catch(d){console.error("Can't parse JSON with filters from url:",t)}if(o){var r={};(o.IsPublished||o.IsMetadata)&&(r.Status=l={filterType:"pub-meta",published:o.IsPublished?o.IsPublished:"",metadata:o.IsMetadata?o.IsMetadata:"",hasMetadata:""});var a=Object.keys(o);try{for(var s=(0,i.XA)(a),p=s.next();!p.done;p=s.next()){var u=p.value;if("IsPublished"!==u&&"IsMetadata"!==u){var c=o[u];if("string"==typeof c)r[u]=l={filterType:"text",type:"equals",filter:c};else if("number"==typeof c)r[u]=l={filterType:"number",type:"equals",filter:c,filterTo:null};else if("boolean"==typeof c){var l={filterType:"boolean",filter:c.toString()};r[u]=l}}}}catch(f){e={error:f}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r}}}(sessionStorage.getItem(T.JA));t.gridApi$.value?t.setColumnDefs(n,o):t.gridApi$.pipe((0,p.h)(function(t){return null!=t}),(0,u.q)(1)).subscribe(function(e){t.setColumnDefs(n,o)})})},t.prototype.setColumnDefs=function(t,e){this.gridApi$.value.setColumnDefs(t),e&&((0,x.P)("Will try to apply filter:",e),this.gridApi$.value.setFilterModel(e))},t.prototype.openMetadata=function(t){var e=h.U.getUrlEntity(t.Guid,"Metadata for Entity: "+t._Title+" ("+t.Id+")",this.contentTypeStaticName);this.router.navigate([e],{relativeTo:this.route})},t.prototype.editItem=function(t){var e=null==t?void 0:t.data,n=(0,b.f)({items:[null==e?{ContentTypeName:this.contentTypeStaticName}:{EntityId:e.Id}]});this.router.navigate(["edit/"+n],{relativeTo:this.route})},t.prototype.exportContent=function(){var t=this.gridApi$.value.getFilterModel(),e=Object.keys(t).length>0,n=[];e&&this.gridApi$.value.forEachNodeAfterFilterAndSort(function(t){n.push(t.data.Id)}),this.router.navigate(["export/"+this.contentTypeStaticName+(n.length>0?"/"+n:"")],{relativeTo:this.route})},t.prototype.filesDropped=function(t){var e=t[0];switch(e.name.substring(e.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":this.importContent(t);break;case"json":this.importItem(t)}},t.prototype.importContent=function(t){this.router.navigate([this.contentTypeStaticName+"/import"],{relativeTo:this.route,state:{files:t}})},t.prototype.importItem=function(t){this.router.navigate(["import"],{relativeTo:this.route,state:{files:t}})},t.prototype.createMetadata=function(){var t=this;this.dialog.open(Mt,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().pipe((0,u.q)(1)).subscribe(function(e){if(null!=e){var n={items:[{ContentTypeName:t.contentTypeStaticName,For:(0,i.pi)((0,i.pi)((0,i.pi)({Target:e.target},e.keyType===v.Z.keyTypes.guid&&{Guid:e.key}),e.keyType===v.Z.keyTypes.number&&{Number:parseInt(e.key,10)}),e.keyType===v.Z.keyTypes.string&&{String:e.key})}]},o=(0,b.f)(n);t.router.navigate(["edit/"+o],{relativeTo:t.route}),t.changeDetectorRef.markForCheck()}})},t.prototype.debugFilter=function(){console.warn("Current filter:",this.gridApi$.value.getFilterModel()),alert("Check console for filter information")},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe((0,p.h)(function(t){return t instanceof r.m2}),(0,c.O)(!!this.route.snapshot.firstChild),(0,l.U)(function(){return!!t.route.snapshot.firstChild}),(0,d.G)(),(0,p.h)(function(t){var e=(0,i.CR)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchItems()}))},t.prototype.buildColumnDefs=function(t){var e,n,o=[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(t){return"ID: "+t.Id+"\nRepoID: "+t._RepositoryId+"\nGUID: "+t.Guid}}},{headerName:"Status",field:"Status",width:80,headerClass:"dense",cellClass:"secondary-action no-padding",filter:"pubMetaFilterComponent",cellRenderer:"contentItemsStatusComponent",valueGetter:this.valueGetterStatus,cellRendererParams:{onOpenMetadata:this.openMetadata.bind(this)}},{headerName:"Item (Entity)",field:"_Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,filter:"agTextColumnFilter",onCellClicked:this.editItem.bind(this)},{headerName:"Stats",headerTooltip:"Used by others / uses others",field:"_Used",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.valueGetterUsage},{cellClass:"secondary-action no-padding",width:120,cellRenderer:"contentItemsActionsComponent",pinned:"right",cellRendererParams:{onClone:this.clone.bind(this),onExport:this.export.bind(this),onDelete:this.delete.bind(this)}}];try{for(var r=(0,i.XA)(t),a=r.next();!a.done;a=r.next()){var s=a.value,p={headerName:s.StaticName,field:s.StaticName,flex:2,minWidth:250,cellClass:"no-outline",sortable:!0};switch(s.Type){case f.Q.Entity:try{p.allowMultiValue=s.Metadata.Entity.AllowMultiValue}catch(u){p.allowMultiValue=!0}p.cellRenderer="contentItemsEntityComponent",p.valueGetter=this.valueGetterEntityField,p.filter="agTextColumnFilter";break;case f.Q.DateTime:try{p.useTimePicker=s.Metadata.DateTime.UseTimePicker}catch(u){p.useTimePicker=!1}p.valueGetter=this.valueGetterDateTime,p.filter="agTextColumnFilter";break;case f.Q.Boolean:p.valueGetter=this.valueGetterBoolean,p.filter="booleanFilterComponent";break;case f.Q.Number:p.filter="agNumberColumnFilter";break;default:p.filter="agTextColumnFilter"}o.push(p)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return o},t.prototype.clone=function(t){var e=(0,b.f)({items:[{ContentTypeName:this.contentTypeStaticName,DuplicateEntity:t.Id}]});this.router.navigate(["edit/"+e],{relativeTo:this.route})},t.prototype.export=function(t){this.contentExportService.exportEntity(t.Id,this.contentTypeStaticName,!0)},t.prototype.delete=function(t){var e=this;confirm("Delete '"+t._Title+"' ("+t._RepositoryId+")?")&&(this.snackBar.open("Deleting..."),this.entitiesService.delete(this.contentTypeStaticName,t._RepositoryId,!1).subscribe({next:function(){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchItems()},error:function(n){e.snackBar.dismiss(),confirm(n.error.ExceptionMessage+"\n\nDo you want to force delete '"+t._Title+"' ("+t._RepositoryId+")?")&&(e.snackBar.open("Deleting..."),e.entitiesService.delete(e.contentTypeStaticName,t._RepositoryId,!0).subscribe(function(){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchItems()}))}}))},t.prototype.valueGetterStatus=function(t){var e=t.data;return{published:e.IsPublished,metadata:!!e.For,hasMetadata:!!e.Metadata&&e.Metadata.length>0}},t.prototype.valueGetterUsage=function(t){var e=t.data;return e._Used+" / "+e._Uses},t.prototype.valueGetterEntityField=function(t){var e=t.data[t.colDef.field];return 0===e.length?null:e.map(function(t){return t.Title})},t.prototype.valueGetterDateTime=function(t){var e=t.data[t.colDef.field];return e?t.colDef.useTimePicker?e.substring(0,19).replace("T"," "):e.substring(0,10):null},t.prototype.valueGetterBoolean=function(t){var e=t.data[t.colDef.field];return"boolean"!=typeof e?null:e.toString()},t.\u0275fac=function(e){return new(e||t)(Z.Y36(E.so),Z.Y36(St.s),Z.Y36(r.F0),Z.Y36(r.gz),Z.Y36(R.l),Z.Y36(Ut.g),Z.Y36(Jt.i),Z.Y36(Ft.ux),Z.Y36($t.bE),Z.Y36(E.uw),Z.Y36(Z.s_b),Z.Y36(Z.sBO))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-content-items"]],decls:41,vars:15,consts:[["appToggleDebug","",1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"innerHTML",4,"ngIf"],[1,"grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","gridReady","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","tippy","Export xml list",3,"click"],["mat-button","","tippy","Import xml list",3,"click"],["mat-button","","tippy","Import single json item",3,"click"],["mat-button","","tippy","Create metadata",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",3,"click",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Add item",1,"grid-fab",3,"click"],[3,"innerHTML"],["mat-button","","color","accent","tippy","Print filter to console",3,"click"]],template:function(t,e){var n,i;1&t&&(Z.TgZ(0,"div",0),Z.TgZ(1,"div",1),Z.TgZ(2,"div",2),Z.TgZ(3,"div"),Z._uU(4),Z.ALo(5,"async"),Z.qZA(),Z.TgZ(6,"button",3),Z.NdJ("click",function(){return e.closeDialog()}),Z.TgZ(7,"mat-icon"),Z._uU(8,"close"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z._UZ(9,"router-outlet"),Z.YNc(10,Yt,2,3,"div",4),Z.ALo(11,"async"),Z.TgZ(12,"div",5),Z.TgZ(13,"ag-grid-angular",6),Z.NdJ("gridReady",function(t){return e.onGridReady(t)})("filesDropped",function(t){return e.filesDropped(t)}),Z.ALo(14,"async"),Z.qZA(),Z.TgZ(15,"div",7),Z.TgZ(16,"button",8),Z.NdJ("click",function(){return e.exportContent()}),Z.TgZ(17,"mat-icon"),Z._uU(18,"cloud_download"),Z.qZA(),Z.TgZ(19,"span"),Z._uU(20,"Data"),Z.qZA(),Z.qZA(),Z.TgZ(21,"button",9),Z.NdJ("click",function(){return e.importContent()}),Z.TgZ(22,"mat-icon"),Z._uU(23,"cloud_upload"),Z.qZA(),Z.TgZ(24,"span"),Z._uU(25,"Data"),Z.qZA(),Z.qZA(),Z.TgZ(26,"button",10),Z.NdJ("click",function(){return e.importItem()}),Z.TgZ(27,"mat-icon"),Z._uU(28,"cloud_upload"),Z.qZA(),Z.TgZ(29,"span"),Z._uU(30,"Item"),Z.qZA(),Z.qZA(),Z.TgZ(31,"button",11),Z.NdJ("click",function(){return e.createMetadata()}),Z.TgZ(32,"mat-icon"),Z._uU(33,"local_offer"),Z.qZA(),Z.TgZ(34,"span"),Z._uU(35,"Create Metadata"),Z.qZA(),Z.qZA(),Z.YNc(36,Et,5,0,"button",12),Z.ALo(37,"async"),Z.qZA(),Z.TgZ(38,"button",13),Z.NdJ("click",function(){return e.editItem(null)}),Z.TgZ(39,"mat-icon"),Z._uU(40,"add"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(4),Z.hij("",null==(n=Z.lcZ(5,7,e.contentType$))?null:n.Name," Data"),Z.xp6(6),Z.Q6J("ngIf",null==(i=Z.lcZ(11,9,e.contentType$))||null==i.Properties?null:i.Properties.ListInstructions),Z.xp6(3),Z.Q6J("rowData",Z.lcZ(14,11,e.items$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","xml,json"),Z.xp6(23),Z.Q6J("ngIf",Z.lcZ(37,13,e.debugEnabled$)))},directives:[Ot.D,E.uh,V.lW,I.$,k.Hw,r.lC,w.O5,Gt.N8,Qt.z],pipes:[w.Ov,Dt.z],styles:[""]}),t}()},6466:function(t,e,n){"use strict";n.d(e,{H:function(){return s},a:function(){return p}});var i=n(1785),o=n(2693),r=n(3582),a=n(2837),s="admin/app/",p=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.importApp=function(t,e){var n=new FormData;return n.append("File",t),n.append("Name",e||""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(s+"Import"),n,{params:{zoneId:this.context.zoneId.toString()}})},t.\u0275fac=function(e){return new(e||t)(i.LFG(o.eN),i.LFG(r._),i.LFG(a._y))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t}()},6085:function(t,e,n){"use strict";n.d(e,{m:function(){return u}});var i=n(8838),o=n(1785),r=n(3589),a=n(7064),s=n(7512),p=n(7307),u=function(){function t(t){this.snackBar=t}return t.prototype.agInit=function(t){this.id=t.value,this.tooltip=t.tooltipGetter(t.data)},t.prototype.refresh=function(t){return!0},t.prototype.copy=function(){(0,i.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},t.\u0275fac=function(e){return new(e||t)(o.Y36(r.ux))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return e.copy()}),o.TgZ(1,"span",1),o._uU(2),o.qZA(),o.TgZ(3,"mat-icon",2),o._uU(4,"file_copy"),o.qZA(),o.qZA()),2&t&&(o.Q6J("tippy",e.tooltip),o.xp6(2),o.Oqu(e.id))},directives:[a.wG,s.$,p.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),t}()},7289:function(t,e,n){"use strict";function i(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}n.d(e,{M:function(){return i}})},6146:function(t,e,n){"use strict";n.d(e,{D:function(){return r}});var i=n(1785),o=n(9886),r=function(){function t(t){this.globalConfigService=t}return t.prototype.onClick=function(t){(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&t.shiftKey&&t.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())},t.\u0275fac=function(e){return new(e||t)(i.Y36(o.bE))},t.\u0275dir=i.lG2({type:t,selectors:[["","appToggleDebug",""]],hostBindings:function(t,e){1&t&&i.NdJ("click",function(t){return e.onClick(t)})}}),t}()},8838:function(t,e,n){"use strict";function i(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),document.body.removeChild(e),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}n.d(e,{v:function(){return i}})},6207:function(t,e,n){"use strict";n.d(e,{z:function(){return r}});var i=n(1785),o=n(9624),r=function(){function t(t){this.sanitizer=t}return t.prototype.transform=function(t){return this.sanitizer.bypassSecurityTrustHtml(t)},t.\u0275fac=function(e){return new(e||t)(i.Y36(o.H7,16))},t.\u0275pipe=i.Yjl({name:"safeHtml",type:t,pure:!0}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.07.00/ng-edit/projects_ng-dialogs_src_app_content-items_content-items_component_ts.acf79558cc433cabd758.js.map