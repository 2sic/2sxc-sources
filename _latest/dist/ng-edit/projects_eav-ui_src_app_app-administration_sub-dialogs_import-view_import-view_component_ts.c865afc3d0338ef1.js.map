{"version":3,"file":"projects_eav-ui_src_app_app-administration_sub-dialogs_import-view_import-view_component_ts.c865afc3d0338ef1.js","mappings":"sPASA,MAAMA,EAAiB,cACjBC,EAAcD,EAAiB,MAC/BE,EAAmBF,EAAiB,SACpCG,EAAmBH,EAAiB,SACpCI,EAAsBJ,EAAiB,eACvCK,EAAkBL,EAAiB,QAGlC,IAAMM,EAAY,MAAnB,MAAOA,EACXC,YAAoBC,EAA0BC,EAA0BC,GAApDC,KAAAH,OAA0BG,KAAAF,UAA0BE,KAAAD,YAA0B,CAElGE,SACE,OAAOD,KAAKH,KAAKK,IAAYF,KAAKD,WAAWI,MAAMN,KAAKO,OAAOd,GAAc,CAC3Ee,OAAQ,CAAEC,MAAON,KAAKF,QAAQQ,MAAMC,aAExC,CAEAC,OAAOC,GACL,OAAOT,KAAKH,KAAKK,IAAaF,KAAKD,WAAWI,MAAMN,KAAKO,OAAOb,GAAmB,CACjFc,OAAQ,CAAEC,MAAON,KAAKF,QAAQQ,MAAMC,WAAYG,GAAID,EAAGF,aAE3D,CAEAI,OAAOC,GACL,MAAMC,EAAW,IAAIC,SACrBD,SAASE,OAAO,OAAQH,GACjBZ,KAAKH,KAAKmB,KAAuBhB,KAAKD,WAAWI,MAAMN,KAAKO,OAAOZ,GAAmBqB,EAAU,CACrGR,OAAQ,CAAEC,MAAON,KAAKF,QAAQQ,MAAMC,WAAYU,OAAQjB,KAAKF,QAAQmB,OAAOV,aAEhF,CAEAW,OAAOT,GACL,MAAMU,EAAMnB,KAAKD,WAAWI,MAAMN,KAAKO,OAAOf,EAAiB,QAC3D,UAAYW,KAAKF,QAAQQ,MACzB,WAAaG,EAEjBW,OAAOC,KAAKF,EAAK,SAAU,GAC7B,CAEAG,kBACE,OAAOtB,KAAKH,KAAKK,IAAkBF,KAAKD,WAAWI,MAAMN,KAAKO,OAAOX,GAAsB,CACzFY,OAAQ,CAAEC,MAAON,KAAKF,QAAQQ,MAAMC,aAExC,CAEAgB,SAASC,GACP,OAAOxB,KAAKH,KAAKK,IAAiBF,KAAKD,WAAWI,MAAMN,KAAKO,OAAOV,GAAkB,CACpFW,OAAQ,CAAEC,MAAON,KAAKF,QAAQQ,MAAMC,WAAYiB,SAEpD,CAACC,SAAAzB,KAAA,mBAAA0B,iBAzCU/B,GAAYgC,MAAAC,MAAAD,MAAAE,KAAAF,MAAAG,MAAA,EAAAL,SAAAzB,KAAA,WAAA+B,EAAAC,IAAA,OAAZrC,EAAYsC,QAAZtC,EAAYuC,mBAAZvC,CAAY,oHCFlB,IAAMwC,EAAmB,MAA1B,MAAOA,EAMXvC,YAC2BwC,GAL3BpC,KAAAqC,WAAaC,KAAYC,KAEjBvC,KAAAwC,gBAAeC,KAAU9C,KAK/ByC,EAAWM,QAAU,cACrBN,EAAWO,cAAgB,0DAC3BP,EAAWQ,mBAAqB,OAChCR,EAAWS,UAAaC,GAAU9C,KAAKwC,aAAa7B,OAAOmC,EAAM,GACnE,CAACrB,SAAAzB,KAAA,mBAAA0B,iBAbUS,GAAmBR,MAOpBoB,MAAe,EAAAtB,SAAAzB,KAAA,UAAAgD,EAAAC,IAAA,MAPdd,EAAmBe,UAAA,sBAAAC,YAAA,EAAAC,SAAA,CAAAzB,OAAA0B,MAAA,EAAAC,KAAA,EAAAC,OAAA,mBAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,GCfhC9B,MAAA,mCAAwBA,MAAA,aAAA+B,EAAArB,2BDYpBsB,eAGSxB,CAAmB","names":["webApiViewRoot","webApiViews","webApiViewDelete","webApiViewImport","webApiViewPolymorph","webApiViewUsage","ViewsService","constructor","http","context","dnnContext","this","getAll","get","$2sxc","apiUrl","params","appId","toString","delete","id","Id","import","file","formData","FormData","append","post","zoneId","export","url","window","open","getPolymorphism","getUsage","guid","static","t","i0","i1","i2","i3","_angular_core__WEBPACK_IMPORTED_MODULE_1__","jDH","factory","Éµfac","ImportViewComponent","dialogData","uploadType","UploadTypes","View","viewsService","transient","title","description","allowedFileTypes","upload$","files","MAT_DIALOG_DATA","_angular_core__WEBPACK_IMPORTED_MODULE_3__","VBU","selectors","standalone","features","decls","vars","consts","template","rf","ctx","FileUploadDialogComponent"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/services/views.service.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/import-view/import-view.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/import-view/import-view.component.html"],"sourcesContent":["import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { ViewUsage } from '../models/view-usage.model';\r\nimport { View } from '../models/view.model';\r\n\r\nconst webApiViewRoot = 'admin/view/';\r\nconst webApiViews = webApiViewRoot + 'all';\r\nconst webApiViewDelete = webApiViewRoot + 'delete';\r\nconst webApiViewImport = webApiViewRoot + 'import';\r\nconst webApiViewPolymorph = webApiViewRoot + 'polymorphism';\r\nconst webApiViewUsage = webApiViewRoot + 'usage';\r\n\r\n@Injectable()\r\nexport class ViewsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAll() {\r\n    return this.http.get<View[]>(this.dnnContext.$2sxc.http.apiUrl(webApiViews), {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.http.get<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiViewDelete), {\r\n      params: { appId: this.context.appId.toString(), Id: id.toString() },\r\n    });\r\n  }\r\n\r\n  import(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiViewImport), formData, {\r\n      params: { appId: this.context.appId.toString(), zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  export(id: number) {\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(webApiViewRoot + 'json')\r\n      + '?appId=' + this.context.appId\r\n      + '&viewId=' + id;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  getPolymorphism() {\r\n    return this.http.get<Polymorphism>(this.dnnContext.$2sxc.http.apiUrl(webApiViewPolymorph), {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  getUsage(guid: string) {\r\n    return this.http.get<ViewUsage[]>(this.dnnContext.$2sxc.http.apiUrl(webApiViewUsage), {\r\n      params: { appId: this.context.appId.toString(), guid }\r\n    });\r\n  }\r\n}\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { FileUploadDialogComponent, FileUploadDialogData, UploadTypes } from '../../../shared/components/file-upload-dialog';\r\nimport { ViewsService } from '../../services/views.service';\r\nimport { transient } from '../../../core';\r\n\r\n@Component({\r\n  selector: 'app-import-view',\r\n  templateUrl: './import-view.component.html',\r\n  styleUrls: ['./import-view.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    FileUploadDialogComponent,\r\n  ],\r\n})\r\nexport class ImportViewComponent {\r\n\r\n  uploadType = UploadTypes.View;\r\n\r\n  private viewsService = transient(ViewsService);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) dialogData: FileUploadDialogData,\r\n  ) {\r\n    dialogData.title ??= `Import View`;\r\n    dialogData.description ??= `Select a View file (json) from your computer to import.`;\r\n    dialogData.allowedFileTypes ??= 'json';\r\n    dialogData.upload$ ??= (files) => this.viewsService.import(files[0]);\r\n  }\r\n\r\n}\r\n","<app-file-upload-dialog [uploadType]=\"uploadType\"></app-file-upload-dialog>"],"x_google_ignoreList":[]}