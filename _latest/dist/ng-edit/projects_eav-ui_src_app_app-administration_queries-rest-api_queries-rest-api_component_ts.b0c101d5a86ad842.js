"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_queries-rest-api_queries-rest-api_component_ts"],{3960:(I,u,t)=>{t.r(u),t.d(u,{QueriesRestApiComponent:()=>A});var h=t(316),r=t(4456),c=t(4175),d=t(3777),i=t(3840),n=t(5175),p=t(5445),M=t(5797),P=t(52),D=t(2159),v=t(5437),m=t(7037),e=t(8559),_=t(5944),l=t(5060);function C(a,T){if(1&a&&(e.j41(0,"mat-option",3),e.EFF(1),e.k0s()),2&a){const s=T.$implicit;e.Y8G("value",s.Guid),e.R7$(),e.SpI(" ",s.Name," ")}}function g(a,T){1&a&&e.Z7z(0,C,2,2,"mat-option",3,e.fX1),2&a&&e.Dyx(T.sort())}let A=(()=>{class a{constructor(s,o,E){this.fb=s,this.router=o,this.route=E,this.pipelinesService=(0,v.d)(p.xR),this.queryTypes$=new M.t(void 0)}ngOnInit(){this.fetchQueries(),this.queryTypeForm=this.fb.group({queryType:[""]})}fetchQueries(){this.pipelinesService.getAll(P.YX.contentTypes.query).subscribe(s=>{this.queryTypes$.next(s);const o=this.router.url.split("/"),E=o[o.length-1],O=s.find(y=>y.Guid===E);O&&this.queryTypeForm.get("queryType").setValue(O.Guid)})}openRestApi(s){s&&this.router.navigate([`${s}`],{relativeTo:this.route.parent.firstChild})}static#t=this.\u0275fac=function(o){return new(o||a)(e.rXU(r.ok),e.rXU(D.Ix),e.rXU(D.nX))};static#e=this.\u0275cmp=e.VBU({type:a,selectors:[["app-web-api-rest-api"]],standalone:!0,features:[e.aNF],decls:8,vars:4,consts:[[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","queryType",3,"valueChange"],[3,"value"]],template:function(o,E){if(1&o&&(e.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),e.EFF(3,"Query"),e.k0s(),e.j41(4,"mat-select",2),e.bIt("valueChange",function(y){return E.openRestApi(y)}),e.DNE(5,g,2,0),e.nI1(6,"async"),e.k0s()()(),e.nrm(7,"router-outlet")),2&o){let O;e.Y8G("formGroup",E.queryTypeForm),e.R7$(5),e.vxM(5,(O=e.bMT(6,2,E.queryTypes$))?5:-1,O)}},dependencies:[n.Ve,_.rl,_.nJ,n.VO,l.wT,c.Hl,d.Hu,i.m_,r.X1,r.qT,r.BC,r.cb,r.j4,r.JD,h.Jj,D.n3,m.p]})}return a})()},5445:(I,u,t)=>{t.d(u,{Cu:()=>n.Cu,JL:()=>n.JL,Mk:()=>n.Mk,ei:()=>n.ei,gs:()=>r.g,tn:()=>h.t,vN:()=>n.vN,xR:()=>n.xR,y0:()=>p.y});var h=t(6163),r=t(7693),n=(t(1475),t(320),t(8624),t(4079)),p=t(2570)},4079:(I,u,t)=>{t.d(u,{Cu:()=>l,JL:()=>C,Mk:()=>e,ei:()=>_,vN:()=>g,xR:()=>A});var h=t(4600),r=t(6647),c=t(271),d=t(693),i=t(8873),n=t(9234),p=t(8559),M=t(6443),P=t(4821);const e="admin/query/Run",_="admin/query/DebugStream",l="admin/query/Save",C="admin/query/Get",g="admin/query/DataSources";let A=(()=>{class a{constructor(s,o,E){this.http=s,this.context=o,this.dnnContext=E}getAll(s){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(n.Gg),{params:{appId:this.context.appId.toString(),contentType:s}})}importQuery(s){return(0,h.H)((0,d.n)(s)).pipe((0,r.n)(o=>this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/query/import"),{AppId:this.context.appId.toString(),ContentBase64:o})),(0,c.T)(o=>({Success:o,Messages:[]})))}clonePipeline(s){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/query/Clone"),{params:{Id:s.toString(),appId:this.context.appId.toString()}})}delete(s){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl("admin/query/Delete"),{params:{appId:this.context.appId.toString(),Id:s.toString()}})}static#t=this.\u0275fac=function(o){return new(o||a)(p.KVO(M.Qq),p.KVO(i.o),p.KVO(P.ob))};static#e=this.\u0275prov=p.jDH({token:a,factory:a.\u0275fac})}return a})()},2570:(I,u,t)=>{t.d(u,{y:()=>v});var h=t(8873),r=t(8559),c=t(6443),d=t(4821);const i="admin/view/",n=i+"all",p=i+"delete",M=i+"import",P=i+"polymorphism",D=i+"usage";let v=(()=>{class m{constructor(_,l,C){this.http=_,this.context=l,this.dnnContext=C}getAll(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(n),{params:{appId:this.context.appId.toString()}})}delete(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(p),{params:{appId:this.context.appId.toString(),Id:_.toString()}})}import(_){const l=new FormData;return l.append("File",_),this.http.post(this.dnnContext.$2sxc.http.apiUrl(M),l,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}export(_){const l=this.dnnContext.$2sxc.http.apiUrl(i+"json")+"?appId="+this.context.appId+"&viewId="+_;window.open(l,"_blank","")}getPolymorphism(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(P),{params:{appId:this.context.appId.toString()}})}getUsage(_){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(D),{params:{appId:this.context.appId.toString(),guid:_}})}static#t=this.\u0275fac=function(l){return new(l||m)(r.KVO(c.Qq),r.KVO(h.o),r.KVO(d.ob))};static#e=this.\u0275prov=r.jDH({token:m,factory:m.\u0275fac})}return m})()},693:(I,u,t)=>{function h(c){return new Promise((d,i)=>{const n=new FileReader;n.readAsDataURL(c),n.onload=()=>{d(n.result.split(",")[1])},n.onerror=p=>{i(p)}})}function r(c){return new Promise((d,i)=>{const n=new FileReader;n.readAsText(c),n.onload=()=>{d(n.result)},n.onerror=p=>{i(p)}})}t.d(u,{d:()=>r,n:()=>h})}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_app-administration_queries-rest-api_queries-rest-api_component_ts.b0c101d5a86ad842.js.map