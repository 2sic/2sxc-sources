{"version":3,"file":"projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/apps-management/constants/app.patterns.ts","./projects/eav-ui/src/app/apps-management/create-app/create-app.component.ts","./projects/eav-ui/src/app/apps-management/create-app/create-app.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html"],"sourcesContent":["export const appNamePattern = /^[A-Za-z](?:[A-Za-z0-9\\s\\(\\)-]+)*$/;\r\nexport const appNameError = 'Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.';\r\n","import { AsyncPipe } from '@angular/common';\r\nimport { Component, HostBinding, signal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from '../../../../../core';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { appNameError, appNamePattern } from '../constants/app.patterns';\r\nimport { AppsListService } from '../services/apps-list.service';\r\n\r\n@Component({\r\n  selector: 'app-create-app',\r\n  templateUrl: './create-app.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    RouterOutlet,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatDialogActions,\r\n    MatButtonModule,\r\n    AsyncPipe,\r\n    FieldHintComponent,\r\n  ],\r\n})\r\nexport class CreateAppComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  loading = signal<boolean>(false);\r\n  appNameError = appNameError;\r\n  appTemplateId = '1';\r\n\r\n\r\n  private appsListService = transient(AppsListService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<CreateAppComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.form = this.buildForm();\r\n  }\r\n\r\n\r\n  closeDialog(): void {\r\n    this.dialog.close();\r\n  }\r\n\r\n  create(): void {\r\n    this.form.disable();\r\n    this.loading.set(true);\r\n    const name = this.form.controls.name.value?.trim().replace(/\\s\\s+/g, ' '); // remove multiple white spaces and tabs;\r\n    const appTemplateId = Number(this.appTemplateId);\r\n    // console.warn('2dm: name', name, this.appTemplateId);\r\n    // return;\r\n\r\n    this.snackBar.open('Creating app...');\r\n    this.appsListService.create(name, null, appTemplateId).subscribe({\r\n      error: () => {\r\n        this.form.enable();\r\n        this.loading.set(false);\r\n\r\n        this.snackBar.open('Failed to create app. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.form.enable();\r\n        this.snackBar.open('Created app', undefined, { duration: 2000 });\r\n        this.closeDialog();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildForm(): UntypedFormGroup {\r\n    const form = new UntypedFormGroup({\r\n      name: new UntypedFormControl(null, [Validators.required, Validators.pattern(appNamePattern)]),\r\n    });\r\n    return form;\r\n  }\r\n}\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Create App</div>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <router-outlet></router-outlet>\r\n    <form [formGroup]=\"form\">\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Name</mat-label>\r\n        <input matInput type=\"text\" formControlName=\"name\" />\r\n      </mat-form-field>\r\n      <app-field-hint> App name will also be used for the folder </app-field-hint>\r\n      @if (form.controls.name.touched) {\r\n        @if (form.controls.name.errors?.required) {\r\n          <app-field-hint [isError]=\"true\"> Required </app-field-hint>\r\n        }\r\n        @if (form.controls.name.errors?.pattern) {\r\n          <app-field-hint [isError]=\"true\">\r\n            {{ appNameError }}\r\n          </app-field-hint>\r\n        }\r\n      }\r\n      <br />\r\n\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Template</mat-label>\r\n        <mat-select required=\"true\" [(value)]=\"appTemplateId\">\r\n          <mat-option value=\"0\"> Completely Naked / Raw App </mat-option>\r\n          <mat-option value=\"1\"> App Template Empty with some instructions </mat-option>\r\n          <mat-option value=\"2\"> App Template Basic with instructions and some data </mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n    </form>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    <button type=\"button\" mat-raised-button [disabled]=\"loading()\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button type=\"button\" mat-raised-button color=\"accent\" [disabled]=\"loading() || !form.valid\" (click)=\"create()\">Create</button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, Input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatFormFieldModule,\r\n    NgClass,\r\n    NgTemplateOutlet\r\n  ]\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n"],"names":["appNamePattern","appNameError","signal","FormsModule","ReactiveFormsModule","UntypedFormControl","UntypedFormGroup","Validators","MatButtonModule","MatOptionModule","MatDialogActions","MatDialogRef","MatFormFieldModule","MatInputModule","MatSelectModule","MatSnackBar","RouterOutlet","transient","FieldHintComponent","AppsListService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","ɵɵtemplate","CreateAppComponent_Conditional_13_Conditional_0_Template","CreateAppComponent_Conditional_13_Conditional_1_Template","ɵɵconditional","form","controls","name","errors","required","pattern","CreateAppComponent","constructor","dialog","snackBar","hostClass","loading","appTemplateId","appsListService","buildForm","closeDialog","close","create","disable","set","value","trim","replace","Number","open","subscribe","error","enable","undefined","duration","next","ɵɵdirectiveInject","i1","i2","selectors","hostVars","hostBindings","CreateAppComponent_HostBindings","rf","ctx","ɵɵhostProperty","ɵɵelement","CreateAppComponent_Conditional_13_Template","ɵɵtwoWayListener","CreateAppComponent_Template_mat_select_valueChange_18_listener","$event","ɵɵtwoWayBindingSet","ɵɵlistener","CreateAppComponent_Template_button_click_26_listener","CreateAppComponent_Template_button_click_28_listener","touched","ɵɵtwoWayProperty","valid","i3","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","MatFormField","MatLabel","i5","MatInput","i6","MatSelect","i7","MatOption","i8","MatButton","encapsulation","NgClass","NgTemplateOutlet","ɵɵelementContainer","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","ɵɵprojection","isError","isShort","toggleIsShort","inputs","standalone","features","ɵɵStandaloneFeature","ngContentSelectors","_c0","decls","vars","consts","template","FieldHintComponent_Template","FieldHintComponent_Template_div_click_0_listener","ɵɵrestoreView","_r1","ɵɵresetView","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction1","_c1","tmp_2_0","MatHint","MatError","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}