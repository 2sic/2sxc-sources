{"version":3,"file":"default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/shared/components/file-upload-dialog/file-upload-dialog.component.ts","./projects/eav-ui/src/app/shared/components/file-upload-dialog/file-upload-dialog.component.html","./projects/eav-ui/src/app/shared/components/file-upload-dialog/file-upload-dialog.models.ts","./projects/eav-ui/src/app/shared/components/file-upload-dialog/index.ts","./projects/eav-ui/src/app/shared/directives/base.directive.ts","./projects/eav-ui/src/app/shared/directives/drag-and-drop.directive.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, ElementRef, HostBinding, Inject, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialogModule } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject, Observable, catchError, combineLatest, filter, fromEvent, map, of, switchMap, take, tap } from 'rxjs';\r\nimport { BaseComponent } from '../base.component';\r\nimport { FileUploadDialogData, FileUploadMessageTypes, FileUploadResult, UploadTypes } from './file-upload-dialog.models';\r\nimport { AppInstallSettingsService } from '../../services/getting-started.service';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Context } from '../../services/context';\r\nimport { CrossWindowMessage, InstallPackage, InstallSettings, SpecsForInstaller } from '../../models/installer-models';\r\nimport { InstallerService } from '../../services/installer.service';\r\nimport { AsyncPipe, NgClass } from '@angular/common';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { SafeHtmlPipe } from '../../pipes/safe-html.pipe';\r\nimport { DragAndDropDirective } from '../../directives/drag-and-drop.directive';\r\nimport { MatButtonModule } from '@angular/material/button';\r\n\r\n\r\n@Component({\r\n  selector: 'app-file-upload-dialog',\r\n  templateUrl: './file-upload-dialog.component.html',\r\n  styleUrls: ['./file-upload-dialog.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    NgClass,\r\n    MatDialogModule,\r\n    MatProgressSpinnerModule,\r\n    SafeHtmlPipe,\r\n    AsyncPipe,\r\n    DragAndDropDirective,\r\n    MatButtonModule,\r\n  ]\r\n})\r\nexport class FileUploadDialogComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  @Input() uploadType: UploadTypes;\r\n\r\n  @ViewChild('installerWindow') installerWindow: ElementRef;\r\n\r\n  uploading$ = new BehaviorSubject<boolean>(false);\r\n  files$ = new BehaviorSubject<File[]>([]);\r\n  result$ = new BehaviorSubject<FileUploadResult>(undefined);\r\n  FileUploadMessageTypes = FileUploadMessageTypes;\r\n  UploadTypes = UploadTypes;\r\n  showAppCatalog$ = new BehaviorSubject<boolean>(false);\r\n\r\n  viewModel$: Observable<FileUploadDialogViewModel>;\r\n\r\n  showProgress: boolean = false;\r\n  currentPackage: InstallPackage;\r\n  remoteInstallerUrl = '';\r\n  ready = false;\r\n  settings: InstallSettings;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: FileUploadDialogData,\r\n    private dialogRef: MatDialogRef<FileUploadDialogComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private installSettingsService: AppInstallSettingsService,\r\n    private installerService: InstallerService,\r\n    private sanitizer: DomSanitizer,\r\n    private context: Context,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    super();\r\n\r\n    // copied from 2sxc-ui app/installer\r\n    this.subscriptions.add(\r\n      this.installSettingsService.settings$.subscribe(settings => {\r\n        this.settings = settings;\r\n        this.remoteInstallerUrl = <string>this.sanitizer.bypassSecurityTrustResourceUrl(settings.remoteUrl);\r\n        this.ready = true;\r\n      })\r\n    );\r\n  }\r\n\r\n  private alreadyProcessing = false;\r\n  // copied from 2sxc-ui app/installer\r\n  // Initial Observable to monitor messages\r\n  private messages$ = fromEvent(window, 'message').pipe(\r\n    // Ensure only one installation is processed.\r\n    filter(() => !this.alreadyProcessing),\r\n    filter((evt: MessageEvent) => evt.origin === \"https://2sxc.org\"),\r\n    // Get data from event.\r\n    map((evt: MessageEvent) => {\r\n      try {\r\n        return JSON.parse(evt.data) as CrossWindowMessage;\r\n      } catch (e) {\r\n        console.error('error procesing message. Message was ' + evt.data, e);\r\n        return void 0;\r\n      }\r\n    }),\r\n    // Check if data is valid and the moduleID matches\r\n    filter(data => data && Number(data.moduleId) === this.context.moduleId),\r\n  );\r\n\r\n  ngOnInit(): void {\r\n    this.subscriptions.add(\r\n      this.files$.subscribe(() => {\r\n        if (this.result$.value !== undefined) {\r\n          this.result$.next(undefined);\r\n        }\r\n      }),\r\n    );\r\n\r\n    if (this.dialogData.files != null) {\r\n      this.filesDropped(this.dialogData.files);\r\n    }\r\n\r\n    this.viewModel$ = combineLatest([\r\n      this.uploading$, this.files$, this.result$, this.showAppCatalog$,\r\n    ]).pipe(map(([uploading, files, result, showAppCatalog]) => ({ uploading, files, result, showAppCatalog })));\r\n\r\n    // copied from 2sxc-ui\r\n    this.installSettingsService.loadGettingStarted(false);//this.isContentApp -> from @Input on 2sxc-ui\r\n\r\n    // copied from 2sxc-ui app/installer\r\n    this.subscriptions.add(this.messages$.pipe(\r\n      // Verify it's for this action\r\n      filter(data => data.action === 'specs'),\r\n      // Send message to iframe\r\n      tap(() => {\r\n        const winFrame = this.installerWindow.nativeElement as HTMLIFrameElement;\r\n        const specsMsg: SpecsForInstaller = {\r\n          action: 'specs',\r\n          data: {\r\n            //currently not used\r\n            installedApps: this.settings.installedApps,//.map(app => ((app as InstalledApp).guid)),\r\n            //currently used to forbid already installed apps\r\n            rules: this.settings.installedApps.map(app => ({ target: 'guid', appGuid: app.guid, mode: 'f', url: '' })),//this.settings.rules,\r\n          },\r\n        };\r\n        const specsJson = JSON.stringify(specsMsg);\r\n        winFrame.contentWindow.postMessage(specsJson, '*');\r\n        console.log('debug: just sent specs message:' + specsJson, specsMsg, winFrame);\r\n      }),\r\n    ).subscribe());\r\n\r\n    // copied from 2sxc-ui app/installer\r\n    // Subscription to listen to 'install' messages\r\n    this.subscriptions.add(this.messages$.pipe(\r\n      filter(data => data.action === 'install'),\r\n      // Get packages from data.\r\n      map(data => Object.values(data.packages)),\r\n      // Show confirm dialog.\r\n      filter(packages => {\r\n        const packagesDisplayNames = packages\r\n          .reduce((t, c) => `${t} - ${c.displayName}\\n`, '');\r\n\r\n        const msg = `Do you want to install these packages?\r\n\r\n${packagesDisplayNames}\r\nThis takes about 10 seconds per package. Don't reload the page while it's installing.`;\r\n        return confirm(msg);\r\n      }),\r\n      // Install the packages one at a time\r\n      switchMap(packages => {\r\n        this.alreadyProcessing = true;\r\n        this.showProgress = true;\r\n        this.changeDetectorRef.detectChanges(); //without this spinner is not shown\r\n        return this.installerService.installPackages(packages, p => this.currentPackage = p);\r\n      }),\r\n      tap(() => {\r\n        this.showProgress = false;\r\n        this.changeDetectorRef.detectChanges(); //without this spinner is not removed (though window reload will remove it anyway) so maybe unnecessary\r\n        alert('Installation complete 👍');\r\n        window.top.location.reload();\r\n      }),\r\n      catchError(error => {\r\n        console.error('Error: ', error);\r\n        this.showProgress = false;\r\n        this.alreadyProcessing = false;\r\n        this.changeDetectorRef.detectChanges(); //without this spinner is not removed\r\n        const errorMsg = `An error occurred: Package ${this.currentPackage.displayName}\r\n\r\n${error.error?.Message ?? error.error?.message ?? ''}\r\n\r\n${error.message}\r\n\r\nPlease try again later or check how to manually install content-templates: https://azing.org/2sxc/r/0O4OymoA`;\r\n        alert(errorMsg);\r\n        return of(error);\r\n      }),\r\n    ).subscribe());\r\n\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.uploading$.complete();\r\n    this.files$.complete();\r\n    this.result$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog(refresh?: boolean): void {\r\n    this.dialogRef.close(refresh);\r\n  }\r\n\r\n  filesDropped(files: File[]): void {\r\n    this.setFiles(files);\r\n    this.upload();\r\n  }\r\n\r\n  filesChanged(event: Event): void {\r\n    const fileList = (event.target as HTMLInputElement).files;\r\n    const files = Array.from(fileList);\r\n    this.setFiles(files);\r\n  }\r\n\r\n  upload(): void {\r\n    this.uploading$.next(true);\r\n    this.subscriptions.add(\r\n      this.dialogData.upload$(this.files$.value).pipe(take(1)).subscribe({\r\n        next: (result) => {\r\n          this.uploading$.next(false);\r\n          this.result$.next(result);\r\n        },\r\n        error: () => {\r\n          this.uploading$.next(false);\r\n          this.result$.next(undefined);\r\n          this.snackBar.open('Upload failed. Please check console for more information', undefined, { duration: 3000 });\r\n        },\r\n      }),\r\n    );\r\n  }\r\n\r\n  showAppCatalog(): void {\r\n    this.showAppCatalog$.next(!this.showAppCatalog$.value);\r\n  }\r\n\r\n  private setFiles(files: File[]): void {\r\n    if (!this.dialogData.multiple) {\r\n      files = files.slice(0, 1);\r\n    }\r\n    this.files$.next(files);\r\n  }\r\n}\r\n\r\ninterface FileUploadDialogViewModel {\r\n  uploading: boolean;\r\n  files: File[];\r\n  result: FileUploadResult;\r\n  showAppCatalog: boolean;\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n<div class=\"eav-dialog\" appDragAndDrop [allowedFileTypes]=\"dialogData.allowedFileTypes\"\r\n  (filesDropped)=\"filesDropped($event)\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\" [innerHtml]=\"dialogData.title | safeHtml\"></div>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    @if (vm.uploading) {\r\n    <mat-spinner mode=\"indeterminate\" diameter=\"20\" color=\"accent\"></mat-spinner>\r\n    }\r\n    <p [innerHtml]=\"dialogData.description | safeHtml\"></p>\r\n    <div>\r\n      <button mat-raised-button tippy=\"Open file browser\" [disabled]=\"vm.uploading\" (click)=\"fileInput.click()\">\r\n        @if (!vm.files.length) {\r\n        <div>Select or drop file</div>\r\n        }\r\n        @for (file of vm.files; track file) {\r\n        <div>{{ file.name }}</div>\r\n        }\r\n      </button>\r\n      <input #fileInput type=\"file\" multiple (change)=\"filesChanged($event)\" class=\"hide\" />\r\n      @if (uploadType == UploadTypes.App) {\r\n      <button mat-raised-button class=\"eav-app-catalog-button\" [disabled]=\"vm.uploading\" tippy=\"Open app catalog\"\r\n        (click)=\"showAppCatalog()\">\r\n        Get recommended Apps from Catalog\r\n      </button>\r\n      }\r\n    </div>\r\n    @if (vm.result) {\r\n    <div class=\"eav-result-container\">\r\n      @if (vm.result.Success) {\r\n      <div class=\"sxc-message sxc-message-info\">\r\n        Upload succeeded. See the messages below for more information.\r\n      </div>\r\n      }\r\n      @if (!vm.result.Success) {\r\n      <div class=\"sxc-message sxc-message-error\">\r\n        Upload failed. See the messages below for more information.\r\n      </div>\r\n      }\r\n      @for (message of vm.result.Messages; track message) {\r\n      <div class=\"sxc-message\" [ngClass]=\"{\r\n              'sxc-message-warning': message.MessageType === FileUploadMessageTypes.Warning,\r\n              'sxc-message-success': message.MessageType === FileUploadMessageTypes.Success,\r\n              'sxc-message-error': message.MessageType === FileUploadMessageTypes.Error\r\n              }\">\r\n        {{ message.Text }}\r\n      </div>\r\n      }\r\n    </div>\r\n    }\r\n    @if (uploadType == UploadTypes.App && vm.showAppCatalog) {\r\n    @if (ready) {\r\n    <iframe #installerWindow class=\"eav-app-catalog-iframe\" [src]=\"remoteInstallerUrl\"></iframe>\r\n    }\r\n    @if (showProgress) {\r\n    <div class=\"eav-progress\">\r\n      <mat-progress-spinner [mode]=\"'indeterminate'\"></mat-progress-spinner>\r\n      <span>Installing {{ currentPackage?.displayName }}..</span>\r\n    </div>\r\n    }\r\n    }\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    @if (!vm.result?.Success) {\r\n    <button mat-raised-button (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button color=\"accent\" [disabled]=\"!vm.files.length || vm.uploading || !!vm.result\"\r\n      (click)=\"upload()\">\r\n      Upload\r\n    </button>\r\n    }\r\n    @if (vm.result?.Success) {\r\n    <button mat-raised-button color=\"accent\" (click)=\"closeDialog(true)\">Close</button>\r\n    }\r\n  </mat-dialog-actions>\r\n</div>\r\n}\r\n","import { Observable } from 'rxjs';\r\n\r\nexport interface FileUploadDialogData {\r\n  title?: string;\r\n  description?: string;\r\n  allowedFileTypes?: string;\r\n  files?: File[];\r\n  multiple?: boolean;\r\n  upload$?(files: File[]): Observable<FileUploadResult>;\r\n}\r\n\r\nexport interface FileUploadResult {\r\n  Messages: FileUploadResultMessage[];\r\n  Success: boolean;\r\n}\r\n\r\nexport interface FileUploadResultMessage {\r\n  MessageType: FileUploadMessageType;\r\n  Text: string;\r\n}\r\n\r\nexport const FileUploadMessageTypes = {\r\n  Warning: 0,\r\n  Success: 1,\r\n  Error: 2,\r\n} as const;\r\n\r\nexport type FileUploadMessageType = typeof FileUploadMessageTypes[keyof typeof FileUploadMessageTypes];\r\n\r\nexport const UploadTypes = {\r\n  App: 0,\r\n  AppPart: 1,\r\n  ContentType: 2,\r\n  ContentItem: 3,\r\n  Query: 4,\r\n  View: 5,\r\n} as const;\r\n\r\nexport type UploadTypes = typeof UploadTypes[keyof typeof UploadTypes];\r\n","export * from './file-upload-dialog.component';\r\nexport * from './file-upload-dialog.models';\r\n","import { Directive, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive()\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseDirective implements OnDestroy {\r\n  /** Holds all subscriptions to be unsubscribed on destroy */\r\n  protected subscriptions = new Subscription();\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","import { Directive, ElementRef, EventEmitter, HostListener, Input, NgZone, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { fromEvent } from 'rxjs';\r\nimport { BaseDirective } from './base.directive';\r\n\r\n@Directive({ selector: '[appDragAndDrop]', standalone: true })\r\nexport class DragAndDropDirective extends BaseDirective implements OnInit, OnDestroy {\r\n  @Input() markStyle: 'outline' | 'fill' | 'shadow' = 'outline';\r\n  /** Comma separated file types, e.g. 'txt,doc,docx' */\r\n  @Input() allowedFileTypes = '';\r\n  @Output() private filesDropped = new EventEmitter<File[]>();\r\n\r\n  private element: HTMLElement;\r\n  private dropAreaClass = 'eav-droparea';\r\n  private markStyleClass: string;\r\n  private dragClass = 'eav-dragover';\r\n  private timeouts: number[] = [];\r\n\r\n  constructor(elementRef: ElementRef, private zone: NgZone, private snackBar: MatSnackBar) {\r\n    super();\r\n    this.element = elementRef.nativeElement;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.markStyleClass = `eav-droparea-${this.markStyle}`;\r\n    this.element.classList.add(this.dropAreaClass, this.markStyleClass);\r\n    this.zone.runOutsideAngular(() => {\r\n      this.subscriptions.add(\r\n        fromEvent<DragEvent>(this.element, 'dragover').subscribe(event => {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this.clearTimeouts();\r\n          this.element.classList.add(this.dragClass);\r\n        })\r\n      );\r\n      this.subscriptions.add(\r\n        fromEvent<DragEvent>(this.element, 'dragleave').subscribe(event => {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this.timeouts.push(\r\n            window.setTimeout(() => { this.element.classList.remove(this.dragClass); }, 50)\r\n          );\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.clearTimeouts();\r\n    this.element.classList.remove(this.dropAreaClass, this.markStyleClass, this.dragClass);\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  @HostListener('drop', ['$event'])\r\n  onDrop(event: DragEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    this.clearTimeouts();\r\n    this.element.classList.remove(this.dragClass);\r\n    const fileList = event.dataTransfer.files;\r\n    let files = Array.from(fileList);\r\n    files = this.filterTypes(files, this.allowedFileTypes);\r\n    if (files.length > 0) {\r\n      this.filesDropped.emit(files);\r\n    }\r\n  }\r\n\r\n  private clearTimeouts() {\r\n    for (const timeout of this.timeouts) {\r\n      clearTimeout(timeout);\r\n    }\r\n    this.timeouts = [];\r\n  }\r\n\r\n  private filterTypes(files: File[], allowedFileTypes: string) {\r\n    if (allowedFileTypes === '') { return files; }\r\n\r\n    const allowedTypes = allowedFileTypes.split(',').map(type => type.toLocaleLowerCase());\r\n    const filtered = files.filter(file => {\r\n      const extIndex = file.name.lastIndexOf('.');\r\n      if (extIndex <= 0) { return false; }\r\n      const ext = file.name.substring(extIndex + 1).toLocaleLowerCase();\r\n      const allowed = allowedTypes.includes(ext);\r\n      return allowed;\r\n    });\r\n\r\n    if (files.length !== filtered.length) {\r\n      const allowedTypesString = this.allowedFileTypes.replace(/\\,/g, ', ');\r\n      const message = filtered.length\r\n        ? 'Some files were filtered out. This drop location only accepts file types: ' + allowedTypesString\r\n        : 'This drop location only accepts file types: ' + allowedTypesString;\r\n      this.snackBar.open(message, null, { duration: 5000 });\r\n    }\r\n    return filtered;\r\n  }\r\n}\r\n"],"names":["ChangeDetectorRef","ElementRef","MatDialogRef","MAT_DIALOG_DATA","MatDialogModule","MatSnackBar","BehaviorSubject","catchError","combineLatest","filter","fromEvent","map","of","switchMap","take","tap","BaseComponent","FileUploadMessageTypes","UploadTypes","AppInstallSettingsService","DomSanitizer","Context","InstallerService","AsyncPipe","NgClass","MatProgressSpinnerModule","SafeHtmlPipe","DragAndDropDirective","MatButtonModule","i0","ɵɵelement","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","file_r4","name","ɵɵlistener","FileUploadDialogComponent_Conditional_0_Conditional_15_Template_button_click_0_listener","ɵɵrestoreView","_r5","ctx_r1","ɵɵnextContext","ɵɵresetView","showAppCatalog","ɵɵproperty","vm_r6","uploading","ɵɵpureFunction3","_c1","message_r7","MessageType","Warning","Success","Error","ɵɵtextInterpolate1","Text","ɵɵtemplate","FileUploadDialogComponent_Conditional_0_Conditional_16_Conditional_1_Template","FileUploadDialogComponent_Conditional_0_Conditional_16_Conditional_2_Template","ɵɵrepeaterCreate","FileUploadDialogComponent_Conditional_0_Conditional_16_For_4_Template","ɵɵrepeaterTrackByIdentity","ɵɵconditional","result","ɵɵrepeater","Messages","remoteInstallerUrl","ɵɵsanitizeResourceUrl","currentPackage","displayName","FileUploadDialogComponent_Conditional_0_Conditional_17_Conditional_0_Template","FileUploadDialogComponent_Conditional_0_Conditional_17_Conditional_1_Template","ready","showProgress","FileUploadDialogComponent_Conditional_0_Conditional_19_Template_button_click_0_listener","_r8","closeDialog","FileUploadDialogComponent_Conditional_0_Conditional_19_Template_button_click_2_listener","upload","files","length","FileUploadDialogComponent_Conditional_0_Conditional_20_Template_button_click_0_listener","_r9","FileUploadDialogComponent_Conditional_0_Template_div_filesDropped_0_listener","$event","_r1","filesDropped","FileUploadDialogComponent_Conditional_0_Conditional_5_Template","FileUploadDialogComponent_Conditional_0_Template_button_click_9_listener","fileInput_r3","ɵɵreference","click","FileUploadDialogComponent_Conditional_0_Conditional_10_Template","FileUploadDialogComponent_Conditional_0_For_12_Template","FileUploadDialogComponent_Conditional_0_Template_input_change_13_listener","filesChanged","FileUploadDialogComponent_Conditional_0_Conditional_15_Template","FileUploadDialogComponent_Conditional_0_Conditional_16_Template","FileUploadDialogComponent_Conditional_0_Conditional_17_Template","FileUploadDialogComponent_Conditional_0_Conditional_19_Template","FileUploadDialogComponent_Conditional_0_Conditional_20_Template","dialogData","allowedFileTypes","ɵɵpipeBind1","title","ɵɵsanitizeHtml","description","uploadType","App","FileUploadDialogComponent","constructor","dialogRef","snackBar","installSettingsService","installerService","sanitizer","context","changeDetectorRef","hostClass","uploading$","files$","result$","undefined","showAppCatalog$","alreadyProcessing","messages$","window","pipe","evt","origin","JSON","parse","data","e","console","error","Number","moduleId","subscriptions","add","settings$","subscribe","settings","bypassSecurityTrustResourceUrl","remoteUrl","ngOnInit","value","next","viewModel$","loadGettingStarted","action","winFrame","installerWindow","nativeElement","specsMsg","installedApps","rules","app","target","appGuid","guid","mode","url","specsJson","stringify","contentWindow","postMessage","log","Object","values","packages","packagesDisplayNames","reduce","t","c","msg","confirm","detectChanges","installPackages","p","alert","top","location","reload","errorMsg","Message","message","ngOnDestroy","complete","refresh","close","setFiles","event","fileList","Array","from","upload$","open","duration","multiple","slice","_","ɵɵdirectiveInject","i1","i2","i3","i4","i5","i6","_2","selectors","viewQuery","FileUploadDialogComponent_Query","rf","ctx","ɵɵhostProperty","FileUploadDialogComponent_Conditional_0_Template","tmp_0_0","MatDialogActions","i7","MatProgressSpinner","i8","MatButton","styles","AppPart","ContentType","ContentItem","Query","View","Subscription","BaseDirective","unsubscribe","EventEmitter","NgZone","elementRef","zone","markStyle","dropAreaClass","dragClass","timeouts","element","markStyleClass","classList","runOutsideAngular","preventDefault","stopPropagation","clearTimeouts","push","setTimeout","remove","onDrop","dataTransfer","filterTypes","emit","timeout","clearTimeout","allowedTypes","split","type","toLocaleLowerCase","filtered","file","extIndex","lastIndexOf","ext","substring","allowed","includes","allowedTypesString","replace","hostBindings","DragAndDropDirective_HostBindings","DragAndDropDirective_drop_HostBindingHandler"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}