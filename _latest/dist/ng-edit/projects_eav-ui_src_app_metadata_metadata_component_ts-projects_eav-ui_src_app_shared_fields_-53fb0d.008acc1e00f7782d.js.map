{"version":3,"file":"projects_eav-ui_src_app_metadata_metadata_component_ts-projects_eav-ui_src_app_shared_fields_-53fb0d.008acc1e00f7782d.js","mappings":"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","names":["webApiTypeRoot","webApiTypeScopes","ContentTypesService","constructor","http","context","dnnContext","this","apiUrl","name","$2sxc","retrieveContentType","staticName","get","params","appId","toString","contentTypeId","retrieveContentTypes","scope","getScopes","pipe","map","scopesData","scopes","old","Object","keys","key","value","getScopesV2","save","contentType","post","appid","delete","StaticName","import","files","formData","FormData","file","append","zoneId","createGhost","sourceStaticName","static","t","i0","i1","i2","i3","_angular_core__WEBPACK_IMPORTED_MODULE_2__","jDH","factory","ɵfac","webApiQueryRun","webApiQueryDebugStream","webApiQuerySave","webApiQueryGet","webApiQueryDataSources","PipelinesService","getAll","webApiEntityList","importQuery","from","toBase64","switchMap","fileBase64","AppId","ContentBase64","success","Success","Messages","clonePipeline","id","Id","_angular_core__WEBPACK_IMPORTED_MODULE_6__","webApiViewRoot","webApiViews","webApiViewDelete","webApiViewImport","webApiViewPolymorph","webApiViewUsage","ViewsService","export","url","window","open","getPolymorphism","getUsage","guid","_angular_core__WEBPACK_IMPORTED_MODULE_1__","ctx_r0","dialogData","message","ConfirmDeleteDialogComponent","dialogRef","hostClass","closeDialog","confirm","close","MAT_DIALOG_DATA","core","VBU","selectors","hostVars","hostBindings","rf","ctx","ConfirmDeleteDialogComponent_Conditional_4_Template","entityTitle","entityId","MatCardModule","MatButtonModule","SafeHtmlPipe","styles","MetadataActionsComponent","agInit","refresh","deleteMetadata","onDelete","data","standalone","features","decls","vars","consts","template","MatRippleModule","MatIconModule","MetadataContentTypeComponent","metadata","_Type","Description","TippyDirective","scopeOption_r2","MetadataSaveDialogComponent_Conditional_0_Conditional_11_For_5_Template","vm_r3","scopeOptions","length","ctx_r3","dropdownInsertValue","contentType_r5","Label","MetadataSaveDialogComponent_Conditional_0_Conditional_15_For_2_Template","contentTypes","MetadataSaveDialogComponent_Conditional_0_Conditional_11_Template","MetadataSaveDialogComponent_Conditional_0_Conditional_15_Template","MetadataSaveDialogComponent_Conditional_0_Conditional_16_Template","_r1","toggleGuidedContentType","MetadataSaveDialogComponent_Conditional_0_Conditional_24_Template","$event","toggleAdvancedMode","form","advancedMode","guidedContentType","_c0","controls","touched","errors","required","valid","MetadataSaveDialogComponent","contentTypesService","transient","ngOnInit","contentTypes$","BehaviorSubject","scopeOptions$","buildForm","fetchScopes","viewModel$","combineLatest","ngOnDestroy","complete","event","checked","formValues","getRawValue","UntypedFormGroup","addControl","UntypedFormControl","Validators","eavConstants","default","valueChanges","startWith","distinctUntilChanged","subscribe","newScope","patchValue","prompt","some","option","next","fetchContentTypes","MetadataSaveDialogComponent_Conditional_0_Template","tmp_0_0","FormsModule","ReactiveFormsModule","MatFormFieldModule","i4","MatSelectModule","i5","i6","MatOptionModule","MatInputModule","i7","i8","NgClass","i9","MatSlideToggleModule","i10","AsyncPipe","FieldHintComponent","ClickStopPropagationDirective","itemFor","KeyNumber","KeyGuid","KeyString","Title","MetadataComponent_Conditional_0_Conditional_10_Conditional_5_Template","MetadataComponent_Conditional_0_Conditional_10_Conditional_6_Template","MetadataComponent_Conditional_0_Conditional_10_Conditional_7_Template","MetadataComponent_Conditional_0_Conditional_10_Conditional_8_Template","Target","TargetType","_r4","ctx_r1","createMetadata","recommendation_r7","Icon","Enabled","_r6","$implicit","MetadataComponent_Conditional_0_Conditional_16_For_10_Conditional_1_Template","MetadataComponent_Conditional_0_Conditional_16_For_10_Conditional_2_Template","_r5","openChange","MetadataComponent_Conditional_0_Conditional_16_For_10_Template","fabOpen","recommendations","MetadataComponent_Conditional_0_Conditional_9_Template","MetadataComponent_Conditional_0_Conditional_10_Template","MetadataComponent_Conditional_0_Conditional_15_Template","MetadataComponent_Conditional_0_Conditional_16_Template","title","gridOptions","MetadataComponent","BaseWithChildDialogComponent","router","route","snackBar","dialog","viewContainerRef","changeDetectorRef","super","EavLogger","buildGridOptions","entitiesService","EntityEditService","metadataService","MetadataService","contentItemsService","ContentItemsService","metadataSet$","Items","Recommendations","itemFor$","undefined","fabOpen$","targetType","parseInt","snapshot","paramMap","keyType","decodeURIComponent","contentTypeStaticName","fetchFor","fetchMetadata","subscriptions","add","childDialogClosed$","logFilteredRecs","log","rxTap","set","a","filteredRecs$","filter","r","i","Count","logViewModel","recommendation","CreateEmpty","Name","create","For","calculateItemFor","error","duration","createMetadataForm","openFeatureDialog","MissingFeature","autoFocus","width","afterClosed","items","ContentTypeName","formUrl","convertFormToUrl","navigate","relativeTo","markForCheck","values","find","m","target","keyTypes","Guid","number","Number","string","String","item","logGetMetadata","getMetadata","take","forEach","startsWith","replace","atob","editMetadata","EntityId","confirmed","DeleteWarning","isConfirmed","defaultGridOptions","columnDefs","ColumnDefinitions","cellRenderer","IdFieldComponent","cellRendererParams","tooltipGetter","TextWide","field","onCellClicked","headerName","valueGetter","ActionsPinnedRight1","MetadataComponent_Conditional_0_Template","RouterOutlet","SxcGridModule","MatDialogActions","EcoFabSpeedDialComponent","EcoFabSpeedDialTriggerComponent","EcoFabSpeedDialActionsComponent","MatBadgeModule","GoToPermissions","path","loadChildren","__webpack_require__","e","then","bind","permissionRoutes","getUrl","getUrlApp","app","getUrlAttribute","attribute","getUrlContentType","getUrlEntity","entity","getUrlLanguage","language","permissionsDialog","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","PermissionsComponent","Promise","all","component","DialogEntryComponent","children","EditRoutesSubItems","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","isError","isShort","toggleIsShort","_angular_core__WEBPACK_IMPORTED_MODULE_0__","inputs","ngContentSelectors","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","_c1","tmp_2_0","NgTemplateOutlet","onClick","stopPropagation","FsC","webApiFieldsRoot","webApiFieldsAll","webApiFieldsGetShared","ContentTypesFieldsService","typeListRetrieve","getInputTypesList","inputConfigs","config","dataType","Type","substring","indexOf","inputType","label","description","isDefault","IsDefault","isObsolete","IsObsolete","isRecommended","IsRecommended","obsoleteMessage","ObsoleteMessage","icon","getReservedNames","getFields","fields","fld","Metadata","md","merged","All","InputType","getShareableFields","getShareableFieldsFor","attributeId","addInheritedField","targetContentTypeId","sourceContentTypeStaticName","sourceFieldGuid","newName","ContentTypeId","SourceType","SourceField","share","inherit","inheritMetadataOf","reOrder","idArray","order","JSON","stringify","setTitle","rename","fieldId","IsTitle","Error","newField","Index","SortOrder","updateInputType","_angular_core__WEBPACK_IMPORTED_MODULE_3__","resolve","reject","reader","FileReader","readAsDataURL","onload","result","split","onerror","readAsText"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/services/content-types.service.ts","./projects/eav-ui/src/app/app-administration/services/pipelines.service.ts","./projects/eav-ui/src/app/app-administration/services/views.service.ts","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.html","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.html","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata.component.html","./projects/eav-ui/src/app/metadata/metadata.component.ts","./projects/eav-ui/src/app/permissions/go-to-permissions.ts","./projects/eav-ui/src/app/permissions/permissions-dialog.config.ts","./projects/eav-ui/src/app/permissions/permissions.routing.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/directives/click-stop-propagation.directive.ts","./projects/eav-ui/src/app/shared/fields/content-types-fields.service.ts","./projects/eav-ui/src/app/shared/helpers/file-to-base64.helper.ts"],"sourcesContent":["import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { Context } from '../../shared/services/context';\r\nimport { ContentType, ContentTypeEdit } from '../models/content-type.model';\r\nimport { ScopeDetailsDto } from '../models/scopedetails.dto';\r\n\r\n// We should list all the \"full\" paths here, so it's easier to find when searching for API calls\r\nexport const webApiTypeRoot = 'admin/type/';\r\nconst webApiTypeGet = 'admin/type/get';\r\nconst webApiTypes = 'admin/type/list';\r\nconst webApiTypeScopes = 'admin/type/scopes';\r\nconst webApiTypeSave = 'admin/type/save';\r\nconst webApiTypeDelete = 'admin/type/delete';\r\nconst webApiTypeImport = 'admin/type/import';\r\nconst webApiTypeAddGhost = 'admin/type/addghost';\r\n\r\n@Injectable()\r\nexport class ContentTypesService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  private apiUrl(name: string) {\r\n    return this.dnnContext.$2sxc.http.apiUrl(name);\r\n  }\r\n\r\n  retrieveContentType(staticName: string) {\r\n    return this.http.get<ContentType>(this.apiUrl(webApiTypeGet), {\r\n      params: { appId: this.context.appId.toString(), contentTypeId: staticName }\r\n    });\r\n  }\r\n\r\n  retrieveContentTypes(scope: string) {\r\n    return this.http.get<ContentType[]>(this.apiUrl(webApiTypes), {\r\n      params: { appId: this.context.appId.toString(), scope }\r\n    });\r\n  }\r\n\r\n  // TODO: remove this method after upgrade to V2\r\n  getScopes() {\r\n    return this.http.get<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(this.apiUrl(webApiTypeScopes), {\r\n      params: { appId: this.context.appId.toString() }\r\n    }).pipe(\r\n      map(scopesData => {\r\n        // wip during upgrade:\r\n        const scopes = scopesData.old;\r\n        const scopeOptions: ScopeOption[] = Object.keys(scopes).map(key => ({ name: scopes[key], value: key }));\r\n        return scopeOptions;\r\n      }),\r\n    );\r\n  }\r\n\r\n  getScopesV2() {\r\n    return this.http.get<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(this.apiUrl(webApiTypeScopes), {\r\n      params: { appId: this.context.appId.toString() }\r\n    }).pipe(\r\n      map(scopesData => scopesData.scopes),\r\n    );\r\n  }\r\n\r\n  save(contentType: ContentTypeEdit) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiTypeSave), contentType, {\r\n      params: { appid: this.context.appId.toString() },\r\n    });\r\n  }\r\n\r\n  delete(contentType: ContentType) {\r\n    return this.http.delete<boolean>(this.apiUrl(webApiTypeDelete), {\r\n      params: { appid: this.context.appId.toString(), staticName: contentType.StaticName },\r\n    });\r\n  }\r\n\r\n  import(files: File[]) {\r\n    const formData = new FormData();\r\n    for (const file of files) {\r\n      formData.append('File', file);\r\n    }\r\n    return this.http.post<FileUploadResult>(this.apiUrl(webApiTypeImport), formData, {\r\n      params: { appId: this.context.appId.toString(), zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  createGhost(sourceStaticName: string) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiTypeAddGhost), null, {\r\n      params: { appid: this.context.appId.toString(), sourceStaticName },\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { Context } from '../../shared/services/context';\r\nimport { Query } from '../models/query.model';\r\nimport { webApiEntityList } from '../../shared/services/entity.service';\r\n\r\nconst webApiQueryImport = 'admin/query/import';\r\nconst webApiQueryClone = 'admin/query/Clone';\r\nconst webApiQueryDelete = 'admin/query/Delete';\r\nexport const webApiQueryRun = 'admin/query/Run';\r\nexport const webApiQueryDebugStream = 'admin/query/DebugStream';\r\nexport const webApiQuerySave = 'admin/query/Save';\r\nexport const webApiQueryGet = 'admin/query/Get';\r\nexport const webApiQueryDataSources = 'admin/query/DataSources';\r\n\r\n@Injectable()\r\nexport class PipelinesService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAll(contentType: string) {\r\n    return this.http.get<Query[]>(this.dnnContext.$2sxc.http.apiUrl(webApiEntityList), {\r\n      params: { appId: this.context.appId.toString(), contentType }\r\n    });\r\n  }\r\n\r\n  importQuery(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryImport), {\r\n          AppId: this.context.appId.toString(),\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n\r\n  clonePipeline(id: number) {\r\n    return this.http.get<null>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryClone), {\r\n      params: { Id: id.toString(), appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.http.delete<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryDelete), {\r\n      params: { appId: this.context.appId.toString(), Id: id.toString() },\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { ViewUsage } from '../models/view-usage.model';\r\nimport { View } from '../models/view.model';\r\n\r\nconst webApiViewRoot = 'admin/view/';\r\nconst webApiViews = webApiViewRoot + 'all';\r\nconst webApiViewDelete = webApiViewRoot + 'delete';\r\nconst webApiViewImport = webApiViewRoot + 'import';\r\nconst webApiViewPolymorph = webApiViewRoot + 'polymorphism';\r\nconst webApiViewUsage = webApiViewRoot + 'usage';\r\n\r\n@Injectable()\r\nexport class ViewsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAll() {\r\n    return this.http.get<View[]>(this.dnnContext.$2sxc.http.apiUrl(webApiViews), {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.http.get<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiViewDelete), {\r\n      params: { appId: this.context.appId.toString(), Id: id.toString() },\r\n    });\r\n  }\r\n\r\n  import(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiViewImport), formData, {\r\n      params: { appId: this.context.appId.toString(), zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  export(id: number) {\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(webApiViewRoot + 'json')\r\n      + '?appId=' + this.context.appId\r\n      + '&viewId=' + id;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  getPolymorphism() {\r\n    return this.http.get<Polymorphism>(this.dnnContext.$2sxc.http.apiUrl(webApiViewPolymorph), {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  getUsage(guid: string) {\r\n    return this.http.get<ViewUsage[]>(this.dnnContext.$2sxc.http.apiUrl(webApiViewUsage), {\r\n      params: { appId: this.context.appId.toString(), guid }\r\n    });\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Delete {{ dialogData.entityTitle }} ({{ dialogData.entityId }})?</mat-card-title>\r\n    @if (dialogData.message) {\r\n      <mat-card-subtitle [innerHtml]=\"dialogData.message | safeHtml\"></mat-card-subtitle>\r\n    }\r\n  </mat-card-header>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog(true)\">Delete</button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { Component, HostBinding, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog.models';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { SafeHtmlPipe } from '../../shared/pipes/safe-html.pipe';\r\n\r\n@Component({\r\n  selector: 'app-confirm-delete-dialog',\r\n  templateUrl: './confirm-delete-dialog.component.html',\r\n  styleUrls: ['./confirm-delete-dialog.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatCardModule,\r\n    MatButtonModule,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class ConfirmDeleteDialogComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: ConfirmDeleteDialogData,\r\n    private dialogRef: MatDialogRef<ConfirmDeleteDialogComponent>,\r\n  ) { }\r\n\r\n  closeDialog(confirm?: boolean) {\r\n    this.dialogRef.close(confirm);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { MetadataActionsParams } from './metadata-actions.models';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatRippleModule } from '@angular/material/core';\r\n\r\n@Component({\r\n  selector: 'app-metadata-actions',\r\n  templateUrl: './metadata-actions.component.html',\r\n  styleUrls: ['./metadata-actions.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n  ],\r\n})\r\nexport class MetadataActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & MetadataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & MetadataActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deleteMetadata(): void {\r\n    const metadata: MetadataItem = this.params.data;\r\n    this.params.onDelete(metadata);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deleteMetadata()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n  selector: 'app-metadata-content-type',\r\n  templateUrl: './metadata-content-type.component.html',\r\n  styleUrls: ['./metadata-content-type.component.scss'],\r\n  standalone: true,\r\n  imports: [TippyDirective,],\r\n})\r\nexport class MetadataContentTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  metadata: MetadataItem;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.metadata = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"container\" [tippy]=\"metadata._Type.Description\" [tippyDisabled]=\"!metadata._Type.Description\">\r\n  {{ value }}\r\n</div>\r\n","@if (viewModel$ | async; as vm) {\r\n  <mat-card>\r\n    <mat-card-header>\r\n      <mat-card-title>Create Metadata</mat-card-title>\r\n      <mat-card-subtitle>\r\n        This is a special operation to add an item which is metadata for another item,\r\n        see <a href=\"https://go.2sxc.org/metadata\" target=\"_blank\">docs</a>.\r\n      </mat-card-subtitle>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      <form [formGroup]=\"form\">\r\n        <!-- Scope -->\r\n        @if (advancedMode && guidedContentType) {\r\n          <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n            <mat-label>Scope</mat-label>\r\n            <mat-select formControlName=\"scope\" [placeholder]=\"!vm.scopeOptions.length ? 'No items found' : ''\">\r\n              @for (scopeOption of vm.scopeOptions; track scopeOption) {\r\n                <mat-option [value]=\"scopeOption.value\">\r\n                  {{ scopeOption.name }}\r\n                </mat-option>\r\n              }\r\n              <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n            </mat-select>\r\n          </mat-form-field>\r\n          <app-field-hint>\r\n            The scope should almost never be changed -\r\n            <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n          </app-field-hint>\r\n        }\r\n        <!-- Content Type of metadata item -->\r\n        <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n          <mat-label>Content Type</mat-label>\r\n          @if (guidedContentType) {\r\n            <mat-select formControlName=\"contentType\" required\r\n              [placeholder]=\"!vm.contentTypes.length ? 'No items found' : ''\">\r\n              @for (contentType of vm.contentTypes; track contentType) {\r\n                <mat-option [value]=\"contentType.StaticName\">\r\n                  {{ contentType.Label }}\r\n                </mat-option>\r\n              }\r\n            </mat-select>\r\n          }\r\n          @if (!guidedContentType) {\r\n            <input matInput type=\"text\" formControlName=\"contentType\" required>\r\n          }\r\n          <div matTextSuffix>\r\n            <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': guidedContentType }\" tippy=\"Pick existing value\"\r\n              (click)=\"toggleGuidedContentType(true)\">\r\n              <mat-icon>search</mat-icon>\r\n            </button>\r\n            <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': !guidedContentType }\" tippy=\"Manual entry\"\r\n              (click)=\"toggleGuidedContentType(false)\">\r\n              <mat-icon>text_fields</mat-icon>\r\n            </button>\r\n          </div>\r\n        </mat-form-field>\r\n        @if (form.controls.contentType.touched && form.controls.contentType.errors?.required) {\r\n          <app-field-hint\r\n            [isError]=\"true\">\r\n            This field is required\r\n          </app-field-hint>\r\n        }\r\n      </form>\r\n    </mat-card-content>\r\n    <mat-card-actions class=\"eav-card-actions\">\r\n      <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n        {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n      </mat-slide-toggle>\r\n      <div>\r\n        <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n        <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\" (click)=\"confirm()\">\r\n          Confirm\r\n        </button>\r\n      </div>\r\n    </mat-card-actions>\r\n  </mat-card>\r\n}\r\n","import { Component, HostBinding, OnDestroy, OnInit } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators, FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { BehaviorSubject, combineLatest, distinctUntilChanged, map, Observable, startWith } from 'rxjs';\r\nimport { ContentType } from '../../app-administration/models';\r\nimport { ContentTypesService } from '../../app-administration/services';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { MetadataSaveDialogViewModel, MetadataSaveFormValues } from './metadata-save-dialog.models';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgClass, AsyncPipe } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { transient } from '../../core';\r\n\r\n@Component({\r\n  selector: 'app-metadata-save-dialog',\r\n  templateUrl: './metadata-save-dialog.component.html',\r\n  styleUrls: ['./metadata-save-dialog.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatCardModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatInputModule,\r\n    MatButtonModule,\r\n    NgClass,\r\n    MatIconModule,\r\n    MatSlideToggleModule,\r\n    AsyncPipe,\r\n    FieldHintComponent,\r\n    ClickStopPropagationDirective,\r\n  ]\r\n})\r\nexport class MetadataSaveDialogComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  viewModel$: Observable<MetadataSaveDialogViewModel>;\r\n  guidedContentType = true;\r\n  advancedMode = false;\r\n\r\n  private contentTypes$: BehaviorSubject<ContentType[]>;\r\n  private scopeOptions$: BehaviorSubject<ScopeOption[]>;\r\n\r\n  private contentTypesService = transient(ContentTypesService);\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<MetadataSaveDialogComponent>,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.contentTypes$ = new BehaviorSubject<ContentType[]>([]);\r\n    this.scopeOptions$ = new BehaviorSubject<ScopeOption[]>([]);\r\n\r\n    this.buildForm();\r\n    this.fetchScopes();\r\n\r\n    this.viewModel$ = combineLatest([this.contentTypes$, this.scopeOptions$]).pipe(\r\n      map(([contentTypes, scopeOptions]) => {\r\n        const viewModel: MetadataSaveDialogViewModel = {\r\n          contentTypes,\r\n          scopeOptions,\r\n        };\r\n        return viewModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.contentTypes$.complete();\r\n    this.scopeOptions$.complete();\r\n  }\r\n\r\n  closeDialog(contentType?: string): void {\r\n    this.dialogRef.close(contentType);\r\n  }\r\n\r\n  toggleGuidedContentType(guidedContentType: boolean): void {\r\n    this.guidedContentType = guidedContentType;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: MetadataSaveFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.contentType);\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({});\r\n    this.form.addControl('contentType', new UntypedFormControl(null, [Validators.required]));\r\n    this.form.addControl('scope', new UntypedFormControl(eavConstants.scopes.default.value));\r\n\r\n    this.form.controls.scope.valueChanges.pipe(\r\n      startWith(this.form.controls.scope.value),\r\n      distinctUntilChanged(),\r\n    ).subscribe((newScope: string) => {\r\n      // reset content types when scope changes\r\n      if (this.form.controls.contentType.value != null) {\r\n        this.form.controls.contentType.patchValue(null);\r\n      }\r\n\r\n      // add new scope on manual entry\r\n      if (newScope === dropdownInsertValue) {\r\n        newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n        if (!this.scopeOptions$.value.some(option => option.value === newScope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: newScope,\r\n            value: newScope,\r\n          };\r\n          this.scopeOptions$.next([newScopeOption, ...this.scopeOptions$.value]);\r\n        }\r\n        this.form.controls.scope.patchValue(newScope);\r\n      } else {\r\n        this.fetchContentTypes(newScope);\r\n      }\r\n    });\r\n  }\r\n\r\n  private fetchContentTypes(scope: string): void {\r\n    this.contentTypesService.retrieveContentTypes(scope).subscribe(contentTypes => {\r\n      this.contentTypes$.next(contentTypes);\r\n    });\r\n  }\r\n\r\n  private fetchScopes(): void {\r\n    this.contentTypesService.getScopes().subscribe(scopes => {\r\n      this.scopeOptions$.next(scopes);\r\n    });\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"eav-dialog nav-component-wrapper\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">\r\n        {{ title || 'Metadata' }}\r\n      </div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n    <div class=\"eav-dialog-content nav-component-wrapper\">\r\n      <p>\r\n        @if (!vm.itemFor) {\r\n          This item is not metadata for anything else.\r\n        }\r\n        @else {\r\n          This item is metadata for:\r\n          <br>Target: {{ vm.itemFor.Target }}\r\n          <br>TargetType: {{ vm.itemFor.TargetType }}\r\n          @if (vm.itemFor.KeyNumber) {\r\n            <br>Key Number: {{ vm.itemFor.KeyNumber }}\r\n          }\r\n          @if (vm.itemFor.KeyGuid) {\r\n            <br>Key Guid: {{ vm.itemFor.KeyGuid }}\r\n          }\r\n          @if (vm.itemFor.KeyString) {\r\n            <br>Key String: {{ vm.itemFor.KeyString }}\r\n          }\r\n          @if (vm.itemFor.Title) {\r\n            <br>Title: {{ vm.itemFor.Title }}\r\n          }\r\n        }\r\n      </p>\r\n      <router-outlet></router-outlet>\r\n      <div class=\"grid-wrapper\">\r\n        <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.metadata\" [gridOptions]=\"gridOptions\">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\">\r\n      @if (vm.recommendations.length === 0) {\r\n        <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new metadata for this item\"\r\n          (click)=\"createMetadata()\">\r\n          <mat-icon>add</mat-icon>\r\n        </button>\r\n      }\r\n      @if (vm.recommendations.length > 0) {\r\n        <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': vm.fabOpen }\"\r\n          (openChange)=\"openChange($event)\">\r\n          <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n            <button mat-fab>\r\n              <mat-icon class=\"spin180\">{{ vm.fabOpen ? 'close' : 'add' }}</mat-icon>\r\n            </button>\r\n          </eco-fab-speed-dial-trigger>\r\n          <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n            <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Other Content Type\"\r\n              (click)=\"createMetadata()\">\r\n              <mat-icon>search</mat-icon>\r\n            </button>\r\n            @for (recommendation of vm.recommendations; track recommendation) {\r\n              <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" [attr.label]=\"recommendation.Title\"\r\n                (click)=\"createMetadata(recommendation)\">\r\n                @if (recommendation.Icon) {\r\n                  <div style=\"color: white; fill: white;\" [innerHTML]=\"recommendation.Icon | safeHtml\"\r\n                    [matBadgeHidden]=\"recommendation.Enabled\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadge=\"💎\"\r\n                    matBadgePosition=\"below after\" aria-hidden=\"false\"></div>\r\n                } @else {\r\n                  <mat-icon>add</mat-icon>\r\n                }\r\n              </button>\r\n            }\r\n          </eco-fab-speed-dial-actions>\r\n        </eco-fab-speed-dial>\r\n      }\r\n    </mat-dialog-actions>\r\n  </div>\r\n}\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef, MatDialogActions } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router, RouterOutlet } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, map, Observable, take } from 'rxjs';\r\nimport { ContentItemsService } from '../content-items/services/content-items.service';\r\nimport { EntityEditService } from '../shared/services/entity-edit.service';\r\nimport { EavFor } from '../edit/shared/models/eav';\r\nimport { MetadataService } from '../permissions';\r\nimport { BaseWithChildDialogComponent } from '../shared/components/base-with-child-dialog.component';\r\nimport { IdFieldComponent } from '../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { eavConstants, MetadataKeyType } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../shared/models/edit-form.model';\r\nimport { ConfirmDeleteDialogComponent } from './confirm-delete-dialog/confirm-delete-dialog.component';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { MetadataActionsComponent } from './metadata-actions/metadata-actions.component';\r\nimport { MetadataActionsParams } from './metadata-actions/metadata-actions.models';\r\nimport { MetadataContentTypeComponent } from './metadata-content-type/metadata-content-type.component';\r\nimport { MetadataSaveDialogComponent } from './metadata-save-dialog/metadata-save-dialog.component';\r\nimport { MetadataDto, MetadataItem, MetadataRecommendation, MetadataViewModel } from './models/metadata.model';\r\nimport { openFeatureDialog } from '../features/shared/base-feature.component';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { NgClass, AsyncPipe } from '@angular/common';\r\nimport { EcoFabSpeedDialComponent, EcoFabSpeedDialTriggerComponent, EcoFabSpeedDialActionsComponent } from '@ecodev/fab-speed-dial';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { EavLogger } from '../shared/logging/eav-logger';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { SafeHtmlPipe } from '../shared/pipes/safe-html.pipe';\r\nimport { transient } from '../core';\r\n\r\nconst logThis = false;\r\n@Component({\r\n  selector: 'app-metadata',\r\n  templateUrl: './metadata.component.html',\r\n  styleUrls: ['./metadata.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    SxcGridModule,\r\n    MatDialogActions,\r\n    EcoFabSpeedDialComponent,\r\n    NgClass,\r\n    EcoFabSpeedDialTriggerComponent,\r\n    EcoFabSpeedDialActionsComponent,\r\n    MatBadgeModule,\r\n    AsyncPipe,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class MetadataComponent extends BaseWithChildDialogComponent implements OnInit, OnDestroy {\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private entitiesService = transient(EntityEditService);\r\n  private metadataService = transient(MetadataService);\r\n  private contentItemsService = transient(ContentItemsService);\r\n\r\n  private metadataSet$ = new BehaviorSubject<MetadataDto>({ Items: [], Recommendations: [] } as MetadataDto);\r\n  private itemFor$ = new BehaviorSubject<EavFor | undefined>(undefined);\r\n  private fabOpen$ = new BehaviorSubject(false);\r\n  private targetType = parseInt(this.route.snapshot.paramMap.get('targetType'), 10);\r\n  private keyType = this.route.snapshot.paramMap.get('keyType') as MetadataKeyType;\r\n  private key = this.route.snapshot.paramMap.get('key');\r\n  title = decodeURIComponent(this.route.snapshot.paramMap.get('title') ?? '');\r\n  private contentTypeStaticName = this.route.snapshot.paramMap.get('contentTypeStaticName');\r\n  viewModel$: Observable<MetadataViewModel>;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private dialogRef: MatDialogRef<MetadataComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    super(router, route, new EavLogger('MetadataComponent', logThis));\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchFor();\r\n    this.fetchMetadata();\r\n    this.subscriptions.add(\r\n      this.childDialogClosed$().subscribe(() => { this.fetchMetadata(); })\r\n    );\r\n\r\n    const logFilteredRecs = this.log.rxTap('filteredRecs$');\r\n    this.metadataSet$.subscribe((set) => {\r\n      this.log.a('test 2dm', { set });\r\n    });\r\n\r\n    const filteredRecs$ = this.metadataSet$.pipe(\r\n      logFilteredRecs.pipe(),\r\n      map((set) => set.Recommendations.filter(r => set.Items.filter(i => i._Type.Id === r.Id).length < r.Count)),\r\n      logFilteredRecs.map(),\r\n    );\r\n\r\n    const logViewModel = this.log.rxTap('viewModel$');\r\n    this.viewModel$ = combineLatest([this.metadataSet$, filteredRecs$, this.itemFor$, this.fabOpen$]).pipe(\r\n      logViewModel.pipe(),\r\n      map(([metadata, recommendations, itemFor, fabOpen]) => {\r\n        const viewModel: MetadataViewModel = {\r\n          metadata: metadata.Items,\r\n          recommendations,\r\n          itemFor,\r\n          fabOpen,\r\n        };\r\n        return viewModel;\r\n      }),\r\n      logViewModel.map(),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.log.a('destroying');\r\n    this.metadataSet$.complete();\r\n    this.itemFor$.complete();\r\n    this.fabOpen$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  openChange(open: boolean) {\r\n    this.fabOpen$.next(open);\r\n  }\r\n\r\n  createMetadata(recommendation?: MetadataRecommendation) {\r\n    if (recommendation) {\r\n      // If the feature is not enabled, open the info dialog instead of metadata\r\n      if (!recommendation.Enabled) {\r\n        openFeatureDialog(this.dialog, recommendation.MissingFeature, this.viewContainerRef, this.changeDetectorRef);\r\n        return;\r\n      }\r\n      // Feature is enabled, check if it's an empty metadata\r\n      if (recommendation.CreateEmpty) {\r\n        this.snackBar.open(`Creating ${recommendation.Name}...`);\r\n        this.entitiesService.create(recommendation.Id, { For: this.calculateItemFor() }).subscribe({\r\n          error: () => {\r\n            this.snackBar.open(`Creating ${recommendation.Name} failed. Please check console for more info`, undefined, { duration: 3000 });\r\n            this.fetchMetadata();\r\n          },\r\n          next: () => {\r\n            this.snackBar.open(`Created ${recommendation.Name}`, undefined, { duration: 3000 });\r\n            this.fetchMetadata();\r\n          },\r\n        });\r\n      } else {\r\n        // Default case - open new-metadata dialog\r\n        this.createMetadataForm(recommendation.Id);\r\n      }\r\n      return;\r\n    }\r\n    const metadataDialogRef = this.dialog.open(MetadataSaveDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    metadataDialogRef.afterClosed().subscribe((contentType?: string) => {\r\n      if (contentType == null) return;\r\n      this.createMetadataForm(contentType);\r\n    });\r\n  }\r\n\r\n  private createMetadataForm(contentType: string) {\r\n    const form: EditForm = {\r\n      items: [{\r\n        ContentTypeName: contentType,\r\n        For: this.calculateItemFor(),\r\n      }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private calculateItemFor(): EavFor {\r\n    const itemFor: EavFor = {\r\n      Target: Object.values(eavConstants.metadata).find(m => m.targetType === this.targetType)?.target ?? this.targetType.toString(),\r\n      TargetType: this.targetType,\r\n      ...(this.keyType === eavConstants.keyTypes.guid && { Guid: this.key }),\r\n      ...(this.keyType === eavConstants.keyTypes.number && { Number: parseInt(this.key, 10) }),\r\n      ...(this.keyType === eavConstants.keyTypes.string && { String: this.key }),\r\n    };\r\n    return itemFor;\r\n  }\r\n\r\n  private fetchFor() {\r\n    if (!this.contentTypeStaticName) { return; }\r\n\r\n    this.contentItemsService.getAll(this.contentTypeStaticName).subscribe(items => {\r\n      const item = items.find(i => i.Guid === this.key);\r\n      if (item?.For) {\r\n        this.itemFor$.next(item.For);\r\n      }\r\n    });\r\n  }\r\n\r\n  private fetchMetadata() {\r\n    const logGetMetadata = this.log.rxTap('getMetadata');\r\n    this.metadataService.getMetadata(this.targetType, this.keyType, this.key)\r\n      .pipe(\r\n        logGetMetadata.pipe(),\r\n        take(1),\r\n        map(metadata => {\r\n          metadata.Recommendations.forEach(r => {\r\n            if (r.Icon?.startsWith('base64:')) {\r\n              r.Icon = r.Icon.replace('base64:', '');\r\n              r.Icon = window.atob(r.Icon);\r\n              // used for coloring black icons to white\r\n              r.Icon = r.Icon.replace('fill=\"#000000\"', 'fill=\"#ffffff\"');\r\n            }\r\n          });\r\n          return metadata;\r\n        }),\r\n        logGetMetadata.map(),\r\n      )\r\n      // 2024-05-30 2dm - this standard shorthand seems to fail\r\n      // for reasons unknown to me. I've replaced it with the longhand\r\n      // The problem occurs when the metadataSet$ is updated after the initial load.\r\n      // .subscribe(this.metadataSet$);\r\n      .subscribe(data => this.metadataSet$.next(data));\r\n  }\r\n\r\n  private editMetadata(metadata: MetadataItem) {\r\n    const form: EditForm = {\r\n      items: [{ EntityId: metadata.Id }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private deleteMetadata(metadata: MetadataItem, confirmed = false) {\r\n    if (!confirmed) {\r\n      const data: ConfirmDeleteDialogData = {\r\n        entityId: metadata.Id,\r\n        entityTitle: metadata.Title,\r\n        message: this.metadataSet$.value.Recommendations.find(r => r.Id === metadata._Type.Id)?.DeleteWarning,\r\n      };\r\n      const confirmationDialogRef = this.dialog.open(ConfirmDeleteDialogComponent, {\r\n        autoFocus: false,\r\n        data,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n      confirmationDialogRef.afterClosed().subscribe((isConfirmed: boolean) => {\r\n        if (isConfirmed)\r\n          this.deleteMetadata(metadata, true);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.snackBar.open('Deleting...');\r\n    this.entitiesService.delete(metadata._Type.Id, metadata.Id, false).subscribe({\r\n      next: () => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.fetchMetadata();\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Delete failed. Please check console for more information', null, { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.Id,\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<MetadataItem> = {\r\n              tooltipGetter: (metadata: MetadataItem) => `ID: ${metadata.Id}\\nGUID: ${metadata.Guid}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Title',\r\n          onCellClicked: (params) => {\r\n            const metadata: MetadataItem = params.data;\r\n            this.editMetadata(metadata);\r\n          },\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          valueGetter: (params) => {\r\n            const metadata: MetadataItem = params.data;\r\n            return `${metadata._Type.Name}${metadata._Type.Title !== metadata._Type.Name ? ` (${metadata._Type.Title})` : ''}`;\r\n          },\r\n          cellRenderer: MetadataContentTypeComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: MetadataActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: MetadataActionsParams = {\r\n              onDelete: (metadata) => this.deleteMetadata(metadata),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","import { Route } from '@angular/router';\r\nimport { eavConstants, MetadataKeyType } from '../shared/constants/eav.constants';\r\n\r\nexport class GoToPermissions {\r\n\r\n  static route: Route = {\r\n    path: 'permissions/:targetType/:keyType/:key',\r\n    loadChildren: () => import('./permissions.routing').then(m => m.permissionRoutes),\r\n    // loadChildren: () => import('./permissions.module').then(m => m.PermissionsModule),\r\n    data: { title: 'Permissions' },\r\n  };\r\n\r\n  static getUrl(targetType: number, keyType: MetadataKeyType, key: string): string {\r\n    return `permissions/${targetType}/${keyType}/${key}`;\r\n  }\r\n\r\n  static getUrlApp(appId: number): string {\r\n    return this.getUrl(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, appId.toString());\r\n  }\r\n\r\n  static getUrlAttribute(id: number): string {\r\n    return this.getUrl(eavConstants.metadata.attribute.targetType, eavConstants.metadata.attribute.keyType, id.toString());\r\n  }\r\n\r\n  /** For historic reasons, it's the same as Entity */\r\n  static getUrlContentType(guid: string): string {\r\n    return this.getUrlEntity(guid);\r\n  }\r\n\r\n  static getUrlEntity(guid: string): string {\r\n    return this.getUrl(eavConstants.metadata.entity.targetType, eavConstants.metadata.entity.keyType, guid);\r\n  }\r\n\r\n  static getUrlLanguage(id: string): string {\r\n    return this.getUrl(eavConstants.metadata.language.targetType, eavConstants.metadata.language.keyType, id);\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const permissionsDialog: DialogConfig = {\r\n  name: 'SET_PERMISSIONS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { PermissionsComponent } = await import('./permissions.component');\r\n    return PermissionsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { permissionsDialog } from './permissions-dialog.config';\r\nimport { EditRoutesSubItems } from '../edit/edit.routing';\r\n\r\nexport const permissionRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: permissionsDialog },\r\n    children: EditRoutesSubItems\r\n  },\r\n];\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, Input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatFormFieldModule,\r\n    NgClass,\r\n    NgTemplateOutlet\r\n  ]\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","import { Directive, HostListener } from '@angular/core';\r\n\r\nconst logThis = false;\r\n\r\n@Directive({\r\n  selector: '[appClickStopPropagation]',\r\n  standalone: true,\r\n})\r\nexport class ClickStopPropagationDirective {\r\n  constructor() {\r\n    if (logThis)\r\n      console.log('ClickStopPropagationDirective.constructor');\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    if (logThis)\r\n      console.log('ClickStopPropagationDirective.onClick', event);\r\n    event.stopPropagation();\r\n  }\r\n\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { ContentType } from '../../app-administration/models/content-type.model';\r\nimport { webApiTypeRoot } from '../../app-administration/services/content-types.service';\r\nimport { Context } from '../services/context';\r\nimport { Field, FieldInputTypeOption } from './field.model';\r\nimport { InputTypeMetadata } from './input-type-metadata.model';\r\nimport { InputTypeStrict } from './input-type-catalog';\r\n\r\nexport const webApiFieldsRoot = 'admin/field/';\r\nexport const webApiFieldsAll = 'admin/field/all';\r\nexport const webApiFieldsGetShared = 'admin/field/GetSharedFields';\r\n\r\n@Injectable()\r\nexport class ContentTypesFieldsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  private apiUrl(name: string) {\r\n    return this.dnnContext.$2sxc.http.apiUrl(name);\r\n  }\r\n\r\n  typeListRetrieve() {\r\n    return this.http.get<string[]>(this.apiUrl(webApiFieldsRoot + 'DataTypes'), {\r\n      params: { appid: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  getInputTypesList() {\r\n    return this.http\r\n      .get<InputTypeMetadata[]>(this.apiUrl(webApiFieldsRoot + 'InputTypes'), { params: { appid: this.context.appId.toString() } })\r\n      .pipe(\r\n        map(inputConfigs => {\r\n          const inputTypeOptions = inputConfigs.map(config => {\r\n            const option: FieldInputTypeOption = {\r\n              dataType: config.Type.substring(0, config.Type.indexOf('-')),\r\n              inputType: config.Type,\r\n              label: config.Label,\r\n              description: config.Description,\r\n              isDefault: config.IsDefault,\r\n              isObsolete: config.IsObsolete,\r\n              isRecommended: config.IsRecommended,\r\n              obsoleteMessage: config.ObsoleteMessage,\r\n              icon: config.IsDefault ? 'star' : config.IsRecommended ? 'star_outline' : null,\r\n            };\r\n            return option;\r\n          });\r\n          return inputTypeOptions;\r\n        }),\r\n      );\r\n  }\r\n\r\n  getReservedNames() {\r\n    return this.http.get<Record<string, string>>(this.apiUrl(webApiFieldsRoot + 'ReservedNames'));\r\n  }\r\n\r\n  /** Get all fields for some content type */\r\n  getFields(contentTypeStaticName: string) {\r\n    return this.http\r\n      .get<Field[]>(this.apiUrl(webApiFieldsAll), {\r\n        params: { appid: this.context.appId.toString(), staticName: contentTypeStaticName },\r\n      })\r\n      .pipe(\r\n        map(fields => {\r\n          if (fields) {\r\n            for (const fld of fields) {\r\n              if (!fld.Metadata) { continue; }\r\n              const md = fld.Metadata;\r\n              const allMd = md.All;\r\n              const typeMd = md[fld.Type];\r\n              const inputMd = md[fld.InputType];\r\n              md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n            }\r\n          }\r\n          return fields;\r\n        }),\r\n      );\r\n  }\r\n\r\n  /** Get all possible sharable fields for a new sharing */\r\n  getShareableFields() {\r\n    return this.http.get<Field[]>(this.apiUrl(webApiFieldsGetShared), {\r\n        params: { appid: this.context.appId.toString() },\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Get sharable fields which are possible for this attribute.\r\n   * \r\n   * Reason is that eg. a bool-attribute can only receive metadata from a bool attribute, etc.\r\n   * \r\n   * @param attributeId the existing attributeId which will receive the new metadata\r\n   */\r\n  getShareableFieldsFor(attributeId: number) {\r\n    // TODO: @SDV - do the same as in getShareableFields()\r\n    // but add parameter attributeId to the webapi call\r\n    // I'll create the backend afterwards\r\n    return this.http\r\n      .get<Field[]>(this.apiUrl(webApiFieldsGetShared), {\r\n        params: { appid: this.context.appId.toString(), attributeId: attributeId.toString() },\r\n      });\r\n  }\r\n\r\n  addInheritedField(targetContentTypeId: number, sourceContentTypeStaticName: string, sourceFieldGuid: string, newName: string) {\r\n    return this.http.post<number>(this.apiUrl(webApiFieldsRoot + 'AddInheritedField'), null, {\r\n      params: {\r\n        AppId: this.context.appId.toString(),\r\n        ContentTypeId: targetContentTypeId.toString(),\r\n        SourceType: sourceContentTypeStaticName,\r\n        SourceField: sourceFieldGuid,\r\n        name: newName,\r\n      }\r\n    });\r\n  }\r\n\r\n  share(attributeId: number, share: boolean = true) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Share'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        attributeId: attributeId.toString(),\r\n        share,\r\n      },\r\n    });\r\n  }\r\n\r\n  inherit(attributeId: number, sourceFieldGuid: string) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Inherit'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        attributeId: attributeId.toString(),\r\n        inheritMetadataOf: sourceFieldGuid,\r\n      },\r\n    });\r\n  }\r\n\r\n  reOrder(idArray: number[], contentType: ContentType) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiFieldsRoot + 'Sort'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        order: JSON.stringify(idArray),\r\n      },\r\n    });\r\n  }\r\n\r\n  setTitle(item: Field, contentType: ContentType) {\r\n    return this.http.post<null>(this.apiUrl(webApiTypeRoot + 'SetTitle'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        attributeId: item.Id.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  rename(fieldId: number, contentTypeId: number, newName: string) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Rename'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentTypeId.toString(),\r\n        attributeId: fieldId.toString(),\r\n        newName,\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(item: Field, contentType: ContentType) {\r\n    if (item.IsTitle) {\r\n      throw new Error('Can\\'t delete Title');\r\n    }\r\n\r\n    return this.http.delete<boolean>(this.apiUrl(webApiFieldsRoot + 'Delete'), {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        attributeId: item.Id.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  add(newField: Partial<Field>, contentTypeId: number) {\r\n    return this.http.post<number>(this.apiUrl(webApiFieldsRoot + 'Add'), null, {\r\n      params: {\r\n        AppId: this.context.appId.toString(),\r\n        ContentTypeId: contentTypeId.toString(),\r\n        Id: newField.Id.toString(),\r\n        Type: newField.Type,\r\n        InputType: newField.InputType,\r\n        StaticName: newField.StaticName,\r\n        IsTitle: newField.IsTitle.toString(),\r\n        Index: newField.SortOrder.toString(),\r\n      }\r\n    });\r\n  }\r\n\r\n  updateInputType(id: number, staticName: string, inputType: InputTypeStrict) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiFieldsRoot + 'InputType'), null, {\r\n      params: { appId: this.context.appId.toString(), attributeId: id.toString(), field: staticName, inputType }\r\n    });\r\n  }\r\n}\r\n","export function toBase64(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n      resolve((reader.result as string).split(',')[1]);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n\r\nexport function toString(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsText(file);\r\n    reader.onload = () => {\r\n      resolve(reader.result as string);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n"],"x_google_ignoreList":[]}