{"version":3,"file":"projects_eav-ui_src_app_code-editor_code-editor_component_ts-projects_eav-ui_src_app_shared_s-8f907f.js","mappings":"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","sources":["./projects/eav-ui/src/app/code-editor/code-and-edition-warnings/code-and-edition-warnings.component.ts","./projects/eav-ui/src/app/code-editor/code-and-edition-warnings/code-and-edition-warnings.component.html","./projects/eav-ui/src/app/code-editor/code-editor.component.ts","./projects/eav-ui/src/app/code-editor/code-editor.component.html","./projects/eav-ui/src/app/code-editor/code-editor.models.ts","./projects/eav-ui/src/app/code-editor/code-snippets/code-snippets.component.ts","./projects/eav-ui/src/app/code-editor/code-snippets/code-snippets.component.html","./projects/eav-ui/src/app/code-editor/code-snippets/object-to-array.pipe.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.component.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.component.html","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.helpers.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.models.ts","./projects/eav-ui/src/app/code-editor/code-templates/depth-padding.pipe.ts","./projects/eav-ui/src/app/code-editor/code-templates/order-items.pipe.ts","./projects/eav-ui/src/app/code-editor/services/snippets.service.ts","./projects/eav-ui/src/app/monaco-editor/index.ts","./projects/eav-ui/src/app/monaco-editor/monaco-editor.models.ts","./projects/eav-ui/src/app/shared/directives/toggle-debug.directive.ts","./projects/eav-ui/src/app/shared/fields/data-type-catalog.ts","./projects/eav-ui/src/app/shared/services/entity.service.ts","./projects/eav-ui/src/app/shared/services/query.service.ts","./projects/eav-ui/src/app/shared/services/service-base.ts"],"sourcesContent":["import { Component, Inject } from '@angular/core';\r\nimport { MatSnackBarRef, MAT_SNACK_BAR_DATA } from '@angular/material/snack-bar';\r\nimport { CodeAndEditionWarningsSnackBarData } from './code-and-edition-warnings.models';\r\nimport { MatButtonModule } from '@angular/material/button';\r\n\r\n@Component({\r\n  selector: 'app-code-and-edition-warnings',\r\n  templateUrl: './code-and-edition-warnings.component.html',\r\n  styleUrls: ['./code-and-edition-warnings.component.scss'],\r\n  standalone: true,\r\n  imports: [MatButtonModule],\r\n})\r\nexport class CodeAndEditionWarningsComponent {\r\n  constructor(\r\n    private snackRef: MatSnackBarRef<CodeAndEditionWarningsComponent>,\r\n    @Inject(MAT_SNACK_BAR_DATA) public snackBarData: CodeAndEditionWarningsSnackBarData,\r\n  ) { }\r\n\r\n  openCodeBehind(): void {\r\n    this.snackBarData.openCodeBehind = true;\r\n    this.snackRef.dismissWithAction();\r\n  }\r\n}\r\n","<div class=\"messages\">\r\n  @if (snackBarData.codeFile) {\r\n  <div>\"{{ snackBarData.fileName }}\" also has a code-behind file \"{{ snackBarData.codeFile }}\".</div>\r\n  <br>\r\n  }\r\n\r\n  @if (snackBarData.otherEditions) {\r\n  <div>\r\n    @if (snackBarData.edition) {\r\n    You are editing \"{{ snackBarData.edition }}\" edition.\r\n    }\r\n    There are {{ snackBarData.otherEditions }} other editions of \"{{ snackBarData.fileName }}\".\r\n    @if (!snackBarData.edition) {\r\n    You may be editing an edition which is not the one you see.\r\n    }\r\n    See <a href=\"https://go.2sxc.org/polymorphism\" target=\"_blank\">docs</a>.\r\n  </div>\r\n  }\r\n</div>\r\n\r\n<div class=\"actions\">\r\n  @if (snackBarData.codeFile) {\r\n  <button mat-button color=\"primary\" (click)=\"openCodeBehind()\">\r\n    Open code-behind file\r\n  </button>\r\n  }\r\n</div>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, computed, effect, NgZone, OnDestroy, OnInit, signal, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport type * as Monaco from 'monaco-editor';\r\nimport { forkJoin, fromEvent, of, share, switchMap } from 'rxjs';\r\nimport { Of, transient } from '../../../../core';\r\nimport { CreateFileDialogComponent, CreateFileDialogData, CreateFileDialogResult } from '../create-file-dialog';\r\nimport { isCtrlS } from '../edit/dialog/main/keyboard-shortcuts';\r\nimport { MonacoEditorComponent } from '../monaco-editor';\r\nimport { MonacoEditorComponent as MonacoEditorComponent_1 } from '../monaco-editor/monaco-editor.component';\r\nimport { BaseComponent } from '../shared/components/base.component';\r\nimport { keyIsShared, keyItems } from '../shared/constants/session.constants';\r\nimport { ClickStopPropagationDirective } from '../shared/directives/click-stop-propagation.directive';\r\nimport { TippyDirective } from '../shared/directives/tippy.directive';\r\nimport { ToggleDebugDirective } from '../shared/directives/toggle-debug.directive';\r\nimport { ViewOrFileIdentifier } from '../shared/models/edit-form.model';\r\nimport { RxHelpers } from '../shared/rxJs/rx.helpers';\r\nimport { Context } from '../shared/services/context';\r\nimport { CodeAndEditionWarningsComponent } from './code-and-edition-warnings/code-and-edition-warnings.component';\r\nimport { CodeAndEditionWarningsSnackBarData } from './code-and-edition-warnings/code-and-edition-warnings.models';\r\nimport { Explorers, Tab, ViewInfo, ViewKey } from './code-editor.models';\r\nimport { CodeSnippetsComponent } from './code-snippets/code-snippets.component';\r\nimport { CodeTemplatesComponent } from './code-templates/code-templates.component';\r\nimport { CreateTemplateParams } from './code-templates/code-templates.models';\r\nimport { FileAsset } from './models/file-asset.model';\r\nimport { SourceView } from './models/source-view.model';\r\nimport { SnippetsService } from './services/snippets.service';\r\nimport { SourceService } from './services/source.service';\r\n\r\n@Component({\r\n  selector: 'app-code-editor',\r\n  templateUrl: './code-editor.component.html',\r\n  styleUrls: ['./code-editor.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    NgClass,\r\n    MatIconModule,\r\n    CodeTemplatesComponent,\r\n    CodeSnippetsComponent,\r\n    MatProgressSpinnerModule,\r\n    MonacoEditorComponent_1,\r\n    MatButtonModule,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n    ToggleDebugDirective,\r\n  ],\r\n})\r\nexport class CodeEditorComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @ViewChild(MonacoEditorComponent) private monacoEditorRef: MonacoEditorComponent;\r\n\r\n  Explorers = Explorers;\r\n  activeExplorer: Of<typeof Explorers> = Explorers.Templates;\r\n  monacoOptions: Monaco.editor.IStandaloneEditorConstructionOptions = {\r\n    theme: '2sxc-dark',\r\n    tabSize: 2,\r\n    fixedOverflowWidgets: true,\r\n  };\r\n\r\n  #sourceSvc = transient(SourceService);\r\n  #snippetSvc = transient(SnippetsService);\r\n  #titleSvc = transient(Title);\r\n\r\n  templates = signal<FileAsset[]>([]);\r\n  activeView = signal<ViewKey>(undefined);\r\n  #openViews = signal<ViewKey[]>([]);\r\n  #viewInfos = signal<ViewInfo[]>([]);\r\n\r\n  // Computed signal that finds the active view information from the list of viewInfos.\r\n  // It checks if the activeView signal matches any viewKey in the viewInfos list using objectsEqual.\r\n  active = computed(() => {\r\n    const activeView = this.activeView();\r\n    return this.#viewInfos().find(v => RxHelpers.objectsEqual(v.viewKey, activeView));\r\n  })\r\n\r\n  // Each tab object includes the viewKey, label (file name or key), active state,\r\n  // modified state (if the view's code differs from the saved code), and loading state.\r\n  // It checks for matching view information in viewInfos using objectsEqual.\r\n  tabs = computed(() => {\r\n    const openViews = this.#openViews();\r\n    const activeView = this.activeView();\r\n    const viewInfos = this.#viewInfos();\r\n    return openViews.map(viewKey => {\r\n      const viewInfo = viewInfos.find(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n      return {\r\n        viewKey,\r\n        label: viewInfo?.view?.FileName ?? viewKey.key,\r\n        isActive: RxHelpers.objectsEqual(viewKey, activeView),\r\n        isModified: viewInfo?.view?.Code !== viewInfo?.savedCode,\r\n        isLoading: viewInfo?.view == null,\r\n      } satisfies Tab;\r\n    })\r\n  });\r\n\r\n  #urlItems: ViewOrFileIdentifier[];\r\n\r\n  constructor(\r\n    private context: Context,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n    private zone: NgZone,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) {\r\n    super();\r\n    this.context.init(this.route);\r\n    const codeItems: ViewOrFileIdentifier[] = JSON.parse(sessionStorage.getItem(keyItems));\r\n    const isShared = sessionStorage.getItem(keyIsShared) === 'true' ?? false; // // TODO: ensure correct comparison\r\n    codeItems.forEach(codeItem => {\r\n      // remove leading \"/\" from path\r\n      if (codeItem.Path.startsWith('/')) {\r\n        codeItem.Path = codeItem.Path.substring(1);\r\n      }\r\n      codeItem.IsShared ??= isShared;\r\n    });\r\n    this.#urlItems = codeItems;\r\n\r\n    // Update ViewInfo$ ongoing\r\n    effect(() => {\r\n      const templates = this.templates();\r\n      const openViews = this.#openViews();\r\n\r\n      // If there are no templates, exit early\r\n      if (templates.length === 0) return;\r\n\r\n      let viewInfos = this.#viewInfos();   // Retrieve the current viewInfos signal\r\n\r\n      // Find the `openViews` that are not yet loaded in `viewInfos`\r\n      const notLoaded = openViews.filter(viewKey => !viewInfos.some(v => RxHelpers.objectsEqual(v.viewKey, viewKey)));\r\n      // If all openViews are loaded, exit early\r\n      if (notLoaded.length === 0) return;\r\n\r\n      // Start data requests for the not yet loaded `openViews`\r\n      forkJoin(\r\n        notLoaded.map(viewKey => {\r\n          // Mark the `viewKey` in `viewInfos` to indicate that it is being loaded\r\n          const newViewInfo: ViewInfo = {\r\n            viewKey,\r\n          };\r\n          viewInfos = [...viewInfos, newViewInfo];\r\n\r\n          // Create observables for the view, snippets, and tooltips based on the viewKey\r\n          const view$ = this.#sourceSvc.get(viewKey.key, viewKey.shared, this.#urlItems).pipe(share());\r\n          const snippets$ = view$.pipe(switchMap(view => this.#snippetSvc.getSnippets(view)));\r\n          const tooltips$ = view$.pipe(switchMap(view => this.#snippetSvc.getTooltips(view.Extension.substring(1))));\r\n          return forkJoin([of(viewKey), view$, snippets$, tooltips$]);\r\n        })\r\n      ).subscribe(results => {\r\n        let viewInfos1 = this.#viewInfos();   // Retrieve the current viewInfos signal again\r\n\r\n        results.forEach(([viewKey, view, snippets, tooltips]) => {\r\n          // Find the index of the corresponding viewKey in the current viewInfos\r\n          const selectedIndex = viewInfos1.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n          // If the viewKey is not found, exit early\r\n          if (selectedIndex < 0) return;\r\n\r\n          // Update `viewInfos` with new data for the corresponding `viewKey`\r\n          const newViewInfo: ViewInfo = {\r\n            viewKey,\r\n            view,\r\n            explorerSnipps: snippets.sets,\r\n            editorSnipps: snippets.list,\r\n            tooltips,\r\n            savedCode: view.Code,\r\n          };\r\n          viewInfos1 = [...viewInfos1.slice(0, selectedIndex), newViewInfo, ...viewInfos1.slice(selectedIndex + 1)];\r\n\r\n          // Show warnings or other logic based on the loaded views\r\n          this.#showCodeAndEditionWarnings(viewKey, view, templates);\r\n        });\r\n\r\n        this.#viewInfos.set(viewInfos1);  // Set the new `viewInfos` in the signal\r\n      });\r\n\r\n      this.#viewInfos.set(viewInfos);   // Set the initial `viewInfos` before loading the data\r\n    },\r\n      { allowSignalWrites: true }\r\n    );\r\n\r\n    // Update title ongoing\r\n    effect(() => {\r\n      const activeView = this.activeView();\r\n      const viewInfos = this.#viewInfos();\r\n\r\n      // Check if viewInfos exist; exit early if not\r\n      if (!viewInfos) return;\r\n\r\n      // Find the active view information from viewInfos based on activeView\r\n      const active = viewInfos.find(v => RxHelpers.objectsEqual(v.viewKey, activeView));\r\n      const defaultTitle = 'Code Editor'; // Default title to use if no active view is found\r\n      // Construct the new title based on the active view or use the default title\r\n      const newTitle = active == null ? defaultTitle : `${active.view?.FileName} - ${defaultTitle}`;\r\n      const oldTitle = this.#titleSvc.getTitle(); // Get the current title from the title service\r\n\r\n      // If the new title is different from the old title, update it\r\n      if (newTitle !== oldTitle) {\r\n        console.log('newTitle', newTitle); // Log the new title\r\n        this.#titleSvc.setTitle(newTitle);  // Set the new title in the title service\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const initialViews = this.#urlItems.map(item => {\r\n      const viewKey: ViewKey = { key: item.EntityId?.toString() ?? item.Path, shared: item.IsShared };\r\n      return viewKey;\r\n    });\r\n\r\n    this.activeView.set(initialViews[0]);\r\n    this.#openViews.set(initialViews);\r\n\r\n    this.#attachListeners();\r\n\r\n    // Load templates\r\n    this.#sourceSvc.getAll().subscribe(templates => {\r\n      this.templates.set(templates);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  toggleExplorer(explorer: Of<typeof Explorers>): void {\r\n    this.activeExplorer = (this.activeExplorer !== explorer) ? explorer : null;\r\n  }\r\n\r\n  createTemplate(params: CreateTemplateParams): void {\r\n    // This FileLocationDialogComponent dialog is currently never going to be opened because it has been replaced by mat-menu\r\n    // in the code-templates.component.html template. If you want to use the dialog instead of the menu, you need to remove the\r\n    // mat-menu and replace it with a button that opens the dialog with empty parameters.\r\n    // Dialog has been replaced by menu because from update to Angular 16 CreateFileDialogComponent wasn't opening anymore if\r\n    // FileLocationDialogComponent dialog was used.\r\n    // if (params.isShared == null) {\r\n    //   const fileLocationDialogRef = this.dialog.open(FileLocationDialogComponent, {\r\n    //     autoFocus: false,\r\n    //     viewContainerRef: this.viewContainerRef,\r\n    //     width: '650px',\r\n    //   });\r\n    //   fileLocationDialogRef.afterClosed().subscribe((isShared?: boolean) => {\r\n    //     if (isShared == null) return;\r\n    //     params.isShared = isShared;\r\n    //     this.createTemplate(params);\r\n    //   });\r\n    //   return;\r\n    // }\r\n\r\n    const createFileDialogData: CreateFileDialogData = {\r\n      folder: params.folder,\r\n      global: params.isShared,\r\n      purpose: params.folder === 'api' || params.folder?.startsWith('api/') ? 'Api' : undefined,\r\n    };\r\n    const createFileDialogRef = this.matDialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data: createFileDialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    createFileDialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) return;\r\n\r\n      this.#sourceSvc.create(result.name, params.isShared, result.templateKey).subscribe(() => {\r\n        this.#sourceSvc.getAll().subscribe(files => {\r\n          this.templates.set(files);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  insertSnippet(snippet: string): void {\r\n    this.monacoEditorRef?.insertSnippet(snippet);\r\n  }\r\n\r\n  codeChanged(code: string, viewKey: ViewKey): void {\r\n    let viewInfos = this.#viewInfos();\r\n    const selectedIndex = viewInfos.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n    const selectedViewInfo = viewInfos[selectedIndex];\r\n    const newViewInfo: ViewInfo = {\r\n      ...selectedViewInfo,\r\n      view: {\r\n        ...selectedViewInfo.view,\r\n        Code: code,\r\n      },\r\n    };\r\n    viewInfos = [...viewInfos.slice(0, selectedIndex), newViewInfo, ...viewInfos.slice(selectedIndex + 1)];\r\n    this.#viewInfos.set(viewInfos);\r\n  }\r\n\r\n  openView(viewKey: ViewKey): void {\r\n    // fix viewKey because it can be a templateId or a path, and file might already be open\r\n    viewKey = this.#viewInfos().find(\r\n      v => !RxHelpers.objectsEqual(v.viewKey, viewKey) && v.view?.FileName === viewKey.key && v.view?.IsShared === viewKey.shared\r\n    )?.viewKey ?? viewKey;\r\n\r\n    const oldActiveView = this.activeView();\r\n    if (!RxHelpers.objectsEqual(oldActiveView, viewKey)) {\r\n      this.activeView.set(viewKey);\r\n    }\r\n    const oldOpenViews = this.#openViews();\r\n    if (!oldOpenViews.some(v => RxHelpers.objectsEqual(v, viewKey))) {\r\n      const newOpenViews = [...oldOpenViews, viewKey];\r\n      this.#openViews.set(newOpenViews);\r\n    }\r\n  }\r\n\r\n  closeEditor(viewKey: ViewKey): void {\r\n    const oldOpenViews = this.#openViews();\r\n    const newOpenViews = oldOpenViews.filter(key => !RxHelpers.objectsEqual(key, viewKey));\r\n\r\n    const oldActiveView = this.activeView();\r\n    if (RxHelpers.objectsEqual(oldActiveView, viewKey)) {\r\n      const newActiveView = oldOpenViews[oldOpenViews.findIndex(v => RxHelpers.objectsEqual(v, oldActiveView)) - 1] ?? newOpenViews[0];\r\n      this.activeView.set(newActiveView);\r\n    }\r\n    this.#openViews.set(newOpenViews);\r\n  }\r\n\r\n  save(viewKey?: ViewKey): void {\r\n    viewKey ??= this.activeView();\r\n    const viewInfo = this.#viewInfos().find(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n    if (viewInfo?.view == null) return;\r\n\r\n    this.snackBar.open('Saving...');\r\n    const codeToSave = viewInfo.view.Code;\r\n    this.#sourceSvc.save(viewKey.key, viewKey.shared, viewInfo.view, this.#urlItems).subscribe({\r\n      next: res => {\r\n        if (!res) {\r\n          this.snackBar.open('Failed', null, { duration: 2000 });\r\n          return;\r\n        }\r\n\r\n        let newViewInfos = [...this.#viewInfos()];\r\n        const selectedIndex = newViewInfos.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n        if (selectedIndex < 0) return;\r\n\r\n        const selectedViewInfo = newViewInfos[selectedIndex];\r\n        const newViewInfo: ViewInfo = {\r\n          ...selectedViewInfo,\r\n          savedCode: codeToSave,\r\n        };\r\n        newViewInfos = [...newViewInfos.slice(0, selectedIndex), newViewInfo, ...newViewInfos.slice(selectedIndex + 1)];\r\n        this.#viewInfos.set(newViewInfos);\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n      },\r\n      error: () => this.snackBar.open('Failed', null, { duration: 2000 }),\r\n    });\r\n  }\r\n\r\n  /** Show info about editions if other files with the same name exist */\r\n  #showCodeAndEditionWarnings(viewKey: ViewKey, view: SourceView, files: FileAsset[]): void {\r\n    const pathAndName = view.FileName;\r\n    const pathSeparator = pathAndName.indexOf('/') > -1 ? pathAndName.lastIndexOf('/') + 1 : 0;\r\n    const pathWithSlash = pathSeparator === 0 ? '' : pathAndName.substring(0, pathSeparator);\r\n    const fullName = pathAndName.substring(pathSeparator);\r\n    const name = fullName.substring(0, fullName.length - view.Extension.length);\r\n    const nameCode = name + '.code' + view.Extension;\r\n    // find out if we also have a code file\r\n    const codeFile = files.find(file => file.Path === pathWithSlash + nameCode && file.Shared === view.IsShared);\r\n    const otherEditions = files.filter(file => file.Path.endsWith(fullName) && file.Shared === view.IsShared).length - 1;\r\n\r\n    if (codeFile || otherEditions) {\r\n      const snackBarData: CodeAndEditionWarningsSnackBarData = {\r\n        fileName: fullName,\r\n        codeFile: codeFile?.Path,\r\n        edition: this.#urlItems\r\n          .find(i => i.EntityId?.toString() === viewKey.key && i.IsShared === view.IsShared && i.Path === view.FileName)?.Edition,\r\n        otherEditions,\r\n        openCodeBehind: false,\r\n      };\r\n      const snackBarRef = this.snackBar.openFromComponent(CodeAndEditionWarningsComponent, {\r\n        data: snackBarData,\r\n        duration: 10000,\r\n      });\r\n\r\n      snackBarRef.onAction().subscribe(() => {\r\n        if ((snackBarRef.containerInstance.snackBarConfig.data as CodeAndEditionWarningsSnackBarData).openCodeBehind) {\r\n          const openViewKey: ViewKey = { key: codeFile?.Path, shared: codeFile?.Shared };\r\n          this.openView(openViewKey);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  #attachListeners(): void {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.subscriptions.add(\r\n        fromEvent<BeforeUnloadEvent>(window, 'beforeunload')\r\n          .subscribe(event => {\r\n            const allSaved = !this.#viewInfos().some(v => v.view != null && v.view.Code !== v.savedCode);\r\n            if (allSaved) return;\r\n            event.preventDefault();\r\n            event.returnValue = ''; // fix for Chrome\r\n          })\r\n      );\r\n      this.subscriptions.add(\r\n        fromEvent<KeyboardEvent>(window, 'keydown')\r\n          .subscribe(event => {\r\n            if (!isCtrlS(event)) return;\r\n            event.preventDefault();\r\n            this.zone.run(() => this.save());\r\n          })\r\n      );\r\n    });\r\n  }\r\n}\r\n","<div class=\"editor-root\" appToggleDebug [ngClass]=\"{ 'sxc-dark': monacoOptions.theme === '2sxc-dark' }\">\r\n  <div class=\"editor-side-toolbar\">\r\n    <div class=\"button\" [ngClass]=\"{ 'active': activeExplorer === Explorers.Templates }\" tippy=\"Templates\"\r\n      (click)=\"toggleExplorer(Explorers.Templates)\">\r\n      <mat-icon>file_copy</mat-icon>\r\n    </div>\r\n    <div class=\" button\" [ngClass]=\"{ 'active': activeExplorer === Explorers.Snippets }\" tippy=\"Snippets\"\r\n      (click)=\"toggleExplorer(Explorers.Snippets)\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  </div>\r\n  <app-code-templates [hidden]=\"activeExplorer !== Explorers.Templates\" [view]=\"active()?.view\"\r\n    [templates]=\"templates()\" (openView)=\"openView($event)\" (createTemplate)=\"createTemplate($event)\">\r\n  </app-code-templates>\r\n  <app-code-snippets [hidden]=\"activeExplorer !== Explorers.Snippets\" [snippets]=\"active()?.explorerSnipps\"\r\n    (insertSnippet)=\"insertSnippet($event)\">\r\n  </app-code-snippets>\r\n  <div class=\"editor-group\">\r\n    @if (tabs().length > 0) {\r\n    <div class=\"tabs-container fancy-scrollbar-dark\">\r\n      @for (tab of tabs(); track tab) {\r\n      <div class=\"tab\" [ngClass]=\"{\r\n              'active': tab.isActive,\r\n              'modified': tab.isModified,\r\n              'loading': tab.isLoading\r\n              }\" (click)=\"openView(tab.viewKey)\">\r\n        <div class=\"tab-label-container\" [tippy]=\"tab.label\" tippyShowDelay=\"750\">\r\n          @if (tab.viewKey.shared) {\r\n          <mat-icon class=\"icon-shared\">share</mat-icon>\r\n          }\r\n          <span class=\"tab-label\">{{ tab.label }}</span>\r\n        </div>\r\n        <div class=\"tab-actions-container\">\r\n          @if (tab.isModified) {\r\n          <mat-icon class=\"tab-action icon-modified\" fontSet=\"material-icons\">circle</mat-icon>\r\n          }\r\n          @if (tab.isLoading) {\r\n          <mat-spinner class=\"spinner\" mode=\"indeterminate\" diameter=\"14\" color=\"white\">\r\n          </mat-spinner>\r\n          }\r\n          <mat-icon class=\"tab-action icon-close\" tippy=\"Close\" appClickStopPropagation\r\n            (click)=\"closeEditor(tab.viewKey)\">close</mat-icon>\r\n        </div>\r\n      </div>\r\n      }\r\n    </div>\r\n    }\r\n    @if (active()?.view) {\r\n    <app-monaco-editor [filename]=\"active()?.view.FileName\" [value]=\"active()?.view.Code\"\r\n      (valueChanged)=\"codeChanged($event, active()?.viewKey)\" [options]=\"monacoOptions\"\r\n      [snippets]=\"active()?.editorSnipps\" [tooltips]=\"active()?.tooltips\" [autoFocus]=\"true\">\r\n    </app-monaco-editor>\r\n    }\r\n  </div>\r\n  @if (activeView()) {\r\n  <button mat-fab mat-elevation-z24 tippy=\"Click to save or CTRL + S\" (click)=\"save()\">\r\n    <mat-icon>done</mat-icon>\r\n  </button>\r\n  }\r\n</div>\r\n","import { Snippet, SnippetsSets } from './models/snippet.model';\r\nimport { SourceView } from './models/source-view.model';\r\nimport { Tooltip } from './models/tooltip.model';\r\n\r\nexport interface Tab {\r\n  viewKey: ViewKey;\r\n  label: string;\r\n  isActive: boolean;\r\n  isModified: boolean;\r\n  isLoading: boolean;\r\n}\r\n\r\nexport const Explorers = {\r\n  Templates: 'Templates',\r\n  Snippets: 'Snippets',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\nexport interface ViewInfo {\r\n  viewKey: ViewKey;\r\n  view?: SourceView;\r\n  explorerSnipps?: SnippetsSets;\r\n  editorSnipps?: Snippet[];\r\n  tooltips?: Tooltip[];\r\n  savedCode?: string;\r\n}\r\n\r\nexport interface ViewKey {\r\n  /** ViewKey is templateId or path */\r\n  key: string;\r\n  shared: boolean;\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { SnippetsSets } from '../models/snippet.model';\r\nimport { ObjectToArrayPipe } from './object-to-array.pipe';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { KeyValuePipe } from '@angular/common';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { ArrayHelpers } from '../../shared/helpers/array.helpers';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { SafeHtmlPipe } from '../../shared/pipes/safe-html.pipe';\r\n\r\n@Component({\r\n  selector: 'app-code-snippets',\r\n  templateUrl: './code-snippets.component.html',\r\n  styleUrls: ['./code-snippets.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatIconModule,\r\n    MatRippleModule,\r\n    KeyValuePipe,\r\n    TranslateModule,\r\n    ObjectToArrayPipe,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class CodeSnippetsComponent {\r\n  @Input() snippets: SnippetsSets;\r\n  @Output() insertSnippet: EventEmitter<string> = new EventEmitter();\r\n  toggledSections: string[] = [];\r\n  toggledFolders: string[] = [];\r\n  toggledInfos: string[] = [];\r\n  toggledMores: string[] = [];\r\n\r\n  constructor() { }\r\n\r\n  addSnippet(snippet: string): void {\r\n    this.insertSnippet.emit(snippet);\r\n  }\r\n\r\n  toggleSection(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledSections);\r\n  }\r\n\r\n  toggleFolder(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledFolders);\r\n  }\r\n\r\n  toggleInfo(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledInfos);\r\n  }\r\n\r\n  toggleMore(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledMores);\r\n  }\r\n}\r\n","<!-- TODO: @2pp - translations aren't loading or made?-->\r\n<div class=\"editor-active-explorer fancy-scrollbar-dark\">\r\n  @for (section of snippets | keyvalue; track section) {\r\n    <div>\r\n      <div\r\n        class=\"collapsible-header section\"\r\n        [tippyTranslate]=\"'SourceEditorSnippets.' + section.key + '.Help'\"\r\n        tippyShowDelay=\"750\"\r\n        (click)=\"toggleSection(section.key)\"\r\n      >\r\n        <mat-icon>\r\n          {{ toggledSections.includes(section.key) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\r\n        </mat-icon>\r\n        <span>{{ 'SourceEditorSnippets.' + section.key + '.Title' | translate }}</span>\r\n      </div>\r\n      @if (toggledSections.includes(section.key)) {\r\n        @for (folder of section.value | keyvalue; track folder) {\r\n          <div>\r\n            <div\r\n              class=\"collapsible-header folder\"\r\n              [tippyTranslate]=\"'SourceEditorSnippets.' + section.key + '.' + folder.key + '.Help'\"\r\n              tippyShowDelay=\"750\"\r\n              (click)=\"toggleFolder(folder.key)\"\r\n            >\r\n              <mat-icon>\r\n                {{ toggledFolders.includes(folder.key) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\r\n              </mat-icon>\r\n              <span>{{ 'SourceEditorSnippets.' + section.key + '.' + folder.key + '.Title' | translate }}</span>\r\n            </div>\r\n            @if (toggledFolders.includes(folder.key)) {\r\n              @for (snippet of folder.value | objectToArray; track snippet) {\r\n                <div class=\"snippet\">\r\n                  <div class=\"snippet-label\">\r\n                    <div matRipple class=\"text\" [tippy]=\"snippet.snip\" tippyShowDelay=\"750\" (click)=\"addSnippet(snippet.snip)\">\r\n                      {{ snippet.label }}\r\n                    </div>\r\n                    @if (snippet.more) {\r\n                      <mat-icon tippy=\"Show More\" tippyShowDelay=\"750\" (click)=\"toggleMore(snippet.key)\">\r\n                        {{ toggledMores.includes(snippet.key) ? 'more_vert' : 'more_horiz' }}\r\n                      </mat-icon>\r\n                    }\r\n                    <mat-icon tippy=\"Show Help\" tippyShowDelay=\"750\" appClickStopPropagation (click)=\"toggleInfo(snippet.key)\"\r\n                      >info</mat-icon\r\n                    >\r\n                  </div>\r\n                  @if (toggledInfos.includes(snippet.key)) {\r\n                    <div class=\"snippet-help\">\r\n                      <div class=\"text\" [innerHTML]=\"snippet.help | safeHtml\"></div>\r\n                      @for (link of snippet.links; track link) {\r\n                        <div>\r\n                          <a [href]=\"link.url\" target=\"_blank\">{{ link.name }}</a>\r\n                        </div>\r\n                      }\r\n                    </div>\r\n                  }\r\n                  @if (toggledMores.includes(snippet.key)) {\r\n                    @for (more of snippet.more | objectToArray; track more) {\r\n                      <div>\r\n                        <div class=\"snippet-label\">\r\n                          <div matRipple class=\"text text-more\" [tippy]=\"more.snip\" tippyShowDelay=\"750\" (click)=\"addSnippet(more.snip)\">\r\n                            {{ more.label }}\r\n                          </div>\r\n                          <mat-icon tippy=\"Show Help\" tippyShowDelay=\"750\" appClickStopPropagation (click)=\"toggleInfo(more.key)\"\r\n                            >info</mat-icon\r\n                          >\r\n                        </div>\r\n                        @if (toggledInfos.includes(more.key)) {\r\n                          <div class=\"snippet-help snippet-help-more\">\r\n                            <div class=\"text\" [innerHTML]=\"more.help | safeHtml\"></div>\r\n                            @for (link of more.links; track link) {\r\n                              <div>\r\n                                <a [href]=\"link.url\" target=\"_blank\">{{ link.name }}</a>\r\n                              </div>\r\n                            }\r\n                          </div>\r\n                        }\r\n                      </div>\r\n                    }\r\n                  }\r\n                </div>\r\n              }\r\n            }\r\n          </div>\r\n        }\r\n      }\r\n    </div>\r\n  }\r\n</div>\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'objectToArray',\r\n    standalone: true\r\n})\r\nexport class ObjectToArrayPipe implements PipeTransform {\r\n  transform(obj: Record<string, any> | Record<string, any>[]): Record<string, any>[] {\r\n    if (obj == null) return;\r\n\r\n    if (Array.isArray(obj)) { return obj; }\r\n\r\n    return Object.values(obj);\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\r\nimport { ViewKey } from '../code-editor.models';\r\nimport { FileAsset } from '../models/file-asset.model';\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { TreeItem } from '../models/tree-item.model';\r\nimport { calculateTreeAppShared } from './code-templates.helpers';\r\nimport { appSharedRoot, CreateTemplateParams } from './code-templates.models';\r\nimport { SortItemsPipe } from './order-items.pipe';\r\nimport { DepthPaddingPipe } from './depth-padding.pipe';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgTemplateOutlet, NgClass } from '@angular/common';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { ArrayHelpers } from '../../shared/helpers/array.helpers';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n  selector: 'app-code-templates',\r\n  templateUrl: './code-templates.component.html',\r\n  styleUrls: ['./code-templates.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    NgTemplateOutlet,\r\n    NgClass,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatMenuModule,\r\n    DepthPaddingPipe,\r\n    SortItemsPipe,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n  ],\r\n})\r\nexport class CodeTemplatesComponent implements OnChanges {\r\n  @Input() view?: SourceView;\r\n  @Input() templates: FileAsset[];\r\n  @Output() openView: EventEmitter<ViewKey> = new EventEmitter();\r\n  @Output() createTemplate: EventEmitter<CreateTemplateParams> = new EventEmitter();\r\n  tree: TreeItem[];\r\n  toggledItemsApp: string[] = [];\r\n  toggledItemsShared: string[] = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.templates != null) {\r\n      this.tree = calculateTreeAppShared(this.templates);\r\n    }\r\n    if (changes.view != null) {\r\n      const previousView: SourceView = changes.view?.previousValue;\r\n      if (previousView) {\r\n        this.toggleItem(previousView.FileName, previousView.IsShared);\r\n      }\r\n      if (this.view) {\r\n        this.showFileInTree(this.view.FileName, this.view.IsShared);\r\n      }\r\n    }\r\n  }\r\n\r\n  isToggled(path: string, isShared: boolean): boolean {\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    return toggledItems.includes(path);\r\n  }\r\n\r\n  openTemplate(path: string, isShared: boolean): void {\r\n    const viewKey: ViewKey = { key: path, shared: isShared };\r\n    this.openView.emit(viewKey);\r\n  }\r\n\r\n  toggleItem(path: string, isShared: boolean): void {\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    ArrayHelpers.toggleInArray(path, toggledItems);\r\n  }\r\n\r\n  addFile(folder?: string, isShared?: boolean): void {\r\n    const params: CreateTemplateParams = { folder, isShared };\r\n    this.createTemplate.emit(params);\r\n  }\r\n\r\n  private showFileInTree(file: string, isShared: boolean): void {\r\n    if (file == null) return;\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    if (toggledItems.includes(file)) return;\r\n\r\n    const paths = [appSharedRoot, ...file.split('/')];\r\n    let pathFromRoot = '';\r\n    for (const path of paths) {\r\n      pathFromRoot = !pathFromRoot ? path : `${pathFromRoot}/${path}`;\r\n      if (toggledItems.includes(pathFromRoot)) continue;\r\n      this.toggleItem(pathFromRoot, isShared);\r\n    }\r\n  }\r\n}\r\n","<div class=\"editor-active-explorer fancy-scrollbar-dark explorer-wrapper\">\r\n\r\n  <div>\r\n    @for (item of (tree | sortItems); track item) {\r\n    <ng-container *ngTemplateOutlet=\"fileOrFolder; context: {item: item}\"></ng-container>\r\n    }\r\n\r\n    <ng-template #fileOrFolder let-item=\"item\">\r\n\r\n      @if (!item.isFolder) {\r\n      <div class=\"file\" [style]=\"item.depth | depthPadding: item.isFolder\"\r\n        [ngClass]=\"{'active': isToggled(item.pathFromRoot, item.isShared) }\" [tippy]=\"item.name\" tippyShowDelay=\"750\"\r\n        (click)=\"openTemplate(item.pathFromRoot, item.isShared)\">\r\n        {{ item.name }}\r\n      </div>\r\n      }\r\n\r\n      @if (item.isFolder) {\r\n      <div>\r\n        <div class=\"folder-name-wrapper\" [ngClass]=\"{'app-shared-root': item.depth < 0}\"\r\n          [style]=\"item.depth + 1 | depthPadding: item.isFolder\" (click)=\"toggleItem(item.pathFromRoot, item.isShared)\">\r\n          <div class=\"folder-name\" [tippy]=\"item.name\" tippyShowDelay=\"750\">\r\n            <mat-icon> {{ isToggled(item.pathFromRoot, item.isShared) ? 'keyboard_arrow_down' : 'keyboard_arrow_right'\r\n              }}\r\n            </mat-icon>\r\n            <span>{{ item.name }}</span>\r\n          </div>\r\n          <div class=\"add-item\" tippy=\"Create file in this folder\" tippyShowDelay=\"750\" appClickStopPropagation\r\n            (click)=\"addFile(item.pathFromRoot, item.isShared)\">\r\n            <mat-icon>add</mat-icon>\r\n          </div>\r\n        </div>\r\n        @if (isToggled(item.pathFromRoot, item.isShared)) {\r\n        @for (item1 of (item.children | sortItems); track item1) {\r\n        <ng-container *ngTemplateOutlet=\"fileOrFolder; context: {item: item1}\"></ng-container>\r\n        }\r\n        }\r\n      </div>\r\n      }\r\n\r\n    </ng-template>\r\n  </div>\r\n\r\n  <div class=\"create-button-wrapper\">\r\n    <button mat-icon-button [matMenuTriggerFor]=\"menu\" tippy=\"Create file\" tippyPlacement=\"left\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <button mat-menu-item (click)=\"addFile('', false)\">\r\n        <span>App</span>\r\n      </button>\r\n      <button mat-menu-item (click)=\"addFile('', true)\">\r\n        <span>Shared (global)</span>\r\n      </button>\r\n    </mat-menu>\r\n  </div>\r\n</div>\r\n","import { FileAsset } from '../models/file-asset.model';\r\nimport { TreeItem } from '../models/tree-item.model';\r\nimport { appSharedRoot } from './code-templates.models';\r\n\r\nexport function calculateTreeAppShared(templates: FileAsset[]): TreeItem[] {\r\n  const tree: TreeItem[] = [\r\n    {\r\n      depth: -1,\r\n      name: 'App Files',\r\n      pathFromRoot: appSharedRoot,\r\n      isShared: false,\r\n      isFolder: true,\r\n      children: calculateTree(templates.filter(f => !f.Shared)),\r\n    },\r\n    {\r\n      depth: -1,\r\n      name: 'Shared App Files',\r\n      pathFromRoot: appSharedRoot,\r\n      isShared: true,\r\n      isFolder: true,\r\n      children: calculateTree(templates.filter(f => f.Shared)),\r\n    },\r\n  ];\r\n  return tree;\r\n}\r\n\r\nfunction calculateTree(templates: FileAsset[]): TreeItem[] {\r\n  if (!templates) { return []; }\r\n\r\n  const tree: TreeItem[] = [];\r\n  for (const template of templates) {\r\n    let parent: TreeItem[] = tree;\r\n    const paths = template.Path.split('/');\r\n    const last = paths[paths.length - 1];\r\n    let pathFromRoot = '';\r\n    for (let i = 0; i < paths.length; i++) {\r\n      const path = paths[i];\r\n      pathFromRoot += i ? `/${path}` : path;\r\n      const existing = parent.find(item => item.name === path);\r\n      if (existing) {\r\n        parent = existing.children;\r\n      } else {\r\n        const item: TreeItem = {\r\n          depth: i,\r\n          name: path,\r\n          pathFromRoot,\r\n          isShared: template.Shared,\r\n          isFolder: path !== last,\r\n          ...(path !== last && { children: [] }),\r\n        };\r\n        parent.push(item);\r\n        parent = item.children;\r\n      }\r\n    }\r\n  }\r\n\r\n  return tree;\r\n}\r\n","export const appSharedRoot = '' as const;\r\n\r\nexport interface CreateTemplateParams {\r\n  folder?: string;\r\n  isShared?: boolean;\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n  name: 'depthPadding',\r\n  standalone: true\r\n})\r\nexport class DepthPaddingPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(depth: number, isFolder: boolean): SafeStyle {\r\n    let padding: number;\r\n    if (isFolder) {\r\n      padding = depth * 8;\r\n    } else {\r\n      padding = (depth === 0) ? 8 : (depth * 8 + 16);\r\n    }\r\n    return this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${padding}px;`);\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TreeItem } from '../models/tree-item.model';\r\n\r\n/** Sorts folders before files */\r\n@Pipe({\r\n  name: 'sortItems',\r\n  standalone: true\r\n})\r\nexport class SortItemsPipe implements PipeTransform {\r\n\r\n  transform(items: TreeItem[]) {\r\n    if (items == null) { return items; }\r\n\r\n    items.sort((item1, item2) => {\r\n      if (item1.isFolder < item2.isFolder) {\r\n        return 1;\r\n      } else if (item1.isFolder > item2.isFolder) {\r\n        return -1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n    return items;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport cloneDeep from 'lodash-es/cloneDeep';\r\nimport { map, Observable } from 'rxjs';\r\nimport { Of } from '../../../../../core';\r\nimport { webApiFieldsAll } from '../../shared/fields/content-types-fields.service';\r\nimport { DataTypeCatalog } from '../../shared/fields/data-type-catalog';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { InputTypeCatalog } from '../../shared/fields/input-type-catalog';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { MoreSnippet, SetSnippet, SetSnippetLink, Snippet, SnippetsSets, SnippetsSubSubSets } from '../models/snippet.model';\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { Tooltip } from '../models/tooltip.model';\r\n\r\nexport const inlineHelp = 'admin/Code/InlineHelp';\r\n\r\n@Injectable()\r\nexport class SnippetsService extends HttpServiceBase {\r\n\r\n  constructor( private translate: TranslateService) {\r\n    super();\r\n  }\r\n\r\n  getTooltips(language: string): Observable<Tooltip[]> {\r\n    return this.getHttpApiUrl<Tooltip[]>(inlineHelp, {\r\n      params: {\r\n        language,\r\n      },\r\n    });\r\n  }\r\n\r\n  getSnippets(view: SourceView): Observable<{ list: Snippet[]; sets: SnippetsSets; }> {\r\n    return this.getHttp<{ snippets: Snippet[] }>('../ng-assets/snippets.json.js').pipe(\r\n      map(res => {\r\n        const relevant = this.filterAwayNotNeededSnippetsList(res.snippets, view);\r\n        const standardAndInputSnips = this.extractInputTypeSnippets(relevant);\r\n        const sets = this.initSnippetsWithConfig(standardAndInputSnips.standardArray, view, standardAndInputSnips.inputTypeSnippets);\r\n        const sorted: { list: Snippet[]; sets: SnippetsSets; } = {\r\n          list: standardAndInputSnips.standardArray,\r\n          sets\r\n        };\r\n        return sorted;\r\n      }),\r\n    );\r\n  }\r\n\r\n  /** Scan the list for sets starting with @ or [ and filter if not needed right now */\r\n  private filterAwayNotNeededSnippetsList(list: Snippet[], view: SourceView): Snippet[] {\r\n    const keyPrefixes = ['@', '['];\r\n    const keyPrefixIndex = (v: SourceView) => (v.Type.indexOf('Razor') > -1) ? 0 : 1;\r\n\r\n    const newList: Snippet[] = [];\r\n    for (const itm of list) {\r\n      const setHasPrefix = keyPrefixes.indexOf(itm.set[0]);\r\n      if (setHasPrefix === -1 || (setHasPrefix === keyPrefixIndex(view))) {\r\n        // if necessary, remove first char\r\n        if (setHasPrefix === keyPrefixIndex(view)) {\r\n          itm.set = itm.set.substring(1);\r\n        }\r\n        newList.push(itm);\r\n      }\r\n    }\r\n    return newList;\r\n  }\r\n\r\n  private extractInputTypeSnippets(list: Snippet[]): { standardArray: Snippet[]; inputTypeSnippets: Record<string, Snippet[]>; } {\r\n    const standardArray: Snippet[] = [];\r\n    const inputTypeArray: Snippet[] = [];\r\n\r\n    for (const itm of list) {\r\n      const systemSnippet = itm.set[0] === '\\\\';\r\n      if (!systemSnippet) {\r\n        standardArray.push(itm);\r\n      } else {\r\n        itm.set = itm.set.substring(1);\r\n        inputTypeArray.push(itm);\r\n      }\r\n    }\r\n    const inputTypeSnippets = this.catalogInputTypeSnippets(inputTypeArray);\r\n    const extracted: { standardArray: Snippet[]; inputTypeSnippets: Record<string, Snippet[]>; } = {\r\n      standardArray,\r\n      inputTypeSnippets,\r\n    };\r\n    return extracted;\r\n  }\r\n\r\n  private catalogInputTypeSnippets(list: Snippet[]): Record<string, Snippet[]> {\r\n    const inputTypeList: Record<string, Snippet[]> = {};\r\n    for (const itm of list) {\r\n      if (inputTypeList[itm.subset] === undefined) {\r\n        inputTypeList[itm.subset] = [];\r\n      }\r\n      inputTypeList[itm.subset].push(itm);\r\n    }\r\n    return inputTypeList;\r\n  }\r\n\r\n  private initSnippetsWithConfig(\r\n    standardArray: Snippet[],\r\n    templateConfiguration: SourceView,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): SnippetsSets {\r\n    const sets = this.makeTree(standardArray);\r\n\r\n    // retrieve all relevant content-types and infos\r\n    sets.Content = Object.assign({}, sets.Content, { Fields: {}, PresentationFields: {} });\r\n    if (templateConfiguration.TypeContent) {\r\n      this.loadContentType(\r\n        sets.Content.Fields as SnippetsSubSubSets,\r\n        templateConfiguration.TypeContent,\r\n        'Content',\r\n        templateConfiguration,\r\n        inputTypeSnippets,\r\n      );\r\n    }\r\n    if (templateConfiguration.TypeContentPresentation) {\r\n      this.loadContentType(\r\n        sets.Content.PresentationFields as SnippetsSubSubSets,\r\n        templateConfiguration.TypeContentPresentation,\r\n        'Content.Presentation',\r\n        templateConfiguration,\r\n        inputTypeSnippets,\r\n      );\r\n    }\r\n\r\n    if (templateConfiguration.HasList) {\r\n      sets.List = Object.assign({}, sets.List, { Fields: {}, PresentationFields: {} });\r\n      if (templateConfiguration.TypeList) {\r\n        this.loadContentType(\r\n          sets.List.Fields as SnippetsSubSubSets,\r\n          templateConfiguration.TypeList,\r\n          'Header',\r\n          templateConfiguration,\r\n          inputTypeSnippets,\r\n        );\r\n      }\r\n      if (templateConfiguration.TypeListPresentation) {\r\n        this.loadContentType(\r\n          sets.List.PresentationFields as SnippetsSubSubSets,\r\n          templateConfiguration.TypeListPresentation,\r\n          'Header.Presentation',\r\n          templateConfiguration,\r\n          inputTypeSnippets,\r\n        );\r\n      }\r\n    } else {\r\n      delete sets.List;\r\n    }\r\n\r\n    // maybe App-infos\r\n    if (templateConfiguration.HasApp) {\r\n      sets.App.Resources = {};\r\n      sets.App.Settings = {};\r\n      this.loadContentType(sets.App.Resources, 'App-Resources', 'App.Resources', templateConfiguration, inputTypeSnippets);\r\n      this.loadContentType(sets.App.Settings, 'App-Settings', 'App.Settings', templateConfiguration, inputTypeSnippets);\r\n    }\r\n\r\n    return sets;\r\n  }\r\n\r\n  /** Convert the list into a tree with set/subset/item */\r\n  private makeTree(list: Snippet[]): SnippetsSets {\r\n    const tree: SnippetsSets = {};\r\n    for (const o of list) {\r\n      if (tree[o.set] === undefined) {\r\n        tree[o.set] = {};\r\n      }\r\n      if (tree[o.set][o.subset] === undefined) {\r\n        tree[o.set][o.subset] = [];\r\n      }\r\n      const reformatted: SetSnippet = {\r\n        key: o.name,\r\n        label: this.label(o.set, o.subset, o.name),\r\n        snip: o.content,\r\n        help: o.help || this.help(o.set, o.subset, o.name),\r\n        links: this.linksList(o.links)\r\n      };\r\n\r\n      (tree[o.set][o.subset] as SetSnippet[]).push(reformatted);\r\n    }\r\n    return tree;\r\n  }\r\n\r\n  private label(set: string, subset: string, snip: string): string {\r\n    const key = this.getHelpKey(set, subset, snip, '.Key');\r\n\r\n    let result: string = this.translate.instant(key);\r\n    if (result === key) {\r\n      result = snip;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private getHelpKey(set: string, subset: string, snip: string, addition: string): string {\r\n    return 'SourceEditorSnippets' + '.' + set + '.' + subset + '.' + snip + addition;\r\n  }\r\n\r\n  private help(set: string, subset: string, snip: string): string {\r\n    const key = this.getHelpKey(set, subset, snip, '.Help');\r\n\r\n    let result: string = this.translate.instant(key);\r\n    if (result === key) {\r\n      result = '';\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private linksList(linksString: string): SetSnippetLink[] {\r\n    if (!linksString) { return null; }\r\n\r\n    const links: SetSnippetLink[] = [];\r\n    const llist = linksString.split('\\n');\r\n    for (const l of llist) {\r\n      const pair = l.split(':');\r\n      if (pair.length === 3) {\r\n        const link: SetSnippetLink = {\r\n          name: pair[0].trim(),\r\n          url: pair[1].trim() + ':' + pair[2].trim(),\r\n        };\r\n        links.push(link);\r\n      }\r\n    }\r\n    if (links.length === 0) { return null; }\r\n    return links;\r\n  }\r\n\r\n  /** spm TODO: this happens after snippets are calculated for the first time. Needs to be fixed */\r\n  private loadContentType(\r\n    target: SnippetsSubSubSets,\r\n    type: string,\r\n    prefix: string,\r\n    templateConfiguration: SourceView,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): void {\r\n    this.getFields(templateConfiguration.AppId, type).subscribe(fields => {\r\n      // first add common items if the content-type actually exists\r\n      for (const field of fields) {\r\n        const fieldname = field.StaticName;\r\n        target[fieldname] = {\r\n          key: fieldname,\r\n          label: fieldname,\r\n          snip: this.valuePlaceholder(prefix, fieldname, templateConfiguration),\r\n          help: field.Metadata.merged.Notes || ' (' + field.Type.toLowerCase() + ') '\r\n        };\r\n        // try to add generic snippets specific to this input-type\r\n        const snipDefaults = cloneDeep(target[fieldname]); // must be a copy, because target[fieldname] will grow\r\n        this.attachSnippets(target, prefix, fieldname, field.InputType, snipDefaults, inputTypeSnippets);\r\n      }\r\n\r\n      if (fields.length) {\r\n        const std = ['EntityId', 'EntityTitle', 'EntityGuid', 'EntityType', 'IsPublished', 'Modified'];\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i = 0; i < std.length; i++) {\r\n          target[std[i]] = {\r\n            key: std[i],\r\n            label: std[i],\r\n            snip: this.valuePlaceholder(prefix, std[i], templateConfiguration),\r\n            help: this.translate.instant('SourceEditorSnippets.StandardFields.' + std[i] + '.Help'),\r\n          };\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private valuePlaceholder(obj: string, val: string, templateConfiguration: SourceView): string {\r\n    return (templateConfiguration.Type.indexOf('Razor') > -1)\r\n      ? '@' + obj + '.' + val\r\n      : '[' + obj.replace('.', ':') + ':' + val + ']';\r\n  }\r\n\r\n  private getFields(appId: number, staticName: string): Observable<Field[]> {\r\n    return this.getHttpApiUrl<Field[]>(webApiFieldsAll, {\r\n      params: { appid: appId.toString(), staticName },\r\n    }).pipe(\r\n      map(fields => {\r\n        fields = fields.filter(field => field.Type !== DataTypeCatalog.Empty);\r\n        for (const fld of fields) {\r\n          if (!fld.Metadata) continue;\r\n          const md = fld.Metadata;\r\n          const allMd = md.All;\r\n          const typeMd = md[fld.Type];\r\n          const inputMd = md[fld.InputType];\r\n          md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n        }\r\n        return fields;\r\n      }),\r\n    );\r\n  }\r\n\r\n  private attachSnippets(\r\n    target: SnippetsSubSubSets,\r\n    prefix: string,\r\n    fieldname: string,\r\n    inputType: Of<typeof InputTypeCatalog>,\r\n    snipDefaults: SetSnippet,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): void {\r\n    let genericSnippet = inputTypeSnippets[inputType];\r\n    if (inputType.indexOf('-')) { // if it's a sub-type, let's also get the master-type\r\n      const fieldType = inputType.substring(0, inputType.indexOf('-'));\r\n      if (fieldType) {\r\n        const typeSnips = inputTypeSnippets[fieldType];\r\n        if (typeSnips) {\r\n          genericSnippet = genericSnippet ? genericSnippet.concat(typeSnips) : typeSnips;\r\n        }\r\n      }\r\n    }\r\n    if (!genericSnippet) return;\r\n\r\n    if (target[fieldname].more === undefined) {\r\n      target[fieldname].more = {};\r\n    }\r\n    const fieldSnips = target[fieldname].more;\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let g = 0; g < genericSnippet.length; g++) {\r\n      try {\r\n        fieldSnips[fieldname + '-' + genericSnippet[g].name] = Object.assign({}, snipDefaults, {\r\n          key: fieldname + ' - ' + genericSnippet[g].name,\r\n          label: genericSnippet[g].name,\r\n          snip: this.localizeGenericSnippet(genericSnippet[g].content, prefix, fieldname),\r\n          collapse: true,\r\n        } as MoreSnippet);\r\n      } finally { }\r\n    }\r\n  }\r\n\r\n  private localizeGenericSnippet(snip: string, objName: string, fieldName: string): string {\r\n    snip = snip\r\n      .replace(/(\\$\\{[0-9]+\\:)var(\\})/gi, '$1' + objName + '$2')\r\n      .replace(/(\\$\\{[0-9]+\\:)prop(\\})/gi, '$1' + fieldName + '$2');\r\n    return snip;\r\n  }\r\n}\r\n","export * from './monaco-editor.component';\r\nexport * from './monaco-editor.models';\r\n// export * from './monaco-editor.module';\r\n","export interface JsonSchema {\r\n  type: 'link' | 'raw';\r\n  value: string;\r\n}\r\n\r\nexport interface Monaco2sxc {\r\n  themesAreDefined: boolean;\r\n  savedStates: Monaco2sxcSavedStates;\r\n}\r\n\r\nexport interface Monaco2sxcSavedStates {\r\n  [uri: string]: Monaco2sxcSavedState;\r\n}\r\n\r\nexport interface Monaco2sxcSavedState {\r\n  viewState: string;\r\n}\r\n","import { Directive, HostListener } from '@angular/core';\r\nimport { GlobalConfigService } from '../services/global-config.service';\r\n\r\n@Directive({\r\n  selector: '[appToggleDebug]',\r\n  standalone: true\r\n})\r\nexport class ToggleDebugDirective {\r\n\r\n  constructor(private globalConfigService: GlobalConfigService) { }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    const CTRL_SHIFT_ALT_CLICK = (navigator.platform.match('Mac') ? event.metaKey : event.ctrlKey) && event.shiftKey && event.altKey;\r\n    if (CTRL_SHIFT_ALT_CLICK) {\r\n      this.globalConfigService.toggleDebugEnabled();\r\n      window.getSelection().removeAllRanges();\r\n    }\r\n  }\r\n}\r\n","export const DataTypeCatalog = {\r\n  Boolean: 'Boolean',\r\n  Custom: 'Custom',\r\n  DateTime: 'DateTime',\r\n  Empty: 'Empty',\r\n  Entity: 'Entity',\r\n  Hyperlink: 'Hyperlink',\r\n  Number: 'Number',\r\n  String: 'String',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { Injectable } from '@angular/core';\r\nimport { filter, map, Observable, shareReplay, switchMap } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { EntityLightIdentifier } from '../../../../../edit-types/src/EntityLight';\r\nimport { classLog } from '../logging';\r\nimport { HttpServiceBase } from './http-service-base';\r\nimport { QueryService } from './query.service';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getEntities: false,\r\n  getAvailableEntities: false,\r\n  delete: false,\r\n};\r\n\r\nexport const webApiEntityRoot = 'admin/entity/';\r\nexport const webApiEntityList = 'admin/entity/list';\r\n\r\n@Injectable()\r\nexport class EntityService extends HttpServiceBase {\r\n\r\n  log = classLog({ EntityService }, logSpecs);\r\n\r\n  private queryService = transient(QueryService);\r\n\r\n  /**\r\n   * Get entities based on the content type name.\r\n   * As of 2024-04-29 only used in REST API.\r\n   * @param params\r\n   * @returns\r\n   */\r\n  getEntities$(params: Observable<{ contentTypeName: string }>): Observable<EntityLightIdentifier[]> {\r\n    this.log.fnIf('getEntities');\r\n    return params.pipe(\r\n      filter(p => p != null),\r\n      switchMap(p => this.getAvailableEntities(p.contentTypeName).pipe(shareReplay(1))),\r\n    );\r\n  }\r\n\r\n  private getAvailableEntities(contentTypeName: string, entitiesFilter?: string[]): Observable<EntityLightIdentifier[]> {\r\n    var log = this.log.fnIf('getAvailableEntities');\r\n    return this.queryService.getEntities({\r\n      contentTypes: [contentTypeName],\r\n      itemIds: entitiesFilter,\r\n      fields: 'Id,Guid,Title',\r\n      log: 'getAvailableEntities'\r\n    }).pipe(\r\n      map(data => data.Default)\r\n    );\r\n  }\r\n\r\n  delete(appId: number, contentType: string, entityId: number, force: boolean, parentId?: number, parentField?: string): Observable<null> {\r\n    this.log.fnIf('delete', { appId, contentType, entityId, force, parentId, parent });\r\n    return this.http.delete<null>(this.apiUrl(webApiEntityRoot + 'delete'), {\r\n      params: {\r\n        contentType,\r\n        id: entityId.toString(),\r\n        appId,\r\n        force: force.toString(),\r\n        ...(parentId && { parentId: parentId.toString() }),\r\n        ...(parentId && parentField && { parentField }),\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { classLog } from '../logging';\r\nimport { QueryStreams } from '../models/query-stream.model';\r\nimport { Context } from './context';\r\n\r\nconst logSpecs = {\r\n  all: false,\r\n  getAvailableEntities: false,\r\n  getEntities: false,\r\n};\r\n\r\n@Injectable()\r\nexport class QueryService {\r\n\r\n  log = classLog({QueryService}, logSpecs);\r\n\r\n  constructor(private http: HttpClient, private context: Context) { }\r\n\r\n  getFromQuery(queryUrl: string, params: string, fields: string, entitiesFilter?: string[]): Observable<QueryStreams> {\r\n    this.log.fnIf('getAvailableEntities', { queryUrl, params, fields, entitiesFilter });\r\n    // Check if any params we should auto-add are already set (like in a query which has these params set in the configuration)\r\n    const hasParams = !!params;\r\n    const paramsLower = params?.toLocaleLowerCase() ?? '';\r\n    const hasAppId = paramsLower.includes('appid=') ?? false;\r\n    const allParams = ''\r\n      + (hasAppId ? '' : `&appId=${this.context.appId}`)\r\n      + (hasParams ? `&${params}` : '')\r\n      + '&$select=' + (fields ?? '' /* special catch to avoid the word \"null\" */);\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(`app/auto/query/${queryUrl}?${urlParams}`,\r\n      {\r\n        Guids: entitiesFilter,\r\n      },\r\n    );\r\n  }\r\n\r\n  getEntities({ contentTypes, itemIds, fields, log }: { contentTypes: string[]; itemIds: string[]; fields: string; log: string }): Observable<QueryStreams> {\r\n    this.log.fnIf(`getEntities`, { log, contentTypes, itemIds, fields });\r\n    const allParams =\r\n      '&typeNames=' + (contentTypes?.join(',') ?? '')\r\n      + `&appId=${this.context.appId}`\r\n      + '&itemIds=' + (itemIds?.join(',') ?? '')\r\n      + '&$select=' + (fields ?? '' /* special catch to avoid the word \"null\" */);\r\n    // trim initial & because it will always start with an & and it should't\r\n    const urlParams = allParams.substring(1);\r\n    return this.http.post<QueryStreams>(\r\n      `app/auto/query/System.EntityPicker/Default?${urlParams}`,\r\n      {}\r\n    );\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * Base class for services - just to standardize use of subscriptions.\r\n * Has @Injectable() just to allow it ot use the standard OnDestroy interface.\r\n */\r\n@Injectable()\r\nexport abstract class ServiceBase implements OnDestroy {\r\n\r\n  protected subscriptions = new Subscription();\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy();\r\n  }\r\n\r\n  // TODO: TRY TO GET RID OF THIS. AFAIK it's just used in the mask, which should switch over to signals.\r\n  destroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n"],"names":["MatSnackBarRef","MAT_SNACK_BAR_DATA","MatButtonModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate2","ctx_r0","snackBarData","fileName","codeFile","ɵɵtextInterpolate1","edition","ɵɵtemplate","CodeAndEditionWarningsComponent_Conditional_2_Conditional_1_Template","CodeAndEditionWarningsComponent_Conditional_2_Conditional_3_Template","ɵɵconditional","otherEditions","ɵɵlistener","CodeAndEditionWarningsComponent_Conditional_4_Template_button_click_0_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","openCodeBehind","CodeAndEditionWarningsComponent","constructor","snackRef","dismissWithAction","ɵɵdirectiveInject","i1","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","CodeAndEditionWarningsComponent_Template","rf","ctx","CodeAndEditionWarningsComponent_Conditional_1_Template","CodeAndEditionWarningsComponent_Conditional_2_Template","CodeAndEditionWarningsComponent_Conditional_4_Template","i2","MatButton","styles","NgClass","computed","effect","NgZone","signal","ViewContainerRef","MatDialog","MatIconModule","MatProgressSpinnerModule","MatSnackBar","Title","ActivatedRoute","forkJoin","fromEvent","of","share","switchMap","transient","CreateFileDialogComponent","isCtrlS","MonacoEditorComponent","MonacoEditorComponent_1","BaseComponent","keyIsShared","keyItems","ClickStopPropagationDirective","TippyDirective","ToggleDebugDirective","RxHelpers","Context","Explorers","CodeSnippetsComponent","CodeTemplatesComponent","SnippetsService","SourceService","CodeEditorComponent_Conditional_11_For_2_Template_div_click_0_listener","tab_r2","_r1","$implicit","ctx_r2","openView","viewKey","CodeEditorComponent_Conditional_11_For_2_Conditional_2_Template","CodeEditorComponent_Conditional_11_For_2_Conditional_6_Template","CodeEditorComponent_Conditional_11_For_2_Conditional_7_Template","CodeEditorComponent_Conditional_11_For_2_Template_mat_icon_click_8_listener","closeEditor","ɵɵproperty","ɵɵpureFunction3","_c2","isActive","isModified","isLoading","label","shared","ɵɵtextInterpolate","ɵɵrepeaterCreate","CodeEditorComponent_Conditional_11_For_2_Template","ɵɵrepeaterTrackByIdentity","ɵɵrepeater","tabs","CodeEditorComponent_Conditional_12_Template_app_monaco_editor_valueChanged_0_listener","$event","tmp_2_0","_r4","codeChanged","active","tmp_1_0","view","FileName","Code","monacoOptions","tmp_4_0","editorSnipps","tmp_5_0","tooltips","CodeEditorComponent_Conditional_13_Template_button_click_0_listener","_r5","save","CodeEditorComponent","sourceSvc","snippetSvc","titleSvc","openViews","viewInfos","urlItems","context","route","snackBar","zone","matDialog","viewContainerRef","activeExplorer","Templates","theme","tabSize","fixedOverflowWidgets","templates","activeView","undefined","find","v","objectsEqual","map","viewInfo","key","savedCode","init","codeItems","JSON","parse","sessionStorage","getItem","isShared","forEach","codeItem","Path","startsWith","substring","IsShared","length","notLoaded","filter","some","newViewInfo","view$","get","pipe","snippets$","getSnippets","tooltips$","getTooltips","Extension","subscribe","results","viewInfos1","snippets","selectedIndex","findIndex","explorerSnipps","sets","list","slice","showCodeAndEditionWarnings","set","allowSignalWrites","defaultTitle","newTitle","oldTitle","getTitle","console","log","setTitle","ngOnInit","initialViews","item","EntityId","toString","attachListeners","getAll","ngOnDestroy","toggleExplorer","explorer","createTemplate","params","createFileDialogData","folder","global","purpose","createFileDialogRef","open","autoFocus","data","width","afterClosed","result","create","name","templateKey","files","insertSnippet","snippet","monacoEditorRef","code","selectedViewInfo","oldActiveView","oldOpenViews","newOpenViews","newActiveView","codeToSave","next","res","duration","newViewInfos","error","#showCodeAndEditionWarnings","pathAndName","pathSeparator","indexOf","lastIndexOf","pathWithSlash","fullName","nameCode","file","Shared","endsWith","i","Edition","snackBarRef","openFromComponent","onAction","containerInstance","snackBarConfig","openViewKey","#attachListeners","runOutsideAngular","subscriptions","add","window","event","allSaved","preventDefault","returnValue","run","i3","i4","viewQuery","CodeEditorComponent_Query","CodeEditorComponent_Template_div_click_2_listener","CodeEditorComponent_Template_div_click_5_listener","Snippets","CodeEditorComponent_Template_app_code_templates_openView_8_listener","CodeEditorComponent_Template_app_code_templates_createTemplate_8_listener","CodeEditorComponent_Template_app_code_snippets_insertSnippet_9_listener","CodeEditorComponent_Conditional_11_Template","CodeEditorComponent_Conditional_12_Template","CodeEditorComponent_Conditional_13_Template","ɵɵpureFunction1","_c0","_c1","tmp_7_0","tmp_9_0","i5","MatIcon","i6","MatProgressSpinner","i7","MatFabButton","EventEmitter","ObjectToArrayPipe","TranslateModule","KeyValuePipe","MatRippleModule","ArrayHelpers","SafeHtmlPipe","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_4_Template_mat_icon_click_0_listener","_r8","snippet_r7","toggleMore","toggledMores","includes","link_r9","url","ɵɵsanitizeUrl","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_7_For_4_Template","ɵɵpipeBind1","help","ɵɵsanitizeHtml","links","link_r12","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_8_For_1_Conditional_6_For_4_Template","more_r11","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_8_For_1_Template_div_click_2_listener","_r10","addSnippet","snip","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_8_For_1_Template_mat_icon_click_4_listener","toggleInfo","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_8_For_1_Conditional_6_Template","toggledInfos","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_8_For_1_Template","more","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Template_div_click_2_listener","_r6","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_4_Template","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Template_mat_icon_click_5_listener","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_7_Template","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Conditional_8_Template","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_For_1_Template","folder_r5","value","CodeSnippetsComponent_For_2_Conditional_7_For_1_Template_div_click_1_listener","toggleFolder","CodeSnippetsComponent_For_2_Conditional_7_For_1_Conditional_7_Template","section_r2","toggledFolders","CodeSnippetsComponent_For_2_Conditional_7_For_1_Template","CodeSnippetsComponent_For_2_Template_div_click_1_listener","toggleSection","CodeSnippetsComponent_For_2_Conditional_7_Template","toggledSections","emit","toggleInArray","inputs","outputs","CodeSnippetsComponent_Template","CodeSnippetsComponent_For_2_Template","MatRipple","TranslatePipe","transform","obj","Array","isArray","Object","values","pure","SimpleChanges","calculateTreeAppShared","appSharedRoot","SortItemsPipe","DepthPaddingPipe","MatMenuModule","NgTemplateOutlet","ɵɵelementContainer","CodeTemplatesComponent_For_3_ng_container_0_Template","fileOrFolder_r3","item_r2","CodeTemplatesComponent_ng_template_5_Conditional_0_Template_div_click_0_listener","item_r5","ctx_r5","openTemplate","pathFromRoot","ɵɵstyleMap","ɵɵpipeBind2","depth","isFolder","isToggled","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_For_1_ng_container_0_Template","item1_r8","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_For_1_Template","children","CodeTemplatesComponent_ng_template_5_Conditional_1_Template_div_click_1_listener","_r7","toggleItem","CodeTemplatesComponent_ng_template_5_Conditional_1_Template_div_click_8_listener","addFile","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_Template","CodeTemplatesComponent_ng_template_5_Conditional_0_Template","CodeTemplatesComponent_ng_template_5_Conditional_1_Template","toggledItemsApp","toggledItemsShared","ngOnChanges","changes","tree","previousView","previousValue","showFileInTree","path","toggledItems","paths","split","ɵɵNgOnChangesFeature","CodeTemplatesComponent_Template","CodeTemplatesComponent_For_3_Template","CodeTemplatesComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","CodeTemplatesComponent_Template_button_click_13_listener","CodeTemplatesComponent_Template_button_click_16_listener","menu_r9","MatIconButton","MatMenu","MatMenuItem","MatMenuTrigger","calculateTree","f","parent","last","existing","push","DomSanitizer","sanitizer","padding","bypassSecurityTrustStyle","items","sort","item1","item2","TranslateService","cloneDeep","webApiFieldsAll","DataTypeCatalog","HttpServiceBase","inlineHelp","translate","language","getHttpApiUrl","getHttp","relevant","filterAwayNotNeededSnippetsList","standardAndInputSnips","extractInputTypeSnippets","initSnippetsWithConfig","standardArray","inputTypeSnippets","sorted","keyPrefixes","keyPrefixIndex","Type","newList","itm","setHasPrefix","inputTypeArray","systemSnippet","catalogInputTypeSnippets","extracted","inputTypeList","subset","templateConfiguration","makeTree","Content","assign","Fields","PresentationFields","TypeContent","loadContentType","TypeContentPresentation","HasList","List","TypeList","TypeListPresentation","HasApp","App","Resources","Settings","o","reformatted","content","linksList","getHelpKey","instant","addition","linksString","llist","l","pair","link","trim","target","type","prefix","getFields","AppId","fields","field","fieldname","StaticName","valuePlaceholder","Metadata","merged","Notes","toLowerCase","snipDefaults","attachSnippets","InputType","std","val","replace","appId","staticName","appid","Empty","fld","md","allMd","All","typeMd","inputMd","inputType","genericSnippet","fieldType","typeSnips","concat","fieldSnips","g","localizeGenericSnippet","collapse","objName","fieldName","ɵɵinject","factory","ɵfac","GlobalConfigService","globalConfigService","onClick","CTRL_SHIFT_ALT_CLICK","navigator","platform","match","metaKey","ctrlKey","shiftKey","altKey","toggleDebugEnabled","getSelection","removeAllRanges","hostBindings","ToggleDebugDirective_HostBindings","ToggleDebugDirective_click_HostBindingHandler","Boolean","Custom","DateTime","Entity","Hyperlink","Number","String","shareReplay","classLog","QueryService","logSpecs","all","getEntities","getAvailableEntities","delete","webApiEntityRoot","webApiEntityList","EntityService","queryService","getEntities$","fnIf","p","contentTypeName","entitiesFilter","contentTypes","itemIds","Default","contentType","entityId","force","parentId","parentField","http","apiUrl","id","__ngFactoryType__","HttpClient","getFromQuery","queryUrl","hasParams","paramsLower","toLocaleLowerCase","hasAppId","allParams","urlParams","post","Guids","join","Subscription","ServiceBase","destroy","unsubscribe"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}