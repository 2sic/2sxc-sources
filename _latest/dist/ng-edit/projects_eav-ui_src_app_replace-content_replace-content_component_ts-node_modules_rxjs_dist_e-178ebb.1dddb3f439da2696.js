"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_replace-content_replace-content_component_ts-node_modules_rxjs_dist_e-178ebb"],{1897:(R,p,e)=>{function t(u,r){return r(u)}function h(u,r){return r(u)}e.d(p,{C:()=>t,z:()=>h})},4513:(R,p,e)=>{e.r(p),e.d(p,{ReplaceContentComponent:()=>U});var t=e(7580),h=e(9771),u=e(7941),r=e(2159),D=e(9669),C=e(3216),E=e(334),g=e(3840),v=e(4175),M=e(5060),_=e(2275),O=e(4456),a=e(7984),o=e(5944),l=e(5437),d=e(1897),I=e(8471),T=e(7993),A=e(3347);function j(f,L){if(1&f&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&f){const s=L.$implicit;t.Y8G("value",s.label),t.R7$(),t.JRh(s.label)}}let U=(()=>{class f{#e;#t;constructor(s,i){this.dialogRef=s,this.snackBar=i,this.hostClass="dialog-component",this.#e=(0,l.d)(D.y),this.#t=(0,l.d)(I.c),this.#a=(0,d.C)(this.#t.getParams(["guid","part","index"]),n=>({guid:n.guid,part:n.part,index:parseInt(n.index,10)})),this.isAddMode=(0,T.KX)("isAddMode",!!this.#t.getQueryParam("add")),this.filterText=(0,t.geq)(""),this.#n=(0,T.KX)("options",[]),this.options=(0,T.bo)("filteredOptions",()=>{const n=this.filterText().toLocaleLowerCase();return this.#n().filter(c=>c.label.toLocaleLowerCase().includes(n))}),this.hasSelection=(0,T.bo)("isMatch",()=>this.options().map(n=>n.label).includes(this.filterText()))}#a;#s;#n;ngOnInit(){this.#i(!1,null),this.#t.doOnDialogClosed(()=>{const i=this.#t.router.getCurrentNavigation().extras?.state,n=i?.[Object.keys(i)[0]];this.#i(!0,n)})}closeDialog(){this.dialogRef.close()}select(s){this.filterText.set(s.option.value)}copySelected(){const s=this.#o(),i={items:[E.c.copy(this.#s,s.id)]},n=(0,C.s)(i);this.#t.navRelative([`edit/${n}`])}save(){this.snackBar.open("Saving...");const s=this.#o();this.#e.saveItem(s).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}#i(s,i){const n=this.#o();this.#e.getItems(n).subscribe(c=>{const P=Object.entries(c.Items).map(([m,B])=>({id:parseInt(m,10),label:`${B} (${m})`}));if(this.#n.set(P),!n.add&&!s||null!=i){const m=s?i:c.SelectedId,B=this.#n().find(K=>K.id===m)?.label||"";this.filterText.set(B)}this.#s=c.ContentTypeName})}#o(){const s=this.filterText();return{id:this.#n().find(c=>c.label===s)?.id??null,...this.#a,add:this.isAddMode()}}static#r=this.\u0275fac=function(i){return new(i||f)(t.rXU(u.CP),t.rXU(A.UG))};static#l=this.\u0275cmp=t.VBU({type:f,selectors:[["app-replace-content"]],hostVars:1,hostBindings:function(i,n){2&i&&t.Mr5("className",n.hostClass)},inputs:{filterText:[t.Mj6.SignalBased,"filterText"]},outputs:{filterText:"filterTextChange"},standalone:!0,features:[t.aNF],decls:25,vars:10,consts:[["auto","matAutocomplete"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"eav-options-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","matAutocomplete","ngModel"],[3,"optionSelected","hideSingleSelectionIndicator"],["itemSize","48","minBufferPx","500","maxBufferPx","1000"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","","tippy","Copy",3,"click","disabled"],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click","disabled"],[3,"value"]],template:function(i,n){if(1&i){const c=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3),t.k0s()(),t.j41(4,"div",4),t.nrm(5,"router-outlet"),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),t.EFF(11,"Choose item"),t.k0s(),t.j41(12,"input",7),t.mxI("ngModelChange",function(m){return t.eBV(c),t.DH7(n.filterText,m)||(n.filterText=m),t.Njj(m)}),t.k0s(),t.j41(13,"mat-autocomplete",8,0),t.bIt("optionSelected",function(m){return t.eBV(c),t.Njj(n.select(m))}),t.j41(15,"cdk-virtual-scroll-viewport",9),t.DNE(16,j,2,2,"mat-option",10),t.k0s()()(),t.j41(17,"button",11),t.bIt("click",function(){return t.eBV(c),t.Njj(n.copySelected())}),t.j41(18,"mat-icon"),t.EFF(19,"file_copy"),t.k0s()()()(),t.j41(20,"mat-dialog-actions",12)(21,"button",13),t.bIt("click",function(){return t.eBV(c),t.Njj(n.closeDialog())}),t.EFF(22,"Cancel"),t.k0s(),t.j41(23,"button",14),t.bIt("click",function(){return t.eBV(c),t.Njj(n.save())}),t.EFF(24,"Save"),t.k0s()()()}if(2&i){const c=t.sdS(14);t.R7$(3),t.JRh(n.isAddMode()?"Add Existing Item":"Replace Content Item"),t.R7$(4),t.SpI("",n.isAddMode()?"Select a content-item to add to this list.":"By replacing a content-item you can make other content appear in the slot of the original content."," "),t.R7$(5),t.Y8G("matAutocomplete",c),t.R50("ngModel",n.filterText),t.R7$(),t.Y8G("hideSingleSelectionIndicator",!0),t.R7$(2),t.xc7("height",n.options().length<6?48*n.options().length:240,"px"),t.R7$(),t.Y8G("cdkVirtualForOf",n.options()),t.R7$(),t.Y8G("disabled",!n.hasSelection()),t.R7$(6),t.Y8G("disabled",!n.hasSelection())}},dependencies:[r.n3,o.RG,o.rl,o.nJ,a.fS,a.fg,h.jL,h.$3,M.wT,h.pN,O.YN,O.me,O.BC,O.vS,_.d6,_.yg,_.E$,M.Sy,v.Hl,v.$z,v.iY,g.m_,g.An,u.E7],styles:[".eav-options-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]})}return f})()},8471:(R,p,e)=>{e.d(p,{c:()=>M});var t=e(2159),h=e(1567),u=e(3037),r=e(271),D=e(5057),C=e(4979),E=e(4435),g=e(7580);const v={doOnDialogClosed:!0};let M=(()=>{class _ extends C.V{constructor(a,o){super(),this.router=a,this.route=o,this.log=(0,E.T)({DialogRoutingService:_},v)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(a){return this.route.snapshot.paramMap.get(a)}getParams(a){const o=this.route.snapshot.paramMap;return a.reduce((l,d)=>(l[d]=o.get(d),l),{})}getQueryParam(a){return this.route.snapshot.queryParamMap.get(a)}getQueryParams(a){const o=this.route.snapshot.queryParamMap;return a.reduce((l,d)=>(l[d]=o.get(d),l),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(a){const o=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>a())),o.end()}navPath(a,o){return this.router.navigate([a],o)}navRelative(a,o){return this.router.navigate(a,{...o,relativeTo:this.route})}navParentFirstChild(a,o){return this.router.navigate(a,{...o,relativeTo:this.route.parent.firstChild})}childDialogClosed$(){return this.router.events.pipe((0,h.p)(a=>a instanceof t.wF),(0,u.Z)(!!this.route.snapshot.firstChild),(0,r.T)(()=>!!this.route.snapshot.firstChild),(0,D.J)(),(0,h.p)(([a,o])=>a&&!o))}static#e=this.\u0275fac=function(o){return new(o||_)(g.KVO(t.Ix),g.KVO(t.nX))};static#t=this.\u0275prov=g.jDH({token:_,factory:_.\u0275fac})}return _})()},4979:(R,p,e)=>{e.d(p,{V:()=>u});var t=e(7092),h=e(7580);let u=(()=>{class r{constructor(){this.subscriptions=new t.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#e=this.\u0275fac=function(E){return new(E||r)};static#t=this.\u0275prov=h.jDH({token:r,factory:r.\u0275fac})}return r})()},591:(R,p,e)=>{e.d(p,{c:()=>a});var t=e(8473),h=e(3513),u=e(4334),r=e(819),D=e(1687),C=e(4318),g=e(7378),v=e(1365),M=e(2645);function _(o,l){return l?d=>(0,h.x)(l.pipe((0,u.s)(1),function E(){return(0,r.N)((o,l)=>{o.subscribe((0,D._)(l,C.l))})}()),d.pipe(_(o))):(0,v.Z)((d,I)=>(0,M.Tg)(o(d,I)).pipe((0,u.s)(1),(0,g.u)(d)))}var O=e(4581);function a(o,l=t.E){const d=(0,O.O)(o,l);return _(()=>d)}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.01.00/dist/ng-edit/projects_eav-ui_src_app_replace-content_replace-content_component_ts-node_modules_rxjs_dist_e-178ebb.1dddb3f439da2696.js.map