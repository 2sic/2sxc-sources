(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{BM85:function(t,e,i){"use strict";i.r(e),i.d(e,"ImportAppComponent",(function(){return R}));var n=i("D57K"),o=i("BLjT"),s=i("LiEJ"),c=i("3riI"),r=i("Jg5f"),p=i("1C3z"),a=i("ZEis"),l=i("2pW/"),m=i("8AiQ"),u=i("8/3+"),g=i("9HSk"),b=i("Qc/f"),f=i("nYrE");function d(t,e){1&t&&p.Qb(0,"mat-spinner",14)}function h(t,e){1&t&&(p.Vb(0,"div",19),p.Oc(1," The import has been done. See the messages below for more information. "),p.Ub())}function v(t,e){1&t&&(p.Vb(0,"div",20),p.Oc(1," The import failed. See the messages below for more information. "),p.Ub())}var x=function(t,e,i){return{"sxc-message-warning":t,"sxc-message-success":e,"sxc-message-error":i}};function I(t,e){if(1&t&&(p.Vb(0,"div",21),p.Oc(1),p.Ub()),2&t){var i=e.$implicit;p.nc("ngClass",p.tc(2,x,0===i.MessageType,1===i.MessageType,2===i.MessageType)),p.Bb(1),p.Qc(" ",i.Text," ")}}function $(t,e){if(1&t&&(p.Vb(0,"div",15),p.Mc(1,h,2,0,"div",16),p.Mc(2,v,2,0,"div",17),p.Mc(3,I,2,6,"div",18),p.Ub()),2&t){var i=p.hc().ngIf;p.Bb(1),p.nc("ngIf",i.importResult.Success),p.Bb(1),p.nc("ngIf",!i.importResult.Success),p.Bb(1),p.nc("ngForOf",i.importResult.Messages)}}function D(t,e){if(1&t){var i=p.Wb();p.Tb(0),p.Vb(1,"button",22),p.dc("click",(function(){return p.Dc(i),p.hc(2).closeDialog()})),p.Oc(2,"Cancel"),p.Ub(),p.Vb(3,"button",23),p.dc("click",(function(){return p.Dc(i),p.hc(2).importApp()})),p.Oc(4," Import "),p.Ub(),p.Sb()}if(2&t){var n=p.hc().ngIf;p.Bb(3),p.nc("disabled",!n.importFile||n.isImporting||n.importResult)}}function y(t,e){if(1&t){var i=p.Wb();p.Tb(0),p.Vb(1,"button",24),p.dc("click",(function(){return p.Dc(i),p.hc(2).closeDialog()})),p.Oc(2,"Close"),p.Ub(),p.Sb()}}function O(t,e){if(1&t){var i=p.Wb();p.Vb(0,"div",1),p.dc("filesDropped",(function(t){return p.Dc(i),p.hc().filesDropped(t)})),p.Vb(1,"div",2),p.Vb(2,"div",3),p.Oc(3,"Import App"),p.Ub(),p.Ub(),p.Mc(4,d,1,0,"mat-spinner",4),p.Vb(5,"p",5),p.Oc(6," Select an app package (zip) from your computer to import an app. New apps can be downloaded on "),p.Vb(7,"a",6),p.Oc(8,"https://2sxc.org/apps"),p.Ub(),p.Oc(9,". For further help visit "),p.Vb(10,"a",7),p.Oc(11,"2sxc Help"),p.Ub(),p.Oc(12,". "),p.Ub(),p.Vb(13,"div"),p.Vb(14,"button",8),p.dc("click",(function(){return p.Dc(i),p.Bc(18).click()})),p.Vb(15,"span"),p.Oc(16),p.Ub(),p.Ub(),p.Vb(17,"input",9,10),p.dc("change",(function(t){return p.Dc(i),p.hc().fileChange(t)})),p.Ub(),p.Ub(),p.Mc(19,$,4,3,"div",11),p.Vb(20,"div",12),p.Mc(21,D,5,1,"ng-container",13),p.Mc(22,y,3,0,"ng-container",13),p.Ub(),p.Ub()}if(2&t){var n=e.ngIf;p.nc("allowedFileTypes","zip"),p.Bb(4),p.nc("ngIf",n.isImporting),p.Bb(10),p.nc("disabled",n.isImporting),p.Bb(2),p.Pc(n.importFile?n.importFile.name:"Select or drop file"),p.Bb(3),p.nc("ngIf",n.importResult),p.Bb(2),p.nc("ngIf",!(null!=n.importResult&&n.importResult.Success)),p.Bb(1),p.nc("ngIf",null==n.importResult?null:n.importResult.Success)}}var R=function(){function t(t,e,i,o){this.dialogData=t,this.dialogRef=e,this.importAppService=i,this.snackBar=o,this.hostClass="dialog-component",this.isImporting$=new s.a(!1),this.importFile$=new s.a(null),this.importResult$=new s.a(null),this.templateVars$=Object(c.a)([this.isImporting$,this.importFile$,this.importResult$]).pipe(Object(r.a)((function(t){var e=Object(n.f)(t,3);return{isImporting:e[0],importFile:e[1],importResult:e[2]}})))}return t.prototype.ngOnInit=function(){null!=this.dialogData.files&&(this.importFile$.next(this.dialogData.files[0]),this.importApp())},t.prototype.ngOnDestroy=function(){this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.filesDropped=function(t){this.importFile$.next(t[0]),this.importResult$.next(null),this.importApp()},t.prototype.fileChange=function(t){this.importFile$.next(t.target.files[0]),this.importResult$.next(null)},t.prototype.importApp=function(t){var e=this;this.isImporting$.next(!0),this.importAppService.importApp(this.importFile$.value,t).subscribe({next:function(t){var i,n,o;if(e.isImporting$.next(!1),e.importResult$.next(t),0===(null===(o=null===(n=null===(i=e.importResult$.value)||void 0===i?void 0:i.Messages)||void 0===n?void 0:n[0])||void 0===o?void 0:o.MessageType)){var s=prompt(e.importResult$.value.Messages[0].Text+" Would you like to install it using another folder name?");if(!s)return;e.importApp(s)}},error:function(t){e.isImporting$.next(!1),e.importResult$.next(null),e.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})},t.\u0275fac=function(e){return new(e||t)(p.Pb(o.a),p.Pb(o.g),p.Pb(a.a),p.Pb(l.b))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-import-app"]],hostVars:1,hostBindings:function(t,e){2&t&&p.Yb("className",e.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["href","https://2sxc.org/apps"],["href","https://2sxc.org/en/help?tag=import-app","target","_blank"],["mat-raised-button","","matTooltip","Open file browser",3,"disabled","click"],["type","file",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(p.Mc(0,O,23,7,"div",0),p.ic(1,"async")),2&t&&p.nc("ngIf",p.jc(1,1,e.templateVars$))},directives:[m.m,u.a,o.h,g.a,b.a,f.b,m.l,m.k],pipes:[m.b],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.07.00/ng-edit/import-app-component.245dfbd55643ed5b9489.js.map