(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_code-editor_code-editor_module_ts"],{2832:function(t,e,n){"use strict";n.d(e,{_:function(){return l},s:function(){return c}});var i=n(4762),o=n(9996),r=n(1785),a=n(2693),p=n(3582),s=n(2837),l="admin/type/",c=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.apiUrl=function(t){return this.dnnContext.$2sxc.http.apiUrl(t)},t.prototype.retrieveContentType=function(t){return this.http.get(this.apiUrl(l+"get"),{params:{appId:this.context.appId.toString(),contentTypeId:t}})},t.prototype.retrieveContentTypes=function(t){return this.http.get(this.apiUrl(l+"list"),{params:{appId:this.context.appId.toString(),scope:t}})},t.prototype.getScopes=function(){return this.http.get(this.apiUrl(l+"scopes"),{params:{appId:this.context.appId.toString()}}).pipe((0,o.U)(function(t){return Object.keys(t).map(function(e){return{name:t[e],value:e}})}))},t.prototype.save=function(t){return this.http.post(this.apiUrl(l+"save"),t,{params:{appid:this.context.appId.toString()}})},t.prototype.delete=function(t){return this.http.delete(this.apiUrl(l+"delete"),{params:{appid:this.context.appId.toString(),staticName:t.StaticName}})},t.prototype.import=function(t){var e,n,o=new FormData;try{for(var r=(0,i.XA)(t),a=r.next();!a.done;a=r.next())o.append("File",a.value)}catch(p){e={error:p}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this.http.post(this.apiUrl(l+"import"),o,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})},t.prototype.createGhost=function(t){return this.http.post(this.apiUrl(l+"addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:t}})},t.\u0275fac=function(e){return new(e||t)(r.LFG(a.eN),r.LFG(p._),r.LFG(s._y))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t}()},7766:function(t,e,n){"use strict";n.r(e),n.d(e,{CodeEditorModule:function(){return Vt},translateLoaderFactoryCode:function(){return jt}});var i=n(1116),o=n(1041),r=n(4369),a=n(7064),p=n(2935),s=n(3070),l=n(7307),c=n(9550),u=n(7672),d=n(3841),f=n(3589),g=n(649),h=n(8526),v=n(3582),m=n(2677),y=n(8842),x=n(2461),w=n(1282),C=n(4762),b=n(7570),T=n(8512),Z=n(1305),I=n(3148),_=n(878),O=n(7254),k=n(1055),A=n(3982),S=n(9996),M=n(4250),P=n(1785);function q(t,e){if(1&t&&(P.ynx(0),P.TgZ(1,"div"),P._uU(2),P.qZA(),P._UZ(3,"br"),P.BQk()),2&t){var n=P.oxw();P.xp6(2),P.AsE('"',n.snackBarData.fileName,'" also has a code-behind file "',n.snackBarData.codeFile,'".')}}function N(t,e){if(1&t&&(P.TgZ(0,"div"),P._uU(1),P.TgZ(2,"a",4),P._uU(3,"docs"),P.qZA(),P._uU(4,". "),P.qZA()),2&t){var n=P.oxw();P.xp6(1),P.AsE(" There are ",n.snackBarData.otherEditions,' other editions of "',n.snackBarData.fileName,'". You may be editing an edition which is not the one you see. See ')}}function F(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"button",5),P.NdJ("click",function(){return P.CHM(n),P.oxw().openCodeBehind()}),P._uU(1," Open code-behind file "),P.qZA()}}var $=function(){function t(t,e){this.snackRef=t,this.snackBarData=e}return t.prototype.openCodeBehind=function(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()},t.\u0275fac=function(e){return new(e||t)(P.Y36(f.OX),P.Y36(f.qD))},t.\u0275cmp=P.Xpm({type:t,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[4,"ngIf"],[1,"actions"],["mat-button","","color","primary",3,"click",4,"ngIf"],["href","http://r.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(P.TgZ(0,"div",0),P.YNc(1,q,4,2,"ng-container",1),P.YNc(2,N,5,2,"div",1),P.qZA(),P.TgZ(3,"div",2),P.YNc(4,F,2,0,"button",3),P.qZA()),2&t&&(P.xp6(1),P.Q6J("ngIf",e.snackBarData.codeFile),P.xp6(1),P.Q6J("ngIf",e.snackBarData.otherEditions),P.xp6(2),P.Q6J("ngIf",e.snackBarData.codeFile))},directives:[i.O5,r.lW],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]}),t}(),J={Templates:"Templates",Snippets:"Snippets"},U=n(6238),Q=n(447),E=n(1407),L=n(5549),Y=n(2693),R=n(2837),D=function(){function t(t,e,n){var i;this.http=t,this.context=e,this.dnnContext=n,this.isShared=null!==(i=sessionStorage.getItem(L.PH))&&void 0!==i?i:(!1).toString()}return t.prototype.get=function(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(E.pJ),{params:(0,C.pi)({appId:this.context.appId.toString(),global:this.isShared},this.templateIdOrPath(t))}).pipe((0,S.U)(function(t){if("auto"===t.Type.toLocaleLowerCase())switch(t.Extension.toLocaleLowerCase()){case".cs":case".cshtml":t.Type="Razor";break;case".html":case".css":case".js":t.Type="Token"}return t}))},t.prototype.save=function(t,e){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(E.pJ),e,{params:(0,C.pi)({appId:this.context.appId.toString(),global:this.isShared},this.templateIdOrPath(t))})},t.prototype.getTemplates=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(E.nu),{params:{appId:this.context.appId.toString(),global:this.isShared,withSubfolders:"true"}})},t.prototype.getPredefinedTemplates=function(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/appfiles/GetTemplates")).pipe((0,S.U)(function(t){return null==t?void 0:t.Templates}))},t.prototype.createTemplate=function(t,e){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(E.yE),{},{params:(0,C.pi)({appId:this.context.appId.toString(),global:this.isShared,purpose:"auto",path:t},e&&{templateKey:e})})},t.prototype.templateIdOrPath=function(t){return parseInt(t,10).toString()===t?{templateId:t}:{path:t}},t.\u0275fac=function(e){return new(e||t)(P.LFG(Y.eN),P.LFG(v._),P.LFG(R._y))},t.\u0275prov=P.Yz7({token:t,factory:t.\u0275fac}),t}(),H=n(7110);function K(t,e){if(1&t&&(P.TgZ(0,"mat-option",9),P._uU(1),P.qZA()),2&t){var n=e.$implicit;P.Q6J("value",n),P.xp6(1),P.hij(" ",n," ")}}function j(t,e){if(1&t&&(P.TgZ(0,"mat-option",9),P._uU(1),P.qZA()),2&t){var n=e.$implicit;P.Q6J("value",n),P.xp6(1),P.hij(" ",n," ")}}function V(t,e){if(1&t&&(P.TgZ(0,"mat-option",9),P._uU(1),P.qZA()),2&t){var n=e.$implicit;P.Q6J("value",n.Key),P.xp6(1),P.hij(" ",n.Name," ")}}function z(t,e){1&t&&(P.TgZ(0,"app-field-hint",23),P._uU(1," This field is required "),P.qZA()),2&t&&P.Q6J("isError",!0)}function B(t,e){if(1&t&&(P.TgZ(0,"pre",24),P._uU(1),P.qZA()),2&t){var n=P.oxw().ngIf;P.xp6(1),P.Oqu(n.preview)}}function X(t,e){if(1&t){var n=P.EpF();P.ynx(0),P.TgZ(1,"div",1),P.TgZ(2,"div",2),P._uU(3,"Create file"),P.qZA(),P.qZA(),P.TgZ(4,"form",3),P.TgZ(5,"div",4),P.TgZ(6,"div",5),P.TgZ(7,"div",6),P.TgZ(8,"mat-form-field",7),P.TgZ(9,"mat-label"),P._uU(10,"Platform"),P.qZA(),P.TgZ(11,"mat-select",8),P.TgZ(12,"mat-option",9),P._uU(13,"All"),P.qZA(),P.YNc(14,K,2,2,"mat-option",10),P.qZA(),P.qZA(),P.qZA(),P.TgZ(15,"div",6),P.TgZ(16,"mat-form-field",7),P.TgZ(17,"mat-label"),P._uU(18,"Purpose"),P.qZA(),P.TgZ(19,"mat-select",11),P.TgZ(20,"mat-option",9),P._uU(21,"All"),P.qZA(),P.YNc(22,j,2,2,"mat-option",10),P.qZA(),P.qZA(),P.qZA(),P.qZA(),P.TgZ(23,"div",12),P.TgZ(24,"mat-form-field",7),P.TgZ(25,"mat-label"),P._uU(26,"Template"),P.qZA(),P.TgZ(27,"mat-select",13),P.TgZ(28,"mat-option",9),P._uU(29,"No template"),P.qZA(),P.YNc(30,V,2,2,"mat-option",10),P.qZA(),P.qZA(),P.qZA(),P.TgZ(31,"div",12),P.TgZ(32,"mat-form-field",7),P.TgZ(33,"mat-label"),P._uU(34,"Name"),P.qZA(),P._UZ(35,"input",14),P.qZA(),P.YNc(36,z,2,1,"app-field-hint",15),P.qZA(),P.TgZ(37,"div",12),P.TgZ(38,"mat-form-field",7),P.TgZ(39,"mat-label"),P._uU(40,"Final Name"),P.qZA(),P._UZ(41,"input",16),P.qZA(),P.qZA(),P.qZA(),P.TgZ(42,"div",17),P.TgZ(43,"button",18),P.NdJ("click",function(){return P.CHM(n),P.oxw().togglePreview()}),P._uU(44,"Preview"),P.qZA(),P._UZ(45,"div",19),P.TgZ(46,"button",20),P.NdJ("click",function(){return P.CHM(n),P.oxw().closeDialog()}),P._uU(47,"Cancel"),P.qZA(),P.TgZ(48,"button",21),P.NdJ("click",function(){return P.CHM(n),P.oxw().confirm()}),P._uU(49," Confirm "),P.qZA(),P.qZA(),P.YNc(50,B,2,1,"pre",22),P.qZA(),P.BQk()}if(2&t){var i=e.ngIf,o=P.oxw();P.xp6(4),P.Q6J("formGroup",o.form),P.xp6(8),P.Q6J("value",o.all),P.xp6(2),P.Q6J("ngForOf",i.platforms),P.xp6(6),P.Q6J("value",o.all),P.xp6(2),P.Q6J("ngForOf",i.purposes),P.xp6(6),P.Q6J("value",o.noTemplate),P.xp6(2),P.Q6J("ngForOf",i.templates),P.xp6(6),P.Q6J("ngIf",o.controls.name.touched&&(null==o.controls.name.errors?null:o.controls.name.errors.required)),P.xp6(7),P.Q6J("disabled",!i.preview),P.xp6(5),P.Q6J("disabled",!o.form.valid),P.xp6(2),P.Q6J("ngIf",o.showPreview&&i.preview)}}var G=function(){function t(t,e,n){this.dialogData=t,this.dialogRef=e,this.sourceService=n,this.hostClass="dialog-component",this.all="all",this.noTemplate="",this.showPreview=!1}return t.prototype.ngOnInit=function(){this.subscription=new b.w,this.templates$=new T.X([]),this.fetchTemplates(),this.buildForm(),this.buildTemplateVars()},t.prototype.ngOnDestroy=function(){this.templates$.complete(),this.subscription.unsubscribe()},t.prototype.closeDialog=function(t){this.dialogRef.close(t)},t.prototype.togglePreview=function(){this.showPreview=!this.showPreview},t.prototype.confirm=function(){var t,e=this.form.getRawValue(),n=(null!==(t=e.folder)&&void 0!==t?t:"").trim(),i={name:(n+(n?"/":"")+Q.vl.sanitizePath(e.finalName.trim())).replace(/\/{2,}/g,""),templateKey:e.templateKey!==this.noTemplate?e.templateKey:void 0};this.closeDialog(i)},t.prototype.fetchTemplates=function(){var t=this;this.sourceService.getPredefinedTemplates().subscribe(function(e){t.templates$.next(e)})},t.prototype.buildForm=function(){var t=this;this.form=new o.cw({platform:new o.NI(this.all),purpose:new o.NI(this.all),templateKey:new o.NI(this.noTemplate),name:new o.NI(null,o.kI.required),finalName:new o.NI({value:null,disabled:!0}),folder:new o.NI({value:this.dialogData.folder,disabled:!0})}),this.controls=this.form.controls,this.subscription.add((0,Z.aj)([this.templates$,this.controls.templateKey.valueChanges.pipe((0,U.O)(this.controls.templateKey.value)),this.controls.name.valueChanges.pipe((0,U.O)(this.controls.name.value))]).subscribe(function(e){var n,i,o=(0,C.CR)(e,3),r=o[1],a=o[2],p=o[0].find(function(t){return t.Key===r}),s=a?""+(null!==(n=null==p?void 0:p.Prefix)&&void 0!==n?n:"")+a+(null!==(i=null==p?void 0:p.Extension)&&void 0!==i?i:""):null;t.controls.finalName.value!==s&&t.controls.finalName.patchValue(s)}))},t.prototype.buildTemplateVars=function(){var t=this,e=this.templates$.pipe((0,S.U)(function(t){var e={};return t.forEach(function(t){t.Platforms.forEach(function(t){e[t]=t})}),Object.keys(e)})),n=this.templates$.pipe((0,S.U)(function(t){var e={};return t.forEach(function(t){e[t.Purpose]=t.Purpose}),Object.keys(e)})),i=(0,Z.aj)([this.templates$,this.controls.platform.valueChanges.pipe((0,U.O)(this.controls.platform.value)),this.controls.purpose.valueChanges.pipe((0,U.O)(this.controls.purpose.value))]).pipe((0,S.U)(function(e){var n=(0,C.CR)(e,3),i=n[1],o=n[2];return n[0].filter(function(e){return(i===t.all||e.Platforms.includes(i))&&(o===t.all||e.Purpose===o)})})),o=(0,Z.aj)([this.templates$,this.controls.templateKey.valueChanges.pipe((0,U.O)(this.controls.templateKey.value))]).pipe((0,S.U)(function(t){var e,n=(0,C.CR)(t,2),i=n[1];return null===(e=n[0].find(function(t){return t.Key===i}))||void 0===e?void 0:e.Body}));this.templateVars$=(0,Z.aj)([e,n,i,o]).pipe((0,S.U)(function(t){var e=(0,C.CR)(t,4);return{platforms:e[0],purposes:e[1],templates:e[2],preview:e[3]}}))},t.\u0275fac=function(e){return new(e||t)(P.Y36(p.WI),P.Y36(p.so),P.Y36(D))},t.\u0275cmp=P.Xpm({type:t,selectors:[["app-create-file-dialog"]],hostVars:1,hostBindings:function(t,e){2&t&&P.Ikx("className",e.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-form",3,"formGroup"],[1,"dialog-form-content","fancy-scrollbar-light"],[1,"field-container","multiple"],[1,"multiple-field"],["appearance","standard","color","accent"],["formControlName","platform"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","purpose"],[1,"field-container"],["formControlName","templateKey"],["matInput","","type","text","formControlName","name","required",""],[3,"isError",4,"ngIf"],["matInput","","type","text","formControlName","finalName"],[1,"dialog-form-actions"],["mat-raised-button","","type","button",3,"disabled","click"],[1,"spacer"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["class","fancy-scrollbar-light",4,"ngIf"],[3,"isError"],[1,"fancy-scrollbar-light"]],template:function(t,e){1&t&&(P.YNc(0,X,51,11,"ng-container",0),P.ALo(1,"async")),2&t&&P.Q6J("ngIf",P.lcZ(1,1,e.templateVars$))},directives:[i.O5,p.uh,o._Y,o.JL,o.sg,s.KE,s.hX,d.gD,o.JJ,o.u,a.ey,i.sg,c.Nt,o.Fj,o.Q7,r.lW,H.Y],pipes:[i.Ov],styles:[".field-container[_ngcontent-%COMP%]:not(:first-of-type){margin-top:8px}.field-container.multiple[_ngcontent-%COMP%]{display:flex}.field-container.multiple[_ngcontent-%COMP%]   .multiple-field[_ngcontent-%COMP%]{flex:1}.field-container.multiple[_ngcontent-%COMP%]   .multiple-field[_ngcontent-%COMP%]:not(:first-of-type){margin-left:8px}.spacer[_ngcontent-%COMP%]{flex:1}pre[_ngcontent-%COMP%]{height:200px;font-family:monospace;display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px;overflow-x:auto}"]}),t}(),W=n(2417),tt=n(3667),et=n(7093),nt=function(){function t(t,e,n){this.http=t,this.dnnContext=e,this.translate=n}return t.prototype.getSnippets=function(t){var e=this;return this.http.get("../ng-assets/snippets.json.js").pipe((0,S.U)(function(n){var i=e.filterAwayNotNeededSnippetsList(n.snippets,t),o=e.extractInputTypeSnippets(i),r=e.initSnippetsWithConfig(o.standardArray,t,o.inputTypeSnippets);return{list:o.standardArray,sets:r}}))},t.prototype.filterAwayNotNeededSnippetsList=function(t,e){var n,i,o=["@","["],r=function(t){return t.Type.indexOf("Razor")>-1?0:1},a=[];try{for(var p=(0,C.XA)(t),s=p.next();!s.done;s=p.next()){var l=s.value,c=o.indexOf(l.set[0]);-1!==c&&c!==r(e)||(c===r(e)&&(l.set=l.set.substr(1)),a.push(l))}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return a},t.prototype.extractInputTypeSnippets=function(t){var e,n,i=[],o=[];try{for(var r=(0,C.XA)(t),a=r.next();!a.done;a=r.next()){var p=a.value;"\\"===p.set[0]?(p.set=p.set.substr(1),o.push(p)):i.push(p)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{standardArray:i,inputTypeSnippets:this.catalogInputTypeSnippets(o)}},t.prototype.catalogInputTypeSnippets=function(t){var e,n,i={};try{for(var o=(0,C.XA)(t),r=o.next();!r.done;r=o.next()){var a=r.value;void 0===i[a.subset]&&(i[a.subset]=[]),i[a.subset].push(a)}}catch(p){e={error:p}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.initSnippetsWithConfig=function(t,e,n){var i=this.makeTree(t);return i.Content=Object.assign({},i.Content,{Fields:{},PresentationFields:{}}),e.TypeContent&&this.loadContentType(i.Content.Fields,e.TypeContent,"Content",e,n),e.TypeContentPresentation&&this.loadContentType(i.Content.PresentationFields,e.TypeContentPresentation,"Content.Presentation",e,n),e.HasList?(i.List=Object.assign({},i.List,{Fields:{},PresentationFields:{}}),e.TypeList&&this.loadContentType(i.List.Fields,e.TypeList,"Header",e,n),e.TypeListPresentation&&this.loadContentType(i.List.PresentationFields,e.TypeListPresentation,"Header.Presentation",e,n)):delete i.List,e.HasApp&&(i.App.Resources={},i.App.Settings={},this.loadContentType(i.App.Resources,"App-Resources","App.Resources",e,n),this.loadContentType(i.App.Settings,"App-Settings","App.Settings",e,n)),i},t.prototype.makeTree=function(t){var e,n,i={};try{for(var o=(0,C.XA)(t),r=o.next();!r.done;r=o.next()){var a=r.value;void 0===i[a.set]&&(i[a.set]={}),void 0===i[a.set][a.subset]&&(i[a.set][a.subset]=[]);var p={key:a.name,label:this.label(a.set,a.subset,a.name),snip:a.content,help:a.help||this.help(a.set,a.subset,a.name),links:this.linksList(a.links)};i[a.set][a.subset].push(p)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.label=function(t,e,n){var i=this.getHelpKey(t,e,n,".Key"),o=this.translate.instant(i);return o===i&&(o=n),o},t.prototype.getHelpKey=function(t,e,n,i){return"SourceEditorSnippets."+t+"."+e+"."+n+i},t.prototype.help=function(t,e,n){var i=this.getHelpKey(t,e,n,".Help"),o=this.translate.instant(i);return o===i&&(o=""),o},t.prototype.linksList=function(t){var e,n;if(!t)return null;var i=[],o=t.split("\n");try{for(var r=(0,C.XA)(o),a=r.next();!a.done;a=r.next()){var p=a.value.split(":");if(3===p.length){var s={name:p[0].trim(),url:p[1].trim()+":"+p[2].trim()};i.push(s)}}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return 0===i.length?null:i},t.prototype.loadContentType=function(t,e,n,i,o){var r=this;this.getFields(i.AppId,e).subscribe(function(e){var a,p;try{for(var s=(0,C.XA)(e),l=s.next();!l.done;l=s.next()){var c=l.value,u=c.StaticName;t[u]={key:u,label:u,snip:r.valuePlaceholder(n,u,i),help:c.Metadata.merged.Notes||" ("+c.Type.toLowerCase()+") "};var d=(0,W.Z)(t[u]);r.attachSnippets(t,n,u,c.InputType,d,o)}}catch(h){a={error:h}}finally{try{l&&!l.done&&(p=s.return)&&p.call(s)}finally{if(a)throw a.error}}if(e.length)for(var f=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"],g=0;g<f.length;g++)t[f[g]]={key:f[g],label:f[g],snip:r.valuePlaceholder(n,f[g],i),help:r.translate.instant("SourceEditorSnippets.StandardFields."+f[g]+".Help")}})},t.prototype.valuePlaceholder=function(t,e,n){return n.Type.indexOf("Razor")>-1?"@"+t+"."+e:"["+t.replace(".",":")+":"+e+"]"},t.prototype.getFields=function(t,e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(et.jt),{params:{appid:t.toString(),staticName:e}}).pipe((0,S.U)(function(t){var e,n;t=t.filter(function(t){return t.Type!==tt.Q.Empty});try{for(var i=(0,C.XA)(t),o=i.next();!o.done;o=i.next()){var r=o.value;if(r.Metadata){var a=r.Metadata,p=a[r.Type],s=a[r.InputType];a.merged=(0,C.pi)((0,C.pi)((0,C.pi)({},a.All),p),s)}}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return t}))},t.prototype.attachSnippets=function(t,e,n,i,o,r){var a=r[i];if(i.indexOf("-")){var p=i.substr(0,i.indexOf("-"));if(p){var s=r[p];s&&(a=a?a.concat(s):s)}}if(a){void 0===t[n].more&&(t[n].more={});for(var l=t[n].more,c=0;c<a.length;c++)try{l[n+"-"+a[c].name]=Object.assign({},o,{key:n+" - "+a[c].name,label:a[c].name,snip:this.localizeGenericSnippet(a[c].content,e,n),collapse:!0})}finally{}}},t.prototype.localizeGenericSnippet=function(t,e,n){return t.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+e+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+n+"$2")},t.\u0275fac=function(e){return new(e||t)(P.LFG(Y.eN),P.LFG(R._y),P.LFG(g.sK))},t.\u0275prov=P.Yz7({token:t,factory:t.\u0275fac}),t}(),it=n(9624),ot=n(6146),rt=n(7512),at=n(1271),pt=function(){function t(){}return t.prototype.transform=function(t){return null==t||t.sort(function(t,e){return t.isFolder<e.isFolder?1:t.isFolder>e.isFolder?-1:0}),t},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=P.Yjl({name:"sortItems",type:t,pure:!0}),t}(),st=function(){function t(t){this.sanitizer=t}return t.prototype.transform=function(t,e){return this.sanitizer.bypassSecurityTrustStyle("padding-left: "+(e?8*t:0===t?8:8*t+16)+"px;")},t.\u0275fac=function(e){return new(e||t)(P.Y36(it.H7,16))},t.\u0275pipe=P.Yjl({name:"depthPadding",type:t,pure:!0}),t}();function lt(t,e){1&t&&P.GkF(0)}var ct=function(t){return{item:t}};function ut(t,e){if(1&t&&(P.ynx(0),P.YNc(1,lt,1,0,"ng-container",5),P.BQk()),2&t){var n=e.$implicit;P.oxw();var i=P.MAs(5);P.xp6(1),P.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",P.VKq(2,ct,n))}}var dt=function(t){return{active:t}};function ft(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"div",8),P.NdJ("click",function(){P.CHM(n);var t=P.oxw().item;return P.oxw().openTemplate(t.pathFromRoot)}),P.ALo(1,"depthPadding"),P._uU(2),P.qZA()}if(2&t){var i=P.oxw().item,o=P.oxw();P.Akn(P.xi3(1,5,i.depth,i.isFolder)),P.Q6J("ngClass",P.VKq(8,dt,o.toggledItems.includes(i.pathFromRoot)))("tippy",i.name),P.xp6(2),P.hij(" ",i.name," ")}}function gt(t,e){1&t&&P.GkF(0)}function ht(t,e){if(1&t&&(P.ynx(0),P.YNc(1,gt,1,0,"ng-container",5),P.BQk()),2&t){var n=e.$implicit;P.oxw(4);var i=P.MAs(5);P.xp6(1),P.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",P.VKq(2,ct,n))}}function vt(t,e){if(1&t&&(P.ynx(0),P.YNc(1,ht,2,4,"ng-container",1),P.ALo(2,"sortItems"),P.BQk()),2&t){var n=P.oxw(2).item;P.xp6(1),P.Q6J("ngForOf",P.lcZ(2,1,n.children))}}function mt(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"div"),P.TgZ(1,"div",9),P.NdJ("click",function(){P.CHM(n);var t=P.oxw().item;return P.oxw().toggleItem(t.pathFromRoot)}),P.ALo(2,"depthPadding"),P.TgZ(3,"div",10),P.TgZ(4,"mat-icon"),P._uU(5),P.qZA(),P.TgZ(6,"span"),P._uU(7),P.qZA(),P.qZA(),P.TgZ(8,"div",11),P.NdJ("click",function(){P.CHM(n);var t=P.oxw().item;return P.oxw().addFile(t.pathFromRoot)}),P.TgZ(9,"mat-icon"),P._uU(10,"add"),P.qZA(),P.qZA(),P.qZA(),P.YNc(11,vt,3,3,"ng-container",7),P.qZA()}if(2&t){var i=P.oxw().item,o=P.oxw();P.xp6(1),P.Akn(P.xi3(2,6,i.depth,i.isFolder)),P.xp6(2),P.Q6J("tippy",i.name),P.xp6(2),P.hij(" ",o.toggledItems.includes(i.pathFromRoot)?"keyboard_arrow_down":"keyboard_arrow_right"," "),P.xp6(2),P.Oqu(i.name),P.xp6(4),P.Q6J("ngIf",o.toggledItems.includes(i.pathFromRoot))}}function yt(t,e){if(1&t&&(P.YNc(0,ft,3,10,"div",6),P.YNc(1,mt,12,9,"div",7)),2&t){var n=e.item;P.Q6J("ngIf",!n.isFolder),P.xp6(1),P.Q6J("ngIf",n.isFolder)}}var xt=function(){function t(){this.openView=new P.vpe,this.createTemplate=new P.vpe,this.toggledItems=[]}return t.prototype.ngOnChanges=function(t){var e;if(null!=t.templates&&(this.tree=function(t){var e,n;if(!t)return[];var i=[];try{for(var o=(0,C.XA)(t),r=o.next();!r.done;r=o.next())for(var a=i,p=r.value.split("/"),s=p[p.length-1],l="",c=function(t){var e=p[t];l+=t?"/"+e:e;var n=a.find(function(t){return t.name===e});if(n)a=n.children;else{var i=(0,C.pi)({depth:t,name:e,pathFromRoot:l,isFolder:e!==s},e!==s&&{children:[]});a.push(i),a=i.children}},u=0;u<p.length;u++)c(u)}catch(d){e={error:d}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}(null!==(e=this.templates)&&void 0!==e?e:[])),null!=t.filename){var n=t.filename.previousValue;n&&this.toggleItem(n),this.filename&&this.showFileInTree(this.filename)}},t.prototype.openTemplate=function(t){this.openView.emit(t)},t.prototype.toggleItem=function(t){Q.iX.toggleInArray(t,this.toggledItems)},t.prototype.addFile=function(t){this.createTemplate.emit(t)},t.prototype.showFileInTree=function(t){var e,n;if(null!=t&&!this.toggledItems.includes(t)){var i=t.split("/"),o="";try{for(var r=(0,C.XA)(i),a=r.next();!a.done;a=r.next()){var p=a.value;this.toggledItems.includes(o=o?o+"/"+p:p)||this.toggleItem(o)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=P.Xpm({type:t,selectors:[["app-code-templates"]],inputs:{filename:"filename",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[P.TTD],decls:10,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[4,"ngFor","ngForOf"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy","click",4,"ngIf"],[4,"ngIf"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(t,e){1&t&&(P.TgZ(0,"div",0),P.TgZ(1,"div"),P.YNc(2,ut,2,4,"ng-container",1),P.ALo(3,"sortItems"),P.YNc(4,yt,2,2,"ng-template",null,2,P.W1O),P.qZA(),P.TgZ(6,"div",3),P.TgZ(7,"button",4),P.NdJ("click",function(){return e.addFile()}),P.TgZ(8,"mat-icon"),P._uU(9,"add"),P.qZA(),P.qZA(),P.qZA(),P.qZA()),2&t&&(P.xp6(2),P.Q6J("ngForOf",P.lcZ(3,1,e.tree)))},directives:[i.sg,r.lW,rt.$,l.Hw,i.tP,i.O5,i.mk,at.E],pipes:[pt,st],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]}),t}(),wt=function(){function t(){}return t.prototype.transform=function(t){if(null!=t)return Array.isArray(t)?t:Object.values(t)},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=P.Yjl({name:"objectToArray",type:t,pure:!0}),t}(),Ct=n(6207);function bt(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"mat-icon",12),P.NdJ("click",function(){P.CHM(n);var t=P.oxw().$implicit;return P.oxw(5).toggleMore(t.key)}),P._uU(1),P.qZA()}if(2&t){var i=P.oxw().$implicit,o=P.oxw(5);P.xp6(1),P.hij(" ",o.toggledMores.includes(i.key)?"more_vert":"more_horiz"," ")}}function Tt(t,e){if(1&t&&(P.TgZ(0,"div"),P.TgZ(1,"a",15),P._uU(2),P.qZA(),P.qZA()),2&t){var n=e.$implicit;P.xp6(1),P.Q6J("href",n.url,P.LSH),P.xp6(1),P.Oqu(n.name)}}function Zt(t,e){if(1&t&&(P.TgZ(0,"div",13),P._UZ(1,"div",14),P.ALo(2,"safeHtml"),P.YNc(3,Tt,3,2,"div",1),P.qZA()),2&t){var n=P.oxw().$implicit;P.xp6(1),P.Q6J("innerHTML",P.lcZ(2,2,n.help),P.oJD),P.xp6(2),P.Q6J("ngForOf",n.links)}}function It(t,e){if(1&t&&(P.TgZ(0,"div"),P.TgZ(1,"a",15),P._uU(2),P.qZA(),P.qZA()),2&t){var n=e.$implicit;P.xp6(1),P.Q6J("href",n.url,P.LSH),P.xp6(1),P.Oqu(n.name)}}function _t(t,e){if(1&t&&(P.TgZ(0,"div",18),P._UZ(1,"div",14),P.ALo(2,"safeHtml"),P.YNc(3,It,3,2,"div",1),P.qZA()),2&t){var n=P.oxw().$implicit;P.xp6(1),P.Q6J("innerHTML",P.lcZ(2,2,n.help),P.oJD),P.xp6(2),P.Q6J("ngForOf",n.links)}}function Ot(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"div"),P.TgZ(1,"div",7),P.TgZ(2,"div",16),P.NdJ("click",function(){var t=P.CHM(n).$implicit;return P.oxw(7).addSnippet(t.snip)}),P._uU(3),P.qZA(),P.TgZ(4,"mat-icon",10),P.NdJ("click",function(){var t=P.CHM(n).$implicit;return P.oxw(7).toggleInfo(t.key)}),P._uU(5," info "),P.qZA(),P.qZA(),P.YNc(6,_t,4,4,"div",17),P.qZA()}if(2&t){var i=e.$implicit,o=P.oxw(7);P.xp6(2),P.Q6J("tippy",i.snip),P.xp6(1),P.hij(" ",i.label," "),P.xp6(3),P.Q6J("ngIf",o.toggledInfos.includes(i.key))}}function kt(t,e){if(1&t&&(P.ynx(0),P.YNc(1,Ot,7,3,"div",1),P.ALo(2,"objectToArray"),P.BQk()),2&t){var n=P.oxw().$implicit;P.xp6(1),P.Q6J("ngForOf",P.lcZ(2,1,n.more))}}function At(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"div",6),P.TgZ(1,"div",7),P.TgZ(2,"div",8),P.NdJ("click",function(){var t=P.CHM(n).$implicit;return P.oxw(5).addSnippet(t.snip)}),P._uU(3),P.qZA(),P.YNc(4,bt,2,1,"mat-icon",9),P.TgZ(5,"mat-icon",10),P.NdJ("click",function(){var t=P.CHM(n).$implicit;return P.oxw(5).toggleInfo(t.key)}),P._uU(6," info "),P.qZA(),P.qZA(),P.YNc(7,Zt,4,4,"div",11),P.YNc(8,kt,3,3,"ng-container",3),P.qZA()}if(2&t){var i=e.$implicit,o=P.oxw(5);P.xp6(2),P.Q6J("tippy",i.snip),P.xp6(1),P.hij(" ",i.label," "),P.xp6(1),P.Q6J("ngIf",i.more),P.xp6(3),P.Q6J("ngIf",o.toggledInfos.includes(i.key)),P.xp6(1),P.Q6J("ngIf",o.toggledMores.includes(i.key))}}function St(t,e){if(1&t&&(P.ynx(0),P.YNc(1,At,9,5,"div",5),P.ALo(2,"objectToArray"),P.BQk()),2&t){var n=P.oxw().$implicit;P.xp6(1),P.Q6J("ngForOf",P.lcZ(2,1,n.value))}}function Mt(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"div"),P.TgZ(1,"div",4),P.NdJ("click",function(){var t=P.CHM(n).$implicit;return P.oxw(3).toggleFolder(t.key)}),P.ALo(2,"translate"),P.TgZ(3,"mat-icon"),P._uU(4),P.qZA(),P.TgZ(5,"span"),P._uU(6),P.ALo(7,"translate"),P.qZA(),P.qZA(),P.YNc(8,St,3,3,"ng-container",3),P.qZA()}if(2&t){var i=e.$implicit,o=P.oxw(2).$implicit,r=P.oxw();P.xp6(1),P.Q6J("tippy",P.lcZ(2,4,"SourceEditorSnippets."+o.key+"."+i.key+".Help")),P.xp6(3),P.hij(" ",r.toggledFolders.includes(i.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),P.xp6(2),P.Oqu(P.lcZ(7,6,"SourceEditorSnippets."+o.key+"."+i.key+".Title")),P.xp6(2),P.Q6J("ngIf",r.toggledFolders.includes(i.key))}}function Pt(t,e){if(1&t&&(P.ynx(0),P.YNc(1,Mt,9,8,"div",1),P.ALo(2,"keyvalue"),P.BQk()),2&t){var n=P.oxw().$implicit;P.xp6(1),P.Q6J("ngForOf",P.lcZ(2,1,n.value))}}function qt(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"div"),P.TgZ(1,"div",2),P.NdJ("click",function(){var t=P.CHM(n).$implicit;return P.oxw().toggleSection(t.key)}),P.ALo(2,"translate"),P.TgZ(3,"mat-icon"),P._uU(4),P.qZA(),P.TgZ(5,"span"),P._uU(6),P.ALo(7,"translate"),P.qZA(),P.qZA(),P.YNc(8,Pt,3,3,"ng-container",3),P.qZA()}if(2&t){var i=e.$implicit,o=P.oxw();P.xp6(1),P.Q6J("tippy",P.lcZ(2,4,"SourceEditorSnippets."+i.key+".Help")),P.xp6(3),P.hij(" ",o.toggledSections.includes(i.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),P.xp6(2),P.Oqu(P.lcZ(7,6,"SourceEditorSnippets."+i.key+".Title")),P.xp6(2),P.Q6J("ngIf",o.toggledSections.includes(i.key))}}var Nt=function(){function t(){this.insertSnippet=new P.vpe,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}return t.prototype.addSnippet=function(t){this.insertSnippet.emit(t)},t.prototype.toggleSection=function(t){Q.iX.toggleInArray(t,this.toggledSections)},t.prototype.toggleFolder=function(t){Q.iX.toggleInArray(t,this.toggledFolders)},t.prototype.toggleInfo=function(t){Q.iX.toggleInArray(t,this.toggledInfos)},t.prototype.toggleMore=function(t){Q.iX.toggleInArray(t,this.toggledMores)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=P.Xpm({type:t,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:3,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],[4,"ngFor","ngForOf"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],[4,"ngIf"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],["class","snippet",4,"ngFor","ngForOf"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750",3,"click",4,"ngIf"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help",4,"ngIf"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more",4,"ngIf"],[1,"snippet-help","snippet-help-more"]],template:function(t,e){1&t&&(P.TgZ(0,"div",0),P.YNc(1,qt,9,8,"div",1),P.ALo(2,"keyvalue"),P.qZA()),2&t&&(P.xp6(1),P.Q6J("ngForOf",P.lcZ(2,1,e.snippets)))},directives:[i.sg,rt.$,l.Hw,i.O5,a.wG,at.E],pipes:[i.Nd,g.X$,wt,Ct.z],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]}),t}();function Ft(t,e){1&t&&P._UZ(0,"mat-icon",20)}function $t(t,e){1&t&&P._UZ(0,"mat-spinner",21)}var Jt=function(t,e,n){return{active:t,modified:e,loading:n}};function Ut(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"div",13),P.NdJ("click",function(){var t=P.CHM(n).$implicit;return P.oxw(3).openView(t.viewKey)}),P.TgZ(1,"div",14),P.TgZ(2,"span",15),P._uU(3),P.qZA(),P.qZA(),P.TgZ(4,"div",16),P.YNc(5,Ft,1,0,"mat-icon",17),P.YNc(6,$t,1,0,"mat-spinner",18),P.TgZ(7,"mat-icon",19),P.NdJ("click",function(){var t=P.CHM(n).$implicit;return P.oxw(3).closeEditor(t.viewKey)}),P._uU(8," close "),P.qZA(),P.qZA(),P.qZA()}if(2&t){var i=e.$implicit;P.Q6J("ngClass",P.kEZ(5,Jt,i.isActive,i.isModified,i.isLoading)),P.xp6(1),P.Q6J("tippy",i.label),P.xp6(2),P.Oqu(i.label),P.xp6(2),P.Q6J("ngIf",i.isModified),P.xp6(1),P.Q6J("ngIf",i.isLoading)}}function Qt(t,e){if(1&t&&(P.TgZ(0,"div",11),P.YNc(1,Ut,9,9,"div",12),P.qZA()),2&t){var n=P.oxw().ngIf;P.xp6(1),P.Q6J("ngForOf",n.tabs)}}function Et(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"app-monaco-editor",22),P.NdJ("valueChanged",function(t){P.CHM(n);var e=P.oxw().ngIf;return P.oxw().codeChanged(t,e.viewKey)}),P.qZA()}if(2&t){var i=P.oxw().ngIf,o=P.oxw();P.Q6J("filename",i.view.FileName)("value",i.view.Code)("options",o.monacoOptions)("snippets",i.editorSnipps)("autoFocus",!0)}}function Lt(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"button",23),P.NdJ("click",function(){return P.CHM(n),P.oxw(2).save()}),P.TgZ(1,"mat-icon"),P._uU(2,"done"),P.qZA(),P.qZA()}}var Yt=function(t){return{"sxc-dark":t}},Rt=function(t){return{active:t}};function Dt(t,e){if(1&t){var n=P.EpF();P.TgZ(0,"div",1),P.TgZ(1,"div",2),P.TgZ(2,"div",3),P.NdJ("click",function(){P.CHM(n);var t=P.oxw();return t.toggleExplorer(t.Explorers.Templates)}),P.TgZ(3,"mat-icon"),P._uU(4,"file_copy"),P.qZA(),P.qZA(),P.TgZ(5,"div",4),P.NdJ("click",function(){P.CHM(n);var t=P.oxw();return t.toggleExplorer(t.Explorers.Snippets)}),P.TgZ(6,"mat-icon"),P._uU(7,"code"),P.qZA(),P.qZA(),P.qZA(),P.TgZ(8,"app-code-templates",5),P.NdJ("openView",function(t){return P.CHM(n),P.oxw().openView(t)})("createTemplate",function(t){return P.CHM(n),P.oxw().createTemplate(t)}),P.qZA(),P.TgZ(9,"app-code-snippets",6),P.NdJ("insertSnippet",function(t){return P.CHM(n),P.oxw().insertSnippet(t)}),P.qZA(),P.TgZ(10,"div",7),P.YNc(11,Qt,2,1,"div",8),P.YNc(12,Et,1,5,"app-monaco-editor",9),P.qZA(),P.YNc(13,Lt,3,0,"button",10),P.qZA()}if(2&t){var i=e.ngIf,o=P.oxw();P.Q6J("ngClass",P.VKq(11,Yt,"2sxc-dark"===o.monacoOptions.theme)),P.xp6(2),P.Q6J("ngClass",P.VKq(13,Rt,o.activeExplorer===o.Explorers.Templates)),P.xp6(3),P.Q6J("ngClass",P.VKq(15,Rt,o.activeExplorer===o.Explorers.Snippets)),P.xp6(3),P.Q6J("hidden",o.activeExplorer!==o.Explorers.Templates)("filename",null==i.view?null:i.view.FileName)("templates",i.templates),P.xp6(1),P.Q6J("hidden",o.activeExplorer!==o.Explorers.Snippets)("snippets",i.explorerSnipps),P.xp6(2),P.Q6J("ngIf",i.tabs.length>0),P.xp6(1),P.Q6J("ngIf",i.view),P.xp6(1),P.Q6J("ngIf",i.activeView)}}var Ht=[{path:"",component:function(){function t(t,e,n,i,o,r,a,p,s){this.context=t,this.route=e,this.snackBar=n,this.sourceService=i,this.snippetsService=o,this.zone=r,this.titleService=a,this.dialog=p,this.viewContainerRef=s,this.Explorers=J,this.activeExplorer=J.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2},this.context.init(this.route)}return t.prototype.ngOnInit=function(){var t=this;this.subscription=new b.w,this.templates$=new T.X([]);var e=this.route.snapshot.paramMap.get("codeItemKey");this.activeView$=new T.X(e),this.openViews$=new T.X([e]),this.viewInfos$=new T.X([]),this.attachListeners(),this.sourceService.getTemplates().subscribe(function(e){t.templates$.next(e)}),this.subscription.add((0,Z.aj)([this.templates$,this.openViews$]).subscribe(function(e){var n=(0,C.CR)(e,2),i=n[0];if(0!==i.length){var o=t.viewInfos$.value,r=n[1].filter(function(t){return!o.some(function(e){return e.viewKey===t})});0!==r.length&&((0,I.D)(r.map(function(e){var n={viewKey:e};o=(0,C.ev)((0,C.ev)([],(0,C.CR)(o)),[n]);var i=t.sourceService.get(e).pipe((0,k.B)()),r=i.pipe((0,A.zg)(function(e){return t.snippetsService.getSnippets(e)}));return(0,I.D)([(0,_.of)(e),i,r])})).subscribe(function(e){var n=t.viewInfos$.value;e.forEach(function(e){var o=(0,C.CR)(e,3),r=o[0],a=o[1],p=o[2],s=n.findIndex(function(t){return t.viewKey===r});if(!(s<0)){var l={viewKey:r,view:a,explorerSnipps:p.sets,editorSnipps:p.list,savedCode:a.Code};n=(0,C.ev)((0,C.ev)((0,C.ev)([],(0,C.CR)(n.slice(0,s))),[l]),(0,C.CR)(n.slice(s+1))),t.showCodeAndEditionWarnings(a,i)}}),t.viewInfos$.next(n)}),t.viewInfos$.next(o))}})),this.subscription.add((0,Z.aj)([this.activeView$,this.viewInfos$]).subscribe(function(e){var n,i=(0,C.CR)(e,2),o=i[0],r=i[1].find(function(t){return t.viewKey===o}),a="Code Editor",p=null==r?a:(null===(n=r.view)||void 0===n?void 0:n.FileName)+" - "+a;p!==t.titleService.getTitle()&&t.titleService.setTitle(p)})),this.templateVars$=(0,Z.aj)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,S.U)(function(t){var e=(0,C.CR)(t,4),n=e[0],i=e[1],o=e[3],r=e[2].map(function(t){var e,n,r,a=o.find(function(e){return e.viewKey===t});return{viewKey:t,label:null!==(n=null===(e=null==a?void 0:a.view)||void 0===e?void 0:e.FileName)&&void 0!==n?n:t,isActive:t===i,isModified:(null===(r=null==a?void 0:a.view)||void 0===r?void 0:r.Code)!==(null==a?void 0:a.savedCode),isLoading:null==(null==a?void 0:a.view)}}),a=o.find(function(t){return t.viewKey===i});return{activeView:i,tabs:r,viewKey:null==a?void 0:a.viewKey,view:null==a?void 0:a.view,templates:n,explorerSnipps:null==a?void 0:a.explorerSnipps,editorSnipps:null==a?void 0:a.editorSnipps}}))},t.prototype.ngOnDestroy=function(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),this.subscription.unsubscribe()},t.prototype.toggleExplorer=function(t){this.activeExplorer=this.activeExplorer!==t?t:null},t.prototype.createTemplate=function(t){var e=this;this.dialog.open(G,{autoFocus:!1,data:{folder:t},viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(function(t){t&&e.sourceService.createTemplate(t.name,t.templateKey).subscribe(function(){e.sourceService.getTemplates().subscribe(function(t){e.templates$.next(t)})})})},t.prototype.insertSnippet=function(t){var e;null===(e=this.monacoEditorRef)||void 0===e||e.insertSnippet(t)},t.prototype.codeChanged=function(t,e){var n=this.viewInfos$.value,i=n.findIndex(function(t){return t.viewKey===e}),o=n[i],r=(0,C.pi)((0,C.pi)({},o),{view:(0,C.pi)((0,C.pi)({},o.view),{Code:t})});n=(0,C.ev)((0,C.ev)((0,C.ev)([],(0,C.CR)(n.slice(0,i))),[r]),(0,C.CR)(n.slice(i+1))),this.viewInfos$.next(n)},t.prototype.openView=function(t){var e,n;t=null!==(n=null===(e=this.viewInfos$.value.find(function(e){var n;return e.viewKey!==t&&(null===(n=e.view)||void 0===n?void 0:n.FileName)===t}))||void 0===e?void 0:e.viewKey)&&void 0!==n?n:t,this.activeView$.value!==t&&this.activeView$.next(t);var i=this.openViews$.value;if(!i.includes(t)){var o=(0,C.ev)((0,C.ev)([],(0,C.CR)(i)),[t]);this.openViews$.next(o)}},t.prototype.closeEditor=function(t){var e,n=this.openViews$.value,i=n.filter(function(e){return e!==t}),o=this.activeView$.value;if(o===t){var r=null!==(e=n[n.indexOf(o)-1])&&void 0!==e?e:i[0];this.activeView$.next(r)}this.openViews$.next(i)},t.prototype.save=function(t){var e=this;null!=t||(t=this.activeView$.value);var n=this.viewInfos$.value.find(function(e){return e.viewKey===t});if(null!=(null==n?void 0:n.view)){this.snackBar.open("Saving...");var i=n.view.Code;this.sourceService.save(t,n.view).subscribe({next:function(n){if(n){var o=(0,C.ev)([],(0,C.CR)(e.viewInfos$.value)),r=o.findIndex(function(e){return e.viewKey===t});if(!(r<0)){var a=(0,C.pi)((0,C.pi)({},o[r]),{savedCode:i});o=(0,C.ev)((0,C.ev)((0,C.ev)([],(0,C.CR)(o.slice(0,r))),[a]),(0,C.CR)(o.slice(r+1))),e.viewInfos$.next(o),e.snackBar.open("Saved",null,{duration:2e3})}}else e.snackBar.open("Failed",null,{duration:2e3})},error:function(){e.snackBar.open("Failed",null,{duration:2e3})}})}},t.prototype.showCodeAndEditionWarnings=function(t,e){var n=this,i=t.FileName,o=i.indexOf("/")>-1?i.lastIndexOf("/")+1:0,r=0===o?"":i.substring(0,o),a=i.substring(o),p=a.substring(0,a.length-t.Extension.length)+".code"+t.Extension,s=e.find(function(t){return t===r+p}),l=e.filter(function(t){return t.endsWith(a)}).length-1;if(s||l){var c=this.snackBar.openFromComponent($,{data:{fileName:t.FileName,codeFile:s,otherEditions:l,openCodeBehind:!1},duration:1e4});c.onAction().subscribe(function(){c.containerInstance.snackBarConfig.data.openCodeBehind&&n.openView(s)})}},t.prototype.attachListeners=function(){var t=this;this.zone.runOutsideAngular(function(){t.subscription.add((0,O.R)(window,"beforeunload").subscribe(function(e){!t.viewInfos$.value.some(function(t){return null!=t.view&&t.view.Code!==t.savedCode})||(e.preventDefault(),e.returnValue="")})),t.subscription.add((0,O.R)(window,"keydown").subscribe(function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),t.zone.run(function(){t.save()}))}))})},t.\u0275fac=function(e){return new(e||t)(P.Y36(v._),P.Y36(w.gz),P.Y36(f.ux),P.Y36(D),P.Y36(nt),P.Y36(P.R0b),P.Y36(it.Dx),P.Y36(p.uw),P.Y36(P.s_b))},t.\u0275cmp=P.Xpm({type:t,selectors:[["app-code-editor"]],viewQuery:function(t,e){var n;1&t&&P.Gf(M.T,5),2&t&&P.iGM(n=P.CRH())&&(e.monacoEditorRef=n.first)},decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",3,"ngClass",4,"ngIf"],["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","filename","templates","openView","createTemplate"],[3,"hidden","snippets","insertSnippet"],[1,"editor-group"],["class","tabs-container fancy-scrollbar-dark",4,"ngIf"],[3,"filename","value","options","snippets","autoFocus","valueChanged",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click",4,"ngIf"],[1,"tabs-container","fancy-scrollbar-dark"],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tab",3,"ngClass","click"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],[1,"tab-label"],[1,"tab-actions-container"],["class","tab-action icon-modified","svgIcon","circle",4,"ngIf"],["class","spinner","mode","indeterminate","diameter","14","color","white",4,"ngIf"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],["svgIcon","circle",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],[3,"filename","value","options","snippets","autoFocus","valueChanged"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(t,e){1&t&&(P.YNc(0,Dt,14,17,"div",0),P.ALo(1,"async")),2&t&&P.Q6J("ngIf",P.lcZ(1,1,e.templateVars$))},directives:[i.O5,ot.D,i.mk,rt.$,l.Hw,xt,Nt,i.sg,at.E,u.$g,M.T,r.lW],pipes:[i.Ov],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid #252526;background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:rgba(90,93,94,.31)}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%], .editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),t}()}],Kt=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=P.oAB({type:t}),t.\u0275inj=P.cJS({imports:[[w.Bz.forChild(Ht)],w.Bz]}),t}();function jt(t){return new y.M(t,"./i18n/code-editor.",".js?"+window.sxcVersion)}var Vt=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=P.oAB({type:t}),t.\u0275inj=P.cJS({providers:[v._,D,nt,g.sK],imports:[[Kt,m.q,i.ez,p.Is,r.ot,l.Ps,f.ZX,d.LD,a.si,g.aw.forChild((0,x.f)(jt)),h.n,u.Cq,o.UX,s.lN,c.c]]}),t}()},7093:function(t,e,n){"use strict";n.d(e,{jt:function(){return c},Mr:function(){return u}});var i=n(4762),o=n(9996),r=n(2832),a=n(1785),p=n(2693),s=n(3582),l=n(2837),c="admin/field/all",u=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.apiUrl=function(t){return this.dnnContext.$2sxc.http.apiUrl(t)},t.prototype.typeListRetrieve=function(){return this.http.get(this.apiUrl("admin/field/DataTypes"),{params:{appid:this.context.appId.toString()}})},t.prototype.getInputTypesList=function(){return this.http.get(this.apiUrl("admin/field/InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,o.U)(function(t){return t.map(function(t){return{dataType:t.Type.substring(0,t.Type.indexOf("-")),inputType:t.Type,label:t.Label,description:t.Description,IsDefault:t.IsDefault,IsObsolete:t.IsObsolete,IsRecommended:t.IsRecommended,ObsoleteMessage:t.ObsoleteMessage,Icon:t.IsDefault?"star":t.IsRecommended?"star_outlined":null}})}))},t.prototype.getReservedNames=function(){return this.http.get(this.apiUrl("admin/field/ReservedNames"))},t.prototype.getFields=function(t){return this.http.get(this.apiUrl(c),{params:{appid:this.context.appId.toString(),staticName:t.StaticName}}).pipe((0,o.U)(function(t){var e,n;if(t)try{for(var o=(0,i.XA)(t),r=o.next();!r.done;r=o.next()){var a=r.value;if(a.Metadata){var p=a.Metadata,s=p[a.Type],l=p[a.InputType];p.merged=(0,i.pi)((0,i.pi)((0,i.pi)({},p.All),s),l)}}}catch(c){e={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return t}))},t.prototype.reOrder=function(t,e){return this.http.post(this.apiUrl("admin/field/Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:e.Id.toString(),order:JSON.stringify(t)}})},t.prototype.setTitle=function(t,e){return this.http.post(this.apiUrl(r._+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:e.Id.toString(),attributeId:t.Id.toString()}})},t.prototype.rename=function(t,e,n){return this.http.post(this.apiUrl("admin/field/Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:e.toString(),attributeId:t.toString(),newName:n}})},t.prototype.delete=function(t,e){if(t.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl("admin/field/Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:e.Id.toString(),attributeId:t.Id.toString()}})},t.prototype.add=function(t,e){return this.http.post(this.apiUrl("admin/field/Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:e.toString(),Id:t.Id.toString(),Type:t.Type,InputType:t.InputType,StaticName:t.StaticName,IsTitle:t.IsTitle.toString(),Index:t.SortOrder.toString()}})},t.prototype.updateInputType=function(t,e,n){return this.http.post(this.apiUrl("admin/field/InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:t.toString(),field:e,inputType:n}})},t.\u0275fac=function(e){return new(e||t)(a.LFG(p.eN),a.LFG(s._),a.LFG(l._y))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.07.00/ng-edit/projects_ng-dialogs_src_app_code-editor_code-editor_module_ts.3e0213d97508368dbbc2.js.map