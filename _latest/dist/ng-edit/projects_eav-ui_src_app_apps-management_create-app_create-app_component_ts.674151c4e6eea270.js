"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts"],{3496:(x,m,a)=>{a.r(m),a.d(m,{CreateAppComponent:()=>b});var i=a(1904),c=a(600),v=a(4844),g=a(604);const I=/^[A-Za-z](?:[A-Za-z0-9\s\(\)-]+)*$/;var d=a(924),E=a(5056),u=a(4672),C=a(6176),f=a(7872),A=a(988),h=a(2536),p=a(244),G=a(5204),t=a(4896),R=a(4648),T=a(9084);function Y(o,l){1&o&&(t.I0R(0,"app-field-hint",15),t.OEk(1," Required "),t.C$Y()),2&o&&t.E7m("isError",!0)}function $(o,l){if(1&o&&(t.I0R(0,"app-field-hint",15),t.OEk(1),t.C$Y()),2&o){const e=t.GaO(3);t.E7m("isError",!0),t.yG2(1),t.oRS(" ",e.appNameError," ")}}function O(o,l){if(1&o&&t.yuY(0,Y,2,1,"app-field-hint",15)(1,$,2,2,"app-field-hint",15),2&o){const e=t.GaO(2);t.C0Y(0,null!=e.form.controls.name.errors&&e.form.controls.name.errors.required?0:-1),t.yG2(1),t.C0Y(1,null!=e.form.controls.name.errors&&e.form.controls.name.errors.pattern?1:-1)}}function k(o,l){if(1&o){const e=t.KQA();t.I0R(0,"div",1)(1,"div",2)(2,"div",3),t.OEk(3,"Create App"),t.C$Y()(),t.I0R(4,"div",4),t.wR5(5,"router-outlet"),t.I0R(6,"form",5)(7,"mat-form-field",6)(8,"mat-label"),t.OEk(9,"Name"),t.C$Y(),t.wR5(10,"input",7),t.C$Y(),t.I0R(11,"app-field-hint"),t.OEk(12," App name will also be used for the folder "),t.C$Y(),t.yuY(13,O,2,2),t.wR5(14,"br"),t.I0R(15,"mat-form-field",6)(16,"mat-label"),t.OEk(17,"Template"),t.C$Y(),t.I0R(18,"mat-select",8),t.qCj("valueChange",function(s){t.usT(e);const r=t.GaO();return t.CGJ(r.appTemplateId=s)}),t.I0R(19,"mat-option",9),t.OEk(20," Completely Naked / Raw App "),t.C$Y(),t.I0R(21,"mat-option",10),t.OEk(22," App Template Empty with some instructions "),t.C$Y(),t.I0R(23,"mat-option",11),t.OEk(24," App Template Basic with instructions and some data "),t.C$Y()()()()(),t.I0R(25,"mat-dialog-actions",12)(26,"button",13),t.qCj("click",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.closeDialog())}),t.OEk(27," Cancel "),t.C$Y(),t.I0R(28,"button",14),t.qCj("click",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.create())}),t.OEk(29," Create "),t.C$Y()()()}if(2&o){const e=t.GaO();t.yG2(6),t.E7m("formGroup",e.form),t.yG2(7),t.C0Y(13,e.form.controls.name.touched?13:-1),t.yG2(5),t.E7m("value",e.appTemplateId),t.yG2(8),t.E7m("disabled",l.loading),t.yG2(2),t.E7m("disabled",l.loading||!e.form.valid)}}let b=(()=>{class o{constructor(e,n,s){this.dialogRef=e,this.appsListService=n,this.snackBar=s,this.hostClass="dialog-component",this.appNameError="Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.",this.appTemplateId="1",this.form=this.buildForm(),this.loading$=new v.g(!1)}ngOnInit(){this.viewModel$=this.loading$.pipe((0,g.k)(e=>({loading:e})))}ngOnDestroy(){this.loading$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const e=this.form.controls.name.value?.trim().replace(/\s\s+/g," "),n=Number(this.appTemplateId);this.snackBar.open("Creating app..."),this.appsListService.create(e,null,n).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new i.k1({name:new i.yM(null,[i.AQ.required,i.AQ.pattern(I)])})}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(c.yI),t.GI1(d.m),t.GI1(R.yS))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-create-app"]],hostVars:1,hostBindings:function(n,s){2&n&&t.SoX("className",s.hostClass)},standalone:!0,features:[t.M5G([d.m]),t.UHJ],decls:2,vars:3,consts:[["class","eav-dialog"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-form-field"],["matInput","","type","text","formControlName","name"],["required","true",3,"value","valueChange"],["value","0"],["value","1"],["value","2"],["align","end"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"isError"]],template:function(n,s){if(1&n&&(t.yuY(0,k,30,5,"div",0),t.wVc(1,"async")),2&n){let r;t.C0Y(0,(r=t.kDX(1,1,s.viewModel$))?0:-1,r)}},dependencies:[G.cP,i.y,i.sz,i.ot,i.ue,i.u,i.sl,i.uW,i.Wo,p.wb,p.Up,p.w5,h.cN,h.yi,A.q,T.o,f.d5,f.kX,C.I5,C.Ax,c.Yp,u.oJ,u.Gw,E.a]})}return o})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.06.01/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts.674151c4e6eea270.js.map