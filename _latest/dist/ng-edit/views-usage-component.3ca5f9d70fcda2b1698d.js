(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{xqic:function(e,t,i){"use strict";i.r(t),i.d(t,"ViewsUsageComponent",function(){return N});var n=i("mrSG"),o=i("DR3G"),l=i("2Vo4"),a=i("1HxE"),s=i("vxPj"),r=i("fXoL"),d=i("dNgK"),c=i("ofXK"),u=i("FKr1"),p=i("Qu3c"),b=i("NFeN");function g(e,t){if(1&e){var i=r.Wb();r.Vb(0,"div",1),r.dc("click",function(){return r.Ac(i),r.hc().copy()}),r.Vb(1,"span",2),r.Mc(2),r.Ub(),r.Vb(3,"mat-icon",3),r.Mc(4,"file_copy"),r.Ub(),r.Ub()}if(2&e){var n=r.hc();r.nc("matTooltip",n.tooltip),r.Db(2),r.Nc(n.id)}}var h=function(){function e(e){this.snackBar=e}return e.prototype.agInit=function(e){if(this.tooltip=e.value,null!=this.tooltip){var t=this.tooltip.split("\n")[0];this.id=t.split(" ")[1]}},e.prototype.refresh=function(e){return!0},e.prototype.copy=function(){Object(s.a)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(r.Pb(d.b))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-views-usage-id"]],decls:1,vars:1,consts:[["matRipple","","class","id-box highlight",3,"matTooltip","click",4,"ngIf"],["matRipple","",1,"id-box","highlight",3,"matTooltip","click"],[1,"id"],[1,"icon"]],template:function(e,t){1&e&&r.Kc(0,g,5,2,"div",0),2&e&&r.nc("ngIf",t.id)},directives:[c.n,u.p,p.a,b.a],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),e}(),f=i("QibW"),v=i("3Pt+"),m=function(){function e(){this.isVisible="",this.isDeleted=""}return e.prototype.agInit=function(e){this.params=e},e.prototype.isFilterActive=function(){return""!==this.isVisible||""!==this.isDeleted},e.prototype.doesFilterPass=function(e){var t=!1,i=!1,n=this.params.valueGetter(e.node);return null!=n&&(t=""===this.isVisible||null!=n.IsVisible&&n.IsVisible.toString()===this.isVisible,i=""===this.isDeleted||null!=n.IsDeleted&&n.IsDeleted.toString()===this.isDeleted,t&&i)},e.prototype.getModel=function(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}},e.prototype.setModel=function(e){this.isVisible=e?e.isVisible:"",this.isDeleted=e?e.isDeleted:""},e.prototype.afterGuiAttached=function(e){},e.prototype.filterChanged=function(){this.params.filterChangedCallback()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Jb({type:e,selectors:[["app-views-usage-status-filter"]],decls:18,vars:2,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Mc(1,"Visible"),r.Ub(),r.Vb(2,"mat-radio-group",1),r.dc("ngModelChange",function(e){return t.isVisible=e})("ngModelChange",function(){return t.filterChanged()}),r.Vb(3,"mat-radio-button",2),r.Mc(4,"All"),r.Ub(),r.Vb(5,"mat-radio-button",3),r.Mc(6,"Visible"),r.Ub(),r.Vb(7,"mat-radio-button",4),r.Mc(8,"Hidden"),r.Ub(),r.Ub(),r.Vb(9,"div",0),r.Mc(10,"Deleted"),r.Ub(),r.Vb(11,"mat-radio-group",1),r.dc("ngModelChange",function(e){return t.isDeleted=e})("ngModelChange",function(){return t.filterChanged()}),r.Vb(12,"mat-radio-button",2),r.Mc(13,"All"),r.Ub(),r.Vb(14,"mat-radio-button",3),r.Mc(15,"Is deleted"),r.Ub(),r.Vb(16,"mat-radio-button",4),r.Mc(17,"Is not deleted"),r.Ub(),r.Ub()),2&e&&(r.Db(2),r.nc("ngModel",t.isVisible),r.Db(9),r.nc("ngModel",t.isDeleted))},directives:[f.b,v.m,v.p,f.a],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]}),e}();function w(e){var t=e.data;return"ID: "+t.Block.Id+"\nGUID: "+t.Block.Guid}function y(e){var t=e.data;if(null!=t.Module)return"ID: "+t.Module.Id+"\nUsageId: "+t.Module.UsageId+"\nTitle: "+t.Module.Title}function C(e){return null==e.value?"no-outline":"id-action no-padding no-outline"}function M(e){var t=e.data;if(null!=t.PageId)return"ID: "+t.PageId}function V(e){return null==e.value?"no-outline":"id-action no-padding no-outline"}function x(e){return null==e.value?"no-outline":"primary-action highlight"}function U(e){null!=e.value&&window.open(e.data.Url,"_blank")}function I(e){var t=e.value;if(null!=t)return'\n    <div style="height: 100%;display: flex;align-items: center;">\n      '+(t.IsVisible?'<span class="material-icons-outlined">visibility</span>':'<span class="material-icons-outlined">visibility_off</span>')+"\n      "+(t.IsDeleted?'<span style="margin-left: 8px;" class="material-icons-outlined">delete</span>':"")+"\n    </div>\n  "}var D=i("0IaG"),P=i("tyNb"),k=i("6HSB"),O=i("bTqV"),T=i("gwh1"),N=function(){function e(e,t,i){this.dialogRef=e,this.route=t,this.viewsService=i,this.viewUsage$=new l.a(null),this.viewTooltip$=new l.a(""),this.data$=new l.a(null),this.modules=o.a,this.gridOptions=Object(n.a)(Object(n.a)({},a.a),{frameworkComponents:{viewsUsageIdComponent:h,viewsUsageStatusFilterComponent:m},columnDefs:[{headerName:"Block",field:"Block",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:w},{headerName:"Module",field:"Module",width:76,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:y,cellClass:C},{headerName:"Page",field:"PageId",width:70,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:M,cellClass:V},{headerName:"Name",field:"Name",flex:2,minWidth:250,sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellClass:x,onCellClicked:U},{headerName:"Language",field:"Language",width:90,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Status",field:"Status",width:80,cellClass:"icon no-outline",filter:"viewsUsageStatusFilterComponent",cellRenderer:I}]})}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("guid");this.viewsService.getUsage(t).subscribe(function(t){var i=t[0];e.viewUsage$.next(i),e.viewTooltip$.next("ID: "+i.Id+"\nGUID: "+i.Guid);var o=function(e){var t,i,o,l,a=[];try{for(var s=Object(n.i)(e.Blocks),r=s.next();!r.done;r=s.next()){var d=r.value;0===d.Modules.length&&a.push({Block:{Id:d.Id,Guid:d.Guid}});try{for(var c=(o=void 0,Object(n.i)(d.Modules)),u=c.next();!u.done;u=c.next()){var p=u.value;a.push({Block:{Id:d.Id,Guid:d.Guid},Module:p,PageId:p.Page.Id,Name:p.Page.Name,Url:p.Page.Url,Language:p.Page.CultureCode,Status:{IsVisible:p.Page.Visible,IsDeleted:p.IsDeleted}})}}catch(b){o={error:b}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}}}catch(g){t={error:g}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return a}(i);e.data$.next(o)})},e.prototype.ngOnDestroy=function(){this.viewUsage$.complete(),this.viewTooltip$.complete(),this.data$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(r.Pb(D.f),r.Pb(P.a),r.Pb(k.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-views-usage"]],decls:22,vars:11,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"matTooltip"],["mat-icon-button","","matTooltip","Close dialog",3,"click"],[1,"dialog-description"],["href","https://r.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"]],template:function(e,t){var i;1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.ic(4,"async"),r.Mc(5),r.ic(6,"async"),r.Ub(),r.Vb(7,"button",4),r.dc("click",function(){return t.closeDialog()}),r.Vb(8,"mat-icon"),r.Mc(9,"close"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(10,"p",5),r.Mc(11," This shows where this view is being used. Read about the "),r.Vb(12,"a",6),r.Mc(13,"connections between DNN and 2sxc Views"),r.Ub(),r.Mc(14," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),r.Vb(15,"em"),r.Mc(16,"Before you get confused about some things you see here, do read the FAQ on that page."),r.Ub(),r.Ub(),r.Qb(17,"router-outlet"),r.Vb(18,"div",7),r.Qb(19,"ag-grid-angular",8),r.ic(20,"async"),r.Qb(21,"div",9),r.Ub(),r.Ub()),2&e&&(r.Db(3),r.nc("matTooltip",r.jc(4,5,t.viewTooltip$)),r.Db(2),r.Oc("View: ",null==(i=r.jc(6,7,t.viewUsage$))?null:i.Name,""),r.Db(14),r.nc("rowData",r.jc(20,9,t.data$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[D.g,p.a,O.a,b.a,P.e,T.a],pipes:[c.b],styles:[""]}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.03.00/ng-edit/views-usage-component.3ca5f9d70fcda2b1698d.js.map