"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts-projects_eav-ui_sr-cecc30"],{7001:(O,g,e)=>{e.r(g),e.d(g,{CreateAppComponent:()=>j});var s=e(4456),d=e(7941),n=e(5797),E=e(271);const _=/^[A-Za-z](?:[A-Za-z0-9\s\(\)-]+)*$/;var M=e(3583),h=e(316),v=e(4175),f=e(5060),T=e(5175),o=e(7984),l=e(5944),c=e(2159),u=e(3758),C=e(5437),t=e(7580),F=e(3347);function P(r,D){1&r&&(t.j41(0,"app-field-hint",14),t.EFF(1," Required "),t.k0s()),2&r&&t.Y8G("isError",!0)}function I(r,D){if(1&r&&(t.j41(0,"app-field-hint",14),t.EFF(1),t.k0s()),2&r){const a=t.XpG(3);t.Y8G("isError",!0),t.R7$(),t.SpI(" ",a.appNameError," ")}}function A(r,D){if(1&r&&t.DNE(0,P,2,1,"app-field-hint",14)(1,I,2,2,"app-field-hint",14),2&r){const a=t.XpG(2);t.vxM(0,null!=a.form.controls.name.errors&&a.form.controls.name.errors.required?0:-1),t.R7$(),t.vxM(1,null!=a.form.controls.name.errors&&a.form.controls.name.errors.pattern?1:-1)}}function R(r,D){if(1&r){const a=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Create App"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"router-outlet"),t.j41(6,"form",4)(7,"mat-form-field",5)(8,"mat-label"),t.EFF(9,"Name"),t.k0s(),t.nrm(10,"input",6),t.k0s(),t.j41(11,"app-field-hint"),t.EFF(12," App name will also be used for the folder "),t.k0s(),t.DNE(13,A,2,2),t.nrm(14,"br"),t.j41(15,"mat-form-field",5)(16,"mat-label"),t.EFF(17,"Template"),t.k0s(),t.j41(18,"mat-select",7),t.mxI("valueChange",function(m){t.eBV(a);const x=t.XpG();return t.DH7(x.appTemplateId,m)||(x.appTemplateId=m),t.Njj(m)}),t.j41(19,"mat-option",8),t.EFF(20," Completely Naked / Raw App "),t.k0s(),t.j41(21,"mat-option",9),t.EFF(22," App Template Empty with some instructions "),t.k0s(),t.j41(23,"mat-option",10),t.EFF(24," App Template Basic with instructions and some data "),t.k0s()()()()(),t.j41(25,"mat-dialog-actions",11)(26,"button",12),t.bIt("click",function(){t.eBV(a);const m=t.XpG();return t.Njj(m.closeDialog())}),t.EFF(27," Cancel "),t.k0s(),t.j41(28,"button",13),t.bIt("click",function(){t.eBV(a);const m=t.XpG();return t.Njj(m.create())}),t.EFF(29," Create "),t.k0s()()()}if(2&r){const a=D,i=t.XpG();t.R7$(6),t.Y8G("formGroup",i.form),t.R7$(7),t.vxM(13,i.form.controls.name.touched?13:-1),t.R7$(5),t.R50("value",i.appTemplateId),t.R7$(8),t.Y8G("disabled",a.loading),t.R7$(2),t.Y8G("disabled",a.loading||!i.form.valid)}}let j=(()=>{class r{constructor(a,i){this.dialogRef=a,this.snackBar=i,this.hostClass="dialog-component",this.appNameError="Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.",this.appTemplateId="1",this.appsListService=(0,C.d)(M.U),this.form=this.buildForm(),this.loading$=new n.t(!1)}ngOnInit(){this.viewModel$=this.loading$.pipe((0,E.T)(a=>({loading:a})))}ngOnDestroy(){this.loading$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const a=this.form.controls.name.value?.trim().replace(/\s\s+/g," "),i=Number(this.appTemplateId);this.snackBar.open("Creating app..."),this.appsListService.create(a,null,i).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new s.J3({name:new s.hs(null,[s.k0.required,s.k0.pattern(_)])})}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(d.CP),t.rXU(F.UG))};static#n=this.\u0275cmp=t.VBU({type:r,selectors:[["app-create-app"]],hostVars:1,hostBindings:function(i,m){2&i&&t.Mr5("className",m.hostClass)},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["matInput","","type","text","formControlName","name"],["required","true",3,"valueChange","value"],["value","0"],["value","1"],["value","2"],["align","end"],["type","button","mat-raised-button","",3,"click","disabled"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"],[3,"isError"]],template:function(i,m){if(1&i&&(t.DNE(0,R,30,5,"div",0),t.nI1(1,"async")),2&i){let x;t.vxM(0,(x=t.bMT(1,1,m.viewModel$))?0:-1,x)}},dependencies:[c.n3,s.YN,s.qT,s.me,s.BC,s.cb,s.X1,s.j4,s.JD,l.RG,l.rl,l.nJ,o.fS,o.fg,T.Ve,T.VO,f.wT,f.Sy,d.E7,v.Hl,v.$z,h.Jj,u.F]})}return r})()},1772:(O,g,e)=>{e.d(g,{I:()=>v,u:()=>h});var s=e(6647),d=e(9452),n=e(3550),E=e(8873),_=e(7580),p=e(6443),M=e(4821);const h="admin/app/";let v=(()=>{class f{constructor(o,l,c){this.http=o,this.context=l,this.dnnContext=c}importApp(o,l,c=!1){const u=new FormData;return u.append("File",o),u.append("Name",l??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(h+"Import"),u,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,s.n)(C=>{if(c&&C.Messages[0]?.MessageType===n.G1.Warning){const t=prompt(C.Messages[0].Text+" Would you like to install it using another folder name?");if(t)return this.importApp(o,t,!0)}return(0,d.of)(C)}))}static#t=this.\u0275fac=function(l){return new(l||f)(_.KVO(p.Qq),_.KVO(E.o),_.KVO(M.ob))};static#n=this.\u0275prov=_.jDH({token:f,factory:f.\u0275fac})}return f})()},3758:(O,g,e)=>{e.d(g,{F:()=>T});var s=e(316),d=e(5944),n=e(7580);const E=["*"],_=o=>({"hint-box__short":o});function p(o,l){1&o&&n.eu8(0)}function M(o,l){if(1&o&&(n.j41(0,"mat-hint"),n.DNE(1,p,1,0,"ng-container",2),n.k0s()),2&o){n.XpG();const c=n.sdS(4);n.R7$(),n.Y8G("ngTemplateOutlet",c)}}function h(o,l){1&o&&n.eu8(0)}function v(o,l){if(1&o&&(n.j41(0,"mat-error"),n.DNE(1,h,1,0,"ng-container",2),n.k0s()),2&o){n.XpG();const c=n.sdS(4);n.R7$(),n.Y8G("ngTemplateOutlet",c)}}function f(o,l){1&o&&n.SdG(0)}let T=(()=>{class o{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(u){return new(u||o)};static#n=this.\u0275cmp=n.VBU({type:o,selectors:[["app-field-hint"]],inputs:{isError:"isError"},standalone:!0,features:[n.aNF],ngContentSelectors:E,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(u,C){if(1&u){const t=n.RV6();n.NAR(),n.j41(0,"div",1),n.bIt("click",function(){return n.eBV(t),n.Njj(C.toggleIsShort())}),n.DNE(1,M,2,1)(2,v,2,1),n.k0s(),n.DNE(3,f,1,0,"ng-template",null,0,n.C5r)}if(2&u){let t;n.Y8G("ngClass",n.eq3(2,_,C.isShort)),n.R7$(),n.vxM(1,!1===(t=C.isError)?1:!0===t?2:-1)}},dependencies:[d.RG,d.MV,d.TL,s.YU,s.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return o})()},6474:(O,g,e)=>{e.d(g,{D:()=>_});var s=e(7580),d=e(4821),n=e(8873),E=e(6443);let _=(()=>{class p{constructor(){this.dnnContext=(0,s.WQX)(d.ob),this.http=(0,s.WQX)(E.Qq),this.context=(0,s.WQX)(n.o)}apiUrl(h){return this.dnnContext.$2sxc.http.apiUrl(h)}get appId(){return this.context.appId.toString()}get zoneId(){return this.context.zoneId.toString()}static#t=this.\u0275fac=function(v){return new(v||p)};static#n=this.\u0275prov=s.jDH({token:p,factory:p.\u0275fac})}return p})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts-projects_eav-ui_sr-cecc30.d98ef2b0302a05a1.js.map