"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_edit_dialog_footer_edit-dialog-footer_component_ts"],{7319:(N,b,a)=>{a.d(b,{T:()=>u});var t=a(8873),D=a(9234),g=a(8559),x=a(6443),m=a(4821);let u=(()=>{class c{constructor(p,d,f){this.http=p,this.context=d,this.dnnContext=f}create(p,d){return this.http.post(`app/auto/data/${p}`,d,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}update(p,d,f){return this.http.post(`app/auto/data/${p}/${d}`,f,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}delete(p,d,f){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(D.gb+"delete"),{params:{contentType:p,id:d.toString(),appId:this.context.appId.toString(),force:f.toString()}})}static#t=this.\u0275fac=function(d){return new(d||c)(g.KVO(x.Qq),g.KVO(t.o),g.KVO(m.ob))};static#e=this.\u0275prov=g.jDH({token:c,factory:c.\u0275fac})}return c})()},5955:(N,b,a)=>{a.r(b),a.d(b,{EditDialogFooterComponent:()=>yt});var t=a(8559);const D={Data:"data",Formulas:"formulas",Logs:"logs"};var g=a(9999),x=a(271),m=a(2913),u=a(316),c=a(7149);const B=(n,r)=>({"log-error":n,"log-warn":r});function p(n,r){1&n&&(t.j41(0,"div"),t.EFF(1,"Logs are empty"),t.k0s())}function d(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",1)(1,"span",2),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"span",3),t.EFF(5),t.k0s(),t.j41(6,"span",4),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.logToConsole(i))}),t.EFF(7," console "),t.k0s()()}if(2&n){const e=r.$implicit,o=t.XpG(2);t.Y8G("ngClass",t.l_i(6,B,e.severity===o.LogSeverities.Error,e.severity===o.LogSeverities.Warn)),t.R7$(2),t.SpI("",t.i5U(3,3,e.time,"HH:mm:ss"),":"),t.R7$(3),t.JRh(e.label)}}function f(n,r){if(1&n&&(t.j41(0,"div",0),t.DNE(1,p,2,0,"div"),t.Z7z(2,d,8,9,"div",1,t.fX1),t.k0s()),2&n){const e=r;t.R7$(),t.vxM(1,0===e.logs.length?1:-1),t.R7$(),t.Dyx(e.logs)}}let X=(()=>{class n{constructor(e){this.loggingService=e,this.LogSeverities=c.E}ngOnInit(){const e=this.loggingService.getLogs$();this.viewModel$=(0,g.z)([e]).pipe((0,x.T)(([o])=>({logs:o})))}logToConsole(e){switch(e.severity){case c.E.Log:console.log(e.label,e.error);break;case c.E.Warn:console.warn(e.label,e.error);break;case c.E.Error:console.error(e.label,e.error)}}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(c.J))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-logs-dump"]],standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"logs-box","fancy-scrollbar-light"],[1,"log-entry",3,"ngClass"],[1,"log-entry-part","log-entry-time"],[1,"log-entry-part","log-entry-label"],["tippy","Log to console",1,"log-entry-part","log-entry-show",3,"click"]],template:function(o,i){if(1&o&&(t.DNE(0,f,4,1,"div",0),t.nI1(1,"async")),2&o){let s;t.vxM(0,(s=t.bMT(1,1,i.viewModel$))?0:-1,s)}},dependencies:[u.YU,m.Cc,m.PW,u.Jj,u.vh],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex}.logs-box[_ngcontent-%COMP%]{flex:1 1 auto;overflow:auto;font-size:14px}.log-entry[_ngcontent-%COMP%]{display:flex;align-items:center;box-sizing:border-box;border-bottom:1px solid rgb(240,240,240);padding-top:2px;padding-bottom:2px}.log-entry[_ngcontent-%COMP%]   .log-entry-part[_ngcontent-%COMP%]:not(:first-of-type){margin-left:8px}.log-error[_ngcontent-%COMP%]{color:red;border-color:#ffd6d6;background-color:#fff0f0}.log-warn[_ngcontent-%COMP%]{color:#5c3c00;border-color:#fff5c2;background-color:#fffbe5}.log-entry-time[_ngcontent-%COMP%]{flex:0 0 auto}.log-entry-label[_ngcontent-%COMP%]{flex:1 1 auto}.log-entry-show[_ngcontent-%COMP%]{flex:0 0 auto;color:#06599a;font-size:12px;text-decoration:underline;cursor:pointer}"]})}return n})();var z=a(7319),T=a(52),V=a(519),L=a(886),v=a(59),k=a(6231),P=a(5504);const F={Entity:"entityGuid",Field:"fieldValue",Target:"formulaTarget"};let w=(()=>{class n{constructor(){this.maxLength=24}transform(e){return e.length<=this.maxLength?e:`\u2026${e.substring(e.length-this.maxLength)}`}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.EJ8({name:"snippetLabelSize",type:n,pure:!0,standalone:!0})}return n})();var M=a(1034),Y=a(8801),O=a(3840),h=a(4175),S=a(7984),I=a(5060),y=a(4456),G=a(5175),E=a(5944),U=a(4601),A=a(5437),W=a(3472),$=a(1736),J=a(9765),K=a(3347),H=a(852);const Z=(n,r)=>({disabled:n,focused:r}),Q=n=>({disabled:n}),j=n=>({"has-formula":n});function q(n,r){if(1&n&&(t.j41(0,"mat-option",4)(1,"span",27),t.EFF(2),t.k0s()()),2&n){const e=r.$implicit;t.Y8G("value",e.entityGuid),t.R7$(),t.Y8G("ngClass",t.eq3(3,j,e.hasFormula)),t.R7$(),t.SpI(" ",e.label," ")}}function tt(n,r){if(1&n&&(t.j41(0,"mat-option",4)(1,"span",27),t.EFF(2),t.k0s()()),2&n){const e=r.$implicit;t.Y8G("value",e.fieldName),t.R7$(),t.Y8G("ngClass",t.eq3(3,j,e.hasFormula)),t.R7$(),t.SpI(" ",e.fieldName," ")}}function et(n,r){if(1&n&&(t.j41(0,"mat-option",4)(1,"span",27),t.EFF(2),t.k0s()()),2&n){const e=r.$implicit;t.Y8G("value",e.target),t.R7$(),t.Y8G("ngClass",t.eq3(3,j,e.hasFormula)),t.R7$(),t.SpI(" ",e.label," ")}}function nt(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-select",5),t.bIt("ngModelChange",function(i){t.eBV(e);const s=t.XpG(2);return t.Njj(s.selectedChanged(s.SelectTargets.Target,i))}),t.Z7z(1,et,3,5,"mat-option",4,t.fX1),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("ngModel",e.state().target)("disabled",null==e.state().entityGuid||null==e.state().fieldName),t.R7$(),t.Dyx(e.targetOptions())}}function ot(n,r){if(1&n){const e=t.RV6();t.j41(0,"input",28),t.bIt("ngModelChange",function(i){t.eBV(e);const s=t.XpG(2);return t.Njj(s.selectedChanged(s.SelectTargets.Target,i))}),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("ngModel",e.state().target)("disabled",null==e.state().entityGuid||null==e.state().fieldName)}}function it(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",29),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.copyToClipboard(i.code))}),t.EFF(1),t.nI1(2,"snippetLabelSize"),t.k0s()}if(2&n){const e=r.$implicit;t.Y8G("title",e.code),t.R7$(),t.SpI(" ",t.bMT(2,2,e.label)," ")}}function at(n,r){1&n&&t.nrm(0,"div",17)}function st(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",29),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.copyToClipboard(i.code))}),t.EFF(1),t.nI1(2,"snippetLabelSize"),t.k0s()}if(2&n){const e=r.$implicit;t.Y8G("title",e.code),t.R7$(),t.SpI(" ",t.bMT(2,2,e.label)," ")}}function rt(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"json"),t.k0s()),2&n){const e=t.XpG(4);t.R7$(),t.JRh(t.bMT(2,1,e.result().value))}}function lt(n,r){1&n&&(t.j41(0,"span",30),t.EFF(1,"undefined"),t.k0s())}function ct(n,r){1&n&&(t.j41(0,"span"),t.EFF(1,"promise(\u{1f91e}\u{1f3fd})"),t.k0s())}function dt(n,r){if(1&n&&t.DNE(0,rt,3,3,"span")(1,lt,2,0)(2,ct,2,0),2&n){const e=t.XpG(3);t.vxM(0,void 0!==e.result().value?0:e.result().isOnlyPromise?2:1)}}function ut(n,r){1&n&&(t.j41(0,"span",31),t.EFF(1," Calculation failed. Please check logs for more info "),t.k0s())}function pt(n,r){if(1&n&&t.DNE(0,dt,3,1)(1,ut,2,0),2&n){const e=t.XpG(2);t.vxM(0,e.result().isError?1:0)}}function mt(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",32),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.save())}),t.j41(1,"mat-icon"),t.EFF(2,"save"),t.k0s()()}if(2&n){let e,o;const i=t.XpG(2);t.Y8G("tippyDisabled",!i.state().editMode||!(null!=(e=i.currentFormula())&&e.source))("disabled",!i.state().editMode||!(null!=(o=i.currentFormula())&&o.source)||i.saving())}}function gt(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),t.EFF(3,"Entity"),t.k0s(),t.j41(4,"mat-select",3),t.bIt("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.selectedChanged(s.SelectTargets.Entity,i))}),t.Z7z(5,q,3,5,"mat-option",4,t.BUC().trackEntityOptions,!0),t.k0s()(),t.j41(7,"mat-form-field",2)(8,"mat-label"),t.EFF(9,"Attribute"),t.k0s(),t.j41(10,"mat-select",5),t.bIt("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.selectedChanged(s.SelectTargets.Field,i))}),t.Z7z(11,tt,3,5,"mat-option",4,t.BUC().trackFieldOptions,!0),t.k0s()(),t.j41(13,"mat-form-field",2)(14,"mat-label"),t.EFF(15,"Target"),t.k0s(),t.DNE(16,nt,3,2,"mat-select",6)(17,ot,1,2,"input",7),t.k0s(),t.j41(18,"button",8),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleFreeText())}),t.j41(19,"mat-icon"),t.EFF(20,"text_fields"),t.k0s()(),t.nrm(21,"div",9),t.j41(22,"a",10)(23,"mat-icon"),t.EFF(24,"help"),t.k0s()()(),t.j41(25,"div",11)(26,"div",12)(27,"mat-label",13),t.EFF(28,"Function"),t.k0s(),t.j41(29,"app-monaco-editor",14),t.bIt("valueChanged",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.formulaChanged(i))})("focused",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onFocused())})("blurred",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onBlurred())}),t.k0s()(),t.j41(30,"div",15),t.Z7z(31,it,3,4,"div",16,t.BUC().trackSnippets,!0),t.DNE(33,at,1,0,"div",17),t.Z7z(34,st,3,4,"div",16,t.BUC().trackSnippets,!0),t.k0s()(),t.j41(36,"div",18)(37,"div",19)(38,"span",13),t.EFF(39,"Result:\xa0"),t.k0s(),t.DNE(40,pt,2,1),t.k0s(),t.j41(41,"div",20)(42,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleEdit())}),t.j41(43,"mat-icon"),t.EFF(44,"edit"),t.k0s()(),t.j41(45,"button",22)(46,"mat-icon"),t.EFF(47,"more_vert"),t.k0s()(),t.j41(48,"mat-menu",null,0)(50,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.deleteFormula())}),t.j41(51,"mat-icon"),t.EFF(52,"delete"),t.k0s(),t.j41(53,"span"),t.EFF(54,"Delete"),t.k0s()(),t.j41(55,"button",24),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.reset())}),t.j41(56,"mat-icon"),t.EFF(57,"history"),t.k0s(),t.j41(58,"span"),t.EFF(59,"Reset"),t.k0s()()(),t.DNE(60,mt,3,2,"button",25),t.j41(61,"button",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.run())}),t.j41(62,"mat-icon"),t.EFF(63,"play_arrow"),t.k0s()()()()}if(2&n){let e,o,i,s;const C=t.sdS(49),l=t.XpG();t.R7$(4),t.Y8G("ngModel",l.state().entityGuid),t.R7$(),t.Dyx(l.entityOptions()),t.R7$(5),t.Y8G("ngModel",l.state().fieldName)("disabled",null==l.state().entityGuid),t.R7$(),t.Dyx(l.fieldsOptions()),t.R7$(5),t.vxM(16,l.freeTextTarget?-1:16),t.R7$(),t.vxM(17,l.freeTextTarget?17:-1),t.R7$(),t.Y8G("disabled",null==l.state().entityGuid||null==l.state().fieldName),t.R7$(8),t.Y8G("ngClass",t.l_i(18,Z,!l.state().editMode||null==l.state().entityGuid||null==l.state().fieldName||null==l.state().target,l.focused)),t.R7$(3),t.Y8G("filename",l.filename)("value",null!==(e=null==(e=l.currentFormula())?null:e.source)&&void 0!==e?e:l.template())("jsTypings",l.v2JsTypings())("options",l.monacoOptions),t.R7$(),t.Y8G("ngClass",t.eq3(21,Q,!l.state().editMode)),t.R7$(),t.Dyx(l.v1DataSnippets()),t.R7$(2),t.vxM(33,null!=(o=l.v1DataSnippets())&&o.length&&l.v1ContextSnippets().length?33:-1),t.R7$(),t.Dyx(l.v1ContextSnippets()),t.R7$(6),t.vxM(40,null==l.result()||l.isDeleted()?-1:40),t.R7$(5),t.Y8G("matMenuTriggerFor",C),t.R7$(5),t.Y8G("disabled",!(null!=(i=l.currentFormula())&&i.sourceId)),t.R7$(10),t.vxM(60,l.allowSaveFormula?60:-1),t.R7$(),t.Y8G("disabled",!l.state().editMode||!(null!=(s=l.currentFormula())&&s.source))}}let ht=(()=>{class n{#t;constructor(e,o,i,s,C){this.snackBar=e,this.formConfig=o,this.itemService=i,this.contentTypeService=s,this.translate=C,this.SelectTargets=F,this.loadError=!1,this.freeTextTarget=!1,this.allowSaveFormula=this.formConfig.config.enableFormulaSave,this.isDeleted=(0,t.vPA)(!1),this.saving=(0,t.vPA)(!1),this.monacoOptions={minimap:{enabled:!1},lineHeight:19,lineNumbers:"off",lineDecorationsWidth:0,folding:!1,scrollBeyondLastLine:!1,tabSize:2,fixedOverflowWidgets:!0},this.filename=`formula${this.formConfig.config.formId}.js`,this.focused=!1,this.entitiesService=(0,A.d)(z.T),this.#t=(0,t.WQX)(L.f),this.state=this.#t.designerState,this.result=this.#t.formulaResult,this.targetOptions=this.#t.currentTargetOptions,this.entityOptions=this.#t.entityOptions,this.fieldsOptions=this.#t.fieldsOptions,this.currentFormula=this.#t.currentFormula,this.v2JsTypings=this.#t.v2JsTypings,this.v1ContextSnippets=this.#t.v1ContextSnippets,this.v1DataSnippets=this.#t.v1DataSnippets,this.template=(0,t.EWP)(()=>Object.values(k.UZ).includes(this.state().target)?v.Ix:v.Gm),this.log=new W.B("FormulaDesignerComponent",!0)}ngOnInit(){this.loadError=!1,Object.keys(this.#t.itemSettingsServices).length<1?this.loadError=!0:(this.#t.setDesignerOpen(!0),this.#t.initAfterItemSettingsAreReady())}ngOnDestroy(){this.#t.setDesignerOpen(!1)}trackEntityOptions(e,o){return o.entityGuid}trackFieldOptions(e,o){return o.fieldName}trackSnippets(e,o){return o.code}selectedChanged(e,o){const i={...this.#t.designerState(),editMode:!1};switch(e){case F.Entity:i.entityGuid=o;const s=this.#t.itemSettingsServices[i.entityGuid];i.fieldName=Object.keys(s.getFieldsProps())[0];break;case F.Field:i.fieldName=o;break;case F.Target:i.target=o}this.#t.designerState.set(i)}toggleFreeText(){this.freeTextTarget=!this.freeTextTarget}formulaChanged(e){const o=this.#t.designerState();this.#t.cache.updateFormulaFromEditor(o,e,!1)}onFocused(){this.focused=!0}onBlurred(){this.focused=!1}copyToClipboard(e){(0,V.l)(e),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}toggleEdit(){const e=this.#t.designerState(),o={...e,editMode:!e.editMode};this.#t.designerState.set(o),o.editMode&&null==this.#t.currentFormula()&&this.#t.cache.updateFormulaFromEditor(o,Object.values(k.UZ).includes(o.target)?v.Ix:v.Gm,!1)}reset(){const e={...this.#t.designerState(),editMode:!1};this.#t.designerState.set(e),this.#t.cache.resetFormula(e),this.#t.itemSettingsServices[e.entityGuid].retriggerFormulas()}run(){const e=this.#t.designerState(),o=this.#t.currentFormula();this.#t.cache.updateFormulaFromEditor(e,o.source,!0),this.#t.itemSettingsServices[e.entityGuid].retriggerFormulas(),this.isDeleted.set(!1)}save(){this.saving.set(!0);const e=this.#t.currentFormula();if(null==e.sourceId){const o=this.itemService.getItem(e.entityGuid),i=J.i.getContentTypeNameId(o),l=this.contentTypeService.getContentType(i).Attributes.find(_=>_.Name===e.fieldName).Metadata.find(_=>"@All"===_.Type.Id);return l?void this.entitiesService.create(T.YX.contentTypes.formulas,{Title:e.target,Target:e.target,Formula:e.source,Enabled:!0,ParentRelationship:{Add:null,EntityId:null,Field:"Formulas",Index:0,Parent:l.Guid}}).subscribe(_=>{this.#t.cache.updateSaved(e,_.Guid,_.Id),this.snackBar.open("Formula saved",null,{duration:2e3}),this.saving.set(!1)}):(this.snackBar.open("Field configuration is missing. Please create formula in Administration",void 0,{duration:3e3}),void this.saving.set(!1))}this.entitiesService.update(T.YX.contentTypes.formulas,e.sourceId,{Formula:e.source}).subscribe(()=>{this.#t.cache.updateSaved(e,e.sourceGuid,e.sourceId),this.snackBar.open("Formula saved",null,{duration:2e3}),this.saving.set(!1)})}deleteFormula(){const e=this.#t.designerState(),o=this.#t.currentFormula();confirm(this.translate.instant("Data.Delete.Question",{title:o.fieldName+" - "+o.target,id:o.sourceId}))&&this.entitiesService.delete(T.YX.contentTypes.formulas,o.sourceId,!0).subscribe({next:()=>{this.#t.cache.delete(o),this.snackBar.open(this.translate.instant("Message.Deleted"),null,{duration:2e3}),this.isDeleted.set(!0),e.editMode&&this.toggleEdit()},error:l=>{this.snackBar.open(this.translate.instant("Message.DeleteError"),null,{duration:2e3})}})}static#e=this.\u0275fac=function(o){return new(o||n)(t.rXU(K.UG),t.rXU($.S),t.rXU(P.bX),t.rXU(P.n9),t.rXU(H.c$))};static#n=this.\u0275cmp=t.VBU({type:n,selectors:[["app-formula-designer"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[["menu","matMenu"],[1,"formula-context-box"],["color","accent",1,"eav-mat-form-field"],[3,"ngModelChange","ngModel"],[3,"value"],[3,"ngModelChange","ngModel","disabled"],[3,"ngModel","disabled"],["matInput","",3,"ngModel","disabled"],["mat-icon-button","","tippy","FreeText Target",1,"eav-formula-button",3,"click","disabled"],[1,"spacer"],["mat-icon-button","","tippy","Help","href","https://go.2sxc.org/formulas","target","_blank",1,"eav-formula-button"],[1,"formula-box"],[1,"formula-field",3,"ngClass"],[1,"label"],[1,"editor",3,"valueChanged","focused","blurred","filename","value","jsTypings","options"],[1,"formula-snippets","fancy-scrollbar-light",3,"ngClass"],[1,"snippet",3,"title"],[1,"separator"],[1,"formula-footer-box"],[1,"formula-result-box","hide-scrollbar"],[1,"formula-actions-box"],["mat-icon-button","","tippy","Edit",1,"eav-formula-action-button",3,"click"],["mat-icon-button","","tippy","Menu",1,"eav-formula-action-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click","disabled"],["mat-menu-item","",3,"click"],["mat-icon-button","","tippy","Save",1,"eav-formula-action-button",3,"tippyDisabled","disabled"],["mat-icon-button","","tippy","Run",1,"eav-formula-action-button",3,"click","disabled"],[3,"ngClass"],["matInput","",3,"ngModelChange","ngModel","disabled"],[1,"snippet",3,"click","title"],[1,"result-undefined"],[1,"result-error"],["mat-icon-button","","tippy","Save",1,"eav-formula-action-button",3,"click","tippyDisabled","disabled"]],template:function(o,i){1&o&&t.DNE(0,gt,64,23),2&o&&t.vxM(0,i.loadError?-1:0)},dependencies:[E.RG,E.rl,E.nJ,G.Ve,G.VO,I.wT,y.YN,y.me,y.BC,y.vS,I.Sy,u.YU,m.Cc,m.PW,S.fS,S.fg,h.Hl,h.pQ,h.iY,O.m_,O.An,Y.K,M.Cn,M.kk,M.fb,M.Cp,u.TG,w,U.e],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;box-sizing:border-box;overflow:hidden;border-top:1px solid lightgray;padding-top:8px}.formula-context-box[_ngcontent-%COMP%]{display:flex;align-items:center}.formula-context-box[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px}.formula-context-box[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]:not(:first-of-type){margin-left:8px}.has-formula[_ngcontent-%COMP%]{font-weight:700}.formula-box[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;overflow:hidden}.formula-box[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{flex:0 1 auto;font-size:14px;width:100%}.formula-box[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:monospace}.formula-box[_ngcontent-%COMP%]   .formula-field[_ngcontent-%COMP%]{flex:0 1 auto;width:100%;overflow:hidden;margin-bottom:6px}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]{flex:0 0 auto;max-width:200px;max-height:194px;overflow:hidden auto;padding-left:2px}.formula-box[_ngcontent-%COMP%]   .formula-snippets.disabled[_ngcontent-%COMP%]   .snippet[_ngcontent-%COMP%]{pointer-events:none;color:#1d273d70}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]   .snippet[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;white-space:nowrap;padding-top:1px;padding-bottom:1px}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]   .snippet[_ngcontent-%COMP%]:first-of-type{padding-top:0}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]   .snippet[_ngcontent-%COMP%]:last-of-type{padding-bottom:0}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;border-bottom:1px solid rgba(29,39,61,.44)}.formula-footer-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;overflow:hidden;height:min-content}.formula-footer-box[_ngcontent-%COMP%]   .formula-result-box[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;height:-moz-fit-content;height:fit-content}.formula-footer-box[_ngcontent-%COMP%]   .formula-result-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500}.formula-footer-box[_ngcontent-%COMP%]   .formula-result-box[_ngcontent-%COMP%]   .result-undefined[_ngcontent-%COMP%], .formula-footer-box[_ngcontent-%COMP%]   .formula-result-box[_ngcontent-%COMP%]   .result-error[_ngcontent-%COMP%]{color:red}.formula-footer-box[_ngcontent-%COMP%]   .formula-actions-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;height:-moz-fit-content;height:fit-content}.formula-footer-box[_ngcontent-%COMP%]   .formula-actions-box[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{margin-left:0;width:30px;height:30px;line-height:30px;padding:0;flex-shrink:0}.formula-footer-box[_ngcontent-%COMP%]   .formula-actions-box[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-top:5px;font-size:20px;width:20px;height:20px;line-height:20px!important}.formula-field[_ngcontent-%COMP%]{padding-top:28px;border-bottom:1px solid rgba(0,0,0,.2);padding-bottom:12px;position:relative}.formula-field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:#0009;cursor:default;font-size:12px;transition:none;position:absolute;left:0;top:0;-webkit-user-select:none;user-select:none}.formula-field[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]     .monaco-editor .scroll-decoration{display:none}.formula-field[_ngcontent-%COMP%]:hover{border-bottom:2px solid rgba(0,0,0,.4);padding-bottom:11px}.formula-field.focused[_ngcontent-%COMP%]{border-bottom:2px solid #002753;padding-bottom:11px}.formula-field.focused[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#002753}.formula-field.error[_ngcontent-%COMP%]{border-bottom:2px solid #b00030;padding-bottom:11px}.formula-field.error[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#b00030}.formula-field.disabled[_ngcontent-%COMP%]{border-bottom:none;padding-bottom:13px;background-image:linear-gradient(to right,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 33%,transparent 0%);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.formula-field.disabled[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]{pointer-events:none}.formula-field.disabled[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]     *{color:#00000061}"]})}return n})();function Ct(n,r){1&n&&(t.j41(0,"textarea",0),t.EFF(1),t.nI1(2,"json"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,r.items)))}let bt=(()=>{class n{constructor(e,o){this.itemService=e,this.formConfig=o}ngOnInit(){const e=this.itemService.getItems$(this.formConfig.config.itemGuids);this.viewModel$=(0,g.z)([e]).pipe((0,x.T)(([o])=>({items:o})))}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(P.bX),t.rXU($.S))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-data-dump"]],standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[["readonly","",1,"fancy-scrollbar-light"]],template:function(o,i){if(1&o&&(t.DNE(0,Ct,3,3,"textarea",0),t.nI1(1,"async")),2&o){let s;t.vxM(0,(s=t.bMT(1,1,i.viewModel$))?0:-1,s)}},dependencies:[u.Jj,u.TG],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex}textarea[_ngcontent-%COMP%]{flex:1 1 auto;margin:0;padding:10px 0 10px 10px;border:0px;box-sizing:border-box;resize:none;outline:none;background-color:#1d273d0a}"]})}return n})();var R=a(3777);const xt=n=>({"debug-enabled":n});function vt(n,r){1&n&&t.nrm(0,"app-data-dump")}function Ft(n,r){1&n&&t.nrm(0,"app-formula-designer")}function Mt(n,r){1&n&&t.nrm(0,"app-logs-dump")}function Ot(n,r){if(1&n&&(t.j41(0,"div",7),t.DNE(1,vt,1,0,"app-data-dump")(2,Ft,1,0,"app-formula-designer")(3,Mt,1,0,"app-logs-dump"),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.vxM(1,e.activeDebug===e.DebugTypes.Data?1:-1),t.R7$(),t.vxM(2,e.activeDebug===e.DebugTypes.Formulas?2:-1),t.R7$(),t.vxM(3,e.activeDebug===e.DebugTypes.Logs?3:-1)}}let yt=(()=>{class n{constructor(){this.debugInfoOpened=new t.bkB,this.DebugTypes=D,this.sxcVer=window.sxcVersion.substring(0,window.sxcVersion.lastIndexOf("."))}toggleDialog(e){this.activeDebug=e!==this.activeDebug?e:null,this.debugInfoOpened.emit(null!=this.activeDebug)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-edit-dialog-footer"]],outputs:{debugInfoOpened:"debugInfoOpened"},standalone:!0,features:[t.aNF],decls:21,vars:5,consts:[["appearance","raised",1,"mat-elevation-z4",3,"ngClass"],[1,"debug-buttons-container"],["mat-button","","tippy","Show Data JSON",3,"click"],["mat-button","","tippy","Show Formula Designer",3,"click"],["mat-button","","tippy","Show Logs",3,"click"],[1,"spacer"],[1,"sxc-version"],[1,"debug-info-container"]],template:function(o,i){1&o&&(t.j41(0,"mat-card",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return i.toggleDialog(i.DebugTypes.Data)}),t.j41(3,"mat-icon"),t.EFF(4,"offline_bolt"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Data"),t.k0s()(),t.j41(7,"button",3),t.bIt("click",function(){return i.toggleDialog(i.DebugTypes.Formulas)}),t.j41(8,"mat-icon"),t.EFF(9,"functions"),t.k0s(),t.j41(10,"span"),t.EFF(11,"Formulas"),t.k0s()(),t.j41(12,"button",4),t.bIt("click",function(){return i.toggleDialog(i.DebugTypes.Logs)}),t.j41(13,"mat-icon"),t.EFF(14,"speed"),t.k0s(),t.j41(15,"span"),t.EFF(16,"Logs"),t.k0s()(),t.nrm(17,"div",5),t.j41(18,"div",6),t.EFF(19),t.k0s()(),t.DNE(20,Ot,4,3,"div",7),t.k0s()),2&o&&(t.Y8G("ngClass",t.eq3(3,xt,null!=i.activeDebug)),t.R7$(19),t.SpI("2sxc ",i.sxcVer,""),t.R7$(),t.vxM(20,null!=i.activeDebug?20:-1))},dependencies:[R.Hu,R.RN,u.YU,m.Cc,m.PW,h.Hl,h.$z,O.m_,O.An,bt,ht,X],styles:[".mat-mdc-card[_ngcontent-%COMP%]{padding:0;margin:0;border-top-left-radius:0;border-top-right-radius:0;height:52px;z-index:1;width:100%;display:flex;flex-direction:column;box-sizing:border-box}@media (max-width: 600px){.mat-mdc-card[_ngcontent-%COMP%]{border-radius:0}}.mat-mdc-card.debug-enabled[_ngcontent-%COMP%]{height:auto}.debug-buttons-container[_ngcontent-%COMP%]{padding:17px 16px 15px;height:52px;width:100%;display:flex;box-sizing:border-box;align-items:center}.debug-buttons-container[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]{margin-left:0}.debug-buttons-container[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:4px}.debug-buttons-container[_ngcontent-%COMP%]   .sxc-version[_ngcontent-%COMP%]{cursor:default}.mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px!important}.debug-info-container[_ngcontent-%COMP%]{margin:0 16px 16px!important;width:calc(100% - 32px);height:300px;box-sizing:border-box;position:relative;overflow:auto}"]})}return n})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_edit_dialog_footer_edit-dialog-footer_component_ts.cded83321595c6d3.js.map