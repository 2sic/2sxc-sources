{"version":3,"file":"projects_eav-ui_src_app_metadata_metadata_component_ts-projects_eav-ui_src_app_shared_fields_-53fb0d.b3a2c3b35b8dbb6d.js","mappings":"yTASO,MAAMA,EAAiB,cAGxBC,EAAmB,oBAOlB,IAAMC,EAAoB,MAA3B,MAAOA,UAA4BC,IAEvCC,oBAAoBC,GAClB,OAAOC,KAAKC,KAAKC,IAAiBF,KAAKG,OAZrB,kBAY4C,CAC5DC,OAAQ,CAAEC,MAAOL,KAAKK,MAAOC,cAAeP,IAEhD,CAEAQ,qBAAqBC,GACnB,OAAOR,KAAKC,KAAKC,IAAmBF,KAAKG,OAjBzB,mBAiB8C,CAC5DC,OAAQ,CAAEC,MAAOL,KAAKK,MAAOG,UAEjC,CAGAC,YACE,OAAOT,KAAKC,KAAKC,IAAgEF,KAAKG,OAAOR,GAAmB,CAC9GS,OAAQ,CAAEC,MAAOL,KAAKK,SACrBK,QACDC,KAAIC,IAEF,MAAMC,EAASD,EAAWE,IAE1B,OADoCC,OAAOC,KAAKH,GAAQF,IAAIM,KAAUC,KAAML,EAAOI,GAAME,MAAOF,IAAM,GAI5G,CAEAG,cACE,OAAOpB,KAAKC,KAAKC,IAAgEF,KAAKG,OAAOR,GAAmB,CAC9GS,OAAQ,CAAEC,MAAOL,KAAKK,SACrBK,QACDC,KAAIC,GAAcA,EAAWC,QAEjC,CAEAQ,KAAKC,GACH,OAAOtB,KAAKC,KAAKsB,KAAcvB,KAAKG,OA3CjB,mBA2CyCmB,EAAa,CACvElB,OAAQ,CAAEoB,MAAOxB,KAAKK,QAE1B,CAEAoB,OAAOH,GACL,OAAOtB,KAAKC,KAAKwB,OAAgBzB,KAAKG,OAhDjB,qBAgD2C,CAC9DC,OAAQ,CAAEoB,MAAOxB,KAAKK,MAAON,WAAYuB,EAAYI,aAEzD,CAEAC,OAAOC,GACL,MAAMC,EAAW,IAAIC,SACrB,UAAWC,KAAQH,EACjBC,EAASG,OAAO,OAAQD,GAE1B,OAAO/B,KAAKC,KAAKsB,KAAuBvB,KAAKG,OAzDxB,qBAyDkD0B,EAAU,CAC/EzB,OAAQ,CAAEC,MAAOL,KAAKK,MAAO4B,OAAQjC,KAAKiC,SAE9C,CAEAC,YAAYC,GACV,OAAOnC,KAAKC,KAAKsB,KAAcvB,KAAKG,OA9Db,uBA8DyC,KAAM,CACpEC,OAAQ,CAAEoB,MAAOxB,KAAKK,MAAO8B,qBAEjC,CAACC,SAAApC,KAAA,4DA9DUJ,KAAmByC,GAAnBzC,EAAmB,GA8D7B,GA9D6BwC,SAAApC,KAAA,WAAAsC,EAAAC,IAAA,OAAnB3C,EAAmB4C,QAAnB5C,EAAmB6C,mBAAnB7C,CAAoB,4FCX1B,IAAM8C,EAAqB,MAA5B,MAAOA,EACXC,YAAoB1C,EAA0B2C,EAA0BC,GAApD7C,KAAAC,OAA0BD,KAAA4C,UAA0B5C,KAAA6C,YAA0B,CAElGC,eAAetC,GACb,OAAOR,KAAKC,KAAKC,IAAiBF,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO6C,IAAqB,OAAQ,CAC/F5C,OAAQ,CAAEoB,MAAOxB,KAAK4C,QAAQvC,MAAM4C,WAAYhB,OAAQjC,KAAK4C,QAAQX,OAAOgB,WAAYzC,UAE5F,CAEA0C,YAAYC,EAA0BC,EAAqBC,GACzD,MAAMC,EAAMtD,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO6C,IAAqB,UAC/D,UAAYhD,KAAK4C,QAAQvC,MAAM4C,WAC/B,WAAajD,KAAK4C,QAAQX,OAAOgB,WACjC,yBAA2BE,EAAeI,KAAK,KAC/C,oBAAsBH,EAAUG,KAAK,KACrC,sBAAwBF,EAAYE,KAAK,KAE7CC,OAAOC,KAAKH,EAAK,SAAU,GAC7B,CAAClB,SAAApC,KAAA,mBAAAqC,iBAlBUK,GAAqBgB,MAAAC,MAAAD,MAAAE,KAAAF,MAAAG,MAAA,EAAAzB,SAAApC,KAAA,WAAAsC,EAAAC,IAAA,OAArBG,EAAqBF,QAArBE,EAAqBD,mBAArBC,CAAqB,2FCA3B,IAAMoB,EAAgB,MAAvB,MAAOA,EACXnB,YAAoB1C,EAA0B2C,EAA0BC,GAApD7C,KAAAC,OAA0BD,KAAA4C,UAA0B5C,KAAA6C,YAA0B,CAElGkB,aACE,OAAO/D,KAAKC,KAAKC,IAAaF,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO6D,IAAgB,cAAe,CAC7F5D,OAAQ,CAAEoB,MAAOxB,KAAK4C,QAAQvC,MAAM4C,WAAYhB,OAAQjC,KAAK4C,QAAQX,OAAOgB,aAEhF,CAGAgB,eACE,MAAO,GAAGjE,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO,GAAG6D,sBAAgChE,KAAK4C,QAAQvC,gBAAgBL,KAAK4C,QAAQX,QAC3H,CAEAiC,yBAA0BC,uBAAsBC,eAAcC,cAE5D,OAAOrE,KAAKC,KAAKC,IAAaF,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO6D,IAAgB,YAAa,CAC3F5D,OAAQ,CACNoB,MAAOxB,KAAK4C,QAAQvC,MAAM4C,WAC1BhB,OAAQjC,KAAK4C,QAAQX,OAAOgB,WAC5BkB,qBAAsBA,EAAqBlB,WAC3CmB,aAAcA,EAAanB,WAC3BqB,gBAAiBD,EAAUpB,aAGjC,CAACb,SAAApC,KAAA,mBAAAqC,iBAzBUyB,GAAgBJ,MAAAC,MAAAD,MAAAE,KAAAF,MAAAG,MAAA,EAAAzB,SAAApC,KAAA,WAAAsC,EAAAC,IAAA,OAAhBuB,EAAgBtB,QAAhBsB,EAAgBrB,mBAAhBqB,CAAgB,oGCDtB,MAAMd,EAAqB,kBAG3B,IAAMuB,EAAqB,MAA5B,MAAOA,EACX5B,YAAoB1C,EAA0B2C,EAA0BC,GAApD7C,KAAAC,OAA0BD,KAAA4C,UAA0B5C,KAAA6C,YAA0B,CAElG2B,eAAezC,GACb,MAAMF,EAAW,IAAIC,SACrBD,SAASG,OAAO,OAAQD,GACjB/B,KAAKC,KAAKsB,KAAuBvB,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO6C,EAAqB,UAAWnB,EAAU,CAClHzB,OAAQ,CAAEC,MAAOL,KAAK4C,QAAQvC,MAAM4C,WAAYhB,OAAQjC,KAAK4C,QAAQX,OAAOgB,aAEhF,CAGAwB,SAASJ,GACP,OAAOrE,KAAKC,KAAKsB,KAAuBvB,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO6D,IAAgB,SAAU,GAAI,CACtG5D,OAAQ,CACNC,MAAOL,KAAK4C,QAAQvC,MAAM4C,WAC1BhB,OAAQjC,KAAK4C,QAAQX,OAAOgB,WAC5BqB,gBAAiBD,EAAUpB,aAGjC,CAACb,SAAApC,KAAA,mBAAAqC,iBApBUkC,GAAqBb,MAAAC,MAAAD,MAAAE,KAAAF,MAAAG,MAAA,EAAAzB,SAAApC,KAAA,WAAAsC,EAAAC,IAAA,OAArBgC,EAAqB/B,QAArB+B,EAAqB9B,mBAArB8B,CAAqB,uXCAlC,MAGaG,EAAiB,kBACjBC,EAAyB,0BACzBC,EAAkB,mBAClBC,EAAiB,kBACjBC,EAAyB,0BAG/B,IAAMC,EAAgB,MAAvB,MAAOA,EACXpC,YAAoB1C,EAA0B2C,EAA0BC,GAApD7C,KAAAC,OAA0BD,KAAA4C,UAA0B5C,KAAA6C,YAA0B,CAElGmC,OAAO1D,GACL,OAAOtB,KAAKC,KAAKC,IAAaF,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO8E,MAAmB,CACjF7E,OAAQ,CAAEC,MAAOL,KAAK4C,QAAQvC,MAAM4C,WAAY3B,gBAEpD,CAEA4D,YAAYnD,GACV,SAAOoD,QAAKC,KAASrD,IAAOrB,QAC1B2E,KAAUC,GACDtF,KAAKC,KAAKsB,KAAcvB,KAAK6C,WAAWE,MAAM9C,KAAKE,OAtBxC,sBAsBmE,CACnFoF,MAAOvF,KAAK4C,QAAQvC,MAAM4C,WAC1BuC,cAAeF,MAElB,EACD3E,KAAI8E,KAEAC,QAASD,EACTE,SAAU,MAKlB,CAEAC,cAAcC,GACZ,OAAO7F,KAAKC,KAAKC,IAAUF,KAAK6C,WAAWE,MAAM9C,KAAKE,OArCjC,qBAqC2D,CAC9EC,OAAQ,CAAE0F,GAAID,EAAG5C,WAAY5C,MAAOL,KAAK4C,QAAQvC,MAAM4C,aAE3D,CAEAxB,OAAOoE,GACL,OAAO7F,KAAKC,KAAKwB,OAAgBzB,KAAK6C,WAAWE,MAAM9C,KAAKE,OA1CtC,sBA0CiE,CACrFC,OAAQ,CAAEC,MAAOL,KAAK4C,QAAQvC,MAAM4C,WAAY6C,GAAID,EAAG5C,aAE3D,CAACb,SAAApC,KAAA,mBAAAqC,iBArCU0C,GAAgBrB,MAAAC,MAAAD,MAAAE,KAAAF,MAAAG,MAAA,EAAAzB,SAAApC,KAAA,WAAA+F,EAAAxD,IAAA,OAAhBwC,EAAgBvC,QAAhBuC,EAAgBtC,mBAAhBsC,CAAgB,kFCX7B,MAAMiB,EAAiB,cACjBC,EAAcD,EAAiB,MAC/BE,EAAmBF,EAAiB,SACpCG,EAAmBH,EAAiB,SACpCI,EAAsBJ,EAAiB,eACvCK,EAAkBL,EAAiB,QAGlC,IAAMM,EAAY,MAAnB,MAAOA,EACX3D,YAAoB1C,EAA0B2C,EAA0BC,GAApD7C,KAAAC,OAA0BD,KAAA4C,UAA0B5C,KAAA6C,YAA0B,CAElGmC,SACE,OAAOhF,KAAKC,KAAKC,IAAYF,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO8F,GAAc,CAC3E7F,OAAQ,CAAEC,MAAOL,KAAK4C,QAAQvC,MAAM4C,aAExC,CAEAxB,OAAOoE,GACL,OAAO7F,KAAKC,KAAKC,IAAaF,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO+F,GAAmB,CACjF9F,OAAQ,CAAEC,MAAOL,KAAK4C,QAAQvC,MAAM4C,WAAY6C,GAAID,EAAG5C,aAE3D,CAEAtB,OAAOI,GACL,MAAMF,EAAW,IAAIC,SACrBD,SAASG,OAAO,OAAQD,GACjB/B,KAAKC,KAAKsB,KAAuBvB,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAOgG,GAAmBtE,EAAU,CACrGzB,OAAQ,CAAEC,MAAOL,KAAK4C,QAAQvC,MAAM4C,WAAYhB,OAAQjC,KAAK4C,QAAQX,OAAOgB,aAEhF,CAEAsD,OAAOV,GACL,MAAMvC,EAAMtD,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAO6F,EAAiB,QAC3D,UAAYhG,KAAK4C,QAAQvC,MACzB,WAAawF,EAEjBrC,OAAOC,KAAKH,EAAK,SAAU,GAC7B,CAEAkD,kBACE,OAAOxG,KAAKC,KAAKC,IAAkBF,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAOiG,GAAsB,CACzFhG,OAAQ,CAAEC,MAAOL,KAAK4C,QAAQvC,MAAM4C,aAExC,CAEAwD,SAASC,GACP,OAAO1G,KAAKC,KAAKC,IAAiBF,KAAK6C,WAAWE,MAAM9C,KAAKE,OAAOkG,GAAkB,CACpFjG,OAAQ,CAAEC,MAAOL,KAAK4C,QAAQvC,MAAM4C,WAAYyD,SAEpD,CAACtE,SAAApC,KAAA,mBAAAqC,iBAzCUiE,GAAY5C,MAAAC,MAAAD,MAAAE,KAAAF,MAAAG,MAAA,EAAAzB,SAAApC,KAAA,WAAA2G,EAAApE,IAAA,OAAZ+D,EAAY9D,QAAZ8D,EAAY7D,mBAAZ6D,CAAY,mOCbnB5C,MAAA,mEAAmBA,MAAA,YAAAA,MAAA,IAAAkD,EAAAC,WAAAC,SAAApD,QCclB,IAAMqD,EAA4B,MAAnC,MAAOA,EAGXpE,YACkCkE,EACxBG,GADwBhH,KAAA6G,aACxB7G,KAAAgH,YAJgBhH,KAAAiH,UAAY,kBAKlC,CAEJC,YAAYC,GACVnH,KAAKgH,UAAUI,MAAMD,EACvB,CAAC/E,SAAApC,KAAA,mBAAAqC,iBAVU0E,GAA4BrD,MAI7B2D,MAAe3D,MAAAC,MAAA,EAAAvB,SAAApC,KAAA,UAAAsH,EAAAC,IAAA,MAJdR,EAA4BS,UAAA,gCAAAC,SAAA,EAAAC,aAAA,SAAAC,EAAAC,GAAA,EAAAD,GAA5BjE,MAAA,YAAAkE,EAAAX,+LDhBTvD,MAFJ,aAEIA,CAFM,oBAENA,CADe,oBACCA,MAAA,GAAgEA,QAChFA,MAAA,EAAAmE,EAAA,2BAGFnE,QAEEA,MADF,uBACEA,CAD4B,cAC6BA,MAAA,0BAASkE,EAAAV,aAAa,GAAExD,MAAA,YAAMA,QACvFA,MAAA,cAAyDA,MAAA,0BAASkE,EAAAV,aAAY,EAAK,GAAExD,MAAA,YAEzFA,mBAToBA,MAAA,GAAAA,MAAA,UAAAkE,EAAAf,WAAAiB,YAAA,KAAAF,EAAAf,WAAAkB,SAAA,MAChBrE,cAAA,EAAAkE,EAAAf,WAAAC,QAAA,sBCUAkB,KAAapE,yBACbqE,KAAepE,KACfqE,KAAYC,OAAA,yEAGHpB,CAA4B,6BCAlC,IAAMqB,EAAwB,MAA/B,MAAOA,EAGXC,OAAOjI,GACLJ,KAAKI,OAASA,CAChB,CAEAkI,QAAQlI,GACN,OAAO,CACT,CAEAmI,iBAEEvI,KAAKI,OAAOoI,SADmBxI,KAAKI,OAAOqI,KAE7C,CAACrG,SAAApC,KAAA,mBAAAqC,iBAdU+F,EAAwB,EAAAhG,SAAApC,KAAA,UAAAsH,EAAAC,IAAA,MAAxBa,EAAwBZ,UAAA,2BAAAkB,YAAA,EAAAC,SAAA,CAAAjF,OAAAkF,MAAA,EAAAC,KAAA,EAAAC,OAAA,6GAAAC,SAAA,SAAApB,EAAAC,GAAA,EAAAD,ICjBnCjE,MADF,UACEA,CAD6B,WAC0CA,MAAA,0BAASkE,EAAAW,gBAAgB,GAC9F7E,MAAA,cAAUA,MAAA,YAEdA,4BDUIsF,KAAerF,KACfsF,KAAarF,eAGJwE,CAAwB,mBEL9B,IAAMc,EAA4B,MAAnC,MAAOA,EAIXb,OAAOjI,GACLJ,KAAKmB,MAAQf,EAAOe,MACpBnB,KAAKmJ,SAAW/I,EAAOqI,IACzB,CAEAH,QAAQlI,GACN,OAAO,CACT,CAACgC,SAAApC,KAAA,mBAAAqC,iBAXU6G,EAA4B,EAAA9G,SAAApC,KAAA,UAAAsH,EAAAC,IAAA,MAA5B2B,EAA4B1B,UAAA,gCAAAkB,YAAA,EAAAC,SAAA,CAAAjF,OAAAkF,MAAA,EAAAC,KAAA,EAAAC,OAAA,4CAAAC,SAAA,SAAApB,EAAAC,GAAA,EAAAD,ICbzCjE,MAAA,WACEA,MAAA,GACFA,eAF4DA,MAArC,QAAAkE,EAAAuB,SAAAC,MAAAC,YAAqC3F,CAAD,iBAAAkE,EAAAuB,SAAAC,MAAAC,aACzD3F,cAAA,IAAAkE,EAAAzG,MAAA,sBDUUmI,KAAcnB,OAAA,qFAEbe,CAA4B,mMEG/BxF,MAAA,mBACEA,MAAA,GACFA,kCAFYA,MAAA,QAAA6F,EAAApI,OACVuC,cAAA,IAAA6F,EAAArI,KAAA,+BAJJwC,MADF,qBACEA,CADwD,eAC7CA,MAAA,WAAKA,QAChBA,MAAA,mBACEA,MAAA,EAAA8F,EAAA,oBAAA9F,OAKAA,MAAA,mBAA0CA,MAAA,cAE9CA,YACAA,MAAA,oBACEA,MAAA,kDACAA,MAAA,WAAkFA,MAAA,eACpFA,gCAZsCA,MAAA,GAAAA,MAAA,cAAA+F,EAAAC,eAAAC,OAAA,qBAClCjG,cAAA+F,EAAAC,gBAKYhG,MAAA,GAAAA,MAAA,QAAA+F,EAAAG,+CAeZlG,MAAA,mBACEA,MAAA,GACFA,kCAFYA,MAAA,QAAAmG,EAAAnI,YACVgC,cAAA,IAAAmG,EAAAC,MAAA,gCAJJpG,MAAA,kBAEEA,MAAA,EAAAqG,EAAA,oBAAArG,OAKFA,8BANEA,MAAA,cAAA+F,EAAAO,eAAAL,OAAA,qBACAjG,cAAA+F,EAAAO,uCAQFtG,MAAA,oCAcFA,MAAA,sBACEA,MAAA,8BACFA,cAFgBA,MAAA,cCbf,IAAMuG,GAA2B,MAAlC,MAAOA,EAaXtH,YACUqE,GAAAhH,KAAAgH,YAbgBhH,KAAAiH,UAAY,mBAGtCjH,KAAA4J,oBAAsBA,IACtB5J,KAAAkK,mBAAoB,EACpBlK,KAAAmK,cAAe,EAEfnK,KAAAgK,gBAAeI,OAAsB,IACrCpK,KAAA0J,gBAAeU,OAAsB,IAE7BpK,KAAAqK,uBAAsBC,KAAU1K,KAIpC,CAEJ2K,WACEvK,KAAKwK,YACLxK,KAAKyK,aACP,CAEAvD,YAAY5F,GACVtB,KAAKgH,UAAUI,MAAM9F,EACvB,CAEAoJ,wBAAwBR,GACtBlK,KAAKkK,kBAAoBA,CAC3B,CAEAS,mBAAmBC,GACjB5K,KAAKmK,aAAeS,EAAMC,OAC5B,CAEA1D,UACE,MAAM2D,EAAqC9K,KAAK+K,KAAKC,cACrDhL,KAAKkH,YAAY4D,EAAWxJ,YAC9B,CAEQkJ,YACNxK,KAAK+K,KAAO,IAAIE,KAAiB,IACjCjL,KAAK+K,KAAKG,WAAW,cAAe,IAAIC,KAAmB,KAAM,CAACC,KAAWC,YAC7ErL,KAAK+K,KAAKG,WAAW,QAAS,IAAIC,KAAmBG,KAAazK,OAAO0K,QAAQpK,QAEjFnB,KAAK+K,KAAKS,SAAShL,MAAMiL,aAAa/K,QACpCgL,KAAU1L,KAAK+K,KAAKS,SAAShL,MAAMW,QAAK,EACxCwK,QACAC,UAAWC,IAEiC,MAAxC7L,KAAK+K,KAAKS,SAASlK,YAAYH,OACjCnB,KAAK+K,KAAKS,SAASlK,YAAYwK,WAAW,MAIxCD,IAAajC,KACfiC,EAAWE,OAAO,mMAAwMT,KAAazK,OAAO0K,QAAQpK,MACjPnB,KAAK0J,eAAesC,KAAKC,GAAUA,EAAO9K,QAAU0K,IAKvD7L,KAAK0J,aAAawC,IAAI,CAJc,CAClChL,KAAM2K,EACN1K,MAAO0K,MAEiC7L,KAAK0J,iBAEjD1J,KAAK+K,KAAKS,SAAShL,MAAMsL,WAAWD,IAEpC7L,KAAKmM,kBAAkBN,EAAQ,EAGrC,CAEQM,kBAAkB3L,GACxBR,KAAKqK,oBAAoB9J,qBAAqBC,GAAOoL,UAAU5B,IAC7DhK,KAAKgK,aAAakC,IAAIlC,EAAY,EAEtC,CAEQS,cACNzK,KAAKqK,oBAAoB5J,YAAYmL,UAAU/K,IAC7Cb,KAAK0J,aAAawC,IAAIrL,EAAM,EAEhC,CAACuB,SAAApC,KAAA,mBAAAqC,iBAhFU4H,GAA2BvG,MAAAC,MAAA,EAAAvB,SAAApC,KAAA,UAAAsH,EAAAC,IAAA,MAA3B0C,EAA2BzC,UAAA,+BAAAC,SAAA,EAAAC,aAAA,SAAAC,EAAAC,GAAA,EAAAD,GAA3BjE,MAAA,YAAAkE,EAAAX,y5BDzCTvD,MAFJ,aAEIA,CAFM,oBAENA,CADe,oBACCA,MAAA,qBAAeA,QAC/BA,MAAA,uBACEA,MAAA,0FACIA,MAAA,SAAuDA,MAAA,UAAIA,QAAIA,MAAA,QAEvEA,UAEEA,MADF,qBACEA,CADgB,aAGdA,MAAA,GAAA0I,EAAA,MAmBE1I,MADF,sBACEA,CADwD,gBAC7CA,MAAA,mBAAYA,QAWvBA,MAVA,GAAA2I,GAAA,mBAUA3I,CAVyB,GAAA4I,GAAA,eAcvB5I,MADF,WACEA,CADiB,eAEfA,MAAA,0BAASkE,EAAA8C,yBAAwB,EAAK,GACtChH,MAAA,eAAUA,MAAA,aACZA,UACAA,MAAA,eACEA,MAAA,0BAASkE,EAAA8C,yBAAwB,EAAM,GACvChH,MAAA,eAAUA,MAAA,kBAGhBA,cACAA,MAAA,GAAA6I,GAAA,wBAMJ7I,UAEEA,MADF,wBACEA,CADyC,0BACiBA,MAAA,kBAAA8I,GAAA,OAAU5E,EAAA+C,mBAAA6B,EAA0B,GAC5F9I,MAAA,IACFA,QAEEA,MADF,SACEA,CADG,gBACsDA,MAAA,0BAASkE,EAAAV,aAAa,GAAExD,MAAA,aAAMA,QACvFA,MAAA,gBACEA,MAAA,0BAASkE,EAAAT,SAAS,GAClBzD,MAAA,gBAIRA,qBAjEUA,MAAA,IAAAA,MAAA,YAAAkE,EAAAmD,MAEJrH,cAAA,GAAAkE,EAAAuC,cAAAvC,EAAAsC,kBAAA,OAoBExG,MAAA,GAAAA,MAAA,GAAAkE,EAAAsC,kBAAA,OAUAxG,cAAA,GAAAkE,EAAAsC,mBAAA,MAIwCxG,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAA+I,EAAA7E,EAAAsC,oBAIAxG,MAAA,GAAAA,MAAA,UAAAA,MAAA,GAAA+I,GAAA7E,EAAAsC,oBAM1CxG,MAAA,GAAAA,MAAA,GAAAkE,EAAAmD,KAAAS,SAAAlK,YAAAoL,SAAA,MAAA9E,EAAAmD,KAAAS,SAAAlK,YAAAqL,QAAA/E,EAAAmD,KAAAS,SAAAlK,YAAAqL,OAAAtB,SAAA,OAQ+B3H,MAAA,GAAAA,MAAA,UAAAkE,EAAAuC,cAC/BzG,cAAA,IAAAkE,EAAAuC,aAAA,yBAIwEzG,MAAA,GAAAA,MAAA,YAAAkE,EAAAmD,KAAA6B,uBCxC1E5E,KAAapE,8BACbiJ,KAAWhJ,yBACXiJ,KAAmBjJ,UACnBkJ,KAAkBC,eAClBC,KAAeC,KAAAC,KACfC,KACAC,KAAcC,KACdrF,KAAesF,UACfC,KACAvE,KAAawE,KACbC,KAAoBC,KACpBC,IACAC,KAA6B1F,OAAA,yJAGpB8B,CAA2B,yKC/BlCvG,MAAA,8EAOAA,MAAA,QAAIA,MAAA,0BAAAA,cAAA,eAAAkD,EAAAkH,UAAAC,UAAA,gCAGJrK,MAAA,QAAIA,MAAA,0BAAAA,cAAA,aAAAkD,EAAAkH,UAAAE,QAAA,gCAGJtK,MAAA,QAAIA,MAAA,0BAAAA,cAAA,eAAAkD,EAAAkH,UAAAG,UAAA,gCAGJvK,MAAA,QAAIA,MAAA,0BAAAA,cAAA,UAAAkD,EAAAkH,UAAAI,MAAA,gCAbJxK,MAAA,kCACAA,MAAA,QAAIA,MAAA,GACJA,MAAA,QAAIA,MAAA,GAUJA,MATA,EAAAyK,GAAA,IASAzK,CAT2B,EAAA0K,GAAA,IAS3B1K,CANyB,EAAA2K,GAAA,IAMzB3K,CAH2B,EAAA4K,GAAA,2BARvB5K,MAAA,GAAAA,MAAA,WAAAkD,EAAAkH,UAAAS,OAAA,KACA7K,MAAA,GAAAA,MAAA,eAAAkD,EAAAkH,UAAAU,WAAA,KACJ9K,cAAA,EAAAkD,EAAAkH,UAAAC,UAAA,MAGArK,cAAA,EAAAkD,EAAAkH,UAAAE,QAAA,MAGAtK,cAAA,EAAAkD,EAAAkH,UAAAG,UAAA,MAGAvK,cAAA,EAAAkD,EAAAkH,UAAAI,MAAA,gDAaFxK,MAAA,eACEA,MAAA,mBAAAA,MAAA+K,GAAA,MAAA7H,EAAAlD,QAAA,OAAAA,MAASkD,EAAA8H,iBAAgB,GACzBhL,MAAA,cAAUA,MAAA,SACZA,qCAmBMA,MAAA,gEACEA,MADsC,YAAAA,MAAA,IAAAiL,EAAAC,MAAAlL,MACtCA,CADkF,iBAAAiL,EAAAE,iCAIpFnL,MAAA,cAAUA,MAAA,SAAGA,kDAPfA,MAAA,eACEA,MAAA,yBAAAiL,EAAAjL,MAAAoL,GAAAC,UAAAnI,EAAAlD,MAAA,UAAAA,MAASkD,EAAA8H,eAAAC,GAA8B,GAKrCjL,MAJF,EAAAsL,GAAA,aAIEtL,CAJyB,EAAAuL,GAAA,KAO7BvL,2DAPEA,cAAA,EAAAiL,EAAAC,KAAA,+CAfNlL,MAAA,2BACEA,MAAA,sBAAA8I,GAAA9I,MAAAwL,GAAA,MAAAtI,EAAAlD,QAAA,OAAAA,MAAckD,EAAAuI,WAAA3C,GAAkB,GAG5B9I,MAFJ,kCAEIA,CAFsC,cAEtCA,CADc,iBACYA,MAAA,GAE9BA,YAEEA,MADF,kCACEA,CADiE,eAE/DA,MAAA,mBAAAA,MAAAwL,GAAA,MAAAtI,EAAAlD,QAAA,OAAAA,MAASkD,EAAA8H,iBAAgB,GACzBhL,MAAA,cAAUA,MAAA,YACZA,UACAA,MAAA,EAAA0L,GAAA,gBAAA1L,OAaJA,kCAzBmDA,MAAA,UAAAA,MAAA,EAAA+I,GAAA7F,EAAAyI,YAErB3L,cAAA,WAEEA,MAAA,GAAAA,MAAAkD,EAAAyI,UAAA,eAQ5B3L,MAAA,GAAAA,MAAAkD,EAAA0I,oBCLD,IAAMC,GAAiB,MAAxB,MAAOA,EAIXC,GACAC,GACAC,GACAC,GAEAhN,YACUqE,EACA4I,EACAC,EACAC,EACAC,GAJA/P,KAAAgH,YACAhH,KAAA4P,WACA5P,KAAA6P,SACA7P,KAAA8P,mBACA9P,KAAA+P,oBAZV/P,KAAAgQ,OAAMC,MAAS,CAACV,sBAEhBvP,MAAAwP,KAAelF,KAAU4F,KACzBlQ,MAAAyP,KAAenF,KAAU6F,MACzBnQ,MAAA0P,KAAkBpF,KAAU8F,KAC5BpQ,MAAA2P,KAAgBrF,KAAU+F,MAU1BrQ,KAAAsQ,YAActQ,MAAKuQ,IAEnBvQ,KAAAqP,WAAUjF,QAAO,GACjBpK,KAAA8N,WAAU1D,YAAoCoG,GAE9CxQ,KAAAyQ,eAAcrG,OAAoB,CAAEsG,MAAO,GAAIC,gBAAiB,KAEhE3Q,KAAAsP,mBAAkBsB,OAAS,KACzB,MAAMzH,EAAWnJ,KAAKyQ,cACtB,OAAOtH,EAASwH,gBAAgBE,OAAOC,GACrC3H,EAASuH,MAAMG,OAAOE,IAAKA,GAAE3H,MAAMtD,KAAOgL,EAAEhL,IAAI6D,OAASmH,EAAEE,MAAK,GAIpEhR,MAAAiR,KAAUC,MAAQlR,MAAK2P,EAAcwB,UAAU,CAAC,aAAc,UAAW,MAAO,QAAS,0BAA2BC,KAClHC,WAAYC,SAASF,EAAEC,WAAY,IACnCE,QAASH,EAAEG,QACXtQ,IAAKmQ,EAAEnQ,IACPuQ,sBAAuBJ,EAAEI,yBAEjBxR,KAAAyR,MAAQC,mBAAmB1R,MAAK2P,EAAcgC,SAAS,UAAY,GAtBzE,CAgBJV,GAQA1G,WACEvK,MAAK4R,IACL5R,MAAK6R,IACL7R,MAAK2P,EAAcmC,iBAAiB,IAAM9R,MAAK6R,IACjD,CAEA3K,cACElH,KAAKgH,UAAUI,OACjB,CAEA+H,WAAW1L,GACTzD,KAAKqP,QAAQnD,IAAIzI,EACnB,CAEAiL,eAAeqD,GACb,GAAIA,EAEF,OAAKA,EAAelD,aAKhBkD,EAAeC,aACjBhS,KAAK4P,SAASnM,KAAK,YAAYsO,EAAeE,WAC9CjS,MAAKwP,EAAa0C,OAAOH,EAAejM,GAAI,CAAEqM,IAAKnS,KAAKoS,iBAAiB,SAASD,MAAOvG,UAAU,CACjGyG,MAAOA,KACLrS,KAAK4P,SAASnM,KAAK,YAAYsO,EAAeE,uDAAmDzB,EAAW,CAAE8B,SAAU,MACxHtS,MAAK6R,GAAc,EAErBU,KAAMA,KACJvS,KAAK4P,SAASnM,KAAK,WAAWsO,EAAeE,YAAQzB,EAAW,CAAE8B,SAAU,MAC5EtS,MAAK6R,GAAc,KAKvB7R,KAAKwS,mBAAmBT,EAAejM,UAlBvC2M,QAAkBzS,KAAK6P,OAAQkC,EAAeW,eAAgB1S,KAAK8P,iBAAkB9P,KAAK+P,mBAsBpE/P,KAAK6P,OAAOpM,KAAKwG,GAA6B,CACtE0I,WAAW,EACX7C,iBAAkB9P,KAAK8P,iBACvB8C,MAAO,UAESC,cAAcjH,UAAWtK,IACtB,MAAfA,GACJtB,KAAKwS,mBAAmBlR,EAAW,EAEvC,CAEQkR,mBAAmBlR,GACzB,MAAMyJ,EAAiB,CACrB+H,MAAO,CAAC9S,KAAKoS,iBAAiB9Q,KAE1ByR,KAAUC,KAAiBjI,GACjC/K,MAAK2P,EAAcsD,YAAY,CAAC,QAAQF,MACxC/S,KAAK+P,kBAAkBmD,cACzB,CAEQd,iBAAiB9Q,GACvB,MAAM6R,EAAIC,IAASC,sBAAsBrT,MAAKiR,EAAQI,WAAYrR,MAAKiR,EAAQM,QAASvR,MAAKiR,EAAQhQ,KACrG,OAAOmS,IAASE,oBAAoBhS,EAAa6R,EACnD,CAEAvB,KACO5R,MAAKiR,EAAQO,uBAElBxR,MAAK0P,EAAgB1K,OAAOhF,MAAKiR,EAAQO,uBAAuB5F,UAAUkH,IACxE,MAAMS,EAAOT,EAAMU,KAAKzC,GAAKA,EAAE0C,OAASzT,MAAKiR,EAAQhQ,KACjDsS,GAAMpB,KACRnS,KAAK8N,QAAQ5B,IAAIqH,EAAKpB,IAAG,EAE/B,CAEAN,KACE,MAAM6B,EAAiB1T,KAAKgQ,IAAI2D,MAAM,eACtC3T,MAAKyP,EAAamE,YAAY5T,MAAKiR,EAAQI,WAAYrR,MAAKiR,EAAQM,QAASvR,MAAKiR,EAAQhQ,KACvFP,KACCgT,EAAehT,QAAI,EACnBmT,KAAK,IAAC,EACNlT,KAAIwI,IACFA,EAASwH,gBAAgBmD,QAAQhD,IAC3BA,EAAElC,MAAMmF,WAAW,aACrBjD,EAAElC,KAAOkC,EAAElC,KAAKoF,QAAQ,UAAW,IACnClD,EAAElC,KAAOpL,OAAOyQ,KAAKnD,EAAElC,MAEvBkC,EAAElC,KAAOkC,EAAElC,KAAKoF,QAAQ,iBAAkB,kBAAgB,GAGvD7K,IAETuK,EAAe/S,OAMhBiL,UAAUnD,IACTzI,KAAKyQ,YAAYvE,IAAIzD,EAAI,EAG/B,CAEAyL,GAAc/K,GACZ,MAAM4B,EAAiB,CACrB+H,MAAO,CAACM,IAASe,OAAOhL,EAASrD,MAE7BiN,KAAUC,KAAiBjI,GACjC/K,MAAK2P,EAAcsD,YAAY,CAAC,QAAQF,KAC1C,CAEAqB,GAAgBjL,EAAwBkL,GAAY,GAClD,GAAKA,EAmBLrU,KAAK4P,SAASnM,KAAK,eACnBzD,MAAKwP,EAAa/N,OAAO0H,EAASC,MAAMtD,GAAIqD,EAASrD,IAAI,GAAO8F,UAAU,CACxE2G,KAAMA,KACJvS,KAAK4P,SAASnM,KAAK,UAAW,KAAM,CAAE6O,SAAU,MAChDtS,MAAK6R,GAAc,EAErBQ,MAAOA,KACLrS,KAAK4P,SAASnM,KAAK,2DAA4D,KAAM,CAAE6O,SAAU,KAAM,QA1B3G,CACE,MAAM7J,EAAgC,CACpCV,SAAUoB,EAASrD,GACnBgC,YAAaqB,EAAS+E,MACtBpH,QAAS9G,KAAKyQ,cAAcE,gBAAgB6C,KAAK1C,GAAKA,EAAEhL,KAAOqD,EAASC,MAAMtD,KAAKwO,eAEvDtU,KAAK6P,OAAOpM,KAAKsD,EAA8B,CAC3E4L,WAAW,EACXlK,OACAqH,iBAAkB9P,KAAK8P,iBACvB8C,MAAO,UAEaC,cAAcjH,UAAW2I,IACzCA,GACFvU,MAAKoU,EAAgBjL,GAAU,EAAI,GAe3C,CAEAoH,KA6BE,MA5BiC,IAC5BiE,IACHC,WAAY,CACV,IACKC,IAAkBC,sBACrBC,mBAAoBF,IAAkBG,8BAExC,IACKH,IAAkBI,SACrBC,MAAO,QACPC,cAAgB5D,GAA8BpR,MAAKkU,EAAc9C,EAAE3I,OAErE,IACKiM,IAAkBI,SACrBG,WAAY,eACZF,MAAO,cACPG,YAAc9D,GAA8B,GAAGA,EAAE3I,KAAKW,MAAM6I,OAAOb,EAAE3I,KAAKW,MAAM8E,QAAUkD,EAAE3I,KAAKW,MAAM6I,KAAO,KAAKb,EAAE3I,KAAKW,MAAM8E,SAAW,KAC3IiH,aAAcjM,GAEhB,IACKwL,IAAkBU,oBACrBD,aAAc/M,EACdwM,mBAA4B,CAC1BpM,SAAWW,GAAanJ,MAAKoU,EAAgBjL,MAMvD,CAAC/G,SAAApC,KAAA,mBAAAqC,iBArNUkN,GAAiB7L,MAAAC,MAAAD,MAAAE,OAAAF,MAAAC,MAAAD,0BAAA,EAAAtB,SAAApC,KAAA,UAAAsH,EAAAC,IAAA,MAAjBgI,EAAiB/H,UAAA,mBAAAkB,YAAA,EAAAC,SAAA,CAAAjF,OAAAkF,MAAA,GAAAC,KAAA,EAAAC,OAAA,gkCAAAC,SAAA,SAAApB,EAAAC,GAAA,EAAAD,IDnD1BjE,MAFJ,UAEIA,CAF0C,UAE1CA,CAD6B,WAE3BA,MAAA,GACFA,QACAA,MAAA,cAA6CA,MAAA,0BAASkE,EAAAV,aAAa,GACjExD,MAAA,cAAUA,MAAA,WAEdA,YAEEA,MADF,UACEA,CADoD,OAKlDA,MAHA,EAAA2R,GAAA,IAGA3R,CAHkB,GAAA4R,GAAA,KAoBpB5R,QACAA,MAAA,oBACAA,MAAA,YACEA,MAAA,wBAGJA,UACAA,MAAA,2BAOEA,MANA,GAAA6R,GAAA,eAMA7R,CANsC,GAAA8R,GAAA,6BAmC1C9R,iBAvEMA,MAAA,GAAAA,MAAA,IAAAkE,EAAA6J,OAAA,gBAQA/N,MAAA,GAAAA,MAAA,EAAAkE,EAAAkG,UAAA,MAuB2CpK,MAAA,GAAgCA,MAAhC,UAAAkE,EAAA6I,cAAAC,MAAgChN,CAAD,cAAAkE,EAAA0I,aAK5E5M,MAAA,GAAAA,MAAA,OAAAkE,EAAA0H,kBAAA3F,OAAA,OAMAjG,cAAA,GAAAkE,EAAA0H,kBAAA3F,OAAA,yBCLA1B,KAAepE,eACfoF,KAAa+D,KACbyI,KACAC,KAAaxI,MACbyI,KACAC,KACApI,KACAqI,KACAC,KACAC,IAAc5I,IACdjF,KAAYC,OAAA,uFAGHoH,CAAiB,kDClDvB,IAAMyG,EAAe,MAAtB,MAAOA,EAAe5T,SAEnBpC,KAAAiW,MAAe,CACpBC,KAAM,wCACNC,aAAcA,IAAMC,EAAAC,EAAA,8DAAAC,KAAAF,EAAAG,KAAAH,EAAA,OAAgCE,KAAKE,GAAKA,EAAEC,kBAEhEhO,KAAM,CAAEgJ,MAAO,gBAGjB,aAAOiF,CAAOrF,EAAoBE,EAA0BtQ,GAC1D,MAAO,eAAeoQ,KAAcE,KAAWtQ,GACjD,CAEA,gBAAO0V,CAAUtW,GACf,OAAOL,KAAK0W,OAAOpL,KAAanC,SAASyN,IAAIvF,WAAY/F,KAAanC,SAASyN,IAAIrF,QAASlR,EAAM4C,WACpG,CAEA,sBAAO4T,CAAgBhR,GACrB,OAAO7F,KAAK0W,OAAOpL,KAAanC,SAAS2N,UAAUzF,WAAY/F,KAAanC,SAAS2N,UAAUvF,QAAS1L,EAAG5C,WAC7G,CAGA,wBAAO8T,CAAkBrQ,GACvB,OAAO1G,KAAKgX,aAAatQ,EAC3B,CAEA,mBAAOsQ,CAAatQ,GAClB,OAAO1G,KAAK0W,OAAOpL,KAAanC,SAAS8N,OAAO5F,WAAY/F,KAAanC,SAAS8N,OAAO1F,QAAS7K,EACpG,CAEA,qBAAOwQ,CAAerR,GACpB,OAAO7F,KAAK0W,OAAOpL,KAAanC,SAASgO,SAAS9F,WAAY/F,KAAanC,SAASgO,SAAS5F,QAAS1L,EACxG,SAhCWmQ,CAAe,yKCDrB,MAAMoB,EAAkC,CAC7ClW,KAAM,yBACNmW,aAAa,EACbC,UAAW,QACXC,WAAY,KAENC,kBAAY,EAAAC,KAAA,YAChB,MAAQC,8BAA+BC,QAAAC,IAAA,CAAAxB,EAAAC,EAAA,yDAAAD,EAAAC,EAAA,wEAAAD,EAAAC,EAAA,4DAAAD,EAAAC,EAAA,wGAAAD,EAAAC,EAAA,0EAAAC,KAAAF,EAAAG,KAAAH,EAAA,OACvC,OAAOsB,CAAqB,EAFZ,6FCHb,MAAMjB,EAA2B,CACtC,CACEP,KAAM,GACN2B,UAAWC,uBACXrP,KAAM,CAAEoH,OAAQuH,KAChBW,SAAUC,yICNNtU,MAAA,4BADFA,MAAA,cACEA,MAAA,EAAAuU,EAAA,sBACFvU,uCADiBA,cAAA,mBAAAwU,yBAKfxU,MAAA,4BADFA,MAAA,eACEA,MAAA,EAAAyU,EAAA,sBACFzU,uCADiBA,cAAA,mBAAAwU,yBAOrBxU,MAAA,GCDK,IAAMkK,EAAkB,MAAzB,MAAOA,EAIXjL,cAHS3C,KAAAoY,SAAU,EACnBpY,KAAAqY,SAAU,CAEM,CAEhBC,gBACEtY,KAAKqY,SAAWrY,KAAKqY,OACvB,CAACjW,SAAApC,KAAA,mBAAAqC,iBARUuL,EAAkB,EAAAxL,SAAApC,KAAA,UAAAuY,EAAAhR,IAAA,MAAlBqG,EAAkBpG,UAAA,qBAAAgR,OAAA,CAAAJ,QAAA,WAAA1P,YAAA,EAAAC,SAAA,CAAAjF,OAAA+U,mBAAAhM,EAAA7D,MAAA,EAAAC,KAAA,EAAAC,OAAA,2EAAAC,SAAA,SAAApB,EAAAC,GAAA,KAAAD,EAAA,yBDf/BjE,MAAA,WAAsBA,MAAA,mBAAAA,aAAAgV,GAAAhV,MAASkE,EAAA0Q,gBAAe,GAO1C5U,MALA,EAAAiV,EAAA,IAKAjV,CALe,EAAAkV,EAAA,KAWnBlV,QAEAA,MAAA,EAAAmV,EAAA,yBAAAnV,qBAfgDA,MAAA,UAAAA,MAAA,EAAAoV,EAAAlR,EAAAyQ,UAC9C3U,cAAA,QAAAqV,EAAAnR,EAAAwQ,SAAK,GAAL,IAAKW,EAAD,sBCSFhM,KAAkBpJ,UAClB6J,KACAwL,MAAgB7Q,OAAA,+cAGPyF,CAAkB,sCCfxB,MAAMhE,EAAsB,iFCO5B,IAAMiE,EAA6B,MAApC,MAAOA,EAKXlL,cAHA3C,KAAAgQ,OAAMC,KAAS,CAACpC,kCAId7N,KAAKgQ,IAAIiJ,EAAE,cACb,CAGAC,QAAQtO,GACN5K,KAAKgQ,IAAIiJ,EAAE,UAAW,CAAErO,UACxBA,EAAMuO,kBACNvO,EAAMwO,gBACR,CAAChX,SAAApC,KAAA,mBAAAqC,iBAdUwL,EAA6B,EAAAzL,SAAApC,KAAA,UAAA2G,EAAA0S,IAAA,MAA7BxL,EAA6BrG,UAAA,oCAAAE,aAAA,SAAAC,EAAAC,GAAA,EAAAD,GAA7BjE,MAAA,iBAAA8I,GAAA,OAAA5E,EAAAsR,QAAA1M,EAAe,2BAAfqB,CAA6B,2FCEnC,MAAMyL,EAAmB,eACnBC,EAAkB,kBAClBC,EAAwB,8BAG9B,IAAMC,EAA0B,MAAjC,MAAOA,UAAkC5Z,IAE7C6Z,mBACE,OAAO1Z,KAAKC,KAAKC,IAAcF,KAAKG,OAAOmZ,EAAmB,aAAc,CAC1ElZ,OAAQ,CAAEoB,MAAOxB,KAAKK,QAE1B,CAEAsZ,oBACE,OAAO3Z,KAAKC,KACTC,IAAyBF,KAAKG,OAAOmZ,EAAmB,cAAe,CAAElZ,OAAQ,CAAEoB,MAAOxB,KAAKK,SAC/FK,QACCC,KAAIiZ,GACuBA,EAAajZ,IAAIkZ,KAEtCC,SAAUD,EAAOE,KAAKC,UAAU,EAAGH,EAAOE,KAAKE,QAAQ,MACvDC,UAAWL,EAAOE,KAClBI,MAAON,EAAO/P,MACdsQ,YAAaP,EAAOxQ,YACpBgR,UAAWR,EAAOS,UAClBC,WAAYV,EAAOW,WACnBC,cAAeZ,EAAOa,cACtBC,gBAAiBd,EAAOe,gBACxBC,KAAMhB,EAAOS,UAAY,OAAST,EAAOa,cAAgB,eAAiB,SAOtF,CAEAI,mBACE,OAAO9a,KAAKC,KAAKC,IAA4BF,KAAKG,OAAOmZ,EAAmB,iBAC9E,CAGAyB,UAAUvJ,GACR,OAAOxR,KAAKC,KACTC,IAAaF,KAAKG,OAAOoZ,GAAkB,CAC1CnZ,OAAQ,CAAEoB,MAAOxB,KAAKK,MAAON,WAAYyR,KAE1C9Q,QACCC,KAAIqa,IACF,GAAIA,EACF,UAAWC,KAAOD,EAAQ,CACxB,IAAKC,EAAIC,SAAU,SACnB,MAAMC,EAAKF,EAAIC,SAIfC,EAAGC,OAAS,IAHED,EAAGE,OACFF,EAAGF,EAAIlB,SACNoB,EAAGF,EAAIK,YAI3B,OAAON,IAGf,CAGAO,qBACE,OAAOvb,KAAKC,KAAKC,IAAaF,KAAKG,OAAOqZ,GAAwB,CAChEpZ,OAAQ,CAAEoB,MAAOxB,KAAKK,QAE1B,CASAmb,sBAAsBC,GAIpB,OAAOzb,KAAKC,KACTC,IAAaF,KAAKG,OAAOqZ,GAAwB,CAChDpZ,OAAQ,CAAEoB,MAAOxB,KAAKK,MAAOob,YAAaA,EAAYxY,aAE5D,CAEAyY,kBAAkBC,EAA6BC,EAAqCC,EAAyBC,GAC3G,OAAO9b,KAAKC,KAAKsB,KAAavB,KAAKG,OAAOmZ,EAAmB,qBAAsB,KAAM,CACvFlZ,OAAQ,CACNmF,MAAOvF,KAAKK,MACZ0b,cAAeJ,EAAoB1Y,WACnC+Y,WAAYJ,EACZK,YAAaJ,EACb3a,KAAM4a,IAGZ,CAEAI,MAAMT,EAAqBS,GAAiB,GAC1C,OAAOlc,KAAKC,KAAKsB,KAAWvB,KAAKG,OAAOmZ,EAAmB,SAAU,KAAM,CACzElZ,OAAQ,CACNoB,MAAOxB,KAAKK,MACZob,YAAaA,EAAYxY,WACzBiZ,UAGN,CAEAC,QAAQV,EAAqBI,GAC3B,OAAO7b,KAAKC,KAAKsB,KAAWvB,KAAKG,OAAOmZ,EAAmB,WAAY,KAAM,CAC3ElZ,OAAQ,CACNoB,MAAOxB,KAAKK,MACZob,YAAaA,EAAYxY,WACzBmZ,kBAAmBP,IAGzB,CAEAQ,QAAQC,EAAmBhb,GACzB,OAAOtB,KAAKC,KAAKsB,KAAcvB,KAAKG,OAAOmZ,EAAmB,QAAS,KAAM,CAC3ElZ,OAAQ,CACNoB,MAAOxB,KAAKK,MACZC,cAAegB,EAAYwE,GAAG7C,WAC9BsZ,MAAOC,KAAKC,UAAUH,KAG5B,CAEAI,SAASnJ,EAAajS,GACpB,OAAOtB,KAAKC,KAAKsB,KAAWvB,KAAKG,OAAOT,IAAiB,YAAa,KAAM,CAC1EU,OAAQ,CACNoB,MAAOxB,KAAKK,MACZC,cAAegB,EAAYwE,GAAG7C,WAC9BwY,YAAalI,EAAKzN,GAAG7C,aAG3B,CAEA0Z,OAAOC,EAAiBtc,EAAuBwb,GAC7C,OAAO9b,KAAKC,KAAKsB,KAAWvB,KAAKG,OAAOmZ,EAAmB,UAAW,KAAM,CAC1ElZ,OAAQ,CACNoB,MAAOxB,KAAKK,MACZC,cAAeA,EAAc2C,WAC7BwY,YAAamB,EAAQ3Z,WACrB6Y,YAGN,CAEAra,OAAO8R,EAAajS,GAClB,GAAIiS,EAAKsJ,QACP,MAAM,IAAIC,MAAM,sBAGlB,OAAO9c,KAAKC,KAAKwB,OAAgBzB,KAAKG,OAAOmZ,EAAmB,UAAW,CACzElZ,OAAQ,CACNoB,MAAOxB,KAAKK,MACZC,cAAegB,EAAYwE,GAAG7C,WAC9BwY,YAAalI,EAAKzN,GAAG7C,aAG3B,CAEA8Z,IAAIC,EAA0B1c,GAC5B,OAAON,KAAKC,KAAKsB,KAAavB,KAAKG,OAAOmZ,EAAmB,OAAQ,KAAM,CACzElZ,OAAQ,CACNmF,MAAOvF,KAAKK,MACZ0b,cAAezb,EAAc2C,WAC7B6C,GAAIkX,EAASlX,GAAG7C,WAChB8W,KAAMiD,EAASjD,KACfuB,UAAW0B,EAAS1B,UACpB5Z,WAAYsb,EAAStb,WACrBmb,QAASG,EAASH,QAAQ5Z,WAC1Bga,MAAOD,EAASE,UAAUja,aAGhC,CAEAka,gBAAgBtX,EAAY9F,EAAoBma,GAC9C,OAAOla,KAAKC,KAAKsB,KAAcvB,KAAKG,OAAOmZ,EAAmB,aAAc,KAAM,CAChFlZ,OAAQ,CAAEC,MAAOL,KAAKK,MAAOob,YAAa5V,EAAG5C,WAAY8R,MAAOhV,EAAYma,cAEhF,CAAC9X,SAAApC,KAAA,4DAnLUyZ,KAAyBpX,GAAzBoX,EAAyB,GAmLnC,GAnLmCrX,SAAApC,KAAA,WAAAod,EAAA7a,IAAA,OAAzBkX,EAAyBjX,QAAzBiX,EAAyBhX,mBAAzBgX,CAA0B,oBCdjC,SAAUrU,EAASrD,GACvB,OAAO,IAAI4V,QAAQ,CAAC0F,EAASC,KAC3B,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAc1b,GACrBwb,EAAOG,OAAS,KACdL,EAASE,EAAOI,OAAkBC,MAAM,KAAK,GAAE,EAEjDL,EAAOM,QAAUxL,IACfiL,EAAOjL,EAAK,CACd,EAEJ,CAEM,SAAUpP,EAASlB,GACvB,OAAO,IAAI4V,QAAQ,CAAC0F,EAASC,KAC3B,MAAMC,EAAS,IAAIC,WACnBD,EAAOO,WAAW/b,GAClBwb,EAAOG,OAAS,KACdL,EAAQE,EAAOI,OAAgB,EAEjCJ,EAAOM,QAAUxL,IACfiL,EAAOjL,EAAK,CACd,EAEJ","names":["webApiTypeRoot","webApiTypeScopes","ContentTypesService","HttpServiceBase","retrieveContentType","staticName","this","http","get","apiUrl","params","appId","contentTypeId","retrieveContentTypes","scope","getScopes","pipe","map","scopesData","scopes","old","Object","keys","key","name","value","getScopesV2","save","contentType","post","appid","delete","StaticName","import","files","formData","FormData","file","append","zoneId","createGhost","sourceStaticName","static","t","_angular_core__WEBPACK_IMPORTED_MODULE_2__","jDH","factory","Éµfac","ExportAppPartsService","constructor","context","dnnContext","getContentInfo","$2sxc","webApiAppPartsRoot","toString","exportParts","contentTypeIds","entityIds","templateIds","url","join","window","open","i0","i1","i2","i3","ExportAppService","getAppInfo","webApiAppRoot","exportAppUrl","exportForVersionControl","includeContentGroups","resetAppGuid","withFiles","withPortalFiles","ImportAppPartsService","importAppParts","resetApp","webApiQueryRun","webApiQueryDebugStream","webApiQuerySave","webApiQueryGet","webApiQueryDataSources","PipelinesService","getAll","webApiEntityList","importQuery","from","toBase64","switchMap","fileBase64","AppId","ContentBase64","success","Success","Messages","clonePipeline","id","Id","_angular_core__WEBPACK_IMPORTED_MODULE_6__","webApiViewRoot","webApiViews","webApiViewDelete","webApiViewImport","webApiViewPolymorph","webApiViewUsage","ViewsService","export","getPolymorphism","getUsage","guid","_angular_core__WEBPACK_IMPORTED_MODULE_1__","ctx_r0","dialogData","message","ConfirmDeleteDialogComponent","dialogRef","hostClass","closeDialog","confirm","close","MAT_DIALOG_DATA","core","VBU","selectors","hostVars","hostBindings","rf","ctx","ConfirmDeleteDialogComponent_Conditional_4_Template","entityTitle","entityId","MatCardModule","MatButtonModule","SafeHtmlPipe","styles","MetadataActionsComponent","agInit","refresh","deleteMetadata","onDelete","data","standalone","features","decls","vars","consts","template","MatRippleModule","MatIconModule","MetadataContentTypeComponent","metadata","_Type","Description","TippyDirective","scopeOption_r1","MetadataSaveDialogComponent_Conditional_11_For_5_Template","ctx_r1","scopeOptions","length","dropdownInsertValue","contentType_r3","Label","MetadataSaveDialogComponent_Conditional_15_For_2_Template","contentTypes","MetadataSaveDialogComponent","guidedContentType","advancedMode","signal","contentTypesService","transient","ngOnInit","buildForm","fetchScopes","toggleGuidedContentType","toggleAdvancedMode","event","checked","formValues","form","getRawValue","UntypedFormGroup","addControl","UntypedFormControl","Validators","required","eavConstants","default","controls","valueChanges","startWith","distinctUntilChanged","subscribe","newScope","patchValue","prompt","some","option","set","fetchContentTypes","MetadataSaveDialogComponent_Conditional_11_Template","MetadataSaveDialogComponent_Conditional_15_Template","MetadataSaveDialogComponent_Conditional_16_Template","MetadataSaveDialogComponent_Conditional_24_Template","$event","_c0","touched","errors","valid","FormsModule","ReactiveFormsModule","MatFormFieldModule","i4","MatSelectModule","i5","i6","MatOptionModule","MatInputModule","i7","i8","NgClass","i9","MatSlideToggleModule","i10","FieldHintComponent","ClickStopPropagationDirective","itemFor","KeyNumber","KeyGuid","KeyString","Title","MetadataComponent_Conditional_10_Conditional_5_Template","MetadataComponent_Conditional_10_Conditional_6_Template","MetadataComponent_Conditional_10_Conditional_7_Template","MetadataComponent_Conditional_10_Conditional_8_Template","Target","TargetType","_r2","createMetadata","recommendation_r5","Icon","Enabled","_r4","$implicit","MetadataComponent_Conditional_16_For_10_Conditional_1_Template","MetadataComponent_Conditional_16_For_10_Conditional_2_Template","_r3","openChange","MetadataComponent_Conditional_16_For_10_Template","fabOpen","recommendations","MetadataComponent","#entitiesSvc","#metadataSvc","#contentItemSvc","#dialogRoutes","snackBar","dialog","viewContainerRef","changeDetectorRef","log","classLog","EntityEditService","MetadataService","ContentItemsService","DialogRoutingService","gridOptions","#buildGridOptions","undefined","metadataSet","Items","Recommendations","computed","filter","r","i","Count","#params","convert","getParams","p","targetType","parseInt","keyType","contentTypeStaticName","title","decodeURIComponent","getParam","#fetchFor","#fetchMetadata","doOnDialogClosed","recommendation","CreateEmpty","Name","create","For","calculateItemFor","error","duration","next","createMetadataForm","openFeatureDialog","MissingFeature","autoFocus","width","afterClosed","items","formUrl","convertFormToUrl","navRelative","markForCheck","x","EditPrep","constructMetadataInfo","newMetadataFromInfo","item","find","Guid","logGetMetadata","rxTap","getMetadata","take","forEach","startsWith","replace","atob","#editMetadata","editId","#deleteMetadata","confirmed","DeleteWarning","isConfirmed","defaultGridOptions","columnDefs","ColumnDefinitions","IdWithDefaultRenderer","cellRendererParams","idFieldParamsTooltipGetter","TextWide","field","onCellClicked","headerName","valueGetter","cellRenderer","ActionsPinnedRight1","MetadataComponent_Conditional_9_Template","MetadataComponent_Conditional_10_Template","MetadataComponent_Conditional_15_Template","MetadataComponent_Conditional_16_Template","RouterOutlet","SxcGridModule","MatDialogActions","EcoFabSpeedDialComponent","EcoFabSpeedDialTriggerComponent","EcoFabSpeedDialActionsComponent","MatBadgeModule","GoToPermissions","route","path","loadChildren","__webpack_require__","e","then","bind","m","permissionRoutes","getUrl","getUrlApp","app","getUrlAttribute","attribute","getUrlContentType","getUrlEntity","entity","getUrlLanguage","language","permissionsDialog","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","PermissionsComponent","Promise","all","component","DialogEntryComponent","children","EditRoutes","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","isError","isShort","toggleIsShort","_angular_core__WEBPACK_IMPORTED_MODULE_0__","inputs","ngContentSelectors","_r1","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","_c1","tmp_2_0","NgTemplateOutlet","a","onClick","stopPropagation","preventDefault","FsC","webApiFieldsRoot","webApiFieldsAll","webApiFieldsGetShared","ContentTypesFieldsService","typeListRetrieve","getInputTypesList","inputConfigs","config","dataType","Type","substring","indexOf","inputType","label","description","isDefault","IsDefault","isObsolete","IsObsolete","isRecommended","IsRecommended","obsoleteMessage","ObsoleteMessage","icon","getReservedNames","getFields","fields","fld","Metadata","md","merged","All","InputType","getShareableFields","getShareableFieldsFor","attributeId","addInheritedField","targetContentTypeId","sourceContentTypeStaticName","sourceFieldGuid","newName","ContentTypeId","SourceType","SourceField","share","inherit","inheritMetadataOf","reOrder","idArray","order","JSON","stringify","setTitle","rename","fieldId","IsTitle","Error","add","newField","Index","SortOrder","updateInputType","_angular_core__WEBPACK_IMPORTED_MODULE_3__","resolve","reject","reader","FileReader","readAsDataURL","onload","result","split","onerror","readAsText"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/services/content-types.service.ts","./projects/eav-ui/src/app/app-administration/services/export-app-parts.service.ts","./projects/eav-ui/src/app/app-administration/services/export-app.service.ts","./projects/eav-ui/src/app/app-administration/services/import-app-parts.service.ts","./projects/eav-ui/src/app/app-administration/services/pipelines.service.ts","./projects/eav-ui/src/app/app-administration/services/views.service.ts","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.html","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.html","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata.component.html","./projects/eav-ui/src/app/metadata/metadata.component.ts","./projects/eav-ui/src/app/permissions/go-to-permissions.ts","./projects/eav-ui/src/app/permissions/permissions-dialog.config.ts","./projects/eav-ui/src/app/permissions/permissions.routing.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/constants/dropdown-insert-value.constant.ts","./projects/eav-ui/src/app/shared/directives/click-stop-propagation.directive.ts","./projects/eav-ui/src/app/shared/fields/content-types-fields.service.ts","./projects/eav-ui/src/app/shared/helpers/file-to-base64.helper.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { ContentType, ContentTypeEdit } from '../models/content-type.model';\r\nimport { ScopeDetailsDto } from '../models/scopedetails.dto';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\n\r\n// We should list all the \"full\" paths here, so it's easier to find when searching for API calls\r\nexport const webApiTypeRoot = 'admin/type/';\r\nconst webApiTypeGet = 'admin/type/get';\r\nconst webApiTypes = 'admin/type/list';\r\nconst webApiTypeScopes = 'admin/type/scopes';\r\nconst webApiTypeSave = 'admin/type/save';\r\nconst webApiTypeDelete = 'admin/type/delete';\r\nconst webApiTypeImport = 'admin/type/import';\r\nconst webApiTypeAddGhost = 'admin/type/addghost';\r\n\r\n@Injectable()\r\nexport class ContentTypesService extends HttpServiceBase {\r\n\r\n  retrieveContentType(staticName: string) {\r\n    return this.http.get<ContentType>(this.apiUrl(webApiTypeGet), {\r\n      params: { appId: this.appId, contentTypeId: staticName }\r\n    });\r\n  }\r\n\r\n  retrieveContentTypes(scope: string) {\r\n    return this.http.get<ContentType[]>(this.apiUrl(webApiTypes), {\r\n      params: { appId: this.appId, scope }\r\n    });\r\n  }\r\n\r\n  // TODO: remove this method after upgrade to V2\r\n  getScopes() {\r\n    return this.http.get<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(this.apiUrl(webApiTypeScopes), {\r\n      params: { appId: this.appId }\r\n    }).pipe(\r\n      map(scopesData => {\r\n        // wip during upgrade:\r\n        const scopes = scopesData.old;\r\n        const scopeOptions: ScopeOption[] = Object.keys(scopes).map(key => ({ name: scopes[key], value: key }));\r\n        return scopeOptions;\r\n      }),\r\n    );\r\n  }\r\n\r\n  getScopesV2() {\r\n    return this.http.get<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(this.apiUrl(webApiTypeScopes), {\r\n      params: { appId: this.appId }\r\n    }).pipe(\r\n      map(scopesData => scopesData.scopes),\r\n    );\r\n  }\r\n\r\n  save(contentType: ContentTypeEdit) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiTypeSave), contentType, {\r\n      params: { appid: this.appId },\r\n    });\r\n  }\r\n\r\n  delete(contentType: ContentType) {\r\n    return this.http.delete<boolean>(this.apiUrl(webApiTypeDelete), {\r\n      params: { appid: this.appId, staticName: contentType.StaticName },\r\n    });\r\n  }\r\n\r\n  import(files: File[]) {\r\n    const formData = new FormData();\r\n    for (const file of files) {\r\n      formData.append('File', file);\r\n    }\r\n    return this.http.post<FileUploadResult>(this.apiUrl(webApiTypeImport), formData, {\r\n      params: { appId: this.appId, zoneId: this.zoneId },\r\n    });\r\n  }\r\n\r\n  createGhost(sourceStaticName: string) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiTypeAddGhost), null, {\r\n      params: { appid: this.appId, sourceStaticName },\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Context } from '../../shared/services/context';\r\nimport { ContentInfo } from '../models/content-info.model';\r\nimport { webApiAppPartsRoot } from './import-app-parts.service';\r\n\r\n@Injectable()\r\nexport class ExportAppPartsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getContentInfo(scope: string) {\r\n    return this.http.get<ContentInfo>(this.dnnContext.$2sxc.http.apiUrl(webApiAppPartsRoot + 'Get'), {\r\n      params: { appid: this.context.appId.toString(), zoneId: this.context.zoneId.toString(), scope },\r\n    });\r\n  }\r\n\r\n  exportParts(contentTypeIds: number[], entityIds: number[], templateIds: number[]) {\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(webApiAppPartsRoot + 'Export')\r\n      + '?appId=' + this.context.appId.toString()\r\n      + '&zoneId=' + this.context.zoneId.toString()\r\n      + '&contentTypeIdsString=' + contentTypeIds.join(';')\r\n      + '&entityIdsString=' + entityIds.join(';')\r\n      + '&templateIdsString=' + templateIds.join(';');\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { Context } from '../../shared/services/context';\r\nimport { AppInfo } from '../models/app-info.model';\r\n\r\n@Injectable()\r\nexport class ExportAppService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAppInfo() {\r\n    return this.http.get<AppInfo>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'Statistics'), {\r\n      params: { appid: this.context.appId.toString(), zoneId: this.context.zoneId.toString() },\r\n    });\r\n  }\r\n\r\n  /** Generate the export app path. It can be extended with additional parameters */\r\n  exportAppUrl() {\r\n    return `${this.dnnContext.$2sxc.http.apiUrl(`${webApiAppRoot}Export`)}?appId=${this.context.appId}&zoneId=${this.context.zoneId}`;\r\n  }\r\n\r\n  exportForVersionControl({ includeContentGroups, resetAppGuid, withFiles }:\r\n    { includeContentGroups: boolean; resetAppGuid: boolean; withFiles: boolean; }) {\r\n    return this.http.get<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'SaveData'), {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        zoneId: this.context.zoneId.toString(),\r\n        includeContentGroups: includeContentGroups.toString(),\r\n        resetAppGuid: resetAppGuid.toString(),\r\n        withPortalFiles: withFiles.toString(),\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\n\r\nexport const webApiAppPartsRoot = 'admin/appParts/';\r\n\r\n@Injectable()\r\nexport class ImportAppPartsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  importAppParts(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiAppPartsRoot + 'Import'), formData, {\r\n      params: { appId: this.context.appId.toString(), zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  /** Reset the App back to the state it was in the last xml export */\r\n  resetApp(withFiles: boolean) {\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'Reset'), {}, {\r\n      params: {\r\n        appId: this.context.appId.toString(),\r\n        zoneId: this.context.zoneId.toString(),\r\n        withPortalFiles: withFiles.toString(),\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { Context } from '../../shared/services/context';\r\nimport { Query } from '../models/query.model';\r\nimport { webApiEntityList } from '../../shared/services/entity.service';\r\n\r\nconst webApiQueryImport = 'admin/query/import';\r\nconst webApiQueryClone = 'admin/query/Clone';\r\nconst webApiQueryDelete = 'admin/query/Delete';\r\nexport const webApiQueryRun = 'admin/query/Run';\r\nexport const webApiQueryDebugStream = 'admin/query/DebugStream';\r\nexport const webApiQuerySave = 'admin/query/Save';\r\nexport const webApiQueryGet = 'admin/query/Get';\r\nexport const webApiQueryDataSources = 'admin/query/DataSources';\r\n\r\n@Injectable()\r\nexport class PipelinesService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAll(contentType: string) {\r\n    return this.http.get<Query[]>(this.dnnContext.$2sxc.http.apiUrl(webApiEntityList), {\r\n      params: { appId: this.context.appId.toString(), contentType }\r\n    });\r\n  }\r\n\r\n  importQuery(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryImport), {\r\n          AppId: this.context.appId.toString(),\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n\r\n  clonePipeline(id: number) {\r\n    return this.http.get<null>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryClone), {\r\n      params: { Id: id.toString(), appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.http.delete<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryDelete), {\r\n      params: { appId: this.context.appId.toString(), Id: id.toString() },\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { ViewUsage } from '../models/view-usage.model';\r\nimport { View } from '../models/view.model';\r\n\r\nconst webApiViewRoot = 'admin/view/';\r\nconst webApiViews = webApiViewRoot + 'all';\r\nconst webApiViewDelete = webApiViewRoot + 'delete';\r\nconst webApiViewImport = webApiViewRoot + 'import';\r\nconst webApiViewPolymorph = webApiViewRoot + 'polymorphism';\r\nconst webApiViewUsage = webApiViewRoot + 'usage';\r\n\r\n@Injectable()\r\nexport class ViewsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAll() {\r\n    return this.http.get<View[]>(this.dnnContext.$2sxc.http.apiUrl(webApiViews), {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.http.get<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiViewDelete), {\r\n      params: { appId: this.context.appId.toString(), Id: id.toString() },\r\n    });\r\n  }\r\n\r\n  import(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiViewImport), formData, {\r\n      params: { appId: this.context.appId.toString(), zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  export(id: number) {\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(webApiViewRoot + 'json')\r\n      + '?appId=' + this.context.appId\r\n      + '&viewId=' + id;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  getPolymorphism() {\r\n    return this.http.get<Polymorphism>(this.dnnContext.$2sxc.http.apiUrl(webApiViewPolymorph), {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  getUsage(guid: string) {\r\n    return this.http.get<ViewUsage[]>(this.dnnContext.$2sxc.http.apiUrl(webApiViewUsage), {\r\n      params: { appId: this.context.appId.toString(), guid }\r\n    });\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Delete {{ dialogData.entityTitle }} ({{ dialogData.entityId }})?</mat-card-title>\r\n    @if (dialogData.message) {\r\n      <mat-card-subtitle [innerHtml]=\"dialogData.message | safeHtml\"></mat-card-subtitle>\r\n    }\r\n  </mat-card-header>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog(true)\">Delete</button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { Component, HostBinding, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog.models';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { SafeHtmlPipe } from '../../shared/pipes/safe-html.pipe';\r\n\r\n@Component({\r\n  selector: 'app-confirm-delete-dialog',\r\n  templateUrl: './confirm-delete-dialog.component.html',\r\n  styleUrls: ['./confirm-delete-dialog.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatCardModule,\r\n    MatButtonModule,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class ConfirmDeleteDialogComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: ConfirmDeleteDialogData,\r\n    private dialogRef: MatDialogRef<ConfirmDeleteDialogComponent>,\r\n  ) { }\r\n\r\n  closeDialog(confirm?: boolean) {\r\n    this.dialogRef.close(confirm);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { MetadataActionsParams } from './metadata-actions.models';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatRippleModule } from '@angular/material/core';\r\n\r\n@Component({\r\n  selector: 'app-metadata-actions',\r\n  templateUrl: './metadata-actions.component.html',\r\n  styleUrls: ['./metadata-actions.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n  ],\r\n})\r\nexport class MetadataActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & MetadataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & MetadataActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deleteMetadata(): void {\r\n    const metadata: MetadataItem = this.params.data;\r\n    this.params.onDelete(metadata);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deleteMetadata()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n  selector: 'app-metadata-content-type',\r\n  templateUrl: './metadata-content-type.component.html',\r\n  styleUrls: ['./metadata-content-type.component.scss'],\r\n  standalone: true,\r\n  imports: [TippyDirective,],\r\n})\r\nexport class MetadataContentTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  metadata: MetadataItem;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.metadata = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"container\" [tippy]=\"metadata._Type.Description\" [tippyDisabled]=\"!metadata._Type.Description\">\r\n  {{ value }}\r\n</div>\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Create Metadata</mat-card-title>\r\n    <mat-card-subtitle>\r\n      This is a special operation to add an item which is metadata for another item,\r\n      see <a href=\"https://go.2sxc.org/metadata\" target=\"_blank\">docs</a>.\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Scope -->\r\n      @if (advancedMode && guidedContentType) {\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Scope</mat-label>\r\n        <mat-select formControlName=\"scope\" [placeholder]=\"!scopeOptions().length ? 'No items found' : ''\">\r\n          @for (scopeOption of scopeOptions(); track scopeOption) {\r\n          <mat-option [value]=\"scopeOption.value\">\r\n            {{ scopeOption.name }}\r\n          </mat-option>\r\n          }\r\n          <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      <app-field-hint>\r\n        The scope should almost never be changed -\r\n        <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n      </app-field-hint>\r\n      }\r\n      <!-- Content Type of metadata item -->\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Content Type</mat-label>\r\n        @if (guidedContentType) {\r\n        <mat-select formControlName=\"contentType\" required\r\n          [placeholder]=\"!contentTypes().length ? 'No items found' : ''\">\r\n          @for (contentType of contentTypes(); track contentType) {\r\n          <mat-option [value]=\"contentType.StaticName\">\r\n            {{ contentType.Label }}\r\n          </mat-option>\r\n          }\r\n        </mat-select>\r\n        }\r\n        @if (!guidedContentType) {\r\n        <input matInput type=\"text\" formControlName=\"contentType\" required>\r\n        }\r\n        <div matTextSuffix>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': guidedContentType }\" tippy=\"Pick existing value\"\r\n            (click)=\"toggleGuidedContentType(true)\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': !guidedContentType }\" tippy=\"Manual entry\"\r\n            (click)=\"toggleGuidedContentType(false)\">\r\n            <mat-icon>text_fields</mat-icon>\r\n          </button>\r\n        </div>\r\n      </mat-form-field>\r\n      @if (form.controls.contentType.touched && form.controls.contentType.errors?.required) {\r\n      <app-field-hint [isError]=\"true\">\r\n        This field is required\r\n      </app-field-hint>\r\n      }\r\n    </form>\r\n  </mat-card-content>\r\n  <mat-card-actions class=\"eav-card-actions\">\r\n    <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n      {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n    </mat-slide-toggle>\r\n    <div>\r\n      <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n      <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\"\r\n        (click)=\"confirm()\">\r\n        Confirm\r\n      </button>\r\n    </div>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { Component, HostBinding, OnInit, signal } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators, FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { distinctUntilChanged, startWith } from 'rxjs';\r\nimport { ContentType } from '../../app-administration/models';\r\nimport { ContentTypesService } from '../../app-administration/services';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { MetadataSaveFormValues } from './metadata-save-dialog.models';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgClass } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { transient } from '../../core';\r\n\r\n@Component({\r\n  selector: 'app-metadata-save-dialog',\r\n  templateUrl: './metadata-save-dialog.component.html',\r\n  styleUrls: ['./metadata-save-dialog.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatCardModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatInputModule,\r\n    MatButtonModule,\r\n    NgClass,\r\n    MatIconModule,\r\n    MatSlideToggleModule,\r\n    FieldHintComponent,\r\n    ClickStopPropagationDirective,\r\n  ]\r\n})\r\nexport class MetadataSaveDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  guidedContentType = true;\r\n  advancedMode = false;\r\n\r\n  contentTypes = signal<ContentType[]>([]);\r\n  scopeOptions = signal<ScopeOption[]>([]);\r\n\r\n  private contentTypesService = transient(ContentTypesService);\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<MetadataSaveDialogComponent>,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n    this.fetchScopes();\r\n  }\r\n\r\n  closeDialog(contentType?: string): void {\r\n    this.dialogRef.close(contentType);\r\n  }\r\n\r\n  toggleGuidedContentType(guidedContentType: boolean): void {\r\n    this.guidedContentType = guidedContentType;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: MetadataSaveFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.contentType);\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({});\r\n    this.form.addControl('contentType', new UntypedFormControl(null, [Validators.required]));\r\n    this.form.addControl('scope', new UntypedFormControl(eavConstants.scopes.default.value));\r\n\r\n    this.form.controls.scope.valueChanges.pipe(\r\n      startWith(this.form.controls.scope.value),\r\n      distinctUntilChanged(),\r\n    ).subscribe((newScope: string) => {\r\n      // reset content types when scope changes\r\n      if (this.form.controls.contentType.value != null) {\r\n        this.form.controls.contentType.patchValue(null);\r\n      }\r\n\r\n      // add new scope on manual entry\r\n      if (newScope === dropdownInsertValue) {\r\n        newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n        if (!this.scopeOptions().some(option => option.value === newScope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: newScope,\r\n            value: newScope,\r\n          };\r\n          this.scopeOptions.set([newScopeOption, ...this.scopeOptions()]);\r\n        }\r\n        this.form.controls.scope.patchValue(newScope);\r\n      } else {\r\n        this.fetchContentTypes(newScope);\r\n      }\r\n    });\r\n  }\r\n\r\n  private fetchContentTypes(scope: string): void {\r\n    this.contentTypesService.retrieveContentTypes(scope).subscribe(contentTypes => {\r\n      this.contentTypes.set(contentTypes);\r\n    });\r\n  }\r\n\r\n  private fetchScopes(): void {\r\n    this.contentTypesService.getScopes().subscribe(scopes => {\r\n      this.scopeOptions.set(scopes);\r\n    });\r\n  }\r\n}\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      {{ title || 'Metadata' }}\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content nav-component-wrapper\">\r\n    <p>\r\n      @if (!itemFor()) {\r\n      This item is not metadata for anything else.\r\n      }\r\n      @else {\r\n      This item is metadata for:\r\n      <br>Target: {{ itemFor().Target }}\r\n      <br>TargetType: {{ itemFor().TargetType }}\r\n      @if (itemFor().KeyNumber) {\r\n      <br>Key Number: {{ itemFor().KeyNumber }}\r\n      }\r\n      @if (itemFor().KeyGuid) {\r\n      <br>Key Guid: {{ itemFor().KeyGuid }}\r\n      }\r\n      @if (itemFor().KeyString) {\r\n      <br>Key String: {{ itemFor().KeyString }}\r\n      }\r\n      @if (itemFor().Title) {\r\n      <br>Title: {{ itemFor().Title }}\r\n      }\r\n      }\r\n    </p>\r\n    <router-outlet></router-outlet>\r\n    <div class=\"grid-wrapper\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"metadataSet().Items\" [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    </div>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    @if (recommendations().length === 0) {\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new metadata for this item\"\r\n      (click)=\"createMetadata()\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    }\r\n    @if (recommendations().length > 0) {\r\n    <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': fabOpen() }\"\r\n      (openChange)=\"openChange($event)\">\r\n      <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n        <button mat-fab>\r\n          <mat-icon class=\"spin180\">{{ fabOpen() ? 'close' : 'add' }}</mat-icon>\r\n        </button>\r\n      </eco-fab-speed-dial-trigger>\r\n      <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n        <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Other Content Type\"\r\n          (click)=\"createMetadata()\">\r\n          <mat-icon>search</mat-icon>\r\n        </button>\r\n        @for (recommendation of recommendations(); track recommendation) {\r\n        <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" [attr.label]=\"recommendation.Title\"\r\n          (click)=\"createMetadata(recommendation)\">\r\n          @if (recommendation.Icon) {\r\n          <div style=\"color: white; fill: white;\" [innerHTML]=\"recommendation.Icon | safeHtml\"\r\n            [matBadgeHidden]=\"recommendation.Enabled\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadge=\"ð\"\r\n            matBadgePosition=\"below after\" aria-hidden=\"false\"></div>\r\n          } @else {\r\n          <mat-icon>add</mat-icon>\r\n          }\r\n        </button>\r\n        }\r\n      </eco-fab-speed-dial-actions>\r\n    </eco-fab-speed-dial>\r\n    }\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { ChangeDetectorRef, Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef, MatDialogActions } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { map, Observable, take } from 'rxjs';\r\nimport { ContentItemsService } from '../content-items/services/content-items.service';\r\nimport { EntityEditService } from '../shared/services/entity-edit.service';\r\nimport { EavForInAdminUi } from '../edit/shared/models/eav';\r\nimport { MetadataService } from '../permissions';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { MetadataKeyType } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { EditForm, EditPrep, ItemAddIdentifier } from '../shared/models/edit-form.model';\r\nimport { ConfirmDeleteDialogComponent } from './confirm-delete-dialog/confirm-delete-dialog.component';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { MetadataActionsComponent } from './metadata-actions/metadata-actions.component';\r\nimport { MetadataActionsParams } from './metadata-actions/metadata-actions.models';\r\nimport { MetadataContentTypeComponent } from './metadata-content-type/metadata-content-type.component';\r\nimport { MetadataSaveDialogComponent } from './metadata-save-dialog/metadata-save-dialog.component';\r\nimport { MetadataDto, MetadataItem, MetadataRecommendation } from './models/metadata.model';\r\nimport { openFeatureDialog } from '../features/shared/base-feature.component';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { NgClass } from '@angular/common';\r\nimport { EcoFabSpeedDialComponent, EcoFabSpeedDialTriggerComponent, EcoFabSpeedDialActionsComponent } from '@ecodev/fab-speed-dial';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { SafeHtmlPipe } from '../shared/pipes/safe-html.pipe';\r\nimport { convert, transient } from '../core';\r\nimport { DialogRoutingService } from '../shared/routing/dialog-routing.service';\r\nimport { classLog } from '../shared/logging';\r\n\r\n@Component({\r\n  selector: 'app-metadata',\r\n  templateUrl: './metadata.component.html',\r\n  styleUrls: ['./metadata.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    SxcGridModule,\r\n    MatDialogActions,\r\n    EcoFabSpeedDialComponent,\r\n    NgClass,\r\n    EcoFabSpeedDialTriggerComponent,\r\n    EcoFabSpeedDialActionsComponent,\r\n    MatBadgeModule,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class MetadataComponent implements OnInit {\r\n\r\n  log = classLog({MetadataComponent});\r\n\r\n  #entitiesSvc = transient(EntityEditService);\r\n  #metadataSvc = transient(MetadataService);\r\n  #contentItemSvc = transient(ContentItemsService);\r\n  #dialogRoutes = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<MetadataComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) { }\r\n\r\n  gridOptions = this.#buildGridOptions();\r\n\r\n  fabOpen = signal(false);\r\n  itemFor = signal<EavForInAdminUi | undefined>(undefined);\r\n\r\n  metadataSet = signal<MetadataDto>({ Items: [], Recommendations: [] } as MetadataDto);\r\n\r\n  recommendations = computed(() => {\r\n    const metadata = this.metadataSet();\r\n    return metadata.Recommendations.filter(r =>\r\n      metadata.Items.filter(i => i._Type.Id === r.Id).length < r.Count\r\n    );\r\n  });\r\n\r\n  #params = convert(this.#dialogRoutes.getParams(['targetType', 'keyType', 'key', 'title', 'contentTypeStaticName']), p => ({\r\n    targetType: parseInt(p.targetType, 10),\r\n    keyType: p.keyType as MetadataKeyType,\r\n    key: p.key,\r\n    contentTypeStaticName: p.contentTypeStaticName,\r\n  }));\r\n  protected title = decodeURIComponent(this.#dialogRoutes.getParam('title') ?? '');\r\n\r\n  ngOnInit() {\r\n    this.#fetchFor();\r\n    this.#fetchMetadata();\r\n    this.#dialogRoutes.doOnDialogClosed(() => this.#fetchMetadata());\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  openChange(open: boolean) {\r\n    this.fabOpen.set(open);\r\n  }\r\n\r\n  createMetadata(recommendation?: MetadataRecommendation) {\r\n    if (recommendation) {\r\n      // If the feature is not enabled, open the info dialog instead of metadata\r\n      if (!recommendation.Enabled) {\r\n        openFeatureDialog(this.dialog, recommendation.MissingFeature, this.viewContainerRef, this.changeDetectorRef);\r\n        return;\r\n      }\r\n      // Feature is enabled, check if it's an empty metadata\r\n      if (recommendation.CreateEmpty) {\r\n        this.snackBar.open(`Creating ${recommendation.Name}...`);\r\n        this.#entitiesSvc.create(recommendation.Id, { For: this.calculateItemFor('dummy').For }).subscribe({\r\n          error: () => {\r\n            this.snackBar.open(`Creating ${recommendation.Name} failed. Please check console for more info`, undefined, { duration: 3000 });\r\n            this.#fetchMetadata();\r\n          },\r\n          next: () => {\r\n            this.snackBar.open(`Created ${recommendation.Name}`, undefined, { duration: 3000 });\r\n            this.#fetchMetadata();\r\n          },\r\n        });\r\n      } else {\r\n        // Default case - open new-metadata dialog\r\n        this.createMetadataForm(recommendation.Id);\r\n      }\r\n      return;\r\n    }\r\n    const metadataDialogRef = this.dialog.open(MetadataSaveDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    metadataDialogRef.afterClosed().subscribe((contentType?: string) => {\r\n      if (contentType == null) return;\r\n      this.createMetadataForm(contentType);\r\n    });\r\n  }\r\n\r\n  private createMetadataForm(contentType: string) {\r\n    const form: EditForm = {\r\n      items: [this.calculateItemFor(contentType)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private calculateItemFor(contentType: string): ItemAddIdentifier {\r\n    const x = EditPrep.constructMetadataInfo(this.#params.targetType, this.#params.keyType, this.#params.key);\r\n    return EditPrep.newMetadataFromInfo(contentType, x);\r\n  }\r\n\r\n  #fetchFor() {\r\n    if (!this.#params.contentTypeStaticName) return;\r\n\r\n    this.#contentItemSvc.getAll(this.#params.contentTypeStaticName).subscribe(items => {\r\n      const item = items.find(i => i.Guid === this.#params.key);\r\n      if (item?.For)\r\n        this.itemFor.set(item.For);\r\n    });\r\n  }\r\n\r\n  #fetchMetadata() {\r\n    const logGetMetadata = this.log.rxTap('getMetadata');\r\n    this.#metadataSvc.getMetadata(this.#params.targetType, this.#params.keyType, this.#params.key)\r\n      .pipe(\r\n        logGetMetadata.pipe(),\r\n        take(1),\r\n        map(metadata => {\r\n          metadata.Recommendations.forEach(r => {\r\n            if (r.Icon?.startsWith('base64:')) {\r\n              r.Icon = r.Icon.replace('base64:', '');\r\n              r.Icon = window.atob(r.Icon);\r\n              // used for coloring black icons to white\r\n              r.Icon = r.Icon.replace('fill=\"#000000\"', 'fill=\"#ffffff\"');\r\n            }\r\n          });\r\n          return metadata;\r\n        }),\r\n        logGetMetadata.map(),\r\n      )\r\n      // 2024-05-30 2dm - this standard shorthand seems to fail\r\n      // for reasons unknown to me. I've replaced it with the longhand\r\n      // The problem occurs when the metadataSet$ is updated after the initial load.\r\n      // .subscribe(this.metadataSet$);\r\n      .subscribe(data => {\r\n        this.metadataSet.set(data);\r\n      }\r\n      );\r\n  }\r\n\r\n  #editMetadata(metadata: MetadataItem) {\r\n    const form: EditForm = {\r\n      items: [EditPrep.editId(metadata.Id)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #deleteMetadata(metadata: MetadataItem, confirmed = false) {\r\n    if (!confirmed) {\r\n      const data: ConfirmDeleteDialogData = {\r\n        entityId: metadata.Id,\r\n        entityTitle: metadata.Title,\r\n        message: this.metadataSet().Recommendations.find(r => r.Id === metadata._Type.Id)?.DeleteWarning,\r\n      };\r\n      const confirmationDialogRef = this.dialog.open(ConfirmDeleteDialogComponent, {\r\n        autoFocus: false,\r\n        data,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n      confirmationDialogRef.afterClosed().subscribe((isConfirmed: boolean) => {\r\n        if (isConfirmed)\r\n          this.#deleteMetadata(metadata, true);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.snackBar.open('Deleting...');\r\n    this.#entitiesSvc.delete(metadata._Type.Id, metadata.Id, false).subscribe({\r\n      next: () => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.#fetchMetadata();\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Delete failed. Please check console for more information', null, { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          cellRendererParams: ColumnDefinitions.idFieldParamsTooltipGetter<MetadataItem>()\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Title',\r\n          onCellClicked: (p: { data: MetadataItem }) => this.#editMetadata(p.data),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          valueGetter: (p: { data: MetadataItem }) => `${p.data._Type.Name}${p.data._Type.Title !== p.data._Type.Name ? ` (${p.data._Type.Title})` : ''}`,\r\n          cellRenderer: MetadataContentTypeComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: MetadataActionsComponent,\r\n          cellRendererParams: (() => ({\r\n            onDelete: (metadata) => this.#deleteMetadata(metadata),\r\n          } satisfies MetadataActionsParams))(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","import { Route } from '@angular/router';\r\nimport { eavConstants, MetadataKeyType } from '../shared/constants/eav.constants';\r\n\r\nexport class GoToPermissions {\r\n\r\n  static route: Route = {\r\n    path: 'permissions/:targetType/:keyType/:key',\r\n    loadChildren: () => import('./permissions.routing').then(m => m.permissionRoutes),\r\n    // loadChildren: () => import('./permissions.module').then(m => m.PermissionsModule),\r\n    data: { title: 'Permissions' },\r\n  };\r\n\r\n  static getUrl(targetType: number, keyType: MetadataKeyType, key: string): string {\r\n    return `permissions/${targetType}/${keyType}/${key}`;\r\n  }\r\n\r\n  static getUrlApp(appId: number): string {\r\n    return this.getUrl(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, appId.toString());\r\n  }\r\n\r\n  static getUrlAttribute(id: number): string {\r\n    return this.getUrl(eavConstants.metadata.attribute.targetType, eavConstants.metadata.attribute.keyType, id.toString());\r\n  }\r\n\r\n  /** For historic reasons, it's the same as Entity */\r\n  static getUrlContentType(guid: string): string {\r\n    return this.getUrlEntity(guid);\r\n  }\r\n\r\n  static getUrlEntity(guid: string): string {\r\n    return this.getUrl(eavConstants.metadata.entity.targetType, eavConstants.metadata.entity.keyType, guid);\r\n  }\r\n\r\n  static getUrlLanguage(id: string): string {\r\n    return this.getUrl(eavConstants.metadata.language.targetType, eavConstants.metadata.language.keyType, id);\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const permissionsDialog: DialogConfig = {\r\n  name: 'SET_PERMISSIONS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { PermissionsComponent } = await import('./permissions.component');\r\n    return PermissionsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { permissionsDialog } from './permissions-dialog.config';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\n\r\nexport const permissionRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: permissionsDialog },\r\n    children: EditRoutes\r\n  },\r\n];\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, Input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatFormFieldModule,\r\n    NgClass,\r\n    NgTemplateOutlet\r\n  ]\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","export const dropdownInsertValue = 'DROPDOWN_INSERT_VALUE' as const;\r\n","import { Directive, HostListener } from '@angular/core';\r\nimport { classLog } from '../logging';\r\n\r\n@Directive({\r\n  selector: '[appClickStopPropagation]',\r\n  standalone: true,\r\n})\r\nexport class ClickStopPropagationDirective {\r\n\r\n  log = classLog({ClickStopPropagationDirective});\r\n\r\n  // Log constructor to detect that it was really attached/created\r\n  constructor() {\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    this.log.a('onClick', { event });\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { ContentType } from '../../app-administration/models/content-type.model';\r\nimport { webApiTypeRoot } from '../../app-administration/services/content-types.service';\r\nimport { Field, FieldInputTypeOption } from './field.model';\r\nimport { InputTypeMetadata } from './input-type-metadata.model';\r\nimport { InputTypeStrict } from './input-type-catalog';\r\nimport { HttpServiceBase } from '../services/http-service-base';\r\n\r\nexport const webApiFieldsRoot = 'admin/field/';\r\nexport const webApiFieldsAll = 'admin/field/all';\r\nexport const webApiFieldsGetShared = 'admin/field/GetSharedFields';\r\n\r\n@Injectable()\r\nexport class ContentTypesFieldsService extends HttpServiceBase {\r\n\r\n  typeListRetrieve() {\r\n    return this.http.get<string[]>(this.apiUrl(webApiFieldsRoot + 'DataTypes'), {\r\n      params: { appid: this.appId }\r\n    });\r\n  }\r\n\r\n  getInputTypesList() {\r\n    return this.http\r\n      .get<InputTypeMetadata[]>(this.apiUrl(webApiFieldsRoot + 'InputTypes'), { params: { appid: this.appId } })\r\n      .pipe(\r\n        map(inputConfigs => {\r\n          const inputTypeOptions = inputConfigs.map(config => {\r\n            const option: FieldInputTypeOption = {\r\n              dataType: config.Type.substring(0, config.Type.indexOf('-')),\r\n              inputType: config.Type,\r\n              label: config.Label,\r\n              description: config.Description,\r\n              isDefault: config.IsDefault,\r\n              isObsolete: config.IsObsolete,\r\n              isRecommended: config.IsRecommended,\r\n              obsoleteMessage: config.ObsoleteMessage,\r\n              icon: config.IsDefault ? 'star' : config.IsRecommended ? 'star_outline' : null,\r\n            };\r\n            return option;\r\n          });\r\n          return inputTypeOptions;\r\n        }),\r\n      );\r\n  }\r\n\r\n  getReservedNames() {\r\n    return this.http.get<Record<string, string>>(this.apiUrl(webApiFieldsRoot + 'ReservedNames'));\r\n  }\r\n\r\n  /** Get all fields for some content type */\r\n  getFields(contentTypeStaticName: string) {\r\n    return this.http\r\n      .get<Field[]>(this.apiUrl(webApiFieldsAll), {\r\n        params: { appid: this.appId, staticName: contentTypeStaticName },\r\n      })\r\n      .pipe(\r\n        map(fields => {\r\n          if (fields) {\r\n            for (const fld of fields) {\r\n              if (!fld.Metadata) continue;\r\n              const md = fld.Metadata;\r\n              const allMd = md.All;\r\n              const typeMd = md[fld.Type];\r\n              const inputMd = md[fld.InputType];\r\n              md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n            }\r\n          }\r\n          return fields;\r\n        }),\r\n      );\r\n  }\r\n\r\n  /** Get all possible sharable fields for a new sharing */\r\n  getShareableFields() {\r\n    return this.http.get<Field[]>(this.apiUrl(webApiFieldsGetShared), {\r\n      params: { appid: this.appId },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get sharable fields which are possible for this attribute.\r\n   * \r\n   * Reason is that eg. a bool-attribute can only receive metadata from a bool attribute, etc.\r\n   * \r\n   * @param attributeId the existing attributeId which will receive the new metadata\r\n   */\r\n  getShareableFieldsFor(attributeId: number) {\r\n    // TODO: @SDV - do the same as in getShareableFields()\r\n    // but add parameter attributeId to the webapi call\r\n    // I'll create the backend afterwards\r\n    return this.http\r\n      .get<Field[]>(this.apiUrl(webApiFieldsGetShared), {\r\n        params: { appid: this.appId, attributeId: attributeId.toString() },\r\n      });\r\n  }\r\n\r\n  addInheritedField(targetContentTypeId: number, sourceContentTypeStaticName: string, sourceFieldGuid: string, newName: string) {\r\n    return this.http.post<number>(this.apiUrl(webApiFieldsRoot + 'AddInheritedField'), null, {\r\n      params: {\r\n        AppId: this.appId,\r\n        ContentTypeId: targetContentTypeId.toString(),\r\n        SourceType: sourceContentTypeStaticName,\r\n        SourceField: sourceFieldGuid,\r\n        name: newName,\r\n      }\r\n    });\r\n  }\r\n\r\n  share(attributeId: number, share: boolean = true) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Share'), null, {\r\n      params: {\r\n        appid: this.appId,\r\n        attributeId: attributeId.toString(),\r\n        share,\r\n      },\r\n    });\r\n  }\r\n\r\n  inherit(attributeId: number, sourceFieldGuid: string) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Inherit'), null, {\r\n      params: {\r\n        appid: this.appId,\r\n        attributeId: attributeId.toString(),\r\n        inheritMetadataOf: sourceFieldGuid,\r\n      },\r\n    });\r\n  }\r\n\r\n  reOrder(idArray: number[], contentType: ContentType) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiFieldsRoot + 'Sort'), null, {\r\n      params: {\r\n        appid: this.appId,\r\n        contentTypeId: contentType.Id.toString(),\r\n        order: JSON.stringify(idArray),\r\n      },\r\n    });\r\n  }\r\n\r\n  setTitle(item: Field, contentType: ContentType) {\r\n    return this.http.post<null>(this.apiUrl(webApiTypeRoot + 'SetTitle'), null, {\r\n      params: {\r\n        appid: this.appId,\r\n        contentTypeId: contentType.Id.toString(),\r\n        attributeId: item.Id.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  rename(fieldId: number, contentTypeId: number, newName: string) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Rename'), null, {\r\n      params: {\r\n        appid: this.appId,\r\n        contentTypeId: contentTypeId.toString(),\r\n        attributeId: fieldId.toString(),\r\n        newName,\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(item: Field, contentType: ContentType) {\r\n    if (item.IsTitle) {\r\n      throw new Error('Can\\'t delete Title');\r\n    }\r\n\r\n    return this.http.delete<boolean>(this.apiUrl(webApiFieldsRoot + 'Delete'), {\r\n      params: {\r\n        appid: this.appId,\r\n        contentTypeId: contentType.Id.toString(),\r\n        attributeId: item.Id.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  add(newField: Partial<Field>, contentTypeId: number) {\r\n    return this.http.post<number>(this.apiUrl(webApiFieldsRoot + 'Add'), null, {\r\n      params: {\r\n        AppId: this.appId,\r\n        ContentTypeId: contentTypeId.toString(),\r\n        Id: newField.Id.toString(),\r\n        Type: newField.Type,\r\n        InputType: newField.InputType,\r\n        StaticName: newField.StaticName,\r\n        IsTitle: newField.IsTitle.toString(),\r\n        Index: newField.SortOrder.toString(),\r\n      }\r\n    });\r\n  }\r\n\r\n  updateInputType(id: number, staticName: string, inputType: InputTypeStrict) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiFieldsRoot + 'InputType'), null, {\r\n      params: { appId: this.appId, attributeId: id.toString(), field: staticName, inputType }\r\n    });\r\n  }\r\n}\r\n","export function toBase64(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n      resolve((reader.result as string).split(',')[1]);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n\r\nexport function toString(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsText(file);\r\n    reader.onload = () => {\r\n      resolve(reader.result as string);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n"],"x_google_ignoreList":[]}