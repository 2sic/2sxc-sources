"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts"],{2177:(Q,p,o)=>{o.r(p),o.d(p,{ViewsUsageComponent:()=>k});var u=o(8071),w=o(3839),U=o(9736),b=o(6433),I=o(6992);function x(i){const n=i.data;return`ID: ${n.Block.Id}\nGUID: ${n.Block.Guid}`}function T(i){const n=i.data;if(null!=n.Module)return`ID: ${n.Module.Id}\nUsageId: ${n.Module.UsageId}\nTitle: ${n.Module.Title}`}function V(i){return((null!=i.value?"id-action no-padding":"")+" no-outline").split(" ")}function y(i){const n=i.data;if(null!=n.PageId)return`ID: ${n.PageId}`}function Z(i){return((null!=i.value?"id-action no-padding":"")+" no-outline").split(" ")}function M(i){return(null!=i.value?"primary-action highlight":"no-outline").split(" ")}function D(i){null!=i.value&&window.open(i.data.Url,"_blank")}function P(i){const n=i.value;if(null!=n)return`\n    <div style="height: 100%;display: flex;align-items: center;">\n      ${n.IsVisible?'<span class="material-icons-outlined">visibility</span>':'<span class="material-icons-outlined">visibility_off</span>'}\n      ${n.IsDeleted?'<span style="margin-left: 8px;" class="material-icons-outlined">delete</span>':""}\n    </div>\n  `}var G=o(4472),e=o(1699),$=o(9409),m=o(9498),c=o(6575),f=o(6515),_=o(257);function O(i,n){if(1&i){const a=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.copy())}),e.TgZ(1,"span",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",3),e._uU(4,"file_copy"),e.qZA()()}if(2&i){const a=e.oxw();e.Q6J("tippy",a.tooltip),e.xp6(2),e.Oqu(a.id)}}let g=(()=>{var i;class n{constructor(t){this.snackBar=t}agInit(t){if(this.tooltip=t.value,null==this.tooltip)return;const s=this.tooltip.split("\n")[0];this.id=s.split(" ")[1]}refresh(t){return!0}copy(){(0,G.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}return(i=n).\u0275fac=function(t){return new(t||i)(e.Y36($.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage-id"]],decls:1,vars:1,consts:[["matRipple","","class","id-box highlight",3,"tippy","click",4,"ngIf"],["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(t,s){1&t&&e.YNc(0,O,5,2,"div",0),2&t&&e.Q6J("ngIf",s.id)},dependencies:[m.$,c.O5,f.Hw,_.wG],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),n})();var h=o(8849),v=o(2106);let A=(()=>{var i;class n{constructor(){this.isVisible="",this.isDeleted=""}agInit(t){this.filterParams=t}isFilterActive(){return""!==this.isVisible||""!==this.isDeleted}doesFilterPass(t){let s=!1,l=!1;const r=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:t.node.data,getValue:B=>t.node.data[B],node:t.node});return null!=r&&(s=""===this.isVisible||null!=r.IsVisible&&r.IsVisible.toString()===this.isVisible,l=""===this.isDeleted||null!=r.IsDeleted&&r.IsDeleted.toString()===this.isDeleted,s&&l)}getModel(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}}setModel(t){this.isVisible=t?t.isVisible:"",this.isDeleted=t?t.isDeleted:""}afterGuiAttached(t){}filterChanged(){this.filterParams.filterChangedCallback()}}return(i=n).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage-status-filter"]],decls:18,vars:2,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._uU(1,"Visible"),e.qZA(),e.TgZ(2,"mat-radio-group",1),e.NdJ("ngModelChange",function(d){return s.isVisible=d})("ngModelChange",function(){return s.filterChanged()}),e.TgZ(3,"mat-radio-button",2),e._uU(4,"All"),e.qZA(),e.TgZ(5,"mat-radio-button",3),e._uU(6,"Visible"),e.qZA(),e.TgZ(7,"mat-radio-button",4),e._uU(8,"Hidden"),e.qZA()(),e.TgZ(9,"div",0),e._uU(10,"Deleted"),e.qZA(),e.TgZ(11,"mat-radio-group",1),e.NdJ("ngModelChange",function(d){return s.isDeleted=d})("ngModelChange",function(){return s.filterChanged()}),e.TgZ(12,"mat-radio-button",2),e._uU(13,"All"),e.qZA(),e.TgZ(14,"mat-radio-button",3),e._uU(15,"Is deleted"),e.qZA(),e.TgZ(16,"mat-radio-button",4),e._uU(17,"Is not deleted"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngModel",s.isVisible),e.xp6(9),e.Q6J("ngModel",s.isDeleted))},dependencies:[h.JJ,h.On,v.VQ,v.U0],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]}),n})();var S=o(6861),C=o(91),N=o(895),J=o(8621);function R(i,n){if(1&i){const a=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),e._uU(4),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.closeDialog())}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()()(),e.TgZ(8,"p",6),e._uU(9," This shows where this view is being used. Read about the "),e.TgZ(10,"a",7),e._uU(11,"connections between DNN and 2sxc Views"),e.qZA(),e._uU(12," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),e.TgZ(13,"em"),e._uU(14,"Before you get confused about some things you see here, do read the FAQ on that page."),e.qZA()(),e._UZ(15,"router-outlet"),e.TgZ(16,"div",8),e._UZ(17,"ag-grid-angular",9)(18,"div",10),e.qZA()()}if(2&i){const a=n.ngIf,t=e.oxw();e.xp6(3),e.Q6J("tippy",a.viewTooltip),e.xp6(1),e.hij("View: ",null==a.viewUsage?null:a.viewUsage.Name,""),e.xp6(13),e.Q6J("rowData",a.data)("gridOptions",t.gridOptions)}}let k=(()=>{var i;class n{constructor(t,s,l){this.dialogRef=t,this.route=s,this.viewsService=l,this.viewUsage$=new u.X(void 0),this.viewTooltip$=new u.X(void 0),this.data$=new u.X(void 0),this.gridOptions=this.buildGridOptions()}ngOnInit(){const t=this.route.snapshot.paramMap.get("guid");this.viewsService.getUsage(t).subscribe(s=>{const l=s[0];this.viewUsage$.next(l),this.viewTooltip$.next(`ID: ${l.Id}\nGUID: ${l.Guid}`);const r=function F(i){const n=[];for(const a of i.Blocks){0===a.Modules.length&&n.push({Block:{Id:a.Id,Guid:a.Guid}});for(const t of a.Modules)n.push({Block:{Id:a.Id,Guid:a.Guid},Module:t,PageId:t.Page.Id,Name:t.Page.Name,Url:t.Page.Url,Language:t.Page.CultureCode,Status:{IsVisible:t.Page.Visible,IsDeleted:t.IsDeleted}})}return n}(l);this.data$.next(r)}),this.viewModel$=(0,w.a)([this.viewUsage$,this.viewTooltip$,this.data$]).pipe((0,U.U)(([s,l,d])=>({viewUsage:s,viewTooltip:l,data:d})))}ngOnDestroy(){this.viewUsage$.complete(),this.viewTooltip$.complete(),this.data$.complete()}closeDialog(){this.dialogRef.close()}buildGridOptions(){return{...b.f,columnDefs:[{field:"Block",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter",valueGetter:x,cellRenderer:g},{field:"Module",width:76,headerClass:"dense",sortable:!0,filter:"agTextColumnFilter",valueGetter:T,cellClass:V,cellRenderer:g},{field:"Page",width:70,headerClass:"dense",sortable:!0,filter:"agTextColumnFilter",valueGetter:y,cellClass:Z,cellRenderer:g},{field:"Name",flex:2,minWidth:250,sortable:!0,sort:"asc",filter:"agTextColumnFilter",valueGetter:s=>s.data.Name,cellClass:M,onCellClicked:D},{field:"Language",width:90,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:s=>s.data.Language},{field:"Status",width:80,cellClass:"icon no-outline".split(" "),filter:A,cellRenderer:P,valueGetter:s=>s.data.Status}]}}}return(i=n).\u0275fac=function(t){return new(t||i)(e.Y36(S.so),e.Y36(C.gz),e.Y36(I.h))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage"]],decls:2,vars:3,consts:[["class","nav-component-wrapper",4,"ngIf"],[1,"nav-component-wrapper"],["mat-mdc-dialog-title",""],[1,"dialog-title-box"],[3,"tippy"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"dialog-description"],["href","https://go.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"]],template:function(t,s){1&t&&(e.YNc(0,R,19,4,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.viewModel$))},dependencies:[C.lC,m.$,c.O5,N.RK,f.Hw,J.N8,c.Ov]}),n})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.08.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts.becec3b7c8fcfe90.js.map