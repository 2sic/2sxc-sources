"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts"],{9006:(O,m,e)=>{e.d(m,{j:()=>D,x:()=>u});var h=e(37580),p=e(44444),c=e(99293),C=e(81863),_=e(67993),g=e(96133),a=e(9001);let u=(()=>{class f{#t;#e;#n;#a;constructor(){this.featureNameId=h.hFB.required(),this.showIf=(0,h.hFB)(!1),this.#t=(0,p.WQX)(C.h),this.#e=(0,p.WQX)(c.c1b),this.#n=(0,p.WQX)(h.gRc),this.#a=(0,p.WQX)(a.D),this.feature=(0,_.bo)("feature",()=>this.#a.getCurrent(this.featureNameId())),this.show=(0,_.bo)("show",()=>{const i=this.feature();return null!=i&&this.showIf()==(i?.isEnabled??!1)})}openDialog(){D(this.#t,this.featureNameId(),this.#e,this.#n)}static#i=this.\u0275fac=function(M){return new(M||f)};static#o=this.\u0275dir=c.FsC({type:f,inputs:{featureNameId:[1,"featureNameId"],showIf:[1,"showIf"]}})}return f})();function D(f,t,i,M){f.open(g.FeatureInfoDialogComponent,{autoFocus:!1,data:t,viewContainerRef:i,width:"400px"}),M?.markForCheck()}},25081:(O,m,e)=>{e.d(m,{W:()=>C});var h=e(70519),p=e(44444),c=e(3347);let C=(()=>{class _{constructor(a){this.snackBar=a}copyToClipboard(a){(0,h.l)(a),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(u){return new(u||_)(p.KVO(c.UG))};static#e=this.\u0275prov=p.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},28136:(O,m,e)=>{e.d(m,{T:()=>h});const h={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",ContentTypeFieldsReuseDefinitions:"ContentTypeFieldsReuseDefinitions",AppExportAssetsAdvanced:"AppExportAssetsAdvanced",DataExportImportBundles:"DataExportImportBundles",PickerUiCheckbox:"PickerUiCheckbox",PickerUiRadio:"PickerUiRadio",PickerSourceCsv:"PickerSourceCsv",PickerSourceAppAssets:"PickerSourceAppAssets",PickerFormulas:"PickerFormulas",PickerUiMoreInfo:"PickerUiMoreInfo"}},28242:(O,m,e)=>{e.r(m),e.d(m,{AddAppFromFolderComponent:()=>P});var h=e(44444),p=e(84175),c=e(81863),C=e(12938),_=e(28136),g=e(95469),a=e(9001),u=e(11828),D=e(60251),f=e(67037),t=e(83583),i=e(93840),M=e(34601),n=e(99293);let v=(()=>{class o{agInit(l){this.name=l.value,this.tooltip=l.tooltipGetter(l.data)}refresh(l){return!0}static#t=this.\u0275fac=function(d){return new(d||o)};static#e=this.\u0275cmp=n.VBU({type:o,selectors:[["app-app-name-show"]],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(d,s){1&d&&(n.j41(0,"div",0)(1,"span"),n.EFF(2),n.k0s(),n.j41(3,"mat-icon",1),n.EFF(4,"info"),n.k0s()()),2&d&&(n.R7$(2),n.JRh(s.name),n.R7$(),n.Y8G("tippy",s.tooltip))},dependencies:[i.m_,i.An,M.e],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}return o})(),F=(()=>{class o{agInit(l){this.params=l}refresh(l){return!0}onChange(l){this.params.onChange(this.params.data,l.currentTarget.checked)}static#t=this.\u0275fac=function(d){return new(d||o)};static#e=this.\u0275cmp=n.VBU({type:o,selectors:[["app-checkbox-cell"]],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"change","disabled","checked"]],template:function(d,s){1&d&&(n.j41(0,"div",0)(1,"input",1),n.bIt("change",function(T){return s.onChange(T)}),n.k0s()()),2&d&&(n.R7$(),n.Y8G("disabled",s.params.isDisabled)("checked",s.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}return o})();var A=e(3347),E=e(29841);function R(o,x){1&o&&(n.j41(0,"p"),n.EFF(1," Nothing to show. All apps in the 2sxc folder are already installed. "),n.k0s())}function r(o,x){if(1&o&&(n.j41(0,"div"),n.nrm(1,"ag-grid-angular",8),n.k0s()),2&o){const l=n.XpG();n.R7$(),n.Y8G("rowData",l.pendingApps())("gridOptions",l.gridOptions)}}let P=(()=>{class o{#t;#e;constructor(l,d){this.dialog=l,this.snackBar=d,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.installing=!1,this.features=(0,h.WQX)(a.D),this.#t=this.features.isEnabled[_.T.AppSyncWithSiteFiles],this.#e=(0,C.d)(t.U),this.AppSyncWithSiteFiles=_.T.AppSyncWithSiteFiles,this.pendingApps=this.#e.getPendingApps().value}closeDialog(){this.dialog.close()}onChange(l,d){const s=this.pendingApps();d?s.push(l):s.splice(s.indexOf(l),1),this.pendingApps.set(s)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.#e.installPendingApps(this.pendingApps()).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...D.C,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:F,cellRendererParams:()=>({isDisabled:!this.#t(),onChange:(s,I)=>this.onChange(s,I)})},{...u.r.ItemsText,field:"Name",flex:1,sort:"asc",cellRenderer:v,cellRendererParams:{tooltipGetter:s=>`Server folder: ${s.ServerFolder}\nFolder: ${s.Folder}\nVersion: ${s.Version}\nDescription: ${s.Description}`}}]}}static#n=this.\u0275fac=function(d){return new(d||o)(n.rXU(c.k),n.rXU(A.UG))};static#a=this.\u0275cmp=n.VBU({type:o,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(d,s){2&d&&n.Avn("className",s.hostClass)},decls:15,vars:4,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(d,s){if(1&d&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2),n.EFF(3,"Add App from Folder"),n.k0s()(),n.j41(4,"div",3),n.nrm(5,"app-feature-text-info",4),n.j41(6,"p"),n.EFF(7," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),n.k0s(),n.nVh(8,R,2,0,"p"),n.nVh(9,r,2,2,"div"),n.k0s(),n.j41(10,"mat-dialog-actions",5)(11,"button",6),n.bIt("click",function(){return s.closeDialog()}),n.EFF(12," Cancel "),n.k0s(),n.j41(13,"button",7),n.bIt("click",function(){return s.install()}),n.EFF(14," Install "),n.k0s()()()),2&d){let I,T;n.R7$(5),n.Y8G("featureNameId",s.AppSyncWithSiteFiles),n.R7$(3),n.vxM(0==(null==(I=s.pendingApps())?null:I.length)?8:-1),n.R7$(),n.vxM((null==(T=s.pendingApps())?null:T.length)>0?9:-1),n.R7$(4),n.Y8G("disabled",0===s.pendingApps().length||s.installing)}},dependencies:[c.M,p.Hl,p.$z,g.L,f.p,E.xs],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}return o})()},45943:(O,m,e)=>{e.d(m,{N:()=>_});var h=e(44444),p=e(24467),c=e(99293);const C="admin/feature/details";let _=(()=>{class g extends p.B{getFeatureDetail(u){return this.newHttpResource(()=>({url:this.apiUrl(C),params:{nameId:u()}}))}getFeatureDetails(u){const D=(0,h.vPA)([]);for(const f of u)this.fetchPromise(C,{params:{nameId:f}}).then(t=>{D.update(i=>[...i,t])});return D}static#t=this.\u0275fac=(()=>{let u;return function(f){return(u||(u=c.xGo(g)))(f||g)}})();static#e=this.\u0275prov=h.jDH({token:g,factory:g.\u0275fac})}return g})()},51191:(O,m,e)=>{e.d(m,{O:()=>A});var h=e(37580),p=e(84175),c=e(53777),C=e(81863),_=e(93840),g=e(90852),a=e(12938),u=e(69914),D=e(25081),f=e(67993),t=e(99293),i=e(44444);function M(E,R){if(1&E&&(t.j41(0,"div",1)(1,"div",2),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",3)(5,"span"),t.EFF(6),t.nI1(7,"translate"),t.k0s()()()),2&E){const r=t.XpG(2);t.R7$(2),t.SpI("",t.bMT(3,2,"Features.Status"),":"),t.R7$(4),t.JRh(t.bMT(7,4,r.feature().isEnabled?"Features.Active":"Features.NotActive"))}}function n(E,R){if(1&E){const r=t.RV6();t.j41(0,"div",1)(1,"div",2),t.EFF(2,"GUID:"),t.k0s(),t.j41(3,"div",8)(4,"span",4),t.bIt("click",function(){i.eBV(r);const o=t.XpG(2);return i.Njj(o.clipboard.copyToClipboard(o.feature().guid))}),t.EFF(5),t.k0s()()()}if(2&E){const r=t.XpG(2);t.R7$(5),t.JRh(r.feature().guid)}}function v(E,R){if(1&E){const r=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){i.eBV(r);const o=t.XpG(2);return i.Njj(o.dialog.close())}),t.EFF(1,"Close"),t.k0s()}}function F(E,R){if(1&E){const r=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.j41(4,"mat-card-content"),t.nrm(5,"p",0),t.nI1(6,"safeHtml"),t.j41(7,"div",1)(8,"div",2),t.EFF(9,"ID:"),t.k0s(),t.j41(10,"div",3)(11,"span",4),t.bIt("click",function(){i.eBV(r);const o=t.XpG();return i.Njj(o.clipboard.copyToClipboard(o.feature().nameId))}),t.EFF(12),t.k0s()()(),t.nVh(13,M,8,6,"div",1),t.nVh(14,n,6,1,"div",1),t.j41(15,"div",1)(16,"div",2),t.EFF(17,"Security Rating:"),t.k0s(),t.j41(18,"div",3)(19,"span"),t.EFF(20),t.k0s()()()(),t.j41(21,"mat-card-actions",5)(22,"a",6)(23,"mat-icon"),t.EFF(24,"open_in_new"),t.k0s(),t.EFF(25," Find out more "),t.k0s(),t.nVh(26,v,2,0,"button",7),t.k0s()()}if(2&E){const r=t.XpG();t.R7$(3),t.JRh(r.feature().name),t.R7$(2),t.Y8G("innerHtml",t.bMT(6,8,r.feature().description),t.npT),t.R7$(7),t.JRh(r.feature().nameId),t.R7$(),t.vxM(r.mySpecs().showStatus?13:-1),t.R7$(),t.vxM(r.mySpecs().showGuid?14:-1),t.R7$(6),t.JRh(r.feature().security.Impact+": "+r.feature().security.Message),t.R7$(2),t.Y8G("href",r.feature().link,t.B4B),t.R7$(4),t.vxM(0!=r.mySpecs().showClose?26:-1)}}let A=(()=>{class E{constructor(r,P){this.dialogSpecs=r,this.dialog=P,this.specs=(0,h.hFB)(),this.mySpecs=(0,f.bo)("mySpecs",()=>this.specs()??this.dialogSpecs),this.feature=(0,f.bo)("feature",()=>this.mySpecs()?.feature),this.clipboard=(0,a.d)(D.W)}static#t=this.\u0275fac=function(P){return new(P||E)(t.rXU(C.e,8),t.rXU(C.k))};static#e=this.\u0275cmp=t.VBU({type:E,selectors:[["app-feature-details-dialog"]],inputs:{specs:[1,"specs"]},decls:1,vars:1,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],[3,"click"],["align","end"],["target","_blank","mat-raised-button","","color","accent",1,"eav-card-action-button",3,"href"],["mat-raised-button","",1,"eav-card-action-button"],[1,"eav-info-row__value","eav_click"],["mat-raised-button","",1,"eav-card-action-button",3,"click"]],template:function(P,o){1&P&&t.nVh(0,F,27,10,"mat-card"),2&P&&t.vxM(o.feature()?0:-1)},dependencies:[c.Hu,c.RN,c.YY,c.m2,c.MM,c.dh,p.Hl,p.$z,_.m_,_.An,u.$,g.h,g.D9],encapsulation:2})}return E})()},95469:(O,m,e)=>{e.d(m,{L:()=>t});var h=e(37580),p=e(93840),c=e(90852),C=e(34601),_=e(67993),g=e(9006),a=e(99293),u=e(44444);const D=["*"];function f(i,M){if(1&i){const n=a.RV6();a.j41(0,"div",1),a.nI1(1,"translate"),a.bIt("click",function(){u.eBV(n);const F=a.XpG();return u.Njj(F.openDialog())}),a.j41(2,"mat-icon"),a.EFF(3),a.k0s(),a.j41(4,"div",2)(5,"div",3),a.EFF(6),a.nI1(7,"translate"),a.k0s(),a.j41(8,"div",4),a.EFF(9),a.nI1(10,"translate"),a.k0s(),a.SdG(11),a.k0s()()}if(2&i){const n=a.XpG();a.Y8G("tippy",a.i5U(1,7,"Features.Tooltip",n.feature())),a.R7$(2),a.HbH(a.VkB("icon icon-",n.icon())),a.R7$(),a.JRh(n.icon()),a.R7$(3),a.JRh(a.bMT(7,10,"Features.FeatureNotActivated")),a.R7$(3),a.JRh(a.bMT(10,12,"Features.ClickToFindOutMore"))}}let t=(()=>{class i extends g.x{constructor(){super(),this.asInfo=(0,h.hFB)(!1),this.icon=(0,_.bo)("icon",()=>this.asInfo()?"info":"warning"),console.log("2dg",this.asInfo())}static#t=this.\u0275fac=function(v){return new(v||i)};static#e=this.\u0275cmp=a.VBU({type:i,selectors:[["app-feature-text-info"]],inputs:{asInfo:[1,"asInfo"]},features:[a.Vt3],ngContentSelectors:D,decls:1,vars:1,consts:[[1,"feature-text-info",3,"tippy"],[1,"feature-text-info",3,"click","tippy"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(v,F){1&v&&(a.NAR(),a.nVh(0,f,12,14,"div",0)),2&v&&a.vxM(F.show()?0:-1)},dependencies:[p.m_,p.An,c.h,c.D9,C.e],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]})}return i})()},96133:(O,m,e)=>{e.r(m),e.d(m,{FeatureInfoDialogComponent:()=>t});var h=e(44444),p=e(81863),c=e(12938),C=e(51191),_=e(25081),g=e(45943),a=e(99293),u=e(29658);const D=i=>({feature:i,showGuid:!1,showStatus:!0,showClose:!0});function f(i,M){1&i&&a.nrm(0,"app-feature-details-dialog",0),2&i&&a.Y8G("specs",a.eq3(1,D,M))}let t=(()=>{class i{#t;constructor(n,v,F){this.dialogData=n,this.dialog=v,this.route=F,this.#t=(0,c.d)(g.N),this.featureId=(0,h.vPA)(""),this.clipboard=(0,c.d)(_.W)}ngOnInit(){this.featureId.set(this.route.snapshot.data.featureId||this.dialogData||""),this.featureDetails=this.#t.getFeatureDetail(this.featureId).value}static#e=this.\u0275fac=function(v){return new(v||i)(a.rXU(p.e),a.rXU(p.k),a.rXU(u.nX))};static#n=this.\u0275cmp=a.VBU({type:i,selectors:[["app-feature-info-dialog"]],decls:1,vars:1,consts:[[3,"specs"]],template:function(v,F){if(1&v&&a.nVh(0,f,1,3,"app-feature-details-dialog",0),2&v){let A;a.vxM((A=F.featureDetails())?0:-1,A)}},dependencies:[C.O],encapsulation:2})}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts.8f3844c102cb98a1.js.map